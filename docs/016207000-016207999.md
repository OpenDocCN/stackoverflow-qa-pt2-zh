# StackOverflow 问答 16207000-16207999

# haskell - 将正确性约束直接编码到 Haskell 类型系统中？

> ID：16207008
> 
> 赞同：17
> 
> 时间：2013-04-25T05:29:20.927
> 
> 标签：haskell

在阅读马特梅写的[文章](http://matt.might.net/articles/best-programming-languages/)时，我看到了以下句子。

> 有经验的程序员擅长将正确性约束直接编码到 Haskell 类型系统中

有人可以解释这句话的含义或提供一个简短的例子吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-25T05:47:24.937

这可以涵盖*非常*广泛的不同技术。最简单的基本上是不可避免的：如果你想要一个可以为 null 的值，它可以依赖于可变状态或用户输入，你必须用类型系统标记它。这就是分别做`Maybe`的`ST`和`IO`做的。因此，如果您有不属于上述三种类型之一的东西，您就知道它必须是一个不能为空的引用透明值。

上面的技术对于语言来说是非常基础的，基本上是不可避免的。但是，还有其他一些更有趣的方法可以使用类型系统来提高安全性和正确性。

一个有用的例子是防止 SQL 注入。SQL 注入是 Web 应用程序中的常见问题——关于基本思想，请查看[这个 XKCD 卡通](http://xkcd.com/327/)。我们实际上可以使用类型系统来确保传递给数据库的任何字符串都已被清理。基本思想是为“原始”字符串创建一个新类型：

```
newtype Raw a = Raw a 
```

然后，确保所有用于从用户获取输入的函数都返回`Raw`值而不是普通字符串。最后，您只需要一个清理功能：

```
sanitize :: Raw String -> String 
```

由于普通函数接受`String`而不是`Raw`，因此您将无法意外传入未经处理的字符串。而且由于我们定义了`Raw`using `newtype`，它根本没有运行时开销。

[Yesod](http://yesodweb.com/)是主要的 Haskell Web 框架之一，它使用类似这样的技术来防止 SQL 注入。它还有其他一些很酷的方法，例如使用类型系统来防止数据库中的链接断开；你应该检查一下。

在真正极端的情况下，您甚至可以使用类型系统来确保矩阵的大小正确。这是一个非常简单的方法来做到这一点。首先，我们需要类型级别的数字：

```
data Z
data S n 
```

（我们在这里在[类型级别使用](http://www.haskell.org/haskellwiki/Type_arithmetic)[Peano Arithmetic](http://www.haskell.org/haskellwiki/Peano_numbers)。）这个想法很简单：0是后继函数，1也是，2 等等。`Z``S``S Z``S (S Z)`

我们现在可以编写一个安全的矩阵乘法函数：

```
matMul :: Mat a b -> Mat b c -> Mat a c 
```

如果内部维度匹配，此函数将只允许您将矩阵相乘，并确保生成的矩阵在其类型中具有正确的维度。

[类型安全的矩阵乘法](https://stackoverflow.com/questions/8332392/type-safe-matrix-multiplication)有更多细节。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T07:18:19.767

好吧，在我看来，像您所看到的那样的说明经常无法传达的一件事是，这种按类型正确性的东西通常不是“自然地”发生的东西，而是来自使用设计类型的技术对于来自其他语言的程序员来说并不明显。我最喜欢的例子之一来自[关于幻象类型的 Haskell Wiki 页面](http://www.haskell.org/haskellwiki/Phantom_type)；如果您查看该页面上的第 1 节，他们有这个示例（IMO 应该是`newtype`声明而不是`data`）：

```
data FormData a = FormData String 
```

在`a`做什么？好吧，它的作用是人为地使`FormData "foo" :: FormData Validated`和`FormData "foo" :: FormData Unvalidated`，尽管它们的“真正”是相同的，但现在具有不兼容的类型，因此您可以强制您的代码不要混合使用其中的一种。好吧，让我不要重复页面所说的内容，它相对容易阅读（至少第 1 节）。

我在一个断断续续的项目中使用了一个更复杂的示例：[OLAP](http://en.wikipedia.org/wiki/Online_analytical_processing)超立方体可以看作是一种数组，它不是由整数索引索引，而是由数据模型对象（如人、天、产品线）索引， ETC。：

```
-- | The type of Hypercubes.
data Hypercube point value = ...

-- | Access a data point in a hypercube.
get :: Eq point => Hypercube point value -> point -> value

-- | This is totally pseudocode...
data Salesperson = Mary | Joe | Irma deriving Eq
data Month = January | February | ... | December deriving Eq
data ProductLine = Widget | Gagdet | Thingamabob

-- Pseudo-example: compute sales numbers grouped by Salesperson, Month and
-- ProductLine for the combinations specified as the "frame"
salesResult :: HyperCube (Salesperson, Month, ProductLine) Dollars 
salesResult = execute salesQuery frame
    where frame = [Joe, Mary] `by` [March, April] `by` [Widgets, Gadgets]
          salesQuery = ...

-- Read from salesResult how much Mary sold in Widgets on April.
example :: Dollars
example = get salesResult (Mary, April, Widgets) 
```

我希望这比我担心的更有意义。无论如何，该示例的要点是以下问题： 的类型`get`，如此处所述，允许您要求 a`Hypercube`告诉您它没有的点的值：

```
badExample :: Dollar
badExample = get salesResult (Irma, January, Thingamabob) 
```

一种可能的解决方案是让`get`操作返回`Maybe value`而不是仅仅返回`value`. 但我们实际上可以做得更好；我们可以设计一个 API，其中 a`Hypercube`只能被询问它包含的值。关键与`FormData`示例相似，但更复杂的变体。首先我们介绍一下这个幻像类型：

```
data Cell tag point = Cell { getPoint :: point } deriving Eq 
```

现在我们重新制定`Hypercube`并`get`成为标签敏感的。在这个重新制定的示例中，我实际上将使其更加具体。我们从这个开始：

```
{-# LANGUAGE ExistentialTypes #-}

data AuxCube tag point value = 
    AuxCube { getFrame :: [Cell tag point]
            , get :: Cell tag point -> value }

-- This is using a type system extension called ExistentialTypes:
data Hypercube point value = forall tag. Hypercube (AuxCube tag point value)

-- How to use one of these cubes.  Suppose we have:
salesResult :: Hypercube (Salesperson, Month, ProductLine) Dollars 
salesResult = execute salesQuery points
    where points = [Joe, Mary] `by` [March, April] `by` [Widgets, Gadgets]
          salesQuery = ...

-- Now to read values, we have to do something like this:
example = case salesResult of
              Hypercube (AuxCube frame getter) -> getter (head frame) 
```

如果在这里的使用使您感到困惑，我深表歉意`ExistentialTypes`，但长话短说，它在此示例中的作用基本上是每个都`Hypercube`包含一个`AuxCube`具有唯一匿名标记类型参数的，因此现在没有两个`Hypercube`s 可以具有`Cell`相同的 s类型。出于这个原因，如果我们使用模块系统来阻止调用者构造`Cell`s，调用者就不可能向 a 请求`Hypercube`它`Cell`没有值的 a。

致谢：[我是通过在 Stack Overflow 中提问来学习这项技术的](https://stackoverflow.com/questions/13078307/how-to-index-an-element-type-by-a-source-container-value)。

# jquery - 在悬停功能上暂停 jQuery 幻灯片

> ID：16207013
> 
> 赞同：0
> 
> 时间：2013-04-25T05:29:42.677
> 
> 标签：jquery, hover, slideshow, jquery-hover

我有这个代码：

```
$(function () {
var current = 0,
$imgs = jQuery('#m_slider .ms1');
imgAmount = $imgs.length;

$($imgs.css('position', 'absolute').hide().get(0)).show();

window.setInterval(swapImages, 5000);

function swapImages() {

var $currentImg = $('.ms1:visible');

var $nextImg = $('.ms1:hidden').eq(Math.floor(Math.random() *$('.ms1:hidden').length));
    speed = 500;
// animation speed should be the same for both images so we have a smooth change
$currentImg.fadeOut(speed);
$nextImg.fadeIn(speed);
}
}); 
```

这工作得很好，我想在悬停时暂停我的幻灯片。我在哪里添加 .hover() 函数？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:31:47.727

你可以试试这个（未测试）：

```
$(function () {
var current = 0, timer,
    $imgs = jQuery('#m_slider .ms1'),
    imgAmount = $imgs.length;

$($imgs.css('position', 'absolute').hide().get(0)).show();

timer = setInterval(swapImages, 5000);

jQuery('#m_slider').mouseenter(function() {
    clearInterval(timer);
}).mouseleave(function() {
    timer = setInterval(swapImages, 5000);
});

function swapImages() {

    var $currentImg = $('.ms1:visible');

    var $nextImg = $('.ms1:hidden').eq(Math.floor(Math.random() *$('.ms1:hidden').length));
    var speed = 500;
    // animation speed should be the same for both images so we have a smooth change
    $currentImg.fadeOut(speed);
    $nextImg.fadeIn(speed);
}
}); 
```

# c++ - 如何从外部函数 C++ 访问动态结构？

> ID：16207017
> 
> 赞同：1
> 
> 时间：2013-04-25T05:29:54.660
> 
> 标签：c++, dynamic, data-structures, dev-c++

我正在尝试制作一个非常简单的基于文本的游戏，当我尝试从外部函数访问动态结构时遇到错误。我在头文件中初始化了所有变量和结构，并在主函数中声明了一个动态分配。但我仍然有错误。我错过了什么吗？这是我的代码。

==================主函数“new.cpp”====================

```
#include <stdlib.h>
#include <iostream>
#include <string>
#include "game.h"
using namespace std;

difficulty _df_1;
player* player_1 = new player[3];
int main()
    {
        //initialize player stats
        player_1->hp = 100;
        player_1->life = 3;
        player_1->mana = 50;
        player_1->player_id = 1;
        player_1->level = 1;
        player_1->player_name= "emmet";
        //..end
        int turn=1;
        cout << "What is your name? <<<";
        getline(cin,player_1->player_name,'\n');
        cout << "Choose a difficulty level: [0]Easy [1]Normal [2]Godlike" << endl;
        int ch;
        cin >> ch;
        switch(ch)
            {
                case 0:
                    cout << "Scardy Cat chose EASY." << endl;
                    break;
                case 1:
                    cout << "A really nice way to start. NORMAL" << endl;
                    break;
                case 2:
                    cout << "Overly Manly Man is playing GODLIKE." << endl;
                    break;
                default:        cout << "I wonder how you can play this game if you can even read simple instructions."<< endl;return 0; break; 
            }
        while(turn == 1)
            {
                char ch;
                cout << "What do you want to do now? \n <<<<"; 
                cin >> ch;
                cin.ignore(5,'\n');
                switch(ch)
                    {
                        case 'a': case 'A':
                            player_stat();
                            break;
                        case 'v': case 'V':
                            cheat_menu();
                            break;
                        case 'x': case 'X':
                            return 0;
                            break;
                        case '`':

                            break;
                        default:    cout << "We were unable to process your request. Please try again" << endl; break;
                    }
            }
        delete player_1;
        return 0;
    }

void cheat_menu()
    {
        cout << "CHEATERS WILL ROT IN THE DEEPEST DEPTHS OF TARTARUS." << endl;
        cout << "Enter Code:" << endl;
        string cheat;
        getline(cin,cheat,'\n');
            if(cheat == "poo")
                {
                    system("sleep 3");
                    cout << "Cheat Activated.." << endl;
                    player_1->hp += 1000;
                    player_1->level += 10;
                    player_1->mana += 1000;
                    player_stat();
                }
            else
                {
                    cout << "Wrong cheat code.." << endl;
                }
        //system("sleep 3");
        //system("clear");
    } 
```

==================结束主函数==============

=======外部函数“player_stat.cpp”===========

```
#include <iostream>
#include "game.h"
using namespace std;
void player_stat()
    {
        cout << "Name: " << player_1->player_name  << endl
        << "Hp: " << player_1->hp << endl
        << "Life: " << player_1->life << "\t Mana: " << player_1->mana << endl
        << "Level: " << player_1->level << "\t XP: " << player_1->xp
        << endl;
        //system("sleep 3");
        //system("clear");
} 
```

==================结束外部函数==============

==========头文件“game.h”===================

```
#ifndef _GAME_
#define _GAME_

#include "player_stat.cpp"
using namespace std;

//function prototypes...
void player_stat();
void cheat_menu();

//structs for player and NPC
struct player
    {
        string player_name;
        int life;
        double atk;
        double hp;
        double mana;
        int player_id;
        int level;
        long int xp;
        string weapon_name;
        double weapon_damage;
    };
enum difficulty {EASY,NORMAL,GODLIKE};

#endif 
```

===========结束头文件=======================

这些是我得到的错误。请不要介意 int main() 中的其他遗漏函数。:P

```
In file included from game.h:4
from new.cpp
in function `void player_stat()':
`player_1' undeclared (first use in this function)
(Each undeclared identifier is reported only once for each function it appears in.)
At global scope:
`player*player_1' used prior to declaration 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:33:42.390

添加

> 外部玩家* player_1；

到游戏.h

这将使 player_1 变量在所有模块中都可用。

也删除

> #include "player_stat.cpp"

您不应该在头文件中包含任何 cpp 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:35:20.947

`extern`您使用存储说明符声明变量：

```
extern player* player_1; 
```

这告诉编译器该`player_1`变量是在其他地方定义的，链接器稍后会解析它。

* * *

另外，正如我所指出的，您实际上分配*了三个*播放器对象。如果您只需要一个，则不要分配三个：

```
player* player_1 = new player; 
```

但是，这也不是必需的，声明一个普通的非指针变量也可以正常工作：

```
player player_1; 
```

然后在您`extern`用来告诉编译器该变量在其他地方定义的其他文件中：

```
extern player player_1; 
```

# media-player - 支持 MPEG-DASH 的媒体播放器

> ID：16207018
> 
> 赞同：2
> 
> 时间：2013-04-25T05:29:55.287
> 
> 标签：media-player, mpeg2-ts, mpeg-dash

我希望在不同的 DASH 支持的客户端上播放和测试 DASH MPD 文件。我已经使用 VLC dash 插件进行了测试。是否还有其他支持和播放 DASH MPD 文件的播放器/插件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-06T21:25:20.590

现在有[http://www.dash-player.com](http://www.dash-player.com)，它支持开箱即用的 Wowza MPD 以及其他 MPD。它带有 HTML5/JS，以及对 Adob​​e Flash 的后备。基本版是免费的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-07T14:33:07.347

我体验过的一个客户端是 Helix SDK for Android，它支持 MPEG-DASH。这是一个商业许可和支持的客户端，专门用于 Android 2.2 到 Android 4.x 设备的复古支持。有趣的是，Helix SDK 支持 MPEG-DASH（使用 MP4）和 HLSv4，以提供支持两种竞争 HTTP 流技术的混合和匹配，或者让您可以选择使用相同的代码从 HLS 迁移到 MPEG-DASH。我已经在商业服务中开发 Android 应用程序时使用了它。

网上有一些幻灯片可以提供见解 [http://www.slideshare.net/DavidJSmith2/helix-hls-and-mpegdash-sdk-for-android](http://www.slideshare.net/DavidJSmith2/helix-hls-and-mpegdash-sdk-for-android)

以及商业网站上的更多详细信息 [http://www.realnetworks.com/helix/helix-sdk.aspx](http://www.realnetworks.com/helix/helix-sdk.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-19T06:54:40.680

还有两个值得一提的 MPEG-DASH 播放器：

1.  MP4Client 作为 GPAC 项目的一部分（[这里](http://gpac.wp.mines-telecom.fr/)）
2.  Qt Player 作为 libdash 项目的一部分（[这里](http://www.bitmovin.net/libdash/)）

两者都是开源的并且有一个支持社区。

IMO GPAC 项目更好（另一个非常新），我目前正在将它用于我自己的 MPEG-DASH 项目。

顺便说一句，对于最新的 VLC Dash 插件，您必须从夜间源代码编译。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-21T08:24:55.763

请参阅支持、和for （API 级别 16）及更高级别的[ExoPlayer 。](http://developer.android.com/guide/topics/media/exoplayer.html)`HTTP (DASH)``SmoothStreaming``persistent caching``Android 4.1`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-27T00:49:01.257

你从哪里得到 vlc dash 插件我找不到它...我现在不知道有任何可用的 mpeg dash 播放器。据说有flash版本，但只是原型，不可用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-18T13:27:50.813

有 DASH-IF 参考客户端，它使用媒体源扩展在浏览器中本地播放。目前唯一发布的支持浏览器是 Chrome，但您可以在此处在最新播放器中测试流。 [http://dashif.org/reference/players/javascript/](http://dashif.org/reference/players/javascript/)

您应该知道在不同的 chrome 通道中有不同级别的支持

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-24T09:25:24.723

我创建了以下 MPD，但我无法在 DASHIF JS 播放器 @ [http://dashif.org/reference/players/javascript/上播放它](http://dashif.org/reference/players/javascript/)

但是同样的 MPD，我可以通过 GPAC 的 MP4Client/OSMO4 播放

```
<MPD type="static" xmlns="urn:mpeg:DASH:schema:MPD:2011" profiles="urn:mpeg:dash:profile:full:2011" minBufferTime="PT10.5S" mediaPresentationDuration="PT0H2M31.63S">
<ProgramInformation moreInformationURL="http://gpac.sourceforge.net">
<Title>Media Presentation Description for file flight_600.mp4 generated with GPAC    </Title>
</ProgramInformation>
<Period start="PT0S" duration="PT0H2M31.63S">
<AdaptationSet>
<ContentComponent id="1" contentType="video"/>
<SegmentTemplate initialization="flight_init.mp4"/>
<Representation id="1" mimeType="video/mp4" codecs="avc1.64000d" width="320"  height="180" startWithSAP="1" bandwidth="589005">
<SegmentTemplate timescale="1000" duration="1625" media="flight_test_flight_600$Number$.mp4" startNumber="1"/>
</Representation>
<Representation id="2" mimeType="video/mp4" codecs="avc1.64001e" width="640" height="360" startWithSAP="1" bandwidth="978740">
<SegmentTemplate timescale="1000" duration="1625" media="flight_test_flight_1000$Number$.mp4" startNumber="1"/>
</Representation>
<Representation id="3" mimeType="video/mp4" codecs="avc1.64001f" width="1280" height="720" startWithSAP="1" bandwidth="2906174">
<SegmentTemplate timescale="1000" duration="1625" media="flight_test_flight_3000$Number$.mp4" startNumber="1"/>
</Representation>
<Representation id="4" mimeType="audio/mp4" codecs="mp4a.40.02" sampleRate="44100" numChannels="2" lang="und" startWithSAP="1" bandwidth="122971">
<SegmentTemplate timescale="1000" duration="1996" media="flight_test_flight_aud$Number$.mp4" startNumber="1"/>
</Representation>
</AdaptationSet>
</Period>
</MPD> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-23T14:37:00.833

这是 wowza 的支持 MPEG-DASH 的测试播放器

[http://www.wowza.com/resources/3.6.0/examples/VideoOnDemandStreaming/MPEGDASHPlayer/player.html](http://www.wowza.com/resources/3.6.0/examples/VideoOnDemandStreaming/MPEGDASHPlayer/player.html)

# facebook-ios-sdk - Facebook 原生分享对话功能在 iOS 上“目前不可用”

> ID：16207019
> 
> 赞同：0
> 
> 时间：2013-04-25T05:30:04.973
> 
> 标签：facebook-ios-sdk

我正在尝试将 SDK 3.5 集成到我的 iOS 应用程序中。我可以让 facebook 应用程序弹出共享对话框并要求我输入文本。但是，一旦我点击“发布”，它就会向我显示一条警报“Beta 功能此功能目前不可用”。这是临时错误还是我需要在我的应用设置中打开的东西？这是错误的屏幕截图：

[https://www.dropbox.com/s/yu8fgh46prmp1aw/Photo%20Apr%2025%2C%2010%2046%2002%20PM.png](https://www.dropbox.com/s/yu8fgh46prmp1aw/Photo%20Apr%2025%2C%2010%2046%2002%20PM.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T03:40:39.380

到目前为止，此功能仅在 Beta 版中启用。您需要将此行添加到您的共享对话框代码中以使其工作。

// 设置此标志以启用共享对话框 beta 功能 [FBSettings enableBetaFeature:FBBetaFeaturesShareDialog];

有关更多详细信息，您可以在此处查看操作方法：[https ://developers.facebook.com/docs/howtos/share-dialogs-ios-sdk/](https://developers.facebook.com/docs/howtos/share-dialogs-ios-sdk/)

# python - Python pandas read_csv 类似于从列表到数据帧的功能？

> ID：16207023
> 
> 赞同：0
> 
> 时间：2013-04-25T05:30:26.470
> 
> 标签：python, datetime, csv, pandas

我有一个列表，其值如下：

```
[['2013-04-02 19:42:00.474', '1'],
['2013-04-02 19:42:00.529', '2'],
['2013-04-02 19:42:00.543', '3'],
['2013-04-02 19:42:00.592', '4'],
['2013-04-02 19:42:16.671', '5'],
['2013-04-02 19:42:16.686', '6'],
['2013-04-02 19:42:16.708', '7'],
['2013-04-02 19:42:16.912', '8'],
['2013-04-02 19:42:16.941', '9'],
['2013-04-02 19:42:19.721', '10'],
['2013-04-02 19:42:22.826', '11'],
['2013-04-02 19:42:25.609', '8'],
['2013-04-02 19:42:58.225', '5']] 
```

我知道这是否在 csv 文件中，我可以将其读入 DataFrame，并将 Date 和 Timestamps 放入索引中，以使 DataFrame 成为时间序列。

如何在不将列表保存到 csv 文件的情况下实现这一点？

我试过 df=pd.DataFrame(tlist, columns=['date_time', 'count']) 然后 df=df.set_index('date_time')

但是索引值是以对象的形式出现的，而不是时间戳：

```
df.index

Index([2013-04-02 19:42:00.474, 2013-04-02 19:42:00.529, 2013-04-02 19:42:00.543, ............], dtype=object) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:48:39.803

```
In [40]: df.index = df.index.to_datetime()

In [41]: df.index
Out[41]: 
<class 'pandas.tseries.index.DatetimeIndex'>
[2013-04-02 19:42:00.474000, ..., 2013-04-02 19:42:58.225000]
Length: 13, Freq: None, Timezone: None 
```

# ruby-on-rails - 重新加载时在 Rails 插件中运行任意代码

> ID：16207028
> 
> 赞同：0
> 
> 时间：2013-04-25T05:30:46.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3, plugins

我已经构建了一个 rails 插件，它需要构建一些文件才能正常工作。用户可以手动将其作为 rake 任务启动，但为了方便开发，我想添加在刷新浏览器时重新运行此构建的选项。

为了清楚起见，我不想每次刷新都重新加载插件，也不想重新加载任何其他 ruby​​ 文件。每次 Rails 决定重新加载它的库时，我都想运行一些任意的 ruby​​ 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:15:09.493

**第一个解决方案：**

您必须添加：

```
config.autoload_paths += %W(#{config.root}/lib) 
```

在 config/application.rb 的 Application 类中

请参考此链接[https://rails.lighthouseapp.com/projects/8994/tickets/5218-rails-3-rc-does-not-autoload-from-lib](https://rails.lighthouseapp.com/projects/8994/tickets/5218-rails-3-rc-does-not-autoload-from-lib)

**另一个：**

试一试比较有用，

新文件：`config/initializers/reload_lib.rb`

```
if Rails.env == "development"
  lib_reloader = ActiveSupport::FileUpdateChecker.new(Dir["lib/**/*"]) do
    Rails.application.reload_routes! # or do something better here
  end

  ActionDispatch::Callbacks.to_prepare do
    lib_reloader.execute_if_updated
  end
end 
```

这很恶心，但它是一个黑客。可能有更好的方法来触发完全重新加载，但这对我有用。我的具体用例是安装在 Rails 路由上的 Rack 应用程序，因此我需要在开发过程中重新加载它。

基本上它的作用是检查`/lib`自上次加载以来是否有任何文件已更改（修改的时间戳），然后如果它们更改则触发重新加载。

我也可能会提到我在我的`config/application.rb`

```
config.autoload_paths += %W(#{config.root}/lib)
config.autoload_paths += Dir["#{config.root}/lib/**/"] 
```

默认情况下，它确保我的 lib 目录中的所有内容都被加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T00:00:19.840

我遇到了这个更重要的解决方案。

```
ActionDispatch::Callbacks.to_prepare do
  Rails.logger.warn "Look at me I'm updating!"
end 
```

# linux - 复制与不同文件夹中名称匹配的文件

> ID：16207029
> 
> 赞同：0
> 
> 时间：2013-04-25T05:30:48.757
> 
> 标签：linux, find

我在用

```
find ../../ -type f -name <filename>*.PDF -print0 | xargs -0 cp --target-directory=Directory name with path>; 
```

但它只复制一个文件。它不会复制所有具有相同名称的文件。我需要搜索和复制的文件数量相同，但它在不同的日期和不同的文件夹中创建。如何解决这个问题。我已经创造了很多我在这方面面临的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:59:31.370

这将为您提供重复的文件。获得名称后，您可以`find`使用脚本将其删除：

```
for i in `find .|grep pom.xml`; do 
   basename $i;
done |sort|uniq -c|sort -n|cut -b9- 
```

PS：大家都很着急。在 StackOverflow 中通常不赞成在帖子中添加紧迫性，并且您可能会引发相反的反应

# c# - PGP File Decryption

> ID：16207034
> 
> 赞同：1
> 
> 时间：2013-04-25T05:30:57.457
> 
> 标签：c#, process, pgp

Need some help with pgp file decryption anyone have an idea how to do it in c#? I have it implemented through `process.start ("cmd.exe", command)` but its not doing anything other than openning the `C:\Windows\System32\IISExpress>` the command line not getting executed,

any help is appreciated.

Code Snippet:

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Maximized;
startInfo.FileName = "cmd.exe";
startInfo.Arguments = "pgp --decrypt " + inputfile+ " -r \"inputphrase\" --passphrase     \"passphrase\" --output " + outputfile+ ".txt";
process.StartInfo = startInfo;
process.Start(); 
```

Please suggest if there is way to achieve this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:38:25.360

更好的方法是为 C#/.NET 使用 PGP（或相同的 OpenPGP）库。有免费和开源的（如 Bouncycastle），但它们缺乏支持、示例等。还有支持更好的商业库（如 SecureBlackbox），但它们需要一些钱。

# javascript - Open child browser phonegap/cordova

> ID：16207035
> 
> 赞同：0
> 
> 时间：2013-04-25T05:31:13.537
> 
> 标签：javascript, cordova, phonegap-plugins, childbrowser

I want facebook/twitter functionality with my phonegap application for all device iOS, Android and Blackberry. I dont want to change its functionality for my future phonegap apps. Is it possible to code same for all devices like IOS, android and blackerry.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:52:19.413

如果您不想使用任何插件，请使用 Javascript 在 Facebook 和 Twitter 上搜索帖子...您将能够对所有设备使用相同的代码。

Facebook :[如何通过 phonegap 上传 Facebook 活动中的照片？](https://stackoverflow.com/questions/13191197/how-to-upload-photos-on-facebook-event-through-phonegap/16142139#16142139)

但对于 Twitter，上传媒体的问题仍未解决：[如何使用 javascript 在 Phonegap 中的 Twitter 上发布图片](https://stackoverflow.com/questions/16141558/how-to-post-image-on-twitter-in-phonegap-using-javascript)

更新状态的完整 Twitter 示例（带身份验证）：[http ://www.oodlestechnologies.com/blogs/Twitter-integration-on-PhoneGap-using-ChildBrowser-and-OAuth-for-iOS-and-Android-Platforms](http://www.oodlestechnologies.com/blogs/Twitter-integration-on-PhoneGap-using-ChildBrowser-and-OAuth-for-iOS-and-Android-Platforms)

# scala - 电梯站点地图菜单条目中的单个“*”通配符

> ID：16207039
> 
> 赞同：2
> 
> 时间：2013-04-25T05:31:31.093
> 
> 标签：scala, lift

看起来 Lift SiteMap DSL 支持“*”和“**”作为通配符。显然，“**”仅在路径末尾使用，当您想要匹配以某个前缀开头的所有路径时。但我不明白如何使用“*”。我曾希望它将充当路径中一个路径组件的通配符。所以像：

```
 Menu("Category Home Pages") / "category" / * / "home" 
```

将匹配：

```
 /category/alpha/home
    /category/beta/home
    /category/gamma/home
    etc. 
```

但这对我不起作用。（即使文件系统中存在路径，我也会得到 404。）如果这不应该是“*”的功能，有人可以赐教吗？我只能找到“**”的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:11:11.203

`*`将匹配单个级别的路径，`**`并将匹配任何级别的路径。

例如，正如你所说，

```
Menu("Category Home Pages") / "category" / * / "home" 
```

将匹配

```
/category/alpha/home
/category/beta/home
/category/gamma/home
etc. 
```

但是您仍然需要调用 HTML 模板或其他匹配`home.html`的模板。`webapp/category/alpha/`

如果您没有相应的 HTML 模板，Lift 将响应 404 错误。

# asp.net - ASP.NET 必填字段验证器不起作用

> ID：16207040
> 
> 赞同：9
> 
> 时间：2013-04-25T05:31:35.270
> 
> 标签：asp.net, field, validation, required

大家好，我的文本框需要一个必填字段验证器。这是我的文本框。

```
<asp:TextBox ID="txtTimeSlotGroupName" runat="server" AutoPostBack="false" 
     ClientIDMode="Static"></asp:TextBox>  
<font color="red">*</font>  
<asp:RequiredFieldValidator ID="RequiredFieldValidator_txtTimeSlotGroupName"
     runat="server" ControlToValidate="txtTimeSlotGroupName" Display="None"
     ErrorMessage="Timeslot Group Required!" ForeColor="Red" InitialValue="0"
     ValidationGroup="TimeSlot"></asp:RequiredFieldValidator> 
```

**我的按钮：**

```
<asp:Button ID="btnAddTimeSlots" Text="Add Timeslots" CssClass="button" 
     runat="server" OnClick="btnAddTimeslots_Click" ValidationGroup="TimeSlot" 
     OnClientClick="javascript:shouldsubmit=true;"/> 
```

我没有收到错误消息。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-25T05:35:10.660

您还必须定义您的验证组`Textbox`......以使其工作

```
 <asp:TextBox ID="txtTimeSlotGroupName" runat="server" 
        AutoPostBack="false" ValidationGroup="TimeSlot" ClientIDMode="Static"></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-25T05:34:53.473

从RequiredFieldValidator 标记中删除InitialValue="0"，验证文本框时不需要它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-17T10:44:48.663

即使我也面临同样的问题。请检查您的页面上是否存在任何 javascript。无论上述如何使用`Page.Validate()`方法和`if(Page.IsValid)`您的代码。这将自动强制您的验证控制和问题将得到解决

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-08T12:46:49.503

如果两个对象具有相同的 id，则必填字段验证器不起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-08T17:21:16.960

您只需在文本框中添加 ValidationGroup="TimeSlot"

```
 <asp:TextBox ID="txtTimeSlotGroupName" runat="server" AutoPostBack="false" 
   ValidationGroup="TimeSlot"   ClientIDMode="Static"></asp:TextBox> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-06T20:19:20.480

*我有同样的问题......但以上答案都不是我的解决方案......*

我的问题是我`Page.isValid`在按钮按下方法中丢失了。下面是我的按钮代码和按钮调用的方法。

**按钮：**

```
<asp:Button ID="btnBtmSave" runat="server" Text="Save" OnClick="btnSave_Click" BtnGroup="save" TabIndex="18" /> 
```

**按钮方法：**

```
protected void btnSave_Click(object sender, EventArgs e)
{
    if (Page.IsValid)
    {
        //Logic goes here
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-25T14:18:17.730

为所有文本创建相同的验证组并添加按钮和验证

```
 ValidationGroup="AAA" 
```

并将代码添加到您的保存按钮：

```
 If (Page.IsValid) Then
        YOURSQL.Insert()
   'or ur code here'
    End If 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-07T16:46:52.257

就我而言，对于按钮，我同时使用了客户端验证，即 onClientClick="return validate()"，以及 ASP.NET 验证，即 Reguired 字段验证 (ValidationGroup)。因此，必填字段验证器未触发。

# node.js - How do I spawn a child process as a different user on Windows?

> ID：16207043
> 
> 赞同：3
> 
> 时间：2013-04-25T05:31:42.837
> 
> 标签：node.js, child-process, libuv

Since libuv [does not support](https://github.com/joyent/libuv/blob/v0.11.1/src/win/process.c#L768-771) `child_process.spawn`'s `uid` [option](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options) on Windows, how can you spawn a child process that runs as a different user?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-27T10:04:24.600

最好的办法是使用 Windows 的“runas”命令行工具。“鲁纳斯/？” 详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-19T10:18:20.197

你不能。它在文档中特别指出，在 Windows 上没有可用的选项。[http://nodejs.org/api/process.html#process_process_setuid_id](http://nodejs.org/api/process.html#process_process_setuid_id)

但是，如果您只想以管理员身份启动，因为您需要绑定到特权端口，那么还有其他更聪明的方法可以做到这一点，这将使您可以使用普通用户的特权端口。

# ios - IOS [UITableView reloadData] 与 ViewWillAppear 父类上的 UITableView 类的新实例

> ID：16207045
> 
> 赞同：0
> 
> 时间：2013-04-25T05:31:52.850
> 
> 标签：ios, viewdidload, reloaddata, viewwillappear

我是 iOS 编程新手，我为 iPad 创建了第一个应用程序，它可以处理多个视图。由于我不知道如何管理内存和对象（应用程序没有崩溃，但我试图阻止它们）我有这个问题。

一般来说，在导航到子视图并返回父视图或父视图的父视图等时，更新视图信息会更好：

**选项 1** 在 Parent`viewWillAppear`方法上实例化 Child 控制器

**家长**：

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    self.supportDetailController = [[BIDSupportDetail alloc] init];
} 
```

**选项 2** 在 vi​​ewDidLoad Parent 方法上实例化子控制器和 Child`viewWillAppear`方法调用`[self.tablewView reloadData]`

**家长**：

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    self.supportDetailController = [[BIDSupportDetail alloc] init];
} 
```

**孩子**：

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.tablewView reloadData]
} 
```

我使用 iOS 6.1 和 Xcode 4.6.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:15:35.160

如果我理解正确，您想在孩子做某事时更新您的父母。例如：

1.  父级具有 的列表`Bars`，这些列表显示在 上`UITableView`。
2.  孩子允许您创建一个`Bar`.
3.  当您创建`Bar`，并且您返回到 Parent 时，Parent 将在`UITableView`.

在这种情况下，我宁愿不依赖`viewWillAppear`或不依赖`viewDidAppear`父级。我通常通过在子级内部使用 a`Protocol`和一个`weak`引用来创建从父级到子级的引用。因此，当您需要实际更新父对象时，只需将新创建的对象传递给父对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:45:01.457

如果您不确定内存管理，请使用**ARC**。在实际需要时实例化子视图控制器。无需在`viewDidLoad`或`viewWillAppear`如果它是一种导航中实例化它。假设如果您有一个表格视图，并且当您选择一个单元格时导航到`DetailViewController`（正常场景），然后从`didSelectRowAtIndexPath`.
通常， **childVC**中`viewWillAppear`的 reloadTableView 在返回时不需要在 parentVC 中使用来刷新视图，只需要使用它，因为它在时间方面是昂贵的。

# php - PHP 类与全局设置耦合

> ID：16207050
> 
> 赞同：0
> 
> 时间：2013-04-25T05:32:22.317
> 
> 标签：php, class, inversion-of-control

关于我正在从事的项目中使用的设计模式，我需要一些建议。假设我有很多类将使用依赖注入和 IoC 容器进行实例化。其中很多类将依赖于“环境”设置，例如依赖服务器位置的 memcached 类，以及依赖于 SQL 主机详细信息的 SQL 类，但我不确定如何编写这种依赖关系。

我可以把这些写到课堂上，但它不灵活。如果我让类使用全局变量，我觉得它们不再是松散耦合的，并且单元测试将更难完成。因此，我怎样才能保持松散的类耦合但从中心位置维护这些设置？

如果服务器设置发生变化，我不想深入研究 12 个 PHP 脚本来更改每个设置。

理想情况下，我想：

*   集中设置和配置
*   没有隐式耦合到外部实体的类
*   仍然可以进行单元测试！

干杯! 阿德里安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-02T17:27:12.187

我不得不承认我是[KISS](http://en.wikipedia.org/wiki/KISS_principle)的粉丝。根据您写的内容，我将执行以下操作：

创建一个包含变量的配置类：

```
class Configuration {
     protected $sqlUser = "myUser";
     protected $sqlPass = "myPass";
     // ... and the remaining config variables

     public function getSQLUser() {
         return $this->sqlUser();
     }

     public function getSQLPass() {
         return $this->sqlPass;
     }
     // ... and the remaining getters
} 
```

这使您可以完全控制将来如何进行配置。例如，您可以通过更改此类，

*   从本地配置文件中读取
*   根据服务器的机器名称（或任何其他属性）生成它
*   如果您正在运行测试，请更改它

我自己就是这样做的。这足以满足我的需要，并且避免了建筑摩天大楼主义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T14:25:26.290

配置永远不应该存在于您的代码中。维护凭证或操作值不是代码的“工作”，它应该被交给这些值。

[在The Twelve-Factor App](http://www.12factor.net/config)上有一个很好的阅读和解决方案，它将告诉您将这些存储在环境中（*通常是服务器上的环境变量*）而不是代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T08:55:23.660

```
class App {

    public function getConfig($conf_name){
        return new Config($conf_name);
    }
}

class Config {

    private $DB_host = '127.0.0.1';

    function __construct($conf_name){
        //return config
    }

}

class DB extends App {

    public function conn(){
        $this->getConfig('DB');
        //.......
    }
} 
```

# iphone - how To configure ffmpeg for the iPhone 4s and iphone5

> ID：16207052
> 
> 赞同：0
> 
> 时间：2013-04-25T05:32:23.497
> 
> 标签：iphone, ios, ffmpeg

i want to configure ffmpeg,i have read [https://github.com/yuvi/gas-preprocessor](https://github.com/yuvi/gas-preprocessor) ,but this link only configure ffmpeg for the iPhone 3gs and iPod touch 3g using armv7 and iPhoneOS3.0.sdk, i want to configure ffmpeg for the iPhone 4s and iphone5 using armv7s and iPhone5.0sdk. can you give some advice and some link to finish it?

# ajax - Refreshing data in a div with ajax

> ID：16207053
> 
> 赞同：1
> 
> 时间：2013-04-25T05:32:27.173
> 
> 标签：ajax, cordova

I'm developing a Phonegap based app which shows some data that is stored in a remote server. How can I make it refresh data every certain time in case an error happened and it didn't get the data the first time?

this is the list.js

```
 $(document).ready(function(){

    var output = $('#vehiculosOutput');

    $.ajax({
        url: 'http://www.periodicosonofertas.com/mobile/conexVehiculos.php',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',
        timeout: 5000,
        success: function(data, status){
            $.each(data, function(i,item){
                var landmark = '<li>'+item.name + '<p></p>'
                + '<p><font style="white-space:normal; font-size: small" >'+item.descripcion+'</p>' + '<p>'+item.contacto+'</p>' + '<p>'+item.telefono+'</p>' + '<p>'+item.correo+'</p><p>'+status+'</p></li>';

                output.append(landmark);
            });
        },
        error: function(){
            output.text('Error');
            //setTimeout(func.updateStatus, 1000);
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:11:54.633

您可以为此使用**长轮询**。如果您还没有听说过，[这](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)是一个很好的起点。如果您只需要在错误情况下重新发送请求，则以下代码段将起作用。

```
(function poll(delay){
        setTimeout(function(){

          $.ajax({ 
                    url: "http://127.0.0.1:8000/time/",                         
                    success: function(data){
                            $('#requiredDivId').text(data.value);
                    },
                    error: function(data){
                        //Recursive **Poll**
                        poll(30000);
                    },                  
                    dataType: "json"
                });
      }, delay);
})(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T05:45:58.187

如果您想使用您在评论中提到的特定功能，那么 phonegap 中有一个名为**network.isReachable**的功能（您可以[在此处](http://docs.phonegap.com/en/0.9.6/phonegap_network_network.md.html)找到更多详细信息）。您可以将该函数用于检查 settimeout 函数中的连接是否打开，如果为真，则可以运行函数将数据发送到服务器。

我希望它会帮助你

# facebook - 我的 Facebook 点赞按钮没有显示

> ID：16207054
> 
> 赞同：3
> 
> 时间：2013-04-25T05:32:27.563
> 
> 标签：facebook, button, facebook-like

我查看了以前关于 facebook like 按钮的问题，但没有发现我的代码有任何问题。这是我所拥有的：

```
<body>

 <div id="fb-root"></div>
 <script>(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0];
   if (d.getElementById(id)) return;
   js = d.createElement(s); js.id = id;
   js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
   fjs.parentNode.insertBefore(js, fjs);}
 (document, 'script', 'facebook-jssdk'));</script>

</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T07:10:27.770

添加用于初始化 Facebook 的 Javascript SDK 的代码后，您还必须添加代码以在所需位置显示 Like 按钮。它的通用代码是

```
<div class="fb-like" data-send="true" data-width="450" data-show-faces="true">
</div> 
```

如果您愿意，您可以通过查看[此处](https://developers.facebook.com/docs/reference/plugins/like/)的文档来进一步自定义它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-25T12:32:34.197

有同样的问题，一旦我发布了页面，点赞按钮就会出现

**facebook页面：设置：页面可见性：页面已发布**

（即使在我第一次发布之后，该页面也默认为“未发布”）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-19T20:12:39.687

我知道主题很旧，但仍在搜索中。这是我使用的初始化代码：

```
 (function(d, s, id){
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement(s); js.id = id;
    js.src = "https://connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk')); 
```

**重要**：

1.  默认情况下，Facebook 自动配置工具 ( [https://developers.facebook.com/docs/plugins/follow-button](https://developers.facebook.com/docs/plugins/follow-button) ) 在导出 js.src 元素时不会添加“HTTPS”。
2.  如果在 localhost 主机上进行测试，您将遇到按钮可见性问题（参见 v2.9） 要么使用 https 隧道服务，例如 ngrok，要么部署到有效的**https**服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-30T14:30:36.733

在我的情况下，将版本添加到 url 有`js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.11";`帮助。

# facebook - Facebook发送对话框中的自定义图像？

> ID：16207060
> 
> 赞同：1
> 
> 时间：2013-04-25T05:32:44.153
> 
> 标签：facebook, dialog, sendmessage, facebook-ui

我正在尝试通过我的 facebook 应用程序中的 facebook 发送对话框发送 facebook 私人消息，我在每次用户单击它时设置自定义图像时遇到问题，我将参数发送为

```
<a href="#" onclick="send_message('<?=$transaction->user_id?>', '<?=$transaction->image_name?>')">send msg</a> 
```

在功能方面，

```
FB.init({
    appId: '<?=$this->facebook->getAppID()?>', 
    xfbml: true, 
    cookie: true
});
function send_message(user_id, image_name) {
    FB.ui({
        to: user_id,
        method: 'send',
        name: 'The Image',
        description: 'Description here',
        link: 'https://www.something.com/',
        picture: '<?=baseurl()?>imagepath/'+image_name
    });
} 
```

没有图片参数它可以正常工作，但它一直使用facebook自动从我的链接中选择的默认图像。

请您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:21:07.567

在图片链接中使用 HTTPS 协议（如果这样做），可能会导致问题。看看[图片在 FB.ui 中不起作用](https://stackoverflow.com/questions/7356668/images-not-working-in-fb-ui)

# python - Python子进程stdout处理stdin

> ID：16207065
> 
> 赞同：1
> 
> 时间：2013-04-25T05:33:00.880
> 
> 标签：python, subprocess, pipe, stdout, stdin

编辑：我的主要问题是，是否有某种方法可以将子进程的标准输出非排他地通过管道传输到进程的标准输入中。非排他性，以便键盘仍然可以工作。两者都需要进入 raw_input 提示。

背景：我正在创建一个 python 程序，它允许购买带有二维码门票的人进入活动。该程序的主要部分是一个 raw_input() 循环，它在 csv 中搜索客人的姓名、电子邮件地址或嵌入在 QR 码中的唯一哈希。我正在尝试使用 zbarcam 扫描唯一的哈希。这*几乎*有效：

```
from subprocess import Popen, PIPE
p = Popen(["/cygdrive/c/Program Files (x86)/ZBar/bin/zbarcam", "--raw"], stdout=PIPE) 
```

也就是说，扫描二维码并在提示符处弹出票证哈希，因此我可以按 Enter 并进行搜索。问题是 zbarcam 添加了一个换行符，所以当我按 Enter 时，它会搜索一个换行符并返回 csv 中的所有内容。在 zbarcam 输出通过管道传输到标准输出（进入 raw_input）后，我找不到任何方法来去除换行符。想想看，我什至不能使用键盘退格或删除换行符。你知道怎么做吗？我以前做过这种事情，通常是复制粘贴一个额外的换行符。

我在上述行之后添加了这一行： sys.stdin = p.stdout 并且 QR 码的换行符被解释为“输入”并且搜索过程开始了，但这只是剥夺了我输入搜索词的能力。有什么方法可以将标准输入路由到这两个？

有没有其他方法可以从键盘和 zbarcam 获取用户输入？

提前致谢！我希望我听起来很连贯——这是漫长的一天。

编辑：如果有人想用这个被深度破解的代码打自己的脑袋，他们可以看看这里[https://github.com/rtwolf/qr-event-entry/blob/master/pulp_entry.py](https://github.com/rtwolf/qr-event-entry/blob/master/pulp_entry.py)

# javascript - 使用基本的 Javascript 函数将代码插入到 Div

> ID：16207068
> 
> 赞同：1
> 
> 时间：2013-04-25T05:33:12.560
> 
> 标签：javascript, css, html

我正在尝试使用以下方法调用包含图片库的“example.js”文件（画廊的大部分代码，看看我将如何选择 3 个）：

```
<img src="img.jpg" onClick="thisAction()" /> 
```

我想要做的是将所有包含的“example.js”代码放在页面其他地方的 div 中。我有一个单独的 javascript.js 文件，它引用了 thisAction() 函数，但我似乎无法弄清楚从那里去哪里，没有任何工作。我已经尝试了一个加载功能，并且我已经深入研究了 ajax，但我并不真正知道我在做什么......请帮助！

* * *

好的，所以只是为了澄清^^^以上^^^，我实际上并没有尝试在我的“example.js”中调用任何javascript，我只是被指示这样做，由于某种原因我不记得了必须与识别格式有关......因为我真正想要的是插入一些 html，其中包括一些 div。如果可能的话，我想要的是将所有代码插入“example.html”中，其中可能包含以下内容：

```
<div id="navbuttonleftcontainer"></div>
    <div id="image_holder"><img src="examplepic.jpg" /></div>
<div id="navbuttonrightcontainer"></div> 
```

通过使用

```
<img src="examplenavpic.jpg" onClick="thisAction() /> 
```

标签。

我最接近的是这个：

```
function thisAction()
{
$('#divonmygalleryhtml').html('gallery1.html');
} 
```

但这实际上并没有吐出上面提到的 example.html 代码，它只是将文本“gallery.html”放入 div 中。我尝试简单地复制 example.html 中的所有代码并将其替换为

```
function thisAction()
{
$('#divonmygalleryhtml').html('
<div id="navbuttonleftcontainer"></div>
<div id="image_holder"><img src="examplepic.jpg" /></div>
<div id="navbuttonrightcontainer"></div>
');
} 
```

但这无济于事......我已经尝试了最后两个建议但没有运气......任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:17:50.817

不确定我是否正确。使用 jQuery 的 AJAX - 函数和 HTML - 函数，您可以从服务器重新加载代码并将其放置在页面上的 div 中：

```
$(document).ready(function({

    function thisAction(){

        $.ajax({
        url: "/pathToFile/example.js",
        cache: false
        }).done(function( data ) {
        $("#targetDiv").html( data );
        });

    }

    thisAction();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:40:01.390

要调用外部 javascript 文件，您会这样做

```
function thisAction(){
var divfill = getElementById(targetDiv);
var newscript;
newscript.src ="example.js";
divfill.innerHTML = (newscript);
} 
```

希望有效:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T00:11:24.753

看起来您可以使用 jQuery，然后您可以使用[.load()](http://api.jquery.com/load/)将远程源的内容加载到元素

```
function thisAction() {
    $('#divonmygalleryhtml').load('example.html');
} 
```

# java - 使用透明蒙版将 SWT 图像保存到文件

> ID：16207070
> 
> 赞同：3
> 
> 时间：2013-04-25T05:33:22.393
> 
> 标签：java, swt

到目前为止，这是我的代码

```
ImageLoader saver = new ImageLoader();
saver.data = new ImageData[]
    { toSave.getImageData() };
saver.save(fileName, SWT.IMAGE_PNG); 
```

`toSave``SWTResourceManager`是使用程序中透明的加载的图像。`fileName`是一个字符串，表示我要将图像保存到的文件（以 .png 结尾）

结果是一个黑色背景的图像，而不是我想要的透明背景。如何使背景透明？我认为这与透明度蒙版有关，但我可能是错的。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:00:40.087

`SWTResourceManager`似乎是造成你的问题。我不建议使用它。

试试这个代码，它对我有用：

```
Display d = Display.getDefault();
Image image = new Image(d, "/pictures/Llama.gif");

ImageLoader saver = new ImageLoader();
saver.data = new ImageData[] { image.getImageData() };
saver.save("output.png", SWT.IMAGE_PNG);

image.dispose(); 
```

`Image`请记住在不再需要时丢弃它。

# jquery - 在 javascript 或 jquery 中将 json 转换为 html

> ID：16207071
> 
> 赞同：0
> 
> 时间：2013-04-25T05:33:28.257
> 
> 标签：jquery, html, json, getjson

我已经向服务器发送了一个请求，我得到的响应是 json 格式，实际上是 html 代码转换为 json。现在我已经将该json响应存储在一个变量中，我想再次将此json转换为html..

我从服务器得到的 JSON 响应是

```
 {"responseID":"429","statusCode":200,"errors":[],"isSuccessful":true,"statusReason":"OK","responseHeaders":{"ETag":"\"%22520c4e21-98fb-b3f6-3cbf1b0d034f%22&%22_jK7HYWeYEPDB4TQ%22\"","Content-Language":"en-US","Date":"Thu, 25 Apr 2013 05:06:05 GMT","Transfer-Encoding":"chunked","OSLC-Core-Version":"2.0","Keep-Alive":"timeout=5, max=77","X-jazb2":"D=869277 t=1366866365096461","Connection":"Keep-Alive","Content-Type":"application\/rdf+xml","Server":"HTTP_Server","X-Powered-By":"Servlet\/3.0","Proxy-Connection":"Keep-Alive"},"RDF":{"calm":"http:\/\/japp.net\/xmlns\/prod\/jazz\/calm\/1.0\/","dc":"http:\/\/purl.org\/dc\/terms\/","acp":"http:\/\/japp.net\/ns\/acp#","Description":{"about":"https:\/\/japp.net\/rm\/resources\/_ggoxQGEyEeCi3b3g","accessControl":{"resource":"https:\/\/japp.net\/rm\/accessControl\/_xKDFBlV1EeiWC7_0yA"},"_yYlUt1V1EeCWC7_0yA":{"resource":"https:\/\/japp.net\/rm\/types\/_yUzn9FCVbIiWC7_0yA#Text"},"parent":{"resource":"https:\/\/japp.net\/rm\/folders\/_2CgowEeCVbIiWC7_0yA"},"instanceShape":{"resource":"https:\/\/japp.net\/rm\/types\/_03uQpFbIiWC7_0yA"},"_yGllxFVVbIiWC7_0yA":{"resource":"https:\/\/japp.net\/rm\/resources\/_0PoDEeGLFYRnPDB4TQ"},"type":[{"resource":"http:\/\/open-services.net\/ns\/rm#Requirement"},{"resource":"http:\/\/japp.net\/ns\/rm#Text"}],"creator":{"resource":"https:\/\/japp.net\/jts\/users\/dmoul"},"modified":{"CDATA":"2012-03-06T14:27:49.078Z","datatype":"http:\/\/www.w3.org\/2001\/XMLSchema#dateTime"},"_0Rk2CVbIiWC7_0yA":{"resource":"https:\/\/japp.net\/rm\/types\/_0CRPUCVbIiWC7_0yA#47f35e5e-59ea-4432-8b05-ca7c9abb878e"},"title":{"CDATA":"content link","parseType":"Literal"},"created":{"CDATA":"2011-04-07T16:17:17.922Z","datatype":"http:\/\/www.w3.org\/2001\/XMLSchema#dateTime"},"contributor":{"resource":"https:\/\/japp.net\/jts\/users\/moul"},"description":{"parseType":"Literal"},"_bB6cUFWbIiWC7_0yA":{"resource":"https:\/\/japp.net\/jts\/users\/moul"},"PrimaryText":{"parseType":"Literal","div":{"p":[{"id":"_1322948078440","CDATA":"A simple hypertext link in rich text or graphical artifacts that provides navigation only. Content links do not have link types and are not displayed in the Links section of the . See also . ","style":"margin-right: 0px; margin-left: 0px; padding: 0px; font-size: 12px; font-family: Arial,sans-serif;","a":[{"id":"_1331044057583","CDATA":"RM application","href":"https:\/\/japp.net\/rm\/resources\/_0PoDsWeGEeGLFYTQ"},{"id":"_1322948113737","CDATA":"trace link","href":"https:\/\/japp.net\/rm\/resources\/_id02tWEyEeBj--c3g"}],"br":""},{"id":"_1324333382588","CDATA":"For more information about content links and trace links, see \"Creating links\" in the information center:","style":"margin-right: 0px; margin-left: 0px; padding: 0px; font-size: 12px; font-family: Arial,sans-serif;","a":{"id":"_1322948136716","CDATA":"http:\/\/publib.boulder.ibm.com\/infocenter\/clmhelp\/v3r0m1\/topic\/com.ibm.rational.rrm.help.doc\/topics\/t_work_links.html","href":"http:\/\/publib.boulder.ibm.com\/infocenter\/clmhelp\/v3r0m1\/topic\/com.ibm.rational.rrm.help.doc\/topics\/t_work_links.html"}},{"id":"_1328282335356","style":"margin-right: 0px; margin-left: 0px; padding: 0px; font-size: 12px; font-family: Arial,sans-serif;","br":""},{"id":"_1328282335357","CDATA":"This term is defined in the IBM Terminology database as follows:","style":"margin-right: 0px; margin-left: 0px; padding: 0px; font-size: 12px; font-family: Arial,sans-serif;"},{"id":"_1328282335358","CDATA":"content link: A simple hypertext link in rich text or graphical artifacts that provides navigation only. Related terms: trace link","style":"margin-right: 0px; margin-left: 0px; padding: 0px; font-size: 12px; font-family: Arial,sans-serif;","br":""}],"xmlns":"http:\/\/www.w3.org\/1999\/xhtml"}},"identifier":{"CDATA":"360","datatype":"http:\/\/www.w3.org\/2001\/XMLSchema#string"},"serviceProvider":{"resource":"https:\/\/japp.net\/rm\/discovery\/_xKDFBlV1EeC7_0yA\/services.xml"}},"rm":"http:\/\/www.ibm.com\/xmlns\/rdm\/rdf\/","oslc_rm":"http:\/\/open-services.net\/ns\/rm#","nav":"http:\/\/jazz.net\/ns\/rm\/navigation#","oslc":"http:\/\/open-services.net\/ns\/core#","rdf":"http:\/\/www.w3.org\/1999\/02\/22-rdf-syntax-ns#","jazz_rm":"http:\/\/japp.net\/ns\/rm#","public_rm_10":"http:\/\/www.ibm.com\/xmlns\/rm\/public\/1.0\/","rm_property":"https:\/\/jazz.net\/rm\/types\/"},"warnings":[],"totalTime":1149,"responseTime":1146,"info":[]}*/ 
```

我需要的html格式是

```
<div xmlns="http://www.w3.org/1999/xhtml">
<p id="_1322948078440" style="margin-right: 0px; margin-left: 0px; padding: 0px; font-size: 12px; font-family: Arial,sans-serif;">
    A simple hypertext link in rich text or graphical artifacts that provides navigation only. Content links do not have link types and are not displayed in the Links section of the 
<a href="https://jazz.net/rm/resources/_0PoRnPDB4TQ" id="_1331044057583">RM application</a>
. See also 
<a href="https://jazz.net/rm/resources/_id023bnBj--c3g" id="_1322948113737">trace link</a>.
 <br></br></p>
<p id="_1324333382588" style="margin-right: 0px; margin-left: 0px; padding: 0px; font-size: 12px; font-family: Arial,sans-serif;">
    For more information about content links and trace links, see "Creating links" in the information center: <a href="http://publib.boulder.ibm.com/infocenter/clmhelp/v3r0m1/topic/com.ibm.rational.rrm.help.doc/topics/t_work_links.html" id="_1322948136716">
http://publib.boulder.ibm.com/infocenter/clmhelp/v3r0m1/topic/com.ibm.rational.rrm.help.doc/topics/t_work_links</a>

</p>

<p id="_1328282335356" style="margin-right: 0px; margin-left: 0px; padding: 0px; font-size: 12px; font-family: Arial,sans-serif;">

    <br></br>
</p><p id="_1328282335357" style="margin-right: 0px; margin-left: 0px; padding: 0px; font-size: 12px; font-family: Arial,sans-serif;">
    This term is defined in the IBM Terminology database as follows:</p>

<p id="_1328282335358" style="margin-right: 0px; margin-left: 0px; padding: 0px; font-size: 12px; font-family: Arial,sans-serif;">  content link: A simple hypertext link in rich text or graphical artifacts that provides navigation only. Related terms: trace link<br></br></p>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-14T05:55:15.333

```
// Start function for JSON to HTML
function json_to_html(json_components, isDiv = false, finalHTML = "")
{
    var jsoncompo = (isDiv) ? JSON.parse(json_components) : json_components;
    var json_len = (jsoncompo).length;
    if (finalHTML == "" && isDiv)
    {
        finalHTML = document.createElement("div");
    }
    for (var i = 0; i < json_len; i++)
    {
        var childele = '';
        var html_components = jsoncompo[i];
        var attributes_arr = html_components.attr;
        finalHTML1 = createstructure(html_components.tag, attributes_arr, html_components.child);
        finalHTML.appendChild(finalHTML1);
    }
    return finalHTML;
}
// End function for JSON to HTML

// Start function for create HTMLstructure from json
function createstructure(type, props, children) {
    var el = document.createElement(type),
            key;
    for (key in props) {
        var keyprops = props[key];
        var hasOwn = Object.keys(keyprops);
        for (var i = 0; i < hasOwn.length; i++)
        {
            el.setAttribute(hasOwn[i], keyprops[hasOwn[i]]);
        }

    }
    if (typeof children != 'undefined') {
        if (Array.isArray(children)) {
            json_to_html(children, false, el);
        } else {
            textnode = document.createTextNode(children);
            el.appendChild(textnode);
        }
    }
    return el;
}
// Start function for create HTMLstructure from json

//define json in string
var jsonPublishData ='[{"tag":"div","attr":[{"class":"box-footer"}],"child":"Hello"}]';

//convert json to html
var resp_html = json_to_html(jsonPublishData, true);

 //define a variable and store html respons data in this variable 
var publishButtonHTML= resp_html.outerHTML

//alert out
alert(publishButtonHTML);

//print out on console
console.log(publishButtonHTML); 
```

# asp.net - 将数据绑定到下拉列表后从列表中丢失（--选择--）

> ID：16207075
> 
> 赞同：0
> 
> 时间：2013-04-25T05:33:41.067
> 
> 标签：asp.net, drop-down-menu

绑定数据后从下拉列表中丢失（--Select--）

```
 List<string> state = new List<string>();
        state = Details.getstate(country);
        ddl_State.DataSource = state;
        ddl_State.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:03:27.673

假设您在标记中定义了 --Select-- ，如下所示：

```
<asp:DropDownList ID="ddl_State" runat="server">
    <asp:ListItem Text="--Select--" Value="0" />
</asp:DropDownList> 
```

您可以`AppendDataBoundItems`在绑定数据时使用该属性添加项目，而无需清除已声明的项目：

```
<asp:DropDownList ID="ddl_State" AppendDataBoundItems="True" runat="server">
    <asp:ListItem Text="--Select--" Value="0" />
</asp:DropDownList> 
```

请注意，我遗漏了很多标记 - 这只是为了给出一般概念。

[ListControl.AppendDataBoundItems 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.appenddatabounditems.aspx)

# java - NullPointerException 错误问题

> ID：16207083
> 
> 赞同：0
> 
> 时间：2013-04-25T05:34:10.000
> 
> 标签：java, exception

下面的代码给了我一个 NullPointerException。我不知道为什么它会向我抛出这个错误，而且我似乎找不到与我有类似问题的帖子。任何帮助表示赞赏。

```
 public class App5 {
  public void main (String[] args) {
    int result = 0;
    System.out.println(result);
  }
} 
```

错误跟踪：

```
java.lang.NullPointerException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at      
edu.rice.cs.drjava.model.compiler.JavacCompiler.runCommand(JavacCompiler.java:272) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:37:52.973

您需要将您的入口点声明为：

```
public static void main(String[] args) 
```

不是：

```
public void main(String[] args) 
```

调用异常是因为 JVM 搜索入口点，但没有找到。

# javascript - 统计 HTML 表格中唯一值的实例

> ID：16207086
> 
> 赞同：0
> 
> 时间：2013-04-25T05:34:17.367
> 
> 标签：javascript, php, jquery, html-table

我正在寻找计算表中每个唯一值的实例`HTML`并将结果返回到它自己的表中。该表是根据用户的文本输入生成的。因此，例如，用户输入可能如下所示：

```
Report 46     Bob Marley   4/20/2013    Summary: I shot the sheriff    Case #32  User Error
Report 50    Billy The Kid    7/14/2013   Summary: I'm just a boy in a grown up world   Case #33    User Experience
Report 51    Oscar The Grouch    10/10/2013   Summary: Refuse, reuse, recycle   Case #33    User Experience 
```

大空间是制表符。

哪个会返回：

```
<table>
 <tr>
  <td>Bob Marley</td><td>46</td><td>4/20/2013</td><td>Case #32</td><td>User Error</td>
 </tr>
 <tr>
  <td>Billy The Kid</td><td>50</td><td>4/20/2013</td><td>Case #33</td><td>User Experience</td>
 </tr>
 <tr>
  <td>Oscar The Grouch</td><td>51</td><td>10/10/2013</td><td>Case #33</td><td>User Experience</td>
 </tr>
</table> 
```

我需要做的是1）统计报告的数量，2）统计每个案例编号出现的次数，2）统计每个类别出现的次数，然后在下一页上显示，如下所示：

```
Number of reports: 
3

Cases:
Case #33 - 2
Case #32 - 1

Categories:
User Experience - 2
User Error - 1 
```

我正在寻找有关如何解决此问题的任何建议。我正在使用和学习 Javascript/HTML（和 jQuery），但如果这些工具更合适，我愿意使用 PHP、SQL 等。

我正在考虑将表值传递给数组，然后使用 for 循环并`regexes`计算唯一值，但我不确定这是否是最好的方法。

**编辑**

我没有明确说明的另一个细节是，在将用户输入数据（即制表符分隔的文本）转换为表格之前，我可以访问它。因此，如果在将其转换为表格之前计算有问题的值会更容易，那么请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:48:44.227

就 PHP 而言，您可以将表格 HTML 存储到字符串中并将其加载到 DOM 解析器中。

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

这是我们在大多数涉及页面抓取的项目中使用的，尽管它同样适用于使用它们的函数从字符串中解析 HTML：

```
$html = str_get_html($yourHtmlString); 
```

然后您可以遍历每个*tr*，然后您可以从那里查看每个*td*以添加到您的计数中。

即要获得第三行的类别，您将使用：

```
$html->find("table", 0)->find("tr", 2)->find("td", 4)->plaintext; 
```

您可以像这样循环遍历表格：

```
$reportCount = 0;
$reportCases = array();
foreach ($html->find("table", 0)->find("tr") as $tableRow) {
    $reportCount++; 
    $reportCases[] = $tableRow->find("td", 1)->plaintext;
} 
```

等等，当然也存储所有其他必要的数据，然后根据需要将其格式化为表格输出。

# node.js - nodejs中的node-gyp重建错误

> ID：16207091
> 
> 赞同：0
> 
> 时间：2013-04-25T05:34:48.447
> 
> 标签：node.js, makefile, node-gyp

我已经使用 node-gyp v0.9.5 安装了 nodejs v0.8.11，但是当我尝试安装其他需要编译的模块时，我收到以下错误：

```
# npm install net-ping
npm install net-ping
npm http GET https://registry.npmjs.org/net-ping
npm http 304 https://registry.npmjs.org/net-ping
npm http GET https://registry.npmjs.org/raw-socket
npm http 408 https://registry.npmjs.org/raw-socket
npm ERR! registry error parsing json
npm http GET https://registry.npmjs.org/raw-socket
npm http GET https://registry.npmjs.org/raw-socket

> raw-socket@1.1.4 install /root/testNode/node_modules/net-ping/node_modules/raw-socket
> node-gyp rebuild

make: Entering directory `/root/testNode/node_modules/net-ping/node_modules/raw-socket/build'
make: Nothing to be done for `all'.
make: Leaving directory `/root/testNode/node_modules/net-ping/node_modules/raw-socket/build'
net-ping@1.1.4 node_modules/net-ping
âââ raw-socket@1.1.4 
```

相同的模块以相同的版本安装在另一台机器上。什么会导致这样的问题？！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-25T07:32:26.007

如我所见，npm 无法下载 raw-socket/package.json 。看起来原始套接字已损坏，您需要联系开发人员并要求他们修复它。

# android - Android WebView 未加载 URL

> ID：16207094
> 
> 赞同：54
> 
> 时间：2013-04-25T05:35:15.910
> 
> 标签：android, android-layout, android-intent, android-webview

我想加载[网址](http://www.teluguoneradio.com/rssHostDescr.php?hostId=147)`WebView`

我使用了以下代码：

```
webView = (WebView) findViewById(R.id.webview1);
webView.setWebViewClient(new HostsWebClient());
webView.getSettings().setPluginState(PluginState.ON);
webView.getSettings().setJavaScriptEnabled(true);
webView.getSettings().setJavaScriptCanOpenWindowsAutomatically(false);
webView.getSettings().setPluginsEnabled(true);
webView.getSettings().setSupportMultipleWindows(false);
webView.getSettings().setSupportZoom(false);
webView.setVerticalScrollBarEnabled(false);
webView.setHorizontalScrollBarEnabled(false);

webView.loadUrl(URL); 
```

但是当我执行它时，我无法加载 url。我的网页不可用。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-04-25T05:42:34.193

您是否在清单文件中添加了互联网权限？如果没有添加以下行。

```
 <uses-permission android:name="android.permission.INTERNET"/> 
```

希望这会帮助你。

**编辑**

使用下面的行。

```
 public class WebViewDemo extends Activity {

        private WebView webView;

        Activity activity ;
        private ProgressDialog progDailog; 

        @SuppressLint("NewApi")
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            activity = this;

            progDailog = ProgressDialog.show(activity, "Loading","Please wait...", true);
            progDailog.setCancelable(false);

           webView = (WebView) findViewById(R.id.webview_compontent);

           webView.getSettings().setJavaScriptEnabled(true);     
           webView.getSettings().setLoadWithOverviewMode(true);
           webView.getSettings().setUseWideViewPort(true);        
            webView.setWebViewClient(new WebViewClient(){

                @Override
                public boolean shouldOverrideUrlLoading(WebView view, String url) {
                    progDailog.show();
                    view.loadUrl(url);

                    return true;                
                }
                @Override
                public void onPageFinished(WebView view, final String url) {
                    progDailog.dismiss();
                }
            });

            webView.loadUrl("http://www.teluguoneradio.com/rssHostDescr.php?hostId=147");

           }
    } 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-25T05:49:31.503

在清单中添加权限 Internet 权限。

作为`<uses-permission android:name="android.permission.INTERNET"/>`

这段代码它工作

```
 public class WebActivity extends Activity {
  WebView wv;

 String url="http://www.teluguoneradio.com/rssHostDescr.php?hostId=147";

 @Override
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_web);
    wv=(WebView)findViewById(R.id.webUrl_WEB);

WebSettings webSettings = wv.getSettings();
    wv.getSettings().setLoadWithOverviewMode(true);
    wv.getSettings().setUseWideViewPort(true);
    wv.getSettings().setBuiltInZoomControls(true);
    wv.getSettings().setPluginState(PluginState.ON);

    wv.setWebViewClient(new myWebClient());

    wv.loadUrl(url);
}

public class myWebClient extends WebViewClient {
    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        // TODO Auto-generated method stub
        super.onPageStarted(view, url, favicon);
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // TODO Auto-generated method stub

        view.loadUrl(url);
        return true;

    }
} 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-06-15T05:09:57.277

也许是 SSL

```
 @Override
    public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {
        // ignore ssl error
        if (handler != null){
            handler.proceed();
        } else {
            super.onReceivedSslError(view, null, error);
        }
    } 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2018-11-19T09:38:32.373

注意：确保已授予 Internet 权限。

在安卓 9.0 中，

Webview 或 Imageloader 无法加载 url 或图像，因为 android 9 存在网络安全问题，需要通过清单文件为所有子域启用。所以你可以添加安全配置文件。

1.  将 @xml/network_security_config 添加到您的资源中：

```
<network-security-config>
    <domain-config cleartextTrafficPermitted="true">
    <domain includeSubdomains="true">www.google.com</domain>
    </domain-config>
</network-security-config>
```

2.  像这样将此安全配置添加到您的清单中：

```
<application

    android:networkSecurityConfig="@xml/network_security_config"
    ...>
</application>
```

如果你想允许所有子域

```
<application
   android:usesCleartextTraffic="true"
    ...>
</application>
```

注意：要解决问题，不要同时使用第2点（`android:networkSecurityConfig="@xml/network_security_config"`和`android:usesCleartextTraffic="true"`）选择其中之一

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-10-08T06:12:19.093

首先，检查您是否在 Manifest 文件中具有 Internet 权限。

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

然后，您可以在 onCreate() 或 initialize() 方法中添加以下代码 -

```
final WebView webview = (WebView) rootView.findViewById(R.id.webview);
        webview.setWebViewClient(new MyWebViewClient());
        webview.getSettings().setBuiltInZoomControls(false);
        webview.getSettings().setSupportZoom(false);
        webview.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
        webview.getSettings().setAllowFileAccess(true);
        webview.getSettings().setDomStorageEnabled(true);
        webview.loadUrl(URL); 
```

并编写一个类来处理 webview 的回调 -

```
public class MyWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
                           //your handling...
                return super.shouldOverrideUrlLoading(view, url);
        }
    } 
```

在同一个类中，您还可以使用其他重要的回调，例如 -

```
- onPageStarted()
- onPageFinished()
- onReceivedSslError() 
```

此外，您可以添加“SwipeRefreshLayout”以启用滑动刷新并刷新 web 视图。

```
<android.support.v4.widget.SwipeRefreshLayout
        android:id="@+id/swipeRefreshLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
        <WebView
            android:id="@+id/webview"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />
    </android.support.v4.widget.SwipeRefreshLayout> 
```

并在用户滑动屏幕时刷新 webview：

```
SwipeRefreshLayout mSwipeRefreshLayout = (SwipeRefreshLayout) findViewById(R.id.swipeRefreshLayout);
            mSwipeRefreshLayout.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {
                @Override
                public void onRefresh() {
                    new Handler().postDelayed(new Runnable() {
                        @Override
                        public void run() {
                            mSwipeRefreshLayout.setRefreshing(false);
                            webview.reload();
                        }
                    }, 3000);
                }
            }); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-04-25T05:58:22.837

在您的 webview 上使用以下内容

```
webview.setWebChromeClient(new WebChromeClient()); 
```

然后实现 WebChromeClient 类所需的方法。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2021-03-17T12:10:32.263

对于某些网页，关键是启用**DOM 存储**：

```
webview.getSettings().setDomStorageEnabled(true); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-01-13T13:15:40.503

就像替代解决方案一样：

对我来说`webView.getSettings().setUserAgentString("Android WebView")`成功了。

我已经实现了 INTERNET 权限，`WebViewClient`以及`WebChromeClient`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-11-24T14:44:43.240

在我的情况下，将以下函数添加到 WebViewClient 修复了错误。功能是：`onReceivedSslError`和已弃用和新的 api 版本`shouldOverrideUrlLoading`

```
 webView.setWebViewClient(new WebViewClient() {

        @SuppressWarnings("deprecation")
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            Log.i(TAG, "loading: deprecation");
            return  true;
            //return super.shouldOverrideUrlLoading(view, url);
        }

        @Override
        @TargetApi(Build.VERSION_CODES.N)
        public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request) {
            view.loadUrl(request.getUrl().toString());
            Log.i(TAG, "loading: build.VERSION_CODES.N");
            return true;
            //return super.shouldOverrideUrlLoading(view, request);
        }

        @Override
        public void onPageStarted(
                WebView view, String url, Bitmap favicon) {
            Log.i(TAG, "page started:"+url);
            super.onPageStarted(view, url, favicon);
        }

        @Override
        public void onPageFinished(WebView view, final String url) {

            Log.i(TAG, "page finished:"+url);

        }

        @Override
        public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError er) {
            handler.proceed();
        }

    }); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-10-15T01:10:46.230

最简单的解决方案是转到包含 webview 的 XML 布局。将您的 android:layout_width 和 android:layout_height 从“wrap_content”更改为“match_parent”。

```
 <WebView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/webView"/> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-04-02T15:21:05.553

使用它应该会有所帮助。

```
 var currentUrl = "google.com" 
 var partOfUrl = currentUrl.substring(0, currentUrl.length-2)

 webView.setWebViewClient(object: WebViewClient() {

 override fun onLoadResource(WebView view, String url) {
 //call loadUrl() method  here 
 // also check if url contains partOfUrl, if not load it differently.
 if(url.contains(partOfUrl, true)) {
     //it should work if you reach inside this if scope.
 } else if(!(currentUrl.startWith("w", true))) {
     webView.loadurl("www.$currentUrl")

 } else if(!(currentUrl.startWith("h", true))) {
     webView.loadurl("https://$currentUrl")

 } else { 
   //...
 }
 }

 override fun onReceivedSslError(view: WebView?, handler: SslErrorHandler?, error: SslError?) {
  // you can call again loadUrl from here too if there is any error.
}
 // You should also override other override method for error such as
 // onReceiveError to see how all these methods are called one after another and how
// they behave while debugging with break point. 
} 
```

# node.js - 我可以使用 Tsung 加载测试 Socket.io 应用程序吗？

> ID：16207099
> 
> 赞同：1
> 
> 时间：2013-04-25T05:35:53.503
> 
> 标签：node.js, erlang, socket.io, tsung

我想使用 Tsung 使用 tsung_ws 插件加载测试 socket.io 应用程序。但是，websocket 的 Socket.io 实现依赖于它们的 javascript。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T17:43:19.327

Tsung 不能执行 javascript 代码，所以即使我不知道 socket.io 我认为它不可能做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-24T16:17:06.667

Tsung 现在支持通过特殊会话类型的[websocket 连接](http://tsung.erlang-projects.org/user_manual/conf-sessions.html#websocket)

```
<session name="websocket" type="ts_websocket"> 
```

或通过[切换协议](http://tsung.erlang-projects.org/user_manual/conf-sessions.html#mixing-session-type)。

# r - 通过聚合组合数据框中的矩阵

> ID：16207100
> 
> 赞同：2
> 
> 时间：2013-04-25T05:36:01.077
> 
> 标签：r, matrix, dataframe, xtable

我正在尝试按因子计算分位数并使用 xtable 将结果聚合打印为乳胶格式。不幸的是，我的行为有些古怪。一个干净的解决方案将不胜感激。

创建示例：

```
tm <- data.frame(f=c("a","b","c"),v=runif(30))
tm$f <- factor(tm$f)
agv <- aggregate(v~f,tm, quantile) 
```

`agv`xtable 不接受输出：

```
xtable(agv) 
```

给

> cols[, i + pos] <- do.call("formatC", curFormatArgs) 中的错误：要替换的项目数不是替换长度的倍数

即使`print(agv)`是

```
 f        v.0%       v.25%       v.50%       v.75%      v.100%
1 1 0.002970944 0.253247687 0.571891610 0.766606825 0.986142807
2 2 0.002129951 0.328739086 0.558132094 0.799115979 0.991067470
3 3 0.011059184 0.285322522 0.496035672 0.770908599 0.994420787 
```

因为显然`dim(agv)`是实际上`[1] 3 2`

所以我尝试了：

```
cbind(featureName=agv$f, agv$v) 
```

由于某种原因，这导致字符因子转换为数值。

经过反复试验，这是我确定的解决方案：

```
cbind(f=as.character(agv$f), data.frame(agv$v,check.names=F)) 
```

这给了我想要的结果`xtable`：

```
\begin{table}[ht]
\centering
\begin{tabular}{rlrrrrr}
  \hline
 & f & 0\% & 25\% & 50\% & 75\% & 100\% \\
  \hline
1 & a & 0.00 & 0.25 & 0.48 & 0.75 & 0.99 \\
  2 & b & 0.00 & 0.28 & 0.46 & 0.74 & 1.00 \\
  3 & c & 0.02 & 0.21 & 0.44 & 0.63 & 1.00 \\
   \hline
\end{tabular}
\end{table} 
```

无论如何，我只是好奇是否有一个涉及更少线路的更清洁的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:41:51.070

一种稍微更直接的方法（尽管在概念上与您已经完成的方法没有太大不同）可能是使用`do.call(data.frame, ...)`. 以下对我有用。

```
xtable(do.call(data.frame, c(agv, check.names = FALSE))) 
```

对我来说，返回：

```
> xtable(do.call(data.frame, c(agv, check.names = FALSE)))
% latex table generated in R 3.0.0 by xtable 1.7-1 package
% Thu Apr 25 11:10:26 2013
\begin{table}[ht]
\centering
\begin{tabular}{rlrrrrr}
  \hline
 & f & v.0\% & v.25\% & v.50\% & v.75\% & v.100\% \\ 
  \hline
1 & a & 0.06 & 0.27 & 0.38 & 0.64 & 0.94 \\ 
  2 & b & 0.20 & 0.38 & 0.52 & 0.70 & 0.87 \\ 
  3 & c & 0.01 & 0.22 & 0.60 & 0.87 & 0.99 \\ 
   \hline
\end{tabular}
\end{table} 
```

* * *

`xtable`也适用于`data.table`s，因此您还可以执行以下操作：

```
library(data.table)

DT <- data.table(tm, key = "f")
xtable(DT[, as.list(quantile(v)), by = key(DT)]) 
```

在这里，`DT[, as.list(quantile(v)), by = key(DT)]`将为您提供与“agv”对象相同的结果。

# sql - sql使用选择并添加到表中

> ID：16207104
> 
> 赞同：2
> 
> 时间：2013-04-25T05:36:16.447
> 
> 标签：sql

```
SELECT `pro`.`St`, `s`.`Quantity`
    FROM `s`
    LEFT JOIN `web`.`pro` ON `s`.`Pro_id` = `pro`.`ProdID` 
```

上面的查询结果如下表

```
 st          quantity
    132             1
    11              1 
```

st 来自一个表，而数量来自另一个使用此 select 语句我想将结果数量添加到另一个表中的 st 行。

基本上通过添加我从这个选择语句中获得的数量来更新第二个表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:42:06.810

```
UPDATE `web`.`pro`
SET `pro`.`st` = `pro`.`st` + `s`.`Quantity`
FROM `web`.`pro`
JOIN `shopping cart` `s`
  ON `s`.`Pro_id` = `pro`.`ProdID`; 
```

类似的东西？

# kendo-ui - kendo ui 网格过滤，寻呼机未更新

> ID：16207108
> 
> 赞同：0
> 
> 时间：2013-04-25T05:36:21.483
> 
> 标签：kendo-ui

我在 kendo 2012.3.1315.340 网格过滤中遇到了过滤问题，我在标题模板上有用于过滤功能的文本框，一旦我过滤，我的分页无法正常工作，我得到正确的数据，但我的页数和总记录没有'在 UI 上进行更改

这是我的代码..

```
function searchOnFilters(element) {
    var filtersModel = getSearchFilters();

    //debugger;
    var filterResults = new kendo.data.DataSource({
        serverPaging: true,
        serverSorting: true,
        serverFiltering: true,
        batch: true,
        pageSize: 50,
        transport: {
            read: {
                url: '@Url.Action("MasterQA_Read", "MasterQA")',

                data: { searchFilters: JSON.stringify(filtersModel) },
                type: "POST"

            }
        },

        parameterMap: function (data, operation) {
            return kendo.stringify(data);
        },
        schema: {

            data: "Data",
            total : "Total"
                 }

    });

    filterResults.fetch(function () {
       // debugger;
        var grid = $("#MQASearchGrid").data("kendoGrid");
        grid.dataSource = filterResults;
        grid.refresh();
    });

} 
```

控制器：

```
 var result1 = new DataSourceResult
         {
             Data = gridData.Items,
             Total = gridData.TotalCount
         };
         return Json(result1, JsonRequestBehavior.AllowGet); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:12:11.597

尝试使用网格的[setDataSource](http://docs.kendoui.com/api/web/grid#methods-setDataSource)方法。分配[dataSource](http://docs.kendoui.com/api/web/grid#fields-dataSource)字段无效。

# ruby-on-rails - 创建子ember js时如何获取父ID

> ID：16207110
> 
> 赞同：0
> 
> 时间：2013-04-25T05:36:30.650
> 
> 标签：ruby-on-rails, ember.js, ember-data

我想在子记录中设置 parent_id。

我的模型是食谱（id，标题）和成分（id，about，recipe_id）。

我有一个表格，可以在其中创建包含许多成分的食谱。一切正常，但我不知道如何在创建父记录后在子记录中设置 parent_id。

**例子：**

我们创建食谱（id = 1，title = 'Title01'）。所以我们所有的成分都会有字段recipe_id 1（id=2，about='这是成分'，recipe_id=1）

recipe.js.coffee

```
App.Recipe = DS.Model.extend
  title: DS.attr('string')
  ingredients: DS.hasMany('App.Ingredient') 
```

成分.js.coffee

```
App.Ingredient = DS.Model.extend
  about: DS.attr('string')
  recipe: DS.belongsTo('App.Recipe') 
```

new.emblem（在这里我创建父配方和子成分）

```
h1 Create recipe

form
  div
    label{bindAttr for='title.elementId'} Title
    Ember.TextField valueBinding='title' name='title' viewName='title'

  div
    label{bindAttr for='about.elementId'} About
    Ember.TextArea valueBinding='about' name='about' viewName='about'

  #ingredients
    h3 Ingredients
    each ingredient in content.ingredients itemViewClass='App.ItemView'
      h3= this.view.rebasedIndex
      .control-group
        .controls
          Ember.TextField valueBinding='ingredient.about'
          a{ action removeIngredient ingredient target='controller' } href='#' Remove
    div
      a{ action addIngredient target='controller' } href='#' Add Ingredient

  button.btn.btn-success{ action save this } Create
  button.btn.btn-inverse{ action cancel this } Cancel 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:38:24.673

我不知道咖啡脚本，但你可以为每个成分视图创建一个 parentIdBinding 吗？

编辑提供一个例子：

```
{{#each recipe in recipes}}
    {{#each ingredient in ingredients}}
        {{view ingredientView parentBinding="recipe"}}
    {{/each}}
{{/each}} 
```

# html - 使用jsoup css选择器检索表内的第一个最里面的表

> ID：16207114
> 
> 赞同：0
> 
> 时间：2013-04-25T05:36:41.197
> 
> 标签：html, css-selectors, jsoup

当我遇到一个包含表格内表格的链接时，我正在使用 html 表格。我已经提取了整个 url 中的第一个表，如下所示，

```
final Document document = Jsoup.connect("http://www.webdesign.org/html-and-css/tutorials/table-examples.6139.html").get();
final Elements tables = document.select("table");     
final Element table = tables.get(0); 
```

现在我想在html下面使用Jsoup css选择器提取第一个最里面的表，

```
<table cellspacing="0" cellpadding="0"> 
 <tbody>
  <tr> 
   <td id="header_left"><a href="/">
     <div id="logo"></div></a>
    <!-- end logo --></td> 
   <td id="header_center"> 
    <div id="header_menu"> 
     <h2><a href="http://www.templatemonster.com" target="_blank">WEB DESIGN TEMPLATES</a></h2> 
     <p><a href="http://www.templatemonster.com/website-templates.php/?aff=wdl">HTML &amp; CSS Templates</a></p> 
     <p><a href="http://www.templatemonster.com/wordpress-themes.php/?aff=wdl">Wordpress Themes</a></p>
     <p><a href="http://www.templatemonster.com/prestashop-themes.php/?aff=wdl">PrestaShop Themes</a></p> 
    </div>
    <!-- end header_nemu --> 
    <div id="header_books"></div>
    <!-- end header_books --> </td> 
   <td id="header_right"> 
    <div id="search_pic"></div>
    <!-- end search_pic --> 
    <div id="header_search_div"> 
     <div class="block-search-heading">
      SEARCH
     </div> 
     <form method="get" action="/search.html"> 
      <table> 
       <tbody>
        <tr> 
         <td colspan="2" class="keyword"><input type="text" id="search-keyword" name="keywords" value="" title=" - Any Keyword(s) - " /></td> 
        </tr> 
        <tr> 
         <td class="category"><select id="category" name="category"> <option value="0" style="font-weight:bold;">- All categories -</option> <option value="-1" style="font-weight:bold;">Website Templates</option><option value="1" style="font-weight: bold; ">Web Design Basics</option><option value="26">&nbsp;&nbsp;Web Design Showcase</option><option value="2">&nbsp;&nbsp;Design Principles</option><option value="108">&nbsp;&nbsp;Typography</option><option value="111">&nbsp;&nbsp;Responsive Design</option><option value="99" style="font-weight: bold; ">CMS</option><option value="102">&nbsp;&nbsp;Drupal</option><option value="103">&nbsp;&nbsp;Joomla</option><option value="100">&nbsp;&nbsp;Wordpress</option><option value="109" style="font-weight: bold; ">Tutorials</option><option value="7">&nbsp;&nbsp;Photoshop</option><option value="97">&nbsp;&nbsp;&nbsp;&nbsp;Editor's Pick</option><option value="60">&nbsp;&nbsp;&nbsp;&nbsp;Photoshop Basics</option><option value="61">&nbsp;&nbsp;&nbsp;&nbsp;Special Effects</option><option value="62">&nbsp;&nbsp;&nbsp;&nbsp;Text Effects</option><option value="63">&nbsp;&nbsp;&nbsp;&nbsp;3D Effects</option><option value="64">&nbsp;&nbsp;&nbsp;&nbsp;Textures &amp; Patterns</option><option value="65">&nbsp;&nbsp;&nbsp;&nbsp;Web Layout</option><option value="66">&nbsp;&nbsp;&nbsp;&nbsp;Drawing Techniques</option><option value="67">&nbsp;&nbsp;&nbsp;&nbsp;Color Management</option><option value="68">&nbsp;&nbsp;&nbsp;&nbsp;Photo Editing</option><option value="69">&nbsp;&nbsp;&nbsp;&nbsp;ImageReady Animation</option><option value="72">&nbsp;&nbsp;&nbsp;&nbsp;Miscellaneous</option><option value="81">&nbsp;&nbsp;&nbsp;&nbsp;Photoshop CS4 Tutorials</option><option value="98">&nbsp;&nbsp;&nbsp;&nbsp;Photoshop CS5 Tutorials</option><option value="105">&nbsp;&nbsp;&nbsp;&nbsp;Photoshop CS6 Tutorials</option><option value="53">&nbsp;&nbsp;Vector Graphics</option><option value="21">&nbsp;&nbsp;HTML and CSS</option><option value="30" style="font-weight: bold; ">Miscellaneous</option><option value="50">&nbsp;&nbsp;Interviews</option><option value="104">&nbsp;&nbsp;Inspiration</option><option value="110">&nbsp;&nbsp;Freebies</option></select></td> 
         <td class="submit"><input type="submit" value="" /></td> 
        </tr> 
       </tbody>
      </table> 
     </form>
    </div>
    <!-- end header_search_div --></td> 
  </tr> 
 </tbody>
</table> 
```

我想得到这张桌子或这张桌子里面的第一个最里面的桌子，

```
<table> 
       <tbody>
        <tr> 
         <td colspan="2" class="keyword"><input type="text" id="search-keyword" name="keywords" value="" title=" - Any Keyword(s) - " /></td> 
        </tr> 
        <tr> 
         <td class="category"><select id="category" name="category"> <option value="0" style="font-weight:bold;">- All categories -</option> <option value="-1" style="font-weight:bold;">Website Templates</option><option value="1" style="font-weight: bold; ">Web Design Basics</option><option value="26">&nbsp;&nbsp;Web Design Showcase</option><option value="2">&nbsp;&nbsp;Design Principles</option><option value="108">&nbsp;&nbsp;Typography</option><option value="111">&nbsp;&nbsp;Responsive Design</option><option value="99" style="font-weight: bold; ">CMS</option><option value="102">&nbsp;&nbsp;Drupal</option><option value="103">&nbsp;&nbsp;Joomla</option><option value="100">&nbsp;&nbsp;Wordpress</option><option value="109" style="font-weight: bold; ">Tutorials</option><option value="7">&nbsp;&nbsp;Photoshop</option><option value="97">&nbsp;&nbsp;&nbsp;&nbsp;Editor's Pick</option><option value="60">&nbsp;&nbsp;&nbsp;&nbsp;Photoshop Basics</option><option value="61">&nbsp;&nbsp;&nbsp;&nbsp;Special Effects</option><option value="62">&nbsp;&nbsp;&nbsp;&nbsp;Text Effects</option><option value="63">&nbsp;&nbsp;&nbsp;&nbsp;3D Effects</option><option value="64">&nbsp;&nbsp;&nbsp;&nbsp;Textures &amp; Patterns</option><option value="65">&nbsp;&nbsp;&nbsp;&nbsp;Web Layout</option><option value="66">&nbsp;&nbsp;&nbsp;&nbsp;Drawing Techniques</option><option value="67">&nbsp;&nbsp;&nbsp;&nbsp;Color Management</option><option value="68">&nbsp;&nbsp;&nbsp;&nbsp;Photo Editing</option><option value="69">&nbsp;&nbsp;&nbsp;&nbsp;ImageReady Animation</option><option value="72">&nbsp;&nbsp;&nbsp;&nbsp;Miscellaneous</option><option value="81">&nbsp;&nbsp;&nbsp;&nbsp;Photoshop CS4 Tutorials</option><option value="98">&nbsp;&nbsp;&nbsp;&nbsp;Photoshop CS5 Tutorials</option><option value="105">&nbsp;&nbsp;&nbsp;&nbsp;Photoshop CS6 Tutorials</option><option value="53">&nbsp;&nbsp;Vector Graphics</option><option value="21">&nbsp;&nbsp;HTML and CSS</option><option value="30" style="font-weight: bold; ">Miscellaneous</option><option value="50">&nbsp;&nbsp;Interviews</option><option value="104">&nbsp;&nbsp;Inspiration</option><option value="110">&nbsp;&nbsp;Freebies</option></select></td> 
         <td class="submit"><input type="submit" value="" /></td> 
        </tr> 
       </tbody>
      </table> 
```

我真的很想做什么。任何指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:05:32.967

据我所知，您无法使用 CSS 和 jsoup 选择器语法选择*最内部的元素。**如果第一个元素不存在，*您也不能选择此元素或另一个元素。

jsoup 中选择器的语法在这里：http: [//jsoup.org/cookbook/extracting-data/selector-syntax](http://jsoup.org/cookbook/extracting-data/selector-syntax)

Jsoup 选择器主要类似于 CSS，而 jsop 有一组特殊的伪类（在他们的文档中，他们称它们为*Pseudo selectors*）。

要查找具有 css 类“块搜索”的表：

```
Elements elements = doc.select("table.block-search"); 
```

要找到一个带有 css 类“块搜索”的表，它肯定在`<table cellspacing="0" cellpadding="0" id="header_tab">`：

```
Elements elements = doc.select("table#header_tab table.block-search"); 
```

要在以下位置查找第一个具有“块搜索”类的子表`<table cellspacing="0" cellpadding="0" id="header_tab">`：

```
Element element = doc.select("table#header_tab table.block-search").first(); 
```

**UPD**

希望这对您有用。注意最后`while`搭配`current = current.children().select("table").first();`

```
import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class AppJsoap {

    public static void main(String... args) throws IOException {

        Document document = Jsoup
                .connect(
                        "http://www.webdesign.org/html-and-css/tutorials/table-examples.6139.html")
                .get();
        Elements tables = document.select("table table");

        System.out.println(tables.size());
        for (Element el : tables) {
            System.out.println(path(el));
        }

        {
            System.out.println("------");
            Element found = null;
            Element current = tables.get(0);
            while (current != null) {
                System.out.println("current = " + path(current));
                found = current;
                current = current.children().select("table").first();
            }
            System.out.println("found = " + path(found));
        }
    }

    public static String path(Element el) {
        String path = el.parent() != null ? path(el.parent()) : "";
        path += el.nodeName() + "[" + el.siblingIndex() + "] ";
        return path;
    }
} 
```

输出

```
31
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[0] td[1] table[1] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[0] td[1] table[1] tbody[1] tr[0] td[5] div[4] form[3] table[1] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[3] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[7] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[11] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[15] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[19] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[23] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[27] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[31] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[35] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[39] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[43] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[47] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[51] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[55] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[59] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[63] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[67] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[71] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[75] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[79] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[83] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[13] table[87] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[14] table[1] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[3] div[22] table[1] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[4] div[2] div[1] div[5] div[1] div[1] div[3] form[1] table[1] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[2] td[1] table[1] tbody[1] tr[0] td[7] div[2] div[2] div[2] div[3] table[1] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[4] td[3] table[25] 
#document[0] html[1] body[2] div[7] table[1] tbody[1] tr[4] td[3] table[29] 
------
current = #document[0] html[1] body[2] div[7] table[1] tbody[1] tr[0] td[1] table[1] 
current = #document[0] html[1] body[2] div[7] table[1] tbody[1] tr[0] td[1] table[1] tbody[1] tr[0] td[5] div[4] form[3] table[1] 
found = #document[0] html[1] body[2] div[7] table[1] tbody[1] tr[0] td[1] table[1] tbody[1] tr[0] td[5] div[4] form[3] table[1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:02:07.310

经过反复试验，我终于找到了答案。下面是代码，

```
Document document = Jsoup.connect("http://www.webdesign.org/html-and-css/tutorials/table-examples.6139.html").get();
Elements tables = document.select("table");     
Element table = tables.get(0);

// Checks if a table contains table inside it
while(! table.select(":has(table)").isEmpty()){
    table = table.select("table table").first();
} 
```

它检索表中的第一个最里面的表。

# mysql - 在 MySQL 中对相同的行字段进行分组？

> ID：16207120
> 
> 赞同：2
> 
> 时间：2013-04-25T05:37:27.997
> 
> 标签：mysql, select, grouping

我需要将员工姓名分组在一起。我尝试使用“Order By”，但它不适用于空单元格。

![在此处输入图像描述](https://i.stack.imgur.com/Rd5Ke.jpg)

顶部的表格是我当前的表格，我想要底部表格的结果。这是我当前的选择查询。

```
SELECT 
    DAYNAME(calendar.DATE) AS DAY,
    DATE_FORMAT(calendar.DATE, '%d %b %Y') AS Date,
    t2.Department,
    t2.Name,
    TIME(t2.time_enter) AS 'Time In',
    TIME(t2.time_exit) AS 'Time Out'
FROM
    calendar
        LEFT JOIN
    (SELECT 
        employee_hr_id,
            time_enter,
            time_exit,
            department.NAME As Department,
            CONCAT(employee.F_NAME, ' ', employee.L_NAME) As Name
    from
        entry_log
    Inner Join employee ON entry_log.EMPLOYEE_HR_ID = employee.HR_ID
    Inner Join department ON employee.DEPARTMENT_ID = department.ID
    where
        CONCAT(employee.F_NAME, ' ', employee.L_NAME) LIKE @NAME) t2 ON date(t2.time_enter) = calendar.date
where
    calendar.DATE >= @TIME_ENTER
        AND calendar.DATE <= @TIME_EXIT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:35:35.463

您应该使用以下子查询，而不仅仅是 CALENDAR 表。

```
select calendar.DATE,employee.HR_ID,employee.DEPARTMENT_ID 
  from calendar,employee 
  where
    calendar.DATE >= @TIME_ENTER
        AND calendar.DATE <= @TIME_EXIT 
```

在这种情况下，您将获得 DATE 和 EMPLOYEE 的所有可能组合。然后`DEPARTMENT_ID, HR_ID, DATE`从这张桌子订购。

因此，您的查询应如下所示：

```
SELECT 
    DAYNAME(NEW_calendar.DATE) AS DAY,
    DATE_FORMAT(NEW_calendar.DATE, '%d %b %Y') AS Date,
    t2.Department,
    t2.Name,
    TIME(t2.time_enter) AS 'Time In',
    TIME(t2.time_exit) AS 'Time Out'
FROM
    (
       select calendar.DATE as DATE,
              employee.HR_ID as HR_ID,
              employee.DEPARTMENT_ID as DEPARTMENT_ID
            from calendar,employee 
            where
              calendar.DATE >= @TIME_ENTER
                AND calendar.DATE <= @TIME_EXIT
     ) NEW_calendar
        LEFT JOIN
    (SELECT 
        employee_hr_id,
            time_enter,
            time_exit,
            department.NAME As Department,
            CONCAT(employee.F_NAME, ' ', employee.L_NAME) As Name
    from
        entry_log
    Inner Join employee ON entry_log.EMPLOYEE_HR_ID = employee.HR_ID
    Inner Join department ON employee.DEPARTMENT_ID = department.ID
    where
        CONCAT(employee.F_NAME, ' ', employee.L_NAME) LIKE @NAME) t2 

        ON date(t2.time_enter) = NEW_calendar.date
           and (t2.EMPLOYEE_HR_ID=NEW_calendar.HR_ID)
where
    calendar.DATE >= @TIME_ENTER
        AND calendar.DATE <= @TIME_EXIT

order by NEW_calendar.DEPARTMENT_ID,NEW_calendar.HR_ID,NEW_calendar.Date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:10:30.820

空行中没有任何内容表明您将与他们关联的员工。事实上，它们甚至根本不应该重复。可行的方法是连接三个表（或子查询）：一个用于日期，第二个用于*所有*（相关）员工，第三个用于实际分配。然后您可以使用所有员工的第二个表对行进行排序，即使您选择不打印姓名。前两个表之间的完全交叉连接为您提供了日期和员工之间的*所有*组合，然后可以将带有日志条目的那些组合保留下来。

我[在 SQLFiddle 创建了一个示例](http://sqlfiddle.com/#!2/1f249/4)。它使用员工姓名而不是 ID 来匹配事物，并将其`t2`作为表而不是更复杂的子查询，但这个想法应该是干净的。这是该小提琴的查询：

```
SELECT …
FROM
    (calendar,
     (SELECT DISTINCT Name FROM t2) AS employees)
    LEFT JOIN t2 ON DATE(t2.time_enter) = calendar.date
                AND t2.Name = employees.Name
ORDER BY employees.Name, calendar.date 
```

# vb.net - 将 VB.net 代码转换为 C#.net

> ID：16207124
> 
> 赞同：0
> 
> 时间：2013-04-25T05:37:55.607
> 
> 标签：vb.net, c#-4.0

我正在研究 C#.net。我有一个 vb.net 代码，我想将这些代码转换为 C#。我已经完成了所有任务，但是在运行应用程序时，它给了我一个对象未​​设置为对象引用的错误。下面是我的 VB.net 代码。我在我的代码中使用了第三方 ddl，所以 ExchangeList 是那个 dll 的一个类。

```
 Private WithEvents moExchanges As ExchangeList
Private Sub RequestChartData()

        Trace.WriteLine("Init")           
        moExchanges = moHost.MarketData.Exchanges
 End Sub 
```

现在下面是我的 C#.code

```
 Private Host moHost;
  Private ExchangeList moExchanges;
 private void RequestChartData()
    {

        Trace.WriteLine("Init");           
        moExchanges = moHost.MarketData.Exchanges;
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:52:36.633

在没有看到更多代码的情况下，不可能 100% 确定地告诉您源`object not set to an object reference.`代码，但错误似乎是在告诉您它`moHost`为空 - 换句话说，您尚未创建对象的实例。

因此，当您尝试调用`MarketData.Exchanges`该对象时（因此您可以将其分配给`moExchanges`，它会引发错误。

在您的代码中查找`moHost`并确保您已经为它分配了该对象的一个​​实例（通过调用它的构造函数，就像构造函数一样`moHost = new Host()`或任何构造函数），这应该可以解决您的错误。

**更新**

你永远不会初始化`moHost`. 这一行：

```
private Host moHost; 
```

简单地声明对象——此时它为空。因此，当您尝试访问任何实例方法/属性时，您会得到对象未设置为对象引用错误。

您需要`moHost`通过调用它的构造函数来创建一个实例，如下所示：

```
private Host moHost = new Host(); 
```

构造函数可能需要参数 - 查看第三方 DLL 的文档（IDE 中的智能感知也可能会告诉您需要哪些参数，如果有的话）。

这将解决您的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:31:44.843

（）代替：

```
Private Host moHost;
Private ExchangeList moExchanges; 
```

我认为你需要把它写成：

```
Private Host moHost = New Host();
Private ExchangeList moExchanges = New ExhangeList(); 
```

# iphone - 如何使用 CoreGraphics 将渐变应用于饼图的扇形弧

> ID：16207129
> 
> 赞同：0
> 
> 时间：2013-04-25T05:38:24.837
> 
> 标签：iphone, ios, objective-c, core-graphics, pie-chart

我是核心图形的新手。从许多教程中，我开发了一个饼图，如图所示。 ![在此处输入图像描述](https://i.stack.imgur.com/jVKY9.png)

但现在我想为其扇形弧添加一些渐变，如图所示。

如何使用 Core Graphics 实现它？

![在此处输入图像描述](https://i.stack.imgur.com/WsUbd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:42:56.317

这看起来像是学习高级核心图形内容的绝佳资源： [核心图形教程](http://www.raywenderlich.com/32283/core-graphics-tutorial-lines-rectangles-and-gradients)，但我不确定它是否涵盖径向渐变。这个问题演示了径向渐变，你应该可以从那里得到它：[我如何用径向渐变 (iphone) 绘制一个扇区](https://stackoverflow.com/questions/6696015/how-can-i-draw-a-sector-with-radial-gradient-iphone)。

# iphone - Facebook GraphApi 卡在登录成功页面

> ID：16207131
> 
> 赞同：1
> 
> 时间：2013-04-25T05:39:08.637
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我已经集成了 facebook graph api 是几个应用程序，但最近我遇到了一个问题，虽然我在我的**Facebook Profile** -> **Privacy Settings** -> **Security中**`Secure Browsing` **启用**了，并且使用简单它通过了询问权限的所有步骤，但最后卡住了步骤就是它没有进入重定向 url 设置为只要我禁用登录就可以了，我得到附加在.******`FBGraphApi``accesstoken``http://www.facebook.com/connect/login_success.html``Secure Browsing``accesstoken``redirect uri`******

 ******问题是是的，我可以让它工作，但是不可能告诉所有用户`Secure Browsing`从他们的个人资料中禁用它，而且这样做也不是一件好事。

请对此提出一些想法，如果有人遇到类似的问题..

我的问题类似于这个[问题](https://stackoverflow.com/questions/16105113/something-wrong-with-facebook-it-gives-security-warning-please-treat-the-url-a)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T14:29:30.397

我们的应用程序遇到了同样的问题。一位同事做了一些研究，发现如果您开始请求过程（在我们的例子中是 oauth 对话框），则使用`https://`而不是`http://`then 它可以在启用或不启用安全浏览的情况下工作。

所以

```
http://www.facebook.com/dialog/oauth/?response_type=token&display=page... 
```

转换成

```
https://www.facebook.com/dialog/oauth/?response_type=token&display=page... 
```

**编辑**

在上面的 URL 中还有一个重定向 URL，他也将其更改为`https`******

# jython - Jython - 导入文本文件以分配全局变量

> ID：16207141
> 
> 赞同：0
> 
> 时间：2013-04-25T05:39:49.160
> 
> 标签：jython

我正在使用 Jython 并希望导入一个包含许多配置值的文本文件，例如：

```
QManager = MYQM
ProdDBName = MYDATABASE 
```

等等

..然后我逐行读取文件。

我现在无法弄清楚的是，当我阅读每一行并将 = 符号之前的任何内容分配给一个名为的局部循环变量并将`MYVAR`= 符号之后的任何内容分配给局部循环变量`MYVAL`时 - 我如何确保一次循环结束我有一堆全局变量，例如`QManager`&`ProdDBName`等。

我已经为此工作了好几天-我真的希望有人可以提供帮助。

非常感谢，布雷特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:42:08.930

请参阅其他问题：[python 中的属性文件（类似于 Java 属性）](https://stackoverflow.com/questions/3595363/properties-file-in-python-similar-to-java-properties)

自动设置全局变量对我来说不是一个好主意。我更喜欢全局`ConfigParser`对象或字典。如果您的配置文件类似于 Windows`.ini`文件，那么您可以读取它并设置一些全局变量，例如：

```
def read_conf():
    global QManager
    import ConfigParser
    conf = ConfigParser.ConfigParser()
    conf.read('my.conf')
    QManager = conf.get('QM', 'QManager')
    print('Conf option QManager: [%s]' % (QManager)) 
```

（这假设您的配置文件`[QM]`中有部分）`my.conf`

如果您想在没有`ConfigParser`类似模块或类似模块帮助的情况下解析配置文件，请尝试：

```
my_options = {}
f = open('my.conf')
for line in f:
    if '=' in line:
        k, v = line.split('=', 1)
        k = k.strip()
        v = v.strip()
        print('debug [%s]:[%s]' % (k, v))
        my_options[k] = v
f.close()
print('-' * 20)
# this will show just read value
print('Option QManager: [%s]' % (my_options['QManager']))
# this will fail with KeyError exception
# you must be aware of non-existing values or values
# where case differs
print('Option qmanager: [%s]' % (my_options['qmanager'])) 
```

# mysql - MYSQL WHERE条件中的多个ID检查

> ID：16207144
> 
> 赞同：3
> 
> 时间：2013-04-25T05:40:05.027
> 
> 标签：mysql, oracle

我有一个查询，只有当 WHERE 子句中的所有 ID 都匹配时，我才需要获取一行

这是查询

```
SELECT CompanyId
FROM vendors
WHERE VendorId
IN (
'306145244', '1011073437'
) 
```

我想要所有`CompanyId`同时具有`vendorId`“306145244”和“1011073437”的

如果其中`VendorId`一场比赛，我不想要那个`companyId`。两个 VendorId 都应该匹配

分组时，我需要 2 行，如下所示

```
company Id   Vendor Id
1             306145244
1             1011073437
2             306145244
2             306145244 
```

如果可能的话，我希望在`ORACLE`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:46:43.203

```
SELECT  CompanyId
FROM    vendors
WHERE   VendorId IN ('306145244', '1011073437')
GROUP   BY CompanyId
HAVING  COUNT(*) = 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/34634/4)

其他链接：

*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

* * *

如果`vendorID`不是每个都唯一`CompanyId`，`DISTINCT`则关键字只需要计算唯一值，

```
SELECT  CompanyId
FROM    vendors
WHERE   VendorId IN ('306145244', '1011073437')
GROUP   BY CompanyId
HAVING  COUNT(DISTINCT VendorId) = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:49:02.890

尝试这个 ：

```
SELECT CompanyId,VendorId
FROM vendors
WHERE VendorId
IN (
select VendorId from vendors
)
order by CompanyId asc; 
```

希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:46:37.337

您可能需要查看 ALL。

```
SELECT CompanyId
FROM vendors
WHERE VendorId = ALL (
    query to get numbers.
) 
```

[http://dev.mysql.com/doc/refman/5.5/en/all-subqueries.html](http://dev.mysql.com/doc/refman/5.5/en/all-subqueries.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T06:08:01.807

我们`SQL Server`能做的是：

```
SELECT CompanyId
FROM vendors
WHERE VendorId
IN ('306145244')
intersect
SELECT CompanyId
FROM vendors
WHERE VendorId
IN ('1011073437') 
```

但`MYSQL`不支持`intersect`。因此，我们必须**[在 MYSQL 中寻找相交的替代方法](https://stackoverflow.com/questions/2621382/alternative-to-intersect-in-mysql)**

```
select distinct CompanyId
FROM vendors
where vendorId IN ('306145244')
and CompanyId IN
(SELECT CompanyId
FROM vendors
WHERE VendorId
IN ('1011073437')) 
```

**编辑**

```
select  CompanyId,VendorId
FROM vendors
where vendorId IN ('306145244')
and CompanyId IN
(SELECT CompanyId
FROM vendors
WHERE VendorId
IN ('1011073437'))
union
select  CompanyId,VendorId
FROM vendors
where vendorId IN ('1011073437')
and CompanyId IN
(SELECT CompanyId
FROM vendors
WHERE VendorId
IN ('306145244')) 
```

**[SQL小提琴](http://sqlfiddle.com/#!2/83033/5)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T05:52:15.773

```
SELECT `CompanyId` , count( `CompanyId` )
FROM `vendors`
WHERE VendorId
IN (
'306145244', '1011073437'
)
GROUP BY `CompanyId`
HAVING count( `CompanyId` ) = 2; 
```

使用这个，这对我有用并经过测试。

# c++ - 编译器警告的解决方法：控制到达非空函数的结尾

> ID：16207145
> 
> 赞同：2
> 
> 时间：2013-04-25T05:40:05.827
> 
> 标签：c++, compiler-construction

我有以下代码：

```
int cons_col()
{
for(int col =0; rx_state_== MAC_IDLE; col++)
return col;
} 
```

它就像一个计数器，当满足条件 rx_state_ == MAC_IDLE 时应该返回一个整数；编译时，我收到警告：控制到达非无效函数的结尾。

如果在上述函数的末尾添加以下内容，这个问题会消失吗：

```
if (coll == 0)
return 0; 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T05:41:41.520

该代码对此进行评估。

```
int cons_col()
{
    for( int col = 0; rx_state_ == MAC_IDLE; col++ )
    {
       return col;
       // "return" prevents this loop from finishing its first pass,
       // so "col++" (above) is NEVER called. 
    }
    // What happens here?  What int gets returned?
} 
```

请注意，此功能将始终**立即**完成。

它这样做：

*   将整数设置`col`为`0`。
*   检查**一次**if `rx_state_`is `MAC_IDLE`。
*   如果是，则返回`0`
*   如果不是，它会到达`// What happens here?`，然后到达非 void 函数的末尾而不返回任何内容。

根据您的描述，您可能想要这样的东西。

```
int cons_col()
{
    int col = 0;
    for( ; rx_state_ != MAC_IDLE; col++ )
    {
       // You may want some type of sleep() function here.
       // Counting as fast as possible will keep a CPU very busy
    }
    return col;
} 
```

# android - 无法从 json android 填充列表

> ID：16207148
> 
> 赞同：2
> 
> 时间：2013-04-25T05:40:45.393
> 
> 标签：android, json, android-listview, custom-adapter

我正在尝试从 api 填充列表对象。
这是 jsonresult 的一种方法。

```
protected void onPostExecute(String result)
    {

        JSONArray con;
        //String tag_name="tests";
        //String tag_id="ID";
        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        try 
        {
            JSONObject jsonObject = new JSONObject(result);
            if("success".equals(jsonObject.getString("result")))
            {   Toast.makeText(getBaseContext(),jsonObject.getString("tests"),Toast.LENGTH_SHORT).show();
                //String nKey=jsonObject.getString("nKey");
            //  switchActivity(nKey);
                //Toast.makeText(getBaseContext(),nKey,Toast.LENGTH_SHORT).show();
                try{

                con = jsonObject.getJSONArray("tests");
                for(int i = 0; i < con.length(); i++){
                    HashMap<String, String> map = new HashMap<String, String>();
                    JSONObject c = con.getJSONObject(i);
                    map.put("EXAM", "" + c.getString("exam"));
                    map.put("ID", "" + c.getString("id"));
                    mylist.add(map);
                }}catch (JSONException e) {
                    e.printStackTrace();
                }
                ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.textview,new String[] { "exam", "id" },new int[] { R.id.exam, R.id.id });

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);

            }
            else
            {
                Toast.makeText(getBaseContext(),jsonObject.getString("message"),Toast.LENGTH_LONG).show();
            }
        } 
        catch (Exception e)
        {
            Log.d("ReadWeatherJSONFeedTask", e.getLocalizedMessage());
        }          
    } 
```

给出错误

```
ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.textview,new String[] { "exam", "id" },new int[] { R.id.exam, R.id.id }); 
```

错误：

```
The constructor SimpleAdapter(examlist.ReadJSONResult, ArrayList<HashMap<String,String>>, int, String[], int[]) is undefined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:45:11.977

`ListAdapter`这是因为你使用它时没有这样的构造函数。作为`Context`（第一个参数）您要传递`examlist.ReadJSONResult`，并且您应该传递 a `Context`，`Activity`其中放置了`View`使用 this的。`ListAdapter`

如果您设置的类`ListAdapter`不是`Activity`，那么您应该将`Activity`'s传递`Context`给此类并将其存储为例如成员字段以供进一步使用。

例如，您的班级名为`ReadJSONResult`. 创建一个`Context`以参数为参数的构造函数：

```
public ReadJSONResult(Context context) {
    m_context = context;  // There needs to be a field member in ReadJSONResult class called m_context
} 
```

多亏了这一点，在`Activity`您创建`ReadJSONResult`对象的地方，您将`Activity`'s传递`Context`给构造函数，然后您可以`ListAdapter`像这样创建：

```
ListAdapter adapter = new SimpleAdapter(m_context, mylist , R.layout.textview,new String[] { "exam", "id" },new int[] { R.id.exam, R.id.id }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T05:59:16.337

> **创建一个自定义 Adpater 来为 ListView 充气。**

```
public class MyListAdapter extends BaseAdapter {

ArrayList<HashMap<String, String>> data;
Activity a;
private static LayoutInflater inflater=null;

public MyListAdapter(Activity act, ArrayList<HashMap<String, String>> UserAndMessage)
{
    data = UserAndMessage;
    inflater = (LayoutInflater)act.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    a = act;
}

@Override
public int getCount() {

    return data.size();
}

@Override
public Object getItem(int position) {

    return data.get(position);
}

@Override
public long getItemId(int position) {

    return position;
}

@Override
public View getView(int position, View convertview, ViewGroup parent) {

    View vi = convertview;
    if(null == vi)
    {
        vi = inflater.inflate(R.layout.listitem, null);

        TextView ID= (TextView) vi.findViewById(R.id.ID);
        TextView Exam= (TextView) vi.findViewById(R.id.exam);

        HashMap<String,String> item = data.get(position);
        ID.setText(item.get("name"));
        EXAM.setText(item.get("message"));

    }

    return vi;
 }

} 
```

> 从 onPostExecute() 设置 ListView 的适配器如下：

```
myList = (ListView) findViewById(R.id.listView1);   
myList.setAdapter(new MyListAdapter(this, UserAndMessage)); 
```

# xcode - Shell Script & progressIndicator - AppleScript

> ID：16207149
> 
> 赞同：0
> 
> 时间：2013-04-25T05:40:45.843
> 
> 标签：xcode, macos, applescript

我拥有的是运行 shell 脚本的 xcode 中的 applescript 应用程序。我希望做的是当命令为“echo hello world”时让progressIndicator移动一定量，但由于我所有的命令都是sudo，我必须将它们放在一个shell脚本中，我不能只是让progressIndicator 在命令之间移动（有很多命令。）有没有办法在某个命令启动时让条移动？另外，有没有办法将applescript的日志输出到xcode中的textView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T23:39:18.260

您始终可以运行命令行工具“ps”来查看当前正在运行的进程。因此，您可以制定一个重复循环，并使用 ps 可以确定您的哪些命令当前正在运行......从而根据需要增加您的进度指示器。

这是我用来获得漂亮列表的 ps 命令。您可以将其与 grep 结合使用以过滤您的流程...

```
/bin/ps -Axcro user,pid,%cpu,command 
```

# c - 如何使用 win32 API 获取链接标签的句柄

> ID：16207150
> 
> 赞同：2
> 
> 时间：2013-04-25T05:40:48.607
> 
> 标签：c, winapi

我想使用 win32 api 获取现有链接标签的句柄。 ![在此处输入图像描述](https://i.stack.imgur.com/K2Zcn.jpg)

当我单击此链接标签时，将打开一个子窗口。我想获取此链接标签的句柄，以便我可以通过 SendMessage() API 对此执行“单击”鼠标操作。

附图以红色突出显示链接标签。

请帮忙！

![在此处输入图像描述](https://i.stack.imgur.com/7EK1D.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:21:26.810

您可能想尝试通过 COM使用[UI 自动化，它](http://msdn.microsoft.com/en-us/library/windows/desktop/ff625909%28v=vs.85%29.aspx)[从 Windows XP SP3 开始提供](http://msdn.microsoft.com/en-us/library/windows/desktop/ee684009.aspx#RT_REQS)。

# android-ndk - 如何在我的 android 项目中添加“.so”库

> ID：16207158
> 
> 赞同：0
> 
> 时间：2013-04-25T05:41:16.707
> 
> 标签：android-ndk

我是 android 的初学者。现在我正在使用一个使用本机库的应用程序。我需要知道如何在我的 android 项目中添加一个“.so”库文件。任何人请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:47:10.873

在制作完本机 c 代码和头文件后，浏览到项目的根目录并运行**ndk-build**命令。这将生成 .so 文件，然后将其放在项目/libs 文件夹中

# playframework-2.0 - 如何在play framework 2.0.4 java中将选择选项值传递给“href”

> ID：16207165
> 
> 赞同：0
> 
> 时间：2013-04-25T05:41:25.563
> 
> 标签：playframework-2.0

看法：

```
 <select  name="id" id="drop">
                             @for(pag <- page){

                             @if(pag.tenant_location_id == loc.id){

                             <option value="@pag.id">@pag.pagename</option>
                             }

                             }
                            </select>

          <a href="@routes.Project.edit(drop down selected value)>Edit</a> 
```

我尝试使用 javascript var x= document.getElementById('drop') 它不接受 javascript 变量值。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:53:36.010

您不能将 JavaScript 值（在客户端声明）作为 Scala 参数（在运行时编译）传递，您要传递给 Scala 函数的所有参数都必须在视图中声明并获取一些值，即。从控制器或对象。

解决方案：在选项的值中构建整个 url，所以使用基本的 JavaScript 你可以替换`href`on`onchange`事件。示例（未测试，但应与 jQuery 一起使用）

```
<select  name="id" id="drop">
    <option value="">Choose the service...</option>
    @for(pag <- page){
        @if(pag.tenant_location_id == loc.id){
            <option value="@routes.Project.edit(pag.id)">@pag.pagename</option>
        }
    }
</select>

<a href="#" id="editBtn">Edit</a>
<script>
    $(document).on('change', '#drop', function(){
        $('#editBtn').attr('href', $(this).val());
    });
</script> 
```

# objective-c - 执行 NSMutableArray 后出现错误

> ID：16207167
> 
> 赞同：1
> 
> 时间：2013-04-25T05:41:41.380
> 
> 标签：objective-c, macos, cocoa, nsmutablearray

这是代码。我尝试创建一个包含名称、大小和图像（从资源中获取）的对象，然后将该对象添加到`NSMutableArray`其中以在 NSTableView 中显示这些对象。但是，在我运行代码之后，我确实得到了正确的对象计数`NSMutableArray`和每个对象（名称、大小、图像）中的正确信息，但它仍然给我错误。你们能帮帮我吗。我是一名新的 Mac 开发人员。谢谢 ！！

这是代码：

```
 @implementation AppDelegate{
        NSMutableArray* _tableContents;
    }

   -(void)awakeFromNib{

        NSString* imagePath = @"USB.png";
        NSString* mountPath = @"/Volumes";

       _tableContents = [[NSMutableArray alloc]init];

      for(mountPath in [[NSWorkspace sharedWorkspace]mountedLocalVolumePaths])
      {
        if(0==[mountPath rangeOfString:@"/Volumes/"].location)
        {            

           NSString* USBpath = [[[NSWorkspace sharedWorkspace]mountedLocalVolumePaths]objectAtIndex:count];

           //get the name of USB drive
           NSString* nameOfUSB = [USBpath substringFromIndex:9];

          //get the size of USB drive
          NSNumber *volumeSize;
          NSURL *mountPathPicked = [NSURL fileURLWithPath:mountPath];

          if([mountPathPicked getResourceValue:&volumeSize forKey:NSURLVolumeTotalCapacityKey error:nil])
          {
            NSDictionary *obj = @{@"name":nameOfUSB,
                                  @"image":[NSImage imageNamed:imagePath],
                                  @"size":volumeSize
                                  };

            //after I call the following line, it will give me error !!
            [_tableContents addObject:obj];
          }
       }
        count ++;
      }
    }

//I also use the following two methods in order to show the name, and image in NSTableView
-(NSInteger)numberOfRowsInTableView:(NSTableView *)tableView{
    return [_tableCountents count];
}

-(NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row{

  NSDictionary *flag = _tableContents[row];
  NSString *identifier = [tableColumn identifier];//call different col we need identifier
  if([identifier isEqualToString:@"MainCell"])
  {
      NSTableCellView *cellView = [tableView makeViewWithIdentifier:@"MainCell" owner:self];//give back specific cell named mainCell
      [cellView.textField setStringValue:flag[@"name"]];
      [cellView.imageView setImage:flag[@"image"]];
      return cellView;
  }
  return nil;
} 
```

GUI 中没有连接问题。这是错误消息：

```
2013-04-25 01:16:41.321 NAMEOFPROJECT[8243:303] An uncaught exception was raised
2013-04-25 01:16:41.322 NAMEOFPROJECT[8243:303] *** -[__NSArrayI objectAtIndex:]: index 7 beyond bounds [0 .. 3]
2013-04-25 01:16:41.329 NAMEOFPROJECT[8243:303] (
0   CoreFoundation                      0x00007fff9147cb06 __exceptionPreprocess + 198
1   libobjc.A.dylib                     0x00007fff900c03f0 objc_exception_throw + 43
2   CoreFoundation                      0x00007fff9142fb53 -[__NSArrayI objectAtIndex:] + 163
3   CDTOANYDRIVE                        0x00000001000011d6 -[AppDelegate DetectingUSBDrives] + 710
4   CDTOANYDRIVE                        0x0000000100000efb -[AppDelegate awakeFromNib] + 43
5   AppKit                              0x00007fff899631a8 -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 1234
6   AppKit                              0x00007fff89b79976 -[NSNib _instantiateNibWithExternalNameTable:] + 610
7   AppKit                              0x00007fff89b7a41a -[NSNib instantiateNibWithExternalNameTable:] + 17
8   AppKit                              0x00007fff89b262b4 -[NSTableRowData _unarchiveViewWithIdentifier:owner:] + 520
9   CDTOANYDRIVE                        0x000000010000174b -[AppDelegate tableView:viewForTableColumn:row:] + 219
10  AppKit                              0x00007fff89b279a2 -[NSTableRowData _addViewToRowView:atColumn:row:] + 324
11  AppKit                              0x00007fff89b2766f -[NSTableRowData _addViewsToRowView:atRow:] + 151
12  AppKit                              0x00007fff89b25c05 -[NSTableRowData _addRowViewForVisibleRow:withPriorView:] + 415
13  AppKit                              0x00007fff89b2598a -[NSTableRowData _addRowViewForVisibleRow:withPriorRowIndex:inDictionary:withRowAnimation:] + 272
14  AppKit                              0x00007fff89b24c59 -[NSTableRowData _unsafeUpdateVisibleRowEntries] + 740
15  AppKit                              0x00007fff89b247f1 -[NSTableRowData updateVisibleRowViews] + 119
16  AppKit                              0x00007fff89afc5d7 -[NSTableView layout] + 165
17  AppKit                              0x00007fff89aafe95 -[NSView _layoutSubtreeHeedingRecursionGuard:] + 112
18  CoreFoundation                      0x00007fff914754a6 __NSArrayEnumerate + 582
19  AppKit                              0x00007fff89aafff6 -[NSView _layoutSubtreeHeedingRecursionGuard:] + 465
20  CoreFoundation                      0x00007fff914754a6 __NSArrayEnumerate + 582
21  AppKit                              0x00007fff89aafff6 -[NSView _layoutSubtreeHeedingRecursionGuard:] + 465
22  CoreFoundation                      0x00007fff914754a6 __NSArrayEnumerate + 582
23  AppKit                              0x00007fff89aafff6 -[NSView _layoutSubtreeHeedingRecursionGuard:] + 465
24  CoreFoundation                      0x00007fff914754a6 __NSArrayEnumerate + 582
25  AppKit                              0x00007fff89aafff6 -[NSView _layoutSubtreeHeedingRecursionGuard:] + 465
26  AppKit                              0x00007fff89aafd2e -[NSView layoutSubtreeIfNeeded] + 615
27  AppKit                              0x00007fff89aab4dc -[NSWindow(NSConstraintBasedLayout) layoutIfNeeded] + 201
28  AppKit                              0x00007fff899d96a8 -[NSView _layoutAtWindowLevelIfNeeded] + 99
29  AppKit                              0x00007fff899d8fe6 -[NSView _sendViewWillDrawInRect:clipRootView:] + 87
30  AppKit                              0x00007fff899a59b1 -[NSView displayIfNeeded] + 1044
31  AppKit                              0x00007fff89a62a48 -[NSWindow _reallyDoOrderWindow:relativeTo:findKey:forCounter:force:isModal:] + 1377
32  AppKit                              0x00007fff89a62068 -[NSWindow _doOrderWindow:relativeTo:findKey:forCounter:force:isModal:] + 940
33  AppKit                              0x00007fff89a61c4f -[NSWindow orderWindow:relativeTo:] + 159
34  AppKit                              0x00007fff89963266 -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 1424
35  AppKit                              0x00007fff8994214d loadNib + 317
36  AppKit                              0x00007fff89941679 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 219
37  AppKit                              0x00007fff899414ae -[NSBundle(NSNibLoading) loadNibNamed:owner:topLevelObjects:] + 200
38  AppKit                              0x00007fff8994128e +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 360
39  AppKit                              0x00007fff8993da2f NSApplicationMain + 398
40  CDTOANYDRIVE                        0x0000000100000e82 main + 34
41  libdyld.dylib                       0x00007fff9385a7e1 start + 0
42  ???                                 0x0000000000000003 0x0 + 3
) 
```

上面的错误显示两次！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:50:36.190

我已经在一个迷你应用程序中尝试过你的代码，它工作正常。我可能会强调几件事：

1.  您的异常发生在 DetectingUSBDrives 方法中，我们没有任何代码。我假设您已将代码粘贴到 awakeFromNib 方法中。
2.  您正在`count`用作索引。这个变量是否初始化为零？
3.  错误出现两次的事实表明您的单元格视图包含对您的应用程序委托的引用，这意味着每次视图创建都会调用一次 awakeFromNib。由于您在那里初始化 _tableOfContents，这可能会产生很多问题。您可能希望将所有代码移到`init`方法中。

# sql - 从 SQL Server 下载图像

> ID：16207173
> 
> 赞同：3
> 
> 时间：2013-04-25T05:41:55.467
> 
> 标签：sql, vb.net

我使用基于 vb.net 窗口，我想在我的 SQL 服务器中获取或下载 FileImage。在 ASP.NET 中，我可以通过此代码下载它。但我想把它翻译成基于windows的。你能帮我吗？

谢谢，

```
 Dim oFileType As String = oPortal.GetDs("FileType")
    Dim oFile As Byte() = oPortal.GetDs("FileImage")
    Dim oRecordKey As String = oPortal.GetDs("FileName")

    Response.ContentType = "image/" & oFileType
    If Request.QueryString("open") <> "" Then 
        Response.AppendHeader("Content-Disposition", "attachment; filename=" & oRecordKey) 
    End If

    Response.BinaryWrite(oFile)
    Response.End() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T03:22:36.717

知道了。File.WriteAllBytes(oPath & oFileName, WebCtrl.GetDs("FileImage"))

# ios - iOS 无法加载视图

> ID：16207184
> 
> 赞同：0
> 
> 时间：2013-04-25T05:42:50.197
> 
> 标签：ios, ios5

我正在尝试使用 iOS 5.0 通过触摸按钮从一个视图导航到另一个视图。

我正在使用的代码

```
- (IBAction)Actionlogin:(id)sender {
    NSLog(@" login button has been pressed");
       NSLog(@"In init");
        test_details *aSecondPageController=[[test_details alloc]initWithNibName:@"test_details" bundle:nil];
       [self.navigationController pushViewController:aSecondPageController animated:NO];
      } 
```

我有两个 xib 文件`test_details_iPhone.xib`和`test_details_iPad.xib`

在我的 testdetails.m 里面

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    NSLog(@"it is coming here in second view");
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) {
        // Custom initialization
    }
    NSLog(@"it has been returned ");
    return self;

} 
```

日志

```
2013-04-25 11:06:17.191 app_gototest[3067:207]  login button has been pressed
2013-04-25 11:06:17.194 app_gototest[3067:207] In init
2013-04-25 11:06:17.195 app_gototest[3067:207] it is coming here in second view
2013-04-25 11:06:17.196 app_gototest[3067:207] it has been returned 
```

视图没有加载到视图上。我想我错过了一些东西。

**应用程序：didFinishLaunchingWithOptions：**在`appDelegate`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil];
    } else {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

** 我正在尝试 Jasper Blue 的方法**

```
argc    int 1
argv    char ** 0xbfffed2c
*argv   char *  0xbfffee44 
```

**在 appDeleagte.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        UINavigationController* navigationController; 
        // Override point for customization after application launch.
        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
            self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPhone"     bundle:nil];
            navigationController = [[UINavigationController alloc]         initWithRootViewController:_viewController];
        } else {
            self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPad"     bundle:nil];
            navigationController = [[UINavigationController alloc] initWithRootViewController:_viewController];
        }
        self.window.rootViewController = navigationController;
        [self.window makeKeyAndVisible];
        return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:58:49.167

你的代码看起来不错，所以 self.navigationController 一定是 nil。. . 您是否设置了导航控制器？

为了使您的代码正常工作，您当前的 UIViewController 需要包含在 UINavigationController 中。. . 您可以在应用程序委托中将 UINavigationController 设置为根视图控制器，如下所示：

```
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    UINavigationController* navigationController; 
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPhone"     bundle:nil];
    navigationController = [UINavigationController alloc]         initWithRootViewController:viewController];
    } else {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPad"     bundle:nil];
        navigationController = [UINavigationController alloc] initWithRootViewController:viewController];
    }
    self.window.rootViewController = navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

**注意：你可以稍微清理一下上面的代码，但是你得到了图片，那就是你必须将根视图控制器设置为导航控制器，如下所示：**

```
 self.window.rootViewController = navigationController; 
```

如果你愿意，你也可以制作一个自定义的根视图控制器，但上面的内容可以让你实现你想要做的事情——UINavigationController 将用作整个应用程序的导航系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:11:20.537

您的导航控制器为零。因此，将您的 didFinishLaunchingWithOptions 方法替换为

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:   (NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
      self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil];
    } else {
      self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil];
    }
    UINavigationController *navcontroller = navigationController = [UINavigationController alloc] initWithRootViewController:self.viewController];
    self.window.rootViewController = navcontroller;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

现在您有一个导航控制器，因此对 self.navigationController 上的 push 方法的调用应该推送第二个控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:13:57.077

请试试

```
- (IBAction)Actionlogin:(id)sender {
     NSLog(@" login button has been pressed");
     NSLog(@"In init");
     test_details *aSecondPageController=[[test_details alloc]initWithNibName:@"test_details_iPhone" bunndle:nil];
    [self.navigationController pushViewController:aSecondPageController animated:NO];
  }

 // test_details_iPhone.xib and test_details_iPad.xib
 //Change initWithNibName@"test_details" with test_details_iPhone or test_details_iPad 
```

# c++ - Windows 7 上的 IContextMenu::InvokeCommand 错误代码 0x80270000

> ID：16207190
> 
> 赞同：1
> 
> 时间：2013-04-25T05:43:11.630
> 
> 标签：c++

我有以下代码来删除文件。此代码在 winXP 上运行良好。但是当我在 Windows 7 上运行时，它不会删除该文件。执行 InvokeCommand 语句时出现错误代码 0x80270000。

```
HRESULT hr = m_psfCurFolder->GetUIObjectOf(AfxGetMainWnd()->m_hWnd,
    uiCount, 
    (LPCITEMIDLIST*)aPidls, 
    IID_IContextMenu, 
    NULL, 
    (LPVOID*)&pcm);

    if (SUCCEEDED (hr))
    {
        HMENU hPopup = CreatePopupMenu();
        hr = pcm->QueryContextMenu(hPopup, 0, 1, 0x7fff, CMF_NORMAL);

        if (SUCCEEDED (hr))
        {
                CMINVOKECOMMANDINFO cmi;
                cmi.cbSize = sizeof(CMINVOKECOMMANDINFO);
                cmi.fMask =   CMIC_MASK_ASYNCOK;
                cmi.hwnd = (HWND) GetParent();
                cmi.lpVerb = (LPCSTR)(INT_PTR)(ID_MENU_DELETE - 1);
                cmi.lpParameters = NULL;
                cmi.lpDirectory = NULL;
                cmi.nShow = SW_SHOWNORMAL;
                cmi.dwHotKey = 0;
                cmi.hIcon = NULL;

                BOOL bUndoDel = FALSE;
                if (!(GetKeyState(VK_SHIFT) & SHIFTED))
                {
                    bUndoDel = TRUE;
                }
                hr = pcm->InvokeCommand (&cmi);

                if (FAILED(hr))
                {
                    _com_error error(hr);
                    LPCTSTR errorText = error.ErrorMessage();

                    AfxMessageBox(_T("Unable to perform action"));
                }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T23:11:40.377

[我发现了同样的问题，并在Microsoft Visual Studio 语言论坛](http://social.msdn.microsoft.com/Forums/en-US/230e7613-ffb4-4e58-b2ff-d3f9eae57412/cmfcshelllistctrloncontextmenu-delete-context-menu-handler-does-not-work-in-windows-7)和[Microsoft Connect](http://connect.microsoft.com/VisualStudio/feedback/details/792003/cmfcshelllistctrl-oncontextmenu-delete-context-menu-handler-does-not-work-in-windows-7)上发布了详细信息和解决方案。

简而言之，这条线...

```
 cmi.hwnd = (HWND) GetParent(); 
```

...应该替换为：

```
 cmi.hwnd = GetParent()->GetSafeHwnd(); 
```

尽管将 CWnd* 转换为 HWND 会产生相同的数值，但由于某些未知原因，它会在 Windows XP（它可以工作）和 Windows 7（它不能工作）之间产生不同的结果。使用 GetSafeHwnd() 可修复问题，现在会显示“删除文件”确认对话框。它也适用于 Windows XP。

# iphone - 响应在 UIScrollView 中以编程方式生成的自定义 UIButtons

> ID：16207194
> 
> 赞同：0
> 
> 时间：2013-04-25T05:43:32.077
> 
> 标签：iphone, ios, objective-c, xcode, ios6

我有一个 UIScrollView 充满了以编程方式生成的自定义 UIButtons。此代码通过循环执行每次迭代，通常执行 7 次。

```
[cardButton
      addTarget:self
      action:@selector(buttonPressed:)
      forControlEvents:UIControlEventTouchUpInside];
[cardButton setTag:i + 100];
[self.scrollView addSubview:cardButton]; 
```

在其他地方我有这个功能：

```
- (IBAction) buttonPressed:(id)sender
{
    UIButton *button = (UIButton *)sender;
    NSLog(@"%d", [button tag]);
} 
```

我如何将两者联系起来？我的按钮实际上将我需要的所有信息存储在它的标签内，所以我真的只需要检测它何时被点击，以便我做出响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:58:26.843

你已经用这条线链接了两个

```
[cardButton
      addTarget:self
      action:@selector(buttonPressed:)
      forControlEvents:UIControlEventTouchUpInside]; 
```

发件人正在返回您按下的按钮实例。所以

```
- (IBAction) buttonPressed:(id)sender
{
    UIButton *button = (UIButton *)sender;
    NSLog(@"%d", [button tag]);
    switch (button.tag) {
        case 1:
            //Action for button with tag 1
            break;
        case 2:
            //Action for button with tag 2
            break;

        default:
            break;
    }

} 
```

# iis - 会话在 iis 服务器 8 上的经典 asp 中不起作用

> ID：16207195
> 
> 赞同：2
> 
> 时间：2013-04-25T05:43:33.240
> 
> 标签：iis, iis-7, asp-classic

我的 Session 变量没有在托管在 iis 服务器 8 上的经典 asp webPages 中初始化，我已经在会话状态功能视图以及 IIS 服务器 8 的 ASP 调试属性部分中配置了会话属性，

在将我的整个网站从带有 IIS7 的 Windows server 2008 r2 转移到带有 IIS8 的 Windows server 2012 r2 之后，请帮助我面对这个问题

在 IIS 7 上，我没有遇到有关此会话变量初始化的任何问题

任何帮助，将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-03T04:42:38.623

您需要在 IIS7/IIS8 中的经典 asp 下启用会话状态。

打开 IIS 管理器。导航到您正在处理的站点。在右侧双击 ASP。单击会话属性 + 以显示所有选项。将启用会话状态更改为 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-31T06:08:35.983

我有同样的问题。**就我而言，网站没有 cookie**。我不为我的 websie 使用 SSL 证书，并且`<httpCookies requireSSL="true" />`在 section 中存在代码`system.web`。在我将其更改为`<httpCookies requireSSL="false" />`我的问题解决之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-15T13:29:44.273

如果 IIS 设置中的会话状态是 ok 的，请检查以确保您没有使用`session.Abandon()`，因为调用此方法时，当前 Session 对象不会被删除，直到当前页面上的所有脚本都被处理完。这意味着可以访问与调用 Abandon 相同的页面上的会话变量，但不能从另一个 Web 页面访问，也不能在您计划使用会话对象在两个页面之间传输数据时访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T12:49:11.680

试试这个代码来确保变量没有被初始化：

```
dim i
dim j
j = Session.Contents.Count
Response.Write("Session variables: " & j & "<br>") 
For i=1 to j
  Response.Write(Session.Contents(i) & "<br>") 
Next 
```

上面的代码将显示是否有任何变量被初始化以及每个变量的内容。

# android - 使用 AsyncTask 时如何处理按钮单击？

> ID：16207196
> 
> 赞同：1
> 
> 时间：2013-04-25T05:43:36.130
> 
> 标签：android, android-asynctask

我正在开发警报应用程序。

我使用广播接收器来接收闹钟时间。

当闹钟时间到时，我会显示一个使用 AsyncTask 启动铃声和振动 2 分钟的活动。

在这个活动中，我有两个名为

1.  加

2.  减

当我按下这些按钮中的任何一个时，它的点击事件会延迟触发，这意味着由于 asyncTask 在背景中运行（播放铃声）而在我按下按钮时没有被点击。

我读到 asyncTask 在单独的线程上运行，

比我的按钮单击事件应该在按下时触发，但在这种情况下它不做同样的事情。

如果有人遇到这种情况并得到解决方案，请建议我！

下面是我的代码。
调用使用：

```
new RingtonePlay ().execute(""); 
```

以下是实施。

```
public class RingtonePlay extends AsyncTask<String,Void, String>
{
    @Override
    protected void onPreExecute() 
    {
        super.onPreExecute();
        try 
        {
            audioManager    = (AudioManager)mContext.getSystemService(Context.AUDIO_SERVICE);
            originalVolume  = audioManager.getStreamMaxVolume(AudioManager.STREAM_RING);
            vibratorObj     = (Vibrator)mContext.getSystemService(Context.VIBRATOR_SERVICE);

            volume  = originalVolume;

            listObjs.clear();
            listObjs.add(audioManager);
            listObjs.add(originalVolume);
            listObjs.add(vibratorObj);
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    }       
    @Override
    protected String doInBackground(String... params) 
    {
        try 
        {
            Cursor cursorSettings   = dbHelper.getAllRecords(Info.SETTINGS);
            if(cursorSettings!=null && cursorSettings.getCount()>0)
            {
                cursorSettings.moveToFirst();
                durationInMilliSeconds  = cursorSettings.getString(cursorSettings.getColumnIndex(Info.DEFAULT_DURATION));
                vibrate     = cursorSettings.getInt(cursorSettings.getColumnIndex(Info.DEFAULT_VIBRATE));

                if(toneName.equals(""))
                {   
                    toneName    = cursorSettings.getString(cursorSettings.getColumnIndex(Info.DEFAULT_TONE_NAME));
                    tonePath    = cursorSettings.getString(cursorSettings.getColumnIndex(Info.DEFAULT_TONE_PATH));
                }
                listObjs.add(vibrate); // For vibration [ YES = 1, NO = 0]
            }
            else
            {   
                listObjs.add(0); // For vibration [ YES = 1, NO = 0]
            }   
            if(cursorSettings!=null)
                cursorSettings.close();

            durationInMilliSeconds = 5000;

            ringTone = RingtoneManager.getRingtone(mContext, tonePathURI);

            if(ringTone!=null)
            {   
                ringTone.play();
            }

            if(ringTone==null && vibrate==0)
            {
                // No need to start any counter...
            }
            else
            {   
                timer = new MyCountDownTimer(durationInMilliSeconds, 1000, ringTone, mContext, listObjs);
                timer.start();
            }
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }

        return "";
    }

    @Override
    protected void onPostExecute(String result) 
    {
        super.onPostExecute(result);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:54:54.400

中的 4 个函数中`AsyncTask`，只有`doInBackground()`在主 UI 线程之外的自己的线程中运行。因此，请确保您是从内部播放铃声，`doInBackground()`并`AsyncTask`从其`execute()`功能开始。

`AsyncTask.doInBackground()`除非`Button`您直接调用它而不是执行`AsyncTask`.

大概，你有一个简短的声音文件，你一遍又一遍地播放了 2 分钟。
每次声音播放完毕时，您都应该检查几件事来决定是否应该再次播放。内部的`while()`循环`doInBackground()`可以很好地解决这个问题。

*   如果两分钟过去了，请不要再次播放声音。
*   您的“加号”和“减号”`Button`按可以修改两分钟的时间。
*   您可以添加一个“停止”按钮以将时间归零并 `AsyncTask`在下一个周期停止。

# php - 我目前正在尝试使用 phpMyAdmin 的 mysql 服务器填充下拉菜单

> ID：16207197
> 
> 赞同：0
> 
> 时间：2013-04-25T05:43:36.920
> 
> 标签：php, mysql

索引.html：

```
<?php
    include_once 'func.inc.php';
    connect();
?>

<!doctype html>
<html>
<head>
    <title>Team DriveSmart</title>
</head>
<body bgcolor="#008933" text="#ffffff">
    <header>
        <h1 align="center"> Team DriveSmart </h1>
    </header>
    <header>
        <h3 align="center"> Highway State </h3>
    </header>
    <section>
        <article>
            <hgroup>
            </hgroup>
            <p align="center">
            <form style="text-align:center" method="post" action="">

                <select name="dropdown1">
                    <?php query1() ?>   
                </select>

            <input type="submit" value="Submit" />
            </form> 
            </p>
        </article>
        <article>
        </article>
    </section>
    <footer>
        <f1 align="center"></f1>
    </footer>

    <header>
        <h3 align="center"> Highway ID </h3>
    </header>
    <section>
        <article>
            <hgroup>
            </hgroup>
            <p align="center">
            <form style="text-align:center" method="post" action="">

                <select name="dropdown2">
                    <?php query2() ?>   
                </select>

            <input type="submit" value="Submit" />
            </form> 
            </p>
        </article>
        <article>
        </article>
    </section>
    <footer>
        <f1 align="center"></f1>
    </footer>

</body>
</html> 
```

然后我的 func.inc.php 看起来像这样：

```
<?php
    include_once 'db.inc.php';

    function connect()
    {
        mysql_connect(DB_HOST, DB_USER, DB_PASS) or die("Error connecting" . mysql_error()) ;
        mysql_select_db(DB_NAME);
    }

    function close()
    {
        mysql_close();
    }

    function query1()
    {

        $myData=mysql_query("SELECT * FROM highways_highway");
        while($record = mysql_fetch_array($myData))
        {
            echo '<option value="' . $record['highway_state'] . '">' . $record['highway_state'] . '</option>' ;
        }
    }

    function query2()
    {
        $myData=mysql_query("SELECT * FROM highways_exit");
        while($record = mysql_fetch_array($myData))
        {
            echo '<option value="' . $record['highway_id'] . '">' . $record['highway_id'] . '</option>' ;
        }
    }

?> 
```

我想做的是我想用数据库中的选项填充这些下拉菜单（例如，在 query1 中，我想用状态填充菜单）。该代码目前似乎显示了一个下拉菜单和一个提交按钮，但下拉菜单是空的，我不知道为什么。

B 部分：一旦用户从下拉菜单中选择，我想根据查询 SELECT * FROM Highways_highway WHEREhighway_state = dropdown1 显示整个 sql 表，一旦 A 部分修复，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:05:13.700

尝试这个

```
function my_custom_function()
{
// php code here

return $myData;
} 
```

或者在你的情况下

```
function query2()
    {
     $myHtmlData = '';

        $myData=mysql_query("SELECT * FROM highways_exit");
        while($record = mysql_fetch_array($myData))
        {
            $myHtmlData .= '<option value="' . $record['highway_id'] . '">' . $record['highway_id'] . '</option>' ;
        }

   return $myHtmlData;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:47:58.377

用这个。

在 index.html 文件中，像这样回显您的函数。

```
<select name="dropdown1">
     <?php echo query1(); ?>   
</select>

<select name="dropdown2">
     <?php echo query2(); ?>   
</select> 
```

并在 func.inc.php 文件中，返回这样的数据。

```
function query1()
{
    $myselectData = '';

    $myData= mysql_query("SELECT * FROM highways_highway");
    while($record = mysql_fetch_assoc($myData))
    {
        $myselectData .= '<option value="'.$record['highway_state'].'">' . $record['highway_state'] . '</option>';
    }

  return $myselectData; 
}

function query2()
{
    $myselectData1 = '';

    $myData= mysql_query("SELECT * FROM highways_exit");
    while($record = mysql_fetch_assoc($myData))
    {
        $myselectData1 .= '<option value="'.$record['highway_id'].'">' . $record['highway_id'] . '</option>';
    }

 return $myselectData1; 
} 
```

这可能对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T00:52:21.940

显然，问题是我将文件命名为 index.html 而不是 index.php，对不起那些人，感谢您的帮助

# haskell - Haskell 解析运算符尝试问题

> ID：16207198
> 
> 赞同：4
> 
> 时间：2013-04-25T05:43:47.700
> 
> 标签：haskell, parsec

我正在使用 GHC 在 Windows 上编译。这是我的参考代码[http://hpaste.org/86539](http://hpaste.org/86539)

问题是以下表达式无法解析： `3+2 < 1+-4 <= -3 << 1`. 它应该解析为：

![在此处输入图像描述](https://i.stack.imgur.com/s0Cin.png)

..但是，`-`当它显然是最高操作员时，我会感到意外。我怀疑这是因为我使用了`try`第 55 行，但是没有它`<`，`<<`并且重复一个符号的运算符无法正确解析。

我正在寻求建议或提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T07:03:20.267

问题在第 56 行：

```
P.lexeme <$ string s 
```

应该读：

```
P.lexeme gmlLexer $ string s 
```

前一个构造是匹配`s`，然后返回函数`P.lexeme`作为解析的结果！随后`>>`将结果扔掉，因此它类型检查。

您想要做的是后面的行：将`P.lexeme`您的语言的 应用`gmlLexer`到解析器以进行匹配`s`。

# c# - 实体框架，为什么我的位置被忽略了？

> ID：16207201
> 
> 赞同：0
> 
> 时间：2013-04-25T05:43:56.327
> 
> 标签：c#, entity-framework-5

关于下面的查询，为什么我的条件是 ingored？

（注意：注释掉的 sql 语句是我试图在这个 linq 查询中复制的。）

```
public static List<Sys.Entities.Hms206> Hms206Get( DateTime startDate, DateTime endDate, string courseNumber, bool sOnly ) {
    //select distinct
    //    p.DEPTID [Rc],
    //    p.NAME [EmployeeName],
    //    p.EMPLID [EmployeeId],
    //    x.XLATSHORTNAME [Ran]
    //from 
    //    tablep p
    //    inner join tablex x on p.CM_RAN = x.FIELDVALUE
    //    inner join tablet t on p.EMPLID = t.EMPLID
    //where
    //    p.DEPTID not like '%R'
    //    and p.EMPL_STATUS in('A','L','P','S','W')
    //    and t.COURSE_END_DT between '7/1/1960' and '12/27/2012' 
    //    and t.COURSE = 'C00005' 
    //    and t.ATTENDANCE = 'C' 
    //    and x.FIELDNAME = 'CM_RAN'

    //    and p.CM_IND = 'S' 
    //    --and p.CM_IND in ('S','C') -- all
    //order by 
    //    p.DEPTID, p.NAME
    string[] stats = new string[]{"A","L","P","S","W"};
    using ( var context = new Sys.EntityModels.LCEntities() ) {
        var query = ( from p in context.PsCmSummaries
                        join x in context.TableX on p.CM_RAN equals x.FIELDVALUE
                        join t in context.TableT on p.EMPLID equals t.EMPLID
                        where !p.DEPTID.EndsWith( "R" )
                        && stats.Contains( p.EMPL_STATUS )
                        && t.COURSE_END_DT >= startDate && t.COURSE_END_DT <= endDate
                        && t.COURSE == courseNumber
                        && t.ATTENDANCE == "C"
                        && x.FIELDNAME == "CM_Ran"
                        select new {
                            p.DEPTID,
                            p.NAME,
                            p.EMPLID,
                            x.XLATSHORTNAME,
                            p.CM_IND
                        } );
       // this conditional where is not being applied
       if ( sOnly ) {
            query.Where( x => x.CM_IND == "S" );
        }
        else {
            query.Where( x => x.CM_IND == "S" || x.CM_IND == "C" );
        }

        return query.Distinct().OrderBy( x => x.DEPTID ).ThenBy( x => x.NAME )
            .Select( 
                x => new Sys.Entities.Hms206 { 
                    Rc = x.DEPTID, EmployeeName = x.NAME, EmployeeId = x.EMPLID, 
            Rank = x.XLATSHORTNAME, S_Indicator = x.CM_IND 
            })
            .ToList();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:52:20.140

你可以试试这个来替换你的条件：

```
if ( sOnly ) {
    query.Where( x => x.CM_IND == "S" );
}
else {
    query.Where( x => x.CM_IND == "S" || x.CM_IND == "C" );
} 
```

**答案如下**：

```
query = sOnly ? query.Where(x => x.CM_IND == "S")
              : query.Where(x => x.CM_IND == "S" || x.CM_IND == "C"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T05:47:50.797

您正在调用`Where`但完全忽略了返回值 - 这使得调用无用。你想要这样的东西：

```
if (sOnly) {
    query = query.Where(x => x.CM_IND == "S");
}
else {
    query = query.Where(x => x.CM_IND == "S" || x.CM_IND == "C");
} 
```

LINQ 调用（例如`Where`,`Select`等）不会修改*现有*查询 - 它们通过将前一个查询与新方面组合起来返回一个*新*查询。

# javascript - 必需属性不适用于Angular Js中的文件输入

> ID：16207202
> 
> 赞同：24
> 
> 时间：2013-04-25T05:44:12.317
> 
> 标签：javascript, angularjs, forms

我的表单中有一个文件上传控件。我正在使用 Angular JS。当我放置所需的属性来验证文件是否被选中时，它不起作用。

```
<input id="userUpload" name="userUpload" required type="file" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" />

<button type="submit" class="btn btn-primary"><i class="icon-white icon-ok"></i>&nbsp;Ok</button> 
```

你能建议为什么所需的不起作用吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-25T07:33:22.943

它是[ngModelController](http://docs.angularjs.org/api/ng.directive:ngModel.NgModelController)根据属性在 Angular 中进行验证`require`。但是，目前不支持`input type="file"`ng-model 服务。为了让它工作，你可以创建一个这样的指令：

```
app.directive('validFile',function(){
  return {
    require:'ngModel',
    link:function(scope,el,attrs,ngModel){
      //change event is fired when file is selected
      el.bind('change',function(){
        scope.$apply(function(){
          ngModel.$setViewValue(el.val());
          ngModel.$render();
        });
      });
    }
  }
}); 
```

示例标记：

```
 <div ng-form="myForm">
    <input id="userUpload" ng-model="filename" valid-file name="userUpload" required type="file" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" />
    <button ng-disabled="myForm.$invalid" type="submit" class="btn btn-primary"><i class="icon-white icon-ok"></i>&nbsp;Ok</button>
    <p>
      Input is valid: {{myForm.userUpload.$valid}}
      <br>Selected file: {{filename}}
    </p>
  </div> 
```

查看[我的工作 plnkr 示例](http://plnkr.co/edit/3TZCMUb9XXPGP5ifHf6x?p=preview)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-08-20T07:19:29.863

扩展@joakimbl 代码我会建议这样的直接

```
.directive('validFile',function(){
    return {
        require:'ngModel',
        link:function(scope,el,attrs,ctrl){
            ctrl.$setValidity('validFile', el.val() != '');
            //change event is fired when file is selected
            el.bind('change',function(){
                ctrl.$setValidity('validFile', el.val() != '');
                scope.$apply(function(){
                    ctrl.$setViewValue(el.val());
                    ctrl.$render();
                });
            });
        }
    }
}) 
```

在html中你可以这样使用

```
<input type="file" name="myFile" ng-model="myFile" valid-file />
<label ng-show="myForm.myFile.$error.validFile">File is required</label> 
```

# c++ - 二叉搜索树实现（C++）

> ID：16207204
> 
> 赞同：0
> 
> 时间：2013-04-25T05:44:22.283
> 
> 标签：c++, data-structures

大部分代码来自 Weiss 的“C++ 中的数据结构和算法分析”，我在 CodeBlock(gnu,gcc) 上输入代码后，编译器没有报错，但后来我尝试创建一个实例并测试一些函数它去了错误的。BST() 或 insert() 似乎有问题，因为程序在运行后立即卡住了。有人能帮我找出解决这个问题的方法吗？太谢谢了！！！

```
#include <iostream>
using namespace std;
struct TreeNode
{
    int element;
    TreeNode*left,*right;
    TreeNode(const int&e,TreeNode*le=NULL,TreeNode*rt=NULL):element(e),left(le),right(rt){};
};

class BST
{
public:
    BST(){root=NULL;};
    ~BST(){ makeEmpty(root); };
// use public member function to call private member functions.
    void insert(const int & x){ insert(x, root); }
    void remove(const int & x){ remove(x, root); }
    TreeNode*findMin() const{ return findMin(root); }
    bool contain(const int & x) const{ return contain(x,root); }
    void printNodes() const{ printNodes(root); }

private:
    TreeNode*root;

    void makeEmpty(TreeNode*&);
    TreeNode* findMin(TreeNode*) const;
    void insert(const int &, TreeNode*) const;
    void remove(const int &, TreeNode*) const;
    bool contain(const int &, TreeNode*) const;
    void printNodes(TreeNode*) const;
};

void BST::makeEmpty(TreeNode*&t)
{
    if(t!=NULL)
    {
        makeEmpty(t->left);
        makeEmpty(t->right);
        delete t;
    }
    t=NULL;
}
TreeNode* BST::findMin(TreeNode*t) const
{
    if(t->left==NULL)    return t;
    return findMin(t->left);
}
void BST::insert(const int & x, TreeNode* t) const
{
    if(t==NULL) t=new TreeNode(x,NULL,NULL);
    else if(x < t->element)    insert(x,t->left);
    else if(x > t->element)    insert(x,t->right);
    else;   /// duplicate, do nothing
}
void BST::remove(const int & x, TreeNode* t) const
{
    if(t==NULL) return;
    if(t->element > x)    remove(x, t->left);
    else if(t->element < x)  remove(x, t->right);
    else if(t->left!=NULL && t->right!=NULL)
    {
        t->element=findMin(t->right)->element;
        remove(t->element,t->right);
    }
    else
    {
        TreeNode*oldNode=t;
        t=(t->left==NULL)?t->right:t->left;
        delete oldNode;
    }
}
bool BST::contain(const int & x, TreeNode*t) const
{
    if(t==NULL)    return false;
    else if(x<t->element)    return contain(x,t->left);
    else if(x>t->element)    return contain(x,t->right);
    else    return true;
}
void BST::printNodes(TreeNode*t) const
{
    if(t==NULL) return;
    cout<<t->element<<" ";
    printNodes(t->left);
    printNodes(t->right);
    cout<<endl;
}; 
```

这是我为测试 BST 类编写的代码：

```
int main()
{
    BST BinarySearchTree;
    int element,node;
    for(int i=0; i<5; i++)
    {
        cin>>element;
        BinarySearchTree.insert(element);
    }
    BinarySearchTree.printNodes();

    cout<<BinarySearchTree.findMin()->element<<endl;

    cin>>node;
    if(BinarySearchTree.contain(node)){ cout<<"item "<<node<<" is in BST."<<endl; }

    BinarySearchTree.remove(node);
    BinarySearchTree.printNodes();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T06:00:35.943

你的类`BST`只有一个成员变量。 `TreeNode*root`. （这没有问题）

您的`insert`和`remove`函数可能会*修改*，`BST`因此您需要修改与 .相关的*内容*`root`。

（并且您的编译器会很快指出这些函数不应该`const`出于相同的原因。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T07:34:02.890

```
void BST::makeEmpty(TreeNode*&t)
{
    if(t==NULL)
    {
        makeEmpty(t->left);
        makeEmpty(t->right);
        delete t;
    }
    t=NULL;
} 
```

这段代码是错误的，如果 t 为 NULL，那么你执行 t->left 和 t->right。这称为*取消引用 NULL 指针*，可能会使您的程序立即崩溃。

这应该是

```
void BST::makeEmpty(TreeNode*&t)
{
    if (t!=NULL)
    {
        makeEmpty(t->left);
        makeEmpty(t->right);
        delete t;
    }
    t=NULL;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:05:12.753

您对 root in 什么也没做`insert()`，所以它什么也不做（除了泄漏内存）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-20T14:29:11.417

如果你想交叉检查你的解决方案，你可以在这里找到它[https://siddharthjain094.wordpress.com/2014/07/13/binary-search-tree-implementation-in-ccpp/](https://siddharthjain094.wordpress.com/2014/07/13/binary-search-tree-implementation-in-ccpp/)

# node.js - 如何测试一个类的一个函数，以及在测试一个函数时如何避免一些代码？

> ID：16207205
> 
> 赞同：0
> 
> 时间：2013-04-25T05:44:26.297
> 
> 标签：node.js, testing, mocha.js

示例代码：

```
function TestClass() {
  var this.name = 'test';
  var this.host = '...';
  var this.port = '...';
  //...
  this.connection = this.createConnection(....);
}

TestClass.prototype.testFunc = function(data) {
  if(data == this.name) {
     return true;
  } else {
     return false;
  }
}

Testclass.prototype.createConnection = function (...) {
   //some code
  //a real HTTP connection will be created
  //some code
} 
```

现在我想测试 testFunc，它有一个类变量`this.name`，所以我必须创建一个 TestClass 实例。但是如果我创建 TestClass 实例，就会创建一个真正的 HTTP 连接。测试时如何避免这种真正的 HTTP 连接？

在这种情况下，我该如何编写测试代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:26:43.647

您应该模拟使请求不是您要测试的类的依赖项。看看这个[nock](https://github.com/flatiron/nock)，一个 HTTP 模拟和期望库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:51:41.560

`createConnection`在实例化`TestClass`.

```
TestClass.prototype.createConnection = function() {
    console.log("Called redefined createConnection");
} 
```

# java - 如何克服错误 NoSuchFieldError: PATCH

> ID：16207208
> 
> 赞同：0
> 
> 时间：2013-04-25T05:44:54.440
> 
> 标签：java, spring, hibernate, jpa, spring-mvc

我已经使用包含 hibernate 和 jpa 的 spring mvc 创建了一个项目。当我尝试运行该程序时出现错误。请帮忙。谢谢你。

例外 ：

```
javax.servlet.ServletException: Servlet execution threw an exception 
```

根本原因 ：

```
java.lang.NoSuchFieldError: PATCH
    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:808)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:55:16.313

您是否在 Maven 上将您的 spring 依赖项标记为“已提供”，然后在应用服务器上针对不同版本的 spring 运行您的代码？如果是这样，这可能是原因

如果您的应用服务器提供 spring 库，请确保声明的 maven 依赖版本匹配

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-20T09:00:04.837

即使我在第一次试用 Spring MVC 时遇到了同样的问题，我发现`MimeType`缺少一个类名（即）你可以通过添加文件`org.springframework.util.MimeType`来解决这个问题。`spring-core-4.0.0.RELEASE.jar`

我认为这会解决您的问题，因为它对我有用。

# sql - 在 sql 更新过程中仅记录受影响的行

> ID：16207210
> 
> 赞同：1
> 
> 时间：2013-04-25T05:45:05.007
> 
> 标签：sql, sql-server-2008, sql-server-2005, stored-procedures

我有一个程序可以更新表中的 x 行。我创建了一个日志表，其中包含所有更新行的记录。所以每次我运行我的程序时，它都会产生影响。5 行，然后将这 5 行插入到我的日志表中。

这是我的程序：

```
UPDATE dbo.ImportAdvTemp
SET dbo.ImportAdvTemp.DeliveryAdrID = dbo.ImportAdvTemp_IMPORTED.DeliveryAdrID
FROM dbo.ImportAdvTemp, dbo.ImportAdvTemp_IMPORTED
WHERE 
    ISNULL(dbo.ImportAdvTemp.DeliveryName, '') = ISNULL(dbo.ImportAdvTemp_IMPORTED.DeliveryName, '') AND
    ISNULL(dbo.ImportAdvTemp.DeliveryStreet,'') = ISNULL(dbo.ImportAdvTemp_IMPORTED.DeliveryStreet, '') AND
    ISNULL(dbo.ImportAdvTemp.DeliveryHouseNumber, '') = ISNULL(dbo.ImportAdvTemp_IMPORTED.DeliveryHouseNumber, '') AND
    ISNULL(dbo.ImportAdvTemp.DeliverySubCity, '') = ISNULL(dbo.ImportAdvTemp_IMPORTED.DeliverySubCity, '') AND
    ISNULL(dbo.ImportAdvTemp.DeliveryPostCode, '') = ISNULL(dbo.ImportAdvTemp_IMPORTED.DeliveryPostCode, '') AND
    ISNULL(dbo.ImportAdvTemp.DeliveryCity, '') = ISNULL(dbo.ImportAdvTemp_IMPORTED.DeliveryCity, '') AND
    ISNULL(dbo.ImportAdvTemp.DeliveryCountry, '') = ISNULL(dbo.ImportAdvTemp_IMPORTED.DeliveryCountry, '') AND
    ISNULL(dbo.ImportAdvTemp.DeliveryCustomer, '') = ISNULL(dbo.ImportAdvTemp_IMPORTED.DeliveryCustomer, '') AND
    ISNULL(dbo.ImportAdvTemp.DeliveryAlias, '') = ISNULL(dbo.ImportAdvTemp_IMPORTED.DeliveryAlias, '') AND
    ISNULL(dbo.ImportAdvTemp.DeliveryNote, '') = ISNULL(dbo.ImportAdvTemp_IMPORTED.DeliveryNote, '') AND
    dbo.ImportAdvTemp.toManualProc = 1 and dbo.ImportAdvTemp.Closed = 0 and(dbo.ImportAdvTemp.DeliveryAdrID IS NULL or dbo.ImportAdvTemp.PickupAdrID IS NULL or dbo.ImportAdvTemp.DeliveryAdrID = 0 or dbo.ImportAdvTemp.PickupAdrID = 0) 
```

我需要弄清楚哪些行受到影响，然后使用该行中的数据插入到我的日志表中。我已阅读有关使用游标的信息，这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:58:58.417

我对 sqlserver 了解不多，但在 Oracle 中，最直接的解决方案是 UPDATE 触发器，它插入到日志表中，我相信您可以在 sqlserver 中执行相同的操作。

触发器的好处是它不会影响您的代码，它会执行真正的工作（更新）。您可以禁用或更改触发器而不会弄乱主代码，它只会影响日志记录方面。

作为旁注，您可能需要考虑这样的情况，即更新了一行（因为它与 WHERE 子句匹配），但新旧值是相同的。您是否希望记录此内容，或者您​​是否通过编写适当的 WHERE 子句来防止这种情况发生？您想要记录旧的、新的或两个值吗？无论日志实现如何，您都必须回答这个问题。

# iphone - 在获取用户信息时从 youtube 数据 api 获得错误响应

> ID：16207212
> 
> 赞同：1
> 
> 时间：2013-04-25T05:45:30.070
> 
> 标签：iphone, ios, objective-c

在验证我的谷歌帐户后，我正在使用以下 api 获取用户个人资料

[https://gdata.youtube.com/feeds/api/users/default?access_token=](https://gdata.youtube.com/feeds/api/users/default?access_token=) {user_token} 来自上述 api 的响应是：

**NoLinkedYouTube 帐户**

我已经使用 google 帐户凭据访问了我的 youtube 帐户，但响应是 NoLinkedYouTubeAccount。请建议我在哪里做错了

# qt - Windows 应用程序图标未出现在资源管理器中

> ID：16207214
> 
> 赞同：0
> 
> 时间：2013-04-25T05:45:42.040
> 
> 标签：qt

我想我确实遵循了[这里指导的所有步骤。](http://qt-project.org/doc/qt-4.8/appicon.html)我猜 res 文件已经链接到了，`exe`因为文件大小增加了。

我的 .pro 文件 (vaastu.pro)

```
QT       += sql core gui printsupport

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = vaastu
TEMPLATE = app

win32 {
   RC_FILE = vaastu.rc
}
SOURCES += ...

HEADERS  += ....

FORMS    += ...

RESOURCES += \
    Fonts.qrc 
```

我的 .rc 文件 (vaastu.rc)

```
IDI_ICON1               ICON    DISCARDABLE      "vaastu.ico" 
```

这是什么原因？我究竟做错了什么？请赐教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:40:13.173

检查图标“vaastu.ico”的位置。它应该与您的源代码位置相同。

```
<source root>
   |--> vaastu.ico
   |--> vaastu.rc
   |--> vaastu.pro
   |--> <other folders/files> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:32:07.663

在 .rc 文件中：

```
#include "resource.h" 
```

在 resource.h 文件中：

```
#define IDI_ICON1  1 
```

# git - 已经合并到上游的 Github 分支怎么办？

> ID：16207215
> 
> 赞同：1
> 
> 时间：2013-04-25T05:45:44.163
> 
> 标签：git, github

当我在一个分叉的 github 项目上工作时，我创建了许多分支，我已经在这些分支上发送了拉取请求。一旦这些分支合并到上游，它们就会保留在我的本地和远程仓库中。这些分支的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:48:40.270

合并后，您可以安全地删除它们，因为它们中的提交由上游仓库中的主分支跟踪。保持东西干净。IIRC github 甚至为您提供删除拉取请求分支的弹出窗口。

# highcharts - 如何在highcharts中添加数学方程式？

> ID：16207216
> 
> 赞同：2
> 
> 时间：2013-04-25T05:45:47.320
> 
> 标签：highcharts

我是 Highcharts 的新手。我想在 highcharts 中添加一个数学方程作为示例 (y=3x+5) 。我如何生成函数并将数据传递给 highchart 系列。

请帮助:)提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:12:19.080

Highcharts 没有实现这种解决方案，但您可以准备自己的函数来计算点值并准备所有这些点值的数组（由系列使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:30:13.507

是的，您可以在呈现图表之前生成用于绘制数据的数据。我在 highcharts 演示中看到了这个例子，他们使用了一个函数来返回要绘制的数据。

这是那个 [http://jsfiddle.net/HHPm7/的js小提琴](http://jsfiddle.net/HHPm7/)

就像你说的那样使用一个等式

```
y = (3 * x) + 5 
```

[http://jsfiddle.net/HHPm7/1/](http://jsfiddle.net/HHPm7/1/)

我希望这会有用

# android - 我无法解决的错误消息

> ID：16207218
> 
> 赞同：0
> 
> 时间：2013-04-25T05:45:54.443
> 
> 标签：android

我收到此错误消息：在添加内容之前必须调用 requestFeature()。我已经在 stackowerflow 上阅读了有关此错误消息的其他问题，如果我理解正确，那就是不要在 requestFeature() 之前调用 setContentView()。但这不是我在 onCreate 方法中所做的吗？或者错误可能与其他事情有关？我很困惑，希望能得到一些帮助来解决这个错误！谢谢！

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_main);

    // Set screen to landscape
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    // Remove title from screen
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    // Set screen to full screen
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    // Create a new object of GameLoop and pass this context
    gameLoop = new GameLoop(this);
    gameLoop.setOnTouchListener(this);
    setContentView(gameLoop);
} 
```

编辑：LogCat

```
04-25 08:19:07.937: I/ApplicationPackageManager(6365): cscCountry is not German : NEE
04-25 08:19:08.085: W/dalvikvm(6365): threadid=9: thread exiting with uncaught exception (group=0x40018578)
04-25 08:19:08.101: E/AndroidRuntime(6365): FATAL EXCEPTION: Thread-10
04-25 08:19:08.101: E/AndroidRuntime(6365): java.lang.NullPointerException
04-25 08:19:08.101: E/AndroidRuntime(6365):     at  com.android.mergemania.GameLoop.drawObjects(GameLoop.java:78)
04-25 08:19:08.101: E/AndroidRuntime(6365):     at  com.android.mergemania.GameLoop.run(GameLoop.java:63)
04-25 08:19:08.101: E/AndroidRuntime(6365):     at java.lang.Thread.run(Thread.java:1019) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:06:54.583

您必须在请求窗口功能后设置方向。您的陈述必须按以下顺序

```
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    // Remove title from screen
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    // Set screen to full screen
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    // Set screen to landscape
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    // Create a new object of GameLoop and pass this context
    gameLoop = new GameLoop(this);
    gameLoop.setOnTouchListener(this);
    setContentView(gameLoop);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:09:33.847

试试这个：

```
protected void onCreate(Bundle savedInstanceState) {

requestWindowFeature(Window.FEATURE_NO_TITLE);
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_main);

    // Set screen to landscape
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    // Remove title from screen

    // Set screen to full screen
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    // Create a new object of GameLoop and pass this context
    gameLoop = new GameLoop(this);
    gameLoop.setOnTouchListener(this);
    setContentView(gameLoop);
} 
```

# asp.net - 在下一行显示 ASP DataGrid（不是 gridview）的最后一列

> ID：16207219
> 
> 赞同：0
> 
> 时间：2013-04-25T05:46:02.343
> 
> 标签：asp.net, html, datagrid

我正在使用一个数据网格，我想在下一行或下一行中显示我的最后一列，并且网格中的下一行将向下移动。

姓名 年龄 性别 主题

* * *

Mac 24 M 英语、科学 数学、地理

Nan 29 F 英语、科学 数学、地理

我想这样显示：

姓名 年龄 性别

* * *

Mac 24 M
英语、科学 数学、地理

Nan 29 F
英语、科学 数学、地理

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:24:25.670

如果您没有与 DataGrid 结婚，那么我建议您查看中继器控件或 ListView 控件。它会给你更多的自由，以后更容易理解

如果由于某种原因您必须以这种方式使用 DataGrid，但它非常非常 hacky，当您在一两周内查看此内容时会更难理解，并且通常不是一个好主意，但是它实现了你的目标。

```
 <asp:DataGrid ID="dg" ShowHeader="false" runat="server"
    AutoGenerateColumns="false">
    <Columns>
        <asp:BoundColumn DataField="Name"></asp:BoundColumn>
        <asp:BoundColumn DataField="Age"></asp:BoundColumn>
        <asp:TemplateColumn>
            <ItemTemplate>
                <%# Eval("Sex") %></td>
                </tr>
                <tr>
                    <td colspan="3">
                 <%# Eval("Courses") %>
            </ItemTemplate>
        </asp:TemplateColumn>
    </Columns>
</asp:DataGrid> 
```

在最后一列中显示该列的值，然后关闭控件创建的 td 和 tr。然后，您将创建一个新的 tr 和 td，其 colspan 等于列数，并输入课程值，然后让控件关闭这些 trs 和 tds。

我强烈建议您为此使用中继器或列表视图。它会让你的生活轻松很多。

# dart - dart 调试器的状态是什么？

> ID：16207220
> 
> 赞同：1
> 
> 时间：2013-04-25T05:46:15.243
> 
> 标签：dart

我很难在 Mac OS X 上使用**Dart Editor 版本 0.5.0_r21823调试我的代码。**

它以以下信息停止：

“Dart_InstanceGetClass 期望参数 'instance' 是 Instance 类型。”

我现在正在尝试穷人的调试器（即打印...），但即使那个也失败了。

```
_setupGui() {
  // Bitmap background = new Bitmap(resourceManager.getBitmapData("Pigeon"));
  print("Done loading resources");
  ChessBoard b = new ChessBoard();
  board = new ChessBoardView(b);
  stage.addChild(board);
  ....

/**
 * Holds a chess position.
 */
class ChessBoard {

  static const String STARTPOS = "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";

  ChessBoard([String fen = STARTPOS]) {
     print("ChessBoard($fen)");     // This gets written
     _setFromFen(fen);
  }

  void _setFromFen(String fen) {
    print("_setFromFEN($fen)");   // This is not written
    ... 
```

控制台输出：

```
Fixed Canvas Style Size !!!!
Loading resources
Done loading resources
ChessBoard(rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1)
... here it ends. I.e. setFromFEN() is not written ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-14T13:59:56.430

这可能是一个错误，现在可能已经修复。如果您使用的是 Dartium；您可以使用内置的开发工具进行调试（就像使用 JavaScript 一样），非常方便！

# java - 从另一个 java 程序运行带有其类路径的已编译 java 程序

> ID：16207223
> 
> 赞同：-2
> 
> 时间：2013-04-25T05:46:36.167
> 
> 标签：java

我正在尝试从另一个 java 程序运行带有其类路径的已编译 java 程序。但它没有显示结果。我的代码如下

```
String[] cmd = {"C:\\WINDOWS\\system32\\cmd.exe","/c","start","javac","D:\\java\\hi\\src\\helo.java"};

Runtime.getRuntime().exec(cmd); 
```

注意：在此之后，类文件被创建，但下面的代码不起作用。

```
String[] cmd1 = {"C:\\WINDOWS\\system32\\cmd.exe","/c","start","java"," -cp D:\\java\\hi\\src"," helo"};

Runtime.getRuntime().exec(cmd1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:54:26.883

阅读：[http](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html)
://www.javaworld.com/jw-12-2000/jw-1229-traps.html 它已经很旧了，但是在它写出来之后的 13 年和它上市那天一样有效。

你几乎总是最好动态地创建一个新的类加载器，给它自己的环境，然后在其中启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:55:18.433

我希望你没有得到任何例外。我假设您从正确的位置获取类文件。

由于您正在尝试捕获**helo**的输出，因此您应该捕获您在下半年运行的 java 命令的输入流。

尝试类似：（**仅适用于第二个命令**）

```
BufferedReader in = null;
try {  
    String[] cmd1 = {"C:\WINDOWS\system32\cmd.exe","/c","start","java"," -cp D:\java\hi\src"," helo"};
    Process p = Runtime.getRuntime().exec(cmd1);  
    in = new BufferedReader(new InputStreamReader(p.getInputStream()));  
    String line = null;  
    while ((line = in.readLine()) != null) {  
        System.out.println(line);  
    }
 } catch (IOException e) {  
        e.printStackTrace();  
 } finally {
    in.close();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:52:00.313

您需要这样做才能在 cmd 中动态运行

Runtime.getRuntime.exec("cmd /c cd/Desktop/folder/ & java yourprogram");

这假设您在 Desktop/folder/ 目录中生成了您的类文件

需要注意的是 & - 连接命令和 /c 将参数传递给 cmd

# git - Composer：包安装需要svn/git？

> ID：16207227
> 
> 赞同：2
> 
> 时间：2013-04-25T05:46:45.950
> 
> 标签：git, svn, version-control, composer-php

我如何知道哪些软件包需要哪些版本控制？例如，我有以下 Composer.json

```
{
    "name": "sample/app",
    "description": "sample app",
    "require": {
    "monolog/monolog": "1.0.*",
    "smarty/smarty": "dev-trunk",
    "zend/gdata": "dev-master"
    }
} 
```

smarty 库给了我一个运行时异常，因为我没有安装 svn。将此与 zend/gdata 进行比较，如果未安装 git，则会出现运行时异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:32:29.210

如果您没有安装 git 和 svn，您通常可以使用`composer install --prefer-dist`which 会尽可能长时间地尝试下载 zip 文件。对于使用自定义 svn 存储库的软件包，但是就像 smarty 一样，这还不可能，对于那些你确实需要安装 svn 的人来说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T21:28:06.587

如果您想避免对 subversion 的依赖，您可以使用这样的私有存储库：[https ://getcomposer.org/doc/05-repositories.md#package-2](https://getcomposer.org/doc/05-repositories.md#package-2)

但是这样以后如果你想更新 smarty 就必须更新私有仓库中的版本号。

# wso2 - 带有 Esper 引擎的 WSO2 CEP 是否支持 JMS 队列？

> ID：16207228
> 
> 赞同：0
> 
> 时间：2013-04-25T05:46:47.217
> 
> 标签：wso2, complex-event-processing, esper

我想通过 ActiveMQ 'Queue' 向 WSO2 CEP 发送事件。我还想接收 WSO2 CEP 处理的 ActiveMQ 'Queue' 中的事件。我想知道 Esper Engine 是否可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:01:43.730

AFAIK Esper 支持 jms 队列，那么您可能会实现这一点，但我们不进一步支持 ESPER（您可以获得更多信息 [1]）.. 有时您可能需要编写自定义代理来实现这一点（不知道正是因为我没有使用过 jms 队列）...

[1] [http://dist.wso2.org/products/complex-event-processor/2.1.0/cep-release-notes.html](http://dist.wso2.org/products/complex-event-processor/2.1.0/cep-release-notes.html)

谢谢，

莫汉

# php - 在 json 文件中插入简单的数组

> ID：16207229
> 
> 赞同：0
> 
> 时间：2013-04-25T05:46:54.103
> 
> 标签：php, json, file

我有一个简单的 json 文件。这是结构。

1 个玩家数组，其中包含 1 个游戏和 2 个匹配数组。

我想将数据添加到 matches[0]..first 匹配数组。

我正在使用 matchid 属性，该属性必须存储在适当的匹配数组中。

因此，如果我的 matchid 是 4..我希望我的数据存储在 match[0][4] 中。我尝试了各种组合，但无法得到我想要的。

这是我的 json 文件，后面是我尝试过的代码。

```
{
"players": [
    {
        "name": "Moldova",
        "image": "/Images/Moldova.jpg",
        "roll_over_image": "tank.jpg"
    },
    {
        "name": "Georgia",
        "image": "/Images/georgia.gif",
        "roll_over_image": "tank.jpg"
    },
    {
        "name": "Belarus",
        "image": "/Images/Belarus.gif",
        "roll_over_image": "tank.jpg"
    },
    {
        "name": "Armenia",
        "image": "/Images/armenia.png",
        "roll_over_image": "tank.jpg"
    },
    {
        "name": "Kazahstan",
        "image": "/Images/kazahstan.gif",
        "roll_over_image": "tank.jpg"
    },
    {
        "name": "Russia",
        "image": "/Images/russia.gif",
        "roll_over_image": "tank.jpg"
    },
    {
        "name": "Ukraine",
        "image": "/Images/ukraine.png",
        "roll_over_image": "tank.jpg"
    },
    {
        "name": "Uzbekistan",
        "image": "/Images/uzbekistan.gif",
        "roll_over_image": "tank.jpg"
    }
],
"games": [
    {
        "matches": [
            {
                "player1id": 0,
                "player2id": 1,
                "winner": "*"
            },
            {
                "player1id": 2,
                "player2id": 3,
                "winner": "*"
            },
            {
                "player1id": 4,
                "player2id": 5,
                "winner": "*"
            },
            {
                "player1id": 6,
                "player2id": 7,
                "winner": "*"
            },
            {
                "player1id": 0,
                "player2id": 2,
                "winner": "*"
            },
            {
                "player1id": 4,
                "player2id": 6,
                "winner": "*"
            },
            {
                "player1id": 0,
                "player2id": 4,
                "winner": 4
            }
        ]
    },
    {
        "matches": [
            {
                "player1id": 0,
                "player2id": 1,
                "winner": "*"
            },
            {
                "player1id": 2,
                "player2id": 3,
                "winner": "*"
            },
            {
                "player1id": 4,
                "player2id": 5,
                "winner": "*"
            },
            {
                "player1id": 6,
                "player2id": 7,
                "winner": "*"
            },
            {
                "player1id": 0,
                "player2id": 2,
                "winner": "*"
            },
            {
                "player1id": 4,
                "player2id": 6,
                "winner": "*"
            },
            {
                "player1id": 0,
                "player2id": 4,
                "winner": 0
            }
        ]
    }
] 
```

和我试过的 php 代码。

```
 $inp = file_get_contents('jsontrail.json');
        $tempArray = json_decode($inp, true);
        //adding to the matchid index of matches array
        $matchid=3;
        $arrne['winner'] ="winner";
        $arrne['player1id'] ="player1id";
        $arrne['player2id'] ="player2id";
        array_push($tempArray->games[0]->matches[0]->[$matchid], $arrne );
        $jsonData = json_encode($tempArray);
        file_put_contents('jsontrail.json', $jsonData);
        print_r( $inp); 
```

解析错误：语法错误，意外的 '['，期待 T_STRING 或 T_VARIABLE 或 '{' 或 '$' 现在收到此错误..

代码2试试

```
 $inp = file_get_contents('jsontrail.json');

        $tempArray = json_decode($inp, true);
        //adding to the matchid index of matches array
        $matchid=3;
        $arrne['games']['matches'][0][$matchid]['winner'] ="winner";
        $arrne['games']['matches'][0][$matchid]['player1id'] ="player1id";
        $arrne['games']['matches'][0][$matchid]['player2id'] ="player2id";
        array_push($tempArray,$arrne );
        $jsonData = json_encode($tempArray);
        file_put_contents('jsontrail.json', $jsonData);
        print_r( $inp); 
```

但这将数组推到最后..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:55:52.787

有几点不对：

1）最后一场比赛有一个逗号：

```
{
  "player1id":0,
  "player2id":4,
  "winner":0
}, 
```

至少对我来说，这打破了`json_decode`. 我使用[这个网站](http://jsonformatter.curiousconcept.com/)来检查格式。

2）您`Fatal error: Cannot use object of type std Class as array`在尝试访问时收到错误`$tempArray['players']['games']['matches'][0]`- 您的 JSON 设置方式，您应该像这样访问它：`$tempArray->games[0]->matches[$matchid]`. 但是，我认为您可能需要先再看看 JSON 的结构。

3) 你正在传递``$tempArray['players']['games']['matches'][0][]`给`array_push`. 如果您只是指匹配中的第一个元素，那么请不要使用`[]`. 在此处查看[文档](http://php.net/manual/en/function.array-push.php)。

我建议您取出脚本的每个单独步骤并按顺序调试每个步骤。例如，首先加载 JSON，然后将其转储到屏幕。然后对其进行解码并将其转储到屏幕上。然后尝试访问其中的元素，并将它们转储到屏幕上，依此类推。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:44:52.120

对于初学者，您的 JSON 无效，有一个额外的逗号。将您的 json 复制粘贴到[http://jsonlint.com](http://jsonlint.com)，它会告诉您出了什么问题。

并尝试此代码

```
<?php
$arrne = json_decode(file_get_contents('jsontrail.json'),true);
$inp = file_get_contents('jsontrail.json');
$tempArray = json_decode($inp, true);

//adding to the matchid index of matches array
$matchid = 1;
$newmatch=array();
$newmatch['winner'] ="LOOKFORME";
$newmatch['player1id'] ="player1id";
$newmatch['player2id'] ="player2id";

array_splice($tempArray["games"][0]["matches"], $matchid, 0, array($newmatch));
$jsonData = json_encode($tempArray);
file_put_contents('jsontrail.out.json', $jsonData); 
```

# iphone - 将 NSString 转换为 NSDate

> ID：16207232
> 
> 赞同：0
> 
> 时间：2013-04-25T05:47:08.920
> 
> 标签：iphone, ios, nsdateformatter, datetime-format

我正在将两个日期和时间字符串转换为，`NSDate`但我总是得到错误的时间，但得到正确的日期，我不知道为什么 xcode 给出错误的日志消息，我似乎有很多`NSDate`代码但都没有工作，这个工作当我更改日期格式时，告诉我如何处理时间格式

```
 NSDate * date;
    //Assume dateString is populated and of format NSString * dateString =@"2011-11-21 11:20";
    NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
    NSString *dateString =[NSString stringWithFormat:@"%@ %@", socialEvent.SocialEventsDC_EventDate,socialEvent.SocialEventsDC_EventStartTime];
    NSLog(@"%@ %@",socialEvent.SocialEventsDC_EventDate,socialEvent.SocialEventsDC_EventStartTime);

    [dateFormatter setDateFormat:@"MM/dd/yyyy HH:mm a"];
    if (dateString != nil)  {
        date = [dateFormatter dateFromString:dateString];
//        [date release];
    }

    NSLog(@"%@",date); 
```

我的日志消息是

```
2013-04-25 10:45:04.417 BNI UK & Ire[450:5203] 01/20/2015 11:00 PM
2013-04-25 10:45:09.679 BNI UK & Ire[450:5203] 2015-01-20 07:00:00 +0000 
```

我的时间总是 7:00:00 虽然我的时间是 11:00，但请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:51:46.520

试试这个代码...

```
 NSString * dateString =@"2011-11-21 11:20";
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"yyyy-MM-dd hh:mm"];
    // [formatter setTimeZone:[NSTimeZone localTimeZone]];

    NSDate *datTemp = [formatter dateFromString:dateString];
    NSTimeZone* sourceTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
    NSTimeZone* destinationTimeZone = [NSTimeZone systemTimeZone];

    NSInteger sourceGMTOffset = [sourceTimeZone secondsFromGMTForDate:datTemp];
    NSInteger destinationGMTOffset = [destinationTimeZone secondsFromGMTForDate:datTemp];
    NSTimeInterval interval = destinationGMTOffset - sourceGMTOffset;
    NSDate* destinationDate = [[[NSDate alloc] initWithTimeInterval:interval sinceDate:datTemp] autorelease];
    NSLog(@"\n\n\n Destination date is:- %@",destinationDate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T05:52:42.557

试试这样

```
NSDate *mydate = [NSDate date];
NSTimeInterval secondsInEightHours = 4 * 60 * 60;
NSDate *dateEightHoursAhead = [mydate dateByAddingTimeInterval:secondsInEightHours]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:16:48.123

如果 dateString 如下所示，这应该可以工作，则假定时区是您的本地时区。日期日志将采用 UTC

```
NSString *dateString = @"2011-11-21 11:20";

NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm"];

NSDate * date = [dateFormatter dateFromString:dateString];
NSLog(@"%@",date); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T08:07:36.687

请尝试此代码...

```
 NSDateFormatter *dateFormatter1 = [[NSDateFormatter alloc] init];

    [dateFormatter1 setDateFormat:@"MM/dd/yyyy hh:mm a"];
    [dateFormatter1 setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
    NSDate *myDate = [dateFormatter1 dateFromString:@"01/20/2015 11:00 pm"];
    NSLog(@"mydate is :%@",myDate);
    NSLog(@"DATE IS : %@",[dateFormatter1 stringFromDate:myDate]); 
```

注意：时区取决于您当地的时区。

# ruby-on-rails - png 没有使用 capistrano 预编译来部署

> ID：16207234
> 
> 赞同：1
> 
> 时间：2013-04-25T05:47:15.763
> 
> 标签：ruby-on-rails, capistrano, asset-pipeline

我收到此错误：

```
ActionView::Template::Error (paanouplb_logo_navbar.png isn't precompiled):
    1: <a class="brand" href="<%= posts_path %>">
    2:   <%= image_tag asset_path('paanouplb_logo_navbar.png') %>  
    3: </a>
  app/views/shared/navbar/_brand.html.erb:2:in `_app_views_shared_navbar__brand_html_erb___4534137822881499314_42901420'
  app/views/shared/_navbar.html.erb:4:in `_app_views_shared__navbar_html_erb__3184300490266485791_40918660'
  app/views/layouts/home.html.erb:4:in `_app_views_layouts_home_html_erb___1407264114428489351_35989280' 
```

在我的 production.rb 我已经有了

```
config.assets.compile = true 
```

和

```
config.assets.precompile += %w(*.png *.jpg *.jpeg *.gif) 
```

我正在通过 Capistrano 进行部署。

# php - curl命令行到PHP curl

> ID：16207236
> 
> 赞同：2
> 
> 时间：2013-04-25T05:47:16.283
> 
> 标签：php, curl, paypal

如何翻译此命令行 PayPal cURL 请求`--insecure`

```
curl -s --insecure 
-H "X-PAYPAL-SECURITY-USERID: api_username" 
-H "X-PAYPAL-SECURITY-PASSWORD: api_password" 
-H "X-PAYPAL-SECURITY-SIGNATURE: api_signature" 
-H "X-PAYPAL-REQUEST-DATA-FORMAT: NV" 
-H "X-PAYPAL-RESPONSE-DATA-FORMAT: NV" 
-H "X-PAYPAL-APPLICATION-ID: app_id" 
```

我知道我会`-H`重视：

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array('X-PAYPAL-SECURITY-USERID: api_username', 'X-PAYPAL-SECURITY-PASSWORD: api_password')); 
```

但我不确定`--insecure`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:56:01.187

来自[http://curl.haxx.se/docs/manpage.html](http://curl.haxx.se/docs/manpage.html)：

> -k, --insecure: (SSL) 此选项明确允许 curl 执行“不安全”的 SSL 连接和传输。尝试使用默认安装的 CA 证书包来确保所有 SSL 连接的安全。这使得所有被认为是“不安全”的连接都失败，除非使用 -k, --insecure。

进一步[查看使用 CURL (php) 阅读 SSL 页面](https://stackoverflow.com/questions/521418/reading-ssl-page-with-curl-php)，这告诉您必须将 CURLOPT_SSL_VERIFYPEER 和 CURLOPT_SSL_VERIFYHOST 设置为 FALSE。这基本上覆盖了“安全检查”。

我认为这就是镜像`--insecure`命令行选项所需要的。

# android - 将模拟器连接到不同的计算机

> ID：16207237
> 
> 赞同：1
> 
> 时间：2013-04-25T05:47:24.327
> 
> 标签：android, networking, android-emulator, lan

是否可以将模拟器连接到同一 LAN 中除主机 PC 之外的任何计算机？我想将视频从位于一台计算机上的 VLC 播放器流式传输到位于另一台计算机上的模拟器。如果是，那怎么可能？

# mediawiki - 如何在 MediaWiki 中获得咆哮式通知

> ID：16207242
> 
> 赞同：2
> 
> 时间：2013-04-25T05:47:32.457
> 
> 标签：mediawiki

在我在 mediawiki.org 上的监视列表中添加了一个页面后，它通过一个小的“咆哮式”通知消息框很好地通知了我，然后自动隐藏了自己。（如下图所示）

![Mediawiki.org 上的咆哮式通知](https://i.stack.imgur.com/L3mRg.jpg)

但是我自己的 Mediawiki 实例（几乎所有默认配置）没有这个功能，我想知道这是否可以通过一些配置更改或一些 Javascript/CSS 调整来实现。看看我的 Mediawiki 实例如何处理下面的通知 - 它根本不会自动隐藏：

![我的 Mediawiki 实例上的普通通知](https://i.stack.imgur.com/qouuY.jpg)

我已经在 LocalSettings.php 中启用了下面的两个参数，但我认为它不起作用：

```
$wgUseAjax = true;
$wgAjaxWatch = true; 
```

请提供帮助，我将非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T01:44:58.567

这实际上是 1.20 MW 的重新设计 - 而我仍然使用 1.19。gerrit.wikimedia.org/r/#/c/17605/6//COMMIT_MSG

# ios - iOS：ScrollView，里面有可点击的对象

> ID：16207243
> 
> 赞同：0
> 
> 时间：2013-04-25T05:47:33.823
> 
> 标签：ios, iphone, xcode, ipad

以下代码行表示我插入到滚动视图中的对象。

我的问题是，滚动视图中的所有图像都不是可拖放的。

当单独添加图像时，即在滚动视图之外，它们可以完美地单击和拖放。

似乎每个发生的事件都会触发 scrollViews 侦听器，而不是单击的图像侦听器。

无论图像如何添加，scrollView 都可以完美滚动。

**如果单击，我如何触发图像拖放，并且仍然能够滚动它的父视图 - 滚动视图？**

```
#import "BookShelfSection.h"

@implementation BookShelfSection

- (id)initBookShelfWithX:(CGFloat)x y:(CGFloat)y width:(CGFloat)width height:(CGFloat)height
{
    self = [super initWithFrame:CGRectMake(x, y, width, height)];
    self.userInteractionEnabled = YES;
    return self;
}

    - (void)addPages:(NSArray *)fileNameArray
{
    for (id shelf in fileNameArray) {
        UIView *view = [[UIView alloc] initWithFrame: CGRectMake ( 0, 0, self.frame.size.width, self.frame.size.height)];
        UIImage *image = [UIImage imageNamed:[NSString stringWithString:shelf]];
        UIImageView *page = [[UIImageView alloc] initWithImage:image];
        page.frame = CGRectMake(0, 0, self.frame.size.width, self.frame.size.height);
        page.contentMode = UIViewContentModeBottom;

        UIImage *image2 = [UIImage imageNamed:@"car_1.png"];
        Item *item = [[Item alloc] initWithImage:image2 andPosition:CGPointMake(100, 100)];
        page.userInteractionEnabled = YES;
        item.userInteractionEnabled = YES;
        [view addSubview:page];
        [view addSubview:item];

        [self addPageView:view];
    }

}

@end 
```

**编辑：这就是我执行拖放操作的方式：项目类：**

```
#import "Item.h"

@implementation Item

- (id)initWithImage:(UIImage *)image andPosition:(CGPoint)position
{

    CGRect cellRectangle = CGRectMake(position.x, position.y,image.size.width ,image.size.height );

    self = [[Item alloc] initWithFrame:cellRectangle];
    if (self) {
        [self setImage:image];
        [self setUserInteractionEnabled:YES];
    }
    return self;
}

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    CGPoint pt = [[touches anyObject] locationInView:self];
    startLocation = pt;
    [[self superview] bringSubviewToFront:self];
}
- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    CGPoint pt = [[touches anyObject] locationInView:self];
    CGRect frame = [self frame];
    frame.origin.x += pt.x - startLocation.x;
    frame.origin.y += pt.y - startLocation.y;
    [self setFrame:frame];
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    CGRect frame = [self frame];
    int originX = (int)roundf(frame.origin.x);
    int originY = (int)roundf(frame.origin.y);
    NSLog(@"Touch ended at point: [%d, %d]", originX, originY);

}

- (void) touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"Touch cancelled");
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:48:26.777

> 似乎每个发生的事件都会触发 scrollViews 侦听器，而不是单击的图像侦听器。

当您为滚动视图捕获此事件时，循环浏览您添加的页面/图像并检查 userInteractionEnabled 的值？可能这将有助于缩小问题的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:51:06.423

将其添加到 UIImageView：

```
page.userInteractionEnabled = YES;
item.userInteractionEnabled = YES; 
```

# cmd - msiexec /选项 [可选参数]

> ID：16207245
> 
> 赞同：0
> 
> 时间：2013-04-25T05:47:36.767
> 
> 标签：cmd, windows-installer

嗨，我正在尝试运行此操作管理器代码：

```
%WinDir%\System32\msiexec.exe /i path\Directory\MOMAgent.msi /qn 
USE_SETTINGS_FROM_AD={0|1} USE_MANUALLY_SPECIFIED_SETTINGS={0|1} MANAGEMENT_GROUP=MGname 
MANAGEMENT_SERVER_DNS=MSname MANAGEMENT_SERVER_AD_NAME =MSname SECURE_PORT=PortNumber 
ACTIONS_USE_COMPUTER_ACCOUNT={0|1} ACTIONSUSER=UserName ACTIONSDOMAIN=DomainName 
CTIONSPASSWORD=Password 
```

我收到以下错误

```
Windows ® Installer. V 5.0.9200.16384 

msiexec /Option <Required Parameter> [Optional Parameter]

Install Options

</package | /i> <Product.msi>
        Installs or configures a product
    /a <Product.msi>
        Administrative install - Installs a product on the network
    /j<u|m> <Product.msi> [/t <Transform List>] [/g <Language ID>]
        Advertises a product - m to all users, u to current user
    </uninstall | /x> <Product.msi | ProductCode>
        Uninstalls the product
Display Options
    /quiet
        Quiet mode, no user interaction
    /passive
        Unattended mode - progress bar only
    /q[n|b|r|f]
        Sets user interface level
        n - No UI
        b - Basic UI
        r - Reduced UI
        f - Full UI (default)
    /help
        Help information
Restart Options
    /norestart
        Do not restart after the installation is complete
    /promptrestart
        Prompts the user for restart if necessary
    /forcerestart
        Always restart the computer after installation
Logging Options
    /l[i|w|e|a|r|u|c|m|o|p|v|x|+|!|*] <LogFile>
        i - Status messages
        w - Nonfatal warnings
        e - All error messages
        a - Start up of actions
        r - Action-specific records
        u - User requests
        c - Initial UI parameters
        m - Out-of-memory or fatal exit information
        o - Out-of-disk-space messages
        p - Terminal properties
        v - Verbose output
        x - Extra debugging information
        + - Append to existing log file
        ! - Flush each line to the log
        * - Log all information, except for v and x options
    /log <LogFile>
        Equivalent of /l* <LogFile>
Update Options
    /update <Update1.msp>[;Update2.msp]
        Applies update(s)
    /uninstall <PatchCodeGuid>[;Update2.msp] /package <Product.msi | ProductCode>
        Remove update(s) for a product
Repair Options
    /f[p|e|c|m|s|o|d|a|u|v] <Product.msi | ProductCode>
        Repairs a product
        p - only if file is missing
        o - if file is missing or an older version is installed (default)
        e - if file is missing or an equal or older version is installed
        d - if file is missing or a different version is installed
        c - if file is missing or checksum does not match the calculated value
        a - forces all files to be reinstalled
        u - all required user-specific registry entries (default)
        m - all required computer-specific registry entries (default)
        s - all existing shortcuts (default)
        v - runs from source and recaches local package
Setting Public Properties
    [PROPERTY=PropertyValue]

Consult the Windows ® Installer SDK for additional documentation on the command line syntax.

Copyright © Microsoft Corporation. All rights reserved.
Portions of this software are based in part on the work of the Independent JPEG Group. 
```

如何让它工作我在管理员模式下使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:22:33.577

您必须对包含竖线 (|) 字符的字符串进行转义。它对命令行解释器有特殊的意义。你的命令是

```
%WinDir%\System32\msiexec.exe /i path\Directory\MOMAgent.msi /qn 
USE_SETTINGS_FROM_AD="{0|1}" USE_MANUALLY_SPECIFIED_SETTINGS="{0|1}" MANAGEMENT_GROUP=MGname 
MANAGEMENT_SERVER_DNS=MSname MANAGEMENT_SERVER_AD_NAME =MSname SECURE_PORT=PortNumber 
ACTIONS_USE_COMPUTER_ACCOUNT="{0|1}" ACTIONSUSER=UserName ACTIONSDOMAIN=DomainName 
CTIONSPASSWORD=Password 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:18:15.443

使用 ORCA 创建一个转换来存储所有这些属性，然后使用命令：

```
msiexec /I MOMAgent.msi /QB REBOOT=R TRANSFORMS=MOMAgent.mst 
```

这将简化命令行并使您的密码不会出现在日志中。

# javascript - jQueryUI 可调整大小仅垂直工作

> ID：16207248
> 
> 赞同：1
> 
> 时间：2013-04-25T05:47:45.487
> 
> 标签：javascript, jquery, jquery-ui, backbone.js

我正在使用 jQueryUI`.resizable()`函数来允许一些

*   要重新调整大小的元素。我希望它们可以水平和垂直调整大小。由于某种原因，我只能调整左侧的大小*   （蓝色）元素垂直。

    [http://jsfiddle.net/3Ka5V/12/show/#00ACEB](http://jsfiddle.net/3Ka5V/12/show/#00ACEB)

    知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:08:07.403

我不是骨干专家，如果我理解正确，问题是因为您将元素动态添加到 DOM。动态添加的元素不会继承之前设置的插件。

我认为有两种方式：

1.  当您将 LI 元素动态添加到主干 app.js 中的 DOM 时设置可调整大小（我无法尝试）
2.  使用[livequery](http://brandonaaron.net/code/livequery/docs)插件挂钩任何 DOM UL-LI 修改并附加可调整大小的功能

解决方案2：

```
$(function() {
  $('ul#colors li').resizable();
  $('ul#colors li').livequery(function () {
      $(this).resizable();
  });
}); 
```

这是一个工作小提琴：http: [//jsfiddle.net/IrvinDominin/rVh3g/3/](http://jsfiddle.net/IrvinDominin/rVh3g/3/)

我看到调整大小不太正确，我认为是你的css，但现在我无法调查更多......

# c# - 如何更改自定义控件中的光标？

> ID：16207252
> 
> 赞同：1
> 
> 时间：2013-04-25T05:48:20.127
> 
> 标签：c#, .net, winforms, cursor, browser

这是我的习惯`WebBrowser control`。

```
using System;
using System.Text.RegularExpressions;
using System.Windows.Forms;

public class RunescapeClient : WebBrowser
{
  private const string RUNESCAPE_CLIENT_URL = "http://oldschool33.runescape.com/j1";

public RunescapeClient()
{
    ScrollBarsEnabled = false;
    ScriptErrorsSuppressed = true;
    IsWebBrowserContextMenuEnabled = false;
    AllowWebBrowserDrop = false;
    Navigate(RUNESCAPE_CLIENT_URL);
}

protected override void OnDocumentCompleted(WebBrowserDocumentCompletedEventArgs e)
{
    if (Document != null && ValidClientUrl(e.Url.ToString()))
    {
        HtmlElement tableElement = Document.GetElementsByTagName("table")[1];
        tableElement.InnerText = string.Empty;
    }
}

private static bool ValidClientUrl(string url)
{
    return Regex.IsMatch(url, @"http://oldschool\d{1,2}.runescape.com/j1");
}
} 
```

我怎样才能将`cursor`这个更改为`control`我的`embedded .ico`. 我用谷歌搜索并找不到任何`custom controls`.

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:41:22.477

光标始终由`Cursor`属性更改。如果您有自定义控件并不重要。

尝试这个：

```
Icon ico = new Icon(@"C:\temp\someIcon.ico");
this.Cursor = new Cursor(ico.Handle); 
```

静态类`System.Windows.Forms.Cursors`包含所有系统游标。
要切换回默认系统光标，请使用以下命令：

```
this.Cursor = System.Windows.Forms.Cursors.Default; 
```

# html - 使用 XSLT 选择 XML 元素何时不起作用

> ID：16207253
> 
> 赞同：0
> 
> 时间：2013-04-25T05:48:23.583
> 
> 标签：html, xml, xslt

我正在尝试格式化我的表格以便有一个左填充，我希望在我的 for 语句中做出决定，因为有多行需要定义填充。

我创建了一个 XML 元素，它告诉我要使用什么填充，所以我需要做的就是阅读这个，但是当我尝试阅读它时，当我在浏览器中打开 xml 时它不会显示任何内容。

这是我的 xml 示例。

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="xmlstylesheet.xsl" type="text/xsl"?>
<Collection>
     <Passives>
          <Talent>Tra</Talent>
          <TCost>1</TCost>
          <Type>ANY</Type>
          <Action>Pass</Action>
     </Passives>
     <Passives>
          <Talent>Gen</Talent>
          <TCost>1</TCost>
          <Type>ANY</Type>
          <Indent>1</Indent>
          <Action>Pass</Action>
     </Passives>
     <Passives>
          <Talent>Weap</Talent>
          <TCost>12</TCost>
          <Type>ANY</Type>
          <Indent>2</Indent>
          <Action>Pass</Action>
     </Passives>
</Collection> 
```

它的要点是，如果`<Indent></Indent>`没有 Indent 元素，则 padding 应等于 15px，如果 indenet=1，则 padding 应等于 30，最后 indent = 2，则 padding 应等于 45。

我正在尝试在我的 xslt 中为 Passives 的语句定义填充。

```
 <xsl:for-each select="Passives">
            <div style="font-family:Calibri, Arial; font-size:5pt; cursor: default;">

            <xsl:choose>
<xsl:when test="Indent == '2'">
                    <xsl:variable name="newpadding">45px</xsl:variable>
                </xsl:when>
                <xsl:when test="Indent == '1'">
                    <xsl:variable name="newpadding">30px</xsl:variable>
                </xsl:when>
                <xsl:when test="Indent != ''">
                    <xsl:variable name="newpadding">15px</xsl:variable>
                </xsl:when>
        </xsl:choose> 

        <xsl:if test="Talent != ''">
//etc 
```

因此，一旦我输入我的 for 语句，我就想定义 newpadding，以便稍后将其应用于我的表格填充。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:14:19.957

而不是这个：

```
 <xsl:choose>
           <xsl:when test="Indent == '2'">
                <xsl:variable name="newpadding">45px</xsl:variable>
            </xsl:when>
            <xsl:when test="Indent == '1'">
                <xsl:variable name="newpadding">30px</xsl:variable>
            </xsl:when>
            <xsl:when test="Indent != ''">
                <xsl:variable name="newpadding">15px</xsl:variable>
            </xsl:when>
    </xsl:choose> 
```

试试这个：

```
 <xsl:variable name="newpadding"
                select="15 * (1 + concat(0, Indent))" /> 
```

您只向我们展示了 XSLT 的一小部分，因此无法查看是否还有其他问题需要修复。

# javascript - Dart 在 Map 中使用 `this`，就像在 Javascript 上一样

> ID：16207255
> 
> 赞同：2
> 
> 时间：2013-04-25T05:48:26.460
> 
> 标签：javascript, dart

在`javascript`我们可以做这样的事情：

```
var x = {
  'name' : 'john',
  'modifiedName' : function () { return this.name + ' <- modified'}
}; 
```

所以 x.modifiedName() 返回`john <- modified`

如何做到这一点`dart`？

我想使用 a 中的一些值`Map`来返回键的值，`javascript`例如示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T16:11:40.923

你可以这样做：

```
var x;
x = {
    'name' : 'john',
    'modifiedName' : () => x['name'] + ' <- modified'
};
print(x['modifiedName']()); 
```

因此，只要在声明后使用，`this`您就可以使用 , 而不是只使用它。`x``x`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:40:40.507

不是地图文字。但是您可以制作自己的地图类，并且有多种方法可以实现这一点。

**作为方法**

```
import "dart:collection";

class MyMap extends LinkedHashMap {

  String modifiedName() {
    String name = this["name"];
    return "$name <- modified";
  }

}

void main() {
  MyMap map = new MyMap();
  map["name"] = "John";
  print(map.modifiedName());
  map["name"] = "Harry";
  print(map.modifiedName());
} 
```

**作为财产**

```
import "dart:collection";

class MyMap extends LinkedHashMap {

  String _modifiedName() {
    String name = this["name"];
    return "$name <- modified";
  }

  String get modifiedName => _modifiedName();

}

void main() {

  MyMap map = new MyMap();
  map["name"] = "John";
  print(map.modifiedName);
  map["name"] = "Harry";
  print(map.modifiedName);

} 
```

**作为地图键**

```
import "dart:collection";

class MyMap extends LinkedHashMap {

  String operator [](String key) {
    if(key == "modifiedName") {
      String n = this["name"];
      return "$n <- modified";
    }
    return super[key];
  }

}

void main() {

  MyMap map = new MyMap();
  map["name"] = "John";
  print(map["modifiedName"]);
  map["name"] = "Harry";
  print(map["modifiedName"]);

} 
```

# sql-server - sql server - 2 左外连接存储过程错误

> ID：16207262
> 
> 赞同：1
> 
> 时间：2013-04-25T05:48:41.413
> 
> 标签：sql-server

这就是我创建的存储过程

```
create procedure p_fetchInspection 
                    @bIsByFreeText bit, @sFreeText nvarchar(max)
                    ,@bIsByTestedDate bit, @dTestedDateFrom datetime, @dTestedDateTo datetime
                    ,@bIsByLocation bit, @sLocation nvarchar(500)
                    ,@bIsByWorkOrder bit, @sWorkOrderFreeText nvarchar(max)
                    ,@bIsByTesterName bit, @sTesterName nvarchar(100)
                    ,@bIsByCorrosionTestingClass bit, @sCorrosionTestingClass nvarchar(10)
                    ,@bIsByTesterReceived bit,@bIsTesterReceived bit
                    ,@bIsByTesterUploaded bit,@bIsTesterUploaded bit
                    ,@bIsByAddedFromDevice bit,@bIsAddedFromDevice bit
                    ,@bIsByChecked bit,@bIsChecked bit
                    ,@bIsByRecordType bit,@bIsDefault bit,@bIsPoleNotSite bit,@bIsNewPole bit
as
BEGIN
--------------------
-- Declare
DECLARE @sSelect nVARCHAR(4000)
DECLARE @sFrom nVARCHAR(4000)
DECLARE @sWhere nVARCHAR(4000)
DECLARE @sOrder nVARCHAR(500)
DECLARE @sSql nVARCHAR(4000)
--------------------
SET @sSelect = 
'
select  
    [WorkOrder] = isnull(c.WorkOrderNo,'''')
    ,[Tester] = a.TesterName
                +
                ''
                ''
                +
                dbo.F_convertToSortableDateAndHourAndMinuteFormat2(a.TestedDate)
    ,[PoleId/Location] = a.PoleId
                        +
                        ''
                        ''
                        +
                        case when a.IsAddFromDevice = 0 then b.ExactDescription else a.LocationNameFromDevice end
    ,[Class] = a.CorrosionTestingClass
    ,[Remarks] = a.Remarks
    ,[IsTesterReceived] = case when a.IsTesterReceived = 1 then ''Yes'' else ''No'' end
    ,[IsTesterUploaded] = case when a.IsTesterUploaded = 1 then ''Yes'' else ''No'' end
    ,[IsAddedFromDevice] = case when a.IsAddFromDevice = 1 then ''Yes'' else ''No'' end
    ,a.SysId
'
SET @sFrom =
'
from 
    t_Inspection a
    left outer join t_asset b on a.AssetObject = b.SysId
    left outer join t_WorkOrder c on d.WorkOrderObject = c.Sysid
'
SET @sWhere = 
'
where 
    a.SysId = d.Sysid
'
------------------------------------------
if @bIsByFreeText = 1
    begin
        SET @sWhere = @sWhere + @sFreeText
    end
------------------------------------------
if @bIsByTestedDate = 1
    begin
        SET @sWhere = @sWhere +
'
    and (DATEDIFF(day, a.TestedDate, @TestedDateFrom) <= 0 
        AND DATEDIFF(day, a.TestedDate, @TestedDateTo) >= 0)
'
    end
------------------------------------------
if @bIsByLocation = 1
    begin
        SET @sWhere = @sWhere +
'
    and b.ExactDescription like ''%'' + @Location + ''%''
'
    end
------------------------------------------
if @bIsByWorkOrder = 1
    begin
        SET @sWhere = @sWhere + @sWorkOrderFreeText 

    end
------------------------------------------
if @bIsByTesterName = 1
    begin
        SET @sWhere = @sWhere +
'
    and a.TesterName like ''%'' + @TesterName + ''%''
'
    end
------------------------------------------
if @bIsByCorrosionTestingClass = 1
    begin
        SET @sWhere = @sWhere +
'
    and a.CorrosionTestingClass = @CorrosionTestingClass
'
    end
------------------------------------------
if @bIsByTesterReceived = 1
    begin
        SET @sWhere = @sWhere +
'
    and a.IsTesterReceived = @IsTesterReceived
'
    end
------------------------------------------
if @bIsByTesterUploaded = 1
    begin
        SET @sWhere = @sWhere +
'
    and a.IsTesterUploaded = @IsTesterUploaded
'
    end
------------------------------------------
if @bIsByAddedFromDevice = 1
    begin
        SET @sWhere = @sWhere +
'
    and a.IsAddFromDevice = @IsAddedFromDevice
'
    end
------------------------------------------
if @bIsByChecked = 1
    if @bIsChecked = 1
    begin
        SET @sWhere = @sWhere +
'
    and a.CheckedBy <> ''''
'
    end
    if @bIsChecked = 0
    begin
        SET @sWhere = @sWhere +
'
    and a.CheckedBy = ''''
'
    end
------------------------------------------
if @bIsByRecordType = 1
begin
    DECLARE @sRecordTypeWhere NVARCHAR(max)
    set @sRecordTypeWhere = ''

    if @bIsDefault = 1
    begin
        SET @sRecordTypeWhere = @sRecordTypeWhere + case when @sRecordTypeWhere = '' then '' else ' or ' end + ' a.isDefault = 1'
    end
    if @bIsPoleNotSite = 1
    begin
        SET @sRecordTypeWhere = @sRecordTypeWhere + case when @sRecordTypeWhere = '' then '' else ' or ' end + ' a.isPoleNotSite = 1'
    end
    if @bIsNewPole = 1
    begin
        SET @sRecordTypeWhere = @sRecordTypeWhere + case when @sRecordTypeWhere = '' then '' else ' or ' end + ' a.isNewPole = 1'
    end

    SET @sWhere = @sWhere + ' and (' + replace(@sRecordTypeWhere, space(2), space(1)) + ')'
end
-----------------------------------------------------------------------
-- Order By Clause
SET @sOrder =
'
order by 
    c.WorkOrderNo
    , b.ExactDescription
    , a.PoleId
'
--------------------
-- Execute SQL
SET @sSql = @sSelect + @sFrom + @sWhere + @sOrder
EXEC sp_executesql 
        @sSql       
        , N'@TestedDateFrom DateTime, @TestedDateTo DateTime, @Location nvarchar(500), @TesterName nvarchar(100), @CorrosionTestingClass nvarchar(10), @IsTesterReceived bit, @IsTesterUploaded bit, @IsAddedFromDevice bit'
        , @TestedDateFrom = @dTestedDateFrom
        , @TestedDateTo = @dTestedDateTo 
        , @Location = @sLocation
        , @TesterName = @sTesterName
        , @CorrosionTestingClass = @sCorrosionTestingClass
        , @IsTesterReceived = @bIsTesterReceived
        , @IsTesterUploaded = @bIsTesterUploaded 
        , @IsAddedFromDevice = @bIsAddedFromDevice
END 
```

但是得到错误“关键字'where'附近的语法不正确”，如果我删除第二个左外连接“左外连接t_WorkOrder c on d.WorkOrderObject = c.Sysid”，那么它可以工作。如果我在没有存储过程的情况下运行编码，只需在正常查询中运行它，也可以工作。为什么会这样？请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:58:08.140

你只需要改变

```
DECLARE @sFrom nVARCHAR(100) 
```

到

```
DECLARE @sFrom nVARCHAR(500) 
```

或者试试这个——

```
CREATE PROCEDURE dbo.p_fetchInspection 

      @bIsByFreeText BIT
    , @sFreeText NVARCHAR(MAX)
    , @bIsByTestedDate BIT
    , @dTestedDateFrom DATETIME
    , @dTestedDateTo DATETIME
    , @bIsByLocation BIT
    , @sLocation NVARCHAR(500)
    , @bIsByWorkOrder BIT
    , @sWorkOrderFreeText NVARCHAR(MAX)
    , @bIsByTesterName BIT
    , @sTesterName NVARCHAR(100)
    , @bIsByCorrosionTestingClass BIT
    , @sCorrosionTestingClass NVARCHAR(10)
    , @bIsByTesterReceived BIT
    , @bIsTesterReceived BIT
    , @bIsByTesterUploaded BIT
    , @bIsTesterUploaded BIT
    , @bIsByAddedFromDevice BIT
    , @bIsAddedFromDevice BIT
    , @bIsByChecked BIT
    , @bIsChecked BIT
    , @bIsByRecordType BIT
    , @bIsDefault BIT
    , @bIsPoleNotSite BIT
    , @bIsNewPole BIT

AS BEGIN

DECLARE 
      @sSelect NVARCHAR(4000)
    , @sFrom NVARCHAR(1000)
    , @sWhere NVARCHAR(4000)
    , @sOrder NVARCHAR(500)
    , @sSql NVARCHAR(4000)

SELECT @sSelect = 
'SELECT 
      WorkOrder = ISNULL(c.WorkOrderNo, '''')
    , Tester = a.TesterName + CHAR(13) + dbo.F_convertToSortableDateAndHourAndMinuteFormat2(a.TestedDate)
    , [PoleId/Location] = a.PoleId + CHAR(13) + CASE WHEN a.IsAddFromDevice = 0 THEN b.ExactDescription ELSE a.LocationNameFromDevice END
    , Class = a.CorrosionTestingClass
    , Remarks = a.Remarks
    , IsTesterReceived = CASE WHEN a.IsTesterReceived = 1 THEN ''Yes'' ELSE ''No'' END
    , IsTesterUploaded = CASE WHEN a.IsTesterUploaded = 1 THEN ''Yes'' ELSE ''No'' END
    , IsAddedFromDevice = CASE WHEN a.IsAddFromDevice = 1 THEN ''Yes'' ELSE ''No'' END
    , a.SysId' + CHAR(13)
, @sFrom =
'FROM dbo.t_Inspection a
LEFT JOIN dbo.t_asset b ON a.AssetObject = b.SysId
LEFT JOIN dbo.t_WorkOrder c ON d.WorkOrderObject = c.Sysid' + CHAR(13)
, @sWhere = 
'WHERE a.SysId = d.Sysid' + CHAR(13)

IF @bIsByFreeText = 1
    SELECT @sWhere = @sWhere + @sFreeText

IF @bIsByTestedDate = 1
    SELECT @sWhere = @sWhere +
'
    AND (
          DATEDIFF(DAY, a.TestedDate, @TestedDateFrom) <= 0 
            AND 
          DATEDIFF(DAY, a.TestedDate, @TestedDateTo) >= 0
        )
'

IF @bIsByLocation = 1
    SELECT @sWhere = @sWhere +
'
    AND b.ExactDescription LIKE ''%'' + @Location + ''%''
'

IF @bIsByWorkOrder = 1
    SELECT @sWhere = @sWhere + @sWorkOrderFreeText 

IF @bIsByTesterName = 1
    SELECT @sWhere = @sWhere +
'
    AND a.TesterName LIKE ''%'' + @TesterName + ''%''
'

IF @bIsByCorrosionTestingClass = 1
    SELECT @sWhere = @sWhere +
'
    AND a.CorrosionTestingClass = @CorrosionTestingClass
'

IF @bIsByTesterReceived = 1
    SELECT @sWhere = @sWhere +
'
    AND a.IsTesterReceived = @IsTesterReceived
'

IF @bIsByTesterUploaded = 1
    SELECT @sWhere = @sWhere +
'
    AND a.IsTesterUploaded = @IsTesterUploaded
'

IF @bIsByAddedFromDevice = 1
    SELECT @sWhere = @sWhere +
'
    AND a.IsAddFromDevice = @IsAddedFromDevice
'

IF @bIsByChecked = 1 BEGIN

    SELECT @sWhere = @sWhere + '
    AND a.CheckedBy ' + 
        CASE WHEN @bIsChecked = 1 
            THEN '!=' 
            ELSE '=' 
        END + ' ''''
    '

END

IF @bIsByRecordType = 1 BEGIN

    DECLARE @sRecordTypeWhere NVARCHAR(MAX)
    SELECT @sRecordTypeWhere = ''

    IF @bIsDefault = 1
        SELECT @sRecordTypeWhere = @sRecordTypeWhere + 
            CASE WHEN @sRecordTypeWhere = '' 
                THEN '' 
                ELSE ' OR ' 
            END + ' a.isDefault = 1'

    IF @bIsPoleNotSite = 1
        SELECT @sRecordTypeWhere = @sRecordTypeWhere + 
            CASE WHEN @sRecordTypeWhere = '' 
                THEN '' 
                ELSE ' OR ' 
            END + ' a.isPoleNotSite = 1'

    IF @bIsNewPole = 1
        SELECT @sRecordTypeWhere = @sRecordTypeWhere + 
            CASE WHEN @sRecordTypeWhere = '' 
                THEN '' 
                ELSE ' OR ' 
            END + ' a.isNewPole = 1'

    SELECT @sWhere = @sWhere + ' AND (' + REPLACE(@sRecordTypeWhere, '  ', ' ') + ')'
END

SELECT @sOrder =
'ORDER BY
      c.WorkOrderNo
    , b.ExactDescription
    , a.PoleId
'

SET @sSql = @sSelect + @sFrom + @sWhere + @sOrder

PRINT @sSql

EXEC sys.sp_executesql 
          @sSql     
        , N'@TestedDateFrom DateTime, @TestedDateTo DateTime, @Location nvarchar(500), @TesterName nvarchar(100), @CorrosionTestingClass nvarchar(10), @IsTesterReceived bit, @IsTesterUploaded bit, @IsAddedFromDevice bit'
        , @TestedDateFrom = @dTestedDateFrom
        , @TestedDateTo = @dTestedDateTo 
        , @Location = @sLocation
        , @TesterName = @sTesterName
        , @CorrosionTestingClass = @sCorrosionTestingClass
        , @IsTesterReceived = @bIsTesterReceived
        , @IsTesterUploaded = @bIsTesterUploaded 
        , @IsAddedFromDevice = @bIsAddedFromDevice

END 
```

# iphone - 如何将选定的 id 与数组中的国家/地区 id 进行比较并显示其名称而不是 ID

> ID：16207266
> 
> 赞同：1
> 
> 时间：2013-04-25T05:48:46.833
> 
> 标签：iphone, ios, objective-c, nsmutablearray, nsmutabledictionary

我的json响应是这样的。

```
{
    "continent_code" = EU;
    "country_code" = al;
    "country_id" = 2;
    "country_name" = Albania; 
},
{
    "continent_code" = AF;
    "country_code" = dz;
    "country_id" = 3;
    "country_name" = Algeria;
}, 
```

我的代码是这样的。

```
 country_selected=2; 
 NSMutableArray *wholeJsonArray = [LoginResult objectForKey:@"Response"];
    for(NSDictionary *countname in wholeJsonArray)
    {

        /* 
         NSString *cName = [NSString stringWithFormat:@"%@",[countname     
         objectForKey:@"country_name"]];
         [countryArray addObject:cName];
         */

        NSString *countryName = [countname objectForKey:@"country_name"];
        if(countryName)
            [countryArray addObject:countryName];

        NSString *stateName=[countname objectForKey:@"state_name"];
        if(stateName)
            [stateArray addObject:stateName];
    }

    for(NSDictionary *cid in wholeJsonArray)
    {

        NSNumber *number = [cid objectForKey:@"country_id"];
        if(number)
            [idcountry addObject:number];

        NSNumber *statenumber=[cid objectForKey:@"state_id"];
        if(statenumber)
            [idstate addObject:statenumber];

    }
} 
```

我的问题是，如果用户选择国家 id 2，然后在数组字段中比较这个值，然后在标题标签中显示是阿尔巴尼亚。

那么我该怎么做这个输出呢？

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:55:56.437

> ```
> country_selected=2; 
> NSString *countryName;
> for(NSDictionary *countname in wholeJsonArray)
> {
>     NSNumber *country_id = [countname objectForKey:@"country_id"];
>     if(country_selected == country_id.integerValue){
>         countryName = [countname objectForKey:@"country_name"];
>     }           
> } 
> ```

其中 countryName 将包含选定的 id 国家名称；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:53:57.517

创建一种从选定的 countryID 中查找国家/地区的方法

```
- (NSDictionary *)countryWithId:(NSUInteger)countryID
{
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"country_id == %d",countryID];
    return [[self.wholeJSONArray filteredArrayUsingPredicate:predicate]lastObject];

} 
```

您可以获取国家/地区

```
NSDictionary *country = [self countryWithId:2];
NSString *countryName = country[@"country_name"]; 
```

编辑：或

```
country_selected=2; 
NSMutableArray *wholeJsonArray = [LoginResult objectForKey:@"Response"];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"country_id == %d",countryID];
NSDictionary *country = [[wholeJsonArray filteredArrayUsingPredicate:predicate]lastObject];
NSString *countryName = country[@"country_name"]; 
```

# javascript - 在单个 Json 中连接元素

> ID：16207267
> 
> 赞同：0
> 
> 时间：2013-04-25T05:48:47.087
> 
> 标签：javascript, json

我有这个 JSON 字符串：

```
[{
    "leadid": "1-2222222",
    "firstnm": "Sunil",
    "lastnm": "Bhave",
    "FLSfirstnm": "Anil",
    "FLSlastnm": "Patwardhan",
    "leadstatus": "2",
    "LGcode": "11001",
    "dtcreated": "20/03/2013",
    "ispriority": "Y"
}, {
    "leadid": "1-3333333",
    "firstnm": "Anil",
    "lastnm": "Gave",
    "FLSfirstnm": "Sooraj",
    "FLSlastnm": "Bardhan",
    "leadstatus": "1",
    "LGcode": "22001",
    "dtcreated": "20/03/2013",
    "ispriority": "N"
}, {
    "leadid": "1-4444444",
    "firstnm": "Vinod",
    "lastnm": "Sharma",
    "FLSfirstnm": "Kabir",
    "FLSlastnm": "Khan",
    "leadstatus": "2",
    "LGcode": "33001",
    "dtcreated": "20/03/2013",
    "ispriority": "Y"
}, {
    "leadid": "1-5555555",
    "firstnm": "Manish",
    "lastnm": "Joshi",
    "FLSfirstnm": "Anil",
    "FLSlastnm": "Patwardhan",
    "leadstatus": "1",
    "LGcode": "11001",
    "dtcreated": "20/03/2013",
    "ispriority": "N"
}] 
```

我想将名字和姓氏添加为名称，从而减少元素的数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:52:13.187

对数组执行 for 循环，

```
element['name'] = element.firstnm + ' ' + element.lastnm
delete element.firstnm;
delete element.lastnm; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:09:08.753

试试这个

```
a=[{"leadid": "1-2222222","firstnm": "Sunil","lastnm": "Bhave","FLSfirstnm": "Anil","FLSlastnm": "Patwardhan","leadstatus": "2","LGcode": "11001","dtcreated": "20/03/2013","ispriority": "Y"},
{"leadid": "1-3333333","firstnm": "Anil","lastnm": "Gave","FLSfirstnm": "Sooraj","FLSlastnm": "Bardhan","leadstatus": "1","LGcode": "22001","dtcreated": "20/03/2013","ispriority": "N"}
,{"leadid": "1-4444444","firstnm": "Vinod","lastnm": "Sharma","FLSfirstnm": "Kabir","FLSlastnm": "Khan","leadstatus": "2","LGcode": "33001","dtcreated": "20/03/2013","ispriority": "Y"},
{"leadid": "1-5555555","firstnm": "Manish","lastnm": "Joshi","FLSfirstnm": "Anil","FLSlastnm": "Patwardhan","leadstatus": "1","LGcode": "11001","dtcreated": "20/03/2013","ispriority": "N"}]
for(var i = 0; i < a.length; i++){
a[i].name = a[i].firstnm+a[i].lastnm
delete a[i]['firstnm'];
delete a[i]['lastnm'];
} 
```

# c# - MVC4 拦截所有需要身份验证的请求

> ID：16207271
> 
> 赞同：0
> 
> 时间：2013-04-25T05:49:11.787
> 
> 标签：c#, authentication, asp.net-mvc-4, simplemembership

我想要求所有用户在进入网站的任何需要身份验证的部分之前填写一些额外的信息。

如果可能的话，我想了解`[Authorize]`注释，但忽略任何`@User.IsInRole("something")`

有没有我可以覆盖的方法`Global.asax`or ？

我只希望获取注释，因为我唯一的用途`.IsInRole()`是向他们显示不同的信息，并且我想要那里的链接，以便他们真正看到获取注释所需的内容。希望这是有道理的（有点累）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:41:51.537

您可以覆盖`AuthorizeAttribute`自身；这将使您可以访问在调用`OnActionExecuting()`标记为的操作时触发的方法`[Authorize]`。从那里您可以添加自己的身份验证逻辑或调用基本方法，然后在需要填写额外数据时重定向到适当的错误或表单。您应该能够将其原始请求作为返回 URL 查询参数，以便用户可以在处理完额外数据后继续前往他们要去的任何地方。然后你需要`[Authorize]`用这个自定义属性替换所有的使用，但是 find 和 replace 应该会处理这个问题。

# android - 当用户使用录音机停止讲话时自动录音并停止

> ID：16207274
> 
> 赞同：2
> 
> 时间：2013-04-25T05:49:23.740
> 
> 标签：android, audio-recording, android-audiorecord

我想在某些级别的声音接收和停止录音机没有收到声音时重新编码声音。

我最初使用媒体录音机检查最大振幅，然后我开始通过录音机录制，但我无法停止它，因为录音机没有任何方法来获得最大振幅。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-14T02:16:00.887

你应该尝试这样的事情：

```
readAudio = audioRecorder.read(data16bit, 0, buffer);
double fN = (double)readAudio;

double accum = 0;
for (int i = 0; i < readAudio; i ++)
{
   accum += Math.abs((double)data16bit[i]);
}

double soundLevel = accum/fN; 
```

然后检查 soundLevel 的值以查看应用程序应该何时停止录制。

# iphone - 使用触摸事件在 iphone 应用程序中绘制线条

> ID：16207281
> 
> 赞同：1
> 
> 时间：2013-04-25T05:49:52.843
> 
> 标签：iphone, xcode, ipad, drawing, touch

我正在使用触摸事件绘制签名我从论坛获得了代码它工作正常但问题是它没有正确绘制线就像我们画线一样 ali 它在行中折叠 ali 这是我的代码

这是我绘图的屏幕

![在此处输入图像描述](https://i.stack.imgur.com/ULxMM.png)

```
 - (void)viewDidLoad {
    [super viewDidLoad];
drawImage = [[UIImageView alloc] initWithImage:nil];
drawImage.frame = self.view.frame;
[self.view addSubview:drawImage];
self.view.backgroundColor = [UIColor lightGrayColor];
mouseMoved = 0;
  }

  - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

mouseSwiped = NO;
UITouch *touch = [touches anyObject];

if ([touch tapCount] == 2) {
    drawImage.image = nil;
    return;
}

lastPoint = [touch locationInView:self.view];
lastPoint.y -= 20;

   }

   - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    mouseSwiped = YES;

UITouch *touch = [touches anyObject];   
CGPoint currentPoint = [touch locationInView:self.view];
currentPoint.y -= 20;

UIGraphicsBeginImageContext(self.view.frame.size);
[drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 0.0, 0.0, 1.0);
CGContextBeginPath(UIGraphicsGetCurrentContext());
CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
CGContextStrokePath(UIGraphicsGetCurrentContext());
drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

lastPoint = currentPoint;

mouseMoved++;

if (mouseMoved == 10) {
    mouseMoved = 0;
}

   }

   - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

  UITouch *touch = [touches anyObject];

  if ([touch tapCount] == 2) {
    drawImage.image = nil;
    return;
  }

   if(!mouseSwiped) {
    UIGraphicsBeginImageContext(self.view.frame.size);
    [drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 0.0, 0.0, 1.0);
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    CGContextFlush(UIGraphicsGetCurrentContext());
    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
       }
           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:15:53.007

您可以在按下该按钮时添加按钮，在屏幕上添加一个箭头，您可以使用触摸旋转和调整大小。

# java - 如何将多个参数传递给java反射中的方法

> ID：16207283
> 
> 赞同：9
> 
> 时间：2013-04-25T05:50:02.060
> 
> 标签：java, dynamic, reflection, parameter-passing

嗨，我正在使用反射来实现某些目标。我已经获得了类名、该类的方法名和需要在文件中传递给该方法的参数值（获取任何文件。不是约束）。我必须使用参数调用该方法。此方法不返回任何内容。这个类中有一个巨大的方法列表，每个方法的参数列表各不相同。

例如：`method1(String, String, int, boolean)` `method1(String, int, boolean)`同样我有不同的排列和组合。那么我怎样才能做到这一点。我已经尝试使用不同的 switch 子句对事物进行硬编码，但维护它是一项真正的开销和冒险的事情。我们可以动态地做这件事，比如从文件中动态读取方法名称及其参数并调用它。任何小代码片段都会有所帮助。TIA。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-27T16:30:49.553

大家好，我已经找到了上述问题的解决方案。下面是示例代码片段。

```
package reflections;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

public class ReflectionTest {
    public void method1(String str, int number) {
        System.out.println(str + number);
    }

    public void method1(String str) {
        System.out.println(str);
    }

    public void method1() {
        System.out.println("helloworld");
    }

    public static void main(String[] args) throws ClassNotFoundException,
            InstantiationException, IllegalAccessException,
            NoSuchMethodException, SecurityException, IllegalArgumentException,
            InvocationTargetException {
        // Step 1) Make an object array and store the parameters that you wish
        // to pass it.
        Object[] obj = {};// for method1()
        // Object[] obj={"hello"}; for method1(String str)
        // Object[] obj={"hello",1}; for method1(String str,int number)
        // Step 2) Create a class array which will hold the signature of the
        // method being called.
        Class<?> params[] = new Class[obj.length];
        for (int i = 0; i < obj.length; i++) {
            if (obj[i] instanceof Integer) {
                params[i] = Integer.TYPE;
            } else if (obj[i] instanceof String) {
                params[i] = String.class;
            }
            // you can do additional checks for other data types if you want.
        }

        String methoName = "method1"; // methodname to be invoked
        String className = "reflections.ReflectionTest";// Class name
        Class<?> cls = Class.forName(className);
        Object _instance = cls.newInstance();
        Method myMethod = cls.getDeclaredMethod(methoName, params);
        myMethod.invoke(_instance, obj);
    }
} 
```

我希望这对其他人也有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T11:02:44.917

```
public class ReflectionSample
{
    private Object mString = null;
    private int mValue;

    public ReflectionSample()
    {
    }

    public ReflectionSample(int oValue)
    {
        mValue = oValue;
    }

    public ReflectionSample(String oString)
    {
        mString = oString;
    }

    public ReflectionSample(String oString, int oValue)
    {
        setValues(oString, oValue);
    }

    public void setValues(String oString, int oValue)
    {
        mString = oString;
        mValue = oValue;
    }

    public String toString()
    {
        return ""+mString+":"+mValue;
    }

    public void run()
    {
        String oInput = "Teststring";
        Class<?> cls;
        String clsname = "main.ReflectionSample";
        Object rs = null;   // ReflectionSample
        Object rsc = null;

        System.out.println(this.getClass().getName());
        try
        {
            System.out.println(clsname);
            cls = Class.forName(clsname);
            if(cls == null)
            {
                System.err.println(clsname + " doesn't exist");
                return;
            }

            // Look for a constructor which has a single string
            Constructor<?> ct = null;
            Class<?>[] param_types = new Class<?>[1];
            Object[] arguments = new Object[1];

            param_types[0] = String.class;

            // get the string constructor
            ct = cls.getConstructor(param_types);

            // We only have one object
            arguments = new Object[1];
            arguments[0] = oInput;

            // Instantiate the object with passed in argument.
            rs = ct.newInstance(arguments);
            System.out.println("String constructor sample: "+rs);

            // Instantiate with default constructor
            param_types = new Class<?>[0];
            arguments = new Object[0];
            ct = cls.getConstructor(param_types);
            rs = ct.newInstance(arguments);
            rsc = rs; // Keep it for later, to lazy to call it again
            System.out.println("Default constructor sample: "+rs);

            // Instantiate with string and int constructor
            param_types = new Class<?>[2];
            arguments = new Object[2];

            // Must be in the same order as the params I think
            param_types[0] = String.class;
            param_types[1] = Integer.TYPE;      // <-- Its a primitive so use TYPE not Class

            arguments[0] = oInput;
            arguments[1] = new Integer(1);

            ct = cls.getConstructor(param_types);
            rs = ct.newInstance(arguments);
            System.out.println("String plus int constructor sample: "+rs);

            // call the setValues method
            param_types[0] = String.class;
            param_types[1] = Integer.TYPE;      // <-- Its a primitive so use TYPE not Class

            arguments[0] = oInput;
            arguments[1] = 1;

            System.out.println("setValues invocation before: "+rsc);
            Method m = cls.getMethod("setValues", param_types);
            m.invoke(rsc, arguments);
            System.out.println("setValues invocation after: "+rsc);

            // An alternative method to pass the parameters
            m = cls.getMethod("setValues", String.class, Integer.TYPE);
            m.invoke(rsc, oInput+"x", 2);
            System.out.println("setValues invocation after: "+rsc);
        }
        catch(Throwable e)
        {
            System.err.println(e.getLocalizedMessage());
        }
    }
} 
```

输出：

```
main.ReflectionSample
main.ReflectionSample
String constructor sample: Teststring:0
Default constructor sample: null:0
String plus int constructor sample: Teststring:1
setValues invocation before: null:0
setValues invocation after: Teststring:1 
```

希望这可以帮助。

我不知道这是否是 Java 中的一个较新功能，但我已经看到您现在也可以使用带有参数的调用，而不是使用数组，这可能会使您的代码更好地阅读（这是替代方法） . 如果您需要可变数量的参数并且事先不知道会有多少个参数，那么分配数组肯定是有效的，并且还应该是向后兼容的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-01T00:01:59.980

一个简单的解决方案是创建一个`Class`需要传递的参数：

```
public class ObjectArguments {
  private PrintWriter out;
  private String productId;
  private int action;

  public ObjectArguments(PrintWriter out, String productId, int action) {
    this.out = out;
    this.productId = productId;
    this.action = action;
  }

  public PrintWriter getOut() {
    return out;
  }

  public String getProductId() {
    return productId;
  }

  public int getAction() {
    return action;
  }
} 
```

假设您要`Foo`使用名为 的方法调用一个类`bar`。
然后它会像这样完成。

```
PrintWriter out = null;
String productId = null;
int action = 0;

Class[] paramArguments = new Class[1];  
paramArguments[0] = ObjectArguments.class;  

ObjectArguments newObj = new ObjectArguments(out,productId,action);

Class cls = Class.forName("Foo");
Object obj = cls.newInstance();

Method method = cls.getDeclaredMethod("bar", paramArguments);
method.invoke(obj, newObj); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-30T15:51:08.727

对于两个 int 参数示例如下，同样也可以调用其他数据类型参数

```
Method method=new Test1().getClass().getMethod(x, new Class[] {int.class,int.class}); 
```

我们可以调用一个需要 3 个参数的方法，`int,int,string`如下所示：

```
Method method=new Test1().getClass().getMethod(x, new Class[] {int.class,int.class, String.class}); 
```

# c++ - 使用 pselect 进行同步等待

> ID：16207286
> 
> 赞同：-1
> 
> 时间：2013-04-25T05:50:15.117
> 
> 标签：c++, c, sockets, posix

在服务器代码中，我想使用 pselect 等待客户端连接以及监视我创建的过程的标准输出并将其发送到客户端（如简化的远程 shell）。

我试图找到有关如何使用 pselect 的示例，但我没有找到任何示例。客户端可以连接的套接字已经设置并可以工作，正如我使用 accept() 验证的那样。SIGTERM 被阻止。

这是我尝试使用 pselect 的代码：

```
waitClient()
{
    fd_set readers;
    fd_set writers;
    fd_set exceptions;
    struct timespec ts;

    // Loop until we get a sigterm to shutdown
    while(getSigTERM() == false)
    {
        FD_ZERO(&readers);
        FD_ZERO(&writers);
        FD_ZERO(&exceptions);

        FD_SET(fileno(stdin), &readers);
        FD_SET(fileno(stdout), &writers);
        FD_SET(fileno(stderr), &writers);
        FD_SET(getServerSocket()->getSocketId(), &readers);
        //FD_SET(getServerSocket()->getSocketId(), &writers);

        memset(&ts, 0, sizeof(struct timespec));
        pret = pselect(FD_SETSIZE, &readers, &writers, &exceptions, &ts, &mSignalMask);

        // Here pselect always returns with 2\. What does this mean?
        cout << "pselect returned..." << pret << endl;
        cout.flush();
}
} 
```

所以我想知道的是如何等待 pselect 直到收到事件，因为当前 pselect 总是立即返回值 2。我试图将超时设置为 NULL 但这并没有改变任何东西。

pselect 的返回值（如果为正）是导致事件的文件描述符？

我正在使用 fork() 创建新的程序（尚未实现）我知道我必须在它们上等待（）。我也可以等他们吗？我想我需要聊天信号 SIGCHILD，那么我将如何使用它呢？孩子上的 wait() 也会阻塞，或者我可以只看一眼然后继续 pselect，否则我必须并发阻塞等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:54:35.937

它立即返回，因为集合中的文件描述符`writers`已准备好。标准输出流几乎总是准备好写入。

如果您查看[`select`手册页](http://pubs.opengroup.org/onlinepubs/009695399/functions/select.html)，您将看到返回值是`-1`错误、`0`超时和一个正数，告诉您准备好的文件描述符的数量。

# php - 我怎样才能在codeigniter上做这个网址（ca.mysite.com）？

> ID：16207294
> 
> 赞同：1
> 
> 时间：2013-04-25T05:50:58.110
> 
> 标签：php, codeigniter, url, rewrite, subdomain

我正在制作一个网站，该网站将用于发布广告列表，如 backpage 或 craigslist，

现在我的 URL 有问题，因为目前它仅在美国城市可用，

例如：`www.mysite.com/birmingham/`这个我很好，每个美国城市的网址都是这样的`www.mysite.com/city`

现在我希望它可以在国际国家使用，并且我现在的 URL 有问题，例如多伦多，我希望 URL 像这样`ca.mysite.com/toronto`，因为多伦多在加拿大，我不知道该怎么做，抱歉，我只是 codeigniter 的新手

谢谢希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:53:43.377

使用这个 htaccess 代码

```
RewriteCond %{HTTP_HOST} ^mysite.com$ [NC]
RewriteRule ^(.+)$ http://$1.mysite.com [L,R=301] 
```

现在您可以访问任何国家。喜欢加拿大

```
ca.mysite.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:58:54.330

嗨，只需在您的 application/config/config.php 中用 $config['base_url'] 替换以下代码

```
if(isset($_SERVER['HTTP_HOST']))
{
    $config['base_url'] = isset($_SERVER['HTTPS']) && strtolower($_SERVER['HTTPS']) == 'on' ? 'https' : 'http';
    $config['base_url'] .= '://'. $_SERVER['HTTP_HOST'];
    $config['base_url'] .= str_replace(basename($_SERVER['SCRIPT_NAME']), '', $_SERVER['SCRIPT_NAME']);
}

else
{
    $config['base_url'] = 'http://localhost/';
} 
```

不需要放任何东西 htaccess 文件

# java - onActivityResult 不是从调用 startActivityForResult 的类中调用的

> ID：16207300
> 
> 赞同：0
> 
> 时间：2013-04-25T05:51:34.723
> 
> 标签：java, android

我有一个 MainActivity、一个 NonActivity 类和 SearchActivity。NonActivity 类调用 startActivityForResult，但从不调用 nonActivity 类中的 onActivityResult。

但是当我出于测试目的实现它时，我想通了，它在 MainActivity 中被调用。你能告诉我是否有可能，onActivityResult 将从 nonActivity 类中调用？

这是我从 NonActivity 类调用的代码。

```
Intent intent = new Intent(activity, SearchActivity.class);
        //start SearchActivity through intent and expect for result. The result is based on result code, which is REQUEST_DISCOVERY 
        activity.startActivityForResult(intent, REQUEST_DISCOVERY);
    } 
```

感谢您的回答，如果您需要更多代码，我可以添加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:56:47.210

`onActivityResult()`不会在`NonActivity`课程上被调用，因为实际上它不是开始 new 的那个，你对你的对象`Activity`的调用，并且是将被调用的地方。要将其调用回，只需在 中创建一个方法并从 中调用它，并传递您需要的参数。`startActivityForResult()``MainActivity``MainActivity``onActivityResult()``NonActivity``NonActivity``MainActivity's` `onActivityResult()`

# sql - 使用连接连接两个或多个表

> ID：16207304
> 
> 赞同：1
> 
> 时间：2013-04-25T05:51:47.420
> 
> 标签：sql, sql-server-2008, select, join

我有两种类型的表，称为**Organizations**和**OrgLogin。**

**组织：**

```
ID
Name 
```

**组织登录：**

```
LoginId
UserName
Password 
```

我想在组织表中使用用户名和密码进行选择查询。所以我使用了Join。

我的疑问是，

```
select top(55)'Insert into Organizations(Id,Username,Password,Name)values(' + 
       Cast(o.organizationId as varchar(50))+',''' +
        IsNull(''''+ol.UserName+'''', 'NULL')+','+
       isnull(convert(nvarchar(max),HASHBYTES('MD5',ol.Password),1),'NULL')+ ')' 
    FROM Organization AS o 
    left join OrgLogin As ol ON ol.LoginId=o.OrganizationID 
```

我有以下结果集，

```
Insert into Organizations(Id,CreateDate,Username,Password)values(1,'NULL,NULL)

Insert into Organizations(Id,CreateDate,Username,Password)values(2,'NULL,NULL)

Insert into Organizations(Id,CreateDate,Username,Password)values(3,'NULL,NULL)

Insert into Organizations(Id,CreateDate,Username,Password)values(4,'NULL,NULL)

Insert into Organizations(Id,CreateDate,Username,Password)values(5,''V EX Electronics Systems Pvt.Ltd.Chennai',0xACB3BB721E1EC47C4CB569331ACC4E8E)

Insert into Organizations(Id,CreateDate,Username,Password)values(5,''V EX Electronics Systems Pvt.Ltd.Chennai',0xACB3BB721E1EC47C4CB569331ACC4E8E) 
```

Id 重复参见“5”Id。两次创建。为什么会这样？任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:17:36.183

您应该整理单引号（在第一个 ISNULL 之前）

```
select top(55)'
    Insert into Organizations(Id,Username,Password,Name)values(' + 
    Cast(o.organizationId as varchar(50))+',' +
    IsNull(''''+ol.UserName+'''', 'NULL')+','+
    isnull(convert(nvarchar(max),HASHBYTES('MD5',ol.Password),1),'NULL')+ ')' 
FROM Organization AS o 
left join OrgLogin As ol ON ol.LoginId=o.OrganizationID 
```

接下来，`o.id`只要该组织有多个 OrgLogin 记录，就会重复。

# applescript - AppleScript 中的“正在播放”窗口

> ID：16207310
> 
> 赞同：0
> 
> 时间：2013-04-25T05:52:04.503
> 
> 标签：applescript, itunes

我想知道如何使用 Script Utility 制作一个脚本，当单击该脚本实用程序时，会返回一个窗口，显示 iTunes 中正在播放的歌曲名称和艺术家。对 AppleScript 非常陌生，并且花了一个不成功的小时试图让它工作！

谢谢，内森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:30:04.913

有一个`current track`属性：

```
tell application "iTunes"
    tell current track to artist & " - " & name
    display dialog result
    --do shell script "terminal-notifier -message '' -title " & quoted form of result
end tell 
```

如果您需要不断更新窗口，使用 GeekTool 之类的工具可能是更好的选择。

# javascript - 使用指定的分隔符拆分字符串，并替换某些部分

> ID：16207311
> 
> 赞同：0
> 
> 时间：2013-04-25T05:52:05.877
> 
> 标签：javascript, html, regex

我有这样的内容`Go to {#www.google.com##Google#}`，我想把它用作可点击的链接，如下图：

`Go to <a href="www.google.com" title="Google">Google</a>`.

我的尝试：`var splCharData = splCharData.split(/[\{#\#}]/g);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:08:12.473

找到正则表达式实际上是很容易的部分。很容易忘记，即使在 JavaScript 中，您也应该防范 XSS 漏洞。

确保值被正确转义的一种方法是实际创建一个锚点，然后查询它的`outerHTML`属性：

```
var str = 'Go to {#www.google.com##Google#}',
    m = /\{#([^#]+)##([^#]+)#\}/g;

alert(str.replace(m, function($0, $1, $2) {
  var a = document.createElement('a');
  a.href = 'http://' + $1;
  a.title = $2;
  a.textContent = $2;

  return a.outerHTML;
})); 
```

[**演示**](http://jsbin.com/ipukew/1/)

或者，您可以使用纯字符串方法并手动转义您在属性中推送的任何内容。

```
var str = 'Go to {#www.google.com##Google#}',
    m = /\{#([^#]+)##([^#]+)#\}/g,
    htmlspecialchars = function(str) {
      return str
        .replace('<', '&lt;')
        .replace('&', '&amp;')
        .replace('>', '&gt;')
        .replace('"', '&quot;');
    };

alert(str.replace(m, function($0, $1, $2) {
  return '<a href="' + 
    htmlspecialchars('http://' + $1) +
    '" title="' +
    htmlspecialchars($2) + 
    '">' + 
    htmlspecialchars($2) +
    '</a>';
})); 
```

[**演示**](http://jsbin.com/ipukew/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T05:58:07.947

查找：`\{#([^#]+)##([^#]+)#\}`

用。。。来代替 ：`<a href="$1" title="$2">$2</a>`

# c# - 文件阅读器冻结我的程序

> ID：16207312
> 
> 赞同：1
> 
> 时间：2013-04-25T05:52:12.993
> 
> 标签：c#, file, methods, datagridview, freeze

运行以下方法时，我无法确定程序冻结的原因：

```
String fileName = "Drops.de";
        StreamReader streamReader = new StreamReader(fileName);
        String npcName;
        string npcID;
        string itemID;
        string itemAmount;
        string itemRarity;
        string itemName;

        while(!streamReader.EndOfStream){
            string line = streamReader.ReadLine();
            //start of block
            if(line.StartsWith("[")){
                npcName = line.TrimStart('[');
                npcName = npcName.TrimEnd(']');
                while(npcName == button1.Text){    
                while(!line.StartsWith("[/")){
                    line = streamReader.ReadLine();
                    String[] s = line.Split(' ');
                    npcID = (s[0]);
                    itemName = (s[1]);
                    itemID = (s[2]);
                    itemAmount = (s[3]);
                    itemRarity = (s[4]);
                    dataGridView1.Rows.Add(itemName, itemID, itemAmount, itemRarity);
                    /*
                    DataGridViewRow row = (DataGridViewRow)dataGridView1.Rows[0].Clone();
                    row.Cells[0].Value = itemName;
                    row.Cells[1].Value = itemID;
                    row.Cells[2].Value = itemAmount;
                    row.Cells[3].Value = itemRarity;
                    dataGridView1.Rows.Add(row);*/
                    dataGridView1.Refresh();
                    line = streamReader.ReadLine();
               //MessageBox.Show(npcName);
                }
                }

            }
        }
        streamReader.Close();
    } 
```

我怀疑它与“while”循环有关。但是我很可能是错的。我对编程很陌生，所以这可能很明显：p。

无论如何，所有帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T05:58:40.807

你会退出这个循环`while(npcName == button1.Text){`吗？:-)

# android - 如何使用视频 url 字符串在网格视图中显示视频

> ID：16207315
> 
> 赞同：3
> 
> 时间：2013-04-25T05:52:16.380
> 
> 标签：android, video, android-gridview

我在数组中有一个 URL 字符串。如何在网格视图中显示视频的 URL，然后单击网格在下一个屏幕中播放。如何实施？谁指导我...

我尝试了它工作正常的图像。视频如何实现，数组是字符串...URL...

```
public class act extends Activity {
/** Called when the activity is first created. */
//Integer[] imageIDs={R.drawable.icon,R.drawable.icon,R.drawable.icon};
String uri1="https://i3.ytimg.com/vi/bQaWsVQSLdY/default.jpg";
String uri2="https://i4.ytimg.com/vi/cJQCniWQdno/mqdefault.jpg";
String uri3="https://i1.ytimg.com/vi/D8dA4pE5hEY/mqdefault.jpg";
String[] urls={uri1,uri2,uri3};
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    GridView grd=(GridView)findViewById(R.id.gridView1);
    grd.setAdapter(new ImageAdapter(this));
    grd.setOnItemClickListener(new OnItemClickListener()
    {
    public void onItemClick(AdapterView<?> parent,View v,int pos,long id)
    {
        Toast.makeText(getBaseContext(),"pic"+(pos+1)+"select ",Toast.LENGTH_SHORT).show();
    }
    });
}
public class ImageAdapter extends BaseAdapter
{
    private Context context;
    private int itemBackground;
    ImageAdapter(Context c)
    {
    context=c;
    TypedArray a=obtainStyledAttributes(R.styleable.Gallery1);
    itemBackground=a.getResourceId(R.styleable.Gallery1_android_galleryItemBackground,0);
    a.recycle();
    }
    public int getCount()
    {
        return urls.length;
    }
    public Object getItem(int pos)
    {
        return pos;
    }
    public long getItemId(int pos)
    {
        return pos;
    }
    public View getView(int pos,View cv,ViewGroup vg)
    {
        ImageView imageview=new ImageView(context);
        imageview.setImageResource(urls.length);
        imageview.setScaleType(ImageView.ScaleType.FIT_XY);
        imageview.setLayoutParams(new GridView.LayoutParams(150,120));
        imageview.setBackgroundResource(itemBackground);
        return imageview;
    }
  }
} 
```

非常感谢提前...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T06:36:55.047

在这个阶段你错了。

```
How to display the url of video in gridview ? 
```

不要尝试将您的 URL 打印到网格视图项中。YouTube 提供了不同帧中特定视频的缩略图。所以直接使用该 URL 并播放。

这是 YouTube 缩略图的图片 URL（按帧排序）

**YouTube 网址：http:** [//img.youtube.com/vi/](http://img.youtube.com/vi/)

**Video_ID：** AxeOPU6n1_M

**帧数**：0.jpg

# 最终 YouTube 缩略图网址

[http://img.youtube.com/vi/AxeOPU6n1_M/0.jpg](http://img.youtube.com/vi/AxeOPU6n1_M/0.jpg)

[http://img.youtube.com/vi/AxeOPU6n1_M/1.jpg](http://img.youtube.com/vi/AxeOPU6n1_M/1.jpg)

[http://img.youtube.com/vi/AxeOPU6n1_M/2.jpg](http://img.youtube.com/vi/AxeOPU6n1_M/2.jpg)

所以，最后你必须`youtube_img_url`从网络服务中获取，这样你才能使用它。

如果您不知道如何设置来自服务器的图像，请查看以下链接。

[示例 - 1](http://www.coderzheaven.com/2012/09/23/simplest-lazy-loading-listview-android-data-populated-mysql-database-php/)

[懒惰列表](https://github.com/thest1/LazyList)

这两个示例都很好，现在您只需根据要求更新您的代码。

```
How to play on click the grid plays in next screen. 
```

这里应该是通过意图调用的新活动，它将在 YouTube 播放器中播放。

```
@Override
        public void onCreate(Bundle savedInstanceState) 
        {
         super.onCreate(savedInstanceState);
          setContentView(R.layout.videoplaying);
          String url= "Your url";
          Uri uri=Uri.parse(url);
          VideoView video=(VideoView)findViewById(R.id.videoplaying);
          video.setVideoURI(uri);
          video.start();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:18:18.267

你试试这个：

选择一张图片时，获取该特定网址，然后开始新的活动。

新活动代码：

```
 @Override
        public void onCreate(Bundle savedInstanceState) 
        {
         super.onCreate(savedInstanceState);
          setContentView(R.layout.videoplaying);
          String url= "Your url";
          Uri uri=Uri.parse(url);
          VideoView video=(VideoView)findViewById(R.id.videoplaying);
          video.setVideoURI(uri);
          video.start();
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-29T12:59:30.207

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.video);
      String url= "Write your Url";
      Uri uri=Uri.parse(url);
      VideoView video=(VideoView)findViewById(R.id.videoview);
      video.setVideoURI(uri);
      video.start();
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-25T06:01:23.567

您可以参考this进行媒体播放

[https://developer.android.com/guide/topics/media/mediaplayer.html](https://developer.android.com/guide/topics/media/mediaplayer.html)

# c# - Telerik RadComboBox 中的选择超出范围

> ID：16207324
> 
> 赞同：1
> 
> 时间：2013-04-25T05:52:42.490
> 
> 标签：c#, asp.net, telerik, radcombobox

我有`Telerik RadComboBox`，

```
 <telerik:RadComboBox runat="server" ID="comboTown" Width="150px">
    </telerik:RadComboBox> 
```

我绑定这张桌子

```
Town
-----
TownOne
TownTwo
TownThree
TownFour 
```

显示`comboTown`如下

```
 comboTown.DataSource = DB.Towns.ToList();
  comboTown.DataTextField = "Town";
  comboTown.DataValueField = "Town"; 
```

但是，当我`selectedValue`设置`comboTown`喜欢`comboTown.SelectedValue= "TownTwo";`

我收到此错误消息
`Selection out of range
Parameter name: value`

我想知道为什么，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:55:46.350

前

```
comboTown.SelectedValue= "TownTwo" 
```

添加代码

> comboTown.DataBind()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:30:30.350

我刚试过这个，它对我有用：

标记：

```
<telerik:RadComboBox runat="server" ID="comboTown" Width="150px" />
<telerik:RadButton runat="server" ID="btnSetSelectedValue" 
 OnClick="btnSetSelectedValue_Click"></telerik:RadButton> 
```

代码：

```
 protected void Page_Load(object sender, EventArgs e)
 {
    if (!IsPostBack)
    {
       comboTown.DataSource = new List<string> { "TownOne", 
                                                 "TownTwo", 
                                                 "TownThree", 
                                                 "TownFour" 
                                               };
            comboTown.DataBind();
    }
 }

 protected void btnSetSelectedValue_Click(object sender, EventArgs e)
 {
        comboTown.SelectedValue = "TownThree";
 } 
```

如您所见 - 我有一个组合框。如果不是回发，则在页面加载时我将其绑定到值。我有一个按钮，单击按钮我会进行回发并将组合框中的选定值设置为“TownThree”。这对我有用。

# java - 它没有在 JTable 中显示 ColumnName

> ID：16207329
> 
> 赞同：0
> 
> 时间：2013-04-25T05:53:01.057
> 
> 标签：java, swing, jtable, jscrollpane

你好朋友这是我的程序一切都很好。但我无法在 JTable 顶部显示列名。我应该做哪些改变来展示它？并且还告诉我如何给这张桌子提供滚动条（垂直的，水平的）。

提前致谢..

报告1.Java：

```
package com.ash;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.EventQueue;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.naming.spi.DirStateFactory.Result;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JRootPane;
import javax.swing.JScrollPane;
import javax.swing.border.EmptyBorder;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.JTableHeader;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JTable;
    public class Report1 extends JFrame {

Object[][] data = null;

private JPanel contentPane;

/**
 * Launch the application.
 */
ResultSet rs,rs1;
Statement stmt=null;
int k=0;
PreparedStatement pr;
public JTable table;

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                Report1 frame = new Report1();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public Report1() {
    setTitle("Report");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 953, 616);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);

    table = new JTable();
    table.setBounds(100, 136, 810, 431);
    contentPane.add(table);

    JButton btnNewButton = new JButton("Add");
    btnNewButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {

            try {
                NewPatient.con=DbConnPa.getConObj();
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            } catch (SQLException e) {
                e.printStackTrace();
            }
            String sql="SELECT COUNT (*) FROM newpatient1";
            try {
                pr=NewPatient.con.prepareStatement(sql);
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                rs=pr.executeQuery(sql);
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                rs.next();
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            int count = 0;
            try {
                count = rs.getInt(1);
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println(count);

            data= new Object [count][6];

            try {
                stmt=NewPatient.con.createStatement();
            } catch (SQLException e2) {
                // TODO Auto-generated catch block
                e2.printStackTrace();
            }

            String sql1="SELECT * FROM newpatient1";

            Object[] columns={"FirstName","LastName","Age","RefDoctor","Sex","RegId"};

            try {
                rs1=stmt.executeQuery(sql1);
            } catch (SQLException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            try {

                    while(rs1.next()){

                        for(int j=0;j<6;j++){
                            try {
                                data[k][j]=rs1.getString(j+1);
                                System.out.println("i="+"j="+j);
                            } catch (SQLException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }
                    k++;}
                }

             catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            table.setModel(new DefaultTableModel(data, columns));

        }
    });
    btnNewButton.setBounds(382, 47, 89, 23);
    contentPane.add(btnNewButton);

}
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T05:56:18.970

让我们从所有让我害怕的事情开始......

```
// This will come back and haunt you...
contentPane.setLayout(null);

table = new JTable();
// You should leave this up to the layout manager, but you're not using one, so...
table.setBounds(100, 136, 810, 431); 
```

而现在的问题...

预计表格将大于执行此操作的可用可视区域...

```
contentPane.add(table); 
```

不是它应该如何工作。

您应该使用`JScrollPane`. 这为要显示的标题提供了区域...

![在此处输入图像描述](https://i.stack.imgur.com/BBoCh.png)

```
contentPane.add(new JScrollPane(table)); 
```

查看[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)和[如何使用滚动窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)

最终，您将希望熟悉[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)，因为从数据库中读取结果可能是一项长时间运行的任务，从而导致您的应用程序停止运行

**更新示例**

我还浏览了你的数据重试代码并“清理了它”，这相当……有趣

```
public Report1() {
    setTitle("Report");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 953, 616);
    ((JComponent) getContentPane()).setBorder(new EmptyBorder(5, 5, 5, 5));

    table = new JTable();
    add(new JScrollPane(table));

    JButton btnNewButton = new JButton("Add");
    btnNewButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {

            PreparedStatement pr = null;
            ResultSet rs = null;
            Statement stmt = null;
            try {
                NewPatient.con = DbConnPa.getConObj();
                String sql = "SELECT COUNT (*) FROM newpatient1";
                pr = NewPatient.con.prepareStatement(sql);
                rs = pr.executeQuery(sql);
                if (rs.next()) {
                    int count = 0;
                    count = rs.getInt(1);
                    System.out.println(count);
                    rs.close();

                    data = new Object[count][6];

                    stmt = NewPatient.con.createStatement();

                    String sql1 = "SELECT * FROM newpatient1";

                    Object[] columns = {"FirstName", "LastName", "Age", "RefDoctor", "Sex", "RegId"};

                    rs = stmt.executeQuery(sql1);

                    while (rs.next()) {

                        for (int j = 0; j < 6; j++) {
                            data[k][j] = rs1.getString(j + 1);
                            System.out.println("i=" + "j=" + j);
                        }
                        k++;
                    }
                }

                table.setModel(new DefaultTableModel(data, columns));
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } finally {
                try {
                    rs.close();
                } catch (Exception e) {
                }
                try {
                    pr.close();
                } catch (Exception e) {
                }
                try {
                    stmt.close();
                } catch (Exception e) {
                }
            }

        }
    });
    add(btnNewButton, BorderLayout.SOUTH);
} 
```

# java - 替换文本文件中列的值

> ID：16207331
> 
> 赞同：0
> 
> 时间：2013-04-25T05:53:08.890
> 
> 标签：java

我有一个包含不同列的文件，每列的值都是字符串标签

```
col1 col2 col3
----- ----- -----
一个WM S2
B JK S3
C ZO S2

```

如果我想将每个值的值替换为数字，我的表格将采用以下格式

```
col1 col2 col3
----- ----- -----
0 3 6
1 4 7
2 5 6

```

这个用java怎么写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:10:45.883

您可以使用`java.util.Scanner`, 因为`.next()`将平等对待数字和文本

```
final Scanner scanner = new Scanner(new File("path_to_file"));
final List<String[]> list = new ArrayList<String[]>();

try {
    // skip 2 first lines
    if (scanner.hasNextLine())
        scanner.nextLine();
    if (scanner.hasNextLine())
        scanner.nextLine();

    while (scanner.hasNextLine()) {
        final String[] line = new String[3];
        for (int i = 0; i < 3 && scanner.hasNext(); i++) {
            line[i] = scanner.next();
        }
        list.add(line);
        scanner.nextLine();
    }
} finally {
    scanner.close();
}

// the file content is in "list" variable now, so you can modify and save back to file 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-25T06:05:44.107

因为你不知道确切的行数

您执行以下操作
- 读取所有行（这将为您提供行数）rowsNo。
- 你重写你的表。

```
 for (int row=0; row<rowsNo; row++) {
  String rowStr = "";  
  for (int col=0; col<colsNo; col++)  
     rowStr += row+col*colsNo;
  System.out.println(rowStr);
 } 
```

# c# - 在 LINQ 创建的语句中，未考虑 JOIN 顺序

> ID：16207334
> 
> 赞同：1
> 
> 时间：2013-04-25T05:53:22.137
> 
> 标签：c#, sql, linq, sql-server-2012

在 LINQ 创建的语句中，未考虑 JOIN 顺序。

我这样写一个 LINQ 查询

```
 public IQueryable<SubscribeTotalHistory> Search(int subscribeId, string     fromDate, string toDate)
        {
        var result =
            FindAll().Include(i => i.SubscribeIdentityHistory)
                .Include(i => i.SubscribeMeterHistory)
                .Include(i => i.SubscribeMeterHistory.MeterDefinition)
                .Include(i => i.SubscribeMeterHistory.MeterDefinition1)
                .Include(i => i.SubscribePowerHistory.StandardVoltage)
                .Include(i => i.SubscribeStateHistory)
                .Include(i => i.Subscribe)
                .Include(i => i.SubscribeTariffHistory)
                .Include(i => i.SubscribeTariffHistory.BillingCalculateType)
                .Include(i => i.SubscribeTariffHistory.WorkType)
                .Where(
                    i =>
                    i.SubscribeId == subscribeId && i.Status == AnnounceState.Valid &&
                    ((i.FromDateTime.CompareTo(toDate) <= 0 && i.ToDateTime.CompareTo(fromDate) >= 0) ||
                     (i.FromDateTime.CompareTo(fromDate) <= 0 && i.ToDateTime.CompareTo(toDate) >= 0)));
        return result;

    } 
```

我想得到一个这样的 T/SQL

```
 Select *
    FROM     [billing].[SubscribeTotalHistory] AS [Extent1]
INNER JOIN [billing].[SubscribeIdentityHistory] AS [Extent2] ON [Extent1].[SubscribeIdentityHstryId] = [Extent2].[Id]
LEFT OUTER JOIN [billing].[SubscribeMeterHistory] AS [Extent3] ON [Extent1].[SubscribeMeterHistoryId] = [Extent3].[Id]
LEFT OUTER JOIN [billing].[MeterDefinition] AS [Extent4] ON [Extent3].[MeterDefinitionActiveCode] = [Extent4].[Id]
LEFT OUTER JOIN [billing].[MeterDefinition] AS [Extent5] ON [Extent3].[MeterDefinitionReactiveCode] = [Extent5].[Id]
INNER JOIN [billing].[SubscribePowerHistory] AS [Extent6] ON [Extent1].[SubscribePowerHistoryId] = [Extent6].[Id]
INNER JOIN [global].[StandardVoltage] AS [Extent7] ON [Extent6].[StandardVoltageId] = [Extent7].[Id]
INNER JOIN [billing].[Subscribe] AS [Extent8] ON [Extent1].[SubscribeId] = [Extent8].[Id]
INNER JOIN [billing].[SubscribeStateHistory] AS [Extent9] ON [Extent1].[SubscribeStateHistoryId] = [Extent9].[Id]
INNER JOIN [billing].[SubscribeTariffHistory] AS [Extent10] ON [Extent1].[SubscribeTariefHistoryId] = [Extent10].[Id]

LEFT OUTER JOIN [billing].[WorkType] AS [Extent11] ON [Filter1].[WorkTypeId] = [Extent11].[Id]
..... 
```

但我有一个这样的查询

```
SELECT 
[Filter1].[Id1] AS [Id], 
[Filter1].[AnnounceId1] AS [AnnounceId], 
[Filter1].[AnnounceType] AS [AnnounceType], 
[Filter1].[ExecutiveUnitId] AS [ExecutiveUnitId]
FROM   (SELECT
             [Extent1].[Id] AS [Id1],
          [Extent1].[AnnounceId] AS [AnnounceId1],
         [Extent1].[AnnounceType] AS [AnnounceType],
          [Extent1].[ExecutiveUnitId] AS [ExecutiveUnitId]
FROM     [billing].[SubscribeTotalHistory] AS [Extent1]
INNER JOIN [billing].[SubscribeIdentityHistory] AS [Extent2] ON [Extent1].    [SubscribeIdentityHstryId] = [Extent2].[Id]
    LEFT OUTER JOIN [billing].[SubscribeMeterHistory] AS [Extent3] ON [Extent1].[SubscribeMeterHistoryId] = [Extent3].[Id]
LEFT OUTER JOIN [billing].[MeterDefinition] AS [Extent4] ON [Extent3].[MeterDefinitionActiveCode] = [Extent4].[Id]
LEFT OUTER JOIN [billing].[MeterDefinition] AS [Extent5] ON [Extent3].[MeterDefinitionReactiveCode] = [Extent5].[Id]
INNER JOIN [billing].[SubscribePowerHistory] AS [Extent6] ON [Extent1].[SubscribePowerHistoryId] = [Extent6].[Id]
INNER JOIN [global].[StandardVoltage] AS [Extent7] ON [Extent6].[StandardVoltageId] = [Extent7].[Id]
INNER JOIN [billing].[Subscribe] AS [Extent8] ON [Extent1].[SubscribeId] = [Extent8].[Id]
INNER JOIN [billing].[SubscribeStateHistory] AS [Extent9] ON [Extent1].[SubscribeStateHistoryId] = [Extent9].[Id]
INNER JOIN [billing].[SubscribeTariffHistory] AS [Extent10] ON [Extent1].[SubscribeTariefHistoryId] = [Extent10].[Id]
WHERE 1 =  CAST( [Extent1].[Status] AS int) ) AS [Filter1]
LEFT OUTER JOIN [billing].[WorkType] AS [Extent11] ON [Filter1].[WorkTypeId] = [Extent11].[Id] 
```

为什么其中一个 JOIN 位于 prancipale Select 之外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T12:33:47.043

() 之间的所有内容都被视为派生表，最后一个连接是在该表的结果上。它完全有效，但使用公用表表达式更具可读性。我猜linq不关心可读性:)

使用 CTE 的相同查询看起来像这样，现在最后一个连接看起来更“正常”。

```
WITH [Filter1] AS (
    SELECT
        [Extent1].[Id] AS [Id1],
        [Extent1].[AnnounceId] AS [AnnounceId1],
        [Extent1].[AnnounceType] AS [AnnounceType],
        [Extent1].[ExecutiveUnitId] AS [ExecutiveUnitId]
    FROM
        [billing].[SubscribeTotalHistory] AS [Extent1]
        INNER JOIN [billing].[SubscribeIdentityHistory] AS [Extent2] ON [Extent1].    [SubscribeIdentityHstryId] = [Extent2].[Id]
        LEFT OUTER JOIN [billing].[SubscribeMeterHistory] AS [Extent3] ON [Extent1].[SubscribeMeterHistoryId] = [Extent3].[Id]
        LEFT OUTER JOIN [billing].[MeterDefinition] AS [Extent4] ON [Extent3].[MeterDefinitionActiveCode] = [Extent4].[Id]
        LEFT OUTER JOIN [billing].[MeterDefinition] AS [Extent5] ON [Extent3].[MeterDefinitionReactiveCode] = [Extent5].[Id]
        INNER JOIN [billing].[SubscribePowerHistory] AS [Extent6] ON [Extent1].[SubscribePowerHistoryId] = [Extent6].[Id]
        INNER JOIN [global].[StandardVoltage] AS [Extent7] ON [Extent6].[StandardVoltageId] = [Extent7].[Id]
        INNER JOIN [billing].[Subscribe] AS [Extent8] ON [Extent1].[SubscribeId] = [Extent8].[Id]
        INNER JOIN [billing].[SubscribeStateHistory] AS [Extent9] ON [Extent1].[SubscribeStateHistoryId] = [Extent9].[Id]
        INNER JOIN [billing].[SubscribeTariffHistory] AS [Extent10] ON [Extent1].[SubscribeTariefHistoryId] = [Extent10].[Id]
    WHERE 
        1 = CAST( [Extent1].[Status] AS int)
)
SELECT 
    [Filter1].[Id1] AS [Id], 
    [Filter1].[AnnounceId1] AS [AnnounceId], 
    [Filter1].[AnnounceType] AS [AnnounceType], 
    [Filter1].[ExecutiveUnitId] AS [ExecutiveUnitId]
FROM
    [Filter1]
    LEFT OUTER JOIN [billing].[WorkType] AS [Extent11] ON [Filter1].[WorkTypeId] = [Extent11].[Id] 
```

# android - 修改 SAX-RSS-Reader 以读取缩略图标签

> ID：16207338
> 
> 赞同：0
> 
> 时间：2013-04-25T05:53:44.560
> 
> 标签：android, rss-reader

我已尽力研究其他几个示例，然后找出需要更改的内容，但到目前为止我失败了。
图书馆项目在[这里](https://github.com/NickPresta/MyGuelph/tree/master/lib/SAX-RSS-Reader)

它提供了一个非常易于使用的 RSS 阅读器库，但它不读取 media:thumbnail 标签（这是我需要的）。
我的问题？我需要向代码（库项目）添加什么才能使其也读取缩略图标签。
我相信文件 RssHandler 需要修改，但我不知道要改变什么。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-03T04:35:26.930

您需要在 RSSItem 中创建一个新属性和一个与前面带有“set”的属性同名的 setter 名称。

例如：

```
public void setGuid(String guid) {
    this.guid = guid;
} 
```

RSSHandler 将在解析属性时查找此方法。

# refactoring - TypeScript 重构。更新集合

> ID：16207341
> 
> 赞同：1
> 
> 时间：2013-04-25T05:54:02.087
> 
> 标签：refactoring, typescript

我在 TypeScript 中有很多 foreach，其中一些：

```
 $.each(obj.triggers, function (index, value) {
                (<any>sc.triggers).push(Trigger.objectToTrigger(value));
            });    
$.each(obj.notStartTriggers, function (index, value) {
                (<any>sc.notStartTriggers).push(Trigger.objectToTrigger(value));
            }); 
```

我如何重构这个 foreach 的？对于这个 foreach，我需要一种方法。

谢谢大家。我需要更新 sc.notStartTriggers 集合，而不是添加（推送）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:12:08.497

重构代码的主要目的可能是删除强制转换，而不是删除轻微的重复。

此外，您不需要走得太远`any`，因为您要查找的操作来自数组，因此您可以使用`any[]`至少让您知道的操作。

我通过允许将两个参数传递给我的方法来扩展 Robert C Martin 关于参数数量的规则:) - 参数按照方法名称暗示的顺序，将*触发器*添加到*数组*。

```
function addTriggerToArray(trigger: any, triggerArray: any[]) {
    triggerArray.push(trigger);
}

$.each(obj.triggers, function (index, value) {
    addTriggerToArray(Trigger.objectToTrigger(value), sc.triggers);
});    
$.each(obj.notStartTriggers, function (index, value) {
    addTriggerToArray(Trigger.objectToTrigger(value), sc.notStartTriggers);
}); 
```

要更新现有项目，您将使用...

```
function updateTrigger(trigger: any, index: number, triggerArray: any[]) {
    triggerArray[index] = trigger;
}

$.each(obj.triggers, function (index, value) {
    updateTrigger(Trigger.objectToTrigger(value), index, sc.triggers);
});    
$.each(obj.notStartTriggers, function (index, value) {
    updateTrigger(Trigger.objectToTrigger(value), index, sc.notStartTriggers);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:36:24.047

因此，您有一个属性`obj`和相同的属性`sc`，您想使用触发器循环。所以这是一个将这些作为参数的函数：

```
function process(obj,sc,property:string,Trigger){
    $.each(obj[property], function (index, value) {
                (sc[property]).push(Trigger.objectToTrigger(value));
            });     
}

process(obj,sc,"triggers",Trigger);
process(obj,sc,"notStartTriggers",Trigger); 
```

请注意，以下内容在 javascript / typescript 中是等价的：

```
x.asdf
x["asdf"] 
```

# tortoisesvn - 在 win7 中使用 TortoiseSVN 时的问题

> ID：16207345
> 
> 赞同：1
> 
> 时间：2013-04-25T05:54:14.977
> 
> 标签：tortoisesvn

我正在使用 TortoiseSVN 1.7.12。我正在使用 win 7。我已经从远程服务器签出，所以我有一个名为 project 的文件夹（上面有绿色图标）。现在我将项目复制（右键单击-> 复制）到另一个名为 project2 的文件夹（文件夹上还有一个绿色图标）。

问题：

1.  如果我修改 project2 中的文件，那么我也可以将其更新到远程服务器吗？

2.  如果我希望 project2 成为普通文件夹（没有绿色图标），我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:02:35.937

1.  是的，您可以像往常一样使用该工作副本（如果您复制了整个结构）。
2.  您应该删除`.svn`子文件夹（它是隐藏的，因此您需要在 Windows 资源管理器中启用显示隐藏目录）。然后它将不再是工作副本，您将无法再对其进行更新/提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:03:42.903

您需要从第二个项目文件夹中删除 .svn 文件夹......有时它可能会隐藏......所以检查选项显示隐藏文件......然后删除 .svn 文件，那么您的项目将是一个普通文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:05:33.550

是的，你可以这么做

并且，有 2 个选项，第一个是您不签出项目，而是将其导出查看屏幕截图，第二个选项是删除 .svn 隐藏的子文件夹。 ![在此处输入图像描述](https://i.stack.imgur.com/8s5pY.png)

导出选项不会在文件夹上显示绿色标志。

# javascript - jQuery 在下拉菜单中仅选择父 li

> ID：16207350
> 
> 赞同：1
> 
> 时间：2013-04-25T05:54:28.383
> 
> 标签：javascript, jquery, html

我试图弄清楚如何使这种淡入淡出效果仅在我将鼠标悬停在父 LI 上时发生，但是当我将鼠标悬停在下拉列表中的项目上时它似乎淡入淡出？

有任何想法吗？？？

我在这里尝试了一堆例子，但我似乎无法终生解决这个问题，而且它真的开始困扰我了！

谢谢各位！

```
<style type="text/css">

/*style the main menu*/
.myMenu {
    margin:0;
    padding:0;
}

.myMenu li {
    list-style:none;
    float:left;
    font:12px Arial, Helvetica, sans-serif #111;
}

.myMenu li a:link {
    display:block;
    text-decoration:none;
    background-color:#09F;
    padding: 0.5em 2em;
    margin:0;
    border-right: 1px solid #fff;
    color:#111;
}

.myMenu li a:hover {
    background-color:#0CF;  
}

/*style the sub menu*/
.myMenu li ul {
    position:absolute;
    display: none;
    border-top:1px solid #fff;
    margin:0;
    padding:0;
}

.myMenu li ul li {
    display:inline;
    float:none;
}

.myMenu li ul li a:link, .myMenu li ul li a:visited {
    background-color:#09F;
    width:auto;
}

.myMenu li ul li a:hover {
    background-color:#0CF;  
}

</style>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
        $('.myMenu li').on('mouseover', openSubMenu);
        $('.myMenu li').on('mouseout', closeSubMenu);

        function openSubMenu() {
            $(this).find('ul').fadeIn()
        };

        function closeSubMenu() {
            $(this).find('ul').fadeOut();   
        };

});
</script>

</head>

<body>
<ul class="myMenu">
    <li><a href="#">menu item 1</a></li>
    <li><a href="#">menu item 2</a>
        <ul>
            <li><a href="#">sub menu item 1</a></li>
            <li><a href="#">sub menu item 2</a></li>
            <li><a href="#">sub menu item 3</a></li>
            <li><a href="#">sub menu item 4</a></li>
        </ul>
    </li>
    <li><a href="#">menu item 3</a>
       <ul>
            <li><a href="#">sub menu item 1</a></li>
            <li><a href="#">sub menu item 2</a></li>
            <li><a href="#">sub menu item 3</a></li>
            <li><a href="#">sub menu item 4</a></li>
        </ul>
    </li>
    <li><a href="#">menu item 4</a></li>
    <li><a href="#">menu item 5</a></li>
</ul>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T05:55:50.840

使用这个选择器：

```
$('.myMenu > li').on('mouseover', openSubMenu); 
```

代替：

```
$('.myMenu li').on('mouseover', openSubMenu); 
```

（显然，适用于其他地方的同一个选择器）

虽然，我喜欢使用：

```
$('.myMenu').children('li').on('mouseover', openSubMenu); 
```

它只`<li>`从元素中选择子元素`.myMenu`。

此外，由于奇怪的冒泡问题，有必要使用`mouseenter`and`mouseleave`事件。

**演示：http:** [//jsfiddle.net/MdfHB/](http://jsfiddle.net/MdfHB/)

参考：

*   [http://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)
*   [http://api.jquery.com/children/](http://api.jquery.com/children/)
*   [http://api.jquery.com/mouseenter/](http://api.jquery.com/mouseenter/)
*   [http://api.jquery.com/mouseleave/](http://api.jquery.com/mouseleave/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:56:33.337

像这样：http: [//jsfiddle.net/dtbaf/1/](http://jsfiddle.net/dtbaf/1/)

```
 $('.myMenu > li').on('mouseenter', openSubMenu);
  $('.myMenu > li').on('mouseleave', closeSubMenu); 
```

仅选择类的直接子`li`级`myMenu`。也使用[.mouseenter()](http://api.jquery.com/mouseenter/)和[.mouseleave()](http://api.jquery.com/mouseleave/)事件..

# python - Numpy 掩码数组 argmax 未在完全掩码数组上返回“掩码”？

> ID：16207352
> 
> 赞同：3
> 
> 时间：2013-04-25T05:54:41.493
> 
> 标签：python, numpy

我在 numpy.ma 中有一个屏蔽数组，所有值都被屏蔽：

```
import numpy.ma as ma
arr = ma.array([3,4,10], mask=[True, True, True]) 
```

我希望对该数组的操作，例如`ma.sum`应该返回`masked`：

```
>>> ma.sum(arr) is ma.masked
>>> True 
```

这确实是`True`。

但是当我`ma.argmax()`在同一个数组上使用时，结果不是`ma.masked`而是`0`

```
>>> ma.argmax(arr) is ma.masked
>>> False
>>> ma.argmax(arr)
>>> 0 
```

有任何想法吗？这是一个错误，还是预期的行为？理想情况下，这将返回`masked`。谁能想到一个好的解决方法，还是我很傻......谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:33:04.850

```
>>> arr[ma.argmax(arr)]
masked 
```

`argmax`返回最大值的*索引。*您可以使用索引来获取值。该*值*被屏蔽。

因为所有值都被屏蔽了，所以它们被认为是相等的（与`fill_value`），并`argmax`返回记录的第一个索引（在[的文档中`numpy.argmax`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.argmax.html)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T07:46:22.903

`np.argmax`返回一个标量，因此返回一个掩码数组是没有意义的。

从[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ma.MaskedArray.argmax.html)（强调我的）：

> 返回沿给定轴的最大值的索引数组。 **屏蔽值被视为具有值 fill_value**。

# iphone - 如何在应用程序后台运行一个不会影响我的应用程序用户界面的线程

> ID：16207353
> 
> 赞同：2
> 
> 时间：2013-04-25T05:54:51.413
> 
> 标签：iphone, ios, objective-c, ipad, xcode4.6

我已经为IOS做了一个应用程序，其中我使用的是sqlite数据库，数据库在应用程序中是本地的。现在我已经给出了应用程序从互联网下载数据并将其放入本地数据库并显示在用户面前的功能。我已经提供了这个功能，`- (void)viewDidLoad` 这样当应用程序下载数据时，它会停止工作，直到完成下载部分，因为这个用户需要等待与应用程序交互。

现在我想在应用程序后台运行一个线程，该线程将连接互联网并更新应用程序而不干扰用户。请帮我。

我的下载和保存图像的代码是这样的：

```
 -(void)Download_save_images:(NSString *)imagesURLPath :(NSString *)image_name   
   {                              

      NSMutableString *theString = [NSMutableString string];

    // Get an image from the URL below    
      UIImage *image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:NSURL  URLWithString:imagesURLPath]]];        
      NSLog(@"%f,%f",image.size.width,image.size.height);        
     NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    // If you go to the folder below, you will find those pictures
     NSLog(@"%@",docDir);    
    [theString appendString:@"%@/"];
    [theString appendString:image_name];
    NSLog(@"%@",theString);
    NSLog(@"saving png");
    NSString *pngFilePath = [NSString stringWithFormat:theString,docDir];
    NSData *data1 = [NSData dataWithData:UIImagePNGRepresentation(image)];
    [data1 writeToFile:pngFilePath atomically:YES];  

    NSLog(@"saving image done");

    [image release];
   // [theString release];
} 
```

当我调试应用程序时，我看到我的应用程序在下面一行花费了更多时间：

```
UIImage *image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:NSURL  URLWithString:imagesURLPath]]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:25:38.817

如果你觉得**GCD**很困难，你也可以使用**NSOperationQueue**和**NSBlockOperation 。**

 **```
NSBlockOperation *operation=[[NSBlockOperation alloc] init];

[operation addExecutionBlock:^{
    //Your code goes here

}];

NSOperationQueue *queue=[[NSOperationQueue alloc] init];
[queue addOperation:operation]; 
```

在**GCD**中，您可以使用

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
   //Your Code to download goes here

    dispatch_async(dispatch_get_main_queue(), ^{
       //your code to update UI if any goes here

    });
}); 
```

根据您的需要使用任一 API。查看讨论[**NSOperationQueue**与**GCD**](https://stackoverflow.com/questions/10373331/nsoperation-vs-grand-central-dispatch)的线程以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:38:07.610

类似的问题以前被问过数百次。我建议您对此进行快速搜索。苹果文档中也有一个主题彻底涵盖了该领域。[这里](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)

基本上你可以用操作队列或调度队列来做到这一点。Avi & Amar 上面给出了一些代码片段。

我想补充一点，因为您似乎不熟悉该主题并且您提到涉及网络请求。

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{

    // Dont DIRECTLY request your NSURL Connection in this part because it will never return data to the delegate...
//  Remember your network requests like NSURLConnections must be invoked in mainqueue
// So what ever method you're invoking for NSURLConnection it should be on the main queue

        dispatch_async(dispatch_get_main_queue(), ^{
                // this will run in main thread. update your UI here.
        });
    }); 
```

我在下面给出了一个小例子。您可以概括该想法以满足您的需求。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{

        // Do your background work here

        // Your network request must be on main queue. this can be raw code like this or method. which ever it is same scenario. 
        NSURLRequest *req = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]];
        dispatch_async(dispatch_get_main_queue(), ^{

            [NSURLConnection sendAsynchronousRequest:req queue:[NSOperationQueue currentQueue] completionHandler:^(NSURLResponse *res, NSData *dat, NSError *err)
             {
                 // procress data

                 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{

                     // back ground work after network data received

                     dispatch_async(dispatch_get_main_queue(), ^{

                         // finally update UI
                     });
                 });
             }];
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:01:00.410

您可以像这样使用 GCD：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
    // put here your background code. This will run in background thread.

    dispatch_async(dispatch_get_main_queue(), ^{
            // this will run in main thread. update your UI here.
    });
}) 
```

但是您需要了解块的工作原理。试试看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T06:01:59.310

使用 GCD

创建您的调度对象

```
dispatch_queue_t yourDispatch;
yourDispatch=dispatch_queue_create("makeSlideFast",nil); 
```

然后使用它

```
dispatch_async(yourDispatch,^{
//your code here

//use this to make uichanges on main thread
dispatch_async(dispatch_get_main_queue(), ^(void) {
});

}); 
```

仅通过使用在主线程上执行 ui

```
dispatch_async(dispatch_get_main_queue(), ^(void) {
}); 
```

然后释放它

```
dispatch_release(yourDispatch); 
```

这里是[教程](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T06:12:22.677

有很多方法：

1\. [大中央调度](https://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

```
dispatch_async(dispatch_get_global_queue(0, 0), ^{
  //Your code
}); 
```

2\. [NSThread](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html)

```
[NSThread detachNewThreadSelector:@selector(yourMethod:) toTarget:self withObject:parameterArray]; 
```

3\. [NSObject - performSelectorInBackground](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)

```
[self performSelectorInBackground:@selector(yourMethod:) withObject:parameterArray]; 
```**

# c# - 如何解决回发问题文件上传控件的路径不存在

> ID：16207356
> 
> 赞同：0
> 
> 时间：2013-04-25T05:55:08.597
> 
> 标签：c#, .net

我正在使用 asp.net fileupload control 上传文件，每当由于页面上的其他字段而发生回发时，文件上传控件中的选定路径就会丢失。我在页面上使用多个文件上传控件进行差异。目的如何解决这个问题？亲爱的，请帮忙举一个简单而合适的例子。

```
string file = Path.GetFileName(UploadSalesServiceCopy.PostedFile.FileName);
string filepath2 = ConfigurationManager.AppSettings["ServerMapImgPath"].ToString();//.......local drive path via web config
string subPath = filepath2 + file;
bool IsExists = System.IO.Directory.Exists(Server.MapPath(subPath));
if (!IsExists)
    System.IO.Directory.CreateDirectory(Server.MapPath(subPath));

if (UploadSalesServiceCopy.HasFile)
{
    //UploadSalesServiceCopy.SaveAs(subPath);//PHYSICAL path
    UploadSalesServiceCopy.SaveAs(Server.MapPath(subPath));//server path             
}
else
{
    ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "javascript", "alert('No File Selected.')", true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:48:42.690

如果您使用带有更新面板的 asp.net 文件上传控件。那么问题是文件上传控件与部分回发不兼容。

```
<asp:FileUpload ID="fpTest1" runat="server" />
<asp:FileUpload ID="fpTest2" runat="server" />
<asp:UpdatePanel ID="up" runat="server" UpdateMode="Conditional">
<ContentTemplate>
<asp:Button ID="btnActions" runat="server" Text="Other Actions" >
</ContentTemplate>
</asp:UpdatePanel>
<asp:Button ID="test" runat="server" OnClick="test_Click" Text="Upload File" /> 
```

您可以看到，当您单击其他操作按钮时，文件上传将具有值。

将 Post back 控件放在更新面板中，并将文件上传控件放在更新面板之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:24:22.587

在点击 Upload 按钮时...您的页面首先重定向到 Page_load 事件，您可以在其中设置页面值。为此在

```
page_load(..)
{
   if(!IsPostBack)
   {
      ..setpagevalues();
   }
} 
```

那个主要的……你得到的是空路径……试试看……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T07:55:05.393

您只需将 fileupload 与**updatepanel**一起使用，并将 **ViewStateMode="Enabled"**放入fileupload。

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
<asp:FileUpload ID="FileUpload1" runat="server" ViewStateMode="Enabled"/>
 </ContentTemplate>
        </asp:UpdatePanel> 
```

# yii - 允许对数据库进行原子更新

> ID：16207358
> 
> 赞同：0
> 
> 时间：2013-04-25T05:55:12.737
> 
> 标签：yii

给定几个模型类，例如

```
car, supplier, ... 
```

我们每个人都有 save() 方法。

我想要实现的是，我想保存 `car and supplier` 模型，如果其中一个模型失败，则没有一个模型被保存。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T05:59:33.513

您正在寻找交易。看看这里：

[http://www.yiiframework.com/doc/guide/1.1/en/database.ar#using-transaction-with-ar](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#using-transaction-with-ar)

```
$transaction=$model->dbConnection->beginTransaction();
if($car->save() && $supplier->save()) {
    $transaction->commit();
} else {
    $transaction->rollback();
} 
```

# asp.net - 从 C#.net 中的 SVN 存储库下载文件

> ID：16207361
> 
> 赞同：2
> 
> 时间：2013-04-25T05:55:22.493
> 
> 标签：asp.net, tortoisesvn, download

如何从 C#.net 中的 Web 应用程序从 SVN 存储库下载文件？我想以编程方式下载文件。单击按钮时，它应该从 TextBox 中给出的 URL 下载文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T15:05:19.003

首先，您应该能够直接在存储库上访问（只读）文件，而无需 SVN 客户端（尽管您可能需要身份验证）。在这种情况下，就像从任何 URL 下载任何文件一样：

```
using (WebClient client = new WebClient())
{
    // In case you need authentication...
    // client.Credentials = new NetworkCredential("username", "password");

    client.DownloadFile(fileUrl, localDestinationPath);
} 
```

然而，正如 Vinayak 所说，SharpSvn 并不是一个糟糕的方法——它非常适合处理 SVN 交互。所以如果使用标准的 WebClient 不起作用，可以在 SharpSvn 中执行以下操作来获取文件流：

```
MemoryStream stream = new MemoryStream();
using (SvnClient client = new SvnClient())
{
    client.Authentication.DefaultCredentials = new NetworkCredential("username", "password");
    client.Write(SvnTarget.FromUri(svnFilePath), stream);
}
return stream; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:35:18.507

**编辑：**

我还找到了另一个[SharpSvn 教程](http://sharpsvn.open.collab.net/docs/walkthrough.htm)，希望对您有所帮助。它包含从介绍到 SVN 操作（结帐、提交等）的所有内容

还，

1.  阅读[SharpSVN](http://sharpsvn.open.collab.net/)并查看[此博客](http://blogs.collab.net/subversion/sharpsvn-brings)

2.  [C# 中的 Checkout、update、commit](http://sharpsvn.open.collab.net/servlets/ProjectProcess?documentContainer=c4__Samples&view)相关示例很少

3.  [源代码](http://sharpsvn.open.collab.net/servlets/ProjectDocumentList?folderID=207&expandFolder=207&folderID=207)还包含一个示例项目

# java - 了解有关 Hadoop 上 RAM 的问题

> ID：16207362
> 
> 赞同：0
> 
> 时间：2013-04-25T05:55:24.830
> 
> 标签：java, hadoop, hive

有时我们会遇到 Java 堆空间错误，然后我们会增加 JVM RAM 限制（按 Xmx 值）。我有两个问题：

1) 更改 Xmx 值后，如何知道集群中应该有多少映射器和减速器？我的意思是如果我有 32G RAM 的节点，并且 Xmx 值例如到 5G，这是否意味着我只能使用 6 个映射和减速器（5*6=30G）？

2）为什么会发生？我试图阅读所有这个论坛并没有找到答案。如果我对读取大量数据的配置单元进行查询，我知道作业设置了从 MFS 读取数据的映射器的数量。每个数据块都被映射到内存中。为什么我需要增加 Xmx ，不能将数据拆分为更多映射器？假设我有 1000 个映射器的工作，并且我遇到了 HEAP 空间问题，不能蜂巢给我 2000 个映射器，它会解决问题（每个映射将占用更少的 RAM，因为它使用更少的数据）？

谢谢！

# gwt - GWT，在 DockPanel 中将面板从东到西交换时出错，反之亦然？

> ID：16207366
> 
> 赞同：0
> 
> 时间：2013-04-25T05:55:39.097
> 
> 标签：gwt, dockpanel

此代码有错误

```
@Override
public void onClick(ClickEvent event) {
    // TODO Auto-generated method stub
    mainDockPanel.remove(panel1);
    mainDockPanel.remove(panel2);
    if(mainDockPanel.getWidgetDirection(panel1).equals(DockPanel.EAST)){
        mainDockPanel.add(panel1, DockPanel.WEST);
        mainDockPanel.add(panel2, DockPanel.EAST);
    }
    else if (mainDockPanel.getWidgetDirection(panel1).equals(DockPanel.WEST)){
        mainDockPanel.add(panel1, DockPanel.EAST);
        mainDockPanel.add(panel2, DockPanel.WEST);
    }
} 
```

这段代码有问题吗？

另外，还有其他更好的解决方案来交换 2 个面板吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:50:14.800

首先，您从 mainDockPanel 中删除了 panel1。然后你使用`if(mainDockPanel.getWidgetDirection(panel1).equals(DockPanel.EAST)){` From the API docs

> 小部件的布局方向，如果它不是此面板的子面板，则为 null

很有可能，您将获得 NPE

# multithreading - 来自非 Qt 线程的 QThread::getCurrentThread()

> ID：16207373
> 
> 赞同：10
> 
> 时间：2013-04-25T05:56:03.067
> 
> 标签：multithreading, qt

`QThread::getCurrentThread()`如果它被调用，我将从中得到什么`non-Qt thread`？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T08:36:48.320

`QThread`只是一个包装器，在幕后它使用本机线程。

`QThread::currentThread``Q(Adopted)Thread`如果实例尚不存在，则创建并初始化实例。

在 unix 的情况下，它使用`pthread`s。

```
#include <iostream>
#include <thread>
#include <pthread.h>

#include <QThread>
#include <QDebug>

void run() {
    QThread *thread = QThread::currentThread();

    qDebug() << thread;
    std::cout << QThread::currentThreadId() << std::endl;
    std::cout << std::this_thread::get_id() << std::endl;
    std::cout << pthread_self() << std::endl;

    thread->sleep(1);
    std::cout << "finished\n";
}

int main() {
    std::thread t1(run);
    t1.join();
} 
```

输出：

```
QThread(0x7fce51410fd0) 
0x10edb6000
0x10edb6000
0x10edb6000
finished 
```

我看到[有](https://qt.gitorious.org/qt/qtbase/blobs/stable/src/corelib/thread/qthread_unix.cpp#line229)Qt 应用程序主线程的初始化：

```
data->threadId = (Qt::HANDLE)pthread_self();
if (!QCoreApplicationPrivate::theMainThread)
    QCoreApplicationPrivate::theMainThread = data->thread; 
```

所以可能会有一些副作用。

我建议不要将 QThread 与非 Qt 线程混合使用。

# ios - PSTCollectionview 不适合我？

> ID：16207374
> 
> 赞同：0
> 
> 时间：2013-04-25T05:56:04.090
> 
> 标签：ios, objective-c, collectionview, pstcollectionview

我有一个故事板项目，我添加了 PSTCollectionview 类和所有文件。然后我在“PSUICollectionviewcontroller_”中为我的视图控制器“allbooks.h,.m”创建了一个类，但我无法在我的视图控制器上添加这个类???请

**GMMAllBooksGrid.h**

```
#import <UIKit/UIKit.h>

@interface GMMAllBooksGrid : PSUICollectionViewController
@end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T06:10:54.823

您可以像使用**UICollectionView**一样使用**PSTCollectionView**。我将发布我的代码可能会对您有所帮助。

**集合视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "PSTCollectionView.h"

@interface CollectionViewController : UIViewController <PSUICollectionViewDataSource,PSUICollectionViewDelegate,PSUICollectionViewDelegateFlowLayout>

@property(nonatomic,retain) PSUICollectionView *collectionView;
@end 
```

**集合视图控制器.m**

```
-(void)loadView
{
[super loadView];
self.view.backgroundColor = [UIColor whiteColor];
PSUICollectionViewFlowLayout *layout = [[PSUICollectionViewFlowLayout alloc] init];

// Configure layout attributes globally
layout.itemSize = CGSizeMake(150, 150);

self.collectionView = [[[PSUICollectionView alloc] initWithFrame:CGRectMake(0, 0, CGRectGetWidth(self.view.bounds), CGRectGetHeight(self.view.bounds)) collectionViewLayout:layout]autorelease];
[self.collectionView setDelegate:self];
[self.collectionView setDataSource:self];
[self.collectionView setAutoresizingMask:UIViewAutoresizingFlexibleHeight |UIViewAutoresizingFlexibleWidth| UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin];
[self.collectionView setBackgroundColor:[UIColor clearColor]];

// Register Cell and supplimentary views
[self.collectionView registerClass:[PSUICollectionViewCell class] forCellWithReuseIdentifier:CELL_ID];

[self.view addSubview:_collectionView];
} 
```

# email - 将 Content-Transfer-Encoding: base64 用于文本和 html 电子邮件会出现任何问题吗？

> ID：16207375
> 
> 赞同：11
> 
> 时间：2013-04-25T05:56:07.657
> 
> 标签：email, smtp, base64

我正在做一个电子邮件项目。由于我不会在此处详细介绍的原因，在客户环境中对长电子邮件消息进行引用可打印编码是有问题的。

对我们发送的 SMTP 电子邮件的 HTML 和文本部分进行 base64 编码似乎是一个可行的选择。在测试它时，它似乎在几个测试客户端（如 Gmail）中工作得很好。

但是我想知道这是否会在不同的电子邮件客户端中出现任何问题。从阅读 RFC 规范来看，base64 似乎是文本部分的兼容编码，但对于文本和 html 部分来说，这已经足够不寻常了，我想知道是否会有任何潜在的问题需要考虑。

看起来有问题的可能性：

*   也许一些较旧或不太健壮的客户端不希望在文本或 HTML 电子邮件部分中使用 base64，并且无法对其进行编码
*   也许某些电子邮件客户端会根据原始内容进行预览或搜索，因此收件人会看到 base64 而不是实际内容
*   也许 base64 会对可传递性/垃圾邮件评分产生负面影响？

有人有经验可以分享吗？这似乎是一个很好的解决方案，但我想确保我没有遗漏任何东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-01T14:37:20.603

这很难回答——是的，`quoted-printable`更频繁地使用它只是因为它浪费的字节更少（在主要是 ASCII 文本上），并且因为邮件正文部分的原始文本类似于解码后的输出（在主要是 ASCII 文本上）。但是，没有任何内容禁止`base64`用于文本消息部分。

这几乎是一个悬而未决的问题——你永远无法确定某个地方的 MUA 没有被彻底破坏到没有显示任何东西的程度。里面有很多“也许”，你是对的——但问题是你永远不会知道。如果它能让你睡得更好，以下公司都在我收到的营销垃圾邮件中使用 base64 编码的 HTML：

*   梅拉诺克斯
*   阿尔扎.cz
*   奥克罗.cz
*   现代物理学杂志

任何可以显示嵌入图像的 MUA 都必须包含 base64 解码器。绝对有可能 MUA 可能会明确拒绝使用该代码进行解码`text/plain`，`text/html`但在这种情况下，无论如何你都被搞砸了。

有趣的是，其中一家公司很乐意在多字节字符内的字节边界打破 UTF-8 编码主题，并将文本的两半编码为单独的编码字（此处为 RFC2047 术语）。

# iis - 更新 IIS 网络配置

> ID：16207376
> 
> 赞同：0
> 
> 时间：2013-04-25T05:56:09.443
> 
> 标签：iis, web-config

我创建了一个 C# 项目。现在我想借助 key 和 value 在 web.config 文件中保存一个 IP 地址。

```
<add key="ip" value="xxxx.xxx.x.xxx" /> 
```

现在我可以借助键名读取值，也可以更新键的值。它在 localhost 中成功运行。

但是如果我将文件放在 IIS 中，我可以读取值但不能更新键值。像这样的错误显示在 Mozilla Firebug 中。错误如下

> NetworkError：500 内部服务器错误
> 
> 访问路径 \u0027C:\inetpub\wwwroot\Order1\v1y5ay43.tmp\u0027 被拒绝。

我卡在这里。我谷歌它但没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T07:32:10.147

你不能那样做。

Web 应用程序无法修改它自己的配置文件。这是您绝对不应规避的安全措施。

其他选项：将值存储在会话状态中。还是在缓存中？还是在全局静态哈希表中？

通常客户端特定的东西应该存储在会话状态中（如果你启用了它）。

请记住，您可能同时拥有多个客户，因此您需要跟踪这一点。

注意：为什么要存储 IP？它是所有代码隐藏类都可以使用的属性 - 那么为什么要存储它呢？

# java - 无法解析/无法解析为类型

> ID：16207377
> 
> 赞同：1
> 
> 时间：2013-04-25T05:56:11.310
> 
> 标签：java, android, google-maps, google-maps-android-api-2

我收到错误，例如无法解析为类型。我是java的初学者，我正在尝试开发一个android应用程序。我在收到无法解决类型错误的地方放了一个推荐标志。

```
 package com.example.majorproject;

       import com.vogella.android.locationapi.maps.R;

       import android.os.Bundle;
       import android.app.Activity;
       import android.view.Menu;

       public class MajorProject extends Activity {
   static final //LatLng HAMBURG = new //LatLng(53.558, 9.927);
   static final //LatLng KIEL = new //LatLng(53.551, 9.993);
   private //GoogleMap map;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    //map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
        .getMap();

    if (//map!==null){
      //Marker hamburg = map.addMarker(new //MarkerOptions().position(//HAMBURG)
          .title("Hamburg"));
      //Marker kiel = map.addMarker(new MarkerOptions()
          .position(//KIEL)
          .title("Kiel")
          .snippet("Kiel is cool")
          .icon(//BitmapDescriptorFactory
              .fromResource(R.drawable.ic_launcher)));
    }

  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T09:27:25.903

如果你在`MapFragment`and上遇到错误`Marker`，那么你引用`google-play-services`库的方式有问题。看看我写的这篇博文，前 3 个步骤将向您解释如何正确地做到这一点：

[谷歌地图 API V2](https://blog-emildesign.rhcloud.com/?p=435)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T21:07:40.787

如果您在 Eclipse 中引用 google-play-service 时遇到问题，请将 Google Play 服务库和您的项目放在同一个工作区中。它有效....并且不要忘记添加支持库。

# android - Android SQLite 泄露错误

> ID：16207378
> 
> 赞同：-1
> 
> 时间：2013-04-25T05:56:18.163
> 
> 标签：android, database, sqlite

我在应用程序中设置了数据库连接，但 LogCat 不断告诉我 SQLite 泄漏

```
04-25 11:22:23.771: W/SQLiteConnectionPool(9484): A SQLiteConnection object for database '+data+data+com_appstart+databases+database' was leaked!  Please fix your application to end transactions in progress properly and to close the database when it is no longer needed. 
```

我开始怀疑这是否取决于我如何使用数据库适配器。我附上了我的代码......这是我的代码，有时我发现并出错......

```
try{

    DBAdapter dba = new DBAdapter(this);
    dba.open();

    Cursor c = dba.getModules(Constant.LANGUAGE_ID);

    for (int i = 0; i < c.getCount(); i++) {
        if (i > 2) {

            a.add(c.getString(2));
            moduleid.add(c.getString(0));
            icon_name.add(c.getString(1));

            System.out.println(c.getString(2) + "------" + c.getString(0));

        }
        c.moveToNext();
    }

    c.close();
    dba.close();
}catch(Exception e){
    e.printStackTrace();
} 
```

这是我的 DBAdapter 类，它包含 Open() 和 Close() 方法。

```
public DBAdapter open() throws SQLException {
    db = DBHelper.getWritableDatabase();
    return this;
}
public void close() {
    DBHelper.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:01:45.197

您的问题是，`"Close"`一旦完成数据库操作，您就必须访问数据库。因此，无论您打开数据库，请关闭您的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:01:13.380

在 DBAdapter 类中，在关闭函数中从 db.close() 替换 DBHelper.close()；

```
public void close() {
    DBHelper.close();
} 
```

替换为以下内容；

```
public void close() {
    db.close();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:23:25.867

您使用的是什么 DBAdapter 类？我不知道它在做什么，所以我不知道它是否正确。您应该检查错误消息所指的 SQLiteConnection 对象的获取位置，并确保 SQLiteConnection 是 close()d。

您只是偶尔还是一直收到错误？这可能不是您观察到的主要问题，但是当 close() 之前出现异常时，您的代码也无法调用 close()。无论异常路径如何，您都应该通过使用 try/finally 块保护它来确保调用 close()：

```
dba.open();
try {
  Cursor c = ...;
  try {
    ...
  } finally {
    c.close();
  }
} finally {
  dba.close();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-26T04:15:13.337

```
public DBAdapter open() throws SQLException {
    db = DBHelper.getWritableDatabase();
//You should close the opened database
DBhelper.close
    return this; 
```

光标打开后也是如此，它需要关闭。

# jquery - CSS Outset/Inset、边框和轮廓

> ID：16207380
> 
> 赞同：9
> 
> 时间：2013-04-25T05:56:19.453
> 
> 标签：jquery, html, css

之间的确切区别是什么`CSS outset,inset,border and outline`。
真的很困惑，什么属性可以一起应用。？
哪些浏览器支持上述哪些属性？
上述属性的简短示例会很好。

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-25T06:40:00.227

## 边框和轮廓差异

**边框：**边框*边缘*围绕框边框。[它的面积](http://www.w3.org/TR/CSS2/box.html#box-border-area)计算盒子模型的总大小。您可以为四个可能的边框（上、右、下和左）中的每一个指定大小 ( `border-width`)、颜色 ( `border-color`) 和样式 ( )。[您可以在此处](http://www.w3.org/TR/CSS2/box.html#border-properties)`border-style`检索有关边框属性的更多信息。

**轮廓：**类似于边框，但在这种情况下不占用空间，与`border`. 此外，您不能单独设置每个边框的样式，轮廓样式适用于框的所有四个边。`Outline`可以和 一起使用`border`。您可以应用于大纲的属性是，`outline-color`您可以[在此处](http://www.w3.org/TR/CSS2/ui.html#dynamic-outlines) 获取有关大纲属性的更多信息。`outline-style``outline-width`

这是一个盒子模型，表示`outline`和`border` ![在此处输入图像描述](https://i.stack.imgur.com/Q6J6n.png)

## 边框样式：插图和开头

**插图：**这是一个**[边框样式](http://www.w3.org/TR/CSS2/box.html#border-style)**。边框使框看起来好像嵌入在画布中。您可以`border-style`在`border-color`和中使用它`border-width`。

![插入边框不同的浏览器](https://i.stack.imgur.com/k70A7.jpg)

**一开始：**另一种**[边框样式](http://www.w3.org/TR/CSS2/box.html#border-style)**。'inset' 的反义词：边框使框看起来好像从画布中出来。您可以`border-style`在`border-color`和中使用它`border-width`。

![不同浏览器的初始边框](https://i.stack.imgur.com/bw5xh.jpg)

## 文档和来源

*   [浏览器如何呈现不同的 CSS 边框样式值？](http://www.impressivewebs.com/comparison-css-border-style/)
*   [W3C Box 型号规范](http://www.w3.org/TR/CSS2/box.html)
*   [W3C 边界规范](http://www.w3.org/TR/CSS2/box.html#border-properties)
*   [W3C 大纲规范](http://www.w3.org/TR/CSS2/ui.html#dynamic-outlines)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:01:29.220

这些是边界的属性

插图：定义一个 3D 插图边框。效果取决于边框颜色值 开始：定义 3D 开始边框。效果取决于边框颜色值轮廓：设置元素周围的轮廓

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-31T13:01:12.327

第一个答案是很好的答案。希望我们在两个月前开始使用 html-dom 时发现了这个。

只是想补充一下：这里最大的区别是，`border`没有`offset`属性（不影响元素放置的“边框”的“填充”）并且`outline`不能用`-radius`属性进行圆形。

# java - 什么是“覆盖等效”，它与@Override 有什么关系？

> ID：16207386
> 
> 赞同：20
> 
> 时间：2013-04-25T05:57:00.150
> 
> 标签：java, annotations, overriding, language-design, method-signature

阅读注释的[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Override.html)，`@Override`我遇到了以下规则：

> 如果使用此注解类型对方法进行注解，则编译器需要生成错误消息，除非至少满足以下条件之一：
> 
> *   该方法确实覆盖或实现了在超类型中声明的方法。
> *   **该方法的签名与 Object 中声明的任何公共方法的签名等效。**

第一点我很清楚，但我不确定第二点。

“覆盖等效”是什么意思？公共方法`Object`在这方面的特殊性如何？为什么这不包括在第一个标准中？

此外，这仅适用于 Java 7+ 文档。[Java 6 文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Override.html)没有说任何关于覆盖等效的内容。为什么改变？

* * *

## 更新：

在进一步查阅 JLS（[第 8.4.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.2)）后，我发现了以下关于覆盖等效的解释：

> `m1`如果满足以下任一*条件*，方法的签名是方法签名的子签名`m2`：
> 
> *   `m2`具有与 相同的签名`m1`，或
> *   的签名与 的签名`m1`的擦除（[§4.6](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.6)）相同`m2`。
> 
> **两个方法签名`m1`并且`m2`是*覆盖等效的*当且仅当`m1`是 的子签名`m2`或`m2`的子签名`m1`。**

据我所知，这回答了第一个问题（“这是什么意思？”）和第三个问题（“为什么第一个条件不涵盖这个？”）。

如果我理解正确（如果我没有正确理解，请通知我！），只有一种情况是两种方法是等效的，并且*不*属于原始问题的第一个条件。当子类方法的签名的*擦除*与超类方法的签名相同时就是这种情况，但反之则不然。

那么，原始问题的第二个条件只会在我们尝试“覆盖”`Object`类的公共方法时尝试添加类型参数时发挥作用。我尝试了以下简单示例来测试它，使用未使用的类型参数：

```
public class Foo {
    @Override
    public <T> boolean equals(Object obj) {
        return true;
    }
} 
```

当然，这个类不会编译，因为该方法*实际上*并没有覆盖该`equals`方法，因此会与它发生冲突。但我仍然收到使用`@Override`注释的编译器错误。假设这个例子符合第二个使用条件，我错了`@Override`吗？或者编译器是否会产生此错误*，尽管不需要这样做*？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-03T21:38:25.913

The reason for this is to allow you to use the `@Override` annotation in interfaces, which do not inherit from `Object` but implicitly declare all public methods from `Object` (see [JLS section 9.2 interface members](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.2)). You are thus allowed to declare an interface like:

```
interface Bar { @Override int hashCode(); } 
```

However, you would not be allowed to declare the following interface:

```
interface Quux { @Override Object clone(); } 
```

since the `clone()` method is not implicitly declared in an interface (it is not `public`).

This is described in [JLS section 9.6.3.4 @Override](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.6.3.4) (the Javadoc for `@Override` still refers to an old section number)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-28T06:43:33.110

您的问题基本上是一个设计问题，JLS 解释了它：

> “子签名的概念旨在表达两个方法之间的关系，它们的签名不相同，但其中一个可以覆盖另一个。具体来说，它允许签名不使用泛型类型的方法覆盖该方法的任何泛型版本. 这很重要，以便库设计者可以独立于定义库的子类或子接口的客户端自由地生成方法。

您的代码不是一个有效的示例，请参阅下面的代码：

```
public class SubSignatureTest extends SignatureTest {

    @Override
    public List test(Collection p) {
        return null;
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

    }

}

class SignatureTest {

    public <T> List<T> test(Collection<T> t) {
        return null;

    }
} 
```

重点是擦除后超类和子类的签名应该相同。

编辑：当我们谈论覆盖等效时，父类应该有泛型方法，子类应该有非泛型方法。这是一个解释这一点的示例。下面的代码将不起作用，因为子类具有通用方法。暂时让我们假设 java 允许，然后 main 方法中的调用将始终失败：

```
class A{
       public int compareTo(Object o){
               return 0;
       }
}

class B extends A implements Comparable<B>{
       public int compareTo(B b){
               return 0;
       }

       public static void main(String[] argv){
               System.out.println(new B().compareTo(new Object()));
       }
} 
```

在B类方法编译后会是这样的：

```
public int compareTo(Object x){
    return compareTo((B)x);
  } 
```

这意味着这总是错误：`new B().compareTo(new Object())`. 因此，如果父类具有非泛型方法，java 将不允许子类具有泛型方法。所以你不能为对象类定义重写等价方法。

希望澄清。

我使用帖子[http://lists.seas.upenn.edu/pipermail/types-list/2006/001091.html](http://lists.seas.upenn.edu/pipermail/types-list/2006/001091.html)作为参考，它有更多的细节。

# ios - iOS [RevMobAds startSessionWithAppID:] 崩溃

> ID：16207388
> 
> 赞同：0
> 
> 时间：2013-04-25T05:57:13.350
> 
> 标签：ios, revmobads

我正在尝试将 RevMobAds 集成到我的 iOS 应用程序中。它在第一行就崩溃了，

```
[RevMobAds startSessionWithAppID:@"myAppID"]; 
```

如何解决这个问题？我按照此处给出的说明进行操作：http: [//sdk.revmob.com/ios.html](http://sdk.revmob.com/ios.html)。我正在使用 SDK 5.6.0。请告诉我。以下是崩溃日志。

```
* thread #1: tid = 0x1f03, 0x029c109f libobjc.A.dylib`objc_msgSend + 19, stop reason = EXC_BAD_ACCESS (code=2, address=0x0)
frame #0: 0x029c109f libobjc.A.dylib`objc_msgSend + 19
frame #1: 0x029acb2e libobjc.A.dylib`objc_setProperty_non_gc + 62
frame #2: 0x029acd0d libobjc.A.dylib`objc_setProperty + 47
frame #3: 0x0016cbb6 MyApp`-[RevMobHttpClient setOnSuccess:] + 63 at RevMobHttpClient.h:9
frame #4: 0x0016c621 MyApp`-[RevMobHttpClient post:toUrl:onSuccess:onFailure:] + 56 at RevMobHttpClient.m:112
frame #5: 0x0016be43 MyApp`+[RevMobHttpClient post:toUrl:onSuccess:onFailure:] + 195 at RevMobHttpClient.m:45
frame #6: 0x001645d4 MyApp`-[RevMobSessionStarter start] + 203 at RevMobSessionStarter.m:42
frame #7: 0x00161bfb MyApp`+[RevMobSessionManager startSessionWithAppID:delegate:testingMode:sdkName:sdkVersion:] + 467 at RevMobSessionManager.m:145
frame #8: 0x0015ce99 MyApp`+[RevMobAds startSessionWithAppID:delegate:testingMode:sdkName:sdkVersion:] + 145 at RevMobAds.m:111
frame #9: 0x0015cf08 MyApp`+[RevMobAds startSessionWithAppID:] + 75 at RevMobAds.m:126
frame #10: 0x00002b5f MyApp`-[MyAppAppDelegate application:didFinishLaunchingWithOptions:] + 111 at MyAppAppDelegate.m:26
frame #11: 0x00b3f7b7 UIKit`-[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 266
frame #12: 0x00b3fda7 UIKit`-[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1248
frame #13: 0x00b40fab UIKit`-[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 805
frame #14: 0x00b52315 UIKit`-[UIApplication handleEvent:withNewEvent:] + 1022
frame #15: 0x00b5324b UIKit`-[UIApplication sendEvent:] + 85
frame #16: 0x00b44cf8 UIKit`_UIApplicationHandleEvent + 9874
frame #17: 0x02eb8df9 GraphicsServices`_PurpleEventCallback + 339
frame #18: 0x02eb8ad0 GraphicsServices`PurpleEventCallback + 46
frame #19: 0x02efdbf5 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
frame #20: 0x02efd962 CoreFoundation`__CFRunLoopDoSource1 + 146
frame #21: 0x02f2ebb6 CoreFoundation`__CFRunLoopRun + 2118
frame #22: 0x02f2df44 CoreFoundation`CFRunLoopRunSpecific + 276
frame #23: 0x02f2de1b CoreFoundation`CFRunLoopRunInMode + 123
frame #24: 0x00b407da UIKit`-[UIApplication _run] + 774
frame #25: 0x00b4265c UIKit`UIApplicationMain + 1211
frame #26: 0x00002abd MyApp`main + 125 at main.m:14 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:32:03.037

我不确定确切的问题。我尝试集成 SDK 的项目是在旧版本的 SDK 中创建的。我在新的 Xcode 中创建了新项目，集成了 SDK，它运行良好。谢谢大家。

# google-maps - IE8、谷歌地图 v3、“第 24 行堆栈溢出”main.js

> ID：16207395
> 
> 赞同：0
> 
> 时间：2013-04-25T05:58:07.837
> 
> 标签：google-maps

在只有三个引脚的地图上，我在 Google Maps v3 的 main.js 中仅在 IE8 上收到“Stack overflow at line: 24”。其他主流浏览器都不错。

按 F12 进入 IE8 调试器让我可以单步执行代码，但最终会出现一个缩小的混乱状态，并带有一长串匿名函数的堆栈跟踪。堆栈溢出发生在映射完全初始化后。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:58:07.837

如果将空值传递给 LatLng 构造函数，IE8 会不高兴：

```
pos = '';
pos = pos.split(",");
latlng = new google.maps.LatLng(pos[0],pos[1]); 
```

# c - C: 如何指向 calloc 数组？

> ID：16207399
> 
> 赞同：1
> 
> 时间：2013-04-25T05:58:11.733
> 
> 标签：c, memory-management, calloc

我试图指向一个 calloc 数组的指针。出于某种原因，当我到达第二个元素时，程序强制退出。第一个元素打印出来并且工作正常。这是我的代码示例，它只是试图通过第二个指针打印出所有元素：

```
integerArray = (int*)calloc(totalNum, sizeof(int));

if(integerArray == NULL)
{
    printf("ERROR! Number entered is invalid.");
    exit(1);
}

collectNumbers(totalNum, integerArray);

arrayAscending = &integerArray;
arrayDescending = &integerArray;

for(i = 0; i < totalNum; i++)
{
    printf("%3d", **(arrayAscending + i));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:00:34.837

问题在这里：

```
printf("%3d", **(arrayAscending + i)); 
```

您正在递增指向指针的指针。

根据我在这里看到的代码，它应该是以下内容：

```
printf("%3d", *((*arrayAscending) + i))); 
```

首先，您应该取消引用`arrayAscending`以获取指针`integerArray`值，并且只有在您不想使用索引时才增加它。

你也可以这样写：

```
printf("%3d",(*ayyarAscending)[i]); 
```

但实际上更简单的只是使用索引：

```
printf("%3d", integerArray[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:03:41.410

```
arrayAscending = &integerArray;   // these point to the int*, they don't get the value...
arrayDescending = &integerArray;

for(i = 0; i < totalNum; i++)
{
    printf("%3d", integerArray[i]);  // FIXED
} 
```

# angularjs - 如何设置 angularjs 选择以使用对象

> ID：16207400
> 
> 赞同：3
> 
> 时间：2013-04-25T05:58:18.087
> 
> 标签：angularjs

代码：

```
<select ng-model="ticket.owner.id" 
        ng-options="user.id as getFullName(user) for user in users" required>
</select> 
```

上面的例子确实有效。但是，当我将修改后的对象发送到我的 rest api 时，对象的唯一更改值是 ID。Eg when option 1 is selected and I select option2 and submit, the object associated to option1 is send, but with the ID of option2.

当我有：

```
<select ng-model="ticket.owner" 
        ng-options="user as getFullName(user) for user in users" required>
</select> 
```

并更改选择的值并提交，正确的对象被传输到rest api。但是选择框已损坏，它显示一个空字段并且不设置所选值。

我们可以使用选择框来选择对象而不只是 ID 的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T06:43:23.887

不确定您的实现`getFullName()`以及实际发送到其余服务的内容。

[http://plnkr.co/edit/U7WIe4CvPUQFJFE4NtB6?p=preview](http://plnkr.co/edit/U7WIe4CvPUQFJFE4NtB6?p=preview)

您可以在此示例中看到，它是数组中由选择框选择`ticket.owner`的对象之一。`users`并且选择框显示全名`users`。

这是你想要的吗？

# jsp - 在 GUI 上显示 csv 文件

> ID：16207404
> 
> 赞同：0
> 
> 时间：2013-04-25T05:58:34.837
> 
> 标签：jsp, struts2, jboss

平台：JBOSS 5.x,Struts2,JSP 我在 gui 上显示一个 csv 文件。要做到这一点 1\. 首先我调用 TestAction 类的 showFileData 函数。2\. showFileData 函数将控制权转发给'Test.jsp' 类。我成功地能够在 gui 上显示 csv 文件。但是如果行之间有空格，那么我无法在 gui 上显示空格。

测试动作.java

```
package cdot.oss.cmsat.importMap.struts;

import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Map;
import org.apache.struts.util.LabelValueBean;
import com.opensymphony.xwork2.ActionContext;

public class TestAction 
{
public String showFileData() throws Exception 
{       
    Map session = (Map)ActionContext.getContext().getSession();

    String filePath=System.getProperty("jboss.server.home.dir")+File.separator+"x.csv";
    System.out.println("[][]filePath:*"+filePath);

    File drs = new File(filePath);
    ArrayList<String> fileRecords=new ArrayList();
    ArrayList<LabelValueBean> Recordnum=new ArrayList();

    try{

        if(drs.isFile())
        {
        FileInputStream fstream = new FileInputStream(filePath);

        BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
        String strLine;
        int lines = 1;
        /*br.readLine() shall first line of file, and it shall assigned to strLine variable
         * first 10 lines of file shall be added to fileRecords arrayList*/
        //System.out.println("[][] br.readLine() "+br.readLine());
        while ((strLine = br.readLine()) != null)   
        {
            System.out.println("[][] strLine:"+strLine+":"+" length "+strLine.length());
            fileRecords.add(strLine);
            Recordnum.add(new LabelValueBean(Integer.toString(lines),Integer.toString(lines)));
            if(lines==10)
            {
                break;
            }
            lines++;
        }

        br.close();
        in.close();
        fstream.close();
        session.put("RecordNum",Recordnum);

        }
        else
            fileRecords.add("Not a valid file");
    }

    catch(Exception e){
        System.out.println("[][]exception");
        fileRecords.add("Not a valid file");

    }
    System.out.println("[][] fileRecords.size() "+fileRecords.size()+" fileRecords "+fileRecords);
    session.put("FileRecords",fileRecords);
    return "ForwardToJsp";
}

} 
```

测试.jsp

```
<html>
<head>
<%@ taglib prefix="s" uri="/struts-tags" %>
<s:head />
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<s:head />

<title>Test</title>
    </head>
    <body>
    <center>
    <br>
    <br></br>
    <div style="width: 1200px;height: auto;border: 2px solid steelblue">
    <s:form name="Test" enctype="multipart/form-data">
    <br></br>
    <s:if test="%{#session.FileRecords}">
    <table border="0" cellpadding="5" cellspacing="5" width="80%" class="input-table" >
    <tr>
    <td align="center">
    <b> First ten rows of file are :  </b>
    <br></br>
    </td>
    </tr>
    <tr>
    <td align="left">
    <div style="width: 950px;height: 100px;background-color: #FFFFFF;border: 1px solid steelblue;overflow: auto;">
    <dl>
    <s:iterator value="#session.FileRecords">
    <dt class="C_normal"><s:property/></dt>
    </s:iterator>
    </dl>
    </div>
    </td>
    </tr>
    </table>
    <br/>
    <br></br>
    </s:if>
    </s:form>
    </div>
    </center>
    </body>
    </html> 
```

例如。x.csv

```
a,b,c,d

e,f,g,h

i,j,k,l

m,n,o,p

q,r,s,t

u,v,w,x

y,z,ab,cd 
```

和上面的文件一样，行之间有空格，但是在 gui 上它们没有显示？我怎样才能准确地向 gui 显示前 10 行？

# javascript - 有没有办法用 AngularJS 创建自定义动画事件

> ID：16207406
> 
> 赞同：2
> 
> 时间：2013-04-25T05:58:43.213
> 
> 标签：javascript, angularjs, angularjs-directive

有没有办法用 angularJS 创建自定义动画事件。我正在尝试创建自己的事件来自己触发事件。我想做以下

```
<div ng-animate="{myEvent: 'my-custom-event-handler'}"></div> 
```

任何人都知道这是否可行，如果可以，您是否有指向小提琴的链接？一个例子会很有帮助。我猜如果可以做到这一点，它必须使用 JavaScript 动画而不是常规的 CSS3 过渡动画来完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T00:07:54.673

与[http://yearofmoo.com 交谈](http://yearofmoo.com)，他们说这是计划但尚未发布[http://www.yearofmoo.com/2013/04/animation-in-angularjs.html#comment-875480820](http://www.yearofmoo.com/2013/04/animation-in-angularjs.html#comment-875480820)所以我猜答案是它即将到来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-17T03:21:32.100

这现在在主分支中，现在应该在 1.1.5 中的任何一天:) [https://github.com/angular/angular.js/commit/c53d4c94300c97dd005f9a0cbdbfa387294b9026](https://github.com/angular/angular.js/commit/c53d4c94300c97dd005f9a0cbdbfa387294b9026)

# mysql - MySQL 驱动程序类型详细信息

> ID：16207407
> 
> 赞同：0
> 
> 时间：2013-04-25T05:58:46.743
> 
> 标签：mysql, jdbc

我使用 MySQL 作为我的后端，只是想知道 MySQL 属于 Java 中的哪种驱动程序类型，我对类型 3 和类型 4 驱动程序感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:14:11.247

MySQL 驱动程序是类型 4。您可以在[文档](http://dev.mysql.com/doc/refman/5.6/en/connector-j-overview.html)中找到它：

> MySQL Connector/J 是 JDBC Type 4 驱动程序。

我想知道您为什么要问这个：通常，知道驱动程序类型并不重要，尤其是想知道类型 3 有点奇怪，因为它们相对罕见，如果您使用的是类型 3，您会知道因为它需要一个单独的服务器/中间件实例来实际连接到数据库。另请参阅[关于 Type 3 的维基百科 JDBC 驱动程序条目](http://en.wikipedia.org/wiki/JDBC_driver#Type_3_Driver_-_Network-Protocol_Driver.28MiddleWare_Driver.29)。

# jquery - 使用 jQuery 和 CSS3 扩展下拉框菜单

> ID：16207409
> 
> 赞同：0
> 
> 时间：2013-04-25T05:58:49.237
> 
> 标签：jquery, html, css

我已经在我的项目网站中实现了“向下滑动框菜单”。但是我无法将此菜单扩展到更多子菜单。我是 jQuery 的新手。我试图扩展它，但每次它失败:(

这是我下载菜单的演示。

[滑下框演示](http://tympanus.net/Tutorials/SlideDownBoxMenu/)

所以我正在寻求你的帮助，在此先感谢。:)

```
<div class="sdt_box">
<a href="#">Job Board Website</a>
      <ul><li> submenu item1 </li>
          <li> submenu item1 </li>
          <li> submenu item1 </li>
     </ul>
<a href="#">Shopping Cart</a>
<a href="#">Interactive Maps</a> 
```

# java - 如何在 Spring Integration 中从消息有效负载中获取对象值

> ID：16207410
> 
> 赞同：1
> 
> 时间：2013-04-25T05:58:51.870
> 
> 标签：java, spring, spring-integration

如下所示，我已经配置了拆分器，输入通道中的值将是 spring 集成的通用消息

通用消息

```
Map<String,Object> payload;
    values are   
      serviceRequest=Some Object
      messageBusmessages= Some Object 

MessageHeaders headers; 
```

现在我的要求就像我想从按键映射的有效负载中获取价值，并将一个放在 messagebus.channel 中，另一个放在 servicebody.channel 中

```
<int:splitter input-channel="outChannel"
    output-channel="messagebus.channel">
</int:splitter>

<int:splitter input-channel="outChannel"
    output-channel="servicebody.channel">
</int:splitter> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:11:26.220

使用表达式，我们可以从有效负载映射中获取对象并按照以下选项的要求放入通道中，这对我有用。

```
<int:splitter input-channel="outChannel" expression="payload.get('messagebusMesssages')"
    output-channel="message.channel">
</int:splitter>

<int:splitter input-channel="outChannel" expression="payload.get('serviceRequest')"
    output-channel="servicebody.channel">
</int:splitter>

<int:service-activator input-channel="servicebody.channel"
    ref="SITestAction" method="action" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:25:30.607

您可以将 a`<publish-subscribe-channel/>`与 2 个订阅者一起使用，这些订阅者是`<transformer/>`带有适当表达式的 s...

```
<int:publish-subscribe-channel id="outChannel"/>

<int:transformer input-channel="outChannel" outputChannel="messagebus.channel"
    expression="payload.['foo']"/>

<int:transformer input-channel="outChannel" outputChannel="servicebody.channel"
    expression="payload.['bar']"/> 
```

这将连续处理；如果您希望它们并行运行，请`task-executor`在`<publish-subscribe-channel/>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:39:04.707

我认为您不需要拆分，我认为您需要基于内容的路由。如果可以，请在消息的传入标头中添加一些内容，并使用开箱即用的 spring 集成 header-value-router。

```
<header-value-router input-channel="routingChannel" header-name="testHeader">
  <mapping value="serviceRequest" channel="messagebus.channel" />
  <mapping value="messageBusmessages" channel="servicebody.channel" />
</header-value-router> 
```

如果这不适合您的需要。看看下面的链接，看看 Spring Integration 为路由提供的所有选项。

[http://static.springsource.org/spring-integration/docs/2.0.0.RELEASE/reference/html/messaging-routing-chapter.html](http://static.springsource.org/spring-integration/docs/2.0.0.RELEASE/reference/html/messaging-routing-chapter.html)

# c# - VS 2010 的水晶报表

> ID：16207412
> 
> 赞同：1
> 
> 时间：2013-04-25T05:58:55.330
> 
> 标签：c#, sql, database, crystal-reports-2010

我想在我的项目中使用 Crystal Reports。我想加入两个或三个表并将它们呈现在我的报告中。

例如：我有一个`information`表，其中包含具有 ID 的人员的信息，以及一个`post`包含每个人的工资值的表，其中包含一`id`列。我想加入这两个表并在一个报告页面中显示它们。我的报告应该有这些列：

```
ID (the id of person)
name (from information table)
wage (wage of this person form post table) 
```

我该怎么做？我发现我应该使用“视图”并且我在我的数据库中创建了一个“视图”并将其添加到我的数据集中但我不知道我应该继续做什么？有什么好的建议吗？

# php - MySQL 与 PHP 的远程连接

> ID：16207414
> 
> 赞同：0
> 
> 时间：2013-04-25T05:59:00.620
> 
> 标签：php, mysql, remote-access

我是新手，`MySQL`并且正在`PHP`使用 5.0 版本的 php。我的要求是连接到`MySQL`位于另一台服务器（www.some-domain.com）上的数据库。我的`PHP`文件位于我的本地系统中。

我有`remote server database`凭据。如何将这些详细信息配置到`PHP`文件中？

到目前为止，这是我的代码：

```
mysql_connect("remote server ip", "root", "root123") or die (mysql_error ());
// Select database
mysql_select_db("resource") or die(mysql_error());
// SQL query
$strSQL = "SELECT * FROM resource WHERE resource_type=11";
// Execute the query (the recordset $rs contains the result)
$rs = mysql_query($strSQL); 
```

> 当我使用上面的代码得到以下错误时：
> 
> 用户 'root'@'%' 拒绝访问数据库 'resource'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:03:34.950

要连接到另一台服务器中的 mysql 数据库，您需要获取该特定服务器上数据库的主机、用户名和密码。喜欢，

```
mysql_connect('server_host', 'server_db_username', 'server_db_password');
mysql_select_db('server_db_name'); 
```

你的代码是正确的。您只需要使用服务器凭据进行连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:13:31.333

作为一种常见的安全措施，MySQL 服务器访问规则中可能不允许远程连接。我建议您联系服务器支持团队以获取更多详细信息。

另外，我建议阅读[**这篇**](https://stackoverflow.com/questions/6239131/how-to-grant-remote-access-permissions-to-mysql-server-for-user)文章。

# ruby-on-rails - Rails ActiveRecord - 更新多态 id

> ID：16207417
> 
> 赞同：0
> 
> 时间：2013-04-25T05:59:10.607
> 
> 标签：ruby-on-rails, ruby, activerecord, associations, polymorphic-associations

我有一个应用程序，其中包含三个模型。我有非常相似的潜在客户和客户（但差异很大，以至于他们保证了自己的模型）。然后我有一个名为“Interactions”的多态模型，它有一个interactionable_id 和一个interactionable_type（当然，它可以是'customer' 或'lead'）。

我最近尝试构建一种方法，将交互从潜在客户迁移到客户（当潜在客户升级为客户时）。

我想保持我的代码精简，并且为了保持我的方法简单，我决定简单地更新交互的属性，以便interactionable_id 和interactionable_type 将分别更改为客户的id 和“客户”。

我尝试了许多不同的方法来做到这一点，唯一可以更新的是interactionable_type。无论我尝试什么，interactionable_id 都不会改变。我尝试输入一个静态数字（而不是 customer.id）。我尝试了 update_attributes 并尝试单独更新属性然后保存它。此外，我确实在 attr_accessible 列表中有 :interactionable_id。

我之所以能做到这一点，是因为我决定以稍微不同的方式解决这个问题，但是我找不到任何答案来说明为什么会发生这种情况。

我只是想知道是否有人知道为什么会这样。对多态关联 ID 是否有某种锁定？为什么我不能更改关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:12:33.313

这应该工作

```
interaction.interactionable = customer
interaction.save 
```

# css - CSS3动画在本地不起作用

> ID：16207420
> 
> 赞同：0
> 
> 时间：2013-04-25T05:59:19.673
> 
> 标签：css

嗨，我正在尝试在本地和 jsfiddle 上复制此代码。除动画外，一切正常。有人可以指出这里缺少什么以便动画也能正常工作吗？

原文： [http ://codepen.io/pixelgrid/pen/suflz](http://codepen.io/pixelgrid/pen/suflz)

jsfiddle [http://jsfiddle.net/FeZq9/](http://jsfiddle.net/FeZq9/)

我相信它与动画属性有关

```
@keyframes round{ 100%{ transform:rotate( 360deg ); } }
animation:round 9s linear infinite; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:05:27.637

尝试使用其他浏览器，如 Firefox 或 Oopera

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:25:35.903

检查这个没有错，只需为所有动画属性添加浏览器前缀。codepen 自己做。

[http://jsfiddle.net/FeZq9/1/](http://jsfiddle.net/FeZq9/1/)

```
.cloud {
transform-origin:50% 400px;
  -webkit-transform-origin:50% 400px;
  -moz-transform-origin:50% 400px;
  -o-transform-origin:50% 400px;
  animation:round 7s linear infinite;
    -webkit-animation:round 7s linear infinite;
    -moz-animation:round 7s linear infinite;
    -o-animation:round 7s linear infinite;
}

@-webkit-keyframes round {
100%{ -webkit-transform:rotate( 360deg ); }
}

 @-moz-keyframes round { 
100%{ -moz-transform:rotate( 360deg ); }
}

 @-o-keyframes round { 

100%{ -o-transform:rotate( 360deg ); }
}
 @keyframes round { 
100%{ transform:rotate( 360deg ); }
} 
```

# javascript - 我可以在不导航的情况下更改地址栏中的文本吗？

> ID：16207422
> 
> 赞同：6
> 
> 时间：2013-04-25T05:59:34.980
> 
> 标签：javascript, html, iframe

我已经为客户端创建了一个搜索页面，但在这种情况下，实际的搜索页面位于 an 中`iframe`，并且向用户呈现了一个围绕 said 的装饰性外壳`iframe`，它将其 URL 参数传递给`iframe`，然后解释它们并执行搜索. 这是我无法改变的。它还向我提出了一个独特的问题，即如果用户在搜索页面的搜索栏中键入以执行另一个搜索，iframe 会刷新但 shell 页面不会。这意味着该 URL 现在不再与当前搜索相关。**如何在不离开这个 shell 页面的情况下更改地址栏中的 URL？**这个系统的全部意义在于减少等待`iframe`刷新而不是整个页面，所以刷新整个页面会适得其反。

## 完整的解决方案

* * *

对于只需要代码片段的任何人，这是我对 Ian 解决方案的最终实现：

```
<?PHP
// ...
function buildTitleChanger($search) {
    ?>

    window.top.history.pushState({search : "<?PHP echo str_replace("\"", "\\\"", $search); ?>"}, document.title, window.location.search);
    window.top.document.title = document.title;<?PHP
}
// ...
?> 
```

内联 PHP 有点脏，但它在 100% 的时间里都能正常工作：3

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T06:01:03.093

您可以使用类似的内容更改 URL 的一部分`window.pushState`。看看MDN的解释：

[https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

浏览器兼容性：[http ://caniuse.com/history](http://caniuse.com/history)

history.js 是一个很好的库，它包含了这些特性并在不支持它的浏览器中提供了类似的功能：http: [//balupton.github.io/history.js/demo/](http://balupton.github.io/history.js/demo/)

来自 MDN 链接的示例：

**例子**

假设`http://mozilla.org/foo.html`执行以下 JavaScript：

```
var stateObj = { foo: "bar" };
history.pushState(stateObj, "page 2", "bar.html"); 
```

这将导致 URL 栏显示`http://mozilla.org/bar.html`，但不会导致浏览器加载`bar.html`甚至检查是否`bar.html`存在。

现在假设用户现在导航到`http://google.com`，然后单击返回。此时，URL 栏将显示`http://mozilla.org/bar.html`，页面将获得一个`popstate`事件，其状态对象包含 的副本`stateObj`。页面本身看起来像，尽管页面可能会在事件`foo.html`期间修改其内容。`popstate`

如果我们再次单击返回，URL 将变为`http://mozilla.org/foo.html`，并且文档将获得另一个`popstate`事件，这次是一个空状态对象。在这里，返回也不会改变上一步中的文档内容，尽管文档可能会在接收到`popstate`事件后手动更新其内容。

# web-services - 我能够成功编写 javax.jws.WebService。但是我不知道如何在 java 中为相同的 Web 服务客户端编写

> ID：16207424
> 
> 赞同：0
> 
> 时间：2013-04-25T05:59:47.443
> 
> 标签：web-services, spring, jaxb, webservice-client

我已经用成功创建了 WSDL 的 java 编写了 Webservice。我被困在用 java 为我的 web 服务编写 web 服务客户端。我想从一些 jsp 类中使用我的 web 服务。我该怎么做？

```
@WebService
public interface AddService {
    double getMultipicationResult(double M1, double M2);
}

 @WebService(endpointInterface = "com.sample.AddService")
    public class AddServiceImpl implements AddService {
        public AddServiceImpl() {
        }
        @Override
        public double getMultipicationResult(double M1, double M2) {
            M1 = M1*M2;
            return M1;
        }
    } 
```

我给客户写了类似的东西：-

```
public class AddServiceClient {
    private AddServiceClient() {
    }
    public static void main(String args[]){
    {
        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(new String[] {"SpringClientWebServices.xml"});
        AddService  client = (AddService)context.getBean("client");
        double response = 0.0;
        response = client.getMultipicationResult(10.0, 20.5);
    }
} 
```

和 SpringClientWebServices.xml 如下：-

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/jdbc
        http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd      
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <bean id="client" class="com.sample.AddService" 
          factory-bean="clientFactory" factory-method="create"/>

    <bean id="clientFactory" class="org.apache.cxf.jaxws.JaxWsProxyFactoryBean">
        <property name="serviceClass" value="com.sample.AddService"/>
        <property name="address" value="http://localhost:8080/sample/services/Addition"/>
    </bean>

</beans> 
```

我收到如下异常：-

```
Exception in thread "main" org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.apache.cxf.jaxws.JaxWsProxyFactoryBean] for bean with name 'clientFactory' defined in class path resource [SpringClientWebServices.xml]; nested exception is java.lang.ClassNotFoundException: org.apache.cxf.jaxws.JaxWsProxyFactoryBean 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:51:38.737

首先，从 ClassNotFoundException 中可以明显看出，您缺少 CXF 罐子。请包括 cxf 罐子。

其次，关于在 JSP 中使用该服务，您必须首先通过 web.xml 而不是通过 main 方法初始化 Spring 容器。使用 Spring MVC 并实现控制器，该控制器调用 web 服务并向 JSP 提供数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:54:07.413

如果您想直接从 JSP 使用服务，请考虑使用上述的 JavaScript 客户端：http: [//cxf.apache.org/docs/javascript-client-samples.html](http://cxf.apache.org/docs/javascript-client-samples.html)

我更喜欢使用一个包含服务接口的 jar，并在一个单独的 jar 中使用 CXF 和 Spring 创建一个动态 Spring 客户端，然后引入这两个依赖项。这也记录在 CXF 站点中。

# java - 编译错误：找不到符号：In、StdIn 和 StdOut

> ID：16207427
> 
> 赞同：17
> 
> 时间：2013-04-25T06:00:17.233
> 
> 标签：java

代码来自 [http://algs4.cs.princeton.edu/11model/BinarySearch.java.html](http://algs4.cs.princeton.edu/11model/BinarySearch.java.html)算法教科书。

```
import java.util.Arrays;

public class BinarySearch {

    // precondition: array a[] is sorted
    public static int rank(int key, int[] a) {
        int lo = 0;
        int hi = a.length - 1;
        while (lo <= hi) {
            // Key is in a[lo..hi] or not present.
            int mid = lo + (hi - lo) / 2;
            if      (key < a[mid]) hi = mid - 1;
            else if (key > a[mid]) lo = mid + 1;
            else return mid;
        }
        return -1;
    }

    public static void main(String[] args) {
        int[] whitelist = In.readInts(args[0]);

        Arrays.sort(whitelist);

        // read key; print if not in whitelist
        while (!StdIn.isEmpty()) {
            int key = StdIn.readInt();
            if (rank(key, whitelist) == -1)
                StdOut.println(key);
        }
    }
} 
```

我收到这个错误

```
$ javac BinarySearch.java 
BinarySearch.java:44: cannot find symbol
symbol  : variable In
location: class BinarySearch
        int[] whitelist = In.readInts(args[0]);
                          ^
BinarySearch.java:49: cannot find symbol
symbol  : variable StdIn
location: class BinarySearch
        while (!StdIn.isEmpty()) {
                ^
BinarySearch.java:50: cannot find symbol
symbol  : variable StdIn
location: class BinarySearch
            int key = StdIn.readInt();
                      ^
BinarySearch.java:52: cannot find symbol
symbol  : variable StdOut
location: class BinarySearch
                StdOut.println(key);
                ^
4 errors 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-25T06:02:44.650

Classes `StdIn`，`StdOut`并且`In`不是标准 Java 库的一部分。它们是与普林斯顿课程一起提供的支持课程。

从源代码中链接的[1.1 Programming Model页面：](http://algs4.cs.princeton.edu/11model/)

> 标准输入和标准输出。[`StdIn.java`](https://introcs.cs.princeton.edu/java/stdlib/javadoc/StdIn.html)并且[`StdOut.java`](https://introcs.cs.princeton.edu/java/stdlib/javadoc/StdOut.html)是用于从标准输入读取数字和文本并将数字和文本打印到标准输出的库。我们的版本比相应的 Java 版本具有更简单的界面（并提供了一些技术改进）。
> 
> ...
> 
> [`In.java`](http://algs4.cs.princeton.edu/11model/In.java.html)并且[`Out.java`](http://algs4.cs.princeton.edu/11model/Out.java.html)是面向对象的版本，支持多个输入和输出流，包括从文件或 URL 读取和写入文件。

因此，如果您想按原样使用二进制搜索代码，则需要下载这些文件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-09-05T01:43:19.310

如果您已经设置了课程推荐的环境，只需将此行添加到您的 java 文件中

```
import edu.princeton.cs.algs4.StdIn;
import edu.princeton.cs.algs4.StdOut; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-25T06:06:54.593

你可以用

**输出：**

```
 System.out.println(key); 
```

**输入**

```
BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
String Key= null;
try {
     Key = reader.readLine();
} catch (IOException e) {
   e.printStackTrace();
} 
```

他们正在使用自定义库将值打印到控制台（大概）您可以将输出重定向到控制台。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-02T22:02:05.023

StdIn 和 In 是包含在 algs4 类下载中的自定义库。使用命令 java-algs4 而不仅仅是 java 执行程序，它应该可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-26T04:13:10.533

我正在尝试使用`StdIn`并`StdOut`包含[`stdlib.jar`](https://introcs.cs.princeton.edu/java/stdlib/)在我的项目中，并且它已正确放置在类路径中，但我无法通过添加使其工作：

*   导入 edu.princeton.cs.algs4.StdIn；
*   导入 edu.princeton.cs.algs4.StdOut；

在我自己的java文件中。

我在[这里](https://stackoverflow.com/questions/2320092/how-to-use-jar-files-without-package-information)找到解决方案。我刚刚删除了我的 java 文件中的包信息，并且没有任何我可以使用的导入信息`StdIn`，`StdOut`因为我的所有 java 文件和`StdIn`,`StdOut`都在默认包中。

顺便说一句，在现实世界的生产就绪项目中这样做是一种不好的做法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-13T08:27:57.330

`stdlib.jar`最好放在文件夹中，`src`以便于查找路径。如果您使用任何 IDE，请添加库的类路径。

如果您遇到`stdlib`默认库的问题，请使用这些命令编译和运行代码。

**编译**

```
javac -cp .;<YOUR\PATH\OF\THE\LIB\stdlib.jar> yourProgram.java 
```

**跑**

```
java -cp .;<YOUR\PATH\OF\THE\LIB\stdlib.jar> yourProgram <arguments> 
```

如果您遵循我的建议，那么路径将只是`stdlib.jar`或更有条理`lib\stdlib.jar`。

参考链接：[https ://introcs.cs.princeton.edu/java/stdlib/](https://introcs.cs.princeton.edu/java/stdlib/)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-04-25T06:08:36.287

您应该使用`System.in`and`System.out`而不是`StdIn`and `StdOut`。通过以下方式
创建一个包装系统输入流： 它有一个方法 amd 来检查它是否为空，你必须捕获.`ObjectInputStream`
`ObjectInputStream ois = new ObjectInputStream(System.in);`
`readInt``EOFException`

# ios - 错误：数据库被锁定在 sqlite

> ID：16207433
> 
> 赞同：0
> 
> 时间：2013-04-25T06:00:31.867
> 
> 标签：ios, objective-c

//这里创建数据库

```
 -(void) createDataBase
   {
           docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0];

            fullPath = [docPath stringByAppendingPathComponent:@"Recording.sqlite"];
           sqlite3_open([fullPath UTF8String], &dbForEmf);
    }

    // create table

    -(void) createTable
    {    
            if (sqlite3_open([fullPath UTF8String], &dbForE) == SQLITE_OK)
            {
                    const char* createQuery = "CREATE TABLE IF NOT EXISTS EEE(E_ID INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL, E_NAME TEXT,E_READING TEXT,E_DATE TEXT,E_SIZE TEXT,E_LABLE TEXT)";

                    int errorCode = sqlite3_prepare(dbForE, createQuery, -1, &prepareStmt, NULL);

                    if (errorCode == 0) {
                        sqlite3_step(prepareStmt);

                    }
                    else
                    {

                    }
                    sqlite3_finalize(prepareStmt);
                    sqlite3_close(dbForE);
            }
          else
           {
               NSLog(@"data base not Open");
           }
        }
    // insert data here

        -(void) insertData
        {
            if (sqlite3_open([fullPath UTF8String], &dbForE)==SQLITE_OK)
            {    
                NSString *insertSql = [NSString stringWithFormat:@"INSERT INTO EEE(E_NAME,E_READING,E_DATE,E_SIZE,E_LABLE) VALUES('%@','%@','%@','%@','%@')",_referenceObject.lastFilePath,_referenceObject.fileString,_referenceObject.dateString,_referenceObject.fileSizeString,_referenceObject.titleOfButtonString];               
                const char *insert_stmt=[insertSql UTF8String];

                sqlite3_prepare_v2(dbForE,insert_stmt,-1,&prepareStmt,NULL);
                sqlite3_reset(prepareStmt);
                if (sqlite3_step(prepareStmt)==SQLITE_DONE)
                {
                    NSLog(@"inserted the values in table");

                }
                else
                {
                    NSLog(@" not inserted the values in table");
                    NSLog(@"error: %s", sqlite3_errmsg(dbForE));
                }
                sqlite3_finalize(prepareStmt);
                sqlite3_close(dbForE);
            }

        } 
```

当我转到第二个 viewController 并返回到第一个 viewController 时，hai 数据会插入到第一个 viewController 上，数据未插入错误显示数据库已锁定...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:19:04.957

检查您是否在第二个 ViewController 或其他任何地方打开了数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:57:00.213

在 createDataBase 中，您已经打开了数据库并且它没有关闭，您再次尝试打开它，因此您的数据库首先被锁定，您应该在 createdatabase 函数中关闭数据库。

# java - 用于匹配以模式开头且不以模式结尾的字符串的正则表达式

> ID：16207434
> 
> 赞同：0
> 
> 时间：2013-04-25T06:00:32.720
> 
> 标签：java, regex, negative-lookahead

给定一个 url，我必须匹配该 url 以特定域开头而不以特定模式结尾。
例如，
给定一个 url 列表，我想匹配一个以`"http://www.google.com/"`or开头`"http://www.facebook.com/"` 且不以`".jpg"`and结尾`".bmp"`的url`".png"`

我尝试了类似的东西

```
^(http://www\.google\.com/|http://www\.facebook\.com/).*(\.(?!png)|(?!bmp)|(?!jpg))$ 
```

但这似乎不起作用..有什么错误吗？或者任何替代方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:06:13.300

`(?!png)$`一般来说，类似的东西毫无意义；它的意思是“一个*不*跟在后面的位置`png`，并且在字符串*的*末尾”，但是当然字符串的结尾永远不会跟在后面`png`，所以`(?!png)$`相当于 just `$`。（你明白我的意思吗？）

幸运的是，Java 正则表达式支持零宽度*后向断言*，因此您可以编写：

```
^http://www\.(google|facebook)\.com.*(?<!\.(png|bmp|jpg))$ 
```

where`(?<!...)`表示“*前面*没有”的位置`...`。（请参阅[Javadoc 了解`java.util.regex.Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html).）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T06:08:26.723

这个正则表达式应该工作：

```
^https?:\/\/(?:www\.)?(?:google|facebook)\.com\/(?!.*?\.(?:jpe?g|png|bmp|gif)$).*$ 
```

### 现场演示：[http ://www.rubular.com/r/V0X6ve1iUT](http://www.rubular.com/r/V0X6ve1iUT)

### Java 演示：http: [//ideone.com/TlCyTG](http://ideone.com/TlCyTG)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:06:04.420

试试这是你想要的确切要求

```
^(http://www\.google\.com/|http://www\.facebook\.com/)(?!.*?\.(?:jpe?g|png|bmp|gif)$).*$ 
```

# java - 如何将 jsp 文本框值转换为 java 类文件？

> ID：16207437
> 
> 赞同：0
> 
> 时间：2013-04-25T06:00:40.013
> 
> 标签：java, jsp, file-upload

您好，我使用 jsp 文件，我在 jsp 文件中编写以下代码。

```
 <aui:form name="fm" method="POST" action="<%= updateTestiURL.toString() %>"  
  enctype="multipart/form-data">
  <aui:input name="subject" label="Subject"/>
  <aui:input type="file" name="fileName"/> 
```

使用这个我可以用我的java文件成功上传文件。但是当我尝试获取文本框值时，它返回 null。我在java中编写以下代码来获取文本框。

```
 subject=(String)actionRequest.getParameter("subject"); 
```

如果我删除以下

```
 enctype="multipart/form-data" 
```

从jsp文件然后我可以得到文本框的值，但另一个问题生成。我不能上传文件。请告诉我如何获得两者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:03:00.897

当`enctype`is`multipart/form-data`时，需要将请求解析为多部分请求。有几个库可用于该任务，例如[Commons File Upload](http://commons.apache.org/proper/commons-fileupload/)

# c++ - 将迭代器传递给函数

> ID：16207439
> 
> 赞同：0
> 
> 时间：2013-04-25T06:00:58.647
> 
> 标签：c++

我想将指针向量的迭代器传递给函数。我不知道如何通过它。

这是正确的做法吗：

```
main() {
    vector<MyObject*>::iterator it;

    for (it = added.begin(); it < added.end(); it++) {    
    string value = DoSomething(it)    
    }  
}
    string DoSomething(MyObject* a)
    {    
    if (a->isValid())
        Str = "0";
    ..
    ..   
    return str;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T06:02:39.740

该行：

```
string value = DoSomething(it) 
```

应该：

```
string value = DoSomething(*it); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T06:08:23.263

> 我想将指针向量的迭代器传递给函数。

```
string value = DoSomething(it); 
```

您正在尝试正确传递它，但该函数未编写为使用迭代器：

```
string DoSomething(MyObject* a) 
```

这个函数需要一个指针......你可以给它：

```
string value = DoSomething(*it); 
```

或者你可以改变你的 DoSomething 功能：

```
string DoSomething(vector<MyObject*>::iterator i)
{
     if ((*i)->isvalid())
         ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:14:25.500

如果你真的想将迭代器传递给函数，它的参数也应该是一个迭代器：

```
#include <string>
#include <iostream>
#include <vector>

using namespace std;

string DoSomething(vector<string*>::iterator a) {
    string* entry = *a;
    cout << *entry << endl;
    return "blah";
}

int main() {
    vector<string*> added;
    string v1 = "v1";
    string v2 = "v2";

    added.push_back(&v1);
    added.push_back(&v2);

    vector<string*>::iterator it;

    for (it = added.begin(); it < added.end(); it++) {    
        string value = DoSomething(it);
    }  
} 
```

[您可以在这里](http://ideone.com/1EzZlO)看到它的实际效果。

# php - php 替代 ip2long/long2ip

> ID：16207442
> 
> 赞同：1
> 
> 时间：2013-04-25T06:01:03.227
> 
> 标签：php, math, ip

我一直在尝试想出一种方法来使用 PHP 将 IP 地址存储为无符号整数，但我想我对它是如何提出正确功能的还不够熟悉。这是我想出的（错误的）：

```
// ip 2 unsigned int
function ip2int($ipaddress) {
    // turns IP into signed integer
    $signed = ip2long($ipaddress);
    $unsigned = sprintf("%u", $signed);
    return $unsigned;
    }

// unsigned int 2 ip
function int2ip($unsigned) {
    $signed = sprintf("%d", $unsigned);
    $ipaddress = long2ip($signed);
    return $ipaddress;
    } 
```

对于如何解决这个问题，有任何的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:02:41.297

long2ip 将整数转换为 IP 格式，ip2long 反之亦然 像这样使用

```
$long = ip2long($_SERVER['REMOTE_ADDR']);//or your ip
$ip   = long2ip($long); 
```

# android - Android XML字符串“等等”编码？

> ID：16207444
> 
> 赞同：3
> 
> 时间：2013-04-25T06:01:06.280
> 
> 标签：android, android-xml

这给了我一个错误：

```
<string name="txt_urbeautiful">What...</string>
Replace "..." with ellipsis character (…, &&;#8230;) 
```

那么如何在 XML 中编码“等等……”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T06:08:20.353

正如错误所说，您必须替换`...`为`&#8230;`：

```
<string name="txt_urbeautiful">What&#8230;</string> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:16:09.957

```
"&#xb7;" 
```

这将代表 .(dot ) in xml ，

XML 不使用 \ue*** 表示法。可以使用以 开头的字符引用，但大多数情况下不需要它们。XML 通常与 UTF-8 字符编码一起使用，因此每个字符都可以这样编写。

# java - NullPointerException 问题

> ID：16207445
> 
> 赞同：0
> 
> 时间：2013-04-25T06:01:06.530
> 
> 标签：java, exception

我正在尝试实现以下代码，并且遇到了静态引用非静态方法的问题。

```
public class App {
  public static void main (String args[]) { 
    int result = factorial(5);
    System.out.println(result);
  }

  private int factorial(int value) {

    if (value == 0) 
      return 1;
    int sum = value * factorial(value-1);
    return sum;

  } 
} 
```

运行上面的代码，我得到以下错误：

```
Error: Cannot make a static reference to the non-static method factorial() from the type App 
```

如果我从 main 方法中删除 static 关键字，我会得到一个 NullPointerException 错误堆栈：

```
java.lang.NullPointerException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at 
edu.rice.cs.drjava.model.compiler.JavacCompiler.runCommand(JavacCompiler.java:272) 
```

我不太确定如何解决这个问题，感谢任何帮助。

编辑：我在调用阶乘方法时忘记包含参数，现在已修复，抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:03:05.247

必须有一个现有的`static main`方法。它被寻找，当你找不到它时，这就是你收到的错误。

`factorial`您可以通过制作静态方法来解决您的特定问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:03:33.813

您正在调用`factorial`- 一个实例成员形成一个静态方法`main`，这就是错误出现的原因。您可以声明`factorial`为静态方法来解决此问题。

```
public class App {
    public static void main(String args[]) {
        int result = factorial(5); // you need to pass a int value here
        System.out.println(result);
    }

    private static int factorial(int value) {
        if (value == 0)
            return 1;
        return value * factorial(value - 1);

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:08:29.373

要从静态方法调用非静态方法，请创建一个包含非静态方法的类对象。根据定义，非静态方法只能在某个类的对象上调用，而静态方法可以在类本身上调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T07:25:47.777

`static`只需添加关键字，您的代码就可以正常工作。

```
private static int factorial(int value) { 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T06:09:09.523

如果您不希望您的方法成为一个方法`static`，或者您想从另一个类中调用它，这是另一种方法：

```
public class App {
    public static void main (String args[]) { 
        new App();
    }

    private int factorial(int value) {
        if (value == 0) 
            return 1;
        int sum = value * factorial(value-1);
        return sum;
    }

    public App(){
        int result = factorial(6);
        System.out.println(result);
    }
} 
```

你的方法`factorial(int value)`是参数化的，所以你应该`int`像我在上面的例子中传递的那样向它传递值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T06:03:53.130

您不能访问静态方法中的普通方法。

实例方法与类型的特定实例相关联，而静态方法与整体类型相关联

尝试

```
 private static int factorial(int value) { 
```

## ------------

```
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T06:03:58.350

正如错误清楚地表明，您不能在静态方法中访问非静态方法，为了使此代码正常工作，请更改您的`factorial`定义，如下所示：

```
private static int factorial(int value) {
  //remaining code
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-25T06:06:12.883

我刚刚测试了这个。我的编译器对这段代码不满意，直到我将调用更改为`factorial`与函数定义匹配：

```
int result = factorial(23); 
```

代替

```
int result = factorial(); 
```

还需要更改`factorial`to的函数声明：`static`

```
private int factorial(int value) { 
```

但它需要这两件事才能发挥作用。

# java - 在 SQL 查询中使用 SimpleDateFormat("MM/dd/yyyy").format

> ID：16207449
> 
> 赞同：0
> 
> 时间：2013-04-25T06:01:24.653
> 
> 标签：java, oracle10g, simpledateformat

是否可以在以下 SQL 查询中像这样使用 SimpleDateFormat？

```
SELECT empnumber WHERE compname = 'mycomp' ORDER BY new SimpleDateFormat("MM/dd/yyyy").format(genfield), emppnumber asc 
```

一位朋友曾经告诉我这是可能的，但我得到的只是一个错误：

ORA-00933: SQL 命令未正确结束

我为此使用了 Oracle SQL Developer，如果成功，最终会将其放入 Java 程序中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:07:52.237

您不能`SimpleDateFormat`在纯 SQL 中使用 Java。

您可以在 Java 程序中使用它并将查询字符串与`SimpleDateFormat.format()`结果连接起来，也可以只使用 Oracle sql 函数`TO_DATE()`

像这样：

```
SELECT empnumber WHERE compname = 'mycomp' ORDER BY TO_DATE(genfield, 'MM/dd/yyyy'), emppnumber asc; 
```

# c# - C# ref 是像 C/C++ 中的指针还是 C++ 中的引用？

> ID：16207455
> 
> 赞同：40
> 
> 时间：2013-04-25T06:01:48.780
> 
> 标签：c#, pointers, memory-management, reference, ref

我正在使用`ref`并且不清楚*“它是像 C/C++ 中的指针还是像 C++ 中的引用？”*

为什么我会问你一时想的那么弱的问题？因为，当我阅读 C#/.NET 书籍、msdn 或与 C# 开发人员交谈时，我对以下原因感到困惑：

*   C# 开发人员建议不要`ref`在函数的参数中使用，`e.g. ...(ref Type someObject)`对他们来说味道不好，他们建议`...(Type someObject)`，我真的不太清楚这个建议。我听到的原因：最好使用对象的副本，然后将其用作返回值，而不是通过引用等破坏内存......我经常听到关于数据库连接对象的此类解释。就我普通的 C/C++ 经验而言，我真的不明白为什么在 C# 中使用引用是一件坏事？我控制对象的生命及其内存分配/重新分配等...我在书籍和论坛中阅读的只是建议`it's bad, because you can corrupt your connection and cause a memory leak by a reference lose`，所以我控制对象的生命，我可以手动控制我真正想要的，那为什么不好？
*   现在阅读不同的书籍并与不同的人交谈，我不清楚是`ref`指针（`*`）还是C ++中的引用`&`？我记得 C/C++ 中的指针总是分配一个大小为`void*`4 字节的空间（有效大小取决于体系结构），其中托管结构或变量的地址。在 C++ 中，通过传递引用`&`没有来自堆/堆栈的新分配，并且您在内存空间中使用已经定义的对象，并且没有像普通 C 中那样为外部指针分配内存。那么`ref`C# 中的内容是什么？.NET VM 是否像普通 C/C++ 中的指针一样处理它，并`GC`为指针分配临时空间，或者它是否像 C++ 中的引用一样工作？做`ref`仅适用于正确的托管类型或值类型，例如`bool, int`最好切换`unsafe`代码并以非托管样式传递指针？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-25T06:20:12.307

在 C# 中，当您看到引用引用类型（即使用`class`而不是声明的类型`struct`）时，您基本上总是通过指针处理对象。在 C++ 中，默认情况下所有内容都是值类型，而在 C# 中，默认情况下所有内容都是引用类型。

当您在 C# 参数列表中说“ref”时，您真正说的更像是“指向指针的指针”。您是说，在方法中，您希望在调用您的方法的代码中替换不是对象的内容，而是对对象本身的引用。

除非这是您的意图，否则您应该直接传递引用类型；在 C# 中，传递引用类型很便宜（类似于在 C++ 中传递引用）。

学习/理解 C# 中值类型和引用类型之间的区别。它们是该语言中的一个主要概念，如果您尝试在 C# 领域考虑使用 C++ 对象模型，事情将会非常混乱。

以下是本质上语义等效的程序：

```
#include <iostream>

class AClass
{
    int anInteger;
public:
    AClass(int integer)
        : anInteger(integer)
    {  }

    int GetInteger() const
    {
        return anInteger;
    }

    void SetInteger(int toSet)
    {
        anInteger = toSet;
    }
};

struct StaticFunctions
{
    // C# doesn't have free functions, so I'll do similar in C++
    // Note that in real code you'd use a free function for this.

    static void FunctionTakingAReference(AClass *item)
    {
        item->SetInteger(4);
    }

    static void FunctionTakingAReferenceToAReference(AClass **item)
    {
        *item = new AClass(1729);
    }
};

int main()
{
    AClass* instanceOne = new AClass(6);
    StaticFunctions::FunctionTakingAReference(instanceOne);
    std::cout << instanceOne->GetInteger() << "\n";

    AClass* instanceTwo;
    StaticFunctions::FunctionTakingAReferenceToAReference(&instanceTwo);
    // Note that operator& behaves similar to the C# keyword "ref" at the call site.
    std::cout << instanceTwo->GetInteger() << "\n";

    // (Of course in real C++ you're using std::shared_ptr and std::unique_ptr instead,
    //  right? :) )
    delete instanceOne;
    delete instanceTwo;
} 
```

对于 C#：

```
using System;

internal class AClass
{
    public AClass(int integer)
        : Integer(integer)
    {  }

    int Integer { get; set; }
}

internal static class StaticFunctions
{
    public static void FunctionTakingAReference(AClass item)
    {
        item.Integer = 4;
    }

    public static void FunctionTakingAReferenceToAReference(ref AClass item)
    {
        item = new AClass(1729);
    }
}

public static class Program
{
    public static void main()
    {
        AClass instanceOne = new AClass(6);
        StaticFunctions.FunctionTakingAReference(instanceOne);
        Console.WriteLine(instanceOne.Integer);

        AClass instanceTwo  = new AClass(1234); // C# forces me to assign this before
                                                // it can be passed. Use "out" instead of
                                                // "ref" and that requirement goes away.
        StaticFunctions.FunctionTakingAReferenceToAReference(ref instanceTwo);
        Console.WriteLine(instanceTwo.Integer);
    }
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-25T09:16:35.703

C# 中的A`ref`等价于 C++ 引用：

*   他们的意图是通过引用
*   没有空引用
*   没有未初始化的引用
*   您不能重新绑定引用
*   当您拼写引用时，您实际上是在表示引用的变量

一些 C++ 代码：

```
void foo(int& x)
{
    x = 42;
}
// ...
int answer = 0;
foo(answer); 
```

等效的 C# 代码：

```
void foo(ref int x)
{
    x = 42;
}
// ...
int answer = 0;
foo(ref answer); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T06:27:23.083

C# 中的每个引用都是指向堆上对象的指针，作为 C++ 中的指针，C# 的 ref 与 C++ 中的 & 相同

应该避免使用 ref 的原因是，C# 的基本原理是方法不应该更改传入参数的对象，因为对于没有方法源的人可能不知道它是否会导致数据丢失。

```
String a = "  A  ";
String b = a.Trim(); 
```

在这种情况下，我相信 a 仍然完好无损。在数学中，变化应该被看作是一个视觉上告诉b在程序员同意的情况下在这里被改变的赋值。

```
a = a.Trim(); 
```

此代码将修改 a 本身并且编码器知道它。

除非是特殊情况，否则应避免通过分配 ref 来保留这种更改方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T06:56:05.993

C# 没有 C++ 指针的等价物并且适用于引用。`ref`增加了一层间接性。它使值类型参数成为引用，当与引用类型一起使用时，它使其成为对引用的引用。

简而言之，它允许在方法调用之外对值类型进行任何更改。对于引用类型，它允许将原始引用替换为完全不同的对象（而不仅仅是更改对象内容）。如果您想在方法中重新初始化对象，并且唯一的方法是重新创建它，则可以使用它。虽然我会尽量避免这种方法。

因此，回答您的问题`ref`就像 C++ 引用参考一样。

编辑

以上对于安全代码是正确的。指针确实存在于不安全的 C# 中，并且在一些非常特殊的情况下使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-06T00:21:24.053

这似乎是一场处置/事件的噩梦。如果我有一个为其注册事件的对象并通过引用将其传递给函数，然后重新分配该引用，则应调用 dispose 或分配内存，直到程序关闭。如果 dispose 被调用，所有注册到对象事件的东西都将不再被注册，并且它所注册的所有东西都将不再被注册。有人会如何保持这一点？我想如果你不发疯的话，你可以比较内存地址并尝试让事情恢复正常。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-08-05T06:24:52.243

在c#中，您可以在项目属性中检查运行不安全，然后您可以运行此代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Exercise_01
{
    public struct Coords
    {
        public int X;
        public int Y;
        public override string ToString() => $"({X}, {Y})";
    }
    class Program
    {

        static unsafe void Main(string[] args)
        {
            int n = 0;
            SumCallByRefPointer(1, 2, &n);
            Console.Clear();
            Console.WriteLine("call by refrence {0}",n);

            n = 0;
            SumCallByValue(3, 4, n);
            Console.WriteLine("call by Value {0}", n);

            n = 0;
            SumCallByRef(5, 6, ref n);
            Console.WriteLine("call by refrence {0}", n);

            Pointer();
            Console.ReadLine();
        } 

        private static unsafe void SumCallByRefPointer(int a, int b, int* c)
        {
            *c = a + b;
        }

        private static unsafe void SumCallByValue(int a, int b, int c)
        {
            c = a + b;
        } 

        private static unsafe void SumCallByRef(int a, int b, ref int c)
        {
            c = a + b;
        }

        public static void Pointer()
        {
            unsafe
            {
                Coords coords;
                Coords* p = &coords;
                p->X = 3;
                p->Y = 4;
                Console.WriteLine(p->ToString());  // output: (3, 4)
            }
        }
    }
} 
```

# android - 在 ViewFlipper 中显示大量视图

> ID：16207456
> 
> 赞同：1
> 
> 时间：2013-04-25T06:01:49.603
> 
> 标签：android, xml, layout, view

我有一个显示很多视图的 ViewFlipper。鳍状肢仅向一个方向“移动”，这意味着一旦视图被隐藏，它将永远不会再次显示。这就是我所说的移动到下一个视图的方法：

```
mViewFlipper.addView(myNewView);
mViewFlipper.showNext(); 
```

虽然这很好用，但我不确定它是否真的干净且内存友好。我需要删除以前的任何视图吗？或者我可以继续推新观点吗？

如果必须删除旧视图 - 我将在哪里执行此操作？使用某种回调，一旦视图被替换/隐藏就会触发？

编辑：这是完整的方法：

```
private void OnBtnNextPressed()
{
      mViewFlipper.addView(new TestView());
      mViewFlipper.showNext();
} 
```

# c++ - 函数调用上的 PyObject 段错误

> ID：16207457
> 
> 赞同：1
> 
> 时间：2013-04-25T06:01:49.710
> 
> 标签：c++, python-2.7, tkinter, python-c-api

我正在尝试使用 Python 打开一个对话框以接受对我的 C++ 应用程序的输入。

这是我正在尝试做的一个非常小的表示：

```
#include <iostream>
#include <Python.h>

int main()
{
    /* Begin Python Ititialization - only needs to be done once. */
    PyObject *ip_module_name = NULL;
    PyObject *ip_module = NULL;
    PyObject *ip_module_contents = NULL;
    PyObject *ip_module_getip_func = NULL;

    Py_Initialize();
    PyEval_InitThreads();

    ip_module_name     = PyString_FromString( "get_ip" );
    ip_module          = PyImport_Import( ip_module_name );
    ip_module_contents = PyModule_GetDict( ip_module );
    ip_module_getip_func = PyDict_GetItemString( ip_module_contents, "get_ip_address" );
    /* End Initialization */

    PyGILState_STATE state = PyGILState_Ensure();
    PyObject *result = PyObject_CallObject( ip_module_getip_func, NULL );

    if( result == Py_None )
        printf( "None\n" );
    else
        printf( "%s\n", PyString_AsString( result ) );

    PyGILState_Release( state );

    /* This is called when the progam exits. */
    Py_Finalize();
} 
```

但是，当我使用 PyObject_CallObject 调用该函数时，应用程序会出现段错误。我猜这是因为我使用的是 Tk 库。我尝试将我的应用程序与 _tkinter.lib、tk85.lib、tcl85.lib、tkstub85.lib、tclstub85.lib 链接，但这些都没有帮助。我好难过...

这是脚本：

```
import Tkinter as tk
from tkSimpleDialog import askstring
from tkMessageBox import showerror

def get_ip_address():

    root = tk.Tk()
    root.withdraw()

    ip = askstring( 'Server Address', 'Enter IP:' )

    if ip is None:
        return None

    ip = ip.strip()

    if ip is '':
        showerror( 'Error', 'Please enter a valid IP address' )
        return get_ip_address()

    if len(ip.split(".")) is not 4:
        showerror( 'Error', 'Please enter a valid IP address' )
        return get_ip_address()

    for octlet in ip.split("."):
        x = 0

        if octlet.isdigit():
            x = int(octlet)
        else:
            showerror( 'Error', 'Please enter a valid IP address' )
            return get_ip_address()

        if not ( x < 256 and x >= 0 ):
            showerror( 'Error', 'Please enter a valid IP address' )
            return get_ip_address()

    return ip 
```

编辑：添加了我的线程设置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:06:42.840

添加`PySys_SetArgv(argc, argv)`（与`int argc, char **argv`参数一起`main`），您的代码将起作用。

`tk.Tk()`accesses ，除非被调用`sys.argv`，否则它不存在。`PySys_SetArgv`这会导致一个异常，该异常通过返回传播`get_ip`并报告给 Python/C 。被存储并传递给，这是观察到的崩溃的直接原因。`PyObject_CallObject``NULL``NULL``result``PyString_AsString`

对代码的几点说明：

*   调试它花费了很多精力，因为代码不进行任何错误检查，它盲目地向前推进，直到由于传递 NULL 指针而崩溃。至少可以写如下内容：

    ```
    if (!ip_module_name) {
        PyErr_Print();
        exit(1);
    }
    // and so on for every PyObject* that you get from a Python API call 
    ```

    在实际代码中，您不会`exit()`，但会进行一些清理并返回`NULL`（或引发 C++ 级异常，或任何适当的）。

*   无需调用`PyGILState_Ensure`您已经知道持有 GIL 的线程。作为状态的[文档`PyEval_InitThreads`](http://docs.python.org/2/c-api/init.html#PyEval_InitThreads)，它初始化 GIL 并*获取*它。您只需要在从 C 回调调用 Python 时重新获取 GIL，该回调来自例如与 Python 无关的工具包事件循环。

*   从 Python 收到的新引用`Py_DECREF`一旦不再需要就需要被 'ed 。为简洁起见，最小示例中可能会省略引用计数，但应始终注意它。

# rvm - 安装rvm后没有.rvm目录

> ID：16207458
> 
> 赞同：1
> 
> 时间：2013-04-25T06:01:51.557
> 
> 标签：rvm

`~/.rvm`即使在我使用以下方式升级我的 RVM 版本后，我也没有文件：

```
bash -s stable < <(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer) 
```

此命令产生以下内容。如何确保`.rvm`已创建文件夹？

```
Upgrading the RVM installation in /opt/t/rvm/
chown: rvm: illegal group name
chown: rvm: illegal group name
    RVM PATH line found in /Users/ros/.bashrc /Users/roseperrone/.zshrc.
    RVM sourcing line found in /Users/ros/.bash_profile /Users/roseperrone/.zprofile.

Upgrade Notes:

  * No new notes to display.

# RVM:  Shell scripts enabling management of multiple ruby environments.
# RTFM: https://rvm.io/
# HELP: http://webchat.freenode.net/?channels=rvm (#rvm on irc.freenode.net)
# Cheatsheet: http://cheat.errtheblog.com/s/rvm
# Screencast: http://screencasts.org/episodes/how-to-use-rvm

# In case of any issues run 'rvm requirements' or read 'rvm notes'

Upgrade of RVM in /opt/t/rvm/ is complete. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:44:49.943

您没有`~/.rvm`，因为您将 rvm 安装到`/opt/t/rvm/`.

您可能只是忍受它并使用`/opt/t/rvm/`而不是`~/.rvm`. 或者完全删除 rvm 并进行新安装（然后默认为`~/.rvm`）。

# c# - 如何处理从 postback 到 preinit 事件的传输数据？

> ID：16207459
> 
> 赞同：0
> 
> 时间：2013-04-25T06:01:52.560
> 
> 标签：c#, asp.net, dynamic, postback, onpreinit

想象一个场景，其中我有两种形式，第一种是静态的，第二种是动态的。这些表格适用于学生预注册过程。

Form1 检查是否存在具有 ID（国民身份）的学生。如果“存在”，它将显示注册过程（例如，待处理、已接受等）。如果“不存在”，则表示第二个表格应该可见以供学生填写。第二种形式是完全动态的。所有字段等都是在 PreInit 中动态创建的。

除了 StudentID，我还必须传递一个 FormID。FormID 非常重要，因为还有其他的表单，动态表单也会基于它生成。

我的问题是如何将 StudentID (txtStudentID.Text) 传输到动态表单。我尝试了很多场景，但它们都不能正常工作，比如 ajax 面板、page1 和 page2 等。

如果您能给我一个实用的解决方案，我将不胜感激。

表格一：

```
//Request.QueryString["FormID"];
<asp:TextBox ID="txtStudentID" runat="server"></asp:TextBox><br />
<asp:Button ID="btnSubmit" runat="server" Text="Submit" OnClick="btnSubmit_Click" /> 
```

表格 2：

```
protected override void OnPreInit(EventArgs e)
{
        base.OnPreInit(e);
        CreateDynamicForm(StudentID);
    }
}
protected void CreateDynamicForm(Guid StudentID)
{
    //  codes for generating the dynamic form, based on the StudentID submited form Form1, and FormID
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:24:45.830

Init-fase 用于初始化您的页面。PreInit-fase 在 Init-fase 之前，并且在 PreInit 期间很多东西都没有被初始化，比如你的 MasterPage 和你的 Context。我的建议：很少使用 PreInit。

无论哪种情况，您都应该能够使用 HttpContext.Current.Request.Form。

此请求部分包含从客户端发送到服务器的所有数据。其中有一个名为“Form”的集合，其中包含用户输入的来自网络表单的所有数据。

此数据旨在用于填充页面上的所有控件，但填充这些控件发生在页面初始化之后，即在 OnInit 之后。

在页面生命周期的这一点上，您只能通过此 Form-collection 访问表单值，例如：

`string studentID = HttpContxt.Current.Request.Form["txtStudentID"];`

有一个陷阱。一些页面元素，如 MasterPage，可以修改其中的 ID。它们在内部控件的 ID 之前有自己的 ID。所以 ID“txtStudentID”可能变成：“ctl00$contents$txtStudentID”。（这意味着有一个 ID 为“ctl00”的外部控件，其中有一个名称为“contents”的控件，其中有一个控件“txtStudentID”。

# vbscript - Visual Basic 脚本 - 按键检测？

> ID：16207461
> 
> 赞同：4
> 
> 时间：2013-04-25T06:02:06.417
> 
> 标签：vbscript, keyboard, detection

一旦按下 F1 键，我想终止程序。不确定如何编写 do while 循环。有任何想法吗？

```
Set WshShell = WScript.CreateObject("WScript.Shell")
Do While {F1} is not pressed
'...
Loop 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:53:44.173

这在普通的 VBScript 中是不可能的，但你可以让它与[HTA](http://msdn.microsoft.com/en-us/library/ms536496)一起工作：

```
<head>
<title>Test</title>
<HTA:APPLICATION ID="oHTA"
  APPLICATIONNAME="Test"
>
</head>

<script language="VBScript">
Sub CheckKey
  If window.event.keyCode = 112 Then self.close()
End Sub
</script>

<body onKeyUp="CheckKey">
...
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-13T16:58:08.017

我使用混合 VBS 脚本，其中嵌入了一个使用 adodb.stream 的小型 C# 程序。

这个例子每一步都会更新剪贴板（例如登录），但可以很容易地修改它以触发其他事件。

可以去掉清理行，.exe可以放在temp目录下。

为简洁起见，hex_ 部分已被截断，但整个文件可在[http://excelxll.com/VBS/keypress.txt获得](http://excelxll.com/VBS/keypress.txt)

```
Dim wsh, exe, HexKeyCode
Set wsh = CreateObject("Wscript.Shell")
Set fso = CreateObject("Scripting.FileSystemObject")

HexKeyCode = "70" 'F1=70 F12=7B ALT-GR=A5 ESC=1B
exe = "Press F1 to step script until I disappear.exe"

if not fso.FileExists(exe) then call create_binary_file_

'EACH TIME F1 IS PRESSED UPDATE THE CLIPBOARD 
'############################################
wsh.Run "cmd.exe /c """ & exe  & """ " & HexKeyCode, 0, TRUE
wsh.Run "cmd.exe /c echo 1| clip", 0, TRUE

wsh.Run "cmd.exe /c """ & exe  & """ " & HexKeyCode, 0, TRUE
wsh.Run "cmd.exe /c echo 2| clip", 0, TRUE

'OPTIONAL TIDY-UP
'################
fso.DeleteFile exe

sub create_binary_file_()
'########################
hex_="4D5A90...0000"

'FOR THE BINARY FILE WRITE
'#########################
dim str
set str = WScript.CreateObject("adodb.stream") 
str.type = 2 
str.charset = "iso-8859-1" 
str.open

for x = 1 to len(hex_) step 2

high_ = asc(mid(hex_,x,1))
    if high_ < 58 then 
        high_ = (high_-48)*16
    else
        high_ = (high_-55)*16
    end if

low_ = asc(mid(hex_,x+1,1))
    if low_ < 58 then 
        low_ = (low_-48)
    else
        low_ = (low_-55)
    end if

str.writeText(chrW(high_ + low_))
next

str.saveToFile exe, 2 
str.close 

end sub 
```

# r - 打断粘贴（）中的数字序列

> ID：16207462
> 
> 赞同：1
> 
> 时间：2013-04-25T06:02:06.550
> 
> 标签：r

我想创建以下向量：

```
 [1] "x.0" "x.1" "x.3" "x.4" 
```

我知道向量**“x.0”“x.1”“x.2”“x.3”“x.4”**很容易产生

```
 paste("x", 0:4,sep=".") 
```

如何修改此代码以省略序列“0:4”中的 2？

可能有另一种解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T06:09:23.030

或者这样删除任何元素：

```
paste("x", (0:4)[-3], sep=".")
## [1] "x.0" "x.1" "x.3" "x.4" 
```

编辑：（*基于评论）*

```
## less ambiguous to include the actual element
paste("x", (0:4)[0:4 != 2], sep=".") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T06:03:18.310

只需像通常那样指定要粘贴的数字向量`c()`：

```
> paste("x", c(0, 1, 3:4),sep=".")
[1] "x.0" "x.1" "x.3" "x.4" 
```

# sql - SQL GROUP BY QUERY 未返回所需的输出

> ID：16207463
> 
> 赞同：2
> 
> 时间：2013-04-25T06:02:15.397
> 
> 标签：sql, oracle

这是我的表格和插入值：

```
create table student (

LastName      varchar(40),
  FirstName     varchar(40),
  SID           number(5),
  SSN           number(9),
  Career        varchar(4),
  Program       varchar(10),
  City          varchar(40),
  Started       number(4),

  primary key (SID),
  unique(SSN)
);
create table enrolled (
  StudentID     number(5),
  CourseID      number(4),
  Quarter       varchar(6),
  Year          number(4),

  primary key (StudentID, CourseID),
  foreign key (StudentID) references student(SID),
  foreign key (CourseID) references course(CID)
);
insert into student
    values ( 'Brennigan', 'Marcus', 90421, 987654321, 'UGRD', 'COMP-GPH', 'Evanston', 2001 );
insert into student
    values ( 'Patel', 'Deepa', 14662, null, 'GRD', 'COMP-SCI', 'Evanston', 2003 );
insert into student
    values ( 'Snowdon', 'Jonathan', 08871, 123123123, 'GRD', 'INFO-SYS', 'Springfield', 2005 );
insert into student
    values ( 'Starck', 'Jason', 19992, 789789789, 'UGRD', 'INFO-SYS', 'Springfield', 2003 );
insert into student
    values ( 'Johnson', 'Peter', 32105, 123456789, 'UGRD', 'COMP-SCI', 'Chicago', 2004 );
insert into student
    values ( 'Winter', 'Abigail', 11035, 111111111, 'GRD', 'PHD', 'Chicago', 2003 );
insert into student
    values ( 'Patel', 'Prakash', 75234, null, 'UGRD', 'COMP-SCI', 'Chicago', 2001 );
insert into student
    values ( 'Snowdon', 'Jennifer', 93321, 321321321, 'GRD', 'COMP-SCI', 'Springfield', 2004 );
insert into enrolled
    values (11035, 1020, 'Fall', 2005);
insert into enrolled
    values (11035, 1092, 'Fall', 2005);
insert into enrolled
    values (11035, 8772, 'Spring', 2006);
insert into enrolled
    values (75234, 3201, 'Winter', 2006);
insert into enrolled
    values (08871, 1092, 'Fall', 2005);
insert into enrolled
    values (90421, 8772, 'Spring', 2006);
insert into enrolled
    values (90421, 2987, 'Spring', 2006); 
```

我有以下查询：

```
SELECT e.studentid
FROM enrolled e 
FULL OUTER JOIN student s ON e.studentid = s.sid 
WHERE ((e.quarter = 'Fall') OR (e.quarter = 'Spring')) 
GROUP BY e.studentid 
HAVING count(e.studentid) = 1; 
```

但这只会返回

```
8871 
```

这应该返回

```
8871
90421 
```

此查询的目标是：列出在秋季学期注册了至少一门课程或在春季学期注册了至少一门课程的学生，但不能同时注册两者。您必须添加几行来测试您的查询。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:10:32.297

试试这个，

```
SELECT  a.SID
FROM    student a
        INNER JOIN enrolled b
            ON a.SID = b.StudentID
WHERE   b.quarter IN ('Fall', 'Spring')
GROUP   BY a.SID
HAVING  COUNT(DISTINCT b.quarter) = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T06:11:17.833

```
SELECT  e.studentid
FROM    enrolled e 
WHERE   e.quarter IN ('Spring', 'Fall')
GROUP BY
        e.studentid 
HAVING  COUNT(DISTINCT quarter) = 1; 
```

`90421`在春季期间参加了两门不同的课程，这就是为什么您的原始查询计算了两次。

您需要计算季节，而不是入学人数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:13:15.157

学生 ID 有两条记录 - 90421 因此计数将返回 2

# c# - 为什么在 WPF UI 线程中执行异步回调

> ID：16207467
> 
> 赞同：7
> 
> 时间：2013-04-25T06:02:27.233
> 
> 标签：c#, wpf, asynchronous

关于这段代码：

```
static async Task<string> testc()
{
    Console.WriteLine("helo async " + Thread.CurrentThread.ManagedThreadId); 
    await Task.Run(() => { 
        Thread.Sleep(1000);
        Console.WriteLine("task " + Thread.CurrentThread.ManagedThreadId); 
    });
    Console.WriteLine("callback "+Thread.CurrentThread.ManagedThreadId);
    return "bob";
}

static void Main(string[] args)
{
    Console.WriteLine("helo sync " + Thread.CurrentThread.ManagedThreadId);
    testc();
    Console.WriteLine("over" + Thread.CurrentThread.ManagedThreadId);
    Thread.Sleep(2000);
    Console.ReadLine();
} 
```

我得到以下输出：

```
helo sync 10
helo async 10
over10
task 11
callback **11** 
```

没关系：等待之后的一段代码在与任务本身相同的线程中执行。

现在，如果我在 WPF 应用程序中执行此操作：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    Console.WriteLine("helo sync " + Thread.CurrentThread.ManagedThreadId);
    testc();
    Console.WriteLine("over" + Thread.CurrentThread.ManagedThreadId);
    Thread.Sleep(2000);
    Console.ReadLine();
} 
```

它生成以下输出：

```
helo sync 8
helo async 8
over8
task 9
callback **8** 
```

我们可以看到在 UI 线程中执行 await 后的代码。好吧，这很棒，因为它可以操纵可观察的集合等……但我想知道“为什么？” “我怎么能做同样的事？” 这与某些 TaskScheduler 行为有关吗？这是在 .NET Framework 中硬编码的吗？

感谢您提交的任何想法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T06:17:00.603

原因是当从 UI 线程启动任务时，Task.Run 将捕获[`SynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)是否存在，因为它在 WPF 应用程序中。然后，任务将使用 将`SynchronizationContext`回调序列化到 UI 线程。但是，如果在控制台应用程序中没有可用的上下文，则回调将在不同的线程上发生。

[Stephen Toub 在一篇博客文章](http://blogs.msdn.com/b/pfxteam/archive/2012/01/20/10259049.aspx)中对此进行了描述。

顺便说一句，在任务中使用永远不要使用 Thread.Sleep~~时要小心。~~它可能会导致奇怪的行为，因为任务可能未绑定到一个线程。请改用 Task.Delay。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T06:13:09.050

> 但我想知道“为什么？”

你自己已经回答了：

> 嗯，这很棒，因为它可以操纵可观察的集合等......

异步的全部意义在于使异步更易于使用 - 因此您可以编写实际上是异步的“看起来同步”的代码。这通常包括希望整个异步方法都停留在一个上下文（例如 UI 线程）中——当您需要等待某事时，只需“暂停”该方法（不阻塞 UI 线程）。

> “我怎么能做同样的事？”

不清楚你在这里的意思。基本上，可等待模式的实现用于`Task`确定[`TaskScheduler.FromCurrentSynchronizationContext()`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext.aspx)在哪个调度程序上发布回调 - 除非您已调用[`ConfigureAwait(false)`](http://msdn.microsoft.com/en-gb/library/system.threading.tasks.task.configureawait.aspx)显式选择退出此行为。所以这就是它的管理方式......你是否可以“做同样的事情”取决于你想要做什么。

有关可等待模式的更多详细信息，请参阅[async/await FAQ](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/async-await-faq.aspx)中的“什么是可等待”问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T12:32:56.717

您可能会发现我的[`async`/`await`介绍](http://blog.stephencleary.com/2012/02/async-and-await.html)很有帮助。其他答案*几乎*是正确的。

当您尚未完成时，默认情况下会捕获一个“上下文”，用于在完成时恢复该`await`方法。这个“上下文”是*除非它是 null*，在这种情况下它是。`Task``Task``SynchronizationContext.Current` *`TaskScheduler.Current`*

 *请注意此操作所需的条件：

*   “当您`await`...” - 如果您手动安排继续，例如，使用`Task.ContinueWith`，则不会进行上下文捕获。您必须自己使用类似`(SynchronizationContext.Current == null ? TaskSchedler.Current : TaskScheduler.FromCurrentSynchronizationContext())`.
*   “... `await`a `Task`...” - 此行为是`await`types*行为`Task`的*一部分。其他类型可能会也可能不会进行类似的捕获。
*   “......尚未完成......” - 如果在`Task`它被编辑时已经完成`await`，该`async`方法将*同步*继续。所以在这种情况下不需要捕获上下文。
*   “...默认情况下...” - 这是默认行为，可以更改。特别是，调用方法`Task.ConfigureAwait`并传递参数。此方法返回一个等待类型（不是 a ），如果它的参数是 ，它将不会在捕获的上下文中继续。`false``continueOnCapturedContext``Task``false`*

# session-variables - 为什么通过 HttpContext.Current 访问会话不好 [做法]？

> ID：16207469
> 
> 赞同：3
> 
> 时间：2013-04-25T06:02:30.823
> 
> 标签：session-variables, signalr, signalr-hub

我正在尝试`signalR`并按照他们的聊天示例进行了一些修改。因此，在 中`ChatHub.cs`，我尝试访问用户的会话变量，发现无法访问。所以我在网上搜索了答案并找到了这个：[Access to Session from a Hub](https://github.com/SignalR/SignalR/issues/67)

因此，正如 David Fowl 先生所评论的那样，通过访问会话变量`HttpContext.Current`是不好的。我应该避免使用它真的那么糟糕吗？我真的需要访问会话变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:51:26.357

我猜它不好的原因是因为如果托管在 asp.net 上下文之外，您的代码将无法工作。由于 HttpContext.Current 是特定于网络的

# jsp - 如何在 JSF 中包含来自外部本地磁盘文件系统文件夹的文件

> ID：16207479
> 
> 赞同：1
> 
> 时间：2013-04-25T06:02:45.453
> 
> 标签：jsp, pdf, jsf-2, download, facelets

我已经使用`<ui:include>`. 在 JSP 页面中，我能够获取 PDF，但它将内容显示为纯文本。这是如何引起的，我该如何解决？

JSP 页面：

```
<html>
<%@page import="java.io.File"%>
<%@page import="java.io.*"%>
<body>
    <%
        response.reset();
    File file = new File(
            "D:\\TNWRD_Documents\\Knowladge_Base\\Financial_and_Administrative_powers.pdf");
        response.setHeader("Content-Type", "application/pdf");
        response.setHeader("Content-Disposition","inline;filename=Saba_PhBill.pdf");
        response.setContentLength((int)file.length());

        //OPen an input stream to the file and post the file contents thru the
        //servlet output stream to the browser
        FileInputStream in = new FileInputStream(file);
        ServletOutputStream outs = response.getOutputStream();
        response.setContentLength(in.available());
        byte[] buf = new byte[8192];
        int c=0;
        try {
            while ((c = in.read(buf, 0, buf.length)) > 0) 
            {
            //System.out.println("size:"+c);
            outs.write(buf, 0, c);
            }

        } catch (IOException ioe) {
            ioe.printStackTrace(System.out);
        } finally {
            outs.flush();
            outs.close();
            in.close();
        }
    %>
</body>
</html> 
```

Facelets页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:my="http://example.com/jsf"
    >

    <h:form>
        <table width="100%" border="1">
        <tr></tr>
            <tr>
            <td align="left" width="200px"><rich:tree id="fileTree" toggleType="ajax" var="item">
                <rich:treeModelRecursiveAdaptor
                    roots="#{fileSystemBean.sourceRoots}" nodes="#{item.directories}">
                    <rich:treeNode>
                    #{item.shortPath}
                </rich:treeNode>
                    <rich:treeModelAdaptor nodes="#{item.files}">
                        <rich:treeNode>
                            <a4j:commandLink value="#{item}"
                                action="#{TnwrdAction.downloadFile}" oncomplete="openFile();" render="fileTree"
                                immediate="true">
                                <f:setPropertyActionListener value="#{item}"
                                    target="#{TnwrdBean.fileName}" />

                            </a4j:commandLink>
                        </rich:treeNode>
                    </rich:treeModelAdaptor>
                </rich:treeModelRecursiveAdaptor>
                </rich:tree></td>
            <td >
            <ui:insert name="Barrage" >
            <my:include page="/WEB-INF/jsp/page.jsp" />
            </ui:insert>  
            </td>
            </tr>
            </table>
    </h:form>

</ui:composition> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:53:10.843

这个结构至少有两个主要错误。

首先，您不能包含使用`<ui:include>`. 它只能包含 Facelets 文件。JSP 文件只会被视为“普通的”XML。此外，自 JSF 2.0 起，JSP 已被**弃用。**你不应该考虑使用它。这`<ui:include>`也是在输出中嵌入 PDF 文件的错误工具。您应该使用 HTML`<iframe>`或`<object>`代替。

例如

```
<iframe src="/url/to/file.pdf" width="500" height="300"></iframe> 
```

或更好

```
<object data="/url/to/file.pdf" type="application/pdf" width="500" height="300">
    <a href="/url/to/file.pdf">Download file.pdf</a>
</object> 
```

*（`<a>`当正在使用的浏览器不支持`application/pdf`HTML 文档中的内联内容时，即当它没有安装 Adob​​e Reader 插件时，链接意味着优雅降级）*

或者如果你碰巧使用 PrimeFaces

```
<p:media value="/url/to/file.pdf" width="500" height="300" /> 
```

其次，JSP 不适合提供文件下载服务。JSP 就像被设计为视图技术的 Facelets，旨在通过标记库和 EL 轻松生成 HTML 输出。基本上，使用您的 JSP 方法，您的 PDF 文件会被标签和标签弄得杂乱无章，`<html>`因此`<body>`会损坏并且无法识别为有效的 PDF 文件。顺便说一下，这也是为什么[使用*scriptlet*是一种不好的做法](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)的原因之一。它让你完全混淆了东西应该如何工作。Facelets 不支持任何形式的*scriptlet*，因此“自动”迫使您以正确的方式做事。在这种特殊情况下，即使用普通的 Java 类进行文件下载作业。

您应该改用[servlet](https://stackoverflow.com/tags/servlets/info)。这是一个启动示例，假设 Servlet 3.0 和 Java 7 可用：

```
@WebServlet("/Saba_PhBill.pdf")
public class PdfServlet extends HttpServlet {

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        File file = new File("D:\\TNWRD_Documents\\Knowladge_Base\\Financial_and_Administrative_powers.pdf");
        response.setHeader("Content-Type", getServletContext().getMimeType(file.getName()));
        response.setHeader("Content-Length", String.valueOf(file.length()));
        response.setHeader("Content-Disposition", "inline; filename=\"Saba_PhBill.pdf\"");
        Files.copy(file.toPath(), response.getOutputStream());
    }

} 
```

*（顺便说一句，您在“知识”中出现了严重的错字，不确定这是否与具体问题进一步相关）*

只需在上面的 HTML 示例中替换`"/url/to/file.pdf"`为`"#{request.contextPath}/Saba_PhBill.pdf"`即可调用它。在`<p:media>`中`#{request.contextPath}`是不必要的。

# c# - .NET 应用程序的性能测量

> ID：16207480
> 
> 赞同：-1
> 
> 时间：2013-04-25T06:02:50.167
> 
> 标签：c#, .net, performance, memory

我已将 32 位应用程序转换为 64 位。如何在两个版本中测量应用程序的性能。

1.  是否有任何基准测试/性能测量工具/dll？

2.  是否可以在模块/功能级别而不是整个应用程序上衡量性能。例如，我想在 32 位和 64 位机器上查看性能 GraphicsRender 功能。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:07:47.293

microsoft 可用于 .net 分析的一个是[CLR Profiler for .NET Framework 4](http://www.microsoft.com/en-us/download/details.aspx?id=16273)。您可以将它用于任何 .Net 4.0 应用程序。对于 2.0，同样的分析器也可用。

您可以尝试使用[jetbrains](http://www.jetbrains.com/profiler/) profiler 进行性能测量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:05:24.700

尝试使用 ANTS Profiler：[http ://www.red-gate.com/products/dotnet-development/ants-performance-profiler/](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)

这是免费试用期。您可以将它安装在您的 Visual Studio 中。

是衡量一个方法被调用的次数，它的执行时间，也衡量内存消耗。

# bash - 从包含路径的变量中删除当前目录

> ID：16207487
> 
> 赞同：2
> 
> 时间：2013-04-25T06:03:25.160
> 
> 标签：bash, zsh

我有一个包含当前目录的变量，其中包括几个父目录。例如：

```
$ pwd
/Users/simont/repositories
$ echo $current
~/repositories 
```

我可以从[这个问题中删除](https://stackoverflow.com/questions/1371261/get-current-directory-name-without-full-path-in-bash-script)*除*当前目录之外的所有内容：

```
onlycurrent=${$(current)##*/} 
```

我想做相反的事情：从此变量中删除当前目录（使其仅包含`~/`）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:55:19.653

使用`dirname`您可以剥离最后一个目录：

```
$ current="~/repositories"
$ echo $current
~/repositories
$ dirname $current
~ 
```

诚然，这不会将`/`字符保存到`~`.

如果你想简单地使用`bash`你可以做到这一点：

```
$ echo ${current%/*}
~ 
```

`/`在最后一个（包括其`/`本身）之后剥离所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:55:31.000

这并不能完全解决您的问题，但您可能想查看 dirname （和 basename）

```
/home/or..product/oracle10 >pwd
/home/oracle/product/oracle10

/home/or..product/oracle10 >dirname `pwd`
/home/oracle/product

/home/or..product/oracle10 >basename `pwd`
oracle10 
```

顺便说一句： dirname 并不真正关心返回的字符串是否真的是一个目录，它适用于任意字符串。

```
/home/or..product/oracle10 >dirname "/foo/bar/baz"
/foo/bar 
```

# javascript - 覆盖图像不显示

> ID：16207503
> 
> 赞同：1
> 
> 时间：2013-04-25T06:04:35.720
> 
> 标签：javascript, jsf-2, primefaces

这是一个 JSF 2.0 + Primefaces 3.5 应用程序。我有一个弹出对话框来确认删除所选项目。一旦用户选择确认，javascript 会生成 2 个 div 作为叠加层：一个是半透明图层，另一个是旋转轮 gif 图像。一旦后端删除过程完成（需要几秒钟），页面就会刷新并且覆盖消失。

这是我的对话框代码，我使用 primefaces 对话框标签：

```
 <p:dialog id="confirmRemove"
        header="Remove Confirmation" severity="alert"
        widgetVar="confirmation" modal="true" resizable="false">
        <h:panelGrid columns="1">
            <h:panelGroup id="message">
                <h:outputText id="confirmMsg"
                     value="Are you sure you want to remove the selected item?" escape="false"/>
            </h:panelGroup>
            <p:commandButton id="confirm" value="Remove"
                onclick="confirmation.hide();loadOverlay()"
                actionListener="#{myBackingBean.addInfo()" ajax="false"/>
         </h:panelGrid>
    </p:dialog> 
```

这是我的javascript代码：

```
 function loadOverlay()
    {
        var overlay = jQuery('<div id="overlay"d></div>');
        overlay.appendTo(document.body);
        var overlay_img = jQuery('<div id="overlay_img"><img src="../images/spinning-wheel.gif"/></div>');
        overlay_img.appendTo(document.body);
    } 
```

这是我的样式表：

```
 #overlay {
        position:fixed;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: #000;
        filter:alpha(opacity=50);
        -moz-opacity: 0.5;
        -khtml-opacity: 0.5;
        opacity: 0.5;
        z-index: 10000;
    }

    #overlay_img {
        position: absolute;
        top: 50%;
        left: 50%;
        opacity: 1.0 !important;
        z-index: 10001;
    } 
```

我的问题是：单击确认对话框的“删除”按钮后，会显示叠加层，但不会显示图像。如果我在 javascript 函数 loadoverlay() 的末尾添加一条警告语句，则图像会显示。此外，如果我将 p:commandButton ajax="false" 更改为 ajax="true" （默认模式），图像也会显示。但显然这不起作用，这意味着我必须手动刷新页面才能使覆盖消失。而且我也不认为它与 Primefaces 有特别的关系。我尝试使用 JSf 标签 h:commandButton，观察到同样的问题。

我只想补充一点，如果我使用 debugger(firebug) 来检查 loadOverlay 的原始代码，图像也会正确显示。

我还做了一个实验，在 loadOverlay 函数的末尾添加了一个运行 1 秒的循环。如果我在没有调试器的情况下运行，则在单击“删除”按钮后，页面会冻结一秒钟，然后再继续部署覆盖（虽然没有图像）。但是如果我用调试器运行它，结果将在语句执行后立即显示在屏幕上。例如，在语句“overlay.appendTo(document.body)”之后，将立即部署覆盖。这让我觉得调试器非常不可靠：似乎表明调试器运行在与实际不同的流程上。

我一直在 Firefox (20.0) 上测试我的代码。我刚刚在 IE(8) 上尝试过，令我惊讶的是，它在 IE 上运行良好。所以这是浏览器特定的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T23:49:17.870

我宁愿使用页面刷新来摆脱覆盖，因为它是一个更清洁的解决方案。但由于这不适用于 Firefox，我必须选择 Ajax 解决方案。将对话框代码更改为以下内容：

```
<p:dialog id="confirmRemove"
    header="Remove Confirmation" severity="alert"
    widgetVar="confirmation" modal="true" resizable="false">
    <h:panelGrid columns="1">
        <h:panelGroup id="message">
            <h:outputText id="confirmMsg"
                 value="Are you sure you want to remove the selected item?" escape="false"/>
        </h:panelGroup>
        <p:commandButton id="confirm" value="Remove"
            onclick="confirmation.hide();loadOverlay()"
            oncomplete="removeOverlay();"
            actionListener="#{myBackingBean.addInfo()}" />
     </h:panelGrid>
</p:dialog> 
```

因此，基本上将 p:commandButton 更改为 Ajax 按钮并添加一个 javascript 函数 (removeOverlay) 以在该过程完成后删除覆盖。removeOverlay 函数如下：

```
function removeOverlay() {
    element = document.getElementById('overlay_img');
    element.parentNode.removeChild(element);
    element = document.getElementById('overlay');
    element.parentNode.removeChild(element);
} 
```

# matlab - Matlab中的用户输入

> ID：16207504
> 
> 赞同：1
> 
> 时间：2013-04-25T06:04:36.603
> 
> 标签：matlab

我正在编写一个 matlab 代码，该代码在计算后以 pdf 格式打印报告。我正在使用 actxserver 与 Microsoft Word 进行通信。用户输入最终报告的文件名，并将其保存在预定义的文件夹中。

我在用，

name = input('请输入文件名','s');

```
WordFileName=name;
FileSpec = fullfile(pwd,WordFileName);
[ActXWord,WordHandle]=StartWord(FileSpec);

function [actx_word,word_handle]=StartWord(word_file_p)

    actx_word = actxserver('Word.Application');
    word_handle = invoke(actx_word.Documents,'Add');

end

function CloseWord(actx_word_p,word_handle_p,word_file_p)
word_handle_p.ExportAsFixedFormat(word_file_p,17);
end 
```

当用户输入：report 时，pdf 生成为 report.pdf

但是当文件名包含其他字符（例如“1.2MFQ”）时，会生成一个文件名为“1.2MFQ”且文件类型为“2MFQ”且没有 pdf 扩展名的文件。

这是因为在 matlab 中的输入还是在打印为 pdf 期间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:18:29.530

我认为这是文字而不是Matlab。为什么不直接将 .pdf 附加到文件名字符串的开头：

```
FileSpec = fullfile(pwd,[WordFileName, ".pdf"]); 
```

# ios - 移除 UITableView 的边框，而不是分隔符

> ID：16207507
> 
> 赞同：3
> 
> 时间：2013-04-25T06:05:09.103
> 
> 标签：ios, objective-c, uitableview

我想删除 的边框`UITableView`，默认情况下，单元格之间和表格周围有一条灰线。注意我只想删除表格周围的边框，而不是单元格之间的分隔符。

我已经搜索但只找到删除所有行的答案。此代码删除了单元格和表格周围和之间的所有边框：

```
self.table.separatorColor = [UIColor clearColor];
self.table.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

此代码不起作用，没有任何反应：

```
#import <QuartzCore/QuartzCore.h>
self.table.layer.borderColor = [UIColor redColor].CGColor; 
```

我的表格是分组表格视图，默认在xib中，分隔符是单行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:14:35.843

我有同样的问题，我所做的是删除边框并在自定义 TableViewCell 底部使用 Imageview 添加自定义分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T09:55:34.743

尝试这个。

```
self.yourTableView.tableHeaderView = [[UIView alloc] init];
self.yourTableView.tableFooterView = [[UIView alloc] init]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T17:37:05.353

我有同样的问题并找到了这个解决方案......

```
self.table.backgroundColor = [UIColor clearColor];

self.table.backgroundView = nil; 
```

希望对你有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T12:00:10.963

尝试设置 tebleview 边框 witdth = 0

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-04-25T06:22:39.107

请尝试：

```
self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

# jar - 想做一个jar文件

> ID：16207511
> 
> 赞同：0
> 
> 时间：2013-04-25T06:05:17.543
> 
> 标签：jar, executable-jar

我已经制作了一个 java 应用程序（它扩展了 JPanel）并希望将它制作成一个 jar 文件。我有 BlueJ，我用它来这样做，但是在我制作了 jar 文件后它没有打开。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:17:45.333

你用 Eclipse 写代码吗？如果你这样做了，那么很容易使用 Eclipse 创建一个可执行的 jarfile。

您是否使用 JFrame 来展示您的 JPanel？如果没有，您可能有一个 JFrame，它是 JPanel 将显示的“应用程序窗口”。

JFrame 教程： [http ://docs.oracle.com/javase/tutorial/uiswing/components/frame.html](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)

/约翰

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:32:46.150

Jar 文件是 PKZIP 打包文件，其中具有特定的文件夹结构和约定。它包含您的 java 源代码 (*.java -> *.class) 以及元数据的编译版本。您可以使用任何可以处理 zip 文件的存档“打开”它，特别是如果您将“.zip”扩展名附加到文件名。

如果您的意思是通过“打开”它来执行您的 jar，那是另一回事。您必须在其中一个类中有一个标准的静态 main 方法，以便 JVM 可以找到执行入口点。如果你有，你可以说“java -jar yourjarfile.jar”，它将从你的 main 开始执行你的类。请注意，我假设您已经很好地设置了 JVM（我猜您已经设置好了），并且您的环境变量也应该配置好。在大多数情况下，您的 jar 引用其他 jar 文件。您可以通过类路径为 JVM 提供访问权限。

# java - 如何通过 web.xml 刷新响应缓冲区？

> ID：16207516
> 
> 赞同：0
> 
> 时间：2013-04-25T06:05:29.137
> 
> 标签：java, http, servlets

我有一个典型的场景，我在 Web 应用程序和客户端-服务器应用程序中共享几个过滤器类。如果这些过滤器类出现任何异常，我必须向客户端发送一个特定的 json 字符串。但对 web 应用程序没有任何影响（因为我想显示一个通用的 jsp）。

我正在使用以下代码发送响应

```
 response.getWriter().println(responseObject.toString());
 response.flushbuffer(); 
```

现在的问题是，我的客户端应用程序工作正常，但 jsp 将 responseobj 显示在顶部（因为已提交响应）。但是如果我删除了flushbuffer()，那么jsp就可以正常工作，并且我无法解析客户端应用程序上的json对象。

我不知道如何解决这种情况。我想知道是否有办法通过 web.xml 刷新响应缓冲区。这样我就可以更改客户端-服务器应用程序的 web.xml 并保持 Web 应用程序的 web.xml 不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:31:22.800

一旦某些 HTML 离开服务器并正在前往浏览器的途中，您就无法将其带回并将响应更改为 JSON。

我认为你有几个基本的选择：

*   延迟输出 HTML（延迟输出任何东西），直到您**确定**这是正确/最终的响应。
*   使用响应包装器（例如在此答案中- [Capture and log the response body](https://stackoverflow.com/questions/3242236/capture-and-log-the-response-body)）。即缓冲/保存**所有**响应，过滤器可以选择是不使用它、使用其中的一些、全部使用，还是返回 JSON。

# unit-testing - 分层依赖注入要测试什么

> ID：16207522
> 
> 赞同：1
> 
> 时间：2013-04-25T06:05:37.623
> 
> 标签：unit-testing, testing, dependency-injection, automated-tests

相对的问题可能像this [one question](https://stackoverflow.com/questions/1316848/unit-testing-what-not-to-test)。

我使用依赖注入作为我的应用程序的架构。然后我为它创建了单元测试。

注入架构可能是这样的：

```
IClassA(IClassB)
IClassB(IClassC1, IClassC2)
//more of it 
```

请注意，此架构仅涉及服务对象，而不涉及存储库。现在我想知道，要测试什么类。

*   如果我测试 C1 和 C2 类（最小的类），则不测试 B 类和 A 类。

*   如果我只测试A类（集成类），那么需要覆盖的场景太多，而不是很多小模块。

*   如果我测试 A 类的模块，并测试 C1 和 C2 类，我认为这似乎是多余的。如果我想重构一个逻辑（在开发过程中），我需要管理许多测试单元。

*   如果我用模拟类 B 测试 A 类，它将为每个类和模拟类创建几乎 1:1。它不会造成太多的嘲笑吗？

任何建议或想法将不胜感激。

编辑：

一个工作场景是当我想提供文件信息（基于 csv 或 xml），然后转换为实体时。该过程将是：

*   ClassA 读取数据，将其作为大表格式（可能在 DataTable 中）传递给 ClassB
*   ClassB 使用 ClassC1 进行验证
*   ClassB 使用 ClassC2 进行更多验证，然后返回标头细节映射实体。

类的示例代码将是这样的（我跳过了构造函数注入部分）：

```
public class ClassA: IClassA{
  public IEnumerable<Request> GetRequestFromFile(FileInfo info
    , ref ValidationResult validationResult){
    //read the file and get DataTable
    iClassB.ConvertToRequest(dataTableResult, ref validationResult);
  }
}

public class ClassB : IClassB{
  public IEnumerable<Request> ConvertToRequest(DataTable dt
    , ref ValidationResult validationResult){
    foreach(DataRow row in dt.Rows){
      // convert to flat request first, to avoid reading DataTable too much
      iClassC1.Validate(rawRequest, ref validationResult);
      iClassC2.Validate(rawRequest, ref validationResult);
    }
    if(validationResult.IsSuccess){
      // convert and return the header-detail entity object
    }
  }
} 
```

注意：请忽略逻辑架构（例如：关于在验证期间不抛出异常等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:22:30.127

您应该始终模拟所有外部影响，因此您只测试一件事的功能。它可能需要大量的模拟，但这对于所有可用的模拟框架（如 Rhinomocks、Moq 和许多其他框架）来说并不是真正的问题。

遵循该规则，您应该始终：

*   `IClassB`测试时模拟`ClassA`
*   模拟`IClass1`和`IClass2`测试时`ClassB`

如果你不模拟注入的对象，你会在重构过程中遇到令人困惑的测试失败。此外，您的测试将是集成测试而不是单元测试，因为它们取决于外部类的实现。

**示例：**您正在`ClassA`. 您决定使用生产代码作为输入`ClassATesFixture`，而不是模拟。测试没问题。现在，您重构并引入一个错误。这将导致 中的测试失败，尽管 ClassA 中没有任何变化。`IClassB``ClassB``ClassB``ClassATesFixture`

因此，如果您在测试中使用真实对象作为输入，那么您实际上测试的不仅仅是您要测试的对象。最重要的是，您还会遇到令人困惑的测试失败。

理想情况下，除非测试类中的某些内容发生了变化，否则任何测试都不应该从绿色变为红色。Mocking 是实现这一目标的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T09:11:54.390

我认为您误解了“单元测试”一词。单元测试意味着单独测试类。在您的情况下，您应该通过将虚假依赖项传递给要测试的类来做到这一点。如果您不在您测试的类中使用虚假依赖项，那么您就不会孤立地测试这些类，因此您不会进行单元测试。在这种情况下，您正在做的是集成测试。

因此，您应该做的是对所有类进行单元测试，并且由于您正在练习依赖注入，因此伪造被测试的类依赖项应该很容易。

# android - android:largescreens: = "true" 的属性值语法无效

> ID：16207526
> 
> 赞同：1
> 
> 时间：2013-04-25T06:06:11.860
> 
> 标签：android

我正在开发一个 android 应用程序，其 minSdkVersion 为 11，targetSdkVersion 为 17。我正在为多种屏幕尺寸设计此应用程序。所以我把对所有屏幕的支持放在清单文件中。我希望这个应用程序支持所有密度。

我的 Manifest.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android.sample"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="17" />

    <supports-screens
                android:smallScreens="true"
            android:normalScreens="true"
            android:largeScreens= "true"
            android:xlargeScreens="true"
            android:anyDensity="true"/>

    <application
        android:debuggable="true"
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:name="CommApp" >

        <activity
            android:name="com.example.android.sample.MainActivity"
            android:label="@string/app_name" 
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
          <activity android:name="HomePage"
              android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
               android:screenOrientation="portrait"></activity>

          <activity android:name="Registering"
              android:screenOrientation="portrait"
              ></activity>

         <activity android:name="ListviewActivity"
              android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
             android:screenOrientation="portrait"></activity>

    </application>

</manifest> 
```

我为所有屏幕尺寸创建了布局文件夹，如 res/layout-small、res/layout-normal、res/layout-large、res/layout-xlarge。我想在屏幕大小为 720x1280 的模拟器中运行此应用程序，为此我在 res/layout-xlarge 文件夹中创建了所有布局文件。但是在运行时它显示以下错误：

```
Invalid attribute value syntax for android:largescreens: = "true"
            android:xlargeScreens="true"
            android:anyDensity="true"/ 
```

我不知道出了什么问题？谁能告诉我解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:42:04.080

看起来它在抱怨属性中`=`符号后面的空格。`android:largeScreens`尝试删除多余的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T23:06:46.823

我的属性格式如下：

```
 <supports-screens android:smallScreens            = "false"
                    android:normalScreens           = "false"
                    android:largeScreens            = "false"
                    android:xlargeScreens           = "true"
                    android:requiresSmallestWidthDp = "720" /> 
```

错误：

```
update-manifest:
     [exec] Invalid attribute name: android:smallscreens 
```

删除等号周围的空格修复了它。

# pdf - 如何更改 PDF 中的查看器首选项

> ID：16207527
> 
> 赞同：2
> 
> 时间：2013-04-25T06:06:11.987
> 
> 标签：pdf, pdf-generation

[PDF 标准](http://www.adobe.com/content/dam/acom/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)规定应该可以在 PDF 中设置“查看器首选项”，这允许您预设用户查看文档的方式。

是否有任何免费的命令行工具或完全开源的库（因此不受限制/许可库，如 iText）可用于执行此操作？我发现的只是 BeCyPDFMetaEdit，它是一个 Windows 工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T09:17:51.783

我认为您没有得到这个问题的答案，因为[在 StackOverflow 上的常见问题解答](https://stackoverflow.com/faq)中，这不是一个真正的问题。关于 SO 的问题应该是关于您在尝试某事时遇到的技术问题。问*“你能给我一个样品吗？”* 并不总是被接受。你冒着被反问的风险：*“你试过什么？”*

话虽这么说，以回应您的评论：*“当然这一定是以前做过的吗？”* : 当然有！我没有马上回答，因为我没有时间，也因为你的问题的答案很简单。我以为你会自己找到答案，没有任何问题。

```
PdfReader reader = new PdfReader("test.pdf");
PdfStamper stamper = new PdfStamper(reader, new FileOutputStream("test_changed.pdf"));
stamper.setViewerPreferences(PdfWriter.CenterWindow | PdfWriter.FitWindow);
stamper.addViewerPreference(PdfName.PRINTSCALING, PdfName.NONE);
stamper.addViewerPreference(PdfName.NUMCOPIES, new PdfNumber(3));
stamper.close();
reader.close(); 
```

您使用 获取现有 PDF `PdfReader`，然后使用 将其复制到更改后的 PDF `PdfStamper`。在两者之间，您可以使用[`setViewerPreferences()`](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/interfaces/PdfViewerPreferences.html#setViewerPreferences%28int%29)方法或[`addViewerPreference()`](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/interfaces/PdfViewerPreferences.html#addViewerPreference%28com.itextpdf.text.pdf.PdfName,%20com.itextpdf.text.pdf.PdfObject%29)方法。如果您按照为这些方法提供的链接进行操作，您将大致了解可能的查看器偏好。

这是一个 iText (Java) 示例；将其更改为 iTextSharp (C#) 示例就是将一些小写字母更改为大写字母。

**免责声明：**我是 iText Software 的 CEO。我也是 iText 的原始开发者和“iText in Action”书籍的作者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-27T15:39:44.957

以下是使用[PDF::API2](http://search.cpan.org/~ssimms/PDF-API2-2.020/lib/PDF/API2.pm) Perl 包（免费）的方法：

```
use PDF::API2;

$pdf = PDF::API2->open("old.pdf");

$pdf->preferences(
        -centerwindow => 1,
        -fitwindow => 1,
        -hidetoolbar => 1,
        -hidemenubar => 1,
        );

$pdf->saveas('new.pdf'); 
```

# sql - SQL数据更新查询

> ID：16207530
> 
> 赞同：1
> 
> 时间：2013-04-25T06:06:18.963
> 
> 标签：sql

我有一个 SQL 数据表，其中日期以日期格式存储在一列中，为 yyyy-mm-dd。我用 bigint 创建了一个新列，并想编写一个查询将日期转换为 bigint 并更新我的新列。我尝试使用 CAST 并收到一条消息，指出我无法将日期显式转换为 bigint。有人可以帮助我使用 SQL 公式将日期 (yyyy-mm-dd) 转换为 bigint

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:10:03.787

我不确定您使用的是哪个品牌的 SQL Server，但在 Microsoft SQL Server 上，您可以使用 convert 功能来实现这一点。

（编辑）根据评论中的信息添加了一个示例。我仍然假设您使用的是 SQL 服务器：

如果您的表有一个名为“IssueDate”的日期时间列和一个名为 IssueDateOAD 的新 bigint 列，则可以运行以下查询：

`update mytable set IssueDateOAD = convert(bigint, IssueDate) + 2`

如果 IssueDate 是一个包含日期格式字符串的 varchar 列，则必须先将其转换为日期。对于 yyyy-mm-dd 您可以使用`convert(datetime, IssueDate, 126)`（请参阅文档了解您可以传递给转换的样式代码，126 表示我们传递的是 ISO8601 格式的日期）

包括从 varchar 到 datetime 转换的查询是：

`update mytable set IssueDateOAD = convert(bigint, convert(datetime, IssueDate, 126)) + 2`

# android - 本地主机上的 Java tcp 客户端连接到模拟器上的 android 服务器

> ID：16207531
> 
> 赞同：0
> 
> 时间：2013-04-25T06:06:20.487
> 
> 标签：android, sockets, emulation

我开发了一个 Android 服务器并尝试使用模拟器对其进行测试：

这是Android服务器代码：

```
 public class MainActivity extends Activity {

private static String TAG = "ServerSocketTest";
private ServerSocket server;

Runnable conn = new Runnable() {
    public void run() {
        try {
            server = new ServerSocket(53000);

            while (true) {
                Log.d(TAG, "server waiting for connection");
                Socket socket = server.accept();
                BufferedReader in = new BufferedReader(
                        new InputStreamReader(socket.getInputStream()));

                String str = in.readLine();

                Log.i("received response from server", str);

                in.close();
                socket.close();
            }
        } catch (IOException e) {
            Log.e(TAG, e.getMessage());
        } catch (Exception e) {             
            Log.e(TAG, e.getMessage());
        }
    }
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    new Thread(conn).start();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
protected void onPause() {      
    super.onPause();
    if (server != null) {
        try {
            server.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}   

 } 
```

现在的问题是如何让我的 TCP 客户端连接到模拟器上的这个服务器？

我在客户端有这条线。此客户端是在桌面上运行的 Java：

```
clientSocket = new Socket("localhost", 53000); 
```

但我得到 IOException ......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:09:34.957

我设法通过[在 Android 控制台中使用重定向](http://developer.android.com/tools/devices/emulator.html#emulatornetworking)来解决这个问题。

# python - 连接 Python、MySQL 和 HTML

> ID：16207533
> 
> 赞同：0
> 
> 时间：2013-04-25T06:06:33.267
> 
> 标签：python, html, mysql

这是我正在尝试做的事情的概述：

*   我正在从 GSM 调制解调器读取数据，并将其存储在数据库中。

*   我正在使用 Python 脚本和 MySQL 数据库执行此操作。

*   所以这里 Python 只是一个后端，我想使用 HTML 文件创建一个前端。这将稍后在服务器上运行。（我想为 HTML 文件创建一个特定的“外观”。）

那么我是不是先创建 HTML 文件，然后将其与 Python 链接呢？请注意，Python 脚本使用实时数据填充数据库。

还是我在 Python 本身中创建这个 HTML 文件？我是否能够实现我想要的网页感觉。

我还将在 HTML 页面中有一些选项。选择其中一个选项时，Python脚本需要能够对其进行反应并在GSM调制解调器上发送消息。那么我可以让 HTML 开始运行 Python 脚本吗？

我该怎么做才能实现上述目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:12:08.453

您基本上需要的是[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)（模型视图控制器），其不同的组件是：

1.  模型：包含数据的 MySQL 数据库
2.  查看：您的 HTML 前端
3.  控制器：您的主要逻辑所在的位置，例如当点击 UI 上的某些内容时向调制解调器发送什么命令，或者从数据库中提取哪些数据并在 UI 中绘制

Web 框架是要走的路。对于一个非常简单的项目（你想在不到一个小时内完成），[web.py](http://webpy.org/)、[flask](http://flask.pocoo.org/)和[bottle](http://bottlepy.org/docs/dev/)会很好。对于更详细的内容，您可能需要使用[Django](https://www.djangoproject.com/)。

这些中的每一个都允许您创建自己的 HTML 文件并使用一些模板方案和控制逻辑与后端进行通信。

我通常在前端和后端之间进行通信的方式是使用 AJAX 查询。这种方法的优点是，如果您决定更改底层框架，您的 UI 代码将保持不变。

现在让我们做一个示例任务：用户选择一个特定的命令发送到 GSM 调制解调器并等待响应，如果它成功与否。

1.  在 UI 上，您可以发送包含命令信息的 AJAX POST 或 GET 请求。让我们假设它类似于“AT”，因此您决定将其发布到您在路由信息中定义的 URL，让它成为 /execute
2.  现在与该路由条目对应的函数被执行，它将检索参数，即“AT”，将使调制解调器理解必要的数据包并将其发送并从调制解调器获得一些响应
3.  函数返回此响应，控件返回 UI
4.  在 UI 中，您可以使用代码来显示您想要执行的任务的状态

您可以类似地从数据库中提取数据。

# java - 此 URL 不支持 HTTP 方法 GET，尽管它执行 doGet

> ID：16207536
> 
> 赞同：2
> 
> 时间：2013-04-25T06:06:38.957
> 
> 标签：java, servlets, glassfish-3

```
public class RoarHistoryUpdate extends HttpServlet {

    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException{
        super.doGet(request, response);
        System.out.println("do Get");
        response.setContentType("text/html");
        response.getOutputStream().print("Success");
    }
} 
```

这是我的 Servlet。它像这样在 web.xml 中注册：

```
 <servlet>
      <display-name>RoarHistoryUpdateServlet</display-name>
      <servlet-name>RoarHistoryUpdateServlet</servlet-name>
      <servlet-class>de.ulm.uni.vs.avid.roary.servlets.RoarHistoryUpdate</servlet-class>
  </servlet>
  <servlet-mapping>
      <servlet-name>RoarHistoryUpdateServlet</servlet-name>
      <url-pattern>/Roary/UpdateServlet</url-pattern>
  </servlet-mapping> 
```

当我转到 URL 时`http://localhost:8080/Roary-JSP/Roary/UpdateServlet`，它说`HTTP Status 405 - HTTP method GET is not supported by this URL`

有趣的是我得到了`do Get`登录到我的控制台。所以它实际上找到了`doGet`-method。

我正在使用 GlassFish Server 开源版 3.1.2.2

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T06:09:05.413

因为当您`super.doGet(request, response);`在 Servlet 的`doGet()`方法中执行此操作时，您实际上调用`doget()`了`HttpServlet`该类。该`Tomcat 7`方法的实现如下（可能存在类似的实现`Glassfish`）：

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
    throws ServletException, IOException
{
    String protocol = req.getProtocol();
    String msg = lStrings.getString("http.method_get_not_supported");
    if (protocol.endsWith("1.1")) {
        resp.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, msg);
    } else {
        resp.sendError(HttpServletResponse.SC_BAD_REQUEST, msg);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T06:09:13.700

我的猜测是这是因为调用`super.doGet()`. 如果您检查 的源代码`HttpServlet`，您会看到它在响应中设置了此状态代码。所以放弃超级电话。这不是必需的。

# php - PHP header() 不使用状态码重定向

> ID：16207537
> 
> 赞同：0
> 
> 时间：2013-04-25T06:06:39.677
> 
> 标签：php, redirect, header

我有一个代码

```
<?php
header('Location: http://mydomain/404', true, 404);
exit;
?> 
```

什么都不做。输出白屏，我可以看到 404 响应状态，但没有重定向。Ubuntu 12.04 / PHP 5.3

使用 Debian Squeeze / PHP 5.3 在服务器上出现同样的问题

我做错了什么？

更新。

它是获取状态和路径的函数的一部分。我需要重定向到具有指定状态代码的指定页面。不直接显示404页面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T06:11:41.680

您不能对 404 进行位置重定向。正确的行为是将 404 页面包含在带有 404 标头的结果中。

```
<?
header( $_SERVER['SERVER_PROTOCOL']." 404 Not Found", true, 404 );
include('404.php');
?> 
```

除非 404 页面在另一个域上。在这种情况下，您可以简单地使用没有 404 的位置重定向，就像 Apache 默认情况下找不到您的错误文档时所做的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T06:14:31.953

它要么是 404 Not Found 要么是 302 重定向，不能同时是两者。如果您想发出*此页面不存在*的信号，请使用 404。如果您想重定向用户，请使用 302。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:13:57.977

通过 .htaccess 执行此操作

```
<IfModule mod_rewrite.c>
RewriteEngine On
ErrorDocument 404 /404.html
</IfModule> 
```

# javascript - JavaScript/jQuery 如何为用户显示正则表达式？

> ID：16207538
> 
> 赞同：1
> 
> 时间：2013-04-25T06:06:49.317
> 
> 标签：javascript, jquery, regex

我有每个输入的正则表达式，我想向用户展示正确输入值的示例。

正则表达式：

```
^\+[0-9]{1,3}\.[0-9]{10,19} 
```

为用户显示：

```
+0.1234567890 
```

可能有人知道我任务的插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T12:35:03.933

使用 RegExp 对象的“源”属性。此属性包含 RegExp 的文本

```
var regexp = /^\+[0-9]{1,3}\.[0-9]{10,19}/;
document.write("The RegExp is: "+regexp.source); 
```

它显示 => 正则表达式为：^+[0-9]{1,3}.[0-9]{10,19}

来源：[JavaScript RegExp 源属性](http://w3schools.com/jsref/jsref_regexp_source.asp)

# sql - 在两个日期之间生成日期

> ID：16207543
> 
> 赞同：8
> 
> 时间：2013-04-25T06:07:02.183
> 
> 标签：sql, oracle, datetime

我需要生成两个给定日期之间的所有日期。只要只有一个日期范围，它就可以正常工作。但是，如果我有多个日期范围，则此解决方案不起作用。我已经在这里和 asktom 上搜索过，但找不到相关的指针/解决方案。

我使用 all_objects 和 CONNECT BY ROWNUM 尝试了这两种解决方案，但没有运气。这是问题陈述：[sqlfiddle](http://sqlfiddle.com/#!4/7837c/13)

**输入**

```
ID  START_DATE      END_DATE 
101 April, 01 2013  April, 10 2013 
102   May, 10 2013    May, 12 2013 
```

**输出**

```
ID  Dates
101 April, 01 2013 
101 April, 02 2013  
101 April, 03 2013  
101 April, 04 2013  
101 April, 05 2013  
101 April, 06 2013  
101 April, 07 2013  
101 April, 08 2013  
101 April, 09 2013  
101 April, 10 2013  
102   May, 10 2013  
102   May, 11 2013  
102   May, 12 2013 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T06:26:40.673

```
select 
  A.ID, 
  A.START_DATE+delta dt
from 
  t_dates A, 
  (
     select level-1 as delta 
     from dual 
     connect by level-1 <= (
       select max(end_date - start_date) from t_dates
     )
  )
where A.START_DATE+delta <= A.end_date
order by 1, 2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T06:28:43.410

请试试：

```
select 
  distinct ID, 
  START_DATE+level-1 DATES
from dual a, TABLE_DATES b
connect by level <= (END_DATE-START_DATE)+1
order by ID; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-21T16:56:02.680

```
 select g.cycle_dt
        from 
            (select to_date(d,'DD-MM-YYYY') cycle_dt
               from dual
                    model
                    dimension by (trunc(to_date('30092015', 'DDMMYYYY')) d) 
                    measures (0 y)
                    rules (
                    y[for d from trunc(to_date('30092015', 'DDMMYYYY')) to to_date('30102015', 'DDMMYYYY')  increment 1]=0
                    )) g
        order by g.cycle_dt; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-22T06:53:58.140

```
WITH NUMS AS (
  SELECT LEVEL-1 DaysToAdd
  FROM DUAL
  CONNECT BY LEVEL <= (
    SELECT MAX(END_DATE - START_DATE + 1)
    FROM HOLIDAY)
)
SELECT START_DATE + DaysToAdd DATE_TIME, DESCRIPTION, IS_SCHOOL_HOLIDAY, UPDATE_BY, CREATE_DATE
FROM HOLIDAY
CROSS JOIN NUMS
WHERE HOLIDAY.END_DATE - HOLIDAY.START_DATE  > DaysToAdd
ORDER BY 1, 2; 
```

# haskell - Haskell - 我如何获得随机点（Int，Int）

> ID：16207545
> 
> 赞同：5
> 
> 时间：2013-04-25T06:07:09.270
> 
> 标签：haskell, random

我正在尝试获取一组随机点 (x,y) 以将图形节点绘制到屏幕上。我需要为传入的每个节点名称随机生成一个点。

我在 SO 页面上找到了此代码，并对其进行了一些修改以适合我，但它并没有真正满足我的需要。

我需要一个随机列表（尽可能随机）（Int，Int）。

无论如何，这是我到目前为止所拥有的，当然，它每次都给出相同的值，所以它不是特别随机 :)

```
rndPoints :: [String] -> [Point]
rndPoints [] = []
rndPoints xs = zip x y where
          size = length xs
          x = take size (tail (map fst $ scanl (\(r, gen) _ -> randomR (25::Int,1000::Int) gen) (random (mkStdGen 1)) $ repeat ()))
          y = take size (tail (map fst $ scanl (\(r, gen) _ -> randomR (25::Int,775::Int) gen) (random (mkStdGen 1)) $ repeat ())) 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T06:45:05.673

首先，让我们稍微清理一下您的代码。有一个复数版本，`randomR`它提供了一个无限的随机值列表：`randomRs`. 这简化了一些事情：

```
rndPoints1 :: [String] -> [Point]
rndPoints1 [] = []
rndPoints1 xs = zip x y
  where
    size = length xs
    x = take size $ randomRs (25, 1000) (mkStdGen 1)
    y = take size $ randomRs (25,  775) (mkStdGen 1) 
```

我们可以进一步简化这一点，通过使用`zip`' 在较短的列表耗尽后停止的属性：

```
rndPoints2 :: [a] -> [Point]
rndPoints2 xs = map snd $ zip xs $ zip x y
  where
    x = randomRs (25, 1000) (mkStdGen 1)
    y = randomRs (25,  775) (mkStdGen 1) 
```

请注意，我还将传入列表的类型概括为`[a]`. 由于从未使用过这些值，因此它们不必是`String`s!

现在，它每次都给出相同的值，因为它每次都使用相同的种子 ( )`mkStdGen`创建一个伪随机生成器。`1`如果您希望它每次都不同，那么您需要创建一个生成器，`IO`其中可以基于计算机的随机状态。与其将整个计算放入 中，不如`IO`传入 a 更简洁`StdGen`：

```
rndPoints3 :: StdGen -> [Point]
rndPoints3 sg = zip x y
  where
    (sg1, sg2) = split sg
    x = randomRs (25, 1000) sg1
    y = randomRs (25,  775) sg2

pointsForLabels :: [a] -> StdGen -> [(a, Point)]
pointsForLabels xs sg = zip xs $ rndPoints3 sg

example3 :: [a] -> IO [(a, Point)]
example3 xs = newStdGen >>= return . pointsForLabels xs 
```

在这里，`newStdGen`每次都会创建一个新的伪随机生成器，但它在`IO`. 最终将其传递给一个纯（非`IO`）函数，该函数`rndPoints3`采用生成器，并返回一个*无限*的随机`Point`s 列表。在该函数中，`split`用于从中创建两个生成器，每个生成器用于导出坐标的随机列表。

`pointsForLables`现在分离出为每个标签匹配一个新的随机点的逻辑。我还更改了它以返回更可能有用的标签对和`Point`s。

最后，`example3`生活在 中`IO`，并创建生成器并将其全部传递到其他纯代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T04:04:35.687

我最终为此使用了 MonadRandom。我认为代码更清晰，更容易理解。您可以修改以下代码来解决原始问题。

```
import Control.Applicative
import Control.Monad.Random

type Point = (Float, Float)
type Poly = [Point]

randomScalar :: (RandomGen g) => Rand g Float
randomScalar = getRandomR (-500, 500)

randomPoint :: (RandomGen g) => Rand g Point
randomPoint = (,) <$> randomScalar <*> randomScalar

randomPoly :: (RandomGen g) => Int -> Rand g Poly
randomPoly n = sequence (replicate n randomPoint) 
```

# java - 在组合框中使用文本文件

> ID：16207546
> 
> 赞同：-1
> 
> 时间：2013-04-25T06:07:17.977
> 
> 标签：java, swing, file-io, input, jcombobox

您好，我一直无法让我的组合框列出文本文件中的项目。当我这样做时，我想问一下当我改变我的组合框时我的 radioButton 是否会动态改变，或者这会不会太麻烦？

```
import java.awt.GridLayout;
import java.util.Arrays;
import java.util.Scanner;
import java.awt.event.*;
import java.io.*;
import javax.swing.*;
import java.io.*;

public class MovieSelection extends JFrame {

private JRadioButton selection1;
private JRadioButton selection2;
private JRadioButton selection3;
private JPanel moviePanel;
private JLabel priceLabel;

private JComboBox movieBox;
private ButtonGroup bg;

private String[] movieName = { "RED", "Taken", "Star Trek", "Star Wars",
        "Avatar" };

public MovieSelection() {
    super("Please select your movie");
    setSize(800, 400);

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    setLayout(new GridLayout(15, 4));

    setLocationRelativeTo(null);
    // PrintWriter outputFile = new PrintWriter(TheMovies.txt);
    buildMoviePanel();

    add(moviePanel);

    setVisible(true);

}

private class MovieLists implements ActionListener {
    public void actionPerformed(ActionEvent e) {

        Scanner inputFile = new Scanner(TheMovies.txt);

        while (inputFile.hasNext()) {
            String nextMovieName = inputFile.nextLine();

        }

        JComboBox cb = (JComboBox) e.getSource();
        String Themovie = (String) cb.getSelectedItem();

    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:27:38.547

您正在编写`TheMovies.txt`一个表达式，因此 java 编译器将查找一个名为的类，该类`TheMovies`包含一个名为 的公共静态成员`txt`。

您真正的意思是字符串文字，因此您必须将其括在引号中：

```
"TheMovies.txt" 
```

但是当您将 a 传递`String`给[`Scanner`构造函数](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#Scanner%28java.lang.String%29)时，该字符串本身将被扫描，而不是被解释为文件名。因此，您必须首先从该字符串构造一个[`File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)或对象。[`Path`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html)

```
Scanner inputFile = new Scanner(new File("TheMovies.txt")); 
```

线

```
JComboBox movieLists = new JComboBox(TheMovies.txt); 
```

由于被解释为表达式的相同原因是错误的。无论如何都不确定您在这里的意图是什么，但我希望您能从中找到自己的下一步。它应该类似于迭代文件内容并一次填充组合框一项。

# php - 使用 php、jquery 和 ajax 使用复选框设置管理员的批准

> ID：16207547
> 
> 赞同：0
> 
> 时间：2013-04-25T06:07:23.523
> 
> 标签：php, jquery, ajax

我正在一个项目中工作，我只想向用户显示管理员从数据库中选择的那些产品。实际上，当管理员检查或取消选中该复选框时，我想在数据库中设置批准 1 或 0。

```
 jobs.php

  $(document).ready(function(){
   $('input.check').click(function(){
     if($("input.check").is(':checked'))
     {
         $id = $(this).attr("id");
         $.post("handle.php",{action:"checked",id:$id},function(data){
          alert("Peoduct is set to display...");
         });
     }
     else
     {
       alert("unchecked");
        $id = $(this).attr("id");
         $.post("handle.php",{action:"unchecked",id:$id},function(data){
          alert("Peoduct is un-set to display...");
         });
     }

       });

    });

    <?php
        $dbqry = mysql_query("select * from job_category");

        echo "<table width='50%', border='2'>
        <tr>
        <th>Catergory ID</th>
        <th>Category Name</th>
        <th>Remove</th>
        <th>Update</th>
        <th>Approval</th>           

        </tr>";

        if($dbqry)
        {
            while($row = mysql_fetch_array($dbqry))
            {
                echo "<tr>";
                echo "<td align='center'>" . $row['c_id'] . "</td>";
                echo "<td align='center'>" . $row['cat_name'] ."</td>";

                $cid = $row['c_id'];
                $aprv = $row['approval'];
                echo "<td align='center'><a href='remove.php?action=cat_remove&cid=$cid'>Remove</a></td>";
                echo "<td align='center'>
                <a href='Update-form.php?action=cat_update&cid=$cid'>Update</a></td>";

                ?>
                <td align="center">

                       <input type='checkbox' name='approval' value='approval'   id ="<? echo $cid; ?>" class="check"/>

                </td>
                </tr>
                <?

            }
            echo "</table>";
            echo '<br/>';
            echo "<a href='add.php?action=cat_add'>Add New Category</a>";

        }
        else
        {
            die(mysql_error());
        }

    ?>`

   handle.php

  `<?php
      include 'include/connection.php';
      $action = $_POST['action'];
      $id = $_POST['id'];
      //echo $action;
      if($action == "checked")
      {
         $query = "update job_category set approval=1 where c_id=$id";
     $result = mysql_query($query);
     if(!$result)
     {
       echo die(mysql_error());
     }
      }
      else if($action == "unchecked")
       {
         $query = "update job_category set approval=0 where c_id=$id";
     $result = mysql_query($query);
     if(!$result)
     {
        echo die(mysql_error());
      }
    }
 ?>` 
```

它可以工作，但是当我刷新页面或选择 URL 并按 Enter 键时，所有检查过的数据都显示为未选中状态，即使在这之后它不会将数据库中的批准值从 1 更改为 0，但它仍然让我对检查了哪些项目感到困惑或未选中。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:13:26.463

修改复选框行以显示已检查，如果数据库中的批准 = 1...试试这个

```
 <input type='checkbox' name='approval' value='approval' <?php if($row["approval"]==1){ echo "checked=\"checked\"";})  ?>  id ="<? echo $cid; ?>" class="check"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:25:47.410

html

```
 <input type='checkbox' name='approval' value='approval' <?php echo $row["approval"]?"checked=\"checked\"":'';?>  id ="<? echo $cid; ?>" class="check"/> 
```

然后添加js

```
$(function(){
    $('input[type=checkbox]').each(function(){

        if($(this).attr('checked') && $(this).attr('checked')=='checked'){
        $(this).attr('checked', true);
        }else{
        $(this).attr('checked', false);
        }

    })

}) 
```

和

```
if($("input.check").is(':checked'))
to
 if($(this).is(':checked')) 
```

# asp.net-mvc - if 语句应检查 mvc 中是否存在部分字符串

> ID：16207549
> 
> 赞同：-1
> 
> 时间：2013-04-25T06:07:35.027
> 
> 标签：asp.net-mvc, asp.net-mvc-4, if-statement

下面的代码说子字符串在当前上下文中不存在。给我另一种方法来检查我的 id 在我的 mvc 视图中是否包含“DOM”或“INT”。

我的桌子：

![在此处输入图像描述](https://i.stack.imgur.com/watRX.jpg)

我的代码：

```
@if( (SUBSTRING(Model.Id,7,9)) !== 'DOM' )
            {
            <tr>
       <td>Amount Approved for Domestic sector : </td>
           <td><input id="Text1" type="text" /></td>

                </tr>
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:10:54.617

您可以使用该[`Contains`](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)方法检查给定字符串是否包含指定的子字符串：

```
@if(Model.Id.Contains("DOM"))
{
    <tr>
        <td>Amount Approved for Domestic sector : </td>
        <td><input id="Text1" type="text" /></td>
    </tr>
} 
```

或者：

```
@if(Model.Id.Split('/')[1].Trim() == "DOM")
{
    <tr>
        <td>Amount Approved for Domestic sector : </td>
        <td><input id="Text1" type="text" /></td>
    </tr>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:11:01.057

我认为应该是

```
@if((Model.Id.Substring(7,9)) !== 'DOM') 
```

因为`Substring`是一种方法`String`

# web-services - 如何在 EXTJS 4 中显示对视图的图像响应？

> ID：16207550
> 
> 赞同：0
> 
> 时间：2013-04-25T06:07:46.903
> 
> 标签：web-services, extjs, extjs4, png, extjs-mvc

我的控制器中有 Web 服务，它返回以下格式的图像。我想知道我如何在我的视图中加载这个图像响应。我使用 EXTJS 4 MVC 架构。我不知道这张图片是什么格式的。请帮我解决这个问题。

回复：-

�PNG

����IHDR��������������sRGB�������gAMA�����a��� pHYs������o�d�� �IDATx^��y�ř'���x1��?^�/��jv��g�Ƙ՞��iO����VV�M$�H�IhC�����e�lhcw ���c����6;����}Y������:����e����2++������U�1c����@�� � ��@�� ����@�� ����@�� ����@�� ����@�� ����@�� ����@�� �� ��@�� ����@ `�ظq�G)-�˖-�S���l�6�� 4��fmc��t�� gj���[�э���{�����O?�^y���{�!��l�6��{`Mcmc�{��^&�� i哇 OM����Q��;�}ꩧ�y��w0� ...</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:57:06.770

使用`Ext.Img`- [http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.Img](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.Img)并将`src`属性分配给您的 Web 服务调用的 URL。

# java - 如何将 %02d:%02d:%02d 转换为双倍？

> ID：16207557
> 
> 赞同：0
> 
> 时间：2013-04-25T06:08:05.990
> 
> 标签：java, android

我正在`TextView`使用

```
Min_txtvw.setText(String.format(mTimeFormat, hour, min, sec)); 
```

现在 `average=distance*60*60/seconds`// 我的函数用于查找秒数的平均值我必须从 Min_txtvw 获取时间我像下面那样完成了它，但它给出了`NumberformatException`，

```
 try {

             String s = Min_txtvw.getText().toString();
             double d = Double.valueOf(s.trim()).doubleValue();
             System.out.println("average distance is"+d);
        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        } 
```

我如何转换该`TextView`值并将其转换为 double ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:12:08.443

你得到`NumberformatException`是因为你的变量 S 包含“：”字符串值，你需要使用`replaceAll()`方法替换这些值。

尝试以下方式，

```
try {
         String s = Min_txtvw.getText().toString();
         s.replaceAll ( ":","" );
         double d = Double.valueOf(s.trim()).doubleValue();
         System.out.println("average distance is"+d);
    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    } 
```

# android - 与元素类型“item”关联的属性“android:showAsAction”需要打开引用

> ID：16207559
> 
> 赞同：0
> 
> 时间：2013-04-25T06:08:11.557
> 
> 标签：android

绑定菜单 xml 文件时显示此错误

```
 <?xml version="1.0" encoding="utf-8"?>
 <menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@id/menu_settings"
    android:orderInCategory="100"
    **at here show this error**android:showAsAction=["ifRoom" | "never" | "withText" | "always" | "collapseActionView"]
    android:title="@string/menu_settings"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:12:58.577

尝试将整个`showAsAction`值括在引号中：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@id/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="ifRoom|never|withText|always|collapseActionView"
    android:title="@string/menu_settings"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T19:05:42.583

您可能会从书中复制粘贴文本或类似的东西。不是同一个引用：

```
height=”fill_parent”
height="fill_parent" 
```

# paypal - 如何关闭 PayPal 客户收据

> ID：16207562
> 
> 赞同：1
> 
> 时间：2013-04-25T06:08:20.653
> 
> 标签：paypal, e-commerce, receipt

PayPal Classic API（带有 BuyNow 按钮表单的 PayPal Payments Standard）中是否有一种方法可以关闭发送客户收据电子邮件？

看，目前 PayPal 网站上有一个错误，它不允许您添加另一个主帐户。因此，这意味着每张客户收据上都会显示 CEO 的姓名和主要电子邮件帐户。我打电话给 PayPal 技术支持，他们说它现在已关闭，但在 3 天后重新尝试添加替代主帐户后，错误仍然存​​在。所以，我想我会走另一条路——根本不发送收据。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:42:23.133

不幸的是，您无法关闭发送给买家的电子邮件通知。

# vba - 使用 vba 通过表单连接到 MS access 2007

> ID：16207567
> 
> 赞同：-1
> 
> 时间：2013-04-25T06:08:33.150
> 
> 标签：vba, vbscript, vb6, ms-access-2007

我创建了一个示例 MS access 2007 数据库并设计了一个表单来检索用户的记录，如果在表单中输入的用户名和密码与记录匹配。在按钮操作中它重定向到 Visual Basic IDE。我可以知道如何通过从表单中获取值来从 vba 连接到 ms access 数据库，以及如何从中执行 SQL 查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:15:34.267

了解如何使用[记录集](http://allenbrowne.com/ser-29.html)。要执行不会返回任何结果的 SQL，请使用：

```
DoCmd.RunSQL 
```

# c# - 以编程方式创建 Datagrid 时，如何添加带有换行的文本框的列？

> ID：16207568
> 
> 赞同：1
> 
> 时间：2013-04-25T06:08:35.193
> 
> 标签：c#, wpf, datagrid

我正在以`DataGrid`编程方式创建一个，我想添加一个`TextBox`启用了自动换行的列。我可以通过`XAML`以下方式做到这一点：

```
<DataGridTextColumn.ElementStyle>
    <Style>
        <Setter Property="TextBlock.TextWrapping" Value="Wrap" />
    </Style>
</DataGridTextColumn.ElementStyle> 
```

但是我看不出在动态创建数据库时如何复制它，这是我到目前为止的代码（目前无法编译）：

```
var datagrid = new DataGrid();

datagrid.Columns.Add(new DataGridTemplateColumn()
{
    Header = "Type",
    Width = new DataGridLength(200),
    // here I want to set FONT = 12 and
    // TextBlock.TextWrappingProperty = TextWrapping.Wrap
} 
```

有什么线索吗？

# android - Android媒体播放器没有完全寻求进展

> ID：16207569
> 
> 赞同：1
> 
> 时间：2013-04-25T06:08:34.943
> 
> 标签：android, file, android-mediaplayer, progress, wave

我正在尝试使用媒体播放器播放 .wav 文件。实际上，到目前为止，我已经完成了如下所示。它正在正确播放更新进度，但问题媒体播放器并未完全搜索。媒体播放器在文件总持续时间之前停止提供进度并停止更新进度。我还实现了 OnComplete 侦听器也没有收到回调。这是我的代码，任何人都可以发现我失踪的地方。

```
public void playAudioFile() {
    try {

        mMediaPlayer.reset();
        setMediaPlayerSource();
        mMediaPlayer.prepare();
        mMediaPlayer.start();
        mMediaPlayer.setOnCompletionListener(new OnCompletionListener() {

            @Override
            public void onCompletion(MediaPlayer arg0) {
                Graphbar.setProgress(mMediaPlayer.getDuration());
            }
        });
        bPlay.setBackgroundResource(R.drawable.pause_selector);

        new Thread(new Runnable() {
            @Override
            public void run() {
                System.out.println("Playing");
                updateProgressBar();
            }
        }).start();

    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}
    public void updateProgressBar() {
    Graphbar.setProgress(0);

    Graphbar.setMax(mMediaPlayer.getDuration());
    mHandler.postDelayed(mUpdateTimeTask, 0);
}
private Runnable mUpdateTimeTask = new Runnable() {
    public void run() {
        if(mMediaPlayer.isPlaying()){
        long totalDuration = Graphbar.getMax();
        long currentDuration =mMediaPlayer.getCurrentPosition();

        String TotalDur = Utilities.milliSecondsToTimer(totalDuration);

        tvTimeRight.setText(TotalDur);
        tvTimeLeft.setText(""+ Utilities.milliSecondsToTimer(currentDuration));

        System.out.println(currentDuration+"/"+totalDuration);
        Graphbar.setProgress((int)currentDuration); 
        mHandler.postDelayed(this, 1);
        }
    }
};
private void setMediaPlayerSource() {
        String audioFile = getFilename();
        try {
            mMediaPlayer.setDataSource(audioFile);
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (SecurityException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T11:47:10.233

总持续时间使用 mediaplayer.getduration。**从可运行处理程序中删除不必要的代码** ，因为它会为您的搜索栏创建负载。因为**每秒钟**你都在计算一些东西并根据该计算**更新布局。**

我建议你使用android 的**计时器**视图。

```
public void playAudioFile() {
    try {

        mMediaPlayer.reset();
        setMediaPlayerSource();
        mMediaPlayer.prepare();
        mMediaPlayer.start();
        mMediaPlayer.setOnCompletionListener(new OnCompletionListener() {

            @Override
            public void onCompletion(MediaPlayer arg0) {
                Graphbar.setProgress(mMediaPlayer.getDuration());
            }
        });
        bPlay.setBackgroundResource(R.drawable.pause_selector);
        //set this only for once , because for one song total duration is always constant.

     updateProgressBar();
}
    public void updateProgressBar() {
    Graphbar.setProgress(0); 

    Graphbar.setMax(mMediaPlayer.getDuration());
    mHandler.postDelayed(mUpdateTimeTask, 0);

    long totalDuration = mMediaPlayer.getDuration();
    String TotalDur = Utilities.milliSecondsToTimer(totalDuration);

        tvTimeRight.setText(TotalDur);
}
private Runnable mUpdateTimeTask = new Runnable() {
    public void run() {

        if(mMediaPlayer.isPlaying()){
        //long totalDuration = mMediaPlayer.getDuration();=> no need of calculating total time and updating it to seekbar at every second 

        long currentDuration =mMediaPlayer.getCurrentPosition();

        tvTimeLeft.setText(""+ Utilities.milliSecondsToTimer(currentDuration));

        System.out.println(currentDuration+"/"+totalDuration);
        Graphbar.setProgress((int)currentDuration); 
        mHandler.postDelayed(this, 1);
        }
    }
};
private void setMediaPlayerSource() {
        String audioFile = getFilename();
        try {
            mMediaPlayer.setDataSource(audioFile);
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (SecurityException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

# inno-setup - InnoSetup pascal inheriting TControl causes identifier expected

> ID：16207573
> 
> 赞同：0
> 
> 时间：2013-04-25T06:08:53.153
> 
> 标签：inno-setup, pascalscript

I am trying to create my own InnoSetup Control (combined dropdown and file input box with browse button). I need dynamic number of these controls. My idea was to inherit TControl and build the needed control like that.

```
type
  TConfigControl = class(TControl)
  public
    constructor Create(AOwner: TComponent);
  end; 
```

I am not avid Pascal programmer but I think the syntax should be correct. When I try to compile the InnoSetup script it gives "Identifier expected" to the second line.

On the other hand, is this the correct way to do this kind of thing in innosetup?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:44:05.483

You can create your component in Delphi - regular Pascal allows you to do this.

Inno Setup Script cannot handle such situations (it is pretty complicated).

So develop plug-in (.dll file) and use it to place your control on Wizard's form.

# php - 如何在上传前后预览图像？

> ID：16207575
> 
> 赞同：27
> 
> 时间：2013-04-25T06:08:56.087
> 
> 标签：php, javascript, jquery, html

我要预览表单中的图像或照片，但它不起作用，HTML 代码如下所示：

```
<form action="" method="post" enctype="multipart/form-data" name="personal_image" id="newHotnessForm">
    <p><label for="image">Upload Image:</label>
    <input type="file" id="imageUpload"/></p>
    <p><button type="submit" class="button">Save</button></p>
        <div id="preview">
            <img width="160px" height="120px" src="profile pic.jpg" id="thumb" />
        </div>
    </form> 
```

并在下面合并了 JS 代码/脚本：

```
<script type="text/jaavascript">
$(document).ready(function(){
    var thumb=$('#thumb');
    new AjaxUpload('imageUpload',{
    action:$('newHotnessForm').attr('action'),
    name:'image',
    onSubmit:function(file,extension){
        $('#preview').addClass('loading');
    },
    onComplete:function(file,response){
        thumb.load(function(){
            $('#preview').removeClass('loading');
            thumb.unbind();
        });
        thumb.attr('src',response);
    }
    });
}); 
```

我的表单有两个主要问题：
1\. 为什么图像或图片的预览不起作用？
2\. 当点击保存按钮时，如何从表单中粘贴照片，它将转到/链接到我创建的另一个 PHP 或 PHP 页面？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-04-25T06:13:00.357

试试这个：（预览）

```
<script type="text/javascript">
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }
</script>

<body>
    <form id="form1" runat="server">
        <input type="file" onchange="readURL(this);" />
        <img id="blah" src="#" alt="your image" />
    </form>
</body> 
```

工作演示[在这里>](http://jsbin.com/uboqu3/1/edit)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-04T11:18:29.620

meVeekay 的回答很好，只是通过做两件事使其更加即兴发挥。

1.  检查浏览器是否支持 HTML5 FileReader()。

2.  通过检查其扩展名仅允许上传图像文件。

**HTML：**

```
<div id="wrapper">
    <input id="fileUpload" type="file" />
    <br />
    <div id="image-holder"></div>
</div> 
```

**jQuery :**

```
$("#fileUpload").on('change', function () {

    var imgPath = $(this)[0].value;
    var extn = imgPath.substring(imgPath.lastIndexOf('.') + 1).toLowerCase();

    if (extn == "gif" || extn == "png" || extn == "jpg" || extn == "jpeg") {
        if (typeof (FileReader) != "undefined") {

            var image_holder = $("#image-holder");
            image_holder.empty();

            var reader = new FileReader();
            reader.onload = function (e) {
                $("<img />", {
                    "src": e.target.result,
                        "class": "thumb-image"
                }).appendTo(image_holder);

            }
            image_holder.show();
            reader.readAsDataURL($(this)[0].files[0]);
        } else {
            alert("This browser does not support FileReader.");
        }
    } else {
        alert("Pls select only images");
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-23T06:48:59.793

在输入***type=file***添加一个事件***onchange="preview()"***

对于函数`preview()` 类型：

`thumb.src=URL.createObjectURL(event.target.files[0]);`

现场示例：

```
function preview() {
   thumb.src=URL.createObjectURL(event.target.files[0]);
}
```

```
<form>
    <input type="file" onchange="preview()">
    <img id="thumb" src="" width="150px"/>
</form>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T06:43:46.520

```
 #######################
                    ###  the img page   ###
                    #######################

<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="https://malsup.github.com/jquery.form.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $('#f').live('change' ,function(){
            $('#fo').ajaxForm({target: '#d'}).submit();
        });
    });
</script>
<form id="fo" name="fo" action="nextimg.php" enctype="multipart/form-data" method="post">
    <input type="file" name="f" id="f" value="start upload" />
    <input type="submit" name="sub" value="upload" />
</form>
<div id="d"></div>

                    #############################
                    ###    the nextimg page   ###
                    #############################

<?php
     $name=$_FILES['f']['name'];
     $tmp=$_FILES['f']['tmp_name'];
     $new=time().$name;
     $new="upload/".$new;
     move_uploaded_file($tmp,$new);
     if($_FILES['f']['error']==0)
     {
?>
     <h1>PREVIEW</h1><br /><img src="<?php echo $new;?>" width="100" height="100" />
<?php
     }
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-06T15:47:27.447

```
function readURL(input) {
  if (input.files && input.files[0]) {
    var reader = new FileReader();

    reader.onload = function(e) {
      $('#ImdID').attr('src', e.target.result);
    };

    reader.readAsDataURL(input.files[0]);
  }
}
```

```
img {
  max-width: 180px;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input type='file' onchange="readURL(this);" />
<img id="ImdID" src="" alt="Image" />
```

# sass - 如何让 Sass 工作？

> ID：16207581
> 
> 赞同：6
> 
> 时间：2013-04-25T06:09:09.703
> 
> 标签：sass

这可能是一个愚蠢的问题，但我偶然发现了我想要调整和使用的这个很棒的 CodePen。我在自己的服务器上启动了一个快速演示，但没有成功。然后我意识到 CodePen 旁边是 SCSS，我用谷歌搜索了它。我有点明白了，但我不知道如何使这个特定的代码工作。

的HTML：

```
<body>

    <div id="paper"> </div>
    <div class="wrap">
            <a class="two" href="http://db.tt/vkXgwK2P">
                <img class="round" src="http://db.tt/vkXgwK2P" alt="">
            </a>
            <a class="three" href="http://db.tt/Lrtnc768">
                <img class="round" src="http://db.tt/Lrtnc768" alt="">
            </a>
            <a class="one" href="http://db.tt/CSVy5HNR">
                <img  class="round"  src="http://db.tt/CSVy5HNR" alt="">
            </a>

            <figure>
                <img src="http://db.tt/FveX1nYo" alt="">
            </figure>
    </div> 
```

SCSS：

```
body {
  margin: 0;
}

#paper {
  height: 120px;
  margin: 0;
  background: #303535; 
}

.wrap {
  margin: 0 auto;
  width: 180px;
  height: 180px;
  border-radius: 50%;
  box-shadow: 0 0 0 10px white;
  position: relative;
  top: -80px;
  background: #fff;

  a {
    margin: 0;
    position: absolute;
    .round {
      border-radius: 50%;
      width: 180px;
      height: 180px;
      box-shadow: 0 0 0 10px white;
    }
  }
  figure img {
    margin: 0;
    -webkit-transition: top 0.4s ease-out;
    -moz-transition: top 0.4s ease-out;
    transition: top 0.4s ease-out;
    position: absolute;     
    top: 200px;
    left: 77px;
  }
  .two {
    margin: 0;

    -webkit-transition: top 0.4s ease-out;
    -moz-transition: top 0.4s ease-out;
    transition: top 0.4s ease-out;  
    opacity: 0.8;   
    top: 0; 
  }
  .three {
    margin: 0;
    -webkit-transition: top 0.4s ease-out;
    -moz-transition: top 0.4s ease-out;
    transition: top 0.4s ease-out;      
    opacity: 0.8;
    top: 0;
  }
  &:hover .one {
    opacity: 0.8;
  }
  & a.one:hover {
    opacity: 1;
    z-index: 2;
  }
  :hover .two {
    top: 300px;
  }
  & a.two:hover {
    opacity: 1;
    z-index: 2;
  }
  &:hover .three {
    top: 150px;
  }
  & a.three:hover {
    opacity: 1;
    z-index: 2;
  }
  &:hover figure img {
    top: 500px;     
  }
} 
```

还有一个我在 CodePen 尝试实现的示例：http: [//codepen.io/CoffeeCupDrummer/pen/FqChm](http://codepen.io/CoffeeCupDrummer/pen/FqChm)

我认为问题可能出在我的链接语法中，所以我将其更改为如下所示，但这也不起作用。我尝试了 style.css 然后切换到 style.scss 希望修复它。

```
<link rel="stylesheet" href="stylesheet/style.scss"> 
```

所以我的问题是 SCSS 有什么不同，为什么我不能让它在 CodePen 上正常工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T07:35:34.563

问题是你必须将你的 SCSS 编译成 CSS。没有支持 Sass 的浏览器：您必须先用 Sass 编译器编译它，然后链接到编译后的 CSS。Codepen 会自动为您完成这项工作。

# 如何编译 Sass

编译 Sass 有两种常见的方法，当你对代码进行更改时，它们都会自动编译你的代码：

*   使用[Sass gem](http://sass-lang.com/tutorial.html)`sass`自带的命令行工具
*   使用一些 GUI 工具，如[CodeKit](http://incident57.com/codekit/)或[Compass.App](http://compass.handlino.com/)

It's worth noting that Codepen compiles using [Compass](http://compass-style.org/), which I recommend using rather than the vanilla Sass compiler. In addition to providing extra functions and a library of useful mixins, it uses a configuration file (`config.rb`) file so that you just have to run the `compass watch` command to compile on the fly as you code.

This sounds like a bit of a hassle, but it's worth your while. Compass leverages Sass to a whole new level with it's library of mixins and an ecosystem of Compass extensions: [grid systems](https://github.com/Team-Sass/Singularity), [tools to make your site responsive](https://github.com/lolmaus/breakpoint-slicer), handy [shortcuts](http://jaredhardy.com/sassy-buttons/) and [tools](https://github.com/Team-Sass/toolkit).

# batch-file - 批处理文件根据部分名称移动文件

> ID：16207587
> 
> 赞同：2
> 
> 时间：2013-04-25T06:09:34.660
> 
> 标签：batch-file, directory, move

bat 文件是否可以搜索文件夹并查看文件名并仅移动具有该名称或该名称的一部分的文件？然后将它们移动到指定位置。例如：

```
Parent Folder 
Arrow0273.text
Arrow0314.text
Spear083112.text
Spear0832.text 
Sheild087.txt
Sheild87.txt 

Move only the files with “Arrow” in their name into folder location “A”. 
ect... 
```

多谢你们！编辑：找到这个但不确定它是否是我正在寻找的，老实说，不确定该代码是如何工作的。[根据文件名的某些部分将文件移动到目录？](https://stackoverflow.com/questions/15782766/move-files-to-directories-based-on-some-part-of-file-name)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-13T19:25:47.883

也许是这样的？不久前我在这里找到了这个，我一直在使用它。它将根据文件名和类型将文件移动到文件夹中。如果该文件夹不存在，它将在批处理文件的当前位置创建该文件夹。如果文件夹已经存在，它只会将其移动到该文件夹​​。

```
@echo off &setlocal
for /f "delims=" %%i in ('dir /b /a-d *.text') do (
set "filename1=%%~i"
setlocal enabledelayedexpansion
set "folder1=!filename1:~0,1!"
mkdir "!folder1!" 2>nul
move "!filename1!" "!folder1!" >nul
endlocal
) 
```

*可以更改第 2 行中*的“ .pdf”以指定文件类型。*您可以使用“* .*”移动所有文件类型，但这也会移动 .bat 文件和文件夹。

“~0,1！” 在第 5 行中确定查看哪些字符以确定文件夹名称。第一个数字决定了它开始查看的字符（0 是开头，1 是从开头开始的 1 个字符，等等）。第二个数字决定了它查看的字符数。如果更改为 2，它将查看文件中的前 2 个字符。

目前它被设置为只查看第一个字符并且只移动 .text 文件。对于您示例中的文件，它将移动名为“A”的文件夹的所有“Arrow”文件，并将所有“Spear”文件移动到名为“S”的文件夹中。“屏蔽”文件将保留在原处，因为它们的扩展名是 .txt，而不是 .text。如果您将“ *.text”更改为“* .t*”，它会将 .txt 和 .text 文件移动到“A”和“S”文件夹中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T06:17:53.203

copy 支持通配符，所以您需要做的就是：

`copy Arrow* A`

# ios - 如何在 xcode 中使用可达性来评估 Internet 连接

> ID：16207591
> 
> 赞同：1
> 
> 时间：2013-04-25T06:10:12.877
> 
> 标签：ios, objective-c, networking

我是 iphone 新手，我想知道如何在 xcode 中使用可达性。我继续阅读[可达性示例](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)并阅读它，但了解它。我创建了一个应用程序并将 Reachability.m 和 Reachability.h 放入其中，但我不知道如何使用它。

请指导我。我想在运行应用程序时随时检查我的网络连接并运行此代码：

```
if (isConnection)
{
NSLog(@"Connection Success")
}
else
NSLog(@"Connection has been lost") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:17:16.243

你可以这样做：

```
 Reachability *reachability = [Reachability reachabilityForInternetConnection];
 NetworkStatus internetStatus = [reachability currentReachabilityStatus]; 
```

现在`internetStatus`通过检查它的值来检查 var。这些值定义为：

```
typedef enum 
{
    // Apple NetworkStatus Compatible Names.
    NotReachable     = 0,
    ReachableViaWiFi = 2,
    ReachableViaWWAN = 1
} NetworkStatus; 
```

所以，在你的情况下：

```
if (internetStatus == NotReachable)
{
   NSLog(@"Bazinga!");
}
else
{
   NSLog(@"Houston we have ignition");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:14:59.713

下载可达性类并遵循此代码

```
internetReach = [[Reachability reachabilityForInternetConnection] retain];
[internetReach startNotifier]; 
```

然后我们将设置在 Reachability 中创建的 NetworkStatus 变量。

```
NetworkStatus netStatus = [internetReach currentReachabilityStatus]; 
```

最后，我们将在 switch 块中使用 netStatus。

```
switch (netStatus)
{            
    case ReachableViaWWAN:
    {
        break;
    }
    case ReachableViaWiFi:
    {
        break;
    }
    case NotReachable:
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"We are unable to make a internet connection at this time. Some functionality will be limited until a connection is made." delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
        [alert show];   
        [alert release];
        break;
    }

}

- (void) reachabilityChanged: (NSNotification* )note
{
    Reachability* curReach = [note object];
    NSParameterAssert([curReach isKindOfClass: [Reachability class]]);

    NetworkStatus netStatus = [curReach currentReachabilityStatus];
    switch (netStatus)
    {
        case ReachableViaWWAN:
        {
            break;
        }
        case ReachableViaWiFi:
        {
            break;
        }
        case NotReachable:
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"We are unable to make a internet connection at this time. Some functionality will be limited until a connection is made." delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
            [alert show];   
            [alert release];
            break;
        }
    }
} 
```

# typescript - 如何在 TypeScript 中访问静态方法

> ID：16207593
> 
> 赞同：76
> 
> 时间：2013-04-25T06:10:20.860
> 
> 标签：typescript

我正在尝试这样做，但它并没有像我期望的那样工作。

（我正在使用 AMD 选项）

```
//logger.ts
export class Logger {

    static log(message: string) {
        //do stuff
    }
}

//main.ts
import logger = module('services/logger');
logger.log("test"); //The property 'log' does not exist on value of type '"logger"'
logger.Logger.log(); //works 
```

你是怎么做 logger.log() 的？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2015-10-18T16:18:03.657

您可以直接导入类，这使您可以拥有所需的用法。

```
// usage
import { Logger } from 'path/logger.ts'
Logger.Log(); 
```

并且定义保持不变。

```
// path/logger.ts
export class Logger {

    static Log() {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-25T07:00:28.673

**这个答案在发布时是正确的。现在已弃用。请参阅[Dimitris 的答案](https://stackoverflow.com/a/33200215/1982385)以获得更好的当前解决方案。**

使用类，你不能。你总是需要打电话`{module}.{class}.{function}`

但是您可以完全放弃课程，只需致电`{module}.{function}`：

```
// services/logger.ts
export function log(message:string){
 // do stuff
}

//main.ts
import logger = module('services/logger');
logger.log("test"); // Should work 
```

# mule - 骡子如何调用组件？

> ID：16207597
> 
> 赞同：2
> 
> 时间：2013-04-25T06:10:33.687
> 
> 标签：mule, mule-studio

在浏览了一些关于[Mule](http://www.mulesoft.org/)的指南之后，我有一个关于该组件的问题，正如 mule 文档中所说，

> 一个简单的 POJO（Plain Old Java Object）组件，当收到消息时 Mule 将调用该组件。可以使用子对象工厂元素或通过“类”属性指定要使用的类或对象实例。如果使用 'class' 属性，则也无法配置对象工厂。使用“类”属性等同于使用原型对象工厂（“原型对象”子元素）。

在这个文档中只是说当收到消息时，Mule 将调用该组件，但问题是 Mule 如何知道该组件有多少个方法，以及应该调用哪个方法？或者组件中必须有一种方法，无论方法名称如何？还有mule如何处理方法的参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T15:31:58.137

或者，您可以使用：

```
<invoke object-ref="..." method="..."  methodArguments="..." /> 
```

这比配置入口点解析器更方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:58:27.623

是的，我得到了答案，答案是使用[mule 入口点](http://blogs.mulesoft.org/mule-school-invoking-component-methods-using-entry-point-resolvers/)

# android - 从我的菜单打开首选项时应用程序崩溃

> ID：16207599
> 
> 赞同：0
> 
> 时间：2013-04-25T06:10:45.173
> 
> 标签：android, android-preferences

当我从菜单中选择首选项时，我的应用程序崩溃并出现以下错误。

```
04-25 11:02:01.177: D/AndroidRuntime(888): Shutting down VM
04-25 11:02:01.177: W/dalvikvm(888): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
04-25 11:02:01.227: E/AndroidRuntime(888): FATAL EXCEPTION: main
04-25 11:02:01.227: E/AndroidRuntime(888): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.thenewboston.travis.prefs }
04-25 11:02:01.227: E/AndroidRuntime(888):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1622)
04-25 11:02:01.227: E/AndroidRuntime(888):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
04-25 11:02:01.227: E/AndroidRuntime(888):  at android.app.Activity.startActivityForResult(Activity.java:3370)
04-25 11:02:01.227: E/AndroidRuntime(888):  at android.app.Activity.startActivityForResult(Activity.java:3331)
04-25 11:02:01.227: E/AndroidRuntime(888):  at android.app.Activity.startActivity(Activity.java:3566)
04-25 11:02:01.227: E/AndroidRuntime(888):  at android.app.Activity.startActivity(Activity.java:3534)
04-25 11:02:01.227: E/AndroidRuntime(888):  at com.thenewboston.travis.Menu.onOptionsItemSelected(Menu.java:65)
04-25 11:02:01.227: E/AndroidRuntime(888):  at android.app.Activity.onMenuItemSelected(Activity.java:2548)
04-25 11:02:01.227: E/AndroidRuntime(888):  at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:980)
04-25 11:02:01.227: E/AndroidRuntime(888):  at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
04-25 11:02:01.227: E/AndroidRuntime(888):  at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
04-25 11:02:01.227: E/AndroidRuntime(888):  at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
04-25 11:02:01.227: E/AndroidRuntime(888):  at com.android.internal.view.menu.ListMenuPresenter.onItemClick(ListMenuPresenter.java:166)
04-25 11:02:01.227: E/AndroidRuntime(888):  at android.widget.AdapterView.performItemClick(AdapterView.java:298)
04-25 11:02:01.227: E/AndroidRuntime(888):  at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
04-25 11:02:01.227: E/AndroidRuntime(888):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
04-25 11:02:01.227: E/AndroidRuntime(888):  at android.widget.AbsListView$1.run(AbsListView.java:3423)
04-25 11:02:01.227: E/AndroidRuntime(888):  at android.os.Handler.handleCallback(Handler.java:725)
04-25 11:02:01.227: E/AndroidRuntime(888):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-25 11:02:01.227: E/AndroidRuntime(888):  at android.os.Looper.loop(Looper.java:137)
04-25 11:02:01.227: E/AndroidRuntime(888):  at android.app.ActivityThread.main(ActivityThread.java:5039)
04-25 11:02:01.227: E/AndroidRuntime(888):  at java.lang.reflect.Method.invokeNative(Native Method)
04-25 11:02:01.227: E/AndroidRuntime(888):  at java.lang.reflect.Method.invoke(Method.java:511)
04-25 11:02:01.227: E/AndroidRuntime(888):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-25 11:02:01.227: E/AndroidRuntime(888):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-25 11:02:01.227: E/AndroidRuntime(888):  at dalvik.system.NativeStart.main(Native Method) 
```

首选项`enter code here`.xml

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <EditTextPreference
    android:title="EditText"
    android:key="name"
    android:summary="Enter Your Name"
    ></EditTextPreference>
    <CheckBoxPreference
        android:title="CheckkBox"
        android:defaultValue="true"
        android:key="checkbox"
        android:summary="Check This box">

    </CheckBoxPreference>
    <ListPreference `enter code here`
        android:title="list"
        android:key="list"
        android:summary="This is a list to choose from"
        android:entries="@array/list"
        android:entryValues="@array/lValues">
        </ListPreference>

</PreferenceScreen> 
```

首选项.java

```
package com.thenewboston.travis;

import android.os.Bundle;
import android.preference.PreferenceActivity;

public class prefs extends PreferenceActivity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.prefs);
    }

} 
```

菜单.java

```
package com.thenewboston.travis;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Menu extends ListActivity{

    String classes[] = {"StartingPoint","TextPlay","Email","Camera",
                        "Data","example5","example6","example7"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(Menu.this, android.R.layout.simple_list_item_1, classes));

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub

        super.onListItemClick(l, v, position, id);
        String cheese  = classes[position];
        try {
            Class ourClass = Class.forName("com.thenewboston.travis."+cheese);
            Intent ourIntent = new Intent(Menu.this,ourClass);
            startActivity(ourIntent);
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    @Override
    public boolean onCreateOptionsMenu(android.view.Menu menu) {
        // TODO Auto-generated method stub
        super.onCreateOptionsMenu(menu);
        MenuInflater blowUp = getMenuInflater();
        blowUp.inflate(R.menu.cool_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
            switch(item.getItemId()){

            case R.id.aboutMe:
                Intent i = new Intent("com.thenewboston.travis.About");
                startActivity(i);

                break;
            case R.id.preferences :
                Intent i1 = new Intent("com.thenewboston.travis.prefs");
                startActivity(i1);
                break;
            case R.id.exit:
                finish();
                break;
            }
        return false;
    }

} 
```

Androidmanifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.thenewboston.travis"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.SET_WALLPAPER"/>

    <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="KCRaju"
    android:theme="@style/AppTheme">
    <activity
        android:name="com.thenewboston.travis.Splash"
        android:label="KCRaju"
        android:screenOrientation="portrait" >
        <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".StartingPoint"
        android:label="KCRaju" >
        <intent-filter>
        <action android:name="com.thenewboston.travis.STARTINGPOINT" />
        <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Menu"
        android:label="KCRaju" >
        <intent-filter>
        <action android:name="com.thenewboston.travis.MENU" />
        <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
     <activity
        android:name=".prefs"
        android:label="KCRaju" >
        <intent-filter>
        <action android:name="com.thenewboston.travis.PREFS" />
        <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".About"
        android:label="KCRaju"
        android:theme="@android:style/Theme.Dialog" >
        <intent-filter>
        <action android:name="com.thenewboston.travis.About" />
        <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>
    </activity>
        <activity android:name=".TextPlay" android:label="@string/app_name" >
    </activity>
        <activity android:name=".Email" android:label="@string/app_name" >
    </activity>
         <activity android:name=".Camera" android:label="@string/app_name" android:screenOrientation="portrait" >
    </activity>
     <activity android:name=".Data" android:label="@string/app_name" android:screenOrientation="portrait" >
    </activity>
    <activity android:name=".OpenedClass" android:label="@string/app_name" android:screenOrientation="portrait" >
    </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:22:17.520

您与用于启动 Activity 的 Action 字符串的大小写不匹配：

```
Intent i1 = new Intent("com.thenewboston.travis.prefs");
startActivity(i1); 
```

与您在清单中声明的​​内容相比：

```
 <activity
    android:name=".prefs"
    android:label="KCRaju" >
    <intent-filter>
    <action android:name="com.thenewboston.travis.PREFS" />
    <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

因此，您正在使用 Action 创建一个意图`"com.thenewboston.travis.prefs"`，但您的 IntentFilter 将匹配`"com.thenewboston.travis.PREFS"`。

或者，尝试`<intent-filter>`从`prefs`Manifest 中的声明中删除 ，并更改启动它的方式：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
        switch(item.getItemId()){

        case R.id.aboutMe:
            Intent i = new Intent(this, About.class);
            startActivity(i);

            break;
        case R.id.preferences :
            Intent i1 = new Intent(this, prefs.class);
            startActivity(i1);
            break;
        case R.id.exit:
            finish();
            break;
        }
    return false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:25:48.850

在您的清单中，您将活动操作声明为：

```
<activity
        android:name=".prefs"
        android:label="KCRaju" >
        <intent-filter>
        <action android:name="com.thenewboston.travis.PREFS" />
        <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

注意`PREFS`大写字母..在您的代码中您使用的是小写字母`prefs`：

```
case R.id.preferences :
                Intent i1 = new Intent("com.thenewboston.travis.prefs");
                startActivity(i1);
                break; 
```

尝试使用`PREFS`大写字母，如以下代码：

```
case R.id.preferences :
                Intent i1 = new Intent("com.thenewboston.travis.PREFS");
                startActivity(i1);
                break; 
```

# java - 效率 - 在等待变量更改的循环中使用 Thread.yield

> ID：16207602
> 
> 赞同：0
> 
> 时间：2013-04-25T06:10:52.567
> 
> 标签：java, multithreading, asynchronous

我有一些如下所示的代码：

```
while (this.conditionIsNotYetMet){
    if (timeout()) break;
    // Don't do anything, just wait till the condition is 
    // filled by a different thread or timeout occurs.
}
performSomeCode(); // this code relies on the condition having been met 
```

代码有效 - 最终另一个线程满足条件，代码执行。

我很好奇加入 Thread.yield() 是否是一个好主意 - 无论哪种方式似乎都是正确的，在这个阶段我感觉不到性能差异 - 但我担心将来它可能会有所作为，例如在不同的平台上。

即代码将成为

```
while (this.conditionIsNotYetMet){
    if (timeout()) break;
    Thread.yield(); // <----  CHANGE IS HERE!!!!
    // Don't do anything, just wait till the condition is 
    // filled by a different thread or timeout occurs.
}
performSomeCode(); // this code relies on the condition having been met 
```

我知道使用锁或异步任务可能有一种更正式的方式来实现这种模式，但是这个解决方案目前运行良好并且足够清晰，那么为什么要改变呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:00:36.423

不，你几乎不应该使用`yield()`，绝对不应该等待条件变为真。相反，您应该研究“真正的”并发控制机制，例如[Condition](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html)（导致线程休眠直到被另一个线程唤醒）或[CountDownLatch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)（导致线程休眠直到发生一定数量的信号）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:28:37.483

`yield()`在您看到其他线程停滞的情况下很有用。换句话说，你有一个非常活跃的线程，它总是以某种方式优先于其他从未真正做任何事情的线程。从您的活动线程调用`yield()`会强制它更改另一个正在运行的线程。

如果你的程序和你的例子一样简单，你可能不需要调用 yield，加上根据 timeout() 的实现方式（如果它有一个`Thread.sleep()`或`Object.wait()`内部），它也会像 yield 一样隐式地导致上下文切换。

因此，您不需要编写它，但无论如何您可能已经获得了它的效果。

PS：正如 Extreme Coders 指出的那样，您可能想要使用等待通知模式，这是[一个示例](https://stackoverflow.com/questions/2536692/a-simple-scenario-using-wait-and-notify-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:34:28.020

调用 yield() 只是对操作系统的提示，除非有线程在等待，否则它可能什么也不做。如果你想让 CPU 休息一下，你可以调用`Thread.sleep(10);`10 毫秒，或者如果你愿意，可以更短。

顺便说一句，鉴于您正在等待超时，您可以致电

```
Thread.sleep(timeUntilTimeoutInMilliSeconds); 
```

# javascript - 动态模式 Javascript

> ID：16207609
> 
> 赞同：0
> 
> 时间：2013-04-25T06:11:12.860
> 
> 标签：javascript

我收到了远程服务的请求，该服务为我提供了具有以下模式的字段：

```
[a-zA-Zа-яА-ЯёЁ'+-]{1,100}
[0-9a-zA-Zа-яА-ЯёЁ'+-]{2,10} 
```

方括号中包含允许的符号。大括号中包含最小和最大符号。

所以我有字段和它们的模式。

如何通过传入模式验证输入的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:19:00.657

将字符串发送到`RegExp`构造函数并使用`test`.

例如：

```
string = "[a-zA-Zа-яА-ЯёЁ'+-]{1,100}"
pattern = new RegExp(string)

alert(pattern.test("This works, привет, 123"));
alert(pattern.test("$☛☛")); 
```

[现场演示](http://jsfiddle.net/a78j7/)

根据您的情况，您可能需要在模式中添加“^”和“$”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:32:14.553

一个简单的例子：

```
var s = "hello123";

var r1 = "[a-zA-Zа-яА-ЯёЁ'+-]{1,100}"; // the pattern you were given
var reg1 = RegExp("^" + r1 + "$");     // the pattern enclosed in `^` `$`

var r2 = "[0-9a-zA-Zа-яА-ЯёЁ'+-]{2,10}";
var reg2 = RegExp("^" + r2 + "$");

alert(reg1.test(s)); // false
alert(reg2.test(s)); // true 
```

正则表达式具有您提到的模式，但包含在`^`和之间`$`- 表示“整个表达式”。第一个表达式失败，因为有一个`s`不允许的数字。第二个表达式通过 - 它只有数字和字母，总共 2 到 10 个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:20:51.810

您应该使用 JavaScript 正则表达式来解决这个问题。

你可以这样做

```
"some test".match(/[a-zA-Zа-яА-ЯёЁ'+-]{1,100}/) 
```

返回 ["some"]

或者

```
/[a-zA-Zа-яА-ЯёЁ'+-]{1,100}/.test("some test") 
```

返回真

# jsf-2 - Primefaces 收集器删除不起作用

> ID：16207617
> 
> 赞同：0
> 
> 时间：2013-04-25T06:11:35.820
> 
> 标签：jsf-2, collections, primefaces

我正在测试 Showcase 中为我在某处读到的代码中给出的 primefaces 收集器示例，有必要为此重写 equals 和 hashcode 方法。

即使在覆盖方法之后，我仍然遇到同样的错误。

请告诉我我的代码有什么问题

用户.java

```
 @ManagedBean
  public class User implements Serializable{

        public String name;
        public String designation;
        public String division;

public User(String name,String division){
   setName(name);
   setDivision(division);
}
public User(){

}

public String getDesignation() {
    return designation;
}

public void setDesignation(String designation) {
    this.designation = designation;
}

public String getDivision() {
    return division;
}

public void setDivision(String userDivision) {
    this.division = userDivision;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

}

} 
```

commApprover.java

```
@ManagedBean
@ViewScoped
public class CommApprover implements Serializable{

private User approver = new User();

private List<User> approvers = new ArrayList<User>();

public String reinit() {
    approver = new User();

    return null;
}

public User getApprover() {
    return approver;
}

public void setApprover(User approver) {
    this.approver = approver;
}

public List<User> getApprovers() {
    return approvers;
}

public void setApprovers(List<User> approvers) {
    this.approvers = approvers;
}

@Override
public boolean equals(Object o) 
{ 
    if (this == o) 
        return true; 
    if (o == null || getClass() != o.getClass()) 
        return false; 
     if (approver!= null ? !approver.equals(this.approver) : this.approver != null) 
         return false;

     return true; 
 }  

     @Override 
     public int hashCode() 
     { 
         int result = approver.hashCode(); 

         return result; 
     } 

} 
```

索引.xhtml

```
<p:growl id="msgs" />

<p:panel header="Approval Route ">
        <h:panelGrid columns="3" id="grid">
            <h:outputText  value="Name*" />
  <h:outputText value="Designation*" />
<h:outputText value="Division*" />

<p:inputText id="app_name" value="#{commApprover.approver.name}" required="true"/>
<p:inputText id="app_designation" value="#{commApprover.approver.designation}"     required="true"/>
<p:inputText id="app_division" required="true" value="#    {commApprover.approver.division}" />

<p:commandButton id="btn_add" value="Add" update="approvers @parent" action="#{commApprover.reinit}" >
<p:collector value="#{commApprover.approver}"  addTo="#{commApprover.approvers}" />
</p:commandButton>

</h:panelGrid>

</p:panel>

<p:outputPanel id="approvers">
<p:dataTable id="approversTable" value="#{commApprover.approvers}" var="approver">

<p:column>
<f:facet name="header">
    <h:outputText value="Name" />
</f:facet>
<h:outputText value="#{approver.name}" />
</p:column>

<p:column>
<f:facet name="header">
<h:outputText value="Designation" />
</f:facet>
<h:outputText value="#{approver.designation}" />
</p:column>
<p:column>
<f:facet name="header">
<h:outputText value="Division" />
</f:facet>
<h:outputText value="#{approver.division}" />
</p:column>

<p:column>
<f:facet name="header">
<h:outputText value="Operation" />
</f:facet>
<p:commandLink ajax="true" value="Remove" update=":appform:approvers" process=":appform:approvers">
<p:collector  value="#{approver}" removeFrom="#{commApprover.approvers}" />
</p:commandLink>
</p:column>
</p:dataTable>
</p:outputPanel>

   </h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-11T17:35:11.610

这篇文章很旧，但我遇到了同样的问题，经过一些调试，我发现这个问题与错误实现**hashCode**和**equals**有关，当使用转换器或 p:collector 时，你必须实现**hashCode**和**equals**来比较你的所有字段实体，否则即使您尝试删除的项目是正确的，它也会失败。还建议您在 Pojo 中覆盖这些属性，而不是在 ManagedBean 中。这篇文章帮助我理解了这个问题[https://blog.art-of-coding.eu/jsf-converters-and-equals-hashcode/](https://blog.art-of-coding.eu/jsf-converters-and-equals-hashcode/)

# java - 字符串内容相同但equals方法返回false

> ID：16207625
> 
> 赞同：3
> 
> 时间：2013-04-25T06:12:16.477
> 
> 标签：java, stringescapeutils

我正在使用 StringEscapeUtils 来转义和取消转义 html。我有以下代码

```
import org.apache.commons.lang.StringEscapeUtils;

public class EscapeUtils {

    public static void main(String args[]) {

        String string = "    4-Spaces    ,\"Double Quote\", 'Single Quote', \\Back-Slash\\, /Forward Slash/ ";

        String escaped = StringEscapeUtils.escapeHtml(string);
        String myEscaped = escapeHtml(string);

        String unescaped = StringEscapeUtils.unescapeHtml(escaped);
        String myUnescaped = StringEscapeUtils.unescapeHtml(myEscaped);

        System.out.println("Real String: " + string);
        System.out.println();
        System.out.println("Escaped String: " + escaped);
        System.out.println("My Escaped String: " + myEscaped);
        System.out.println();
        System.out.println("Unescaped String: " + unescaped);
        System.out.println("My Unescaped String: " + myUnescaped);
        System.out.println();
        System.out.println("Comparison:");
        System.out.println("Real String == Unescaped String: " + string.equals(unescaped));
        System.out.println("Real String == My Unescaped String: " + string.equals(myUnescaped));
        System.out.println("Unescaped String == My Unescaped String: " + unescaped.equals(myUnescaped));

    }

    public static String escapeHtml(String s) {
        String escaped = "";
        if(null != s) {
            escaped = StringEscapeUtils.escapeHtml(s);
            escaped = escaped.replaceAll(" ","&nbsp;");
            escaped = escaped.replaceAll("'","&#39;");
            escaped = escaped.replaceAll("\\\\","&#92;");
            escaped = escaped.replaceAll("/","&#47;");
        }
        return escaped;
    }

} 
```

输出：

```
Real String:     4-Spaces    ,"Double Quote", 'Single Quote', \Back-Slash\, /Forward Slash/ 

Escaped String:     4-Spaces    ,&quot;Double Quote&quot;, 'Single Quote', \Back-Slash\, /Forward Slash/ 
My Escaped String: &nbsp;&nbsp;&nbsp;&nbsp;4-Spaces&nbsp;&nbsp;&nbsp;&nbsp;,&quot;Double&nbsp;Quote&quot;,&nbsp;&#39;Single&nbsp;Quote&#39;,&nbsp;&#92;Back-Slash&#92;,&nbsp;&#47;Forward&nbsp;Slash&#47;&nbsp;

Unescaped String:     4-Spaces    ,"Double Quote", 'Single Quote', \Back-Slash\, /Forward Slash/ 
My Unescaped String:     4-Spaces    ,"Double Quote", 'Single Quote', \Back-Slash\, /Forward Slash/ 

Comparison:
Real String == Unescaped String: true
Real String == My Unescaped String: false
Unescaped String == My Unescaped String: false 
```

我`escaped`是真实的`string`然后`unescaped`它。但`myEsceped`首先使用相同的过程进行转义，然后将更多的 html 字符替换为其 html 代码。`myUnescaped`实际上是 unescape ，`myEscaped`其内容与真实字符串的内容相同。

输出显示 real `string`, `unescaped`, 和`myUnescaped`内容相同。但是，与比较部分一样，`myUnescaped`不等于`string`and `unescaped`。

我还不明白这里到底发生了什么。谁能解释一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:05:19.253

This due to while escaping HTML, you are replacing `' '` with `&nbsp;`

```
public static String escapeHtml(String s) {
        String escaped = "";
        if(null != s) {
            escaped = StringEscapeUtils.escapeHtml(s);
            escaped = escaped.replaceAll(" ","&nbsp;"); // HERE
            escaped = escaped.replaceAll("'","&#39;");
            escaped = escaped.replaceAll("\\\\","&#92;");
            escaped = escaped.replaceAll("/","&#47;");
        }
        return escaped;
    } 
```

While [`StringEscapeUtils.escapeHtml`](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringEscapeUtils.html) does not escape `' '`, below is the example on their site:

```
"bread" & "butter" 
```

becomes

```
&quot;bread&quot; &amp; &quot;butter&quot; 
```

**Which means `StringEscapeUtils.escapeHtml` preserves spaces**

If from `escapeHtml` you remove `escaped = escaped.replaceAll(" ","&nbsp;");`, `unescaped` and `myUnescaped` match !

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:10:44.523

在[Apurv Answer](https://stackoverflow.com/a/16208430/1307229)之后，我分析了字符串的字节数组。

```
String:        32,  32,  32,  32,  52,  45,  83, 112,  97,  99, 101, 115,  32,  32,  32,  32,  44,  34,  68, 111, 117,  98, 108, 101,  32,  81, 117, 111, 116, 101,  34,  44,  32,  39,  83, 105, 110, 103, 108, 101,  32,  81, 117, 111, 116, 101,  39,  44,  32,  92,  66,  97,  99, 107,  45,  83, 108,  97, 115, 104,  92,  44,  32,  47,  70, 111, 114, 119,  97, 114, 100,  32,  83, 108,  97, 115, 104,  47,  32
unescaped :    32,  32,  32,  32,  52,  45,  83, 112,  97,  99, 101, 115,  32,  32,  32,  32,  44,  34,  68, 111, 117,  98, 108, 101,  32,  81, 117, 111, 116, 101,  34,  44,  32,  39,  83, 105, 110, 103, 108, 101,  32,  81, 117, 111, 116, 101,  39,  44,  32,  92,  66,  97,  99, 107,  45,  83, 108,  97, 115, 104,  92,  44,  32,  47,  70, 111, 114, 119,  97, 114, 100,  32,  83, 108,  97, 115, 104,  47,  32
myUnescaped:  -96, -96, -96, -96,  52,  45,  83, 112,  97,  99, 101, 115, -96, -96, -96, -96,  44,  34,  68, 111, 117,  98, 108, 101, -96,  81, 117, 111, 116, 101,  34,  44, -96,  39,  83, 105, 110, 103, 108, 101, -96,  81, 117, 111, 116, 101,  39,  44, -96,  92,  66,  97,  99, 107,  45,  83, 108,  97, 115, 104,  92,  44, -96,  47,  70, 111, 114, 119,  97, 114, 100, -96,  83, 108,  97, 115, 104,  47, -96 
```

我似乎在`myUnescaped`，空格已转换为 ascii`-96`而不是`32`.

所以我写了一个`unescapeHtml`方法如下。此方法首先替换`&nbsp`为空格，然后用于`StringEscapeUtils`对 html 进行转义。

```
public static String unescapeHtml(String s) {
    String unescaped = "";
    if(null != s) {
        unescaped = s.replaceAll("&nbsp;", " ");
        unescaped = StringEscapeUtils.unescapeHtml(unescaped);
    }
    return unescaped;
} 
```

然后我开始`myUnescaped`使用以下代码。

```
String myUnescaped = unescapeHtml(myEscaped); 
```

这给了我`myUnescaped`等于`string`and的字符串`unescaped`。

**或者**我替换`&nbsp;`为`&#32;`. 这不需要我写方法`unescapeHtml`。更新`escapeHtml`方法的代码如下。

```
public static String escapeHtml(String s) {
    String escaped = "";
    if(null != s) {
        escaped = StringEscapeUtils.escapeHtml(s);
        escaped = escaped.replaceAll(" ","&#32;");    //updated line 
        escaped = escaped.replaceAll("'","&#39;");
        escaped = escaped.replaceAll("\\\\","&#92;");
        escaped = escaped.replaceAll("/","&#47;");
    }
    return escaped;
} 
```

# c - ISO_8583 信息包装

> ID：16207627
> 
> 赞同：1
> 
> 时间：2013-04-25T06:12:26.110
> 
> 标签：c

我正在尝试在`iso 8583`下面打包一条消息

`00 2F 60 01 23 06 00 08 00 20 20 01 00 00 c0 00 00 92 00 00 00 00 12 01 23 48 30 30 30 30 30 30 39 53 31 30 30 30 30 30 30 30 30 30 30 30 30 35`

在这里，当我从位图中提取位字段时，我得到了字段`3,11,24,41,42`和`3`所在`11`的`N6 format`字段，字段`24`在`N3 format`和字段`41,42`中`ANS format..`

在发送数据包之前，数字格式的字段需要由函数更改为 BCD 格式

```
enter code here

void vAscii2BCD(unsigned char *pucSrc, unsigned char *pucDst, int inSize)
{
for (; inSize > 0; inSize -= 2, pucDst++) 
{
    if(!memcmp(pucSrc, "3D", 2))
    {
        pucSrc += 2;
        *pucDst = '=';

    }
    else
    {
        *pucDst = cHexDigit_to_Nibble1(*pucSrc++) << 4;
        *pucDst |= cHexDigit_to_Nibble1(*pucSrc++);
    }
}
printf("data is %s\n\n",pucDst);
} 
```

但是当我尝试将所有'00'转换为BCD并将这个00添加到字符串的其余部分时它失败了..当我对消息执行“00”的strcat然后在接收端它会作为“ 3030"

任何人都可以建议我如何编码 00 以便在接收端也可以接收所有相应的 00。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:15:23.727

C 字符串由`00`（如您所说）终止，因此任何使用标准字符串操作的尝试`%s`都`strcat`将失败。您将不得不对`char`自己维护长度的缓冲区进行操作（如果您需要打印或发送它，请使用该长度，或者一次一个字节地自己迭代它）。

# c# - 检测驱动器 c# 中 dvd 插入的最佳方法

> ID：16207628
> 
> 赞同：1
> 
> 时间：2013-04-25T06:12:28.390
> 
> 标签：c#, wmi, driveinfo

我尝试使用 WMI 使用以下代码检测磁盘驱动器中的新媒体插入。但是是否有托管解决方案，例如在 DriveInfo.GetDrives 的后台线程中使用循环？这是最好的方法吗？当我尝试以下代码时，我收到“磁盘不在驱动器中，请插入磁盘”对话框，其中包含中止、重试和继续按钮？在可能的机器上它工作正常。

```
private void DriveWatcher()
{
    try
    {
        var wqlEventQuery = new WqlEventQuery
            {
                EventClassName = "__InstanceModificationEvent",
                WithinInterval = new TimeSpan(0, 0, 1),
                Condition =
                    @"TargetInstance ISA 'Win32_LogicalDisk' and TargetInstance.DriveType = 5"
            };

        var connectionOptions = new ConnectionOptions
            {
                EnablePrivileges = true,
                Authority = null,
                Authentication = AuthenticationLevel.Default
            };

        var managementScope = new ManagementScope("\\root\\CIMV2", connectionOptions);

        ManagementEventWatcher = new ManagementEventWatcher(managementScope, wqlEventQuery);
        ManagementEventWatcher.EventArrived += CdrEventArrived;
        ManagementEventWatcher.Start();
    }
    catch (ManagementException e)
    {
        MessageBox.Show(e.Message, e.GetType().ToString(), MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
}

private void CdrEventArrived(object sender, EventArrivedEventArgs e)
{
    var wmiDevice = (ManagementBaseObject) e.NewEvent["TargetInstance"];
    if (wmiDevice.Properties["VolumeName"].Value != null)
        GetDrives();
    else
        GetDrives();
}

private void GetDrives()
{
    if (InvokeRequired)
    {
        Invoke(new GetDrivesDelegate(GetDrives));
    }
    else
    {
        toolStripComboBoxDrives.Items.Clear();
        DriveInfo[] drives = DriveInfo.GetDrives();
        _drives = new Dictionary<string, DriveInfo>();
        int selectedIndex = 0;
        foreach (DriveInfo drive in drives)
        {
            if (drive.DriveType.Equals(DriveType.CDRom))
            {
                if (drive.IsReady)
                {
                    string name = string.Format("{0} ({1})", drive.VolumeLabel, drive.Name.Substring(0, 2));
                    int selectedDrive = toolStripComboBoxDrives.Items.Add(name);
                    _drives.Add(name, drive);
                    selectedIndex = selectedDrive;
                }
                else
                {
                    toolStripComboBoxDrives.Items.Add(drive.Name);
                    _drives.Add(drive.Name, drive);
                }
            }
        }
        toolStripComboBoxDrives.SelectedIndex = selectedIndex;
    }
} 
```

基本上我正在做的是名为 Drive Watcher 的表单加载事件。因此，当插入磁盘时，准备好的磁盘将首先在组合框中列出，用户可以轻松弹出驱动器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:51:50.310

您可以尝试使用以下代码：

```
public void networkDevice()
{
    try
    {
        WqlEventQuery q = new WqlEventQuery();
        q.EventClassName = "__InstanceModificationEvent";
        q.WithinInterval = new TimeSpan(0, 0, 1);
        q.Condition = @"TargetInstance ISA 'Win32_LogicalDisk' and TargetInstance.DriveType = 5";

        ConnectionOptions opt = new ConnectionOptions();
        opt.EnablePrivileges = true;
        opt.Authority = null;
        opt.Authentication = AuthenticationLevel.Default;
        //opt.Username = "Administrator";
        //opt.Password = "";
        ManagementScope scope = new ManagementScope("\\root\\CIMV2", opt);

        ManagementEventWatcher watcher = new ManagementEventWatcher(scope, q);
        watcher.EventArrived += new EventArrivedEventHandler(watcher_EventArrived);
        watcher.Start();
    }
    catch (ManagementException e)
    {
        Console.WriteLine(e.Message);
    }
}

void watcher_EventArrived(object sender, EventArrivedEventArgs e)
{
    ManagementBaseObject wmiDevice = (ManagementBaseObject)e.NewEvent["TargetInstance"];
    string driveName = (string)wmiDevice["DeviceID"];
    Console.WriteLine(driveName);
    Console.WriteLine(wmiDevice.Properties["VolumeName"].Value);
    Console.WriteLine((string)wmiDevice["Name"]);
    if (wmiDevice.Properties["VolumeName"].Value != null)
        Console.WriteLine("CD has been inserted");
    else
        Console.WriteLine("CD has been ejected");
} 
```

如果它在您的机器上工作并且在任何其他基于窗口的机器上都不起作用，那么您必须重建/修复/重新注册该机器的 WMI 类。[这](http://blogs.technet.com/b/askperf/archive/2009/04/13/wmi-rebuilding-the-wmi-repository.aspx)将帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T11:10:51.400

我将采用以下解决方案。这是 100% 托管的解决方案。它没有使用 WMI，而且效果很好。

```
internal class DriveWatcher
{
    public delegate void OpticalDiskArrivedEventHandler(Object sender, OpticalDiskArrivedEventArgs e);

    /// <summary>
    ///     Gets or sets the time, in seconds, before the drive watcher checks for new media insertion relative to the last occurance of check.
    /// </summary>
    public int Interval = 1;

    private Timer _driveTimer;

    private Dictionary<string, bool> _drives;

    private bool _haveDisk;

    /// <summary>
    ///     Occurs when a new optical disk is inserted or ejected.
    /// </summary>
    public event OpticalDiskArrivedEventHandler OpticalDiskArrived;

    private void OnOpticalDiskArrived(OpticalDiskArrivedEventArgs e)
    {
        OpticalDiskArrivedEventHandler handler = OpticalDiskArrived;
        if (handler != null) handler(this, e);
    }

    public void Start()
    {
        _drives = new Dictionary<string, bool>();
        foreach (
            DriveInfo drive in
                DriveInfo.GetDrives().Where(driveInfo => driveInfo.DriveType.Equals(DriveType.CDRom)))
        {
            _drives.Add(drive.Name, drive.IsReady);
        }
        _driveTimer = new Timer {Interval = Interval*1000};
        _driveTimer.Elapsed += DriveTimerOnElapsed;
        _driveTimer.Start();
    }

    public void Stop()
    {
        if (_driveTimer != null)
        {
            _driveTimer.Stop();
            _driveTimer.Dispose();
        }
    }

    private void DriveTimerOnElapsed(object sender, ElapsedEventArgs elapsedEventArgs)
    {
        if (!_haveDisk)
        {
            try
            {
                _haveDisk = true;
                foreach (DriveInfo drive in from drive in DriveInfo.GetDrives()
                                            where drive.DriveType.Equals(DriveType.CDRom)
                                            where _drives.ContainsKey(drive.Name)
                                            where !_drives[drive.Name].Equals(drive.IsReady)
                                            select drive)
                {
                    _drives[drive.Name] = drive.IsReady;
                    OnOpticalDiskArrived(new OpticalDiskArrivedEventArgs {Drive = drive});
                }
            }
            catch (Exception exception)
            {
                Debug.Write(exception.Message);
            }
            finally
            {
                _haveDisk = false;
            }
        }
    }
}

internal class OpticalDiskArrivedEventArgs : EventArgs
{
    public DriveInfo Drive;
} 
```

您可以按如下方式使用它。

```
var driveWatcher = new DriveWatcher();
driveWatcher.OpticalDiskArrived += DriveWatcherOnOpticalDiskArrived;
driveWatcher.Start();

private void DriveWatcherOnOpticalDiskArrived(object sender, OpticalDiskArrivedEventArgs e)
{
    MessageBox.Show(e.Drive.Name);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:19:21.563

**参考以下代码：**

```
foreach (DriveInfo drive in DriveInfo.GetDrives().Where(d => d.DriveType == DriveType.CDRom))  
    MessageBox.Show(drive.Name + " " + drive.IsReady.ToString()); 
```

**参考链接：**

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/1ecb74cd-d193-40f5-9aa3-47a3c9adb4ea/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/1ecb74cd-d193-40f5-9aa3-47a3c9adb4ea/)

**堆栈链接：**

[检测光盘是否在 DVD 驱动器中](https://stackoverflow.com/questions/11420365/detecting-if-disc-is-in-dvd-drive)

# svn - Tortoise SVN存储库，如何获取存储库的localhost地址（http）而不是（file：//）

> ID：16207629
> 
> 赞同：1
> 
> 时间：2013-04-25T06:12:29.267
> 
> 标签：svn, tortoisesvn

当我创建存储库时，我总是得到一个存储库地址`file://thisfolder/thisfolder/repository`

我想将我的本地主机地址用于我由 TortoiseSVN 创建的任何存储库。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:17:40.843

您需要设置一个 SVN 服务器以通过 HTTP 协议访问您的存储库。

请在 TortoiseSVN 站点查看此常见问题以进行确认：[http ://tortoisesvn.tigris.org/faq.html#noserver](http://tortoisesvn.tigris.org/faq.html#noserver)

你应该得到一个像 VisualSVN 这样的服务器：http: [//www.visualsvn.com/server/download/](http://www.visualsvn.com/server/download/)

# android - Android DeadObjectException

> ID：16207630
> 
> 赞同：2
> 
> 时间：2013-04-25T06:12:30.573
> 
> 标签：android, jakarta-ee, service

我通过名为 SmsService.java 的 Android 服务实现开发了基于 GSM SMS 通信的移动应用程序，它使用接收器作为内部类。在 SmsService 中，我们使用在应用程序运行时始终运行的 android 服务。我通过使用 BinderProxy 通过使用aidl（接口语言）来使用它，它工作正常，但一段时间后它会显示异常消息。我标记了消息以及 SmsService.java 类的代码。请大佬帮我解决一下。提前感谢，如果听不懂，对不起英语不好..

异常日志是..

```
04-24 12:53:04.230: E/SMSReceiver(980): Failed to notify listener aidl.com.services.MessageListener$Stub$Proxy@40528870

04-24 12:53:04.230: E/SMSReceiver(980): android.os.DeadObjectException
04-24 12:53:04.230: E/SMSReceiver(980):     at android.os.BinderProxy.transact(Native Method)

04-24 12:53:04.230: E/SMSReceiver(980):     at aidl.com.services.MessageListener$Stub$Proxy.handleNewMessage(MessageListener.java:76)

04-24 12:53:04.230: E/SMSReceiver(980):     at com.services.SmsService$SMSReceiver.onReceive(SmsService.java:227)
04-24 12:53:04.230: E/SMSReceiver(980):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
04-24 12:53:04.230: E/SMSReceiver(980):     at android.os.Handler.handleCallback(Handler.java:587)
04-24 12:53:04.230: E/SMSReceiver(980):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-24 12:53:04.230: E/SMSReceiver(980):     at android.os.Looper.loop(Looper.java:130)
04-24 12:53:04.230: E/SMSReceiver(980):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-24 12:53:04.230: E/SMSReceiver(980):     at java.lang.reflect.Method.invokeNative(Native Method)
04-24 12:53:04.230: E/SMSReceiver(980):     at java.lang.reflect.Method.invoke(Method.java:507)
04-24 12:53:04.230: E/SMSReceiver(980):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-24 12:53:04.230: E/SMSReceiver(980):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-24 12:53:04.230: E/SMSReceiver(980):     at dalvik.system.NativeStart.main(Native Method) 
```

最后是 SmsService.java 的代码

```
public class SmsService extends Service {

    private SMSReceiver mSMSreceiver;
    private IntentFilter mIntentFilter;
    private DataBaseAdapter dba;
    private String Tag = SmsService.class.getSimpleName();
    public final Object latestSearchResultLock = new Object();
    public List<MessageListener> listeners = new ArrayList<MessageListener>();
    private static  BufferedWriter out;
    private static int id = 0;
    private static int msgId= 0;
    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        if(SmsService.class.getName().equals(arg0.getAction())){
            Log.d(Tag, "Binding Complete" + arg0);
            return apiEndpoint;
        }else
            return null;
    }
    public SmsService(){        
        /*dba = new DataBaseAdapter(this);*/
        /*dba = DataBaseAdapter.getInstance(this);*/
        mSMSreceiver = new SMSReceiver(this);
        Log.i("On Constructor", "Assign Service");

    }
    private final Object findLatest = new Object();
    private MessageQueue<newItem> msgQueue = new MessageQueue<newItem>();

    public SmsService getService(){
        return SmsService.this;
    }

    private MessageReceiverApi.Stub apiEndpoint = new MessageReceiverApi.Stub(){

    @Override
    public void addListener(MessageListener listener) throws RemoteException {
        // TODO Auto-generated method stub
        synchronized(listeners){
            listeners.add(listener);
        }
    }

    @Override
    public void removeListener(MessageListener listener) throws RemoteException {
        // TODO Auto-generated method stub
        synchronized (listeners) {
            listeners.remove(listener);
        }
    }

    @Override
    public MessageQueue<newItem> getMessageQueueUpdated()
            throws RemoteException {
        // TODO Auto-generated method stub
        synchronized(findLatest){
            return msgQueue;
        }

    }   
    };
    @Override
    public void onCreate(){
        super.onCreate();   
        Log.i(Tag, "Service is creating");
        mIntentFilter = new IntentFilter();
        mIntentFilter.addAction(ConstantClass.SMS_RECEIVED);
        registerReceiver(mSMSreceiver,mIntentFilter);       
        Log.i(Tag, "Service is creating Successfully");
    }
    @Override 
    public int onStartCommand(Intent intent , int flags, int type){
        return START_STICKY;
    }   

    @Override 
    public void onDestroy(){
        super.onDestroy();  
        unregisterReceiver(mSMSreceiver);   
        /*if(dba!=null)
            DataBaseAdapter.getInstance(this).closeConnection();*/
    }   
    public class SMSReceiver extends BroadcastReceiver {
        /*private DataBaseAdapter dba;*/
        private Context context;
        @SuppressWarnings("unused")
        private String Strsql;
        private SMSSync sync;           
        private UtilityFunction utility;
        private boolean isCrdMatch;
        private String address,Phnumber, msg=null/*,panId =null*/,curMsg=null,mtemp=null;       
        private String devid,incAddr;
        @SuppressWarnings("unused")
        private Handler handle;
        private MessageQueue<newItem> list;
        private newItem item;
        private String Tag = SMSReceiver.class.getSimpleName();     
        public SMSReceiver(Context ctx){
            this.context = ctx;
            list=new MessageQueue <newItem>();
        }
        @Override
        public void onReceive(Context context,final Intent intents){            
            /*dba = new DataBaseAdapter(context);   */
            dba = DataBaseAdapter.getInstance(this.context);
            utility = new UtilityFunction(context);
            sync = new SMSSync(context);        
            if (intents.getAction().equals(ConstantClass.SMS_RECEIVED)) {           
            try{
                Bundle bundle = intents.getExtras();            
                if (bundle != null) {                   
                    Object[] pdus = (Object[]) bundle.get("pdus");
                    SmsMessage[] messages = new SmsMessage[pdus.length];
                    for (int i = 0; i < pdus.length; i++)
                        messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);                   

                    for (SmsMessage message : messages) {
                        msg = message.getMessageBody();
                        incAddr = message.getOriginatingAddress();
                    }
                    /*Thread.sleep(50);*/                   
                    mtemp = getMessage(msg);
                    if(mtemp!=null){ 
                        item = new newItem(mtemp);
                        list.enqueue(item); 
                        while(!list.isEmpty()){                     
                            curMsg =  list.peek().getItem();                        
                            if(curMsg.startsWith("<") &&  curMsg.endsWith(">")){
                                msgId = 0;
                                char mid = curMsg.charAt(3);
                                msgId = (int )mid;
                                Log.i(Tag, "message id:="+ msgId);                                                      
                                //dba.SetSynchronization();
                                if(msgId==50 || msgId == 54 || msgId == 56 || msgId==65 || msgId == 67 || msgId == 69 || msgId == 75 || msgId == 76){
                                    utility.displayNotification(this.context,curMsg);                                   
                                }else{                                      
                                    devid = curMsg.substring(4, 20);
                                    /*if(!dba.IsConOpenOrClose())
                                        dba.openRead();*/
                                    Cursor cur = dba.getRecordAcToID(DeviceStorage.TABLE_DEVICE, new String[]{DeviceStorage.Key_AlarmTime },
                                        DeviceStorage.Key_DevID , devid);                               
                                    if(cur.getCount()>0){
                                        cur.moveToFirst();
                                        int almTime = Integer.valueOf(cur.getString(0));
                                        if(almTime==0)
                                            utility.displayNotification(this.context,curMsg);
                                    }
                                }
                                /*if(!dba.IsConOpenOrClose())
                                    dba.Open();*/
                                int count = dba.getDeviceCount(DeviceCurrent.TABLE_CURRENT);                            
                                if(count<=0){
                                    dba.InsertCurrentCoord(id,id);
                                }else{
                                    dba.updateCommon(DeviceCurrent.TABLE_CURRENT, DeviceCurrent.Key_ReceiverCoord, DeviceCurrent.Key_ID , Integer.toString(id), Integer.toString(1));   
                                    dba.updateCommon(CoordStore.TABLE_COORD, CoordStore.Key_IsReceiverUpdate, CoordStore.Key_MBID, Integer.toString(1), Integer.toString(id));
                                    Log.i(Tag, "Updateing Coordinator for Receiver");
                                }   
                                /*sid = dba.CurrentWorkingCoordinator(DeviceCurrent.Key_SendCoord, 1);*/                                                                                        
                                Log.i(Tag, "Updateing DataBase Only for Record");       
                                ConstantClass.IsReadLog=false;
                                sync.smsProcess(curMsg);                                                        
                                /*if(msgId==50 && sid == id){
                                    panId = curMsg.substring(22, 26);
                                    authority = utility.getAuthority(); 
                                    if(authority.equals("A") && panId.equals("3000")){
                                        ConstantClass.Clear_Main_Screen=false;
                                        ConstantClass.isMainOpen = false;
                                        Intent intent = new Intent(this.context,SettingScreen.class);   
                                        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK );
                                        context.startActivity(intent);                      
                                    }
                                }       */
                                utility.getLicense();
                                Log.i(Tag, "ConstantClass Log " + String.valueOf(ConstantClass.LOGS));
                                if(ConstantClass.LOGS){
                                    WriteOnLog(curMsg,1);                                       
                                }           
                                abortBroadcast();
                                /************Now deleting the SMS from the Inbox*********************/                      
                                removeMessage(this.context, Phnumber);  
                                list.dequeue();                                         
                            synchronized(listeners){
                                for (MessageListener listener : listeners) {
                                    try {   
                                        /*listener.notify();*/
                                        listener.handleNewMessage();
                                        /*listener.asBinder();*/
                                        } catch (RemoteException e){
                                            Log.e(Tag, "Failed to notify listener " , e);
                                        }
                                    }
                                }           
                            }                                       
                        }                   
                    }
                }
            }catch(Exception e){
                Toast.makeText(this.context, "On SMS Receiver" + e.getMessage(), Toast.LENGTH_LONG).show();
                WriteOnLog(curMsg,0);
            } /*catch (Throwable e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }*/finally{
                /*if(dba.IsConOpenOrClose())
                    dba.close();
                dba=null;*/
                utility = null;
                sync=null;
            }
            }
            if(ConstantClass.Clear_Main_Screen==true && ConstantClass.isMainOpen == true){
                Intent intent = new Intent(context,ZigbeeActivity.class);   
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(intent);      
            }       
        }   
        private void removeMessage(Context context, String fromAddress) {
            Uri uriSMS = Uri.parse("content://sms/inbox");
            Cursor cursor = null;
            /*if(!dba.IsConOpenOrClose())
                dba.Open();*/
            try{
            cursor = context.getContentResolver().query(uriSMS, null, null, null, null);
            cursor.moveToFirst();
            if(cursor.getCount() > 0){ 
                int ThreadId = cursor.getInt(1);                     
                context.getContentResolver().delete(Uri.parse("content://sms/conversations/"+ThreadId), "address=?",new String[]{fromAddress});
                Log.d("Message Thread Deleted", fromAddress);         
                }         

            }catch(Exception e){
            Log.e("remove Message", e.getMessage());
            }finally{
                if(cursor!=null)
                    cursor.close();   
                /*if(dba.IsConOpenOrClose())
                    dba.close();*/
            }
        }       
    private String getMessage(String msg){
        String newMsg = null;
        try{
            int tl = incAddr.length();
            int l = tl - ConstantClass.NO;
            address = incAddr.substring(l,tl);
            isCrdMatch = MatchCoord(address);                           
            if(isCrdMatch == true) {                                
                if(msg.startsWith("<") && msg.contains(">")){                   
                    int len = Integer.valueOf(msg.substring(1, 3), 16).intValue();
                    int index = msg.indexOf(">");
                    Log.i(Tag, "Value is:" + len);
                    Log.i(Tag, "index value is:" + index);
                    if(len==index+1){
                        newMsg = msg.substring(0, len); //getting the length of the whole message and except the Garbage / 
                        Log.i(Tag, "receiving msg length is:=" + len);
                        Log.i(Tag, "receiving msg is:=" + newMsg);
                        return newMsg;  
                    }else{
                        Toast.makeText(this.context, "message Corrupt" + address, Toast.LENGTH_LONG).show();
                    }
                }
            }
        }catch(Exception e){
            e.printStackTrace();
        }
        return newMsg;
    }
        private boolean MatchCoord(String no){
            boolean isMatched = false;
            String crdNo = null;
            Cursor cursor = null;           
            try{
            cursor = dba.SelectCommon(CoordStore.TABLE_COORD, new String[]{CoordStore.Key_MBID,CoordStore.Key_MbNo}, 
                    CoordStore.Key_MbNo , new String[]{no});
            if(cursor.getCount()>0)
                cursor.moveToFirst();
            do{
                crdNo = cursor.getString(cursor.getColumnIndex(CoordStore.Key_MbNo));
                if(crdNo.equals(no)){               
                    id = cursor.getInt(cursor.getColumnIndex(CoordStore.Key_MBID));
                    Phnumber = crdNo;
                    Log.i(Tag, "Crd No is:" + Phnumber);
                    isMatched = true;
                    break;
                }
            }while(cursor.moveToNext());            
            }catch(Exception e){
                Log.e(Tag, e.getMessage());
            }finally{
                if(cursor!=null)
                    cursor.close();
            }
            return isMatched;
        }
        private void WriteOnLog(String msg,int crpt){
            File exportDir =  new File("/sdcard/CIH");     
            if (!exportDir.exists())          {              
            exportDir.mkdirs();          
            }   
            String fileName;            
                fileName = "log" + ".txt";          
            File file = new File(exportDir,fileName); 
            String txt=null ;
            try {
                if(!file.exists()){
                    file.createNewFile();
                    FileWriter Write = new FileWriter(file,true);
                    out = new BufferedWriter(Write);
                    txt = "Date Time |" + " Send/Receive |" + " Controller No |" + " Success |" +" Message " + " | Corrupt";
                     out.write( txt + "\r\n" );
                     out.flush();
                     out.close();
                }
                /*FileWriter Write = new FileWriter(file,true); 
                out = new BufferedWriter(Write);*/
                //txt = "Date Time |" + " Send/Receive |" + " Controller No |" +" Message " ;
                String header = "Date Time |" + " Send/Receive |" + " Controller No |" + " Success |" +" Message " + "| Corrupt \r\n" ;
                String dd=null,mm=null,yy=null,hh=null,min=null,ss=null,dt=null;    
                SimpleDateFormat sdfDateTime = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss", Locale.getDefault());
                String newtime =  sdfDateTime.format(new Date(System.currentTimeMillis()));             
                yy = newtime.substring(2, 4);
                mm = newtime.substring(5, 7);
                dd = newtime.substring(8, 10);
                hh = newtime.substring(11, 13);
                min = newtime.substring(14, 16);
                ss = newtime.substring(17); 
                dt = dd+"-"+mm+"-"+yy +" " + hh + ":" + min +":"+ ss;
                if(crpt == 0)
                    txt = dt + " | " +" Receive " + "| " + address + " | " + " Successfull |" + msg.toUpperCase() +" | " + " Yes \r\n" ;
                else
                    txt = dt + " | " +" Receive " + "| " + address + " | " + " Successfull |" + msg.toUpperCase() + "| No \r\n"; 

                prepend(file.getAbsolutePath(),txt,header);
                /*out.write( txt + "\n");       
                out.flush();*/          
            }          
            catch(IOException sqlEx)  {              
            Log.e("MainActivity", sqlEx.getMessage(), sqlEx);        
            }   
        }
        public  void prepend(String filename,String data,String Header) throws IOException{

             BufferedReader in = new BufferedReader(new FileReader(filename));
             StringBuilder reply = new StringBuilder();

             String str = new String();     
             reply.append(Header);       
             //////////now appending the data that current sms /////////
             reply.append(data);
             int i = 0;
             while( (str = in.readLine())!=null ){
                 if(i!=0)
                     reply.append(str + "\r\n");
               i++;
             }

             str = reply.toString();
             BufferedWriter out= new BufferedWriter(new FileWriter(filename));
             out.write(str);        

             if(in !=null){
             try{ 
                 in.close();
                 } catch(IOException e){
                 e.printStackTrace();
                 }
             if(out!=null)
                try{
                    out.close();
                } catch(IOException ex) {
                    ex.printStackTrace();
                }
            }
            }       
        }
    } 
```

# python - 将类表示为字典或列表

> ID：16207633
> 
> 赞同：7
> 
> 时间：2013-04-25T06:12:40.110
> 
> 标签：python, structure, idioms

我有用于从一个系统获取数据、进行一些修改然后将它们输出到另一个系统的类。在我完成所有必要的转换之后，通常会将其转换为 a`dict`或 a 。`list`

到目前为止，我所做的是我已经调用了两个方法`as_dict()`，`as_list()`并在我需要该表示时使用它。

但我很好奇是否有办法可以做到`dict(instance_of_my_class)`或`list(instance_of_my_class)`。

我一直在阅读[魔术方法](http://www.rafekettler.com/magicmethods.html)，似乎这是不可能的？

还有一些简单的示例代码可以使用：

```
class Cost(object):
    @property
    def a_metric(self):
        return self.raw_data.get('a_metric', 0) * 0.8

    [..]
    # Repeat for various kinds of transformations

    def as_dict(self):
        return {
          'a_metric': self.a_metric,
          [...]
        } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T06:22:53.753

你的意思是这样的吗？如果是这样，您必须定义一个`__iter__`产生键值对的方法：

```
In [1]: class A(object):
   ...:     def __init__(self):
   ...:        self.pairs = ((1,2),(2,3))
   ...:     def __iter__(self):
   ...:         return iter(self.pairs)
   ...:     

In [2]: a = A()

In [3]: dict(a)
Out[3]: {1: 2, 2: 3} 
```

* * *

此外，似乎`dict`尝试在之前调用`.keys`/`__getitem__`方法`__iter__`，因此您可以制作`list(instance)`和`dict(instance)`返回完全不同的东西。

```
In [4]: class B(object):
    ...:     def __init__(self):
    ...:        self.d = {'key':'value'}
    ...:        self.l = [1,2,3,4]
    ...:     def keys(self):
    ...:         return self.d.keys()
    ...:     def __getitem__(self, item):
    ...:         return self.d[item]
    ...:     def __iter__(self):        
    ...:         return iter(self.l)
    ...:     

In [5]: b = B()

In [6]: list(b)
Out[6]: [1, 2, 3, 4]

In [7]: dict(b)
Out[7]: {'key': 'value'} 
```

# c# - IsDBNull 的 vb.net 到 c# 转换不起作用

> ID：16207634
> 
> 赞同：0
> 
> 时间：2013-04-25T06:12:41.510
> 
> 标签：c#

以下转换不起作用。

> 错误：“只有赋值、调用、递增、递减和新对象可以用作语句”

```
VB.net
objUser.Email = IIf(IsDBNull(drow("Email")), "", drow("Email"))
C#
objUser.Email == (Information.IsDBNull(drow("Email")) ? "" : drow("Email")); 
```

我在 C# 中需要它。有任何想法吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:15:18.997

在 C#`=`中是赋值运算符和`==`比较运算符

删除`==`并替换为`=`。

假设`drow`是`DataRow`

```
objUser.Email = (drow.IsNull("Email") ? String.Empty : drow["Email"].ToString()); 
```

`?:`是三元运算符，它总是返回一个值。在您的情况下，该值被分配给`objUser.Email`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:16:21.547

您在 C# 变体中使用相等运算符而不是赋值运算符。更改为`==`，`=`因为您想要的是分配。

```
objUser.Email = (Information.IsDBNull(drow("Email")) ? "" : drow("Email")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:16:06.067

您不小心使用了比较运算符而不是赋值运算符。

```
objUser.Email == (Information.IsDBNull(drow("Email")) ? "" : drow("Email")); 
```

应该是，因为您没有进行比较，所以它是一项任务。

```
objUser.Email = (Information.IsDBNull(drow("Email")) ? "" : drow("Email")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T06:26:54.933

尝试这个：

```
objUser.Email = (DBNull.Value == drow("Email")) ? "" : drow("Email")); 
```

请参阅 DbNull 的[文档](http://msdn.microsoft.com/en-us/library/system.dbnull.value%28v=vs.100%29.aspx)- 您将在其中找到示例：

来自 MSDN

```
private string AddFieldValue(string label, DataRow row, 
                             string fieldName) 
{                                
   if (! DBNull.Value.Equals(row[fieldName])) 
      return (string) row[fieldName] + " ";
   else
      return String.Empty;
} 
```

# mysql - MySQL - 从备份文件中恢复数据库，但也保留更新的记录

> ID：16207649
> 
> 赞同：0
> 
> 时间：2013-04-25T06:13:34.867
> 
> 标签：mysql, mysqldump, database-restore

我每天执行两次完整的 MySQL 数据库备份，创建一个 MySQL 转储文件。一些记录被意外删除，但当我意识到丢失的数据时，又添加了几条记录。

在不丢失新数据的情况下恢复丢失数据的最佳方法是什么？也许通过在转储文件中将 INSERT 替换为 REPLACE ？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:42:13.033

是的，`REPLACE`根据最少的努力和明确的工作，这是最好的解决方案。

# selenium-webdriver - Selenium webdriver-如何对 xapth 进行索引

> ID：16207652
> 
> 赞同：0
> 
> 时间：2013-04-25T06:13:44.860
> 
> 标签：selenium-webdriver

我有 UI，我需要在其中选中复选框以打开另一个窗口。但是这些复选框被定义为图像，唯一的定位器是

```
//img[@src='https://myvoice-preprod.primus.ca/HPBX/hpbx/sc/skins/Enterprise/images/DynamicForm/unchecked.png'] 

List<WebElement>lChekbox =  driver.findElements(By.xpath
                ("//img[@src='https://myvoice-preprod.primus.ca/HPBX/hpbx/sc/skins/Enterprise/images/DynamicForm/unchecked.png']"));

        int iChk = lChekbox.size();
        for(int i =0; i<=iChk; i++){
            if (i==index){

            }
        } 
```

index= 所需复选框所属的表中行的索引。

如何根据索引单击此复选框/图像或如何将索引传递给此 xpath

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:31:25.120

所以实际上，你有一个`list<WebElement>`名为 lChekbox 包含所有 img 复选框未选中。

在这里获取所有图像：

```
List<WebElement> lChekbox =  driver.findElements(By.xpath
            ("//img[@src='https://myvoice-preprod.primus.ca/HPBX/hpbx/sc/skins/Enterprise/images/DynamicForm/unchecked.png']")); 
```

然后循环它直到你得到`i==index`

```
int iChk = lChekbox.size();
for(int i =0; i<=iChk; i++){
  if (i==index){
    lChekbox.get(i).click();
  }
} 
```

`.get()`-> 返回位置 i 处的元素

# android - 在 ImageView 上查找图像 单击

> ID：16207657
> 
> 赞同：2
> 
> 时间：2013-04-25T06:14:11.020
> 
> 标签：android, button, imageview

我有一个带有按钮的活动，其图像不断变化。现在单击带有特定图像的按钮，此时应该给出适当的祝酒词。我正在使用 timerTask 来更改按钮图像。单击按钮中出现的不同图像如何获得不同的响应（这里我的按钮是图像视图）。

我的代码如下

活动

```
 public class MainActivity extends Activity {
     public  ImageView ib;
     int[] images=  {R.drawable.alarm,R.drawable.ic_launcher,R.drawable.music_player,R.drawable.onetouchpanel,R.drawable.recorder};

    @Override
      public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ib=(ImageView) findViewById(R.id.imageButton1);
    int delay = 0; // delay for 0 sec.
    int period = 2000; // repeat every 2 seconds.
    Timer timer = new Timer();
    MyTimerTask myTask = new MyTimerTask();
    timer.schedule(myTask, delay,period);
    ib.setDrawingCacheEnabled(true);
    //ib.measure(Me, heightMeasureSpec)

    ib.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
        Log.d("ayaz","button clicked");

        }
    });
}
class MyTimerTask extends TimerTask {
    int i=0;
  public void run() {
      runOnUiThread( new Runnable() {
        public void run() {
             // ERROR
             ib.setImageResource(images[i]);
             i++;
             if(i>images.length-1)
             {
                 i=0;
             }

        }
    });

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:24:34.520

将变量 " `i`" from`run()`移到`MainActivity`类中。

还要在类中添加一个`Button`“名称”数组：

```
private int i;
private final static String[] names = {"alarm", "launcher", "player", "onetouchpanel", "recorder"}; 
```

如下修改代码以`Toast`在`Button.onClick()`函数中显示 a：

```
ib.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        final String name = names[i];
        Log.d("ayaz","button clicked: #" + i + ". " + name);
        Toast.makeText(MainActivity.this, "ayaz: button clicked: #" + i + ". " + name,
                Toast.LENGTH_LONG).show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:34:22.413

您可以在视图标签中设置适当的文本。

放在 `ib.setTag("Text to be displayed");` 之后`ib.setImageResource(images[i]);`，然后在 onClick 中显示带有文本的 toast

`Toast.makeText(context, (String)v.getTag(), Toast.LENGTH_SHORT).show();`

# android - ANDEngine GLES 2.0：缩放后 Sprite X 和 Y 未更新

> ID：16207666
> 
> 赞同：-1
> 
> 时间：2013-04-25T06:14:42.157
> 
> 标签：android, scale, andengine

问题是当我在其中心放大或缩小精灵时，精灵 X 和 Y 不会更新，尽管它在屏幕上正确绘制。您可以使用以下代码测试此问题：

```
 Rectangle rect=new Rectangle(CAMERA_WIDTH/2,CAMERA_HEIGHT/2,100,100,this.getVertexBufferObjectManager());
 rect.setScaleCenter(rect.getWidth()/2, rect.getHeight()/2);
 rect.setScale(1.5f); 
```

新的 X 和 Y 应该匹配场景坐标，但这不会发生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T22:40:36.343

精灵的 X 和 Y 位置永远不应该随着比例变化而更新。x 和 y 是从精灵的变换中心测量的，基本上是它的局部 0,0。因此，任何比例乘数都不会将该变换根更改为 0,0 以外的任何值。

您可能会看到对象似乎会随着放大或缩小而向左或向右移动，但这是因为精灵的边界框正在放大或缩小。但是该变换发生变化的点并没有改变，所以 X 和 Y 保持不变。

# ios - iPhone 上的准确时间

> ID：16207668
> 
> 赞同：3
> 
> 时间：2013-04-25T06:15:03.730
> 
> 标签：ios, objective-c, cocoa-touch, datetime

有没有办法在 iPhone 中非常精确地获取时间。？目前我正在尝试使用`ios` `NTp client` [Here](http://code.google.com/p/ios-ntp/)。与不同的设备进行比较时，我得到了将近**600 毫秒**的差异。即使我不担心准确的时间`ntp`，我也想`milliseconds`在不同的设备上显示相同的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:35:08.513

这是完成它的简单方法：-

```
 + (NSDate *) GMTNow
 { 
  NSDate *sourceDate = [NSDate date];
  NSTimeZone* currentTimeZone = [NSTimeZone localTimeZone];
  NSInteger currentGMTOffset = [currentTimeZone secondsFromGMT];

  [sourceDate dateByAddingTimeInterval:currentGMTOffset];

  return sourceDate;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:30:23.670

查看适用于 iOS 的 NTP 客户端库：[https ://code.google.com/p/ios-ntp/](https://code.google.com/p/ios-ntp/)

来源：[1](https://stackoverflow.com/questions/2269532/network-time-protocol-for-iphone)

# mysql - ColdFusion QOQ，比较时间值？

> ID：16207670
> 
> 赞同：2
> 
> 时间：2013-04-25T06:15:13.420
> 
> 标签：mysql, coldfusion, coldfusion-9, qoq

我正在尝试使用 ColdFusion QOQ 执行以下代码，但它没有检索任何记录。我使用格式为“HH：mm”的时间并使用 MySQL 作为后端，原始时间列的数据类型为“TIME”。

```
<cfquery dbtype="query" name="getCount">
    SELECT count(*) as mycount
    FROM getExams
    WHERE start_time <= <cfqueryparam cfsqltype="cf_sql_time" value="#curr_time#">
</cfquery> 
```

我能够使用`<cfqueryparam>`. 但是，它不适用于时间列。任何人都可以帮忙吗？

**更新：**
这个问题有一个开放的错误报告。请参阅[错误 #3551866](https://bugbase.adobe.com/index.cfm?event=bug&id=3551866)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T05:54:41.753

即使经过数小时的努力，我也无法找到一种简单的方法来比较 ColdFusion QOQ 中的时间值。所以，这是我使用的解决方法：

**步骤 1**
要检索具有 Time 数据类型的 db 列，请使用格式*hhmmss*。
例如。在我使用 MySQL 的情况下：
`CONVERT(DATE_FORMAT(db_time_col, '%H%i'), UNSIGNED INTEGER) as db_time_col`

**步骤 2**
在 ColdFusion QOQ 中，将时间值转换为与步骤 1 中使用的格式相同的格式。
例如。就我而言，它是：`<cfqueryparam cfsqltype="cf_sql_integer" value="#timeFormat(cf_time_col, 'HHmm')#">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:17:28.463

您需要使用 createodbcdatetime()/CreateODBCTime() 函数转换日期时间格式以转换当前日期和时间以与 DB 日期和时间格式列进行比较

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T12:34:34.703

问题是没有日期的时间是没有意义的。因此，时间数据类型应用了一个不可见的日期。但是，不同的软件将不同的日期应用于时间数据类型。

ColdFusion 适用似乎适用于 1899-12-30。这段代码：

```
<cfdump var="#CreateTime(18,0,0)#"> 
```

返回 {ts '1899-12-30 18:00:00'}

但是，当我运行数据库查询时：

```
<cfquery name="x" datasource="dw">
 select registration_number, event_time
 from admit_fact

 where date = yesterday
 and discharge
 and datepart(hour, event_time) < 13
 </cfquery>
 <cfdump var="#x#" metainfo="no"> 
```

我看到 19 行的值类似于 {ts '1970-01-01 11:30:00'}。结果，像这样的 QofQ：

```
<cfquery name="y" dbtype="query">
 select *
 from x
 where event_time < <cfqueryparam cfsqltype="cf_sql_time" value="#CreateTime(18,0,0)#"> 
 </cfquery> 
```

不会返回任何行。在“值得一试”类别中，即使我尝试过：

```
where cast(event_time as time) < 
<cfqueryparam cfsqltype="cf_sql_time" value="#CreateTime(18,0,0)#"> 
```

但结果并没有改变。像 Saurabh 一样，我也希望看到一种更简单的方法来比较这些值。

# c# - 什么是 WCF readerQuotas 和 maxArrayLength？

> ID：16207677
> 
> 赞同：3
> 
> 时间：2013-04-25T06:15:39.637
> 
> 标签：c#, wcf, service, readerquotas

任何人都可以向我解释 WCF`<readerQuotas>`吗？具体来说`maxArrayLength`。

根据[MSDN](https://msdn.microsoft.com/en-us/library/ms731325(v=vs.110).aspx)：

> `maxArrayLength`
> 
> 一个正整数，指定 Windows Communication Foundation (WCF) 从客户端接收的数据的最大允许数组长度。默认值为 16384。

它是什么？字节？

如果我不设置会怎样？

如果我设置了它并且返回的消息超出了指定的长度会怎样？

消息是否有可能超过设置的最大值？那么设置这个值有什么意义呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T20:20:19.783

我试图尽可能简化这一点：

*   `maxArrayLength`= 您的数组或列表可以容纳多少个元素。
*   `maxBytesPerRead`= 整个消息的最大字节数
*   `maxDepth`= 一个数组可以向下多少级？例如一个类可以有一个数组，每个元素都有一个数组，每个元素都有一个数组......
*   `maxStringContentLength`= 最大 XML 内容长度

# javascript - 令牌输入未显示下拉菜单

> ID：16207678
> 
> 赞同：0
> 
> 时间：2013-04-25T06:15:44.503
> 
> 标签：javascript, jquery, json, jquery-tokeninput

处理从 WCF 以 json 格式获取员工的自定义控件。下面是代码

```
 $("#" + txtEmployeeInput).tokenInput(urlService + '/GetEmployeesForTokenInput', {
                        prePopulate: selectedEmployeesForTokenInput,
                        preventDuplicates: true,
                        tokenLimit: 1,
                        hintText: "Type to select employees",
                        noResultsText: "No employees found!",
                        searchingText: "searching in employees...",
                        onAdd: function (item) {
                        },
                        onDelete: function (item) {
                        },
                        theme: "facebook"

                    }); 
```

现在这项服务

```
urlService + '/GetEmployeesForTokenInput' 
```

以以下格式返回员工（JSON 数组字符串）

```
"[{\"id\":\"4173\",\"name\":\"TAHA  SIDDIQUI\"},{\"id\":\"a1234\",\"name\":\"TAHA REHMAN SIDDIQUI\"},{\"id\":\"70007\",\"name\":\"TAHA SANDAM SIDDIQUI\"},{\"id\":\"57880\",\"name\":\"TAHA SANDAM SIDDIQUI\"},{\"id\":\"4333\",\"name\":\"TAHA  HASAN\"},{\"id\":\"555-12\",\"name\":\"TAHA REHMAN SIDDIQUI\"},{\"id\":\"49200\",\"name\":\"TAHA  -\"},{\"id\":\"1645\",\"name\":\"TAHAN A RICE\"},{\"id\":\"5253\",\"name\":\"TAHFAREN LAWRENCE OWENS\"},{\"id\":\"57881\",\"name\":\"Tahir  Ali\"},{\"id\":\"563r44\",\"name\":\"TAHIR  MALIK\"},{\"id\":\"52612\",\"name\":\"TAHIR  MUJAHID\"},{\"id\":\"34115\",\"name\":\"TAHIRA  -\"},{\"id\":\"18665\",\"name\":\"TAHIRA AQUIB HUSSAIN\"}]" 
```

现在，呼叫已成功进行，下面的屏幕截图几乎可以说明我面临的问题。

![截屏](https://i.stack.imgur.com/8vuvq.png)

下拉菜单未显示。现在我怀疑这是因为结果是 JSON 而不是 javascript 数组，现在如果这是一个问题，任何人都可以建议我在哪里将字符串转换为代码中的数组。

WCF 代码

```
 [OperationContract]
    [WebGet(UriTemplate = "GetEmployeesForTokenInput?q={value}",
       ResponseFormat = WebMessageFormat.Json,
       RequestFormat = WebMessageFormat.Json,
       BodyStyle = WebMessageBodyStyle.Bare)]
    string GetEmployeesForTokenInput(string value);

public object GetEmployeesForTokenInput(string value)
    {
        WebOperationContext.Current.OutgoingResponse.Headers.Add(
"Access-Control-Allow-Origin", "*"); WebOperationContext.Current.OutgoingResponse.Headers.Add(
"Access-Control-Allow-Methods", "GET"); WebOperationContext.Current.OutgoingResponse.Headers.Add(
"Access-Control-Allow-Headers", "Content-Type, Accept");
        Employee employee = new Employee();
        employee.FullName = value;
        EmployeeManagement empMgmt = new EmployeeManagement();
        int temp;
        List<Employee> employees = empMgmt.Search(employee, 0, 0, out temp);
        var jsonData =
                from row in employees
                select new
                {
                    id = row.TRGEmpID,
                    name = row.First_Name + " " + row.Middle_Initial + " " + row.Last_Name
                };
        return (new JavaScriptSerializer()).Serialize(jsonData);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:49:18.313

当我试图通过 JSON 字符串运行它时，该插件实际上需要一个具有属性 id 和 name 的对象数组。所以我修改了

```
function populate_dropdown(query, results) 
```

并在函数启动时添加了这个

```
results = $.parseJSON(results); 
```

# db2 - IBM DB2 9.7，内联 CLOB 和 VARCHAR 之间有什么区别？

> ID：16207682
> 
> 赞同：3
> 
> 时间：2013-04-25T06:16:04.397
> 
> 标签：db2, varchar, clob

使用 IBM DB2 9.7，在 32k 表空间中，假设 10000b（一万字节）长的列非常适合表空间。这两者之间有区别吗？一个优于另一个？

```
VARCHAR(10000)
CLOB(536870912) INLINE LENGTH 10000 
```

在功能和性能方面是或首选？快速浏览一下两者会发现 CLOB 实际上更通用。所有小于 10000 的内容都存储在 stablespace 中，但是如果需要更大的内容，那也没关系，它只是存储在磁盘上的其他位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:54:44.520

[在查询中可以使用](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0008470.html)的方式有[许多限制`CLOB`](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0008470.html)：

> 特殊限制适用于导致 CLOB 数据类型的表达式和结构化类型列；此类表达式和列不允许用于：
> 
> *   前面有 DISTINCT 子句的 SELECT 列表
> *   GROUP BY 子句 ORDER BY 子句 UNION ALL 以外的集合运算符的子选择
> *   基本的、量化的、BETWEEN 或 IN 谓词
> *   聚合函数
> *   VARGRAPHIC、TRANSLATE 和日期时间标量函数
> *   LIKE 谓词中的模式操作数，或 POSSTR 函数中的搜索字符串操作数
> *   日期时间值的字符串表示形式。

所以如果你需要做任何这些事情，`VARCHAR`是首选。

我没有关于性能的明确答案（不幸的是，像这样的信息似乎并没有出现在文档中——或者至少，它不容易找到）。但是，从逻辑上讲，数据库与`CLOB`. 它必须决定是否`CLOB`直接在结果中返回。这至少意味着一些开销。这是[对一些问题的很好的讨论](https://www.ibm.com/developerworks/community/blogs/SQLTips4DB2LUW/entry/speeding_up_lobs61?lang=en)，尽管它也没有给出关于性能的明确答案。

我的默认位置是使用`VARCHAR`，除非`CLOB`确实需要（列中的数据可能大于`VARCHAR`限制）。

# iphone - 点击时在滚动视图中展开子视图

> ID：16207687
> 
> 赞同：1
> 
> 时间：2013-04-25T06:16:08.583
> 
> 标签：iphone, gridview, uiscrollview, expand

我正在尝试在点击时扩展 uiscrollview 中的子视图，就像 twitter #music 应用程序所做的那样。我对实现这一点的流量计算感到困惑。附上下面的屏幕截图。非常感谢任何帮助。谢谢。

![在此处输入图像描述](https://i.stack.imgur.com/Al2Pu.jpg)

# c# - 如何在不重新定义 C# 的情况下覆盖函数？

> ID：16207694
> 
> 赞同：-5
> 
> 时间：2013-04-25T06:16:49.100
> 
> 标签：c#, oop

我有一个要求，我有一个类和一个函数

```
 public  class BaseClass
        {
            public virtual int MyMethod(int n)
            {
                Console.WriteLine("BaseClass=" + n + "+" + 2);
                return n + 2;
            }
        } 
```

和一个派生类 b 我正在扩展基类函数

```
 public class A : BaseClass
        {
            public override int MyMethod(int n)
            {
                Console.WriteLine("Class A=" + n+"*"+2);
                return n*2;
            }
        } 
```

在派生类中，当我调用函数 A.MyMethod() 时，应执行基函数，然后执行派生类函数。

```
static void Main(string[] args)
        {

            A classA = new A();
            A.MyMethod(1);

            Console.ReadKey();
        } 
```

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:20:06.043

你的意思是你想从派生构造函数调用基构造函数？是的，您可以使用 base() 构造来做到这一点。

```
public Derived(int sides)
    : base(sides) 
```

当 Square() 实际上不是构造函数（它在你的问题中，没有返回类型或 void）而是一个方法时，你可以这样做：

```
public override returntype Foo(...)
{
    // your adaptation
    base.Foo(...) 
```

基类中的方法必须是虚拟的才能工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:25:43.990

```
class b: a
{   
    public new int Square(int n)
    {
      var baseResult = base.Square(n);
      var i = 0//extenting the code
      return i;
    }
} 
```

# php - 在 DOMPDF 中安装字体失败

> ID：16207698
> 
> 赞同：0
> 
> 时间：2013-04-25T06:17:01.230
> 
> 标签：php, pdf, dompdf

我不能在 DOMPDF 中安装新字体有什么原因吗？这是一种不常见的 .ttf 字体，适用于 Paint、Word 等，但如果我在 DOMPDF 中安装它，它会显示为正确安装，但如果它包含或在 PDF 中使用则不会显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:28:20.683

请按照给定的链接将您的 TTF 字体转换为其他格式并在 DOMPDF 中使用该格式。 [http://www.fonts2u.com/font-converter.html](http://www.fonts2u.com/font-converter.html)，这个想法是如果 TTF 文件中有任何错误，它不会被转换为其他格式以及您将了解确切错误的方式。

# ruby-on-rails - Rails 中模型的字段列表

> ID：16207701
> 
> 赞同：1
> 
> 时间：2013-04-25T06:17:27.793
> 
> 标签：ruby-on-rails, ruby

我一直在查看 Rails 文档，但找不到这个。

假设我有一个`User`带有字段的模型`strength`。

如何获取`strength`数组中模型对象的每个实例的所有 s 列表？

list_of_str = [1, 2, 3, 4, 等等..]

我知道您可以调用`User.all`并遍历它们的每个强度场并将它们附加到列表中，但是有没有更优雅的方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:34:19.580

```
User.pluck 'strength' 
```

如果我没记错的话，rails 3.2 中的新功能

您可以使用

```
User.uniq.pluck 'strength' 
```

如果您需要避免重复，您还可以将其与范围和条件结合起来，例如

```
User.where(...).pluck 'strength' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:32:38.080

您可以为此使用 select 方法，它会生成一个查询，其中仅检索所需字段的值（这比从数据库中加载所有模型数据要快）：

```
User.select(:strength) 
```

这仍然返回一个模型对象数组，因此您必须使用 map 仅获取值数组：

```
User.select(:strength).map(&:strength) 
```

模型对象的创建将比仅在数据库中查询值要慢，但如果在此位置性能不重要，则应避免使用原始 SQL。

**编辑**：有一个更好的方法（`pluck`），请参阅接受的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:44:49.033

如果你真的在 distinct `strength`s 之后：

```
User.select('distinct strength').pluck(:strength) 
```

会得到他们。如果您不关心重复，那么 Frederick Cheung 的平原`pluck`将是一个好主意。

# android - 在 android 中加载 md2 显示为白色

> ID：16207702
> 
> 赞同：0
> 
> 时间：2013-04-25T06:17:27.603
> 
> 标签：android

我是 android 中 3d 动画的新手。我试图从[min3d 示例](http://code.google.com/p/min3d/)中加载一个 md2 对象。
但它动画为白色。

我的源代码如下

```
@Override
    public void initScene() {
        scene.lights().add(new Light());
        IParser parser = Parser.createParser(Parser.Type.MD2,
                getResources(), "net.mygame:raw/ogro", true);
        parser.parse();
        ogre = parser.getParsedAnimationObject();
        ogre.scale().x = ogre.scale().y = ogre.scale().z = .07f;
        ogre.rotation().z = -90;
        ogre.rotation().x = -90;
        scene.addChild(ogre);
        ogre.setFps(70);
        ogre.play();
    } 
```

如果有人遇到同样的问题或者你知道解决方案，请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T04:41:18.670

经过长时间的搜索，我自己找到了解决方案。我忘了在可绘制文件夹中添加纹理图像。当我添加它时，得到了完美的动画。

# javascript - jquery，将元素宽度的显示设置为block

> ID：16207704
> 
> 赞同：0
> 
> 时间：2013-04-25T06:17:29.853
> 
> 标签：javascript, jquery

我正在寻找对jquery进行编码以将元素宽度ID“结果”的显示设置为阻止？

不确定是否正确，对不起，我是编程新手，不胜感激，谢谢。

```
$(document.ready(function(){
    $('results').width(display:none;);
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:19:06.957

目前尚不清楚您想要什么，但假设您想隐藏结果

```
$(document.ready(function(){

  $('#results').css({display:"none"}); //to hide
  $('#results').css({display:"block"}); //to show
}) 
```

或者你可以只使用 hide() 和 show()

```
 $('#results').hide();
 $('#results').show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:19:27.250

如果元素有一个 id 标签，id 为 'results' 则

```
$('#results').css('display','block'); 
```

如果元素有一个classtag，class为'results'，那么

```
$('.results').css('display','block'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:22:50.273

不知道你想要什么用这一行设置元素宽度id“结果”的显示......假设它是一个错字“设置一个id为“结果”的元素的显示”。

```
 $('#results').css('display','block'); 
```

# javascript - 如何选择框选择值 标签

> ID：16207705
> 
> 赞同：0
> 
> 时间：2013-04-25T06:17:33.853
> 
> 标签：javascript, html, jsp

在我的 jsp 页面中，我有一个选择框

```
<select id="quantity" name="quantity" onchange="alert(quantity.value)">
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
</select> 
```

警报打印选定的值，现在我将此值设置为`c:set`标签

```
 <c:set var="quantity1" value="" >// how to set quantity value hear 
```

其实我在努力`value="${quantity.value}"`，但没有成功。

给我建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:40:52.887

您不能在客户端 (javascript/jquery) 上为 jsp 的 <c:set> 标记设置值。JSP 在服务器端处理。<c:set> 不是呈现的 html 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:40:57.050

您可以将数量值设置为请求属性并在 jstl 中访问，如下所示

```
// In Action class/server side/or top of jsp
request.setAttribute("quantityvalue","1");

//In jsp
<c:set var="quantity1" value="${quantityvalue}" > 
```

您不能使用 jstl 访问 dom 字段。由于 jstl 用于服务器端。

# javascript - onmouseup 在 Safari 中不起作用

> ID：16207706
> 
> 赞同：1
> 
> 时间：2013-04-25T06:17:35.403
> 
> 标签：javascript, safari, onmouseup, onmouseclick

这是我从 w3schools 获得的示例，仅 safari 浏览器就出现了奇怪的行为。

[http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_onmousedown](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_onmousedown)

**Safari：** 如果我们左键单击段落顶部，文本变为红色，当我离开时，文本变为绿色。没关系。现在，我在段落顶部右键单击。现在文本颜色变为红色，当我离开时，它永远不会变为绿色。如果我们使用右键单击，即`onmouseup`在 safari 中不起作用。谁能告诉我为什么？有什么解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:28:18.923

在 safari 中，似乎右键单击时将焦点赋予上下文菜单，因此上下文菜单接收 mouseup 事件而不是 P 元素。至于解决方案，您可以检测鼠标按钮以防止它在右键单击时运行。除非您想处理自定义上下文菜单，否则右键单击事件很混乱。

如果您希望鼠标右键单击时触发 mouseup 事件在 Safari 中工作，则需要通过将此属性添加到 P 元素来禁用上下文菜单：

```
oncontextmenu="return false"> 
```

还可以检测左键单击是否触发了事件（通常是您要处理的按钮）：

```
function mouse_handler(event) {
    var evt=window.event||event;
    var button = evt.which || evt.button;
    if (button == 1) { // if left mouse button
        // handle the event
    }
} 
```

在 w3schools 的示例中，它会导致如下所示：

```
function myFunction(elmnt,clr,event)
{
    var evt=window.event||event;
    var button = evt.which || evt.button;
    if (button == 1) { // if left mouse button
        elmnt.style.color=clr;
    }
} 
```

然后在函数调用中传递事件：

```
<p onmousedown="myFunction(this,'red',event)" onmouseup="myFunction(this,'green',event)"> 
```

# android - 对话框不适用于 webview

> ID：16207709
> 
> 赞同：0
> 
> 时间：2013-04-25T06:17:40.447
> 
> 标签：android, android-fragments, android-webview, android-dialog, android-dialogfragment

我的应用程序有一个 webview，当用户没有输入正确的用户名和密码时，会弹出一个警告对话框并告诉他。

我的 Webview 接口类是：

```
public class WebAppInterface extends FragmentActivity{
Context mContext;
/** Instantiate the interface and set the context */
WebAppInterface(Context c) {
    mContext = c;
}

/** Show a toast from the web page */
@JavascriptInterface
public void showToast(String text) {
    Toast.makeText(mContext, text, Toast.LENGTH_SHORT).show();
}

public void showErrorDialog(String text) {
    DialogFragment dialogFragment = new ErrorDialog();
    dialogFragment.show(getSupportFragmentManager(), "errorDialog");
    }
} 
```

我的 Dialgofragmenct 课程是：

```
public class ErrorDialog extends DialogFragment{

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setTitle("שגיאה");
    builder.setMessage("טקסט כלשהו");
    builder.setPositiveButton("אישור", new OnClickListener() {      
        public void onClick(DialogInterface dialog, int which) {
            dismiss();
        }
    });
    builder.setCancelable(false);
    return builder.create();
}

} 
```

当我在eclipse上运行调试器时，界面中的方法showErrorDialog（）有效，但是当方法结束时应用程序会诅咒，并且根本不显示警报对话框！

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:54:34.710

如果可以从 webview 的 JavaScript 访问 showErrorDialog() 方法，它也应该有 @JavascriptInterface。你没有告诉我们什么 rerror 打印 logcat。

# c# - 如何以编程方式绑定数据网格列？

> ID：16207713
> 
> 赞同：1
> 
> 时间：2013-04-25T06:17:45.683
> 
> 标签：c#, wpf

我一定忘记了一些明显的事情......我无法以编程方式绑定 DataGridColumn。我有以下代码：

```
 var datagrid = new DataGrid();
        datagrid.Columns.Add(new DataGridTextColumn()
        {
            Header = "Type,
            Width = new DataGridLength(200),
            FontSize = 12,
            Binding = new Binding("Name") // this line fails to complile
        }); 
```

我不断收到以下编译错误：

> 错误 3 找不到类型或命名空间名称“Binding”（是否缺少 using 指令或程序集引用？）

我在网上看过很多例子，似乎在做同样的事情......有什么想法吗？谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T06:25:54.030

```
var datagrid = new DataGrid();
datagrid.Columns.Add(new DataGridTextColumn()
{
    Header = "Type,
    Width = new DataGridLength(200),
    FontSize = 12,
    Binding = new Binding("Name")
}); 
```

为了使用这些代码，您必须使用命名空间“ `System.Windows.Data`”。

```
using System.Windows.Data; 
```

# asp.net - 如何将 JSON 字符串变量从 ASP.NET 传递到其他应用程序？

> ID：16207716
> 
> 赞同：2
> 
> 时间：2013-04-25T06:18:01.830
> 
> 标签：asp.net, json, c#-4.0

在我的 web 应用程序中，我需要使用 JSON 传递一个字符串变量。但它不起作用......我的代码是：

```
string Token=builder.ToString();
var userdetails = {"token": Token};

Response.Write(userdetails); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:25:00.487

您可以使用 JSON 序列化程序，例如[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)类：

```
string Token = builder.ToString();    
var userDetails = new { token = Token };
string json = new JavaScriptSerializer().Serialize(userDetails);
Response.ContentType = "application/json";
Response.Write(json); 
```

生成的输出将如下所示：

```
{"token":"some token value"} 
```

# python - 在 Python 中使用/创建 LogonUser 函数的等效项

> ID：16207717
> 
> 赞同：1
> 
> 时间：2013-04-25T06:18:02.527
> 
> 标签：python, windows, authentication

直截了当，我一直在寻找一种[`LogonUser`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184(v=vs.85).aspx)在 Python 中使用 Windows 函数的方法。

看到朋友使用 C 使用此函数后，我想尝试使用 Python 进行类似的过程。有办法吗？还是我需要尝试在 C 中创建该部分脚本，然后以某种方式让我的 Python 脚本调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T19:41:07.550

您可以使用以下命令直接调用 Windows API `ctypes`：

```
import ctypes
import ctypes.wintypes
# create variable that will be filled with a token that represents the user
token = ctypes.wintypes.HANDLE()
# 3 is LOGON32_LOGON_NETWORK, 0 is LOGON32_PROVIDER_DEFAULT
if ctypes.windll.advapi32.LogonUserW(u"username", u"domain", u"password", 3, 0, ctypes.byref(token)) == 0:
    # failed to login if we get 0
    failed_to_login()
# close the handle to avoid leaking it
ctypes.windll.kernel32.CloseHandle(token) 
```

您也可以在失败后调用以查看错误代码是什么，您可以在命令提示符`ctypes.windll.kernel32.GetLastError()`中查找。`net helpmsg nnnn`

```
C:\>net helpmsg 1326
Logon failure: unknown user name or bad password. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-02T11:44:59.550

如果您在 Linux 上工作，那么大致相当于 Windows 的[`LogonUser`功能](https://msdn.microsoft.com/en-us/library/windows/desktop/aa378184%28v=vs.85%29.aspx)是[`peercred`](http://welz.org.za/notes/on-peer-cred.html)，如`SO_PEERCRED`. （感谢超级用户 peercred 上的[Grawity](https://superuser.com/a/1060418/173513)）。

# java - Java比较两个List的对象值？

> ID：16207718
> 
> 赞同：50
> 
> 时间：2013-04-25T06:18:13.377
> 
> 标签：java, list, arraylist

我有两个列表 * `*ListA<MyData> listA = new ArrayList<MyData>()`** 并且**`ListB<MyData> listB = new ArrayList<MyData>()`**都包含 MyData 类型的对象，**而**MyData**包含**这些变量。

```
MyData {
    String name;
    boolean check;
} 
```

ListA 和 ListB 都包含 MyData 对象，现在我必须在此处比较列表的对象值**名称**以及**检查**变量，例如**ListA**是否包含这些对象值

```
ListA = ["Ram",true],["Hariom",true],["Shiv",true]; 
```

和 ListB 还包含

```
ListB = ["Ram",true],["Hariom",true],["Shiv",true]; 
```

然后我必须比较列表并返回 false 因为两个列表相同但是如果 ListA 包含

```
ListA = ["Ram",true],["Hariom",true],["Shiv",false]; 
```

和**ListB**包含

```
 ListB = ["Ram",true],["Hariom",true],["Shiv",true]; 
```

然后我必须比较列表并返回true，因为两个列表不相同

反之亦然，因此任何列表值的任何细微变化我都必须返回 true。 ***我必须在这里提到的一件事对象可以按任何顺序排列。***

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-25T08:25:57.900

这不是最有效的解决方案，但最简洁的代码是：

```
boolean equalLists = listA.size() == listB.size() && listA.containsAll(listB); 
```

## 更新：

@WesleyPorter 是对的。如果集合中有重复的对象，上述解决方案将不起作用。
对于一个完整的解决方案，您需要遍历一个集合，以便正确处理重复的对象。

```
private static boolean cmp( List<?> l1, List<?> l2 ) {
    // make a copy of the list so the original list is not changed, and remove() is supported
    ArrayList<?> cp = new ArrayList<>( l1 );
    for ( Object o : l2 ) {
        if ( !cp.remove( o ) ) {
            return false;
        }
    }
    return cp.isEmpty();
} 
```

## 2014 年 10 月 28 日更新：

@RoeeGavriel 是对的。return 语句必须是有条件的。上面的代码已更新。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-25T06:23:15.297

`ArrayList`已经有了对此的支持，用的`equals`方法。引用[文档](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractList.html#equals%28java.lang.Object%29)

> ...换句话说，如果两个列表以相同的顺序包含相同的元素，则它们被定义为相等。

它确实需要您`equals`在`MyData`课堂上正确实施。

**编辑**

您已更新说明列表可能有不同顺序的问题。在这种情况下，首先对列表进行排序，然后应用等于。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-25T06:42:45.513

我得到了解决上述问题的方法

```
public boolean compareLists(List<MyData> prevList, List<MyData> modelList) {
        if (prevList.size() == modelList.size()) {
            for (MyData modelListdata : modelList) {
                for (MyData prevListdata : prevList) {
                    if (prevListdata.getName().equals(modelListdata.getName())
                            && prevListdata.isCheck() != modelListdata.isCheck()) {
                        return  true;

                    }
                }

            }
        }
        else{
            return true;
        }
        return false; 

    } 
```

**已编辑：-**
我们如何涵盖这一点...想象一下，如果您有两个数组“A”，真“B”，真“C”，真和“A”，真“B”，真“D”，真。即使数组 1 有 C 并且数组 2 有 D 也没有检查会发现（*@Patashu 提到*）..所以我做了以下更改。

```
public boolean compareLists(List<MyData> prevList, List<MyData> modelList) {
        if (prevList!= null && modelList!=null && prevList.size() == modelList.size()) {
            boolean indicator = false;
            for (MyData modelListdata : modelList) {
                for (MyData prevListdata : prevList) {
                    if (prevListdata.getName().equals(modelListdata.getName())
                            && prevListdata.isCheck() != modelListdata.isCheck()) {
                        return  true;

                    }
                    if (modelListdata.getName().equals(prevListdata.getName())) {
                        indicator = false;
                        break;
                    } else
                        indicator = true;
                }
                }

            }
        if (indicator)
            return true;
    }
        }
        else{
            return true;
        }
        return false; 

    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-07T07:03:56.410

[我在List Compare](http://www.gitarani.com/classified.htm?classifiedId=3012)中找到了一个非常基本的 List 比较示例。 此示例首先验证大小，然后检查一个列表的特定元素在另一个列表中的可用性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-25T06:26:57.217

首先，实现`MyData.equals(Object o)`and`MyData.hashCode()`方法。实现该`equals`方法后，您可以按如下方式遍历列表：

```
if(ListA == null && ListB == null)
    return false;
if(ListA == null && ListB != null)
    return true;
if(ListA != null && ListB == null)
    return true;
int max = ListA.size() > ListB.size() ? ListA.size() : ListB.size();
for(int i = 0; i < max; i++) {
    myData1 = ListA.get(i);
    myData2 = ListB.get(i);
    if(!myData1.equals(myData2)) {
        return true;
    }
}
return false; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-25T13:19:46.443

您可以使用 CollectionUtils.subtract 从另一个列表中减去一个列表，如果结果是一个空集合，则表示两个列表相同。另一种方法是使用 CollectionUtils.isSubCollection 或 CollectionUtils.isProperSubCollection。

在任何情况下，您都应该为您的对象实现 equals 和 hashCode 方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-25T06:21:06.183

覆盖类中的[equals](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)方法并使用 [Collection#equals()](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#equals%28java.lang.Object%29)方法检查是否相等。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-15T11:13:28.760

这可以通过 Java8 使用 forEach 和 removeIf 方法轻松完成。

拿两张清单。从**listA**迭代并比较**listB 中的元素**

**在removeIf**方法中写入任何条件。

希望这会有所帮助

```
listToCompareFrom.forEach(entity -> listToRemoveFrom.removeIf(x -> x.contains(entity))); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-03-29T06:45:04.633

使用 java 8 removeIf 比较相似项目

```
public int getSimilarItems(){
    List<String> one = Arrays.asList("milan", "dingo", "elpha", "hafil", "meat", "iga", "neeta.peeta");
    List<String> two = new ArrayList<>(Arrays.asList("hafil", "iga", "binga", "mike", "dingo")); //Cannot remove directly from array backed collection
    int initial = two.size();

    two.removeIf(one::contains);
    return initial - two.size();
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-25T06:56:39.357

看看这是否有效。

```
import java.util.ArrayList;
import java.util.List;

public class ArrayListComparison {

    public static void main(String[] args) {
        List<MyData> list1 = new ArrayList<MyData>();
        list1.add(new MyData("Ram", true));
        list1.add(new MyData("Hariom", true));
        list1.add(new MyData("Shiv", true));
//      list1.add(new MyData("Shiv", false));
        List<MyData> list2 = new ArrayList<MyData>();
        list2.add(new MyData("Ram", true));
        list2.add(new MyData("Hariom", true));
        list2.add(new MyData("Shiv", true));

        System.out.println("Lists are equal:" + listEquals(list1, list2));
    }

    private static boolean listEquals(List<MyData> list1, List<MyData> list2) {
        if(list1.size() != list2.size())
            return true;
        for (MyData myData : list1) {
            if(!list2.contains(myData))
                return true;
        }
        return false;
    }
}

class MyData{
    String name;
    boolean check;

    public MyData(String name, boolean check) {
        super();
        this.name = name;
        this.check = check;
    }
    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + (check ? 1231 : 1237);
        result = prime * result + ((name == null) ? 0 : name.hashCode());
        return result;
    }
    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        MyData other = (MyData) obj;
        if (check != other.check)
            return false;
        if (name == null) {
            if (other.name != null)
                return false;
        } else if (!name.equals(other.name))
            return false;
        return true;
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-25T06:27:30.787

逻辑应该是这样的：

1.  第一步：对于类 MyData 实现 Comparable 接口，根据每个对象的要求覆盖 compareTo 方法。

2.  第二步：列表比较时（检查空值后），2.1检查两个列表的大小，如果相等返回true否则返回false，继续对象迭代2.2如果步骤2.1返回true，迭代两个列表中的元素并调用类似的东西，

    listA.get(i).compareTo(listB.get(i))

这将按照步骤 1 中提到的代码进行。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-12-26T09:21:37.997

从那时起已经过去了大约 5 年，幸运的是我们现在有了 Kotlin。
现在比较两个列表看起来很简单：

```
fun areListsEqual(list1 : List<Any>, list2 : List<Any>) : Boolean {
        return list1 == list2
} 
```

或者只是随意省略它并使用相等运算符。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-09-26T01:34:52.903

```
String myData1 = list1.toString();
String myData2 = list2.toString()

return myData1.equals(myData2);

where :
list1 - List<MyData>
list2 - List<MyData> 
```

比较字符串对我有用。另请注意，我在 MyData 类中重写了 toString() 方法。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-02-14T13:12:05.007

我知道这是个老问题，但万一有人需要。我在我的应用程序中使用它并且效果很好。我用它来检查购物车是否已更改。

```
private boolean validateOrderProducts(Cart cart) {
    boolean doesProductsChanged = false;
    if (originalProductsList.size() == cart.getCartItemsList().size()) {
        for (Product originalProduct : originalProductsList) {
            if (!doesProductsChanged) {
                for (Product cartProduct : cart.getCartProducts()) {
                    if (originalProduct.getId() == cartProduct.getId()) {
                        if (originalProduct.getPivot().getProductCount() != cartProduct.getCount()) {
                            doesProductsChanged = true;
                            // cart has been changed -> break from inner loop
                            break;
                        }
                    } else {
                        doesProductsChanged = false;
                    }
                }
            } else {
                // cart is already changed -> break from first loop
                break;
            }
        }
    } else {
        // some products has been added or removed (simplest case of Change)
        return true;
    }
    return doesProductsChanged;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-01-11T10:09:08.277

如果其中一些是 HashSet 集合，我认为您可以对这两个列表进行排序并转换为 List。

**java.utils.Collections**包可以让你做到这一点。

```
List<Category> categoriesList = new ArrayList<>();
Set<Category> setList = new HashSet<>();
Collections.sort(categoriesList);
List<Category> fileCategories = new ArrayList<>(setList);
Collections.sort(fileCategories);

if(categoriesList.size() == fileCategories.size() && categoriesList.containsAll(fileCategories)) {
    //Do something
} 
```

# php - PHP 检查数据库中的现有条目

> ID：16207719
> 
> 赞同：-6
> 
> 时间：2013-04-25T06:18:13.857
> 
> 标签：php, sql

我正在尝试查找用户名是否已在数据库中。出于某种原因，$result 返回 false，我不知道为什么。我可以很好地将东西放入数据库。如果这很重要，我会使用 Fugu 将我的代码上传到服务器。我是 php 的新手，所以任何帮助都会很棒！

以下是查询失败的代码：

```
$dbh = new PDO('mysql:host=localhost;dbname=baseuser' . $db_users_database, $db_user, $db_pass);
    $result = mysql_query("SELECT COUNT(username) FROM users WHERE username='$username' GROUP BY username");
                $num_rows = mysql_num_rows($result);

                if ($num_rows != 0) {
                  echo "username taken";
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:23:19.167

`PDO`像这样使用，`PDO`而且`mysql_*`功能不能一起使用，你必须单独使用它们

```
$sth = $dbh->prepare('SELECT COUNT(username) FROM users 
WHERE username= :username GROUP BY username');
$sth->bindParam(':username', $username, PDO::PARAM_STR);
$sth->execute();

if ($sth->fetchColumn() > 0) {
   echo "username taken";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:28:41.843

您正在使用[PDO](http://de2.php.net/manual/en/book.pdo.php)连接到您的表，然后您尝试使用 -deprecated- [mysql 扩展名](http://de2.php.net/manual/en/book.mysql.php)进行查询。这行不通。

坚持[PDO](http://de2.php.net/manual/en/book.pdo.php)，然后使用 PDO 进行[查询](http://de2.php.net/manual/en/pdo.query.php)，您甚至可以使用准备好的语句将其提升到一个新的水平。

例子：

```
$dbh = new PDO('seeyourcode');
$sql = "SELECT COUNT(username) 
        FROM users 
        WHERE username= :user 
        GROUP BY username";

// Prepare the statement
$sth = $dbh->prepare($sql);
$sth->bindParam(':user', $username, PDO::PARAM_STR);

// now execute
$sth->execute();

// fetch the result
$result = $sth->fetchAll();
var_dump($result); 
```

`var_dump()`只是为了让您了解对象的外观。您可以在那里执行任何您想要的操作并获得结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:31:34.737

用这个：

```
$stmt = $dbh->prepare('SELECT EXISTS(SELECT * FROM `users` WHERE `username` LIKE :username) as `taken`');
$stmt->bindParam(':username', $username, PDO::PARAM_STR);
$stmt->execute();

$result = $stmt->fetch(PDO::FETCH_ASSOC);

if($result['taken']){
    echo "username taken";
}

$stmt = null; 
```

另外，您错误地使用了`PDO`. 检查[**手册**](http://php.net/manual/ru/pdostatement.execute.php)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T06:36:47.503

不要让它变得复杂。使用简单的连接方法并使用**如下查询：**

```
$check_if_already = mysql_query("SELECT * FROM uxxx where id = 1113");

$count_total_rows = mysql_num_rows($check_if_already);
echo $count_total_rows;

    if ($count_total_rows > 0) {
       echo "Not duplicate";
       //do your task here
    } else {
        echo 'Duplicate';
    } 
```

# javascript - Jquery-复选框选择应该导致弹出表单

> ID：16207726
> 
> 赞同：0
> 
> 时间：2013-04-25T06:18:59.373
> 
> 标签：javascript, jquery

我有一个以表格形式显示的元素列表，如下所示。这些是从 Rails 后端获取的。

![在此处输入图像描述](https://i.stack.imgur.com/mNRKK.png)

现在我希望能够根据每个检查表的选择设置余数。如果我选择清单中的一个元素，我应该会看到一个弹出窗口，上面写着“商店名称”、“类别”并生成一个表单。成功提交此表单后，我想启用相应的复选框。我需要一位 Jquery 专家来帮助我实现这一目标。我可以根据复选框的选择弹出一个弹出窗口，但是如何将其绑定到特定记录？表单提交将通过 JSON 进行，我将负责处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:49:32.187

我个人会通过定义自己的属性来实现。所以在复选框中，在绘制屏幕时，我会添加一个属性——比如“store-id”并输入相应的 store id 值。如果您在浏览器上使用 jQuery 构建 DOM，那么您可以这样做

```
$(<selector>).attr("store-id",jsonObject.store_id); 
```

现在，我将通过将更改事件绑定到类或任何其他适当的 jQuery 选择器来将更改事件绑定到所有选择对象。

```
$(<selector for checkbox>).change(function(){ var attr = $(this).attr("store-id"); // Do some operation }); 
```

然后使用您的 JSON 检索更多数据并显示它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:42:38.863

你可以尝试这样的事情：

```
$( "#table_id" ).find( 'input[type=checkbox]' ).live( 'change', function ()
        {
            if ( $( this ).is( ':checked' ) )
            {

                var _row = $( this ).parent().parent();//to get the selected row
                var row_id= $( _row ).find( 'td:eq(1)' ).text();//assuming the id field is the 2nd column
...................................
                //code to pop up dialog
.............................
               }

        } ); 
```

# c# - 如何在另一个按钮代码中访问动态创建的复选框？

> ID：16207728
> 
> 赞同：0
> 
> 时间：2013-04-25T06:19:03.867
> 
> 标签：c#, asp.net

在我的项目中，最初，我提交了我想在学生数据库中访问的（学生）的年份、部门和科目。单击提交按钮后，将根据上面提交的查询创建动态复选框。但是，在处理这些复选框以更新上述提交主题的学生出勤率时，我遇到了一个问题！请帮忙！代码：
使用系统；使用 System.Collections；使用 System.Configuration；使用 System.Data；使用 System.Linq；使用 System.Web；使用 System.Web.Security；使用 System.Web.UI；使用 System.Web.UI.HtmlControls；使用 System.Web.UI.WebControls；使用 System.Web.UI.WebControls.WebParts；使用 System.Xml.Linq；

```
namespace iso_generator
{
public partial class attendance : System.Web.UI.Page
{

    CheckBox cb1;
    System.Data.OleDb.OleDbConnection con;
    System.Data.OleDb.OleDbDataAdapter da;
    System.Data.DataSet ds;

    static int inc = -1;
    static int maxRows;
   // static int maxRows1;

   protected void Page_Load(object sender, EventArgs e)
    {
        con = new System.Data.OleDb.OleDbConnection();
        con.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\\ISO\\DB\\db1.mdb";
        con.Open();

        string division = ddlDivision.Text;
        string year = ddlYear.Text;
        string subj = ddlSubject.Text;

        String query = "select * from student " +
            "where syear = '" + year + "' AND div ='" + division + "' order by roll";

        da = new System.Data.OleDb.OleDbDataAdapter(query, con);
        ds = new DataSet();
        da.Fill(ds, "student");
        maxRows = ds.Tables["student"].Rows.Count;

    }

    protected void ATTENDANCE_SUBMIT_Click(object sender, EventArgs e)
    {

        // Create a new HtmlTable object.
        HtmlTable table1 = new HtmlTable();
        table1.ID = ("YOURID");

        // Set the table's formatting-related properties.
        table1.Border = 1;
        table1.CellPadding = 1;
        table1.CellSpacing = 1;
        table1.BorderColor = "red";

        // Start adding content to the table.
        HtmlTableRow row;
        HtmlTableCell cell;
        int i = 0;

        for (int m = 0; m < 10; m++)
        {
            // Create a new row and set its background color.
            row = new HtmlTableRow();
            row.BgColor = "lightyellow";
            for (int j = 0; j < 5; j++)
            {
                if (i < maxRows)
                {
                    // Create a cell and set its text.
                    DataRow dRow;
                    dRow = ds.Tables["student"].Rows[i];

                    cb1 = new CheckBox();
              cb1.Checked = false;

                    cb1.ID = "" + dRow.ItemArray.GetValue(0).ToString();   //setting gr no to chechked box id//
                    cb1.Text = dRow.ItemArray.GetValue(2).ToString() + " : " +
                        dRow.ItemArray.GetValue(1).ToString();
                    cb1.Height = 50;
                    cb1.AutoPostBack = true;
                    cb1.CheckedChanged += new EventHandler
                                       (cb1_CheckedChanged);

                    cell = new HtmlTableCell();

                    cell.Controls.Add(cb1);
                    // Add the cell to the current row.
                    row.Cells.Add(cell);
                    i++;
                }

            }

            // Add the row to the table.
            table1.Rows.Add(row);
        }

        // Add the table to the page.
        //this.Controls.Add(table1);

        form1.Controls.Add(table1);

    }

    protected void cb1_CheckedChanged
            (object sender, EventArgs e)
    {
        string marks;
        if (cb1.Checked)
        {

            DataRow drow = ds.Tables["student"].Rows[0];  //go  to 1st row of database//
            string variable = drow.ItemArray.GetValue(0).ToString(); //get 1st student GR_NO value in variable//

            for (inc = 0; variable != cb1.ID; inc++)  //scan from 1st student GR_NO till the NON-CHECKED chckbox student GR_NO IN DATABASE//
            {
                drow = ds.Tables["student"].Rows[inc];
                variable = drow.ItemArray.GetValue(0).ToString();
            }

            if (ddlSubject.Text == "SUB1")
            {
                marks = drow.ItemArray.GetValue(7).ToString();   //7TH COLUMN IN DATABASE IS SUBJECT1 COLUMN//
                marks = marks + 1;                //INCREMENT THE ATTENDANCE BY 1//
                drow[7] = marks;
            }

        }

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:55:15.037

这就是行为。当有回发时，所有变量都被重置并重新分配。

编辑：好的，问题是 cb1 只是一个变量。每次动态创建复选框时都会使用它，这意味着您不能通过简单地引用 cb1 来访问每个复选框。您需要通过分配给它的 ID 或使用用于创建它的相同逻辑来查找控件。我建议为您的表提供一个 ID，您可以使用该 ID 在后续回发中检索它。

```
HtmlTable table = Form1.FindControl("YourID");
for (int m = 0; m < table.Rows.Count; m++)
{
    for (int x = 0; x < table.Rows[m].Cells.Count, x++)
    {
        for (int c = 0; c < table.Rows[m].Cells[x].Controls.Count; c++)
        {
            if (typeof(table.Rows[m].Cells[x].Controls[c]) == typeof(CheckBox))
            {
                if (((CheckBox)table.Rows[m].Cells[x].Controls[c]).Checked)
                {     
                    //Your logic here
                }
            }
        }
    }
} 
```

当您采用这种方法时，重要的是要有一种方法来识别您当前正忙于复选框的学习者，以便更新数据库。如果您需要任何澄清，请告诉我。

# c++ - QFile - 不在文本编辑器中重新打开

> ID：16207735
> 
> 赞同：0
> 
> 时间：2013-04-25T06:19:40.990
> 
> 标签：c++, qt

我的 gui 中有两个用于打开和关闭的插槽。当我打开一个文件时，它的内容显示在文本编辑器中，然后我按下关闭按钮更改保存到文件。

但是现在当我再次按下时，打开并重新加载相同的文件。文本编辑器，空白编辑器中没有显示任何内容。

为什么文件没有重新加载？

```
private:
    Ui::MainWindow *ui;

    QFile file;
    QTextStream out;        
    QString url; // the url of the file

void MainWindow::on_actionOpen_triggered()
{
    QString openfileurl = QFileDialog::getOpenFileName();
    if(openfileurl.isEmpty() || openfileurl == url) return;

    file.setFileName(openfileurl);

    //if(file.open(QIODevice::ReadOnly|QIODevice::Text))
    if(file.open(QIODevice::ReadWrite|QIODevice::Text))
    {
        url = openfileurl;
        ui->textEdit->setPlainText(QString::fromUtf8(file.readAll()));
    }

    //Set file to -- Qtextstream
    out.setDevice(&file);

}

void MainWindow::on_actionClose_triggered()
{
    //Set file to -- Qtextstream
    out << ui->textEdit->toPlainText();

    file.close();
    ui->textEdit->clear();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:26:18.647

试试这个方法

```
void MainWindow::on_actionClose_triggered()
{
    //Set file to -- Qtextstream
    out << ui->textEdit->toPlainText();

    file.close();
    ui->textEdit->clear();
    uri.clear();
} 
```

我认为您应该在进行此检查之前 清除**uri ：**`if(openfileurl.isEmpty() || openfileurl == url) return;`

时会爆炸`openfileurl == url`。**如果您没有清除uri**，它肯定会这样做。你在这里：

> 重新加载相同的文件

...具有相同的内容...因此，if 语句为**真**并**返回** ，这就是为什么下面的代码没有第二次执行的原因。

# wpf - WPF：为什么 PopUp 中的 MediaElement 无法调整到屏幕高度？

> ID：16207742
> 
> 赞同：1
> 
> 时间：2013-04-25T06:20:21.007
> 
> 标签：wpf, fullscreen, mediaelement

                                           ![媒体元素](https://i.stack.imgur.com/b7dmx.png)

我`MediaElement`在`PopUp`. 当我将 MediaElement 调整为宽屏时，它会在底部切割一个区域（见图）。

我做错了什么？如何解决？非常感谢你！

XAML：

```
 <Popup PlacementRectangle="-500,0,0,0" Placement="Relative" IsOpen="True" Name="popup">
        <MediaElement Name="me" Width="480" Height="360" Volume="1"
            MouseLeftButtonUp="me_MouseLeftButtonUp"/>
    </Popup> 
```

代码：

```
 bool fullscreen = false;
    private void me_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        fullscreen = !fullscreen;
        if (fullscreen)
        {
            popup.PlacementRectangle = new Rect(0, 0, 0, 0);
            popup.Placement = PlacementMode.Absolute;
            me.Width = Screen.PrimaryScreen.Bounds.Width;
            me.Height = Screen.PrimaryScreen.Bounds.Height;
        }
        else
        {
            popup.PlacementRectangle = new Rect(-500, 0, 0, 0);
            popup.Placement = PlacementMode.Relative;
            me.Width = 480;
            me.Height = 360;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-06T14:54:52.357

我找到了解决此问题的方法。只需搜索可视化树，从 Popup 的 Child 开始，直到找到 PopupRoot 类型的 parent。您可以将其宽度和高度设置为您喜欢的任何值。这对我有用：

```
for (var parent = Child as FrameworkElement; parent != null; parent = VisualTreeHelper.GetParent(parent) as FrameworkElement)
{
    if (parent.GetType().Name == "PopupRoot")
    {
        parent.Width = Target.ActualWidth;
        parent.Height = Target.ActualHeight;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-21T14:01:24.120

弹出窗口不能覆盖超过 75% 的屏幕。

请参阅此线程：[无法创建全屏 WPF 弹出窗口](https://stackoverflow.com/questions/2633129/cant-create-a-fullscreen-wpf-popup)

# android - Textview文本颜色在点击时不会改变

> ID：16207749
> 
> 赞同：0
> 
> 时间：2013-04-25T06:20:51.850
> 
> 标签：android, textview, tableview, textcolor

我有一个活动，我在其中动态创建了一个表。该表是从 SQLite 数据库填充的。Onclick 表格标题，表格将得到相应的排序。

一切正常，现在我的要求是在单击时更改表头文本视图的文本颜色。文本颜色没有改变。

这**是填充表的方法**：

```
//Time ascending method
    public void populateTableTimeAscending()
    {
        getTimeNameTimeAsc();
        getStudentNameTimeAsc();
        follow_up_table.removeAllViews();
        //---------------Table Header-----------------------------------------------
        TableRow followup_tr_head = new TableRow(this);
        followup_tr_head.setId(10);
        followup_tr_head.setBackgroundResource(R.drawable.list_header);
        followup_tr_head.setLayoutParams(new LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        TextView time_name_title = new TextView(this);
        time_name_title.setId(20);
        time_name_title.setText("Time");
        time_name_title.setTextColor(Color.WHITE);
        time_name_title.setPadding(5,5,5,5);
        followup_tr_head.addView(time_name_title);// add the column to the table row here
        time_name_title.setTextSize(12);    

        TextView student_name_title = new TextView(this);
        student_name_title.setId(20);
        student_name_title.setText("Student Name");
        student_name_title.setTextColor(Color.WHITE);
        student_name_title.setPadding(5,5,5,5);
        followup_tr_head.addView(student_name_title);// add the column to the table row here
        student_name_title.setTextSize(12);    

        //----------------------On click time_name_title---------------------------------------

        time_name_title.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                //makeAToast("Hello!");
                populateTableTimeDescending();

            }
        });
        //----------------------On click time_name_title---------------------------------------

        //----------------------On click student_name_title---------------------------------------

        student_name_title.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                //makeAToast("Hello!");
                populateTableNameAscending();

            }
        });
        //----------------------On click student_name_title---------------------------------------

        follow_up_table.addView(followup_tr_head, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        //--------------- Table Header-----------------------------------------------

        Iterator itr = time_name_list_time_asc.iterator();
        Iterator itr2 = student_name_list_time_asc.iterator();
        while(itr.hasNext())
        {
            while(itr2.hasNext())
            {

                //----------------table body------------------------------------------
                followup_tr_data = new TableRow(this);
                followup_tr_data.setId(10);
                followup_tr_data.setBackgroundResource(R.drawable.grey_list_bg);
                followup_tr_data.setLayoutParams(new LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));

                final TextView timeNameText = new TextView(this);
                timeNameText.setId(20);
                timeNameText.setText(Html.fromHtml(itr.next().toString()));
                timeNameText.setTextColor(Color.BLACK);
                timeNameText.setPadding(5,5,5,5);
                timeNameText.setTextSize(10);
                followup_tr_data.addView(timeNameText);// add the column to the table row here

                final TextView StudentNameText = new TextView(this);
                StudentNameText.setId(20);
                StudentNameText.setText(Html.fromHtml(itr2.next().toString()));
                StudentNameText.setTextColor(Color.BLACK);
                StudentNameText.setPadding(5,5,5,5);
                StudentNameText.setTextSize(10);
                followup_tr_data.addView(StudentNameText);// add the column to the table row here

                follow_up_table.addView(followup_tr_data, new TableLayout.LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));

                //----------------table body------------------------------------------

            }

        }
    } 
```

在**time_name_title.setOnClickListener(new OnClickListener()**里面我试图改变没有发生的文本颜色。

**----------------编辑完整代码------------------------------- ---**

```
public class TableActivity extends Activity {

    TableLayout follow_up_table;
    TableRow followup_tr_data;

    List<String> time_name_list_time_asc;
    List<String> student_name_list_time_asc;

    List<String> time_name_list_time_dsc;
    List<String> student_name_list_time_dsc;

    List<String> time_name_list_studname_asc;
    List<String> student_name_studname_asc;

    List<String> time_name_list_studname_dsc;
    List<String> student_name_list_studname_dsc;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_table);

        follow_up_table=(TableLayout) findViewById(R.id.follow_up_table);

        //getTime();

        // database handler

        deleteRows(); 

        insertData("Morning", "2013-04-23 10:00:00", "Suresh Kumar");
        insertData("Morning", "2013-04-23 11:30:00", "Pravat Das");
        insertData("Evening", "2013-04-23 16:16:00", "Namita Roy");
        insertData("Evening", "2013-04-23 17:30:00", "Rakesh Mitra");
        insertData("After noon", "2013-04-23 14:27:00", "Anil Sarma");

        //       getTimeNameTimeAsc();
        //       getStudentNameTimeAsc();
        //       getTimeNameTimeDsc();
        //       getStudentNameTimeDsc();
        //       getTimeNameSyudentAsc();
        //       getStudentNameStudentAsc();
        //       getTimeNameStudentDsc();
        //       getStudentNameStudentDsc();

        populateTableTimeAscending();
    }

    //==================================================================================//  
    //=============Functions for Table View=====================================================//
    //==================================================================================//  

    //Time ascending method
    public void populateTableTimeAscending()
    {
        getTimeNameTimeAsc();
        getStudentNameTimeAsc();
        follow_up_table.removeAllViews();
        //---------------Table Header-----------------------------------------------
        TableRow followup_tr_head = new TableRow(this);
        followup_tr_head.setId(10);
        followup_tr_head.setBackgroundResource(R.drawable.list_header);
        followup_tr_head.setLayoutParams(new LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        final TextView time_name_title = new TextView(this);
        time_name_title.setId(20);
        time_name_title.setText("Time");
        time_name_title.setTextColor(Color.WHITE);
        time_name_title.setPadding(5,5,5,5);
        followup_tr_head.addView(time_name_title);// add the column to the table row here
        time_name_title.setTextSize(12);    

        TextView student_name_title = new TextView(this);
        student_name_title.setId(20);
        student_name_title.setText("Student Name");
        student_name_title.setTextColor(Color.WHITE);
        student_name_title.setPadding(5,5,5,5);
        followup_tr_head.addView(student_name_title);// add the column to the table row here
        student_name_title.setTextSize(12);    

        //----------------------On click time_name_title---------------------------------------

        time_name_title.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                //makeAToast("Hello!");
                populateTableTimeDescending();

            }
        });
        //----------------------On click time_name_title---------------------------------------

        //----------------------On click student_name_title---------------------------------------

        student_name_title.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                //makeAToast("Hello!");
                populateTableNameAscending();

            }
        });
        //----------------------On click student_name_title---------------------------------------

        follow_up_table.addView(followup_tr_head, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        //--------------- Table Header-----------------------------------------------

        Iterator itr = time_name_list_time_asc.iterator();
        Iterator itr2 = student_name_list_time_asc.iterator();
        while(itr.hasNext())
        {
            while(itr2.hasNext())
            {

                //----------------table body------------------------------------------
                followup_tr_data = new TableRow(this);
                followup_tr_data.setId(10);
                followup_tr_data.setBackgroundResource(R.drawable.grey_list_bg);
                followup_tr_data.setLayoutParams(new LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));

                final TextView timeNameText = new TextView(this);
                timeNameText.setId(20);
                timeNameText.setText(Html.fromHtml(itr.next().toString()));
                timeNameText.setTextColor(Color.BLACK);
                timeNameText.setPadding(5,5,5,5);
                timeNameText.setTextSize(10);
                followup_tr_data.addView(timeNameText);// add the column to the table row here

                final TextView StudentNameText = new TextView(this);
                StudentNameText.setId(20);
                StudentNameText.setText(Html.fromHtml(itr2.next().toString()));
                StudentNameText.setTextColor(Color.BLACK);
                StudentNameText.setPadding(5,5,5,5);
                StudentNameText.setTextSize(10);
                followup_tr_data.addView(StudentNameText);// add the column to the table row here

                follow_up_table.addView(followup_tr_data, new TableLayout.LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));

                //----------------table body------------------------------------------

            }

        }
    }

    //Time descending method
    public void populateTableTimeDescending()
    {
        getTimeNameTimeDsc();
        getStudentNameTimeDsc();
        follow_up_table.removeAllViews();

        //---------------Table Header-----------------------------------------------
        TableRow followup_tr_head = new TableRow(this);
        followup_tr_head.setId(10);
        followup_tr_head.setBackgroundResource(R.drawable.list_header);
        followup_tr_head.setLayoutParams(new LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        TextView time_name_title = new TextView(this);
        time_name_title.setId(20);
        time_name_title.setText("Time");
        time_name_title.setTextColor(Color.WHITE);
        time_name_title.setPadding(5,5,5,5);
        followup_tr_head.addView(time_name_title);// add the column to the table row here
        time_name_title.setTextSize(12);    

        TextView student_name_title = new TextView(this);
        student_name_title.setId(20);
        student_name_title.setText("Student Name");
        student_name_title.setTextColor(Color.WHITE);
        student_name_title.setPadding(5,5,5,5);
        followup_tr_head.addView(student_name_title);// add the column to the table row here
        student_name_title.setTextSize(12);    

        //----------------------On click setOnClickListener---------------------------------------

        time_name_title.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                populateTableTimeAscending();

            }
        });
        //----------------------On click setOnClickListener---------------------------------------

        //----------------------On click student_name_title---------------------------------------

                student_name_title.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub

                        //makeAToast("Hello!");
                        populateTableNameAscending();

                    }
                });
                //----------------------On click student_name_title---------------------------------------

        follow_up_table.addView(followup_tr_head, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        //--------------- Table Header-----------------------------------------------

        Iterator itr = time_name_list_time_dsc.iterator();
        Iterator itr2 = student_name_list_time_dsc.iterator();
        while(itr.hasNext())
        {
            while(itr2.hasNext())
            {

                //----------------table body------------------------------------------
                followup_tr_data = new TableRow(this);
                followup_tr_data.setId(10);
                followup_tr_data.setBackgroundResource(R.drawable.grey_list_bg);
                followup_tr_data.setLayoutParams(new LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));

                final TextView timeNameText = new TextView(this);
                timeNameText.setId(20);
                timeNameText.setText(Html.fromHtml(itr.next().toString()));
                timeNameText.setTextColor(Color.BLACK);
                timeNameText.setPadding(5,5,5,5);
                timeNameText.setTextSize(10);
                followup_tr_data.addView(timeNameText);// add the column to the table row here

                final TextView StudentNameText = new TextView(this);
                StudentNameText.setId(20);
                StudentNameText.setText(Html.fromHtml(itr2.next().toString()));
                StudentNameText.setTextColor(Color.BLACK);
                StudentNameText.setPadding(5,5,5,5);
                StudentNameText.setTextSize(10);
                followup_tr_data.addView(StudentNameText);// add the column to the table row here

                follow_up_table.addView(followup_tr_data, new TableLayout.LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));

                //----------------table body------------------------------------------

            }

        }
    }

    //Name ascending method
    public void populateTableNameAscending()
    {
        getTimeNameSyudentAsc();
        getStudentNameStudentAsc();
        follow_up_table.removeAllViews();
        //---------------Table Header-----------------------------------------------
        TableRow followup_tr_head = new TableRow(this);
        followup_tr_head.setId(10);
        followup_tr_head.setBackgroundResource(R.drawable.list_header);
        followup_tr_head.setLayoutParams(new LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        TextView time_name_title = new TextView(this);
        time_name_title.setId(20);
        time_name_title.setText("Time");
        time_name_title.setTextColor(Color.WHITE);
        time_name_title.setPadding(5,5,5,5);
        followup_tr_head.addView(time_name_title);// add the column to the table row here
        time_name_title.setTextSize(12);    

        TextView student_name_title = new TextView(this);
        student_name_title.setId(20);
        student_name_title.setText("Student Name");
        student_name_title.setTextColor(Color.WHITE);
        student_name_title.setPadding(5,5,5,5);
        followup_tr_head.addView(student_name_title);// add the column to the table row here
        student_name_title.setTextSize(12);    

        //----------------------On click time_name_title---------------------------------------

        time_name_title.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                //makeAToast("Hello!");
                populateTableTimeDescending();

            }
        });
        //----------------------On click time_name_title---------------------------------------

        //----------------------On click student_name_title---------------------------------------

        student_name_title.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                //makeAToast("Hello!");
                populateTableNameDescending();

            }
        });
        //----------------------On click student_name_title---------------------------------------

        follow_up_table.addView(followup_tr_head, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        //--------------- Table Header-----------------------------------------------

        Iterator itr = time_name_list_studname_asc.iterator();
        Iterator itr2 = student_name_studname_asc.iterator();
        while(itr.hasNext())
        {
            while(itr2.hasNext())
            {

                //----------------table body------------------------------------------
                followup_tr_data = new TableRow(this);
                followup_tr_data.setId(10);
                followup_tr_data.setBackgroundResource(R.drawable.grey_list_bg);
                followup_tr_data.setLayoutParams(new LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));

                final TextView timeNameText = new TextView(this);
                timeNameText.setId(20);
                timeNameText.setText(Html.fromHtml(itr.next().toString()));
                timeNameText.setTextColor(Color.BLACK);
                timeNameText.setPadding(5,5,5,5);
                timeNameText.setTextSize(10);
                followup_tr_data.addView(timeNameText);// add the column to the table row here

                final TextView StudentNameText = new TextView(this);
                StudentNameText.setId(20);
                StudentNameText.setText(Html.fromHtml(itr2.next().toString()));
                StudentNameText.setTextColor(Color.BLACK);
                StudentNameText.setPadding(5,5,5,5);
                StudentNameText.setTextSize(10);
                followup_tr_data.addView(StudentNameText);// add the column to the table row here

                follow_up_table.addView(followup_tr_data, new TableLayout.LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));

                //----------------table body------------------------------------------

            }

        }
    }   

    //Name descending method
    public void populateTableNameDescending()
    {
        getTimeNameStudentDsc();
        getStudentNameStudentDsc();
        follow_up_table.removeAllViews();
        //---------------Table Header-----------------------------------------------
        TableRow followup_tr_head = new TableRow(this);
        followup_tr_head.setId(10);
        followup_tr_head.setBackgroundResource(R.drawable.list_header);
        followup_tr_head.setLayoutParams(new LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        TextView time_name_title = new TextView(this);
        time_name_title.setId(20);
        time_name_title.setText("Time");
        time_name_title.setTextColor(Color.WHITE);
        time_name_title.setPadding(5,5,5,5);
        followup_tr_head.addView(time_name_title);// add the column to the table row here
        time_name_title.setTextSize(12);    

        TextView student_name_title = new TextView(this);
        student_name_title.setId(20);
        student_name_title.setText("Student Name");
        student_name_title.setTextColor(Color.WHITE);
        student_name_title.setPadding(5,5,5,5);
        followup_tr_head.addView(student_name_title);// add the column to the table row here
        student_name_title.setTextSize(12);    

        //----------------------On click time_name_title---------------------------------------

        time_name_title.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                //makeAToast("Hello!");
                populateTableTimeDescending();

            }
        });
        //----------------------On click time_name_title---------------------------------------

        //----------------------On click student_name_title---------------------------------------

        student_name_title.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                //makeAToast("Hello!");
                populateTableNameAscending();

            }
        });
        //----------------------On click student_name_title---------------------------------------

        follow_up_table.addView(followup_tr_head, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        //--------------- Table Header-----------------------------------------------

        Iterator itr = time_name_list_studname_dsc.iterator();
        Iterator itr2 = student_name_list_studname_dsc.iterator();
        while(itr.hasNext())
        {
            while(itr2.hasNext())
            {

                //----------------table body------------------------------------------
                followup_tr_data = new TableRow(this);
                followup_tr_data.setId(10);
                followup_tr_data.setBackgroundResource(R.drawable.grey_list_bg);
                followup_tr_data.setLayoutParams(new LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));

                final TextView timeNameText = new TextView(this);
                timeNameText.setId(20);
                timeNameText.setText(Html.fromHtml(itr.next().toString()));
                timeNameText.setTextColor(Color.BLACK);
                timeNameText.setPadding(5,5,5,5);
                timeNameText.setTextSize(10);
                followup_tr_data.addView(timeNameText);// add the column to the table row here

                final TextView StudentNameText = new TextView(this);
                StudentNameText.setId(20);
                StudentNameText.setText(Html.fromHtml(itr2.next().toString()));
                StudentNameText.setTextColor(Color.BLACK);
                StudentNameText.setPadding(5,5,5,5);
                StudentNameText.setTextSize(10);
                followup_tr_data.addView(StudentNameText);// add the column to the table row here

                follow_up_table.addView(followup_tr_data, new TableLayout.LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));

                //----------------table body------------------------------------------

            }

        }
    }   

    //==================================================================================//  
    //=============Functions for Table View=====================================================//
    //==================================================================================//      

    //==================================================================================//  
    //=============Functions for DB=====================================================//
    //==================================================================================//  
    //=================Time name ascending=================================
    public void getTimeNameTimeAsc()
    {

        DatabaseHandler db = new DatabaseHandler(getApplicationContext());

        time_name_list_time_asc = db.getTimeNameTimeAsc();
        Iterator itr = time_name_list_time_asc.iterator();
        while(itr.hasNext())
        {
            System.out.println(itr.next());
        }

    }

    public void getStudentNameTimeAsc()
    {
        DatabaseHandler db = new DatabaseHandler(getApplicationContext());

        student_name_list_time_asc = db.getStudentNameTimeAsc();
        Iterator itr = student_name_list_time_asc.iterator();
        while(itr.hasNext())
        {
            System.out.println(itr.next());
        }
    }

    //=================Time name ascending=================================

    //=================Time name descending=================================
    public void getTimeNameTimeDsc()
    {

        DatabaseHandler db = new DatabaseHandler(getApplicationContext());

        time_name_list_time_dsc = db.getTimeNameTimeDsc();
        Iterator itr = time_name_list_time_dsc.iterator();
        while(itr.hasNext())
        {
            System.out.println(itr.next());
        }

    }

    public void getStudentNameTimeDsc()
    {
        DatabaseHandler db = new DatabaseHandler(getApplicationContext());

        student_name_list_time_dsc = db.getStudentNameTimeDsc();
        Iterator itr = student_name_list_time_dsc.iterator();
        while(itr.hasNext())
        {
            System.out.println(itr.next());
        }
    }

    //=================Time name descending=================================

    //=================Student name ascending=================================
    public void getTimeNameSyudentAsc()
    {

        DatabaseHandler db = new DatabaseHandler(getApplicationContext());

        time_name_list_studname_asc = db.getTimeNameSyudentAsc();
        Iterator itr = time_name_list_studname_asc.iterator();
        while(itr.hasNext())
        {
            System.out.println(itr.next());
        }

    }

    public void getStudentNameStudentAsc()
    {
        DatabaseHandler db = new DatabaseHandler(getApplicationContext());

        student_name_studname_asc = db.getStudentNameStudentAsc();
        Iterator itr = student_name_studname_asc.iterator();
        while(itr.hasNext())
        {
            System.out.println(itr.next());
        }
    }

    //=================Student name ascending=================================

    //=================Student name descending=================================
    public void getTimeNameStudentDsc()
    {

        DatabaseHandler db = new DatabaseHandler(getApplicationContext());

        time_name_list_studname_dsc = db.getTimeNameStudentDsc();
        Iterator itr = time_name_list_studname_dsc.iterator();
        while(itr.hasNext())
        {
            System.out.println(itr.next());
        }

    }

    public void getStudentNameStudentDsc()
    {
        DatabaseHandler db = new DatabaseHandler(getApplicationContext());

        student_name_list_studname_dsc = db.getStudentNameStudentDsc();
        Iterator itr = student_name_list_studname_dsc.iterator();
        while(itr.hasNext())
        {
            System.out.println(itr.next());
        }
    }

    //=================Student name descending=================================

    //method to insert data into local database
    public void insertData(String timeName, String time, String studentName)
    {
        DatabaseHandler db = new DatabaseHandler(TableActivity.this);
        ContentValues values = new ContentValues();
        //db.createDataBase();
        values.put("timeName",timeName);
        values.put("time",time);
        values.put("studentName",studentName);

        db.insertValues(timeName, time, studentName);
        db.close();

    }

    //method to delete all rows
    public void deleteRows()
    {
        DatabaseHandler db = new DatabaseHandler(getApplicationContext());
        db.deleteAllData();
        db.close();
    }
    //==================================================================================//  
    //=============Functions for DB=====================================================//
    //==================================================================================//  

    //method to show toast message
    public void makeAToast(String str) {
        //yet to implement
        Toast toast = Toast.makeText(this,str, Toast.LENGTH_SHORT);
        toast.setGravity(Gravity.CENTER, 0, 0);
        toast.show();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:34:24.720

你也可以使用这个：

```
textview.setOnTouchListener(new View.OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                switch (event.getAction()) {

                case MotionEvent.ACTION_DOWN:
                    textview.setTextColor(Color.BLUE);
                    break;
                case MotionEvent.ACTION_UP:
                    textview.setTextColor(Color.BLACk);
                    break;
                }
                return false;
            }
        }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-31T12:22:08.337

单击时更改文本颜色的另一种方法是：添加资源文件：保存在 res/color/button_text.xml 的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:color="#ffff0000"/> <!-- pressed -->
    <item android:state_focused="true"
          android:color="#ff0000ff"/> <!-- focused -->
    <item android:color="#ff000000"/> <!-- default -->
</selector> 
```

并为您的小部件设置为 textColor：

```
<Button
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/button_text"
    android:textColor="@color/button_text" /> 
```

有关更多信息，请查看[**谷歌指南**](http://developer.android.com/guide/topics/resources/color-list-resource.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:45:21.667

确保您尝试在正确的 TextView 中更改文本颜色，并尝试在 populateTableTimeDescending(); 之后调用 setTextColor；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T06:48:39.757

```
 final TextView tv = new TextView(this);
    tv.setText("Sample TextView");

    rl = (RelativeLayout) findViewById(R.id.rl);
    rl.addView(tv);
    tv.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            populateTableTimeDescending();//since you are setting the color of the TextView back to same(white) again in this method, set the color of the textView after calling the method. 
            tv.setTextColor(Color.parseColor("#FF0000")); //**edited**
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T07:39:49.027

您正在尝试设置相同的颜色。看看这个。![在此处输入图像描述](https://i.stack.imgur.com/EUPkr.png)

![在此处输入图像描述](https://i.stack.imgur.com/HGLfd.png)

请在任何方法中先更改颜色。

- - - - - - - 编辑 - - - - - - -

然后在你`textview.setColor(Color.BLUE);`之前做`populateTableTimeDescending();``onClick();`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T11:48:06.127

在这里，在四位数字之后，您可以使用十六进制颜色代码设置您想要的任何颜色：

```
time_name_title.setTextColor(0xffffffff); 
```

# sql - Oracle says not a group by expresssion

> ID：16207753
> 
> 赞同：0
> 
> 时间：2013-04-25T06:21:19.497
> 
> 标签：sql, oracle

I am new to Oracle.

I tried a query in `MySQL` and it works fine

```
select 
    segment1, description, organization_id
from
    apps.mtl_system_items_b
where
    organization_id IN (110 , 268, 448)
GROUP BY segment1
HAVING COUNT(DISTINCT organization_id) = 3 
```

But in `Oracle`, it says `not a group by expression`. What's wrong?

EDIT:-

I want the result like this

```
organisation_id   segment1
110               306145244
268               306145244
448               306145244
110               444444444
268               444444444
448               444444444 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:25:23.173

You have ungrouped an unaggregated expressions in your `SELECT` list.

`MySQL` allows them (without specifying which of many possible values will it return), but `Oracle` does not.

By definition, your query will return only segments with 3 different organizations. So which of those organizations you want to return?

If you only want to return segment, just use this:

```
SELECT  segment1
FROM    apps.mtl_system_items_b
WHERE   organization_id IN (110 , 268, 448)
GROUP BY
        segment1
HAVING  COUNT(DISTINCT organization_id) = 3 
```

If you want all items with segments belonging to three organizations, use this:

```
SELECT  segment1, description, organization_id
FROM    (
        SELECT  i.*,
                COUNT(DISTINCT organization_id) OVER (PARTITION BY segment1) cnt
        FROM    apps.mtl_system_items_b
        WHERE   organization_id IN (110, 268, 448)
        )
WHERE   cnt = 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:24:42.140

Sorry for the quick answer

```
select 
segment1, description, organization_id from
apps.mtl_system_items_b where
organization_id IN (110 , 268, 448) 
GROUP BY segment1, description, organization_id 
HAVING COUNT(DISTINCT organization_id) =3 
```

Maybe this explanation could help you to gain some understanding in terms of GROUP BY

The SQL GROUP BY clause can be used in an SQL SELECT statement to collect data across multiple records and group the results by one or more columns.

The syntax for the SQL GROUP BY clause is:

```
SELECT column1, column2, ... column_n, aggregate_function (expression)
FROM tables
WHERE predicates
GROUP BY column1, column2, ... column_n; 
```

aggregate_function can be a function such as SQL SUM function, SQL COUNT function, SQL MIN function, or SQL MAX function.

Since you have the aggregate_function you need to group by each of the field you display or select.

Please refer to the depth-explanation below

> [http://docs.oracle.com/javadb/10.6.2.1/ref/rrefsqlj32654.html](http://docs.oracle.com/javadb/10.6.2.1/ref/rrefsqlj32654.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:25:33.040

Here's the reason why the query work on MySQL: [MySQL Extensions to GROUP BY](http://dev.mysql.com/doc/refman/5.6/en/group-by-extensions.html).

In `Oracle` and any other RDBMS, this won't work because you need to explicitly list all the non-aggregated columns on the group by clause. To make it work, add them on the `GROUP BY` clause

```
GROUP BY segment1, description, organization_id 
```

# c++ - 为什么使用 'function address == NULL' 而不是 'false'？

> ID：16207755
> 
> 赞同：22
> 
> 时间：2013-04-25T06:21:27.577
> 
> 标签：c++, c, deobfuscation

在一些遗留代码中浏览我发现了这样的功能：

```
static inline bool EmptyFunc()
{
    return (void*) EmptyFunc == NULL;
} 
```

和这个有什么区别：

```
static inline bool EmptyFunc()
{
    return false;
} 
```

这段代码是为了在几个不同的平台下编译而创建的，比如 PS2、Wii、PC……有什么理由使用第一个函数吗？喜欢更好的优化或避免一些奇怪的编译器错误行为？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T06:44:55.650

从语义上讲，这两个函数是相同的：它们总是返回 false*。标准完全允许将第一个表达式折叠为常数值“false”，因为它不会改变任何可观察到的副作用（其中没有）。由于编译器看到了整个函数，它还可以自由地优化对它的任何调用并将其替换为常量“false”值。

也就是说，第一种形式没有“通用”值，很可能是程序员的错误。唯一的可能性是它利用了特定编译器/版本中的一些特殊行为（或缺陷）。然而我不知道结果是什么。如果您希望使用特定于编译器的属性来防止内联，那将是正确的方法——如果编译器发生变化，其他任何事情都容易破坏。

（*这假设`NULL`从未定义为 is `EmptyFunc`，这将导致`true`被返回。）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T07:36:58.193

严格来说，函数指针不能转换为 void 指针，然后发生的事情超出了标准的范围。C11 标准将其列为 J.5.7 中的“通用扩展”（我怀疑这同样适用于 C++）。因此，这两种情况的唯一区别在于前者是不可移植的。

看起来前一个版本最可能的原因是程序员困惑或编译器困惑。我们可以肯定地说，由于缺少解释性注释，程序员感到困惑/草率。

`inline`将函数声明为然后尝试通过在代码中包含函数地址来欺骗编译器不内联代码并没有多大意义。所以我认为我们可以排除这种理论，除非程序员当然感到困惑并认为这是有道理的。

# eclipse - 如何使用 Eclipse 从 svn 中签出

> ID：16207758
> 
> 赞同：3
> 
> 时间：2013-04-25T06:21:41.837
> 
> 标签：eclipse, svn, tortoisesvn

我正在使用 Eclipse for PHP Developers 版本：3.0.2。我如何从远程 svn(TortoiseSVN) 签出。我在网上搜索，但它确实有帮助，我尝试导入，但没有“来自 svn”这样的选项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T06:24:55.657

1.  安装 subclipse 插件（在 eclipse 中提供 svn 连接）并连接到存储库。这里[的说明](http://subclipse.tigris.org/install.html)
2.  转到`File->New->Other->Under the SVN category`，从 SVN 中选择 Checkout Projects。
3.  选择项目的根文件夹，然后选择 checkout 作为工作区中的项目。

有关更多详细信息，请查看[如何在 Eclipse 中使用 Subversion](http://www.ibm.com/developerworks/opensource/library/os-ecl-subversion/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:26:55.213

你可能没有安装 eclipse 的 svn 插件。你可以从这里下载。 [http://www.eclipse.org/subversive/latest-releases.php](http://www.eclipse.org/subversive/latest-releases.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:35:10.117

如果您没有“从 SVN 签出项目”选项，您可能缺少 SVN 插件。@Arcane 发布了一个下载插件的链接，[这里](http://www.ibm.com/developerworks/opensource/library/os-ecl-subversion/)[ [1](http://www.ibm.com/developerworks/opensource/library/os-ecl-subversion/) ] 是一个完整描述如何使用插件的链接。

[ [1](http://www.ibm.com/developerworks/opensource/library/os-ecl-subversion/) ]：[http ://www.ibm.com/developerworks/opensource/library/os-ecl-subversion/](http://www.ibm.com/developerworks/opensource/library/os-ecl-subversion/)

# performance - Excel 2010 计算速度快但启动速度慢

> ID：16207760
> 
> 赞同：0
> 
> 时间：2013-04-25T06:21:58.947
> 
> 标签：performance, excel, startup

我创建了一个 Excel 数据库，该数据库从多个工作表中获取信息，并将数据存储在一个布局中的单个“数据库”工作表中，这样可以轻松创建数据透视表以捕获数据库中的所有数据。数据库选项卡中的信息要么直接链接到其他工作表中的单元格，要么使用偏移功能链接到其他工作表中的单元格。

数据库页面只有 10,000 多行和 100 多列（即大约一百万个链接单元格）。我一直在努力寻找解决这个问题的方法，但一直无法做到。计算时间相对较快，因为工作簿不使用 sumifs 或 sumproduct 等数组公式。

是数据库太大还是有办法避免启动极慢（20-30 分钟）？

谢谢！

# iphone - Cocoa Pods 使用框架时出现重复符号错误

> ID：16207767
> 
> 赞同：0
> 
> 时间：2013-04-25T06:22:42.117
> 
> 标签：iphone, ios, cocoa, cocoapods

我正在使用一个框架`AFNetworking`，发现它存储在供应商文件`AFNetowrking`中，我也在可可豆荚的 podfile 中使用。删除`AFNetworking`任何一个中的功能都不是一种选择。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:00:19.610

您不能在同一个项目中同时链接这些符号，并且*不能*有重复的符号。重复符号的含义是多次声明/导入相同的符号，这正是这里发生的情况。解决此问题的唯一方法是删除两个位置之一的框架。即使可以解决此问题，您也不会想要解决此问题，因为同一框架的版本可能会出现差异，从而使您根据所使用的版本使用不同的 API，这将是一个令人困惑的头痛。

# javascript - 对一个输出使用具有三个功能的两个输入字段

> ID：16207772
> 
> 赞同：0
> 
> 时间：2013-04-25T06:23:10.587
> 
> 标签：javascript, html, output

我使用两个函数来处理两个输入，然后使用第三个函数将结果与作为输出的第三个函数的结果进行比较。

这是我的 HTML：

```
<form id="standardPremuimcalc" oninput="updateOutput()">
    <input name= "new_loan_amount" type="number" value="0"/>
    <input name= "purchase_price" type="number" value="0"/>
    <output name= "premuim_rate" for="new loan amount purchase price"></output>
</form> 
```

这是我的js：

```
function updateOutput(){

var form = document.getElementById("standardPremiumcalc");
var out = form.elements["premium_rate"];
var amount = parseInt(form.elements["new_loan_amount"].value);
var purchase = parseInt(form.elements ["purchase_price"].value);
var loanCalc = lender()
var ownCalc = owner()

function lender(amount){
if (amount<=100000){
    if (amount<=40000){
        return 200;
    }else{
        return (Math.ceil(amount/1000))*5;
    }
}else{
    if ((amount-100000)<=500000){
        return 500+(Math.ceil((amount-100000)/1000)*3.95);
    }else if ((amount-500000)<=2000000) {
        return 2080+(Math.ceil((amount-500000)/1000)*2.65);
    }else{
        return 6055+(Math.ceil((amount-2000000)/1000)*2);
    }
} 
}
function owner(purchase) {
if (purchase<=100000){
    if (purchase<=40000){
        return 200;
    }else{
        return (Math.ceil(purchase/1000))*5;
    }
}else{
    if ((purchase-100000)<=500000){
        return 500+(Math.ceil((purchase-100000)/1000)*3.95);
    }else if ((purchase-500000)<=2000000) {
        return 2080+(Math.ceil((purchase-500000)/1000)*2.65);
    }else{
        return 6055+(Math.ceil((purchase-2000000)/1000)*2);
    }
} 
}
function standardPremium (loanCalc,ownCalc) {
    if (loanCalc-ownCalc>0) {
        out.value = loanCalc+ownCalc
    }else{
        out.value = loanCalc
}
}
    lender(amount)
    owner(purchase)
    standardPremium(loanCalc,ownCalc)
}; 
```

我没有得到输出字段，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:06:41.003

first: your form id has the same misspelling.

second: you don't pass an **amount** variable to your two functions **lender** and **owner**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:24:16.793

`premuim_rate`需要`premium_rate`在您的 HTML 中

# tcl - 如何检查 tcl 列表中的相邻值？

> ID：16207778
> 
> 赞同：1
> 
> 时间：2013-04-25T06:23:30.997
> 
> 标签：tcl

我有一个类似的清单

```
set val [ list Fa2/0/1 Fa2/0/24 Gi1/0/13 Gi1/0/23 Gi1/1/1 Gi2/0/1 ] 
```

现在我想把它放在一个循环中并在每个范围内执行一些命令

像

```
set number 0
set pattern 0
foreach n $val {
    if {$pattern == 0} {
        set current $n
        regexp {(.*/)(\d+)} $n - pattern number
        continue
    }

    regexp {(.*/)(\d+)} $n - match1 match2
    if {$match1 == $pattern} {
        #puts "someproc $current - match2"
    }
} 
```

我无法完成这项工作，输出应该类似于 ech 对或找到的奇异值

```
someproc Fa2/0/1 - 24
someproc Gi1/0/13 - 23
someproc Gi1/1/1 - 1       #for singular values
someproc Gi2/0/1 - 1 
```

编辑：我有一个这样的数据列表：

```
 Gi3/0/1 Fa2/0/1 Fa2/0/24 Gi1/0/13 Gi1/0/23 Gi1/1/1 Gi2/0/1 Te1/0/1 
```

您可以在其中说每个数据可以是类型，或者`Gi3/0/`这些数据可以代表cisco swicth 上的某些端口范围。现在，对于每种类型，我都需要为一个范围执行一些命令。再次获取上面的列表，我可以获得。`Gi2/0/``Fa2/0/`

```
somecommand Gi3/0/1 - 1 # there is only one `Gi3/0/` with number 1.
somecommand Fa2/0/1 - 24 # range of `Fa2/0/` is 1 to 24 
```

相似地，

```
somecommand Gi1/0/13 - 23
somecommand Gi1/1/1 - 1
and so on 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:36:31.200

```
#!/usr/bin/tcl

## Assumptions:
## The pattern will always be X/X/X
##  The values are given in list
set val_list [list Fa2/0/1 Fa2/0/24 Gi1/0/13 Gi1/0/23 Gi1/1/1 Gi2/0/1]

array set pattern {}

foreach item $val_list {
set parent [file dir $item]
set val [file tail $item]
if {[info exists pattern($parent,L)] && [info exists pattern($parent,H)]  } {
    if {$pattern($parent,L) > $val } {
    set pattern($parent,L) $val
    } elseif { $pattern($parent,H) < $val} {
    set pattern($parent,H) $val
    }
} else {  
    set pattern($parent,L) $val
    set pattern($parent,H) $val 
}
}
array set count {}
foreach pat  [array names pattern] {
set pat [lindex [split $pat ,] 0]
if {![info exists count($pat)] } {
    puts "$pat $pattern($pat,L) - $pattern($pat,H)"
    set count($pat) 1
}
}

/*The output will be 
Gi1/0 13 - 23
Fa2/0 1 - 24
Gi2/0 1 - 1
Gi1/1 1 - 1
*/ 
```

希望这是您所要求的。我使用数组“count”来删除输出中的重复条目，这是需要避免的。希望有人能提出更好的方法。仅供参考，我使用的是 8.4 版本的 TCL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:41:47.203

如果您不确定数组是如何工作的，您可以编辑您发布的作为此代码答案的代码：

```
set number 0
set pattern 0
set current 0
set result [list Gi3/0/1 Fa2/0/1 Fa2/0/24 Gi1/0/13 Gi1/0/23 Gi1/1/1 Gi2/0/1 Te1/0/1]

foreach n [lsort $result] {
  if {$pattern == 0} {
        set current $n
    regexp {(.*/)(\d+)} $n - pattern number
    continue
  }
  regexp {(.*/)(\d+)} $n - match1 match2
    if {$match1 == $pattern} {
        set number $match2
    } else {
        puts "$current - $number"
        set pattern $match1
        set number $match2
        set current $n
    }
} 
```

这对我行得通 ：）

输出（请注意，我首先对列表进行了排序，因此您只需要担心增加`$number`或`$match2`不必过多担心`$pattern`）：

```
Fa2/0/1 - 24
Gi1/0/13 - 23
Gi1/1/1 - 1
Gi2/0/1 - 1
Gi3/0/1 - 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T20:14:30.757

这是我的解决方案，它不使用数组（数组没有任何问题，我的解决方案只是不需要它），并且它一次性完成（即只有一个循环）。

```
set val [ list Fa2/0/1 Fa2/0/24 Gi1/0/13 Gi1/0/23 Gi1/1/1 Gi2/0/1 ]
set lastPattern ""
set lastNumber 0
lappend val x/1/1; # Add a trailer to ease processing

foreach item $val {
    # If item=Fa2/0/1, then pattern=Fa2/0 and number=1
    set pattern [file dirname $item]
    set number  [file tail $item]

    if {$pattern == $lastPattern} {
        # We have seen this pattern before
        puts "$pattern/$lastNumber - $number"
        set lastPattern ""
    } else {
        # This is a new pattern, print the old one if applicable then
        # save the pattern and number for later processing
        if {$lastPattern != ""} {
            puts "$lastPattern/$lastNumber - $lastNumber"
        }
        set lastPattern $pattern
        set lastNumber $number
    }
}
set val [lrange $val end-1]; # Remove the trailer 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T21:09:56.283

`for`如果要比较相邻的列表元素，使用 C 风格的循环可能更简洁：

```
for {set i 0} {$i < [llength $val] - 1} {incr i} {
    set current [lindex $val $i]
    set next    [lindex $val [expr {$i+1}]]

    # ...
} 
```

或者，更深奥一点

```
set l {a b c d e f g}
foreach current [lrange $l 0 end-1] \
        next    [lrange $l 1 end] {
    puts "$current $next"
} 
```

输出

```
a b
b c
c d
d e
e f
f g 
```

你甚至可以编写一个新的控制结构，类似于 Ruby 的[each_cons](http://www.ruby-doc.org/core-2.0/Enumerable.html#method-i-each_cons)

```
proc foreach_cons {vars list body} {
    foreach varname $vars {upvar 1 $varname $varname}
    set numvars [llength $vars]
    for {set i 0} {$i <= [llength $list]-$numvars} {incr i} {
        lassign [lrange $list $i [expr {$i + $numvars}]] {*}$vars
        uplevel 1 $body
    }
}
foreach_cons {a b c} $l {puts "$a $b $c"} 
```

```
a b c
b c d
c d e
d e f
e f g 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T08:02:22.027

你为什么不循环列表**对**？

```
foreach {v1 v2} $val {
     someproc $v1 $v2
} 
```

您可以检查两个值是否相似，提取您需要的部分等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T13:19:09.090

我想出了我自己的一个尴尬的解决方案：其中 reslut 是列表：

```
 Gi3/0/1 Fa2/0/1 Fa2/0/24 Gi1/0/13 Gi1/0/23 Gi1/1/1 Gi2/0/1 Te1/0/1 
```

#

```
set number 0
set pattern 0
set last_element [lindex $result end]
set first_element [lindex $result 0]
foreach n $result {
    if {$pattern == 0} {
        set current $n
        set count 0
        regexp {(.*/)(\d+)} $n - pattern number
        continue
    }
    regexp {(.*/)(\d+)} $n - match1 match2
    if {$match1 == $pattern} {
    set count 0
    puts " $current - $match2"
        continue
     } else {
             if {"$last_element" == "$n"} {
             puts "$last_element"
             }
             if {"$first_element" == "$current"} {
             puts "$first_element"
             }
             incr count
             if {"$count" == 1} {
             set pattern $match1
             set current $n
             continue
             } else {
                     if {$match1 != $pattern} {
                     puts "$current"
                     }

             }
     set pattern $match1
     }
        set current $n

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-25T11:03:08.570

此解决方案稍短一些，但需要 Tcl 8.5。

首先，创建一个字典结构，其中前两个字段作为键和子键，并从第三个字段收集值列表作为字典值：

```
set data {}
foreach v $val {
    lassign [split $v /] a b c
    if {![dict exists $data $a $b]} {
        dict set data $a $b {}
    }
    dict with data $a {
        lappend $b $c
        set b [lsort –integer $b]
    }
} 
```

然后遍历这个字典结构，`someproc`为键、子键、第一个和最后一个值的每个组合调用命令。

```
dict for {a v} $data {
    dict for {b v} $v {
        someproc $a/$b/[lindex $v 0] - [lindex $v end]
    }
} 
```

文档：[dict](http://www.tcl.tk/man/tcl/TclCmd/dict.htm "操作字典")、[foreach](http://www.tcl.tk/man/tcl/TclCmd/foreach.htm "遍历一个或多个列表中的所有元素")、[if](http://www.tcl.tk/man/tcl/TclCmd/if.htm "有条件地执行脚本")、[lappend](http://www.tcl.tk/man/tcl/TclCmd/lappend.htm "将列表元素附加到变量上")、[lassign](http://www.tcl.tk/man/tcl/TclCmd/lassign.htm "将列表元素分配给变量")、[lindex](http://www.tcl.tk/man/tcl/TclCmd/lindex.htm "从列表中检索元素")、[set](http://www.tcl.tk/man/tcl/TclCmd/set.htm "读写变量")、[split](http://www.tcl.tk/man/tcl/TclCmd/split.htm "将字符串拆分为适当的 Tcl 列表")

# oop - 使用组合的 OOD 问题

> ID：16207779
> 
> 赞同：0
> 
> 时间：2013-04-25T06:23:31.927
> 
> 标签：oop

我有一堂课如下：

```
public UIManager{

    private UIInstructor uiInstructor;
    private MOdel model;

} 
```

UIManager 将他的一些任务委托给 UIInstructor。

我的问题是：如果 UIInstructor 想要使用 UIManager 的一些实例变量（例如：模型对象），让“UIInstructor”存储对 UIManager 的引用是一个好的设计实践吗？

或者我们是否需要改变设计以使“UIInstructor”不应该“依赖” UIManager 的任何操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:10:32.943

在这种情况下，第一个尝试的解决方案是让对象传递对to`UIManager`的引用。一般来说，避免不需要的依赖项是一个好主意，尤其是循环依赖项。`model``uiInstructor`

本着减少依赖的精神，您可能需要考虑是否真的`uiInstructor`应该看到*所有*. `model`因此，您的`Model`课程可能如下：

```
class Model
{
    private InstructorModel instructorModel;
    private StudentModel studentModel;
} 
```

你可以想象我们可能会添加到你的经理，所以它也显示了一个学生

```
class UIManager{
    private UIInstructor uiInstructor;
    private UIStudent uiStudent;
    private Model model;
} 
```

然后`UIManager`传递`model.instructorModel`到初始化`uiInstructor`，通常通过构造函数。并通过`model.studentModel`初始化`uiStudent`。

这些只是一些想法。有很多不同的做事方式，但一个好的经验法则是安排每个班级只“看到”它需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:34:00.377

在 UIInstructor 中添加对 UImanager 的引用会创建循环依赖，这不好。

理想情况下，构成新类的字段不应依赖于这个新类。

因此改变设计使得“UIInstructor”不应该“依赖” UIManager 的任何操作。

# c - 为什么对某些非素数的素数检查返回真？

> ID：16207785
> 
> 赞同：0
> 
> 时间：2013-04-25T06:23:50.670
> 
> 标签：c

我在检查一个数字是否为素数的函数时遇到了问题 - 它有时会返回一个数字不是素数（有时也是偶数！）。知道为什么吗？

```
int isPrime(long x){
    int i;

    if(x==2||x==3)      return 1;   //if i = 2 or 3, return true
    if(!(x&1))          return 0;   //if x is even  return false

    for(i=3;i<=sqrt(x);i+=2) if (x%i == 0) return 0;        //if x is divisible by i return false

    return 1;
} 
```

对于大家，非常感谢您的回答，如果我的代表足够高，我会全部+1：D

可悲的是，我的白痴达到了新的高度，我发现错误在我程序的其他地方的逻辑中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:33:40.360

可能是因为`sqrt(x)`这个函数调用的结果是**浮点**值的舍入。所以它可能比四舍五入到最接近的整数略小。

在这种情况下，例如`sqrt(25)`可以四舍五入`4`而不是`5`.

**编辑**

故障编号`104730`说明

```
 if(!(x&1)) return 0;   //if x is even  return false 
```

似乎无法正常工作...那么，您可以尝试一下`x&1L`吗？

我不确定，但 id 和的大小`int`不同`long`，并且（可能）`1`隐式地被强制转换为较短的一种类型，所以它可能检查不正确的位......

也试试

```
if(!(x%2)) return 0;   //if x is even  return false 
```

为了避免位模式的使用和平台依赖性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:06:50.097

我将for循环编辑为：

```
for(i=3;i<=x/2;i+=1) if (x%i == 0) return 0; 
```

我主要通过前 100 个数字。

```
int main()
{
    long test=0;
    int i = 2;
    for( ; i < 100; i++)
    {
        test = isPrime(i);
        if(test == 1) printf("%d ",i);
    }

       getchar();
       return 0;
} 
```

这是输出：这是前 100 个素数的输出：

```
2 3 5 7 11  13  17 19 23 29  31 37 41 43 47  53 59 61 67 71  73 79 83 89 97 
```

我将其更改`i+=2`为`i+=1`，因为在您的代码中每隔一秒跳过一次数字。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T06:45:33.943

您没有检查是否`x`可被 2 整除。

在该`for`循环之前添加一个`return 0`如果它可以被 2 整除。

# android - 让 TextView 将星期几显示为字母而不是整数

> ID：16207787
> 
> 赞同：0
> 
> 时间：2013-04-25T06:24:12.810
> 
> 标签：android, time, textview

我有一个文本视图，它将星期几显示为整数（0-7）。我希望它可以将其转换为字符串，然后可以在 TextView 中显示。我的代码如下。另外，我怎样才能让 TextViews 更新时间、日期等（它只显示应用程序打开的时间）？提前致谢。

MainActivity.java：

```
package press.linx.calendar;

import java.sql.Date;
import java.text.SimpleDateFormat;

import android.os.Bundle;
import android.app.Activity;
import android.text.format.Time;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    TextView day = (TextView)findViewById(R.id.day);
    TextView month = (TextView)findViewById(R.id.month);
    TextView year = (TextView)findViewById(R.id.year);
    TextView time = (TextView)findViewById(R.id.time);

    Time today = new Time(Time.getCurrentTimezone());
    today.setToNow();

    day.setText("" + today.monthDay);             // Day of the month (0-31)
    month.setText("" + today.month);              // Month (0-11)
    year.setText("" + today.year);                // Year 
    time.setText("" + today.format("%k:%M"));  // Current time

}

} 
```

更新：我使用这段代码得到了它：

```
final Calendar calendar = Calendar.getInstance();
    SimpleDateFormat formatter = new SimpleDateFormat("MMM"); // 3-letter month name & 2-char day of month
    TextView datetxt = (TextView) findViewById(R.id.nameofyourtextview);
    datetxt.setText(formatter.format(calendar.getTime())); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:39:28.917

要格式化您的时间：

```
Time time = new Time();
time.format("%A"); 
```

它返回星期几的名称（星期日，星期五..） - 请参阅[格式字符串的描述](http://php.net/manual/en/function.strftime.php)（这是一个 PHP 手册页，但符号相同且排列整齐）

为了使 textViews 每秒更新一次，您必须使用`Timer`和`TimerTask`.

定义更新时间任务：

```
class UpdateTimeTask extends TimerTask {

   public void run() {
       // Update time, must be called using runOnUiThread
   }
} 
```

然后设置计时器：

```
Timer timer = new Timer();
TimerTask updateTime = new UpdateTimeTask();
timer.scheduleAtFixedRate(updateTime, 0, 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:33:39.507

要获取一周中的当前日期（即星期一、星期二、星期三等），请尝试：

```
DateFormat fmt = new SimpleDateFormat( "EEEE" );
fmt.format( new java.util.Date() ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:33:39.783

我假设您正在寻找以以下格式显示的日期。

您可以使用以下

```
Date now = new Date();
SimpleDateFormat dateFormatter = new SimpleDateFormat("EEEE, MMMM d, yyyy");
System.out.println("Format :   " + dateFormatter.format(now)); 
```

输出

```
 Format :   Thursday, April 25, 2013 
```

一些有用的链接

[http://www.ntu.edu.sg/home/ehchua/programming/java/DateTimeCalendar.html](http://www.ntu.edu.sg/home/ehchua/programming/java/DateTimeCalendar.html)

[http://www.roseindia.net/tutorial/java/core/convertDateToWords.html](http://www.roseindia.net/tutorial/java/core/convertDateToWords.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T06:34:29.433

你的意思是显示为`Mon`, `Tue`, `Wed`,.... 吗？使用这种格式。

```
SimpleDateFormat curFormatDate = new SimpleDateFormat("EEE"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T06:38:25.067

试试这个

```
 month.setText(getMonth(today.month));    
  day.setText(getWeek(today.monthDay)); 
```

根据月份数获取月份的方法

```
public String getMonth(int month) {
    return new DateFormatSymbols().getMonths()[month];
} 
```

根据周数获取周的方法

```
public String getWeek(int weekno) {
    return new DateFormatSymbols().getWeekdays()[weekno];
} 
```

# java - Java：实例化方法变量

> ID：16207790
> 
> 赞同：0
> 
> 时间：2013-04-25T06:24:16.920
> 
> 标签：java, variables, methods, instantiation

我对 Java 编程比较陌生，可能错过了一些明显的东西，所以请耐心等待。

我正在创建一个使用带有 JDesktopPane 的 Swing API 来创建 GUI 的程序。主屏幕上有一个按钮，上面写着“新窗口”。用户单击它，一个新的 JInternalFrame 被实例化并添加到 JDesktopPane。如下，简化的方法：

```
protected void createNewWindow(JPanel panel) {

    JInternalFrame fooFrame = new JInternalFrame();
    fooFrame.setContentPane(panel);
    desktop.add(fooFrame);
} 
```

我的问题是这个。假设用户点击按钮十次。创建了十个 JInternalFrames。它们都是方法变量，因此它们具有相同的名称。

这些旧的 fooFrame 变量会发生什么？垃圾收集器会在任何阶段来销毁它们吗？我不会想到任何东西仍然持有对他们的引用。有什么方法可以访问这些旧的 fooFrames 吗？假设我想在十个 fooFrames 中的第四个上更改 JPanel 上的文本颜色。有什么办法可以做到这一点？

我知道这是一种非常愚蠢的做事方式，只需创建一个 JInternalFrame 实例变量（可能是一个数组）即可在方法中实例化并添加到 JDesktopPane 中，这很简单。我的问题更多是出于好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:28:33.140

> 这些旧的 fooFrame 变量会发生什么？垃圾收集器会在任何阶段来销毁它们吗？

您的对象`desktop`持有对`fooFrame`方法中创建的引用，它们中的每一个都将具有不同的引用，并将由`desktop`. 一旦`desktop`超出范围，他们将有资格进行垃圾收集。通常方法变量在控制离开方法后有资格进行垃圾收集，因为它们在方法范围内维护，但在您的情况下，您拥有`desktop`在类级别维护的。

# android - 如何在android的sqlite db中检查值已经存在或不存在？

> ID：16207791
> 
> 赞同：0
> 
> 时间：2013-04-25T06:24:17.547
> 
> 标签：android, android-sqlite

在我的应用程序中，我将账单号保存在 SQLite 数据库中。在我添加新的账单号之前，如何检查数据库中是否存在账单号。

我的主要课程代码是，

```
 String bill_no_excist_or_not = db.billno_exist_or_not(""+et_bill_number.getText().toString());
 Log.v("Bill No", ""+bill_no_excist_or_not); 
```

我的数据库代码，

```
String billno_exist_or_not(String bill_number){

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.query(TABLE_BILL_DETAILS, new String[] { KEY_BILL_NUMBER }, KEY_BILL_NUMBER + "=?"
                    + new String[] { bill_number }, null, null, null, null);

//after this i don't know how to return the values

    return bill_number;
} 
```

我不知道如何检查数据库中已经可用或不可用的值。谁能知道请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:28:14.443

这是帮助您查找值是否在数据库中可用的功能。

在这里，请用我的查询替换您的查询..

```
public int isUserAvailable(int userId)
    {
        int number = 0;
        Cursor c = null;
        try
        {
            c = db.rawQuery("select user_id from user_table where user_id = ?", new String[] {String.valueOf(userId)});

            if(c.getCount() != 0)
                number = c.getCount();
        }
        catch(Exception e) {
            e.printStackTrace();
        } finally {
            if(c!=null) c.close();
        }
        return number;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:30:20.570

`KEY_BILL_NUMBER`在表格中创建列，您`UNIQUE`可以使用`insertWithOnConflict`标志插入`SQLiteDatabase.CONFLICT_IGNORE`

# php - 如何使用 PHp 将 sql 结果集数据转换为 XML 格式

> ID：16207796
> 
> 赞同：0
> 
> 时间：2013-04-25T06:24:55.030
> 
> 标签：php, xml, xml-parsing, xsd

```
<?php 
include 'dbcon.php';

$sql    ="select * from users";
$result = $adb->query($sql);

while ($row=$adb->fetch_array($result))
{
} 
```

我想使用 PHP 以 XML 格式存储结果集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:33:33.037

假设您的用户表有 2 个字段 - fname 和 lname。这是从您的数据库查询创建 xml 文件的基本方法。

```
<?php 
include 'dbcon.php';
$sql="select * from users";
$result = $adb->query($sql);
 $xml .= "<users>";
while($row=$adb->fetch_array($result))
{
    $xml .= "<fname>".$row['fname']."</fname>"; 
    $xml .= "<lname>".$row['lname']."</lname>";
}
$xml .= "</users>";

$sxe = new SimpleXMLElement($xml);
$sxe->asXML("test.xml");
?> 
```

# hadoop - hadoop中的多个映射器

> ID：16207799
> 
> 赞同：4
> 
> 时间：2013-04-25T06:25:02.273
> 
> 标签：hadoop

我正在尝试使用一项作业在 hadoop 程序中的同一输入文件上运行 2 个独立的映射器。我希望两个映射器的输出都进入一个减速器。我面临运行多个映射器的问题。我正在使用 MultipleInputs 类。它通过运行两个映射器工作正常，但昨天我注意到它只运行一个映射函数，即第二个 MultipleInputs 语句似乎覆盖了第一个。我没有发现对代码进行任何更改以突然显示这种不同的行为:(请帮助我。主要功能是：

```
 public static void main(String[] args) throws Exception {
            Configuration conf = new Configuration();
            Job job = new Job(conf, "mapper accepting whole file at once");          
            job.setOutputKeyClass(IntWritable.class);
            job.setOutputValueClass(IntWritable.class);
            job.setJarByClass(TestMultipleInputs.class);
            job.setMapperClass(Map2.class);    
            job.setMapperClass(Map1.class);  
            job.setReducerClass(Reduce.class);  
            job.setInputFormatClass(NLinesInputFormat.class);
            job.setOutputFormatClass(TextOutputFormat.class);
            job.setMapOutputKeyClass(IntWritable.class);
**  MultipleInputs.addInputPath(job, new Path("Rec"), NLinesInputFormat.class, Map1.class);
    MultipleInputs.addInputPath(job, new Path("Rec"), NLinesInputFormat.class, Map2.class);**    
            FileOutputFormat.setOutputPath(job,new Path("testMulinput"));
              job.waitForCompletion(true);
} 
```

最后一个 MultipleInputs 语句中使用的 Map 类都会被执行。就像在这里 Map2.class 被执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:25:06.950

您将无法使用两个单独`Mapper`的 s 同时从同一个文件中读取（至少在没有一些您应该避免的可怕的 hack-ish 诡计）。

无论如何，你不能`Mapper`为同一个工作设置两个类——后者的调用`setMapperClass(class)`总是会覆盖前者。如果您需要`Mapper`同时运行两个 s，则需要创建两个单独的作业，并确保集群上有足够的映射器可以同时运行它们（如果在第一个作业开始第二个作业后没有可用的映射器）作业必须等待它完成，顺序运行而不是同时运行。）

但是，由于无法保证`Mapper`s 将同时运行，请确保 MapReduce 作业的功能不依赖于它们的并发执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T13:16:17.233

两个映射器不能同时读取同一个文件。

解决方案（解决方法）：创建输入文件的副本（在这种情况下，让重复的 rec 文件为 rec1）。然后用rec 输入mapper1，用rec1 输入mapper2。

两个映射器都是并行执行的，因此您不必担心减速器的输出，因为两个映射器的输出都将被打乱，以便两个文件中的相同键进入同一个减速器。

所以输出就是你想要的。

希望这对面临类似问题的其他人有所帮助。

# ios - 在 IOS 5 中，我们如何从我们的应用程序登录到 Twitter？

> ID：16207801
> 
> 赞同：0
> 
> 时间：2013-04-25T06:25:04.837
> 
> 标签：ios, objective-c, frameworks, twitter

我找到的所有教程都解释了如何在用户无法发推文时发推文并显示警告消息。

如果用户还没有登录到推特，我想帮助用户登录到推特怎么办。

基本上，我们希望允许用户通过 facebook 和 twitter 注册我们的服务。我们已经照顾好脸书了。现在我们需要为 twitter 这样做。

这是我找到的教程示例 [http://www.raywenderlich.com/5519/beginning-twitter-in-ios-5](http://www.raywenderlich.com/5519/beginning-twitter-in-ios-5)

我不想发推文。我只想先登录，这样我就可以将用户的 twitter id 存储在我的数据库中，以便保存书签等。

我看到的只是[https://dev.twitter.com/docs/ios](https://dev.twitter.com/docs/ios)。目前尚不清楚我们是否必须手动计算 sig，是否必须打开 safari 或什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:12:01.310

如果您希望您的用户使用他们的 Twitter 帐户登录，您必须在 Twitter 上注册您的应用程序以获取用于签署您的请求的密钥。[您可以在Twitter 开发者页面](http://dev.twitter.com/pages/xauth)上阅读更多相关信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:28:37.413

您是否浏览过有关 twitter 与 ios 集成的[api 文档？](https://dev.twitter.com/docs/ios)

这是一个[类似的问题](https://stackoverflow.com/questions/3751239/iphone-how-to-create-twitter-oauth-custom-login-in-our-application?rq=1)。可能会对您有所帮助

# objective-c - 如何使 Xcode 在用户定义的方法下方显示注释？

> ID：16207803
> 
> 赞同：1
> 
> 时间：2013-04-25T06:25:19.737
> 
> 标签：objective-c, xcode, autocomplete, comments

如果我们从 Apple API 键入一个方法，Xcode 将在自动完成弹出列表下方显示方法函数。但是键入用户定义的方法，它什么也没显示。

有没有办法告诉 Xcode 显示一些我自己定义的描述来展示如何使用用户定义的方法？

谢谢！！！

* * *

@有：

我按照你的指示直到第 12 步，并在 .h 文件中创建一个简单的测试类，如下所示：

```
#import <Foundation/Foundation.h>

@interface AMCAppleDocTest : NSObject
@property (nonatomic, retain) NSString *version;
+ (id) test;
/** @name Section title */
/** Method description */
- (void)doSomething;
@end 
```

然后到第 13 步，我运行脚本，但出现如下图所示的错误：

[![](https://i.stack.imgur.com/Qazed.png)](https://i.stack.imgur.com/Qazed.png)

我的 .sh 脚本：

```
#! /bin/sh
docsURL="http://www.AMC.com";
projectsPath="$2/../";
docsPath="/Users/AMC/Library/Developer/Documentations/$1";

# create AppleDocOutput folder if not exists
if [ ! -d $docsPath ];
then
mkdir "${docsPath}";
fi

/Users/AMC/Library/Developer/DocumentationStuff/appledoc \
--project-name "$1" \
--project-company "AMC" \
--company-id "com.AMC" \
--docset-atom-filename "$1.atom" \
--docset-feed-url "${docsURL}/%DOCSETATOMFILENAME" \
--output "/Users/AMC/Library/Developer/Documentations/$1" \
--docset-package-url "${docsURL}/%DOCSETPACKAGEFILENAME" \
--docset-fallback-url "${docsURL}/$1Doc/" \
--publish-docset \
--logformat xcode \
--keep-undocumented-objects \
--keep-undocumented-members \
--keep-intermediate-files \
--no-repeat-first-par \
--no-warn-invalid-crossref \
--ignore "*.m" \
--ignore "LoadableCategory.h" \
--index-desc "$2/readme.markdown" \
"$2" > "${docsPath}/AppleDoc.log" 
```

和 .command 文件：

```
#!/usr/bin/osascript

tell application "Xcode"
    tell first project
        -- variables to export
        set projectName to (get name)
        set projectDir to (get project directory)
        set company to (get organization name)
        -- invoke script passing extracted variables
        do shell script ("sh /Users/AMC/Library/Developer/DocumentationStuff/appledoc.generate.sh " & projectName & " " & projectDir & " " & company)
    end tell
end tell 
```

此外，我的 Xcode 版本是 4.5.1 和 OS X 10.8。

Xcode 没有安装到 /Applications 文件夹中，而只是放在桌面上。有关系吗？

* * *

@HAS，再次

我发现出了什么问题：脚本是 dos 格式的。我在 VI 中使用*:set ff=unix*解决了这个问题。现在一切都很完美：

[![](https://i.stack.imgur.com/3Lone.png)](https://i.stack.imgur.com/3Lone.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:40:18.917

在我的旧答案中，我建议[使用 appledoc](http://gentlebytes.com/appledoc/)（顺便说一句，这太棒了），但是对于您想要的，使用 Xcode 5 使用它的内置文档功能要容易得多（对于旧答案，请查看编辑历史记录）。

假设您有一个方法，例如：

```
- (NSString *)fooBar:(NSNumber *)foo bar:(NSArray *)bar {
    return @"FooBar!";
} 
```

您需要添加的只是

```
/**
 *  This is a demo method
 *
 *  @param foo An NSNumber.
 *  @param bar An NSArray.
 *
 *  @return Returns the NSString "FooBar!"
 */
- (NSString *)fooBar:(NSNumber *)foo bar:(NSArray *)bar {
    return @"FooBar!";
} 
```

键入方法时，您可以在弹出框底部看到信息

![代码完成信息](https://i.stack.imgur.com/qWE5S.png)

如果您`alt`-单击该方法，您将获得所有信息：

![通过 alt 键单击方法文档](https://i.stack.imgur.com/oJPtf.png)

如果你很懒（像我一样），可以看看名为[VVDocumenter](https://github.com/onevcat/VVDocumenter-Xcode)的精彩插件。使用该插件所要做的就是`///`在方法上方输入，它会自动为您生成文档结构。

只需下载、编译、复制并开始记录！感谢 onevcat 提供了这么棒的工具！

# ios - 如何从6点而不是3点绘制起始度数

> ID：16207807
> 
> 赞同：1
> 
> 时间：2013-04-25T06:25:25.567
> 
> 标签：ios, core-graphics

我从这个[例子中提到](http://www.thinkandbuild.it/how-to-build-a-custom-control-in-ios/)

我想从 6 点而不是 3 点画线

```
//Create the path
CGContextAddArc(ctx, self.frame.size.width/2, self.frame.size.height/2, radius, 0, M_PI *2, 0);

//Set the stroke color to black

[[UIColor colorWithRed:241.0/255.0 green:90.0/255.0 blue:36.0/255.0 alpha:1.0]setStroke];

//Define line width and cap
CGContextSetLineWidth(ctx, TB_BACKGROUND_WIDTH);
CGContextSetLineCap(ctx, kCGLineCapButt);

//draw it!
//CGContextDrawPath(ctx, kCGPathFill);
CGContextDrawPath(ctx, kCGPathStroke); 
```

目前 ![在此处输入图像描述](https://i.stack.imgur.com/G4FOx.png)

需要像这样从 6 点钟而不是 3 点钟开始绘制 ![在此处输入图像描述](https://i.stack.imgur.com/ThWFQ.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:11:24.877

对于`CGContextAddArc()`，方法签名如下：

```
void CGContextAddArc (
   CGContextRef c,
   CGFloat x,
   CGFloat y,
   CGFloat radius,
   CGFloat startAngle,
   CGFloat endAngle,
   int clockwise
); 
```

将起始位置从6点修改为3点，即设置`startAngle`为-90度，即：

```
angle in degree = angle in radian x 180 / M_PI 
```

IE

```
-90 = radian x 180 / M_PI
radian = -90 x M_PI / 180
radian = -M_PI / 2 
```

修改第一行如下：

```
CGContextAddArc(ctx, self.frame.size.width/2, self.frame.size.height/2, radius, -M_PI/2, ToRad(270), 0); 
```

*注意：最终路径的实际方向取决于图形上下文的当前变换矩阵。*

# java - 使用 javamail 使用 Swing 查看电子邮件

> ID：16207815
> 
> 赞同：0
> 
> 时间：2013-04-25T06:25:51.927
> 
> 标签：java, jakarta-mail, activation

我正在使用 javamail 编写邮件客户端。我按照 javamail-samples 文件夹中的示例进行操作，但对于检索到的所有邮件，CommandInfo 都为空。作为一种调试方式，我编写了以下代码：

```
 Session session = Session.getDefaultInstance(props,null);

    //get store object
    Store store = session.getStore("imaps");

    store.connect("imap.gmail.com", "email", "password");

    System.out.println(store);

    //create folder
    Folder inbox = store.getFolder("INBOX");

    inbox.open(Folder.READ_ONLY);

    Message [] messages = inbox.getMessages();

    for(Message message: messages){            

        //message.
       DataHandler d = message.getDataHandler();

       CommandInfo in = d.getCommand("view");
       System.out.println(in);                
    } 
```

结果：

```
null
null
null
null
null
null
null
....
.... 
```

任何人都知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T19:02:54.687

它正在寻找 simple.mailcap 文件？通常它应该在您运行程序的目录中。请注意，该程序仅包含少数观众。您是否尝试查看简单的纯文本消息？

# python - 如何在python 3中以相反的顺序将输入文件中的行写入输出文件

> ID：16207820
> 
> 赞同：1
> 
> 时间：2013-04-25T06:26:05.023
> 
> 标签：python, python-3.x, readlines

我想要做的是从一个文本文档中取出一系列行，然后在一秒钟内将它们反转。例如文本文档 a 包含：

```
hi
there
people 
```

因此，我想将这些相同的行写入文本文档 b，除了这样：

```
people
there
hi 
```

到目前为止，我有：

```
def write_matching_lines(input_filename, output_filename):
    infile = open(input_filename)
    lines = infile.readlines()
    outfile = open(output_filename, 'w')
    for line in reversed(lines):
            outfile.write(line.rstrip())
    infile.close()
    outfile.close() 
```

但这只会返回：

```
peopletherehi 
```

在一行中。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:41:20.380

您只需要`+ '\n'`因为`.write`不会为您执行此操作，或者您可以使用

```
print >>f, line.rstrip() 
```

等效地在 Python 3 中：

```
print(line.rstrip(), file=f) 
```

这将为您添加一个新行。或者做这样的事情：

```
>>> with open('text.txt') as fin, open('out.txt', 'w') as fout:
        fout.writelines(reversed([line.rstrip() + '\n' for line in fin])) 
```

此代码假定您不知道最后一行是否有换行符，如果您知道，**您**可以使用

```
fout.writelines(reversed(fin.readlines())) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T06:52:04.257

一行会做：

```
open("out", "wb").writelines(reversed(open("in").readlines())) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T06:36:38.293

为什么你在写之前 rstrip() 你的行？在编写时，您将在每行末尾剥离换行符。然后你注意到你没有任何换行符。只需删除您写入的 rstrip() 即可。

少即是多。

*更新*

如果我不能证明/验证最后一行有一个终止换行符，我个人倾向于在前面弄乱它重要的一行。例如

```
....
outfile = open(output_filename, 'w')
lines[-1] = lines[-1].rstrip() + '\n' # make sure last line has a newline
for line in reversed(lines):
        outfile.write(line)
.... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T06:50:16.447

```
with open(your_filename) as h:
    print ''.join(reversed(h.readlines())) 
```

或者，如果您想将其写入其他流：

```
with open(your_filename_out, 'w') as h_out:
    with open(your_filename_in) as h_in:
        h_out.write(''.join(reversed(h_in.readlines())) 
```

# javascript - 如何在javascript中存储多选列表框的值

> ID：16207823
> 
> 赞同：-2
> 
> 时间：2013-04-25T06:26:24.977
> 
> 标签：javascript, listbox

我的 HTML 中有一个多选列表框。我想在javascript中获取列表框选定项的值

我的html代码：

```
<select id="schools" size="5" multiple="multiple">
<option value="352">Byskovskolen</option>
<option value="355">Heldagsskolen Specialtilbud</option>
<option value="372">Plejecenter Solbakken</option>
</select> 
```

我的Javascript代码：

```
function getData()
{
var allSchools = [];
 var s = document.getElementById("schools");
            alert("schools lenght  " + s.options.length);
            for (var i = 0; i < s.options.length; i++) {
                if (s.options[i].selected == true) {
                    var schoolid = s.options[i].value;
                    alert(s.options[i].value);
                        allSchools.push(schoolid);
                }
            }
} 
```

值可以通过警报框看到警报，但不会存储在变量中。

我怎样才能将它存储在变量中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:28:52.533

如果您注释/取消注释正确的行，它工作正常。尝试这个：

```
function getData() {
    var allSchools = [];
    var s = document.getElementById("schools");
    for (var i = 0; i < s.options.length; i++) {
        if (s.options[i].selected == true) {
            var schoolid = s.options[i].value;
            allSchools.push(schoolid);
        }
    }
    console.log(allSchools);
} 
```

**演示：http:** [//jsfiddle.net/4qYht/1/](http://jsfiddle.net/4qYht/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:44:35.757

您已经注释掉了主行，它将值存储在一个变量中。

`// var schoolid = s.options[i].value;`

除了你的代码的其余部分是完美的。

**这是更正后的代码：**

```
function getData()
 {
    var allSchools = [];
    var s = document.getElementById("schools");
    alert("schools lenght  " + s.options.length);
    for (var i = 0; i < s.options.length; i++) {
         if (s.options[i].selected == true) {
          //  var schoolid = s.options[i].value;
           alert(s.options[i].value);
           allSchools.push(schoolid);
         }
    }
  } 
```

快乐编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:34:09.883

取消注释一行 (var schoolid) 并为 allSchools 变量添加打印输出。

```
function getData()
{
var allSchools = [];
var s = document.getElementById("schools");
        alert("schools lenght  " + s.options.length);
        for (var i = 0; i < s.options.length; i++) {
            if (s.options[i].selected == true) {
                var schoolid = s.options[i].value;
                allSchools.push(schoolid);
            }
        }
console.log(allSchools);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T06:37:09.647

取消注释 schoolid 分配行

```
var schoolid = s.options[i].value;
allSchools.push(schoolid); 
```

或者

使用`allSchools.push(s.options[i].value);`而不是`allSchools.push(schoolid);`

# iphone - SBTableAlert 不起作用

> ID：16207824
> 
> 赞同：1
> 
> 时间：2013-04-25T06:26:32.440
> 
> 标签：iphone, ios, xcode4, automatic-ref-counting

首先，我刚刚开始 iPhone 开发。我正在尝试使 SBTableAlert 正常工作（请参阅[https://github.com/blommegard/SBTableAlert](https://github.com/blommegard/SBTableAlert)）

我的初始设置很简单：我有一个带有按钮的 UIViewController。在按下按钮时，我执行以下操作（根据 SBTableAlert 示例）：

```
- (IBAction)myBtn_Press
{
    SBTableAlert *alert;
    alert   = [[SBTableAlert alloc] initWithTitle:@"Apple Style" cancelButtonTitle:@"Cancel" messageFormat:nil];
    [alert.view setTag:2];
    [alert setStyle:SBTableAlertStyleApple];

    MySecondViewController *myWGVC = [[MySecondViewController alloc] init];

    [alert setDelegate:myWGVC];
    [alert setDataSource:myWGVC];

    [alert show];
} 
```

MySecondViewController 声明为：

```
@interface MySecondViewController : NSObject <SBTableAlertDelegate, SBTableAlertDataSource> 
```

这意味着它将充当表视图的委托。我还包括以下内容（从示例中粘贴）：

```
@implementation MySecondViewController

#pragma mark - SBTableAlertDataSource

- (UITableViewCell *)tableAlert:(SBTableAlert *)tableAlert cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell;

    if (tableAlert.view.tag == 0 || tableAlert.view.tag == 1) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];
    } else {
        // Note: SBTableAlertCell
        cell = [[SBTableAlertCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];
    }

    [cell.textLabel setText:[NSString stringWithFormat:@"Cell %d", indexPath.row]];

    return cell;
}

- (NSInteger)tableAlert:(SBTableAlert *)tableAlert numberOfRowsInSection:(NSInteger)section {
    if (tableAlert.type == SBTableAlertTypeSingleSelect)
        return 3;
    else
        return 10;
}

- (NSInteger)numberOfSectionsInTableAlert:(SBTableAlert *)tableAlert {
    if (tableAlert.view.tag == 3)
        return 2;
    else
        return 1;
}

- (NSString *)tableAlert:(SBTableAlert *)tableAlert titleForHeaderInSection:(NSInteger)section {
    if (tableAlert.view.tag == 3)
        return [NSString stringWithFormat:@"Section Header %d", section];
    else
        return nil;
}

#pragma mark - SBTableAlertDelegate

- (void)tableAlert:(SBTableAlert *)tableAlert didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if (tableAlert.type == SBTableAlertTypeMultipleSelct) {
    UITableViewCell *cell = [tableAlert.tableView cellForRowAtIndexPath:indexPath];
        if (cell.accessoryType == UITableViewCellAccessoryNone)
            [cell setAccessoryType:UITableViewCellAccessoryCheckmark];
        else
            [cell setAccessoryType:UITableViewCellAccessoryNone];

            [tableAlert.tableView deselectRowAtIndexPath:indexPath animated:NO];
    }
}

- (void)tableAlert:(SBTableAlert *)tableAlert didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    NSLog(@"Dismissed: %i", buttonIndex);
} 
```

我收到的错误消息是：

```
2013-04-25 00:13:35.389 MyTestProject[3386:c07] *** -[SBTableAlert tableView:cellForRowAtIndexPath:]: message sent to deallocated instance 0x682ed80 
```

但是我不知道如何跟踪或调试它。看来它可能与 ARC 有关，因为演示项目不使用它，但我无法确定如何解决这个问题。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:15:34.880

尝试`strong`在主 UIViewController 子类中为`alert`和`myWGVC`对象创建具有属性的属性。由于 ARC 在屏幕上显示警报之前，它们似乎已被解除分配，因为没有对警报的委托/数据源和警报本身的强引用。

# php - 致命错误：在 xxx/xxx/xxx/xxx 中允许的内存大小为 67108864 字节已用尽（尝试分配 39 字节）

> ID：16207825
> 
> 赞同：8
> 
> 时间：2013-04-25T06:26:32.680
> 
> 标签：php, drupal-7, fatal-error

我在godaddy 托管了一个drupal 网站。但现在有一天我正在与最奇怪的问题作斗争“致命错误：在 xxx/xxx/xxx/xxx 中允许的内存大小为 67108864 字节耗尽（试图分配 39 个字节）”。我正在用头撞墙来解决这个问题，但没有什么对我有用。它总是显示这个错误，无论我安装新模块，删除模块，清除缓存还是添加文章等，几乎在所有情况下它都显示允许内存大小耗尽错误。我还浏览了我的 php.ini 文件并更改了 memory_limit = 128M，但这个错误并不是我在 drupal 世界中的生活。请帮忙解决这个问题..

这是我的phpinfo：

![在此处输入图像描述](https://i.stack.imgur.com/4FmTk.png)

我已经将 php.ini 中的 memory_limit 从 64MB 增加到 128MB，但它没有反映在我的服务器中。当我去[https://www.ginfy.com.phpinfo.php](https://www.ginfy.com/phpinfo.php)时它仍然显示 64MB。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T06:36:50.830

您在 php.ini 文件中所做的更改尚未反映，因为分配的内存 67108864 字节为 64MB。

按照[Drupal 社区文档](http://drupal.org/node/207036)增加 PHP 内存限制。如果是共享主机，请要求主机提供商增加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:27:59.157

将此添加到您的 php 文件中

```
ini_set('set_memory_limit',-1); 
```

# java - 序列化变量的虚拟值

> ID：16207827
> 
> 赞同：1
> 
> 时间：2013-04-25T06:26:39.383
> 
> 标签：java, string, serialization, integer, transient

为什么在 Java 中为瞬态变量显示默认值为零？

它怎么知道值应该是`0`for`integer`和`null`for `String`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:28:28.110

它知道这一点，因为它是[这样指定的](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。默认值为`int`0，默认值为`String`null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:32:33.130

来自[**文档**](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

> 声明字段时并不总是需要赋值。已声明但未初始化的字段将由编译器设置为合理的默认值。一般来说，此默认值将为零或空，具体取决于数据类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T10:53:37.620

> 它怎么知道整数的值应该是 0 而字符串的值应该是 null？

因为这是[Java 语言规范中定义的默认值](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T06:29:43.733

**int 的**默认值为0 ，**String 为 null**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T06:31:08.633

字段的默认值由 JLS 定义。使其瞬态*暗示*它不会被设置，因此具有默认值。

# python - python单播和多播套接字合二为一

> ID：16207834
> 
> 赞同：1
> 
> 时间：2013-04-25T06:27:22.347
> 
> 标签：python, python-2.7

我需要在同一个端口上监听 UDP 单播和多播消息 - 只允许打开 1 个套接字。有什么办法吗？我希望如此，因为像wireshark这样的捕获工具可以做到这一点。我可以为单播和多播分别创建监听服务器，但需要立即监听这些数据包。

# algorithm - 老师的算法

> ID：16207837
> 
> 赞同：4
> 
> 时间：2013-04-25T06:27:26.830
> 
> 标签：algorithm, math, combinatorics, discrete-mathematics

### 问题

我妈妈是老师。她最近要求我编写一个脚本，该脚本获取学生列表并生成学生对集。每个学生都应该与其他学生配对，并且没有学生与同一个学生一起工作超过一次。

例如，假设她有四个学生：`"Bob"`、`"Lisa"`和。该脚本应产生以下输出：`"Duke"``"Tyrone"`

```
{ { "Bob", "Lisa" }, { "Duke", "Tyrone" } }
{ { "Bob", "Duke" }, { "Lisa", "Tyrone" } }
{ { "Bob", "Tyrone" }, { "Lisa", "Duke" } } 
```

### 天真的尝试

我认为这将是一个简单的项目，但我意识到在编写一个有效的算法来生成列表的过程中，我意识到这有点超出我的能力。最初，我用 Ruby 编写了这个简单的实现：

```
# the list of students
CLASS_LIST = ("A".."H").to_a

# add an extra element to the class list if the class list length is odd
CLASS_LIST << nil if CLASS_LIST.length.odd?

# determine all possible permutations of the class lists
permutations = CLASS_LIST.permutation

# convert all of the permutations into pairs
permutations = permutations.map { |permutation| permutation.each_slice(2).to_a }

puts "PERMUTATIONS LENGTH: " + permutations.length.to_s

# iterate through the permutations and remove all subsequent permutations that contain a matching
# pair
i = 0

while i < permutations.length

  # remove any subsequent permutations that contain pairs already in the current permutation
  permutations.delete_if do |permutation|

    # return true if the current permutation has any elements in common with the other permutation
    permutations.index(permutation) > i and permutations[i].any? do |p1| 
      permutation.any? do |p2| 
        (p1[0] == p2[0] and p1[1] == p2[1]) or (p1[0] == p2[1] and p1[1] == p2[0])
      end
    end
  end

  # increment i
  i += 1
end

permutations.each do |permutation|
  p permutation
end 
```

这种实现非常低效。当我分析它时，4 名学生用时 0.093 秒，6 名学生用时 0.376 秒，8 名学生用时 35 分 32 秒。另外，排列的总数是无法控制的。4 个学生有 24 个排列，6 个有 720，8 个有 40320。

渐近地，`while`循环在 O(n!) 中`delete_if`运行，循环在 O(n!) 中运行，`permutations.index`and`permutations.any?`循环在 O(n!) 中`permutation.any?`运行，内部循环在 O(n) 时间内运行，这意味着**整个算法运行在 O(n(n!)^3)!** 显然，这个解决方案是行不通的。

### 更好的方法

我很早就意识到我不需要遍历所有可能的配对。由于每个学生只与其他学生一起工作一次，因此合并结果集应该产生每个唯一的可能对。我决定从生成这个集合开始。首先，我查看了所有可能的组合。

```
 A    B    C    D    E    F
A  A,A  A,B  A,C  A,D  A,E  A,F
B  B,A  B,B  B,C  B,D  B,E  B,F
C  C,A  C,B  C,C  C,D  C,E  C,F
D  D,A  D,B  D,C  D,D  D,E  D,F
E  E,A  E,B  E,C  E,D  E,E  E,F
F  F,A  F,B  F,C  F,D  F,E  F,F 
```

然后我删除了学生们正在与自己一起工作的配对。

```
 A    B    C    D    E    F
A       A,B  A,C  A,D  A,E  A,F
B  B,A       B,C  B,D  B,E  B,F
C  C,A  C,B       C,D  C,E  C,F
D  D,A  D,B  D,C       D,E  D,F
E  E,A  E,B  E,C  E,D       E,F
F  F,A  F,B  F,C  F,D  F,E 
```

最后，我删除了重复的对。

```
 A    B    C    D    E    F
A       A,B  A,C  A,D  A,E  A,F
B            B,C  B,D  B,E  B,F
C                 C,D  C,E  C,F
D                      D,E  D,F
E                           E,F
F 
```

在 Ruby 中生成对相当简单。

```
# generate the set of all possible pairs
UNIQUE_PAIRS = (0..(CLASS_LIST.length - 2)).to_a.map do |row|
  ((row + 1)..(CLASS_LIST.length - 1)).to_a.map do |column|
    [ row, column ]
  end
end.flatten(1) 
```

接下来，我试图弄清楚如何将这些独特的配对转化为我正在寻找的结果集。我的想法是为每个列表创建一组所有可能的对，然后消除无法使用的对，因为对被添加到每个列表中。在我的第一次尝试中，我尝试在开始下一个列表之前填写每个列表：

```
STEP 0:

LIST 1: { }
LIST 2: { }
LIST 3: { }
LIST 4: { }
LIST 5: { }

AVAILABLE 1: { { A, B }, { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 2: { { A, B }, { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 3: { { A, B }, { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 4: { { A, B }, { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 5: { { A, B }, { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }

STEP 1:

LIST 1: { { A, B } }
LIST 2: { }
LIST 3: { }
LIST 4: { }
LIST 5: { }

AVAILABLE 1: { { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 2: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 3: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 4: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 5: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }

STEP 2:

LIST 1: { { A, B }, { C, D } }
LIST 2: { }
LIST 3: { }
LIST 4: { }
LIST 5: { }

AVAILABLE 1: { { E, F } }
AVAILABLE 2: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 3: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 4: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 5: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }

STEP 3:

LIST 1: { { A, B }, { C, D }, { E, F } }
LIST 2: { }
LIST 3: { }
LIST 4: { }
LIST 5: { }

AVAILABLE 1: { }
AVAILABLE 2: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, E }, { C, F }, { D, E }, { D, F } }
AVAILABLE 3: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, E }, { C, F }, { D, E }, { D, F } }
AVAILABLE 4: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, E }, { C, F }, { D, E }, { D, F } }
AVAILABLE 5: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, E }, { C, F }, { D, E }, { D, F } }

STEP 4:

LIST 1: { { A, B }, { C, D }, { E, F } }
LIST 2: { { A, C } }
LIST 3: { }
LIST 4: { }
LIST 5: { }

AVAILABLE 1: { }
AVAILABLE 2: { { B, D }, { B, E }, { B, F }, { D, E }, { D, F } }
AVAILABLE 3: { { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, E }, { C, F }, { D, E }, { D, F } }
AVAILABLE 4: { { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, E }, { C, F }, { D, E }, { D, F } }
AVAILABLE 5: { { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, E }, { C, F }, { D, E }, { D, F } }

STEP 5:

LIST 1: { { A, B }, { C, D }, { E, F } }
LIST 2: { { A, C }, { B, D } }
LIST 3: { }
LIST 4: { }
LIST 5: { }

AVAILABLE 1: { }
AVAILABLE 2: { }
AVAILABLE 3: { { A, D }, { A, E }, { A, F }, { B, C }, { B, E }, { B, F }, { C, E }, { C, F }, { D, E }, { D, F } }
AVAILABLE 4: { { A, D }, { A, E }, { A, F }, { B, C }, { B, E }, { B, F }, { C, E }, { C, F }, { D, E }, { D, F } }
AVAILABLE 5: { { A, D }, { A, E }, { A, F }, { B, C }, { B, E }, { B, F }, { C, E }, { C, F }, { D, E }, { D, F } } 
```

这在第 6 步失败，因为没有可用的配对。接下来我尝试在另一个方向运行算法：

```
STEP 1:

LIST 1: { { A, B } }
LIST 2: { }
LIST 3: { }
LIST 4: { }
LIST 5: { }

AVAILABLE 1: { { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 2: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 3: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 4: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 5: { { A, C }, { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }

STEP 2:

LIST 1: { { A, B } }
LIST 2: { { A, C } }
LIST 3: { }
LIST 4: { }
LIST 5: { }

AVAILABLE 1: { { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 2: { { B, D }, { B, E }, { B, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 3: { { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 4: { { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 5: { { A, D }, { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }

STEP 3:

LIST 1: { { A, B } }
LIST 2: { { A, C } }
LIST 3: { { A, D } }
LIST 4: { }
LIST 5: { }

AVAILABLE 1: { { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 2: { { B, D }, { B, E }, { B, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 3: { { B, C }, { B, E }, { B, F }, { C, E }, { C, F }, { E, F } }
AVAILABLE 4: { { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 5: { { A, E }, { A, F }, { B, C }, { B, D }, { B, E }, { B, F }, { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }

STEP 4:

LIST 1: { { A, B } }
LIST 2: { { A, C } }
LIST 3: { { A, D } }
LIST 4: { { A, E } }
LIST 5: { { A, F } }

AVAILABLE 1: { { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 2: { { B, D }, { B, E }, { B, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 3: { { B, C }, { B, E }, { B, F }, { C, E }, { C, F }, { E, F } }
AVAILABLE 4: { { B, C }, { B, D }, { B, F }, { C, D }, { C, F }, { D, F } }
AVAILABLE 5: { { B, C }, { B, D }, { B, E }, { C, D }, { C, E }, { D, E } }

STEP 5:

LIST 1: { { A, B } }
LIST 2: { { A, C } }
LIST 3: { { A, D } }
LIST 4: { { A, E } }
LIST 5: { { A, F } }

AVAILABLE 1: { { C, D }, { C, E }, { C, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 2: { { B, D }, { B, E }, { B, F }, { D, E }, { D, F }, { E, F } }
AVAILABLE 3: { { B, C }, { B, E }, { B, F }, { C, E }, { C, F }, { E, F } }
AVAILABLE 4: { { B, C }, { B, D }, { B, F }, { C, D }, { C, F }, { D, F } }
AVAILABLE 5: { { B, C }, { B, D }, { B, E }, { C, D }, { C, E }, { D, E } }

STEP 6:

LIST 1: { { A, B }, { C, D } }
LIST 2: { { A, C }, { B, D } }
LIST 3: { { A, D } }
LIST 4: { { A, E } }
LIST 5: { { A, F } }

AVAILABLE 1: { { E, F } }
AVAILABLE 2: { { E, F } }
AVAILABLE 3: { { B, C }, { B, E }, { B, F }, { C, E }, { C, F }, { E, F } }
AVAILABLE 4: { { B, C }, { B, D }, { B, F }, { C, F }, { D, F } }
AVAILABLE 5: { { B, C }, { B, D }, { B, E }, { C, E }, { D, E } } 
```

在第 6 步之后，很明显该算法将失败。

### 下一步是什么？

显然我在这里缺少一些数学原理。这样做的正确方法是什么？我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T07:33:30.363

循环遍历所有对的经典算法是这样的：

1.  让每个人成对排队（这里，成对是 1-5、2-6 等）：

    1 2 3 4

    5 6 7 8

2.  为了进行下一个配对，让第 1 个人静止不动，其他人向右旋转一个位置：

    1 3 4 8

    2 5 6 7

重复第 2 步，直到您用完新的配对或需要它们，无论先发生什么。

这一切的美妙之处在于它是如此简单，你可以在物理课上正确地做到这一点。当然，也可以使用卡片或其他代币。

# windows - 在哪里获得 gtk-sharp3 的 Windows 二进制文件

> ID：16207840
> 
> 赞同：2
> 
> 时间：2013-04-25T06:27:39.223
> 
> 标签：windows, gtk#

[与关于 GTK+ 3 for Windows](https://stackoverflow.com/questions/6006689/where-can-i-download-precompiled-gtk-3-binaries-or-windows-installer)的这个问题类似，是否有任何地方为 Windows 提供编译的 GTK# 绑定？我搜索了一段时间，找不到任何官方版本（这是有道理的，因为也没有适用于 Windows 的官方 GTK3 版本），而且 Banshee 和 Xamarin 都没有附带 GTK(#)-3。

我也不确定[这些在 Windows 上编译 GTK# 2 的说明](http://www.mono-project.com/Compiling_GtkSharp)是否仍然有效，但该页面并没有提供很多细节，所以我想它需要半天时间才能弄清楚它的工作原理.

我可以在其他任何地方找到适用于 Windows 的 GTK# 3 二进制文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-03T02:02:20.790

您可以从以下位置获取 GTK3 的 c# 绑定：

[https://github.com/mono/gtk-sharp/releases](https://github.com/mono/gtk-sharp/releases)

这包括一个 Windows 安装程序。

这些绑定是预发布版本，版本为 Gtk# 2.99.3

我的理解是，当它作为稳定版本发布时，该版本将更改为 3.0。

# jquery - 具有三个语句的 For 循环

> ID：16207842
> 
> 赞同：-3
> 
> 时间：2013-04-25T06:27:47.293
> 
> 标签：jquery, jquery-mobile

这可能吗？1 for 循环 3 语句？

```
 for(var i =0; i< aObj.length;i++)
(var a =0; a< bObj.length;a++)
(var b =0; b< cObj.length;b++){
         //sOME CODE HERE
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:30:29.793

不，这是无效的 javascript 语法。根据您的要求，您可以使用 3 个嵌套的 for 循环或使它们连续。

例如：

```
for(var i = 0; i < aObj.length; i++) {
    for(var a = 0; a < bObj.length; a++) {
        for(var b = 0; b < cObj.length; b++) {
            // some code here
        }
    }
} 
```

或者：

```
for(var i = 0; i < aObj.length; i++) {
    // some code here
}

for(var a = 0; a < bObj.length; a++) {
    // some code here
}

for(var b = 0; b < cObj.length; b++) {
    // some code here
} 
```

但是，这将再次取决于您需要对这些变量做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:31:27.917

我认为tat是不可能的更好的选择：

```
for(var i =0; i< aObj.length;i++){
  for(var a =0; a< bObj.length;a++){
   for(var b =0; b< cObj.length;b++){
   //sOME CODE HERE
   }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:46:29.247

this is my actual Code guys..Im getting the last items for Name,Code and Category not per items in array

```
var CodeObj=new Array(); var NameObj=new Array(); new aObj = new Array();
var CatObj=new Array(); var Codeindex= 0;
var Nameindex= 0; var Catindex= 0; aindex = 0; 

    $(req.responseText).find('Name').each(function(){ 
                             NameObj[Nameindex] = $(this).text();
                             Nameindex +=0;

                         for(var i =0; i< NameObj.length;i++){
                              $(this).append(NameObj[i]+"<br/>");
                           } //1st loop to get the Name

     }) 

    $(req.responseText).find('Code').each(function(){ 
                   CodeObj[Codeindex] = $(this).text();
                    Codeindex +=0;
                  for(var a =0; a< CodeObj.length;a++){
                        $(this).append(CodeObj[a]+"<br/>");

                  } //2nd loop to get the Code

     });

     $(req.responseText).find('Category').each(function(){ 
                          CatObj[Catindex] = $(this).text();
                          Catindex +=0;
                    for(var b =0; b< CatObj.length;b++){
                                $(this).append(CatObj[b]+"<br/>");

                    } //3rd loop to get the category
            });
   //codes to append in list view                            
       var $content = $('<li><a href="#"><img src="../../img/album-bb.jpg"><h3>Name: '+ NameObj[i] + '</h3><p>Code: '+ CodeObj[a] + '</p><p>Category: '+  CatObj[b] + '</p></a><a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Add to favorites</a></li>');                              
      $('#RecipeList').append($content).listview('refresh'); 
```

# android - 如何为 720x1280 的屏幕尺寸设计应用程序

> ID：16207846
> 
> 赞同：0
> 
> 时间：2013-04-25T06:28:10.153
> 
> 标签：android, android-layout

我正在开发一个 android 应用程序，其 minSdkVersion 为 11，targetSdkVersion 为 17。我正在为多种屏幕尺寸设计此应用程序。所以我把对所有屏幕的支持放在清单文件中。我希望这个应用程序支持所有密度。

我的 Manifest.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="17" />

    <supports-screens
                android:smallScreens="true"
            android:normalScreens="true"
            android:largeScreens= "true"
            android:xlargeScreens="true"
            android:anyDensity="true"/>

    <application
        android:debuggable="true"
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:name="CommApp" >

        <activity
            android:name="com.example.android.MainActivity"
            android:label="@string/app_name" 
            >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

          <activity android:name="First"
              android:screenOrientation="portrait"
              ></activity>

         <activity android:name="Second"
              android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
            ></activity>

    </application>

</manifest> 
```

我为所有屏幕尺寸创建了布局文件夹，如 res/layout-small、res/layout-normal、res/layout-large、res/layout-xlarge。我想在屏幕大小为 720x1280 的模拟器中运行此应用程序，为此我在 res/layout-xlarge 文件夹中创建了所有布局文件。但是在运行时它显示以下错误：

```
Invalid attribute value syntax for android:largescreens: = "true"
            android:xlargeScreens="true"
            android:anyDensity="true"/ 
```

我不知道出了什么问题？谁能告诉我解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:57:26.537

改变

```
android:largeScreens= "true" 
```

至

```
android:largeScreens="true" 
```

等号之间不应有空格。

# php - 用 php mysql ajax jquery 填充动态下拉列表

> ID：16207847
> 
> 赞同：0
> 
> 时间：2013-04-25T06:28:12.687
> 
> 标签：php, mysql, jquery

我需要创建三个动态下拉列表，第二个基于第一个的选择，第三个基于第二个的选择，但我遇到一个问题，即第二个和第三个显示默认值而没有任何选项可供选择另一个价值观

谁能帮我？？？

# 数据库配置文件

```
<?php
$host = "localhost";
$user = "****";
$password = "****";
$db = "lam_el_chamel_db";
?> 
```

# 选择.php

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript">
             $(document).ready(function(){
            $("select#district").attr("disabled","disabled");
            $("select#village").attr("disabled","disabled");
            $("select#governorate").change(function(){
            $("select#district").attr("disabled","disabled");
            $("select#district").html("<option>wait...</option>");
            var id = $("select#governorate option:selected").attr('value');
            $.post("select_district.php", {id:id}, function(data){
                $("select#district").removeAttr("disabled");
                $("select#district").html(data);
            });
        });
        $("select#district option:selected").change(function(){
         id = $(this).val(); 
         $.post("select_village.php", {id:id}, function(data){
         $("select#village").attr("disabled","disabled");
         $("select#village").html("<option>wait...</option>");

         $("select#village").removeAttr("disabled");
         $("select#village").html(data);
        });
        $("form#select_form").submit(function(){
            var cat = $("select#governorate option:selected").attr('value');
            var type = $("select#district option:selected").attr('value');
            var vil = $("select#village option:selected").attr('value');
            if(cat>0 && type>0 && vil>0)
            {
                var result = $("select#district option:selected").html();
                $("#result").html('your choice: '+result);
            }
            else
            {
                $("#result").html("you must choose two options!");
            }
            return false;
        });
    });
        </script>
    </head>
    <body>
    <?php include "select.class.php"; ?>
        <form id="select_form">
            Choose a governorate:<br />
            <select id="governorate" name = 'governorate'>

            <?php echo $opt->ShowGovernorate(); ?>

            </select>
            <br /><br />

           choose a district:<br />
            <select id="district">
                <option value="0">choose...</option>
            </select>
            <br /><br />
             choose a village:<br />
            <select id="village">
                <option value="0">choose...</option>
            </select>
            <br /><br />
            <input type="submit" value="confirm" />
        </form>
        <div id="result"></div>
    </body>
</html> 
```

# 选择类.php

```
<?php 
 class SelectList
{
    protected $conn;

        public function __construct()

        {
           $this->DbConnect();
        }
    protected function DbConnect()
   {
    include "dbconfig.php";
    $this->conn = mysql_connect($host,$user,$password) OR die("Unable to connect to the database");
    mysql_select_db($db,$this->conn) OR die("can not select the database $db");
    return TRUE;
   }  

    public function ShowGovernorate()
    {
            $sql = "SELECT * FROM governorate";
            $res = mysql_query($sql,$this->conn);
            $governorate = '<option value="0">choose...</option>';
            while($row = mysql_fetch_array($res))
            {
                $governorate .= '<option value="' . $row['governorate_id'] . '">' . $row['governorate_name'] . '</option>';
            }
            return $governorate;

    }
    public function ShowDistrict()
   {
    $sql = "SELECT * FROM districts WHERE governorate_id=$_POST[id]";
    $res = mysql_query($sql,$this->conn);
    var_dump($res);
    $district = '<option value="0">choose...</option>';
       while($row = mysql_fetch_array($res))
      {
        $district .= '<option value="' . $row['district_id'] . '">' . $row['district_name'] . '</option>';
      }
    return $district;
   }

   public function ShowVillage()
   {
    $sql = "SELECT village_id, village_name FROM village WHERE district_id=$_POST[id]";
    $res = mysql_query($sql,$this->conn);
    $village = '<option value="0">choose...</option>';
       while($row = mysql_fetch_array($res))
       {
         $village .='<option value="' .$row['village_id'] . '">' . $row['village_name'] . '</option>';
       }
       return $village;
   }

}   
$opt = new SelectList(); 

?> 
```

# 选择区.php

```
<?php
include "select.class.php";
echo $opt->ShowDistrict();
?> 
```

# select_village.php

```
<?php
include "select.class.php";
echo $opt->ShowVillage();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:40:29.497

```
 $("select#district option:selected").change(function(){
     id = $(this).val(); 
     $.post("select_village.php", {id:id}, function(data){
     $("select#village").attr("disabled","disabled");
     $("select#village").html("<option>wait...</option>");

     $("select#village").removeAttr("disabled");
     $("select#village").html(data);
    }); 
```

尝试

```
$("select#district").change(function(){ 
id = $(this).val(); 
     $("select#village").attr("disabled","disabled");
     $("select#village").html("<option>wait...</option>");
     $.post("select_village.php", {id:id}, function(data){

     $("select#village").removeAttr("disabled");
     $("select#village").html(data);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:57:17.303

我在必须粘贴的代码中发现了两个错误。

1.  代码中缺少的东西：

    ```
     $("select#district option:selected").change(function(){
            id = $(this).val(); 
            $.post("select_village.php", {id:id}, function(data){
                $("select#village").attr("disabled","disabled");
                $("select#village").html("<option>wait...</option>");

                $("select#village").removeAttr("disabled");
                $("select#village").html(data);
            }); }); //You have missed this one 
    ```

2.  在上面的代码中，你添加了一些不好的东西改变这个：

    $("select#district option:selected").change(function(){

对此：

```
$("select#district").change(function(){ 
```

# java - Java 正则表达式匹配所有字符，除了

> ID：16207853
> 
> 赞同：13
> 
> 时间：2013-04-25T06:28:35.417
> 
> 标签：java, regex

匹配除特定字符之外的所有字符的正确语法是什么。

例如，我想匹配除字母`[A-Z] [a-z]`和数字之外的所有内容`[0-9]`。

我有

```
string.matches("[^[A-Z][a-z][0-9]]") 
```

这是不正确的吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-25T06:31:07.230

是的，你不需要`[]`像这样嵌套。改用这个：

```
"[^A-Za-z0-9]" 
```

这都是一个字符类。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T06:43:47.910

如果您想匹配除字母以外的任何内容，您应该查看[Unicode 属性](http://www.regular-expressions.info/unicode.html#prop)。

`\p{L}`是来自任何语言的任何类型的字母

使用大写的“P”代替它是否定的，所以`\P{L}`会匹配任何不是字母的东西。

`\d`或`\p{Nd}`匹配数字

所以你在现代 Unicode 风格中的表达应该是这样的

使用否定字符类

```
[^\p{L}\p{Nd}] 
```

或否定属性

```
[\P{L}\P{Nd}] 
```

接下来的事情是`matches()`将表达式与完整的字符串进行匹配，因此您的表达式只有在字符串中只有一个字符时才为真。所以你需要添加一个量词：

```
string.matches("[^\p{L}\p{Nd}]+") 
```

当完整的字符串只有非字母数字且至少有一个时，返回 true。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:31:51.420

几乎是对的。你想要的是：

```
string.matches("[^A-Za-z0-9]") 
```

这是一个很好的[教程](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T06:30:40.540

```
string.matches("[^A-Za-z0-9]") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-30T02:12:01.827

假设您要确保没有字符串中包含 _ 符号，那么您只需使用类似这样的东西。

```
 Pattern pattern = Pattern.compile("_");
    Matcher matcher = Pattern.matcher(stringName);
    if(!matcher.find()){
       System.out.println("Valid String");
    }else{
        System.out.println("Invalid String");
     } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-02T14:24:12.277

您可以[否定字符类](https://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html)：

```
"[^abc]"       // matches any character except a, b, or c (negation).
"[^a-zA-Z0-9]" // matches non-alphanumeric characters. 
```

# windows - 使用 C Shell 脚本确定 Microsoft Windows 的版本？

> ID：16207860
> 
> 赞同：0
> 
> 时间：2013-04-25T06:28:43.803
> 
> 标签：windows, shell

[我在这里](https://stackoverflow.com/questions/16189216/determine-version-of-microsoft-windows-using-perl)问了一个类似的问题，但那是使用 perl。现在我的老板告诉我必须使用 C Shell 脚本 (.csh)。我是初学者并试图从[这里](http://www-cs.canisius.edu/ONLINESTUFF/UNIX/shellprogramming.html)理解事物。所以我创建了这个脚本：

```
set OS_NAME = (Win32::GetOSVersion());
set major = $OS_NAME[1];
set minor = $OS_NAME[2];
set build = $OS_NAME[3];
set id = $OS_NAME[4];
echo $major;
echo $minor;
echo $build;
echo $id; 
```

这给了我输出：

```
Win32::GetOSVersion
(
)
#blank line 
```

如何让脚本工作？谢谢你。

**更新：**[在这里](https://www.shell-tips.com/2006/11/24/determine-which-windows-os-version-is-running/)找到了一些东西。根据现在不起作用的评论。那么对此有任何更新的答案吗？

**更新：在** [这里](http://ss64.org/viewtopic.php?id=803)找到解决方案。但它就像打印信息一样`echo`。如何将这些信息存储在变量中，以便我可以进行一些比较并完成我的工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T07:24:07.070

经过大量的头部撞击后找到了解决方案：

```
set Ver = `(wmic os get version)`;
echo $Ver; 
```

之前不知道 `` 运算符可以将输出捕获到变量中。即使是一个相同的答案/评论也会节省我很多时间。

希望有人回复，但尽管获得了 42 次观看，但没有人回答。社区非常失望和失望。:(

# android - 我的 Android 应用程序中的外部 Ms Access 数据库连接

> ID：16207862
> 
> 赞同：0
> 
> 时间：2013-04-25T06:28:56.257
> 
> 标签：android, database, ms-access

我正在开发一个应用程序，其中我使用外部 Ms Access 数据库（在 PC 上）作为我的 android 应用程序的数据库。我已经使用 PHP for Android 完成了 MySql 和 MSSql 的连接，但我想知道如何继续使用 MS Access 数据库。

欢迎任何教程或片段！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T06:40:32.370

1）在Android端做一个这样的功能：

```
public void connect_access_php(String vars)
{
    List<NameValuePair> itemstring = new ArrayList<NameValuePair>();
    itemstring.add(new BasicNameValuePair("VARIABLE", vars));
    HttpClient httpclient = new DefaultHttpClient();
    HttpConnectionParams.setConnectionTimeout(httpclient.getParams(), 10000); //Timeout Limit

    try
    {
        HttpPost httppost = new HttpPost("url_of_php_file");
        httppost.setEntity(new UrlEncodedFormEntity(itemstring));
        HttpResponse response = httpclient.execute(httppost);
        InputStream content = response.getEntity().getContent();
        BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
        String s;
        while ((s = buffer.readLine()) != null) {

            //Handle your Values here

        }

     }catch (Exception e) {
        Toast.makeText(getApplicationContext(),"Connection Problem !", Toast.LENGTH_SHORT).show();
        e.printStackTrace();
     }
} 
```

2）然后在php页面上，与access文件进行连接如下：

```
<?php
$variab = $_REQUEST['VARIABLE'];
$conn = new COM("ADODB.Connection") or die("Oops!");
$conn->Open("DRIVER={Microsoft Access Driver (*.mdb)};DBQ=C:\Documents and Settings\xxxx\Desktop\access_file.mdb");
$query = "SELECT * FROM table WHERE (Variable = '".$variab."')";
$data = $conn->Execute($query);

while (!$data->EOF)
{
    echo $data ->Fields[0]->value . ":";
    //echo $data ->Fields[1]->value . " \n";

    $data ->MoveNext();
}
?> 
```

使用此示例，您可以将变量传递给 php 脚本，从而访问 CRUD 函数的文件。

祝你好运！！

# assembly - 奇怪的 GAS ARM 语法

> ID：16207865
> 
> 赞同：1
> 
> 时间：2013-04-25T06:29:04.690
> 
> 标签：assembly, arm, gnu-assembler

当我反汇编我的 arm elf .so 文件时，我看到了以下代码：

```
 170c:  e28fc600    add ip, pc, #0, 12 
```

我只知道这是一条ARM“添加”指令。但从 ARM 参考手册中，“add”的语法如下：

```
op{S}{cond} {Rd}, Rn, Operand2

op{cond} {Rd}, Rn, #imm12               ; Thumb-2 ADD and SUB only 
```

和 Operand2 是：

```
 #constant
  Rm {, shift} 
```

这行 asm 应该归结为语法：

```
 op Rd, Rn, #constant 
```

因此，代码应该意味着“将 pc 和 #0 添加到 ip”

那么问题来了：

1.  那么代码的最后一部分“，12”呢？
2.  您在哪里找到这些信息，GAS 手册或 ARM 手册？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:23:31.193

这可能是代码的一部分，将在链接时更改。

编码中的 12 表示立即数将右旋转 12 位。显然，目前对于#0 来说没有意义。此外，整个操作码目前只不过是一种幻想

```
mov ip, pc 
```

在运行时查看代码，可能 #0 更改为更有意义的内容。

数字从不说谎。

           `e28fc600`

**小食**

1.  `e`总是
2.  `28`添加没有设置条件代码的立即数。
3.  `f` *Rb*是`pc`或`R15`。
4.  `c` *Rd*是`ip`或`R12`。
5.  `600`是移位器操作或*零旋转* **6*2**。

由于指令比较*奇怪*，反汇编的输出可能不正常；通常只显示常量*#0xef00*，因为没有人关心它是如何编码的。此外，由于这是一个*共享库*，因此可以在运行时通过重定位来修复指令。

# eclipse - 如何在 Eclipse 的首选项窗口中增加导航窗格的大小

> ID：16207866
> 
> 赞同：1
> 
> 时间：2013-04-25T06:29:09.643
> 
> 标签：eclipse

我想在首选项窗口（白色背景）中增加左侧导航窗格的大小，以便它完全显示我的工具的首选项。

截至目前，它的一部分是隐藏的（全名是 mytoolpreference 但只有 mytool 可见，而偏好词是隐藏的），我必须手动增加我不想要的导航窗格大小，所以请告诉我如何增加导航窗格的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:32:06.477

如果我们谈论的是 Eclipse 本身：那是不可能的，因为对话框不是扩展点的一部分（有充分的理由）。

如果这是针对您自己的 RCP 应用程序：请随意子类化并覆盖首选项对话框。但是，不建议这样做，因为共享的 Eclipse UI 应该很少被修改（因此一个 Eclipse RCP 应用程序的用户在使用另一个 RCP 应用程序时仍然感觉像在家里一样）。

一般建议：尽可能避免强制执行 UI 大小。无论如何，操作系统及其窗口系统通常会“覆盖”您计划的大小。因此，例如，在 Windows 和 Ubuntu 下，打开该首选项对话框的结果可能会有很大差异。而是尝试缩短您的标签，该解决方案将在所有情况下都有效。

# ios - 根据 uitableview 单元格值调用函数

> ID：16207867
> 
> 赞同：1
> 
> 时间：2013-04-25T06:29:22.660
> 
> 标签：ios, xcode, uitableview

请帮忙。

**我有这个`tableview`。** 如果单击一个单元格，该函数将取决于该单元格的字符串值是什么。它必须是这样的：

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (cell is equal to "Dog") 
    [show puppies]
    else if (cell is equal to "Cat")
    [show puppies]
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:33:25.490

在我的头顶上：

使用默认的 UITableViewCell

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{      
        NSString *currentString = [tableView cellForRowAtIndexPath:indexPath].textLabel.text;

        if ([currentString isEqualToString:@"Dog"]){
            [show puppies]
        }else  if ([currentString isEqualToString:@"Cat"]){
            [show kittens]
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:33:00.483

您可以调用相同的函数并将字符串传递给函数内部，如果您有固定的情况，请尝试使用 switch

```
// your method

-(void)showAnimal:(NSString*)animal
{
//here goes your conditional code
} 
```

使用您认为会被优化的任何条件结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:36:15.903

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     UITableViewCell *cell = [self tableView:tableView cellForRowAtIndexPath:indexPath];

    if ([cell.textLabel.text isEqualToString: @"Dog"]) 
        [self showPuppies];
    else if ([cell.textLabel.text isEqualToString: @"Cat"])
        [self showKittens];
}

-(void)showPuppies
{
  // Your code here
}

-(void)showKittens
{
  // Your code here
} 
```

# yii - 视图部分Controller介绍

> ID：16207869
> 
> 赞同：0
> 
> 时间：2013-04-25T06:29:26.230
> 
> 标签：yii, yii-components

Yii 的视图部分有自己的控件，我尝试寻找一个完整的教程来介绍这些控件但失败了。我发现这是部分介绍： [http ://www.yiiframework.com/wiki/143/htmloptions-explained-for-various-controls/](http://www.yiiframework.com/wiki/143/htmloptions-explained-for-various-controls/)

谁能给我一个好的参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:04:31.577

您应该从[http://www.larryullman.com/2009/11/15/basic-controller-edits-in-yii/](http://www.larryullman.com/2009/11/15/basic-controller-edits-in-yii/)开始， 这将使您了解控制器在 Yii 中的工作方式以及如何根据您的需要。基本上 Yii 对所有视图都有“动作”功能。让我们说如果你想为用户呈现注册页面，你必须在用户控制器中创建“actionRegister”，然后从中呈现注册视图。你也可以使用[http://www.yiiframework.com/doc/guide/1.1/en/basics.controller](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller)。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T02:03:19.183

正如您所发现的那样，Yii 的文档有些有限，但我发现如果我搜索我遇到的特定问题，我的大部分问题已经在这里得到了解答。

# java - 注释处理器抛出未捕获的异常

> ID：16207872
> 
> 赞同：2
> 
> 时间：2013-04-25T06:29:39.633
> 
> 标签：java, netbeans, ant

我在构建我的项目时遇到了麻烦。没有错误，我可以完美部署，问题是我无法构建项目。

我很确定没有丢失的类或库，并且肯定没有编译器错误。

```
An annotation processor threw an uncaught exception.
Consult the following stack trace for details.
java.lang.RuntimeException: com.sun.tools.javac.code.Symbol$CompletionFailure: class file for org.bouncycastle.cert.ocsp.BasicOCSPResp not found
    at org.eclipse.persistence.internal.jpa.modelgen.CanonicalModelProcessor.process(CanonicalModelProcessor.java:407)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:793)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:722)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment.access$1700(JavacProcessingEnvironment.java:97)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1029)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1163)
    at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1108)
    at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:824)
    at com.sun.tools.javac.main.Main.compile(Main.java:439)
    at com.sun.tools.javac.main.Main.compile(Main.java:353)
    at com.sun.tools.javac.main.Main.compile(Main.java:342)
    at com.sun.tools.javac.main.Main.compile(Main.java:333)
    at com.sun.tools.javac.Main.compile(Main.java:76)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tools.ant.taskdefs.compilers.Javac13.execute(Javac13.java:56)
    at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:1153)
    at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:930)
    at org.netbeans.modules.java.source.ant.JavacTask.execute(JavacTask.java:145)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor99.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor99.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.taskdefs.MacroInstance.execute(MacroInstance.java:398)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor99.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:392)
    at org.apache.tools.ant.Target.performTasks(Target.java:413)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.module.bridge.impl.BridgeImpl.run(BridgeImpl.java:283)
    at org.apache.tools.ant.module.run.TargetExecutor.run(TargetExecutor.java:541)
    at org.netbeans.core.execution.RunClassThread.run(RunClassThread.java:153)
Caused by: com.sun.tools.javac.code.Symbol$CompletionFailure: class file for org.bouncycastle.cert.ocsp.BasicOCSPResp not found
E:\NetBeans Projects\test\nbproject\build-impl.xml:876: The following error occurred while executing this line:
E:\NetBeans Projects\test\nbproject\build-impl.xml:309: Compile failed; see the compiler error output for details.
BUILD FAILED (total time: 1 second) 
```

build-impl 的第 876 行是

```
 <webproject2:javac destdir="${build.classes.dir}" gensrcdir="${build.generated.sources.dir}"/> 
```

build-impl 的第 309 行是

```
 <javac debug="@{debug}" deprecation="${javac.deprecation}" destdir="@{destdir}" encoding="${source.encoding}" excludes="@{excludes}" fork="${javac.fork}" includeantruntime="false" includes="@{includes}" source="${javac.source}" srcdir="@{srcdir}" target="${javac.target}"> 
```

我在这里想念什么？

使用 netbeans IDE 7.2.1，这个项目使用 JSF

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:33:22.593

似乎根据堆栈跟踪存在编译错误（通过 javac 执行`Ant`）：

没有找到自定义类错误：

```
class file for org.bouncycastle.cert.ocsp.BasicOCSPResp not found 
```

您需要确保在`build.xml`目标`javac`/任务中设置正确的类路径，看起来`javac`目标的类路径中缺少 bouncycastle jar/类。

编辑：在您的`Ant`javac 目标中没有定义类路径。请参阅[http://ant.apache.org/manual/Tasks/javac.html](http://ant.apache.org/manual/Tasks/javac.html)。你可以使用类似的东西

```
<path id="javac.classpath">  
    <pathelement location="lib/"/>  
    <pathelement path="${java.class.path}/"/>  
    <pathelement path="${additional.path}"/>  
 </path>  

<javac debug="@{debug}" deprecation="${javac.deprecation}" .. more attr ..>
    <classpath refid="javac.classpath/>
</javac> 
```

# ios - 将 UImage 绘制到图形上下文中的奇怪行为

> ID：16207873
> 
> 赞同：0
> 
> 时间：2013-04-25T06:29:40.343
> 
> 标签：ios, uiimage, core-graphics

我有以下代码水平并排合并两张图片：

```
 CGFloat firstWidth = ImageLeft.size.width;
        CGFloat firstHeight = ImageLeft.size.height;

        CGFloat secondWidth = ImageRight.size.width;
        CGFloat secondHeight = ImageRight.size.height;

        CGSize sizetoNewImage = CGSizeMake(firstWidth+secondWidth , firstHeight); // Here merging two images horizontally ,

        UIGraphicsBeginImageContext(sizetoNewImage);

        [ImageLeft drawInRect : CGRectMake(0,0,firstWidth,firstHeight)];
        [ImageRight drawInRect:CGRectMake(firstWidth,0,secondWidth,secondHeight)];// Here merging two images horizontally ,

        backgroundImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext(); 
```

问题是当我显示 backgroundImage 时，它​​的所有文本都模糊了。虽然，如果我显示单独的图像，这些图像用于连接到一个图像中 - 它们显示所有文本都很好。我在那里想念什么？？？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:22:01.653

从[另一个答案](https://stackoverflow.com/a/12427598/440060)，使用视网膜图像时，使用以下内容创建图像上下文。

```
UIGraphicsBeginImageContextWithOptions(size, NO, 0.0f); // 0.0 means [UIScreen mainScreen].scale 
```

# c# - 我通过从 ModelName 动态创建图像文件夹中的子文件夹来上传图像文件，但无法从该子文件夹中检索它们

> ID：16207876
> 
> 赞同：-1
> 
> 时间：2013-04-25T06:30:05.200
> 
> 标签：c#, asp.net, file-upload

# 这是我的代码：

我只使用一个简单的数据列表来显示图像表单文件夹......

> 单击数据列表中的损坏图像图标后显示错误找不到资源。
> 
> > 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> > 
> > > 请求的 URL：/WebSite2/Images/Desert.jpg

```
protected void BindDataList()
{
    DirectoryInfo dir = new DirectoryInfo(MapPath(@"~/Images/"+Model.Text+"/"));
    FileInfo[] files = dir.GetFiles();
    ArrayList listItems = new ArrayList();
    foreach (FileInfo info in files)
    {
        listItems.Add(info);
    }
    DataList1.DataSource = listItems;
    DataList1.DataBind();
}

protected void upload_Click(object sender, EventArgs e)
{
    string filename = Path.GetFileName(FileUpload1.PostedFile.FileName);
    FileUpload1.SaveAs(Server.MapPath("Images/"+Model.Text+"/" + filename));
    BindDataList();
}

protected void newfolder_Click(object sender, EventArgs e)
{
    string NewDirectory = Server.MapPath("Images/"+Model.Text);
    //New Directory Name in string variable
    CreateDirectoryIfNotExists(NewDirectory);
    //Calling the function to create new directory
}

private void CreateDirectoryIfNotExists(string NewDirectory)
{
    try
    {
        // Checking the existance of directory
        if (!Directory.Exists(NewDirectory))
        {
            //If No any such directory then creates the new one
            Directory.CreateDirectory(NewDirectory);
            Label1.Text = "Directory Created";
        }
        else
        {
            Label1.Text = "Directory Exist";
        }
    }
    catch (IOException _err)
    {
        Label1.Text = _err.Message; ;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:37:33.113

所有路径定义都应植根于`~/`：

```
protected void upload_Click(object sender, EventArgs e)
{
    string filename = Path.GetFileName(FileUpload1.PostedFile.FileName);
    FileUpload1.SaveAs(Server.MapPath("~/Images/"+Model.Text+"/" + filename));
    BindDataList();
}

protected void newfolder_Click(object sender, EventArgs e)
{
    string NewDirectory = Server.MapPath("~/Images/"+Model.Text);
    //New Directory Name in string variable
    CreateDirectoryIfNotExists(NewDirectory);
    //Calling the function to create new directory
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:38:26.647

试试这个：

```
protected void BindDataList()
{
    var imgDir = HttpContext.Current.Server.MapPath(string.Format(@"~/Images/{0}/", Model.Text));
    DirectoryInfo dir = new DirectoryInfo(imgDir);
    FileInfo[] files = dir.GetFiles();
    ArrayList listItems = new ArrayList();
    foreach (FileInfo info in files)
    {
        listItems.Add(info);
    }
    DataList1.DataSource = listItems;
    DataList1.DataBind();
}

protected void upload_Click(object sender, EventArgs e)
{
    string filename = Path.GetFileName(FileUpload1.PostedFile.FileName);
    var imgPath = HttpContext.Current.Server.MapPath(string.Format(@"~/Images/{0}/{1}", Model.Text, filename));

    FileUpload1.SaveAs(imgPath);
    BindDataList();
}

protected void newfolder_Click(object sender, EventArgs e)
{
    var imgDir = HttpContext.Current.Server.MapPath(string.Format(@"~/Images/{0}/", Model.Text));
    //New Directory Name in string variable
    CreateDirectoryIfNotExists(imgDir);
    //Calling the function to create new directory
} 
```

# android - 检查android应用程序是否有音频焦点并继续播放下一首歌曲

> ID：16207878
> 
> 赞同：0
> 
> 时间：2013-04-25T06:30:13.163
> 
> 标签：android, media-player, audio-streaming, android-audiomanager

我是 android 应用程序开发的新手，这是我的第一个应用程序。我正在构建一个音乐播放器，我有以下方法

```
public void  playSong(int songIndex){
    // Play song

        mContext = getApplicationContext();
        AudioManager am = (AudioManager) mContext.getSystemService(Context.AUDIO_SERVICE);

        OnAudioFocusChangeListener afChangeListener = new OnAudioFocusChangeListener() {
            public void onAudioFocusChange(int focusChange) {
                if (focusChange == AudioManager.AUDIOFOCUS_LOSS_TRANSIENT){
                    mp.pause();
                } else if (focusChange == AudioManager.AUDIOFOCUS_GAIN) {
                    mp.start();
                } else if (focusChange == AudioManager.AUDIOFOCUS_LOSS) {
                    mp.stop();
                }
            }
        };

        // Request audio focus for playback
        int result = am.requestAudioFocus(afChangeListener,
                                         // Use the music stream.
                                         AudioManager.STREAM_MUSIC,
                                         // Request permanent focus.
                                         AudioManager.AUDIOFOCUS_GAIN);

        if (result == AudioManager.AUDIOFOCUS_REQUEST_GRANTED) {
            // Start playback.
            try {
                mp.reset();
                mp.setDataSource(songsList.get(songIndex).get("songPath"));
                mp.prepare();
                mp.start();
                String songTitle = songsList.get(songIndex).get("songTitle");
                songTitleLabel.setText(songTitle);

                // Changing Button Image to pause image
                btnPlay.setImageResource(R.drawable.btn_pause);

                // set Progress bar values
                songProgressBar.setProgress(0);
                songProgressBar.setMax(100);

                // Updating progress bar
                updateProgressBar();    
            }
            catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

} 
```

当歌曲完成时，它应该开始播放下一首歌曲，但它没有。然后我播放切换到默认媒体播放器并切换回我的应用程序并播放应用程序。我想这与音频焦点有关。如何确定它是否已经具有焦点或释放完成的焦点。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:31:20.460

你试过这个

```
 @Override
    public void onCompletion(MediaPlayer arg0) {

        // check for repeat is ON or OFF
        if(isRepeat){
            // repeat is on play same song again
            //playSong(currentSongIndex);
             songPlayOnThread(currentSongIndex);
        } else if(isShuffle){
            // shuffle is on - play a random song
            Random rand = new Random();
            currentSongIndex = rand.nextInt((songsList.size() - 1) - 0 + 1) + 0;
            //playSong(currentSongIndex);
             playsong(currentSongIndex);
        } else{
            // no repeat or shuffle ON - play next song
            if(currentSongIndex < (songsList.size() - 1)){
                String result=playSong(currentSongIndex + 1);
                if(result!="success")
                {
                //  mp.stop();
                //  currentSongIndex=0;
                }
                currentSongIndex = currentSongIndex + 1;
            }else{
                // play first song
            //  playSong(0);
                currentSongIndex = 0;
            }
        }
    } 
```

# html - 在 ul li 上设置 css 以进行悬停

> ID：16207883
> 
> 赞同：0
> 
> 时间：2013-04-25T06:30:26.280
> 
> 标签：html, css

这是我的 html:-

```
<ul>
    <li>Activities</li>
    <ul>
        <li>Physical1</li>
        <ul>
            <li>Cricket</li>
            <ul>
                <li>One Day</li>
            </ul>
        </ul>
            <li>Test1</li>
            <ul>
                <li>Test At Abc</li>
            </ul>
                <li>Test2</li>
            <ul>
                <li>Test At Xyz</li>
            </ul>
    </ul>
</ul> 
```

这是我的CSS：-

```
ul > li > ul {
    display: none;

}

li:hover > ul {
    display: block;
    } 
```

我想将鼠标悬停在 Activties 上，然后显示 Physical1 和 Test1 和 Test2。
我试图超越css，但没有成功。
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:34:05.220

要做一个嵌套列表，你应该把一个`<ul>`元素放在`<li>`这样的里面：

```
<ul>
  <li>Blah blah
      <ul>
          <li>Nested blah blah</li>
      </ul>
   </li>
</ul> 
```

然后你的CSS规则：

```
li:hover > ul {
  display: block;
} 
```

将工作。

# iphone - 访问 Class 中的常量而不在 ObjectiveC 中创建类的实例

> ID：16207887
> 
> 赞同：4
> 
> 时间：2013-04-25T06:30:44.300
> 
> 标签：iphone, ios, objective-c, nsstring, class-constants

下面的 C# 类仅用于保持常量。所以我们可以使用类名访问每个所以'Constants.DIR_ARCHIVE'将给出'Archive'。

如何在 ObjectiveC 中定义下面的 C# 类？

```
 public class Constants
{
//Resource Directory Names
public const string DIR_ARCHIVE = "Archive";
public const string DIR_DEPARTMENTS = "Departments";
public const string DIR_FORMS = "Forms";
public const string DIR_GOAL_TRACKING = "GoalTracking";
public const string DIR_ROLES = "Roles";
public const string DIR_HOMEWORK = "HomeWork";
public const string DIR_POSTINGS = "Postings";
public const string DIR_SIGNUP = "SignUp";
public const string DIR_SITE_CONFIG = "System";
public const string DIR_PORTFOLIO = "Portfolio";
public const string DIR_MEMBERDEFINITION = "Definitions";

//Integer Constants 
public const int LOG_DEFAULT_DURATION = 1;

//Other Constants
public const string OP_STATUS_ERROR = "Error";
public const string OP_STATUS_SUCCESS = "Success";
public const string OP_STATUS_WARNING = "Warning";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T06:35:47.680

> 如何在 ObjectiveC 中定义下面的 C# 类？

**常量不是使用 Objective-C 中的类来组织的。**如果它们要保持不变，Objective-C 中的常用方法是选择一个有意义的前缀并将其应用于每个名称：

```
NSString* const AM_DIR_ARCHIVE = "Archive";
NSString* const AM_DIR_DEPARTMENTS = "Departments";
NSString* const AM_DIR_FORMS = "Forms"; 
```

您可以在实现 (.m) 文件中执行此操作，然后在相应的头 (.h) 文件中将名称声明为外部定义的常量：

```
extern NSString* const AM_DIR_ARCHIVE;
extern NSString* const AM_DIR_DEPARTMENTS;
extern NSString* const AM_DIR_FORMS; 
```

另一种方法，也是在 Foundation 框架中用于查找标准系统目录的方法，是使用[枚举](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/uid/TP40003793-CH3g-BAJHBFCH)，其值可以传递给几个函数或方法之一：

```
enum {
   NSApplicationDirectory = 1,
   NSDemoApplicationDirectory,
   NSDeveloperApplicationDirectory,
   NSAdminApplicationDirectory,
   NSLibraryDirectory,
   NSDeveloperDirectory,
   NSUserDirectory,
   NSDocumentationDirectory,
   NSDocumentDirectory,
   //...
};
typedef NSUInteger NSSearchPathDirectory; 
```

您可以将这些值中的任何一个传递给一个函数，例如[`NSSearchPathForDirectoriesInDomains()`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/Reference/reference.html#//apple_ref/doc/uid/20000055-SW5). 对于该特定功能，您将返回与指定目录匹配的路径数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T07:55:38.530

通常，您将希望使用 Caleb 解释过的正确常量 (+1)。

但是，将这些常量包装在类方法中可能（有时）很有用：

```
@interface MONColor : NSObject
+ (NSString *)colorName;
@end

@interface MONRedColor : MONColor
@end 
```

MONRedColor.m

```
NSString * const MONColorName_Red = @"Red";

@implementation MONRedColor

+ (NSString *)colorName
{
  return MONColorName_Red;
}

@end 
```

在某些情况下，通过接口将类与其常量关联起来会很智能。

如果字符串以不同的方式构建（或不构建），或者有额外的逻辑要执行（例如启用的功能或 URL 的组合），这也很有用 - 取决于您正在处理的类。

与使用不同方式组成的函数或任意实例（常量实例）相比，在处理某些接口时传递对象和选择器可能更容易。

C 符号上精心挑选的前缀非常适合大多数用途。

因此，对此进行扩展，您可以声明：

```
@interface MONResourceDirectoryName : NSObject

+ (NSString *)Archive;
+ (NSString *)Departments;
+ (NSString *)Forms;
+ (NSString *)GoalTracking;
+ (NSString *)Roles;
+ (NSString *)HomeWork;
+ (NSString *)Postings;
+ (NSString *)SignUp;
+ (NSString *)System;
+ (NSString *)Portfolio;
+ (NSString *)Definitions;

@end 
```

然后写：

```
NSString * resourceDirectory = [MONResourceDirectoryName Forms]; 
```

您还可以使用 C 结构对数据进行分组。如果您需要与 ARC 兼容的选项，我将演示使用`CFString`s（即`NSString`s）：

```
struct t_mon_resource_directory_name {
    CFStringRef const Archive;
    CFStringRef const Departments;
    CFStringRef const Forms;
    CFStringRef const GoalTracking;
    CFStringRef const Roles;
    CFStringRef const HomeWork;
    CFStringRef const Postings;
    CFStringRef const SignUp;
    CFStringRef const System;
    CFStringRef const Portfolio;
    CFStringRef const Definitions;
};

extern const struct t_mon_resource_directory_name MONResourceDirectoryName;

const struct t_mon_resource_directory_name MONResourceDirectoryName = {
    .Archive = CFSTR("Archive"),
    .Departments = CFSTR("Departments"),
    .Forms = CFSTR("Forms"),
    .GoalTracking = CFSTR("GoalTracking"),
    .Roles = CFSTR("Roles"),
    .HomeWork = CFSTR("HomeWork"),
    .Postings = CFSTR("Postings"),
    .SignUp = CFSTR("SignUp"),
    .System = CFSTR("System"),
    .Portfolio = CFSTR("Portfolio"),
    .Definitions = CFSTR("Definitions")
}; 
```

# c# - 如何从 Novacode Docx 生成具有 HTML 作为输入的 word 文档

> ID：16207888
> 
> 赞同：0
> 
> 时间：2013-04-25T06:30:50.200
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, docx

我需要从 html 数据生成 word 和 pdf 文件作为输入。例如，如果我的 html 包含 b 标签，那么 b 标签下的所有内容都应该生成粗体。我正在使用**iTextSharp**生成 pdf 文件和**novacode docx**来生成 word 文件，我已经实现了使用以下代码生成 pdf 文件的功能：

```
iTextSharp.text.html.simpleparser.HTMLWorker hw = new iTextSharp.text.html.simpleparser.HTMLWorker(doc);
hw.Parse(new StringReader(model.HTMLContent)); 
```

但我无法从 html 数据生成 word 文件。任何帮助都会很棒！

如果 Docx 没有为此要求提供任何解决方案，那么我想知道可用于此功能的其他选项是什么。我想特别知道这些选项是否需要在服务器上安装 ms-office？或者这些选项会生成什么类型​​的文档文件，我的意思是 doc 扩展名或 docx 扩展名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:00:53.067

大约一年前，我尝试用 word 做这样的事情，但没有成功，显然 docx 文件不支持在其中显示 html。我建议在单词中插入图像和表格等，而不是确切的 html。

# python - 将抛物线形状拟合到数据（是否可以在 SciPy CurveFit 中使用逻辑语句？）

> ID：16207890
> 
> 赞同：2
> 
> 时间：2013-04-25T06:30:59.287
> 
> 标签：python, scipy, curve-fitting

我正在尝试使用以下形式的抛物线形状拟合数据： **Y(x) = a(1 – (x/b)^2) for |x| < b ....... Y(x) = 0 否则** 我添加了两个额外的自由度，因此抛物线可以水平和垂直移动。

```
from scipy.optimize import curve_fit

def parabolic(self, t, *p): 
    a, b, c, d = p        
    if abs(t) > b:
        return 0
    else:
        return a*(1-(((t-c)/b)**2)) + d 
```

我正在尝试使用 scipy.optimize 中的 curve_fit 并创建了一个抛物线函数，然后我尝试使用：

```
coeff, cov = curve_fit(parabolic, data[:,0], data[:,1], p0) #Return co-effs for fit and      covariance, p0 = user given seed fitting parameters 
```

该脚本返回一个错误，尽管与在我的抛物线拟合定义中使用逻辑有关。当我删除逻辑语句并仅适合整个数据（这是一个在中心具有抛物线形状的背景噪声水平）时，结果很糟糕，因为拟合试图包括背景噪声水平。

欢迎所有建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:42:15.157

我可能会这样做：

```
from __future__ import division
from __future__ import print_function
from scipy.optimize import curve_fit
import numpy as np

def parabola(t, *p): 
    a, b, c, d = p
    y = np.zeros(t.shape)
    indices = np.abs(t) < b
    y[indices] = (a*(1-(((t[indices]-c)/b)**2)) + d)
    return y

p0 = [1, 2, 3, 4]
x = np.linspace(-10, 10, 20)
y = parabola(x, *p0)
coeff, cov = curve_fit(parabola, x, y, p0)
print(coeff) 
```

**更新**

使用提供的数据（请参阅评论中的链接），事情开始变得更加清晰：

*   这是关于其行为的棘手数据。许多“零”数据无助于拟合函数，因为随着零数据的增多，实际函数的权重变得越来越小。通常，最好的办法是减少一些并专注于相关数据（一旦你有了这些，你可以尝试用你最好的参数来拟合所有数据）。

*   标准不正确：它以零为中心，而不是围绕数据的峰值 ( `c`)。

*   `b`在函数和索引标准中都有参数`c`会使事情变得更难：函数的行为越来越不线性。我通过使用固定标准找到了最初的最佳参数，这是下面注释掉的行。

*   提供良好的启动参数。`[1, 2, 3, 4]`非常通用，在非线性最小二乘法的情况下，很难拟合。

因此，考虑到以上所有因素，我想出了这个：

```
from __future__ import division
from __future__ import print_function
from scipy.optimize import curve_fit
import numpy as np
from matplotlib import pyplot as plt

def parabola(t, *p): 
    a, b, c, d = p
    y = np.zeros(t.shape)
    # The indices criterion was first fixed to values that appeared reasonably; 
    # otherwise the fit would completely fail.
    # Once decent parameters were found, I replaced 28 and 0.3 with the center `c` 
    # and the width `b`.
    #indices = np.abs(t-28) < 0.3
    indices = np.abs(t-c) < b
    y[indices] = (a*(1-(((t[indices]-c)/b)**2)) + d)
    return y

out = np.loadtxt('data.dat')
# Limit the data to only the interesting part of the data
# Once we have the fit correct, we can always attempt a fit to all data with 
# good starting parameters
xdata = out[...,0][450:550]
ydata = out[...,1][450:550]
# These starting parameters are either from trial fitting, or from theory
p0 = [2, 0.2, 28, 6.6]
coeff, cov = curve_fit(parabola, xdata, ydata, p0)
plt.plot(xdata, ydata, '.')
xfit = np.linspace(min(xdata), max(xdata))
yfit =  parabola(xfit, *coeff)
plt.plot(xfit, yfit, '-')
plt.show() 
```

![抛物线拟合](https://i.stack.imgur.com/eOCCW.png)

请注意，生成的`b`参数仍然表示不合适。我猜这些数据和这个函数的组合很棘手。一种选择是迭代各种合理的值`b`（例如，在 0.2 和 0.3 之间）并找到最佳的约简卡方。

但是，我也注意到数据不会显示为抛物线。最初，当我看到完整的数据图片时，我以为是“高斯”，但也不是这样。它看起来几乎像一个棚车功能。如果你有一个很好的理论模型表明它是抛物线，那么要么数据不正确，要么模型可能不正确。如果您只是在寻找描述性功能，请尝试其他一些功能。

# jquery - 将数据从一个页面（在 jQuery 对话框中）传递到另一个页面

> ID：16207891
> 
> 赞同：0
> 
> 时间：2013-04-25T06:31:03.260
> 
> 标签：jquery, asp.net

如何将 jQuery 对话框中元素的选定值传递到其父页面？

第1页.aspx

```
 $(document).ready(function() {
        $("#btnLookUp").click(function() {
            $("#searchActor").dialog({
                autoOpen: "false",
                resizable: "false",
                height: "250",
                width: "320"
            });
        });
    });

    $(document).ready(function() {
        $("#btnSearch").click(function() {
            $("#actorsList").load("LookUp/ActorsList.aspx", { lname: $("#txtSearchCriteria").val() });
        });
        return false;
    });

    function SelectGrid(objValue, itemValue , popUpDialog) {
        $(objValue).val(itemValue);
        $(popUpDialog).dialog("close");                       
    } 
```

ActorsList.aspx 代码隐藏

```
private void LoadActors(string param)
    {
        DataTable dt = new DataTable();
        //Execute stored proc

        Response.Write("<table>");
        foreach (DataRow dr in dt.Rows)
        {
            Response.Write("<tr>");
            Response.Write("<td>" + "<label onclick='SelectGrid(#txtActorId,0,#searchActor'>Select</label>" + "</td>");
            Response.Write("<td>" + dr[2].ToString() + "</td>");
            Response.Write("<td>" + dr[3].ToString() + "</td>");
            Response.Write("<td>" + dr[4].ToString() + "</td>");
            Response.Write("</tr>");
        }
        Response.Write("</table>");
    } 
```

`

另外，请帮我解决这一行，我在如何分配值时遇到了麻烦，所以我将其设置为 0。 `Response.Write("<td>" + "<label onclick='SelectGrid(#txtActorId,0,#searchActor'>Select</label>" + "</td>");`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:53:35.773

In the parent window you need to create an event listener(please note that this is now an absolutely cross-browser solution, here's support [list](http://caniuse.com/#feat=x-doc-messaging))

```
function listener(event) {
  if( event.origin != 'http://your-domain.com') { //means data comes from another domain
    return;
  }
  document.getElementById("msg").innerHTML = "Recieved: " + event.data;
}

if (window.addEventListener){
  window.addEventListener("message", listener, false);
} else {
  window.attachEvent("onmessage", listener);
} 
```

in the frame form where you wont to send data:

```
var win = window.parent;
win.postMessage("Hello", "http://your-domain.com"); 
```

if you need the description for the fully cross-browser solution feel free to ask in comment, the general approach is threw "hashbangs"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:54:42.660

上面贴出的代码的场景是这样的，我有一个查找按钮，当用户点击那个按钮时，它会加载 searchactor 对话框（一个 jquery 对话框）。在这个对话框中，用户可以搜索演员列表，它加载一个 aspx 页面 (ActorsList.aspx)。用户将在列表中选择一个演员（即在查找对话框中），它将显示在演员 ID (txtActorId) 上。这就是为什么我有一个名为 SelectGrid 的函数将数据从查找对话框发送到 Page1.aspx。我找到了一个页面[http://www.ezzylearning.com/tutorial.aspx?tid=6942119](http://www.ezzylearning.com/tutorial.aspx?tid=6942119)它做同样的事情，但是，在我的例子中，我从一个单独的页面加载 jquery 对话框中的数据。

# r - 将 R 中的图例绘制在绘图区域之外

> ID：16207898
> 
> 赞同：0
> 
> 时间：2013-04-25T06:31:27.067
> 
> 标签：r, legend, legend-properties

我有问题`R`。我想在绘图区域外添加一个图例，在右侧，从东北角向南生长。所以我搜索了一些代码并将其写入我的代码。此代码给出的示例有效，但不适用于我的图例，这似乎很大。问题是如何实现图例的正确位置。

这是给你的一些代码：

```
#Construct some data and start the plot
x <- 0:64/64
y <- sin(3*pi*x)
plot(x, y, type="l", col="blue")
points(x, y, pch=21, bg="white")

#Grab the plotting region dimensions
rng <- par("usr")

#Call your legend with plot = FALSE to get its dimensions
lg <- legend(rng[1],rng[4] + lg$rect$h,xpd = NA,y.intersp=.75,c("Datenreihe 1", "Datenreihe 2", "lineare Regression\nfür Datenreihe 1", "lineare Regression\nfür Datenreihe 2"), pch = c(1,1,NA,NA), lty = c(NA,NA,1,1), col=c("lightblue","lightgreen","darkblue","darkgreen"),plot = FALSE)

#Once you have the dimensions in lg, use them to adjust
#the legend position
#Note the use of xpd = NA to allow plotting outside plotting region                 
legend(rng[1],rng[4] + lg$rect$h,xpd = NA,y.intersp=.75,c("Datenreihe 1", "Datenreihe 2", "lineare Regression\nfür Datenreihe 1", "lineare Regression\nfür Datenreihe 2"), pch = c(1,1,NA,NA), lty = c(NA,NA,1,1), col=c("lightblue","lightgreen","darkblue","darkgreen"),plot = TRUE) 
```

提前致谢

# jquery - jquery删除附加值取消选择

> ID：16207899
> 
> 赞同：0
> 
> 时间：2013-04-25T06:31:27.367
> 
> 标签：jquery, append

通过使用附加功能，我得到了重复的价值。下面是我的代码

```
$(function () {
    $('.gallery_cont1').on('click',function(){ 
        $('#template-sel').append($(this).find('h2').text()+'<br />');
});
}); 
```

对于第一次单击（意味着选择），文本正在正确添加，但对于第二次单击（意味着取消选择），之前附加的文本不会被删除。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:33:29.457

只需将`append()`功能替换为`html()`这样

```
$(function () {
    $('.gallery_cont1').on('click',function(){ 
        $('#template-sel').html($(this).find('h2').text()+'<br />');
});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:37:47.210

这将检查 template-sel 元素的 HTML 是否已经等于 H2 中的文本，因此当再次单击它时，它应该删除文本。

```
$(function () {
$('.gallery_cont1').on('click',function(){ 
    if($('#template-sel').html()==$(this).find('h2').text()+'<br />')
        $('#template-sel').html('');
    else
        $('#template-sel').html($(this).find('h2').text()+'<br />');
});
}); 
```

# algorithm - 跟踪用户移动

> ID：16207901
> 
> 赞同：1
> 
> 时间：2013-04-25T06:31:29.587
> 
> 标签：algorithm, image-processing

我有一个包含一些用户的图像框架。另一个又包含一些用户。我正在尝试查找第一个图像中的任何用户是否也出现在第二个图像中。

到现在为止，我所有的图像帧都是随时间连续的。所以我有一个程序可以不断存储人从一个屏幕到另一个屏幕的运动坐标。因此，我可以推断出谁是任何框架中的相应人。

我该如何处理这种离散情况。衣服的颜色组合？但这会产生许多重复和错误的数据。（如果误差幅度较小，则没有问题）

除了图像处理，还有其他方法吗？我见过一些应用程序根据手机发出的 wii-fii ping 来跟踪用户的移动。

我正在寻找可能的方法/选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:36:29.097

您应该考虑作为一个人如何在离散情况下跟踪用户。我怀疑即使是人类也能非常准确地跟踪给定的人，但我相信我会使用的主要是衣服的尺寸和颜色。请记住，如果您无法在有限的时间内执行给定的任务，并且拥有与计算机相同的数据，那么计算机只会执行您教给它的操作，这可能计算机也将无法执行。

# android - Setting Scaled Bitmap to ImageView during onCreate

> ID：16207905
> 
> 赞同：-1
> 
> 时间：2013-04-25T06:31:47.787
> 
> 标签：android, android-widget

I have a launch screen imageview in my application. I am converting png file bundled with my application to bitmap after scaling it as png is greater resolution. I am doing decoing and scaling down in callback function of that imageview when it is about to draw. I need the bitmap to fill entire screen. But Sometimes it is not getting drawn as It is getting width and height of the view as 0\. It occurs sometime only. I think this is not the right way of doing it. Please suggest me best solution.

```
<com.example.myImageView
    android:id="@+id/ovation_background"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:contentDescription="@string/background_screen"
    android:background="@color/black"/> 
```

In Activity onCreate function:

mImageView.getMeasuredWidth() and mImageView.getMeasuredHeight() is coming as 0 sometimes.

```
ViewTreeObserver vtoBackgroundView = mImageView.getViewTreeObserver();
vtoBackgroundView.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {

        @Override
        public boolean onPreDraw() {
            Bitmap bitmap = decodeSampledBitmapFromResource
                            (getResources(), R.drawable.launch_screen, 
                             **mImageView.getMeasuredWidth()**, 
                             **mImageView.getMeasuredHeight()**);
            if ( bitmap != null )
            {
                mImageView.setBackgroundBitmap(bitmap);

            }
            ViewTreeObserver obs2 = mImageView.getViewTreeObserver();
            obs2.removeOnPreDrawListener(this);
            return true;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:38:43.060

If You getting size of Your view before it is actually draw on screen, You don't get proper size of image by getMeasuredWidth() and getMeasuredHeight(), because android don't know how big is your View based on real screen configuration.

You may consider getting real screen dimensions by getting it in onSizeChanged (int w, int h, int oldw, int oldh).

[http://developer.android.com/reference/android/view/View.html#onSizeChanged(int, int, int, int)](http://developer.android.com/reference/android/view/View.html#onSizeChanged%28int,%20int,%20int,%20int%29)

The first call of that method give you info like this (real width of view, real height of view, 0, 0)

So the first two parameters is what I think you want get, and second two parameters in this case You may ignore.

# java - 有多少对象符合 gc 条件

> ID：16207908
> 
> 赞同：0
> 
> 时间：2013-04-25T06:32:12.360
> 
> 标签：java, garbage-collection, scjp

你能解释一下这个答案吗..？正如我所料，答案 C

```
 Given:
 11\. class Snoochy {
 12\. Boochy booch;
13\. public Snoochy() { booch = new Boochy(this); }
14\. }
15.
16\. class Boochy {
17\. Snoochy snooch;
18\. public Boochy(Snoochy s) { snooch = s; }
19\. }
And the statements:
21\. public static void main(String[] args) {
22\. Snoochy snoog = new Snoochy();
23\. snoog = null;
24\. // more code here
25\. } 
```

关于在第 23 行执行后立即被 snoog、snooch 和 booch 引用的对象，哪项陈述是正确的？

```
 A. None of these objects are eligible for garbage collection.
   B. Only the object referenced by booch is eligible for garbage collection.
   C. Only the object referenced by snoog is eligible for garbage collection.
   D. Only the object referenced by snooch is eligible for garbage collection.
   E. The objects referenced by snooch and booch are eligible for garbage collection.

Answer: E 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:36:29.980

这两个类相互引用。所以，当`snoog`被创建时，你也会得到 a`booch`和 a `snooch`。当你设置了`snoog = null;`，`booch`并且`snooch`有资格获得`GC`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:37:46.767

在第 23 行之后，没有指向`Snoochy`在第 22 行创建的实例的引用。=> 这个实例可以被垃圾回收。但是这个实例包含对 a 的引用`Boochy`（见第 13 行），没有其他引用存在。=：这也可以被垃圾收集。

# jsp - CDI @ConversationScoped 和 JSP

> ID：16207913
> 
> 赞同：1
> 
> 时间：2013-04-25T06:32:35.320
> 
> 标签：jsp, jakarta-ee, redirect, cdi

执行 POST 然后重定向是 Web 应用程序中非常常见的场景。CDI`@ConversationScoped`与 JSF 配合得很好，可以保留 POST 和重定向之间的状态。

但是，我可以将 CDI`@ConversationScoped`与 JSP 一起使用吗？

如果没有，JSP 的替代解决方案是什么？

请注意：

(1) 出于显而易见的原因，我不想使用 HTTPSession 来保存状态。

(2) 我不想为此目的在客户端（在 Cookie 或 URL 中）保存我的敏感数据，例如密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T21:12:38.447

CDI 1.0 中的对话范围与 JSF 紧密相关，它在 CDI 1.0 中的 JSP 中不起作用，但它在作为 Java EE 7 一部分的 CDI 1.1 中应该可以正常工作。

# javascript - 在不使用全局变量的情况下重用 knockout.js viewModel

> ID：16207914
> 
> 赞同：0
> 
> 时间：2013-04-25T06:32:35.693
> 
> 标签：javascript, jquery, jquery-mobile, knockout.js, javascript-namespaces

我有一个包含不同淘汰生成内容的页面。我有一个包含数据的右侧菜单，该菜单应在页面中间加载新数据，具体取决于右侧菜单中选择的行。

所以，我可以在页面中间获取内容。它从后端加载当前内容并显示它。但是，当我在右侧面板中选择一个项目时......我想重新获取页面中间的数据并更新页面。然而，这对我来说是一个停止点。由于内容的获取是在命名空间中完成的，并且不允许使用全局变量，因此我无法重用当前的 viewModel（或者，至少我不知道如何）。因此，我正在创建一个新的 viewModel，我无法对其应用绑定，因为在加载页面时它们已经应用于相同类型的 viewModel。

这是我的 JS 代码：

```
Function.registerNamespace('Domain.Discussion');

$(document).ready(function () {
    var repliesViewModel = Domain.Discussion.RepliesView.ReplyPage;

    ko.applyBindings(repliesViewModel, document.getElementById('discussion'));
});

Domain.Discussion.RepliesView = Domain.Discussion.RepliesView || {
    ReplyPage: (function () {
        function Reply(data) {
            var self = this;
            self.ParentItemId = data.ParentItemID;
            self.Body = data.Body;
            self.Created = data.Created;
        }
        var onGetRepliesSuccess = function (replies) {
            var buffer;
            buffer = $.map(replies.RepliesResult, function (item) { return new Reply(item); });
            viewModelReplies.replies(buffer);
        };
        var onGetRepliesError = function (sender, args) {
            alert(args.message);
        };
        var viewModelReplies = {
            replies: ko.observableArray([]),
            loadReplies: function (parentItemId, listId) {
                if (parentItemId !== null && listId !== null) {
                    console.log("ParentItemId: " + parentItemId + " -- ListId: " + listId);
                    alert("Domain.Discussion.RepliesView");

                    $.ajax({
                        url: absolutePath + "api/Replies/" + listId + "/" + parentItemId,
                        headers: { "Accept": "application/json; odata=verbose" },
                        success: onGetRepliesSuccess,
                        error: onGetRepliesError
                    })
                }
            },
        };

        viewModelReplies.loadReplies(1, '6a5ed4ad-5a7c-428f-947e-b8aa2de54489');

        return viewModelReplies;
    }())
};

// The method loaded by the row-click in the right panel.
Domain.Discussion.LoadDiscussionReplies2 = function (discussionListId, currentItem) {
    try {
        if (currentItem.ListId !== "" && currentItem.Id !== "") {
            // Call the current viewModel and tell it to loadReplies
            // This doesn't work since global variables are, of course, not allowed
            repliesViewModel.loadReplies(currentItem.Id, currentItem.ListId);
        }
    }
    catch (e) {
        alert(e);
    }
} 
```

这是我的 HTML 代码：

```
<!-- page discussion -->
<div data-role="page" id="discussion">
    <!-- Content -->
    <div data-role="content">
        <!-- ladda replies -->
        <div id="replies">
            <!-- ko foreach: replies -->
            <div class="message message-first">
                <div class="message-header">
                    <div class="message-header-user">
                        <h1>Persons Name</h1>
                        <h2>Subtitle</h2>
                    </div>
                    <div class="message-header-date" data-bind="text: Created"></div>
                </div>
                <div class="message-content">
                    <span data-bind="text: Body"></span>
                    <hr />
                </div>
            </div>
            <!-- /ko -->
        </div>
    </div>
    <!-- panel -->
    <!-- Grupper -->
    <div id="nav-panel-discussion-groups" data-role="panel" data-theme="a" data-position="right" data-display="overlay">
                <!-- ko foreach: discussions -->
                <ul class="nav-search" data-role="listview" data-theme="a" data-iconpos="left" data-inset="true">
                    <li data-role="list-divider" data-swatch="a" data-theme="a" data-form="ui-bar-a">
                        <div data-type='horizontal'>
                            <label data-bind="text: Title"></label>
                            <a data-bind="attr: { eventId: Id }"  eventId="" name='newThread' data-role="button" data-icon='plus' data-inline="true" data-mini="true" data-theme="a" data-iconpos='notext' id="A4">New</a>
                        </div>
                    </li> 

                    <!-- ko foreach: Threads -->
                    <li data-mini="true" data-icon="false" data-bind="">
                        <a href="#discussion" data-bind="text: Title, click: Domain.Discussion.LoadDiscussionReplies2.bind($root.Id, Id)" data-transition="slide"></a>
                    </li>
                    <!--  /ko -->
                </ul>
                <!-- /ko -->
    </div>
    <!-- /panel -->
</div> 
```

我的问题是：如何在页面加载时重新获取数据并重新使用 viewModel。我现在完全被困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:52:35.647

我目前的项目中有类似的要求。我们在同一页面上有多个视图模型，一个视图模型中的操作可能会影响其他一个（或多个）视图模型中的状态。我们通过使用`EventEmitter`所有视图模型共享的总线解决了这个问题。因此，当其中一个视图模型获得一些新数据时，它只是将其作为事件发送给侦听此事件的其他视图模型。像这样的东西：

```
// Data fetched
eventBus.emit('mynamespace:data', [data]); 
```

在另一个视图模型中：

```
// Respond to data
eventBus.on('mynamespace:data', function(data) {
    // Process data and update viewmodel state
} 
```

所以唯一的共同点是事件总线。他们对彼此没有其他了解。

# wordpress - Wordpress 在 url 末尾添加了额外的年份，即使永久链接设置没有它

> ID：16207915
> 
> 赞同：0
> 
> 时间：2013-04-25T06:32:36.137
> 
> 标签：wordpress, redirect, permalinks

我已将我的永久链接设置为“/%year%/%monthnum%/%postname%/”，当我将光标移动到帖子链接上方时，在主页上，url 是正确的。但是当我点击它时，它会将我重定向到以年份结尾的 url。所以 url "/2013/04/title/" 将被重定向到 "/2013/04/title/2013/"。我通过更改发布帖子的年份来测试它是一年。

我已经检查和修改了几次永久链接，这仍然会发生。我正在使用最新版本 3.5.1。它必须与wp有关，因为我停用了所有插件但没有任何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:24:44.120

问题可能出在您的主题上。切换到默认主题并检查问题是否仍然存在。您的主题可能会覆盖 URL 模式。

# ios - 哪个更好 alloc init 或 new

> ID：16207917
> 
> 赞同：-1
> 
> 时间：2013-04-25T06:32:38.443
> 
> 标签：ios

我对此感到困惑，您能告诉我哪个更好，为什么？

我在某处读到这两者都用于分配和初始化。有人告诉我你不能像 newWithString 和所有其他类似的事情但是当我在 Xcode 中尝试时它没有给我错误

```
 NSString *AddEmail  =[[NSString alloc]initWithString:@"Add Email"];

      NSString *AddEmail  =[NSString new]; 
```

两者都会以同样的方式工作吗？

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:41:34.523

`[[SomeClass alloc] init]`将给出与 相同的结果`[SomeClass new]`。new 被实现为

```
+ (id) new
{
    return [[self alloc] init];
} 
```

您使用的`newWithString`方法给出了一个非常明确的警告：“`+newWithString`找不到类方法”，因此即使您编写代码，它也会在这一行失败。（除非您在 上声明了一个类别`NSString`）。

我更喜欢`[[alloc] init]`，因为您可以分配一个对象，然后根据您选择的 init 方法选择如何初始化其变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:26:17.917

`+[NSString new]`只返回一个空的、不可变的字符串。

它相当于`[[NSString alloc] init]`。

你的例子不一样。如果我正确地猜到了你的意图，`NSString * AddEmail = @"Add Email";`那么你只需要写。您不需要在此示例中使用`+alloc`, `-initWithString:`,等，因为它已经是.`+stringWithString:``@"Add Email"``NSString`

`[[TYPE alloc] init]`并且`[TYPE new]`是等效的（除非被覆盖）。您选择哪个是您的偏好。我更喜欢`[TYPE new]`它，因为它更短，并且在您创建“新”对象时无需分离（或发音）alloc/init 消息链。

# jquery - jquery自动完成显示没有搜索结果，尽管作为响应

> ID：16207918
> 
> 赞同：0
> 
> 时间：2013-04-25T06:32:52.913
> 
> 标签：jquery, jsp, autocomplete

我正在尝试在 java/jsp 项目中实现 jquery 自动完成功能。

自动完成功能即使将术语带到服务器也能正确执行。服务器也会发送在开发人员工具中可见的必要响应。`No search results`问题是即使在收到响应后也会显示自动完成功能。

这是我的 ajax jsp 页面 - **ajaxOtherLocations.jsp** - 我在其中查询结果。

```
<%
  String query = (String)request.getParameter("term");
  System.out.println(query);
  LocationDAO locationModel = new LocationDAO();
  ArrayList<LocationBean> locations = locationModel.getLocationsByType("others");

  for( LocationBean location : locations )
  {
   out.print(location.getLocationName()+"\n");
  }
%> 
```

在网络选项卡的开发人员工具中，我可以看到一个请求被发送到上面的页面，响应类似于......

```
LBNagar
Hitech City
Jubilee Hills
Film Nagar
Lakdikapool
Koti
Dilsukhnagar 
```

`line-end`如您所见，全部由字符分隔。

我正在调用这样的`autocomplete`函数......

```
$(".auto-complete").keypress(function(){
    $(this).autocomplete({source:"ajax/ajaxOtherLocations.jsp"});
    }); 
```

我在哪里做错了？

注意： - 我从本教程中获得了想法 - [http://www.java4s.com/jquery-tutorials/example-get-autocomplete-feature-in-javajsp-with-jquery-api/](http://www.java4s.com/jquery-tutorials/example-get-autocomplete-feature-in-javajsp-with-jquery-api/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:58:57.737

我认为您正在使用 jquery 自动完成，在这种情况下，您需要以 json 格式返回数据。您可以参考以下链接：

[http://jqueryui.com/autocomplete/#remote-jsonp](http://jqueryui.com/autocomplete/#remote-jsonp)

# html - 代替 & iOS 6中带有数字的html代码标签

> ID：16207919
> 
> 赞同：0
> 
> 时间：2013-04-25T06:32:54.023
> 
> 标签：html, objective-c, parsing, ios6

我从服务器获取 html 代码 & 我想在 UITextView 中显示它。我需要解析 html 并在 UITextView 中显示纯文本。我正在使用下面的代码来解析这篇[文章中的 html](https://stackoverflow.com/questions/12894955/how-to-remove-html-tags-and-trim-the-characters-to-250-in-objective-c)

现在我需要`li`用实际数字替换标签。我怎样才能做到这一点 ？例如输入

```
<ol>
  <li>Coffee</li>
  <li>Tea</li>
  <li>Milk</li>
</ol> 
```

输出应该是

1.  咖啡
2.  茶
3.  牛奶

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:53:23.503

将您的 Function 替换为以下内容并传递您发布的 HTML 字符串片段。

```
NSString *str = @"<ol>"
"<li>Coffee</li>"
"<li>Tea</li>"
"<li>Milk</li>"
"</ol>";

[self stringByStrippingHTML:str]; 
```

替换字符串和生成欲望输出的函数

```
- (NSString *)stringByStrippingHTML:(NSString *)inputString
{
    NSMutableString *outString;

    if (inputString)
    {
        outString = [[NSMutableString alloc] initWithString:inputString];

        if ([inputString length] > 0)
        {
            NSRange r;
            int index = 1;
            while ((r = [outString rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound)
            {
                if([[outString substringWithRange:r] isEqualToString:@"<li>"])
                {
                    outString = [[outString stringByReplacingCharactersInRange:r withString:[NSString stringWithFormat:@"\n %d. ",index++]] mutableCopy];
                }
                else
                    [outString deleteCharactersInRange:r];
            }
        }
    }
    return outString; 
} 
```

# c# - Skype 自动阻止 c# 调试项目

> ID：16207925
> 
> 赞同：1
> 
> 时间：2013-04-25T06:33:29.333
> 
> 标签：c#, skype, access-denied, skype4com

由于过去几天对 Skype 进行了更新 - 我的 ac# 项目无法再连接到 Skype。Skype.Attach() 通常都是需要的，但现在当我运行调试项目时，它无法连接。

Skype 确实将该项目添加到被拒绝的应用程序列表中，并将允许它的选项显示为灰色。因为我在网上找不到任何东西 - 这里有人知道原因吗？我有 3 个 c# Skype 项目，没有一个可以通过 Visual Studio 运行来连接——它们现在都被阻止了。奇怪的是，如果我在 VS 之外运行项目 exe - Skype 允许它。所以我可以发布我的应用程序但不能测试该死的东西。

请有任何想法。我的防火墙已关闭，没有其他任何更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:51:52.210

布亚。似乎 Skype 会自动阻止 Visual Studio 的调试应用程序，除非您转到“属性”>“调试”>“取消选中启用 Visual Studio 托管进程”。

# php - 通过php为hotmail发送邮件时消息正文为空白

> ID：16207927
> 
> 赞同：0
> 
> 时间：2013-04-25T06:33:31.740
> 
> 标签：php

除了 hotmail 之外，所有帐户的邮件都很好。在 hotmail 中，邮件正文变得空白。但是在查看查看源时，邮件正文正在显示。请帮助我们是否需要更改 hotmail 的任何设置

```
function Trigger_WelcomeEmail(&$tNG) {

global $DID;

$emailObj = new tNG_Email($tNG);
$emailObj->setFrom("test <test@test.com>");
$emailObj->setTo("{email}");
$emailObj->setCC("");
$emailObj->setBCC("test@test.com");
$emailObj->setSubject("Smile! You Were Successfully Registered for test.com");

$emailObj->setContentFile("welcomeUS.html");

$emailObj->setEncoding("ISO-8859-1");
$emailObj->setFormat("HTML/Text");
$emailObj->setImportance("Normal");
return $emailObj->Execute();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:45:09.307

通常将标头设置为 Content-type:text/html

也许是因为您的代码读错了您的代码；$emailObj->setFormat("HTML/文本"); 有那个倒退。可能只是在黑暗中拍摄，但值得一试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:46:40.310

Check to make sure you aren't sending two newline characters in a row in the welcomeUS.html file. This will close the body of the email and the remainder of the text might be ignored.

Some email service providers might ignore that issue automatically when they see more content being delivered after the newlines, but hotmail may not.

# xml - 用于分组元素的 XSLT 转换

> ID：16207934
> 
> 赞同：1
> 
> 时间：2013-04-25T06:33:45.713
> 
> 标签：xml

我有以下要求，我的输入 XML 如下

```
<data>
    <POnumber> 11111</POnumber>
    <deliverynumber> 12345</deliverynumber>
    <statuscode> 001</statuscode>
    <productid> TV</productid>
    <quantity> 23</quantity>
</data>
<data>
    <POnumber> 11111</POnumber>
    <deliverynumber> 12345</deliverynumber>
    <statuscode> 001</statuscode>
    <productid> Mobile</productid>
    <quantity> 50</quantity>
</data>
<data>
    <POnumber> 23423</POnumber>
    <deliverynumber> 234242</deliverynumber>
    <statuscode> 005</statuscode>
    <productid> dvd</productid>
    <quantity> 10</quantity>
</data> 
```

***输出 XML 应该是***

```
<data>
    <POnumber> 11111</POnumber>
    <deliverynumber> 12345</deliverynumber>
    <statuscode> 001</statuscode>
    <product>
        <id>TV</id>
        <quantity>23</quantity>
    </product>
    <product>
        <id>Mobile</id>
        <quantity>50</quantity>
    </product>    
</data> 
<data>
    <POnumber> 23423</POnumber>
    <deliverynumber>234242</deliverynumber>
    <statuscode> 005</statuscode>
    <product>
        <id>dvd</id>
        <quantity>10</quantity>
    </product>
</data> 
```

我们可以通过 XSLT 转换实现上述目标吗？如果是，请帮忙，我是 XSLT 的新手。如果 POnumber、deliverynumber 和 statuscode 元素找到它们对应的匹配项，我们应该在数据节点内对产品 id 和数量进行分组。

# java - facebook api for android "session.isOpened();" 总是返回假

> ID：16207935
> 
> 赞同：1
> 
> 时间：2013-04-25T06:33:48.227
> 
> 标签：java, android, facebook

我是 android facebook api 的新手，我想在墙上贴上带有标签的剪切图像，但会话总是返回 false。我已经完成了密钥哈希等的所有步骤。

```
 // start Facebook Login
      Session.openActiveSession(this, true, new Session.StatusCallback() {

        // callback when session changes state
        @Override
        public void call(Session session, SessionState state, Exception exception) {
            if (session.isOpened()) {
                Toast.makeText(getApplicationContext(), "da ho tost ka kana", Toast.LENGTH_LONG).show();
                publishStory();
                // make request to the /me API
                Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

                  // callback after Graph API response with user object
                  @Override
                  public void onCompleted(GraphUser user, Response response) {
                      if (user != null) {
                          publishStory();
                          Toast.makeText(getApplicationContext(), "Hello " + user.getName() + "!", Toast.LENGTH_SHORT).show();
                          com.actionbarsherlock.app.ActionBar actionBar = getSupportActionBar();
                          actionBar.setTitle(user.getFirstName());
                        }
                  }
                });
            }
        }
      }); 
```

这是关于活动结果的

```
 @Override
      public void onActivityResult(int requestCode, int resultCode, Intent data) {
      super.onActivityResult(requestCode, resultCode, data);
      Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
      } 
```

session.isopened(); 总是返回假；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T06:28:51.670

当我从设备中删除 Facebook 应用程序时，它就可以工作了。为了使用 Facebook 应用程序，您应该创建一个版本密钥。考虑这些链接

[Facebook API 登录失败，手机上安装了 FB 应用程序](https://stackoverflow.com/questions/10516401/facebook-api-login-fails-with-fb-app-installed-on-phone)

和

[应用程序被错误配置为使用 Release Key Hash 登录 Facebook](https://stackoverflow.com/questions/13281913/app-is-misconfigured-for-facebook-login-with-release-key-hash)

和

回答两个这个问题

[Android-Facebook 应用程序的密钥哈希](https://stackoverflow.com/questions/4388992/key-hash-for-android-facebook-app)

# c - 与 glibc 中的正则表达式（锚点）不一致

> ID：16207937
> 
> 赞同：0
> 
> 时间：2013-04-25T06:33:50.740
> 
> 标签：c, regex, glibc

我在 C 中尝试了一些正则表达式的东西，即尝试处理文本文件中的一行：

```
MY NAME IS   ;;JOHN 
```

我在 sscanf 的格式参数中使用`sscanf`并匹配。`%s %s %s %[^;]`当我用[Rubular](http://rubular.com/)进行测试时（也就是说，我输入`[^;]`在“您的正则表达式：”字段和`;;test`“您的测试字符串：”字段中输入），它与`test`数据匹配。

然而，随着线

`sscanf("MY NAME IS ;;JOHN", "%s %s %s %[^;], str1, str2, str3, str4)`,

第四个字符串`str4`实际上不匹配。也就是说，`sscanf`返回`3`。据我所知，正则表达式`[^;]`匹配分号以外的任何字符，那么为什么它似乎`sscanf`不匹配任何字符`;;JOHN`任何字符？

这只是一个问题`sscanf`，还是 glibc 出于某种原因会以不同的方式执行正则表达式？是那个吗`sscanf`因为字符串中的第一个字符确实是分号，所以无法匹配第四个字符串，所以它不能完全匹配字符串？这就是它返回 3 的原因吗？

此外，如果我有一行喜欢`MY NAME IS DOE;;JOHN`和使用`sscanf`，该函数确实返回 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:46:21.157

Here, see what [the manual page for `sscanf()`](http://linux.die.net/man/3/sscanf) says about regular expressions:

To be clear, the quote above is empty since the word "regular" doesn't appear in the manual page. This is because the patterns used with `sscanf()` and friends are *not* regular expressions. You seem to expect them to be, which creates the confusion.

The character range syntax `%[]` is described like so:

> `[` Matches a nonempty sequence of characters from the specified set of accepted characters; the next pointer must be a pointer to char, and there must be enough room for all the characters in the string, plus a terminating null byte.
> 
> The usual skip of leading white space is suppressed. The string is to be made up of characters in (or not in) a particular set; the set is defined by the characters between the open bracket [ character and a close bracket ] character.
> 
> The set excludes those characters if the first character after the open bracket is a circumflex (^). To include a close bracket in the set, make it the first character after the open bracket or the circumflex; any other position will end the set.
> 
> The hyphen character - is also special; when placed between two other characters, it adds all intervening characters to the set. To include a hyphen, make it the last character before the final close bracket. For instance, [^]0-9-] means the set "everything except close bracket, zero through nine, and hyphen". The string ends with the appearance of a character not in the (or, with a circumflex, in) set or when the field width runs out.

# php - 如何在 PHP 中访问我的 foreach 循环之外的变量？

> ID：16207938
> 
> 赞同：0
> 
> 时间：2013-04-25T06:33:54.743
> 
> 标签：php

我在 while 循环中有一个 foreach 循环。就使用 $i 和 $i++ 进行迭代而言，我正在使用标准设置。这是我的代码（缩短）：

```
// Get a database object
$db = JFactory::getDBO();
date_default_timezone_set("America/Chicago");
$month = date('n');
$day = date('j');
$year = date('Y');

$currentDay = $month.'/'.$day.'/'.$year;
//echo $currentDay;

// create the list of accessories
$i = 0;
while($i < 20) {

    $yesterday = strtotime ( "-$i days" , strtotime ( $currentDay ) ) ;
    $yesterday = date ( 'n/j/Y' , $yesterday );

    $query = "SELECT * FROM #__cappz_homelinks WHERE date='{$yesterday}' ORDER BY id ASC";
    // Executes the current SQL query string.
    $db->setQuery($query);
    // returns the array of database objects
    $list = $db->loadObjectList();

    if($list[0]->date) {//if there's a date
        echo '<h2>';
        echo $yesterday;
        echo '</h2>';

        echo '<ul>';
        foreach ($list as $item) {
            echo '<li>';
            echo '<a target="_blank" href="'.$item->url.'">'.$item->headline.$i.'</a>';
            echo '</li>';
            $i++;
        }
        echo '</ul>';
    }
} 
```

我试图让 $i （在 foreach 循环内）在 foreach 循环运行时增加，但我的 PHP 脚本只是超时。当我将 $i++ 移到 foreach 之外时，它工作正常……但那当然不是我需要的。

*编辑*我刚刚发布了完整的代码。它使用 Joomla 数据库对象进行连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:43:01.403

这就是您如何使用 SQL LIMIT 而不是循环或计数器将您的列表限制为仅 20 个项目。

```
// Get a database object
$db = JFactory::getDBO();
date_default_timezone_set("America/Chicago");
$month = date('n');
$day = date('j');
$year = date('Y');

$currentDay = $month.'/'.$day.'/'.$year;
//echo $currentDay;

// create the list of accessories

$yesterday = strtotime ( "-$i days" , strtotime ( $currentDay ) ) ;
$yesterday = date ( 'n/j/Y' , $yesterday );

$query = "SELECT * FROM #__cappz_homelinks WHERE date='{$yesterday}' ORDER BY id ASC LIMIT 20";
// Executes the current SQL query string.
$db->setQuery($query);
// returns the array of database objects
$list = $db->loadObjectList();

if(count($list)>0 && $list[0]->date/*not sure if this is needed*/) {//if there's a date
        echo '<h2>';
        echo $yesterday;
        echo '</h2>';

        echo '<ul>';
        foreach ($list as $item) {
            echo '<li>';
            echo '<a target="_blank" href="'.$item->url.'">'.$item->headline.$i.'</a>';
            echo '</li>';
        }
        echo '</ul>';
} 
```

# asp.net - 如何仅验证空格的文本框？

> ID：16207940
> 
> 赞同：0
> 
> 时间：2013-04-25T06:34:02.307
> 
> 标签：asp.net, validation, space, requiredfieldvalidator

我在 aspx 页面中有一个 tex 框，我需要验证文本框。我怎么能在服务器端做到这一点。

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>

if(Textbox1.Text=="")
{
    lblError.Text ="Enter required field":
} 
```

当用户将文本框留空时，这是有效的。但是当他输入空格时，不会显示该消息。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:44:58.600

如果您使用 .net 4.0 或更高版本而不是以下工作。

```
if(string.IsNullOrWhiteSpace(Textbox1.Text))
{
      lblError.Text ="Enter required field";
} 
```

否则你必须手动检查......

```
int flag=0;
char[] c=Textbox1.Text.ToCharArray();
for(int i=0;i<c.length;i++)
{
    if(c[i]!=" ")
    {
       flag=1;
       break;
    }
}
if(flag==0 || Textbox1.Text==""|| Textbox1.Text==null)
      lblError.Text ="Enter required field"; 
```

这将检查空的 .null 和 TextBox 的空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:42:07.643

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<asp:RequiredFieldValidator ID="rfv" runat="server" ControlToValidate="TextBox1" 
    ErrorMessage="Enter required field" /> 
```

尝试使用必填字段验证器。我想这可能会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:40:54.957

服务器端

利用

```
 trim(textbox1.text)=="" 
```

像这样检查

```
if(trim(textbox1.text)=="")
   //textbox is blank 
```

## 编辑 1

我你必须检查单词之间的空格然后

```
var words = txtBox.Text.Split(' ');
if(words.Length>0)
 // there are spaces in the textbox 
```

## 编辑 2

或使用[string.IsNullOrWhiteSpace](http://msdn.microsoft.com/en-IN/library/system.string.isnullorwhitespace.aspx)

# android - ListView 标题不滚动

> ID：16207952
> 
> 赞同：0
> 
> 时间：2013-04-25T06:34:39.333
> 
> 标签：android

我实现了一个`listView`带有标题的。

但是，当我在标题布局上滚动时，页面不会向下滚动（滚动不会向下滚动页面）。

但是，当我滚动`listView`（位于标题布局的底部）时，页面向下滚动并且标题也会消失（如预期的那样）。

我可以实现，当我向下滚动标题布局时，页面将`scroll` `down`到`listView`?

这是我的代码：

```
 LayoutInflater inflater = getLayoutInflater();
        View header = inflater.inflate(R.layout.freinds_listview_header, (ViewGroup) findViewById(R.id.freind_header_layout_root));
        listView.addHeaderView(header, null, false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:48:29.067

请检查这个

```
 LayoutInflater inflater; = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View header = inflater.inflate(R.layout.freinds_listview_header, null);
    listView.addHeaderView(header); 
```

希望能帮助到你..

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T07:40:00.050

ListView 标头不应该随滚动数据一起浮动，这意味着，根据定义，标头视图保持不变，并且列表的顶部就像列表的特殊第一行一样。

如果您想创建一个浮动视图，在用户滚动列表时随用户一起向下滚动，您应该在列表视图旁边的布局中创建它，如下所示：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <View
        android:id="@+id/headerView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:background="@drawable/my_background_image" />

    <ListView
        android:id="@+id/listView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/headerView" />
</RelativeLayout> 
```

# c# - 阅读 csc.exe 的错误报告

> ID：16207953
> 
> 赞同：1
> 
> 时间：2013-04-25T06:34:42.513
> 
> 标签：c#, compiler-construction, csc

我们通过调用 csc.exe 从某些源的脚本运行编译

有没有办法在一些结构化的 xml 文件中获取错误信息？我的意思是，不解析标准输出。也许 csc.exe 中有一个选项来定义编译报告（我对此表示怀疑，因为我已经检查过 msdn 但奇迹发生了......）？

我需要的是确切的错误位置 File.cs(34,56) 例如...因为我们的脚本检查谁“拥有”该文件并向开发人员发送通知。

# ruby-on-rails - rails 3 使用文件夹名称作为 namspace 引发未初始化的常量错误

> ID：16207963
> 
> 赞同：0
> 
> 时间：2013-04-25T06:35:19.030
> 
> 标签：ruby-on-rails, ruby, namespaces, rails-3-upgrade, scope-resolution

我正在尝试将应用程序**从 rails 2.3 升级到 3.0**并且它有一个文件

```
app/utility/interface/import/import_statistics_manager.rb 
```

其中包含

```
class Utility::Interface::Import::ImportStatisticsManager         
//code here  
end 
```

我相信`Utility::Interface::Import`是其文件路径中的文件夹名称，但用作名称空间

此代码在 rails 2.3 中运行良好，但是当我尝试使用 rails 3.0.6 运行时，它会抛出 NameError

```
Error message:
   uninitialized constant Utility
Exception class:
   NameError 
```

仅供参考：rails 2.3 使用 ruby​​ 1.8.7，rails 3.0.6 使用 ruby​​ 1.9.2

如果我的理解不正确，请纠正我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:00:48.520

*供将来参考（请参阅对问题的评论）：*

它有助于将完整的`app`文件夹添加到自动加载路径中。

有关更多信息，请参阅[此帖子](https://stackoverflow.com/questions/14348891/rails-3-trouble-with-namespaces-custom-classes-uninitialized-constant)。

# data-distribution-service - RTI路由服务设置

> ID：16207964
> 
> 赞同：4
> 
> 时间：2013-04-25T06:35:18.947
> 
> 标签：data-distribution-service

我在让 RTI 路由服务与我的应用程序一起工作时遇到问题。

我创建了一个简单的 DDS 发布者应用程序和一个简单的 DDS 订阅者应用程序。应用程序通过 LAN 在 2 台不同的计算机上运行时进行通信，但我无法使用 RTI 路由服务让它们在 WAN 上工作。

我按照“RTI Routing Service - Getting Started Guide”中的“Example 8 - Using the TCP Transport with Routing Service”。我可以让 RTI Shapes Demo 在 RTI Routing Service 上运行。注意。我的应用程序使用与 RTI Shapes Demo 相同的域 ID

我的发布者在 PC1 上，订阅者在 PC2 上。我可以看到（使用 rtiddsspy）PC2 从 RTI 路由服务接收数据，但订阅者应用程序没有在 PC2 上收到通知。

在创建用于 RTI 路由服务的 DDS 应用程序时，有什么我必须特别注意的吗？

问候约翰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:11:21.940

> 我可以看到（使用 rtiddsspy）PC2 从 RTI 路由服务接收数据，但订阅者应用程序没有在 PC2 上收到通知。

根据这些信息，我想说最可能的原因是路由服务发布者和您的应用程序订阅者之间的 QoS 设置不匹配。您可以通过多种方式验证这一点：

*   在系统运行时使用分析器工具（如果您可以使用它）。它可以显示在每个实体上使用的 QoS 设置，以及进行 QoS 匹配分析以发现不匹配。
*   对您的应用程序 DataReader 使用默认 QoS 设置，这样就不太可能与您的任何路由服务 QoS 设置发生冲突。如果您的 DataReader 在调整后收到数据，那么您就知道 QoS 设置冲突是原因。

spy 使用的默认 QoS 设置不太可能导致这些类型的不匹配，这就是 spy*确实*收到消息的原因。

供您参考，您可以查看此[QoS 策略参考指南/备忘单](http://community.rti.com/rti-doc/500/ndds.5.0.0/doc/pdf/RTI_CoreLibrariesAndUtilities_QoS_Reference_Guide.pdf)。在第一页上，列中包含 的任何 QoS`Y`都`RxO`可能导致不匹配。

# php - 如何摆脱html冲突

> ID：16207966
> 
> 赞同：3
> 
> 时间：2013-04-25T06:35:49.760
> 
> 标签：php, html, tinymce

我正在使用 tinyMCE 编辑器发布我的消息，如果我输入任何**列表类型的消息**或使用 tinyMCE 手动输入任何`div`或`li`或`ul`项目，如果我列出了发送的消息列表，它会导致我设计冲突......

我正在使用`strip_tags`：

```
echo strip_tags($message,'</ul></li></p>'); 
```

但是即使我遇到了同样的问题，任何人都可以帮我解决这个问题吗？我的消息列表是这样的：

```
<ul><?php 
foreach($messages as $message)
{  ?>
 <li><?php 
     echo strip_tags($message,'</ul></li></p>');
     ?>
  </li>
}?>
</ul> 
```

我的信息会是这样的

```
$message = "
<ul>
    <li>Gautam</li>
    <li>S.Visser</li>
    <li>DaggNabbit</li>
</ul>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:48:14.250

who的输出`$message`应该是这样的：

```
Gautam</li>
S.Visser</li>
DaggNabbit</li>
</ul> 
```

是什么使 html 输出：

```
<ul>
 <li>Gautam</li>
    S.Visser</li>
    DaggNabbit</li>
  </ul>
  </li>
</ul> 
```

是什么使它不正确的html。

我不完全确定您要完成什么，但我认为如果您`striptags`这样使用：

`echo strip_tags($message,'<ul><li><p></ul></li></p>');`

你应该得到正确的html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:14:02.197

我已经尝试使用**html_entity_decode**并且它也在工作......我尝试过这样

```
<ul>
<?php 
   foreach($messages as $message)
   {  
      echo "<li>";
      echo html_entity_decode($message);
      echo "</li>";
   }
?>
</ul> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T06:49:49.953

你已经破坏了你的脚本......我已经修复了语法

```
<ul>
<?php 
foreach($messages as $message)
{  
    echo "<li>";
    echo strip_tags($message,'</ul></li></p>');
    echo "</li>";
}
?>
</ul> 
```

那是你想要的吗？

# asp.net-mvc - 实体类型没有定义键 - 代码优先

> ID：16207967
> 
> 赞同：10
> 
> 时间：2013-04-25T06:35:54.377
> 
> 标签：asp.net-mvc, entity-framework-4

我是 MVC 以及实体框架的新手。我搜索了很多并发现了一些类似的问题（例如[Entity Type Has No Key Defined](https://stackoverflow.com/questions/6290511/entity-type-has-no-key-defined)），但它们并没有解决我的问题。

```
namespace MvcAppInvoice.Models
{
    public class Customer
    {
        public int CustomerID { get; set; }
        public string FirstName { get; set; }
        public string SurName { get; set; }
        public virtual CustomerType Type { get; set; }
    }

    public class CustomerType
    {
        public int TypeId { get; set; }
        public string TypeName { get; set; }
        public virtual ICollection<Customer> customers { get; set; }
    }
} 
```

![添加控制器](https://i.stack.imgur.com/oBC0Q.jpg)

当我尝试添加控制器时，它会出现以下错误：

![错误](https://i.stack.imgur.com/yvzF3.jpg)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T07:16:38.473

`Id`通常，如果属性名为or ，则代码优先按约定隐式设置实体类型的键`TypeName+Id`。在您的情况下，`TypeId`它们都不是，因此您应该使用[KeyAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.keyattribute.aspx)或使用流畅的语法，使用[EntityTypeConfiguration.HasKey 方法将其明确标记为键](http://msdn.microsoft.com/en-us/library/gg671266%28v=vs.103%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-24T17:41:39.550

我有同样的问题。在找到适合我的解决方案之前，我重新启动了 3 次项目。我有一个手动创建的名为 UserContext 的公共类。当我运行向导添加 ADO 类时，向导生成了 UserContext 的部分类。我删除了我的 usercontext 类，并修改了 VS 为我生成的类。

```
namespace UserLayer.Models
{
    using System;
    using System.Data.Entity;
    using System.Data.Entity.Infrastructure;

    public class UserContext : DbContext
    {

        public DbSet<UserDetail> UserDetails { get; set; }
    }
} 
```

现在它可能在没有修改的情况下工作。也许删除我的课程版本会起作用。我不知道。回想起来，当我尝试添加控制器时遇到了您的错误。我怀疑这是 VS2012 中的一个错误，因为可以存在同名的部分类和公共类。目的是允许程序员扩展部分类的定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-18T11:57:21.877

添加命名空间

```
using System.ComponentModel.DataAnnotations; 
```

像这样将关键属性添加到您的 CustomerID

```
[Key]
public int CustomerID { get; set; } 
```

然后构建应用程序并尝试添加控制器。这将起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-28T11:36:36.293

运行所选代码生成器时出错，无法检索实体类型的元数据，没有定义键。

*   更重要的一件事是 sql 表只需要 [Id] 如果您使用其他主键，例如 [MenuId]，实体框架将起作用，但它不会。
*   您应该在模型上添加验证，即键和列顺序
*   column order = 1 因为在 [key] 将其增量增加 1 这就是为什么

模型

```
[Key]
        [Column(Order = 1)]
        public int RoleIdName { get; set; } 
```

然后在实体框架下创建一个控制器后构建它，它将工作

我希望它有帮助。

# javascript - 如何制作自己的属性 (HTML5)

> ID：16207968
> 
> 赞同：0
> 
> 时间：2013-04-25T06:35:59.723
> 
> 标签：javascript, html, attributes

我在 JS (moveableFunc) 中实现了一个可移动的 div 函数。我对每个 div（或元素）使用了 onclick="moveableFunc(event ,this)" 来移动它。我更喜欢将此函数用作属性，代码如下：

```
<div id="div1" data-option="moveable" class="div1">
    hello
</div> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:39:42.680

您可以仅为具有该属性的元素绑定`click`事件`window.onload`，例如：

```
window.onload = function () {
    var moves = document.querySelectorAll('[data-option="moveable"]');
    for (var i = 0; i < moves.length; i++) {
        moves[i].onclick = function (e) {
            e = e || window.event;
            moveableFunc(e, this);
        };
    }
}; 
```

`.querySelectorAll('div[data-option="moveable"]');`如果您知道这只会针对s，您甚至可以将选择器更改为`<div>`，这样它会加快搜索速度。

或者，如果您能够将您`moveableFunc`的参数重组为：

```
function moveableFunc(e) {
    // Use `this` to reference the element that was clicked
} 
```

然后您可以使用以下内容在循环中绑定事件：

```
moves[i].onclick = moveableFunc; 
```

当然，最好使用`addEventListener`而不是`onclick`绑定事件。这里有一些信息：[addEventListener vs onclick](https://stackoverflow.com/questions/6348494/addeventlistener-vs-onclick)

参考：

*   [https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)
*   [https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)

举个例子，使用 jQuery，它可以像这样完成：

```
$('[data-option="moveable"]').on("click", moveableFunc); 
```

（你修改了`moveableFunc`我之前说的参数）

# sql - 组合查询中的 SELECT INTO 子句

> ID：16207971
> 
> 赞同：-1
> 
> 时间：2013-04-25T06:36:15.247
> 
> 标签：sql, forms, oracle, plsql

我正在使用 Oracle 表单，在`WHEN-BUTTON-PRESSED`触发器中我使用`UNION`运算符组合两个查询结果，我的问题是如何使用`SELECT INTO`子句将选定的值分配给变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:50:31.597

SELECT 语句将与您在 plsql 中使用的相同。没有区别。请注意，它可能导致太多行异常。

```
select column_value into l_value
from some_table
where column_value = 'some_value'
union
select column_value
from other_table
where column_value = 'some_value'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-06T19:38:17.160

Oracle 中有两种类型的游标： 隐式 -- 使用单词 INTO -- 必须只返回一条记录 显式 -- 不使用 INTO -- 可以返回多条记录

如果您试图将许多记录放入隐式游标中，这是不可能的，必须使用显式游标并使用循环检查值。

DECLARE CURSOR c_data IS SELECT a FROM table_name; BEGIN FOR variable IN c_data LOOP message('Value is: ' || variable.a); 结束循环；

结尾;

# android - Android应用程序在摩托罗拉上崩溃无视原因 : 无法打开文件进行阅读

> ID：16207977
> 
> 赞同：9
> 
> 时间：2013-04-25T06:36:38.850
> 
> 标签：android, motorola

过去几周我一直在开发一个 Android 应用程序。我一直在三星 s3 和 HTC 上测试它，没有任何问题。

但是我带来了摩托罗拉蔑视，并在开始对其进行测试时，应用程序开始崩溃。在查看 logcat 后，我​​发现了以下可能导致崩溃的问题，即

```
<s3dReadConfigFile:75>: Can't open file for reading 
```

有什么可以帮我解决这个问题吗？为什么它在摩托罗拉而不是在任何其他 Android 设备上崩溃？

提前致谢。

这是完整的logcat

```
E 7183/Trace: error opening trace file: Permission denied (13)
D 7183/ActivityThread: setTargetHeapUtilization:0.25
D 7183/ActivityThread: setTargetHeapIdealFree:8388608
D 7183/ActivityThread: setTargetHeapConcurrentStart:2097152
D 7183/libEGL: loaded /system/lib/egl/libEGL_adreno200.so
D 7183/libEGL: loaded /system/lib/egl/libGLESv1_CM_adreno200.so
D 7183/libEGL: loaded /system/lib/egl/libGLESv2_adreno200.so
I 7183/Adreno200-EGLSUB: <ConfigWindowMatch:2087>: Format RGBA_8888.
E 7183/: <s3dReadConfigFile:75>: Can't open file for reading
E 7183/: <s3dReadConfigFile:75>: Can't open file for reading
D 7183/OpenGLRenderer: Enabling debug mode 0
I 7183/Adreno200-EGLSUB: <ConfigWindowMatch:2087>: Format RGBA_8888. 
```

之后没有任何反应，应用程序崩溃。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-16T00:17:51.563

不确定这是否值得赏金，但之前已经在 SO 上提出并回答了这个问题： [设备特定错误 - s3dReadConfigFile“无法打开文件进行读取。”](https://stackoverflow.com/questions/15280681/device-specific-error-s3dreadconfigfile-cant-open-file-for-reading)

这似乎是由设备中的 Adreno GPU 引起的错误。 [https://developer.qualcomm.com/discover/chipsets-and-modems/adreno-gpu](https://developer.qualcomm.com/discover/chipsets-and-modems/adreno-gpu)

每当您创建 GL Surface 时，GPU 都会导致此错误。该错误似乎已记录，但由 Quaalcom 提供的任何驱动程序处理它在 Galaxy S3 上很常见，但不会导致该设备崩溃。

也许 Quaalcom 的某个人知道为什么错误会在 Moto 上崩溃，但不知道三星。 [https://developer.qualcomm.com/contact](https://developer.qualcomm.com/contact)

我希望这对您有所帮助。我的直觉告诉我这是一条红鲱鱼：它不是导致你崩溃的原因。但是很难忽略崩溃应用程序中的错误消息。尽管如此，我还是建议在花太多时间追查这个错误之前寻找其他可能的罪魁祸首。在我的设备上，我制作的任何开放式 GL 游戏都会显示该错误，但不会导致崩溃或任何其他中断。它甚至只会在我拥有的 Samsun G3 上导致错误，而不是在我的其他（HTC）测试设备上。

# c# - 从表中读取数据并将其传递给 asp.net mvc3 中的控制器

> ID：16207988
> 
> 赞同：0
> 
> 时间：2013-04-25T06:37:13.490
> 
> 标签：c#, javascript, jquery, html, asp.net-mvc-3

我知道这是非常标准的过程，但是由于对创建表的方式有一些自定义要求，我很难找到一种从表中读取数据并将其传递回控制器的方法。

我使用数据库中的记录构建我的表，每条记录都包含 rowNo 和 columnNo，问题是每个原始数据可能有不同的列数。我找不到合适的插件来构建它，所以我创建了一个简单的方法来创建一个传递给视图的字符串。

只是为了了解我在这里谈论的内容是代码中的一个片段，您可以在其中看到我是如何创建的`<td>..</td>`：

```
sb.Append("<td>" + innerArray[a][0].QuestionText +
                                "<input type='textbox' value=" +
                                innerArray[a][0].FieldValue + "></td>"); 
```

我知道使用 StringBuilder 不是很聪明，`+`但现在它可以工作。因此，在构建我的字符串并将其传递给视图之后，我得到了这个：

![在此处输入图像描述](https://i.stack.imgur.com/YHhOG.png)

这是来自`View page source`：

```
 <tr>
     <td>alabala<input type='textbox' value=></td>
     <td colspan=2><input type='textbox' value=yes></td>
 </tr>
 <tr>
     <td colspan=3>alabala<input type='textbox' value=yes></td>
 </tr>
 <tr>
     <td colspan=3>alabala<input type='textbox' value=yes></td>
 </tr>
 <tr>
     <td>alabala<input type='textbox' value=no></td>
     <td>alabala<input type='textbox' value=no></td>
     <td>alabala<input type='textbox' value=no></td>
 </tr>
 <tr>
     <td>alabala<input type='textbox' value=no></td>
     <td colspan=2><input type='textbox' value=no></td>
 </tr>
 <tr>
     <td colspan=3>alabala<input type='textbox' value=></td>
 </tr>
 <tr>
     <td colspan=3>alabala<input type='textbox' value=no></td>
 </tr> 
```

这就是你所看到的 - 一个包含整个 HTML 代码的长字符串。

所有文本框都是可编辑的，所以我需要一种方法来读取每个文本框的数据并将其与 RowNo 和 ColumnNo 一起保存/传递，以便我可以将其保存回我的数据库中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T06:57:26.170

为什么不使用视图模型？您在控制器操作中使用此字符串构建器所做的事情绝对违背了您在 MVC 设计模式中可能拥有的所有良好实践。

因此，与往常一样，您可以从定义满足视图要求的视图模型开始：

```
public class ColViewModel
{
    public string RowNumber { get; set; }
    public string ColumnNumber { get; set; }
    public string QuestionText { get; set; }
    public string FieldValue { get; set; }
}

public class RowViewModel
{
    public List<ColViewModel> Columns { get; set; }
} 
```

好的，现在让我们继续填充这个视图模型并将其传递给视图：

```
public ActionResult Index()
{
    // in your question you have shown something called innerArray, so I assume you
    // already retrieved this from your database or something:
    SomeDomainModel[,] innerArray = ...

    var model = new List<RowViewModel>();
    for (var row = 0; row < innerArray.GetUpperBound(0); row++)
    {
        var rowModel = new RowViewModel
        {
            Columns = new List<ColViewModel>()
        };
        for (var col = 0; col < innerArray.GetUpperBound(1); col++)
        {
            rowModel.Columns.Add(new ColViewModel
            {
                RowNumber = innerArray[row, col].RowNo,
                ColumnNumber = innerArray[row, col].ColumnNo,
                QuestionText = innerArray[row, col].Question,
                FieldValue = innerArray[row, col].FieldValue,
            });
        }
        model.Add(rowModel);
    }

    return View(model);
}

[HttpPost]
public ActionResult Index(List<RowViewModel> model)
{
    ...
} 
```

最后在您相应的强类型视图中：

```
@model List<RowViewModel>
@using (Html.BeginForm())
{
    <table>
        @for (var i = 0; i < Model.Count; i++)
        {
            <tr>
                @for (var j = 0; j < Model[i].Columns.Count; j++)
                {
                    <td>
                        @Html.HiddenFor(x => x[i].Columns[j].RowNumber)
                        @Html.HiddenFor(x => x[i].Columns[j].ColumnNumber)
                        @Html.DisplayFor(x => x[i].Columns[j].QuestionText)
                        @Html.EditorFor(x => x[i].Columns[j].FieldValue)
                    </td>
                }
            </tr>
        }
    </table>

    <button type="submit">Save</button>
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T06:56:50.327

不要将 html 传递给您的视图。这是视图的责任。我首先会质疑您的数据库的架构（为什么数据库关心数据将如何由视图表示？）。假设我们在那里没有改变任何东西。这样做的方法是创建一个视图模型。我无法使用您提供给我们的信息对其进行编码（来自数据库的数据格式是什么？）。但这里是伪代码。

1.  控制器从数据库中检索记录
2.  Controller 为每个行记录创建一个 View Model（我们称之为 RowModel）并用列数据填充它。你最终得到一个列表。我们称之为 rowModels。
3.  控制器使用该数据调用视图`return View(rowModels)
4.  `@model List<RowModel>`视图在代码顶部声明了 a 。
5.  您的 Razor 代码在模型中的行中进行交互并构建 HTML。
6.  创建另一个控制器 Action `MyAction(List<RowModels)`。这将在提交时调用。只需遍历行并执行所需的任何数据库更新。

使用视图模型的另一个优点是您可以指定将用于字段的验证，而不是依赖（可能缺少）数据库模型验证。看到[这个](http://blogs.msdn.com/b/simonince/archive/2010/12/07/view-model-versus-domain-entity-validation-with-mvc.aspx)。

# perl - 为什么 IPC::Run3 无法在 Apache 环境中捕获任何标准输出？

> ID：16207989
> 
> 赞同：2
> 
> 时间：2013-04-25T06:37:15.850
> 
> 标签：perl, ipc, mason

```
%use IPC::Run3;
%my $a;
%run3 ['echo','hello'],\undef,\$a;
<% $a %> 
```

当我从独立脚本中使用时，上面的`mason`代码运行良好`Mason`，如`HTML::Mason::Admin`. 不幸的是，当运行时`perl_mode`， `$a`是一个**空字符串**。下面是我的`httpd.conf`

```
 Alias /mason_book /home/charlse/f/books/mason_book
 <Location /mason_book>
    SetHandler perl-script
    AddHandler perl-script .mas
    PerlHandler HTML::Mason::ApacheHandler
    PerlAddVar  MasonCompRoot  "mason_book => /home/charles/f/books/mason_book"
 </Location>
 <Directory "/home/chunywan/f/books/mason_book">
    Options Indexes FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
 </Directory> 
```

顺便提一句

```
 %use IPC::Run qw(run timeout);
 %my @cmd=qw(echo hello world);
 %my ($in,$out,$err);
 %run(\@cmd, \$in, \$out, \$err) or die "cat: $?";
 <pre>
   out <% $out %>
 </pre> 
```

我只是尝试`IPC::Run`在独立模式和`mod_perl`模式下都运行良好。看来我必须更新我所有的源代码才能使用`IPC::Run`而不是`IPC::Run3`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-19T16:09:32.197

我相信解决方案是暂时重新打开 STDIN/STDOUT，然后在命令完成后将其关闭。

```
use IPC::Run3;
my $a;

#save off existing stdin/out
my ($save_stdin,$save_stdout);
open $save_stdin, '>&STDIN';
open $save_stdout, '>&STDOUT';

#open it again as the "normal things"
open STDIN, '>&=0';
open STDOUT, '>&=1';
run3 ['echo','hello'],\undef,\$a;

#clean up after yourself
close(STDIN);
close(STDOUT);
open STDIN, '>&', $save_stdin;
open STDOUT, '>&', $save_stdout; 
```

我在 IPC::Open3 遇到了同样的问题并在这里解决了：[https ://stackoverflow.com/a/24311232/312208](https://stackoverflow.com/a/24311232/312208)

# java - java忽略命令行参数中的代理

> ID：16207990
> 
> 赞同：0
> 
> 时间：2013-04-25T06:37:16.853
> 
> 标签：java, maven, proxy

我正在尝试用 maven 构建一些 .jar 包。由于我通过代理服务器连接到 Internet，我的命令如下所示：

```
mvn -DargLine="-Dhttp.proxyHost=my.proxy.com -Dhttp.proxyPort=8080" install 
```

这样由此创建的所有其他进程都将使用这些设置。

但是，在 TESTS 阶段，fork 进程尝试下载一些包，即使它的参数中**有**代理设置（`ps ax | grep java`显示），我可以看到`netstat -ntp`这个进程直接连接到存储库而忽略了代理设置。

`tcpdump`显示没有与 8080 的连接。

有任何想法吗？

**升级版：**

所以，基本上我正在尝试构建 JBoss。据我了解，它由不同的子系统组成，应该单独构建。例如，我想构建 jboss-as-cmp。我没有 DargLine 的命令：

```
cd /root/jboss/jboss-eap-6.1.0.Alpha/jboss-eap-6.1-src/cmp
mvn install 
```

我添加到 /root/.m2 中的 mvn settings.xml

```
<proxies>
   <proxy>
      <active>true</active>
      <protocol>http</protocol>
      <host>my.proxy.com</host>
      <port>8080</port>
   </proxy>
</proxies> 
```

我读过，surefire 插件也可以配置为使用代理，所以在我的 jboss-as-cmp 的 pom.xml 中我添加了

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
           <includes>
                <include>org/jboss/as/cmp/**/*TestCase.java</include>
            </includes>
                <systemPropertyVariables>
                   <http.proxyHost>my.proxy.com</http.proxyHost>
                   <http.proxyPort>8080</http.proxyPort>
                </systemPropertyVariables>
        </configuration>
    </plugin> 
```

我的mvn版本

```
Apache Maven 3.0.5 (rNON-CANONICAL_2013-04-24_16-52_root; 2013-04-24 16:52:00+0300)
Maven home: /usr/share/apache-maven-3.0.5
Java version: 1.7.0_19, vendor: Oracle Corporation
Java home: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.19.x86_64/jre
Default locale: en_GB, platform encoding: UTF-8
OS name: "linux", version: "3.8.6-203.fc18.x86_64", arch: "amd64", family: "unix" 
```

环境变量：

```
M2_HOME=/usr/share/apache-maven-3.0.5
PATH=/usr/share/apache-maven-3.0.5/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin 
```

我没有为 jboss-as-cmp 更改 pom.xml 中的任何其他设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:45:18.767

通常要使用代理，您应该在 user-home-dir/.m2/settings.xml 中的 settings.xml 中定义它们

示例是：

```
<settings>
  <proxies>
   <proxy>
      <active>true</active>
      <protocol>http</protocol>
      <host>proxy.somewhere.com</host>
      <port>8080</port>
      <username>proxyuser</username>
      <password>somepassword</password>
      <nonProxyHosts>www.google.com|*.somewhere.com</nonProxyHosts>
    </proxy>
  </proxies>
  </settings> 
```

见[http://maven.apache.org/guides/mini/guide-proxies.html](http://maven.apache.org/guides/mini/guide-proxies.html)

# java - Android OpenCV：使用 feature2d 绘制匹配

> ID：16207993
> 
> 赞同：5
> 
> 时间：2013-04-25T06:37:21.830
> 
> 标签：java, android, opencv

我无法让这个功能工作。基本上我正在做特征检测并与参考图像匹配。我想在我的输入图像上覆盖匹配的特征。这是我的代码：

```
public Mat startProcessing(Mat inputImage) {

    Imgproc.cvtColor(inputImage, rgb, Imgproc.COLOR_GRAY2RGB);
    myFeatures.detect(rgb, keypoints);
    descriptorExtractor.compute(inputImage, keypoints, imageDescriptors);
    descriptorMatcher.match(templateDescriptors, imageDescriptors, matches);

    Features2d.drawMatches(rgb, keypoints, templateImage, templateKeypoints, matches, rgb); 

    Imgproc.cvtColor(rgb, outputImage, Imgproc.COLOR_RGB2RGBA);
    return outputImage;
} 
```

问题出在 Features2d.drawMatches 上。根据我得到的 Android 错误，某些尺寸没有对齐。说实话，我什至不确定`drawMatches`应该如何在 Android 上工作，因为任何地方都没有文档。

我想要做的是在 inputImage 上绘制匹配。我已经`Feature2d.drawKeypoints`开始工作了，但我不确定如何转换`MatOfDMatch matches`为`MatOfKeypoint`对象。此外，我什至不确定 MatOfDMatch 是否是这样工作的——它内部是否有一些与描述符相对应的关联性？

很抱歉到处都是，我很难将 OpenCV 与 Android 一起使用。那里的 C++ 文档很好，但是 Android 材料的方式很少。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T22:15:27.080

我注意到的第一件事是您正在将图像从一种颜色空间转换为另一种颜色空间。这有点令人困惑。如果要在灰度图像上绘制匹配，则无需执行此图像转换。另一件事是，您正在检测 RGB 图像上的关键点，然后从原始图像中提取描述符（我可以看到它是灰度的）

另外，如果图像属于同一类型，我建议您检查函数内部。只需在日志`inputImage`对象中打印，看看两者是否属于类型`CV_8UC3`或等价物。基本上你的代码应该是这样的：

```
Mat imageOut = inputImage.clone();
Features2d.drawMatches(inputImage, keypoints, templateImage, templateKeypoints, matches, imageOut);
Highgui.imwrite("result_match.jpeg", imageOut); 
```

回答另一个你的问题：

问：我不确定如何将`MatOfDMatch`匹配项转换为`MatOfKeypoint`对象。A：你不需要这样做，因为`drawMatches`函数接收`MatOfKeypoint`输入图像和模板图像。然后，当您通过`MatOfDMatch`它时，它会在匹配的接收到的 kypoint 之间绘制匹配。

问：我什至不确定这是否是这样`MatOfDMatch`工作的——它内部不是有一些与描述符相对应的关联性吗？答：是的。如果您愿意`matches.toList(0).queryIdx`，`matches.toList(0).trainIdx`您将获得`inputImage`' 关键点的索引，该索引与第一个匹配的`templateImage`' 关键点匹配。

# testing - MonkeyTalk 是否支持长按以重新排序 TableView 中的单元格

> ID：16207995
> 
> 赞同：0
> 
> 时间：2013-04-25T06:37:33.360
> 
> 标签：testing, gesture, monkeytalk

MonkeyTalk 正在录制事件，但是在播放时它无法识别 UI 元素并且无法播放。是否可以在 iOS 应用程序中使用 MonkeyTalk 测试基于手势的功能，即长按以重新排序单元格。该应用程序的链接是 [https://github.com/mystcolor/jtgesturebasedtableviewdemo](https://github.com/mystcolor/jtgesturebasedtableviewdemo)。

所以请告诉我我们是否可以使用 MonkeyTalk 工具来测试具有此功能的应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T13:32:38.237

在monkeytalk中，您可以使用命令

*LongSelectIndex(itemNumber:int)* :void ~按索引长按一个项目。“itemNumber”：是要长按的项目的索引。

```
Table (monkeyID) LongSelectIndex (cellIndex) 
```

这是一个有用的monkeytalk命令参考：[https ://www.gorillalogic.com/monkeytalk-documentation/monkeytalk-language-reference/command-reference](https://www.gorillalogic.com/monkeytalk-documentation/monkeytalk-language-reference/command-reference)

在表格部分检查您的问题。

# android - 删除动态创建的 EditTexts

> ID：16207997
> 
> 赞同：1
> 
> 时间：2013-04-25T06:37:40.740
> 
> 标签：android, android-edittext

我已经编写了代码来生成动态 EditText。现在我想从中删除特定的 EditText，就像在 Android 中的联系人中一样。如何实现此功能？在显示imgaddress 的代码下方是单击按钮，我正在添加视图，即editText 和imageview 现在在单击取消时取消我想删除editText。

```
imgaddess.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                linearlay.addView(linearlayout(_intMyLineCount));
                _intMyLineCount++;
                Log.i("Test","Increment => "+_intMyLineCount);
            }
        });

        private LinearLayout linearlayout(int _intID)
    {
        LinearLayout LLMain=new LinearLayout(this);
        LLMain.setId(_intID);  

        LLMain.addView(editText(_intID));
        LLMain.addView(imageview(_intID));
        LLMain.setOrientation(LinearLayout.HORIZONTAL);
        linearlayoutList.add(LLMain);
        return LLMain;
    }   

private EditText editText1(int _intID) {
        EditText editText = new EditText(this);
        editText.setId(_intID);
        editText.setHint("Phone No");
        editText.setSingleLine();
        editText.setInputType(InputType.TYPE_CLASS_NUMBER);
        editText.setPadding(10, 0, 0, 0);
        editTextList1.add(editText);
        return editText;
    }

private ImageView imageview(int _intID) {
        ImageView imgview=new ImageView(this);
        imgview.setId(_intID);
        imgview.setImageResource(R.drawable.cancel_4);
        imageViewList.add(imgview);
        return imgview;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:39:53.713

我通常使用`editText.setVisibility(EditText.GONE);` 和

`editText = null;`应该把它垃圾收集起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:53:51.503

您可以从其父级中删除 EditText

```
((ViewGroup) editTextToBeDeleted.getParent()).removeView(editTextToBeDeleted); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:43:59.983

您可以像这样删除editText。

```
 imgaddess.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            LinearLayout LLMain = (LinearLayout)linearlayoutList.get((Integer)v.getTag());
            EditText editText = (EditText)LLMain.getChildAt(0);
            //Now hide it
            editText.setVisibility(View.GONE);
        }
    });
 private ImageView imageview(int _intID) {
    ImageView imgview=new ImageView(this);
    imgview.setId(_intID);
    //Adding Tag in order to get postion.
    imgview.setTag(_intID);
    imgview.setImageResource(R.drawable.cancel_4);
    imageViewList.add(imgview);
    return imgview;
} 
```

希望这会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T07:11:40.447

由于您的 imageview 和 Exittext 具有相同的 _intID。所以在 imageView 上设置 onclickListener。

单击 imageView 时，找到它的 ID，现在找到具有相同 ID 的 ExitText。（为此，您将维护一个添加的 ExitTexts 数组）

一旦我们有了与取消imageView对应的EditText，我们就可以执行exitText.setVisibility(EditText.GONE);

这是它的伪代码。

```
imageview.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
        // Iterate on ExitText array and check if(exitText.getID() == v.getID())
        //Now we have exitText with same ID as of imageView. So remove it.
        exitText.setVisibility(EditText.GONE);                
        }
    }); 
```