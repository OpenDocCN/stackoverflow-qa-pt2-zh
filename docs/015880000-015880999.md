# StackOverflow 问答 15880000-15880999

# iphone - iOS 6.1 中的 iPad 应用程序方向未更改

> ID：15880004
> 
> 赞同：1
> 
> 时间：2013-04-08T13:12:57.380
> 
> 标签：iphone, ios, ipad, orientation

我在两个方向都开发了 ipa 应用程序，但`- (BOOL)shouldAutorotate {return YES;}` 没有被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:18:44.400

使用`UINavigationController`可能会干扰 的方向`viewControllers`，为了使其工作，您可以实现自定义 NavigationController 并在您的应用程序中使用它。您还应该确保您没有将子视图添加到您的窗口，如果您使用`subView`您的，`UIWindow`那么您将在控制台上收到警告。`Application windows are expected to have a root view controller at the end of application launch`，如果您使用`subview`. 正确的做法是

```
self.window.rootViewController = yourRootController; 
```

[按照我实现 UINavigationController 的答案，](https://stackoverflow.com/questions/15808532/how-to-allow-a-particular-view-controller-to-support-for-both-landscape-and-port/15808746#15808746) 它将解决您的问题。

# c# - 未设置 PriorityAttribute 时，测试优先级的默认值是多少？

> ID：15880005
> 
> 赞同：1
> 
> 时间：2013-04-08T13:13:00.417
> 
> 标签：c#, .net, unit-testing, tfs, mstest

在 TFS 构建服务器上，我想运行没有设置 PriorityAttribute 的测试和将优先级设置为 5 的测试。如何在测试“没有设置优先级”的“测试用例过滤器”中写入？

我试过`Priority=0`and `Priority=-1`，但它似乎不包括没有 PriorityAttribute 的测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T11:51:15.823

我检查了 mstest.exe 的输出。原来优先级的默认值是 2147483647。

# asp.net-mvc-3 - 操作并停留在页面上

> ID：15880011
> 
> 赞同：0
> 
> 时间：2013-04-08T13:13:13.567
> 
> 标签：asp.net-mvc-3

我正在构建一个 ASP.NET MVC3 应用程序，在其中打印一些文件。这是我进行打印的代码部分：

```
public ActionResult Barcode(string DocumentID)
{
    barkod = new Barcode(DocumentID);
    MemoryStream ms = new MemoryStream();
    barkod.image.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
    Print(barkod);
    return Redirect("Home/Index");
} 
```

这可能很愚蠢，但我怎么能只打印而不在这里做任何其他事情，没有重定向或其他任何事情？

我尝试`EmptyResult`并返回 null，但它给了我空白页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:24:05.883

既然您似乎不想返回视图，那么为什么不通过 ajax 调用它：

```
$.post('@Url.Action("Barcode")', { DocumentID : docId }, function(result) {

}); 
```

您还可以包括控制器名称（例如`SomeController`）：

```
$.post('@Url.Action("Barcode","Some")', { DocumentID : docId }, function(result) {

}); 
```

如果打印操作不会花费很长时间，或者您只想返回一个状态，无论它是否花费太长时间：

```
public ActionResult Barcode(string DocumentID)
{
   // do your thing here
    return Json(the_status_a_boolean_or_some_other_type);
} 
```

在你的 js 上：

```
$.post('@Url.Action("Barcode","Some")', { DocumentID : docId }, function(result) {
    if (result) {
        console.log("it's a success!");
    }
    else {
        console.log("something wrong went bad");
    }
}).error(function() {
    console.log('post action cannot be completed');
}); 
```

# vb.net - datagridview 行选择；不更新到新选择

> ID：15880016
> 
> 赞同：0
> 
> 时间：2013-04-08T13:13:31.177
> 
> 标签：vb.net, datagridview

几乎完成了我的第一个 VB.Net 程序。效果很好，有一个问题。我的 datagridview 显示有关选择行的信息。但是，当用户选择不同的行时，它不会始终如一地改变。我一直在选择第三行，然后返回第二行以获取更新信息。

到目前为止，这是我的代码。有什么建议可以更新新的选择吗？

```
Private Sub DataGridView1_CellContentClick(ByVal sender As Object, ByVal e As DataGridViewCellEventArgs) Handles DataGridView1.CellContentClick
    Dim i As Integer
    i = DataGridView1.CurrentRow.Index
    Me.txtCJISCode.Text = DataGridView1.Item(5, i).Value
    Me.txtShortDescript.Text = DataGridView1.Item(10, i).Value
    Me.txtDescription.Text = DataGridView1.Item(23, i).Value

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:16:28.690

根据数据网格的选择模式，`CurrentRow`可能不是选定的。由于您正在使用它，`CellContentClick`因此使用事件 args 会更容易：

代替

`i = DataGridView1.CurrentRow.Index`

经过

`i = e.RowIndex`

# c++ - std::vector 比 std::unordered_set 快吗？

> ID：15880017
> 
> 赞同：10
> 
> 时间：2013-04-08T13:13:31.913
> 
> 标签：c++, performance, vector, stl, unordered-set

在我的自定义物理引擎中，最大的瓶颈是从空间分区（2D 网格）中获取所有物体的方法，并返回一个只包含指向 body 的唯一指针的集合。

```
template<typename T, typename V> bool contains(const T& mContainer, const V& mValue)
{
    return std::find(std::begin(mContainer), 
                     std::end(mContainer), mValue) != std::end(mContainer);
}

const vector<Body*>& GridInfo::getBodiesToCheck()
{
    bodiesToCheck.clear();
    for(auto& query : queries)
        for(auto& body : *query)
            if(!contains(bodiesToCheck, body)) bodiesToCheck.push_back(body);
    return bodiesToCheck;
} 
```

使用分析器表明瓶颈在于“包含”方法。

显然， an`std::unordered_set`将是这里的“理想”解决方案。但是，它比当前的解决方案慢很多。我也试过`google::dense_hash_set`，它比 快`std::unordered_set`，但仍然比当前的解决方案慢。

```
const unordered_set<Body*>& GridInfo::getBodiesToCheck()
{
    bodiesToCheck.clear();
    for(auto& query : queries)
        for(auto& body : *query)
            /*if(!contains(bodiesToCheck, body))*/ bodiesToCheck.insert(body);
    return bodiesToCheck;
} 
```

为什么“正确”的容器比 a 慢`std::vector`？

有什么办法可以进一步加快这种方法的速度吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:16:32.903

我能想到的有两种可能：

1.  您的数据元素数量足够少，因此线性搜索比哈希加比较查找更快。
2.  您正在使用相同的`contains`函数来查找 中的元素`unordered_set`，而不是使用成员函数`find`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:31:03.850

如果重复实体的数量与其他实体相比没有那么高，一种选择可能是将所有实体推入向量中，然后删除重复实体。但这需要 a`std::sort`后跟一个`erase(std::unique, end)`.

但它可能值得一试，考虑到你的向量似乎胜过 a `std::unordered_set`，它没有像 a 一样的内存位置和微不足道的访问`std::vector`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:40:55.383

我不确定我是否正确理解了这个问题，但似乎`std::vector`/上的查找会更慢`std::find`，但迭代可能比 with 更快`std::unordered_set`。如果是这种情况，并且您不受内存限制的限制，则可以混合使用两种方法：

保持 a`std::unordered_set`和 a`std::vector`与元素。在 内部查找`std::unordered_set`以确定元素是否已经存在，如果不存在，则将其添加到两个容器中。最后迭代`std::vector`.

请注意，您可以向两个容器提供有关它们将包含的“预期”元素数量的提示，这将减少内存分配/重新散列的数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-09T20:39:06.037

我遇到了一个类似的问题，其中线性搜索比哈希加比较查找更快。（支持马克的第一个答案）。

我尝试使用 BFS 来改善网格的 CPU 体素化。`std::unordered_set`用于标记访问的体素。但是，`unordered_set`它比线性迭代空间慢 100%。通过轮廓比较，我发现如果活动体素与所有访问体素的比率高于`3%`. 否则，BFS with`unordered_set`更好。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-08T13:22:42.443

这是您在 std 文档中找到的内容：

“unordered_set 容器比 set 容器更快地通过它们的键访问单个元素，尽管它们通常对于通过其元素的子集进行范围迭代的效率较低。”

好吧，因为 find 方法最终会遍历相当多的元素，这可能就是原因......

也许如果你使用了一个 costum 散列函数，你应该改进它以使其更快......只有我能想到的......

# javascript - 当前要突出显示的菜单

> ID：15880019
> 
> 赞同：0
> 
> 时间：2013-04-08T13:13:42.427
> 
> 标签：javascript, jquery

我有这个导航栏和一个本地存储脚本，它通过单击下一个或上一个来翻阅列表。当您第一次进入页面时，Overview 是要显示的第一个页面，默认情况下会突出显示（class=first）。

直到您在概览页面并单击 Next Previous 一切正常，但是当您在另一个导航菜单（例如 Qualifications）中然后单击 Next/Previous 时，页面将重定向到概览页面。它应保留在“资格”页面中，并且应突出显示资格菜单。

提出了一个想法？单击下一步>>查找导航的第x个元素>>获取url，重定向到URL。您的帮助将不胜感激。（仅供参考-单击下一个以前的更改网址）

附上图片来帮助你。

[http://oi48.tinypic.com/2lo6mhe.jpg](http://oi48.tinypic.com/2lo6mhe.jpg)

```
<div id="nav">
    <ul>
        <li class="first"><a href="on-click-tab.html">OVERVIEW</a></li>
        <li><a href="on-click-tab1.html">PERSONAL DETAILS</a></li>
        <li><a href="on-click-tab2.html">QUALIFICATION</a></li>
        <li><a href="on-click-tab3.html">REFERENCES</a></li>
    </ul>
</div>

<script>
    // this will get the full URL at the address bar
    var url = window.location.href; 

    // passes on every "a" tag 
    $("#nav a").each(function() {
        // checks if its the same on the address bar
        if(url == (this.href)) {
            $('ul li.first').removeClass('first');
            $(this).closest("li").addClass("current");
        }
    });
</script>

<div class="next">
    <input type="image" src="/images/button-right.gif" name="Next" id="Next" value="Next »" onclick="javascript:GetNext();">
</div> 
```

-

```
function GetNext(){  
$("#no-more").html(" ");
var Pointer = localStorage.getItem('0');
Pointer++;
if (localStorage.getItem(Pointer) === null) {
    $("#no-more").html("There are no further applicants from your list").addClass('message-nm');
} else {
    var NextURL = localStorage.getItem(Pointer);
        localStorage.setItem('0', Pointer); 
    var totalItems = localStorage.length -1 ;
    var GoURL= NextURL.substring(NextURL.indexOf('~')+1);
    window.location.replace( GoURL ) ;
    $("#no-more").html('Working...').addClass('message-nm');
}
}

var totalItems = localStorage.length -1 ;
$("#progress").html(localStorage.getItem("0") + " of " + totalItems); 
```

# c++ - 在 C++ 中编辑文件时出现奇怪的结果

> ID：15880022
> 
> 赞同：0
> 
> 时间：2013-04-08T13:13:45.283
> 
> 标签：c++, fstream

几个星期以来，我一直在为 Xbox 游戏使命召唤：现代战争 3 开发一个随机类生成器。在这个游戏中，不同的武器有不同的等级，随着你使用武器的次数增加，等级会增加。我将武器及其级别存储在一个文本文件中，该文件将数据存储在不同的行中，格式为

```
weapon-weapon_level 
```

所以武器等级为 8 的 M4A1 看起来像：

```
m4a1-8 
```

（武器都是小写的，没有标点和空格）。

我已经编写了创建文件和读取文件的方法，但是我想要一个编辑文件的方法，所以用户输入他们想要更改其级别的武器，然后输入新级别。这是我到目前为止所拥有的：（该文件名为“weaponlevels.txt”）

```
void WeaponLevelFile::editFile()
{
string line;
string weapon;
string weaponent;
string weaponlevel;
string temp;
cout<<"Please enter the weapon whose level you wish to change. Enter the name in lowercase, with "<<endl;
cout<<"no spaces or punctuation except full stops. E.g. SCAR-L becomes scarl and Barrett .50cal "<<endl;
cout<<"becomes barrett.50cal."<<endl;
cin>>weaponent;              
cout<<"Please enter the new weapon level."<<endl; 
cin>>temp;
ifstream infile("weaponlevels.txt");
ofstream outfile("weaponlevels.txt"); 
while (getline(infile, line)) 
{
istringstream ss(line);   
getline(ss,weapon,'-');   
if (weapon == weaponent)  
{
ss>>weaponlevel;
weaponlevel=temp;
outfile<<weaponlevel<<endl;
infile.close();
outfile.close();  
}
} 
} 
```

但是这种方法不起作用；它所做的只是擦除文件（因此文件为空白）。为什么要这样做，什么是更好的方法？

编辑：@stardust_ 的回答效果最好，但仍然没有完全做到。这是代码：

```
#include <iostream>
#include <fstream>
#include <sstream>
using namespace std;

int main()
{
    string temp;
    string line;
    string weapon;
    string weaponent;
    string weaponlevel;
    cout<<"enter weapon"<<endl;
    cin>>weaponent;
    cout<<"enter level"<<endl;
    cin>>temp;
    ifstream infile("weaponlevels.txt");

    std::string in_str((std::istreambuf_iterator<char>(infile)),
                 std::istreambuf_iterator<char>());

    infile.close();

    stringstream infile_ss(in_str);

    while (getline(infile_ss, line)) 
    {
        istringstream ss(line);   
        getline(ss,weapon,'-');   
        if (weapon == weaponent)  
        {
            ss>>weaponlevel;
            weaponlevel=temp;
            infile_ss<<weaponlevel<<endl; 
        }
    } 

    ofstream outfile("weaponlevels.txt");
    outfile << infile_ss.str();
    outfile.close();
} 
```

它修改了“weaponlevels.txt”的正确部分，但并没有完全做到这一点。如果我`m4a1`作为武器和`7`武器级别进入，而不是成为`m4a1-7`它：

```
7
a1-3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:20:46.037

经过相当多的工作，这就是有效的：

```
#include <iostream>
#include <fstream>
#include <sstream>
using namespace std;

int main()
{
    string temp;
    string line;
    string weapon;
    string weaponent;
    string weaponlevel;
    cout<<"enter weapon"<<endl;
    cin>>weaponent;
    cout<<"enter level"<<endl;
    cin>>temp;
    ifstream infile("weaponlevels.txt");

    std::string in_str((std::istreambuf_iterator<char>(infile)),
                 std::istreambuf_iterator<char>());

    infile.close();

    stringstream infile_ss(in_str);

   ostringstream out;
   while (getline(infile_ss, line))
   {
      istringstream ss(line);
      getline(ss,weapon,'-');
      out << weapon << '-';   // Write the first part of the line.
      if (weapon != weaponent)
      { // Not the correct weapon so just write the original information.
         ss >> weaponlevel;
         out << weaponlevel << endl;
      }
      else
      { // Found the desired weapon, change the level.
         out << temp << endl;
      }
   } 
```

我将整个字符串加载到一个字符串中，`ostringstream`并在字符串中找到了武器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:37:01.143

您是否尝试过使用指针在文件中搜索要替换的特定字符串？我还没有编写一个自己使用它的程序，但我知道它很常见。否则你只会覆盖整个文件。

请注意，我不完全确定您是否为此目的在代码中使用了指针，因为如上所述，我自己还没有使用它。但是，据我所见，我认为您没有这样做。如果我错了，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:48:57.460

你的代码有很多问题。您正在打开一个文件两次。您在读取 ​​ifstream 时正在循环关闭它们（？）。...

然而，算法明智的你可以打开文件进行读取，将整个内容读取为字符串，关闭文件，修改字符串，打开文件进行写入，写入字符串，关闭文件。

```
int main()
{
    cin>>temp;
    ifstream infile("weaponlevels.txt");

    std::string in_str((std::istreambuf_iterator<char>(infile)),
                 std::istreambuf_iterator<char>());

    infile.close();

    stringstream infile_ss(in_str);

    while (getline(infile_ss, line)) 
    {
        istringstream ss(line);   
        getline(ss,weapon,'-');   
        if (weapon == weaponent)  
        {
            ss>>weaponlevel;
            weaponlevel=temp;
            infile_ss<<weaponlevel<<endl; 
        }
    } 

    ofstream outfile("weaponlevels.txt");
    outfile << infile_ss.str();
    outfile.close();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-08T13:21:43.990

代替

```
 ifstream infile("weaponlevels.txt"); 
```

采用

```
 ifstream infile("weaponlevels.txt", ifstream::in) 
```

# ios - UINavigationController 生命周期问题 - viewWillAppear：没有被调用

> ID：15880031
> 
> 赞同：0
> 
> 时间：2013-04-08T13:14:03.613
> 
> 标签：ios, uinavigationcontroller, viewwillappear

我正在阅读一本 iOS 书籍，当我偶然发现一个我不完全理解的问题时，我一直在扩展一个示例程序以供练习。

我目前正在使用具有 rootView、detailView 和第三级视图的 UINavigationController，我打算将其变成模式视图控制器。

一切都按预期工作。我的 rootViewController 是一个 UITableView，它允许用户选择一行。该行将为显示的给定对象打开一个 detailViewController：

1.  项目标题
2.  项目序列号
3.  项目价值
4.  购买日期

在这个 DetailViewController 上有一个“更改购买日期”按钮，它显示另一个 ViewController 以选择新日期：
![在此处输入图像描述](https://i.stack.imgur.com/2PrrU.png)![在此处输入图像描述](https://i.stack.imgur.com/NpGu1.png)

选择一个日期并点击“设置购买日期”按钮后，我让 viewWillDisappear 方法将更改保存到第三个 ViewController 中的项目对象，然后从堆栈中弹出一个视图以返回到 DetailViewController：
文件：PurchaseDateViewController.m：

```
- (void) viewDidDisappear:(BOOL)animated {

    [super viewWillDisappear:animated];

    // Clear first responder
    [[self view] endEditing:YES];

    // "Save" the changes made to the creationDate
    [_item setDateCreated:[purchaseDatePicker date]];

    /* Debugging Log */
    // Create a NSDateFormatter that will turn the date into a simple string
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
    [dateFormatter setTimeStyle:NSDateFormatterNoStyle];

    // NSLogging
    NSLog(@"Original Date: %@", [dateFormatter stringFromDate:_itemsOldDate]);
    NSLog(@"DatePicker Date: %@", [dateFormatter stringFromDate:[purchaseDatePicker date]]);
    NSLog(@"Stored Date: %@", [dateFormatter stringFromDate:[_item dateCreated]]);

    // Reload the DetailViewController to update the changes if the NavigationController is used to return to the DetailViewController

}

#pragma mark Action Methods to Update the Data Source
- (IBAction)setPurchaseDate:(id)sender {

    // "Save" the changes made to the creationDate
    [_item setDateCreated:[purchaseDatePicker date]];

    // Move back 1 level on the NavigationController Stack
    [[self navigationController] popViewControllerAnimated:YES];

}

- (void)cancelChange {

    // "Reset" the changes made to the creationDate
    [_item setDateCreated:_itemsOldDate];

    // Move back 1 level on the NavigationController Stack
    [[self navigationController] popViewControllerAnimated:YES];

} 
```

上面列出的所有方法都有效。

当使用“设置购买日期”按钮并且从堆栈中弹出 PurchaseDateViewController 时，DetailViewController 会立即更新。

但是，当我按下 NavigationController 后退按钮时，视图不会更新，并且旧日期仍然存在于 DetailViewController 上。真正奇怪的是，正如我的 NSLog 语句所证明的那样，Item Object 已经在幕后进行了更新。这让我相信由于某种原因 -viewWillAppear 不再被调用。

如果我再次点击 NavigationController 的后退按钮并重新选择同一行，则可以确认这一点。当我采用这种测试方法时，当从 rootViewController 重新进入 DetailViewController 时，日期会更新为新日期。由于 DetailViewController 已从 NavigationController 堆栈中删除，然后再次实例化（因此再次调用 DetailViewController 的 viewWillAppear），因此进行了更改。

为什么在这种情况下不调用 viewWillLoad 方法？使用 UINavigationControls 时为什么不存在更改，有没有办法显式重新加载视图？克服这个问题的推荐方法是什么？

在写这篇文章时，我确实找到了一种强制调用 viewWillAppear 方法的方法，但我觉得必须有一种更“标准化”的方法来克服这个问题。最佳做法是什么？

这是我用来解决问题的“作弊”：

```
PurchaseDateViewController.m

- (void)navigationController:(UINavigationController *)navigationController  willShowViewController:(UIViewController *)viewController animated:(BOOL)animated {
    [viewController viewWillAppear:animated];
}

- (void) viewDidDisappear:(BOOL)animated {

    [super viewWillDisappear:animated];

    // Clear first responder
    [[self view] endEditing:YES];

    // "Save" the changes made to the creationDate
    [_item setDateCreated:[purchaseDatePicker date]];

    /* Debugging Log */
    // Create a NSDateFormatter that will turn the date into a simple string
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
    [dateFormatter setTimeStyle:NSDateFormatterNoStyle];

    // NSLogging
    NSLog(@"Original Date: %@", [dateFormatter stringFromDate:_itemsOldDate]);
    NSLog(@"DatePicker Date: %@", [dateFormatter stringFromDate:[purchaseDatePicker date]]);
    NSLog(@"Stored Date: %@", [dateFormatter stringFromDate:[_item dateCreated]]);

    // Reload the DetailViewController to update the changes if the NavigationController is used to return to the DetailViewController
    [self navigationController:[self navigationController]  willShowViewController:_detailViewController animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:27:39.043

这会给你一个问题：

```
- (void) viewDidDisappear:(BOOL)animated {

[super viewWillDisappear:animated]; 
```

应该

```
- (void) viewWillDisappear:(BOOL)animated {

[super viewWillDisappear:animated]; 
```

错字？或者这能解决问题吗？

# c++ - C++ 使用不同的代码在同一程序中处理向量和列表的排序

> ID：15880036
> 
> 赞同：2
> 
> 时间：2013-04-08T13:14:17.307
> 
> 标签：c++, list, sorting, vector

我曾经`typedef vector<MyDatatype> ls;`通过仅更改 typedef 定义来启用列表和向量之间的切换。除了 sort 函数，所有的工作都很好，它对向量的实现方式不同。

```
void show(driver& ls)
{
    ls.sort(compare); //this line gives error
    driver::iterator iter=ls.begin();
    int i=1;
    while(iter!=ls.end())
    {
        cout<<i<<". "<<iter->name<<string(maxlength+1-(iter->name).size(),' ');
        streamsize prec=cout.precision(2);
        cout<<grade(*iter);
        cout.precision(prec);
        cout<<endl;
        i++; iter++;
    }
} 
```

做类似的事情：

```
if(typeid(ls)==typeid(list<string>)) ls.sort(compare);
else if(typeid(ls)==typeid(vector<string>)) sort(ls.begin(), ls.end(), compare); 
```

不会有任何好处。所以我的问题是：是否有可能测试类型并相应地使用合适的排序函数，还是我必须编写自己的排序函数（或者可能将向量转换为列表）？我找不到任何相关的线程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:20:43.907

使用函数重载：

```
template<typename T, typename C>
void dosort(std::vector<T>& v, C compare) {
    std::sort(ls.begin(), ls.end(), compare);
}

template<typename T, typename C>
void dosort(std::list<T>& v, C compare) {
    ls.sort(compare);
}

void show(ls& list) {
    dosort(list);

    //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:22:30.360

通常的方法是使用函数重载：

```
template <typename T, typename COMP>
void mySort(std::vector<T>& v, COMP c)
{
  std::sort(v.begin(), v.end(), c);
}

template <typename T, typename COMP>
void mySort(std::list<T>& l, COMP c)
{
  l.sort(c);
} 
```

# jquery - 如何使用具有深度限制的 jQuery find()？

> ID：15880037
> 
> 赞同：12
> 
> 时间：2013-04-08T13:14:17.540
> 
> 标签：jquery, find, depth

我需要使用 jquery 的“查找”选择器来获取所有具有“field_container”类的 div。问题是我不能深入 DOM 树。

这是我简化的 HTML 结构：

```
<div id='tab_0'>

 <div id='form_content'>

  <div class='field_container'>
   <span>Div 1</span>
   <div class='field_container'>
   <span>Div 1.1</span>
   </div>
  </div>

  <div class='field_container'>
   <span>Div 2</span>
  </div>

  <div class='field_container'>
   <span>Div 3</span>
  </div>

 </div> <!-- Closing form_content div//-->

</div> <!-- Closing tab_0 div//--> 
```

我有一个对“tab_0”div 的初始引用。从它开始，我需要获取所有“field_container” div，不包括子“field_containers”。

我试过这个：

```
$('#tab_0').children('.field_container') -> doesnt work, because the "field_container" divs arent direct children.

$('#tab_0').find('.field_container') -> doesnt work, because "Div 1.1" is also returned. I only need the first-level ones (Div1, Div2, Div3). 
```

我无法更改我的初始参考，它必须是“tab_0”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T13:21:52.147

有几种可能性可以解决这个问题。

一个相当快的方法是：

```
$('#tab_0').children('#form_content').children('.field_container') 
```

由于它的限制是每个只遍历一个级别进入 DOM 树。我不完全确定，但这应该比`find()`具有复杂选择器的 a 更快（但在每种情况下都更简单）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T13:21:30.370

对于比当前示例更复杂的过滤，您应该使用 filter。在这里，这可以解决问题：

```
$('#tab_0').find('.field_container').filter(function(){return $(this).parent()[0].id === "form_content"}).each(function(){...}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:16:56.677

嵌套是否一致？如果是这样，您可以这样做：

```
$('#tab_0').find('#form_content > .field_container'); 
```

如果没有，您可以这样做（尽管效率较低）：

```
$('#tab_0').find('.field_container:not(.field_container .field_container)'); 
```

# php - phpmailer - 以下 SMTP 错误：数据不被接受

> ID：15880042
> 
> 赞同：45
> 
> 时间：2013-04-08T13:14:32.790
> 
> 标签：php, email, smtp, phpmailer

我试图用 6 个小时来解决这个问题。但是没有任何意义。这是场景；有一个格式良好的`HTML`模板。

```
$mail_body = '
    <b>Message Num :</b> 769<br />
    <b>Message Date :</b> 2013-04-08 09:03:21<br />
    <b>Name :</b> John Doe<br />
    <b>Phone :</b> 123456789<br />
    <b>E-mail :</b> abcdf@somedomain.com<br />
    <b>Message :</b> Here is the message info<br />
'; 
```

这是收件人邮件的数组；

```
$recipients = array("abc@something.com","xyz@somtehing.com"); 
```

一切看起来都很好，可以发送电子邮件了。这是 phpmailer 配置；

```
$mail = new PHPMailer(); 
$mail->IsSMTP();
$mail->From = "noreply@something.com"; 
$mail->FromName = "TEST";
$mail->WordWrap = 50;

foreach($recipients as $mail_add) {
    $mail->AddAddress($mail_add);
}
$mail->IsHTML(true);
$mail->Subject = "TEST Subject";
$mail->Body = $mail_body;
if(!$mail->Send()) {
    echo $mail->ErrorInfo;
} else { 
        echo "Mail sent...";
} 
```

当我测试它时，一切都是一样的。但有时会发送电子邮件。有时它没有发送。给我以下错误：`The following SMTP Error: Data not accepted.`

我希望我解释

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2014-01-02T16:54:54.437

您的服务器不允许您配置不同的发件人和用户名：`$mail->From`例如`$mail->Username`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-08-29T01:21:52.630

对于将 Amazon SES 与 PHPMailer 结合使用的 AWS 用户，当您的“发件人”邮件发件人不是经过验证的发件人时，也会出现此错误。

要添加经过验证的发件人：

1.  登录到您的 Amazon AWS 控制台：[https ://console.aws.amazon.com](https://console.aws.amazon.com)

2.  从可用 AWS 应用程序列表中选择“Amazon SES”

3.  在“已验证发件人”下选择“电子邮件地址”->“验证新电子邮件地址”

4.  导航到该新发件人的电子邮件，单击确认电子邮件的链接。

你都准备好了。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-02-04T09:46:42.220

将 phpmailer 设置为在调试中工作，以查看通用消息“SMTP 错误：数据未接受”背后的“真实”错误，在我们的例子中，消息中的文本触发了 smtp 服务器垃圾邮件过滤器。

```
 $email->SMTPDebug = true; 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-03-08T16:22:47.623

有趣的是，我遇到了同样的问题，对我来说，问题是我的连接超时了。为了能够查看有关我的连接的更多详细信息，我添加`$mail->SMTPDebug = 4;`到我的 phpmailer（查找如何捕获调试，因为默认输出功能是 echo）。

结果如下：

```
SMTP -> get_lines(): $data was ""
SMTP -> get_lines(): $str is ""
SMTP -> get_lines(): $data is ""
SMTP -> get_lines(): timed-out (10 seconds)
SMTP -> FROM SERVER:
SMTP -> ERROR: DATA not accepted from server: 
```

默认超时设置为 10 秒。如果您的应用程序可以支持更多，请将此行添加到您的 phpmailer：

```
$mail->Timeout = 20; 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-12T15:36:28.777

超过一定大小的消息，通过$mail->Body 设置时会弄乱内容。

您可以对其进行测试，如果它适用于小消息，但不适用于较大的消息（超过 4-6 kB），那么这就是问题所在。

好像是$mail->Body的问题，所以可以通过$mail->MsgHTML($message)手动设置HTML body来解决这个问题。然后你可以尝试通过 $mail->AltBody 只添加非 html 正文。

希望我能提供帮助，请随时提供更多详细信息，信息。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-22T17:00:35.910

我只是在使用

```
$mail->Body    = $message; 
```

对于某些汇总的形式，PHP 正在返回错误：

SMTP 错误：数据未接受。SMTP 服务器错误：DATA END 命令失败详细信息：此邮件被归类为垃圾邮件，可能无法传递 SMTP 代码：550

我在 $mail->Body=$message 之后修复了添加此代码：

```
$mail->MsgHTML = $message;
$mail->AltBody = $message; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-05T15:06:57.547

尝试将端口设置为 26，这解决了我的“数据未接受”消息的问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-26T14:37:52.457

我在使用 phpMailer + Amazon SES 时遇到了这个错误。phpMailer 错误描述性不是很强：

```
2: message: SERVER -> CLIENT: 554 Transaction failed: Expected ';', got "\"
1: message: 
2: message: SMTP Error: data not accepted. 
```

对我来说，问题只是我有以下内容类型：

```
$phpmailer->ContentType = 'text/html; charset=utf-8\r\n'; 
```

但它不应该有换行符：

```
$phpmailer->ContentType = 'text/html; charset=utf-8'; 
```

...我怀疑这是我们旧版本的遗留代码。所以基本上，三重检查您添加的每个 $phpmailer 设置 - 最小的细节很重要。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-05-09T11:52:32.660

首先，您最好将调试设置为 TRUE：

> $email->SMTPDebug = true;

或临时更改 public $SMTPDebug 的值 = false; 在 PHPMailer 类中。

然后你可以在浏览器中看到完整的日志。对我来说，**每秒发送的电子邮件太多了**：

```
...
SMTP -> FROM SERVER:XXX.XX.XX.X Ok
SMTP -> get_lines(): $data was ""
SMTP -> get_lines(): $str is "XXX.XX.XX.X Requested action not taken: too many emails per second "
SMTP -> get_lines(): $data is "XXX.XX.XX.X Requested action not taken: too many emails per second "
SMTP -> FROM SERVER:XXX.XX.XX.X Requested action not taken: too many emails per second
SMTP -> ERROR: DATA command not accepted from server: 550 5.7.0 Requested action not taken: too many emails per second
... 
```

因此，我知道确切的问题是什么。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-11-19T02:50:17.630

我遇到了同样的问题。在我的实例中，发送邮件超时，因为我的 Exchange 服务器正在将电子邮件中继到 Internet 上的服务器。该服务器已超出其带宽配额。显然 php mailer 有一些内置的超时时间，而且还不足以看到实际的消息。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-18T06:08:53.980

我们通过 Gmail SMTP 服务器发送电子邮件，有时当我们达到**Gmail 发送限制**时，我们会从 PHPMailer 收到这个确切的错误。

您可以通过进入 Gmail 并尝试手动发送电子邮件来检查是否发生了同样的事情。在我们的例子中，它显示了关于发送限制的更有用的错误消息。

[https://support.google.com/a/answer/166852?hl=en](https://support.google.com/a/answer/166852?hl=en)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-07T13:15:21.077

在我的情况下，在 cpanel 中，我有“注册邮件 ID”选项，我在其中添加了我的电子邮件地址，30 分钟后它可以与简单的 php 邮件功能一起正常工作。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-06T09:06:33.223

如果您使用的是 Office 365 SMTP 网关，则“SMTP 错误：数据未接受”。是邮箱已满时您将得到的响应（即使您只是从邮箱发送）。

尝试从邮箱中删除一些邮件。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-03-07T12:32:05.553

就我而言，问题在于邮件的内容。当我将内容更改为没有 HTML 的更简单的内容时，它起作用了。但是在更新 phpmailer 后，一切都解决了。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-02-05T04:04:09.533

就我而言，我使用的是 AWS SES，我必须同时验证“FromEmail”和“Recipient”。一旦完成，我可以毫无问题地发送。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-06-01T07:25:46.910

## Mailgun sanbox 错误

`$PHPMailer->SMTPDebug = true;`我发现在使用 mailgun 沙箱域时，必须将电子邮件添加到授权收件人列表（位于沙箱域概述的右侧面板上）

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-03-02T15:29:57.977

当您使用stripslashes 或addslashesh 或real_escape_string 时，也会发生这种情况。

避免在电子邮件正文中使用这些内容，当您的电子邮件执行代码完成后，您可以在底部添加这些行。

# c++ - 在 WINDOWS 7 上执行 openCV 应用程序时出错

> ID：15880049
> 
> 赞同：0
> 
> 时间：2013-04-08T13:14:58.317
> 
> 标签：c++, eclipse, opencv

我将 eclipse 与 opencv 一起使用，我有这个简单的项目：

```
#include "opencv2/highgui/highgui.hpp"
#include <iostream>

using namespace cv;
using namespace std;

int main(int argc, char** argv)
{
  Mat im = imread(argc == 2 ? argv[1] : "lena.jpg", 1);
  if (im.empty())
  {
    cout << "Cannot open image!" << endl;
    return -1;
  }

  imshow("image", im);
  waitKey(0);

  return 0;
} 
```

根据eclipse，它似乎是正确的，并且编译得很好。但是，如果我尝试在 Eclipse 的调试模式下运行它，则什么也没有发生，如果我尝试执行 .exe，我会收到此错误：

![在此处输入图像描述](https://i.stack.imgur.com/lt9D8.png)

![在此处输入图像描述](https://i.stack.imgur.com/F3JKp.png)

编辑：这些图像是西班牙语，但错误与这篇文章中的错误完全相同：[opencv 2.4 error in windows 7 64 bit](https://stackoverflow.com/questions/11935422/opencv-2-4-error-in-windows-7-64-bit)

我正在使用 Windows 7 x86 的虚拟机上运行它。

PS：对不起我的英语！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:44:17.873

当 Eclipse 运行您的应用程序时，它可能会`lena.jpg`在该文件不存在的目录中查找。

确保将 JPG 与源文件放在同一个文件夹中，并且与**.exe**放在同一个文件夹中。

**你的代码看起来是合法**的，这个问题不应该发生。弄清楚到底发生了什么的最好方法是**使用调试器并找出哪些调用触发了错误**。

# jquery - 使用 jQuery 重命名引导选项卡

> ID：15880053
> 
> 赞同：2
> 
> 时间：2013-04-08T13:15:06.193
> 
> 标签：jquery, html, css, twitter-bootstrap

我已经建立了一个系统来使用 jQuery 动态创建新选项卡，以便在单击链接时创建一个新选项卡。每个选项卡的内容设置为文本框。是否可以将选项卡的标题更改为在文本框中输入的内容，理想情况下是在键入时而不是在单击 Enter 或其他按钮后？

我还有另一个问题，我不确定这是否需要一个新问题，但无论如何都可以。我还需要能够删除选项卡，最好是在单击链接时。我认为这是可能的，但我不太确定如何。到目前为止，我已经想到了一个 jQuery 函数，您可以将选项卡的 id 传递给它，它会删除链接和内容，但我真的不知道如何编码？

jsFiddle：http: [//jsfiddle.net/BenedictLewis/eYePA/](http://jsfiddle.net/BenedictLewis/eYePA/)

```
Info:
I am using Twitter Bootstrap with the theme Simplex from Bootswatch.
The CSS and JS files for Bootstrap are loaded from BootstrapCDN. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:31:43.270

尝试

```
$('#tabContent').on('keyup', 'input[id^="pageTitle_tab"]', function(){
    var index  = $(this).closest('.tab-pane').index();
    $('#tabHeaders li:eq(' + (index + 1) + ') a').html(this.value)
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/ysS2z/)

# android - 如何在 android 4.2 中使用横向模式

> ID：15880055
> 
> 赞同：1
> 
> 时间：2013-04-08T13:15:17.223
> 
> 标签：android, landscape

当我尝试运行我的程序时，我正在使用 android 4.2，它仅在纵向模式下工作。在横向模式下不显示任何内容。

我也使用过 [http://www.androidpeople.com/android-portrait-amp-landscape-difereent-layouts](http://www.androidpeople.com/android-portrait-amp-landscape-differeent-layouts)

[http://android.programmerguru.com/android-landscape-layout-example/](http://android.programmerguru.com/android-landscape-layout-example/)

但仍然没有成功。

我遵循的步骤

1.  用 layout-land 再创建一个文件夹，并在布局存在的地方保持不变。
2.  从 layout 复制 main.xml 并粘贴到 layout-land 文件夹中。
3.  在 layout-land -> main.xml 中又添加了一个按钮。
4.  在我的 android 设备上运行，但它仅以纵向模式显示。

请告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T09:04:47.197

确保两个不同文件夹（即 layout 和 layout-land）中的两个 XML 文件具有相同的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:31:44.977

```
created one more folder with layout-land and keep in same where layout is present.
copied main.xml from layout and pasted in layout-land folder.
added one more button in layout-land -> main.xml.
running in my android device but it's showing only in portrait mode. 
```

你做错了。`layout-land`仅当您的横向布局与被视为“默认”布局的横向布局**不同**时才应使用（这是`layout`文件夹中的布局）。如果您不需要不同的布局，则只需在`layout`文件夹中保留一个文件，它将以纵向或横向模式使用。

您可能还想检查您的清单文件并检查您是否有机会不在那里强制执行肖像。也“什么都不显示”是很奇怪的——我宁愿打赌你的默认布局在横向模式下渲染不正确，而不是 android 没有显示任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:29:44.763

在您的清单中尝试此操作以在横向模式下打开活动

```
 <activity
        android:name="com.example.newdatabase.MainActivity"
        android:label="@string/app_name" 
         android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="landscape"> 
```

# android - （重新）从堆栈中打开特定活动

> ID：15880056
> 
> 赞同：0
> 
> 时间：2013-04-08T13:15:18.640
> 
> 标签：android, android-activity, stack

是否有可能从堆栈中重新打开特定活动？所以说我打开活动a，然后是b，然后是c。我在开始新活动时没有完成 a 和 b。如果 a 按我的后退按钮而不覆盖它，我现在当然会去 B。

但是我想给一个按钮或者后退按钮来打开 A 或 B ，而与它在堆栈中的位置无关。这可以通过完成活动来实现（如果我完成 b，然后按 C 的后退按钮，我会去 A）。但我的一些活动我宁愿不完成。

我进行了研究，但找不到如何实现这一目标。这可能吗？

当然，如果活动处于活动状态，则需要进行检查，如果活动处于活动状态，则重新打开它或打开它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T13:28:27.563

您显然必须弄清楚要`Activity`打开哪个逻辑，但这应该可以实现您想要的

```
@Override
public void onBackPressed()
{
    super.onBackPressed();
    Intent intent = new Intent(CurrentActivity.this, ActivityYouWant.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
    startActivity(intent);
} 
```

如果这不是您要找的，请告诉我。

[旗帜](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_REORDER_TO_FRONT)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T22:43:27.870

***codeMagic***建议您可以在 Activity 堆栈中生成比您需要的更多活动的方式。这可能会导致**内存泄漏**或其他不良行为。你应该看看：

```
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.setFlags(Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK); 
```

甚至更好`finish()`的`Activities`.

# d3.js - d3.js ticks 函数提供了比需要更多的元素

> ID：15880058
> 
> 赞同：1
> 
> 时间：2013-04-08T13:15:20.217
> 
> 标签：d3.js

我有这个简单的线性比例：

```
var x = d3.scale.linear().domain([0, 250]); 
```

`x.ticks(6)`，正如预期的那样，返回：

```
[0, 50, 100, 150, 200, 250] 
```

但是，`x.ticks(11)`返回：

```
[0, 20, 40, 60, 80, 100, 120, 140, 160, 180, 200, 220, 240] 
```

当我想要的是：

```
[0, 25, 50, 75, 100, 125, 150, 175, 200, 225, 250] 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:33:16.753

我在序数刻度上有类似的问题，我只是编写了一些代码来在我的数据中选择均匀间隔的间隔。由于我希望它始终选择轴上的第一个和最后一个数据元素，因此我只计算中间部分。由于有些东西没有平均分配，而不是将残差放在一两个箱子里，我一边走一边把它分散到各个箱子里；直到没有剩余为止。

可能有一种更简单的方法可以实现这一点，但这是我所做的：

```
function getTickValues(data, numValues, accessor)
{
  var interval, residual, tickIndices, last, i;

  if (numValues <= 0)
  {
    tickIndices = [];
  }
  else if (numValues == 1)
  {
    tickIndices = [ Math.floor(numValues/2) ];
  }
  else
  {
    // We have at least 2 ticks to display.
    // Calculate the rough interval between ticks.
    interval = Math.floor(data.length / (numValues-1));

    // If it's not perfect, record it in the residual.
    residual = Math.floor(data.length % (numValues-1));

    // Always label our first datapoint.
    tickIndices = [0];

    // Set stop point on the interior ticks.
    last = data.length-interval;

    // Figure out the interior ticks, gently drift to accommodate
    // the residual.
    for (i=interval; i<last; i+=interval)
    {
      if (residual > 0)
      {
        i += 1;
        residual -= 1;
      }
      tickIndices.push(i);
    }
    // Always graph the last tick.
    tickIndices.push(data.length-1);
  }

  if (accessor)
  {
    return tickIndices.map(function(d) { return accessor(d); });
  }
  return tickIndices.map(function(i) { return data[i]; });
} 
```

您通过以下方式调用该函数：

```
getTickvalues(yourData, numValues, [optionalAccessor]); 
```

yourData 是您的数据数组，numvalues 是您想要的刻度数。如果您的数组包含复杂的数据结构，那么可选访问器会派上用场。

最后，您将其输入您的轴。而不是 ticks(numTicks) 显然只是对 d3 的提示，而是调用 tickValues() 。

我了解到您的 tickValues 必须与您的数据完全匹配序数刻度的艰难方法。这对线性比例可能有用也可能没有，但我想无论如何我都会分享它。

希望这可以帮助。

*   拍

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:00:55.167

您可以通过将 x.ticks(11) 替换为所需的数组来解决此问题。

因此，如果您的代码看起来像这样并且 x 是您的线性比例：

```
chart.selectAll("line")
    .data(x.ticks(11))
    .enter()
    .append("line")
    .attr("x1", x)
    .attr("x2", x)
    .attr("y1", 0)
    .attr("y2",120)
    .style("stroke", "#CCC"); 
```

您可以将 x.ticks(11) 替换为您的数组：

```
var desiredArray = [0, 25, 50, 75, 100, 125, 150, 175, 200, 225, 250]
chart.selectAll("line")
    .data(desiredArray)
    .enter()
    .append("line")
    .attr("x1", x)
    .attr("x2", x)
    .attr("y1", 0)
    .attr("y2",120)
    .style("stroke", "#CCC"); 
```

线性刻度将根据您的输入自动放置您想要的轴。ticks() 没有为您提供所需分离的原因是 d3 只是将 ticks() 视为建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-28T00:01:28.043

```
 axis.tickvalues((function(last, values) {
    var myArray = [0];
    for(var i = 1; i < values; i++) {
      myArray.push(last*i/(values-1))
    }
    return myArray;
  })(250, 11)); 
```

这应该为您提供一个均匀分布的数组，用于指定您想要在特定范围内的刻度值的数量。

# winforms - 如何在鼠标输入事件上动态显示面板？

> ID：15880060
> 
> 赞同：0
> 
> 时间：2013-04-08T13:15:23.170
> 
> 标签：winforms, visual-studio-2010, c#-4.0

就像在使用 css 的网页中一样，我们可以在鼠标输入或悬停时显示一个 div，就像我想在按钮的鼠标输入事件上显示一个面板一样，但我无法做到这一点。我正在尝试这样。

```
private void btn2_MouseEnter(object sender, EventArgs e)
    {
        Button btn = (Button)sender;
        btn.BackColor = System.Drawing.Color.MistyRose; //this is executed on mouse enter
        Point locationOnForm = btn.FindForm().PointToClient(
        btn.Parent.PointToScreen(btn.Location));
        Panel pnl = new Panel();
        Label lbl = new Label(); 
        lbl.Text = "anything";
        pnl.Controls.Add(lbl);
        pnl.Location = new Point(locationOnForm.X, locationOnForm.Y);
        pnl.Size = new Size(500, 500);
        pnl.BackColor = Color.SkyBlue;
        pnl.Visible = true;
        pnl.Show();
    } 
```

我不知道如何解决这个问题。我想知道

1）这是正确的方法还是有其他方法可以做到这一点？

2）如果这没问题，那么我在这里做的错误是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:25:27.370

不要在鼠标输入时创建面板，而是已经创建面板然后显示和隐藏它。

```
private void button1_MouseEnter(object sender, EventArgs e)
{
    panel1.Show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:30:11.877

您必须将面板添加到表单控件

```
Form1.Controls.Add(pnl); 
```

如果您打算将面板悬停`<div>`在 Web 中的按钮上，则必须调用 `BringToFront()`以确保面板不会出现在表单上的按钮或其他控件后面 -

```
pnl.BringToFront(); 
```

也像前面的答案一样，最好在表单上放置一个面板，然后设置`visible`为 true 或 false 以及面板位置，否则您最终可能会向表单控件添加多个面板。

如果您打算只在面板中显示纯文本，则使用 Tooltip 控件可能更容易 -

[MSDN - 工具提示控件](http://msdn.microsoft.com/en-us/library/he23h308.aspx)

# android - 在列表视图单元格的底部边缘制作凹痕

> ID：15880062
> 
> 赞同：0
> 
> 时间：2013-04-08T13:15:29.467
> 
> 标签：android, user-interface, android-listview

我一直在制作一个列表，该列表应该显示来自用户的一些信息。该列表应显示用户的头像和一些其他数据。下面我附上了指定的设计，头像以圆形图像显示，略高于单元格的上边缘，头像的上边缘在前一个单元格的底部结束。所有这些都很好，我可以做到，但正如你在图片中看到的，我需要在前一个单元格的底部边缘做一个凹痕，这与头像的圆形图像的大小相匹配。

有谁知道如何做到这一点？或任何线索？我现在真的没主意了！

![在此处输入图像描述](https://i.stack.imgur.com/ZS0sj.png)

# php - Paypal Express 结帐错误（不支持指定的方法）

> ID：15880063
> 
> 赞同：2
> 
> 时间：2013-04-08T13:15:31.827
> 
> 标签：php, paypal, express-checkout

我是 codeigniter 和 paypal 的新手。我正在研究 gocart（一个基于 codeIgniter 的开源电子商务解决方案）。我尝试使用其中集成的 paypal API，但显示错误如下：

```
[ACK] => 失败 [L_ERRORCODE0] => 81002 [L_SHORTMESSAGE0] => 未指定的方法 [L_LONGMESSAGE0] => 不支持指定的方法 [L_SEVERITYCODE0] => 错误

```

下面是我的代码：paypal_expres.php

```
$this->RETURN_URL = 'www.example.com';
$this->CANCEL_URL = 'www.example.com';
$this->currency = 'USD';
$this->host = "api-3t.sandbox.paypal.com";
$this->gate = 'https://www.sandbox.paypal.com/cgi-bin/webscr?';

public function doExpressCheckout($amount, $desc, $invoice='') { 
    $data = array( 
      'PAYMENTACTION' =>'Sale',
      'AMT' => '24',
      'RETURNURL' => $this->getReturnTo(),
      'CANCELURL' => $this->getReturnToCancel(),
      'CURRENCYCODE'=> $this->currency,
      'METHOD' => 'SetExpressCheckout'
    ); 
    $query = $this->buildQuery($data);
    $result = $this->response($query);  
    $response = $result->getContent();
    $return = $this->responseParse($response);  
    echo ''; 
    print_r($return);
    echo '';
    if ($return['ACK'] == 'Success') {
        header('Location: '.$this->gate.'cmd=_express-checkout&useraction=commit&token='.$return['TOKEN'].''); 
    }
    return($return);
}

public function doExpressCheckout($amount, $desc, $invoice='') {
    $data = array( 
      'PAYMENTACTION' =>'Sale',
      'AMT' => '24',
      'RETURNURL' => $this->getReturnTo(),
      'CANCELURL' => $this->getReturnToCancel(),
      'CURRENCYCODE'=> $this->currency,
      'METHOD' => 'SetExpressCheckout'
    );
    $query = $this->buildQuery($data);
    $result = $this->response($query);
    $response = $result->getContent();
    $return = $this->responseParse($response);
    echo ''; 
    print_r($return);
    echo '';
    if ($return['ACK'] == 'Success') {
        header('Location: '.$this->gate.'cmd=_express-checkout&useraction=commit&token='.$return['TOKEN'].'');
        die(); 
    }
    return($return); 
}

private function response($data) {
    $result = $this->CI->httprequest->connect($data);
    if ($result<400) return $this->CI->httprequest;
    return false;
}
private function buildQuery($data = array()) {
    $data['USER'] = $this->API_USERNAME;
    $data['PWD'] = $this->API_PASSWORD;
    $data['SIGNATURE'] = $this->API_SIGNATURE; 
    $data['VERSION'] = '56.0';
    $query = http_build_query($data);
    return $query;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-15T05:01:10.653

当 Paypal 返回此消息时，它是传输方法的情况，而不是方法参数/属性。

与 Paypal 一样，仅接受 POST。

# android - 如何防止破坏 Activity 本身？

> ID：15880064
> 
> 赞同：0
> 
> 时间：2013-04-08T13:15:38.150
> 
> 标签：android

在 UI 中，有 3 种附件（图像、视频、音频）的三个按钮。选择后按钮的图像/视频/音频颜色变为绿色。

**问题：-**

首先，我单击图像按钮以从 SD 中保存图像，图像成功附加并且按钮的颜色变为绿色。但是在单击视频按钮附加视频后，附件完成，但图像的选择被删除。

选择图像，视频或音频时，则先前的选择将被销毁。

**原因：-**

活动是自我毁灭和重新创造。

**问题：-**

如何停止重新创建活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:54:04.360

通过更改设置来解决问题。在开发人员选项中，取消选中“不保留活动”选项。

# hadoop - 具有 3rd 方可写性的 hdfs 文本

> ID：15880066
> 
> 赞同：0
> 
> 时间：2013-04-08T13:15:44.460
> 
> 标签：hadoop, hdfs, writable

我已经生成了一个 hdfs 序列文件，它使用 3rd 方库`Writable`，所以当我尝试通过运行来显示文件的文本时`hadoop fs -text /some/file/path`，我收到一条错误消息：

> 文本：java.io.IOException：WriableName 无法加载类：org.example.AnotherWritable

在这种情况下，我该如何使用该`-text`命令才能解决`AnotherWritable`

# jquery - $.getJSON 的成功处理程序没有被调用

> ID：15880067
> 
> 赞同：0
> 
> 时间：2013-04-08T13:15:44.640
> 
> 标签：jquery, json, jsonp

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
     <script type="text/javascript">
      $(function(){

        $.getJSON('http://localhost:8080/privateTraining/getTrainingsJson?callback=?',            
            function(data) {
                console.log("success");
                alert(data);
        });

    }); 
```

这里的响应得到了但是成功函数永远不会运行。

这里 getJson 是一个远程服务器调用。

当我检查 firbug 时，响应给出有效的 json 数据（用[http://jsonlint.com/](http://jsonlint.com/)检查的 json 数据及其给出的结果为**Valid JSON**）

甚至尝试过：

```
 $.ajax({
        dataType: "jsonp", //set this to json
        url: "http://localhost:8080/privateTraining/getTrainingsJson",
        success: function(data) 
        {
            var myObj = data;
            console.log(myObj); //to see the object
        }
    }); 
```

但给出相同的结果..成功功能未执行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:19:31.450

尝试删除“？callback =？” 来自您的网址：我似乎记得这与 jasonP（跨域）有关

JQuery 可能正在寻找一个名为“？”的函数。而不是调用您提供的成功函数。

# java - String - 获取指定子字符串后面的字符串

> ID：15880068
> 
> 赞同：1
> 
> 时间：2013-04-08T13:15:45.040
> 
> 标签：java, string, substring

例如，我有以下几行：

```
af asf af dassfdfsdf a dfa sd<text:text which i need to store
xycCYXCYXCaAdadad<text:text which i need to store
56afdasfaaaaaa54554 ewrt<text:text which i need to store 
```

`<text:`我怎样才能得到字符串后面每行的部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:18:41.060

像这样：

```
String line = "af asf af dassfdfsdf a dfa sd<text:text which i need to store";
int pos = line.indexOf("<text:");
if (pos > 0) {
    line = line.substring(pos+6); // 6 is the length of your "<text:" marker
} 
```

这是[关于 ideone 的演示](http://ideone.com/OzVny2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:18:15.073

```
public static void main(String[] args) {
    String str = "af asf af dassfdfsdf a dfa sd<text:text which i need to store";
    String result = str.substring(str.indexOf("<text:")+"<text:".length());
    System.out.println(result);
} 
```

输出：

```
text which i need to store 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:20:01.043

```
String result = new String(str.substring(0,str.indexOf("<text:"))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T13:24:12.153

```
@gaffcz,....

Try below code once

String str = "af asf af dassfdfsdf a dfa sd<text:text";
int lastIndex =     str.lastIndexOf("<text:text");
str = str.substring(0, lastIndex);
System.out.println("str : "+str); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T13:30:02.017

试试这个：

`String a ="af asf af dassfdfsdf a dfa sd<text:text"; System.out.println(a.subSequence(0, a.lastIndexOf("<text:text") != -1 ? a.lastIndexOf("<text:text"): a.length()));`

弗朗切斯科

# mysql - Mysql在删除集null时创建具有多个外键的表

> ID：15880070
> 
> 赞同：10
> 
> 时间：2013-04-08T13:15:52.687
> 
> 标签：mysql, sql, foreign-keys

我正在尝试使用具有删除/更新约束的多个外键创建一个数据库，但是我收到了错误代码 1005，其中包含以下 sql 脚本：

```
CREATE TABLE Worker (
 WorkerID smallint auto_increment,
 WorkerType  varchar(45) NOT NULL,
 WorkerName  varchar(45) NOT NULL,
 Position    varchar(45) NOT NULL,
 TaxFileNumber int NOT NULL,
 Address    varchar(100) ,
 Phone      varchar(20) ,
 SupervisorID  smallint ,
 PRIMARY KEY (WorkerID),
 FOREIGN KEY (SupervisorID) REFERENCES Worker(WorkerID)
    ON DELETE SET NULL
    ON UPDATE CASCADE
)Engine=InnoDB;

CREATE TABLE Grape (
    GrapeID smallint NOT NULL,
    GrapeType varchar(45) NOT NULL,
    JuiceConversionRatio int,
    StorageContainer ENUM('Stainless Steel Tank','Oak Barrel'),
    AgingRequirement int,
    PRIMARY KEY (GrapeID)
)Engine=InnoDB;

CREATE TABLE Vineyard (
    VineyardID smallint auto_increment,
    VineyardName VARCHAR(45) NOT NULL,
    FarmerID    smallint NOT NULL,
    GrapeID smallint NOT NULL,
    ComeFrom    varchar(45) NOT NULL,
    HarvestedAmount int,
    RipenessPercent int,
    PRIMARY KEY (VineyardID),
    FOREIGN KEY (FarmerID) REFERENCES Worker(WorkerID)
        ON DELETE SET NULL
        ON UPDATE CASCADE,
    FOREIGN KEY (GrapeID) REFERENCES Grape(GrapeID)
        ON DELETE SET NULL
        ON UPDATE CASCADE
)Engine=InnoDB; 
```

错误代码表示无法创建 Vineyard 表，我只想知道使用删除/更新控制创建多个外键的正确格式。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-08T13:26:28.053

您的外键规则是`ON DELETE SET NULL`，但您的列定义是`NOT NULL`.

要么更改您的列定义并删除该`NOT NULL`部分，要么过度考虑您的外键规则。这样可行：

```
CREATE TABLE Vineyard (
    VineyardID smallint auto_increment,
    VineyardName VARCHAR(45) NOT NULL,
    FarmerID    smallint,
    GrapeID smallint,
    ComeFrom    varchar(45) NOT NULL,
    HarvestedAmount int,
    RipenessPercent int,
    PRIMARY KEY (VineyardID),
    FOREIGN KEY (FarmerID) REFERENCES Worker(WorkerID)
        ON DELETE SET NULL
        ON UPDATE CASCADE,
    FOREIGN KEY (GrapeID) REFERENCES Grape(GrapeID)
        ON DELETE SET NULL
        ON UPDATE CASCADE
)Engine=InnoDB; 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!2/791b8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T19:35:17.287

尝试使用`innoDB enginer`不带外键的 create table() 并使用`update table with constraint`语法，例如：

```
ALTER TABLE `vineyard`
        ADD CONSTRAINT `relation_farmer_has_many_vineyards`
            FOREIGN KEY (`farmer_id`)
            REFERENCES `worker` (`worker_id`)
            ON DELETE SET NULL
            ON UPDATE CASCADE; 
```

> **参考：**
> 
> *   [http://dev.mysql.com/doc/refman/5.6/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.6/en/innodb-foreign-key-constraints.html)

**技巧：**不建议在行为与正在使用的操作系统不同的表名称中使用大写字母（或驼峰式）：

> *   [http://dev.mysql.com/doc/refman/5.1/en/identifier-case-sensitive.html](http://dev.mysql.com/doc/refman/5.1/en/identifier-case-sensitivity.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-29T13:50:08.667

访问 ：

[https://developer.android.com/training/basics/data-storage/databases.html#DefineContract](https://developer.android.com/training/basics/data-storage/databases.html#DefineContract)

```
Cursor c = db.query(
    FeedEntry.TABLE_NAME,                     // The table to query
    projection,                               // The columns to return
    selection,                                // The columns for the WHERE clause
    selectionArgs,                            // The values for the WHERE clause
    null,                                     // don't group the rows
    null,                                     // don't filter by row groups
    sortOrder                                 // The sort order
    ); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-08T13:32:44.637

访问 ：

> [http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

```
CREATE TABLE `ffxi_characterJob` (
`serverID` int(11) NOT NULL,
`userid` int(10)unsigned NOT NULL,
`characterName` varchar(255) NOT NULL,
`jobAbbr` char(4) NOT NULL,
`jobLevel` int(11) default '0',
PRIMARY KEY (`serverID`,`userid`,`characterName`,`jobAbbr`),
INDEX (`jobAbbr`),
CONSTRAINT FOREIGN KEY (`serverID`,`userid`,`characterName`) REFERENCES `ffxi_characters` (`serverID`,`userid`,`characterName`) 
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT FOREIGN KEY (`jobAbbr`) REFERENCES `ffxi_jobType` (`jobAbbr`) ON DELETE CASCADE ON UPDATE CASCADE
) TYPE=InnoDB; 
```

# javascript - Jquery长按，停止短按动作不起作用

> ID：15880071
> 
> 赞同：2
> 
> 时间：2013-04-08T13:15:53.057
> 
> 标签：javascript, jquery, html

我正在尝试为短按实现一个事件，而为长按实现不同的事件。短按只是做默认动作。长按有效，但仍然执行默认操作。我错过了什么？

```
 HTML
   <a href="http://myLocation" class="recordlongpress"><"Label for my Link"</a>

  Javascript
    $(document).ready(function(){
        $('.recordlongpress').each(function() {

        var timeout, longtouch;

        $(this).mousedown(function() {
            timeout = setTimeout(function() {
                longtouch = true;
            }, 1000);
        }).mouseup(function(e) {
            if (longtouch) {
                e.preventDefault();
                $('#popupPanel').popup("open");
                return false;
            } else {
                return;      
            }
            longtouch = false;
            clearTimeout(timeout);
        });

    });
}); 
```

我遵循了 jQuery 文档，并在印象中“preventDefault”应该停止短按默认操作。我在网上找到的任何例子似乎都不完全是我的情况。感谢您花时间阅读本文。感谢您的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:18:46.567

在清除超时并将“longtouch”设置为false之前，您正在从“mouseup”处理程序返回。

尝试：

```
 }).mouseup(function(e) {
        var returnval;

        if (longtouch) {
            e.preventDefault();
            $('#popupPanel').popup("open");
            returnval = false;
        } 

        longtouch = false;
        clearTimeout(timeout);

        return returnVal;
    }); 
```

我还会在“mousedown”处理程序中清除“longtouch”。也就是说，我不会对鼠标事件执行此操作。我会使用“touchstart”和“touchend”。在触摸屏设备上，“鼠标”事件是从触摸事件中模拟出来的，并且存在明显的延迟。（您可能还想检测手指在触摸期间是否移动。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:27:32.983

# [jsFiddle 演示](http://jsfiddle.net/ABc56/5/)

在您的代码中，这些行无法访问

```
 longtouch = false;
     clearTimeout(timeout); 
```

**JS：**

```
 $('.recordlongpress').each(function () {

    var timeout, longtouch = false;

    $(this).mousedown(function () {

        timeout = setTimeout(function () {
            longtouch = true;
        }, 1000);
        e.preventDefault();
    }).mouseup(function (e) {
        clearTimeout(timeout);
        if (longtouch == true) {
            longtouch = false;
            $('body').append("long press" + longtouch);

            return false;
        } else {
            return;
        }

    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:07:37.650

@Pointy 引导我找到点击事件的有效解决方案。

```
 $(document).ready(function(){
    $('.recordlongpress').bind('tap', function(event) {
        return;
    });
    $('.recordlongpress').bind('taphold', function(event) {
        $('#popupPanel').popup("open");
    });
}); 
```

仍然需要添加一些内容，因为在我的移动设备上长按后，默认选项屏幕会显示四个选项；打开，保存链接，复制链接 URL 和选择文本仍然会弹出。一旦找到它，我将为此添加修复程序。

# image - .png 并不总是显示在 Safari 中

> ID：15880073
> 
> 赞同：0
> 
> 时间：2013-04-08T13:15:57.157
> 
> 标签：image, wordpress, safari, png, graphical-logo

我在 WordPress 上的标题徽标图像有问题，它并不总是显示在 Safari 上（chrome 没问题），我不明白为什么……我禁用了所有插件，并在其他计算机上测试过……同样的问题！

链接：[http ://beau-velo.com/WordPress/](http://beau-velo.com/WordPress/)

这是一些代码：

```
.site-header .site-title a,
.site-header .site-title img {
display: inline;
text-align: center;
}

.site-header .site-title a, .site-header .site-title img {
display: block;
}

img {
border: 0;
max-width: 100%;
-ms-interpolation-mode: bicubic;
vertical-align: middle;
} 
```

提前致谢，

T。

# java - 知道特定线程启动的线程数

> ID：15880074
> 
> 赞同：3
> 
> 时间：2013-04-08T13:15:59.167
> 
> 标签：java, multithreading

在以下程序中，`main`线程调用在新线程上`startThread`开始。它调用`greet_thread`又`greet`在新线程上调用。`startThread`调用`greet_thread`直到`count is less than or equal to 10`.

有什么办法可以告诉我当前正在运行多少个线程？更具体地说，我想知道当前通过调用启动的线程数`greet_thread`。正如`greet_thread`所谓`10 times`的，很明显`10 threads` 最后会单独运行。但是有没有办法知道这个数字？

这是程序中启动的线程的层次结构：

```
main_thread
  | 
 \ /
starts a new thread by calling startThread
  |
 \ /
startThread starts a new thread by calling greet_thread-->--|
  |                                                         |
 \ /                                                       \ / gets called 10 times
 greetThread is started with an infinite loop------<------- |
  |
 \ /
 greet() method is called 
```

* * *

```
class Tester {

    private static  int count = 0;

    public static void main(String args[]) {
        startThread();
    }

    public static void startThread() {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                while(count <= 10) {
                    greet_thread(count);
                    count++;
                }
            }
        };
        new Thread(r).start();
    }

    public static void greet_thread(final int count) {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                while(true) {
                    greet();
                }
            }
        };
        new Thread(r).start();
    }

    public static void greet() {
        System.out.println("GREET !");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:28:03.383

如果你有 30K 线程正在运行，那么你就有问题了。我怀疑你没有这么多的CPU。您可以使用 VisualVM、ThreadGroup 或线程池或使用计数器来检查线程数。

通常当你设计一个程序时，你就知道你想要多少个线程，你只需要检查就是这样。您不会刻意编写具有未知但非常多线程的程序，并尝试稍后弄清楚它是什么，因为这个数字不会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:22:28.907

如果您只是想计算仍处于活动状态的线程数，则更改`run`方法以在共享计数器启动时递增，并在其终止时递减（通常或通过异常）。

请注意，您将需要使用类似的东西`AtomicInteger`来实现计数器......或者做一些事情来同步更新。递增原始整数不是原子的，如果没有充分同步，这可能会导致 heisenbugs。

（对于您现有的`count`变量也是如此！）

# jquery - ASP.NET 客户端和视图状态

> ID：15880076
> 
> 赞同：1
> 
> 时间：2013-04-08T13:16:06.940
> 
> 标签：jquery, asp.net, ajax, controls, clientscript

我是 ASP.NET 的新手，我对 Viewstate 和 Clientscript 有疑问。我用一些 Javascript 创建了一个自定义 ASP 面板（**这只是一个例子**）：

```
public class MyPopup : Panel {
        string Script = "$(#'{0}').dialog();";
        protected override void OnLoad( EventArgs e ) {
            base.OnLoad( e );
            ScriptManager.RegisterStartupScript( this, this.GetType(), "MyKey", string.format(this.Script, this.Id), true );
        }
    }

<myControl:MyPopup id="test" runat="server">
   <asp:TextBox id="test2" runat="server" />
</myControl:MyPopup> 
```

当引发事件时，来自文本框的值不会保存在视图状态中/始终为空。所有其他工作正常。当我删除脚本管理器时，一切正常。

我希望有一个人可以帮助我...

顺便说一句：我对 jquery 没有问题，对话框正确显示只是子控件的值没有保留在视图状态中！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:55:46.800

这里的问题是 jquery 对话框正在从表单中删除您的 DIV。这是一个应该对您有所帮助的链接。

[jQuery 模态窗口从我的表单中删除元素](https://stackoverflow.com/questions/567637/jquery-modal-window-removes-elements-from-my-form)

干杯

# maven - jenkins 根据可用的包运行作业

> ID：15880077
> 
> 赞同：0
> 
> 时间：2013-04-08T13:16:07.167
> 
> 标签：maven, testing, junit, jenkins, jobs

我有像这样的测试包

```
test.regression.pacakgea
test.regression.pacakgeb
test.regression.pacakgec 
```

这些包是由不同的人开发的，并在虚拟机上运行它们。我为每个作业配置了成功和失败的电子邮件通知。人们可能没有兴趣通过邮件查找所有失败的测试，以找出他们的哪些测试失败。包内的测试扩展了 junit 并使用 maven 作为构建工具
，所以有没有办法让 jenkins 可以将每个包作为单独的作业执行。我可以将每个 pacakge 放入一个不同的项目中，在 jenkins 中我可以将其配置为一项新工作，但这太乏味了，因为每个人都必须签入 2 个位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:29:11.797

如果您使用的是 Maven：

1.  为您要测试的每个包创建一个 Maven 配置文件。
2.  将 Surefire 插件配置为[仅包含您要](http://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html)使用该配置文件中的变量在该构建中测试的包。
3.  使用三个配置文件之一为每个构建创建不同的 Jenkins 作业。

现在 Jenkins 将只测试给定类中的那个包。

请注意，包含/排除仅适用于测试包。这些测试可能会测试该包之外的代码。

# java - 是否可以在运行时指定上下文属性占位符

> ID：15880081
> 
> 赞同：2
> 
> 时间：2013-04-08T13:16:18.853
> 
> 标签：java, spring, properties

我有一个使用弹簧的独立罐子。我的 spring xml 中的配置使用了我在用 maven 编译时替换的占位符。示例弹簧配置：

```
<bean id="foo" class="package.Foo">
    <property name="host" value="${db.host}" />
</bean> 
```

我不想使用 maven替换，而是`${db.host}`想在运行时传入一个属性文件，例如

```
java -jar Application.jar productionDB.properties 
```

这将允许我通过传入生产数据库属性文件或测试数据库属性文件在运行时切换数据库主机。

是否有可能做到这一点，或者有没有更好的方法来实现相同的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:38:39.127

您可以将您的属性文件指定为系统属性，例如：

```
java -jar Application.jar -DappConfig=/path/to/productionDB.properties 
```

然后你应该能够在你的应用程序上下文中引用它：

```
<context:property-placeholder location="file:${appConfig}"/>

<bean id="foo" class="package.Foo">
    <property name="host" value="${db.host}" />
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:21:09.970

您可以使用 a`PropertyPlaceholderConfigurer`来使用`.properties`文件来传递所需的变量。

```
<bean id="placeholderConfig"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:productionDB.properties</value>
        </list>
    </property>
</bean> 
```

你可以保留你的 bean 声明。属性将自动从`productionDB.properties`文件中获取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:31:54.920

有几个选项：

1.  通过容器的 JNDI 设置资源并使用 Spring 的`<jee:jndi-lookup/>`.
2.  使用 Spring 的`<context:property-placeholder location="classpath:/myProps.properties" />`. 我更喜欢这种“完整” bean 定义的简写，因为 Spring 将自动使用正确的实现（`PropertyPlaceholderConfigurer`对于 Spring < 3.1，或`PropertySourcesPlaceholderConfigurer`对于 Spring 3.1+）。使用此配置，您只需将`myProps.properties`放在类路径的根目录下（`${TOMCAT_HOME}/lib`例如）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T13:44:28.923

您可以使用 context:property-placeholder 传递值。因此，您的设置将类似于：

```
<context:property-placeholder location="file://opt/db.properties"/> 
```

然后，当您连接您的 Foo 服务时，您可以在配置中使用属性名称，例如

```
<bean id="foo" class="package.Foo">
   <property name="host" value="${db.host}" />
</bean> 
```

然后只需为每个环境使用不同的文件集

有关更多详细信息，请参阅[spring](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-placeholderconfigurer)文档。

# c++ - protobuf：RepeatedField 唯一元素

> ID：15880086
> 
> 赞同：4
> 
> 时间：2013-04-08T13:16:29.823
> 
> 标签：c++, c, protocol-buffers

我想在谷歌协议缓冲区中`repeated field`只有唯一元素。换句话说，需要将其用作 a`std::set`而不是`std::vector`.

有什么想法是最简单和最有效的方法吗？

**编辑**：如果可能的话，我不想使用任何迭代器来遍历所有元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:43:25.983

好的，正如问题的评论所述，如果不使用迭代器，就没有任何方法可以做到这一点。但是，也许其他人对此感兴趣，这是我为实现此目的而编写的函数。这将作为参数 a `RepeatedPtrField< T >*`（列表）和 a `std::string`（我们打算添加到列表中的新对象的键），并将返回与 id 匹配的元素，或者`NULL`如果在`RepeatedField`列表。

这样，您可以轻松地将唯一元素列表直接保存在 a 中，`RepeatedField`而无需使用任何其他`std`结构：

```
template <class T>
T* repeatedFieldLookup( google::protobuf::RepeatedPtrField< T >* repeatedPtrField, std::string id)
{
   google::protobuf::internal::RepeatedPtrOverPtrsIterator<T> it = repeatedPtrField->pointer_begin();
   for ( ; it != repeatedPtrField->pointer_end() ; ++it )
   {
      CommonFields * commonMessage = (CommonFields*) (*it)->GetReflection()->
     MutableMessage ((*it), (*it)->GetDescriptor()->FindFieldByName ("common"));
      if(commonMessage->id() == id)
      {
     return *it;
      }
   }
   return NULL;
} 
```

**注意**：在上面的例子中，原始消息总是有一个名为的字段`common`（在我的例子中也是一个原始消息）。您可以将其替换为您想从原始消息中进行比较的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T15:59:27.113

在我上这门课的情况下：

```
class Description : public ::google::protobuf::Message {
  // ...
  inline void add_field(const ::std::string& value);
  inline const ::google::protobuf::RepeatedPtrField< ::std::string>& field() const;
  // ...
}; 
```

`std::find`如果列表中不存在，我曾经只添加一个值：

```
#include <algorithm>

void addField(Description& description, const std::string& value) {
    const auto& fields = description.field();
    if (std::find(fields.begin(), fields.end(), value) == fields.end()) {
        description.add_field(value);
    }
} 
```

# java - EJB 事务 - 静态上下文 - 坏主意？

> ID：15880088
> 
> 赞同：2
> 
> 时间：2013-04-08T13:16:36.317
> 
> 标签：java, static, ejb, code-injection

## 情况

想象一下：

有一个这样的枚举：

```
enum State{
  INITIAL{
    @Override
    public void proceed(){...}
  },
  NEXT_STATE{
    @Override
    public void proceed(){ ... }
  },
  //and so on
  TERMINATED;

  public void proceed(){}
} 
```

然后有一个@Entity。该实体表示处理订单的应用程序中的用例。让我们称之为`ActivationUseCase`。`ActivationUseCase`（就像从我的基类继承的任何其他类一样`UseCase`）有一个名为 state 的属性，其中包含一个`State`.

最后一个问题是一个 EJB 3.1 bean，它检索一个`ActivationUseCase`并在其上调用proceed()。

这个想法是让`@Entity`持有所有关于它的可能状态（枚举）的信息，并且每个状态都知道当它必须做什么时该做什么`.proceed()`。

## 问题

在proceed() 方法中，我们有一个静态上下文。但我们可能想调用其他 EJB。所以有人开始做 JNDI 查找（本地）并调用我们需要的 bean。恕我直言，这非常丑陋和危险，但这不是这里的问题。

为了清楚起见，这里有一堆伪调用：

```
 MyServiceBean.myServiceMethod()
    |- ActivationUseCase.proceed()
       |- ManuallyLookedUpEJB.anotherServiceMethod() 
```

所以`MyServiceBean.myServiceMethod()`启动一个事务，检索`ActivationUseCase`实例以调用`proceed()`它。然后我们查找`ManuallyLookedUpEJB`(new InitialContext()...) 并调用`anotherServiceMethod()`.

## 问题

交易会发生什么？它从哪里开始？会覆盖`anotherServiceMethod()`吗？我该如何调试这个？

## 免责声明

我不想讨论 enum-contains-logic 构造（现在）。事实上，我正在收集重构（重写）整个事情的原因。我只需要一些理由来支持我的说法，即这种结构不是一个好主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:37:44.937

事务将像任何其他方法调用一样传播。因此，除非`ManuallyLookedUpEJB.anotherServiceMethod()`有 REQUIRES_NEW 事务传播，否则它将在与启动的事务相同的事务中执行`MyServiceBean.myServiceMethod()`。

# r - 在 R scatter3d 包中检索回归曲面的数据或函数

> ID：15880089
> 
> 赞同：1
> 
> 时间：2013-04-08T13:16:45.137
> 
> 标签：r, function, regression, surface

有谁知道是否可以在 R 的 scatter3d 包中查看用于绘制表面回归的数据？我想要的是能够以某种方式查看应用于 R 中 scatter3d 包中我的数据点的表面回归的公式（或函数）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:41:58.863

编辑：我猜你是`scatter3d`从`IPSUR`包中使用的。

根据帮助页面，“价值

scatter3d 没有返回有用的值；它用于创建 3D 散点图的副作用。indentify3d 返回已识别点的标签。"

您可能想`scatterplot3D`在 CRAN 上进行试验，看看它的返回值（函数）是否有用。

您也许可以深入挖掘`scatter3d`返回数据的版本的来源并派生出一个版本。

# android - 拨打电话时将电话屏幕推到后台

> ID：15880091
> 
> 赞同：2
> 
> 时间：2013-04-08T13:16:47.357
> 
> 标签：android, overriding, phone-call

我们正在使用 android 应用程序进行一些评估，当评估员到达现场时，他们需要在通话时登录办公室。有一个参考号码，我真的很想在电话响铃后保留在电话显示屏上。

完美的是在拨号器屏幕顶部显示数字的对话框。

我试过这样做，但它只是超越了对话框并显示了调用屏幕。无论如何将拨号器推到后台并继续向用户显示对话框？

继承人我到目前为止：

```
public void makecall(View view){ 
    try {
        Intent callIntent = new Intent(Intent.ACTION_CALL);
        callIntent.setData(Uri.parse("tel:NUMBER"));
        startActivity(callIntent);
        Toast.makeText(getApplicationContext(), "TEST",Toast.LENGTH_LONG).show(); 
        AlertDialog.Builder adb = new AlertDialog.Builder(this); 
        adb.setTitle("Alert"); 
        adb.setMessage("Client Reference Blah Blah");
        adb.setPositiveButton("Ok", new DialogInterface.OnClickListener() { 
            public void onClick(DialogInterface dialog, int id) { 

            } 
        });
        adb.setNegativeButton("Cancel", new DialogInterface.OnClickListener() { 
            public void onClick(DialogInterface dialog, int id) { 
                dialog.cancel(); 
            }
        });
        adb.show();         
    } catch (ActivityNotFoundException activityException) {
        Throwable e = null;
        Log.e("helloandroid dialing example", "Callfailed", e); 
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:34:07.250

我认为您需要使用活动在通话屏幕顶部显示某些内容。对话框将不起作用，因为您正在从您发布的此活动中显示它，但是一旦您启动调用意图，此活动将不再位于堆栈顶部。

在此处查看答案：[Android - 如何在本机屏幕上显示对话框？](https://stackoverflow.com/questions/2147144/android-how-to-display-a-dialog-over-a-native-screen)

了解如何将（新）活动设置为看起来像一个对话框，这将为您提供与您所追求的相同的视觉效果。

使用该问题中显示的参数创建新活动后，您可以在启动 callIntent 后使用 startActivity 启动它

```
public void makecall(View view){ 
    try {
        Intent callIntent = new Intent(Intent.ACTION_CALL);
        callIntent.setData(Uri.parse("tel:NUMBER"));
        startActivity(callIntent);
        Toast.makeText(this, "TEST",Toast.LENGTH_LONG).show(); 

        Runnable showDialogRun = new Runnable() {
            public void run(){
                Intent showDialogIntent = new Intent(this, DialogActivity.class);
                startActivity(showDialogIntent);
            }
        };
        Handler h = new Handler();
        h.postDelayed(showDialogRun, 2000);
    } catch (ActivityNotFoundException activityException) {
        Throwable e = null;
        Log.e("helloandroid dialing example", "Callfailed", e); 
    }
} 
```

将对话框 startActivity 延迟一两秒似乎使它更有可能实际飞溅在手机屏幕上。

# java - 在彼此之上绘制对象

> ID：15880096
> 
> 赞同：2
> 
> 时间：2013-04-08T13:16:56.050
> 
> 标签：java, swing, java-2d, paintcomponent, paint

我正在尝试在另一个椭圆上画一个椭圆。这里我使用一个 select 语句来绘制绘制组件方法。

```
import java.awt.*;

public class test extends JPanel{

public static final int OVAL = 1;
public static final int SOLID = 2;

private int type = LINE;

public test(int type){

    this.type = type;
}
public void piantComponent(Graphics g){
   super.paintComponent(g);

   switch(type)
   {
      case OVAL:
      g.setColor(Color.YELLOW);
      g.drawOval(0,0,150,150);
      break;

      case SOLID:
      g.setColor(Color.BLUE);
      g.fillOval(0,0,50,50);
      break;

   }
 }

} 
```

现在在我的主要方法中，我想在黄色椭圆（OVAL）内显示一个纯蓝色椭圆（SOLID）。

```
 import...;
  public class Main{
      public static void main (String [] args){
             JFrame window = new JFrame();
             window.add(new test(test.OVAL));
             window.add(new test(test.SOLID));
             window.setSize(300,300);
             window.setVisible(true);

      }

  } 
```

这根本不符合我的要求。这只显示一个椭圆，而不是一个椭圆和一个实体。我认为我正在超载窗口以仅显示椭圆形。我曾尝试使用布局管理器（gridlayout）进行显示，但它不会将两幅画相互显示，而是将两幅画并排显示。

如何在不丢失 switch 语句的情况下解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:48:02.407

*   [对于具体的JComponent](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html) ，必须[在 Swing中进行绘制](http://docs.oracle.com/javase/tutorial/2d/index.html)

*   `public class test{`（使用正确的命名约定并更改`test`为`Text`）不包含任何`JComponents`

*   使用`JPanel`或平原`JComponent`

*   在 AWT 中绘画，默认情况下 Swing 永远不会返回`PreferredSize`，然后容器为零`Dimension`，[需要覆盖 getPreferredSize](https://stackoverflow.com/a/9258934/714968)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:21:18.703

```
window.add(new test(test.OVAL));
window.add(new test(test.SOLID)); 
```

您的问题与 ZOrder 有关。为简化起见，Swing 以与面板上相反的顺序绘制组件。因此，在您的情况下，固体在椭圆形之前被涂漆。由于 OVAL 的尺寸较大，它覆盖了 SOLID。

您可以通过执行以下操作强制 Swing 以更直观的顺序绘制组件：

```
window.add(0, new test(test.OVAL));
window.add(0, new test(test.SOLID)); 
```

现在最后添加的组件也将最后绘制。

然而，更好的设计是创建单独的 Oval 和 Solid 类，以便您可以独立指定大小、位置和颜色。然后，您可以根据需要向面板添加任意数量的组件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:28:01.650

1.  在测试类中进行修改。阅读评论以解释修改

导入 java.awt.*；

公共类测试扩展 JPanel {

```
 public static final int OVAL = 1;
  public static final int SOLID = 2;
  **public static final int BOTH = 3;**  //instance variable to represent the 
                                         //painting of both images

  private static int type;

  public test(int type){
    this.type = type;
  }

  public void paintComponent(Graphics g){

     switch(type)
     {
        case OVAL:
           g.setColor(Color.BLACK);
           g.drawOval(0,0,150,150);
           break;

        case SOLID:
           g.setColor(Color.BLUE);
           g.fillOval(0,0,50,50);
           break;

        case BOTH:                       //statements to draw both figures
           g.setColor(Color.BLACK);
           g.drawOval(0,0,150,150);
           g.setColor(Color.BLUE);
           g.fillOval(0,0,50,50);
           break;

     }
  }//paint component 
```

}

1.  在主要方法中使用

    > > window.add（新测试（test.BOTH）；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T13:23:23.980

你为什么不一个接一个地画呢？像那样：

```
 g.setColor(Color.YELLOW);
  g.drawOval(0,0,150,150);
  g.setColor(Color.BLUE);
  g.fillOval(0,0,50,50); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T13:28:58.757

尝试这样的事情（仅使用片段）：

```
 private ArrayList<int> ovals = new ArrayList<int>();

 public test(int type) {
      ovals.add(type);
 }

 public void piantComponent(Graphics g)
 {
      super.paintComponent(g);

      for(int oval : ovals)
      {
           switch(type)
           {
                case OVAL:
                g.setColor(Color.YELLOW);
                g.drawOval(0,0,150,150);
                break;

                case SOLID:
                g.setColor(Color.BLUE);
                g.fillOval(0,0,50,50);
                break;
           }
      }
 } 
```

这将允许您根据需要添加任意数量的椭圆（尽管它们的静态定位只会在画布上覆盖它们）。您可以尝试使用布尔数组并对其进行迭代，以查看是否需要绘制特定类型（如果您只需要其中一个）。

# python - Python模块看不到已经加载的类文件

> ID：15880098
> 
> 赞同：0
> 
> 时间：2013-04-08T13:16:58.053
> 
> 标签：python

我正在开发一个名为 QREDIS 的交互式建模平台。它由一组相互关联的模块组成，这些模块由安装脚本导入，并为用户提供一组模型研究功能。

作为设置的一部分，我`QMod_Template`使用

```
exec(open('QMod_Template.py').read()) 
```

此类是用户可定义模型的基类；即用户可以定义和保存一个新模型`QMod_MyModel(QMod_Template)`。这一切都完美无缺。我不想强迫用户稍后用 重新加载他的模型`exec(open('QMod_MyModel.py').read())`，所以我`LoadModel`在模型`QREDIS_Model`中创建了一个函数，它将加载指定的模型类文件（基本上是`exec`代码的包装器）。

当我执行这个函数时，我得到一个错误`NameError: name 'QMod_Template' is not defined`。总结

首先，我从文件中加载一个类：

```
exec(open('QMod_Template.py').read()) 
```

然后我导入一个模块

```
import QREDIS_Model as QM 
```

然后我尝试加载另一个模型类文件

```
QM.LoadModel('QMod_MyModel.py') 
```

并获得 NameError。

本质上，`QREDIS_Model.LoadModel`需要能够访问已经加载的`QMod_Template`类，但不能。我曾尝试在模块和函数中将 QMod_Template 声明为全局，但没有运气。

我认为这应该是一个简单的解决方法。我错过了什么？我希望这个扩展的问题能让我的问题更清楚。

# ios - 如何在 iOS 上嵌入 YouTube 视频并直接在 UIWebView 上播放而无需全屏？

> ID：15880101
> 
> 赞同：15
> 
> 时间：2013-04-08T13:17:00.960
> 
> 标签：ios, xcode

我正在使用此代码在 iOS 上播放 YouTube 视频

```
- (void)embedYouTube:(NSString *)urlString frame:(CGRect)frame
{
    NSString *htmlString = [NSString stringWithFormat:@"<html><head><meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = yes, width = 320\"/></head><body style=\"background:#00;margin-top:0px;margin-left:0px\"><div><object width=\"320\" height=\"180\"><param name=\"movie\" value=\"http://www.youtube.com/v/%@&f=gdata_videos&c=ytapi-my-clientID&d=nGF83uyVrg8eD4rfEkk22mDOl3qUImVMV6ramM\"></param><param name=\"wmode\" value=\"transparent\"></param><embed src=\"http://www.youtube.com/v/%@&f=gdata_videos&c=ytapi-my-clientID&d=nGF83uyVrg8eD4rfEkk22mDOl3qUImVMV6ramM\"type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"320\" height=\"180\"></embed></object></div></body></html>", urlString, urlString];

    UIWebView *videoView = [[UIWebView alloc] initWithFrame:frame];
    [videoView loadHTMLString:htmlString baseURL:nil];
    [self.view addSubview:videoView];
    [videoView release];
} 
```

它就像魅力一样，但我想要不同的行为。现在视频的缩略图出现在网络视图上（很好！）但是当我点击播放图标时，它会全屏打开。我需要在同一个窗口中完成播放，因为我需要显示更多内容。

任何线索如何做到这一点？提前谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-10-17T17:07:57.573

如果有人仍然面临这个问题，下面是迄今为止我见过的最好的解决方案。奇迹般有效。

```
self.webView = [[UIWebView alloc] initWithFrame:CGRectMake(10, 10,300, 200)];
        [self.webView setAllowsInlineMediaPlayback:YES];
        [self.webView setMediaPlaybackRequiresUserAction:NO];

        [self.view addSubview:self.webView];

        NSString* embedHTML = [NSString stringWithFormat:@"\
                               <html>\
                                    <body style='margin:0px;padding:0px;'>\
                                        <script type='text/javascript' src='http://www.youtube.com/iframe_api'></script>\
                                        <script type='text/javascript'>\
                                            function onYouTubeIframeAPIReady()\
                                            {\
                                                ytplayer=new YT.Player('playerId',{events:{onReady:onPlayerReady}})\
                                            }\
                                            function onPlayerReady(a)\
                                            { \
                                                a.target.playVideo(); \
                                            }\
                                        </script>\
                                        <iframe id='playerId' type='text/html' width='%d' height='%d' src='http://www.youtube.com/embed/%@?enablejsapi=1&rel=0&playsinline=1&autoplay=1' frameborder='0'>\
                                    </body>\
                               </html>", 300, 200, @"JW5meKfy3fY"];
        [self.webView loadHTMLString:embedHTML baseURL:[[NSBundle mainBundle] resourceURL]]; 
```

来源：[https ://code.google.com/p/gdata-issues/issues/detail?id=5204](https://code.google.com/p/gdata-issues/issues/detail?id=5204)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-14T09:45:35.020

在斯威夫特：

```
let webView = UIWebView(frame:CGRectMake(10, 10,300, 200))
    webView.allowsInlineMediaPlayback = true
    webView.mediaPlaybackRequiresUserAction = false
    self.view.addSubview(self.webView)

    let embedHTML = "<html>" +
    "<body style='margin:0px;padding:0px;'>" +
    "<script type='text/javascript' src='http://www.youtube.com/iframe_api'></script>"
    "<script type='text/javascript'>"
    "function onYouTubeIframeAPIReady()"
    "{"
    "    ytplayer=new YT.Player('playerId',{events:{onReady:onPlayerReady}})"
    "}"
    "function onPlayerReady(a)"
    "{ "
    "   a.target.playVideo(); "
    "}"
    "</script>"
    "   <iframe id='playerId' type='text/html' width='300' height='200' src='http://www.youtube.com/embed/JW5meKfy323?enablejsapi=1&rel=0&playsinline=1&autoplay=1' frameborder='0'>"
    "        </body>"
    "</html>"
    webView.loadHTMLString(embedHTML, baseURL:NSBundle.mainBundle().resourceURL!) 
```

# icons - 如何在 Windows 上为 javafx 本机包图标设置自定义图标

> ID：15880102
> 
> 赞同：8
> 
> 时间：2013-04-08T13:17:01.613
> 
> 标签：icons, javafx-2, native, exe, pom.xml

我试图在创建 javafx 打包的本机捆绑时尝试 exe 文件的图标。
我尝试将图标添加到pom.xml中，但直到它对我来说不起作用，因为它提供了`command = mvn jfx:build-native` 默认`pom.xml`图标

```
<build>
    <plugins>
        <plugin>
            <groupId>com.zenjava</groupId>
            <artifactId>javafx-maven-plugin</artifactId>
            <version>1.5</version>
            <configuration>

                <mainClass>com.demoApp.testapp.testApplication</mainClass>

                <!-- only required if signing the jar file -->
                <keyStoreAlias>example-user</keyStoreAlias>
                <keyStorePassword>example-password</keyStorePassword>
                <permissions>
                    <permission>all-permissions</permission>
                </permissions>
                <icon>${basedir}/src/main/resources/images/logoIcon.ico</icon>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>

    </plugins>
</build> 
```

我在 pom.xml ${basedir}/src/main/resources/images/logoIcon.ico 中添加了一个图标路径，它将在本机包执行时运行，但对我来说不起作用

还有其他方法吗？请建议。

* * *

我使用 ant 在 pom.xml 中尝试了 fx 标签，这是我在 pom.xml 中的更改

```
<properties>

<javafx.tools.ant.jar>${env.JAVA_HOME}\lib\ant-javafx.jar</javafx.tools.ant.jar> </properties>

<plugin>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.6</version>
                <executions>
                    <execution>
                        <id>create-launcher-jar</id>
                        <phase>package</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <target xmlns:fx="javafx:com.sun.javafx.tools.ant">
                                <taskdef
                                        uri="javafx:com.sun.javafx.tools.ant"
                                        resource="com/sun/javafx/tools/ant/antlib.xml"
                                        classpath="${javafx.tools.ant.jar}"/>
                                <fx:application id="fxApp"
                                                name="${project.name}"
                                                mainClass="com.precisionhawk.flightplanner.FlightPlannerApp"/>
                                <fx:jar destfile="${project.build.directory}/${project.build.finalName}-launcher">
                                    <fx:application refid="fxApp"/>
                                    <fx:fileset dir="${project.build.directory}/classes"/>
                                </fx:jar>
                                <attachartifact file="${project.build.directory}/${project.build.finalName}-launcher.jar"
                                                classifier="launcher"/>
                                <fx:deploy>
                                    <fx:info>
                                        <fx:icon href="${basedir}/src/main/deploy/logoIcon.ico"></fx:icon>
                                    </fx:info>

                                </fx:deploy>
                            </target>
                        </configuration>
                    </execution>
                </executions>
            </plugin> 
```

但它不会解决..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-10T07:23:24.150

我只是在使用 Zonsky 出色的 javafx-maven-plugin 时遇到了同样的问题。从您也在使用的 1.5 版开始，src/main/deploy 目录将被添加到类路径中。您可以在此处添加您要使用的图标，它将在本机构建器的类路径中可用！

我在那里添加了 src/main/deploy/package/windows/myapp.ico ，它终于起作用了:)

为你：

1.  创建`src/main/deploy/package/windows/`文件夹
2.  添加带有名称的图标`${project.build.finalName}.ico`
3.  跑`mvn jfx:build-native`

我没有广泛使用它 - 只是让它工作并想分享。所以如果你想使用不同名称的图标，我不知道怎么做。至少现在还没有。config部分中的`<icon>...</icon>`部分似乎是针对webstart的，所以我一直没有使用它。希望你让它工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:45:45.433

您需要在构建本机应用程序时查看日志记录。这将告诉您安装程序在哪里查找图标文件以及名称。对于默认的 Windows 本机应用程序，它在 ./package/windows/'appname'.ico 中查找 不记得 'appname' 来自何处，但只需在构建时查看日志记录，它就会告诉你。（我使用从我的 pom btw 调用的 Ant 目标）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-21T07:40:20.400

```
 you can do this:
      `<plugin>
            <groupId>com.zenjava</groupId>
            <artifactId>javafx-maven-plugin</artifactId>
            <version>8.8.3</version>
            <configuration>
                <vendor>YourCompany</vendor>
                <mainClass>com.alan344.MapperGenApplication</mainClass>
                <appName>mybatis-friend</appName>
                <bundleArguments>
                    <icon>${project.basedir}/src/main/resources/image/icon.ico</icon>
                </bundleArguments>
            </configuration>
        </plugin>` 
```

# elasticsearch - 基于数字与查询的接近程度的 Elasticsearch 评分

> ID：15880103
> 
> 赞同：4
> 
> 时间：2013-04-08T13:17:07.367
> 
> 标签：elasticsearch

我想根据数字与查询的接近程度对我的文档进行评分。鉴于我有两个文档`document1.field = 1`，然后我想要`document2.field = 10`一个查询 。或者换句话说，我想要对数字进行模糊查询之类的东西。我将如何实现这一目标？用例是我想支持价格查询（精确或范围），但想要对不完全在边界内的东西进行排名。`field = 3``document1._score > document2._score`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-01T20:47:28.057

您正在寻找[衰减函数](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-function-score-query.html#function-decay)：

> 衰减函数使用一个函数对文档进行评分，该函数根据文档的数字字段值与用户给定原点的距离而衰减。这类似于范围查询，但边缘平滑而不是框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:49:30.590

它可以使用[custom_score](http://www.elasticsearch.org/guide/reference/query-dsl/custom-score-query/)查询来实现，其中脚本将根据确切价格和所需价格之间差异的绝对值来确定提升。所需的价格应作为参数传递给脚本，以避免为每个请求重新编译脚本。

或者，它可以使用[custom_filters_score](http://www.elasticsearch.org/guide/reference/query-dsl/custom-filters-score-query/)查询来实现。此处的过滤器将包含围绕所需价格的不同范围。较小的范围将具有更高的提升，并且在列表中比较大的范围更高。

# c# - 图像字节 [] 进入 matlab

> ID：15880108
> 
> 赞同：0
> 
> 时间：2013-04-08T13:17:22.217
> 
> 标签：c#, .net, image, matlab

我有一个 24 位图像 RGB，它表示为压缩字节数组。

表示数组看起来像这样：R,G,B,R,G,B....

我已将 Matlab 文件编译成 dll，我想将数组发送到其中。

```
 RGBImage image = _currentImage as RGBImage;
   MWArray MatlabArray = new MWNumericArray(image.Height, image.Width, image[0].Data); 
```

这失败了；

但是几乎相同的代码

```
 BayerImage Image = _currentImage as BayerImage;            
    MWArray MatlabArray = new MWNumericArray(_currentImage.Height, _currentImage.Width, Image.GetBayerArrayAlignedRight()); 
```

奇迹般有效。别介意向右对齐。我的图像大小是 768X1024X3 = 2359296。我在构建 MWArray 时遗漏了一些东西，因为我遇到了这个异常：

```
An unhandled exception of type 'System.TypeInitializationException' occurred in CCMPlugin.dll

Additional information: The type initializer for 'MathWorks.MATLAB.NET.Arrays.MWNumericArray' threw an exception. 
```

你能告诉我我将字节数组传输到 MWArray 的方式有什么问题吗？

# c++ - 根据循环内的两个不同条件更新计数器

> ID：15880112
> 
> 赞同：0
> 
> 时间：2013-04-08T13:17:38.710
> 
> 标签：c++, c

我正在尝试用 C++ 制作一个通话计费程序。这个小程序的功能之一是能够根据输入的时间段更新折扣时间内的折扣分钟和营业时间内的正常价格分钟。

用户首先以字符串形式输入时间，例如 22:00

然后我有一个函数，它接受字符串并将其转换为整数。比如上面的 22:00 变成 2200

然后我有另一个帮助函数，它接受一个 int，上面的 int 并将其转换为十进制时间。

```
double turnTimeToDecimal(int timeRaw){

    double decimalTime;

    decimalTime = timeRaw * 0.01;

        return decimalTime;
 } 
```

没有折扣的营业时间在上午 8 点到 18.30 点之间，为了处理这个功能，我更新了一个 for 循环中的两个计数器，从 0 到 1417 分钟（24 小时）：

```
double myStartDecimal = 0.0;
double myStopDecimal = 0.0;

myStartDecimal = turnTimeToDecimal(myStartRaw);
myStopDecimal = turnTimeToDecimal(myStopRaw);

//hours and minutes start
int  hourStart = (int)floor(myStartDecimal);
int minuteStart = (int)round(100*(myStartDecimal - hourStart));

//hours and minutes stop
int hourStop = (int)floor(myStopDecimal);
int minuteStop = (int) round(100*(myStopDecimal - hourStop));

int totalMinutesPremium = 0;
int totalMinutesDiscount = 0;
int i = 0;

int k = 0;
for(k = (hourStart* 60) + minuteStart; k < (hourStop * 60) + minuteStop + round(((double)minuteStop/100)); k++){

    //will update the corresponding counter depending 
    //on the time stretch, business hours 8.00 - 18.30.
    if(hourStart >= 8 && hourStop < 18.5){
        totalMinutesPremium++;
    }else{
        totalMinutesDiscount++;
    }
}

//will give total minutes
cout << " k is: " << k << endl;

//will give the total number of minutes during the business hours and 
//the total number of minutes during the discount hours(non-bussiness hours)
cout << "Total minutes premium " << round(totalMinutesPremium) << 
        " Total Minutes discount " << round(totalMinutesDiscount) << endl; 
```

但是，该程序确实会检测输入的时间段是否在营业时间内，但在一种情况下除外。例如，如果时间在 7:30 和 8:30 之间（营业时间在 7:59-18:30 之间），则它不会返回营业时间内的分钟组合，我预计营业时间内是 30 分钟和分钟我预计折扣时间也是 30 分钟，因为折扣时间在 07:59 结束，并在 18:31 再次开始。

希望我说清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:28:17.683

在`for`循环内部，您根据`hourStart`和分配给定的分钟`hourStop`，而*不是*根据给定的分钟是否在工作时间。如果电话在折扣时间进行，则整个电话将被打折。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:36:55.937

> “但是 HourStop 是一个整数。对于 hourStart 也是如此”

那么它就行不通了，如果不能`int`像你在这里做的那样使用带 s 的十进制值：

```
hourStop < 18.5 
```

好吧..你*可以*，但它不会按照你想要的方式工作。如果有，`int hourStop = 18.5`那么它将被截断为 18，因为它不能是小数。您需要使用不同的类型，例如`double`

此外，循环中的条件取决于`hourStart`并且`hourStop`在循环中永远不会改变：

```
if(hourStart >= 8 && hourStop < 18.5){ 
```

所以你总是会遇到同样的`if`情况（不管是什么情况）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:28:16.630

为什么要使用循环？为什么不只是做数学？

虽然不是完整的代码答案...您可以填写空白...

```
if( startTime >= startOfPremiumPeriod && endTime <= endOfPremiumPeriod )
   totalMinutesPremimum = endTime - startTime;
else if( startTime < startOfPremiumPeriod && endTime < startOfPremimumPeriod )
   totalMinutesDiscount = endTime - startTime;
.... etc. etc. etc. 
```

您可以通过在结束时间加上 24 小时来考虑开始时间在午夜之前和结束时间在午夜之后的情况......

```
if( endTime < startTime ) endTime += 1440; 
```

# jquery - 每次都显示错误信息。在 MVC 项目中使用 Jquery 验证器

> ID：15880116
> 
> 赞同：-1
> 
> 时间：2013-04-08T13:17:56.633
> 
> 标签：jquery, asp.net-mvc-4, jquery-validate, jquery-validation-engine

下面是我的 Html 代码和 Javascript 代码。

```
<h2>Register</h2>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset class="acloginform">
        <legend>Register User</legend>

        <ol>
            <li>
                <div class="editor-label">
                    @Html.LabelFor(model => model.Email_Id)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(model => model.Email_Id, new { @id = "txt_EmailId" })
                    @Html.ValidationMessageFor(model => model.Email_Id)
                </div>
            </li>
            <li>
                <div class="editor-label">
                    @Html.LabelFor(model => model.FirstName)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(model => model.FirstName)
                    @Html.ValidationMessageFor(model => model.FirstName)
                </div>
            </li>
            <li>
                <div class="editor-label">
                    @Html.LabelFor(model => model.LastName)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(model => model.LastName)
                    @Html.ValidationMessageFor(model => model.LastName)
                </div>
            </li>
            <li>
                <div class="editor-label">
                    @Html.LabelFor(model => model.Password)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.Password)
                    @Html.ValidationMessageFor(model => model.Password)
                </div>
            </li>
            <li>
                <div class="editor-label">
                    @Html.LabelFor(model => model.ConfirmPassword)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.ConfirmPassword)
                    @Html.ValidationMessageFor(model => model.ConfirmPassword)
                </div>
            </li>
            <li>
                <input type="submit" value="Register" />
                @Html.ActionLink("Back to Home Page", "Index", new { Controller = "Home" }, new { @class = "regislnk" })
            </li>
        </ol>
    </fieldset>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

<script type="text/javascript">  

    $(document).ready(function () {        

        jQuery.validator.addMethod("Duplicate_EmailId", function (value) {
            $.ajax({
                url: '/User/CheckEmailId?EmailId=' + value,
                async: false,
                success: function (data) {
                    alert(data);
                    if (data == true)
                        return false;
                    else
                        return true;
                },
            });          

        }, "Email Id already Exists");

        $('#txt_EmailId').addClass('Duplicate_EmailId');    
    });

</script> 
```

我在用户控制器下的 c# 方法是

```
public JsonResult CheckEmailId(string EmailId)
{
    var res = my method;
    return Json(res, JsonRequestBehavior.AllowGet);
} 
```

这里错误消息显示在每个结果成功/失败上。并且方法正在调用

两次。关于文本框的模糊以及表单提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:48:10.517

你的直接问题是你没有从你的验证方法中返回任何东西，所以这就像返回 false

```
jQuery.validator.addMethod("Duplicate_EmailId", function (value) {

    // returning nothing here, means validation fails

}, "Email Id already Exists"); 
```

您从 ajax 方法返回 true/false，但不是从验证方法返回，您需要这样的东西

```
jQuery.validator.addMethod("Duplicate_EmailId", function (value) {

    var validationResult = false;

    $.ajax({
        url: '/test/CheckEmailId?EmailId=' + value,
        async: false,
        success: function (data) {
            console.log(data);
            if (data == true)
                validationResult = false;
            else
                validationResult = true;
        },
    });

    return validationResult;

}, "Email Id already Exists"); 
```

**但**我会说像这样将 async 设置为 false 并不理想，因为它会在进行 ajax 调用时禁止用户填写其他字段。远程方法的实现中有一些聪明的东西，所以它可以是异步的。如果可以使用，请使用插件的远程方法。

# asp.net - asp.net 中的子帐户

> ID：15880120
> 
> 赞同：0
> 
> 时间：2013-04-08T13:18:07.247
> 
> 标签：asp.net

我正在尝试创建一个用户登录并添加一个或多个孩子（子帐户，但它们不是用户帐户）的网站。

然后，用户可以为每个孩子创建一个条目，如日记条目。我希望用户能够在顶层选择孩子，然后提交日记条目，而无需重新选择该条目的孩子。用户将选择用户创建的其中一个孩子，并且用户在这个“子帐户”中所做的一切——比如上传照片、提交日记条目或其他任何事情——都是为选定的孩子完成的。我想避免用户添加新日记帐条目的情况，如果用户创建了多个孩子，则用户每次都必须选择该条目是哪个孩子。

我查看了 Ajax Tab 控件和 Multiview 控件，但我不确定这是否可行，因为每次用户添加另一个子项时，我都需要动态创建一个新的选项卡/视图。任何帮助是极大的赞赏。

# c++ - 在 linux 中创建“虚拟”OpenGL 上下文

> ID：15880125
> 
> 赞同：3
> 
> 时间：2013-04-08T13:18:16.010
> 
> 标签：c++, macos, unix, opengl, ubuntu

如何在我的程序 (C++) 中创建一个纯粹在内部使用的 OpenGL 上下文？也就是说，它将渲染一个场景，然后我将获取像素数据以在程序的其余部分中使用（保存到图像是一个足够接近的类比 - 我对帧缓冲区的东西很好，我只需要创建上下文）。

我根本不需要窗口，这只需要在 Unix 上工作（特别是 OSX 和 Ubuntu，如果每个解决方案都不同，那么 Ubuntu 更重要）。如果我能提供帮助，我不想使用 GLUT 或类似的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:22:50.027

OSMesa（[http://www.mesa3d.org/osmesa.html](http://www.mesa3d.org/osmesa.html)）可能适合您的需要

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T14:55:54.563

> 我根本不需要窗户

如果你想让它在 Linux 上的所有 GPU 和安装上工作，你将不得不使用 X 服务器（直到屏幕外 EGL 支持广泛，但到目前为止 NVidia 告诉他们不会支持它）。您可以使用 GLX PBuffer 或未映射（=不可见）的窗口。X 服务器必须处于活动状态，即没有被分离或处于非活动的 VT 上，这样它才能真正利用 GPU。

> 只需要在 Unix 上工作（特别是 OSX 和 Ubuntu

OpenGL 在 Linux 和 MacOS X 中的完成方式非常非常不同！

# asp.net - 为什么 FindControl 有时在 UserControl 的 FormView 内什么也找不到？

> ID：15880126
> 
> 赞同：1
> 
> 时间：2013-04-08T13:18:33.273
> 
> 标签：asp.net

我有`FormView`一个 ASP.NET 用户控件。`EditItemTemplate`包含一些控件，我想在创建它们时在服务器端运行一些代码，以根据某些条件设置一些值。

似乎`Control.Load`and`PreRender`事件不适合这种情况，因为有时可以在没有任何子控件的情况下呈现控件（不确定为什么会发生这种情况）。具体来说，如果我`FormView.ChildControlsCreated`在调试器中查看，我总是看到`True`，但是当我尝试`FindControl`按名称时，有时它在那里，有时它不在。

我应该何时执行需要访问内部控件的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:54:45.347

发生这种情况是因为`FormViewMode`有时不同。没有模板`ReadOnlyMode`，因此只要表单处于该模式，`FindControl`就找不到任何东西。

# ruby-on-rails - 生产环境中的轻便摩托车错误

> ID：15880127
> 
> 赞同：1
> 
> 时间：2013-04-08T13:18:33.600
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid

这是我的 mongoid.yml

```
development:
  sessions:
    default:
      database: myapp
      # Provides the hosts the default session can connect to. Must be an array
      # of host:port pairs. (required)
      hosts:
        - localhost:27017
      options:
test:
  sessions:
    default:
      database: myapp
      hosts:
        - localhost:27017
      options:
        consistency: :strong
        # In the test environment we lower the retries and retry interval to
        # low amounts for fast failures.
        max_retries: 1
        retry_interval: 0
production:
  sessions:
    default:
      database: remote_database
      username: remote_user
      password: 111111
      hosts: 
        - remotedomain.com:27017
      options:
        safe: true
  options:
    identity_map_enabled: true 
```

我的 mongodb 数据库在其他服务器上不同。问题是当我运行这个命令时：

```
bundle exec rake environment tire:import CLASS=Cv FORCE=true 
```

我的 mongodb 服务器位于与我的 rails 应用程序不同的服务器上，该应用程序具有不同的 IP 和不同的子域。

**因此，如果我运行此命令，mongoid 在 localhost 中找不到 mongodb 服务器，**我在生产服务器中收到错误：

```
Could not connect to any secondary or primary nodes for replica set <Moped::Cluster nodes=[<Moped::Node resolved_address="127.0.0.1:27017">]> 
```

我需要在我的开发环境中使用我的 localhost mongodb 数据库，在生产服务器中使用我的 remoteserver mongodb 数据库。

**我想如何解决这个问题**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:30:52.330

感谢 Magnuss 和 Durran。回应是：

```
rake environment tire:import CLASS='Object' FORCE=true RAILS_ENV=production 
```

添加`RAILS_ENV=production`并解决了问题:)。

谢谢！

# android - Android 应用程序在模拟器上完美运行，但在我自己的手机上崩溃

> ID：15880130
> 
> 赞同：0
> 
> 时间：2013-04-08T13:18:37.077
> 
> 标签：android, list, contacts

我创建了一个 Android 应用程序，它创建了一个包含所有联系人电子邮件的列表，当您单击联系人时，将电子邮件发送给他。

问题是当应用程序必须接收联系人列表时，在我的手机上崩溃，但在 eclipse 的 ADV 上完美运行。

主类：

```
package com.example.mail;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.Toast;

public class MainActivity extends Activity implements OnClickListener{

public static final int R_CODE_CONTACT_LIST =10;

Intent intent;
EditText txtTo,txtSubject,txtMsg;
ImageButton btnSend,btnContacts;    
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    txtTo=(EditText)findViewById(R.id.txtto);
    txtSubject=(EditText)findViewById(R.id.txtsubject);
    txtMsg=(EditText)findViewById(R.id.txtmessage);
    btnSend=(ImageButton)findViewById(R.id.btnsend);
    btnContacts=(ImageButton)findViewById(R.id.btncontacts);

    btnSend.setOnClickListener(this);
    btnContacts.setOnClickListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
public void onClick(View view) {

    switch (view.getId()){

    case R.id.btnsend:
        if (allTextWritten()){
            Intent intent = new Intent(Intent.ACTION_SENDTO); // it's not ACTION_SEND
            intent.setType("text/plain");
            intent.putExtra(Intent.EXTRA_SUBJECT, txtSubject.getText().toString());
            intent.putExtra(Intent.EXTRA_TEXT, txtMsg.getText().toString());
            intent.setData(Uri.parse("mailto:"+txtTo.getText().toString())); // or just "mailto:" for blank
            //intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); // this will make such that when user returns to your app, your app is displayed, instead of the email app.
            startActivity(intent);

        }
        else{
             Toast.makeText(MainActivity.this, "Please, fill all fields.", Toast.LENGTH_SHORT).show();
        }

        break;
    case R.id.btncontacts:
        intent =new Intent(MainActivity.this,ContactsList.class);
        startActivityForResult(intent,R_CODE_CONTACT_LIST);
        break;
    }

}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    try{
        Log.d("request",""+requestCode);
        Log.d("result",""+resultCode);
        if (requestCode==R_CODE_CONTACT_LIST)
          txtTo.setText(data.getStringExtra("email"));
        else
          txtTo.setText("");
    }
    catch (Exception e){
        //Toast.makeText(this, "list closed",Toast.LENGTH_SHORT).show();  //Control line
    }

}

private boolean allTextWritten(){
    boolean isWritten=true;
    //if all text boxes are filled returns true 
    return isWritten & !("".equals(txtTo.getText().toString()))
                     &     !("".equals(txtSubject.getText().toString()))
                     & !("".equals(txtMsg.getText().toString()));       
}

} 
```

列表类：

```
package com.example.mail;

import java.util.ArrayList;
import android.app.ListActivity;
import android.content.ContentResolver;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.BaseColumns;
import android.provider.ContactsContract;
import android.provider.ContactsContract.CommonDataKinds.Email;
import android.provider.ContactsContract.CommonDataKinds.Phone;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class ContactsList extends ListActivity {
private final int   REQUEST_CODE=10;
//private final int     FAIL_CODE=-1;
private boolean destroy=true;

protected ArrayList<String> contactList =new ArrayList<String>();
protected ArrayList<String> mail =new ArrayList<String>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // setContentView(R.layout.activity_lista);
    getContactEmails(this);

    setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, contactList));
}

public void onPause(){
    super.onPause();
    if (destroy){
        Log.d("destroy",""+destroy);
        Intent intent=new Intent();
        intent.putExtra("email","");
        setResult(REQUEST_CODE,intent);
        destroy=false;
    }
}

public void onListItemClick(ListView parent, View v, int position, long id){
    Intent intent=new Intent();
    intent.putExtra("email",mail.get(position));
    setResult(REQUEST_CODE,intent);
    destroy=false;
    finish();
   }

private void getContactEmails(Context context) {
    String emailIdOfContact = null;
    int emailType = Email.TYPE_WORK;
    String contactName = null;

        ContentResolver cr = context.getContentResolver();
        Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,null, null, null);

        if (cur.getCount() > 0) {
            while (cur.moveToNext()) {
                int newMail=1;
                String id = cur.getString(cur.getColumnIndex(BaseColumns._ID));
                contactName = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                // Log.d("mail","....contact name....." +contactName);
                cr.query(
                        ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,  ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                + " = ?", new String[] { id }, null);

                Cursor emails = cr.query(Email.CONTENT_URI, null,Email.CONTACT_ID + " = " + id, null, null);
                while (emails.moveToNext()) {
                    String multiMail="";
                    emailIdOfContact = emails.getString(emails.getColumnIndex(Email.DATA));
                    if (newMail!=1)
                        multiMail=""+newMail;
                    contactList.add(contactName+multiMail+" - "+emailIdOfContact.substring(0,10)+"...");
                    mail.add(emailIdOfContact);
                    // Log.d("mail","...COntact Name ...." + contactName + "...contact Number..."+ emailIdOfContact);
                    emailType = emails.getInt(emails.getColumnIndex(Phone.TYPE));
                    newMail++;

                }
                emails.close();

            }
        }// end of contact name cursor
        cur.close();
}

} 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.mail"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.mail.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity 
        android:name="com.example.mail.ContactsList"
        android:theme="@style/GeneralBackgroudStyle"/>
</application> 
```

有人有什么想法吗？谢谢大家。

* * *

**编辑**Logcat 异常：

```
04-09 09:47:06.340: E/AndroidRuntime(18915): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mail/com.example.mail.ContactsList}: java.lang.StringIndexOutOfBoundsException
04-09 09:47:06.340: E/AndroidRuntime(18915):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
04-09 09:47:06.340: E/AndroidRuntime(18915):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-09 09:47:06.340: E/AndroidRuntime(18915):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-09 09:47:06.340: E/AndroidRuntime(18915):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-09 09:47:06.340: E/AndroidRuntime(18915):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 09:47:06.340: E/AndroidRuntime(18915):    at android.os.Looper.loop(Looper.java:130)
04-09 09:47:06.340: E/AndroidRuntime(18915):    at android.app.ActivityThread.main(ActivityThread.java:3691)
04-09 09:47:06.340: E/AndroidRuntime(18915):    at java.lang.reflect.Method.invokeNative(Native Method)
04-09 09:47:06.340: E/AndroidRuntime(18915):    at java.lang.reflect.Method.invoke(Method.java:507)
04-09 09:47:06.340: E/AndroidRuntime(18915):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
04-09 09:47:06.340: E/AndroidRuntime(18915):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
04-09 09:47:06.340: E/AndroidRuntime(18915):    at dalvik.system.NativeStart.main(Native Method)
04-09 09:47:06.340: E/AndroidRuntime(18915): Caused by: java.lang.StringIndexOutOfBoundsException
04-09 09:47:06.340: E/AndroidRuntime(18915):    at java.lang.String.substring(String.java:1651)
04-09 09:47:06.340: E/AndroidRuntime(18915):    at com.example.mail.ContactsList.getContactEmails(ContactsList.java:82)
04-09 09:47:06.340: E/AndroidRuntime(18915):    at com.example.mail.ContactsList.onCreate(ContactsList.java:34)
04-09 09:47:06.340: E/AndroidRuntime(18915):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
04-09 09:47:06.340: E/AndroidRuntime(18915):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-09 09:47:06.340: E/AndroidRuntime(18915):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:56:12.410

```
contactList.add(contactName+multiMail+" - "+emailIdOfContact.substring(0,10)+"..."); 
```

异常发生在 substring() 调用上。由于您对这些值进行了硬编码，因此我假设它`emailIdOfContact`少于 10 个字符，因此会出现错误。您真的想在不事先检查的情况下对其进行硬编码吗？您可能在模拟器中有工作字符串，但在您的实际手机上没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T12:06:29.990

有一个类似的问题：

通过 onActivity 结果返回后：

*   在手机上：ArrayList 数据丢失，ArrayList.size 始终为 0；
*   模拟器：ArrayList 数据存在且正常

将数组声明为静态同步列表，现在它适用于手机和模拟器。

用这个.....

私有静态列表 array_list_name = Collections.synchronizedList(new ArrayList())

官方文档：[这里](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)

# excel - Excel VBA 意外截断

> ID：15880131
> 
> 赞同：1
> 
> 时间：2013-04-08T13:18:39.040
> 
> 标签：excel, vba, truncate

所以我花了一天的大部分时间来调试我的 VBA 类模块，并遇到了一个令人担忧的现象。

在主电子表格上，我有一个格式为“货币”的单元格，精度为 9 位小数。在我的 VBA 类中，我有一个属性（双精度），它在实例化时采用该单元格值。IE，

```
myClass.loanDefault_7 = Range("loanDefaults")(1,7) 
```

但是，当我在分配后检查存储在 myClass.loanDefault_7 中的值时，它只有 4 位小数精度。

我的问题是为什么 VBA 会自动（未经我的许可）截断这个值？我想了解为什么会发生这种情况，以及将来如何防止这种情况发生。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:39:29.850

尝试使用该`Value2`属性：

```
myClass.loadDefault_7 = Range("loadDefaults")(1,7).Value2 
```

来自 MSDN：

> 此属性与 Value 属性之间的唯一区别是 Value2 属性不使用 Currency 和 Date 数据类型。您可以使用 Double 数据类型将使用这些数据类型格式化的值作为浮点数返回。

似乎该`Value`属性会自动将值强制转换为货币数据类型（AFAIK 只能表示小数点右侧的 4 个数字）。

# python - Jensen-Shannon 分歧

> ID：15880133
> 
> 赞同：21
> 
> 时间：2013-04-08T13:18:39.967
> 
> 标签：python, distance, metrics

我还有一个问题，希望有人能帮助我。

我正在使用 Jensen-Shannon-Divergence 来测量两个概率分布之间的相似性。考虑到使用以 2 为底的对数，相似性分数似乎是正确的，因为它们介于 1 和 0 之间，0 表示分布相等。

但是，我不确定某处是否确实存在错误，并且想知道是否有人可以说“是的，这是正确的”或“不，你做错了什么”。

这是代码：

```
from numpy import zeros, array
from math import sqrt, log

class JSD(object):
    def __init__(self):
        self.log2 = log(2)

    def KL_divergence(self, p, q):
        """ Compute KL divergence of two vectors, K(p || q)."""
        return sum(p[x] * log((p[x]) / (q[x])) for x in range(len(p)) if p[x] != 0.0 or p[x] != 0)

    def Jensen_Shannon_divergence(self, p, q):
        """ Returns the Jensen-Shannon divergence. """
        self.JSD = 0.0
        weight = 0.5
        average = zeros(len(p)) #Average
        for x in range(len(p)):
            average[x] = weight * p[x] + (1 - weight) * q[x]
            self.JSD = (weight * self.KL_divergence(array(p), average)) + ((1 - weight) * self.KL_divergence(array(q), average))
        return 1-(self.JSD/sqrt(2 * self.log2))

if __name__ == '__main__':
    J = JSD()
    p = [1.0/10, 9.0/10, 0]
    q = [0, 1.0/10, 9.0/10]
    print J.Jensen_Shannon_divergence(p, q) 
```

问题是我觉得例如比较两个文本文档时分数不够高。然而，这纯粹是一种主观感受。

一如既往地感谢任何帮助。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-12-11T21:29:31.343

请注意，下面的 scipy 熵调用是 Kullback-Leibler 散度。

见：[http ://en.wikipedia.org/wiki/Jensen%E2%80%93Shannon_divergence](http://en.wikipedia.org/wiki/Jensen%E2%80%93Shannon_divergence)

```
#!/usr/bin/env python
from scipy.stats import entropy
from numpy.linalg import norm
import numpy as np

def JSD(P, Q):
    _P = P / norm(P, ord=1)
    _Q = Q / norm(Q, ord=1)
    _M = 0.5 * (_P + _Q)
    return 0.5 * (entropy(_P, _M) + entropy(_Q, _M)) 
```

另请注意，问题中的测试用例看起来有误？？p 分布的总和不等于 1.0。

见：[http ://www.itl.nist.gov/div898/handbook/eda/section3/eda361.htm](http://www.itl.nist.gov/div898/handbook/eda/section3/eda361.htm)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-03-03T10:51:46.127

由于*Jensen-Shannon* **距离**( [`distance.jensenshannon`](https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.jensenshannon.html?highlight=jensenshannon#scipy.spatial.distance.jensenshannon)) 已包含在 中`Scipy 1.2`，因此*Jensen-Shannon* **散度**可以作为 Jensen-Shannon 距离的平方得到：

```
from scipy.spatial import distance

distance.jensenshannon([1.0/10, 9.0/10, 0], [0, 1.0/10, 9.0/10]) ** 2
# 0.5306056938642212 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-08T14:50:29.237

获取一些具有已知差异的分布数据，并将您的结果与这些已知值进行比较。

顺便说一句：KL_divergence 中的总和可以使用[zip 内置函数](http://docs.python.org/2/library/functions.html#zip)重写，如下所示：

```
sum(_p * log(_p / _q) for _p, _q in zip(p, q) if _p != 0) 
```

这消除了很多“噪音”，也更加“pythonic”。`0.0`与and的双重比较`0`是不必要的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-05-10T18:50:47.783

python中用于n个概率分布的通用版本

```
import numpy as np
from scipy.stats import entropy as H

def JSD(prob_distributions, weights, logbase=2):
    # left term: entropy of misture
    wprobs = weights * prob_distributions
    mixture = wprobs.sum(axis=0)
    entropy_of_mixture = H(mixture, base=logbase)

    # right term: sum of entropies
    entropies = np.array([H(P_i, base=logbase) for P_i in prob_distributions])
    wentropies = weights * entropies
    sum_of_entropies = wentropies.sum()

    divergence = entropy_of_mixture - sum_of_entropies
    return(divergence)

# From the original example with three distributions:
P_1 = np.array([1/2, 1/2, 0])
P_2 = np.array([0, 1/10, 9/10])
P_3 = np.array([1/3, 1/3, 1/3])

prob_distributions = np.array([P_1, P_2, P_3])
n = len(prob_distributions)
weights = np.empty(n)
weights.fill(1/n)

print(JSD(prob_distributions, weights))
#0.546621319446 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-11T09:48:22.360

明确遵循[维基百科文章](https://en.wikipedia.org/wiki/Jensen%E2%80%93Shannon_divergence)中的数学：

```
def jsdiv(P, Q):
    """Compute the Jensen-Shannon divergence between two probability distributions.

    Input
    -----
    P, Q : array-like
        Probability distributions of equal length that sum to 1
    """

    def _kldiv(A, B):
        return np.sum([v for v in A * np.log2(A/B) if not np.isnan(v)])

    P = np.array(P)
    Q = np.array(Q)

    M = 0.5 * (P + Q)

    return 0.5 * (_kldiv(P, M) +_kldiv(Q, M)) 
```

# ruby - 例外：为什么添加括号会改变任何东西？

> ID：15880136
> 
> 赞同：6
> 
> 时间：2013-04-08T13:18:42.540
> 
> 标签：ruby, exception

关于 Ruby 如何处理内联错误处理程序，我想了解一些事情

**情况1**

这是一个常见的用例

```
def foo
  raise Error
end

bar = foo rescue 1
# => 1
bar
# => 1 
```

它按预期工作。表达式`foo rescue 1`返回`1`并正确分配给`bar`.

**案例2**

Ruby 允许解构数组，所以这种行为看起来很奇怪。

```
baz = 'a'
baz, bar = foo rescue [1, 2]
# => [1, 2]
baz
# => 'a'
bar 
# => nil 
```

该表达式返回数组`[1, 2]`，但不解构或分配它。它完全跳过了分配。

**案例3**

但是，当您将错误括在括号中时，解构就会起作用。

```
baz, bar = (foo rescue [1, 2])
# => [1, 2]
baz
# => 1
bar
# => 2 
```

**案例4**

加分项：引发错误并尝试内联处理它也会跳过分配

```
baz = raise Error rescue 1
# => 1
baz
# => nil 
```

但是添加括号使它起作用。

**编辑**：

我在 Ruby 1.9.3-p392 和 Ruby 2.0.0 上对此进行了测试

**编辑 2**：

我为案例添加了标签

**编辑 3**：

显然有些人认为这不是一个问题，所以也许标题不够明显。这是全文的问题：

为什么会发生这些不一致，为什么添加括号会改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:53:09.513

您的案例 2 与此相同：

```
baz = 'a'
(baz, bar = foo) rescue [1, 2] 
```

由于`foo`引发错误，将值分配给`baz`并`bar`失败，因此`baz`仍然是`"a"`，并且`bar`仍然是`nil`，在解析阶段分配的值。然后，分配被救出，返回值为`[1, 2]`.

您的案例 4 与此相同：

```
(baz = raise Error) rescue 1 
```

由于分配的右侧引发错误，分配`baz`失败，并且`baz`将保持为`nil`，在解析阶段分配。然后，赋值被解救，返回值为`1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:08:10.623

更新：对不起，我的例子没有奏效。我想这是解析器中的一个错误，因为简单的分配不会遇到这个问题。

```
bar, baz = 1,2  # bar == 1, baz == 2
bar = foo rescue [3,4] # bar == [3,4], baz == 2
bar, baz = 1,2  # bar == 1, baz == 2
bar, baz = foo rescue [3,4] # no assignment done:  bar == 1, baz == 2 
```

甚至救援的优先级也无法解释为什么简单的赋值完成了而 multi- 没有。

# javascript - JavaScript 在 webView 中不起作用

> ID：15880147
> 
> 赞同：1
> 
> 时间：2013-04-08T13:19:06.490
> 
> 标签：javascript, android, webview

我对 WebView 有一些问题。Javascript 不起作用。在带有 loadUrl() 的 android 2.2 上，它运行良好。**但是当我使用loadDataWithBaseURL**在 android 4 上运行它时，它不起作用。我究竟做错了什么？

**主要活动**

```
 import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.Menu;
import android.webkit.WebView;
import android.widget.Toast;

public class MainActivity extends Activity {

    String webData = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        webData = getHtmlFromAsset();

        WebView webView = (WebView) findViewById(R.id.webView1);
        webView.getSettings().setJavaScriptEnabled(true);
        //webView.loadUrl("file:///android_asset/index.html");
        //webView.loadData(webData, "text/html", "UTF-8");

        webView.addJavascriptInterface(new JavaScriptIntefeise(this), "Android");
        webView.loadDataWithBaseURL(getAssets().toString(), webData, "text/html", "UTF-8", null);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    private String getHtmlFromAsset() {
        InputStream is;
        StringBuilder builder = new StringBuilder();
        String htmlString = null;
        try {
            is = getAssets().open(getString(R.string.index));
            if (is != null) {
                BufferedReader reader = new BufferedReader(new InputStreamReader(is));
                String line;
                while ((line = reader.readLine()) != null) {
                    builder.append(line);
                }

                htmlString = builder.toString();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }

        return htmlString;
    }

    class JavaScriptIntefeise {

        Context ctx;

        public JavaScriptIntefeise(Context ctx) {
            this.ctx = ctx;
        }

        public void showToast() {
            Toast.makeText(ctx, "ping", 3000).show();
        }
    }
} 
```

简单的 sgnalR 客户端**index.html**

```
<html>
<head>
<title>Insert title here</title>
<script type="text/javascript" src="json2.js" ></script>
<script type="text/javascript" src="jquery-1.9.0.js" ></script>
<script type="text/javascript" src="jquery.signalR.js" ></script>
<script type="text/javascript"         src="http://192.168.0.100/FloorSpy.DuplexService/signalr/hubs/"></script>

</head>
<body>
<span>signalR</span>

<script type="text/javascript">
if(!window.jQuery) document.body.style.backgroundColor = '#ff8000';;

$.connection.hub.url = "http://192.168.0.100/FloorSpy.DuplexService/signalr";
var connection = $.connection.notif;

connection.client.pong = function(data) {
    Android.showToast();
};

$.connection.hub.start()
.done(function() {
  // Android.showToast();
})

.fail(function(data) {
    //Android.showToast();
});

</script>
</body>
</html> 
```

我认为连接库的错误。 **谢谢你的建议！**

# jquery - jQuery mobile / phonegap 未捕获第二个 html 页面上的滑动

> ID：15880148
> 
> 赞同：0
> 
> 时间：2013-04-08T13:19:17.433
> 
> 标签：jquery, cordova, jquery-mobile

** 以为我会发布更新。

显然 JQM 无法以我尝试的方式处理页面。所以我想要的页面结构是这样的：

"index.html" | |-- 子页面 1 |-- 子页面 2 |-- 子页面 3 等

"page2.html" | |-- 子页面 1 |-- 子页面 2 |-- 子页面 3 等

并使用向左或向右滑动在页面之间导航！单个页面很好，但是一旦我从“index.html”转到“page2.html”，mobile.changepage 就无法处理，所以“错误”就会出现。

**

我正在尝试开发一个利用滑动功能的 jquery 移动（phonegap）应用程序，但我在这里遗漏了一些东西，我确信这将是一个面对面的时刻，但我无法理解这一点。

据我了解，jqm 的工作方式（使用 ajax 调用页面时最好）我需要将我网站的所有代码加载到 index.html 文件中！我已经做到了。然后我需要调用 $(document).on('pageinit', '#swipehome', function() 例如在文档加载、初始化等时执行代码。但我似乎不明白为什么我不能拾取第二页上的事件。我有两个页面（将更多，但 2 用于测试此过程） index.html 和 swipe.html

index.html 包含指向 *.js 和 *.css 的所有链接。它从功能幻灯片页面调用 swipe.html

现在是问题的症结所在，为什么 swipe.html 上的滑动事件没有被拾取？

据我了解，如果您将 js 放在它链接的 index.html 页面中，那么通过 ajax 页面加载，您可以在第二页中使用它吗？

我创建了一个简单的 jsf 来展示我需要的东西！

[http://jsfiddle.net/bFM7B/](http://jsfiddle.net/bFM7B/)

基本上我想要从 index.html 链接的 swipe.html 页面中的功能

任何帮助表示赞赏！

乔治

这是所有的代码！

** 更新到 main.JS ** 我现在正在使用下面更新的代码在第二页中捕获滑动事件，**但**页面没有改变！！！“主.js”

```
/* === UPDATED CODE === */
$(document).on('swipe', '#swipehome', function() {
    console.log('Changing to #swipepage1');
    $.mobile.changePage('#swipepage1','slide',false,true);
    console.log('End');
});

    //Initialise the slider on the swipe page
$(document).on('pageinit', '#swipehome', function() {   
    $("#home").swiperight(function() {
        $.mobile.changePage("#page1",{ transition: "slide" , reverse: true});
    });

    $("#home").swipeleft(function() {
        $.mobile.changePage("#page2",{ transition: "slide"});
    });

    $("#page1,#page2").swipe(function() {
        $.mobile.changePage("#swipehome", { transition: "fade"});
    });
});

//Initialise the slider on the test page
$(document).on('pageinit', '#testg', function() {   
    $('#foobar').bxSlider({
        touchEnabled: true,
        pager: false,
        pagerSelector: false
    });
});

$(document).bind( "mobileinit", function() {
    $.support.cors = true;
    $.mobile.allowCrossDomainPages = true;
});

function slidePage(page) {
    $.mobile.changePage(page,{'transition': "slide"});
    console.log(page);
} 
```

“索引.html”

```
<!DOCTYPE html>
<html>
<head>
    <title>swipe test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

    <!-- STYLESHEETS //-->
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure-1.3.0-rc.1.min.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />

    <!-- JavaScripts //-->
    <script src="js/cordova-2.5.0.js"></script>
    <script src="js/jquery-1.9.1.js"></script>
    <script src="js/jquery.bxslider.js"></script>
    <script src="js/jquery-ui-1.9.2.custom.min.js"></script>
    <script src="js/jquery.mobile-1.3.0.js"></script>
    <script src="js/database.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/main.js"></script>
</head>

<body>
    <div data-role="page" id="start">   
        <div data-role="content">
            <div style="margin: 0 auto;">
                <a href="#" onClick="slidePage('swipe.html');" class="next" data-role="button" data-theme="a" style="width: 150px; margin: 0 auto;">Swipe</a>
            </div>
        </div>
    </div>
</body>
</html> 
```

“刷卡.html”

```
<!DOCTYPE html> 
<html> 
<body>
   <div data-role="page" id="swipehome">
   <div data-role="content">
    <p>Swipe left or right to change pages</p>
  </div>
</div>

<div data-role="page" id="page1">
<div data-role="content">
    <p>You Swiped right<br/>Swipe any direction to go back</p>
</div>
</div>

<div data-role="page" id="page2">
<div data-role="content">
    <p>You Swiped left<br/>Swipe any direction to go back</p>
</div>
</div>
</body>
</html> 
```

希望这可以帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:47:37.170

您不需要将所有 javascript 提取到一个 js 文件中。

您的问题很可能来自这样一个事实，即在您注册滑动回调时，只有 index.html 中的元素被注册，而不是 swipe.html 中的元素。加载 swipe.html 中的元素后，您需要重新注册滑动回调。

# c++ - 如何将工厂模式与仿函数一起使用？

> ID：15880151
> 
> 赞同：0
> 
> 时间：2013-04-08T13:19:33.840
> 
> 标签：c++, templates, factory, functor

我有一组函子用于计算对象范围内的特定内容。本质上，每个仿函数都实现`operator()`：

```
template <typename Iterator1,
          typename Iterator2> double operator()( Iterator1 it1,
                                                 Iterator2 it2 ) const
{
  return( 0.0 );
} 
```

我现在有一组可以用不同的仿函数*创建的对象。*我通过模板创建者函数解决了这个问题：

```
template <class Functor> Foo createFoo( ... // some parameters for foo objects
                                        Functor f = Functor() )
{
  // calculate stuff for "foo" using functor "f"
} 
```

我现在想将函子选择*委托*给我的程序的用户，所以我决定创建一个函子工厂。给定一个仿函数的描述性名称，我想创建适当的仿函数，以便它可以用于创建所有`Foo`对象，如上所述。

不过，这就是我卡住的地方：我无法创建一个返回模板仿函数的工厂，因为如果不编码我想要创建的确切类型的仿函数，我就无法调用这个函数。

我考虑过创建`operator()`某个基类的虚函数，即`FunctorBase`，但我不希望与虚函数调用相关的性能开销。避免上述开销是我首先选择使用模板的原因。

我在这里陷入僵局，肯定会感谢一些评论。

**编辑**：

我打算做什么（无效代码）：

```
DistanceFunctor f = createFunctor( "Bar" ); // Create a functor from a client-supplied string

Foo createFoo( ..., // parameters for foo
               f ); 
```

在评论中，还建议使用虚函数。但是，如上所述的当前仿函数设计不适用于虚函数，因为编译器无法使函数模板为虚拟。调整仿函数类以将两个迭代器类型作为模板参数是可能的，但非常笨拙。

**编辑**：

仿函数的工作方式与 FLANN 中使用的类似。[有关示例，请参见 git 存储库](https://github.com/mariusmuja/flann/blob/master/src/cpp/flann/algorithms/dist.h)。我看不出如何以不同的方式指定这些函子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:35:37.767

在考虑了您的要求之后，这是我想到的第一件事：您的不同仿函数显然不能像现在定义的那样从公共基类派生，因为您不能使模板化为`operator()`虚拟的。但是，如果将模板参数从运算符推到函子本身，则*可以使该运算符为虚拟：*

```
template <class Iterator>
struct Functor {
  virtual double operator()(Iterator it1, Iterator it2) const = 0;
}; 
```

这有什么帮助？乍一看在 Functor 级别的模板看起来并不好，因为您现在必须知道调用之外的参数`createFunctor`，事实上，如果您调用它，您将必须显式指定迭代器类型：

```
//some concrete functors
template <class It>
struct FuncImpl_Bar : Functor<It> { /* ... implement op()(It, It) ... */ }:

template <class It>
struct FuncImpl_Meow : Functor<It> { /* ... implement op()(It, It) ... */ }:

template <class Iterator>
std::shared_ptr<Functor<Iterator>> createFunctor(std::string const& str)
{
  if (str == "Bar") return std::make_shared<FuncImpl_Bar<Iterator>>(/* args *);
  else return return std::make_shared<FuncImpl_Meow<Iterator>>(/* args *);
}

//...
auto MyFunctor = createFunctor<???>("Bar"); //what iterator type??? 
```

但是 AFAICS 你不需要知道外面函子的确切类型`createFoo`——如果`createFoo`知道那个类型就足够了：

```
Foo createFoo( ... // some parameters for foo objects
                                        std::string const& str ) //look mum, no templates!
{
  typedef whatever_the_container_i_use::iterator Iter;
  Functor<Iter> MyFunctor = createFunctor<Iter>(str);
  // calculate stuff for "foo" using functor "f"
}

//...
auto myFoo = createFoo(args, "Bar");
auto myOtherFoo = createFoo(args, "Moo"); 
```

简而言之：将工厂参数向下传递到您知道迭代器类型的点，即您必须参数化仿函数工厂的类型。调用您知道需要的*每个*输入的工厂，即类型和非类型参数。

# mysql - 如何为当年的每个月创建一个分区

> ID：15880154
> 
> 赞同：5
> 
> 时间：2013-04-08T13:19:48.593
> 
> 标签：mysql, database-partitioning

我想按“MONTH”对数据进行分区

我正在尝试这个，

```
ALTER TABLE t1 PARTITION BY RANGE(TO_DAYS(FROM_UNIXTIME(transaction_date)))(
PARTITION JAN VALUES LESS THAN (TO_DAYS('2013-02-01')),
PARTITION FEB VALUES LESS THAN (TO_DAYS('2013-03-01')),
PARTITION MAR VALUES LESS THAN (TO_DAYS('2013-04-01')),
PARTITION APR VALUES LESS THAN (TO_DAYS('2013-05-01')),
PARTITION MAY VALUES LESS THAN (TO_DAYS('2013-06-01')),
PARTITION JUN VALUES LESS THAN (TO_DAYS('2013-07-01')),
PARTITION JUL VALUES LESS THAN (TO_DAYS('2013-08-01')),
PARTITION AUG VALUES LESS THAN (TO_DAYS('2013-09-01')),
PARTITION SEP VALUES LESS THAN (TO_DAYS('2013-10-01')),
PARTITION `OCT` VALUES LESS THAN (TO_DAYS('2013-11-01')),
PARTITION NOV VALUES LESS THAN (TO_DAYS('2013-12-01')),
PARTITION `DEC` VALUES LESS THAN (TO_DAYS('2014-01-01')) 
```

);

```
transaction_date INT NOT NULL //store date by UNIX_TIMESTAMP() 
```

错误代码：1564 不允许使用此分区函数

如何为当年的每个月创建一个分区？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:14:50.157

这可能是一个[错误](http://bugs.mysql.com/bug.php?id=56810)或限制。

对于每月分区，您可以尝试以下操作：

**[SQLFiddle 演示](http://www.sqlfiddle.com/#!2/79f11/3)**

```
ALTER TABLE t1 PARTITION BY RANGE(transaction_date)(
PARTITION JAN VALUES LESS THAN (UNIX_TIMESTAMP('2013-02-01')),
PARTITION FEB VALUES LESS THAN (UNIX_TIMESTAMP('2013-03-01')),
PARTITION MAR VALUES LESS THAN (UNIX_TIMESTAMP('2013-04-01')),
PARTITION APR VALUES LESS THAN (UNIX_TIMESTAMP('2013-05-01')),
PARTITION MAY VALUES LESS THAN (UNIX_TIMESTAMP('2013-06-01')),
PARTITION JUN VALUES LESS THAN (UNIX_TIMESTAMP('2013-07-01')),
PARTITION JUL VALUES LESS THAN (UNIX_TIMESTAMP('2013-08-01')),
PARTITION AUG VALUES LESS THAN (UNIX_TIMESTAMP('2013-09-01')),
PARTITION SEP VALUES LESS THAN (UNIX_TIMESTAMP('2013-10-01')),
PARTITION `OCT` VALUES LESS THAN (UNIX_TIMESTAMP('2013-11-01')),
PARTITION NOV VALUES LESS THAN (UNIX_TIMESTAMP('2013-12-01')),
PARTITION `DEC` VALUES LESS THAN (UNIX_TIMESTAMP('2014-01-01'))
); 
```

如果您有一个具有 DATE 作为数据类型的列，那么您可以尝试在每月分区中进行每日分区：Try using [sub-partitioning](http://dev.mysql.com/doc/refman/5.5/en/partitioning-subpartitions.html) in MySQL

**[SQLFiddle 演示](http://www.sqlfiddle.com/#!2/50c5f/2)**

```
ALTER TABLE t1 
PARTITION BY RANGE( MONTH(FROM_UNIXTIME(transaction_date) )
SUBPARTITION BY HASH( DAY(FROM_UNIXTIME(transaction_date)) )
SUBPARTITIONS 31 (
    PARTITION p0 VALUES LESS THAN (2),
    PARTITION p1 VALUES LESS THAN (3),
    PARTITION p2 VALUES LESS THAN (4),
    PARTITION p3 VALUES LESS THAN (5),
    PARTITION p4 VALUES LESS THAN (6),
    PARTITION p5 VALUES LESS THAN (7),
    PARTITION p6 VALUES LESS THAN (8),
    PARTITION p7 VALUES LESS THAN (9),
    PARTITION p8 VALUES LESS THAN (10),
    PARTITION p9 VALUES LESS THAN (11),
    PARTITION p10 VALUES LESS THAN (12),
    PARTITION p11 VALUES LESS THAN MAXVALUE
); 
```

# wcf-data-services - WCF 数据服务 - 将状态数据添加到响应标头

> ID：15880164
> 
> 赞同：0
> 
> 时间：2013-04-08T13:20:08.253
> 
> 标签：wcf-data-services

我有一个现有的 Web 应用程序，我想用 WCF 数据服务包装它，为它提供 OData 输入/输出格式。

到目前为止，我已经能够发送带有凭据的请求，并检索所需的数据。我能够在请求标头中植入凭据 - 但不知道如何发回值，例如 stateId(=string)，以供客户端使用。当然，更改元数据以发送 stateId 不是一种选择。

我可以控制响应的标题吗？这是我最好的解决方案吗？

# balanced-payments - 为回头客验证卡安全码

> ID：15880169
> 
> 赞同：0
> 
> 时间：2013-04-08T13:20:12.507
> 
> 标签：balanced-payments

有没有办法使用卡安全码重新验证卡？我想为用户提供使用 Facebook 登录或以其他方式记住他们的登录信息，并且我想在结帐期间添加一个额外的步骤，以验证用户是否拥有信用卡。我认为有些网站在结帐时会再次要求 CSC。

我也可以再次询问用户的密码，但我认为如果用户使用 Facebook 登录，这将不起作用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:44:29.760

好吧，看来目前平衡的这种验证是不可能的。没有重新验证卡的 API 方法。以下是我提出的解决方案，以防其他人遇到类似问题：

1.  使用不同的信息来验证用户（卡到期日期等）。但这似乎并不常见，可能会吓跑一些用户。
2.  确实强制用户再次输入密码。如果用户使用站点本地登录，则没有问题。如果用户使用 Facebook 登录，似乎有一种方法可以强制重新验证：[https ://developers.facebook.com/docs/howtos/login/server-side-re-auth/](https://developers.facebook.com/docs/howtos/login/server-side-re-auth/)

# google-maps-api-3 - 如何使用谷歌地图api获取半球

> ID：15880174
> 
> 赞同：0
> 
> 时间：2013-04-08T13:20:24.747
> 
> 标签：google-maps-api-3, geometry, geocoding, computational-geometry, google-maps-api-2

我正在使用 google map api V3 来设置地图并执行此类映射相关功能。现在我想知道当前位置的半球，它来自特定位置的哪一侧，需要相应地设置标记图像。

我搜索了使用谷歌地图 api 获取半球的特定功能或技巧，但我无法得到它。谁能告诉我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T00:06:43.660

如果纬度 < 0，则坐标位于南半球，否则位于北半球。

# wpf - WPF 打印 - 在 WPF PrintDialog 上自动设置打印机

> ID：15880175
> 
> 赞同：13
> 
> 时间：2013-04-08T13:20:25.093
> 
> 标签：wpf, printing, flowdocument

我正在尝试将 WPF FlowDocument 打印到特定打印机，而不提示用户。打印机是 PDF 转换器。

这很好用，只是它打印到默认打印机：

```
 PrintDialog pd = new PrintDialog();
   var doc = ((IDocumentPaginatorSource) RTB.Document).DocumentPaginator;
   // I would like to explicitly set the printer to print to here.
   pd.PrintDocument(doc, "Print Document"); 
```

在 WinForms 中，文档上有一个 System.Drawing.Printing.PrinterSettings 对象，该对象具有可以设置为我想要的打印机的 PrinterName 属性，但我在 WPF 中看不到。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-08T14:44:37.347

您首先需要在项目中引用`System.Printing`. 然后，您可以在声明`PrintDialog`对象后立即使用以下代码。

```
pd.PrintQueue = new PrintQueue(new PrintServer(), "The exact name of my printer"); 
```

`PrintQueue`是一个对象，它代表打印机以及有关该打印队列的所有其他内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-03T20:41:18.713

当我使用共享网络打印机时，这对我有用：

```
xPrintDialog.PrintQueue = New PrintQueue(New PrintServer("\\computer name"), "printer name") 
```

# ios - 如何根据手指按下的位置从 UILabel 中提取子字符串？

> ID：15880178
> 
> 赞同：-3
> 
> 时间：2013-04-08T13:20:36.297
> 
> 标签：ios, objective-c, cocoa-touch, uilabel

我有一个包含文本的 UILabel。

一旦我按下这个 UILabel，我想从我手指按下的位置提取一个单词。

我在互联网上搜索了一下，但不知道如何实现它。

这里有人知道怎么做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:40:32.483

> 一旦我按下这个 UILabel，我想从我手指按下的位置提取一个单词。

使用 UILabel 可不容易做到这一点。UILabel 是一种将静态文本放在屏幕上的简单方法；它不提供可以让您确定单个单词的框架的功能。

您最好为此创建自己的视图。您需要深入研究 Core Text 来布置和绘制文本。Core Text 比仅使用简单的 UILabel 复杂得多，但它为您提供了确定每个单词在屏幕上绘制位置所需的信息和控制。您的视图可以使用该信息将触摸映射到单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:32:38.573

最简单的方法是让每个单独的单词成为一个单独的标签，这样您所要做的就是在标签上添加一个 UITapGestureRecognizer 并在触摸时从中获取文本。

但是，如果你想用一个标签来做，这里有一些可以工作的伪代码：

1.  将 UITapGestureRecognizer 添加到标签。触摸时，获取触摸的位置。
2.  使用 NSString 的`- (CGSize)sizeWithFont:(UIFont *)font`方法来获取标签的整个字符串的大小（我们称之为 this `stringSize`）。
3.  比较`stringSize.width`标签的宽度以找出文本开始的位置（如果您的标签居中或右对齐，这可能不在标签的起始 X 坐标处）。IE。`startingX = label.width - stringSize.width / 2`.
4.  现在使用 NSString 的`- (NSArray *)componentsSeparatedByString:(NSString *)separator`方法将标签中的字符串分隔为每个单词，以空格字符作为分隔符。让我们将其存储到一个名为 的数组`wordsAr`中。
5.  创建一个变量 ，`currentXPos`并将其初始化为`startingX`。
6.  现在创建一个遍历每个单词的 for 循环，`wordsAr`使用 计算该单词的大小`- (CGSize)sizeWithFont:(UIFont *)font`，并将其添加到`currentXPos`. 当`currentXPos`>= 您的触摸值的 x 位置时，您已经找到了您点击的单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T15:45:58.720

您可以在以下链接中使用 TTTAttributedLabel：[https ://github.com/mattt/TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)

将您的可点击文本定义为标签的链接，然后您将得到您所需要的。

# pcap - 编译器警告 libpcap

> ID：15880180
> 
> 赞同：0
> 
> 时间：2013-04-08T13:20:37.203
> 
> 标签：pcap, libpcap

遵循示例[http://www.tcpdump.org/pcap.htm](http://www.tcpdump.org/pcap.htm)并浏览文档后，我看不出我在以下代码中做错了什么

```
// main.c
void got_packet(u_char *args, struct pcap_pkthdr *header, const u_char *packet);
/// ...snip...
void got_packet(u_char *args, struct pcap_pkthdr *header, const u_char *packet) {
  printf("Received Packet\n");
}
/// ...snip...
pcap_dispatch(handle, 100, got_packet, NULL); 
```

保证我看到的编译器警告：

```
gcc -g -O3 -I../sensor/   -c -o sensordatad.o sensordatad.c
main.c: In function ‘start_capture’:
main.c:96:27: warning: initialization from incompatible pointer type [enabled by default]
main.c:146:3: warning: passing argument 3 of ‘pcap_dispatch’ from incompatible pointer     
                       type [enabled by default] 
```

可能是我太挑剔了，似乎我见过的所有其他 C 代码在编译时都有一个充满编译器警告的页面，但我想至少在没有警告的情况下完成这段代码！

我也尝试过这样做，以某种方式对函数指针进行类型转换，这是我在任何示例中都没有看到的；但我觉得值得一试：

```
pcap_handler callback = &got_packet;
/// ...snip...
pcap_dispatch(handle, 100, &callback, NULL); 
```

这导致了同样令人困惑的错误：

```
main.c: In function ‘start_capture’:
main.c:96:27: warning: initialization from incompatible pointer type [enabled by default] 
```

这是我第一次遇到具有特殊 typedef 类型的函数指针，手册页`pcap_{loop,dispatch}`如下：

> NAME pcap_loop, pcap_dispatch - 处理来自实时捕获或保存文件的数据包
> 
> 概要#包括
> 
> ```
>  typedef void (*pcap_handler)(u_char *user, const struct pcap_pkthdr *h,
>                                   const u_char *bytes);
> 
>       int pcap_loop(pcap_t *p, int cnt,
>               pcap_handler callback, u_char *user);
>       int pcap_dispatch(pcap_t *p, int cnt,
>               pcap_handler callback, u_char *user); 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:14:37.280

**解决了**

函数签名应该是：

```
void got_packet(u_char *args, const struct pcap_pkthdr *header, const u_char *packet); 
```

我有：

```
void got_packet(u_char *args, struct pcap_pkthdr *header, const u_char *packet); 
```

我想在某些方面这个错误是有道理的？！但无论如何解决了。

# android - 退出活动时surfaceView类崩溃，Android

> ID：15880184
> 
> 赞同：0
> 
> 时间：2013-04-08T13:20:44.563
> 
> 标签：android, camera, surfaceview

当我使用意图离开活动转到另一个活动时，surfaceView 类崩溃。如何将此活动留给另一个活动而不让它崩溃？

我使用这个意图离开这个类并打开另一个名为 CameraView 类的活动：

```
 Intent intent = new Intent(this, CameraView.class);
  startActivity(intent); 
```

来自 LogCat 的堆栈跟踪：

```
04-08 21:42:46.620: W/IInputConnectionWrapper(25016): finishComposingText on inactive InputConnection
04-08 21:42:46.630: E/SurfaceView(25016): NullPointerException while updating window.
mSession = android.view.IWindowSession$Stub$Proxy@41739aa8, mWindow = android.view.SurfaceView$MyWindow@41743978
04-08 21:42:46.630: E/SurfaceView(25016): Unexpected NullPointerException.
04-08 21:42:46.630: D/AndroidRuntime(25016): Shutting down VM
04-08 21:42:46.630: W/dalvikvm(25016): threadid=1: thread exiting with uncaught exception (group=0x40aca9d8)
04-08 21:42:46.640: E/AndroidRuntime(25016): FATAL EXCEPTION: main
04-08 21:42:46.640: E/AndroidRuntime(25016): java.lang.NullPointerException
04-08 21:42:46.640: E/AndroidRuntime(25016):    at android.view.SurfaceView.updateWindow(SurfaceView.java:578)
04-08 21:42:46.640: E/AndroidRuntime(25016):    at android.view.SurfaceView.onWindowVisibilityChanged(SurfaceView.java:226) 
```

surfaceView 活动代码：

```
 class Preview extends SurfaceView implements SurfaceHolder.Callback {
        SurfaceHolder mHolder;
        DrawOnTop mDrawOnTop;

        Preview(Context context, DrawOnTop drawOnTop) {
            super(context);

            mDrawOnTop = drawOnTop;
            mFinished = false;

            // Install a SurfaceHolder.Callback so we get notified when the
            // underlying surface is created and destroyed.
            mHolder = getHolder();
            mHolder.addCallback(this);
            mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        }

        public void surfaceCreated(SurfaceHolder holder) {

            try {
               mCamera = Camera.open();
               mCamera.setPreviewDisplay(holder);
               mCamera.startPreview();

               // Preview callback used whenever new viewfinder frame is available
               mCamera.setPreviewCallback(new PreviewCallback() {
                  public void onPreviewFrame(byte[] data, Camera camera)
                  {
                      if ( (mDrawOnTop == null) || mFinished )
                          return;

                      if (mDrawOnTop.mBitmap == null)
                      {
                          // Initialize the draw-on-top companion
                          Camera.Parameters params = camera.getParameters();
                          mDrawOnTop.mImageWidth = params.getPreviewSize().width;
                          mDrawOnTop.mImageHeight = params.getPreviewSize().height;
                          mDrawOnTop.mBitmap = Bitmap.createBitmap(mDrawOnTop.mImageWidth, 
                          mDrawOnTop.mImageHeight, Bitmap.Config.RGB_565);
                          mDrawOnTop.mRGBData = new int[mDrawOnTop.mImageWidth * mDrawOnTop.mImageHeight]; 
                          mDrawOnTop.mYUVData = new byte[data.length];                    
                      }

                      // Pass YUV data to draw-on-top companion
                      System.arraycopy(data, 0, mDrawOnTop.mYUVData, 0, data.length);
                      mDrawOnTop.invalidate();
                  }
               });
            } 
            catch (IOException exception) {
                mFinished = true;
                mCamera.setPreviewCallback(null);
                mCamera.stopPreview();
                mCamera.release();
                mCamera = null;
            }
        }

        public void surfaceDestroyed(SurfaceHolder holder) {
            // Surface will be destroyed when we return, so stop the preview.
            // Because the CameraDevice object is not a shared resource, it's very
            // important to release it when the activity is paused.
            mFinished = true;
            mCamera.setPreviewCallback(null);
            mCamera.stopPreview();
            mCamera.release();
            mCamera = null;

        }

        public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
            // Now that the size is known, set up the camera parameters and begin
            // the preview.
            Camera.Parameters parameters = mCamera.getParameters();
            parameters.setPreviewSize(320, 240);
            parameters.setPreviewFrameRate(15);
            parameters.setSceneMode(Camera.Parameters.SCENE_MODE_NIGHT);
            parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);
            mCamera.setParameters(parameters);
            mCamera.startPreview();
        }

    } // end surfaceview 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:30:47.613

尝试先打电话`stopPreview()`，然后再打电话`setPreviewCallback(null)`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T12:31:52.273

发现有效的答案是将 System.exit(0) 放在 onPause 方法中。解决了所有问题，应用程序可靠且 100% 稳定。退出活动时不再崩溃。

将 finish() 放在 onPause 方法中不起作用，并且在使用表面视图退出活动后，应用程序继续随机崩溃。

有助于减少早期崩溃的一件事是更改 stopPreview() 和 setpreviewCalback(null) 的位置。并删除 setpreviewcallback(null)。在有意退出活动之前调用这些修改会减少崩溃次数。

# android - 应用程序挂起/冻结并重新启动时，Android Sqlite 数据丢失

> ID：15880187
> 
> 赞同：0
> 
> 时间：2013-04-08T13:20:54.177
> 
> 标签：android, sqlite, data-loss

最近我的用户抱怨应用程序在使用时挂起，并且在重新启动手机时存储的数据会丢失。

它也不是每次都发生。

有人可以告诉我sqlite数据会丢失的所有原因吗？

android应用程序冻结的原因是什么？

背景：我的应用程序从所有屏幕执行 sqlite 操作。设备

> 型号：三星 GT-18160，Android 版本：2.3.6，内核版本：2.6.35.7-1219296 dpi@DELL210#2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:43:18.067

您可以假设不会丢失任何数据。但是您可能想首先确定崩溃的罪魁祸首 - 幸运的是您的用户在 2.x 上，所以告诉他使用类似的工具`aLogCat`并在您的应用程序崩溃后获取日志。然后检查那里有什么并修复。这应该可以解决您的“数据丢失”问题，因为它发生在您的应用程序崩溃之后。如果它停止崩溃，那么它不应该触发雪球....

# mysql - Mysql 排序有问题

> ID：15880190
> 
> 赞同：0
> 
> 时间：2013-04-08T13:21:02.000
> 
> 标签：mysql, sql, sql-order-by

好的，我在订购时遇到了一些困难。这是我需要解决的问题：

在数据库中，我已经编写了地图的每个图块，即 101 x 101 大。该表有 3 列（ID、x、y），现在我必须选择一些半径中的所有图块。例如，我使用了这个查询：

```
SELECT * 
FROM tile 
WHERE ((x >= -3 AND x <= 3) 
AND (y >= -3 AND y <= 3)) 
ORDER BY x ASC, y DESC; 
```

此查询暂时选择给定坐标 (0|0) 半径为 3 的所有图块。

但是，它并没有按照我想要的方式对它们进行排序。基本上，输出必须是这样[的](https://i.stack.imgur.com/GTlnp.png)。

但这是我得到的最接近的。 [http://prntscr.com/zqjd7](http://prntscr.com/zqjd7)

**编辑**：
忽略双值，每个坐标都有双输入。没见过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:44:42.723

您的问题似乎与 ASC / DESC 修饰符有关。
但是既然我们在这里，你不喜欢使用距离公式吗？附近的东西

```
SELECT x, y FROM tile WHERE
(
  POW(x-@var1, 2) + POW(y-@var2, 2) <= POW(3, 2)
)
ORDER BY x DESC, y ASC; 
```

在这里，给定一个点 P (m,n)，我们将通过 acerting 知道到固定点 Q (x,y) 的距离`D(P,Q) = SQRT( (x-m)² + (y-n)² )`。尽管它必须小于（或等于）您所需的半径 (= 3)，但我们有`SQRT( (x-m)² + (y-n)² ) <= 3`或更好，`(x-m)² + (y-n)² <= 3²`将这两项都提高到它的平方幂。

SQL 语言讲，我们写`POW(x-m, 2) + POW(y-n, 2) <= POW(3, 2)`，愿意说和之间的距离`(x,y)`是`(m,n)`大于等于`3`的。

关于`@var`，这是您输入输入值的地方。更具体地说，它们是会话变量，但您并不想用它来执行选择；只需将它们替换为您想要的任何数字，例如，您可以`(0,0)`通过放置`0`and`@var1`来选择原点`@var2`。

**[更新]**
嗯......在回答之前测试你的代码总是一个好主意。事实上，我应该建议先按`y`排序，因为我们首先关心要在屏幕上显示的排序行。以下代码（最终）经过测试*（在`test`DB 上）*；我的最后一个建议是创建以下索引（index_y_x）：

```
USE `test` ;

CREATE TABLE IF NOT EXISTS `test`.`tile` (
  `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
  `x` INT(11) NULL DEFAULT 0 ,
  `y` INT(11) NULL DEFAULT 0 ,
  PRIMARY KEY (`id`) ,
  INDEX `index_y_x` (`y` DESC, `x` ASC) )
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

INSERT tile (x,y) VALUES
(-2,-2),(-2, -1),(-2, 0),(-2, 1),(-2, 2),
(-1,-2),(-1, -1),(-1, 0),(-1, 1),(-1, 2),
(0,-2), (0, -1), (0, 0), (0, 1), (0, 2),
(1,-2), (1, -1), (1, 0), (1, 1), (1, 2),
(2,-2), (2, -1), (2, 0), (2, 1), (2, 2);

SELECT x, y FROM tile
WHERE POW(x-3, 2) + POW(y-3, 2) <= POW(3, 2)
ORDER BY y DESC, x ASC; 
```

*这将返回点 (3,3) 附近的项目，范围为 3 个单位*

# java - 这行代码的作用和含义是什么？

> ID：15880191
> 
> 赞同：-3
> 
> 时间：2013-04-08T13:21:02.570
> 
> 标签：java

```
public class CuteSampleCode
{
   public static void main (String[] args)
   {
      CuteSampleCode main = new CuteSampleCode();
   }
} 
```

这部分：'CuteSampleCode main = new CuteSampleCode();` 它只是简化了类名吗？那么以后我可以通过它运行其他方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:22:07.953

它执行以下操作：

1.  为类型为 Object 的对象分配空间`CuteSampleCode`。
2.  实例化 的所有默认字段`CuteSampleCode`。
3.  将新创建的 Object 引用分配给名为的变量`main`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:22:31.440

它创建`CuteSampleCode`类的一个实例。如果该类有任何非静态方法，您可以从`main`变量中调用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:22:22.617

这一行实例化了类的一个新对象`CuteSampleCode`。

如果您知道该类的方法，`CuteSampleCode`您可以稍后调用这些方法：

```
main.someMethod(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T13:22:37.610

这一行实例化了CuteSampleCode类的一个新对象。然后分配新创建的对象

# linux - Unix中的键盘设备

> ID：15880196
> 
> 赞同：6
> 
> 时间：2013-04-07T22:33:45.030
> 
> 标签：linux, keyboard, drivers, device

如何捕获所有用户输入，一次读取一个字节？

我做了这个编码，但它不起作用

```
if ((fd = open("/dev/char", O_RDONLY) != 1) {
    tty = open("/dev/tty", O_RDONLY);
    tcsetattr(0, TCSANOW, &orig_info);
    read (fd, &buf, sizeof(char));
}
close(fd); 
```

我希望终端等待输入，但事实并非如此。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T00:37:06.830

键盘设备本身就是`/dev/input`. 您可以在`/dev/input/by-path`. 显然，您需要以 root 身份运行才能直接访问硬件，并且您需要提供自己的翻译，将来自键盘的原始字节转换为按键和按键释放等内容。这可能不是你想要的。

如果您正在运行一个 GUI 应用程序，低级方法是调用[`XNextEvent`](http://www.x.org/releases/X11R7.7/doc/man/man3/XNextEvent.3.xhtml)和其他同族的函数。解码输入事件并不完全是微不足道的，因为它取决于应用程序来应用修饰符。一个 GUI 框架（Motif、Gtk、Qt、...）会帮助你。

如果您正在运行终端应用程序，请从标准输入或`/dev/tty`（`/dev/tty`始终是您的程序正在运行的终端，即使标准输入已被重定向）读取。您需要将终端置于[原始模式](https://en.wikipedia.org/wiki/POSIX_terminal_interface#Early_Unices:_Seventh_Edition_Unix)。您将获得解码的字符键和主要作为转义序列的功能键。在这里，图书馆也有帮助；事实上的标准是[ncurses](http://en.wikipedia.org/wiki/Ncurses)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:00:53.683

你到底想做什么？

如果您正在寻找的是终端中的无缓冲输入，`tcsetattr()`那就是您正在寻找的 - 您需要将终端置于非规范模式，即将终端标志设置为不包含`ICANON`- 参见例如[此代码片段](http://icodesnip.com/snippet/c/unbuffered-terminal-input-linux-dreamincode)。请参阅`man termios`（或函数名称，它通常链接到 Linux 上的同一手册页）。

如果您想独占访问键盘，则要复杂得多。

# android - Android：自定义视图“PointsView”：错误“无法实例化以下类”

> ID：15880203
> 
> 赞同：3
> 
> 时间：2013-04-08T13:21:45.053
> 
> 标签：android, android-layout, android-custom-view

我正在创建一个 Android Yahtzee 游戏应用程序。为了跟踪玩家分数，我尝试创建一个 PointsView 类来保存这些分数。但是，当我尝试时，我收到“无法实例化以下类：-uk.ac.surrey.jb00359.yatzy.PointsView...查看错误日志（窗口>显示视图）...”PointsView 错误在我的游戏 XML 布局文件中创建它，如下所示。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background="@color/background_colour" >

  <Button
    android:id="@+id/roll_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="@dimen/die_margin"
    android:layout_marginLeft="@dimen/die_margin"
    android:text="@string/roll_button_text" />

  <TextView
    android:id="@+id/player_turn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@id/roll_button"
    android:layout_alignParentRight="true"
    android:layout_marginRight="@dimen/die_margin"
    android:text="@string/player_1_turn_text"
    android:textSize="18sp" />

  <ImageView
    android:id="@+id/die_3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@id/roll_button"
    android:layout_marginBottom="@dimen/die_margin"
    android:layout_centerHorizontal="true"
    android:contentDescription="@string/die_3_description"
    android:src="@drawable/dice_1" />

  <ImageView
    android:id="@+id/die_2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@id/die_3"
    android:layout_toLeftOf="@id/die_3"
    android:layout_marginRight="@dimen/die_margin"
    android:contentDescription="@string/die_2_description"
    android:src="@drawable/dice_1" />

  <ImageView
    android:id="@+id/die_1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@id/die_2"
    android:layout_toLeftOf="@id/die_2"
    android:layout_marginRight="@dimen/die_margin"
    android:contentDescription="@string/die_1_description"
    android:src="@drawable/dice_1" /> 

  <ImageView
    android:id="@+id/die_4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@id/die_3"
    android:layout_toRightOf="@id/die_3"
    android:layout_marginLeft="@dimen/die_margin"
    android:contentDescription="@string/die_4_description"
    android:src="@drawable/dice_1" />

  <ImageView
    android:id="@+id/die_5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@id/die_4"
    android:layout_toRightOf="@id/die_4"
    android:layout_marginLeft="@dimen/die_margin"
    android:contentDescription="@string/die_5_description"
    android:src="@drawable/dice_1" />

  <uk.ac.surrey.jb00359.yatzy.PointsView
    android:id="@+id/points_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="@dimen/points_view_margin"
    android:layout_marginTop="@dimen/points_view_margin"
    android:layout_marginRight="@dimen/points_view_margin"
    android:layout_marginBottom="@dimen/die_margin"
    android:layout_above="@id/die_1" />

</RelativeLayout> 
```

当我查看错误日志时，它给了我这个异常堆栈跟踪：

```
java.lang.NoSuchMethodException: uk.ac.surrey.jb00359.yatzy.PointsView.<init>(android.content.Context, android.util.AttributeSet)
    at java.lang.Class.getConstructor0(Class.java:2733)
    at java.lang.Class.getConstructor(Class.java:1676)
    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:347)
    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:179)
    at android.view.BridgeInflater.loadCustomView(BridgeInflater.java:207)
    at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:135)
    at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:746)
    at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:718)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:372)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:385)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:332)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:440)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1545)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1302)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1059)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:686)
    at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:360)
    at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:292)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1276)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1300)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1285)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1079)
    at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3023)
    at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1730)
    at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:270)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1276)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3554)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3179)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

[到目前为止，我已经尝试使用 stackoverflow 用户 Devunwired 在“ onMeasure 自定义视图说明](https://stackoverflow.com/questions/12266899/onmeasure-custom-view-explanation)”中提供的代码覆盖我的 PointView 的 onMeasure() 方法，但到目前为止没有明显的成功。（见下文）

```
package uk.ac.surrey.jb00359.yatzy;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.util.AttributeSet;
import android.view.View;

/**
 * 
 * This class outputs the current scores obtained by the two Yatzy players
 */
public class PointsView extends View {

// Do not change these values!
private static final float noOfColumns = 3f;
private static final float noOfRows = 19f;

private GameActivity game;
private GameLogic gameLogic;
private Paint majorLinePaint = new Paint();
private Paint minorLinePaint = new Paint();
/** 
  * Colour of score cells, that can be selected to store
  * a player's new dice score after a round (1-3 dice throws)
  */
private Paint selectablePaint = new Paint();
private Paint textPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
private float top, left, bottom, right; // grid boundaries
private float cellWidth, cellHeight; // Cell sizes

public PointsView(Context context, AttributeSet attrs, GameLogic gameLogic) {
    super(context, attrs);
    // Allow the view to refer to the game activity and game logic (state) 
    this.game = (GameActivity) context;
    this.gameLogic = gameLogic;
    majorLinePaint.setColor(getResources().getColor(R.color.major_line_colour));
    minorLinePaint.setColor(getResources().getColor(R.color.minor_line_colour));
    selectablePaint.setColor(getResources().getColor(R.color.selectable_cell_colour));
    textPaint.setColor(getResources().getColor(R.color.text_colour));
    textPaint.setStyle(Style.FILL);
    textPaint.setTextScaleX(1f);
    textPaint.setTextAlign(Paint.Align.CENTER); 
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    top = 0;
    left = 0;
    bottom = h;
    right = w;
    cellWidth = w / noOfColumns; // 3 columns of cells
    cellHeight = h / noOfRows; // 19 rows of cells
    // Set text size to be 7/8 of the height of each cell
    textPaint.setTextSize(cellHeight * (7/8));
    super.onSizeChanged(w, h, oldw, oldh);
}

@Override
protected void onDraw(Canvas canvas) {
    // Draw the PointsView's grid lines
    for (int i = 0; i <= noOfColumns; i++) {
        // Draw column lines
        canvas.drawLine(left + i*cellWidth, top, left + i*cellWidth, bottom, majorLinePaint);
    }
    for (int j = 0; j <= noOfRows; j++) {
        // Draw row lines
        canvas.drawLine(left, top + j*cellHeight, right, top + j*cellHeight, majorLinePaint);
    }

    // More drawing later...

}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

    /** 
     * Here starts Devunwired's code from 
     * https://stackoverflow.com/questions/12266899/onmeasure-custom-view-explanation */

    int desiredWidth = 100;
    int desiredHeight = 100;

    int widthMode = MeasureSpec.getMode(widthMeasureSpec);
    int widthSize = MeasureSpec.getSize(widthMeasureSpec);
    int heightMode = MeasureSpec.getMode(heightMeasureSpec);
    int heightSize = MeasureSpec.getSize(heightMeasureSpec);

    int width;
    int height;

    //Measure Width
    if (widthMode == MeasureSpec.EXACTLY) {
        //Must be this size
        width = widthSize;
    } else if (widthMode == MeasureSpec.AT_MOST) {
        //Can't be bigger than...
        width = Math.min(desiredWidth, widthSize);
    } else {
        //Be whatever you want
        width = desiredWidth;
    }

    //Measure Height
    if (heightMode == MeasureSpec.EXACTLY) {
        //Must be this size
        height = heightSize;
    } else if (heightMode == MeasureSpec.AT_MOST) {
        //Can't be bigger than...
        height = Math.min(desiredHeight, heightSize);
    } else {
        //Be whatever you want
        height = desiredHeight;
    }

    //MUST CALL THIS
    setMeasuredDimension(width, height);

    /** End of Devunwired's code */
}

} 
```

有人知道我的代码中发生了什么导致此错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:41:12.420

尝试添加 2 个构造函数：

```
public PointsView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    public PointsView(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
    } 
```

# c++ - std::set 元素消失

> ID：15880204
> 
> 赞同：1
> 
> 时间：2013-04-08T13:21:45.170
> 
> 标签：c++, stl

我`std::set`在以下代码中创建了一个，其中元素根据数组进行排序。

```
int weight[] = {0, 1, 58, 21, 10, 21, 24};

struct Comp
{
    public:
    bool operator() (const int &a, const int &b) const
    {
        if (weight[a] == weight[b])
            return a < b;
        else
            return weight[a] < weight[b];
    }
};
set<int, Comp> s; 
```

令人惊讶的是，当我更改`weight`数组中的任何元素时，集合中的相应元素消失了。这是我的测试功能：

```
void print()
{
    printf("Elements = ");  
    for(int i = 1; i <= 6; i++)
        if(s.find(i) != s.end())
            printf("%2d ", i);;
    printf("\n");
}

int main()
{   
    for(int i = 1; i <= 6; i++)
        s.insert(i);

    print();
    weight[2] = 1;
    weight[5] = 15;
    print();

    return 0;
} 
```

输出：

```
Elements =  1  2  3  4  5  6  
Elements =  1  3  4  6 
```

我`gcc 4.6.3`在buntu中使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T13:25:47.347

根据 C++11 标准关于关联容器要求的第 23.2.4/3 段：

> 短语“键的等价”是指通过比较而不是 `operator==`on 键强加的等价关系。也就是说，如果对于比较对象, ，则两个键`k1`和`k2`被认为是等效的。**对于同一容器中的****任意两个键****，调用****应始终返回相同的值**。`comp``comp(k1, k2) == false && comp(k2, k1) == false`**`k1``k2``comp(k1, k2)`**

由于您没有通过更改权重来满足此先决条件（并且您的比较器使用这些权重来定义集合元素的排序），因此您的程序具有**Undefined Behavior**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:27:28.617

作为 Andy Prowl 引用的推论，每次更改权重数组时都需要重新生成一个新集合

# regex - 逻辑搜索字符串的正则表达式

> ID：15880209
> 
> 赞同：-1
> 
> 时间：2013-04-08T13:22:04.547
> 
> 标签：regex

我想编写一个搜索。主要问题是搜索引用的文本并使用 + 和减号进行搜索。

我希望有一个正则表达式来搜索例如

```
var test = '"search test" searchword2 -searchword3'; 
```

应该导致

```
[0] = 'search test';
[1] = 'searchdword2';
[2] = '-searchword3'; 
```

谢谢你

编辑：

抱歉，但我希望第一个结果不带引号。我的错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:31:54.333

似乎您想在空格上拆分字符串，除非该空格用引号引起来。对？

在这种情况下（假设您不必处理带引号的字符串中的转义引号），请尝试

```
"[^"]*"|\S+ 
```

[在 regex101 上查看](http://regex101.com/r/lL6eG2)。

`\"`如果您的字符串中可能有转义引号 ( )，请使用

```
"(?:\\.|[^"])*"|\S+ 
```

[在 regex101 上查看](http://regex101.com/r/zE9xD3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:28:04.550

我认为，如果您只想要一个将术语分开的正则表达式，您可以使用

```
("(\w|\s)+")|([-+]?(\w)+) 
```

[http://rubular.com/r/aOKs3nF7Fk](http://rubular.com/r/aOKs3nF7Fk)

虽然你的问题不够清晰

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:28:30.100

嗯，您可能想尝试：

```
/"[\w ]+"| (?:-|\+)?\w+ ?/g 
```

# jqgrid - jqGrid的扩展。自定义参数

> ID：15880210
> 
> 赞同：1
> 
> 时间：2013-04-08T13:22:06.420
> 
> 标签：jqgrid

我想在一页上使用几个 jqGrids。所有网格都将具有特定的功能。出于这个原因，我想扩展 jqgrid

```
$.jgrid.extend({
    cVal: false,
    cSetVal: function(value) {
        var $t = this;

        $t.cVal = value;
        console.log('Setting cVal');
        return this;
    },
    cGetVal: function(value) {
        var $t = this;
        console.log('Getting cVal');

        return $t.cVal;
    },
}); 
```

加载页面后，我使用 Firefox 控制台进行测试

```
>>> $('#some-selector').jqGrid.cVal;

false 
```

所以 jqGrid 返回默认值；

```
>>> $('#some-selector').jqGrid('cSetVal', 'abc');

Setting cVal //console.log returns
Object[table#some-selector.some-class] 
```

当我浏览到 Object cVal is 'abc'

但

```
>>> $('#some-selector').jqGrid('cGetVal', 'abc');

Getting cVal //console.log returns

false 
```

现在再次获得默认值:(我如何获得在 cSetVal 方法中设置的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:33:30.467

对不起，但我不完全理解“扩展 jqGrid”的目标。如果您需要使用 jqGrid 保存一些附加信息，您可以只使用不在标准 jqGrid 参数列表中的附加参数。例如，如果您要使用创建网格

```
$('#some-selector').jqGrid({
    url: "someUrl",
    datatype: "json",
    ... // other standard jqGrid parameters
    cVal: false,
    cSetVal: function(value) {
        console.log('cSetVal');
    }
); 
```

您将能够使用`$('#some-selector').jqGrid('getGridParam', 'cVal');`and `$('#some-selector').jqGrid('getGridParam', 'cSetVal');`或仅使用`$('#some-selector')[0].p.cVal`and访问参数`$('#some-selector')[0].p.cSetVal`。我认为您实际上并不需要任何`cSetVal`or`cGetVal`功能，而是可以使用`getGridParam`and `setGridParam`。

要更改选项的值，`cVal`如果它以 abave 方式定义，您可以使用

```
$('#some-selector').jqGrid('setGridParam', {cVal: true}); 
```

或者只是使用

```
$('#some-selector')[0].p.cVal = true; 
```

或者，您可以使用[jQuery.data](http://api.jquery.com/jQuery.data/)存储与`$('#some-selector')`.

`$.jgrid.extend`如果您需要有需要在表单中调用的新方法，这将很有帮助`$('#some-selector').jqGrid('cSetVal',value);`。[答案](https://stackoverflow.com/a/6390033/315935)显示了这种实现的示例，并讨论了该方法的一些优点和缺点。

**更新**：所以如果你*真的*需要使用这样的语法，`$('#some-selector').jqGrid('cSetVal',value);`你应该修改你的代码

```
$.jgrid.extend({
    cSetVal: function(value) {
        console.log('Setting cVal');

        $(this).jqGrid('setGridParam', {cVal: value});
        return this;
    },
    cGetVal: function(value) {
        console.log('Getting cVal');

        return $(this).jqGrid('getGridParam', 'cVal');
    }
}); 
```

如果您需要`cVal`为网格初始化一些值，您只需`cVal`在创建它的过程中将其包含在 jqGrid 的选项列表中：

```
$('#some-selector').jqGrid({
    url: "someUrl",
    datatype: "json",
    ... // other standard jqGrid parameters
    cVal: true // HERE
); 
```

**更新2**：如果您定义了我在回答的第一部分中建议的方法，则应按以下方式使用这些方法：

```
var $grid = $('#some-selector');

// create the grid
$grid.jqGrid({
    url: "someUrl",
    datatype: "json",
    ... // other standard jqGrid parameters
    cVal: false,
    cSetVal: function(value) {
        console.log('in cSetVal()');

        //this.p.cVal = value;
        $(this).jqGrid('setGridParam', {cVal: value});
    },
    cGetVal: function() {
        console.log('in cGetVal()');

        //return this.p.cVal;
        return $(this).jqGrid('getGridParam', 'cVal');
    }
);

// now we can use cVal, cSetVal and cGetVal
var cSetVal = $grid.jqGrid("getGridParam", "cSetVal"),
    cGetVal = $grid.jqGrid("getGridParam", "cGetVal"),
    cVal = $grid.jqGrid("getGridParam", "cVal"); // get cVal value
cSetVal.call($grid[0], true); // change cVal value
cVal = $grid.jqGrid("getGridParam", "cVal");// get modified cVal value
cSetVal.call($grid[0], false);// change cVal value
cVal = cGetVal.call($grid[0]);// get modified cVal value 
```

# java - 默认选择的 JButton

> ID：15880212
> 
> 赞同：1
> 
> 时间：2013-04-08T13:22:11.007
> 
> 标签：java, swing, jbutton

所以，我只是想知道。假设我有一个简单的乒乓球游戏，由两个 JButtons 作为乒乓球随键输入移动，一个较小的 JButton 用于计时器中的球移动，以及一个用于得分的文本框。当我做这个时，我必须先点击按钮才能移动它。有没有办法让它在程序运行时默认选择按钮，这样我就可以直接按下键来移动它而无需先单击它？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:15:30.797

使用的根窗格的`setDefaultButton`方法：`JFrame`

```
myFrame.getRootPane().setDefaultButton(button); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-18T06:02:08.233

`constructor`在制作按钮后在框架中使用以下代码：

```
this.getRootPane().setDefaultButton(button); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T13:25:33.787

我认为您可以使用 requestFocus() 默认选择一个。就像是：

```
defaultJButton.requestFocus(); 
```

您应该在初始化时或每次要重新启动、重置状态或类似操作时执行此操作。

# javascript - 长时间步长的重力（使用 javascript）

> ID：15880213
> 
> 赞同：1
> 
> 时间：2013-04-08T13:22:11.650
> 
> 标签：javascript, html, canvas

我想用重力创建一个简单的动画（[http://jsfiddle.net/2pcr9/4/](http://jsfiddle.net/2pcr9/4/)在 chrome 和 firefox 中测试）。我正在用画布在 Javascript 中做到这一点。使用 (:46) 以可变时间步长计算重力和速度：

```
this.realDelta = (now - this.prevTime) / 1000;
this.realTime += this.realDelta; 
```

每个球都有计算速度和位置的代码（：148）：

```
this.vy += this.gravity * time.delta;
this.x += this.vx * time.delta;
this.y += this.vy * time.delta; 
```

现在，当您查看窗口时，此原型可以正常工作。

但是如果你隐藏当前窗口（切换到浏览器的另一个选项卡），window.requestAnimationFrame 就会停止。如果您等待 5 秒，然后打开窗口，window.requestAnimationFrame 将恢复。问题是 realDelta 现在是 5 秒，并且速度太大。

我可以添加一个检查以不允许 realDelta 大于一秒（：46）：

```
this.realDelta = (now - this.prevTime) / 1000;
if (this.realDelta > 1) {
    this.realDelta = 1;
}
this.realTime += this.realDelta; 
```

但这并不能真正解决问题。

现在我不明白如何真正解决这个问题。我是否应该检查窗口是否隐藏并暂停计时器（并在窗口再次可见时恢复计时器）。还是我的速度计算有误？其他 html5 游戏如何解决“dt”过大的问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:37:32.633

在你的绘图函数中，你可以通过多次运行你的函数来弥补丢失的帧：

```
var TIME_INTERVAL = 1000/60;
var timeElapsed = 0;
requestAnimFrame(draw, TIME_INTERVAL);

function draw() { 
    timeElapsed += now - this.prevTime;
    this.prevTime = now;
    while(timeElapsed > TIME_INTERVAL)
    {
        timeElapsed -= TIME_INTERVAL;
        // Run Draw
    }

    requestAnimFrame(draw, TIME_INTERVAL);
} 
```

当然，如果用户被选项卡的时间过长，他们可能会重新进行大量计算。如果 RequestAnimFrame 不可用，您还可以考虑运行备份：

```
var TIME_INTERVAL = 1000/60;
var timeElapsed = 0;
var backup = setInterval(draw, TIME_INTERVAL*5);
requestAnimFrame(draw, TIME_INTERVAL);

function draw() {
    clearInterval(backup);

    timeElapsed += now - this.prevTime;
    this.prevTime = now;
    while(timeElapsed > TIME_INTERVAL)
    {
        timeElapsed -= TIME_INTERVAL;
        // Run Draw
    }

    backup = setInterval(draw, TIME_INTERVAL*5);
    requestAnimFrame(draw, TIME_INTERVAL);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:24:43.370

**使用这些 jQuery 事件来开始/停止你的帧计算：**

（你可以尝试不使用 jQuery——直接的 javascript，但是 X 浏览器的东西会让你发疯！）

```
$(window).blur(function(e) {
    // User has changed tabs away from your window
    // So freeze your incrementing until the user returns 
});

$(window).focus(function(e) {
    // User has returned to your tab
    // So begin your incrementing again
}); 
```

唯一的问题是在某些浏览器中，这些事件会被多次触发，因此您可能还需要设置一个开/关标志，以便对第一次触发做出反应。

# flash - 如何检测用户是否有 ActiveX 过滤？

> ID：15880218
> 
> 赞同：0
> 
> 时间：2013-04-08T13:22:22.830
> 
> 标签：flash, internet-explorer, activex

我正在检测用户是否安装了 Flash，但它没有检测到 IE 中是否启用了 ActiveX 过滤，这会阻止 Flash 播放器。

如何检测 Flash 是否已启用以及是否已安装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:33:44.897

据我所知，你不能在 Flash 应用程序中做到这一点。尽管如此，JavaScript 对这项任务还是很有用的。这是 Active-X 检测[示例](http://www.webmaster-forums.net/html-css-and-javascript/activex-detection-possible)。

# jquery - Vimeo 嵌入 Cycle2

> ID：15880231
> 
> 赞同：3
> 
> 时间：2013-04-08T13:22:49.207
> 
> 标签：jquery, plugins, embed, vimeo, jquery-cycle2

我正在使用 Cycle2 jQuery 插件来创建幻灯片，如果可能的话，我想包含 Vimeo 嵌入。作者为 YouTube 嵌入提供了扩展，但没有关于 Vimeo 或如何使用 YouTube 脚本解决问题的内容。以前有人试过吗？如有必要，也非常感谢其他插件的任何建议，以实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T07:25:29.350

我没有亲自使用过这个插件，但看起来很有希望。看看[漂亮的照片](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/#prettyPhoto)。看起来[简单易用](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/documentation)，还支持多种浏览器

Firefox 3.0+
Google Chrome 10.0+
Internet Explorer 6.0+
Safari 3.1.1+
Opera 9+

如何初始化[幻灯片](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/#slideshow-image-gallery-overview)以及如何将其与[Vimeo](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/#vimeo-overview)一起使用。

如果这有帮助，请告诉我。

——阿文德。

# android - 使用 GL 着色器语言的相机帧 yuv 到 rgb 转换

> ID：15880233
> 
> 赞同：2
> 
> 时间：2013-04-08T13:22:55.223
> 
> 标签：android, opengl-es, shader, rgb, cocos2d-x

我从字节数组中的android相机预览回调中获取相机帧并将其传递给jni代码。由于我们不能在 C++ 中使用字节，所以我将其转换为整数数组，如下所示：

```
 JNIEXPORT void JNICALL Java_com_omobio_armadillo_Armadillo_onAndroidCameraFrameNative(
            JNIEnv* env, jobject, jbyteArray data, jint dataLen, jint width,
            jint height, jint bitsPerComponent) {
        Armadillo *armadillo = Armadillo::singleton();

        jbyte *jArr = env->GetByteArrayElements(data, NULL);
        int dataChar[dataLen];
        for (int i = 0; i < dataLen; i++) {
            dataChar[i] = (int) jArr[i];
    } 
```

然后我将它添加到 CCImage 以创建如下纹理：

```
 void AppClass::drawAndroidCameraFrame() {

CCLOG("drawAndroidCameraFrame");
int nextBufferIndex = !_bufferIndex;
if (mIsNewFrameReceived) {
    mIsNewFrameReceived = false;
    return;
}
CCLOG("drawAndroidCameraFrame - creating CCImage");
_image[nextBufferIndex] = new CCImage();
_image[nextBufferIndex]->initWithImageData(mFramePData, mFrameDataLen,
        mFrameFormat, mFrameWidth, mFrameHeight, mBitsPerComponent);
if (mIsNewFrameReceived) {
    CCLOG("drawAndroidCameraFrame = relasing frame image");
    _image[nextBufferIndex]->release();
    mIsNewFrameReceived = false;
    CCLOG("camera frame process cancelled 2");
    return;
}
CCLOG("drawAndroidCameraFrame - creating texture2d");
_texture[nextBufferIndex] = new CCTexture2D();
_texture[nextBufferIndex]->initWithImage(_image[nextBufferIndex]);

    if (!_videoSprite) {
    CCLOG("Creating new sprite");

    if (mIsNewFrameReceived) {
        CCLOG("drawAndroidCameraFrame - releasing image an texture");
        _image[nextBufferIndex]->release();
        _texture[nextBufferIndex]->release();
        mIsNewFrameReceived = false;
        CCLOG("camera frame process cancelled 3");
        return;
    }

    CCLOG("drawAndroidCameraFrame - creating video sprite");
    _videoSprite = new CollisionBitmapSprite();
    _videoSprite->initWithTexture(_texture[nextBufferIndex]);

    //get director
    CCDirector *director = CCDirector::sharedDirector();

    // ask director the window size
    CCSize size = director->getWinSize();
    // position the sprite on the center of the screen
    _videoSprite->setPosition(ccp(size.width/2, size.height/2));

    //get scale factor
    CCSize* imageSize = new CCSize(_image[nextBufferIndex]->getWidth(),
            _image[nextBufferIndex]->getHeight());

    CCSize scale = getCameraFrameScaleFactor(*imageSize);
    //      CCLOG ("Scale factor is x=%f and y=%f", scale.width, scale.height);

    _videoSprite->setScaleX(scale.width);
    _videoSprite->setScaleY(scale.height);

    if (mIsNewFrameReceived) {
        _image[nextBufferIndex]->release();
        _texture[nextBufferIndex]->release();
        mIsNewFrameReceived = false;
        CCLOG("camera frame process cancelled 4");
        return;
    }

    _videoSprite->setTexture(_texture[nextBufferIndex]);

                Shaders::addProgram(_videoSprite, (char *)     Shaders::textureVertShader,
    mFrameWidth, mFrameHeight);
    GLuint i =Shaders::addProgram(_videoSprite, (char *) Shaders::vertShader,
            (char *) Shaders::yuvtorgb);
        Shaders::setYuvtorgbParameters(_videoSprite,i);
    addChild(_videoSprite, -1);

} else {
    _videoSprite->setTexture(_texture[nextBufferIndex]);
}
//  CCLOG ("Armadillo::drawCameraFrame completed successfully");
//release memory
if (_image[_bufferIndex]) {
    _image[_bufferIndex]->release();
}

if (_texture[_bufferIndex]) {
    _texture[_bufferIndex]->release();
}

_bufferIndex = nextBufferIndex;

 } 
```

由于图像是 YUV(N21) 格式，所以我将着色器应用于可以将图像帧转换为 rgb 的帧。着色器程序如下：

片段着色器：

```
const char *Shaders::yuvtorgb = MULTI_LINE_STRING(
        precision highp float;
        varying vec2 v_yTexCoord;
        varying vec4 v_effectTexCoord;

        uniform sampler2D y_texture;
        uniform sampler2D u_texture;
        uniform sampler2D v_texture;

        void main()
        {
            float y = texture2D(y_texture, v_yTexCoord).r;
            float u = texture2D( u_texture, v_yTexCoord ).r;
            float v = texture2D( v_texture, v_yTexCoord ).r;

            y = 1.1643 * ( y - 0.0625 );

            u = u - 0.5;
            v = v - 0.5;

            float r = y + 1.5958 * v;
            float g = y - 0.39173 * u - 0.81290 * v;
            float b = y + 2.017 * u;

            gl_FragColor = vec4(r,g,b, 1.0);
        }
); 
```

顶点着色器：

```
const char *Shaders::vertShader = MULTI_LINE_STRING(
        attribute vec4 a_position;
        attribute vec2 a_yTexCoord;
        attribute vec4 a_effectTexCoord;

        varying vec2 v_yTexCoord;
        varying vec4 v_effectTexCoord;
        uniform mat4 u_MVPMatrix;
        void main()
        {
            v_yTexCoord = a_yTexCoord;
            v_effectTexCoord = a_effectTexCoord;
            gl_Position = u_MVPMatrix * a_position;
        }
); 
```

添加程序方法：

```
GLuint Shaders::addProgram(CCSprite *sprite, char *vertShader,
            char*fragShader) {
        CCGLProgram *glProgram = new CCGLProgram();
        if (!glProgram->initWithVertexShaderByteArray(vertShader, fragShader)) {
        CCLOG("Shader problem: %s\n %s \n%s", glProgram->vertexShaderLog(), glProgram->fragmentShaderLog(), glProgram->programLog());
    }

    glProgram->addAttribute(kCCAttributeNamePosition, kCCVertexAttrib_Position);
    glProgram->addAttribute(kCCAttributeNameTexCoord,
            kCCVertexAttrib_TexCoords);
    if (!glProgram->link()) {
        CCLOG(
                "Shader problem: %s\n %s \n%s",      glProgram->vertexShaderLog(), glProgram->fragmentShaderLog(), glProgram->programLog());
    }
    glProgram->updateUniforms();

    sprite->setShaderProgram(glProgram);
    return glProgram->getProgram();
} 
```

然后我将着色器应用于帧精灵：

```
GLuint i =Shaders::addProgram(_videoSprite, (char *) Shaders::vertShader,
                (char *) Shaders::yuvtorgb); 
```

我得到一个绿色和粉红色的图像框架。暗部分变为绿色，亮部分显示为粉红色。

生成的图片网址如下：![在此处输入图像描述](https://i.stack.imgur.com/u55yK.png)

我被她困住了，没有找到任何合适的解决方案。任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T23:53:35.293

I am not sure if you are trying to get the RGB from the camera in order to use it outside the phone. But maybe you can convert YUV to RGB in the android,a nd then pass the RGB pixel array?

Here is the code I used to convert to RGB:

For openning the camera I used:

```
try {
    camera = Camera.open();
    cameraParam = camera.getParameters();
    cameraParam.setPreviewFormat(ImageFormat.NV21);
    List<int[]> fps = cameraParam.getSupportedPreviewFpsRange();
    camera.setDisplayOrientation(90);
    camera.setParameters(cameraParam);
    cameraParam = camera.getParameters();
    camera.startPreview();

    // wait for frames to come in
    camera.setPreviewCallback(new PreviewCallback() {
        @Override
        public void onPreviewFrame(byte[] data, Camera camera) {
            frameHeight = camera.getParameters().getPreviewSize().height;
             frameWidth = camera.getParameters().getPreviewSize().width;
             int rgb[] = new int[frameWidth * frameHeight]; // number of pixels
             // the following returns a pixel array in RGB format
             byte[] bytes = decodeYUV420SP(rgb, data, frameWidth, frameHeight);
        }
    });
} catch (Exception e) {
    Log.e("camera", "  error camera  ");
} 
```

The `decodeYUV420SP` I got from a differnet post you can find it [here](http://www.akeric.com/blog/?p=1342).

And here is the code itself from the above post:

```
//  Byte decoder : ---------------------------------------------------------------------
int[] decodeYUV420SP(int[] rgb, byte[] yuv420sp, int width, int height) {
    Log.e("camera", "   decodeYUV420SP  ");
    Log.e("camera", "   Clearing Sums and Pixel Arrays  ");
    sumRED = 0;
    sumGREEN = 0;
    sumBLUE = 0;
    rStandardDeviation.clear();
    gStandardDeviation.clear();
    bStandardDeviation.clear();
    // TODO Auto-generated method stub
    final int frameSize = width * height;

    for (int j = 0, yp = 0; j < height; j++) {
        int uvp = frameSize + (j >> 1) * width, u = 0, v = 0;
        for (int i = 0; i < width; i++, yp++) {
            int y = (0xff & (yuv420sp[yp])) - 16;
            if (y < 0)
                y = 0;
            if ((i & 1) == 0) {
                v = (0xff & yuv420sp[uvp++]) - 128;
                u = (0xff & yuv420sp[uvp++]) - 128;
            }

            int y1192 = 1192 * y;
            int r = (y1192 + 1634 * v);
            int g = (y1192 - 833 * v - 400 * u);
            int b = (y1192 + 2066 * u);

            if (r < 0)
                r = 0;
            else if (r > 262143)
                r = 262143;
            if (g < 0)
                g = 0;
            else if (g > 262143)
                g = 262143;
            if (b < 0)
                b = 0;
            else if (b > 262143)
                b = 262143;

            rgb[yp] = 0xff000000 | ((r << 6) & 0xff0000) | ((g >> 2) & 0xff00) | ((b >> 10) & 0xff);

        }
    }
    return rgb;
} 
```

Then once you read back the return rgb pixel array by running `decodeYUV420SP` you can reconstruct the image by:

```
Bitmap bitmap= BitmapFactory.decodeByteArray(bytes, 0, bytes.length); 
```

Hope it helps. My code might have errors, double check stuff, but in general it works for me.

# msmq - 程序设计问题

> ID：15880235
> 
> 赞同：0
> 
> 时间：2013-04-08T13:22:59.473
> 
> 标签：msmq, nservicebus

今天是个好日子，

我有一个（或多个）程序设计问题，我很想得到一些反馈。

这是我的情况：我有

*   电脑A运行软件A
    *   软件 A 有不同的状态（空闲、处理、打印……）
*   电脑B运行管理软件B
*   这些软件位于两台不同的机器上。

我真正需要的是一种让运行软件 B 的计算机能够判断软件 A 处于什么状态的方法。

我希望软件 A 在状态发生变化时向软件 B 发送某种信号（消息）。我还希望软件 A 在软件 B 请求时发送它的状态。

我一直在考虑在两者之间使用 NService Bus 或 MSMQ，但软件 B 可能位于不在当前网络上的计算机上（它可能位于其网络上的“公司办公室”中）。除了列出的两种方法之外，还有其他方法可以实现我想要的吗？

任何帮助将不胜感激。

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:46:49.810

看看 NSB 中的[网关](http://support.nservicebus.com/customer/portal/articles/859548-the-gateway-and-multi-site-distribution)功能。这将允许站点之间的 HTTP 通信，并将支持您的所有方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:47:45.847

这就是我的看法：

*   软件 A 是服务器
*   软件B（管理软件是客户端）

好的设计应始终确保服务器永远不会自行发送任何内容。我会开发一个简单的基于 HTTP 的协议（REST API 或**Web 服务**，如果你想在 W3C 标准中完美地做到这一点）来远程查询软件 A。这样，您甚至可以开发在浏览器中运行的客户端软件。客户端可以通过防火墙和代理进行连接，因此您只需确保对软件 A 的请求在您的公司内部得到适当的中继。

我无法阅读太多关于其他约束的信息，但如果您只需要监控一个状态，那么这就足够了。为避免轮询，您可以使用[WS-Eventing](http://www.w3.org/Submission/WS-Eventing/)。

# java-me - 在 j2me 中编写文件

> ID：15880239
> 
> 赞同：0
> 
> 时间：2013-04-08T13:23:11.177
> 
> 标签：java-me

我的代码不起作用，也没有给出任何异常：

```
OutputConnection con = (OutputConnection) Connector.open("file:///epsd/rescuer.txt", Connector.WRITE);
System.out.println("below con");
OutputStream out = con.openOutputStream();
PrintStream ps = new PrintStream(out);
System.out.println("below ps");
ps.println(name+"!"+no+"!"+"!"+mtype+"!@!");    
System.out.println("below println");
ps.close();
con.close(); 
```

控制没有到达`OutputConnection`线后。这是如何将数据附加到 J2ME 中的文本文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:27:14.543

使用以下内容获取 SDCard 路径并将其与您的文件名连接起来

```
String memoryCardPath = System.getProperty("fileconn.dir.memorycard");
String filePath = memoryCardPath + "/rescuer.txt";
OutputConnection con = (OutputConnection) Connector.open(filePath, Connector.WRITE); 
```

# ember.js - 使用 find 时未在对象上调用 init

> ID：15880241
> 
> 赞同：0
> 
> 时间：2013-04-08T13:23:18.780
> 
> 标签：ember.js

所以我正在使用 Ember.js 开发 XMPP 客户端。由于我的数据来自 XMPP，我想创建自己的模型并找到了这个不错的教程：[http](http://eviltrout.com/2013/03/23/ember-without-data.html) ://eviltrout.com/2013/03/23/ember-without-data.html和小示例应用程序[emberreddit](https://github.com/eviltrout/emberreddit)。

设置应该非常简单。我只是扩展 Ember.Object 并实现一个创建或返回对象的查找函数：

```
App.Conversation = Ember.Object.extend({
    messages: [],
    talkingPartner: null,

    init: function(){
        this._super();

        console.log("Init called for App.Conversation");

        //Binding for XMPP client event
        $.subscribe('message.client.im', _.bind(this._onMessage, this));
    },

    //Private Callbacks
    _onMessage: function(event, message){

        console.log("Received message");

        this.find(message.jid).messages.pushObject(message);
    }
});

App.Conversation = Ember.Object.reopenClass({

    store: {},

    find: function(id){
        if(!this.store[id]){
            this.store[id] = App.Conversation.create();
        }
        return this.store[id];
    }
}); 
```

这大致遵循[此处](https://github.com/eviltrout/emberreddit/blob/master/js/app.js#L41)的代码。它工作正常，但从`init`未被调用。如果我创建不使用`find`它的对象，它会起作用。所以我有点困惑。

*   据我所知`store`，所有 `App.Conversation`. 那是对的吗？另外，如果这是真的，我必须通过 移动和`messages`设置它们 ，不是吗？`talkingPartner``init``this.set('message')`
*   为什么在`ìnit`调用时不`App.Conversateion.create()`调用`App.Conversation.find(id)`。谁能解释为什么？我发现 Ember.js 的行为有时与最初预期的有些不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:51:14.503

你需要改变这个：

```
App.Conversation = Ember.Object.reopenClass({ 
```

对此：

```
App.Conversation.reopenClass({ 
```

您的代码正在重新打开 Ember.Object 本身，并完全覆盖`App.Conversation`.

这是一个基于您的代码的[工作 jsFiddle 。](http://jsfiddle.net/ekidd/xwE59/)

# css - 使用 CSS 定位社交网络按钮

> ID：15880245
> 
> 赞同：0
> 
> 时间：2013-04-08T13:23:26.717
> 
> 标签：css

我正在使用此处找到的 Bootstrap 创建一个网站：

[http://www.bestcastleintown.co.uk/wp/](http://www.bestcastleintown.co.uk/wp/)

我的问题是，在主页上，`<header>`如果你仔细观察，我的 Twitter 和 Facebook 社交网络按钮就在下方，并没有水平对齐。我希望通过`class="like-btn"`为包含 facebook 按钮的列表项创建一个单独的 CSS 类，我可以使它们水平对齐。

```
<div class="bs-docs-social">
  <div class="container">
    <ul class="bs-docs-social-buttons">
      <li class="like-btn">
          <!--facebook like button-->
      </li>
      <li class="follow-btn">
          <!--twitter follow button-->
      </li>
      <li class="tweet-btn">
          <!--twitter tweet button-->
      </li>
    </ul>
  </div>
</div> 
```

但是，like 按钮的 facebook 代码似乎包含在包含一些 CSS 样式的 iframe 中，除非我的网站碰巧具有与 Facebook iframe 相同的匹配协议、域和端口，否则我不能因为相同的来源而无法修改它政策。

我注意到来自 facebook 的一条 CSS 规则，如果移除会使按钮看起来对齐，但边框会从类似按钮的底部移除，这是不可取的。

```
.pluginButtonSmall {
    padding: 0 5px 2px;
} 
```

有什么我可以添加到我的`.like-btn`班级来解决问题，以便按钮水平对齐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:30:24.700

使用`div`s 代替`ul`>`li`并在社交容器元素上使用`margin-top`or`padding-top`使它们水平对齐。通常您需要将它们移动一两个像素，因为并非所有社交按钮都具有相同的尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:31:55.653

如果这是导致问题的原因；也许添加一条规则

```
.like-btn div {
    padding: 0px;
} 
```

或者

```
.like-btn .pluginButtonSmall {
    padding: 0px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:33:48.653

您可能想尝试类似的 CSS 规则...

```
.like-btn, .follow-btn, .tweet-btn {
   float: left;
   display: inline-block;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-05T00:58:30.577

在[getBootstrap.com](http://getbootstrap.com)的底部，他们有这个：

![在此处输入图像描述](https://i.stack.imgur.com/VwNUX.jpg)

我使用 Chrome 的开发者工具查看格式来自这个 css 文件： http: [//getbootstrap.com/assets/css/docs.min.css](http://getbootstrap.com/assets/css/docs.min.css)

它的顶部有一个许可证，允许我使用它。所以我下载了它并制作了自己的社交媒体页脚：

![在此处输入图像描述](https://i.stack.imgur.com/qBDtI.jpg)

我发现这个线程是因为您使用与 getBootstrap.com 相同的类名，所以我猜您使用的是 bootstrap....

# javascript - 隐藏表格当其主体中没有元素时

> ID：15880247
> 
> 赞同：2
> 
> 时间：2013-04-08T13:23:39.767
> 
> 标签：javascript, jquery, html, dom

我的表中有 ajax 链接，它将在单击时删除元素。我想确保当所有元素都被删除时，表格应该隐藏起来。我无法在 ajax 调用中添加任何事件。意思是说我不能编辑或更改任何 ajax 成功或任何其他参数或函数。我想要一些可以自行检查表格的东西，当表格主体中没有元素时隐藏表格，当输入条目时它会显示它自己

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:26:23.940

您可以使用`setInterval()`重复调用函数来为您进行检查。然后使用[`.toggle()`](http://api.jquery.com/toggle/#toggle-showOrHide)带布尔值的变体：

```
setInterval(function() {
    var $table = $('.tablesorter');
    $table.toggle($table.find('tbody').children().length > 0);
}, 500); 
```

这将大约每秒检查两次（每 500 毫秒一次），您可以更改第二个参数以增加或减少检查的频率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:25:18.557

在这里，例如表类被命名为`table`

```
$('.table > tbody:empty').parent().hide(); 
```

检查所有表格：

```
// Call the CheckTables function after 100 milliseconds
setInterval(CheckTables, 100);

function CheckTables()
{
    $( "table " ).each(function( index ) {
      $(this).find('tbody:empty').parent().hide();
      $(this).find('tbody:not(:empty)').parent().show();
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:25:37.420

试试这个

```
$('.className> tbody:empty').parent().hide(); 
```

或者

```
$('.className tr').each(function() {
    if ($(this).find('td:empty').length) $(this).remove();
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T13:37:00.470

试试这个：

```
$(document).ajaxComplete(function() {
   $('table').each(function(){
      if($('tbody:empty',this))
         $(this).hide();
      else $(this).show();
   });
 }); 
```

# php - 使用 JQuery 倒数计时器时处理 JavaScript 和 PHP 月份之间的差异

> ID：15880248
> 
> 赞同：0
> 
> 时间：2013-04-08T13:23:41.243
> 
> 标签：php, javascript, jquery, countdown

我从数据库中检索日期（通过查询）。它采用这种格式：`2013-04-08`. 在 PHP 中，我`promotion_end_dates`在循环中获取每个产品并添加一个 JQuery 倒计时脚本。问题是当我调用倒计时函数时：

```
$(".clock").countdown({until: new Date(<?php echo $promo_date;?>)}); 
```

由于 PHP 和 JavaScript 之间的月份计数方式不同，计数器的计数增加了 1 个月/30 天。

如何让我`$promo_date`对应正确的 JavaScript 月份？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:37:33.757

鉴于您的 mysql 表以`YYYY-mm-dd`格式保存日期

在您的 mysql 查询后添加以下内容

```
$promo_date_exp = explode('-', $promo_date); 
```

并用此行替换您的特定 Javascript 行

```
$(".clock").countdown({until: new Date(<?php echo $promo_date_exp[0].','. ($promo_date_exp[1]- 1).','.$promo_date_exp[2]?>)}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:53:28.253

您应该正确格式化您的日期。从 上的文档中[`Date`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)，您应该根据 rfc 2822 对其进行格式化。

```
$(".clock").countdown({
    until: new Date('<?php echo date('r', strtotime($promo_date)); ?>')
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:36:38.697

您必须将 php 日期作为字符串发送到 javascript

```
$(".clock").countdown({until: new Date("<?php echo $promo_date;?>")}); 
```

# eclipse - Subclipse SVN首次提交忽略某些目录

> ID：15880249
> 
> 赞同：0
> 
> 时间：2013-04-08T13:23:44.017
> 
> 标签：eclipse, svn, subclipse

决定从 CVS 跳到 SVN。

我在 subclipse 中为我的项目设置了一个新的存储库。当我去“完成”设置时，它想要进行初始提交，并为我提供一个平面文件列表，以选择文件进行版本控制。

问题是我有成千上万个我不想提交的生成二进制文件。

所以我点击取消，因为我需要一整天的时间才能完成并取消选择所有不需要的文件。令人讨厌的是，当我单击要忽略的文件的父类别时，它不是递归的！

所以我单击取消然后转到项目的 eclipse 目录结构并手动设置 svn:ignore 在我想忽略的所有目录上。然后我尝试再次提交并再次呈现所有文件 - 忽略似乎什么也没做。

谁能指出我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:52:07.147

对于第一次提交，我建议编写一个小脚本来删除（当然你会有备份）所有不打算提交的文件。

之后，如果你发现你不小心提交了一个文件，你可以

```
svn delete file 
```

在第一次结帐时，复制回（或者更好的是，重新生成）所有二进制文件。这将触发 svn 通知您的本地存储库与远程存储库不同步。

```
cd <Root of local repository>
svn status 
```

你会看到很多“待添加”的项目。转到父目录并`svn:ignore`为每个生成的项目添加属性。

```
cd build
svn propedit svn:ignore . 
```

这将打开一个编辑器（如果没有，您需要将环境变量 SVN_EDITOR 设置为合适的编辑器）。然后你可以添加 svn 知道不被跟踪的条目。

```
(in the ignore property editor)

target
build
image*
*.o

(and so on) 
```

保存文件，它将为下一次提交*暂存*。随后的运行`svn status`将不再将这些文件显示为“需要添加”，但它们会将目录显示为“需要提交（它是目录的修订版）”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-20T06:00:30.117

# 快速搁置

因此，我不完全确定您使用 Subclipse 的哪个功能来创建存储库并将项目共享给它，我假设您通过 eclipse SVN 存储库视图创建了一个基于文件的存储库并尝试共享和然后承诺它。看起来你的问题已经解决了，但我确实想在这里添加一个答案，因为我遇到了这篇文章，寻找处理初始提交的相同问题的答案，即使只是一般使用 SVN，并希望为其他人提供帮助寻求帮助。

# 介绍

首先，我建议不要仅在初始提交时使用这样的 IDE 扩展，因为他们可能会错过很多处理在 SVN 中打开 repo 的选项。我个人非常喜欢使用 SVN 的命令行形式，但 TortoiseSVN 是 GUI 的一个不错的选择。

无论您是创建基于本地文件的 repo 还是连接到 SVN 服务器，并且您希望更好地控制以前未版本化项目中的第一次提交，这都是我发现的最佳通用工作流程。

## 创建要保存到的远程文件夹。

在命令行上，这将是：

```
$> svn mkdir your-url-scheme://your-site-address.domain/path/to/repo/example-directory 
```

或者在 TortoiseSVN 打开你的 repo 进行浏览，右键单击，然后选择“create new folder”

这将为您在 SVN 存储库中提供一个位置，以便我们为下一步结帐。

## 签入已启动的项目

确保使用 repo 中新创建的空文件夹进行结帐。SVN 实际上并不要求签出的文件夹为空，这是使其实际上非常灵活的重要部分，并且如果使用正确，能够相当容易地将部分目录包含到其中。

现在，您将把这个空文件夹签出到您已经启动的项目的根文件夹中。这会将您的项目添加到此文件夹的工作副本中，而无需进行任何提交。命令是：

```
$> svn co your-url-scheme://your-site-address.domain/path/to/repo/example-directory /your/projects/root/ 
```

“co”代表结账。在 Tortoise svn 中，您可以右键单击或在空的 repo 文件夹中选择“checkout...”，然后选择项目根目录。

## 设置忽略和提交

最后，在使用以下命令将任何其他文件添加到树之前，您可以轻松地对某些文件设置忽略：

```
$> svn propset svn:ignore file-or-directory-to-ignore 
```

并添加所有未忽略的目录和文件：

```
$> svn add * --force 
```

在这种情况下，强制在技术上是不必要的，但可以确保完全递归。如果使用 TortoiseSVN，您现在也可以在文件资源管理器中执行所有这些操作，或者您甚至可以在此时使用您的 IDE 扩展来执行此操作（确保在批量添加文件以进行提交之前忽略您需要的所有文件），仅此而已left 是确保将新添加的文件提交到 repo 并且您已启动并使用源代码控制运行 :)

在此处添加此方法仅仅是因为此方法允许您避免对那些没有人想随身携带的臭二进制文件进行任何不必要的复制。

# orchardcms - 在 Orchard CMS 上，当查询没有返回投影记录时，如何显示消息

> ID：15880251
> 
> 赞同：1
> 
> 时间：2013-04-08T13:23:44.447
> 
> 标签：orchardcms, projection, orchardcms-1.6

使用 Orchard CMS 上的管理面板，我创建了以下内容：

1.  一种名为 CalendarEvent 的内容类型，它包含多个字段，包括 EventDate；
2.  具有 2 个过滤器的查询，一个按内容类型 (= CalendarEvent)，另一个按事件日期。布局上的显示模式设置为属性；
3.  单击菜单项时显示查询的投影。

问题是基于 EventDate 我们只显示即将发生的事件，而不是过去的事件。如果由于某种原因没有要显示的事件，用户得到的只是一个没有任何信息的空白页面。

我的问题是，如何修改我的查询或投影以显示如下内容：“没有安排当前事件”？

我知道查询布局上的属性允许我指定“无结果”，但这意味着存在记录并且实际属性为空。但是，在我的示例中，不存在任何记录。

谢谢大家。

拉斐尔

顺便说一句，我使用的是最新的 Orchard 版本 1.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-14T12:51:30.083

我所做的是创建一个形状并将其用作我的查询中的视图。然后该形状将有一个 if 语句来检查查询返回是否给出任何结果。

**例子：**

```
@using Orchard.ContentManagement
@using Orchard.Utility.Extensions

@{
    var dealsTerms = ((IEnumerable<ContentItem>)Model.ContentItems).ToList();
}
@if (dealsTerms.Any() )
{
    <div>
        @foreach (var dealTerm in dealsTerms)
        {
            var contentManager = dealTerm.ContentManager;
            <div>
                @Display(contentManager.BuildDisplay(dealTerm, "Summary"))
            </div>
        }
    </div>
}
else
{
   <p>No deals found</p>
} 
```

我用这篇文章作为参考： [http ://www.ideliverable.com/blog/ways-to-render-lists-of-things](http://www.ideliverable.com/blog/ways-to-render-lists-of-things)

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-02T02:01:53.413

如果您的投影是 Layouts 元素，您可以在主题的 Views/Elements 文件夹中创建一个 Projection.cshtml 文件，其中包含以下内容：

```
@{
    var list = Model.List;
    var pager = Model.Pager;

    if (list != null)
    {
        @Display(list)

        if (list.Items.Count == 0)
        {
            <div>There are currently no items.</div>
        }
    }

    if (pager != null)
    {
        @Display(pager)
    }
} 
```

这是添加了部分的默认模板的副本`if (list.Items.Count == 0)`。根据需要进行编辑。

# facebook - Facebook graph api，获取家庭连接时出错

> ID：15880254
> 
> 赞同：0
> 
> 时间：2013-04-08T13:23:52.540
> 
> 标签：facebook

尝试查询我/家时出现以下错误

```
error: {
message: "An unknown error has occurred.",
type: "OAuthException",
code: 1
} 
```

当我查询我/喂它时，它正在工作。开发文档说他们需要同样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:14:58.637

我遇到了同样的问题，并且猜测（希望）这是一个临时错误。我注意到如果我明确指定我感兴趣的字段，那么我看不到错误。IE

/me/home?fields=from,created_time,description,id,link,message,name,picture,source,story,to,type,updated_time,caption,icon

如果我添加“动作”字段，错误就会回来，所以那里可能有问题。

# c# - 来自 XML 模式的 C# 数据集验证

> ID：15880256
> 
> 赞同：0
> 
> 时间：2013-04-08T13:23:55.957
> 
> 标签：c#, validation, datatable, dataset, xsd

我有一个 xml 架构。我想填充一个 DataSet 并使用此模式对其进行验证。

```
DataSet package = new DataSet();
StringReader schemaResourceReader = new StringReader(PackageValidationLibrary.Properties.Resources.myPackage);
package.ReadXmlSchema(schemaResourceReader);

package.Tables["Table1"].Rows.Add(packageDetail.date,packageDetail.code,packageDetail.amount,packageDetail.place,"0");
package.Tables["Table2"].Rows.Add("0","0");
foreach (Cek data in recordList){
    package.Tables["Table3"].Rows.Add(data.Serial, data.Code, data.Branch, data.ValidityDate, "0");
} 
```

使用上面的代码，我可以加载数据，但我无法验证它，尽管数据集导入了模式。

我尝试使用 package.GetXml() 方法获取 xml 字符串并再次重新加载 xml。然后我得到了例外。

如何验证此表？谢谢。

* * *

**编辑** 正如我从答案和评论中了解到的，在填充数据集时无法进行验证。然后我从数据集中读取 xml 并使用下面给出的配置加载它。

```
_schema = XmlSchema.Read(new StringReader(PackageValidationLibrary.Properties.Resources.TakasPaketi), new ValidationEventHandler(ValidationEventHandler));
                XmlReaderSettings _settings = new XmlReaderSettings();
                _settings.Schemas.Add(_schema);
                _settings.ValidationType = ValidationType.Schema;
                XmlReader vreader = XmlReader.Create(stream, _settings); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:30:39.080

我相信这会做到：

```
 // First, read in the XML schema
    DataSet MyDataSet = new DataSet();
    MyDataSet.ReadXmlSchema(@"C:\YourSchema.xsd");

    // Now, read in the XML file (it is validated 
    // against the schema when it is read in).
    MyDataSet.ReadXml(@"C:\YourFile.xml"); 
```

如果将数据 xml 文件编辑为与架构不匹配，则在读取 xml 文件时将引发异常。

因此，在您的情况下，您可能必须将数据集导出到 xml 字符串，然后再将其读回。您说执行此操作时遇到异常...。什么异常？也许数据对您拥有的架构无效。

# android - offsetLeftAndRight 后 ViewGroup 失效

> ID：15880258
> 
> 赞同：2
> 
> 时间：2013-04-08T13:24:04.517
> 
> 标签：android, android-view

我希望我的一个`ViewGroup`是可移动的。比方说，我想点击它，它下面的内容就会显示出来。在第二次单击时，它再次关闭。种`sliding menu`行为。

这是我的课程：

自定义滚动条：

```
public class MyScroller implements Runnable {
    private static final String TAG = "MY_SCROLLER";
    private static final int ANIMATION_DURATION = 500;
    private final Scroller mScroller;
    private View mScrollingView;

    private int lastX = 0;
    private static final Interpolator sInterpolator = new Interpolator() {
        public float getInterpolation(float t) {
            t -= 1.0f;
            return t * t * t * t * t + 1.0f;
        }
    };

    MyScroller(final View view) {
        mScroller = new android.widget.Scroller(view.getContext(), sInterpolator);
        mScrollingView = view;
    }

    public void start(int initialVelocity) {
        Log.d(TAG, "start() called");
        int initialX = mScrollingView.getScrollX();
        int maxX = mScrollingView.getWidth();
        mScroller.startScroll(0, 0, maxX, 0, ANIMATION_DURATION);
        lastX = initialX;
        mScrollingView.post(this);
    }

    public void run() {
        Log.d(TAG, "run() called");
        if (mScroller.isFinished()) {
            mScrollingView.invalidate();
            return;
        }

        boolean more = mScroller.computeScrollOffset();
        int x = mScroller.getCurrX();
        int diff = x - lastX;
        if (diff != 0) {
            Log.d(TAG, "x = " + x);
            mScrollingView.offsetLeftAndRight(diff);
            mScrollingView.invalidate();
            lastX = x;
        } else {
            forceFinished();
        }

        if (more) {
            mScrollingView.postDelayed(this, 16);
        }
    }

    void forceFinished() {
        if (!mScroller.isFinished()) {
            mScroller.forceFinished(true);
            mScrollingView.invalidate();
        }
    }
} 
```

和用法：

```
 viewGroup.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            new MyScroller(v).start(0);
        }
    });
    button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            new MyScroller(v).start(0);
        }
    }); 
```

因为`Button`一切正常 - 它顺利移动。但是`ViewGroup`我尝试过在屏幕截图上留下痕迹。内部带有 Button 的 RelativeLayout 留下了痕迹。独立按钮完美移动。我在这里想念什么？

![在此处输入图像描述](https://i.stack.imgur.com/wOYrI.png)

# c++ - 调整大小期间未调用表单属性

> ID：15880260
> 
> 赞同：3
> 
> 时间：2013-04-08T13:24:09.897
> 
> 标签：c++, .net, c++-cli

我有一个 .NET 表单，其中有一个名为 的布尔属性`_isResized`，该属性设置为调用事件的时间，并设置为`true`调用函数的时间。`SizeChanged``false``bool isResized()`

```
ref class net_window : public System::Windows::Forms::Form
{
private:
    bool _isResized;
public:
    net_window(void)
        : _isResized(false){
        InitializeComponent();
    }

    void InitializeComponent(void){
        this->SizeChanged += gcnew EventHandler(this, &net_window::eventResized);
    }

    bool isResized(void){
        bool temp = _isResized;
        _isResized = false;
        return temp;
    }

    Void eventResized(Object^ sender, EventArgs^ e){
        _isResized = true;
    }
}; 
```

我还有一个名为的原生 C++ 类`window`，它充当 .NET 表单周围的一层。这个类在主循环的每一帧都会更新，并使用`bool isResized()`表单的函数来查看大小是否发生了变化。

```
class Window
{
private:
    void* _net_window_handle;
    Window(){
        _net_window_handle = new gcroot<net_window^>;
        (*(gcroot<net_window^>*)_net_window_handle) = gcnew net_window;
    }
    ~Window(){
        delete _net_window_handle;
    }

    void update(void)//Called every frame.
    {
        if( (*(gcroot<net_window^>*)_element)->isResized() )
            //Do stuff.
    }
}; 
```

`SizeChanged`每当调整表单大小时，都会调用添加到的委托，因此`_isResized`一旦表单大小发生变化，就会将其设置为 true，但由于某种原因，每当窗口类使用该`bool isResized()`函数时，主循环的线程就会冻结，直到用户释放窗体的边缘，因此调整大小已完成。

只要调整大小，就无法访​​问 .NET 表单值。有替代方案吗？

谢谢

**编辑**

我使用一个调用`System::Windows::Forms::Application::DoEvents()`每一帧的主循环。当循环的线程进入这个函数并且主窗口正在调整大小时，它会冻结。有没有办法避免这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:51:49.670

`DoEvents strikes again. Windows pumps a modal message loop when the user starts dragging a window edge. Which means that your DoEvents loop isn't running anymore. Use a timer instead, SetTimer with a 15 or 31 msec interval is about right. Having your code respond to the Resize event directly of course highly preferred.`

谢谢汉斯帕桑特

# c# - 如何使用数据集和数据表更新数据库中的两列

> ID：15880265
> 
> 赞同：-1
> 
> 时间：2013-04-08T13:24:14.623
> 
> 标签：c#

我想更新我的数据库表中的两列。

下面是我用来遍历数据网格以获取商店地址的代码。在我使用 GetGoogleSearch 方法搜索 GPS 坐标的数据库中。

然后我从互联网上获取 GPS 坐标，并将它们放入数据表中。

我现在想更新列并放入我找到的数据并更新列，因为它们当前为数据库中的坐标经度和纬度设置为 NULL。

下面是用于迭代和获取 GPS 坐标的代码。

折叠 | 复制代码

```
private void btnMapStoreAddresses_Click(object sender, EventArgs e)
{

    AddressServiceData _AddressServiceData = new AddressServiceData();

    try
    {

        DataTable _PnPStoresListDataTable = new DataTable();
        string address = string.Empty;

        int GridRowCounnt = 0;
        GridRowCounnt = dgrgPnPStores.RowCount;

        for (int i = 0; i < GridRowCounnt; i++)
        {
             address = dgrgPnPStores.Rows[i].Cells[5].Value.ToString();
            _PnPStoresListDataTable = _AddressServiceData.GetGoogleSearch("", address + " South Africa", "", "");             

        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:43:07.527

在使用行和/或表之前，您需要一个数据集。此链接可能会有所帮助；

[C# 数据集](http://support.microsoft.com/kb/320714)

这个链接也有一个不错的例子；

[http://support.microsoft.com/kb/320714](http://support.microsoft.com/kb/320714)

虽然 - 正如亚历克斯所说，使用 SQLDataAdapter 很可能是最好的。

# cocoa - 在核心数据中复制/粘贴自定义托管对象

> ID：15880266
> 
> 赞同：1
> 
> 时间：2013-04-08T13:24:16.453
> 
> 标签：cocoa, core-data, nspasteboard

我很难复制/粘贴来处理我的自定义托管对象`Person`。该对象包含属性和关系。对象应提供 objectID。我打算实现粘贴生成一个新对象，然后从复制的`Person`.

复制 objectID 可能确实有效。我确信粘贴不起作用。我在我的`Person`类中实现了以下方法，以尝试复制/粘贴对象：

```
#pragma mark --- Copy functionality

-(id)pasteboardPropertyListForType:(NSString *)type
{
    if ( [type isEqualToString:@"my.company.person"])
    {
        NSManagedObjectID *oid = self.objectID;
        NSURL *uidURL = [oid URIRepresentation];
        return [uidURL absoluteString];
    }
    return nil;
}

-(NSArray *)writableTypesForPasteboard:(NSPasteboard *)pasteboard
{
    return @[@"my.company.person"];
}

+ (NSPasteboardWritingOptions)writingOptionsForType:(NSString *)type pasteboard:(NSPasteboard *)pasteboard
{
    if ( [type isEqualToString:@"my.company.person"])
    {
        return NSPasteboardWritingPromised;
    }
    return nil;
} 
```

并进行粘贴：

```
#pragma mark --- Paste functionality

+(NSArray *)readableTypesForPasteboard:(NSPasteboard *)pasteboard
{
    return @[@"my.company.person"];
}

+ (NSPasteboardReadingOptions)readingOptionsForType:(NSString *)type pasteboard:(NSPasteboard *)pasteboard
{
    if ( [type isEqualToString:@"my.company.person"])
    {
        return NSPasteboardReadingAsString;
    }
    return nil;
}

- (id)initWithPasteboardPropertyList:(id)propertyList ofType:(NSString *)type
{
    if ( [type isEqualToString:@"my.company.person"])
    {
        ...
    }
    return nil;
} 
```

我应该如何在这里进行？我不知所措，阅读了许多 stackoverflow 问答（例如 Peter Hosey 对[NSPasteboard 和简单自定义数据](https://stackoverflow.com/questions/7243668/nspasteboard-and-simple-custom-data?rq=1)的出色回答）以及 Apple 文档，但我仍然对此感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:25:06.467

您是否已经看过这个： [使用托管对象](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coredata/Articles/cdUsingMOs.html)？

我不确定您所说的“我需要返回一个`Person`对象但我没有`managed object context`.”是什么意思 您的上下文是您创建事物的便笺簿。

# python - 带有下拉提交的 Python 机械化复选框

> ID：15880268
> 
> 赞同：1
> 
> 时间：2013-04-08T13:24:25.497
> 
> 标签：python, drop-down-menu, submit, mechanize, mechanize-python

我有一个电子邮件客户端。我使用 python mechanize 检查了我需要做一些事情（移动、删除、鸡蛋）的电子邮件的“复选框”：

```
br.open(login_url)
br.open(url_1)
br.select_form(nr=0)
for i in range(0, len(br.find_control(type="checkbox").items)):
    if "4" in str(br.find_control(type="checkbox").items[i]):
        br.find_control(type="checkbox").items[i].selected = False
    else:
        br.find_control(type="checkbox").items[i].selected = True
reponseaa = br.submit()
print reponseaa

br.open(url_2)
br.select_form(nr=2)
for i in range(0, len(br.find_control(type="checkbox").items)):
    if "45198" and "4519" in str(br.find_control(type="checkbox").items[i]):
        br.find_control(type="checkbox").items[i].selected = True
    else:
        br.find_control(type="checkbox").items[i].selected = False
br.form['self'] = ["88"]
r1 = br.submit()
print r1 
```

问题在于提交按钮，它是一个下拉菜单，如下所示：

```
<select name="self">
<option value="0">Select an action</option>
<option value="87">Move</option>
<option value="88">Delete</option>
<option value="89">Mark as Important</option>
</select>
<input type="submit" name="submit" value="Action!"> 
```

如何选择删除并按下提交按钮？一个代码示例会很棒。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:33:17.327

您应该使用[mechanize 的表单](http://wwwsearch.sourceforge.net/mechanize/forms.html)：

```
import mechanize

br = mechanize.Browser()
br.open(URL)
br.select_form(nr=0)
br.form['self'] = ["88"]
r = br.submit()

print r.read() 
```

# java - apache commons ftp客户端超时问题

> ID：15880271
> 
> 赞同：5
> 
> 时间：2013-04-08T13:24:35.663
> 
> 标签：java, ftp, ftp-client

我在 Apache 库（commons.net ver 3.2）的帮助下从服务器下载 ftp 文件。下载很好，我收到了我需要的所有文件并将它们保存在一个文件夹中。我遇到的问题是超时，因为当我下载时连接中断时，我需要一条错误消息显示连接已丢失，但我发现这样做有困难，我搜索了无数个论坛，包括这个一个，我已经尝试了很多方法来解决这个问题，但还没有一个结果！我拥有的代码如下：

```
public void doSomething(String ip, int port, String user, String pass, String server, String remotePath, String localPath) {
  int tenseconds = 10 * 1000;
  int thirtyseconds = 30 * 3000;
  Socket s4 = new Socket();
  java.net.InetSocketAddress adr = new java.net.InetSocketAddress("213.0.17.234", 21);
  s4.connect(adr, thirtyseconds);
  FTPClient client = new FTPClient();

  org.apache.commons.vfs2.FileSystemOptions fileSystemOptions = null;
  String key = FtpFileSystemConfigBuilder.getInstance().getEntryParser(fileSystemOptions);

  try {

    client.setConnectTimeout(tenseconds);
    client.setDefaultTimeout(thirtyseconds);
    client.connect(ip, port);
    client.setSoTimeout(thirtyseconds);

    int reply = client.getReplyCode();
    if (!FTPReply.isPositiveCompletion(reply)) {
      throw new FileSystemException("vfs.provider.ftp/connect-rejected.error");
    }
    client.enterLocalPassiveMode();
    boolean login = client.login(user, pass);

    URL url = new URL("ftp://" + user + ":" + pass + "@" + server + remotePath + ";type=i");
    URLConnection urlc = url.openConnection();
    urlc.setConnectTimeout(1000);
    InputStream is = urlc.getInputStream();
    BufferedWriter bw = new BufferedWriter(new FileWriter(localPath));

    int c;
    client.setSoTimeout(tenseconds);

    client.setControlKeepAliveTimeout(10000);

    while ((c = is.read()) != -1) {
      urlc.getConnectTimeout();

      bw.write(c);

    }

    long t2 = System.currentTimeMillis();

    System.out.println(t2);

    JOptionPane.showMessageDialog(null, "se cargo el primer fichero!", "información", JOptionPane.INFORMATION_MESSAGE);

    if (login) {

      FTPFile[] files = client.listFiles();
      for (FTPFile file : files) {

        if (file.getType() == FTPFile.DIRECTORY_TYPE) {

          System.out.println("ftp file: " + file.getName() + ";" + FileUtils.byteCountToDisplaySize(file.getSize()));

        } else if (file.getType() == FTPFile.FILE_TYPE) {
          System.out.println("ftp file: " + file.getName() + ";" + FileUtils.byteCountToDisplaySize(file.getSize()));

        }

      }

      is.close();
      bw.close();

      client.setSoTimeout(tenseconds);
      client.logout();
      client.disconnect();

    }

  } catch (IOException e) {
    StringWriter sw0 = new StringWriter();
    PrintWriter p0 = new PrintWriter(sw0, true);
    e.printStackTrace(p0);

    System.out.println("connection probably lost");
    JOptionPane.showMessageDialog(null, "Error: " + e.getMessage(), "Error", JOptionPane.ERROR_MESSAGE);
  }
} 
```

我已经尝试了所有可以找到的东西，其中 setdefaulttimeout 用于激活所有超时，connectiontiomeout 用于等待连接，而当我们下载文件时使用 getsotimeouts 但它不起作用我试过给它 5 秒，所以它不会下载文件，但它不起作用，我已经读到连接超时存在一些问题，我们应该使用 socketfactory，所以我也创建了一个套接字工厂，我尝试了，但它没有工作，我已经到了有点绝望的地步，所以我向你寻求帮助我都试图`client.setControlKeepAliveTimeout(10000);`建立一个活着的超时，但它没有用！:(

# javascript - 底部图例与高图

> ID：15880276
> 
> 赞同：2
> 
> 时间：2013-04-08T13:24:48.973
> 
> 标签：javascript, highcharts

我正在使用 highcharts 绘制一些图表。我使用这样的基本线图：

[http://www.highcharts.com/demo/spline-irregular-time](http://www.highcharts.com/demo/spline-irregular-time)

如何在图表区域下方而不是右侧显示图例？

[http://www.highcharts.com/demo/column-stacked-percent](http://www.highcharts.com/demo/column-stacked-percent)

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-08T13:43:28.843

marginBottom 可用于将图例放在图表底部。您仍然可以使用图例属性来移动图例，例如在中间或右侧（我使用中心）。

```
 chart: {
        marginBottom: 100
    },

    legend: {
        align: 'center',
        verticalAlign: 'bottom',
        x: 0,
        y: 0
    }, 
```

可能的解决方案：[小提琴](http://jsfiddle.net/XwJfn/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T13:33:18.807

图表下方的图例是默认设置，因此您可以`legend`完全省略该属性。请记住，要使这看起来不错，您必须在底部边距添加一点，否则图表和图例将重叠。

```
chart: {
    type: 'line',
    marginRight: 130,
    marginBottom: 70 // Increase this to 70 or so
},
// Remove the legend property completely 
```

[这是一个演示](http://jsfiddle.net/59YRJ/)。

# centos - CentOS 是否默认安装了 rpm2cpio

> ID：15880277
> 
> 赞同：1
> 
> 时间：2013-04-08T13:24:52.747
> 
> 标签：centos, rpm

我正在为 CentOS 编写一些脚本。CentOS是否默认安装了**rpm2cpio ？**我在某处读到**rpm2cpio**附带 rpm 包，但我不确定。我无法从 RMP 项目网站上弄清楚。

对于 CentOS 5 和 6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:55:59.800

CentOS 和 RHEL 系统默认安装 rpm 包，rpm2cpio 包含在 rpm 包中，如下所示：

```
$  rpm -ql rpm | grep -P 'rpm2cpio$'
/usr/bin/rpm2cpio 
```

因此，是的，rpm2cpio 包含在 CentOS 5 和 6 中。

# r - 测试有马模型

> ID：15880278
> 
> 赞同：0
> 
> 时间：2013-04-08T13:25:02.640
> 
> 标签：r, statistics

我正在验证 Arima 模型，我想知道我的测试的临界值，以根据 p 值拒绝空假设。如果一个想要 95% 的置信度。这是我的关键价值。

```
1-pchisq(-2*(try2$loglik-try1$loglik),1)
 0.1817151
1-pchisq(-2*(try3$loglik-try2$loglik),1)
1 
```

其中 try1、try2 和 try3 是三个不同的模型。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:30:41.333

您需要提供更多信息，但我想我知道您要做什么。

您的零假设是这两个模型不提供相同的拟合优度 - 一个模型并不比另一个模型“更好”。通常，您根据基线模型测试每个模型。对您的结果的解释是：没有一个模型有显着差异（显着性水平为 5%）。

通过使用 1 个自由度，您意味着在每个模型中添加了一个独立变量。例如，`try1`有 1 个自变量，`try2`有 2 个，`try3`有 3 个。还请记住，您绝对必须有相同的因变量才能使其有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-03T12:41:09.273

**ARIMA（自回归综合移动平均）时间序列的交叉验证：** K 折交叉验证不适用于时间序列。相反，请使用回溯测试技术，例如[向前走](https://community.darwinex.com/t/walk-forward-optimization-for-machine-learning-in-python/3769)和[滚动窗口](https://www.quantstart.com/articles/Backtesting-a-Moving-Average-Crossover-in-Python-with-pandas)。

**自回归的 K 折交叉验证：**尽管交叉验证（通常）对时间序列 (ARIMA) 模型无效，但只要考虑的模型具有不相关的错误，并且您已经使用[Ljung Box Test](https://www.revolvy.com/page/Ljung%E2%80%93Box-test)，用于时间序列用例中的 XAI（可解释人工智能）。

*   有一些 Python 统计库可以使用这些方法，这里有两个：[Python Stats Tests](http://pypr.sourceforge.net/stattest.html)和[Python StatsModels](https://www.statsmodels.org/stable/index.html)。

*   你总是可以很容易地学习 Python API 并重构为 R。

要获得值的差异，您可以简单地使用[Python 3.6+ PEP 487 Descriptors](https://docs.python.org/3.6/whatsnew/3.6.html#pep-487-descriptor-protocol-enhancements)强制执行 int8 ，您可以在其中强制执行始终返回 int8 的类型列表，以加快计算速度（list : list -> list of ints）：

```
list_a = [1,2,3]
list_b = [2,3]
print(set(list_a).difference(set(list_b))) 
```

答案是`set([1])`

# enterprise-architect - 设置属性的默认值

> ID：15880279
> 
> 赞同：1
> 
> 时间：2013-04-08T13:25:03.123
> 
> 标签：enterprise-architect

在 EA 中，当我向类添加属性时，我使用插入按钮。我想将默认的新属性更改为 public 和 string 类型。我迅速搜索了一下，什么也没找到。基于如此多的虚假回复，很难搜索 EA。

所以我想我会很快在这里问。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:40:40.853

我很确定没有这个选项。

如果您创建自己的 UML 配置文件（具有自定义的图表类型），您可以为从图表工具箱（而不是在“属性”对话框中）创建的属性设置默认属性类型，但即使那样，也无法指定默认可见性。

# html5-video - 支持 html5-video-tag，但不支持 mime-type - 提供替代链接

> ID：15880281
> 
> 赞同：1
> 
> 时间：2013-04-08T13:25:11.677
> 
> 标签：html5-video, mime-types

我们使用 html5-video-tag。有时我们只得到一个视频源 (.mp4)。

对于不支持 html5-video 的浏览器 - 一切正常，备用方法有效：

```
<video>
    <object with flash></object>
</video> 
```

如果仅提供 .mp4，则会出现问题。Firefox 仅显示“Kein Video mit unterstützem Format und Mime-Type gefunden”。是的，Firefox 无法显示 .mp4 视频。

我能做些什么来强制 Firefox（或任何不支持 mime-type 的浏览器）显示替代的 object-flash-section？

是否存在 html5-video-tag 的属性以强制通过错误？或者我可以捕捉到一个事件“onerror”......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:28:13.250

您可以使用 JavaScript 来检测是否支持文件类型：

```
(function (video) {
    if (!video.canPlayType || !video.canPlayType('video/mp4')) {
        // Flash fallback
    }
}(document.createElement('video'))); 
```

如[HTML5 视频中所述，如果没有 .ogv 文件，则回退到 flash](https://stackoverflow.com/questions/4763042/html5-video-fallback-to-flash-if-no-ogv-file)

# ajax - MVC中的json成功和失败响应

> ID：15880285
> 
> 赞同：0
> 
> 时间：2013-04-08T13:25:24.703
> 
> 标签：ajax, asp.net-mvc, razor

我在练习阿贾克斯！我有一个简单的联系表格，这是我的行动：

```
public ActionResult Contact()
        {
            return View("Contact");
        }

        [HttpPost]
        public ActionResult Contact(ContactViewModel contactViewModel)
        {
            if (ModelState.IsValid)
            {
                var contact = contactViewModel.ConvertToContactModel(); 
                _contactRepository.Add(contact);
                _contactRepository.Save();
                return Json(new { msg = "Your contact Sent, I'll response soon." });
            }
            return Json("Sorry! Somthing went wrong, try again or contact again");
        } 
```

这是我的观点：

```
@model Blog.Web.UI.ViewModels.ContactViewModel 
@{
    ViewBag.Title = "Contact";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="Contact">
    @using (Ajax.BeginForm("Contact", "Home", new AjaxOptions() { OnSuccess = "Success" }))
    {

        <div>
            @Html.LabelFor(c => c.Name)
            @Html.TextBoxFor(c => c.Name)
        </div>

        <div>
            @Html.LabelFor(c => c.Email)
            @Html.TextBoxFor(c => c.Email)
            @Html.ValidationMessageFor(c => c.Email)
        </div>

        <div>
            @Html.LabelFor(c => c.Subject)
            @Html.TextBoxFor(c => c.Subject)
        </div>

        <div>
            @Html.LabelFor(c => c.Body)
            @Html.TextAreaFor(c => c.Body)
            @Html.ValidationMessageFor(c => c.Body)
        </div>
        <input type="submit" value="Send" />
    }
</div>

<script type="text/javascript">
    function Success(context) {
        if (context[0]) {
            $("#Contact").empty().html(context[1]);
        }
    }
</script> 
```

现在我想向用户展示联系成功或失败，我的代码不起作用的问题是什么？有趣的是，我的验证在这种情况下不起作用！请帮我解决这个问题，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:53:49.723

如果您想发送错误响应，则应将 Response 对象的 ResponseCode 设置为合适的 http 错误代码，例如 400 表示错误请求。

然后，您需要在 ajax.beginform 中提供一个错误处理程序来显示您想要的内容。如果你不这样做，它将返回一个 200 的响应代码，这就是认为一切都是 hunky dory，所以你的错误处理程序不会被触发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:59:15.257

与 Slicksim 不同，我们通常在应用程序模型中定义一个 JSON 返回类，其中包含一个布尔变量 Success。然后我们可以使用它来让 Javascript 确定请求是否成功。

```
public class JsonResponseModel(){
   public bool Success {get;set;}

   public string Message {get;set;}
}

public ActionResult Contact()
        {
            return View("Contact");
        }

        [HttpPost]
        public ActionResult Contact(ContactViewModel contactViewModel)
        {
            if (ModelState.IsValid)
            {
                var contact = contactViewModel.ConvertToContactModel(); 
                _contactRepository.Add(contact);
                _contactRepository.Save();
                return Json(new JsonResponseModel{ Success = true, Messsage = "Your contact Sent, I'll response soon." });
            }
            return Json(new JsonResponseModel{Success = false, Message = "Sorry! Somthing went wrong, try again or contact again"});
        }

<script type="text/javascript">
    function Success(response) {
        if (response.Success) {
            $("#Contact").empty().html(response.Message);
        }
        else{
           alert(response.Message);
        }
    }
</script> 
```

我想这是我们去而不是修改服务器标头的路线，因为如果 AJAX 调用上的验证失败而不是实际的服务器错误（HTTP 状态代码 500/404/等），您可能想要做一些不同的事情

# wordpress - 在没有缩略图的 Woocommerce Wordpress 插件中显示产品类别列表

> ID：15880294
> 
> 赞同：3
> 
> 时间：2013-04-08T13:25:50.480
> 
> 标签：wordpress, woocommerce

我正在使用以下短代码列出 woocommerce Wordpress 插件中的产品类别

```
<?php echo do_shortcode('[product_categories number=""]'); ?> 
```

问题是我需要摆脱的类别缩略图。我想把它隐藏起来，用 CSS 做这件事似乎很麻烦。无论如何我可以列出类别而不显示缩略图吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-25T19:45:01.457

您可以使用以下内容：

```
$args = array( 'taxonomy' => 'product_cat' );
$terms = get_terms('product_cat', $args);

if (count($terms) > 0) {
    echo '<p class="my_term-archive">';
    foreach ($terms as $term) {
        echo '<a href="/term-base/' . $term->slug . '" title="' . sprintf(__('View all post filed under %s', 'my_localization_domain'), $term->name) . '">' . $term->name . '</a>';    
    }
    echo '</p>';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-12T13:34:19.443

这是我用来按字母列出所有类别的列表，不包括空字母和类别特色图片！

你需要做的就是按照你想要的方式来设计它；）

```
<?php

/* Define which category // to list child categories array('parent'=>42) 42 is category ID */
$designers = get_terms('product_cat', array('parent'=>42));

/* If categ not empty for each designer take first letter */
if ( !empty( $designers ) && !is_wp_error( $designers ) ){    
    $term_list = [];    
    foreach ( $designers as $designer ){
        $letter = strtoupper($designer->name[0]);
        $designer_list[$letter][] = $designer;
    }
unset($designer);

    foreach ( $designer_list as $key=>$value ) {
        /* Wrap around each designer */
        echo '<div><span>' . $key . '</span><ul>';

        foreach ( $value as $designer ) {
            // Set thumbnail
            $thumbnail_id = get_woocommerce_term_meta( $designer->term_id, 'thumbnail_id', true );
            // get the image URL
            $image = wp_get_attachment_url( $thumbnail_id );
            /* List designers */
            echo '<li><a href="' . get_term_link( $designer ) . '" title="' . sprintf(__('Products by %s', 'my_localization_domain'), $designer->name) . '">' . $designer->name . '<img src=" ' .$image.' "" alt="" /></a></li>';
        }
        /* end Wrap around designer */
        echo '</ul></div>';
    }?>
} 
```

# c# - 从占位符内容中动态消除 html 标签

> ID：15880295
> 
> 赞同：0
> 
> 时间：2013-04-08T13:25:51.173
> 
> 标签：c#, asp.net, html, placeholder

我不知道这是否可能。我必须使用无法编辑并且从数据库中获取内容的自定义占位符。在数据库中有一些带有 html 标签的文本。我想消除这些标签，但我不会从数据库中消除它们。所以我必须从占位符内容中消除它们。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:29:43.353

你可以试试这个代码

```
var regex = /(<([^>]+)>)/ig;
var body = "<p>test</p>";
var result = body.replace(regex, "");
alert(result); 
```

# asp.net - NullReferenceException - 对象引用未设置为对象的实例

> ID：15880296
> 
> 赞同：1
> 
> 时间：2013-04-08T13:25:53.877
> 
> 标签：asp.net, vb.net, sql-server-2012

我正在尝试在下面运行此代码。它以前可以工作，但是当我添加第二个数据读取器时，它停止了。谁能告诉我怎么了？

```
Protected Sub btnSearchUser_Click(sender As Object, e As EventArgs) Handles btnSearchUser.Click

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim searchComm As String = "SELECT * FROM users WHERE username LIKE @username"
        Dim user_id_select As New Integer

        Dim searchSQL As New SqlCommand

        conn.Open()

        searchSQL = New SqlCommand(searchComm, conn)
        searchSQL.Parameters.AddWithValue("@username", txtUserSearch.Text)

        Dim datareader As SqlDataReader = searchSQL.ExecuteReader()

        While datareader.Read

            lstUsers.Items.Add(datareader.Item("username"))

        End While

        datareader.Close()
        conn.Close()

        Dim conn2 As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim selectComm As String = "SELECT user_id FROM users WHERE username=@username_selected"

        Dim selectSQL As New SqlCommand

        conn2.Open()

        selectSQL = New SqlCommand(selectComm, conn2)
        selectSQL.Parameters.AddWithValue("@username_selected", lstUsers.SelectedItem.Text.Trim)

        Dim datareader2 As SqlDataReader = selectSQL.ExecuteReader()

        While datareader2.Read

            If datareader2.HasRows Then

                user_id_select = datareader2("user_id")

                lblUserSelected.Text = "Selected: " + lstUsers.SelectedItem.Text

            ElseIf datareader2.HasRows = False Then

                lblInvalidUsername.Visible = True
                datareader2.Close()

            End If

        End While

        conn2.Close()

    End Sub 
```

![在此处输入图像描述](https://i.stack.imgur.com/ZJLOq.png)

你好，

`lblUserSelected.Text = "Selected: " + lstUsers.SelectedItem.Text`每当我输入用户名并单击搜索时，我都会遇到 NullReference 异常`txtUserSearch`，它以前可以正常工作..我不知道发生了什么..

谁能告诉我怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:33:58.890

我假设你正在`NullReferenceException`这条线上：

```
selectSQL.Parameters.AddWithValue("@username_selected", lstUsers.SelectedItem.Text.Trim) 
```

因为您没有指定`SelectedItem`最近填充的`ListBox`. 要选择第一项，您可以使用以下代码：

```
While datareader.Read
    lstUsers.Items.Add(datareader.Item("username"))
End While
If lstUsers.Items.Count <> 0 Then lstUsers.SelectedIndex = 0 
```

您也没有处理数据库中没有用户名的情况，那么它`ListBox`是空的并且没有选定的项目。

# haskell - 在列表推导中使用 or

> ID：15880298
> 
> 赞同：4
> 
> 时间：2013-04-08T13:25:55.267
> 
> 标签：haskell, list-comprehension

我正在尝试取出 1 到 10 之间可以被 5 或 3 整除的每个数字
这是我的代码到现在 -

```
giveList = 
[ x
 | x <- [1..10] ,
 (x `mod` 5 == 0) or (x `mod` 3 == 0)
] 
```

然后我在 ghci 中加载函数。但这给了我一个错误-

```
> [1 of 1] Compiling Main             ( problem1.hs, interpreted )

problem1.hs:4:10:
    The function `x `mod` 5 == 0' is applied to two arguments,
    but its type `Bool' has none
    In the expression: (x `mod` 5 == 0) or (x `mod` 3 == 0)
    In a stmt of a list comprehension:
      (x `mod` 5 == 0) or (x `mod` 3 == 0)
    In the expression:
      [x | x <- [1 .. 10], (x `mod` 5 == 0) or (x `mod` 3 == 0)]
Failed, modules loaded: none. 
```

我的问题是——

*   我们可以在列表推导中使用“或”吗？
*   如果没有，请告诉我如何以其他方式完成

我是函数式编程的新手，请帮助我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T13:30:18.047

您可以`or`在列表推导中使用，但是

```
Prelude> :t or
or :: [Bool] -> Bool 
```

那不是你在那个地方需要的，它是一个检查列表中的任何元素是否为`True`. 那里你需要

```
(||) :: Bool -> Bool -> Bool 
```

如果你想使用一个名称由字母中缀组成的函数，你需要将它括在反引号中，就像你对 所做的那样`mod`，但由于`or`只接受一个参数，你不能应用该函数中缀。

您的列表的正确版本是

```
giveList = [ x | x <- [1 .. 10], x `mod` 5 == 0 || x `mod` 3 == 0] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-08T13:30:49.810

`or`有一个类型签名`or :: [Bool] -> Bool`。它接受一个布尔值*列表*`True`，如果其中任何一个是，则返回`True`，`False`否则返回。

您正在寻找的功能是`|| :: Bool -> Bool -> Bool`. 它接受*两个*布尔值，`True`如果其中一个是，则返回`True`，`False`否则返回。

```
[x | x <- [1..10], x `mod` 5 == 0 || x `mod` 3 == 0] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T13:30:43.493

你可以做这样的列表理解：

```
[x | x <- [1..10], ((x `mod` 3) == 0) || ((x `mod` 5) == 0)] 
```

`or`函数适用于列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T06:45:42.413

事实上，我在`or`这里使用可能还不错：

```
[x | x <- [1..10], or $ map ((==0).(x `mod`)) [3,5]] 
```

...或者可能更具可读性...

```
[x | x <- [1..10], any (==0) $ map (x `mod`) [3,5]] 
```

不利的一面是它可能看起来有点吓人，但从好的方面来说，您可以通过这种方式轻松测试更多除数。

# php - 使用带计数器的 foreach 循环

> ID：15880301
> 
> 赞同：0
> 
> 时间：2013-04-08T13:26:01.937
> 
> 标签：php

我想输出 foreach 语句的结果，但我希望将它们分组到 3 中的 div 中

就像：

```
<div>image image image</div>
<div>image image image</div>
<div>image image image</div> 
```

到目前为止，这是我的代码：

```
$args = array( 'numberposts' => 3, 'offset'=> 0, 'category' => 9 );

            $myrows = get_posts($args);
                foreach($myrows as $row) {  ?>
                <div>
                    <?php if ( has_post_thumbnail($row->ID)) {
                    echo '<a href="' . get_permalink( $row->ID ) . '" title="' . esc_attr($row->post_title ) . '">';
                        echo get_the_post_thumbnail($row->ID);
                    echo '</a>';
                    }?>
                </div>
                <?php } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:31:14.687

```
$myrows = get_posts($args);
$chunks = array_chunk($myrows,3);
?>
<?php foreach($chunks as $myrows): ?>
<div>
    <?php foreach($myrows as $row): ?>
    <div>
        <?php if(has_post_thumbnail($row->ID)): ?>
        <a href="<?=get_permalink($row->ID)?>" title="<?=esc_attr($row->post_title)?>">
            <?=get_the_post_thumbnail($row->ID)?>
        </a>
        <?php endif ?>
    </div>
    <?php endforeach ?>
</div>
<?php endforeach ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:30:03.043

您可以使用以下方法创建块[`array_chunk()`](http://php.net/array_chunk)：

```
foreach (array_chunk($myrows) as $mychunk) {
    echo '<div>';
    foreach ($mychunk as $row) {
        // print your entries
        if (has_post_thumbnail($row->ID)) {
            echo sprintf('<a href="%s" title="%s">%s</a>', 
                get_permalink( $row->ID ),
                esc_attr($row->post_title ),
                get_the_post_thumbnail($row->ID)
            );
        }
    }
    echo '</div>';
} 
```

当然，如果`if`不满足条件，您将获得零块、一个或两个项目，而不是预期的三个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:31:31.470

```
<div>
    <?php
    $args = array('numberposts' => 3, 'offset' => 0, 'category' => 9);

    $myrows = get_posts($args);
    foreach($myrows as $idx => $row) {
    if ($idx % 3 == 0) echo "</div><div>";
    if (has_post_thumbnail($row->ID)) {
        echo '<a href="' . get_permalink($row->ID) . '" title="' . esc_attr($row->post_title) . '">';
        echo get_the_post_thumbnail($row->ID);
        echo '</a>';
    } ?>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T13:32:53.867

为什么不使用`modulo`运算符？

```
$counter = 0;

echo '<div>';

foreach ($myrows as $row)
{
    $counter++;

    if ($counter % 3 == 0) echo '</div><div>';

    echo $row;
}

echo '</div>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T13:34:10.733

试试这个代码。

```
<?php
$args = array( 'numberposts' => 3, 'offset'=> 0, 'category' => 9 );

            $myrows = get_posts($args);
            $tempCnt=0;
                foreach($myrows as $row) {
                    //12
                    if($tempCnt==3)
                    {
                        $tempCnt=0;
                        //do your reset code here.
                    }
                    $tempCnt++;
                    ?>
                <div>
                    <?php if ( has_post_thumbnail($row->ID)) {
                    echo '<a href="' . get_permalink( $row->ID ) . '" title="' . esc_attr($row->post_title ) . '">';
                        echo get_the_post_thumbnail($row->ID);
                    echo '</a>';
                    }?>
                </div>
                <?php } ?> 
```

# c - 使用 Virtualbox 的主机和来宾之间的串行端口连接

> ID：15880303
> 
> 赞同：6
> 
> 时间：2013-04-08T13:26:07.060
> 
> 标签：c, serial-port, virtualbox

我正在尝试学习如何编写将从 Linux 中的串行端口读取的 C 代码。[我发现这里](http://www.tldp.org/HOWTO/Serial-Programming-HOWTO/x115.html)似乎是一个很好的教程。

我希望能够测试这段代码，所以我认为我需要一个串行端口，或者在读取上面的代码时写入串行端口的方法。

我正在使用 virtualbox 在我的 Mac 上将 Ubuntu 10.04 作为虚拟机运行。我的想法是建立一个虚拟串行连接并从主机写入来宾。希望像`cat "Hello World" > /tmp/fake_serial`在主机终端中一样简单，并且可以由上面链接中的程序读取。

这可能吗？我尝试使用虚拟盒添加串行端口，当我尝试执行上述命令时，我收到一条错误消息，提示我无法写入套接字。

我想到的第二个选项是使用类似`minicom`来宾操作系统内部的东西来连接说`/dev/ttyS1`和写消息，让我的代码同时读取。同样，假设波特率和其他设置都可以，这可能吗？

我没有很多使用串行端口的经验，所以我很感激任何关于最好方法的建议。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T13:14:17.243

所以为了让它工作，我只是在 VirtualBox 上添加了另一个 Ubuntu VM，并通过虚拟串行端口将两者连接在一起。我用于大量开发的主要原始 VM 将被称为 VM1。新的 VM 带有一个仅用于向 VM1 发送消息的小型硬盘驱动器，将被称为 VM2。这些都是 Ubuntu 10.04 虚拟机。

在 VirtualBox 中，转到 VM1 的设置，转到端口，然后按如下方式更改设置：![VM1 设置](https://i.stack.imgur.com/3acKm.png)

现在转到VM2，然后选择设置，端口，然后更改如下：

![VM2 设置](https://i.stack.imgur.com/VjedH.png)

现在首先您需要启动 VM1。启动后，启动 VM2。现在您可以在 VM1 中打开一个终端，然后输入`screen /dev/ttyS0 38400`（您可能需要`sudo apt-get install screen`在此工作之前运行）。然后转到 VM2，打开一个终端，然后键入`echo "Hello" > /dev/ttyS0`.

您应该会看到`Hello`出现在 VM1 中打开的终端中。当你完成运行 screen press`ctrl-a k`来杀死它，否则如果你尝试用串行端口做其他事情，你可能会收到一条错误消息，指出端口正忙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:45:03.973

当我不得不从我的真实机器到虚拟机进行一些串行端口测试时，我最终做了一个“环回”类型测试。我拿了两个[USB 串行转换器](https://www.google.com/#q=usb-serial+cable&hl=en&source=univ&tbm=shop&tbo=u&sa=X&ei=BcpiUaeZKKGu2QWag4HQDw&ved=0CFwQsxg&bav=on.2,or.r_cp.r_qf.&bvm=bv.44770516,d.b2I&fp=9023eeea1f4d070a&biw=1182&bih=854)和一个[RS232 FF 适配器](https://www.google.com/#hl=en&tbm=shop&sclient=psy-ab&q=rs232+female+to+female&oq=rs232++f&gs_l=serp.1.1.0l2.0.0.6.330.0.0.0.0.0.0.0.0..0.0...0.0...1c..8.psy-ab.66R-sqQKwRU&pbx=1&bav=on.2,or.r_cp.r_qf.&bvm=bv.44770516,d.b2I&fp=9023eeea1f4d070a&biw=1182&bih=854)并将我的机器连接到自身。然后在设置-> USB 下的 VirtualBox 中，您可以将两个 USB 串行转换器之一路由到您的 VirtualBox“拥有”。

插入转换器后，一个将在 Mac 上注册，另一个在 Ubuntu“计算机”上注册，然后您可以在两台机器之间正常进行串行通信。

您也可以使用 pty（“伪电传”设备）[模拟虚拟串行端口](https://stackoverflow.com/questions/52187/virtual-serial-port-for-linux)，但我对此并不积极，因为我相信这样做的能力已被锁定在较新的内核中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-15T15:29:23.837

我遇到了类似的情况，在 Ubuntu 14.04 主机上使用 VirtualBox 5.0.10 运行 QNX 来宾。

我的解决方案似乎足以适用于上述情况。

我以与 Kells1986 设置他的 VM1 相同的方式配置来宾 VM：

在“串行端口”/“端口 1”选项卡下：

*   勾选“启用串口”
*   将“端口号”设置为“COM1”
*   将“IRQ”设置为“4”
*   将“I/O 端口”设置为“0x3F8”
*   将“端口模式”设置为“主机管道”
*   取消选中“连接到现有管道/套接字”
*   将“路径/地址”设置为可访问的文件系统路径（例如“/home/safayet/vmSerialPipe”）

根据[VirtualBox 手册](https://www.virtualbox.org/manual/ch03.html#serialports)：

> 您可以告诉 VirtualBox 将虚拟串行端口连接到主机上的软件管道。... 在 Mac、Linux 或 Solaris 主机上，使用本地域套接字 ...在 Linux 上，有各种工具可以连接到本地域套接字或在服务器模式下创建一个。最灵活的工具是`socat`并且可以作为许多发行版的一部分使用。

A`domain socket`是[UNIX 系统上的一种 IPC 机制，](http://man7.org/linux/man-pages/man7/unix.7.html)类似于管道。

我使用以下命令连接到 Ubuntu 主机上虚拟串行端口的“管道”端`socat`：

```
socat - UNIX-CONNECT:/home/safayet/vmSerialPipe 
```

# visual-studio - 如果 Visual Studio 加载项损坏，如何删除/卸载它们？

> ID：15880304
> 
> 赞同：6
> 
> 时间：2013-04-08T13:26:12.850
> 
> 标签：visual-studio, add-in

我安装了适用于 Visual Studio（所有版本）的 EntitySpaces 插件。卸载它后，当您启动任何版本的 Visual Studio 时，您会收到消息“无法重命名加载项文件”。您如何摆脱这种情况或阻止 Visual Studio 尝试加载加载项？

当安装插件或仅单独安装插件的应用程序未正确卸载或只是中断时，这似乎是一个常见问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-11-23T11:18:35.763

对于 Visual Studio 2015，您必须：

1.  单击**工具**->**扩展和更新**。

2.  确保在窗口左侧选择了**已安装选项。**

3.  找到您的插件，选择它并单击**卸载**按钮。

4.  重新启动 Visual Studio。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:26:12.850

有一些有用的文章可能对您的特定插件有用：

[http://www.mztools.com/articles/2006/mz2006018.aspx](http://www.mztools.com/articles/2006/mz2006018.aspx)

首先，我尝试了这个（可能对你有用）[如何：停用和删除加载项](http://msdn.microsoft.com/en-us/library/ms228765%28v=vs.100%29.aspx)。请注意，如果您不知道插件的 Namespace 或 ClassName，您可以在 FullClassName 下的 .addin 文件中找到它：

> 从集成开发环境 (IDE) 中删除加载项
> 
> 1.  删除要删除的加载项的 .addin XML 注册文件。默认位置是 ..\Users\username\ Documents\Visual Studio 2010\Addins\
> 2.  在 Visual Studio 命令提示符处，键入 devenv /resetaddin Namespace.ClassName，其中 Namespace 是加载项项目的名称，Classname 是其类名，例如**devenv /resetaddin MyAddin1.Connect**

[对我来说](http://devcomponents.com/blog/?p=653)，这虽然不是我的确切问题，但导致了我的解决方案，即简单地以管理员身份运行 Visual Studio。仅针对 Visual Studio 的一个版本执行此操作解决了我的问题，即不再出现错误消息（可能是因为它随后能够根据原始错误消息成功重命名）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-19T19:42:41.117

在 Visual Studio 2019 中，单击**扩展**选项卡。然后点击**管理扩展**。在打开的窗口中，选择左侧窗格中的**已安装**。之后**搜索**要删除的加载项。在显示的结果中，选择点击**UNINSTALL**的加载项。**重新启动 Visual Studio**以完成该过程。该过程似乎适用于任何加载项。

# bash - 如何在bash中向外部程序发送外部命令？

> ID：15880306
> 
> 赞同：1
> 
> 时间：2013-04-08T13:26:16.557
> 
> 标签：bash, command, external

我在 solaris 上安装了一个应用程序，它有自己的特定命令，通常我在终端中一一运行以下命令：

> eaw DDBSC1（然后提示符将变为<）< rldep:Cell=all;

我正在寻找一个脚本将其放入 bash 文件中并简单地运行它，我尝试过“expect”，但似乎 bash 脚本被存放在“eaw DDBSC1”行中并且没有执行我的第二行，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:39:45.053

使用 bash `'here document'`。<< 之后的命令！将由 shell 解释，直到出现以下`!end`字符串。

```
eaw DDBSC1 << !end
rldep:Cell=all;
!end 
```

# java - 用jsoup提取属性值

> ID：15880307
> 
> 赞同：-1
> 
> 时间：2013-04-08T13:26:18.993
> 
> 标签：java, html, jsoup

我想使用 jsoup 从中提取价格：

```
 <div class="resu resu-1"> <ul> <li prix="25"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:42:33.327

你试过了吗？

```
doc.select("li").attr("prix"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-20T06:07:59.300

尝试 `Element doc = document.select(div.resu.resu-1).first();`

```
String doc1 = doc.attr("prix");
String Price = doc1; 
System.out.println(Price); 
```

# sockets - 使用本机 tcp 套接字、websockets 的 PhoneGap 移动 irc 客户端应用程序？

> ID：15880308
> 
> 赞同：1
> 
> 时间：2013-04-08T13:26:19.833
> 
> 标签：sockets, cordova, websocket, symbian, irc

嗨，我想知道是否可以使用 PhoneGap 实现 iOS/Android irc 客户端应用程序。

我想我将需要使用本机 tcp 套接字：有人知道 PhoneGap 是否允许我使用它们吗？我检查了 api 文档，但由于某种原因找不到处理它的部分？

此外，如果 PhoneGap 支持 websockets，是否可以将其用于此类应用程序？

我想就我是否走上一条好的道路提供一些基本的建议。

我也在考虑使用 Rhomobile，（对此我有同样的疑问，尽管我没有进行足够的调查）但现在我想使用 PhoneGap，因为它还说支持 Symbian 设备，而 Rhomobile 已停产支持它。

# django - 在 Django 1.5.1 中使用 django-fluent-dashboard

> ID：15880316
> 
> 赞同：1
> 
> 时间：2013-04-08T13:26:45.607
> 
> 标签：django, django-admin, django-fluent

我正在尝试将我的 Django 管理面板与 django-fluent-dashbaord 集成，因此我在文档中进行了休闲说明： [https ://django-fluent-dashboard.readthedocs.org/en/latest/installation.html](https://django-fluent-dashboard.readthedocs.org/en/latest/installation.html)

之后，我尝试启动我的管理面板，但出现错误：

```
KeyError at /admin/
'request'
Request Method: GET
Request URL:    http://localhost:8000/admin/
Django Version: 1.5.1
Exception Type: KeyError
Exception Value:    
'request'
Exception Location: C:\Users\Grzegorz\Documents\VEnvs\XXX\lib\site-packages\django\template\context.py in __getitem__, line 57
Python Executable:  C:\Users\Grzegorz\Documents\VEnvs\XXX\Scripts\python.exe
Python Version: 2.7.3 
```

...

模板渲染期间出错

```
In template C:\Users\Grzegorz\Documents\VEnvs\XXX\lib\site-packages\admin_tools\menu\templates\admin\base_site.html, error at line 22
request
12  {% endif %}
13  {% endblock %}
14  
15  {% block branding %}
16  <h1 id="site-name">{% trans 'Django administration' %}</h1>
17  {% endblock %}
18  
19  {% block nav-global %}
20  {% if user.is_active and user.is_staff %}
21  {% if not is_popup %}
22  {% admin_tools_render_menu %}
23  {% endif %}
24  {% endif %}
25  {% endblock %}
26 
```

你有什么建议可能是这个问题的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T15:09:20.217

当我忘记在“TEMPLATE_CONTEXT_PROCESSORS”中添加“django.core.context_processors.request”时，我在 django-admin-tool 中遇到了类似的问题，也许它会给你一些帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-24T01:10:33.073

就我而言，这解决了我的问题

`TEMPLATE_CONTEXT_PROCESSORS = ("django.core.context_processors.request","django.contrib.auth.context_processors.auth")`

# java - 当我注释控制器时，@RequestMapping 不适用于方法

> ID：15880318
> 
> 赞同：1
> 
> 时间：2013-04-08T13:26:49.373
> 
> 标签：java, spring, jakarta-ee, spring-mvc

我已经用请求映射注释了控制器。我还用另一个请求映射对该方法进行了注释，但是它似乎没有被映射。我正在使用**Spring 2.5。**

```
@RequestMapping("/animals")
@Controller
public class AnimalController {
    @RequestMapping(value="/tiger")
    public void doSomething(...) {..}
} 
```

这不应该给我路径/动物/老虎吗？我在上下文配置中有这些：

```
<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" /> 
```

我只得到一个例外，说它没有被映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:31:10.457

您将需要类定义上方的 @Controller 注释。但除此之外，您还需要指定请求的类型。例如是 POST 或 GET。一个例子如下所示：

```
@RequestMapping(value = "tiger", method = RequestMethod.GET) 
```

另外，请注意字符串“tiger”之前不需要正斜杠。这是自动的。

# c# - 序列运算符和错误项

> ID：15880322
> 
> 赞同：1
> 
> 时间：2013-04-08T13:26:55.693
> 
> 标签：c#, lambda, lambda-calculus

我正在尝试表达序列运算符

```
g*f = λz.(g z = error) -> error, (f o g)z 
```

在哪里

```
f o g = λz.f(g z) 
```

在 C# 中使用委托构造 lambda 表达式

```
public delegate Lambda Lambda(Lambda x); 
```

问题是我不知道如何编码错误术语。有什么方法可以像 True of False 术语或 Church 数字那样表达它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T17:21:56.160

你的意思是你想要一个类型，要么说“错误”，要么说“结果是......”？

那只不过是`Maybe`-Monad，我将通过一对布尔值和实际结果对其进行编码：

```
// you already have/know these:
Lambda lTrue = ...
Lambda lFalse = ...
Lambda not = ...
Lambda if = ...  // = Identity for usual church encoding of booleans

// "Pair" type
Lambda makePair = a => b => (f => f(a)(b));
Lambda getFst = pair => pair (a => b => a);
Lambda getSnd = pair => pair (a => b => b);

// "Error" type/monad
Lambda constError = makePair(lFalse)(null);
Lambda returnResult = result => makePair(lTrue)(result);

Lambda isError = error => not(getFst(error));
Lambda isResult = error => getFst(error);     // = getFst
Lambda getResult = error => getSnd(error);    // = getSnd

Lambda bindError = error => op => if(isResult(error))
                                      (op(getResult(error)))
                                      (constError); 
```

现在考虑到不仅您的两种方法`f`并`g`返回一个`Error`类型（= 错误或结果） - 正式`f,g :: T -> Error U`- 您的序列运算符看起来像这样（我认为您的参数顺序与`o`-operator 不同并非偶然）：

```
Lambda sequence = g => f => (z => bindError(g(z))(f)) 
```

# magento - vim中工厂设计模式的代码完成是否有解决方案

> ID：15880326
> 
> 赞同：1
> 
> 时间：2013-04-08T13:27:13.883
> 
> 标签：magento, vim, vim-plugin

所以我所有的编码都切换到了 VIM。我曾经使用 PHPStorm 进行 Magento 开发。在 Magento 和使用 IDE 中使开发变得困难的一件事是他们使用工厂设计模式来使用类。

例如加载下面的类

Mage_Catalog_Model_Product

你会打电话给

Mage::getModel('catal/product');

我正在寻找一种能够说

```
Mage::getModel('catal/product')-> 
```

代码完成给了我一个来自 Mage_Catalog_Model_Product 的方法列表

在过去的两年里，人们一直在推动 PHPStorm 中的以下内容，并且已经为[PHP 链接中工厂设计模式的 IDE 通用支持开发了一个解决方案（例如 Magento、Doctrine、Kohana 等）。](http://youtrack.jetbrains.com/issue/WI-6027)

PHPStorm 提出了一个解决方案，它允许您创建一个类映射，PHPStorm 将使用该映射来完成代码。

我想知道 VIM 有没有一种方法可以使用与[https://gist.github.com/colinmollenhour/937195](https://gist.github.com/colinmollenhour/937195)类似的映射，使用当前的代码完成插件或者创建我自己的插件以提供这种类型的一些提示代码完成。我一直在看几篇文章，似乎应该可以，但我从未为 VIM 编写过任何代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:38:02.513

你的问题有点难以理解。如果你有一个例如类名的列表并且你想提供完成，你可以实现一个自定义*插入模式完成*。看`:help E840`一个简单的例子；您可以通过外部命令读取完成列表`system()`。

为了插入大量带有动态占位符的骨架代码，代码*片段*就像内置在`:abbreviate`类固醇上，通常在其中包含参数插入、镜像和多个停止。[snipMate](http://www.vim.org/scripts/script.php?script_id=2540)（灵感来自*TextMate*编辑器）是最早的、非常著名（并且仍然被广泛使用）的 Vim 插件之一；不幸的是，它不再维护了；虽然有 [a fork] [https://github.com/garbas/vim-snipmate]。一个现代替代方案（尽管需要 Python）是[UltiSnips](http://www.vim.org/scripts/script.php?script_id=2715)。还有更多，请参阅[Vim Tips Wiki 上的此列表](http://vim.wikia.com/wiki/Category%3aAutomated_Text_Insertion)。

# twitter-bootstrap - 如何使用 bootswatch variables.less 文件从源代码正确编译新版本的引导程序

> ID：15880327
> 
> 赞同：0
> 
> 时间：2013-04-08T13:27:18.963
> 
> 标签：twitter-bootstrap, bootswatch

我一直在尝试从 bootswatch 中获取一个主题来编译成一个新的 bootstrap.css 文件。

在 bootswatch 页面上，我看到四个文件可供下载：`bootstrap.css, bootstrap.min.css, variables.less`和`bootswatch.less`.

我可以看到我可以用我项目中的现有文件替换 bootstrap.[min.].css。但是，我的项目基于 twitter bootstrap 2.3.x，而不是 bootswatch 使用的 2.2.x。我不想担心标记中的不同版本问题。如果我尝试使用最新版本的引导程序，这似乎不是正确的方法。

因此，我下载了 variables.less 并从 github 克隆了引导存储库。安装依赖项后，我复制`variables.less`到`less`目录中（并覆盖现有的 variables.less）。如果我随后运行`make`，它会在`docs/assets/css/bootstrap.css`. 这看起来有一些新的东西（例如，来自 bootswatch 主题的字体设置在 h1、h2 等标签内。）。

但是，CSS 文件从不导入字体，因此无法使用该字体。在 bootswatch 的 bootstrap.css 文件中，我看到字体导入是 CSS 文件的第一行。新生成的文件根本没有字体导入。

我错过了什么步骤？鉴于 variables.less 文件显然基于 2.2.x 并且新的 boostrap 是 2.3.x，这是正确的处理方式吗？我认为它会起作用，因为 boostrap 的作者可能希望使用这样的系统来帮助实现向后兼容性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:14:51.363

> 我错过了什么步骤？

您已经下载了 bootstap less 文件，并将默认 variables.less 文件替换为您的 bootswatch 版本。您还需要在编译所有内容时包含 bootswatch.less 文件。

为此，将 bootswatch.less 复制到 less 目录，然后使用文本编辑器打开 bootstrap.less 文件（编排您正在编译的所有单个文件）并`@import "bootstrap.less";`在后面添加`@import "variables.less";`

我不确定这是正确的位置。如果这不起作用，你可以在最后尝试，就在之前`@import "utilities.less";`

祝你好运。

# c++ - vector::iterator 的分配在 vs 2012 中失败，而在 vs 6.0 中它成功

> ID：15880332
> 
> 赞同：0
> 
> 时间：2013-04-08T13:27:26.987
> 
> 标签：c++, visual-studio, stl, visual-studio-2012, iterator

我正在将我的代码从 vs 6.0 迁移到 vs 2012 代码在 vs 6.0 中编译和运行，但是......在 vs 2012 中它崩溃了。

在我的代码中，我定义了一些 typedef，一个我的类的向量和一个迭代器

```
typedef vector<MyClass> CLS_VECTOR;
typedef CLS_VECTOR::iterator clsVecIndex; 
```

现在在我使用它的代码中，如下所示：

```
EDIT:
    #include "myClass.h"

    CLS_VECTOR myVec;
    clsVecIndex index;

    //the vector is filled and i can see it in the memory view

    for(index = myVec.begin(); index != myVec.end(); ++index)
    {
       //dosomething
    } 
```

我的问题是分配`index`不成功并且它具有的地址`0xccccccc`然后当然会粉碎代码（尝试与`0xccccccc`- 访问冲突进行比较）（在 vs 6.0 中分配成功并且`//dosomthing`完成）。

谁能帮助理解什么是错的？为什么它可以在 vs 6.0 上运行，而在 vs 2012 上它会崩溃？我觉得它是如此明显，以至于由于某种原因我看不到它......

# django - Django：在单个 .update() 调用中从查找更新字段

> ID：15880337
> 
> 赞同：3
> 
> 时间：2013-04-08T13:27:35.837
> 
> 标签：django, field, lookup

我想知道是否有办法使用查找中的值对模型中的字段执行批量更新。

假设这个模型：

```
class Product(models.Model):
    price = models.DecimalField(... field params here ...)
    ... more fields here ...

class ShopcartProductEntry(models.Model):
    oncommit_price = models.DecimalField(
        ... field params here, similar to price params ...)
    quantity = models.IntegerField(... field params, doesn't matter here ...)
    product = models.ForeignKey(Product, null=False)
    shopcart = models.ForeignKey(
                   Shopcart, null=False, related_name='entries', ... more params ...)

class Shopcart(models.Model):
    ... fields here ...

    def commit(self):
        pass #my question will come in this method 
```

正如医生所说，如果我写：

```
 def commit(self):
        self.entries.update(oncommit_price=F('product__price')) 
```

姜戈会哭的。我该怎么做那个查询？目前我遍历每个条目。我不喜欢那样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:52:35.037

作为最后的手段，您始终可以编写自己的 SQL`UPDATE`查询：

```
sql = ''' UPDATE myapp_shopcartproductentry SPE
          JOIN myapp_product P ON P.id = SPE.product_id
          SET SPE.oncommit_price = P.price
          WHERE SPE.shopcart_id = %s ''' 
```

[然后使用自定义 SQL 事务](https://docs.djangoproject.com/en/1.5/topics/db/sql/#executing-custom-sql-directly)直接执行它：

```
def commit(self):
    sql = ''' ... SQL as above ... '''
    from django.db import connection, transaction
    cursor = connection.cursor()
    cursor.execute(sql, [self.id])
    transaction.commit_unless_managed() 
```

# ruby-on-rails - 在 Rails 中的相同操作中响应和重定向

> ID：15880341
> 
> 赞同：1
> 
> 时间：2013-04-08T13:27:42.310
> 
> 标签：ruby-on-rails, redirect, render

在 Rails 控制器的更新操作中，通常有如下代码：

```
def update
  @book = Book.find(params[:id])
  if @book.update_attributes(params[:book])
    redirect_to(@book)
  else
    render :edit
  end
end 
```

在其他情况下，这将呈现编辑模板。但是，如果我想使用一个 respond_to，与我在编辑操作中的方式完全相同，如：

```
def update
  @book = Book.find(params[:id])
  if @book.update_attributes(params[:book])
    redirect_to(@book)
  else
    respond_to do |format|
      format.html  # edit.html.erb
      format.json  { render :json => @team }
    end
  end
end 
```

因此，如果更新失败，请确保根据请求的格式返回 json 或 html。这有意义吗？如果是这样，您将如何避免错误：“在此操作中多次调用渲染和/或重定向”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:33:54.047

我感觉合理。答案应该很简单，就`return`在`redirect_to`.

```
def update
  @book = Book.find(params[:id])
  if @book.update_attributes(params[:book])
    redirect_to(@book)
    return
  else
    respond_to do |format|
      format.html  # edit.html.erb
      format.json  { render :json => @team }
    end
  end
end 
```

不确定你是如何多次渲染的，但假设你是这样，一个合适的`return`人应该告诉 RAILS 在重定向后停止处理任何进一步的渲染。如果这一切都是真的，那么很可能有`after_filter`来自某个地方的干扰。

# php - 使用 PHP 打印 JSON，然后保存为 JSON 文件

> ID：15880342
> 
> 赞同：0
> 
> 时间：2013-04-08T13:27:43.193
> 
> 标签：php, xcode, json, afnetworking

我目前正在使用以下脚本打印一个 json 文件

```
<?PHP 

include ('connect.php');

$get_student = mysql_query("SELECT * FROM student ORDER BY name asc");
$anArray = json_decode ($data);

while ($row = mysql_fetch_assoc($get_student)) {

$anArray[] = $row;

}
header("Content-type: application/json"); 
echo json_encode ($anArray, JSON_PRETTY_PRINT)
?> 
```

然后我使用 AFNETWORKING 在 xcode 中获取 json 文件并将其保存到文档目录中

```
 url = [NSURL URLWithString:@"url/Json3.php"];

NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];

AFHTTPRequestOperation *downloadOperation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *path = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"database"];

downloadOperation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:NO];

[downloadOperation start]; 
```

然后，我尝试将下载的文档作为 JSON 文件读取，其中包含以下内容

```
NSURL *JsonUrl = [NSURL fileURLWithPath:path];
NSURLRequest *JSONrequest = [[NSURLRequest alloc] initWithURL:JsonUrl];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:JSONrequest success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

    anArray = JSON;
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
}];
[operation start]; 
```

但是 AFNetworking 在日志中给了我以下错误行

请求失败并出现错误：错误域 = AFNetworkingErrorDomain 代码 =-1016 “预期的内容类型 {(“text/json”、“application/json”、“text/javascript”)}，得到文本/纯文本“UserInfo=0xa49f990 {NSLocalizedRecoverySuggestion= [

然后在日志中显示文本文档内容

**问题**

如何制作 PHP JSON Print，打印 Application/Json 文档而不是文本文档？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:18:35.053

检查 connect.php 的内容是否在 php 结束标记之后没有空格，或者只是删除？>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:38:43.847

假设它是一个标头已经发送的问题，在你的“connect.php”中，在最顶部，把

```
ob_start(); 
```

这将开始输出缓冲，这基本上意味着，php 不会向浏览器发送任何内容，直到所有内容都被渲染（或者直到缓冲区被发送、停止等）。

如果它是别的东西，而您只想将数据保存到 json 文件中，您可以使用

```
file_put_contents('myfile.json', json_encode($anArray, JSON_PRETTY_PRINT)); 
```

此外，您传递给 json_encode 函数的标志可能有问题。只是一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:44:03.103

好的，我没有解决打印问题，但是一行简单的代码使它工作

```
 [AFJSONRequestOperation addAcceptableContentTypes:[NSSet setWithObject:@"text/plain"]]; 
```

希望这可以帮助有类似问题的人

# absolute - 位置绝对 div 服从身体边缘

> ID：15880345
> 
> 赞同：2
> 
> 时间：2013-04-08T13:27:49.627
> 
> 标签：absolute

我在 html 文件的正文中有一个绝对位置 div。我希望它服从身体边缘。[在http://jsfiddle.net/vHApr](http://jsfiddle.net/vHApr)找到我的代码。以下是我的代码：

```
<html>
<head>
<style type="text/css">
body{
    margin: 50px;
    background-color: #ddd;
    color: #222;
    font: 11px "Helvetica Neue",Helvetica,Arial,sans-serif;
    min-width: 1080px;
    padding-top: 50px;
}
div.test{
    position:absolute;
    right:0px;
    top:55px;
}
</style>
</head>
<body>
<div class="test">
TEST
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:26:27.887

添加`position:relative`为`body`- 然后绝对后代元素将与主体的边缘对齐，而不是与视口对齐（这发生在没有定位祖先的绝对定位元素上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:46:19.240

试试这个

```
div.test{
position:absolute;

} 
```

更新了 jsFiddle [http://jsfiddle.net/vHApr/3/](http://jsfiddle.net/vHApr/3/)

# ms-access - 使用 phpmyadmin 从文件导入表时丢失随机字段中的数据

> ID：15880350
> 
> 赞同：2
> 
> 时间：2013-04-08T13:28:00.587
> 
> 标签：ms-access, random, import, phpmyadmin, null

我有一个访问数据库。我将表导出到 xlsx。然后我使用 openOffice 保存为 .ods，因为我发现 phpmyadmin-mysql 不再支持 excel 文件。我的 mySQL 数据库完全按照它应该接受数据的格式进行格式化。我导入了，除了一个小细节，一切似乎都很好。

在某些字段中，该值为 NULL，而不是根据 .ods 文件应具有的值。有些行正确显示该字段的相同值，有些行显示 NULL。

此外，“错误”行有一些字段显示值 0 用于导入文件中为空的字段（而不是 NULL）。mySQL 中这些字段的默认值为 NULL。每行都有许多类似的字段，并且所有字段都具有相同的数据类型（tinyint）。有些正确显示为 NULL，有些的值为 0....

我看不到所有这些的模式。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T02:02:19.610

检查导入的字符串是否有 ("") 引号，而 NULL 没有，并且它们都被适当地分隔，通常是一个 "," 逗号，记录/行由 ";" 分隔 分号。检查 MySQL 正在寻找什么的最佳方法是将一些现有数据导出为相同的格式，然后对照您尝试导入的内容进行检查。一点点错过报价，交易就结束了。在使用双 " 引号或单 ' 引号时保持一致。我认为也没有使用 ` 字符。如果您通过像 MS word 那样应用“智能引号”或“打开”的应用程序“挤压”您的数据办公室？？' 这也可能导致问题。在适当的值的 csv 导入中，在引号内或不加引号内添加单词 NULL。

# java - Spring Security：表单登录特殊字符

> ID：15880366
> 
> 赞同：1
> 
> 时间：2013-04-08T13:28:33.200
> 
> 标签：java, spring, spring-security

使用弹簧安全表单登录时，我需要帮助解决问题。表单登录将带有转义特殊字符的用户名发送到服务器，但弹簧不会取消转义此参数并且在数据库中找不到用户。

我使用自定义 UserDetailsS​​ervice 但带有用户名的参数包含 scape 特殊字符。有可能对特殊字符进行转义吗？

我正在尝试对特殊字符进行转义，但更改失败。

数据： - Spring 3.1.1.RELEASE - Spring Security 3.1.1.RELEASE - Tomcat 7.X

**编辑：**

我认为通过将编码过滤器放入 web.xml 文件可以解决问题。

```
<filter>
    <filter-name>encodingFilter</filter-name>
    <filter-class>
        org.springframework.web.filter.CharacterEncodingFilter
    </filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>encodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:42:39.037

您不必做任何复杂的事情，只需使用标准弹簧设置

```
 <form name="f" id="f" action="<c:url value='/j_spring_security_check'/>" method="POST">
   <label for="j_username">E-mail :&nbsp;</label><input type='text' id='j_username' name='j_username'/><br/>
   <label for="j_password">Password :&nbsp;</label><input type='password' id='j_password' name='j_password'><br> 
```

# python - Python 4维球体上点的均匀分布

> ID：15880367
> 
> 赞同：8
> 
> 时间：2013-04-08T13:28:33.070
> 
> 标签：python, distribution, trigonometry, montecarlo, polar-coordinates

我需要在 4 维球体上均匀分布点。我知道这不像选择 3 个角度和使用极坐标那么简单。

在 3 个维度中我使用

```
from random import random

u=random()
costheta = 2*u -1 #for distribution between -1 and 1
theta = acos(costheta)
phi = 2*pi*random

x=costheta
y=sin(theta)*cos(phi)
x=sin(theta)*sin(phi) 
```

这给出了 x、y 和 z 的均匀分布。

如何获得 4 个维度的类似分布？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T18:30:57.237

[然而，一种标准的方法](https://stats.stackexchange.com/a/7984/842)，也许[不是最快的](http://dx.doi.org/10.1214/aoms/1177692644)，是使用穆勒的方法在 N 球上生成均匀分布的点：

```
import numpy as np
import matplotlib.pyplot as plt
import mpl_toolkits.mplot3d.axes3d as axes3d

N = 600
dim = 3

norm = np.random.normal
normal_deviates = norm(size=(dim, N))

radius = np.sqrt((normal_deviates**2).sum(axis=0))
points = normal_deviates/radius

fig, ax = plt.subplots(subplot_kw=dict(projection='3d'))
ax.scatter(*points)
ax.set_aspect('equal')
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/6FZJN.png)

只需更改`dim = 3`为`dim = 4`在 4 球体上生成点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:31:56.913

在 4D 空间中取一个坐标正态分布的点，计算其单位向量。这将在单位 4 球体上。

```
from random import random
import math
x=random.normalvariate(0,1)
y=random.normalvariate(0,1)
z=random.normalvariate(0,1)
w=random.normalvariate(0,1)
r=math.sqrt(x*x + y*y + z*z + w*w)
x/=r
y/=r
z/=r
w/=r
print (x,y,z,w) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-15T22:39:08.227

我喜欢@unutbu 的回答，如果高斯采样真的创建了一个均匀间隔的球形分布（不像从立方体采样），但是为了避免在高斯分布上采样并且必须证明这一点，有一个简单的解决方案：**在均匀分布上采样分布在球体上**（不是在立方体上）。

1.  **在均匀分布**上生成点。
2.  计算每个点的**平方半径**（避免平方根）。
3.  **丢弃点**：
    *   丢弃平方半径大于 1 的点（因此，非平方半径大于 1）。
    *   丢弃太接近零半径的点，以避免在下一步中与除法相关的数值不稳定性。
4.  对于保留的每个采样点，**将采样点除以范数**，以便将其重新归一化为单位半径。
5.  **由于丢弃的样品，**清洗并重复更多点。****

 **这显然适用于 n 维空间，因为半径在更高维中始终是 L2 范数。

它速度很快，可以避免在高斯分布上进行平方根和采样，但它不是矢量化算法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-15T06:57:50.513

I found a good [solution](https://blogs.sas.com/content/iml/2016/04/06/generate-points-uniformly-in-ball.html) for sampling from N-dim sphere. The main idea is:

**If Y is drawn from the uncorrelated multivariate normal distribution, then *S = Y / ||Y||* has the uniform distribution on the unit d-sphere. Multiplying S by *U^(1/d)*, where U has the uniform distribution on the unit interval (0,1), creates the uniform distribution in the unit d-dimensional ball.**

Here is the python code to do this:

```
Y = np.random.multivariate_normal(mean=[0], cov=np.eye(1,1), size=(n_dims, n_samples))
Y = np.squeeze(Y, -1)
Y /= np.sqrt(np.sum(Y * sample_isotropic, axis=0))
U = np.random.uniform(low=0, high=1, size=(n_samples)) ** (1/n_dims)
Y *= distr * radius # in my case radius is one 
```

This is what I get for the sphere:

[![sphere](https://i.stack.imgur.com/yTs0m.png)](https://i.stack.imgur.com/yTs0m.png)**

# c++ - 普通数据对象多态的正确方法是什么？

> ID：15880370
> 
> 赞同：1
> 
> 时间：2013-04-08T13:28:37.597
> 
> 标签：c++, coding-style, polymorphism

我有一个**Item**类，它代表可以在屏幕上绘制的项目。假设该项目可以是一段文本、图像或纯色矩形。
我还有一个包含此类项目集合的类。

我可以想象两种不同的方法来实现这些类。我有一个**Drawer**类来绘制这些项目，其界面如下：

```
Draw(Item& item); 
```

第一种方法：

```
class Item
{
    Point Position;
}

class Text : public Item
{
    string Text;
}

class Image : public Item
{
    string FilePath;
}

class Rect : public Item
{
    Color FillColor;
}

class ItemCollection
{
    vector<Item*> Items;
} 
```

第一种方法使用**继承**来区分不同类型的项目。此解决方案的缺点是，当将项目存储在向量中以创建异构集合时，我必须使用某种**句柄**（上例中的简单指针），并且必须将 Item& 引用**转换**为其具体类型在绘图函数中。

第二种方法：

```
class Item
{
    ItemType Type;

    Point Position;
    string Text;
    string FilePath;
    Color FillColor;
};

enum class ItemType { Text, Image, Rect };

class ItemCollection
{
    vector<Item> Items;
} 
```

在此解决方案中，**单个类**包含不同项目的所有数据成员。好处是现在集合类中的向量可以包含真实的 Item**值**，并且在 Draw 函数中**不需要转换。**
但是，缺点是 Item 类的内存使用不是最佳的，因为每种类型的项目实例都将包含许多它并不真正需要的字段。此外，如果稍后添加了其他项目类型，则 Item 类将与所有新字段混在一起。

（我知道第三种可能的方法是在基础 Item 类中放置一个抽象的虚拟 Draw 方法，但我不能这样做，因为在我的情况下，这些类只能包含数据，而没有逻辑。）

在这种情况下，哪个通常是首选解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:39:38.917

# 访客模式

> 我知道第三种可能的方法是在基础 Item 类中放置一个抽象的虚拟 Draw 方法，但我不能这样做，因为在我的情况下，这些类只能包含数据，而没有逻辑。

尝试[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)——你所有的逻辑都在访问者类而不是对象中。每个对象只有一个**虚拟**方法**——accept(Visitor&)**。

[**现场演示**](http://coliru.stacked-crooked.com/a/1c7ab18d1d9ddd9d)

```
#include <iostream>
#include <ostream>
#include <utility>
#include <memory>
#include <vector>
#include <string>

using namespace std;

using Color = int;

struct Text;
struct Image;
struct Rect;

struct Visitor
{
    virtual void operator()(const Text &x) const=0;
    virtual void operator()(const Image &x) const=0;
    virtual void operator()(const Rect &x) const=0;
};

struct IVisitable
{
    virtual void accept(Visitor&)=0;
    virtual ~IVisitable(){}
};
template<typename Derived>
struct Visitable : IVisitable
{
    void accept(Visitor &v) override
    {
        v(*static_cast<Derived*>(this));
    }
};

struct Text: Visitable<Text>
{
    string Text = "text";
};

struct Image: Visitable<Image>
{
    string FilePath = "path";
};

struct Rect: Visitable<Rect>
{
    Color FillColor = 11;
};

struct Draw: Visitor
{
    void operator()(const Text &x) const override
    {
        cout << "Text: " << x.Text << endl;
    }
    void operator()(const Image &x) const override
    {
        cout << "image: " << x.FilePath << endl;
    }
    void operator()(const Rect &x) const override
    {
        cout << "Rect: " << x.FillColor << endl;
    }

};

int main()
{
    vector<unique_ptr<IVisitable>> items;
    items.emplace_back(new Text);
    items.emplace_back(new Image);
    items.emplace_back(new Rect);
    Draw v;
    for(auto &&x: items)
        x->accept(v);
} 
```

输出是：

```
Text: text
image: path
Rect: 11 
```

* * *

# Boost.Variant

> 但是，缺点是 Item 类的内存使用不是最佳的，因为每种类型的项目实例都将包含许多它并不真正需要的字段。此外，如果稍后添加了其他项目类型，则 Item 类将与所有新字段混在一起。

[将 Boost.Variant](http://www.boost.org/doc/libs/1_53_0/doc/html/variant.html)视为该技术的优化。您的变体将具有**max item**的大小，而不是所有字段的累积：

```
std::vector<boost::variant<Text, Image, Rect>> items; 
```

[**现场演示**](http://coliru.stacked-crooked.com/a/c07b28a0e53bddd3)

```
#include <boost/range/algorithm.hpp>
#include <boost/variant.hpp>
#include <iostream>
#include <ostream>
#include <utility>
#include <vector>
#include <string>

using namespace boost;
using namespace std;

using Color = int;

struct Text
{
    string Text;
};

struct Image
{
    string FilePath;
};

struct Rect
{
    Color FillColor;
};

struct Draw : static_visitor<void>
{
    void operator()(const Text &x) const
    {
        cout << "Text: " << x.Text << endl;
    }
    void operator()(const Image &x) const
    {
        cout << "image: " << x.FilePath << endl;
    }
    void operator()(const Rect &x) const
    {
        cout << "Rect: " << x.FillColor << endl;
    }

};

int main()
{
    vector<variant<Text, Image, Rect>> items = 
    {
        Text{"text"},
        Image{"path"},
        Rect{55}
    };
    Draw v;
    for_each(items,apply_visitor(v));
} 
```

输出是：

```
Text: text
image: path
Rect: 55 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:34:11.913

> （我知道第三种可能的方法是在基础 Item 类中放置一个抽象的虚拟 Draw 方法，但我不能这样做，因为在我的情况下，这些类只能包含数据，而没有逻辑。）

如问题标题所述，如果您正在寻找多态性，这是正确的方法。如果您无法接受，请考虑修改您的程序。
您提到的其他两种方法都依赖于`ItemType`变量，这正是多态性要避免的。

> 此外，如果稍后添加了其他项目类型，则 Item 类将与所有新字段混在一起。

这也可以通过多态来解决，因为 Drawer 实现不需要知道新的对象类型。

如果您打算保持简单，第一个示例是可以的，但是您需要一个`type`变量，以便您可以判断您正在处理哪种对象。

# android - Android Dropbox SDK 清单设置

> ID：15880373
> 
> 赞同：6
> 
> 时间：2013-04-08T13:28:49.473
> 
> 标签：android, android-manifest, dropbox

任何想法为什么我在调用`getSession().startAuthentication()`Android Dropbox SDK 时会收到此错误？

```
: FATAL EXCEPTION: main
: java.lang.IllegalStateException: URI scheme in your app's manifest is not set up correctly. You should have a com.dropbox.client2.android.AuthActivity with the scheme: db-CHANGE_ME 
```

然而，我的 AndroidManifest.xml 按照`<Application></Application>`入门说明中的说明包含以下内容。

```
<activity
  android:name="com.dropbox.client2.android.AuthActivity"
  android:launchMode="singleTask"
  android:configChanges="orientation|keyboard">
  <intent-filter>
    <!-- Change this to be db- followed by your app key -->
    <data android:scheme="db-MYKEYISHERE" />
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.BROWSABLE"/>
    <category android:name="android.intent.category.DEFAULT" />
  </intent-filter>
</activity> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T03:35:08.170

如果您实际上看到“db-CHANGE_ME”（即，这不是您用来隐藏应用程序密钥的占位符），那么这意味着您尚未在应用程序的 Java 代码中更新应用程序密钥。该错误消息输出 Java 代码中提供的密钥，并期望它与清单中的密钥匹配。

您的干净构建可能选择了一些以前未构建的 Java 更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-10T23:45:23.430

对于那些面临这个问题的人，如果你和我一样，你可能不会注意一个小细节，看看你的清单：

```
<intent-filter>
    <data android:scheme="db-APP_KEY" />
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.BROWSABLE" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

你不应该用你的应用程序密钥替换整个字符串`db-APP_KEY`，你应该离开`db-`那里`db-{HERE YOUR APP KEY}`我知道我知道，我花了一段时间才弄清楚这一点。

例子：

```
<intent-filter>
    <data android:scheme="db-hafsa324dasd" />
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.BROWSABLE" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-21T02:05:42.687

当我复制 App_ Key 时，我忘记将“db”部分添加到我的答案中。

例子：

```
 <data android:scheme="db-APP_KEY" /> 
```

应该 ：

```
 <data android:scheme="db-hafsa324dasd" /> 
```

不应该是 ：

```
<data android:scheme="hafsa324dasd" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T13:51:11.547

不知道为什么会这样，但是一个项目清理成功了（我几天前将代码添加到清单中并清理了几次）

# c++ - cpp 文件中的 CRTP、前向声明和模板

> ID：15880386
> 
> 赞同：2
> 
> 时间：2013-04-08T13:29:22.547
> 
> 标签：c++, templates, design-patterns, crtp

我正在使用 CRTP 模式创建一个接口，其他类将从该接口派生。

在界面中，我转发声明了一个结构（很重要，因为我不想在界面中拖动其他东西），但我将其定义包含在定义界面的 cpp 文件中。

**接口.h**

```
#ifndef INTERFACE_H_INCLUDED
#define INTERFACE_H_INCLUDED

// forward declaration
class ForwardDecl;

template <class Derived>
class Interface
{
public:
    ForwardDecl interfaceMethod();

};

#endif // INTERFACE_H_INCLUDED 
```

**ForwardDecl.h**

```
#ifndef FORWARDDECL_H_INCLUDED
#define FORWARDDECL_H_INCLUDED

struct ForwardDecl
{
    ForwardDecl(int i):internal(i)
    {}

    int internal;
};

#endif // FORWARDDECL_H_INCLUDED 
```

**接口.cpp**

```
#include "Interface.h"
#include "ForwardDecl.h"

template<class Derived>
ForwardDecl Interface<Derived>::interfaceMethod()
{
    return static_cast<Derived *>(this)->implementation_func();
} 
```

这是实现接口的实现

**实现.h**

```
#ifndef IMPLEMENTATION_H_INCLUDED
#define IMPLEMENTATION_H_INCLUDED
#include "Interface.h"
class ForwardDecl;

class Implementation: public Interface<Implementation>
{
    friend class Interface<Implementation>;
private:
    ForwardDecl implementation_func();

};

#endif // IMPLEMENTATION_H_INCLUDED 
```

**实现.cpp**

```
#include "Implementation.h"
#include "ForwardDecl.h"
#include <iostream>
struct ForwardDecl Implementation::implementation_func()
{
    ForwardDecl fd(42);
    std::cout << fd.internal << std::endl;

    return fd;
} 
```

和主文件

```
#include <iostream>
#include "Implementation.h"
#include "ForwardDecl.h"
using namespace std;

int main()
{
    Implementation impl;

    ForwardDecl fd = impl.interfaceMethod();
    cout << fd.internal << endl;
    return 0;
} 
```

我在 VS 和 GCC 上都遇到链接错误。

任何解决方法？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:30:56.493

函数模板的定义和类模板的成员函数需要在实例化这些模板的所有翻译单元中可见。也就是说，您不应该将模板定义放在`.cpp`文件中，这意味着您需要将`Interface.cpp`up 的内容移动到`Interface.h`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:07:55.977

您的方法有一个缺陷：您有一个返回 ForwardDecl 实例的公共函数，因此每个想要使用此函数的客户端还必须包含该类型的相应定义，这意味着您可以从一开始就将该类型设为公共。这包括使函数定义内联，这将解决您的链接器问题。

但是，如果您真的想隐藏该结构的内容并且您确定客户端不需要直接使用它，您可以声明它，然后传递对这种结构的引用（或指针，但原始指针是邪恶的，尽管不在与#macros 相同的邪恶联盟）。在这种情况下，我仍然会将函数定义内联。

如果你真的不想让函数内联，你也可以显式地为你需要的类型实例化函数模板。您可以在模板的 .cpp 文件的末尾添加类似的内容`template class Interface<int>;`（我不记得确切的语法，因此请使用一些 fleur de sel，查看[parashift.com 上的 C++ FAQ 以获取更多信息](https://isocpp.org/wiki/faq/templates#nondependent-name-lookup-types)）。这使得模板不太通用，因为它需要针对您想要使用它的任何类型进行调整，但在某些极端情况下它可能是一种方法。

# php - PHP if in_array 用于多个值

> ID：15880388
> 
> 赞同：7
> 
> 时间：2013-04-08T13:29:30.313
> 
> 标签：php, arrays, session, if-statement

我有一个由 3 到 12 个值生成的数组，它根据帐户信息生成数组；

```
$result = $ad->user()->groups($user['username']); 
```

我想检查这个数组的多个值（大约 4 或 5），如果其中有任何一个，请执行 if 中的内容，我可以通过以下方式轻松地为一个值执行此操作：

```
if (in_array("abc",$result)) {  $this->login_session($user); } 
```

有没有一种简单的方法来检查这个数组中的多个值，而不是连续的 OR：

```
 if (in_array("abc",$result) || in_array("123",$result) || in_array("def",$result) || in_array("456",$result) ) {  
    $this->login_session($user); 
    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-08T13:34:13.913

试试看这是否有帮助：

```
if(array_intersect($result, array('abc', '123', 'def'))) {
  $this->login_session($user);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:56:25.750

这应该是你所追求的：

```
$a = array(1,2,3,4,5);

$b = array(6,8);

function is_in_array($needle, $haystack) {

    foreach ($needle as $stack) {

        if (in_array($stack, $haystack)) {
             return true;
        }
    }

    return false;
}

var_dump(is_in_array($b, $a)); 
```

基本上循环通过针头并在干草堆上运行它的数组。一旦找到东西就返回true，否则返回false。

# mysql - 索引如何降低 MySQL 的性能？

> ID：15880390
> 
> 赞同：1
> 
> 时间：2013-04-08T13:29:38.260
> 
> 标签：mysql, sql

我经常听说索引可以大大提高性能，但有时它们会降低性能。

除了使用内存之外，它们如何降低性能？

如果我希望优化给定表的写入时间，但不关心读取时间，我最好不使用索引（PK 除外）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:41:15.483

写入和更新必须创建或修改索引值。因此，当表上有很多索引时，这些可能会变慢。如果您真的根本不关心阅读时间，请不要使用索引。

然而，好的索引会极大地提高读取性能，而只会稍微降低写入性能，所以只有在读取真的非常不重要时才这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T13:40:27.327

没错——如果你只关心写，你就不应该使用索引。任何索引都会减慢您的写入速度。

索引旨在提高*读取*性能。索引的一般概念是，它以允许数据库引擎更快地访问它的方式存储经常读取的数据，而无需扫描整个表来查找该数据。权衡是每次将索引数据写入表时，索引也必须更新。因此，索引提高了读取性能，但降低了写入性能。

# wpf - 在 wpf 中不使用 DataGrid/ListView/Table 以表格格式显示数据

> ID：15880394
> 
> 赞同：0
> 
> 时间：2013-04-08T13:29:48.413
> 
> 标签：wpf, mvvm-light

我需要在 UI 中以表格格式显示数据。我正在使用 wpf (MVVM)、VS 2010 和 windows XP。我不想使用 DataGrid 或 ListView。我怎样才能做到这一点？

*我试过的*

*   **方法一：**

    我尝试使用 SharedSizeGroup 但这不起作用。使用 SharedSizeGroup 的主要问题是即使行高也在所有行之间共享。

*   **方法二：**

    我尝试使用 UniformGrid，但并没有完全成功。使用 UniformGrid 不适合我的应用程序，因为每列数据的宽度不同，而且我不希望每列都采用与最大宽度相同的宽度！

    谁能告诉我如何使用普通网格来获得所需的结果？有什么方法可以使用 SharedSizeGroup 以便仅共享列宽而不共享行高，并且每行仅占用所需的空间（即与将高度设置为 auto 相同的行为）但不超过此？

*附加信息*：此网格必须是只读的，并且在 UI 中不应选择任何行。

# ios - 从短信链接或电子邮件链接启动应用程序

> ID：15880395
> 
> 赞同：13
> 
> 时间：2013-04-08T13:29:54.040
> 
> 标签：ios, objective-c, url-scheme

我需要在收到短信或电子邮件链接时启动应用程序。我已经阅读了有关 URL 方案的信息并且已经对其进行了测试并且它可以工作，但问题是如果该应用程序未安装在设备上，则不会发生任何事情。如果未安装该应用程序，我需要一种方法来打开 Web url，但我找不到这样做的方法......

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T13:40:33.873

可以办到。我构建它的方式是通过您控制的服务器进行重定向。

1.  您向用户发送指向您的服务器的链接。
2.  您尝试使用自定义 URL 方案启动您的应用程序。
3.  如果失败，您将用户重定向到应用商店，以便他们可以下载您的应用。

[这是一个有趣的问题](https://stackoverflow.com/questions/627916/iphone-safari-check-if-url-scheme-is-supported-in-javascript)，有多种方法可以检查通过您的自定义 URL 尝试的启动是否成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:38:04.930

我会在 SMS 正文中插入指向该网站的链接。然后我会在网站上编写一个脚本，该脚本将打开下载链接或打开应用程序

这个[答案](https://stackoverflow.com/questions/6964515/launching-app-or-app-store-from-safari)将解决您的问题

# multithreading - 多个用户可以同时提交SVN吗？它是线程安全的吗？

> ID：15880406
> 
> 赞同：0
> 
> 时间：2013-04-08T13:30:27.060
> 
> 标签：multithreading, svn, thread-safety, svnkit, multi-user

应用程序必须以这样一种方式设计，即它必须在提交到 SVN 存储库时支持多个用户。我已经完成了应用程序和相关的东西，但是，我被这个多用户的东西所困扰。**我怎样才能做到这一点？**我在某处看到，*对于每个线程，您必须实例化一个单独的 SVNRepository 驱动程序。*这说明**它不是线程安全的**..或者可能是我弄错了整个事情。对此问题的任何帮助表示赞赏。谢谢。

[我从Here](http://svnkit.com/kb/dev-guide-multithreaded-environment.html)获得上述信息（斜体字）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:26:07.503

我是 SVNKit 开发人员，让我解释一下这些东西是如何工作的。

SVNRepository 类代表一个带有自己凭据的 SVN 连接。它是线程不安全的，这意味着您只能对其执行顺序操作。有关更多详细信息，请参阅这篇文章：

[http://vcs.atspace.co.uk/2012/09/21/are-svnkit-methods-reenterable/](http://vcs.atspace.co.uk/2012/09/21/are-svnkit-methods-reenterable/)

因此，如果您的应用程序尝试同时创建多个提交，您应该使用多个独立的 SVNRepository 实例。好消息是不需要特殊的同步代码，所有同步都在服务器端执行。另一个好消息是，当某个 SVNRepository 对象的提交完成或取消时，您可以重用连接来启动另一个提交。但请注意，如果您使用 http 协议，即使您更改了连接的凭据 (SVNRepository#setAuthenticationManager)，您也不能重复使用相同的连接来代表另一个用户提交。

要创建没有工作副本的提交，请使用启动提交事务的 SVNRepository#getCommitEditor。要停止事务，请使用 ISVNCommitEditor#closeEdit 或 ISVNCommitEditor#abortEdit；您可以对 SVNRepository 实例执行其他操作，直到提交事务完成。

ISVNCommitEditor 实例应该描述您的虚拟工作副本：它告诉 SVNKit 您当前对最新工作副本状态的了解。如果描述与真正的最新更改不对应，您会收到“文件或目录已过期；尝试更新”错误。

[http://vcs.atspace.co.uk/2012/07/20/subversion-remote-api-committing-without-working-copy/](http://vcs.atspace.co.uk/2012/07/20/subversion-remote-api-committing-without-working-copy/)

您可以在 ISVNEditor#openFile/openDir 中使用 -1 而不是真正的修订版来禁用检查，但这可能会导致另一个问题：您可能会在不知道更改的情况下覆盖更改。

另一种选择是使用真实的工作副本和文件系统上的真实更改来提交（使用 SvnOperationFactory#createCommit）。但即使在这种情况下，请查看第一个链接以了解哪些对象可以/不能跨线程重用。

希望这会有所帮助，如果您有其他问题，请随时在 SVNKit 邮件列表中提问。

# metadata - OpenSSO 远程 SP 和密码作为身份验证上下文

> ID：15880415
> 
> 赞同：0
> 
> 时间：2013-04-08T13:30:46.300
> 
> 标签：metadata, saml-2.0, opensso

我使用 OpenSSO，并且基于元数据文件创建了远程 SP。我想使用密码作为此 SP 的身份验证上下文，但不知道如何告诉 OpenSSO 这样做。OpenSSO 使我能够为从头创建的托管 SP 配置它，但对于基于元数据文件创建的远程 SP，我没有它。我该如何配置？我的 IdP 的默认身份验证上下文是 PasswordProtectedTransport，我不想更改它，因为我有其他远程 SP 正在使用此上下文。但我只想对我在这里描述的一个 SP 使用密码上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:16:52.727

您想要做的是在 AuthnRequest 中指定您想要的身份验证上下文，在您的情况下

```
<saml2p:RequestedAuthnContext>
    <saml2:AuthnContextClassRef xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion">
        urn:oasis:names:tc:SAML:2.0:ac:classes:Password
    </saml2:AuthnContextClassRef>
</saml2p:RequestedAuthnContext> 
```

# java - Jax-ws 客户端：初始化非常慢

> ID：15880417
> 
> 赞同：1
> 
> 时间：2013-04-08T13:30:48.843
> 
> 标签：java, performance, jax-ws

我正在尝试使用 JAX-WS 生成的代理调用 Web 服务。

WSDL 相对较小（11kB），只有 3 个操作，并且存储在本地。

但是当我尝试初始化端口时，它在 stdout 的这条线上卡住了 10-20 秒：

> 在 'file:/C:/path/to/webapp/WebContent/WEB-INF/wsdl/' 处检索文档。

这对应于`new MyServicePort(new URL(wsdlLocation))`wsdl 的 , 和 阅读。

对 Web 服务的所有后续调用都可以正常工作且速度很快（每次调用 <200 毫秒）。

随后的调用`new MyServicePort(new URL(wsdlLocation))`也很快......

在合理规格的计算机上，这样的响应时间是否正常？（核心 i5 + 8GB 内存）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:58:55.873

应用程序启动后，第一次 Web 服务调用通常很慢，因为正在创建代理对象，并且框架初始化了进行 WS 调用所需的所有类。

一个常见的解决方法是让你的服务公开一些不会做任何事情的存根方法），当你的应用程序启动时，调用这个存根。这将在后台创建服务代理对象，当您的应用实际调用服务时，一切就绪。

# iphone - 使用 AVCaptureManager 在 iPhone 上录制时创建短视频文件序列

> ID：15880423
> 
> 赞同：2
> 
> 时间：2013-04-08T13:31:02.170
> 
> 标签：iphone, objective-c, avcapturesession

这是我的第一个问题，对于错误和不清楚的描述非常抱歉。我正在开发循环捕获视频并在后台将它们发送到服务器的应用程序。我想像单独的文件（请求后）一样发送它，然后将它们连接到服务器端的 1 中。

我在使用 AVframework 方面不是很有经验。所以作为一个基础使用的[AVCam 项目](http://developer.apple.com/library/ios/#samplecode/AVCam/)，并根据我的功能对其进行修改。我现在需要解决这样的问题。我正在寻找一种方法如何录制每个 2mb 左右的短视频文件，然后将它们上传到服务器。我遇到的主要问题 - 连接后视频部分之间的延迟。以及如何在不停止录像机的情况下获取此视频部分。

尝试很少的东西。首先 - 使用计时器记录 20 秒片段，按计时器停止，并开始新的记录周期。第二。我的想法是使用 AVURLAsset（用于在临时目录中获取当前录制的视频文件）并通过 AVAssetExportSession 获取最后未保存的视频数据。它似乎有效，我可以录制一些视频，但它们之间再次出现冻结，每个视频的最后 1-2 秒 - 只有一张图片。所以连接后它看起来不像一部电影。

```
-(void) startRecording
            {
                self.videoCounter=0;
                self.videoTimer=[NSTimer scheduledTimerWithTimeInterval:lenghtTimer target:self selector:@selector(endRecoringVideo) userInfo:nil repeats:YES] ;
                NSLog(@"timer started");
            }
            if ([[UIDevice currentDevice] isMultitaskingSupported]) {
                [self setBackgroundRecordingID:[[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{}]];
            }
            [self removeFile:[[self recorder] outputFileURL]];
            [[self recorder] startRecordingWithOrientation:orientation];
        }

-(void)saveVideoPart
    {
        NSUInteger count = 0;
        NSString *filePath = nil;
        do {
            NSString *fileName = [NSString stringWithFormat:@"buf-%@-%u", AVAssetExportPresetLowQuality, count];
            filePath = NSTemporaryDirectory();
            filePath = [filePath stringByAppendingPathComponent:fileName];
            filePath = [filePath stringByAppendingPathExtension:@"mov"];
            count++;

        } while ([[NSFileManager defaultManager] fileExistsAtPath:filePath]);

        NSURL *outputURL = [NSURL fileURLWithPath:filePath];

        AVURLAsset *videoAsset = [AVURLAsset URLAssetWithURL:[self tempFileURL] options:nil];

        AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:videoAsset presetName:AVAssetExportPresetHighestQuality];
        exportSession.outputURL = outputURL;
        exportSession.outputFileType = AVFileTypeQuickTimeMovie;

        Float64 durationSeconds = CMTimeGetSeconds([videoAsset duration]);

        CMTime start;
        CMTime duration;

        start = CMTimeMakeWithSeconds(self.videoCounter, 1);
        duration = CMTimeMakeWithSeconds(durationSeconds-self.videoCounter, 1);
        self.videoCounter+=durationSeconds-self.videoCounter;
         NSLog(@"duration video %f,recorded %f",durationSeconds,self.videoCounter);

        CMTimeRange range = CMTimeRangeMake(start, duration);
        exportSession.timeRange = range;

        [exportSession exportAsynchronouslyWithCompletionHandler:^{
            switch (exportSession.status) {
                case AVAssetExportSessionStatusCompleted:
                     NSLog(@"Exported");
                     break;
                case AVAssetExportSessionStatusFailed:
                    //
                    NSLog(@"Failed:%@",exportSession.error);
                    break;
                case AVAssetExportSessionStatusCancelled:
                    //
                    NSLog(@"Canceled:%@",exportSession.error);
                    break;
                default:
                    break;
            }
        }];
    } 
```

因此，如果您提出算法建议或告诉我正确的方向，我会很高兴。对我来说主要 - 在录制时将视频分成几部分。例如，视频的长度可能接近 10 分钟，没有停顿，我需要在后台制作 2mb 长的部分视频，然后上传它们。

# android - 如何在 android 中使用 ChunkedStreaming 上传大文件？

> ID：15880426
> 
> 赞同：0
> 
> 时间：2013-04-08T13:31:04.220
> 
> 标签：android, android-intent, httpurlconnection

我需要将一些大文件发布到服务器。我能够上传 < 3 MB 的文件，但是当我上传 > 3 MB 的文件时，它显示了内部服务器异常和服务器响应代码“500”。最初，我认为这是服务器端问题，但我可以通过 iOS 应用程序（通过使用相同的 url）发布大文件，我需要在 android 中实现它。

这是我的代码——

```
public String postMediaDataToServer(String evidenceId, File file) {

            String lineEnd = "\r\n";
            String twoHyphens = "--";
            String boundary = "----WebKitFormBoundarysNDKBMUFqqvzYWGh";

            Date date = new Date();
            String timestamp = dateFormat.format(date);
            String fileName = file.getName();
            if (fileName.endsWith(".jpg") || fileName.endsWith(".jpeg")) {
                    fileName = "image_" + timestamp + ".jpg";
            } else if (fileName.endsWith(".wav")) {
                    fileName = "audio_" + timestamp + ".wav";
            } else if (fileName.endsWith(".mp4")) {
                    fileName = "video_" + timestamp + ".mp4";
            } else if (fileName.endsWith(".3gp")) {
                    fileName = "video_" + timestamp + ".3gp";
            }

            String response = "error";
        Log.e("Image filename", fileName);
        Log.e("url", ApplicationData.getBaseUrl()
                            + "Media");
        HttpURLConnection connection = null;
        DataOutputStream outputStream = null;
        // DataInputStream inputStream = null;

        String pathToOurFile = fileName;
        String urlServer = ApplicationData.getBaseUrl()
                            + "Media";

        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 1 * 1024;
        try {
            FileInputStream fileInputStream = new FileInputStream(file);

            URL url = new URL(urlServer);
            connection = (HttpURLConnection) url.openConnection();

            // Allow Inputs & Outputs
            connection.setDoInput(true);
            connection.setDoOutput(true);
            connection.setUseCaches(false);
            connection.setChunkedStreamingMode(1000*1024);
            // Enable POST method
            connection.setRequestMethod("POST");

            connection.setRequestProperty("Connection", "Keep-Alive");
            connection.setRequestProperty("Content-Type",
                    "multipart/form-data;boundary=" + boundary);

            connection.setRequestProperty("Accept", "application/json");
            connection.setRequestProperty("Accept-Charset", "utf-8");
            connection.setRequestProperty("X-Ecordia-Software", "ecordiApp");
            connection.setRequestProperty("Content-Type", "multipart/form-data; boundary="
                                    + boundary);

                    List<Cookie> cookies = ApplicationData.getCookieStore()
                                    .getCookies();
                    if (cookies.size() > 0)
                             connection.setRequestProperty("Cookie", cookies.get(0).getName() + "="
                                            + cookies.get(0).getValue());

            outputStream = new DataOutputStream(connection.getOutputStream());
            outputStream.writeBytes(lineEnd + twoHyphens + boundary + lineEnd);
            outputStream.writeBytes("Content-Disposition: form-data; name=\"EvidenceIdentifier\""
                                    + lineEnd + lineEnd);
            outputStream.writeBytes(evidenceId + lineEnd);
            outputStream.writeBytes(lineEnd + twoHyphens + boundary + lineEnd);
                    if (fileName.endsWith(".jpg") || fileName.endsWith(".jpeg")) {
                            outputStream.writeBytes("Content-Disposition: form-data; name=\"File0\"; filename=\""
                                            + fileName + "\"" + lineEnd);
                            outputStream.writeBytes("Content-Type: image/jpeg" + lineEnd + lineEnd);
                    } else if (fileName.endsWith(".mp4")) {
                            outputStream.writeBytes("Content-Disposition: form-data; name=\"File0\"; filename=\""
                                            + fileName + "\"" + lineEnd);
                            outputStream.writeBytes("Content-Type: video/mp4" + lineEnd + lineEnd);

                    } else if (fileName.endsWith(".wav")) {
                            outputStream.writeBytes("Content-Disposition: form-data; name=\"File0\"; filename=\""
                                            + fileName + "\"" + lineEnd);
                            outputStream.writeBytes("Content-Type: audio/wav" + lineEnd + lineEnd);
                    }
                    outputStream.writeBytes(lineEnd + twoHyphens + boundary + twoHyphens
                                    + lineEnd);

            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            buffer = new byte[bufferSize];

            // Read file
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            Log.e("Image length", bytesAvailable + "");
            try {
                while (bytesRead > 0) {
                    try {
                        outputStream.write(buffer, 0, bufferSize);
                    } catch (OutOfMemoryError e) {
                        e.printStackTrace();
                        response = "outofmemoryerror";
                        return response;
                    }
                    bytesAvailable = fileInputStream.available();
                    bufferSize = Math.min(bytesAvailable, maxBufferSize);
                    bytesRead = fileInputStream.read(buffer, 0, bufferSize);
                }
            } catch (Exception e) {
                e.printStackTrace();
                response = "error";
                return response;
            }
            outputStream.writeBytes(lineEnd);
            outputStream.writeBytes(twoHyphens + boundary + twoHyphens
                    + lineEnd);

            // Responses from the server (code and message)
            int serverResponseCode = connection.getResponseCode();
            String serverResponseMessage = connection.getResponseMessage();
            Log.i("Server Response Code ", "" + serverResponseCode);
            Log.i("Server Response Message", serverResponseMessage);

            if (serverResponseCode == 200) {
                response = "true";
            }

            fileInputStream.close();
            outputStream.flush();
            outputStream.close();
            outputStream = null;
        } catch (Exception ex) {
            // Exception handling
            response = "error";
            Log.e("Send file Exception", ex.getMessage() + "");
            ex.printStackTrace();
        }
        return response; 
```

如何解决这个问题？

# nunit - 创建类似于 MbUnit TestSuiteFixture 的 NUnit 测试

> ID：15880430
> 
> 赞同：2
> 
> 时间：2013-04-08T13:31:10.440
> 
> 标签：nunit, mbunit

是否可以使用 NUnit实现与[MbUnit TestSuiteFixture](http://gallio.org/oldwiki/MbUnit/TestSuiteFixture.html)相同（或接近相同）的功能？我需要生成一组动态测试用例，而 MbUnit 的 TestSuiteFixture 是迄今为止我发现的唯一接近解决这一需求的东西。

# scala - 无法覆盖具有非易失性上限的类型

> ID：15880438
> 
> 赞同：10
> 
> 时间：2013-04-08T13:31:31.470
> 
> 标签：scala, types, type-bounds, volatility, non-volatile

我在 scala 中有一个编译器错误，我不知道它指的是什么：
假设这些声明：

```
trait Abstract {
  type MyType
}
trait AInner
trait A extends Abstract{
  type MyType <: AInner
}
trait BInner {
  def bMethod : Int
}
trait B extends Abstract with A{
  override type MyType <: BInner with A#MyType
} 
```

我在这里（在 trait 中`B`）想要实现的是进一步限制在 中`MyType`声明的类型`Abstract`，因此任何类型的值都`MyType`必须扩展`MyType`mixin 树中的所有 s。

编译器给了我这个消息（如标题）： *类型 MyType 是易失类型；不能覆盖具有非易失性上限的类型*。我知道，由于类型结合，这里发生了**类型波动**`with A#MyType`，错误的一部分：**具有非易失性上限**的类型可能是指类型声明`type MyType <: AInner`，其中`AInner`不是抽象类型，因此是非易失性的。

为什么我做不到？有没有办法，如何实现我的目标？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T12:56:54.767

在编译器中删除这个检查让我们能够发现不健全的可能性。

```
diff --git a/src/compiler/scala/tools/nsc/typechecker/Typers.scala b/src/compiler/scala/tools/nsc/typechecker/Typers.scala
index 37a7e3c..78a8959 100644
--- a/src/compiler/scala/tools/nsc/typechecker/Typers.scala
+++ b/src/compiler/scala/tools/nsc/typechecker/Typers.scala
@@ -5128,8 +5128,7 @@ trait Typers extends Adaptations with Tags {

       def typedSelectFromTypeTree(tree: SelectFromTypeTree) = {
         val qual1 = typedType(tree.qualifier, mode)
-        if (qual1.tpe.isVolatile) TypeSelectionFromVolatileTypeError(tree, qual1)
-        else typedSelect(tree, qual1, tree.name)
+        typedSelect(tree, qual1, tree.name)
       }

       def typedTypeBoundsTree(tree: TypeBoundsTree) = { 
```

然后，从编译器测试用例中运行代码以检查 volatile 类型的非法类型选择：

```
scala> class A; class B extends A
defined class A
defined class B

scala> trait C {
     |   type U
     |   trait D { type T >: B <: A }
     |   val y: (D with U)#T = new B
     | }
defined trait C

scala> class D extends C {
     |   trait E
     |   trait F { type T = E }
     |   type U = F
     |   def frob(arg : E) : E = arg
     |   frob(y)
     | }
defined class D

scala> new D
java.lang.ClassCastException: B cannot be cast to D$E 
```

据我了解，问题源于 Scala 没有真正的交集类型。

```
scala> type A = { type T = Int }
defined type alias A

scala> type B = { type T = String }
defined type alias B

scala> "": (A with B)#T
res16: String = ""

scala> 0: (A with B)#T
<console>:37: error: type mismatch;
 found   : Int(0)
 required: String
              0: (A with B)#T
              ^ 
```

[如果对依赖对象类型 (DOT)](http://lampwww.epfl.ch/~amin/dot/fool.pdf)的研究取得成果，这种情况在未来可能会发生变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:18:45.010

你可以重写`trait B`（稍后更多关于你的目标，我认为这有点不同）

```
trait B extends A {
  type MyType <: BInner with AInner
} 
```

这是完全有道理的。type 的值`B#MyType`可以被视为 a`BInner`或 a `AInner`。

您无需重复`Abstract`，因为`A`它已经是`Abstract`. 您不必编写`override`，因为这对于类型声明是隐含的。所以问题是为什么`A#MyType`不作为`AInner`？

这是 scala 语言规范对 volatile 类型的说明。

> 3.6 挥发性类型
> 
> 类型易变性近似于类型参数或类型的抽象类型实例没有任何非空值的可能性。正如 (§3.1) 中所解释的， volatile 类型的值成员不能出现在路径中。如果一个类型属于以下四个类别之一，则该类型是易失性的： 如果满足以下两个条件之一，则具有 ... 和 Tn {R} 的复合类型 T1 是易失性的。1\. T2, ..., Tn 之一是类型参数或抽象类型，或者 2\. T1 是抽象类型，并且对于 j > 1 的细化 R 或类型 Tj 为复合类型贡献了一个抽象成员，或 3\. T1, ..., Tn 之一是单例类型。这里，如果 S 包含一个也是 T 成员的抽象成员，则类型 S 将抽象成员贡献给类型 T 。如果 R 包含一个抽象声明，它也是 T 的成员，则细化 R 将抽象成员贡献给类型 T。如果类型指示符是 volatile 类型的别名，或者如果它指定具有 volatile 类型作为其上限的类型参数或抽象类型，则该类型指示符是 volatile。如果路径 p 的基础类型是易失的，则单例类型 p.type 是易失的。如果 T 是易失的，则存在类型 T forSome {Q } 是易失的。

规范中提到的其他重要项目是关于抽象类型覆盖：

> 另一个限制适用于抽象类型成员：具有 volatile 类型（第 3.6 节）作为其上限的抽象类型成员不能覆盖没有 volatile 上限的抽象类型成员。

编译器错误是：

```
error: overriding type MyType in trait A with bounds <: AInner;
type MyType is a volatile type; cannot override a type with non-volatile upper bound 
```

这与规范一致。`BInner with A#MyType`是易变的。在此之前`MyType`有一个非易失性的 as `Any`。

问题是 scala 类型系统中的类型必须具有唯一的含义。抽象类型可以被认为是声明被推迟到子类的类型。因此，在抽象类型仍然是抽象的时候声明它的值是没有问题的。另一方面，如果我们有一个类似的类型`BInner with A#MyType`，这个类型可能有几个含义。它被称为 volatile 并且具有这种类型的非 null 值是没有意义的，因为它可以具有与实例化`MyType`抽象类型的子类一样多的类型。为简化起见，我们可以将 volatile 类型视为不是子类型的类型`Any`（而 volatile 视为子类型`Any`）。因此，我们有一个编译器提到的矛盾。

回到你的目标，你说的

> 我在这里（在特征 B 中）试图实现的是进一步限制在 Abstract 中声明的 MyType 类型，因此 MyType 类型的任何值都必须扩展 mixin 树中的所有 MyType。

由于这样的内在特征，您可以实现这一目标。

```
trait Abstract {
  type MyType
}
trait B extends Abstract {
  trait MyType {
    def bMethod : Int
  }
}
trait A extends B {
  trait MyType extends super.MyType {
  }
} 
```

嗯，我希望这有点你在找什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T22:26:00.543

这有什么问题？

```
trait B extends Abstract with A {
  override type MyType <: BInner with AInner
} 
```

在 的任何实现中`trait B`，`MyType`将始终与从 中看到的类型相同`trait A`，因此单独设置上限没有任何意义。

如果在上面的代码中，`trait B`如果更改 in 的界限，您将不得不重写，这让您感到困扰，请`trait A`使用：

```
trait A extends Abstract{
  type ABound = AInner
  type MyType <: AInner
}
trait B extends Abstract with A {
  override type MyType <: BInner with ABound
} 
```

# asp.net - 在 web.config 中创建一个字符串并在 web.api 中使用它

> ID：15880443
> 
> 赞同：8
> 
> 时间：2013-04-08T13:31:41.067
> 
> 标签：asp.net, web-config, connection-string, asp.net-web-api

我是 Web 开发领域的新手，我想在 web.config 文件中创建一个变量，以便可以在 web.api 的 .NET 部分中使用它

我找到了以下关于如何做到这一点的教程：

[在 ASP.NET 中设置连接字符串到 SQL SERVER](https://stackoverflow.com/questions/5642474/setting-up-connection-string-in-asp-net-to-sql-server)

和

[http://www.connectionstrings.com/Articles/Show/store-connection-string-in-web-config](http://www.connectionstrings.com/Articles/Show/store-connection-string-in-web-config)

我有以下问题，我没有将字符串连接到的数据库（我只会在网络配置中使用它，这样我就可以轻松更改字符串而无需通过代码。所以假设我正在使用它以下方式：

```
<add name="ConnStringDb1" connectionString="Data Source=localhost;Initial Catalog=YourDataBaseName;Integrated Security=True;" providerName="System.Data.SqlClient" /> 
```

我应该在`connectionString`和 中有`providerName`什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-16T10:48:53.080

如果我了解您想要做什么，听起来您根本不想使用连接字符串。相反，请使用 web.config 文件的应用程序设置部分。例如

```
<configuration>
  <system.web> ... </system.web>
  <appSettings>
    <add key="MyAppSetting" value="A test value." />
  </appSettings>
</configuration> 
```

然后可以通过获取的值在您的代码中使用它

```
System.Configuration.ConfigurationManager.AppSettings["MyAppSetting"] 
```

(C#) 或

```
System.Configuration.ConfigurationManager.AppSettings("MyAppSetting") 
```

(五)

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-gb/library/system.configuration.configurationmanager.aspx)，或仅在线搜索“asp.net AppSettings”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:38:36.597

如果您没有要连接的数据库（这是我从您的问题中了解到的），那么您甚至不需要`<connectionStrings>`在`Web.config`. 仅当您要连接到数据库时才需要该部分。

如果您确实使用数据库，则 connectionString 会因身份验证类型、数据库产品（MS SQL Server、MySQL）、驱动程序类型（ODBC、.NET）等多种因素而异。

“提供者名称”将取决于您使用的数据库产品。例如对于 SQL Server 是`"System.Data.SqlClient"`

您可以查看[此站点](http://connectionstrings.com)以获取适用于不同身份验证类型、使用的驱动程序等的每个产品的数据库产品和连接字符串的完整列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-25T19:09:32.587

对于 ASP.NET 4.5 应用程序，我使用 appSettings 进行电子邮件配置。我也在使用 connectionStrings

appSettings 需要包含在 connectionStrings 之前而不是 configSections 之前

```
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <appSettings>
    <add key="ContactEmail0" value="service@davincispainting.com" />
    <add key="ContactEmail1" value="estimate@davincispainting.com" />
  </appSettings>
  <connectionStrings>
    <!--<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;AttachDbFilename=|DataDirectory|\aspnet-DAV3-20150302043828.mdf;Initial Catalog=aspnet-DAV3-20150302043828;Integrated Security=True" providerName="System.Data.SqlClient" />-->
    <!--<add name="connectionString" connectionString="data source=localhost;Initial Catalog=*****;User ID=sa;Password=*****;" providerName="System.Data.SqlClient" />-->
    <!--<add name="connectionString" connectionString="data source=localhost;Initial Catalog=Davincis3;User ID=*****;Password=*****;" providerName="System.Data.SqlClient" />-->
    <!--<add name="connectionString" connectionString="data source=DELLLAPTOP-PC\SQLSERVEREXPRESS;Initial Catalog=Davincis3;User ID=sa;Password=*****;" providerName="System.Data.SqlClient" />-->
    <add name="connectionString" connectionString="data source=DELLLAPTOP-PC\SQLEXPRESS;Initial Catalog=Davincis3;User ID=sa;Password=*****;" providerName="System.Data.SqlClient" />
  </connectionStrings>
... 
```

# java - Proguard 实际上并没有保留我的班级（简单）名称，这是什么原因？

> ID：15880446
> 
> 赞同：3
> 
> 时间：2013-04-08T13:31:44.870
> 
> 标签：java, proguard

当我将以下“保留”规则放入我的 proguard 配置中时：

```
-keepclasseswithmembernames class ** implements com.my.package.MyInterfaceName { <fields>; } 
```

起初，似乎我所有实现 MyInterfaceName 的类都保持其类名和字段不变。

但实际上在运行时，这些类使用 getSimpleName() 返回不同的简单名称。

以此为例：

```
public class Foo {
    public enum Bar implements MyInterfaceName { X, Y, Z }
} 
```

`X.getClass().getSimpleName()`返回`Foo$Bar`而不是只`Bar`返回没有被proguard处理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T23:52:53.033

内部类就像其他类一样。ProGuard 会这样对待它们，例如在混淆它们的名称时。如果要保留嵌套结构，则必须保留相关的可选属性：

```
-keepattributes InnerClasses 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:04:09.153

Proguard 非常激进，并且删除了比需要更多的信息。幸运的是，由于您的配置行，全名没有改变，但对于简单的名称来说不是好消息。对于枚举的完整处理（它们还有一些需要保留的神奇方法），您应该查阅[http://proguard.sourceforge.net/index.html#manual/examples.html](http://proguard.sourceforge.net/index.html#manual/examples.html)`Processing enumeration classes`上的部分

> 如果您的应用程序、applet、servlet、库等包含枚举类，则必须保留一些特殊方法。Java 5 中引入了枚举。java 编译器将枚举转换为具有特殊结构的类。值得注意的是，这些类包含运行时环境通过自省访问的一些静态方法的实现（这不是很宏大吗？自省是新一代的自修改代码）。您必须明确指定这些，以确保它们不会被删除或混淆：

```
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
} 
```

# c# - FlowLayoutPanel AutoSize 仅在垂直方向？

> ID：15880458
> 
> 赞同：9
> 
> 时间：2013-04-08T13:32:08.567
> 
> 标签：c#, winforms, visual-studio

我在`FlowLayoutPanel`. 我需要这个面板自动调整大小，但只能垂直调整。

这是可能的，如果是这样，我该如何实现它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T13:50:09.473

很简单，添加一个控件类型的事件添加：

```
private void flowLayoutPanel1_ControlAdded(object sender, ControlEventArgs e)
{
    if (flowLayoutPanel1.Controls.Count % 10 == 0)
        flowLayoutPanel1.SetFlowBreak(e.Control as Control, true);
} 
```

放`AutoSize = true`

放`flowdirection = LeftToRight`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-19T10:32:49.927

也许

```
FlowLayoutPanel1.WrapContents = False;
FlowLayoutPanel1.FlowDirection = System.Windows.Forms.FlowDirection.TopDown; 
```

会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:53:29.877

我确实从面板中设置了大小。例子：

> ```
> int newHeight= listImages.Count/10 * 100;
>                flowLayoutPanel1.Size = new Size(1143, newHeight); 
> ```

这个对我有用。谢谢大家

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-06T23:10:02.910

这可能看起来像一个丑陋的解决方案，但它适用于我：

1.  将面板的当前宽度存储在变量中；
2.  将 AutoSize 模式设置为 true；
3.  执行需要调整面板大小的操作；
4.  从变量中恢复前一个面板的宽度。

    ```
     int i = _panel1.Width;
                _panel1.AutoSize = true;
                _panel1.AutoSizeMode = AutoSizeMode.GrowOnly;
                /*some action going on here*/
                _panel1.AutoSize = false;
                _panel1.Size = new Size(_panel1.Width, 80); 
    ```

# javascript - 如何让函数在返回 true 或 false 之前等待 ajax 调用返回值？

> ID：15880467
> 
> 赞同：1
> 
> 时间：2013-04-08T13:32:39.697
> 
> 标签：javascript, jquery, ajax, dwr

**编辑：上面链接的两个问题不像我需要的那样。我没有 URL，而是我使用 DWR 直接从 javascript 调用 java 对象，所以它们对我没有帮助。**

我想检查一个人是否在一个页面上死了很多次，我想重用一个函数，所以我不必多次编写 ajax 的东西。我想重复使用`isDead()`

问题是它总是返回 false 因为它不等待 ajax 回调。

如何让它在返回 true 或 false 之前等待？

```
function isDead(personId){
        PeopleManager.isPersonDead(personId,{
            callback : function(result)
            {
                if(result == 1){
                    //dead
                    return true;
                }else{
                    //alive
                    return false;
                }
            },
            errorHandler : function(e){
                alert(e); 
                }
        });

        return false;
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:58:55.397

对我来说幸运的是，有一个特定于 DWR 的答案。事实证明你可以禁用异步功能`async:false`

```
function isDead(personId){
    DWREngine.setAsync(false);
            PeopleManager.isPersonDead(personId,{
                callback : function(result)
                {
                    async:false,
                    if(result == 1){
                        //dead
                        return true;
                    }else{
                        //alive
                        return false;
                    }
                },
                errorHandler : function(e){
                    alert(e); 
                    }
            });
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:35:14.793

通常你不能，这是异步编程的主要问题。从技术上讲，您可以使 AJAX 调用同步，但这是个坏主意。相反`isDead()`，需要接受一个回调来接收它的答案

```
function isDead(id, callback) {
    PeopleManager.isPersonDead(id, function(result) {
        callback(result === 1);
    });
} 
```

一些细节被遗漏了，但这是一般的想法。您还可以查看[承诺](http://blog.thepete.net/blog/2011/07/02/javascript-promises/)以更现代的方法解决此问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:03:06.560

改用承诺。

如果您不熟悉 Promise，请阅读这篇文章。要获取与您的问题相关的示例，请跳转到“Accept Promises As Parameters”部分

[http://www.kendoui.c​​om/blogs/teamblog/posts/13-03-28/what-is-the-point-of-promises.aspx](http://www.kendoui.com/blogs/teamblog/posts/13-03-28/what-is-the-point-of-promises.aspx)

# javascript - 如何在新窗口中获取 dom 元素？

> ID：15880468
> 
> 赞同：6
> 
> 时间：2013-04-08T13:32:40.490
> 
> 标签：javascript, window

JavaScript 中的一个简单任务是打开一个新窗口并在其中写入。但是我需要写一个 dom 元素，一个带有 ID 的 div。

```
var novoForm = window.open("somform.html", "wFormx", "width=800,height=600,location=no,menubar=no,status=no,titilebar=no,resizable=no,"); 
```

比我尝试的东西...

```
var w = novoForm.innerWidth;
var h = novoForm.innerHeight;
novoForm.document.getElementById("monitor").innerHTML = 'Janela: '+w+' x '+h; 
```

我这样做是为了查看对象“novoForm”是否有效。但是“监视器”div中没有​​写任何内容。我也尝试使用 onload 事件但没有成功。我想知道这是一些安全限制还是我错过了什么......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T13:37:57.273

您做得对，但您*确实*需要确保使用`onload`（或轮询），因为页面需要一段时间才能加载到新窗口中。

这是一个完整的工作示例：[Live Copy](http://jsbin.com/iyeqer/1) | [来源](http://jsbin.com/iyeqer/1/edit)

```
(function() {

  document.getElementById("theButton").onclick = function() {

    var novoForm = window.open("http://jsbin.com/ugucot/1", "wFormx", "width=800,height=600,location=no,menubar=no,status=no,titilebar=no,resizable=no,");
    novoForm.onload = function() {
      var w = novoForm.innerWidth;
      var h = novoForm.innerHeight;
      novoForm.document.getElementById("monitor").innerHTML = 'Janela: '+w+' x '+h;
    };
  };
})(); 
```

> 我想知道这是一些安全限制还是我错过了什么......

不在您的示例中，不，因为页面显然是从同一来源加载的。如果 URL 来自*不同*的来源，那么是的，您会遇到[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)，它禁止跨域脚本。您可以通过`document.domain`属性放宽它，将包含上述代码的窗口和正在加载的窗口设置`document.domain`为相同的值。从[上面的链接](http://en.wikipedia.org/wiki/Same_origin_policy#document.domain_property)：

> 如果两个窗口（或框架）包含将域设置为相同值的脚本，则这两个窗口的同源策略会放宽，并且每个窗口都可以相互交互。例如，从 orders.example.com 和 catalog.example.com 加载的文档中的协作脚本可能会将它们的 document.domain 属性设置为“example.com”，从而使文档看起来具有相同的来源并使每个文档都可以读取对方的属性。

更多关于`document.domain`可以[在 MDN](https://developer.mozilla.org/en-US/docs/DOM/document.domain)上找到。请注意，它仅适用于两个文档共享一个公共父域的情况，例如，如果它们都设置为，则它适用于`app1.example.com`and ，但不适用于and因为它们没有可以设置的共同值。`app2.example.com``example.com``example1.com``example2.com`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:35:49.207

或者，这是一个解决方案：

```
var novoForm = window.open("somform.html", "wFormx", "width=800,height=600,location=no,menubar=no,status=no,titilebar=no,resizable=no,");
var teste = function(){
    var mon = novoForm.document.getElementById("monitor");
    if(typeof(mon)!="undefined"){
        //novoForm.alert("Achei!");
        var h = novoForm.innerHeight;
        var strh = String(h - 40 - 30)+'px';
        novoForm.document.getElementById("pagina").style.height = strh;
        novoForm.document.getElementById("monitor").innerHTML = '<p class="legenda">&copy; NetArts | gustavopi</p>';
        clearInterval(id);
    }
}
var id = setInterval(teste, 100); 
```

这将完成这项工作。对我来说不是一个“漂亮”的解决方案，但它有效！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T13:51:52.170

取决于您尝试加载到新窗口中的 url。@TJ 是对的。另请注意，如果您只想加载一个空白文档，您可以将“about:blank”加载到 url 中。唯一的区别是您将使用 outerWidth ，因为您尚未加载实际文档。

```
var novoForm = window.open("about:blank", "wFormx", "width=800,height=600,location=no,menubar=no,status=no,titilebar=no,resizable=no,");
var w = novoForm.outerWidth;
var h = novoForm.outerHeight;
novoForm.document.body.innerHTML = 'Janela: '+w+' x '+h; 
```

# excel - 复制粘贴的宏循环挂起

> ID：15880470
> 
> 赞同：0
> 
> 时间：2013-04-08T13:32:49.057
> 
> 标签：excel, vba

有人可以帮我处理这个循环宏吗？我希望循环复制`Range("S16:Y16").Select` 向下移动三行并粘贴它，然后向下移动三行并重复直到达到 20。

错误是它下降了三行然后挂起。任何帮助，将不胜感激

示例代码

```
Sub pop1()
    '  Macro
    '
    ' Keyboard Shortcut: Ctrl+f
    '
    Range("S16:Y16").Select
    Selection.Copy
    Range("S19").Select
    ActiveSheet.Paste

    Range("s19:Y19").Select

    For i = 1 To 20
        Selection.Copy
        Range("s19").Offset(3, 0).Select
        ActiveSheet.Paste

        ActiveCell.Offset(3, 0).Select
        ActiveSheet.Paste
    Next i
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:50:45.433

如果你想在第 19 行**之后**粘贴 20 次，那么试试这个

```
Sub pop1()
    Dim ws As Worksheet
    Dim r As Long

    '~~> Change this to the relevant sheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        r = 19

        For i = 1 To 21
            .Range("S16:Y16").Copy .Range("S" & r)
            r = r + 3
        Next i
    End With
End Sub 
```

**编辑**

以上将粘贴值，如果您想以所有格式粘贴它，请执行此操作

```
Sub pop1()
    Dim ws As Worksheet
    Dim r As Long

    '~~> Change this to the relevant sheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        r = 19

        For i = 1 To 21
            .Range("S16:Y16").Copy
            .Range("S" & r).PasteSpecial xlPasteAll
            r = r + 3
        Next i
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:16:59.570

**仅当您没有想要保留的值低于它时，**为什么不切断循环，否则已经提供了其他答案：

```
Dim r As Range
Set r = Range("S16:Y16").resize(3)'changed range to include 2 rows bellow 

r(1,1).Offset(R.count, 0).resize(R.count*20).value = R.value 
```

*请原谅我在手机上的任何语法错误。如果您发现错误，我很乐意修复。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:48:54.583

你能试试这个吗？

```
Sub pop1()
    '  Macro
    '
    ' Keyboard Shortcut: Ctrl+f
    '
    Dim r As Range
    Set r = Range("S16:Y16")
    r.Copy  

    For i = 1 To 20
        r.Offset(3 * i, 0).PasteSpecial
     Next i
End Sub 
```

或者这个极简主义者：

```
Sub pop1()
    '  Macro
    '
    ' Keyboard Shortcut: Ctrl+f

  Range("S16:Y16").Copy

    For i = 1 To 20
        Range("S16:Y16").Offset(3 * i, 0).PasteSpecial
    Next i
End Sub 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-08T14:13:05.357

试试下面的代码：

```
Sub pop1()
    '  Macro
    '
    ' Keyboard Shortcut: Ctrl+f
    '
    Dim rng As Range
    Set rng = Range("S16:Y16")

    j = 16
    For i = 1 To 20
        j = j + 3
         rng.Copy Range("S" & j)
    Next
End Sub 
```

# php - 在mysql中为每个用户ID获取最新的日期时间

> ID：15880475
> 
> 赞同：0
> 
> 时间：2013-04-08T13:32:54.283
> 
> 标签：php, mysql

```
 user_id   payment_end_time 
    1674    2008-01-10 07:51:21
    1675    2008-01-05 17:48:51
    1675    2009-01-20 16:56:04
    1675    2010-01-27 13:16:34
    1676    2008-01-05 20:21:35
    1676    2009-01-07 18:46:41
    1676    2009-12-08 13:59:08
    1677    2008-01-05 20:30:16
    1677    2009-01-03 19:11:03
    1677    2009-10-07 06:24:58
    1678    2008-01-26 06:23:46
    1678    2009-01-18 12:19:58
    1679    2008-01-06 12:11:29
    1679    2009-01-23 08:44:51
    1680    2008-03-28 18:58:20
    1680    2009-12-31 16:39:46
    1681    2008-01-07 07:24:03
    1682    2008-01-07 11:37:43
    1682    2009-01-16 20:26:16
    1682    2010-02-02 09:38:34 
```

1.user_id 不是唯一的，因为一个用户可以支付不止一次。给定用户的每次付款都会插入一个新行。

2.我必须在数据库user_id（不是主键）和payment_end_time 字段。

3.我想为每个user_id 输出payment_end_time（每个用户的最新日期时间，即按DESC 订购）。

4.我希望每个user_id只需要一次，即user_id (1675 2010-01-27 13:16:34) (1676 2009-12-08 13:59:08) 对于1677等类似这样..

我试过这个

SELECT user_id, MAX(payment_end_time) FROM tbl_payment_info
GROUP BY user_id ORDER BY payment_end_time DESC LIMIT 1

我已经尝试过了，但它只显示单行。我希望每个 USER_id 只使用一次最新的日期时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:34:58.240

干得好：

```
SELECT  user_id, MAX(payment_end_time) latest_payment_end_time
FROM    mytable
GROUP BY user_id
ORDER BY latest_payment_end_time DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:38:49.677

```
SELECT * FROM (SELECT * FROM `payment` ORDER BY payment_end_time DESC) AS `p` GROUP BY user_id 
```

# internet-explorer - 正确加载的 CSS3 PIE 问题

> ID：15880479
> 
> 赞同：0
> 
> 时间：2013-04-08T13:33:05.113
> 
> 标签：internet-explorer, css, internet-explorer-8, css3pie

我已将 .htc 文件上传到我的 S3 CDN，它似乎根本没有加载。然后，我继续将 .htc 文件上传到与运行文档的域相同的 Web 服务器，正确链接它并按照我过去为以前的垫片所做的方式实现行为 CSS。但是，边框半径输入框不会在 IE(8) 中重新渲染。任何人都可以提供任何关于为什么这不能正常工作的见解吗？

请查看**[https://give.massgeneral.org/bootstrap/sslpage.aspx?pid=2045](https://give.massgeneral.org/bootstrap/sslpage.aspx?pid=2045)**并查看捐赠表单中任何输入框的 CSS 属性。

似乎一旦加载了脚本，这些框就会在 IE8 中消失。该脚本似乎正在正确加载，所以我不确定“打嗝”在哪里。

提前感谢您提供的任何帮助/帮助。

> **这个问题与我上周五在开发者支持论坛上留下的问题有关，我还没有收到对 [http://css3pie.com/forum/viewtopic.php?f=3&t=2033的回复](http://css3pie.com/forum/viewtopic.php?f=3&t=2033)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:18:54.337

经过进一步审查和故障排除后，问题似乎在于没有相对定位的元素继承了行为（PIE.htc）。

> **请参考：** [http ://css3pie.com/documentation/known-issues/](http://css3pie.com/documentation/known-issues/)

# sql-server - 在 CASE 表达式中使用大于号的 tsql

> ID：15880480
> 
> 赞同：11
> 
> 时间：2013-04-08T13:33:06.117
> 
> 标签：sql-server, tsql, case

```
(case [dbo].[YearsInService]([DateEngaged],getdate())
   when (0) then (0) 
   when (1) then (4) 
   when (2) then (8)
    when (3) then (12)
     when (4) then (32) 
     when (5) then (40) 
     when (6) then (48) 
     when (7) then (56) 
     when (8) then (104) 
     when (9) then (117) 
     when (10) then (150) else (-1) end) 
```

现在在我的最后一行，我怎么能说 10 及以上应该返回为 150？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T13:41:28.160

你不能，这`CASE YourFunction WHEN ...`只是为了平等。如果您需要使用“大于”，则需要以这种方式重写您的表达式：

```
CASE WHEN [dbo].[YearsInService]([DateEngaged],getdate()) = 0 THEN 0
WHEN [dbo].[YearsInService]([DateEngaged],getdate()) = 1 THEN 4
WHEN.....
WHEN [dbo].[YearsInService]([DateEngaged],getdate()) >= 10 THEN 150 ELSE -1 END 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-08T13:40:54.763

您正在使用`Simple Case statement`不允许的逻辑表达式。您需要使用`Searched CASE expression`. 但是在您的情况下，由于您使用的是函数，因此从每个表达式的函数中获取返回值会有点昂贵。

[这是简单案例和搜索案例语法的 MSDN 链接](http://msdn.microsoft.com/en-gb/library/ms181765.aspx)

我建议你使用`sub query with a Searched case`如下所示。

```
select case when results = 0 then 0
            when results = 1 then 4
            ...
            when results >= 10 then 150
            else -1 end as CaseResults
from (select [dbo].[YearsInService]([DateEngaged],getdate()) results
      from yourTable
     ) Temp 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:44:38.690

来自[http://msdn.microsoft.com/en-us/library/ms181765.aspx](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

```
SELECT 
  CASE 
     WHEN MIN(value) <= 0 THEN 0 
     WHEN MAX(1/value) >= 100 THEN 1 
  END 
FROM Data 
```

您可以在 WHEN 子句中使用任何布尔表达式

```
case 
  when ([dbo].[YearsInService]([DateEngaged],getdate()) = 0) then (0) 
  when ([dbo].[YearsInService]([DateEngaged],getdate()) = 1) then (4) 
  when ([dbo].[YearsInService]([DateEngaged],getdate()) = 2) then (8)
  when ([dbo].[YearsInService]([DateEngaged],getdate()) = 3) then (12)
  when ([dbo].[YearsInService]([DateEngaged],getdate()) = 4) then (32) 
  when ([dbo].[YearsInService]([DateEngaged],getdate()) = 5) then (40) 
  when ([dbo].[YearsInService]([DateEngaged],getdate()) = 6) then (48) 
  when ([dbo].[YearsInService]([DateEngaged],getdate()) = 7) then (56) 
  when ([dbo].[YearsInService]([DateEngaged],getdate()) = 8) then (104) 
  when ([dbo].[YearsInService]([DateEngaged],getdate()) = 9) then (117) 
  when ([dbo].[YearsInService]([DateEngaged],getdate()) >= 10) then (150) 
  else (-1) end 
```

您应该在评估之前将 [dbo].[YearsInService]([DateEngaged],getdate()) 保存在变量中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T13:53:23.237

假设（根据您的评论） when `DateEngaged`is `NULL`，它导致`YearsInService`be `NULL`，那么我将删除您当前的`ELSE`子句，然后将其用于 for `all other cases`，例如：

```
case COALESCE([dbo].[YearsInService]([DateEngaged],getdate()),-1)
when (-1) then (-1)
when (0) then (0) 
when (1) then (4) 
when (2) then (8)
when (3) then (12)
 when (4) then (32) 
 when (5) then (40) 
 when (6) then (48) 
 when (7) then (56) 
 when (8) then (104) 
 when (9) then (117) 
 else (150) end 
```

如果对未来日期值存在担忧`DateEngaged`，我会在内部处理而不是尝试在表达式`YearsInService`中处理它。`CASE`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T15:51:08.670

我喜欢@kaf 的回答，只是想补充一点，您可以通过这个减少案例数量

```
select case when results BETWEEN 0 AND 3 then results * 4
            when results BETWEEN 4 AND 7 then results * 8
            when results BETWEEN 8 AND 9 then results * 13
            when results >= 10 then 150
            else -1 
        end as CaseResults
from (select [dbo].[YearsInService]([DateEngaged],getdate()) results
      from yourTable
     ) Temp 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-15T08:26:57.923

```
case [dbo].[YearsInService]([DateEngaged],getdate())
   when (0) then (0) 
   when (1) then (4) 
   when (2) then (8)
    when (3) then (12)
     when (4) then (32) 
     when (5) then (40) 
     when (6) then (48) 
     when (7) then (56) 
     when (8) then (104) 
     when (9) then (117) 
     when IIF(case [dbo].[YearsInService]([DateEngaged],getdate()) >= 10 
           ,[dbo].[YearsInService]([DateEngaged],getdate())
           ,10) 
        then (150) 
     else (-1) end 
```

这将所有高于 10 的情况等同于函数的值。

# c# - 升级blit的质量（Winrt c#）

> ID：15880481
> 
> 赞同：0
> 
> 时间：2013-04-08T13:33:06.397
> 
> 标签：c#, windows-runtime, blit, writeablebitmapex

实际上，我尝试制作一个独特的画布图像，上面有很多东西。

我用我需要的所有东西创建了一个图像，但是图像的质量真的很差。你知道我如何升级它吗？

这是我的代码的结尾，当我保存图像时：

```
 StorageFile filesave = await ApplicationData.Current.LocalFolder.CreateFileAsync("filesave.jpg", CreationCollisionOption.ReplaceExisting);

    Guid encoderId = Windows.Graphics.Imaging.BitmapEncoder.JpegEncoderId;
    await WinRTXamlToolkit.Imaging.WriteableBitmapSaveExtensions.SaveToFile(backgroundBmp, filesave, encoderId); 
```

如果有人有想法？谢谢你的时间，问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:44:41.690

这是 SaveToFile 方法的来源：

```
 /// <summary>
    /// Saves the WriteableBitmap to the given file with the specified BitmapEncoder ID.
    /// </summary>
    /// <param name="writeableBitmap">The writeable bitmap.</param>
    /// <param name="outputFile">The output file.</param>
    /// <param name="encoderId">The encoder id.</param>
    /// <returns></returns>
    public static async Task SaveToFile(
        this WriteableBitmap writeableBitmap,
        StorageFile outputFile,
        Guid encoderId)
    {
        Stream stream = writeableBitmap.PixelBuffer.AsStream();
        byte[] pixels = new byte[(uint)stream.Length];
        await stream.ReadAsync(pixels, 0, pixels.Length);

        using (var writeStream = await outputFile.OpenAsync(FileAccessMode.ReadWrite))
        {
            var encoder = await BitmapEncoder.CreateAsync(encoderId, writeStream);
            encoder.SetPixelData(
                BitmapPixelFormat.Bgra8,
                BitmapAlphaMode.Premultiplied,
                (uint)writeableBitmap.PixelWidth,
                (uint)writeableBitmap.PixelHeight,
                96,
                96,
                pixels);
            await encoder.FlushAsync();

            using (var outputStream = writeStream.GetOutputStreamAt(0))
            {
                await outputStream.FlushAsync();
            }
        }
    } 
```

该`BitmapEncoder.CreateAsync`方法有一个[重载](http://msdn.microsoft.com/en-us/library/windows/apps/br226213.aspx)，它添加一个参数来指定一个[编码选项](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/JJ709940%28v=win.10%29.aspx)列表。编码选项参数的一个示例是

```
var propertySet = new Windows.Graphics.Imaging.BitmapPropertySet();

var qualityValue = new Windows.Graphics.Imaging.BitmapTypedValue(
    1.0, // Maximum quality
    Windows.Foundation.PropertyType.Single
    );

propertySet.Add("ImageQuality", qualityValue);
var encoder = await BitmapEncoder.CreateAsync(
    encoderId,
    writeStream
    propertySet); 
```

然后您可以将 SaveToJpg 编写为：

```
 /// <summary>
    /// Saves the WriteableBitmap to the given JPG file with the specified image quality.
    /// </summary>
    /// <param name="writeableBitmap">The writeable bitmap.</param>
    /// <param name="outputFile">The output file.</param>
    /// <param name="imageQuality">Valid values from 0 to 1.0\. Higher values indicate higher quality.</param>
    /// <returns></returns>
    public static async Task SaveToJpg(
        WriteableBitmap writeableBitmap,
        StorageFile outputFile,
        double imageQuality = 1.0 // Maximum quality
    )
    {
        Stream stream = writeableBitmap.PixelBuffer.AsStream();
        byte[] pixels = new byte[(uint)stream.Length];
        await stream.ReadAsync(pixels, 0, pixels.Length);

        using (var writeStream = await outputFile.OpenAsync(FileAccessMode.ReadWrite))
        {
            var propertySet = new Windows.Graphics.Imaging.BitmapPropertySet();
            var qualityValue = new Windows.Graphics.Imaging.BitmapTypedValue(
                imageQuality,
                Windows.Foundation.PropertyType.Single
                );
            propertySet.Add("ImageQuality", qualityValue);
            var encoder = await BitmapEncoder.CreateAsync(
                BitmapEncoder.JpegEncoderId,
                writeStream
                propertySet);
            encoder.SetPixelData(
                BitmapPixelFormat.Bgra8,
                BitmapAlphaMode.Premultiplied,
                (uint)writeableBitmap.PixelWidth,
                (uint)writeableBitmap.PixelHeight,
                96,
                96,
                pixels);
            await encoder.FlushAsync();

            using (var outputStream = writeStream.GetOutputStreamAt(0))
            {
                await outputStream.FlushAsync();
            }
        }
    } 
```

# android - 向 listView 添加事件侦听器

> ID：15880486
> 
> 赞同：2
> 
> 时间：2013-04-08T13:33:27.310
> 
> 标签：android

```
getSherlockActivity().findViewById(android.R.id.list);
new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView <? > arg0, View arg1, int position,
        long id) {
        // TODO Auto-generated method stub
        Toast.makeText(getSherlockActivity(), 
             "You selected :", Toast.LENGTH_SHORT).show();
    }
}; 
```

我正在尝试向我的活动添加一个事件侦听器，但根本没有显示 toast 消息。我从`onCreateView`方法中调用这段代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:36:35.903

看起来您实际上并没有在列表中设置点击侦听器，您只是在创建它，甚至没有保留对它的引用。

试试这样：

```
ListView lv = (ListView)(getSherlockActivity().findViewById(android.R.id.list));
lv.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView <? > arg0, View arg1, int position,
        long id) {
        // TODO Auto-generated method stub
        Toast.makeText(getSherlockActivity(), 
             "You selected :", Toast.LENGTH_SHORT).show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:36:46.953

```
getSherlockActivity().findViewById(android.R.id.list).setOnItemClickListener(new OnItemClickListener() {

@Override
public void onItemClick(AdapterView <? > arg0, View arg1, int position,
    long id) {
    // TODO Auto-generated method stub
    Toast.makeText(getSherlockActivity(), 
         "You selected :", Toast.LENGTH_SHORT).show();
}}); 
```

**已编辑**

```
((ListView)getSherlockActivity()).findViewById(android.R.id.list).setOnItemClickListener(new OnItemClickListener() {

@Override
public void onItemClick(AdapterView <? > arg0, View arg1, int position,
    long id) {
    // TODO Auto-generated method stub
    Toast.makeText(getSherlockActivity(), 
         "You selected :", Toast.LENGTH_SHORT).show();
}}); 
```

在 onCreate() 中添加这一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:36:10.727

我没有看到你添加任何东西。你所做`findViewById()`的一切都是没有目的的（因为你没有使用返回值。而且你只是`OnItemClickListener`无缘无故地创建了新的，因为你也没有使用它。不，将两行代码放在一起不会自动生成以任何方式互动...

正确的做法是：

```
ListView v = (ListView)getSherlockActivity().findViewById(android.R.id.list);
v.setOnItemClickListener( new OnItemClickListener() {
  ...
  ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T13:40:06.483

只加

```
ListView lv = (ListView)getSherlockActivity().findViewById(android.R.id.list);
lv.setOnItemClickListener(this);

 @Override
    public void onItemClick(AdapterView <? > arg0, View arg1, int position,
        long id) {

} 
```

和活动应该实施`OnItemClickListener`

或者

```
ListView lv = (ListView)getSherlockActivity().findViewById(android.R.id.list);
lv.setOnItemClickListener( new OnItemClickListener() {
 @Override
    public void onItemClick(AdapterView <? > arg0, View arg1, int position,
        long id) {

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T13:43:09.517

几周前，我发现了同样的情况。我没有使用 Sherlock，但是设置下一行可能会有所帮助。

```
listView.setItemsCanFocus(false); 
```

还要确保将 clickable false 设置为行项目中的任何 Button。

# javascript - CSS 棘手的悬停效果

> ID：15880491
> 
> 赞同：-4
> 
> 时间：2013-04-08T13:33:43.347
> 
> 标签：javascript, css

每当我将鼠标悬停在图像上时，如何显示图像或文本？你们能帮帮我吗？

一个例子：

![在此处输入图像描述](https://i.stack.imgur.com/wVJqX.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:40:32.243

这实际上一点也不复杂......使用如下类似的 HTML 结构，只需更改悬停时跨度的显示属性。

[http://jsfiddle.net/kkxfk/2/](http://jsfiddle.net/kkxfk/2/)

```
<ul>
    <li><a href="#">Link Title<span>Link Desc.</span></a></li>
</ul> 
```

使用绝对定位将跨度定位在您想要的位置。ul li a span { 显示：无；}

```
ul li a:hover span {
    display: block;
    position: absolute;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:38:00.710

我用我自己的想法使用它并得到完全满意，你必须制作 2 张图片，第一个是非文字的，第二个是你的文字和如何在它们上面......试试看......

```
 <style type="text/css">
    .leftPan{width:200px; float:right;; margin-top:2px}

    #c1 {
     margin:6px;
     border: thin solid black;
     width: 200px;
     height: 200px;
     background: url(1.jpg) no-repeat;
     display: inline-block;
    }
    #c1:hover {
     background: url(2_photo.jpg) no-repeat;
    }

    </style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:39:43.570

`a`在元素上使用背景图像。

然后，您可以控制何时使用 css 可见

```
a:hover {
    background-image: url(url/to/img);
} 
```

像这样

html

```
<nav>
    <a href="#Räätälöity-toimitus">Räätälöity-toimitus</a>
    <img src="http://placehold.it/200x200&text=image" alt="Räätälöity toimitus" />
</nav> 
```

css

```
nav {
    position: relative;
    display: inline-block;
}
a {
    display: block;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    text-align: center;
    line-height: 7;
}
a:hover {
    background-image: url(http://placehold.it/50x50/E8117F/E8117F/);
    background-repeat: no-repeat;
    background-position: top right;
} 
```

[http://jsfiddle.net/UpGKf/](http://jsfiddle.net/UpGKf/)

# android - 在 SurfaceView 上绘图

> ID：15880508
> 
> 赞同：1
> 
> 时间：2013-04-08T13:34:13.750
> 
> 标签：android

我最近在 android 中发现了 facerecognition api 的可能性。我已经看到，当在`SurfaceView`. 但我有一个想法，`onFaceDetection`Listener 有一个`Face[]`as 参数。对于这些对象中的每一个，我都可以找到这样的脸`Rect`：

```
for (android.hardware.Camera.Face f : faces) {
        Rect rect = f.rect;
        Log.d("Top: ", Integer.toString(rect.top));
        Log.d("Right: ", Integer.toString(rect.right));
        Log.d("Bottom: ", Integer.toString(rect.bottom));
        Log.d("Left: ", Integer.toString(rect.left));
} 
```

通过拥有所有这些，是否可以在可以绘制此 Rectangle`View`的位置添加一个？`SurfaceView`如果是这样，我如何`SurfaceView`使用这些信息在 上绘制一个矩形？

# java - 将动作侦听器添加到 netbeans 中的按钮

> ID：15880513
> 
> 赞同：1
> 
> 时间：2013-04-08T13:34:40.423
> 
> 标签：java, swing, netbeans, jbutton, actionlistener

如何将动作侦听器添加到 netbeans 中的按钮

我试图这样做，但我不知道如何

```
button.addactionlistener(null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:39:53.993

首先你需要在你的类中实现动作监听器。

```
public class YourProject extends JFrame implements ActionListener{
yourbutton.addActionListener(this); 
```

您需要添加覆盖方法。

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:39:14.423

您也可以通过其他方式添加

```
JButton jb= new JButton("ok");

jb.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent ae)
      {System.out.println("You have clicked ok button");
    }
}); 
```

# c# - 如果有参数传入，GoBack 按钮不起作用

> ID：15880519
> 
> 赞同：0
> 
> 时间：2013-04-08T13:34:48.533
> 
> 标签：c#, xaml, windows-8

我创建了一个非常简单的项目来测试导航。以下是步骤。

1.  创建一个空白应用程序 (XAML/C#) 项目。
2.  将基本页面“PageTwo”添加到项目中。
3.  将 HyperlinkBut​​ton 和 TextBox 添加到 MainPage。
4.  在 MainPage 的代码隐藏中，使用 Frame.Navigate 方法导航到 PageTow 并将 TextBox 的 Text 作为参数传递。
5.  重写 PageTwo 的 OnNavigatedTo 方法以获取传递的参数。

运行项目，在 TextBox 中输入一些文本，然后单击 PageTwo 的按钮，效果很好，但是如果我从 PageTwo 中单击内置的后退按钮，则会出现异常：值不能为空。如果我注释了重写 OnNavigatedTo 方法，则返回按钮可以毫无例外地将我引导到主页。

任何人都可以帮忙吗？

MainPage.xaml：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <StackPanel>
        <TextBox Width="200" Name="TB"/>
        <HyperlinkButton Content="Go to PageTwo" Click="HyperlinkButton_Click_1"/>
    </StackPanel> 
</Grid> 
```

MainPage.xaml.cs：

```
private void HyperlinkButton_Click_1(object sender, RoutedEventArgs e)
    {
        Frame.Navigate(typeof(PageTwo), TB.Text);
    } 
```

PageTwo.xaml：

```
<TextBlock Name="TB" Grid.Row="1"/> 
```

PageTwo.xaml.cs：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        TB.Text = e.Parameter as string;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:25:50.510

通常，当覆盖任何 UI 方法时，您还需要调用 base.

*如果我将PageTwo.xaml.cs*覆盖更改为以下内容，您的代码不会导致异常`OnNavigatedTo`：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    TB.Text = e.Parameter as string;
    // call base method
    base.OnNavigatedTo(e);
} 
```

# javascript - 在 JavaScript 中以实际大小呈现形状

> ID：15880520
> 
> 赞同：0
> 
> 时间：2013-04-08T13:34:52.237
> 
> 标签：javascript, animation, size

我正在考虑使用 JavaScript 来呈现多对象跟踪任务，作为更大的在线实验的一部分。问题是我需要以实际尺寸（毫米、英寸等）指定对象（在这种情况下是移动的球），以便它们在参与者（或具有不同分辨率的显示器）中以一致的真实尺寸出现。

Java 有一个满足此目标的 getNormalizingTransform() 方法。JavaScript 有与此等价的东西吗？或者更一般地说，有没有办法在 JavaScript 中渲染对象，使它们在屏幕上看起来是相同的大小？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:07:56.253

Javascript 本身不呈现。浏览器渲染页面，通常内容在 HTML 中定义，样式规则在 CSS 中定义，javascript 用于操作它们，并提供客户端脚本。

您可以通过指定 CSS 规则来使用 CSS 或间接使用 javascript 来完成您的要求...

```
http://www.w3.org/Style/Examples/007/units.en.html 
```

假设您有一个带有 ID 的元素`myElement`...

```
<div id="myElement">test div</div> 
```

在 css...

```
#myElement{
    width: 100mm;
    height: 10mm;
} 
```

或者在javascript中...

```
document.getElementById('myElement').style.width = "100mm" 
```

# google-maps-api-3 - 谷歌地图国家名称

> ID：15880525
> 
> 赞同：0
> 
> 时间：2013-04-08T13:35:07.620
> 
> 标签：google-maps-api-3, labels

有没有办法覆盖谷歌地图 api v3 中的国家名称。对我来说，这里的情况是删除/替换“马其顿”标签，只留下“FYROM”标签或用“FYROM”替换它。那么有没有办法篡改这一点呢？我必须注意，我已经实现了在地图的这一部分上放置一个虚拟图像作为图层的解决方案，但结果不是预期的。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:34:32.873

一种选择是使用[样式地图](https://developers.google.com/maps/documentation/javascript/styling)删除所有国家名称。然后用标签将它们添加回来（如[InfoBox](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html)）

# class - 重构：删除超类的名称？

> ID：15880535
> 
> 赞同：0
> 
> 时间：2013-04-08T13:35:26.160
> 
> 标签：class, refactoring

对于学校作业，我们收到了一个 Java 项目，我们被要求尽可能地重构，只要它有利于代码质量。

我做过的一件事是删除一个类。有一个类“Cab extends ImageIcon”和一个类“Train extends Cab”。但是这种继承并没有任何特定用途（即“Train”类是唯一扩展 Cab 的类）。所以最终，我只得到了“Train extends ImageIcon”。

现在，在文档中，我们必须命名我们的重构。我们有一个列表（我将放在这篇文章的底部），我最接近的是“下推方法”和“下推字段”。但这并不涉及超类的构造函数体。

名单：

1.  拉起场
2.  上拉法
3.  拉起构造函数体
4.  下推法
5.  下推场
6.  提取子类
7.  提取超类
8.  提取界面
9.  折叠层次结构
10.  表单模板方法
11.  用委托代替继承
12.  用继承代替委托

我希望你们中的任何人都可以帮助我。如果我的重构是一个错误的选择，请告诉我！我在这种事情上还很陌生。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:43:59.170

对我来说，这听起来像是你崩溃了层次结构。

以前的层次结构

```
ImageIcon
    ^
    |
   Cab
    ^
    |
  Train 
```

你把它变成了：

```
ImageIcon
    ^
    |
  Train 
```

您已经将 Cab 类和 Train 类合并为一个新的 Train 类，这使得层次结构崩溃。

# javascript - 无需登录即可在您的网站上显示来自 Google Analytics 的统计信息

> ID：15880538
> 
> 赞同：0
> 
> 时间：2013-04-08T13:35:37.020
> 
> 标签：javascript, google-analytics

我有一个网站，人们可以在其中搜索数据。我想显示网站上最受欢迎的搜索列表。今天我使用谷歌分析存储所有搜索。它看起来像这样：`window._gaq.push(['_trackEvent', 'search', q, 'us']);`

这里 q 是搜索词，“我们”是市场。

是否有可能针对每个市场获得最热门的搜索？我想使用 JavaScript 和可能的 php 代理来“登录”谷歌分析，我不希望访问者之前登录或批准任何应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:58:12.430

如果不提供用户凭据，您就无法在 JavaScript 中执行此操作，而且您仍然会与 Google 的 Analytics API 对话。我很难相信你找不到任何好的资源，因为它就在这里：[https ://developers.google.com/analytics/devguides/reporting/core/v3/reference](https://developers.google.com/analytics/devguides/reporting/core/v3/reference)

这是一个库（使用您最喜欢的语言）：[https ://developers.google.com/analytics/devguides/reporting/core/v3/gdataLibraries](https://developers.google.com/analytics/devguides/reporting/core/v3/gdataLibraries)

# target - 如何检查 vxworks 中正在运行的任务的足迹？

> ID：15880541
> 
> 赞同：0
> 
> 时间：2013-04-08T13:35:40.850
> 
> 标签：target, vxworks

我想知道有任何命令或实用程序来检查 vxworks（目标板）中应用程序的运行时足迹。

而且我也想知道如何找到目标板的CPU使用率。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T13:03:21.353

不太清楚“运行时占用空间”是什么意思，但 ti 命令会显示特定任务的堆栈使用情况：

```
-> ti tNet0

  NAME         ENTRY       TID    PRI   STATUS      PC       SP     ERRNO  DELAY
----------  ------------ -------- --- ---------- -------- -------- ------- -----
tNet0       ipcomNetTask 1040fad0  50 PEND       1014c42b 1078ff10       0     0

full task name : tNet0
task entry     : ipcomNetTask
process        : kernel
options        : 0x9007
VX_SUPERVISOR_MODE  VX_UNBREAKABLE      VX_DEALLOC_STACK    VX_DEALLOC_TCB     
VX_DEALLOC_EXC_STACK

STACK      BASE     END       SP      SIZE    HIGH   MARGIN
--------- -------- -------- -------- ------- ------- -------
execution 10790000 10780000 1078ff10   65536    2404   63132
exception 10428fb8 10426030            12168     360   11808 
```

对于 cpu 使用情况，请在 BSP 中启用 INCLUDE_SPY 并执行 spy 以开始显示 cpu 使用情况：

```
->spy 
    NAME         ENTRY       TID      PRI   total % (ticks)  delta % (ticks)
------------ ------------ ----------  ---   ---------------  ---------------
tJobTask     0x10098410   0x103eeb00    0     0% (       0)    0% (       0)
tExcTask     0x10097880   0x101d6560    0     0% (       0)    0% (       0)
tLogTask     logTask      0x103efa58    0     0% (       0)    0% (       0)
tShell0      shellTask    0x1058c5c8    1     0% (       2)    0% (       2)
tWdbTask     0x10141e80   0x104ae950    3     0% (       0)    0% (       0)
tSpyTask     spyComTask   0x1042ecb8    5     0% (       8)    0% (       2)
ipcom_tickd  0x10060090   0x1058fb50   20     0% (       0)    0% (       0)
tVxdbgTask   0x10051810   0x104ae658   25     0% (       0)    0% (       0)
tAioIoTask1  aioIoTask    0x1040df78   50     0% (       0)    0% (       0)
tAioIoTask0  aioIoTask    0x1040e3a0   50     0% (       0)    0% (       0)
tNet0        ipcomNetTask 0x1040fad0   50     0% (       0)    0% (       0)
ipcom_syslog 0x10055190   0x1042e5a8   50     0% (       0)    0% (       0)
tNetConf     0x100887e0   0x1044f8b8   50     0% (       0)    0% (       0)
tAioWait     aioWaitTask  0x1040aa40   51     0% (       0)    0% (       0)
KERNEL                                        0% (       0)    0% (       0)
INTERRUPT                                     0% (       0)    0% (       0)
IDLE                                         99% (    2495)   99% (     498)
TOTAL                                        99% (    2505)   99% (     502)

->spyStop 
```

# lucene - 将 Lucene 查询与不同的分析器相结合

> ID：15880542
> 
> 赞同：0
> 
> 时间：2013-04-08T13:35:48.960
> 
> 标签：lucene

我有一个 Lucene (3.5.0) 索引，其中使用标准分析器和其他一些具有不同分析器的字段对文档进行索引。Io 我想编写一个查询（或查询组合）以在AND逻辑的两种情况。我在文献中尝试了很多，但似乎没有处理过这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:11:05.063

看看[`BooleanQuery`](http://lucene.apache.org/core/4_2_0/core/org/apache/lucene/search/BooleanQuery.html)将不同的查询组合在一起。

您只需要使用该`add`方法向其中添加不同的查询，并指定查询是否必须匹配、应该匹配或不匹配。

# android - 旋转Y动画时ViewGroup的Android内容消失

> ID：15880546
> 
> 赞同：1
> 
> 时间：2013-04-08T13:36:00.933
> 
> 标签：android, animation, rotation

我创建了一个将“卡片”翻转到其背面的动画。为了实现这一点，我在正面和背面分别使用了 setRotationYBy() 和 setVisibility()。动画本身工作正常，但是当动画运行时，**两张卡片的内容都会消失**（并在动画完成后重新出现）。cardFront.setOnClickListener(new OnClickListener() {

```
 @Override
        public void onClick(View v) {

            final Runnable moveMapDown = new Runnable() {
                 public void run() {
                     map.animate().y(0);
                 }
             };
             final Runnable flipCard2 = new Runnable() {
                 public void run() {
                     cardBack.setVisibility(View.VISIBLE);
                     cardFront.setVisibility(View.INVISIBLE);
                     currentFront = false;  
CardBack.animate().rotationYBy(90).setInterpolator
(new DecelerateInterpolator()).withEndAction(moveMapDown).setDuration(300);
                     cardFront.setRotationY(180);

                 }
             };
            Runnable flipCard = new Runnable() {
                 public void run() {
                     cardBack.setRotationY(-90);
                 cardFront.animate().rotationYBy(90).setInterpolator
              (new AccelerateInterpolator()).withEndAction(flipCard2).setDuration(300);

                 }
             };

            map.animate().y(-200).withEndAction(flipCard);

        }

    }); 
```

XML-Layout 的背面（正面几乎相同）。

```
<RelativeLayout
        android:id="@+id/back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/imageView1"
        android:layout_centerHorizontal="true"
        android:layout_centerInParent="true"
        android:layout_centerVertical="true"
        android:layout_marginTop="-18dp"
        android:background="@drawable/bgpatch"
        android:paddingBottom="16dp"
        android:paddingLeft="8dp"
        android:paddingRight="8dp"
        android:paddingTop="6dp"
        android:visibility="invisible" >

        <RelativeLayout
            android:layout_width="300dp"
            android:layout_height="288dp"
            android:background="@drawable/dayplan_element_bg" >

            <RelativeLayout
                android:id="@+id/background"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="@drawable/dayplan_element_bg"
                android:paddingBottom="2dp"
                android:paddingLeft="8dp"
                android:paddingRight="8dp"
                android:paddingTop="2dp" >

                <TextView
                    android:id="@+id/backTitle"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_centerHorizontal="true"
                    android:layout_centerInParent="true"
                    android:layout_centerVertical="true"
                    android:gravity="center"
                    android:text="zusätzliche Informationen"
                    android:textAppearance="?android:textAppearanceLarge"
                    android:textColor="@android:color/primary_text_dark"
                    android:textSize="30sp"
                    android:textStyle="italic" />
            </RelativeLayout>

            <View
                android:id="@+id/view1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="-1dp"
                android:background="@drawable/shadow" />
        </RelativeLayout>
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T08:58:01.763

找到了解决方案：由于应用程序的另一部分需要这个，
我将硬件加速设置为。 重新设置它就可以了！`false`
`true`

# java - 如何从 Java 应用程序更改笔记本电脑屏幕亮度？

> ID：15880547
> 
> 赞同：5
> 
> 时间：2013-04-08T13:36:02.507
> 
> 标签：java, windows, brightness

我想创建一个 java 应用程序来更改 windows xp/7 上的笔记本电脑屏幕亮度。请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-03T17:50:37.903

正如其他人所说，没有任何官方 API 可供使用。但是，使用 Windows Powershell（我相信 Windows 随附，因此无需下载任何东西）和[WmiSetBrightness](https://msdn.microsoft.com/en-us/library/aa394549%28v=vs.85%29.aspx)，可以创建一个简单的解决方法，该解决方法应该适用于所有安装了 visa 或更高版本的 Windows PC。

您需要做的就是将此类复制到您的工作区中：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class BrightnessManager {
    public static void setBrightness(int brightness)
            throws IOException {
        //Creates a powerShell command that will set the brightness to the requested value (0-100), after the requested delay (in milliseconds) has passed. 
        String s = String.format("$brightness = %d;", brightness)
                + "$delay = 0;"
                + "$myMonitor = Get-WmiObject -Namespace root\\wmi -Class WmiMonitorBrightnessMethods;"
                + "$myMonitor.wmisetbrightness($delay, $brightness)";
        String command = "powershell.exe  " + s;
        // Executing the command
        Process powerShellProcess = Runtime.getRuntime().exec(command);

        powerShellProcess.getOutputStream().close();

        //Report any error messages
        String line;

        BufferedReader stderr = new BufferedReader(new InputStreamReader(
                powerShellProcess.getErrorStream()));
        line = stderr.readLine();
        if (line != null)
        {
            System.err.println("Standard Error:");
            do
            {
                System.err.println(line);
            } while ((line = stderr.readLine()) != null);

        }
        stderr.close();

    }
} 
```

然后打电话

```
BrightnessManager.setBrightness({brightness}); 
```

其中 {brightness} 是您想要设置屏幕显示的亮度，0 是支持的最暗亮度，100 是最亮的。

非常感谢 anquegi 提供的 powershell 代码，我在[这里](https://stackoverflow.com/questions/29545611/executing-powershell-commands-in-java-program)找到了它来运行这个命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:39:33.473

我认为在 Java 中没有标准的 API 可以做到这一点。

但似乎你可以在 Windows 的 .NET 中做到这一点。请参阅： [我将使用什么 API 调用来更改笔记本电脑 (.NET) 的亮度？](https://stackoverflow.com/questions/373297/what-api-call-would-i-use-to-change-brightness-of-laptop-net)

您始终可以使用 JNI 接口来调用用 C++ 编写的本机方法 - 所以这可能是一种解决方法。

# java - finally 使用是个好习惯吗

> ID：15880555
> 
> 赞同：-3
> 
> 时间：2013-04-08T13:36:27.547
> 
> 标签：java, exception, try-catch, try-catch-finally, finally

我们在代码中使用 try catch 块。我想在这里问的是，使用 finally 块是一个很好的做法。我在代码中没有看到太多 finally 块。这是不好的做法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:37:10.450

**Catch**：当出现问题时。
**最后**：当某事/没有出错时。

当您想要做某事时，即使*是否抛出异常，* finally 块也会帮助您。比如关闭数据库连接，释放资源。您不能在 catch 块中执行此操作，因为仅在引发异常时才执行 catch。

问：什么时候使用`try-catch`？
Ans：当抛出异常时你想做点什么

问：什么时候使用`try-finally`？
Ans：即使抛出异常，你也想做一些事情。

问：什么时候使用`try-catch-finally`？
Ans：当你只在抛出异常时想要 x 并且在抛出异常时想要 y 时。

总结一下

```
try{  

//.....

}
catch{  
   // Something you want to do only when exception is thrown
   // Like OMG evil execption RUN RUN
}  
finally{
   // Something you want to do even the exception is thrown or not  
   // Like who the hell cares about exception
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:40:24.603

如果您需要处理异常并且在发生错误时仍然必须执行一些代码（通常是清理、处理资源），这当然是一个好习惯。

引用“处理异常的最佳实践”（[http://msdn.microsoft.com/en-us/library/seyhszts(v=VS.71).aspx](http://msdn.microsoft.com/en-us/library/seyhszts(v=VS.71).aspx)）：

> 在可能产生异常的代码周围使用 try/finally 块，并将您的 catch 语句集中在一个位置。这样，try 语句生成异常，finally 语句关闭或释放资源，catch 语句从中心位置处理异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:41:37.300

使用 finally 是一个好习惯。无论是否发生异常，它都会执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T13:58:48.007

如果你在你的程序中做任何数据库操作，那么`finally block`是不错的选择。所以，在这里使用 finally 块，它会自动关闭数据库。例如：

```
try
{
 //code of operation
}
catch(Exception error)
{ //code to handle exception
  error.printStackTrace();
}
finally
{ //any code which need to execute mandatory   
  commit();
  db.close();
} 
```

在上面的示例中，`try block`处理打开的 DB 连接以及插入、检索或更新 DB。`catch block`处理异常并`finally block`关闭所有数据库连接。

# html - CSS：使容器适合屏幕

> ID：15880557
> 
> 赞同：7
> 
> 时间：2013-04-08T13:36:31.180
> 
> 标签：html, css, overflow

我正在开发一个有两个容器的网站：侧边栏和主要内容。问题是，当最小化窗口（仅）时，左侧边栏适合当前屏幕尺寸的大小，而当向下滚动时，边栏消失了。这只发生在内容容器（右侧）没有填满屏幕..

您可以尝试最小化[此页面](http://bit.ly/12yZuww)，您会看到当窗口最小化时向下滚动时左侧栏消失。

你可以尝试一个有更多内容的[好页面](http://bit.ly/ZcRQRS)，你会发现这里一切都很好..

我试过`height="100%" and width="100%"`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T12:47:54.660

好的 想通了

我不得不补充：

```
min-height: 100%; 
```

对身体

并使用

> 底部：0；

在侧边栏上

谢谢你的帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:51:40.240

主要问题是正文中的包装器和侧边栏元素是绝对定位的 - 因此正文不知道如何扩展到页面本身的内容大小，因为绝对定位的元素会从文档流中取出. 在这种情况下，您已将页面的所有内容从文档流中取出。

因此，为 body 元素设置一个高度或最小高度是行不通的，因为它只会占用视口的高度而不会占用其他任何东西。绝对定位的子容器也将采用视口的高度。

滚动仍然是可能的，因为内容从任何一个绝对定位的孩子溢出。

您可以尝试`height: auto`在侧边栏元素上进行设置。或者，您应该浮动包装器和侧边栏（并取出绝对定位） - 这至少会将内容放回文档流中，允许浏览器计算实际的 100% 高度:)

绝对定位是一个有点棘手的问题，我不得不承认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:48:54.540

我猜容器是div？

宽度应该是 100%，因为你有它，但对于高度，请尝试：`line-height:100%`。

# visual-studio-2010 - 创建文件结构

> ID：15880559
> 
> 赞同：0
> 
> 时间：2013-04-08T13:36:34.157
> 
> 标签：visual-studio-2010

您好，我在尝试创建一个新项目时遇到了一个小问题。

我的目标是为自动生成的源文件、标题、外部依赖项和资源文件获取一个总文件夹。

Visual Studio 不会为我创建此文件夹。

我试图激活和停用用于控制源代码文件夹的插件，但它没有帮助。

一开始，当我创建了我的前几个项目时，它会自动生成这个文件夹。但是现在除了没有源或头文件夹的项目文件之外，我什么也没有得到

感谢您的每一次帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:45:02.160

当您创建一个新项目时，确定按钮正上方有一个复选框，上面写着“为此解决方案创建一个目录”。确保选中此框。

# android - 嵌套布局并动态更新它们

> ID：15880567
> 
> 赞同：1
> 
> 时间：2013-04-08T13:36:48.160
> 
> 标签：android, layout

我想在 a 中嵌套 a `TableLayout`，`RelativeLayout`然后在我的 Java 代码中动态编辑 TableLayout 。

我的 XML 文件如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/activity_load_date"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".LoadDateActivity" >

<!-- few buttons and textviews -->

    <TableLayout
        android:id="@+id/activity_load_date_table_layout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@+id/button" >
    </TableLayout> 
</RelativeLayout> 
```

Java 代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_load_date);
    //Do something with my Buttons and TextViews(this works fine)

tblLayout = (TableLayout) findViewById(R.id.activity_load_date_table_layout);

}

@Override
public void onClick(View v) {
if (v.getId() == R.id.button_calc) {
    for (int i = 0; i < listOfEntries.size(); i++) {
        Entry temp = listOfEntries.get(i);

        if (temp.getDate().getTime() >= startDate.getTime()
                && temp.getDate().getTime() <= endDate.getTime()) {

            TableRow tr = new TableRow(this);
            TextView comm = new TextView(this);
            comm.setText(listOfEntries.get(i).getComment());
            TextView val = new TextView(this);
            val.setText(String.valueOf(listOfEntries.get(i).getValue()));

            LayoutParams params = new LayoutParams(0,
                    LayoutParams.WRAP_CONTENT, 1f);
            tr.setLayoutParams(params);
            tr.addView(comm);
            tr.addView(val);
            tblLayout.addView(tr);
        }
    }
         tblLayout.invalidate(); //Shouldn't this redraw the entire TableLayout and therefore adding my TableRows? This is not working.
}
} 
```

通过对 TextViews 和 Toasts 的各种测试，我收集到应该填充 tblLayout 并将 TableRows 添加到布局中，唯一不起作用的是我的布局的“重新绘制”。我该如何做到这一点？

## 编辑：

显然，使这不起作用的实际上是给 TableRow 的 LayoutParams，一旦我将它们注释掉，我至少将它打印到屏幕上。然而，它们并不是我所期望的。我希望它们位于按钮下方，而不是位于按钮顶部的左上角。这让我相信 TableLayout 实际上与 RelativeLayout 的大小相同，但位于 RelativeLayout 之上。因此，错误应该存在于我的 XML 文件中。我需要给我的 TableLayout 多少高度才能使这项工作按我期望的方式工作？

## 编辑2：

我需要将`android:layout_below`属性添加到我的 TableLayout 中，现在就像一个魅力！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:56:50.677

您需要调用方法“requestLayout()”

当某些事情发生变化而导致该视图的布局无效时调用它。这将安排视图树的布局传递。

# css - 来自数据库的特定 ID 的 Css 样式表？

> ID：15880571
> 
> 赞同：0
> 
> 时间：2013-04-08T13:36:57.687
> 
> 标签：css

以下代码从我们的数据库中获取我们的类别。我们有一个名为：销售！但是所有的颜色都是一样的。我的问题是，我怎么能对我的 .css “说”他只需要改变颜色：SALE！销售 id 为 0，Apple 1、Samsung 2 等...

```
 <div id="maincontainer">
        <div id="menu">

            <h3><center><b>Categorieën</center></b></h3>
            <hr width="100%">
             @Html.Action("CategoryList", "Categorie")
        </div> 
```

所以：

> 分类
> 
> 1.  销售！<<<颜色橙色
> 2.  苹果
> 3.  三星

至今：

```
div#menu{float:left;width: 130px; min-height:inherit;background-color: #ffffff; border-width: .1em; border-style:solid; border-color: #0404B4; text-align:center; margin:0; padding:0px; } 
```

但正如我所料，整个菜单发生变化而不是销售！只要..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:40:27.557

最简单的方法是，如果您可以在生成列表时向该特定行添加类或 ID，然后将其用作 CSS 规则的选择器，但如果这不是一个选项，您将不得不求助于其他选项。

用你给出的例子很难确定，但如果“销售！” always 是列表中的第一项，那么您可以使用[`:first-child`](https://developer.mozilla.org/en-US/docs/CSS/%3afirst-child)伪类并构造一个 CSS 规则，如下所示：

```
li:first-child {
   color: #fc0;
} 
```

为了使其更具体，仅匹配包含类别的列表，您可以通过将一些父级添加到选择器来使规则更具体，例如`#menu li:first-child`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:43:29.857

类和 id 名称不能以数字开头，所以这种效果会起作用：

```
#category_0 {
    // styles
}

<li id="category_0">SALE!</li> 
```

或者，您可以使用类别名称作为 id（只要去掉无效字符和空格）：

```
#SALE {
    // styles
}

<li id="SALE">SALE!</li> 
```

# c# - 反序列化接口实例的集合？

> ID：15880574
> 
> 赞同：76
> 
> 时间：2013-04-08T13:37:00.627
> 
> 标签：c#, json.net

我想通过 json.net 序列化这段代码：

```
public interface ITestInterface
{
    string Guid {get;set;}
}

public class TestClassThatImplementsTestInterface1
{
    public string Guid { get;set; }
}

public class TestClassThatImplementsTestInterface2
{
    public string Guid { get;set; }
}

public class ClassToSerializeViaJson
{
    public ClassToSerializeViaJson()
    {             
         this.CollectionToSerialize = new List<ITestInterface>();
         this.CollectionToSerialize.add( new TestClassThatImplementsTestInterface2() );
         this.CollectionToSerialize.add( new TestClassThatImplementsTestInterface2() );
    }
    List<ITestInterface> CollectionToSerialize { get;set; }
} 
```

我想用 json.net 序列化/反序列化 ClassToSerializeViaJson。序列化正在工作，但反序列化给了我这个错误：

> Newtonsoft.Json.JsonSerializationException：无法创建 ITestInterface 类型的实例。类型是接口或抽象类，不能实例化。

那么如何反序列化`List<ITestInterface>`集合呢？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-10-31T15:44:14.220

我自己尝试这样做时发现了这个问题。在我实现了[Piotr Stapp's(Garath's) 的答案](https://stackoverflow.com/a/15881570/590382)之后，我被它看起来多么简单而震惊。如果我只是实现一个已经通过我想要实例化的确切类型（作为字符串）传递的方法，为什么库不自动绑定它呢？

实际上，我发现我不需要任何自定义活页夹，只要我告诉它我正在做的事情，Json.Net 就能完全满足我的需求。

序列化时：

```
string serializedJson = JsonConvert.SerializeObject(objectToSerialize, Formatting.Indented, new JsonSerializerSettings
{
    TypeNameHandling = TypeNameHandling.Objects,
    TypeNameAssemblyFormat = System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple
}); 
```

反序列化时：

```
var deserializedObject = JsonConvert.DeserializeObject<ClassToSerializeViaJson>(serializedJson, new JsonSerializerSettings
{
    TypeNameHandling = TypeNameHandling.Objects
}); 
```

相关文档：[**Json.NET 的序列化设置**](http://james.newtonking.com/json/help/index.html?topic=html/SerializationSettings.htm)和[**TypeNameHandling 设置**](http://www.newtonsoft.com/json/help/html/SerializeTypeNameHandling.htm)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-04-08T14:19:52.000

波纹管完整的工作示例与您想要做的事情：

```
public interface ITestInterface
{
    string Guid { get; set; }
}

public class TestClassThatImplementsTestInterface1 : ITestInterface
{
    public string Guid { get; set; }
    public string Something1 { get; set; }
}

public class TestClassThatImplementsTestInterface2 : ITestInterface
{
    public string Guid { get; set; }
    public string Something2 { get; set; }
}

public class ClassToSerializeViaJson
{
    public ClassToSerializeViaJson()
    {
        this.CollectionToSerialize = new List<ITestInterface>();
    }
    public List<ITestInterface> CollectionToSerialize { get; set; }
}

public class TypeNameSerializationBinder : SerializationBinder
{
    public string TypeFormat { get; private set; }

    public TypeNameSerializationBinder(string typeFormat)
    {
        TypeFormat = typeFormat;
    }

    public override void BindToName(Type serializedType, out string assemblyName, out string typeName)
    {
        assemblyName = null;
        typeName = serializedType.Name;
    }

    public override Type BindToType(string assemblyName, string typeName)
    {
        var resolvedTypeName = string.Format(TypeFormat, typeName);
        return Type.GetType(resolvedTypeName, true);
    }
}

class Program
{
    static void Main()
    {
        var binder = new TypeNameSerializationBinder("ConsoleApplication.{0}, ConsoleApplication");
        var toserialize = new ClassToSerializeViaJson();

        toserialize.CollectionToSerialize.Add(
            new TestClassThatImplementsTestInterface1()
            {
                Guid = Guid.NewGuid().ToString(), Something1 = "Some1"
            });
        toserialize.CollectionToSerialize.Add(
            new TestClassThatImplementsTestInterface2()
            {
                Guid = Guid.NewGuid().ToString(), Something2 = "Some2"
            });

        string json = JsonConvert.SerializeObject(toserialize, Formatting.Indented, 
            new JsonSerializerSettings
            {
                TypeNameHandling = TypeNameHandling.Auto,
                Binder = binder
            });
        var obj = JsonConvert.DeserializeObject<ClassToSerializeViaJson>(json, 
            new JsonSerializerSettings
            {
                TypeNameHandling = TypeNameHandling.Auto,
                Binder = binder 
            });

        Console.ReadLine();
    }
} 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-05-23T00:30:19.983

我也对 Garath 的简单性感到惊讶，并且得出的结论是 Json 库可以自动完成。但我也认为它比 Ben Jenkinson 的答案更简单（尽管我可以看到它已被 json 库的开发人员自己修改）。根据我的测试，您需要做的就是将 TypeNameHandling 设置为 Auto，如下所示：

```
var objectToSerialize = new List<IFoo>();
// TODO: Add objects to list
var jsonString = JsonConvert.SerializeObject(objectToSerialize,
       new JsonSerializerSettings { TypeNameHandling = TypeNameHandling.Auto });
var deserializedObject = JsonConvert.DeserializeObject<List<IFoo>>(jsonString, 
       new JsonSerializerSettings { TypeNameHandling = TypeNameHandling.Auto }); 
```

来自[TypeNameHandling 枚举文档](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_TypeNameHandling.htm)

> Auto：当被序列化的对象的类型与其声明的类型不同时，包括 .NET 类型名称。请注意，默认情况下这不包括根序列化对象。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-08T14:00:11.057

使用默认设置，您不能。JSON.NET 无法知道如何反序列化数组。但是，您可以指定要为您的接口类型使用的类型转换器。要查看如何执行此操作，请参阅此页面：http: [//blog.greatrexpectations.com/2012/08/30/deserializing-interface-properties-using-json-net/](http://blog.greatrexpectations.com/2012/08/30/deserializing-interface-properties-using-json-net/)

您还可以在这个 SO 问题中找到有关此问题的信息：[Casting interfaces for deserialization in JSON.NET](https://stackoverflow.com/questions/5780888/casting-interfaces-for-deserialization-in-json-net)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-05-06T01:44:55.880

这是一个老问题，但我想我会添加一个更深入的答案（以我写的文章的形式）：[http ://skrift.io/articles/archive/bulletproof-interface-deserialization-in-jsonnet /](http://skrift.io/articles/archive/bulletproof-interface-deserialization-in-jsonnet/)

**TLDR：**与其将 Json.NET 配置为在序列化的 JSON 中嵌入类型名称，不如使用 JSON 转换器来确定要反序列化的类，以使用您喜欢的任何自定义逻辑。

这样做的好处是您可以重构您的类型而不必担心反序列化中断。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-03-11T19:04:42.627

可以使用 JSON.NET 和[JsonSubTypes](https://github.com/manuc66/JsonSubTypes)属性来完成：

```
[JsonConverter(typeof(JsonSubtypes))]
[JsonSubtypes.KnownSubTypeWithProperty(typeof(Test1), "Something1")]
[JsonSubtypes.KnownSubTypeWithProperty(typeof(Test2), "Something2")]
public interface ITestInterface
{
    string Guid { get; set; }
}

public class Test1 : ITestInterface
{
    public string Guid { get; set; }
    public string Something1 { get; set; }
}

public class Test2 : ITestInterface
{
    public string Guid { get; set; }
    public string Something2 { get; set; }
} 
```

简单地说：

```
var fromCode = new List<ITestInterface>();
// TODO: Add objects to list
var json = JsonConvert.SerializeObject(fromCode);
var fromJson = JsonConvert.DeserializeObject<List<ITestInterface>>(json); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-02-16T06:18:00.567

我想反序列化没有被我的应用程序序列化的 JSON，因此我需要手动指定具体的实现。我已经扩展了尼古拉斯的答案。

可以说我们有

```
public class Person
{
    public ILocation Location { get;set; }
} 
```

和具体实例

```
public class Location: ILocation
{
    public string Address1 { get; set; }
    // etc
} 
```

加入这个类

```
public class ConfigConverter<I, T> : JsonConverter
{
    public override bool CanWrite => false;
    public override bool CanRead => true;
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(I);
    }
    public override void WriteJson(JsonWriter writer,
        object value, JsonSerializer serializer)
    {
        throw new InvalidOperationException("Use default serialization.");
    }

    public override object ReadJson(JsonReader reader,
        Type objectType, object existingValue,
        JsonSerializer serializer)
    {
        var jsonObject = JObject.Load(reader);
        var deserialized = (T)Activator.CreateInstance(typeof(T));
        serializer.Populate(jsonObject.CreateReader(), deserialized);
        return deserialized;
    }
} 
```

然后使用 JsonConverter 属性定义您的接口

```
public class Person
{
    [JsonConverter(typeof(ConfigConverter<ILocation, Location>))]
    public ILocation Location { get;set; }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-02-24T21:37:56.973

与 Inrego 的答案几乎重复，但值得进一步解释：

如果您使用`TypeNameHandling.Auto`，那么它只在**需要**时包含类型/程序集名称（即接口和基类/派生类）。所以你的 JSON 更干净、更小、更具体。

这不是 XML/SOAP 的主要卖点之一吗？

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-10-12T17:34:10.883

尽可能避免使用 TypeNameHandling.Auto，尤其是对于用户可控制的值。

**您需要为集合类型**编写自己的反序列化器。

我没有重复其他已经发布样板转换器代码的人（特别是[Nicholas Westby](https://stackoverflow.com/users/2052963/nicholas-westby)，他的博客文章非常有用并且在[上面](https://stackoverflow.com/questions/15880574/json-net-how-to-deserialize-collection-of-interface-instances/37062930#37062930)链接），我已经包含了反序列化接口集合的相关更改（我有一个枚举接口属性来区分实现者):

```
 public override object ReadJson(JsonReader reader,
        Type objectType, object existingValue,
        JsonSerializer serializer)
    {
        Collection<T> result = new Collection<T>();
        var array = JArray.Load(reader);
        foreach (JObject jsonObject in array)
        { 
            var rule = default(T);
            var value = jsonObject.Value<string>("MyDistinguisher");
            MyEnum distinguisher;
            Enum.TryParse(value, out distinguisher);
            switch (distinguisher)
            {
                case MyEnum.Value1:
                    rule = serializer.Deserialize<Type1>(jsonObject.CreateReader());
                    break;
                case MyEnum.Value2:
                    rule = serializer.Deserialize<Type2>(jsonObject.CreateReader());
                    break;
                default:
                    rule = serializer.Deserialize<Type3>(jsonObject.CreateReader());
                    break;
            }
            result.Add(rule);
        }
        return result;
    } 
```

我希望这对下一个寻找接口集合反序列化器的人有所帮助。

# c++ - 为什么我的对象在 list::push_back() 之后发生变化

> ID：15880585
> 
> 赞同：2
> 
> 时间：2013-04-08T13:37:35.020
> 
> 标签：c++, stl

在我将 push_back 放入 std::list 之后，我的对象似乎发生了变化。

这是 push_back 之前的对象： ![push_back 之前的对象](https://i.stack.imgur.com/U4urI.png)

看看在一些有效的 m_parent_reference 指针之后它最终如何变成 nullptr 从而结束链。

这就是我的对象在 push_back() 之后的样子 ![push_back 之后的对象](https://i.stack.imgur.com/UcWMY.png)

现在没有 nullptr 了。相反，一个 parent_reference 引用了它的孩子，创建了一个永无止境的循环。

1.  `m_InterchangeList`是类型`std::list<CKerEDIInterchange>`
2.  `m_parent_reference`是类型`CKerEDIReference`
3.  `CKerEDIInterchange`继承自`CKerEDIReference`
4.  既没有`CKerEDIInterchange`也`CKerEDIReference`没有自定义复制构造函数
5.  我已经使用 Visual Studio 2010 SP1 和 Visual Studio 2012 Update 2 测试了这种行为
6.  变量 m_parent_reference 只能通过构造函数设置

    ```
           CKerEDIReference(const CKerEDIReference* const parent_reference = NULL)
            : m_parent_reference(parent_reference) {};

    ```

使用自定义复制构造函数和分配运算符，我可以观察到以下内容：

1.  永远不会调用分配运算符
2.  对 `CKerEDIReference::CKerEDIReference(const CKerEDIReference&) 的引用已经被破坏，因为它已经有这个永无止境的循环。

**编辑** 更多信息：

1.  调用`{CKerEDIInterchange tmp(nInterchange);}`不会导致对象损坏。
2.  不涉及切片。m_InterchangeList 是`type std::list<CKerEDIInterchange>`和 nInterchange 如果是类型 `CKerEDIInterchange`

我真的很想知道是否有人可以给我提示下一步该往哪里看。

在此先感谢，尼克帕帕乔吉奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:00:05.547

我找到了这种行为的原因。显然，其中一个`CKerEDIReference`对象已被删除。通过将新对象添加到列表中，新的列表项被写入该已删除对象的内存中。我想这只是纯粹的巧合，它没有崩溃。

# sql-server - 如何获得具有多行结果的查询的结果，其中一行由一个分隔符分隔？

> ID：15880586
> 
> 赞同：0
> 
> 时间：2013-04-08T13:37:39.450
> 
> 标签：sql-server

我需要从一个查询中获取值作为单行，由一个分隔符分隔，但我选择了，但这有点棘手。

所以我有：

```
select employer from employers 
```

我会回来：

```
(line1)    Anne
(line2)    Sue
(line3)    Villy
(line4)    John
(nth line) Marry 
```

我需要得到这样的结果：

```
'Anne','Sue','Villy','John','Marry' 
```

或者至少：

```
 Anne^Sue^Villy^John^Marry 
```

有什么提示吗？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:52:52.740

```
declare @s varchar(max) = ''

select @s = case 
    when @s <> '' then  
        @s + ',''' + employer + ''''
    else 
        @s + '''' + employer + '''' end 
from employers

select @s 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:55:49.880

```
SELECT STUFF((SELECT DISTINCT  ', ' + Employer AS [text()]
FROM Employers
FOR XML PATH ('')),1,1,'') 
```

# macos - 散列证书的内容

> ID：15880608
> 
> 赞同：2
> 
> 时间：2013-04-08T13:38:37.273
> 
> 标签：macos, encryption

如何散列证书的整个编码内容，包括 coreFoundation 中的签名？

我实际上正在寻找与 Windows CryptHashCertificate() 等效的方法。

示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T09:14:56.820

如果有人发现这很有用，我会发布答案...

我设法通过在钥匙串中搜索证书然后将搜索项转换为 SecCertificateRef 来匹配 Windows 函数的结果：

```
// certItem is of SecKeychainItemRef 

CSSM_DATA certData;
unsigned char checksumResult[CC_MD5_DIGEST_LENGTH] = {0};
SecCertificateRef certRef = (SecCertificateRef) certItem;

SecCertificateGetData(certRef, &certData);
memset(checksumResult, 0, CC_MD5_DIGEST_LENGTH);
CC_MD5(certData.Data, certData.Length, checksumResult); 
```

# java - 使用指定的应用程序打开未知文件类型

> ID：15880610
> 
> 赞同：0
> 
> 时间：2013-04-08T13:38:39.597
> 
> 标签：java, android

我正在使用此代码打开具有指定应用程序的文件：

```
File file = new File("/path/to/file.ext");
    if(file.exists())
    {
        Uri path=Uri.fromFile(file);

        Intent intent=new Intent(Intent.ACTION_VIEW, path);
       // intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        intent.setPackage("com.example.myapp");
        MimeTypeMap mime = MimeTypeMap.getSingleton();
        String ext=file.getName().substring(file.getName().indexOf(".")+1);
        String type = mime.getMimeTypeFromExtension(ext);

        intent.setDataAndType(Uri.fromFile(file),type);

        try
        {
            startActivity(intent);
        }
        catch(ActivityNotFoundException e)
        {
            Toast.makeText(this, "No software found", Toast.LENGTH_SHORT).show();
        } 
```

它适用于 .zip 文件，但不适用于非常规的文件扩展名，它会抛出 AcivityNotFoundException。有没有办法以编程方式将文件类型关联到应用程序，或强制应用程序打开给定文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:48:41.297

正确的做法是：

```
List<ResolveInfo> resInfo = packageManager.queryIntentActivities(intent, flags);
if(resInfo !=null && resInfo.size()>0) {
    //Display the activity list that can handle this file format
} else {
    //Handle this file by your own code or display error message
} 
```

如果系统中任何已安装的应用程序甚至您自己的程序都无法处理文件，那么您只会显示一条错误消息。这是一个异常处理。

如果您 100% 确定应用程序可以打开文件 - 打开应用程序 系统会提示我一个文件选择器，您可以打开具有未知扩展名的文件 - 好吧，如果目标应用程序不提供此接口，这可能是不可能的通过意图获取文件输入，您无法劫持它。或者，您可以使用 sysdump 工具或层次结构查看器来查看目标应用程序是否正在使用单独的活动来处理从文件选择器中选择的文件。如果这样做，您可能仍然无法将文件发送给它，因为可能不会导出活动。尝试通过 apk-tool 和 java-decompiler 反编译目标应用，看看有没有运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:40:42.040

你理解错了。如果没有应用程序声称能够处理给定的文件格式，那么您想强制执行哪个应用程序？如果您想让您的应用程序处理任何文件格式，请使您的 Intent 过滤器非常通用，以使其始终匹配。如果没有应用程序这样做，尝试强制执行任何操作通常都不会正确结束。

# c++ - 在 C++ 和 Ncurses 中显示 % 符号

> ID：15880618
> 
> 赞同：0
> 
> 时间：2013-04-08T13:39:04.457
> 
> 标签：c++, c, ncurses

有谁知道如何`%`在基于 ncurses 的 C++/C= 程序中显示百分比字符？

我曾尝试使用`\x25`and `%`，但它们不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:40:06.670

你应该能够`%`用额外的来逃避`%`：

```
%% 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T13:40:20.290

您没有提供如何尝试使用它的示例，但正常的答案是加倍 % 或转义它......

```
"%%" 
```

或者

```
"\%" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:30:20.167

你可以像这样添加额外的 %

```
 "%%" 
```

# java - JSONObject vs JARRAY 获取数组长度

> ID：15880619
> 
> 赞同：0
> 
> 时间：2013-04-08T13:39:09.070
> 
> 标签：java, android, json

我有一个 JSONObject，我将它传递给一个方法来处理成`ArrayLists`.

```
{
    "set0" :
    {
        "title" : "Do you win?",
        "answer" : "1",
        "imgUrl" : "imag",
        "id" : "1"
    },
    "set1" :
    {
        "title" : "Did you loose?",
        "answer" : "1",
        "imgUrl" : "imag",
        "id" : "2"
     }
} 
```

该方法的结构如下：

```
questions(JSONObject result){

    // initialization
    for(int i=0;i < result.length();i++){
        question_list.add(result.getJSONObject("set"+i).getString("title"));
        answer_list.add(result.getJSONObject("set"+i).getString("answer"));
        img_list.add(result.getJSONObject("set"+i).getString("imgUrl"));
        question_batch.add(result.getJSONObject("set"+i).getInt("id"));
    }
    // rest of code
} 
```

我通常会看到用于循环条件的 jsonarray 而不是 jsonobject 本身，当我的 jsonobject 变大但与上面发布的结构相同时会`result.length()`开始产生错误的结果，这对于想要迭代的人来说是一个不正确的实现通过他们的jsonobject？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:29:02.133

您可能还想看看杰克逊。这也很简单，您的代码可能会从使用它中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:48:07.387

我不确定您的实现是否“不正确”，但这是我通常迭代 JSON 的方式。

```
int i = 0;
boolean continue = true;
while (continue){
    if (result.has("set" + i){

    JSONObject set = result.get("set" + i.toString());

    if (set.has("title"){
        question_list.add(set.getString("title");
    }
    if (set.has("answer"){
        answer_list.add(set.getString("answer");
    }
    if (set.has("imgUrl"){
        image_list.add(set.getString("imgUrl");
    }
    if (set.has("id"){
        question_batch.add(set.getInt("id");
    }

    i++;

    }else{
        continue = false;
    }
} 
```

这更有效一点，因为您不必每次想要提取数据时都创建新的 JSON 对象。此外，我会创建一个新类来处理 JSON 对象，并创建该类型的数组列表，因此您只需为每次迭代添加一个对象。这样，您可以确保您的问题/答案/imageURLs/id 都保存在一起。像这样：

```
JSONObject set = result.get("set" + i.toString());

QuestionObject newQuestion = new QuestionObject();

if (set.has("title"){
    newQuestion.setTitle(result.getString("title");
}
if (set.has("answer"){
    newQuestion.setAnswer(result.getString("answer");
}
if (set.has("imgUrl"){
    newQuestion.setImageURL(result.getString("imgUrl");
}
if (set.has("id"){
    newQuestion.setID(result.getInt("id");
}

questionList.add(newQuestion); 
```

此外，如果您没有注意到，您可以使用`json.getInt()`“id”字段而不是字符串直接解析整数。

# python - 更改 GUI 库：QT、wxPython……还有什么？

> ID：15880623
> 
> 赞同：2
> 
> 时间：2013-04-08T13:39:26.053
> 
> 标签：python, wxpython, pyqt

实际上，使用 PyQT 在 python 中进行项目时，我们选择创建“令人不快”或行为不够好的小部件。

所以，我们最终发现 QToolbox、QDate 和其他一些行为对于项目来说是不可接受的，所以我们不得不对它们进行调整。

我们还必须创建一个全新的小部件：调度程序。

当我们创建这些时，我们认为这花费了太多时间。所以我们被要求考虑其他图书馆。

我实际上在 wxPython 中找到了一个调度程序项目，它实际上看起来像我们想要的（但我们相信我们必须对其进行大量调整）。这是：[http ://code.google.com/p/wxscheduler/](http://code.google.com/p/wxscheduler/)

所以，我问每个在 python 的 GUI 编程方面比我有更多经验的人：我们是否需要在 PyQT 以外的任何地方重新开始项目？我知道这个问题很奇怪，但你需要知道的是：

*   该项目现已进行了2个月
*   我只知道 PyQT，并在 2 个月前开始使用 python
*   我们目前在项目中是3，我们目前只知道PyQT
*   我们目前已经管理了很多 PyQT 小部件，并开始编写这些新的小部件。

请帮助我们 =)

谢谢

编辑：我应该补充一点，该项目是开源和多平台的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:33:43.393

如果您愿意，请随意查看其他库。wxPython 的创建者 Robin Dunn 最近开始研究 PySide，他发现它与 wx 有点相似，因此您可能会发现 wxPython 也非常适合您的大脑。我当然认为 wx 的类名比 PyQt 的更直观。确定的唯一方法是实际进行一些实验，看看它是否有效。我会说 wxPython 社区是我多年来接触过的最好的 Python 社区之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T03:41:33.733

One possibility would be to use an HTML scheduler control via QtWebKit. If your UI can accommodate a QWebView in the place where you'd otherwise have a custom scheduler widget, there are probably a number of excellent scheduler widgets (implemented as jQuery plugins, etc.) you could choose from.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T14:31:45.510

> 我们选择创建“令人不快”或行为不够好的小部件。

你为什么不创建“令人愉快”的小部件？

> 所以我们必须适应这些。

是的。这是解决方案。

> 已决定花费了太多时间

如果您更改整个 GUI API，您不认为会花费更多时间吗？据我所知，任何 Python GUI 库中都没有这样的原生调度程序，尤其是可以与 Qt 一起使用的调度程序。我认为重新创建一个不会太久，除非您有非常特定的需求，否则可以确认您不会在现有库中找到这样的现有东西。关于 wxScheduler，我想您可以查看代码，即使它使用 wxWidget 并且您正在使用 Qt，以了解如何执行此操作。

# android - 在 OnClick 中更改字符串值

> ID：15880626
> 
> 赞同：0
> 
> 时间：2013-04-08T13:39:37.577
> 
> 标签：android

对 android 编程来说相当新，并且在单击按钮时无法更改字符串值“通道”。在尝试关闭 onCreate 时遇到问题，但它似乎只能让我在活动结束时关闭它。我收到“令牌“}”的错误。如果我尝试在其他地方关闭它，请删除。尽管这可能很简单，但我很难理解这一点。

```
public class MainActivity extends Activity { 

    String channel = "bbc1";

    // This method creates main application view
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState); 
        // Set view
        setContentView(R.layout.main);
        final ViewSwitcher switcher = (ViewSwitcher)findViewById(R.id.ViewSwitcher1);
        Button bbcButton = (Button) findViewById(R.id.bbcButton);
        Button bbc2Button = (Button) findViewById(R.id.bbc2Button);

        bbcButton.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                channel = "bbc1";
                switcher.showNext();    
            }   
        });

        bbc2Button.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                channel = "bbc2";
                switcher.showNext();
            }
        });

        try{
            // This line creates RSS reader
            RssReader rssReader = new RssReader("http://bleb.org/tv/data/rss.php?ch="+channel+"&day=0");

            // This line gets a ListView from main view
            ListView tvItems = (ListView) findViewById(R.id.listMainView);

            // This line creates a list adapter
            ArrayAdapter<RssItem> adapter = new ArrayAdapter<RssItem>(this,android.R.layout.simple_list_item_1, rssReader.getItems());

            // This line sets list adapter for the ListView
            tvItems.setAdapter(adapter);

        } catch (Exception e) {
            Log.e("Tv RSS Reader", e.getMessage());
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:49:57.717

我猜您想在按下按钮时更改 RSS 提要。但是由于您在 onCreate 中获取 RSS 信息，因此即使您按下按钮，也不会更新数据。但是您正在更改字符串通道的值。

onCreate 仅在您创建活动时调用一次！

尝试将 try 语句移动到一个单独的方法中，并在您的两个 onClickListener 中调用此方法。

```
 bbc2Button.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            channel = "bbc2";
            updateRSS();
            switcher.showNext();
        }
    });

    public void updateRSS(){
        try{
           // This line creates RSS reader
           RssReader rssReader = new RssReader("http://bleb.org/tv/data/rss.php?ch="+channel+"&day=0");

           // This line gets a ListView from main view
           ListView tvItems = (ListView) findViewById(R.id.listMainView);

           // This line creates a list adapter
           ArrayAdapter<RssItem> adapter = new ArrayAdapter<RssItem>(this,android.R.layout.simple_list_item_1, rssReader.getItems());

           // This line sets list adapter for the ListView
           tvItems.setAdapter(adapter);

        } catch (Exception e) {
           Log.e("Tv RSS Reader", e.getMessage());
    } 
```

# c# - 连接到远程数据库

> ID：15880628
> 
> 赞同：-6
> 
> 时间：2013-04-08T13:39:42.930
> 
> 标签：c#, sql-server, linq, linq-to-sql

我有一个 WPF 应用程序，其中包含两个数据库（本地和远程）。我将连接到远程数据库并执行一些选择查询（不修改），对于我需要读取、删除和更新许多信息的本地数据库。我必须在 Ado.net 和 Linq to sql 之间进行选择。

那么，它们之间的最佳选择是什么，以及远程 Sql Server 中接受来自其他 PC 的连接所需的配置参数是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:50:17.563

> 我必须在 Ado.net 和 Linq to sql 之间进行选择。

LINQ-to-SQL 基本上是围绕 ADO.NET 的 ORM 包装器。但是，当我听到“远距离”这个词时，我通常会认为直接 ADO.NET 连接不再合适。如果这些盒子位于不同的网络上，或者被防火墙/子网/等隔开，那么最合适的做法是通过 Web 服务（*内部*可能使用 ADO.NET 或 LINQ-to-SQL，但这完全是一个实现细节）。该 Web 服务可以通过 WCF、ASMX、ServiceStack、手动实现的 REST 或您喜欢的任何其他类型的基于 Web 的访问技术公开。

那么唯一的问题是：当在*同一个*网络上运行时（在您的示例中为“本地”）......它应该继续使用网络服务（用于代码减少等），还是它也应该有一个直接的（ADO .NET / LINQ-to-SQL）连接选项？第一个是没有额外的代码（因为 Web 服务已经存在以支持“远程”客户端）；第二个（直接）选项在***某些***（有限的）场景中可能具有一些性能优势*。*

# java - 使用多个参数记录

> ID：15880629
> 
> 赞同：27
> 
> 时间：2013-04-08T13:39:42.930
> 
> 标签：java, java.util.logging

我目前正在开发一个程序，其中我必须将所有输出写入日志文件。

我需要编写一个日志方法，它应该按照我指定的顺序给出一个级别、一个消息、一个对象值、另一个消息、一个整数值、另一个消息和另一个整数值的输出。我似乎找不到执行此操作的日志方法。我正在使用`Java.util.logging`. 这可能吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-08T13:56:52.627

我假设您需要以下格式的日志格式 FINE,Message1,object.GetValue(),Message2,1,Message3,2

您需要创建输出消息格式

```
logger.log(Level.INFO, "{0},{1},{2},{3},{4},{5}",new Object[]{Message1,object.getValue(),Message2,1,Message3,2}); 
```

现在您需要创建一个自定义格式化程序，它通过扩展 Formatter 类

```
public class DataFormatter extends Formatter {

@Override
public synchronized String format(LogRecord record) {
    String formattedMessage = formatMessage(record);
    String throwable = "";
    String outputFormat = "%1$s, %2$s \n %3$s"; //Also adding for logging exceptions
    if (record.getThrown() != null) {
        StringWriter sw = new StringWriter();
        PrintWriter pw = new PrintWriter(sw);
        pw.println();
        record.getThrown().printStackTrace(pw);
        pw.close();
        throwable = sw.toString();
    }
    return String.format(outputFormat,record.getLevel().getName(),formattedMessage,throwable);
}
} 
```

现在设置新创建的格式化程序

```
 for(int i=0;i<logger.getHandlers().length;i++)
        logger.getHandlers()[i].setFormatter(new DataFormatter()); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-07-31T12:05:32.503

我们在使用 slf4j 记录器时使用了以下代码 -

```
logger.error("Error while finding A from DB. a : {} and b : {}", a, b);
logger.info("Nothing found in db for A with a : {} and b : {}", a, b); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-06-28T10:14:03.320

无论如何，这是一个相当古老的话题，我的两分钱，因为我也更喜欢在我的项目中使用 java.util.logging.Logger 足够的地方。

Lambdas 使这个用于多个自定义参数的样板 Formatter 扩展或多或少已经过时，除非您从其应用程序范围的重用中受益。在（我的）简单场景中，日志消息是针对插入它的代码部分量身定制的，因此`String.format()`通常更容易和更灵活。

**在 Java 8**和 lambdas 之前，这`Formatter`是推迟消息构造的唯一可能性。唯一的*选择*`loggable`是，在基于级别的检查发生之前构建消息以提前登录。
**使用 Java 8 lambdas**，字符串格式可以推迟到`loggable`检查之后，但仍然可以访问原始方法上下文。唯一的小缺点是，由于 lambda 限制，所有访问的字段都必须是最终的。

这是一个相当简单的片段：

```
final String val1 = "lambda expression log message";
final Level level = Level.INFO;
Logger.getGlobal().log(level, () -> 
        String.format("Hello, I'm a %s, evaluated after %s loggable check.", val1, level)
);
Logger.getGlobal().log(level, new RuntimeException(), () -> 
        String.format("Hello, I'm a %s with a stack trace, evaluated after %s loggable check.", val1, level)
); 
```

希望这对你们中的一些也想使用内置日志记录的人有所帮助:-)

干杯本

# c - malloc-ing char 是否与引用 char 数组相同？

> ID：15880633
> 
> 赞同：0
> 
> 时间：2013-04-08T13:39:45.713
> 
> 标签：c, arrays, pointers

我想我的头脑主要是围绕差异，但如果我是正确的，那么这也应该是正确的：

1.)

```
char *string1 = (char*) malloc(runtime_determined_number); 
```

2.)

```
char string2val[runtime_determined_number];
char *string2 = &string2val; 
```

在这里我希望 string1 和 string2 相同，是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:42:36.380

`string1`并且`string2`没有指向同一个内存区域

`string1`是指向`char`动态分配的数组的指针`malloc`

`string2`是指向`char`静态分配数组的指针

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:41:20.097

它们都指向相同长度的未初始化内存块。所以在这方面它们是相同的，是的。

请注意，在第 1 种情况下，您有责任`free`在完成后重新创建内存。在情况 2 中，您不能安全地从函数返回指针，因为内存将在退出时超出范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:42:09.363

它们的相似之处在于它们具有相同的类型并且至少`runtime_determined_number`为它们分配了字节。

它们的不同之处在于：

1.  第一个版本需要显式`free()`以避免内存泄漏；
2.  两个对象的生命周期可能相同也可能不同。

请注意，第二个版本仅在[C99](http://en.wikipedia.org/wiki/C99)中有效，因为它使用了可变长度数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T13:42:54.790

使用`malloc`您在运行时向操作系统请求内存。如果`malloc`成功，您就可以使用分配的内存。您必须稍后释放此内存！
在您的第二部分中，您将创建一个`char`-array，然后将其地址分配给一个指针。在这种情况下，内存是从 d 中取出的，当数组超出范围时`stack`将自动 d 。 您的 s 将与它们指向内存中的不同位置不同。它们很有可能包含与您未初始化它们相同的垃圾......`free`
`char*`

# sql - 查看由同一个表中的两个外键引用的表

> ID：15880634
> 
> 赞同：1
> 
> 时间：2013-04-08T13:39:50.027
> 
> 标签：sql

**“简洁版本**

我有两张桌子：`image`和`item`。项目由两个图像组成：让我们称它们为`left`和`right`（项目的 GUI 可以是例如两个图像并排的画布）。我正在尝试设置有关图像的报告，显示哪个项目“使用”它们。

```
+------------+             +------------+
| image      |             | item       |
+------------+             +------------+
| id  <------------+       | id         |
| name       |     |       | name       |
+------------+     +-------- im_left    |
                   +-------- im_right   |
                           +------------+ 
```

虽然如果一个项目只有一个对图像的引用，找出查询是微不足道的，但我很难将其扩展到“双重引用”情况，尤其是当一个项目引用了两次相同的图像时（考虑到我的情况，这是一个完全合法的场景业务限制）。

到目前为止，我使用两个`LEFT OUTER JOIN`带有别名的 s 将图像连接到项目，使用左列和右列。但是当相同的图像同时用作左右时，这个构造就会失败（我无法真正解释结果，如下所示）。

由于这是数据库设计中非常常见的模式，在这种情况下，您将如何设计一个视图来显示每个图像以及它所使用的每个项目，以及它是从哪一列引用的？

例如

*   image_1 被 item_1 和 item_2（左）和 item_3（右）使用
*   image_2 被 none（左）和 item_4（右）使用
*   image_3 被 item_5 和 item_6（左）和 item_6（右）使用

**长版**（可能过于本地化，但显示了我的试验和具体问题）。

这是我的 2 个表的定义：

```
CREATE TABLE image (
    id serial PRIMARY KEY,
    name text
);
INSERT INTO image(name) VALUES ('image 1');
INSERT INTO image(name) VALUES ('image 2');
INSERT INTO image(name) VALUES ('image 3');

CREATE TABLE item (
    id serial PRIMARY KEY,
    name text,
    im_left int,
    FOREIGN KEY (im_left) REFERENCES image(id),
    im_right int,
    FOREIGN KEY (im_right) REFERENCES image(id)
);
INSERT INTO item(name,im_left,im_right) VALUES ('item 1',1,2);
INSERT INTO item(name,im_left,im_right) VALUES ('item 2',1,3);
INSERT INTO item(name,im_left,im_right) VALUES ('item 3',2,3); 
```

直到今天，我一直在使用这个查询来构建我的视图：

```
CREATE VIEW imagev_v1 AS (
    SELECT image.id, image.name,
        array_agg(li.id) AS left_ids,
        array_agg(li.name) AS left_names,
        array_agg(ri.id) AS right_ids,
        array_agg(ri.name) AS right_names
    FROM image
        LEFT OUTER JOIN item AS li ON li.im_left=image.id
        LEFT OUTER JOIN item AS ri ON ri.im_right=image.id
    GROUP BY image.id, image.name
    ORDER BY name ASC
); 
```

它工作得很好：

```
SELECT * FROM imagev_v1;
 id |  name   |  left_ids   |     left_names      |  right_ids  |     right_names
----+---------+-------------+---------------------+-------------+---------------------
  1 | image 1 | {1,2}       | {"item 1","item 2"} | {NULL,NULL} | {NULL,NULL}
  2 | image 2 | {3}         | {"item 3"}          | {1}         | {"item 1"}
  3 | image 3 | {NULL,NULL} | {NULL,NULL}         | {2,3}       | {"item 2","item 3"}
(3 rows) 
```

直到我添加了一个在左右列中引用相同图像的偷偷摸摸的项目：

```
INSERT INTO item(name,im_left,im_right) VALUES ('item 4',3,3);

SELECT * FROM imagev_v1;
 id |  name   | left_ids |          left_names          |  right_ids  |         right_names
----+---------+----------+------------------------------+-------------+------------------------------
  1 | image 1 | {1,2}    | {"item 1","item 2"}          | {NULL,NULL} | {NULL,NULL}
  2 | image 2 | {3}      | {"item 3"}                   | {1}         | {"item 1"}
  3 | image 3 | {4,4,4}  | {"item 4","item 4","item 4"} | {2,3,4}     | {"item 2","item 3","item 4"}
(3 rows) 
```

至少可以说，第三条结果行很奇怪，但我无法解释这种行为。

我尝试了另一个版本的视图，它可以工作，但无法显示引用的来源（图像是否由`im_left`or`im_right`列引用）：

```
CREATE VIEW imagev_v2 AS (
    SELECT image.id, image.name,
        array_agg(item.id) AS item_ids,
        array_agg(item.name) AS item_names
    FROM image
        LEFT OUTER JOIN item ON item.im_left=image.id OR item.im_right=image.id
    GROUP BY image.id, image.name
    ORDER BY name ASC
);

SELECT * FROM image_v2 ;
 id |  name   | item_ids |          item_names
----+---------+----------+------------------------------
  1 | image 1 | {1,2}    | {"item 1","item 2"}
  2 | image 2 | {1,3}    | {"item 1","item 3"}
  3 | image 3 | {2,3,4}  | {"item 2","item 3","item 4"}
(3 rows) 
```

感谢您阅读至此，现在您有权看到实际问题：我怎样才能写出始终`imagev_v3`正确的内容（与`image_v1``image_v2`

请注意，我使用的是 PostgreSQL 8.4，但我认为它应该是无关紧要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:49:56.197

使用带有多个谓词的连接。它可以是内连接，但如果您想查看任何项目未使用的图像，请将其设为外连接，如下所示。

```
Select i.serial imgId, i.text imgName, 
  case when t.im_left is Null and t.im_right Is Null then 'None'
       When t.im_left Is Null Then 'Right'
       When t.im_right Is Null Then 'Left' Else 'Both' End Source,
  t.serial itmId, t.text itmName
From Image i 
   Left Join item t 
     On t.im_left = i.serial Or
        t.im_right = i.serial 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:51:33.407

这是另一种可能适合您的解决方案，类似于您第一次尝试的解决方案。您只需将左侧和右侧的连接分开即可。

```
SELECT image_id, image_name,
    array_agg(li_id) AS left_ids,
    array_agg(li_name) AS left_names,
    array_agg(ri_id) AS right_ids,
    array_agg(ri_name) AS right_names
FROM
(
    SELECT 
      image.id as image_id, 
      image.name as image_name,
      li.id as li_id,
      li.name as li_name,
      NULL as ri_id,
      NULL as ri_name
    FROM image
    LEFT OUTER JOIN item AS li ON li.im_left=image.id
  UNION ALL
   SELECT 
      image.id as image_id, 
      image.name as image_name,
      NULL as li_id,
      NULL as li_name,
      ri.id as ri_id,
      ri.name as ri_name
    FROM image
    LEFT OUTER JOIN item AS ri ON ri.im_right=image.id

) image

GROUP BY image_id, image_name
ORDER BY image_name ASC 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!12/4e665/9)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:16:07.497

（由 OP 拒绝编辑@Charles Betana 的回答）

这是查理的回答，稍作修改以反映问题。

```
CREATE VIEW imagev_v3 AS (
    SELECT i.id, i.name, 
        array_agg(CASE 
                    WHEN t.im_left<>i.id AND t.im_right<>i.id THEN 'None'
                    WHEN t.im_left=i.id  AND t.im_right<>i.id THEN 'Left'
                    WHEN t.im_left<>i.id AND t.im_right=i.id  THEN 'Right' 
                    ELSE 'Both' 
                END) AS item_sources,
        array_agg(t.id) AS item_ids,
        array_agg(t.name) AS item_names
    FROM image AS i 
        LEFT OUTER JOIN item AS t
            ON t.im_left = i.id OR t.im_right = i.id
    GROUP BY i.id, i.name
); 
```

这会产生正确的答案：

```
SELECT * FROM imagev_v3 ;
 id |  name   |    item_sources    | item_ids |          item_names
----+---------+--------------------+----------+------------------------------
  1 | image 1 | {Left,Left}        | {1,2}    | {"item 1","item 2"}
  2 | image 2 | {Right,Left}       | {1,3}    | {"item 1","item 3"}
  3 | image 3 | {Right,Right,Both} | {2,3,4}  | {"item 2","item 3","item 4"}
(3 rows) 
```

# python - Scrapy 在 CrawlSpider 规则中获取响应 url

> ID：15880644
> 
> 赞同：0
> 
> 时间：2013-04-08T13:40:12.000
> 
> 标签：python, scrapy

我有这个规则：

```
Rule(SgmlLinkExtractor(allow=('http://.*/category/.*/.*/.*',))),
Rule(SgmlLinkExtractor(allow=('http://.*/product/.*', )),cb_kwargs={'crumbs':response.url},callback='parse_item'), 
```

我想将第一个响应传递给函数（parse_item），但问题是这行代码给了我一个错误响应未定义。

如何访问最后一条规则的响应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:32:00.520

您`Response`只能在*回调*中访问该对象，试试这个：

```
Rule(SgmlLinkExtractor(allow=r'http://.*/category/.*/.*/.*'), callback='parse_cat', follow=True),
Rule(SgmlLinkExtractor(allow=r'http://.*/product/.*'), callback='parse_prod'),

def parse_cat(self, response):
    crumbs = response.url
    return self.parse_item(response, crumbs)

def parse_prod(self, response):
    crumbs = response.url
    return self.parse_item(response, crumbs)

def parse_item(self, response, crumbs):
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-01T06:22:01.760

如果你想访问你进入产品的类别url（referer url），在里面`parse_item`，你可以通过以下方式访问它：

```
response.request.headers.get('Referer') 
```

通过：#scrapy irc 上的 nyov

# ruby - 如何使用 rake 运行指定目录中的所有 ruby 文件

> ID：15880645
> 
> 赞同：3
> 
> 时间：2013-04-08T13:40:17.557
> 
> 标签：ruby, testing, directory, rake

我已经安装了 Ruby 1.8.7、ci_reporter 1.8.4、测试单元 2.5.4、rake 10.0.3。

我的 testA.rb, testB.rb ... testZ.rb ：

```
require 'includeA.rb'
require 'includeB.rb'
require 'includeC.rb'
require 'includeD.rb'

Begin of the code...
... End of the code 
```

这是我的 rakefile ：

```
require 'rake/testtask'
require 'rubygems'
gem 'ci_reporter'
gem 'test-unit' 
require 'test/unit' 
require 'ci/reporter/rake/test_unit'  

task :default => [:test]

task :test do
  sh "ruby -I E:/pathToIncludesA/" " -I E:/pathToIncludesB/" " -I E:/pathToIncludesC/" " -I E:/pathToIncludesD/" " E:/pathToTests/testA.rb"
  sh "ruby -I E:/pathToIncludesA/" " -I E:/pathToIncludesB/" " -I E:/pathToIncludesC/" " -I E:/pathToIncludesD/" " E:/pathToTests/testB.rb"
  ...
  sh "ruby -I E:/pathToIncludesA/" " -I E:/pathToIncludesB/" " -I E:/pathToIncludesC/" " -I E:/pathToIncludesD/" " E:/pathToTests/testZ.rb"
end 
```

我使用以下命令启动测试执行：

```
rake CI_REPORTER=reports test 
```

一切正常，但现在我的“pathToTest”中将添加很多测试，现在我想运行所有测试，但在我的 rakefile 中使用一个 cmd。

我从 Windows 批处理 cmd 尝试这个：`for /r "E:\ExempleOfTests\" %%i in (*.rb) do ruby "%%i"`

它运行文件夹 ExempleOfTests 中的所有 .rb 文件。

所以现在我正在重构我的 rakefile，试图合并 windows 批处理 cmd。

这是我的新 rakefile ：

```
require 'rake/testtask'
require 'rubygems'
gem 'ci_reporter'
gem 'test-unit' 
require 'test/unit' 
require 'ci/reporter/rake/test_unit'  

task :default => [:test]

task :test do
  sh "for /r E:/pathToTests/ %%i in (*.rb) do ruby -I E:/pathToIncludesA/ -I E:/pathToIncludesB/ -I E:/pathToIncludesC/ -I E:/pathToIncludesD/ %%i"
end 
```

但是当我使用“rake CI_REPORTS=reports test”启动时我的输出控制台：

```
unexpected %%i
rake aborted
commande failed with status (1) ... 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-05T08:26:20.457

你可以像这样运行它：

```
find path/to/test/folder -name '*_test.rb' | xargs -n1 -I{} bundle exec ruby -Itest {} 
```

如果需要，然后将其包装到 rake 任务中。

# facebook - iframe 修剪大小

> ID：15880646
> 
> 赞同：1
> 
> 时间：2013-04-08T13:40:17.813
> 
> 标签：facebook, iframe, facebook-canvas

到目前为止，我有一个 HTML Facebook 应用程序一直在使用固定画布。现在我想使用流体宽度，但也留下一个选项以返回使用固定宽度。问题是我必须增加我的应用程序的宽度，当我切换回固定宽度时，它会削减我的应用程序的右侧部分以达到 760 像素。我想要的是让应用程序在两边都被平等地修剪。有没有办法做到这一点？

# php - 来自加密按钮的预填充变量

> ID：15880657
> 
> 赞同：1
> 
> 时间：2013-04-08T13:40:52.300
> 
> 标签：php

我的 BuyNow 按钮使用客户个人信息加密。我想在 PP 网站上预先填写此信息，以便客户不必重新输入。这一点很重要，特别是如果买家想使用他/她自己的信用卡。显然这似乎不起作用，因为该信息不会在 PayPal 网站中显示一次。PP 是否支持使用加密按钮进行预填充，还是我必须通过隐藏字段复制客户数据的传递？

# model-view-controller - 如何在托管 bean 中调用 @PostConstructor 之前初始化参数

> ID：15880660
> 
> 赞同：2
> 
> 时间：2013-04-08T13:40:57.580
> 
> 标签：model-view-controller, jsf-2, primefaces, managed-bean, openfaces

我试图在相对于 MVC 调用 JSF @PostConstruvtor 之前初始化属性。

这是我的 Java 代码：

```
@ManagedBean
public abstract class FooController {
    protected <type> prop;

    public void setProp(<type> prop) {
        this.prop = prop;
    }

    public <type> getProp() {
        return this.prop;
    }
}

@ManagedBean
public class Foo1Controller extends FooController {
    private <otherType> myProp;

    @PostConstructor
    public void init {
        myProp = prop.getProp().getOtherTypeProp();
    }
}

[here I have more FooControllers Foo2Controller, Foo3Controller, Foo4Controller...]

@ManagedBean
public class MainController {
    // all props have getters and setters
    private FooController fooController;
    private int controllerType;
    private List<SelectItem> myTypes;
    private <type> prop;

    @PostConstructor
    public void init {
        // init myTypes here
        // init prop here
    }

    public static Object getBean(String s) {
        FacesContext context = FacesContext.getCurrentInstance();
        return context.getApplication().evaluateExpressionGet(context, "#{" + s + "}", Object.class);
    }

    public void controllerTypeChange (ValueChangeEvent event) {
        controllerType = Integer.valueOf(event.getNewValue().toString());

        if (controllerType == 1)
            fooController = (Foo1Controller) getBean("foo1Controller");
        else if (controllerType == 2)
            fooController = (Foo2Controller) getBean("foo2Controller");
        ....

        fooController.setProp(this.prop);
    }
} 
```

这是 XHTML：

```
<o:SelectOneMenu id="fooType"
    value = #{"MainController.controllerType"}
    valueChangeListener = "#{MainController.controllerTypeChange}"
    styleClass = "dropdown">
    <o:ajax action = "#{MainController.controllerTypeChange}">
    <f:selectItems value = "MainController.myTypes">
</o:selectOneMenu>

<h:panelGroup id="component1" rendered="#{MainController.controllerType == 1}">
    <!-- some component here that uses foo1Controller as it's controller -->
</h:panelGroup>

<h:panelGroup id="component2" rendered="#{MainController.controllerType == 2}">
    <!-- some component here that uses foo2Controller as it's controller -->
</h:panelGroup> 
```

问题是，当我在 MainController bean 中创建 foo1Controller 时，它已经使用了 foo1Controller @postConstructor 中的 prop 属性，但是该属性为 NULL，因为它尚未初始化，我不知道如何在后构造函数被调用。我要做的事情背后的概念是 MainController 可以而且应该只有一个子组件，它们都有很多共同点，因此必须在这里进行继承。当用户在下拉列表中选择某个值时，应显示相关组件，而 MainController 应具有对组件控制器的引用。

任何帮助都会非常感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-27T05:32:51.707

定义 Servlet 应该让应用程序中的**GenericServlet**做任何你想做的事情。并在 web.xml set load-on-startup 标签中定义它。servlet 的示例代码

```
public class ResourceInitializer extends GenericServlet {

@Override
    public void init(final ServletConfig config) throws ServletException {
        super.init(config);
// YOUR APPLICATION INIT CODE
}

@Override
    public void service(final ServletRequest req, final ServletResponse res)
            throws ServletException {
    }

    @Override
    public void destroy() {
        // tell the ResourceManager to cleanup and remove the resouces
        LibraOfficeService.getInstance().closeConnection();
        super.destroy();
    }
} 
```

在 web.xml 中

```
 <servlet>
    <description>Initializes Resources</description>
    <servlet-name>ResourceInitializer</servlet-name>
    <servlet-class>packageNAME.ResourceInitializer</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet> 
```

# web-services - 部署的 Web 服务架构与工作区中的内容不匹配

> ID：15880662
> 
> 赞同：0
> 
> 时间：2013-04-08T13:40:59.497
> 
> 标签：web-services, jakarta-ee, websphere, rad, websphere-7

我遇到了一个奇怪的问题，我的 web 服务附带的架构与我的工作区中的架构不匹配。在我的工作区中，一个元素具有以下定义：

```
 <xsd:element name="checkFooBars" minOccurs="1" nillable="false">
                <xsd:simpleType>
                    <xsd:restriction base="xsd:string">
                        <xsd:enumeration value="Y"/>
                        <xsd:enumeration value="N"/>
                    </xsd:restriction>
                </xsd:simpleType>
            </xsd:element> 
```

可从应用程序（通过此 URL: `www.myapplication.com/MyApplicationHttpRouter/MyService/MyService_schema1.xsd`）访问的架构中的相同元素如下所示：

```
<xs:element name="checkFooBars" type="xs:string" /> 
```

这会导致服务用户查看在线模式而看不到我对元素设置的限制的问题。

有谁知道这里发生了什么，或者为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:54:27.950

从 WSDL 生成 Java bean 骨架时缺少的是复制 WSDL 文件。有一个名为“将 WSDL 复制到项目”的复选框。我设置了复选框，然后重新生成了 Java 代码。WSDL 被复制到 EJB 项目的 META-INF 中，并且服务实现将`@WebService`MyServiceSOAPImpl.java 中注释的 wsdlLocation 属性设置为`META-INF/myService.WSDL`。我不喜欢文件夹布局，所以我将其更改为`META-INF/wsdl/MyService/myService.WSDL`（并更新了 MyServiceSOAPImpl.java 中的 Java 引用）——我注意到在 RAD 7 中没有办法指定目标目录，但在 RAD 8.5 中有。

似乎如果未提供 WSDL，则运行时会即时生成 WSDL。生成的代码在注释中有限制，但它没有在代码中实现，所以我猜这就是为什么运行时生成的 WSDL 和模式将元素作为简单字符串而没有限制，因为它基于看起来不正确的 Java （但也许这是一个已知问题？）。

# android - Android：针对 google-drive-sdk 超时问题的推荐解决方法？

> ID：15880663
> 
> 赞同：0
> 
> 时间：2013-04-08T13:41:04.547
> 
> 标签：android, google-drive-api, google-api-java-client

当网络连接不可用时，驱动 sdk 需要很长时间才能超时——根据这个[答案](https://stackoverflow.com/questions/14793218/how-to-set-google-drive-access-timeout-on-android)需要 15 分钟。

我在阻止我的应用程序的 AsynchTask 中访问 Drive。因此，如果没有网络连接，应用程序会显示一个 ProgressDialog 15 分钟，直到超时。可能我可以实现我自己的计时器，它会在合理的持续时间后杀死 AsynchTask。但是，可能很难区分超时和冗长的过程（例如在慢速连接上下载大文件），我会担心令牌访问可能会出现问题，无法正确清理。有关如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:26:45.357

在执行 AsyncTask 之前检查是否有网络连接将有助于消除很多情况，请参阅[检测 Android 上是否有可用的 Internet 连接](https://stackoverflow.com/questions/4238921/android-detect-whether-there-is-an-internet-connection-available)

# php - PHP上传图片到mysql

> ID：15880664
> 
> 赞同：0
> 
> 时间：2013-04-08T13:41:08.850
> 
> 标签：php, upload

我正在尝试将图像上传到 mysql，当我尝试使用此代码时，似乎它只能插入文件夹名称，但 mysql 表中没有图像文件名，我能知道出了什么问题

```
if ($_POST['submit'])
{
//get file attribute
$name = $_FILES['myfile']['name'];
$tmp_name = $_FILES['myfile']['tmp_name'];

//start upload process
    $location = "avatars/".$name;
    move_uploaded_file($tmp_name,$location);
    $query = mysql_query("UPDATE users SET imagelocation='$location' WHERE username='$username'");
    }

//image form

    <form action='upload.php' method='POST' enctype='multipart/form-data'>
 File: <input type='file' name='myfile'> <input type='submit' name='submit' value='Upload!'>
</form> 
```

结果：当我尝试在mysql表中上传例如picture.jpg时，它只出现在列上的“avatars/”，而不是“avatars/picture.jpg”

# jdbc - 默认情况下使用回滚测试 jdbcTemplate.batchUpdate

> ID：15880666
> 
> 赞同：1
> 
> 时间：2013-04-08T13:41:09.280
> 
> 标签：jdbc, transactions, jdbctemplate

我正在尝试测试我的 dao，它在后台使用 jdbcTemplate.batchUpdate 方法。

我的测试是针对真实数据源运行的，所有方法都在标记为仅回滚的事务中执行（任何更改都会在测试后回滚）。测试事务由**PlatformTransactionManager**管理。

这里的问题是 jdbcTemplate.batchUpdate 似乎是在由**DataSourceTransactionManager启动的****单独事务**中执行的，因此我看不到 jdbcTemplate 所做的更改。

 ***我的测试：*

```
@Transactional
@TransactionConfiguration(transactionManager = "txManager", defaultRollback = true)
@RunWith(SpringJUnit4ClassRunner.class)
public abstract class AbstractDbUnitTest
...
@Test
public void removeSpecific() {
    myDao.removeSpecific(myDao.findAllAliasedItems());
    Assert.assertEquals(0, myDao.findAllAliasedItems().size());
} 
```

*道*

```
@Override
public void removeSpecific(final List<? extends Item> items) {
    jdbcTemplate.batchUpdate("delete from ITEM where item_type = ? and item_id = ?", new BatchPreparedStatementSetter() {
        @Override
        public void setValues(PreparedStatement ps, int i) throws SQLException {
            ps.setString(1, items.get(i).getType().name());
            ps.setString(2, items.get(i).getId(););
        }

        @Override
        public int getBatchSize() {
            return items.size();
        }
    });
} 
```

有什么方法可以在不实际更改数据的情况下测试 batchUpdate 方法项？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T15:47:52.620

很抱歉误导了大家。该问题不是由嵌套事务引起的。这个问题是我对 Java 中与事务相关的类的层次结构以及 JDBC 中的批处理语句是如何实现的完全误解的结果。

测试失败，因为随后调用

```
myDao.findAllAliasedItems() 
```

被缓存。Spring JDBC 模板工作得很好，正如人们所期望的那样。**

# jquery - ckeditor h1 被过滤

> ID：15880668
> 
> 赞同：1
> 
> 时间：2013-04-08T13:41:14.477
> 
> 标签：jquery, ckeditor

我正在使用最新的 ckeditor v4.1，我遇到了这个问题，我的 h1 标签被编辑器删除了。我的代码：

```
editor.setData(html); 
```

原始标记是：

```
<h1>header</h1>
hello world! 
```

它将更改为：

```
header<br>
hello world! 
```

禁用这种过滤的任何提示？

# php - 找出多久以前发生的事情

> ID：15880671
> 
> 赞同：1
> 
> 时间：2013-04-08T13:41:23.580
> 
> 标签：php, unix-timestamp

我有一个网页，它在 UNIX 中记录上次查看到数据库字段时的时间。我想制作一份报告，说明上次查看此页面是多少天前。我在 PHP 中这样做

我该如何解决这个问题？目前，我有该字段显示上次使用 gmdate("MDY ", $UNIXTIMESTAMPFIELD) 访问它的时间，但我想显示的不是上次访问的日期

23 天前

谢谢

基兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:45:55.353

如果您使用的是 PHP5.3 或更高版本，这非常容易。使用`DateInterval`对象，它可以理解 unix 时间戳并轻松输出差异。

您可以做的非常非常简单。假设您的时间戳是 $TS1、$TS2。

`DateTime`第 1 步：为每个对象创建对象：

```
$DT1 = new DateTime("@{$TS1}");
$DT2 = new DateTime("@{$TS2}"); 
```

第2步：区分它们

```
$diff = $DT1->diff($DT2); 
```

第3步：打印东西！

```
echo "Days: ".$diff->d; 
```

这会自动考虑时区设置等。如果需要，它还允许您轻松地从日期时间对象中减去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:55:00.383

差异很明显`$diff = time() - $UNIXTIMESTAMPFIELD`（现在事件）。不是你只需要正确格式化它：

```
function time_diff_to_human($seconds){
    // For seconds
    if( $seconds < 60){
        if( $seconds == 1){
            return "a second ago"
        }
        return sprintf( "%d seconds ago", $seconds);
    }

    // Minutes
    $minutes = round( $seconds/60);
    if( $minutes < 60){
        if( $minutes == 1){
            return "a minute ago"
        }
        return sprintf( "%d minutes ago", $minutes);
    }

    // Hours
    $hours = round( $minutes/60);
    if( $hours < 24){
        if( $hours == 1){
            return "last hour"
        }
        return sprintf( "%d hours", $hours);
    }

    // Add some formatting to days
    $days = $months/24;
    if( $days < 31){
        if( $days == 1){
            return 'yesterday';
        }
        return sprintf( "%d days", $days);
    }

    // Approx months
    $months = round( $days/30);
    if( $months < 12){
        if( $months == 1){
            return "last month"
        }
        return sprintf( "%d months", $months);
    }

    // And finally years, note that they are calculated from days
    $years = round( $days/365.4);
    if( $years == 1){
        return "last year"
    }
    return sprintf( "%d years", $years);

} 
```

# expressionengine - 表达式引擎 publish.php 文件不起作用

> ID：15880672
> 
> 赞同：1
> 
> 时间：2013-04-08T13:41:24.457
> 
> 标签：expressionengine

我已经将表达式引擎的版本升级到 2.5.2..

在我在主题/cp_themes/default/content/publish.php 文件中的旧版本中，添加了自定义 javascript 代码和代码 php，因为每当我从管理端发布或编辑任何条目时，我都想在按钮单击上打开一个窗口事件..在那个按钮单击事件上，我将一个 URL 传递给并打开了一个窗口，该窗口具有地图.. n 运行良好..

现在的问题是，在我的新版本 2.5.2 中它不起作用，甚至也没有显示那个 HTML 按钮。在实际的 publish.php 文件中没有调用.. 我放了 php exit(); 在文件的顶部.. NI 发现，文件 publish.php 没有调用..

所以请帮忙，我想对我的最新版本应用与旧版本相同的更改。所以，必须在哪个文件中编写该代码..？？

任何人都可以帮助我..请尽快..

谢谢，贾廷

# android - 从 asp.net 读取 Android database.db 文件

> ID：15880674
> 
> 赞同：0
> 
> 时间：2013-04-08T13:41:37.280
> 
> 标签：android, asp.net, android-sqlite

我想从 asp.net 读取 Android 数据库文件。

首先我想直接在本地浏览

然后只想从中读取数据并将其显示在网格视图中。

那我该怎么做？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:59:43.530

那些 *.db 只是 dtandard SQLite 数据集，它是一个简单的开源数据库，在 .Net 中有可与 C# 一起使用的库，请参阅此问题以获取示例：[How to create asp.net web application using sqlite](https://stackoverflow.com/questions/5813873/how-to-create-asp-net-web-application-using-sqlite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:45:12.213

Android 使用 SQLite，它的 *.db 文件是常规的 SQLite 数据库文件。我不熟悉 asp.net，但如果你可以使用 SQLite，那么你可以寻找一种方法来使用它自己的 db 文件。但是，请注意，您将无法从常规 android 设备获取 SQLite 数据库文件（除非它是 root 或您处理模拟器）

# r - 是否可以从目录中打开 RGUI 中的栅格图层或堆栈？

> ID：15880676
> 
> 赞同：1
> 
> 时间：2013-04-08T13:41:43.460
> 
> 标签：r, plot, rgui

嗨，我想打开一个 tiff 格式的图像文件，我正在借助包 RGtk2 和 gwidgets 创建一个 GUI，我可以浏览 tiff 格式文件，但问题是它没有显示在任何地方，因为我需要显示该层或任何光栅砖的窗口或框架，请任何人告诉我如何使用 RGUI。

# zend-framework - zend 通过查询获取 youtube 评论

> ID：15880677
> 
> 赞同：1
> 
> 时间：2013-04-08T13:41:43.817
> 
> 标签：zend-framework, youtube, comments, gdata

我想通过使用查询在 Zend 中获取视频的评论，以便我可以指定一些额外的参数（最大结果、起始索引等），但我无法让它工作。

我获取评论的方式是：

```
 $yt = new Zend_Gdata_YouTube();
    $yt->getVideoCommentFeed($videoId); 
```

我尝试使用 url 作为第二个参数，就像这样

```
 $url = 'http://gdata.youtube.com/feeds/api/videos/' . $videoId . '/comments?max-results=5';
    $yt->getVideoCommentFeed($videoId,$url); 
```

但它仍然不起作用。不工作是指它返回的结果与之前没有指定的 url 相同。

我试图制作一个 Zend_Gdata_Query 但我不太确定如何构建它。有什么帮助吗？:)

# c# - ASP.NET WebPages 服务或 WCF 和 WebPages 网站

> ID：15880679
> 
> 赞同：1
> 
> 时间：2013-04-08T13:41:51.947
> 
> 标签：c#, asp.net, .net, wcf

我有一个使用 Razor 语法和 C# 的网页网站 (ASP.NET WebPages)。我需要一个 Web 服务，以便将它公开给 Metro 应用程序。

但是如何让 WCF 服务与我的 ASP.NET 网页网站一起工作？我是否只是在 Visual Studio 中打开我的网站，然后右键单击项目并添加新项目 > WCF 服务？

网上有这方面的教程吗？我找不到我正在寻找的信息。或者更好的是，我如何仅使用 ASP.NET WebPages 框架来创建服务？

# gem - 当我尝试用 kaminari 对新闻项目进行分页时，“名称”没有方法错误

> ID：15880681
> 
> 赞同：2
> 
> 时间：2013-04-08T13:41:56.233
> 
> 标签：gem, kaminari

我一直在努力纠正nil:NilClass 的“未定义方法名称”的问题`name'" when I have installed the kaminari gem.
Error message: undefined method`

```
Extracted source (around line #3):

<article class="body">
  <header>
    <h1><%= @news_item.name %></h1>
 </header>
 <%= @news_item.body %>
</article> 
```

我的路线文件中有这个：

```
resources :news, :only => [:index, :show]

namespace :admin do
  resources :news_items
end 
```

新闻项目的部分：

```
 %article.body
    = @news_item.name
    = @news_item.body 
```

新闻控制器：

```
class NewsController < ApplicationController
  def index
    @news_items = NewsItem.order("id").page(params[:page]).per(5) 

    respond_to do |format|
      format.html #do nothing.
      format.json { render :json => @news_items.to_json }
      format.xml { render :xml => @news_items.to_xml }
    end
  end
  def show
    @news_item = NewsItem.find params[:id]
  end

end 
```

对于新闻#index：

```
= paginate @news_items
= render :partial => "/shared/news_item", :collection => @news_items 
```

谁能确定为什么我无法解决这个没有方法错误的问题？

谢谢

大卫

# c# - 输入字符串的方法输出颜色对象c#

> ID：15880683
> 
> 赞同：1
> 
> 时间：2013-04-08T13:42:04.013
> 
> 标签：c#, object, methods, colors

我试图在 C# 中创建一个从组合框中输入字符串值并返回颜色对象的方法。我已经确定了如何使用 if/else 语句来比较字符串并返回颜色对象，但我想减少我正在编写的代码量。

```
public static ColorBeingReturned(string TextFromBox)
{
   newcolor = Color.TextFromBox;
   return newcolor;
} 
```

我确定代码都是不正确的，但它让您了解我正在尝试做什么。以下是我对 if/else 语句的片段。

```
public object ColorBeingReturned(string TextFromBox)
{
    if (TextFromBox == "Red")
      return Color.Red;
    else if (TextFromBox == "Blue")
      return Color.Blue;
    else
      return Color.White;
} 
```

基本上，不必编写所有这些 if else 语句，我宁愿使用一些语句，这样如果我在列表中添加其他颜色，它将是一个更容易的过渡。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T13:45:08.070

你可以使用`Color.FromName(TextFromBox)`方法。

[http://msdn.microsoft.com/en-us/library/system.drawing.color.fromname.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.color.fromname.aspx)

你也可以使用反射

```
public Color ColorBeingReturned(string TextFromBox)
{
    return (Color)(typeof (Color)
                  .GetProperty(TextFromBox,
                       BindingFlags.Static|
                       BindingFlags.Public|
                       BindingFlags.GetProperty))
                  .GetValue(null, null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:47:43.590

如果这里的问题是有很长`if/else`的语句，则可以通过使用字典轻松解决。

```
var textVsColor = new Dictionary<string,Color>(); 
textVsColor["Red"] = Color.Red;
textVsColor["Green"] = Color.Green;
... 
```

而不是很长`if/else`只是

```
public object ColorBeingReturned(string textFromBox)
{
     var color = dfault(Color);
     textVsColor.TryGetValue(textFromBox, out color); 
     return color;
} 
```

如果您需要支持多语言环境，这对于需要基于当前 UI 语言的字符串的情况是一种很好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:47:12.923

将有效的颜色名称添加到您的`combo-box`, 并使用

```
 Color.FromName(); 
```

例子：

```
Color red = Color.FromName("Red"); 
```

对于使用有效颜色名称填充组合框，请使用：

```
 comboBox1.DataSource = Enum.GetValues(typeof(KnownColor)); 
```

# file - 从 gvim 外部打开文件

> ID：15880689
> 
> 赞同：3
> 
> 时间：2013-04-08T13:42:24.520
> 
> 标签：file, ubuntu, vim

在控制台上的 vim 中，我可以将光标移动到与当前打开的文件位于同一目录中的文件名上，然后发出命令`!xdg-open %:p:h/<cfile>`. 这将在操作系统定义的外部查看器中打开文件。这很棒，但在我的系统上，使用 gvim 时似乎不起作用。

这是我放入`~/.vimrc`文件的命令：

```
nnoremap <leader>o :silent !xdg-open %:p:h/<cfile><CR> 
```

我该怎么做才能在控制台上的 vim*和*gvim 中都有效？

我正在运行 Ubuntu Linux 12.04LTS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:13:37.123

`&`在命令末尾加上一个。我从[LaTeX-Box](https://github.com/LaTeX-Box-Team/LaTeX-Box/blob/cc784a55d26af74fea41bd1f162a40a2c43b5de7/ftplugin/latex-box/common.vim#L178)的做法中学到了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:03:13.660

在此帖子之后：[https://superuser.com/a/407675/104415](https://superuser.com/a/407675/104415)，将 a`&`放在命令的末尾使其在 gvim 和 vim 中都可以工作：

```
nnoremap <leader>o :silent !xdg-open %:p:h/<cfile>&<CR> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:12:27.790

也许你可以试试

```
:set debug=msg 
```

然后看看有没有错误？

# ruby-on-rails - 检查环境轮胎.rb文件

> ID：15880693
> 
> 赞同：2
> 
> 时间：2013-04-08T13:42:30.120
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, elasticsearch, tire

这是我的`config/initializers/tire.rb`文件：

```
if Rails.env.production?
 Tire.configure do
  url "http://remoteserver.com:9200"
 end
end 
```

如果我在我的生产服务器上尝试：

```
bundle exec rake environment tire:import CLASS=Object FORCE=true RAILS_ENV=production 
```

我得到错误：

```
The original exception was: #<Errno::ECONNREFUSED: Connection refused - connect(2)> 
```

如果我删除这`if`句话工作正常。

**我如何知道轮胎.rb 文件上的 rails 环境？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:21:02.033

您可以添加轮胎初始化代码，`config/environments/production.rb` 而不是在轮胎.rb 文件中检查它（移动它时删除轮胎.rb 初始化程序）

[我过去做过的另一件事是在http://railscasts.com/episodes/85-yaml-configuration-revised](http://railscasts.com/episodes/85-yaml-configuration-revised)中谈到的 YAML 配置文件。然后你可以像做 database.yml 一样链接你需要的设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T11:15:30.880

Rails 初始化程序 ( `config/initializers/tire.rb`) 通常是用于 Rails 配置的完美位置。

查看应用程序[模板](https://github.com/karmi/tire/blob/master/examples/rails-application-template.rb)，或者更好的是，使用它生成一个示例应用程序并将其更改为：

```
Tire.configure do
  url 'http://localhost:9201'
end 
```

您应该看到它正确应用了——当您运行时`bundle exec rake environment tire:import:all`，您会看到`Skipping index creation, cannot connect to Elasticsearch`

当然，当你想在 development/production/etc 中对 Elasticsearch URL 进行不同的配置时，最好将其放入环境配置文件中。另一种解决方案是使用`ELASTICSEARCH_URL`环境变量，该环境变量由 Tyre 开箱即用，用于 Heroku、Bonsai 等。

# python - Python中的交互函数

> ID：15880698
> 
> 赞同：-1
> 
> 时间：2013-04-08T13:42:43.163
> 
> 标签：python, python-2.7

我有一个程序可以加载名称列表，您可以找到这些名称并将名称添加到列表中。我必须编写一个 parse_command 函数，它接受一个表示命令及其参数的字符串，并返回一个由命令和一个包含命令参数的元组组成的对，如果它是一个具有正确数量参数的有效命令。否则返回对 (None, None)

输出应如下所示：

```
>>>parse_command('e')
('e',())
>>>parse_command('f')
(None, None)
>>>parse_command('f John Smith')
('f', ('John Smith',))
>>>parse_command('a John Smith, Washington DC, 02532223, 6 August')
('a', ('John Smith', 'Washington DC', '02532223', '6 August'))
>>>parse_command('a John Smith, Washington, 1234')
(None, None)
>>>parse_command('x')
(None, None) 
```

到目前为止，我有这个：

```
def parse_command(command_string):
i = command_string
if i[0] == 'e':
    return ('e', ())
elif i[0] == 'f':
    command = i[1:]
    if bool(command) == True:
      return ('f', (command,))
    elif bool(command) == False:
        return (None, None)
elif i[0] == 'a':
    command = i[1:]
    section = i.split(',')
    if len(section) == 4:
        return ('a', tuple(i[2:].split(', ')))
    else:
       return (None, None) 
```

一切正常，我得到了我应该得到的输出，但我想编写一个交互函数。因此，如果用户想要查找名称或添加名称，他们可以轻松完成。要将某人添加到列表中，用户将键入“a”，然后键入该人及其所有详细信息。要查找某人，他们会键入“f”，后跟该人的姓名。如果他们想退出程序，他们只需输入“e”。如果不使用“a、e 或 f”，将返回“无效命令”。一个例子是这样的：

```
>>>List of Names: names.csv
>>>Command: f John Smith
John Smith: Chicago, 12345, 4 July
>>>Command: f roeuh eoruhg
roeuh eoruhg Unknown Friend
Invalid Command: f
>>>Command: a John Smith, LA, 12345, 3 July
John Smith is already a friend 
>>>Command: a Roger Little, Texas, 12345, 9 August
>>>Command: f Roget Little
Roger Little: Texas, 12345, 9 August
>>>Command: e
Saving changes...
Exiting... 
```

到目前为止，我已经写了这个（load_names、add_name 和 display_name 已经写好了）：

```
def interact():
names = load_names(raw_input('List of Names: '))
ended = False
while True:
    result = parse_command(raw_input('Command: '))
    if result is not (None, None):
       if result[0] == 'f':
          return display_name(result[1], names)
          pass
       elif result[0] == 'a':
          return add_name(result[1:], names)
          pass
       elif result[0] == 'e':
          return 'Saving Changes...' + /n 'Exiting...'
          ended = True 
          pass 
```

我有点卡住了，正在寻找有关交互功能的帮助，有人有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:34:34.730

我认为您正在尝试实现一种方法来与代码之外的文件或数据库等持久对象进行交互。我会推荐使用[Python SQLite](http://zetcode.com/db/sqlitepythontutorial/)。由于您使用的语言暗示了一项任务，而您自己的要求是帮助，所以我没有提供完整的解决方案。

# php - 播放 SHOUTcast pls 文件 - pls 文件中的 URL 导致 HTML 页面？

> ID：15880702
> 
> 赞同：0
> 
> 时间：2013-04-08T13:43:04.120
> 
> 标签：php, flash, redirect, mp3, shoutcast

我正在用自制的 flashplayer 播放一些 SHOUTcast 广播电台。因为 flashplayer 本身不理解 pls 文件，所以我在 PHP 中创建了一个 pls 阅读器，它打开并读取 pls 文件并重定向到 pls 文件中列出的文件/链接。（我只要求 mpeg/音频流）。

flashplayer 对该文件的请求（在同一域上）并将被定向到此 pls 文件中列出的流。

例如，当在 PHP 中“打开”一个 pls 文件时，这会给出例如以下信息（通过`http://yp.shoutcast.com/sbin/tunein-station.pls?id=<someid>`）：

```
[playlist]
numberofentries=1
File1=http://132.241.56.35:8004
Title1=(#1 - 0/10) KCSC.ASChico.com - 24Kbps MP3
Length1=-1
Version=2 
```

PHP 将请求重定向到`http://132.241.56.35:8004`但没有听到任何内容。通过在浏览器中打开它来测试它的存在，它是一个 HTML 页面，一个 SHOUTcast DNAS 状态页面。例如，在 winamp 中打开它时，它会播放流。我错过了什么吗？

有些重定向直接在flashplayer中播放，看来我的方法还可以。

我必须做些什么才能使其正常运行？为什么假设是流的链接是 HTML 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:12:25.343

SHOUTcast 服务器检查您的用户代理字符串以查看它是否是浏览器。这样做的原因是，当您使用浏览器访问 SHOUTcast 服务器的 URL 时，您会得到管理页面。它通过检查单词`Mozilla`是否在字符串中来进行检测。

由于您的 Flash 播放器将使用浏览器的用户代理字符串，因此 SHOUTcast 服务器向您发送管理控制台而不是流。

`;`您可以通过在请求路径的末尾附加分号来轻松覆盖此行为。

```
http://132.241.56.35:8004/; 
```

这会强制 SHOUTcast 服务器忽略您的用户代理字符串并改用`MPEG OVERRIDE`它，它不包含`Mozilla`并假定为音频播放器。

# opayo - iFrame sagepay 低调？

> ID：15880704
> 
> 赞同：1
> 
> 时间：2013-04-08T13:43:08.040
> 
> 标签：opayo

有没有人在.Net中使用过这个？关于如何实现这一点的文档非常糟糕。

我可以连接到 sage 并看到卡支付屏幕但不使用 iFrame？

例如，如果我使用 asp.net 集成工具包...我会将 iFrame 放在哪个页面上？

以前有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-25T11:09:43.417

该文档包括协议的附录 - 搜索“sagepay 直接集成指南 pdf”之类的内容

[http://www.sagepay.co.uk/file/1166/download-document/DIRECTProtocolandIntegrationGuidelinesV3%200%20%281%29.pdf](http://www.sagepay.co.uk/file/1166/download-document/DIRECTProtocolandIntegrationGuidelinesV3%200%20%281%29.pdf)

附录列出了您需要处理的事务。

# neo4j - 了解 Cypher 查询

> ID：15880710
> 
> 赞同：0
> 
> 时间：2013-04-08T13:43:24.430
> 
> 标签：neo4j, cypher

我试图了解 Cypher 中以下查询的输出。

```
start n=node:node_auto_index(name="root_node")
match n-[:SC]->c, b<-[:CB]-c-[:CB]->b1
where (b.days_in_number - b1.days_in_number <= 7) AND (b.days_in_number > b1.days_in_number)
and c.name = "C16659"
with  distinct n,c, b, b1
match  n-[:SC]->c-[:CB]->b-[:CT]->i1, n-[:SC]->c-[:CB]->b1-[:CT]->i2 
with b.name as bname,b1.name as b1name,i1.name as i1name,i2.name as i2name
return  bname,b1name,i1name,i2name
order by bname,b1name,i1name,i2name; 
```

**返回 3680 行**

```
start n=node:node_auto_index(name="root_node") 
match n-[:SC]->c, b<-[:CB]-c-[:CB]->b1
where (b.days_in_number - b1.days_in_number <= 7) AND (b.days_in_number > b1.days_in_number)
and c.name = "C16659"
with  distinct n,c, b, b1
match  b-[:CT]->i1, b1-[:CT]->i2 
with b.name as bname,b1.name as b1name,i1.name as i1name,i2.name as i2name
return  bname,b1name,i1name,i2name
order by bname,b1name,i1name,i2name; 
```

**返回 184 行**

查询 1 似乎在做笛卡尔，但我无法理解为什么？谁能解释一下？

c-[:CB]->b 是 1:n 的关系。

更新：

当我运行以下查询时，我得到正确的 184 个结果：

```
start n=node:node_auto_index(name="root_node") 
match n-[:SC]->c, b<-[:CB]-c-[:CB]->b1
where (b.days_in_number - b1.days_in_number <= 7) AND (b.days_in_number > b1.days_in_number)
and c.name = "C16659"
with  distinct n,c, b, b1
match  c-[:CB]->b-[:CT]->i1, c-[:CB]->b1-[:CT]->i2 
with n.name as nname,c.name as cname, b.name as bname,b1.name as b1name,i1.name as i1name,i2.name as i2name
return  nname,cname,bname,b1name,i1name,i2name
order by nname,cname,bname,b1name,i1name,i2name; 
```

这表明将 n 退回到笛卡尔。

n-[:SC]->c 是 1:1 的关系。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:50:29.667

你验证过 n 和 c 之间的关系真的是唯一的吗？看着路径的Maybee会有所帮助。尝试

```
match p1=n-[:SC]->c-[:CB]->b-[:CT]->i1, p2=n-[:SC]->c-[:CB]->b1-[:CT]->i2
return p1,p2 
```

查看其他结果彼此不同的地方。

# javascript - 执行从AngularJS中的变量调用的函数

> ID：15880711
> 
> 赞同：1
> 
> 时间：2013-04-08T13:43:25.020
> 
> 标签：javascript, angularjs

我的代码：

```
<li class="grid--col2of10" ng-repeat="button in buttons">
   <button ng-show="button.show" class="btn--action-{{button.color}} icon-{{button.icon}}" ng-click="{button.clickAction}">{{button.text}}</button>
</li> 
```

我的对象：

```
var btns = {
    "back": {
      "color": "red",
      "clickAction": "prevStep",
      "icon": "left",
      "text": "Back"
    }, 
    "cancel": {
      "color": "red",
      "icon": "block",
      "text": "Cancel"
    },
    "clear": {
      "color": "blue",
      "icon": "cancel",
      "text": "Clear"
    },
    "save": {
      "color": "green",
      "icon": "download",
      "text": "Save"
    },
    "next": {
      "color": "green",
      "clickAction": "nextStep",
      "icon": "right-after",
      "text": "Save and Continue"
    }
  }; 
```

是否可以创建`button.clickAction`一个在 AngularJS 中执行的函数？

btns 对象在指令内，使用指令`templateUrl`选项调用 html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:05:41.373

弄清楚了。我无法在 HTML 中执行它，但我通过调用指令对象中的函数使其工作：

```
var btns = {
    "back": {
      "color": "red",
      "clickAction": function() { prevStep(); },
      "icon": "left",
      "text": "Back"
    }, 
    "cancel": {
      "color": "red",
      "icon": "block",
      "text": "Cancel"
    },
    "clear": {
      "color": "blue",
      "icon": "cancel",
      "text": "Clear"
    },
    "save": {
      "color": "green",
      "icon": "download",
      "text": "Save"
    },
    "next": {
      "color": "green",
      "clickAction": function() { nextStep(); },
      "icon": "right-after",
      "text": "Save and Continue"
    }
  }; 
```

和 HTML：

```
<li class="grid--col2of10" ng-repeat="button in buttons">
   <button ng-show="button.show" class="btn--action-{{button.color}} icon-{{button.icon}}" ng-click="button.clickAction()">{{button.text}}</button>
</li> 
```

# c++ - 如何在两个成员函数之间共享 QListIterator？

> ID：15880717
> 
> 赞同：0
> 
> 时间：2013-04-08T13:43:36.283
> 
> 标签：c++, qt, iterator

我创建了一个继承自 Qlist 的新类。这个新类有两个成员函数，它们需要以向前和向后的方式遍历列表。

现在我对 c++ 和 Qt 比较陌生，所以我的错误潜伏在声明语法中，但我无法将迭代器作为声明的受保护成员变量来编译。

在类标题中，我将拥有

```
[...]
public:
    MyObject* moveNext(); // this returns a pointer to next object
    MyObject* movePrev(); // this return a pointer to prev object

protected:
    QListIterator<MyObject *> i(*this); // this is where the problem is!!!
[...] 
```

在成员函数中声明迭代器会破坏目的，因为一个人失去了以前的位置......

我是否以错误的方式进行此操作（通过从 QList 继承，然后希望拥有一个全局且对列表持久的迭代器）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:48:59.673

如果您希望迭代器`i`向前和向后移动，这显然是可能的。`QListIterator`支持`++`和`--`运算符。

您可以这样做的方法是将 QList 作为您班级的私有成员（而不是从 QList 派生）。作为另一个私人成员，您拥有您发布的代码段中的迭代器。

```
class Foo {
    QList<MyObject*> list;
    QListIterator<MyObject*> it;
    public:
    MyObject* moveNext() { return *(++it); }
    MyObject* movePrev() { return *(--it); }
    Foo() : list(QList<MyObject*>()) {
        it = list.begin();
    }
}; 
```

但是，在类声明中初始化变量是不可能的。您必须在类构造函数中执行此操作。

# mongodb - mongodb - 查看数据

> ID：15880721
> 
> 赞同：0
> 
> 时间：2013-04-08T13:43:57.840
> 
> 标签：mongodb

我有一个带有 cdr 和 mongodb 的星号服务器。数据在 /data/db 中并且没问题，但我想以纯“文本”形式查看它。不是 local.0 等等.. 我怎样才能将它挂载到一个目录并从 cdr 查看文件（mp3）。

谢谢。

我拥有并且工作正常的服务器示例：

root@mdb-rec-pri:/mnt/as_cdr/2013/01/01/01# ls

20130101-010711-4078-014639052763220.mp3 20130101-011908-4067-012971505877422.mp3 20130101-012508-4078-012971505584293.mp3 20130101-013240-4067-012971503569841.mp3 20130101-014028-4078-012971502368075.mp3 20130101-010713-4067 -012971506499222.mp3 20130101-012001-4078-012971506915939.mp3 20130101-012536-4067-012971509112891.mp3 20130101-013250-54078-034.317

我有数据库所在的第二台服务器，我想在我的主服务器中查看来自该服务器的数据。

# android - 无法通过 GPS 或网络获取经纬度

> ID：15880723
> 
> 赞同：1
> 
> 时间：2013-04-08T13:44:00.783
> 
> 标签：android, gps, location, locationlistener

我正在尝试使用`GPS provider`或`Network provider`但我没有从**GPS**或**网络**获取位置。
这是我的代码，几天前运行良好，但现在无法正常运行。
我不明白我错在哪里，因为所有权限都已添加到**AndroidManifest.xml**中。
这是有助于您理解的代码。

```
public class SearchDishoom extends Header implements LocationListener {  
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.searchdish);        

        manager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000000, 100, this);

            locationListenerNetwork = new LocationListener() {
                public void onLocationChanged(Location location) {}
                public void onProviderDisabled(String provider) {}
                public void onProviderEnabled(String provider) {}
                public void onStatusChanged(String provider, int status, Bundle extras) {}
            };              

        if (!manager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
            // if gps provider is not enable then popup alertbox
            buildAlertMessageNoGps();
        } else {        
            // if gps is one then start searching
            locationListenerGps = new LocationListener() {
                public void onLocationChanged(Location location) {}
                public void onProviderDisabled(String provider) {}
                public void onProviderEnabled(String provider) {}
                public void onStatusChanged(String provider, int status, Bundle extras) {}
            };
            manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000000,100, locationListenerGps);
        }
    }

    /*
     * Get location (lat-long) from sharedpreference to further use
     */
    prefLocation = getSharedPreferences("myLocation", MODE_WORLD_READABLE);
    String userLocationLat1 = prefLocation.getString("Lat", String.valueOf(0));
    String userLocationlong1 = prefLocation.getString("Long", String.valueOf(0));
    String address = prefLocation.getString("Address", "Location not found not found");
    userLocationLat = Double.parseDouble(userLocationLat1);
    userLocationlong = Double.parseDouble(userLocationlong1);

    // set lat-long value in getset class for use of another activity
    gs = new GetSet();
    gs.setLatitude(userLocationLat);
    gs.setLangitude(userLocationlong);      
    if (userLocationLat == 0 && userLocationlong == 0 && address.equals("")) {
        /*
         *  if lat-long is 0 or null then start searching using
         *  GPS Provider or Network Provider
         */

        manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        manager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);
        if (!manager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
            buildAlertMessageNoGps();
        } else {
            manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000000,100, locationListenerGps);             
        }
    } else {
        // set lat-long value in getset class for use of another activity
        gs.setLatitude(userLocationLat);
        gs.setLangitude(userLocationlong);
        setLocationName(userLocationLat, userLocationlong);
    }       
} 
```

这是覆盖 onLocationchanged()：

```
@Override
public void onLocationChanged(Location location) {
    userLocationLat =location.getLatitude();
    userLocationlong =location.getLongitude();
    prefLocation = getSharedPreferences("myLocation", MODE_WORLD_READABLE);
    SharedPreferences.Editor prefsEditor = prefLocation.edit();
    prefsEditor.putString("Lat", String.valueOf(userLocationLat));
    prefsEditor.putString("Long", String.valueOf(userLocationlong));

    gs.setLatitude(userLocationLat);
    gs.setLangitude(userLocationlong);
    List<Address> addresses;
    try {
        addresses = new Geocoder(SearchDishoom.this, Locale.getDefault())
                .getFromLocation(userLocationLat, userLocationlong, 1);
        Address obj = addresses.get(0);
        add = obj.getAddressLine(0);
        city = obj.getLocality();
        addressString = add + "," + city;
        gs.setCurrentAddressString(addressString);
        prefsEditor.putString("Address", addressString);
        prefsEditor.commit();
        tvLocation.setText(add + "," + city);           
    } catch (IOException e) {
        showToast("Unable to find location");
    }
} 
```

即使我没有使用位置`Geocoder`，如果我输入城市名称，它也会显示“无法找到位置”。
这是技巧，`GeoCoder`正在使用模拟器但无法使用手机（我尝试了 2 种不同的手机）。

我的项目是内置的`API 17`，没有任何 logcat 错误。
请给我任何提示或参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:01:47.143

虽然我不能立即说出您的代码有什么问题，但您应该考虑使用位置库并让其他人完成繁重的工作。请参阅：[https ://code.google.com/p/little-fluffy-location-library/](https://code.google.com/p/little-fluffy-location-library/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:50:58.783

也许您应该检查“位置访问”设置并允许访问您的位置？...

# html - MVC 4 - 正则表达式验证 - 为什么这不起作用？

> ID：15880729
> 
> 赞同：0
> 
> 时间：2013-04-08T13:44:05.383
> 
> 标签：html, asp.net-mvc, regex

我在需要正则表达式验证的 MVC 4 视图上有一个字段。我试图将条目限制为仅输入字符“A”到“Z”（不区分大小写）。

我的 C# 属性如下所示：

```
 /// <summary>
    /// Gets or sets the Revision property
    /// </summary>
    [DataMember]
    [Required]
    [RegularExpression("(/^[a-z]+$/i)", ErrorMessage = "Please enter a character between 'A' and 'Z'")]
    public string Revision { get; set; } 
```

生成的 HTML 如下所示：

```
 <div class="formEditControl">
        <input Style="width:30px;" data-val="true" data-val-regex="Please enter a character between &#39;A&#39; and &#39;Z&#39;" data-val-regex-pattern="(/^[a-z]+$/i)" data-val-required="The Revision field is required." id="Revision" name="Revision" type="text" value="" />
        <span class="field-validation-valid" data-valmsg-for="Revision" data-valmsg-replace="true"></span>
    </div> 
```

但是当我执行它时，我在有效数据输入时收到以下错误：

![在此处输入图像描述](https://i.stack.imgur.com/WcBBz.png)

我对 MVC 4 或 RegEx 没有很多经验，所以我不清楚为什么这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:51:00.463

你的正则表达式只允许小写字符。因此，当您输入“D”时，它会以错误响应。对于所有字母，不区分大小写，您的正则表达式应如下所示`^[a-zA-Z]*$`。尝试一下，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:52:36.453

您必须`(/`从头开始，但这会使分隔符`()`. 我不确定您甚至根本不需要分隔符。删除`(`和`)`。如果这不起作用，请使用

```
^[a-zA-Z]+$ 
```

# shell - 如何从 shell 脚本中的 pom.xml 文件中提取 GAV

> ID：15880730
> 
> 赞同：5
> 
> 时间：2013-04-08T13:44:09.013
> 
> 标签：shell, maven

我需要从大量`pom.xml`文件中提取 Maven GAV（groupId、artifactId、version）。并非所有的 POM 都有父 POM 声明，因此需要考虑父 GAV 和项目 GAV 之间的继承。

我只想使用可以在 linux shell 中轻松编写脚本的工具，例如 bash。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:44:09.013

我能找到的最佳解决方案是使用 XSL 转换。创建一个`extract-gav.xsl`包含以下内容的文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:pom="http://maven.apache.org/POM/4.0.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output indent="yes" omit-xml-declaration="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/pom:project">
        <!-- this XML element just serves as a bracket and may be omitted -->
        <xsl:element name="artifact">
            <xsl:text>&#10;</xsl:text>

            <!-- process coordinates declared at project and project/parent -->
            <xsl:apply-templates select="pom:groupId|pom:parent/pom:groupId" mode="copy-coordinate"/>
            <xsl:apply-templates select="pom:artifactId|pom:parent/pom:artifactId" mode="copy-coordinate"/>
            <xsl:apply-templates select="pom:version|pom:parent/pom:version" mode="copy-coordinate"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="*" mode="copy-coordinate">
        <!-- omit parent coordinate if same coordinate is explicitly specified on project level -->
        <xsl:if test="not(../../*[name(.)=name(current())])">

            <!-- write coordinate as XML element without namespace declarations -->
            <xsl:element name="{local-name()}">
               <xsl:value-of select="."/>
            </xsl:element>
            <xsl:text>&#10;</xsl:text>
        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

然后可以使用 th 命令在 shell 中调用此转换（假设您已安装 libxslt）`xsltproc extract-gav.xsl pom.xml`

这会产生以下格式的输出：

```
<artifact>
  <groupId>org.example.group</groupId>
  <artifactId>example-artifact</artifactId>
  <version>1.2.0</version>
</artifact> 
```

如果您需要不同的格式，XSL 转换应该很容易适应，以便满足您的需要。例如，以下转换将 GAV 写入制表符分隔的纯文本：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:pom="http://maven.apache.org/POM/4.0.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="text"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/pom:project">
        <!-- process coordinates declared at project and project/parent -->
        <xsl:apply-templates select="pom:groupId|pom:parent/pom:groupId" mode="copy-coordinate"/>
        <xsl:apply-templates select="pom:artifactId|pom:parent/pom:artifactId" mode="copy-coordinate"/>
        <xsl:apply-templates select="pom:version|pom:parent/pom:version" mode="copy-coordinate"/>
        <xsl:text>&#10;</xsl:text>
    </xsl:template>

    <xsl:template match="*" mode="copy-coordinate">
        <xsl:if test="not(../../*[name(.)=name(current())])">
            <xsl:value-of select="."/>
            <xsl:text>&#9;</xsl:text>
        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-17T21:32:32.827

```
grep -v '\[' <( mvn help:evaluate -Dexpression="project.groupId" 2>/dev/null && 
    mvn help:evaluate -Dexpression="project.artifactId" 2>/dev/null && 
    mvn help:evaluate -Dexpression="project.version" 2>/dev/null ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-06T14:35:23.907

我使用了一个名为**pom**的 groovy 脚本，它放在 PATH 上。它看起来像这样：

```
#!/usr/bin/env groovy

def cli = new CliBuilder(usage:'pom')
cli.h('print usage')
cli.n('do not auto-print output')
cli.p(args:1, argName:'pom', 'the POM file to use')

def options = cli.parse(args)
def arguments = options.arguments()

if (options.h || arguments.size() == 0 ) {
    println cli.usage()
} else {
    def fileName = options.p ? options.p : "pom.xml"
    def script = arguments[0]

    def output = Eval.x(new XmlSlurper().parse(new File(fileName)), "x.${script}")
    if (!options.n) println output
} 
```

现在您可以像这样提取值：

```
pom version
pom groupId
pom 'properties."project.build.sourceEncoding"'
pom -n 'modules.module.each { println it }'
pom -n 'dependencyManagement.dependencies.dependency.each { \
    println "${it.groupId}:${it.artifactId}:${it.version}" \
}' 
```

# asp.net - 为什么我的 jqGrid 是空的，即使存在 json 数据

> ID：15880737
> 
> 赞同：0
> 
> 时间：2013-04-08T13:44:26.613
> 
> 标签：asp.net, json, jqgrid, jqgrid-asp.net

这是我的 jqGrid，它不显示任何数据。

![没有网格数据](https://i.stack.imgur.com/wOGeJ.png)

我正在获取网格的 json 响应，但它没有显示。

这是我到目前为止所做的。

```
<script type="text/javascript">
        $.jgrid.no_legacy_api = true;

        function getCompanyData() {
        //debugger;
            $.ajax({
                url: "jqGrid_pureJS.aspx/GetCompanyList",
                data: "{}",  // "{}" For empty input data use "{}",
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                success: function (result) {
                    //debugger;
                    var grdData = $("#jqGrid")[0];
                    grdData.addJSONData(result.d);
                },
                error: function (result) {
                    //debugger;
                }
            });
        }
        $(function () {
            $("#jqGrid").jqGrid({
                datatype: getCompanyData,
                colNames: ['Id', 'Name', 'Address', 'City', 'Phone'],
                colModel: [
                          { name: 'F1', index: 'invid', width: 55 },
                          { name: 'F2', index: 'invdate', width: 90,editable:true },
                          { name: 'F3', index: 'amount', width: 80,editable:true, align: 'right' },
                          { name: 'F4', index: 'tax', width: 80,editable:true, align: 'right' },
                          { name: 'F5', index: 'total', width: 80,editable:true, align: 'right' }
                ],
                pager: $("#pager"),
                rowNum: 10,
                rowList: [10, 20, 30],
                viewrecords: true,
                caption: 'My first grid',
                width:800

            }).navGrid('#pager', { edit:true,view: true, del: false });
        });

    </script> 
```

这是我发布数据的网络方法。

```
 [WebMethod]
        [ScriptMethod(ResponseFormat=ResponseFormat.Json,UseHttpGet=false)]
        public static string GetCompanyList()
        {

            var data = GetAllData();
            try
            {
                string response = JsonConvert.SerializeObject(data, Formatting.Indented);
                return response;
            }
            catch (Exception ex)
            {
                return ex.Message;
            }
        } 
```

这是我捕获的json响应：

```
 {"d":"
    [\r\n  
        {\r\n    
        \"F1\": 1.0,\r\n    
        \"F2\": \"Name\",\r\n    
        \"F3\": \"Address\",\r\n    
        \"F4\": \"City\",\r\n    
        \"F5\": \"Phone\"\r\n  
        },
        \r\n  
        {\r\n    
        \"F1\": 10.0,\r\n    
        \"F2\": \"abc\",\r\n    
        \"F3\": \"def\",\r\n    
        \"F4\": \"asd\",\r\n    
        \"F5\": \"998907\"\r\n  
        }
    ]
} 
```

我可以看到类似的问题[jqgrid 没有显示数据](https://stackoverflow.com/questions/7246607/jqgrid-not-showing-rows-only-shows-total-number-of-rows)，我已经检查过了，但我并没有摆脱我的问题

为什么没有附加json数据？我该怎么做 ？

**编辑**

作为答案的一部分，我删除了我的 javascript 来调用 jqGrid 并替换了 oleg 在答案中发布的代码。

我也对服务器端的代码做了一些改动。

这是服务器端代码：

```
 [WebMethod]
        [ScriptMethod(UseHttpGet = false)]
        public static string GetCompanyList()
        {
            var data = GetAllData();

            //string response = JsonConvert.SerializeObject(data, Formatting.Indented);
            return data;

        }

        public static string GetAllData()
        {
            try
            {
                //Grab the connection string defined in web.config
                var connectionString = ConfigurationManager.ConnectionStrings["Test_3ConnectionString"].ConnectionString;

                DataTable dt = null;

                //Command Text
                string commandText = "SELECT * FROM EmpDetails";

                dt = SQLHelper.ExecuteDataTable(connectionString, CommandType.Text, commandText, "EmpDetails");

                string result = JsonConvert.SerializeObject(dt);

                return result;
            }
            catch (Exception ex)
            {
                throw;
            }

        } 
```

事情每小时都在发生奇怪的事情。当我运行我的应用程序时，我有以下网格。

![奇怪的问题](https://i.stack.imgur.com/7wyYZ.png)

我只有`9 rows in my table`，它正在显示`viewing 1-10 of 552`。

有人可以帮我序列化有什么问题吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:12:56.677

您的代码中可能存在错误。看起来您使用了一些至少有 3 年历史的复古代码示例。

服务器代码中的主要错误是使用了`JsonConvert.SerializeObject`inside of web 方法。如果您定义`ResponseFormat=ResponseFormat.Json`，则该方法应返回任何类型的**对象**，而不是`string`. .Net**自动**将对象转换为 JSON。所以返回值的类型`GetCompanyList()`应该和的返回类型相同`GetAllData()`。更改后，Web 方法应返回类似的数据

```
{
    "d": [
        {
            "F1": 1,
            "F2": "Name",
            "F3": "Address",
            "F4": "City",
            "F5": "Phone"
        },
        {
            "F1": 10,
            "F2": "abc",
            "F3": "def",
            "F4": "asd",
            "F5": "998907"
        }
    ]
} 
```

您使用的第二个问题`datatype`定义为函数。如果您可以根据某些参数获取数据，那么这是您*永远不应该使用*的低级方式。`jQuery.ajax`jqGrid 提供了许多不同的自定义方式来更改`jQuery.ajax`jqGrid 内部使用的参数。通常，指定选项就足够了

```
url: "jqGrid_pureJS.aspx/GetCompanyList",
mtype: 'POST',
datatype: 'json',
ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
serializeGridData: function (postData) {
    return JSON.stringify(postData);
},
jsonReader: {
    repeatitems: false,
    root: function (obj) { return obj.d; }
},
gridview: true,
height: "auto",
loadonce: true 
```

此外，`index`从 中删除所有属性也很重要`colModel`。如果使用选项，`index`其他的用法如下错误。`name``loadonce: true`

如果`F1`column 包含*唯一*值，那么我建议您将`key: true`属性添加到 column 的定义中`"F1"`。

更改的结果应该像[演示中的](http://www.ok-soft-gmbh.com/jqGrid/karthik.htm)那样：

![在此处输入图像描述](https://i.stack.imgur.com/JvT7d.png)

# c# - 在 C# 中向上转换

> ID：15880745
> 
> 赞同：2
> 
> 时间：2013-04-08T13:44:53.513
> 
> 标签：c#, value-type, downcast

我们是否可以将值类型转换（如 int 到 float 转换）视为向上转换，将 float 到 int 视为向下转换？我相信当我们谈论向上转换和向下转换时，我们特别指的是参考转换。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T13:47:09.790

不，值类型之间的转换不能被视为向上转换或向下转换，因为它们不共享层次结构链接（它们不以任何方式或形式相互继承）。

向上转型意味着您正在将子类型引用更改为超类型引用。

向下转型则相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:47:50.537

不，浮点数不是 int 的特例（IE 子类）。它们是不同的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:51:24.600

不，向上和向下转换仅在继承上下文中有效。当您在可以容纳更多或更少数据的值类型之间进行转换时，您使用的是普通类型转换。其中，有两种不同的类型： 1\. 隐式转换。这些是可以进行的转换，因为转换是“安全的”，即不会丢失数据。例如，您可以安全地将`int`值转换为`long`值。2\. 显式转换。这些转换可能会导致数据丢失，因此您必须进行显式转换才能进行转换。例如，将`long`值转换为 an`int`是不安全的。

更多导入见：http: [//msdn.microsoft.com/en-us/library/ms173105.aspx](http://msdn.microsoft.com/en-us/library/ms173105.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T14:00:56.533

正如其他人所描述的，这些不是向上转换和向下转换的示例。但是，我们可以讨论扩大和缩小原始类型转换（例如，从 int 到 long 是扩大转换，因此可以隐式完成。）然而，在这种特殊情况下（float/int），转换有点不同的。

存在从 int 到 float 的隐式转换，但由于 float 无法准确表示整数，因此转换实际上仍会丢失精度。这是值得知道的，因为它违反了隐式转换永远不应该丢失信息的一般规则。仅当您将整数转换为浮点数，对它们进行一系列累积数学运算，然后尝试转换回整数时，这才真正值得注意。在这些情况下，如果您假设浮点数是十进制数的完美表示，则近似误差会累积，从而产生不正确的结果。

# php - Magento 报价单和税金

> ID：15880751
> 
> 赞同：1
> 
> 时间：2013-04-08T13:45:04.267
> 
> 标签：php, magento, magento-1.7

我需要为商店中的选定产品添加自定义属性。为此，我使用了 Model_Price_Observer。我正在使用 Magento 1.7。到目前为止，我可以添加自定义属性，但计算出的价格是错误的 - 缺少税收。

我的代码是（部分）：

```
 $quote_item->getProduct()->setIsSuperMode(true);
    $quote_item->setOriginalCustomPrice( $customprice );
    $quote_item->setCustomPrice( $customprice );

    $quote_item->setTaxAmount($taxAmount);
    $quote_item->setBaseTaxAmount($taxAmount); 
```

任何想法我做错了什么？

我使用正确的触发器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:20:47.357

由于我们还不知道客户在世界上的位置，因此无法将税项添加到项目中，因此无法合理地计算税率。由于这个事实，我认为 Magento 不会保存您的新税务信息。手动加税对我来说似乎也很危险，因为它总是通过（有时）复杂的逻辑动态计算。

在购物车中，尝试通过输入您的国家和邮政编码来获得“快速估算”，并查看报价是否适用税收，然后再试一次。

# javascript - 如何防止 # 在 BootStrap 下拉列表中的 URL 末尾？

> ID：15880753
> 
> 赞同：10
> 
> 时间：2013-04-08T13:45:05.163
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我有这个链接：

```
<a href="#" id="myBtn"><i class="icon-user"></i><span>Add user</span></a> 
```

我使用`preventDefault()`and`return false`来避免`#`在我的地址末尾。而且效果很好。问题是当我对 Bootstrap 的下拉菜单做同样的事情时。如果我离开 return false 它不会`#`像预期的那样在末尾添加 ，但它也可以防止下拉列表消失，就像我删除`return false`. 这是我的下拉代码：

```
<li class="dropdown">
  <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="ddBtn">
    <i class="icon-wrench"></i><span>Parent Item<b class="caret"></b></span>
  </a>
  <ul class="dropdown-menu">
    <li><a href="#" id="ddSonBtn">Child item</a></li> 
```

Javascript：

```
$("#ddSonBtn").click(function () {
    //some code

    e.preventDefault();
}); 
```

有解决方案吗？

**我在用**

```
Bootstrap 2
jQuery 
```

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-02-07T09:07:50.193

根据引导文档：

[http://getbootstrap.com/javascript/#dropdowns](http://getbootstrap.com/javascript/#dropdowns)

需要`href`用`data-target`属性替换，即

```
<a data-target="#" id="myBtn"><i class="icon-user"></i><span>Add user</span></a> 
```

我相信这是一种更“引导式”的做事方式，而不是抑制事件处理程序或手动操作显示/隐藏行为。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-08T13:49:34.977

它可能有也可能没有很好的记录，但没有必要在 jQuery 事件中调用`preventDefault()` **和调用。** `return false;`

**编辑**：来自 jQuery 的`on`文档：“从事件处理程序返回 false 将自动调用`event.stopPropagation()`和`event.preventDefault()`”（[http://api.jquery.com/on/#event-handler](http://api.jquery.com/on/#event-handler)）

`return false;`相当于`e.preventDefault();`和`e.stopPropagation();`

`preventDefault`防止元素的默认行为 - 例如提交表单的提交按钮、导航到特定的锚点`href`等。

`stopPropagation`阻止事件冒泡 DOM。意思是，不会在目标元素的父元素上触发事件。

在使用事件时挑选并选择您需要的。在您的情况下，您可能只需要调用`preventDefault`Dropdown 的点击处理程序。

此外，在您的代码中，`return`在函数范围内的使用是执行的最后一行。函数运行时，它后面的任何代码都**不会**执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-01T12:06:24.160

只需从属性中删除`#`值。`href`留空是有效的 HTML `href`。

```
<a href="" id="myBtn"><i class="icon-user"></i><span>Add user</span></a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-10T00:58:39.530

将此用于 Bootstrap + jQuery：

```
$(this).parent().parent().parent().removeClass("open") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-10T21:36:23.963

我有同样的问题，经过大量搜索后意识到这是我自己的错误。我的引导 js 文件链接不正确（完整性哈希不正确），因此没有加载。这导致下拉菜单在某些页面上不起作用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-08-19T06:52:31.370

我试过这种方式，它奏效了。示例（咖啡脚本）是这样的；

```
jQuery ->
  $('.your_mark ul.dropdown-menu li').click ->
    # Do what you want
    $(this.parentElement.parentElement).removeClass('open')
    return false 
```

1.  通过从 btn-group div 中删除 css class 'open' 手动关闭下拉菜单。
2.  返回 false 以避免在您的 url 中包含 # 。

# c++ - 如何获取元组元素的位置

> ID：15880756
> 
> 赞同：3
> 
> 时间：2013-04-08T13:45:09.627
> 
> 标签：c++, templates, tuples

例如，我有一个元组

```
std::tuple<int, int, int, int> a(2, 3, 1, 4); 
```

我想使用以下函数来获取其元素的位置。

```
int GetPosition(const std::tuple<int, int, int, int>& tp, int element); 
```

这里2的位置是0，3的位置是1，1的位置是3，4的位置是3。如何实现这个功能？一个愚蠢的方法是

```
int GetPosition(const std::tuple<int, int, int, int>& tp, int element)
{
    if (std::get<0>(tp) == element) return 0;
    if (std::get<1>(tp) == element) return 1;
    if (std::get<2>(tp) == element) return 2;
    ... // Write as more as an allowed max number of elements
} 
```

还有更好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T13:59:19.247

**更新：**

我最终想出了一种以更简单的方式实现这一点的方法，该方法也使用短路（因此执行较少的比较）。

给定一些机器：

```
namespace detail
{
    template<int I, int N, typename T, typename... Args>
    struct find_index
    {
        static int call(std::tuple<Args...> const& t, T&& val)
        {
            return (std::get<I>(t) == val) ? I :
                find_index<I + 1, N, T, Args...>::call(t, std::forward<T>(val));
        }
    };

    template<int N, typename T, typename... Args>
    struct find_index<N, N, T, Args...>
    {
        static int call(std::tuple<Args...> const& t, T&& val)
        {
            return (std::get<N>(t) == val) ? N : -1;
        }
    };
} 
```

客户将要调用的函数最终归结为这个简单的蹦床：

```
template<typename T, typename... Args>
int find_index(std::tuple<Args...> const& t, T&& val)
{
    return detail::find_index<sizeof...(Args), T, Args...>::
           call(t, std::forward<T>(val));
} 
```

最后，这是您在程序中使用它的方式：

```
#include <iostream>

int main()
{
    std::tuple<int, int, int, int> a(2, 3, 1, 4);
    std::cout << find_index(a, 1) << std::endl; // Prints 2
    std::cout << find_index(a, 2) << std::endl; // Prints 0
    std::cout << find_index(a, 5) << std::endl; // Prints -1 (not found)
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/4yc7Hy%243832)。

* * *

**编辑：**

如果要进行*反向*搜索，可以将上述机器和蹦床功能替换为以下版本：

```
#include <tuple>
#include <algorithm>

namespace detail
{
    template<int I, typename T, typename... Args>
    struct find_index
    {
        static int call(std::tuple<Args...> const& t, T&& val)
        {
            return (std::get<I - 1>(t) == val) ? I - 1 :
                find_index<I - 1, T, Args...>::call(t, std::forward<T>(val));
        }
    };

    template<typename T, typename... Args>
    struct find_index<0, T, Args...>
    {
        static int call(std::tuple<Args...> const& t, T&& val)
        {
            return (std::get<0>(t) == val) ? 0 : -1;
        }
    };
}

template<typename T, typename... Args>
int find_index(std::tuple<Args...> const& t, T&& val)
{
    return detail::find_index<0, sizeof...(Args) - 1, T, Args...>::
           call(t, std::forward<T>(val));
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/4yc7Hy%243829)。

* * *

**原始答案：**

这听起来不像是使用元组的典型方式，但如果你*真的*想这样做，那么这里有一种方法（**适用于任何大小的元组**）。

首先，一些机器（众所周知的*索引技巧*）：

```
template <int... Is>
struct index_list { };

namespace detail
{
    template <int MIN, int N, int... Is>
    struct range_builder;

    template <int MIN, int... Is>
    struct range_builder<MIN, MIN, Is...>
    {
        typedef index_list<Is...> type;
    };

    template <int MIN, int N, int... Is>
    struct range_builder : public range_builder<MIN, N - 1, N - 1, Is...>
    { };
}

template<int MIN, int MAX>
using index_range = typename detail::range_builder<MIN, MAX>::type; 
```

然后，几个重载的函数模板：

```
#include <tuple>
#include <algorithm>

template<typename T, typename... Args, int... Is>
int find_index(std::tuple<Args...> const& t, T&& val, index_list<Is...>)
{
    auto l = {(std::get<Is>(t) == val)...};
    auto i = std::find(begin(l), end(l), true);
    if (i == end(l)) { return -1; }
    else { return i - begin(l); }
}

template<typename T, typename... Args>
int find_index(std::tuple<Args...> const& t, T&& val)
{
    return find_index(t, std::forward<T>(val), 
                      index_range<0, sizeof...(Args)>());
} 
```

以下是您将如何使用它：

```
#include <iostream>

int main()
{
    std::tuple<int, int, int, int> a(2, 3, 1, 4);
    std::cout << find_index(a, 1) << std::endl; // Prints 2
    std::cout << find_index(a, 2) << std::endl; // Prints 0
    std::cout << find_index(a, 5) << std::endl; // Prints -1 (not found)
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/4yc7Hy%243828)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:06:50.277

比接受的答案略短，向前搜索而不是向后搜索（因此它找到第一个匹配项，而不是最后一个匹配项），并使用`constexpr`：

```
#include <tuple>

template<std::size_t I, typename Tu>
    using in_range = std::integral_constant<bool, (I < std::tuple_size<Tu>::value)>;

template<std::size_t I1, typename Tu, typename Tv>
constexpr int chk_index(const Tu& t, Tv v, std::false_type)
{
    return -1;
}

template<std::size_t I1, typename Tu, typename Tv>
constexpr int chk_index(const Tu& t, Tv v, std::true_type)
{
    return std::get<I1>(t) == v ? I1 : chk_index<I1+1>(t, v, in_range<I1+1, Tu>());
}

template<typename Tu, typename Tv>
constexpr int GetPosition(const Tu& t, Tv v)
{
    return chk_index<0>(t, v, in_range<0, Tu>());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:00:49.900

根据评论修改。通过修改取消的答案的简单方法

```
template<class Tuple>
struct TupleHelper
{
    TupleHelper(Tuple& _tp) : tp(_tp) {}

    Tuple& tp;

    template<int N>
    int GetPosition(int element)
    {
        if (std::get<N>(tp) == element) return N;
        return GetPosition<N+1>(element);
    }     

    template<>
    int GetPosition<std::tuple_size<Tuple>::value>(int element)
    {
        return -1;
    }  
}; 
```

用它作为

```
TupleHelper<MyTupleTy>(myTuple).GetPosition<0>(element); 
```

这似乎工作。

# python - Python 不可散列类型：'OrderedDict'

> ID：15880765
> 
> 赞同：5
> 
> 时间：2013-04-08T13:45:44.943
> 
> 标签：python, exception, dictionary

我对以下概念并不陌生：

```
TypeError: unhashable type: 'OrderedDict' 
```

但我无法理解以下代码行如何产生这样的堆栈跟踪。

```
89:     @staticmethod
90:     def diff(var1, var2, path=[], level=0, curpath=[]):
...
101:        elif isinstance(var1, list) and isinstance(var2, list):
102:            l1s = set(var1)
103:            l2s = set(var2)
104:            retlist = []

  File "myFile.py", line 102, in diff
    l1s = set(var1)
TypeError: unhashable type: 'OrderedDict' 
```

line `102`, 在上面的代码中如何抛出这样的异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T13:52:50.933

一些数据结构（尤其是`dict`s 和`set`s）需要它们包含的对象（字典中的键，集合中的项）来实现`__hash__()`魔术方法，以便调用`hash(obj)`返回一个值。

这是优化结构所必需的，并且与不变性一起有助于保证所包含对象的唯一性。

在您的情况下，`var1`包含一些不可*散列*的对象（它不实现`hash()`）。这个对象是一个`OrderedDict`，它是一个可变对象，并且在设计上是不可散列的。

作为另一个设计可变且不可散列的对象类型的示例，请考虑`list`以下示例：

```
>>> L = [1, 2, 3]
>>> set([L])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'list'
>>> hash(L)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'list' 
```

如果您使用`set()`以确保唯一性，那么您必须采取其他方式，尽管您的问题尚不清楚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T13:49:44.323

python中的dict（包括OrderedDict）是可变容器。

如果一个 dict 被散列，只要你改变了 dict 的内容，它的散列值就会改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:49:12.863

python中的集合是基于散列的。OrderedDicts 不可散列。

# android - 通过在运行时截断/添加字节来保护数据

> ID：15880768
> 
> 赞同：0
> 
> 时间：2013-04-08T13:45:58.087
> 
> 标签：android, security, pdf, encryption, truncate

我确实有一个 android 应用程序，可以下载 PDF 文件以在杂志应用程序中显示。

为了保护数据，我已经设置了用户密码。我还考虑在存储在设备上时删除每个文件的最后 100 个字节，并在运行时添加它们。

这至少会使 PDF 不再可读。

有没有人建议如何通过适度的努力来实现这一目标，同时保持较低的计算开销？

感谢您在这里的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:31:01.580

加密似乎是最适合您的方法。

[https://developer.android.com/reference/javax/crypto/package-summary.html](https://developer.android.com/reference/javax/crypto/package-summary.html)

[如何在Android中加密和解密文件？](https://stackoverflow.com/questions/4275311/how-to-encrypt-and-decrypt-file-in-android)

# emacs - Emacs 抱怨功能无效？

> ID：15880783
> 
> 赞同：5
> 
> 时间：2013-04-08T13:46:42.313
> 
> 标签：emacs, elisp

当我在缓冲区上按下`C-c c`以下代码时，Emacs 抱怨`Invalid function: (select-current-line)`. 为什么？

```
(defun select-current-line ()
  "Select the current line"
  (interactive)
  (end-of-line) ; move to end of line
  (set-mark (line-beginning-position)))

(defun my-isend ()
  (interactive)

  (if (and transient-mark-mode mark-active)
      (isend-send)

    ((select-current-line)
     (isend-send)))
)

(global-set-key (kbd "C-c c") 'my-isend) 
```

这并不重要，但对于那些感兴趣的人，这里定义了[isend-send 。](https://github.com/emacsmirror/isend-mode)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T13:53:16.437

您缺少将`progn`语句组合在一起的表单：

```
(defun my-isend ()
  (interactive)

  (if (and transient-mark-mode mark-active)
      (isend-send)

    (progn
      (select-current-line)
      (isend-send)))) 
```

* * *

没有`progn`形式，`((select-current-line) (isend-send))`被解释为`(select-current-line)`应用于`isend-send`不带参数调用结果的函数。但`(select-current-line)`不是有效的函数名。在其他 LISP 中，如果 的返回值本身是一个函数，那么这种构造可能是有效的`select-current-line`，然后将应用于`(isend-send)`. 但这不是 Emacs LISP 的情况，无论如何这不会做你想要实现的......

# php - 在反馈表中使用令牌

> ID：15880784
> 
> 赞同：0
> 
> 时间：2013-04-08T13:46:44.440
> 
> 标签：php, forms, security

去检查[http://phpsec.org/projects/guide/2.html](http://phpsec.org/projects/guide/2.html)以使反馈表更安全。以我非常有限的技能想出了这样的事情：

假设有 form.php（表单）和 form-processing.php（用于发送它的脚本）。在 form.php 的开头：

```
<?php
session_start();
$token = md5(uniqid(rand(), true));
$_SESSION['token'] = $token; 
```

...并且在表单本身的开头将令牌回显到隐藏字段中：

```
<form method="POST">    
<input type="hidden" name="token" value="<?php echo $token; ?>" /> 
```

在 form-processing.php 的开头：

```
<?php

session_start();

if (isset($_SESSION['token']) && $_POST['token'] == $_SESSION['token'])
    {
    }
else {
  die( "Invalid token" );
} 
```

这会安全地完成这项工作吗？

# ios - 如何在 iOS 中获取 MKPolygon 的区域

> ID：15880785
> 
> 赞同：1
> 
> 时间：2013-04-08T13:46:55.303
> 
> 标签：ios, overlay, mapkit, polygon

如何在 iOS 中获得 MKPolygon 或 MKOverlay 的面积？

我已经能够将多边形分解成三角形并做一些数学运算来获得该区域。但是，不适用于不规则多边形。

我正在考虑在这里做类似“更复杂的案例”的事情：http: [//www.mathopenref.com/coordpolygonarea2.html](http://www.mathopenref.com/coordpolygonarea2.html)

我希望 MapKit 有一个更简单的解决方案。

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-29T15:53:54.897

[![球体区域 1 上的多边形](https://i.stack.imgur.com/vift6.png)](https://i.stack.imgur.com/vift6.png) [![球体区域 2 上的多边形](https://i.stack.imgur.com/M0K8n.png)](https://i.stack.imgur.com/M0K8n.png)

这是我正在使用的实现。

```
#define kEarthRadius 6378137
@implementation MKPolygon (AreaCalculation)

- (double) area {
  double area = 0;
  NSMutableArray *coords = [[self coordinates] mutableCopy];
  [coords addObject:[coords firstObject]];

  if (coords.count > 2) {
    CLLocationCoordinate2D p1, p2;
    for (int i = 0; i < coords.count - 1; i++) {
      p1 = [coords[i] MKCoordinateValue];
      p2 = [coords[i + 1] MKCoordinateValue];
      area += degreesToRadians(p2.longitude - p1.longitude) * (2 + sinf(degreesToRadians(p1.latitude)) + sinf(degreesToRadians(p2.latitude)));
    }

    area = - (area * kEarthRadius * kEarthRadius / 2);
  }
  return area;
}
- (NSArray *)coordinates {
  NSMutableArray *points = [NSMutableArray arrayWithCapacity:self.pointCount];
  for (int i = 0; i < self.pointCount; i++) {
    MKMapPoint *point = &self.points[i];
    [points addObject:[NSValue valueWithMKCoordinate:MKCoordinateForMapPoint(* point)]];
  }
  return points.copy;
}

double degreesToRadians(double radius) {
  return radius * M_PI / 180;
} 
```

在斯威夫特 3 中：

```
let kEarthRadius = 6378137.0

extension MKPolygon {
    func degreesToRadians(_ radius: Double) -> Double {
        return radius * .pi / 180.0
    }

    func area() -> Double {
        var area: Double = 0

        var coords = self.coordinates()
        coords.append(coords.first!)

        if (coords.count > 2) {
            var p1: CLLocationCoordinate2D, p2: CLLocationCoordinate2D
            for i in 0..<coords.count-1 {
                p1 = coords[i]
                p2 = coords[i+1]
                area += degreesToRadians(p2.longitude - p1.longitude) * (2 + sin(degreesToRadians(p1.latitude)) + sin(degreesToRadians(p2.latitude)))
            }
            area = abs(area * kEarthRadius * kEarthRadius / 2)
        }

        return area
    }

    func coordinates() -> [CLLocationCoordinate2D] {
        var points: [CLLocationCoordinate2D] = []
        for i in 0..<self.pointCount {
            let point = self.points()[i]
            points.append(MKCoordinateForMapPoint(point))
        }
        return Array(points)
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T20:21:46.663

我通过对多边形中的点进行一点循环来解决这个问题。对于每 3 个点，我检查该三角形的中心是否在多边形中。如果是继续，如果不是，则连接多边形，使多边形中没有倾角。完成后，获取多边形中的三角形并进行数学运算以获取面积。然后减去删除的三角形。

希望这可以帮助某人。

# jenkins - 在 openshift jenkins 实例上远程构建

> ID：15880786
> 
> 赞同：0
> 
> 时间：2013-04-08T13:46:57.867
> 
> 标签：jenkins, bitbucket, openshift

我正在尝试使用令牌调用远程构建。它给了我 401。根据我的理解，它不需要令牌。

```
Jigars-MacBook-Pro:portal jigarshah$ 
curl https://jigarshah:<TOKEN API>@jenkins-jigarshah.rhcloud.com/job/MyJob/build?token=<TOKEN>

<html><head><title>Error 401</title></head><body bgcolor="#ffffff"><h1>Status Code: 401</h1>Exception: Bad credentials<br>Stacktrace: (none)
<br><hr size="1" width="90%"><i>Generated by Winstone Servlet Engine v0.9.10 at Mon Apr 08 09:27:59 EDT 2013</i></body></html> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:35:12.210

您忘记了您的用户名和密码。

看这个：[链接](https://wiki.jenkins-ci.org/display/JENKINS/Authenticating+scripted+clients)和[链接](http://wiki.cloudbees.com/bin/view/DEV/Accessing+Jenkins+using+HTTP+Basic+Authentication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:53:43.373

我找到了解决方案。我不必提供密码。只需 API TOKEN 就足够了。是的，用户名必须来自詹金斯。转到/我/配置

有一个按钮显示“显示 api 令牌”。使用它来触发构建...

卷曲 https://:@/job/MyJob/build?token=

# jquery - 具有特定值的 jquery find() 复选框

> ID：15880789
> 
> 赞同：1
> 
> 时间：2013-04-08T13:47:01.590
> 
> 标签：jquery, find

我有一个复选框列表，如下所示，包含在一个 div 中。

```
<div>
<input type="checkbox" value="1" class="checkbox"/><br>
<input type="checkbox" value="2" class="checkbox"/><br>
<input type="checkbox" value="3" class="checkbox"/>
</div>
<select class="value">
<option value="1">One</option>
<option value="2">Two</option>
<option value="3">Three</option>
</select> 
```

使用 jquery，我想更改选择选项，选中值为 1 的复选框。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T13:49:54.780

尝试：

```
$(".value").change(function() {
    $('input[type=checkbox][value=1]').prop('checked', true);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:52:11.543

```
// Call the select list on change event 
$(".value").change(function() {

    // Reset all the check-boxes ckecked
    $('input:checkbox').prop('checked', false);

    // Set the chekbox with the same value as select option
    $('input:checkbox[value="' + $(this).val() + '"]').prop('checked', true);
}); 
```

[**在这里演示**](http://jsfiddle.net/wadwA/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:51:47.617

试试下面的代码

```
if($("Select.value").val()==1){

$("input[type='checkbox'][value=1]").attr('checked','checked');

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T13:50:20.407

你可以尝试类似的东西

```
$(".value").change(function() {
   $(":checkbox[value="+this.value+"]").prop('checked',true)    
}); 
```

# ios - 无法释放变量 ios

> ID：15880791
> 
> 赞同：0
> 
> 时间：2013-04-08T13:47:07.280
> 
> 标签：ios, objective-c, memory-management

我的方法是

```
-(void)readAppFile
{
    NSString *plistPath = [self getDataFileDestinationPath];
    NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
    NSString *errorDesc = nil;
    NSPropertyListFormat format;
    NSMutableDictionary *temp = (NSMutableDictionary *) [NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc];
    if (!temp) {
        NSLog(@"Error reading plist: %@, format: %d", errorDesc, format);
    }
    items = [[temp objectForKey:@"Items"] mutableCopy];
    NSLog(@"temp %lu", (unsigned long)[temp retainCount]);
    [temp release];
} 
```

当我添加`[temp release];`- 但出了点问题并且我的方法崩溃了。不明白出了什么问题..正如我从内存泄漏工具中看到的那样 - 我需要释放这个变量..有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:49:51.403

`[NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc];`方法返回自动释放的对象。并且自动释放池再次发送释放消息。

查看此链接，了解如何使用自动释放池[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:58:32.240

查看您的代码，您应该发布`items`而不是发布`temp`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:50:19.303

这返回了一个**自动**发布的id，您将其类型转换为 NSMutableDictionary。

```
NSMutableDictionary *temp = (NSMutableDictionary *) [NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc]; 
```

然后你再次发布它`[temp release];`

# jquery - IE8 / jQuery - 淡入不显示淡入父边界之外的绝对定位子元素

> ID：15880796
> 
> 赞同：0
> 
> 时间：2013-04-08T13:47:15.417
> 
> 标签：jquery, internet-explorer-8

这几天我一直在努力解决这个问题，我放弃了。

我有一个 div，其中包含一个 .hover 目标，以及一个在该目标悬停后显示的 div。该子 div 由一个跨度和一个段落组成，跨度绝对定位为部分位于该 div 之外。

在现代浏览器中，这一切都很好地淡入，但在 IE <8 中，跨度（红色背景）没有正确淡入，只显示父 div 内的部分，只有在动画完成后，其余部分才会出现在外面。

我尝试过使用不同的 jQuery 选择器，编写自定义淡入淡出函数来删除过滤器，将父元素绝对定位在屏幕外以试图强制浏览器不使用 DirectX，等等。

JSBin 显示问题（仅限 IE8 或更低版本）：http: [//jsbin.com/emegas/3/edit](http://jsbin.com/emegas/3/edit)

HTML：

```
<div class="tooltip">
  <span class="pointer">hover here</span>
  <div class="tip">
    <span class="tipPointer"></span>
    <p>asdasdas.</p>
  </div>
</div> 
```

jQuery：

```
$('.pointer').hover(function(){
    $(this).next('.tooltip .tip').stop(true, true).fadeIn(1000);
}, function(){
    $(this).next('.tooltip .tip').stop(true, true).hide();
}); 
```

如果可能的话，我怎样才能让跨度与父母同时淡入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:10:18.290

在 IE7 和 IE8 中运行良好。我能想到的唯一问题是您的 IE8 版本存在一些溢出错误。尝试添加溢出：可见；到 CSS 中的两个元素。

# sql-server - SQL Server 的存储过程

> ID：15880798
> 
> 赞同：0
> 
> 时间：2013-04-08T13:47:22.983
> 
> 标签：sql-server, tsql, stored-procedures

我已经编写了这个存储过程并且它执行但它不会更新客户。问题是：创建一个名为 prc_cus_balance_update 的过程，它将发票编号作为参数并更新客户余额。

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE PRC_CUS_BALANCE_UPDATE3 

    @INV_NUMBER INT 

AS

BEGIN

    DECLARE @CUS_CODE INT

    SELECT @CUS_CODE=CUS_CODE
    FROM INVOICE
    WHERE @INV_NUMBER=INV_NUMBER

    UPDATE CUSTOMER
    SET CUS_BALANCE=CUS_BALANCE + 
        (SELECT INV_TOTAL FROM INVOICE WHERE @INV_NUMBER=INV_NUMBER)
    WHERE @CUS_CODE=CUS_CODE

END
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:20:51.277

Try putting some better bulletproofing in. Multiple rows, null values, and the like, can all cause problems with how you currently have it. Here's a stab at it, without me knowing the specifics of your data model (it may not be appropriate to sum together the totals from invoices, I'm just saying you could have multiple rows and need to deal with that).

```
CREATE PROCEDURE PRC_CUS_BALANCE_UPDATE3 
    @INV_NUMBER INT 
AS
BEGIN

    DECLARE @CUS_CODE INT

    SELECT 
        TOP 1 @CUS_CODE = CUS_CODE
    FROM 
        INVOICE
    WHERE 
        INV_NUMBER=@INV_NUMBER

    IF @CUS_CODE IS NOT NULL
    BEGIN
        UPDATE 
            CUSTOMER
        SET 
            CUS_BALANCE = ISNULL(CUS_BALANCE, 0.0) + 
            ISNULL(
                (SELECT 
                    SUM(INV_TOTAL) 
                FROM 
                    INVOICE 
                WHERE 
                    @INV_NUMBER = INV_NUMBER), 
            0.0)
        WHERE 
            CUS_CODE = @CUS_CODE    
    END
END
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:24:16.117

在开发过程中，我会添加一些“额外内容”来弄清楚发生了什么。

伪代码如下。

您要确保找到匹配的行。并且您要确保至少有一行被实际更新。

我并不是说下面的代码是“生产就绪”。但会显示概念。

```
CREATE PROCEDURE PRC_CUS_BALANCE_UPDATE3 

    @INV_NUMBER INT 

AS

BEGIN

    DECLARE @CUS_CODE INT
    DECLARE @MYROWCOUNT INT

    SELECT @CUS_CODE=CUS_CODE
    FROM INVOICE
    WHERE @INV_NUMBER=INV_NUMBER

    if(Not(@CUS_CODE IS NULL))
        BEGIN

        SET NOCOUNT OFF

        UPDATE CUSTOMER
        SET CUS_BALANCE=CUS_BALANCE + 
            (SELECT INV_TOTAL FROM INVOICE WHERE @INV_NUMBER=INV_NUMBER)
        WHERE @CUS_CODE=CUS_CODE

        select @MYROWCOUNT = @@ROWCOUNT

        if(@MYROWCOUNT <=0)
            BEGIN
                print 'No row updated.    :<'
            END

        SET NOCOUNT OFF

        END
    ELSE
        BEGIN
            print "@CUS_CODE match not found."
        END

END
GO 
```

# sharepoint - 格式化日期（Sharepoint 设计器）

> ID：15880799
> 
> 赞同：2
> 
> 时间：2013-04-08T13:47:25.597
> 
> 标签：sharepoint, xpath

我正在尝试在 Sharepoint Designer 中正确格式化日期。

这行代码确实有效，但我得到了虚假的结果，因为我的日期是英国格式的。

```
<xsl:value-of
      select=
"number(ddwrt:DateTimeTick(
            ddwrt:GenDisplayName(string(FormatDate(@DateSent,2057,1)))))-
 number(ddwrt:DateTimeTick(
            ddwrt:GenDisplayName(string(FormatDate(ddwrt:Today(),2057,1)))))"
/> 
```

我得到的错误是：

```
FormatDate is not a valid XSLT or XPath function. 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:22:20.947

XPath 标准中没有函数`FormatDate(...)`。Sharepoint Designer 有一个位于`ddwrt:`您用于某些其他功能的命名空间中。要调用它，请添加命名空间。

```
number(ddwrt:DateTimeTick(ddwrt:GenDisplayName(string(ddwrt:FormatDate(string(@DateSent,2057,1))))))
-
number(ddwrt:DateTimeTick(ddwrt:GenDisplayName(string(ddwrt:FormatDate(ddwrt:Today(),2057,1)))))" 
```

# java - Java，阻塞队列

> ID：15880800
> 
> 赞同：0
> 
> 时间：2013-04-08T13:47:27.063
> 
> 标签：java, multithreading, generics, collections, blockingqueue

我一直在阅读有关阻塞队列的内容，并且出现了某些问题。我读过的所有例子都只展示了只有一个消费者和一个生产者线程的情况。问题是：假设我们有 1 个生产者和 3 个消费者，并且在当前时刻，所有消费者都被调用了 take() 方法，但是队列是空的，所以他们都在等待出现第一个元素。哪个消费者线程会在第一个元素出现时获取它？首先调用 take() 的消费者线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:49:13.130

不知道你能不能说出来。真正的问题是：为什么你需要知道？所有的听众都应该是等价的。由哪一个处理请求并不重要。如果您必须知道，那么您设计和实现它是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:51:58.773

检查 `ArrayBlockingQueue(int capacity, boolean fair)` fair 是否为真，然后按 FIFO 顺序处理在插入或删除时阻塞的线程的队列访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:49:24.943

> 哪个消费者线程会在第一个元素出现时获取它？首先调用 take() 的消费者线程？

这与阻塞队列实现以及有问题的 JVM 相关，但简短的回答很可能是肯定的。每个线程都将等待一个条件，当条件发出信号时，等待队列中的第一个线程将被唤醒。

也就是说，您不应该依赖此功能，因为它非常依赖于相关阻塞队列的细节以及 JVM 和操作系统版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T14:21:45.710

我同意 duffymo 的观点，让多个线程无限期地等待一些新元素在队列中弹出的想法听起来结构不太好。

此外，如果您需要知道哪个消费者删除了元素，这让我认为消费者实际上在做不同的事情，根据消费者执行拍摄的顺序，在不同的场景下赋予不同的输出生命（ ）。如果是这种情况，您可能希望为不同的线程设置不同的队列。

如果您不打算更改代码，那么让线程定期执行轮询怎么样？

# c++ - 关于 C/C++ 解引用运算符

> ID：15880801
> 
> 赞同：0
> 
> 时间：2013-04-08T13:47:28.430
> 
> 标签：c++, c, pointers

我对这个问题有点怀疑：

如果我有：

```
int a = 11;
int *b = &a; 
```

当我做：

```
&*b 
```

我得到了`a`指向的地址，`b`所以我的问题是：

解引用运算符是否返回指向的变量或该变量的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T13:49:16.160

> 解引用运算符是否返回指向的变量或该变量的值？

它返回一个*左值*，该左值引用指向的对象（即以您自己的术语*指向的变量）。*如果您在需要*右值*的上下文中使用它，则将应用*左值到右值的*转换（即将从*变量*中读取该变量的值）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T13:49:42.877

```
b == &a 
```

所以

```
*b == a 
```

所以

```
&*b == &(*b) == &(a) 
```

# javascript - jQuery函数用链接标签替换匹配的标签/关键字

> ID：15880802
> 
> 赞同：0
> 
> 时间：2013-04-08T13:47:30.910
> 
> 标签：javascript, jquery, asp.net

我需要一个功能，我必须突出/替换文章正文的匹配标签/关键字，并将这些匹配的标签/关键字变成如下所示的链接

`en/search.aspx?language=en-US&issue=1&pageID=2&search=Something`

我正在使用的以下代码可以正常工作，但如果它与关键字匹配，它甚至会更改 HTML。

下面代码的逻辑很简单，我将数组从后面的代码传递给 jquery 函数，格式如下`"[ 'one', 'two','three','US','UK' ]"`

在这种情况下，它也会更改上面的链接，因为它`US`匹配数组元素之一，同时遍历内容 N 次

我将不胜感激这方面的帮助，以便该功能仅更改单词而不是单词的任何匹配部分，并在执行相同操作时忽略 HTML 标记

部分代码采用 ASP.Net 格式，例如 <%= _pPID %>;

```
function HighlightKeywords(keywords)
{        
    var el = $("#article-detail-desc");
    var language = "<%= _planguage %>";
    var pid = <%= _pPID %>;
    var issueID = <%= _pIssue %>; 

    // array format = " 'one', 'two','three','US','UK' ";

    $(keywords).each(function()
    {
        var pattern = new RegExp("("+this+")", ["gi"]);
         var rs = "<a class='ad-keyword-selected' href='en/search.aspx?Language="+language+"&PageId="+pid+"&issue="+issueID+"&search=$1' title='Seach website for:  $1'><span style='color:#990044; tex-decoration:none;'>$1</span></a>";
        el.html(el.html().replace(pattern, rs));
    });
}   

HighlightKeywords([<%= _pKeywords %>]);

<div id="article-detail-desc">

all the text related to article will be show displayed inside this div and any matching words will be replaced by the link <a></a> 
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:55:29.427

您正在传递一个字符串，并且该函数与数组一起工作。

尝试使用：

```
// array format = ['one', 'two','three','US','UK']; 
```

代替

```
// array format = " 'one', 'two','three','US','UK' "; 
```

# html - 通过 PHP 添加内容时移动 div

> ID：15880804
> 
> 赞同：0
> 
> 时间：2013-04-08T13:47:39.887
> 
> 标签：html, css

在我的网站中有多个博客文章，用户可以在这些博客文章的底部添加评论。当用户添加评论时，评论下方的内容不会向下移动以适应它，因此评论被放置在其他内容之上。我该如何解决这个问题？

代码示例思想：

```
<div class=blogPost>
  <article>
    <p>Blog Entry</p>
    <div id="commentsHolder">
    </div>
  </article>
  <div class="commentForm">
    <?php showing form if user is logged in ?>
  </div>
</div>
<div class=blogPost>
  <article>
    <p>Blog Entry</p>
    <div id="commentsHolder">
    </div>
  </article>
  <div class="commentForm">
    <?php showing form if user is logged in ?>
  </div>
</div>
...etc... 
```

CSS：

```
.blogPost {
  position: relative;
  height: 730px;
  width: 950px;
  border: 1px solid;
  border-color: #A62121;
  border-radius: 25px;
  padding: 5px;
} 
```

添加评论后，`commentsHolder`我需要将页面的其余部分向下移动以容纳新评论。如果您需要我拥有的任何特定代码，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:50:40.050

尝试更换

```
height: 730px; 
```

和

```
min-height: 730px; 
```

在您的 CSS 规则中。它将`.blogPost`随着内容的添加而缩放。它假设`#commentsHolder`也是相对定位的。

您也不想添加具有重复`id`属性 (commentsHolder) 的元素。

# css - 用于打印和 PDF 的单独样式表？

> ID：15880812
> 
> 赞同：0
> 
> 时间：2013-04-08T13:48:02.817
> 
> 标签：css, pdf, printing, media-queries

使用[CSS 媒体查询](http://www.w3.org/TR/CSS2/media.html)打印样式表是使网站更易于打印的好方法：

```
p { color: grey; }

@media print {
    p { color: black; }
} 
```

对于一个项目，我们发现从网页创建 PDF 文件以发送给客户非常有效（比从头开始更好）。

**出于 PDF 的目的**，我们应用了一些简单的 CSS 规则，`@media print`以使该格式的网页更加友好——删除导航、某些页脚元素等。

（有些人可能想在以后下载和打印 PDF，这很好。每个页面上都会有一个链接来访问我们创建的 PDF。）

但是，**对于普通大众的打印需求**，似乎建议创建没有太多格式的样式表：去除背景、增加对比度、优化字体大小等等。

我们还没有这样做。**是否可以有一组以上的`print`规则——一个在 PDF 中应用，另一个在打印到打印机时应用？**或者如果没有，有什么解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:03:16.137

当最终用户决定打印时，如果他们的机器上已经安装了某种类型的 PDF 软件，他们应该可以选择打印为 PDF。让您为他们确定这一点，并了解它在他们的机器上的配置方式以及他们正在使用的软件公司和版本，这可能不是您从 CSS 角度确定的最佳主意。我个人会简单地将您的打印样式表作为这两种途径的主要来源。

> 有些人会想要打印这些 PDF，这很好......

没错，如果他们真的想要，他们应该已经知道他们的机器上已经安装了一个 PDF 软件应用程序。当他们进入打印预览窗口时，让他们选择打印方式。但是您也许可以营销/品牌一个关于如何打印到 PDF 以及他们可以在哪里获得免费 PDF 软件应用程序下载的创意帮助指南。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:48:02.817

如果浏览器打印到物理打印机或 PDF 格式，我还没有找到通过 CSS 指定的方法。（除了各种浏览器，它还必须兼容多种操作系统。）

我提出了两种解决方案：

1.  有两个`print`样式表，在创建 PDF 时，包括 PDFing 一个，和/或为公众注释掉一个。（或者有一个样式表，并注释掉相关的代码行。）
2.  有两个版本的 HTML 文档，例如`index.php`和`pdf.html`，每个版本都有不同的`print`规则。在这种情况下，当您想要创建 PDF 时，您将访问后者，而前者将是默认设置。问题将是管理两组内容，因此除非您可以将其自动化，否则不建议这样做。

# java - 基于休眠 4.2 模式的多租户 + c3p0 连接池

> ID：15880816
> 
> 赞同：3
> 
> 时间：2013-04-08T13:48:23.163
> 
> 标签：java, hibernate, multi-tenant

我正在使用 hibernate 4.2.0 运行 java 应用程序（java 1.7），我需要实现基于模式的多租户设置。我用[这个](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/test/java/org/hibernate/test/multitenancy/schema/SchemaBasedMultiTenancyTest.java)例子来做到这一点。我的问题是我无法弄清楚如何创建连接提供程序。该示例使用：

```
    acmeProvider = ConnectionProviderBuilder.buildConnectionProvider("acme");
    jbossProvider = ConnectionProviderBuilder.buildConnectionProvider("jboss");

```

但**ConnectionProviderBuilder**是供测试使用的。

我尝试使用以下内容：

```
    C3P0ConnectionProvider connectionProvider = new C3P0ConnectionProvider()
    {
        公共布尔支持AggressiveRelease（）
        {
            返回允许激进释放；
        }
    };

    connectionProvider.configure(props);

```

这里的问题是 C3P0ConnectionProvider 有一个空的 serviceRegistry ，它用 NPE 粉碎了。

有人知道如何为每个租户创建 ConnectionProvider 吗？

谢谢，

罗南

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-01T07:44:36.260

尝试使用添加数据源属性的[建议：](https://forum.hibernate.org/viewtopic.php?p=2469076)`Properties`

> ```
> DatasourceConnectionProviderImpl cp = new DatasourceConnectionProviderImpl();
> cp.setDataSource(ds);
> Properties p = new Properties();
> // ...
> cp.configure(p); 
> ```

或使用[DriverManagerConnectionProviderImpl](https://www.tabnine.com/code/java/methods/org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl/configure)：

> ```
> DriverManagerConnectionProviderImpl connectionProvider = new DriverManagerConnectionProviderImpl() {
>    public boolean supportsAggressiveRelease() {
>      return allowAggressiveRelease;
>    }
>  };
>  connectionProvider.configure( props ); 
> ```

# firebird2.5 - 偏移量 163 处的无效请求 BLR

> ID：15880817
> 
> 赞同：1
> 
> 时间：2013-04-08T13:48:35.753
> 
> 标签：firebird2.5

我在 Firebird 数据库中有以下错误。2.5.2 版

```
invalid request BLR at offset 163 
function F_ENCODEDATE is not defined     
module name or entrypoint could not be found

Error while parsing procedure GETMONTHSBYYEAR's BLR 
```

直到上周一切正常。此 UDF 存在于磁盘上。我该如何调试这个问题？任何人都可以帮我解决这个问题。

PS：到目前为止我做了什么来解决：

*   备份/恢复 - 没有结果。（我认为在 BK/Restore 后任何结构问题都已解决）。
*   注释所有依赖项，删除 UDF 函数，重新创建 - 没有结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T06:57:47.537

潜在的问题可能是服务器无法访问他的 UDF dll（例如，由于权限或 UDF 限制配置`firebird.conf`），或者您安装了 64 位版本的 Firebird 并且您的 UDF 是 32 位（反之亦然），所以Firebird 无法加载 DLL。

# ruby-on-rails - 设计 - 在子域上登录

> ID：15880818
> 
> 赞同：5
> 
> 时间：2013-04-08T13:48:36.633
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2, subdomain

我在具有多个子域和多个模式的 Rails 应用程序中使用设计 gem。

每个子域都由控制器处理，如下所示`application_controller.rb`：

```
def load_subdomain
    @account = Account.find_by_subdomain!(request.subdomain)
end

def after_sign_in_path_for(resource)
    #admin login in domain
    if resource.is_a?(admin) 
      admin_path
    #user login in subdomain
    elsif resource.is_a?(user)
      subdomain_root_path
    else
      super
    end    
  end 
```

在路线.rb

```
 match '/' => 'subdomains#index', :constraints => { :subdomain => /.+/ }, :as => :subdomain_root

devise_for :users, :skip => [:sessions, :registrations]

  devise_scope :user do
    get '/login/user' => 'sesusers#new', :as => :new_session_user
    post '/signin/user' => 'sesusers#create', :as => :user_session
    delete '/logout/user' => 'sesusers#destroy', :as => :destroy_user_session
    post '/send/user' => 'passwordusers#create', :as => :passwordusers_create
    get '/change_password/user' => 'passwordusers#edit', :as => :passwordusers_edit
    put '/change/user' =>  'passwordusers#update', :as => :passwordusers_update
  end 
```

这导致每个子域有多个登录网址。

```
subdomain1.lvh.me:3000/login/user
subdomain2.lvh.me:3000/login/user
subdomain3.lvh.me:3000/login/user
...
...
etc 
```

在 sesusers_controller.rb 上

```
class SesusersController < Devise::SessionsController
  include Tenantable::Schema::Controller
  before_filter :load_subdomain

  def new
    super
  end

  def create
    logger.info "Logged in"
    super
  end

  def destroy
    logger.info "Logout success"
    super
  end
end 
```

当我尝试登录时，成功登录并重定向到 subdomain_root_path

```
Started POST "/signin/user" for 127.0.0.1 at 2013-04-08 20:36:04 +0700
Processing by SesusersController#create as HTML
  Parameters: {"utf8"=>"Γ£ô", "authenticity_token"=>"DJ/MJnHU5pHwxQQYDSvwyBsawmx
/9Ms7CXx3me0MBBE=", "user"=>{"email"=>"demouser@domain.com", "password"=>"
[FILTERED]", "remember_me"=>"0"}, "commit"=>"Login"}
  Account Load (2.0ms)  SELECT "public"."accounts".* FROM "public"."accounts" WH
ERE "public"."accounts"."subdomain" = 'subdomain1' LIMIT 1
Logged in
  User Load (2.0ms)  SELECT "users".* FROM "users" WHERE "users"."email" = 'demouser@domain.com' LIMIT 1
   (2.0ms)  BEGIN
   (53.0ms)  UPDATE "users" SET "last_sign_in_at" = '2013-04-08 12:55:28.631212'
, "current_sign_in_at" = '2013-04-08 13:36:04.615889', "sign_in_count" = 4 WHERE
 "users"."id" = 16
   (7.0ms)  COMMIT
Redirected to http://subdomain1.lvh.me:3000/
Completed 302 Found in 1589ms (ActiveRecord: 0.0ms)

Started GET "/" for 127.0.0.1 at 2013-04-08 20:36:06 +0700
Processing by SubdomainsController#index as HTML
  Account Load (2.0ms)  SELECT "public"."accounts".* FROM "public"."accounts" WH
ERE "public"."accounts"."subdomain" = 'subdomain1' LIMIT 1
  CACHE (0.0ms)  SELECT "public"."accounts".* FROM "public"."accounts" WHERE "pu
blic"."accounts"."subdomain" = 'subdomain1' LIMIT 1
   (30.0ms)  select sum(pg_total_relation_size(table_schema || '.' || table_name
)) from information_schema.tables where table_schema in ('subdomain') group by tab
le_schema
  Rendered subdomains/index.html.erb within layouts/subdomain (81.0ms)
Completed 200 OK in 170ms (Views: 130.0ms | ActiveRecord: 33.0ms) 
```

看，登录成功..查看子域

```
<div class="pull-right">
     <div class="btn-group">
         <% if user_signed_in? %>
            <%= link_to current_user.name, '#', { :class => 'btn btn-danger dropdown-toggle', 'data-toggle' => 'dropdown' } %>
                <ul class="dropdown-menu">
                  <li> <%= link_to "Dashboard", '#', 'style' =>"color:#fff" %></li>
                </ul>
         <% else %>
            <%= link_to ('<i class="icon-lock icon-white"></i>').html_safe + " Login" +(' <span class="caret"></span>').html_safe , '#', { :class => 'btn btn-danger dropdown-toggle', 'data-toggle' => 'dropdown' } %>
                <ul class="dropdown-menu">
                   <li><%= link_to "User", new_session_user_path, 'style' =>"color:#000" %></li>

                </ul>
         <% end %>
    </div>
</div> 
```

但查看子域`current_user.name`不显示，只出现登录按钮。

有人能帮我吗？

谢谢/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T16:35:56.317

为此，您只需要在子域之间共享用户会话，以便一个会话可以与多个子域继续。

您应该将`session_store.rb`初始化中的文件修改为，

```
 DemoApp::Application.config.session_store :cookie_store, key: '_jcrop_app_session', domain: ".maindomain.com" 
```

添加域将起作用并小心使用子域所需的最后一个前导“ **. ”（句点）。**

# asp.net - 通过查找控件分配文本

> ID：15880837
> 
> 赞同：0
> 
> 时间：2013-04-08T13:49:16.380
> 
> 标签：asp.net, findcontrol

我试图通过在上一页上找到一个控件（文本框）来将文本分配给一个标签。控件已准确找到，但无法分配文本。Intellisense 不显示“文本”属性。如何获取文本？

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            Control ctContent = this.PreviousPage.Master.FindControl("MainContent");
            Control ct = (TextBox) ctContent.FindControl("TextBox1");
            //TextBox t = (TextBox) Page.PreviousPage.Master.FindControl("TextBox1");
            Label1.Text = String.Format("This is what you wrote there: {0}",ct.??????);
        }     
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:55:28.317

反而

```
Control ct = (TextBox) ctContent.FindControl("TextBox1"); 
```

写吧

```
TextBox ct = (TextBox) ctContent.FindControl("TextBox1"); 
```

# c# - 如何将 RabbitMQ 库添加到 windows phone 8 项目？

> ID：15880839
> 
> 赞同：0
> 
> 时间：2013-04-08T13:49:25.513
> 
> 标签：c#, visual-studio, windows-phone-8, rabbitmq

我正在开发一个需要 RabbitMQ 库的 WP8 项目。

在哪里以及如何将这种库添加到 Windows Phone 的 Visual Studio Express 2012 中的 Windows Phone 8 项目中？我似乎无法在 VSE2012 中使用 NuGet 包管理器找到任何好的功能。

# java - 如何限制 JSpinner

> ID：15880844
> 
> 赞同：31
> 
> 时间：2013-04-08T13:49:32.520
> 
> 标签：java, swing, netbeans-7, jspinner

此应用程序的有效范围是 0 到 9，但似乎没有 NetBeans 7.0.1 JSpinner 最小值或最大值设置。是否有另一种方法可以将此 JSpinner 的范围限制为 0..9？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-08T14:06:49.370

在我的 Netbeans 7.3 中，我遵循了这些步骤：

第1步：

![摆动微调器微调器编号模型](https://i.stack.imgur.com/QrVrC.png)

第2步：

![摆动微调器微调器编号模型](https://i.stack.imgur.com/C5Nub.png)

第 3 步：

![摆动微调器微调器编号模型](https://i.stack.imgur.com/WuKZq.png)

最后一步 4：

![在此处输入图像描述](https://i.stack.imgur.com/vy8rD.png)

这对我行得通。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-08T13:54:45.973

```
// from 0 to 9, in 1.0 steps start value 5  
SpinnerNumberModel model1 = new SpinnerNumberModel(5.0, 0.0, 9.0, 1.0);  
JSpinner spin1 = new JSpinner(model1); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-08T13:55:34.857

您必须[使用](http://docs.oracle.com/javase/6/docs/api/javax/swing/SpinnerNumberModel.html#SpinnerNumberModel%28double,%20double,%20double,%20double%29).`SpinnerNumberModel`

片段：

```
JFrame frame = new JFrame("Limiting value for a JSpinner");
  SpinnerModel sm = new SpinnerNumberModel(0, 0, 9, 1); //default value,lower bound,upper bound,increment by
  JSpinner spinner = new JSpinner(sm); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T13:53:51.067

> 此应用程序的有效范围是 0 到 9，但似乎没有 NetBeans 7.0.1 JSpinner 最小值或最大值设置。是否有另一种方法可以将此 JSpinner 的范围限制为 0..9？

*   是的，但无需打扰插入代码和/或从 GUI Palette 生成的代码

*   添加[SpinnerListModel （最容易满足此要求和 Oracle 教程中的示例](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html#model)）或[编写自己的 SpinnerNumberModel](https://stackoverflow.com/a/8069904/714968)

# java - 我如何使用打算更改活动？

> ID：15880847
> 
> 赞同：-3
> 
> 时间：2013-04-08T13:49:35.467
> 
> 标签：java, android, android-intent

我做了一些按钮，我想在单击该 button1 时更改为另一个活动。但它不会找到我的 viewImave.class

我是

这是我的 MainActivity.java

```
 package com.example.image;   
   import android.os.Bundle;
   import android.view.View.*;
   import android.view.View;
   import android.view.View.OnClickListener;
   import android.widget.Button;
   import android.widget.Toast;
   import android.app.Activity;
   import android.content.Intent;
   import android.widget.ImageView;

   public class MainActivity extends Activity implements OnClickListener {
   Toast toast;
   @Override
   protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_main);
     final Button button1 = (Button)findViewById(R.id.button1);       
     button1.setText("take Image");
     button1.setOnClickListener(this); 
     final Button button2 = (Button)findViewById(R.id.button2);
     button2 = (Button)findViewById(R.id.button2);
     button2.setText("take Image2");
     button2.setOnClickListener(this);
     }

   @Override
     public void onClick (View v) {
         if(v.getId()==R.id.button1){
            Intent showimageIntent = new Intent(this, ViewImave.class);
                startActivity(showimageIntent);
             }

         else if(v.getId()==R.id.button2)
         { 
           toast = Toast.makeText(this, "onclickbutton2", Toast.LENGTH_SHORT);
           toast.show();
         }

         else
             {
           toast = Toast.makeText(this, "error", Toast.LENGTH_SHORT);
           toast.show();
         }
         }       
     } 
```

这是我的 ViewImave.java

```
 package com.example.image;
         import android.app.Activity;
         import android.graphics.Bitmap;
         import android.graphics.Canvas;
         import android.graphics.Color;
         import android.graphics.drawable.Drawable;
         import android.os.Bundle;
         import android.view.View;
         import android.widget.Button;
         import android.widget.ImageView;
         import android.widget.Toast;
         import android.app.Activity;
         import android.view.Menu;

       public class ViewImave extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {//
     setContentView(R.layout.showimage);
     Toast toast = Toast.makeText(this, "newimage oncreate", Toast.LENGTH_SHORT);
         toast.show();
     }
        } 
```

这是 showimage.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
   <Showimage
     android:layout_width="fill_parent"
 android:layout_height="fill_parent"
     android:id="@+id/koala" />

    </LinearLayout> 
```

这是activity_main.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="Button" 
 />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/button1"
    android:text="Button" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:53:30.817

尝试这个：

```
 @Override
 public void onClick (View v) {
     if(v.getId()==R.id.button1){
         Intent showimageIntent = new Intent(getApplicationContext(), ViewImave.class);
               startActivity(showimageIntent);
         } 
```

并在清单文件中添加 ViewImave 活动，如下所示：

```
<activity android:name="com.example.image.ViewImave" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:57:02.350

在 AndroidManifest 中必须是：

```
 <activity android:name="MainActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>

   <activity android:name=".ViewImave"/> 
```

在 MainActivity.java

```
public class MainActivity extends Activity implements View.OnClickListener {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final Button button1 = (Button)findViewById(R.id.button1);
    button1.setText("take Image");
    button1.setOnClickListener(this);
    final Button button2 = (Button)findViewById(R.id.button2);
    button2.setText("take Image2");
    button2.setOnClickListener(this);
}

@Override
public void onClick(View v) {
   switch (v.getId()){
       case R.id.button1:
       {
           Intent showImageIntent = new Intent(this, ViewImave.class);
           startActivity(showImageIntent);
           break;
       }
       case R.id.button2:
       {
           Toast toast = Toast.makeText(this, "onClickButton2", Toast.LENGTH_SHORT);
           toast.show();
           break;
       }
   }
}
} 
```

在 ViewImave.java 中

```
public class ViewImave extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.showimage);
        Toast toast = Toast.makeText(this, "new image on create", Toast.LENGTH_SHORT);
        toast.show();
    }
} 
```

核实。希望有帮助

# php - 上传个人资料图片未保存在个人资料文件夹中

> ID：15880853
> 
> 赞同：0
> 
> 时间：2013-04-08T13:49:49.680
> 
> 标签：php, image, function, user-profile

当用户上传图像时，有时图像会出现在配置文件文件夹中，有时不会。文件路径每次都会正确更新，因为我可以看到它在数据库中发生变化，但图像不会转到配置文件文件夹。谁能发现我做错了什么？

成员.php

```
if(isset($_FILES['profile']) === true) {
        if (empty($_FILES['profile'] ['name']) === true)  {
            echo 'Please choose a file!';
        }else{
            $allowed = array('jpg','jpeg','gif','png');

                $file_name = $_FILES['profile']['name'];
                $file_extn = explode('.', $file_name); 
                $file_extn = strtolower(end($file_extn));//converts string to lowercase
                $file_temp = $_FILES['profile']['tmp_name'];

                     if (in_array ($file_extn, $allowed) === true) {
                                //upload
                                change_image($MemberID,$file_temp,$file_extn);
                            }else {
                                echo 'Incorrect file type. Allowed: ';
                                echo implode(', ', $allowed);
                            }
                        }
                    } 
```

用户.php

```
function change_image ($MemberID, $file_temp, $file_extn) {
    $file_path = 'images/profile/' . substr(md5(time()), 0, 10) . '.' . $file_extn; //take current time, create md5 hash, 10 character figure 
    move_uploaded_file($file_temp, $file_path);
    print_r ($file_path);
    mysql_query("UPDATE `member` SET `profile` = '" . mysql_real_escape_string($file_path) . "' WHERE MemberID = " . $MemberID) ;//update database

} 
```

# java - 两个日期之间的差异和当前时间的百分比java

> ID：15880861
> 
> 赞同：3
> 
> 时间：2013-04-08T13:50:06.727
> 
> 标签：java, date, variable-assignment

我正在尝试使用线程创建计时机制，但在获取两个日期之间的时间差以及使用该差来获取当前剩余时间百分比时遇到了问题。这是我试图原型化的概念：

![http://i.stack.imgur.com/wrsrF.png](https://i.stack.imgur.com/ZSs7c.png)

这是我的实现：

```
long startMilisecs = System.currentTimeMillis();
long currentMilisecs;
long endDateMilisecs = getEndDate().getTime();
int diffMillisecs = ((int)(endDateMilisecs - startMilisecs) / 1000) / 60;
int currPerc; 
while (startMilisecs <= endDateMilisecs) 
{
    currentMilisecs = (int) System.currentTimeMillis();
    currPerc = ((int)currentMilisecs * 100) / diffMillisecs;
    System.out.println(" Current Percentage: " + currPerc);
} 
```

这段代码的问题是百分比不是从 0 开始，而是从 20% 到 40%。

你能告诉我这有什么问题吗？对于这个问题，我仅限于使用线程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T14:01:29.920

检查以下：

```
 public static int getPercentageLeft(Date start, Date end) {
        long now = System.currentTimeMillis();
        long s = start.getTime();
        long e = end.getTime();
        if (s >= e || now >= e) {
            return 0;
        }
        if (now <= s) {
            return 100;
        }
        return (int) ((e - now) * 100 / (e - s));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:55:37.730

你需要像这样减去开始时间

```
currPerc = ((currentMilisecs - startMilisecs) * 100) / diffMillisecs; 
```

得到正确的百分比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:58:39.523

问题出在 `System.currentTimeMillis();`. 取自 javadoc：

公共静态长 currentTimeMillis()

> 以毫秒为单位返回当前时间。请注意，虽然返回值的时间单位是毫秒，但值的粒度取决于底层操作系统，并且可能更大。例如，许多操作系统以几十毫秒为单位测量时间。
> 
> 有关“计算机时间”和协调世界时 (UTC) 之间可能出现的细微差异的讨论，请参阅类 Date 的描述。
> 
> 返回： 当前时间与 UTC 1970 年 1 月 1 日午夜之间的差异，以毫秒为单位。

因此，您当前的时间（以毫秒为单位）基于 1970 年 1 月 1 日 UTC，而不是您的开始日期。

您需要通过从 给出的值中减去开始时间来计算当前时间`System.currentTimeMillis();`。

我基本上在这里制定您的链接图像。也可以进行其他替代计算。

# android - Phonegap Android 应用程序以编程方式触发更新

> ID：15880866
> 
> 赞同：14
> 
> 时间：2013-04-08T13:50:18.183
> 
> 标签：android, cordova, auto-update

我正在构建一个托管在 Google Play 之外的服务器上的 Android 应用程序。我需要应用程序检查新版本并在应用程序启动时提示用户更新。

我建立了一个检查新版本的机制（应用程序检查服务器上的文件并比较版本），它运行良好。然后我提示用户更新，但如果用户选择继续更新，我无法触发下载和安装 apk。

我尝试简单地打开 apk url：

```
window.open(apkURL); 
```

其中 apkURL 是服务器上托管的 .apk 文件的完整 http 链接。

但它似乎没有做任何事情。

我一直在研究，但我没有找到关于如何做到这一点的答案。我发现了一些使用本机代码的建议，例如这篇文章[在 Android 上以编程方式安装应用程序，](https://stackoverflow.com/questions/4604239/install-application-programmatically-on-android)但我不知道如何在我的 Phonegap 应用程序中执行此操作。

```
Intent promptInstall = new Intent(Intent.ACTION_VIEW)
.setData(Uri.parse("file:///path/to/your.apk"))
.setType("application/vnd.android.package-archive");
startActivity(promptInstall); 
```

这是触发更新的正确方法吗？如何在 Phonegap 应用程序中完成这样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-10T17:18:34.743

我终于设法使用[File](http://docs.phonegap.com/en/2.6.0/cordova_file_file.md.html#File) api 和[WebIntent](https://github.com/phonegap/phonegap-plugins/tree/master/Android/WebIntent)插件实现了这一点。我会在这里发布解决方案，以防它帮助任何人。

该代码将 apk 从远程服务器下载到 sdcard 中的下载文件夹，然后触发安装。

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem){
fileSystem.root.getFile('download/filename.apk', {
    create: true, 
    exclusive: false
  }, function(fileEntry) {
    var localPath = fileEntry.fullPath,
    fileTransfer = new FileTransfer();        
    fileTransfer.download(apkURL, localPath, function(entry) {
        window.plugins.webintent.startActivity({
            action: window.plugins.webintent.ACTION_VIEW,
            url: 'file://' + entry.fullPath,
            type: 'application/vnd.android.package-archive'
            },
            function(){},
            function(e){
                alert('Error launching app update');
            }
        );                              

    }, function (error) {
        alert("Error downloading APK: " + error.code);
  });
  }, function(evt){
      alert("Error downloading apk: " + evt.target.error.code);                                               
  });
}, function(evt){
alert("Error preparing to download apk: " + evt.target.error.code);
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-09T09:55:37.727

对于使用 Cordova 3+ 的人来说，类似 Vero 的解决方案是可能的：

所以我们首先要下载 .apk 文件。为此，我们需要文件传输插件。您可以使用以下命令安装它：

```
phonegap local plugin add org.apache.cordova.file-transfer 
```

其次，我们需要另一个插件来启动 webintent。如果有更新，此 webintent 会提示用户。您可以使用以下命令安装它：

```
phonegap local plugin add https://github.com/Initsogar/cordova-webintent.git 
```

然后，您可以在代码中使用这 2 个函数来下载 .apk 并在应用程序有更新时提示用户：

```
/*
 * Uses the filetransfer plugin
 */
function downloadApkAndroid(data) {
    var fileURL = "cdvfile://localhost/persistent/CegekaMon.apk";

    var fileTransfer = new FileTransfer();
    var uri = encodeURI(data.android);

    fileTransfer.download(
        uri,
        fileURL,
        function (entry) {

            console.log("download complete: " + entry.fullPath);

            promptForUpdateAndroid(entry);
        },
        function (error) {
            console.log("download error source " + error.source);
            console.log("download error target " + error.target);
            console.log("upload error code" + error.code);
        },
        false,
        {

        }
    );
}
/*
 * Uses the borismus webintent plugin
 */
function promptForUpdateAndroid(entry) {
    window.plugins.webintent.startActivity({
            action: window.plugins.webintent.ACTION_VIEW,
            url: entry.toURL(),
            type: 'application/vnd.android.package-archive'
        },
        function () {
        },
        function () {
            alert('Failed to open URL via Android Intent.');
            console.log("Failed to open URL via Android Intent. URL: " + entry.fullPath);
        }
    );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:59:27.110

遗憾的是，如果不使用插件，您无法在 Phonegap Web 容器中访问这种原生功能，您所能做的就是将用户链接到 apk（例如通过打开原生浏览器）并让他安装它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-02T18:12:28.073

谢谢 Vero 的回答……它对我帮助很大……你的代码在上一版本的科尔多瓦文件插件中存在问题。 如果您使用文件插件版本 1.0.0 或更高版本**，请将 entry.fullPath 替换为 entry.toURL() 。**如果你使用 entry.fullPath ，它会抛出错误“解析包有问题”。

[来自 github 上的文件传输插件](https://github.com/apache/cordova-plugin-file-transfer)

> 这些路径以前在 File 插件返回的 FileEntry 和 DirectoryEntry 对象的 fullPath 属性中公开。但是，新版本的 File 插件不再向 JavaScript 公开这些路径。
> 
> 如果您要升级到 File 的新（1.0.0 或更新）版本，并且您之前一直使用 entry.fullPath 作为 download() 或 upload() 的参数，那么您需要更改代码以使用文件系统 URL反而。
> 
> FileEntry.toURL() 和 DirectoryEntry.toURL() 返回表单的文件系统 URL
> 
> cdvfile://localhost/persistent/path/to/file 可用于代替 download() 和 upload() 方法中的绝对文件路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-21T15:23:39.300

2018 年的工作示例

根据之前的评论，我实施了这个解决方案

它要求：

*   [文件插件](https://ionicframework.com/docs/native/file/)
*   [文件传输插件](https://ionicframework.com/docs/native/file-transfer/)
*   [网络意图插件](https://ionicframework.com/docs/native/web-intent/)

```
constructor(public navCtrl: NavController, private transfer: FileTransfer, private file: File, private webIntent: WebIntent) {
    const fileTransfer: FileTransferObject = this.transfer.create();
    const url = 'urlApkFile';//Modified this
    fileTransfer.download(url, this.file.externalDataDirectory + 'file.apk').then((entry) => 
    {
        webIntent.startActivity({
            action: (window).plugins.intentShim.ACTION_INSTALL_PACKAGE,
            url: entry.toURL(),
            type: 'application/vnd.android.package-archive'
        }).then(function () {
            //OK
        }, function (e) {
            alert('Error launching app update' + JSON.stringify(e));
        });
    }, (error) => {
        alert("downdload finish" + JSON.stringify(error));
    });
} 
```

# .net - 使用 SQL Server 2012 FileTable 中的 iis 7.5 提供静态内容

> ID：15880867
> 
> 赞同：1
> 
> 时间：2013-04-08T13:50:18.673
> 
> 标签：.net, sql, iis-7.5, sql-server-2012, filetable

我整天都在与这个问题作斗争，但没有成功。我有以下配置：

1.  Windows Server 2008 R2 标准版
2.  SQL Server 2012 企业版

我配置了该`FILESTREAM`功能并创建了一个文件表。我可以通过文件共享访问它并添加文件。我添加了一个指向文件共享的虚拟目录，并将其设置为作为 Windows 管理员和数据库管理员的用户进行连接。我还将此用户设置为用于匿名访问和网站的应用程序池。我可以通过 IIS 管理控制台访问文件共享中的所有文件夹和文件，但是每当我尝试在浏览器中浏览某些内容时，我都会收到 404 错误。

感谢您的任何想法。

# html - 如何在此处获取页眉，与页脚相同的样式和全宽

> ID：15880869
> 
> 赞同：0
> 
> 时间：2013-04-08T13:50:19.517
> 
> 标签：html, css, layout, bigcommerce

我现在正在玩 bigcommerce，我正在尝试为页眉重新创建页脚结构。你可以在这里看到：

[http://thespeedfactory.mybigcommerce.com/](http://thespeedfactory.mybigcommerce.com/)

如果你看一下页脚，它是全宽的，但内容是它的中心。

我希望标题完全相同，黑色带有粉红色/白色高光。

我尝试过在 bigcommerce 中移动结构，但我在让它完成并查看我想要的方式时遇到了大脑故障，尽管我知道它是基于容器和利润的。

任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:20:15.343

如果我理解正确，你想要：

*   标题 (#Header) 跨越页面的整个宽度
*   页脚 (#ContainerFooter) 跨越页面的整个宽度
*   页眉（和页脚具有相同的样式（颜色等）
*   内容区域（#Wrapper）保持固定宽度并以页面为中心

为此，请添加以下 css：

```
#Container {width:100%;}
#Header {width:100%; margin:0, auto;} 
```

上面的 css 允许标题（通过其父容器）拉伸浏览器页面的宽度。您会注意到#Wrapper 向左移动。添加这个：

```
#Wrapper {margin:auto;) 
```

这使#Wrapper 居中。

您的结构应该就位，现在您可以将颜色等添加到#Header 以使其与页脚匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:17:25.707

这是非常基本的 html/css。
只需创建一个 div，在其中放置一个容器并开始造型。

HTML：

```
<div id="header"> 
    <div id="container">
        <p>content</p> 
    </div>
</div> 
```

CSS：

```
#header {
    width: 100%;
    height:400px;
    background:black;
    position:absolute;
    border-top:3px solid #ff25a7;
}
#container {
    width:90%;
    height:300px;
    margin:0 auto;
}
#container p {
    font-size:30px;
    padding:10px;
    color: #ff25a7;
} 
```

这是一个帮助您入门的[jsFiddle 。](http://jsfiddle.net/sga2m/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T13:59:59.783

您可以尝试为页眉提供与页脚相同的类，然后（如果页脚的位置是`absolute bottom`），`position`将`absolute` `top:0px;`

# jquery - 带有 2 个选择器的 JQuery 插件

> ID：15880874
> 
> 赞同：0
> 
> 时间：2013-04-08T13:50:32.133
> 
> 标签：jquery

我创建了一个 JQuery 工具提示插件，可以通过两种方式使用：

*   工具提示内容是 HTML 锚的标题；

*   工具提示内容作为选项传递；

我想有另一个选择：

*   整个工具提示标记将是页面中的一个元素。

    让我举一个我正在寻找的例子：

    $("table td.Task a.Menu", "li div.Menu").Tooltip();

    所以“table td.Task”下的每个链接菜单都会触发一个工具提示。

    工具提示标记将是 a.Menu 的同一 LI 下的 div.Menu

如何将我的插件更改为也能够做到这一点？我目前的代码是：

```
(function ($) {

  $.fn.Tooltip = function (options) {

    var defaults = {
      content: "",
      class: "Tooltip",
      id: "Tooltip"
    };

    var options = $.extend({}, defaults, options);

    var tooltip;

    $(this).each(function () {

      var title = $(this).attr("title");
      if (title == undefined && options.content == "") return;

      $(this).mouseenter(function (e) {

        $(this).removeAttr("title")
        tooltip = "<div id='{id}' class='{class}'>{content}</div>"

        var content = options.content == "" ? title : options.content;
        tooltip = tootip.replace("{class}", options.class).replace("{id}", options.id).replace("{content}", content);

        $("body").append(tooltip);
        $("#" + options.id).fadeIn("fast");

      }), // Mouse Enter

      // Mouse Leave, Mouse Down and Mouse Move functions ...

    }
   } 
```

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:16:40.617

不会重写整个插件，但可以添加一个从页面返回内容的选项：

```
var defaults = {
      content: "",
      class: "Tooltip",
      id: "Tooltip",
      contentSource: 'title' /* "title" as default or "html" for in page*/
      htmlSource: function($el){
         /* write whatever traverse returns content wanted*/
         return  $el.siblings('div.foo').html();
      }
    }; 
```

现在，当您设置内容时，请检查哪个来源

```
/* should cache $(this) since using it numerous times*/
var $this=$(this)

var content;
if( options.contentSource !='title'){
   content=options.htmlSource($this);
}else{
  content= /* existing code*/
} 
```

用途：

```
$("table td.Task a.Menu", "li div.Menu").Tooltip({
      contentSource: 'html',
      htmlSource: function($el){            
          return  $el.parent().find('.someClass').html();
      }
}); 
```

# python - 搜索 3 个列表的列表以查找 2 个列表的等价性，并对列表 1 和 2 相等的第 3 个列表中的所有值进行平均（Python）

> ID：15880878
> 
> 赞同：1
> 
> 时间：2013-04-08T13:50:40.627
> 
> 标签：python, numpy

我有一个关于一个点的距离和角度的信号强度数据样本列表。数据样本如下所示：

```
0.5,0,-21
0.5,0,-23
1.0,0,-29
1.0,0,-30
0.5,45,-22
0.5,45,-23 
```

其中数据组织半径、角度、rssi（信号强度）。

如您所见，我对信号强度进行了多次测量，但是有些具有共同的半径，而另一些具有共同的角度。我试图找到一种简单的方法来遍历列表，找到所有具有共同半径和角度的行，平均 rssi 并将半径、角度和平均 rssi 附加到新列表中。

我试图这样做的方式是：

```
import numpy as np
import math

#create 3 lists
original_data=[] # list to import the original data to
interim_data=[] # list to group rows with common radii and angles
R=[] 
P=[]
Z=[]

#import data
original_data=np.genfromtxt('bot1.csv', delimiter=',')

#convert rssi to linear
for b in original_data: 
    b[2]=math.pow(10,b[2]/10)

for item in original_data:
    if item[0] and item[1] not in R and P: #check if the common r and theta have been searched for already
        for a in original_data:
            if a[0] == item[0] and a[1] == item[1]:
                interim_data.append(a)
    #Once all rows in orginal data have been checked, average the result in interim data and place in averaged lists R, P and Z         

        Z.append(10*math.log10(sum(interim_data[3])/len(interim_data)))
        R.append(item[0])
        P.append(item[1]) 
```

但是，当我运行此代码 Z 时，R 和 P 仍然为空。我尝试了一些带有更多 for 循环的变体，但我想知道是否有更简单的方法来做我想做的事情。

我在转换为线性值 = 10^(rssi dBm 值/10) 时也遇到了问题，我似乎无法让索引工作。

```
b[2]=math.pow(10,b[2]/10) 
```

影响 b 中的所有列表，而不仅仅是 b[2]。有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:20:38.297

它不是太漂亮但是

```
import numpy as np
from itertools import groupby

original_data=np.genfromtxt('bot1.csv', delimiter=',')

data = sorted(original_data.tolist(), key=lambda x: x[:2])

[(k, np.mean(list(v),axis=0)[2]) for k, v in groupby(data, lambda x: x[:2])] 
```

哪个输出

```
[([0.5, 0.0], -22.0), ([0.5, 45.0], -22.5), ([1.0, 0.0], -29.5)] 
```

我不确定您要使用日志和权力做什么，但这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:08:49.163

你应该能够用这样的东西得到你想要的。

```
import numpy as np
import itertools as it

data = np.array([[0.5,0,-21],
        [0.5,0,-23],
        [1.0,0,-29],
        [1.0,0,-30],
        [0.5,45,-22],
        [0.5,45,-23]])
# convert signal strength
data[:,-1]= np.pow(10, data[:,-1]/10.)

# get the unique values of radius and angles
uradius = np.unique(data[:,0])
uangle = np.unique(data[:,1])

mean_data = []
for ur, ua in it.product(uradius, uangle):
    samepoints = (data[:,0]==ur) & (data[:,1]==ua)
    if samepoints.sum() > 1:  # check if there is more than one match
        mean_data.append([ur, ua, np.mean(data[samepoints,-1])])
    elif samepoints.sum() == 1:
        mean_data.append([ur, ua, data[samepoints,-1]]) 
```

**编辑**

输出（不做`np.pow(..)`）

> mean_data = [[0.5, 0.0, -22.0], [0.5, 45.0, -22.5], [1.0, 0.0, -29.5]]

**编辑2**

Numpy 数学运算作用于您提供的整个数组，因此不需要在 rssi 上进行循环。

如果你喜欢更多，你也可以这样做

```
# convert signal strength
data[:,-1]= 10**(data[:,-1]/10.) 
```

# php - 使用 SQL 连接两个表中的值，但 PHP 未在表上显示值

> ID：15880879
> 
> 赞同：0
> 
> 时间：2013-04-08T13:50:41.367
> 
> 标签：php, sql

很抱歉打扰，但我在这方面浪费了太多时间：我的 sql 查询按我的意愿返回表，但由于某种原因，我无法让结果出现在表上。

我的 SQL 代码：

```
$ssql = "SELECT * FROM tickets
JOIN (SELECT agencias.pais_id, paises.pais_nombre, agencias.EMP_CODE FROM agencias JOIN      paises ON paises.pais_id = agencias.pais_id) agpais
ON tickets.cod_emp = agpais.EMP_CODE
WHERE tipo='NUE' ORDER BY id_ticket DESC" . $criterio;
$rs = mysql_query($ssql);
$total_registros = mysql_num_rows($rs); 
```

PHP HTML 代码：

```
<?php
while($resz = mysql_fetch_array($rs)) {  ?>
<td align="center" valign="middle" bgcolor="#C2DBE7"><font face="Verdana, Arial,            Helvetica, sans-serif" size="1" color="#000000"> $resz[pais_nombre]</font></td>

<?php
} 
?> 
```

var_dump($rs) 返回：resource(18) 类型（mysql 结果）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:56:45.510

`$resz[pais_nombre]`像这样需要单引号`$resz['pais_nombre']`

它还需要围绕它的 PHP 标记，所以`<?php echo $resz['pais_nombre']; ?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:56:55.187

```
<?php
while($resz = mysql_fetch_array($rs)) {  ?>
<td align="center" valign="middle" bgcolor="#C2DBE7">
    <font face="Verdana, Arial,Helvetica, sans-serif" size="1" color="#000000">
         <?php echo $resz['pais_nombre'];>?
    </font>
</td>

<?php
} 
?> 
```

如果您在 html 中指定了一些 php 代码，则必须将它们放在 php 标记中。您忘记这样做并且

```
<?php
//Php code goes here
?> 
```

# java - 如何以 Springs 形式映射字节：选择？

> ID：15880880
> 
> 赞同：1
> 
> 时间：2013-04-08T13:50:41.913
> 
> 标签：java, spring

在我的**模型**中，我有变量 Byte low = 0; 字节高 = 1；

现在 low 和 high 可以映射到字符串 O1 、 O2 、 O3 中的 3 个值；

例如，如果 low = 0，它可以映射到 O1，如果 1，它将映射到 O2。高也一样。

我应该如何设计我的控制器以通过 JSP 页面操作这些值。

我有 O1,O2,O3 的枚举

喜欢

```
enum MyEnum {
 O1(0),O2(1),O3(2) so on...
} 
```

我想要使​​用 form:options 的下拉菜单，它将显示这三个枚举选项的低和高。

这里唯一的问题是我已经阅读[了如何在 Spring MVC 表单中设置选定的值：从控制器中选择？](https://stackoverflow.com/questions/6181277/how-do-i-set-the-selected-value-in-a-spring-mvc-formselect-from-the-controller)但我无法弄清楚我的字节值将如何创建地图。我想填充这些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:11:14.380

首先，我认为您应该在模型中使用枚举而不是字节。您始终可以从枚举中获取字节值。还向模型类添加方法以返回枚举的字节值或字符串值。然后将此字符串值用于您的选择输入框。

你的枚举（我的假设）：

```
public enum MyEnum {
    O1 (0),
    O2 (1),
    O3 (2);

    private final Byte byteVal;       

    private MyEnum(Byte val) {
        byteVal = val;
    }

    public Byte getByteVal(){
        return byteVal;
    }

} 
```

你的模型（我的假设）：

```
public class MyModel{
    MyEnum high; //instead of Byte high
    MyEnum low;//instead of Bye low
    ....
    //This method would return byte to be compatible with your backend as it is right now
    public Byte getHigh(){
        return this.high.getByteVal();
    }
    //This method would allow you to use the string representation for your front end
    public Byte getHighString(){
        return this.high.name();
    }
} 
```

现在在你的选择框中使用你的jsp中的model.highString而不是model.high。

希望这可以帮助。

# zend-framework - 使用 Doctrine ORM 注释扩展功能

> ID：15880888
> 
> 赞同：1
> 
> 时间：2013-04-08T13:51:01.153
> 
> 标签：zend-framework, orm, doctrine-orm, doctrine

我遇到了以下情况：扩展 DataObject 类的（Doctrine Entity）ContentCategory。DataObject 类具有以下函数 onPrePersist：

```
/**
*  @ORM\HasLifecycleCallbacks
*/
class DataObject implements InputFilterAwareInterface
{
 ...
 /** @ORM\PrePersist */
 public function onPrePersist()
 {
     //using Doctrine DateTime here
     $this->creation_date = new \DateTime('now');
 } 
```

ContentCategory 类也需要这个函数。当我将此函数放在 ContentCategory 类中时，它工作得很好。有没有办法让 ContentCategory 类可以使用相同的函数 onPrePersist() 而无需在类本身中定义它？

```
* @ORM\HasLifecycleCallbacks()
*/
class ContentCategory extends DataObject implements InputFilterAwareInterface
{
 ...
} 
```

为对象提供 onPrePersist 函数的原因是在创建此对象或扩展 DataObject 类的任何其他对象/实体时设置 DateTime。

--<已编辑>--

我目前已经向 ContentCategory 添加了一个构造方法，如下所示：

```
public function __construct() {
    parent::onPrePersist();
} 
```

通过这种方式，Doctrine 在创建新实体时执行 onPersist 函数。另一种情况是使用 Doctrine 更新实体时。我想设置一个 Modified_date。在这种情况下，DataObject 类中就会有这样的函数。

```
/**
*  @ORM\HasLifecycleCallbacks
*/
class DataObject implements InputFilterAwareInterface
{
 ...
/**
 * @ORM\PreUpdate
 */
public function onUpdate()
{
    $this->last_modified_date = new \DateTime('now');
} 
```

已添加的 Doctrine ORM 注释 (PreUpdate) 将确保函数（如上）将在对象的更新语句上执行。问题是，如何在扩展 DataObject 的对象中调用这些函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:38:28.823

```
/**
 * @ORM\MappedSuperclass
 * @ORM\HasLifecycleCallbacks
 */
class TestimonialSuperclass
{
    /**
     * @ORM\PreFlush
     */
    public function onPreFlush ()
    {
        echo 123;
    }
}

/**
 * @ORM\Entity
 * @ORM\Table(name="testimonials")
 * @ORM\HasLifecycleCallbacks
 */
class Testimonial extends TestimonialSuperclass
{
   ...
} 
```

# audio - 在 Windows Phone 8 中以编程方式下载媒体文件

> ID：15880890
> 
> 赞同：5
> 
> 时间：2013-04-08T13:51:06.700
> 
> 标签：audio, video, windows-phone-8, webclient

我们的应用程序是基于视频/音频的应用程序，我们已将所有媒体上传到 Windows Azure。

但需要方便用户按需下载音视频文件，以便在本地播放。

所以我需要以编程方式下载音频/视频文件并将其保存在隔离存储中。

我们为每个音频/视频提供 Windows Azure 媒体文件访问 URL。但我被困在下载媒体文件的第一步。

我用谷歌搜索并看到了[这篇文章](http://www.c-sharpcorner.com/uploadfile/kirtan007/how-to-download-file-and-showing-its-progress-in-progress-bar/)，但是对于 WebClient，没有我可以使用的功能 DownloadFileAsync。

但是我尝试了它的其他功能DownloadStringAsyn，并且下载的媒体文件是字符串格式但不知道如何将其转换为音频（wma）/视频（mp4）格式。请建议我，我该如何进行？还有其他下载媒体文件的方法吗？

这是我使用的示例代码

```
private void ApplicationBarMenuItem_Click_1(object sender, EventArgs e)
    {
        WebClient mediaWC = new WebClient();
        mediaWC.DownloadProgressChanged += new DownloadProgressChangedEventHandler(mediaWC_DownloadProgressChanged);
        mediaWC.DownloadStringAsync(new Uri(link));            
        mediaWC.DownloadStringCompleted += new DownloadStringCompletedEventHandler(mediaWC_DownloadCompleted);           

    }

    private void mediaWC_DownloadCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Cancelled)
            MessageBox.Show("Downloading is cancelled");
        else
        {
            MessageBox.Show("Downloaded");
        }
    }   

    private void mediaWC_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
    {
        statusbar.Text = status= e.ProgressPercentage.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:26:11.070

要下载二进制数据，请使用`[WebClient.OpenReadAsync][1]`. 您可以使用它来下载字符串数据以外的数据。

```
var webClient = new WebClient();
webClient.OpenReadCompleted += OnOpenReadCompleted;
webClient.OpenReadAsync(new Uri("...", UriKind.Absolute));

private void OnOpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:44:49.663

将此保存在您的工具箱中:)

```
 public static Task<Stream> DownloadFile(Uri url)
    {
        var tcs = new TaskCompletionSource<Stream>();
        var wc = new WebClient();
        wc.OpenReadCompleted += (s, e) =>
        {
            if (e.Error != null) tcs.TrySetException(e.Error);
            else if (e.Cancelled) tcs.TrySetCanceled();
            else tcs.TrySetResult(e.Result);
        };
        wc.OpenReadAsync(url);
        return tcs.Task;
    } 
```

# maxima - 千里马 - 什么是“expt”？

> ID：15880895
> 
> 赞同：2
> 
> 时间：2013-04-08T13:51:15.787
> 
> 标签：maxima

我最近一直在使用 Maxima（而不是 Maple）并且我获得了一个奇怪的符号，我没有设法获得信息。

这是代码：

```
gx(t):=p0x*(1-t)^3+p1x*t*(1-t)^2+p2x*(1-t)*t^2+p3x*t^3;
dgx:diff(gx(t),t);
gy(t):=p0y*(1-t)^3+p1y*t*(1-t)^2+p2y*(1-t)*t^2+p3y*t^3;
dgy:diff(gy(t),t);
det(ax,ay,bx,by):=ax*by-ay*bx;
v(x,y):=-1/(R-sqrt(x**2+y**2))*[x,y];
f(t) := det(subst(N*t-j+1,t,dgx),subst(N*t-j+1,t,dgy),v(gx(N*t-j+1),gy(N*t-j+1))[1],v(gx(N*t-j+1),gy(N*t-j+1))[2])^2; 
```

现在对于对应于 f(t) 的输出，出现“expt(...)”符号。

如果有人有任何想法，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:33:49.360

从[手册](http://maxima.sourceforge.net/docs/manual/en/maxima_4.html#IDX61)：

*如果指数表达式太宽而无法显示为 a^b 它显示为 expt (a, b)*

# javascript - 隐藏一个 在某个移动分辨率上

> ID：15880898
> 
> 赞同：-2
> 
> 时间：2013-04-08T13:51:21.057
> 
> 标签：javascript, jquery, html, css

如何隐藏`li`移动分辨率？当宽度分辨率 < 600（例如：）隐藏项目时`class="txt-menu"`

我的html：

```
<li>
    <a href="#">TITLE MENU</a>
    <ul>
        <li><a href="">Link 1</a></li>
        <li><a href="">Link 2</a></li>
        <li><a href="">Link 3</a></li>
        <li><a href=""><img src="my-image_instead_of_menu-text"></a></li>
        <li><a href="" class="txt-menu">my text intead of menu image</li><br>
    </ul>
</li> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:00:14.357

使用[媒体查询](http://www.onextrapixel.com/2012/04/23/responsive-web-design-layouts-and-media-queries/)将解决您的问题。
对于移动分辨率，您可以使用以下代码：

```
@media only screen and (max-width: 599px) { 
    .txt-menu {
       display:none; 
    } 
```

还; 看看[响应式设计。](http://en.wikipedia.org/wiki/Responsive_web_design)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:59:55.647

您本身不需要 JavaScript。您可以将样式限制为仅适用于某些环境属性；

```
@media only screen and (max-device-width: 700px)
    li.text-menu {
        display: none;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:59:04.307

您可以使用 jquery 的[`hide()`](http://api.jquery.com/hide/)方法来隐藏任何 HTML 元素。但是据我了解，如果有人从手机访问页面，您基本上想更改菜单类型。如果是这种情况，而不是手动更改内容，您应该考虑查看一些响应式 CSS 框架。

例子：

1.  [推特引导](http://twitter.github.io/bootstrap/)
2.  [甘比](http://gumbyframework.com/)
3.  [响应式网格系统](http://responsive.gs/)

如果您仍然想采取不同的路线并承担更多工作，您可以使用以下方法检测移动设备，然后进行相应的操作。

```
if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
    /* Hide LI's here */
} 
```

这里有一个[`JSFiddle`](http://jsfiddle.net/jGWtC/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T14:01:43.557

您应该只使用 css 来检查移动分辨率并隐藏`<a>`：

```
@media (max-width: 767px) {
   li a.txt-menu{display:none;}
} 
```

# c++ - 隐藏基类中的所有重载方法

> ID：15880899
> 
> 赞同：3
> 
> 时间：2013-04-08T13:51:21.863
> 
> 标签：c++, inheritance

最近我开始知道这一点 - 如果派生类重新定义基类成员方法，那么所有具有相同名称的基类方法都会隐藏在派生类中。

```
#include<iostream>

using namespace std;

class Base
{
public:
int fun()
{
    cout<<"Base::fun() called";
}
int fun(int i)
{
    cout<<"Base::fun(int i) called";
}
};

class Derived: public Base
{
public:
int fun() 
{
    cout<<"Derived::fun() called";
}
};

int main()
{
Derived d;
d.fun(5);  // Compiler Error
return 0;
} 
```

错误：在函数“int main()”中：第 30 行：错误：没有匹配函数调用“Derived::fun(int)”编译由于 -Wfatal 错误而终止。

但只想知道背后的原因？为什么它不调用基类的 fun(int i) 方法，因为派生类是从基类派生的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:59:57.693

根本原因是为了让代码更健壮。

```
struct Base {
};

struct Derived : Base {
    void f(long);
    void g() { f(3); } // calls Derived::f
} 
```

现在假设`Base`在一个库中定义，并且您获得了对该库的更新，并且更新更改了以下定义`Base`：

```
struct Base {
    void f(int);
}; 
```

现在假设在找到名称时搜索重载函数并没有停止。在这种情况下，`Derived::g`将调用`Base::f`而不是`Derived::f`，并且您的派生类将悄悄地做一些与以前完全不同的事情，也不同于它的设计和记录要做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:55:40.023

您已经发现派生类重载会以相同的名称但不同的参数隐藏（阻止其可见性）基类方法。让我们声称这是出于某种历史或感知的安全原因，并查看修复：

```
class Derived: public Base
{
public:
  using Base::fun; // expose the base-class method
  int fun() 
  {
    cout<<"Derived::fun() called";
  }
}; 
```

# java - Java AES 密文大小

> ID：15880901
> 
> 赞同：3
> 
> 时间：2013-04-08T13:51:24.073
> 
> 标签：java, cryptography, aes, block, encryption

我正在使用一种非常标准的 Java AES 加密/解密方式。

```
byte[] key = hexStringToByteArray("C0C1C2C3C4C5C6C7C8C9CACBCCCDCECF");

byte[] message = hexStringToByteArray("01A0A1A2A3A4A5A6A703020100060001");

SecretKeySpec secretKeySpec = new SecretKeySpec(key, "AES");

// Instantiate the cipher
Cipher cipher = Cipher.getInstance("AES");
cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec);

byte[] encrypted = cipher.doFinal(message);

cipher.init(Cipher.DECRYPT_MODE, secretKeySpec);
byte[] original = cipher.doFinal(encrypted); 
```

如您所见，我使用的是 128 位密钥和 128 位消息。我几乎总是得到我期望的结果，但是，加密的结果总是 256 位长。第二个 128 位始终相同。除了截断结果之外，我如何确保密码只返回前 128 位，而不更改前 128 位？我觉得我在这里对块大小的定义有点混淆了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-08T15:00:44.450

在处理您的问题之前，有一些强制性的事情需要解决。我在这段代码中看到的有潜在危险的一件事是密码没有使用显式模式和填充指定。这意味着它取决于提供者的默认值。如果这是当前与 Oracle 的 JVM 一起分发的提供程序，则这些默认值为`ECB`和`PKCS5Padding`。如果这些是您想要使用的，请以这种方式指定它们：

```
 Cipher cipher = Cipher.getInstance("AES/ECB/PKCS5Padding"); 
```

第二个是这`ECB`不是一个好的模式选择，因为它不是很安全。`CBC`是一个更好的选择，因为它使用了初始化向量。

关于这个问题。加密文本大小的原因是由于填充方案，在这种情况下`PKCS5`。填充是必要的，以确保纯文本具有算法可以处理的长度。对于 AES，它必须是 16 字节的倍数。在未加密数据的长度已经是 16 字节的倍数的情况下，填充必须添加额外的 16 字节（请参阅此处的 jbtule 注释）。像这样初始化`Cipher`会产生 16 字节的加密数据：

```
Cipher cipher = Cipher.getInstance("AES/ECB/NoPadding"); 
```

这要求未加密数据的长度已经是 16 字节的倍数，因为它根本不会填充它。如果不是，则抛出异常。

确切地了解您正在尝试做什么以提供良好的建议可能会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T15:01:20.137

您的密码实例正在使用 PKCS5Padding 填充，它会在密文中添加多达 16 个字节的填充。有几种方法可以纠正这个问题：

选项 1：不使用使用填充的 Cipher.getInstance("AES")，而是使用 Cipher.getInstance("AES/CBC/NoPadding")。但是，不建议这样做，因为它要求明文是 16 字节的倍数。

选项 2：使用[BouncyCastle](http://www.bouncycastle.org/java.html)作为您的加密提供者，然后使用

```
import org.bouncycastle.jce.provider.BouncyCastleProvider;
Cipher.getInstance("AES/CTR/NoPadding", new BouncyCastleProvider()); 
```

初始化密码。这使用计数器模式 (CTR) 而不是密码块链接模式 (CBC)，并且计数器模式不需要任何填充。在计数器模式下，使用唯一的初始化向量很重要，它可以与密文一起以明文形式传输；例如，

```
byte[] IV = new byte[16];
new SecureRandom().getBytes(IV);
cipher.init(Cipher.ENCRYPT_MODE, key, IV); 
```

然后在解密密文时，用相同的初始化向量初始化密码。如何传输 IV 取决于您，但同样，它不需要保密。

密码块链接模式的初始化向量也应该是唯一的，但这并不像计数器模式那样重要。

# protocol-buffers - 协议缓冲区 - 用例

> ID：15880912
> 
> 赞同：4
> 
> 时间：2013-04-08T13:52:09.040
> 
> 标签：protocol-buffers

我尝试阅读 Protobuf 文档，但无法想象它可以用于许多用例。我想知道一些实际的协议缓冲区性能改进用例。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T13:56:51.683

Protocol buffers 是一个序列化库，所以这个问题的答案与问题的答案*基本*相同：

> 我什么时候想序列化/反序列化数据？

这可能是涉及持久性（磁盘、数据库中的 blob 等）、传输（套接字、文件等）或简单的内存存储（快照、备忘录、深度克隆）的任何场景。protobuf 具有版本容错性和跨平台特性，这意味着它既可以用于同构设置，也可以用于异构设置——就像其他各种序列化格式一样。简洁（小），当带宽非常宝贵（在繁忙的系统上“总是”）时，它可能特别有用，并且作为二进制（而不是文本）协议，它的处理成本明显更低 - 这对于减少 CPU 非常有用高架。除此之外：这是一个开放式问题，仅受您的想象力限制。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T13:55:21.997

它将比 Json 之类的 CPU 和网络更高效，所以只要你知道你要发送什么，并且需要发送*很多*，它可能是一个胜利。

# android - 使用 ScrollView 进行捏缩放：在子大小更改时更新其滚动行为

> ID：15880913
> 
> 赞同：5
> 
> 时间：2013-04-08T13:52:10.647
> 
> 标签：android, android-layout, scrollview, pinchzoom

我有一个从`ScrollView`. 我想要做的是用这个类实现捏缩放，我想用它缩放到`ScrollView`的孩子并根据需要滚动缩放的内容。`UIScrollView`基本上，我想要与iOS 类具有相同的行为（这是一个***耻辱***，Android 不提供像 iOS 那样的任何内置缩放功能，我们必须从头开始编写所有内容）。我有一个`ScaleGestureListener`班级内部`ScrollView`，当我收到`onScale`事件时，我更新了内部子视图的布局尺寸：我将布局宽度和高度乘以我收到的比例因子`ScaleGestureListener`. 困扰我的是 ScrollView 不会根据其子项的新尺寸更新其滚动条。例如，如果 child 的宽度变得大于`ScrollView`'s，它就不会显示水平滚动条。我在滚动视图及其子视图上都调用了`invalidate`and ，但它们失败了。`requestLayout`

下面我给出我的代码：

```
public class PinchZoomScrollView extends ScrollView{

private ScaleGestureDetector mScaleDetector;// = new ScaleGestureDetector(context, new ScaleListener());
private float mScaleFactor = 1.0f;
private float referenceTextSize;
private static final float MIN_ZOOM_AMOUNT = 1.0f;
private static final float MAX_ZOOM_AMOUNT = 2.0f;

private float refChildWidth;
private float refChildHeight;

private boolean shownForTheFirstTime = true;
//private View content;

private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {

    private WeakReference<PinchZoomScrollView> containerRef;

    public ScaleListener(PinchZoomScrollView container)
    {
        super();

        containerRef = new WeakReference<PinchZoomScrollView>(container);
    }

    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        mScaleFactor *= detector.getScaleFactor();

        // Don't let the object get too small or too large.
        mScaleFactor = Math.max(MIN_ZOOM_AMOUNT, Math.min(mScaleFactor, MAX_ZOOM_AMOUNT));

        //Get Child object
        View content = containerRef.get().getChildAt(0);

        if(shownForTheFirstTime)
        {
            shownForTheFirstTime = false;

            refChildWidth  = content.getWidth();
            refChildHeight = content.getHeight();
        }

        LayoutParams params = new LayoutParams(Math.round(mScaleFactor*refChildWidth), Math.round(mScaleFactor*refChildHeight));
        content.setLayoutParams(params);

        System.out.println("this.width="+containerRef.get().getWidth());
        System.out.println("content.width="+Math.round(mScaleFactor*refChildWidth));

        content.invalidate();
        content.requestLayout();

        containerRef.get().updateViewLayout(content, params);

        containerRef.get().invalidate();
        containerRef.get().requestLayout();

        return true;
    }
}

public PinchZoomScrollView(Context context)
{
    super(context);
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener(this));
}

public PinchZoomScrollView(Context context, AttributeSet attrs)
{
    super(context,attrs);
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener(this));
}

public PinchZoomScrollView(Context context, AttributeSet attrs, int defStyle)
{
    super(context,attrs,defStyle);
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener(this));
}

@Override
public boolean onTouchEvent(MotionEvent ev) {

    super.onTouchEvent(ev);

    mScaleDetector.onTouchEvent(ev);

    return true;
}

} 
```

长话短说，我需要 ScrollView 根据其子项的更新大小更新其滚动条，每次用户进行缩放时。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T19:25:00.237

这是一个解决方案：

1.  我没有扩展 ScrollView，而是编写了一个扩展 FrameLayout 的 TwoDimensionScrollView，它是 ScrollView 和 Horizo​​ntalScrollView 的组合，以便它可以同时显示水平/垂直滚动条，即使孩子被缩放。我也没有使用手势检测器。相反，我实现了自己的捏到缩放。

2.  要更新滚动条，请重写以下函数：

    ```
    @Override
    protected int computeVerticalScrollRange() {
        final int count = getChildCount();
        final int contentHeight = getHeight() - getPaddingBottom()
            - getPaddingTop();
        if (count == 0) {
            return contentHeight;
        }

    @Override
    protected int computeVerticalScrollOffset() {
        int result = Math.max(0, super.computeVerticalScrollOffset());
        return result - getScrollVerticalMin();
    }
    @Override
    protected int computeHorizontalScrollRange() {
        final int count = getChildCount();
        final int contentWidth = getWidth() - getPaddingLeft()
            - getPaddingRight();
        if (count == 0) {
            return contentWidth;
        }

        int scrollRange = getChildAt(0).getRight();
        final int scrollX = getScrollX();
        final int overscrollRight = Math.max(0, scrollRange - contentWidth);
        if (scrollX < 0) {
            scrollRange -= scrollX;
        } else if (scrollX > overscrollRight) {
            scrollRange += scrollX - overscrollRight;
        }
        return (int) (scrollRange * mScaleFactor + getScrollHorizontalMin());
    }

    @Override
    protected int computeHorizontalScrollOffset() {
        int result = Math.max(0, super.computeHorizontalScrollOffset());
        return result - getScrollHorizontalMin();
    }
    @Override
    protected int computeVerticalScrollExtent() {
        return getHeight() + getScrollVerticalMin();
    }

    @Override
    protected int computeHorizontalScrollExtent() {
        return getWidth() + getScrollHorizontalMin();
    }
    private int getScrollHorizontalMin() {
        if (this.getChildCount() < 1)
            return 0;
        View child = this.getChildAt(0);
        return (int) ((1 - mScaleFactor) * child.getPivotX());
    }

    private int getScrollVerticalMin() {
        if (this.getChildCount() < 1)
            return 0;
        View child = this.getChildAt(0);
        return (int) ((1 - mScaleFactor) * child.getPivotY());
    }
    private int getScrollVerticalRange() {
        int scrollRange = 0;
        if (getChildCount() > 0) {
            View child = getChildAt(0);
            scrollRange = (int) Math.max(0, child.getHeight() * mScaleFactor
                    - (getHeight() - getPaddingBottom() - getPaddingTop())
                    + getScrollVerticalMin());
        }
    return scrollRange;
    }

    private int getScrollHorizontalRange() {
        int scrollRange = 0;
        if (getChildCount() > 0) {
            View child = getChildAt(0);
            scrollRange = (int) Math.max(0, child.getWidth() * mScaleFactor
                    - (getWidth() - getPaddingRight() - getPaddingLeft())
                    + getScrollHorizontalMin());
        }
        return scrollRange;
    } 
    ```

3.  您还需要找到所有调用 SpringBack() 和 fling() 的代码，然后使用上述函数 getScrollHorizo​​ntalMin() 和 getScrollVerticalMin() 设置 x 和 y 的最小值而不是 0

# pandas - 如何删除后续行中具有重复值的行

> ID：15880915
> 
> 赞同：0
> 
> 时间：2013-04-08T13:52:20.203
> 
> 标签：pandas

在我的 csv 数据中，我有一列包含以下数据：

```
110.00
111.00
111.00 *
112.00
113.00
114.00
114.00 *
115.00
115.00 *
116.00
110.00
111.00
111.00 *
112.00
113.00
114.00
114.00 *
115.00
115.00 *
116.00 
```

我在数据框中阅读它，我想删除具有重复数字的行，但前提是它们是一个接一个地立即出现。我用 * 标记了我想删除的行。感谢您的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:47:57.227

我认为您可以使用 来执行此操作`.shift()`，它可以向前或向后移动一个系列（默认为向前一个。）如果它们与下一个不同，您希望保留行，例如：

```
 df[df["A"] != df["A"].shift()] 
```

例如：

```
>>> df = pd.DataFrame({"A": [1,2,1,2,2,3,3,3,1,2]})
>>> df["A"]
0    1
1    2
2    1
3    2
4    2
5    3
6    3
7    3
8    1
9    2
Name: A, dtype: int64
>>> df["A"].shift()
0   NaN
1     1
2     2
3     1
4     2
5     2
6     3
7     3
8     3
9     1
Name: A, dtype: float64
>>> df["A"] != df["A"].shift()
0     True
1     True
2     True
3     True
4    False
5     True
6    False
7    False
8     True
9     True
Name: A, dtype: bool 
```

导致：

```
>>> df[df["A"] != df["A"].shift()]
   A
0  1
1  2
2  1
3  2
5  3
8  1
9  2 
```

# c++ - Xcode c++和VS2010 c++有什么区别

> ID：15880917
> 
> 赞同：0
> 
> 时间：2013-04-08T13:52:31.390
> 
> 标签：c++, visual-studio-2010

我对 C++ 很陌生，我有一些 Java 经验。

目前我使用 xcode 编写了一个小型 c++ 项目。我只是使用标准库。然后我在VS2010中创建一个项目。我在项目的源文件夹下“添加现有项目（我的 xcode 项目中的源文件）”。之后，我发现该项目可以编译，但在 VS2010 中无法正常运行。

听说c++代码有可移植性，我不明白为什么在xcode上运行的代码会导致VS2010出现问题。

在我的源代码中，我写了如下内容：

啊：

```
 class a{
    public :
     int p ; 
    vector<Token*> v;
    a();
    int b();
    void c();
 } 
```

一个.cpp：

```
 a::a(){ //constructor of a
      p = 0;
      v.push_back(new Token("a",1));
   }
   int a::b(){
        ......
        //breakpoint to view p, v 
    c();
   }
   void a::c(){
        .......
       // when I set breakpoint here, in xcode, the debugger stops here.
       // in VS2010, it said the debugger did not hit this breakpoint.
   } 
```

在运行时，xcode 调试器可以正确显示向量和 p，但是在 VS2010 中，调试器无法正确显示 p 和向量。如果我扩展vector的视图，在VS2010中vector的大小变得非常大，但是在xcode中的vector大小是正确的。

有什么方法可以将 Xcode C++ 项目导入 VS2010？或者有什么方法可以解决上述问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:14:47.760

C++ 标准定义了一个“抽象机器”，当呈现一个格式良好的 C++ 程序时，它会产生某些行为。编译器不需要重现抽象机器的所有行为，只需重现它的“可观察行为”。

C++11 标准，§1.9/8：

> 对一致性实现的最低要求是：
> 
> *   对 volatile 对象的访问严格按照抽象机的规则进行评估。
> *   在程序终止时，写入文件的所有数据都应与根据抽象语义执行程序可能产生的结果之一相同。
> *   交互式设备的输入和输出动态应该以这样一种方式发生，即在程序等待输入之前实际交付提示输出。什么构成交互式设备是由实现定义的。
> 
> 这些统称为程序的*可观察行为*。[*注意*：抽象和实际语义之间更严格的对应关系可以由每个实现定义。——*尾注*]

请注意，“我的函数将始终在运行时被调用”不是这些要求之一。只要可观察的行为符合标准允许的行为，编译器就可以（实际上是鼓励）进行非常积极的优化。允许编译器假设您编写了一个不会导致未定义行为的格式良好的 C++ 程序。假设它这样做了，如果它注意到一个函数将没有*可观察的行为*并且将返回一个一致的值，它可以完全省略调用，在编译时计算值等。

VS的输出是否坏了，很大程度上取决于

*   优化是否被禁用（许多优化是默认开启的，但大多数编译器——包括 VC++——会在询问时禁用非必要的）；
*   是否`a::c()`在调试器之外实际调用过（如果从未使用过，编译器甚至可能不会将其包含在二进制文件中）；
*   是否会引起任何可观察到的副作用；
*   在某些情况下，调用者的内容`a::b()`，甚至调用者的内容；
*   程序的行为是否在潜在调用之前的任何时候都未定义，`a::b()`或者`a::c()`- 特别是，您是否`a::b()`通过悬空或不正确转换的指针或引用等进行调用（一旦程序运行异常，所有赌注关闭）；

和一堆其他的东西。

不过，我会说：如果 VS 允许您查看 and 的内容`v`，`p`并且它们有垃圾值，那么问题更有可能是代码而不是调试器或编译器。如果它不知道怎么做，它可以很容易地说“我不能显示这个”（因为它喜欢使用 .net 对象：P）。它认为它可以、尝试过并且是错误的这一事实是相当有说服力的。

# android - 从远程 HTML 加载本地资产 - android 应用

> ID：15880918
> 
> 赞同：0
> 
> 时间：2013-04-08T13:52:34.333
> 
> 标签：android, html, local, assets

我正在尝试通过服务器上的远程 HTML 加载本地源此类图像。运行应用程序时出现此错误：

不允许加载本地资源：file:///android_asset/www/img/logo.png:0

如何解决这个问题？任何人？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:59:57.473

如果 png 已经在您的资产文件夹中，只需在您的 html 中使用它：

```
<img src="www/img/logo.png"/> 
```

# raphael - 如何在拉斐尔做圆形包装？

> ID：15880920
> 
> 赞同：0
> 
> 时间：2013-04-08T13:52:39.857
> 
> 标签：raphael

[用户界面链接](http://www.cs.umd.edu/~bederson/papers/index.html)

我的要求是使该图表与较低版本的 Internet Explorer 兼容。
附上ui的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:19:25.573

这大概是在 d3 中完成的——看起来[像这个例子](http://bl.ocks.org/mbostock/4063269)。

该可视化有两个部分：计算圆圈的大小和位置并实际绘制它们。第一部分很可能与 IE 兼容，或者可以通过扩展任何不能使其返回那么远的 Array 函数来实现。

您可以从那里接管并在 Raphael 中绘制圆圈，这至少可以追溯到 IE7。我相信这就是[d34raphael](http://webmonarch.github.io/d34raphael/)背后的想法，它是 d3 的一个分支。你可以试试或者自己做。

# javascript - Ipad 上的菜单没有动画

> ID：15880921
> 
> 赞同：1
> 
> 时间：2013-04-08T13:52:41.760
> 
> 标签：javascript, jquery, html, css

我正在这个[网站上](http://thelovemonster.net/index2.php/)工作：

导航在 mac chrome 和其他浏览器上运行良好。

例如，如果您**单击博客**，它会转到博客并在您离开鼠标后隐藏菜单。

问题是，在**Ipad 和 Iphone**上，菜单始终保持**打开状态**，有什么想法吗？

这是我的动画代码：

```
 function Main_menu() {
        _menu = this;
        _menu.pw_protected_target = '';
        _menu.container = $('#header');
        _menu.logo = $('#logo');
        _menu.menu = $('#menu');
        _menu.form = $('#login');
        _menu.form_input = $('#form_input');
        _menu.form_submit = $('#submit')
        _menu.container.bind({
            'mouseenter' : _menu.open,
            'mouseleave' : _menu.close
        });
        _menu.form_submit.bind('click', function(){
            _menu.authenticate(_menu.form_input.val())
        })
        $('.tt').bind({
            'mouseenter' : function(){
                $('.tooltip')
                .addClass('fade in')
                .css({
                    'top' : $(this).offset().top - 5,
                    'left' : $(this).offset().left + $(this).width() + 10
                })
            },
            'mouseleave' : function(){
                $('.tooltip')
                .removeClass('fade in');
            }
        })

        $('.tt_shop').bind({
            'mouseenter' : function(){
                $('.tooltip_shop')
                .addClass('fade in')
                .css({
                    'top' : $(this).offset().top - 5,
                    'left' : $(this).offset().left + $(this).width() + 10
                })
            },
            'mouseleave' : function(){
                $('.tooltip_shop')
                .removeClass('fade in');
            }
        })
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:57:23.880

您是否在 iPad 上正确连接了鼠标？:)

触摸设备上没有“mouseenter”或“mouseleave”事件。不幸的是，jQuery 核心没有触摸事件。您可以使用我在此线程中找到的一些建议：

[如何在 iPad 版 Safari 中使用 jQuery 识别触摸事件？可能吗？](https://stackoverflow.com/questions/4755505/how-to-recognize-touch-events-using-jquery-in-safari-for-ipad-is-it-possible)

我认为在您的情况下，最好更改菜单的行为以在触摸时切换显示/隐藏菜单。

# php - 使用 PHP 的 Apple 推送通知反馈服务 - 套接字错误

> ID：15880922
> 
> 赞同：0
> 
> 时间：2013-04-08T13:52:45.340
> 
> 标签：php, ios, push-notification, apple-push-notifications

我按照[这个](https://stackoverflow.com/questions/1278834/php-technique-to-query-the-apns-feedback-server)问题使用了 APNS 反馈服务。这是我请求反馈服务器的代码；

```
function send_feedback_request() {
    //connect to the APNS feedback servers
    //make sure you're using the right dev/production server & cert combo!
    $stream_context = stream_context_create();
    stream_context_set_option($stream_context, 'ssl', 'local_cert', 'my_production_cerficate.pem');
    $apns = stream_socket_client('ssl://feedback.push.apple.com:2196', $errcode, $errstr, 60, STREAM_CLIENT_CONNECT, $stream_context);
    if(!$apns) {
        die("ERROR $errcode: $errstr\n");
    }

    $feedback_tokens = array();
    //and read the data on the connection:
    while(!feof($apns)) {
        $data = fread($apns, 38);
        if(strlen($data)) {
            $feedback_tokens[] = unpack("N1timestamp/n1length/H*devtoken", $data);
        }
    }
    fclose($apns);
    return $feedback_tokens;
} 
```

当我使用此功能时，它会报告以下错误；

```
Warning: stream_socket_client() [function.stream-socket-client]: Unable to set private key file /my_directories/my_production_cerficate.pem in /my_directories/apnsfeedback.php on line 7

Warning: stream_socket_client() [function.stream-socket-client]: failed to create an SSL handle in /my_directories/apnsfeedback.php on line 7

Warning: stream_socket_client() [function.stream-socket-client]: Failed to enable crypto in /my_directories/apnsfeedback.php on line 7

Warning: stream_socket_client() [function.stream-socket-client]: unable to connect to ssl://feedback.push.apple.com:2196 (Unknown error) in /my_directories/apnsfeedback.php on line 7 
```

我正在使用我用于发送推送通知消息的生产证书 (.pem)，它是有效的 + 工作。所以无效的证书不是这里的问题。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T06:32:37.320

经过一番烦恼，我终于弄清楚了这个问题对我来说是什么。我们的证书非常适合发送消息，但我必须创建一个没有加密或密码的证书才能处理反馈

```
openssl rsa -in apns-dev-key.pem -out apns-dev-key-noenc.pem 
```

是我们没有在我们的 pem 上用于发送推送的步骤。使用它后，反馈似乎还可以，但它只返回 3 个令牌，尽管我觉得我们应该有更多。

# c# - 如何在 c# 中使用 if/then 语句设置变量类型？

> ID：15880925
> 
> 赞同：0
> 
> 时间：2013-04-08T13:52:59.457
> 
> 标签：c#, .net, sql-server, sql-server-ce, sqldatareader

我有一个执行 SQL 查询的函数。根据注册表值，它将命中 SQL Server 或 SQL Server Compact Edition。如果它使用 SQL Server CE，则设置 recordSet 变量的行应如下所示：

```
SqlCeDataReader recordSet = da.ExecuteSQLCommand(selectCommand); 
```

对于 SQL Server，它应该如下所示：

```
SqlDataReader recordSet = da.ExecuteSQLCommand(selectCommand); 
```

我试图将所有这些都放在函数开头的 if/then 语句中，但似乎无法弄清楚如何在 if/then 中设置类型。这是我的（部分）代码：

```
public static string SqlQuery(string selectCommand, int regval)
{
    var recordSet = null;
    string selectCommand = "select * from whatever";

    if (regval == 0)
    {
        SqlDataReader recordSet = null;
    }
    else
    {
        SqlCEDataReader recordSet = null;
    }

    recordSet = da.ExecuteSQLCommand(selectCommand);
} 
```

问题是除非我在 if/else 之前声明 recordSet 变量，否则我不能在之后使用它。但是，如果我在 if/else 之前声明它，我无法更改类型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T13:53:57.073

你不能那样做。除非您使用`dynamic`.

您可以使用通用接口`IDataReader`。其他标准 ADO.NET 客户端（例如 MySQL 和 SQLite）也实现了这一点。

*编辑*

这是一个示例

```
public static string SqlQuery(string selectCommand, int regval)
{
    IDataReader recordSet = null;
    string selectCommand = "select * from whatever";
    recordSet = da.ExecuteSQLCommand(selectCommand);
} 
```

# python - 在python中对一个列表进行排序以匹配另一个列表

> ID：15880926
> 
> 赞同：8
> 
> 时间：2013-04-08T13:53:08.170
> 
> 标签：python, list, sorting

假设我有这些列表：

```
ids = [4, 3, 7, 8]
objects = [
             {"id": 7, "text": "are"},
             {"id": 3, "text": "how"},
             {"id": 8, "text": "you"},
             {"id": 4, "text": "hello"}
          ] 
```

我怎样`objects`才能对他们的ID匹配的顺序进行排序`ids`？即得到这个结果：

```
objects = [
             {"id": 4, "text": "hello"},
             {"id": 3, "text": "how"},
             {"id": 7, "text": "are"},
             {"id": 8, "text": "you"}
          ] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T13:55:32.037

```
object_map = {o['id']: o for o in objects}
objects = [object_map[id] for id in ids] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:55:52.550

```
In [25]: idmap = dict((id,pos) for pos,id in enumerate(ids))

In [26]: sorted(objects, key=lambda x:idmap[x['id']])
Out[26]: 
[{'id': 4, 'text': 'hello'},
 {'id': 3, 'text': 'how'},
 {'id': 7, 'text': 'are'},
 {'id': 8, 'text': 'you'}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:58:43.867

```
>>> ids = [4,3,7,8]
>>> id_orders = {}
>>> for i,id in enumerate(ids):
...     id_orders[id] = i
... 
>>> id_orders
{8: 3, 3: 1, 4: 0, 7: 2}
>>> 
>>> sorted(objs, key=lambda x: id_orders[x['id']]) 
```

# java - Nutch - 获取新发现的域

> ID：15880927
> 
> 赞同：0
> 
> 时间：2013-04-08T13:53:08.243
> 
> 标签：java, configuration, hadoop, fetch, nutch

我们正在使用 nutch 1.6 来抓取网页。根据 nutch 配置，应该给种子列表和域 url-filter 以遍历指定域。但是，如果它们的扩展名是 co.uk（仅适用于此扩展名），我们希望获取新发现的 url，我们可以通过将新发现的 url 的域添加到文件 - 或 db，无论如何 - 来管理它，停止爬虫，更新域 url-filters 和种子列表，然后重新启动它。但是我们如何动态地做到这一点，而不停止爬虫呢？

提前致谢。

PS：co.uk 域名扩展只是一个例子，我们也可以添加多个扩展来允许。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:42:44.477

知道了。

您可以在第 186-189 行将后缀添加到 domain-urlfilter.txt，例如“gov.uk”作为[DomainURLFilter 源代码](http://javasourcecode.org/html/open-source/nutch/nutch-2.0/org/apache/nutch/urlfilter/domain/DomainURLFilter.java.html)：

```
 if (domainSet.contains(suffix) || domainSet.contains(domain)
    || domainSet.contains(host)) {
    return url;
  } 
```

它检查后缀、域和主机。

此外，您可以将域 url 保存在 HBase 表中，并通过您自己的过滤器插件而不是使用 DomainURLFilter 来管理它们。

# iphone - 3 小时 & 无法创建/上传 APP 到 iTunes - 没有可用的身份

> ID：15880933
> 
> 赞同：0
> 
> 时间：2013-04-08T13:53:19.797
> 
> 标签：iphone, ios, app-store-connect, iphone-developer-program

好的，我已经阅读了十几篇文章并遵循了所有不同的建议，但是当我尝试通过管理器/存档分发我的应用程序时，没有一个解决了问题：没有可用的身份

我在开发者中心删除了我的证书，创建了一个新的开发者/开发证书，在组织者中刷新了团队（我所有的旧证书似乎仍然出现）并尝试使用登录不起作用，尝试下载文件和通过工具上传它，它不起作用。

我完全迷失了，如果这里有人可以帮助我更乐意通过贝宝支付你一两杯啤酒，我们可以在这里或在 Skype 上聊天。

只是因为认真地构建应用程序而感到沮丧，然后尝试将其简单地上传到应用程序商店中而不那么令人困惑/困难......

这是我在 iTunes Connect 上的帐户的屏幕截图以及我卡住的地方。

![在此处输入图像描述](https://i.stack.imgur.com/xW4Yf.png)

![在此处输入图像描述](https://i.stack.imgur.com/7aBE6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:25:45.463

我是个白痴，在错误的区域创建认证...... 3 小时，我所要做的就是更好地阅读说明......

# ria - Lightswitch，域服务和模型的分离组件 - 可能的错误？

> ID：15880943
> 
> 赞同：1
> 
> 时间：2013-04-08T13:53:35.383
> 
> 标签：ria, visual-studio-lightswitch

我尝试在 Lightswitch（2011 版）中实现我想用作外部数据源的自定义 RIA 服务。我的服务使用实体框架模型和域服务。它们位于单独的类库项目（Model.dll 和 Service.dll）中。灯开关应用是在单独的解决方案中。

当我尝试将我的 RIA 服务作为数据源添加到 Lightswitch 时，出现以下错误：

> 无法加载类型 Service.DomainService1。包含该类的程序集可能丢失或可能缺少其他引用。

可能是Lightswitch错误吗？

感谢您的回复。

# design-patterns - 在哪里可以找到一个很好的概述何时使用哪种创建设计模式

> ID：15880945
> 
> 赞同：0
> 
> 时间：2013-04-08T13:53:38.837
> 
> 标签：design-patterns

我正在寻找一个概述，以便立即确定何时使用以下哪些创建模式：

*   建造者
*   工厂
*   抽象工厂
*   原型

还有什么时候最好坚持简单的课程。

您能否提供一个好的资源，或者用几句话解释它，例如“如果一个对象不依赖任何东西，请使用普通类，如果需要多个类似的构造，那么通常首选工厂。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:57:47.410

我通常参考[OODesign](http://www.oodesign.com/)

它们对模式提供了很好的解释。还有“何时使用”、“常用用法”部分有助于快速参考。

# c++ - 如果一个函数从未被调用，编译器会在创建程序时忽略它吗？

> ID：15880954
> 
> 赞同：3
> 
> 时间：2013-04-08T13:53:59.567
> 
> 标签：c++, performance, optimization

当编译器运行其优化时，它是否会忽略从未调用过的函数？我记得读过一些说不要包含不必要的文件的东西，因为它会在程序中造成不必要的膨胀，所以我只能从该声明中假设，当它被编译时，它确实包含了从未使用过的函数，但我没有看到任何合乎逻辑的编译器不删除它们的原因，我认为大多数现代编译器可能会删除额外未使用的函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T13:56:13.480

一般来说，答案是“不”。但是一些编译器会在某些特定情况下消除一些功能。并且链接器也不会包含来自源文件中不需要该文件中的函数的静态链接库中的函数。

通常消除的一种常见情况是从不调用的静态函数，并且从不获取谁的地址。另一个是静态函数，它在被调用的任何地方都内联，并且永远不会占用谁的地址。

这完全取决于编译器。

但是，一般来说，这很难做到，因为编译器通常没有整个程序的视图来构建一个全面的调用图。而且链接器不够聪明。

此外，某些文件可能最终成为库的一部分。库的全部目的是拥有一堆不从库本身调用的代码。编译器无法在编译时确定给定的代码段是否进入库。再说一次，这意味着对于具有“外部链接”的函数，如果不使用它们，则由链接器来忽略它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T13:56:05.250

它在很大程度上取决于编译器，但是是的，在某些设置中，编译器可以完全消除未调用的函数。编译器必须确保该函数确实从未被调用。

特别是标记的功能`static`可以很容易地消除 - 只需查看同一个翻译单元。如果一个函数可能被另一个翻译单元调用，那就更难了。Visual C++ 对此有一个特殊的设置，称为“函数级链接”和一个[用于删除未引用函数](http://msdn.microsoft.com/en-us/library/bxwfs976%28v=vs.80%29.aspx)的链接器设置。当这两个一起使用时，未引用的函数将被完全消除。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T13:56:34.897

它*可以*做到。C++ 编译器仅在*as-if*规则下运行。只要生成的程序按照标准要求运行，编译器就可以为所欲为。

> 需要符合要求的实现来模拟（仅）抽象机器的可观察行为

如果函数从未被调用，那么编译器当然*可以*摆脱它，但它是否完全取决于编译器。但是，C++ 的编译模型需要单独编译翻译单元。编译器通常不可能或很难知道该函数从未从任何其他翻译单元调用。

# bash - 仅替换 Bash-String 中的第一次出现

> ID：15880955
> 
> 赞同：0
> 
> 时间：2013-04-08T13:54:00.113
> 
> 标签：bash

我有一个字符串`test="this is a string string"`。现在我使用以下方法替换字符串的两种外观：

```
new_test="${test//string/}" 
```

相反，我只想替换字符串的第一次出现。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:56:35.897

你有没有尝试过：

```
new_test="${test/string/}" 
```

# java - 使用 PowerMockito 部分模拟静态

> ID：15880957
> 
> 赞同：1
> 
> 时间：2013-04-08T13:54:08.560
> 
> 标签：java, junit, mockito, powermock

我在最后找到的所有带有部分模拟静态的示例都使用 EasyMock，然后是 PowerMock。有没有办法用 mockito - PowerMockito 部分模拟静态？

谢谢！罗克萨娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:39:59.660

您可以使用 PowerMockito 部分模拟静态。它的信息页面显示了所需的步骤。您可以在[此处](http://code.google.com/p/powermock/wiki/MockPartial)找到。使用根据需要模拟静态调用的能力，并且您始终可以使用`spy`. [您还可以在此处](http://code.google.com/p/powermock/wiki/MockitoUsage13)查看他们的文档中的示例。

# c# - 使用javascript关闭弹出窗口

> ID：15880959
> 
> 赞同：-3
> 
> 时间：2013-04-08T13:54:13.303
> 
> 标签：c#, javascript, asp.net

我有一个带有按钮的页面。当我按下按钮时，会出现一个弹出窗口。在弹出窗口中，我有一个“**关闭**”按钮，当我按下它时，弹出窗口应该关闭并且主页必须保持原样。

按下按钮时如何关闭弹出窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:00:15.817

假设您使用用户控件作为弹出窗口并且您将其添加到网格中，您可以使用它

`((this).parent as (Grid)).remove(this);`

或者您可以显示一些代码，我可以创建一个更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:06:31.470

这不一定必须在服务器端完成（即，在您的 C# 代码中）。相反，这可以通过视图上的一些快速 JavaScript（cshtml、aspx、ascx 或 html）来处理。

如果您使用的是 ASP.NET 控件：

```
<asp:Button id="MyButton" runat="server" OnClientClick="javascript:window.close(); return false;" /> 
```

如果您只是使用常规 HTML 按钮：

```
<input type="button" onclick="javascript:window.close();"/> 
```

# android - Asus MeMO Pad 没有驱动程序可以使用 eclipse 进行应用程序调试

> ID：15880961
> 
> 赞同：3
> 
> 时间：2013-04-08T13:54:25.080
> 
> 标签：android, eclipse, debugging, driver, device-driver

我在以下[SO 帖子](https://stackoverflow.com/questions/15029581/asus-memo-pad-debug-for-android-apps)中遇到了同样的问题-

我得到了一个新的 Asus Memo Pad，用于在 Asus Memo Pad 中运行应用程序时在 eclipse 中调试我的 android 应用程序。但是当我在 Eclipse 中设计选择器时，我没有在列表中找到我的设计。我知道这是因为我没有为我的华硕记事本安装合适的 USB 驱动程序，但我在华硕网站上也没有找到它的驱动程序，而且在谷歌上搜索了很多之后。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:35:05.153

`PdaNet Desktop`它通过在我的个人计算机上安装应用程序来工作。尽管我已经打开了电源，`USB debugging`但除了尝试各种不成功的选项之外，这并没有奏效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-29T07:42:39.760

我找到了一种解决方案。请转到设置中的设置 -> 系统 -> 关于

它将显示有关此垫的许多项目。请不断点击版本项。然后它将显示一条消息“您成为开发人员”。会出现一个新的项目“开发者选项”，输入这个项目并启用“USB Debbger”。

终于可以在这个pad上调试了！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T14:10:39.710

在 Windows 7 上，我让 Windows Update 为 USB 调试找到正确的驱动程序。通过 USB 连接设备，从设备的设置中启用调试并配置更新以自动获取驱动程序。我无法直接在华硕或微软的网站上找到驱动程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-02T15:45:01.000

开发者选项隐藏在许多设备中

-> 进去`Setting`-> `About`-> 点击`Build Version`10 次

按照这些步骤，您已启用开发人员选项。返回设置菜单，现在您可以看到开发人员菜单，这里您必须检查

```
enable USB debugging 
```

就这样

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-17T14:34:54.410

```
Settings / About / Software Info / Build number 
```

然后在“Build number”上点几下，烤面包机会提示你要切换到开发者模式。

不知道怎么关掉

这是在 Android 4.4.2 型号 K01E 上测试的 内置日期 20140526

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-20T16:24:31.673

试试这个：检查设置，在开发者选项下面的列表中选择，然后你必须启用该选项并选择保持清醒，USB调试。它正常工作！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-03T07:35:01.710

我通过执行以下操作获得了驱动程序：

我在平板电脑上启用了 USB 调试并将其连接到我的计算机。和其他人一样，Eclipse 也找不到我的平板电脑。

然后我去了： `Control Panel`-> `Device Manager`。在 下`"Other devices"`，我的平板电脑被列为`ASUS Android Composite ADB Interface`（搜索它，如果它不在“其他设备”下）。我左键单击平板电脑并选择`Update Driver Software`。我让 Windows 自动搜索更新的驱动程序软件。安装驱动程序后，我重新启动计算机，然后可以在 Eclipse 中的设备下查看平板电脑。

有关 Google Android 网站的更多信息，请[点击此处](http://developer.android.com/tools/extras/oem-usb.html)。

# ios - 使用 Google Analytics SDK for iOS v2 跟踪屏幕层次结构

> ID：15880963
> 
> 赞同：4
> 
> 时间：2013-04-08T13:54:31.977
> 
> 标签：ios, objective-c, sdk, google-analytics

我正在将[适用于 iOS v2.0 的 Google Analytics SDK](https://developers.google.com/analytics/devguides/collection/ios/v2/)添加到应用程序中。

我之前使用过 v1 的 SDK，我很确定我曾经能够像这样发送单个跟踪字符串：

```
[[GANTracker sharedTracker] trackPageview:@"/Home Screen/Contents Screen/Chapter X/Section X/Page X"
                               withError:&error] 
```

或者

```
[[GANTracker sharedTracker] trackPageview:@"/Home Screen/Credits Screen"
                               withError:&error] 
```

当这个被跟踪的页面提交给谷歌时，我可以在分析中看到应用程序层次结构的一个很好的分解，如下所示：

*   主屏幕
    *   内容画面
        *   第1章
            *   第 1 节
                *   第 1 页
                *   第2页
                *   ETC
            *   第 2 节
            *   ETC
        *   第2章
        *   第3章
        *   ETC
    *   学分屏幕

现在的问题是，当我们使用 iOS SDK v2 将相同格式的字符串发送给 Google 时，如下所示：

```
[tracker sendView:@"/Home Screen/Contents Screen/Chapter X/Section X/Page X"]; 
```

我们只是在 Analytics 中获得一个屏幕视图，其名称非常长，而且根本没有拆分：

*   /主屏幕/目录屏幕/第 X 章/第 X 节/第 X 页

我们如何像在 v1 中那样将屏幕拆分为分层视图？

使用 sendView 方法的原因是我们可以利用数据，例如用户在每个章节或部分或页面上花费的时间，从而让我们对应用程序中最常用的区域有一个很好的了解。

我们可以用事件做到这一点，但我确信屏幕跟踪*应该*能够做我们想要的？

可能只是我以错误的方式处理这个问题。对此的任何启示都会受到极大的欢迎！

非常感谢，贾斯汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T00:03:51.607

Google 希望您跟踪此类数据的方式是通过自定义维度。

因此，对于上面的示例，您需要在 Google Analytics 中为书籍、章节和页码创建新的自定义维度。这是一篇很好的文章，解释了如何设置它：[配置 Google Analytics（分析）自定义维度](https://developers.google.com/analytics/devguides/platform/customdimsmets#configuration)

一旦在服务器上设置好，您就可以通过它们的索引从客户端引用它们，并只需传入您要设置的值。您将在调用之前设置自定义维度的值`[tracker sendView:@"Screen Name"]`。像这样的东西：

```
// Get the tracker object.
id tracker = [[GAI sharedInstance].defaultTracker;

// Set the dimension value for index 1\. (Book Dimension)
[tracker setCustom:1 dimension:@"Book Name"];

// Set the dimension value for index 2\. (Chapter Dimension)
[tracker setCustom:2 dimension:@"Chapter Name"];

// Set the dimension value for index 3\. (Page Number)
[tracker setCustom:3 dimension:@"Page Number"];

// Dimension value is associated and sent with this hit.
[tracker sendView:@"Book Reader"]; 
```

您最多可以设置 20 个自定义尺寸，这应该足够了。

[Google 的文档](https://developers.google.com/analytics/devguides/collection/ios/v2/customdimsmets)中有一个 iOS SDK v2.0 的好例子

请注意，Google 最近发布[了适用于 iOS v3.0 Beta 的 Google Analytics SDK](https://developers.google.com/analytics/devguides/collection/ios/v3/)，您可能想改用它。一些方法名称已更改。

# ios - 如何旋转添加到窗口的子视图？

> ID：15880964
> 
> 赞同：0
> 
> 时间：2013-04-08T13:54:39.057
> 
> 标签：ios, objective-c, cocoa-touch

我有一个`UITabBarController`子类，我必须遵循以下代码：

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait;
} 
```

效果很好，当我翻转设备时会旋转。我的问题是，在我的应用程序的某些部分，我希望一个图层位于登录屏幕等所有内容之上，所以我使用这个：

```
LoginView *loginView = [[LoginView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame delegate:self];
[[UIApplication sharedApplication].keyWindow addSubview:loginView]; //<-- Won't rotate

//[self.view addSubview:loginView]; <-- will rotate but will not be on top of everything (tabbar etc') 
```

在这种情况下，登录屏幕将不会旋转。我怎样才能拥有一个覆盖所有内容的子视图，并且仍然像所有其他视图一样强制它旋转？

# c# - 如何从 ActiveUp.Net.Mail.Message 获取 UID 或如何通过 MessageId 搜索？

> ID：15880965
> 
> 赞同：1
> 
> 时间：2013-04-08T13:54:41.130
> 
> 标签：c#, imap

我想使用`ActiveUp.Net.Mail`IMAP4 服务上的库搜索和删除消息。如果我知道 MessageId ，我不知道如何从中获取 UID`ActiveUp.Net.Mail.Message`或如何使用所选文件夹搜索邮箱。

当然，我以前获取过消息，所以我知道它的`MessageId`.

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-10-08T16:53:00.013

我知道为时已晚，但我今天遇到了同样的问题，也许还有其他人仍在寻找答案。这是对我有用的解决方案：

```
// Select the Mailbox you want to query
Mailbox Inbox = _client.SelectMailbox("Inbox");

for (int x=Inbox.MessageCount; x>0; x--)
{
    Message email = Inbox.Fetch.MessageObject(x);
    ProcessEmail(email, x);
} 
```

messageOrdinal 基本上是邮件的索引（例如：gmail 收件箱中的位置），但您必须自己保留引用，因为 ActiveUp.Net.Mail.Message 不会提供任何功能来检索它。

在`ProcessEmail`函数中，您将收到`messageOrdinal`as 输入参数：

```
public void ProcessEmail(Message email, int messageOrdinal)
{
    //...
} 
```

# c - 至少 375 次成功输入后的代码段错误

> ID：15880967
> 
> 赞同：0
> 
> 时间：2013-04-08T13:54:43.663
> 
> 标签：c

在我正在处理的哈希字典中，根据 GDB，数组的大小已经从 500 调整到 1000。尝试添加时崩溃的数组索引是 799，所以它没有越界……我不确定为什么会这样段故障，尤其是在这样一条看似无害的线路上。这是相关的代码。

```
int main(int argc, char **argv)
{
FILE *src = fopen(argv[1], "r");
int algnum = 1;
char input[40];
struct HT *table = create();

if (argc == 3)
{
    if (strcmp(argv[2], "0") == 0)
    {
        algnum = 0; 
    }
    else if (strcmp(argv[2], "1") == 0)
    {
        algnum = 1;
    }
}

while(fgets(input, 40, src) != 0)
{
    int i = 0;
    while(input[i] != '\0')
    {
        i++;
    }

    struct word *wrd = malloc(sizeof(struct word));
    wrd->letters = input;
    wrd->length = i;
    if (algnum = 0)
    {
        add(table, wrd, &alg0);
    }
    else if (algnum = 1)
    {
        add(table, wrd, &alg1);
    }
}
} 
```

然后在包含文件中...

```
struct HT* create() 
{
struct HT* table = malloc(sizeof(struct HT));
table->entries = 0;
table->num_buckets = 500;
table->largest_bucket = 0;
table->occupied_buckets = 0;
table->buckets = malloc(500 * sizeof(struct bucket*));
int i;  
for (i = 0; i<500; i++)
{
    table->buckets[i] = malloc(sizeof(struct bucket));
    table->buckets[i]->num_items = 0;
}
return table;   
}

struct HT* resize(struct HT* table, int(*alg)(struct word *wrd)) 
{
struct HT* table_new = malloc(sizeof(struct HT));
int new_size = 2*table->num_buckets;
table_new->buckets = malloc(new_size*sizeof(struct bucket*));
int i;  
for (i = 0; i < new_size; i++)
{
    table->buckets[i] = malloc(sizeof(struct bucket));
    table->buckets[i]->num_items = 0;
}
table_new->num_buckets = new_size;
table_new->occupied_buckets = 0;
table_new->entries = 0;
table_new->largest_bucket = 0;

struct word* wrd_temp = malloc(sizeof(struct word));
struct item* item_temp = malloc(sizeof(struct item));
for (i = 0; i<table->num_buckets; i++)
{
    item_temp = table->buckets[i]->head;
    while(item_temp != 0)
    {
        wrd_temp = item_temp->wrd;
        add(table_new, wrd_temp, alg);
        item_temp = item_temp->next;
    }
}
quit(table);
return table_new;
}

void add(struct HT* table, struct word *wrd, int(*alg)(struct word *wrd)) 
{
if ((double)table->entries / (double)table->num_buckets > .75)
{
    table = resize(table, alg);
}   
sort(wrd);
int code = alg(wrd);
code = code % table->num_buckets;
struct item* item_temp = malloc(sizeof(struct item));
struct item* item_add = malloc(sizeof(struct item));
item_add->wrd = wrd;
if (table->buckets[code]->head == 0)
{
    table->buckets[code]->head = item_add;
    table->occupied_buckets++;
}
else
{
    item_temp = table->buckets[code]->head;
    while (item_temp->next != 0) {
        item_temp = item_temp->next;
    }
    item_temp->next = item_add;
}
table->buckets[code]->num_items++;
table->entries++;
if (table->buckets[code]->num_items > table->largest_bucket)
{
    table->largest_bucket = table->buckets[code]->num_items;
}
} 
```

编辑：它崩溃的行是：

程序收到信号 SIGSEGV，分段错误。0x0000000000400cbd in add (table=0x613cc0, wrd=0x613ca0, alg=0x400942 ) at ht.c:118 118 if (table->buckets[code]->head == 0)

要求的信息：

(gdb) 打印表->buckets[799] $2 = (struct bucket *) 0x0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:01:54.457

问题是`resize`你创造了一个全新的`HT`结构。但是在`add`你没有把它传回调用链，所以`main`你仍然有你的*旧* `HT`结构。

作为一个额外的旁注，你从来没有`free`任何东西，所以你有很多内存泄漏。

* * *

在`main`您创建一个新表。让我们将此表称为 1。稍后当它变满时，您将创建一个*新*表，我们将其称为 2。此新表由返回`resize`并在中使用`add`。但是当`add`返回时，`main`函数仍然有一个指向表 1 的指针。

因此，当`add`下次调用时，该`main`函数传递表 1，该表太小，因此`resize`被调用并创建*另一个*表 3，该表仅在`add`. 等等等等...

# python - 为 Django 表单中的只读字段动态创建 clean_* 方法

> ID：15880971
> 
> 赞同：2
> 
> 时间：2013-04-08T13:54:46.040
> 
> 标签：python, django, dynamic, django-forms

[这是对这个 SO question](https://stackoverflow.com/questions/324477/in-a-django-form-how-to-make-a-field-readonly-or-disabled-so-that-it-cannot-b)的扩展。

是否有一种简单的方法可以动态生成所需的 clean_X 方法以确保只读表单字段不会被修改？我可以按照链接问题的建议手动编写方法，但是当您有多个表单并且需要将许​​多字段设置为只读时，新颖性很快就会消失。

肯定有更好的办法！

**解决方案：** 根据提供的答案，我决定只覆盖`Form.clean()`基类中的方法。这是我的表单继承的类，它接受一个参数，该参数`read_only`是作为字符串的实例属性列表。

```
class FormBase(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        self.read_only = kwargs.pop("read_only", [])
        super(FormBase, self).__init__(*args, **kwargs)

        #Disable any read only controls
        for f in self.read_only:
            self.fields[f].widget.attrs["readonly"] = True

    def clean(self):
        cleaned_data = super(FormBase, self).clean()
        for f in self.read_only:
            cleaned_data[f] = getattr(self.instance, f)
        return cleaned_data 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:09:22.990

请注意，验证不仅限于`form.clean_*`方法 - 您还可以使用值`form.clean()`并将值恢复`cleaned_data`为初始实例属性值。如果您在类中定义一个只读字段列表（或将其作为参数或其他方式传递），您只需遍历此列表即可重置您的值。

现在你*真的*坚持动态定义`clean_*`方法，这里是未经测试、过于简化和完全丑陋的可能解决方案：

```
class MyForm(...):
    readonly_fields = ("afield", "another",)
    def __init__(self, *args, **kw):
         super(MyForm, self).__init__(*args, **kw)
         for field in self.readonly_fields:
             self.fields[field].widget.attrs['readonly']
             def clean(field=field):
                 # assume fieldname == instance attribute name
                 return getattr(self.instance, field) 
             setattr(self, "clean_%s" % field, clean) 
```

显然，使用`Form.clean`更容易，更易读，而且*不*那么难看。

# c# - WCF 中的 JSON 请求和响应

> ID：15880972
> 
> 赞同：0
> 
> 时间：2013-04-08T13:54:47.343
> 
> 标签：c#, json, wcf

我正在尝试以 JSON 格式从 WCF Web 服务（用 c# 编写）发出请求并接收响应。这是端点的配置：

```
 <service behaviorConfiguration="UserServiceBehavior" name="UserService">
    <endpoint address="JSON" binding="webHttpBinding" contract="IUserService" 
              behaviorConfiguration="JSONEndpointBehavior" bindingConfiguration="" name="RESTEP">
    </endpoint>
    <endpoint address="" binding="basicHttpBinding" contract="IUserService">
      <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
  </service> 
```

...

```
<endpointBehaviors>
    <behavior name="JSONEndpointBehavior">
      <webHttp/>
    </behavior>
  </endpointBehaviors> 
```

方法上的注释是这样的：

```
[WebInvoke(Method = "GET", UriTemplate = "myUriTemplate", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped)] 
```

对于返回 CLR 类型的方法，它的效果很好：响应是 JSON 格式（我想也是请求）。对于返回非 CLR 类型的方法（在我的情况下是代理客户端），如果我尝试发出请求并接收 JSON 中的响应，服务器会给我带来 404 错误，但如果我切断它：

```
RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json 
```

服务器回复一个包含我正在搜索的数据的 XML 文档。这可能是与客户端代理有关的问题吗？如何生成支持 JSON 序列化和反序列化的 e 客户端代理？如果我打开帮助页面，我实际上可以在方法列表中看到该方法，但我无法从 URL 中触发它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:38:44.180

发现问题。多亏了 SvcTracingTool，我发现所有这些都是由于序列化问题造成的，正如引发的异常所说：

> InnerException 消息是“类型 'xxxxxxxxx' 无法序列化为 JSON，因为其 IsReference 设置为 'True'。JSON 格式不支持引用，因为没有用于表示引用的标准化格式。要启用序列化，请禁用类型或该类型的适当父类的 IsReference 设置。'。有关更多详细信息，请参阅 InnerException。

现在，下一步是了解为什么 WCF 返回 404 错误而不是异常。

# r - 在R中合并2个相同大小的矩阵

> ID：15880973
> 
> 赞同：1
> 
> 时间：2013-04-08T13:54:48.790
> 
> 标签：r, matrix, merge

我有 2 个大小完全相同的矩阵（100 X 500）。我想在不丢失任何信息的情况下将它们合并到 1 个相同大小 (100 X 500) 的矩阵中。我不知道如何表达这一点，但这就是我的想法。

```
Matrix A
   A        B        C      D     ...
   E        F        G      H     ...
   .
   .
   .

Matrix B
   1        2        3      4     ...
   5        6        7      8     ...
   .
   . 
```

我期待的结果是这样的

```
Matrix C
   A-1        B-2        C-3      D-4     ...
   E-5        F-6        G-7      H-8     ...
   .
   . 
```

有什么功能可以做到这一点？？这应该是一些基本命令，但是我以前从未遇到过这个问题。谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T13:57:51.033

您可以`paste`在矩阵上使用：

```
m1 <- matrix(LETTERS[1:24],nrow=6,ncol=4)
m2 <- matrix(1:24,nrow=6,ncol=4)
matrix(paste(m1,m2,sep="-"),nrow=nrow(m1),ncol=ncol(m1)) 
```

这将给出：

```
 [,1]  [,2]   [,3]   [,4]  
[1,] "A-1" "G-7"  "M-13" "S-19"
[2,] "B-2" "H-8"  "N-14" "T-20"
[3,] "C-3" "I-9"  "O-15" "U-21"
[4,] "D-4" "J-10" "P-16" "V-22"
[5,] "E-5" "K-11" "Q-17" "W-23"
[6,] "F-6" "L-12" "R-18" "X-24" 
```

`paste`返回向量而不是矩阵，这就是为什么您必须通过指定其维度将结果转换回矩阵的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:29:42.340

另一种选择是在`interaction`这里使用

```
 matrix(interaction(m1,m2,sep='-'),nrow=nrow(m1),ncol=ncol(m1))
     [,1]  [,2]   [,3]   [,4]  
[1,] "A-1" "G-7"  "M-13" "S-19"
[2,] "B-2" "H-8"  "N-14" "T-20"
[3,] "C-3" "I-9"  "O-15" "U-21"
[4,] "D-4" "J-10" "P-16" "V-22"
[5,] "E-5" "K-11" "Q-17" "W-23"
[6,] "F-6" "L-12" "R-18" "X-24" 
```

# context-free-grammar - 这是什么语法？上下文无关或上下文敏感

> ID：15880974
> 
> 赞同：1
> 
> 时间：2013-04-08T13:54:54.353
> 
> 标签：context-free-grammar, regular-language, automata, formal-languages, context-sensitive-grammar

我正在学习形式语言和自动机理论，我有一个关于书中没有回答的问题的问题。问题是：

这种语言是上下文无关的、常规的还是上下文相关的？

> L= {a ^n w w ^R b ^n | w 是 ( a+b )*, w ^R是 w 的倒数并且 n>=0 }

我认为这种语言是上下文相关的，因为它至少需要两个堆栈才能接受。

有人可以对此发表评论吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:49:04.340

语言 a ^n w w ^R b ^n是上下文无关语言。我们可以为这种语言编写上下文无关语法。

```
S -->  aSb | R
R -->  aRa | bRb | ^ 
```

`^`是空符号

PDA：用于语言 a ^n w w ^R b ^n

*   推送前缀字符串`a`^(`n`)
*   推 `w`
*   弹出`w`同时将每个符号与符号匹配`w`^(`R`)
*   弹出所有`a`推入堆栈并匹配`b`后缀`b`^(`n`)

**注意：**我们在通过 PDA 处理语言字符串 a ^n w w ^R b ^n时，我们不知道前缀`a`^(`n`) 在哪里结束，然后在`w`开始之前在哪里结束，`w`^(`R`)因此对于这种语言，我们无法绘制 PDA 的[确定性模型，尽管非确定性 PDA 是可能的](https://stackoverflow.com/questions/15617429/ambiguity-in-transition/15661281#15661281). 重要的是非确定性 PDA 类别与确定性 PDA 类别不同，这意味着[范围确定性上下文无关语言不等于非确定性上下文无关语言。](https://stackoverflow.com/questions/13143186/example-of-non-linear-unambiguous-and-non-deterministic-cfl?answertab=votes#tab-top)（实际上确定性是非确定性 CFL 的子集）

# java - 在单独的类中调用方法

> ID：15880983
> 
> 赞同：-1
> 
> 时间：2013-04-08T13:55:28.587
> 
> 标签：java, object, methods

首先，我有

```
if (playerCommand.startsWith("yell")) {
            Yell();  

    } 
```

在名为“commands.java”的类中，该类处理输入命令。我想在其他地方的一个类中拥有这个特定命令的方法，代码是

```
public class Yell {
/*
 * The minimum rights required to use the yell channel
 */
private final static int MINIMUM_RIGHTS_REQUIREMENT = 0;

/*
 * Time in seconds between the client must wait between submitting yells
 */
private final static int SECONDS_BETWEEN_SUBMITION = 3;

/*
 * Minimum player rights at which restrictions are ignored
 */
private final static int BYPASS_LIMITATION_RIGHTS = 6;

/*
 * An enumeration containing format data
 */
static enum yellData {
    /* Rights, Color, Title */
    PLAYER(0,"255","Player"),
    SPECIAL(1,"16730502","Special"),
    VETERAN(2,"13132800","Veteran"),
    DONATOR(3,"42575","Donator"),
    SUPER_DONATOR(4,"3327","Super Donator"),
    EXTREME_DONATOR(5,"1800639","Extreme Donator"),
    TRIAL_MODERATOR(6, "11809016", "Trial Mod"),
    MODERATOR(7, "562688", "Mod"),
    ADMIN(8, "15604003", "Admin"),
    HEAD_ADMIN(9, "16274188", "Head Admin"),
    CO_OWNER(10, "13369344", "Co-Owner"),
    OWNER(11, "13369344", "Owner");

    private int rights;
    private String color, title;

    private yellData(int rights, String color, String title) {
        this.rights = rights;
        this.color = color;
        this.title = title; 
    }

    private int getRights() {
        return rights;
    }
    private String getColor() {
        return color;
    }
    private String getTitle() {
        return title;
    }

}

public static void sendYellMessage(final Client c, String text) {
    /* Restrictions - Do not apply to rights under Bypass Limitation Rights */
    if (c.playerRights <= BYPASS_LIMITATION_RIGHTS) {
        if (Connection.isMuted(c)) {
            c.sendMessage("You are muted.");
            return;
        }
        if (c.playerRights < MINIMUM_RIGHTS_REQUIREMENT) {
            c.sendMessage("You do not have permission to use the yell channel.");
            return; 
        }
        if (c.playerCanYell == false) {
            c.sendMessage("Please wait a few seconds between yells.");
            return;
        }

        /* Formatting string prevention */
        String[] forbidden = {"<col", "<shad", "<img", "<str", "<tran", "tradereq", "duelreq", "clanreq", "chalreq", "@str@", "@"}; 
        for (int i = 0; i < forbidden.length; i++) {
            if (text.substring(1).contains(forbidden[i])) {
                c.sendMessage("Your submission contains illegal phrases or characters.");
                System.out.println(formatPlayerName(c.playerName)+" is attempting to use illegal phrases in yell chat.");
                return;
            }
        }
    }

    /* Generates the yell message */
    String toSend = null;
    for (final yellData rank : yellData.values()) {
        if (c.playerRights == rank.getRights()) {
            String prefix = "[<col="+rank.getColor()+">"+rank.getTitle()+"</col>"+"]";
            String name = "<col=255>"+formatPlayerName(c.playerName)+"</col>";
            String message = formatChat(text.replaceAll("/", ""));
            toSend = prefix+" "+name+": "+message;
        }
    }

    /* Send the message to all online players */
    for (int j = 0; j < PlayerHandler.players.length; j++) {
        if (PlayerHandler.players[j] != null) {
            Client op = (Client) PlayerHandler.players[j];
            op.sendMessage(toSend);
        }
    }

    /* Prevent the client from flooding */
    c.playerCanYell = false;
    EventManager.getSingleton().addEvent(new Event() {

        @Override
        public void execute(EventContainer e) {
            c.playerCanYell = true;
            e.stop();
        }
    }, SECONDS_BETWEEN_SUBMITION * 1000 );

    /* Truncate data after use to save memory */
    toSend = null;
}

/*
 * Capitalizes the first letter between spaces
 * Used to properly format character names
 */
private static String formatPlayerName (String in) {
    final StringBuilder output = new StringBuilder(in.length());
    String[] words = in.split("\\s");
    for(byte b=0,l=(byte) words.length;b<l;++b) {
      if(b>0) output.append(" ");      
      output.append(Character.toUpperCase(words[b].charAt(0)))
            .append(words[b].substring(1));
    }
    return output.toString();
}

/*
 * Capitalizes the first letter and does not disturb
 * the rest of the sentence capitalizations
 */
private static String formatChat (String in) {
    return in.substring(0,1).toUpperCase() + in.substring(1);
} 
```

如何在 Commands.java 文件中调用类“Yell.java”？我在声明为对象的命令中大喊大叫

```
Yell = new Yell(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:57:04.550

通过使用创建对象的引用

```
Yell yellObject = new Yell(); 
yellObject.methodName(); // Use appropriate methodName 
```

`new Yell()`创建通过引用变量访问的对象，同样将用于调用创建对象的方法。这`yellObject`是对创建对象的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:03:25.887

使用 `Yell yell = new Yell();` // 它会创建一个你的 Yell 类的对象。并且 `yell.method();` // 这将调用来自 Yell 类的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:57:44.990

```
Yell y = new Yell();

y.methodCommand(); 
```

如果 Commands.java 类中的方法是静态的，您可以直接通过类名调用它：Like

```
Yell.methodName(): 
```

# ios - 在objective-c中更改SQLite中的表名

> ID：15880986
> 
> 赞同：0
> 
> 时间：2013-04-08T13:55:32.590
> 
> 标签：ios, objective-c, sqlite

所以我目前正在编译一个简单的 SQL 查询，如下所示：

```
 const char *sqlQuery = "SELECT value FROM settings WHERE name=? LIMIT 1";

    sqlite3_stmt *compiledStatement;

    if(sqlite3_prepare_v2(database, sqlQuery, -1, &compiledStatement, nil) == SQLITE_OK)
    {
        sqlite3_bind_text(compiledStatement, 1, [name UTF8String], -1, SQLITE_TRANSIENT);

        while(sqlite3_step(compiledStatement) == SQLITE_ROW)
        {
            NSString *theValue = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 0)];

            // ...
        }
    } 
```

但是我希望能够更改我正在调用的表名。我想我可以将 sqlQuery 更改为：

```
const char *sqlQuery = "SELECT value FROM ? WHERE name=? LIMIT 1"; 
```

然后在绑定名称值之前绑定它，但是这不起作用。我想这仅适用于选择参数...

有谁知道是否有办法在此处插入表名，还是我只需要以纯文本形式进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:01:08.600

```
NSString *queryString = [NSString stringWithFormat:@"SELECT value FROM %@ WHERE name=%@ LIMIT 1",tablename,attribute];

 const char *sqlQuery = [queryString UTF8String]; 
```

希望这可以帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:10:45.597

```
 NSString *sqlTemplate = @"SELECT value FROM %@ WHERE name=? LIMIT 1";

 //assuming you have your table name stored in tableName variable
const char *sqlQuery = [[NSString stringWithFormat:sqlTemplate, tableName] UTF8String];

sqlite3_stmt *compiledStatement;

if(sqlite3_prepare_v2(database, sqlQuery, -1, &compiledStatement, nil) == SQLITE_OK)
{
    sqlite3_bind_text(compiledStatement, 1, [name UTF8String], -1, SQLITE_TRANSIENT);

    while(sqlite3_step(compiledStatement) == SQLITE_ROW)
    {
        NSString *theValue = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 0)];

        // ...
    }
} 
```

# svn - SVN 切换命令 - Tortoise SVN 错误

> ID：15880987
> 
> 赞同：1
> 
> 时间：2013-04-08T13:55:33.090
> 
> 标签：svn, tortoisesvn

我在服务器上创建了一个分支（无法从我的开发机器上执行此操作，同样的错误）当我尝试将工作副本切换到新分支时，我得到“遇到不可读的路径；访问被拒绝”。

有什么想法吗？

# asp.net-mvc - 在 VS 中打开/编辑果园

> ID：15880989
> 
> 赞同：0
> 
> 时间：2013-04-08T13:55:37.520
> 
> 标签：asp.net-mvc, orchardcms, orchardcms-1.6

看着`http://docs.orchardproject.net/Documentation/Manually-installing-Orchard-zip-file`

我正在尝试从 VS 运行该项目。我遵循了`Running the Site Using Visual Studio and the Visual Studio Development Server`标题下的建议。但是当我下载 orchard 1.6 并提取文件时，我剩下的就是：

![在此处输入图像描述](https://i.stack.imgur.com/KeQDF.jpg)

然后点击我留下的果园文件夹： ![在此处输入图像描述](https://i.stack.imgur.com/XN13D.jpg)

src 文件夹在哪里？有谁知道我该如何解决这个问题？我希望能够在 VS 中编辑我的项目

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:31:17.167

[来自](http://docs.orchardproject.net/Documentation/Manually-installing-Orchard-zip-file)：

> **使用 Visual Studio 和 Visual Studio 开发服务器运行站点**
> 
> 若要在 Visual Studio 中运行该站点，请将完整的源代码 .zip 文件解压缩到本地文件夹。

这不是很清楚，但这意味着 Orchard.Source.1.6.zip（在该页面屏幕截图的“其他推荐下载”下）而不是 Orchard.Web.1.6.zip。

前者包含自己构建 Orchard 所需的所有源代码，而后者是预编译的发行版。

# php - 复杂的模型导致缓慢/性能不佳

> ID：15880994
> 
> 赞同：0
> 
> 时间：2013-04-08T13:55:46.913
> 
> 标签：php, mysql, codeigniter

您将在下面找到一个名为 CodeIgniter 的模型`getCalls`，我从控制器向其传递以下值`$manager, $level, $department, $id`

**在里面我做了以下动作：**

1.  我检查登录用户的级别并将他/她指向正确的代码
2.  我将所有需要在视图中的数据收集在一个名为的数组中`$callInfo`

*我在数据库中为所有连接的列创建了一个索引。*

调用处理此模型的控制器时，我遇到了速度问题。Firebug 告诉我加载页面大约需要 30 秒。

请注意，服务器性能和规格不如您预期的那么好。这也是唯一一个运行缓慢的“复杂屏幕”，我对下面的代码没有任何问题，只是速度问题。

请注意，我通过 $.ajax 调用该页面，您可以在下面找到函数...

**请指教**

```
function getCalls($manager, $level, $department, $id){
        $callInfo = array();
        $empMeta = array();
        $MetaEmp = array();     
        $callMeta = array();
        $MetaCall = array();
        $TheCall = array();

        if($manager == true && $level == '3'){
            $query = $this->db->query("SELECT id_call, name_co, callStatus_call, dueDate_call, idemp_call FROM ecc_calls_call JOIN ecc_employees_emp ON idemp_call = id_emp JOIN ecc_company_co ON idco_call = id_co JOIN ecc_mempership_memper ON idemp_memper = idemp_call JOIN ecc_department_dep ON id_dep = iddep_memper WHERE status_call = 'active' && name_dep = {$department} ORDER BY id_call DESC");             
            if($query->num_rows() >= 1){
                foreach($query->result() as $row){
                    //employee meta
                    $employee = $this->db->query("SELECT * FROM ecc_employee_empmeta WHERE idemp_empmeta = {$row->idemp_call}");
                    if($employee->num_rows() >= 1){
                        foreach($employee->result() as $rowEmp){
                            $empMeta[$rowEmp->metaKey_empmeta] = $rowEmp->metaValue_empmeta;
                        };
                        $MetaEmp = array(
                            'first_name' => $empMeta['first_name'],
                            'last_name' => $empMeta['last_name'],
                            'position' => $empMeta['position'],
                            'avatar' => $empMeta['avatar'],
                            'mobile' => $empMeta['mobile']        
                        );
                        //return $MetaEmp;
                    }                   
                    //call meta
                    $call = $this->db->query("SELECT * FROM ecc_call_cmeta WHERE idcall_cmeta = {$row->id_call}");
                    if($call->num_rows() >= 1){
                        foreach($call->result() as $rowCall){
                           $callMeta[$rowCall->metaKey_cmeta] = $rowCall->metaValue_cmeta;
                        };
                        $MetaCall = array(
                            'inDate' => $callMeta['inDate'],
                            'feedback' => $callMeta['feedback'],
                            'reason' => $callMeta['reason']        
                        );
                    }       
                    $callInfo['id'] = $row->id_call;
                    $callInfo['name'] = $MetaEmp['first_name'] . " " . $MetaEmp['last_name'];
                    $callInfo['inDate'] = $MetaCall['inDate'];
                    $callInfo['feedback'] = $MetaCall['feedback'];
                    $callInfo['reason'] = $MetaCall['reason'];
                    $callInfo['company'] = $row->name_co;
                    $callInfo['dueDate_call'] = date('Y-m-d', strtotime($row->dueDate_call));
                    $callInfo['callStatus_call'] = $row->callStatus_call;   
                    $TheCall[] = $callInfo;         
                }//foreach call
            }//if
            return $TheCall;                

        }elseif($level == 1){
            $query = $this->db->query("SELECT id_call, name_co, callStatus_call, dueDate_call, idemp_call  FROM ecc_calls_call JOIN ecc_employees_emp ON idemp_call = id_emp JOIN ecc_company_co ON idco_call = id_co WHERE status_call = 'active' ORDER BY id_call DESC");             
            if($query->num_rows() >= 1){
                foreach($query->result() as $row){
                    //employee meta
                    $employee = $this->db->query("SELECT * FROM ecc_employee_empmeta WHERE idemp_empmeta = {$row->idemp_call}");
                    if($employee->num_rows() >= 1){
                        foreach($employee->result() as $rowEmp){
                            $empMeta[$rowEmp->metaKey_empmeta] = $rowEmp->metaValue_empmeta;
                        }
                        $MetaEmp = array(
                            'first_name' => $empMeta['first_name'],
                            'last_name' => $empMeta['last_name'],
                            'position' => $empMeta['position'],
                            'avatar' => $empMeta['avatar'],
                            'mobile' => $empMeta['mobile']        
                        );
                        //return $MetaEmp;
                    }                   
                    //call meta
                    $call = $this->db->query("SELECT * FROM ecc_call_cmeta WHERE idcall_cmeta = {$row->id_call}");
                    if($call->num_rows() >= 1){
                        foreach($call->result() as $rowCall){
                            $callMeta[$rowCall->metaKey_cmeta] = $rowCall->metaValue_cmeta;
                        }
                        $MetaCall = array(
                            'inDate' => $callMeta['inDate'],
                            'feedback' => $callMeta['feedback'],
                            'reason' => $callMeta['reason']        
                        );
                    }       
                    $callInfo['id'] = $row->id_call;
                    $callInfo['name'] = $MetaEmp['first_name'] . " " . $MetaEmp['last_name'];
                    $callInfo['inDate'] = $MetaCall['inDate'];
                    $callInfo['feedback'] = $MetaCall['feedback'];
                    $callInfo['reason'] = $MetaCall['reason'];
                    $callInfo['company'] = $row->name_co;
                    $callInfo['dueDate_call'] = date('Y-m-d', strtotime($row->dueDate_call));
                    $callInfo['callStatus_call'] = $row->callStatus_call;   
                    $TheCall[] = $callInfo;         
                }//foreach call
            }//if
            return $TheCall;                
        }elseif($level == 3){
            $query = $this->db->query("SELECT id_call, name_co, callStatus_call, dueDate_call, idemp_call FROM ecc_calls_call JOIN ecc_employees_emp ON idemp_call = id_emp JOIN ecc_company_co ON idco_call = id_co WHERE status_call = 'active' && idemp_call = {$id} ORDER BY id_call DESC");                
            if($query->num_rows() >= 1){
                foreach($query->result() as $row){
                    //employee meta
                    $employee = $this->db->query("SELECT * FROM ecc_employee_empmeta WHERE idemp_empmeta = {$row->idemp_call}");
                    if($employee->num_rows() >= 1){
                        foreach($employee->result() as $rowEmp){
                            $empMeta[$rowEmp->metaKey_empmeta] = $rowEmp->metaValue_empmeta;
                        }
                        $MetaEmp = array(
                            'first_name' => $empMeta['first_name'],
                            'last_name' => $empMeta['last_name'],
                            'position' => $empMeta['position'],
                            'avatar' => $empMeta['avatar'],
                            'mobile' => $empMeta['mobile']        
                        );
                        //return $MetaEmp;
                    }                   
                    //call meta
                    $call = $this->db->query("SELECT * FROM ecc_call_cmeta WHERE idcall_cmeta = {$row->id_call}");
                    if($call->num_rows() >= 1){
                        foreach($call->result() as $rowCall){
                            $callMeta[$rowCall->metaKey_cmeta] = $rowCall->metaValue_cmeta;
                        }
                        $MetaCall = array(
                            'inDate' => $callMeta['inDate'],
                            'feedback' => $callMeta['feedback'],
                            'reason' => $callMeta['reason']        
                        );
                    }       
                    $callInfo['id'] = $row->id_call;
                    $callInfo['name'] = $MetaEmp['first_name'] . " " . $MetaEmp['last_name'];
                    $callInfo['inDate'] = $MetaCall['inDate'];
                    $callInfo['feedback'] = $MetaCall['feedback'];
                    $callInfo['reason'] = $MetaCall['reason'];
                    $callInfo['company'] = $row->name_co;
                    $callInfo['dueDate_call'] = date('Y-m-d', strtotime($row->dueDate_call));
                    $callInfo['callStatus_call'] = $row->callStatus_call;   
                    $TheCall[] = $callInfo;         
                }//foreach call
            }//if
            return $TheCall;                                
        }
} 
```

**这是ajax函数...**

```
$.ajax({
    type: 'GET',
    url: "<?php echo base_url() . 'boffice/dataTable/'; ?>" + type + "/" + arg,
    //data: {},//add variables
    beforeSend:function(){
        //this is were the loading image load
        $('.PreviewHere').append('<div class="preloading"><img src="<?php echo base_url() . "assets/images/loading.gif"; ?>" alt="تحميل" /></div>').show();
    },
    success: function(data){
        //successful request, do somthing with the data
        $('.PreviewHere').html(data).show();
        $(".preloading").remove();
    },
    error: function(){
        //failed request
    },
    datatype: 'html'
})//ajax 
```

# java - deployJava.runApplet 不工作

> ID：15880998
> 
> 赞同：0
> 
> 时间：2013-04-08T13:55:57.360
> 
> 标签：java, extjs, applet, jnlp, deployjava

我在我的“ **Extjs UI 框架**”中使用**小程序**。如果我使用“ **index.html ”在“** **applet.js** ”文件下面调用，它工作正常。

 ********但是，如果我在除“ .html 文件**”之外的任何脚本中调用，则它不起作用。只是页面数据被清除并且看起来是**完整的空白页面**。你能告诉我如何解决这个问题。

我需要通过其他“.js 文件”调用我的“applet.js”脚本，**而不是通过“.html 文件”**。可能吗？请举例说明。

**applet.js:- ----------**

```
var attributes = {
    tag: 'applet',
    code: 'com.src.test.Applet',
    archive: 'Test.jar',
    width: 1,
    height: 1,
    id: 'test',
    mayscript: true
},
parameters = {
    jnlp_href: 'test.jnlp'
};

deployJava.runApplet(attributes, parameters, '1.7'); 
```

**html:- -----**

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<script type="text/javascript" src="applet.js"></script>
</body>
</html>

**Sample code for Calling through other js file:-
-----------------------------------------------**    

    Ext.namespace('Test');

    launch: function () {
        this.test();
    },

    test: function () {
        var attributes = {
        tag: 'applet',
        code: 'com.src.test.Applet',
        archive: 'Test.jar',
        width: 1,
        height: 1,
        id: 'test',
        mayscript: true
   },

   parameters = {
      jnlp_href: 'test.jnlp'
   };

   deployJava.runApplet(attributes, parameters, '1.7');
   } 
```

感谢您对此进行调查....玛丽亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:19:17.533

applet 标记仅在 html 中可用，这就是它需要在 .html 文件上执行的原因

您应该在 html 标记中添加另一个 .js 脚本并检查是否有效

每当你打电话

它将您的 .js 脚本替换为关联的标记及其属性，这就是它可能起作用的原因。******