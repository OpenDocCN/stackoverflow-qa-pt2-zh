# StackOverflow 问答 16090000-16090999

# r - 如何通过解析文档 ID 为语料库中的每个文档设置作者

> ID：16090001
> 
> 赞同：0
> 
> 时间：2013-04-18T17:57:17.527
> 
> 标签：r, tm

我有一个像这样的 tm Corpus 对象：

```
> summary(corp.eng)
A corpus with 154 text documents

The metadata consists of 2 tag-value pairs and a data frame
Available tags are:
  create_date creator 
Available variables in the data frame are:
  MetaID 
```

语料库中每个文档的元数据如下所示：

```
> meta(corp.eng[[1]])
Available meta data pairs are:
  Author       : 
  DateTimeStamp: 2013-04-18 14:37:24
  Description  : 
  Heading      : 
  ID           : Smith-John_e.txt
  Language     : en_CA
  Origin       : 
```

我知道我可以一次设置一个文档的作者：

```
meta(corp.eng[[1]],tag="Author") <-  
  paste(
    rev(
      unlist(
        strsplit(meta(corp.eng[[1]],tag="ID"), c("[-_]"))
      )[1:2]
    ), collapse=' ') 
```

这给了我这样的结果：

```
> meta(corp.eng[[1]],tag="Author")
[1] "John Smith" 
```

如何批处理作业？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:11:31.633

注意：这应该仍然是一个评论，但有一些工作部分，所以这里有一个例子：

```
data(crude)
extracted.values <- meta(crude,tag="Places",type="local")
for (i in seq_along(extracted.values)) {
     meta(crude[[i]],tag="Places") <- substr(extracted.values[[i]],1,3)
} 
```

使用它也应该能够做到这`lapply`一点，但由于我不熟悉 的内部工作原理`tm`，我会坚持使用循环。用你需要的函数替换`substr`函数，当然左侧的数据也是如此。希望这可以帮助。

# java - 使用 jdbc 将值插入数据库

> ID：16090006
> 
> 赞同：0
> 
> 时间：2013-04-18T17:57:34.597
> 
> 标签：java, database, ms-access, jdbc-odbc

我正在使用 MS-Access 和 Java 连接 JDBC-ODBC 驱动程序。正如下面的代码，我正在尝试创建一个注册文本框，但是当我添加值时，我只会在数据库中得到结果“null”。我如何获得我插入的真正价值？谢谢

```
 Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

    Connection con = DriverManager.getConnection("jdbc:odbc:ADB");

    Statement statement = con.createStatement();

    statement.executeUpdate("insert into Login " + "values  ('"+uname+"','"+pwd+"')"); 

    uname = userTextBox.getText();
    pwd = passTextBox.getText(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:00:32.347

从外观上看，您的语句代码很好。问题是您正在初始化`uname`并`pwd`在执行它之后。

我假设您在上面的某个地方已将这些变量初始化为`null`. 因此，在执行语句时，它必须插入的值是`null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:01:23.313

根据您提供的信息量，如果您显示完整的代码，我可以相应地更新我的答案，我假设您需要更改：

```
statement.executeUpdate("insert into Login " + "values  ('"+uname+"','"+pwd+"')"); 

uname = userTextBox.getText();
pwd = passTextBox.getText(); 
```

至：

```
uname = userTextBox.getText();
pwd = passTextBox.getText();

statement.executeUpdate("insert into Login " + "values  ('"+uname+"','"+pwd+"'")"); 
```

此外，您的查询容易受到 SQL 注入攻击。始终使用类似于以下的参数化查询：

```
insert into Login values (?,?) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:04:42.993

更新查询不返回插入或修改的值。您可以做的不是让数据库自动生成新条目的 ID，而是在插入之前自己生成，然后使用该 ID 查询数据库。

您应该查看涵盖此主题的堆栈溢出帖子： [如何在 JDBC 中获取插入 ID？](https://stackoverflow.com/questions/1915166/how-to-get-the-insert-id-in-jdbc)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T19:06:31.217

```
//before using the variables need to initialize 

uname = userTextBox.getText();
pwd = passTextBox.getText();

statement.executeUpdate("insert into Login " + "values  ('"+uname+"','"+pwd+"')"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T18:01:01.700

您需要 在执行更新之前进行`uname`初始化：`pwd`

```
uname = userTextBox.getText();
pwd = passTextBox.getText();
statement.executeUpdate("insert into Login " + "values  ('"+uname+"','"+pwd+"')"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T18:01:17.380

您需要从

```
statement.executeUpdate("insert into Login " + "values  ('"+uname+"','"+pwd+"')"); 
uname = userTextBox.getText();
pwd = passTextBox.getText(); 
```

至

```
uname = userTextBox.getText();
pwd = passTextBox.getText();
statement.executeUpdate("insert into Login " + "values  ('"+uname+"','"+pwd+"')"); 
```

否则将为`uname`空`pwd`（前提是在此代码之前没有给它们任何值）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-18T18:26:08.583

您只需要先获取值然后输入查询:)

字符串 uname = userTextBox.getText();
String pwd = passTextBox.getText();

```
try          
    {     

    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");    

    Connection con = DriverManager.getConnection("jdbc:odbc:ADB");    

    Statement statement = con.createStatement();     

    statement.executeUpdate("insert into Login " + "values  ('"+uname+"','"+pwd+"')");     
     }
   catch(Exception e)        
    {      
       System.out.println(e);      
    } 
```

# jquery - jqPagination - 如何指定每页的记录数？

> ID：16090020
> 
> 赞同：4
> 
> 时间：2013-04-18T17:58:31.760
> 
> 标签：jquery, jquery-pagination, jqpagination

我最近一直在[玩弄 jqPagination](http://beneverard.github.io/jqPagination/)，这是一个用于分页的 jQuery 插件。这是一个非常简洁的插件，我喜欢你输入页码的方式。但是，我遇到了一些困难，因为没有太多的文档。虽然这可能是一个简单的问题，但我只是好奇是否有办法指定每页显示多少条记录。我目前对每页一条记录进行分页，这由 jQuery 选择器控制。但是，我希望能够指定多少个数字。

显示我拥有的一些代码可能会更简单。我实际上使用了之前的堆栈溢出[问题](https://stackoverflow.com/questions/11362445/how-to-use-jqpagination)作为基础：

```
<div id="container">
    <div id="div1">Any elements</div>
    <div id="div2">Any elements</div>
    <div id="div3">Any elements</div>
    ... and so on
</div> 
```

对于 jQuery：

```
//Hide 
$("#container").children().not('#firstDiv').hide();

$('.pagination').jqPagination( {
    max_page    : $('#container').children().length,
    paged        : function(page) {

        //hide the other divs
        $('#container').children().hide();

        //show the divs on the specified page
        $($('#container').children()[page - 1]).show(); 
```

所以上面的代码一次只会显示一个 div，我想指定它可以显示多少个元素/div。

哦，作为一个后续问题，是否可以指定某个 div 出现在某个页面上，例如让页脚只出现在最后一页上？

**更新：已完成**

在创作者的帮助下，我能够弄清楚。我在下面发布我的解决方案，以防将来可以帮助其他人。我让用户选择 XML 文件中每页的记录数（不包括 XML 选择器）。如果每页的记录少于总数，它将显示分页。我确信有一种更有效的方法，但我对我所拥有的感到满意。下面是代码：

```
/*---------------------------------------------------------------------------
Place this anywhere in your script.
Automatically hide pagination. 
If there are less scenes per page than the total amount, then include pagination.
----------------------------------------------------------------------------*/
$(".pagination").hide();
var recordsPerPage = 5
var totalNumRecords = 20;

if (recordsPerPage < totalNumRecords) {
     pagination(recordsPerPage, totalNumRecords);
}

//recordsPerPage is the number of items you want to display on each page
//totalNumRecords is the total number of items that you have

function pagination(recordsPerPage, totalNumRecords){
    //Show the pagination controls
    $(".pagination").show();

    //loop through all of the divs and hide them by default.
    for (var i=1; i <= totalNumRecords; i++) {
        $("#container").find("#div" + i).hide();
    }

    //then only display the number of divs the user dictated
    for (var i = 1; i <= recordsPerPage; i++) {
        $("#container").find("#div" + i).show();
    }

    //maxPages is the maximum amount of pages needed for pagination. (round up) 
    var maxPages = Math.ceil(totalNumRecords/recordsPerPage);   

    $('.pagination').jqPagination({
        link_string : '/?page={page_number}',
        max_page     : maxPages,
        paged        : function(page) { 

            //a new page has been requested

            //loop through all of the divs and hide them all.
            for (var i=1; i <= totalNumRecords; i++) {
                $("#container").find("#div" + i).hide();
            }

            //Find the range of the records for the page: 
            var recordsFrom = recordsPerPage * (page-1) + 1;
            var recordsTo = recordsPerPage * (page);

            //then display only the records on the specified page
            for (var i = recordsFrom; i <= recordsTo; i++) {
                $("#container").find("#div" + i).show();
            }      

            //scroll to the top of the page if the page is changed
            $("html, body").animate({ scrollTop: 0 }, "slow");
        }
    });
} 
```

谢谢本！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:16:02.993

您能否拥有一系列`div`元素，其中包含您的页面，并且在这些元素中只显示您想要的尽可能多的记录？这样您就可以`div`使用插件简单地显示/隐藏每个页面。

这可能就是我在那种情况下会做的事情。

# xcode - 如果您今天开始 iOS 编程，您认为哪些框架仍然必要且有用？

> ID：16090021
> 
> 赞同：0
> 
> 时间：2013-04-18T17:58:33.197
> 
> 标签：xcode, rest, ios6, xcode4.5, libraries

我最近开始了 iOS 开发，作为一名 Web 开发人员进入其中。我无法想象不使用 jquery 和 modernizor 之类的工具。（我知道很多其他人可以，但就是这样）

XCode 似乎在过去一年左右经历了一些重大的升级，使得很多库变得不那么有用了。

**示例：**很多教程都推荐使用 JSONkit，但是随着 NSJSONSerialization 的出现，JSONkit 似乎已经失宠。这是真的？

**我的问题是：**如果你今天（2013 年 4 月 18 日）开始开发一个服务器支持的 iOS 应用程序，你会推荐哪些框架/库来寻找下面描述的简单应用程序规范？

让我们说应用程序：

*   执行所有常规 REST 功能
*   获取 JSON 结果并将它们绘制在地图上
*   创建数据的列表视图

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:46:19.923

一个简单的答案：学习如何使用[RestKit](https://github.com/RestKit/RestKit)

如果您想构建您描述的应用程序，它将完成大部分工作。[本教程](http://www.raywenderlich.com/13097/intro-to-restkit-tutorial)将帮助您使用 restkit 构建应用程序。

# amazon-web-services - Amazon EC2 实例 - Play 框架连接

> ID：16090022
> 
> 赞同：0
> 
> 时间：2013-04-18T17:58:37.367
> 
> 标签：amazon-web-services, playframework, amazon-ec2, connection, port

我创建了一个 EC2 实例并添加了所有 TCP 和 UDP 端口。ICMP 也...用端口 9000 和 80 启动了我的游戏应用程序，但都没有成功。应用程序启动，我可以从实例连接到它，但我无法从外部连接到它。

telnet instance_dns_name 9000 失败，而 telnet instance_dns_name 3389 有效。

我不知道我错过了什么。同样的问题也发生在微软的 Azure 中。可能与地区有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:34:22.977

您是否在 AWS EC2 安全组页面中打开了端口并关闭了本地防火墙或打开了必要的端口？你可能需要两者都做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T09:27:53.360

还有一件事很重要...

如果您有*Debian*或*Ubuntu*的 Amazon EC2 实例- 默认情况下，它们没有内部防火墙 ( **iptables** )

另一方面，*RedHat 企业*版确实**有**防火墙，如果你想正常工作，你可以在*iptables*中打开正确的端口或禁用*iptables* - 你的选择。

我更喜欢完全禁用*iptables ，因为您已经拥有与**iptables*具有相同角色的 Amazon 安全组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T07:17:47.720

事实证明，实例也有防火墙。当我将入站规则添加到 Windows Server 2008 实例的防火墙时，问题解决了。

# flash - 在使用 flash 的简单 pacman 游戏中与墙壁碰撞

> ID：16090031
> 
> 赞同：0
> 
> 时间：2013-04-18T17:58:57.573
> 
> 标签：flash, collision, pacman

我可以阻止 PacMan 以一种方式穿过墙壁，但当他朝另一个方向走时，他可以穿过墙壁，我使用的代码是：

```
onClipEvent (enterFrame) {
if (_root.char.hitTest(this))
{
    _root.char._x -= 7;
} 
```

}

我需要他在任何方向旅行时都不要穿过墙壁！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:19:18.573

你正面临这样的错误，因为当你修改 heroe 的“x”属性时，你总是减少它。因此，在一个方向上，当您从左向右移动并增加对象的“x”值时，您的代码可以正常工作。但是当你朝相反的方向移动时，你会减小“x”值，并且在碰撞时，你的对象只会稍微加速（7 个像素）。

为避免此错误，您必须仅在移动过程中增加对象的“x”时才减小它，在其他情况下，您必须增加它。

# jquery - 如果单击某个孩子，如何防止单击功能？

> ID：16090041
> 
> 赞同：0
> 
> 时间：2013-04-18T17:59:42.047
> 
> 标签：jquery

[小提琴](http://jsfiddle.net/F2pt8/)

由于某种原因，函数`not()`中`on()`的 不起作用。我只希望在单击 aqua `section`（父）元素时运行该函数，如果单击灰色`div`（子）元素，则不执行任何操作。

jQuery：

```
$('body').append('<section><div class="someClass"></div><section>');

$('body').on('click', 'section:not(".someClass")', function(){
    alert('Aqua not gray clicked.');
}); 
```

`section`另外，为什么单击 aqua 元素时会弹出两次警报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:00:38.107

部分和后代选择器之间会有空间`:not`，您可能需要没有，因为预期元素是部分的后代。有了空间，它会看起来没有 class 的部分`someclass`。

```
$('body').on('click', 'section :not(:has(.someClass))', function(){
    alert('Aqua not gray clicked.');
}); 
```

您可以将事件绑定到部分，并通过在处理程序中为具有类 someclass 的后代的部分传递代码的执行。

```
$('body').on('click', 'section', function(){
    if($(this).find('.someClass').length > 0) return;
    alert('Aqua not gray clicked.');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:03:21.660

You need to check whether the actual element that was clicked (`e.target`) has that class:

```
if ($(e.target).hasClass('someClass')) return; 
```

# python - Python TypeError：预期范围（）整数结束参数，得到浮点数

> ID：16090050
> 
> 赞同：0
> 
> 时间：2013-04-18T18:00:08.057
> 
> 标签：python, python-3.x

我提前道歉，我看到已经给出了类似错误的答案，但我无法为我的案例做出任何解释。我的 python 非常基础，我正在尝试运行那一小段代码：

```
mybox = (17.0, -13.0, 489.0644700903291, 566.0)
# this 'box' is my input so these values will vary

xMin, yMin, xMax, yMax = mybox

yValue = range(yMin, yMax, 30) 
```

运行它，我得到一个错误：

```
TypeError: range() integer end argument expected, got float. 
```

有没有办法在这样的范围内使用浮点数？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:21:53.723

您正在寻找范围，可以在 numpy（或 pylab）中找到。

```
import numpy
...
yValue = numpy.arange(yMin, yMax, 30.0) 
```

# css - 渐变结束后如何显示白色而不是灰色？

> ID：16090053
> 
> 赞同：1
> 
> 时间：2013-04-18T18:00:14.100
> 
> 标签：css, background-image, linear-gradients

我有以下用于背景颜色/渐变的 CSS：

```
background-color: #FFFFFF;
background: -moz-linear-gradient(top,  #d7d6d2,  #f9ffff);
background-image: linear-gradient(top,  #d7d6d2,  #f9ffff);
background-image: -o-linear-gradient(top,  #d7d6d2,  #f9ffff);
background-image: -moz-linear-gradient(top,  #d7d6d2,  #f9ffff);
background-image: -webkit-linear-gradient(top,  #d7d6d2,  #f9ffff);
background-image: -ms-linear-gradient(top,  #d7d6d2,  #f9ffff); 
```

使用它我可以完成我需要的工作，但是在渐变结束后会有灰色而不是白色。我该怎么做才能在渐变结束后开始显示白色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:11:37.087

将容器背景设置为白色。在这种情况下，它使用 html 和正文 DEMO [http://jsfiddle.net/kevinPHPkevin/RxXHz/](http://jsfiddle.net/kevinPHPkevin/RxXHz/)

CSS

```
html {
    height:100%;
    background-color: #FFFFFF;
}
body {
    padding:0;
    margin:0;
    width:100%;
    height:100%;
    background-color: #FFFFFF;
    background: -moz-linear-gradient(top, #d7d6d2, #f9ffff);
    background-image: linear-gradient(top, #d7d6d2, #f9ffff);
    background-image: -o-linear-gradient(top, #d7d6d2, #f9ffff);
    background-image: -moz-linear-gradient(top, #d7d6d2, #f9ffff);
    background-image: -webkit-linear-gradient(top, #d7d6d2, #f9ffff);
    background-image: -ms-linear-gradient(top, #d7d6d2, #f9ffff);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T18:17:11.813

查看您的渐变定义，为什么不将结束颜色设置为纯白色：

```
background-image: linear-gradient(top,  #d7d6d2,  #ffffff); 
```

目前，您的结束颜色非常接近白色`#f9ffff`，以至于大多数人的眼睛不够敏锐，无法区分差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T18:17:36.557

该渐变的白色部分将到达分配给它的任何元素的底部。我的猜测是，您在分配给它的东西之外还有一些不是白色的东西。

# sql-server - 在查询中连接变量 - SQL Server 2008

> ID：16090055
> 
> 赞同：0
> 
> 时间：2013-04-18T18:00:19.357
> 
> 标签：sql-server, concatenation

我的问题是基本的。

我正在创建一个存储过程并让它具有以下变量：

```
@ConcatenarClausulaWhere 
```

在执行过程期间，在此变量中连接了几个条件，以便在 WHERE 之后插入：

```
SELECT ID
FROM TABLE1
WHERE indStatus = 'True'
AND (Description LIKE '%' + @ STRING + '%') 
```

我的意图是做类似的事情：

```
SELECT ID
FROM TABLE1 The
WHERE indStatus = 'True'
AND (Description LIKE '%' + @ STRING + '%') + @ ConcatenarClausulaWhere 
```

但是，这是不可能的。为什么？

我正在使用 SQL Server 2008

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:04:38.143

您需要动态 SQL 将`WHERE`子句附加到查询中。`SELECT`语句不仅仅是一个字符串。您还需要非常警惕这里的 SQL 注入。您如何验证哪些用户正在输入此 where 子句参数？

```
DECLARE @sql NVARCHAR(MAX) = N'SELECT ID FROM dbo.TABLE1 
  WHERE indStatus = ''True'' AND (Description LIKE @String)'
  + @ConcatenarClausulaWhere;

EXEC sp_executesql @sql, N'@String NVARCHAR(MAX)', N'%' + @STRING + '%'; 
```

# python - 如何使用索引列表索引多个列表的字典？

> ID：16090057
> 
> 赞同：0
> 
> 时间：2013-04-18T18:00:22.993
> 
> 标签：python, list, dictionary, python-2.7, indexing

我在 Python 2.7.3 上。如果我有一个列表字典，如下所示：

```
>>> x1 = [1,2,3,4,5,6,7,8,5]
>>> x2 = range(11,20)
>>> mydict = {'first':x1,'second':x2} 
```

...并且列表大小相同...

```
>>> len(mydict['second']) == len(mydict['first'])
True 
```

如何使用这样的索引列表：

```
>>> ind = [0,1,2,3,4,5,6,7] 
```

从我的字典中的两个列表中获取值？我尝试使用“ind”列表进行索引，但无论 ind 是这样的列表还是元组，都会不断出现错误：

```
>>> mydict['second'][ind]
TypeError: list indices must be integers, not set 
```

我意识到列表不是整数，但集合中的每个值都是整数。有没有什么方法可以在循环中不迭代计数器的情况下到达 x1[ind] 和 x2[ind]？

不知道这是否重要，但我已经有了从找到这样的唯一值中得到的索引列表：

```
>>> import numpy as np
>>> ux1 = np.unique(x1, return_index = True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:02:54.447

你想使用[`operator.itemgetter`](http://docs.python.org/3.3/library/operator.html#operator.itemgetter)：

```
getter = itemgetter(*ind)
getter(mydict['second']) # returns a tuple of the elements you're searching for. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:03:09.113

You can use `operator.itemgetter`:

```
from operator import itemgetter
indexgetter = itemgetter(*ind)
indexed1 = indexgetter(mydict['first'])
indexed2 = indexgetter(mydict['second']) 
```

note that in my example, `indexed1` and `indexed2` will be `tuple` instances, not `list` instances. The alternative is to use a list comprehension:

```
second = mydict['second']
indexed2 = [second[i] for i in ind] 
```

# python - Python中是否有一种标准方法可以将字符串与任意可接受值列表进行模糊匹配？

> ID：16090060
> 
> 赞同：4
> 
> 时间：2013-04-18T18:00:32.703
> 
> 标签：python, string, python-2.7

我希望有这样的功能：

```
def findSimilar(string, options):
    ....
    return aString 
```

Where`aString`类似于传递的字符串，但存在于`options`. 我正在使用这个函数来规范来自我正在开发的玩具应用程序的用户输入。我读过关于使用 levenshtein 距离的信息，但我决定在这里问，因为我希望 Python 标准库中有一个简单的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T19:44:41.920

使用.[`difflib`](http://docs.python.org/2/library/difflib.html)`.get_close_matches`

> get_close_matches（单词，可能性[，n] [，截止]）
> 
> 返回最佳“足够好”匹配的列表。word 是需要紧密匹配的序列（通常是字符串），可能性是要匹配 word 的序列列表（通常是字符串列表）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T18:03:28.150

计算 Levenshtein 距离：

[http://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)

已经有 python 实现，虽然我不知道它们的质量......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-18T18:03:53.967

我想你可能想看看这篇文章。你只需要一个模糊字符串比较器。

[https://stackoverflow.com/questions/682367/good-python-modules-for-fuzzy-string-comparison](https://stackoverflow.com/questions/682367/good-python-modules-for-fuzzy-string-comparison)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-26T14:14:14.567

我建议使用[fuzzywuzzy](https://github.com/seatgeek/fuzzywuzzy) Seat Geek。他们有一个很棒的功能，称为 process 可以完全满足您从他们的网站上寻找的功能，但适合您的问题：

```
 string = "new york jets"
    options = ["Atlanta Falcons", "New York Jets", "New York Giants", "Dallas Cowboys"]
    process.extract(string, options, limit=2)
[('New York Jets', 100), ('New York Giants', 78)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T19:37:21.973

从您的问题的描述中，您不需要任何类型的字符串相似性，您只需要知道输入字符串是否在列表中。为此，只需使用一个集合，并测试该字符串是否在集合中，如下所示：

```
def isStringAcceptable(string, set):
    return string in set 
```

如果你想容忍用户输入错误的字符串，你需要决定你要容忍什么样的错误。使用 Levinshtein distance 之类的东西可能对你想要的东西来说太过分了，它可能会给你带来有趣的结果。如果您只想检查大小写，请调用`string.lower()`并确保您的集合中的所有字符串都是小写的。您可能不需要像字符串相似度度量那样花哨的东西。

# c++ - 使用 malloc 和 realloc 的最佳方式

> ID：16090062
> 
> 赞同：1
> 
> 时间：2013-04-18T18:00:44.110
> 
> 标签：c++, malloc, realloc

我对使用 malloc 和 realloc 很陌生，我有几个问题。

问题 1。

我正在制作的游戏允许您创建自己的空间芯片，知道这一点我想知道重新分配两倍于标准的当前内存量是否更好。或者按照为所需顶点重新分配 100 个额外空间的方式做一些事情？我自己认为第二种选择会更好，但也许有些我不知道。

问题2

如果我有一个 malloced arrays[20] [4] 我如何将它重新分配到 squares[100][4] 的大小？我是否将第一个数组重新分配到 100，然后将 4 个新点重新分配到 20-99？

问题 3

现在，当我重新分配数据时，会发生一些奇怪的事情。如果我设置了一个断点，一切都会很好，但如果我让代码同时工作，它就会崩溃。所以我猜有内存泄漏。现在这是我的 realloc 代码。

```
unsigned char *temp =( unsigned char* ) realloc(realSpaceship, gridSize*sizeof( unsigned char ));
if(temp != NULL)
{
    realSpaceship = temp;
    //free(temp); Line is now deleted at the advice of the helpfull people here.
}
else
{
    //error
    printf("realloc error\n");
    free(realSpaceship);
} 
```

我认为释放 temp 是一个好主意，但它只会使代码在不同的位置崩溃。

！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！ ！！！！！！！！！！！！！！！！！！！！！！！！

我刚刚意识到问题不在于 realloc 而是其他地方。

！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！ ！！！！！！！！！！！！！！！！！！！！！！！！

一点额外的信息。我正在使用 c++ 而且我也在使用 glm

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:18:36.880

老实说，避免`realloc`多次使用。`malloc`一次并坚持下去，直到遇到极端情况，然后`realloc`（但即使那样，也要避免它！）

主要原因是调试和测试。如果程序在 处失败`realloc`，可能有多种原因……而且大部分来自操作系统。（即没有足够的内存，试图使用刚刚释放的内存等）这些都是难以重现和调试的错误。

做一些数学运算，计算出您的用例所需的最大值`malloc`。继续编写其他内容。调试`realloc`错误并不好玩。

# c# - 如何检测默认上下文菜单中的点击（组合框）

> ID：16090064
> 
> 赞同：2
> 
> 时间：2013-04-18T18:00:57.437
> 
> 标签：c#, .net, winforms, .net-3.5

我在 Winforms C# 项目中有一个 ComboBox。当用户右键单击组合框以调出上下文菜单，然后从默认的 ContextMenuStrip 中选择一个项目（左键单击）时，我希望能够捕获该事件。我应该处理哪个事件？

是否可以在不制作我自己的自定义 ContextMenuStrip 的情况下做到这一点？如果我必须自己制作，有没有一种使用 Windows 默认 ContextMenuStrip 作为起点的好方法？

编辑：这个问题类似： [将项目添加到默认的文本框上下文菜单](https://stackoverflow.com/q/1346473/334855)

但它正在谈论将项目添加到默认菜单。我在询问从默认上下文菜单中选择项目的捕获事件。如果我需要制作一个自定义的 ContextMenuStrip 来执行此操作，那很好，请这样回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:20:32.493

抱歉，我最初误解了这个问题，但现在修改了我的答案，向您展示如何从上下文菜单中检测点击

在寻找解决方案时，我遇到了许多指向 WinProc 的文章。沿着那条大道走下去，我遇到了以下情况

*   [Windows 应用程序 UI 中的菜单参考](http://msdn.microsoft.com/en-us/library/windows/desktop/ff468864%28v=vs.85%29.aspx)

由于您对单击命令感兴趣，因此我进入了菜单通知，然后查看了[WM_MENUCOMMAND](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647603%28v=vs.85%29.aspx)消息。

然后，您必须创建一个用户控件并将其更改为从文本框继承并添加以下覆盖

```
public partial class TextBoxUsingDefaultContextMenu : TextBox
{
    public TextBoxUsingDefaultContextMenu()
    {
        InitializeComponent();
    }

    protected override void WndProc(ref Message m)
    {
        const int WM_CONTEXTMENU = 0x007B;
        const int WM_MENUCOMMAND = 0x0126;
        const int WM_COMMAND = 0x0111;

        switch (m.Msg)
        {
            case WM_CONTEXTMENU:
                MessageBox.Show("Opening Context Menu");
                break;

            case WM_MENUCOMMAND:
                MessageBox.Show("WM Menu Command Event fired");
                break;

            case WM_COMMAND:
                MessageBox.Show("WM Command Event fired");
                break;

        }

        base.WndProc(ref m);
    }

    protected override void DefWndProc(ref Message m)
    {
        base.DefWndProc(ref m);
    }
} 
```

写上面的代码，我可以检测到“上下文菜单打开”事件，但还没有检测到点击事件。其他人将不胜感激这里的任何帮助，甚至这个主题对我来说也是新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-19T13:12:11.490

有几个`ContextMenuStrip`事件可能会对您有所帮助。该`MouseClick`事件为您提供了一个`MouseEventArgs`参数，其中包括单击了哪个鼠标按钮。该`ItemClicked`事件为您提供了一个`ToolStripItemClickedEventArgs`参数，其中包括被单击的菜单项。 `MouseClick`之前触发`ItemClicked`，您需要使用在表单类级别定义的变量在两者之间进行通信。

# python - 在同一轴上重新绘制数据时如何重置 NavigatonToolbar “历史记录”？

> ID：16090069
> 
> 赞同：4
> 
> 时间：2013-04-18T18:01:15.327
> 
> 标签：python, graph, matplotlib, wxpython

我有一个 wxPython 应用程序，它使用 matplotlib 重复绘制数据。代码看起来像这样：

```
import matplotlib
matplotlib.use('WXAgg')
from matplotlib.figure import Figure
from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg as FigCanvas, \
NavigationToolbar2WxAgg as NavigationToolbar

self.fig = Figure((4,5), dpi = 100, facecolor = "white")
self.canvas = FigCanvas(self.panel, -1, self.fig)
self.toolbar = NavigationToolbar(self.canvas)
self.axes = self.fig.add_subplot(111) 
```

每次我想绘制一些东西时，我只需设置 x 和 y 并执行以下操作：

```
self.axes.plot(x,y, color = self.colours[i], label = text)
self.canvas.draw() 
```

如您所见，我有一个绑定到画布的 NavigationToolBar。当我想绘制一个新图表时，我调用：

```
self.axes.clear()
self.axes.plot(x,y, color = self.colours[i], label = text)
self.canvas.draw() 
```

问题来了：如果我在可视化绘图时使用工具栏的工具（缩放、步骤、平移等），那么当我稍后绘制新图表时，工具栏的“历史”不会重置。如果我尝试在这个新图表中使用工具栏，工具栏将使用的视图（当我单击“主页”或任何“步骤”时）将是旧图的视图。

我对 matplotlib 有点陌生，我可能做错了什么。谁能帮我解决这个问题？在此先感谢，对任何语法错误深表歉意，英语不是我的母语。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T18:54:48.710

你可以试试：

```
self.toolbar._views.clear()
self.toolbar._positions.clear()
self.toolbar._update_view() # maybe you don't need this 
```

我应该强调这是没有记录的，你正在伸手去戳图书馆的内部，所以不能保证如果它现在工作，它会在未来工作（或者你会收到警告说它会停止工作）。

查看（Wx 版本的父类）`matplotlib/backend_bases.py`如何工作的代码。`NavigationToolbar2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-29T11:14:58.623

主页按钮实际上将导航堆栈中的第一个元素带到顶部。

如果要手动控制 Home 按钮设置的限制，可以就地修改导航堆栈中的第一个元素：

```
if len(self.fig.canvas.toolbar._nav_stack._elements) > 0:
    # Get the first key in the navigation stack
    key = list(self.fig.canvas.toolbar._nav_stack._elements[0].keys())[0]
    # Construct a new tuple for replacement
    alist = []
    for x in self.fig.canvas.toolbar._nav_stack._elements[0][key]:
        alist.append(x)
    alist[0] = (new_xmin, new_xmax, new_ymin, new_ymax)
    # Replace in the stack
    self.fig.canvas.toolbar._nav_stack._elements[0][key] = tuple(alist) 
```

当您点击 Home 按钮时，显示的范围现在将是`[new_xmin, new_xmax, new_ymin, new_ymax]`。

# php - 将字符串的所有字符替换为星号，除了 PHP 中的第一个和最后一个字符

> ID：16090072
> 
> 赞同：4
> 
> 时间：2013-04-18T18:01:30.840
> 
> 标签：php, string, function

如何将字符串的所有字符替换为星号，除了 PHP 中的第一个和最后一个字符？

比如`test`应该成为`t**t`和`profanity`成为`p******y`等等

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-18T18:11:55.033

```
function get_starred($str) {
    $len = strlen($str);

    return substr($str, 0, 1).str_repeat('*', $len - 2).substr($str, $len - 1, 1);
}

$myStr = 'YourName';
echo get_starred($myStr); //should show Y******e 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T18:17:44.750

这里有一个小功能：

```
function asterisks($toConvert) {
    $astNumber = strlen($toConvert) - 2;
    return substr($toConvert, 0, 1) . str_repeat("*", $astNumber) . substr($toConvert, -1);
}

$tempString= 'teststring';
echo asterisks($tempString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:11:37.860

```
$str = "test";
$len = strlen($str);
$str1 = '';
for($i=0; $i < $len; $i++) {
   if($i != 0 && $i != ($len-1)) {
       $str1 .= '*';
   } else {
       $str1 .= $str[$i];
   }
}

echo $str1; 
```

使用上面的代码。这将满足您的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T18:13:12.420

就像是

```
$split_string = str_split($start_string);
$i = 1;
while ( $i < count($split_string)-2 ){
    split_string[$i] = '*';
    $i++;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-18T18:18:45.120

这将替换`*bcdefghijklm*`变量中的第一个和最后一个类似字符`$text`；

```
$text = 'abcdefghijklmn';
$count = strlen($text)-1;
echo str_replace(array($text[0], $text[$count]), '*', $text); 
```

# vb.net - 超时：底层连接已关闭：连接意外关闭

> ID：16090076
> 
> 赞同：2
> 
> 时间：2013-04-18T18:01:46.507
> 
> 标签：vb.net

我遇到了超时问题。我连接的服务在及时响应时运行良好。当它需要大约 10 秒时，它会超时，但有异常。除了 Timeout 和 ReadWriteTimeout，我还可以设置哪些其他超时属性以使其正常等待？我需要在 TCP/IP 级别设置什么吗？谢谢你的帮助。

System.Net.WebException：基础连接已关闭：连接意外关闭。在 System.Net.HttpWebRequest.GetResponse()

这是我的代码。我尝试了很多东西的变体：

```
'The post works
Dim _httpRequest As HttpWebRequest
_httpRequest = WebRequest.Create("mywebservice")
System.Net.ServicePointManager.Expect100Continue = False
_httpRequest.Credentials = CredentialCache.DefaultCredentials
_httpRequest.ProtocolVersion = HttpVersion.Version10
'This is a 60 second wait
_httpRequest.Timeout = 60000 
'This is a 60 second wait
_httpRequest.ReadWriteTimeout = 60000
_httpRequest.KeepAlive = False
_httpRequest.Method = "POST"

'If the response takes takes 10 seconds
'This is the message we get:  System.Net.WebException: The underlying connection was closed: The connection was closed unexpectedly.

_httpRequest.Method = "GET"
_httpRequest.ContentType = "text/xml"
'The error is here
Dim httpResponse As HttpWebResponse = _httpRequest.GetResponse 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:25:38.730

您设置的`Timeout`值是 60000，转换为大约 1 分钟，因为`Timeout`值以毫秒为单位。值 1000 是 1 秒。因此，请尝试将其适当地设置为更高的值。例如，尝试将其设置为 5 或 10 分钟进行测试。

# ruby-on-rails - 为什么这个远程请求不会检测到参数？

> ID：16090079
> 
> 赞同：0
> 
> 时间：2013-04-18T18:01:51.460
> 
> 标签：ruby-on-rails, ruby-on-rails-3

即使我检查并提交，也不会触发交易:(
为什么会这样？？`body`其他一切都很好提交。
即使我检查并提交，它也不会检测并运行交易......任何人有什么想法吗？

**控制器**

```
if params[:comment][:call]
    transaction.....
end 
```

**查看表单**（使用 ajax 远程）

```
<%=form_for(([@community, @comment]), :remote => true, :class => 'form' ) do |f| %>
    <%= f.check_box :call, :label => 'call' %> call
        <div class="form-actions">
            <div class="input-append">
                <%= f.text_field :body, :id => "input", :class => "box" %>  
            <button type="submit" class="btn">submit</button>
        </div>
    </div>
<% end %> 
```

**评论模型**

```
attr_accessible :icon, :call
....
def call
    @call ||= "0"
end

def call=(value)
    @call = value
end 
```

# linux - 使 FreeBSD 成为本地开发服务器

> ID：16090081
> 
> 赞同：2
> 
> 时间：2013-04-18T18:01:57.380
> 
> 标签：linux, unix, networking, virtualbox, freebsd

我在 Windows 7 上运行的 Virtual Box 的帮助下安装了 FreeBSD 9.1 版本。在 FreeBSD 上，我使用端口安装了 PHP 和 Apache。

现在我希望从 Windows 操作系统进行所有开发，通过 FTP 传输编写的代码，并在我的 Windows 浏览器上查看我的开发活动的结果。

为了实现这一点，我需要将此 FreeBSD 安装为服务器，该服务器可以将内容提供给我在 Windows 7 上的浏览​​器。

我已经尝试做一些更改，`/etc/rc.conf`但没有一个允许我从 Windows 访问 FreeBSD。

我曾尝试在`/etc/rc.conf`

```
hostname="fbsd.web.in"
ifconfig_em0="inet 192.168.1.222 netmask 255.255.255.0" 
```

“em0”是我的网络接口，我通过运行命令检查了它，我`ifconfig` 在过去 2 天里一直试图通过尝试不同的配置来实现这一点，但到目前为止没有任何帮助。

仅供参考，我在我的地方有一个 wifi 网络。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:27:47.887

这是关于如何设置它的一个很好的教程：[http ://www.jacklmoore.com/notes/development/](http://www.jacklmoore.com/notes/development/)

请记住在您的 VM 设置中启用桥接网络。

# node.js - 在 node.js 构建脚本中复制文件

> ID：16090082
> 
> 赞同：6
> 
> 时间：2013-04-18T18:02:00.350
> 
> 标签：node.js, build, copy

我在玩一个 javascript 项目，它使用一个节点构建脚本。

它通过以下方式将一些文件夹同步到构建的文件夹中

```
try {
  fs.statSync('built/imgs');
} catch(err) {
  if (err.code=='ENOENT') fs.symlinkSync('../imgs', 'built/imgs');
  else throw err;
} 
```

获取文件的真实副本到构建文件夹的相应 fs 命令是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T18:08:56.597

对象中没有`fs`将复制整个目录的功能。甚至没有一个可以复制整个文件。

但是，这是复制一个文件的一种快速简便的方法。

```
var fs = require('fs');

fs.createReadStream('input_filename').pipe(fs.createWriteStream('output_filename')); 
```

现在你只需要得到一个目录列表。你会使用`fs.readdir`or `fs.readdirSync`。

因此，要将目录复制到另一个目录，您可能会执行以下操作：

```
var dir = fs.readdirSync('.');
for (var i=0; i < dir.length; i++) {
    fs.createReadStream(dir[i]).pipe(fs.createWriteStream("newpath/"+dir[i]));
} 
```

# javascript - Jquery - Sum of each same class li value

> ID：16090083
> 
> 赞同：2
> 
> 时间：2013-04-18T18:02:00.083
> 
> 标签：javascript, jquery

Currently I'm Developing an Invoice app with php , mysql & jquery. I want to show some details with jquery. I have dynamically created tables with dynamic data.

```
<table class="report_table">
    <tr>
        <td class="items_id">
            <ul>
                <li class="KKTF0">KKTF0</li>
                <li class="PEN01">PEN01</li>
            </ul>
        </td>
        <td class="items_qty">
            <ul>
                <li class="KKTF0">1</li>
                <li class="PEN01">2</li>
            </ul>
        </td>
    </tr>
</table>
<table class="report_table">
    <tr>
        <td class="items_id">
            <ul>
                <li class="BKK01">BKK01</li>
                <li class="KKTF0">KKTF0</li>
                <li class="PEN01">PEN01</li>
            </ul>
        </td>
        <td class="items_qty">
            <ul>
                <li class="BKK01">4</li>
                <li class="KKTF0">2</li>
                <li class="PEN01">3</li>
            </ul>
        </td>
    </tr>
</table> 
```

li classes are dynamically created. my jquery code

```
 jQuery(document).ready(function() {
    $('.report_table').each(function() {
        $('.items_id ul li').each(function() {
            $(this).addClass($(this).text());
            var className = $(this).attr("class");
            $(this).parents('tr').find('td.items_qty li').eq($(this).index()).addClass(className);
        });
    });
}); 
```

I want this result

```
<table>
    <tr>
        <th>Item Id</th>
        <th>Sum of Item</th>
    </tr>
    <tr>
        <td>KKTF0</td>
        <td>3</td>
    </tr>
    <tr>
        <td>PEN01</td>
        <td>5</td>
    </tr>
    <tr>
        <td>BKK01</td>
        <td>4</td>
    </tr>
</table> 
```

I don't have any idea. please help me... Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:40:31.243

Pretty short solution:

```
var data = {};
$('.report_table .items_qty li').each(function() {
    data[this.className] = (data[this.className] || 0) + +$(this).text();
});

var table = '<table class="result"><tr><tr><th>Item Id</th><th>Sum of Item</th></tr>' + 
$.map(data, function(qty, key) {
    return '<td>' + key + '</td><td>' + qty + '</td>';
}).join('</tr><tr>') + '</tr></table>'; 
```

[http://jsfiddle.net/VF7bz/](http://jsfiddle.net/VF7bz/)

Brief explanation:

1). `each` collects the data into an object:

```
{"KKTF0":3,"PEN01":5,"BKK01":4} 
```

2). `map` creates an array:

```
["<td>KKTF0</td><td>3</td>","<td>PEN01</td><td>5</td>","<td>BKK01</td><td>4</td>"] 
```

3). array items are joined into a string using `</tr><tr>` as separator.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:24:13.043

Create an array of "items" and increment the associated quantity of each as you loop through every `li`. Then output the table.

```
function sum() {

    // This will hold each category and value
    var sums = new Array();

    $('li').each(function() {
        var item = new Object();

        // Get category
        item.category = $(this).attr('class');

        // Get count
        if (isFinite($(this).html())) {
            item.count = parseInt($(this).html());
        }
        else {
            // Skip if not a number
            return;
        }

        // Find matching category
        var exists = false;
        for (var i = 0; i < sums.length; i++) {
            if (sums[i].category == item.category) {
                exists = true;
                break;
            }
        }

        // Increment total count
        if (exists) {
            sums[i].count += item.count;
        }
        else {
            // Add category if it doesn't exist yet
            sums.push(item);
        }

    });

    var table = '<table><tr><th>Item Id</th><th>Sum of Item</th></tr><tbody>';

    // Add rows to table
    for (var i = 0; i < sums.length; i++) {
        table += '<tr><td>' + sums[i].category + '</td><td>'
            + sums[i].count + '</td></tr>';
    }

    // Close table
    table += '</tbody></table>';

    // Append table after the last table
    $('table :last').after(table);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:24:32.853

I am using `.each` loop on all `li` and store the values in the `Object` variable as key-value pairs.
Then, looping over created object properties building the desired table.

```
var resultObj = {};
$('li').each(function (idx, item) {
    var $item = $(item);
    var prop = $item.attr('class');
    if (!resultObj[prop]) {
        resultObj[prop] = 0;
    }
    var parsedVal = parseInt($item.text(), 10);
    resultObj[prop] += isNaN(parsedVal) ? 0 : parsedVal;
});

var $resultTable = $('<table />');
$resultTable.append('<tr><th>Item Id</th><th>Sum of Item</th></tr>');
for (var key in resultObj) {
    var $row = $('<tr />');
    $row.append($('<td />', {
        text: key
    }))
        .append($('<td />', {
        text: resultObj[key]
    }));
    $resultTable.append($row);
}
$('body').append($resultTable); 
```

Have a look at this [**FIDDLE**](http://jsfiddle.net/PuVZJ/).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T18:49:37.000

Please omit the jquery code that you have posted in your question and use the one below:

**Complete Jquery Solution:**

*Tested and Working*

```
$(document).ready(function() {
    //Create table to fill with data after last report table
    $('<table id="sumtable"><th>Item Id</th><th>Sum of Item</th></table>').insertAfter($('.report_table').last());
    //Loop through each report table, fetch amount and update sum in '#sumtable'
    $('.report_table').each(function(){
        var currtable = $(this);
        $(this).find('.items_id ul li').each(function(){
            //cache obj for performance
            var curritem = $(this);
            var itemid = curritem.html();
            var itemvalue = parseInt(currtable.find('.items_qty ul li:eq('+curritem.index()+')').html());
            var sumrow = $('#sumtable tbody').find('tr.'+itemid);
            if(sumrow.length == 0){
                //no rows found for this item id in the sum table, let's insert it
                $('#sumtable tbody').append('<tr class="'+itemid+'"><td>'+itemid+'</td><td>'+itemvalue+'</td></tr>');
            } else {
                //Row found, do sum of value
                sumrow.find('td').eq(1).html(parseInt(sumrow.find('td').eq(1).html())+itemvalue);
                console.log(sumrow.find('td').eq(1).html());
            }
        });
    }) 
}); 
```

**DEMO:** [http://jsfiddle.net/N3FdB/](http://jsfiddle.net/N3FdB/)

# matlab - 矩阵MATLAB中的所有其他匹配元素

> ID：16090087
> 
> 赞同：0
> 
> 时间：2013-04-18T18:02:14.473
> 
> 标签：matlab, matrix

我有一个包含 2 个值的矩阵，例如：

```
[ 1  1  1  1  1  0  0  0  1  1  0  0  0 
  0  0  0  0  1  1  1  1  0  0  0  1  1 ] 
```

我想将一行中的所有其他元素从“1”更改为 0，因此输出将是：

```
[ 0  1  0  1  0  0  0  0  1  0  0  0  0
  0  0  0  0  1  0  1  0  0  0  0  1  0 ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:05:48.927

如果您的矩阵是，`m`那么您可以执行以下操作：

```
ind=find(m(:)==1);
m(ind(1:2:end))=0; 
```

# android - 如何在所有 android 操作系统中读取通过我的应用程序编写的 logcat

> ID：16090089
> 
> 赞同：0
> 
> 时间：2013-04-18T18:02:29.080
> 
> 标签：android, android-logcat

我需要捕获通过我的应用程序写入的所有日志。我从 Jetllybean OS 知道，我们只需要读取我们的应用程序日志即可。但是，当我尝试通过应用程序使用 exec 方法使用命令“logcat -d”时，我没有得到任何数据。

请帮助我。

谢谢，

萨拉瓦纳库玛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:14:46.260

这是我之前玩过的示例，它将在本地存储中生成一个日志文本文件：

```
private static String generateLogcatLogCommond = "logcat -d > /sdcard/IssueReport/log.txt";

public static String generateLogcatLog() throws InterruptedException {
    try {
        File issueReport = new File(Environment.getExternalStorageDirectory(), "IssueReport");
        if (!issueReport.exists())
            issueReport.mkdir();
        File logFile = new File(issueReport,"log.txt");
        logFile.createNewFile();

        Process process = Runtime.getRuntime().exec("/system/bin/sh -");
        DataOutputStream os = new DataOutputStream(process.getOutputStream());
        os.writeBytes(generateLogcatLogCommond);

        logLocation = "/sdcard/IssueReport/log.txt";
        Log.d("Client", logLocation);
    } catch (IOException e) {
        e.printStackTrace();
    }
    return logLocation;
} 
```

上面的代码正在做的是使用'sh'运行'logcat -d'命令并将其保存为本地文件。这将获得所有 logcat 日志。对您来说，您可以将其更改为 'logcat -s ""'，它会将应用程序的所有 logcat 日志保存到文件中。

# php - 来自 URL 字符串的 preg_match

> ID：16090093
> 
> 赞同：0
> 
> 时间：2013-04-18T18:02:43.533
> 
> 标签：php, string, joomla, preg-match

我有一个通过活动源传递的字符串，如下所示：

```
/?source=SEARCH%20&utm_source=google&utm_medium=cpc&utm_term=<keyword/>&utm_content={creative}&utm_campaign=<campaign/>&cpao=111&cpca=<campaign/>&cpag=<group/>&kw=<mpl/> 
```

当它出现时，我需要将其剪切并将其传递给我们的表单处理程序，以便我们可以跟踪我们的活动。我可以检查它，将其内容保存在 cookie 中并将其传递到我们的整个站点，但我正在使用 preg_match 将其剪切并将其放入变量中，以便我可以将它们的值传递给处理程序。我希望最终产品看起来像：

```
$utm_source=google;
$utm_medium=cpc;
$utm_term=<keyword/> 
```

没有固定数量的字符，可能是 Google、Bing 等，所以我尝试使用 preg_match 来获取第一部分（utm_source）并停止我想要的（&）等等，但我不明白 preg_match足以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:08:42.330

PHP 应该为您解析您的查询字符串，并将其转换为`$_GET`. 否则，PHP 知道如何解析查询字符串。不要使用正则表达式，或者为此，使用[`parse_str`](http://php.net/manual/en/function.parse-str.php).

输入：

```
<?php

$str = "/?source=SEARCH%20&utm_source=google&utm_medium=cpc&utm_term=<keyword/>&utm_content={creative}&utm_campaign=<campaign/>&cpao=111&cpca=<campaign/>&cpag=<group/>&kw=<mpl/>";

$ar = array();
parse_str($str, $ar);
print_r($ar); 
```

输出：

```
Array
(
    [/?source] => SEARCH
    [utm_source] => google
    [utm_medium] => cpc
    [utm_term] => <keyword/>
    [utm_content] => {creative}
    [utm_campaign] => <campaign/>
    [cpao] => 111
    [cpca] => <campaign/>
    [cpag] => <group/>
    [kw] => <mpl/>
) 
```

# rest - 更新请求：是否有将 POST 编码传送到 REST 服务的“最佳实践”？

> ID：16090096
> 
> 赞同：0
> 
> 时间：2013-04-18T18:02:56.743
> 
> 标签：rest, character-encoding

我正在创建一个 RESTful 服务，客户端可能会发布一些 XML、JSON 或一些非结构化文本。可以想象，客户端可以发布中文字符等。这个问题几乎相同，[Detecting the character encoding of an HTTP POST request](https://stackoverflow.com/questions/708915/detecting-the-character-encoding-of-an-http-post-request)，但它已经有四年了，我想看看是否有任何“最佳实践”已经合并。

编辑：这不是针对从表单（网页）发布的信息，而是针对客户端应用程序，因此 POST 请求的 Content-Type 将是 text/xml、text/plain 以及可能是 application/json 之类的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:51:28.693

由于嵌入了百分比编码，www 表单 POST 的字符集始终为 ASCII，因此不需要`charset`声明 for 。`application/x-www-form-urlencoded`事实上，为此 MIME 类型指定字符集是[无效](http://www.w3.org/html/wg/drafts/html/master/iana.html#application/x-www-form-urlencoded)的。

所以要从：

```
0x6b65793d76254333254134254333254241254333254142 
```

进入：

```
key=v%C3%A4%C3%BA%C3%A 
```

由于 ASCII 兼容性，使用几乎任何编码都可以实现相同的效果。

您可能会注意到数据仍然被编码。`charset`请求的参数`Content-Type`仅适用于发送的直接二进制文件（“将八位字节序列转换为字符序列”，正如他们在[规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.4)中所说的那样），**而不**适用于`key=v%C3%A4%C3%BA%C3%A`转换中使用的机制`key=väúë`，这实际上涉及将字符转换为其他字符.

html4 中的 application/x-www-form-urlencoded 方案“规范”非常没用，但[html 5 实际上尝试](http://www.w3.org/html/wg/drafts/html/master/forms.html#application/x-www-form-urlencoded-encoding-algorithm)了. 百分比编码的最终默认编码是 UTF-8，`_charset_`如果可用，编码名称会在魔术参数中传输。

所以，是的，仍然没有一种好的和使用的正式方式（并且`charset`在 Content-Type 中只是无效、错误和被误解）来声明嵌入百分比编码的字符编码。在实践中，我只会使用 UTF-8，因为它是一个非常严格的方案，当失败时回退到 ISO-8859-1[因为你总是可以从 ISO-8859-1 退回](https://stackoverflow.com/a/15938015/995876)。

* * *

对于 JSON，使用 UTF-8/16/32 之外的任何其他编码都是无效的，因为到处都假定 UTF-8。对于 XML，您可以读取 Content-Type 标头，回退到`encoding`属性，最终您必须回退到 UTF-8 并在它不计算时声明无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:05:58.377

For XML and JSON the best practice is to always encode in UTF-8\. XML has mechanisms for different character sets if you really must not use UTF-8, starting with the charset param given to the mimetype and then the charset param of the `xml` directive.

# c# - 如何保存动态复选框更改

> ID：16090097
> 
> 赞同：3
> 
> 时间：2013-04-18T18:02:56.963
> 
> 标签：c#, asp.net, .net, c#-4.0, event-handling

我几乎没有动态创建的复选框，并且将显示现有的选择，但是当用户进行更改时，我想将它们存储回来。这是动态生成和选择的代码

```
private void Role(string role)
{
   SystemUserDal dal = new SystemUserDal();
   var userId = Guid.Parse(Request.QueryString["ID"].ToString());
   var roles = dal.GetRolesList(userId);
   foreach (KeyValuePair<Guid, string> r in roles)
   {
       CheckBox chk = new CheckBox();
       chk.ID = r.Value;
       chk.Text = r.Value;
       if (role.Contains(r.Value))
       {
          chk.Checked = true;
       } 
       rolepanel.Controls.Add(chk);
   }
} 
```

我正在尝试以下

```
private void GetCheckBoxes()
{
    foreach (Control ctrl in rolepanel.Controls)
    {
        CheckBox c = ctrl as CheckBox;
        string id = c.ID;
        string role = c.Text;
    }
} 
```

当我单步执行代码时，它会以 3 的计数命中 foreach 循环，但 ctl 为空。任何线索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:09:47.097

您可能会收到错误，`rolepanel.FiondControl("chk")`因为`null`它没有找到带有`ID="chk"`. 方法`FindControl`接受一个字符串 - 您要查找的控件的 ID。您添加的复选框没有`ID="chk"`，它们都`ID=r.value`来自您的代码。我建议为 ID 提供一些架构，您可以稍后使用它们来查找复选框。

如果您`rolepanel`只包含动态添加的复选框，则可以使用`rolepanel.Controls`来获取所有这些复选框。

不要忘记将控件投射到`CheckBox`.

所以你`GetCheckBoxes()`可能看起来像：

```
private void GetCheckBoxes()
{
    foreach (Control ctrl in rolepanel.Controls)
    {
        if (ctrl is CheckBox)
        {
            CheckBox c = ctrl as CheckBox;
            string cText = c.Text;

            // do what you need to do with cText, or checkbox c
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T18:05:34.097

如果你施放它仍然会出错吗？

例如

```
private void GetCheckBoxes()
{
    CheckBox chk = (CheckBox)rolepanel.FindControl("chk");
    if(chk!= null)

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:34:31.967

另一个解决方案是为 CheckBox.CheckedChanged 创建公共处理程序。然后，您的所有动态 CheckBoxes CheckedChanged 事件都将绑定到该处理程序。

```
public void Checkbox_CheckedChanged(object sender, EventArgs e)
{
    CheckBox checkBox = sender is CheckBox;
    if(checkbox!=null)
    {
         //do your saving things.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T18:34:55.507

尝试使用 CheckBoxList 然后做这样的事情

```
 for (int i = 0; i < chkList.Items.Count; i++)
        {
            if (chkList.Items[i].Selected)
            {
                // Store Item
            }
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T18:07:02.050

you should cast control to CheckBox:

```
private void GetCheckBoxes()
{
    CheckBox chk = (CheckBox)rolepanel.FindControl("chk");
    if(chk!= null)
    ....

} 
```

# python - 用间隔切片python字符串？

> ID：16090098
> 
> 赞同：-3
> 
> 时间：2013-04-18T18:02:59.733
> 
> 标签：python, arrays, string

我有一个字符串 a="2:1,3:2,4:5,7:5" 我基本上想将其拆分并将 2,3,4,7 分配给一个整数列表和 1,2,5,5进入另一个。我先尝试我们 b=a.split(":") 然后 c=b.split(",")。我只得到 21,32 等。

所以你能建议一种方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:08:43.627

我不知道你怎么可能`21`摆脱任何东西，甚至像你所说的那样。

但你在正确的轨道上。让我们一步一步来。

```
>>> a="2:1,3:2,4:5,7:5"
>>> b=a.split(":")
>>> b
['2', '1,3', '2,4', '5,7', '5'] 
```

好的，这是不对的，因为你想先得到`2`and `1`，然后是`3`and `2`，依此类推。

```
>>> b=a.split(',')
>>> b
['2:1', '3:2', '4:5', '7:5'] 
```

好的，现在我们要对`split`其中的每一件事`list`。我们如何做到这一点？您可以编写一个`for`循环，或使用`map`，但列表推导可能是最简单的：

```
>>> c=[element.split(':') for element in b]
[['2', '1'], ['3', '2'], ['4', '5'], ['7', '5']] 
```

现在你有你的两个列表，但它们被压缩在一起。你如何解压缩它们？通过拉链！

```
>>> d, e = zip(*c)
>>> d
('2', '3', '4', '7')
>>> e
('1', '2', '5', '5') 
```

现在，您快到了，但您希望这些是整数列表，而不是字符串元组。再次列出推导以进行救援：

```
>>> f = [int(element) for element in d]
>>> g = [int(element) for element in e]
>>> f
[2, 3, 4, 7]
>>> g
[1, 2, 5, 5] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:08:25.807

```
In [8]: a = "2:1,3:2,4:5,7:5"

In [9]: b, c = zip(*[map(int, t.split(':')) for t in a.split(',')])

In [10]: b
Out[10]: (2, 3, 4, 7)

In [11]: c
Out[11]: (1, 2, 5, 5) 
```

在这里，`b`和`c`是元组。如果需要，通过调用将它们变成列表[`list()`](http://docs.python.org/2/library/functions.html#list)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:08:36.000

你可以这样做：

```
>>> a = "2:1,3:2,4:5,7:5"
>>> l1, l2 = zip(*(map(int, p.split(':')) for p in a.split(',')))
>>> l1
(2, 3, 4, 7)
>>> l2
(1, 2, 5, 5) 
```

`a.split(',')`是不言自明的。`map(int, p.split(':')) for p in a.split(',')`拆分这些结果对中的每一个，然后将它们转换为整数。

`zip(*(...))`获取该生成器并将每对的第一个元素放入一个列表中，将第二个元素放入另一个列表中。

`l1, l2 = ...`是元组拆包。它基本上是`l1 = ...[0]`and的简写`l2 = ...[1]`。

* * *

另一种方法是：

```
>>> l = map(int, a.replace(',', ':').split(':'))
>>> l
[2, 1, 3, 2, 4, 5, 7, 5]
>>> l1, l2 = l[::2], l[1::2] 
```

这会将逗号转换为冒号，然后您可以将其拆分为`.split()`. `l[::2]`返回每个偶数元素并`l[1::2]`返回每个奇数元素。

# haskell - 如何在“.hs”文件中为复合函数定义“特殊”行为？

> ID：16090101
> 
> 赞同：3
> 
> 时间：2013-04-18T18:03:06.930
> 
> 标签：haskell

组合在 Haskell 中很正常，但我只知道我可以定义组合函数的*特殊*行为，说

```
Prelude> (floor . sqrt) (10^55)
3162277660168379365112938496
Prelude> let (floor . sqrt) n | n < 2 = n | otherwise = head $ dropWhile (\x -> x^2 > n) $ iterate (\x -> (x + n `div` x) `div` 2) (n `div` 2)
Prelude> (floor . sqrt) (10^55)
3162277660168379331998893544 
```

*特殊*定义函数的结果是正确的（因为第一个浮点错误）。

现在我想做同样的内部`.hs`文件，比如

```
(floor . sqrt) n
    | n < 2 = n
    | otherwise = head $ dropWhile (\x -> x^2 > n)
                       $ iterate (\x -> (x + n `div` x) `div` 2) (n `div` 2)

main = do
    print $ (floor . sqrt) (10^55) 
```

这次`ghc`骂我

```
Ambiguous occurrence `.'
It could refer to either `Main..', defined at me.hs:1:8
                      or `Prelude..',
                         imported from `Prelude' at me.hs:1:1
                         (and originally defined in `GHC.Base') 
```

那么是否可以在`.hs`文件中定义这样的函数？`main`（但是，在里面定义它`let`是好的）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T18:10:41.693

首先，您在 GHCi 中的示例没有定义`floor`and的特殊组合`sqrt`。相反，它定义了一个运算符，该运算符`(.)`接受三个名为`floor`、`sqrt`和的参数，`n`并隐藏现有的名为 的标准函数`(.)`。

然后，您将新函数应用于标准库函数`floor`和`sqrt`，它们将成为新`(.)`函数中具有相同名称的参数。

您得到的错误是因为顶级定义不会自动隐藏现有定义，无论如何这显然不是您真正想要做的。

现在，您当然可以定义一个全新的函数（希望有自己的名称，如 groovy 的回答）来执行您的专用`floor . sqrt`功能，但 Haskell 本身无法将其定义为现有功能的专用版本。

您可能正在考虑并且可能的是，在 GHC 中使用[编译器编译指示重写规则](http://www.haskell.org/ghc/docs/latest/html/users_guide/rewrite-rules.html)来自动将特定表达式替换为等效的改进版本。不过，您应该小心，您重写的表格给出的答案与其替换的答案相同。否则，您将面临一些非常令人费解的调试会话的风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:07:57.793

How about this?

```
floorSqrt n
    | n < 2     = n
    | otherwise = head $ dropWhile (\x -> x^2 > n)
                       $ iterate (\x -> (x + n `div` x) `div` 2) (n `div` 2)

main = do
    print $ floorSqrt (10^55) 
```

# php - PHP中的Twitter“@”和“#”链接

> ID：16090104
> 
> 赞同：0
> 
> 时间：2013-04-18T18:03:15.133
> 
> 标签：php, javascript, twitter, hashtag

将代码放入我的网站时，我正在尝试将所有**@**和**#转换为链接。**

我发现一些 Jquery 代码看起来使用正则表达式来搜索**@**和**#**但我不确定如何使用 PHP 完成同样的事情。

代码是：

```
 at: function(tweet) {
    return tweet.replace(/\B[@＠]([a-zA-Z0-9_]{1,20})/g, function(m, username) {
      return '<a target="_blank" class="twtr-atreply" href="http://twitter.com/intent/user?screen_name=' + username + '">@' + username + '</a>';
    });
  },

  hash: function(tweet) {
    return tweet.replace(/(^|\s+)#(\w+)/gi, function(m, before, hash) {
      return before + '<a target="_blank" class="twtr-hashtag" href="http://twitter.com/search?q=%23' + hash + '">#' + hash + '</a>';
    });
  }, 
```

所以如果我有这样的事情：

```
@BobBarker is going to #blahblah and also @BillyBob 
```

我需要搜索并执行以下操作：

```
<a target="_blank" 
   class="twtr-atreply" 
   href="http://twitter.com/intent/user?screen_name=BobBarker'">@BobBarker
</a>

<a target="_blank" 
   class="twtr-atreply" 
   href="http://twitter.com/intent/user?screen_name=BillyBob'">@BillyBob
</a> 
```

对于哈希标签也是如此：

```
#blahblah 
```

我需要搜索并执行以下操作：

```
<a target="_blank" 
   class="twtr-hashtag" 
   href="http://twitter.com/search?q=%23blahblah">#blahblah
</a> 
```

任何帮助都会很棒！

**更新**

我整理了一些 PHP，它们可以很好地找到**@**或**#的****第一个**瞬间，但不会一直循环。我将如何为它设置一个循环？

 ****```
$theTweet = "@BobBarker is going to #blahblah and also @BillyBob";

if (preg_match("/\B[@＠]([a-zA-Z0-9_]{1,20})/", $theTweet, $matches)) {
    $theTweet = str_replace($matches[0],'<a target="_blank" class="twtr-atreply" href="http://twitter.com/intent/user?screen_name=' . trim($matches[0]) . '"> ' . trim($matches[0]) . '</a> ',$theTweet);
    echo $theTweet . '<br />';
}

if (preg_match("/(^|\s+)#(\w+)/", $theTweet, $matches)) {
    $theTweet = str_replace($matches[0],'<a target="_blank" class="twtr-hashtag" href="http://twitter.com/search?q=%23' . trim($matches[0]) . '"> ' . trim($matches[0]) . '</a> ',$theTweet);
    echo $theTweet;
} 
```

**更新#2**

回答了我自己的问题：o）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:46:20.497

这里是：

```
$theTweet = "@BobBarker is going to #blahblah and also @BillyBob";

    preg_match_all("@(https?://([-\w\.]+)+(:\d+)?(/([\w/_\.]*(\?\S+)?)?)?)@", $theTweet, $matches); //Take care of the http's
    foreach($matches[0] as $tweetsHTTP){
        $theTweet = str_replace($tweetsHTTP,'<a target="_blank" class="js-display-url" href="' . $tweetsHTTP . '"> ' . $tweetsHTTP . '</a> ', $theTweet);
    }

    preg_match_all("/\B[@＠]([a-zA-Z0-9_]{1,20})/", $theTweet, $matches); //Take care of the @'s
    foreach($matches[0] as $tweetsAT){
        $theTweet = str_replace($tweetsAT,'<a target="_blank" class="twtr-atreply" href="http://twitter.com/' . str_replace("@", "", $tweetsAT) . '"> ' . $tweetsAT . '</a> ', $theTweet);
    }

    preg_match_all("/(^|\s+)#(\w+)/", $theTweet, $matches); //Take care of the #'s
    foreach($matches[0] as $tweetsHash){
        $theTweet = str_replace($tweetsHash,'<a target="_blank" class="twtr-hashtag" href="http://twitter.com/search?q=%23' . $tweetsHash . '&src=hash"> ' . $tweetsHash . '</a> ', $theTweet);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:37:31.133

[http://php.net/preg_replace](http://php.net/preg_replace)应该可以解决您的问题。

像这样的东西（未经测试）：

```
preg_replace("/ @([\w\d]+) /i", "<a href=\"http://twitter.com/$1/\">@$1</a>", $tweet); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:39:03.293

也许您可以将 jQuery 具有的相同行为包装到 php 函数中。是这样的。

```
function writeLinks($tweet){
    //for mentions
    $tweet = preg_replace("/\B[@]([a-zA-Z0-9_]{1,20})/i", '<a target="_blank" class="twtr-atreply" href="http://twitter.com/intent/user?screen_name\=$1">$1</a>',$tweet);
    //for hashtags
    $tweet = preg_replace("/(^|\s+)#(\w+)/i", '<a target="_blank" class="twtr-hashtag" href="http://twitter.com/search\?q=%23$1>#$1</a>', $tweet);
    return $tweet;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T18:40:08.947

jQuery 脚本使用的是一个简单的正则表达式，用于搜索推文中的 @ 和 #。您可以使用 PHP 中的正则表达式函数做类似的事情。

函数[preg_replace](http://php.net/manual/en/function.preg-replace.php)的作用与您示例中的 javascript 函数大致相同。

```
function tweetReplaceAt($tweet) {
  return preg_replace("/\B[@＠]([a-zA-Z0-9_]{1,20})/",'<a target="_blank" class="twtr-atreply" href="http://twitter.com/intent/user?screen_name=$1">@$1</a>',$tweet);
}

function tweetReplaceHash($tweet) {
  return preg_replace("/(^|\s+)#(\w+)/i",'<a target="_blank" class="twtr-hashtag" href="http://twitter.com/search?q=%23$1">#$1</a>',$atreplacedTweet);
} 
```

然后你可以在你的推文上使用这些功能。

`preg_replace`还需要第 4 个参数来限制替换的数量，第 5 个参数将包含函数调用后的替换数量。****

# authentication - Symfony2 - 保护一切

> ID：16090113
> 
> 赞同：0
> 
> 时间：2013-04-18T18:03:49.203
> 
> 标签：authentication, symfony, login, configuration, redirect

我编写了一个应用程序，我需要在其中保护所有内容（登录页面除外）并重定向到登录。我尝试了[http://symfony.com/doc/master/book/security.html](http://symfony.com/doc/master/book/security.html)的解决方案（避免常见的陷阱 -> 确保登录页面不安全）但它对我没有帮助 - 我的请求仍然被重定向到无限循环。

这是`firewalls`我的 security.yml 文件的一部分：

```
firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    login:
        pattern:  ^/login$
        security: false

    secured_area:
        pattern:    .*
        anonymous: ~
        form_login:
            login_path:  login
            check_path:  login_validation
            success_handler: authentication_handler
        remember_me:
            key:      "%secret%"
            lifetime: 31536000 # 365 days in seconds
            path:     /
            domain:   ~ # Defaults to the current domain from $_SERVER 
```

预先感谢您的任何帮助。

编辑：当然，我只希望登录和完全认证的用户有任何访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:01:19.063

进入`security.yml`

```
firewalls:
  main:
   pattern: .*
   form_login:
     provider: fos_userbundle
     csrf_provider: form.csrf_provider
     default_target_path: /index #everything you want to redirect after login to
     always_use_default_target_path: true
   logout:       true
   anonymous:    true
access_control:
  - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
  - { path: ^/.*, role: ROLE_USER } #is just a role example, change it 
```

这会成功的

`access_control`您错过了将触发`firewall`此防火墙捕获的事件的第二部分（在这种情况下`main`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:07:53.313

我相信您还需要允许匿名访问您的检查路径。

# mysql - MYSQL 错误：无法创建数据库“出版物”；数据库存在

> ID：16090114
> 
> 赞同：1
> 
> 时间：2013-04-18T18:03:49.793
> 
> 标签：mysql, xampp

我在mysql中运行这个命令：

```
mysql > show databases; 
```

我的数据库`publications`在那里，所以我想使用它：

```
mysql > USE publications 
```

但我收到一个错误：

```
ERROR 1049 (42000): Unknown database 'publications'
mysql > CREATE DATABASE publications;
ERROR 1007 (HY000): Can't create database 'publications'; database exists 
```

我破坏了什么？它在拇指驱动器上的 XAMPP 上。这个错误是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:06:10.657

you may not have permissions. open up the mysql database, and double check that mysql.db table has the user you are logged in as set up to read, write, etc.. as appropriate. after changing permissions, don't forget to FLUSH PRIVILEGES

# javascript - 如何从数学函数内部调用特定值？

> ID：16090117
> 
> 赞同：0
> 
> 时间：2013-04-18T18:03:55.570
> 
> 标签：javascript, forms, math

在这段代码中，我根据表格添加了一些值，并减去创建新总数的最低值。代码效果很好。我想要做的不仅仅是在底部有新的总数，我想要 3。一个说没有减法的原始总数，一个是我减去的最低价格的值，最后是实际的新的总数。截至目前，它只显示新的总数。

示例：有 3 件商品，一条围巾 5 美元，一顶帽子 10 美元，一件夹克 20 美元。我将所有等于 35 美元的值相加，然后减去 5 美元的围巾的最低值，得到新的总计 30 美元。我想在底部显示这个。

总计：35 美元折扣：-5 美元新总计：30 美元

该函数已经计算出所有这些值，我只是不知道如何从函数中调用它们。

```
// All selected prices are stored on a array
var prices = [];

// A function to remove a item from an array
function remove(array, item) {
    for (var i = 0, len = array.length; i < len; i++) {
        if (array[i] == item) {
            array.splice(i, 1);
            return true;
        }
    }
    return false;
}

function calculateSectedDues(checkbox, amount) {
    // We add or remove the price as necesary

if (checkbox.checked) {
    prices.push(amount);
} else {
    remove(prices, amount);
}

// We sum all the prices
var total = 0;
for (var i = 0, len = prices.length; i < len; i++)
    total += prices[i];

// We get the lower one
var min = Math.min.apply(Math, prices);

if(min == Infinity) { min = 0; };

// And substract it
total -= min;

document.grad_enroll_form.total.value = total; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:04:55.177

这是一些基本代码，只写出值。我*仍然*不同意您从数组中删除元素的循环。

```
<span id="value"></span> 
```

```
var prices = [];

function remove(arr,itm){
    var indx = arr.indexOf(itm);
    if (indx !== -1){
        arr.splice(indx,1);
    }
}

function calculateSectedDues(checkbox, amount) {
    if (checkbox.checked === true) {
        prices.push(amount);
    } else {
        remove(prices, amount);
    }

    var total = 0;
    for (var i = 0, len = prices.length; i < len; i++)
        total += prices[i];

    var min = prices.slice().sort(function(a,b){return a-b})[0];
    if(typeof min === 'undefined') min = 0;

    var withDiscount = total - min;
    var discountAmount = withDiscount - total;

    document.querySelector("#value").innerHTML = "Total: $"+total+'<br>';
    document.querySelector("#value").innerHTML += "Discount: $"+discountAmount+'<br>';
    document.querySelector("#value").innerHTML += "New total: $"+withDiscount+'<br>';
} 
```

像这样运行：

```
calculateSectedDues({checked:true},10);
calculateSectedDues({checked:true},20);
calculateSectedDues({checked:true},5); 
```

给出这个输出：

> 总计：35 美元
> 折扣：-5 美元
> 新总计：30 美元

[JSFiddle](http://jsfiddle.net/DJDavid98/k5MXP/)

* * *

# 使用复选框

```
<label><input type="checkbox" onclick="calculateSectedDues(this,5)" name="Scarf"> <span>Scarf</span><label><br>
<label><input type="checkbox" onclick="calculateSectedDues(this,10)" name="Hat"> <span>Hat</span><label><br>
<label><input type="checkbox" onclick="calculateSectedDues(this,20)" name="Jacket"> <span>Jacket</span><label><br>

<span id="value">Total: $0<br>Discount: $0<br>New total: $0</span> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T18:24:15.370

我不知道你的 HTML 是什么样的，但这样的东西会起作用。它使用 jQuery 来获取所有选中的复选框，并将这些复选框的值添加到总数中并跟踪最小值。然后它在一个对象中返回所有三个值。

我假设您的复选框的值是商品的价格，这可能不是真的。如果没有，这个想法仍然有效，你只需要做更多的工作才能得到正确的价格。

```
function calculate() {
    var total = 0, 
        discount = 0
    ;

    $('input[type="checkbox"]:checked').each(function() {
        var val = parseFloat($(this).val());

        if(discount === 0 || val < discount) {
            discount = val; // keep track of minimum
        }

        total += val;
    });

    //return all three values in one object
    return {
        total: total,
        discount: disount,
        discountedPrice: (total - discount)
    }
} 
```

# wolfram-mathematica - 如何在 Mathematica 中求解双积分？

> ID：16090118
> 
> 赞同：1
> 
> 时间：2013-04-18T18:03:56.153
> 
> 标签：wolfram-mathematica

我对 Mathematica 很陌生，我正在尝试解决以下问题。

1.  我有一个形式的三次方程`Z = aZ^3 + bZ^2 + a + b`。我想做的第一件事是得到一个函数，它可以解析地解决 Z 的问题，并为此选择最小的正根，作为 a 和 b 的函数。

我认为为了获得根，我可以使用：

```
Z = Solve[z == az^3 + bz^2 + a + b, z]; 
```

正如我所期望的使用一般三次方程解公式所期望的那样，我似乎还没有完全找到根源。

1.  我想将`Z`over`a`和`b`（再次，最好是分析地）从 0 到 1`a`和 for`a`到 1的最小正根积分`b`。

我试过了

```
Y = Integrate[Z, {a, 0, 1}, {b, a, 1}]; 
```

这似乎没有给出任何公式或数值，而只是返回一个整数。（请注意，我什至不确定如何选择最小正根，但我正在使用 Mathematica 来尝试找出答案。）

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:49:31.190

`a`or`b`和之间的空格`z`很重要。您可以通过以下方式获取根源：

```
sol = z /. Solve[z == a z^3 + b z^2 + a + b, z] 
```

但是，您确定此表达式有您期望的解决方案吗？对于`a=0.5`和`b=0.5`，唯一真正的根是负数。

```
sol /. {a->0.5, b->0.5}
{-2.26953,0.634765-0.691601 I,0.634765+0.691601 I} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:50:08.770

```
sol = z /. Solve[z == a z^3 + b z^2 + a + b, z];
zz[a0_ /; NumericQ[a0], b0_ /; NumericQ[b0]] := 
        Min[Select[ sol /. {a -> a0, b -> b0} , 
                 Element[#, Reals] && # > 0 & ]] 
```

当没有解决方案时，这将返回 -infinty。正如 sirintinga 指出的那样，您的示例集成限制无效..

```
RegionPlot[NumericQ[zz[a, b] ] , {a, -1, .5}, {b, -.5, 1}] 
```

![在此处输入图像描述](https://i.stack.imgur.com/WvGDF.jpg)

但如果你有一个有效的区域，你可以进行数值积分..

```
NIntegrate[zz[a, b], {a, -.5, -.2}, {b, .8, .9}]  ->> 0.0370076 
```

编辑 - -

上面有一个错误 Select in Reals 丢弃了具有无穷小复杂部分的真实解决方案..修复为：..

```
zz[a0_ /; NumericQ[a0], b0_ /; NumericQ[b0]] := 
        Min[Select[ Chop[ sol /. {a -> a0, b -> b0} ], 
                 Element[#, Reals] && # > 0 & ]] 
```

Edit2，如果您觉得 Chop 不满意，这是一种更简洁的方法。

```
zz[a0_ /; NumericQ[a0], b0_ /; NumericQ[b0]] := 
     Module[{z, a, b}, 
          Min[z /. Solve[ 
             Reduce[(z > 0 && z == a z^3 + b z^2 + a + b /.
                  { a -> a0, b -> b0}), {z}, Reals]]]]
RegionPlot[NumericQ[zz[a, b] ] , {a, -2, 2}, {b, -2, 2}] 
```

![在此处输入图像描述](https://i.stack.imgur.com/RdzNG.jpg)

```
NIntegrate[zz[a, b], {a, 0, .5}, {b, 0, .5 - a}]  -> 0.0491321 
```

# javascript - 全出血视频，保持纵横比，居中，纯javascript

> ID：16090122
> 
> 赞同：0
> 
> 时间：2013-04-18T18:04:13.673
> 
> 标签：javascript, math, html5-video, fullscreen, scaling

我想让我的元素保持其纵横比，但充当“全出血”或更确切地说是完整的浏览器体验。视频应向上或向下以适应新的浏览器窗口尺寸，但也应在浏览器窗口中居中。有时，一些视频会被裁剪——这对我来说没问题。我正在尝试使用纯 JS 为视频元素重新创建背景覆盖 CSS 属性，如果这有助于您想象的话。对于那些不知道那是什么的人，以下是：

```
.bkgdCover{
  background: no-repeat center center;
 -webkit-background-size: 100% 100%;
 -moz-background-size: cover;
 -o-background-size: cover;
 background-size: cover;
} 
```

**以下是我尝试在纯 javascript 中做同样的事情：**

```
function getWinSize(){
    var wid = 0, hei = 0;

    if (document.documentElement && document.documentElement.clientHeight){
        wid = parseInt(window.innerWidth,10);
        hei = parseInt(window.innerHeight,10);
    } else if (document.body){
        wid = parseInt(document.body.offsetWidth,10);
        hei = parseInt(document.body.offsetHeight,10);
    }
    return [wid,hei];
}

this.resize2 = function(){
    fullBleedVideoPlayer();
};

function fullBleedVideoPlayer() {
    var viewport=getWinSize();
    var videoRatio = 1080 / 1920;
    var browserHeight = viewport[0];
    var browserWidth = viewport[1];
    var tmp_windowRatio = viewport[1] / viewport[0];
    if (videoRatio > tmp_windowRatio) {
        tmp_height = Math.round(browserWidth * videoRatio);
        _player.style.width= browserWidth+ "px";
        _player.style.height= tmp_height+ "px";
        _player.style.marginLeft = 0 + 'px';
        _player.style.marginTop = -Math.round((tmp_height - browserHeight) / 2) + 'px';
    } else {
        tmp_width = Math.round(browserHeight * (1 / videoRatio));
        _player.style.width= tmp_width+ "px";
        _player.style.height= browserHeight+ "px";
        _player.style.marginLeft = -Math.round((tmp_width - browserWidth) / 2) + 'px';
        _player.style.marginTop = 0 + 'px';
    }
} 
```

不幸的是，这不会重现 CSS 封面。如果你能看到我在哪里犯了错误或者你自己也犯了同样的错误，我很想听听你的意见。请只使用纯 JS 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T03:26:16.133

我只是做了这样的事情，除了它不是完全全屏，它是一个页面标题的背景视频，它的高度为 450px'ish'。我说 ish 是因为我使用的是 25vw，它会根据视口宽度改变高度。我基本上希望视频保持居中，但如何？

HTML

```
<section id="homepage--hero">
  <div class="fullpage-video-wrapper">
    <video id="video_background" preload="auto" autoplay="true" loop="loop" muted="muted" volume="0">
      <source src="http://vjs.zencdn.net/v/oceans.mp4" type="video/mp4">
      <source src="http://vjs.zencdn.net/v/oceans.webm" type="video/webm">
      <!-- doesnt support video -->
      <img src="#" style="width: 100%; height: auto;" />
    </video>
  </div>
</section> 
```

CSS

```
#homepage-hero {
  display: block;
  height: 35vw;
  width: 100%;
  position:
  relative;
  overflow: hidden;
}

.fullpage-video-wrapper {
    position: absolute;
    bottom: 0px;
    left: 0px;
    min-width: 100%;
    min-height: 100%;
    width: auto;
    height: auto;
    z-index: -1000;
    overflow: hidden;
}

.fullpage-video-wrapper {
    min-height: 100%;
    min-width: 100%;
} 
```

JS

```
if( $('.fullpage-video-wrapper').length > 0 ) {
    var videoWrapper = $('.fullpage-video-wrapper'),
        videoParentWrapper = $(videoWrapper).parent();

  if($(videoWrapper).height() > $(videoParentWrapper).height() ) {
    var difference = ($(videoWrapper).height() - $(videoParentWrapper).height()) / 4
    $(videoWrapper).css({
      bottom: -parseInt(difference)
    });
  }

  $(window).resize(function(){
    if($(videoWrapper).height() > $(videoParentWrapper).height() ) {
      var difference = ($(videoWrapper).height() - $(videoParentWrapper).height()) / 4
      $(videoWrapper).css({
        bottom: -parseInt(difference)
      });
    }
  });
 } 
```

这样做的目的是使视频即使在调整窗口大小时也保持相同的纵横比，将其定位到主页英雄的底部，这使其响应良好而不会导致您看到视频包装器的背景颜色，但是显然没有居中。jQuery 只是将视频包装器设置为抵消视频包装器元素高度与其父元素高度的高度差。允许纵横比保持不变，在需要时放出视频，但允许它垂直居中在它的父元素中。

这非常粗糙，因为我大约一个小时前才开始处理这个问题，所以我确信我需要重新工作并拨入，但希望这可以帮助你沿着你的道路前进，应该是相同的解决方案，除了你的对视频元素或视频包装元素 outerHeight 和视口高度进行高度检查。

# javascript - 使用 JavaScript 变量作为 iframe src？

> ID：16090124
> 
> 赞同：1
> 
> 时间：2013-04-18T18:04:31.157
> 
> 标签：javascript, html, iframe, var

我正在尝试使用 JavaScript 变量作为`src`a `<iframe>`，然后用户将能够通过`scr`在更改变量的菜单中进行选择来加载其他内容。默认的 src URL 是`apps/start.php`.

这是我的一些代码`index.php`：

```
 <script>
        var appurl = "start.php";
        document.getElementById("app").src = "apps/" + appurl();
    </script>

    <iframe id="app" src="">

    </iframe> 
```

问题是我无法让这第一小部分工作......`<script>`标签在`<head>`. 当`src`它发生变化时，新文档会自动加载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:06:37.840

The problem is that the Javascript is run before the iframe is there. Put your javascript below your iFrame or inside the document ready and it will work.

Example document onload:

```
<script>
    window.onload = function ()
    {
        var appurl = "start.php";
        document.getElementById("app").src = "apps/" + appurl();
    }
</script>

<iframe id="app" src="">

</iframe> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:07:17.100

Wait for the page to load (note that this is only going to work when the iframe is on your domain)

```
window.onload = function(){
 var appurl = "start.php";
 document.getElementById("app").src = "apps/" + appurl;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:08:19.370

```
<script>
    window.onload = function ()
    {
        var appurl = "start.php";
        document.getElementById("app").src = "apps/" + appurl;
    }
</script>

<iframe id="app" src="">

</iframe> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T18:10:39.980

尝试

```
<script>
window.onload = function(){
 var appurl = 'start.php';
 document.getElementById("app").src = "apps/" + appurl;
};
</script> 
```

# java - 将没有 WEB-INF 目录的 Maven/Java 项目的 Spring 上下文文件放在哪里？

> ID：16090135
> 
> 赞同：5
> 
> 时间：2013-04-18T18:05:03.467
> 
> 标签：java, spring, maven, configuration

我想将 spring 用于非 Web Java 项目。上下文文件应该放在哪里？我如何识别它们在 Spring 容器中的位置？

我确信有多种选择，但是对于 Web 应用程序，通常会将内容`WEB-INF`放入`web.xml`. 这是如何在独立应用程序中完成的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T18:06:54.630

地点 ：`src/main/resources/`

那么你可以通过添加目录来精确`moduleName/spring-application.xml`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T18:07:14.707

把它放在一个`resources`文件夹里。并用于`ClassPathXmlApplicationContext`加载它们。使用包作为您的 java 类使用。例如`src/main/resources/com/myapp/somemodule/context.xml`。

# django - 出现随机翻译？

> ID：16090137
> 
> 赞同：1
> 
> 时间：2013-04-18T18:05:10.373
> 
> 标签：django, python-2.7, django-i18n

我已经用 dbgettext mdoule 标记了要翻译的文本，以及数据库内容。

所以我这样做：

```
syncdb
add some content
dbgettext_export
makemessages -l ja
add all of the translations
compilemessages 
```

然后我将 /en/ 更改为 /ja/ 以查看日语页面，但只翻译了两件事。

“是”和“否”。

> #除了显示的'No'甚至不是'No'的翻译文本

页面上没有其他内容被翻译。

# variables - 来自其他变量的 SAS 动态变量名称

> ID：16090141
> 
> 赞同：0
> 
> 时间：2013-04-18T18:05:29.177
> 
> 标签：variables, sas, names

我正在尝试根据其他变量中包含的数据创建 SAS 变量名称。例如，我可以从

```
Obs  Var1  Var2
  1   abc     X
  2   def     X
  3   ghi     Y
  4   jkl     X 
```

我想结束

```
Obs  Var1  Var2    X    Y
  1   abc     X   abc   
  2   def     X   def   
  3   ghi     Y        ghi
  4   jkl     X   jkl 
```

我确实有一种方法可以做到这一点，但它需要一些丑陋的宏来首先创建所需的变量（使用长度语句），然后创建一系列编号的宏变量（每个观察 1 个），这些变量随后在数据步骤循环中调用. 它可以工作但很复杂，我认为不能很好地扩展到真实数据，其中包含用于每行创建的多个变量和几千行。

我也尝试过使用数组 - 将变量名称保存在宏 var 中，使用它来生成数组语句，并尝试跟踪每个新变量需要哪个数组索引，但这也很复杂。

真正有帮助的是类似于

```
vvaluex(var2)=var1 
```

除了 vvaluex 不能在等号的左侧。有什么想法或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:08:33.237

PROC TRANSPOSE 是执行问题示例的便捷方法。

```
data have;
input Obs  Var1 $  Var2 $;
datalines;
1   abc     X
2   def     X
3   ghi     Y
4   jkl     X
;;;;
run;

proc transpose data=have out=want;
by obs;
id var2;
var var1;
copy var1 var2;
run; 
```

另一个选项可能与您之前尝试过的类似，使用数组和 VNAME：

```
proc sql;
select var2 into :var2list separated by ' ' from have;
quit;

data want;
set have;
array newvars $ &var2list;
do _t = 1 to dim(newvars);
  if vname(newvars[_t]) = Var2 then do;
    newvars[_t] = var1;
    leave;
  end;
end;
run; 
```

PROC TRANSPOSE 应该更快，并且可能更灵活，但这对于某些目的可能会更好。

# extjs - EXT JS - 覆盖框架的 GridPanel 的 emptyText 属性

> ID：16090142
> 
> 赞同：2
> 
> 时间：2013-04-18T18:05:31.063
> 
> 标签：extjs, extjs4.1

*   **更新的问题**

我相信，默认情况下，我们将网格面板的 emptyText 定义为“没有要显示的记录”。我对吗？如果是这样，是否有可用于检查值并将其设置为自定义消息的 getter 和 setter 方法对？

我想使用 getter 方法的示例：

*   具有更多用户定义功能的自定义网格面板类

    ```
     Ext.define('Everest.ux.grid.Panel', {
          extend: 'Ext.grid.Panel',
          alias: 'widget.extGridPanel',

          appId: '',

          more customized methods
          .... 
    ```

*   我的网格组件类扩展了上面定义的

    ```
    Ext.define('Everest.ux.grid.MyGrid', {

        extend: 'Everest.ux.grid.Panel',
        alias: 'widget.myGrid',

        screenId: '',
        moduleId: '',

        initComponent : function() {
           var me = this;
           me.firstTimeLoaded = false;
           me.callParent();
        },
        ....

            var customStore = new Ext.data.Store({                          
                fields: customStoreFields,
                groupField: groupByDefaultField,
                sorters: customSorters,
                sortOnLoad: !Ext.isEmpty(customSorters),
                proxy: {
                    type: Ext.isEmpty(me.proxyType) ? 'ajax' : me.proxyType,
                    url: customDefinedURL,
                    reader: {
                        type: 'json'
                    }
                }
            });

            **me.reconfigure(customStore, newCustomFields);** 
    ```

me 指的是我的网格组件。我没有在我的任何自定义组件中定义 emptyText 属性，但我仍然在网格获取数据时看到“没有要显示的记录”消息。我在想 me.reconfigure 是我在网格获取数据时看到消息的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:06:58.623

请注意，当使用本地数据时，除非您将 deferEmptyText 选项设置为 false，否则不会显示 emptyText。

为什么你不能尝试在商店中使用 autoload:true （如果需要，让它为假）。

请参阅下面的链接了解 emptyText 定义。

[http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.view.AbstractView-cfg-emptyText](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.view.AbstractView-cfg-emptyText)

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:27:28.567

不应该是这样的。可能是你先加载一个空商店还是什么？

> 是的，我看到我们最初加载的是一个空商店，这解释了某些事情。我相信，默认情况下，我们将网格的 emptyText 定义为“没有要显示的记录”。我对吗？

不，你错了。您正在代码中通过此块设置 emptyText

```
viewConfig:{

        emptyText: 'No data to display',
        deferEmptyText: true

} 
```

另外，让我担心的是“deferEmptyText”默认为true。更清楚您面临的问题是什么以及您到底需要什么。

参考[http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.view.AbstractView-cfg-deferEmptyText](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.view.AbstractView-cfg-deferEmptyText)

# android - Xamarin Android EditText 输入键

> ID：16090143
> 
> 赞同：16
> 
> 时间：2013-04-18T18:05:33.623
> 
> 标签：android, key, keypress, xamarin, enter

几周前我开始使用 Xamarin Studio，但找不到下一个问题的解决方案：创建了一个包含序列号的编辑文本。我想在`Enter`按下后运行一个函数。它工作正常，当我按下时`Enter`，该功能运行没有失败，但我无法修改编辑文本的内容（我无法输入）。

编码：

```
EditText edittext_vonalkod = FindViewById<EditText>(Resource.Id.editText_vonalkod);
edittext_vonalkod.KeyPress += (object sender, View.KeyEventArgs e) =>
{
    if ((e.Event.Action == KeyEventActions.Down) && (e.KeyCode == Keycode.Enter))
    {
        //Here is the function
    }
}; 
```

这是控件的代码：

```
<EditText
    p1:layout_width="wrap_content"
    p1:layout_height="wrap_content"
    p1:layout_below="@+id/editText_dolgozo_neve"
    p1:id="@+id/editText_vonalkod"
    p1:layout_alignLeft="@+id/editText_dolgozo_neve"
    p1:hint="Vonalkód"
    p1:text="1032080293"
    p1:layout_toLeftOf="@+id/editText_allapot" /> 
```

我尝试使用`edittext_vonalkod.TextCanged`它的论点，保留问题。我可以修改内容但无法处理`Enter`密钥。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-11-22T16:36:40.270

最好的方法是使用设计为在按键`EditorAction`时触发的事件。`Enter`这将是这样的代码：

```
edittext_vonalkod.EditorAction += (sender, e) => {
    if (e.ActionId == ImeAction.Done) 
    {
        btnLogin.PerformClick();
    }
    else
    {
        e.Handled = false;
    }
}; 
```

并且能够更改在您的 XML 上`Enter`使用的按钮的文本：`imeOptions`

```
<EditText
    p1:layout_width="wrap_content"
    p1:layout_height="wrap_content"
    p1:layout_below="@+id/editText_dolgozo_neve"
    p1:id="@+id/editText_vonalkod"
    p1:layout_alignLeft="@+id/editText_dolgozo_neve"
    p1:hint="Vonalkód"
    p1:text="1032080293"
    p1:layout_toLeftOf="@+id/editText_allapot" 
    p1:imeOptions="actionSend" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-20T17:45:49.173

当按下的键为 ENTER 时，您需要将事件标记为未处理。将以下代码放入您的 KeyPress 处理程序中。

```
if (e.Event.Action == KeyEventActions.Down && e.KeyCode == Keycode.Enter) 
{
   // Code executed when the enter key is pressed down
} 
else 
{
   e.Handled = false;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-27T15:22:57.577

尝试这个：

```
 editText = FindViewById(Resource.Id.editText);    
    editText.KeyPress += (object sender, View.KeyEventArgs e) => 
    {
        e.Handled = false;
        if (e.Event.Action == KeyEventActions.Down && e.KeyCode == Keycode.Enter)
        {
            //your logic here
            e.Handled = true;
        }
    }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-08T09:26:49.320

更好的是为 EditText (EditTextExtensions.cs) 创建可重用的扩展：

```
public static class EditTextExtensions
{
    public static void SetKeyboardDoneActionToButton(this EditText editText, Button button)
    {
        editText.EditorAction += (sender, e) => {
            if (e.ActionId == ImeAction.Done)
            {
                button.PerformClick();
            }
            else
            {
                e.Handled = false;
            }
        };
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-05-24T06:18:54.827

```
 editText.KeyPress += (object sender, View.KeyEventArgs e) =>
            {
                    if ((e.KeyCode == Keycode.Enter))
                    {
                       // `enter code here`
                    }
            }; 
```

# tsql - 基于两列的 SSRS 组

> ID：16090144
> 
> 赞同：1
> 
> 时间：2013-04-18T18:05:34.140
> 
> 标签：tsql, reporting-services, grouping, duplicate-removal, ssrs-grouping

我有一份根据我们的业务规则显示重复帐户列表的报告。当一个新帐户与其他现有帐户匹配时，此方法有效。当多个新帐户匹配相同的现有副本时，我遇到了麻烦。下面是一个按 NewId 分组的示例：

```
NewID   MatchedID   FirstName   LastName    AddDate      Address        PhoneNumber
10      10          Holly       Johnson     4/18/2013    123 1St Rd.    123 456 7890
10      2           Hollie      Johnson     1/1/1990     123 1St Rd.    123 456 7890

11      11          Holley      Johnson     4/17/2013    123 1St Rd.    123-456-7890
11      2           Hollie      Johnson     1/1/1990     123 First Rd.  123 456 7890

50      50          William     Johnson     4/17/2013    999 2nd St.    222 222 2222
50      3           Bill        Jonson      1/2/1990     999 Second St. 222-222-2222 
```

包含匹配的帐户本身以进行比较。

那么，有没有办法将这些相似的帐户组合在一起而不会重复？它应该如下所示：

```
GroupID  AcctID   FirstName   LastName    AddDate      Address        PhoneNumber
1        2        Hollie      Johnson     1/1/1990     123 First Rd.  123 456 7890
1        10       Holly       Johnson     4/18/2013    123 1St Rd.    123 456 7890
1        11       Holley      Johnson     4/17/2013    123 1St Rd.    123-456-7890
2        50       William     Johnson     4/17/2013    999 2nd St.    222 222 2222
2        3        Bill        Jonson      1/2/1990     999 Second St. 222-222-2222 
```

我不在乎分组是在 SQL 中还是在 SSRS 中完成的。它需要引用两个 ID 列，因为名称、地址和电话号码可能不同。我还需要分配一个新的 GroupID，以便它们可以在报告中分组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:39:41.163

您可以使用排名函数来消除行：

```
with NoDuplicates as
(
  select *
    , rownum = row_number() over (partition by MatchedID order by NewID)
  from Accounts
)
select   NewID
  , MatchedID
  , Name
  , AddDate
  , Address
  , phoneNumber
from NoDuplicates where rownum = 1 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/ee65a/3)。

虽然没有理由你不能只使用`GROUP BY`假设地址信息也总是重复：

```
select NewID = min(NewID)
  , MatchedID
  , Name
  , AddDate
  , Address
  , phoneNumber
from Accounts
group by MatchedID
  , Name
  , AddDate
  , Address
  , phoneNumber 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/ee65a/4)。

这两个都返回您的预期结果。

**评论后编辑：**

您可以使用如下语句对相关行进行分组：

```
with NoDuplicates as
(
  select *
    , rownum = row_number() over (partition by MatchedID order by NewID)
  from Accounts
  where NewID <> MatchedID
)
select groupID = MatchedID
  , Acct = MatchedID
  , FirstName
  , AddDate
  , Address
  , phoneNumber
from NoDuplicates where rownum = 1
union all
select groupID = coalesce(am.MatchedID, a.NewID)
  , Acct = a.MatchedID
  , a.FirstName
  , a.AddDate
  , a.Address
  , a.phoneNumber
from Accounts a
  -- join to the corresponding matched account
  left join Accounts am on a.MatchedID = am.NewID and am.NewID <> am.MatchedID
where a.NewID = a.MatchedID
order by groupID, Acct 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/e931c/11)。

但是，这基本上只是按 分组`MatchedID`。如果您想要从 1 开始编号的组，您可以`DENSE_RANK`在语句中添加一个子句：

```
with NoDuplicates as
(
  select *
    , rownum = row_number() over (partition by MatchedID order by NewID)
  from Accounts
  where NewID <> MatchedID
)
, GroupedAcct as
(
  select GroupID = MatchedID
    , Acct = MatchedID
    , FirstName
    , AddDate
    , Address
    , phoneNumber
  from NoDuplicates where rownum = 1
  union all
  select GroupID = coalesce(am.MatchedID, a.NewID)
    , Acct = a.MatchedID
    , a.FirstName
    , a.AddDate
    , a.Address
    , a.phoneNumber
  from Accounts a
    -- join to the corresponding matched account
    left join Accounts am on a.MatchedID = am.NewID and am.NewID <> am.MatchedID
  where a.NewID = a.MatchedID
)
select GroupID = Dense_Rank() over (order by GroupID)
  , Acct
  , FirstName
  , AddDate
  , Address
  , phoneNumber
from GroupedAcct
order by groupID, Acct 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/e931c/19)。

# python - Sympy 库求解未知变量

> ID：16090146
> 
> 赞同：0
> 
> 时间：2013-04-18T18:05:37.487
> 
> 标签：python, sympy

我推导出了一些带有一些变量的方程。我想解决一个未知变量。我正在使用 Sympy。我的代码如下：

```
import sympy as syp

import math as m
#this is the unknown variable that I want to find
C0 = syp.Symbol('C0')
#Known variables
D0 = 0.874

theta2 = 10.0
fi2 = 80.0

theta1 = (theta2/180.0)*m.pi
fi1 = (fi2/180.0)*m.pi
#Definitions of 6 different equations all of them in respect to CO.
C_t = 5*m.pi*(D0+4*C0)

St123 = 1.5*theta1*(D0+2*C0)

St45 = fi1*(D0+7*C0)

l1 = syp.sqrt((0.5*(D0+4*C0)-0.5*D0*m.cos(theta1))**2 + (0.5*D0*m.sin(theta1))**2)

l2 = syp.sqrt((0.5*(D0+6*C0)-0.5*(D0+2*C0)*m.cos(theta1))**2 + (0.5*(D0+2*C0)*m.sin(theta1))**2)

l3 = syp.sqrt((0.5*(D0+8*C0)-0.5*(D0+4*C0)*m.cos(theta1))**2 + (0.5*(D0+4*C0)*m.sin(theta1))**2)
#Definition of the general relationship between the above functions. Here C0 is unknown and C_b
C_b = C_t + 6*C0 + 3*(l1+l2+l3) - 3*St123 - 3*St45
#for C_b = 10.4866, find C0
syp.solve(C_b - 10.4866, C0) 
```

正如所观察到的，我想解决 C_b 与 C0 的关系。直到最后一行我的代码工作正常。当我运行整个脚本时，计算 C0 似乎需要很长时间。我没有任何警告信息，但我也没有任何解决方案。有人会提出替代方案或可能的解决方案吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:06:42.323

正如我在评论中提到的，这个问题本质上是数字的，所以最好尝试用 numpy/scipy 解决它。尽管如此，这是一个有趣的例子，说明如何在 sympy 中做数字，所以这里是一个建议的工作流程。

首先，如果不是因为这里表达式的相对复杂性，scipy 绝对是比 sympy 更好的选择。但是表达式相当复杂，因此我们可以先将其简化，`sympy`然后再将其输入`scipy`：

```
>>> C_b
38.0∗C0
+3.0∗((0.17∗C0+0.076)∗∗2+(2.0∗C0+0.0066)∗∗2)∗∗0.5
+3.0∗((0.35∗C0+0.076)∗∗2+(2.0∗C0+0.0066)∗∗2)∗∗0.5
+3.0∗((2.0∗C0+0.0066)∗∗2+0.0058)∗∗0.5
+9.4

>>> simplify(C_b)
38.0∗C0
+3.0∗(4.0∗C0∗∗2+0.027∗C0+0.0058)∗∗0.5
+3.0∗(4.1∗C0∗∗2+0.053∗C0+0.0058)∗∗0.5
+3.0∗(4.2∗C0∗∗2+0.08∗C0+0.0058)∗∗0.5
+9.4 
```

现在考虑到您对符号不感兴趣并且简化不是那么好，继续使用 sympy 而不是 scipy 是没有用的，但是如果您坚持可以做到。

```
>>> nsolve(C_b - 10.4866, C0, 1) # for numerical solution
0.00970963412692139 
```

如果你尝试使用`solve`而不是`nsolve`你只会浪费大量资源来寻找一个符号解决方案（在基本术语中甚至可能不存在）当一个数字是瞬时的。

# c++ - 具有派生类的模板化数据类型

> ID：16090147
> 
> 赞同：1
> 
> 时间：2013-04-18T18:05:38.983
> 
> 标签：c++, templates, inheritance

假设我有以下内容：

```
class Base 
{
  protected:
    Base() { }
};

class A : public Base
{
};

class B : public Base
{
}; 
```

现在假设我使用模板执行此操作：

```
TemplatedClass<Base> *generic = new TemplatedClass<A>(); 
```

它不起作用，我相信我明白为什么，但我想知道我是否可以做类似的事情。我有几种形式的模板专业化

```
typedef TemplatedClass<A> ASpec;
typedef TemplatedClass<B> BSpec;
typedef TemplatedClass<C> CSpec; 
```

我有一个变量，我想将其类型推迟到运行时，这样我就可以动态分配它

```
if(condition1)
  generic = new ASpec();
else if(condition2)
  generic = new BSpec(); 
```

有什么办法可以解决这个问题吗？我没有能力改变类是模板化的并且不是从基类继承的事实，或者我会这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:28:15.093

这在 C++ 中是不可能的。`A`源自的事实`Base`并不意味着`TemplatedClass<A>`源自`TemplatedClass<Base>`。

有关替代方法，请参阅此 Stack Overflow 帖子： [从子类的 STL 向量转换为基类的向量](https://stackoverflow.com/questions/5698023/conversion-from-stl-vector-of-subclass-to-vector-of-base-class)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:15:21.420

您可以通过专门化 if for或提供像这样的虚拟类`TemplatedClass<T>`从派生：`TemplatedClass<Base>``Base`

```
struct Dummy {};

template <typename T>
struct BaseClass<T> {
  typedef TemplatedClass<Base> Type;
};

template <>
struct BaseClass<Base> {
  typedef Dummy Type;
};

template <typename T>
struct TemplatedClass : BaseClass<T>::Type
{
  //...
}; 
```

# android - Using breakText, what value should maxWidth have?

> ID：16090148
> 
> 赞同：1
> 
> 时间：2013-04-18T18:05:42.960
> 
> 标签：android, paint

In my current code i'm getting the width of the screen and using it in my breakText as the maxWidth.

```
 Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    int width = size.x;

    Paint p = new Paint();
    p.setTextSize(60);
    p.setSubpixelText(true);

endChar = p.breakText(fullText, 0, endText, true, width, null); 
```

This code isn't giving me the desired answers, it is giving more characters than needed, but i guess I'm using the maxWidth wrongly. Can someone explain what should be entered in maxWidth?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T09:32:09.783

记住设备上文本的屏幕密度和比例因子。您应该将屏幕宽度（以 px 为单位）除以 scaledDensity 以获得以 sp 为单位的屏幕宽度。

它应该是这样的：

```
 Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    DisplayMetrics metrics = getResources().getDisplayMetrics();
    int width = (int)((float)size.x/metrics.scaledDensity);

    Paint p = new Paint();
    p.setTextSize(60);
    p.setSubpixelText(true);

    endChar = p.breakText(fullText, 0, endText, true, width, null); 
```

# javascript - CRM 2011 Set static values to same option set in two different forms

> ID：16090153
> 
> 赞同：0
> 
> 时间：2013-04-18T18:06:15.010
> 
> 标签：javascript, xml, dynamics-crm-2011, crm

I have two lead forms created. One for Office Furniture Product Line and the other for Home Furniture Product line. Now, I've a field set as option type with values Office Furniture and Home Furniture. When the user chooses Home Furniture Lead Form, the form must be able to set Home Furniture as a static value and read-only. Similarly, If it is Office Furniture lead form, the Office Furniture must be set up as a static value read-only. In a way, We want to take away the editing capability for this field from the user. I'm facing a challenge here because the same field is referenced in both the forms. If I set Home Furniture as default value and make it read-only, the office furniture lead form also displays the same value. If anyone could help me with a script to assign 2 different values based on Lead form selection, it'd be a great help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:58:35.100

我能够通过这个来显示结果。但是我为每种形式编写了两个不同的函数

```
function HomeFurniture() {
Xrm.Page.getAttribute("new_lineofbusiness").setValue(100000000);
} 
```

在另一种形式上，我插入了相同的功能

```
function OfficeFurniture() {
Xrm.Page.getAttribute("new_lineofbusiness").setValue(100000000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:58:42.227

您需要检查您是哪种形式并设置字段，您可以从以下示例开始：

```
var currentForm = Xrm.Page.ui.formSelector.getCurrentItem();
if (currentForm != null) {
    var formValue = null;
    var currentFormLabel = currentForm.getLabel();
    switch (currentFormLabel) {
        case "Office Furniture":
            formValue = 1;
            break;
        case "Home Furniture":
            formValue = 2;
            break;
    }
    if (formValue != null) {
        Xrm.Page.getAttribute("new_formtype").setValue(formValue);
        Xrm.Page.getAttribute("new_formtype").setSubmitMode("always");
        Xrm.Page.getControl("new_formtype").setDisabled(true);
    }   
} 
```

当然，仅此代码是不够的，当用户更改表单（如果您想保留这种可能性）或使用导航方法自动更改表单时，您需要小心。

我建议这篇 msdn 文章会有所帮助：

[http://msdn.microsoft.com/en-us/library/gg328253.aspx](http://msdn.microsoft.com/en-us/library/gg328253.aspx)

# ajax - Init js after Ajax call

> ID：16090157
> 
> 赞同：1
> 
> 时间：2013-04-18T18:06:34.003
> 
> 标签：ajax, href

I have a small Javascript used to swap images using a href links. Everything is OK except when I call those a ref inside the page using Ajax. I need to find a way to initialize again the script after calling new links. Here is the JS:

```
<script type="text/javascript"> 
```

$('a.thumbnail').click(function(){ var src = $(this).attr('href');

```
if (src != $('img#largeImg').attr('src').replace(/\?(.*)/,'')){
    $('img#largeImg').stop().animate({
        opacity: '0'
    }, function(){
        $(this).attr('src', src+'?'+Math.floor(Math.random()*(10*100)));
    }).load(function(){
        $(this).stop().animate({
            opacity: '1'
        });
    });
}
return false; 
```

});

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:11:15.350

您需要委托事件。

转这个：

```
$('a.thumbnail').click(function(){ /*...*/ }); 
```

进入这个：

```
$('#someWrapperContainer').on('click', 'a.thumbnail', function(){ /*...*/ }); 
```

确保您使用的是 jQuery 1.7+

# ios - 当 rootViewController 不是 UINavigationController 时推送视图

> ID：16090161
> 
> 赞同：0
> 
> 时间：2013-04-18T18:06:41.850
> 
> 标签：ios, storyboard, apple-push-notifications, appdelegate

好的，所以我一直在寻找以下问题的答案：当推送通知从 AppDelegate 到达时，如何将某个视图控制器推送到视图中？

大多数答案是，如果 rootViewController 是 UINavigationController，我必须通过我的 StoryBoard 实例化一个视图并使用该根导航控制器推送它。

这是我的情况。这是我的故事板的组织方式：

![在此处输入图像描述](https://i.stack.imgur.com/pJc04.png)

所以你看到我的 rootViewController 没有 UINavigationController。那么，我该如何将某个视图从我的故事板中推出呢？

注意：为推送通知提供一些单独的模式视图并不是一个好主意。这是我最后的手段。

我想要 Apple Mail 和 Message 应用程序中的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:41:13.967

好吧，我想我不会轻易放弃 :) 这是我找到的解决问题的方法。由于我从模态视图控制器中呈现我的主要应用程序视图，这就是我所做的：

从 iOS 5 开始，每个视图控制器都有一个`presentedViewController`属性。一旦你知道了，从那里开始就很容易了。这是 AppDelegate.m 中的一些特定代码

```
- (void) application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {  
   if ([[userInfo objectForKey:@"notificationType"] isEqualToString: @"messageType"])   {

   UITabBarController * tabBarController = (UITabBarController *)[self.window.rootViewController presentedViewController];
[tabBarController setSelectedIndex:kChatViewIndex]; 
// My view controller that I presented modally is a tabBar, your case can be different. 

// ... so from here I can reach any navigation controller or any other view from inside my app

} 
```

现在既然你已经有了你的视图控制器，你可以使用 setSelectedIndex: 如果它是一个 tabBarController，或者如果它是一个导航单元则推送某个视图控制器。

希望这可以帮助任何有类似问题的人。干杯!

# jquery - iPad web app: How to trigger full screen video on first play?

> ID：16090163
> 
> 赞同：0
> 
> 时间：2013-04-18T18:06:54.777
> 
> 标签：jquery, html, performance, ipad, video

I embedded a video which needs to play full screen on click.

I was able to bind the full screen instruction to the play button of the controls, but not to the play button which is shown first.

Which event do I need to bind it to?

Here are the important pieces of my code. (I use jquery.)

```
<video id="vid1" width="200" height="122" poster="files-11/video1-200x122.jpg" controls>
    <source src="/path-to/myvideo.mp4" type="video/mp4" />
</video> 
```

```
$("#vid1").bind('play',function() {
    $("#vid1")[0].webkitEnterFullScreen();
}); 
```

# database - App Engine Datastore 上的最终一致性能否解释这种奇怪的行为？

> ID：16090171
> 
> 赞同：0
> 
> 时间：2013-04-18T18:07:19.930
> 
> 标签：database, google-app-engine, google-cloud-datastore, database-replication, acid

我已经实现了两个服务器端 HTTP 端点，它们 1）存储一些数据并 2）处理它。方法 1) 通过[App Engine 任务](https://developers.google.com/appengine/docs/java/taskqueue/overview)调用方法 2)，因为它们是我不希望客户端等待的耗时任务。该过程在下面的序列图中进行了说明。

现在我不时遇到处理任务（在下面的序列图中名为*processSomething*）在尝试处理时找不到数据 - 如下图黄色`throw WtfException()`所示。这可以用[这里描述的](https://developers.google.com/appengine/docs/java/datastore/overview#Ancestor_Paths)**最终一致性**模型来解释吗？

该文档说*读取的强一致性，*但*写入的最终一致性*。我不确定这与此案有关的确切含义。任何澄清表示赞赏。

![在此处输入图像描述](https://i.stack.imgur.com/TGZ5B.png)

**编辑：**我意识到我在这里问的是一个布尔问题，但我想我正在寻找一个答案，其中包含一些关于最终一致性通常是什么的文档，特别是在 Google Datastore 上

**编辑 2：**根据要求，这里是有关实际读/写操作的详细信息：

*写操作：*

```
entityManager.persist(hand); 
entityManager.close() 
```

我正在使用 JPA 进行数据持久性。对象“手”是从客户端收到的，并且之前没有存储在数据库中，因此`Id`将分配一个新密钥。

*读取操作*：

```
SELECT p FROM Hand p WHERE p.GameId = :gid AND p.RoundNo = :rno 
```

主键也不`GameId`是。`RoundNo`GameId 是一个“外键”，尽管 Datastore 在设计上没有注意到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T20:16:55.857

如果您显示实际代码，显示您如何保存实体以及如何检索它，这将有所帮助，但假设这`id`是一个实际的数据存储 ID，是 Key 的一部分，并且您使用的`load`是`get`id 而不是`query`其他属性那么最终一致性不是你的问题。

（这方面的文档在[您链接的页面下方](https://developers.google.com/appengine/docs/java/datastore/overview#Datastore_Writes_and_Data_Visibility)。）

# php - 为什么 wp_enqueue_scripts 不起作用？

> ID：16090189
> 
> 赞同：1
> 
> 时间：2013-04-18T18:08:24.387
> 
> 标签：php, wordpress

我对 wp_enqueue_scripts 钩子有一个简单的调用，但它不会运行该函数：

```
add_action( 'wp_enqueue_scripts', 'add_gz_scripts' );
function add_gz_scripts() {
    wp_register_script('hdgzjs',plugins_url('/js/hdgz.js', __FILE__),'','',true);
    wp_enqueue_script('hdgzjs');
} 
```

我没有在 js 文件上收到“找不到文件”，也没有收到 php 错误。它只是没有运行该功能。我已经尝试在要测试的函数内部回显，它甚至不会回显。除此之外，插件激活并运行良好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T18:45:55.150

对于遇到此问题的任何人：

add_action('wp_enqueue_scripts', '...'); 用于站点侧 add_action( 'admin_init', '...' ); 用于管理方面

当您盯着代码看太久时，很容易忽略这样做。

# node.js - 无需等待当前流完成即可响应每个请求

> ID：16090190
> 
> 赞同：0
> 
> 时间：2013-04-18T18:08:25.330
> 
> 标签：node.js

我正在通过创建一个基本的 node.js 应用程序代码来测试流式传输，该代码基本上将文件流式传输到响应。使用[此处](https://stackoverflow.com/a/6928074/442580)和[此处](http://docs.nodejitsu.com/articles/advanced/streams/how-to-use-fs-create-read-stream)的代码。

但是，如果我从 发出请求`http://127.0.0.1:8000/`，然后打开另一个浏览器并请求另一个文件，则第二个文件将在第一个文件完成之前不会开始下载。在我的示例中，我创建了一个 1GB 的文件。`dd if=/dev/zero of=file.dat bs=1G count=1`

*但是，如果我在第一个文件正在下载*时再请求三个文件，则在第一个文件完成后，这三个文件将同时开始下载。

**如何更改代码以便它响应每个请求，而不必等待当前下载完成？**

```
var http = require('http');
var fs = require('fs');
var i = 1;

http.createServer(function(req, res) {

    console.log('starting #' + i++);
    // This line opens the file as a readable stream
    var readStream = fs.createReadStream('file.dat', { bufferSize: 64 * 1024 });

    // This will wait until we know the readable stream is actually valid before piping
    readStream.on('open', function () {
        console.log('open');
        // This just pipes the read stream to the response object (which goes to the client)
        readStream.pipe(res);
    });

    // This catches any errors that happen while creating the readable stream (usually invalid names)
    readStream.on('error', function(err) {
        res.end(err);
    });
}).listen(8000);

console.log('Server running at http://127.0.0.1:8000/'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:48:32.067

您的代码看起来不错。我通过在多个学期会话中提出一些请求，使用节点 v0.10.3 对其进行了检查：

```
$ wget http://127.0.0.1:8000 
```

两个请求同时运行。使用两种不同的浏览器（即 Chrome 和 Safari）时，我得到了相同的结果。此外，只需稍微更改请求 url，我就可以在 Chrome 中获得并发下载，如下所示：

```
http://localhost:8000/foo 
```

和

```
http://localhost:8000/bar 
```

*当从同一个浏览器*对*同一个 url*发出多个请求时，您描述的行为似乎很明显。

这可能是浏览器限制 - 看起来第二个请求甚至在第一个请求完成或取消之前都没有发出。

回答您的问题，如果您需要在浏览器中下载多个客户端

1.  确保您的服务器代码实现了文件到 URL 的映射是一对多的（即使用通配符）。
2.  确保您的客户端代码（即浏览器中的 javascript）对每个请求使用不同的 url。

# windows - 重启机器的 Windows 服务

> ID：16090193
> 
> 赞同：0
> 
> 时间：2013-04-18T18:08:29.603
> 
> 标签：windows, windows-services, locked, logoff

如果系统被锁定或系统被注销，我有一个 Windows 服务应该重新启动机器。

该服务在系统锁定时运行良好，但如果系统退出，则不希望重新启动机器。

该服务在本地系统权限下运行。

当用户选择注销机器而不是锁定机器时，我不知道为什么服务无法正常工作......

有任何想法吗？

谢谢

# sql - 语法将两个存储过程合二为一

> ID：16090194
> 
> 赞同：-5
> 
> 时间：2013-04-18T18:08:30.670
> 
> 标签：sql, sql-server-2008

```
 SELECT *
 FROM   [Live].[Test]
 WHERE  [_fk_RoadMapKey] = @_fk_RoadMapKey

 SELECT @TestKey = [TestKey]
 FROM   [Live].[Test]
 WHERE  [_fk_RoadMapKey] = @_fk_RoadMapKey

 SELECT *
 FROM   [Live].[SetofTestGrades]
 WHERE  [_fk_TestKey] = @TestKey 
```

前两个语句，我们可以在分配 testkey 的同时获取所有测试吗

```
SELECT * ,@TestKey = [TestKey] FROM [Live].[Test]
    WHERE [_fk_RoadMapKey] = @_fk_RoadMapKey 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:22:32.710

您不能将数据分配给变量并使用单个 select 语句返回数据，如果您使用`@TestKey`从另一个表中检索值，那么您可以跳过变量并使用连接从另一个表中获取数据，试试这个

```
 SELECT *
 FROM   [Live].[Test]
 WHERE  [_fk_RoadMapKey] = @_fk_RoadMapKey

 SELECT S.*
 FROM  [Live].[SetofTestGrades] S 
 INNER JOIN [Live].[Test] T ON S.[_fk_TestKey]  = T.[TestKey]
 WHERE  t.[_fk_RoadMapKey] = @_fk_RoadMapKey 
```

# php - 如何解码十六进制内容？

> ID：16090196
> 
> 赞同：2
> 
> 时间：2013-04-18T18:08:34.340
> 
> 标签：php

我的 $_SERVER['REDIRECT_SSL_CLIENT_S_DN'] 内容包含某种十六进制数据。我该如何解码？

```
$_SERVER['REDIRECT_SSL_CLIENT_S_DN'] = '../CN=\x00M\x00\xC4\x00,\x00I\x00S\x00,\x004\x000\x003\x001\x002\x000\x000\x002/SN=..';
$pattern = '/CN=(.*)\\/SN=/';
preg_match($pattern, $_SERVER['REDIRECT_SSL_CLIENT_S_DN'], $server_matches);
print_r($server_matches[1]); 
```

结果是：

`\x00M\x00\xC4\x00,\x00I\x00S\x00,\x004\x000\x003\x001\x002\x000\x000\x002`

我需要的结果是：

`MÄ,IS,40312002`

我试图用它解码它，`chr(hexdec($value));`它几乎可以工作，但在 html 输入中我看到很多问号。

**编辑：** 附加测试结果。还不完美。数组显示一些错误： http: [//pastebin.com/BC4xxqmE](http://pastebin.com/BC4xxqmE)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:56:20.590

您是否尝试过 chr() 的 unicode 等价物？chr mod 256 所有的输入，这就是你看到所有这些问号的原因。

下面的代码来自 chr php 手册中的一篇文章

```
function unichr($u) {
    return mb_convert_encoding('&#' . intval($u) . ';', 'UTF-8', 'HTML-ENTITIES');
} 
```

**更新**

```
//New function
function unichr($intval) {
return mb_convert_encoding(pack('n', $intval), 'UTF-8', 'UTF-16BE');
} 
```

我用 xC4=196 测试它给了我一个 Ä

[http://codepad.viper-7.com/3htuwW](http://codepad.viper-7.com/3htuwW)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:56:03.997

使用后`utf8_encode`，您现在有了一个多字节字符串。这意味着您需要使用 PHP 的[多字节 ( `mb_`)](http://www.php.net/manual/en/ref.mbstring.php)函数。

所以，`str_split`不会再工作了。您需要使用`mb_split`或`preg_split`与`u`标志一起使用。

```
$splitted = preg_split('//u', $string); 
```

这是一个演示，表明您的代码现在正在运行：http: [//ideone.com/nqeC0U](http://ideone.com/nqeC0U)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:17:26.953

您的输入是 UTF-8，使用该转换类似于将转换为 ISO-8859-1 的 utf8_decode。UTF-8 虽然支持比 ISO-8859-1 更多的字符。这就是为什么 xC4 对您显示为问号的原因。

尝试使用更强大的东西，比如 iconv。

# sql - 用于计算中位数和分组依据的 SQL 查询

> ID：16090204
> 
> 赞同：1
> 
> 时间：2013-04-18T18:08:59.920
> 
> 标签：sql, sql-server-2008, tsql

我有下表。

```
DECLARE @TBL_RESULT Table
(   
    ID varchar(10),
    CreateDate DateTime,
    PEOPLE_CODE_ID varchar(10), 
    CONVERSION_DATE DateTime,
    CAMPUS varchar(20),
    DAYS_TOOK int   
); 
```

此表记录了从 2013 年 1 月 1 日至今已接收和转换的所有潜在客户的记录。

我最初需要找到转换过去 10 周内到达的潜在客户所需的中位数时间并按校园分组我能够使用下面的 SQL 查询做到这一点

```
WITH    CTE_RESULT
          AS ( SELECT   *
               FROM     @TBL_RESULT
               WHERE    CreateDate > DATEADD(WEEK, -10, GETDATE())
             )
    SELECT  Campus ,
            AVG(DAYS_TOOK) AS MedianTime
    FROM    ( SELECT    CAMPUS ,
                        Days_Took ,
                        ROW_NUMBER() OVER ( PARTITION BY Campus ORDER BY Days_Took ASC ) AS AgeRank ,
                        COUNT(*) OVER ( PARTITION BY CAMPUS ) AS CampusCount
              FROM      CTE_RESULT
            ) x
    WHERE   x.AgeRank IN ( x.CampusCount / 2 + 1, ( x.CampusCount + 1 ) / 2 )
    GROUP BY x.Campus 
```

我现在需要在图表上绘制这种趋势，即查找前 10 周的桶记录并在折线图上绘制中值 - 每条线都是一个校园。（按校区分组）

光标是我唯一的选择吗？从 1 月 1 日开始，我将在其中找到前 10 周的线索，执行上述 SQL 查询以获取中位数，将其推送到临时表，然后找到接下来的 10 周，依此类推。

或者有什么更好的我可以做的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T19:10:12.917

在不尝试优化查询的情况下，如果您需要在多个 10 周期间产生**相同**的结果，您可以根据需要将当前（10 周前到今天）范围扩展到尽可能多的范围，在整个查询中线程化**PeriodEndDate** ，如图所示以下。

[SQL小提琴](http://sqlfiddle.com/#!6/d41d8/3681)

**MS SQL Server 2012 架构设置**：

**查询 1**：

```
DECLARE @TBL_RESULT Table
(   
    ID varchar(10),
    CreateDate DateTime,
    PEOPLE_CODE_ID varchar(10), 
    CONVERSION_DATE DateTime,
    CAMPUS varchar(20),
    DAYS_TOOK int   
);

-- fill the table with some dummy data from 2013-01-01
INSERT @TBL_RESULT (CreateDate, Campus, Days_Took)
SELECT DATEADD(D, A.Number, '20130101'), 'Campus' + Right(B.Number, 10),
       ABS(CAST(NEWID() AS binary(6)) % 130) + 1
FROM master..spt_values A
JOIN master..spt_values B on B.type='P' and B.number < 50 -- 50 campuses
WHERE A.type='P'
  AND DATEADD(D, A.Number, '20130101') <= GetDate();

-- This first CTE is used to create the required number of 10-week periods
WITH N(NUMBER) AS (
  SELECT 0
  union all
  select number+1 from N
  where Number <= DATEDIFF(WEEK, '20130101', GETDATE())
),
-- and from below here it's your query with the PeriodEndDate threaded through
CTE_RESULT AS (
  SELECT   DATEADD(WEEK, -Number, GETDATE()) PeriodEndDate,
           T.*
  FROM     @TBL_RESULT T
  CROSS    JOIN     N
           -- you see the range built up dynamically here
  WHERE    CreateDate > DATEADD(WEEK, -Number-10, GETDATE())
    AND    CreateDate < DATEADD(WEEK, -Number, GETDATE()) +1
)
SELECT  PeriodEndDate, Campus ,
        AVG(DAYS_TOOK) AS MedianTime
FROM    (
         SELECT PeriodEndDate,   CAMPUS ,
         Days_Took ,
         ROW_NUMBER() OVER ( PARTITION BY PeriodEndDate, Campus ORDER BY Days_Took ASC ) AS AgeRank ,
         COUNT(*) OVER ( PARTITION BY PeriodEndDate, CAMPUS ) AS CampusCount
         FROM      CTE_RESULT
        ) x
WHERE   x.AgeRank IN ( x.CampusCount / 2 + 1, ( x.CampusCount + 1 ) / 2 )
GROUP BY x.PeriodEndDate, x.Campus
ORDER BY x.PeriodEndDate, x.Campus; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:20:24.230

看来你解决了问题的难点。

为了得到你想要的，你需要引入一个分组变量。在这种情况下，我测量过去的周数并除以 10（SQL Server 进行整数除法，因此这会产生一个整数）。

`partition by`然后您就可以在and`group by`语句中明智地使用它：

```
WITH CTE_RESULT AS (
       SELECT   t.*,
                DATEDIFF(week, CreateDate, GETDATE()) / 10 as groupnum
       FROM     @TBL_RESULT t
      )
SELECT Campus, groupnum, MIN(CreateDate), MAX(CreateDate),
       AVG(DAYS_TOOK) AS MedianTime
FROM (SELECT t.*,
              ROW_NUMBER() OVER (PARTITION BY groupnum, Campus ORDER BY Days_Took ASC ) AS AgeRank ,
              COUNT(*) OVER (PARTITION BY groupnum, CAMPUS) AS CampusCount
      FROM CTE_RESULT t
     ) x
WHERE x.AgeRank IN ( x.CampusCount / 2 + 1, ( x.CampusCount + 1 ) / 2 )
GROUP BY x.Campus, groupnum 
```

我还没有测试过这个，所以它可能有一两个语法错误。

# google-chrome - 将 GIF 图像放在 favicon 中，无法在 Chrome 上运行

> ID：16090206
> 
> 赞同：5
> 
> 时间：2013-04-18T18:09:05.063
> 
> 标签：google-chrome, favicon

我创建了一个 HTML/CSS 网站，其中包括 PHP 脚本、MySQL 查询和很多东西。我为页面的图标放置了一个 favicon 图像。我在网上创建的图标是一种 GIF 格式。现在，在 Mozilla Firefox 中，图像正在发生变化，我可以正确地在 favicon 中看到这两个图像。Chrome 仅显示第一个并且不会更改图像。

可能是什么原因？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T18:11:50.943

Chrome 不支持动画网站图标，而且看起来没有人有兴趣实现它。

原始错误报告：[http ://code.google.com/p/chromium/issues/detail?id=19731](http://code.google.com/p/chromium/issues/detail?id=19731)

最新副本：[http ://code.google.com/p/chromium/issues/detail?id=130062](http://code.google.com/p/chromium/issues/detail?id=130062)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-12T20:53:46.340

**这适用于谷歌浏览器：**

*注意：您可以使用包含 Base64 编码图标的数组并循环使用 switch 语句插入的元素，但我更喜欢以这种方式分解。*

```
document.head = document.head || document.getElementsByTagName('head')[0];
function changeFavicon(src) {
    var link = document.createElement('link'), oldLink = document.getElementById('dynamic-favicon');
    link.id = 'dynamic-favicon';
    link.rel = 'shortcut icon';
    link.href = src;
    if (oldLink) {
        document.head.removeChild(oldLink);
    }
    document.head.appendChild(link);
    }
function animate(){
    if ( typeof animate.i == 'undefined' ) {
        animate.i = 0;
    }
    switch(animate.i) {
        case 0:
            changeFavicon("[PUT BASE64 for ICO FRAME 1 HERE]");
            break;
        case 1:
            changeFavicon("[PUT BASE64 for ICO FRAME 2 HERE]");
            break;
        case 2:
            changeFavicon("[PUT BASE64 for ICO FRAME 3 HERE]");
            break;
        case 3:
            changeFavicon("[PUT BASE64 for ICO FRAME 4 HERE]");
            break;
        case 4:
            changeFavicon("[PUT BASE64 for ICO FRAME 5 HERE]");
            break;
        case 5:
            changeFavicon("[PUT BASE64 for ICO FRAME 6 HERE]");
            break;
        case 6:
            changeFavicon("[PUT BASE64 for ICO FRAME 7 HERE]");
            break;
        case 7:
            changeFavicon("[PUT BASE64 for ICO FRAME 8 HERE]");
            break;
        case 8:
            changeFavicon("[PUT BASE64 for ICO FRAME 9 HERE]");
            break;
        case 9:
            changeFavicon("[PUT BASE64 for ICO FRAME 10 HERE]");
            break;
        case 10:
            changeFavicon("[PUT BASE64 for ICO FRAME 11 HERE]");
            break;
        case 11:
            changeFavicon("[PUT BASE64 for ICO FRAME 12 HERE]");
            break;
        case 12:
            changeFavicon("[PUT BASE64 for ICO FRAME 13 HERE]");
            break;
        case 13:
            changeFavicon("[PUT BASE64 for ICO FRAME 14 HERE]");
            break;
        case 14:
            changeFavicon("[PUT BASE64 for ICO FRAME 15 HERE]");
            break;
        case 15:
            changeFavicon("[PUT BASE64 for ICO FRAME 16 HERE]");
            break;
    }
    animate.i = animate.i + 1;
    if(animate.i == 16){
        animate.i = 0;
    }
}
setInterval(animate,250); 
```

# actionscript-3 - 评估函数调用的来源

> ID：16090214
> 
> 赞同：0
> 
> 时间：2013-04-18T18:09:22.743
> 
> 标签：actionscript-3, flash-cs6

好的，所以我有一个名为的函数`changeHandler`- 它由其他函数中的几个 eventListeners 调用。我想编写几个`if`语句来评估函数调用的来源并根据原始函数更改`dataProvider`my的。`ComboBox`示例：调用多个函数之一`displayCarbs()`并具有如下事件监听器：

```
function displayCarbs(event:MouseEvent):void {
myComboBox.addEventListener(Event.CHANGE, changeHandler);
} 
```

（我已经从上面的函数中删除了所有不必要的代码）

里面的`if`语句`changeHandler`看起来像这样：

```
if (****referring function = displayCarbs****) {
    myComboBox2.dataProvider = new DataProvider(carbItems);
    } 
```

我一直在寻找可以实现这一目标的东西，但我对 AS3 或词汇的掌握不够好，无法描述我从谷歌获得答案的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:26:20.110

我知道已经有一个公认的答案，但是根据我对问题的了解，这是一个不需要添加另一个变量来检查的解决方案：

```
function displayCarbs(event:MouseEvent):void 
{
  myComboBox.addEventListener(Event.CHANGE, changeHandler);
}

function changeHandler(event:Event):void 
{
     var comboBox:ComboBox = event.target as ComboBox;

     if (comboBox.dataProvider == uniqueProvider)
     {
           myComboBox2.dataProvider = new DataProvider(appropriateItems);
     }
} 
```

如果第二个 dataProvider 是基于第一个 dataProvider 确定的，这应该可以工作。这当然要求您的 uniqueProvider 是一个类成员变量，因此它在处理程序中具有范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:49:23.370

我能想到的最简单的方法......你不能简单地创建一个文本字符串，在去 changeHandler 之前更新到函数的名称，然后 changeHandler 可以检查字符串内容并采取相应的行动..

```
public var referring_function:String;

function displayCarbs(event:MouseEvent):void 
{
  referring_function = "displayCarbs";
  myComboBox.addEventListener(Event.CHANGE, changeHandler);
}

function displayCarbs(event:Event):void 
{
  if (referring_function == "displayCarbs") 
  { myComboBox2.dataProvider = new DataProvider(carbItems); }
  if (referring_function == "displayOthers") 
  { myComboBox2.dataProvider = new DataProvider(otherItems); }
  // etc etc
} 
```

我现在不记得您是否需要`==`或只是`=`在检查**If 语句**与字符串时。

# php - 如何找到特定行值的排名？

> ID：16090219
> 
> 赞同：-4
> 
> 时间：2013-04-18T18:10:06.817
> 
> 标签：php, mysql

我有一个名为“点”的表，如下所示，

```
姓名 | 观点
美国广播公司 10
cde 5
EFG 15
```

如何查找特定名称的排名？

例如：在上述情况下，cde 排名 3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:14:50.020

一个简单的方法（虽然它需要知道一个名字有多少分）是计算它上面的行

```
SELECT COUNT(*) AS rank FROM tbl WHERE points > '%d' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:19:25.777

这将是您的 sql 查询：

```
SELECT t.name FROM sometable t ORDER BY t.point DESC; 
```

在 php 中运行查询后，您将获得一个排序的结果集。然后你通过该结果集计数，直到找到你的名字。那是你的等级。如果您希望队伍向另一个方向发展，请更改`DESC`为。`ASC`您的函数的内容如下所示：

```
$rankingQuery = SELECT t.name FROM sometable t ORDER BY t.point DESC;
try {
    $dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);
    $rank = 0;
    $sth = $dbh->prepare($rankingQuery);
    $sth->execute();

    $name = $sth->fetchColumn(); 
    while ($name) {
      $rank = $rank + 1;
      if ($name == $DESIRED_NAME {
        return $rank;
      }
      $name = $sth->fetchColumn();
    }
    $dbh = null;
} catch (PDOException $e) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
} 
```

# lightswitch-2012 - 无法在 LightSwitch 2012 项目中分配值

> ID：16090220
> 
> 赞同：1
> 
> 时间：2013-04-18T18:10:09.783
> 
> 标签：lightswitch-2012

我正在尝试将以下代码实现到 LightSwitch 2012 项目中。当我尝试将 this.ExpenseReport 分配给一个值时出现错误。错误显示“无法将属性或索引器‘LightSwitchApplication.ExpenseReportDetails.ExpenseReport’分配给——它是只读的”。

```
partial void ExpenseReportDetails_InitializeDataWorkspace(List<IDataService> saveChangesTo)
    {

        // Write your code here.
        if (this.ExpenseReportId == -1) // -1 means new Report    
        {        // Create a new ExpenseReport        
            this.ExpenseReport = new ExpenseReport();
        }
        else
        {
            // Get existing Expense Report        
            this.ExpenseReport = this.DataWorkspace.ApplicationData.ExpenseReports_SingleOrDefault(this.ExpenseReportId);

            // Set the name of the Tab to the default field on the Entity        
            this.SetDisplayNameFromEntity(this.ExpenseReport);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:15:06.743

的实现`ExpenseReport`没有`set`属性，只有属性`get`。这意味着您不能运行以下行：

```
this.ExpenseReport = this.DataWorkspace.ApplicationData.ExpenseReports_SingleOrDefault(this.ExpenseReportId); 
```

能改成`ExpenseReport`可写吗？

# dynamics-crm-2011 - 直接从 Dynamics CRM 发送报价

> ID：16090231
> 
> 赞同：0
> 
> 时间：2013-04-18T18:10:45.790
> 
> 标签：dynamics-crm-2011, microsoft-dynamics

我正在尝试找到一种方法将生成的报价直接从 CRM 发送到我的客户 + 同时添加完成的任务。据我了解，唯一的方法是下载报价作为模板并使用邮件合并。然后手动创建一个任务。我要你证明我错了，关于这个..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:16:46.833

mscrm-addons 有一个名为[Document Core Pack](http://mscrm-addons.com/Products/AddonsforMSCRM2011/DocumentsCorePack/tabid/170/Default.aspx)的产品。这将生成更好的报价文件，附加到电子邮件（如果需要，可作为 pdf 格式），将文件保存到 CRM 和/或 SharePoint，为您创建历史项目等。我已经在几个实现中使用过它，它的易用性给我留下了深刻的印象。看看那个。

# python - django 复杂的表单集问题

> ID：16090233
> 
> 赞同：0
> 
> 时间：2013-04-18T18:10:51.520
> 
> 标签：python, django, python-2.7, django-forms

我有 3 个主要模型。问卷模型或问题集包含一组问题。所有用户响应都存储在 answer 中。

现在我必须生成一个表单集，它将存储问卷集中所有问题的答案。我怎么能在 django 中做到这一点。到目前为止，我已经设法通过一次显示给定问卷中的单个问题并存储响应来做到这一点。我的问题是基于 questiontype 使用两种不同的模型形式（MultipleChoiceAnswerForm、DescriptiveChoiceAnswerForm）并根据表单类型验证它们。如何在表单集中使用它。

我是 django 的初学者，感谢任何帮助。

我的代码：

```
#Models.py

class Question(models.Model):
    statement = models.CharField(max_length=255)
    question_type = models.CharField(max_length=20, choices=get_qtypes())
    remarks = models.CharField(max_length=200, null=True, blank=True)

    def __unicode__(self):
        return '%s'%(self.statement)

class Questionnaire(models.Model):
    title = models.CharField(max_length=255)
    questionaire_type = models.CharField(max_length=20,choices=QUESTIONNAIRETYPE)
    context = models.ForeignKey(QuestionContext)
    questions = models.ManyToManyField(Question)

    timestamp = models.DateTimeField(auto_now=True)
    tathya_user = models.ForeignKey(User)

    def __unicode__(self):
        return '%s'%(self.title)

class Answer(models.Model):
    question = models.ForeignKey(Question)
    person = models.ForeignKey(Person)
    course = models.ForeignKey(Course)
    teacher=models.ForeignKey(Person, null=True, blank=True, default = None)
    questionaire = models.ForeignKey(Questionnaire)
    statement = models.CharField(max_length=255)

    def get_label(self):
        return '%s'%(self.question.statement)
    def get_choices(self):
        return get_questionchoices(self.question.question_type)

class DescriptiveAnswerForm(ModelForm):
    def __init__(self, *args, **kwargs):
        super(DescriptiveAnswerForm, self).__init__(*args, **kwargs)
        if kwargs.has_key('instance'):
            self.fields['statement'].label = kwargs['instance'].get_label()

    statement = forms.CharField(widget=forms.Textarea())
    class Meta:
        model = Answer
        exclude=('question','person','course','teacher','questionaire')

class MultipleChoiceAnswerForm(ModelForm):
    statement = forms.ChoiceField(widget=forms.RadioSelect(choices=EMPTY,attrs={'class': 'allradio',}))

    def __init__(self, *args, **kwargs):
        super(MultipleChoiceAnswerForm, self).__init__(*args, **kwargs)
        if kwargs.has_key('instance'):
            self.fields['statement'].label = kwargs['instance'].get_label()
            self.fields['statement'].choices = kwargs['instance'].get_choices()

    class Meta:
        model = Answer
        exclude=('question','person','course','teacher','questionaire')

###################################################################
#view.py
@login_required
def content_feedback_view_old(request,course_code):
    #do validation and other jobs
    questionnaire = get_questionnaire(some_params_like_coursecode)
    if request.method == 'POST':
        r_answer = Answer()
        r_answer.question = Question.objects.get(id=request.session['question'])
        r_answer.person = student
        r_answer.course = course
        r_answer.questionaire = questionnaire
        r_answer.tathya_user = User.objects.get(id=request.user.pk)
        rformtype = request.POST['formtype']
        if rformtype == 'MCQ':
            rform = MultipleChoiceAnswerForm(request.POST, instance=r_answer)
        else:
            rform = DescriptiveAnswerForm(request.POST, instance=r_answer)
        if rform.is_valid():
            rform.save()
        else:
           #return HttpResponse(printerror("Some problem occurred!"))
           errortext = "You need to provide an input!"

    questions = questionnaire.questions.all()
    allquestions = questions.count()
    tot_q = 0
    formtype = ""
    answered = 0
    for question in questions:
        try:
            answer=Answer.objects.get(question=question,person=student,course=course,questionaire=questionnaire)
            answered += 1
        except:
            answer = Answer()
            answer.question = question
            answer.person = student
            answer.course = course
            answer.questionaire = questionnaire
            answer.tathya_user = User.objects.get(id=request.user.pk)
            request.session['question']=question.id
            tot_q = tot_q + 1;
            if get_questiontype(question.question_type)=='MCQ':
                formtype="MCQ"
                form=MultipleChoiceAnswerForm(instance=answer)
            else:
                formtype="DESC"
                form=DescriptiveAnswerForm(instance=answer)
            break
    if tot_q>0:
        data_dict['FeedbackFormType']=formtype
        data_dict['FeedbackForm']=form
        data_dict['pagetitle']=context.description
        data_dict['coursecode']=course.course_code
        data_dict['feedbacktitle']="Content Feedback for "+course.fullname
        data_dict['Completeness'] = (answered/allquestions)*100
        data_dict['error']=errortext
    else:
        return HttpResponse(printerror("Thanks! You've answered all the questions!<br><a href=\"/feedback/teachers/"+course.course_code+"\">Continue with the teaching feedback.</a>"))
    req_context = RequestContext(request)
    return render_to_response('view.html', data_dict, req_context) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:55:46.657

简单的答案：仅在单个 AnswerForm 上使用并让它管理它应该使用哪种字段和小部件，即：

```
class AnswerForm(ModelForm):
    def __init__(self, *args, **kwargs):
        super(AnswerForm, self).__init__(*args, **kwargs)
        instance = self.instance
        if instance.question.question_type == 'MCQ':
             self.fields["statement"] = forms.ChoiceField(
                 choices=instance.get_choices(),
                 widget=forms.RadioSelect(attrs={'class': 'allradio',})
                 )
        else:
             self.fields["statement"] = forms.CharField(
                widget=forms.Textarea()
                )
        self.fields['statement'].label = instance.get_label()

    class Meta:
        model = Answer
        exclude=('question','person','course','teacher','questionaire') 
```

作为旁注，您可以将模型的属性值传递给模型的构造函数：

```
 answer = Answer(
        question=Question.objects.get(id=request.session['question']),
        person=student,
        course=course,
        questionnaire=questionnaire,
        # User.objects.get(id=request.user.pk) will return request.user
        # so it's just useless - just use request.user
        tathya_user=request.user
        ) 
```

# ruby-on-rails - 如何集成测试两个 Rails 应用程序

> ID：16090235
> 
> 赞同：2
> 
> 时间：2013-04-18T18:11:00.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我们有两个独立的 Ruby on Rails 应用程序，一个接受上传的文件，另一个从另一个应用程序收到的上传文件生成文件。

我们正在尝试将端到端的黑盒回归和集成测试放在一起，以证明当您将某个文件上传到第一个应用程序时，您可以指望从另一个应用程序中获取某个文件。

问题是如何编写脚本，以便使用种子值重置两个独立的数据库，启动两个服务器，Capybara 访问两个独立的“网站”。

到目前为止，在构建和测试每个应用程序时，我们都依赖于让事情“正常工作”的 Rails 魔法，因此处理单独的数据库、单独的服务器端口和其他未知的问题看起来像是一个绊脚石。

有没有人为这种测试写过最佳实践？有关如何自动化此类集成测试的任何示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T20:03:41.347

您可以使用 Heroku 将这两个应用程序联机。然后使用来自 saucelabs.com 的 sauce_ruby gem 作为连接器，以获取 rspec 和 capybara 以对应用程序运行测试。运行 heroku run rake db:reset 以在测试之前重新播种（使用 seed.rb）数据（您可以编写脚本）。[酱红宝石](https://github.com/sauce-labs/sauce_ruby/)

# macos - mac OSX 10.8.3 文件系统上的 gae 本地数据存储在哪里？

> ID：16090238
> 
> 赞同：9
> 
> 时间：2013-04-18T18:11:02.273
> 
> 标签：macos, python-2.7, google-app-engine, google-cloud-datastore

我已经尝试了这些帖子中的所有建议：

[有谁知道 Mac OS X 的 Google App Engine 本地数据存储文件位于何处](https://stackoverflow.com/questions/15753914/does-anyone-know-where-the-google-app-engine-local-datastore-file-located-for-ma)

[我的本地 App Engine 数据存储在哪里？](https://stackoverflow.com/questions/3588817/where-is-my-local-app-engine-datastore)

[Google App Engine 本地数据存储路径配置](https://stackoverflow.com/questions/6697990/google-app-engine-local-datastore-path-configuration)

我仍然找不到我的本地数据存储。

我没有设置 SDK 来在启动时清除数据存储，而且即使应用服务器正在运行，我也找不到它。有谁知道 Google App Engine 的开发服务器数据存储文件的文件路径？

我正在运行 GAE SDK 1.7.7。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-01T13:21:37.800

## 从我的一个朋友那里得到这个答案。为我工作，我希望它可以帮助其他人。

默认情况下，它是 [本地数据存储] 存储在一个几乎随机的目录中。我目前的看起来像 /private/var/folders/81/ABUNCHOFCRAP/T/..../datastore.db。幸运的是，它总是被称为 datastore.db。如果你的结构和我的一样，你可以在终端中使用以下命令找到它：

```
find /private/var/folders -name datastore.db 
```

这应该会打印出您要查找的文件的完整路径，以及一堆“权限被拒绝”消息。如果这没有产生任何结果，请使用以下命令：

```
find / -name datastore.db 
```

那个可能需要一段时间才能运行（它会查看您有权访问的所有目录），但如果它在那里，它肯定会找到它。只需将其中一个命令复制到您的终端中，您就应该一切就绪。让我知道这是否有帮助。

# jquery - 如何在jQuery中的表onload中设置基于行的位置

> ID：16090239
> 
> 赞同：0
> 
> 时间：2013-04-18T18:11:05.747
> 
> 标签：jquery, html-table

我已将表格行位置保存在数据库中。现在我想根据他们的位置显示表格行。请告诉我如何在 jQuery 中加载表数据。

即我的代码：

```
<table id="table">
<thead>
<th></th>
<th align="left">Title</th>
<th align="left">Importance</th>
<th align="left">Urgency</th>
<th></th>
</thead>
<tbody>
<%for(Todo todo:todoList){ %>
<tr>

<td><input type="checkbox" id="todocheck" value="<%=todo.getId()%>"/></td>
<td><a href="#" id="aid" style="padding-left:<%=todo.getCss()%>"><%=todo.getTitle() %></a></td>
<td><input type="text" id="importance" value="<%=todo.getImportance()%>" /> </td>
<td><input type="text" id="urgency" value="<%=todo.getUrgency()%>" /> </td>
<td><input type="hidden" name="parentId" id="parentId" value="<%=todo.getParent_tash_id()%>"/></td>

</tr>
<%} %>
</tbody>
</table> 
```

# asp.net - 在用户控件中使用会话

> ID：16090240
> 
> 赞同：0
> 
> 时间：2013-04-18T18:11:06.197
> 
> 标签：asp.net, vb.net, iis, ascx

我在我的项目中使用了很多 ASCX 用户控件。这些控件利用更新面板来更新其内容。为了在部分回发中保留数据（即，当更新面板更新时），我将所有控件数据存储在一个会话中。例如，我可能有一个使用 CheckBoxList 的控件。当用户从列表中选中一个框时，它会导致部分回发（执行一些逻辑）并且更新面板会触发。因为面板正在更新，所以我会在回发之间丢失所有数据，除了我将这些数据存储在会话中。这样，当控件重新加载时，我可以获取数据并恢复复选框列表。我的会话通常由对象列表组成。

我的问题是：这是保存数据的最佳方式吗？我可能没有考虑到哪些可能的问题？有人告诉我，如果多人同时使用它（因为对象列表很大），IIS 可能会耗尽内存并崩溃。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:00:36.873

很难说这是否是您特定项目的“保存数据的最佳方式”。但是，我可以解决您问题的“可能问题”部分。

会话状态默认存储在内存中，这意味着您将在服务器上使用额外的资源。会话变量可以即时创建，不需要您显式处理它们，这可能会导致更多开销。所以是的，您是正确的，将会话用于您的大部分功能很可能意味着使用更多资源（CPU 和内存）。它是否会“内存不足并崩溃”是负载与服务器的问题。

# python - 熊猫数据框作为 matplotlib.pyplot.boxplot 的输入

> ID：16090241
> 
> 赞同：2
> 
> 时间：2013-04-18T18:11:07.547
> 
> 标签：python, pandas, dataframe, boxplot

我有一个看起来像这样的熊猫数据框：

```
[('1975801_m', 1      0.203244
10    -0.159756
16    -0.172756
19    -0.089756
20    -0.033756
23    -0.011756
24     0.177244
32     0.138244
35    -0.104756
36     0.157244
40     0.108244
41     0.032244
42     0.063244
45     0.362244
59    -0.093756
62    -0.070756
65    -0.030756
66    -0.100756
73    -0.140756
77    -0.110756
81    -0.100756
84    -0.090756
86    -0.180756
87     0.119244
88     0.709244
102   -0.030756
105   -0.000756
107   -0.010756
109    0.039244
111    0.059244
Name: RTdiff), ('3878418_m', 1637    0.13811
1638   -0.21489
1644   -0.15989
1657   -0.11189
1662   -0.03289
1666   -0.09489
1669    0.03411
1675   -0.00489
1676    0.03511
1677    0.39711
1678   -0.02289
1679   -0.05489
1681   -0.01989
1691    0.14411
1697   -0.10589
1699    0.09411
1705    0.01411
1711   -0.12589
1713    0.04411
1715    0.04411
1716    0.01411
1731    0.06411
1738   -0.25589
1741   -0.21589
1745    0.39411
1746   -0.13589
1747   -0.10589
1748    0.08411
Name: RTdiff) 
```

我想用它作为 mtplotlib.pyplot.boxplot 函数的输入。

我得到的错误`matplotlib.pyplot.boxplot(mydataframe)`是`ValueError: cannot set an array element with a sequence`

我尝试使用`list(mydataframe)`而不是`mydataframe`. 失败并出现同样的错误。

我也试过`matplotlib.pyplot.boxplot(np.fromiter(mydataframe, np.float))`- 失败了`ValueError: setting an array element with a sequence.`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T20:16:51.203

目前尚不清楚您的数据是否在 DataFrame 中。它似乎是 Series 对象的列表。

一旦它真的在 DataFrame 中，这里的技巧就是提前创建你的图形和轴，并使用`**kwargs`你通常使用的`matplotlib.axes.boxplot`. 您还需要确保您的数据是 DataFrame 而不是 Series

```
import numpy as np
import matplotlib.pyplot as plt
import pandas

fig, ax = plt.subplots()
df = pandas.DataFrame(np.random.normal(size=(37,5)), columns=list('ABCDE'))
df.boxplot(ax=ax, positions=[2,3,4,6,8], notch=True, bootstrap=5000)
ax.set_xticks(range(10))
ax.set_xticklabels(range(10))
plt.show() 
```

这给了我：![箱线图](https://i.stack.imgur.com/SEDL6.png)

如果做不到这一点，您可以采用类似的方法，循环遍历您想要`ax`直接使用您的对象绘制的列。

```
import numpy as np
import matplotlib.pyplot as plt
import pandas

df = pandas.DataFrame(np.random.normal(size=(37,5)), columns=list('ABCDE'))
fig, ax = plt.subplots()
for n, col in enumerate(df.columns):
    ax.boxplot(df[col], positions=[n+1], notch=True)

ax.set_xticks(range(10))
ax.set_xticklabels(range(10))
plt.show() 
```

这使： ![更多箱线图](https://i.stack.imgur.com/rXSBn.png)

# java - 如何解决 SAXException: Invalid element in

> ID：16090243
> 
> 赞同：5
> 
> 时间：2013-04-18T18:11:10.990
> 
> 标签：java, web-services, wsdl, axis, sax

我尝试通过以下方式从 Web 服务中获取结果。

```
List result = new Vector();
LibrarySearchRequest request = new LibrarySearchRequest(queryString);
LibrarySearchServicePortTypeProxy proxy = 
                                new LibrarySearchServicePortTypeProxy();
LibrarySearchServicePortType port = proxy.getLibrarySearchServicePortType();
LibrarySearchResponse response = port.process(request);
librarysearch.soft.Book[] books = response.getBooks(); 
```

当我这样做时，我得到以下异常（stacktrace）：

```
org.xml.sax.SAXException: Invalid element in librarysearch.soft.Book - book
at org.apache.axis.encoding.ser.BeanDeserializer.onStartChild(BeanDeserializer.java:258)
at org.apache.axis.encoding.DeserializationContext.startElement(DeserializationContext.java:1035)
at org.apache.axis.message.SAX2EventRecorder.replay(SAX2EventRecorder.java:165)
at org.apache.axis.message.MessageElement.publishToHandler(MessageElement.java:1141)
at org.apache.axis.message.RPCElement.deserialize(RPCElement.java:236)
at org.apache.axis.message.RPCElement.getParams(RPCElement.java:384)
at org.apache.axis.client.Call.invoke(Call.java:2467)
at org.apache.axis.client.Call.invoke(Call.java:2366)
at org.apache.axis.client.Call.invoke(Call.java:1812)
at librarysearch.soft.LibrarySearchServiceSOAP11BindingStub.process(LibrarySearchServiceSOAP11BindingStub.java:180)
at softarch.portal.db.ws.WS_RegularDatabase.findRecords(WS_RegularDatabase.java:44)
at softarch.portal.db.test.TestWSRegularDatabase.main(TestWSRegularDatabase.java:39)

The regular database has caught an unexpected exception: ; nested exception is: 
org.xml.sax.SAXException: Invalid element in librarysearch.soft.Book - book 
```

我读到问题可能是由于从 web 服务返回的结果与从 wsdl 生成的类不匹配引起的。我重新生成了我的 web 服务客户端，但没有成功。还有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-19T16:31:54.323

这可能与此错误 ( [AXIS-2758](https://issues.apache.org/jira/browse/AXIS-2758) ) 有关，Axis 1.x 未解决。

如果您的客户端存根未与服务器端（WSDL 文件）保持同步，则可能会出现此问题。你可能不得不重新生成它。与[axistools:wsdl2java](http://mojo.codehaus.org/axistools-maven-plugin/wsdl2java-mojo.html)一样。

如果您至少使用 Java 6，现在最好的可能是在客户端使用 JAX-WS（[JAX-WS Maven 插件](https://jax-ws-commons.java.net/jaxws-maven-plugin/)）。但它不能与使用 RPC/Encoded 的旧 SOAP 服务一起使用......更喜欢 Document/Literal 样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-26T09:28:08.210

*此问题的解决方法*：

打开您生成的类（对于这个问题，它是`librarysearch.soft.Book`）。请参阅定义字段属性（名称、类型等）的*静态代码块。*

你会像下面这样：

```
elemField.setXmlName(new javax.xml.namespace.QName("", "book")); 
```

通过向其添加 namespaceURI 来更改它（使用`namespameURI`在`setXmlType`调用时使用的相同）：

```
elemField.setXmlName(new javax.xml.namespace.QName("http://your.namespaceuri.here", "book")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-26T20:10:20.967

我遇到了同样的问题，在使用 SoapUI 尝试 Web 服务后，我发现响应中的字段与 WSDL 生成的字段之间存在两个不一致：

1- 出于某种原因，当我从 WSDL 生成结构时，它会在字段名称后放置一个空格，如下所示：

```
elemField.setXmlName(new javax.xml.namespace.QName("http://namespaceuri.here", "book ")); 
```

我刚刚删除了那个空间，它解决了这个问题。

2- 在回复中，我得到了一个课堂上没有的附加字段。我在这里所做的是将字段添加到我的类中，并添加到静态块中，就像任何其他字段一样。

希望能帮助到你。

# c++ - 赋值和相等运算符中的宽字符和字符

> ID：16090248
> 
> 赞同：1
> 
> 时间：2013-04-18T18:11:24.313
> 
> 标签：c++, char, widechar

假设它`wc`是 a`wchar_t`并且`c`是 a `char`。
1）这两个作业有什么不同吗？

```
c = 'a';
wc = L'a'; 
```

2) 是否有任何规则强制ASCII 值`c`相等？对编译器`wc`究竟意味着什么？`wc == c`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:36:02.303

否——标准保证基本执行字符集和基本宽执行字符集都将包含“a”，但不保证两者具有相同的值。

§2.3/3 给出了一些限制（例如，数字应是连续的），这些都不适用于此处，最后是：“执行字符集成员的值和附加成员集是特定于语言环境的。”

因此，不仅不能保证，而且至少在理论上它甚至可以在/如果您更改语言环境时改变。

# c# - 比锁定位更快的图像处理

> ID：16090254
> 
> 赞同：4
> 
> 时间：2013-04-18T18:11:42.523
> 
> 标签：c#, image, image-processing, edge-detection, lockbits

我一直在用 C# 编写一个边缘检测程序，为了让它运行得更快，我最近让它使用了锁定位。但是，lockBits 仍然没有我希望它运行的那么快。虽然问题可能是我的一般算法，但我也想知道是否有比 lockBits 更好的东西可以用于图像处理。

如果问题是算法，这里有一个基本的解释。遍历一个颜色数组（使用代表像素的锁定位制作），对于每种颜色，检查该像素周围八个像素的颜色。如果这些像素与当前像素的匹配不够紧密，则将当前像素视为边缘。

这是定义像素是否为边缘的基本代码。它接受九种颜色的 Color[]，其中第一种是要检查的像素。

```
public Boolean isEdgeOptimized(Color[] colors)
{
    //colors[0] should be the checking pixel
    Boolean returnBool = true;
    float percentage = percentageInt; //the percentage used is set
    //equal to the global variable percentageInt

    if (isMatching(colors[0], colors[1], percentage) &&
            isMatching(colors[0], colors[2], percentage) &&
            isMatching(colors[0], colors[3], percentage) &&
            isMatching(colors[0], colors[4], percentage) &&
            isMatching(colors[0], colors[5], percentage) &&
            isMatching(colors[0], colors[6], percentage) &&
            isMatching(colors[0], colors[7], percentage) &&
            isMatching(colors[0], colors[8], percentage))
    {
        returnBool = false;
    }
    return returnBool;
} 
```

此代码适用于每个像素，其颜色是使用锁定位获取的。

所以基本上，问题是，我怎样才能让我的程序运行得更快？是我的算法，还是我可以使用比 lockBits 更快的东西？

顺便说一下，项目在gitHub上，[这里](https://github.com/vkoves/EdgeDetection)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T19:39:33.447

您是否真的将浮点数作为百分比传递给`isMatching`？

我在 GitHub 上查看了您的 isMatching 代码，好吧，哎呀。你是从 Java 移植过来的，对吧？C# 不使用`bool`，`Boolean`虽然我不确定，但我不喜欢执行那么多装箱和拆箱的代码的外观。此外，当您不需要时，您正在执行大量浮点乘法和比较：

```
public static bool IsMatching(Color a, Color b, int percent)
{
    //this method is used to identify whether two pixels, 
    //of color a and b match, as in they can be considered
    //a solid color based on the acceptance value (percent)

    int thresh = (int)(percent * 255);

    return Math.Abs(a.R - b.R) < thresh &&
           Math.Abs(a.G - b.G) < thresh &&
           Math.Abs(a.B - b.B) < thresh;
} 
```

这将减少您在每个像素上所做的工作量。我仍然不喜欢它，因为我尽量避免在每像素循环的中间进行方法调用，尤其是每像素 8 倍的循环。我将方法设为静态以减少传入的未使用的实例。仅这些更改可能会使您的性能翻倍，因为我们只做 1 次乘法，没有装箱，并且现在使用 && 的固有短路来减少工作。

如果我这样做，我更有可能做这样的事情：

```
// assert: bitmap.Height > 2 && bitmap.Width > 2
BitmapData data = bitmap.LockBits(new Rectangle(0, 0, bitmap.Width, bitmap.Height),
                      ImageLockMode.ReadWrite, PixelFormat.Format24bppRgb);

int scaledPercent = percent * 255;
unsafe {
    byte* prevLine = (byte*)data.Scan0;
    byte* currLine = prevLine + data.Stride;
    byte* nextLine = currLine + data.Stride;

    for (int y=1; y < bitmap.Height - 1; y++) {

       byte* pp = prevLine + 3;
       byte* cp = currLine + 3;
       byte* np = nextLine + 3;
       for (int x = 1; x < bitmap.Width - 1; x++) {
           if (IsEdgeOptimized(pp, cp, np, scaledPercent))
           {
               // do what you need to do
           }
           pp += 3; cp += 3; np += 3;
       }
       prevLine = currLine;
       currLine = nextLine;
       nextLine += data.Stride;
    }
}

private unsafe static bool IsEdgeOptimized(byte* pp, byte* cp, byte* np, int scaledPecent)
{
    return IsMatching(cp, pp - 3, scaledPercent) &&
           IsMatching(cp, pp, scaledPercent) &&
           IsMatching(cp, pp + 3, scaledPercent) &&
           IsMatching(cp, cp - 3, scaledPercent) &&
           IsMatching(cp, cp + 3, scaledPercent) &&
           IsMatching(cp, np - 3, scaledPercent) &&
           IsMatching(cp, np, scaledPercent) &&
           IsMatching(cp, np + 3, scaledPercent);
}

private unsafe static bool IsMatching(byte* p1, byte* p2, int thresh)
{
    return Math.Abs(p1++ - p2++) < thresh &&
           Math.Abs(p1++ - p2++) < thresh &&
           Math.Abs(p1 - p2) < thresh;
} 
```

现在，它会执行各种可怕的指针修改以减少数组访问等。如果所有这些指针的工作让您感到不舒服，您可以为 prevLine、currLine 和 nextLine 分配字节数组，并在执行过程中为每一行执行 Marshal.Copy。

算法是这样的：从顶部和左侧开始一个像素，并迭代图像中除外部边缘之外的每个像素（没有边缘条件！耶！）。我保留指向每行开头的指针，prevLine、currLine 和 nextLine。然后当我开始 x 循环时，我组成了 pp、cp、np，它们是前一个像素、当前像素和下一个像素。当前像素确实是我们关心的。pp 是它正上方的像素， np 是它正下方的像素。我将它们传递给 IsEdgeOptimized，它环顾 cp，为每个调用 IsMatching。

现在这一切都假设每像素 24 位。如果您正在查看每像素 32 位，那么其中所有那些神奇的 3 都需要是 4，但除此之外，代码不会改变。如果需要，您可以参数化每个像素的字节数，以便它可以处理任何一个。

仅供参考，像素中的通道通常是 b, g, r, (a)。

颜色以字节*形式存储在内存中。*您的实际位图（如果是 24 位图像）存储为字节块。扫描线是`data.Stride`字节宽，至少是 3 * 一行中的像素数（它可能更大，因为扫描线经常被填充）。

当我在 C# 中声明一个类型的变量时`byte *`，我正在做一些事情。首先，我说这个变量包含内存中字节位置的地址。其次，我是说我即将违反 .NET 中的所有安全措施，因为我现在可以在内存中读取和写入任何字节，这可能很危险。

所以当我有类似的东西时：

```
Math.Abs(*p1++ - *p2++) < thresh 
```

它说的是（这会很长）：

1.  获取 p1 指向的字节并保留它
2.  将 1 添加到 p1（这是 ++ - 它使指针指向下一个字节）
3.  获取 p2 指向的字节并保留它
4.  将 1 添加到 p2
5.  从步骤 1 中减去步骤 3
6.  将其传递给`Math.Abs`.

这背后的原因是，从历史上看，读取一个字节的内容并向前移动是一种非常常见的操作，许多 CPU 将其构建为几个指令的单个操作，这些指令流水线进入一个周期左右。

当我们输入`IsMatching`时，`p1`指向像素 1，`p2`指向像素 2，在内存中它们的布局如下：

```
p1    : B
p1 + 1: G
p1 + 2: R

p2    : B
p2 + 1: G
p2 + 2: R 
```

因此`IsMatching`，在单步执行内存时，绝对差异会有所不同。

您的后续问题告诉我，您并不真正了解指针。没关系-您可能可以学习它们。老实说，这些概念真的没有那么难，但它们的问题是，如果没有很多经验，你很可能会自责，也许你应该考虑只在代码上使用分析工具并冷却把最糟糕的热点降下来，称之为好。

例如，您会注意到我从第一行到倒数第二行，从第一列到倒数第二列。这是为了避免必须处理“我无法在第 0 行以上读取”的情况，这消除了一大类潜在的错误，这些错误将涉及在合法内存块之外读取，这在许多运行时条件下可能是良性的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T18:28:05.573

而不是将每个图像复制到 a `byte[]`，然后复制到 a `Color[]`，为每个像素创建另一个临时`Color[9]`值，然后使用`SetPixel`设置颜色，使用`/unsafe`标志编译，将方法标记为不安全，将复制到 a 替换`byte[]`为`Marshal.Copy`：

```
using (byte* bytePtr = ptr)
{
    //code goes here
} 
```

确保将 SetPixel 调用替换为设置正确的字节。这不是 LockBits 的问题，您需要 LockBits，问题是您在处理图像相关的所有其他事情上效率低下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T11:46:53.227

如果要使用并行任务执行，可以使用 System.Threading.Tasks 命名空间中的 Parallel 类。以下链接有一些示例和解释。

*   [http://csharpexamples.com/fast-image-processing-c/](http://csharpexamples.com/fast-image-processing-c/)
*   [http://msdn.microsoft.com/en-us/library/dd460713%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/dd460713%28v=vs.110%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-08T19:27:40.237

您可以将图像拆分为 10 个位图并处理每个位图，然后最后将它们组合起来（只是一个想法）。

# asp.net - “/”应用程序中的服务器错误

> ID：16090256
> 
> 赞同：0
> 
> 时间：2013-04-18T18:11:44.180
> 
> 标签：asp.net, visual-studio-2010, c#-4.0, web-config, web-deployment

在从堆栈溢出和其他论坛搜索我的问题的答案后，我将自己问它，可能有人可以指导我并使用 asp.net 编程让我的方式变得简单。

我在将值从我的实时网站保存到数据库时遇到问题，但我一直出错。

说明：服务器上发生应用程序错误。此应用程序的当前自定义错误设置阻止远程查看应用程序错误的详细信息（出于安全原因）。但是，它可以被本地服务器机器上运行的浏览器查看。

详细信息：要在远程计算机上查看此特定错误消息的详细信息，请在位于当前 Web 应用程序根目录的“web.config”配置文件中创建一个标签。然后，此标记应将其“模式”属性设置为“关闭”。

我试图通过在我的 web.config 中放置 mode=off 来查看它，但我无法查看我的错误的详细信息。

这是我的 web.config

```
<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>

    <system.web>
      <customErrors mode="Off"/>
      <compilation debug="true"/>
      <authentication mode="None"/>
    </system.web>
  <location allowOverride="true">
    <appSettings>

      <add key="#" value="Password=#;Persist Security Info=True;User ID=#;Initial Catalog=#;Data Source=#"/>

    </appSettings>
  </location>
</configuration> 
```

我已经使用我的项目的本地解决方案在我的实时数据库上测试了我的数据库和我的连接字符串，但是当我尝试使用我的实时服务器（arvixe）测试它时，我无法做到。

我的朋友建议我使用

```
<connectionStrings>
    <add name="#" connectionString="Data Source=#;Initial Catalog=#;Integrated Security=True" providerName="System.Data.SqlClient"/>    
  </connectionStrings> 
```

但它不适用于实时服务器。我正在使用连接字符串的应用程序设置，我对它很有信心，因为它可以在我的本地和实时数据库中正常工作。

我要求开发人员测试我的[在线古兰经阅读](http://www.onlinequranreading.org/ContactUs.aspx)页面并尝试弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:45:56.383

如果您使用的是 Sql Express，请尝试使用此连接字符串

`Data Source=.\SQLEXPRESS;DataBase=DBName;User ID=abcd;Password=xxxx;`

据我所知`Integrated Security=True`与`windows authentication`. 如果您想使用此选项，请将其更改`<authentication mode="None"/>`为`<authentication mode="Windows"/>`.

如果您使用的是 Sql Server，可以尝试以下连接字符串

**标准连接字符串**

`Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword;`

**可信连接**

`Server=myServerAddress;Database=myDataBase;Trusted_Connection=True;`

# python - Python：无法让 pygame 正常工作。在电脑上

> ID：16090258
> 
> 赞同：0
> 
> 时间：2013-04-18T18:11:44.813
> 
> 标签：python, pygame

# 当我从教程中使用它时。

```
import pygame

pygame.init()

black    = (   0,   0,   0)
white    = ( 255, 255, 255)
green    = (   0, 255,   0)
red      = ( 255,   0,   0)

size=[700,500]
screen=pygame.display.set_mode(size)

pygame.display.set_caption("jons cool game") 
```

我收到此错误：

```
Traceback (most recent call last):
  File "C:\Users\Jonathan\Desktop\Pygame\Example.py", line 2, in <module>
    import pygame
ImportError: No module named 'pygame' 
```

我正在使用 v3.3.1 和 pygame 3.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:17:58.193

根据`ImportError`您没有使用 Python 3.3 安装 pygame。

在 pygame 的网站上没有`3.3 version`. 我建议使用 Python 3.2 并从[pygame.org下载相应的 pygame 版本](http://www.pygame.org/download.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:15:18.757

可能是您的 pygame 安装有问题。检查网站上的文档和教程以确保正确设置。

# html - 位置图像不会重叠两个连续体

> ID：16090262
> 
> 赞同：1
> 
> 时间：2013-04-18T18:11:53.193
> 
> 标签：html, css

嗨，我正在尝试创建一个个人网站，并且在我的标题样式方面遇到了一些问题，特别是与定位有关。这就是我的标题现在的样子：

![在此处输入图像描述](https://i.stack.imgur.com/xIYAv.png)

中间的 NA 实际上是一个应该与黑色边框重叠的图像圈，但我似乎不知道该怎么做。这是我的标记：

```
 <section class="top-bottom-border overflow">
    <div class="center">
        <ul id="social">
            <li><a href="http://www.facebook.com/nistor.alexandru.89" target="_blank"><img src="images/social/FacebookIco.png"></a></li>
            <li><a href="https://twitter.com/aleczandru89" target="_blank"><img src="images/social/TwitterIco.png"></a></li>
            <li><a href="http://www.linkedin.com/profile/view?id=225866296&trk=tab_pro" target="_blank"><img src="images/social/LinkedinIco.png"></a></li>
            <li><a href="http://www.linkedin.com/profile/view?id=225866296&trk=tab_pro" target="_blank"><img src="images/social/LinkedinIco.png"></a></li>
        </ul>
    </div>
</section>
<nav class="center overflow" id="menu">
    <ul class="float-left">
        <li><a href="#">Home</a></li>
        <li><a href="#">About Me</a></li>
        <li><a href="#">Blog</a></li>
    </ul>
    <ul id="logo">
        <li><a href="#" title="About me"><img src="images/Logo.png" alt="logo"/></a></li>
    </ul>
    <ul class="float-right">
        <li><a href="#">Skills</a></li>
        <li><a href="#">Portfolio</a></li>
        <li><a href="#">Contact me</a></li>
    </ul>
</nav>
<section class="top-bottom-border"></section> 
```

这是我的CSS：

```
 .center {
        margin: 0 auto;
        width: 960px;
    }
.overflow {
    overflow: hidden;
}
        .top-bottom-border {
        background: url(../images/top-bottom-border.jpg);
        height: 37px;
    }
    ul#social{
        float: right;
    }
    ul#social li {
        display: inline-block;
        margin-left: 10px;
        margin-top: 5px;
    }
    nav#menu{
        position: relative;
        height: 50px;
    }
    nav#menu li{
        display: inline-block;
        padding-top: 20px;
        padding-bottom: 20px;
    }
    nav#menu .float-left{
        padding-left: 150px;
    }
    nav#menu .float-left li{
        margin-right: 25px;
    }
    nav#menu .float-right{
        padding-right: 150px;
    }
    nav#menu .float-right li{
        margin-left: 25px;
    }
    ul#logo{
        position: absolute;
        left: 400px;
        top:-40px;
    } 
```

如何使中心的图像与两个黑色边框重叠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:31:05.317

`<nav class="center overflow" id="menu">`没有`z-index`开始行动，因为你已经`overflow: hidden`为你的`#nav`所以溢出它的标志不会显示。从中删除*溢出*类将修复您的徽标显示。

**编辑**据我所知，您的布局和目标，您可能还想添加`float: left`到`nav#menu .float-left``float :right``nav#menu .float-right`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:15:42.070

您可以尝试将 style="z-index: 5" 添加到徽标的 li 或 ul

# mysql - MySQL 中抛出错误 1005

> ID：16090267
> 
> 赞同：1
> 
> 时间：2013-04-18T18:12:29.867
> 
> 标签：mysql, sql, database

我正在尝试运行 5 个创建表语句。其中 3 个在我声明的外键上工作正常，但是表**'generalweather'**和**'userreg'**抛出错误 1005，我知道这与我的外键不匹配有关。我一直在寻找错误，但我无法在任何地方找到它。这两个创建表语句有什么问题？（我的默认架构名为“tester”）

```
 CREATE TABLE `coastal` (
  `Date` varchar(50) NOT NULL,
  `Time` varchar(50) NOT NULL DEFAULT '',
  `AM/PM` varchar(45) NOT NULL,
  `Location` varchar(50) NOT NULL DEFAULT '',
  `Tide Description` varchar(50) DEFAULT NULL,
  `Estimated Swell(ft)` int(11) DEFAULT NULL,
  `Wind Speed(mph)` int(11) DEFAULT NULL,
  `Wind Direction` varchar(45) DEFAULT NULL,
  `Visibility (%)` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`Date`,`Time`,`Location`,`AM/PM`),

  CONSTRAINT `coastalFK`
  FOREIGN KEY (Date, Time, Location, `AM/PM`)
  REFERENCES tester.locations (Date, Time, Location, `AM/PM`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION,

  INDEX `DateFK_idx` (`Date` ASC) , 
  INDEX `TimeFK_idx` (`Time` ASC) ,
  INDEX `AM/PMFK_idx` (`AM/PM` ASC) , 
  INDEX `LocationFK_idx` (`Location` ASC)
);

CREATE TABLE `generalweather` (
`Date` varchar(50) NOT NULL,
`Location` varchar(50) NOT NULL,
`ClimateDescription` varchar(50) NOT NULL DEFAULT '',
`Average Temperature(F)` int(11) DEFAULT NULL,
`Elevation(ft)` varchar(50) DEFAULT NULL,
`Recommended Activity` varchar(50) DEFAULT NULL,
PRIMARY KEY (`Date`,`Location`,`ClimateDescription`),

CONSTRAINT `generalweatherFK`
FOREIGN KEY (Date, Location)
REFERENCES tester.locations (Date, Location)
ON DELETE NO ACTION
ON UPDATE NO ACTION,

INDEX `DateFK_idx` (`Date` ASC) , 
INDEX `LocationFK_idx` (`Location` ASC)
);

CREATE TABLE `locations` (
`Date` varchar(50) NOT NULL DEFAULT '',
`Time` varchar(50) NOT NULL DEFAULT '',
`AM/PM` varchar(45) NOT NULL,
`Location` varchar(50) NOT NULL DEFAULT '',
`Location Type` varchar(50) DEFAULT NULL,
`Temperature (F)` varchar(45) DEFAULT NULL,
PRIMARY KEY (`Date`,`Time`,`Location`,`AM/PM`)
);

CREATE TABLE `precipitation` (
`Date` varchar(50) NOT NULL,
`Time` varchar(50) NOT NULL DEFAULT '',
`AM/PM` varchar(45) NOT NULL,
`Location` varchar(50) NOT NULL DEFAULT '',
`Precipitation Chance (%)` text,
`Wind Speed(mph)` int(11) DEFAULT NULL,
`Wind Direction` varchar(50) DEFAULT NULL,
`Visibility (%)` varchar(50) DEFAULT NULL,
`Humidity (%)` varchar(50) DEFAULT NULL,
PRIMARY KEY (`Date`,`Time`,`AM/PM`,`Location`),
CONSTRAINT `DateFK`
FOREIGN KEY (Date, Time, Location, `AM/PM`)
REFERENCES tester.locations (Date, Time, Location, `AM/PM`)
ON DELETE NO ACTION
ON UPDATE NO ACTION,

INDEX `DateFK_idx` (`Date` ASC) , 
INDEX `TimeFK_idx` (`Time` ASC) ,
INDEX `AM/PMFK_idx` (`AM/PM` ASC) , 
INDEX `LocationFK_idx` (`Location` ASC)
);

CREATE TABLE `userreg` (
`User Name` varchar(50) NOT NULL DEFAULT '',
`Real Name` varchar(50) DEFAULT NULL,
`Email address` varchar(50) DEFAULT 'NONE ON FILE',
`Location` varchar(50) NOT NULL,
PRIMARY KEY (`User Name`),

CONSTRAINT `userregFK`
FOREIGN KEY (`Location`)
REFERENCES tester.locations (`Location`)
ON DELETE NO ACTION
ON UPDATE NO ACTION,

INDEX `LocationFK_idx` (`Location` ASC)
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:20:07.627

有几个问题。`Locations`您必须在引用它的任何其他表之前构建该表。所以把那个移到顶部。

然后，您需要为`FOREIGN KEY`您定义的每一个匹配索引。你有一个`PRIMARY KEY`复合

```
PRIMARY KEY (`Date`,`Time`,`Location`,`AM/PM`) 
```

已经，所以你的一些`FOREIGN KEY`定义会起作用。但是，您需要为那些不使用完整组合的 FK 定义创建额外的索引`PK`。这是因为父表和引用表都必须在您用作`FOREIGN KEY`.

```
# Move this table definition to be first
CREATE TABLE `locations` (
  `Date` varchar(50) NOT NULL DEFAULT '',
  `Time` varchar(50) NOT NULL DEFAULT '',
  `AM/PM` varchar(45) NOT NULL,
  `Location` varchar(50) NOT NULL DEFAULT '',
  `Location Type` varchar(50) DEFAULT NULL,
  `Temperature (F)` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`Date`,`Time`,`Location`,`AM/PM`),

  # Added these two keys for the later FK definitions
  # Referenced by generalweatherFK:
  INDEX (`Date`, `Location`),
  # Referenced by userregFK
  INDEX (`Location`)
); 
```

这是正确构建的整个过程：[http ://sqlfiddle.com/#!2/d208e](http://sqlfiddle.com/#!2/d208e)

# java - ANTLR 树语法 -> 生成的 java 类有错误 (getText)

> ID：16090269
> 
> 赞同：0
> 
> 时间：2013-04-18T18:12:34.120
> 
> 标签：java, antlr, antlr3, antlrworks

当我生成我的树解析器时，我收到错误，指出该方法`getText()`未为类型对象定义。由于大约有 500000 个字符，因此无法进入整个班级。

但这些是我得到的类似错误行

```
public int specialStateTransition(int s, IntStream _input) throws NoViableAltException {
        TreeNodeStream input = (TreeNodeStream)_input;
        int _s = s;
        switch ( s ) {
                case 0 : 
                    int LA3_11 = input.LA(1);

                    int index3_11 = input.index();
                    input.rewind();
                    s = -1;
                    if ( ((synpred5_Walker()&&(isTypeName(input.LT(1).getText())))) ) {s = 1;}

                    else if ( (true) ) {s = 8;}

                    input.seek(index3_11);
                    if ( s>=0 ) return s;
                    break;
                case 1 : 
                    int LA3_16 = input.LA(1);

                    int index3_16 = input.index();
                    input.rewind();
                    s = -1;
                    if ( ((synpred5_Walker()&&(isTypeName(input.LT(1).getText())))) ) {s = 1;}

                    else if ( (true) ) {s = 8;}

                    input.seek(index3_16);
                    if ( s>=0 ) return s;
                    break;
                case 2 : 
                    int LA3_20 = input.LA(1);

                    int index3_20 = input.index();
                    input.rewind();
                    s = -1;
                    if ( ((synpred5_Walker()&&(isTypeName(input.LT(1).getText())))) ) {s = 1;}

                    else if ( (true) ) {s = 8;}

                    input.seek(index3_20);
                    if ( s>=0 ) return s;
                    break;
                case 3 : 
                    int LA3_22 = input.LA(1);

                    int index3_22 = input.index();
                    input.rewind();
                    s = -1;
                    if ( ((synpred5_Walker()&&(isTypeName(input.LT(1).getText())))) ) {s = 1;}

                    else if ( (true) ) {s = 8;}

                    input.seek(index3_22);
                    if ( s>=0 ) return s;
                    break;
                case 4 : 
                    int LA3_23 = input.LA(1);

                    int index3_23 = input.index();
                    input.rewind();
                    s = -1;
                    if ( ((synpred5_Walker()&&(isTypeName(input.LT(1).getText())))) ) {s = 1;}

                    else if ( (true) ) {s = 8;}

                    input.seek(index3_23);
                    if ( s>=0 ) return s;
                    break;
                case 5 : 
                    int LA3_24 = input.LA(1);

                    int index3_24 = input.index();
                    input.rewind();
                    s = -1;
                    if ( ((synpred5_Walker()&&(isTypeName(input.LT(1).getText())))) ) {s = 1;}

                    else if ( (true) ) {s = 8;}

                    input.seek(index3_24);
                    if ( s>=0 ) return s;
                    break;
                case 6 : 
                    int LA3_25 = input.LA(1);

                    int index3_25 = input.index();
                    input.rewind();
                    s = -1;
                    if ( ((synpred5_Walker()&&(isTypeName(input.LT(1).getText())))) ) {s = 1;}

                    else if ( (true) ) {s = 8;}

                    input.seek(index3_25);
                    if ( s>=0 ) return s;
                    break;
                case 7 : 
                    int LA3_26 = input.LA(1);

                    int index3_26 = input.index();
                    input.rewind();
                    s = -1;
                    if ( ((synpred5_Walker()&&(isTypeName(input.LT(1).getText())))) ) {s = 1;}

                    else if ( (true) ) {s = 8;}

                    input.seek(index3_26);
                    if ( s>=0 ) return s;
                    break;
                case 8 : 
                    int LA3_27 = input.LA(1);

                    int index3_27 = input.index();
                    input.rewind();
                    s = -1;
                    if ( ((synpred5_Walker()&&(isTypeName(input.LT(1).getText())))) ) {s = 1;}

                    else if ( (true) ) {s = 8;}

                    input.seek(index3_27);
                    if ( s>=0 ) return s;
                    break;
        }
        if (state.backtracking>0) {state.failed=true; return -1;}
        NoViableAltException nvae =
            new NoViableAltException(getDescription(), 3, _s, input);
        error(nvae);
        throw nvae;
    }
} 
```

* * *

我的树语法

* * *

```
tree grammar Walker;

options {

  tokenVocab = c2p;
  ASTLabelType = CommonTree;
  backtrack=true;     
  output=AST;
}

@header { 
 package com.frankdaniel.compiler ;

}  

translation_unit 
    :  external_declaration+
    ; 

external_declaration
options {k=1;}
    : (declaration_specifiers? declarator declaration* L_C_BRACKET! )=> function_definition //-> EXTERNAL_DECLARATOR function_definition
    | declaration
    ; 

function_definition
    :   declaration_specifiers? declarator (declaration+ compound_statement|compound_statement) //-> ^(FUNCTIONDEF declaration_specifiers? declarator (declaration+ compound_statement|compound_statement)) 
    ;

declaration

    : 'typedef' declaration_specifiers? init_declarator_list SEMICOLON! // special case, looking for typedef    
    | declaration_specifiers init_declarator_list? SEMICOLON!
    ;

declaration_specifiers
    :   (   storage_class_specifier
        |   type_specifier
        |   type_qualifier
        )+
    ;

init_declarator_list
    : ^(INIT_DECLARATOR_LIST init_declarator+)
    ;

init_declarator
    : declarator (ASSIGN^ initializer)?
    ;

storage_class_specifier
    : EXTERN
    | STATIC
    | AUTO
    | REGISTER
    ;

type_specifier
    : VOID
    | CHAR
    | INT
    | FLOAT
    | type_id
    ;

type_id
    :   IDENTIFIER
//      {System.out.println($IDENTIFIER.text+" is a type");}
    ;

type_qualifier
    : CONST

    ;

declarator
    : pointer? direct_declarator
    | pointer
    ;

direct_declarator
    :   (IDENTIFIER|LPAREN! declarator RPAREN!)
        declarator_suffix*
    ;

declarator_suffix
    :   constant_expression
    |   RBRACKET! LBRACKET!
    |   parameter_type_list
    |   identifier_list
    |   LPAREN! RPAREN!
    ;

pointer
    : TIMES type_qualifier+ pointer?
    | TIMES pointer
    | TIMES
    ;

parameter_type_list
    : parameter_list
    ;

parameter_list
    : ^(PARAMETER_LIST parameter_declaration)
    ;

parameter_declaration
    : declaration_specifiers (declarator|abstract_declarator)*
    ;

identifier_list
    : ^(IDENTIFIER_LIST IDENTIFIER+)
    ;

type_name
    : specifier_qualifier_list abstract_declarator?
    ;
specifier_qualifier_list
    : ( type_qualifier | type_specifier )+
    ;

abstract_declarator
    : pointer direct_abstract_declarator?
    | direct_abstract_declarator
    ;

direct_abstract_declarator
    :   ( LPAREN! abstract_declarator RPAREN | abstract_declarator_suffix ) abstract_declarator_suffix*
    ;

abstract_declarator_suffix
    :   RBRACKET! LBRACKET!
    |   constant_expression 
    |   LPAREN! RPAREN!
    |   parameter_type_list
    ;

initializer
    : assignment_expression
    | initializer_list
    ;

initializer_list
    :  ^(INITIALIZER_LIST initializer+)
    ;

// EXPRESSIONS

argument_expression_list
    :  ^(EXPRESSION_LIST assignment_expression+)
    ;

multiplicative_expression
    : (cast_expression) (TIMES^ cast_expression | DIV^ cast_expression | MOD^ cast_expression)* 
    ;

additive_expression
    : (multiplicative_expression) (PLUS^ multiplicative_expression | MINUS^ multiplicative_expression)* 
    ;

cast_expression
    : ^(CAST_EXPRESSION type_name cast_expression)
    | unary_expression 
    ;

unary_expression
    : postfix_expression
    | PPLUS unary_expression
    | MMINUS unary_expression
    | unary_operator cast_expression
    ;

postfix_expression
    :   primary_expression
        (   RBRACKET! expression LBRACKET!
        |   LPAREN! RPAREN! 
        |   LPAREN! argument_expression_list RPAREN! 
        |   DOT! IDENTIFIER
//        |   PPLUS
//        |   MMINUS
        )*
    ;

unary_operator
    : BITWISEAND
    | TIMES
    | PLUS
    | MINUS
    | NOT
    ;

primary_expression
    : IDENTIFIER
    | constant
    | expression
    ;

constant 
    :   HEX_LITERAL
    |   OCTAL_LITERAL
    |   DECIMAL_LITERAL
    |   CHARACTER_LITERAL
    |   STRING_LITERAL
    |   FLOATING_POINT_LITERAL
    ;

expression
    : ^(EXPRESSION assignment_expression+)
    ;

constant_expression
    : conditional_expression
    ;

assignment_expression
    :^(assignment_operator lvalue assignment_expression)
    | conditional_expression
    ;

lvalue
    :   unary_expression
    ;

assignment_operator
    : ASSIGN 
    ;

conditional_expression
    : logical_or_expression (QUESTIONMARK! expression COLON! conditional_expression)?
    ;

logical_or_expression
    : logical_and_expression (OR^ logical_and_expression)*
    ;

logical_and_expression
    : inclusive_or_expression (AND^ inclusive_or_expression)*
    ;

inclusive_or_expression
    : exclusive_or_expression ('|'^ exclusive_or_expression)*
    ;

exclusive_or_expression
    : and_expression ('^'^ and_expression)*
    ;

and_expression
    : equality_expression ('&'^ equality_expression)*  
    ; 
equality_expression
    : relational_expression ((EQUAL|NONEQUAL)^ relational_expression)*  ;

relational_expression
    : shift_expression ((ST|GT|STEQ|GTEQ)^ shift_expression)* 
    ;

shift_expression
    : additive_expression ((LSHIFT|RSHIFT)^ additive_expression)*
    ;

// STATEMENTS

statement
    : labeled_statement
    | compound_statement
    | expression_statement
    | selection_statement
    | iteration_statement
    | jump_statement
    ;

labeled_statement
    : IDENTIFIER statement 
    | CASE constant_expression statement
    | DEFAULT statement
    ;

compound_statement
    : ^(STATEMENT declaration* statement_list? )
    ;

statement_list
    : statement+
    ;

expression_statement
    : expression
    ;

selection_statement
    :IF^ LPAREN! expression RPAREN! i=statement (ELSE^ e=statement)? 
    | ^(SWITCH expression statement)
    ;

iteration_statement
    : ^(WHILE expression statement)
    | ^(DO statement ^(WHILE expression))
    | ^(FOR expression_statement expression_statement expression? statement)
    ;

jump_statement
    : ^(GOTO IDENTIFIER)
    | CONTINUE
    | BREAK
    | ^(RETURN expression?)
    ; 
```

* * *

测试文件

* * *

```
int main(void) {
  int n;
  int i;
  int flag;

  printf("Enter value of N > ");
  scanf("%d", &n);
  flag = 1;
  for (i=2; (i<(n/2)) && flag; ) { /* May be we do not need to test
            values of i greater than the square root of n? */
    if ((n % i) == 0) /* If true n is divisible by i */
      flag = 0;
    else
      i=i+1;
  }

  if (flag)
    printf("%d is prime\n", n);
  else
    printf("%d has %d as a factor\n", n, i);
  return 0;
} 
```

* * *

错误

* * *

compiler\Walker.g：第 3:4 行之后的节点不匹配的树节点：PARAMETER_LIST 需要 SEMICOLON 编译器 \Walker.g：第 3:9 行之后的节点不匹配的树节点：UP 需要 SEMICOLON compiler\Walker.g：第 5 行的节点:2 不匹配的树节点：int 期望 SEMICOLON 编译器\Walker.g：来自第 6 行的节点：2 不匹配的树节点：int 期望 SEMICOLON 编译器\Walker.g：来自第 6:6 行之后的节点不匹配的树节点：UP 期望 SEMICOLON 编译器\ Walker.g：第 8:2 行之后的节点不匹配的树节点：EXPRESSION_LIST 需要 SEMICOLON 编译器\Walker.g：第 9:2 行之后的节点不匹配的树节点：EXPRESSION_LIST 需要 SEMICOLON 编译器\Walker.g：第 9 行之后的节点： 15 不匹配的树节点：UP 期望 SEMICOLON 编译器\Walker.g：第 10:9 行的节点不匹配的树节点：1 期望 SEMICOLON 编译器\Walker.g：来自第 11:9 行的节点不匹配的树节点：2 期待 SEMICOLON 编译器\Walker.g：来自第 11:13 行之后的节点不匹配的树节点：EXPRESSION 期待 SEMICOLON 编译器\Walker.g：来自第 11:18 行的节点不匹配的树节点：2期望 SEMICOLON 编译器\Walker.g：第 11:25 行之后的节点不匹配的树节点：UP 期望 SEMICOLON 编译器\Walker.g：第 13:13 行之后的节点不匹配的树节点：UP 期望 SEMICOLON 编译器\Walker.g：来自的节点第 14:13 行不匹配的树节点：0 期待分号编译器\Walker.g：来自第 16:9 行的节点不匹配的树节点：+ 期待分号编译器\Walker.g：来自第 16:10 行的节点不匹配的树节点：1 期待分号编译器\Walker.g：第 19:6 行之后的节点不匹配的树节点：UP 期待 SEMICOLON 编译器\Walker.g：第 20:4 行之后的节点不匹配的树节点：EXPRESSION_LIST 期望 SEMICOLON 编译器\Walker.g：来自第 20:28 行之后的节点不匹配的树节点：UP 期望 SEMICOLON 编译器\Walker.g：来自第 22:4 行之后的节点不匹配的树节点：EXPRESSION_LIST 期望 SEMICOLON 编译器\Walker.g：节点从第 22:41 行后不匹配的树节点：UP 期待 SEMICOLON

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:14:54.433

您需要指定 AST 节点类型。如果未指定，则生成的代码中使用的默认值只是`Object`.

```
options {
    ASTLabelType=CommonTree;
} 
```

# batch-file - 检查某个进程（ultrasurf）是否正在运行的批处理文件，如果存在则执行关闭

> ID：16090271
> 
> 赞同：2
> 
> 时间：2013-04-18T18:12:42.420
> 
> 标签：batch-file

我从网上获得了一个批处理文件：

```
@for /f "tokens=5 delims= " %%i in ('netstat -ano -p tcp ^| find "127.0.0.1"') do Taskkill /F /PID %%i 
```

这会杀死 Ultrasurf 进程，但是，我想做的是让它检查相同的进程，然后如果存在则关闭。

我尝试了以下方法：

```
@for /f "tokens=5 delims= " %%i in ('netstat -ano -p tcp ^| find "127.0.0.1"') do shutdown /s 
```

无论进程是否正在运行，这都会发出关闭命令。我需要它仅在存在时执行。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:30:06.630

您的批处理文件不会杀死 Ultrasurf，它会杀死本地主机上打开 tcp 端口的所有进程。

如果您运行资源监视器，您会看到很多服务都为 RPC 服务器打开了 tcp 端口。因此，修改后的脚本会立即关闭，因为 for 命令找到了至少 1 个匹配项。

修改此[问题的答案之一](https://stackoverflow.com/questions/162291/how-to-check-if-a-process-is-running-via-a-batch-script)

```
tasklist /FI "IMAGENAME eq ultrasurf.exe" 2>NUL | find /I /N "ultrasurf.exe">NUL
if "%ERRORLEVEL%"=="0" shutdown /s /f 
```

警告：未经测试的代码

# android - ListView 项目的默认背景

> ID：16090274
> 
> 赞同：1
> 
> 时间：2013-04-18T18:12:55.940
> 
> 标签：android, listview, background, selector

这个让我发疯：

我有一个 ListView，我想在选择它时更改孩子的背景。列表项具有默认背景，但是当项目上有背景时，所选项目不会改变颜色...

让我想象一下：

当我为 ListView 的孩子设置背景颜色时，我得到了这个：

![有背景的列表项](https://i.stack.imgur.com/sKrbi.jpg)

这是 ListView 中一个孩子的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@drawable/list_selector_normal">

    <TextView android:id="@+id/title_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="5dp" />

    <TextView android:id="@+id/description_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

但是当我在主布局中为 listView 设置一些选择器时

```
 android:listSelector="@drawable/list_selector" 
```

选定的列表项不改变颜色...

但是当我从列表项（第一个代码块中的第 5 行）中删除背景时，选择器确实可以工作，但是我的背景消失了：

![没有背景的列表项](https://i.stack.imgur.com/3FkAB.jpg)

选择器 xml 代码：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="true"
          android:drawable="@drawable/list_selector_pressed" /> <!-- pressed -->
    <item android:state_focused="true"
          android:drawable="@drawable/list_selector_focussed" /> <!-- focused -->
    <item android:state_hovered="true"
          android:drawable="@color/blue" /> <!-- hovered -->
    <item android:drawable="@color/blue" /> <!-- default -->
</selector> 
```

有没有办法（应该有）我可以保留我的背景（第一张图片）并更改所选项目的颜色（第二张图片）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-05T10:05:31.157

您可以尝试在 ListView xml 中设置正常背景

```
 <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/list_selector_normal"
        /> 
```

# settings - 在自有生产环境中访问 Meteor 设置

> ID：16090281
> 
> 赞同：8
> 
> 时间：2013-04-18T18:13:23.910
> 
> 标签：settings, meteor, production-environment

根据 Meteor 的[文档](http://docs.meteor.com/#meteor_settings)，我们可以通过命令行包含一个设置文件来提供特定于部署的设置。

但是，该`--settings`选项似乎只能通过`run`and`deploy`命令使用。如果我在我自己的基础架构上运行我的 Meteor 应用程序 - 如[文档的](http://docs.meteor.com/#deploying)*在您自己的基础架构上运行*部分中所述- 似乎没有办法在过程中的任何位置指定特定于部署的设置文件。

**有没有办法在我自己的基础设施上运行的生产环境中访问 Meteor 设置？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T02:20:16.077

是的，将设置内容包含在环境变量`METEOR_SETTINGS`中。例如，

`export METEOR_SETTINGS='{"privateKey":"MY_KEY", "public":{"publicKey":"MY_PUBLIC_KEY", "anotherPublicKey":"MORE_KEY"}}'`

然后正常运行流星应用程序。

这将填充 Meteor.settings 对象具有正常。对于上面的设置，

```
Meteor.settings.privateKey == "MY_KEY" #Only on server
Meteor.settings.public.publicKey == "MY_PUBLIC_KEY" #Server and client
Meteor.settings.public.anotherPublicKey == "MORE_KEY" #Server and client 
```

对于我们的[项目](http://madeye.io)，我们使用[upstart](http://upstart.ubuntu.com/)脚本并将其包含在其中（尽管 upstart 的语法略有不同）。但是，如果您使用普通的 shell 脚本启动它，您只需要`export`在 node 命令之前包含该语句。例如，您可以有如下脚本：

```
export METEOR_SETTINGS='{"stuff":"real"}'
node /path/to/bundle/main.js 
```

或者

`METEOR_SETTINGS='{"stuff":"real"}' node /path/to/bundle/main.js`

[您可以在此处](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_02.html)找到有关 bash 变量的更多信息。

# c# - Moq function call with expression

> ID：16090285
> 
> 赞同：0
> 
> 时间：2013-04-18T18:13:35.733
> 
> 标签：c#, .net, asp.net-mvc, moq

I have the following Interface that is used to DI and IOC webservice clients

```
 public interface IWcfServiceClientProvider <TContract>: IDisposable where TContract: class
{

    TResult Execute<TResult>(Expression<Func<TContract, TResult>> expression);
    TResult Execute<TResult>(Expression<Func<TContract, TResult>> expression, bool closeConnection = true);

    void Execute(Expression<Action<TContract>> expression);
    void Execute(Expression<Action<TContract>> expression, bool closeConnection = true);

} 
```

In my test class I have the following:

```
 List<BaseLookup> myList = new List<BaseLookup> { 
                        new BaseLookup { Id =1, Code = "1001"},
                        new BaseLookup { Id =2, Code = "1002"},
                        new BaseLookup { Id =3, Code = "1003"}}; 
```

In my test method

```
 Mock<IWcfServiceClientProvider<ILookupService>> lookupServiceClinetProvider = new Mock<IWcfServiceClientProvider<ILookupService>>();

 var controller = new ElectorSearchController(lookupServiceClinetProvider.Object);
 lookupServiceClinetProvider.Setup(mock => mock.Execute(lookup => lookup.GetList(10))).Returns(myList).Verifiable();

  var list = controller.testMethod();

  lookupServiceClinetProvider.VerifyAll(); 
```

list will only have value when the parameter for `GetList` is set to 10 i.e `GetList(10)` Not `GetList(i)` where i=10

The following works

```
lookupServiceClinetProvider.Setup(mock => mock.Execute(It.IsAny<Expression<Func<ILookupService, List<BaseLookup>>>>(), true )).Returns((List<BaseLookup>)myList).Verifiable(); 
```

But I want to mock the call for `GetList` and not any call to Execute. If that works, then I can filter the values in the `Return` method

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:07:45.583

As an interim solution I wrote a simple brute-force solution to compare expressions following:

```
 public static bool ExpressionMatcher<TIn, TResult>(Expression<Func<TIn, TResult>> expr1, Expression<Func<TIn, TResult>> expr2)
    {
        if (expr1 == null || expr2 == null)
        {
            return false;
        }

        if (expr1 == expr2)
        {
            return true;
        }

        if (expr1.Type != expr2.Type)
        {
            return false;
        }

        if (expr1.Body == expr2.Body)
        {
            return true;
        }

        if (expr1.Body.NodeType != expr2.Body.NodeType)
        {
            return false;
        }

        if (expr1.Body.NodeType == ExpressionType.Call)
        {
            dynamic expr1Body = expr1.Body;
            dynamic expr2Body = expr2.Body;

            if (expr1Body.Method.Name == expr2Body.Method.Name &&
                expr1Body.Method.ReturnType == expr2Body.Method.ReturnType)
            {
                if (expr1Body.Arguments == null && expr2Body.Arguments == null)
                {
                    return true;
                }

                if (expr1Body.Arguments.Count != expr2Body.Arguments.Count)
                {
                    return false;
                }

                return true;
            }
        }

        return false;

    } 
```

I used the following to call it

```
Expression<Func<ILookupService, List<BaseLookup>>> expr = lookup => lookup.GetMyList(It.IsAny<long>());
.Setup(mock => mock.Execute(It.Is<Expression<Func<ILookupService, List<BaseLookup>>>>(method => ExpressionMatcher(method, expr))))
.Returns(myList)
.Verifiable(); 
```

I don't need to check the arguments' type at this point. If you have a better answer, please let me know

# javascript - 使用 Javascript 将 PDF 表单转换为自更正作业

> ID：16090286
> 
> 赞同：2
> 
> 时间：2013-04-18T18:13:41.103
> 
> 标签：javascript, forms, validation, pdf

我是一名教师，我们正在寻求尽可能无纸化。我学习了（通过在此处搜索并询问上一个问题）如何使用 Javascript 逐个验证 PDF 表单响应。我相信有一些方法可以在提交之前验证整个表单，但我还没有找到如何做到这一点。这些表格实际上是 PDF 文档，而不是网页。

我的问题是关于验证和提交。有没有办法使用javascript（或任何其他方法）来：

1.  单击按钮验证整个表格（这将是学生完成的整个作业）？
2.  通过同样的点击，将收到的答案和“分数”提交到电子表格？我的班级有一个网站和域，如果我必须以某种方式在那里进行设置，我可以通过 cPanel 对其进行完全修改以处理提交。

理想情况下，我想要提交和得分，因此学生无法验证，根据验证更改所有答案，然后提交完美的作业。

另一种方法是让学生填写表格、验证并让学生打印出他们的分数。我能看到的唯一问题是学生重新加载 PDF 并在验证后更改他们的答案。

有什么见解或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:48:03.583

您可以将 JavaScript 添加到提交按钮并使其显示分数，然后将表单字段值提交到您的网站。

这不是万无一失的。Adobe Acrobat/Reader 中的 Javascript 错误控制台可能会显示有关您的 Javascript 代码的泄漏信息。有几种 PDF 处理工具可以从 PDF 中提取 JavaScript 代码。

所以，最好的选择是有一个简单的提交按钮，并让它提交表单字段数据到服务器。在服务器上，您可以有一个脚本来评估提交的表单字段数据并以 FDF 流的形式将消息发送回 Adob​​e Reader。FDF 流可以包含分数。

```
 Response.ContentType = "application/vnd.fdf"
  Response.Write "%FDF-1.2" & VbCrLF & _
                 "1 0 obj<< /FDF << /Status (" & sAcroResponse & ") >>      >>endobj" & VbCrLF & _
                 "trailer" & VbCrLF & _
                 "<< /Root 1 0 R >>%%" & VbCrLF 
```

上面的脚本是在 Classic ASP 中。消息 (sAcroResponse) 将显示在 Adob​​e Reader 中，而不是浏览器中。您可以将此脚本调整为您的 Web 服务器上支持的任何语言。

# c# - 分配属性时如何自动处理数据？

> ID：16090290
> 
> 赞同：1
> 
> 时间：2013-04-18T18:13:55.647
> 
> 标签：c#, .net, properties

我多次编写了如下所示的 C# 属性：

```
private string _Id;
public string Id
{
    get
    {
        return _Id;
    }
    set
    {
        _Id = value.Trim();
    }
} 
```

上面的代码片段声明了一个名为 Id 的字符串属性，并使其`Trim`扩展方法自动调用传递给 setter 的值。如果没有`Trim`逻辑，我可以简单地写：

```
public string Id {get; set;} 
```

好像我写了很多代码来完成一些简单的事情。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T18:16:37.560

> 有没有更好的办法？

好吧，您可以使它*看起来*像更少的代码（并且在阅读时减少混乱）：

```
private string _Id;
public string Id
{
    get { return _Id; }
    set { _Id = value.Trim(); }
} 
```

甚至将整个属性本身放在一行中：

```
private string _Id;
public string Id { get { return _Id; } set { _Id = value.Trim(); } } 
```

但是不，除了对私有变量的简单获取/设置之外，您不能让自动实现的属性做任何事情。

老实说，它实际上并没有那么多*代码*——它是相当多的*语法*，但你只需要声明一个变量并编写两个语句。我不认为这真的是太多的要求。

# regex - 正则表达式方右括号

> ID：16090295
> 
> 赞同：4
> 
> 时间：2013-04-18T18:14:34.757
> 
> 标签：regex, bash

我可以使用 Bash 来匹配一组字符

```
$ [[ a =~ [abc] ]]; echo $?
0 
```

`]`但是，如果我想在集合中包含一个右方括号，它会失败

```
$ [[ a =~ [abc\]] ]]; echo $?
1

$ [[ a =~ [abc\\]] ]]; echo $?
1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T18:23:13.637

从手册页`regex(7)`：

```
To include a literal ']' in the list, make it the first character (fol-
lowing a possible '^'). 
```

测试：

```
$ [[ "]" =~ []abc] ]]; echo $?
0 
```

# python - 如何重命名 Django 项目中的许多类和模块

> ID：16090297
> 
> 赞同：1
> 
> 时间：2013-04-18T18:14:43.050
> 
> 标签：python, django, refactoring

我正在重构一个包含数千行代码和数十个源文件的 Django 项目。我需要重命名许多类和模块。我正在寻找一种更快、更可靠的替代手动搜索和替换的方法。类似于 Java 和 C# IDE 让我做的事情。我已经尝试过用于 Visual Studio 和 Pycharm 的 Python 工具，它们具有变量和类的“重命名”功能，但它们只在一个源文件中重命名，而不是在整个项目中重命名。还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:55:30.163

正如@infrared 在评论中指出的那样，[PyCharm](http://www.jetbrains.com/pycharm/)是适合这项工作的工具。它有很多重构工具，巧妙的[重命名](http://www.jetbrains.com/pycharm/webhelp/rename-refactorings.html)就是其中之一。

# ios - 从 iOS 应用程序将链接共享为页面的最简单方法

> ID：16090300
> 
> 赞同：0
> 
> 时间：2013-04-18T18:14:46.287
> 
> 标签：ios, facebook, facebook-ios-sdk

从 iOS 应用程序将链接共享为 Facebook 页面的最简单方法是什么？我不在乎解决方案是否优雅，它只是用于内部工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:29:21.157

你可以试试这个......

```
NSString *urlString = @"Your Link";
NSString *shareUrlString = [NSString stringWithFormat:@"https://m.facebook.com/sharer.php?u=%@", urlString];
shareUrlString = [shareUrlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *url = [[NSURL alloc] initWithString:shareUrlString];
[[UIApplication sharedApplication] openURL:url]; 
```

# jquery - 为什么 jQuery 不设置我的值？

> ID：16090303
> 
> 赞同：0
> 
> 时间：2013-04-18T18:14:52.857
> 
> 标签：jquery

所以这是我的代码。我正在尝试设置隐藏表单输入的值。

```
if($gender == "BOY" || $gender == "MALE" || $gender == "M" || $gender == "1") {
        console.log('Its a boy!');
        $(".girlsonly").hide();
        document.getElementsByName('dressjacket')[0].placeholder='Jacket';
        $('#majorgender').val('1');
    };
    if($gender == "GIRL" || $gender == "FEMALE" || $gender == "F" || $gender == "0") {
        console.log('Its a girl!');
        document.getElementsByName('dressjacket')[0].placeholder='Dress';
        $('#majorgender').val('0');
    }; 
```

这是表单输入：

```
<input type="hidden" name="majorgender" id="majorgender"></input> 
```

它成功记录了“它是一个女孩！” 或“它是一个男孩！” 但之后当我插入“ `alert($('majorgender').val());`”时，它会提示“**未定义**”

如果我`alert($('majorgender'))`用“object Object”记录它，所以我知道它存在，我只是不知道为什么它没有正确设置。

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T18:17:13.180

你需要一个`#`in -`alert($('#majorgender').val());`否则它正在寻找一个名为 majorgender 的标签，而不是一个 ID

IE。您目前正在寻找`<majorgender...`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T18:18:30.563

你正在`majorgender`像这样提醒输入`$('majorgender').val()` 当你真的需要这样提醒它`$('#majorgender').val()`

因为您通过 id 选择此输入，所以您必须在选择器名称之前加上一个哈希`#`

并注意 jquery 定义了每个选择器，即使它作为对象无效，所以如果您的日志显示一个意味着您的选择器正确且存在的对象，则没有必要:)

试着告诉我这是否有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T18:18:05.373

你错过了#改为

```
alert($('majorgender').val()); 
```

至

```
alert($('#majorgender').val()); 
```

# java - 如何格式化通过共享菜单发送的文本字符串

> ID：16090309
> 
> 赞同：0
> 
> 时间：2013-04-18T18:15:15.757
> 
> 标签：java, android, regex, string, android-intent

我使用以下代码通过共享菜单将文本从其他应用程序发送到我的应用程序，并在 EditText 中显示文本。

```
Intent receivedIntent = getIntent();    
    String receivedAction = receivedIntent.getAction();     
    String receivedType = receivedIntent.getType();
    TextView txtView = (EditText) findViewById(R.id.edWord);
    //if(receivedAction.equals(Intent.ACTION_SEND)){
    if (Intent.ACTION_SEND.equals(receivedAction) && receivedType != null) {
        if(receivedType.startsWith("text/")) {                                      
            String receivedText = receivedIntent.getStringExtra(Intent.EXTRA_TEXT).toLowerCase();  
            if (receivedText != null)
            {                   
                txtView.setText(receivedText);
                txtView.requestFocus();
                ListView myList=(ListView) findViewById(R.id.lstWord);
                myList.setFocusableInTouchMode(true);
                myList.setSelection(0);
            }
            else
                txtView.setText(""); 
        } 
    } 
```

一切正常，即发送的文本显示在我的 EditText 中（即`edWord`在上面的代码中）。但问题是通过 Share 发送的文本有时包含无意义的元素或派生词，例如：`"word`, `word'`,`word,`或`looked`, `books`, `tomatoes`。

现在我想要的是格式化文本，使其在添加到 EditText 之前只包含真实单词或单词的基本形式。

我听说过`approximate string matching`或者`fuzzy searching`但我不知道如何将它应用到我的代码中。我想知道您是否可以给我一点帮助来解决上述问题，至少在格式化/剥离非单词元素方面。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:08:45.233

我想我已经找到了问题第一部分的答案，即从字符串中删除非单词元素（开始和/或结束字符串）。这是我使用的带有一些正则表达式算法的代码：

```
String receivedText = receivedIntent.getStringExtra(Intent.EXTRA_TEXT);  
            if (receivedText != null)                
          {                 
                receivedText = receivedText.toLowerCase();

                //Remove all non-word elements starting and/or ending a string 
                String strippedInput = receivedText.replaceAll("^\\W+|\\W+$", "");
                System.out.println("Stripped string: " + strippedInput); 

                txtView.setText(strippedInput);
                txtView.requestFocus();
                ListView myList=(ListView) findViewById(R.id.lstWord);
                myList.setFocusableInTouchMode(true);
                myList.setSelection(0);
            } 
```

对于我的问题的第二部分，关于模糊搜索，我猜它或多或少涉及重新编码我的应用程序如何从其 SQLlite 数据库中搜索结果。这仍然是我未回答的问题。

# selenium - 是否可以断言页面已停止滚动等待

> ID：16090317
> 
> 赞同：0
> 
> 时间：2013-04-18T18:15:36.707
> 
> 标签：selenium, webdriver, spock, geb

我有一个页面，我在其中单击“更改”链接，该链接显示另一个部分。发生这种情况时，页面会垂直滚动一点，以便可见部分在屏幕上居中。

我在测试中的下一步是单击这个新显示的容器内的某些内容。但由于视口滚动，geb 为可点击元素获取的坐标不再准确，并且 geb 告诉我它无法点击链接。

就可见内容而言，我无法断言`waitFor`。但我想知道是否有办法让`waitFor`内容停止滚动？

```
waitFor { // page no longer scrolling } 
```

如果没有，有没有办法告诉 geb 在继续下一个事件之前等待几秒钟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:18:05.383

如果您知道要滚动到哪个元素（完成滚动后位于浏览器视口顶部的元素），则可以等待`y`表示该元素的导航器的属性为零。以下是一个示例，您可以将其粘贴到 groovy 控制台中，该控制台转到一个页面，然后通过在 url 中使用它的 id 滚动到一个元素（我知道这里没有等待，滚动也没有动画，但我只想展示如何属性可以用来实现你想要的）：

```
@Grapes([
   @Grab('org.gebish:geb-core:0.9.0'),
   @Grab('org.seleniumhq.selenium:selenium-firefox-driver:2.32.0')
])

import geb.Browser

Browser.drive {    
    //at the top of the page
    go 'http://docs.codehaus.org/display/GROOVY/Creating+an+extension+module'

    //an element we'll scroll to later
    def elem = $('#Creatinganextensionmodule-Themoduledescriptor')
    assert elem.y != 0

    //scroll to the element
    go 'http://docs.codehaus.org/display/GROOVY/Creating+an+extension+module#Creatinganextensionmodule-Themoduledescriptor'
    assert elem.y == 0
} 
```

所以你最终应该得到类似的东西：

```
waitFor { elementWeScrollTo.y == 0 } 
```

甚至：

```
waitFor { !elementWeScrollTo.y } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-19T10:45:04.457

我不知道如何在 geb 中表达它，但我会编写一个循环反复检查`document.body.pageYOffset`( `document.body.scrollTop`for IE) 直到它稳定下来。

# javascript - 用于数字排序的 javascript 验证

> ID：16090319
> 
> 赞同：0
> 
> 时间：2013-04-18T18:15:47.567
> 
> 标签：javascript

以下代码用于检查 numbers.num1、num2 和 num3 的验证。验证工作就像 num1 小于 num2 小于 num3。它将遵循此订单并且它正在工作，但在显示警报消息后，输入并破坏订单的数字需要重置为空。

```
<form name="validateForm" method="POST">Enter num1
    <input type="text" id="num1" name="num1" value="" onchange="javascript:validate()" />
    <br/>Enter num2
    <input type="text" id="num2" name="num2" value="" onchange="javascript:validate()" />
    <br/>Enter num3
    <input type="text" id="num3" name="num3" value="" onchange="javascript:validate()" />
    <br/>
</form> 
```

代码：

```
function validate() {
    var num1 = document.validateForm.num1.value;
    var num2 = document.validateForm.num2.value;
    var num3 = document.validateForm.num3.value;
    var count = 0;
    if (num1 != "") {
        count++
    }
    if (num2 != "") {
        count++
    }
    if (num3 != "") {
        count++
    }
    var numarray = new Array(count);
    var flag = "false";
    var j = 0;
    if (!isNaN(num1)) {
        numarray[j] = num1;
    } else {
        flag = "true";
    }

    if (!isNaN(num2)) {
        if (flag == "true") {
            alert("numbers are not in order");
            document.validateForm.num2.value = "";
            return false;
        }
        numarray[j] = num2;
        j++;
    } else {
        flag = "true";
    }
    if (!isNaN(num3)) {
        if (flag == "true") {
            alert("numbers are not in order");
            document.validateForm.num3.value = "";
            return false;
        }
        numarray[j] = num3;
        j++;
    }
    if (numarray.length > 1) {
        for (var x = 0; x < numarray.length - 1; x++) {
            if (numarray[x + 1] < numarray[x]) {
                alert("numbers are not in order");
                return false;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:28:34.057

我会将这些数字放入一个数组中，然后使用下一个索引的值循环检查它们的值。如果你一直坚持下去，你就有了一套很好的组合。否则，你这是一个糟糕的集合。

```
var numbers = [2, 3, 4],
    inOrder = checkValues( numbers );

function checkValues ( arr ) {
    // Cycle over every item in the array, exclude last item
    for ( var i = 0; i < ( arr.length - 1 ); i++ ) {
        // If current item is greater than item at next index
        if ( arr[ i ] > arr[ i + 1 ] ) {
            // List is not in order
            return false;
        }
    }
    // If you made it to this point, the list is in order
    return true;
} 
```

至于之后的重置，您可以`.reset()`在表单本身上调用该方法：

```
var myForm = document.forms["validateForm"];

/* ... */

if ( checkValues( numbers ) ) {
    myForm.reset();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:21:13.497

**Javascript**（如果您愿意，可以将 console.log() 替换为 alert()）

```
function validate() {

    // get the input fields for the numbers
    var numbers = document.getElementsByName("number");

    /* Alternative
    var numbers = document.myform.number; */

    // parse the numbers as integer
    var num1 = parseInt( numbers[0].value );
    var num2 = parseInt( numbers[1].value );
    var num3 = parseInt( numbers[2].value );

    console.log('initial values:', num1, num2, num3);

    // check that all fields are filled
    if (!num1 || !num2 || !num3) {
        console.log('some fields are empty or not numbers');
        return false;
    }

    // if the order is correct, success
    if ( num1<num2 && num2<num3 ) {
        console.log('success: numbers are in correct order');
    } else {
        // otherwise, check which number is wrong and reset the field

        if (!( num1<num2 )) {
            console.log('error: num1 is wrong');
            numbers[0].value = "";
        } else if (!( num2<num3 )) {
            console.log('error: num3 is wrong');
            numbers[2].value = "";
        }
    }

    /* Alternative #1
    // check if a number is wrong and reset the field
    if (!( num1<num2 )) {
        console.log('error: num1 is wrong');
        numbers[0].value = "";
        return false;
    } else if (!( num2<num3 )) {
        console.log('error: num3 is wrong');
        numbers[2].value = "";
        return false;
    } else {
        console.log('success: numbers are in correct order');
        return true;
    } */

    /* Alternative #2
    var nums = [num1, num2, num3];
    for (var i = 1; i < nums.length; i++) {
        if (!( nums[i-1]<nums[i] )) {
            numbers[i].value = "";
            return false;
        }
    }
    console.log('success: numbers are in correct order');
    return true;
    */
} 
```

**html**

```
<form name="myform">
  Enter num1: <input type="text" name="number" onchange="validate()" /><br />
  Enter num2: <input type="text" name="number" onchange="validate()" /><br />
  Enter num3: <input type="text" name="number" onchange="validate()" /><br />
</form> 
```

# java - 部署maven项目的标准方式

> ID：16090321
> 
> 赞同：0
> 
> 时间：2013-04-18T18:16:00.280
> 
> 标签：java, maven, deployment

我有两个 Maven 项目，我需要通过自动部署过程进行部署。（如夜间构建或类似）
场景如下：

```
mv-proj1
 -dependency-1.jar
 -dependency-2.jar
 -dependency-3.jar
mv-proj2
 -dependency-3.jar
 -dependency-4.jar
 -mv-proj1.jar 
```

无法透露 mv-proj1 和 mv-proj2 的来源。
mv-proj2 是可执行的 jars 并为其他应用程序模块提供服务。

那么将这些部署到生产机器或者说 UAT 机器的标准方法是什么？
我是否需要设置组织内 Maven 存储库？
我需要将 maven 存储库安装到 UAT 机器吗？

我能想到的一种可能的方法是设置和托管组织内 maven 存储库，以及在 UAT 机器上设置 maven 以从组织内 maven 存储库中获取数据。并仅部署 pom.xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:00:42.437

我会让我的选择取决于你的工件的消费者是什么。

如果消费者也是可以从所述组织内 Maven 存储库中提取 JAR 的 Maven 项目，那绝对是一个很好的方法。我相信每个认真使用 Maven 的组织迟早都会有这样自己的存储库的用例。我曾与 Artifactory 和 Nexus 合作过，并且觉得两者都是很棒的产品（以及此处所述的用例的免费啤酒）。它们都易于安装，不应该是令人生畏的探索，去吧！

如果您的 UAT 机器将使用 Maven 构建和安装任何将您的工件作为依赖项拉入的东西，那么它们将在客户端运行 Maven。这些客户端上会有一个本地存储库（工件缓存），但这与上面提到的组织存储库不同，您可能不会将其部署在实际的 UAT 机器上。

如果`mv-proj2`是“最终交付”，如您所说的可执行文件，您可能希望将其全部打包为一个漂亮的单个 JAR（Maven 可以为您完成）并将其分发给您的用户。您可以通过组织存储库再次执行此操作。您最终可以将其发布到某个网络驱动器或 Web 服务器。这样做的方法很多，例如使用 maven-jar-plugin 和 outputDirectory 指向您要发布的任何位置。

# python - Beautifulsoup 使用 `find_all` 按文本查找元素，无论其中是否有元素

> ID：16090324
> 
> 赞同：6
> 
> 时间：2013-04-18T18:16:11.763
> 
> 标签：python, beautifulsoup

例如

```
bs = BeautifulSoup("<html><a>sometext</a></html>")
print bs.find_all("a",text=re.compile(r"some")) 
```

返回`[<a>sometext</a>]`但当搜索的元素有一个孩子时，即`img`

```
bs = BeautifulSoup("<html><a>sometext<img /></a></html>")
print bs.find_all("a",text=re.compile(r"some")) 
```

它返回`[]`

有没有办法用来`find_all`匹配后面的例子？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T18:29:47.410

您将需要使用混合方法，因为`text=`当元素具有子元素和文本时会失败。

```
bs = BeautifulSoup("<html><a>sometext</a></html>")    
reg = re.compile(r'some')
elements = [e for e in bs.find_all('a') if reg.match(e.text)] 
```

### 背景

当 BeautifulSoup 正在搜索一个元素并且`text`是一个可调用元素时，它最终[会调用](http://bazaar.launchpad.net/~leonardr/beautifulsoup/bs4/view/head:/bs4/element.py#L1267)：

```
self._matches(found.string, self.text) 
```

在您给出的两个示例中，该`.string`方法返回不同的内容：

```
>>> bs1 = BeautifulSoup("<html><a>sometext</a></html>")
>>> bs1.find('a').string
u'sometext'
>>> bs2 = BeautifulSoup("<html><a>sometext<img /></a></html>")
>>> bs2.find('a').string
>>> print bs2.find('a').string
None 
```

该`.string`方法如下所示：

```
@property
def string(self):
    """Convenience property to get the single string within this tag.

    :Return: If this tag has a single string child, return value
     is that string. If this tag has no children, or more than one
     child, return value is None. If this tag has one child tag,
     return value is the 'string' attribute of the child tag,
     recursively.
    """
    if len(self.contents) != 1:
        return None
    child = self.contents[0]
    if isinstance(child, NavigableString):
        return child
    return child.string 
```

如果我们打印出内容，我们可以看到返回的原因`None`：

```
>>> print bs1.find('a').contents
[u'sometext']
>>> print bs2.find('a').contents
[u'sometext', <img/>] 
```

# javascript - 使用模块化方法构建 JavaScript 应用程序

> ID：16090328
> 
> 赞同：0
> 
> 时间：2013-04-18T18:16:38.843
> 
> 标签：javascript, oop, interpreter, modularity, prototypal-inheritance

我正在尝试编写一个足够大的 javaScript 应用程序，模块化可能是一个好主意。我正在使用著名的继承函数来使对象能够从具有参数的构造函数继承。问题是我收到一个错误，即传递给继承函数的父级未定义。这是因为，调用继承时尚未定义父构造函数。

我想出了一些丑陋的解决方案来解决这个问题：

1.  在其父 (yuk) 之后声明所有子构造函数。

2.  将所有原型分配绑定到一个自定义事件，并使用有序的回调链来确保所有原型都按顺序分配（也许那里有潜力）。

3.  将所有原型分配从其构造函数所在的代码区域中移出，并将它们合并（和放逐）到一些“分配原型”函数（是第一项的两倍，不是吗？）。

底线是我不想将我的构造函数、方法和对象在代码中的写入顺序建立在加载/解释代码的顺序上。我希望我的代码易于扩展并将相关代码组合在一起以便易于理解（即原型分配不应该靠近构造函数声明/定义吗？）。

我将模块放在单独的文件中，并在将它们发送到浏览器之前使用 PHP 脚本将它们全部附加在一起。PHP 脚本只确保首先包含声明命名空间的文件，然后将 js 文件与 glob 连接起来。

我写了一个小脚本，准确地演示了我遇到的问题。它是[在这个 url 上直播的](http://coroproservices.pairserver.com/JavaScriptSandbox/)。屏幕是白色的，因为没有 html — 我在这里使用控制台进行分析。

```
/*global console, jQuery, $, myNS: true*/
/*jslint browser: true*/

/*
 * This file is deliberately set as the first file in the php glob.
 */
var myNS = (function (myNS, $, window, undefined) {
    "use strict";

    /*
     * @param {object} coords -- e.g. {x: 3, y: 26}
     */
    myNS = function (coords) {
        return new myNS.CartesianLoc(coords);
    };

    // static methods
    myNS.inherit = function (parent) {
        function F() {}
        F.prototype = parent.prototype;
        return new F();
    };
    myNS.getWinCenter = function () {
        return {
            x : $(window).width() / 2,
            y : $(window).height() / 2
        };
    };

    // prototype
    myNS.prototype = {
        log: function () {
            if (window.console) {
                console.log(this);
            }
        }
    };

    return myNS;
}(myNS, jQuery, window));

/*
 * This is another file.
 */
(function (myNS, $, window, undefined) {
    "use strict";
    /*
     *  CartesianLoc constructor
     *
     *  @param {object} coords -- given in a conceptual
     *  Cartesian space where the origin (0,0) is
     *  the middle of whatever screen
     */
    function CartesianLoc(coords) {
        myNS.Loc.call(this, coords);
    }
    CartesianLoc.prototype = myNS.inherit(myNS.Loc);
    CartesianLoc.prototype.constructor = CartesianLoc;

    CartesianLoc.prototype.getWinCoords = function () {
        return {
            x: myNS.getWinCenter().x + this.x,
            y: myNS.getWinCenter().y + this.y
        };
    };

    myNS.CartesianLoc = CartesianLoc;
}(myNS, jQuery, window));

/*
 * This is another file.
 */
(function (myNS, $, window, undefined) {
    "use strict";
    // Location constructor
    function Loc(coords) {
        this.x = coords.x;
        this.y = coords.y;
    }
    Loc.prototype = myNS.inherit(myNS);
    Loc.prototype.constructor = Loc;

    Loc.prototype.translate = function (coords) {
        this.loc.x += coords.x;
        this.loc.y += coords.y;
        return this;
    };

    myNS.Loc = Loc;
}(myNS, jQuery, window));

/*
 * Application js file
 *
 */

(function (myNS, $, window, undefined) {
    "use strict";

    $(document).ready(function (event) {
        if (console) {
            console.log("%o", new myNS({x: 100, y: -45}));
        }
    });

}(myNS, jQuery, window)); 
```

感谢您给我的任何帮助或想法！
克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:43:35.710

我不确定这是一种合理的做法还是混乱，但我创建了一个在 document.ready 上触发的自定义事件，并将所有分配原型的代码放在该事件的回调中。我知道我正在添加一个在另一个事件被触发时触发的事件（这在它的表面上似乎毫无意义），但我希望自定义事件成为被监听的事件，以防我想改变它稍后触发的方式。

```
/*global console, jQuery, $, myNS: true*/
/*jslint browser: true*/

/*
 * This file is deliberately set as the first file in the php glob.
 */
var myNS = (function (myNS, $, window, undefined) {
    "use strict";

    /*
     * @param {object} coords -- e.g. {x: 3, y: 26}
     */
    myNS = function (coords) {
        return new myNS.CartesianLoc(coords);
    };

    // Triggered after all constructors have been defined
    $(document).ready(function (event) {
        $(document).trigger("myNS");
    });

    // static methods
    myNS.inherit = function (parent) {
        function F() {}
        F.prototype = parent.prototype;
        return new F();
    };
    myNS.getWinCenter = function () {
        return {
            x : $(window).width() / 2,
            y : $(window).height() / 2
        };
    };

    // prototype
    myNS.prototype = {
        log: function () {
            if (window.console) {
                console.log(this);
            }
        }
    };

    return myNS;
}(myNS, jQuery, window));

/*
 * This is another file.
 */
(function (myNS, $, window, undefined) {
    "use strict";
    /*
     *  CartesianLoc constructor
     *
     *  @param {object} coords -- given in a conceptual
     *  Cartesian space where the origin (0,0) is
     *  the middle of whatever screen
     */
    function CartesianLoc(coords) {
        myNS.Loc.call(this, coords);
    }
    $(document).on('myNS', function (event) {
        CartesianLoc.prototype = myNS.inherit(myNS.Loc);
        CartesianLoc.prototype.constructor = CartesianLoc;

        CartesianLoc.prototype.getWinCoords = function () {
            return {
                x: myNS.getWinCenter().x + this.x,
                y: myNS.getWinCenter().y + this.y
            };
        };
    });
    myNS.CartesianLoc = CartesianLoc;
}(myNS, jQuery, window));

/*
 * This is another file.
 */
(function (myNS, $, window, undefined) {
    "use strict";
    // Location constructor
    function Loc(coords) {
        this.x = coords.x;
        this.y = coords.y;
    }
    $(document).on('myNS', function (event) {
        Loc.prototype = myNS.inherit(myNS);
        Loc.prototype.constructor = Loc;

        Loc.prototype.translate = function (coords) {
            this.loc.x += coords.x;
            this.loc.y += coords.y;
            return this;
        };
    });
    myNS.Loc = Loc;
}(myNS, jQuery, window));

/*
 * Application js file
 *
 */

(function (myNS, $, window, undefined) {
    "use strict";

    $(document).ready(function (event) {
        if (console) {
            console.log("%o", new myNS({x: 100, y: -45}));
        }
    });

}(myNS, jQuery, window)); 
```

# .net - 如何在没有管理员权限的情况下初始化 Windows 套接字库

> ID：16090329
> 
> 赞同：2
> 
> 时间：2013-04-18T18:16:40.653
> 
> 标签：.net, windows, sockets, winsock

我正在编写一个通过 .NET 调用 OpenOffice.org API 的程序。[http://wiki.openoffice.org/wiki/Documentation/DevGuide/ProUNO/CLI/Writing_Client_Programs](http://wiki.openoffice.org/wiki/Documentation/DevGuide/ProUNO/CLI/Writing_Client_Programs)上的文档说：

对于 OOo 3.x，代码如下：

```
//C# example for OOo 3.x
//Workaround which is needed when using a socket connection
//This will initialize the Windows socket library.
System.Net.Sockets.Socket s = new System.Net.Sockets.Socket(
AddressFamily.InterNetwork, SocketType.Raw, ProtocolType.IP); 
```

它在 Windows XP 和 Windows Server 2003 上运行良好，但在 Windows 7 上失败：

> 试图以访问权限禁止的方式访问套接字

我理解是因为套接字类型是原始的并且程序没有以管理员权限运行。所以我的问题是：如何在没有管理员权限的情况下初始化 Windows 套接字库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:12:11.963

访问 RAW 套接字需要 Windows 2000 及更高版本的管理员权限，这在 MSDN 上有描述：

[TCP/IP 原始套接字](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740548.aspx)

> 原始套接字提供了操纵底层传输的能力，因此它们可用于构成安全威胁的恶意目的。因此，只有管理员组的成员才能在 Windows 2000 及更高版本上创建 SOCK_RAW 类型的套接字。
> 
> ...
> 
> **注意**要使用 SOCK_RAW 类型的套接字需要管理权限。运行使用原始套接字的 Winsock 应用程序的用户必须是本地计算机上管理员组的成员，否则原始套接字调用将失败并返回错误代码 WSAEACCES。在 Windows Vista 和更高版本上，对原始套接字的访问是在创建套接字时强制执行的。在早期版本的 Windows 中，对原始套接字的访问是在其他套接字操作期间强制执行的。

没有办法绕过这个限制。另一方面，如果您的意图只是一般地初始化 Winsock，那么您不需要创建 RAW 套接字来执行此操作。改为创建一个 TCP ( `SocketType.Stream`and `ProtocolType.TCP`) 或 UDP ( `SocketType.DGram`and `ProtocolType.UDP`) 套接字，它们不受限制，并且很可能无论如何 OOo 将在内部实际使用。或者，您可以使用 PInvoke 直接调用 Winsock 的`WSAStartup()`函数。

# android - Google Drive Authorization 在 Android SDK <14 上返回错误 403 usageLimits

> ID：16090334
> 
> 赞同：0
> 
> 时间：2013-04-18T18:17:00.070
> 
> 标签：android, google-drive-api, google-api-java-client

我在我的 Android 应用中使用 Google Drive API：

```
private Drive buildService(final GoogleCredential credentials) {

        return new Drive.Builder(AndroidHttp.newCompatibleTransport(), new GsonFactory(), credentials)
                .build();

    } 
```

使用 accountManager 获取凭证。它可以在 Android 4.0 及更高版本上完美运行。我可以获取/插入/删除文件等。在下面的 Android 4.0 上运行时，它总是返回：

```
"error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "dailyLimitExceededUnreg",
    "message": "Daily Limit Exceeded. Please sign up",
    "extendedHelp": "https://code.google.com/apis/console"
   }
  ],
  "code": 403,
  "message": "Daily Limit Exceeded. Please sign up"
 }
} 
```

这是兼容性问题吗？我正在使用最新的 Drive api 和 google api lib(1.14.1)。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:56:34.917

您应该在 API 控制台的服务选项卡上启用“Google Drive API”：[https ://code.google.com/apis/console/](https://code.google.com/apis/console/)

# wordpress - Wordpress 短代码在复古主题中不起作用

> ID：16090335
> 
> 赞同：0
> 
> 时间：2013-04-18T18:17:04.453
> 
> 标签：wordpress, shortcode

我正在使用 wordpress 复古主题，并使用插件来显示隐藏文本`"[wpex Read more]hidden text[/wpex]"`但它不起作用，数据由自定义函数显示我去那里并将代码更改为`"retun do_shortcode( $result );"`但适用于没有参数的简单短代码，不使用短代码有partmeters就像我之前提到的。谁能指导我该怎么做？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:21:47.387

您错过了短代码中的参数，将 Read More 文本分配给这样的参数

```
[wpex parameter="Read more"]hidden text[/wpex] 
```

# admob - 确保重新审视 Android 兼容性

> ID：16090338
> 
> 赞同：0
> 
> 时间：2013-04-18T18:17:11.817
> 
> 标签：admob, android-compatibility

我已经[在这里](https://stackoverflow.com/questions/4568267/android-min-sdk-version-vs-target-sdk-version/4994039#4994039)和[这里找到了相关的问题](https://stackoverflow.com/questions/7291006/ensure-android-project-doesnt-call-apis-with-newer-than-intended-api-level)

*首先让我们注意我是 IntelliJ 用户*

**所以我的问题是关于如何在不做额外工作的情况下保持兼容性**的问题上是否有任何更新。

*据我了解，android manifest（min & target sdk）中的值仅作为 google play 的参考，而不是用于编译*

我只想支持 Gingerbread 版本**Android-10**。另一方面，**AdMob**迫使我为**Android-13**进行编译。主要问题是如果不小心使用了 Android-13 中存在但 Android-10 中没有的功能。

到目前为止，我提出的唯一“解决方案”是**来回编译**。更改属性，编译，然后更改属性再次编译。这是最不烦人的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:57:02.197

您可以使用 Android 的一个版本 (13) 中的 ADT 来生成资源，并使用早期版本 (10) 中的 Android 库进行编译，以确保您没有使用更高版本中的任何 API。

我也使用 IntelliJ，但使用 Maven 构建，这就是我所做的。使用 Maven 使这个用例变得非常简单。

```
<plugin>
   <groupId>com.jayway.maven.plugins.android.generation2</groupId>
   <artifactId>android-maven-plugin</artifactId>
   <configuration>
      <sdk>
          <platform>${android.resources.sdk.version}</platform>
      </sdk>
   </configuration>
</plugin>

<plugin>
   <artifactId>maven-compiler-plugin</artifactId>
   <configuration>
       <source>1.6</source>
       <target>1.6</target>
       <showWarnings>true</showWarnings>
       <fork>true</fork>
   </configuration>
</plugin>

<dependencies>
   <dependency>
      <groupId>com.google.android</groupId>
      <artifactId>android</artifactId>
      <version>${android.library.dependency.version}</version>
      <scope>provided</scope>
   </dependency>
</dependencies> 
```

# logic - 动态柔性约束满足问题

> ID：16090340
> 
> 赞同：2
> 
> 时间：2013-04-18T18:17:12.750
> 
> 标签：logic, clpfd, constraint-programming

我正在寻找能够解决灵活和/或动态约束的逻辑约束求解器。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:23:01.670

看看[OptaPlanner](http://www.optaplanner.org/)（Java、开源、ASL）：

*   *动态*的（随着时间的推移不断变化）：OptaPlanner 约束易于维护，因为它们是面向对象的并且彼此隔离。此外，如果您使用 drools 集成，您甚至可以在决策表、guvnor Web 应用程序中定义您的约束，...
*   *灵活*（并非所有约束都是硬约束）：OptaPlanner 支持开箱即用的[硬约束和软约束](http://docs.jboss.org/drools/release/latest/optaplanner-docs/html_single/index.html#d0e3489)。如果需要，它支持分数加权和 3+ 分数级别（例如硬、中和软）。

还有其他几个约束满足库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T00:44:33.933

“通过动态我的意思是如果问题中的约束随着时间的推移而不断变化”->这在约束编程中没有意义。约束不变。只有变量的域可以改变（通过约束传播或决策）。

“灵活我的意思是如果约束不是硬的——一些约束当然可以用成本来满足；一些约束更重要。它们带有权重或等级，或者在求解器尝试的地方有一个成本函数尽量减少以解决问题。” --> 好的所以基本上你正在尝试解决 Max-CSP 和/或加权 CSP。我建议您检查支持最大和/或加权 CSP 的 CSP 竞赛之一（例如[http://www.cril.univ-artois.fr/CPAI08/](http://www.cril.univ-artois.fr/CPAI08/)）。您还可以查看 Minizinc 的[http://www.minizinc.org](http://www.minizinc.org)（但我不确定它是否支持最大/加权 CSP）。

你想解决什么样的问题？

# sql - Oracle 数据库批量更新的最佳方法

> ID：16090347
> 
> 赞同：1
> 
> 时间：2013-04-18T18:17:41.770
> 
> 标签：sql, oracle, plsql, oracle10g

我需要对 Oracle 10g 数据库中的表（约 30,000 条记录）进行大规模更新。挑战在于没有可以选择目标行的“where”子句。但是，每个目标行都可以通过复合键来标识。这里的问题是复合键列表来自外部源（不在数据库中）。

目前，我有一个 Java 程序，它遍历复合键列表并吐出一个 PL/SQL 过程，该过程本质上只是一堆重复的`update`语句，类似于以下内容：

```
update table1 t set myfield='Updated' where t.comp_key1='12345' and t.comp_key2='98765'; 
```

有没有更好的方法来做到这一点，或者考虑到我们只处理约 3 万条记录，这是否“足够好”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:19:58.547

可能已经足够好了，但是如果键的外部源是文件，请创建一个指向该文件的外部表，将文件中的数据公开为关系表，然后您可以在合并（更新）语句中执行此操作.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T18:50:50.677

够好了。

使用主键进行 30,000 次更新，即使它们都是硬解析的，通常也只需要几秒钟。正如@Ed Gibbs 建议的那样，您可能可以通过组合更新来加快速度。但到目前为止，这看起来是一个非常快速的过程，不值得优化。将所有这些都放在一个 PL/SQL 过程中是一个明智之举，并且节省了 99% 的时间，而这对于真正天真的、逐行从客户端的解决方案来说是必要的。

# c# - 在 C# 中，为什么可以将属性设置为自身

> ID：16090348
> 
> 赞同：6
> 
> 时间：2013-04-18T18:17:42.327
> 
> 标签：c#, syntax, properties

不小心在我的工作中创建了一个错误。该错误的原因是一段 c# 代码，例如

```
public ClassA{
        public string AProperty
        {
            get
            {
                return AProperty;
            }
            set
            {
                AProperty = value;
            }
        }
} 
```

您可以构建它，并毫无例外地运行它。但它会创建一个无限循环。例如，在设置 AProperty 时，它总是尝试将值分配给它自己。

任何人都知道为什么在 C# 中编译器会允许这种语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:19:36.880

因为 C# 编译器团队并没有决定将这种确切的情况设为非法。可能是因为他们不认为实施它的好处大于成本。

即使是最微不足道的测试，它也会产生。这不是一个非常微妙的错误，如果他们被它咬了几次，开发人员就会学会寻找它。

# nginx - 发送数据报时如何设置nginx的IP地址？

> ID：16090350
> 
> 赞同：1
> 
> 时间：2013-04-18T18:17:55.733
> 
> 标签：nginx

机器有2个ip地址，第一个是192.168.0.10，另一个是192.168.0.12，192.168.0.12是VIP（keepalived）。

我想用 nginx 将数据发送到源 IP VIP 192.168.0.12 的目标机器，但是，目标机器检测到 ip 是 192.168.0.10。

有没有办法将nginx源ip设置为VIP 192.168.0.12？

# cuda - 在 cuBLAS 中，如何从主机获取或设置矩阵元素？

> ID：16090351
> 
> 赞同：0
> 
> 时间：2013-04-18T18:17:56.767
> 
> 标签：cuda, cublas

嗨，我正在使用 cuBLAS 进行一些矩阵运算。

有时，我需要获取或设置单个矩阵元素。根据 cuBLAS 文档，矩阵分配如下：

```
 cudaMalloc((void**)&pArrayDev,sizeof(float)*numRows*numCols);        
    cublasSetMatrix(numRows,numCols,sizeof(float),pArray,numRows,pArrayDev,numRows); 
```

现在，如果我只需要更改一个元素，我可以使用 cudaMemset 之类的东西吗？**从主机代码**执行此操作的正确方法是什么？每次只更改一个元素时，我都不想将整个数组从主机复制到设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:47:05.097

[cudaMemset](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1ge07c97b96efd09abaeb3ca3b5f8da4ee)使用起来很不方便，因为它只对字节进行操作，因此您需要将`float`值的每个字节设置为相同的数字。这可能不是你想要的。

但是[cublasSetMatrix](http://docs.nvidia.com/cuda/cublas/index.html#topic_5_9)已经具备了进行平铺复制的能力。假设您最初拥有矩阵的主机副本，这可以达到您的目的。只需更新主机副本中的相应位置，然后`cublasSetMatrix`调用 rows = 1，cols = 1，并且 A 和 B 矩阵指针指向源矩阵和目标矩阵中要更新的元素：

```
cublasSetMatrix(1,1,sizeof(float),&pArray[offset],numRows,&pArrayDev[offset],numRows); 
```

如果您周围没有矩阵的主机副本，您可以使用[cudaMemcpy](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g48efa06b81cc031b2aa6fdc2e9930741)执行类似的操作：

```
float updateval = 100.0f;  // or whatever value you want 
cudaMemcpy(&pArrayDev[offset], &updateval, sizeof(float), cudaMemcpyHostToDevice); 
```

如果您想从设备检索单个元素到主机，您可以反转上述操作（例如使用 cublasGetMatrix，或 cudaMemcpyDeviceToHost 等）

# android - Android视图可见性更改导致屏幕闪烁

> ID：16090356
> 
> 赞同：0
> 
> 时间：2013-04-18T18:18:10.257
> 
> 标签：android

我目前有一个布局，在播放视频结束时，将全屏图像视图的可见性更改为可见。每当发生这种情况时，屏幕都会轻微闪烁。有没有办法防止这种情况？

```
public class VideoTestFlip extends SherlockActivity implements OnCompletionListener
{
ImageView surprise;
VideoView video;
ViewFlipper viewFlipper;
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.video_splash);
    video = (VideoView) findViewById(R.id.videoView);
    viewFlipper = (ViewFlipper)findViewById(R.id.viewflipper);
    Animation in = AnimationUtils.loadAnimation(this, R.anim.slide_down);
    Animation out = AnimationUtils.loadAnimation(this, R.anim.slide_up);

    viewFlipper.setInAnimation(in);
    viewFlipper.setOutAnimation(out);
    surprise = (ImageView)findViewById(R.id.surprise);
    video.setVideoPath("android.resource://com.mezzolab.danariely/raw/" + R.raw.splash_low_5);

 video.start();
    video.setOnCompletionListener(this);
}

@Override
public void onCompletion(MediaPlayer mp)
{

    surprise.setVisibility(View.VISIBLE);

    viewFlipper.showNext();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:45:22.257

我看不到您的代码，但很多时候这是因为您的事件序列已关闭。[看一下这个](https://stackoverflow.com/questions/3544826/android-home-screen-like-effect-flickering-problem-when-set-child-setvisibility)

编辑：现在您的代码已经启动：您所做的似乎不应该有任何闪烁的行为。我唯一能想到的就是尝试将其设置为异步可见。制作一个处理程序：

```
private class ViewHandler extends Handler {
  @Override
  public void handleMessage(Message msg) {
    surprise.setVisibility(View.VISIBLE);
  }
} 
```

然后`ImageView` `View.VISIBLE`通过调用处理程序来调用它：

```
mHandler.sendMessage(Message.obtain(mHandler, 0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:42:47.647

您可以使用动画来避免这种闪烁。

# exec - PHP 脚本在“$com = new Com('WScript.shell');”之后立即停止

> ID：16090358
> 
> 赞同：1
> 
> 时间：2013-04-18T18:18:23.783
> 
> 标签：exec, php-5.3, wsh

我正在尝试调试一个巨大的 php 脚本文件，当它到达这一行时

```
$com = new Com('WScript.shell'); 
```

整个脚本就死了并停止工作。我正在使用 Eclipse PDT 进行调试。

我尝试`echo`在该行之前和之后添加 s 并从命令行运行文件

```
php -f "C:/path/file.php" argument 
```

where`argument`只是一个数字，它仍然没有通过这条线！

我是 php 新手，无法进一步调试此错误。有没有办法测试为什么脚本会以这种方式停止？

我正在使用 php 5.3

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:47:32.323

我错过了`php_com_dotnet.dll`插件。我不知道 php 在哪里抛出了错误，所以我知道可以通过`error_log = "C:\php\php_errors.log"`在 php 的`php.ini`文件中添加这一行来配置错误日志。

# sas - 使用SAS，是否可以得到一个不存在数据的频率表？

> ID：16090362
> 
> 赞同：0
> 
> 时间：2013-04-18T18:18:45.533
> 
> 标签：sas, frequency, missing-data

[这是我之前关于 SO](https://stackoverflow.com/questions/16065501/using-r-is-it-possible-to-get-a-frequency-table-where-no-data-exist)的帖子的后续内容。

我正在尝试制作人口统计数据的频率表，包括种族、性别和种族。一张表是一项研究中西班牙裔参与者的性别交叉表。然而，到目前为止，还没有西班牙裔参与者。因此，该表将全为零，但我们仍然必须报告它。

这可以在**R**中完成，但到目前为止，我还没有找到 SAS 的解决方案。示例数据如下。

* * *

```
data race;
input race  eth  sex   ;
cards;
1   2   1
1   2   1
1   2   2
2   2   1
2   2   2
2   2   1
3   2   2
3   2   2
3   2   1
4   2   2
4   2   1
4   2   2
run;

data class;
    do race = 1,2,3,4,5,6,7;
        do eth = 1,2,3;
            do sex = 1,2;
                output;
            end;
        end;
    end;
run;

proc format;

    value   frace   1 = "American Indian / AK Native"
                        2 = "Asian"
                        3 = "Black or African American"
                        4 = "Native Hawiian or Other PI"
                        5 = "White"
                        6 = "More than one race"
                        7 = "Unknown or not reported" ;

    value   feth            1 = "Hispanic or Latino"
                            2 = "Not Hispanic or Latino"
                            3 = "Unknown or Not reported" ;

    value   fsex        1 = "Male"
                        2 = "Female"  ;

run;

*****  ethnicity by sex  ;

proc tabulate data = race missing classdata=class ;
class  race eth sex ;
table eth, sex / misstext = '0' printmiss;
format race frace. eth feth.  sex fsex. ;
run;

*****  race by sex  ;

proc tabulate data = race missing classdata=class ;
class  race eth sex ;
table race, sex / misstext = '0' printmiss;
format race frace. eth feth.  sex fsex. ;
run;

*****  race by sex, for Hispanic only  ;
*****  log indicates that a logical page with only missing values has been deleted ;
*****  Thanks SAS, you're a big help...  ;

proc tabulate data = race missing classdata=class ;
where eth = 1 ;
class  race eth sex ;
table race, sex / misstext = '0' printmiss;
format race frace. eth feth.  sex fsex. ;
run; 
```

* * *

我知道代码真的不能工作，因为我选择 where `eth`is equal to 1 （没有满足条件的案例......）。指定要运行的命令`by eth`也不起作用。

非常感谢任何指导...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:36:18.290

我认为最简单的方法是在具有缺失值的数据中创建一行。您可以查看以下论文以获取有关如何在更大范围内执行此操作的建议：

[http://www.nesug.org/Proceedings/nesug11/pf/pf02.pdf](http://www.nesug.org/Proceedings/nesug11/pf/pf02.pdf)

PROC FREQ 具有 SPARSE 选项，它为您提供表中所有变量的所有可能组合（包括缺失的变量），但它看起来并不能完全满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:59:54.100

看起来我们在 Westat 的好朋友已经解决了这个问题。[此处显示](http://www2.sas.com/proceedings/sugi31/058-31.pdf)了该解决方案的描述。

**为方便起见，代码如下所示，但引用时请引用原文**

* * *

```
PROC FORMAT;
value ethnicf
1 = 'Hispanic or Latino'
2 = 'Not Hispanic or Latino'
3 = 'Unknown (Individuals Not Reporting Ethnicity)';
value racef
1 = 'American Indian or Alaska Native'
2 = 'Asian'
3 = 'Native Hawaiian or Other Pacific Islander'
4 = 'Black or African American'
5 = 'White'
6 = 'More Than One Race'
7 = 'Unknown or Not Reported';
value gndrf
1 = 'Male'
2 = 'Female'
3 = 'Unknown or Not Reported';
RUN;

DATA shelldata;
format ethlbl ethnicf. racelbl racef. gender gndrf.;
    do ethcat = 1 to 2;
        do ethlbl = 1 to 3;
            do racelbl = 1 to 7;
                do gender = 1 to 3;
                output;
                end;
            end;
        end;
    end;
RUN;

DATA test;
input pt $ 1-3 ethlbl gender racelbl ;
cards;
x1 2 1 5
x2 2 1 5
x3 2 1 5
x4 2 1 5
x5 2 1 5
x6 2 2 2
x7 2 2 2
x8 2 2 5
x9 2 2 4
x10 2 2 4
RUN;

DATA enroll;
set test;
if ethlbl = 1 then ethcat = 1;
else ethcat = 2;
format ethlbl ethnicf. racelbl racef. gender gndrf.;
label ethlbl = 'Ethnic Category'
racelbl = 'Racial Categories'
gender = 'Sex/Gender';
RUN;

%MACRO TAB_WHERE;

/* PROC SQL step creates a macro variable whose */
/* value will be the number of observations */
/* meeting WHERE clause criteria. */
PROC SQL noprint;
select count(*)
into :numobs
from enroll
where ethcat=1;
QUIT;

/* PROC FORMAT step to display all numeric values as zero. */
PROC FORMAT;
value allzero low-high='     0';
RUN;

/* Conditionally execute steps when no observations met criteria. */
%if &numobs=0 %then 
    %do;
        %let fmt = allzero.; /* Print all cell values as zeroes */
        %let str = ; /*No Cases in Subset - WHERE cannot be used */
    %end;

%else
    %do;
        %let fmt = 8.0;
        %let str = where ethcat = 1;
    %end;

PROC TABULATE data=enroll classdata=shelldata missing format=&fmt;
&str;
format racelbl racef. gender gndrf.;
class racelbl gender;
classlev racelbl gender;
keyword n pctn all;
tables (racelbl all='Racial Categories: Total of Hispanic or Latinos'),
gender='Sex/Gender'*N=' ' all='Total'*n='' / printmiss misstext='0'
box=[LABEL=' '];
title1 font=arial color=darkblue h=1.5 'Inclusion Enrollment Report';
title2 ' ';
title3 font=arial color=darkblue h=1' PART B. HISPANIC ENROLLMENT REPORT:
Number of Hispanic or Latinos Enrolled to Date (Cumulative)';
RUN;

%MEND TAB_WHERE;

%TAB_WHERE 
```

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:24:57.337

我发现这篇论文信息量很大：

[哦不，零行：5种方法来总结绝对没有](http://www.lexjansen.com/pharmasug/2005/coderscorner/cc22.pdf)

`preloadfmt`proc 中的选项意味着（方法 5）是我最喜欢的。一旦创建了必要的格式，就没有必要添加虚拟数据。奇怪的是，他们还没有将此选项添加到 proc freq。

# php - PHP递归地将ArrayObject转换为关联数组

> ID：16090363
> 
> 赞同：1
> 
> 时间：2013-04-18T18:18:45.740
> 
> 标签：php, oop, recursion, callback, arrayobject

嘿伙计们，我有一个方法应该回调并递归地将一个`Arrayobject`转换为关联数组，不幸的是我遇到了一个致命错误

```
PHP Fatal error:  Call to undefined method ArrayObject::toArray() 
```

这是我的方法

```
/**
 * Take an ArrayObject and recursively turn it into an array
 * 
 * @param bool $recursion
 * 
 * @return array
 */
public function toArray($recursion = false) 
{
    // just in case the object might be multidimensional
    if (true === $this->object) return $this->object->getArrayCopy();

    return array_map( function($item)
    {
        return is_object($item) ? $item->toArray(true) : $item;

    }, $this->object->getArrayCopy() );
} 
```

这是一个示例`ArrayObject`

```
ArrayObject Object
(
    [storage:ArrayObject:private] => Array
        (
            [profile] => ArrayObject Object
                (
                    [storage:ArrayObject:private] => Array
                        (
                            [list] => ArrayObject Object
                                (
                                    [storage:ArrayObject:private] => Array
                                        (
                                            [location] => 
                                            [network_name] => 
                                            [interests] => 
                                            [last_name] => 
                                            [url] => 
                                            [significant_other] => 
                                            [network_domains] => 
                                            [contact] => ArrayObject Object
                                                (
                                                    [storage:ArrayObject:private] => Array
                                                        (
                                                            [im] => ArrayObject Object
                                                                (
                                                                    [storage:ArrayObject:private] => Array
                                                                        (
                                                                            [provider] => 
                                                                        )

                                                                )

                                                            [email_addresses] => 
                                                        )

                                                )

                                        )

                                )

                        )

                )

            [messages] => ArrayObject Object
                (
                    [storage:ArrayObject:private] => Array
                        (
                            [list] => Array
                                (
                                    [0] => foo
                                    [1] => bar
                                    [2] => baz
                                )

                        )

                )

            [groups] => ArrayObject Object
                (
                    [storage:ArrayObject:private] => Array
                        (
                        )

                )

            [users] => ArrayObject Object
                (
                    [storage:ArrayObject:private] => Array
                        (
                        )

                )

        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:10:51.780

这可以正常工作，通过`$this`作为变量传递，我不需要担心与冲突`$this->object`或范围问题。

```
/**
 * Public wrapper for Protected getArray()
 * 
 * @return arrau
 */
public function toArray()
{
    return $this->getArray($this->object);
}

/**
 * Take an ArrayObject and turn it into an associative array
 * 
 * @param ArrayObject $obj
 * 
 * @return array
 */
protected function getArray($obj) 
{
    $array  = array(); // noisy $array does not exist
    $arrObj = is_object($obj) ? get_object_vars($obj) : $obj;
    foreach ($arrObj as $key => $val) {
            $val = (is_array($val) || is_object($val)) ? $this->getArray($val) : $val;
            $array[$key] = $val;
    }
    return $array;
} 
```

# qooxdoo - 生成器作业在对象属性默认值上失败

> ID：16090366
> 
> 赞同：1
> 
> 时间：2013-04-18T18:19:07.900
> 
> 标签：qooxdoo

我有一个我正在尝试更改的 OpenLayers 对象，它的名称为 default 作为它的属性之一。Qooxdoo 生成器脚本不喜欢这样。有没有办法忽略这个错误？

我试过了：

```
/**
 * @ignore default
 */ 
```

这是有问题的对象：

```
vectorLayer.styleMap.styles.default.defaultStyle.fillColor="#FFFFFF" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:54:05.040

default 是 JavaScript 的保留字之一。这些不应该用作标识符，并且生成器强制执行此限制。您可以使用括号表示法解决它：

```
vectorLayer.styleMap.styles["default"].defaultStyle.fillColor="#FFFFFF" 
```

# javascript - 使用 jwplayer 检测视频的结尾？

> ID：16090370
> 
> 赞同：4
> 
> 时间：2013-04-18T18:19:22.403
> 
> 标签：javascript, jwplayer

我将 jwplayer 与他们的 javascript api 一起使用，我正在尝试检测视频何时结束我已经尝试过：

```
onTime: function(event) {
          console.log(this.getDuration());
          console.log(this.getPosition());
          if (this.getPosition() === this.getDuration()) {
            return alert("Im done");
          }
        } 
```

但这会以“我已完成”提示两次，显然这不是检测视频结束的有效方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T19:11:19.840

使用[onComplete(callback)](http://www.longtailvideo.com/support/jw-player/28851/javascript-api-reference)。

```
onComplete: function() {
    return alert("Im done");
} 
```

# max-msp-jitter - Max MSP 每 0.5 秒从读数中检索平均值

> ID：16090371
> 
> 赞同：0
> 
> 时间：2013-04-18T18:19:22.677
> 
> 标签：max-msp-jitter

在我的最大补丁中，我有一个运动传感器，它链接到一个数字框，赋予它的价值。我希望这个读数能影响我最大补丁周围的其他事情，但它太敏感了。我如何平均每 0.5 秒 2 点之间的读数？抱歉，这真的很难解释......非常感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:04:49.283

这就是我使用的：

```
----------begin_max5_patcher----------
528.3ocyVtsaaCCCF9Z6mBAcc1fkZbNLra1ywvPgrMahBrkLjj6xZQe2mDsc
Nr5t3FuTrabfHoo94mHkyywQzL8dvRIeg7cRTzywQQnofgnt0QzJw97RgECi
lqqp.kiNq0mC16P6ekXAkUaHRUcyA2xBzoNa2mXI8FePqbJQEft9lQJJO3wr
IKXM4yImDqU9DFKievrpoRpJAGpIVmwZC30fS3jZ08FH20VW7zE92irLjTR+
CxONlIciqOU84uV3x2JUaNKMqOllUXJ4XhBuwKwwgGylLDEE6ZrNhaK3AoCL
05RrdHNoGXulpqu0Pcz74NVZfIrDF9ypzIQH+1lAlAJ3kWtfqEFucO7tGThr
R3Tg2VKteUCsplJCGCDZlPsgdno35AD+hMPc.JMYR74gRseiGfOo+i4ieiDS
jPu0bYxbDAr0iXv7uw0DNlG9Mkqy++iquWB0d00DAjB9oGGu5lqJPnFfZ7KS
s2lLgQyODvvVgLYN6VPlmJIVmADUj6RF5yhWAgBv48QF90RlVlrb3O2gRfVJ
U+4eg.SXv943xpaL48EQ2k4jiS7Ef0IU30DmDiGPD1gX1JKJ.0oSVERaXXCI
ZxfGaiUM7Qnlzyh4VpF1HTC+CSMyG4I00nl11HQc8ifw1kRTH94qcZSX4hY3
RopcINnSMvix93wVYpv36ic9l3FS6bz9UKnwg84k3eycJxnw
-----------end_max5_patcher----------- 
```

根据从传感器获得的每秒更新量，您可以调整在 zl 流对象上缓冲的帧数。

希望有帮助，马蒂斯

# php - PDO 连接到网络上的 .accdb

> ID：16090374
> 
> 赞同：0
> 
> 时间：2013-04-18T18:19:29.493
> 
> 标签：php, ms-access, pdo

我有一个访问数据库，我想用 PDO 进行 CRUD。当我的数据库存储在`C:\\wamp\\www\\test.accdb`我可以连接时。但是，我感兴趣的数据库存储在我们的办公服务器上，位于`\\server1\abc\123\test.accdb`. \server1 映射到我计算机上的驱动器 z:\。

我的代码看起来像这样（逐字）

```
<?php
//attempt 1
$file = "\\server1\\abc\\123\\test.accdb";
$dbh = new PDO("odbc:Driver={Microsoft Access Driver (*.mdb , *.accdb)};Dbq=$file");

//attempt 2    
$file = "Z:\\abc\123\\test.accdb";
$dbh = new PDO("odbc:Driver={Microsoft Access Driver (*.mdb , *.accdb)};Dbq=$file");
?> 
```

这两个都给我错误：

> SQLSTATE[HY024] SQLDriverConnect: -1023 [Microsoft][ODBC Microsoft Access Driver] '(unknown)' 不是有效路径。确保路径名拼写正确并且您已连接到文件所在的服务器。

我确实连接到服务器。这里有没有人有一些智慧可以分享？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:41:52.763

作为诊断检查，尝试使用与调用 PDO 脚本相同的机制来调用以下脚本：

```
<?php
$file = "\\\\server1\\abc\\123\\test.accdb";
if (is_file($file)) {
    echo "File exists.\r\n";
}
else {
    echo "File does not exist.\r\n";
} 
```

这将测试是否允许运行脚本的帐户访问网络并“查看”远程服务器上的文件。如果失败，请检查该帐户的 Windows 权限。

作为进一步的测试，您可以尝试使用您的常规用户帐户从 Windows 命令行运行相同的脚本（可能*确实*具有访问网络的足够权限）。

# r - 使用 R 和 ggplot2 向 2Dplots 添加注释

> ID：16090375
> 
> 赞同：0
> 
> 时间：2013-04-18T18:19:33.887
> 
> 标签：r, ggplot2, annotate

我希望通过添加带有标记区域的框和穿过 x 和 y 轴的截距来指定该图中的区域，我使用 ggplot2 为数据生成了这些区域在[此处输入链接描述](https://docs.google.com/file/d/0Bwgt7uKh7xKUTTRQTW9nRGZnZWc/edit?usp=sharing)

```
p <- ggplot(data, aes(Res1,Res2,fill=Val)) +
  geom_tile() + 
  scale_fill_gradient(low="white", high="blue") +
  theme_bw() + 
  labs(x="Residue", y="Residue") +
  theme(axis.text.y = element_text(face="bold",size=11), 
        panel.background = element_blank(), 
        legend.position="bottom", 
        axis.title=element_text(face="bold",size=14), 
        axis.ticks=element_blank(), 
        panel.grid.minor=element_blank(), 
        panel.grid.major=element_blank(), 
        axis.text.x = element_text(face="bold",size=11)) + 
  scale_colour_hue(l=40) + 
  scale_x_continuous(expand=c(0,0)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/wg9uQ.png)

区域为 [1:5=M1; 6:11=M2；12:15=M3；16:30=M4] I. 一种方法是在我尝试使用 geom_rect 命令的轴的末尾添加块，但我总是发现一个或其他错误。我尝试了以下方法：

```
Df <- data.frame(x1=c(1,6,12,16), 
                 x2=c(5,11,15,30), 
                 t=c("M1", "M2", "M3", "M4"))
p +  geom_rect(data=Df, 
               aes(xmin=x1,xmax=x2,ymax=1,ymin=2,fill=t)) + 
  scale_fill_manual(values=c("red", "blue", "green", "black")) 
```

我收到如下错误：如果我尝试更改比例，则将连续缩放为离散，反之亦然。如果我将 Df 中的 y1,y2 值指定为 y1=c(1,1,1,1) 和 y2=c(2,2,2,2)。我收到以下错误：美学长度必须为 1，或与 dataProblems 长度相同。我可能对 geom_rect 做错了，因为这是我第一次使用。我希望在 x 轴的末尾指定框（如果低于 y=1，它会更好，因为它不会隐藏实际的图）和 y2 轴的右侧，然后绘制 xintercept 和 yintercept。

二、如果我暂时忘记 geom_rect 并尝试使用截距作为标记，例如以下代码：

```
p <- ggplot(data=mydata, aes(Res1,Res2,fill=Val)) + 
  geom_tile() + 
  scale_fill_gradient2(low="red", high="blue") + 
  theme_bw() +
  labs(x="Residue", y="Residue") +
  theme(axis.text.y = element_text(face="bold",size=11), 
        panel.background =element_blank(), 
        legend.position="bottom", 
        axis.title=element_text(face="bold",size=14), 
        axis.ticks=element_blank(), 
        panel.grid.minor=element_blank(), 
        panel.grid.major=element_blank(),
        axis.text.x = element_text(face="bold",size=11)) + 
  scale_colour_hue(l=40)  +
  scale_x_continuous(expand=c(0,0)) + 
  scale_y_continuous(expand=c(0,0)) +
  geom_vline(aes(xintercept=Dom1), linetype="solid", colour="black", size=0.7)+
  geom_hline(aes(yintercept=Dom2), linetype="solid", colour="black", size=0.7) 
```

我收到错误消息：错误：提供给连续刻度的离散值。我知道我在这里遗漏了一些东西。但我看不到什么。我对 R 的了解不是很好，但我喜欢它的分析和绘图，并希望发现更多。可能还有其他更简单的方法来绘制此类图。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:55:24.680

我会内联你的数据

```
data <- read.csv(text=
"Dom1,Res1,Dom2,Res2,Val
M1,1,M1,1,1
M1,1,M1,2,0.96978
M1,1,M1,3,0.961
M1,1,M1,4,0.95495
M1,1,M1,5,0.9525
M1,1,M2,6,0.94745
M1,1,M2,7,0.9439
M1,1,M2,8,0.93963
M1,1,M2,9,0.92747
M1,1,M2,10,0.93275
M1,1,M2,11,0.93267
M1,1,M3,12,0.91837
M1,1,M3,13,0.90537
M1,1,M3,14,0.90913
M1,1,M3,15,0.8998
M1,1,M4,16,0.86228
M1,1,M4,17,0.82022
M1,1,M4,18,0.81726
M1,1,M4,19,0.74939
M1,1,M4,20,0.70877
M1,1,M4,21,0.69285
M1,1,M4,22,0.76588
M1,1,M4,23,0.80563
M1,1,M4,24,0.86017
M1,1,M4,25,0.88171
M1,1,M4,26,0.91169
M1,1,M4,27,0.91854
M1,1,M4,28,0.92305
M1,1,M4,29,0.91976
M1,1,M4,30,0.89547
M1,2,M1,1,0.96978
M1,2,M1,2,1
M1,2,M1,3,0.98903
M1,2,M1,4,0.98303
M1,2,M1,5,0.98538
M1,2,M2,6,0.97958
M1,2,M2,7,0.96968
M1,2,M2,8,0.96762
M1,2,M2,9,0.95869
M1,2,M2,10,0.95757
M1,2,M2,11,0.95369
M1,2,M3,12,0.94539
M1,2,M3,13,0.93139
M1,2,M3,14,0.9261
M1,2,M3,15,0.9172
M1,2,M4,16,0.87634
M1,2,M4,17,0.83872
M1,2,M4,18,0.84047
M1,2,M4,19,0.77153
M1,2,M4,20,0.7397
M1,2,M4,21,0.7247
M1,2,M4,22,0.79714
M1,2,M4,23,0.84296
M1,2,M4,24,0.89441
M1,2,M4,25,0.91888
M1,2,M4,26,0.94585
M1,2,M4,27,0.95228
M1,2,M4,28,0.96027
M1,2,M4,29,0.95493
M1,2,M4,30,0.94091
M1,3,M1,1,0.961
M1,3,M1,2,0.98903
M1,3,M1,3,1
M1,3,M1,4,0.99413
M1,3,M1,5,0.98892
M1,3,M2,6,0.9895
M1,3,M2,7,0.98794
M1,3,M2,8,0.98202
M1,3,M2,9,0.9704
M1,3,M2,10,0.97422
M1,3,M2,11,0.97159
M1,3,M3,12,0.95773
M1,3,M3,13,0.9439
M1,3,M3,14,0.94324
M1,3,M3,15,0.93204
M1,3,M4,16,0.88796
M1,3,M4,17,0.84515
M1,3,M4,18,0.84437
M1,3,M4,19,0.77076
M1,3,M4,20,0.73403
M1,3,M4,21,0.71655
M1,3,M4,22,0.79334
M1,3,M4,23,0.83953
M1,3,M4,24,0.89654
M1,3,M4,25,0.92172
M1,3,M4,26,0.95241
M1,3,M4,27,0.96009
M1,3,M4,28,0.96823
M1,3,M4,29,0.96464
M1,3,M4,30,0.94389
M1,4,M1,1,0.95495
M1,4,M1,2,0.98303
M1,4,M1,3,0.99413
M1,4,M1,4,1
M1,4,M1,5,0.99329
M1,4,M2,6,0.98668
M1,4,M2,7,0.99031
M1,4,M2,8,0.98878
M1,4,M2,9,0.97758
M1,4,M2,10,0.98115
M1,4,M2,11,0.98042
M1,4,M3,12,0.96877
M1,4,M3,13,0.95534
M1,4,M3,14,0.95546
M1,4,M3,15,0.94651
M1,4,M4,16,0.90653
M1,4,M4,17,0.86694
M1,4,M4,18,0.8655
M1,4,M4,19,0.79593
M1,4,M4,20,0.75875
M1,4,M4,21,0.74233
M1,4,M4,22,0.81732
M1,4,M4,23,0.85983
M1,4,M4,24,0.91437
M1,4,M4,25,0.93693
M1,4,M4,26,0.96472
M1,4,M4,27,0.97103
M1,4,M4,28,0.97578
M1,4,M4,29,0.97189
M1,4,M4,30,0.95132
M1,5,M1,1,0.9525
M1,5,M1,2,0.98538
M1,5,M1,3,0.98892
M1,5,M1,4,0.99329
M1,5,M1,5,1
M1,5,M2,6,0.9935
M1,5,M2,7,0.98689
M1,5,M2,8,0.98966
M1,5,M2,9,0.98515
M1,5,M2,10,0.98223
M1,5,M2,11,0.97775
M1,5,M3,12,0.97485
M1,5,M3,13,0.96356
M1,5,M3,14,0.95521
M1,5,M3,15,0.94754
M1,5,M4,16,0.90973
M1,5,M4,17,0.87846
M1,5,M4,18,0.88207
M1,5,M4,19,0.81775
M1,5,M4,20,0.78753
M1,5,M4,21,0.77318
M1,5,M4,22,0.84131
M1,5,M4,23,0.8833
M1,5,M4,24,0.92981
M1,5,M4,25,0.9501
M1,5,M4,26,0.9716
M1,5,M4,27,0.97375
M1,5,M4,28,0.97814
M1,5,M4,29,0.96984
M1,5,M4,30,0.95995
M2,6,M1,1,0.94745
M2,6,M1,2,0.97958
M2,6,M1,3,0.9895
M2,6,M1,4,0.98668
M2,6,M1,5,0.9935
M2,6,M2,6,1
M2,6,M2,7,0.99306
M2,6,M2,8,0.99169
M2,6,M2,9,0.98767
M2,6,M2,10,0.9865
M2,6,M2,11,0.9804
M2,6,M3,12,0.97537
M2,6,M3,13,0.96499
M2,6,M3,14,0.9568
M2,6,M3,15,0.9467
M2,6,M4,16,0.90541
M2,6,M4,17,0.8711
M2,6,M4,18,0.87525
M2,6,M4,19,0.80727
M2,6,M4,20,0.77667
M2,6,M4,21,0.76068
M2,6,M4,22,0.83033
M2,6,M4,23,0.87392
M2,6,M4,24,0.92271
M2,6,M4,25,0.9437
M2,6,M4,26,0.96695
M2,6,M4,27,0.96902
M2,6,M4,28,0.97511
M2,6,M4,29,0.96654
M2,6,M4,30,0.95583
M2,7,M1,1,0.9439
M2,7,M1,2,0.96968
M2,7,M1,3,0.98794
M2,7,M1,4,0.99031
M2,7,M1,5,0.98689
M2,7,M2,6,0.99306
M2,7,M2,7,1
M2,7,M2,8,0.99596
M2,7,M2,9,0.98631
M2,7,M2,10,0.99185
M2,7,M2,11,0.99026
M2,7,M3,12,0.97789
M2,7,M3,13,0.96633
M2,7,M3,14,0.96697
M2,7,M3,15,0.95647
M2,7,M4,16,0.91496
M2,7,M4,17,0.87383
M2,7,M4,18,0.87323
M2,7,M4,19,0.80191
M2,7,M4,20,0.76401
M2,7,M4,21,0.74644
M2,7,M4,22,0.82167
M2,7,M4,23,0.86321
M2,7,M4,24,0.9184
M2,7,M4,25,0.93946
M2,7,M4,26,0.96688
M2,7,M4,27,0.97145
M2,7,M4,28,0.97573
M2,7,M4,29,0.97072
M2,7,M4,30,0.94998
M2,8,M1,1,0.93963
M2,8,M1,2,0.96762
M2,8,M1,3,0.98202
M2,8,M1,4,0.98878
M2,8,M1,5,0.98966
M2,8,M2,6,0.99169
M2,8,M2,7,0.99596
M2,8,M2,8,1
M2,8,M2,9,0.99523
M2,8,M2,10,0.99574
M2,8,M2,11,0.99373
M2,8,M3,12,0.99001
M2,8,M3,13,0.97997
M2,8,M3,14,0.97528
M2,8,M3,15,0.96843
M2,8,M4,16,0.93284
M2,8,M4,17,0.90178
M2,8,M4,18,0.90388
M2,8,M4,19,0.841
M2,8,M4,20,0.80839
M2,8,M4,21,0.79371
M2,8,M4,22,0.86173
M2,8,M4,23,0.89918
M2,8,M4,24,0.94565
M2,8,M4,25,0.96259
M2,8,M4,26,0.98234
M2,8,M4,27,0.98276
M2,8,M4,28,0.98332
M2,8,M4,29,0.97506
M2,8,M4,30,0.96287
M2,9,M1,1,0.92747
M2,9,M1,2,0.95869
M2,9,M1,3,0.9704
M2,9,M1,4,0.97758
M2,9,M1,5,0.98515
M2,9,M2,6,0.98767
M2,9,M2,7,0.98631
M2,9,M2,8,0.99523
M2,9,M2,9,1
M2,9,M2,10,0.99509
M2,9,M2,11,0.98827
M2,9,M3,12,0.99414
M2,9,M3,13,0.98894
M2,9,M3,14,0.97556
M2,9,M3,15,0.96971
M2,9,M4,16,0.93824
M2,9,M4,17,0.91811
M2,9,M4,18,0.92493
M2,9,M4,19,0.86931
M2,9,M4,20,0.84365
M2,9,M4,21,0.83023
M2,9,M4,22,0.88902
M2,9,M4,23,0.92319
M2,9,M4,24,0.95974
M2,9,M4,25,0.97195
M2,9,M4,26,0.98335
M2,9,M4,27,0.97789
M2,9,M4,28,0.97676
M2,9,M4,29,0.96309
M2,9,M4,30,0.96077
M2,10,M1,1,0.93275
M2,10,M1,2,0.95757
M2,10,M1,3,0.97422
M2,10,M1,4,0.98115
M2,10,M1,5,0.98223
M2,10,M2,6,0.9865
M2,10,M2,7,0.99185
M2,10,M2,8,0.99574
M2,10,M2,9,0.99509
M2,10,M2,10,1
M2,10,M2,11,0.99688
M2,10,M3,12,0.99342
M2,10,M3,13,0.98857
M2,10,M3,14,0.98596
M2,10,M3,15,0.97828
M2,10,M4,16,0.94678
M2,10,M4,17,0.91647
M2,10,M4,18,0.91665
M2,10,M4,19,0.85547
M2,10,M4,20,0.82011
M2,10,M4,21,0.80339
M2,10,M4,22,0.8691
M2,10,M4,23,0.90119
M2,10,M4,24,0.94588
M2,10,M4,25,0.95783
M2,10,M4,26,0.97557
M2,10,M4,27,0.9725
M2,10,M4,28,0.9704
M2,10,M4,29,0.9598
M2,10,M4,30,0.94594
M2,11,M1,1,0.93267
M2,11,M1,2,0.95369
M2,11,M1,3,0.97159
M2,11,M1,4,0.98042
M2,11,M1,5,0.97775
M2,11,M2,6,0.9804
M2,11,M2,7,0.99026
M2,11,M2,8,0.99373
M2,11,M2,9,0.98827
M2,11,M2,10,0.99688
M2,11,M2,11,1
M2,11,M3,12,0.99232
M2,11,M3,13,0.98524
M2,11,M3,14,0.99025
M2,11,M3,15,0.98449
M2,11,M4,16,0.95538
M2,11,M4,17,0.92026
M2,11,M4,18,0.9161
M2,11,M4,19,0.85421
M2,11,M4,20,0.81338
M2,11,M4,21,0.79707
M2,11,M4,22,0.86638
M2,11,M4,23,0.89584
M2,11,M4,24,0.944
M2,11,M4,25,0.95543
M2,11,M4,26,0.97567
M2,11,M4,27,0.97457
M2,11,M4,28,0.96988
M2,11,M4,29,0.96203
M2,11,M4,30,0.94264
M3,12,M1,1,0.91837
M3,12,M1,2,0.94539
M3,12,M1,3,0.95773
M3,12,M1,4,0.96877
M3,12,M1,5,0.97485
M3,12,M2,6,0.97537
M3,12,M2,7,0.97789
M3,12,M2,8,0.99001
M3,12,M2,9,0.99414
M3,12,M2,10,0.99342
M3,12,M2,11,0.99232
M3,12,M3,12,1
M3,12,M3,13,0.99641
M3,12,M3,14,0.98901
M3,12,M3,15,0.98706
M3,12,M4,16,0.96429
M3,12,M4,17,0.94535
M3,12,M4,18,0.94785
M3,12,M4,19,0.8978
M3,12,M4,20,0.86789
M3,12,M4,21,0.8554
M3,12,M4,22,0.91214
M3,12,M4,23,0.93765
M3,12,M4,24,0.97157
M3,12,M4,25,0.97767
M3,12,M4,26,0.98592
M3,12,M4,27,0.97795
M3,12,M4,28,0.97018
M3,12,M4,29,0.95611
M3,12,M4,30,0.95205
M3,13,M1,1,0.90537
M3,13,M1,2,0.93139
M3,13,M1,3,0.9439
M3,13,M1,4,0.95534
M3,13,M1,5,0.96356
M3,13,M2,6,0.96499
M3,13,M2,7,0.96633
M3,13,M2,8,0.97997
M3,13,M2,9,0.98894
M3,13,M2,10,0.98857
M3,13,M2,11,0.98524
M3,13,M3,12,0.99641
M3,13,M3,13,1
M3,13,M3,14,0.99048
M3,13,M3,15,0.98738
M3,13,M4,16,0.96857
M3,13,M4,17,0.95385
M3,13,M4,18,0.95585
M3,13,M4,19,0.90949
M3,13,M4,20,0.88043
M3,13,M4,21,0.86682
M3,13,M4,22,0.91879
M3,13,M4,23,0.94
M3,13,M4,24,0.96954
M3,13,M4,25,0.97128
M3,13,M4,26,0.97571
M3,13,M4,27,0.9638
M3,13,M4,28,0.95421
M3,13,M4,29,0.93712
M3,13,M4,30,0.93551
M3,14,M1,1,0.90913
M3,14,M1,2,0.9261
M3,14,M1,3,0.94324
M3,14,M1,4,0.95546
M3,14,M1,5,0.95521
M3,14,M2,6,0.9568
M3,14,M2,7,0.96697
M3,14,M2,8,0.97528
M3,14,M2,9,0.97556
M3,14,M2,10,0.98596
M3,14,M2,11,0.99025
M3,14,M3,12,0.98901
M3,14,M3,13,0.99048
M3,14,M3,14,1
M3,14,M3,15,0.9956
M3,14,M4,16,0.97773
M3,14,M4,17,0.94934
M3,14,M4,18,0.94178
M3,14,M4,19,0.88907
M3,14,M4,20,0.8468
M3,14,M4,21,0.83041
M3,14,M4,22,0.89185
M3,14,M4,23,0.90976
M3,14,M4,24,0.94992
M3,14,M4,25,0.95151
M3,14,M4,26,0.96424
M3,14,M4,27,0.95644
M3,14,M4,28,0.94461
M3,14,M4,29,0.93261
M3,14,M4,30,0.91578
M3,15,M1,1,0.8998
M3,15,M1,2,0.9172
M3,15,M1,3,0.93204
M3,15,M1,4,0.94651
M3,15,M1,5,0.94754
M3,15,M2,6,0.9467
M3,15,M2,7,0.95647
M3,15,M2,8,0.96843
M3,15,M2,9,0.96971
M3,15,M2,10,0.97828
M3,15,M2,11,0.98449
M3,15,M3,12,0.98706
M3,15,M3,13,0.98738
M3,15,M3,14,0.9956
M3,15,M3,15,1
M3,15,M4,16,0.98866
M3,15,M4,17,0.96347
M3,15,M4,18,0.9556
M3,15,M4,19,0.90871
M3,15,M4,20,0.86702
M3,15,M4,21,0.85323
M3,15,M4,22,0.91121
M3,15,M4,23,0.92495
M3,15,M4,24,0.96045
M3,15,M4,25,0.95922
M3,15,M4,26,0.96765
M3,15,M4,27,0.95831
M3,15,M4,28,0.94274
M3,15,M4,29,0.93018
M3,15,M4,30,0.91711
M4,16,M1,1,0.86228
M4,16,M1,2,0.87634
M4,16,M1,3,0.88796
M4,16,M1,4,0.90653
M4,16,M1,5,0.90973
M4,16,M2,6,0.90541
M4,16,M2,7,0.91496
M4,16,M2,8,0.93284
M4,16,M2,9,0.93824
M4,16,M2,10,0.94678
M4,16,M2,11,0.95538
M4,16,M3,12,0.96429
M4,16,M3,13,0.96857
M4,16,M3,14,0.97773
M4,16,M3,15,0.98866
M4,16,M4,16,1
M4,16,M4,17,0.98408
M4,16,M4,18,0.96932
M4,16,M4,19,0.93492
M4,16,M4,20,0.8919
M4,16,M4,21,0.87955
M4,16,M4,22,0.92844
M4,16,M4,23,0.92968
M4,16,M4,24,0.95523
M4,16,M4,25,0.94458
M4,16,M4,26,0.94434
M4,16,M4,27,0.92923
M4,16,M4,28,0.90579
M4,16,M4,29,0.89019
M4,16,M4,30,0.88223
M4,17,M1,1,0.82022
M4,17,M1,2,0.83872
M4,17,M1,3,0.84515
M4,17,M1,4,0.86694
M4,17,M1,5,0.87846
M4,17,M2,6,0.8711
M4,17,M2,7,0.87383
M4,17,M2,8,0.90178
M4,17,M2,9,0.91811
M4,17,M2,10,0.91647
M4,17,M2,11,0.92026
M4,17,M3,12,0.94535
M4,17,M3,13,0.95385
M4,17,M3,14,0.94934
M4,17,M3,15,0.96347
M4,17,M4,16,0.98408
M4,17,M4,17,1
M4,17,M4,18,0.99011
M4,17,M4,19,0.9725
M4,17,M4,20,0.94278
M4,17,M4,21,0.9338
M4,17,M4,22,0.96488
M4,17,M4,23,0.95881
M4,17,M4,24,0.96509
M4,17,M4,25,0.94652
M4,17,M4,26,0.93044
M4,17,M4,27,0.90666
M4,17,M4,28,0.87884
M4,17,M4,29,0.85584
M4,17,M4,30,0.86649
M4,18,M1,1,0.81726
M4,18,M1,2,0.84047
M4,18,M1,3,0.84437
M4,18,M1,4,0.8655
M4,18,M1,5,0.88207
M4,18,M2,6,0.87525
M4,18,M2,7,0.87323
M4,18,M2,8,0.90388
M4,18,M2,9,0.92493
M4,18,M2,10,0.91665
M4,18,M2,11,0.9161
M4,18,M3,12,0.94785
M4,18,M3,13,0.95585
M4,18,M3,14,0.94178
M4,18,M3,15,0.9556
M4,18,M4,16,0.96932
M4,18,M4,17,0.99011
M4,18,M4,18,1
M4,18,M4,19,0.98495
M4,18,M4,20,0.96178
M4,18,M4,21,0.95605
M4,18,M4,22,0.98137
M4,18,M4,23,0.9775
M4,18,M4,24,0.9773
M4,18,M4,25,0.95858
M4,18,M4,26,0.93733
M4,18,M4,27,0.91134
M4,18,M4,28,0.88493
M4,18,M4,29,0.85915
M4,18,M4,30,0.8772
M4,19,M1,1,0.74939
M4,19,M1,2,0.77153
M4,19,M1,3,0.77076
M4,19,M1,4,0.79593
M4,19,M1,5,0.81775
M4,19,M2,6,0.80727
M4,19,M2,7,0.80191
M4,19,M2,8,0.841
M4,19,M2,9,0.86931
M4,19,M2,10,0.85547
M4,19,M2,11,0.85421
M4,19,M3,12,0.8978
M4,19,M3,13,0.90949
M4,19,M3,14,0.88907
M4,19,M3,15,0.90871
M4,19,M4,16,0.93492
M4,19,M4,17,0.9725
M4,19,M4,18,0.98495
M4,19,M4,19,1
M4,19,M4,20,0.98667
M4,19,M4,21,0.98027
M4,19,M4,22,0.98592
M4,19,M4,23,0.96974
M4,19,M4,24,0.95275
M4,19,M4,25,0.925
M4,19,M4,26,0.89054
M4,19,M4,27,0.85738
M4,19,M4,28,0.82441
M4,19,M4,29,0.79389
M4,19,M4,30,0.82522
M4,20,M1,1,0.70877
M4,20,M1,2,0.7397
M4,20,M1,3,0.73403
M4,20,M1,4,0.75875
M4,20,M1,5,0.78753
M4,20,M2,6,0.77667
M4,20,M2,7,0.76401
M4,20,M2,8,0.80839
M4,20,M2,9,0.84365
M4,20,M2,10,0.82011
M4,20,M2,11,0.81338
M4,20,M3,12,0.86789
M4,20,M3,13,0.88043
M4,20,M3,14,0.8468
M4,20,M3,15,0.86702
M4,20,M4,16,0.8919
M4,20,M4,17,0.94278
M4,20,M4,18,0.96178
M4,20,M4,19,0.98667
M4,20,M4,20,1
M4,20,M4,21,0.99181
M4,20,M4,22,0.98307
M4,20,M4,23,0.96908
M4,20,M4,24,0.94001
M4,20,M4,25,0.91142
M4,20,M4,26,0.86788
M4,20,M4,27,0.83072
M4,20,M4,28,0.79916
M4,20,M4,29,0.76409
M4,20,M4,30,0.81011
M4,21,M1,1,0.69285
M4,21,M1,2,0.7247
M4,21,M1,3,0.71655
M4,21,M1,4,0.74233
M4,21,M1,5,0.77318
M4,21,M2,6,0.76068
M4,21,M2,7,0.74644
M4,21,M2,8,0.79371
M4,21,M2,9,0.83023
M4,21,M2,10,0.80339
M4,21,M2,11,0.79707
M4,21,M3,12,0.8554
M4,21,M3,13,0.86682
M4,21,M3,14,0.83041
M4,21,M3,15,0.85323
M4,21,M4,16,0.87955
M4,21,M4,17,0.9338
M4,21,M4,18,0.95605
M4,21,M4,19,0.98027
M4,21,M4,20,0.99181
M4,21,M4,21,1
M4,21,M4,22,0.98879
M4,21,M4,23,0.97357
M4,21,M4,24,0.93962
M4,21,M4,25,0.91034
M4,21,M4,26,0.86294
M4,21,M4,27,0.8256
M4,21,M4,28,0.79203
M4,21,M4,29,0.75696
M4,21,M4,30,0.80857
M4,22,M1,1,0.76588
M4,22,M1,2,0.79714
M4,22,M1,3,0.79334
M4,22,M1,4,0.81732
M4,22,M1,5,0.84131
M4,22,M2,6,0.83033
M4,22,M2,7,0.82167
M4,22,M2,8,0.86173
M4,22,M2,9,0.88902
M4,22,M2,10,0.8691
M4,22,M2,11,0.86638
M4,22,M3,12,0.91214
M4,22,M3,13,0.91879
M4,22,M3,14,0.89185
M4,22,M3,15,0.91121
M4,22,M4,16,0.92844
M4,22,M4,17,0.96488
M4,22,M4,18,0.98137
M4,22,M4,19,0.98592
M4,22,M4,20,0.98307
M4,22,M4,21,0.98879
M4,22,M4,22,1
M4,22,M4,23,0.99289
M4,22,M4,24,0.9754
M4,22,M4,25,0.95364
M4,22,M4,26,0.91924
M4,22,M4,27,0.88961
M4,22,M4,28,0.85966
M4,22,M4,29,0.83075
M4,22,M4,30,0.86816
M4,23,M1,1,0.80563
M4,23,M1,2,0.84296
M4,23,M1,3,0.83953
M4,23,M1,4,0.85983
M4,23,M1,5,0.8833
M4,23,M2,6,0.87392
M4,23,M2,7,0.86321
M4,23,M2,8,0.89918
M4,23,M2,9,0.92319
M4,23,M2,10,0.90119
M4,23,M2,11,0.89584
M4,23,M3,12,0.93765
M4,23,M3,13,0.94
M4,23,M3,14,0.90976
M4,23,M3,15,0.92495
M4,23,M4,16,0.92968
M4,23,M4,17,0.95881
M4,23,M4,18,0.9775
M4,23,M4,19,0.96974
M4,23,M4,20,0.96908
M4,23,M4,21,0.97357
M4,23,M4,22,0.99289
M4,23,M4,23,1
M4,23,M4,24,0.99022
M4,23,M4,25,0.97749
M4,23,M4,26,0.94989
M4,23,M4,27,0.92555
M4,23,M4,28,0.90302
M4,23,M4,29,0.87667
M4,23,M4,30,0.91216
M4,24,M1,1,0.86017
M4,24,M1,2,0.89441
M4,24,M1,3,0.89654
M4,24,M1,4,0.91437
M4,24,M1,5,0.92981
M4,24,M2,6,0.92271
M4,24,M2,7,0.9184
M4,24,M2,8,0.94565
M4,24,M2,9,0.95974
M4,24,M2,10,0.94588
M4,24,M2,11,0.944
M4,24,M3,12,0.97157
M4,24,M3,13,0.96954
M4,24,M3,14,0.94992
M4,24,M3,15,0.96045
M4,24,M4,16,0.95523
M4,24,M4,17,0.96509
M4,24,M4,18,0.9773
M4,24,M4,19,0.95275
M4,24,M4,20,0.94001
M4,24,M4,21,0.93962
M4,24,M4,22,0.9754
M4,24,M4,23,0.99022
M4,24,M4,24,1
M4,24,M4,25,0.99504
M4,24,M4,26,0.98122
M4,24,M4,27,0.96475
M4,24,M4,28,0.94675
M4,24,M4,29,0.92681
M4,24,M4,30,0.94628
M4,25,M1,1,0.88171
M4,25,M1,2,0.91888
M4,25,M1,3,0.92172
M4,25,M1,4,0.93693
M4,25,M1,5,0.9501
M4,25,M2,6,0.9437
M4,25,M2,7,0.93946
M4,25,M2,8,0.96259
M4,25,M2,9,0.97195
M4,25,M2,10,0.95783
M4,25,M2,11,0.95543
M4,25,M3,12,0.97767
M4,25,M3,13,0.97128
M4,25,M3,14,0.95151
M4,25,M3,15,0.95922
M4,25,M4,16,0.94458
M4,25,M4,17,0.94652
M4,25,M4,18,0.95858
M4,25,M4,19,0.925
M4,25,M4,20,0.91142
M4,25,M4,21,0.91034
M4,25,M4,22,0.95364
M4,25,M4,23,0.97749
M4,25,M4,24,0.99504
M4,25,M4,25,1
M4,25,M4,26,0.993
M4,25,M4,27,0.98199
M4,25,M4,28,0.96948
M4,25,M4,29,0.95317
M4,25,M4,30,0.9689
M4,26,M1,1,0.91169
M4,26,M1,2,0.94585
M4,26,M1,3,0.95241
M4,26,M1,4,0.96472
M4,26,M1,5,0.9716
M4,26,M2,6,0.96695
M4,26,M2,7,0.96688
M4,26,M2,8,0.98234
M4,26,M2,9,0.98335
M4,26,M2,10,0.97557
M4,26,M2,11,0.97567
M4,26,M3,12,0.98592
M4,26,M3,13,0.97571
M4,26,M3,14,0.96424
M4,26,M3,15,0.96765
M4,26,M4,16,0.94434
M4,26,M4,17,0.93044
M4,26,M4,18,0.93733
M4,26,M4,19,0.89054
M4,26,M4,20,0.86788
M4,26,M4,21,0.86294
M4,26,M4,22,0.91924
M4,26,M4,23,0.94989
M4,26,M4,24,0.98122
M4,26,M4,25,0.993
M4,26,M4,26,1
M4,26,M4,27,0.99621
M4,26,M4,28,0.98854
M4,26,M4,29,0.97795
M4,26,M4,30,0.98088
M4,27,M1,1,0.91854
M4,27,M1,2,0.95228
M4,27,M1,3,0.96009
M4,27,M1,4,0.97103
M4,27,M1,5,0.97375
M4,27,M2,6,0.96902
M4,27,M2,7,0.97145
M4,27,M2,8,0.98276
M4,27,M2,9,0.97789
M4,27,M2,10,0.9725
M4,27,M2,11,0.97457
M4,27,M3,12,0.97795
M4,27,M3,13,0.9638
M4,27,M3,14,0.95644
M4,27,M3,15,0.95831
M4,27,M4,16,0.92923
M4,27,M4,17,0.90666
M4,27,M4,18,0.91134
M4,27,M4,19,0.85738
M4,27,M4,20,0.83072
M4,27,M4,21,0.8256
M4,27,M4,22,0.88961
M4,27,M4,23,0.92555
M4,27,M4,24,0.96475
M4,27,M4,25,0.98199
M4,27,M4,26,0.99621
M4,27,M4,27,1
M4,27,M4,28,0.99535
M4,27,M4,29,0.99029
M4,27,M4,30,0.98643
M4,28,M1,1,0.92305
M4,28,M1,2,0.96027
M4,28,M1,3,0.96823
M4,28,M1,4,0.97578
M4,28,M1,5,0.97814
M4,28,M2,6,0.97511
M4,28,M2,7,0.97573
M4,28,M2,8,0.98332
M4,28,M2,9,0.97676
M4,28,M2,10,0.9704
M4,28,M2,11,0.96988
M4,28,M3,12,0.97018
M4,28,M3,13,0.95421
M4,28,M3,14,0.94461
M4,28,M3,15,0.94274
M4,28,M4,16,0.90579
M4,28,M4,17,0.87884
M4,28,M4,18,0.88493
M4,28,M4,19,0.82441
M4,28,M4,20,0.79916
M4,28,M4,21,0.79203
M4,28,M4,22,0.85966
M4,28,M4,23,0.90302
M4,28,M4,24,0.94675
M4,28,M4,25,0.96948
M4,28,M4,26,0.98854
M4,28,M4,27,0.99535
M4,28,M4,28,1
M4,28,M4,29,0.99585
M4,28,M4,30,0.98979
M4,29,M1,1,0.91976
M4,29,M1,2,0.95493
M4,29,M1,3,0.96464
M4,29,M1,4,0.97189
M4,29,M1,5,0.96984
M4,29,M2,6,0.96654
M4,29,M2,7,0.97072
M4,29,M2,8,0.97506
M4,29,M2,9,0.96309
M4,29,M2,10,0.9598
M4,29,M2,11,0.96203
M4,29,M3,12,0.95611
M4,29,M3,13,0.93712
M4,29,M3,14,0.93261
M4,29,M3,15,0.93018
M4,29,M4,16,0.89019
M4,29,M4,17,0.85584
M4,29,M4,18,0.85915
M4,29,M4,19,0.79389
M4,29,M4,20,0.76409
M4,29,M4,21,0.75696
M4,29,M4,22,0.83075
M4,29,M4,23,0.87667
M4,29,M4,24,0.92681
M4,29,M4,25,0.95317
M4,29,M4,26,0.97795
M4,29,M4,27,0.99029
M4,29,M4,28,0.99585
M4,29,M4,29,1
M4,29,M4,30,0.98616
M4,30,M1,1,0.89547
M4,30,M1,2,0.94091
M4,30,M1,3,0.94389
M4,30,M1,4,0.95132
M4,30,M1,5,0.95995
M4,30,M2,6,0.95583
M4,30,M2,7,0.94998
M4,30,M2,8,0.96287
M4,30,M2,9,0.96077
M4,30,M2,10,0.94594
M4,30,M2,11,0.94264
M4,30,M3,12,0.95205
M4,30,M3,13,0.93551
M4,30,M3,14,0.91578
M4,30,M3,15,0.91711
M4,30,M4,16,0.88223
M4,30,M4,17,0.86649
M4,30,M4,18,0.8772
M4,30,M4,19,0.82522
M4,30,M4,20,0.81011
M4,30,M4,21,0.80857
M4,30,M4,22,0.86816
M4,30,M4,23,0.91216
M4,30,M4,24,0.94628
M4,30,M4,25,0.9689
M4,30,M4,26,0.98088
M4,30,M4,27,0.98643
M4,30,M4,28,0.98979
M4,30,M4,29,0.98616
M4,30,M4,30,1") 
```

有了这个，我得到了你展示的同样的情节。

您可以像第一次尝试一样添加注释栏

```
p + 
  annotate("rect", xmin=1, xmax=5, ymin=1, ymax=2, fill="red") +
  annotate("rect", xmin=6, xmax=11, ymin=1, ymax=2, fill="blue") +
  annotate("rect", xmin=12, xmax=15, ymin=1, ymax=2, fill="green") +
  annotate("rect", xmin=16, xmax=30, ymin=1, ymax=2, fill="black") 
```

我使用了您的`xmin`/`xmax`值`Df`。

![在此处输入图像描述](https://i.stack.imgur.com/ryqlY.png)

对于您的第二种方法，我不知道是什么`Dom1`，`Dom2`但我猜

```
p +
  geom_vline(aes(xintercept=c(5.5, 11.5, 15.5)), 
             linetype="solid", colour="black", size=0.7) 
```

![在此处输入图像描述](https://i.stack.imgur.com/K0Nc5.png)

您在评论中展示的第三种方法可以改编为

```
df = c(5,13,16,20) 
dfx <- data.frame(df) 
ggplot(data, aes(Res1,Res2,fill=Val)) + 
  geom_tile() + 
  scale_fill_gradient(low="white", high="blue") + 
  theme_bw() + 
  geom_hline(data=dfx, aes(yintercept=df), linetype="solid", 
             colour="black", size=2) + 
  geom_vline(data=dfx, aes(xintercept=df), linetype="solid", 
             colour="black", size=2) + 
  scale_x_continuous(breaks=c(5,13,16,20), expand=c(0,0)) + 
  scale_y_continuous(breaks=c(5,13,16,20), expand=c(0,0)) 
```

屈服 ![在此处输入图像描述](https://i.stack.imgur.com/YOgv1.png)

# nginx - 为 nginx.conf 提供外部参数（并使用 if 语句）

> ID：16090382
> 
> 赞同：0
> 
> 时间：2013-04-18T18:20:05.500
> 
> 标签：nginx

如何在我的`nginx.conf`文件中进行系统特定的变化，以便我可以在我的开发机器和实时服务器上使用相同的文件？

`nginx.conf`伪示例：

```
if system == mac then
  user _www;
else # ubuntu
  user www-data;
end 
```

1.  我可以在 Bash 中设置`nginx.conf`可以读取的环境变量吗？如果是这样，阅读这些的语法是什么？
2.  我可以使用该`nginx -g`选项来提供 nginx 参数吗？如果是这样，那么命令行语法是什么，以及读取内部参数的语法是`nginx.conf`什么？

很抱歉问这个问题，但是手册对这些主题有点含糊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:55:14.250

nginx.conf 似乎违背了 if 和变量的想法，我最终编写了一个小脚本，将 dev.conf 转换为 live.conf 作为部署的一部分。差异微乎其微，但却是必要的。

# jquery-ui - 动态填充 JQuery DataTable

> ID：16090383
> 
> 赞同：2
> 
> 时间：2013-04-18T18:20:07.480
> 
> 标签：jquery-ui, jsp, jquery, jquery-plugins

我需要在我的 JSP 中修改 JQuery 数据表，其中我没有用于列创建的静态数据。列数以及要填充的列名和数据必须来自服务器。如何编写这样的 JQuery DataTable。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T07:41:22.893

```
Create a dynamic array for both column and data value
$.post('ajax1', serilize, function(data) {
var list = data.list; 
    $.each(list[0], function(key, value) {   
       aaColumnvalue.push({"sTitle": value.columns_name},..}); 
    $.each(list[1], function(key, value) {   
       aaDatavalue.push([value.id,value.name,...]);
     }); 
)); enter code here
Here list[0] is dynamic column name and aaColumnvalue value array then pass these array value to datatable 
var table = $('#exampletable').dataTable({  
    "sScrollY": "200px",
    "sScrollX": "50%",
    "bJQueryUI": true,
    "sPaginationType": "full_numbers",
    "aaData": aaDatavalue,
    "aoColumns": aaColumnvalue
}); 
```

# c# - 从 JINT（服务器端）运行 C# 代码

> ID：16090385
> 
> 赞同：0
> 
> 时间：2013-04-18T18:20:21.360
> 
> 标签：c#, jint

这可能不是 JINT 的正确用法，如果有人知道其他系统可以做到这一点，我对他们持开放态度，只要它们可以序列化为字符串 - 但本质上我需要找到一种方法来使用 JINT解析并运行 C# 代码。我对整个 JINT 的想法很陌生，所以我不确定要寻找什么。但我希望能够设置类似...

```
public int GetValue(string name){
    // database work to find the value requested
    // return the value found
}

string s = "GetValue('something') * 2"; 
```

并且能够解析字符串并运行它，执行 GetValue 并传入给定的参数。在 JINT 或其他类似的框架中是否有可能发生这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:48:28.837

您可以从 jintengine 轻松地 SetFunction(string name, Delegate function)

[文件](http://jint.codeplex.com/wikipage?title=Passing%20external%20functions%20to%20scripts&referringTitle=Documentation)

```
JintEngine engine=new JintEngine();
Func<string,int> function = GetValue;
engine.SetFunction("GetValue", function);
var run = engine.Run("GetValue('something') * 2"); 
```

# ruby-on-rails - 为什么 Prawn 会自动调整我的图像大小？

> ID：16090388
> 
> 赞同：7
> 
> 时间：2013-04-18T18:20:32.147
> 
> 标签：ruby-on-rails, pdf, prawn

当我尝试使用 Prawn 插入图像（72dpi 的 PNG）时，如下所示：

```
image "#{Rails.root}/public/images/pdf/logo.png" 
```

Prawn 插入图像，但将其放大了大约 30%，这使得它变得模糊（并且更大）。我在文件中没有任何其他内容，并且 PDF 初始化是相当标准的：

```
super(:page_layout => :portrait,
      :left_margin => 0.5.in,
      :right_margin => 0.5.in,
      :top_margin => 1.in,
      :bottom_margin => 0.5.in) 
```

根据文档，Prawn 应该在不做任何修改的情况下将图片插入到文档中。为什么会发生此图像大小调整？

* * *

注意：我注意到边界框也比它们应该的大（与我的图像相同）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-19T03:09:00.417

您可以尝试传递图像实际的宽度和高度，看看是否有帮助

**大虾::图片**

> 公共实例方法 image(file, options={}) 点击切换源

将文件名处的图像添加到当前页面。目前仅支持 JPG 和 PNG 文件。

> 注意：Prawn 在渲染带有 Alpha 通道的 PNG 时非常慢。对于那些不介意安装 RMagick 的人来说，解决方法是使用：

[github.com/amberbit/prawn-fast-png](http://github.com/amberbit/prawn-fast-png)

论据：

文件的文件路径或响应 # 的对象

选项：

**: 在**数组 [x,y] 中，图像左上角的位置。

**:position** (:left, :center, :right) 或 x 偏移之一

**:vposition** (:top, :center, :center) 或 y 偏移之一

**:height**图片的高度【图片的实际高度】

**:width**图片的宽度【图片的实际宽度】

**:scale**按比例缩放图像的尺寸

**:fit**按比例缩放图像的尺寸以适合 [width,height]

```
Prawn::Document.generate("image2.pdf", :page_layout => :landscape) do     
    pigs = "#{Prawn::BASEDIR}/data/images/pigs.jpg" 
    image pigs, :at => [50,450], :width => 450                                      

    dice = "#{Prawn::BASEDIR}/data/images/dice.png"
    image dice, :at => [50, 450], :scale => 0.75 
  end 
```

如果仅提供 :width / :height 之一，则图像将按比例缩放。当两者都提供时，图像将被拉伸以适应尺寸而不保持纵横比。

如果 :at 提供，图像将放置在当前页面中，但文本位置不会改变。

如果不是显式文件名，而是将具有读取方法的对象作为文件传递，则可以嵌入来自 IO 对象和类似它们的事物（包括 Tempfiles 和 open-uri 对象）的图像。

```
 require "open-uri"

  Prawn::Document.generate("remote_images.pdf") do 
    image open("http://prawn.majesticseacreature.com/media/prawn_logo.png")
  end 
```

此方法返回一个图像信息对象，如果需要，该对象可用于检查图像对象的尺寸。（另见：Prawn::Images::PNG，Prawn::Images::JPG）

# java - 如何使“运行”按钮自动启动具有指定配置的项目

> ID：16090391
> 
> 赞同：1
> 
> 时间：2013-04-18T18:20:40.520
> 
> 标签：java, eclipse, scala

使用打开的 scala 项目，打开一个随机文件，运行按钮如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/oxaFm.png)

像这样的结果：

![在此处输入图像描述](https://i.stack.imgur.com/lEQfa.png)

但我希望它启动我指定的启动配置，该配置仅在按下启动按钮下方的小箭头时显示：

![在此处输入图像描述](https://i.stack.imgur.com/gflEj.png)

如何设置启动按钮以使用我指定的配置启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:51:39.303

万一有人偶然发现同样的问题，解决方案是设置（在设置窗口中）`Run/Debug > Launching -> Launch Operation`为`Always launch the previously launched application`.

# html - 如何属性检索经典的asp表单输入值

> ID：16090393
> 
> 赞同：0
> 
> 时间：2013-04-18T18:20:47.257
> 
> 标签：html, forms, input, vbscript, request

我在 X.asp 页上有一个经典的 asp 表单：

```
<form method="POST" name="formname">
<input type="Hidden" name="inputname" value="1" />
</form> 
```

我正在尝试使用 Y.asp 页中的以下代码检索输入“值”：

```
Request.Form.Item("inputname") 
```

不幸的是，这不起作用。我敢打赌，这很简单，基本的语法错误，但我尝试了很多不同的方式，无法让它工作。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:34:28.627

自从我使用它已经有一段时间了，但尝试不使用 Item 调用。

```
Request.Form("inputname") 
```

# jpa-2.0 - 从其他集合中删除相同实体时更新集合

> ID：16090396
> 
> 赞同：0
> 
> 时间：2013-04-18T18:21:05.780
> 
> 标签：jpa-2.0

我有 4 个类实体：CtPersonaFirma、CtFirmaDocumento 和 CtContrato。一个人可以签订多份合同，一份合同可以由多人签订。

CtPersonaFirma：包含授权签署的人员。

CtContrato：包含合约

CtFirmaDocumento：上面两张表的关系。

当我删除一个人时，用于级联的 CtPersonaFirma 表删除了 CtFirmaDocumento 表，其中有对已删除人员的引用，但在实体 CtContrato 的集合 ctFirmaDocumentoCollection 中未更新。

```
public class CtContrato implements Serializable {
@Id
@Basic(optional = false)
@NotNull
@Column(name = "id_contrato")
private Integer idContrato;
@OneToMany(cascade = CascadeType.ALL, mappedBy = "ctContrato", fetch=FetchType.LAZY)
private Collection<CtFirmaDocumento> ctFirmaDocumentoCollection;

public class CtPersonaFirma implements Serializable {
@Id
@Basic(optional = false)
@NotNull
@Column(name = "id_persona")
private Integer idPersona;
@OneToMany(cascade = CascadeType.ALL, mappedBy = "ctPersonaFirma")
private Collection<CtFirmaDocumento> ctFirmaDocumentoCollection;

public class CtFirmaDocumento implements Serializable {
@EmbeddedId
protected CtFirmaDocumentoPK ctFirmaDocumentoPK;
@JoinColumn(name = "id_persona_ref", referencedColumnName = "id_persona", insertable = false, updatable = false)
@ManyToOne(optional = false)
private CtPersonaFirma ctPersonaFirma;
@JoinColumn(name = "id_contrato", referencedColumnName = "id_contrato", insertable = false, updatable = false)
@ManyToOne(optional = false)
private CtContrato ctContrato; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:03:46.697

JPA 要求应用程序维护双向关系的双方。当您对一侧进行更改时，JPA 不会为您维护另一侧，并且您的缓存实体将与数据库中的内容不同步。根据您更改的哪一侧，这些更改也可能不会保留在数据库中。

在这种情况下，当您删除 CtFirmaDocumento 对象时，您还应该删除任何可能引用它的 CtContrato 中对这些对象的所有引用。

在这种情况下，另一种方法是在刷新或提交更改后强制刷新任何 CtContrato 对象，但通常最好直接修复引用以避免以后出现这种关系的问题。

# django - 连接表上产品查询的 Django 总和

> ID：16090399
> 
> 赞同：1
> 
> 时间：2013-04-18T18:21:14.540
> 
> 标签：django, django-models

简而言之，我想知道如何在 Django 中表达以下 SQL 查询

```
SELECT SUM(product.cost_price * product.markup_percentage) from product 
INNER JOIN shopping_cart on shopping_cart.product_id = product.id 
WHERE shopping_cart.user_id = <user_id>; 
```

有一个 ShoppingCart 模型，它具有 FK 到 Product 模型。我正在尝试获取用户为其购物车中所有产品支付的总金额。

目前，向`product`表中添加另一列不是一种选择。

我知道我能做到

```
shopping_cart = ShoppingCart.objects.select_related('product').filter(user_id=<user_id>) 
```

检索产品列表并在 python 代码中执行产品操作的总和。

[Sumproduct 中使用 Django 的聚合](https://stackoverflow.com/questions/2541864/sumproduct-using-djangos-aggregation)建议的答案不像答案的评论中提到的那样起作用。

那么除了编写原始 SQL 查询或在 python 中进行计算之外，还有其他方法可以在 Django 中执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:10:53.190

如果您将其更改为此，其他答案是否有效？

```
.extra(
    select={'actual_price': 'SUM(cost_price * markup_percentage)'},
).aggregate(total=Sum('actual_price'))['total'] 
```

# jquery - 如何降低除悬停在div中的所有内容的不透明度

> ID：16090401
> 
> 赞同：0
> 
> 时间：2013-04-18T18:21:28.463
> 
> 标签：jquery, image, hover, opacity

我在 div 中有一组图像，当您将鼠标悬停在 div 上时，我希望 div 的不透明度为 30%，但将图像悬停在 100% 上。这是我正在寻找的示例[http://www.rickanddrew.com/photography/](http://www.rickanddrew.com/photography/) 我将不胜感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:26:03.260

不透明度不能这样工作！如果您将不透明度 30% 放在 DIV 中，则此 DIV 内的所有内容也将获得不透明度。

但是你可以用 CSS3 背景色 RGBA 做到这一点：

```
DIV {
    background-color: rgba(200,200,200,1);
}
DIV:hover {
    background-color: rgba(200,200,200,0.3);
} 
```

第四个参数是 0 完全不可见而 1 完全可见时 RGBA 的“ALPHA”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:26:32.787

这应该有效：

```
$('.images').hover(function() {
    $(this).stop().animate({
        opacity: 1
    }).siblings().stop().animate({
        opacity: 0.3
    });
}, function() {
    $(this).siblings().stop().animate({
        opacity: 1
    });
}); 
```

虽然我会用 CSS 来做这件事，并使用转换来逐步使动画在支持 CSS3 转换的浏览器上看起来更好：

```
.img-container {
    -webkit-transition: opacity 0.3s;
    -moz-transition: opacity 0.3s;
    -ms-transition: opacity 0.3s;
    -o-transition: opacity 0.3s;
    transition: opacity 0.3s;
}

#parent:hover > .img-container:not(:hover) {
    opacity: 0.3;
} 
```

**演示：http: [//jsfiddle.net/bZG6T/](http://jsfiddle.net/bZG6T/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:31:19.660

当您将鼠标悬停在图像上以将“褪色”类应用于所有其他图像时，该网站有一个监听器。他们用来实现这一点的javascript是：

```
function() {
    jQuery('.photo-thumb').hover(

function() {
        jQuery('.photo-thumb').not(this).addClass('faded');
    }, function() {
        jQuery('.photo-thumb').removeClass('faded');
    });
} 
```

他们褪色的类设置了不透明度。

```
.photo-thumb.faded {
    opacity: 0.3;
} 
```

# c - Android NDK：函数会导致致命信号 11（SIGSEGV）吗？

> ID：16090402
> 
> 赞同：0
> 
> 时间：2013-04-18T18:21:29.730
> 
> 标签：c, android-ndk

我正在尝试移植 ac 应用程序，但我得到以下...

> 04-18 18:39:05.325: D/DJNI(4973): 开始主末日
> 
> 04-18 18:39:05.335: D/DJNI(4973): 空值检查完成
> 
> 04-18 18:39:05.335：A/libc(4973)：致命信号 11 (SIGSEGV) 位于 0x00000000 (code=1)，线程 4998 (Thread-141)

当然，这似乎是这些行的问题......

```
jni_printf("Starting Main APP");
if(clen == NULL)
        jni_printf("clen is null");
if(args == NULL)
        jni_printf("Args is null");
jni_printf("Null Check completed");
main(clen, args);
jni_printf("Start completed"); 
```

因此，因此我假设问题出在主要功能上。那正确吗？主函数实现不能细化会不会抛出这个错误？

我很困惑，因为它编译和链接都很好，但我仍然收到这个错误。据我所知（我用 gdb 在那里记录不好）这必须与 main 函数有关。

其他类

**dir1/i_mainsdl.h**

```
#ifndef __I_MAINSDL__
#define __I_MAINSDL__
extern int main(int argc, char **argv);
#endif 
```

**dir1/i_main.c**

```
#include "i_mainsdl.h"
...
int main(int argc, char **argv)
{
  lprintf(LO_ALWAYS, "Starting the main function");
} 
```

# batch-file - DOS 读取、解析、然后写入文件

> ID：16090406
> 
> 赞同：1
> 
> 时间：2013-04-18T18:21:42.560
> 
> 标签：batch-file, dos

我必须从每个子文件夹中读取文件名，找到我要查找的字符串，然后写入文本文件。每个子文件夹的文件名始终相同。

编辑：至于文件的数据结构......它是一个带有标签的 XML 文件。我只想在下面搜索这些标签，并将它们写入文本文件。

这是数据的片段（文件中有多个轨道标签：

```
 <track>
              <artists>
                <artist>
                    </read_only_info>
                    <primary>true</primary>
                    <language>en</language>
                    <artist_name>Kim Wilde</artist_name>
                    <roles>
                        <role>Primary</role>
                    </roles>
                </artist>
            </artists>
            <isrc>USMC18441630</isrc>
            </audio_file>
            <title>The Second Time</title>
            <locales/>
            <track_number>8</track_number>
         </track> 
```

我使用“查找”来查找字符串。这就是我所拥有的...

```
@ECHO OFF

SET filename=metadata.txt

FOR /F %%D in ('dir /b /a:D') DO (

(find /i "<artist_name>" "%%D\%filename%")
(find /i "<title>" "%%D\%filename%")
(find /i "<track_number>" "%%D\%filename%")

) 
```

如何为“artist_name”、“title”和“track_number”分配变量，然后将每个变量回显/打印到文件中，以便结果看起来像

艺术家姓名、标题、曲目编号（例如，逗号分隔）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:36:36.653

```
@ECHO OFF
SETLOCAL
SET filename=metadata.xml

(
FOR /F %%D in ('dir /b /a:D') DO IF EXIST "%%D\%filename%" (
CALL :process "%%D\%filename%"
)
)>result.txt
GOTO :eof

:process
CALL :filter %1 art  artist_name
CALL :filter %1 titl title
CALL :filter %1 trak track_number
ECHO "%art%","%titl%","%trak%"
GOTO :eof

:filter
FOR /f "delims=" %%i IN ('type %1 ^|findstr /c:"<%3>"') DO (SET %2=%%i)
CALL SET "%2=%%%2:*%3=%%"
CALL SET "%2$=%%%2:*/%3=%%xx%3"
CALL SET "%2=%%%2:~1%%"
:lop
CALL SET "%2=%%%2:~0,-1%%"
CALL SET "%2$=%%%2$:~1%%"&IF DEFINED %2$ GOTO lop
GOTO :eof 
```

完全替换代码 20130423-0805Z

陷入延迟扩张陷阱。

在我的测试系统中运行有 300 多个子目录。简化和转移并不完全奏效......

这次肯定...

确保文件存在于子目录中。

从文件中过滤掉到（art title trak）标签之间的内容（artist_name title track_number）显示结果

*   结果被重定向到输出文件“result.txt”

该例程在..`:FILTER`中查找作为第三个参数（“tag”）提供的字符串，并将结果分配给第二个参数（“var”）给出的变量`:FILTER``<``>``:filter`

*   然后为 VAR 分配 %var:*tag=% ，它将所有内容从 VAR 中剥离到标签字符串的末尾
*   接下来，为 VAR$ 分配 %var:*/tag%xxtag 这是 /tag 后面的所有内容（如果 /tag 后面有更多数据）+ 再次标记 + 2 个字符（xx=/ 和 <）
*   然后从 VAR 中删除前导“>”
*   然后从 VAR 和 VAR$ 的末尾删除一个字符（将被初始化为“anystraydataattheendoftheclosetagxxtag”），直到 VAR$ 为空，这将删除关闭标签和任何额外的数据。

* * *

啊-每个文件有多个轨道数据。

只需将`>report.txt`结果发送到文件而不是屏幕。完全可选

```
@ECHO OFF
SETLOCAL
SET filename=%1&IF NOT DEFINED filename ECHO syntax:%~n0 startingdirname&GOTO :EOF 
PUSHD "%~1"
SET filename=metadata.xml

(
FOR /F %%D in ('dir /b /a:D') DO IF EXIST "%%D\%filename%" (
SET skipto=1
CALL :process "%%D\%filename%"
)
)>report.txt
POPD
GOTO :eof

:process
FOR %%i IN (art titl trak) DO SET "%%i="
CALL :filter %1 art  artist_name
IF NOT DEFINED art GOTO :eof
CALL :filter %1 titl title
CALL :filter %1 trak track_number
ECHO "%art%","%titl%","%trak%"
GOTO process

:filter
FOR /f "skip=%skipto% delims=" %%i IN (
  'type %1^|FINDSTR /n "$"') DO if not defined %2 (
  ECHO "%%i"|findstr /c:"<%3>" >nul
  IF NOT ERRORLEVEL 1 (
   SET "%2=%%i"
   FOR /f "delims=:" %%L IN ("%%~i") DO SET skipto=%%L
   )
  )
)
IF NOT DEFINED %2 GOTO :EOF 
CALL SET "%2=%%%2:*%3=%%"
CALL SET "%2$=%%%2:*/%3=%%xx%3"
CALL SET "%2=%%%2:~1%%"
:lop
CALL SET "%2=%%%2:~0,-1%%"
CALL SET "%2$=%%%2$:~1%%"&IF DEFINED %2$ GOTO lop
GOTO :eof 
```

经过修改的版本。

`:process`在设置为 1 后处理找到的每个文件`skipto`- 清除要使用的变量 - 尝试使用标签查找- 如果找到，使用and`ART`重复，输出并重试。- 如果没有找到，退出并继续下一个文件。`titl``trak`

现在的`FILTER`过程 - 查看源代码中的每一行，但`linenumber:`首先为每一行编号。第一`%skipto%`行被跳过。- 在跳过的行之后找到包含目标标记的第一行 - 将变量设置为整个编号行的内容，然后抓取编号行的部分，但不包括第一个冒号，并将其放入`SKIPTO` -其他匹配行被忽略，因为现在定义了变量。

如果在例程中没有设置变量，那么该`skipto`行之后就没有更多的数据项，否则当我们接下来查看文件时，我们知道我们已经处理到了该`skipto`行，所以下一个变量将被分配给下一个数据项，跳过所有以前找到的项。

（编辑 20130425-1640Z 添加`PUSHD`/`POPD`以更改目标相对根）

# jquery - 如何每天将值增加 1

> ID：16090409
> 
> 赞同：-1
> 
> 时间：2013-04-18T18:21:51.453
> 
> 标签：jquery, html, css

我希望能够在每天午夜时分增加一个数值。所以我假设它会使用 date() 和 jQuery？

这是我拥有的当前静态代码：

```
<div class="chart">
            <div class="percentage" data-percent="107"><span>107</span></div>
            <div class="label">Coffees in 2013</div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:24:02.083

您将需要使用服务器端数据时间或通过查找请求区域（可能是通过 ip）来访问时间，因为 javascript 的机器时间可能与实际时间不同。

# javascript - JavaScript Uncaught ReferenceError 仅在 Chrome 中

> ID：16090411
> 
> 赞同：0
> 
> 时间：2013-04-18T18:22:04.847
> 
> 标签：javascript, google-chrome

我的朋友使用 GoDaddy.com 的网站生成器建立了一个网站，他让我添加一个简单的幻灯片。当谈到 JavaScript 时，我几乎是一个新手，但我发现了一些我能够修改以创建他想要的代码的代码。（我找到的代码在这里：[http](http://www.2createawebsites.com/image-slide-show-2.php) ://www.2createawebsites.com/image-slide-show-2.php ）我修改后的代码如下：

```
<script type="text/javascript" src="http://www.2createawebsites.com/resources/howtocreateawebsitefadeslide.js"></script>   
<script type="text/javascript">  
var mygallery = new fadeSlideShow({
    wrapperid: "fadeshow2",
    dimensions: [645, 300],
    imagearray: [
        ["https://cache.nebula.phx3.secureserver.net/obj/NEI5NDhBRDJBODdCMzc5NzQwNkI6OWY4NjEzNjA4NWIxMjIwZWRiZDM3YjYxZDAxZWUyMTU=?uid=0eb2a385-f05b-4183-84fb-f593b956edfe", "https://appelbrassandwoodwind.com/Schedule_Repair.html", "_new"],
        ["https://cache.nebula.phx3.secureserver.net/obj/NEI5NDhBRDJBODdCMzc5NzQwNkI6Y2UzNTg1M2MwOWNlZTFlN2I3OTI4OWEwMDhlM2Y1YmU=?uid=4dcdb1ea-535a-45b3-9cdf-e449f7a6ffde", "https://appelbrassandwoodwind.com/Instrument_Purchase.html", "_new"],
        ["https://cache.nebula.phx3.secureserver.net/obj/NEI5NDhBRDJBODdCMzc5NzQwNkI6MWJlOWNmMjkzNzc0MmE4MGI3ODlhZGYyZWQyZmJjYjQ=?uid=f87212cc-b629-474f-a4a9-7f56de88c1fc", "https://appelbrassandwoodwind.com/Instrument_Rental.html", "_new"],
        ["https://cache.nebula.phx3.secureserver.net/obj/NEI5NDhBRDJBODdCMzc5NzQwNkI6MDY3OWRiNDU3Yzg0YzMxNjIxMGY0YjMwNDk4ZDcwZjE=?uid=ab991519-85e4-4a5e-aea4-d6448f0d6708", "https://appelbrassandwoodwind.com/Beginner_Layaway.html", "_new"],
        ["https://cache.nebula.phx3.secureserver.net/obj/NEI5NDhBRDJBODdCMzc5NzQwNkI6YmE1N2Q0YmE0Y2RlMjQzNjRiMDg4MGYwZWUwZDg5YmU=?uid=f8e39740-fe7b-4d3d-a371-b23a89056651", "https://appelbrassandwoodwind.com/Teacher_List.html", "_new"]
    ],
    displaymode: {
        type: 'auto',
        pause: 2500,
        cycles: 0,
        wraparound: false
    },
    persist: false, //remember last viewed slide and recall within same session?   
    fadeduration: 1500, //transition duration (milliseconds)  
    descreveal: "ondemand",
    togglerid: ""
})
 </script>

<div id="fadeshow2"></div> 
```

生成的幻灯片可以在 ( [https://appelbrassandwoodwind.com/](https://appelbrassandwoodwind.com/) ) 的“主页”文本下方查看。幻灯片放映在 IE、FireFox 和 Safari 中完美运行，但在 Chrome 中无法运行。当我在 Chrome 中按 F12 并转到控制台时，我得到以下信息：*Uncaught ReferenceError: fadeSlideShow is not defined*。我遵循脚本中的“src”路径以确保在此处定义了 fadeSlideShow 函数，并且我确认它是。因此，我不明白为什么会出现此错误，尤其是因为其他浏览器按预期显示幻灯片。

我对这个问题进行了广泛的搜索，虽然我发现其他人也有这个问题，但要么没有提供解决方案，要么提供的解决方案超出了我的想象。任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:24:34.827

我也收到此警告：

```
[blocked] The page at https://appelbrassandwoodwind.com/ ran insecure content from http://www.2createawebsites.com/resources/howtocreateawebsitefadeslide.js. 
```

因为您的页面是使用“https”请求的，但您将资源包含在“http”中。尝试将您的更改`<script>`为：

```
<script type="text/javascript" src="//www.2createawebsites.com/resources/howtocreateawebsitefadeslide.js"></script> 
```

注意缺少“http:”。这将使用与您的页面相同的协议请求外部资源。

以下是有关无协议 URL 的一些信息：

*   [我可以将所有 http:// 链接更改为 // 吗？](https://stackoverflow.com/questions/4831741/can-i-change-all-my-http-links-to-just)
*   [在 <script src="http://..."> 中用 // 替换 http:// 是否有效？](https://stackoverflow.com/questions/550038/is-it-valid-to-replace-http-with-in-a-script-src-http)

# asp.net - jquery.mobile：方向导致宽度错误

> ID：16090414
> 
> 赞同：0
> 
> 时间：2013-04-18T18:22:22.583
> 
> 标签：asp.net, ipad, jquery-mobile, mobile, windows-phone-8

我有一些基于 jquery.mobile 的页面；当我旋转设备（WP8/IE10 和 iPad2）时，页面会以不正确的宽度重新呈现。

在 iPad2 上，如果我通过单击文本框然后再次单击它来激活键盘，也会发生同样的情况。

我的页面代码（呈现）：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8" />
  <meta name="author" content="Martin Robins" />
  <title>Do stuff</title>
  <link href="../Content/jquery.mobile.structure-1.3.1.css" rel="stylesheet" />
  <link href="../Content/jquery.mobile-1.3.1.css" rel="stylesheet" />
  <link href="../Content/jquery.mobile.theme-1.3.1.css" rel="stylesheet" />
</head>
<body>
  <form method="post" action="./" id="form">
    <script src="../Scripts/jquery-1.9.1.js" type="text/javascript"></script>
    <script src="../Scripts/jquery.mobile-1.3.1.js" type="text/javascript"></script>
    <script type="text/javascript">
      $(document).bind("mobileinit", function () {
        $.mobile.ajaxEnabled = false;
        $.mobile.linkBindingEnabled = false;
      });
    </script>

    <div data-role="page" id="logon" data-theme="c">
      <div data-role="header" data-position="fixed">
        <h1>Select location</h1>
      </div>
      <div data-role="content">

        <div data-role="fieldcontain">
          <fieldset data-role="controlgroup" data-type="horizontal">
            <legend>Title</legend>
            <input name="ctl00$FormContentPlaceHolder$Prefix" type="text" id="FormContentPlaceHolder_Prefix" style="text-transform: capitalize;" />
          </fieldset>
        </div>
        <div data-role="fieldcontain">
          <fieldset data-role="controlgroup" data-type="horizontal">
            <legend>Forenames</legend>
            <input name="ctl00$FormContentPlaceHolder$Forenames" type="text" vcard_name="vCard.FirstName" id="FormContentPlaceHolder_Forenames" style="text-transform: capitalize;" />
          </fieldset>
        </div>                  
      </div>
    </div>
  </form>
</body>
</html> 
```

注：部分内容已省略。我正在使用 ASP.NET，因此还加载了一些 ASP.NET AJAX 脚本。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:37:23.510

可能我认为这是一个元标记问题，请您添加以下元标记并检查它是否有效。

```
<meta name="viewport" content="width=device-width"> 
```

# regex - 使用 perl 构建首字母缩略词查找器正则表达式

> ID：16090419
> 
> 赞同：2
> 
> 时间：2013-04-18T18:22:47.147
> 
> 标签：regex, perl

已经`N`定义了单词，对于这个问题 3 个单词，例如：`open` `icebreaker` `umbrela`。

想知道这里是否存在任何可能的首字母缩略词作为英文单词存在，例如想要运行类似：

```
grep -Pi '^o(p(e?))?i(c(e?))?um?$' my_long_wordlist.txt 
```

在上面的正则表达式中我决定然后我可以使用

*   从第一个词`o`，或`op`或`ope`（第一个，或前两个，或前三个字母）
*   从第二个单词`i`，或`ic`或`ice`（第一个，或前两个，或前三个字母）
*   最后形成最后一个词，我只能使用第一个或前两个字母 -`u`或`um`

为了好玩 - 上面的正则表达式将为我返回这个词：`opium`:)

*手动*构建正则表达式对于两个测试是可以接受的，但我想检查许多单词组合，所以，寻找一种如何生成正则表达式的方法，如上所述。

想要通过以下调用构建“首字母缩略词查找器正则表达式脚本”：

```
acrobuild open:4 icebreaker:3 umbrela:3 
```

如您所见，args 是单词，分隔符后面的数字是首字母缩写词中可以使用的*最大字母数。*

现在的问题 - 我完全失去了如何为给定长度构建正则表达式。需要一些提示、想法或类似的东西.. - 检查“这里需要帮助”:)

目前我有这个：

```
#!/usr/bin/perl

use 5.012;
use strict;
use warnings;

do_grep(  make_regex(@ARGV) );
exit;

sub make_regex {
    my(@words) = @_;
    my $regex;
    foreach my $wordnum (@words) {
        $regex .= make_word_regex( split(/:/, $wordnum) );
    }
    $regex = '^' . $regex . '$' if $regex;
    return $regex;
}

sub make_word_regex {
    my($word, $num) = @_;

    return "" unless $word;
    $num = length($word) unless defined($num);  #for make legal -> word:0

    my(@chars) = split(//, substr($word,0,$num) );

    #regex building x  or   xy?  or  x(y(z?))? etc... :(
    my $re = "";
    foreach my $c (reverse(@chars)) {   #reverse, to building inside-out
        # HOW TO BUILD THE REGEX HERE?
        # NEED HELP HERE
    }
    return($re);
}

sub do_grep {
    my($re) = @_;
    say "$re"; return; #tmp
    my $recomp = qr/$re/i;

    open(my $fdict, "<", "/usr/share/dict/web2") or die("No dict file $!");
    while(<$fdict>) {
        chomp;
        say $_ if m/$recomp/;
    }
    close($fdict);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:54:26.420

而不是嵌套的 regexp `o(p(e?)?)`，我只会列出一个替代列表：`(o|op|ope)`.

```
sub make_regex_word {
    my ($word)=@_;
    my ($base,$count)=split(/:/,$word);
    my @chars=split(//,$base);
    my @re=();
    for ($i=0;$i<$count;$i++) {
        push @re,join("",@chars[0..$i]);
    }
    return "(".join("|",@re).")";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T18:55:17.457

你通常是在正确的轨道上。我会这样实现`make_word_regex`：

```
my ($word, $num) = @_;

# paranoid error checking
defined $word         or croak "Can't prepare undef value";
$num <= length($word) or croak "More characters requested than avaliable";
$num >= 1             or croak "Pattern must consist of at least one char";

my $regex = ''; # initialize $regex to something we can interpolate w/o warning

for my $char (reverse split //, substr $word, 0, $num) {
  # use qr// instead of treating regexes like strings
  # The \Q ... \E protects for special characters. Always use this for external input.
  $regex = qr/\Q$char\E $regex?/x; 
}

return $regex; 
```

这可以按预期工作，除了正则表达式中包含许多不必要的垃圾（`make_word_regex("open", 3)`返回一个可能字符串化的正则表达式对象`(?x-ism:o (?x-ism:p (?x-ism:e ?)?)?)`，具体取决于您的 perl）。

您可以以类似的方式将这些部分正则表达式组合到首字母缩略词查找器中。我会`make_regex`写成

```
# assert that every word is followed by a number.
@_ % 2 == 0 or croak "even number of arguments required.";

my @regexes;
while (@_) {
  my ($word, $num) = splice @_, 0, 2; # shift the first two elems
  push @regexes, make_word_regex($word, $num);
}

# combine the regexes:
return qr/ \A  @regexes \z /x; 
```

`\A`字符串开头的锚点；`\z`在最后。该`/x`标志允许通过包含不匹配的空格使正则表达式更具可读性。

然后你可以调用脚本

```
$ acrobuild open 3 icebreaker 3 umbrella 2 
```

我建议不要对字典文件进行硬编码。改为通过 STDIN 管道 dict：

```
$ acrobuild open 3 icebreaker 3 umbrella 2 </usr/share/dict/web2 
```

这将简化您`do_grep`的

```
my $re = shift;
while (<STDIN>) {
  chomp;
  say if /$re/i;
} 
```

# javascript - jQuery AJAX 和 ASP.NET

> ID：16090426
> 
> 赞同：6
> 
> 时间：2013-04-18T18:23:31.850
> 
> 标签：javascript, jquery, asp.net

我有这个小问题...我有这个 asp.net 网站。我有一个菜单，全部用 html 和 css 完成。因此，当我单击主页时，ajax 会将其他内容加载到指定的 div 元素中。工作 100%。

在加载到 div 元素中的内容中，我有一个按钮。一个 ASP.NET 按钮。

当我单击该按钮时，它给了我一个“找不到资源”。错误。

一定有什么我错过了。如果你不明白，继承人的ajax：

```
//Load the Home page on click.
$(document).ready(function () {
    $('.home').click(function () {
        $("#content").load("html/home/home.aspx");
    });
}); 
```

现在加载到内容 div 中的 aspx 页面显示一个按钮 btnAdd：

```
<asp:Panel ID="pnlAddNewBlog" runat="server">
    <asp:TextBox ID="txtAddNewBlog" runat="server" TextMode="MultiLine"></asp:TextBox>
    <br />
    <asp:Button ID="btnAdd" runat="server" Text="Add" />
</asp:Panel> 
```

当我单击该按钮时，会出现错误。

我想要实现的是：当用户单击按钮时，txtAddNewBlog 中的文本被添加到数据库中。现在我可以使用 C# 来实现......但如果这个错误是我的方式。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:46:26.190

问题将是`form`被创造出来的。当您发出该请求时，ASP.NET 将构建一个表单，其目标是`home.aspx`，而不是它的完整路径。但是您将该表单转储到处于不同级别的 HTML 页面上。

当您进行表单发布时，它会尝试发布到`home.aspx`，相对于浏览器认为的位置，这是两个级别，但它没有找到它。

我不知道是否有这样做的好方法 - ASP.NET 并不意味着处理这种事情。你可以做一个 IFRAME。您可以将内容包装`home.aspx`到用户控件中，并将 ASP.NET 表单留在外部页面上。或者您可以操纵表单的目标，以便发布到正确的位置。但我不认为其中任何一个会很有趣。

# javascript - 使用 javascript 在表格中添加 CSS 样式

> ID：16090428
> 
> 赞同：0
> 
> 时间：2013-04-18T18:23:38.607
> 
> 标签：javascript, css, ajax

在[http://www.elitedeafpoker.com/dev/poker-players.html](http://www.elitedeafpoker.com/dev/poker-players.html) - AJAX 将 JSON 数据加载到表格中，我试图添加一些类以仅在两个标签上分别显示背景颜色并将文本居中，但它对我不起作用，我将其删除。我需要桌子看起来像这样 - [http://www.elitedeafpoker.com/dev/img/table-example.jpg](http://www.elitedeafpoker.com/dev/img/table-example.jpg)

Javascript

```
$(document).ready(function() {
    $.getJSON("js/dataPokerPlayers.json", function(data) {
        $.each(data, function(i, data){
            $(".tableData tbody").append("<tr><td>" + data.rank + "</td><td>" + data.name + "</td><td>" + data.earnings + "</td><td>" + data.points + "</td><td>" + data.totalearnings + "</td></tr>");
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:26:26.220

您可以添加到要居中`class="center"`的元素中，然后使用 CSS 选择器为这些元素设置类名的样式。`<td>``td``center`

jQuery：

```
$(document).ready(function() {
    $.getJSON("js/dataPokerPlayers.json", function(data) {
        $.each(data, function(i, data){
            $(".tableData tbody").append("<tr><td>" + data.rank + "</td><td>" + data.name + "</td><td class=\"center\">" + data.earnings + "</td><td class=\"center\">" + data.points + "</td><td>" + data.totalearnings + "</td></tr>");
        });
    });
}); 
```

CSS：

```
.center{
    text-align: center;
} 
```

# javascript - Google maps api json ajax - 标记未显示

> ID：16090429
> 
> 赞同：1
> 
> 时间：2013-04-18T18:23:42.603
> 
> 标签：javascript, ajax, json, google-maps-api-3

我已经编写了获取标记的 JOSN 并遍历它们的部分。但由于某种原因，标记没有出现在地图上。有人可以帮我找出错误。

```
 $.ajax({
            url: "get_markers.php",
            type: 'POST',
            dataType: 'json', 
            data: {'address':address},
            success: function (html, status, response) {
                $.each(html, function(i, place) {
                    alert(JSON.stringify(place.lat)+","+JSON.stringify(place.lng));  
                    latLng = new google.maps.LatLng(JSON.stringify(place.lat), JSON.stringify(place.lng)); 
                    marker = new google.maps.Marker({
                      position: latLng,
                      map: map
                      //title: data.title
                    }); 
                });                 
            } 
```

我已经定义了地图变量 latLng 和标记。当我发出警报（..）时，我也会得到正确的纬度和纬度值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:30:29.863

你为什么要转换成字符串。

构造[**函数**](https://developers.google.com/maps/documentation/javascript/reference#LatLng)文档

```
LatLng(lat:number, lng:number, noWrap?:boolean) 
```

改变

```
latLng = new google.maps.LatLng(JSON.stringify(place.lat), JSON.stringify(place.lng)); 
```

至

```
latLng = new google.maps.LatLng(place.lat,place.lng); 
```

# asp.net-mvc - ASP.net MVC web api 调度事件

> ID：16090433
> 
> 赞同：0
> 
> 时间：2013-04-18T18:24:03.060
> 
> 标签：asp.net-mvc, asp.net-web-api

好的，这就是我要找的东西，我正在尝试编写一个程序，其中有人向服务器发送请求，但指定了他们希望处理该请求的时间。有没有办法安排一个事件来触发服务器上的特定时间？

我四处寻找资源，似乎找不到任何东西让我知道这是否可能。任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:30:04.997

我会将此功能分为两部分：

*   将请求排入队列的 Web 服务器
*   负责作业执行和时间跟踪的处理引擎。这可以是具有持久存储的 Windows 服务，用于保存结果和进度。

否则，网络服务器可能会在数百个请求后说 adios。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:27:09.170

您应该将该事件保存在数据库中，并在特定时间有一个后台进程（Windows 服务或计划任务可以解决问题）运行事件。

不要认为您仅使用 Web 模块就可以做到这一点，如果您这样做了，可能不会是一个非常推荐的方法 :)

# android - Android设备上的动态“apple-touch-icon”？

> ID：16090444
> 
> 赞同：4
> 
> 时间：2013-04-18T18:24:34.170
> 
> 标签：android, html, mobile, web, mobile-website

我有一个 HTML 移动网络应用程序，它为多个品牌网站使用单一代码源。每个“站点”都需要有自己的“apple-touch-icon.png”，当站点被添加到主屏幕时会使用它。我可以让它在 iOS 上工作，但不能在 Android 上工作。

我们的项目使用 Angular.JS，所以我尝试直接在 index.html 文件中指定动态路径，例如：

```
 <link rel="apple-touch-icon" sizes="144x144" ng-href="/icons/144/{{bankId | lowercase}}-apple-touch-icon.png">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" ng-href="/icons/144/{{bankId | lowercase}}-apple-touch-icon.png"> 
```

这适用于 iOS，但不适用于 Android。

我还尝试通过 jQuery 附加标签，例如：

```
$('head').append('<link rel="apple-touch-icon" sizes="144x144" href="/icons/144/'+bankId+'-apple-touch-icon.png">' +
'<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/icons/144/'+bankId+'apple-touch-icon.png">'); 
```

这也适用于 iOS，尽管填充图标有明显的延迟。同样，这在 Android 中不起作用。

如果我将 apple-touch-icon.png 留在根文件夹中，Android 确实会找到它，但这不起作用，因为我们需要大约十几个不同的可能图标。

任何人都可以建议如何做到这一点？

# google-apps-script - 粘贴特殊值

> ID：16090447
> 
> 赞同：5
> 
> 时间：2013-04-18T18:24:35.293
> 
> 标签：google-apps-script, google-sheets

我有一个由 3 列和 2（或更多）行组成的范围。中间列包含一个公式：`=TRANSPOSE(SPLIT(A1,","))`

该脚本需要将该范围移动（剪切）到另一张纸上作为***值***，而不是公式。

google-apps-script 是否可以执行“PasteSpecial - Values”？

这是我目前正在使用的线路：

```
sheet1.getRange("F1:H3").moveTo(sheet2.getRange("A1")); 
```

谁能告诉我如何在这些值移动到 sheet2 之前将它们锁定？

*（仅供参考：这只需要代码解决方案）*

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-18T22:14:35.770

作为替代方案，您可以使用[带有高级参数的 copyTo()](https://developers.google.com/apps-script/reference/spreadsheet/range#copyTo%28Range,Object%29)来仅复制值。要模仿 moveTo() 的效果，您仍然需要清除源范围。

此外，如果更简单，getRange() 接受包含工作表名称的字符串引用。所以：

```
function moveValuesOnly() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var source = ss.getRange('Sheet1!F1:H3');
  source.copyTo(ss.getRange('Sheet2!A1'), {contentsOnly: true});
  source.clear();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T18:35:52.173

在源范围上使用 getValues()，在目标上使用 setValues()。您必须确保范围是相同的尺寸。然后，您可以 clear() 源。

这是一个可以完成这项工作的实用程序函数。它也[可以作为 gist 使用](https://gist.github.com/mogsdad/5415837)。请注意，它将范围对象作为参数。

### 代码

```
/**
 * Move all values from source range to destination range. Upon
 * completion, source range will be cleared. Source values will
 * be moved into a destination range starting at the "top left"
 * of the destination range, using the dimensions of the source
 * range. This is a blind copy, with no overwrite test.
 *
 * @param {Range} source Range Object to take values from.
 * @param {Range} destination Range Object to receive values.
 *
 * @returns nothing
 */
function moveRange(source,destination) {
  var sourceSheet = source.getSheet();
  var destSheet = destination.getSheet();
  var sourceData = source.getValues();
  var dest = destSheet.getRange(
    destination.getRow(),        // Top row of destination
    destination.getColumn(),     // left col of destination
    sourceData.length,           // # rows in source
    sourceData[0].length);       // # cols in source (elements in first row)
  dest.setValues(sourceData);
  source.clear();
} 
```

### 测试功能

成功的测试将清除整个源范围，其内容将仅作为值出现在目标范围中。无论提供什么作为目标，目标尺寸都将与源尺寸相匹配 - 它只是锚定移动的左上角。

```
function test_moveRange() {
  var sourceSheet = SpreadsheetApp.getActiveSpreadsheet().getSheets()[0];
  var destSheet = SpreadsheetApp.getActiveSpreadsheet().getSheets()[1];

  var source = sourceSheet.getRange("A7:C10");
  var destination = destSheet.getRange("C4:H2");
  moveRange(source,destination);
} 
```

# regex - 崇高，SASS用正则表达式排除？

> ID：16090448
> 
> 赞同：1
> 
> 时间：2013-04-18T18:24:36.273
> 
> 标签：regex, sublimetext2, sublimetext

我有这个设置的 OnSaveBuild 插件：

```
"filename_filter": "\\.(css|js|sass|less|scss)$" 
```

它将在保存时编译这些格式。但是，在 sass/scss 的情况下，我想排除以“_”开头的导入文件。我怎样才能改变这个选项来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:27:17.947

不确定，但我认为这应该做你想要的。我假设文件名（在扩展部分之前）至少包含一个字符，对于`sass`and的情况`scss`。

```
"^[^_].*\\.(sass|scss)$|\\.(css|js|less)$" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T13:53:54.487

这对我有用：

```
"filename_filter": "(/|\\\\|^)(?!_)(\\w+)\\.(css|js|sass|less|scss)$", 
```

在这里找到：[https ://github.com/alexnj/SublimeOnSaveBuild/issues/11#issuecomment-24952435](https://github.com/alexnj/SublimeOnSaveBuild/issues/11#issuecomment-24952435)

# jpa - Batoo 支持 Amazon RDS、S3 和 MySQL

> ID：16090449
> 
> 赞同：1
> 
> 时间：2013-04-18T18:24:37.083
> 
> 标签：jpa, batoo

我想知道它是否支持 Amazon RDS 和 S3。

此外，我想查找有关对 MySQL 连接的支持级别的文档，但我找不到任何东西。

在此先感谢佩德罗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:18:23.043

Batoo 支持 MySql 作为一等公民，包括连接。由于 Batoo JPA 是一个纯规范的实现，它会根据 Jpa fetch 和 fetch 类型生成内部和左联接的 SQL 联接。

对于亚马逊的支持，它应该可以工作。[您可以遵循https://github.com/BatooOrg/BatooJPA/issues/187](https://github.com/BatooOrg/BatooJPA/issues/187)中的兼容性测试用例

编辑：RDS 与使用的 DB 提供程序软件相同，因此它支持 RDS

# objective-c - 如何使用屏幕保护程序的调度队列加载图像？

> ID：16090452
> 
> 赞同：0
> 
> 时间：2013-04-18T18:24:55.703
> 
> 标签：objective-c, xcode, grand-central-dispatch, screensaver

我正在尝试编写一个屏幕保护程序，从我的网站加载图像并以随机顺序显示它们。我的 Web API 涵盖了随机性和图像获取，但是如何在不冻结 UI 的情况下下载它让我真正陷入困境。

目前我的代码看起来像这样：

```
- (void)animateOneFrame
{
    NSRect viewBounds = [self bounds];
    dispatch_queue_t queue = dispatch_get_current_queue();

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        NSImage *image = [self extractImageFrom:@"my_url.com"];
        NSSize imageSize = [image size];            
        NSRect imageRect = NSMakeRect( 0, 0, imageSize.width, imageSize.height );

        dispatch_sync(queue, ^{    
            [image drawInRect:viewBounds fromRect:imageRect operation:NSCompositeCopy fraction:1.0];
        });

    });
    return;
} 
```

在这里，我尝试触发在单独的队列中获取图像和标题的函数。然后将图像绘制在原始视图上，但这就是问题所在。

每当在首选项面板中选择最终的屏幕查看器插件时，图像就会绘制在首选项面板的视图上（而不是黑色预览矩形）。同样，在预览屏幕保护程序时，不会绘制图像，但每当我退出屏幕保护程序时，首选项面板的视图就会被图像覆盖。

在我看来，图像总是被加载和绘制，但不在正确的队列/上下文中？`queue`我没有使用变量，而是使用`dispatch_get_main_queue()`了相同的结果。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-24T17:06:18.060

我知道这不是您正在寻找的答案，但也许它会有所帮助。我的创业公司正在构建一个可以显示网页的屏幕保护程序，它被称为[Screensaver Ninja](https://screensaver.ninja)，因此，如果您使用 jQuery 或任何其他常用 Web 技术开发一个执行您想要的操作的页面并显示它。[您可以在https://screensaver.ninja](https://screensaver.ninja)找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T20:29:09.580

尝试将绘图代码放到被覆盖的超级视图的 drawRect 函数中。然后打电话

```
[self setNeedsDisplay]; 
```

在主队列上。它将安排一个新的 drawRect:(CGRect) 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T20:25:00.597

看来你的线程没有问题。问题出在图上。

您的绘图调用没有上下文。`drawInRect`是需要图形上下文的 Quartz 函数。通常用于 的绘图方法中`NSView`。

您应该将要绘制的视图子类化，并给它一个方法，就像`updateWithImage:(NSImage*)image`您正确绘制的地方一样。然后在主线程上调用该方法。

```
 dispatch_sync(dispatch_get_main_queue(), ^{    
        [theCorrectView updateWithImage:image];
    }); 
```

# c++ - 从函数返回指针给出了奇怪的数字

> ID：16090453
> 
> 赞同：1
> 
> 时间：2013-04-18T18:24:58.970
> 
> 标签：c++, function, pointers, return, function-pointers

我正在尝试获取该数组的最大数量，该数组的数字从 -20 到 30，但它返回像这样的奇怪数字 --> 2255667，如果一切顺利，这是不可能的。

```
int * ptomx(int a[],int n)
{
  int max=-100;
  int *point;

  for(int i=0;i<=n;i++)
  {
      if(max<a[i])
      {
        max = a[i];
      }
  }
  point = new int;
 *point = max;
  return point;
} 
```

这就是我在 main() 中所做的

```
int maxTemp;

maxTemp=*(ptomx(a,n));

cout<<"Max temp is:"<<maxTemp; 
```

是不是因为函数中的指针在函数返回后被销毁，并在该内存位置给出了一个随机数。如果是这种情况，它需要被取消引用，但如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T18:25:25.940

您正在从数组末尾读取值。这些值可以是**任何**值，并且是导致错误结果的原因。

```
 for(int i=0;i<=n;i++) 
              //^^ 
```

应改为

```
 for(int i=0;i < n;i++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:31:56.423

您在 ptomx 中的 for 循环已超出范围。

想一想：如果你想要每一个值，但除了最后一个之外什么都没有，你想使用 >= 吗？如果你有 10 个值，它们在内存中的实际位置（理论上）是 0-9。您应该只使用 > 来弥补这一点。

```
for(int i=0;i<n;i++) 
```

这就是它应该的样子。

# html - Sencha：“animateActiveItem”之后切换字段动画不起作用

> ID：16090454
> 
> 赞同：1
> 
> 时间：2013-04-18T18:24:59.200
> 
> 标签：html, sencha-touch-2, slidetoggle

我在 Sencha 中使用 'togglefield' xtype 时遇到了一些问题。我已经使用不同的代码类型进行了大量测试，并将我的应用程序简化为几个容器。您可以看到我添加了两个切换字段 - 一个在第一个容器“视图 A”中，另一个在“视图 B”容器中。出于某种原因，第一个切换字段正确显示。但是，使用第二个切换字段时，动画无法正确显示。

当应用程序包含一个主容器和多个通过“animateActiveItem”访问的视图时，我注意到大型应用程序存在同样的问题。在初始容器中，togglefield 工作，但在第二个容器中，toggle 没有动画。

但是，如果我使用“setActiveItem”更改视图，则切换在两者中都能正常工作。我认为我缺少一些非常简单的东西，但不知道是什么。有任何想法吗？

我用来定义视图的代码如下：

```
Ext.define('MyApp.view.mainWindow', {
    extend: 'Ext.Container',

    config: {
        id: 'mainWindow',
        layout: {
            type: 'card'
        },
        items: [
                {
                    xtype: 'container',
                    id: 'viewA',
                    layout: {
                        type: 'vbox'
                    },
                    items: [
                            {
                                xtype: 'container',
                                html: 'CLICK THE BUTTON'
                            },
                            {
                                xtype: 'button',
                                text: 'MyButton',
                                handler: function () {
                                    Ext.getCmp('mainWindow').animateActiveItem(Ext.getCmp('viewB'), {type: 'pop', direction: 'left'});
                                    console.log("pressed");
                                }
                            },
                            {
                                xtype: 'togglefield',
                                label: 'Field'
                            }
                            ]
                },
                {
                    xtype: 'container',
                    id: 'viewB',
                    items: [
                            {
                                xtype: 'togglefield',

                                name: 'toggleName',
                                label: 'My Toggle Field',
                            }
                            ]
                }
                ]
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T10:11:09.217

我不知道这可以在多大程度上应用于您的情况，但我发现我不小心创建了两个调用动画的视图控制器实例。一个在 app.js 中，一个在配置文件中。

基本上他们打断了彼此的动画。

# android - 无法实例化 PlayersActivity NullPointerException 错误

> ID：16090455
> 
> 赞同：1
> 
> 时间：2013-04-18T18:25:00.710
> 
> 标签：android, nullpointerexception, listactivity

我的 PlayersActivity 课程一直运行良好，直到今天它神秘地停止了。我认为我的列表视图有问题，但我无法弄清楚，因为我确实改变了任何东西，尽管我确实为不同的班级制作了另一个列表视图。不能完全弄清楚我哪里出错了

```
public class PlayersActivity extends ListActivity {
private static final int ACTIVITY_CREATE=0;
private static final int ACTIVITY_EDIT=1;

private static final int INSERT_ID = Menu.FIRST;
private static final int DELETE_ID = Menu.FIRST + 1;

private PlayerDbAdapter mDbHelper;

private SimpleCursorAdapter playerlist;
ListView list = getListView();

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.playerdata);

    mDbHelper = new PlayerDbAdapter(this);
    mDbHelper.open();
    fillData();
    registerForContextMenu(getListView());
}

private void fillData() {
    Cursor players = mDbHelper.fetchAllPlayers();
    startManagingCursor(players);

    // Create an array to specify the fields we want to display in the list (only TITLE)
    String[] from = new String[]{PlayerDbAdapter.KEY_TITLE,PlayerDbAdapter.KEY_BODY, PlayerDbAdapter.KEY_NUMBER, PlayerDbAdapter.KEY_TEAM};

    // and an array of the fields we want to bind those fields to (in this case just text1)
    int[] to = new int[]{R.id.pPosition,R.id.pName,R.id.pNumber,R.id.pTeam};

    // Now create a simple cursor adapter and set it to display
     playerlist = new SimpleCursorAdapter(this, R.layout.playerinfo , players, from, to);
    list.setAdapter(playerlist);
    playerlist.notifyDataSetChanged();
    list.setOnItemClickListener(new OnItemClickListener() {
           public void onItemClick(AdapterView<?> listView, View view, 
             int position, long id) {
           Cursor cursor = (Cursor) listView.getItemAtPosition(position);

           String playerName = 
            cursor.getString(cursor.getColumnIndexOrThrow("Player_Name"));
           Toast.makeText(getApplicationContext(),
             playerName, Toast.LENGTH_SHORT).show();

           }
      });

    EditText myFilter = (EditText) findViewById(R.id.myFilter);
    myFilter.addTextChangedListener(new TextWatcher() {

     public void afterTextChanged(Editable s) {
     }

     public void beforeTextChanged(CharSequence s, int start, 
       int count, int after) {
     }

     public void onTextChanged(CharSequence s, int start, 
       int before, int count) {
      playerlist.getFilter().filter(s.toString());
     }
    });

    playerlist.setFilterQueryProvider(new FilterQueryProvider() {
           public Cursor runQuery(CharSequence constraint) {
               return mDbHelper.fetchPlayersByName(constraint.toString());
           }
       });

   } 
```

日志猫

```
`E/AndroidRuntime(341): FATAL EXCEPTION: main
 E/AndroidRuntime(341): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{your.dissertation.project/your.dissertation.project.PlayersActivity}: java.lang.NullPointerException
04-18 18:15:08.619: E/AndroidRuntime(341):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1544)
04-18 18:15:08.619: E/AndroidRuntime(341):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1638)
04-18 18:15:08.619: E/AndroidRuntime(341):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-18 18:15:08.619: E/AndroidRuntime(341):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:928)
04-18 18:15:08.619: E/AndroidRuntime(341):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 18:15:08.619: E/AndroidRuntime(341):  at android.os.Looper.loop(Looper.java:123)
04-18 18:15:08.619: E/AndroidRuntime(341):  at android.app.ActivityThread.main(ActivityThread.java:3647)
04-18 18:15:08.619: E/AndroidRuntime(341):  at java.lang.reflect.Method.invokeNative(Native Method)
04-18 18:15:08.619: E/AndroidRuntime(341):  at java.lang.reflect.Method.invoke(Method.java:507)
04-18 18:15:08.619: E/AndroidRuntime(341):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-18 18:15:08.619: E/AndroidRuntime(341):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-18 18:15:08.619: E/AndroidRuntime(341):  at dalvik.system.NativeStart.main(Native Method)
04-18 18:15:08.619: E/AndroidRuntime(341): Caused by: java.lang.NullPointerException
04-18 18:15:08.619: E/AndroidRuntime(341):  at android.app.Activity.setContentView(Activity.java:1657)
04-18 18:15:08.619: E/AndroidRuntime(341):  at android.app.ListActivity.ensureList(ListActivity.java:312)
04-18 18:15:08.619: E/AndroidRuntime(341):  at android.app.ListActivity.getListView(ListActivity.java:297)
04-18 18:15:08.619: E/AndroidRuntime(341):  at your.dissertation.project.PlayersActivity.<init>(PlayersActivity.java:35)
04-18 18:15:08.619: E/AndroidRuntime(341):  at java.lang.Class.newInstanceImpl(Native Method)
04-18 18:15:08.619: E/AndroidRuntime(341):  at java.lang.Class.newInstance(Class.java:1409)
04-18 18:15:08.619: E/AndroidRuntime(341):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-18 18:15:08.619: E/AndroidRuntime(341):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1536)
04-18 18:15:08.619: E/AndroidRuntime(341):  ... 11 more ` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:52:20.423

你在打电话

```
 ListView list = getListView(); 
```

在您的应用程序生命周期之外。将初始化移至`onCreate()`方法。（和/或发布该行的代码，如果您的 logcat 是正确的，这实际上会使您的应用程序崩溃）...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:29:22.763

**编辑：**

称呼

```
ListView list; declare  as field and then 
```

`list= getListView();``onCreate`之后的里面`setContentView`

在您的布局文件中`R.layout.playerdata`应该有带有 id 的 ListView

```
android:id="@android:id/list" 
```

检查此以供参考[列表活动](http://developer.android.com/reference/android/app/ListActivity.html)

# php - 如何在 PHP 中从 Google 图片上传文件？

> ID：16090456
> 
> 赞同：-2
> 
> 时间：2013-04-18T18:25:20.047
> 
> 标签：php, image, file-upload, image-uploading

```
<html><head><title>Uploading Pictures</title></head>
<body bgcolor="lavender">
<h3>Uploading Files</h3>
<form
enctype="multipart/form-data"
action="upload_move_file.php"
method="post">
Browse and select the picture you want to upload: <br />
<input name="picture_file" type="file" />
<br />
<input type=submit value="Get File"/>
</form>
</body>
</html>
 (The PHP Script)
 <html><head><title>File Uploads</title></head>
 <body bgcolor="#33ff33">
 <font face="verdana" size="+1">
 <?php

 echo "The uploaded file is: ", $_FILES['picture_file']
 ['tmp_name'], "<br />";
 $filename=$_FILES['picture_file']['name'];
 $filesize=$_FILES['picture_file']['size'];
 $directory='C:\wamp\www\examples\\';
 $uploadFile = $directory . $filename;
 echo "The moved file is: $uploadFile<br />";
 if (move_uploaded_file($_FILES['picture_file']['tmp_name'],$uploadFile)){
 echo "The file is valid and was successfully uploaded.<br /> ";
 echo "The image file, $filename, is $filesize bytes.<br/>";
}
 ?>
<center>
 <br />
<img src=<?php echo "\"\examples\\$filename\"";?>
width="250" height="175" border="3">
</center>
</font>
</body>
</html> 
```

我编写了 html 和 php 代码来创建一个简单的上传文件表单。此代码用于将文件从同一台计算机上传到 localhost，但是如何将其更改为从 Google 图片上传？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:05:08.237

这有点粗略，但它有效。

在文件选择页面中添加另一个块。

```
<!-- use a url to get the file -->
<form action="upload_move_file.php" method="post">
<input type="text" name="url">
<input type="submit" value="Get file from url"/>
</form> 
```

然后在您的 upload_move_file.php 中放置一个适用于 url 而不是系统上传的部分。

```
/* make a folder to wite the downloads to and make it accessible 
** write permission for the web user */
$path = "files";
$uploaddir = $path.'/' ;

/* if your form sent the url, use something like this */
if (isset($_POST['url'])){
    $url_string = $_POST['url'];

    /* you will need the name from the url and image type */
    $name = substr($url_string , strrpos($url_string ,"/") + 1 ) ;
    $extension = substr($name , strrpos($name ,".") + 1 ) ;

    /* download and store the image in a temp file */
    $img = file_get_contents($url_string);

    /* Write the file over to the new name */
    $uploadfile = $path ."/". $name;
    file_put_contents($uploadfile, $img);

    /* you will need the file size */
    $img_size = filesize($path ."/". $name);    

    /* You could try loading that stuff into FILES array to 
    ** trick the upload script.

    $_FILES['picture_file']['name'] = $name;
    $_FILES['picture_file']['type'] = "image/$extension";
    $_FILES['picture_file']['size'] = $img_size;
    $_FILES['picture_file']['tmp_name'] = $uploadfile;
    $_FILES['picture_file']['error'] = '';

    OR just show it */

    die('Success!
      <center>
        <br />
        <img src="'.$uploadfile.'" 
        width="250" height="175" border="3" />
    </center>');

} /* else use the other idea that handled the local image. */ 
```

# c# - Parallel.Foreach SQL 查询有时会导致连接

> ID：16090460
> 
> 赞同：6
> 
> 时间：2013-04-18T18:25:35.123
> 
> 标签：c#, sql, parallel.foreach

我需要加快在我的应用程序中执行 12 个查询。我从常规 foreach 切换到 Parallel.ForEach。但有时我会收到一条错误消息，提示“ExecuteReader 需要一个打开且可用的连接连接的当前状态为正在连接。” 据我了解，由于 12 个查询中的许多查询都使用相同的 InitialCatalog，因此这 12 个查询中并没有真正的新连接，这可能是问题所在？我怎样才能解决这个问题？“sql”是“Sql”类型的列表——一个类只是一个字符串名称、字符串连接a和一个查询列表。这是代码：

```
 /// <summary>
    /// Connects to SQL, performs all queries and stores results in a list of DataTables
    /// </summary>
    /// <returns>List of data tables for each query in the config file</returns>
    public List<DataTable> GetAllData()
    {
        Stopwatch sw = new Stopwatch();
        sw.Start();
        List<DataTable> data = new List<DataTable>();

         List<Sql> sql=new List<Sql>();

        Sql one = new Sql();
         one.connection = "Data Source=XXX-SQL1;Initial Catalog=XXXDB;Integrated Security=True";
         one.name = "Col1";
         one.queries.Add("SELECT Name FROM [Reports]");
         one.queries.Add("SELECT Other FROM [Reports2]");
         sql.Add(one);

        Sql two = new Sql();
         two.connection = "Data Source=XXX-SQL1;Initial Catalog=XXXDB;Integrated Security=True";
         two.name = "Col2";
         two.queries.Add("SELECT AlternateName FROM [Reports1]");
         sql.Add(two);

         Sql three = new Sql();
         three.connection = "Data Source=YYY-SQL2;Initial Catalog=YYYDB;Integrated Security=True";
         three.name = "Col3";
         three.queries.Add("SELECT Frequency FROM Times");
         sql.Add(three);

        try
        {
            // ParallelOptions options = new ParallelOptions();
            //options.MaxDegreeOfParallelism = 3;
            // Parallel.ForEach(sql, options, s =>
            Parallel.ForEach(sql, s =>
            //foreach (Sql s in sql)
            {
                foreach (string q in s.queries)
                {
                    using (connection = new SqlConnection(s.connection))
                    {
                        connection.Open();
                        DataTable dt = new DataTable();
                        dt.TableName = s.name;
                        command = new SqlCommand(q, connection);
                        SqlDataAdapter adapter = new SqlDataAdapter();
                        adapter.SelectCommand = command;
                        adapter.Fill(dt);
                        //adapter.Dispose();

                        lock (data)
                        {
                            data.Add(dt);
                        }
                    }
                }
            }
            );
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString(), "GetAllData error");
        }

        sw.Stop();
        MessageBox.Show(sw.Elapsed.ToString());

        return data;
    } 
```

这是我制作的您需要的 Sql 类：

```
/// <summary>
/// Class defines a SQL connection and its respective queries
/// </summary>
public class Sql
{
    /// <summary>
    /// Name of the connection/query
    /// </summary>
    public string name { get; set; }
    /// <summary>
    /// SQL Connection string
    /// </summary>
    public string connection { get; set; }
    /// <summary>
    /// List of SQL queries for a connection
    /// </summary>
    public List<string> queries = new List<string>();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T19:06:30.583

我会重构您的业务逻辑（连接到数据库）。

```
public class SqlOperation
{
    public SqlOperation()
    {
        Queries = new List<string>();
    }

    public string TableName { get; set; }
    public string ConnectionString { get; set; }
    public List<string> Queries { get; set; }
}

public static List<DataTable> GetAllData(IEnumerable<SqlOperation> sql)
{
    var taskArray =
        sql.SelectMany(s =>
            s.Queries
             .Select(query =>
                Task.Run(() => //Task.Factory.StartNew for .NET 4.0
                    ExecuteQuery(s.ConnectionString, s.TableName, query))))
            .ToArray();

    try
    {
        Task.WaitAll(taskArray);
    }
    catch(AggregateException e)
    {
        MessageBox.Show(e.ToString(), "GetAllData error");
    }

    return taskArray.Where(t => !t.IsFaulted).Select(t => t.Result).ToList();
}

public static DataTable ExecuteQuery(string connectionString, string tableName, string query)
{
    DataTable dataTable = null;

    using (var connection = new SqlConnection(connectionString))
    {
        dataTable = new DataTable();
        dataTable.TableName = tableName;
        using(var command = new SqlCommand(query, connection))
        {
            connection.Open();

            using(var adapter = new SqlDataAdapter())
            {
                adapter.SelectCommand = command;
                adapter.Fill(dataTable);
            }
        }
    }

     return dataTable;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-18T18:41:40.537

Ado.Net 有一个非常聪明的连接池，所以通常你应该只打开连接和关闭每个命令的连接，让池处理它们是否真的被打开或关闭。

所以每个命令一个连接：

```
 Parallel.ForEach(sql, s=>
            //foreach (Sql s in sql)
            {
                foreach (string q in s.queries)
                {
                    using (connection = new SqlConnection(s.connection))
                    {
                        connection.Open();
                        DataTable dt = new DataTable();
                        dt.TableName = s.name;
                        command = new SqlCommand(q, connection);
                        SqlDataAdapter adapter = new SqlDataAdapter();
                        adapter.SelectCommand = command;
                        adapter.Fill(dt);
                        //adapter.Dispose();

                        lock(data){
                            data.Add(dt);
                        }
                    }
                }
            } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-27T03:00:01.900

您也可以使用***MultipleActiveResultSets=true;*** 连接字符串以支持多个阅读器

# iphone - 可以传递给 ios 中着色器的统一数组的最大大小是多少？

> ID：16090462
> 
> 赞同：7
> 
> 时间：2013-04-18T18:25:39.340
> 
> 标签：iphone, ios, opengl-es, opengl-es-2.0

我通过传递一组模型视图矩阵来使用实例化渲染。特定制服可能的最大数组大小是多少？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-10T22:34:55.407

该值将因硬件和实现而异。我相信

```
int maxUniformVectors;
glGet(GL_MAX_VERTEX_UNIFORM_VECTORS, &maxUniformVectors); 
```

应该回答你的问题。从文档中：这应该返回“可以在顶点着色器的统一变量存储中保存的四元素浮点、整数或布尔向量的最大数量。该值必须至少为 128。”

# java - 将 JSON 数据映射到 Java 对象

> ID：16090464
> 
> 赞同：3
> 
> 时间：2013-04-18T18:25:58.247
> 
> 标签：java, json

我一直在尝试使用我的 PC 上的 JSON 文件将 JSON 数据映射到 Java 对象，但它总是抛出异常：

`org.codehaus.jackson.map.exc.UnrecognizedPropertyException: Unrecognized field "title" (Class MovieResponse), not marked as ignorable at [Source: C:\M.json; line: 2, column: 13] (through reference chain: MovieResponse["title"])`

我的数据类：

```
import org.codehaus.jackson.annotate.JsonProperty;

public class MovieResponse{
  private String title;
  private Integer year;
  @JsonProperty("mpaa_rating")
  private String mpaaRating;
  private Integer runtime;
  @JsonProperty("critics_consensus")
  private String criticsConsensus;

  public String getTitle(){
    return title;
  }
  public String setTitle(String t){
    return title = t;
  }

  public Integer getYear(){
    return year;
  }
  public Integer setYear(Integer y){
    return year = y;
  }

  public String getMpaa(){
    return mpaaRating;
  }
  public String setMpaa(String mp){
    return mpaaRating = mp;
  }

  public Integer getRuntime(){
    return runtime;
  }
  public Integer setRuntime(Integer r){
    return runtime = r;
  }

  public String getCritics(){
    return criticsConsensus;
  }
  public String setCritics(String c){
    return criticsConsensus = c;
  }

  @Override
  public String toString(){
    return "MovieResponse[title="+title+",year="+year+",mpaa_Rating="+mpaaRating+",runtime="+runtime+",critics_Consensus="+criticsConsensus
            +"]";
  }
} 
```

我的映射器类：

```
import java.io.File;
import java.io.IOException;
import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;
import java.net.*;
import org.codehaus.jackson.annotate.JsonIgnoreProperties;
@JsonIgnoreProperties
public class Movie{
 public static void main(String[] args) throws MalformedURLException, URISyntaxException, IOException {
 MovieResponse a = new MovieResponse();
 ObjectMapper mapper = new ObjectMapper();
 try{

     MovieResponse response = new ObjectMapper().readValue(new File("C:\\M.json"), MovieResponse.class);
 }catch(MalformedURLException u){
    u.printStackTrace();
 }
 catch(IOException i){
    i.printStackTrace();
 }
 } 
```

json 文件包含以下数据：

```
{
  "title": "Toy Story 3",
  "year": 2010,
  "mpaa_rating": "G",
  "runtime": 103,
  "critics_consensus": "Deftly blending comedy, adventure, and honest emotion, Toy Story 3 is a rare second sequel that really works."
} 
```

我究竟做错了什么？我正在使用杰克逊图书馆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:42:09.657

这是我在您的代码中看到的问题列表：

1.  `@JsonIgnoreProperties`属性应该放在类之上，而`MovieResponse`不是`Movie`类之上。查看[文档](http://jackson.codehaus.org/1.4.0/javadoc/org/codehaus/jackson/annotate/JsonIgnoreProperties.html)，最值得注意的是关于“ignoreUnknown”属性的内容，默认为 false：

    > 公共抽象布尔**忽略未知**
    > 
    > 定义在反序列化期间是否可以忽略任何无法识别的属性的属性。如果为 true，则所有无法识别的属性——即**没有接受它们的设置者或创建者**——将被忽略而不会发出警告（尽管仍将调用未知属性的处理程序，如果有的话），无一例外。

2.  您的二传手不应返回任何值，这可以解释为什么杰克逊没有看到“头衔”二传手。以下是“title”的设置器应该是这样的：

    ```
    public void setTitle(String t) {
        title = t;
    } 
    ```

3.  不是它不起作用的原因，但是您要声明您的对象映射器两次，请考虑使用您的映射器而不是实例化一个新的映射器：

    ```
    MovieResponse response = mapper.readValue(new File("C:\\M.json"), MovieResponse.class); 
    ```

编辑：这是我认为的固定代码：

```
import java.io.File;
import org.codehaus.jackson.map.ObjectMapper;
import java.net.*;
import org.codehaus.jackson.annotate.JsonIgnoreProperties;

public class Movie {
    public static void main(String[] args) throws Exception {
        MovieResponse response;
        ObjectMapper mapper = new ObjectMapper();

        response = mapper.readValue(new File("C:\\M.json"), MovieResponse.class);
        System.out.println(response);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T19:09:53.543

这也可以

```
ObjectMapper mapper = new ObjectMapper();
mapper.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);
MovieResponse response = mapper.readValue(new File("C:\\M.json"), MovieResponse.class); 
```

# javascript - 调用 even with Javascript enabled?

> ID：16090469
> 
> 赞同：0
> 
> 时间：2013-04-18T18:26:13.117
> 
> 标签：javascript, noscript

Is it possible to invoke the `<noscript>` element even when JavaScript is enabled? I need to toggle it's visibility for demonstration purposes of what it will look like.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:28:07.163

您可以使用 中的内容创建一个新`<div>`元素，`<noscript>`然后在演示后将其删除：

```
// to create
var div = document.createElement("div");
div.innerHTML = document.getElementsByTagName("noscript")[0].innerHTML;
document.body.appendChild(div);

// to remove
document.body.removeChild(div); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T18:31:15.107

```
<noscript>stuff</noscript>
<div id="mydiv"><div>

$('#mydiv').text($('noscript').text()); 
```

[http://jsfiddle.net/5pD​​BT/](http://jsfiddle.net/5pDBT/)

# wpf - 仍然可以编辑 IsReadOnly 属性设置为 true 的 WPF 文本框

> ID：16090471
> 
> 赞同：0
> 
> 时间：2013-04-18T18:26:26.800
> 
> 标签：wpf, .net-3.5

我正在使用 TextBox，由于某些原因，它需要是只读的。我不会在这里争论原因。我知道我可以使用 TextBlock 或 Label 来显示不可编辑的内容，但在这种情况下，不幸的是，有 TextBox。

```
<TextBox IsReadOnly="True" Text="{Binding totalAmount, Mode=OneWay, StringFormat={}{0:C2}}" TextAlignment="Right" /> 
```

有人知道它是否存在已知问题吗？我正在使用 WPF 3.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:28:33.660

为什么不使用文本块？

```
<TextBlock Text="{Binding totalAmount, Mode=OneWay, StringFormat={}{0:C2}}" TextAlignment="Right"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-11T20:52:34.573

使用 TextBlock 不是答案，因为它是完全不同的控件。IsReadOnly 是 TextBox 的一个非常有用的状态，它可以通过数据绑定来切换真/假。根据 MSDN，如果文本框是只读的，则不允许用户输入或编辑，但可以进行编程更改。用户仍然可以选择文本，并且光标仍然出现。它也不会像禁用时那样灰显。

要回答这个问题，您的 TextBox 未显示为 ReadOnly 的最可能原因是因为有一种样式覆盖了该行为。请在您的代码中搜索可能隐式应用于所有 TextBox 类型的任何样式：

```
<Style TargetType="{x:Type TextBlock}">
    ...
</Style> 
```

您也可以尝试指定自己的显式空白样式，看看是否有帮助

```
<TextBox>
    <TextBox.Style>
        <Style TargetType="TextBox" />
    </TextBox.Style>
</TextBox> 
```

# c++ - 将代码组合在一起 C++

> ID：16090472
> 
> 赞同：1
> 
> 时间：2013-04-18T18:26:28.090
> 
> 标签：c++

我编写了两种代码解决方案，第一种是从文件中读取数据到向量中，然后进行一些计算并将新数据存储回向量中，第二种是允许我创建新文本文件的 GUI。它们都单独工作，但将它们组合成一个解决方案很困难，因为一个和另一个中有 2x`int main()`加 a 。有什么帮助会很棒吗？`class``struct`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:30:20.220

将它们包装在适当的数据结构中。

一个 c++ 程序总是只包含一个主入口点。作为一名程序员，你的工作就是将逻辑划分为逻辑上的划分。

在这种情况下，您可能希望创建一个从文件中读取数据的方法/函数。我会将 GUI 放在它自己单独的类中。

这个问题似乎有点奇怪，很明显你是编程新手。阅读更多关于数据结构和 c++ 语言的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:31:49.343

您可以让一个程序调用另一个程序的可执行文件（这在 UNIX 系统中相当流行）。

另一种选择是重命名主函数并更改它接收的参数，然后合并两个代码，确保编译并将类链接在一起，并从另一个调用一个函数。

只要它们不使用相同的名称，我就不会遇到类和结构的问题。如果是，您将不得不重命名其中一个，或者如果功能完全相同，则只需删除一个并使用另一个。

# javascript - Is it sane to use the Jquery Asynchronous Image Loader (JAIL) for every image and have the data-src attribute be the trigger?

> ID：16090475
> 
> 赞同：0
> 
> 时间：2013-04-18T18:26:46.290
> 
> 标签：javascript, jquery, jquery-plugins

I've recently been working on some legacy web app code that uses JAIL ([https://github.com/sebarmeli/JAIL](https://github.com/sebarmeli/JAIL)). Is it safe/sane to use JAIL on every "img" tag rather than having an additional class/id to limit the scope of JAIL to specific images?

For instance, is it advisable to do this (what our current code does):

```
$('img').jail(); 
```

And then expect JAIL to only kick in on images that actually have a "data-src" attribute? (90% of our images do not have data-src, and our expectation is that only data-src images will be handled by JAIL. Which seems to work most of the time, but there are a few errors that may be related to this after upgrading JAIL to 1.0.0, and it also seems like the overhead is a little crazy -- JAIL has to inspect every image?).

Should we instead using something like the img.lazy approach that the docs and examples seem to advocate (I say *seem* because they show this, but don't specifically recommend against the other)?

```
 <script>
   $(function() {
     $('img.lazy').jail();
   });
 </script> 
```

I'm not yet sure if the errors I'm seeing after upgrading are related to JAIL itself or other stuff on our site (there is a lot going on, much of it dynamic, and I'm not a JavaScript guru, so it's non-trivial to debug at the moment). (I'm seeing errors like those that were reported on earlier versions of JAIL, hence trying to upgrade from 0.9.5 to 1.0.0: [https://github.com/sebarmeli/JAIL/issues/22](https://github.com/sebarmeli/JAIL/issues/22) .)

Also, I'm concerned that even if our issues are not related to our current JAIL setup (something else), it may still be slow/expensive because we're asking JAIL to inspect every image?

Any (reasonable ;)) advice is greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:31:02.163

如果插件作用于 data-src 属性，则以该属性为目标。

```
$("img[data-src]").jail(); 
```

# java - 如何在java中不使用数组进行二进制搜索

> ID：16090476
> 
> 赞同：0
> 
> 时间：2013-04-18T18:26:50.113
> 
> 标签：java

我正在尝试创建一个不使用数组的二进制搜索。它还需要计算在找到数字之前它进行了多少次搜索。我还必须使用随机访问文件。

```
RandomAccessFile raf=new RandomAccessFile(new File("Project 10"),"rw");

//writing in random numbers. Different numbers will be used when it is being tested

raf.writeInt(-5);
raf.writeInt(-1);
raf.writeInt(122);
raf.writeInt(124);
raf.writeInt(125);
raf.writeInt(256); 
```

用户输入您要搜索的号码。我需要在不使用扫描仪类的情况下执行此操作。这样做的方法将非常有帮助

我知道这就是您使用数组进行二进制搜索的方式。我需要帮助弄清楚如何在没有数组的情况下做到这一点

```
public static int binarySearch(int[] list, int key) {
    int low = 0;
    int high = list.length - 1;

    while (high >= low) {
        int mid = (low + high) / 2;
        if (key < list[mid])
            high = mid - 1;
        else if (key == list[mid])
            return mid;
        else
            low = mid + 1;
    }
    return -low - 1; // Now high<low, key not found
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:46:17.707

这实际上不是一个特定于 java 的问题，而是一个算法问题。虽然没有说明，但您的 binarySearch 显然是基于文件以某种方式神奇地排序。

也就是说，您知道 raf.writeInt(xxx) 会将规范化的字节长度值写入文件。将文件本身视为一个数组，其中每个索引位置为 a[i * 4] == 因此，创建将“mid”、“low”和“high”计算为所需索引的倍数的小函数。

谷歌“外部排序”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:48:42.937

如果您将文件视为数组，则不需要数组或列表。假设文件已排序，伪代码将类似于

1.  获取文件中的行数（可能需要猜测......不确定如何计算新行）
2.  读取总行数 1/2 处的值
3.  如果值相同，则完成。如果较小，请重复使用文件的前半部分。如果更大，请重复文件的后半部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:47:58.200

```
Would something like this work?

public static int binarySearch(int raf//for the file?, int key//for input?){
int low=0;
int high=raf.length()-1
while (high>=low){
int mid=(low+high)/2;
if (key<raf.[mid])// Does the [] automatically make it an array
high=mid-1;
else if (key==raf.[mid])
return mid;
else
low=mid+1;
}
return-low-1//now high < low, key not found
}
} 
```

# windows - Alternative to TControl.Perform

> ID：16090478
> 
> 赞同：2
> 
> 时间：2013-04-18T18:27:01.310
> 
> 标签：windows, delphi, message-queue, vcl

the `TControl.Perform` code is:

```
var
  Message: TMessage;
begin
  Message.Msg := Msg;
  Message.WParam := WParam;
  Message.LParam := LParam;
  Message.Result := 0;
  if Self <> nil then WindowProc(Message);
  Result := Message.Result; 
```

The program execution awaits return, am i right?

There is an alternative, for posting a message in a TFORM queue, inside another thread, in the same Application, without waiting return?

## EDIT

This approach could mitigate the problem?

```
interface

const  
  WM_DOSTUFF = WM_APP + $001;

TMyForm = class(TForm)
{stuff}
public
{Other stuff}
  procedure DoMyStuff(var Msg: TMessage); message WM_DOSTUFF;   
{More stuff}
end;  

var
  MyHandle: HWND;

implementation

constructor TMyForm.Create(AOwner: TComponent);
begin
  inherited;
  MyHandle := AllocateHWnd(DoMyStuff);
end; 

destructor TMyForm.Destroy;
begin
  DeallocateHWnd(MyHandle);
  inherited;
end; 
```

And use normally inside a thread:

```
 PostMessage(MyHandle, WM_DOSTUFF, 0, 0); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T18:30:01.787

要将消息添加到与另一个窗口关联的线程的队列中，您需要使用[`PostMessage`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644944.aspx)Windows API 函数。

```
PostMessage(WindowHandle, Msg, WParam, LParam); 
```

现在，如果您在与 GUI 线程不同的线程上执行此操作，则无法使用`Form.Handle`来获取窗口句柄。那是因为这样做会引入与 GUI 线程的竞争。如果需要重新创建句柄，它将与您的线程而不是 GUI 线程关联。记住规则：只与来自 GUI 线程的 VCL 对象交互。

因此，您通常不使用`PostMessage`VCL 表单的句柄，因为您不能轻易保证消息将被传递到正确的窗口。即使您同步访问窗口句柄，也可以重新创建窗口并且您的消息不会到达。

异步传递消息的最简单方法是调用[`TThread.Queue`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TThread.Queue). 这不需要窗口句柄来操作，因此避免了 VCL 对象关联到 GUI 线程的所有问题。您调用时发送的过程`Queue`在 GUI 线程上执行，因此可以安全地执行所有 VCL 操作。

如果您使用的是较旧的 Delphi，`TThread.Queue`则它会更复杂。在这种情况下，您应该使用`PostMessage`. 但是您必须将消息定向到与表单无关的窗口。将其定向到使用创建的窗口[`AllocateHWnd`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.AllocateHWnd)。请记住，您必须调用`AllocateHWnd`GUI 线程。以这种方式创建的 Windows 不受重新创建的影响，并且是`PostMessage`. 然后，该窗口的窗口过程可以将消息转发到您的表单。这是安全的，因为窗口过程在与其窗口关联的线程中执行。在这种情况下，这是 GUI 线程。

顺便说一句，如果您`TControl.Perform`从 GUI 线程调用，那么这也是错误的。预计会出现间歇性且难以诊断的故障。

# d3.js - D3.js column chart inversing when adding text

> ID：16090482
> 
> 赞同：0
> 
> 时间：2013-04-18T18:27:13.083
> 
> 标签：d3.js

I am trying to create a basic column chart using divs from the example in allignedleft and the one mike has posted. The chart works except when i add text, it inverses.

```
<!DOCTYPE html>
<head>
<style type="text/css">

div.abc {
 display: inline-block;
 width: 20px;
 height: 75px;
 background-color: teal;
 margin-right: 2px;
}

</style>
</head>
<body>
<script type="text/javascript" src="http://d3js.org/d3.v2.js?2.8.1"></script>
<script>

var dataset = [16,13,8,2,1,10,0,5,24,15,2,6,12];

d3.select("body").selectAll("div")
.data(dataset)
.enter()
.append("div")
.attr("class", "abc")
.style("height", function(d) {
    var barHeight = d * 5;
    return barHeight + "px";
})
.style("margin-top",function(d) {
    var barHeight = d * 5;
    return 500 - barHeight;
})
.style("text-align","center")
.style("color","black")
.text(function (d) { return d; });
</script>
</body>
</html> 
```

thanks

Sriram

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:52:25.120

问题是 div 中文本的垂直对齐方式。如果你添加

```
vertical-align: bottom; 
```

到你的CSS，它应该再次工作。请注意，您的某些 div 对于文本来说太小了。在这些情况下，标签不会与其他标签对齐。我建议您为标签创建单独的 div 并相应地放置它们。

# python - 相当于 rpy2 中的 scale_size_area 用于 Python 中的 ggplot2？

> ID：16090484
> 
> 赞同：2
> 
> 时间：2013-04-18T18:27:13.817
> 
> 标签：python, ggplot2, rpy2

rpy2 是否有`scale_size_area()`来自 ggplot2 的等价物？如果没有，我该怎么写？我指的是这个功能：

[http://docs.ggplot2.org/0.9.3/scale_size_area.html](http://docs.ggplot2.org/0.9.3/scale_size_area.html)

我想根据面积按大小缩放点，而不是我认为默认的半径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T01:13:26.870

不，rpy2 没有此功能，因为 ggplot2 包装器模块实际上是手动编码的。（希望，正如作者所说，元编程最终将用于使代码更短、更自动化。）然而，好消息是添加自己的功能并不难。以下是将 scale_size_area() 添加到现有功能的方法：

```
import rpy2.robjects.lib.ggplot2 as ggplot2
import rpy2.robjects as ro

mtcars = ro.r('mtcars')
gp = ggplot2.ggplot(mtcars)
pp = gp + ggplot2.aes_string(x='wt', y='mpg', size='cyl') + ggplot2.geom_point()

# using the standard size (radius) aesthetic for size
pp.plot()

# create the ScaleSizeArea (based on ggplot2.py in rpy2)
class ScaleSizeArea(ggplot2.ScaleSize):
    _constructor = ggplot2.ggplot2_env['scale_size_area']

ggplot2.scale_size_area = ScaleSizeArea.new

# now you can use scale_size_area instead!
pp_area = pp + ggplot2.scale_size_area()
pp_area.plot() 
```

# jquery - Find a string of text in an element and wrap some span tags round it

> ID：16090487
> 
> 赞同：53
> 
> 时间：2013-04-18T18:27:27.003
> 
> 标签：jquery, string, text

I want to find a string of text in an element and wrap some span tags round it. E.g.

From:

```
<h2>We have cows on our farm</h2> 
```

To:

```
<h2>We have <span class='smallcaps'>cows</span> on our farm</h2> 
```

I've tried:

```
$("h2:contains('cow')").each(function() {
 $(this).text().wrap("<span class='smallcaps'></span>");
}); 
```

But that only wraps the whole containing `h2` tag.

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-04-18T18:32:18.037

```
$("h2:contains('cow')").html(function(_, html) {
   return html.replace(/(cow)/g, '<span class="smallcaps">$1</span>');
}); 
```

[http://jsfiddle.net/w5ze6/1/](http://jsfiddle.net/w5ze6/1/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-18T18:31:04.150

另一种方法，按关键字拆分并与更新的 html 连接。

```
$("h2:contains('cow')").html(function(_, html) {
   return html.split('cow').join("<span class='smallcaps'>cow</span>");
}); 
```

注意：我没有对此进行测试，但我假设这会比替换更糟糕，但为了提供信息，我无论如何都会包括在内

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-06-27T20:02:39.483

这是@undefined 答案的变体，它循环遍历一组项目：

```
var barnyardArray = [
    'cow',
    'horse',
    'chicken',
    'hog',
    'goat',
    'goose',
    'duck',
    'llama'
];

$.each(barnyardArray, function (index, value) {
    $("p:contains(" + value + ")").html(function (_, html) {
        var regex = new RegExp(value, 'g');
        return html.replace(regex, '<span class="smallcaps">' + value + '</span>');
    });
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-26T21:46:40.717

您通常希望以不区分大小写的方式匹配一些任意文本。有时，搜索查询包含特殊的正则表达式元字符的字符，必须在编译模式之前进行转义。

使用类似的解决方案

```
var words = ["cows", "c++", "$var$"];
$("h2").html(function(_, html) {
   return html.replace(new RegExp(words.map(function(x) { 
       return x.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&')
     }).join('|'), "gi"), '<span class="smallcaps">$&</span>')
});
```

```
span { color: red}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<h2>We have cows on our farm</h2>
<h2>C++ Apps $var$</h2>
```

请注意，这里的正则表达式看起来像`/cows|c\+\+|\$var\$/gi`，其中`+`和`$`，[**特殊的正则表达式元字符**](https://www.regular-expressions.info/characters.html)，被转义，替代项与`|` [**交替运算符**](https://www.regular-expressions.info/alternation.html)。

另外，请注意，不需要任何外括号，因为默认组是包含整个匹配项的组 0，并且 JavaScript 正则表达式中对组 0 的反向引用是`$&`. 因此，替换总是使用与在文本中找到的完全相同的搜索词来完成。

请注意，如果您*只需要匹配整个单词*，则需要特殊`\b`的边界，或者（如果搜索词总是由字母、数字或`_`）或`(\W|^)`/ `(?!\w)`（如果可以有特殊字符）：

```
var words = ["cows", "c++", "$var$"];
$("h2").html(function(_, html) {
   return html.replace(new RegExp("(\\W|^)(" + words.map(function(x) { 
       return x.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&')
     }).join('|') + ")(?!\\w)", "gi"), '$1<span class="smallcaps">$2</span>')
});
```

```
span { color: red}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<h2>We have cows in our farm cowshed</h2>
<h2>C++ Apps $var$ in $var$moretext</h2>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-05T19:45:52.343

在我的情况下，我在目标 div 中有一些标签，还有一些文本我需要将该文本包装到一个链接中。

这就是我在“你尝试了什么”之后所做的。

```
var oldText = $(this).text(),
newText = $(this).html().replace(
    oldText, 
    "<a class='k-link' href='#' class='smallcaps'>" + 
        oldText + 
    "<span class='k-icon k-i-arrow-n'></span></a>"
);
$(this).html(newText); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-18T18:32:04.213

```
$("h2:contains('cow')").each(function() {
    var newText = $(this).html().replace("cow", "<span class='smallcaps'></span>");
    $(this).html(newText);
}); 
```

# .net - 在 Visual Studio 中开发语言支持的重叠替代方案

> ID：16090489
> 
> 赞同：4
> 
> 时间：2013-04-18T18:27:35.867
> 
> 标签：.net, visual-studio, visual-studio-2012, visual-studio-sdk

我想在 Visual Studio 中开发对特定语言的支持。MPF 语言服务和 MEF 编辑器扩展似乎有很多重叠，我无法明确回答我应该使用哪一个。

我只对在 Visual Studio 2012 及更高版本中开发这种语言支持感兴趣。我正在使用 C# 并希望仅使用托管 API。

MSDN 文档指出语法高亮应该使用语言服务来完成。但是当你去那里的文档时，有一个注释可以说是建议使用 MEF。但是，当您阅读 MEF 文档时，它并没有真正说明它旨在处理全文件语法突出显示。措辞让我觉得它是用于穿插突出装饰的。

然而，与此相反，Ok！sample 演示了我认为是完整文件语法突出显示的内容，尽管使用这种规模的示例，它是否真的建议应该以这种方式使用它并不是很清楚。

MPF 语言服务似乎支持向“另存为”对话框添加过滤器。对于仅通过 MEF 支持的语言，我还没有看到类似的东西，但我可能错过了它。我没有发现任何迹象表明它们中的任何一个都支持向“打开”对话框添加文件类型过滤器。这向我表明，MEF 编辑器扩展并非旨在实现全面的语言扩展，而是旨在扩展现有语言扩展。

请问有什么想法吗？

**编辑：**

我希望你能直接回答的一些问题：

1.  用于突出显示的 MEF 编辑器扩展点是用于完整文件语法突出显示实现，还是仅用于散布装饰？

2.  如果我为 MEF 导出注册了 FileType 和 ContentType，需要哪些额外步骤（或者甚至可能？）以使相关文件过滤器显示在各种文件对话框中？

3.  MEF 编辑器扩展点是否旨在替换并可能最终弃用 MPF 语言服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:46:40.110

对于全功能支持，您将无法只使用一件事。但是，您最终得到的可能是实现 MEF 接口和实现 Visual Studio 的一些核心 COM 接口的组合。您根本不需要使用 MPF 语言服务包。

我认为您的问题比您预期的要广泛，这使我很难写出完整的答案。

编辑：对于新问题。

1.  您可以使用 的实现来`IClassifier`实现全文件语法高亮。我所有较新的基于 Visual Studio 的 IDE 都专门使用它。

2.  您需要导出一个`ContentTypeDefinition`，但不一定是文件类型。我刚刚发布了一篇博客文章，描述了我注册文件类型和扩展名所采取的步骤：

    [Visual Studio 2012 中的文件类型和扩展名](http://blog.280z28.org/archives/2013/04/165/)

3.  也许？更重要的是，有些事情它更擅长，而其他事情它现在根本无法做到，因此您可以选择平衡以获得最佳的整体生产力。

# knockout.js - How do I access an object by index in a knockout observablearray?

> ID：16090491
> 
> 赞同：13
> 
> 时间：2013-04-18T18:27:51.123
> 
> 标签：knockout.js

I have an observable array:

```
var myObservableArray = ko.observableArray([
    { name: "Car", price: "9999" },
    { name: "Shoes", price: "20" },
    { name: "Paper", price: "1" }
]); 
```

I'm trying to access the price of the first item in the array.

```
<div data-bind="text: myObservableArray()[0]"></div> 
```

Displays:

```
[object Object] 
```

I've tried:

```
<div data-bind="text: myObservableArray()[0].price"></div> 
```

But that just returns a null.

What's the correct syntax for doing this?

Edit: Fixed a copy and paste error pointed out below.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T19:16:51.513

除了使用错误的属性名称，`developerexampledata`而不是`myObservableArray`，您的代码就可以了。

这是一个[工作小提琴](http://jsfiddle.net/tyrsius/GB4ae/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-05T11:24:28.400

这可能只是因为您在填充数组之前尝试访问数组的第一项。

用一个简单的 if 语句包装您的数据绑定控件以首先检查：

```
<!-- ko if: (myObservableArray().length > 0) -->
    <div data-bind="text: myObservableArray()[0].price"></div>
<!-- /ko --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-04T17:20:34.990

错误道.....

```
self.getvaluefrom = function (a ,b) 
```

尝试 catch 返回一个有效值，然后添加`data-bind="text:getvaluefrom(a,b)` 如果该项目不在数组中，您将得到一个 ko 错误....

ko html 仅显示数组的静态有效条目....

# python - 如何从scrapy中获得好的结果

> ID：16090497
> 
> 赞同：2
> 
> 时间：2013-04-18T18:28:12.953
> 
> 标签：python, html, web-scraping, scrapy

我正在尝试使用 scrapy 从维基百科中抓取详细信息。我能够刮掉它，但我得到了一个非常混乱和糟糕的结果。因为我是python和scrapy的新手，所以我很难解决这个问题。

这是我的代码：

```
from scrapy.spider import BaseSpider

from scrapy.selector import HtmlXPathSelector

from wikipedia.items import WikipediaItem

class WikipediaSpider(BaseSpider):
    name = "wiki"
    allowed_domains = ["wikipedia.org"]
    start_urls = ["http://en.wikipedia.org/wiki/Main_Page"]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//table[@id="mp-upper"]/tr')
        items = []
        for site in sites:
            item = WikipediaItem()
            item['title'] = site.select('.//a/text()').extract()
            item['link'] = site.select('.//a/@href').extract()
            item['details'] = site.select('.//p/text()').extract()
            items.append(item)
        return items 
```

这是结果：

```
2013-04-19 02:18:48+0800 [wiki] DEBUG: Scraped from <200 http://en.wikipedia.org/wiki/Main_Page>

{'details': [u' is a fungal species found in moist habitats in ',

u'. The species produces brown ',
                 u' with ',

                 u' of varying shapes up to 40 millimetres (1.6\xa0in) across, and tall, thin ',

                 u' up to 62 millimetres (2.4\xa0in) long, at the base of which is a large and well-defined "bulb". The stem varies in colour, with whitish, pale yellow-brown, pale red-brown, pale brown and grey-brown all observed. The species produces unusually shaped, irregular ',

                 u', each with a few thick protrusions. This feature helps differentiate it from other species that would otherwise be similar in appearance and ',

                 u'. It grows in ',

                 u' association with ',

                 u', and it is for this that the species is named. However, particular species favoured by the fungus are unclear and may include ',

                 u' and ',

                 u' taxa. The mushrooms grow from the ground, often among mosses or ',

                 u'. The species was first described in 2009, and within the genus ',

                 u', it is a part of the ',

                 u' ',

                 u'. The ',

                 u' ',

                 u' was collected from the shore of a lake near ',

                 u', Finland. The species has also been recorded in Sweden and, at 
least in some areas, it is relatively common. (',

                 u')',

                 u'Recently featured: ',

                 u'\xa0\u2013 ',

                 u'\xa0\u2013 ',

                 u': ',

                 u' ',

                 u' ',

                 u'More anniversaries: ',

                 u' ',

                 u' '],

     'link': [u'/wiki/File:Inocybe_saliceticola.jpg',

              u'/wiki/Inocybe_saliceticola',

              u'/wiki/Nordic_countries',

              u'/wiki/Mushrooms',

              u'/wiki/Pileus_(mycology)',

              u'/wiki/Stipe_(mycology)',

              u'/wiki/Spore',

              u'/wiki/Habit_(biology)',

              u'/wiki/Mycorrhizal',

              u'/wiki/Willow',

              u'/wiki/Beech',

              u'/wiki/Alder',

              u'/wiki/Detritus',

              u'/wiki/Section_(botany)',

              u'/wiki/Holotype',

              u'/wiki/Nurmes',

              u'/wiki/Inocybe_saliceticola',

              u'/wiki/Thistle,_Utah',

              u'/wiki/Be_Here_Now_(album)',

              u'/wiki/Sumatran_rhinoceros',

              u'/wiki/Wikipedia:Today%27s_featured_article/April_2013',

              u'https://lists.wikimedia.org/mailman/listinfo/daily-article-l',

              u'/wiki/Wikipedia:Featured_articles',

              u'/wiki/Wikipedia:Recent_additions',

              u'/wiki/File:Ezra_Meeker_1921_crop.jpg',

              u'/wiki/Ezra_Meeker',

              u'/wiki/Oregon_Trail',

              u'/wiki/Bullock_cart',

              u'/wiki/Italy_at_the_2009_Mediterranean_Games',

              u'/wiki/2009_Mediterranean_Games_medal_table',

              u'/wiki/Cossack_hetman',

              u'/wiki/Ivan_Petrizhitsky-Kulaga',

              u'/wiki/Cossacks',

              u'/wiki/Fokus_(magazine)',

              u'/wiki/Amir_Garrett',

              u'/wiki/College_basketball',

              u'/wiki/Fastball',

              u'/wiki/Armenian_Genocide',

              u'/wiki/Karin_dialect',

              u'/wiki/Scottish_American',

              u'/wiki/Daniel_Pennie_House',

              u'/wiki/Wikipedia:Recent_additions',

              u'/wiki/Wikipedia:Your_first_article',

              u'/wiki/Template_talk:Did_you_know',

              u'/wiki/Slang',

              u'/wiki/Hammer',

              u'/wiki/Church_(building)',

              u'/wiki/Wikipedia:Today%27s_articles_for_improvement',

              u'/wiki/File:2013_Boston_Marathon_aftermath_people.jpg',

              u'/wiki/West_fertilizer_plant_explosion',

              u'/wiki/West,_Texas',

              u'/wiki/Texas',

              u'/wiki/Moment_magnitude_scale',

              u'/wiki/2013_Sistan_and_Baluchestan_earthquake',

              u'/wiki/Sistan_and_Baluchestan_Province',

              u'/wiki/15_April_2013_Iraq_attacks',

              u'/wiki/Boston_Marathon_bombings',

              u'/wiki/2013_Boston_Marathon',

              u'/wiki/Death_and_state_funeral_of_Hugo_Ch%C3%A1vez',

              u'/wiki/Nicol%C3%A1s_Maduro',

              u'/wiki/Venezuelan_presidential_election,_2013',

              u'/wiki/List_of_Presidents_of_Venezuela',

              u'/wiki/Adam_Scott_(golfer)',

              u'/wiki/2013_Masters_Tournament',

              u'/wiki/Government_of_India',

              u'/wiki/Bollywood',

              u'/wiki/Pran',

              u'/wiki/Dadasaheb_Phalke_Award',

              u'/wiki/Deaths_in_2013',

              u'/wiki/Colin_Davis',

              u'/wiki/Maria_Tallchief',

              u'/wiki/Jonathan_Winters',

              u'//en.wikinews.org/wiki/Main_Page',

              u'/wiki/Portal:Current_events',

              u'/wiki/April_18',

              u'/wiki/File:Stpetes.JPG',

              u'/wiki/1506',

              u'/wiki/St._Peter%27s_Basilica',

              u'/wiki/Vatican_City',

              u'/wiki/Old_St._Peter%27s_Basilica',

              u'/wiki/1689',

              u'/wiki/Militia_(United_States)',

              u'/wiki/Boston',

              u'/wiki/1689_Boston_revolt',

              u'/wiki/Dominion_of_New_England',

              u'/wiki/1923',

              u'/wiki/New_York_Yankees',

              u'/wiki/Major_League_Baseball',

              u'/wiki/Yankee_Stadium_(1923)',

              u'/wiki/1938',

              u'/wiki/Superman',

              u'/wiki/Jerry_Siegel',

              u'/wiki/Joe_Shuster',

              u'/wiki/Action_Comics_1',

              u'/wiki/Superhero',

              u'/wiki/Comic_book',

              u'/wiki/1947',

              u'/wiki/List_of_the_largest_artificial_non-nuclear_explosions',

              u'/wiki/Royal_Navy',

              u'/wiki/Tonne',

              u'/wiki/Ammunition',

              u'/wiki/Heligoland',

              u'/wiki/1949',

              u'/wiki/Republic_of_Ireland',

              u'/wiki/Commonwealth_of_Nations',

              u'/wiki/1996',

              u'/wiki/1996_shelling_of_Qana',

              u'/wiki/Qana',

              u'/wiki/Operation_Grapes_of_Wrath',

              u'/wiki/United_Nations_Interim_Force_in_Lebanon',

              u'/wiki/April_17',

              u'/wiki/April_18',

              u'/wiki/April_19',

              u'/wiki/Wikipedia:Selected_anniversaries/April',

              u'https://lists.wikimedia.org/mailman/listinfo/daily-article-l',

              u'/wiki/List_of_historical_anniversaries',

              u'/wiki/Coordinated_Universal_Time',

              u'//en.wikipedia.org/w/index.php?title=Main_Page&action=purge'],
 'title': [u'Inocybe saliceticola',

 u'Nordic countries',

               u'mushrooms',

               u'caps',

               u'stems',

               u'spores',

               u'habit',

               u'mycorrhizal',

               u'willow',

               u'beech',

               u'alder',

               u'detritus',

               u'section',

               u'holotype',

               u'Nurmes',

               u'Thistle, Utah',

               u'Be Here Now',

               u'Sumatran rhinoceros',

               u'Archive'

               u'List of historical anniversaries',

               u'UTC',

               u'Reload this page']} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:22:40.520

我无法访问您所做的同一页面，但您获得的结果可能非常不稳定，因为维基百科文本中充满了链接。当你这样做时`site.select('.//p/text()')`，你只选择节点正下方的文本`<p>`。这意味着子节点内部的`<a href=..>text</a>`内容不会被刮掉。链接标签拆分结果，所以你最终得到一个奇怪的列表。

如果要检索可以使用的每个节点

```
contents = site.select('.//p/node()').extract()
item['details'] = ''.join(contents) 
```

这样，您将拥有标签内的所有内容`<p>`（包括`<a>`标签）。如果您只想要没有链接标签的文本，那么您可以使用`strip_html(item['details'])`（实际上，`contents = site.select('.//p//text()').extract()`可能也可以工作并且更加面向 xpath）。

# ios - Simple sideways scrolling of images - UIScrollView or UIPageViewController?

> ID：16090499
> 
> 赞同：1
> 
> 时间：2013-04-18T18:28:14.667
> 
> 标签：ios, uiview, uiscrollview, uiimage, uipageviewcontroller

I have a requirement to implement timed horizontal scrolling of several images which take up most of the screen (except for the top which will be occupied by a static navigation bar-like `UIView`).

It needs to be timed so the images can swap programmatically but also user-swipable so the user can flick between them if they choose to. There are no requirements for the user to be able to pinch, zoom, scroll within an individual image etc. as each image is exactly the size of the available remaining space on the screen.

Googling for how to do this turns up a plethora of possibilities, some say use an existing library, some say to use `UIScrollView`, others say to use a `UIPageViewControllers`.

Which of the possibilities is most suitable?

Its for iOS6 and iOS5.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T18:43:16.640

ATPagingView 是一个很好的代码库，可以满足您的需要。您必须自己实现切换视图的计时器，但它确实具有用户启用的切换功能，就像您所说的那样。

[https://github.com/andreyvit/SoloComponents-iOS](https://github.com/andreyvit/SoloComponents-iOS)

# programming-languages - 破译这是什么语言或语法

> ID：16090504
> 
> 赞同：5
> 
> 时间：2013-04-18T18:28:26.963
> 
> 标签：programming-languages

我们正在尝试破译一些规则语法，但不确定其来源。

这是一个例子：

```
(CARS->TYPE='C').and.(CARS->CD_CODE<>'').and.('|'+INVOICE->TYPE+'|'$'|AAA|').and.('|'+SUBSTR(INVOICE->TYPE,1,2)+'|'$'|11|') 
```

具体来说，我们试图理解`|`和`$`。任何人都可以让我知道他们是否看到了与源语言相似的内容或对`|`and的正确解释`$`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:45:54.890

从它的语法我们可以看出它是一种“现代”语言。记住“*现代*”好吗；）

```
substr
.and. 
-> 
```

与 cobol 和汇编语言相比，它们非常现代。

> (CARS->TYPE='C').and.(CARS->CD_CODE<>'').and.('|'+INVOICE->TYPE+'|'$'|AAA|').and.(' |'+SUBSTR(INVOICE->TYPE,1,2)+'|'$'|11|')

伪代码将是：

```
(if car type is 'C'
and
if car cd_code is not empty
and
if invoice type is 'AAA'
and
if invoice type first 2 letters are '11')
then return true 
```

我对使用 $ 的猜测是：

```
= and <> are only when compare against a character
$ when compare array of character, i.e. strings. 
```

（我不知道输出是什么，因为它将整个发票类型与 AAA 进行比较，甚至前两个字母为 11。也许您在提交之前编辑了代码？）

**Fortran 90**可能是一个猜测，但甚至可能是**DBase III**。

DBase 链接： http: [//lynnbob.com/bob/articles/DBASEIIIPlusLevel2.htm](http://lynnbob.com/bob/articles/DBASEIIIPlusLevel2.htm)

Fortran 链接： [http ://www.ews.uiuc.edu/~mrgates2/docs/fortran.html](http://www.ews.uiuc.edu/~mrgates2/docs/fortran.html)

对于 DBASE 关于管道...

*如果传递参数，它们必须用 | 分隔。| （管道）。即使没有传递参数，管道 || 也是必需的。如果您传递参数，它们将在 || 中分隔。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:36:55.300

这不是 BASIC、Pascal、C、Java、perl、Python、COBOL 或 FORTRAN，我可以从这些语言的经验中告诉你很多。提及您正在使用的规则引擎可能会有所帮助。

正在执行的操作看起来很像匹配操作。

'|' 看起来像管道字符的字符串文字 | ，并且考虑到上下文，它可能被用作类似 CSV 的平面文件格式数据库中的分隔符。例如，明文可能类似于 |INVOICETYPE|something|AAA|

但是，无法帮助您使用 $ 运算符。这可能是变量替换或匹配任何操作，甚至是连接器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:46:41.770

我的猜测：*Fortran。*

它现在是一种相当复杂的语言。我不相信它有一个`->`运营商，但它似乎有`=>`。也许这是您的代码片段中的供应商扩展。

支持 Fortran 的证据是`.and.`运算符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T20:38:13.507

看起来像 FORTRAN 语言。虽然`->`不是标准运算符。`|`只是一个字符串（看起来不像运算符），但肯定`$`看起来像一个运算符，也许是用于指定字符串格式的东西？推断此 cform 始终出现在字符串组之间的事实。

# php - 尝试创建一个简单的图像上传器

> ID：16090505
> 
> 赞同：0
> 
> 时间：2013-04-18T18:28:27.963
> 
> 标签：php, html

我正在尝试为我的 Web 应用程序创建一个图像上传器。我曾尝试在线搜索有关如何创建解决方案的解决方案，但没有找到任何真正的帮助。我也不确定应该使用什么词来搜索正确的结果。我确实在 W3Schools 网站 ( [http://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp) ) 上找到了一些东西，但我仍然无法将文件上传到我的服务器。不确定是什么问题，因为我按照网站上的说明进行了设置。我也发现了这个（[JavaScript：上传文件](https://stackoverflow.com/questions/5587973/javascript-upload-file))，但这并不完全是我想要的。我仍然需要 php 脚本，因为图像不是我要发送到服务器的唯一内容。我还将发送其他信息以存储到我在服务器上的数据库中，例如图像名称和与图像相关的其他信息。

我正在使用的 php 脚本（我从 W3S 网站上下载下来）位于下方。我遇到的问题是，一旦我点击提交按钮，我的页面就会崩溃，或者我应该说我得到了服务器错误，但没有关于导致它的原因的信息。任何帮助将不胜感激

```
<?php
$allowedExts = array("gif", "jpeg", "jpg", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if (($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/jpg")
|| ($_FILES["file"]["type"] == "image/pjepg")
|| ($_FILES["file"]["type"] == "image/x-png")
|| ($_FILES["file"]["type"] == "image/png"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts)) {
    if ($_FILES["file"]["error"] > 0) {
        echo "Error: " . $_FILES["file"]["error"] . "<br>";
    }
    else {
        echo "Upload: " . $_FILES["file"]["name"] . "<br>";
        echo "Type: " . $_FILES["file"]["type"] . "<br>";
        echo "Size: " . ($_FILES["file"]["size"] / 1024) . " KB<br>";
        echo "Stored in: " . $_FILES["file"]["tmp_name"];

        if (file_exists("public_hmtl/uploads/" . $_FILES["file"]["name"])) {
            echo $_FILES["file"]["name"] . " already exists. ";
        }
        else {
            move_uploaded_file($_FILES["file"]["tmp_name"], "public_hmtl/uploads/" . $_FILES["file"]["name"]);
            echo "Stored in: " . "public_hmtl/uploads/" . $_FILES["file"]["name"];
        }
    }
}
else {
    echo "Invalid file";
}
?> 
```

这也是表单的 html。

> ```
>  <!DOCTYPE html>
>     <html>
>     <head>
>         <title>Location details</title>
>         <meta name="viewport" content="width=device-width, initial-scale=1.0" />
>     </head>
>     <body>
>         <div>
>             <form enctype="multipart/form-data" method="post" action="scripts/snap.php">
>         <!--<p>
>             <input id="plat" class="plat" name="plat" type="hidden" value="" />
>             <input id="plon" class="plon" name="plon" type="hidden" value=""  />
>         </p>-->
>         <div class="row">
>             <label for="file">Select an image to Upload</label><br />
>             <input type="file" name="file" id="file" />
>         </div>
>         <div id="filename"></div>
>         <div id="fileSize"></div>    
>         <div id="fileType"></div>
>         <div class="row">
>             <input type="submit" name="submit" value="Submit" />
>             <!--<input type="button" onclick="uploadFile()" value="Upload" />-->
>         </div>
>         <div id="progressNumber"></div>
>     </form>
> </div> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:52:52.840

if语句中，开闭标签不匹配，更正一下

```
if ( ( ($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/jpg")
|| ($_FILES["file"]["type"] == "image/pjepg")
|| ($_FILES["file"]["type"] == "image/x-png")
|| ($_FILES["file"]["type"] == "image/png")
)
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:46:11.933

如果您可以扩展您收到的此服务器错误，那就太好了。我没有足够的代表发表评论，所以必须在这里要求澄清。

*   你上传到哪个服务器？public_html/uploads/ 目录真的存在吗？您用来指向它的路径是否正确？
*   您的临时上传目录设置为什么？
*   此外，请检查您是否正确选择了文件扩展名。也许使用 pathinfo()。下面的例子。

    $extension = pathinfo($_FILES['file']['name']);

    $ext = $extension['extension'];

# java - 小程序不缓存 jar 文件

> ID：16090508
> 
> 赞同：2
> 
> 时间：2013-04-18T18:28:37.837
> 
> 标签：java, applet, jnlp, java-web-start, japplet

我在确定为什么客户端没有缓存一些沉重的 .jar 文件时遇到问题。

小程序运行良好，但它在每次运行时都会延迟下载沉重的 jar 库（特别是 aws-java-sdk 和 xuggler）

**小程序：**

用 javascript 应用于 HTML DOM

```
<applet archive="MyScreencast.jar" code="SrcApplet.class" codebase="http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/" height="50" width="130">
  <param name="cache_archive" value="lib/swing-layout-1.0.4.jar, lib/slf4j-api-1.6.4.jar, lib/slf4j-jcl-1.6.4.jar, lib/xuggle-xuggler-noarch-5.4.jar, lib/aws-java-sdk-1.4.0.jar, lib/commons-codec-1.3.jar, lib/commons-logging-1.1.1.jar, lib/httpclient-4.1.1.jar, lib/httpcore-4.1.jar, lib/xuggle-xuggler-arch-x86_64-w64-mingw32.jar, lib/xuggle-xuggler-arch-x86_64-xuggle-darwin11.jar, lib/xuggle-xuggler-arch-x86_64-pc-linux-gnu.jar">
  <param name="cache_version" value="1.0, 1.4.0, 1.3, 1.1.1, 4.1.1, 4.1, 1.6.4, 5.4.0">
  <param name="jnlp_href" value="http://beta.remoting.io/screencasts/118/launch.jnlp">
  <param name="outputFileName" value="filename.mp4">
  <param name="token" value="secrettoken">
  <param name="image" value="http://djebp0fi6w5vu.cloudfront.net/assets/ajax-loader-40b35ac3503bcb1279f0851d57d2b62a.gif">
  <param name="name" value="myscreencast">
</applet> 
```

**启动.jnlp**

标题：

```
HTTP/1.1 200 OK
Cache-Control: max-age=0, private, must-revalidate
Content-Type: application/x-java-jnlp-file; charset=utf-8
Date: Thu, 18 Apr 2013 06:51:43 GMT
Etag: "0acc9670f5347a89063c1ad76ba6a931"
Status: 200 OK
X-Rack-Cache: miss
X-Request-Id: b26b35dc9b336fd42da4f2bf0403b58c
X-Runtime: 0.261893
X-Ua-Compatible: IE=Edge,chrome=1
Connection: keep-alive 
```

回复：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<jnlp href="/screencasts/118/launch.jnlp" spec="1.0+">
  <information>
      <title>MyScreencast</title>
      <vendor>dotg</vendor>
      <homepage href="/screencasts/118/launch.html"/>
      <description>MyScreencast</description>
      <description kind="short">MyScreencast</description>
  </information>
  <update check="always"/>
  <security>
    <all-permissions/>
  </security>
  <resources>
    <j2se java-vm-args="-Djava.security.policy=http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/applet.policy" version="1.6+"/>
    <jar href="http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/MyScreencast.jar" main="true"/>
      <resources arch="x86_64" os="Windows">
          <nativelib href="http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/lib/xuggle-xuggler-arch-x86_64-w64-mingw32.jar"/>
      </resources>
      <resources arch="x86_64" os="Mac OS X">
          <nativelib href="http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/lib/xuggle-xuggler-arch-x86_64-xuggle-darwin11.jar"/>
      </resources>
      <resources arch="x86_64" os="Linux">
          <nativelib href="http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/lib/xuggle-xuggler-arch-x86_64-pc-linux-gnu.jar"/>
      </resources>
      <jar download="lazy" href="http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/lib/swing-layout-1.0.4.jar"/>
      <jar download="lazy" href="http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/lib/slf4j-api-1.6.4.jar"/>
      <jar download="lazy" href="http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/lib/slf4j-jcl-1.6.4.jar"/>
      <jar download="lazy" href="http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/lib/xuggle-xuggler-noarch-5.4.jar"/>
      <jar download="lazy" href="http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/lib/aws-java-sdk-1.4.0.jar"/>
      <jar download="lazy" href="http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/lib/commons-codec-1.3.jar"/>
      <jar download="lazy" href="http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/lib/commons-logging-1.1.1.jar"/>
      <jar download="lazy" href="http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/lib/httpclient-4.1.1.jar"/>
      <jar download="lazy" href="http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/lib/httpcore-4.1.jar"/>
  </resources>
  <applet-desc height="32" main-class="com.dotg.screencast.ScrApplet" name="MyScreencast" width="32">
    <param name="token" value="secrettoken"/>
    <param name="outputFileName" value="somefilename.mp4"/>
  </applet-desc>
</jnlp> 
```

**.jar 文件**

标题：

```
$ curl -I http://s3.amazonaws.com/remoting-io-cdn/recorder/v3/lib/aws-java-sdk-1.4.0.jar
HTTP/1.1 200 OK
x-amz-id-2: +VVx4kAqF4o+aQ+TdzLLCY8aMxcaYtP739ZcttwyFXrYK3lJgG9xnZ0nErtT8+cu
x-amz-request-id: D16687EF72E5F892
Date: Thu, 18 Apr 2013 18:17:12 GMT
Cache-Control: public, max-age=31557600
Last-Modified: Thu, 18 Apr 2013 13:18:48 GMT
ETag: "f577609185df722d54e85b822dbd043c"
Accept-Ranges: bytes
Content-Type: application/x-java-archive
Content-Length: 10293926
Server: AmazonS3 
```

为什么 .jar 文件没有被缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-04T20:14:07.363

javaws 有一些选项可以帮助您调查缓存。

特别是，运行`javaws -viewer`

```
Java Web Start:
Usage:  javaws [run-options] <jnlp-file>
        javaws [control-options]

where run-options include:
  -verbose          display additional output
  -offline          run the application in offline mode
  -system           run the application from the system cache only
  -Xnosplash        run without showing a splash screen
  -J<option>        supply option to the vm
  -wait             start java process and wait for its exit

control-options include:
  -viewer           show the cache viewer in the java control panel
  -clearcache       remove all non-installed applications from the cache
  -uninstall        remove all applications from the cache
  -uninstall <jnlp-file>                remove the application from the cache
  -import [import-options] <jnlp-file>  import the application to the cache

import-options include:
  -silent           import silently (with no user interface)
  -system           import application into the system cache
  -codebase <url>   retrieve resources from the given codebase
  -shortcut         install shortcuts as if user allowed prompt
  -association      install associations as if user allowed prompt 
```

# python - 为什么 Pyramid 找不到这个模板文件？

> ID：16090510
> 
> 赞同：0
> 
> 时间：2013-04-18T18:28:59.543
> 
> 标签：python, pyramid

我刚刚安装了 Pyramid 框架（按照[教程](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/project.html)。我从“alchemy”脚手架（pcreate -s alchemy myproject）开始创建了一个新项目并运行了 setup.py 脚本。出于某种原因，当我运行 pserve 时，我得到了一个TopLevelLookupException，说明它找不到 uri 'pyramid_debugtoolbar:templates/exception_summary.dbtmako' 的模板：

```
TopLevelLookupException: Can not locate template for uri 'pyramid_debugtoolbar:templates/exception_summary.dbtmako' 
```

文件“mytemplate.pt”在目录中，但由于某种原因，我仍然收到此错误。

这是**初始化**.py：

```
from pyramid.config import Configurator
from sqlalchemy import engine_from_config
from .models import (
    DBSession,
    Base,
    )

def main(global_config, **settings):
    """ This function returns a Pyramid WSGI application.
    """
    engine = engine_from_config(settings, 'sqlalchemy.')
    DBSession.configure(bind=engine)
    Base.metadata.bind = engine
    config = Configurator(settings=settings)
    config.add_static_view('static', 'static', cache_max_age=3600)
    config.add_route('home', '/')
    config.scan()
    return config.make_wsgi_app() 
```

这是views.py：

```
from pyramid.response import Response
from pyramid.view import view_config

from sqlalchemy.exc import DBAPIError

from .models import (
DBSession,
MyModel,
)

@view_config(route_name='home', renderer='/templates/mytemplate.pt')
def my_view(request):
    try:
        one = DBSession.query(MyModel).filter(MyModel.name == 'one').first()
    except DBAPIError:
        return Response(conn_err_msg, content_type='text/plain', status_int=500)
    return {'one': one, 'project': 'Triumph'}

conn_err_msg = """error""" 
```

这是models.py文件：

```
from sqlalchemy import (
    Column,
    Integer,
    Text,
    )

from sqlalchemy.ext.declarative import declarative_base

from sqlalchemy.orm import (
    scoped_session,
    sessionmaker,
    )

from zope.sqlalchemy import ZopeTransactionExtension

DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension()))
Base = declarative_base()

class MyModel(Base):
    __tablename__ = 'models'
    id = Column(Integer, primary_key=True)
    name = Column(Text, unique=True)
    value = Column(Integer)

    def __init__(self, name, value):
        self.name = name
        self.value = value 
```

这是 development.ini 文件：

```
###
# app configuration
# http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/environment.html
###

[app:main]
use = egg:Triumph

pyramid.reload_templates = true
pyramid.debug_authorization = false
pyramid.debug_notfound = false
pyramid.debug_routematch = false
pyramid.default_locale_name = en
pyramid.includes = pyramid_debugtoolbar

# By default, the toolbar only appears for clients from IP addresses
# '127.0.0.1' and '::1'.
# debugtoolbar.hosts = 127.0.0.1 ::1

###
# wsgi server configuration
###

[server:main]
use = egg:waitress#main
host = 0.0.0.0
port = 6543

###
# logging configuration
# http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/logging.html
###

[loggers]
keys = root, triumph

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = INFO
handlers = console

[logger_triumph]
level = DEBUG
handlers =
qualname = triumph

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(asctime)s %(levelname)-5.5s [%(name)s][%(threadName)s] %(message)s 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:25:47.973

根据官方文档（[Pyramid 1.4 - Basic Layout](http://docs.pylonsproject.org/projects/pyramid/en/latest/tutorials/wiki2/basiclayout.html#view-declarations-via-views-py)）解释金字塔应用程序的基本布局，您需要将视图配置更改为如下所示的这一行 - 或者简单地说：从模板路径中删除前导斜杠。

视图.py：

```
@view_config(route_name='home', renderer='templates/mytemplate.pt')
def my_view(request): 
```

暂时禁用金字塔调试工具栏也会有所帮助。实际上，您已经将它包含在这两种方式之一（[docs](http://docs.pylonsproject.org/projects/pyramid_debugtoolbar/en/latest/#setup)）中。可以修复这些设置，或者您只是出于调试目的禁​​用它。

# .net - Azure 上的 MongoDB：VM 还是 Worker 角色？

> ID：16090511
> 
> 赞同：6
> 
> 时间：2013-04-18T18:29:00.057
> 
> 标签：.net, mongodb, azure, azure-worker-roles, azure-virtual-machine

我有兴趣在 Azure 上托管一个 mongoDB。我相信对于在 Azure 上托管数据库的确切方式，我有几个选择：虚拟机或辅助角色。每个选项的优缺点是什么？更具体地说，每种方法在维护、配置、可扩展性、从 .net 使用的难易程度和成本方面有何不同。以后切换到其他选项容易吗？

关于我正在创建的内容的一些详细信息（*尽管我很想听听基于不同情况的选项的一般利弊*）： 数据库将由 Azure 网站访问。这个网站将是一个 ASP.net MVC Web API 站点休息服务。我不希望服务以及数据库的流量超过每分钟 100 个资源请求，至少开始。该数据库将相对较小，在可预见的未来将远低于 10,000 条记录。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T18:35:24.840

嗯... MongoDB 更容易在虚拟机中设置，因为您可以按照自己的意愿进行配置，而无需处理启动脚本来进行设置。

由于您将在 Azure 网站上拥有您的网站，因此您可以公开端点或在网站和虚拟机之间创建一个虚拟网络（现在支持）。

如果您正在部署独立服务器，那么虚拟机和辅助角色部署之间的区别就没有那么重要了。但是...一旦您进入副本集和分片，您就会发现虚拟机更易于使用。如果你想运行 Linux 而不是 Windows，你将别无选择，只能使用虚拟机。

关于从 .net 使用 MongoDB 的便利性：这根本不重要。

规模化：你不会经常改变你的虚拟机大小或虚拟机数量。对于任一设置，VM 大小更改应该是相同的体验。使用虚拟机横向扩展至更多虚拟机（例如扩展副本集）可能更易于管理，因为您将完全控制每个节点。*这在*缩减（删除节点）时可能更重要，因为工作角色实例缩减不允许您指定要摆脱的实例。

**编辑 2015 年 7 月**- 这个答案是 2 岁。我清理了一些东西。快速更新：

*   VM 大小比前面提到的要大得多（高达 448GB 32 核，对于 MongoDB 来说足够了），以及一些 VM 大小的 SSD 附加存储
*   除了手动配置之外，新的 Azure 资源管理器还可用于在虚拟机上自动启动集群。

最后一个想法：在考虑选项时，您可能会考虑托管 MongoDB 解决方案，例如[MongoLab](http://www.mongolab.com)。您可以通过 Azure Store 或直接通过 MongoLab 的网站设置免费 (500MB) 或付费数据库。设置只需一分钟...

# emacs - Elisp：有条件地更改键绑定

> ID：16090517
> 
> 赞同：6
> 
> 时间：2013-04-18T18:29:29.937
> 
> 标签：emacs, elisp

我正在尝试编写一个自定义选项卡完成实现，它根据点的位置尝试一堆不同的完成。但是，如果不满足任何完成条件，我希望 tab 执行当前模式最初打算执行的操作。

像这样的东西：

```
(defun my-custom-tab-completion ()
  (interactive)
  (cond
   (some-condition
    (do-something))
   (some-other-condition
    (do-something-else))
   (t
    (do-whatever-tab-is-supposed-to-do-in-the-current-mode))) ;; How do I do this? 
```

目前我正在检查特定模式并为该模式做正确的事情，但我真的想要一个解决方案，它只做正确的事情，而无需我为该特定模式显式添加条件。

关于如何做到这一点的任何想法？

谢谢！/埃里克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-04T13:05:38.223

顺便说一句，这是另一个解决方案：

```
(define-key <map> <key>
  `(menu-item "" <my-cmd> :filter ,(lambda (cmd) (if <my-predicate> cmd)))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-01T18:01:22.657

这是我基于[Emacs 键绑定后备](https://stackoverflow.com/questions/2494096/emacs-key-binding-fallback)编写的一个宏，用于有条件地定义键绑定。它将键绑定添加到指定的次要模式，但如果条件不为真，则执行先前分配的操作：

```
(defmacro define-key-with-fallback (keymap key def condition &optional mode)
  "Define key with fallback. Binds KEY to definition DEF in keymap KEYMAP, 
   the binding is active when the CONDITION is true. Otherwise turns MODE off 
   and re-enables previous definition for KEY. If MODE is nil, tries to recover 
   it by stripping off \"-map\" from KEYMAP name."
  `(define-key ,keymap ,key
     (lambda () (interactive)
        (if ,condition ,def
          (let* ((,(if mode mode
                     (let* ((keymap-str (symbol-name keymap))
                            (mode-name-end (- (string-width keymap-str) 4)))
                       (if (string= "-map" (substring keymap-str mode-name-end))
                           (intern (substring keymap-str 0 mode-name-end))
                         (error "Could not deduce mode name from keymap name (\"-map\" missing?)")))) 
                  nil)
                 (original-func (key-binding ,key)))
            (call-interactively original-func)))))) 
```

然后，我可以执行以下操作，仅当我在大纲次要模式的标题上时才使用 TAB 的特殊绑定。否则我的默认操作（我有缩进和 yasnippets）被执行：

```
(define-key-with-fallback outline-minor-mode-map (kbd "TAB") 
  (outline-cycle 1) (outline-on-heading-p)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T18:47:37.457

您可以使用诸如`key-binding`（或其更具体的变体`global-key-binding`和`minor-mode-key-binding`）之类的函数`local-key-binding`来探测活动键盘映射以进行绑定。

例如：

```
(call-interactively (key-binding (kbd "TAB")))
;; in an emacs-lisp-mode buffer:
;;    --> indent-for-tab-command
;; 
;; in a c++-mode buffer with yas/minor-mode:
;;    --> yas/expand 
```

* * *

如果您的命令绑定到，则避免无限循环的一种方法是`TAB`将您的绑定置于次要模式，并在查找`TAB`绑定时暂时禁用其键盘映射：

```
(define-minor-mode my-complete-mode
  "Smart completion"
  :keymap (let ((map (make-sparse-keymap)))
            (define-key map (kbd "TAB") 'my-complete)
            map))

(defun my-complete ()
  (interactive)
  (if (my-condition)
      (message "my-complete")
    (let ((my-complete-mode nil))
      (call-interactively (key-binding (kbd "TAB")))))) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T22:01:13.290

您可能根本不需要任何特殊的解决方法就可以实现这一目标。在大多数模式`TAB`下，默认情况下只是缩进，但如果你将全局变量设置`tab-always-indent`为`'complete`它会尝试先完成，如果无法完成则缩进。这通常效果很好，尽管如果`TAB`在您的主要模式之一中绑定到另一个命令，您可能会不走运。

如果这在您需要的模式下有效，您只需将自定义完成函数添加到`completion-at-point-functions`所有适用缓冲区中列表的前面（可能使用模式挂钩）。该`completion-at-point`命令调用列出的每个函数，`completion-at-point-functions`直到其中一个返回 non- `nil`，因此您需要做的就是让您的自定义完成函数“失败”到现有的行为是`nil`从它返回。

这不是问题的 100% 答案，但如果您使用的主要模式是根据正常指南编写的，那么它可能是最干净的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-20T10:06:53.903

`define-key`可以接受带引号的字符串或交互式 lambda，如本例所示。

```
;Static
(define-key evil-normal-state-mapr "m" 'evil-motion-state)
;Conditional
(define-key evil-normal-state-map "m" 
  (lambda () (interactive) (message "%s" major-mode))) 
```

Lambda 可以用 my-tab-completion 之类的命名函数替换并更有效地使用。

来自定义键的文档字符串（Emacs 25）

```
DEF is anything that can be a key's definition:
 nil (means key is undefined in this keymap),
 a command (a Lisp function suitable for interactive calling),
 a string (treated as a keyboard macro),
 a keymap (to define a prefix key),
 a symbol (when the key is looked up, the symbol will stand for its
    function definition, which should at that time be one of the above,
    or another symbol whose function definition is used, etc.),
 a cons (STRING . DEFN), meaning that DEFN is the definition
    (DEFN should be a valid definition in its own right),
 or a cons (MAP . CHAR), meaning use definition of CHAR in keymap MAP,
 or an extended menu item definition.
 (See info node `(elisp)Extended Menu Items'.) 
```

# c# - 如何在 C# 中将数据附加到 JObject？

> ID：16090521
> 
> 赞同：1
> 
> 时间：2013-04-18T18:29:47.537
> 
> 标签：c#, json

因此，在 C# 中，我创建了以下 Json：

```
{
"timeline": {
    "headline": "Development timeline",
    "type": "default",
    "text": "timeline",
    "startDate": "12/12/2011",
    "date": [
        {
            "startDate": "2012,02,15",
            "endDate": "2012,04,19",
            "headline": "Development",
            "text": "Coding"
        },
        {
            "startDate": "2012,04,19",
            "endDate": "2012,07,25",
            "headline": "Development",
            "text": "Coding"
        },
        {
            "startDate": "2012,07,25",
            "endDate": "2012,10,26",
            "headline": "Development",
            "text": "Coding"
        }
    ]
} 
```

}

使用 JObject：

```
 jjson = new JObject(
               new JObject(
                new JProperty("timeline",
                    new JObject(
                    new JProperty("headline", "Development"),
                    new JProperty("type", "default"),
                    new JProperty("text", "timeline"),
                    new JProperty("startDate", "12/12/2011"),
                    new JProperty("date",
                        new JArray(
                        from p in timelineList
                        orderby p.releaseDate
                        select new JObject(
                            new JProperty("startDate", p.startDate),
                            new JProperty("endDate", p.endDate),
                            new JProperty("headline", p.headline),
                            new JProperty("text", p.text))                                
                            )))))); 
```

现在我希望在 json 对象的 date[] 中添加另一个部分，带有 startdate/enddate 但是我似乎不能这样做:(

我试图创建另一个 JArray 只是为了测试并查看它是否会附加到我的 json 但没有运气，因为我收到以下错误：“引用未设置为对象的实例：

```
JArray dd = new JArray();
dd = (JArray) jjson["date"];
dd.Add("item 1,sdsds"); 
```

如何向我已经创建的 JSON 添加另一个属性？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:35:56.497

从您的示例`jjson`中不包含`date`属性，它仅包含`timeline`属性，因此在您的情况下应该是`((JSonObject)jjson["timeline"])["date"]`

# jsf-2 - javax.faces.component.AttachedObjectListHolder.restoreState 的间歇性 java.lang.IndexOutOfBoundsException

> ID：16090523
> 
> 赞同：9
> 
> 时间：2013-04-18T18:29:51.907
> 
> 标签：jsf-2, tomcat7, state-saving

我有一个带有客户端状态保存方法的 JSF 2.1.21 应用程序。我也在使用 PrimeFaces 3.5 + Tomcat 7.0.37。

我使用 OmniFaces 完整的 ajax 异常处理程序来显示自定义错误页面，并在问题发生时通过电子邮件向我发送堆栈跟踪。

每天我都会收到至少一封带有 java.lang.IndexOutOfBoundsException 的电子邮件。它似乎与重新部署应用程序有关，但我无法重现它。

这是堆栈跟踪：

```
java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
at java.util.ArrayList.rangeCheck(ArrayList.java:604)
at java.util.ArrayList.get(ArrayList.java:382)
at javax.faces.component.AttachedObjectListHolder.restoreState(AttachedObjectListHolder.java:165)
at javax.faces.component.UIComponentBase.restoreState(UIComponentBase.java:1566)
at com.sun.faces.application.view.FaceletPartialStateManagementStrategy$2.visit(FaceletPartialStateManagementStrategy.java:380)
at com.sun.faces.component.visit.FullVisitContext.invokeVisitCallback(FullVisitContext.java:151)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1612)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at javax.faces.component.UIForm.visitTree(UIForm.java:371)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at com.sun.faces.application.view.FaceletPartialStateManagementStrategy.restoreView(FaceletPartialStateManagementStrategy.java:367)
at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:138)
at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:569)
at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:141)
at javax.faces.application.ViewHandlerWrapper.restoreView(ViewHandlerWrapper.java:301)
at org.omnifaces.viewhandler.RestorableViewHandler.restoreView(RestorableViewHandler.java:59)
at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at br.com.spdata.tecnico.filter.MobileFilter.doFilter(MobileFilter.java:53)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)
at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)
at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)
at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)
at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at com.googlecode.psiprobe.Tomcat70AgentValve.invoke(Tomcat70AgentValve.java:38)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
at java.lang.Thread.run(Thread.java:722) 
```

有任何想法吗？

谢谢，菲利普

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-20T10:48:34.953

StackOverflow 最终让我想起了这个问题的存在，所以我会花几分钟来回答我是如何解决它的。

我猜如果用户正在访问的页面结构以某种方式发生变化，则不可能在没有与视图状态相关的异常的情况下替换正在运行的 JSF webapp。

我能够使用 Tomcat 的并行部署完美地解决这个问题，其中旧版本的 webapp 保留在服务器上，直到它们有活动的会话。

# mysql - 通过 PowerShell 连接 MySQL 数据库，旧式密码

> ID：16090525
> 
> 赞同：0
> 
> 时间：2013-04-18T18:30:04.653
> 
> 标签：mysql, powershell, passwords

我正在尝试通过 powershell 连接到 MySQL 服务器。但是，我的密码似乎不起作用，因为“不再支持使用旧密码进行身份验证，请使用 4.1 样式密码”。我正在使用 MySQL ADO.NET 驱动程序进行连接，到目前为止一切都没有返回错误。

```
# Connection Variables 
$user = 'cantshowusernamehere' 
$pass = 'PretendRealPassword' 
$database = 'PretendDatabaseHere' 
$MySQLHost = 'something.something.ca' 

# Connect to MySQL Database 
$conn = Connect-MySQL $user $pass $MySQLHost $database 
```

会还给我

> 使用“0”参数调用“打开”的异常：“不再支持使用旧密码进行身份验证，请使用 4.1 样式密码。”

有人知道如何通过 PowerShell 更改为新样式的密码吗？谢谢，我已经搜索了几个小时，唯一的解决方案是针对使用其他程序（例如 PHP）进行 SQL 工作的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-19T17:16:03.990

我不得不降级我正在使用的 MySQL .NET 连接器的版本（最新：6.9.7，回落到[6.5.7](http://dev.mysql.com/downloads/connector/net/6.5.html)）。我意识到这违背了“修复数据库服务器”的常识，但是它是内部的，并且有太多资源使用它来权衡设置`old_passwords=0`和重置所有（已知）密码以更新其哈希值的风险（只是为了发现我们在某处破坏了一些埋藏的工具）

# java - jackson-mapper 版本 1.9.12 EnumDeserializer 问题

> ID：16090527
> 
> 赞同：0
> 
> 时间：2013-04-18T18:30:05.377
> 
> 标签：java, javascript, json, spring-mvc, jackson

我正在尝试使用 Jackson ObjectMapper.readValue(String,Class) API 将字符串映射到枚举对象，问题是让我们说我的 json 字符串包含一个带有 Action 枚举的任务对象，如下所示

公共枚举动作{

```
@XmlEnumValue("Add")
ADD("Add"),
@XmlEnumValue("Amend")
AMEND("Amend"),
@XmlEnumValue("Delete")
DELETE("Delete"),
@XmlEnumValue("Pending")
PENDING("Pending");
private final String value;

Action(String v) {
    value = v;
}

public String value() {
    return value;
}

public static Action fromValue(String v) {
    for (Action c: Action.values()) {
        if (c.value.equals(v)) {
            return c;
        }
    }
    throw new IllegalArgumentException(v);
} 
```

}

并且 jason 字符串将像这样 "{"action":"Add"}" 然后 ObjectMapper.readValue(jsonString, Task.Class) 抛出

org.codehaus.jackson.map.deser.StdDeserializationContext.weirdStringException(StdDeserializationContext.java:243) 用于操作添加，因为它无法转换此枚举。

我尝试添加自定义 Desiserializer，但无论如何都会调用 EnumDeserializer。有任何想法吗？

所有对象都是 JAXB 生成的，因此无法进行注释。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:41:38.680

你有没有尝试过：

```
new ObjectMapper().setAnnotationIntrospector(new JaxbAnnotationIntrospector()).readValue() 
```

# javascript - 如何将 WebSocket 指向当前服务器

> ID：16090530
> 
> 赞同：47
> 
> 时间：2013-04-18T18:30:10.553
> 
> 标签：javascript, ajax, websocket

我有一个 Jetty 8 服务器正在运行（希望很快就会使用 websockets）。

如果我想通过 ajax 调用向服务器发送一些数据，我可以这样做：

```
$.ajax({ url: "ajax?a=getSomeData" }); 
```

在这种情况下，如果我在 连接到我的服务器`192.168.1.100`，它将从中获取数据的真实 url 将是`192.168.1.100/ajax?a=getSomeData`，但如果我在 连接到运行相同软件的另一台服务器`192.168.1.200`，则 url 将是`192.168.1.200/ajax?a=getSomeData`。

但是如果我想使用 WebSockets 完成同样的事情，我找不到如何做到这一点：

```
var socket = new WebSocket('ws://www.example.com/'); 
```

作品。但我想要一个相对 url 之类的东西：

```
var socket = new WebSocket('ws://sockets?a=getSomeData'); 
```

所以 - 就像 ajax 请求一样 - 如果我连接到我的服务器`192.168.1.100`，则 url 将是`192.168.1.100/sockets?a=getSomeData`，如果我连接到`192.168.1.200`，则 url 将是`192.168.1.200/sockets?a=getSomeData`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-04-18T18:33:29.180

只需自己构建 URL：

```
var socket = new WebSocket("ws://" + location.host + "/whatever"); 
```

`location`对象是对象的属性，因此`window`是全局可用的。

要仅获取没有端口的主机，请`location.hostname`改用。例如，如果 websocket 服务器侦听另一个端口。

您还可以检查`location.protocol`以了解您是否应该连接到`wss`（何时`https`使用）或`ws`（何时`http`使用）。

# c# - 为什么多次调用 GC.Collect() 会释放一些通常不会被清理的内存？

> ID：16090531
> 
> 赞同：2
> 
> 时间：2013-04-18T18:30:10.613
> 
> 标签：c#, memory

我在 GC 中发现了一件奇怪的事情，当我的应用程序删除了对许多大对象的引用时，它仍然会消耗很多内存，在我的情况下大约 300mb。即使我打电话也不会清理这个内存`GC.Collect()`

然后我尝试在几秒钟内随机调用它 10 次，结果：释放了 200mb 的 ram，导致我的应用程序只吃 100mb 而不是 300mb 的私有 ram（不是虚拟的，而是物理/常驻 ram）

为什么是这样？如何让 GC 自动清理此内存而无需手动调用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:33:24.940

任何一个：

1.  您仍然在某处保留对大对象的引用，因此即使调用`GC.Collect`也无法清理它。

2.  非托管内存占此内存消耗的大部分。您没有正确处置该非托管资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:38:47.570

今天有很多关于 SO 的 GC 问题！

反正过了这么久，也许它会清理它。如果您的程序内存不足并在没有额外调用的情况下死亡，请将其保留，否则可能没有必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:33:53.067

当需要更多内存时，垃圾收集器将收集任何未使用的对象。一个对象只有在你没有引用它时才被使用。使用内存分析器查看哪些对象占用了您的内存以及为什么没有收集它们。

除此之外，您永远不需要打电话`GC.Collect`。垃圾收集器不仅有能力而且经过优化，可以选择何时执行。

# r - plyr 包在多列上编写相同的函数

> ID：16090532
> 
> 赞同：6
> 
> 时间：2013-04-18T18:30:12.133
> 
> 标签：r, plyr

我想使用 ddply 函数将相同的函数写入多个列，但我尝试将它们写在一行中，想看看有没有更好的方法？

这是数据的简单版本：

```
data<-data.frame(TYPE=as.integer(runif(20,1,3)),A_MEAN_WEIGHT=runif(20,1,100),B_MEAN_WEIGHT=runif(20,1,10)) 
```

我想通过这样做找出列 A_MEAN_WEIGHT 和 B_MEAN_WEIGHT 的总和：

```
ddply(data,.(TYPE),summarise,MEAN_A=sum(A_MEAN_WEIGHT),MEAN_B=sum(B_MEAN_WEIGHT)) 
```

但在我目前的数据中，我有超过 8 个“*_MEAN_WEIGHT”，我厌倦了将它们写 8 次

```
ddply(data,.(TYPE),summarise,MEAN_A=sum(A_MEAN_WEIGHT),MEAN_B=sum(B_MEAN_WEIGHT),MEAN_C=sum(C_MEAN_WEIGHT),MEAN_D=sum(D_MEAN_WEIGHT),MEAN_E=sum(E_MEAN_WEIGHT),MEAN_F=sum(F_MEAN_WEIGHT),MEAN_G=sum(G_MEAN_WEIGHT),MEAN_H=sum(H_MEAN_WEIGHT)) 
```

有没有更好的方法来写这个？谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T23:25:23.223

以 - 为中心的`plyr`方法是使用`colwise`

例如

```
 ddply(data, .(TYPE), colwise(sum))
  TYPE A_MEAN_WEIGHT B_MEAN_WEIGHT
1    1      319.8977      60.80317
2    2      621.6745      37.05863 
```

`.col` 如果您只想要一个子集，您可以将列名作为参数传递

您还可以使用`numcolwise`或`catcolwise`仅对数字或分类列进行操作。

请注意，您可以使用`sapply`来代替最基本的使用`colwise`

```
ddply(data, .(TYPE), sapply, FUN = 'mean') 
```

* * *

惯用的 data.table 方法是使用`lapply(.SD, fun)`

例如

```
dt <- data.table(data)
dt[,lapply(.SD, sum) ,by = TYPE]
   TYPE A_MEAN_WEIGHT B_MEAN_WEIGHT
1:    2      621.6745      37.05863
2:    1      319.8977      60.80317 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T18:35:38.353

尝试这个：

```
ddply(data, .(TYPE), colSums) 
```

这是上面的（较慢）等价物，可以对其进行调整以放置任何函数而不是求和：

```
ddply(data, .(TYPE), function(x) {apply(x, 2, sum)}) 
```

而且，如果您想保留该`.(TYPE)`列，则可以这样做：

```
ddply(data, .(TYPE), function(x) {apply(x[,names(x) != "TYPE"], 2, sum)}) 
```

更好的是，使用`data.table`代替`plyr`：

```
library(data.table)
dt = data.table(data)

# just sums
dt[, data.table(t(colSums(.SD))), by = TYPE]

# sum for "A" and "B", and sqrt(sum) for "C" and "D"
# note: you will have to call setnames() to fix the column names after
dt[, data.table(t(colSums(.SD[, c("A_MEAN_WEIGHT", "B_MEAN_WEIGHT"), with = F])),
                t(apply(.SD[, c("C_MEAN_WEIGHT", "D_MEAN_WEIGHT"), with = F],
                        2, function(x) sqrt(sum(x))))),
     by = TYPE] 
```

# python - X 或非 Y 的正则表达式

> ID：16090533
> 
> 赞同：2
> 
> 时间：2013-04-18T18:30:14.293
> 
> 标签：python, regex

我有一长串用分号分隔的文本，所以我有一个正则表达式来捕获`[^\;]+`. 但是，由于内容包含 HTML 撇号 (`&#39;` )，因此存在问题。

我如何编写一个正则表达式来捕获除分号之外的所有内容，除非分号是 HTML 撇号的一部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:32:57.530

```
(&\S+?;|[^;])+ 
```

匹配 HTML 实体，就像它们是单个字符一样。

# .htaccess - /product/?id={xyz} 到 /product/{xyz} 的 mod_rewrite 问题

> ID：16090536
> 
> 赞同：0
> 
> 时间：2013-04-18T18:30:41.100
> 
> 标签：.htaccess, mod-rewrite

我的尝试：

```
RewriteCond %{QUERY_STRING}     ^id=(.*)$    [NC]
RewriteRule ^/product$       /product/%1      [NC,L,R=301] 
```

我只想将此规则应用于`/product/`和`/supplier/`目录。它们都是一级子目录。

注：`product/?id={xxx}`实际上是`product/index.php?id={xxx}`. Apache 隐藏了我的扩展和索引。只是想指出这一点。

我`product/index.php`处理给定的参数并确定它应该显示的页面：

**索引.php**

```
if ( isset( $_GET['id'] ) && !empty( $_GET['id'] ) ) {
   //html for individual page e.g. /product/?id=foo
   //e.g. <h1><?= $_GET['id'] ?> Page</h1>
} else {
   //html for product list e.g. /product/ (no parameters)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:48:39.413

在根目录的一个 .htaccess 文件中尝试此操作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING} id=(.+)          [NC]
RewriteRule ^(product|supplier)/?$   /$1/%1? [NC,L,R=301] 
```

在 .htaccess 文件中，在规则中测试它的 URI 路径没有前导斜杠 ( `^/product`)，因此正则表达式也不能有它。trailng`?`删除传入的查询。

如果要将规则集放在 Apache 主配置文件中，则应保留前导斜杠：`^/(product|supplier)/?$`

### 更新

显示想要的 URL，但仍从原始 URL 获取数据。

要求：`/product/?id=parameter`

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^(GET|HEAD)\s/(product|supplier)/\?id=([^\s]+) [NC]
# Strip the query and redirect permanently
RewriteRule  ^(product|supplier)  /$1/%3?   [R=301,L,NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{QUERY_STRING} ^$
# Map internally to the original request
RewriteRule  ^(product|supplier)/([^/]+)/?  /$1/?id=$2  [L,NC] 
```

* * *

另一种选择是直接在请求中使用“漂亮”的 URL：

请求`/product/parameter`_`/product/?id=parameter`

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{QUERY_STRING} ^$
RewriteRule  ^(product|supplier)/([^/]+)/?  /$1/?id=$2  [L,NC] 
```

# javascript - 如何让 javascript 对象的一个 成员引用同一对象的另一个成员？

> ID：16090540
> 
> 赞同：0
> 
> 时间：2013-04-18T18:31:03.613
> 
> 标签：javascript, jquery, object

在 javascript 中定义对象时，该对象的成员是否可以访问同一对象的另一个成员的值？例如，如果我定义以下（使用 jquery）

```
var x = $.extend({}, {
  greeting: 'hello',
  message: this.greeting+' world'
});

alert(x.message); 
```

上面的代码会提醒`undefined world`。我如何使它`greeting`在定义期间取值。在这种情况下，预期的输出是`hello world`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T18:35:09.823

您可以使用属性：

```
var foo = {
    greeting: 'hello',
    get message() {
        return this.greeting+' world'
    }
};

console.log(foo.message);
foo.greeting = 'hi';
console.log(foo.message); 
```

虽然我不确定这些将如何与`$.extend`

在较旧的浏览器中，您总是可以只创建`message`一个函数，而不是一个属性 getter

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T18:36:10.907

试试这个方法：

```
var x = $.extend({}, {
  greeting: 'hello',
  message: function(){
     return this.greeting+' world';
  }
});

alert(x.message); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:40:47.077

您可以创建一些`Constructor`功能。里面`this.greeting`会定义这个函数。

```
var Constructor = function () {
   this.greeting = 'hello',
   this.message = this.greeting + ' world'
   return this;
}; 
```

然后使用以下实例扩展您的对象`Constructor`：

```
var x = $.extend({}, new Constructor()); 
```

# jquery - 如果存在ajax错误，jquery会阻止表单提交

> ID：16090545
> 
> 赞同：0
> 
> 时间：2013-04-18T18:31:18.757
> 
> 标签：jquery, ajax, forms, submit

我无法找到我在这里寻找的答案。我正在使用 ajax 检查数据库中是否存在用户名，如果用户存在，则表单中会显示错误。但是，如果存在该错误，我会尝试阻止提交表单。我已经尝试过 event.preventDefault() 但我不确定我是否正确使用它，或者我是否使用错误。

我的 JS 代码是：

```
$(".check").blur(function () {
    var username = $(".check").val();
    $.ajax({
        url: "validateUser.php",
        type: "post",
        data: "username=" + username
    }).done(function (result) {
        if (result == "true") {
            // CODE TO RUN IF ERROR DOESN'T EXIST
        } else {
            // CODE TO RUN IF ERROR DOES EXIST
            // CREATE THE ERROR MESSAGE AND DISPLAYS IT
            event.preventDefault();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:41:13.030

对表单提交以及模糊进行验证。

```
function checkUsername(username) {
    var username = $(".check").val();
    return $.ajax({
        url: "validateUser.php",
        type: "post",
        data: "username=" + username
    }).then(function (result) {
        var def = $.Deferred();
        if (result == "true") {
            // CODE TO RUN IF ERROR DOESN'T EXIST

            def.resolve();
        } else {
            // CODE TO RUN IF ERROR DOES EXIST
            // CREATE THE ERROR MESSAGE AND DISPLAYS IT

            def.reject();
        }
        return def.promise();
    });
}

$(".check").blur(checkUsername);
$("#myform").submit(function(e){
    var self = this;
    e.preventDefault();
    checkUsername().done(function(){
        // username was ok
        self.submit();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:54:47.643

根据您的评论，我认为您应该尝试这个：

```
if (result == "true") {
    $(this).closest('form').submit();
} else {
    $(this).closest('form').submit(function(event){
        event.preventDefault();
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:36:11.623

为了防止您的表单提交，您必须调用处理程序`preventDefault()`的`event`实例以[提交](http://api.jquery.com/submit/)表单的 JavaScript 事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T18:36:29.043

你可以这样做：

```
$("form").submit(function(){
    return !$(this).hasClass("error");
});

$(".check").blur(function () {
   var username = $(".check").val();
    $.ajax({
        url: "validateUser.php",
        type: "post",
        data: "username=" + username
    }).done(function (result) {
        if (result == "true") {
            $("form").removeClass('error')
        } else {
            $("form).addClass("error");
        }
    });
}); 
```

因此，您的 ajax 将添加一个类错误或在其有效时将其删除。如果表单被提交，如果它有类错误，它会被取消。

Ajax 是异步的，因此您不能直接返回它。因为代码会继续运行而不是等待`done`函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T18:37:17.530

使用`return false` 而不是`e.preventDefault()`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T18:40:03.000

尝试这个：

```
$(".check").blur(function (event) {

    // Prevent Default the event here...
    event.preventDefault(); 

    var username = $(".check").val();
    $.ajax({
        url: "validateUser.php",
        type: "post",
        data: "username=" + username
    }).done(function (result) {
        if (result == "true") {
            // CODE TO RUN IF ERROR DOESN'T EXIST
            $("form").submit();  
        } else {
            // CODE TO RUN IF ERROR DOES EXIST
            // CREATE THE ERROR MESSAGE AND DISPLAYS IT                             
            $(this).focus();
            alert('An error occurred!');
        }
    });
}); 
```

## 这里有几点：

1.  您甚至没有`event`在函数中添加 ，而是在调用`event.preventDefault()`.
2.  如果结果是`"true"`，您可以简单地提交表单或运行您的代码。
3.  否则，只需将`focus`背面放回文本框并显示警告消息。

# java - 在检查 Spring 中的错误之前，我可以在 BindingResult 中添加值吗？

> ID：16090547
> 
> 赞同：0
> 
> 时间：2013-04-18T18:31:20.860
> 
> 标签：java, spring, validation, spring-mvc

在检查 Spring 中的错误之前，我可以在 BindingResult 中添加值吗？

```
@InitBinder("memberrequest")
    public void initMemberRequestBinder(WebDataBinder binder) {
        binder.setValidator(new MemberRequestValidator());
    }

@PreAuthorize("isAuthenticated()")
    @RequestMapping(value = "/save", method = RequestMethod.POST)
    public ModelAndView saveRequest(@Valid @ModelAttribute("memberrequest") MemberRequest mr, BindingResult result, HttpSession session) {

        session.setAttribute("phone", mr.getPhonenumber());

        mr.setWelfare((String)session.getAttribute("welfare"));
        mr.setSchool((String)session.getAttribute("school"));
        mr.setTitle((String)session.getAttribute("title"));
        mr.setDistrict((String)session.getAttribute("district"));
        mr.setName((String)session.getAttribute("name"));
        mr.setFile((String)session.getAttribute("file"));
        mr.setQueue((String)session.getAttribute("queue"));
        mr.setRequestor(getUser());
        mr.setSchool_id((String)session.getAttribute("school_id"));
        mr.setBorough_id((String)session.getAttribute("borough_id"));
        mr.setRetiree((String)session.getAttribute("retiree"));

        if (result.hasErrors()) {
            LOGGER.debug("Pages had errors on it... returning to input page");
            return new ModelAndView("w-question");
        } else { 
```

我的 Spring 控制器中有上面的代码，但问题是我需要在 Validator 运行之前从会话中取出一些值并将它们移动到 BindingResult (Bean) 中。

有人可以这样做吗？问题是我在会议中保留的一些价值观.. 请我知道这是否可以，以及如何做到这一点的最佳方法..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:09:22.973

在您的控制器中定义用于创建模型属性的方法并使用 @ModelAttribute 注释对其进行注释。实际上，您不会修改绑定结果对象本身，而是修改验证目标，然后您可以根据需要更改验证器行为以更改绑定结果。

```
@ModelAttribute("memberrequest")
public  MemberRequest getMemberRequest(HttpSession session) {
MemberRequest mr = new MemberRequest();
  mr.setWelfare((String)session.getAttribute("welfare"));
    mr.setSchool((String)session.getAttribute("school"));
    mr.setTitle((String)session.getAttribute("title"));
    mr.setDistrict((String)session.getAttribute("district"));
    mr.setName((String)session.getAttribute("name"));
    mr.setFile((String)session.getAttribute("file"));
    mr.setQueue((String)session.getAttribute("queue"));
    mr.setRequestor(getUser());
    mr.setSchool_id((String)session.getAttribute("school_id"));
    mr.setBorough_id((String)session.getAttribute("borough_id"));
    mr.setRetiree((String)session.getAttribute("retiree"));
return mr;

} 
```

此方法将在绑定发生之前调用，但请记住，此方法将在每个使用 @ModelAttribute("memberrequest") 作为参数的控制器方法之前调用。

# ruby - 使用 ruby 和 aws-sdk 拉取 ec2 标签

> ID：16090548
> 
> 赞同：3
> 
> 时间：2013-04-18T18:31:28.967
> 
> 标签：ruby, amazon-web-services, amazon-ec2, aws-sdk

伙计们，我正在尝试通过 ruby​​ aws-sdk 和 iam 角色提取 EC2 标签。以下代码在下面产生错误。我究竟做错了什么？

```
require 'rubygems'
require 'aws-sdk'
require 'fileutils'

ec2 = AWS::EC2.new()

instance_id = `wget -q -O - http://169.254.169.254/latest/meta-data/instance-id`
outdir = '/opt/facts/tags/'

unless File.directory?(outdir)
  FileUtils.mkdir_p(outdir)
end

ec2= AWS::EC2.new()
instance = ec2.instances[instance_id]
tags = instance.tags

tags.each do |num|
  File.open(outdir+num[0], "w") do |f|
    f.write(num[1])
  end
end 
```

以下输出：

```
/usr/lib/ruby/gems/1.8/gems/aws-sdk-1.9.0/lib/aws/core/http/connection_pool.rb:127:in `session_for': undefined method `continue_timeout=' for #<Net::HTTP ec2.us-east-1.amazonaws.com:443 open=false> (NoMethodError)
from /usr/lib/ruby/gems/1.8/gems/aws-sdk-1.9.0/lib/aws/core/http/net_http_handler.rb:52:in `handle'
from /usr/lib/ruby/gems/1.8/gems/aws-sdk-1.9.0/lib/aws/core/client.rb:236:in `make_sync_request'
from /usr/lib/ruby/gems/1.8/gems/aws-sdk-1.9.0/lib/aws/core/client.rb:262:in `retry_server_errors'
from /usr/lib/ruby/gems/1.8/gems/aws-sdk-1.9.0/lib/aws/core/client.rb:229:in `make_sync_request'
from /usr/lib/ruby/gems/1.8/gems/aws-sdk-1.9.0/lib/aws/core/client.rb:489:in `client_request'
from /usr/lib/ruby/gems/1.8/gems/aws-sdk-1.9.0/lib/aws/core/client.rb:371:in `log_client_request'
from /usr/lib/ruby/gems/1.8/gems/aws-sdk-1.9.0/lib/aws/core/client.rb:457:in `client_request'
from /usr/lib/ruby/gems/1.8/gems/aws-sdk-1.9.0/lib/aws/core/client.rb:353:in `return_or_raise'
from /usr/lib/ruby/gems/1.8/gems/aws-sdk-1.9.0/lib/aws/core/client.rb:456:in `client_request'
from (eval):3:in `describe_tags'
from /usr/lib/ruby/gems/1.8/gems/aws-sdk-1.9.0/lib/aws/ec2/filtered_collection.rb:44:in `send'
from /usr/lib/ruby/gems/1.8/gems/aws-sdk-1.9.0/lib/aws/ec2/filtered_collection.rb:44:in `filtered_request'
from /usr/lib/ruby/gems/1.8/gems/aws-sdk-1.9.0/lib/aws/ec2/resource_tag_collection.rb:156:in `each'
from ./puppetclient.rb:22 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:40:31.383

这似乎是今天已经报告的一个错误：[未定义的方法 `continue_timeout='](https://github.com/aws/aws-sdk-ruby/issues/232)，您可以尝试指向 git 存储库的主分支，因为它已经有一个补丁。

**编辑：**

您已经可以指向最新版本，`rubygems`因为他们已经在以下位置部署了修复程序`version 1.9.1`： [https ://rubygems.org/gems/aws-sdk](https://rubygems.org/gems/aws-sdk)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T19:04:50.467

今天在 AWS-SDK-ruby [https://github.com/aws/aws-sdk-ruby/issues/232中宣布了一个错误](https://github.com/aws/aws-sdk-ruby/issues/232)

您可以通过更新 gemfile 来修复它

```
gem 'aws-sdk', "1.9.1" 
```

然后运行“捆绑”

# python - 构建python包

> ID：16090550
> 
> 赞同：3
> 
> 时间：2013-04-18T18:31:35.203
> 
> 标签：python, openembedded, bitbake

我正在对几个 python 库进行 bitbaking 并在添加第二个库时收到此警告：

```
WARNING: The recipe is trying to install files into a shared area when those files already exist. Those files are:
   /home/ilya/beaglebone-dany/build/tmp/sysroots/beaglebone/usr/lib/python2.7/site-packages/site.py
   /home/ilya/beaglebone-dany/build/tmp/sysroots/beaglebone/usr/lib/python2.7/site-packages/site.pyo 
```

这两个库都使用`inherit distutils`. 所以就 bitbake 而言这没问题，但是当我尝试通过 opkg 安装第二个软件包时，我收到了这个错误：

```
# opkg install http://yocto.local:8080/python-requests_1.2.0-r0_armv7a-vfp-neon.ipk
Downloading http://yocto.local:8080/python-requests_1.2.0-r0_armv7a-vfp-neon.ipk.
Installing python-requests (1.2.0-r0) to root...
Configuring python-requests.

# opkg install http://yocto.local:8000/python-mylib_0.0.1-r0_armv7a-vfp-neon.ipk
Downloading http://yocto.local:8080/python-mylib_0.0.1-r0_armv7a-vfp-neon.ipk.
Installing python-mylib (0.0.1-r0) to root...
Collected errors:
 * check_data_file_clashes: Package mylib-python wants to install file /usr/lib/python2.7/site-packages/site.py
        But that file is already provided by package  * python-requests
 * check_data_file_clashes: Package mylib-python wants to install file /usr/lib/python2.7/site-packages/site.pyo
        But that file is already provided by package  * python-requests
 * opkg_install_cmd: Cannot install package mylib-python. 
```

两个食谱看起来都像这样：

```
DESCRIPTION = "Requests: HTTP for Humans"
HOMEPAGE = "http://docs.python-requests.org/en/latest/"
SECTION = "devel/python"
LICENSE = "Apache-2.0"

DEPENDS = "python"
RDEPENDS_${PN} = "python-core"
PR = "r0"

SRC_URI = "git://github.com/kennethreitz/requests;protocol=git"

S = "${WORKDIR}/git/"

inherit distutils

#NOTE: I'm not 100% sure whether I still need to export these?
export BUILD_SYS
export HOST_SYS
export STAGING_INCDIR
export STAGING_LIBDIR

BBCLASSEXTEND = "native" 
```

我已经从[pycurl recipe](http://git.yoctoproject.org/cgit/cgit.cgi/poky/plain/meta/recipes-devtools/python/python-pycurl_7.19.0.bb?id=danny-8.0.1)复制了这个，其中也有我删除的这些行：

```
do_install_append() {
    rm -rf ${D}${datadir}/share
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T17:55:36.837

要消除冲突`/usr/lib/python2.7/site-packages/site.py`，需要通过执行以下操作来避免发送此文件：

```
do_install_append() {
  rm -f ${D}${libdir}/python*/site-packages/site.py*
} 
```

原始版本的配方还有另一个问题，它安装的文件只包含`.egg`目录。我无法`import`得到结果包。

事实证明，使用`inherit setuptools`而不是`inherit distutils`工作。

我不是 Python 专家，但[setuptools 类](http://git.yoctoproject.org/cgit/cgit.cgi/poky/plain/meta/classes/setuptools.bbclass?id=danny-8.0.1)所做的只是这样：

```
inherit distutils

DEPENDS += "python-setuptools-native"

DISTUTILS_INSTALL_ARGS = "--root=${D} \
    --single-version-externally-managed \
    --prefix=${prefix} \
    --install-lib=${PYTHON_SITEPACKAGES_DIR} \
    --install-data=${datadir}" 
```

事实证明，某些模块（例如[PyBBIO](https://github.com/alexanderhiam/PyBBIO)）无法识别`--single-version-externally-managed`，因此您必须使用`inherit distutils`并且确实得到了一个工作包。

下面是*python-requests*包的完整配方，如果你打算使用它，它很快就会在上游可用。

```
DESCRIPTION = "Requests: HTTP for Humans"
HOMEPAGE = "http://docs.python-requests.org/en/latest/"
SECTION = "devel/python"
LICENSE = "Apache-2.0"

#DEPENDS = "python-core"
RDEPENDS_${PN} = "python"
PR = "r0"

SRC_URI = "git://github.com/kennethreitz/requests;protocol=git"

S = "${WORKDIR}/git/"

inherit setuptools

# need to export these variables for python-config to work
export BUILD_SYS
export HOST_SYS
export STAGING_INCDIR
export STAGING_LIBDIR

BBCLASSEXTEND = "native"

do_install_append() {
  rm -f ${D}${libdir}/python*/site-packages/site.py*
} 
```

# ios - 设备崩溃，但调试器无话可说

> ID：16090559
> 
> 赞同：1
> 
> 时间：2013-04-18T18:32:10.767
> 
> 标签：ios, xcode

我无法确定崩溃的原因。

从 Xcode 在 iPad 3.1 上运行应用程序的调试版本时，应用程序终止，但调试器没有告诉我任何信息。我有一个全异常断点，并且在过去确实可以捕获错误。

并不是说我知道如何使用故障转储，但是当发生这种情况时，管理器设备窗格中的“设备日志”会显示来自“未知”类型的“未知”进程的条目。

我也有内存警告问题，但在这种情况下，我没有调用内存警告方法（我有一条日志消息和一个断点）。这可能是一个永远不会调用该方法的内存警告吗？[内存警告是一个难题，因为 Instruments 没有向我显示任何泄漏，而且我自己的图像对象（显然）没有保存在内存中——但这是另一个问题]。

知道我发生了什么以及如何让调试器捕获条件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:45:51.727

这听起来像你的应用程序被系统杀死，因为你分配了太多的内存。根据您分配的内存量，很可能您永远看不到内存警告方法被调用。

在仪器运行的情况下检查您的应用程序，并再次检查崩溃报告，它应该会为您提供更多详细信息。`rpages`例如，带有`recent_max`和`(state)`列的进程列表，`Largest process:`如上所示。我敢打赌，您的进程已命名并显示状态`(suspended)`，这意味着：iOS 杀死了它，因为您分配了太多内存。

# java - 将空行添加到字符串

> ID：16090561
> 
> 赞同：1
> 
> 时间：2013-04-18T18:32:16.777
> 
> 标签：java, android, string

如何在字符串中添加空行？这样一个字符串看起来像这样：

```
This is an example of something
This is still an example of something 
```

变成这样：

```
This is an example of something

This is still an example of something 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T18:33:25.300

```
"This is an example of something\n\nThis is still an example of something" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T18:34:17.040

尝试这个 ：

```
"This is an example of something\n\nThis is still an example of something" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T18:38:22.237

如果您要在 UI 中用作格式化和显示，只需将“\n”添加到您的字符串或 br 标记。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T18:38:07.233

您可以使用类似的东西，将每个“\n”替换为“\n\n”。

```
str = str.replaceAll("\n", "\n\n"); 
```

str 是您从 editText 获得的字符串。

# coldfusion - ColdFusion：从 cfloop 获取变量字符串值

> ID：16090564
> 
> 赞同：2
> 
> 时间：2013-04-18T18:32:31.297
> 
> 标签：coldfusion, coldfusion-9, cfml

下面的代码输出当月的周末日期。

**代码：**

```
<cfparam name="month" default="#DatePart('m', Now())#">
<cfparam name="year" default="#DatePart('yyyy', Now())#">

<cfset ThisMonthYear=CreateDate(year, month, '1')>
<cfset Days=DaysInMonth(ThisMonthYear)>

<cfset ThisDay = 1>
<cfloop condition="ThisDay LTE Days">
    <cfset presentDay = CreateDate(year, month, thisday)>
    <cfif DayOfWeek(presentDay) EQ '7'>
        <cfoutput>#ThisDay#</cfoutput>
    <cfelseif DayOfWeek(presentDay) EQ '1'>
        <cfoutput>#ThisDay#</cfoutput>
    </cfif>
    <cfset ThisDay = ThisDay + 1>
</cfloop> 
```

**输出：**
6 7 13 14 20 21 27 28

我正在尝试将这个 cfloop 的值传递到一个变量中。下面的代码仅显示最后一个周末的日期值。

**代码：**

```
<cfset ThisDay = 1>
<cfset weekDayOfMonth = "">
<cfloop condition="ThisDay LTE Days">
    <cfset presentDay = CreateDate(year, month, thisday)>
    <cfif DayOfWeek(presentDay) EQ '7'>
        <cfset weekDayOfMonth = ThisDay>
    <cfelseif DayOfWeek(presentDay) EQ '1'>
        <cfset weekDayOfMonth = ThisDay>
    </cfif>
    <cfset ThisDay = ThisDay + 1>
</cfloop>
<cfoutput>#weekDayOfMonth#</cfoutput> 
```

**输出**
28

问题，我需要在我的最后一个 cfloop 代码中修复什么，以便我可以将循环值传递给`jsWeekendDates`变量？

任何帮助将不胜感激。
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:17:53.043

只是自己想出来的。享受。

```
<cfset ThisDay = 1>
<cfset weekDay = "">
<cfloop condition='ThisDay LTE Days'>
    <cfset presentDay = CreateDate(year, month, thisday)>
    <cfif DayOfWeek(presentDay) EQ '1' OR DayOfWeek(presentDay) EQ '7'>
        <cfset weekDay = weekDay & " " & ThisDay">
    </cfif>
    <cfset ThisDay = ThisDay + 1>
</cfloop>
<cfoutput>#weekDay#</cfoutput> 
```

# wcf - WCF 测试客户端仅在同一项目中加载服务

> ID：16090566
> 
> 赞同：0
> 
> 时间：2013-04-18T18:32:33.430
> 
> 标签：wcf

我重组了一个 WCF 项目以将 service.cs 和合同分离为单独的项目。在主 WCF 项目中，我只放置了一个引用（dll，不是服务引用）服务类的 service.svc 文件。我还更新了 app.config 以反映更改。

一旦我这样做了，wcf 测试客户端就不再加载该服务。它没有给出任何错误。我可以发布到我的本地 IIS，它仍然可以正常工作。

我是否需要在 wcftestclient.exe 命令行选项中添加一些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:43:28.313

那里也有合同的项目的dll吗？确保将bin/debug（或 bin/release）中的**所有内容复制到 IIS 虚拟目录中。**

# android - 将用户输入与字符串匹配

> ID：16090567
> 
> 赞同：0
> 
> 时间：2013-04-18T18:32:35.187
> 
> 标签：android, string, android-edittext

这很可能是一件非常简单的事情，所以如果是，我深表歉意，但我似乎无法实现它。

我正在尝试检查用户在 editText 字段中键入的内容并将其与硬编码字符串进行比较。

这是我要比较的字符串 -

```
OverlayItem overlayitem = new OverlayItem(point,"House Information",
"4 Bed w/ large garden\n2 minute walk from Town Centre\nSchools 5 minute walk\n€300,000"); 
```

这是我的 editText 字段 -

```
<!-- Number of rooms text field -->
<EditText
    android:id="@+id/numberRooms"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="No. of rooms"
    android:imeActionLabel="launch"
    android:inputType="number" /> 
```

我希望能够根据字符串中的“4”检查用户键入的内容。这是我到目前为止所尝试的 -

```
EditText numberOfRooms = (EditText) findViewById(R.id.numberRooms);
if(overlayitem.equals(numberOfRooms.getText().toString()))
{
    itemizedoverlay.addOverlay(overlayitem);
} 
```

所以基本上我不想比较整个字符串，我只想将用户输入的内容与字符串中的第一个字符进行比较，在这种情况下，它总是一个数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:44:00.210

尝试：

```
 String rooms = overlayitem.getSnippet().substring(0,2);
      rooms = rooms.trim();
    if(rooms.equals(numberOfRooms.getText().toString()))
    {
        //Do whatever you want
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:38:50.277

overlayitem 不是字符串。您可能想要比较`overlayitem.getTitle()`或`overlayitem.getSnippet()`改为：

```
overlayitem.getTitle().equals(numberOfRooms.getText().toString()) 
```

# c - strstr 带有 udp 客户端字符串和文件字符串

> ID：16090569
> 
> 赞同：1
> 
> 时间：2013-04-18T18:32:46.580
> 
> 标签：c, string

我正在从 UDP 客户端向 UDP 服务器发送一个字符串。服务器的工作是检查此字符串是否存在于文本文件 archive.txt 中的任何位置。

我遇到的问题是 strstr 总是返回 null，即使我的第二个字符串在我的第一个字符串中。

```
char msg[1000];
FILE *archive;
archive = fopen("archive.txt", "r");
char line[53];
char *testing; 
```

. . .

```
 len = sizeof(cliaddr);
        n= recvfrom(sockfd,msg,1000,0,(struct sockaddr *)&cliaddr,&len);
        sendto(sockfd,msg,n,0,(struct sockaddr *)&cliaddr,sizeof(cliaddr));
        msg[n]=0;
        while(fgets(line, 53, archive) !=NULL)
        {
            testing = strstr(line, msg);

            if(testing!=NULL)
               {printf("%s\n","Success");}
            else
            {    printf("%s\n", "fail");
                 printf("%s\n", line);  
                 printf("%s\n", msg);               
            }

        } 
```

有时我的程序会打印失败，其中 msg 是 line 的子字符串的 line 和 msg。

# jquery-ui - 在悬停/焦点上显示密码要求引导弹出窗口并在弹出窗口中传递显式 Html 内容以显示

> ID：16090570
> 
> 赞同：1
> 
> 时间：2013-04-18T18:32:50.873
> 
> 标签：jquery-ui, twitter-bootstrap, passwords, hover, popover

我们如何在悬停时使用 twitter Bootstrap 弹出窗口和 jquery 显示密码字段的密码要求。

```
<input id = "txtPassword" type = "password"  title ="password" /> 
```

1.  我想将自定义“html”作为弹出框的内容传递。
2.  将弹出窗口的标题更改为自定义标题
3.  将弹出窗口的样式从当前的基本样式更改为自定义样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:36:52.497

对于初学者，您可以使事情变得简单并使用最简单的`popover`引导程序：

1.在您的项目中包含正确的引导文件以使其工作：`bootstrap-tooltip.js` 湾。`bootstrap-popover.js` C。`jquery.min.js` d。`bootstrap.css`

2.仅将元素用作将触发的元素`popover`，例如：

```
<a href="#" id="example" rel="popover" data-content="It's so simple to create a tooltop for my website!" data-original-title="Twitter Bootstrap Popover">hover for popover</a> 
```

with ：`id="example"`您可以访问元素`jquery`以显示内容`popover`

on the `data-content="some text"`：这是将显示在`popover`窗口上的文本

on the `data-original-title="some title"`：您可以决定在`popover`窗口上显示什么标题

3.`jquery`使用访问和激活`popover`这样的：

```
$(function ()  
{ $("#example").popover();  
}); 
```

就从那开始，然后尝试更深入地挖掘你的目标。

# java - 数组循环需要帮助 - java

> ID：16090571
> 
> 赞同：-4
> 
> 时间：2013-04-18T18:32:51.460
> 
> 标签：java, arrays, loops

对于这个任务，我无法让最后一个方法再次循环并找到随机数系列中的下一个最大元素。解决这个问题的一些输入会很棒。谢谢你。

公共静态无效主要（字符串[]参数）{

```
 int[] array = randomIntArray (10);   
    sortArray (array);

}

  public static int randomInt (int low, int high){ // Create a serie of random numbers
    int x = 0;
    for (int i = 0; i < 10; i++){
        x = (int)(Math.random ()* (high - low) +low);

    }  
    return x;

}
public static int[] randomIntArray (int n) { // Size of array
    int[] a = new int [n];
    for (int i = 0; i <a.length; i++){
        a[i] = randomInt (-5, 15);
    }
    return a;
}

public static int indexOfMaxInRange (int[] a, int low , int high){

    int index = low;
    for (int i = low +1; i < high; i++){
        if (a[i] > a[index]){ // If the position of i is greater than index
            index = i; // then index will equal that position with the highest element
        }         
    }  
  return index;

}
public static int swapElement (int []a, int index , int i){
    int tmp =0;

  for(i = 0; i < (a.length); i++) {
    tmp = index;
     a[i]= a[tmp] ;
  } 
    return a[tmp] ;
}

public static void sortArray (int[] array){ //The sortArray calls the indexOfMaxInRange to get the index of the largest element, then uses swapElement to swap that index's position to position a[i].

    for (int b= 0; b <array.length; b++){ 
    System.out.println (array[b]+"\t"+ b); // Print out original list of random numbers
    }
    System.out.println ();

    for (int i = 0; i <array.length; i++){    
    int index = indexOfMaxInRange (array, 0, 10 );
    int sort = swapElement (array, index, 0);

    System.out.println (sort+"\t"+ i);      
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:31:28.690

对最后 3 种方法所做的更改

```
public static int indexOfMaxInRange (int[] a, int low , int high){

    int index = low;
    for (int i = low +1; i < a.length; i++){
        if (a[i] > a[index]){ // If the position of i is greater than index
            index = i; // then index will equal that position with the highest element
        }         

    }  
  return index;

}
public static void swapElement (int []a, int index , int i){
    int pos2;        
    pos2 = index;
     a[i]= a[pos2];  

     System.out.println (a[i]+"\t"+ index);     
}

public static void sortArray (int[] array){ 
    for (int b= 0; b <array.length; b++){ 
    System.out.println (array[b]+"\t"+ b);
    } 
    System.out.println ("Number in order");     

    for (int i = 0; i <array.length-1; i++){    
    int index = indexOfMaxInRange (array, i, 10 );
    swapElement (array, index,i );
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:47:13.903

这看起来像是作业，因为对数组进行排序是由无数可用库处理的，所以我将尝试给出提示而不是完整的答案。

你的 randomInt 函数做的工作比它需要的多 10 倍。这不会改变程序的行为，但这是一种浪费。

您的 swapElement 函数看起来不太对。你不需要返回任何东西，也不需要循环。只需交换位置“index”和“i”中的元素。也许将参数称为“a”和“b”或“pos1”和“pos2”以减少混淆。

在 sortArray 中，找到最大的元素并将其放在位置 0 后，您需要继续查找第二大元素并将其放在位置 1，以此类推。为此，您将需要一个循环。你几乎已经准备好了。提示：在将最大的元素放在位置 0 之后，您可以通过找到最大的剩余元素（即调用 indexOfMaxInRange 但将 1 作为起始位置传递）来找到第二大元素。

# java - NPE 在我自己的图形类中使用 HashMap

> ID：16090576
> 
> 赞同：0
> 
> 时间：2013-04-18T18:33:08.440
> 
> 标签：java, graph, nullpointerexception, hashmap, tostring

这是一个学校项目。我们应该在 HashMap 的帮助下编写一个处理图的程序。每个节点（或角落？）都有一个键（这是我们与之连接的另一个节点）和一个值（此连接的成本）。我几乎完成了，我所有的测试用例都可以工作，除了`toString()`方法。它应该这样写：

```
{(0,1), (2,1)} 
```

这意味着 0 和 1 已连接，2 和 1 也已连接。

```
/**
 * Returns a string representation of this graph.
 * 
 * @return a String representation of this graph
 */
@Override
public String toString() {
    // TODO
    StringBuilder sb = new StringBuilder();
    sb.append("{");
    for (int i = 0; i < edges.length; i++) {
        for (int j = 0; j < edges[i].size(); j++) {

            if (edges[i].containsKey(j)) {
                if (j < edges[i].size() - 1) {
                    sb.append("(" + i + "," + j + "),");
                } else if (j == edges[i].size() - 1) {
                    sb.append("(" + i + "," + j + ")");
                }

            }
        }
        if (i != edges.length - 1) {
            sb.append(", ");
        }
    }
    sb.append("}");
    System.out.println(sb.toString());
    return sb.toString();
} 
```

由于我们的代码结构（我们开始使用的代码）具有 HashMap 的静态大小，如果我为 5 个节点制作一个图并且只添加其中 3 个节点，我会得到一个 NPE。当我尝试打印这些时，由于`edges[i].containsKey(j))`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:39:34.600

您可能没有初始化边数组的每个元素。

您甚至可以在尝试检查键是否包含之前测试边缘索引是否不为空。

改变：

```
if (edges[i].containsKey(j)) 
```

至：

```
if (edges[i] != null && edges[i].containsKey(j)) 
```

由于短路评估，这是可能的：

[http://en.wikipedia.org/wiki/Short-circuit_evaluation](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

如果值为 null，您甚至可能不想进入嵌套的 for 循环。在这种情况下，将嵌套的 for 循环包裹在条件周围以确保 edge[i] != null。

# c# - 为什么 Enter 和 Space 键对按钮的行为不同？

> ID：16090578
> 
> 赞同：20
> 
> 时间：2013-04-18T18:33:09.140
> 
> 标签：c#, winforms

据我所知，这些是唯一在按钮获得焦点时做出反应的键。

立即按下`Enter`“点击”按钮，即使您按住它的键。（所以“点击”发生在 KeyDown 上）。

按下`Space`更像是普通的鼠标点击；按住它不会激活 Click 事件，但一旦释放它就会激活。（所以“点击”发生在 KeyUp 或 KeyPressed 上。）

为什么有区别？我想要一篇关于这个主题的好文章，或者只是一个关于为什么这两个键有不同行为的合乎逻辑的解释。肯定有解释的！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T18:53:37.330

我找不到任何解释这一点的文章，这是一个非常好的问题。我个人认为这是出于功能目的

`Enter Key`经典的`AcceptButton`行为就像一个`FullClick`(Click/ClickReleased) 这就是为什么如果你拿着它你会有点击多次的效果。

`Space`但是它是一个`SingleClick`（在您释放键之前没有单击释放），因此它可以完成只`Click`需要 a 而没有 a 的任务以及只需要`ClickRelease`选择一个控件来激活它的操作。Like`CheckBox`或`RadioButtons`不能用 the 激活，但如果单击它`Enter`可以用 like 激活。`Space`

总之，这`Space`将是官方的`MouseClick`，因为它具有相同的`MouseClick`压制或释放效果。*将是One click full click*`Enter`的一种快捷方式。当然，所有这些都是为了给键盘本身提供更多可能性。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T19:28:57.180

您会看到两种不同的行为，除了它们都处理 winform 上的键盘事件外，它们没有关联。

`Enter`很特别，因为它是激活表单的[acceptButton](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton.aspx)的按键。实际上，您错过了另一个可以影响按钮`Esc`的键： [cancelButton](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.cancelbutton.aspx)，它也会引发事件。

正如 PhaDaPhunk 解释`Space`的那样，它`MouseClick`适用于任何接受 MouseClick 的组件，但我还没有找到详细的解释。我认为这是所有控件的默认行为。Microsoft 可[访问性指南似乎在他们关于](http://msdn.microsoft.com/en-us/library/windows/desktop/bb545462.aspx)**基于键盘的导航**的部分中暗示了这一点

 **顺便说一句，这个[Microsoft 支持知识库条目](http://support.microsoft.com/kb/955938)似乎表明空格键的实现从 Button.Click 变为 Button.MouseClick。也许这就是它行为不同的原因。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-10-13T08:39:22.253

此功能似乎已在 Big Sur 中删除。我来这里是为了寻找如何找回它。单击 Enter 继续或按空格键取消通常非常有效，以选择大多数对话框按钮上的两个主要选项。***

# r - R Sweave Computer Modern 字体使用

> ID：16090580
> 
> 赞同：7
> 
> 时间：2013-04-18T18:33:20.447
> 
> 标签：r, fonts, sweave

我已经安装了 R 包`extrafont`和`fontcm`. 然后尝试在 Sweave 中使用 Computer Modern 字体绘制数据：

```
<<test,fig=TRUE,echo=False>>=
plot(na, family="CM Roman")
@ 
```

但它失败并出现错误：

```
> grDevices::pdf.options(useDingbats = FALSE); utils::Sweave('test.Rnw', encoding='UTF-8')
Writing to file test.tex
Processing code chunks with options ...
 1 : echo keep.source term verbatim (test.Rnw:76)
 2 : keep.source term verbatim pdf  (label = test, test.Rnw:80)

Error:  chunk 2 (label = test) 
Error in axis(side = side, at = at, labels = labels, ...) : 
  invalid font type
In addition: Warning messages:
1: In axis(side = side, at = at, labels = labels, ...) :
  font family 'CM Roman' not found in PostScript font database
2: In axis(side = side, at = at, labels = labels, ...) :
  font family 'CM Roman' not found in PostScript font database
3: In axis(side = side, at = at, labels = labels, ...) :
  font family 'CM Roman' not found in PostScript font database
4: In axis(side = side, at = at, labels = labels, ...) :
  font family 'CM Roman' not found in PostScript font database
5: In axis(side = side, at = at, labels = labels, ...) :
  font family 'CM Roman' not found in PostScript font database
6: In axis(side = side, at = at, labels = labels, ...) :
  font family 'CM Roman' not found in PostScript font database
7: In axis(side = side, at = at, labels = labels, ...) :
  font family 'CM Roman' not found in PostScript font database
Error in rle(filenames) : 'x' must be an atomic vector
Calls: <Anonymous> -> <Anonymous> -> RweaveTryStop
Execution halted 
```

`loadfonts(device="postscript")`显示字体是`already registered with postscriptFonts()`

如何将它与 Sweave 一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T20:58:27.793

你确定你使用的是正确的名字吗？试试这个，看看结果是否有用：

```
> names(postscriptFonts() )
 [1] "serif"                "sans"                 "mono"                 "AvantGarde"          
 [5] "Bookman"              "Courier"              "Helvetica"            "Helvetica-Narrow"    
 [9] "NewCenturySchoolbook" "Palatino"             "Times"                "URWGothic"           
[13] "URWBookman"           "NimbusMon"            "NimbusSan"            "URWHelvetica"        
[17] "NimbusSanCond"        "CenturySch"           "URWPalladio"          "NimbusRom"           
[21] "URWTimes"             "ComputerModern"       "ComputerModernItalic" "Japan1"              
[25] "Japan1HeiMin"         "Japan1GothicBBB"      "Japan1Ryumin"         "Korea1"              
[29] "Korea1deb"            "CNS1"                 "GB1" 
```

在审查中，我发现涉及 pdf.options，您可能还需要检查：

```
 > names( pdfFonts() ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T06:39:17.783

似乎是一个愚蠢而简单的问题。我需要在我的 Sweave 文件中加载`extrafont`和打包：`fontcm`

```
<<setup,echo=FALSE>>=
    library(extrafont)
    library(fontcm)
@ 
```

# unix - 如何将定期换行符插入具有 1 个令人难以置信的长行的文件中

> ID：16090585
> 
> 赞同：1
> 
> 时间：2013-04-18T18:33:42.457
> 
> 标签：unix, text-processing

我有一个只有 1 行但有 2G 个字符的文本文件。

我需要在文件中找到一些东西，但是该行太长而无法在任何编辑器中打开 - 无论是在 Unix 上，还是如果我将其 ftp 到我的 PC...

是否有一种快速/简单的方法来插入换行符，例如每 120 个字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:43:29.450

`Fold`命令这样做，所以如果你想在 120 之后换行。

```
fold -w120 fie > newfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:42:23.510

```
sed 's/\(.\{120\}\)/\1\n/g' file.txt 
```

如果您需要创建一个新文件，则只需重定向输出：

```
sed 's/\(.\{120\}\)/\1\n/g' file.txt > new_file.txt 
```

以每行 4 个字符为例

```
[fotanus@thing ~]$ cat test.txt 
qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq
[fotanus@thing ~]$ sed 's/\(.\{4\}\)/\1\n/g' test.txt > a.txt
[fotanus@thing ~]$ cat a.txt 
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq
qqqq 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:43:23.117

你可以试试这条线：

```
 sed -r 's/.{120}/&\n/g' file 
```

如果要将更改写回原始文件：

```
sed -ir 's/.{120}/&\n/g' file 
```

例如：

文件有 100 `s`，每 12 个字符添加一个换行符：

```
kent$  cat file                   
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss

kent$  sed -r 's/.{12}/&\n/g' file
ssssssssssss
ssssssssssss
ssssssssssss
ssssssssssss
ssssssssssss
ssssssssssss
ssssssssssss
ssssssssssss
ssss 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T18:44:06.950

如果您不介意创建另一个文件。`bash`用on测试了这个`linux`。这里 blah.out 是输入文件

```
while read -r -d '' -n 120 record; do echo $record; done<blah.out > blah2.out 
```

# magento-1.7 - Magento 管理类别显示不正确

> ID：16090588
> 
> 赞同：0
> 
> 时间：2013-04-18T18:33:49.797
> 
> 标签：magento-1.7

嗨所以我有这个magento安装。使用类别的管理界面时遇到问题。一开始一切正常，但在我全新安装后的随机时间，管理类别显示如下：

![](https://i.stack.imgur.com/EXJnY.png)

任何想法为什么这样做？发生此错误后，我无法添加任何类别。

# java - jTextArea 背景在 setEnabled(false) 后没有改变

> ID：16090591
> 
> 赞同：0
> 
> 时间：2013-04-18T18:34:03.207
> 
> 标签：java, swing, netbeans, jtextfield, jtextarea

我在 netbeans 中为我的 jTextArea 设置了 setEnabled(false)。textarea 被禁用，但它的背景颜色没有像预期的那样从白色变为“灰色”。只有当我从主类运行我的项目时才会发生这种情况。它在从包含 textArea 的 jForm 运行时将背景颜色更改为“灰色”。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-10T01:33:35.723

您需要使代码后跟 jTextArea1.setBackground(Color.GREY); 所以它看起来像这样。

```
jTextArea1.setEnabled(false); jScrollPane1.setEnabled(false);
jTextArea1.setBackground(Color.GREY); 
```

# wpf - 在 Windows 8 应用程序中离开 XAML 页面时，XAML 对象是否仍然虚拟存在？

> ID：16090594
> 
> 赞同：3
> 
> 时间：2013-04-18T18:34:19.510
> 
> 标签：wpf, xaml, windows-8, mvvm-light

我使用 MVVM Light Toolkit 来定义视图模型和视图之间的关联。

指示容器将视图模型注册为单例实例。因此，当需要 GagaViewModel 时，将始终返回相同的实例：

```
public GagaViewModel GagaViewModel
{
    get
    {
        var vm = ServiceLocator.Current.GetInstance<GagaViewModel>();
        vm.Setup(); //Clear the ObservableCollection
        return vm;
    }
} 
```

您可以单击 PriorGaga.xml 上的缩略图项。然后在 Gaga.xaml 的 GridView“MyGridView”中选择自选项目。Gaga.xaml 的代码隐藏文件：

```
protected override async void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
{
    var itemId = navigationParameter as String;
    if (String.IsNullOrEmpty(itemId))
    {
        throw new ArgumentException("navigationParameter was either null or empty");
    }

    await ((GagaViewModel)DataContext).Init(itemId); //Busy(-Indicator) while loading data from server, filling the ObservableCollection and writing the selected item down

    BringItemIntoView();
}

private void BringItemIntoView()
{
    var vm = (GagaViewModel)DataContext;

    Dispatcher.RunAsync(CoreDispatcherPriority.Normal,
                        () => MyGridView.ScrollIntoView(vm.SelectedItem));
} 
```

这很好用。作为示例：项目 #45 立即出现在视口中（从头开始正确的**视口**位置）。

但是，当您单击后退按钮并通过选择任意缩略图项（我们只说 #29）返回 Gaga.xaml 时，您将看到项目 #1，然后切换到 #29（**视口在****容器**上方移动）。有人知道下面发生了什么吗？之前 Gaga.xaml 访问的容器中是否有任何虚拟化项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:26:08.840

我的理解是，你的 Gaga 页面实例的生命周期是由它的`NavigationCacheMode`属性决定的。默认情况下，它设置为`Disabled`。假设您没有更改此属性，您应该在每次导航到 Gaga 页面时看到一个新实例。您可以通过在其构造函数中设置断点来验证此行为。因此，我认为每次导航到 Gaga 时，UI 的行为都应该是相同的，因为一切都是新鲜的。

（我想将此作为评论添加，因为我实际上还没有回答您的问题，但遗憾的是我没有足够的代表。我提前道歉；请不要打我！）</p>

# speech-recognition - 在为我的本地语言开发语言模型时是否需要降噪算法

> ID：16090600
> 
> 赞同：0
> 
> 时间：2013-04-18T18:34:50.523
> 
> 标签：speech-recognition, cmusphinx, noise-reduction, sphinx4

我正在为我的本地语言开发声学模型和语言模型，并计划将其与pocketsphinx 和 sphinx4 集成。

现在我想问一下，我是否需要为我的本地语言实施降噪算法以提高传输准确性，或者袖珍狮身人面像会采用这种算法吗？如果是，我需要，那么我应该遵循哪些步骤来集成降噪算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:32:48.923

没有必要。降噪是无关的功能。如果您没有噪音，则无需降噪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T10:40:00.620

您不必*使用*任何降噪算法。

如果您确实使用了一个，请确保将其应用于训练音频和识别音频。否则，您可能会注意到准确性下降。

根据算法，如果使用它，您可能会丢失一些重要数据。对于人类来说，这种声音可能看起来更好，但对于 Sphinx 来说，它可能会变得更难识别。

# html - 如何复制附加文档的确切布局？

> ID：16090606
> 
> 赞同：1
> 
> 时间：2013-04-18T18:35:02.650
> 
> 标签：html, css

![在此处输入图像描述](https://i.stack.imgur.com/9879P.jpg)

嗨，表单是一个 word 文档，我一直在尝试完全按照 html 的方式重新创建它，但不幸的是遇到了困难。

这就是我到目前为止所拥有的。也许，css 是它布局不正确的原因。

感谢你的协助。

CSS - 必须具备：

```
 <style type="text/css">
 table .mystyle
{
    border-width: 0 0 1px 1px;
    border-spacing: 0;
    border-collapse: collapse;
    border-style: solid;
    border-color:#000;
    width:900px;
}

.mystyle td, .mystyle th
{
    margin: 0;
    padding: 4px;
    border-width: 1px 1px 0 0;
    border-style: solid;
    font-size:medium;
    border-color:#000;
}
   </style> 
```

当前的html：

```
 <table class="mystyle">
    <tr>
    <td style="width:50px;" class="style7">&nbsp;</td>
        <td style="width:158px;" class="style7">Milestone</td>
    <td style="width:158px;" class="style7">Owner</td>
        <td style="width:108px;white-space:nowrap;">
          <TABLE border="1">
             <TR>
               <TD colspan="2">Completion Date</TD>
            </TR>
            <TR>
              <TD>Target</TD>
              <TD>Actual</TD>
            </TR>
           </TABLE>
         </td>
        <td style="width:358px;" class="style7">Comments</td>
    </tr>
     <tr>

    </tr>
  </table> 
```

最左边是第一季度到第四季度

![在此处输入图像描述](https://i.stack.imgur.com/rlUoC.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:52:28.060

布局该表的关键是使用*rowspan*和*colspan*属性。

[http://tinker.io/174de/1](http://tinker.io/174de/1)

```
<table class="mystyle">
    <thead>
        <tr>
            <th rowspan="2">Quarter</th>
            <th rowspan="2">Milestone</th>
            <th rowspan="2">Owner</th>
            <th colspan="2">Completion Date</th>
            <th rowspan="2">Comments</th>
        </tr>
        <tr>
            <th>Target</th>
            <th>Actual</th>
        </tr>
    </thead>

    <tbody>
        <tr>
            <th rowspan="3">Q1</th>
            <td>a</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>

        <tr>
            <td>b</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>

        <tr>
            <td>c</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </tbody>

    <tbody>
        <tr>
            <th rowspan="3">Q2</th>
            <td>a</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>

        <tr>
            <td>b</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>

        <tr>
            <td>c</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </tbody>
</table> 
```

# android - 在硬件加速下缩放画布时的模糊偏移路径

> ID：16090607
> 
> 赞同：5
> 
> 时间：2013-04-18T18:35:03.397
> 
> 标签：android, graphics, hardware-acceleration

我的应用程序使用我缩放的画布，以便我可以以米而不是像素为单位指定路径点。当我缩放画布，然后使用 绘制一条线`path.lineTo()`时，在硬件加速开启的情况下，这条线是模糊和偏移的。关闭硬件加速或使用`canvas.drawLine()`.

这是重现问题的代码：

```
package com.example.canvasproblem;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Path;
import android.os.Bundle;
import android.view.View;

public class MainActivity extends Activity {
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(new MyView(this));
    }

    class MyView extends View {
        Paint pen = new Paint();
        public MyView(Context context) {
            super(context);
            pen.setStyle(Paint.Style.STROKE);
            pen.setStrokeWidth(1f); // 1 meters wide
            //this.setLayerType(LAYER_TYPE_SOFTWARE, null);
        }
        protected void onDraw(Canvas canvas) {
            float width_meter = 10.0f; // width of canvas in meters
            float width_pxl = canvas.getWidth(); // width of canvas in pixels
            float height_pxl = canvas.getHeight(); // height of canvas in pixels

            canvas.save();
            canvas.translate(width_pxl/2, height_pxl/2); // make center of canvas (0,0)
            canvas.scale(width_pxl/width_meter, width_pxl/width_meter); // convert to meters

            // path
            Path path = new Path();
            path.moveTo(0, 0);
            path.lineTo(0, 4);
            canvas.drawPath(path, pen);

            // line
            canvas.drawLine(0, 0, 0, 4, pen);

            canvas.restore();
        }
    }
} 
```

这是问题输出的屏幕截图（正确的 drawLine() 显示在 lineTo() 的顶部）：

[截图.png](http://www.eecs.harvard.edu/~woodward/images/Screenshot.png)

硬件是 1024x768 平板电脑，运行 android 4.1.1。处理器是瑞芯微RK30。

我的偏好是使用带硬件加速的路径，用于点和速度之间的圆角连接。如果我做错了什么来造成这个问题，请告诉我。谢谢

温柔点，这是我的第一篇文章。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T19:22:20.083

This is a limitation of the hardware accelerated renderer. Paths are rasterized at their native size before transform. In your case, the Path is transformed into a 1x4 texture. That texture is then scaled at draw time. To work around this, scale your Path directly by using `Path.transform(Matrix)`. You can also use scaled coordinates when building the path.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T17:43:15.000

感谢 Romain Guy 的回答，这里是 drawPath() 方法的包装器，它为开启和关闭硬件加速产生相同的结果。它只处理现有矩阵中 x & y 缩放相同的情况，它可能不是最有效的。

```
void drawPath(Canvas canvas, Path path, final Paint pen) {
    canvas.save();

    // get the current matrix
    Matrix mat = canvas.getMatrix();

    // reverse the effects of the current matrix
    Matrix inv = new Matrix();
    mat.invert(inv);
    canvas.concat(inv);

    // transform the path
    path.transform(mat);

    // get the scale for transforming the Paint
    float[] pts = {0, 0, 1, 0}; // two points 1 unit away from each other
    mat.mapPoints(pts);
    float scale = (float) Math.sqrt(Math.pow(pts[0]-pts[2], 2) + Math.pow(pts[1]-pts[3], 2));

    // copy the existing Paint
    Paint pen2 = new Paint();
    pen2.set(pen);

    // scale the Paint
    pen2.setStrokeMiter(pen.getStrokeMiter()*scale);
    pen2.setStrokeWidth(pen.getStrokeWidth()*scale);

    // draw the path
    canvas.drawPath(path, pen2);

    canvas.restore();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-13T18:49:54.500

我发现解决此问题的另一种方法是将`Path`s 绘制到另一个`Canvas`由缓存位图支持的位置，然后将该位图绘制到传递的`Canvas`. 这消除了我的情况中的模糊和偏移。

# mfc - 需要向旧版 MFC 对话框应用程序添加锚定/停靠

> ID：16090609
> 
> 赞同：4
> 
> 时间：2013-04-18T18:35:15.403
> 
> 标签：mfc

我正在使用我认为是在 90 年代初开发的 MFC 代码。我被赋予了将软件带入 21 世纪的艰巨任务，使其能够在 Windows 7/8 之类的系统上运行。该应用程序面向众多平台，其中一个是 Windows XP。原始软件具有固定的窗口大小，在某些操作系统上看起来很糟糕。我已经设法克服了这个问题，但是调整对话框的大小会留下很多灰色空间。我需要合并锚点和对接，类似于 .NET。

与往常一样，时间是有限的，所以我需要快速、“肮脏”的解决方案，直到我有时间重写 UI 层。该应用程序包含许多“屏幕”，每个屏幕都遵循类似的格式。顶部的横幅，内容包括版权、LHS 上的帮助和 RHS 上的任务按钮以及一种包含“热键”的页脚控件。

作为一个快速修复，我认为调整对话框大小应该会导致以下问题。

1.  横幅左右锚定
2.  LHS/RHS 内容分为 60/40
3.  页脚与横幅一致

由于不同的控件用于不同的目标操作系统/平台，因此这变得更加困难。基本上，OnInitDialog 使用条件编译来根据平台动态添加控件。

为了实现这一点，我猜我需要类似以下的东西......

1.  每个控件“记住”它的边界我希望这会很棘手，因为对话框子控件没有 WM_CREATE 消息。可能使用 OnParentNotify。
2.  调整对话框大小会“记住”它的最后大小并计算宽度和高度的差异。该对话框向其直接子级发送父级调整大小消息，以便他们可以重新计算布局。

最后，我的问题是解决这个问题的最佳方法是什么？我有一个想法...

1.  引入一个新的 Widget 类，该类扩展 CWnd 并通过虚拟方法返回锚点详细信息。
2.  创建实现 Widget 的控件，例如 Cbanner、CCopyright、CFooter 等
3.  为适当调整 LHS 和 RHS 内容大小的内容创建 RowWidget。

现在这很难用语言表达！任何帮助表示赞赏。

谢谢

卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:44:14.467

实际上是一个非常常见的问题，您的推理是合理的，但与其重新发明轮子，不如先看看您描述的一些免费提供的实现。

例如[，这篇 CodeProject 文章可以满足](http://www.codeproject.com/Articles/11538/Resize-Reposition-the-Controls-in-a-Dialog-at-your)我的需求。

# c++ - 在 OpenGL 中设置窗口的大小

> ID：16090612
> 
> 赞同：-1
> 
> 时间：2013-04-18T18:35:30.363
> 
> 标签：c++, opengl

已修复：我正在尝试使用[OpenGL在](http://en.wikipedia.org/wiki/OpenGL)[C++](http://en.wikipedia.org/wiki/C++)中创建一个基本游戏。我可以制作一个带有正方形的窗口，然后让正方形四处移动。但是，我无法让窗口的大小正确。

如果我尝试将窗口设置为 800 x 600，那么窗口和边框将是这个大小，而不仅仅是边框内的位。有没有办法让边界内的位是我定义的大小？

我将代码粘贴在[http://pastebin.com/jxd5YhHa](http://pastebin.com/jxd5YhHa)中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:38:23.047

在浏览了你的代码后，我看到了很多典型的新手错误——这次是低级 Win32 API 风格。

首先也是最重要的：帮自己一个忙，请不要使用裸露的 Win32 API。有很多不错的 OpenGL 框架，它们的额外好处是可以让你的程序免费跨平台。在您的情况下，我推荐 SDL，可从[http://www.libsdl.org获得](http://www.libsdl.org)

现在你的程序的主要问题是，它把一些重要的 OpenGL 操作分散在各处。最重要的是设置视口和矩阵。您的绘图功能应始终遵循以下方案

```
void draw(…)
{
    glDisable(GL_SCISSOR_TEST);

    glClearColor(…);
    glClearDepth(…);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT);

    for(subview in views) {
        glViewport(…);
    #ifdef USE_FIXED_FUNCTION_PIPELINE
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        projection_setup();

        for(model in scene) {        
            glMatrixMode(GL_MODELVIEW);
            glLoadIdentity();
            modelview_setup();
        #else
            glUseProgram(…);
            setup_uniforms();
        #endif
            draw_stuff();
        }
    }

    SwapBuffers();
} 
```

您的问题的关键是，在您需要时*在绘图代码中*设置视口、投影和模型视图。

# security - 存储 oauth access_token 或在每个“会话”中询问一个新的

> ID：16090617
> 
> 赞同：1
> 
> 时间：2013-04-18T18:35:41.813
> 
> 标签：security, oauth, token

我正在玩支持oauth的服务的api。我设法从服务中检索了 access_token，现在我可以调用 api 的各个端点。到目前为止，一切都很好。

现在我的问题是：我能持有我收到的这个 access_token 多久。这是我永远保留的令牌，还是会在一段时间后过期？我正在开发一个桌面应用程序，所以我有两个选择：

*   每次打开应用程序时我都会请求一个新令牌
*   我将令牌存储在某处并重新使用它

存储此令牌的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:51:46.760

通常访问令牌跨会话存储。存在过期（使用 OAuth 2.0），但刷新令牌随后用于检索新的访问令牌。如果您不存储令牌，那么您需要让最终用户在每次他们想要使用您的应用程序时重新授权（这可能不是您想要的体验）。

# php - PHP regexp 删除 [] 标记之间的标签

> ID：16090618
> 
> 赞同：0
> 
> 时间：2013-04-18T18:35:47.337
> 
> 标签：php, regex

说我有

```
$content = "some text [again < dummy1>< /dummy1> some te < dummy2>< /dummy2>< /dummy3>xt] keep theses < needkeeped>xxx< needkeeped>" 
```

我想删除所有标签`< dummyx>`，但是，我只想为标签女巫在`[`和`]`字符之间做

预期的结果是

```
$content = "some text [again some text] keep theses `< needkeeped>xxx< needkeeped>"` 
```

我试过了

```
preg_replace('/<[^>]*>/', '', $content) 
```

但它删除了所有标签

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:42:55.273

你可以使用

```
'/<[^>]*>(?=[^[\]]*\])/' 
```

它远非万无一失，但它可能已经足够好了。

只有当字符串中有一个`]`before时，它​​才会替换标签。`[`

当然，它要求在不同用法的字符串中没有`<`, `>`, `[`or `]`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T18:46:37.547

```
preg_replace_callback('/\[[^\]]+\]/', function($matches){
    return preg_replace('/<[^>]*>/', '', $matches[0]);
}, $content); 
```

首先，找到所有方括号区域，然后替换其中的标签。

[http://ideone.com/wmyfXS](http://ideone.com/wmyfXS)

# java - 我有一个布尔变量来暂时禁用我的鼠标监听器，但它记得我点击的位置

> ID：16090620
> 
> 赞同：0
> 
> 时间：2013-04-18T18:35:51.900
> 
> 标签：java, awt, mouselistener

我正在使用布尔型 canclick 鼠标变量来暂时禁用我的`mouse listener`，但是当我重新启用它时，它似乎`mouse listener`会记住我单击的位置：

```
class MouseHelper extends MouseAdapter
{
    public void mouseClicked(MouseEvent e)
    {
        if(!canclick)
        {
            return;
        }

        int a=e.getX();
        int b=e.getY();
        if(a>=473&&a<=502&&b>=139&&b<=153&&start==true)
        {
            runonce=1;
            repaint();
            start=false;
        } 
```

所以这就是我将canclick设置为false的地方，在它完成显示正确的屏幕后将其重置`canclick`为`true`：

```
 if(runonce==2)
    {
        canclick=false;
        System.out.println("Set as false");
        g.setFont(new Font("TimesRoman",Font.BOLD,40));
            g.drawString("Correct!",325,250);
        try {
        Thread.sleep(10000);
            } catch(InterruptedException ex) {
         Thread.currentThread().interrupt();
        }
        runonce=1;
    }
    if(runonce==1)
    {
        g.setFont(new Font("Arial",Font.BOLD,10));
        g.setColor(Color.WHITE);
            g.fillRect(0,0,1000,1000);
        drawboxes(g);
        says();
        s=10;
        g.setColor(Color.BLACK);
        g.drawString(colr.get(colr.size()-1),401,s);
        count=Integer.toString(level+1);
        g.drawString("Level:"+count,401,s+10);
        canclick=true;

    }

} 
```

我的问题是，当我在正确的屏幕上单击时，where`canclick`设置为`false`，when`canclick`再次设置为 true，它会记住我单击的所有位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T20:29:27.677

您正在事件调度线程中睡觉。这完全冻结了 GUI，并阻止了 Swing 调度事件。这意味着当 GUI 被冻结时，事件会堆积在一个队列中，直到它再次响应。此时，您的侦听器将被调用并包含所有已排队的事件。

不要在事件调度线程中休眠。如果您想在延迟后更改某些状态，请使用 Swing 计时器触发一个事件，该事件将在此延迟后更新状态，但在此延迟期间保持 GUI 响应。

# c# - 为什么当我将解决方案移动到另一个目录时使用“AttachDbFileName”时会出现“数据库已存在”？

> ID：16090625
> 
> 赞同：1
> 
> 时间：2013-04-18T18:36:07.683
> 
> 标签：c#, .net, sql-server

我有一个应用程序 JigSaw，它使用了`TopScores.mdf`项目中未包含的数据库。我想要做的是让应用程序在应用程序的文件夹中找到数据库。例如，如果我移动`.exe`文件和数据库文件从调试文件夹移动到桌面，则应用程序应该使用桌面上的数据库，而不是在调试文件夹中搜索它。

如果我让它们在调试文件夹中没有问题并且建立了与数据库的连接，但是当我将它们放在桌面上时，我得到了这个：

> 您的应用程序中发生了未处理的异常。如果单击继续，应用程序将忽略此错误并尝试继续。数据库 'D:\Programing\Projects Visual Studio 2010\JigSaw\JigSaw\bin\Debug\TopScores.mdf' 已经存在。选择不同的数据库名称。无法将文件“C:\Users\Addy\Desktop\Jigsaw\TopScores.mdf”附加为数据库 TopScores.mdf

我的连接字符串是：

```
string appPath = Path.GetDirectoryName(Application.ExecutablePath);
string connString = @"server  =.\sqlexpress; Database=TopScores.mdf; trusted_connection=TRUE; AttachDbFileName= "+@appPath+@"\TopScores.mdf";
conn = new SqlConnection(connString); 
```

对不起，我的英语不好 ：（

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T19:04:29.013

`User Instance=true;`发生这种情况是因为您在连接到它时没有利用它。您实际上是告诉 SQL Server 将数据库从您第一次加载它的目录附加到正在运行的 SQL 实例。

手动从正在运行的 SQL 实例中分离数据库，将连接字符串更改为 use `User Instance=true;`，从`Debug`文件夹中运行它，然后从 运行它`Desktop`，您会看到成功。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-21T00:24:19.200

将连接字符串中的设置从“Database=TopScores.mdf”更改为不同的设置，例如：“Database=TopScores_brand_new_connection”不要在任何文件/数据库服务器中创建/删除/重命名文件。仅在连接字符串中执行此操作。不要添加点、扩展名等。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-31T05:04:55.977

只需重命名您的 .mdf 文件...例如。从 MNGMT.mdf 到 M_1（你想要的东西）。更改您的联系字符串...希望它对您有所帮助..在我的情况下，它在其他电脑以及我的电脑上正确执行..只需将您的 .mdf 文件复制到您的项目中..

```
string dbPath = Path.GetDirectoryName(Application.ExecutablePath) + "\\M_1.mdf";
string myServer = Environment.MachineName;
DataTable servers = SqlDataSourceEnumerator.Instance.GetDataSources();
            for (int i = 0; i < servers.Rows.Count; i++)
            {
                if (myServer == servers.Rows[i]["ServerName"].ToString()) ///// used to get the servers in the local machine////
                {
                    if ((servers.Rows[i]["InstanceName"] as string) != null)
                        servername = (servers.Rows[i]["ServerName"] + "\\" + servers.Rows[i]["InstanceName"]);
                    else
                        servername = ""+servers.Rows[i]["ServerName"];
                }
            }
connetionString = "Data Source=" + servername + ";AttachDbFilename=" + dbPath + ";Integrated Security=True;Pooling=False;User Instance=True"; 
```

# java - 包 org.apache.poi.hwpf 不存在

> ID：16090635
> 
> 赞同：-1
> 
> 时间：2013-04-18T18:36:52.597
> 
> 标签：java

我正在尝试编译一些代码来测试，我收到了一些错误

包裹 ：

```
org.apache.poi.hwpf.usermodel
org.apache.poi.hwpf.extractor
org.apache.poi.hwpf 
```

不存在

有谁知道我在哪里可以找到这些包裹？它编译一段简单的代码，只允许将 docx 文件转换为 pdf 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T11:06:18.517

Word 2007 XML 格式为 xwpf，因为 hwpf 用于旧版本的 Word，例如 usermodel 是 org.apache.poi。**xwpf** .usermodel

这个 jar 在 poi-ooxml 下，目前在 maven repo1 上有一个副本：[http ://repo1.maven.org/maven2/org/apache/poi/poi-ooxml/3.9/](http://repo1.maven.org/maven2/org/apache/poi/poi-ooxml/3.9/)

我将 SBT 与这些依赖项一起使用：

```
// Add multiple dependencies
libraryDependencies ++= Seq(
  "org.apache.poi" % "poi" % "3.9" % "compile->default",
  "org.apache.poi" % "poi-ooxml" % "3.9" % "compile->default",
  "org.apache.poi" % "poi-ooxml-schemas" % "3.9" % "compile->default",
  "org.mortbay.jetty" % "jetty" % "6.1.22" % "test->default",
  "junit" % "junit" % "4.5" % "test->default",
  "org.scalatest" %% "scalatest" % "1.6.1" % "test->default"
) 
```

# google-maps-sdk-ios - Google Maps IOS SDK 1.2 需要地图视图的快照

> ID：16090637
> 
> 赞同：4
> 
> 时间：2013-04-18T18:36:56.303
> 
> 标签：google-maps-sdk-ios

在 1.1 中，GMSScreenshot 类提供了一种将整个屏幕的快照获取到 UIImage 的基本方法。在 1.2 中，缺少该类，在发行说明中，它是这样说的：

*   在 GMSMapView 层上调用 renderInContext: 现在可以正确渲染；这允许快照和 UI 效果

不幸的是，我发现情况并非如此。通常 renderInContext: 不适用于 Open GL 绘图，但我想我还是会拍摄（它不起作用）。有没有人成功获得（首选）视图或屏幕快照？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T23:39:01.763

我可以截屏。这是我使用的代码：

```
UIGraphicsBeginImageContext(mapView_.frame.size);
[mapView_.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *screenShotImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

创建地图后，我不会直接调用它，因为它可能需要一些帧来渲染地图。

# qt - 实现 qwebview 间通信的最佳方式是什么？

> ID：16090638
> 
> 赞同：0
> 
> 时间：2013-04-18T18:36:58.683
> 
> 标签：qt, qwebview

概述：

我正在尝试创建一个模仿类似 WebIntents 功能的 PoC 应用程序。因此，在我的 Qt 应用程序中，我创建了两个 QWebviews 来启动两个不同的 webApp。现在让我们称它们为应用程序 A 和 B。

设想：

*   主应用程序创建两个 QWebViews，每个都启动一个应用程序，即 AppA、AppB。
*   应用程序 A 被编程为通过 AJAX 自动获取一些数据。
*   应用 B 也需要部分数据。AppB 只显示一个名为 . **注意**：由于 AppA 已经拥有该信息，因此我希望 AppB 在启动 QWebView 时调用通过 addToJavaScriptWindowObject() 方法调用注入到它的 (appB) DOM 中的 JavaScript API。
*   App-A 完成了 Ajax 调用并在其 WebView 中指示完成。
*   用户点击 AppB 中的按钮，
*   应用 B 调用该 JavaScript API，即 fetcData({source: "AppA");
*   现在控件在 QT 世界中：

**问题**：控件在 AppB 的上下文中，我应该如何与 AppA 中的 WebView 进行通信——即 AppB 询问 AppA：嘿 AppA，请给我你获取的数据？

信号和插槽可以在这里帮助我吗？或者我应该使用其他形式的 IPC。

我读了这个页面： http: [//qt-project.org/doc/qt-4.8/qtwebkit-bridge.html](http://qt-project.org/doc/qt-4.8/qtwebkit-bridge.html)，但我仍然没有得到解决我问题的提示。

另一个相关**问题**： QWebViews 是在它们自己的线程中创建的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:03:20.960

难道你不能只是来自 AppB`emit`的某种`signal`基本上说，“嘿，如果有人想要的话，我已经完成了获取我的数据”或者我错过了什么？它会发生在`AppB::fetchData()`.

之后您要做的就是将任何感兴趣的对象连接到该信号。

# html - 在表格内居中对齐 tds 而不创建空 tds？

> ID：16090641
> 
> 赞同：0
> 
> 时间：2013-04-18T18:37:06.080
> 
> 标签：html, css

我有一张桌子，我想要 2 个 tds 居中像 ** 你好 | 世界**前后不加空tds？我有类似的东西可以正常工作，但我不想添加额外的 tds 并以同样的方式做

```
<table class="alignCenter" style="border:1px solid black">  
                <tr>
                <td>&nbsp;
                </td>
                    <td class="searchField">
                        <select id ="exactField">
                             <option value="default">Request num</option>
                        </select>   
                        <input type="text" class="textBox" id="exactValue"/>
                    </td>   
                    <td class="tableButtons">
                        <button type="button" class="clear" ><bdi>${Clear_Button}</bdi></button>
                        <button type="button" class="submit" ><bdi>${Search_Button}</bdi></button>
                    </td>
                    <td>&nbsp;
                    </td>
                </tr>
            </table> 
```

**CSS**

```
table,.alignCenter {
width: 1000px;
margin: 0px auto;
text-align: left;
table-layout: fixed;
font-size: 0.9em;
}

table tr td,.alignCenter tr td {
overflow: hidden;
border: 1px solid black;
vertical-align: top;
padding: 5px 2px 5px 2px;
}

.alignCenter tr td {
text-align : center;
}
.tableButtons {
 width:250px;   
}

.searchField {
 width:300px;
 } 
```

[小提琴](http://jsfiddle.net/4G9Kz/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:41:19.080

为什么你甚至需要 4 个 td 来完成这样的事情？

只需使用一个`td`（我会为此使用一个简单的 div）

[**演示**](http://jsfiddle.net/4G9Kz/1/)

```
<table class="alignCenter" style="border:1px solid black">  
    <tr>
        <td>
            <select id ="exactField">
                 <option value="default">Request num</option>
            </select>   
            <input type="text" class="textBox" id="exactValue"/>            
            <button type="button" class="clear" ><bdi>${Clear_Button}</bdi></button>
            <button type="button" class="submit" ><bdi>${Search_Button}</bdi></button>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:52:19.450

像这样的东西会起作用吗？

html..

```
<table style="border:1px solid black">  
                    <tr>
                        <td class="alignright" >
                            <select id ="exactField">
                                 <option value="default">Request num</option>
                            </select>   
                            <input type="text" class="textBox" id="exactValue"/></td>
                        <td class="alignleft" >
                            <button type="button" class="clear" ><bdi>${Clear_Button}</bdi></button>
                            <button type="button" class="submit" ><bdi>${Search_Button}</bdi></button>
                        </td>
                    </tr>
                </table> 
```

css..

```
table,.alignright {
  width: auto;
  margin: 0px auto;
  text-align: right;
  table-layout: fixed;
  font-size: 0.9em;
}
table,.alignleft {
  width: auto;
  margin: 0px auto;
  text-align: left;
  table-layout: fixed;
  font-size: 0.9em;
}

.tableButtons {
  width:250px;  
}

.searchField {
  width:300px;
} 
```

[小提琴](http://jsfiddle.net/4G9Kz/2/)

# ios - 苹果对 UISplitViewController 的看法？

> ID：16090642
> 
> 赞同：1
> 
> 时间：2013-04-18T18:37:07.990
> 
> 标签：ios, ipad, uisplitviewcontroller, modalviewcontroller, pushviewcontroller

我正在尝试有一个偶尔使用**UISplitViewController**进行某些编辑和其他操作的应用程序。我发现Apple 不允许我在**UINavigationController上推送/模态****SplitViewController 。**

 **所以为了解决这个问题，我创建了我的 SplitView 并在 AppDelegate中用我的**Window View 切换它。**好吧，一切正常，现在我的问题是：

**苹果会批准吗？如果不是，接受什么解决方法？**

过渡不是很平滑，基本上是在没有任何动画的情况下***突然改变视图。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:55:47.647

简短的回答：是的。

稍微长一点的答案：这没有真正的问题，我认为苹果不会有问题，只是要小心你的视图控制器层次结构。这是一种解决方法，因此请注意如何返回原始导航控制器以及如何将数据传递给它。**

# php - 调用 API 以检索 JSON 数据并将其存储在数据库中

> ID：16090643
> 
> 赞同：0
> 
> 时间：2013-04-18T18:37:09.997
> 
> 标签：php, jquery, database, json, api

我需要做什么才能调用 API，以 JSON 格式检索一些数据，然后将这些数据存储到数据库中。我知道这个过程的细节，但问题是我需要每隔 5 分钟完成一次，并且不会对网站的加载时间造成负担。所以，我不知道这是如何完成的概念，因为它显然不能在页面加载时完成，因此它必须由服务器完成，但是如何？

有关此主题的任何有用的阅读材料也将派上用场。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:42:32.677

看看 HTML 5 中新的 web workers 方法。

[http://www.w3schools.com/html/html5_webworkers.asp](http://www.w3schools.com/html/html5_webworkers.asp)

您将此标记为 jquery 问题，因此我假设您已经知道如何进行 ajax 调用。如果您知道如何进行 ajax 调用，我相信您可以弄清楚如何使用 setInterval 来使其每 x 秒重复一次。但以防万一，看看这个：

[http://www.w3schools.com/jsref/met_win_setinterval.asp](http://www.w3schools.com/jsref/met_win_setinterval.asp)

这是假设您想在页面本身上执行此操作，否则正如其他人评论的那样，只需设置一个 cron 作业。

# java - Bluecove 关闭连接问题

> ID：16090646
> 
> 赞同：4
> 
> 时间：2013-04-18T18:37:23.117
> 
> 标签：java, bluetooth, connection, bluecove

我使用 Bluecove 2.1.1 并尝试重新启动蓝牙服务，但在关闭连接并重新打开后我无法连接到服务，出现“连接被拒绝”异常。我在 Bluecove 网站上发现[了这个问题？](https://code.google.com/p/bluecove/issues/detail?id=90)我也尝试在关闭连接后更改服务名称（也是 UUID），但这无济于事。有谁知道它的解决方法？我只需要重新启动蓝牙服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T20:50:45.007

我不确定我是否按照您的意思理解了您的问题。

我假设您正在打开一个`Connector`并让一个[`SessionNotifier`](http://bluecove.org/bluecove/apidocs/javax/obex/SessionNotifier.html)处理 OBEX 连接`accecptAndOpen(ServerRequestHandler)`。当客户端连接到您的蓝牙服务时，您的特定方法[`ServerRequestHandler`](http://bluecove.org/bluecove/apidocs/javax/obex/ServerRequestHandler.html)称为 ( `onGet`, `onPut`, ..)。当客户端断开连接时`onDisconnect`触发。现在您需要`acceptAndOpen`再次使用您的服务来处理未来的连接。

# meteor - 流星 onCreateUser 问题

> ID：16090648
> 
> 赞同：2
> 
> 时间：2013-04-18T18:37:34.667
> 
> 标签：meteor

我正在使用 Meteor，人们可以通过 Facebook 连接到该网站。我正在使用人员用户名来识别他们。但是，其中一些没有用户名。例如，新用户的用户名为 null。我想做的是，如果这个人有用户名，那么我们使用他们的用户名。如果没有，我想用他们的 Facebook id 作为他们的用户名。问题是，我的 if 条件无法正常工作。如果此人有用户名，则 if 条件认为此人没有。奇怪的是，如果我在 if 条件之前执行用户名的 console.log，它将显示用户名。但是一旦在if中，它认为用户名是空的。这是代码：

```
Accounts.onCreateUser(function(options, user) {
  var fb = user.services.facebook;
  var token = user.services.facebook.accessToken;

    if (options.profile) { 

        options.profile.fb_id = fb.id;
        options.profile.gender = fb.gender;
        options.profile.username = fb.username    

        console.log( 'username : ' + options.profile.username); 

        if ( !(options.profile.username === null || options.profile.username ==="null" || options.profile.username === undefined || options.profile.username === "undefined")) {
          console.log('noooooooo');
          options.profile.username = fb.id; 
        } else {
          console.log('yessssssss');
          options.profile.username = fb.username;
        }

        options.profile.email = fb.email; 
        options.profile.firstname = fb.first_name;

        user.profile = options.profile;     
    }

    sendWelcomeEmail(options.profile.name, options.profile.email); 
    return user;
}); 
```

使用此代码，如果我使用具有用户名的 Facebook 登录。条件将显示 'noooooooo' 但 console.log('username : ' + options.profile.username); 将显示我的用户名。为什么这样做？:l

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:41:55.047

这是因为在记录之前调用了创建，并且记录是异步的..所以你不能确保你的 if 将是或不会是真/假。您从 fb 服务中输入的信息是多余的，因为所有这些信息都已与用户一起保存。

[http://docs.meteor.com/#meteor_user](http://docs.meteor.com/#meteor_user)

您应该在用户登录后获取有关用户的信息，因为在那一刻您将能够识别您可以使用什么样的标识符用户名/id。

```
//Server side
Meteor.publish("userData", function () {
    return Meteor.users.find({_id: this.userId});

    // You can publish only facebook id..
    /*return Meteor.users.find({_id: this.userId},
        {
            fields: {
                'services.facebook.id': true
            }
        }
    );*/
});

//Client side
Meteor.subscribe("userData");

// .. you can see more informations about logged user
console.log(Meteor.users.find({}).fetch()); 
```

# windows-8 - 在 Windows 8 应用程序中调用应用程序栏会导致滚动的子 div 跳到顶部

> ID：16090650
> 
> 赞同：0
> 
> 时间：2013-04-18T18:37:41.337
> 
> 标签：windows-8, winjs

我在使用 WinJS、javascript 和 HTML 构建的 Windows8 应用程序中遇到了奇怪的行为。在我正在实现的特定页面中，有几个 div 具有这样的 CSS 规则：

```
.col {
  border: 1px solid none;
  overflow-x: hidden;
  overflow-y: auto;
  height: 100%;
  margin: 0px;
  width: 100%;
} 
```

问题是当我通过右键单击调用主应用程序栏时，div 中的滚动内容会捕捉到 div 的顶部。也就是说，div的滚动位置丢失了。我尝试了很多方法来修复，但没有任何结果。如何防止滚动内容在调用 App Bar 时跳来跳去。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:46:30.630

建议对页面使用 -ms-grid。在这种情况下，应用栏将与 div 重叠，这是可以的，并且可能是您在其他应用中也可以看到的正确行为。

html:

```
<div class="test5 fragment">
    <header aria-label="Header content" role="banner">
        <button class="win-backbutton" aria-label="Back" disabled type="button"></button>
        <h1 class="titlearea win-type-ellipsis">
            <span class="pagetitle">test page</span>
        </h1>
    </header>
    <section class="content" aria-label="Main content" role="main">
        <div class="test-content">
            Text here.
        </div>
    </section>
</div>
<div id="appbar" data-win-control="WinJS.UI.AppBar">
    <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'cmd', label:'Command', icon:'placeholder'}" type="button"></button>
</div> 
```

CSS：

```
.test5.fragment section[role=main] {
    display: -ms-grid;
    -ms-grid-rows: 1fr;
    -ms-grid-columns: 1fr;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:34:02.983

@Sushil 是正确的。AppBar 是一个覆盖控件，所以你应该把它放在片段 div 旁边，而不是里面。@Sushil 的代码显示了如何做到这一点。

将 appbar 放置在 Fragment 中会降低性能，因为每次用户导航到该页面时都需要渲染它。另一个不受欢迎的副作用是应用栏的所有输入都将传播到片段。这是您面临的问题。

理论上，您可以监听鼠标、键盘、触摸的各种输入事件，并在它们上调用 preventDefault。但不建议这样做。

# javascript - 当它们已经包含在全局模块中时，RequireJS 配置加载单个模块

> ID：16090651
> 
> 赞同：1
> 
> 时间：2013-04-18T18:37:45.767
> 
> 标签：javascript, requirejs

好的，我有一个包含特定页面模块的多页面站点。每个页面都应该加载 r.js 生成的两个 JS 文件：main.js，它是全局所有可用模块的集合，以及“page-name-here”.js，它是当前只需要的模块的集合页。

我试图将其与对类似问题的回答有所不同：[https](https://stackoverflow.com/a/11730147/843490) ://stackoverflow.com/a/11730147/843490 。

我还想对它进行结构化，这样我就不必在每个模块中显式地包含 jQuery 作为依赖项，而是首先加载和执行它。

Build.js 文件：[http ://pastebin.com/XP2cCh18 Main.js 文件：](http://pastebin.com/XP2cCh18) [http](http://pastebin.com/vsAnm99S) : //pastebin.com/vsAnm99S

r.js 工具似乎可以正确编译所有内容，并将所有模块写入 main.js 和“page-name-here”.js。但是，当我加载页面时，即使在 main.js 加载之后，require js 也会开始单独引入每个全局模块。我认为这是由于 global.js 没有被明确列为依赖项，但我不确定是否必须调整它来解决这个问题。

有什么线索吗？谢谢！

# jsp - 我可以在jsp中使用return语句吗？

> ID：16090653
> 
> 赞同：0
> 
> 时间：2013-04-18T18:37:55.207
> 
> 标签：jsp, jstl

我可以在 JSP 中使用如下的“return”关键字吗？我在 JSP 文档和 JSTL 文档中搜索了这个关键字，但没有找到。此外，当我在 JSP 中使用关键字 true 或 false 时，它​​会变成不同的颜色。但是对于退货，它不会改变颜色。那么使用return是否正确？请在下面找到我的 JSP 代码。

```
.jsp:

<c:choose>

<c:when test="${(a == 0) && (b == 8) }"> 
return;
</c:when> 

<c:otherwise> 
 ........
 </c:otherwise>
 </c:choose> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:03:20.290

正如它在您的代码中显示的那样，`return;`只是将显示在网页上的纯文本。

我不知道你想完成什么，但如果你真的想调用返回：

```
<% return; %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:07:18.797

如果你想使用 JSTL，那么就没有`c:return`标签。相反，只需将该特定`c:when`语句留空或测试您需要处理的情况。

要回答关于真假关键字的问题的第二部分，请发布一个示例。您的 IDE 会突出显示语法，但一个示例可能会帮助某人解释原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T00:58:42.450

您可以使用此结构代替您的结构。

```
<c:if test="${(a != 0) || (b != 8) }"> 
... code here ...
</c:if> 
```

或者

```
<c:if test="${!(a == 0 && b == 8)}"> 
... code here ...
</c:if> 
```

# c# - 从数据集中动态创建不同的对象

> ID：16090660
> 
> 赞同：1
> 
> 时间：2013-04-18T18:38:13.063
> 
> 标签：c#, reflection, datatable, activator

我正在尝试使用 DataTable 创建和填充一组对象。我希望创建一个函数，该函数会根据`type`传入的函数知道要创建哪种类型的对象。然后使用由`Activator.CreateInstance(type)`或反射返回的对象，用数据集中的数据填充对象字段。这是我的功能：

```
private object DataTableToObject(DataTable table, Type type)
{
    var obj = Activator.CreateInstance(type);
    //we are only concerned with the first row here

    var row = table.Rows[0];

    /* do something here to populate the fields of MyObject */
} 
```

我希望像这样调用这个函数......

```
var dataTable1 = DataTableToObject(dataSet.Tables[dataSet.Tables.IndexOf("MyCustomObject")]);
MyCustomObject custObj = DataTableToObject(dataTable1, typeof(MyCustomObject)); 
```

编辑：在运行时填充对象中的字段的最佳方法是什么？我是否需要使用反射来获取字段名称，然后使用字段名称以某种方式填充对象？

解决方案！

```
private T DataTableToObject<T>(DataTable table)
{
    var obj = Activator.CreateInstance(typeof(T));

    //we are only concerned with the first row because in our datasets, we should only have one row per table
    var row = table.Rows[0];

    foreach(DataColumn col in table.Columns)
    {
        var propInfo = obj.GetType().GetProperty(col.ColumnName);
        if (propInfo == null) continue;

        object colValue;
        if(propInfo.PropertyType == typeof(Guid))
           colValue = Guid.Parse(row[col.ColumnName].ToString());
        else 
           colValue = Convert.ChangeType(row[col.ColumnName], propInfo.PropertyType);

        propInfo.SetValue(obj, colValue, null);
     }
     return (T) obj;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:43:22.763

首先使方法通用：

```
private T DataTableToObject<T>(DataTable table) 
```

然后稍微改变一下：

```
var obj = Activator.CreateInstance(typeof(T)); 
```

并在方法结束时记得转换它：

```
return (T)obj; 
```

现在，当你调用它时，它看起来像这样：

```
MyCustomObject custObj = DataTableToObject<MyCustomObject>(dataTable1); 
```

现在如何填充字段，我会做这样的事情：

```
foreach (var col in table.Columns)
{
    var propInfo = obj.GetType().GetProperty(col.Name);
    if (propInfo == null) { continue; }

    propInfo.SetValue(obj, row[col.Name], null);
} 
```

# c++ - 使用 Winsock 7 C++ 从服务器向客户端发送函数调用的最有效方法

> ID：16090666
> 
> 赞同：1
> 
> 时间：2013-04-18T18:38:46.070
> 
> 标签：c++, winsock2

我使用 C++ 和 Winsock 来创建服务器和客户端应用程序。连接到服务器后，客户端显示动画序列。服务器机器可以处理多个客户端连接并记录连接的客户端总数。

目前，客户端动画序列在客户端连接后立即开始。我想要发生的是，当 2 个客户端连接到服务器时，服务器应该向客户端 1 发送一条消息以调用 Render() 函数（在客户端中），然后稍后再发送一条消息到客户端 2 调用相同的 Render() 函数。

只是寻找一些帮助，以实现这一目标的最佳方式。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:49:00.000

您不能发送函数调用（该词的任何直接含义），因为函数存在于单个进程空间中并且不能（轻松）通过套接字连接发送。

您可以做的是发送一条消息，客户端将采取行动并调用所需的功能。

根据您使用的协议，这可能就像服务器向每个客户端的 TCP 连接发送单个字节（例如，用于渲染的“R”或其他内容）一样简单，并且客户端代码会知道调用 Render()接收该字节。当然，更复杂的协议可能会更精细地编码相同的信息。

在解释型语言（例如 Java 或 Python）中，可以通过套接字连接以 Java .class 文件或 Python 源文本等形式发送实际代码。但这样做几乎总是一个坏主意，因为攻击者可以利用该机制向客户端发送恶意软件并让客户端执行它。

# java - Java for 循环优化 - 在循环之前存储 getter

> ID：16090667
> 
> 赞同：0
> 
> 时间：2013-04-18T18:38:47.547
> 
> 标签：java, performance, for-loop, compiler-optimization, callstack

假设您有以下代码..

```
for(Element elm : elements)
   if(elm instanceof Foobar)
      Session.getSomething().getListOfSomething().add((Foobar)elm); 
```

做以下事情不是更好吗？

```
List<Foobar> list = Session.getSomething().getListOfSomething();

for(Element elm : elements)
   if(elm instanceof Foobar)
      list.add((Foobar)elm); 
```

假设 Something 和 listOfSomething 在循环执行期间没有改变。我认为由于减少了方法调用，这可以大大减少调用堆栈推送/弹出的数量。

这种优化是不是太挑剔了？我不认为 java 编译器会假设他们可以这样优化。

**编辑：未简化代码以排除 AddAll 的使用**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:42:27.637

在大多数情况下会更好。原因是 Java 对调用约定非常严格，每次迭代都必须进行 4 次额外的虚拟调用。有一些例外（即通过 JIT 内联），但这是一个异国情调。

尽管使用默认功能可能会更好：

```
Session.getSomething().getListOfSomething().addAll(elements) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:45:57.080

这将取决于做什么`getSomething()`和`getListOfSomething()`做什么。它可能没有被优化的原因是编译器不知道调用是否每次都会返回相同的东西，或者调用这些方法是否有其他副作用。如果它每次都返回相同的东西，没有副作用，那么是的，它是一种优化，如果不是，那么它甚至不再是同一个程序。

# python - 如何获取没有目录名的文件名

> ID：16090670
> 
> 赞同：9
> 
> 时间：2013-04-18T18:38:57.340
> 
> 标签：python

如何在结果中仅列出目录中的文件名而没有目录信息？我试过

```
for file in glob.glob(dir+filetype):
    print file 
```

给我结果 `/path_name/1.log,/path_name/2.log,....` ，但我只需要文件名：`1.log`,`2.log`等。我不需要结果中的目录信息。有没有一种简单的方法来摆脱路径信息？我不想在结果上加上一些 substr。谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-18T18:43:09.567

[`os.path.basename`](http://docs.python.org/3/library/os.path.html#os.path.basename)：

> 返回 pathname 的基本名称`path`。`path`这是通过传递给函数返回的对的第二个元素`split()`。注意这个函数的结果与Unix`basename`程序不同；其中`basename`对于 '/foo/bar/' 返回 'bar'，该`basename()`函数返回一个空字符串 ('')。

所以：

```
>>> os.path.basename('/path_name/1.log,/path_name/2.log')
'2.log' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T18:44:19.223

```
import os

# Do not use 'dir' as a variable name, as it's a built-in function
directory = "path"
filetype  = "*.log"

# ['foo.log', 'bar.log']
[f for f in os.listdir(directory) if f.endswith(filetype[1:])] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T18:41:01.537

你可以做

```
import os
[file.rsplit(os.path.sep, 1)[1] for file in glob.glob(dir+filetype)] 
```

# mysql - 我错过了什么？MySQL 语法错误

> ID：16090677
> 
> 赞同：0
> 
> 时间：2013-04-18T18:39:39.340
> 
> 标签：mysql, sql, database, syntax

我有这个错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''tablename'(
'id'MEDIUMINT NOT NULL AUTO_INCREMENT,
'content'TEXT NOT NULL,
'd' at line 1 
```

从这个声明：

```
CREATE TABLE 'tablename'(
'id'MEDIUMINT NOT NULL AUTO_INCREMENT,
'content'TEXT NOT NULL,
'date_added' DATETIME NOT NULL,
'user' VARCHAR (16) NOT NULL,
PRIMARY KEY ('id'),
UNIQUE ('id')
); ENGINE=MyISAM; 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:41:16.303

您需要反引号而不是单引号 ( `'`)。反引号是这个字符：

```
` 
```

更好的是 - 不要打扰：

```
CREATE TABLE tablename (
  id MEDIUMINT ... 
```

**重要提示**：另请参阅下面来自 tadman 的评论；他们通过解释反引号并指出另一个语法问题很好地完善了这个答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:42:44.317

您使用的符号不正确。在您的 create table 语句中，您使用的是单引号 (')。您不能在此处将其用于表名和列名。替代方案是刻度线 (`)。或者只是完全删除所有符号。

这是您的代码，功能齐全：

```
CREATE TABLE tablename (
`id` MEDIUMINT NOT NULL,
`content`TEXT NOT NULL,
`date_added` DATETIME NOT NULL,
`user` VARCHAR (16) NOT NULL,
PRIMARY KEY (`id`),
UNIQUE (`id`)
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:43:57.720

您在列名和前两列的类型之间缺少一个空格。另外，你有一个 ; 最后对许多人

```
CREATE TABLE 'tablename'(
'id' MEDIUMINT NOT NULL AUTO_INCREMENT,
'content' TEXT NOT NULL,
'date_added' DATETIME NOT NULL,
'user' VARCHAR (16) NOT NULL,
PRIMARY KEY ('id'),
UNIQUE ('id')
) ENGINE=MyISAM; 
```

# php - 服务端函数通过ajax访问时抛出php错误

> ID：16090678
> 
> 赞同：0
> 
> 时间：2013-04-18T18:39:40.300
> 
> 标签：php, javascript, jquery, ajax, jquery-ui-tabs

我正在将 CodeIgniter-Bonfire 用于 Web 应用程序，该应用程序允许站点管理员验证或取消验证用户的“资料”（例如姓名和工作经验）。管理员可以从下拉列表中选择“验证”或“取消验证”。当下拉列表的值发生变化时，将对服务器进行 ajax 调用。然后服务器向 javascript 回显一些值，将其插入到视图页面中。

一切正常——数据库已相应更改，回显值正确——但 javascript 现在也从服务器端捕获错误消息。

错误是：`Trying to get property of non-object.`

我已经在错误发生之前和之后完成了回声，但对象打印得很好。我很茫然，因为这过去没有发生过。

真正令人讨厌的是错误似乎是随机发生的。当验证从已验证变为未验证时可能是这样，反之亦然。有时错误会在回显值之前打印出来，有时它会自行消失（但不会在显示一瞬间之前消失。

先感谢您。

javascript看起来像这样：

```
$(document).on('change', '.verified', function(event) {
    var id = $(this).attr('id');
$.ajax({
    type: "POST",
    url: 'http://theurl.com/module/controller/verify/100/files/24'
}).done(function(msg) {
    $('#timestamp_'+id).text(msg);
}); 
```

函数验证看起来像这样：

```
public function verify($user_id, $other_table, $other_id)
{
    $this->load->model('profile/Verifiable_items_model', 'vi_model');
    $item = $this->vi_model->find_by(array(
                'user_id' => $user_id,
                'other_table' => $other_table,
                'other_id'  => $other_id
            ));

    $update_date = 0;

    if ($item->verified == 0) // ERROR HERE
    {
        $update_date = date('Y-m-d H:i:s', time());
        $data = array('verified' => 1, 'notes_time' => date('Y-m-d H:i:s', time()), 'verified_by' => $this->current_user->username);
    }
    else
    {
        $data = array('verified' => !($item->verified), 'notes_time' => NULL); // ERROR HERE
    }

    $this->vi_model->update($item->id, $data);

    echo $update_date;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:54:40.847

由于错误行上的唯一对象是 $item 对象，这可能意味着该项目未设置或至少不是对象（可能为 null 或 false）。由于 find_by 方法返回第一个匹配的对象，我的猜测是过滤器根本不匹配任何东西。

但是，您确实说您在之前和之后都做过回声。你确定吗？尝试对 $item 进行 var_dump'ing 或 print_r'ing 并查看结果。如果您没有收到预期的对象，请验证您在 find_by 函数上传递的参数以查看它们是否正确。（也许由于某种原因 user_id 没有正确传递，假设可能是 cookie 或会话过期或类似的东西传递的东西）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:55:53.647

```
$item->verified 
```

是对象表示法，用于访问对象的属性和方法。

我的猜测是“已验证”没有正确定义，因此它不存在，至少不是您期望的形式。

你确定吗

```
$item 
```

不是数组吗？

如果是这种情况，那么您可以使用数组表示法：

```
$item['prodname']; 
```

但我想你比我们更清楚它是什么。

基线：已验证可能从未定义过，或者它没有定义为对象或对象内。

如果您想要更具体的答案，那么您必须向我们展示其余的代码。

还可以考虑在 ajax 中使用 success 和 complete 函数：

```
var url = 'page.php';
$.ajax(
{
    type : 'post',
    url : url,
    dataType : 'json',
    data : 
    {
        'requesting' : true,
    },
    success : function(data)
    {
        var success = '';

        for(var i = 0; i < data.length; i++)
        {
            success = data[i].success;
        }

    },
    complete : function(data)
    {
    }
}); 
```

您也可以抛出“错误”功能。

您可以使用 json 返回警告消息，具体取决于成功与否。您还可以使用 try catch 并返回异常消息，以便您更轻松地找出不工作的地方。基本上你想处理错误，你不希望页面重新加载，所以你必须完全控制你的代码。

您可以在服务器上创建它后返回一个 json 对象并将其刷新到客户端：

```
echo json_encode($json);
flush(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T19:47:40.720

错误是我的页面中有三个函数，开头是：

```
$(document).on('change', '.verified', function(event) {...}); 
```

包含上述 javascript 的视图中有选项卡，每个选项卡都有一个 modules::run 调用不同的模块/控制器/函数。这导致三个不同的视图被安排（并因此加载），如：文件 | 参考资料 | 其他。

这些视图基本上做了同样的事情：让管理员验证或取消验证用户的“资料”。为了变得懒惰，我将选择标签从一个视图复制并粘贴到其他视图中，使它们看起来像这样：

```
<select name='verified' class='verified' id='100'>
    <option value=1>Yes</option>
    <option value=0 selected = 'selected'>No</option>
</select> 
```

（id会根据项目不同）。注意类名“已验证”。

我还复制了 javascript 并且只做了一些小的调整（比如将 url 中的“文件”更改为“文档”或“其他”）。因此，现在当我尝试验证 id 为 2000 的“参考”项目时，显然是这样的：

```
$(document).on('change', '.verified', function(event) { 
```

被触发，但这是使用“文件”选项卡加载的那个。所以现在服务器端代码正在寻找一个 id 为 2000 的“文件”，它不存在，因此尝试访问非对象属性的 PHP 错误。

# java - 在netbeans中检索当前打开的文件或项目的位置

> ID：16090681
> 
> 赞同：1
> 
> 时间：2013-04-18T18:39:53.337
> 
> 标签：java, netbeans, ide, custom-controls, project

我在 netbeans 中使用了一个自定义按钮，它引用了打开项目中的一个文件。但是，我在根据打开的项目检索该文件的位置时遇到问题。因此，我需要一些可以返回我正在处理的项目的位置或我正在使用的文件的位置的东西。
本质上，我需要能够调用

```
String projectLocation = methodOrVarToGetOpenProjectLocation(); 
```

我不能使用当前目录，因为我使用按钮创建的插件与我正在使用的项目不在同一个地方。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:52:16.223

您可以像这样找到项目目录：

```
Lookup lookup = Utilities.actionsGlobalContext(); 
Project project = lookup.lookup(Project.class);
FileObject projectDir = project.getProjectDirectory();
String projectLocation = projectDir.getPath(); 
```

这些类都来自 NetBeans API：[`Utilities`](http://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/Utilities.html)、[`Lookup`](http://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/Lookup.html)、[`Project`](http://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectapi/org/netbeans/api/project/Project.html)和[`FileObject`](http://bits.netbeans.org/dev/javadoc/org-openide-filesystems/org/openide/filesystems/FileObject.html)

如果您不想只使用当前项目，则可以使用[`OpenProjects`](http://bits.netbeans.org/7.3/javadoc/org-netbeans-modules-projectuiapi/org/netbeans/api/project/ui/OpenProjects.html)该类。您可以获得第一个打开的项目，如下所示：

```
Project project = OpenProjects.getDefault().getOpenProjects()[0]; 
```

[根据您的按钮的作用，使用Main Project](https://netbeans.org/kb/docs/java/project-setup.html#projects-main)可能有意义：

```
Project mainProject = OpenProjects.getDefault().getMainProject(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:00:55.327

Dave Webb 的上述回答负责获取项目位置。但是，如果在单击按钮之前没有直接选择所需的项目，则存在一个问题，它不会将该项目视为主项目。
例如，在文件中进行编辑然后单击按钮将不再找到项目，因为项目名称不是最后单击的内容。
我发现了一些获取打开文件名的代码：

```
TopComponent activeTC = TopComponent.getRegistry().getActivated();
DataObject dataLookup = activeTC.getLookup().lookup(DataObject.class);
String filePath = FileUtil.toFile(dataLookup.getPrimaryFile()).getAbsolutePath(); 
```

`project`在为空的情况下（在他的第一个代码块的第二行之后），我在 if 语句中使用了它。

这为我提供了我正在使用的文件的路径，然后花了很短的时间处理字符串来获取项目的位置。

# bash - Ubuntu 中的无效日期选项

> ID：16090682
> 
> 赞同：7
> 
> 时间：2013-04-18T18:39:53.663
> 
> 标签：bash, ubuntu

我有一个 shell 脚本，我要求系统返回 660 天前的年份。在我的 Mac 上，我使用这个：

```
date -j -v-660d +"%Y" 
```

如果今天运行，那将返回 2011 年。

我将脚本移动到 Ubuntu 机器上，我收到一个错误，指出 -j 和 -v 选项无效。

我查看了手册页，寻找等效选项，但未能找到解决方案。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T18:43:19.617

这应该有效：

```
$ date -d '660 days ago' +%Y
2011 
```

# c# - 你怎么知道变量/属性何时被关闭？

> ID：16090684
> 
> 赞同：0
> 
> 时间：2013-04-18T18:39:59.773
> 
> 标签：c#, reflection, expression-trees

给定如下表达式：

```
Int32 five = 5;

Express(num => num == five); 
```

`Express`类似的东西在哪里

```
void Express(Expression<Predicate<Int32>> predicatesGonnaPredicate)
{
    ....
} 
```

在解析上面的表达式时，我如何以编程方式确定五个已关闭？我可以想到很多黑客方法来做到这一点，但是必须有一些适当的方法来识别这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:14:28.547

如果你想用它们的值替换所有不依赖于 lambda 参数的子表达式，你可以使用`PartialEval`Matt Warren 的文章[*Building an IQueryable Provider - Part III*](http://blogs.msdn.com/b/mattwar/archive/2007/08/01/linq-building-an-iqueryable-provider-part-iii.aspx)中的内容。

例如，在您的情况下，结果将是一个表达式`num => num == 5`。

# ruby-on-rails - 当使用包含条件的 include(.) 时，如何确保我仍然从第一个表中获得结果，即使包含的表上没有匹配项？

> ID：16090688
> 
> 赞同：0
> 
> 时间：2013-04-18T18:40:05.310
> 
> 标签：ruby-on-rails, activerecord

鉴于这四个模型：

```
class Gradebook < < ActiveRecord::Base
  has_many :gradebook_entries
end

class User < ActiveRecord::Base
  has_many :gradebook_entry_scores
end

class GradebookEntry < ActiveRecord::Base
  has_many :gradebook_entry_scores
end

class GradebookEntryScore < ActiveRecord::Base
  belongs_to :gradebook_entry
  belongs_to :user
end 
```

我想获取成绩簿中的所有成绩簿条目，包括其关联的成绩簿条目分数，但只有属于特定用户的成绩簿条目。

这就是我现在的做法：

```
some_gradebook.gradebook_entries.includes(:gradebook_entry_scores).where(:gradebook_entry_scores => {:user_id => 50} ) 
```

它有效。除非该用户没有gradebook_entry_score，否则不会返回gradebook_entry。

```
 some_gradebook.gradebook_entries.includes(:gradebook_entry_scores).where(:gradebook_entry_scores => {:user_id => 50} )
=> [] 
```

我想始终获得所有成绩簿条目，无论该用户是否有成绩簿条目分数。

那么，即使包含的表中没有结果，我如何确保我会从第一个表中获得结果？

编辑1：

用户可能没有特定gradebook_entry 的gradebook_entry_score。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:55:49.823

我希望这`.where(:gradebook_entry_scores => {:user_id => 50} )`是你的问题。

如果您从有问题的用户开始怎么办，例如：

```
User.find_by_id(50).gradebooks.gradebook_entries.includes(:gradebook_entry_scores) 
```

# c# - XPath 表达式中的点与斜线

> ID：16090690
> 
> 赞同：0
> 
> 时间：2013-04-18T18:40:11.510
> 
> 标签：c#, xml, xpath

我遇到了一个不寻常的问题。我有这个 XML：

```
<T durationMs="400">
  <foo durationMs="407">
    <foo-child durationMs="307" />
  </foo>
  <bar durationMs="208">
    <bar-child durationMs="108" />
  </bar>
</T> 
```

我正在使用 XPathExtentions 从这个 XML 中获取一个 XElement：

```
var xe = XElement.Parse(s);
var foo = xe.XPathSelectElement("/T/foo") 
```

它什么也不返回。但是，如果我使用：

```
var foo = xe.XPathSelectElement("./foo") 
```

它得到一个元素。那么在这种情况下，点和斜线有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:44:53.880

`/`从`root`节点中选择。

所以`/T/foo`它试图匹配`T->T->foo`哪个肯定不匹配

`.`描述当前节点，在这种情况下它将是根节点

`/foo`会工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:41:08.943

`.`选择当前节点。

`/`从根节点中选择。

`//`从当前节点中选择文档中与选择匹配的节点，无论它们在哪里。

[XPath 语法](http://www.w3schools.com/xpath/xpath_syntax.asp)让您简要了解如何完成选择

* * *

在您的情况下`./foo`，表示从根节点选择，即`T`

# indexeddb - 从 WebSQL 迁移到 indexedDB 的首选方法是什么？

> ID：16090699
> 
> 赞同：2
> 
> 时间：2013-04-18T18:40:43.873
> 
> 标签：indexeddb, web-sql

我有一个完整的 phonegap 应用程序，目前在 Android 上运行，数据库是使用 WebSQL 编写的。

我的任务是将该应用程序移植到 Windows Phone - 由于不支持 WebSQL，该应用程序崩溃了。

是否有可用的快速转换/填充脚本来阻止我必须浏览我的代码并更改每个数据库引用行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:04:06.250

你可以试试我的开源库[https://bitbucket.org/ytkyaw/ydn-db/wiki/Home](https://bitbucket.org/ytkyaw/ydn-db/wiki/Home)它在 IndexedDB 存储机制上的 SQL 执行有限。但是，表连接还没有暴露给 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:43:24.763

您可以使用[`IndexedDB Polyfil`](http://nparashuram.com/IndexedDBShim/)在 IndexedDB 中包装 WebSQL 的方法。

虽然这不是一个 100% 完美的解决方案，因为您必须迁移到 IndexedDB，从长远来看，这将是一个更好的解决方案，因为 WebSQL 规范已经停止，并且未来的浏览器将迁移到 IndexedDB。

# java - 操作系统可以阻止 Java 进程进行垃圾收集吗？

> ID：16090702
> 
> 赞同：6
> 
> 时间：2013-04-18T18:40:57.973
> 
> 标签：java, garbage-collection, jvm, heap-memory, appdynamics

我正在使用[AppDynamics](http://www.appdynamics.com/)监控一个生产系统，我们只是让系统缓慢爬行并且几乎冻结。就在此事件之前，AppDynamics 将所有 GC 活动（次要和主要类似）平线显示几分钟......然后恢复活力。

即使在系统超低负载期间，我们仍然会看到我们的 JVM 执行*一些*GC 活动。我们从来没有让它完全平坦并下降到 0。

此外 - 网络 I/O 在与 GC/内存扁平线相同的时间实例中扁平化。

所以我问：系统级别的某些东西会导致 JVM 冻结，或者导致其垃圾收集挂起/冻结吗？这是在 CentOS 机器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:00:01.117

您的操作系统是否启用了交换。

我注意到 Java 会出现巨大的问题，一旦它填满了启用交换的操作系统上的所有内存——它实际上会破坏 Windows 系统，有效地将它们锁定并导致重新启动。

我的理论是这样的：

*   操作系统内存快满了。
*   操作系统从 Java 请求内存。
*   这会触发 Java 进入完整的 GC 以尝试释放内存。
*   完整的 GC 几乎会触及虚拟机内存的每一块，甚至是已换出的项目。
*   系统尝试将数据交换回 VM 的内存（在已经用完 ram 的系统上）
*   这一直在滚雪球。

起初它不会对系统产生太大影响，但是如果您尝试启动需要大量内存的应用程序可能需要很长时间，并且您的系统只会不断降级。

多个大型 VM 会使情况变得更糟，我运行 3 或 4 个大型 VM，当我的 RAM 使用率超过 60-70% 时，我的系统现在开始占用。

这是猜想，但它描述了我经过几天的测试后看到的行为。

效果是所有交换似乎都“阻止”了 gc。更准确地说，操作系统花费了大部分 GC 时间进行交换，这使得它看起来像是在 GC 期间无所事事。

修复--将 -Xmx 设置为较低的值，将其删除，直到您有足够的空间来避免交换。这一直解决了我的问题，如果它不能解决你的问题，那么我对你的问题的原因是错误的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:49:57.447

如果没有更多信息，很难找到问题的确切原因。

但我可以尝试回答您的问题：
*操作系统可以阻止垃圾收集吗？*
您的操作系统不太可能阻止线程垃圾收集器并让其他线程运行。你不应该那样调查。

*操作系统可以阻止 JVM 吗？*
是的，它 perflecty 可以而且做得很多，但速度比你想象的要快，所有进程都在同一时间运行。
jvm 是一个和他一样的进程，在操作系统的控制下。您必须检查应用程序挂起时使用的 cpu（在不在 jvm 中的服务器上进行监视）。如果它非常低，那么我会看到 2 个原因（但还有更多）：

*   您的服务器没有足够的 RAM 并且正在交换（RAM <-> 磁盘），进程变得非常缓慢。在这种情况下，服务器上的 cpu 会很高，但 jvm 上的 cpu 会很低

*   另一个进程或服务器获取资源，而您的应用程序或服务器什么也没收到。检查 CentO 上的优先级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:59:28.653

理论上，是的，它可以。但它练习，它永远不应该。

在大多数 Java 虚拟机中，应用程序线程并不是唯一运行的线程。除了应用程序线程之外，还有编译线程、终结器线程、垃圾收集线程等等。将 CPU 内核分配给这些线程和机器上运行的其他程序的其他线程的调度决策基于许多参数（线程优先级、它们的最后执行时间等），这些参数尽量对所有线程公平。因此，实际上，系统中的任何线程都不应该等待 CPU 分配的时间过长，操作系统也不应该无限期地阻塞任何线程。

垃圾收集线程（和其他 VM 线程）需要做的活动很少。他们需要定期检查是否需要垃圾收集。即使应用程序线程全部挂起，也可能有其他 VM 线程（例如 JIT 编译器线程或终结器线程）在工作，因此分配对象并触发垃圾收集。对于用 Java 而不是 C/C++ 实现 VM 线程的元循环 JVM 尤其如此；

此外，大多数现代 JVM 使用分代垃圾收集器（一种将堆划分为单独空间并将具有不同年龄的对象放在堆的不同部分的垃圾收集器）这意味着随着对象变得越来越老，它们需要移动到其他旧空间。因此，即使不需要收集对象，分代垃圾收集器也可以将对象从一个空间移动到另一个空间。

当然每个垃圾收集器的细节因JVM而异。为了在伤害上加点盐，一些 JVM 支持不止一种类型的垃圾收集器。但是在空闲应用程序中看到最小的垃圾收集活动并不奇怪。

# c# - 如何解析 Twitter 趋势 Json 响应

> ID：16090704
> 
> 赞同：0
> 
> 时间：2013-04-18T18:41:01.987
> 
> 标签：c#, json, twitter, json.net

我正在尝试解析以下 JSon 以访问 name 属性。但我遇到了一些困难。

```
 {[
  {
    "trends": [
      {
        "name": "#penaltypointsforpricks",
        "url": "http://twitter.com/search?q=%23penaltypointsforpricks",
        "promoted_content": null,
        "query": "%23penaltypointsforpricks",
        "events": null
      },
      {
        "name": "#sometimesiwishthat",
        "url": "http://twitter.com/search?q=%23sometimesiwishthat",
        "promoted_content": null,
        "query": "%23sometimesiwishthat",
        "events": null
      },
      {
        "name": "#1000daysof1d",
        "url": "http://twitter.com/search?q=%231000daysof1d",
        "promoted_content": null,
        "query": "%231000daysof1d",
        "events": null
      },
      {
        "name": "#ireland",
        "url": "http://twitter.com/search?q=%23ireland",
        "promoted_content": null,
        "query": "%23ireland",
        "events": null
      },
      {
        "name": "#savita",
        "url": "http://twitter.com/search?q=%23savita",
        "promoted_content": null,
        "query": "%23savita",
        "events": null
      },
      {
        "name": "Twitter",
        "url": "http://twitter.com/search?q=Twitter",
        "promoted_content": null,
        "query": "Twitter",
        "events": null
      },
      {
        "name": "Cork",
        "url": "http://twitter.com/search?q=Cork",
        "promoted_content": null,
        "query": "Cork",
        "events": null
      },
      {
        "name": "Facebook",
        "url": "http://twitter.com/search?q=Facebook",
        "promoted_content": null,
        "query": "Facebook",
        "events": null
      },
      {
        "name": "Boston",
        "url": "http://twitter.com/search?q=Boston",
        "promoted_content": null,
        "query": "Boston",
        "events": null
      },
      {
        "name": "Will",
        "url": "http://twitter.com/search?q=Will",
        "promoted_content": null,
        "query": "Will",
        "events": null
      }
    ],
    "as_of": "2013-04-18T18:34:45Z",
    "created_at": "2013-04-18T18:29:40Z",
    "locations": [
      {
        "name": "Dublin",
        "woeid": 560743
      }
    ]
  }
]} 
```

我有以下建议，但它在运行时返回空引用异常。

```
 var twitterObject = JToken.Parse(jsonString);
        var trendsArray = twitterObject.Children<JProperty>().FirstOrDefault(x => x.Name == "trends").Value;

        foreach (var item in trendsArray.Children())

        {
            var itemProperties = item.Children<JProperty>();
            //you could do a foreach or a linq here depending on what you need to do exactly with the value
            var myElement = itemProperties.FirstOrDefault(x => x.Name == "url");
            var myElementValue = myElement.Value; ////This is a JValue type
        } 
```

任何人都对如何解析这个 json 响应以获取每个单独的“名称”有任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:53:17.077

我能够使用它来获取名称。

```
dynamic dynObj = JsonConvert.DeserializeObject(jsonString);

foreach (var trend in dynObj[0].trends)
{
    Console.WriteLine(trend.name);
} 
```

如果您打算获取除名称之外的任何内容，那么为 JSON 对象编写类可能会更好，但我希望这会有所帮助。

# google-maps-api-3 - 创建一个可以隐藏的地标

> ID：16090706
> 
> 赞同：1
> 
> 时间：2013-04-18T18:41:04.720
> 
> 标签：google-maps-api-3, google-earth-plugin

我一直在尝试创建一个地标，我可以根据需要（点击时）隐藏和显示（例如打开和关闭可见性）......我正在使用它来制作地标：

```
function placemark(lat, long, name, url, iconsrc){
    var placemark = ge.createPlacemark(name);
    ge.getFeatures().appendChild(placemark);
    placemark.setName(name);

    // Create style map for placemark
    var icon = ge.createIcon('');
    if(iconsrc == "0")
        icon.setHref('http://maps.google.com/mapfiles/kml/paddle/red-circle.png');
    else{
        icon.setHref(iconsrc);
    }
    var style = ge.createStyle('');
    style.getIconStyle().setIcon(icon);
    if(iconsrc != "0")
        style.getIconStyle().setScale(2.5);

    placemark.setStyleSelector(style);

    // Create point
    var point = ge.createPoint('');
    point.setLatitude(lat);
    point.setLongitude(long);
    //point.setAltitudeMode(1500);
    placemark.setGeometry(point);
    google.earth.addEventListener(placemark, 'click', function(event) {
    // Prevent the default balloon from popping up.
        event.preventDefault();

        var balloon = ge.createHtmlStringBalloon('');
        balloon.setFeature(placemark); // optional
        balloon.setContentString(
            '<iframe src="'+ url +'" frameborder="0"></iframe>');

        ge.setBalloon(balloon);
    });              

} 
```

我已经尝试了一切......从这个：

```
function hidePlacemark(name){
    var children = ge.getFeatures().getChildNodes();
    for(var i = 0; i < children.getLength(); i++) { 
        var child = children.item(i);
        if(child.getType() == 'KmlPlacemark') {
            if(child.getId()== name)
            child.setVisibility(false);
        }
    }
} 
```

使用这个`ge.getFeatures().removeChild(child);`

谁能指出我创建一个功能的正确方向，该功能允许我按需打开/关闭可见性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:38:47.613

您的 hidePlacemark 函数在您的最终 IF 语句中缺少一些 {}

```
if(child.getId()== name) 
```

你有

```
function hidePlacemark(name){
    var children = ge.getFeatures().getChildNodes();
    for(var i = 0; i < children.getLength(); i++) { 
        var child = children.item(i);
        if(child.getType() == 'KmlPlacemark') {
            if(child.getId()== name)
            child.setVisibility(false);
        }
    }
} 
```

做了

```
function hidePlacemark(name){
    var children = ge.getFeatures().getChildNodes();
    for(var i = 0; i < children.getLength(); i++) { 
        var child = children.item(i);
        if(child.getType() == 'KmlPlacemark') {
            if(child.getId()== name) {
                child.setVisibility(false);
            }
        }
    }
} 
```

但是-------你最好这样做，因为它更快，因为你不需要遍历所有地标

```
function hidePlacemark(name) {
    var placemark = ge.getElementById(name);
    placemark.setVisibility(false);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T23:26:36.280

我认为平原的`ge.getFeatures().removeChild(placemark);`作品。

我玩过这个[GooglePlayground](https://code.google.com/apis/ajax/playground/?exp=earth#toggling_event_listeners)，只是将以下代码添加到第 8 行（在这个[GooglePlayground Sample](https://code.google.com/apis/ajax/playground/?exp=earth#toggling_event_listeners)中是空的）：

```
 addSampleButton('Hide Placemark', function(){ 
       ge.getFeatures().removeChild(placemark); 
  }); 
```

单击按钮*隐藏地标*隐藏地标，就像这里的魅力一样。你的问题有没有可能在你的代码中的其他地方？

# ios - 管理 CGImageRef 内存的规则？

> ID：16090708
> 
> 赞同：2
> 
> 时间：2013-04-18T18:41:10.497
> 
> 标签：ios, objective-c, cocoa-touch, automatic-ref-counting

`CGImageRef`使用 ARC为 s 管理内存的规则是什么？也就是说，有人可以帮我找到正确的文档吗？

我从照片库中获取图像并创建一个`UIImage`显示：

```
CGImageRef newImage = [assetRep fullResolutionImage];
...
UIImage *cloudImage = [UIImage imageWithCGImage:newImage scale:scale orientation:orientation]; 
```

我需要做`CGImageRelease(newImage)`吗？

我收到了内存警告，但这似乎不是*我*尚未释放的对象的逐渐堆积，而且我没有看到 Instruments 有任何泄漏。我很困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T21:19:58.893

不，您不需要调用返回`CGImageRelease()`的便捷方法，例如or 。不幸的是，目前，这些方法的文档和头文件并没有说明这一点。`CGImageRef``ALAssetRepresentation``fullResolutionImage``fullScreenImage`

如果您`CGImageRef`使用其中一个`CGImageCreate*()`功能自己创建了一个，那么您拥有它并负责使用`CGImageRelease()`. 相比之下，返回的s`CGImageRef`似乎是“自动释放的”，因为您不拥有这些方法返回的图像引用。例如，假设您在代码中尝试这样的事情：`fullResolutionImage``fullScreenImage`

```
CGImageRef newImage = [assetRep fullResolutionImage];
...
UIImage *cloudImage = [UIImage imageWithCGImage:newImage
                        scale:scale orientation:orientation];
CGImageRelease(newImage); 
```

如果您运行静态分析器，它将对该`CGImageRelease(newImage);`行发出以下警告：

> 调用者此时不拥有的对象的引用计数不正确递减

请注意，无论您的项目设置为使用手动引用计数还是 ARC，您都会收到此警告。

相比之下，例如，[`CGImage`](http://developer.apple.com/library/Mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSBitmapImageRep_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBitmapImageRep/CGImage)方法的文档使返回的自动释放这一事实更加清楚：`NSBitmapImageRep``CGImageRef`

> **CG图像**
> 
> 从接收器的当前位图数据返回一个 Core Graphics 图像对象。
> 
> `- (CGImageRef)CGImage`
> 
> **返回值**
> 
> `CGImageRef`根据接收者的当前位图数据返回一个自动释放的不透明类型。

# java - 是否可以对构造函数参数进行硬编码？

> ID：16090711
> 
> 赞同：0
> 
> 时间：2013-04-18T18:41:16.543
> 
> 标签：java

在我使用之前；

```
public static void main(String args[]) 
{
   try 
   {
       ORB orb = ORB.init(args, null);
   }
} 
```

然后有参数参数

```
-ORBInitialPort 1050 
```

我现在想删除代码的主要部分并在另一个类中创建该类，那么是否可以对这些参数进行硬编码？还是我必须将新类中的数据传递给需要它的类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:47:13.937

当然，您的意思是静态初始化方法（对于 CORBA）。你可以做

```
String[] newArgs = {"-ORBInitialPort", "1050"}; 
ORB orb = ORB.init(newArgs, null); 
```

# objective-c - 如何防止信息重置

> ID：16090716
> 
> 赞同：1
> 
> 时间：2013-04-18T18:41:37.190
> 
> 标签：objective-c

我有一个复选框类型的应用程序，有点像 iPhone 上的笔记。当用户关闭应用程序并双击主页按钮并从后台删除应用程序时，他们键入的内容也会被删除或重置。我正在考虑调用 [self saveContext]; 但这没有用。我应该打什么电话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:51:07.460

您通常可以使用诸如`NSUserDefaults`保存信息之类的东西。或者，您可以采用另一条路线并将信息保存在数据结构中并将其写入文件。有很多简单的方法可以做到这一点。例如，如果要保留选中的值，可以执行以下操作：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setBool:YES forKey:"checked"];
[defaults synchronize]; 
```

很简单，然后就可以跨app exits查询了，像这样：

```
if( [defaults boolForKey:"checked"] ) {
    //do stuff here
} 
```

# c# - 我可以使用字符串方法名称调用 ac# dynamic 上的方法吗？

> ID：16090718
> 
> 赞同：0
> 
> 时间：2013-04-18T18:41:43.417
> 
> 标签：c#, dynamic, signalr

我想知道是否可以通过字符串调用动态 c# 对象上的函数。我想做这样的事情：

```
string lMethodName = "MethodName";
dynamic lDynamicObject = GetDynamicObject();
lDynamicObject.Invoke(lMethodName, lParameters); 
```

任何想法或解决方案将不胜感激。

也许就像 Servy 所说的，有一种更好的方法可以通过不同的设计来实现我们想要的。我们正在使用 SignalR 并有一个仪表板 Web 应用程序。我们希望仪表板中的每个小部件都能够将数据推送到它。为了实现这一点，我们将使用剃须刀代码将小部件 ID 注入到每个单独的小部件 SignalR 客户端代理中。每个小部件都将具有以下内容：

```
hub.client.updateWidget123456 = aUpdateFunction; 
```

其中 123456 是小部件的 ID。在服务器端 SignalR 集线器代码上，我们可以回调客户端 javascript 函数：

```
int lWidgetId = 123456;
dynamic lDynamic = Clients.All;
lDynamic.Invoke("updateWidget" + lWidgetId, lParameters); 
```

在不创建 javascript 代理方法的情况下，我可以想到其他方法来实现这一点。我认为这很好，因为服务器与每个单独的小部件都有直接的通信线路。可以从多个仪表板/浏览器访问它们，但它们都将通过上面的单个调用进行更新。

我们可以通过在我们的 javascript 客户端代码中调用其他对象来实现这一点，这些对象知道所有小部件以及如何将信息定向到它们。我觉得这违背了 SignalR 的集线器架构，就像我们这样做是在重新发明轮子。

有人对更好的设计方法有任何想法吗？感谢您的帮助，感谢您的评论 Servy 引发了这次讨论。

另外，这个问题不是重复的。另一个问题与 Paul 在下面评论的动态对象无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T20:16:55.323

`dynamic`如果你知道它是一个普通的 C# 对象（即没有特殊的运行时绑定器），你只能使用反射来调用一个方法。

考虑以下实现可动态使用的属性包的类：

```
public class PropertyBag : DynamicObject
{
    private Dictionary<string, object> _propertyBag = new Dictionary<string, object>();

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        return _propertyBag.TryGetValue(binder.Name, out result);
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        _propertyBag[binder.Name] = value;
        return true;
    }

    public override IEnumerable<string> GetDynamicMemberNames()
    {
        return base.GetDynamicMemberNames();
    }
} 
```

执行以下操作是完全有效的：

```
dynamic propertyBag = new PropertyBag();

propertyBag.Name = "stackoverflow";
propertyBag.Value = 42; 
```

但是，如果您尝试获取`PropertyInfo`这些动态属性中的任何一个，它将失败，因为`PropertyBag`该类没有实现它们：

```
public static void SetProperty(dynamic propertyBag, string propertyName, object value)
{
    PropertyInfo property = propertyBag.GetType().GetProperty(propertyName, BindingFlags.Public | BindingFlags.Instance);
    if (property == null)
    {
        throw new NotImplementedException();
    }

    MethodInfo setProperty = property.GetSetMethod();
    setProperty.Invoke(propertyBag, new object[] { value });
} 
```

这将引发异常：

```
dynamic propertyBag = new PropertyBag();

propertyBag.Name = "stackoverflow;      // works as expected
SetProperty(propertyBag, "Value", 42);  // throws a NotImplementedException 
```

我在这个例子中使用了属性，因为它们更容易实现，但显然同样适用于方法。这样做的原因是`dynamic`在运行时动态评估但反射只能反映在静态实现上。（类应该`GetProperties`返回什么属性`PropertyBag`？）

如果您使用`dynamic`普通的 C# 对象，反射将按预期工作，但如果您不知道您正在处理什么类型的运行时绑定器以及它是如何在内部实现的，则您不能依赖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:43:40.280

通过反思，我认为您可以做类似的事情（如果它是私有的-> NonPublic）

```
MethodInfo dynMethod = this.GetType().GetMethod("MethodName" + itemType, BindingFlags.NonPublic | BindingFlags.Instance);
dynMethod.Invoke(this, new object[] { methodParams }); 
```

只需使用接受 BindingFlags 的 GetMethod 的重载版本：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T18:56:46.307

简短的回答，是的，你可以这样做：

```
 class MyClass { public void Action() { Console.WriteLine("Do action"); } }
        // ...
        dynamic instance = new MyClass();
        instance.GetType().GetMethod("Action").Invoke(instance, null); 
```

但是在这种情况下，实例是动态类型这一事实绝对没有任何作用。你可以使用一个`object`类型，它会以同样的方式工作。链中的第一个方法，GetType() 返回`typeof(MyClass)`，然后从那里开始就是普通的老式反射。

使用 dynamic 关键字你可以做到这一点，这更有趣，虽然在运行时不太灵活：

```
 dynamic instance = new MyClass();
        instance.Action(); 
```

这将使用反射在运行时查找操作。在此示例中，与在此处设置的情况`dynamic`有所不同并不是很明显，但是您可以使用第二行来执行任何名为 action 的方法，只要该实例具有具有该名称的方法即可。`var``MyClass`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T18:44:56.630

对的，这是可能的。您想要做的事情称为“反射”，并且可以在大多数高级语言中使用

[这是C 中反射](http://www.dotnetperls.com/getmethod)的示例。它实际上非常强大，可以让你的代码在一定程度上“意识到自己”

# css - 使网站适用于多种屏幕尺寸

> ID：16090719
> 
> 赞同：0
> 
> 时间：2013-04-18T18:41:46.950
> 
> 标签：css, responsive-design

我正在尝试让我的网站在不同的屏幕尺寸上工作，我是这个领域的新手，可以使用一些帮助。

我想要完成的事情：让我的网站在不同的屏幕尺寸上工作，而不需要缩小内容的大小。我有一个接近 YouTube 布局的网站，并希望它像 YouTube 一样缩小尺寸。它只是在右侧和左侧获得越来越少的空白空间，以使屏幕尺寸减小，使网站看起来相同，无论用户可能拥有的屏幕尺寸。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:45:28.300

将您的全部内容放在一个容器中，例如`<div id="wrapper"></div>`

然后在你的CSS中：

```
 #wrapper{
      width:960px;
      margin:0 auto;
 } 
```

除了您必须开始使用媒体查询或自适应设计来创建响应式或流畅的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:19:05.063

最佳实践是从您想要解决的最小分辨率开始，并从那里建立。

但一开始最好使用流畅的布局。

简化：

```
#wrap {
 width:90%;
 margin:20px auto;
 max-width:960px;
} 
```

把它放在你的整个内容周围，让内容的宽度为 100%。

现在，您可以借助一些媒体查询来开始和构建更小的分辨率。我建议只使用两个，一个用于平板电脑，一个用于小于一个的所有设备。

```
@media screen and (max-width: 767px) {
 /* ALL < TABLET */
}

@media screen and (min-width: 768px) and (max-width: 1024px) {
 /* TABLET */
} 
```

有一些很棒的响应式布局的预编码模板，但一开始可能会有点不知所措。如果你想尝试一些我建议如下：

[http://twitter.github.io/bootstrap/](http://twitter.github.io/bootstrap/)

[https://github.com/malarkey/320andup/](https://github.com/malarkey/320andup/)

# sass - 指南针创建选项

> ID：16090721
> 
> 赞同：0
> 
> 时间：2013-04-18T18:41:58.583
> 
> 标签：sass, compass-sass

我已经通过 Ruby Gems 安装了 Compass。当我创建一个新项目时，它会创建：

*   配置文件
*   /萨斯
*   /样式表

是否可以使用我现有的目录？例如，我正在使用一个 PHP 框架，它有一个 /css 目录，理想情况下我想使用它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:46:50.580

阅读[指南针配置参考](http://compass-style.org/help/tutorials/configuration-reference/)：

您可以通过以下方式更改默认 CSS 目录`config.rb`：

```
css_dir = "css" 
```

# ruby-on-rails - activeadmin-mongoid：如何过滤 id？

> ID：16090730
> 
> 赞同：0
> 
> 时间：2013-04-18T18:42:43.670
> 
> 标签：ruby-on-rails, mongoid, activeadmin

这不起作用：

```
filter :name, :as => :string 
```

因为 mongoid id 不是字符串，所以不能将 id 作为字符串进行过滤。有没有一种通过创建自定义过滤器类型来过滤 id 的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T00:26:55.357

找到了一种方法 - 我不确定它为什么会起作用，但是：

```
filter :device_id, :as => :numeric 
```

成功了。

# javascript - Jquery幻灯片菜单x-scroll问题

> ID：16090739
> 
> 赞同：0
> 
> 时间：2013-04-18T18:43:09.747
> 
> 标签：javascript, jquery, css, html

我已经建立了一个自定义幻灯片菜单，这让我有点悲伤。[例如单击此处，](http://www.dgimanagement.com/index.php/pop-up/music-pop-copy/rev-run#)当您单击菜单按钮时，滑动菜单将背景图像推到右侧并离开和超出 x-scroll。

我对这个功能的目标是让滑动菜单位于背景图像的顶部。目前我的背景图片是一个`<img>`标签，`absolute`定位为客户想要手动更新图片。这可能是发生此问题的主要原因。还`div id="right"`包装了所有内容，包括背景图像。我试图放置在我包装内容的位置但是我想不出一种方法来使它正常工作我想知道是否有办法解决这个问题下面是一段代码，包括 javascript 和 HTML 结构.

```
$('#button').toggle( 
function() {
    $('#right').animate({ left: 400 }, 'slow', function() {
        $('#button').html('Close');
    });
}, 
function() {
    $('#right').animate({ left: 0 }, 'slow', function() {
        $('#button').html('Menu');
    });
} 
```

);

```
<div id="right">
    <div id="menubar">
        <div id="button">
            Menu
        </div>
    </div>

<div id="menu">
    <ul>
        <li><a href="#">Menu Item 1</a></li>
        <li><a href="#">Menu Item 2</a></li>
        <li><a href="#">Menu Item 3</a></li>
        <li><a href="#">Menu Item 4</a></li>
        <li><a href="#">Menu Item 5</a></li>
        <li><a href="#">Menu Item 6</a></li>
        <li><a href="#">Menu Item 7</a></li>
        <li><a href="#">Menu Item 8</a></li>
        <li><a href="#">Menu Item 9</a></li>
        <li><a href="#">Menu Item 10</a></li>
        <li><a href="#">Menu Item 11</a></li>
        <li><a href="#">Menu Item 12</a></li>
    </ul>
</div> 
```

有人可以建议我解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:25:58.297

简单添加：

```
Body{
    overflow-x:hidden;
} 
```

所以隐藏**body** -s 水平滚动。

[有关溢出](https://developer.mozilla.org/en-US/docs/CSS/overflow)的更多信息。

# mysql - 获取每日总计的 SQL 语句

> ID：16090741
> 
> 赞同：1
> 
> 时间：2013-04-18T18:43:13.163
> 
> 标签：mysql, sql

我将一些数据存储在表格中，并且希望能够在图表上显示***每天***的总数据点。因此，第一个图点可能是 2013 年 1 月 1 日星期一的 7，然后是 2013 年 1 月 2 日星期二的 3 等等。

我的 SQL 类型*datetime*表中的每个数据点都有完整的时间/日期戳。

我的伪语句看起来像这样，但我很担心，因为我使用的是*datetime*数据类型：

```
SELECT 
    DATE(created_at) AS create_date
    COUNT(id) AS total
FROM
    data_table
GROUP BY 
    create_date 
```

无论时间戳如何，如何获取每天的总数据点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:45:25.783

试试这个

```
SELECT 
    DATE(created_at) AS create_date,
    COUNT(id) AS total
FROM
    data_table
GROUP BY 
    DATE(created_at) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:48:05.480

最好的办法是开始一个每日 cron 作业，存储每天的数据点数量。因此，您可以每天计算 24.00.00 到 23.59.59 之间的数字。

如果您想即时计算它们，您可能会对大量数据有缓慢的请求，因为分组查询不能使用表索引。

但也许您可以添加一个新的表列，在其中仅存储日期和时间戳。

# asp.net - 节点中使用的基于事件的模型是否与 C# 应用程序中使用的基于事件的模型相同？

> ID：16090743
> 
> 赞同：0
> 
> 时间：2013-04-18T18:43:14.233
> 
> 标签：asp.net, node.js, events, event-driven-design

我听说过 node.js 和基于事件的编程以及诸如节点事件循环之类的东西。在大学时，我记得我制作了一个 ASP.net Web 应用程序。教授说，ASP.net 使用基于事件的架构，服务器端的回调函数由客户端的不同事件触发。

这两种不同的技术是否使用事件和事件驱动编程的概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:47:55.657

是的，节点使用基于事件的架构，其中服务器端的回调函数由客户端的不同事件触发。

为什么 Node.js 很重要。

1）在客户端和服务器上使用相同的语言加速开发。

2) 每个 Web 开发人员都已经了解 JavaScript。在服务器上使用它的过渡路径具有较低的学习曲线。

3) 为 Node.js 构建的模块都是事件驱动的。在其他平台上编写事件驱动代码通常需要您筛选第三方模块以找到事件驱动的模块。例如，有几个用于 Python 的事件驱动库，但大多数用于 Python 的第三方网络库是同步的，因为 Python 的传统。Ruby、Java、Scala 和许多其他平台也是如此。

4) 速度。Node.js 在 V8 javascript 引擎上运行。它可能不如 Java 或 C# 快，但比 Python、Ruby 和 PHP 早了好几年。Python、Ruby 和 PHP 占据了 Web 应用程序市场份额的很大一部分。当具有基于这些语言的主要经验的开发人员需要更快的速度时，Node.js 是找到它的合乎逻辑的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T20:01:32.273

它们的相似之处在于它们都使用事件的概念——调用你的代码的东西，而不是你出去寻找变化。但在实践中，它们完全不同。

在节点（和 asp.net MVC）中，来自客户端的相关事件是“请求此 URL”。而已。除了请求的内容之外，没有更多的粒度。

在 ASP.NET Webforms 中，他们非常努力地根据客户端页面上发生的情况来合成事件。你得到的事件是“文本改变”、“按钮点击”、“复选框被选中”......基本上和你在直接桌面应用程序中得到的东西一样。

事实证明，Webforms 模型变得非常非常复杂，而且抽象层阻碍了 ajax 调用之类的工作。

与 ASP.NET 不同，node 所做的另一件事是几乎所有内容都是异步事件。数据库调用？在节点中异步，在 ASP.NET 中同步。读取文件？在节点中异步，在 ASP.NET 中同步。对另一台服务器的 HTTP 请求？你明白了。

ASP.NET 可以异步执行这些操作，但您必须不遗余力地做到这一点，并且它使用线程。在节点中，异步的东西非常自然，它不需要使用线程，在某些情况下导致（有点令人惊讶）更高的吞吐量。

所以，是的，在它们都是“事件”的意义上，它们是相同的，但细节却大不相同。

# javascript - 打破封闭向团结的人解释

> ID：16090745
> 
> 赞同：0
> 
> 时间：2013-04-18T18:43:19.540
> 
> 标签：javascript, closures

我有这个，它的工作原理：

```
myObject.myFunction = (function() {
    var closure = 0;

    return function(value) {
        if (arguments.length) {
            closure = value;
        } else {
            return closure;
        }
    }
})(); 
```

它同时充当 getter 和 setter，因此调用 myFunction(3.14) 将设置闭包，调用 myFunction() 将获得闭包的值。

问：我可以把它分解成一个更冗长的例子（而不是荒谬的）吗？我想做的是这样的：

```
myObject.myFunction1 = myFunction2;
myObject.myFunction1();

function myFunction2() {
    var closure = 0;

    return function(value) {
        if (arguments.length) {
            closure = value;
        } else {
            return closure;
        }
    }
} 
```

我只是试图将 JavaScript 分解成尽可能小的块，以便我的学生可以集中精力。

编辑1：

哦等等：我根本不需要 myFunction2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:07:11.163

您是否只是在寻找解释闭包的最简单方法，例如：

```
function closure() {
    var privateData = "I'm hidden!";

    return {
        get: function () {
            return privateData;
        },
        set: function (arg) {
            privateData = arg;
        }
    };
}

var privateDataAccess = closure();

console.log(typeof (privateData)); // logs undefined -- privateData is out of scope
console.log(privateDataAccess.get()); // logs "I'm hidden!"
privateDataAccess.set("Now you changed me!");
console.log(privateDataAccess.get()); // logs "Now you changed me!" 
```

这可能就像我想的一样简单:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:55:07.507

在您的第一个示例中，您将内部函数分配给属性“myFunction”。

在第二个示例中，您将外部函数分配给属性“myfunction2”。

这会导致不同的行为，因为第一个示例使用立即调用的函数表达式，而第二个示例将名为“myFunction2”的已声明函数分配给“myFunction1”。为了调用内部函数，您实际上必须执行类似的操作。

```
myObject.myFunction1 = myFunction2;
var myFunction3 = myObject.myFunction1();
myFunction3(); 
```

或者

```
myObject.myFunction1 = myFunction2();
myObject.myFunction1(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T18:57:52.203

如果我理解你，`myObject.myFunction1 = myFunction2();`应该工作。

但是，我真的看不出将这种模式用于简单的 getter 和 setter 有什么好处。您的“闭包”变量只能从 getter/setter 内部访问，并且该函数只是简单地设置它的值（不转换它）。我的意思是，同样可以使用对象上的常规属性而不是函数来完成。

* * *

现在我更加关注您正在寻找一种更好的方式来解释闭包的事实。您可以为变量和函数使用有意义、准确的名称，并添加注释。根据您的代码，这是一个建议：

```
function createClosure() {
    // Only the function returned below can see the secret
    var secret = 0;
    return function(value) {
        // If anything was passed, change secret (returns undefined)
        if (arguments.length) {
            secret = value;
        // Nothing was passed, return secret
        } else {
            return secret;
        }

    }
}

// Create a function that enables access to the secret
var closure = createClosure();

// Use it to read the secret
console.log('the closure holds the secret: ' + closure());

// Use it to change the secret
closure(10);

// Read it again to check
console.log('the secret now holds ' + closure()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T18:59:16.447

我想这就是我正在寻找的：

```
function ConjunctionJunction() {
    var myClosure = 0;

    return function(myValue) {
        if (arguments.length) {
            myClosure = myValue;
        } else {
            return myClosure;
        }
    }
};
myObject = new Object();
myObject.myFunction = ConjunctionJunction(); // This creates a function and assigns it to the variable myObject.myFunction
myObject.myFunction(3.14); // This calls the newly created function as a setter
var x = myObject.myFunction(); // This calls it as a getter, which returns a value.
log(x); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T19:16:45.793

不，等等。我想这就是我要找的。这可能真的是：

```
myObject = new Object();

;(function($, window, undefined) {
    var Variables = {};

    myObject.myFunction = function(argValue) {
        if (arguments.length) {
            Variables.myValue = argValue;
        } else {
            return Variables.myValue;
        }
    }
})(jQuery, window);

myObject.myFunction(3.14);
var x = myObject.myFunction();
log(x); 
```

# bash - 在 bash 中，如何跟踪当前正在写入的 fifo，然后再次跟踪 fifo，寻找不同的文本？

> ID：16090747
> 
> 赞同：3
> 
> 时间：2013-04-18T18:43:22.627
> 
> 标签：bash, unix, tail, fifo

我有一个正在写入标准输出的进程，我希望能够在运行 tail -f 时通过 grepping 各种字符串来监视输出。做到这一点的一种方法是写入一个普通文件，然后将文件 grepping 用于一个字符串，然后将其 grepping 用于另一个字符串。但是，我不想写入文件，因为这会填满磁盘，而且我不想处理轮换日志文件的麻烦。

我以为我可以使用 fifos 来实现这一点。例如，

```
mkfifo myfifo
foo > myfifo &
tail -f myfifo | grep bar
tail -f myfifo | grep baz 
```

不幸的是，这似乎不起作用。事实上，拖尾时我看到任何输出的唯一方法是当我第一次执行`tail -f myfifo`then`foo > mfifo`时，但我不想重新启动 foo （这就是重点，否则我可以直接 grep standard out 并重新启动进程以 grep for不同的字符串）。有谁知道为什么会发生这种情况或对如何实现这一点有建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T20:41:15.423

发生这种情况是因为[fifo 是一个数据流](http://linux.die.net/man/7/pipe)。一旦从 FIFO 中读取了一条数据，它就会从 FIFO 中移除。在您的情况下，`foo`存储在其中的输出`myfifo`正在由第一个读取`tail -f`“ `grep`bar”的输出，而第二个则没有任何内容`tail -f`。

但是您根本不需要将输出发送`foo`到文件（FIFO 或其他）。您可以直接将其输出发送[到`tee`并让它将输出发送到您想要的任意数量的进程](https://stackoverflow.com/questions/60942/how-can-i-send-the-stdout-of-one-process-to-multiple-processes-using-preferably)。例如：

```
$ foo | tee >(grep -o bar) >(grep -o baz) >/dev/null 
```

或者，如果您只是使用`grep`，则可以`-e`在输出中使用任意多次：

```
$ foo | grep -e bar -e baz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T19:35:13.070

您可以使用不同的 grep 语法：

```
tail -f myfifo | grep -e 'pattern1' -e  'pattern2' -e 'pattern3' 
```

我认为您希望两者在同一输出流上同时发生，对吗？

否则你可以玩 tee

```
tail -f myfifo | tee -a somefile | grep bar
grep foo somefile 
```

# jquery - 在 Jquery 中使用 Parsed JSON 创建 html 表，并添加图像和输入字段

> ID：16090754
> 
> 赞同：0
> 
> 时间：2013-04-18T18:43:31.953
> 
> 标签：jquery, html, json, ajax, html-table

我在互联网上看到了很多关于循环 JSON 对象并将其打印到 html 表中的示例。但是我的问题有点不同，因为我需要第一列是图像，接下来的几列是 json 数组中的 json 数据，最后是最后一列中的输入字段（此输入字段的值是从 json 提供的数组也是如此）。

这是我拥有的完整 JSON，其中 tabledata 包含创建 html 表所需的信息数组：

```
{"approverName":"","emailAddress":"","companyName":"ABC","address":{"streetAddress1":"12 BlahBlah","streetAddress2":"","state":"ON","zipCode":"","country":"SO","phoneNumber":""},"tabledata":[{"vendorPart":"AAAAA","partDescription":"N/A","price":"0.00","quantity":"28"},{"vendorPart":"BBBBBBB","partDescription":"N/A","price":"0.00","quantity":"3"},{"vendorPart":"CCCCCC","partDescription":"N/A","price":"0.00","quantity":"25"}]} 
```

这是我的 Jquery 的 ajax 成功函数，它访问 web 服务并获取数据（只是为了让您知道 JSON 对象是如何被使用/创建的）：

```
success: function(data, status, jqxhr) {
                    var xml = $($.parseXML(data)), // Parse the XML String to a Document, and Wrap jQuery
                    json = xml.find("string").text(), // Get the text of the XML
                    jsonObj = $.parseJSON(json); // Parse the JSON String
                    $('#approver').val(jsonObj.approverName);
                    $('#emailaddress').val(jsonObj.emailAddress);
                    $('#address1').val(jsonObj.address.streetAddress1);
                    $('#address2').val(jsonObj.address.streetAddress2);
                    $('#postalcode').val(jsonObj.address.zipCode);
                    $('#city').val(jsonObj.address.state);
                    $('#country').val(jsonObj.address.country);
                    $('#phone').val(jsonObj.address.phoneNumber);

                 }, 
```

分配输入字段后，我需要将表单设置为 [如下所示（目前是硬编码）](http://i.imgur.com/hTtnAMM.png)

根据此图像，您可以看到第一列是图像，第二 - 第四列是来自 jsonObj 的数据，第四列是我必须创建的输入字段，其值也来自 jsonObj。

这是输入的代码：

```
<input class="quantityClass" type="number" name="quantity" min="0" /> 
```

我也想知道，如果我用jquery渲染表格，我在这张表格上做了很多CSS，CSS是否仍然在正确的时间生效？我希望js/css同时运行。

# android - CookieManager 不保存 cookie

> ID：16090758
> 
> 赞同：1
> 
> 时间：2013-04-18T18:43:49.657
> 
> 标签：android, cookies, webview, android-2.3-gingerbread, cookiemanager

当我执行以下代码时：

```
CookieSyncManager.createInstance(activity); 
CookieManager cookieManager = CookieManager.getInstance();
cookieManager.setAcceptCookie(true);

webView.setWebViewClient(new WebViewClient() {
    @Override
    public void onReceivedHttpAuthRequest(WebView view, HttpAuthHandler handler, 
                            String host, String realm) {
        Log.d(Utils.TAG, "There are cookies: " + cookieManager.hasCookies());
        handler.proceed("user","pass");
    }
}
webView.loadurl("https://..."); 
```

在 JellyBean 上，我`"There are cookies: true"`在 Gingerbread 上得到`"There are cookies: false"`

似乎在 Gingerbread 上的 cookie（在这种情况下是一个）没有被 webView 保存，因此网页拒绝让我登录，因为在身份验证期间 cookie 没有在标头中传递。

使用时也会发生同样的情况`CookieSyncManager`。

另外我不知道它是否相关，但代码是由 Fragment 使用`Android Support Library`.

以前有人遇到过这个问题吗？

谢谢。

# java - Treeset.add() 时发生 ClassCastException，尽管实现与 compareTo 方法相当

> ID：16090767
> 
> 赞同：1
> 
> 时间：2013-04-18T18:44:07.167
> 
> 标签：java, classcastexception, comparable, compareto

我有一个班级联系人，我在下面显示。我希望每个联系人对象都有一个其他联系人列表。我选择 a 是`TreeSet`因为我想避免在同一个列表中出现重复的联系人。我的 Contact 类实现`Comparable`并具有一个构造的 compareTo() 方法，用于比较实例 String 变量。我知道添加到 TreeSet 时使用 compareTo 方法，因为添加的元素会立即排序。

当我尝试将 Contact[] 中的 Contact 对象（请参阅下面的 setContacts() 方法）添加到 TreeSet 时，我收到一个`ClassCastException`. 我的 system.out 消息是：

```
Exception in thread "main" java.lang.ClassCastException: shared.Contact cannot be cast to java.lang.String
at java.text.Collator.compare(Unknown Source)
at java.util.TreeMap.compare(Unknown Source)
at java.util.TreeMap.put(Unknown Source)
at java.util.TreeSet.add(Unknown Source)
at shared.Contact.setContacts(Contact.java:51) <-- right here is the TreeSet.add()
at server.Server.readInContacts(Server.java:191)
at server.Server.main(Server.java:51) 
```

我不明白的是，在我构建的任何类中，我都没有尝试将任何东西转换为字符串。下面是我的整个联系课程。

有没有人看到任何错误或看到异常发生的原因？

如果有人告诉我还有什么相关的，我很乐意发布更多代码。我不知道还有什么重要的看。提前致谢。

```
package shared;

import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.text.Collator;
import java.util.LinkedList;
import java.util.TreeSet;

public class Contact implements Serializable, Comparable<Contact>{

    private static final long serialVersionUID = 1L;
    private String name;
    private boolean online;
    private TreeSet<Contact> contacts;
    private ObjectOutputStream oos;
    private ObjectInputStream ois;

    public Contact(String name){
        this(name, null, null);
    }
    public Contact (String name, ObjectInputStream ois, ObjectOutputStream oos){
        this.name = name;
        this.ois = ois;
        this.oos = oos;
        contacts = new TreeSet<Contact>(Collator.getInstance());
    }
    public String getName(){
        return name;
    }
    public void logIn(ObjectInputStream ois, ObjectOutputStream oos){
        this.ois = ois;
        this.oos = oos;
    }
    public ObjectInputStream getObjectInputStream(){
        return ois;
    }
    public ObjectOutputStream getObjectOutputStream(){
        return oos;
    }
    public void setOnlineStatus(boolean status){
        online = status;
    }
    public boolean isOnline(){
        return online;
    }
    public void setContacts(Contact[] contacts){
        this.contacts.clear();
        for (Contact c: contacts){
            this.contacts.add(c);  <-- right here is where my exception occurs
        }
    }

    @Override
    public int compareTo(Contact c){
        return this.name.compareTo(c.getName());
    }

    public boolean equals(Object o){
        Contact c = (Contact)o;
        return this.name.equals(c.getName());
    }

    public void addContact(Contact c){
        LinkedList<Contact> list = new LinkedList<Contact>();
        for (Contact contact: contacts){
            list.add(contact);
        }
    }
    public Contact[] getContacts(){
        return contacts.toArray(new Contact[0]);
    }

    public int hashCode(){
        return name.hashCode();
    }

    public String toString(){
        return this.name;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:01:28.127

答案就在 Collat​​or.java 中：

```
public int compare(Object o1, Object o2) {
return compare((String)o1, (String)o2);
} 
```

这对我来说并不是很明显，但你到底为什么要传递你自己的 Collat​​or？你在处理非ascii吗？

您在这里也有不一致之处： compareTo() == 0 应该与 equals() 相同，尤其是因为在这两种情况下，您似乎唯一关心的是“名称”

因此，一方面您声明要删除相同的条目，因此您使用比较身份，但随后您使用的 Collat​​or 肯定会产生与 equals 不一致的结果。

如果您想要的只是删除冗余而不是跳过 Collat​​or 并使用没有 Collat​​or 的 HashSet 或 TreeSet

或者，如果您必须使用 Collat​​ed names 然后使用

```
TreeMap<String,Contact> contacts = new TreeMap<String,Contact>(Collator.getInstance());
contacts.put(contact.getName(),contact); 
```

然后你可以使用：

```
Collection<Contact> uniqueContacts = contacts.values(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T18:48:59.873

c.getName() 返回一个字符串，然后你用这个调用equals..所以一个字符串被传递给equals...

等号的第一行尝试将字符串转换为联系人...繁荣

compare 方法将在它尝试比较的对象上调用 equals。

# java - 将数组列表中的单个值存储到数组中

> ID：16090768
> 
> 赞同：0
> 
> 时间：2013-04-18T18:44:15.383
> 
> 标签：java, arrays, hashmap

我想从数组列表中获取值，以便我可以绘制它们，但我无法将它们放入数组中。在这个循环中，我正在循环我的排序哈希图并尝试将值存储在一个数组中（不起作用）。

```
long v [] = null;

for(Map.Entry<String,NumberHolder> entry : entries)
{
       v = entry.getValue().singleValues;
} 
```

这是我的 NumberHolder 课程

```
private static class NumberHolder
{
    public int occurrences = 0;
    public int sumtime_in_milliseconds = 0; 
    public ArrayList<Long> singleValues = new ArrayList<Long>();
} 
```

我最终想要一个填充单个值的数组，以便我可以绘制它。

编辑

这就是我现在所拥有的，Eclipse 给了我这个永无止境的错误建议，将我的数组转换为它在用于我的图表`Object[]`时给我带来了问题。`dataset.addSeries`

```
for(Map.Entry<String,NumberHolder> entry : entries)
{ 
   graphMaker(entry.getValue().occurrences,entry.getValue().singleValues.toArray());
}                                        

public static void graphMaker(int totalValues, Object[] objects)
{

    int bin = 1000;
    HistogramDataset dataset = new HistogramDataset();
    dataset.setType(HistogramType.RELATIVE_FREQUENCY);
    dataset.addSeries("Histogram",objects,bin, 0, 120000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:48:15.823

您不能将 ArrayList 分配给这样的 Array。也许你可以使用[toArray](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray%28T%5B%5D%29)方法：

```
long v [] = null;

for(Map.Entry<String,NumberHolder> entry : entries)
{
   v = entry.getValue().singleValues.toArray(new long[0]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:04:02.217

尝试以下操作：

```
Set<Long> values = new HashSet<Long>();
Iterator<NumberHolder> it = entries.keySet().iterator();
while(it.hasNext()) {
    NumberHolder numberHolder = it.next();
    values.addAll(numberHolder.singleValues;
}
Long[] v1 = values.toArray();
// transform to primitive long array
long[] v = new long[v1.size()];
for(int i = 0; i < v1.size(); i++) {
    v[i] = v1[i];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:56:54.610

你不能直接这样做，因为`long`不等于`Long`。

您可以使用[Apache Commons Lang 库](http://commons.apache.org/proper/commons-lang/)。有一个名为的类`ArrayUtils`有一个名为[toPrimitive](http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/ArrayUtils.html#toPrimitive%28java.lang.Long%5B%5D,%20long%29)的函数。

如果您使用该功能，您可以执行以下操作：

```
for(Map.Entry<String,NumberHolder> entry : entries)
{
   v = ArrayUtils.toPrimitive(entry.getValue().singleValues.toArray(new Long[0]));
} 
```

或者，如果您不想使用该库，可以执行以下操作：

```
for(Map.Entry<String,NumberHolder> entry : entries)
{
   v = new long[entry.getValue().singleValues.size()];
   for (int i=0; i<v.length; i++) {
       v[i]=entry.getValue().singleValues.get(i);
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T18:48:03.927

很简单：

```
final ArrayList<Long> t = entry.getValue().singleValues;
v = new long[t.size()];
for (int i = 0; i < v.length; ++i) v[i] = t.get[i]; 
```

编辑：原始类型的固定处理

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T18:53:11.530

```
v = entry.getValue().singleValues.toArray(new long[0]); 
```

# localization - 是否有将美国英语 (en_US) 转换为英国英语 (en_GB) 的 API？

> ID：16090769
> 
> 赞同：4
> 
> 时间：2013-04-18T18:44:16.420
> 
> 标签：localization, internationalization, google-translate

我目前使用 Google Translate API (v2) 将美国英语的内容翻译成我们软件支持的各种其他语言。然后，我们有一个流程，用户可以提交翻译更正，以便我们最终获得相当出色的翻译。

我们现在想增加对英国英语的支持，以便我们在英国的说英语的软件用户可以获得更好的用户体验。

有什么方法可以自动转换美国英语和英国英语，还是我们只需要手动修复所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:46:37.807

不知道有什么自动的。但是您可以尝试找出最常见的差异，然后搜索它们。
这里有一个列表：
[http ://en.wikipedia.org/wiki/American_and_British_English_spelling_differences](http://en.wikipedia.org/wiki/American_and_British_English_spelling_differences)

这至少有助于手动工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-03T18:48:20.030

这是我发现的两个工具：

*   [http://www.us2uk.eu/](http://www.us2uk.eu/)（死网站）
*   [http://www.infoenglish.net/american-to-british-english/](http://www.infoenglish.net/american-to-british-english/)

但是，我还没有在大文本块上尝试过这些。

还有另一个可用的工具：

*   [https://codewordsolver.com/american-british-english-translator](https://codewordsolver.com/american-british-english-translator)（在线）
*   [https://github.com/hyperreality/American-British-English-Translator](https://github.com/hyperreality/American-British-English-Translator)（源代码）

# javascript - 如何指示服务器淘汰js没有更多项目返回

> ID：16090771
> 
> 赞同：0
> 
> 时间：2013-04-18T18:44:32.953
> 
> 标签：javascript, asp.net-mvc, knockout.js, knockout-2.0

我正在从数据库中返回大约 200 多个项目并显示，但我想知道什么时候没有更多项目要返回，因为我在滚动加载功能中使用它，并想在用户到达终点时告诉用户.

**Next - 获取下一批用户**

```
Next = function () {
    var _page = $.views.Roster.ViewModel.CurrentPage() + 1;
    $.views.Roster.GetPage("/api/Roster", 9, _page);
};

$.views.Roster.GetPage = function (url, id, pageNumber) {
        $.grain.Ajax.Get({
            Url: url,
            DataToSubmit: { pageNumber: pageNumber, id: id },
            DataType: "json",
            OnSuccess: function (data, status, jqXHR) {
                $.views.Roster.RosterViewModel.AddUsers(data);
                $.views.Roster.ViewModel.CurrentPage(pageNumber);
            }
        });
    }; 
```

让我知道我是否要提供更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:01:09.960

您可以：

如果您可以控制返回的 JSON**并且**格式是可修改的（例如，它不是某种可公开访问的 Web 服务），您可以修改返回的响应，使其包含所需的信息作为附加字段。

```
{
   users: [...your list of users data],
   hasMoreData: true
} 
```

或者...

假设数据以固定长度的批次返回，请检查返回批次的长度，如果它比预期长度短，则将其视为没有更多项目的标记（这会使您面临潜在的空如果总记录是批次长度的精确倍数，则结果）：

```
if (usersData.length < MAX_BATCH_LENGTH) {
   hasMoreData(false);
} 
```

# python - 如何从缓存中清除最后一个查询

> ID：16090774
> 
> 赞同：0
> 
> 时间：2013-04-18T18:44:46.733
> 
> 标签：python, json, bottle

我在瓶子上运行了一个 python 脚本，它在调用时返回 json 数据。问题是，如果我在浏览器上调用 URL 并不断刷新（按 F5），结果似乎是累加起来，而不是每次刷新都从数据库中获取新数据。例如，如果我在查询一中得到 1 个结果，然后我刷新浏览器，我将得到 2 个结果而不是 1 个结果。第二次刷新的第一个结果将是来自初始查询的数据，这意味着“脚本/浏览器”没有忘记初始查询。

它获取新数据的唯一方法是当我停止并启动脚本时`$python3.2 myscript.py`

有没有办法让获取新数据成为默认行为，它不会缓存最后一个结果？

这是我的脚本：

```
@route('/get_member', method = "GET")
def get_member():
    key = request.query.key
    search = request.query.search
    if search == None:
        return "blank search parameter"
    elif search == "":
        return "blank search parameter"
    elif len(str(search)) < 2:
        return "search variable too short"
    hmn = None
    result = []
    params ={}
    try:
        if key == 'id':
            if valid_integer(search) == False:
                return "search should be numbers only"
            mbr = Member()
            hmn = mbr.get_id(search)
        else:
            return "wrong key provided"
        if hmn != None:
            result.append(hmn)
        hmn = None
        #save query to file
        file_name = get_day()
        f = open(file_name + ".log", "a")
        print ("Name of the file: ", f.name)
        f.write(get_time_now() + str(result) + "\n")

        #Return jason file
        from json import dumps
        response.content_type = 'application/json'
        return dumps(result)
        result = None    
    except:
        return "oops, an error occured"
    finally:
        result = None 
```

# android - 当我在 AVD 中运行我的 android 应用程序时，它给了我一个错误

> ID：16090775
> 
> 赞同：0
> 
> 时间：2013-04-18T18:44:46.887
> 
> 标签：android, avd

AVD 说“不幸的是，服务已停止”，其中服务是我的应用程序的名称。请告诉我哪里出错了。我已经发布了两个文件的代码：

MainActivity.java：

```
public class MainActivity extends Activity {
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        Button start, stop;

        start = (Button) findViewById(R.id.Button1);
        stop = (Button) findViewById(R.id.Button2);

        start.setOnClickListener(new View.OnClickListener() {

        @Override

        public void onClick(View v) {

        Intent service = new Intent(MainActivity.this, MyService.class);

        startService(service);

        }

        });

        stop.setOnClickListener(new View.OnClickListener() {

        @Override

          public void onClick(View v) {

        Intent name = new Intent(MainActivity.this, MyService.class);

        stopService(name);

        }

        });

        }

} 
```

我的服务.java：

```
public class MyService extends Service {

    @Override
    public IBinder onBind(Intent arg0) {
            return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        new AlertDialog.Builder(this).setTitle("Argh").setMessage("Watch out!").setNeutralButton("Close", null).show();
        return 0;
    }

    @Override
    public void onDestroy() {

        super.onDestroy();

    }

} 
```

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <Button
        android:id="@+id/Button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="20dp"
        android:text="Play" />

    <Button
        android:id="@+id/Button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/Button1"
        android:layout_alignBottom="@+id/Button1"
        android:layout_centerHorizontal="true"
        android:text="Stop" />

</RelativeLayout> 
```

这就是 LogCat 所说的：

```
04-18 18:48:48.724: E/Trace(852): error opening trace file: No such file or directory (2)
04-18 18:48:49.683: D/gralloc_goldfish(852): Emulator without GPU emulation detected. 
```

**单击开始按钮后会显示错误消息。**

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:32:30.763

我想你的问题在这里..

```
new AlertDialog.Builder(this).setTitle("Argh").setMessage("Watch out!").setNeutralButton("Close", null).show(); 
```

只需评论一次并尝试。它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:30:19.173

我认为您不能在没有任何活动上下文的情况下在服务中生成 AlertDialog。如果您只想知道服务是否已启动，请尝试记录它：

```
Log.i("MyService","Service started"); 
```

并通过执行以下操作在您的 logcat 中检查它：

```
logcat -s "MyService" 
```

如果要显示 AlertDialog，请尝试查看[此](https://stackoverflow.com/questions/3814126/display-alertdialog-as-system-overlay-window-from-service)帖子。

# unix - 如何确定大型java系统中哪个子系统监听每个端口

> ID：16090776
> 
> 赞同：1
> 
> 时间：2013-04-18T18:44:48.943
> 
> 标签：unix, networking, port

我在 unix 上有一个大型 Java 系统，其中有许多子系统（电子邮件、连接等），它们侦听许多端口，但我不知道我的哪些类\子系统侦听哪个端口。

有没有工具可以帮助我解决这个问题？

示例：这是我在运行 netstat 时得到的，我不知道我的 java 系统中什么在使用端口 2503 和什么 2505

```
>netstat -nap |grep 250
Proto Recv-Q Send-Q Local Address    Foreign Address             State       PID/Program name
tcp        0      0 0.0.0.0:2503     0.0.0.0:*                   LISTEN      26659/java
tcp        0      0 0.0.0.0:2505     0.0.0.0:*                   LISTEN      26659/java 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:17:42.423

相同的 PID/应用程序使用 2 个端口。你有你的答案。

鉴于根据提供的信息，答案是如此明显，因此您必须更加具体地解决您的问题；我只能假设这不是你要找的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T17:40:06.413

获得 PID 后，您可以使用 ps

> ps -Af |grep 26659 |less

-f 选项不仅会显示正在使用该端口的程序 (java)，还会显示用于启动它的命令行。因此，如果您有多个 java 进程正在运行，并且每个进程都作为单独的任务启动，您将看到哪个进程正在使用该端口。

您可能希望在“less”中查看结果，以便滚动 java 常用的很长的命令行。

# batch-file - 使用 cmd/批处理脚本过滤信息

> ID：16090782
> 
> 赞同：0
> 
> 时间：2013-04-18T18:45:08.880
> 
> 标签：batch-file, filter, cmd

我正在使用“磁盘使用情况”（[http://technet.microsoft.com/en-us/sysinternals/bb896651](http://technet.microsoft.com/en-us/sysinternals/bb896651)）来获取回收站的大小。

问题是我得到了一堆我不需要的信息，我不知道如何选择我感兴趣的部分。

命令的输出`du`是：

> 文件：27
> 
> 目录：3
> 
> 大小：322.675.258 字节
> 
> 磁盘大小：322.773.120 字节

我需要一个批处理脚本或仅给我文本文件中的 Size 值的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:36:34.877

在批处理文件中，您`for /f`可以循环遍历文本行。

```
for /f "tokens=1* delims=:" %%a in ('du') do (
    if /i "%%a" equ "size" echo %%b
) 
```

在您的示例中，这应该输出：

```
322.675.258 bytes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:23:24.783

试试这个，之前设置你想要的文件夹：

```
@echo off&setlocal enabledelayedexpansion
set "folder=%systemdrive%\$RECYCLE.BIN"

for /f "delims=" %%i in ('du "%folder%" 2^>nul') do (
set "size=!dsize!"
set "dsize=%%i")
>recycle.txt echo(%size% 
```

输出在`recycle.txt`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:11:36.733

如果可以接受以千字节为单位的大小，您也可以这样做：

```
for /f "skip=1 delims=, tokens=6" %a in ('du -c') do echo %a >size.txt 
```

`%`在批处理脚本中使用它的标志加倍。

# android - 显示一个 textView

> ID：16090783
> 
> 赞同：0
> 
> 时间：2013-04-18T18:45:11.417
> 
> 标签：android, textview

我想在新页面中单击按钮时显示要显示的特定文本，但唯一显示的是默认的“TextView”

这是显示之前的页面。因此，一旦他们单击一个按钮，就会将他们带到下一页，向他们显示结果

公共类 Option1 扩展 Activity 实现 OnClickListener{

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    this.setContentView(R.layout.option1);

    Button butn1 = (Button) findViewById(R.id.button1);
    butn1.setOnClickListener(this);
}

@Override
public void onClick(View v) {

    Intent intent = new Intent(this,Display.class);

    intent.putExtra("Option", "Choice1");
    startActivityForResult(intent, 1);

    this.startActivity(intent);
} 
```

}

一旦他们按下上一页上的按钮，我希望它根据单击的按钮显示他们选择的内容，但它没有在 TextView 区域中显示新文本

```
public class Display extends Activity implements OnClickListener{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    this.setContentView(R.layout.display);

    //It works if i just have this part

    //TextView tv = (TextView) findViewById(R.id.textView1);
    //tv.setText("Exterior" + "\nOption1");
}

@Override
public void onClick(View v) {

Intent intent = getIntent();
String msg = intent.getStringExtra("Option");

if (msg.contentEquals("Choice1")){

    TextView tv = (TextView) findViewById(R.id.textView1);
    tv.setText("Exterior" + "\nOption1");

}
else if (msg.contentEquals("Choice2")){

}
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:55:05.250

如果您想在下一页上使用新 xml 的特定文本，请将文本作为 intent.putExtra 发送到下一个包含新 xml 的活动，您可以在新活动的 onCreate 方法中显示它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:50:49.580

您应该`TextView`在 xml 中不可见

```
 if (msg.contentEquals("Choice1")){

    TextView tv = (TextView) findViewById(R.id.textView1);
    tv.setVisibility(View.VISIBLE);
    tv.setText("Exterior" + "\nOption1 ");

 } 
```

# python - Python递归，我的函数怎么不起作用？

> ID：16090786
> 
> 赞同：2
> 
> 时间：2013-04-18T18:45:18.007
> 
> 标签：python, python-3.x

我正在尝试编写一个 Python 3 递归函数，它会告诉我一个整数是否在嵌套列表中。我不确定`True`如果在列表`False`中找到它并且在列表中找不到它，我如何让我的代码返回。当我打印我的 for 循环的结果时，我得到了一堆

```
false
false
false
false
true
false
false
false 
```

等等。但是，它返回 False，因为最后一次调用是 false，即使我希望它返回 true。我怎样才能解决这个问题？

这是我的代码：

```
def nestedListContains(NL, target):    
    if( isinstance(NL, int) ):
        return NL    

    for i in range(0, len(NL)):
       return ( nestedListContains(NL[i], target) == target )

    return False 
```

这就是我所说的

```
print(nestedListContains([[3], [4,5,7], [[[8]]]], 8)) 
```

编辑：这似乎对我有用，但似乎相当贫民窟：

```
def nestedListContains(NL, target):    
    if( isinstance(NL, int) ):
        if( NL == target ):
            return 1
        return 0

    x = 0

    for n in NL:
        x += nestedListContains(n, target) == 1        

    return x != 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T18:54:32.227

我的尝试：

```
def contains(lst, target):
    if isinstance(lst, int):
        return lst == target

    return any(contains(x, target) for x in lst) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T18:48:14.323

你`return`的结果，不管它是否`True`。你可以这样做：

```
def nestedListContains(NL, target):    
    if isinstance(NL, int):
        return NL == target

    for n in NL:
       result = nestedListContains(n, target)

       if result:
           return result

    return False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T19:10:51.113

为@gatto 的解决方案使用鸭子打字

```
def contains(lst, target):
    try:
        return any(contains(x, target) for x in lst)        
    except TypeError:
        return lst == target 
```

# c++ - OpenGL顶点数组球体杂散顶点

> ID：16090790
> 
> 赞同：0
> 
> 时间：2013-04-18T18:45:28.897
> 
> 标签：c++, opengl

我一直在尝试使用各种在线代码片段在 opengl 中编写一个球体，但是在运行代码之后有一个杂散的顶点，我不确定我的代码在哪里错过了它：

![在此处输入图像描述](https://i.stack.imgur.com/jmR3C.png)

代码：

```
 float Lats = 1/(float)(longitude-1);
    float Longs = 1/(float)(latitude-1);

    int r,s;

    vector<GLfloat> vertices;
    vector<GLfloat> normals;
    vector<GLfloat> texcoords;
    vector<GLushort> indices;

    for(r = 0; r < longitude; r++)
    {
        for(s = 0; s < latitude; s++)
        {
            float const x = cos(2*M_PI * s * Longs) * sin( M_PI * r * Lats );
            float const y = sin( -M_PI_2 + M_PI * r * Lats );
            float const z = sin(2*M_PI * s * Longs) * sin( M_PI * r * Lats );

            vertices.push_back(x * getR());
            vertices.push_back(y * getR());
            vertices.push_back(z * getR());

            normals.push_back(x);
            normals.push_back(y);
            normals.push_back(z);

            texcoords.push_back(s*Lats);
            texcoords.push_back(r*Longs);
        }
    }

    for(r = 0; r < longitude; r++) 
    {
        for(s = 0; s < latitude; s++)
        {
            indices.push_back(r * latitude + s);
            indices.push_back(r * latitude + (s+1));
            indices.push_back((r+1) * latitude + (s+1));
            indices.push_back((r+1) * latitude + s);
        }
    } 
```

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:51:27.293

你在计算，

```
float Lats = 1/(float)(longitude-1);
float Longs = 1/(float)(latitude-1); 
```

~~球体的北极导致除以 0。~~

**更新**

再次查看您的代码后，我认为问题可能更加微妙。

你假设

```
2*M_PI/* double */ * (latitude - 1)/*int*/  * 1/(float)(latitude - 1)/*float*/ == 2*M_PI 
```

因为浮点问题可能不是真的。这适用于 sin() 和 cos() 中的所有其他表达式

可能您正在处理精度损失。

由于它是确定性的，您甚至可以在最后手动修复它。这仍然适用。

~~有趣的是你的正面，背面颜色编码清楚地表明了问题，顶部有一个“结”~~

# php - PHP库对象错误

> ID：16090794
> 
> 赞同：2
> 
> 时间：2013-04-18T18:45:48.040
> 
> 标签：php, imagick

我遇到了`imagick`php 库的问题。

我正在我的文件系统中进行递归搜索并查找任何`pdf`文件。

```
 $it = new RecursiveDirectoryIterator("/test/project");
    $display = Array ('pdf');
    foreach(new RecursiveIteratorIterator($it) as $file){
        if (in_array(strtolower(array_pop(explode('.', $file))), $display))
        {
            if(file_exists($file)){
                echo $file;     //this would echo /test/project/test1.pdf
                $im = new Imagick($file);
                $im->setImageFormat("jpg");

                file_put_contents('test.txt', $im);
            }
        }
    } 
```

但是，我收到一条错误消息

```
Fatal error:  Uncaught exception 'ImagickException' with message 'Can not process empty Imagick object' in /test.php:57
Stack trace:
#0 /test.php(57): Imagick->setimageformat('jpg')
#1 {main}
  thrown in /test.php on line 57

line 57 is  $im->setImageFormat("jpg"); 
```

但是，如果我用错误代替我`$im = new Imagick($file)`的`$im = new Imagick('/test/project/test1.pdf'),`错误就消失了。

我不知道为什么会这样。有人可以给我这个问题的提示吗？非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T19:18:38.257

据此[，](http://www.imagemagick.org/script/formats.php)文件的`.jpg`格式为`JPEG`.

*注1*：

你的`$file`变量是一个对象`SplFileInfo`，但你总是像字符串一样使用它。在 的构造函数中使用`RecursiveDirectoryIterator::CURRENT_AS_PATHNAME`标志`RecursiveDirectoryIterator`，成为一个真正的字符串。

*注2*：

`RegexIterator`您可以使用, f.ex.:过滤迭代器条目`new RegexIterator($recursiveIteratorIterator, '/\.pdf$/')`：（在*注 1*之后）。或者，您也可以`GlobIterator`用于仅搜索 pdf 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T19:34:03.883

正如@pozs 指出的

> 注意 1：您的 $file 变量是一个对象 SplFileInfo，但您始终像使用字符串一样使用它。

这是一个代码片段，它可以将文件名作为字符串获取，并具有获取文件扩展名的优化方法：

```
<?php
    $display           = array ('pdf');
    $directoryIterator = new RecursiveDirectoryIterator('./test/project');

    // The key of the iterator is a string with the filename 
    foreach (new RecursiveIteratorIterator($directoryIterator) as $fileName => $file) {

        // Optimized method to get the file extension
        $fileExtension = pathinfo($fileName, PATHINFO_EXTENSION);

        if (in_array(strtolower($fileExtension), $display)) {
            if(file_exists($fileName)){
                echo "{$fileName}\n";

                // Just do what you want with Imagick here
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T19:15:55.443

也许尝试这种方法：[PDF to JPG conversion using PHP](https://stackoverflow.com/questions/8624886/pdf-to-jpg-conversion-using-php)

```
$fp_pdf = fopen($pdf, 'rb');

$img = new imagick();
$img->readImageFile($fp_pdf); 
```

从阅读其他帖子看来，GhostScript 更快？

# dart - 有什么方法可以让飞镖编辑器始终运行相同的命令？

> ID：16090795
> 
> 赞同：3
> 
> 时间：2013-04-18T18:45:51.353
> 
> 标签：dart, dart-editor

我一直希望 Cmd-r “运行我的 main.html”文件。

有没有办法做到这一点。目前，当我查看我的键绑定的 Eclipse XML 输出时，似乎 Cmd-r 绑定到“运行”。这通常很好，但很烦人，因为我必须在按 Cmd-r 之前始终切换出我当前正在编辑的任何 .html 文件并打开 main.html。

我使用的是 Dart Editor 版本 0.4.5_r21094。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T22:03:36.450

我们正在添加一个菜单选项“始终运行上次启动”。选中此选项后，一旦您运行 main.html，编辑器将在 Cmd-r 上运行相同的启动（选择不再重要），直到您明确启动另一个 html 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T19:13:52.243

[已添加功能！](http://news.dartlang.org/2013/04/new-dart-editor-build-with-run-last-launch-option.html?utm_source=dartweekly&utm_medium=email)

> 运行 > 始终运行上次启动菜单选项启用后将始终运行上次启动，除非用户明确选择另一个启动。

# linux - Vim - 自动打开右大括号并移动光标

> ID：16090802
> 
> 赞同：3
> 
> 时间：2013-04-18T18:46:17.650
> 
> 标签：linux, vim, indentation, vi

我是 Vim 新手，现在我只需要一个非常简单的东西：

```
(1)public class Foo <open brace><hit ENTER> 
or
(2)public class Foo <hit ENTER><open brace><hit ENTER> 
```

得到这个

```
(1)public class Foo{
   |cursor here
} 
```

或者

```
 (2)public class Foo
 {
    |cursor here
 } 
```

我的 .vimrc 是：

```
set smartindent
set shiftwidth=4
set number
inoremap { {<CR>}<Left> 
```

感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:27:29.133

有很多方法可以做你想做的事：“智能”插件，如[AutoClose](http://www.vim.org/scripts/script.php?script_id=2009)或[DelimitMate](http://www.vim.org/scripts/script.php?script_id=2754)或更简单的自定义映射。这是执行 #1 的一种方法，但可以找到许多替代方法（我在 中有一些`~/.vimrc`）：

```
inoremap {<CR> {<CR>}<C-o>==<C-o>O 
```

这是＃2的变体：

```
inoremap {{ <CR>{<CR>}<C-o>==<C-o>O 
```

但我建议，如果您还没有这样做，请尝试[SnipMate](https://github.com/garbas/vim-snipmate)或[UltiSnips](https://github.com/SirVer/ultisnips)。两者都允许您扩展代码片段，并且在编写大量样板文件时*非常有用。*例如，

```
cla<Tab> 
```

可能变成：

```
public class Foo
{
    |
} 
```

想想你要保存的所有按键！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T08:29:33.963

`%`( `shift`+ `5`) 将找到一些函数的括号集。

# javascript - jQuery Mobile 的 changePage 如何在其他页面中加载 jQuery 集合

> ID：16090814
> 
> 赞同：-1
> 
> 时间：2013-04-18T18:46:43.243
> 
> 标签：javascript, html, jquery-mobile

这是我的应用程序的结构：我有两个 HTML 文件：

*   索引.html
*   项目.html

items.html 包含不同的 data-role="page" div。

```
 <div data-role="page" id="myitem" data-title = "Items1"> 
...
 </div> 
```

在我的页面“index.html”中，我想对位于 items.html 中的特定页面进行 changePage（看起来像 $.mobile.changePage('items.html#myitem')

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:20:18.800

[不支持](http://view.jquerymobile.com/1.3.1/dist/demos/faq/why-is-only-the-first-page-loaded.html)混合单页和多页模板。您要么必须将所有内容放在一个文件中，要么将所有内容拆分为多个文件。

# mysql - 如何解决 mysqlimport 中缺少 LINES STARTING BY 支持的问题？

> ID：16090816
> 
> 赞同：0
> 
> 时间：2013-04-18T18:46:44.163
> 
> 标签：mysql, optimization, mysqlimport

我想将多个文本文件中的数据导入 MySQL。我正在考虑使用`mysqlimport`. 但是，我的行以一些前缀开头，结果`mysqlimport` [不支持](http://dev.mysql.com/doc/refman/5.1/en/load-data.html);`LINES STARTING BY`子句`LOAD DATA`。显然这是一个[WONTFIX 错误](http://bugs.mysql.com/bug.php?id=1628)。

那么，我该怎么办？我可以做得比通过管道`cut`杀死前缀更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:57:03.860

我已经使用 MySQL 工作了几年，我必须承认，我不知道 mysqlimport :)

既然你似乎坚持使用 mysqlimport，你想留在命令行/控制台上，我猜？

然后你也可以只告诉 MySQL 执行一个命令而不进入交互模式。

```
mysql -uYourUserName -pYourPassword -hYourHost DB_Name -e "LOAD DATA INFILE..." 
```

# javascript - jQuery.each() 和数组操作

> ID：16090821
> 
> 赞同：1
> 
> 时间：2013-04-18T18:47:13.737
> 
> 标签：javascript, jquery, arrays, getjson

这是我的代码：

```
$(document).ready(function() {
    var myArray = [];
    $.getJSON("some url",function(data){
        $.each(data, function(){
            myArray.push("a string" + this);
        });
        alert(myArray);
    });
    //alert(myArray);
}); 
```

所示代码运行良好，它显示了数组及其内容。

但是，当我尝试通过在`$.each`代码块之后使用命令行来显示数组（在示例代码中注释掉）时，不会显示数组及其内容。而是返回空/空白消息。

为什么会发生这种情况，我该如何解决？我想在块`alert(myArray);`之后有命令“” 。`$.each`

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-17T06:12:33.547

```
var myArray = [];
var jqxhr = $.getJSON( "some url", function(data) {
  $.each(data, function(){
     myArray.push("a string" + this);
  });
})  ;

jqxhr.complete(function() {
  console.log(myArray);
}); 
```

jQuery XHR 对象或“jqXHR”由 $.getJSON() 返回

当请求已经完成时，立即触发 .complete() 回调。

# javascript - jQuery 为 each() 提供一个元素数组

> ID：16090824
> 
> 赞同：1
> 
> 时间：2013-04-18T18:47:14.293
> 
> 标签：javascript, jquery, each

下面的脚本引发错误（未定义自定义字段）。我是否需要以不同的方式传递元素 ID？

我正在尝试使用要计算的表单字段为数组播种。它应该遍历数组中的每个表单字段，并使用表单元素的值递增 sum 变量。

```
jQuery(document).ready(function(){

    jQuery("#customfield_21070").attr('style','width:60px');
    jQuery("#customfield_21070").attr('disabled','disabled');

    var customfields = [
    '#customfield_11070',
    '#customfield_11071',
    '#customfield_20071',
    '#customfield_20072',   
    '#customfield_20073',
    '#customfield_20074'
    ];

    jQuery(customfields).each(function() {
        jQuery(this).attr('style','width:60px');

            jQuery(this).keyup(function(){
                calculateSum();
            });

        });

    });

    function calculateSum() {

        var sum = 0;

        //iterate through each textboxes and add the values
        jQuery(customfields).each(function() {

            //add only if the value is number
            if(!isNaN(this.value) && this.value.length!=0 && this.id !== "customfield_21070") {
                sum += parseFloat(this.value);
            }

        });
        //.toFixed() method will roundoff the final sum to 2 decimal places
        jQuery("#customfield_21070").val(sum.toFixed(2));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:50:54.607

将数组传递给 jQuery 不会将数组中的条目用作选择器。您必须将选择器作为字符串传递。当您调用时`this.value`，`this`它实际上是一个字符串而不是一个元素。尝试

```
jQuery(customfields.join(',')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:51:18.723

jQuery 的`.each()`方法旨在迭代 jQuery 对象。你应该使用一个简单的循环来迭代你的数组——无论如何，`for`它比使用 jQuery 方法快得多。`.each()`

```
for(var i=0, len=customfields.length; i<len; i++) {
    console.log(customfields[i]);
} 
```

关于性能声明的证明：http: [//jsperf.com/jquery-each-vs-for-loop](http://jsperf.com/jquery-each-vs-for-loop)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:51:46.610

尝试使用[**jQuery.each()**](http://api.jquery.com/jQuery.each/)

```
$.each(customfields, function (index, value) {
    $(value).attr('style', 'width:60px');  // OR $(value).width(60);
    $(value).keyup(function () {
        calculateSum();
    });
}); 
```

# c# - 我可以在一个项目中使用异步和同步套接字吗？

> ID：16090825
> 
> 赞同：2
> 
> 时间：2013-04-18T18:47:17.170
> 
> 标签：c#, sockets

我需要能够随时从服务器异步接收消息。但是，我也想使用同步套接字；当我发送消息时，我想阻止，直到收到回复。同步和异步是不是相互配合好，还是会出问题？

换句话说，我`BeginReceive()`习惯于异步监听。如果我打电话`Receive()`（我理解的同步版本），下一条传入的消息会被 Receive 回调、`BeginReceive`回调、两者、都不接收，还是更糟？

这将发生在客户端，服务器可以保持 100% 异步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:19:03.673

是的，这是完全可能的，诀窍是将异步行为隐藏在“似乎”以同步方式运行的包装器中。对于网络库 NetworkComms.Net ，[这里](http://www.networkcomms.net/synchronous-send-and-receive/)有一篇关于这样做的文章。

免责声明：我是这个库的开发人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:52:14.793

> 同步和异步能很好地相互配合吗？

不，一般来说，他们在一起玩得不好。

这并不是说它永远无法完成，但它有时是不可能的，而且通常令人困惑且难以处理。除非您有令人信服的理由不这样做，否则我建议您只使用其中一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:52:33.980

来自 MSDN：

BeginReceive：“开始从连接的 Socket*异步接收数据。”*

所以我想说，即使 BeginReceive 是从 Socket 类派生的，它也是为了接收异步数据，因为 Receive 方法用于从绑定的 sock 中同步检索数据。

# c# - 从 C# 中的序列化字符串中提取 JSON 对象

> ID：16090826
> 
> 赞同：0
> 
> 时间：2013-04-18T18:47:18.850
> 
> 标签：c#, json

假设我有一个看起来像这样的字符串......

```
string s = "{ \"id\": \"1\", \"name\" : \"Test\" } has other text in the same string"; 
```

在 C# 中，有没有办法在拆分字符串时将文本的 JSON 部分提取为自己的“标记”？

目标很简单。在一个包含文本的字符串中，可能还有一个 JSON 对象，我只是想尝试将文本从 JSON 中分离出来，以便我可以将其传递给适当的设施。不需要反序列化，不需要验证，也不需要将 JSON 文本转换为对象。我只是想能够把文字拉出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T19:05:01.213

在处理 json 时，请使用真正的 json 解析器，如[Json.net](http://json.codeplex.com/)。正则表达式不足以处理所有极端情况。

例如，假设一个字符串字段包含`[`并且您使用 Garath 的答案。轰隆隆。

```
string s = "{ \"id\": \"1\", \"name\" : \"Test\" }";
var anonymousObject = new { id = 0, name = "" };
anonymousObject = JsonConvert.DeserializeAnonymousType(s, anonymousObject);

Console.WriteLine(anonymousObject.name); 
```

其他序列化器替代品：JavaScriptSerializer、DataContractJsonSerializer .......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T18:52:53.763

波纹管代码应该做你正在寻找的（我测试过）：

```
string s = "{ \"id\": \"1\", something:{xx:22, yyy: \"3\"}, \"name\" : \"Test\" } has other text in the same string";
var regexp = new Regex("([{].+[}])");
var match = regexp.Match(s); 
```

# jsf - 当我打开 /home.xhtml 时，不会调用映射到 /home 的 Servlet 过滤器

> ID：16090827
> 
> 赞同：1
> 
> 时间：2013-04-18T18:47:23.550
> 
> 标签：jsf, login, servlet-filters

我是 Java 企业版的新手。我开始从一些 YouTube 视频中学习，最近开始阅读[http://docs.oracle.com/javaee/6/tutorial/doc/](http://docs.oracle.com/javaee/6/tutorial/doc/) 我读完了第 15 章。

我尝试制作自己的过滤器。

我没有使用 Java Servlet 类。因为我想使用 JSF 页面，据我所知，只能将托管 Bean 与 JSF 页面一起使用，而 Servlet 类与 JSP 一起使用。没关系。

据我所知登录过滤器的用处： [https ://stackoverflow.com/tags/servlet-filters/info](https://stackoverflow.com/tags/servlet-filters/info)

> [...] 当您有多个页面要检查登录用户时，这特别有用。您可以使用过滤器将其放在一个位置，而不是在所有页面上复制粘贴相同的逻辑。

**当用户直接**在浏览器中为需要登录用户的页面键入 URL 时，它很有用（据我所知），因此过滤器会将他重定向到登录页面或在他登录时继续。

我搜索了任何简单的例子来学习，但没有找到。我举个简单的例子：

我有两个 JSF 页面
，一个名为 home.xhtml（需要登录用户）
，另一个名为 login.xhtml（如果非登录用户寻找主页，过滤器必须重定向到它）

登录.xhtml：

```
 <h:form>
     <h:panelGrid columns="2">
     <h:outputLabel value="name:"/> <h:inputText value="#{user.name}"/>
     <h:outputLabel value="password:"/> <h:inputSecret value="#{user.password}"/>
     </h:panelGrid>
     <h:commandButton id="btn"  value="login" action="#{user.login()}"/>
  </h:form> 
```

主页.xhtml：

```
<h:body>
   Hello #{user.name}. You are welcome
</h:body> 
```

用户：

```
@ManagedBean
@SessionScoped
public class User implements Serializable
{
   String name;
   String password;
   Authentication authentication;

   public User()
   {
      authentication = new Authentication();
   }

    //Getters and Setters for name and password.

   public String login()
   {
      if (this.getName().equals("user") &&(this.getPassword().equals("1234")))
      {
         authentication.setLoggedIn(true);
         FacesContext context = FacesContext.getCurrentInstance();
         context.getExternalContext().getSessionMap().put("auth", authentication);
         return "home";
      }
      else
      {
         authentication.setLoggedIn(false);
         FacesContext context = FacesContext.getCurrentInstance();
         context.getExternalContext().getSessionMap().put("auth", authentication);
         return "login";
      }
   }
} 
```

验证：

```
@ManagedBean
@SessionScoped
public class Authentication implements Serializable
{

   private boolean authenticated;

   public Authentication()
   {
      authenticated = false;
   }

   public boolean isLoggedIn()
   {
      return authenticated;
   }

   public void setLoggedIn(boolean authenticated)
   {
      this.authenticated = authenticated;
   }

} 
```

登录过滤器：

```
@WebFilter(value = "/home")
public class LoginFilter implements Filter
{

   @Override
   public void init(FilterConfig filterConfig) throws ServletException
   {
      //throw new UnsupportedOperationException("Not supported yet.");
   }

   @Override
   public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException
   {
      HttpServletRequest req = (HttpServletRequest) request;
      Authentication auth = (Authentication) req.getSession().getAttribute("auth");

      if (auth != null && auth.isLoggedIn())
      {
         System.out.println("Filter is working");
         chain.doFilter(request, response);
      } else
      {
         System.out.println("Filter is working");
         HttpServletResponse res = (HttpServletResponse) response;
         res.sendRedirect(req.getContextPath() + "/login.xhtml");
      }
   }

   @Override
   public void destroy()
   {
      //throw new UnsupportedOperationException("Not supported yet.");
   }
} 
```

面孔配置：

```
 <navigation-rule>
      <from-view-id>/login.xhtml</from-view-id>
      <navigation-case>
         <from-outcome>home</from-outcome>
         <to-view-id>/home.xhtml</to-view-id>
         <redirect/>
      </navigation-case>
      <navigation-case>
         <from-outcome>login</from-outcome>
         <to-view-id>/login.xhtml</to-view-id>
         <redirect/>
      </navigation-case>
   </navigation-rule> 
```

网页.xml：

```
<context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/login.xhtml</welcome-file>
    </welcome-file-list> 
```

* * *

现在，当我在浏览器中键入 home.xhtml 页面的 URL（在清除历史记录和 cookie 之后）时，假定将我重定向到**登录**页面。但相反，它以空值的 name 回到家中：
`Hello #{user.name}. You are welcome`呈现为`Hello . You are welcome`

甚至`System.out.println("Filter is working");`不打印任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:07:48.317

你确定过滤器被调用了吗？如果没有打印任何内容，`System.out`我想不会。问题可能是 servlet 映射。

你指定了这个：

```
@WebFilter(value = "/home")
public class LoginFilter implements Filter {...} 
```

我认为这仅与 url 匹配`/home`。尝试使用`/*`or `/home*`（这是非常有限的，我不推荐它）来代替。

另一件事：如果你得到`Hello #{user.name}. You are welcome`作为输出，那么`FacesServlet`可能不会调用。这可能有两个原因：

1.  您使用了错误的映射。尝试使用`/faces/home.xhtml`or来调用页面`/home.jsf`。url 取决于您在`web.xml`.
2.  未`FacesServlet`正确配置/根本没有在`web.xml`.

# caching - Akamai 是否实施 if-modified-since？

> ID：16090838
> 
> 赞同：2
> 
> 时间：2013-04-18T18:48:10.410
> 
> 标签：caching, cdn, akamai

我正在尝试微调我的一个将 Akamai 用于 CDN 的应用程序。

我提供的资源很少更改，但我希望 Akamai 偶尔检查一次以防万一。

为此，我将 Expires 和 CacheControl:max-age 设置为 3 天。

我的问题是：这 3 天之后会发生什么？Akamai 是否再次询问我整个内容，还是询问我是否使用 if-modified-since 标头进行了更改？
如果没有，我什至不会费心在我的应用程序中实现 304 状态代码的返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:09:12.797

Akamai 服务器将向您的源发出 IMS 请求。

# mono - NSUserNotificationCenterDelegate 方法不只在一台机器上调用

> ID：16090850
> 
> 赞同：0
> 
> 时间：2013-04-18T18:48:52.300
> 
> 标签：mono, monomac, xamarin.mac, nsusernotificationcenter

我正在尝试使用`NSUserNotificationCenter`. 我能够成功发送通知。我正在使用`ShouldPresentNotification`回调`NSUserNotificationCenterDelegate`来显示通知，即使应用程序在前台运行也是如此。

这很好用，除了在我的一台机器上！

我已将代码精简为最基本的示例。我所有的机器都运行 10.8.3 和 Mono 2.10.12。在我的 2008 Macbook Pro 和同事的 2012 rMBP 上，一切正常。但是，在我相同的 2012 rMBP 上，如果应用程序在前台，则不会显示通知。事实上，在这台机器上，并且仅在这台机器上，没有`NSUserNotificationCenterDelegate`调用任何方法。

请注意，通知仍然在这台机器上传递 - 通知有效 - 当应用程序处于前台时它不会呈现（因为从不调用委托方法）。

如果有人对可能导致此行为的设置或配置有所了解，或者是否有某种机制可以用来调试此行为，我将不胜感激。

这是我的代码：

```
UNCShouldPresentNotification ShouldPresent = (a, b) => { return true; };

// Shared initialization code
void Initialize()
{
    NSUserNotificationCenter.DefaultUserNotificationCenter.ShouldPresentNotification = this.ShouldPresent;
}

partial void notify(NSObject sender)
{
    DoNotify();
}

[Export("doNotify")]
private void DoNotify()
{
    NSUserNotification notification = new NSUserNotification();
    notification.Title = notificationText.StringValue;

    NSUserNotificationCenter.DefaultUserNotificationCenter.DeliverNotification(notification);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T14:49:10.007

好的，我们有完全相同的错误。首先，我们联系了 Xamarin，他们已经在最新的代码中修复了它。其次，这是由于覆盖了 Delegate 代表（我知道的好名字）和 ShouldPresent 设置。如果您想覆盖 ShouldPresent 设置，请在您的 NSUserNotificationCenter.Delegate 中执行此操作。

我希望这很清楚。我们在[https://bugzilla.xamarin.com/show_bug.cgi?id=11456有一个已解决的 bugzille 条目](https://bugzilla.xamarin.com/show_bug.cgi?id=11456)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T18:32:42.560

现在可以在我的机器上更新 MonoMac、Mono 和 OS X 之间的某个地方。

# c++ - 从 bash 运行程序时的非法指令

> ID：16090854
> 
> 赞同：0
> 
> 时间：2013-04-18T18:49:06.077
> 
> 标签：c++, macos, bash, runtime-error

我有一套在 Mac 10.8.3 上创建和编译的基于 C++ 的程序。它们在 10.8.* Mac 上工作得很好，但是当我尝试在 10.6.* 上运行它们时，我收到以下消息，“非法指令”，就是这样。如果我在 10.6.* 上编译这些程序，它们将在其他 10.6.* Mac 上运行。

我不知道是什么导致了这个错误消息，但我已经在多台 10.6.* 机器上复制了它。似乎没有很多关于此错误消息来源的信息。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:23:46.640

您必须将“OS X 部署目标”设置为 10.6（在项目信息选项卡中）才能创建在 OS X 10.6 上运行的二进制文件。

# java - Java Tetris - 使用转置来旋转一块

> ID：16090855
> 
> 赞同：2
> 
> 时间：2013-04-18T18:49:06.217
> 
> 标签：java, swing, transpose, tetris

我正在用 Java 构建俄罗斯方块作为一个有趣的项目，现在正在研究轮换。

我最初对每个旋转都进行了硬编码，这被证明非常乏味。

话虽这么说，然后我打算使用线性代数尝试矩阵旋转，但[数学](https://math.stackexchange.com/questions/363602/java-tetris-using-rotation-matrix-math-to-rotate-piece)上的某个人建议我尝试转置。所以根据他的描述，我试着画出来。我把图纸弄对了吗？

![在此处输入图像描述](https://i.stack.imgur.com/1ukhz.jpg)

从那以后，我并没有尝试对转置进行编码，但现在我完全迷失在我的代码中。

```
public void getTranspose() {
    Tile[][] gridTranspose = transpose();
    System.out.println();
    System.out.println("B`:");
    for (int j = 0; j < gridTranspose.length; j++) {
        for (int i = 0; i < gridTranspose[j].length-1; i++) {
            System.out.print("(" + i + ", " + j + ") ");
        }
        System.out.println();
    }
}

public Tile[][] transpose() {
    Tile gridT[][];
    gridT = new Tile[width][height];
    System.out.println("B:");
    for(int i = 0; i < grid.length; i++) {
        for(int j = 0; j < grid[i].length-1; j++) {
            System.out.print("(" + i + ", " + j + ") ");
            gridT[j][i] = grid[i][j]; 
        }
        System.out.println();
    }
    return gridT;   
} 
```

这会输出一个看似正确的转置图？

**乙：**

```
(0, 0) (0, 1) (0, 2) (0, 3) (0, 4) (0, 5) (0, 6) (0, 7) (0, 8) 
(1, 0) (1, 1) (1, 2) (1, 3) (1, 4) (1, 5) (1, 6) (1, 7) (1, 8) 
(2, 0) (2, 1) (2, 2) (2, 3) (2, 4) (2, 5) (2, 6) (2, 7) (2, 8) 
(3, 0) (3, 1) (3, 2) (3, 3) (3, 4) (3, 5) (3, 6) (3, 7) (3, 8) 
(4, 0) (4, 1) (4, 2) (4, 3) (4, 4) (4, 5) (4, 6) (4, 7) (4, 8) 
(5, 0) (5, 1) (5, 2) (5, 3) (5, 4) (5, 5) (5, 6) (5, 7) (5, 8) 
(6, 0) (6, 1) (6, 2) (6, 3) (6, 4) (6, 5) (6, 6) (6, 7) (6, 8) 
(7, 0) (7, 1) (7, 2) (7, 3) (7, 4) (7, 5) (7, 6) (7, 7) (7, 8) 
(8, 0) (8, 1) (8, 2) (8, 3) (8, 4) (8, 5) (8, 6) (8, 7) (8, 8) 
(9, 0) (9, 1) (9, 2) (9, 3) (9, 4) (9, 5) (9, 6) (9, 7) (9, 8) 
```

**乙`：**

```
(0, 0) (1, 0) (2, 0) (3, 0) (4, 0) (5, 0) (6, 0) (7, 0) (8, 0) 
(0, 1) (1, 1) (2, 1) (3, 1) (4, 1) (5, 1) (6, 1) (7, 1) (8, 1) 
(0, 2) (1, 2) (2, 2) (3, 2) (4, 2) (5, 2) (6, 2) (7, 2) (8, 2) 
(0, 3) (1, 3) (2, 3) (3, 3) (4, 3) (5, 3) (6, 3) (7, 3) (8, 3) 
(0, 4) (1, 4) (2, 4) (3, 4) (4, 4) (5, 4) (6, 4) (7, 4) (8, 4) 
(0, 5) (1, 5) (2, 5) (3, 5) (4, 5) (5, 5) (6, 5) (7, 5) (8, 5) 
(0, 6) (1, 6) (2, 6) (3, 6) (4, 6) (5, 6) (6, 6) (7, 6) (8, 6) 
(0, 7) (1, 7) (2, 7) (3, 7) (4, 7) (5, 7) (6, 7) (7, 7) (8, 7) 
(0, 8) (1, 8) (2, 8) (3, 8) (4, 8) (5, 8) (6, 8) (7, 8) (8, 8) 
(0, 9) (1, 9) (2, 9) (3, 9) (4, 9) (5, 9) (6, 9) (7, 9) (8, 9) 
```

所以我的问题是：

1）我上面的画是对他描述的正确解释吗？

2）我是否正确生成了转置图？

3）如果是这样，我应该如何绘制旋转的块......我应该用 替换`grid[row][col]`吗`transpose()`？

```
public void paintComponent(Graphics g) {
    g.setColor(Color.black);
    g.fillRect(0, 0, getWidth(), getHeight());
    for(int row = 0; row < grid.length; row++) {
        for(int col = 0; col < grid[row].length; col++) {
            if(grid[row][col] != null) {
                //if there is a non-null space, that is a Tetris piece.. fill it red
                if (grid[row][col].getColor() != null) {
                    g.setColor(grid[row][col].getColor());
                    g.fillRect(row * tilesize, col * tilesize, tilesize, tilesize);
                    g.setColor(Color.WHITE);
                    g.drawString("(" + row + ", " + col + ")", row * tilesize, col * tilesize+10);
                }           
            }
        }
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:55:18.310

单独的移调不适用于所有正常的俄罗斯方块。例如，取这样的形状：

```
xx_
_xx
___ 
```

当你转置它时，你会得到这个：

```
x__
xx_
_x_ 
```

因此，与其考虑一个特定的部分，不如想想当你使用一个标有角的正方形时会发生什么：

```
a_b
___
d_c 
```

这很清楚您的轮换是否良好。那么让我们看一下转置：

```
a_d
___
b_c 
```

为了获得顺时针旋转，我们可以将其侧向翻转：

```
d_a
___
c_b 
```

再次执行相同的操作应该让我们从开始的地方旋转一个完整的半圈。进行转置：

```
d_c
___
a_b 
```

并翻转它：

```
c_d
___
b_a 
```

因此，为了顺时针旋转，只需进行转置并将其翻转即可。如果我们做相反的事情，翻转它然后进行转置，会发生什么？从之前的方向开始，如果我们翻转它，我们会得到这样的结果：

```
d_c
___
a_b 
```

现在进行转置：

```
d_a
___
c_b 
```

我们又回到了一次旋转后的状态——逆时针旋转。所以单独的移调是行不通的，但是移调结合水平翻转可以满足你的一切需求！

至于你的问题，

1.  我不确定您的绘图是正确的解释。根据您留下的评论，我怀疑我可能误解了它们，这就是为什么我制作上面的图纸以显示需要发生的事情。

2.  是的，这是一个正确的转置图。您可能不想`gridTranspose[j].length-1`在循环中使用，因为这会切断一列。

3.  要绘制旋转块，我建议使用单独的变量来保存当前块。如果这件作品在`x,y`，那么你会在你的`paintComponent`方法中加入这样的东西：

    ```
    for(int row = 0; row < piece.length(); row++) {
        for(int col = 0; col < piece.width(); piece++) {
            if(piece.hasBlockAt(row, col) {
                g.setColor(piece.getColorAt(row, col));
                g.fillRect((row+x) * tilesize, (col+y) * tilesize, tilesize, tilesize);
            }
        } 
    } 
    ```

# php - 在 php 中使用 include 和 header 的麻烦。“无法修改标头信息”

> ID：16090858
> 
> 赞同：-2
> 
> 时间：2013-04-18T18:49:21.617
> 
> 标签：php, header, include

我有一个文件'header.php'，其中有一个搜索文本框。另一个名为“myPage.php”的文件包括“header.php”。在 header.php 中

```
 if (isset($_POST['Searchbutton'])){ // this will execute when the search button is clicked.
 $target = $_POST['searchtext'];
 header("Location: searchresult.php?text=" . $target); // line #8
 } 
```

在 myPage.php

```
<?php
include("header.php");
?> 
```

当我在“myPage.php”并使用搜索选项时，我收到一条错误消息

```
Cannot modify header information - headers already sent by (output started at myPage.php:3) in header.php on line 8. 
```

谁能帮我理解这个概念。我是php的新手。请询问是否需要更多信息。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:56:38.213

`header()`如果已经将任何内容输出到浏览器，则无法调用。`ob_start()`您可以在代码的开头避免此问题，然后再将`ob_flush()`输出发送到哪里。这将缓冲所有输出到浏览器，直到`ob_flush()`被调用。

这也意味着 header() 重定向，或者只要它们发生在之前就可以进行其他更改`ob_flush()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:52:09.157

在发送 header() 之前，您不能向浏览器输出内容。只要看看http是如何工作的，你就会明白:)

[http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Client_request](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Client_request)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:53:08.007

简而言之，您尝试做的事情没有意义。当您发送一个页面时，您也发送了 HTTP 标头。您正在尝试发送一个页面，然后发送一个将客户端重定向到另一个页面的标头。

这就是为什么您收到标头已发送错误的原因。由于您只是尝试发布表单，因此没有理由尝试重定向......只需将表单的目标作为处理搜索条件的脚本。

# mysql - MySQL以分层结构返回所有记录

> ID：16090860
> 
> 赞同：0
> 
> 时间：2013-04-18T18:49:28.370
> 
> 标签：mysql, hierarchical-data

我有一个简单的分层表“组”，我在其中存储每个孩子的父 ID。

我正在尝试使用以下查询查询表组的每个成员：

```
SELECT groups.name  AS 'Group Name', 
       groups1.name AS 'Group1 Name' 
FROM   groups 
       LEFT JOIN groups groups1 
              ON groups.id = groups1.parent_id 
WHERE  groups.parent_id = 0 
ORDER  BY groups.id, 
          groups1.id 
```

我得到：

|组名称......................................|组 1 名称...... ......|
|------------------------------------------------- --------------------------|
|资产..................................................|固定资产…………|
|资产..................................................|流动资产............|
|资产..................................................|投资........|
|负债与所有者权益…………|资本账户…………|
|负债和所有者权益…………|流动负债……|
|收入................................................|直接收入。 ..........|

但我真正想要的是每个节点的一条线，即使有一个孩子，即：

|组名称......................................|组 1 名称...... ......|
|------------------------------------------------- --------------------------|
|资产..................................................| .....................|
|资产..................................................|固定资产…………|
|资产..................................................|流动资产............|
|资产..................................................|投资........|
|负债和所有者权益…………|……………… ....|
|负债与所有者权益…………|资本账户…………|
|负债和所有者权益…………|流动负债……|
|收入..................................................|... ................................|
|收入................................................|直接收入。 ..........|

有没有办法通过一个或多个查询来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:01:51.987

不要将顶级条目的 parent_id 设置为 0，而是将 parent_id 设置为自身（即 parent_id = id）。然后将顶层加入所有将包括自身的“孩子”。

```
SELECT parent.name AS `Group Name`, 
  IF(parent.id = child.id, '', child.name) AS `Group1 Name` 
FROM groups AS parent JOIN groups AS child 
  ON ((parent.id = child.parent_id))) 
WHERE parent.parent_id = parent.id 
ORDER BY parent.id, child.id 
```

请注意，您不需要 LEFT OUTER JOIN，因为保证至少有一个“孩子”。

您还可以使用我在 Stack Overflow 上的几篇文章中描述的 Closure Table 设计：

*   [将平面表解析为树的最有效/优雅的方法是什么？](https://stackoverflow.com/questions/192220/what-is-the-most-efficient-elegant-way-to-parse-a-flat-table-into-a-tree/192462#192462)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:10:29.100

这是一种为您提供一些额外字段的方法，但它需要这样做才能正确排序结果。如果您想稍微清理一下输出，您可以在技术上围绕此选择的输出包装另一个选择。

```
(
    SELECT groups.id AS parent_id, groups1.id AS child_id, groups.name  AS 'Group Name', 
       IF(LENGTH(groups1.name), groups1.name, '') AS 'Group1 Name' 
    FROM   groups 
    LEFT JOIN groups groups1 ON groups.id = groups1.parent_id 
    WHERE  groups.parent_id = 0
) 
UNION 
(
    SELECT groups.id AS parent_id, NULL AS child_id, groups.name  AS 'Group Name', '' AS 'Group1 Name' FROM groups WHERE groups.parent_id = 0
) 
ORDER BY parent_id, child_id 
```

# c# - 使用子目录时 Javascript 和 CSS 文件不起作用

> ID：16090861
> 
> 赞同：1
> 
> 时间：2013-04-18T18:49:36.710
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我需要获取基本路径，因为目前我的应用程序托管为一个子站点，例如：

```
www.example.com/site1/site2/ 
```

我的 IIS 应用程序在 site2 中设置，但我的剃须刀页面和母版页引用了以下内容：

```
 <link href="/Assets/css/styles.css" rel="stylesheet"> 
```

在这种情况下，它应该是这样的：

```
 <link href="/site1/site2/Assets/css/styles.css" rel="stylesheet"> 
```

我也有类似的图像：

```
 <img src="/Assets/images/logo.jpg" /> 
```

我怎样才能让它以动态的方式工作，这样我就不必在某处对子目录进行硬编码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T18:53:31.737

您应该使用内置的帮助程序来获取内容的相对路径。

```
 <link href="@Url.Content("~/Assets/css/styles.css")" rel="stylesheet"> 
```

对于托管在 的站点`www.domain.com/site/subdirectory`，上述内容将呈现给

```
<link href="/site/subdirectory/Assets/css/styles.css" rel="stylesheet"> 
```

而且，如果您移动站点或更改根路径，则无需更改标记代码。

更多示例：

**图片**

```
<img src="@Url.Content("~/Assets/images/logo.jpg")" /> 
```

**Javascript**

```
<script type="text/javascript" src="@Url.Content("~/Assets/Scripts/jsfile.js")"></script> 
```

# javascript - 如何使用 JS 库为我的 SVG 文件制作动画 - 盆景适合这个吗？

> ID：16090866
> 
> 赞同：0
> 
> 时间：2013-04-18T18:49:52.903
> 
> 标签：javascript, bonsaijs

我想找到并学习一个 js 库，它可以让我为我在 Illustrator 中创建的 SVG 文件制作动画。我在 After Effects 和动态图形方面有很大的背景，所以我正在寻找一个 JS 库，它可以为我提供很多动画功能。

我现在正在检查 BonsaiJS，我想知道是否有人可以建议我 Bondsai 是否允许我为 SVG 文件制作动画，如果允许，请告诉我如何开始这样做。

现在，我在整个网站的图像标签中嵌入了 SVG。我很快写了一些示例代码来说明我对如何使用 Bonsai 为我的 SVG 制作动画的想法。但是，处理现有的 SVG 文件而不是形状有什么特殊要求吗？抱歉，SVG 格式听起来很模糊，JS 动画库对我来说是新的。简单地将我指向一个使用 js 库为 SVG 制作动画的教程将是一个巨大的帮助。

```
<img src="graphic.svg" id="graphic">

bonsai.run(document.getElementById('graphic'), {
code: function() {

},

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T06:17:53.397

Bonsai 公开了两者的 API，嵌入图像并对其进行动画处理。

```
bonsai.run(document.body, {
  width: 300,
  height: 300,
  code: function() {
    // url that points to the image
    var url = 'https://upload.wikimedia.org/wikipedia/commons/7/72/Variable_Resistor.svg';
    new Bitmap(url).on('load', function() {
      // adjust size
      this.attr('width', 200);
      // add it to the stage
      this.addTo(stage);
      // animate arbitrary attributes
      this.animate('3s', {
        x: 200
      });
    });
  }
}); 
```

我建议在[http://orbit.bonsaijs.org](http://orbit.bonsaijs.org)上使用您的资产和 Bonsai 的动画 API来适应它。

*   工作示例：http: [//jsbin.com/icuqon/2/edit](http://jsbin.com/icuqon/2/edit)
*   动画文档：[http ://docs.bonsaijs.org/overview/Animation.html](http://docs.bonsaijs.org/overview/Animation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T00:31:15.177

我建议您从 Raphael 而不是 Bonsai 开始使用 SVG。它更受欢迎，您会发现更多可以回答您问题的人。此外，调试与 Bonsai 一起使用的 JS 非常困难。

# javascript - 如何根据另一个文本框更改文本框中的文本

> ID：16090867
> 
> 赞同：0
> 
> 时间：2013-04-18T18:49:53.220
> 
> 标签：javascript, flash, actionscript

基本上我正在使用动作脚本 3.0 在 flash cs6 上创建一个简单的测验，并且我已经制作了以下“原型”模型来计算分数并根据它给出反馈：

```
var xx:Number = 0;
button1.addEventListener(MouseEvent.CLICK, buttonCount);
function buttonCount(event:MouseEvent)
{ xx = xx +1;   var xxx:String = String(xx);    score.text = xxx
}

if (score.text == "1"){
    feedback.text == "well done";
} 
```

button1 是正确答案，分数会增加 1。“1”和“做得好”只是示例。score.text 是显示分数的地方。和 feedback.text 是反馈。我计划使用其他“else if”来提供不同分数的反馈。两个文本框都是动态文本。

我几乎是 JavaScript 的菜鸟，我正在为一个 ICT 项目做这件事。'if' 由于某种原因不起作用，但是 button1 确实将 score.text 的值增加了 1。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:56:25.983

改变

```
 var xx:Number = 0;
button1.addEventListener(MouseEvent.CLICK, buttonCount);
function buttonCount(event:MouseEvent)
{ xx = xx +1;   var xxx:String = String(xx);    score.text = xxx
}

if (score.text == "1"){
    feedback.text == "well done";
} 
```

到

```
 var xx:Number = 0;
    button1.addEventListener(MouseEvent.CLICK, buttonCount);
    function buttonCount(event:MouseEvent)
    { 
if (score.text == "1"){
        feedback.text = "well done";
xx = xx +1;   var xxx:String = String(xx);    score.text = xxx
    }else{
feedback.text = "wrong."
    }

} 
```

基本上，我`feedback.text == "well done"`改为`feedback.text = "well done"`

您只能`==`在条件语句中使用，如果您要声明文本应该是什么，那么您应该放`=`.

`==`表示它是否相等，= 表示它是否相等，所以如果我说如果我说它`if(blah=0)`会被调用`blah = 0`，但如果我`if(blah==0)`说它会在每次金额达到 0 时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:02:22.917

你确定你的“if”语句执行了吗？我认为，问题是，你永远不会进入这个比较。

# xml - 如何从命令行漂亮地打印 XML？

> ID：16090869
> 
> 赞同：626
> 
> 时间：2013-04-18T18:50:04.107
> 
> 标签：xml, unix, command-line

相关：[如何在（unix）shell 脚本中漂亮地打印 JSON？](https://stackoverflow.com/questions/352098/how-to-pretty-print-json-from-the-command-line)

是否有（unix）shell 脚本以人类可读的形式格式化 XML？

基本上，我希望它转换以下内容：

```
<root><foo a="b">lorem</foo><bar value="ipsum" /></root> 
```

...变成这样的东西：

```
<root>
    <foo a="b">lorem</foo>
    <bar value="ipsum" />
</root> 
```

* * *

## 回答 #1

> 赞同：1076
> 
> 时间：2013-04-18T18:51:29.917

**`xmllint`**

该实用程序附带[`libxml2-utils`](https://gitlab.gnome.org/GNOME/libxml2)：

```
echo '<root><foo a="b">lorem</foo><bar value="ipsum" /></root>' |
    xmllint --format - 
```

**Perl 的`XML::Twig`**

此命令附带[XML::Twig](https://metacpan.org/pod/XML::Twig) [perl](/questions/tagged/perl "显示标记为“perl”的问题")模块，有时`xml-twig-tools`打包：

```
echo '<root><foo a="b">lorem</foo><bar value="ipsum" /></root>' |
    xml_pp 
```

**`xmlstarlet`**

此命令附带[`xmlstarlet`](https://sourceforge.net/projects/xmlstar/)：

```
echo '<root><foo a="b">lorem</foo><bar value="ipsum" /></root>' |
    xmlstarlet format --indent-tab 
```

**`tidy`**

检查[`tidy`](https://github.com/htacg/tidy-html5)包装：

```
echo '<root><foo a="b">lorem</foo><bar value="ipsum" /></root>' |
    tidy -xml -i - 
```

**Python**

Python[`xml.dom.minidom`](https://docs.python.org/3/library/xml.dom.minidom.html)可以格式化 XML（也适用于旧版 python2）：

```
echo '<root><foo a="b">lorem</foo><bar value="ipsum" /></root>' |
    python -c 'import sys; import xml.dom.minidom; s=sys.stdin.read(); print(xml.dom.minidom.parseString(s).toprettyxml())' 
```

**`saxon-lint`**

你需要[`saxon-lint`](https://github.com/sputnick-dev/saxon-lint)：

```
echo '<root><foo a="b">lorem</foo><bar value="ipsum" /></root>' |
    saxon-lint --indent --xpath '/' - 
```

**`saxon-HE`**

你需要[`saxon-HE`](https://saxonica.plan.io/projects/saxon)：

```
 echo '<root><foo a="b">lorem</foo><bar value="ipsum" /></root>' |
    java -cp /usr/share/java/saxon/saxon9he.jar net.sf.saxon.Query \
    -s:- -qs:/ '!indent=yes' 
```

* * *

## 回答 #2

> 赞同：183
> 
> 时间：2013-11-15T15:34:53.020

`xmllint --format yourxmlfile.xml`

[xmllint](http://xmlsoft.org/xmllint.html)是一个命令行 XML 工具，包含在`libxml2`( [http://xmlsoft.org/](http://xmlsoft.org/) ) 中。

=================================================

*注意：如果您还没有`libxml2`安装，您可以通过执行以下操作来安装它：*

**中央操作系统**

```
cd /tmp
wget ftp://xmlsoft.org/libxml2/libxml2-2.8.0.tar.gz
tar xzf libxml2-2.8.0.tar.gz
cd libxml2-2.8.0/
./configure
make
sudo make install
cd 
```

**Ubuntu**

`sudo apt-get install libxml2-utils`

**赛格温**

`apt-cyg install libxml2`

**苹果系统**

要使用 Homebrew 在 MacOS 上安装它，只需执行以下操作： `brew install libxml2`

**吉特**

如果你想要代码，也可以在 Git 上找到： `git clone git://git.gnome.org/libxml2`

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2014-10-12T16:29:08.500

您也可以使用[tidy](http://www.w3.org/People/Raggett/tidy/)，它可能需要先安装（例如在 Ubuntu 上： sudo `apt-get install tidy`）。

为此，您将发出如下内容：

```
tidy -xml -i your-file.xml > output.xml 
```

注意：有许多额外的可读性标志，但自动换行行为有点烦人（[http://tidy.sourceforge.net/docs/quickref.html](http://tidy.sourceforge.net/docs/quickref.html)）。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2019-05-09T20:12:35.320

### 无需在 macOS / 大多数 Unix 上安装任何东西。

采用`tidy`

`cat filename.xml | tidy -xml -iq`

使用 cat 重定向查看文件以整齐指定 xml 的文件类型并在安静输出时缩进将抑制错误输出。JSON 也适用于`-json`.

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-04-18T19:09:58.267

您没有提到文件，所以我假设您想在命令行上提供 XML 字符串作为标准输入。在这种情况下，请执行以下操作：

```
$ echo '<root><foo a="b">lorem</foo><bar value="ipsum" /></root>' | xmllint --format - 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2018-05-28T20:18:09.667

[xmllint 支持就地格式化](https://mail.gnome.org/archives/xml/2010-August/msg00005.html)：

```
for f in *.xml; do xmllint -o $f --format $f; done 
```

正如 Daniel Veillard 所写：

> 我认为 `xmllint -o tst.xml --format tst.xml` 应该是安全的，因为解析器会在打开输出以对其进行序列化之前将输入完全加载到树中。

缩进级别`XMLLINT_INDENT`由默认为 2 个空格的环境变量控制。示例如何将缩进更改为 4 个空格：

```
XMLLINT_INDENT='    '  xmllint -o out.xml --format in.xml 
```

`--recover`当您的 XML 文档损坏时，您可能缺少选项。或者尝试使用严格的 XML 输出的弱 HTML 解析器：

```
xmllint --html --xmlout <in.xml >out.xml 
```

`--nsclean`, `--nonet`,`--nocdata`等`--noblanks`可能有用。阅读手册页。

```
apt-get install libxml2-utils
apt-cyg install libxml2
brew install libxml2 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-03-16T06:31:46.853

我花了很长时间才找到可以在我的 Mac 上运行的东西。这对我有用：

```
brew install xmlformat
cat unformatted.html | xmlformat 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-12-10T12:39:13.103

这种简单的（st）解决方案不提供压痕，但在人眼上却容易得多。它还允许通过简单的工具（如 grep、head、awk 等）更轻松地处理 xml。

用于`sed`将 '<' 替换为自身，前面带有换行符。

正如 Gilles 所提到的，在生产中使用它可能不是一个好主意。

```
# check you are getting more than one line out
sed 's/</\n</g' sample.xml | wc -l

# check the output looks generally ok
sed 's/</\n</g' sample.xml | head

# capture the pretty xml in a different file
sed 's/</\n</g' sample.xml > prettySample.xml 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-06T17:10:40.417

**编辑：**

**免责声明：**您通常应该更喜欢安装像`xmllint`这样的工作这样的成熟工具。XML/HTML 可能是一个可怕的残缺不全的混乱。但是，在某些情况下，使用现有工具比手动安装新工具更可取，并且可以肯定的是，XML 的源代码是有效的（足够了）。我已经为其中一种情况编写了此脚本，但它们很少见，因此请谨慎行事。

* * *

我想添加一个纯 Bash 解决方案，因为手动完成并不难，有时您不想安装额外的工具来完成这项工作。

```
#!/bin/bash

declare -i currentIndent=0
declare -i nextIncrement=0
while read -r line ; do
  currentIndent+=$nextIncrement
  nextIncrement=0
  if [[ "$line" == "</"* ]]; then # line contains a closer, just decrease the indent
    currentIndent+=-1
  else
    dirtyStartTag="${line%%>*}"
    dirtyTagName="${dirtyStartTag%% *}"
    tagName="${dirtyTagName//</}"
    # increase indent unless line contains closing tag or closes itself
    if [[ ! "$line" =~ "</$tagName>" && ! "$line" == *"/>"  ]]; then
      nextIncrement+=1
    fi
  fi

  # print with indent
  printf "%*s%s" $(( $currentIndent * 2 )) # print spaces for the indent count
  echo $line
done <<< "$(cat - | sed 's/></>\n</g')" # separate >< with a newline 
```

将其粘贴到脚本文件中，然后通过管道输入 xml。这假设 xml 都在一行上，并且任何地方都没有多余的空格。人们可以很容易地在正则表达式中添加一些额外`\s*`的内容来解决这个问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-22T11:16:32.640

我会：

```
nicholas@mordor:~/flwor$ 
nicholas@mordor:~/flwor$ cat ugly.xml 

<root><foo a="b">lorem</foo><bar value="ipsum" /></root>

nicholas@mordor:~/flwor$ 
nicholas@mordor:~/flwor$ basex
BaseX 9.0.1 [Standalone]
Try 'help' to get more information.
> 
> create database pretty
Database 'pretty' created in 231.32 ms.
> 
> open pretty
Database 'pretty' was opened in 0.05 ms.
> 
> set parser xml
PARSER: xml
> 
> add ugly.xml
Resource(s) added in 161.88 ms.
> 
> xquery .
<root>
  <foo a="b">lorem</foo>
  <bar value="ipsum"/>
</root>
Query executed in 179.04 ms.
> 
> exit
Have fun.
nicholas@mordor:~/flwor$ 
```

如果只是因为它“在”一个数据库中，而不是“只是”一个文件。在我看来，更容易使用。

相信其他人已经解决了这个问题。如果您愿意，毫无疑问`eXist`甚至可能在格式化方面“更好” `xml`，或者一样好。

当然，您始终可以以各种不同的方式查询数据。我尽量保持简单。您也可以只使用 GUI，但您指定了控制台。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-28T16:11:28.207

使用[xidel](/questions/tagged/xidel "显示标记为“xidel”的问题")：

```
xidel -s input.xml -se . --output-node-format=xml --output-node-indent
<root>
  <foo a="b">lorem</foo>
  <bar value="ipsum"/>
</root> 
```

或者`file:write("output.xml",.,{"indent":true()})`保存到文件。

# java - 根据附加值获取枚举？

> ID：16090870
> 
> 赞同：0
> 
> 时间：2013-04-18T18:50:10.037
> 
> 标签：java, enums

我有一个这样定义的枚举：

```
private static enum COLOR {
    BLACK(Color.BLACK,"Black"),
    GREEN(Color.GREEN,"Green");

    private Color color;
    private String name;

    COLOR(String n, Color c) {
        this.name = n;
        this.color = c;
    } 
```

我试图找到一种基于*字符串*（这是第二个附加参数）获取枚举常量的方法。因此，对于一个完全假设的示例，Id 执行类似的操作

```
COLOR.getEnumFromString("Green") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:53:36.160

```
 public static COLOR getEnumFromString(final String value) {
        if (value == null) {
            throw new IllegalArgumentException();
        }

        for (COLOR v : values()) {
            if (value.equalsIgnoreCase(v.getValue())) {
                return v;
            }
        }

        throw new IllegalArgumentException();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:55:06.427

维护`Map<String, COLOR>`并检查您的地图`getEnumFromString`。我推荐如下内容：

```
 public enum COLOR{
       ....

       private static class MapWrapper{
           private static final Map<String, COLOR> myMap = new HashMap<String, COLOR>();
       }

      private COLOR(String value){
          MapWrapper.myMap.put(value, this);
      }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T19:10:53.377

您需要在枚举声明上使用类似于以下内容的方法：

```
private static enum COLOR {

    BLACK(Color.BLACK, "Black"),
    GREEN(Color.GREEN, "Green");

    private Color color;
    private String name;

    COLOR(Color c, String n) {
        this.name = n;
        this.color = c;
    }

    public static COLOR convertToEnum(String value) {
         for (COLOR v : values()) {
             if (value.equalsIgnoreCase(v.name)) {
                 return v;
             }
         }
         return null;
    }
} 
```

# actionscript-3 - Actionscript - 获取两个对象之间的差异

> ID：16090872
> 
> 赞同：0
> 
> 时间：2013-04-18T18:50:11.703
> 
> 标签：actionscript-3, actionscript

是否有一个内置函数两个比较两个对象并给我一个不同的对象？我也希望使用具有差异的结果对象并将其应用于对象。[是否有内置的方法可以在动作脚本中做到这一点，或者我是否像这样https://stackoverflow.com/a/1200865/37759](https://stackoverflow.com/a/1200865/37759)推出自己的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:13:22.357

没有内置的方法可以做到这一点，只有自己的功能。

我建议这段代码：

```
public static function diff(obj1:Object, obj2:Object):Object
{
    if(!obj1 || !obj2)
        return null;

    var diffObj:Object = {};
    for(var key:String in obj1)
    {
        if(key in obj2)
        {
            diffObj[key] = obj1[key] - obj2[key];
        }
    }

    return diffObj;
}

diff({prop1:1, prop2:2}, {prop2:2, prop1:3}) 
//output:
[object Object]:
    prop2:int = 0
    prop1:int = -2 
```

# php - 价格低-高/高-低过滤PHP/Mysql

> ID：16090874
> 
> 赞同：0
> 
> 时间：2013-04-18T18:50:19.363
> 
> 标签：php, html, mysql, filter

我正在寻找一种方法来创建基于价格选择我的产品的过滤器（选择下拉菜单）。

我知道使用这样的查询完全有可能：

```
SELECT * FROM products ORDER BY price ASC 
SELECT * FROM products ORDER BY price DESC 
```

但问题是我不想将GETS 传递给url 来选择查询。

是否可以执行 jquery 命令来填充结果？

这是我的选择：

```
<select name="filter">
<option value="lowHigh">Price: low - High</option>
<option value="highLow">Price: High - Low</option>
</select> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:55:17.510

如果我理解正确，当下拉更改不使用获取参数时，您需要在表格或页面中的某处填充数据。

如果是这样，你需要一些叫做**ajax**的东西。由于您提到了**JQuery**，因此 jquery 中内置了**ajax**功能。

```
$.ajax({
   type: 'post',
   url: URL_TO_YOUR_PHP_SCRIPT,
   data: {
      priceFilter: $('#filter').val()
   },
   dataType: 'json',
   success: function(result) {
      if (result) {
         $.each(result, function(i, item) {
            $('#your_table').append('<tr><td>'+item+'</td></tr>');
         }
      }
   }
}); 
```

你的 php 脚本：

```
$pricefilter = $_POST['priceFilter']; //assuming you testing if its set
$pricefilter = $pricefilter == 'lowHigh' ? 'ASC' : 'DESC';

$query = "SELECT * FROM products ORDER BY price $pricefilter";
$data = $query->fetchAll(); 
//Or whatever you are using MySQL or PDO (please dont use MySQL_* functions)

echo json_encode($data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:56:45.387

我认为没有理由不通过 GET 传递这种查询。仍然不可能注入/XSS，因为只有两个选项，用户无法添加他/她自己的信息。这正是 eBay、亚马逊等网站所做的。只需按照其他响应者的建议定义一个 get 变量。它非常安全，我推荐它。如果您希望使用它来避免用户刷新，请使用 ajax - 默认情况下在 jQuery 中实现。

来自一个 html：

```
<select id="filter">
<option value="lowHigh">Price: low - High</option>
<option value="highLow">Price: High - Low</option>
</select> 
```

使用 jQuery：

```
$("#filter").change(function() {
    //Whatever ajax you wish to use
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T19:24:36.997

感谢你们的帮助，我成功地完成了我的剧本！**（特别感谢 FunKy）**。
看着这段 javascript，我完全理解它现在是如何工作的。谢谢你的课！
这是最终脚本：

```
$("#filter").change(function() {
//Whatever ajax you wish to use
location.href = URL + 'index.php?action=over-ons&filter=' + $("#filter option:selected").val();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T18:56:04.573

jQuery 脚本仍然需要向服务器端脚本传递一些东西来执行`SELECT`. 没有什么可以阻止您执行以下操作：

```
<?php

$sort_dir = (isset($_GET['sort']) && $_GET['sort'] == 'desc') ? 'desc' : 'asc';

$sql = "SELECT * FROM products ORDER BY price $sort_dir"; 
```

# web-analytics - 如何跟踪向用户显示哪些搜索结果

> ID：16090875
> 
> 赞同：1
> 
> 时间：2013-04-18T18:50:22.923
> 
> 标签：web-analytics, adobe-analytics

客户希望在用户搜索商店位置后进行跟踪，向用户显示哪些商店。这是omniture可以追踪的吗？在客户的网站上，填写邮政编码并点击“搜索商店”后，页面 URL 没有改变。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:35:31.253

是的，您可以跟踪这一点，即使页面没有重新加载（听起来像是为搜索完成了 ajax 调用）。

但是，跟踪向访问者展示了哪些商店可能不是一件实用的事情，除非您只有几家商店……如果您有几十家或数百家等，那么就没有实用的方法来跟踪它，而且客户还应该重新考虑他们为什么要首先跟踪它。

要跟踪的更可行和可操作的事情只是用户执行了搜索事件本身，甚至可能是用户输入的邮政编码。

无论如何，要在页面加载后跟踪某些内容，您需要弹出以下内容：

`s.linkTrackVars`：您要跟踪的任何变量都必须在 linkTrackVars 中“注册”。这将确保以前在页面加载时设置的其他变量也不会发送到 Omniture 并被过度计算。你不使用's'。列表中的前缀，逗号之间没有空格，并且变量区分大小写。放置您打算为调用填充的任何变量。如果你想跟踪一个事件（你应该），'events' 也应该在这里（实际的变量名称，而不是事件编号）。

`s.linkTrackEvents`：您要跟踪的任何事件都需要添加到此变量中以注册事件。基本上这应该与您使用的值相同`s.events`

*还要填充您要在调用中跟踪的任何变量。*

`s.tl(true,'o','store location search')`：这是 Omniture 点击跟踪方法。它需要 3 个参数。第一个用于如果您正在跟踪链接，您应该传递链接的对象引用，但由于您没有在此处执行此操作，您可以只传递`true`. 第二个参数指定跟踪的类型。您可以为下载执行“d”，为退出执行“e”，或为其他执行“o”。第三个参数是跟踪调用的描述。我只是把'商店位置搜索'放在那里，你可以放任何你想要的东西。但这并不重要，因为该值会显示在链接跟踪报告中，而这些报告无论如何都是无用的；您将查看您的变量和事件报告。

**这是一个组合在一起的示例：**

*在此示例中，我使用 eVar1 来跟踪输入的邮政编码，并使用 event1 来跟踪搜索事件。*

```
s.linkTrackVars = 'events,eVar1';
s.linkTrackEvents = 'event1';
s.events = 'event1';
s.eVar1 = '12345';
s.tl(true,'o','store location search'); 
```

通过此示例，您将能够通过查看 event1 指标来查看执行了多少商店位置搜索。您还可以从 eVar1 报告中查看搜索中使用了哪些邮政编码。

# javascript - jQuery 使另一个脚本发生故障

> ID：16090877
> 
> 赞同：0
> 
> 时间：2013-04-18T18:50:40.267
> 
> 标签：javascript, jquery

我试图建立一个支持无线电的搜索框，通过一点搜索，我找到了我要找的东西。我试图让按钮看起来像切换，所以我遇到了[这个](http://jsfiddle.net/yijiang/Zgh24/1/)！我喜欢它。这就是我要找的。但是，一旦我添加了 jQuery，整个搜索就不再起作用了。老实说，我不知道为什么。这是带有 jQ​​uery 的 HTML：

```
<html>
<head>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js' type='text/javascript'/>
<script type="text/javascript">
function dosearch() {
  var sf=document.searchform;
  for (i=sf.sengines.length-1; i > -1; i--) {
    if (sf.sengines[i].checked) {
      var submitto = sf.sengines[i].value + escape(sf.searchterms.value);
    }
  }
  window.location.href = submitto;
  return false;
}
</script>
<script type="text/javascript">
$('#sites input:radio').addClass('input_hidden');
$('#sites label').click(function() {
    $(this).addClass('selected').siblings().removeClass('selected');
})
</script>
<style>
.input_hidden {
    position: absolute;
    left: -9999px;
}
.selected {
    background-color: #ccc;
}
#sites label {
    display: inline-block;
    cursor: pointer;
}
#sites label:hover {
    background-color: #efefef;
}
#sites label img {
    padding: 3px;

}
</style>
</head>
<body>
<div id="sites">
<form name="searchform" onSubmit="return dosearch();">
<input id='first' name="sengines" type="radio" checked='checked' value="http://myurl.com/search?q="/><label for="first"><img src="http://sstatic.net/serverfault/img/favicon.ico" alt="Server Fault" /></label>
<input id='req' name="sengines" type="radio" value="http://www.myotherurl.com/search?q="/><label for="req"><img src="http://sstatic.net/superuser/img/favicon.ico" alt="Super User" /></label>
<input type="text" name="searchterms"/>
</form></div>
</body>
</html> 
```

删除 jQuery，该功能将起作用。jQuery 很关键，我不能只从代码中删除它。原始网页的其他部分大量使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:01:41.920

您按原样复制+粘贴小提琴中的代码。但是由于将分开的 HTML、JS 和 CSS 部分放在一起，您错过了一个重要部分：实际实例化要在 DOM 完全加载时执行的 jQuery 部分。

在小提琴中，[最终的源代码](http://fiddle.jshell.net/yijiang/Zgh24/1/show/)为您提供：

```
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$('#sites input:radio').addClass('input_hidden');
$('#sites label').click(function() {
    $(this).addClass('selected').siblings().removeClass('selected');
});
});//]]>    
</script> 
```

**更新**：此外，在包含 jQuery 时，您没有正确关闭脚本标记。这破坏了 jQuery 包含后脚本标记中代码的功能。

这`<script src="jquery.js"/>`应该读`<script src="jquery.js"></script>`

这是一个完整的工作版本：

```
<!doctype html>
<html>
<head>
  <style>
    .input_hidden {position: absolute; left: -9999px;}
    .selected {background-color: #ccc;}
    #sites label {display: inline-block; cursor: pointer;}
    #sites label:hover {background-color: #efefef;}
    #sites label img {padding: 3px;}
  </style>
</head>
<body>
  <div id="sites">
    <form name="searchform" id="s">
      <input id='first' name="sengines" type="radio" checked='checked' value="http://myurl.com/search?q=">
      <label for="first" class="selected"><img src="//sstatic.net/serverfault/img/favicon.ico" alt="Server Fault"></label>
      <input id='req' name="sengines" type="radio" value="http://www.myotherurl.com/search?q=">
      <label for="req"><img src="//sstatic.net/superuser/img/favicon.ico" alt="Super User"></label>
      <input type="text" name="searchterms" id="searchterms">
    </form>
  </div>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script>
  $().ready(function() {
    $('#sites input:radio').addClass('input_hidden');
    $('#sites label').click(function() {
      $(this).addClass('selected').siblings().removeClass('selected');
    });
    $('#s').submit(function(e) {
      e.preventDefault();
      window.location.href = $(this).find(':checked').val() + $('#searchterms').val();
      return !0;
    });
  });
  </script>
</body>
</html> 
```

# javascript - JSON Stringify 后无法使用 parseFloat

> ID：16090878
> 
> 赞同：0
> 
> 时间：2013-04-18T18:50:40.943
> 
> 标签：javascript, json, stringify

我有一行代码说——

```
var latitude = JSON.stringify(place.lat); 
```

当我做警报（纬度）时——它给了我输出“33.232342”。但我想要这个数字，所以当我这样做的时候

```
var latitude = parseFloat(JSON.stringify(place.lat)); 
```

我得到了 NaN。有人可以告诉我可能是什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:54:48.630

你`place.lat`的已经是`string`. 这样做`JSON.stringify()`使`""33.232342""`.
只是：

```
parseFloat(place.lat); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:54:42.363

`JSON.stringify`将原语转换为字符串，因此：

```
JSON.stringify(5.1) 
```

返回 5 个字符的字符串

```
"5.1" 
```

将这样的值传递到`parseFloat`结果中`NaN`。**只需不要`JSON.stringify`value**，您的代码应该可以正常工作。

值得注意的是，[JSON 规范](https://www.ietf.org/rfc/rfc4627.txt)只允许对象和数组作为 JSON 表示中的顶级元素，因此“JSON-ify”原始数字不符合规范（但您的浏览器无论如何都会这样做）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:54:45.490

问题是 place.lat 是一个字符串，所以当你对它进行字符串化时，你会得到一个带引号的字符串。

这与使用相同的结果

```
parseFloat(JSON.stringify("3.5")) 
```

那是

```
NaN 
```

一个解决方案是直接解析 place.lat ：`parseFloat(place.lat)`

如果你想解析一个带引号的字符串中的数字，你也可以这样做

```
parseFloat(str.slice(1,-1)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T18:54:49.943

问题根源在这里：

`JSON.stringify(place.lat)`return `"' 20.0120132312'"`，其中有一个前导`'`。只需使用：

```
parseFloat(place.lat); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T18:55:07.867

`JSON.stringify`如果它已经是一个对象，你为什么要ing 它？

做吧`parseFloat(place.lat)`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T18:56:25.683

您必须调用：

```
parseFloat(JSON.parse(latitude)) 
```

# c# - 使用 ADPlus 调试消失的 .NET 应用程序，得到 CONTRL_C_OR_Debug_Break 异常

> ID：16090882
> 
> 赞同：1
> 
> 时间：2013-04-18T18:50:52.097
> 
> 标签：c#, c++, .net, windbg, adplus

最近，我们遇到了一个 64 位 .NET 4.0 进程，其中一些非托管代码通过简单地消失而崩溃。没有事件查看器条目，没有 Windows 错误对话框，而且我们当前的日志记录和跟踪语句没有任何明显的迹象。代码库非常庞大，所以添加额外的跟踪语句肯定会很耗时。

我们有几个第三方 DLL 在使用中，但是我们可以访问我们需要的所有 PDB 文件。崩溃在一天中经常发生，但不是定期发生。我们的小组怀疑某些处理不当的多播流量可能是原因，但我们不能 100% 确定。

我们使用 ADPlus 在崩溃模式下调试进程：

```
adplus -crash -p <pid> -o c:\temp 
```

我们得到了一些非常奇怪的行为......崩溃发生时的最后一个小型转储是第一次机会“CONTRL_C_OR_Debug_Break异常”；我们肯定没有按“ctrl+C”。每次我们附加调试器时，我们都会在启动后 10 分钟到 2 小时内得到这个小型转储。没有第二次机会例外，也没有失控的内存或 CPU。

诚然，在 CDB/ADPlus/WinDbg 方面，我是个新手，但我至少知道一些 windbg/SOS 命令可以绕过一些故障转储；在这个小型转储上，我很难过。

我要以正确的方式诊断这个问题吗？我们还能做什么？

**更新**

在获得正确的 Windows Server 2008 符号文件后，这似乎是堆栈。寻找可能的堆损坏的最佳方法是什么？

```
0:039> k
  *** Stack trace for last set context - .thread/.cxr resets it
Child-SP          RetAddr           Call Site
00000000`2d06f4f0 00000000`77834736 ntdll!RtlReportCriticalFailure+0x2f
00000000`2d06f5c0 00000000`77835942 ntdll!RtlpReportHeapFailure+0x26
00000000`2d06f5f0 00000000`778375f4 ntdll!RtlpHeapHandleError+0x12
00000000`2d06f620 00000000`777ddc8f ntdll!RtlpLogHeapFailure+0xa4
00000000`2d06f650 00000000`7767307a ntdll! ?? ::FNODOBFM::`string'+0x10c54
00000000`2d06f6d0 00000000`72a88cc4 kernel32!HeapFree+0xa
00000000`2d06f700 00000000`6ea37ffb msvcr100!free+0x1c
00000000`2d06f730 00000000`eb692d6c jvm+0x187ffb
00000000`2d06f738 00000000`2d06f7a8 0xeb692d6c
00000000`2d06f740 00000000`00000000 0x2d06f7a8 
```

**更新 2**

事实证明，我们的应用程序 + 较新版本的 jdk 的组合确实破坏了堆。通过设置 gflags 捕获故障转储：

```
gflags -p /enable MyProcess.exe /full 
```

仍然不确定究竟是什么原因，但降级我们的 jvm 实际上暂时解决了这个问题。非常感谢 @MarcSherman 和 @SevaTitov 在评论中提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:47:00.920

这是我为找到堆损坏的根源所做的工作：

1.  [将 Windows 调试工具](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)安装为“独立”组件。
2.  [使用 gflags](http://msdn.microsoft.com/en-us/library/windows/hardware/ff549561%28v=vs.85%29.aspx)启用全堆验证：

    ```
    gflags -p /enable MyProcess.exe /full 
    ```

3.  使用 ADPlus 捕获生成的故障转储：

    ```
    adplus.exe -crash -o <outputdirectory> -p <PID> 
    ```

4.  在 WinDbg 中打开生成的故障转储并运行：

    ```
    !analyze -v 
    ```

感谢@MarcSherman 和@SevaTitov 的评论。

# git - 如何将更正的提交推送到远程存储库？

> ID：16090887
> 
> 赞同：2
> 
> 时间：2013-04-18T18:51:14.680
> 
> 标签：git

我意识到我设置`user.name`错了，所以我用[这个答案](https://stackoverflow.com/a/870367/1917313)来修复不正确的提交。在本地，它工作得很好。但是，git 现在告诉我

```
$ git status
# On branch master
# Your branch and 'origin/master' have diverged,
# and have 15 and 15 different commits each, respectively.
#   (use "git pull" to merge the remote branch into yours)
#
nothing to commit, working directory clean 
```

所以，现在我需要以某种方式将我的更改发送到我的 GitHub 存储库，但是当我推送时：

```
$ git push
WARNING: gnome-keyring:: couldn't connect to: /run/user/mspencer/keyring-uscL41/pkcs11: No such file or directory
Username for 'https://github.com': iBeliever
Password for 'https://iBeliever@github.com': 
To https://github.com/iBeliever/weather-desktop.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'https://github.com/iBeliever/weather-desktop.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

我不太确定如何解决这个问题。我之前处理过远程更改，并通过拉取和合并解决了它们，但我不确定在这种情况下该怎么做。我需要使用更正的名称更新我的 GitHub 存储库，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T18:56:09.990

史蒂文的回答是正确的，但非常危险。所以当你使用强制推动时要小心。

首先，`git push -f`将强制将所有本地分支推送到远程存储库。

要只推送主分支，您必须指定它。

```
git push -f origin master 
```

执行此操作时，您需要告诉所有其他有权访问此存储库的人在他们进行任何其他提交之前拉下您的更改。否则，分支将以您不想处理的疯狂方式发散。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:52:24.380

你 [可以强制](http://kernel.org/pub/software/scm/git/docs/git-push.html) 推送

```
git push -f 
```

更多信息

```
      -f，--强制
          通常，该命令拒绝更新不是
          用于覆盖它的本地 ref 的祖先。此标志禁用
          支票。这可能会导致远程存储库丢失提交；
          小心使用它。

```

# sql - sql server 2008 r2 中的“动态”where 语句

> ID：16090896
> 
> 赞同：0
> 
> 时间：2013-04-18T18:52:07.700
> 
> 标签：sql, datetime, sql-server-2008-r2, case

我需要`WHERE`根据 select 语句中的结果传递两个不同的语句。我的基本查询如下

```
SELECT table1.taskID, 
    table1.startTime, 
    table1.endTime, 
    table1.everyMinutes, 
    table3.dlid, 
    table3.run 
FROM table1
JOIN table2
    ON table1.taskID = table2.taskID
LEFT JOIN table3
    ON table1.taskID = table3.taskID
WHERE table2.active = '1'
ORDER BY taskID ASC 
```

我正在努力解决的是 if `table3.run = '1'`，那么我需要包括以下内容

```
CONVERT(DATE,GETDATE()) IN (SELECT dldate FROM table4 WHERE dlid = table3.dlid) 
```

如果`table3.run = '0'`我需要以下

```
CONVERT(DATE,GETDATE()) NOT IN (SELECT dldate FROM table4 WHERE dlid = table3.dlid) 
```

最后，如果 table3.run = 'NULL' 那么我不需要这些语句

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:58:41.973

尝试

```
SELECT table1.taskID, 
    table1.startTime, 
    table1.endTime, 
    table1.everyMinutes, 
    table3.dlid, 
    table3.run 
FROM table1
JOIN table2
     ON table1.taskID = table2.taskID
LEFT JOIN table3
    ON table1.taskID = table3.taskID
WHERE table2.active = '1'
    AND (
            (table3.run = '1' 
             and CONVERT(DATE,GETDATE()) 
             IN (SELECT dldate FROM table4 WHERE dlid = table3.dlid)) 

         or (table3.run = '0' 
             and CONVERT(DATE,GETDATE()) NOT IN 
            (SELECT dldate FROM table4 WHERE dlid = table3.dlid))

         or table3.run = 'NULL'   -- incredibly bad idea
         )
ORDER BY taskID ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:57:20.487

```
SELECT table1.taskID, 
    table1.startTime, 
    table1.endTime, 
    table1.everyMinutes, 
    table3.dlid, 
    table3.run 
FROM table1
JOIN table2
     ON table1.taskID = table2.taskID
LEFT JOIN table3
    ON table1.taskID = table3.taskID
WHERE table2.active = '1' AND ( table3.run = 'NULL' or
  case when CONVERT(DATE,GETDATE()) IN (SELECT dldate FROM table4 WHERE dlid = table3.dlid) then '1'
    else '0'
    end = table3.run )
ORDER BY taskID ASC 
```

# ruby - 在 Ruby mixins 中正确管理上下文

> ID：16090898
> 
> 赞同：0
> 
> 时间：2013-04-18T18:52:12.213
> 
> 标签：ruby

这里一定有一些简单的东西，但我错过了。

我有一个名为基因分型的模块，有一个名为基因型的类：

```
module Genotyping

  class Genotype 
```

我有一个单元测试类，我正在尝试使用该模块进行一些工作：

```
require "test/unit"
require "../genotyping.rb"

include Genotyping

class TestGenotyping < Test::Unit::TestCase

  def test_genotype
    geno = Genotyping::Genotype.new 
```

我在运行单元测试文件时得到的是：

```
 2) Error:
test_genotype(TestGenotyping):
NameError: uninitialized constant Genotyping::Genotype 
```

如果我删除 Genotyping:: 限定符，我自然会得到：

```
 1) Error:
test_breeding_scenario(TestGenotyping):
NameError: uninitialized constant TestGenotyping::Genotype 
```

我仔细环顾四周，不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:51:59.710

找到了。其中一个模块类没有正确关闭，导致范围出现各种问题。

基本上是一个错字，虽然很难发现。谢谢大家。

# javascript - JQuery 和 Cookie：当用户离开页面或退出窗口/选项卡时如何删除它们

> ID：16090899
> 
> 赞同：3
> 
> 时间：2013-04-18T18:52:12.403
> 
> 标签：javascript, jquery, html, cookies

我正在学习在 [https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

上使用这个 JQuery cookie 插件 根据我的阅读，阅读和删除 cookie 真的很容易。我的问题是：我希望在用户离开页面或关闭窗口/选项卡时删除 cookie，我该怎么做？如何检测此类活动？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T18:57:34.993

```
$(window).on('beforeunload', function () {
    // Remove the cookie
    $.cookie("name_of_cookie", null);
}); 
```

**此外，我们还有另一种选择：**

```
$(window).unload(function () {
    // Remove the cookie
    $.cookie("name_of_cookie", null);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-14T22:11:47.170

对已接受答案的更新将是：

```
Cookies.remove('name'); 
```

与：[https ://github.com/js-cookie/js-cookie](https://github.com/js-cookie/js-cookie)

不再维护 jQuery 插件。

# c# - 在传递给本机 dll 的 ac# 回调中访问托管对象

> ID：16090911
> 
> 赞同：2
> 
> 时间：2013-04-18T18:52:35.373
> 
> 标签：c#, delphi, pinvoke

我正在尝试将 C# 回调函数传递给本机 dll。它工作正常，但我找不到访问回调方法的父对象的方法。这是一个演示我想要做什么的代码：

```
class MyForm: Form {
  public delegate void CallbackDelegate(IntPtr thisPtr);

  [DllImport("mylib.dll", CallingConvention = CallingConvention.StdCall)]
  public static extern void Test(CallbackDelegate callback);

  int Field;

  static void Callback(IntPtr thisPtr)
  {
      // I need to reference class field Field here.
      MyForm thisObject = ?MagicMethod?(thisPtr);

      thisObject.Field = 10;
  }

  void CallExternalMethod()
  {
      Test(Callback);
  }
} 
```

我尝试获取指针，`this`但出现以下异常：“对象包含非原始或非 blittable 数据。”。我可能应该提到父对象是一个 WindowsForms 表单。

**更新**

该dll是用Delphi编写的，Test函数的签名如下：

```
type
  TCallback = procedure of object; stdcall;

procedure Test(Callback: TCallback); stdcall; 
```

当我尝试使用以下代码获取指向类的指针时收到上述错误消息：

```
var ptr = GCHandle.Alloc(this, GCHandleType.Pinned).AddrOfPinnedObject(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T22:25:46.197

你想多了。C# 编组将围绕您的委托创建一个 thunk。您不得尝试这样做。

在 Delphi 端这样写：

```
type
  TCallback = procedure; stdcall; 
```

只需删除`of object`.

在 C# 方面，您的代表是：

```
public delegate void CallbackDelegate(); 
```

您用于委托的方法如下所示：

```
void Callback()
{
    // an instance method, so *this* is available
} 
```

然后你像这样调用本机代码：

```
void CallExternalMethod()
{
    Test(Callback);
} 
```

所以，让我们把它们放在一起。在德尔福方面，您可以编写：

```
library MyLib;

type
  TCallback = procedure; stdcall;

procedure Test(Callback: TCallback); stdcall;
begin
  Callback;
end;

exports
  Test;

begin
end. 
```

在 C# 方面：

```
class MyForm: Form {
    public delegate void CallbackDelegate();

    [DllImport("mylib.dll")]
    public static extern void Test(CallbackDelegate callback);

    int Field;

    static void Callback()
    {
        Field = 10;
    }

    void CallExternalMethod()
    {
        Field = 0;
        Test(Callback);
        Debug.Assert(Field == 10);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:03:47.217

您应该使用`System.Runtime.InteropServices.GCHandle`该类，[它的 MSDN 文档有示例](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.gchandle.fromintptr.aspx?cs-lang=csharp#code-snippet-2)。它涉及使用其静态方法在 C# 引用和非托管值之间进行转换。

我没有快速检查的方法，但这样的事情应该可以工作：

```
static void Callback(IntPtr thisPtr)
{
    MyForm thisObject = (MyForm)GCHandle.FromIntPtr(thisPtr).Target;

    thisObject.Field = 10;
} 
```

`IntPtr`应该像这样获得：

```
IntPtr thisPtr = GCHandle.ToIntPtr(GCHandle.Alloc(thisObject))); 
```

**PS：**请注意，在某些时候，您必须在被调用者或调用者中释放句柄。

# javascript - 使用 Miso Dataset 或其他 JS 库查询 Google 电子表格？

> ID：16090916
> 
> 赞同：0
> 
> 时间：2013-04-18T18:52:59.063
> 
> 标签：javascript, google-sheets, google-spreadsheet-api, miso.dataset

我想使用谷歌电子表格作为一个简单的数据库。

我可以使用 Miso Dataset 或其他 JavaScript 库查询特定单元格吗？我见过 Tabletop.js 但我无法让查询部分工作。（它获取完整的工作表或什么都没有......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:09:03.407

我知道这个人在这里为谷歌电子表格创建了 js 库：[https ://github.com/mikeymckay/google-spreadsheet-javascript](https://github.com/mikeymckay/google-spreadsheet-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T05:11:43.950

您可以使用标准 API 来获取某些单元格： [Google 电子表格 API - 使用基于单元格的提要](https://developers.google.com/google-apps/spreadsheets/#working_with_cell-based_feeds)。确保单击 Javascript 版本的“协议”选项卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:14:44.463

CSV：

如果您可以公开电子表格，这将起作用：

[jquery 谷歌电子表格 csv](https://stackoverflow.com/questions/10264172/jquery-google-spreadsheet-csv)

如果需要登录，我认为有一种方法可以进行基于 Web 的 OAuth，但从未使用过。

# c++ - 从 Microsoft 的注册表项中卸载程序，这个数字是多少，它会改变吗？

> ID：16090917
> 
> 赞同：0
> 
> 时间：2013-04-18T18:52:59.590
> 
> 标签：c++, windows, registry

我目前正在尝试并成功地以编程方式从其注册表项中卸载程序

```
SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall 
```

此键的子键是实际的程序条目

```
\\{71F397B4-D4DA-4592-861C-C90816A0D26D} 
```

现在，它下面有一些值，即我找到并使用命令行调用的“ModifyPath”，以从我的程序中启动卸载程序。

我的问题是，该子项名称是如何确定的？它是否从一个版本更改为另一个版本（该键下有一个版本值，我认为他们只是更新它而不是获得一个新数字）？它的名称/术语是什么？

我想确定如果另一个版本出来，我也可以通过编程方式卸载它。还是我必须阅读下的每个子项

```
SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall 
```

并搜索每个“DisplayName”值以尝试找到我要卸载的程序的名称。（这似乎很乏味，我不想这样做，如果这个数字没有改变的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:21:27.233

键值是可由任意数量的工具生成的 GUID（文件->工具->创建 GUID）。它通常由创建安装程序的人生成，通常不会更改。它可以更改的原因有很多，例如发布一个新的主要版本并允许它与旧版本一起安装。

如果您提前知道 GUID，您可以做出合理的假设，即它不会改变（至少在新的主要版本之前），您可以将其用作搜索谓词。

# ruby-on-rails - 在路由之间重置 Sinatra cookie

> ID：16090918
> 
> 赞同：0
> 
> 时间：2013-04-18T18:53:01.500
> 
> 标签：ruby-on-rails, ruby, sinatra

所以我试图通过路由之间的cookie传递一些字符串，但它们不断被重置并且它们不会被传递。这是我的代码：

```
post '/start_game' do
  @game = TicTacToe::Game.new
  cookies[:board] = @game.board.slots
  redirect '/game'
end

post '/game' do
  @slots = cookies[:board]
end 
```

我也尝试过 request.cookies[:board]，甚至使用引号而不是符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:03:53.990

I think this is because you are setting a cookie on one path and reading it on a different one. `/start_game` is considered to be a different part of your site to `/game` from a cookie point of view. You can solve this problem by setting the cookie at the `/` level:

```
response.set_cookie(:board, { :path => '/' }) 
```

You should not need to change the way that you read it back (because any other path is a sub-path of `/`).

# android - 检测 Android Activity 数据变化

> ID：16090919
> 
> 赞同：0
> 
> 时间：2013-04-18T18:53:01.667
> 
> 标签：android, android-activity

是否有内置方法来检测用户在 Android 中的 Activity 上所做的任何数据更改？

当用户打开活动但没有更改任何内容但点击“保存”按钮时，我想阻止保存并同步到服务器。

提前谢谢你的帮助，

文西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:55:19.117

您可以在代码中维护布尔值，以检查是否在活动中的任何位置发生了触摸或单击等操作，然后在单击保存按钮时，您可以比较这些布尔值并决定是否上传。

# java - 新的 Cassandra 项目 - Astyanax 还是 Java 驱动程序？

> ID：16090921
> 
> 赞同：16
> 
> 时间：2013-04-18T18:53:03.437
> 
> 标签：java, cassandra, astyanax, datastax-java-driver

我正在使用 Cassandra 开始一个新项目（并计划使用最新的稳定 (1.2.x) 版本）。我尝试了几个不同的 Java 库，比如[Hector](http://hector-client.github.io/hector/build/html/index.html)、[Astyanax](http://techblog.netflix.com/2012/01/announcing-astyanax.html)、Cassandra-jdbc...

其中，（简而言之）我的选择是Astyanax。但后来我也找到并尝试了 DataStax 的 Java 驱动程序，它支持新的 CQL 二进制协议，如果你只使用 CQL 会更干净。看来 1.0.0 GA 版本即将发布。

你会推荐哪一个？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-18T23:51:51.543

我建议您使用基于 cql3 的驱动程序。一些选择是[JDBC 驱动程序](http://code.google.com/a/apache-extras.org/p/cassandra-jdbc/)，甚至更好的支持异步连接[的 Datastax 驱动程序。](https://github.com/datastax/java-driver)您可能必须自己构建 datastax 的驱动程序，但这可以使用 maven 轻松完成。

Thrift 不会在 Cassandra 中获得任何新功能，它是为了向后可比性而保留的，并且大多数 C* 社区成员建议在新项目中使用基于 cql 的驱动程序：

> 如上所述，我们认为对于 Cassandra，CQL3 是一个比 thrift API 更简单且整体更好的 API。因此，鼓励新项目/应用程序使用 CQL3
> 
> **-[来源](http://www.datastax.com/dev/blog/thrift-to-cql3#introduction)**

CQL 的性能也正在迅速提高。以下是一些过时的[基准。](https://issues.apache.org/jira/browse/CASSANDRA-3634)
**更新**

由于编写了答案，因此为驱动程序创建了一个[maven 中央存储库](http://mvnrepository.com/artifact/com.datastax.cassandra/cassandra-driver-parent/)，所以现在要使用它只需将依赖项添加到 maven：

```
<dependency>
    <groupId>com.datastax.cassandra</groupId>
    <artifactId>cassandra-driver-parent</artifactId>
    <version>1.0.0</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-19T06:33:49.540

我个人使用过 Hector、Astyanax、Pelops、Fluent Cassandra、Datastax 的 Driver 和 Pycassa，在使用了这么多 API 之后，我终于意识到 Astyanax 最适合我（这是我个人的考虑）。

我在 astyanax 中发现的将其与联盟中其他人区分开来的功能是

*   API 的易用性
*   复合柱支撑
*   连接池
*   潜伏
*   文档
*   更新

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-21T18:54:36.663

我用过Astyanax。只要您编写的代码比 CQL 多 5 倍，它就有很好的文档且易于使用。

现在我正在使用 CQL，因为与我共事过的人还没有完全掌握 Astyanax 代码 - 为什么他们必须为列名编写类。我认为如果您不使用 Astyanax 或 Hector，您将永远无法正确理解 Cassandra 的内部结构。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-24T20:34:30.870

对于刚刚开始的新项目，您绝对应该使用新的[DataStax Java 驱动程序](https://github.com/datastax/java-driver)和 Cassandra 1.2。驱动程序刚刚发布 GA，随着您开发新项目，驱动程序和 Cassandra 1.2 只会在接下来的几个月内变得更加稳定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-22T07:36:51.310

我同意赞森/瓦尔奇库的观点。[DataStax Java 驱动程序](http://docs.datastax.com/en/developer/java-driver/2.2/java-driver/whatsNew2.html)是未来。用 SQL 操作 Cassandra 非常方便。同时，我也推荐[CassandraExecutor ，一个](https://cdn.rawgit.com/landawn/AbacusUtil/master/docs/CassandraExecutor_view.html)[DataStax Java Driver](http://docs.datastax.com/en/developer/java-driver/2.2/java-driver/whatsNew2.html)的简单包装器。与 Java Driver 相比，CassandraExecutor 具有以下特点：

*   具有 SQL/实体的（同步/异步）操作 (CRUD) 的一致/集成/简洁 API。
*   [DataSet](https://cdn.rawgit.com/landawn/AbacusUtil/master/docs/DataSet_view.html)，支持 distinct/merge/sort/groupBy/join/union/unionAll/except/intersect/paginate/filter/count/toJOSN/toXML/toCVS...

这是一个简单的 CRUD（创建/读取/更新/删除）示例：

```
Account account = createAccount();
// create
String sql_insert = NE.insert(ID, GUI, FIRST_NAME, LAST_NAME, LAST_UPDATE_TIME, CREATE_TIME).into(Account.class).sql();
cassandraExecutor.execute(sql_insert, account);

// read
String sql_selectByGUI = NE.select(ID, GUI, FIRST_NAME, LAST_NAME).from(Account._).where(L.eq(ID, L.QME)).sql();
Account dbAccount = cassandraExecutor.queryForEntity(Account.class, sql_selectByGUI, account);

// update
String sql_updateByLastName = NE.update(Account.class).set(FIRST_NAME).where(L.eq(ID, L.QME)).sql();

dbAccount.setFirstName("newFirstName");
cassandraExecutor.execute(sql_updateByLastName, dbAccount);

// delete
String sql_deleteByFirstName = NE.deleteFrom(Account.class).where(L.eq(ID, L.QME)).sql();
cassandraExecutor.execute(sql_deleteByFirstName, dbAccount); 
```

（声明：我是CassandraExecutor的开发者）

# android - 在PhoneGap上登录Facebook，没有任何反应

> ID：16090927
> 
> 赞同：4
> 
> 时间：2013-04-18T18:53:12.803
> 
> 标签：android, facebook, cordova, phonegap-plugins

**我想要达到的目标**

我正在尝试在 Android中运行[PhoneGap Facebook 插件中包含的示例应用程序。](https://github.com/phonegap/phonegap-facebook-plugin)

**问题**

单击“登录”后，会出现一个对话框，请求我的许可（[屏幕截图](http://i.imgur.com/tPSTo2m.png)），但单击“确定”后，它会返回主屏幕，但什么也没有发生。

**我尝试过的**

我在手机中安装了 Facebook APK，在 Eclipse 中安装了 Facebook SDK for Android，并将 SDK 链接到示例应用程序。我还使用用于导出应用程序的密钥库生成了我的密钥哈希，并将其添加到 Facebook 上的应用程序配置中。

我`com.facebook.LoginActivity`像这样将其添加到清单中：

```
<manifest>
...
<application android:icon="@drawable/icon" android:label="@string/app_name"
    android:hardwareAccelerated="true"
    android:debuggable="true">
    <activity android:name="TestaFB" android:label="@string/app_name"
            android:theme="@android:style/Theme.Black.NoTitleBar"
            android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name="com.facebook.LoginActivity"
          android:label="@string/app_name" />

</application>
</manifest> 
```

并添加了这样的插件，在`res/xml/config.xml`：

```
<cordova>
  <plugins>
      ...
      <plugin name="org.apache.cordova.facebook.Connect" value="org.apache.cordova.facebook.ConnectPlugin" />
  </plugins>
</cordova> 
```

我修改了`index.html`使用我正在使用的cordova版本（2.6.0）并将我`appId`的放在JS中：

```
 document.addEventListener('deviceready', function() {
      FB.init({
          appId: '361413583977115',
          nativeInterface: CDV.FB,
          useCachedDialogs: false
      });

      FB.getLoginStatus(handleStatusChange);
      authUser();
      updateAuthElements();
  }); 
```

我不知道我做错了什么。

但是，我发现如果我使用我的计算机授予该应用程序的权限，然后尝试使用该应用程序，它就可以工作。

# security - 保护我的 Web 应用程序免受恶意输入

> ID：16090928
> 
> 赞同：0
> 
> 时间：2013-04-18T18:53:18.637
> 
> 标签：security, xss

我正在为我的 Web 应用程序构建一个基本的安全层。我正在寻求对我正在采取的步骤的验证。当前的重点是 XSS，所以我在这篇文章中不涉及数据库。这是我到目前为止所做的：

1.  htmlspecialchars() 所有用户输入
2.  将某些关键字列入黑名单 {"","","text/javascript"} ：我正在使用 preg_replace 将这些单词替换为 ""。
3.  输出转义所有动态内容。

所有这些似乎都是一个非常微不足道的安全层。谁能推荐更好的策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:03:46.707

你的方法太简单了。htmlspecialchars 在每种情况下都无济于事。

这是一个非常好的关于 XSS 的备忘单，以及当您转义将放入 HTML 的字符串时会出现什么问题。

[https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29](https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29)

黑名单也有它的缺点。例如，某些浏览器可能会解析

```
text/javascript 
```

和

```
text/java
       script 
```

一样的方法。新行和空格从后者中删除，因此它被解释为第一个。所以黑名单不会是防弹方法。

最好的策略是使用一些已经为您处理所有这些的模板库。库必须知道字符串所在的上下文。元素值需要与属性值不同的转义。

# php - 如何在迭代的模态中显示选项卡？

> ID：16090929
> 
> 赞同：0
> 
> 时间：2013-04-18T18:53:30.207
> 
> 标签：php, html, twitter-bootstrap, tabs

我在一个模式中有一些标签，这些标签通过点击不同的按钮进行迭代。单击第一个按钮时，可以打开所有选项卡。但它们不适用于第二个按钮。尽管显示按钮所在行的详细信息的第一个选项卡工作得非常好，并显示与该按钮链接的正确信息。$k 增加后如何让选项卡工作？这是我所拥有的：

```
<?php for($k=0; $k<$bookingCount; ++$k){ ?>

<div id="bookingDetails<?php echo $k; ?>" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

<div class="modal-header">...</div>

<div class="modal-body">
<div class="row-fluid sortable">    
<div class="box span12">
<div class="box-content">

<ul class="nav nav-tabs" id="myTab">
        <li><a href="#details" data-toggle="tab" class="active">Details</a></li>
        <li><a href="#sms" data-toggle="tab">SMS</li>
        <li><a href="#email" data-toggle="tab">Email</li>
        <li><a href="#phone" data-toggle="tab">Phone</li>
        <li><a href="#post" data-toggle="tab">Post</li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="details">...</div>
    <div class="tab-pane" id="sms">...</div>
    <div class="tab-pane" id="email">...</div>
    <div class="tab-pane" id="phone">...</div>
    <div class="tab-pane" id="post">...</div>
</div>

<div class="modal-footer">...</div>

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:41:07.527

在每次迭代中创建`tab-pane`具有相同 id 的 s 时，负责切换选项卡的 JavaScript 仅对具有给定 id 的第一个元素进行操作，这就是为什么只有第一个模式中的选项卡起作用的原因。

您还应该在每次迭代时添加`$k`到`href`s 和s ：`id`

```
<ul class="nav nav-tabs" id="myTab">
    <li><a href="#details_<?=$k ?>" data-toggle="tab" class="active">Details</a></li>
    <li><a href="#sms_<?=$k ?>" data-toggle="tab">SMS</li>
    <li><a href="#email_<?=$k ?>" data-toggle="tab">Email</li>
    <li><a href="#phone_<?=$k ?>" data-toggle="tab">Phone</li>
    <li><a href="#post_<?=$k ?>" data-toggle="tab">Post</li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="details_<?=$k ?>">...</div>
    <div class="tab-pane" id="sms_<?=$k ?>">...</div>
    <div class="tab-pane" id="email_<?=$k ?>">...</div>
    <div class="tab-pane" id="phone_<?=$k ?>">...</div>
    <div class="tab-pane" id="post_<?=$k ?>">...</div>
</div> 
```

# php - 从最后 8 行中选择 2 个特定行用于不同的显示

> ID：16090933
> 
> 赞同：-1
> 
> 时间：2013-04-18T18:53:38.093
> 
> 标签：php, mysql

我正在尝试使用最近的帖子（博客）创建一个主页。

我希望最近的 2 个用于不同的显示 [html & css]，而其他 6 个用于与它们不同的显示。就像在这张照片中...... [http://i.imgur.com/T0imWxM.jpg](http://i.imgur.com/T0imWxM.jpg)

编辑 1

```
// Gets 2 recent posts [displayed in 2 big boxes]
    function get_important_posts() {
    global $dblink;
    mysqli_set_charset($dblink, 'utf8');
       // if () {
            $result = mysqli_query($dblink ,"SELECT * 
                                                                    FROM `posts` 
                                                                    ORDER BY `post_id` 
                                                                    DESC LIMIT 0,2") or die(mysqli_connect_error($dblink));
            $rowNumber = 0;
            while ($row = mysqli_fetch_array($result) ) {
                if ($rowNumber < 1) {
                    echo  '<div class="bigbox right">
                    <a href="post.php?id=' . $row['post_id'] .'">
                    <div class="bigboximg"><img src="'. $row['bigthumb'] .'" width="390" alt="' . $row['title'] .'"></div></a>
                    <a href="post.php?id=' . $row['post_id'] .'"><div class="bigboxtitle">' . $row['title'] . '</div></a>
                    <div class="bigboxexcerpt">'. $row['excerpt'] . '</div>
                    </div>';
                    $rowNumber++;
                } else {
                    echo  '<div class="bigbox left">
                    <a href="post.php?id=' . $row['post_id'] .'">
                    <div class="bigboximg"><img src="'. $row['bigthumb'] .'" width="390" alt="' . $row['title'] .'"></div></a>
                    <a href="post.php?id=' . $row['post_id'] .'">
                    <div class="bigboxtitle">' . $row['title'] . '</div></a>
                    <div class="bigboxexcerpt">'. $row['excerpt'] . '</div></div>';
                    $rowNumber++;
                    }

            }
    }
//}

    // Gets 5 recent posts after the 2 recent posts
    function get_posts() {
    global $dblink;
    mysqli_set_charset($dblink, 'utf8');
    $result = mysqli_query($dblink ,"SELECT * 
                                                             FROM `posts` 
                                                             ORDER BY `post_id` 
                                                             DESC LIMIT 2,5") or die(mysqli_connect_error($dblink));
    while ($row = mysqli_fetch_array($result) ) {
            echo  '<div class="box">
            <a href="post.php?id=' . $row['post_id'] .'">
            <div class="boximg"><img src="'. $row['smallthumb'] .'" width="130" alt="' . $row['title'] .'"></div></a>
            <a href="post.php?id=' . $row['post_id'] .'">
            <div class="boxtitle">' . $row['title'] . '</div></a>
            <div class="boxexcerpt">'. $row['excerpt'] . '</div></div>';            
       }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:01:03.373

简单地使用一个计数器变量并为前两个添加一个特殊的类标签。

```
 $special_rows = 2;
    while ($row = mysqli_fetch_array($result) ) {
        $class = '';
        if ($special_rows > 0)
            $class = 'special';
        echo  '<a class="' . $class . '" href="post.php?id=' . $row['post_id'] .'"><strong>' . $row['title'] . '</strong></a><br>'. $row['excerpt'];
        $special_rows --;
    } 
```

或者，如果您想要不同的标记：

```
 $special_rows = 2;
    while ($row = mysqli_fetch_array($result) ) {
        if ($special_rows > 0) {
            // First or second row
            echo '<a href="post.php?id=' . $row['post_id'] .'"><strong>' . $row['title'] . '</strong></a><br>'. $row['excerpt'];
        }
        else {
            echo 'All the other boring rows';
        }
        $special_rows --;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:04:15.717

```
$result = mysqli_query($dblink ,"SELECT * FROM `posts` ORDER BY `post_id` DESC LIMIT 10");
$rowNumber = 0;
while ($row = mysqli_fetch_array($result) ) {
   if($rowNumber++ < 2){
       echo "special row";
   }
   echo  '<a href="post.php?id=' . $row['post_id'] .'"><strong>' . $row['title'] . '</strong></a><br>'. $row['excerpt'];
} 
```

# php - 如何使用 PHP 检索统计 SQL 结果？

> ID：16090934
> 
> 赞同：0
> 
> 时间：2013-04-18T18:53:41.633
> 
> 标签：php, sql, statistics

经过数小时的尝试和搜索，我放弃了并寻求您的帮助。如何使用 PHP 检索统计 SQL 结果？我创建了一个包含五个条目的测试表，主要是数值。使用 phpMyAdmin 我可以进行多项统计计算，但使用 PHP 我什至无法得到总和。

用极其简单的 SQL 语言：

```
SELECT SUM(`Arbeidspercentage`) FROM `enq_vs`; 
```

我把它和另一个函数放在一个 PHP 文件中，如下所示：

```
<?php
  require "connect.php";
  $kwearie_1 = mysqli_query($con,"SELECT * FROM `enq_vs`");
  $x = "Arbeidspercentage";
  $y = "Verzoeken_alg_toegek";
  while($row = mysqli_fetch_array($kwearie_1))
    {
    echo $row[$x] . " " . $row[$y] . '<br>';
    };

  $kwearie_2 = mysqli_query($con,"SELECT SUM(`Arbeidspercentage`) FROM `enq_vs`");
  $kwearie_2_readable = mysqli_fetch_all($kwearie_2);
  echo $kwearie_2_readable;
  mysqli_close($con);
?> 
```

但我得到的只是第一个 kwearie 的结果。第二个没有给出任何内容，“数组”这个词，或者一个重要的错误报告，不能转换为字符串。我已经尝试了所有子功能，从“fetch_all”到“fetch_row”。

这是怎么做到的？一个好的教程也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:57:29.520

我认为别名非常适合这里：

```
SELECT SUM(`Arbeidspercentage)` as 'sum_arbeid' ...
...
echo $row['sum_arbeid']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:57:42.110

你必须遍历结果。请参阅[http://php.net/manual/en/mysqli-result.fetch-assoc.php](http://php.net/manual/en/mysqli-result.fetch-assoc.php) - fetch_all 和 fetch_assoc 是可替换的。但是您应该考虑使用 assoc 来不生成输出中不需要的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:58:15.950

当你执行 mysql_fetch_all 时，你会得到一个数组作为结果。您不能简单地回显出数组的结果。请改用 foreach 循环。

```
$kwearie_2_readable = mysqli_fetch_all($kwearie_2);
foreach ($kwearie_2_readable as $row) {
    // $row is an array as well.  
    var_dump($row);
} 
```

在这种情况下，您知道您的结果将只有一行，因此您还可以执行以下操作：

```
var_dump($kwearie_2_readable[0]); 
```

最终，您要回显您感兴趣的特定元素：

```
echo $kwearie_2_readable[0][0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T18:59:57.753

尝试将 MYSQLI_ASSOC 作为第二个参数添加到 mysqli_fetch_array 调用。它将强制函数返回关联数组而不是整数索引的数组。mysqli_fetch_all 调用也是如此。这些调用将始终返回一个数组，因此 echo 将始终打印 Array。尝试 var_dump 而不是 echo。

```
var_dump($kwearie_2_readable); 
```

# c++ - 我需要删除析构函数中的基本数据类型吗？C++

> ID：16090936
> 
> 赞同：9
> 
> 时间：2013-04-18T18:53:56.283
> 
> 标签：c++, memory, int, destructor

如果我有一个看起来像这样的类：

```
class SomeClass {
    public:
        SomeClass(int size) {
                     arr = new int[size];
                     someInt = size / 10;
                    };
        ~SomeClass() {
                      delete [] arr;
                      //do I need to somehow delete the int value 'someInt'?
                     };
    private:
        int *arr; //pointer to dynamically allocated array
        int someInt;
} 
```

究竟应该在析构函数中包含什么以避免内存泄漏？

我知道我需要删除数组，因为它是动态分配的，但是我需要对 int 值或其他基本数据类型做任何事情吗？

谢谢，乔纳森

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-18T18:55:43.567

不。

但不仅适用于基本类型。对于您没有分配给您的任何东西，您`new`都不必调用`delete`。**即使是指针**。

`delete`（*不知何故*）与成员变量类型无关。重要的是您是否在构造函数（*或类方法中的其他位置）中***分配**了它（with ）。`new`

 *经验法则是

```
Have as many delete as new
Have as many delete[] as new[]. 
```

* * *

当然，有时您将不得不`delete`使用尚未分配但指向是否不再需要的东西（*由其他人分配但您是唯一使用它的人*）。

当然，有时您**不必** `delete`分配您**已**分配但其他人指向的东西（*由您分配但其他人正在使用它*）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T18:55:47.797

不，您不必手动删除自动变量。只有`delete`你`new`。

此外，您可以通过智能指针使用 RAII 来避免删除数组。然后您不必手动定义析构函数；自动定义的析构函数会做你需要的。

```
class SomeClass {
    public:
        SomeClass(int size)
          : arr {new int[size]}
          , someInt = size/10;
        {};

    private:
        std::unique_ptr<int[]> arr; //pointer to dynamically allocated array
        int someInt;
} 
```

使用更专业的类型`std::vector`而不是通用智能指针会更好：

```
class SomeClass {
    public:
        SomeClass(int size)
          : arr (size)
          , someInt = size/10;
        {};

    private:
        std::vector<int> arr;
        int someInt;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T18:55:46.463

不，你没有。您只有`delete`使用`new`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-18T19:02:07.853

您永远不会删除或新建属于您的对象的任何内容。这句话立即表明了为什么您不为 int 做任何特定的事情，而是为指针做一些事情。

int 本身是您的课程的一部分。指针是你的类的一部分。事实上，您班级中列出的所有内容本身就是您班级的一部分。需要注意的一点是，*指针*是类的一部分，但*指针对象*或*指向对象*不是。这样的指针将被销毁（并调用其析构函数，如果相关），但指针不会。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T18:58:41.800

你只需要删除你的新内容或删除[]你的新内容[]。您可能想查看[auto_ptr](http://en.wikipedia.org/wiki/Auto_ptr)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-18T18:57:24.610

编号`someInt`按值存储并使用*自动存储时长*。一旦它所属的对象被销毁`someInt`，并且所有其他具有自动存储持续时间的成员变量也被销毁。您仍然负责管理您已经完成的具有动态存储持续时间（新/删除）的对象。*

# java - 如何强制 JContainer 重新布局自己？

> ID：16090941
> 
> 赞同：4
> 
> 时间：2013-04-18T18:54:19.253
> 
> 标签：java, swing, layout, jtextarea, jdialog

我`JFrame`有`BorderLayout`：`JTextArea`在`NORTH`和。`JButton`_ `SOUTH`我`pack()`一开始就是。

我的代码更改了文本区域的**字体大小**。如何强制对话框窗口及其组件重新布局自身？

到目前为止，我尝试了一些组合：

*   其他`pack()`
*   `repaint()`
*   `revalidate()`

它似乎没有帮助。

是否有保证的蛮力方法？实现这种结果的正确方法是什么？

**更新：**

在创建 SCCE（见下文）时，我在原始代码中发现了两个错误并修复了它们。**框架现在可以很好地调整大小。**

我仍然有一个问题，这是否是**正确的**方法。

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class MyFrame extends JFrame implements ActionListener{

    private JTextArea txt;
    private JButton bis;
    private JFrame frame;

    int size = 10;

    private void BuildMainGUI() {
        txt = new JTextArea("This is just a line of text");
        bis = new JButton("Increase size");

        JPanel p1 = new JPanel();
        bis.addActionListener(this);

        BorderLayout bl = new BorderLayout();

        p1.setLayout(bl);
        p1.add(txt, BorderLayout.NORTH);
        p1.add(bis, BorderLayout.SOUTH);

        frame = new JFrame();
        frame.setContentPane(p1);
        frame.setVisible(true);
        frame.pack();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    @Override
    public void actionPerformed(ActionEvent e) {

        size += 2;
        Font newFont = new Font("Courier", Font.PLAIN, size);
        txt.setFont(newFont);
        frame.revalidate();
        frame.pack();
    }

    /**
     * @param args
     */
    public static void main(String[] args) {

        MyFrame myGUI = new MyFrame(); 
        myGUI.BuildMainGUI();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T20:10:47.657

所有三个替代项都在 ActionListener 中进行了描述，让它们中的最简单的工作，似乎坐标是相同的（我认为需要对 TextLayout 进行最深入的研究？？？）

![在此处输入图像描述](https://i.stack.imgur.com/1Z9Qa.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/bElV3.jpg)

```
import java.awt.BorderLayout;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

public class ResizeJTextArea {

    private JFrame frame = new JFrame();
    private JScrollPane scrollPane = new JScrollPane();
    private JTextArea textArea = new JTextArea(10, 15);
    private JButton button = new JButton("change");
    private Font newFont = new Font("Courier", Font.PLAIN, 10);

    public ResizeJTextArea() {
        textArea.setText("This is just a line of text");
        textArea.setFont(newFont);
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                textArea.setFont(textArea.getFont().deriveFont(20f));

                //2\. choice
                //textArea.setColumns(20);
                //textArea.setRows(20);

                //3rd. coice
                //override PreferredScrollableViewportSize
                frame.pack();
            }
        });
        scrollPane.setViewportView(textArea);
        frame.add(scrollPane);
        frame.add(button, BorderLayout.SOUTH);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                ResizeJTextArea fs = new ResizeJTextArea();
            }
        });
    }
} 
```

# ember.js - Ember 绑定在模板中工作，但不能通过扩展

> ID：16090957
> 
> 赞同：0
> 
> 时间：2013-04-18T18:55:06.930
> 
> 标签：ember.js

[我可以像这样](http://jsfiddle.net/fhyFJ/)让绑定在模板中工作：

```
{{view App.MyView fooBinding:author}} 
```

但是当我这样做`extend` [时](http://jsfiddle.net/vr2E5/4/)：

```
App.MyView = Ember.View.extend
    fooBinding: "App.ApplicationController.author" 
```

它不起作用。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:46:04.860

如果你想在一个`View`类中绑定，你应该使用`Controller`.

根据命名约定，命名视图`AuthorView`将查找`AuthorController`或自动生成基本控制器。在您的代码中，您正在设置与类（表示类型）而不是实例（这是您的具体对象）的绑定。

如果您创建一个控制器，您可以在`author`那里定义一个属性，并且在您的视图类中，您可以定义一个绑定，例如`fooBinding: "controller.author"`因为它知道这`controller`是`AuthorController`.

```
App.AuthorController = Ember.Controller.extend
    author: Author.create
        firstName: 'Bill'
        lastName: 'Buckley'

App.AuthorView = Ember.View.extend
    templateName: 'author'
    fooBinding: "controller.author"
    fullName: (->
            author = @get 'foo'
            "#{author.get('firstName')} #{author.get('lastName')}"
    ).property 'firstName', 'lastName' 
```

这种方法将迫使您`view.binding.property`在车把模板中使用：

```
<script type="text/x-handlebars" data-template-name='author'>
    Written by {{view.fullName}}
    <br />
    From Controller binding "fooBinding": {{view.foo.firstName}} {{view.foo.lastName}}
</script> 
```

（见[小提琴](http://jsfiddle.net/schawaska/pHWCp/)）

另一种方法是`author`通过以下方式从 Route 设置属性`Route#setupController`：

```
Author = Ember.Object.extend
    firstName: null
    lastName: null    
    fullName: (->
        author = @get 'foo'
        "#{@.get('firstName')} #{@.get('lastName')}"
    ).property 'firstName', 'lastName'

App.ApplicationRoute = Ember.Route.extend 
    setupController: (controller, model) ->
        controller.set 'author', Author.create
            firstName: 'Bill',
            lastName: 'Buckley' 
```

而且您的模板可以`author`直接访问该属性，因为它位于该视图的控制器中：

```
<script type="text/x-handlebars" data-template-name='author'>
    written by: {{author.fullName}}
</script> 
```

（见[小提琴](http://jsfiddle.net/schawaska/npHwf/)）

这样您就不必在任何地方设置任何绑定。

注意：在您的对象中创建计算属性，因为它不仅可以被视图使用，还可以被其他可能使用作者实例的对象使用，并避免使用`undefined`.

* * *

为了更好地使用 Ember 的功能，您可以为 Author 定义一个路由并`content`使用您的实例设置控制器的属性`Author`并将一个添加`{{outlet}}`到您的模板中。框架将再次使用命名约定找到您的控制器并连接模板：

车把

```
<script type="text/x-handlebars" data-template-name='author'>
    written by: {{fullName}}
</script>

<script type="text/x-handlebars">
    {{outlet}}
</script> 
```

咖啡

```
window.App = App = Ember.Application.create()

App.Router.map ->
    @.route 'author', { path: '/'}

App.Author = Ember.Object.extend
    firstName: null
    lastName: null    
    fullName: (->
        "#{@.get('firstName')} #{@.get('lastName')}"
    ).property 'firstName', 'lastName'

App.AuthorRoute = Ember.Route.extend 
    setupController: (controller, model) ->
            # this could come from an api
            controller.set 'content', App.Author.create
                firstName: 'Bill',
                lastName: 'Buckley'

App.AuthorController = Ember.ObjectController.extend() 
```

（见[小提琴](http://jsfiddle.net/schawaska/h7rnm/)）

# php - 带有内存缓存的数据映射器 ORM

> ID：16090968
> 
> 赞同：0
> 
> 时间：2013-04-18T18:55:25.970
> 
> 标签：php, orm, memcached, datamapper

我在一个 PHP 项目中使用[http://datamapper.wanwizard.eu/的精彩 ORM 库。](http://datamapper.wanwizard.eu/)有没有办法将 memcache 集成到其中？我已经为数据映射器缓存启用了配置，但这仅适用于模型。

提前道歉，因为这将发布在他们的 bitbucket 页面上，以确保作者看到这一点。[https://bitbucket.org/wanwizard/datamapper](https://bitbucket.org/wanwizard/datamapper)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T14:22:46.577

最简洁的答案是不。Datamapper 是 6 年的代码，很难适应。我会使用外部缓存库。

我不再维护 Datamapper，也没有人站出来接管它，所以不要指望很快会有任何变化或改进......

# mysql - 从组中获取最大值

> ID：16090970
> 
> 赞同：0
> 
> 时间：2013-04-18T18:55:28.200
> 
> 标签：mysql

我有一个表结构

```
Emp_id  Emp_name    Emp_sal Depat
1       AB          10000   A
2       CB          12000   A
3       DA          7000    B
4       SB          2000    B
5       WE          6000    A
6       CF          10000   B
7       AK          8000    C
8       LM          6000    C 
```

我需要一个结果作为每个出发组的最大 emp_sal 离开 Like

```
Emp_name Emp_sal 出发
CB 12000 A
CF 10000 B
AK 8000 C
```

我写了一个查询：

```
SELECT DISTINCT (emp_sal) , depart from emp 
group by depart
having emp_sal = (select max(emp_sal) from emp group by depart  ) 
```

但这没有用。我尝试了其他几个查询，但没有得到想要的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:58:45.583

回答上述问题：

```
select max(emp_sal), depart
from emp 
group by depart 
```

但是，我怀疑您想要每个部门的最高薪水的*整*行：

```
select emp_name, emp_sal, depart
from (select * from emp order by emp_sal desc) x
group by depart 
```

注意：这是一个 mysql-only 解决方案（带有 whacky group by）但问题被标记为 mysql 并且这有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:02:13.623

部门最高工资：

```
SELECT Depart, MAX(Emp_Sal)
  FROM emp
  GROUP BY Depart 
```

所在部门工资最高的员工名单：

```
SELECT Depart, Emp_Name, Emp_Sal
FROM Emp
WHERE (Depart, Emp_Sal) IN (
  SELECT Depart, Max(Emp_Sal)
  FROM Emp
  GROUP BY Depart) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:18:38.960

查询 Emp_sal 对于组是否唯一：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!2/6c19e/10)**

```
SELECT 
t1.Emp_name,
t1.emp_sal,
t1.Depat 
FROM emp t1
WHERE  t1.emp_sal = (SELECT max(t2.emp_sal) 
                    FROM emp t2 
                    WHERE t2.Depat = t1.Depat) 
```

如果每个组不是唯一的：

```
SELECT 
t1.Emp_name,
t1.emp_sal,
t1.Depat 
FROM emp t1
WHERE  t1.Emp_id = (SELECT t2.Emp_id 
                    FROM emp t2 
                    WHERE t2.Depat = t1.Depat
                    ORDER BY t2.Emp_sal DESC
                    LIMIT 1) 
```

结果：

```
| EMP_NAME | EMP_SAL | DEPAT |
------------------------------
|       CB |   12000 |     A |
|       CF |   10000 |     B |
|       AK |    8000 |     C | 
```

# javascript - Knockout.js 绑定单选组不起作用

> ID：16090971
> 
> 赞同：9
> 
> 时间：2013-04-18T18:55:28.957
> 
> 标签：javascript, knockout.js

我觉得真的很愚蠢，但不能让它工作:)

[http://jsfiddle.net/btkmR/](http://jsfiddle.net/btkmR/)

我做了这个简单的 Fiddle 只是为了证明我在我的大项目中没有遗漏任何东西。

HTML：

```
<div>
    Preferred flavor
    <div><input type="radio" name="flavorGroup" data-bind="checked: cherryOn" /> Cherry</div>
    <div><input type="radio" name="flavorGroup" data-bind="checked: almondOn" /> Almond</div>
    <div><input type="radio" name="flavorGroup" data-bind="checked: mgOn" /> Monosodium Glutamate</div>
</div> 
```

JS：

```
var viewModel = {
    cherryOn: ko.observable(true);
    almondOn: ko.observable(false);
    mgOn: ko.observable(false);
};

ko.applyBindings(viewModel); 
```

我希望`Cherry`在开始时看到被选中..

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-18T19:11:32.720

来自 Knockout 的文档（[http://knockoutjs.com/documentation/checked-binding.html](http://knockoutjs.com/documentation/checked-binding.html)）：

> 对于单选按钮，当且仅当参数值等于单选按钮节点的 value 属性时，KO 才会设置要检查的元素。

示例：http: [//jsfiddle.net/btkmR/2/](http://jsfiddle.net/btkmR/2/)

```
<div>
    Preferred flavor
    <div><input type="radio" name="flavorGroup" value="cherry" data-bind="checked: flavor" /> Cherry</div>
    <div><input type="radio" name="flavorGroup" value="almond"  data-bind="checked: flavor" /> Almond</div>
    <div><input type="radio" name="flavorGroup" value="Monosodium"  data-bind="checked: flavor" /> Monosodium Glutamate</div>
</div>

var viewModel = {
    flavor: ko.observable("cherry")
};

ko.applyBindings(viewModel); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-14T13:13:54.907

对于那些像我一样正在努力让它与**动态绑定的无线电组名称和值**一起工作的人，请注意`data-bind`.

以下将不起作用，因为`value`并且在*之后*`name`绑定： *`checked`*

 *```
<input 
    type="radio" 
    data-bind="
        checked: $parent.correctAnswerId, 
        attr: {name: 'correctAnswerFor' + $parent.id, value: id}
    "
/> 
```

**正确**的顺序是：

```
 attr: {name: 'correctAnswerFor' + $parent.id, value: id},
        checked: $parent.correctAnswerId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-22T15:26:28.143

我也有一个非常有趣的问题。如果您的单选输入值是数字并且您的模型可观察对象中有整数 - 将不会选择单选按钮。如果您将可观察值更新为“1”（数字作为字符串），那么它可以工作。不是很方便...*

# ssl - 解码ssl数据包wireshark

> ID：16090972
> 
> 赞同：2
> 
> 时间：2013-04-18T18:55:29.070
> 
> 标签：ssl, wireshark

如果我使用应该能够看到密钥的服务（Google Talk），我想知道如何在 Wireshark 中解码 ssl 数据包。此类应用程序的密钥在哪里，我可以拿到它们吗？我寻找证书，但谷歌没有。我使用过 ssh 密钥，自从我自己创建它们以来，我知道它们在哪里，并且可以使用它们。但不是为了这样的事情。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:36:00.773

您需要拥有服务器的私钥，如果您要连接的服务器不属于您，这种情况极不可能发生。请注意，除了拥有此密钥之外，您还需要确保交易不使用完美前向保密 ( [http://en.wikipedia.org/wiki/Perfect_forward_secrecy](http://en.wikipedia.org/wiki/Perfect_forward_secrecy) )，如果您控制客户端和服务器不需要 PFS。

# jquery - 我的工具提示被 div 容器截断

> ID：16090974
> 
> 赞同：7
> 
> 时间：2013-04-18T18:55:33.963
> 
> 标签：jquery, css, overflow, jquery-tooltip

当消息框“悬停”时，我有此代码可以显示工具提示。所有消息框都在一个名为 chatbox 的 div 中。

```
$('.box').hover(function(){
     var htmltooltip = '<div id="info" class="shadow">';
     htmltooltip += '<h4>Label info</h4>';
     htmltooltip += '<img src="images/defaultphoto.gif"/>';
     htmltooltip += '</div>';
     $(this).append(htmltooltip).children('#info').hide().fadeIn(400).css('left', -150);
     }, function() {
         $('#info').remove();
     }
   ); 
```

这是我的聊天框、框和工具提示的 CSS 代码，名为#info

```
#chatbox {

    position: absolute;
    overflow-y:auto; 
    top:40%;
    left:50%;
    background:#fff;
    height:80%;
    width:550px;
    border:3px solid black;
    }
.box{
    width:90%;
    height:auto;
    margin:5px 20px 0px 0px;
    border:3px solid #918750;
    float:left;
    cursor: pointer;
}
#info{
    position:absolute;
    display:block;
    background:#7F7777;
    width:300px;
    padding-bottom: 0.5em;
    z-index:25;

} 
```

我的问题是当通过聊天框的限制时，工具提示被聊天框 div 截断。这是一个jsfiddle：http: [//jsfiddle.net/Ifalcao/k9Yrc/2/](http://jsfiddle.net/Ifalcao/k9Yrc/2/)

chatbox div中的溢出规则必须存在，否则如果我有很多消息框，它们就会超过聊天框的限制。（[http://jsfiddle.net/Ifalcao/URBDE](http://jsfiddle.net/Ifalcao/URBDE)）我需要聊天框内的消息框，但聊天框外的消息框的工具提示。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T20:35:03.787

从 div 中删除`overflow-y:auto;`规则，`#chatbox`工具提示完全可见。

**[jsFiddle 示例](http://jsfiddle.net/j08691/k9Yrc/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-07T13:20:26.423

将工具提示 css 添加为`overflow: visible;`

# javascript - ReferenceError：$ 未为原始浮点库定义

> ID：16090976
> 
> 赞同：1
> 
> 时间：2013-04-18T18:55:41.460
> 
> 标签：javascript, jquery, firebug, flot

大家，我在原始的 flot.js 库中遇到了这个错误。我想知道这部分脚本有什么问题？*错误是 shwon Fire bug from Firefox 错误消息是：

```
ReferenceError: $ is not defined

$(document).ready(function () { 
```

开始声称是错误代码的行是：

```
$(document).ready(function () {
$.plot($("#flot-placeholder1"), dataset, options);
$("#flot-placeholder1").UseTooltip();
}); 
```

以下是错误行之前的内容：

```
 <script>
//******* 2012 Gold Price Chart
var data1 = [
[gd(2012, 0, 1), 1652.21], [gd(2012, 1, 1), 1742.14], [gd(2012, 2, 1), 1673.77], [gd(2012, 3, 1), 1649.69],
[gd(2012, 4, 1), 1591.19], [gd(2012, 5, 1), 1598.76], [gd(2012, 6, 1), 1589.90], [gd(2012, 7, 1), 1630.31],
[gd(2012, 8, 1), 1744.81], [gd(2012, 9, 1), 1746.58], [gd(2012, 10, 1), 1721.64], [gd(2012, 11, 2), 1684.76]
];
var data2 = [
[gd(2012, 0, 1), 0.63], [gd(2012, 1, 1), 5.44], [gd(2012, 2, 1), -3.92], [gd(2012, 3, 1), -1.44],
[gd(2012, 4, 1), -3.55], [gd(2012, 5, 1), 0.48], [gd(2012, 6, 1), -0.55], [gd(2012, 7, 1), 2.54],
[gd(2012, 8, 1), 7.02], [gd(2012, 9, 1), 0.10], [gd(2012, 10, 1), -1.43], [gd(2012, 11, 2), -2.14]
];
var dataset = [
{ label: "Gold Price", data: data1, points: { symbol: "triangle"} },
{ label: "Change", data: data2, yaxis: 2 }
];
var options = {
series: {
lines: {
show: true
},
points: {
radius: 3,
fill: true,
show: true
}
},
xaxis: {
mode: "time",
tickSize: [1, "month"],
tickLength: 0,
axisLabel: "2012",
axisLabelUseCanvas: true,
axisLabelFontSizePixels: 12,
axisLabelFontFamily: 'Verdana, Arial',
axisLabelPadding: 10
},
yaxes: [{
axisLabel: "Gold Price(USD)",
axisLabelUseCanvas: true,
axisLabelFontSizePixels: 12,
axisLabelFontFamily: 'Verdana, Arial',
axisLabelPadding: 3,
tickFormatter: function (v, axis) {
return $.formatNumber(v, { format: "#,###", locale: "us" });
}
}, {
position: "right",
axisLabel: "Change(%)",
axisLabelUseCanvas: true,
axisLabelFontSizePixels: 12,
axisLabelFontFamily: 'Verdana, Arial',
axisLabelPadding: 3
}
],
legend: {
noColumns: 0,
labelBoxBorderColor: "#000000",
position: "nw"
},
grid: {
hoverable: true,
borderWidth: 2,
borderColor: "#633200",
backgroundColor: { colors: ["#ffffff", "#EDF5FF"] }
},
colors: ["#FF0000", "#0022FF"]
}; 
```

=================更新=============================== =====================大家好。感谢你的回答！这是我加载脚本的顺序（加载正确，因为我在 DW CS4 1.jquery-1.8.3.min.js 2.jquery.flot.min.js 2.jquery.flot.min.js" 3.jquery.flot.time.js" 4\. jquery.flot.symbol.js 5\. jquery.flot.axislabels.js 6\. jshashtable-2.1.js 7\. jquery.numberformatter-1.2.3.min.js

所以我认为顺序应该不是问题，它按照教程告诉我在这里做： [http ://www.pureexample.com/jquery-flot-tutorial-how-to-make-a-jquery-flot-line -chart.html](http://www.pureexample.com/jquery-flot-tutorial-how-to-make-a-jquery-flot-line-chart.html)

我还发现这些代码被 Firefox/firebug 阻止了，也许它有帮助。停止位于代码的第二行之前--> '$(this).bind("plot...'.

```
$.fn.UseTooltip = function () {
$(this).bind("plothover", function (event, pos, item) {
if (item) {
if ((previousLabel != item.series.label) || (previousPoint != item.dataIndex)) {
previousPoint = item.dataIndex;
previousLabel = item.series.label;
$("#tooltip").remove();
var x = item.datapoint[0];
var y = item.datapoint[1];
var color = item.series.color;
var month = new Date(x).getMonth();
//console.log(item);
if (item.seriesIndex == 0) {
showTooltip(item.pageX,
item.pageY,
color,
"<strong>" + item.series.label + "</strong><br>" + monthNames[month] + " : <strong>" + y + "</strong>(USD)");
} else {
showTooltip(item.pageX,
item.pageY,
color,
"<strong>" + item.series.label + "</strong><br>" + monthNames[month] + " : <strong>" + y + "</strong>(%)");
}
}
} else {
$("#tooltip").remove();
previousPoint = null;
}
});
}; 
```

谢谢。

对凯文的进一步问题在评论下询问他的回答......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:57:23.483

错误在这里：

```
$(document) 
```

`$`没有定义。这意味着您要么不包含 jQuery，要么包含它太晚，要么使用`$.noConflict()`不正确。

更具体地说，`$ === undefined`和 undefined 不是函数，因此无法执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T18:57:28.473

这意味着您需要在 HTML 页面中包含 jQuery。在运行您的`$(document).ready`行之前添加这个（或对 jQuery 库的不同引用）：

```
<script type="text/javascript" src="//code.jquery.com/jquery-1.9.1.min.js"></script> 
```

`$`指的是 jQuery 库，需要在使用前可用。

另外，你需要在加载jQuery库**之后**再加载flot库。flot 是一个 jQuery 插件，所以它依赖于 jQuery 库。

# c# - 如何检测文件是否存在？

> ID：16090987
> 
> 赞同：-6
> 
> 时间：2013-04-18T18:56:02.467
> 
> 标签：c#, file, ftp

有人可以向我建议查看文件是否存在的最佳方法吗？`File.Exists`不适合我。

```
string abc = "me_label.deploy";
File.Exists(abc) 
```

文件 ,`abc`来自`Streamreader.ReadLine();`。

我什至使用了完整路径。我不想在我的项目中包含文件。如果我将它包含在我的项目中，它工作正常。

我的代码：

```
FtpWebRequest ftp = (FtpWebRequest)FtpWebRequest.Create("me@localhost/"; + ab);
//ab=newfolder/newfolder1
ftp.Credentials = new NetworkCredential(user, pass);
ftp.Method = WebRequestMethods.Ftp.ListDirectory;
StreamReader sr = new StreamReader(ftp.GetResponse().GetResponseStream());
StringBuilder result = new StringBuilder();
string abc = sr.ReadLine();
while (abc != null)
{
    result.Append(abc);
    //abc=file
    result.Append("\n");
    if (File.Exists(ab+abc))
    {
        //file
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T18:59:32.633

默认情况下，.NET 中的任何相对路径都相对于`bin/Debug`项目的子目录。因此，除非`me_label.deploy`在该文件夹中，否则您的程序将无法找到它。如果包含它，它将被复制到该文件夹​​，然后它就可以工作了。

但是您必须使路径成为绝对路径。使用[`Path`类](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)中的方法。

```
string filename = "me_label.deploy";
string basePath = @"C:\My Documents\";
string absolutePath = Path.Combine(basePath, filename);
// C:\My Documents\me_label.deploy
Console.WriteLine(File.Exists(absolutePath)); 
```

# c++ - ADO 数据库 - 如何编辑

> ID：16090989
> 
> 赞同：0
> 
> 时间：2013-04-18T18:56:08.527
> 
> 标签：c++, database, ms-access, c++builder

当客户希望我（服务器）编辑他的某些内容时，我希望我的服务器应用程序能够编辑我创建的数据库。数据库表很简单，我需要知道如何以编程方式更改它。

例如：

我的数据库表

-

ID 用户通过 ip

1 次测试 1 次通过 1 0.0.0.0

2测试2通过2 0.0.0.0

3 测试3 通过3 0.0.0.0

-

如何更改 test2 的 IP 地址？

顺便说一句，使用 Embarcadero C++ Builder XE3 数据库是使用 Microsoft Access 创建的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:07:25.570

只需删除一个 TADODataSet 组件和一个 TADOConnection 即可连接到数据库。使用 TADODataSet，您可以使用 CommandText 来运行 SQL 命令。这将允许您以任何您需要的方式操作表格。然后，只需为您的应用程序创建正确的调用来完成您需要做的事情。

# ruby-on-rails-3 - Filepicker.io - 是否有一种简单的方法可以在 rake 任务中将使用回形针存储的照片迁移到 filepicker.io

> ID：16090991
> 
> 赞同：1
> 
> 时间：2013-04-18T18:56:11.123
> 
> 标签：ruby-on-rails-3, paperclip, filepicker.io

我希望将 filepicker.io 集成到我的网络应用程序中，但问题是我的一些模型已经使用回形针将图像存储到 S3。

我想避免在模型现在使用文件选择器 url 或仍在使用回形针上传的图像时将我的代码与逻辑混淆，并且只需使用 rake 任务迁移所有照片以使用文件选择器。

有没有其他人遇到过这个问题，如果有，您使用什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T01:34:50.700

您可以使用[https://developers.filepicker.io/docs/web/#fpurl-store](https://developers.filepicker.io/docs/web/#fpurl-store)上提供的商店端点来迁移您必须使用 filepicker.io URL 的文件

# jquery - 使用对 Google Calendar API 的 ajax 调用解析错误

> ID：16090992
> 
> 赞同：3
> 
> 时间：2013-04-18T18:56:13.957
> 
> 标签：jquery, ajax, google-calendar-api

我正在尝试调用谷歌日历 API。它适用于 API 资源管理器，但它从 javascript (jquery) 中失败

```
jQuery.ajax({
    url: "https://www.googleapis.com/calendar/v3/freeBusy?key="+apikey,
    type: "POST",
    dataType: "json",
    contentType: "application/json",
    data: {
        "timeMin": "2013-01-30T00:00:00.000Z"
    }
}) 
```

在 api explorer 上，它返回一个错误，指出 timeMax 丢失（没关系）

```
"message": "Missing timeMax parameter." 
```

ajax 调用返回解析错误，我不明白为什么

```
"message": "Parse Error" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-19T14:59:27.323

一年多后，我看到了你的帖子。我只是像这样将所有参数放在 URL 中。我使用 jsonp 和 http GET，因为我正在对只读日历提要进行简单解析。我使用 moment.js 来格式化我所有的时间。

```
var https = 'https://www.googleapis.com/calendar/v3/calendars/' + calendarId + '/events?    singleEvents=true&orderBy=startTime&sortOrder=ascending&timeMin=' + moment(startMin).format() + '&timeMax=' + moment(startMax).format() + '&key=' + key;
$.ajax({
    url: https,
    dataType: 'jsonp',
    type: "GET",
    success: function (response) {
        processFeed(response);
    }
}); 
```

# ios - 获取用户的日期格式？(DMY, MDY, YMD)

> ID：16090993
> 
> 赞同：0
> 
> 时间：2013-04-18T18:56:15.510
> 
> 标签：ios, localization, nsdate, nsdateformatter

我正在创建一个表单，用户可以在其中使用 3 个 UITextFields 输入他们的生日：1 个月份，1 个日期和 1 个年份。我想根据用户的日期格式来安排它们。
即： [ MONTH ] [ DAY ] [ YEAR ] 适用于美国用户，[ DAY ] [ MONTH ] [ YEAR ] 适用于欧洲用户等。
按国家/地区划分的日期格式地图：[http ://en.wikipedia.org/wiki/ Date_format_by_country#地图](http://en.wikipedia.org/wiki/Date_format_by_country#Map)

获得该格式的最简单方法是什么？

现在我正在设置 2000 年 10 月 20 日的日期并解析字符串。

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *components = [[NSDateComponents alloc] init];
[components setDay:20];
[components setMonth:10];
[components setYear:2000];
NSDate *date = [calendar dateFromComponents:components];

NSLog(@"%@", [NSDateFormatter localizedStringFromDate:date dateStyle:NSDateFormatterShortStyle timeStyle:NSDateFormatterNoStyle]); 
```

但我认为这不是正确的做法，因为我已经有了太多不同的格式：

美国：10/20/00
FR：20/10/00
日本：2000/10/20
瑞典：2000-10-20

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:59:23.447

你可以利用`NSDateFormatter dateFormatFromTemplate:options:locale:`.

```
NSString *base = @"MM/dd/yyyy";
NSLocale *locale = [NSLocale currentLocale];
NSString *format = [NSDateFormatter dateFormatFromTemplate:base options:0 locale:locale]; 
```

的值`format`将根据区域设置以正确的格式进行调整。现在的诀窍是扫描`format`以查看找到`M`的顺序，`d`和`y`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:07:52.520

您可以尝试设置 dateFormatter 的 dateStyle。

```
NSDateFormatter  *dateFormatter = [[NSDateFormatter alloc]init];
//Based on users locale it would automatically change the display format
[dateFormatter setDateStyle:NSDateFormatterShortStyle];

NSString *dateString = [dateFormatter stringFromDate:date]; 
```

# delphi - 主窗体前的进度条

> ID：16090995
> 
> 赞同：1
> 
> 时间：2013-04-18T18:56:23.693
> 
> 标签：delphi, progress-bar, delphi-xe2

我编写了一个扫描网络的应用程序，然后用所有信息填充一个列表框，发现过程需要一段时间才能按预期完成，因为我们目前拥有的网络设备数量；我想显示这样的进度条，让用户知道正在扫描网络，但我不知道该怎么做，你们能指点我正确的方向吗？我正在考虑动态创建一个小表单，然后用进度条填充它，但此时我很迷茫。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:41:16.430

您可以将进度条放在与 ListBox 相同的表单上。

展示进度是一种艺术形式。如果您知道要提前扫描多少网络设备，则将**Max**设置为该数字。然后，当您更新 ListBox 检查时，如果您在下一个网络设备上，您还可以更新进度条的**位置。**

您还可以使用两个进度条 - 一个用于网络设备的数量，第二个用于当前网络设备。您还可以在发现更多要扫描的内容时更新**Max 。**

问题在于，您在开始时可能不知道有多少网络设备，或者最后一个设备的扫描时间可能比之前所有设备加在一起的时间要长。在这种情况下，您可以只使用一个频闪进度条，它会前后反弹。您可以在更新 ListBox 时进行更新，或者在计时器上进行更新。这实际上只是让用户知道您很忙并且没有锁定。

如果您想阻止用户在处理过程中单击控件，那么您可以禁用这些控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:54:02.527

您的问题暗示网络扫描是在程序启动时发生的第一件事，而不是当用户单击表单上的按钮时，就像在`FormCreate`事件中一样。如果这是您正在做的事情，您可能会考虑将网络扫描代码放入一个线程并在主窗体启动时启动该线程。这样，用户将真正看到表单，您可以从线程发送表单 ProgressBar 或状态更新。

一个更简单的方法是`Timer`在表单上放置一个`FormCreate`或`FormActivate`启动计时器。然后计时器的`OnTimer`事件将启动网络扫描，您可以从那里更新 ProgressBar 或将状态消息发送到 ListBox 或其他任何东西。