# StackOverflow 问答 12672000-12672999

# asp.net-mvc - 如何在加载网站之前安装自定义字体？

> ID：12672000
> 
> 赞同：3
> 
> 时间：2012-10-01T11:01:13.583
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, font-face

我有一些自定义字体，例如 Trade Gothic Oblique.ttf，现在我在我们的网站中使用它，但在加载网站以安装此字体之前它没有安装我使用了以下代码：

@字体脸

{

字体家族：“TadeGothic”，TradeGothic，TradeGothic LT Std；

```
src: url(../fonts/Trade Gothic LT Std Condensed No. 18.ttf);
src: url(../fonts/Trade Gothic Oblique.ttf); 
```

}

但它不起作用。你能告诉我它有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T02:46:25.843

`.eot`仅适用于 IE。对于其他人，您应该使用`.otf`or`.ttf`文件。以下应该有效：

```
@font-face {
    font-family: 'Font 1';
    src: url('Font1.eot?') format('eot'), url('Font1.ttf') format('truetype'); 
```

}

另一种方式如下：

```
@font-face{
    font-family:'Font 1';
    src: url('Font1.eot'); // For IE
}

@font-face{
    font-family:'Font 1';
    src: url('Font1.otf'); // For others
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:05:09.850

[您可能想在http://www.fontsquirrel.com/fontface](http://www.fontsquirrel.com/fontface)查看 FontSquirrel 。他们向您展示如何做到这一点。

但请注意，它在 IE 上的工作方式与在其他浏览器上的工作方式不同。我相信 IE 需要 TTF 而其他浏览器需要 OTF 作为嵌入式字体标准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T11:05:57.807

简单地使用`.ttf`文件类型将无法跨浏览器工作。如果您查看[Paul Irish 的这篇博文](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)，您可能会对在您的网站中嵌入字体有更好的理解。

还有很多其他网站都有说明，一个简单的搜索就会给你很多信息。

# c# - C# Decimal.Parse 逗号问题

> ID：12672003
> 
> 赞同：3
> 
> 时间：2012-10-01T11:01:36.397
> 
> 标签：c#

我需要将 a 解析`string`为 a `decimal`，它可能会在英国或欧洲文化中使用。

如果在欧洲文化`2,00`中`2`

但是，`2,00`在英国文化中是无效的，因为逗号表示一千。

如果我使用

```
Double.Parse("20,50", new CultureInfo("en-GB")) 
```

它返回`2050`

我本来希望这会引发无效的异常。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:04:59.327

您不*应该*遇到异常，因为`,`解析字符串中的有效字符也是如此（正如您所说，它被解释为千位分隔符）。

但是，我看到`2050`的是同一段代码，而不是`20.50`.

我希望`en-GB`仅当在该区域的控制面板中手动更改了文化结果（因此，如果有人将小数分隔符设置为`,`，千位分隔符设置为非`,`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:44:48.123

关键是 GB culutre 中的“2,00”应该是无效的，但它会像使用欧洲文化一样解析它。

我希望它抛出异常。

相反 - Double.Parse("20.50", new CultureInfo("fr-FR")) 抛出异常，因为小数位无效。

那么为什么 Double.Parse("20,50", new CultureInfo("en-GB")) 不是这样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:05:43.970

从更新的问题中，我可以看出英国文化可能使用`,`字符作为可能的地方分隔字符，例如`2,000`代表`2000`和`2,000,000`。`2000000`但它也可以是`2,0,0,0`，它仍然是`2000`。

从这个角度来看，有3种可能的情况：

1.  您总是以本地格式接收数据，那么就没有问题，您只需按原样解析字符串（但是有一个问题 - 用户可以更改字符串格式选项，因此您最好创建新的默认本地文化）。
2.  您正在以预定义的格式接收数据，然后您使用一些固定的文化来解析字符串。
3.  您正在接收与本地相关的未知格式的数据，即您可以接收本地和非本地文化格式。这是最坏的情况，对此没有通用的解决方案。我建议将此减少到案例 2 或 1，这取决于此任务是否更容易。

# sql-server - 在 SQL Server 中生成 CREATE INDEX 语句

> ID：12672006
> 
> 赞同：6
> 
> 时间：2012-10-01T11:01:40.933
> 
> 标签：sql-server, indexing

有没有人有一个脚本来列出 SQL Server 数据库中所有现有索引的 CREATE INDEX 语句？

[SQL Server DB 中所有索引和索引列的](https://stackoverflow.com/questions/765867/list-of-all-index-index-columns-in-sql-server-db)这个线程列表对如何找到它们有很好的提示。但是生成`CREATE INDEX`语句的脚本会很棒。有时我们会遇到没有足够数据的情况，或者随着时间的推移在没有文档的情况下以临时方式添加了索引，因此缺少 create 语句。就像我现在所处的情况一样。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T11:03:17.177

使用从 SQL Management Studio 生成脚本并选择“脚本索引”选项（在高级脚本选项下）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T11:11:18.367

前段时间我为此写了一些东西。您可能必须根据需要对其进行修改，但至少您有一个骨架。

```
if exists (select 1 from information_schema.routines where routine_name = 'Script_CreateIndex')
    drop proc Script_CreateIndex
go

create proc Script_CreateIndex (
    @TableName varchar(124)
)
as
begin
    if not exists (select 1 from sys.indexes where object_name(object_id) = @TableName and type_desc in ('CLUSTERED', 'NONCLUSTERED'))
        return

    declare @IndexList table (
        Id int identity,
        IndexName varchar(124),
        IndexDescription varchar(max),
        IndexKeys varchar(max)
    )

    insert @IndexList(IndexName, IndexDescription, IndexKeys)
        exec sp_helpindex @TableName

    if (select count(*) from @IndexList) > 0
    begin
        select '-- Creating indexes for table ' + @TableName

        while exists (select 1 from @IndexList) 
        begin
            declare @Id int, @IndexName varchar(124), @IndexDescription varchar(max), @IndexKeys varchar(max)
            select top 1 @Id = Id, @IndexName = IndexName, @IndexDescription = IndexDescription, @IndexKeys = IndexKeys from @IndexList order by Id
            delete from @IndexList where Id = @Id

            declare @Clustered varchar(10), @Unique varchar(7)

            select @Clustered = case when patindex('%nonclustered%', @IndexDescription) > 0 then '' else ' clustered ' end
            select @Unique = case when patindex('%unique%', @IndexDescription) > 0 then ' unique ' else '' end

            select 'if not exists (select 1 from sys.indexes where name = ''' + @IndexName + ''')'
            select 'begin'
            select char(9) + 'create' + @Unique + @Clustered + ' index [' + @IndexName + '] on [' + @TableName + '](' + @IndexKeys + ')'
            select char(9) + 'select ''Index ' + @IndexName + ' created.'''
            select 'end'
            select 'go'
        end

        select ''
        select ''
    end
end
go

grant exec on Script_CreateIndex to public
select 'Script_CreateIndex compiled.' 'Job'
go 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-18T08:49:04.973

在这里查看我的解决方案： [https ://stackoverflow.com/a/55742250/1831734](https://stackoverflow.com/a/55742250/1831734)

输出

```
Create                                                                                                      Drop                                    Rebuild
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
CREATE CLUSTERED INDEX [PK_Table1] ON [Table1] ( [Tab1_ID] )                                                DROP INDEX [PK_Table1] ON [Table1]      ALTER INDEX [PK_Table1] ON [Table1] REBUILD 
CREATE UNIQUE INDEX [IX_Table1_Name] ON [Table1] ( [Tab1_Name] )                                            DROP INDEX [IX_Table1_Name] ON [Table1] ALTER INDEX [IX_Table1_Name] ON [Table1] REBUILD 
CREATE NONCLUSTERED INDEX [IX_Table2] ON [Table2] ( [Tab2_Name], [Tab2_City] )  INCLUDE ( [Tab2_PhoneNo] )  DROP INDEX [IX_Table2] ON [Table2]      ALTER INDEX [IX_Table2] ON [Table2] REBUILD 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T11:12:19.230

您可以使用“对象资源管理器”窗口逐个表执行此操作

转到 Management Studio 中的 Indexes 文件夹，突出显示该文件夹，然后打开 Object Explorer 窗格

然后，您可以“移位选择”该表上的所有索引，如果您右键单击脚本“CREATE TO”，它将为您创建一个包含所有相关索引的脚本。

# sql - wikipedia page-to-page links by pageid

> ID：12672008
> 
> 赞同：5
> 
> 时间：2012-10-01T11:01:42.767
> 
> 标签：sql, wikipedia, pagerank

*什么？：*我正在尝试通过以下格式
获取维基百科页面的逐页链接映射（矩阵） ：`page_id`

```
from1 to1 to2 to3 ...
from2 to1 to2 to3 ...
... 
```

*为什么？：*
我正在寻找数据集（来自维基百科的页面）来尝试 PageRank。

*问题：*
在[dumps.wikimedia.org](http://dumps.wikimedia.org/skwiki/20120930/)可以下载**pages-articles.xml**，它是具有这种格式的 XML：

```
<page>
  <title>...</title>
  <id>...</id>          // pageid
  <text>...</text>
</page> 
```

我将用于检索文章 ( `text`)，然后还包含每页数据 ( **page.sql** )，其中包含有关页面的一些详细信息`page_id`，最后一个似乎与我相关的是**pagelinks.sql**，其中包含页面到页面的链接记录. 问题是该`pagelinks`表具有以下字段`pl_from`：`pl_namespace`和`pl_title`。

*思路：*创建临时数据库，导入`page`和`pagelinks`表，使用表创建这个矩阵，根据s`pagelinks`检索 s。可能的解决方案：`page_id``pl_title`

```
SELECT pl_from, GROUP_CONCAT(page_id SEPARATOR ' ') FROM pagelinks
    JOIN page ON 
        pl_title = page_title AND pl_namespace = page_namespace
GROUP BY pl_from 
```

或获取“反向链接”的地图（`to1 from1 from2 from3 ...`, not `from1 to1 to2 to3 ...`）：

```
SELECT page_id, GROUP_CONCAT(pl_from SEPARATOR ' ') FROM pagelinks
    JOIN page ON 
        pl_title = page_title AND pl_namespace = page_namespace
GROUP BY page_id 
```

*问题：*
有没有地方可以获得这种页面到页面链接的矩阵，`page_id`这样我就不需要自己创建它了？或者如果没有，有没有比我指出的解决方案更快的方法来获得这种矩阵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:11:41.753

我认为将两个表都导入数据库并使用它可能是最简单的方法（你不需要这样做`pages-articles.xml`）。

另一种选择是手动解析这两个 sql 文件而不将它们导入数据库。我实际上[在 .Net 中创建了一个库来完全做到这一点](https://github.com/svick/Wikipedia-SQl-dump-parser/wiki)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-25T14:07:50.470

好吧，要解析 XML 文件，我想你可以试试这个链接：

[http://haselgrove.id.au/wikipedia.htm](http://haselgrove.id.au/wikipedia.htm)

有一种方法，加上几个预制的 .m(MATLAB,OCTAVE) 文件可以清理您的转储。此外，.txt 文件中有一个预处理转储。虽然，它已经很老了。2009 年左右。

# javascript - 如何使用 replaceWith 维护 jQuery 引用

> ID：12672010
> 
> 赞同：9
> 
> 时间：2012-10-01T11:02:04.340
> 
> 标签：javascript, jquery, html, dom

如果我们有这样的示例结构：

**HTML**

```
<div id="foo">hello foo</div> 
```

**JS**

```
var $foo = $('#foo'); 
```

`.replaceWith`我们需要使用 jQuery 的方法为给定的 jQuery/节点引用替换整个 HTML 标记，*分别维护获取新节点引用的最佳实践是什么*？

问题是`.replaceWith`返回对*旧*jQuery 对象的引用（这对我来说听起来或多或少不合理）。从文档：

> 但是，必须注意返回的是原始的 jQuery 对象。此对象指的是已从 DOM 中删除的元素，而不是替换它的新元素。

如果我去喜欢

```
$foo = $foo.replaceWith('<div>new content</div>'); 
```

我希望在同一个变量中引用/缓存该新节点。是的，您可以重新查询新插入的 DOM 节点，但在我看来这似乎很笨拙。

**有没有什么棘手的方法可以在不需要重新查询 DOM 的情况下实现这一点？**

示例：http: [//jsfiddle.net/Lm7GZ/1/](http://jsfiddle.net/Lm7GZ/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T11:06:22.330

使用[`.replaceAll()`](http://api.jquery.com/replaceAll/)功能：

```
$foo = $('<div>new content</div>').replaceAll($foo); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T11:06:28.987

您可以使用`replaceAll()`，将源与目标交换：

```
$foo = $('<div>new content</div>').replaceAll($foo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-25T11:14:15.417

我们可以使用以下任何一种方式：

```
$foo = $('<div id="foo">hello foo</div>').replaceAll('#foo'); //As a target string; 
```

或者

```
$foo = $('#foo');
$foo = $('<div id="foo">hello foo</div>').replaceAll($foo); //As a jQuery Object; 
```

我们也可以进行链式查询：

```
$('<div id="foo">hello foo</div>').replaceAll('#foo').find('something into the newly added html')...... 
```

# iphone - 在 iPhone 应用程序中按顺序显示图像

> ID：12672017
> 
> 赞同：2
> 
> 时间：2012-10-01T11:02:28.460
> 
> 标签：iphone, objective-c

我想显示一系列图像，例如： ![在此处输入图像描述](../Images/1104f841b99255279ccf0ca19c0b72e5.png)

谁能告诉我，是否有任何 API 可以显示演示图像中显示的图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T11:07:56.667

这是[可可控件中的一些覆盖流控件](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=coverflow)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T11:04:43.633

它在 iOS 中被称为coverflow。按照[这个链接](http://www.chaosinmotion.com/flowcover.html)，你会得到你想要的，并且会知道如何实现它。

或者你也可以[参考这个关于堆栈溢出的问题](https://stackoverflow.com/questions/718984/open-source-coverflow-library-for-iphone)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-01T11:15:42.537

或者你可以使用[图像轮播](http://haifa.baluyos.net/index.php?option=com_content&view=article&id=60%3aobjective-c-image-carousel-tutorial&catid=1%3aprogramming&Itemid=5)

那里的教程非常好，而且设置起来非常简单快捷

# wpf - WPF 和 XNA 绘制理念

> ID：12672020
> 
> 赞同：1
> 
> 时间：2012-10-01T11:02:35.580
> 
> 标签：wpf, xna

我正在 WPF 中创建类似 Paint 的应用程序。我想在那里有图层、历史、效果选项等。但是，我认为 Canvas/InkCanvas 的标准方法对于复杂图像来说太慢了。我考虑创建 XNA 项目并将其嵌入到 WPF 应用程序中以使用现代 GPU 的功能（xna 项目就像绘制画布空间）。这不是坏主意吗？是否可以在一个项目中在 WPF 和 XNA 之间进行通信？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:00:40.477

这是一个坏主意。几个原因：

*   WPF 有自己的内置硬件加速（[见这里](https://stackoverflow.com/q/4384192/165500)）。您不需要使用 XNA 来获得硬件加速。

*   XNA 专为实时 3D 渲染而设计。像素操作是它的弱点——直接读/写像素会失去它的大部分性能优势。请注意，您会发现很难避免进行昂贵的像素读取，因为 XNA 的渲染目标可能会“[丢失](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.rendertarget2d.iscontentlost(v=xnagamestudio.40).aspx)”。

*   XNA 将提高合成层的性能（但您也可以为此使用 WPF）。它可以提高应用大型全图像效果的性能——但是，有些全图像效果只能在 CPU 上合理地完成。

*   XNA 对最大纹理大小和目标平台的硬件功能等施加了限制。

*   您可能不需要像您想象的那样多的性能。您将 XNA 用于以每秒 60 帧连续运行的游戏。图像编辑器不需要那么快。全图像效果操作可以承受相对较长的时间。交互式绘画操作不必一次更新整个图像 - 因此即使在 CPU 上也会很快。

要回答您的最后一个问题 - 是的，您可以在 WPF 中嵌入 XNA。虽然这很棘手 - 琐碎的方法涉及从 XNA 到 WPF 的*非常慢*的缓冲区复制。[这是一个](http://xnawpfcontrol.codeplex.com/)声称可以快速完成的项目。

# java - 单元格选择后更新数据库（JTable）

> ID：12672022
> 
> 赞同：0
> 
> 时间：2012-10-01T11:02:36.170
> 
> 标签：java, swing, jdbc, jtable, actionlistener

我想更新我在 中选择的单元格的值`JTable`，它应该反映数据库 ( `HSQL`)，因为调用了按钮的侦听器。

```
JButton button = new JButton("VIEW AND EDIT");
button.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        int row = table.getSelectedRow();
        int column = table.getSelectedColumn();
        //(**********************)
        System.out.println(row + " : " + column);
        table.requestFocus();
    }
}); 
```

我应该用 s 替换哪段代码`*`？

请为我提供示例代码或执行相同操作的过程。

我的表有 4 列，其中 1 列`PK`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:08:25.520

如果要更新表以使其与数据库的当前状态相匹配，则应该

*   在工作线程上从数据库中检索当前状态
*   在工作线程上创建一个新`TableModel`的，并将其设置在 Event Dispatch Thread 上的现有表上或
*   更新事件调度线程上的现有表模型

如果您想编辑表中的值，并将该状态推送到您的数据库

*   编写/使用表格编辑器
*   当您`TableModel`收到更新（在`setValueAt`方法中）时，将该状态推送到工作线程上的数据库

相关链接：

*   [Swing 中的并发教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
*   [`JTable`教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

# c# - 尝试在单击单个复选框时选择选中列表框中的所有项目

> ID：12672030
> 
> 赞同：2
> 
> 时间：2012-10-01T11:03:08.387
> 
> 标签：c#, winforms

当复选框全部被选中时，我正在尝试选择选中列表框中的所有项目“如何获取，这是我的代码

```
private void checkBox1_CheckedChanged(object sender, EventArgs e)
{
    if (cbAll.Checked)
    {
        if(clbViruslist.Items.Count > 0)
        {
           // here clbViruslist is the checked list o
           // for(int i=0;i<clbViruslist.Items.Count;i++)
           // clbViruslist.SetSelected(i,true);
           // clbViruslist.SetSelected(0,true ) ;
        }
     }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:09:14.337

```
private void cbAll_CheckedChanged(object sender, EventArgs e)
    {
        if (cbAll.Checked)
        {
            foreach (ListItem item in clbViruslist.Items)
            {
                item.Selected = true;                
            }
        }
    } 
```

> 或者这要好得多

```
private void checkBox1_CheckedChanged(object sender, EventArgs e)
    {
       foreach (ListItem item in clbViruslist.Items)
       {
           item.Selected = checkBox1.Checked;                
       }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-24T09:04:46.610

处理“全选”复选框的 CheckedChanged 事件。在此，遍历所有的checkedListBox 项目并检查它们。

```
private void checkBoxAll_CheckedChanged(object sender, EventArgs e)
{
    if (checkBoxAll.Checked)
        for (int i=0; i <= clbViruslist.Items.Count; i++)
            clbViruslist.SetItemChecked(i, true);
} 
```

如果要在取消选中“全选”复选框时取消选中所有已选中的ListBox 项目，请使用以下命令：

```
private void checkBoxAll_CheckedChanged(object sender, EventArgs e)
{
    if (checkBoxAll.Checked)
        for (int i=0; i <= clbViruslist.Items.Count; i++)
            clbViruslist.SetItemChecked(i, true);
    else
        for (int i=0; i <= clbViruslist.Items.Count; i++)
            clbViruslist.SetItemChecked(i, false);
} 
```

如果未选中任何已选中的列表框项目，您可能还想取消选中“全选”复选框。为此，请处理checkedListBox 的ItemCheck 事件，如果任何项目未选中，则取消选中“全选”复选框。

# ios - 如何在越狱设备上执行 theos 调整？

> ID：12672034
> 
> 赞同：-2
> 
> 时间：2012-10-01T11:03:20.943
> 
> 标签：ios, cydia, tweak

我是调整开发的新手，根据不同的教程，现在我对 theos 有了一点了解，但是在为 iphone 创建调整时遇到了很多问题，现在我正在关注

[http://iphonedevwiki.net/index.php/Theos/Getting_Started](http://iphonedevwiki.net/index.php/Theos/Getting_Started)

开始，但我不知道如何在设备上安装此调整，如果您知道这一点，请给我一些指导

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:01:18.060

在这里试试：http: [//brandontreb.com/beginning-jailbroken-ios-development-getting-the-tools/](http://brandontreb.com/beginning-jailbroken-ios-development-getting-the-tools/)

在这里：http: [//iky1e.tumblr.com/post/9561218739/jailbroken-development-starter-pack](http://iky1e.tumblr.com/post/9561218739/jailbroken-development-starter-pack)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-30T10:12:50.590

现在使用 iOSOpenDev 更容易开发调整。即使您不需要通过 USB 连接设备。只要您在 iOS 设备中配置 SSH，您就可以简单地以无线方式部署它们。

[ [http://www.iosopendev.com/][1]](http://www.iosopendev.com/][1])

提示：您只需要在第一次重新启动。安装 Tweak 后，任何进一步的构建更改都将反映在设备中，而无需重新启动。

# c# - 如何获取对象的交集，因为列表中的列表包含这些类对象？

> ID：12672035
> 
> 赞同：0
> 
> 时间：2012-10-01T11:03:21.380
> 
> 标签：c#, list, comparison, ienumerable, intersection

我的清单：

```
List<ArtistAndTags> List1 = new List<ArtistAndTags>(); //Contains about 100 elements.
List<ArtistAndTags> List2 = new List<ArtistAndTags>(); //Contains about 70 elements. 
```

我的课：

```
public class ArtistAndTags
   {
       public string ArtistName { get; set; }
       public List<string> Tags = new List<string>(); //Compare with this list.
   } 
```

我应该在列表之间获取`ArtistName`每个列表，其中包含.`ArtistAndTags``ArtistAndTags``Tags`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:23:47.967

```
 List<ArtistAndTags> List1 = new List<ArtistAndTags>(); 
        List<ArtistAndTags> List2 = new List<ArtistAndTags>();

        var intersectedList = new List<ArtistAndTags>();

        foreach (var item1 in List1)
        {
            foreach (var item2 in List2)
            {
                if (item2.Tags.Intersect(item1.Tags).Any()))
                {
                    intersectedList.Add(item1);
                    intersectedList.Add(item2);
                }
            }
        }

        var result = intersectedList.Select(x => x.ArtistName).ToList(); 
```

# java - java - 如何在Java中JTable的特定行和列上删除Jlist项？

> ID：12672036
> 
> 赞同：1
> 
> 时间：2012-10-01T11:03:32.120
> 
> 标签：java, swing, drag-and-drop, jtable, jlist

我在 JList 中有一个项目列表，我想要的是一次从 JList 中拖动一个项目并放在特定列上，该项目应该只添加该列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:13:35.017

*   AFAIK只能在 JTable中使用[DND](http://docs.oracle.com/javase/tutorial/uiswing/dnd/index.html)，因为[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)是垂直设计的`Rows``Columns`

*   [关于JTable 的 DND 支持](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/dnd/FillViewportHeightDemoProject/src/dnd/FillViewportHeightDemo.java)示例

# ios - UICollectionView 不调用委托方法

> ID：12672041
> 
> 赞同：2
> 
> 时间：2012-10-01T11:03:41.843
> 
> 标签：ios, uicollectionview

我`UICollectionView`在情节提要中设置了一个并连接了数据源和委托出口。我已经通过 nib 注册了一个单元格，我在该`cellForItemAtIndexPath:`方法中将其出列。

所有作品都完美地期望永远不会调用委托方法。例如：当触摸一个单元格时，我希望`didSelectItemAtIndexPath:`被调用。

我已经仔细检查了集合视图的委托 - 它已正确分配。

有人知道不调用这些方法的原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T12:04:18.690

这完全是我的错。我在前面添加了一个透明的子视图，它消耗了触摸 - 一个非常糟糕的错误。

# javascript - 如何在页面加载时加载 javascript 函数？

> ID：12672043
> 
> 赞同：-2
> 
> 时间：2012-10-01T11:03:48.943
> 
> 标签：javascript, jquery

我使用 javascript 在 HTML 页面中生成 2D 条形图。当我尝试将包含条形图的 HTML 页面加载到使用 jQuery`.load()`函数条形图（即脚本）的其他 HTML 页面的 div 标记中时，未加载。

请帮助解决这个问题。

例如，我有条形图`xyz.html`。我正在尝试使用 jquery 函数加载`xyz.html`div标签`abc.html`。`.load()`条形图丢失。

希望得到答复，谢谢提前帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:19:18.003

在 jQuery 中，您可以使用

```
$(document).ready(function(){ 

}); 
```

在页面准备好时加载脚本。因此，您最好将图表生成脚本放在 xyz.html 中的此函数中（如您的示例中所述）。

您也可以`this document.ready`在您的 abc.html 中使用来加载 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:30:49.513

您是自己生成 xyz.html 输出还是由某些 3rd-party 应用程序创建的？

如果您自己生成条形图，我建议只生成正文的内容，而不是整个网站。然后加载到 abc.html 应该可以正常工作。

如果它们不是由您生成的，请使用 mhasan 建议，但您不应该获得整个内容哦 html 标记，而只能获得 body 标记的内容。

顺便说一句：你有一个脚本（js和html）的例子可以看吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:09:09.437

您应该使用 iframe 并加载 html，我认为，我们不能直接在 div 中加载 html。

# iphone - 一元表达式的无效参数类型“void”

> ID：12672046
> 
> 赞同：3
> 
> 时间：2012-10-01T11:04:03.607
> 
> 标签：iphone, objective-c, ios5

我正在编写 iOS 应用程序，但出现此错误：

一元表达式的参数类型“void”无效

这是代码：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
  //code here
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T13:21:13.133

You got your method inside another method's body (maybe you've missed to type its closing `}` ?). That's why you get the error. Try to move it outside somewhere in your `.m` file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:20:27.967

检查函数*上方*的行。你有不平衡的parantheses吗？您是否声明了一些不完整的声明？

# c# - 锁定单个数据透视页面

> ID：12672062
> 
> 赞同：0
> 
> 时间：2012-10-01T11:05:20.410
> 
> 标签：c#, silverlight, xaml

我有一个带有两个数据透视页面的数据透视控件。我想在启动时锁定第一个页面，以便第二个页面只出现在特殊操作上。

据我所知，只有枢轴控件本身是可锁定的，而不是每个单独的页面。

我这样写了 XAML：

```
<toolkit:LockablePivot x:Name="Latinum" Title="pivotControl">
            <controls:PivotItem x:Name="PivotStart" Header="Start"     
                 Margin="24,28,24,27">
                <Grid>

                </Grid>
            </controls:PivotItem>
            <controls:PivotItem x:Name="PivotLauncher" Header="Launcher">
                <Grid/>
            </controls:PivotItem>
        </toolkit:LockablePivot> 
```

并且`PivotStart`应该在启动时锁定。但只有`pivotControl`isLocked 属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:54:28.920

您不能锁定控件：PivotItem 控件。只有整个 LockablePivot 项是可锁定的，以防止更改当前全景图。

关于第二次出现，如果您只想显示第二页，您可以设置 Visibility = Visibility.Visible 并解锁可锁定枢轴。但我不确定是否可以从代码中更改活动的 pivotItem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T12:49:10.283

如果您希望在单击按钮或类似操作后显示第二页，您可以执行以下操作：

```
Latinum.isHitVisible = false;

private void button1_Click(object sender, RoutedEventArgs e)
{
   Latinum.SelectedIndex = 1;
} 
```

因此，如果用户单击按钮，则将选定项目（`PivotStart`在 SelectedIndex 的帮助下）设置为`PivotLauncher`. 您可以在其他活动中使用它；像点击的图像等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-01T10:04:17.193

如果您只想锁定枢轴，您可以使用：

```
Pivt_control_name.IsLocked = true; 
```

并通过将其设置为 false 来解锁；

# sql - 在 Oracle sql 查询中使用“加入”删除

> ID：12672082
> 
> 赞同：58
> 
> 时间：2012-10-01T11:06:37.997
> 
> 标签：sql, oracle, sql-delete

我对 Oracle Sql Queries 并不十分熟悉，因此我在从表中删除某些行时遇到了问题，这些行必须满足包含另一个（连接）表的字段的约束。换句话说，我想编写一个查询来删除包括 JOIN 在内的行。

在我的情况下，我有一个表`ProductFilters`和另一个表`Products`加入 fields `ProductFilters.productID = Products.ID`。我想删除大于或等于 200 的行，并且它们引用的产品具有名称“标记”（名称是产品中的一个字段）`ProductFilters`。`ID`

如果 JOIN 在 Oracle 中的删除查询中是可接受的，我想最初被告知。如果不是，我应该如何修改此查询以使其正常工作，因为在该表单上我收到一个错误：

```
DELETE From PRODUCTFILTERS pf 
where pf.id>=200 
And pf.rowid in 
(
     Select rowid from PRODUCTFILTERS 
     inner join PRODUCTS on PRODUCTFILTERS.PRODUCTID = PRODUCTS.ID 
     And PRODUCTS.NAME= 'Mark'
); 
```

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2015-10-21T14:55:54.587

最近我学到了以下语法：

```
DELETE (SELECT *
        FROM productfilters pf
        INNER JOIN product pr
            ON pf.productid = pr.id
        WHERE pf.id >= 200
            AND pr.NAME = 'MARK') 
```

我认为它看起来比其他提议的代码更干净。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-10-01T11:12:34.553

根据我在上面的评论中链接到的答案，这应该有效：

```
delete from
(
select pf.* From PRODUCTFILTERS pf 
where pf.id>=200 
And pf.rowid in 
  (
     Select rowid from PRODUCTFILTERS 
     inner join PRODUCTS on PRODUCTFILTERS.PRODUCTID = PRODUCTS.ID 
     And PRODUCTS.NAME= 'Mark'
  )
); 
```

或者

```
delete from PRODUCTFILTERS where rowid in
(
select pf.rowid From PRODUCTFILTERS pf 
where pf.id>=200 
And pf.rowid in 
  (
     Select PRODUCTFILTERS.rowid from PRODUCTFILTERS 
     inner join PRODUCTS on PRODUCTFILTERS.PRODUCTID = PRODUCTS.ID 
     And PRODUCTS.NAME= 'Mark'
  )
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-22T17:17:24.403

在 where 子句中使用子查询。对于需要连接的删除查询，此示例将删除连接表“docx_document”中不匹配的行以及“docs_documents”表中创建日期 > 120 天的行。

```
delete from docs_documents d
where d.id in (
    select a.id from docs_documents a
    left join docx_document b on b.id = a.document_id
    where b.id is null
        and floor(sysdate - a.create_date) > 120
 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-01T21:11:06.270

就个人而言，我会使用该`EXISTS`构造。如[本网页](https://www.simboli.eu/p.php?URL_short=ORACLE_DELETE_WITH_JOIN_TABLE)示例中所述：

```
DELETE ProductFilters pf
WHERE EXISTS (
   SELECT *
   FROM Products p
   WHERE p."productID"=pf."productID"
   AND p.NAME= 'Mark'
)
AND pf."id">=200; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-06-18T17:05:06.187

请使用子查询

```
delete from productfilters
where productid in (Select id from products where name='Mark') and Id>200; 
```

# android - 如何以编程方式重新排序现有的 xml 布局视图

> ID：12672089
> 
> 赞同：1
> 
> 时间：2012-10-01T11:07:02.090
> 
> 标签：android, xml, layout, dynamic

我已经有一个名为 .xml 的 xml 文件`my_times.xml`。它包含诸如、、、`TextView`和`EditText`之类`Spinner`的视图`ImageView`。我也在使用一个网络服务，它告诉我这些视图的顺序。例如，对于我的一个表单字段，假设 FirstName 出现在顺序 1 中，所以这个视图将出现在我的表单的第一位。如果服务器上的管理员将此顺序更改为 2，那么 FirstName 将出现在屏幕的第二个位置，依此类推。有没有办法重新排列/重新排序现有的 xml 布局，而不会干扰现有的 xml 布局。我的示例`my_times.xml`如下所示：

```
<LinearLayout>
<TextView.../>
<EditText..../>
<TextView.../>
<Spinner.../>
</LinearLayout> 
```

请建议我重新排列这些现有视图的理想方式。大约有 4 到 5 个这样的屏幕，其中包含我想根据 web=service 响应动态重新排列/重新排序的表单等字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:02:49.750

我实际上并没有猜到它，但似乎在我脑海中闪烁并尝试了以下解决方案并且它起作用了......！正如我之前所说，我的 Web 服务正在给我这些表单字段的顺序。我做了一种方法，它返回的订单与服务器上的订单完全相同。使用这种方法，我简单地使用了以下两种方法来重新排列我的视图：

```
private void removeExistingViewsFromXML(){
        lnrTimesContainer.removeView(tv1);
        lnrTimesContainer.removeView(edt1);
        lnrTimesContainer.removeView(tv2);
        lnrTimesContainer.removeView(spn1);
    } 
```

在拿到订单后，根据情况，我使用了以下方法：

```
lnrTimesContainer.addView(tv2);
lnrTimesContainer.addView(spn1); 
```

而已...！:-)

# javascript - javascript chrome 扩展：向 Iframe 添加元素或字符串

> ID：12672095
> 
> 赞同：1
> 
> 时间：2012-10-01T11:07:18.543
> 
> 标签：javascript, jquery, google-chrome, iframe, google-chrome-extension

我正在编写一个 litell 表单填充器作为 Chrome 扩展，其中 1 个文本字段是 iframe。

我试图在 iframe 正文标签中添加一些字符串。

这是`Iframe`页面加载后网站 html 代码的样子（从 chrome devlopers tools 获取`F12`）：

```
<iframe frameborder="0" id="wysiwygtextfield" style="height: 100px; width: 600px; ">
 #document
 <html>
   <head> </head>
   <body>
     <br/>
   </body>
 </html>
</iframe> 
```

现在我`Content Script`尝试在正文中添加一些字符串：

```
 if ($("#wysiwygtextfield").contents().find("body").length > 0) {
    var body = $("#wysiwygtextfield").contents().find("body").val("some msg");
} 
```

我在不使用 jquery 的情况下尝试了类似的代码，但它仍然没有用。

我读过`Same origin policy`，但我不确定它是否适用于此。因为，脚本在客户端运行。（或 mybee 我错了）。

我能做些什么吗？

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:15:02.337

`val`用于获取/设置表单元素的值，对于正文元素，您应该改用`html`方法。

```
$("#wysiwygtextfield").contents().find("body").html("some msg") 
```

# c# - Linq to Objects DateTime 除了忽略时间

> ID：12672098
> 
> 赞同：3
> 
> 时间：2012-10-01T11:07:38.723
> 
> 标签：c#, linq

我有一个 2`List<DateTime>`并且想要返回不在第二个列表中但忽略时间的第一个列表的子集。

是否可以使用 except 扩展方法来做到这一点？

```
var missingDates = dateList1.Except(dateList2); 
```

我是否需要将两个列表中的时间设置为，`00:00:00`或者有什么方法可以使用该`.Date`属性进行比较？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T11:11:32.023

试试这个：

```
var missingDates = dateList1.Select(x=>x.Date).Except(dateList2.Select(y=>y.Date)); 
```

虽然这完全忽略了时间，这意味着在你的结果中时间也会丢失......

再想一想：您当然可以实现自定义`IEqualityComparer`以保留结果中的时间：

```
public class DateComparer : IEqualityComparer<DateTime>
{
    public bool Equals(DateTime left, DateTime right)
    {
        return left.Date.Equals(right.Date);
    }

    public int GetHashCode(DateTime dateTime)
    {
        return dateTime.Date.GetHashCode();
    }
} 
```

然后使用该比较器：

```
var missingDates = dateList1.Except(dateList2, new DateComparer()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:20:02.320

这将忽略比较中的时间，但返回时间完整的日期：

```
List<DateTime> missingDates = dateList1.Where(list1Item => !dateList2.Exists(list2Item => list2Item.Date == list1Item.Date)).ToList(); 
```

# c# - Windows 应用商店应用程序 - 枚举字体

> ID：12672101
> 
> 赞同：4
> 
> 时间：2012-10-01T11:07:53.403
> 
> 标签：c#, xaml, fonts, windows-8, windows-store-apps

如何枚举 Windows 应用商店应用程序中所有已安装的字体？

`System.Windows.Media.Fonts`命名空间不再可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T01:10:58.763

我认为 Microsoft 鼓励在 WinRT/Windows 应用商店应用程序中使用标准字体，例如[此处](http://msdn.microsoft.com/en-us/library/windows/apps/Hh700394.aspx)概述的内容。

环顾四周后，您似乎无法枚举沙箱中的字体。[这](http://social.msdn.microsoft.com/Forums/en/winappswithcsharp/thread/ef01d444-3d3d-40e5-825b-2973a40b8729)是微软对类似问题的官方回复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T04:46:09.037

为此，您必须使用 DirectWrite。请参阅[DirectWrite 字体枚举示例](http://code.msdn.microsoft.com/windowsapps/DirectWrite-font-60e53e0b)

# php - 使用变量作为会话键

> ID：12672105
> 
> 赞同：0
> 
> 时间：2012-10-01T11:08:13.010
> 
> 标签：php

我正在尝试将会话保存为 1 或 0 并通过另一个变量设置其密钥。虽然当我去使用 SESSION 数据时，它不存在。我正在使用下面的代码，并希望得到任何建议。

```
session_start();
$num ='1';
            $_SESSION[$num] =='0';          
            if(isset($_SESSION[$num])){
                echo 'ran';
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T11:09:41.280

这是比较，而不是分配：

```
$_SESSION[$num] =='0'; 
```

使用单个等号：

```
$_SESSION[$num] = '0'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T11:10:29.697

```
 $_SESSION[$num] =='0'; 
```

这应该是

```
 $_SESSION[$num] ='0'; 
```

`=`用于赋值，`==`用于比较

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:12:25.713

只使用一个等号 = 不是两个 ==

$_SESSION[$num] = '0';

# nosql - 用于 AI 的 NoSQL 图形数据库

> ID：12672118
> 
> 赞同：3
> 
> 时间：2012-10-01T11:09:11.567
> 
> 标签：nosql, graph-databases

我正在尝试构建分布式 AI。它适用于图形，它的大部分问题都依赖于数据库。我需要一个支持图形的 SQL 数据库（或者我可以让它支持） 我需要节点锁定或原子增量支持 最重要的是，我需要图形中每个节点和链接的持久键。大多数图形数据库不提供持久键。我已经尝试过一些数据库，例如 Neo4j，但它缺少持久密钥，而且我无法更改链接的第一个或第二个节点。我的写入和读取几乎相等，并且我在运行时添加了更多节点和链接，因此像图形处理这样的 Pregel 对我不起作用。你有什么建议吗？

# ruby-on-rails - 如何最好地在 Ruby on Rails 中建模公司及其地址

> ID：12672121
> 
> 赞同：0
> 
> 时间：2012-10-01T11:09:19.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model

我有一个“公司”资源。当用户注册一个免费帐户时，他们只需要输入一个电子邮件地址。当他们希望升级他们的帐户时，我需要从他们那里获取更多详细信息，例如他们的地址。如何最好地建模这个？

1.  将地址详细信息存储在公司表中？
2.  有一个单独的“地址”表与公司一对一映射，并且升级将在地址上进行新操作？
3.  在公司资源上创建一个升级帐户并获取地址信息的操作？
4.  创建一个名为“升级”的新资源，将附加地址信息添加到公司表中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:38:11.537

“溢价”应与“成为/代表公司”分开。我会选择一个单独的`Company`模型，有足够的字段用于地址等。

一个`Company`将属于`:user`，一个`User`将拥有一个`:company`。

`adr`如果您需要有关地址使用哪些字段的提示，请参阅微格式 (http://microformats.org/wiki/adr)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:44:00.573

我可以看到您有一个单独的地址模型，或者只是将其存储在公司中。就个人而言，我可能会选择使用单独的模型，因为在任何给定的系统中，您都可能拥有与多个模型相关联的地址。另一个好处是它有助于将与地址相关的责任与公司分开。

我会像这样设置您的验证：

```
Class Company
  has_one :address
  validates_presence_of :address, :if => :upgraded?
  validates_presence_of :email
  ...
  private

  def upgraded?
    <true if user has upgraded, else false>
  end
end 
```

# c++ - 我可以在 Boost 中使用 std::function (C++11 lambda) 吗？

> ID：12672124
> 
> 赞同：1
> 
> 时间：2012-10-01T11:09:28.097
> 
> 标签：c++, boost, c++11

> **可能重复：**
> [使用带有 C++11 lambda 的 Boost 适配器](https://stackoverflow.com/questions/11872558/using-boost-adaptors-with-c11-lambdas)

我想使用 Boost 范围适配器通过 C++11 lambda 函数将映射映射（转换）到列表。像这样：

```
 boost::copy(myMap | transformed([](pair<string, string> p){return p.first;}),
              ostream_iterator<string>(cout, ", ")); 
```

这不起作用，因为 std::function 没有 value_type 类型。我知道这种特殊的转换可以用 map_keys 来完成，但我的观点更笼统。如何在 Boost 中使用 C++11 lambda？

如果没有样板就无法完成，是否有解决此问题的计划？我曾尝试搜索它，但发现的很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:19:46.023

我自己找到了！从 Boost 1.51.0 开始，您添加

```
#define BOOST_RESULT_OF_USE_DECLTYPE 
```

在包含 boost 文件之前，它会神奇地使用 decltype 而不是 ::value_type 来推断返回类型。现在我的例子有效！

# objective-c - NSArray：删除除前 20 个元素之外的所有元素

> ID：12672125
> 
> 赞同：2
> 
> 时间：2012-10-01T11:09:28.987
> 
> 标签：objective-c, nsarray

我有一个可能包含数百个元素的 NSArray。我想删除除前 20 个元素之外的所有元素。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T15:35:40.633

如果您的数组是 NSArray，那么您不能删除对象，因为它是不可变的。您需要做类似 Neo 的回答。如果您的数组是 NSMutableArray，则可以使用以下行获取前 20 项：

```
[myArray removeObjectsInRange:NSMakeRange(20, myArray.count - 20)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:13:45.360

您可以提取前 20 个项目，然后重新分配源数组：

```
NSArray *myHugeArray = [[NSArray alloc] initWithItems:...] // An array with, say, 1000 items
NSArray *tmpArray = [myHugeArray objectsAtIndexes:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, 20)]];
[myHugeArray release];
myHugeArray = [tmpArray retain]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:12:30.540

假设您的 NSArray 是 yourArray，请执行此操作

```
NSMutableArray *temp=[[NSMutableArray alloc]initWithArray:yourArray];
for(int i=0; i<20;i++){
    [temp addObject:[yourArray objectAtIndex:i]];
}
yourArray=[NSArray arrayWithArray:temp]; 
```

# html - CSS - 带浮动的流体 3 列布局

> ID：12672131
> 
> 赞同：3
> 
> 时间：2012-10-01T11:09:41.713
> 
> 标签：html, css, layout, css-float

我是 CSS 的新手，我正在尝试将 3 列布局应用于[CSS Garden 的 html](http://csszengarden.com/)。以下是我的做法：

HTML：

```
<div id="container">
    <div id="pageHeader">Hello</div>
    <div id="quickSummary">Hello 1</div>
    <div id="preamble">Hello 2</div>
    <div id="explanation">Hello 3</div>
    <div id="link">List</div>
</div>​ 
```

CSS：

```
#pageHeader, #quickSummary
{
    float: left;
    clear: left;
}
#preamble, #explanation
{
    margin-left: 100px;
    margin-right: 100px;
}
#link
{
    float: right;
} 
```

然后结果证明，第三列放在了剩下的两列下面，我不知道如何“向上推”。

[我在这里](http://jsfiddle.net/BCJ6C/56/)用 Fiddle 试过了。请帮帮我，谢谢。

编辑：我忘了提到我不应该更改 HTML 文件的结构。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:16:56.990

在设置元素高度时，您的简单方法是更改​​：

```
#link {
  float: right;
  position: relative;
  top: -100px;
} 
```

甚至可能：

```
#link {
  position: absolute;
  top: 0;
  right: 0;
} 
```

# c++ - 如何实现正则表达式

> ID：12672137
> 
> 赞同：2
> 
> 时间：2012-10-01T11:09:53.347
> 
> 标签：c++, regex

我正在开发一个数据库服务器软件产品（参见我的个人资料），我们看到需要在我们的软件中实现自由文本搜索。我们使用的查询语言标准仅支持使用 BT 类型 Regex 的自由文本搜索。我们可以将我们的自由文本数据库索引与 Regex 一起使用的唯一方法似乎是实现我们自己的。我对 SO 的问题是：

*   我在哪里可以找到关于如何实现 BT 风格正则表达式的论文/示例/模式？

*   是否值得考虑采用开源 C/C++ 正则表达式库之一并更改代码以满足我们的需求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:35:40.730

如果我没记错的话，SPARQL 使用基于 PERL 正则表达式的 XPath/XQuery 正则表达式语法（至少 W3C 文档是这么说的）

如果确实如此，那么您可以使用来自[http://www.pcre.org/的 PCRE](http://www.pcre.org/)

它被授权为 BSD，因此您将能够在商业产品中使用它

如果您的语法稍作修改，您可能可以编写一个小例程将其规范化为 PCRE 使用的 PERL 语法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:30:46.983

我在 REGEX indexing online 上找到了两篇关于该主题的论文；一份来自贝尔实验室，一份来自加州大学洛杉矶分校/IBM。我仍然不确定是使用现有的 Regex 库并对其进行修改还是从头开始编写一个。

# matlab - 将 Matlab 和加载的数据放在不同的硬盘上会减慢执行速度吗？

> ID：12672141
> 
> 赞同：1
> 
> 时间：2012-10-01T11:10:05.873
> 
> 标签：matlab, hard-drive

Matlab 程序与 Windows 一起安装在硬盘 C 上，而加载的脚本和数据保存在硬盘 D 上。这是否会导致数据加载速度变慢和脚本执行速度变慢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:00:35.937

在有人提供相反的确凿证据之前，我认为这不是你需要关心的事情。如果对在不同磁盘上定位数据和 Matlab 的执行率有任何影响，那将是微不足道的。

一旦加载了 Matlab 程序（在您的情况下从驱动器 C 加载），它将位于内存中并等待您的命令。一些非核心功能可能会按需从磁盘读取，但您不太可能注意到并且发现很难衡量这需要的时间。然后从 C 或 D 读取数据和程序并不重要。

我期待着证明我错了的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T11:36:56.853

我比较了从外部 USB-2 驱动器和内部（IDE 或 S-ATA）驱动器加载 140 Mb .mat 文件。

从外部驱动器加载时间：> 15 分钟 从内部驱动器加载时间：几秒钟

然而，有时从外部驱动器加载也很快。

# mongodb - 使用 morphia 将现有索引转换为唯一的（mongodb）

> ID：12672142
> 
> 赞同：0
> 
> 时间：2012-10-01T11:10:06.600
> 
> 标签：mongodb, morphia

我在使用 Morhia 的字段上有一个现有索引。

```
@Indexed
public String field; 
```

现在我想将其转换为唯一索引。

```
@Indexed(unique = true)
public String field; 
```

在应用程序启动时，我调用 db.ensureIndexes() - 但是索引的唯一性并未反映在 mongo 中。

为什么会失败？实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:15:51.040

MongoDB中索引的属性创建后不能修改；因此您不能直接将非唯一索引转换为唯一索引。您必须手动删除索引，然后才能将其重新创建为唯一索引。您可以直接使用 mongo shell 执行此操作：请参阅[http://www.mongodb.org/display/DOCS/Indexes#Indexes-DroppingIndexes](http://www.mongodb.org/display/DOCS/Indexes#Indexes-DroppingIndexes)。

# python - 有没有办法在远程机器上运行 python 脚本而不发送它？

> ID：12672143
> 
> 赞同：10
> 
> 时间：2012-10-01T11:10:07.410
> 
> 标签：python, ssh

我可以使用 ssh 在远程机器上运行 shell 脚本。例如：

```
ssh -l foo 192.168.0.1 "`cat my_script.sh`" 
```

现在我想在不发送 .py 文件的情况下运行 python 脚本。有什么办法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T11:17:35.150

这会将您计算机上的 my_script.py 的内容放入一个 echo 命令中，该命令在远程计算机上执行并传递给 python。

```
ssh -l foo 192.168.0.1 "echo '`cat my_script.py`' | python" 
```

如果你想添加命令行参数，它应该像将它们放在 python 命令之后一样简单，如下所示：

```
ssh -l foo 192.168.0.1 "echo '`cat my_script.py`' | python -testSwitch -arg 0" 
```

确保命令行参数位于您发送到远程主机的命令的双引号内。

# php - XInclude 未在使用 PHP 的 XSLT 转换中进行评估

> ID：12672146
> 
> 赞同：1
> 
> 时间：2012-10-01T11:10:25.517
> 
> 标签：php, xslt-1.0, xinclude

我正在尝试包含不同的源文件（例如 file1.xml 和 file2.xml），并为使用 PHPs 的 XSLT 转换解析这些包含`XSLTProcessor`。这是我的输入：

**源代码.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<root xmlns:xi="http://www.w3.org/2001/XInclude">
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="file1.xml" />
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="file2.xml" />
</root> 
```

**变换.xsl**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xi="http://www.w3.org/2001/XInclude">
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" />
        </xsl:copy>
    </xsl:template>
</xsl:transform> 
```

**转换.php**

```
<?php
function transform($xml, $xsl) {
    global $debug;

    // XSLT Stylesheet laden
    $xslDom = new DOMDocument("1.0", "utf-8");
    $xslDom->load($xsl, LIBXML_XINCLUDE);

    // XML laden
    $xmlDom = new DOMDocument("1.0", "utf-8");
    $xmlDom->loadHTML($xml);                // loadHTML to handle possibly defective markup

    $xsl = new XsltProcessor();             // create XSLT processor
    $xsl->importStylesheet($xslDom);        // load stylesheet
    return $xsl->transformToXML($xmlDom);   // transformation returns XML
}
exit(transform("source.xml", "transform.xsl"));
?> 
```

我想要的输出是

```
<?xml version="1.0" encoding="utf-8" ?>
<root>
    <!-- transformed contents of file1.xml -->
    <!-- transformed contents of file2.xml -->
</root> 
```

我当前的输出是我的源文件的精确副本：

```
<?xml version="1.0" encoding="utf-8" ?>
<root>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="file1.xml" />
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="file2.xml" />
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:30:39.690

事实证明，我只是忘记了我的 PHP 代码中的一个简单但重要的行。在转换完成之前，我必须打电话[`DOMDocument::xinclude`](http://php.net/manual/en/domdocument.xinclude.php)解决包含问题。

完整的例子：

```
<?php
function transform($xml, $xsl) {
    global $debug;

    // XSLT Stylesheet laden
    $xslDom = new DOMDocument("1.0", "utf-8");
    $xslDom->load($xsl, LIBXML_XINCLUDE);

    // XML laden
    $xmlDom = new DOMDocument("1.0", "utf-8");
    $xmlDom->load($xml);

    $xmlDom->xinclude();                    // IMPORTANT!

    $xsl = new XsltProcessor();
    $xsl->importStylesheet($xslDom);
    return $xsl->transformToXML($xmlDom);
}
exit(transform("source.xml", "transform.xsl"));
?> 
```

# sql - 在具有不同数据类型的列上的 2 个表之间移动数据

> ID：12672150
> 
> 赞同：3
> 
> 时间：2012-10-01T11:10:40.643
> 
> 标签：sql, sql-server, sqldatatypes

我在 2 个不同的数据库中有 2 个表。第一个表（客户）有很多数据，有 10-12 列。然后我有第二个表（CustumersNew），它有新的列，应该代表与客户相同的列，只是**名称**和**数据类型**不同。CustomerNew 当前为空。我想**将**所有数据从表 Custumers 移动到表 CustumersNew。

这里的问题是表 Custumers UserID 列的数据类型为*uniqueidentifier* ，而 CustumerNew ID 列的数据类型为*int*。因此，与其他库伦一样，它们在数据类型上完全不匹配。

如何将数据从 A 移动到 B？

**编辑：** 我正在使用 MS-SQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:16:26.640

我会使用该`INSERT INTO CustumersNew(<column list>) SELECT <column list from Custumers CONVERTed to data types that match the data type of corresponding columns in CustumersNew> FROM Custumers`声明。

例如

```
INSERT INTO CustumersNew(UserId, Name, Age)
SELECT UserId, CONVERT(NVARCHAR(128), Name), CONVERT(INT, Age) 
FROM Custumers 
```

我假设 Name 和 Age 在这两个表中是不同的类型。您需要编写类似的转换语句，其中数据类型参数应与 CustumersNew 表中的数据类型匹配。

由于`uniqueidentifier`无法将 UserId/CustomerId 映射到整数，并且我从功能的角度怀疑此列中的值的相关性，因此我会将 UserId/CustomerId 建模为新表中的`AUTO`/`IDENTITY`列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:19:39.170

好吧，您不能将 a 存储`uniqueidentifier`在`int`列中，因此您必须想出一组新的键。

大多数数据库系统都提供了一种用整数值对记录进行顺序编号的机制。在 SQL Server 中，他们使用`IDENTITY`列，在 Oracle 中他们使用`sequences`，我认为在 MySql 中您将列指定为`auto_increment`.

设置好新表（使用自动编号方案）后，只需使用 SQL 插入数据：

`INSERT INTO CUSTOMERS_NEW (COL2, COL3, COL4) SELECT COL2, COL3, COL4 FROM CUSTOMERS`

请注意，插入语句不包括 ID 列 - 应该为您自动填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-09T07:59:44.723

如果你是`not able to use insert`，`have to use update`它会是这样的

```
UPDATE change 
SET    widget_id = (SELECT insert_widget.widget_id 
                    FROM   insert_widget 
                    WHERE  change.id = insert_widget.id) 
WHERE  change.id = (SELECT insert_widget.id 
                    FROM   insert_widget 
                    WHERE  change.id = insert_widget.id) 
```

在这个例子中，我想将`widget_id`列表单`insert_widget`表移动到`change`表中，但是更改表已经有数据，所以我必须使用更新语句

# android - ListView 项目作为照片滑块

> ID：12672151
> 
> 赞同：1
> 
> 时间：2012-10-01T11:10:50.773
> 
> 标签：android, listview, gesture, swipe, swipe-gesture

我需要创建应该显示为照片滑块的列表视图。我的意思是它只能是屏幕上的一项。并且当用户开始向上或向下滑动时，上方或下方的项目变得可见，但不会填满屏幕。并且当用户在某个定义的点滑动它时，这个项目会出现在屏幕上。等等。

作为照片滑块。你打开它，在屏幕上只看到一张照片。然后单击照片并开始向下滑动。因此，您在当前底部的滑动照片可以满足屏幕。我想在我的列表视图项目中实现这样的原则。

![在此处输入图像描述](../Images/a57ee1f17cf5a91f7533b1d8e79d328b.png) ![在此处输入图像描述](../Images/5a7f15fac2136bbf7d10c6055ecc9ace.png) ![在此处输入图像描述](../Images/39e9c92145fe23244b92f05ba79594da.png)

我附上了可以描述我想要实现的文件。所以位置 1 - 列表视图的开始位置。然后用户触摸屏幕并开始向左滑动。您可以在第二张图片上看到 - 用户还看到了第 1 项，但也看到了第 2 项。最后，当他将第 2 个项目滑到最后时，他只能在屏幕上看到它。我很抱歉这种奇怪的解释，但我认为它可以让我的问题更清楚。此外，我想在我的列表视图中实现垂直滑动，而不是水平滑动，它应该只有一个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:55:17.243

我仍然不确定我是否得到了你，但我能收集到什么？您在寻找 View Pager 吗？[如果是，那么在这个链接](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)上给出了一个很好的教程。View Pager 用于 google play 应用的主页。尝试打开它并从右左上向下滑动，看看这是不是你想要的？此外，从图像看来，标题似乎已添加到 View Pager，可以通过使用[view pager indicator](http://viewpagerindicator.com/)轻松添加。我希望我对你有所帮助。如果您有任何疑问，请随时提问。

# jquery - jQuery - 通过 JSON 数组搜索

> ID：12672157
> 
> 赞同：3
> 
> 时间：2012-10-01T11:11:34.020
> 
> 标签：jquery, html, json

我需要搜索 JSON 数据并找到包含“种类”“播放列表”的每个对象，然后浏览曲目并提取将放入 hmtl 列表的信息。问题是在某些情况下（取决于 URL 的类型）而不是包含所有对象的多维数组，json 信息只是一个单一的对象。

以下是两种 url 类型。

这是一个仅包含一层信息的播放列表。 [http://api.soundcloud.com/playlists/1980151.json?client_id=bcc776e7aa65dbc29c40ff21a1a94ecd](http://api.soundcloud.com/playlists/1980151.json?client_id=bcc776e7aa65dbc29c40ff21a1a94ecd)

这是一个仅包含多个播放列表作为对象的数组。 [http://api.soundcloud.com/users/dubstep/playlists.json?client_id=bcc776e7aa65dbc29c40ff21a1a94ecd](http://api.soundcloud.com/users/dubstep/playlists.json?client_id=bcc776e7aa65dbc29c40ff21a1a94ecd)

我目前的代码是这样的：

```
$.getJSON('http://api.soundcloud.com/users/dubstep/playlists.json?client_id=bcc776e7aa65dbc29c40ff21a1a94ecd', { get_param: 'value' }, function(url_data) {
$.each(url_data, function (i, elem) {
    if (elem.kind === 'playlist') {
        $.each(elem.tracks, function (i, elem) {
            console.log(elem.title);
        });
    }
}); 
```

});

它**仅**在处理有多个播放列表的“用户”网址时才有效。

总结一下我的问题，我需要一种方法来搜索数组的所有级别，以查找类型 === 播放列表的级别。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T11:36:01.087

这应该可以满足您的需求。

```
$.each(json, function (i, elem) {
    if (elem.kind === 'playlist') {
        $.each(elem.tracks, function (i, elem) {
            console.log(elem.title);
        });
    }
}); 
```

**更新：**

这将适用于任一 URL。此外，这里有一个更高级的客户端输出的小提琴：http: [//jsfiddle.net/jTLvE/](http://jsfiddle.net/jTLvE/)

```
var parse = function (json) {
    $.each(json, function (i, elem) {
        if (elem.kind === 'playlist') {
            $.each(elem.tracks, function (i, elem) {
                console.log(elem.title);
            });
        }
    });
},
parseReturnedData = function (json) {
    var isObject = (typeof json === 'object' && json instanceof Object),
        isArray = (typeof json === 'object' && json instanceof Array),
        newArray = [];
    if (isArray) {
        parse(json);
    } else if (isObject) {
        newArray.push(json);
        parse(newArray);
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:15:11.983

你试过[json路径](http://goessner.net/articles/JsonPath/)吗？[我用过它，它又小又快，尤其是用于搜索 json 树（虽然我会使用flock](https://github.com/danstocker/flock)来搜索和编写）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-01T11:19:58.327

试试这个代码：

```
var objJson = jQuery.parseJSON(json);
jQuery.each(objJson , function(i, val) {
      alert(val);
    }); 
```

# css - 如何更改 primefaces 组件的样式

> ID：12672158
> 
> 赞同：0
> 
> 时间：2012-10-01T11:11:36.063
> 
> 标签：css, primefaces

如何改变 primefaces 组件的样式。尤其是背景颜色`<p:layoutUnit`。

这是我的代码：

```
<p:layout fullPage="true">
        <!-- TITRE -->
        <p:layoutUnit position="north" size="auto" resizable="true" closable="true"  >
            <ui:include src="titre.xhtml"></ui:include>
        </p:layoutUnit>
        <!-- CONTENT -->
        <p:layoutUnit position="center" size="25%" header="Options" >
                <ui:include src="titre.xhtml"></ui:include>
        </ui:include>
    <p:layout fullPage="true"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:54:12.270

您可以为红色背景添加： style="background: red !important"。您还可以推出自己的主题。primefaces 手册中描述了该过程（可在线免费获得）：

```
<p:layoutUnit position="north" style="background: red !important;" size="auto" resizable="true" closable="true"  > 
```

如果您需要更具体的内容 - 请随时询问。

# c# - 将系统/环境信息传递给 log4net

> ID：12672162
> 
> 赞同：1
> 
> 时间：2012-10-01T11:11:53.020
> 
> 标签：c#, log4net, environment

可以将系统/环境信息传递到我的 C# WinForms 应用程序中的 log4net 日志吗？

最好了解他们正在使用的 Windows 版本、是否安装了任何 Service Pack、他们安装了哪些 .Net 等详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:19:36.503

好久没用Log4Net了，难道不能把这个信息设置成全局或者线程上下文吗？

> log4net.GlobalContext.Properties["WindowsVersion"] = windowsVersion;

然后，您可以使用以下模式在日志文件中输出此信息：

> %property{Windows 版本}

有关详细信息，请参阅[http://logging.apache.org/log4net/release/manual/contexts.html](http://logging.apache.org/log4net/release/manual/contexts.html)。

# java - Kindle2.0隐藏软键菜单栏

> ID：12672164
> 
> 赞同：1
> 
> 时间：2012-10-01T11:12:05.627
> 
> 标签：java, android, kindle-fire

我在 KindleFire 2.0 中做一个应用程序，在我的活动中以全屏模式显示应用程序。但我仍然可以看到软菜单栏。有什么办法可以隐藏菜单栏？请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:27:57.077

有几个选项 - Fire 有一个“全屏”模式，它可以让拖动手柄可见，只需轻按一下即可恢复屏幕上的软键，或者他们称之为 ICS 全屏模式，它隐藏所有内容（你轻按带回拖动手柄然后点击拖动手柄带回菜单）

[https://developer.amazon.com/sdk/fire/cx-guidelines.html#Fullscreen](https://developer.amazon.com/sdk/fire/cx-guidelines.html#Fullscreen)

# python - 将布尔字符串写入二进制文件？

> ID：12672165
> 
> 赞同：2
> 
> 时间：2012-10-01T11:12:09.153
> 
> 标签：python, file-io, binary, binaryfiles

我有一串布尔值，我想使用这些布尔值作为位创建一个二进制文件。这就是我正在做的事情：

```
# first append the string with 0s to make its length a multiple of 8
while len(boolString) % 8 != 0:
    boolString += '0'

# write the string to the file byte by byte
i = 0
while i < len(boolString) / 8:
    byte = int(boolString[i*8 : (i+1)*8], 2)
    outputFile.write('%c' % byte)

    i += 1 
```

但这一次生成输出 1 个字节并且速度很慢。什么是更有效的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:32:30.637

如果您先计算所有字节然后将它们全部写在一起，它应该会更快。例如

```
b = bytearray([int(boolString[x:x+8], 2) for x in range(0, len(boolString), 8)])
outputFile.write(b) 
```

我也在使用一个`bytearray`自然容器，也可以直接写入你的文件。

* * *

如果合适的话，您当然可以使用库，例如[​​ bitarray](http://pypi.python.org/pypi/bitarray/)和[bitstring](http://python-bitstring.googlecode.com/)。使用后者你可以说

```
bitstring.Bits(bin=boolString).tofile(outputFile) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T22:34:06.873

[这是另一个答案，这一次使用来自PyCrypto - Python Cryptography Toolkit](https://www.dlitz.net/software/pycrypto/)的工业级实用程序函数，在 2.6 版（当前最新的稳定版本）中，它在`pycrypto-2.6/lib/Crypto/Util/number.py`.

之前的评论说：
    `Improved conversion functions contributed by Barry Warsaw, after careful benchmarking`

```
import struct

def long_to_bytes(n, blocksize=0):
    """long_to_bytes(n:long, blocksize:int) : string
    Convert a long integer to a byte string.

    If optional blocksize is given and greater than zero, pad the front of the
    byte string with binary zeros so that the length is a multiple of
    blocksize.
    """
    # after much testing, this algorithm was deemed to be the fastest
    s = b('')
    n = long(n)
    pack = struct.pack
    while n > 0:
        s = pack('>I', n & 0xffffffffL) + s
        n = n >> 32
    # strip off leading zeros
    for i in range(len(s)):
        if s[i] != b('\000')[0]:
            break
    else:
        # only happens when n == 0
        s = b('\000')
        i = 0
    s = s[i:]
    # add back some pad bytes.  this could be done more efficiently w.r.t. the
    # de-padding being done above, but sigh...
    if blocksize > 0 and len(s) % blocksize:
        s = (blocksize - len(s) % blocksize) * b('\000') + s
    return s 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T11:31:12.510

[您可以使用数组](http://docs.python.org/library/array.html)类尝试此代码：

```
import array

buffer = array.array('B')

i = 0
while i < len(boolString) / 8:
    byte = int(boolString[i*8 : (i+1)*8], 2)
    buffer.append(byte)
    i += 1

f = file(filename, 'wb')
buffer.tofile(f)
f.close() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T11:32:04.633

您可以将布尔字符串转换为`long`using `data = long(boolString,2)`。然后将此长写入磁盘，您可以使用：

```
while data > 0:
    data, byte = divmod(data, 0xff)
    file.write('%c' % byte) 
```

但是，不需要创建一个布尔字符串。使用`long`. 该`long`类型可以包含无限数量的位。使用位操作，您可以根据需要设置或清除位。然后，您可以在单个写入操作中将 long 写入整个磁盘。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T13:25:03.410

一个[助手类](http://rosettacode.org/wiki/Bitwise_IO#Python)（如下所示）使它变得容易：

```
class BitWriter:
    def __init__(self, f):
        self.acc = 0
        self.bcount = 0
        self.out = f

    def __del__(self):
        self.flush()

    def writebit(self, bit):
        if self.bcount == 8 :
            self.flush()
        if bit > 0:
            self.acc |= (1 << (7-self.bcount))
        self.bcount += 1

    def writebits(self, bits, n):
        while n > 0:
            self.writebit( bits & (1 << (n-1)) )
            n -= 1

    def flush(self):
        self.out.write(chr(self.acc))
        self.acc = 0
        self.bcount = 0

with open('outputFile', 'wb') as f:
    bw = BitWriter(f)
    bw.writebits(int(boolString,2), len(boolString))
    bw.flush() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T11:15:41.147

使用[`struct`包](http://docs.python.org/library/struct.html)。

> 这可用于处理存储在文件中或来自网络连接以及其他来源的二进制数据。

**编辑：**

`?`用作.[格式字符](http://docs.python.org/library/struct.html#format-characters)的示例`bool`。

```
import struct

p = struct.pack('????', True, False, True, False)
assert p == '\x01\x00\x01\x00'
with open("out", "wb") as o:
    o.write(p) 
```

让我们看一下文件：

```
$ ls -l out
-rw-r--r-- 1 lutz lutz 4 Okt  1 13:26 out
$ od out
0000000 000001 000001
000000 
```

再读一遍：

```
with open("out", "rb") as i:
    q = struct.unpack('????', i.read())
assert q == (True, False, True, False) 
```

# security - 如何轻松登录、Symfony2 Security、FOSUserBundle、FOSRestBundle？

> ID：12672169
> 
> 赞同：15
> 
> 时间：2012-10-01T11:12:22.707
> 
> 标签：security, symfony, login, fosuserbundle

我希望能够通过 ws 登录。

我试图用 curl 指向来模拟这个，`/login`但它只处理 HTML 等。顺便说一下，它需要一个我不想要的 CSRF。

所以我想要么禁用 CRSF（来自`login_check`），要么自己找到一种方法。

我可以覆盖捕获路由时使用的 LoginListener（它在哪里？）`login_check`。

任何线索？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-09T13:11:00.173

有许多方法可以向 REST Web 服务提供身份验证和授权，但最被接受的一种似乎是[OAuth](http://en.wikipedia.org/wiki/OAuth)。Facebook、Twitter、Google、Github 等都使用它。

Friends Of Symfony 的人员有一个捆绑包来在 Symfony2 上实现 OAuth 身份验证和授权：[https](https://github.com/FriendsOfSymfony/FOSOAuthServerBundle) ://github.com/FriendsOfSymfony/FOSOAuthServerBundle我认为这就是您正在寻找的。

编辑：有关 Oauth 的更多信息，Cloudfoundry 的人员几天前发布了一篇有趣的[文章。](http://blog.cloudfoundry.org/2012/10/09/oauth-rest/)

关于您可以使用的其他选项，一个简单的选项是基本身份验证：

```
firewalls:
    main:         
        pattern: ^/rest
        anonymous: ~
        form_login: false            
        provider: fos_user_bundle
        http_basic:
            realm: "REST Service Realm" 
```

EDIT2：我看到仍然有人投票这个答案，我认为需要注意的是，在撰写此答案时，JWT 还不是一个选项，但在某些用例上它可能比 OAuth 更好（例如，当 API 将被您自己的应用程序使用时）。因此，这里是 Symfony2/3 的良好 JWT 实现的链接：[https ://github.com/lexik/LexikJWTAuthenticationBundle/blob/master/Resources/doc/index.md](https://github.com/lexik/LexikJWTAuthenticationBundle/blob/master/Resources/doc/index.md)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T17:03:35.960

您不应该使用 CURL 来通过您的 Web 服务对用户进行身份验证。

查看 ResettingController.php（在 FOSUserBundle/Controller 中）和 LoginManager.php（在 Security 中），有一个示例如何使用 Symfony Security 对用户进行身份验证：

控制器/ResettingController.php

```
 /**
 * Authenticate a user with Symfony Security
 *
 * @param \FOS\UserBundle\Model\UserInterface        $user
 * @param \Symfony\Component\HttpFoundation\Response $response
 */
protected function authenticateUser(UserInterface $user, Response $response)
{
    try {
        $this->container->get('fos_user.security.login_manager')->loginUser(
            $this->container->getParameter('fos_user.firewall_name'),
            $user,
            $response);
    } catch (AccountStatusException $ex) {
        // We simply do not authenticate users which do not pass the user
        // checker (not enabled, expired, etc.).
    }
} 
```

并在 Security/LoginManager.php

```
 final public function loginUser($firewallName, UserInterface $user, Response $response = null)
{
    $this->userChecker->checkPostAuth($user);

    $token = $this->createToken($firewallName, $user);

    if ($this->container->isScopeActive('request')) {
        $this->sessionStrategy->onAuthentication($this->container->get('request'), $token);

        if (null !== $response) {
            $rememberMeServices = null;
            if ($this->container->has('security.authentication.rememberme.services.persistent.'.$firewallName)) {
                $rememberMeServices = $this->container->get('security.authentication.rememberme.services.persistent.'.$firewallName);
            } elseif ($this->container->has('security.authentication.rememberme.services.simplehash.'.$firewallName)) {
                $rememberMeServices = $this->container->get('security.authentication.rememberme.services.simplehash.'.$firewallName);
            }

            if ($rememberMeServices instanceof RememberMeServicesInterface) {
                $rememberMeServices->loginSuccess($this->container->get('request'), $response, $token);
            }
        }
    }

    $this->securityContext->setToken($token);
} 
```

# entity-framework - 无法使用 TFS 从数据库更新 EF 模型

> ID：12672171
> 
> 赞同：2
> 
> 时间：2012-10-01T11:12:28.230
> 
> 标签：entity-framework, tfs, visual-studio-2012

我最近开始使用 TFS 2012 并编辑了几个文件并签入没有任何问题。但是，我刚刚开始研究 EF 数据模型，尽管能够打开文件，但实体设计器右键菜单上的“从数据库更新模型”选项显示为灰色/禁用。

我对此有点困惑。我尝试使用“允许其他用户签出但阻止他们签入”来签出文件，但这没有任何区别。也不会检查项目所在的整个文件夹。

有谁知道我做错了什么？

**编辑：**

我发现如果我在 TFS 中创建一个项目并向其中添加一个实体模型，那么我可以对其进行更新。但是，如果我将现有项目导入 TFS，然后尝试编辑 .edmx 文件，那么就会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:10:13.023

我设法解决了这个问题，我会把它贴在这里以防万一其他人遇到这个问题：

该项目没有正确设置。我正在编辑“本地路径”中的文件，但没有先打开项目（现在似乎有点愚蠢，但这是我第一次使用 TFS，我假设在 TFS 中打开项目将其作为 VS 中的项目打开） . 当我在源代码管理资源管理器中双击 .csproj 文件时，系统提示我：“您打开的解决方案受源代码管理但当前未配置为 Visual Studio 中的集成源代码管理。您想将此解决方案绑定到现在是源头控制吗？”

单击“是”正确打开项目，我可以从数据库运行更新模型。

# multithreading - Delphi XE2 GetTextExtentPoint32 在被线程调用时失败

> ID：12672178
> 
> 赞同：0
> 
> 时间：2012-10-01T11:13:04.390
> 
> 标签：multithreading, delphi, delphi-xe2

这个简单的示例在双击 Button1 时引发异常（无效参数）。

您可能需要多次单击才能收到消息。

这段代码有什么问题？

```
type
  TForm2 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  end;

  TTestThread = class(TThread)
  protected
    procedure Execute; override;
  end;

var
  Form2: TForm2;

implementation

{$R *.dfm}

procedure TForm2.Button1Click(Sender: TObject);
var MyThread : TTestThread;
begin
  MyThread:=TTestThread.Create(true);
  MyThread.FreeOnTerminate:=True;
  MyThread.Priority:=tpHighest;
  MyThread.Resume;
end;

{ TTestThread }

procedure TTestThread.Execute;
var len : integer;
begin
 len := Form2.Canvas.TextWidth('test');
 if (len=0) then
  Raise Exception.Create(SysErrorMessage(GetLastError));
end;

end. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T11:15:56.657

Windows GUI 函数具有线程关联性。这个约束被传递到 VCL。这意味着您只能从主 GUI 线程访问 VCL 例程。

在您的代码中，您通过`Form2.Canvas.TextWidth`从主 GUI 线程以外的线程调用违反了此规则。当该代码映射到 Win32 时，它最终`GetTextExtentPoint32`会使用与调用者不同的线程相关联的设备上下文进行调用。那是违反规则的。

解决办法是遵守规则。仅从主 GUI 线程调用 VCL 函数。

# android - 恢复将数据放入 JSONObject 的顺序

> ID：12672180
> 
> 赞同：3
> 
> 时间：2012-10-01T11:13:12.630
> 
> 标签：android, json

我想要将 json 插入此代码中，但它的工作原理不同！我首先想要`CustomerID`然后`Name`但是这个json给出了`Name`第一个然后`CustomerID`。我已经根据需要插入了 json，但是为什么它会给出不同的结果，请帮助我..

```
 JSONObject json = new JSONObject();

    try {
        json.put("CustomerID", "069C21F1-EE87-4FB4-A129-478AEAA454FF");
        json.put("Name", "Name_" + (int) Math.random() * 1000);
} catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T11:31:56.600

这是 JSONObject 的预期行为。根据它的定义，它说：

**一个对象作为一组无序的名称/值对**

但是，如果您希望订购它，请执行以下操作：

```
1\. prepare a LinkedHashMap object with elements

2\. convert it to JSONObject 
```

**例子：**

```
Map obj = new LinkedHashMap();
obj.put("a", "String1");
obj.put("b", new Integer(1));
obj.put("c", new Boolean(true));
obj.put("d", "String2");
JSONObject json = new JSONObject(obj); 
```

**编辑：**

下载这个库：

[https://github.com/douglascrockford/JSON-java](https://github.com/douglascrockford/JSON-java)

将所有文件保存在项目的新包中

而不是使用**org.json.JSONObject**使用您从下载的库中添加的**your.package.JSONObject 。**

现在打开**JSONObject.java**文件并在构造函数中将**HashMap()**更改为**LinkedHashMap()**

```
public JSONObject(Map map) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:15:48.670

您可以将该名称放在 CustomerID 行之前以满足您自己的需要，但这根本不会产生影响。因为json中的数据是以键值对的形式提取出来的。它独立于其放置的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T10:35:39.613

您可以使用累积（）

请参阅[android 开发人员参考](http://developer.android.com/reference/org/json/JSONObject.html#accumulate%28java.lang.String,%20java.lang.Object%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-15T20:15:34.183

[一个有用的答案在这里](https://stackoverflow.com/a/29491895/1593398)

[Gson](https://code.google.com/p/google-gson/)如果你的朋友。这会将有序映射打印成有序的 JSON 字符串。

我使用的是最新版本的 Gson（2.3.1），您可以通过本文底部的以下选项下载它。

```
import java.util.LinkedHashMap;
import java.util.Map;

import com.google.gson.Gson;

public class OrderedJson {
    public static void main(String[] args) {
        // Create a new ordered map.
        Map<String,String> myLinkedHashMap = new LinkedHashMap<String, String>();

        // Add items, in-order, to the map.
        myLinkedHashMap.put("1", "first");
        myLinkedHashMap.put("2", "second");
        myLinkedHashMap.put("3", "third");

        // Instantiate a new Gson instance.
        Gson gson = new Gson();

        // Convert the ordered map into an ordered string.
        String json = gson.toJson(myLinkedHashMap, LinkedHashMap.class);

        // Print ordered string.
        System.out.println(json); // {"1":"first","2":"second","3":"third"}
    }
} 
```

**依赖选项 Maven**

```
<dependency>
    <groupId>com.google.code.gson</groupId>
    <artifactId>gson</artifactId>
    <version>2.3.1</version>
</dependency> 
```

**摇篮**

```
compile 'com.google.code.gson:gson:2.3.1' 
```

或者您可以访问[Maven Central](http://search.maven.org/#artifactdetails%7Ccom.google.code.gson%7Cgson%7C2.3.1%7Cjar)以获取更多下载选项。

# login - Vimeo API AuthorizationUrl 无需登录

> ID：12672181
> 
> 赞同：2
> 
> 时间：2012-10-01T11:13:17.637
> 
> 标签：login, oauth, authorization, vimeo

我正在使用 Vimeo API 在 Web 应用程序上下文中获取视频，我有一个简单的问题（我希望：P）

可以使用 oAuth 协议并通过以下链接请求应用程序授权：[https://vimeo.com/oauth/authorize?oauth_token=XXXX](https://vimeo.com/oauth/authorize?oauth_token=XXXX)，而不强制用户登录浏览器？

我注意到，如果我没有登录 Vimeo，当我转到[https://vimeo.com/oauth/authorize?oauth_token=XXXX](https://vimeo.com/oauth/authorize?oauth_token=XXXX)时，Vimeo 会将我重定向到登录页面......

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:07:00.357

我找到了 =)

您可以使用应用程序凭据或登录数据创建访问令牌。在这种情况下，您不必进行授权调用。

示例（取自评论）：

```
String vimeoAPIURL = "vimeo.com/api/rest/v2?video_id=213";
OAuthRequest request = new OAuthRequest(Verb.GET, vimeoAPIURL);

request.addQuerystringParameter("format", "json");
request.addQuerystringParameter("method","vimeo.videos.getUploaded";
request.addQuerystringParameter("user_id", "user137");
request.addQuerystringParameter("full_response", "true");
request.addQuerystringParameter("method","vimeo.videos.getThumbnailUrls");

service.signRequest(accessToken, request);
Response response = request.send();

Syso(response.getCode());
Syso(response.getBody()); 
```

# c# - 访问过程信息的内容

> ID：12672185
> 
> 赞同：0
> 
> 时间：2012-10-01T11:13:47.290
> 
> 标签：c#, process

我使用以下代码创建了一个 IE 实例：

> 的System.Diagnostics.Process P = System.Diagnostics.Process.Start（ “IEXPLORE.EXE”
> @ “http://www.asnaf.ir/moreinfounit.php?sSdewfwo87kjLKH7624QAZMLLPIdyt75576rtffTfdef22de=1&iIkjkkewr782332ihdsfJHLKDSJKHWPQ397iuhdf87D3dffR=2009585&gGtkh87KJg89jhhJG75gjhu64HGKvuttt87guyr6e67JHGVt=117&cCli986gjdfJK755jh87KJ87hgf9871g00113kjJIZAEQ798=0a26e8ea07358781d128aa4bc98dd89a”）;

我想获取打开的窗口的内容。是否可以通过此过程读取 HTML 内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:25:06.737

使用以下代码，

```
using (var client = new WebClient())
{
    string result = client.DownloadString("http://www.asnaf.ir/moreinfounit.php?sSdewfwo87kjLKH7624QAZMLLPIdyt75576rtffTfdef22de=1&iIkjkkewr782332ihdsfJHLKDSJKHWPQ397iuhdf87D3dffR=2009585&gGtkh87KJg89jhhJG75gjhu64HGKvuttt87guyr6e67JHGVt=117&cCli986gjdfJK755jh87KJ87hgf9871g00113kjJIZAEQ798=0a26e8ea07358781d128aa4bc98dd89a");
    // TODO: ur logice here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:15:33.577

这可能是可能的，但我实际上会使用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)来获取 HTML 内容。如果您真的只是想获取给定 http-URL 的 HTML 内容，那么使用 IE 作为单独的进程绝对不是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:16:13.473

您应该使用 WebClient 类来检索网页内容。检查此链接：

[http://msdn.microsoft.com/en-us/library/system.net.webclient(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient(v=vs.80).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T11:16:20.703

不。您的进程在不同的虚拟寻址空间中运行。如果您可以读取另一个进程分配的内存空间，那将是一个严重的安全漏洞。

编辑：考虑在原始过程中使用类似 WebBrowserControl 的东西。这样您就可以轻松检索它显示的页面。

# emacs - 如何让 emacs-helm list 提供固定目录中的文件作为选项？

> ID：12672186
> 
> 赞同：4
> 
> 时间：2012-10-01T11:13:47.697
> 
> 标签：emacs

这与这个问题有关：

[如何拥有 emacs-helm-list-offer-files-in-current-directory-as-options](https://stackoverflow.com/questions/11403862/how-to-have-emacs-helm-list-offer-files-in-current-directory-as-options)

但不是从当前目录添加文件，我希望能够拥有一个固定的目录列表，helm-mini 总是会从中提供文件。理想情况下，我希望能够只拥有具有特定扩展名的文件，并且我希望这可以递归完成（实际上只有一层深）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:57:38.910

这是 org 扩展的预过滤器略有不同。

```
(require 'helm-cmd-t)

(defvar my-org-folders (list  "~/org")
  "my permanent folders for helm-mini")

(defun helm-my-org (&optional arg)
  "Use C-u arg to work with repos."
  (interactive "P")
  (if (consp arg)
      (call-interactively 'helm-cmd-t-repos)
    (let ((helm-ff-transformer-show-only-basename nil))
      (helm :sources (mapcar (lambda (dir)
                               (helm-cmd-t-get-create-source-dir dir))
                             my-org-folders)
            :candidate-number-limit 20
            :buffer "*helm-my-org:*"
            :input "org$ ")))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T12:47:51.947

您可以利用[helm-cmd-t](https://github.com/lewang/helm-cmd-t)库更好地解决它。它将目录递归地打包为可以用作源的存储库。

它了解如何非常快速地读取大量 DVCS 存储库。

默认功能并不完全是您在此处所追求的，但您可以轻松地利用机器来满足您的所有要求。

例如，在这里我定义了一个命令，它将两个 repos 添加到默认的 helm-mini 源中。

```
(require 'helm-cmd-t)

(defvar my-mini-folders (list  "~/src/ember/data" "~/src/ember/ember.js")
  "my permanent folders for helm-mini")

(defun helm-my-mini (&optional arg)
  "my helm-mini.  Use C-u arg to work with repos."
  (interactive "P")
  (if (consp arg)
      (call-interactively 'helm-cmd-t-repos)
    (let ((helm-ff-transformer-show-only-basename nil))
      (helm :sources (nconc (list
                             helm-c-source-buffers-list
                             helm-c-source-recentf
                             helm-c-source-buffer-not-found)
                            (mapcar (lambda (dir)
                                      (helm-cmd-t-get-create-source-dir dir))
                                    my-mini-folders))
            :candidate-number-limit 20
            :buffer "*helm-my-mini:*")))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T02:54:24.870

干得好。我正在使用此代码列出特定目录中的所有 org 文件。如果要列出所有文件，只需删除源中的 Candidate-transformer 行，并删除 emagician/helm-ct-is-org-file。

您可能还想重命名源/变量/函数。;)

**编辑：**已修复，感谢查看 helm-cmd-t

**注意：**这是我第一次真正尝试制作 helm 源代码，但这个实现可能很糟糕。它还专门解决了我的问题（仅直接在一个中查找所有 org 文件）而不是更普遍的问题（基于特定目录中的文件构建 helm 源）。

```
(defvar emagician/helm-c-source-files
  `((name  . "Find Emagician Files")
    (header-name . (lambda (_)))
    (candidates . ,(lambda () 
                    (when (file-accessible-directory-p emagician-dir)
                      (directory-files emagician-dir t))))
    (match helm-c-match-on-file-name helm-c-match-on-directory-name)
    (keymap . ,helm-generic-files-map)
    (candidate-transformer . emagician/helm-ct-is-org-file)
    (help-message . helm-generic-file-help-message)
    (mode-line . ,helm-generic-file-mode-line-string)
    (type . file)))

(defun emagician/helm-ct-is-org-file (candidates)
  (remove-if-not (lambda (c)
                   (and (string= (substring c -4) ".org")
                        (not (string= (substring (file-name-nondirectory c) 0 2) ".#"))))
                 candidates))

(defun emagician/helm-emagician-dir () 
  "List all the org files in the Emagician dir"
  (interactive)
  (helm :sources emagician/helm-c-source-files
        :candidate-number-limit 40
        :buffer "*emagician-|-+-|-files*"))

(global-set-key (kbd "S-<f3>") 'emagician/helm-emagician-dir) 
```

# asp.net - 从 asp.net ide 中的 SQL Server Management Studio 中检索值

> ID：12672188
> 
> 赞同：1
> 
> 时间：2012-10-01T11:14:01.540
> 
> 标签：asp.net, sql-server, database, linq

我正在从 SQL Server Management Studio 到 asp.net 4.0 ide 的表中获取所有单元格值。但我不知道为什么，但每个值都会自动附加 3 个空格。而且我也无法修剪这些值。所以我无法将这些值与文本框中的密码值等值进行比较。我正在使用 linq 查询和 linq to sql dbml 文件。谁能告诉我发生了什么事？以及如何解决这个问题？谢谢。

这是代码：

```
 DataClasses1DataContext dj = new DataClasses1DataContext();
        var pwd = from p in dj.USERs
                  where p.USER_NAME.ToLower().Trim() == _userName.Text.ToString().ToLower().Trim()
                  select new { p.PASSWORD };

        var utype = from u in dj.USERs
                    where u.USER_NAME.ToLower().Trim() == _userName.Text.ToString().ToLower().Trim()
                    select new { u.USER_TYPE };

    if (_password.Text.ToString() == pwd.ToString().Trim())
        //**in above line i m getting pwd.tostring() values to "admin    "
        //_password.text value "admin" .. so it fails to trim and hence compare.**
           {
                if (Session["username"] == null)
                {
                    Session["username"] = _userName.Text.ToString().ToLower();
                }
            }
            else
            {
                _wrongDetails.Text = "Wrong UserName or Password Entered!";
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:04:33.587

我认为在您的表格中，列可能具有 char 类型，它的长度是固定的，因此可以附加空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:16:15.923

我怀疑您将密码存储为 a`char`而不是`varchar`.

但是，将密码存储为纯文本是不好的做法。您应该对存储的密码进行哈希处理。

# jquery - jQuery效率

> ID：12672191
> 
> 赞同：2
> 
> 时间：2012-10-01T11:14:20.293
> 
> 标签：jquery, html

我有一个这样的查询：

```
$('#tabContainer li'); 
```

JetBrains WebStorm IDE 强调它是一个低效的查询。它建议我改用这个：

```
$('#tabContainer').find('li') 
```

怎么解释？是否有解释此类情况的文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:32:32.807

在这篇[文章中](http://www.sitepoint.com/efficient-jquery-selectors/)，有一部分是特异性的（第四点）。

如果有`$('#tabContainer li')`，`li`将查询文档中的所有内容。然后`li`将检查其中的每一个以查看它们是否有 parent `#tabContainer`。

为了更快地得到它，`$('#tabContainer').find('li')`可以使用。li 将在文档中唯一的#tabContainer 中搜索。

但显然，如果您选择使用 ID，则性能应该不会有太大改善（来自[关于 SO 的这个问题](https://stackoverflow.com/q/6028555/1370034)的答案也谈到了特异性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:21:36.677

jQuery 会将前一个表达式翻译成后者。因此，唯一的区别是 jQuery 中的一些调用开销。在我看来是微不足道的。

但是：`$('#tabContainer').find('li')`提高了可读性（至少对于不太熟悉选择器语法的人来说），我认为这是使用它的一个很好的理由..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:41:11.603

我相信优化的原因是速度。Find 可能非常快，但对您的特定用例进行基准测试不会有任何坏处。例如，这是一个测试，它使用了一些与您尝试做的类似的可能变化。

[http://jsperf.com/jquery-find-vs-context-sel/9](http://jsperf.com/jquery-find-vs-context-sel/9)

在这种情况下，查找速度非常快。现在，如果您只运行该选择一次；只要易于阅读/理解其意图，您采用哪种方式都无关紧要。

# c# - 如何在 Windows 中查找特定进程在该时刻的 cpu 使用率

> ID：12672192
> 
> 赞同：1
> 
> 时间：2012-10-01T11:14:26.530
> 
> 标签：c#, java, c++, c, windows

是否可以在 Windows 中以编程方式（以任何语言）知道正在运行/空闲进程的 CPU 使用率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:20:18.233

在`C#`您可以执行以下操作：

```
private PerformanceCounter cpuCounter = new PerformanceCounter("Process", "% Processor Time", Process.GetCurrentProcess().ProcessName);

cpuCounter.NextValue(); // it will give you cpu usage 
```

您应该参考[此处](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.nextvalue.aspx)了解详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T11:23:17.877

如果您不关心支持旧的 Windows 版本（早于 Windows XP SP1），您可以使用[GetSystemTimes Win32 API 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724400%28v=vs.85%29.aspx)。

否则，您必须使用[Performance Counters](http://en.literateprograms.org/CPU_usage_using_performance_counters_%28C,_Windows_2000%29)。

# javascript - Node.js 中的固定位置命令提示符

> ID：12672193
> 
> 赞同：17
> 
> 时间：2012-10-01T11:14:44.220
> 
> 标签：javascript, node.js, terminal, command-line-interface

有没有办法将命令提示符（只是[`question`](http://nodejs.org/api/readline.html#readline_rl_question_query_callback)提示符或类似的东西）固定到终端的底部，并使用[Node.js](http://nodejs.org/)在其上方记录输出。

一个非常糟糕的例子：

```
Your favourite food is sushi.
Your favourite food is chicken.
Your favourite food is okra.
--> What is your favourite food? 
```

所以本质上，我希望用户始终能够输入，并在提示上方回显输入。

```
interface.question("What is your favourite food?", function(answer) {
    // output the answer above where this prompt was
    // and somehow keep this same prompt where is is
}); 
```

我希望在其中使用它的特定应用程序是一个简单的 IRC 客户端，我有一个供用户输入的位置，并将所有输出（用户输入的内容，以及其他人也输入的内容）输出到上方用户正在打字。下图中的线条是虚构的。

```
----------------------------------------------------------------------
|                                                                    |
|                                                                    |
|                                                                    |
|                                                                    |
|                                                                    |
|                                                                    |
|                                                                    |
| Stuff                                                              |
| Stuff                                                              |
| Stuff                                                              |
----------------------------------------------------------------------
| --> The user can type here                                         |
---------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-07-01T21:51:27.540

# [服务器线模块](https://www.npmjs.com/package/serverline)

[![在此处输入图像描述](../Images/f9c760895412efc860c4b57ddd39ff5f.png)](https://i.stack.imgur.com/C8ZE2.gif)

```
process.stdout.write("\x1Bc")
console.log(Array(process.stdout.rows + 1).join('\n'));

const myRL = require("serverline")

myRL.init()
myRL.getRL().question("What is your favourite food? ", function(answer) {
  console.log(`Your favourite food is ${answer}.`)
});

function main() {
  let i = 0
  setInterval(function() {
    const num = () => Math.floor(Math.random() * 255) + 1
    i++
    console.log(i + " " + num() + "." + num() + "." + num() + " user connected.")
  }, 700)
}
main() 
```

**旧版 ：**

[https://stackoverflow.com/posts/24519813/revisions](https://stackoverflow.com/posts/24519813/revisions)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-25T18:10:53.913

这是一个简单的解决方案（在 macos 上使用 node v6.4.0 测试）：

```
const readline = require('readline');
const rl = readline.createInterface(process.stdin, process.stdout);

// Logs a message keeping prompt on last line
function log(message) {
  readline.cursorTo(process.stdout, 0);
  console.log(message);
  rl.prompt(true);
}

// Testing the solution

rl.question('Enter something...:', userInput => {
  log('You typed ' + userInput);
  rl.close();
});

log('this should appear above the prompt');
setTimeout(
  () => log('this should appear above the prompt'),
  1000
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-22T15:38:19.757

好吧，我正在使用[查询](https://www.npmjs.com/package/inquirer)器来解决这类问题。它已经解决了所有这些问题。它易于使用，并且您有不同的提示类型。

这是文档中的一个小示例：

```
var inquirer = require('inquirer');
inquirer.prompt([/* Pass your questions in here */]).then(function (answers) {
    // Use user feedback for... whatever!! 
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-01T12:36:10.413

只需使用[readline](http://nodejs.org/api/readline.html)核心模块：

```
var readline = require('readline');

var rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});

rl.question("What do you think of node.js? ", function(answer) {
  console.log("Thank you for your valuable feedback:", answer);
  rl.close();
}); 
```

这将解决您的问题：

```
var readline = require('readline');

var rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});

var fav_foods = [];

var ask_question = function() {
  rl.question("What is your favourite food? ", function(answer) {
    fav_foods.push(answer)
    fav_foods.forEach(function (element) {
       console.log("Your favourite food is " + element)
    })
    ask_question()
  });
}

ask_question() 
```

# php - Codeigniter 连接到多个数据库

> ID：12672196
> 
> 赞同：0
> 
> 时间：2012-10-01T11:14:53.220
> 
> 标签：php, codeigniter, codeigniter-2

我一直在使用这些代码行在 codeigniter 中连接多个数据库，但出现错误。我的新数据库连接用于 new_group。

```
$this->new_group = $this->CI->load->database('new_group', TRUE); 
$q = $this->new_group->query("SELECT* FROM mytable ORDER BY id DESC"); 
```

在非对象上调用成员函数 database()。

等待答复。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:21:28.323

试试这个[http://codeigniter.com/forums/viewthread/145901/](http://codeigniter.com/forums/viewthread/145901/)

```
$db['new_group']['pconnect'] = FALSE; 
```

我没试过...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:02:06.570

从加载命令中删除 ->CI

```
$this->new_group = $this->load->database('new_group', TRUE); 
$q = $this->new_group->query("SELECT* FROM mytable ORDER BY id DESC"); 
```

或者您必须先加载 CI 对象：

```
$this->CI =& get_instance();
$this->new_group = $this->CI->load->database('new_group', TRUE); 
$q = $this->new_group->query("SELECT* FROM mytable ORDER BY id DESC"); 
```

# javascript - 如何从 javascript 执行顶点进程

> ID：12672197
> 
> 赞同：1
> 
> 时间：2012-10-01T11:14:52.157
> 
> 标签：javascript, oracle-apex

我对 javascript 和 apex 非常陌生，可以说正在工作中学习。
让我首先描述我想要实现的目标：
我试图阻止功能键运行/执行浏览器功能（F1 显示帮助，F3 用于查找等）。我找到了阻止它们的 javascript 代码，但不知道之后该怎么做。
例如，当用户按下 F1 时，它不应该显示帮助，而是在 apex 中执行一个进程。
例如，这样的过程可以是将顶点页面文本字段上的所有信息保存到数据库中。
我怎样才能做到这一点？

请参阅我的示例代码：代替警报，我将如何执行流程以及如何编写这样的流程？

* * *

```
<script language="javascript">
function my_onkeydown_handler() {
    switch (event.keyCode) {
        case 112: // 'F1'      
            document.onhelp = function() {
                return (false);
            }
            window.onhelp = function() {
                return (false);
            }
            alert("F1");
            NewEntry();
            break;
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:19:31.477

```
$(document).keydown(function(e){
   if(e.which===112){
      console.log('F1ed');
      //NewEntry();
      return false;
   };
}); 
```

*   安全使用 jQuery，它带有 apex
*   另请参阅 [使用 jquery 禁用特定功能键](https://stackoverflow.com/questions/5540549/disable-specific-function-key-using-jquery)

可以将其转换为动态操作（您没有指定顶点版本。动态操作是在 4.0 版中引入的）。你为什么要使用它们？它们非常方便，因为您可以使用它们轻松利用 javascript 而无需真正了解它，并且可以在页面结构中看到它们。这样，您就不需要在页面的几个部分中杂乱无章地使用 javascript。即使对于没有预定义操作的更高级的 javascript，您仍然可以使用“执行 Javascript”来放入自己的代码。再次，可访问性和可维护性！利用它！

创建一个新的动态动作。

*   事件：按键按下
*   选择类型：DOM 对象
*   DOM 对象：`document`
*   条件：无

至于（真正的）行动：

*   行动：执行 Javascript 代码

代码：

```
var e = this.browserEvent;
switch (e.which) {
   case 112: // 'F1'      
      alert("F1");
      return false;            
} 
```

更好更干净。更好的是，您现在对它们感到满意！也阅读它们。

进入第二部分：

> 我的意思是，当按下 F1 时，它不能显示帮助，而是在 apex 中执行一个进程，例如，我想将 apex 页面文本字段上的所有信息保存到数据库中。我该怎么办。看看我的小代码，而不是警报，我将如何执行一个流程以及如何编写这样一个流程？

这让我想知道（和皱眉，但只是一点点）。你对 Apex 有多熟悉？无意冒犯，但这是您要询问的相当基本的功能。

假设您有一个由向导生成的报告和表单页面。假设你没有奇怪的东西，比如这个 javascript，只是准系统。
您从报告转到表单页面。通过进程获取值并呈现页面。现在您更改一些值并提交页面。提交的值然后在页面处理中进行处理，并通过行处理过程，将插入/更新/删除数据。

如果您不熟悉该概念，我**强烈**建议您至少遵循[Oracle® Database 2 Day + Application Express Developer's Guide](http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21679/toc.htm)（[Oracle Apex 文档](http://www.oracle.com/technetwork/developer-tools/apex/documentation/index.html)）。许多开发人员只是一头雾水，没有看一眼本指南。不。这个简短（实际上，可能是几个小时）指南将教您一些顶点的基础知识！
会话状态和提交页面等重要事项对于理解它的作用至关重要。

现在，假设我们有一个带有这段 javascript 的表单页面。按 F1 更新值（阅读：按 F1 提交页面并调用行处理来处理提交的值），您可以使用[apex javascript api 的](http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21676/javascript_api.htm#AEAPI266): `apex.submit('APPLY')`( [DOC](http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21676/javascript_api.htm#CHDBEACA) )。
这将提交带有 request 的页面`APPLY`。这个值很重要。请注意，按钮的名称也会设置为请求值来提交，并且行处理会根据有效请求值的列表进行不同的处理。

```
var e = this.browserEvent;
switch (e.which) {
   case 112: // 'F1'      
      alert("F1");
      apex.submit('APPLY');
      return false;            
} 
```

* * *

进一步阐述：还有 AJAX 回调。这些是服务器端的进程，可以通过对服务器的 javascript 调用来调用。这些过程是 PLSQL 代码，例如可以用于将数据返回给调用的 javascript 函数，并避免整个页面刷新/提交。
当然也可以用来保存数据。必须将数据传递给服务器，然后该过程使用该数据。例如，当某个字段已更改并且您想立即将其保存到数据库但不希望提交整页时。回调将是一个对表执行更新的 plsql 块。

Ajax 回调非常有趣且有用，但我建议您在解决此问题之前先掌握基础知识！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:34:13.177

修改代码：[jsfiddle](http://jsfiddle.net/WKSKx/)

```
 <script language="javascript">
   document.onkeydown = function (e) {
    switch (e.keyCode) {
        case 112: // 'F1'      
            e.preventDefault(); // prevent default behavior.
             e.returnValue = false; // for IE to  prevent default behavior.
            alert("F1");
            NewEntry();
            return false;            
    }
}
</script>​ 
```

# java - 支持 html5 开发的最佳 Java Web 框架

> ID：12672202
> 
> 赞同：4
> 
> 时间：2012-10-01T11:15:12.787
> 
> 标签：java, html, jakarta-ee, web-applications, frameworks

全面支持html5前端开发的java web框架有哪些比较合适的选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T11:30:18.250

如果我理解正确，您正在寻找某种前端 Java 框架，例如 JSF。我最近遇到了类似的问题，经过广泛的搜索后，我的公司决定使用 Primefaces JSF。Primefaces 是一个 JSF 框架，拥有令人惊叹的社区和支持，可让您快速高效地构建 html5：

[http://www.primefaces.org/](http://www.primefaces.org/)

它们具有非常激进的发布周期，并继续添加您可以在 Web 应用程序中轻松使用的组件。

# delphi - 强制将 Real 的默认值写入 WriteComponent()

> ID：12672215
> 
> 赞同：3
> 
> 时间：2012-10-01T11:15:54.893
> 
> 标签：delphi, serialization, delphi-2007

在使用默认内置“组件流系统”的特定方式中，我发现如果属性的值等于默认值，则不写入它是有问题的。

让我们考虑以下方案：

您使用**WriteComponent()**和**ReadComponent()**来保存组件的特定状态。我们称这种状态为*预设*。该组件包含各种带有 setter 的 Real-typed 属性。

我们知道，如果一个属性等于它的默认值，那么预设将不包含该值。

所以对于我们的组件

1.  我们将属性**AFLoat**设置为*0.0*
2.  我们将预设保存在流中 (MyStream.WriteComponent(MyInstance))
3.  我们将属性 **AFLoat**设置为*0.101*
4.  我们重新加载预设（MyStream.ReadComponent(MyInstance)）

最后在重新加载预设后，**AFLoat**仍然等于*0.101*，而我们期望它的值为*0.0*。

该错误的根源很明显，属性的默认值从未写入组件流中。所以在第*2*步中：该属性没有被写入，然后在第 4 步中它没有被读取......不是很烦人！

有没有办法强制将属性的默认值写入组件流中？实际上，我对 Real-typed 属性有一个自制的修复程序，但我想知道是否有一种众所周知的方法来克服潜在的问题。

**我的自定义修复是在调用 ReadComponent ()**之前使用 TypInfos 将 Real-typed 属性重置为 0

 **```
Procedure ResetFloatToNull(Const AnObject: TObject; Recursive: Boolean);
Var
  i,j: Integer;
  LList: PPropList;
Begin
  j := GetPropList( AnObject, LList);
  If j > 0 Then For i:= 0 To j-1 Do
    Case LList^[i].PropType^.Kind Of
    // floats with the object scope
    tkFloat: SetFloatProp(AnObject,LList^[i].Name,0);
    // floats with a subobject scope (IsSubComponent)
    tkClass: If Recursive Then
      ResetFloatToNull( TObject(GetOrdProp(AnObject,LList^[i])), True);
    End;
  FreeMem(LList);
End; 
```

但是如果不存在其他方法，那么（隐含和次要问题）：EMB 不应该放弃默认值吗？虽然它对 IDE 对象检查器（在上下文菜单中重置为继承）有点兴趣，但它完全导致了组件序列化系统中的各种烦恼......

我希望你能得到基本的问题，否则我可以添加一个小例子......

* * *

错误的小演示（在 DH 的第一个答案和评论战之后添加）：

```
program Project1;
{$APPTYPE CONSOLE}
uses
  SysUtils,
  classes;

type
  TTestClass = class(TComponent)
  private
    ffloat1,ffloat2: single;
  published
    property float1: single read ffloat1 write ffloat1;
    property float2: single read ffloat2 write ffloat2;
  end;

var
  str: TMemoryStream;
  testclass: TTestClass;

begin
  testclass := TTestClass.Create(Nil);
  str := TMemoryStream.Create;
  //
  testclass.float1 := 0.31;
  testclass.float2 := 0.32;
  //
  testclass.float1 := 0.0;
  testclass.float2 := 0.2;
  str.WriteComponent(testclass);
  writeln( 'we have wrote a state when the prop 1 is equal to 0.0 and prop 2 is equal to 0.2');
  //
  testclass.float1 := 0.1;
  testclass.float2 := 0.3;
  writeln( 'then we set the prop 1 to 0.1 and prop 2 to 0.3');
  writeln('');
  //
  writeln( 'we reload the state saved when the prop 1 was equal to 0.0 and prop 2 to 0.2   and we get:');
  str.Position := 0;
  str.ReadComponent(testclass);
  writeln( Format( 'prop 1 equal to %.2f', [testclass.float1]));
  writeln( Format( 'prop 2 equal to %.2f', [testclass.float2]));
  //
  writeln('');
  writeln('prop 1 has not been restored because the default value 0.0 was not written');
  writeln('prop 2 has been restored because a non default value was written and read');
  //
  ReadLn;
  str.free;
  testclass.free;
end. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T11:23:46.487

原来我被这个问题弄糊涂了。事实上，默认属性在这里不相关，因为实值属性不能有默认值。

事实上，如果实值属性的值为 0，该框架不会流出实值属性。这意味着实值属性实际上具有硬编码的默认值 0。这似乎是流式处理框架中的一个巨大的设计缺陷。

想象一下，`1`在组件的构造函数中分配了一个值的真实值属性。这使得该属性无法被分配一个值，`0`并且该值无法在 .dfm 文件的往返过程中继续存在。

有一种方法可以解决此问题，但您需要覆盖`DefineProperties`

```
type
  TMyComponent = class(TComponent)
  private
    FValue: Double;
    procedure WriteValue(Writer: TWriter);
  protected
    procedure DefineProperties(Filer: TFiler); override;
  public
    constructor Create(AOwner: TComponent); override;
  published
    property Value: Double read FValue write FValue;
  end;

constructor TMyComponent.Create(AOwner: TComponent);
begin
  inherited;
  FValue := 1.0;
end;

procedure TMyComponent.DefineProperties(Filer: TFiler);
begin
  inherited;
  Filer.DefineProperty('Value', nil, WriteValue, True);
end;

procedure TMyComponent.WriteValue(Writer: TWriter);
begin
  Writer.WriteDouble(FValue);
end; 
```

VCL 错误位于`Classes`单元中，在`IsDefaultPropertyValue`. 该函数内部是这个本地函数：

```
function IsDefaultFloatProp: Boolean;
var
  Value: Extended;
begin
  Value := GetFloatProp(Instance, PropInfo);
  if AncestorValid then
    Result := Value = GetFloatProp(Ancestor, PropInfo)
  else
    Result := Value = 0;
end; 
```

显然这个函数应该这样实现：

```
function IsDefaultFloatProp: Boolean;
var
  Value: Extended;
begin
  Value := GetFloatProp(Instance, PropInfo);
  if AncestorValid then
    Result := Value = GetFloatProp(Ancestor, PropInfo)
  else
    Result := False;
end; 
```

同样的错误似乎也存在于`Int64`,`Variant`和`string`属性的处理中。这是一个重大缺陷，我希望它是众所周知的。我希望在 SO、Emba 论坛和一些 QC 报告上已经有很多关于这个主题的讨论。就是这样，一份来自时间黎明的 QC 报告：[QC#928](http://qc.embarcadero.com/wc/qcmain.aspx?d=928)。由于该报告已有 10 多年的历史并且显得奄奄一息，我创建了[QC#109194](http://qc.embarcadero.com/wc/qcmain.aspx?d=109194)。**

# javascript - 尽管有 JavascriptFilteredIntoFooterHeaderResponse，仍将 JS 添加到标题

> ID：12672218
> 
> 赞同：2
> 
> 时间：2012-10-01T11:16:03.450
> 
> 标签：javascript, wicket

*我用JavascriptFilteredIntoFooterHeaderResponse*订购了我导入的 CSS 和 JS 。有了这个类，我所有的 CSS 都在标题中，我所有的 JS 到`</body>`标签附近的一个单独的容器中。但现在我需要在页眉中添加一个 JS，但检票口将每个 JS 推到页脚。知道有人解决这个问题吗？JavascriptFilteredIntoFooterHeaderResponse 是最终的，不能被覆盖。

**检票应用**

```
@Override
public void init()
{
    super.init();

    setHeaderResponseDecorator( new IHeaderResponseDecorator()
    {
        @Override
        public IHeaderResponse decorate( IHeaderResponse response )
        {
            return new JavascriptFilteredIntoFooterHeaderResponse( response, FOOTER_FILTER_NAME );
        }
    } );
} 
```

**BasePage.java**

```
public BasePage()
{       
    add( new HeaderResponseFilteredResponseContainer( FOOTER_FILTER_NAME, FOOTER_FILTER_NAME ) );
} 
```

**BasePage.html**

```
<body>
...
<div wicket:id="footerBucket" />
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T12:41:44.057

您不需要覆盖 JavascriptFilteredIntoFooterHeaderResponse。只需将*org.apache.wicket.resource.filtering.HeaderResponseContainerFilteringHeaderResponse*与以下构造函数一起使用：

```
HeaderResponseContainerFilteringHeaderResponse(IHeaderResponse response, 
        String headerFilterName, IHeaderResponseFilter[] filters) 
```

例如，如果你写：

```
IHeaderResponseFilter[] filters = new IHeaderResponseFilter[] { 
        new CssAcceptingHeaderResponseFilter(HEADER_FILTER_NAME),
        new JavascriptAcceptingHeaderResponseFilter(FOOTER_FILTER_NAME) };

return new HeaderResponseContainerFilteringHeaderResponse(response, 
        HEADER_FILTER_NAME, filters); 
```

它将与您在代码中使用的 JavascriptFilteredIntoFooterHeaderResponse 相同。

这是一个匿名过滤器类的示例，您可以使用它代替 CssAcceptingHeaderResponseFilter 来完成您的任务。文件“script-for-the-header.js”是您希望在标题中包含的脚本。

```
new CssAcceptingHeaderResponseFilter(HEADER_FILTER_NAME) {

    @Override
    public boolean acceptReference(ResourceReference ref) {
        if (!Strings.isEmpty(ref.getName()) && ref.getName().equals("script-for-the-header.js")) {
            return true;
        } else {
            return super.acceptReference(ref);
        }
    }
} 
```

为了更好地组织您的代码，您还可以考虑覆盖 HeaderResponseContainerFilteringHeaderResponse（如果您还没有猜到，它也是 JavascriptFilteredIntoFooterHeaderResponse 的父级）。[有关详细信息，请参阅JavascriptFilteredIntoFooterHeaderResponse.java](http://www.jarvana.com/jarvana/view/org/apache/wicket/wicket/1.4.15/wicket-1.4.15-sources.jar!/org/apache/wicket/resource/filtering/JavascriptFilteredIntoFooterHeaderResponse.java?format=ok)中的源代码。

# magento - Magento 1.7 在同一页面上显示多层导航过滤器？

> ID：12672219
> 
> 赞同：0
> 
> 时间：2012-10-01T11:16:03.740
> 
> 标签：magento, magento-1.7

我试图将分层导航放置在标题的条带中，以及左侧边栏中。我通过添加`<block type="catalog/layer_view" template="catalog/layer/view.phtml"/>`到我的 page.xml 文件的 head 块来做到这一点。虽然这可行，但当我单击过滤器时，我收到一个错误，归结为 Magento 不喜欢多个过滤器：

```
a:5:{i:0;s:64:"You cannot define a correlation name 'device_idx' more than once";i:1;s:3844:"#0 /home/sitea/subdomains/casefun/trunk/lib/Varien/Db/Select.php(281): Zend_Db_Select->_join('inner join', Array, 'device_idx.enti...', Array, NULL) 
```

随后是堆栈跟踪。

如何在选择过滤器时多次将分层导航添加到主题而不会破坏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:21:15.203

不幸的是，您不能在一页上多次显示分层导航块。每次显示该块时，它都会将过滤器应用于 Product 集合。

从技术上讲，您可以通过扩展标题或左侧放置的标准分层导航块来创建自定义，并将规则添加到**NOT** `applyFilters`，但这不是一项简单的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:13:51.957

我必须覆盖 Mage_Catalog_Model_Resource_Layer_Filter_Attribute （在我的本地文件夹中）以包含一个 Singleton 类：[http ://codepad.org/i2a1gL8i](http://codepad.org/i2a1gL8i)

这仅允许创建每个过滤器的一个版本。

然而，一个新的问题出现了。在当前应用的过滤器列表中，每个过滤器都出现了两次。

[http://i.imm.io/Gk4w.png](http://i.imm.io/Gk4w.png)

解决这个问题要简单得多。

添加`app/design/frontend/default/{theme}/template/catalog/layer/state.phtml`以下检查：

```
<?php $appliedFilters = array(); ?>
<?php foreach ($_filters as $_filter): //existing line ?>
<?php
  if(in_array(strtolower($_filter->getName()), $appliedFilters))
  {
    continue; 
  }
  $appliedFilters[] = strtolower($_filter->getName());
?> 
```

如果已列出具有相同名称的过滤器，则不要列出任何其他具有相同名称的过滤器。

# c# - 应用程序最大化的码头东西

> ID：12672221
> 
> 赞同：0
> 
> 时间：2012-10-01T11:16:11.210
> 
> 标签：c#, winforms, styles, maximize

好吧，标题听起来很垃圾，我知道。（抱歉英语不好）

我正在使用 C# 开发 Windows 窗体应用程序。

我有一个表单（form1），带有菜单条、状态条和拆分容器。

我已经按照我想要的方式将所有东西都放在了设计器中。表格的大小为 990:788。当我运行程序时，如果我最大化程序，那么拆分容器会越过状态条。

我怎么能把它固定在它的位置（比如底部的 5%，顶部的 10% 或类似的像素......）

我对所有这些对象的样式都不熟悉，所以任何想法都会很有用......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T11:20:04.213

您可以使用属性窗口停靠这些项目... statusstrip Docking="down" menustrip Docking="up" 和拆分容器 Docking="fill"。

然后，当表单调整大小时，项目将自动调整大小。

# windows - 在 WinRT 应用程序中检测击键

> ID：12672225
> 
> 赞同：1
> 
> 时间：2012-10-01T11:16:19.807
> 
> 标签：windows, xaml, windows-runtime, keydown

我有一个包含 Canvas 和几个按钮的基本页面模板。画布上有一些动画正在进行。我也想在这个页面上检测击键。

我在 LayoutRoot Grid 上使用了 KeyDown 事件，它以前可以工作，但是随着我进一步构建应用程序，它停止工作。我也尝试在 PageRoot 中使用 KeyDown 事件，但仍然无法正常工作。

我在下面的 XAML 中粘贴。

```
<common:LayoutAwarePage
x:Name="pageRoot"
x:Class="Shooter.Game"
DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
IsTabStop="false"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:Shooter"
xmlns:common="using:Shooter.Common"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" >

<Page.Resources>

    <!-- TODO: Delete this line if the key AppName is declared in App.xaml -->
    <x:String x:Key="AppName">Hits</x:String>
</Page.Resources>

<!--
    This grid acts as a root panel for the page that defines two rows:
    * Row 0 contains the back button and page title
    * Row 1 contains the rest of the page layout
-->
<Grid Style="{StaticResource LayoutRootStyle}" Background="Navy" KeyDown="Grid_KeyDown_1" >
    <Grid.RowDefinitions>
        <RowDefinition Height="95"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="150" />
    </Grid.RowDefinitions>

    <!-- Back button and page title -->
    <Grid Name="navBar">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Button x:Name="backButton" Grid.Column="0" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
        <TextBlock Visibility="Collapsed" x:Name="pageTitle" Grid.Column="1" Text="{StaticResource AppName}" Style="{StaticResource PageHeaderTextStyle}"/>
        <TextBlock x:Name="hitCountTxt" Grid.Column="1" Text="Hits: 0" Style="{StaticResource PageHeaderTextStyle}" />
        <TextBlock x:Name="missCountTxt" Grid.Column="1" Text="Miss: 0" Style="{StaticResource PageHeaderTextStyle}" HorizontalAlignment="Right" />
    </Grid>
    <Grid Grid.Row="1" Name="gameBoard">
        <Canvas Name="warZone" Width="Auto" />
    </Grid>
    <Grid Grid.Row="2" Name="dashBoard">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="200" />
        </Grid.ColumnDefinitions>
        <Button Name="Dit" Grid.Column="0" Content="Dit" Width="200" Height="140" FontSize="40" Click="Dit_Click" />
        <Button Name="Dah" Grid.Column="2" Content="Dah" Width="200" Height="140" FontSize="40" Click="Dah_Click" />
        <TextBlock Name="fireCodeTxt" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Text="No shots Fired!" FontSize="60" />
    </Grid>

    <VisualStateManager.VisualStateGroups>

        <!-- Visual states reflect the application's view state -->
        <VisualStateGroup x:Name="ApplicationViewStates">
            <VisualState x:Name="FullScreenLandscape"/>
            <VisualState x:Name="Filled"/>

            <!-- The entire page respects the narrower 100-pixel margin convention for portrait -->
            <VisualState x:Name="FullScreenPortrait">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PortraitBackButtonStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>

            <!-- The back button and title have different styles when snapped -->
            <VisualState x:Name="Snapped">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>
</Grid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T08:39:05.570

您可以在 NavigatedTo 事件中订阅 Window.Current.CoreWindow.KeyDown/Up 并在 NavigatedFrom 中取消订阅。这些应该有效。否则，具有焦点的控件将有机会处理这些事件并将它们标记为已处理以防止它们冒泡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-03T08:31:09.207

您可以在页面构建时订阅 key up/down 事件。请参阅以下代码：

```
 public MyPage()
    {
        InitializeComponent();            
        KeyUp += MyPage_KeyUp;           
    }

    private void MyPage_KeyUp(object sender, KeyRoutedEventArgs e)
    {
        //Your code here
    } 
```

# java - 时间戳 Spring 转换

> ID：12672227
> 
> 赞同：0
> 
> 时间：2012-10-01T11:16:21.727
> 
> 标签：java, spring, timestamp

我正在尝试使用时间戳。我在jsp中定义了一个bean的隐藏变量。

```
<form:input type="hidden" path="timeStamp" />

private Timestamp timeStamp;

public final Timestamp getTimeStamp() {
return (timeStamp == null)
? null : (Timestamp) timeStamp.clone();
}

public final void setTimeStamp(Timestamp timeStamp) {
this.timeStamp = (timeStamp == null)
? null : (Timestamp) timeStamp.clone();
} 
```

时间戳是在插入操作中生成的，我需要它用于删除操作。我的问题是，在控制器中，一旦我尝试删除最近插入的记录，这次 timeStamp 为空（但它在 jsp 中不为空）

```
public final void doActionDelete(DumyBean bean, Errors errors, ActionRequest actionrequest...) 
```

bean.timeStamp 等于 null?? 我确定时间戳在jsp中，所以我猜问题出在数据转换上。

（已编辑：）我认为问题在于 initBinder 方法，我正在做这样的事情......

```
@InitBinder
public final void initBinder(WebDataBinder binder) {

    SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
    dateFormat.setLenient(false);

    binder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, true));
} 
```

有没有可能，日期被解析为在 JSP 中以“dd/MM/yyyy”格式显示，之后 spring 不知道如何再次将其转换为时间戳？

在 doAction 方法中，errors var 显示了这个错误，这似乎是我所说的问题，但我不知道如何解决它。

```
"Failed to convert property value of type 'java.lang.String' to required type 'java.sql.Timestamp' for property 'timeStamp'; 
nested exception is java.lang.IllegalArgumentException: Cannot convert value of type [java.lang.String] to required type
[java.sql.Timestamp] for property 'timeStamp': PropertyEditor [org.springframework.beans.propertyeditors.CustomDateEditor] 
returned inappropriate value of type [java.util.Date] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T08:18:08.787

问题写在异常中：

> PropertyEditor [org.springframework.beans.propertyeditors.CustomDateEditor] 返回了 [java.util.Date] 类型的不适当值

这意味着`CustonDateEditor`retuns a`java.util.Date`但你需要 a `Timestamp`。

因此，您可以做两件事：

*   编写您自己的 PropertyEditor 并注册它（参见[http://adfinmunich.blogspot.de/2011/04/how-to-write-sqltimestamppropertyeditor.html](http://adfinmunich.blogspot.de/2011/04/how-to-write-sqltimestamppropertyeditor.html)），或
*   使用`Date`而不是`Timestamp`

# ruby-on-rails - Heroku - 不起作用“rake”命令：PG ::错误：错误：关系“角色”不存在

> ID：12672229
> 
> 赞同：1
> 
> 时间：2012-10-01T11:16:24.113
> 
> 标签：ruby-on-rails, ruby, heroku, migration, rake

当我运行时`heroku run rake db:migrate`，我会收到此错误：

```
rake aborted!
PG::Error: ERROR:  relation "roles" does not exist
LINE 4:              WHERE a.attrelid = '"roles"'::regclass
                                        ^
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"roles"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum

Tasks: TOP => db:reset => environment 
```

我也尝试过重置数据库：`heroku run rake db:reset`但我遇到了与上面相同的错误。看起来命令`heroku rake`不起作用。此外，我试图将我的整个本地数据库移动到 Heorku -`heroku db:push`这是有效的。但我需要运行我的迁移。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:40:05.430

这是您在运行 Rolify 和迁移时会看到的常见错误。

您需要检查您的 Rolify 初始化程序文件`config/initializers/rolify.rb`。如果命令`config.use_dynamic_shortcuts`未注释，则对其进行注释。推送您的更改，然后运行`rake db:migrate`​​. 成功迁移后，您可以返回并取消注释该行。

问题是 rails 会加载初始化程序文件，`use_dynamic_shortcuts`如果数据库尚未迁移，则会抛出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:32:12.947

听起来您可能在引用`Role`类的初始化程序（或类似的东西）中有代码 - 因为当环境启动时表不存在（即使您正在尝试设置表！）它会产生错误。

尝试删除引用 Role 类的代码，迁移数据库，然后将代码放回原处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:40:20.163

尝试运行

```
heroku pg:reset 
```

它会尝试将您的数据库重置为正常状态。然后你可以迁移和播种。

如果您无法迁移，mybe 您的迁移不正确，请尝试应用架构：

```
heroku rake db:schema:apply 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T11:24:37.500

你确定你承诺了一切吗？`git status`然后再试`git add .`一次`git push heroku`。

# iphone - 右侧的 UITableView 部分标题而不是左侧的默认标题

> ID：12672231
> 
> 赞同：12
> 
> 时间：2012-10-01T11:16:40.587
> 
> 标签：iphone, objective-c, ios, uitableview

我正在开发一个应用程序，它要求部分的标题应该在右边而不是默认的左边。

我搜索并且许多极客建议实施：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    static UIView *headerView;

    if (headerView != nil)
        return headerView;

    NSString *headerText = NSLocalizedString(@"البحث الأخيرة", nil);

    // set the container width to a known value so that we can center a label in it
    // it will get resized by the tableview since we set autoresizeflags
    float headerWidth = 150.0f;
    float padding = 10.0f; // an arbitrary amount to center the label in the container

    headerView = [[UIView alloc] initWithFrame:CGRectMake(300, 0.0f, headerWidth, 44.0f)];
    headerView.autoresizingMask = UIViewAutoresizingFlexibleWidth;

    // create the label centered in the container, then set the appropriate autoresize mask
    UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(padding, 0, headerWidth - 2.0f * padding, 44.0f)];
    headerLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
    headerLabel.textAlignment = UITextAlignmentRight;
    headerLabel.text = headerText;

    [headerView addSubview:headerLabel];

    return headerView;
} 
```

但是，当我尝试增加标题视图框架的 x 坐标时，它不会影响视图的位置。它始终位于表格视图的中心。

我需要标题在右边。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-01T11:28:52.577

这对我有用，但是可以根据您的需要使用框架的坐标来对齐

```
-(UIView*)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UILabel *label = [[UILabel alloc] init];
    label.text=@"header title";
    label.backgroundColor=[UIColor clearColor];
    label.textAlignment = NSTextAlignmentRight;
    return label;
}

-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 50;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-04T23:50:24.993

我在使用上述解决方案更改文本时遇到了麻烦，这对我有用，并且与表格视图的后缘有适当的间距。Swift 中的 PS 解决方案

UITableView 数据源

```
func tableView(tableView: UITableView, heightForHeaderInSection section: Int) -> CGFloat {
    return 30
} 
```

UITTableViewDelegate

```
func tableView(tableView: UITableView, titleForHeaderInSection section: Int) -> String? {
    return "Header Title"
}

func tableView(tableView: UITableView, willDisplayHeaderView view: UIView, forSection section: Int) {

    let header: UITableViewHeaderFooterView = view as! UITableViewHeaderFooterView
    header.textLabel?.font = UIFont(name: "AvenirNext-Regular", size: 14.0)
    header.textLabel?.textAlignment = NSTextAlignment.Right

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:26:06.160

首先我不会用

```
 headerView = [[UIView alloc] initWithFrame:CGRectMake(300, 0.0f, headerWidth, 44.0f)]; 
```

由于您的原点 x 坐标将为 300。对于页眉和页脚视图，请将您的原点坐标设置为 CGPoint (0.0) 并使用大小。

尝试使标签与它自己的视图一样大，并将其对齐设置为正确。

```
UIView *headerTitleView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 40)];

UILabel *sectionTitleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, headerTitleView.frame.size.width, 40)];
sectionTitleLabel.backgroundColor = [UIColor clearColor];
sectionTitleLabel.textAlignment = UITextAlignmentright; 
```

另一种可能性是在标题视图右侧的某处添加一个 UIlabel 并居中对齐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T11:30:21.570

我不确定我是否理解这种情况，但我假设您只是希望标签右对齐而不是左对齐。

调整标题视图的框架值将不起作用，因为 tableView 负责定位它，它将忽略您在此处设置的任何值。

您唯一的选择是使用 headerView 的子视图。

例如，将 headerLabel 位置设置为向右对齐：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    static UIView *headerView;

    if (headerView != nil)
        return headerView;

    NSString *headerText = NSLocalizedString(@"البحث الأخيرة", nil);

    float headerWidth = 320.0f;
    float padding = 10.0f;

    headerView = [[UIView alloc] initWithFrame:CGRectMake(300, 0.0f, headerWidth, 44.0f)];
    headerView.autoresizesSubviews = YES;

    // create the label centered in the container, then set the appropriate autoresize mask
    UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, headerWidth, 44.0f)];
    headerLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleWidth;
    headerLabel.textAlignment = UITextAlignmentRight;
    headerLabel.text = headerText;

    CGSize textSize = [headerText sizeWithFont:headerLabel.font constrainedToSize:headerLabel.frame.size lineBreakMode:UILineBreakModeWordWrap];
    headerLabel.frame = CGRectMake(headerWidth - (textSize.width + padding), headerLabel.frame.origin.y, textSize.width, headerLabel.frame.size.height);

    [headerView addSubview:headerLabel];

    return headerView;
} 
```

# java - 相同的 Java 源代码编译为二进制不同的类

> ID：12672232
> 
> 赞同：12
> 
> 时间：2012-10-01T11:16:44.370
> 
> 标签：java, compilation

谁能解释相同的 Java 源代码如何最终编译为*二进制*不同的类文件？

问题源于以下情况：

我们有一个相当大的应用程序（800 多个类），它已经被分支、重组然后重新集成回主干。在重新整合之前，我们将主干合并到分支中，这是标准程序。

最终结果是一组带有分支源的目录和一组带有主干源的目录。使用 Beyond Compare，我们能够确定两组来源是相同的。但是，在编译（使用 IntelliJ v11 中托管的 maven 的*相同 JDK*）时，我们注意到大约有十几个类文件是不同的。

当我们为每一对明显不同的类文件反编译源代码时，我们最终得到了相同的 java 源代码，所以就最终结果而言，这似乎并不重要。但是为什么只有几个文件不同呢？

谢谢。

* * *

补充思想：

如果 maven/javac 以不同的顺序编译文件，会不会影响最终结果？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T12:24:47.667

假设 JDK 版本、构建工具版本和构建/编译选项是相同的，我仍然可以想到许多*可能*的差异来源：

1.  时间戳 - 类文件可能¹包含编译时间戳。除非您在完全相同的时间运行编译，否则同一文件的不同编译将导致不同的时间戳。

2.  源文件名路径 - 每个类文件都包含源文件的路径名。如果您用不同的路径名编译两棵树，则类文件将包含不同的源路径名。

3.  导入的编译时常量的值 - 当一个类`A`使用在另一个类`B`中定义的编译时常量（参见 JLS 中“编译时常量”的定义）时，该常量的值将合并到`A`s 类文件中。因此，如果您`A`针对不同版本的`B`（常量值不同）进行编译，则代码`A`可能会有所不同。

4.  由于编译器`identityHashcode`在`HashMap`键中使用的差异可能导致某些步骤中映射迭代顺序的差异。这可能会`.class`以不显着的方式影响文件生成，但仍显示为`.class`文件差异。例如，常量池条目可能以不同的顺序结束。

5.  外部类/方法的签名差异；例如，如果您更改了其中一个 POM 文件中的依赖项版本。

6.  有效构建类路径的差异可能会导致找到导入类的顺序不同。这可能反过来导致类文件的常量池中的条目顺序出​​现非显着差异。这可能由于以下原因而发生：

    *   在外部 JAR 文件的目录中以不同顺序出现的文件，
    *   由于构建工具迭代时源文件的顺序不同，文件以不同的顺序编译²，或者
    *   构建中的并行性（如果您启用了该功能）。

文件排序问题有一个可能的解决方法：使用[JDK-7003006](https://bugs.openjdk.java.net/browse/JDK-7003006)`-XDsortfiles`中描述的未记录选项。（感谢@Holger 知道这一点。）

请注意，您通常看不到文件系统目录中文件的实际顺序。命令行工具`ls`和`dir`文件浏览器通常会在显示条目之前对条目进行排序（按名称或时间戳顺序）。

* * *

^(1 - 这取决于编译器。此外，不能保证`javap`会显示时间戳......如果它们存在的话。)

^(2 - 操作系统不保证列出目录（在系统调用级别）将以确定的顺序返回文件系统对象......或相同的顺序，如果您已删除并重新添加文件。)

* * *

I should add that the first step to identifying the cause of the differences is to work out exactly what they are. You probably need (needed) to do that the hard way - by manually decoding a pair of class files to identify the places where they actually differences ... and what the differences actually mean.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T11:21:09.513

当您使用超越比较进行比较时，比较是根据文件的内容进行的。但是在构建过程中，只检查源文件的时间戳是否有变化。因此，如果您的源文件的最后修改日期发生更改，它将被重新编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T11:18:32.477

不同的 JDK 产生不同的二进制类（优化，还有类版本号）。也有编译选项（JDK 可能以较旧的格式编译，或者它可以添加调试信息）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T11:20:20.017

不同版本的 Java 可以添加不同的元数据，这些元数据通常被反编译器忽略。

我建议您尝试使用`javap -c -v`文件中的更多详细信息。如果这没有帮助，您可以使用查看每个字节的 ASMifierClassVisitor。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T11:22:02.430

根据您的编译方式，相同的 JDK 也可以有不同的输出。您可以使用或不使用调试信息进行编译，您可以编译以在旧版本中运行，每个选项都会导致其他类。

# php - 其他块不执行

> ID：12672246
> 
> 赞同：0
> 
> 时间：2012-10-01T11:17:45.753
> 
> 标签：php, if-statement

我有一个 php 脚本，带有 if 和 else 块。两者都只包含 echo 语句。if 块执行得很好，但是当 else 块执行时什么都没有打印到屏幕上（甚至不在块之外的 echo 语句）。我尝试了很多方法，例如将 ELSE 语句大写、检查所有大括号是否存在、双重和三重检查语法均无济于事。请帮忙。

```
<?php

// Inialize session
session_start();

// Include database connection settings
include('config.inc');

$usr = mysql_real_escape_string($_POST['****ID']);

// Retrieve email address and message from database according to user's input
$query = "SELECT * FROM users WHERE username = '$usr'";

$result = mysql_query($query) or die(mysql_error());

// Put the id numbers in array $row

$row = mysql_fetch_array($result) or die(mysql_error());

// Test for ID match

if (mysql_num_rows($result) == 1)
{
echo 'The email address of ';
echo $usr;
echo ' is: ';
echo $row['email'];
echo '<p>Message: ';
echo $row['firstname'];
}
else
{
echo 'Sorry it appears that ';
echo '$usr';
echo ' has not registered yet. Why dont you tell him about ****Jacker?'; 
}
// Executing outside  if..else blocks for testing
echo 'Sorry, it appears that ';
echo '$usr';
echo ' has not registered yet. Why dont you tell him about ****Jacker?'; 

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T11:20:47.870

你会有一个错误

```
$row = mysql_fetch_array($result) or die(mysql_error()); 
```

由于结果数为零，您的脚本将打印警告。根据您的配置，您可能会看到白页而不是警告。

请注意 or die(..) 部分。

由于第一部分失败（获取空结果），脚本将终止并停止。不会执行低于此行的代码，因此没有日志，没有 if，...

Best solution is to put the fetch_array inside the if (mysql_num_rows(..) == 1 statement, so we are sure there is at least 1 user to fetch

# windows-8 - HtmlUtilities.ConvertToText 真的很慢

> ID：12672247
> 
> 赞同：1
> 
> 时间：2012-10-01T11:17:47.357
> 
> 标签：windows-8, microsoft-metro, windows-runtime

我正在做一个从 XML-RPC 服务器获取一些数据的简单应用程序，我注意到 HtmlUtilities.ConvertToText 真的很慢，这是在四核机器上需要 900 毫秒的测试：

```
 [TestMethod]
    public void TestHtmlToStringDogSlow()
    {
      string text = @"Zdjelice od dinje
Tartar od morskih delicija
Salata od ječma
Sirni namaz s avokadom
<p>Dosadili su vam uvijek isti namazi? Potpuno vas razumijemo i stoga nudimo namaz od avokada. Za one kojima treba više informacija, glavni su mu sastojci – uz avokado – pinjoli i svježi sir, a neodoljiv je uz prepečenac.</p>
Hladetina
<p>Popularno jelo s kolinja možete poslužiti i kao predjelo svečanog, pa i blagdanskog objeda ili večere, ali i kao samostalno malo jelo.</p>
Jaja u umaku od ajvara
<p>I kad vam nije do maštanja i velikih egzibicija, iz kuhinje možete iznijeti zanimljiva mala iznenađenja posve neočekivana okusa.</p>
Gurmanski zalogajčići
<p>Jelo – dosjetka ne vrednuje se ni brzinom pripreme ni brojem korištenih sastojaka, nego rezultatom. A ovi obogaćeni krekerčići zalogajčići su za bogove.</p>
Pikantni namaz od sira
<p>Dolaze vam gosti ili imate svježega kravljeg sira, a nemate ideju što biste s njime? Načinite vrlo zanimljiv i neuobičajen namaz, koji možete kratko sačuvati i u hladnjaku.</p>
Tuna <em>alla carpaccio</em>
<p>Iako je <em>carpaccio</em> izvorno od sirove zamrznute junetine odnosno govedine, priprema se od različitih namirnica. A pripremate li ga od ribe, ona osobito mora biti vrlo svježa.</p>
Namaz od svježeg sira i gorgonzole
<p>Gorgonzola i začinske trave i običnome sirnom namazu daju fini mediteranski štih. Uz pomno odabran kruh, pa s bademima i orasima, može se poslužiti i u svečanijim prilikama.</p>
Pašteta <em>Twist</em>
<p>Volite li paštete, i u njima možete uživati gurmanski. Idealno za veća okupljanja, za hladan bife.</p>
      ";

      var convertedItems = new List<string>();
      var items = text.Split(new string[] {Environment.NewLine}, StringSplitOptions.RemoveEmptyEntries);
      foreach (string oneItem in items)
      {
        string cnv = HtmlUtilities.ConvertToText(oneItem);
        //string cnv = oneItem.Replace("<p>", "").Replace("</p>", "");
        convertedItems.Add(cnv);
      }            
    } 
```

我尝试评论 ConvertToText 行并做简单的 string.Replace，然后测试只需要 2 毫秒。我非常清楚简单的替换与 ConvertToText 有*很大*不同，但只是为了把事情放在眼里。

所以我的问题是，是否有人在使用 HtmlUtilities.ConvertToText 时遇到过这种缓慢的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:01:59.653

是的，我也看到了这个。我有一个从联合提要加载数据的应用程序。当我使用这种方法时，性能绝对是可怕的。相反，我使用正则表达式去除 HTML 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T18:04:21.567

您应该使用`WebUtility.HtmlDecode`而不是`HtmlUtilities.ConvertToText`. 它要快得多，并且不会用空格替换空白字符。

# asp.net - Telerik RadGrid ExportToCSV 在 Chrome 中不起作用

> ID：12672248
> 
> 赞同：0
> 
> 时间：2012-10-01T11:17:49.977
> 
> 标签：asp.net, csv, telerik, export, radgrid

Telerik RadGrid ExportToCSV 在我的 RadGrid 中使用过，但它在 Chrome 中不起作用，但它在 FF 和 IE 7、8、9 中起作用。它之前也在 Chrome 上工作。

问题在于，它不是导出文件，而是在浏览器中显示数据。我不需要在浏览器中查看数据，这就是网格的用途。我只想导出我的 CSV 文件。

如果我没记错的话，最近在 Chrome 中进行了一些更改。

以前有没有其他人遇到过这个 Telerik 错误？这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:02:14.930

```
 With _radGrid
        For Each col In .MasterTableView.Columns
            If (col.GetType.Name.Equals("GridButtonColumn")) Then
                CType(col, GridButtonColumn).Visible = False
            ElseIf (col.GetType.Name.Equals("GridEditCommandColumn")) Then
                CType(col, GridEditCommandColumn).Visible = False
            ElseIf (col.GetType.Name.Equals("GridHyperLinkColumn")) Then
                CType(col, GridHyperLinkColumn).Visible = False
            End If
        Next
        .ExportSettings.IgnorePaging = True
        .ExportSettings.FileName = ExportFileName
        .ExportSettings.IgnorePaging = True
        .ExportSettings.OpenInNewWindow = True
        .MasterTableView.CurrentPageIndex = 0
        .MasterTableView.ExportToCSV()
    End With 
```

其中 ExportFileName 是一个字符串。

# c - 内存块中的位复位

> ID：12672249
> 
> 赞同：0
> 
> 时间：2012-10-01T11:17:57.297
> 
> 标签：c, logic, bit-manipulation

我有一块分配了 20 字节（160 位）的内存块，memset 值为 1。每个位代表一个传入数据，如果接收到数据，则设置该位，否则重置。我最初设置了所有 160 位，如果没有收到数据，我将重置。下面是示例代码：

```
char *buf = malloc(20);
memset(buf,1,20);

recvfun() {
static int index;
index++;
   if(!received)
     *buf = *buf ^ (1<<(160-index));
...
} 
```

我认为 *buf 只会给出 8 位，而不是完整的内存块，所以每次我尝试重置该位时，上面的代码只会在前 8 位重置。如果假设没有收到第 99 个数据，我需要重置第 99 位。你能帮我实现这个目标吗？感谢您宝贵的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T11:21:01.747

您需要将其分解为字节索引和位索引，例如更改：

```
if(!received)
  *buf = *buf ^ (1<<(160-index)); 
```

至：

```
if (!received)
{
    const int byte_index = index / CHAR_BIT;
    const int bit_index = index & (1 << CHAR_BIT - 1);
    buf[byte_index] ^= (1 << bit_index);
} 
```

另请注意，如果要将所有位初始化为 1 ，则`memset(buf,1,20);`在上面的代码中应该是。`memset(buf,255,20);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T11:21:33.890

你需要计算两件事：

*   块中的索引
*   位偏移

计算它的代码非常简单：

```
blockindex = index / 8;
offset     = index % 8; 
```

然后只需通过组合索引和偏移量来设置位：

```
buf[blockindex] ^= 1 << offset; 
```

**编辑：**虽然我的回答使用与 Paul R 相同的原则，但 Paul 的回答在技术上更好，因为他使用正确的常量（CHAR_BIT）而不是硬编码 8（我感到羞耻）。

# java - 数据库中属性之间的相似性

> ID：12672254
> 
> 赞同：2
> 
> 时间：2012-10-01T11:18:28.717
> 
> 标签：java, algorithm, nearest-neighbor

我正在为我的应用程序创建一个新的搜索系统。现在的想法是使用查询松弛来从数据库中获得更广泛的结果，然后计算它与用户的相关性。问题出在算法上。我正在考虑使用最近邻算法，但我对如何使用它有点不确定。

如何获取数据库中记录与用户搜索的相关性（以 % 为单位）？

我需要在属性*distance*和*category*中执行此操作。换句话说，当我查询数据库时，距离乘以 2 并且通过选择它的父类别来放宽类别。

一个例子：如果用户搜索最远 30 公里外的东西并且类别是“足球”，我将从数据库中获取直到 60 公里的所有记录和“ballSports”（在树中，如：sports->fullContact ->ballSports->soccer，所以我会参加足球、橄榄球、橄榄球等运动）。

还需要考虑用户属性的权重来计算此百分比。如果用户认为类别比距离更重要，则在计算相关性时必须考虑到这一点。

类别树的一个很好的例子和计算距离的公式可以在第 3 页找到：[http ://reference.kfupm.edu.sa/content/d/i/a_distributed_case_based_reasoning_appli_58512.pdf](http://reference.kfupm.edu.sa/content/d/i/a_distributed_case_based_reasoning_appli_58512.pdf)

如何将该公式应用于属性？顺便说一句，我使用的是 MongoDB，所以所有数据都在文档中，与其他表没有关系。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:06:20.980

我从假设您使用经典关系数据库和表具有如下平面结构的搜索结果开始：

| 类别 ID | 纬度 | 经度 | parentCategoryId |

因此，基于父类别的放松类别可能是基于用户输入的类别的父节点对子节点的简单树搜索（假设您已经在内存中创建树）。您可以在类别表上使用 sql 连接，但根据我的经验，它更好地将算法的东西应用到 java - 它更容易测试/重构，并且您可以获得各种具有预测时间/空间复杂性的算法。另一方面，Sqls 可能会让您对执行计划成本有些头疼，这有时在不同的数据库提供者之间会有很大差异。

如何根据距离和多类别匹配获得与用户的相关性百分比？如果用户输入足球，首先显示什么 - 足球或红宝石？

嗯，这是一个非常好的问题，我不知道有什么好的答案，但我要做的是使用来自谷歌搜索的现有数据以下列方式：鉴于用户输入了**足球**（**球类运动**的子项）

*   **为所有按距离排序的足球**比赛分配最高相关性（用户输入）
*   **根据字球运动**（父类别）与子类别名称一起使用的 频率，将相关性分配给相关类别。
    *   对于 ' **ball sport football** '，在谷歌搜索中将是 ' **599,000,000 ' 结果**
    *   对于 ' **ball sport rugby** ' 这将是**'89** ,200,000 ' 在谷歌搜索中的结果
    *   基于上述，显示所有**足球**比赛按距离排序，然后是所有**足球**比赛（谷歌排名第一），然后是所有**橄榄球**比赛（谷歌排名第二）。

谷歌搜索结果排名您可以轻松地以编程方式预先计算或动态检索（除非您计划经常更改类别，否则我不会动态进行）

作为用户，我会对这个输出感到满意，让我知道你的想法:-)

**编辑**：我读过论文，看起来在你的情况下，相似度公式可以简化为计算两个词之间的相似度。

做到这一点的一种方法是获得两个类别的单词 gram 的谷歌排名（'**足球橄榄球**'会给你'199,000,000'和'**足球足球**'会给你'441,000,000'）。它看起来足够好。

为什么我对谷歌排名如此着迷？这些人拥有基于体育网站、文章及其与您的领域问题相关的数据的大量数据。如果是论文（Western Air Ltd.） - 他们的数据特定于他们的内部领域，他们必须使用他们的领域来处理我们的相似性（如特征数量，每个特征的重要性权重等）

# asp.net - Asp.net 返回 json 响应

> ID：12672257
> 
> 赞同：0
> 
> 时间：2012-10-01T11:18:31.037
> 
> 标签：asp.net, json, web-services

我正在开发一个 Web 服务，我需要将用户类型对象作为 json 响应返回。但我无法使用此代码实现它。

```
public class BioMatricUsers : System.Web.Services.WebService {
    public BioMatricUsers()
    {
    }
    public class my_user
    {
        public my_user(string i, string b, string l)
        {
            id = i;
            badgeNumber = b;
            login = l;
        }

        public string id { get; set; }
        public string badgeNumber { get; set; }
        public string login { get; set; }
    }

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string GetUsers() 
    {
        OleDbConnection co = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\confiz\Desktop\att2000.mdb");
        co.Open();
        OleDbCommand cmd = new OleDbCommand("SELECT * FROM USERINFO", co);
        OleDbDataReader reader = cmd.ExecuteReader();
        string jsonString = "";
        int i = 1;
        MemoryStream ms = new MemoryStream();
        my_user user = null;

        Type type = user.GetType();

        while (reader.Read() && i <= 2)
        {
            DataContractJsonSerializer serializer = new DataContractJsonSerializer(user.GetType());
            user = new my_user(reader["USERID"].ToString(), reader["badgenumber"].ToString(), reader["SSN"].ToString());
            serializer.WriteObject(ms, user);
            jsonString = Encoding.Default.GetString(ms.ToArray());
            i++;
        }
        ms.Close();
        co.Close();
        return jsonString;  
     }
} 
```

我在这一行收到空引用错误。DataContractJsonSerializer 序列化器 = 新 DataContractJsonSerializer(user.GetType())

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:31:34.020

这是因为您的用户***为***空：

`my_user user = null;`

尝试：

```
 while (reader.Read() && i <= 2)
    {
        DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(my_user));
        user = new my_user(reader["USERID"].ToString(), reader["badgenumber"].ToString(), reader["SSN"].ToString());
        serializer.WriteObject(ms, user);
        jsonString = Encoding.Default.GetString(ms.ToArray());
        i++;
    } 
```

`Object.getType()`需要一个非空对象实例才能工作。

`typeof(Class)`可以与类一起使用。

见这里：http: [//msdn.microsoft.com/en-us/library/58918ffs%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/58918ffs%28v=vs.71%29.aspx)

虽然还有其他库具有附加功能，但`DataContractJsonSerializer`如果满足您的需求，使用它是完全可以接受的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:24:01.590

您需要一个将对象序列化/反序列化到 json 的库。这是一个很好的.Net [http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)

网页上的示例将解释一切。

# android - 如何在android中动态删除网格视图中的行

> ID：12672261
> 
> 赞同：1
> 
> 时间：2012-10-01T11:18:35.840
> 
> 标签：android, android-gridview

我有**3*3**的网格视图我通过 url 将图像放入网格视图。在我的网址中，我有 n 张图片。我每页拍摄 9 张图像。当用户到达底部时，我需要删除上面的 9 张图像。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:30:26.413

当用户向下滚动时删除行可能不是一个好主意，因为用户可能再次向上滚动，然后您需要再次重绘已删除的行。由于您要显示大量图像，也许您可​​以尝试**LazyLoad** GridView 中的项目。

[此处](https://github.com/thest1/LazyList)给出的代码为 ListView 实现了 LazyLoading，但我非常确定您也可以在 GridView 中实现相同的功能。

# java - 当另一个组件触发它时不要触发事件

> ID：12672265
> 
> 赞同：1
> 
> 时间：2012-10-01T11:19:13.610
> 
> 标签：java, swing, jslider, jspinner, changelistener

我有一个 JSlider 和 JSpinner，它们彼此“链接”。所以 JSpinner 显示了 JSlider 的值。现在，当我移动 JSlider 时，我需要更改 JSpinner 的值（反之亦然）。

我现在的问题是改变（例如你移动滑块）它将更新 JSpinner 的值，这将更新滑块的位置。幸运的是，这不会再次触发 JSpinner 的更新。但是我想防止这个事件被触发两次。

所以我现在的问题是，是否有可能以某种方式说事件中的更改不会再次触发事件？

费边

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-27T22:11:38.960

好吧，您可以通过从相应组件中为每个调用添加和删除侦听器来做到这一点。因此，您需要保留共享侦听器的引用，如以下示例代码：

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.JSpinner;
import javax.swing.SpinnerNumberModel;
import javax.swing.SwingUtilities;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class SpinnerAndSlider extends JPanel {

    public static void main(final String args[]) {

        SwingUtilities.invokeLater(() -> {

            final JSlider slider = new JSlider();
            final JSpinner spinner = new JSpinner(new SpinnerNumberModel(slider.getValue(), slider.getMinimum(), slider.getMaximum(), 1));

            final ChangeListener listener = new ChangeListener() {
                @Override
                public void stateChanged(final ChangeEvent cevt) {
                    if (cevt.getSource() == spinner) {
                        slider.removeChangeListener(this);
                        slider.setValue((Integer) spinner.getValue());
                        slider.addChangeListener(this);
                    }
                    else if (cevt.getSource() == slider) {
                        spinner.removeChangeListener(this);
                        spinner.setValue(slider.getValue());
                        spinner.addChangeListener(this);
                    }
                }
            };

            slider.addChangeListener(listener);
            spinner.addChangeListener(listener);

            final JPanel contents = new JPanel(); //FlowLayout.
            contents.add(slider);
            contents.add(spinner);

            final JFrame f = new JFrame("Spinner with Slider");
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            f.getContentPane().add(contents);
            f.pack();
            f.setLocationRelativeTo(null);
            f.setVisible(true);
        });
    }
} 
```

当然，您也可以使用两个不同的实例（每个实例都是 的一个单独的子类`ChangeListener`）来实现它，然后在创建之后，使用一个 setter 分配例如应该链接的另一个组件。

或者，您可以在 的实例中使用布尔标志`ChangeListener`（以便一个知道何时被另一个调用），而不必在每次侦听器到组件时删除然后再次添加回来。

# mysql - SQL 语句错误 (#1064 - 你的 SQL 语法有错误)

> ID：12672267
> 
> 赞同：0
> 
> 时间：2012-10-01T11:19:34.877
> 
> 标签：mysql, sql, mysql-error-1064

```
SELECT add.id_address, 
       add.alias, 
       add.firstname, 
       add.lastname, 
       add.postcode, 
       add.city, 
       add.address1, 
       add.address2, 
       cl.name as country
FROM address add, 
     country_lang cl
WHERE add.id_customer=2 AND cl.id_lang=3 
AND add.id_country=cl.id_country AND add.active=1 
ORDER BY add.id_address ASC 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T11:22:02.503

不要`add`用作表别名。它是一个保留关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:22:49.563

`add`是一个[保留关键字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)，您必须对其进行转义或使用其他别名`FROM address a`代替`FROM address add`它，如下所示：

```
SELECT a.id_address, a.alias, a.firstname,
  a.lastname, a.postcode, a.city, 
  a.address1, a.address2, cl.name as country
FROM address a, country_lang cl
WHERE a.id_customer = 2 AND cl.id_lang=3 
  AND a.id_country = cl.id_country 
  AND a.active=1 
ORDER BY a.id_address ASC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T11:23:44.013

`backtick`如果您想以`reserved keyword`下列方式使用，则必须使用：

```
 SELECT `add`.id_address, `add`.alias, `add`.firstname,
      `add`.lastname, `add`.postcode, `add`.city, 
      `add`.address1, `add`.address2, cl.name as country
    FROM address `add`, country_lang cl
    WHERE `add`.id_customer = 2 AND cl.id_lang=3 
      AND `add`.id_country = cl.id_country 
      AND `add`.active=1 
    ORDER BY `add`.id_address ASC 
```

除了例外，我建议您通过以下方式使用 JOIN：

```
SELECT a.id_address, 
       a.alias, 
       a.firstname, 
       a.lastname, 
       a.postcode, 
       a.city, 
       a.address1, 
       a.address2, 
       cl.name as country
FROM address a JOIN country_lang cl ON a.id_country=cl.id_country
WHERE a.id_customer=2 AND cl.id_lang=3 AND a.active=1 
ORDER BY a.id_address ASC 
```

# php - 用户 Web 应用程序的安全性

> ID：12672274
> 
> 赞同：0
> 
> 时间：2012-10-01T11:19:55.783
> 
> 标签：php, database, security, codeigniter

我一直想知道我的应用程序的安全方面。我正在为我的项目使用 CodeIgniter PHP 框架。

我想知道对此的一些“专家”意见。我有登录功能。当用户登录时，会话存储在数据库中。我在信息会话中添加了用户 ID 等信息。用户可以创建公司。但要做到这一点，我首先检查他的帐户，看看他是否已经有一个。这个会话用户 ID 允许我运行一个数据库请求来找出它。例如 ：

```
function create(){
    $hasCompany = $this->Accountmodel->hasCompany($this->session->userdata('id'));
    if($hasCompany){
        $data['company'] = $this->Companymodel->getCompanyInfo($this->session->userdata('id');
        $this->load->view('company/panel', $data);
    }
    else{
        $this->load->view('company/create');
    }

} 
```

如果他有，我可以打印公司编辑/删除面板。它允许我避免在 url 中使用 id 参数，例如：myserver.com/company/edit/[id]

所以说到重点，我想知道，就安全性而言，这是否可行，或者存在某种漏洞。

欢迎任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:25:48.190

会话劫持将是一种威胁，在下面的线程中已经解释了如何避免这种情况。

[防止会话劫持的最佳方法是什么？](https://stackoverflow.com/questions/22880/what-is-the-best-way-to-prevent-session-hijacking)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:33:52.150

如果会话数据存储在数据库中***并且***会话 cookie 是加密的，那么使用来自会话的数据是非常安全的。

会话 cookie 仅保存会话 ID、用户代理和 IP 地址。此外，会话每 5 分钟到期（默认情况下），因此为了劫持会话，需要有人破解 cookie 加密，将 IP 和用户代理设置为存储在 cookie 中的 IP 和用户代理，并在 5会话 ID 更改前的分钟窗口。

这（在我看来）极不可能。

You may also want to enable the Cross Site Request Forgery (CSRF) option in your config file to increase your forms security (though nothing replaces proper user-data validation)

# ftp - Aptana Studio 3 - FTP 连接错误（打开文件读取失败）

> ID：12672287
> 
> 赞同：3
> 
> 时间：2012-10-01T11:20:46.230
> 
> 标签：ftp, aptana3

我正在尝试通过 FTP 连接将文件下载到我的本地文件系统，以便在 Aptana Studio 3 中使用它。但我遇到了一个奇怪的问题。每当我尝试从服务器获取文件时，我都会收到此错误：“打开文件以读取失败”

非常简单但没有信息的消息。于是我上网查了一下。没有多少人有这个错误，但有些人正在谈论一个对他们有用的解决方案。他们声称错误的来源是Windows防火墙，为了解决需要在命令行（cmd.exe）“netsh advfirewall set global StatefulFtp disable”中运行此命令

然而这并没有解决我的问题。然后我意识到错误只发生在长时间下载中。（下载文件很多，需要很长时间）。

然后我观察得更仔细了。因此，Aptana 基本上首先尝试获取文件的日期（最后修改）以与本地文件进行比较，然后下载新文件。所以有 2 个阶段（检查日期和下载）。

如果最后阶段（下载）花费的时间超过约 30 秒，那么我会收到此错误。还有其他人有这个问题吗？我该如何解决这个问题？

注意：这是一个被动的正常（非安全）ftp 连接。

编辑：在控制台中，有一次出现此错误，我意识到也存在同步问题。

> ftp> MDTM w.jpg
> 213 20090622101257
> ftp> TYPE I
> 200 类型设置为 I
> **ftp> CWD /www/home/images/banner
> 200 类型设置为 I
> ftp> PASV 250
> CWD 命令成功**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-05T03:19:01.543

我遇到了同样的问题，**我修复了禁用 Windows Firewall**。即使我允许 AptanaStudio.exe 的所有流量仍然无法正常工作。只是禁用它工作的所有防火墙。

我希望有人知道在我使用 Aptana 时我必须允许的程序是什么，而不仅仅是禁用所有防火墙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T18:31:02.060

我遇到了同样的问题，经过长时间的研究后，我注意到“双向自动同步”选项存在某种问题。看起来 Aptana 无法处理长项目，或者服务器不喜欢 aptana 抓取和读取文件。

所以我只是禁用了“双向自动同步”

1.  右键单击项目 -> 发布 -> 部署设置
2.  取消选中“自动将我的更改与远程站点同步”或选中“自动从我的机器同步到远程站点”

# linux - Emacs：编辑根文件没有流浪汉

> ID：12672294
> 
> 赞同：4
> 
> 时间：2012-10-01T11:21:10.550
> 
> 标签：linux, ubuntu, emacs, sudo, kubuntu

这是在非 root 运行 emacs 中打开 root 文件的一种方法：

```
 erf () { SUDO_EDITOR="emacsclient -n -a emacs" sudoedit $@; } ;; erf = Emacs Root Foreground 
```

它会询问一个 root 密码，一旦你输入它，它就会打开一个文件副本`/tmp`。例子：

```
$ cd /etc/apt
$ erf sources.list 
```

打开：`sourcesXXiOSmYN.list`。所以我编辑了这个东西，并用`C-x C-s`-- 但它没有保存：

```
$ sudoedit: sources.list unchanged 
```

我如何让它保存东西？（功能会很整洁）

**编辑**：

```
 erf () { SUDO_EDITOR="emacsclient -a emacs" sudoedit $@; } ;; erf = Emacs Root Foreground 
```

解决它。保存文件，然后 - 终止缓冲区或`C-x #`. 有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T15:10:44.623

删除 -n 选项。我使用的FWIW，

```
alias E="SUDO_EDITOR=\"emacsclient -c -a emacs\" sudoedit" 
```

被带到某个地方...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T10:46:50.167

我不使用emacs，但有什么问题

```
export EDITOR=emacs
# or export VISUAL=emacs
sudoedit some-root-file 
```

? 将导出行放入您的 .bashrc 中，您就完成了。

# javascript - 在两个下拉列表之间移动选项的简单方法？

> ID：12672295
> 
> 赞同：1
> 
> 时间：2012-10-01T11:21:13.830
> 
> 标签：javascript, jquery, html

我正在尝试开发一种简单的方法来使用 JavaScript 或 JQuery 将选项从一个下拉列表移动到另一个下拉列表。但是，我在互联网上找到的每个示例都非常陈旧，或者根本不起作用（我自己的知识有点有限）。

谁能帮我开发一种在下拉列表之间移动选项的简单方法？

这是我拥有的 HTML：

```
<select name="sourceSelect" id="sourceSelect" size="3"  onclick="">
  <option value="example1">Example1</option>
  <option value="example2">Example2</option>
  <option value="example3">Example3</option>
</select>

<input type="submit" name="forward" id="forward" value="Forward" onclick=""/>

<input type="submit" name="back" id="back" value="Back" onclick=""/>

<select name="destinationSelect" id="destinationSelect" multiple="multiple" size="3" onclick="">
  <!--EMPTY DROP-DOWN LIST-->
</select> 
```

我认为如果使用数组，下拉列表的名称可能需要更改为 sourceSelect[]？我还添加了空的 onclick，但我不确定是否有必要这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T11:37:14.917

[这](http://jsfiddle.net/RsgR3/10/)是一个使用 jQuery 的工作解决方案：

```
function cutAndPaste(from, to) {
    $(to).append(function() {
        return $(from + " option:selected").each(function() {
            this.outerHTML;
        }).remove();
    });
}

$("#forward").off("click").on("click", function() {
    cutAndPaste("#sourceSelect", "#destinationSelect");
});

$("#backward").off("click").on("click", function() {
    cutAndPaste("#destinationSelect", "#sourceSelect");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T11:32:41.890

使用 jQuery，最简单的前进按钮代码可能是：

```
$('#forward').on('click',function(){

    var $selected = $('option:selected','#sourceSelect');
    $selected.each(function(i,e){
        $('#destinationSelect').append(
            $('<option />').val(e.value).html(e.innerHTML)
        );
    });
    $selected.remove();
}); 
```

还有你的后退按钮：

```
$('#back').on('click',function(){

    var $selected = $('option:selected','#destinationSelect');
    $selected.each(function(i,e){
        $('#sourceSelect').append(
            $('<option />').val(e.value).html(e.innerHTML)
        );
    });
    $selected.remove();
}); 
```

现场示例：http: [//jsfiddle.net/y6B8Q/](http://jsfiddle.net/y6B8Q/)

然后，您可以随心所欲地使用它，如果您愿意，可以制作自己的 jquery 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:42:19.800

```
var content_option = $('#sourceSelect option[value="example1"]').contents();
$('#sourceSelect option[value="example1"]').remove();
$('#destinationSelect').append('<option value="example1">'+content_option+'</option>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T11:47:05.747

`Javascript`解决方案可能是迭代选择的选项`source`并将其添加到`destination`如下

```
 for (i=0;i<sourceSelect.length;i++)
    {
      var newOption = document.createElement('<option value="'+sourceSelect.options[i].text+'">');
      destinationSelect.options.add(newOption);
    } 
```

另外，如果您想`clear`选择源，请添加以下内容

```
sourceSelect.innerHTML = '' 
```

# microsoft-metro - 人们如何在 WinRT/Metro 中跨页面共享相同的内容/布局

> ID：12672307
> 
> 赞同：1
> 
> 时间：2012-10-01T11:21:40.277
> 
> 标签：microsoft-metro, windows-runtime, windows-store-apps

如何在 Windows 商店应用程序中的所有页面上共享一些一般布局和内容？

可以定义一种“母版页”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:43:14.810

既然你提到了母版页等效方法，我找到了一个链接，只想分享。希望这会给出更好的想法。

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/3e447ad7-04a0-4e9a-bc57-6b43f78217d1/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/3e447ad7-04a0-4e9a-bc57-6b43f78217d1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:43:12.570

从基本意义上讲，您定义了一个用于显示数据的模型。您将这个模型的一个实例传递给每个页面。每个页面上的控件都是绑定到模型上下文的数据。因此，您为该数据设置了一个模板并将其链接到控件。它称为MVVM。MVVM 代表模型 - 视图 - 视图模型。这里有几个很好的例子：

[http://www.codeproject.com/Articles/391783/An-Address-Book-Application-Made-in-MVVM-For-Metro](http://www.codeproject.com/Articles/391783/An-Address-Book-Application-Made-in-MVVM-For-Metro)

[Windows 应用商店应用的导航设计](http://msdn.microsoft.com/en-us/library/windows/apps/hh761500)

# android-ndk - Windows 7 Eclipse Indigo Android NDK 错误 LOCAL_SRC_FILES 指向丢失的文件

> ID：12672310
> 
> 赞同：0
> 
> 时间：2012-10-01T11:21:58.163
> 
> 标签：android-ndk, eclipse-indigo

我已经设置了 android ndk 并使用 ndk 文件夹中的示例对其进行了测试。

我认为我的错误与路径有关，但我不确定如何修复它。我认为我的问题类似于这个问题[LOCAL_SRC_FILES 指向丢失的文件](https://stackoverflow.com/questions/12419093/local-src-files-points-to-a-missing-file)，但没有给出解决方案，因此我的问题不是重复的。

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := QCAR-prebuilt
LOCAL_SRC_FILES = ../../../build/lib/$(TARGET_ARCH_ABI)/libQCAR.so
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/../../../build/include
include $(PREBUILT_SHARED_LIBRARY)

#-----------------------------------------------------------------------------

include $(CLEAR_VARS)

LOCAL_MODULE := ImageTargets

# The TARGET_PLATFORM defines the targetted Android Platform API level

TARGET_PLATFORM := android-5

# This variable determines the OpenGL ES API version to use:
# If set to true, OpenGL ES 1.1 is used, otherwise OpenGL ES 2.0.

USE_OPENGL_ES_1_1 := false

# Set OpenGL ES version-specific settings.

ifeq ($(USE_OPENGL_ES_1_1), true)
    OPENGLES_LIB  := -lGLESv1_CM
    OPENGLES_DEF  := -DUSE_OPENGL_ES_1_1
else
    OPENGLES_LIB  := -lGLESv2
    OPENGLES_DEF  := -DUSE_OPENGL_ES_2_0
endif

LOCAL_CFLAGS := -Wno-write-strings $(OPENGLES_DEF)

LOCAL_LDLIBS := \
    -llog $(OPENGLES_LIB)

LOCAL_SHARED_LIBRARIES := QCAR-prebuilt

.

LOCAL_SRC_FILES := ImageTargets.cpp SampleUtils.cpp Texture.cpp

LOCAL_ARM_MODE := arm

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:46:59.457

在这里查看类似问题的答案：[ndk build library outside main project source tree](https://stackoverflow.com/questions/12551951/ndk-build-library-outside-main-project-source-tree/12553884#12553884)

另请注意，当您指定 LOCAL_SRC_FILES 时，NDK 将**相对于 LOCAL_PATH**（即您的 Android.mk 所在的位置）查找它们。

最后，在 Windows 上使用 ndk-r8b 更容易避免使用 cygwin 并使用**ndk-build.cmd**而不是打开**bash**

# jquery - 使用 jquery 查找 Div 并设置 CSS

> ID：12672312
> 
> 赞同：0
> 
> 时间：2012-10-01T11:22:01.573
> 
> 标签：jquery, css, html

我的 html 存储在一个变量中，我只是从该变量中找到 div 并设置 css，但一切都不起作用。这是我的代码

```
sHtml = $(sHtml).find('#frm').html();
sHtml = $(sHtml).find('#acloginpod').css({ 'width': xWidth + 'px' });  
$sHtml = $(sHtml); 
```

我的第三行有什么问题。我试图从 html 中找到 div **acloginpod**，它存储在 sHtml 变量中，宽度存储在 xWidth 变量中。我认为我的代码中有问题，但无法找到它。所以请帮我纠正代码。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:25:34.193

问题是您在代码中混合了 HTML 字符串和 DOM 对象（包装到 jQuery 对象中）。

有了这条线...

```
$(sHtml).find('#acloginpod').css({ 'width': xWidth + 'px' }); 
```

...您将带有 HTML (sHtml) 的字符串转换为 DOM 对象，然后在其层次结构中找到一些元素，然后更改其属性。

但在这一行...

```
$sHtml = $(sHtml); 
```

...您只是将所有更改扔掉，因为您*再次*将原始字符串转换为 DOM 对象。

我想知道你为什么不...

```
 $sHtml = $(sHtml);
  $sHtml.find('#acloginpod').css({ width: xWidth + 'px' }); 
```

... 一直在使用 jQuery 对象工作（和传输）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:26:55.240

我在您的代码中包含了注释：

```
sHtml = $(sHtml).find('#frm').html(); // Returns a string: the .innerHTML of the element with ID frm
sHtml = $(sHtml).find('#acloginpod').css({ 'width': xWidth + 'px' }); // Returns a jQuery object of the element with ID #acloginpod
$sHtml = $(sHtml); // No need to do that sHtml is already a jQuery object 
```

# crash - 选择器视图上的断言失败

> ID：12672318
> 
> 赞同：24
> 
> 时间：2012-10-01T11:22:33.350
> 
> 标签：crash, ios6, uipickerview

我在滚动带有零数据（零行）的选择器视图时遇到断言失败。在滚动选择器视图时，我遇到了这个崩溃。在 iOS 6 上测试

> ***断言失败 -[UITableViewRowData rectForRow:inSection:], /SourceCache/UIKit_Sim/UIKit-2372/UITableViewRowData.m:1630
> 
> ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“在无效索引路径（2 个索引 [0, 0]）处请求 rect”

任何帮助都是可观的。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-02T03:30:46.627

我有同样的问题

我不知道为什么会发生，

但它可以在 ios6 中修复（我没有检查它在 ios5 中的工作方式）：

```
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    if ([self getCount] == 0)
        return 1;
     return [self getCount];
}

- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:   (NSInteger)component reusingView:(UIView *)view {
   if ([self getCount] == 0)
       return nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:30:42.150

答案其实很简单！在我自己遇到了一些麻烦之后，我发现您必须将委托和数据源设置为选择器视图连接到的视图控制器。

# php - Zend_Log 在后台 - 可能吗？

> ID：12672324
> 
> 赞同：0
> 
> 时间：2012-10-01T11:22:58.510
> 
> 标签：php, zend-framework, logging, zend-log

我的`Zend_Log`作者正在将数据发送到第三方资源，例如 Amazon DynamoDB。这样的操作需要时间，我想在后台进行。我尝试使用`pcntl_fork()`，但它不能与 Apache 一起正常工作。对于如何在 PHP 和 Zend Framework 中并行执行日志记录操作，您还有其他想法吗？也许有一些例子？

编辑：我知道一个明显的解决方案是将日志消息保存到一些文件/队列中并稍后推送它们，但这不是我在这个问题中寻找的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:56:05.947

这个问题的正确解决方案是依靠[syslog](http://en.wikipedia.org/wiki/Syslog)和`Zend_Log_Writer_Syslog`. Syslog 将日志客户端与实际的日志写入者（到任何第三方资源）分离。必须将 Amazon 写入器配置为 syslog 服务器端配置的一部分。

# android - 当移动设备在 Android 中使用蓝牙连接时如何获取连接的移动设备详细信息

> ID：12672327
> 
> 赞同：3
> 
> 时间：2012-10-01T11:23:00.920
> 
> 标签：android, bluetooth

如果我们有一个应用程序，我们会在手机中安装应用程序，当任何设备使用蓝牙连接时，我们将获得手机详细信息，如蓝牙地址、IMEI？

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:26:19.810

whnever you connected with two devices using bluetooth than get the IMEI number of device with the following code:

```
 TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
       telephonyManager.getDeviceId(); 
```

and also you need permission in android manifest file :

```
 <uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

and also check the link for bluetooth example:

[http://luugiathuy.com/2011/02/android-java-bluetooth/](http://luugiathuy.com/2011/02/android-java-bluetooth/)

# internet-explorer - 垂直和水平对齐具有相对大小的固定 div

> ID：12672330
> 
> 赞同：0
> 
> 时间：2012-10-01T11:23:10.267
> 
> 标签：internet-explorer, firefox, css, alignment

我问这个问题是因为它在 chrome 浏览器上正确显示，但在 Firefox/IE 中却不能正确显示，这让我很抓狂。

我想要一个 div，它必须根据窗口垂直和水平对齐。它也有相对大小。你能帮我么 ？我试过这个，但它只适用于 Chrome：

```
 #itemNewsFS {
       position:fixed;
       display:none;
       width: 50%;
       left: 50%; 
       margin-left: -25%;
       height: 80%;
       top: 50%;
       margin-top: -40%;
    } 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:27:35.567

边距（垂直和水平）是相对于包含框的**宽度**计算的，请阅读 CSS2.1 规范的摘录：[little link](http://www.w3.org/TR/CSS21/box.html#margin-properties)。

为了实现你想要的，你可以保持你的`margin-left`价值，但你必须使用 JavaScript 来修复`margin-top`：

```
document.getElementById("itemNewsFS").style.marginTop = Math.floor(window.innerHeight * 40 / 100) + "px"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:11:32.323

尝试这样做：

```
<div class="block">
   <div id="itemNewsFS">
       Unknown stuff to be centered.
   </div>
</div> 
```

```
.block {
    text-align: center;
    background: #c0c0c0;
    border: #a0a0a0 solid 1px;
    margin: 20px;
    height: 100%; /* Put your height here */
}

.block:before {
    content: '';
    display: inline-block;
    height: 100%; 
    vertical-align: middle;
    margin-right: -0.25em; /* Adjusts for spacing */

}

#itemNewsFS {
display: inline-block;
    vertical-align: middle;
    width: 300px;
    padding: 10px 15px;
    border: #a0a0a0 solid 1px;
    background: #f5f5f5;
}​ 
```

来源：[http ://css-tricks.com/centering-in-the-unknown/](http://css-tricks.com/centering-in-the-unknown/)

# asp.net-mvc - 具有自定义身份验证的自定义 AuthorizeAttribute

> ID：12672335
> 
> 赞同：10
> 
> 时间：2012-10-01T11:23:35.623
> 
> 标签：asp.net-mvc, authorize-attribute, custom-authentication

我正在使用 ASP.NET MVC 4 Web 应用程序作为某些 WCF 服务的前端。所有用户登录/注销和会话控制都在后端完成。MVC 应用程序应该只存储一个带有会话 ID 的 cookie。我的客户端不允许使用表单身份验证，一切都必须自定义。

我在 web.config 中设置了以下内容：

```
 <system.web>
...
    <authentication mode="None" />
  </system.web>

  <system.webServer>
    <modules>
...
      <remove name="FormsAuthentication" />
...    
    </modules>
  </system.webServer> 
```

我还有一个全局过滤器：

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        // Force all actions to request auth. Only actions marked with [AllowAnonymous] will be allowed.
        filters.Add(new MyAuthorizeAttribute());
    }
} 
```

在 Global.asax 中调用

```
 FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters); 
```

我已经用 [AllowAnonymous] 标记了每个不需要授权的控制器和操作。

现在我必须实现 MyAuthorizeAttribute。我尝试了一些教程，但没有一个完全符合我的场景。

基本上，我必须为每个动作处理以下场景：

1.  如果存在有效的 cookie，则应认为当前请求已授权（将不会检查任何角色，只有一种用户）。
2.  如果没有 cookie，我应该覆盖默认的 MVC 处理程序（它尝试加载帐户/登录）并将用户重定向到主页/索引页面，并显示用户应该登录的消息。
3.  如果 WCF 方法调用抛出 FaultException，而我们的自定义 SecurityFault 表示会话已过期（SecurityFault 有一个包含异常原因的自定义枚举字段），我应该销毁我的自定义会话 cookie 并再次将用户重定向到主页/索引页面用户应该登录的消息，因为他的最后一个会话已过期。对于所有其他 SecurityFaults，我可以让它们通过 - 我有一个全局错误处理程序。

据我了解，我需要重写 AuthorizeCore （检查我的 cookie 以查看会话是否存在并且仍然有效）和 HandleUnauthorizedRequest （将用户重定向到主页/索引而不是默认登录页面）。

对于重定向，我尝试过：

```
 protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {            
        base.HandleUnauthorizedRequest(filterContext);
        filterContext.Result = new RedirectResult("/Home/Index/NeedsLogin");
    } 
```

这似乎可以很好地处理第二种情况（不过，我不确定那个基本调用 - 需要吗？）。

对于第一种情况，我需要实现 AuthorizeCore。我不确定，如何正确地做到这一点。我已经看到 AuthorizeAttribute 有一些用于处理缓存情况的代码，也许还有更多隐藏的功能，我不想破坏它。

对于第三种情况，我不确定 MyAuthorizeAttribute 是否能够处理它。AuthorizeAttribute 能否捕获 Action 内部发生的异常，或者我必须在全局错误处理程序中处理 SecurityFault.SessionExpired 情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T21:49:43.373

不完全确定我明白了，但是如果您创建一个继承自 System.Web.MVC.Authorize 属性的自定义授权过滤器，就像这样。

```
 public class CustomAuthorize : AuthorizeAttribute
    {
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        if (CookieIsValid(filterContext.Request.Cookies["cookieyouwant"])
        {
             filterContext.Result = new RedirectResult("DestUrl");
        }
        else
        {
            filterContext.Result = new RedirectResult("/Home/Index/NeedsLogin");
        }
    }
} 
```

然后装饰你需要使用这个授权的方法会成功吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T08:59:54.623

这是我现在的做法：

```
 public class MyAuthorizeAttribute : AuthorizeAttribute
    {
        public override void OnAuthorization(AuthorizationContext filterContext)
        {
            bool authorized = false;

            /// MVC 4 boilerplate code follows
            if (filterContext == null)
                throw new ArgumentNullException("filterContext");

            bool skipAuthorization = filterContext.ActionDescriptor.IsDefined(typeof(AllowAnonymousAttribute), inherit: true)
                          || filterContext.ActionDescriptor.ControllerDescriptor.IsDefined(typeof(AllowAnonymousAttribute), inherit: true);

            if (skipAuthorization)
            {
                return;
            }

            if (OutputCacheAttribute.IsChildActionCacheActive(filterContext))
            {
                throw new InvalidOperationException(
                    "MyAuthorizeAttribute cannot be used within a child action caching block."
                );
            }
            // end of MVC code

            // custom code
            if (!AuthorizeCore(filterContext.HttpContext))
            {
                // if not authorized from some other Action call, let's try extracting user data from custom encrypted cookie
                var identity = MyEncryptedCookieHelper.GetFrontendIdentity(filterContext.HttpContext.Request);
                // identity might be null if cookie not received
                if (identity == null)
                {
                    filterContext.HttpContext.User = new GenericPrincipal(new GenericIdentity(""), null);
                }
                else
                {
                    authorized = true;
                    filterContext.HttpContext.User = new MyFrontendPrincipal(identity);
                }

                // make sure the Principal's are in sync - there might be situations when they are not!
                Thread.CurrentPrincipal = filterContext.HttpContext.User;
            }

            // MVC 4 boilerplate code follows
            if (authorized)
            {
                // ** IMPORTANT **
                // Since we're performing authorization at the action level, the authorization code runs
                // after the output caching module. In the worst case this could allow an authorized user
                // to cause the page to be cached, then an unauthorized user would later be served the
                // cached page. We work around this by telling proxies not to cache the sensitive page,
                // then we hook our custom authorization code into the caching mechanism so that we have
                // the final say on whether a page should be served from the cache.

                HttpCachePolicyBase cachePolicy = filterContext.HttpContext.Response.Cache;
                cachePolicy.SetProxyMaxAge(new TimeSpan(0));
                cachePolicy.AddValidationCallback(CacheValidateHandler, null /* data */);
            }
            else
            {
                HandleUnauthorizedRequest(filterContext);
            }
            //end of MVC code
        }

        protected override bool AuthorizeCore(HttpContextBase httpContext)
        {
            if (httpContext == null)
                throw new ArgumentNullException("httpContext");

            // check to make sure the user is authenticated as my custom identity
            var principal = httpContext.User as MyFrontendPrincipal;
            if (principal == null)
                return false;

            var identity = principal.Identity as MyFrontendIdentity;
            if (identity == null)
                return false;

            return true;
        }

        protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
        {            
            // default MVC result was:
            // filterContext.Result = new HttpUnauthorizedResult();

            // but I redirect to index login page instead of kicking 401
            filterContext.Result = new RedirectResult("/Home/Index/NeedsLogin");
        }

        // MVC 4 boilerplate code follows
        private void CacheValidateHandler(HttpContext context, object data, ref HttpValidationStatus validationStatus)
        {
            validationStatus = OnCacheAuthorization(new HttpContextWrapper(context));
        }

        // This method must be thread-safe since it is called by the caching module.
        protected virtual HttpValidationStatus OnCacheAuthorization(HttpContextBase httpContext)
        {
            if (httpContext == null)
                throw new ArgumentNullException("httpContext");

            bool isAuthorized = AuthorizeCore(httpContext);
            return (isAuthorized) ? HttpValidationStatus.Valid : HttpValidationStatus.IgnoreThisRequest;
        }
    } 
```

但是，它不能处理我的第三种情况，所以我将在全局错误处理程序中实现它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T20:14:36.523

**关于您的第一个要求：**

正如您已经发现的那样，`OnAuthorization`它处理了许多方面，包括缓存。
如果您只对自定义验证用户凭据的方式感兴趣，我建议您`AuthorizeCore`改用覆盖。例如：

```
public class ClientCookieAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        HttpCookie cookie = httpContext.Request.Cookies[_tokenCookieName];

        bool isAuthenticated = ValidateUserByCookie(cookie);

        return isAuthenticated;
    }

    private bool ValidateUserByCookie(HttpCookie cookie)
    {
        var result = false;
        // Perform validation
        // You could include httpContext as well, to check further information
        return result;
    }

    private static const string _tokenCookieName = "myCookieName";
} 
```

您可能还想看看其他线程：

1.  [SO - 自定义授权属性](https://stackoverflow.com/questions/5070339/custom-authorize-attribute)
2.  [ASP.NET - 自定义 AuthorizationFilter 重定向问题](http://forums.asp.net/t/1586116.aspx/1)
3.  [忍者日记](http://www.diaryofaninja.com/blog/2011/07/24/writing-your-own-custom-aspnet-mvc-authorize-attributes)

# php - 504 网关超时媒体寺

> ID：12672340
> 
> 赞同：8
> 
> 时间：2012-10-01T11:23:51.893
> 
> 标签：php, timeout, mediatemple, http-status-code-504

当我的 php 脚本需要运行超过 60 秒时，我不断收到 504 网关错误。

我在专用服务器上的 Media Temple 上。我已经联系了 Media Temple，他们对我很有帮助，但他们的建议似乎都对我不起作用。我被告知要编辑这个文件。

/etc/httpd/conf.d/fcgid.conf

我有...见下文

```
LoadModule fcgid_module modules/mod_fcgid.so

<IfModule mod_fcgid.c>

<IfModule !mod_fastcgi.c>
    AddHandler fcgid-script fcg fcgi fpl
</IfModule>

  FcgidIPCDir /var/run/mod_fcgid/sock
  FcgidProcessTableFile /var/run/mod_fcgid/fcgid_shm
  FcgidIdleTimeout 300
  FcgidMaxRequestLen 1073741824
  FcgidProcessLifeTime 10000
  FcgidMaxProcesses 64
  FcgidMaxProcessesPerClass 15
  FcgidMinProcessesPerClass 0
  FcgidConnectTimeout 600
  FcgidIOTimeout 600
  FcgidInitialEnv RAILS_ENV production
  FcgidIdleScanInterval 600

</IfModule> 
```

我试图尽可能地最大化一切。为了测试这一点，我只是运行下面的函数。

```
function test504(){
    @set_time_limit(0);
    sleep(60);
    echo "true";
} 
```

睡眠将适用于低于 60 秒的任何值，但任何更多的值都会导致 504 网关错误

我的 phpinfo(); 输出

```
max_execution_time 600
max_input_time 180 
```

我看过一些关于增加 fastcgi_connect_timeout 设置的帖子，但不知道在哪里可以找到 Media Temple。

任何人都可以帮忙吗？谢谢。

** 更新 **

在与支持人员聊天后，我被告知我需要编辑 nginx.conf 并被定向到这篇文章[http://blog.secaserver.com/2011/10/nginx-gateway-time-out/](http://blog.secaserver.com/2011/10/nginx-gateway-time-out/)

我在服务器设置中找不到任何值。client_header_timeout client_body_timeout send_timeout fastcgi_read_timeout

我的 nginx.conf 文件看起来像这样

```
#error_log  /var/log/nginx/error.log  info;

#pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  /var/log/nginx/access.log  main;

    sendfile        on;
    #tcp_nopush     on;
    #keepalive_timeout  0;
    keepalive_timeout  120;
    #tcp_nodelay        on;

    #gzip  on;
    #gzip_disable "MSIE [1-6]\.(?!.*SV1)";

    server_tokens off;

    include /etc/nginx/conf.d/*.conf;
} 
```

** 更新 **

我设法解决了这个问题，并添加了一篇关于我如何修复它的博客文章。

[http://devsforrest.com/116/boost-settings-on-media-temple-for-maximum-settings](http://devsforrest.com/116/boost-settings-on-media-temple-for-maximum-settings)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-24T18:21:29.040

我也有同样的问题，我通过编辑 nginx.conf 文件解决了这个问题。在大多数情况下，这可以通过在 nginx.conf 中添加/增加 send_timeout 指令来解决。

找到您的 nginx.conf 文件（通常位于`/usr/local/nginx/nginx.conf`或有时位于`/etc/nginx/sites-available/default`），使用**nano或任何其他文本编辑器打开它，并在****http { }**之间添加以下行，使其看起来像：

```
http {
include       mime.types;
default_type  application/octet-stream;

#log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
#                  '$status $body_bytes_sent "$http_referer" '
#                  '"$http_user_agent" "$http_x_forwarded_for"';

#access_log  /var/log/nginx/access.log  main;

sendfile        on;
#tcp_nopush     on;
#keepalive_timeout  0;
keepalive_timeout  120;
#tcp_nodelay        on;

#gzip  on;
#gzip_disable "MSIE [1-6]\.(?!.*SV1)";

server_tokens off;

send_timeout 10m;

include /etc/nginx/conf.d/*.conf;
} 
```

就我而言，我不得不增加一些其他指令，例如：

```
client_header_timeout 10m;
client_body_timeout 10m;
send_timeout 10m;
fastcgi_read_timeout 10m; 
```

也。

编辑完文件后，只需使用以下命令重新加载 nginx：

```
kill -HUP `ps -ef | grep nginx | grep master | awk {'print $2'}` 
```

或者

```
sudo service nginx restart 
```

那应该解决它。

（我在这里找到了指令：http: [//blog.secaserver.com/2011/10/nginx-gateway-time-out/](http://blog.secaserver.com/2011/10/nginx-gateway-time-out/)）

PS：我看到 OP 的评论带有指向他们博客的链接，但我认为在此处添加相关信息可能会有所帮助。

# weblogic-10.x - Weblogic 10.3.5 上的 SpringWS2 和 JDOM2 Webservice - 请求元素文本未绑定

> ID：12672343
> 
> 赞同：1
> 
> 时间：2012-10-01T11:24:14.490
> 
> 标签：weblogic-10.x, spring-ws, saaj, jdom-2

在 Weblogic 10.3.5 服务器上部署我的 Spring WS 2 Web 服务（使用 JDOM2 元素作为参数）后，根元素的子元素（这是我的端点函数的主要参数）从不包含文本内容。

例子：

请求 XML（发送时）

```
<root foo="bar">
  <doo>dat</doo>
</root> 
```

请求 JDOM2 元素结构（如函数中所示）

```
<root foo="bar">
  <doo/>
</root> 
```

这在 junit 和 glassfish 服务器上运行良好。weblogic 还没有特殊的配置。

我怀疑某些 weblogic 库可能会覆盖 JDOM2 实现，但如果您有类似的经历，我将非常感谢您提供一些意见。

**更新**

在调试 jdom2 实现时，我发现该文本以“weblogic.xml.saaj.TextImpl”的形式进入 DOMBuilder。JDom 无法提取文本。

也许有人提示如何防止 weblogic 库搞乱应用程序......？

（也感谢您的评论）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:50:36.057

我通过将 SAAJ 消息工厂设置为 Sun 实现解决了这个问题：

使用 Maven 依赖项：

```
<dependency>
  <groupId>com.sun.xml.messaging.saaj</groupId>
  <artifactId>saaj-impl</artifactId>
  <version>1.3.3</version><!-- or higher -->
</dependency> 
```

添加到弹簧配置：

```
<bean id="messageFactory" class="org.springframework.ws.soap.saaj.SaajSoapMessageFactory">
  <property name="messageFactory">
    <bean class="com.sun.xml.messaging.saaj.soap.ver1_1.SOAPMessageFactory1_1_Impl"/>
  </property>
</bean> 
```

# java - 如果 Gps 数据不可用，应用程序将在 android 中关闭

> ID：12672344
> 
> 赞同：1
> 
> 时间：2012-10-01T11:24:25.443
> 
> 标签：java, android, gps

我已经通过 GPS 或网络获得了链接中引用的代码的位置

[在 Android 上获取用户当前位置的最简单、最可靠的方法是什么？](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a/3145655#3145655)

在我的应用程序中使用了服务和警报管理器。每两分钟启动一次 GPS 监听器并获取位置。如果 GPS 数据不可用，应用程序将关闭并且服务不会每两分钟运行一次。

如果 GPS 数据不可用，我需要，应用程序不会关闭，两分钟后自动启动 GPS 侦听器以获取地理数据。

请给出解决该问题的任何想法。

# twitter - MGTwitter：在 XCode 4.5 中找不到 libxml/xmlreader.h 文件

> ID：12672347
> 
> 赞同：4
> 
> 时间：2012-10-01T11:25:04.060
> 
> 标签：twitter, libxml2, xcode4.5

我刚刚下载了 Xcode 4.5，我似乎无法运行我的应用程序，因为 MGTwitter... 类抱怨 LibXML2 的不包含错误。我已将其导入框架文件夹，并将以下内容放在构建设置的标题位中

$(SDKROOT)/usr/include/libxml2

```
#include <libxml/xmlreader.h> file not found 
```

我的应用程序使用 Xcode 4.3 编译没有问题，但是当我尝试使用 4.5 编译时出现此错误

我也试过这个： $(SDK_DIR)/usr/include/libxml2

这只是一个错误还是我错过了一些明显的东西？

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-08T15:14:56.840

我通过添加解决了这个问题

```
/usr/include/libxml2 
```

在标题搜索路径中。只是它，**没有** `$(SDKROOT)`or `$(SDK_DIR)`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-09T23:25:51.157

通过在路径周围添加双引号，我能够解决我的一个项目中的问题。因为我把 Xcode 4.5 放在了一个有空格的路径中，所以东西坏了。所以我将 $(SDK_DIR)/usr/include/libxml2 更改为 "$(SDK_DIR)/usr/include/libxml2"

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T10:37:41.797

几天前我遇到了同样的问题，我按照以下步骤操作：

*   您只需要添加 libxml2.dylib 框架。
*   并在标题搜索路径中添加**/usr/include/libxml2 。**

它对我有用。

# .net - 奇怪的串口读/写行为

> ID：12672348
> 
> 赞同：1
> 
> 时间：2012-10-01T11:25:04.990
> 
> 标签：.net, serial-port

在我的 .Net 控制台应用程序中，我使用以下方法将少量字节（大约 20 个）写入串行端口，然后读取响应（同样不超过 20 个字节）。它用于与外部硬件设备通信 - 向其发送数据请求并返回请求的值。

我已经删除了多余的代码、端口初始化、变量声明等，但你仍然可以看到它在做什么：-

```
var sw = new Stopwatch();
sw.Start();

// Write the "request" bytes.
_port.Write(buffer, 0, buffer.Length);

Console.WriteLine("After write: {0}", sw.ElapsedMilliseconds);
sw.Restart();

// Wait for response, but timeout after 100ms.
var timeoutCount = 0;
while (_port.BytesToRead == 0 && timeoutCount < 100)
{
    Thread.Sleep(1);
    timeoutCount++;
}

Console.WriteLine("Waited: {0}, #loops: {1}", sw.ElapsedMilliseconds, timeoutCount);

if (_port.BytesToRead == 0)
{
    // Timed-out..
    return null;
}

// Read the response.
var receivedData = new byte[_port.BytesToRead];
_port.Read(receivedData, 0, receivedData.Length);

return receivedData; 
```

我的应用程序以紧密（几乎连续）的循环调用上述代码。你会注意到我添加了几个 Console.WriteLines 来输出一些时间，我看到非常一致的数字，如下所示：-

> ```
> After write: 0
> Waited: 14, #loops: 1
> After write: 0
> Waited: 14, #loops: 1
> After write: 0
> Waited: 14, #loops: 1
> ...and so on... 
> ```

显然，写入发生得非常快，响应也很快到达，因为应用程序只通过`while`循环一次，尽管我对为什么它只执行一次时显示 14ms 感到困惑`Thread.Sleep(1)`。

更奇怪的是，如果我在 PC 上做其他事情，比如打开另一个窗口，运行 Chrome，或者只是移动鼠标，那么我会看到这样的数字：-

> ```
> After write: 0
> Waited: 4, #loops: 5
> After write: 0
> Waited: 2, #loops: 3
> After write: 0
> Waited: 2, #loops: 3
> After write: 0
> Waited: 1, #loops: 2
> After write: 0
> Waited: 3, #loops: 4 
> ```

这更像是我对串行端口代码（例如我的）的期望，而不是我在 PC“空闲”时看到的神秘 14 毫秒。关于发生了什么的任何想法？

这给我带来了一个问题，因为我的应用程序需要每 100 毫秒执行大约 12 次写入/读取。您可以从第二组时间（每组几毫秒）中看到，这很容易实现，但是当 PC 处于“空闲”状态时，每次写入/读取需要 14 毫秒，导致我的应用程序经常丢失数据（在外部更新设备每 100 毫秒）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:58:42.297

看来您有实时要求，但您正在非实时系统（Windows）上开发。Sleep(1) 只是告诉操作系统你的线程在至少 1ms 内不能被重新激活，所以它会消失至少 1ms，当调度程序到达它时它会回来。

您的鼠标移动似乎使其表现更好的原因是因为它导致调度程序被所有鼠标移动事件更频繁地调用。

考虑使用实时操作系统，或者不依赖窗口进行调度，尽管如果您的 _port.write() 阻塞了诸如 WaitForSingleObject 或 Sleep 之类的系统调用，这可能会很困难。你也可以考虑放弃任何实时要求，只要你得到它就从串行端口得到什么。

# php - 如何存储随时间变化的帖子排名？

> ID：12672349
> 
> 赞同：0
> 
> 时间：2012-10-01T03:41:09.710
> 
> 标签：php

我正在尝试学习如何编写像 Reddit.com 这样的网站算法，其中有成千上万的帖子需要排名。他们的排名算法是这样工作的（你不必阅读它，它更像是我的一个普遍问题）：[http ://amix.dk/blog/post/19588](http://amix.dk/blog/post/19588)

现在我有帖子存储在数据库中，我记录了他们的日期，他们每个人都有一个赞成和反对的字段，所以我正在存储他们的记录。我想知道你如何存储他们的排名？当特定帖子具有排名值，但随着时间而变化时，您如何存储它们的排名？

如果它们没有被存储，您是否会在每次用户加载页面时对每个帖子进行排名？

你什么时候存储这些帖子？您是否运行 cron 作业以每 x 分钟自动为每个帖子赋予一个新值？你存储它们的价值吗？这是暂时的。也许，直到该帖子达到其最低分数并被遗忘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:39:16.387

我确实阅读了排名系统的解释，如果我是正确的，他们不关心*当前*时间，而是*提交帖子的时间*。这意味着分数将改变两分；1) 当帖子被提交时，2) 当有人对帖子投赞成票或反对票时

因此，当您发布某些内容以及有人支持或反对投票时，您必须（重新）计算分数。重新计算分数对服务器来说并没有那么重（实际上根本没有），所以只需重新计算投票变化！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:33:36.850

您很可能会使用某种缓存。除了`post_time`,`up_votes`和`down_votes`, 你还有一个`current_rank`, 和`last_ranked`。如果`last_ranked`超过 20 分钟，您将再次对其进行排名，如果没有，则显示缓存的排名。

一种不同的方法是`current_rank`在帖子被赞成或反对时以及定期（每 X 分钟）进行排名并保存排名（即） 最新。

# r - R中的异常处理和堆栈展开

> ID：12672351
> 
> 赞同：5
> 
> 时间：2012-10-01T11:25:07.087
> 
> 标签：r, exception-handling, stack-unwinding

为了为我的同事和我的 R 脚本设置一个连贯的异常处理接口，我想采用以下 tryCatch 结构。

1.  外部 tryCatch 包裹在给定的 R 脚本周围。它用于捕获和处理需要脚本中止的致命错误。
2.  用户脚本中特定于用户的 tryCatch 命令。这些应该捕获并可能处理
    *   2a。非致命错误，不需要脚本中止
    *   2b。需要脚本中止的致命错误。错误由外部 tryCatch 处理 [参见 1.]
    *   2c。带有附加错误信息的致命错误。外部 tryCatch 处理的错误。

以下代码是我将如何实现这些功能。但是，由于我不是 R 方面的专家，我想问一下这是否是一个好方法。具体来说：

Q1。是否可以不在内部 tryCatch 中指定错误处理程序并等待外部 tryCatch 处理该错误（参见上面的 2b. 和下面的代码）？

Q2。在处理程序中重新抛出相同的错误（参见上面/下面的 2c）是否正确/被认为是良好的编码风格？

谢谢！

```
#outer tryCatch, see 1.
tryCatch({
  #user code block
  #2a. user specific tryCatch, object "vec" not defined
  tryCatch(print(vec),error=function(e) {print("Non-fatal error. Script execution continued.");print(e);})

  #2b. user specific tryCatch
  tryCatch(vec*2)

  #2c. user specific tryCatch
  tryCatch(vec*parameter1, error=function(e) {print("Additional fatal error information. Script execution aborted.");stop(e);})
  #end of user code block
},
     #outer tryCatch error handler in order to handle fatal errors
     error=function(e) {print("Fatal error");print(e);} 
    ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T15:51:24.507

只捕获一些错误，将其他错误留给外部处理程序或根本没有处理程序是完全可以的。错误系统比通常使用的要灵活得多，因此要重新抛出错误，您可能会考虑创建自己的错误类型

```
ourError <-
    function(original, message, class="ourError")
{
    msg <- paste(message, conditionMessage(original), sep="\n  ")
    structure(list(message = msg, call = conditionCall(original)),
              class = c(class, class(original)))
} 
```

并投掷和/或处理

```
tryCatch(vec*parameter1, error=function(e) {
    err <- ourError(e, "addition fatal info; script aborted")
    stop(err)
}) 
```

这样做的一个优点是可以在顶级处理程序中指定其他行为，使用返回的类`ourError()`

```
tryCatch({
    tryCatch(stop("oops"), error=function(e) {
        err <- ourError(e, "addition fatal info; script aborted",
                      c("fatal", "ourError"))
        stop(err)
    })
}, ourError=function(err) {
    message("We caught but didn't handle this:\n", err)
}, error =function(err) {
    message("This one got away: ", err)
}) 
```

# c# - WinRt 防止选定项在 null 时绑定

> ID：12672352
> 
> 赞同：1
> 
> 时间：2012-10-01T11:25:14.287
> 
> 标签：c#, windows-runtime

我有一个列表视图，它具有从 SelectedItem 到我的视图模型上的属性（我们称之为人）的绑定。

我想防止绑定在为空时发生。

目前，当我清除 Items 集合时，这会导致选择更改为绑定回 null。

我知道我可以从视图模型中对人员设置器进行空检查，但我不希望这样做。

使用转换器可以实现同样的效果吗？

```
 public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        //Something like this?
        if(value == null) ABORT BINDING SOMEHOW
        else return value;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:30:25.383

如何在 SelectedPerson 的二传手上阻止它。为什么需要防止绑定？

```
public Person SelectedPerson
    {
        get { return _selectedPerson; }
        set
        {
            if (value != null)
            {
                _selectedPerson = value;
            }
        }
    } 
```

# ms-access - MS Access 数据库，用 10% 更新表中的所有价格

> ID：12672353
> 
> 赞同：1
> 
> 时间：2012-10-01T11:25:16.357
> 
> 标签：ms-access, asp-classic

我有一个包含大约 3500 种产品的数据库，这些产品都包含增值税。

我怎么能在每个价格上加 10% 呢？

**例子：**

旧增值税价格：11.90

增值税上调10%。

新增值税价格：13.09

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:28:11.267

```
update prices set price = price * 1.1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:29:34.850

自从我完成 Access 以来已经有一段时间了，但是像这样的查询应该可以解决问题。

```
UPDATE tablename set VAT = VAT * 1.1; 
```

该[网站](http://fontstuff.com/access/acctut02.htm)应该有助于将查询输入 Access 的具体细节。

# solr - solr 搜索中的选择不起作用

> ID：12672363
> 
> 赞同：0
> 
> 时间：2012-10-01T11:26:24.083
> 
> 标签：solr

我已经配置了 solr，这样它就可以索引来自 postgres 数据库的记录。它已成功上传。如果我将查询字符串作为 传递`*:*`，它会产生表中所有行的响应。但是当我指定搜索时，结果始终为 0。

查询字符串时我的 XML 响应`*:*`是：

```
<?xml version="1.0" encoding="UTF-8" ?> 

<response>
  <lst name="responseHeader">
   <int name="status">0</int> 
   <int name="QTime">0</int> 
   <lst name="params">
      <str name="q">*:*</str> 
   </lst>
 </lst>
 <result name="response" numFound="3" start="0">
 <doc>
<str name="names">sample1</str> 
<str name="sno">1</str> 
<str name="values">3</str> 
</doc>
 <doc>
<str name="names">sample2</str> 
<str name="sno">2</str> 
<str name="values">2</str> 
</doc>
<doc>
<str name="names">sample3</str> 
<str name="sno">3</str> 
<str name="values">4</str> 
</doc>
</result>
</response> 
```

我在查询字符串时的响应`q=sample1`是：

```
<?xml version="1.0" encoding="UTF-8" ?> 

<response>
  <lst name="responseHeader">
   <int name="status">0</int> 
   <int name="QTime">0</int> 
   <lst name="params">
      <str name="q">*:*</str> 
   </lst>
 </lst>
 <result name="response" numFound="0" start="0" /> 
</response> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:33:17.167

`q`, 本身将在`defaultSearchField`（在 schema.xml 中）中定义的任何字段中搜索。

如果您要将所有有趣的文本复制到默认字段中，则该搜索将起作用。或者，您可以在查询中传递字段名称。`q=names:sample1`也应该返回结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-11T14:47:09.370

我基于 Solr 6.6.2 中提供的默认示例与 MySql 集成运行了一个测试项目（假设它与您与 postgres 的集成有点相关）。我遇到了这个问题，原来只是字段的命名。

在 DataImportHandler 的配置文件中（在大多数“Solr 索引数据库教程”教程中，它被称为**data-config.xml**），`<field>`元素的名称也必须在**schema.xml**文件中。我使用了 Solr 附带的默认示例中的配置，要查询的字段是**_text_**。

**就是下面data-config.xml**文件中 的这一行：`<field column="name" name="_text_"/>`

**数据配置.xml**

```
<dataConfig>
    <dataSource type="JdbcDataSource" 
        driver="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost:3306/mydb1" 
        user="root" 
        password=""/>
        <document>
            <entity name="product" pk="id"
                query="select id,name from products"
                deltaImportQuery="SELECT id,name from products WHERE id='${dih.delta.id}'"
                deltaQuery="SELECT id FROM products  WHERE updated_at > '${dih.last_index_time}'"
                >
                <field column="id" name="id"/>
                <field column="name" name="_text_"/> 
            </entity>
        </document>
</dataConfig> 
```

**Schema.xml**（必须包含以下条目）：

`<field name="_text_" type="text_general" indexed="true" stored="true"/>`

修复该问题后，诸如**/select?q=foo**之类的查询返回非空结果。

# android - Logback（Android）：SizeBasedTriggeringPolicy 不起作用

> ID：12672367
> 
> 赞同：3
> 
> 时间：2012-10-01T11:26:45.987
> 
> 标签：android, logback

我有一个使用 LogBack 库进行日志记录的 Android 应用程序。我需要在日志文件达到 2MB 时删除它（我不需要旋转它）。

这是我的配置文件：

```
<configuration>
      <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>/mnt/sdcard/app/app.log</file>
        <append>true</append>

        <triggeringPolicy class="com.app.utils.LogbackSizeBasedTriggeringPolicy">
            <maxFileSize>2MB</maxFileSize>
        </triggeringPolicy>

        <encoder>
          <pattern>%d %-4relative [%thread] %-5level %logger{35} - %msg%n</pattern>
        </encoder>
      </appender>

      <root level="DEBUG">
        <appender-ref ref="FILE" />
      </root> 
</configuration> 
```

如您所见，由于 SizeBasedTriggeringPolicy (http://jira.qos.ch/browse/LOGBACK-74) 似乎存在错误，因此我编写了自己的触发代码：

```
package com.app.utils;
import ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy;
import ch.qos.logback.core.util.FileSize;

public class LogbackSizeBasedTriggeringPolicy<E> extends
        SizeBasedTriggeringPolicy<E> {

    @Override
    public boolean isTriggeringEvent(File activeFile, E event) {

        return activeFile.length() >= FileSize.valueOf(getMaxFileSize())
                .getSize();
    }

} 
```

日志记录工作正常 - 但 triggeringPolicy 代码从未被触发，因此日志文件增长超过 2MB（这不是我想要的）。

我是 LogBack 的新手 - 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:44:19.190

您的配置缺少该`<rollingPolicy>`元素，如以下所示`logcat`：

```
...
I/System.out(614): 20:29:27,999 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - 假设默认类型 [ch.qos.logback.classic.encoder.PatternLayoutEncoder] 为 [编码器] 属性
I/System.out(614): 20:29:28,086 |-ch.qos.logback.core.rolling.RollingFileAppender[FILE] 中的错误 - 没有为名为 FILE 的 RollingFileAppender 设置 RollingPolicy
I/System.out(614): 20:29:28,087 |-ch.qos.logback.core.rolling.RollingFileAppender[FILE] 中的错误 - 有关详细信息，请访问 http://logback.qos.ch/codes .htmlrfa_no_rp
...

```

各州的 logback[手册：`RollingFileAppender`](http://logback.qos.ch/manual/appenders.html#RollingFileAppender)

> 要具有任何用途， a`RollingFileAppender`必须**同时具有 a`RollingPolicy`和 a `TriggeringPolicy`set up**。但是，如果它`RollingPolicy`也实现了`TriggeringPolicy`接口，那么只需要显式指定前者。

因此，您可以（1）将一个`<rollingPolicy>`元素添加到您的 appender 配置中，或者（2）同时实现[`RollingPolicy`](http://logback.qos.ch/apidocs/ch/qos/logback/core/rolling/RollingPolicy.html)和[`TriggeringPolicy`](http://logback.qos.ch/apidocs/index.html?ch/qos/logback/core/rolling/RollingPolicy.html)接口，然后将该实现指定为类`<rollingPolicy class='com.example.MyRollingPolicy'>`（在这种情况下，触发策略是不必要的，因为`MyRollingPolicy`它自己会处理它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:57:27.070

我需要的是被截断的日志文件——对滚动不感兴趣。

但是，正如 user46874 所说，TriggerPolicy 必须与`RollingPolicy`. 所以我用我自己的实现扩展`FixedWindowRollingPolicy`并覆盖`rollover()`了它，它只是像这样删除日志文件：

```
package com.app.utils;

import java.io.File;

import ch.qos.logback.core.rolling.FixedWindowRollingPolicy;
import ch.qos.logback.core.rolling.RolloverFailure;

public class LogbackRollingPolicy extends FixedWindowRollingPolicy{

    @Override
    public void rollover() throws RolloverFailure {             
        File file = new File(getActiveFileName());      
        file.delete();      
    }

} 
```

我的配置看起来像：

```
<rollingPolicy class="com.app.utils.LogbackRollingPolicy">
</rollingPolicy> 
```

不确定这是否是“正确”的方法，但它工作正常。

我已接受 user46874 的回答，因为它为我指明了正确的方向，并为可能遇到相同问题的任何人添加了此答案。

# php - PHP Eclipse pass arguments as script

> ID：12672368
> 
> 赞同：0
> 
> 时间：2012-10-01T11:26:52.883
> 
> 标签：php, eclipse, xdebug

I'm trying to debug `some_script.php` and want to pass `--some-parameter` in php script arguments tab. My script is started regularly, but I do not see `--some-parameter` in `$argv[1]`, which should be initialized. My xdebug configuration for cli scripts include only one line:

```
zend_extension="/usr/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so" 
```

This is on Mac OS.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:38:20.680

我将 php.ini 设置如下：

```
[xdebug]
zend_extension="/usr/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so"
xdebug.remote_enable = on
xdebug.remote_handler="dbgp"
;xdebug.remote_mode="req"
xdebug.remote_port=9000
xdebug.remote_host="127.0.0.1"
;xdebug.remote_log=/var/log/xdebug_remote_log
;xdebug.remote_autostart=1
xdebug.profiler_enable_trigger=on
xdebug.profiler_output_dir=/tmp
xdebug.profiler_output_name=cachegrind.out.%s.%t
;xdebug.collect_return=on
;xdebug.collect_vars=on
;xdebug.auto_trace=0 
```

然后我重新启动了eclipse，现在正在工作。

# git - 使用低质量的提交日志清理 git 分支

> ID：12672370
> 
> 赞同：2
> 
> 时间：2012-10-01T11:26:56.860
> 
> 标签：git, branch, git-branch

与其询问特定的 git 动词（git 文档所基于的），我想问一下这个特定任务的最佳方法是什么。

由于被迫提交测试应用程序，我有一个带有丑陋提交日志的 git 分支。很多提交，例如：

*   修正错字
*   为 Foo 团队做 X
*   重命名后进行更多清理
*   Undo X now Foo 团队改变了主意

幸运的是，所有这些提交都在一个分支中。

在合并该分支之前，我希望有机会清理提交日志，合并和重新排序提交。最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T11:32:39.170

您需要的是[交互式变基](http://git-scm.com/book/en/Git-Tools-Rewriting-History)：

```
git rebase -i master 
```

您可以通过此命令编辑消息、重新排序提交、压缩或跳过其中的一些。

# c++ - boost transform iterator and c++11 lambda

> ID：12672372
> 
> 赞同：12
> 
> 时间：2012-10-01T11:27:13.480
> 
> 标签：c++, boost, c++11, boost-range

I'm trying to use boost::adaptors::transformed by providing a c++0x lambda to the adaptor.

The following code does not compile. I'm using g++ 4.6.2 with boost 1.48.

```
#include <iostream>
#include <vector>

#include <boost/range/adaptors.hpp>
#include <boost/range/algorithm.hpp>

using namespace std;
namespace br    = boost::range;
namespace badpt = boost::adaptors;

int main()
{  
  vector<int> a = {0,3,1,};
  vector<int> b = {100,200,300,400};

  auto my_ftor = [&b](int r)->int{return b[r];};

  cout<<*br::max_element(a|badpt::transformed(my_ftor))<<endl;
} 
```

Any ideas on what I'm doing wrong here?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T11:47:56.323

这是众所周知的问题。看这里

[http://boost.2283326.n4.nabble.com/range-cannot-use-lambda-predicate-in-adaptor-with-certain-algorithms-td3560157.html](http://boost.2283326.n4.nabble.com/range-cannot-use-lambda-predicate-in-adaptor-with-certain-algorithms-td3560157.html)

很快，你应该使用这个宏

```
#define BOOST_RESULT_OF_USE_DECLTYPE 
```

用于`decltype`代替`boost::result_of`.

[从这里](http://www.boost.org/doc/libs/1_51_0/libs/utility/utility.htm)引用

> 如果您的编译器支持 decltype，那么您可以通过定义宏 BOOST_RESULT_OF_USE_DECLTYPE 来启用自动结果类型推导，如下例所示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T15:22:26.767

好吧 lambdas 不能很好地发挥作用，因为它们不是默认可构造的，这对于迭代器来说是必需的。这是我用于 lambda 的包装器：

```
#define RETURNS(...) -> decltype(__VA_ARGS__) { return (__VA_ARGS__); }

template<class Fun>
struct function_object
{
    boost::optional<Fun> f;

    function_object()
    {}
    function_object(Fun f): f(f)
    {}

    function_object(const function_object & rhs) : f(rhs.f)
    {}

    // Assignment operator is just a copy construction, which does not provide
    // the strong exception guarantee.
    function_object& operator=(const function_object& rhs)
    {
        if (this != &rhs)
        {
            this->~function_object();
            new (this) function_object(rhs);
        }
        return *this;
    }

    template<class F>
    struct result
    {};

    template<class F, class T>
    struct result<F(T)>
    {
        typedef decltype(std::declval<Fun>()(std::declval<T>())) type;
    };

    template<class T>
    auto operator()(T && x) const RETURNS((*f)(std::forward<T>(x)))

    template<class T>
    auto operator()(T && x) RETURNS((*f)(std::forward<T>(x)))
};

template<class F>
function_object<F> make_function_object(F f)
{
    return function_object<F>(f);
} 
```

然后你可以这样做：

```
int main()
{  
  vector<int> a = {0,3,1,};
  vector<int> b = {100,200,300,400};

  cout<<*br::max_element(a|badpt::transformed(make_function_object([&b](int r)->int{return b[r];};)))<<endl;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-10T08:45:44.940

@ForEver 的答案 ( `#define BOOST_RESULT_OF_USE_DECLTYPE`) 对我不起作用。@Paul 的回答太长（而且太笼统）。更具体的解决方案可以是：

```
#include <iostream>
#include <vector>

#include <boost/range/adaptors.hpp>
#include <boost/range/algorithm.hpp>

using namespace std;
namespace br    = boost::range;
namespace badpt = boost::adaptors;

int main()
{  
  vector<int> a = {0,3,1,};
  vector<int> b = {100,200,300,400};

  struct{
     vector<int>* bP;                               //pointer, just to imitate lambda syntax...
     int operator()(int r) const{return (*bP)[r];}  //was my_ftor = [&b](int r)->int{return b[r];};
  } my_ftor{&b};                                    //...here

  cout<<*br::max_element(a|badpt::transformed(my_ftor))<<endl;
} 
```

（现在是 2016 年，Boost 1.58，这仍然是坏的。至少没有捕获的 lambda 应该满足的要求`boost::transformed`。）

如果 lambda 没有捕获（不是您的情况），则代码会更简单一些，或者您可以使用：

```
...
int(*my_ftor)(int) = [](int r)->int{return ...;}; // function pointer default constructible and callable
cout<<*br::max_element(a|badpt::transformed(my_ftor))<<endl;
... 
```

# php - 如何在 Symfony2 中增加登录会话到期时间？

> ID：12672373
> 
> 赞同：2
> 
> 时间：2012-10-01T11:27:19.110
> 
> 标签：php, symfony

我正在使用 Symfony2 Security 作为管理面板。会话到期时间非常短；每次我必须登录才能访问管理部分。那么如何实现记住我的功能，以便管理员登录后，他将永远登录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:45:58.903

阅读[*记住我*](http://symfony.com/doc/current/cookbook/security/remember_me.html)的食谱条目。设置`lifetime`大的东西并强制`remember me`：

```
remember_me:
    lifetime: 31536000 # a year
    always_remember_me: true 
```

# office-interop - How to bypass PowerPoint 2007 PresendationBeforeSave

> ID：12672375
> 
> 赞同：0
> 
> 时间：2012-10-01T11:27:30.450
> 
> 标签：office-interop, powerpoint-2007

I'm having some problems with bypassing the Application_PresentationBeforeSave event in MS Office PowerPoint 2007

void Application_PresentationBeforeSave(Microsoft.Office.Interop.PowerPoint.Presentation Pres, ref bool Cancel)

In this event, I need to update a webservice, with the byte[] content of the file. But at this point in time, the file is not saved. There is no event called PresentationAfterSave fx that is called.

I need some way of calling the event again, after it is saved. Some people are saying that I need to make a Thread, due the save and then the update or the otherway around. This is by far the worst solution (but properly the only one), is there a better solution ?

// dennis

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:58:12.860

我认为您正在寻找的是 PresentationSave 而不是 PresentationBeforeSave 事件。

# javascript - oop: on click event

> ID：12672378
> 
> 赞同：1
> 
> 时间：2012-10-01T11:27:45.073
> 
> 标签：javascript, jquery, oop, jquery-events

Is it possible to define a on click event inside an object (oop)? I'm new to this. I have been trying the following: (I simplified the code (no CSS of div etc))

```
function menu_item(menu_name){
    this.menu_name=menu_name;

    this.create = function(){
        $('body').html("<div id=" + menu_name + " />");
    };  

    $('#' + menu_name).on('click',function(){
        alert (menu_name);
    });
}

menu_item("test");
menu_item.create(); 
```

Now when I click on the div with id of the given menu_name, I want to alert the name (as a test) but this isn't working... is this even possible?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:33:58.847

对的，这是可能的。但是，我在您的代码中看不到任何 OOP 构造函数 - 您将其称为函数。

您的问题似乎是当您尝试添加事件侦听器时没有具有该 id 的元素，或者对您的`create`方法的调用会覆盖它。

用这个：

```
function MenuItem(name){
    this.menu_name = name;

    this.create = function() {
        var el = $("<div id=" + menu_name + " />");
        el.on('click',function(){
            alert (menu_name);
        });
        $('body').append(el);
    };
}

var menu = new MenuItem("test");
menu.create(); 
```

# jquery - Change what jqPlots tooltip displays

> ID：12672379
> 
> 赞同：0
> 
> 时间：2012-10-01T11:27:46.290
> 
> 标签：jquery, jqplot

Is there a way to change the text at each point of a jqPlot graph. So instead of each point displaying its normal value, can it be changed to something else. Each point on my graph represents different data. For example I want to display the amount of students that took tests over the year broken down by month. But instead of the tool tip saying the amount I want it to show the average test result.

Is it possible to change the tooltips text?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:50:30.623

首先，这不是您问题的确切解决方案，但它可以用作可能的解决方法。

`pointLabels` [我使用插件](http://www.jqplot.com/docs/files/plugins/jqplot-pointLabels-js.html)在 jqplot 上取得了类似的结果。

这是你可以做的，

pointLabels 插件显示用于绘制图表的数据数组的内容。但是有一个选项可以提到应该使用数据数组的哪个索引来显示点标签。

```
pointLabels: {
    show: true,
    seriesLabelIndex: 2
} 
```

因此，您可以做的是对于数据数组中的每个点，您可以包含您希望在图表中显示的任何详细信息。

但请记住，这**不会显示为 tooltip**，而是显示为点标签。

我创建了一个小例子让你理解这一点。

[http://jsfiddle.net/GayashanNA/q9mH8/](http://jsfiddle.net/GayashanNA/q9mH8/)

我还创建了一篇博客文章，描述了我在项目中所做的事情，如果您认为此解决方案可以帮助您，请在此处阅读以获取更多信息。

[http://gayashan-a.blogspot.de/2012/10/tracking-mouse-position-on-your_2.html](http://gayashan-a.blogspot.de/2012/10/tracking-mouse-position-on-your_2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:54:34.453

我找到了您提出的确切问题的解决方案。实际上有一种显示自定义工具提示的方法，但在任何地方都没有很好的记录。

这是你如何做到的。首先，您必须包含[荧光笔插件](http://www.jqplot.com/docs/files/plugins/jqplot-highlighter-js.html)。然后在绘图选项中设置与此类似的荧光笔选项。

```
highlighter: {
    show: true,
    tooltipContentEditor: tooltipContentEditor
} 
```

这`tooltipContentEditor`是一个外部函数，可用于输出自定义 HTML 作为工具提示。

然后，您可以从此函数返回计算的平均值或其他所需值。

```
function tooltipContentEditor(str, series_index, point_index, plot) {
    len = plot.data[series_index].length;
    total = 0;
    for (i = 0 ; i < len; i++) {
        total += parseFloat(plot.data[series_index][i][1]);
    }
    return "average:"+total/len;
} 
```

您可以使用随函数传递的参数访问所有数据。

在这里看看我的[jsFiddle](http://jsfiddle.net/GayashanNA/YvbbP/)。

# c# - Fluent NHibernate - one to at most one (1 – 0..1) Relationship

> ID：12672389
> 
> 赞同：2
> 
> 时间：2012-10-01T11:28:41.217
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

Im just trying to work out if its possible to map a 1 - 0..1 (one to at most one \ one to zero or one) relationship using fluent NHibernate without the use of a Private Collection. An example of the class structure is below:

```
 public class ClassA
    {
        public int ClassAId { get; set; }

        public string SomeDetails { get; set; }

        public ClassB ClassB { get; set; }

    }

    public class ClassB
    {
        public ClassA ClassA { get; set; }

        public int ClassBId { get; set; }

        public string SomeChildDetails { get; set; }
    } 
```

In this example, ClassA can have a ClassB, or ClassB can be null.

The DB structure would look something like:

```
 ClassA Table
   -------------
   int ClassA_ID  PK
   string SomeDetails

   ClassB Table
   ------------
   int ClassA_Id   PK  FK
   string SomeChildDetails 
```

In this situation, you cannot use HasOne(x => x.ClassB).Cascade.All(); as this assumes it must always have one.

Is there a way to do this without having a one to many relationship with a private IList on ClassA and having the getter of the ClassB property getting the first entry in the list.

Ta

R

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:45:23.423

除了将映射上的所有属性标记为 之外`virtual`，`References`还应该这样做：

```
References(x => x.ClassB).Nullable().Cascade.All(); 
```

Fluent NHibernate 的文档说它相当于多对一关系，但也适用于单个属性，最终是 1-0..1 关系。您可以尝试使用`HasOne`with`Nullable()`修饰符，但它在文档中说您*通常*应该使用它`References`。

**[编辑评论]：**

据我所知，NHibernate 的默认外键命名策略是`keyname_id`，您可以通过实现自己的方式来更改它`ForeignKeyConvention`（这个适用于所有映射）。假设您的外键策略是 TableNameID，即“ClassBID”：

```
internal class MyFkeyConvention : ForeignKeyConvention
{
    protected override string GetKeyName(FluentNHibernate.Member property, Type type)
    {
        if(property != null)
            return property.Name + "ID";
        return type.Name + "ID";
    }
} 
```

或者如果您只在一个地方需要它，就使用它：

```
References(x => x.ClassB).Column("YourForeignKeyColumnName").Nullable().Cascade.All(); 
```

# java - 从其他项目链接java源？

> ID：12672392
> 
> 赞同：5
> 
> 时间：2012-10-01T11:28:45.037
> 
> 标签：java, eclipse

我在我的一个主应用程序和另一个项目中使用相同的 java 类。此类仍在开发中，因此我无法始终将其编译为 jar 并将其添加为库。

我如何将另一个项目中的这个 *.java 类链接到它被使用的地方，就好像它直接属于那个项目一样？

我试图去项目属性> java构建路径>链接源。我可以参考另一个项目的源文件夹。很好，但总是 eclipse 抱怨错误的包路径。奇怪的是，新项目中的共享 java 类被放置在下面，`(default package)`而我希望它只显示与主项目中相同的路径。并且 Eclipse 声称要删除包路径。如果我这样做，当然，主项目会抱怨那里缺少路径。

我究竟做错了什么？我怎样才能同步这个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T11:32:24.863

假设这两个项目在同一个工作区中，请转到要引用 java 类的项目的属性并执行以下操作：

```
Project Properties => Java Build Path => Projects => Add => Check the box against the project that contains the Java file. 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-28T09:15:53.487

我的答案有点晚了，但它可能对某人有帮助：

在 Eclipse 中：
1)**右键单击**​​目标文件夹 ->**新建**->**文件**
2) 单击“**高级>>** ”并设置“**链接到文件系统中的文件**”
3) 浏览，选择源文件并单击“**完成**”
这个给你！

尽管如此，如果您只是在工作区中共享来自邻居项目的源文件，您可以像导入任何其他类一样**简单地导入它们：**

```
import other.project.class; 
```

后者适用于我，如果它不适合你 - 我可能会寻找设置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-14T21:04:38.850

我遇到了同样的问题，我只是将包重命名为与其他项目包相同。

*   右键单击 src 文件夹 -> 新建 -> 文件夹
*   单击高级并选中“链接到备用位置（链接文件夹）”
*   浏览，选择要链接的文件夹

请注意，您正在创建的文件夹和要链接的文件夹必须命名相同（或至少这是我能找到的唯一方法）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T11:47:17.297

可以使用其他项目的替代解决方案

**在 Eclipse 中，将项目导出到 jar 中，并将 jar 作为库导入到任何其他项目中，它应该可以正常工作。**

如果错了请纠正我

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-29T16:15:23.693

我也有同样的问题，当我将来自其他项目的源作为链接源包含在特定文件夹中时，它会混淆包名称，因为我没有将它链接到根文件夹 /src 但可以说 /src/com

我唯一的解决方案是创建一个文件夹（无需创建项目），并将您的库放在那里，然后从那里链接源（因此包不必遵循 /src 文件夹的规则）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-07T14:31:52.150

使用 import 语句导入最适合我；否则你会遇到上面提到的包文件夹层次结构/包命名问题。导入时，不要在包路径中使用项目名称。例如，如果您有一个名为“WorldPeace”的 Eclipse 项目，其中包含一个名为 toolsof.loveliness 的包，并且您想在另一个名为“FamilyCounseling”的项目中使用包 toolsof.loveliness，请尝试在您的类中使用以下导入语句：

```
import toolsof.loveliness.*; 
```

不考虑 toolsof.loveliness 在另一个项目中的事实。

# c# - HttpGet 中用于发送数据的查询字符串的替代方案？

> ID：12672405
> 
> 赞同：1
> 
> 时间：2012-10-01T11:29:48.530
> 
> 标签：c#, xml, rest, query-string, asp.net-web-api

我正在开发一个 REST API，目前客户端在 QueryString 中发送数据。对于一种方法，客户端需要发送相对较大的数据（XML 内容）。由于查询字符串大小限制，我正在寻找替代方案。

除了查询字符串之外，还有哪些方法可以在 HttpGet 请求中发送数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:04:14.750

即使您对使用正确，`@GET`您也面临着实现的[实际限制（第 5.2 节）](http://www.w3.org/2001/tag/doc/whenToUseGet.html)。`@POST`如果您的 queryString 相当大，您将不得不使用您的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:33:38.753

使用 URL 中的查询字符串传递数据适用于该`GET`方法。您可以使用`PUT`或`POST`。这样您就可以将数据粘贴到请求对象中（只需将查询字符串而不是 URL 放入请求中）。

# matlab - MATLAB中的广义特征向量？

> ID：12672408
> 
> 赞同：6
> 
> 时间：2012-10-01T11:29:57.237
> 
> 标签：matlab

在具有单个或至少很少的命令的特征值的高度多重性的情况下，有没有办法获得广义特征向量？在我可以使用的每个特征值的多重性 1 的情况下`[V,D] = eig(A)`，但此命令不适用于多个特征值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T14:29:04.497

根据 Matlab 文档，[V,D] = eig(A,B) 产生一个广义特征值的对角矩阵 D 和一个完整矩阵 V，其列是相应的特征向量，因此 A*V = B*V*D

这是一个如何自己做的例子......首先我们输入一个样本矩阵A：

```
 A = [ 35  -12   4   30 ;
       22   -8   3   19 ;
      -10    3   0   -9 ;
      -27    9  -3  -23 ]; 
```

然后我们探索它的特征多项式、特征值和特征向量。

```
 poly(A) 
 ans = 
     1.0000   -4.0000    6.0000   -4.0000    1.0000 
```

这些是特征多项式的系数，因此是 (λ − 1)^4 然后

```
 [V, D] = eigensys(A) 
 V = 
 [ 1, 0] 
 [ 0, 1] 
 [-1, 3] 
 [-1, 0] 

 D = 
 [1] 
 [1] 
 [1] 
 [1] 
```

因此 MATLAB 只找到两个独立的特征向量

```
 w1 = [1  0  -1  -1]';     
 w2 = [0  1   3   0]'; 
```

与单一多重性 4 特征值 λ=1 相关联，因此具有缺陷 2。
因此我们建立了 4x4 单位矩阵和矩阵 B=A-λI

```
 Id = eye(4);        
  B = A - L*Id; 
```

当 L=1 时，当我们计算 B^2 和 B^3

```
 B2 = B*B      
  B3 = B2*B 
```

我们发现 B2 ≠ 0，但 B3 = 0，所以应该有一个长度为 3 的链与
特征值 λ = 1 相关联。选择第一个广义特征向量

```
 u1 = [1  0  0  0]'; 
```

我们计算进一步的广义特征向量

```
 u2 = B*u1 
 u2 = 
     34 
     22 
    -10 
    -27 
```

和

```
 u3 = B*u2 
 u3 = 
     42 
      7 
    -21 
    -42 
```

因此，我们根据（普通）特征向量 u3 找到了长度为 3 的链 {u3, u2, u1}。（要将此结果与 MATLAB 的 eigensys 计算相协调，您可以检查 u3-42w1=7w2）

# c - 如何在c中创建临时文件

> ID：12672421
> 
> 赞同：-3
> 
> 时间：2012-10-01T11:30:53.213
> 
> 标签：c

我有一个双数组，我需要将它存储在我的源代码创建的文件中。我知道它与 fget 有关，但我不确定如何准确使用它。例子

```
weight[j][i]=lineweight(line1,line2);
FILE file=weight[j][i]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:34:59.580

例如，谷歌搜索“c 临时文件”会为您提供[此页面](http://www.gnu.org/software/libc/manual/html_node/Temporary-Files.html)，其中包含函数列表。试试`tmpfile()`。

但您可能想保存到某个文件。用于`fopen`此，然后`fwrite`或`fprintf()`将数据写入其中。

# android - 如何在 Adob e AIR 和 Flash Professional 上多屏显示 Android 平板电脑应用程序

> ID：12672423
> 
> 赞同：3
> 
> 时间：2012-10-01T11:30:56.423
> 
> 标签：android, flash, air, adobe, multiscreen

我已经在 ipad 中使用 Adob​​e AIR 完成了应用程序，这在 ipad 中运行良好，

但现在我必须为这样的多屏分辨率创建 android 平板电脑应用程序，

2560*1600、1366*768、1280*800、1280*768、1024*768、1024*600、960*640、960*540、854*480、800*600、800*480、800*400

而我当前的 .fla 文件分辨率是 1024*768 那么如何创建具有多屏幕的 android 平板电脑应用程序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:03:46.187

我认为简而言之有两种方法：

一种是检测屏幕分辨率，然后根据它缩放所有矢量内容并使用代码转换为位图。查看 Adob​​e 的好文章：http: [//www.adobe.com/devnet/air/articles/multiple-screen-sizes.html](http://www.adobe.com/devnet/air/articles/multiple-screen-sizes.html)

第二种方法为每种不同的分辨率准备预先创建的位图并相应地使用它们。

# css - CSS：最大宽度不会缩小？

> ID：12672428
> 
> 赞同：16
> 
> 时间：2012-10-01T11:31:14.397
> 
> 标签：css, text, size, width, shrink

> **可能重复：**
> [使 CSS Div 宽度等于内容](https://stackoverflow.com/questions/450903/make-css-div-width-equal-to-contents)

我正在尝试像应用程序一样进行聊天，但现在我遇到了某种小错误。

我有一个最大宽度设置为 350 像素的 div。但是当我将以下文本放入其中时：

dddddddddddd dddddddddddd dddddddddd dddddddddd

它将在每个空间添加新行，但 div 的宽度将保持在 100px。我在这里在 jsFiddle 中做了一个小例子：

[http://jsfiddle.net/5t2hm/12/](http://jsfiddle.net/5t2hm/12/)

如您所见，黄色框的宽度是 100 像素，而我希望它缩小到文本的宽度。我也尝试使用元素来修复它，但黄色框保持不变。

基本上，我希望它看起来像第三个框，同时保留最大宽度部分。

有人知道黄色框如何缩小到文本的宽度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:10:45.657

检查这个[**fiddle1**](http://jsfiddle.net/venkateshwar/5t2hm/14/)或[**fiddle2**](http://jsfiddle.net/venkateshwar/5t2hm/15/)。

而不是使用一个`div`使用两个`div`（或）
一个`div`和一个`span`。我想这就是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:01:02.780

使用对

```
<p></P> 
```

演示：[小提琴](http://jsfiddle.net/5t2hm/11/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:09:40.170

DIV 的默认宽度是 100%，所以 max-width 只是在你的小提琴中限制它 - 它不会考虑内容的宽度。

要将您的 DIV 缩小到您需要的内容`display: inline-block;`或`float:left; width:auto;`.

[http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)

# android - 如何在 android 的地图上添加动画图钉？

> ID：12672429
> 
> 赞同：1
> 
> 时间：2012-10-01T11:31:17.620
> 
> 标签：android, android-mapview, android-animation

我只是不能在地图上添加动画图钉。如需澄清，请参阅（地图应用程序、Glypse 应用程序）之类的应用程序，我添加了一个快照

![在此处输入图像描述](../Images/41e845fe99b8fc676e246e493be1b58a.png)

见带圆圈的箭头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:02:50.033

最后我得到了解决方案..我在这里使用了动画，这可能对某人有所帮助

这是我的 fadein.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

<alpha
    android:duration="900"
    android:fromAlpha="0.2"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:repeatCount="infinite"
    android:toAlpha="1.0" />

</set> 
```

我将其应用于图像（pin）并从这样的java文件调用动画..

```
 imgv.setImageResource(R.drawable.pinred);

        Animation myanim = AnimationUtils.loadAnimation(DealsActivity.this,
                R.anim.fadein);
        imgv.startAnimation(myanim);

MapView.LayoutParams lp = new MapView.LayoutParams(
                MapView.LayoutParams.WRAP_CONTENT,
                MapView.LayoutParams.WRAP_CONTENT, Currentgp,
                MapView.LayoutParams.BOTTOM_CENTER);

        mv.addView(imgv, lp); 
```

其中.. imgv 是 ImageView 的对象， mv 是 Mapview 的对象

# amazon-web-services - AWS 安全组 - EC2 到 RDS

> ID：12672431
> 
> 赞同：10
> 
> 时间：2012-10-01T11:31:21.353
> 
> 标签：amazon-web-services

我想询问有关在 AWS 中将 EC2 连接到 RDP 的问题。

我已将我的 EC2 安全组（包含 EC2 实例）添加到默认 RDP 组中，并且数据正在流动 - 连接正常。

EC2 安全组启用了到 0.0.0.0/0 的端口 80 和到我的 IP 的 SSH。

我有点担心，通过将此 EC2 组添加到 RDS 数据库，它将允许来自任何地方的端口 80 流量访问数据库。这是正确的还是错误的？

如果您像这样连接它们，EC2 中的规则是否适用于 RDS 实例？

我确实在 AWS 网站上读到“数据库安全组只允许访问数据库服务器端口”。谁能确认这是正确的？

谢谢你

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T15:46:15.777

您无需担心会在 RDS 服务器上打开额外的端口。

在 RDS 数据库安全策略中使用时，EC2 安全组被视为访问控制列表。

基本上，您要说的是，您想让属于特定 EC2 安全组的任何实例都可以使用该数据库安全组策略访问 RDS 实例。

EC2 安全组中定义的特定规则无关紧要。

这种行为基本上只是为您提供了一种方便的方法，可以轻松地允许从具有一些共同关联（它们的安全组）的服务器集群进行访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:48:29.957

对此也有兴趣了解更多。在实践中，我从未注意到“其他流量”进入 RDS 实例。始终假定它只是允许通过 RDS 实例的数据库端口。在我看来，允许其他流量通过似乎有点奇怪。

总的来说，我认为它只是允许通过的原始安全组 - 它不会从您允许的安全组继承规则。

我认为这与添加来自另一个安全组的入口相同，因为它允许来自该安全组的流量通过，但不允许恰好与安全组中的一条规则匹配的流量。（与在启动时为实例分配安全组不同，所有匹配的流量都将被允许：而不是源自启动时分配的所述安全组的流量）。

## 例子：

*   SG：
    *   WEB：允许端口 80
    *   DB：允许 DB PORT
    *   HQ_ACCESS：允许端口 22 和 80
    *   SOME_OTHER_GROUP：允许端口 443
*   实例
    *   InstanceA 有安全组：WEB、DB、HQ_ACCESS
    *   InstanceB 有安全组：SOME_OTHER_GROUP
*   RDS
    *   RDS 实例允许来自 DB SG 的任何流量，这将允许 RDS 与 InstanceA 但不允许与 InstanceB 通信，并且不允许任何其他流量。如果出于某种原因您将安全组 WEB 或 HQ_ACCESS 添加到 RDS 实例，它将不允许端口 80 或 22 流量通过，但会允许 InstanceA 本身通过适当的 DB 端口与其通信。

注意：安全组很容易混淆，所以我希望这会有所帮助

# blackberry - 我们能否制作一个在黑莓 10 设备和 playbook 上运行的通用黑莓应用程序？

> ID：12672433
> 
> 赞同：1
> 
> 时间：2012-10-01T11:31:26.043
> 
> 标签：blackberry, blackberry-webworks, blackberry-playbook

> **可能重复：**
> [为黑莓 10 开发应用程序并在 webworks 中玩书，我应该下载哪个 sdk？](https://stackoverflow.com/questions/12670636/develop-an-application-for-blackberry-10-and-play-book-in-webworks-which-sdk-i-s)

我想制作一个可以在黑莓设备和黑莓剧本上运行的黑莓应用程序。我们可以为一些在黑莓 10 设备和 playbook 上运行的通用黑莓应用程序编写单个代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:25:57.000

如果我们谈论的是 HTML5 应用程序...

当您使用 WebWorks Tablet SDK 打包 HTML5 应用程序时，它实际上将该应用程序转换为 AIR 应用程序；这些将在 BlackBerry PlayBook 和 BlackBerry 10 上运行。

当您使用 BB10 WebWorks SDK 打包 HTML5 应用程序时，该应用程序仍然是 HTML5 应用程序。BB10 打包的 HTML5 应用程序只能在 BB10 平台上运行。

话虽如此，黑莓 PlayBooks 将在未来升级到黑莓 10。

编辑：正如其他人所指出的，您必须确保您仅使用基于您打包的 SDK（平板电脑或 BB10）支持的 API。

# android - Android中的自定义标签栏

> ID：12672434
> 
> 赞同：4
> 
> 时间：2012-10-01T11:31:31.933
> 
> 标签：android, android-layout, user-interface, tabs, uinavigationbar

如何在不使用图像的 android 中创建自定义标签栏？我需要创建一个类似这样的标签栏...

![在此处输入图像描述](../Images/a736a52a6a488e9244ec47707b1a2934.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T05:52:10.640

我在stackoverflow本身找到了我的问题的答案

请参阅 Hardik Gajjar 在以下问题中所做的回答：

[如何在android中创建中心凸起的标签栏？](https://stackoverflow.com/questions/10764046/how-to-create-center-raised-tabbar-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:38:10.977

您可以将视图关联到您的选项卡：

```
tabHost.newTabSpec("name").setIndicator(R.id.your_view) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:51:55.460

您必须为每个选项卡按钮创建自定义视图，并为相机选项卡返回不同的视图。我认为是这样的：

```
private void fillTabHost() {

    setupTab(ONE, new Intent().setClass(this, Activity.class), "title",R.drawable.icon);
    setupTab(TWO, new Intent().setClass(this, Activity.class), "title", R.drawable.icon);
    setupTab(THREE, new Intent().setClass(this, Activity.class), "title",R.drawable.icon);
    setupTab(FOUR, new Intent().setClass(this, Activity.class), "title",R.drawable.icon);
    setupTab(FIVE, new Intent().setClass(this, Activity.class), "title",R.drawable.icon);
}

private void setupTab(final String tag, Intent intent, int label, int icon) {
    View tabview = createTabView(tag, mContext, label, icon);
    TabSpec setContent = mTabHost.newTabSpec(tag).setIndicator(tabview).setContent(intent);
    mTabHost.addTab(setContent);
}

private static View createTabView(String tag, final Context context, final int text, final int icon) {
    if(tag.equals("THREE")){
        // TODO return your CAMERA view
    }else{
        View view = LayoutInflater.from(context).inflate(R.layout.tabs_bg, null);
        ImageView iv = (ImageView) view.findViewById(R.id.tabsIcon);
        iv.setBackgroundResource(icon);
        TextView tv = (TextView) view.findViewById(R.id.tabsText);
        tv.setText(text);
    }
    return view;
} 
```

我希望这可以帮助你！

# android - 强制停止后启动服务

> ID：12672438
> 
> 赞同：13
> 
> 时间：2012-10-01T11:31:50.400
> 
> 标签：android

**用户使用设置 -> 应用程序 -> 管理应用程序 -> 我们的应用程序 -> 强制停止**手动停止应用程序后，有什么方法可以启动服务。

 **我想在强制关闭后重新启动我的应用程序。

有没有办法做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-20T13:05:26.287

您不能通过启动两个服务来做到这一点，因为强制停止将关闭与您强制停止的特定应用程序相关的所有服务。所以当用户再次打开应用程序时启动服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:36:57.560

不，如果强制停止，服务无法自动重新启动。

如需更多帮助，您可以阅读本文：

[http://www.androidguys.com/2009/09/09/diamonds-are-forever-services-are-not/](http://www.androidguys.com/2009/09/09/diamonds-are-forever-services-are-not/)**

# java - 使用 MySQL 进行 Java Web 编程

> ID：12672441
> 
> 赞同：-1
> 
> 时间：2012-10-01T11:31:57.623
> 
> 标签：java, mysql, servlets

大家好，我正在尝试为我的 java 网站创建一个注册 servlet，但我收到了这个错误，我不明白，因为第 1 行没有任何内容。

`Error.com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '',)' at line 1`

这是我的 servlet 代码

```
import java.io.IOException;

import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class CreateTutor
 */
@WebServlet("/CreateTutor")
public class CreateTutor extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public CreateTutor() {
        super();
        // TODO Auto-generated constructor stub
    }

    private String uniid = ""; 
    private String name = ""; 
    private String password = ""; 
    private String email = ""; 
    private int access_level = 3;

    public void init() {
      try {
          Class.forName("com.mysql.jdbc.Driver");
          Connection con =
            DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
        System.out.println("JDBC driver loaded"); 
      } 
      catch (ClassNotFoundException e) {
        System.out.println(e.toString()); 
      } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    } 

    /**Process the HTTP Get request*/ 
    public void doGet(HttpServletRequest request, HttpServletResponse response) throws 
  ServletException,IOException {  
      sendPageHeader(response); 
      sendRegistrationForm(request, response, false); 
      sendPageFooter(response); 
    } 

    /**Process the HTTP Post request*/ 
    public void doPost(HttpServletRequest request, 
      HttpServletResponse response) 
      throws ServletException, IOException {
      sendPageHeader(response); 

      uniid = request.getParameter("uniid"); 
      name = request.getParameter("name"); 
      password = request.getParameter("password"); 
      email = request.getParameter("email");

      boolean error = false; 
      String message = null; 
      try {
          Class.forName("com.mysql.jdbc.Driver");
          Connection con = 
            DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
        System.out.println("got connection"); 

        Statement s = con.createStatement(); 

        String sql = "SELECT name FROM user" + 
          " WHERE name='" + name + "'"; 
        ResultSet rs = s.executeQuery(sql); 
        if (rs.next()) {
          rs.close(); 
          message = "The user name <B>" + name + 
            "</B> has been taken. Please select another name."; 
          error = true; 
        } 
        else {
          rs.close(); 
          sql = "INSERT INTO user" + 
            " (uniid, name, password, email, access_level)" + 
            " VALUES" + 
            " ('" +  uniid + "'," + 
            " '" +  name + "'," + 
            " '" +  password + "'," + 
            " '" + email + "'," + access_level + "',)"; 
          int i = s.executeUpdate(sql); 
          if (i==1) {
            message = "Successfully added one user."; 
          } 
        } 
          s.close(); 
          con.close(); 
        } 
        catch (SQLException e) {
          message = "Error." + e.toString(); 
          error = true; 
        } 
        catch (Exception e) {
          message = "Error." + e.toString(); 
          error = true; 
        } 
        if (message!=null) {
          PrintWriter out = response.getWriter(); 
          out.println("<B>" + message + "</B><BR>"); 
          out.println("<HR><BR>"); 
        } 
        if (error==true) 
          sendRegistrationForm(request, response, true); 
        else 
          sendRegistrationForm(request, response, false); 
        sendPageFooter(response); 
      } 

      /** 
       * Send the HTML page header, including the title 
       * and the <BODY> tag 
       */ 
      private void sendPageHeader(HttpServletResponse response) 
        throws ServletException, IOException {
        response.setContentType("text/html"); 
        PrintWriter out = response.getWriter(); 
        out.println("<HTML>"); 
        out.println("<HEAD>"); 
        out.println("<TITLE>Registration Page</TITLE>"); 
        out.println("</HEAD>"); 
        out.println("<BODY>"); 
        out.println("<CENTER>"); 
      } 

      /** 
       * Send the HTML page footer, i.e. the </BODY> 
       * and the </HTML> 
       */ 
      private void sendPageFooter(HttpServletResponse response) 
        throws ServletException, IOException {
        PrintWriter out = response.getWriter(); 
        out.println("</CENTER>"); 
        out.println("</BODY>"); 
        out.println("</HTML>"); 
      }   
      /**Send the form where the user can type in 
       * the details for a new user 
       */ 
      private void sendRegistrationForm(HttpServletRequest request, 
        HttpServletResponse response, boolean displayPreviousValues) 
        throws ServletException, IOException {

        PrintWriter out = response.getWriter(); 
        out.println("<BR><H2>Registration Page</H2>"); 
        out.println("<BR>Please enter the user details."); 
        out.println("<BR>"); 
        out.println("<BR><FORM METHOD=POST>"); 
        out.println("<TABLE>"); 
        out.println("<TR>"); 
        out.println("<TD>Uni Id</TD>"); 
        out.print("<TD><INPUT TYPE=TEXT Name=uniid"); 

        if (displayPreviousValues) 
          out.print(" VALUE=\"" + uniid + "\""); 

        out.println("></TD>"); 
        out.println("</TR>"); 
        out.println("<TR>"); 
        out.println("<TD>Name</TD>"); 
        out.print("<TD><INPUT TYPE=TEXT Name=name"); 

        if (displayPreviousValues) 
          out.print(" VALUE=\"" + name + "\""); 

        out.println("></TD>"); 
        out.println("</TR>"); 
        out.println("<TR>"); 
        out.println("<TD>Password</TD>"); 
        out.print("<TD><INPUT TYPE=PASSWORD Name=password"); 

        if (displayPreviousValues) 
          out.print(" VALUE=\"" + password + "\""); 

        out.println("></TD>"); 
        out.println("</TR>"); 
        out.println("<TR>"); 
        out.println("<TD>Email</TD>"); 
        out.print("<TD><INPUT TYPE=TEXT Name=email");
        out.println("></TD>");
        out.println("</TR>");
        out.println("<TR>");
        out.println("<TD>Access Level</TD>");
        out.print("<TD><INPUT TYPE=int Name=access_level");
        out.println("></TD>");
        out.println("</TR>");
        if (displayPreviousValues) 
        out.print(" VALUE=\"" + password + "\""); 
        out.println("></TD>"); 
        out.println("</TR>");

        out.println("<TR>"); 
        out.println("<TD><INPUT TYPE=RESET></TD>"); 
        out.println("<TD><INPUT TYPE=SUBMIT></TD>"); 
        out.println("</TR>"); 
        out.println("</TABLE>"); 
        out.println("</FORM>"); 
        out.println("<BR>"); 
        out.println("<BR>"); 
      } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:35:46.147

错误很明显：发送到 MySQL 的 SQL 中有语法错误。尝试打印出你发送的内容，它会比在代码中阅读更容易看到。

但更重要的是 - 不要这样做。

1.  您应该使用 PreparedStatement 并绑定您的输入变量。
2.  您应该使用 JNDI 连接池。
3.  你不应该硬连线你的连接细节——不是一次，而是两次！
4.  您将 HTML 编码到一个 servlet 中。最好将 JSP 与 JSTL 一起使用。
5.  您不验证您的输入。这是等待发生的 SQL 注入攻击。

现在就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:35:31.357

```
sql = "INSERT INTO user" + 
            " (uniid, name, password, email, access_level)" + 
            " VALUES" + 
            " ('" +  uniid + "'," + 
            " '" +  name + "'," + 
            " '" +  password + "'," + 
            " '" + email + "'," + access_level + "',)"; 
```

改成： -

```
sql = "INSERT INTO user" + 
            " (uniid, name, password, email, access_level)" + 
            " VALUES" + 
            " ('" +  uniid + "'," + 
               " '"  +  name + "'," + 
               " '"  +  password + "'," + 
               " '"  + email + "','" + access_level + "')"; 
```

您在查询后错过了尾随逗号..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:35:11.957

`,`您的 select 语句中有一个额外的逗号，而不是：

```
sql = "INSERT INTO user" + 
            " (uniid, name, password, email, access_level)" + 
            " VALUES" + 
            " ('" +  uniid + "'," + 
            " '" +  name + "'," + 
            " '" +  password + "'," + 
            " '" + email + "'," + access_level + "',)"; 

                                                  /|\
                         this ---------------------- 
```

它应该是

```
sql = "INSERT INTO user" + 
            " (uniid, name, password, email, access_level)" + 
            " VALUES" + 
            " ('" +  uniid + "'," + 
            " '" +  name + "'," + 
            " '" +  password + "'," + 
            " '" + email + "'," + access_level + "')"; 
```

我不了解 Java，但您应该使用[***准备好的语句***](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)或 Java 中的任何其他方式来清理您的数据，让您指定参数，而不是直接在 sql 语句中写入输入的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T11:35:22.413

我认为有问题的行是：

```
"INSERT INTO user" + 
        " (uniid, name, password, email, access_level)" + 
        " VALUES" + 
        " ('" +  uniid + "'," + 
        " '" +  name + "'," + 
        " '" +  password + "'," + 
        " '" + email + "'," + access_level + "',) 
```

请注意查询末尾的逗号

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T11:35:24.447

你错过了单引号 & 并且有额外的逗号

`" '" + email + "'," + access_level + "',)";` 在你的代码中。

它应该是 `" '" + email + "','" + access_level + "')";`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T11:35:50.990

您的查询末尾有一个额外的逗号：更改以下内容

```
 sql = "INSERT INTO user" + 
                " (uniid, name, password, email, access_level)" + 
                " VALUES" + 
                " ('" +  uniid + "'," + 
                " '" +  name + "'," + 
                " '" +  password + "'," + 
                " '" + email + "'," + access_level + "',)"; 
```

到：

```
sql = "INSERT INTO user" + 
            " (uniid, name, password, email, access_level)" + 
            " VALUES" + 
            " ('" +  uniid + "'," + 
            " '" +  name + "'," + 
            " '" +  password + "'," + 
            " '" + email + "'," + access_level + "')"; 
```

我强烈建议您使用[Prepared statement API](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T11:35:57.323

这是 SQL 请求的第 1 行，而不是 java 程序的第 1 行。让您的程序将请求打印到控制台，然后从那里进行调试。

# android - 如何在 baseAdapter 中使用 onclick 按钮

> ID：12672442
> 
> 赞同：7
> 
> 时间：2012-10-01T11:32:02.960
> 
> 标签：android, android-layout, android-intent, android-emulator, onclick

如何在扩展 baseadapter 中使用单击事件按钮。我尝试了很多但没有用。在我的项目中有自定义列表视图，它包含文本、按钮（btnlist）、快速滚动索引。当我点击按钮（btnlist）时，它不是其他活动，也没有显示错误，没有吐司..
请帮我举个例子。提前谢谢你。

快速参考：getview---> holder.btnList.setOnClickListener

高效适配器.java

```
public class EfficientAdapter extends BaseAdapter implements SectionIndexer, OnClickListener {
IndexableListView mListView;
private String mSections = "#ABCDEFGHIJKLMNOPQRSTUVWXYZ";
ArrayList<Patient> patientListArray;

private Intent intent;
private Patient patient;
private LayoutInflater mInflater;
private Context context;
private int positions;
ViewHolder holder;

public EfficientAdapter(Context context) {
    mInflater = LayoutInflater.from(context);
    this.context = context;

    String patientListJson = CountriesList.jsonData;
    JSONObject jssson;
    try {
        jssson = new JSONObject(patientListJson);
        patientListJson = jssson.getString("PostPatientDetailResult");
    } catch (JSONException e) {
        e.printStackTrace();
    }
    Gson gson = new Gson();
    JsonParser parser = new JsonParser();
    JsonArray Jarray = parser.parse(patientListJson).getAsJsonArray();
    patientListArray = new ArrayList<Patient>();
    for (JsonElement obj : Jarray) {
        Patient patientList = gson.fromJson(obj, Patient.class);
        patientListArray.add(patientList);
    //  Log.i("patientList", patientListJson);

    }
}

public int getCount() {

    return patientListArray.size();
}

public Object getItem(int position) {

    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {

    this.positions = position;      
    View rowView = convertView;

    if (rowView  == null) {                     
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        rowView = inflater.inflate(R.layout.homemplebrowview, parent, false);

        holder = new ViewHolder();
        holder.text1 = (TextView) rowView.findViewById(R.id.name);
        holder.text2 = (TextView) rowView.findViewById(R.id.mrn);
        holder.text3 = (TextView) rowView.findViewById(R.id.date);
        holder.text4 = (TextView) rowView.findViewById(R.id.age);
        holder.text5 = (TextView) rowView.findViewById(R.id.gender);
        holder.text6 = (TextView) rowView.findViewById(R.id.wardno);
        holder.text7 = (TextView) rowView.findViewById(R.id.roomno);
        holder.text8 = (TextView) rowView.findViewById(R.id.bedno);
        holder.btnList = (Button) rowView.findViewById(R.id.listbutton);
        /*Button editButton = (Button) rowView.findViewById(R.id.listbutton) ;
        editButton.setTag(position);
        editButton.setClickable(true);
        editButton.setOnClickListener(EfficientAdapter.this);
        rowView.setClickable(true);*/

        rowView.setTag(holder);
    } else {
        holder = (ViewHolder) rowView.getTag();
    }

    holder.text1.setText(Util.formatN2H(patientListArray.get(position)
            .getName()));
    holder.text2.setText(patientListArray.get(position).getMrnNumber());
    holder.text3.setText(Util.formatN2H(patientListArray.get(position)
            .getRoom()));
    holder.text4.setText(Util.formatN2H(patientListArray.get(position)
            .getAge()));
    holder.text5.setText(Util.formatN2H(patientListArray.get(position)
            .getGender()));
    holder.text6.setText(Util.formatN2H(patientListArray.get(position)
            .getWard()));
    holder.text7.setText(Util.formatN2H(patientListArray.get(position)
            .getRoom()));
    holder.text8.setText(Util.formatN2H(patientListArray.get(position)
            .getBed()));        
    holder.btnList.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Toast.makeText(context, "STAT", Toast.LENGTH_SHORT).show();     
            Intent next = new Intent(context, SeviceDetails.class);
            Log.i("patient", " next "+ position + " onclickposition " + patientListArray.get(position).getMrnNumber());
            patient = getPatientDetailsByMrn(patientListArray, position);
            Log.i("DDDD ", patient.getMrnNumber());             
            next.putExtra("patient", patient);
            next.putExtra("position", position);
            System.out.println("patient"+ patient);
            context.startActivity(next);
        }
    });
return rowView;
}       

static class ViewHolder {
    public Button btnList;
    public TextView text8;
    public TextView text7;
    public TextView text6;
    public TextView text5;
    public TextView text4;
    public TextView text1;
    public TextView text2;
    public TextView text3;
}

@Override
public void notifyDataSetChanged() {
    super.notifyDataSetChanged();
}

public int getPositionForSection(int section) {
    sortMyData();

    Log.i("getPositionForSection", "section" + section);
    // If there is no item for current section, previous section will be
    // selected
    for (int i = section; i >= 0; i--) {
        for (int j = 0; j < getCount(); j++) {
            if (i == 0) {

                Log.i("getPositionForSection- i", "section" + i);
                // For numeric section
                for (int k = 0; k <= 9; k++) {

                    if (StringMatcher.match(
                            String.valueOf(patientListArray.get(j)
                                    .getName().charAt(0)),
                            String.valueOf(k)))
                        Log.i("getPositionForSection- j", "section" + j);

                        return j;
                }
            } else {
                if (StringMatcher.match(
                        String.valueOf(patientListArray.get(j).getName()
                                .charAt(0)),
                        String.valueOf(mSections.charAt(i))))
                    return j;
            }
        }
    }
    return 0;
}

public int getSectionForPosition(int position) {
    return 0;
}

public Object[] getSections() {
    String[] sections = new String[mSections.length()];
    for (int i = 0; i < mSections.length(); i++)
        sections[i] = String.valueOf(mSections.charAt(i));
    return sections;
}

/**
 * sorting the patientListArray data
 */
public void sortMyData() {
    // sorting the patientListArray data
    Collections.sort(patientListArray, new Comparator<Object>() {
        @Override
        public int compare(Object k1, Object k2) {
            Patient p1 = (Patient) k1;
            Patient p2 = (Patient) k2;
            return p1.getName().compareToIgnoreCase(p2.getName());
        }

    });
}

     } 
```

.xml

```
 <Button
        android:id="@+id/listbutton"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/name"
        android:layout_marginRight="43dp"   
        android:focusable="false"      
        android:text="Episode"
        android:textColor="#666666" /> 
```

默认列表视图

```
 <ListView 

         android:id="@+id/homelistView"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:dividerHeight="0dip" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T11:40:30.923

您应该使用您的适配器来填充列表中的项目。然后在您的 Activity 或 Fragment 中，您应该实现`onListItemClick`事件来处理对列表项的点击。

编辑：我在下面发布了一个我正在使用的示例`ListFragment`- 这是我现在可用的一段代码，我可以`ListView`稍后发布一些特定的内容：

```
public class RecipiesActivity extends FragmentActivity {

    private RecipiesSummaryListAdapter m_listAdapter; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /* here you need to set the adapter of the listview 
           and do other things for your applicaiton (i.e. populate the 
           data in your adapter. In your case, since you are calling a 
           WS you want to do that in a different task */ 
        ListFragment lf = 
             (ListFragment) fm.findFragmentById(R.id.my_list_fragment);
        lf.setListAdapter(m_listAdapter);
} 
```

然后在你的`ListFragment`：

```
/* imports and other things go here then... */ 
public class MyListFragment extends ListFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        return (View) inflater.inflate(R.layout.myListViewXml, 
                                           container, false);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        // put your handler here

    }   
} 
```

有关详细信息，`ListFragment`请参见[此处](http://developer.android.com/reference/android/app/ListFragment.html)。

我认为这是一个非常好的例子（尽管在[这个 stackoverflow 答案](https://stackoverflow.com/questions/8267060/android-how-to-use-adapter-for-listview-without-extending-listactivity)`ArrayAdapter`中使用了扩展而不是。`BaseAdapter`

有一点要记住：

1.  按钮不能是可聚焦的（即在 XML 中使用`android:focusable="false"`- 就像在 XML 中一样）。
2.  您需要捕获提供`onItemClick`如下所示处理的事件（从上面的链接中提取）：

代码：

```
listview.setOnItemClickListener(new OnItemClickListener() {
    //@Override
    public void onItemClick(AdapterView arg0, View view,
                                  int position, long id) {
        // user clicked a list item, make it "selected"
        selectedAdapter.setSelectedPosition(position);
        //Do your stuff here
} 
```

最后，注意一点。此解决方案意味着您单击列表行并触发事件。

我认为，如果您希望用户单击按钮并在按钮上触发事件，那么您需要`listview.setItemsCanFocus(true)`在膨胀 ListView XML 并确保 Button`focusable`在 XML 中之后立即设置调用。监听`onClick`事件应该可以工作。

这在 GoogleIO World of ListView 演示文稿的幻灯片 25 中进行了描述（您可以在[此处](http://dl.google.com/googleio/2010/android-world-of-listview-android.pdf)获取，[视频在此处](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)）

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T11:53:00.127

为您的按钮尝试以下操作：

```
android:focusable="false" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T12:12:57.747

写`holder.btnList.setOnClickListener`里面的`if (rowView == null)`条件，然后再试一次。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T11:37:32.387

在 getView() 方法中使用以下代码：

```
 Button status = (Button) rowView.findViewById(R.id.image1);
        status.setBackgroundResource(R.drawable.add_account);
        status.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                       // DO your stuff
            }
        }); 
```

# php - 如何实现在服务器上定期检查文件夹中是否有文件的脚本

> ID：12672448
> 
> 赞同：-1
> 
> 时间：2012-10-01T11:32:21.217
> 
> 标签：php

我需要 php 中的代码来定期检查服务器上的文件夹是否有任何文件，以便我可以开始对文件进行一些操作。有人可以给我一些提示和初学者在哪里查看如何实现这一目标。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:56:12.313

为此设置 cron 作业，例如：

```
#shell$ crontab -e
*/2 * * * * /usr/bin/php -f /path/to/your/script.php 
```

上面的行将导致脚本每两分钟运行一次。

[您可以在此处](http://www.manpagez.com/man/5/crontab/)或在[wiki](http://en.wikipedia.org/wiki/Cron) 、google 上阅读更多关于 cron的信息或阅读您机器上的手册页

# asp.net - 错误：GetImaePath 在当前上下文中不存在

> ID：12672453
> 
> 赞同：0
> 
> 时间：2012-10-01T11:32:34.143
> 
> 标签：asp.net, visual-studio, data-binding

我将 gridview 绑定到 GetImagePath 以在编辑和删除按钮处显示图像。作为 ：

```
<asp:ImageButton ID="ibEdit" runat="server" CommandName="EditItem" CausesValidation="false" ImageUrl='<%#GetImagePath("edit.gif")%>' 
                    ToolTip="Edit Item" />
                &nbsp;&nbsp;&nbsp;&nbsp;
                <asp:ImageButton ID="ibDelete" runat="server" CausesValidation="false" OnClick="ibDelete_Click" ImageUrl='<%#GetImagePath("action_delete.gif")%>'
                    ToolTip="Delete Item" />
            </ItemTemplate> 
```

但是当我运行时，它会向我显示以下错误
`GetImaePath Doesnot exist in current context` ，我可能缺少什么代码或者是否有任何错误。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:35:02.637

应该在代码后面 (.cs) 或 .aspx 代码块中定义一个名为 GetImagePath(string image) 的 C# 函数

```
public string GetImagePath(string image)
{
  // return full image path
} 
```

# excel - 相当于 FindNext 的匹配

> ID：12672457
> 
> 赞同：0
> 
> 时间：2012-10-01T11:33:02.833
> 
> 标签：excel, vba

我有一个数据表，我需要搜索满足两个条件（ID 号和日期）的行。

我编写了一个宏`Find`，`FindNext`它会在数据中搜索 ID 号，每次找到匹配项时，它都会比较日期并在两个单元格匹配时返回行详细信息。

但是，它运行起来很慢，而且我读到这个`Match`功能要快得多。据我所见`Match`只会返回第一个匹配值，有什么办法可以`Match`用来查找后续匹配项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:14:56.720

这里有一篇博客文章，其中包含 VBA 代码比较 Find、MATCH 和使用变体数组的速度 [http://fastexcel.wordpress.com/2011/10/26/match-vs-find-vs-variant-array-vba -性能枪战/](http://fastexcel.wordpress.com/2011/10/26/match-vs-find-vs-variant-array-vba-performance-shootout/)

# java - 如果输入有时没有标记，则标记数组中的多个字符串

> ID：12672458
> 
> 赞同：2
> 
> 时间：2012-10-01T11:33:10.767
> 
> 标签：java, android, tokenize

我已经输入了这个表格

```
test@test.com 
```

和\或以这种形式

```
test@test.com;test2@test.com 
```

或者

```
test@test.com;test2@test.com;test3@test.com 
```

我应该标记所有，在一个字符串数组中，每个单元格只包含一个电子邮件，没有任何分隔符

```
; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:35:34.657

您不想标记化，只需使用`split`：

```
String[] emails = { "test@test.com;test2@test.com;test3@test.com", "test@test.com"  };
List<string> result = new ArrayList<String>();

for ( string listOfEmails : emails ) {
  for( string email : listOfEmails.split(";") ) {
    result.Add(email).
  }
}

System.out.println(result); 
```

它适用于所有情况。

# android - Gridview 中的方形项目

> ID：12672459
> 
> 赞同：1
> 
> 时间：2012-10-01T11:33:11.680
> 
> 标签：android, gridview

我做了一个以某种方式`CustomAdapter`展示我的物品。`GridView`在那个 CustomAdapter 中，我重写了该`getView()`方法。问题是，我想将网格项的高度设置为等于它们的宽度，每个智能手机的宽度可能不同。我已经看到了一个解决方案，但这对我来说不起作用（它说我必须在我的自定义视图中覆盖 onChanged() 方法）。无论如何，任何人都可以让我在如何处理这个问题上走上正轨吗？

我的 xml/.java 文件的代码是：

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/backrepeat"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/horizontalLine"
        android:layout_width="fill_parent"
        android:layout_height="8dip"
        android:background="#33c2bd" />

    <GridView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/gvLevelSelector"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/backrepeat"
        android:columnWidth="100dp"
        android:gravity="center"
        android:horizontalSpacing="2dp"
        android:numColumns="3"
        android:stretchMode="columnWidth"
        android:verticalSpacing="2dp" >
    </GridView>

</LinearLayout> 
```

**项目.xml**

```
<?xml version="1.0" encoding="utf-8"?>
   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content" 
     android:background="#33c2bd">
     <TextView
       android:id="@+id/tvLevel"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_centerHorizontal="true" 
       android:text="Test here" />
     <TextView
       android:id="@+id/tvLevelScore"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:paddingBottom="15dip"
       android:layout_below="@+id/tvLevel"
       android:layout_centerHorizontal="true" 
       android:text="test2"/>
   </RelativeLayout> 
```

**自定义适配器**：

```
public class LevelSelectorAdapter extends ArrayAdapter<LevelSelectorItem> {

    public LevelSelectorAdapter(Context C, List<LevelSelectorItem> Arr) {
        super(C, R.layout.levelselector_item, Arr);
    }

    @Override
    public View getView(int position, View v, ViewGroup parent) {
        View mView = v;

        if (mView == null) {

            LayoutInflater vi = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            mView = vi.inflate(R.layout.item, null);
        }

        TextView level = (TextView) mView.findViewById(R.id.tvLevel);
        TextView levelScore = (TextView) mView.findViewById(R.id.tvLevelScore);

        if (mView != null) {

            level.setText(getItem(position).getLevel());
            levelScore.setText("test");             

        }
        return mView;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-11T08:35:34.107

使用资源并显示指标。设置视图的布局参数。

您可以在 onBindView 期间执行此操作。

这是我使用的一个片段：

```
 LayoutInflater.from(getContext()).inflate(R.layout.activity_cocktails_cocktail_tile,this);
    ConstraintLayout rootLayout = findViewById(R.id.cocktailTileRootLayout);
    rootLayout.getLayoutParams().width = getContext().getResources().getDisplayMetrics().widthPixels/2;
    rootLayout.getLayoutParams().height = getContext().getResources().getDisplayMetrics().widthPixels/2; 
```

# php - twitter 流 api 而不是搜索 api

> ID：12672460
> 
> 赞同：0
> 
> 时间：2012-10-01T11:33:14.100
> 
> 标签：php, twitter

我正在使用推特搜索 API 来查看所有使用我想要查看的特定主题标签的推文。

但是，我想使用流功能，所以，我只获取最近的，然后我可以存储它们。

```
 <?php
        global $total, $hashtag;
        $hashtag = $_POST['hash'];
        $total = 0;
        function getTweets($hash_tag, $page) {
              global $total, $hashtag;
              $url = 'http://search.twitter.com/search.json?q='.urlencode($hash_tag).'&';
              $url .= 'page='.$page;    
              $ch = curl_init($url);
              curl_setopt ($ch, CURLOPT_RETURNTRANSFER, TRUE);
              $json = curl_exec ($ch);
              curl_close ($ch);
              echo "<pre>";    
              $json_decode = json_decode($json);
              print_r($json_decode->results);

              $json_decode = json_decode($json);        
              $total += count($json_decode->results);    
              if($json_decode->next_page){
                   $temp = explode("&",$json_decode->next_page);        
                   $p = explode("=",$temp[0]);                
                   getTweets($hashtag,$p[1]);
              }        
        }

        getTweets($hashtag,1);
        echo $total;
  ?> 
```

上面的代码是我一直用来搜索我想要的推文的。

我需要做些什么来更改它，以便我可以流式传输推文？

我知道我必须使用流 url [https://api.twitter.com/1.1/search/tweets.json](https://api.twitter.com/1.1/search/tweets.json)，但是在那之后我需要改变的是我不知道该怎么做。

显然，我知道我需要编写数据库 sql，但我只想先捕获流并查看它。

我该怎么做？我一直在使用的代码对于捕获流没有任何好处吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:27:41.297

似乎不可能使用流 API 来获取主题标签。

使用搜索 API 几乎是唯一的解决方案。只需使用 AJAX 内容刷新即可获取所有新推文。除非您想将推文存储在数据库中，否则总体效果几乎相同，在这种情况下必须防止重复保存。

# forms - HTML5 日期时间最小值属性

> ID：12672463
> 
> 赞同：1
> 
> 时间：2012-10-01T11:33:27.707
> 
> 标签：forms, html, datetimepicker

在 HTML5 网站中，我使用新的日期时间输入类型字段和旧浏览器的替代项。

就我而言，日期时间字段用于设置即将发生的事件，因此必须无法设置过去定义的日期时间。min 属性应该允许我这样做，但它似乎不起作用，而它在日期或时间输入字段上完成了工作。

这是我的代码（编辑视图，但添加视图中的问题相同）：

```
<input type="datetime-local" id="EventDatetime" name="data[Event][datetime]" step="900" min="<?php echo date(DATE_RFC3339); ?>" value="<?php echo $event->date; ?>" required/> 
```

这应该给：

```
<input type="datetime-local" id="EventDatetime" name="data[Event][datetime]" step="900" min="2012-10-01T13:05:00+02+00" value="2012-11-01T13:05:00+02+00" required/> 
```

如果我在检查器（Chrome、Opera ...）中检查此代码，则该`min`标签不存在，如果我尝试在 javascript 中获取它，我会得到`undefined`. 但是，此标记存在于源代码中（通过浏览器中的 Ctrl+U）。我不明白....

有人有想法吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:22:35.120

检查器不会反映你的真实来源，而是根据页面 Dom 生成代码源。

W3C 规范指定 Date 输入必须具有 min 属性 (http://www.w3.org/TR/html5/states-of-the-type-attribute.html#local-date-and-time-state-type-本地日期时间）。当检查器生成源代码时，您会看到它添加了默认属性 min。

编辑您的 min 属性未显示，因为您没有使用良好的格式。HTML 日期格式为 1970-01-01T00:00:00.0 而不是 2012-10-01T13:05:00+02+00。

# security - JSF（容器管理安全）组角色

> ID：12672465
> 
> 赞同：1
> 
> 时间：2012-10-01T11:33:34.653
> 
> 标签：security, jsf

对于在具有 JSF 1.2、容器管理安全性和 EJB 3.0 的 JBoss 4.2 上运行的 JSF 应用程序，我正在寻找一种将多个角色组合在一个角色中的解决方案。例如：

*   角色：IT 支持、电话支持、技术支持、交付支持

现在，我想指定一个角色，例如其中三个角色：

*   角色：高级支持人员（IT 支持、技术支持、交付支持）

这对于容器管理的安全性和 Jboss 是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:39:19.833

不，这对于容器管理的授权设施是不可能的。

更重要的是，角色继承被认为是[糟糕的设计](http://en.wikipedia.org/wiki/Role_Class_Model)。只是不要那样做。根据具体的功能要求，您可以在指定“全局”角色（或相反）时自动创建三个附加角色，或者创建一个帮助程序/实用程序方法/函数来检查给定用户是否拥有所有三个角色（因此，无需创建额外的角色）。

# flask - 如何使用烧瓶用 jinja 呈现 html 内容？

> ID：12672469
> 
> 赞同：19
> 
> 时间：2012-10-01T11:33:42.917
> 
> 标签：flask, jinja2

我在一个应用程序中使用 Flask 来呈现来自 sqlite 数据库的一些数据。我的问题是当应用程序呈现一些内部包含 html 的文本时，显示为文本而不是 html。例如，数据库中的记录有以下文本：

```
My tailor <strong>is</strong> rich 
```

html页面按原样呈现：

```
<html>
<!-- snip .... -->
My tailor &gt;strong&lt;is&gt;/strong&lt; rich
<!-- snip .... -->
</html> 
```

而且，我想要的是这个（“是”字必须更大胆）：

```
<html>
<!-- snip .... -->
My tailor <strong>is</strong> rich
<!-- snip .... -->
</html> 
```

有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-01T13:11:50.343

如果您知道内容是安全的，只需使用[`safe`](http://jinja.pocoo.org/docs/templates/#safe)过滤器：

```
{# In the Jinja template #}
{% for article in articles %}
<div class="article">{{article|safe}}</div>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-25T20:15:32.890

另一种可能性是使用 jinja Markup 类，就像安全过滤器一样。这将允许您在不通过安全过滤器过滤内容的情况下呈现 HTML。下面是一个如何实现的示例。

```
from jinja2 import Markup, escape

def render_markup():
    return Markup("{0}{1}{2}{3}{4}".format(
        escape("My tailor "), 
        "<strong>", 
        escape("is"), 
        "</strong>", 
        escape(" rich"))) 
```

在此之后，您可以在 Flask jinja 全局变量中注册您的函数，并从 jinja 模板中使用它。

```
app.jinja_env.globals["render_markup"] = render_markup 
```

模板中不需要保险箱。

```
<html>
<!-- snip .... -->
{{ render_markup() }}
<!-- snip .... -->
</html> 
```

# php - PHP中的翻页

> ID：12672470
> 
> 赞同：-5
> 
> 时间：2012-10-01T11:33:46.120
> 
> 标签：php, drupal-7, page-flipping

谁能告诉我如何实现这样的翻页或翻页效果：http: [//viewer.zmags.com/showmag.php](http://viewer.zmags.com/showmag.php?magid=174428#/page28/) ?magid=174428#/page28/为我的drupal 7 网站？

我已经搜索了 6 个小时，但我找到的所有帮助都在 flash 中，但我需要它在 PHP 中。任何 PHP 代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T11:38:58.103

通常您使用 javascript 或 flash 进行图形处理，PHP 是一种服务器端语言，图形效果在客户端执行，因此 flash 或 javascript。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T11:37:57.213

您将无法在 PHP 中执行此操作。PHP用于服务器端编码。我能做的最好的就是为你指明正确的方向。Javascript 是您需要的语言，如果您不使用 Javascript，我建议您使用 jQuery。

这个[链接](http://www.webresourcesdepot.com/5-free-jquery-page-flip-plugins-for-book-like-interfaces/)会给你一个例子，但如果你搜索 jquery pageflipping 你应该找到你需要的。

# php - 为什么我的 PHP 多维数组不起作用？

> ID：12672475
> 
> 赞同：1
> 
> 时间：2012-10-01T11:34:12.630
> 
> 标签：php, arrays, multidimensional-array, explode

我的多维数组正在工作。但是通过调用时我似乎无法使用`explode`或`in_array`限制数组`$_GET`

```
<?
$shop = array(
array("red", "black", "blue", "green"),
array("orange"),
array("orange", "black"),
array("pink", "yellow")
);

foreach ($shop as $rowNumber => $row)
{
    echo "<li><b>The row number $rowNumber</b>";
        echo "<ul>";
        foreach ($row as $col) {
            if (in_array($col, explode(' and ', $_GET['filter']))){
                echo "<li>".$col."</li>";
            }
        }
        echo "</ul>";
    echo "</li>";
}

?> 
```

如果我运行脚本，`$_GET["filter"]=="black"`它会显示所有项目 - 它应该只显示两个，例如这是错误的：其他行不应该出现：

![在此处输入图像描述](../Images/38547ed0098574be292095b27478edd0.png)

应该是这个

![在此处输入图像描述](../Images/39757bc5c125a5245c52272fe0524cfb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:43:29.607

# 更新

**解决方案 1**

```
 <?

    $shop = array(
    array("1", "red", "black", "blue and green"),
    array("2", "orange"),
    array("3", "pink", "yellow", "blue and green")
    );

    for ($row = 0; $row < count($shop); $row++)    
     {

            $lis = "";
            for ($col = 0; $col < count($shop[$row]); $col++)
                {
                     if (in_array($shop[$row][$col], explode(' and ', $_GET['filter'])) 
                        || empty($_GET['filter'])){
                        $lis .= "<li>".$col."</li>";
                     }
                }
           if($lis != "") {
             echo "<li><b>The row number $row</b>";
             echo "<ul>";
             echo $lis;
             echo "</ul>";
             echo "</li>";
         }
    }

    ?> 
```

**解决方案 2**

```
<?

$shop = array(
array("1", "red", "black", "blue and green"),
array("2", "orange"),
array("3", "pink", "yellow", "blue and green")
);

for ($row = 0; $row < count($shop); $row++)    
{
    $lis = "";

    for ($col = 0; $col < count($shop[$row]); $col++)
    {
            if (in_array($shop[$row][$col], explode(' and ', $_GET['filter']))){
                $lis .= "<li>".$col."</li>";
            }
    }

    if($lis=="") {

            echo "$row";

    } else {

            echo $lis;

    }
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:42:22.330

您的 col-Variable 包含一个数字（1、2 或 3）但爆炸调用返回一个包含单词（绿色、蓝色、橙色）的数组

尽管 PHP 可以处理从 1 到 "1" 的转换，但它不能从 1 转换到 "green"。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:43:09.493

Just Gussing 也许你想打印这样的东西

```
$shop = array(array("1","red","black","blue and green"),array("2","orange"),array("3","pink","yellow","blue and green"));

echo "<ul>";
foreach ( $shop as $info ) {
    $info = array_pad($info, 4, "none");
    list($id, $color1, $color2, $mixed) = $info;
    printf("<li><b>The row number = %d , Color = 1  %s , Color 2 =   %s , Mixed  = %s </b></li>", $id, $color1, $color2, $mixed);
}
echo "</ul>"; 
```

输出

*   **行号 = 1 ，颜色 = 1 红色 ，颜色 2 = 黑色 ，混合 = 蓝色和绿色**
*   **行号 = 2 ，颜色 = 1 橙色 ，颜色 2 = 无 ，混合 = 无**
*   **行号 = 3 ，颜色 = 1 粉色 ，颜色 2 = 黄色 ，混合 = 蓝色和绿色**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T12:00:58.957

我认为你可以简单地做这样的事情：

```
<?
$shop = array(
array("red", "black", "blue", "green"),
array("orange"),
array("orange", "black"),
array("pink", "yellow")
);

foreach ($shop as $rowNumber => $row)
{
    echo "<li><b>The row number $rowNumber</b>";
    echo "<ul>";
    foreach ($row as $col)
    {
        //Compare both values, if they match, it prints
        if ($col == $_GET['filter'])
        {
             echo "<li>".$col."</li>";
        }
    }
    echo "</ul>";
    echo "</li>";
}

?> 
```

# c# - 无法将值 NULL 插入列...异常问题

> ID：12672478
> 
> 赞同：1
> 
> 时间：2012-10-01T11:34:38.783
> 
> 标签：c#, linq, entity-framework-4

我遇到了数据库上传脚本的问题。它基本上只是将所有实体从备份源添加到数据库。

但是，由于新数据库的某些字段在旧数据源中不存在，因此我为其分配了默认值。有关示例，请参见下面的屏幕截图，字符串属性`CCP1_description`（以及下面类似命名的描述）被设置为`"Enter description here."`

但是，当我保存实体时，我收到一个异常，说明描述字段不允许为 NULL。显然不是。

见截图代码+异常

![问题截图](../Images/2d5b2e092d4fc6ac457c66290713008e.png)

这是我的数据库创建脚本中的一个片段，它显示了列的设置方式：

```
...
[CCP1_description] nvarchar(max)  NOT NULL,
[CCP2_description] nvarchar(max)  NOT NULL,
[EP1_description] nvarchar(max)  NOT NULL,
[EP2_description] nvarchar(max)  NOT NULL,
[EP3_description] nvarchar(max)  NOT NULL,
[EP4_description] nvarchar(max)  NOT NULL,
[EP5_description] nvarchar(max)  NOT NULL,
... 
```

如果我在调试的时候检查我的`temp`变量，我可以清楚地看到描述字段的内容（都是`""Enter description here.`应该的。

![截图2](../Images/ae6008baf8c88a5e5cde4d9e3451e49c.png)

我知道很多事情都会导致这个异常；但我没有看到这个问题的根本原因。有人可以对此有所了解吗？我不知道为什么会抛出这个异常......

我发现许多具有相同错误的未解决问题，但我认为这是一种不同的情况，因为我的字段不是数据库生成的，也不是 PK 或 IDENTITY 字段。在构造实体时它们不为空，并且正在添加的对象实际上具有正确的值。

**更新**

我刚刚注意到前 83 个实体已正确添加。异常在第 84 次执行代码时引发（之后很多次。这意味着问题可能在另一个属性字段中。

我检查了所有字段，我遇到的唯一`null`值被添加到已在数据库和实体框架中设置为可为空的字段中。

现在我真的不明白为什么在描述字段上抛出异常。

**更新 2**

这个应用程序似乎是由 Salvador Dali 编写的。

我重新编写了代码，但这一次，我注释掉了该`.AddObject(temp);`行。这意味着实体已创建，但从未添加到 db 上下文中。然后`db.SaveChanges();`调用实际上应该是多余的并且什么都不做。

或者我虽然。事实证明，我的实体仍在添加中。我逐步完成了整个代码执行，它从不以任何方式使用 db 上下文`db.SaveChanges();`，但它仍然被添加。相反，如果我只在计数器达到 100 后才开始添加实体（这意味着只有项目 100、101、102 ......将被保存，其余的都不会被添加），它仍然会继续添加其他实体为好。

我一点头绪都没有。字面上没有。一旦我知道更多，我会更新帖子。

**最后更新**

我设法找到了解决方法（请参阅下面的答案）。但是，我仍在寻找为什么会发生这种情况的解释。如果有人可以向我解释这一点，我将奖励他们这个问题的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:57:38.087

我设法在代码中更进一步。我改变了操作的顺序。它曾经是：

```
//1\. initialize temp
//2\. fill in temp; field by field.
//3\. if any missing (required) fields are encountered during step 2, then continue the foreach loop and take the next element (no save)
//4\. else, add to database ad save changes 
```

不知何故，我无法解释这一点，实体会自动保存。如果我运行与上面完全相同的代码但没有该`.AddObject()`功能，它仍然会被添加。

所以我将代码更改为：

```
//1\. Find all fields that will be needed for the entity
//2\. If any required field is stille empty, continue the foreach loop
//3\. initialize temp (inline initialization with all properties)
//4\. Add object and save. 
```

这并不能真正解决原始问题，它只是一种解决方法。如果有人可以向我解释为什么要添加这些实体，我会接受它作为我的问题的解决方案。

# javascript - 在 Chrome 扩展程序中捕获 Mac 媒体控制键

> ID：12672480
> 
> 赞同：7
> 
> 时间：2012-10-01T11:34:45.377
> 
> 标签：javascript, macos, google-chrome-extension

两部分问题：

1.  有没有办法使用严格的 JavaScript 在 Google Chrome 扩展程序中捕获（对按下）Mac 键盘上的媒体播放控制键（上一个、播放/暂停、下一个）？
2.  `if (answerToQuestion1 === "no")`有没有办法使用某种[本机插件](https://developer.chrome.com/extensions/npapi.html)（C/C++）来做到这一点？

我知道这应该是可能的，正如[Unity Music Media Keys](https://chrome.google.com/webstore/detail/icckhjgjjompfgoiidainoapgjepncej)所做的那样（尽管我知道他们使用的是本机插件）。

到目前为止，我看到的是[这个插件](https://github.com/borismus/Chrome-Media-Keys)，它声称可以这样做，但实际上需要[FunctionFlip](http://kevingessner.com/software/functionflip/)使按键充当功能键，并对按下`F7`、`F8`和`F8`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T19:05:20.170

1 - 不 = [

2 - 哇 - 废话。我以前没见过这个扩展，所以谢谢你。我深入研究了一下，似乎他们在 osx 上安装了一个 .plugin 和一个用于 Windows 支持的 dll。

反编译的插件只有几百行 - [https://gist.github.com/3849247](https://gist.github.com/3849247)。

他们使用[https://github.com/nevyn/SPMediaKeyTap](https://github.com/nevyn/SPMediaKeyTap)作为直接插入媒体密钥（在 os x 上）的一种方式。他们通过在端口 12345 上运行的本地 socket.io 服务器将其中继到浏览器，并且插件正在侦听在其上触发的事件。

宵夜整洁。

编辑：这现在[在 chrome 中原生支持](https://plus.google.com/u/0/+FrancoisBeaufort/posts/SDDSiLV5WVF)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-07T20:56:26.370

最终，我设法完成了我的目标。最终的 Chrome 扩展可以在[GitHub 上](https://github.com/whymarrh/media-keys)看到。

它是如何工作的？

我最初链接到的扩展要求功能键“翻转”实际上是功能键并且没有特殊用途，但这样做需要额外的击键才能执行特殊功能（例如控制键盘背光、音量等）。

在[Patrick 的回答的](https://stackoverflow.com/a/12771890/1267663)大力帮助下，我使用了[nevyn/SPMediaKeyTap](https://github.com/nevyn/SPMediaKeyTap)的部件来捕获扩展外的按键，并[使用 libwebsockets](http://libwebsockets.org/)将它们触发到扩展：

```
- (void) handleKeyCode: (int) kcode withKeyState: (int) kstate
{
    if (kstate) {
        return; // keydown
    }
    // keyup
    int len = 1;
    unsigned char data[LWS_SEND_BUFFER_PRE_PADDING + len + LWS_SEND_BUFFER_POST_PADDING];
    data[LWS_SEND_BUFFER_PRE_PADDING] = kcode;
    for (int i = 0; i < num_clients; i++) {
        libwebsocket_write(clients[i], &data[LWS_SEND_BUFFER_PRE_PADDING], len, LWS_WRITE_TEXT);
        NSLog(@"Sent %d", kcode);
    }
} 
```

在 Chrome 中，扩展只是将适当的 JS 片段注入到主机页面中：

```
this.onmessage = function (message) {
    var keyCode = message.data.charCodeAt(0);
    if (keyCode === 20) {
        inject(function () {
            window.R.player.previous();
        });
    }
    if (keyCode === 16) {
        inject(function () {
            window.R.player.playPause();
        });
    }
    if (keyCode === 19) {
        inject(function () {
            window.R.player.next();
        });
    }
}; 
```

# c# - AutoCAD 中的选择更改跟踪

> ID：12672489
> 
> 赞同：0
> 
> 时间：2012-10-01T11:35:12.600
> 
> 标签：c#, objectarx

在我的项目中，我需要跟踪实体选择的变化，并以我需要的方式更改选择集（比如过滤）。我将委托添加到 Document.ImpliedSelectionChanged 我检查选择更改：

```
Editor.SelectImplied().Value 
```

，但是当我不按 Escape 键时它可以工作。按下 Escape 后，不再触发事件。

我不需要设置要跟踪的选定子实体，因此 Editor.SelectionAdded 和 Editor.SelectionRemoved 事件也帮不了我。

所以问题是：如何使用 C# ObjectArx 框架观察 AutoCad 文档中当前选择的变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:21:27.650

问题出在另一个程序员添加的处理程序中，并且当处理程序引发异常时（并且此异常被 autocad 隐藏，因此无法捕获和调试它-_-）所有其他处理程序都因此而被丢弃。

# windows-phone-7 - 在 windows phone 7 应用程序上添加 php web 服务

> ID：12672490
> 
> 赞同：0
> 
> 时间：2012-10-01T11:35:12.463
> 
> 标签：windows-phone-7

我是 windows phone 7 的初学者。今天我在 windows phone 7 中创建了一个应用程序。并开发 hello world 应用程序。现在我想从我的主应用程序开始。我添加了一个 PHP Web 服务参考。但它向我显示了以下错误。

> HTML 文档不包含 Web 服务发现信息。元数据包含无法解析的引用：“http://mydomain.com/webservices/getLogin.php”。响应消息的内容类型 text/html 与绑定的内容类型不匹配 (application/soap+xml; charset=utf-8)。如果使用自定义编码器，请确保正确实现 IsContentTypeSupported 方法。响应的前 80 个字节是：'{"userLogin":{"status":"NO","error":"请输入有效的用户名/密码"}}'。
> 
> 如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

我搜索了很多，但我没有得到正确的解决方案。请帮我解决这个问题。如何添加php服务。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:54:57.820

只需向您的服务发出一个简单的[Web 请求](http://blogs.msdn.com/b/silverlight_sdk/archive/2008/04/01/using-webclient-and-httpwebrequest.aspx)并解析传入的 json。

如果您真的想连接 PHP 服务 -[请参阅此页面](https://hubpages.com/technology/Using-the-NET-Service-Reference-to-consume-a-PHP-webservice)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:55:32.493

要添加服务引用，您必须在“添加服务引用”URL 中提供 Web 服务的 WSDL 路径。（参考这个例子： http: [//www.sanity-free.org/125/php_webservices_and_csharp_dotnet_soap_clients.html](http://www.sanity-free.org/125/php_webservices_and_csharp_dotnet_soap_clients.html)）

您的 Web 服务必须具有 WSDL 才能在 Windows Phone 应用程序中添加服务引用。

# tomcat - 从 Tomcat 6 Servlet 远程连接到 Hbase

> ID：12672492
> 
> 赞同：1
> 
> 时间：2012-10-01T11:35:17.887
> 
> 标签：tomcat, hadoop, amazon-ec2, hbase

我不是 Hbase 专家，并且一直在研究 Hbase 远程连接的线程，但没有运气。

我在 EC2 实例（Ubuntu 10.4）上运行 Hbase/Hadoop 单集群。我还在另一个 ec 2 实例中的 tomcat6 服务器上运行 servlet。该计划是让 servlet 写入和读取远程 Hbase 实例。servlet 正在运行带有一些 java 例程 (ServletContextListener) 的上下文侦听器。

现在，如果我将 java 例程作为可运行的 jar 而不是 servlet 运行，一切都很好。它连接到 Hbase 并从表中写入/读取。但是在 tomcat6 上，它只是在尝试连接到 Hbase 实例时冻结。

```
2012-10-01 11:11:40,751 [Timer-4] INFO  com.myApp.foundation.access.HBaseHandler  initialise(..) - Initialisation HbaseHandler configuration ...
2012-10-01 11:11:40,763 [Timer-4] DEBUG org.apache.hadoop.conf.Configuration  <init>(..) - java.io.IOException: config()
    at org.apache.hadoop.conf.Configuration.<init>(Configuration.java:211)
    at org.apache.hadoop.conf.Configuration.<init>(Configuration.java:198)
    at org.apache.hadoop.hbase.HBaseConfiguration.<init>(HBaseConfiguration.java:33)
    at com.myApp.foundation.access.HBaseHandler.initialise(HBaseHandler.java:507)
    at com.myApp.foundation.access.HBaseHandler.<init>(HBaseHandler.java:53)
    at com.myApp.foundation.access.HBaseHandler.getInstance(HBaseHandler.java:500)
    at com.myApp.foundation.hbase.StorableRow.<clinit>(StorableRow.java:40)
    at com.myApp.foundation.entities.Article.storeToHbase(Article.java:257)
    at com.myApp.task.impl.HBaseArticlePersisterTask.process(HBaseArticlePersisterTask.java:101)
    at com.myApp.foundation.task.QueueTask.performTask(QueueTask.java:101)
    at com.myApp.runner.impl.HBasePersisterRunner$1.run(HBasePersisterRunner.java:46)
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462)

2012-10-01 11:11:40,803 [Timer-4] INFO  com.myApp.foundation.access.HBaseHandler  initialise(..) - Config resource zookeeper.quorum: ip-10-10-10-10.eu-west-1.compute.internal

2012-10-01 11:11:40,803 [Timer-4] INFO  com.myApp.foundation.access.HBaseHandler  initialise(..) - Config resource zookeeper.clientPort: 2181

2012-10-01 11:11:40,804 [Timer-4] INFO  com.myApp.foundation.access.HBaseHandler  initialise(..) - Config resource hbase.master.info.port: 60010

2012-10-01 11:11:40,804 [Timer-4] INFO  com.myApp.foundation.access.HBaseHandler  initialise(..) - Config resource hbase.master.info.bindAddress: ip-10-10-10-10.eu-west-1.compute.internal 
```

我可以远程登录 HBase 实例。在 servlet 中，我包含了 hbase-site.xml。但正如您从日志中看到的那样，zookkeeper.quorum 和端口号都被获取了。所有必要的端口都在 Hbase 实例上打开。

有些东西告诉我 tomcat6 策略配置是罪魁祸首。但我在 catalina 日志中看不到任何内容。有没有我遗漏的其他日志或可以引导我找到正确的日志？

有人遇到过同样的问题吗？

提前谢谢了。

# c# - 用鼠标画矩形

> ID：12672507
> 
> 赞同：3
> 
> 时间：2012-10-01T11:36:21.233
> 
> 标签：c#, winforms, drawing

有没有办法用起点和终点而不是起点和区域绘制矩形？我正在使用以下代码通过鼠标在表单上绘制矩形：

```
 System.Drawing.Graphics formGraphics;
    bool isDown = false;
    int initialX;
    int initialY;

    private void Form1_MouseDown(object sender, MouseEventArgs e)
    {
        isDown = true;
        initialX = e.X;
        initialY = e.Y;
    }

    private void Form1_MouseMove(object sender, MouseEventArgs e)
    {
        if (isDown == true)
        {
            this.Refresh();
            Pen drwaPen = new Pen(Color.Navy,1);
            int width = e.X - initialX, height = e.Y - initialY;
            //if (Math.Sign (width) == -1) width = width 
            //Rectangle rect = new Rectangle(initialPt.X, initialPt.Y, Cursor.Position.X - initialPt.X, Cursor.Position.Y - initialPt.Y);
            Rectangle rect = new Rectangle(initialX, initialY, width * Math.Sign(width), height * Math.Sign(height));

            formGraphics = this.CreateGraphics();
            formGraphics.DrawRectangle(drwaPen, rect);
        }
    }
    private void Form1_MouseUp(object sender, MouseEventArgs e)
    {
        isDown = false;
    } 
```

我可以使用此代码绘制矩形，当我将鼠标从其起点移回时，矩形应该是翻转的，但我的矩形不是这样做，而是继续在鼠标光标的相反方向上绘制。简而言之，此代码在向前方向绘制矩形时工作正常，但在向后方向上不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T11:47:05.947

正如 Jamiec 所提到`Invalidate`的，只需调用处理程序，并在方法/事件处理程序`MouseMove`中进行绘图`OnPaint``Paint`

要向前或向后绘制正确的矩形，请尝试以下操作：

```
Rectangle rect = new Rectangle(Math.Min(e.X, initialX), 
                               Math.Min(e.Y, initialY), 
                               Math.Abs(e.X - initialX), 
                               Math.Abs(e.Y - initialY)); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2018-08-19T14:39:34.940

试试这个：

```
private void Form1_MouseDown(object sender, MouseEventArgs e)
    {
        IsMouseDown = true; // If This Event Is Occured So This Variable Is True.

        LocationXY = e.Location; // Get The Starting Location Of Point X and Y.
    }

    private void Form1_MouseMove(object sender, MouseEventArgs e)
    {
        if (IsMouseDown == true) // This Block Is Not Execute Until Mouse Down Event Is Not a Fire.
        {
            LocationX1Y1 = e.Location; // Get The Current Location Of Point X and Y.

            Refresh(); // Refresh the form.
        }
    }

    private void Form1_MouseUp(object sender, MouseEventArgs e)
    {
        if(IsMouseDown == true) // This Block Is Not Execute Until Mouse Down Event Is Not a Fire.
        {
            LocationX1Y1 = e.Location; // Get The Ending Point of X and Y.

            IsMouseDown = false; // false this..
        }
    }

    private void Form1_Paint(object sender, PaintEventArgs e)
    {
        if (rect != null) // Check If Rectangle Is Not a null.
        {
            e.Graphics.DrawRectangle(Pens.Red, GetRect()); // GetRect() Is a Function, Now Creates this function.
        }
    }

    private Rectangle GetRect()
    {
    //Create Object Of rect. we define rect at TOP.
        rect = new Rectangle();

    //The x-value of our Rectangle should be the minimum between the start x-value and the current x-position.
        rect.X = Math.Min(LocationXY.X, LocationX1Y1.X);

    //same as above x-value. The y-value of our Rectangle should be the minimum between the start y-value and the current y-position.
        rect.Y = Math.Min(LocationXY.Y, LocationX1Y1.Y);

     //the width of our rectangle should be the maximum between the start x-position and current x-position MINUS.
        rect.Width = Math.Abs(LocationXY.X - LocationX1Y1.X); 

        rect.Height = Math.Abs(LocationXY.Y - LocationX1Y1.Y);

        return rect;
    } 
```

# dynamic - qTip 动态宽度

> ID：12672508
> 
> 赞同：5
> 
> 时间：2012-10-01T11:36:21.810
> 
> 标签：dynamic, width, fullcalendar, qtip

我目前正在将 qTip jQuery 插件与 Full Calendar 结合使用。这两个都很好用。但是，我目前陷入了一个问题。

有时，我的 qTip 内容包含大量数据。由于 qTip 工具提示的宽度和高度是固定的，这会被剪掉。有什么办法可以使宽度和高度动态化？

我发现最大宽度是 350 但这还不足以满足我的要求。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-04-19T15:06:36.593

如果您不想修改 qtip 源，只需将其添加到您的 css

```
.qtip { max-width: none !important; } 
```

有了这个 css hack，提示将适应你在里面写的内容。

如果您想放置固定尺寸，请将其更改为`none`您需要的尺寸（例如：500px）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-30T19:31:05.150

我所做的是创建自己的课程/风格。

在 HTML 页面中

```
jQuery("#tooltip").qtip({ 
    content: {    
         text : "tooltip", 
         title:{ text: "Row Information", button: 'Close'}
    }, 
    style: {classes: "MyQtip"},
    show: {solo: true},
    hide: false
}); 
```

在我的 CSS 中，我有

```
.MyQtip {max-width: 1000px} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-05T17:45:36.660

我遇到了同样的问题。

在 qtip.css 中，您可以更改 max-width ：

```
.qtip{
    max-width: 460px;
} 
```

每当您想使用它时：

```
var widthValue = '280px';
if ( someothercondition == true ) { widthValue = '480px'; }    

jQuery("#tooltip").qtip({ 
    content:{    
        text : "tooltip", 
        title:{ 
            text: "Row Information",
            button: 'Close'
        }
    }, 
    style: {
        width: widthValue 
    },
    show:{
        solo: true
    },
    hide: false
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-15T04:29:18.723

使用你自己的类：

```
$('#tip-wide').qtip({
  content: {
    text: "some very wide tooltip text"
  },
  style: {
    classes: 'my-qtip'
  }
}); 
```

现在在你的 CSS 中设置`max-width`（`.qtip.my-qtip`前缀`.qtip`是由于[特殊性](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity)）。我的演示在这里有`none`，但你选择你需要的：

```
/* .my-qtip was enough for me,
   but .qtip.my-qtip is more specific,
   and hence will override .qtip's value */
.qtip.my-qtip {
  max-width: none;
} 
```

有关现场演示，请参见[jsfiddle](http://jsfiddle.net/pmorch/2x20wx06/4/)。

# reporting-services - 参数是否可以具有来自不同数据集的值 SSRS 报表生成器

> ID：12672509
> 
> 赞同：1
> 
> 时间：2012-10-01T11:36:24.133
> 
> 标签：reporting-services, ssrs-2008, reportbuilder

我的**reportbuilder 3.0 中有 4 个数据集：**

*   粘合剂
*   雪松
*   被保险人
*   再保险公司

我不想为每个数据集创建 4 个参数，而是要创建 2 个参数，如下所示：

1.  **“生成方式”**的值是手动设置的“粘合剂”、“Cedent”、“被保险人”、“再保险人”。
2.  **"Second Field"**的值将基于**"Genereate By"**中设置的值：
    *   如果我选择**“Binder”**，第二个字段应该有来自**Binder dataset**的值。
    *   如果我选择**“Cedent”**，第二个字段应该有来自**Cedent Dataset**的值。
    *   等等

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:43:31.317

您不能这样做，因为将数据集值放入参数中的唯一方法是选中“从数据集中获取值”选项（当您设置新参数时），并且在本节中您必须选择一个数据集。

如果可以这样做，则必须从数据集中的字段中设置参数的值，但是当您尝试这样做时，该报表生成器会给您一个错误

![在此处输入图像描述](../Images/8677ea6ad4b10d5ac3265117539a5561.png)

你的目标是什么？想要达到什么目的？

也许有不同的方式来完成它

# ios - 如何使用 iOS 6 检查 iOS 5 应用程序

> ID：12672510
> 
> 赞同：0
> 
> 时间：2012-10-01T11:36:33.940
> 
> 标签：ios

我正在使用 iOS 5 开发 iOS 应用程序，现在我想使用 ios6 检查应用程序。我正在使用 xcode 4.2 和 iOS 5.1。我想用 iOS 6 模拟器检查我的应用程序。

如何做到这一点？有没有将 iOS 6 模拟器集成到 xcode 4.2 的选项？只有选项使用 xcode 4.5 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:48:44.243

iOS6 SDK 和 iOS6 模拟器仅包含在 Xcode 4.5 中，因此您必须将 Xcode 升级到最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T05:07:51.097

如果您只想“检查”，这是可行的。您将需要安装 Xcode 4.5（不升级，保留您的 4.2）。在 Xcode 4.2 中更改所有代码，您可以通过选择“Product > Perform Action > Run without Building”在 Xcode 4.5 中使用 iOS 6 模拟器运行您的应用程序。这也适用于 iPhone 5 模拟器。

# android - Spinner Dropdown CheckedTextView 自动滚动

> ID：12672511
> 
> 赞同：4
> 
> 时间：2012-10-01T11:36:42.397
> 
> 标签：android, spinner, android-spinner, checkedtextview

我正在尝试使用一个充满长字符串的 Spinner，它应该水平自动滚动。

所以我写了一个自定义适配器，它使用我自己的下拉布局：

布局：

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/text1"
style="?android:attr/spinnerDropDownItemStyle"
android:layout_width="match_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:ellipsize="marquee"
android:marqueeRepeatLimit="50"
android:singleLine="true" /> 
```

在我的适配器中，我覆盖了 getDropDownView 方法：

```
public View getDropDownView(int position, View convertView, ViewGroup parent) {
     if (convertView == null) {
            mInflater = LayoutInflater.from(this.getContext());
            convertView = mInflater.inflate(R.layout.scrolling_list_item, null);
    }

    return super.getDropDownView(position, convertView, parent);
} 
```

知道为什么我的 CheckedTextView 没有自动滚动就静止不动吗？

# c# - xmlns=''> 不是预期的。- XML 文档中存在错误 (2, 2)

> ID：12672512
> 
> 赞同：27
> 
> 时间：2012-10-01T11:36:45.960
> 
> 标签：c#, .net, xml, xml-serialization

我试图反序列化来自[这个简单 Web 服务的响应](http://inb374.jelastic.tsukaeru.net:8080/VodafoneDB/webresources/vodafone/04111111)

我使用以下代码：

```
WebRequest request = WebRequest.Create("http://inb374.jelastic.tsukaeru.net:8080/VodafoneDB/webresources/vodafone/04111111");    
WebResponse ws = request.GetResponse();
XmlSerializer s = new XmlSerializer(typeof(string));
string reponse = (string)s.Deserialize(ws.GetResponseStream()); 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-01T11:53:33.597

将 XmlSerializer 声明为

```
XmlSerializer s = new XmlSerializer(typeof(string),new XmlRootAttribute("response")); 
```

足够。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-01T11:39:09.637

您想要反序列化 XML 并将其视为片段。

[这里](http://www.calvinirwin.net/2011/02/10/xmlserialization-deserialize-causes-xmlns-was-not-expected/)有一个非常简单的解决方法。我已经根据您的情况对其进行了修改：

```
var webRequest = WebRequest.Create("http://inb374.jelastic.tsukaeru.net:8080/VodafoneDB/webresources/vodafone/04111111");

using (var webResponse = webRequest.GetResponse())
using (var responseStream = webResponse.GetResponseStream())
{
    var rootAttribute = new XmlRootAttribute();
    rootAttribute.ElementName = "response";
    rootAttribute.IsNullable = true;

    var xmlSerializer = new XmlSerializer(typeof (string), rootAttribute);
    var response = (string) xmlSerializer.Deserialize(responseStream);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-02T15:52:57.000

我在将“声明了 2 个命名空间的 xml 字符串”反序列化为对象时遇到了同样的错误。

```
<?xml version="1.0" encoding="utf-8"?>
<vcs-device:errorNotification xmlns:vcs-pos="http://abc" xmlns:vcs-device="http://def">
    <errorText>Can't get PAN</errorText>
</vcs-device:errorNotification> 
```

```
[XmlRoot(ElementName = "errorNotification", Namespace = "http://def")]
public class ErrorNotification
{
    [XmlAttribute(AttributeName = "vcs-pos", Namespace = "http://www.w3.org/2000/xmlns/")]
    public string VcsPosNamespace { get; set; }

    [XmlAttribute(AttributeName = "vcs-device", Namespace = "http://www.w3.org/2000/xmlns/")]
    public string VcsDeviceNamespace { get; set; }

    [XmlElement(ElementName = "errorText", Namespace = "")]
    public string ErrorText { get; set; }
} 
```

通过将带有**[XmlAttribute]**的字段添加到 ErrorNotification 类反序列化工作中。

```
public static T Deserialize<T>(string xml)
{
    var serializer = new XmlSerializer(typeof(T));
    using (TextReader reader = new StringReader(xml))
    {
        return (T)serializer.Deserialize(reader);
    }
}

var obj = Deserialize<ErrorNotification>(xml); 
```

# maven - 将 maven 2 升级到 maven 3

> ID：12672513
> 
> 赞同：0
> 
> 时间：2012-10-01T11:36:47.050
> 
> 标签：maven

当我升级 Maven 时，我遇到了属性插件的问题：

```
 <groupId>org.codehaus.mojo</groupId>
                    <artifactId>properties-maven-plugin</artifactId> 
```

在我的 pom 中，我定义了属性：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <artifactId>...</artifactId>
    <groupId>...</groupId>
    <packaging>war</packaging>
    <version>1.0.10-SNAPSHOT</version>
    <name>...</name>   

<properties>

    <!-- application -->
    <appname>appname1</appname>

</properties>

<build>
   ... // here I dont have properties plugin because I dont need them
<plugin>
                <artifactId>maven-war-plugin</artifactId>
                <configuration>
                    <warName>${appname}</warName> // here is stil name in pom
                    <webResources>
                        <resource>
                            <filtering>true</filtering>
                            <directory>src/main/webapp</directory>
                        </resource>
                    </webResources>
                </configuration>
            </plugin>
...
</build>

<profiles>      

    <profile>
        <id>config</id>
        <activation>
            <property>
                <name>config</name>
            </property>
        </activation>
        <properties>
            <config>${basedir}/../config/${config}/build.properties</config>
        </properties>
        <build>
            <plugins>                   
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>properties-maven-plugin</artifactId>
                    <version>1.0-alpha-2</version>
                    <executions>
                        <execution>
                            <phase>initialize</phase>
                            <goals>
                                <goal>read-project-properties</goal>
                            </goals>
                            <configuration>
                                <files>
                                    <file>${config}</file>
                                </files>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>                    
            </plugins>
        </build>
    </profile>

</profiles>

<dependencies>
...
</dependencies>

</project> 
```

然后我有个人资料：

```
<profile>
            <id>config</id>
            <activation>
                <property>
                    <name>config</name>
                </property>
            </activation>
            <properties>
                <konfig>${basedir}/../config/${config}/build.properties</konfig>
            </properties>
            <build>
                <plugins>                    
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>properties-maven-plugin</artifactId>
                        <version>1.0-alpha-2</version>
                        <executions>
                            <execution>
                                <phase>initialize</phase>
                                <goals>
                                    <goal>read-project-properties</goal>
                                </goals>
                                <configuration>
                                    <files>
                                        <file>${konfig}</file>
                                    </files>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>                    
                </plugins>
            </build>
        </profile> 
```

我可以在其中指定另一个具有属性的文件：

文件包含：

```
 appname=appname2 
```

所以逻辑是当我运行 mvn 时......没有配置文件属性是从 pom.xml 中获取的。如果使用配置文件，它应该使用配置文件中的属性。这适用于 maven 2，但 maven 3 仍然从 pom 获取属性。有没有办法解决它？

这里： http: [//mojo.codehaus.org/properties-maven-plugin/read-project-properties-mojo.html](http://mojo.codehaus.org/properties-maven-plugin/read-project-properties-mojo.html) 写的是：

属性：

```
Requires a Maven 2.0 project to be executed. 
```

这意味着maven 3不支持这个插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T20:00:42.997

When moving from Maven 2 to Maven 3 be careful because Maven 2 loads all dependencies at start-up and Maven 3 loads them on-demand. So builds that work in Maven 3 will break on build boxes running Maven 2\. Lesson learned.

# mongodb - MongoDB，如何将两个或多个数据库联合起来

> ID：12672525
> 
> 赞同：3
> 
> 时间：2012-10-01T11:37:24.680
> 
> 标签：mongodb, database-design

**到目前为止的故事**：首先，我们得到了一个 Web 应用程序和一个数据库。然后产品所有者决定对第一个应用程序进行分拆（如果第一个应用程序是服装网站，那么第二个网站是专门用于婴儿服装的网站）。我们为第二个应用创建了第二个数据库。之后是第三、第四、第 n 个。我可以证明这个决定是正确的，因为数据库的信息没有相交。

**现在**：产品负责人决定制作一个超级应用程序，一个应用程序来统治它们。常见故事：用户对某些产品进行查询，结果必须包含来自不同数据库的聚合数据（但不是全部，k from n）。

**问题**：是否有一些共同的模式可以解决摆在我们面前的常见问题？

**第一种方法**：超级数据库（所有数据库数据，复制到一个巨大的数据库）

*   *优点*：只需要一个查询；应用排序或其他过滤更容易
*   *缺点*：我们将如何区分项目的原始数据库；可能是一些ID冲突；必须对信息进行耗时且危险的复制；不会向后兼容旧应用程序

**第二种方法**：相同的数据库（无更改）

*   *优点*：应用程序将向后兼容；不会有危险的应对
*   *缺点*：一个查询变成多个查询（更慢，更难聚合）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:16:44.667

将这一切都放在多个数据库中很好，因为 MongoDB（当然）没有 JOIN，这里没有真正的聚合问题威胁。我想如果 10gen 释放聚合函数等中的子选择功能以允许某种类型的伪连接，您将来可能会遇到问题。

如果您要执行多个输出到同一个集合的 MR，但 MR 现在可以输出到不同的 DB（现在已经可用了一段时间），那么这里的 MR 可能存在一个问题，所以这很好。

同样对于多个数据库（在 2.2 中），由于 2.2 中的锁定机制是数据库级别的，因此锁定将在您身边。

在我个人看来，考虑到复制和冲突 ID 的问题，我会坚持你所拥有的，只是制作一个抽象层，让它看起来像是来自一个数据库。

当然，如果您觉得将其存放在不同的数据库中是一个真正的逻辑问题，并且您很容易混淆数据，那么您可能别无选择。

# for-loop - 切割相当于 dos 没有在 for 循环中工作

> ID：12672527
> 
> 赞同：0
> 
> 时间：2012-10-01T11:37:40.693
> 
> 标签：for-loop, substring, batch-file

切割相当于 dos 没有在 for 循环中工作

week_date.txt 的内容

```
18092012                                                                        
19092012                                                                        
20092012                                                                        
21092012                                                                        
22092012                                                                        
23092012                                                                        
24092012 
```

# 我正在运行批处理脚本并在以下部分面临变量值替换问题

```
for /f %%I in (weekly_date.txt) do ( 

echo %%I
set yy=%%I:~4,4%
set mm=%%I:~2,2%
set dd=%%I:~0,2%

echo %yy%

SET bp=/xx/yy/%mm%/%dd%
SET br=/aa/bb/%mm%/%dd%
SET TP=F:\xx\%yy%\%mm%\%dd%\yy

echo %bp%
echo %br%
echo %TP% )

done 
```

==================================================== =======================
然后在

```
SET bp=/xx/yy/%/%mm%/%dd%
SET br=/aa/bb/%/%mm%/%dd%
SET TP=F:\xx\%yy%\%mm%\%dd%\ff 
```

运行批处理脚本时，它以下列方式被替换

```
SET bp=/xx/yy/%i:~2,2/%i:~0,2  
SET br=/aa/bb/%i:~2,2/%i:~0,2  
SET TP=F:\xx\%i:~4,4\%i:~2,2\%i:~0,2\ff 
```

实际上输出必须是

/xx/yy/09/18 /aa/bb/09/18 F:\xx\2012\09\18\ff

/xx/yy/09/19 /aa/bb/09/19 F:\xx\2012\09\19\ff

…………

/xx/yy/09/24 /aa/bb/09/24 F:\xx\2012\09\24\ff

任何人都可以指出我哪里出错了吗？

在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:32:52.407

对于您的代码，我将进行两个主要更改：1）将 for 循环的输入设置为另一个变量（称为 var）以进行操作 2）启用延迟扩展，这允许在每次 for 循环迭代时操作变量。让我知道是否需要对我的代码进行任何其他更改 =]

我的代码如下：

```
@echo off
setLocal EnableDelayedExpansion

for /f %%I in (weekly_date.txt) do ( 
set var=%%I
set yy=!var:~4,4!
set mm=!var:~2,2!
set dd=!var:~0,2!

set bp=/xx/yy/!mm!/!dd!
set br=/aa/bb/!mm!/!dd!
set TP=F:\xx\!yy!\!mm!\!dd!\ff

echo !bp! !br! !TP!
)

endlocal 
```

* * *

使用您提供的相同的 week_dates.txt 输入，此代码的输出为：

```
/xx/yy/09/18 /aa/bb/09/18 F:\xx\2012\09\18\ff 
/xx/yy/09/19 /aa/bb/09/19 F:\xx\2012\09\19\ff 
/xx/yy/09/20 /aa/bb/09/20 F:\xx\2012\09\20\ff 
/xx/yy/09/21 /aa/bb/09/21 F:\xx\2012\09\21\ff 
/xx/yy/09/22 /aa/bb/09/22 F:\xx\2012\09\22\ff 
/xx/yy/09/23 /aa/bb/09/23 F:\xx\2012\09\23\ff 
/xx/yy/09/24 /aa/bb/09/24 F:\xx\2012\09\24\ff 
```

# matlab - 在每一行中获取不同的列

> ID：12672528
> 
> 赞同：7
> 
> 时间：2012-10-01T11:37:42.473
> 
> 标签：matlab, matrix, row

我想从矩阵的每一行中得到不同的列。例如：

```
A = [1,2;1,4;5,2]
B = [2;2;1] 
```

输出应产生：

```
out = [2;4;5] 
```

简而言之：`A`是矩阵，并且`B`具有每行列的索引。我怎样才能在不使用循环的情况下做到这一点（如果可能的话）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T12:02:58.817

您可以使用[sub2ind](http://www.mathworks.se/help/matlab/ref/sub2ind.html)将 (i,j) 索引转换为矩阵 A 中的线性索引

```
idx = sub2ind(size(A), 1:size(A, 1), B');
A(idx)

ans =

 2     4     5 
```

假设向量 B 的条目与 A 中的行数一样多，则该方法有效。在上面的 sub2ind 中，为每对后续行号 (1:size(A, 1)) 和 B 中给出的列号生成一个线性索引。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-01T12:03:43.650

你可以这样做`diag(A(:,B))`，但是有一个循环，但只是隐式的。我不知道如何在没有任何循环的情况下做到这一点。

# javascript - IntelliJ 远程 Javascript 调试配置是否允许缓存破坏？

> ID：12672531
> 
> 赞同：4
> 
> 时间：2012-10-01T11:37:56.663
> 
> 标签：javascript, intellij-idea, browser-cache

我知道如何从 javascript 中破坏缓存 - 将动态生成的虚拟查询参数添加到 URL。但是，我正在使用远程 Javascript 调试配置从 IntelliJ IDE 调试我的 Web 应用程序。我不知道如何在那里利用这种技术。

问题是 chrome 缓存了我的应用程序的 html 页面，我必须一直手动清除缓存 - 让我发疯。

我尝试添加一个静态查询参数，如“？bla=bla” - 没有骰子。Chrome 仍然会缓存它。

Chrome 确实有一个禁用缓存的选项 -[禁用 Chrome 缓存以进行网站开发](https://stackoverflow.com/questions/5690269/disabling-chrome-cache-for-website-development)，但它仅在调试工具面板打开时才有效 - 不好。

那么，绕过它的方法是什么？

谢谢。

# java - 以非阻塞方式处理文件上传

> ID：12672533
> 
> 赞同：0
> 
> 时间：2012-10-01T11:38:03.767
> 
> 标签：java, servlets, nonblocking, java-io, threadpoolexecutor

后台线程在[这里](https://stackoverflow.com/questions/12507233/looping-over-byte-channels)

只是为了明确目标 - 用户将上传一个大文件，并且必须立即重定向到另一个页面以进行不同的操作。**但是文件很大，从控制器的InputStream**读取需要时间。所以我不情愿地决定分叉一个新的线程来处理这个 I/O。代码如下：

控制器小服务程序

```
/**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse
     *      response)
     */
    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub

        System.out.println("In Controller.doPost(...)");

        TempModel tempModel = new TempModel();
        tempModel.uploadSegYFile(request, response);

        System.out.println("Forwarding to Accepted.jsp");

        /*try {
            Thread.sleep(1000 * 60);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }*/

        request.getRequestDispatcher("/jsp/Accepted.jsp").forward(request,
                response);
    } 
```

模型类

```
package com.model;

import java.io.IOException;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.Future;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.utils.ProcessUtils;

public class TempModel {

    public void uploadSegYFile(HttpServletRequest request,
            HttpServletResponse response) {
        // TODO Auto-generated method stub

        System.out.println("In TempModel.uploadSegYFile(...)");

        /*
         * Trigger the upload/processing code in a thread, return immediately
         * and notify when the thread completes
         */
        try {
            FileUploaderRunnable fileUploadRunnable = new FileUploaderRunnable(
                    request.getInputStream());

            /*
             * Future<FileUploaderRunnable> future = ProcessUtils.submitTask(
             * fileUploadRunnable, fileUploadRunnable);
             * 
             * FileUploaderRunnable processed = future.get();
             * 
             * System.out.println("Is file uploaded : " +
             * processed.isFileUploaded());
             */

            Thread uploadThread = new Thread(fileUploadRunnable);
            uploadThread.start();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } /*
         * catch (InterruptedException e) { // TODO Auto-generated catch block
         * e.printStackTrace(); } catch (ExecutionException e) { // TODO
         * Auto-generated catch block e.printStackTrace(); }
         */

        System.out.println("Returning from TempModel.uploadSegYFile(...)");
    }

} 
```

**可运行**的

 **```
package com.model;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.nio.ByteBuffer;
import java.nio.channels.Channels;
import java.nio.channels.ReadableByteChannel;

public class FileUploaderRunnable implements Runnable {

    private boolean isFileUploaded = false;
    private InputStream inputStream = null;

    public FileUploaderRunnable(InputStream inputStream) {
        // TODO Auto-generated constructor stub
        this.inputStream = inputStream;
    }

    public void run() {
        // TODO Auto-generated method stub

        /* Read from InputStream. If success, set isFileUploaded = true */
        System.out.println("Starting upload in a thread");

        File outputFile = new File("D:/06c01_output.seg");/*
                                                         * This will be changed
                                                         * later
                                                         */
        FileOutputStream fos;
        ReadableByteChannel readable = Channels.newChannel(inputStream);
        ByteBuffer buffer = ByteBuffer.allocate(1000000);

        try {

            fos = new FileOutputStream(outputFile);

            while (readable.read(buffer) != -1) {
                fos.write(buffer.array());
                buffer.clear();
            }

            fos.flush();
            fos.close();

            readable.close();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println("File upload thread completed");
    }

    public boolean isFileUploaded() {
        return isFileUploaded;
    }

} 
```

**我的疑问/疑问：**

1.  从 Servlet 手动生成线程在逻辑上对我来说是有意义的，但在编码方面让我感到害怕——容器毕竟不知道这些线程（我想是的！）
2.  当前代码给出了一个非常明显的异常 -**由于 doPost(...) 方法在 run() 方法完成之前返回，因此无法访问流**：

    ```
    In Controller.doPost(...)
    In TempModel.uploadSegYFile(...)
    Returning from TempModel.uploadSegYFile(...)
    Forwarding to Accepted.jsp
    Starting upload in a thread
    Exception in thread "Thread-4" java.lang.NullPointerException
        at org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:512)
        at org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:497)
        at org.apache.coyote.http11.InternalInputBuffer$InputStreamInputBuffer.doRead(InternalInputBuffer.java:559)
        at org.apache.coyote.http11.AbstractInputBuffer.doRead(AbstractInputBuffer.java:324)
        at org.apache.coyote.Request.doRead(Request.java:422)
        at org.apache.catalina.connector.InputBuffer.realReadBytes(InputBuffer.java:287)
        at org.apache.tomcat.util.buf.ByteChunk.substract(ByteChunk.java:407)
        at org.apache.catalina.connector.InputBuffer.read(InputBuffer.java:310)
        at org.apache.catalina.connector.CoyoteInputStream.read(CoyoteInputStream.java:202)
        at java.nio.channels.Channels$ReadableByteChannelImpl.read(Unknown Source)
        at com.model.FileUploaderRunnable.run(FileUploaderRunnable.java:39)
        at java.lang.Thread.run(Unknown Source) 
    ```

3.  请记住第 1 点，无论如何使用 Executor 框架对我有帮助吗？

    ```
    package com.utils;

    import java.util.concurrent.Future;
    import java.util.concurrent.ScheduledThreadPoolExecutor;

    public final class ProcessUtils {

        /* Ensure that no more than 2 uploads,processing req. are allowed */
        private static final ScheduledThreadPoolExecutor threadPoolExec = new ScheduledThreadPoolExecutor(
                2);

        public static <T> Future<T> submitTask(Runnable task, T result) {

            return threadPoolExec.submit(task, result);
        }
    } 
    ```

那么我应该如何确保**用户不会阻塞并且流仍然可以访问，以便可以从中读取（上传的）文件**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:44:52.217

实际上它没有。您正在尝试生成线程并读取 POST 请求的内容，并且您还试图将用户转发到具有相同请求对象的另一个页面。这会混淆 servlet 容器。

你可以

*   使用单独的框架上传表单和控制器
*   使用带有上传表单和单独控制器的弹出窗口
*   use AJAX to load next page in-place, while still upload the content in current page (let browser handle that for you)**

# python - python导入pymongo失败

> ID：12672534
> 
> 赞同：2
> 
> 时间：2012-10-01T11:38:05.780
> 
> 标签：python, macos, pymongo

我对 pymongo 有一些奇怪的事情 - 昨天我的代码工作得很好，到今天我在导入 pymongo 模块时遇到了一个错误（这个错误在 IDE 和解释器中都会弹出，并且使用 virtualenv）：

```
>>> import pymongo
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/Users/bohulenkov14/my_new_env/lib/python2.7/site-packages/pymongo/__init__.py", line 61, in <module>
from pymongo.connection import Connection
File "/Users/bohulenkov14/my_new_env/lib/python2.7/site-packages/pymongo/connection.py", line 44, in <module>
from bson.py3compat import b
File "/Users/bohulenkov14/my_new_env/lib/python2.7/site-packages/bson/__init__.py", line 33, in <module>
from bson.objectid import ObjectId
File "/Users/bohulenkov14/my_new_env/lib/python2.7/site-packages/bson/objectid.py", line 51, in <module>
class ObjectId(object):
File "/Users/bohulenkov14/my_new_env/lib/python2.7/site-packages/bson/objectid.py", line 58, in ObjectId
_machine_bytes = _machine_bytes()
File "/Users/bohulenkov14/my_new_env/lib/python2.7/site-packages/bson/objectid.py", line 47, in _machine_bytes
machine_hash.update(socket.gethostname().encode())
UnicodeDecodeError: 'ascii' codec can't decode byte 0xd0 in position 0: ordinal not in range(128) 
```

我的操作系统 - Mac OS X 版本 10.7.5。Pymongo 是使用 easy_install 安装的。

我对此的原因有一个猜测-我将Windows与mac os安装在同一驱动器上（安装了新兵训练营帮助），并且在重新打开mac之前我用资源管理器浏览了一些mac os目录。也许它会在任何地方更改一些编码，但我对此表示怀疑。我试过了有人知道pymongo或macos会发生什么，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T12:34:05.460

嗨 a 有同样的错误，但在 Windows 上。

当我写 import pymongo -> 我收到 unicodedecodeerror

我的解决方案：将 pc 的名称更改为英文，它是俄语（

# java - 读取 XML 值以填充 Java 变量

> ID：12672541
> 
> 赞同：2
> 
> 时间：2012-10-01T11:38:45.077
> 
> 标签：java, xml, xml-parsing, xml-serialization, xstream

我正在使用 xstream 将一些 XML 转换为 Java 对象。XML 模式具有以下格式：

```
<Objects>   
<Object Type="System.Tuning" >4456</Object> 
<Object Type="System.Lag" >7789</Object>    
</Objects> 
```

基本上，父对象标签可以有 n 个对象标签。为此，我对我的班级进行了这样的建模：

```
class ParentResponseObject {    
    List <ResponseObject>responseObjects = new ArrayList<ResponseObject>();
    public ParentResponseObject() {
        // TODO Auto-generated constructor stub
    }
}
class ResponseObject {
       String Type;
       String Value;
    public ResponseObject() {

    }
} 
```

最后我使用下面的代码来填充我的 java 类：

```
XStream s = new XStream(new DomDriver());
  s.alias("Objects", src.core.PowerShell.MyAgain.ParentResponseObject.class);
  s.alias("Object", src.core.PowerShell.MyAgain.ResponseObject.class);  
  s.useAttributeFor(src.core.PowerShell.MyAgain.ResponseObject.class, "Type");  
        s.addImplicitCollection(src.core.PowerShell.MyAgain.ParentResponseObject.class, "responseObjects");     
        ParentResponseObject gh =(ParentResponseObject)s.fromXML(k1); 
```

使用该`useAttribute`方法我能够读取对象类型的“类型”属性，但是如何读取 4456、7789 等标签中的值并将其填充到变量`ResponseObject`.value 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:05:50.853

您需要使用[`ToAttributedValueConverter`](http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/converters/extended/ToAttributedValueConverter.html). 使用 xstream 注释很容易做到这一点，如下所示：

```
@XStreamAlias("Object")
@XStreamConverter(value = ToAttributedValueConverter.class, strings = { "value" })
public class ResponseObject {

    @XStreamAlias("Type")
    private String type;

    private String value;

    public ResponseObject() {
    }

    public String getType() {
        return type;
    }

    public String getValue() {
        return value;
    }
} 
```

* * *

```
@XStreamAlias("Objects")
public class ParentResponseObject {

    @XStreamImplicit
    private final List <ResponseObject> responseObjects = new ArrayList<ResponseObject>();

    public ParentResponseObject() {
    }

    public List<ResponseObject> getResponseObjects() {
        return responseObjects;
    }
} 
```

**主要方法：**

```
XStream xStream = new XStream();
xStream.processAnnotations(ParentResponseObject.class);
ParentResponseObject parent = (ParentResponseObject)xStream.fromXML(file);
for (ResponseObject o : parent.getResponseObjects()) {
    System.out.println(o.getType() + ":" + o.getValue());
} 
```

# oop - 访问者设计模式中的循环依赖

> ID：12672543
> 
> 赞同：6
> 
> 时间：2012-10-01T11:38:56.377
> 
> 标签：oop, design-patterns, visitor-pattern

有没有办法在没有循环依赖的情况下实现访问者设计模式？我的意思是访问者需要一个对象来访问。并且被访问的对象需要访问者接受。最终两者相互依赖。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T12:08:04.847

又找到了！查看[非循环访客](http://www.objectmentor.com/resources/articles/acv.pdf)：

引用：

> 允许将新函数添加到现有的类层次结构中，而不会影响这些层次结构，也不会创建 GOF VISITOR 模式固有的麻烦的依赖循环。

# jquery - 使用jquery动态生成div、ul、li、标签组合

> ID：12672545
> 
> 赞同：0
> 
> 时间：2012-10-01T11:38:57.167
> 
> 标签：jquery

我的玉！ [https://lh4.googleusercontent.com/-hzRqciA1Tjs/UGmc39ijHuI/AAAAAAAAAFk/0XJzY0ZqU70/s720/App.jpg](https://lh4.googleusercontent.com/-hzRqciA1Tjs/UGmc39ijHuI/AAAAAAAAAFk/0XJzY0ZqU70/s720/App.jpg)

```
div(data-role='content')
   div(class='content-primary')
      ul(data-role="listview", data-split-theme='a',data-split-icon='gear')
         li(data-theme='a')
          a(href="")
            div(id='addClientDivId')
          a(href='#', data-icon='delete', title=' Delete ') 
```

我想使用 jquery 动态生成上面的翡翠内容。谁能帮我..？？？

由于我没有声誉，我已将图像截图上传到 picasa。请参阅截图。我已经尝试了下面给出的所有可能性，但无法获得截图上的效果。

回答：

我找到了我的查询的解决方案。

```
var newContent = '<div data-role="content" data-theme="a" class="content-primary">';
        newContent += '<ul data-role="listview" data-split-theme="a" data-inset="true" id="ulId">';
        newContent += '<li>';
        newContent += '<a href="">';
        newContent += '<h4></h4>';
        newContent += '<h5></h5>';
        newContent += '<a href="" , data-icon="delete">';
        newContent += '</a>';
        newContent += '</a>';
        newContent += '</li>';
        newContent += '</ul>';
        newContent += '</div>';
        $("#addClientDivId").append(newContent).trigger('create'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:02:13.887

您可以将每个标签构建为单独的 jQuery 对象：

```
var contentDiv = $('<div></div>').attr('data-role','content');
var contentPrimary = $('<div></div>').attr('class', 'content-primary');
var ul = $('<ul></ul>');
$(ul).attr('data-role', 'listview').attr('data-split-theme', 'a').attr('data-split-icon','gear'); 
```

然后将您的 li(s) 添加到您的 ul ..

```
for(..) {
   var li = $('<li></li>');
   var liContent = $('<a></a>').attr('href', 'a');
   // You can build the rest of your li content here.

   // Append the li content to the li
   $(li).append(liContent);

   // And then append the li to the ul
   $(ul).append(li);
} 
```

完成 ul 后，您可以编写其余部分。

```
$(contentPrimary).append(ul);
$(contentDiv).append(contentPrimary); 
```

然后将所有内容添加到 DOM 中，比如说在 body 内部

```
$('body').append(contentDiv); 
```

为了提高性能，您可以将整个结构构建为字符串（与 '+' 连接），然后将其添加到 DOM。

```
var contentDivAsString = '<div data-role="content">....</div>';
$('body').append($(contentDivAsString)); 
```

任何一种方法都行得通，只是第二种方法的性能更高，并且您将使用更少的对象来完成它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:41:04.307

你可以试试这个

```
var aMain=$('<a/>', {
    'text':'Delete',
    'href':'',
    'data-icon':'delete',
    'title':' Delete '
});
var acDivid=$('<div id="addClientDivId"></div>');
var a=$('<a href=""></a>');
var li=$('<li data-theme="a"></li>');
var ul=$('<ul />', {
   'data-role':'listview',
   'data-split-theme':'a',
   'data-split-icon':'gear'
});
var cP=$('<div class="content-primary"></div>');
var content=$('<div data-role="content"></div>');
$('body').append(content.append(cP.append(ul.append(li.append(a.append(acDivid.append(aMain))))))); 
```

[**演示**](http://jsbin.com/awaded/1/edit)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:43:57.890

只需将 html 保存在这样的字符串中：`content = "<div data-role='content'">[...]</div>`如果您只想将其添加到正文中`$("body").append(content)`

否则请查看有关选择器的文档：http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# java - 在 IntelliJ IDEA 的 Subversion 源代码控制下添加现有模块

> ID：12672548
> 
> 赞同：3
> 
> 时间：2012-10-01T11:39:09.303
> 
> 标签：java, android, svn, intellij-idea

我有许多模块可以很好地与“更改”选项卡配合使用，因为我在*创建它们的模块时*将它们添加到源代码控制之下。

*   但是，对于一个模块，我最初选择跳过在源代码控制下添加，现在我想使用“更改”选项卡来提交更改，并且与此类似，我无法找到一种方法来添加这个现有模块以使用SVN 插件。

*   浏览了 VCS 菜单，但我在那里找不到[“启用版本控制集成”](https://stackoverflow.com/questions/8724748/adding-git-support-to-existing-project-in-intellij-idea)

*   并且在“更改”选项卡本身下找不到位置

请注意，模块文件夹本身是使用 TortoiseSVN 从外部签出的，这与我在创建时与 Subversion 插件集成的其他模块完全相同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T12:03:15.457

`File`只需在|中设置映射 `Settings`| **版本控制**。

```
project directory <=> Subversion 
```

请注意，您可以在那里有多个映射。

# android - 如何在横向模式下设置画廊

> ID：12672553
> 
> 赞同：0
> 
> 时间：2012-10-01T11:39:24.363
> 
> 标签：android, android-gallery

我是 android 的新手。在我的应用程序库小部件中完全以纵向模式运行，但在横向模式下无法正确显示。在创建方法中，我在纵向和横向模式下使用 switch case。

我的代码如下。

```
public class ViewAppGalleryActivity extends Activity {
    // take an array of integer type and set its value
    Integer[] mImageIds = { R.drawable.gallery_photo_19, R.drawable.gallery_photo_20,
            R.drawable.gallery_photo_21, R.drawable.gallery_photo_22, R.drawable.gallery_photo_23,
            R.drawable.gallery_photo_24, R.drawable.gallery_photo_25,R.drawable.gallery_photo_15,R.drawable.gallery_photo_16,R.drawable.gallery_photo_18,
            R.drawable.gallery_photo_9,R.drawable.gallery_photo_10,R.drawable.gallery_photo_11,R.drawable.gallery_photo_12,R.drawable.gallery_photo_26,
            R.drawable.gallery_photo_27, R.drawable.gallery_photo_28,R.drawable.gallery_photo_29, R.drawable.gallery_photo_30
            };

    int lastOrientation = 0;
    private int imageWidth;
    private ImageView leftArrowImageView;
    private int selectedImagePosition = 0;
    private ImageView rightArrowImageView;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        switch (this.getResources().getConfiguration().orientation)
        {
        case Configuration.ORIENTATION_PORTRAIT:
            setContentView(R.layout.main);
            // take an instance of Gallery

             DisplayMetrics metrics = new DisplayMetrics();
             getWindowManager().getDefaultDisplay().getMetrics(metrics);

             final ExtendedGallery g = (ExtendedGallery)findViewById(R.id.gallery);
           //  g.setScrollingEnabled(false);
             MarginLayoutParams mlp = (MarginLayoutParams)g.getLayoutParams();
             mlp.setMargins(-(metrics.widthPixels/2 +60 ), mlp.topMargin,
                         mlp.rightMargin, mlp.bottomMargin);
            // set adapter to gallery calling ImageAdapter class
            g.setAdapter(new ImageAdapter(this, mImageIds));
            // set onItemClickListener on gallery Object

            g.setOnItemClickListener(new OnItemClickListener() {
                    public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    ImageView imgView=(ImageView)findViewById(R.id.imageView1);
                    imgView.setImageResource(mImageIds [position]);

                    // TODO Auto-generated method stub
                    // onItemClick show Message
                    //selectedImagePosition =position;
                    if (selectedImagePosition > 0 && selectedImagePosition <mImageIds.length - 3) {

                                        leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_enabled));
                                        rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_enabled));

                                       } 
                    else if (selectedImagePosition == 0)
                                       {

                                        leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_disabled));
                                        rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_enabled));
                                       }
                    else if (selectedImagePosition == mImageIds.length - 3 || selectedImagePosition == mImageIds.length - 2 || selectedImagePosition == mImageIds.length - 1) 
                                       {
                                        leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_enabled));
                                        rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_disabled));

                                       }

                                   }
                              });

            g.setOnItemSelectedListener(new OnItemSelectedListener() {

                public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

                    selectedImagePosition = pos;

                    if (selectedImagePosition > 0 && selectedImagePosition <mImageIds.length - 3) 
                                        {

                                        leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_enabled));
                                        rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_enabled));

                                        } 
                    else if (selectedImagePosition == 0) 
                                        {

                                        leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_disabled));
                                        rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_enabled));
                                        }
                    else if (selectedImagePosition == mImageIds.length - 3 || selectedImagePosition == mImageIds.length - 2 || selectedImagePosition == mImageIds.length - 1 )
                                        {
                                        leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_enabled));
                                        rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_disabled));

                                        }

                                }

                public void onNothingSelected(AdapterView<?> arg0) {
                    // TODO Auto-generated method stub

                                                                    }
                        });

            leftArrowImageView = (ImageView) findViewById(R.id.left_arrow_imageview);
            rightArrowImageView = (ImageView) findViewById(R.id.right_arrow_imageview);

            leftArrowImageView.setOnClickListener(new OnClickListener() {

                                                public void onClick(View v) {

                                                    if (selectedImagePosition > 2) {

                                                                                --selectedImagePosition;
                                                                                --selectedImagePosition;
                                                                                --selectedImagePosition;

                                                    }
                                                    else if(selectedImagePosition == 2)
                                                    {
                                                                            --selectedImagePosition;
                                                                            --selectedImagePosition;
                                                    }
                                                    else if(selectedImagePosition == 1)
                                                    {
                                                                            --selectedImagePosition;
                                                    }

                                                     g.setSelection(selectedImagePosition, false);
                                                    //g.scrollBy(20, 0);

                                                        //leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_disabled));

                                                }
                                            });

            rightArrowImageView.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                    if (selectedImagePosition < mImageIds.length-3 )
                                            {
                                                ++selectedImagePosition;
                                                ++selectedImagePosition;
                                                ++selectedImagePosition;
                                            }

                                            g.setSelection(selectedImagePosition, false);

                                            //rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_disabled));
                                        }
                                    });

          break;
        case   Configuration.ORIENTATION_LANDSCAPE:

            setContentView(R.layout.land);
             //setContentView(R.layout.main);
                // take an instance of Gallery

                 DisplayMetrics metrics1 = new DisplayMetrics();
                 getWindowManager().getDefaultDisplay().getMetrics(metrics1);

                 final ExtendedGallery g1 = (ExtendedGallery)findViewById(R.id.gallery);
               //  g.setScrollingEnabled(false);
                 MarginLayoutParams mlp1 = (MarginLayoutParams)g1.getLayoutParams();
                 mlp1.setMargins(-(metrics1.widthPixels/2 +60 ), mlp1.topMargin,
                             mlp1.rightMargin, mlp1.bottomMargin);
                // set adapter to gallery calling ImageAdapter class
                g1.setAdapter(new GalleryImageAdapter1(this, mImageIds));
                // set onItemClickListener on gallery Object

                g1.setOnItemClickListener(new OnItemClickListener() {
                        public void onItemClick(AdapterView<?> parent, View view,
                            int position, long id) {
                        ImageView imgView=(ImageView)findViewById(R.id.imageView1);
                        imgView.setImageResource(mImageIds [position]);

                        // TODO Auto-generated method stub
                        // onItemClick show Message
                        //selectedImagePosition =position;
                        if (selectedImagePosition > 0 && selectedImagePosition <mImageIds.length - 3) {

                                            leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_enabled));
                                            rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_enabled));

                                           } 
                        else if (selectedImagePosition == 0)
                                           {

                                            leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_disabled));
                                            rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_enabled));
                                           }
                        else if (selectedImagePosition == mImageIds.length - 3 || selectedImagePosition == mImageIds.length - 2 || selectedImagePosition == mImageIds.length - 1) 
                                           {
                                            leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_enabled));
                                            rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_disabled));

                                           }

                                       }
                                  });

                g1.setOnItemSelectedListener(new OnItemSelectedListener() {

                    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

                        selectedImagePosition = pos;

                        if (selectedImagePosition > 0 && selectedImagePosition <mImageIds.length - 3) 
                                            {

                                            leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_enabled));
                                            rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_enabled));

                                            } 
                        else if (selectedImagePosition == 0) 
                                            {

                                            leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_disabled));
                                            rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_enabled));
                                            }
                        else if (selectedImagePosition == mImageIds.length - 3 || selectedImagePosition == mImageIds.length - 2 || selectedImagePosition == mImageIds.length - 1 )
                                            {
                                            leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_enabled));
                                            rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_disabled));

                                            }

                                    }

                    public void onNothingSelected(AdapterView<?> arg0) {
                        // TODO Auto-generated method stub

                                                                        }
                            });

                leftArrowImageView = (ImageView) findViewById(R.id.left_arrow_imageview);
                rightArrowImageView = (ImageView) findViewById(R.id.right_arrow_imageview);

                leftArrowImageView.setOnClickListener(new OnClickListener() {

                                                    public void onClick(View v) {

                                                        if (selectedImagePosition > 2) {

                                                                                    --selectedImagePosition;
                                                                                    --selectedImagePosition;
                                                                                    --selectedImagePosition;

                                                        }
                                                        else if(selectedImagePosition == 2)
                                                        {
                                                                                --selectedImagePosition;
                                                                                --selectedImagePosition;
                                                        }
                                                        else if(selectedImagePosition == 1)
                                                        {
                                                                                --selectedImagePosition;
                                                        }

                                                         g1.setSelection(selectedImagePosition, false);
                                                        //g.scrollBy(20, 0);

                                                            //leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_disabled));

                                                    }
                                                });

                rightArrowImageView.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {

                        if (selectedImagePosition < mImageIds.length-3 )
                                                {
                                                    ++selectedImagePosition;
                                                    ++selectedImagePosition;
                                                    ++selectedImagePosition;
                                                }

                                                g1.setSelection(selectedImagePosition, false);

                                                //rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_disabled));
                                            }
                                        });

          break;

        default:
            try {
                throw new Exception("Unexpected orientation enumeration returned");
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
          break;
        }

                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:44:54.857

1.  在“res”目录下的 layout 和 layout-land 文件夹中创建 main.xml。
2.  确保您在横向上有不同的对齐方式以符合您的需要。
3.  Android系统将选择它的运行时间，它的方向正在改变。

# ios - Cocoa - 在“openURL”之后返回本机应用程序

> ID：12672556
> 
> 赞同：0
> 
> 时间：2012-10-01T11:39:42.907
> 
> 标签：ios, xcode, cocoa, call, openurl

我有一个应用程序，可以让我打电话给我的联系人。我使用以下代码来做到这一点：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:numberVar]]; 
```

拨打电话，但问题是当我完成通话时，ios 不会返回应用程序。反正有这样做吗？当用户单击“结束通话”时，ios 会返回应用程序。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:51:22.527

您想使用 IPC（进程间通信），这在 iOS 应用程序中有点奇怪：您需要在您的应用程序中注册一个协议处理程序，并在您显示的 HTML 页面中放置一个链接`openURL`。例如，您的链接可以以“myapp://”而不是“http://”之类的开头。

看这里：http: [//mobileorchard.com/apple-approved-iphone-inter-process-communication/](http://mobileorchard.com/apple-approved-iphone-inter-process-communication/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T09:24:15.557

这个怎么样？

```
UIWebView webView = [[UIWebView alloc] init]; 
NSURL *url = [NSURL URLWithString:@"numberVar"]; 
[webView loadRequest:[NSURLRequest requestWithURL:url]]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-10T10:04:19.017

使用此代码：[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"telprompt://10086"]];

它会带你回到应用程序。

# c++ - 间接实例化指针

> ID：12672559
> 
> 赞同：1
> 
> 时间：2012-10-01T11:39:50.377
> 
> 标签：c++

我有这样的事情：

```
int* a = NULL;
int* b = *a;

b = new int(5);
std::cout << *a;
std::cout << *b; 
```

我想实例化`a`，`b`所以`a`值为 5。这可能吗？

编辑：

实际代码是这样的 -

```
int* a = null; //Global variable
int* b = null; //Global variable

int* returnInt(int position)
{
    switch(position)
    {
      case 0:
         return a;
      case 1:
         return b;
     }
}

some other function -

int* c = returnInt(0); // Get Global a

if (c == null)
    c = new int(5); 
```

* * *

如果可能的话，我想以这种方式实例化全局变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:41:40.533

你需要一个参考：

```
int* b = NULL;
int*& a = b; 
```

`a`对其中一个或`b`将影响另一个的任何更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T11:42:22.977

```
int* a = NULL;
int* b = *a; //here you dereference a NULL pointer, undefined behavior. 
```

你需要

```
int* b = new int(5);
int*& a = b; //a is a reference to pointer to int, it is a synonym of b
std::cout << *a;
std::cout << *b; 
```

或者，`a`可以是对的参考`int`和同义词`*b`

```
int* b = new int(5);
int& a = *b; //a is a reference to int, it is a synonym of `*b`
std::cout << a;  //prints 5
std::cout << *b; //prints 5
a = 4;
std::cout << a;  //prints 4
std::cout << *b; //prints 4 
```

[有关详细信息，请参阅一本好的 C++ 书籍。](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

# python - Django，删除或重置对象但不从数据库中删除

> ID：12672564
> 
> 赞同：0
> 
> 时间：2012-10-01T11:40:27.283
> 
> 标签：python, django, object, django-models, instance

我正在使用 django，并且正在遍历不同键的列表，现在每个键我想将一些东西写入文件，所以我通过键获取对象。像：

```
for ids in Idlist:

    try:
        Loci = Locus.objects.get(Gen_ID=ids)

    except:
        #no locus info found
        pass
    try:    
        Itag = Itag_annotatie.objects.get(Gen_ID=ids)
    except:
        #no Itag info found
        pass
    try:
        Ncbi = NCBI.objects.get(Gen_ID=ids)
    except:
        #No NCBI info found
        pass

    writer.writerow([Itag.Gen_ID, Itag.Solyc, Ncbi.defname, Loci.Lociname]) 
```

（示例代码）如何在每个 writerow 之后清空对象？每个键都是不同的。（没有用 django 创建数据库，实现了我自己的数据库）

所以我想在 Python 中清空对象实例，但不要从数据库中删除信息

亨克斯

编辑：我想清空 Ncbi、Loci 和 Itag 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:56:20.193

首先，您的方法有误，

```
try:
    Loci = Locus.objects.get(Gen_ID=ids)

except:
    #no locus info found
    pass 
```

如果没有带有 的数据，则不会创建`Gen_ID=ids`您的变量（如果您之前没有对其进行初始化），因此，`Loci`

```
writer.writerow([Itag.Gen_ID, Itag.Solyc, NCBI.defname, Loci.Lociname]) 
```

将引发错误，因为`Loci`根本没有创建。

至于您的问题的答案，您可以将其设置为`None`

```
writer.writerow([Itag.Gen_ID, Itag.Solyc, NCBI.defname, Loci.Lociname])
Loci = None
Itag = None
NCBI = None 
```

但是，如果您的函数不返回任何记录，则将它们设置`None`为更好的方法`get`

```
for ids in Idlist:
    try:
        Loci = Locus.objects.get(Gen_ID=ids)
    except Locus.DoesNotExist:
        #no locus info found
        Loci = None
    try:    
        Itag = Itag_annotatie.objects.get(Gen_ID=ids)
    except Itag_annotatie.DoesNotExist:
        #no Itag info found
        Itag = None
    try:
        Ncbi = NCBI.objects.get(Gen_ID=ids)
    except NCBI.DoesNotExist:
        #No NCBI info found
        Ncbi = None

    if not Loci:
        continue # end this loop without doing anything else and start the next loop 
    writer.writerow([Itag.Gen_ID if Itag else '', 
                     Itag.Solyc  if Itag else '', 
                     Ncbi.defname if Ncbi else '', 
                     Loci.Lociname # can not be `None`
                   ]) 
```

编辑：通常，`Loci,`Itag `and`NCBI `will be set to new values if your database method get a record, otherwise they will set to`None`。

编辑2：我希望我理解正确。`continue`语句用于循环，让您结束当前循环并开始下一个循环（如果可用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:49:29.743

在你的地方，我会在一个单独的函数中为每个对象制作一个处理代码：

```
def write(ids):
    try:
        Loci = Locus.objects.get(Gen_ID=ids)
    except Locus.DoesNotExist:
        Loci = None
    try:    
        Itag = Itag_annotatie.objects.get(Gen_ID=ids)
    except Itag.DoesNotExist:
        Itag = None
    try:
        Ncbi = NCBI.objects.get(Gen_ID=ids)
    except Ncbi.DoesNotExist:
        Ncbi = None

    writer.writerow([Itag.Gen_ID if Itag else None, 
                     Itag.Solyc if Itag else None, 
                     Ncbi.defname if Ncbi else None, 
                     Loci.Lociname if Loci else None])

for ids in Idlist:
     write(ids) 
```

在这种情况下，变量是本地的，不需要重置。

* * *

另一个（更干净的）变体：

```
for ids in Idlist:
    Locis = Locus.objects.filter(Gen_ID=ids)[:1]
    Itags = Itag_annotatie.objects.filter(Gen_ID=ids)[:1]
    Ncbis = NCBI.objects.filter(Gen_ID=ids)[:1]
    writer.writerow([Itags[0].Gen_ID if Itags else None, 
                     Itags[0].Solyc if Itags else None, 
                     Ncbis[0].defname if Ncbis else None, 
                     Locis[0].Lociname if Locis else None]) 
```

如果未找到类似查询集，`Foobar.objects.filter(Gen_ID=ids)[:1]`将返回一个空列表，或者返回一个包含第一个匹配条目的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:49:39.977

您可以将它们设置`None`为 for 循环的开头：

```
for ids in Idlist:
    Loci = None
    Itag = None
    Ncbi = None  

    try:
        Loci = Locus.objects.get(Gen_ID=ids)

    except:
        #no locus info found
        pass
    ....
    #your for loop 
    ....
    # use attributes if objects found, else use ''
    writer.writerow([Itag.Gen_ID if Itag else '',
                   Itag.Solyc if Itag else '', 
                   Ncbi.defname if Ncbi else '', 
                   Loci.Lociname if Loci else '']) 
```

# java - Struts2排除模式不起作用

> ID：12672569
> 
> 赞同：2
> 
> 时间：2012-10-01T11:41:09.870
> 
> 标签：java, google-app-engine, file-upload, struts2

我将 struts2 用于基于 GAE 的应用程序。我有一个 servlet 来上传这样的文件 -

```
@Override
  protected void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
    try{
      ServletFileUpload upload = new ServletFileUpload();
      FileItemIterator it = upload.getItemIterator(req);
      while (it.hasNext()){
        FileItemStream item = it.next();
        if(item.isFormField()){
          System.out.println(item.getFieldName());
        }else {
          System.out.println(item.getFieldName()+" : "+item.getName());
        }
      }
    }catch (Exception e){

    }

  } 
```

在我的 struts.xml 中，我添加了排除模式，如下所示

```
<constant name="struts.action.excludePattern" value="/_ah/*,/upload/*"/> 
```

这是我的 web.xml 的片段

```
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    <init-param>
      <param-name>actionPackages</param-name>
      <param-value>com.tutorial.action</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
  </filter-mapping>

  <filter>
    <filter-name>sitemesh</filter-name>
    <filter-class>com.opensymphony.sitemesh.webapp.SiteMeshFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>sitemesh</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
  </filter-mapping>
  <servlet>
    <servlet-name>ImageUpload</servlet-name>
    <servlet-class>com.tutorial.servlet.ImageUploadServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ImageUpload</servlet-name>
    <url-pattern>/upload/file</url-pattern>
  </servlet-mapping> 
```

当我尝试上传文件时，它仍然会转到 struts 而不是我的 servlet。我该如何解决这个问题？我想通过 servlet 上传文件。

这是错误的堆栈跟踪-

```
Problem accessing /upload/file. Reason:

    java.rmi.server.UID is a restricted class. Please see the Google  App Engine developer's guide for more details.
Caused by:

java.lang.NoClassDefFoundError: java.rmi.server.UID is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
    at org.apache.commons.fileupload.disk.DiskFileItem.<clinit>(DiskFileItem.java:109)
    at org.apache.commons.fileupload.disk.DiskFileItemFactory.createItem(DiskFileItemFactory.java:199)
    at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:361)
    at org.apache.struts2.dispatcher.multipart.JakartaMultiPartRequest.parseRequest(JakartaMultiPartRequest.java:151)
    at org.apache.struts2.dispatcher.multipart.JakartaMultiPartRequest.processUpload(JakartaMultiPartRequest.java:90)
    at org.apache.struts2.dispatcher.multipart.JakartaMultiPartRequest.parse(JakartaMultiPartRequest.java:80)
    at org.apache.struts2.dispatcher.multipart.MultiPartRequestWrapper.<init>(MultiPartRequestWrapper.java:75)
    at org.apache.struts2.dispatcher.Dispatcher.wrapRequest(Dispatcher.java:753)
    at org.apache.struts2.dispatcher.ng.PrepareOperations.wrapRequest(PrepareOperations.java:140)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:83)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:176)
    at org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145)
    at org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)
    at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:394)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.googlecode.objectify.cache.AsyncCacheFilter.doFilter(AsyncCacheFilter.java:59)
    at com.googlecode.objectify.ObjectifyFilter.doFilter(ObjectifyFilter.java:49)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:370)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T20:31:26.977

像这样使用正则表达式样式：

```
<constant name="struts.action.excludePattern" value="/_ah/.*,/upload/.*"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:21:01.467

`struts.action.excludePattern`如果您真的想使用自定义 servlet，另一种方法是定义重定向到您的 servlet 的操作。

```
<action name="upload">
  <result>/upload_servlet</result>
</action> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:32:35.607

将您`<url-pattern>/*</url-pattern>`在 web.xml 中的 struts2 过滤器更改为您使用的特定扩展，即`<url-pattern>*.html</url-pattern>`

# iphone - IOS中的didFinishLaunchingWithOptions错误-objective-c应用程序开发

> ID：12672572
> 
> 赞同：0
> 
> 时间：2012-10-01T11:41:18.090
> 
> 标签：iphone, objective-c, ios, cordova

在我的“didFinishLaunchingWithOptions”函数中，我在最后给出以下行：-

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)];
    return [super application:application didFinishLaunchingWithOptions:launchOptions]; 
```

但它给出了以下警告：-

```
'NSObject' may not respond to 'application:didFinishLaunchingWithOptions' function 
```

当我构建它时，应用程序以“未捕获的异常错误”终止

任何人都可以提出为什么会这样。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:44:28.183

尝试

```
[self application:application didFinishLaunchingWithOptions:launchOptions]; 
```

像 NSObject 这样的基本对象不实现`didFinishLaunchingWithOptions:launchOptions`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:24:57.487

你应该在 didFinishLaunchingWithOptions:launchOptions 结束时返回 YES

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)];
return YES; 
```

# c# - 如何为 Windows 窗体制作正则表达式

> ID：12672575
> 
> 赞同：-3
> 
> 时间：2012-10-01T11:41:25.867
> 
> 标签：c#, regex, winforms

制作**Windows 窗体**并需要**验证**用户名，该用户名**的长度最少为 4 个字符，最多为 15 个字符。**它还将允许连字符和下划线以及中间的点，但不能在用户名的开头和结尾。一行中最多可以有一个连字符、一个下划线和一个点。它不应包含空格 **不允许使用的用户名示例：**

```
-aquib
_aquib
.aquibxyz
aquib.
99546521896   // should not allow only number. username should be alphanumeric or alphabetic
aquibxyz--qureshi
aquib__xyzqureshi
aquibqureshi-
aquib..qureshi
aquib_     // means no symbols will be there at end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:52:34.383

好吧，您可以为此制作一个正则表达式。从简单的要求开始：

```
/^[^\s._-]\S{2,13}[^\s._-]$/ 
```

这意味着'一个字符串应该从任何不是空白符号、点、连字符或下划线的字符开始，后跟不少于 2 个但不超过 13 个非空白字符，然后是任何不是空白符号、点、连字符或下划线'。

要使用其他要求来装饰它，请使用前瞻：

```
/^(?=[^-]*-?[^-]*$)(?=[^.][.]?[^.]*$)(?=[^_]*_?[^_]*$)[^\s._-]\S{2,13}[^\s._-]$/ 
```

我想这个模式很清楚：对于每个应该只遇到一次的符号，使用一个前瞻表示“匹配任意数量的不是选中的符号，然后是选中的符号（这是可选的），然后，同样，对于任意数量的未被选中的符号，然后是字符串的结尾'。

```
(?=[^s]*s?[^s]*$) 
```

最后一部分是检查字符串不应该只包含数字：

```
(?!\d+$) 
```

不过，我想知道为什么要使用单个正则表达式而不是一系列测试，这将更加灵活和可读。

# model-view-controller - 如何通过控制器在 ExtJS4 中重新加载视图？

> ID：12672576
> 
> 赞同：0
> 
> 时间：2012-10-01T11:41:26.667
> 
> 标签：model-view-controller, extjs, view, controller, extjs4

我有一个看法。控制器正在执行一些逻辑，我在视图中按下一些按钮（数据传递到服务器并且我们有一个回调）。

我需要通过控制器更新（重新加载？）视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:25:30.307

我不知道我是否理解，但是，如果您想在插入后重新加载网格，您需要这样做

> yourGrid.getView().refresh()

如果要在插入后重新加载商店，则需要执行以下操作：

> yourStore.load()

或通过网格

> yourGrid.getStore().load()

在 store.sync() 的成功或回调函数中

我希望我有所帮助

# android - 无论如何要在android中读取设备联系人列表

> ID：12672577
> 
> 赞同：1
> 
> 时间：2012-10-01T11:41:30.683
> 
> 标签：android, android-contacts

我正在尝试阅读电话联系人列表。我不想阅读 sim 联系人和同步联系人。我已经尝试了两三天来找到解决方案。

*   我可以阅读 sim 联系人
*   我可以阅读完整的电话联系人（包括电话、谷歌、sim 和 facebook）

我不需要 google 或 sim 或任何其他联系人。我只需要存储在手机联系人内存中的电话联系人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:02:24.750

以下代码可能会对您有所帮助。

```
ContactsContract.CommonDataKinds.Phone.NUMBER 
```

# repository - 是否有用于列出项目及其存储库的 Redmine 插件？

> ID：12672580
> 
> 赞同：1
> 
> 时间：2012-10-01T11:41:44.200
> 
> 标签：repository, redmine, projects

是否有`Redmine`用于列出项目及其存储库的插件？

`Settings`我有很多不经常使用的小项目，无需打开页面就可以查看他们使用的存储库。

# javascript - 用于更改日期的javascript自定义函数

> ID：12672582
> 
> 赞同：0
> 
> 时间：2012-10-01T11:41:50.793
> 
> 标签：javascript, function, date

我对自己完成的自定义功能有疑问。

事实上它不起作用，我真的不知道为什么。

这是功能：

```
<script type="text/javascript">
function lz(x){
    return x.toString().replace(/^(\d)$/,'0$1')
}
function dayplus(){
  var items = document.getElementsByClassName("datepicker hasDatepicker");
  for (var i = 0; i < items.length; i++){
    if (items[i].getAttribute('required')){
      var itemDtParts = items[i].value.split("-");
      var itemDt  = new Date(parseInt(itemDtParts[2],10), parseInt(itemDtParts[1],10)-1, parseInt(itemDtParts[0],10)+ +nb);
      items[i].value = lz(itemDt.getDate())+"-"+lz(itemDt.getMonth()+1)+"-"+itemDt.getFullYear();
    }
  }
}
​&lt;/script> 
```

它对我说：

```
Uncaught SyntaxError: Unexpected token ILLEGAL addday.html:20 
```

此外，它对我说该函数未定义或不是这种情况。

下面是我在函数中使用的形式：

```
<input type="text" class="datepicker hasDatepicker" required value="26-10-2012">

<input type="button" value="( - )" width="22" height="22" onClick="subday()" />
                  <input name="jours" type="text" value="" size="5" id="nb" />
                  <input type="button" value="( + )" width="22" height="22" onClick="dayplus()"  />​​​​​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:50:00.237

[我在这里](http://jsfiddle.net/d8mdb/)做了一个小提琴

我注意到的第一件事是你的标记看起来很奇怪。难道不应该

```
<input type="text" class="datepicker hasDatepicker" required="true" value="26-10-2012"> 
```

代替

```
<input type="text" class="datepicker hasDatepicker" required value="26-10-2012"> 
```

第二件事是无效的语法，正如 enhzflep 和 Kimo_do 指出的那样，`nb`没有定义和`+ + nb`. 我把它换成`1`了小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:59:11.190

`,10)+ +nb);`应该`,10)+ nb);`是吧？或者`,10)+ (+nb) );`如果 nb 可能是负数。也就是说 - 它看起来像一个附加的+。仔细观察，我还想知道您的意思是 nb.value 还是简写：document.getElementById('nb').value？

或在代码中：

```
var itemDt  = new Date(parseInt(itemDtParts[2],10), parseInt(itemDtParts[1],10)-1, parseInt(itemDtParts[0],10) + document.getElementById('nb').value) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:06:18.963

修改代码：[jsfiddle](http://jsfiddle.net/zyP6X/)。更改：`nb`丢失，您`+ +`用于添加`nb`

```
<input type="text" class="datepicker hasDatepicker" required=true value="26-10-2012">

<input type="button" value="( - )" width="22" height="22" onClick="subday()" />
                  <input name="jours" type="text" value="" size="5" id="nb" />
<input type="button" value="( + )" width="22" height="22" onClick="dayplus()"  />

<script type="text/javascript">
function lz(x){
     return x.toString().replace(/^(\d)$/,'0$1');
}
function dayplus(){
  var items = document.getElementsByClassName("datepicker hasDatepicker");
     nb = 1;
  for (var i = 0; i < items.length; i++){
    if (items[i].getAttribute('required')){
      var itemDtParts = items[i].value.split("-");

      var itemDt  = new Date(itemDtParts[2], parseInt(itemDtParts[1] ,10)-1, parseInt(itemDtParts[0],10) +nb);

      items[i].value = lz(itemDt.getDate())+"-"+lz(itemDt.getMonth()+1)+"-"+itemDt.getFullYear();

    }
  }
}
</script> 
```

# android - android.app.Application 单例实例被重新创建

> ID：12672584
> 
> 赞同：2
> 
> 时间：2012-10-01T11:42:02.347
> 
> 标签：android

我正在使用`android.app.Application`创建单个实例。出于某种原因，我看到 Android 杀死了我`Instance`并重新创建（调用`onCreate`）。我怎样才能阻止这种情况发生？我尝试添加日志`onTerminate`，`onLowMemory`但在`Instance`被杀死之前没有一个会被调用。

请指教。

```
public class Instance extends Application {
  @Override
  public void onCreate() {
    super.onCreate();
  }

  @Override
    public void onTerminate() {
        super.onTerminate();
        Log.e(TAG, "onTerminate");
    }

    @Override
    public void onLowMemory() {
        super.onLowMemory();
            Log.e(TAG, "onLowMemory");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:00:04.997

> 出于某种原因，我看到 Android 杀死了我的实例并重新创建（调用 onCreate）

这完全是 Android 操作系统中的预期行为。如果您需要smth 来跟踪某个应用程序的状态，那么您需要使用一些持久性手段：文件存储、共享首选项或ContentProvider。更多细节在这里：[https ://stackoverflow.com/a/4642069/247013](https://stackoverflow.com/a/4642069/247013)

# python - 如何从 Django 中的 GET 请求中反序列化 JSON 字符串？

> ID：12672585
> 
> 赞同：-1
> 
> 时间：2012-10-01T11:42:09.327
> 
> 标签：python, django, json, deserialization

我觉得我错过了一些非常明显的东西，但我看不到它。

在 ipython (Python 2.7) 中，这有效：

```
In [1]: json.loads('[]')
Out[1]: [] 
```

我正在尝试在 Django 视图中做等效的最小示例，以说服自己在转到真实数据结构之前可以阅读 JSON：

```
def submit(request):
    json_string = request.GET['json']
    parsed = json.loads(json_string)

    return HttpResponse(parsed) 
```

我通过浏览器调用它

```
http://localhost:8001/submit/?json='[]' 
```

我明白了`ValueError: No JSON object could be decoded`。

我做错了什么，我该如何调试它？这是某种编码问题吗？还是我错误地访问了 GET 的内容？或者是其他东西？

我尝试将变量转储`json_string`到文件和作为 HttpResponse。两次我都得到了，这*看起来*`'[]'`确实不错...

 **编辑：*

为了方便其他想了解如何调试 POST 的初学者，Django 的错误页面在异常中返回。一个快速而讨厌的 hack 是

```
import os
def debug_post(post_req):

    result = None
    try:
        result = submit_to_endpoint(post_req)
    except urllib2.URLError as e:
        out_fh = open('debug_post.tmp', 'w')
        out_fh.write(e.read())
        out_fh.close()
        os.system('firefox ' + 'debug.tmp')

    return result 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:44:18.387

您已在 JSON 字符串中包含单引号。没有必要这样做，尤其是单引号在 JSON 中无效。你应该去`http://localhost:8001/submit/?json=[]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T13:34:04.633

尽管即使出于测试目的 GET 似乎更容易，但对于 JSON，您应该使用 POST 请求。这在请求改变应用程序内部状态的情况下非常重要。例如`/localhost/format/?json={disk_id : 1}`，改变应用程序状态的东西 :) 通常搜索引擎会索引网站的链接，这些链接是 GET 请求。想象一下这样的链接被搜索引擎索引：即使在索引过程中，应用程序的内部状态也可以改变。

另一个原因是 Web 服务器、代理和浏览器实现的 URLS 缓存。猜猜看，GET 请求的响应通常会被缓存。

最后但并非最不重要的一点是，GET 请求参数应该只是在[查询字符串中](http://en.wikipedia.org/wiki/Query_string)

```
localhost?key1=val1&key2=val2 
```

格式，其中`val's`是单值数据字段，而不是 JSON 数据。

所以，原因在于 HTTP 协议设计。您可以利用例如 AJAX 技术来发布 JSON 数据，这足以避免上述所有情况。

我建议您熟悉[RESTful](http://en.wikipedia.org/wiki/REST#RESTful_web_services) Web 服务的概念——一个简单而强大的设计用户到 Web 应用程序通信的概念。*

# mfcc - 使用 ActiveX 控件时调试断言失败

> ID：12672586
> 
> 赞同：1
> 
> 时间：2012-10-01T11:42:12.703
> 
> 标签：mfcc

我是这个论坛和 MFC 的新手……调试断言失败

在使用 ActiveX 控件时。请指导我这个..我的代码看起来

像这样：

```
//CMyProjectDlg.h
class CMyProjectDlg: public CDialog
{
public:
CMyProject(CWnd* pParent = NULL);
enum { IDD = IDD_CMYPROJECT_DIALOG };
CMiDocView  m_MIDOCtrl;
//Here CMiDocView is the class defined in other header file

protected:
BOOL  bReadOCRByMODIAXCtrl(CString csFilePath,  CString &csText);

};

//CMyProjectDlg.cpp
BOOL CMyProjectDlg::bReadOCRByMODIAXCtrl(CString csFilePath, CString &csText)
{
BOOL bRet  = TRUE;
HRESULT hr = 0;
csText.Empty();

IUnknown   *pVal    = NULL;
IDocument  *IDobj   = NULL;
ILayout    *ILayout = NULL;
IImages    *IImages = NULL;
IImage     *IImage  = NULL;
IWords     *IWords  = NULL;
IWord      *IWord   = NULL;

try{
pVal = (IUnknown *) m_MIDOCtrl.GetDocument();

//After Executing this statement, I used to Debug Assertion failed...

if ( pVal != NULL )
{
hr = pVal->QueryInterface(IID_IDocument,(void**) &IDobj);
if ( SUCCEEDED(hr) )
{
hr = IDobj->OCR(miLANG_SYSDEFAULT,1,1);
if ( SUCCEEDED(hr) )
{
IDobj->get_Images(&IImages);
long iImageCount=0;
IImages->get_Count(&iImageCount);
for ( int img =0; img<iImageCount;img++)
{
IImages->get_Item(img,(IDispatch**)&IImage);
 IImage->get_Layout(&ILayout);
long numWord=0;
ILayout->get_NumWords(&numWord);
ILayout->get_Words(&IWords);
IWords->get_Count(&numWord);

for ( long i=0; i<numWord;i++)
 {
IWords->get_Item(i,(IDispatch**)&IWord);
CString csTemp;
BSTR result;
IWord->get_Text(&result);
char buf[256];
sprintf(buf,"%S",result);
csTemp.Format("%s",buf);
csText += csTemp;
csText +=" ";

//Release all objects
IWord->Release();
IWords->Release();
ILayout->Release();
IImage->Release();
}
IImages->Release();
} else {
bRet = FALSE;
}
} else {
bRet = FALSE;
}
IDobj->Close(0);
 IDobj->Release();
pVal->Release();
} else {
bRet = FALSE;
}
pVal    = NULL;
IDobj   = NULL;
ILayout = NULL;
IImages = NULL;
IImage  = NULL;
IWords  = NULL;
IWord   = NULL;
}
catch(...)
{
}

 return bRet;
}

 void CMyProjectDlg::OnBnClickedOCR()
 {
  //Dynamic object creation:
 CMyProjectDlg *ob = new CMyProjectDlg;

 ((CMiDocView *)GetDlgItem(IDC_MIDOCVIEW1))->SetFileName("E:\\aaa.tiff");

 //IDC_MIDOCVIEW is the ID for the ActiveX control..

 ((CMiDocView *) GetDlgItem( IDC_MIDOCVIEW1 ))->SetFitMode(1);

 CString cs;
 ob->bReadOCRByMODIAXCtrl("E:\\aaa.tiff",cs);

 //Release the memory:
 delete ob;

 } 
```

点击OCR按钮后，我用Debug assertion failed就行了： pVal = (IUnknown *) m_MIDOCtrl.GetDocument(); 当我按下重试时，控件转到 winocc.cpp 中的 ASSERT(m_pCtrlsite != NULL)，而调试时我知道 {CMIDOCView hWnd = 0x0000000}。

请任何人都可以建议我在这里做错了什么？

谢谢你们..

# jquery - 将 var 发送到 Jquery 函数的按钮

> ID：12672588
> 
> 赞同：0
> 
> 时间：2012-10-01T11:42:19.770
> 
> 标签：jquery, function, button, call, conditional-statements

我试图让这段代码工作，但我一定是在某个地方错了。我有一个带有几个按钮的菜单。每个 Button 都有一个正确的 ID 和不同的 var。

如果你点击一个按钮，它的 var 被发送到我的“ChangePage”函数

在我的 ChangePage 函数中，有几个条件，如果它们匹配，那么它会在我的页面上启动动画。

这就是结构。

所以我现在正在测试这个东西：

我有 2 个按钮。

```
$(function() {

//This button triggers the slider   
$('#AddSliderButton').click(function() {
        var AddSlider = 1;
        $(this).click(PageChange);
    });

//This button removes the slider
$('#RemSliderButton').click(function() {
        var AddSlider = 0;
        $(this).click(PageChange);
    });

function PageChange() {
var Slider = 0;   //the slider is not opened by default

if (Slider == 1 && AddSlider == 0) { 
    //Remove slider
    $(".donotshow").fadeOut("slow");
    $("#slider").animate( {"height": "0%"}, "slow");
    $("#wrap-slider").css({"display": "inline"});
    var Slider = 0;
} 
else if (Slider == 0 && AddSlider == 1) {
    //Trigger Slider
    $("#wrap-slider").css({"display": "inline"});
    $(".donotshow").fadeIn("slow");
    $("#slider").animate( {"height": "100%"}, "slow");
    var Slider = 1;
}
else {
    //Do Nothing
    var Slider = 0;
}
}
}); 
```

我想知道为什么我的按钮不调用 PageChange 函数？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:48:41.023

```
$('#AddSliderButton').click(function() {
    var AddSlider = 1;
    PageChange(AddSlider);
});

function PageChange(AddSlider) {
var Slider = 0;   //the slider is not opened by default

if (Slider == 1 && AddSlider == 0) { 
//Remove slider
$(".donotshow").fadeOut("slow");
$("#slider").animate( {"height": "0%"}, "slow");
$("#wrap-slider").css({"display": "inline"});
var Slider = 0;
} 
else if (Slider == 0 && AddSlider == 1) {
//Trigger Slider
$("#wrap-slider").css({"display": "inline"});
$(".donotshow").fadeIn("slow");
$("#slider").animate( {"height": "100%"}, "slow");
var Slider = 1;
}
else {
//Do Nothing
var Slider = 0;
}
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:50:00.883

换个试试

```
$(this).click(PageChange); 
```

为了

```
PageChange(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:50:29.823

试着打电话

```
PageChange() 
```

代替

```
$(this).click(PageChange); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T11:51:00.657

您可以将`AddSlider`&定义`Slider`为全局变量。

```
$(function() {

var AddSlider;
var Slider = 0;

//This button triggers the slider   
$('#AddSliderButton').click(function() {
        AddSlider = 1;
        PageChange();
    });

//This button removes the slider
$('#RemSliderButton').click(function() {
        AddSlider = 0;
        PageChange();
    });

function PageChange() {

   if (Slider == 1 && AddSlider == 0) { 
    //Remove slider
    $(".donotshow").fadeOut("slow");
    $("#slider").animate( {"height": "0%"}, "slow");
    $("#wrap-slider").css({"display": "inline"});
    Slider = 0;
   } 
   else if (Slider == 0 && AddSlider == 1) {
    //Trigger Slider
    $("#wrap-slider").css({"display": "inline"});
    $(".donotshow").fadeIn("slow");
    $("#slider").animate( {"height": "100%"}, "slow");
    Slider = 1;
   }
   else {
    //Do Nothing
    Slider = 0;
   }
 }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T11:45:05.150

尝试像这样调用你的函数：

```
$('#AddSliderButton').click(function() {
        var AddSlider = 1;
        PageChange();
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T11:46:07.320

`$(this).click(PageChange);`正在添加另一个单击处理程序，因此第二次单击按钮时，`PageChange`应执行例程。

试试这个：

```
$('#AddSliderButton').click(function () {
    var AddSlider = 1;
    PageChange();
});

$('#RemSliderButton').click(function () {
    var AddSlider = 0;
    PageChange();
}); 
```

# c# - 将无尽的 IP 摄像机流保存到文件

> ID：12672589
> 
> 赞同：0
> 
> 时间：2012-10-01T11:42:21.690
> 
> 标签：c#, video-capture

我正在开发一个网络项目，用户必须能够使用 IP 摄像头（Mobotix 摄像头）录制视频。我提出了几个想法，但没有一个真正奏效。因为我无法在客户端 PC 上安装任何软件，所以我想出了将录音保存在服务器上的想法。所以用户在他的浏览器中打开一个页面，在请求中，服务器打开一个对摄像头的请求（使用摄像头通过HTTP提供的内置流：http:///cgi-bin/faststream.jpg？ stream=full&fps=1.0 ），并使用以下代码将流保存到服务器：

```
 public ActionResult Index()
   {

        WebClient webClient = new WebClient();
        webClient.Credentials = new NetworkCredential("Username", "Password");

        var url = "http://<ip-camera>/cgi-bin/faststream.jpg?params";

        // Download the file and write it to disk
        using (Stream webStream = webClient.OpenRead(url))
        using (FileStream fileStream = new FileStream(outputFile, FileMode.Create))
        {
            var buffer = new byte[32768];
            int bytesRead;
            Int64 bytesReadComplete = 0;  // Use Int64 for files larger than 2 gb

            // Get the size of the file to download
            Int64 bytesTotal = Convert.ToInt64(webClient.ResponseHeaders["Content-Length"]);

            // Download file in chunks
            while ((bytesRead = webStream.Read(buffer, 0, buffer.Length)) > 0)
            {
                bytesReadComplete += bytesRead;
                fileStream.Write(buffer, 0, bytesRead);                    
            }

        }
 } 
```

因为来自相机的流是无穷无尽的，所以请求也是无穷无尽的。当用户停止请求时，记录也应该停止。

上面的设置工作，虽然有一些问题。似乎流首先存储在服务器的内存中，并且仅在请求停止后才保存。我认为这会给大型视频带来问题。有没有办法立即保存视频？

此外，似乎存在用户停止请求但服务器继续录制视频的问题。有没有办法确保请求停止？

我知道这个解决方案远非理想。我一直在寻找最好的解决方案，但到目前为止我还没有找到它。我只是希望我能让这个工作。无论如何谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:22:03.740

请求正在服务器中同步处理。这意味着处理请求的 Web 服务器线程将发出另一个请求以获取视频流（使用 Web 客户端），并在读取流时继续运行。即使用户取消了请求，Web 服务器线程也会继续运行。

我会将记录功能与表示层（网页）分开。我会使用 Windows 服务来处理流和网页以将录制命令发送到 Windows 服务。您可以使用队列轻松实现网页和 Windows 服务之间的通信以存储命令（db 表、Windows azure 队列等）。

Windows 服务将循环读取队列（在单独的线程上）并向处理流的线程发出信号，以便它可以停止记录。

# wcf - 使用 PerWcfOperation 生活方式注册组件（使用配置文件）

> ID：12672592
> 
> 赞同：2
> 
> 时间：2012-10-01T11:42:24.763
> 
> 标签：wcf, castle-windsor

如何使用 PerWcfOperation 生活方式在 Castle Windsor 3.0 中注册组件？我只能找到在代码中注册组件的示例。

这是我的配置：

```
<castle>
  <facilities>
    <facility id="wcf"
              type="Castle.Facilities.WcfIntegration.WcfFacility, Castle.Facilities.WcfIntegration" />
  </facilities>
  <components>
    <component id="Settings"
               service="SomeNamespace.IApplicationSettings, SomeAssembly"
               type="SomeOtherNamespace.ApplicationSettings, SomeOtherAssembly"
               lifestyle="PerWcfOperation" />
  </components>
</castle> 
```

当我尝试按照上面的配置进行操作时，我得到 ConvertException 'Could not convert from 'PerWcfOperation' to Castle.Core.LifestyleType.'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:56:02.657

不支持它，因为 XML 配置被认为是旧的。

请改用代码中的配置。

XML 和代码通常大部分是等效的（在可能的情况下），尽管这种情况是一个例外 - 目前没有办法在 XML 中指定范围生活方式（这就是每个 wcf 操作的生活方式）。

显然，这并不意味着没有办法让它发挥作用。通过一个简单`IContributeComponentModelConstruction`的方法，您可以在几个 LOC 中实现对它的支持。

# android - android中的直播电视频道

> ID：12672596
> 
> 赞同：5
> 
> 时间：2012-10-01T11:42:44.177
> 
> 标签：android, live-streaming

你好我是新的安卓开发者。而且我不知道直播印地语电视频道。我在网上找到但没有得到完美的想法。

任何人都可以给我关于android如何与实时流媒体频道一起工作的想法。

提前致谢。酒窝

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:54:12.953

您可以为此使用 VideoView。尝试以下操作：

```
String LINK = "type_here_the_link";
setContentView(R.layout.mediaplayer);
VideoView videoView = (VideoView) findViewById(R.id.video);
MediaController mc = new MediaController(this);
mc.setAnchorView(videoView);
mc.setMediaPlayer(videoView);
Uri video = Uri.parse(LINK);
videoView.setMediaController(mc);
videoView.setVideoURI(video);
videoView.start(); 
```

有关更多信息，请参阅：[如何从 url 播放视频](https://stackoverflow.com/questions/2620049/how-to-play-video-from-url)

# grails - Grails 项目不会自动重新加载

> ID：12672600
> 
> 赞同：0
> 
> 时间：2012-10-01T11:43:11.067
> 
> 标签：grails

我有一个更大的 Grails 项目，我已经接管了该项目的开发。我以前使用过 Grails，我发现非常好的功能之一是开发时的自动编译/重新加载。

过去我不需要做任何特别的事情来完成这项工作，但是由于某种原因，它没有为这个项目触发。

我做了一个简单的“grails run-app”并在服务器启动时修改一个文件 - 什么都没有！有什么建议么？

Windows 7、Grails 2.0.1、Java 1.6u35

IDE：Groovy Grails Tool Suite 3.1.0.M1 - 基于 Eclipse Juno 4.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T21:22:59.850

你在用`eventCompileStart`吗`scripts/_Events.groovy`？那是我的问题，请参阅[GRAILS-8776](http://jira.grails.org/browse/GRAILS-8776)（如果这是您的问题，请对此问题发表评论并投票，以便我们解决它！）。

注释掉该块会导致自动重新加载重新开始为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-07T12:30:51.207

我的解决方案：

右键单击项目 -> 属性 -> 项目方面 -> 检查**Java**并设置它的正确版本 -> 确定

答对了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:41:05.543

Grails 命令行似乎无法正确处理 GRAILS_HOME 或 HOME 目录名称中的空格。

见：http: [//jira.grails.org/browse/GRAILS-7936](http://jira.grails.org/browse/GRAILS-7936)

它与其他各种相关问题有链接。

此评论有一个解决方法： http://jira.grails.org/browse/GRAILS-7936?focusedCommentId=72170&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment [-72170](http://jira.grails.org/browse/GRAILS-7936?focusedCommentId=72170&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-72170)。

# iphone - 无法加载从笔尖引用的“”图像

> ID：12672603
> 
> 赞同：48
> 
> 时间：2012-10-01T11:43:16.530
> 
> 标签：iphone, objective-c, xcode, nib

我没有名为“”（什么都没有）的图像。我浏览了弹出屏幕的 .xib 文件，找不到任何会导致此问题的内容。有谁有同样的问题？这是完整的警告：

> 无法加载从标识符为“com.blah.Blah”的捆绑包中的笔尖引用的“”图像

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2014-01-14T04:00:58.640

您可以这样做以从情节提要或笔尖检查它。作为源代码打开它：

![在此处输入图像描述](../Images/8e41f1aeebe7b00b947d13e25bb4ae47.png)

然后“查找”其中的图片名称，看看它是否存在但在你的项目中已经无效，可能你已经删除或更改了它的名称，现在它似乎无效。

![在此处输入图像描述](../Images/a665aaf8da3a5e06d77257092a8daa27.png)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-08-13T20:25:55.117

我遇到了同样的问题，在我的情况下，故事板文件中有一个带有无效图像引用的 UIButton。引用不是空的，因此只需在情节提要文件中搜索“”即可发现它并非易事。但是，Xcode 确实在背景字段中为按钮显示“未知图像”而不是“默认背景图像”。在故事板文件中，它显示为

```
<state key="normal" title="Use" backgroundImage="0E39AEA8-7F29-40B2-96B1-63B99047E8D5"> 
```

所以也许寻找 backgroundImage 并寻找不熟悉的参考资料将有助于找到原因。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-02-24T12:50:30.957

由于**UITabBarItem**我有这个警告。**在“选定图像”**字段的属性检查器中，我列出了一个文件，该文件也是**“图像”**字段的值。尽管如此，我还是收到了警告，直到我将“选定图像”字段设为空白。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-03-18T00:14:45.353

仅供参考，此问题也是由使用 .jpg 图像并在情节提要/笔尖内引用它们引起的。iOS 8 似乎能够在运行时处理 jpg 和 png 图像之间的正确类型检查。但是，在 iOS 7 及更低版本中，您需要在代码中手动设置图像并删除情节提要内的图像引用以消除警告。

请记住，在引用 jpg 图像时，您需要手动设置 .jpg。

```
[self.imageView setImage:[UIImage imageNamed:@"yourImage.jpg"]]; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-08-22T17:31:35.690

我是来寻找答案的。我在整个项目和情节提要源代码中搜索了“”，但在任何地方都找不到。出现错误时显示的视图就是您需要的线索。

*   打开您的 xib 或情节提要，选择相关的 viewController。

*   在左侧单击所有灰色箭头以在您的视图中展开选择 ![在此处输入图像描述](../Images/1c1cdd5892613f49bf64ef5cf990497a.png)

*   寻找 UIImageView 图标（它与棕榈树的那个）

*   选择它并打开右侧的“属性检查器”。 ![在此处输入图像描述](../Images/e960fb36594643cbb19412040ed17aef.png)

*   在 Image 和 Highlighted 中的一个或两个顶部的 ImageView 部分中，
    您将看到灰色的“未知图像”。

*   使用下拉菜单将其从“未知图像”更改并构建运行

*   瞧

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-01-10T08:10:54.117

导致警告消息的 nib（或最终是 xib）是写入消息时加载的那个。然后，您可以查看检查器中使用图像的控件，并找到图像名称为“未知图像”的控件。然后，您可以通过将其设置为某个值然后清除该值来清除该值。请注意，使用 UIButton 您需要尝试“状态配置”的四个不同值（默认、突出显示、选定和禁用），以查看可能隐藏无效引用的位置。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-01-06T10:56:11.130

就我而言，它`Unknown image`在`UIBarButtonItem`故事板中。

[![在此处输入图像描述](../Images/cbce718b5261418d87ecb3a79fba39bf.png)](https://i.stack.imgur.com/Oy2o4.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-01-14T15:00:49.610

在 xcode 5.1 中，我遇到了同样的问题。在使用情节提要时，我最终可以让它工作的唯一方法是将图像添加为图像资产目录。从我读到的可能他们在 5.1 中改变了一些东西。我认为情节提要没有笔尖 - 所以资产目录取代旧方法是有意义的。

项目 > 常规 > 应用程序图标箭头 > 导入新文件夹。

一旦我这样做了，NIB 参考就消失了，我的图像就出现了。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-07-04T15:01:49.033

非常简单地从您的项目中删除未显示的图像，然后通过转到 Product--> clean 来清理项目，然后再次将图像放入您的项目并完成。这对我有用。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-05-04T08:15:21.040

我在 Xcode 6 上使用资产目录。只需删除并重新添加资产目录即可解决问题

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-11-07T03:27:10.950

在我的情况下，在我的 xib 文件中，我曾经为一些 UIButton 和 UIImageView 设置图像名称，并在一段时间后删除这些图像名称，但由于未知原因，这些图像仍然出现在 Interface Builder 编辑器中，最后我重置了这些图像名称使用任何图像名称并再次删除它们，现在问题已解决。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-01-28T23:41:17.120

我从撤消操作中收到此错误，只需将图像放回视图控制器即可解决问题。

Atb

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-07-01T19:14:42.770

我最终发现了一个非常相似的问题。下面的行是使用上面提到的作为源代码开放的方法导致的问题。

```
<tabBarItem key="tabBarItem" title="Events" 
            image="319365D1-7058-46CD-8420-18E0EAFB2F29" id="a5a-IF-j9f"/> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-04-14T17:37:35.580

在我的情况下，这是因为我的一个按钮图像被错误地添加到背景图像容器而不是图像容器（在检查器中）。我通过浏览整个故事板层次结构并检查每个图像和按钮设置找到了它。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-12-16T21:08:51.363

这对我有用：

1-退出 Xcode

2- 制作 .storyboard 的副本以供备份。

3- 在文本编辑器中打开您的 .storyboard 并删除带有空引用的图像节点和图像节点属性。

```
delete node like this --> <image name=" " .../>
delete image attributes like this --> <tabBarItem key="tabBarItem" title="untitled" image=" " id="6"/> 
```

4- 保存文件
5- 在 Xcode 中再次打开您的项目。
6- 运行产品->清洁
7- 运行你的项目

警告应该消失了。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-08-20T06:09:13.863

我也遇到了同样的问题，因为我在 Photoshop 中编辑了图像并保存为 psd 格式，请确保在我的情况下将编辑后的图像保存为 jpg 或 png 格式，这就是问题希望它有所帮助！！！

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-03-31T10:55:27.797

请搜索**image=**显示各种结果。从中选择`nibs`或`storyboard`打开结果，如果有类似**image="2342D4DF-1E6B-42B8-847A-F9F622921D02" 之类的值，请**删除并享受。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-05-30T01:20:48.333

确保已选择“Assets.xcassets”的“Target Membership”。

1.  单击“资产.xcassets”
2.  在“文件检查器”中，确保选中“目标成员”。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-05-22T19:52:16.913

信不信由你，有时会发生这种情况，因为某些 IBOutlet 已被删除，并且情节提要中有对它的引用。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-08-26T14:52:25.140

在将标签的一个文本切换为“归属”并使用一种“有趣”字体后，我的所有图像都遇到了这个问题。即使我将其切换回“普通”，我仍然会收到“无法加载...”错误 - 直到我重新加载并再次重新引用我的所有图像。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-01-12T18:16:56.827

最初我的图像名称是“bg”当我发现问题时，我将图像重命名为“背景”，但是当单击图像并点击“在 Finder 中显示”时，没有反映更改。图像被命名为“bg-1.jpg”。

> 所以我从项目中删除了将图像转换为 png 并拖放到它对我有用的项目中。

[![在此处输入图像描述](../Images/851811d1b2d230c331a118cb8e5bec6f.png)](https://i.stack.imgur.com/SgIat.png)

# java - JXDatePicker 中的动态 JFormattedTextFields

> ID：12672606
> 
> 赞同：1
> 
> 时间：2012-10-01T11:43:22.627
> 
> 标签：java, swing, datepicker, swingx, jformattedtextfield

我需要一个接受 4 种格式的字段：`integer`、`float`和. 当用户需要输入日期时，UI 将显示一个日期选择器。`string``date`

因此，为了简化 UI 以拥有一个单一的文本字段，我创建了一个`JXDatePicker`with作为它的编辑器，并`JFormattedTextfield`动态地将格式化工厂分配`JFormattedTextfield`给 handle `Integer`、`Float`和input。以下是实现的代码片段：`String``Date`

```
 public void setFormat(String format)
  {
    // requires integer format
    if (IntegerAttribute.TYPE_NAME.equals(format)) {
      setBoundFormatFactory(new DefaultFormatterFactory(new NumberFormatter(NumberFormat.getInstance())));
    }
    // requires float format
    else if (FloatAttribute.TYPE_NAME.equals(format)) {
      setBoundFormatFactory(new DefaultFormatterFactory(new NumberFormatter(new DecimalFormat(FLOAT_FORMAT))));
    }
    else if (DateAttribute.TYPE_NAME.equals(format)
            || DateTimeAttribute.TYPE_NAME.equals(format)
            || TimeAttribute.TYPE_NAME.equals(format)) {
      // requires date format
      setDateFormat(model.getDateFormat());
    }
    else {
      // otherwise set to us string
      setBoundFormatFactory(new DefaultFormatterFactory()); 
    }
  }

  public void setDateFormat(String dateFormat)
  {
    setBoundFormatFactory(new DefaultFormatterFactory(new DateFormatter(new SimpleDateFormat(dateFormat))));
  }

  private void setBoundFormatFactory(DefaultFormatterFactory factory)
  {
    m_formattedTextfield.setFormatterFactory(factory);
  } 
```

该实现适用于字符串和日期格式，但是对于整数和浮点数，JXDatePicker 似乎试图将其转换为 Date 数据类型，因此会导致类转换异常：

```
java.lang.ClassCastException: java.lang.Long cannot be cast to java.util.Date
at org.jdesktop.swingx.plaf.basic.BasicDatePickerUI$Handler.editorPropertyChange(BasicDatePickerUI.java:1359)
at org.jdesktop.swingx.plaf.basic.BasicDatePickerUI$Handler.propertyChange(BasicDatePickerUI.java:1336)
at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:339)
at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:276)
at java.awt.Component.firePropertyChange(Component.java:8163)
at javax.swing.JFormattedTextField.setValue(JFormattedTextField.java:782)
at javax.swing.JFormattedTextField.commitEdit(JFormattedTextField.java:513) 
```

当字段为数字格式时，有没有办法阻止日期选择器尝试将值转换为日期？还是有其他解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:53:24.780

*   从未使用过`JXDatePicker`（我认为只支持`Date value`由 DateFormat 或 SimpleDateFormat 格式化，必须同步两个格式化程序），

*   您可以使用`JSpinner`with`SpinnerDateModel`而不是`JFormattedTextField`

*   也许看看[Kai Toedter 的 JCalendar](http://www.toedter.com/en/jcalendar/)并使用代码源

# php - 如何将扫描的条形码发送到电脑（到 html 文本框）？

> ID：12672608
> 
> 赞同：0
> 
> 时间：2012-10-01T11:43:44.153
> 
> 标签：php, android, barcode

我希望使用php开发一个在线图书馆管理系统。所以，我想获得 ISBN 代码作为输入。

我需要的是捕获该 ISBN 代码并将其粘贴到文本字段中以将其发送到服务器。我认为这可以使用条形码扫描仪来完成。另外，另一件事是我需要实现一种将捕获的代码发送到我的文本字段的方法。

有没有满足我要求的安卓应用程序？有什么建议么？

谢谢你。

# objective-c - 在可可的 webview 中点击图片

> ID：12672616
> 
> 赞同：0
> 
> 时间：2012-10-01T11:44:15.360
> 
> 标签：objective-c, macos, cocoa

我正在使用可可框架创建一个 mac 应用程序。我添加了一个 Webview，其中加载了一些 HTML 内容。WebView 是可编辑的。我通过在标签中附加 HTML 内容来添加图像。现在，我需要做的是检测图像点击？当用户单击 webview 中的任何图像时，我必须显示一条警报，提示“单击图像名称”。

所以任何人都可以让我知道如何检测图像点击以及 webview 中的标签信息。

谢谢， iPhoneDv

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:02:46.903

一旦你了解了 webview 的工作原理，这并不难，你实现了一个 UIWebViewDelegate。其中一项功能是

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

在这里，您可以在 request.URL 中获取 url，在那里您可以 f.ex。解析它，用斜杠（/）和更多选项分割，检查链接中的一些参数，然后触发代码中的一些方法。但是您需要返回 NO，以便该方法不会呈现链接页面。

对于这个例子，我只是想象所有图片链接都不是[http://example.com/1.gif](http://example.com/1.gif)而是图片：//example.com/1.gif

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    NSURL *action = request.URL;
    if ([[action scheme] isEqualToString:@"picture"]) {
        // split url with /
        NSArray *array = [stringUrl componentsSeparatedByString:@"/"];
        NSLog(@"You just clicked on image : %@", [array lastObject]);
        return NO;
    }
 return YES;
} 
```

# javascript - 为什么在以下情况下我不能在输入中输入十进制值

> ID：12672617
> 
> 赞同：0
> 
> 时间：2012-10-01T11:44:17.303
> 
> 标签：javascript, jquery

在进行任何操作之前，您需要查看效果：

[jsFiddle](http://jsfiddle.net/Kfkjy/)

正如您所看到的，它是一个计算器，您可以将一个值放在任何地方并将其转换为其他值，但问题是我无法输入像 0.3 或 0.999 这样的十进制 int 值。这是什么原因？

```
var id = {
    mm: 1,
    cm: 10,
    m: 1000,
    km: 1000000
};

$('input.bx').on('keyup', function() {

    var t = $(this).val();
    var i = id[$(this).attr("id")];
    var v = parseInt(t, 10);

    for (pp in id) {

        if (t !== '') {
            $("#" + pp).val(v / id[pp] * i);
        } else {
            $(".bx").val('');
        }

    }

});

<input type='text' class='bx' id='mm'> Milimeter<br>
<input type='text' class='bx' id='cm'> Centimeter<br>
<input type='text' class='bx' id='m'> Meter<br>
<input type='text' class='bx' id='km'> Kilometer<br> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:48:20.327

`parseInt`是“问题”，因为它返回整数 - 十进制值不是整数而是浮点数。如果需要，必须将其替换为`parseFloat`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T11:55:29.337

1.首先你需要使用**parseFloat**因为 int 不能有小数。2.其次我会使用**onChange**。 [http://jsfiddle.net/Kfkjy/10/](http://jsfiddle.net/Kfkjy/10/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T14:09:58.207

这个例子工作正常

[http://jsfiddle.net/Mohamed_aboelenen/D6T7j/1/](http://jsfiddle.net/Mohamed_aboelenen/D6T7j/1/)

```
$('input.bx').on('keyup', function() {

var t = $(this).val();
var i = id[$(this).attr("id")];
var v = parseFloat(t, 10);
var a = $(this).attr("id"); // the textbox you write in
for (pp in id) {
    if (t !== '' ) {
        if(a != pp){  // make changes to any textbox except the one you write in
        $("#" + pp).val(v / id[pp] * i);
        }
    } else {
        $(".bx").val('');
    }

}

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T07:30:45.987

[在这里](http://jsfiddle.net/cQCmR/)工作的小提琴

您必须使用`parseFloat`并且不要尝试设置当前的焦点元素值，因为您在输入时过度使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T11:48:36.063

```
$('input.bx').on('blur', function() {

    var t = $(this).val();
    var i = id[$(this).attr("id")];
    var v = Number(t, 10);

    for (pp in id) {

        if (t !== '') {
            $("#" + pp).val(parseFloat(v / id[pp] * i));
        } else {
            $(".bx").val('');
        }

    }

}); 
```

# java - memcached 中存储了什么？

> ID：12672619
> 
> 赞同：1
> 
> 时间：2012-10-01T11:44:24.323
> 
> 标签：java, memcached

用于数据库查询缓存时实际存储在 memcached 中的内容。

如果您的答案是查询结果，那么如果对查询所依赖的任何实体进行更新，我如何使 memcached 中的条目无效？

连接查询呢？如果我缓存它们可以吗？我如何知道联接查询中的表是否已更新，因此我可以使缓存条目无效。

还请提出一些例子或文章。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-01T12:01:04.403

在 memchached 中，键/值对存储在配置的缓存中。当您存储数据库结果集时，它存储`java.lang.Object`.

您可以使用任何 memcached 客户端方法使该值无效。例如 spymemcached 客户端提供了一种方法`replace(String key, int expression, Object ob)`，例如

> 如果给定键已经存在值，则用给定值替换对象（使用默认转码器转码）。您还可以删除旧对象。

# php - 像在 AWK 中一样在 PHP 中解析 $NF 等最后一个字段的方法？

> ID：12672622
> 
> 赞同：0
> 
> 时间：2012-10-01T11:44:39.330
> 
> 标签：php, awk

在 AWK 中，我可以使用逗号分隔的变量字段字符串，并使用 AWK 中的 $NF 变量解析最后一个字段。

有没有办法在 PHP 中做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:53:03.847

```
$myLastElement = end(array_values($yourArray)); 
```

以上有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:00:29.113

作为一个班轮...

```
$NF = end(array_map('trim', explode(',', $commadelimitedstring))); 
```

# ruby-on-rails - collection_select 在控制器中是如何处理的？

> ID：12672624
> 
> 赞同：0
> 
> 时间：2012-10-01T11:44:49.950
> 
> 标签：ruby-on-rails, select, collections, drop-down-menu, process

我使用 collection_select 制作了一个下拉列表

```
<%= collection_select(:page, :user_id, @users, :id, :full_name) %> 
```

那部分工作正常。我在使用控制器保存/处理它时遇到了麻烦，APIdock 在这方面不是很有帮助，而且我无法获得我发现的一个示例。谁能向我解释如何处理控制器中的选定值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:51:10.220

你会有价值

```
params[:page][:user_id] 
```

这将对应于表单中选择的值。您可以看到它检查`params`变量。

IT 是一个数字，即所选用户的 ID。您可以通过加载用户

```
@user = User.find(params[:page][:user_id]) 
```

但没用。事实上，如果`user_id`页面的属性是可访问的，那么用通常的

```
@page.update_attributes(params[:page]) # in the update action 
```

或者

```
@page.create(params[:page]) # in the create action 
```

您将在页面中获取用户为`@page.user`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:04:46.270

将页面值存储在模型中，该模型应在 user.rb 中指定“ **has_many :pages** ”。

```
@user = User.find(params[:user_id])
@user.pages = params[:page] 
```

params[:page] 返回将存储在当前模型记录中的值数组。

# python - Python：如何将字符串转换为日期时间

> ID：12672629
> 
> 赞同：12
> 
> 时间：2012-10-01T11:45:14.280
> 
> 标签：python, datetime

> **可能重复：**
> [将字符串转换为日期时间](https://stackoverflow.com/questions/466345/converting-string-into-datetime)

我正在解析一个 XML 文件，该文件为我提供了相应 isoformat 的时间：

```
tc1 = 2012-09-28T16:41:12.9976565
tc2 = 2012-09-28T23:57:44.6636597 
```

但是当我从 XML 文件中检索它时，它被视为一个字符串。我有两个这样的时间值，我需要在两者之间做一个差异，以便找到增量。但由于它是一个字符串，我不能直接做 tc2-tc1。但是由于它们已经是日期时间的等格式，我如何让 python 将其识别为日期时间？

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-01T11:51:01.613

使用[`datetime.strptime`](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)方法：

```
import datetime
datetime.datetime.strptime(your_string, "%Y-%m-%dT%H:%M:%S.%f") 
```

提供的链接显示了不同的格式指令。请注意，微秒限制为 range `[0,999999]`，这意味着`ValueError`您的示例将提高 a （您使用的是 1/10us）：您需要截断字符串以删除最后一个字符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T11:51:01.333

你可以使用[python-dateutil`parse()`函数](http://labix.org/python-dateutil#head-c0e81a473b647dfa787dc11e8c69557ec2c3ecd2)，它比 strptime 更灵活。希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T11:50:41.177

使用[`datetime`模块](http://docs.python.org/library/datetime.html)。

```
td = datetime.strptime('2012-09-28T16:41:12.997656', '%Y-%m-%dT%H:%M:%S.%f') - 
     datetime.strptime('2012-09-28T23:57:44.663659', '%Y-%m-%dT%H:%M:%S.%f')
print td
# => datetime.timedelta(-1, 60208, 333997) 
```

只有一个小问题：您的微秒数`%f`需要处理。所以我已经从你的输入字符串中删除了最后一位数字。

# linux - 屏幕被分成两部分（左和右），这些部分被交换

> ID：12672631
> 
> 赞同：0
> 
> 时间：2012-10-01T11:45:21.287
> 
> 标签：linux, qt

我正在 SBC6000x 板上开发一个应用程序（使用 Linux 内核版本 2.6.24）。我正在使用 Qt 4.7.3 版。应用程序可执行文件大小约为 1.8 MB。

当我在板上加载应用程序时，大多数情况下它工作正常，但有几次屏幕被分成两部分（左和右）。

拆分后，左右部分交换。有趣的是，点击事件是根据原始屏幕（拆分前）处理的。

我读过，Qt 4.7.3 版本的显示存在问题，但无法弄清楚。

有什么可能的方法来处理这个问题？

# iphone - 在 xcode 中访问数据库文件

> ID：12672635
> 
> 赞同：0
> 
> 时间：2012-10-01T11:45:38.763
> 
> 标签：iphone, sql, ios, xcode

我有一个现有的数据库文件。我想在项目中使用这个 db 文件。我将此文件放在我的应用程序文件夹中，并将其拖到 Xcode 中。现在我已经编写了代码来检查文件是否存在。但它抛出 FALSE 异常。

```
 bool databaseAlreadyExists = [[NSFileManager defaultManager] fileExistsAtPath:@"school.db"]; 
```

请让我知道如何使用现有的数据库文件。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:00:16.717

尝试获取路径

```
NSString *databasePath = [[NSBundle mainBundle] pathForResource:@"school" ofType:@"db"]; 
```

对于斯威夫特：

```
let dbPath = Bundle.main.path(forResource: "school", ofType: "db") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:52:52.700

我想你在你的项目中使用 Core Data，不是吗？如果是这样，请查看 Apple 的[iPhone Core Data Recipes](http://developer.apple.com/library/ios/#samplecode/iPhoneCoreDataRecipes/Introduction/Intro.html)示例项目！在 Classes/​RecipesAppDelegate.m 中，您将找到完成您需要的示例代码！

[Ray Wenderlich 的网站上](http://www.raywenderlich.com/980/core-data-tutorial-how-to-preloadimport-existing-data)有一个很好的关于预加载的教程。以 Core Data Recipes 示例展示的方式交付预加载的数据库并不是 Apple 最想要的方式。因此，请查看提供的教程以获得更复杂的方法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:57:47.743

在不知道它是什么类型的数据库（MySQL、SQLITE 等）的情况下，我可以告诉你的最好的方法是找到一个适合 iOS 的库/包装器来访问数据库。举个例子。[FMBD](https://github.com/ccgus/fmdb)如果对 SQLITE 非常好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T12:08:59.417

这取决于您是否需要数据库可写。

您只需执行以下操作即可访问数据库：

```
 NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"mydb.sqlite"]; 
```

但是如果你已经将它复制到另一个目录以便你可以写入它（例如 Documents 目录），你需要做这样的事情来获取路径：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"mydb.sqlite"]; 
```

# azure - 加密连接字符串是绝对必要的吗？

> ID：12672638
> 
> 赞同：1
> 
> 时间：2012-10-01T11:45:51.720
> 
> 标签：azure, connection-string

我正在从 Windows Phone 7 应用程序访问 WCF 服务（托管在 Azure 上），目前到数据库的连接字符串以纯文本形式存储在 WCF Web 配置文件中。

在网上做了一些阅读之后——我很困惑。如果服务隐藏在 Azure 上，我应该加密连接字符串的确切原因是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:07:02.847

不它不是

> 绝对有必要

下一个问题是为什么不加密呢？这很容易做到，“整体”安全最佳实践是：不要让坏人容易。就个人而言，我同意 astaykov 的观点，但从专业上讲，我会对其进行加密。

# c# - Textblock.Text 上的 NullReference

> ID：12672641
> 
> 赞同：0
> 
> 时间：2012-10-01T11:46:03.870
> 
> 标签：c#, windows-phone-7

我不明白这一点。`NullReferenceException`当我尝试更改文本块的 .Text 值时，为什么会出现,？

```
private void rt_ValueChanged(object sender, System.Windows.RoutedPropertyChangedEventArgs<double> e)
        {
            var rtslider = (Slider)sender;
            int val = Convert.ToInt32(Math.Round(rtslider.Value, 0));
            Debug.WriteLine(val);

            if (val <= 1)
            {
                    rt_tb.Text = "A";
            }
            else 
            {
                rt_tb.Text = "B";
            }
        } 
```

这是滑块的 valueChanged 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:20:38.287

看起来，您在 Blend 中拖动了一个新的 TextBlock，但您忘记重命名它。此外，您可能`TextBlock rt_tb`在不调用构造函数的情况下在代码隐藏中声明。

`TextBlock`在 Blend 中重命名为`rt_tb`，或在 Xaml 中：

```
<TextBlock Name="rt_tb"/> 
```

并`TextBlock rt_tb`从`.cs`文件中删除。

# css - div的跨浏览器定位

> ID：12672649
> 
> 赞同：0
> 
> 时间：2012-10-01T11:46:21.763
> 
> 标签：css, hover, position

我正在尝试`:hover`使用具有相同内容的两个`div`s 制作动画菜单，但是当我有多个按钮并将鼠标悬停在其上时，第二个 div 在 Chrome 中显示低 1 或 2 个像素，但在 Firefox 中则没有。我用两个菜单做了一个例子，一个有两个按钮（`BUTTON1`，`BUTTON2`），一个只有一个按钮（`BUTTON3`）：http: [//jsfiddle.net/Revolt/VHuyw/](http://jsfiddle.net/Revolt/VHuyw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:40:58.787

尝试添加`vertical-align: top`到您的`.button`课程：http: [//jsfiddle.net/VHuyw/2/](http://jsfiddle.net/VHuyw/2/)

# xaml - Windows 8 商店应用程序内基于磁贴的 UI

> ID：12672651
> 
> 赞同：0
> 
> 时间：2012-10-01T11:46:25.313
> 
> 标签：xaml, windows-8, tile

我正在创建将在 Windows 8 平板电脑上运行的 Windows 8 商店应用程序，在我的应用程序中，我想提供基于磁贴的 UI，任何一个指南都可以，或者是否有任何可用的控件，如用于 WP7 的 HubTile Control... ?

谢谢并恭祝安康， ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:03:29.157

Telerik 已发布 Windows 8 控件，其中包括您在 WP 7 中提到的 Hub 磁贴。

看看：[http ://www.telerik.com/products/windows-metro/controls/hubtile.aspx](http://www.telerik.com/products/windows-metro/controls/hubtile.aspx)

# android - Android 上的计时器和 setContentView

> ID：12672653
> 
> 赞同：0
> 
> 时间：2012-10-01T11:46:37.923
> 
> 标签：android, timer, set

我想执行一段代码让用户可以像其他APP一样关注我的LOGO

我想使用计时器执行 setContentView。编译器没有错。但是执行错误。不幸已经停止了。

```
Timer timer;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    abc();
}

        public void abc() {

             timer = new Timer();

            timer.schedule(new TimerTask() {

                @Override
                public void run() {
                      goToLayout1();    
                }

                private void goToLayout1() {
                    setContentView(R.layout.activity_main2);
                            timer.cancel();
                }
            }, 1000, 2000);
        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:55:23.347

我建议您应该有两个活动。第一个活动用于显示启动屏幕。您可以在 3 秒后完成此操作并启动另一个活动，该活动是布局为 actitiy_main2 的活动。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Runnable runnable=new Runnable(){
    public void run(){
    finish();
    //start main activity
      }
    };
  Handler handler=new Handler();
  handler.postDelayed(runnable,3000);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:50:35.440

您正在尝试从非 UI 线程（一个简单的 Java 计时器）修改 UI 线程，所以请注意它并[从 Thread 读取此 Update UI](https://stackoverflow.com/questions/4369537/update-ui-from-thread)。那么请发布异常！

# c# - C# 垃圾收集器行为

> ID：12672658
> 
> 赞同：3
> 
> 时间：2012-10-01T11:47:09.723
> 
> 标签：c#, garbage-collection

我们有一个 C# 应用程序，它控制我们的一个设备并对这个设备给我们的信号做出反应。

基本上，应用程序创建线程、处理操作（访问数据库等）并与该设备通信。

在应用程序的生命周期中，它创建对象并释放它们，到目前为止，我们让垃圾收集器处理我们的内存。我读过强烈建议让 GC 在不干扰的情况下完成其工作。

现在我们面临的问题是，我们的应用程序的过程会不断增长，一步一步地增长。例子：

![在此处输入图像描述](../Images/2f58b74e092ee7284d13e733978ca247.png)

当应用程序增长时似乎有“波”，突然间，应用程序释放了一些内存，但似乎同时留下了内存泄漏。

我们正在尝试使用一些内存分析器来调查应用程序，但我们想深入了解垃圾收集器的工作原理。

*   我在这里找到了一篇很棒的文章：[大物体的危险](http://www.simple-talk.com/dotnet/.net-framework/the-dangers-of-the-large-object-heap/)
*   我还在这里找到了官方文档：[MSDN](http://msdn.microsoft.com/en-us/library/0xy59wtx.aspx)

你们知道另一个非常深入的 GC 文档吗？

**编辑 ：**

这是说明应用程序行为的屏幕截图：

您可以清楚地看到我们在非常规则的模式上产生的“波浪”效应。

附属问题：

我已经看到我的 GC Collection 2 Heap 非常大，并且遵循与我的应用程序使用的总字节数相同的模式。我想这是完全正常的，因为我们的大多数对象都会在至少 2 次垃圾回收中存活下来（例如 Singleton 类等）......你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:56:05.290

我对几年前教的一门课做了一些研究。我不认为这些参考资料包含有关 LoH 的任何信息，但我认为无论以哪种方式分享它们都是值得的（见下文）。此外，我建议在指责垃圾收集器之前对未释放的对象引用进行第二次搜索。只需在类终结器中实现一个计数器来检查这些大对象是否如您所想的那样被丢弃。

这个问题的一个不同的解决方案是永远不要释放你的大对象，而是使用[池策略](http://en.wikipedia.org/wiki/Object_pool_pattern)重用它们。在我的狂妄自大之前，我曾多次将我的应用程序的内存需求随着时间的推移而过早地归咎于 GC，但这往往不是实现错误的症状。

GC 参考： http: [//blogs.msdn.com/b/clyon/archive/2007/03/12/new-in-orcas-part-3-gc-latency-modes.aspx](http://blogs.msdn.com/b/clyon/archive/2007/03/12/new-in-orcas-part-3-gc-latency-modes.aspx) http://msdn.microsoft。 com/en-us/library/ee851764.aspx [http://blogs.msdn.com/b/ericlippert/archive/2010/09/30/the-truth-about-value-types.aspx](http://blogs.msdn.com/b/ericlippert/archive/2010/09/30/the-truth-about-value-types.aspx) http://blogs。 msdn.com/b/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx

Eric Lippert 的博客特别有趣，涉及到详细了解 C#！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:03:19.653

您描述的行为是在大型对象堆 (LOH) 上创建的对象的典型问题。但是，您的内存消耗似乎稍后会恢复到较低的值，因此请检查两次是否真的是 LOH 问题。

您显然知道这一点，但不太明显的是 LOH 上的对象大小存在异常。

如文档中所述，大小超过 85000 字节的对象最终会出现在 LOH 上。但是，由于某种原因（可能是“优化”），长度超过 1000 个元素的双精度数组也最终出现在此处：

```
double[999] smallArray = ...; // ends up in 'normal', Gen-0 heap
double[1001] bigArray = ...; // ends up in LOH 
```

这些数组可能会导致 LOH 碎片化，这需要更多内存，直到出现内存不足异常。

我对此感到很恼火，因为我们有一个应用程序接收一些传感器读数作为双精度数组，这导致 LOH 碎片整理，因为每个数组的长度略有不同（这些是各种频率的实时数据读数，由非实时过程采样）。我们通过实现自己的缓冲池解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:07:59.023

这是我的一些调查的更新：

在我们的应用程序中，我们使用大量线程来执行不同的任务。其中一些线程具有更高的优先级。

1）我们正在使用**并发**的 GC，我们试图将其切换回**non-concurrent**。

我们已经看到了戏剧性的进步：

*   垃圾收集器被频繁调用，似乎当被更频繁地调用时，它释放的内存要好得多。

一旦我有一个很好的截图来说明这一点，我就会发布一个截图。

我们[在 MSDN 上](http://blogs.msdn.com/b/tess/archive/2008/04/17/how-does-the-gc-work-and-what-are-the-sizes-of-the-different-generations.aspx)找到了一篇非常好的文章。我们还在[SO](https://stackoverflow.com/questions/794415/experience-using-gcserver-true-to-set-garbage-collector-for-net)上发现了一个有趣的问题。

在下一个 Framework 4.5 中，有 4 种可能性可用于 GC 配置。

1.  工作站 - 非并发
2.  工作站 - 并发
3.  服务器 - 非并发
4.  服务器 - 并发

我们将尝试切换到“服务器 - 非并发”和“服务器 - 并发”，以检查它是否为我们提供了更好的性能。

我将根据我们的发现更新此线程。

# c# - 如何获取字符串数组中对象列表的特定字段

> ID：12672662
> 
> 赞同：1
> 
> 时间：2012-10-01T11:47:23.867
> 
> 标签：c#, asp.net, linq, list, arrays

我有一个这样的人名单：

```
foreach (GridViewRow r in gv_contactList.Rows)
                        {
                            Person p = new Person();
                            p.Id = int.Parse(gv_contactList.DataKeys[r.RowIndex].Value.ToString());
                            p.Name = r.Cells[1].Text.TrimEnd();
                            p.Mobile = r.Cells[2].Text.TrimEnd();
                            p.Email = r.Cells[3].Text.TrimEnd();
                            p.Pkind = 1;//ToDo
                            plst.Add(p);

                        } 
```

`string[]` 如何在手机号码不为空或不为空的同一个循环中获取手机号码数组。而不是再次循环遍历人员列表以将手机号码放入数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:49:53.277

```
var mobiles = new List<string>();

foreach (GridViewRow r in gv_contactList.Rows) 
{ 
    ...
    p.Mobile = r.Cells[2].Text.TrimEnd(); 
    if (!String.IsNullOrEmpty(p.Mobile)) {
        mobiles.Add(p.Mobile);
    }
    ... 
} 

var mobilesArray = mobiles.ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T11:50:28.070

不太确定你想要什么。但是，如果您想要人员列表中的字符串电话号码数组，`plst`您可以执行以下操作：

```
string[] phoneArray = plist
                          .Where(r=>string.IsNullOrWhiteSpace(r.Mobile))
                          .Select(r=>r.Mobile.ToString())
                          .ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T11:52:08.153

声明一个`ArrayList`before `foreach`：

```
ArrayList<String> mobNums = new ArrayList<String>(); 
```

在里面`foreach`添加手机号 对它：

```
mobNums.Add(p.Mobile); 
```

`foreach`将其更改为数组后：

```
String[] arr = mobNums.ToArray(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T12:53:10.547

假设`plst`已经存在：

```
var plst = ...

var persons = from GridViewRow r in gv_contactList.Rows
              select new Person {
                Id = int.Parse(gv_contactList.DataKeys[r.RowIndex].Value.ToString()),
                Name = r.Cells[1].Text.TrimEnd(),
                Mobile = r.Cells[2].Text.TrimEnd(),
                Email = r.Cells[3].Text.TrimEnd(),
                Pkind = 1,
              };

var mobiles = persons.Aggregate(new List<string>(), (acc, cur) => 
              {
                plst.Add(cur);

                if (!string.IsNullOrEmpty(cur.Mobile))
                    acc.Add(cur.Mobile);
                return acc;
              }).ToArray(); 
```

枚举只发生一次。

# vba - 将更多 powerpoint 演示文稿加入一个新演示文稿中，保留 Lotusscript 中的原始幻灯片布局

> ID：12672664
> 
> 赞同：0
> 
> 时间：2012-10-01T11:47:25.683
> 
> 标签：vba, powerpoint

我正在做一个项目，将两个或多个 pp 演示文稿加入一个新的演示文稿中。原始 pp 演示文稿的选择位于基于 Web 的 Lotus Notes xPage 中，提交后，Lotusscript 与 OLE Powerpoint 对象对话。以正确的顺序将幻灯片添加到新的演示文稿中是没有问题的。问题是在添加与幻灯片模板的原始连接后丢失了。

为了解决这个问题，我找到了下一个代码片段：

```
Sub joiner()
 Dim sFileName As String
 Dim oDonor As Variant
 Dim otarget As Variant
 Dim i As Integer
 On Error GoTo errhandler

 Set otarget = ActivePresentation

 Do While sFileName <> ""
 Set oDonor = Presentations.Open(Environ("USERPROFILE") & "\Desktop\joiner\" &     sFileName, msoFalse)

 For i = 1 To oDonor.Slides.Count
 oDonor.Slides(i).Copy

 With otarget.Slides.Paste(otarget.Slides.Count + 1)
 .Design = oDonor.Slides(i).Design
 .ColorScheme = oDonor.Slides(i).ColorScheme
 End With

 Next i

 oDonor.Close
 Set oDonor = Nothing
 sFileName = Dir()
 Loop

 End Sub 
```

我必须将演示文稿 oDonor 和 oTarget 声明为 Variant，因为 lotusscript 不理解`Dim oTarget As Presentation`

这可能是代码在以下位置返回类型不匹配错误的原因： `.Design = oDonor.Slides(i).Design`

我的问题是：

1.  我是以正确的方式加入还是有更好的解决方案？
2.  有没有解决类型不匹配错误的方法？

*ps：结果展示不一定是可编辑的，所以可能不需要添加模板。

2012 年 4 月 10 日更新：下一个代码解决了模板问题。现在仍然缺少的是某些幻灯片使用的背景图像。请参阅：[https ://stackoverflow.com/questions/12731691/how-to-export-a-backgroundimage-of-a-slide-to-the-filesystem](https://stackoverflow.com/questions/12731691/how-to-export-a-backgroundimage-of-a-slide-to-the-filesystem)

```
Dim oDonor As Variant
Dim h As Integer
Dim thetmplt As Variant
Dim thetmpltname As String
Dim thetmpltnew As Variant
Dim thetmpltnamenew As String

Set oDonor = PPApplication.Presentations.Open(tempdirectory +
jobid+CStr(filenamearray  (i)),False,False,False)

thetmplt = oDonor.TemplateName  
Call oDonor.SaveAs(tempdirectory +jobid+CStr(i)+ thetmplt+".pot" ,5, -1)

For h = 1 To oDonor.Slides.Count

Dim oTargetSlide As Variant         

oDonor.Slides(h).Copy
Set oTargetSlide =  newPres.Slides.Paste()

Next        

Dim theubound As Variant
theubound = oDonor.Slides.Count
ReDim thearray(1 To k + theubound) As Variant

For k = k To k + oDonor.Slides.Count-1

thearray(k) = k
Next

Call newPres.Slides.Range(thearray()).ApplyTemplate(tempdirectory +
jobid+CStr(i+thetmplt+".pot")

oDonor.Close
Set oDonor = Nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:03:42.287

这只是一种预感，但请尝试：

```
Dim oTargetSlide as Variant
Set oTargetSlide =  otarget.Slides.Paste(otarget.Slides.Count + 1)(1)
With oTargetSlide
 .Design = oDonor.Slides(i).Design
 .ColorScheme = oDonor.Slides(i).ColorScheme
 End With 
```

# c# - 用非 ASCII 语言编码

> ID：12672670
> 
> 赞同：4
> 
> 时间：2012-10-01T11:47:59.587
> 
> 标签：c#, .net, unicode

好吧，我发现这对我来说非常奇怪，但是在 C# 中，您实际上可以用不同的语言编写源代码。我用韩语写了一个示例源代码来说明我的观点：

```
namespace 대한민국 {
    public class 학생 {
        public string 이름 { get; private set; }
        public string 좌우명 { get; private set; }

        public 학생(string 이름, string 좌우명) {
            this.이름 = 이름;
            this.좌우명 = 좌우명;
        }
    }
    public class 대학교 {
        private List<학생> 재학생목록 = new List<학생>();

        public void 입학(학생 입학생) {
            재학생목록.Add(입학생);
        }

        public void 재학생출력() {
            foreach (학생 선택된학생 in 재학생목록) {
                Console.WriteLine("이름: {0}", 선택된학생.이름);
                Console.WriteLine("좌우명: {0}", 선택된학생.좌우명);
            }
        }
    }
    public class 프로그램 {
        static void Main(string[] args) {
            대학교 스쿨오브헬 = new 대학교();
            스쿨오브헬.입학(new 학생("전땅끄", "본인은 단돈 29만원과 땅끄로 이 신성하고 거룩한 국가의 민주주의를 발전시켰소"));
            스쿨오브헬.입학(new 학생("이피카츄", "여러분 이거 다 거짓말인거 아시죠!!!"));
            스쿨오브헬.입학(new 학생("빵상아줌마", "빵빵 똥똥똥똥 땅땅 따라라라라~~~"));

            스쿨오브헬.재학생출력();
        }
    }
} 
```

上面的代码编译并给你一个有效的输出。

除了关键字之外，您实际上可以用英语以外的语言编写源代码。当然，这是非常不切实际的，没有人会这样做。

我的问题如下：

*   这是 C# 功能还是 Visual Studio 功能？（我无法在 Visual Studio 2010 下的 C++ 中获得类似的程序）
*   对性能有什么影响？（我很容易假设几乎没有，但不确定他们是否进行了任何疯狂的转换以允许非 ASCII 字符进行编码）
*   实现此功能的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T11:52:52.697

1：它在C#语言规范中，所以：C#

2：没有；解析器并不真正关心某事是否是`Fred`vs `프로그램`；对编译器都不重要

3：因为并非所有开发人员都将英语（或：拉丁语）作为他们的主要语言。`프로그램`对于从事该项目的开发人员来说，这很可能非常容易且有意义地表达了课程的意图

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T11:57:54.033

1) C# 规范和 CLI 规范都允许这样做。

C# 标准说

> 源文件是有序的 Unicode 字符序列。

和

> 符合标准的程序中的标识符必须采用 Unicode 规范化表格 C 定义的规范格式，如 Unicode 标准附件 15 所定义。遇到不在规范化表格 C 中的标识符时的行为是实现定义的；但是，不需要诊断。

ECMA CLI 标准有这样的说法：

> ## I.8.5 命名
> 
> 为类型系统的实体命名，以便类型系统的其他部分或类型的实现可以引用它们。类型、字段、方法、属性和事件都有名称。对于类型系统，值、局部变量和参数没有名称。类型系统的实体被赋予一个名称（例如，一个类型只有一个名称）。
> 
> ### I.8.5.1 有效名称
> 
> 所有名称比较都是逐字节进行的（即区分大小写、与区域无关，也称为代码点比较）。在名称用于访问内置 VES 提供的功能（例如，类初始化方法）的地方，总是在定义上附带一个指示，以免内置任何保留名称集。

重要段落如下：

> **CLS 规则 4：**程序集应遵循 Unicode 标准 3.0 技术报告 15 的附件 7，管理允许开始和包含在标识符中的字符集，可在[http://www.unicode.org/unicode/reports/tr15在线获取/tr15-18.html](http://www.unicode.org/unicode/reports/tr15/tr15-18.html) 标识符应采用 Unicode 规范化表格 C 定义的规范格式。对于 CLS 目的，如果两个标识符的小写映射（由 Unicode 区域设置不敏感、一对一的小写映射指定）则它们是相同的） 是相同的。也就是说，对于在 CLS 下被视为不同的两个标识符，它们的区别不仅仅在于它们的情况。但是，为了覆盖继承的定义，CLI 需要使用原始声明的精确编码。
> 
> [注意：CLS（消费者）：不需要使用违反 CLS 规则 4 的类型，但应具有允许访问使用其自己的关键字之一作为名称的命名项目的机制。CLS（扩展器）：不需要创建违反 CLS 规则 4 的类型。应提供一种机制来定义遵守这些规则的新名称，但与语言中的关键字相同。CLS（框架）：不得导出违反 CLS 规则 4 的类型。应避免使用在编程语言中常用作关键字的名称。

2）不应该有任何性能影响。CLI 规则规定必须使用不区分 Unicode 区域设置的映射来完成名称匹配，这意味着当需要比较两个名称时，必须转换为一系列 Unicode 代码点。**如果**编译器或运行时选择将此信息保存在 UTF-8 等可变长度编码中并即时转换为代码点，那么理论上会有一些性能差异；实际上，我不希望任何实现可以做到这一点，或者如果他们做到了，性能差异是可以衡量的。

请注意，CLS 规则 4 说“为了覆盖继承的定义，CLI 需要使用原始声明的精确编码”，这在覆盖名称时确实设置了特定限制。但是由于这不是一个普遍的要求，所以无论如何都必须实现“在比较之前将所有内容转换为代码点”。

3) 同样，它在 CLI 规范中，所以语言必须这样做。

# c# - 如何获取一个aspx页面的源代码

> ID：12672677
> 
> 赞同：1
> 
> 时间：2012-10-01T11:48:41.247
> 
> 标签：c#, asp.net, .net, c#-4.0

我想获得一个 aspx 页面的主要来源。

我怎样才能知道创建了哪些链接和所有链接以获取该站点。当我右键单击该页面时，我得到一些 Html 页面......但不能将其用于编译。还有其他方法可以解决这个问题吗？帮助我，因为我是 asp.net 4.0 的新手。

是的，还有一件事，我只需要获取生成页面的 UI 设计标签。

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T11:56:03.250

你不能这样做......除非你在同一台机器上的本地或对服务器有 ftp 访问权限。或者当 IIS 未配置为服务器 asp.net 应用程序时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:59:39.837

除非您有权访问托管文件的服务器，否则您看不到源代码。

ASP.NET 是服务器端，因此当您请求页面时，Web 服务器 (IIS) 将使用 ASP.NET 引擎在服务器上进行处理，然后构造`HTML`，这就是您在浏览器中看到的输出。

# php - php中的foreach问题

> ID：12672679
> 
> 赞同：1
> 
> 时间：2012-10-01T11:48:56.390
> 
> 标签：php, foreach

我有这段代码，它应该打印我所有可能的 pdv，它有一个`id=super_selected_1`. 问题是，如果我在它工作的时候打印`$super_selected_1`里面，它会取值，但是在复选框里面它不会显示它，我在这里做错了吗？谢谢。

```
$super=array();
while ($row = mysql_fetch_array($query3)) { 
    $super[]=$row['id_pdv'];
}

foreach($super as $super_selected_1){
    $sqlsuper_1="SELECT * FROM pdv WHERE id_pdv='$super_selected_1' AND regione_pdv='$term1'";
    $querysuper_1 = mysql_query($sqlsuper_1) or die (mysql_error());
    while ($row = mysql_fetch_array($querysuper_1,MYSQL_ASSOC)) { 
        echo $super_selected_1;

        echo '<input type="checkbox" name="checkbox[]"  id="checkbox[]"  class="pdv_super" value="'.$row['id_pdv'].'" >' . $row['nome_pdv'] . '<br>';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:38:42.107

你的复选框是错误的。如果类型为“复选框”，则该`value`属性无效。如果标签显示为已选中，则需要`checked="checked"`在标签中进行设置。`<input>`

# objective-c - Objective-C添加2个数组的值

> ID：12672683
> 
> 赞同：0
> 
> 时间：2012-10-01T11:49:08.070
> 
> 标签：objective-c, arrays

我有 NSArray1 = (1, 5, 2) 和 NSArray2 = (1, 3, 5)

我想 array1 + array2 = (应该返回) = (2, 8, 7)

（实际上甚至可以用 NSArray 做到这一点）？

这是一个类似的问题 [将两个数组加在一起](https://stackoverflow.com/questions/2835205/adding-two-arrays-together) （但这会将第二个数组的值添加到第一个数组的末尾）

```
NSArray *a = [NSArray arrayWithObjects: @"1" ,@"2",@"3",nil];
NSArray *b = [NSArray arrayWithObjects: @"1" ,@"2",@"3",nil];
NSMutableArray *c = [[NSMutableArray alloc]init];
c = [a addObjectsFromArray:b]; 
```

// 只是一个测试代码。. . .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:56:03.627

如果它是一个 C 数组，那么就做

```
int newArray[3];
for (int i=0;i<3;i++)
    newArray[i] = array1[i]+array2[i]; 
```

但是如果它是一个带有 NSNumbers 的 NSArray（你不能在 NSArray 中有原语），那么就做

```
NSMutableArray *newArray = [NSMutableArray array];
for (int i=0;i<[array1 count];i++)
    [newArray addObject:[NSNumber numberWithInt:[[array1 objectAtIndex:i] intValue]+[[array2 objectAtIndex:i] intValue]]];
    //If you're using Mountain Lion, then you can use the following 
    //[newArray addObject:@([array1[i] intValue]+[array2[i] intValue])]; 
```

**编辑：**

如果你有超过 1 个数组，那么

```
int numArrays = 3;
NSArray *arrayOfNum = //An array of arrays that contains all the numbers
NSMutableArray *newArray = [NSMutableArray array]
for (int i=0;i<[array1 count];i++)
{
    int total = 0;
    for (int x=0;x<numArrays;x++)
        total+=[arrayOfNum[x] intValue];
    [newArray addObject:@(total)];
} 
```

# java - 为 JAR 文件启动嵌入式码头服务器

> ID：12672684
> 
> 赞同：8
> 
> 时间：2012-10-01T11:49:08.707
> 
> 标签：java, web-applications, jetty, executable-jar, embedded-jetty

我想要做的是构建一个`JAR`包含我的项目的可执行文件。我已经在它旁边包含了它的依赖项，也在`JAR`文件中，所以我的目录列表看起来像这样：

> 〜/项目/Java/web-app/out：
> 
> web-app.jar
> 
> 依赖1.jar
> 
> 依赖项2.jar
> 
> 依赖项3.jar

我知道并且确信我的问题不是由依赖关系引起的，因为我的应用程序运行正常，直到我启动嵌入式 Jetty 的那一刻。

我用来启动 Jetty 的代码是这样的：

```
public class ServerExecutionGoal implements ExecutionGoal {    

    private final static Logger logger = Logger.getLogger(ServerExecutionGoal.class);    

    private WebAppContext getWebAppContext() throws IOException {    
        WebAppContext context = new WebAppContext();    
        System.out.println("context = " + context);    
        context.setResourceBase(new PathMatchingResourcePatternResolver().getResource("classpath:/webapp").getURL().toExternalForm());    
        context.setContextPath("/");    
        context.setLogger(new StdErrLog());    
        return context;    
    }    

    @Override    
    public void execute(Map<String, Object> stringObjectMap) throws ExecutionTargetFailureException {    
        logger.info("Instantiating target server ...");    
        final Server server = new Server(8089);    
        final ContextHandlerCollection handlerCollection = new ContextHandlerCollection();    
        try {    
            handlerCollection.setHandlers(new Handler[]{new RequestLogHandler(), getWebAppContext()});    
        } catch (IOException e) {    
            throw new ExecutionTargetFailureException("Could not create web application context", e);    
        }    
        server.setHandler(handlerCollection);    
        try {    
            logger.info("Starting server on port 8089 ...");    
            server.start();    
            server.join();    
            logger.info("Server started. Waiting for requests.");    
        } catch (Exception e) {    
            throw new ExecutionTargetFailureException("Failed to properly start the web server", e);    
        }    
    }    

    public static void main(String[] args) throws ExecutionTargetFailureException {    
        new ServerExecutionGoal().execute(null);    
    }    

} 
```

我可以验证“webapp”文件夹在我的 JAR 中正确重定位到`/webapp`，并且当通过我的 IDE (IntelliJ IDEA 11) 运行代码时`context.setResourceBase(new PathMatchingResourcePatternResolver().getResource("classpath:/webapp").getURL().toExternalForm())`有效地映射到有问题的资源。此外，我可以证明它可以解析为：

```
jar:file:~/Projects/Java/web-app/out/web-app.jar!/webapp 
```

并且可以访问（我读过）。

但是，当我启动应用程序的 main 方法并启动 Jetty 时，`http://localhost:8089`我得到以下信息：

> HTTP 错误：503
> 
> 访问 / 时出现问题。原因：
> 
> ```
> Service Unavailable 
> ```
> 
> * * *
> 
> 由码头提供支持：//

我哪里错了？

我知道通过将“resourceBase”设置为“。” 地址 " `http://localhost:8089`" 将充当位置 " `~/Projects/Java/web-app/out/`" 的接口，在单击时我可以在其中看到所有`JAR`文件的列表，包括 " `web-app.jar`"，我可以下载它。

我看过以下问题，答案不适用：

1.  [嵌入式码头应用程序无法从 jar 工作](https://stackoverflow.com/questions/5329076/embedded-jetty-application-not-working-from-jar)：我得到 NullPointerException，因为`Start.class.getProtectionDomain().getCodeSource()`解析为`null`.
2.  [Embedded Jetty WebAppContext FilePermission 问题](https://stackoverflow.com/questions/8599935/embedded-jetty-webappcontext-filepermission-issue)：不仅没有回答，而且情况显然不适用，因为我没有权限问题（我可以获得文件列表的事实应该证明这一点）。
3.  [嵌入码头服务器问题](https://stackoverflow.com/questions/7312130/embedding-jetty-server-problems)：也没有答案，也不适用，因为我没有任何依赖问题（正如我之前在上面的评论中指出的那样）。

我认为我应该以某种方式使 Jetty 能够访问该`/webapp`文件夹，该文件夹位于我的`src/main/resources/`目录下并捆绑到我的 Web 应用程序中。我是否应该放弃捆绑的 Web 应用程序并将展开的上下文路径部署到 Jetty 可访问的某个地方（这根本不可取，因为它给我和我的客户带来了许多问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-04T18:05:05.267

我不确定，如果`WebAppContext`Jetty 可以与`PathMatchingResourcePatternResolver`!

在我的一个项目中，我通过编写自己的`javax.servlet.Filter`. 加载请求的资源来解决这个问题`Class#getResourceAsStream`。 `Class#getResourceAsStream`从 jars 内部以及资源路径（例如 maven）内部读取资源。

希望这个技巧对你有帮助，干杯 Thilo

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-28T19:47:45.143

我相信，几个月前我遇到了类似的问题，我使用了 Jetty v9.4.12.v20180830。

这是我的解决方案：

如果您有以下生成的 JAR 结构：

```
 app.jar
   +----- com /
   |        +--- ( classes ... )
   |
   +----- config /
   |        |
   |        +--- display.properties
   |
   +----- webapp /
            |
            +--- index.html 
```

然后以下代码将引用正确的文件夹：

```
ServletContextHandler webappContext = new ServletContextHandler(ServletContextHandler.SESSIONS);  
URL webRootLocation = YourJettyStarterClass.class.getResource("/webapp/index.html");  
URI webRootUri = URI.create(webRootLocation.toURI().toASCIIString().replaceFirst("/index.html$", "/"));  
webappContext.setContextPath("/");
webappContext.setBaseResource(Resource.newResource(webRootUri));
webappContext.setWelcomeFiles(new String[] { "index.html" }); 
```

**重要的部分：**

```
URL webRootLocation = YourJettyStarterClass.class.getResource("/webapp/index.html"); 
```

# javascript - 使 JQuery Tokeninput 在点击时预填充搜索结果

> ID：12672686
> 
> 赞同：0
> 
> 时间：2012-10-01T11:49:21.920
> 
> 标签：javascript, jquery, jquery-plugins, autocomplete

所以这是一个挑战：有许多不同的自动完成 JS 插件。最近我从**Chosen** ( [http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/) ) 切换到 Tokeninput ( [http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/) )。问题是强制**Tokeninput**在第一次单击（焦点）时显示本地提供（通过数组）结果的完整列表，例如选择中的选择下拉**列表**

也许有一些方法可以用空字符串生成键盘事件，以便搜索结果可以是完整的项目列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:28:14.157

查看源代码后，我认为目前不可能。

但是，如果您了解一点 JS，您可能可以自己添加功能。

[https://github.com/loopj/jquery-tokeninput/blob/master/src/jquery.tokeninput.js](https://github.com/loopj/jquery-tokeninput/blob/master/src/jquery.tokeninput.js)

如果已设置，您可以创建一个`default_items`选项并`populate_dropdown`在第一个焦点上调用该函数。

我很乐意查看代码并帮助解决具体问题。

# c# - C# 2D 矢量运动 - 速度和方向

> ID：12672687
> 
> 赞同：0
> 
> 时间：2012-10-01T11:49:25.487
> 
> 标签：c#, game-physics, angle, vector-graphics

我正在做一个（可能很简单）任务，我想让绘制的对象移动到用户控制的（也绘制）。我所拥有的只是玩家 X 和 Y 坐标，分别定义为 Xp 和 Yp。必须移动到“玩家对象”的对象（在触发器之后，不包含在此处的代码中）在 this.X 和 this.Y 中定义了它的坐标。

```
 int xDirection = Xp - this.X;
        int yDirection = Yp - this.Y;
        int angleInDegrees = (int)Math.Atan2(xDirection, yDirection);
        double radians = (Math.PI / 180) * angleInDegrees;
        double xTmp = 3 * Math.Cos(radians);
        int xSpeed = (int)xTmp;
        double yTmp = 3 * Math.Sin(radians);
        int ySpeed = (int)yTmp;
        Console.WriteLine(xDirection);
        Console.WriteLine(yDirection);
        Console.WriteLine(xSpeed);
        Console.WriteLine(ySpeed);
        Console.ReadLine(); 
```

这并没有给我正确的数字，所以我想知道可能出了什么问题。

最困难的一点可能是必须移动到 playerobject 的对象可以从所有侧面（360 度）接近，但没有可用的接近角度。

我希望完成我的问题，蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:51:22.460

Math.Atan2 以弧度返回一个值，其他 c# 三角函数也是如此。

```
double angle = Math.Atan2(yDirection, xDirection); 
```

还要确保强制类型转换为小数：

```
3.0 * Math.Cos(radians); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:00:08.423

我打赌你看到的主要问题是这一行：

```
int angleInDegrees = (int)Math.Atan2(xDirection, yDirection); 
```

正如@catflier 所提到`Math.Atan2`的，以弧度返回角度（所以一个范围从 0 到 2pi 的数字）。但是，您执行强制转换`int`将*截断*小数位。所以如果你的角度是 45 度，那实际上返回了 ~0.785398 弧度。演员 to`int`将把它变成`0`. 同样，在 90 度，即 ~1.570796 弧度，转换`int`为`1`. 这是重大的舍入误差。正如我在评论中提到的，考虑将所有类型更改为双精度类型，并且只在可能的最后一点执行整数转换（我想你的对象是基于整数定位的）。

# uml - 使用 UML 活动图建模更新系统计时器的程序

> ID：12672698
> 
> 赞同：1
> 
> 时间：2012-10-01T11:50:04.480
> 
> 标签：uml, activity-diagram

我正在尝试使用 UML 对应用程序进行建模，并且需要一些帮助。

*   该程序由系统计时器每 60 秒启动一次。
*   该程序以一个名为的参数启动`Type`
*   我在系统重新启动后第一次启动程序时，程序以参数 1 启动。
*   该程序做我应该做的，并得到一个新的`Type`
*   程序更新系统计时器，以便下次启动程序时，它会获得新`Type`的参数。
*   然后程序结束。

我正在考虑用活动图对此进行建模，但不知道如何。

我做了以下实验。这是正确的，还是需要改变或可以改进的东西？

![我的第一次尝试](../Images/a776d39f62ba9b6fbc7df8595f841e2a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:01:50.313

您应该拥有一个具有内部活动来描述您的程序的活动，而不是使用并行区域。像这样的东西：

![复合活性](../Images/03958e2865672e727df6365b6b4ce4c5.png)

您在图表中描绘的是虚线内的区域接收多个输入并并行处理它们。不是你想要的。

操作系统部分对我来说似乎没问题。

# php - 如何在 MySQL 中存储（和查找）带有通配符的字符串？

> ID：12672702
> 
> 赞同：5
> 
> 时间：2012-10-01T11:50:29.830
> 
> 标签：php, mysql

我需要存储一个带有通配符的 IP 地址，例如 10.0.%.1。然后，我希望从我的查询中找到 IP 地址在允许范围 (10.0.0-255.1) 内的任何人。

你们能帮帮我吗？我已经尝试存储 10.0.%.1 但无法使用 LIKE 查询找到它（我什至不知道这是否是这样做的方法 - 可能不是）。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:11:19.640

将 IP 地址转换为 32 位整数，并为地址和掩码创建一列。您可以使用`INET_NTOA()`和`INET_ATON()`功能。您的 10.0.%.1 范围可以表示为网络 10.0.0.1，掩码为 255.255.0.255。要查看给定 IP 地址是否与此网络匹配，请将掩码应用于 IP 地址，并将其与网络地址进行比较。如果它们匹配，则地址在网络中。例如，如果您想测试 10.0.4.1，您可以使用按位与将掩码应用于它：

```
10.0.4.1 & 255.255.0.255 = 10.0.0.1 
```

这与您的网络地址匹配，因此该 IP 在网络中。

您可以像这样将此网络存储在您的表中（ip 和掩码是整数）：

```
CREATE TABLE networks (id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY, ip INT, mask INT);

INSERT INTO networks (ip, mask)
VALUES (INET_ATON('10.0.0.1'), INET_ATON('255.255.0.255')); 
```

您可以查看给定 IP (10.0.23.1) 是否匹配，如下所示：

```
SELECT * FROM networks
WHERE ip & mask = INET_ATON('10.0.23.1') & mask 
```

但是，如果您希望它们可读，这会将 IP 选择为整数：

```
SELECT id, INET_NTOA(ip) AS ipstring, INET_NTOA(mask) AS maskstring
FROM networks
WHERE ip & mask = INET_ATON('10.0.23.1') & mask 
```

这允许您测试单个给定 IP 地址是否与网络匹配。如果要测试一系列 IP，则必须将掩码应用于该范围内的每个 IP，并按上述方式测试每个 IP。您可以在单个查询中完成，只需列出您正在测试的每个 IP 地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:08:25.330

您如何将 IP 地址保存为数据库中的 4 个整数，如下所示：

```
IPpart1 IPpart2 IPpart3 IPpart4
-------------------------------
127     0       0       1 
```

并使它们可以为空。（NULL 将成为我们的通配符）

然后，您可以像这样对数据库进行查询：

```
SELECT * FROM iptable WHERE (IPpart1 IS NULL OR IPpart1 = '$firstpart') AND (IPpart2 IS NULL OR IPpart2 = '$secondpart') AND (IPpart3 IS NULL OR IPpart3 = '$thirdpart') AND (IPpart4 IS NULL OR IPpart4 = '$fourthpart') 
```

这有点冗长，它可以完成工作。

甚至应该可以从普通 IP 字段构造具有该结构的临时表，但是如果您有很多请求，那将是很多开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:19:05.633

我仔细查看了 MySQL 文档页面，并在那里找到了符合您需求的帖子：

```
SELECT '10.0.0.1' AS IP0,
( SUBSTRING_INDEX( '10.0.0.1', '.', 1 ) * 16777216 +
SUBSTRING_INDEX(SUBSTRING_INDEX( '10.0.0.1', '.', 2 ),'.',-1) * 65536 +
SUBSTRING_INDEX(SUBSTRING_INDEX( '10.0.0.1', '.', -2 ),'.',1) * 256 +
SUBSTRING_INDEX( '10.0.0.1', '.', -1 )
),
'10.0.255.1' AS IP1,
    ( SUBSTRING_INDEX( '10.0.255.1', '.', 1 ) * 16777216 +
    SUBSTRING_INDEX(SUBSTRING_INDEX( '10.0.255.1', '.', 2 ),'.',-1) * 65536 +
    SUBSTRING_INDEX(SUBSTRING_INDEX( '10.0.255.1', '.', -2 ),'.',1) * 256 +
    SUBSTRING_INDEX( '10.0.255.1', '.', -1 )
) AS IP2Num1 
```

返回每个 IP 的数值：

```
Ip:  |  10.0.0.1  | 10.0.255.1 |
--------------------------------
Num: | 167772161  | 167837441  | 
```

换句话说：

```
SELECT foo 
FROM bar.foobar
WHERE ( SUBSTRING_INDEX( ipField, '.', 1 ) * 16777216 +
    SUBSTRING_INDEX(SUBSTRING_INDEX( ipField, '.', 2 ),'.',-1) * 65536 +
    SUBSTRING_INDEX(SUBSTRING_INDEX( ipField, '.', -2 ),'.',1) * 256 +
    SUBSTRING_INDEX( ipField, '.', -1 )
) BETWEEN 167772161 AND 167837441; 
```

* * *

好吧，你*可以*这样做：

```
WHERE ipField LIKE '10.0.%.1'
AND (CAST
       (REPLACE(SUBSTRING_INDEX(ipField,'.',3),
                CONCAT(SUBSTRING_INDEX(ipField ,'.',2),'.')
                ,'')
     AS UNSIGNED) BETWEEN 0 AND 255) 
```

我使用以下查询进行了测试：

```
SELECT IF ('10.0.12.1' LIKE '10.0.%.1'
       AND (CAST
             (REPLACE( SUBSTRING_INDEX('10.0.12.1','.',3),
                 CONCAT(SUBSTRING_INDEX('10.0.12.1','.',2),'.')
              ,'')
            AS UNSIGNED) BETWEEN 0 AND 255),
      TRUE,
      FALSE); 
```

它返回了`1`，但是，老实说，这有点小题大做，不是吗？为什么不简单：

```
WHERE ipField REGEXP '10\\.0\\.[0-9]{1,3}\\.1' 
```

你可以稍微调整一下这个表达式，但基本上，在我看来，这似乎是查询这些 IP 地址的最简单方法。
有关 MySQL 字符串函数的更多信息（编写起来几乎总是很痛苦），请参阅[此处的文档](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)

# eclipse - 将要作为 EMF 模型导入的文件写入 Eclipse

> ID：12672705
> 
> 赞同：0
> 
> 时间：2012-10-01T11:50:41.677
> 
> 标签：eclipse, emf

我想在自定义工具（完全在 Eclipse 之外）中生成 Eclipse EMF 模型，然后将其保存为 Eclipse 可以导入并用作 EMF 模型的格式。我正在寻找什么格式可能是一个好的候选人的建议。如果格式可以是一种可以存储在文本文件中并且（相当）人类可读的类型，那就太好了。在某种意义上，如果该格式有可用的语法也会很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:11:39.423

GenMyModel 是一个在线建模器，作为测试版发布，完全符合您的需求。[您可以在http://www.genmymodel.com](http://www.genmymodel.com)上免费测试它。

GenMyModel 允许您创建类模型和图表并将它们导出为 Ecore 文件（依赖于 OMG 的 XMI，一种用于交换元数据信息的标准）。

# mysql - mod-ndb。它还活着吗？

> ID：12672706
> 
> 赞同：4
> 
> 时间：2012-10-01T11:50:46.890
> 
> 标签：mysql, apache, cluster-computing

有谁知道 mod-ndb 项目现在是死了还是发生了什么？我需要它的功能，但是它们与文档的链接已经失效，并且对源代码的最后一次更改是在两年前进行的。如果它死了，是否有类似的东西可以直接与 MySql Cluster 通信而无需 sql？（实际上，我需要从 nodejs 做到这一点，这就是 mod_ndb 完美的原因）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T22:42:40.123

似乎 mod-ndb 项目没有维护。最后一次代码提交是在 2011 年 11 月 4 日。

mysql-js 似乎是一个维护模块（MySQL JavaScript）有关此操作方法的 MySQL-JS 的更多信息：http: [//www.clusterdb.com/mysql/mysql-cluster-with-node-js/](http://www.clusterdb.com/mysql/mysql-cluster-with-node-js/)

# asp.net - 如何使用 asp.net web 服务调用 oracle web 服务

> ID：12672708
> 
> 赞同：0
> 
> 时间：2012-10-01T11:50:54.033
> 
> 标签：asp.net, web-services, oracle

如何使用 asp.net Web 服务调用 Oracle Web 服务？调用 asp.net web 服务和从 asp.net web 服务调用 Oracle web 服务有区别吗？

我找到了如何从另一个而不是 Oracle 调用 asp.net Web 服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:54:43.410

如果 Web 服务（任何 Web 服务）具有[WSDL](http://msdn.microsoft.com/en-us/library/ms996486.aspx)，那么您可以从 .Net 代码中调用它。只需将[WCF 配置实用程序](http://msdn.microsoft.com/en-us/library/aa347733.aspx)指向URL，或导入 WSDL，它就会为您生成代理。

# android - 为什么我的自定义 ListView 没有显示所有小部件？

> ID：12672711
> 
> 赞同：1
> 
> 时间：2012-10-01T11:51:00.473
> 
> 标签：android, listview

我正在使用自定义的 Listview 编写约会应用程序。ListView 由一个

*   视图，其颜色表示优先级
*   复选框，用于选择项目。
*   DateText，显示约会的日期
*   MonthText，显示约会的月份
*   TimeText，显示约会的时间
*   标题，存储约会的摘要

listView 中的每一行应如下所示：

![在此处输入图像描述](../Images/264f7b93d39c73a7e0f3d6c3ec49243d.png)

但只有两个小部件可见：DateText 和 MonthText。其余的都没有。为什么会这样？

![在此处输入图像描述](../Images/2fca83c675296095e3ffcd60787280e6.png)

我的`XML`和`getView()`方法如下：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <View
        android:id="@+id/priorityView"
        android:layout_width="20dip"
        android:layout_height="wrap_content"
        android:background="#cccccc"
        android:layout_alignParentLeft="true" />

    <CheckBox
        android:id="@+id/selectedCheckbox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@id/priorityView"
        android:layout_alignTop="@id/priorityView"
        android:layout_toRightOf="@id/priorityView"
        android:gravity="center">
    </CheckBox>

    <TextView
        android:id="@+id/dateText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@id/priorityView"
        android:layout_toRightOf="@id/selectedCheckbox"
        android:gravity="center"
        android:paddingBottom="2dip"
        android:paddingLeft="5dip"
        android:paddingRight="5dip"
        android:paddingTop="2dip"
        android:text="@string/empty"
        android:textSize="20dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/monthText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@id/monthText"
        android:layout_alignLeft="@id/dateText"
        android:layout_alignRight="@id/dateText"
        android:layout_below="@id/dateText"
        android:gravity="center"
        android:padding="5dip"
        android:text="@string/empty"
        android:textSize="10dip" >
    </TextView>

    <TextView
        android:id="@+id/timeText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@id/priorityView"
        android:layout_alignTop="@id/priorityView"
        android:layout_toRightOf="@id/dateText"
        android:gravity="center"
        android:padding="5dip"
        android:text="@string/empty" >
    </TextView>

    <TextView
        android:id="@+id/titleText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@id/priorityView"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@id/priorityView"
        android:layout_toRightOf="@id/timeText"
        android:gravity="center"
        android:padding="5dip"
        android:text="@string/empty" >
    </TextView>

</RelativeLayout> 
```

获取视图（）

```
public View getView(int position, View convertView, ViewGroup parent) {

                    // List views that go off the screen are recycled.

                    View recycledView = convertView;

                    if (recycledView == null) {
                        /*
                         * If there is no view to recycle (e.g. when the listview is
                         * first created) we must inflate the view from the xml file
                         * using Layout Inflater.
                         */

                        LayoutInflater inflater = (LayoutInflater) context
                                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                        recycledView = inflater.inflate(R.layout.row, null);
                    }

                    /*
                     * We now have a view to work with. We will now fill in the contents
                     * of this list view item.
                     */

                    Appointment current = items.get(position);
                    if (current != null) {

                        Log.e("crap",current.toString());

                        View priorityIndicator = (View) recycledView.findViewById(R.id.priorityView);
                        CheckBox selectedCheckbox = (CheckBox) recycledView.findViewById(R.id.selectedCheckbox);
                        TextView dateText = (TextView) recycledView.findViewById(R.id.dateText);
                        TextView monthText = (TextView) recycledView.findViewById(R.id.monthText);
                        TextView timeText = (TextView) recycledView.findViewById(R.id.timeText);
                        TextView titleText = (TextView) recycledView.findViewById(R.id.titleText);

                        //Set priority indictor to appropriate colour.
                        selectedCheckbox.setChecked(true);

                        switch (current.getPriority()) {
                        case PRIORITY_LOW:
                            priorityIndicator.setBackgroundColor(Color.BLUE);
                            break;

                        case PRIORITY_NORMAL:
                            priorityIndicator.setBackgroundColor(Color.GREEN);
                            break;

                        case PRIORITY_HIGH:
                            priorityIndicator.setBackgroundColor(Color.RED);
                            break;

                        default:
                            priorityIndicator.setBackgroundColor(Color.GRAY);
                            break;
                        }

                        //Leave the selected checkbox alone.

                        //Set dateText to show the date of the appointment
                        dateText.setText("29");
                        monthText.setText("SEP");
                        timeText.setText("11:00");
                        titleText.setText(current.getTitle());
                    }

                    return recycledView;
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:03:48.107

尝试使用具有重力属性的线性布局而不是相对布局。相对布局不适合在列表视图中膨胀。

# jquery - Jquery随机更改列表项的颜色

> ID：12672715
> 
> 赞同：-2
> 
> 时间：2012-10-01T11:51:11.343
> 
> 标签：jquery, random, html-lists

所以我是 jquery 的新手，我想制作一个新的导航菜单。我希望这个 jquery 脚本以我选择的各种颜色随机为我的列表项着色。让我们说红色，黄色，绿色，蓝色和黑色。此外，在选择颜色之前和之后也不应该有相同的颜色。

此外，我希望此菜单具有悬停功能，以便一旦悬停其中一个列表项，所有其他列表项都会获得灰色或其他 css 值的颜色。

我希望有人可以帮助我建立这个。

我知道我还没有做太多。

**HTML**：

```
<div id="wrapper">
    <div id="nav">
        <ul id="navigation">
            <li>Home</li>
            <li>About</li>
            <li>Products</li>
            <li>Blog</li>
            <li>Contact</li>
        </ul>
    </div>
</div> 
```

**查询**：

```
$(document).ready(function() {
    $('#navigation, li').addClass('blue');
}); 
```

**CSS**：

```
* {
    margin:0px; padding:0px;
}
body {
    background-color:#999;
}

#wrapper {
    width:960px; margin:auto; background-color:#CCC;
}
.blue {
    color:#567;
} 
```

jsfiddle上的演示，链接：http: [//jsfiddle.net/iBertel/vbpXP/11/](http://jsfiddle.net/iBertel/vbpXP/11/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:06:28.033

使用@massivePenguin 的想法在这里，基本上，我们创建一个数组，一些css 规则，列表中所有元素的默认悬停状态为灰色。我们最终得到了具有随机颜色效果的结果。

这是使您的数组随机化的关键。神奇的地方发生在这里，为了使效果更好，向数组添加 5 种左右的颜色以添加到“随机”效果。

```
colours.sort(function() {return 0.5 - Math.random()}); 
```

上面的代码是下面脚本中的关键因素。

```
var colours = ['red', 'yellow', 'blue', 'green', 'pink'];
$(document).ready(function() {
    $('#navigation li').hover(function() {
        colours.sort(function() {return 0.5 - Math.random()});
        $(this).addClass(colours[0]);
    }, function() {           
        $(this).removeClass(colours[0]);      
    });
});​ 
```

[http://jsfiddle.net/shannonhochkins/QkWXN/](http://jsfiddle.net/shannonhochkins/QkWXN/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:05:39.267

1.  将您的类放入一个数组中（例如 var colors = ['red','yellow','green','blue','black']）
2.  随机播放数组（请参阅[如何随机化（随机播放）JavaScript 数组？](https://stackoverflow.com/questions/2450954/how-to-randomize-a-javascript-array)）
3.  实例化一个计数器变量（例如 n）
4.  使用 .each() 函数来：
    *   将颜色数组的计数器索引值（例如 colours[n]）应用于悬停时的列表项
    *   增加计数器变量（例如 n++）

例如

```
$('#nav li').each(function(){
    var switchColour = colours[n];
    $(this).hover(function(){
        $(this).addClass(switchColour);
    },
    function(){
        $(this).removeClass(switchColour);
    })
    n++;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:54:52.823

因此，您可以使用以下代码实现此目的：

```
$('#navigation li').mouseover(function () {
    // this in this context is the currently hovered list DOM element.
    $(this).siblings().addClass('desired-class');
}).mouseout(function () {
    $(this).siblings().removeClass('desired-class');
}); 
```

只是一个说明：

您在两个不同的元素上具有相同的 ID。你应该改变它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T12:19:48.433

对于加载时的随机颜色，但不是在悬停时，使用这个：

```
$(function(){
    // The list items
    var $listItems = $("#navigation li");
    // Classes we want to use
    var classes = "red yellow green blue black".split(" ");
    // Create a copy of the classes
    var classesToUse = classes.slice(0);

    $listItems.each(function(){
        // Reuse the same classes if we've used all up
        if (classesToUse.length === 0) { classesToUse = classes.slice(0); }
        // Generate a random class, remove that from classesToUse
        // and then add it to the element
        $(this).addClass(
            classesToUse.splice(
                Math.floor(Math.random() * classesToUse.length), 
                1
            ).join("")
        );
    });
});​ 
```

如果您想在每次悬停时使用随机颜色，请执行以下操作：

```
$(function(){
    // The list items
    var $listItems = $("#navigation li");
    // Classes we want to use
    var classes = "red yellow green blue black".split(" ");
    // Function to generate a random class
    function getRandomClass() {
        return classes[Math.floor(Math.random() * classes.length)]
    }
    // Bind to hover so that we can generate a new class
    $listItems.hover(function(e){
        var $elm = $(this); 
        if (e.type === "mouseenter") {
            // Generate new class, add it to dataset and class
            var randomClass = getRandomClass();
            $elm.data("class", randomClass).addClass(randomClass);
        } else {
            // Remove previous class, if any
            $elm.removeClass($elm.data("class"));
        }
    });
}); 
```

请参阅[jsFiddle 的测试用例](http://jsfiddle.net/mekwall/Ma9Ja/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T12:26:14.980

也许，像这样的东西？:**[演示 jsFiddle](http://jsfiddle.net/fGcQk/2/ "演示 jsFiddle")**

颜色不能与同一种颜色相邻。但是，这是一个随机选择，所以即使所有颜色都还没有被选中，也可以有两次相同的颜色。

**编辑`hover`**

```
var myColors = ['blue', 'red', 'green', 'yellow'], previousRandom = '';

$(function() {
    var li = $('#navigation li');
    li.each(function(i){
        var t = $(this), random;
        do{
            random = Math.floor((Math.random() * myColors.length ));
        }while(random == previousRandom);
        t.addClass(myColors[random]);
        previousRandom = random;
    });

    li.hover(
        function(){ $(this).siblings().addClass('neutral'); },
        function(){ $(this).siblings().removeClass('neutral'); }
    );
});​ 
```

# php - 在 iPhone 应用程序中使用 PHP 网络服务

> ID：12672717
> 
> 赞同：1
> 
> 时间：2012-10-01T11:51:20.267
> 
> 标签：php, iphone, objective-c, json, web-services

我用 PHP 开发了一个 web 服务。它使用 MySQL 数据库。在这方面，我使用了 JSON。我想在我的 iPhone 应用程序中从此网络服务中获取数据。我使用了一个有一个参数的函数。如何在 iPhone 中使用它？

网络服务：

```
<?php

echo getdata($_REQUEST['lastupdate']);

function getdata($lastupdatedate){

    $json = '{"foo-bar": 12345}';

    $obj = json_decode($json);

    //print $obj->{'foo-bar'}; // 12345

    $con = mysql_connect("localhost","un","pwd");

    if (!$con)

    {

    die('Could not connect: ' . mysql_error());

    }

    //print_r($con);

    mysql_select_db("roster", $con);

    $query = "select * from rates where LastUpdated = '".$lastupdatedate."' order by LastUpdated limit 1";

    $rs = mysql_query($query) or die($query);

    //print_r($rs);

    while($row=mysql_fetch_assoc($rs)){

    $record[] = $row;

    }

    $data = json_encode($record);

    header('Cache-Control: no-cache, must-revalidate');

    header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');

    header('Content-type: application/json');

    return $data;

}

?> 
```

我正在请求网址：`http://domain/t1.php?lastupdate=2012-09-01 01:00:00`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:11:51.927

您将创建一个请求`http://domain/t1.php?lastupdate=2012-09-01 01:00:00`，然后解析您的响应 JSON。

根据您的代码应该如何运行（加载或基于某些用户操作），您的代码应该类似于来自[raywenderlich.com的示例](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

基本代码片段：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL:yourURLValue];
        [self performSelectorOnMainThread:@selector(fetchedData:) 
          withObject:data waitUntilDone:YES];
    });
}

- (void)fetchedData:(NSData *)responseData {
    //parse out the json data
    NSError* error;
    NSDictionary* json = [NSJSONSerialization 
        JSONObjectWithData:responseData //1

        options:kNilOptions 
        error:&error];

    NSArray* JSONResultValues = [json objectForKey:@"yourKey"]; //2

    NSLog(@"Results: %@", JSONResultValues); //3
} 
```

# java - JDK 动态代理

> ID：12672721
> 
> 赞同：0
> 
> 时间：2012-10-01T11:51:32.670
> 
> 标签：java, proxy, aop, proxy-classes

我知道 cglib 代理通过子类化目标类和覆盖目标类的方法来工作。

谁能说出动态代理的工作原理？我知道它使用接口进行代理，但是方法调用究竟是如何通过代理发生的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:09:24.643

使用`Proxy.newProxyInstance()`您可以请求实现所需接口的代理。您还需要传递一个[`InvocationHandler`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/InvocationHandler.html)，每次调用任何代理方法时都会调用它。然后，在您的处理程序中，您知道调用了哪个方法及其参数，因此您可以做您想做的事情，包括使用目标对象。

Java 是如何处理这个问题的？好吧，它是本地完成的，就像`reflection`许多基本功能的内部结构一样。因此，您可以使用纯 Java 模拟这种行为。

扩展信息[在这里](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html)。

# php - PHP SQL - 随机选择 1 行，其中 ID = x

> ID：12672725
> 
> 赞同：0
> 
> 时间：2012-10-01T11:51:56.027
> 
> 标签：php, mysql, database, random

我有一个 MySQL 数据库，我需要一个 PHP 来拉随机行。我已经成功创建

```
$query = "SELECT * FROM $usertable
          WHERE region='UK'          
          ORDER BY RAND() LIMIT 1"; 
```

这成功地随机拉了一行；但是，它不限于 where `region=2`。

我需要能够：

1.  时随机拉`region=UK`
2.  随机拉时`region=UK`或##

（其中 ## 实际上是另一个区域，例如 YK = 约克郡）

基本上我需要它来随机选择行，但仅在`region=UK`.

`region`是 my 之一的标签，`fields/collumns`是多行的 in that`UK`的内容。`VARCHAR`

我对其余的代码进行了排序。

我有一个简单的数据库和 php 如下：

```
<?php
//Sample Database Connection Syntax for PHP and MySQL.
//Connect To Database
$hostname="carbonmarketing.db.9606426.hostedresource.com";
$username="MarketReadOnly";
$password="Read0nly1";
$dbname="carbonmarketing";
$usertable="ClientList";
$advertfooter = "advertfooter";
mysql_connect($hostname,$username, $password) or die ("<html>%MINIFYHTML4333ddb1f6ba50276851b9f9854a5c817%</html>");
mysql_select_db($dbname);
# Check If Record Exists
$query = "SELECT * FROM $usertable
          WHERE region='UK'          
          ORDER BY RAND() LIMIT 1";
$result = mysql_query($query);
if($result)
{
    while($row = mysql_fetch_array($result))
    {
        $advertfooter = $row["$advertfooter"];
        echo "$advertfooter";

    }
}
?> 
```

但是，它只是随机抽取`region`列的所有值

让我知道它是否有助于您查看数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:56:20.167

制作和排列您的区域并内爆它们：

```
$region = array('UK', 'YK');
$implode = implode("', '", $region);
$query = "SELECT * FROM `".$usertable."` WHERE `region` IN ('".$implode."') ORDER BY RAND() LIMIT 1"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:56:07.877

```
$query = "SELECT * FROM $usertable
          WHERE region IN ('UK','YK')          
          ORDER BY RAND() LIMIT 1"; 
```

# javascript - Safari 显示占位符在焦点上

> ID：12672726
> 
> 赞同：0
> 
> 时间：2012-10-01T11:52:07.513
> 
> 标签：javascript, html, safari

当元素集中在重新加载时，我想要一个占位符。

它似乎在 Firefox 和 Chrome 中有效，但在 Safari 中无效。

经过一番谷歌搜索后，我发现当输入元素集中在 Safari 和 Mac 中时，占位符被删除。

[http://jsbin.com/iqofuh/1/edit](http://jsbin.com/iqofuh/1/edit)

当我单击此输入元素（即焦点）时，占位符在 safari 和所有 Mac 浏览器（即 chrome、firefox、safari）中消失，但在其他浏览器（即 chrome、ff 最新版本）中效果很好

根据 w3c 学校

提示为空时显示在输入字段中，当字段获得焦点时提示消失。

如何覆盖此默认行为

# mysql - 不同的交易必须保证选择不同的项目；避免争吵

> ID：12672728
> 
> 赞同：3
> 
> 时间：2012-10-01T11:52:07.643
> 
> 标签：mysql, sql

作为注册新用户的一部分；我们从预编译列表（表）中为它们分配资源（在本例中为 Solr 核心）。

如果有 5 个用户注册，则必须为他们分配 5 个**不同的核心**；如果用户成功注册，则分配是最终的（见下面我的描述）。

但在现实世界中，同时注册的新用户**竞争同一行，而不是选择不同的行**。如果 X 需要 5 秒来注册，那么在 X 的“持续时间”内的 Y 和 Z 的注册将失败，因为它们与 X 竞争同一行。

**问题：**如何在每秒100个注册这样的高并发下，让交易选择没有争用？

```
table: User
user_id   name  core   
      1    Amy h1-c1
      2    Anu h1-c1
      3    Raj h1-c1
      4    Ron h1-c2
      5    Jon h1-c2

table: FreeCoreSlots
core_id  core status   
      1 h1-c1   used
      2 h1-c1   used
      3 h1-c1   used
      4 h1-c2   used
      5 h1-c2   used #these went to above users already
      6 h1-c2   free
      7 h1-c2   free
      8 h1-c2   free
      9 h1-c2   free 
```

如果东西被隔离了，则为伪代码：

```
sql = SQLTransaction()
core_details = sql.get("select * from FreeCoreSlots limit 1")
sql.execute("update FreeCoreSlots set status = 'used' where id = {id}".format(
   id = core_details["id"]))
sql.execute("insert into users (name,core) values ({name},{core})".format(
   name = name,
   id   = core_details["id"]))
sql.commit() 
```

* * *

如果每秒发生 100 次注册，他们将**争夺第一行**并`FreeCoreSlots`导致严重失败。

有一个 select... for update 如[InnoDB SELECT ... FOR UPDATE 语句锁定表中的所有行](https://stackoverflow.com/questions/6690458/innodb-select-for-update-statement-locking-all-rows-in-a-table)作为解决方案，但他们似乎建议降低隔离。这种方法正确吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T12:07:09.440

通过将事务隔离级别设置为可序列化。

[http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html](http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html)

实际上，这会阻止其他事务在事务处理时更改更新的表，从而确保您的数据以原子、一致的方式更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T10:43:49.943

我要问的问题是为什么用户可能需要 5 秒才能完成。在`START TRANSACTION`和之间`COMMIT`应该只有几分之一秒。

为防止您再次将同一行分配给`FreeCoreSlots`同一用途，您必须使用`SELECT for UPDATE`. 在我看来，锁定级别并不是真正的问题。您设计数据库下一个空闲行的`FreeCoreSlots`方式实际上是锁定的，直到事务完成。请参阅下面的测试结果。而且我确实认为即使每秒 100 个新用户也应该足够了。但是如果你甚至想克服这个问题，你必须找到一种方法来锁定另一个下一个空闲行`FreeCoreSlots`给每一位用户。不幸的是，没有“选择第一行，除非它有锁”的功能。也许改为使用一些随机或模数逻辑。但正如我已经说过的，我认为这不应该是你的问题，即使每秒有 100 个新用户是不可想象的。如果我对此有误，请随时发表评论，我愿意再看一遍。

这是我的测试结果。默认 InnoDB 锁定级别：**可重复读取**，无需`FOR UPDATE`. 这样它不起作用。

```
User 1:
    START TRANSACTION
    SELECT * FROM FreeCoreSlots WHERE status = 'FREE' LIMIT 1 -- returns id 1
User 2:
    START TRANSACTION
    SELECT * FROM FreeCoreSlots WHERE status = 'FREE' LIMIT 1 -- also returns id 1 !!!
User 1:
    UPDATE FreeCoreSlots SET status = 'USED' where ID = 1;
User 2:
    UPDATE FreeCoreSlots SET status = 'USED' where ID = 1; -- WAITS !!!
User 1:
    INSERT INTO user VALUES (...
    COMMIT;
USER 2:
    wait ends and updates also ID = 1 which is WRONG 
```

锁定级别**可重复读取**，但带有`FOR UPDATE`. 这样它就可以工作了。

```
User 1:
    START TRANSACTION
    SELECT * FROM FreeCoreSlots WHERE status = 'FREE' LIMIT 1 FOR UPDATE -- returns id 1
User 2:
    START TRANSACTION
    SELECT * FROM FreeCoreSlots WHERE status = 'FREE' LIMIT 1 FOR UPDATE -- WAITS
User 1:
    UPDATE FreeCoreSlots SET status = 'USED' where ID = 1;
User 2:
    still waits
User 1:
    INSERT INTO user VALUES (...
    COMMIT;
USER 2:
    Gets back Id 2 from the select as the next free Id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T14:50:28.367

将分配推迟到最后可能的时刻。不要在注册过程中尝试绑定它。

将状态列用作并发策略。应用一个谓词，以确保您仅在该行仍然“空闲”时才更新该行。使用默认隔离级别，读取将是非阻塞的。您的更新将更新 1 行或不更新。如果不成功，您可以循环，并限制尝试次数（以防空闲插槽用尽）。您还可以预取 1 个以上的免费 ID，以节省您尝试的往返次数。最后，这作为一个返回新分配槽的 id 的存储过程会更好。在这种情况下，您可以在存储过程中使用类似的策略，在其中获取/更新直到更新成功。在高竞争环境中，如果串行分配不是很重要，我会从前 N 个空闲的随机行中选择一个。

```
sql = SQLTransaction()

core_details = sql.get("select * from FreeCoreSlots where status = 'free' limit 1")
sql.execute("update FreeCoreSlots set status = 'used' where id = {id} and status = 'free'".format(
   id = core_details["id"]))

//CHECK ROW COUNT HERE (I don't know what language or library you are using.
//Perhaps sql.execute returns the number of rows affected).
//REPEAT IF ROW COUNT < 1

sql.execute("insert into users (name,core) values ({name},{core})".format(
   name = name,
   id   = core_details["id"]))
sql.commit() 
```

# jaxb - 如何忽略父类中的 JAXB 注释属性？

> ID：12672732
> 
> 赞同：8
> 
> 时间：2012-10-01T11:52:32.707
> 
> 标签：jaxb, marshalling

我们有一个在一个属性上带有 JAXB 注释的类。然后我们有几个子类来注释其余的重要数据。然而，我们有一个子类，我们想忽略父类注释，这样它就不会被编组。这是一些示例代码。

父类：

```
@XmlType(name="Request")
@XmlAccessorType(XmlAccessorType.NONE)
public abstract class Request {
    @XmlElement(required=true)
    private UUID uuid;

    ... setter/getter
} 
```

现在对于子类：

```
@Xsd(name="concreteRequest")
@XmlRootElement("ConcreteRequest")
@XmlType(name="ConcreteRequest")
@XmlAccessorType(XmlAccessorType.FIELD)
public class ConcreteClass {
    @XmlElement(required=true)
    private String data1;
    @XmlElement(required=true)
    private String data1;

    ... setters/getters ...
} 
```

当我 masrhall 一个 ConcreteClass 的实例时，我得到以下 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ConcreteRequest>
    <uuid>uuid</uuid>
    <data1>data</data1>
    <data2>data</data3>
</ConcreteRequest> 
```

我想要这样的XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ConcreteRequest>
    <data1>data</data1>
    <data2>data</data3>
</ConcreteRequest> 
```

我们有其他的 Request 实现，但是确实需要 UUID，这只是一个特例。有没有办法忽略我的 ConcreteRequest 中的 UUID 字段？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T13:01:40.647

*我希望，我理解你的问题。这是解决方案。*

JAXB 提供`@XmlTransient(javax.xml.bind.annotation.XmlTransient)`[(javadoc)](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/XmlTransient.html?is-external=true)在编组期间忽略任何字段。

*将派生类 (ConcreteRequest.class) 中的“uuid”*字段及其对应的 Getter/Setter 方法重写为**@XmlTransient**。还需要重写 Getter/Setter 方法，这些方法将在编组期间调用。

```
@Xsd(name="concreteRequest")
@XmlRootElement("ConcreteRequest")
@XmlType(name="ConcreteRequest")
@XmlAccessorType(XmlAccessorType.FIELD)
public class ConcreteClass {
    @XmlElement(required=true)
    private String data1;
    @XmlElement(required=true)
    private String data2;
    @XmlTransient
    private UUID uuid;

    ... setters/getters ...
} 
```

这将覆盖您的基类属性。

回复我以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-28T10:37:42.593

您可以使用

```
@XmlAccessorType(XmlAccessType.NONE) 
```

在父类上，和

```
@XmlAccessorType(XmlAccessType.FIELD) 
```

在派生类上。

# codeigniter - codeigniter重定向问题

> ID：12672735
> 
> 赞同：0
> 
> 时间：2012-10-01T11:52:37.620
> 
> 标签：codeigniter

我尝试将搜索重定向到正确的控制器。如果我在搜索键中没有特殊字符，这可以正常工作。如果我有特殊键，我会从 codeigniter 收到错误：

> 所提交的网址带有不被接受的字符。

这是我的代码：

```
public function search()
{
    $searchkey = urlencode($this->input->post('searchkey'));
    switch ($this->input->post('searchtype')) {
        case 'request':     redirect('portal/requests/search/'.$searchkey, 'refresh');
                            break;
        case 'offers':      redirect('portal/offers/search/'.$searchkey, 'refresh');
                            break;
        case 'projects':    redirect('portal/projects/search/'.$searchkey, 'refresh');
                            break;
        default:            redirect('portal/requests/search/'.$searchkey, 'refresh');
                            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:00:24.467

那是因为您不能在您的网址中放置“特殊”字符

即，如果我搜索“测试”，我将被带到门户/项目/搜索/测试

但是如果我搜索 test@#$)*&&f - 你不能有一个包含这些字符的 url

要解决此问题，请对帖子进行验证，并使搜索词只有[数字和字母](http://codeigniter.com/user_guide/libraries/form_validation.html#rulereference)：

```
$this->form_validation->set_rules('searchtype', 'Search Type', 'required|alpha_numeric'); 
```

或者您必须“传递”搜索词以以另一种方式运行 - 可能使用[闪存数据](http://codeigniter.com/user_guide/libraries/sessions.html)，以便搜索词不会通过 url 传递

编辑：供您参考的默认 url 字符（来自 config.php 的第 129 行（大约））

```
 $config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:01:36.477

或者，如果需要，您可以使用 jquery 并将搜索键发布到控制器。

# java - 通过最近的纬度和经度坐标使用 SQLITE 排序

> ID：12672740
> 
> 赞同：7
> 
> 时间：2012-10-01T11:52:59.923
> 
> 标签：java, android, sqlite, latitude-longitude

在给定初始位置的情况下，我必须获得一个 SQLite SQL 语句，以便按最近的纬度和经度坐标进行排序。

这是我在 sqlite 数据库中的表的示例语句：

```
SELECT id, name, lat, lng FROM items

EXAMPLE RESULT: 1, Museu, 41375310.0, 2175970.0 
```

我必须用 SQLite 和那个表来实现这一点。我不能使用其他技术，因为这是我无法更改的现有 SQlite 数据库。

有没有办法通过 Android 和 SQlite 实现这一点？我检查了很多stackoverflow帖子，但没有找到实现这一目标的方法

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-01T12:02:34.167

```
SELECT * AS distance FROM items ORDER BY ABS(location_lat - lat) + ABS(location_lng - lng) ASC 
```

这应该在 MySQL 中对距离上的项目进行粗略排序，并且*应该*在 SQLite 中工作。
如果您需要更精确地对它们进行排序，您可以尝试使用勾股定理 (a^2 + b^2 = c^2) 来获得准确的距离。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-09-03T00:33:09.490

Darkwater 的答案几乎是正确的。为了正确，您需要使用差异的平方。由于 Square 函数在 SqlLite 上不可用，因此您需要将差异乘以它们自己。无需计算平方根。

```
SELECT * AS distance FROM items ORDER BY ((location_lat-lat)*(location_lat-lat)) + ((location_lng - lng)*(location_lng - lng)) ASC 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-09-02T17:54:17.833

克里斯提出的解决方案：

> SELECT * AS distance FROM items ORDER BY ((location_lat-lat)*(location_lat-lat)) + ((location_lng - lng)*(location_lng - lng)) ASC

当我们靠近赤道时是正确的。为了让它在其他纬度正常工作，我建议：

> SELECT * AS distance FROM items ORDER BY ((location_lat-lat)*(location_lat-lat)) + ((location_lng - lng)*(location_lng - lng)* **cos_lat_2** ) ASC

我们必须预先计算：

```
cos_lat_2 = cos(location_lat * PI / 180) ^ 2 
```

问题：

如果我们在赤道并且我们在经度上移动 1 度（东或西），我们在 40,000 公里的圆周上移动，代表距离为 40.000 / 360。如果我们在纬度上移动 1 度（北或南），我们在一个穿过两极的圆上这样做，这也涉及 40.000 / 360 的距离（考虑到地球是一个球体）。

但是，如果我们在英格兰南部，纬度为 50°，并且我们在经度上移动 1 度（东或西），我们会在 50 度纬线上进行，它的周长小于赤道。距离是 perimeter_parallel_50 / 360。计算这个周长很简单：perimeter_parallel_50 = cos (50) * 2 * PI * EARHT_RADIUS = 0.64 * 40,000 km。如果我们向南或向北移动 1 度，则看不到这种距离的减少。我们移动的圆周仍有 40,000 公里的周长。

解决方案：

由于 location_lat 是一个预先知道的值，我们可以预先计算 cos(location_lat) 的值，以便将其用作比例因子，使经度和纬度的位移相等。此外，我们预先平方它以避免必须将其乘以两次。

笔记：

这仍然是一个近似值，在大距离移动时会给出错误的结果，尤其是在两极附近和穿过 180 度子午线时。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-25T19:36:11.833

如果你知道，1 度的纬度大约是 111111 米，1 度的经度是 111111*cos(latitude) 米，那么你可以很容易地得到一个特定正方形内的所有地方。

```
SELECT * FROM items WHERE latitude BETWEEN %f AND %f AND longitude BETWEEN %f AND %f 
```

这个查询非常快，即使有数百万行。但不要忘记为纬度和经度创建索引：

```
CREATE INDEX position ON items (latitude, longitude) 
```

我在 Objective-C 中使用它来获取当前位置周围 3 公里内的所有景点：

```
double latDist = 1.0 / 111111.0 * 3.0;
double lonDist = 1.0 / ABS(111111.0*cos(location.coordinate.latitude)) * 3.0;

FMResultSet *results = [database executeQueryWithFormat:@"SELECT * FROM items WHERE latitude BETWEEN %f AND %f AND longitude BETWEEN %f AND %f", location.coordinate.latitude - latDist, location.coordinate.latitude + latDist, location.coordinate.longitude - lonDist, location.coordinate.longitude + lonDist]; 
```

您现在可以计算确切的距离并对结果进行排序...

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-01T12:08:10.833

如果您能够加载记录；将它们转换为 Locations ，然后使用我推荐[的 distanceTo 函数，但是......](http://developer.android.com/reference/android/location/Location.html#distanceTo%28android.location.Location%29)

您可以使用简单的 SQL 来估计两点之间的距离，[这里清楚地列出](http://hoopercharles.wordpress.com/2011/06/13/calculate-the-distance-between-two-latitudelongitude-points-using-plain-sql/)了各种方法。您要比较的点越远，如果您使用简单的计算，您的值就会变得越来越不正确

如果您自己计算这些东西并且您的位置可以在任何地方，那么如果您比较国际日期变更线周围的位置，您可能需要注意环绕的值。

# android - Android：尝试编写只读数据库

> ID：12672745
> 
> 赞同：4
> 
> 时间：2012-10-01T11:53:28.290
> 
> 标签：android, database, android-sqlite

我有一个 sqlite 数据库文件，我无法在这个数据库文件上读写。我正在使用这段代码：

```
fileIsExists = new File(Environment.getExternalStorageDirectory()
            + "/bbmp/bbmp2.sqlite");
    if (fileIsExists.exists()) {
db = SQLiteDatabase.openDatabase(fileIsExists.toString(), null,
                 SQLiteDatabase.OPEN_READWRITE);        
} 
```

这会引发以下错误：

```
10-01 17:09:17.343: E/Database(9216): DELETE failed setting locale

10-01 17:09:17.374: E/Database(9216): Failed to setLocale() when constructing, closing the database

10-01 17:09:17.374: E/Database(9216): android.database.sqlite.SQLiteException: attempt to write a readonly database

10-01 17:09:17.374: E/Database(9216):   at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)

10-01 17:09:17.374: E/Database(9216):   at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java:1987)

10-01 17:09:17.374: E/Database(9216):   at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1855)

10-01 17:09:17.374: E/Database(9216):   at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)

10-01 17:09:17.374: E/Database(9216):   at com.pixel.bbmp2.Bbmp2Activity.checkDirectory(Bbmp2Activity.java:150)

10-01 17:09:17.374: E/Database(9216):   at com.pixel.bbmp2.Bbmp2Activity.onCreate(Bbmp2Activity.java:115)

10-01 17:09:17.374: E/Database(9216):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)

10-01 17:09:17.374: E/Database(9216):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)

10-01 17:09:17.374: E/Database(9216):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)

10-01 17:09:17.374: E/Database(9216):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)

10-01 17:09:17.374: E/Database(9216):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)

10-01 17:09:17.374: E/Database(9216):   at android.os.Handler.dispatchMessage(Handler.java:99)

10-01 17:09:17.374: E/Database(9216):   at android.os.Looper.loop(Looper.java:123)

10-01 17:09:17.374: E/Database(9216):   at android.app.ActivityThread.main(ActivityThread.java:3683)

10-01 17:09:17.374: E/Database(9216):   at java.lang.reflect.Method.invokeNative(Native Method)

10-01 17:09:17.374: E/Database(9216):   at java.lang.reflect.Method.invoke(Method.java:507)

10-01 17:09:17.374: E/Database(9216):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)

10-01 17:09:17.374: E/Database(9216):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)

10-01 17:09:17.374: E/Database(9216):   at dalvik.system.NativeStart.main(Native Method) 
```

下表在数据库文件中 ![在此处输入图像描述](../Images/8a36c476554c42ec222f3462e45df3b3.png)

我需要在这里做什么？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:13:10.083

您正在尝试以写入模式打开只读数据库。您可以在此处检查以只读模式打开数据库的代码[有人可以解释这一行的作用吗？](https://stackoverflow.com/questions/7456900/could-someone-explain-what-this-line-does)

# php - 传销 php 生成 ul li

> ID：12672747
> 
> 赞同：-2
> 
> 时间：2012-10-01T11:53:38.063
> 
> 标签：php

我是 php 的新手，我目前正在做传销项目。逻辑如下。
我有以下字段子名、父名、位置（左或右）的表。
我想将它转换为一棵树，如果任何父母已经离开了孩子，那么即将到来的左孩子作为最后一个左孩子的孩子，并且右孩子插入的逻辑相同。
我有一个 jquery 插件来将 ul li 转换为树。
请帮忙。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:12:46.653

我建议[http://jquery.bassistance.de/treeview/demo/](http://jquery.bassistance.de/treeview/demo/)使用 HTML 和 JQuery 进行树视图设计。您也可以使用 PHP 进行绑定。

希望对你有帮助！！

# android - 在 CursorAdapter 中 bindView() 和 newView() 做了什么

> ID：12672749
> 
> 赞同：25
> 
> 时间：2012-10-01T11:53:39.057
> 
> 标签：android, android-cursoradapter

我的项目中有一个自定义方法，`CursorAdaptor`其中包含重写方法`bindView(View view, Context context, Cursor cursor)`和`newView(View view, Context context, Cursor cursor)`. 我想知道用于什么以及覆盖and`CursorAdapter`的区别和用途是什么。 `bindView()``newView()`

我已经阅读了[开发者网站](http://developer.android.com/reference/android/widget/CursorAdapter.html)和[本](http://thinkandroid.wordpress.com/2010/01/11/custom-cursoradapters/)教程，但我仍然不明白。由于我是 Android 的初学者，请帮助我理解这个概念。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-10-01T12:10:27.013

为了理解这一点，您必须首先了解其[`BaseAdapter`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/5.1.1_r1/android/support/v4/widget/CursorAdapter.java#CursorAdapter.bindView%28android.view.View%2Candroid.content.Context%2Candroid.database.Cursor%29)工作原理，因为[`CursorAdapter`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/5.1.1_r1/android/support/v4/widget/CursorAdapter.java#CursorAdapter.bindView%28android.view.View%2Candroid.content.Context%2Candroid.database.Cursor%29)它是`BaseAdapter`.

Android 维护了一个视图池，`ListView`它将提供给您，因此您可以重复使用它，而不是每次都创建一个新视图。

在其中`BaseAdapter`，您将拥有一个名为 的函数[`getView()`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/5.1.1_r1/android/support/v4/widget/CursorAdapter.java#CursorAdapter.bindView%28android.view.View%2Candroid.content.Context%2Candroid.database.Cursor%29)，其中一个参数是一个`View`名为 的对象`convertView`。基本上，这`convertView`将是第一次加载列表时，一旦开始滑动列表`null`就不会了。`null`因此，在您的`getView()`方法中`BaseAdapter`，您将检查 if `convertView`is `null`。如果是的话，你会膨胀它。然后您可以使用视图并将其元素设置为正常。这将极大地提高列表视图的滚动性能。

当列表视图的数据源是数据库时， A`CursorAdapter`使其易于使用。然而，在光标适配器中，Android 负责检查是否`convertView`存在`null`。在该[`newView()`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/5.1.1_r1/android/support/v4/widget/CursorAdapter.java#CursorAdapter.bindView%28android.view.View%2Candroid.content.Context%2Candroid.database.Cursor%29)方法中，您只需对视图进行膨胀并返回它。在该[`bindView()`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/5.1.1_r1/android/support/v4/widget/CursorAdapter.java#CursorAdapter.bindView%28android.view.View%2Candroid.content.Context%2Candroid.database.Cursor%29)方法中，您设置视图的元素。

例如，假设设备上的列表视图可以在屏幕上显示多达 11 个列表项。在这种情况下，`newView()`最多会调用 11 次。但是，`bindView()`每当您滚动列表视图时都会调用多次。您在 newView 方法中创建的 11 个视图将在您滚动列表时一次又一次地重复使用。

# python - 在 python 中运行计时器几分钟

> ID：12672750
> 
> 赞同：1
> 
> 时间：2012-10-01T11:53:40.477
> 
> 标签：python, multithreading, timer, python-multithreading

我试图每秒运行一个特定的函数“foo”。我必须这样做几分钟（比如5）。

函数 foo() 向服务器发出 100 个 HTTP 请求（其中包含一个 JSON 对象）并打印 JSON 响应。

简而言之，我必须在 5 分钟内每秒发出 100 个 HTTP 请求。

我刚刚开始学习python，因此没有广泛的知识。这是我尝试过的：

```
import threading
noOfSecondsPassed = 0
def foo():
   global noOfSecondsPassed
   # piece of code which makes 100 HTTP requests (I use while loop)
   noOfSecondsPassed += 1

while True:
   if noOfSecondsPassed < (300)  # 5 minutes
       t = threading.Timer(1.0, foo)
       t.start() 
```

由于多线程，函数 foo 没有被调用 300 次，但远不止于此。我也尝试过设置锁：

```
def foo():
  l = threading.Lock()
  l.acquire()
  global noOfSecondsPassed
  # piece of code which makes 100 HTTP requests (I use while loop)
  noOfSecondsPassed += 1
  l.release() 
```

其余代码与前面的代码片段相同。但这也行不通。

我该怎么做呢？

**编辑：不同的方法**

我已经尝试过这种对我有用的方法：

```
def foo():
    noOfSecondsPassed = 0
    while noOfSecondsPassed < 300:
       #Code to make 100 HTTP requests
       noOfSecondsPassed +=1
       time.sleep(1.0)
foo() 
```

这样做有什么坏处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:15:36.387

我会使用另一种我认为更容易的方法。

创建 300 个计时器线程，每个线程在前一个之后运行 1 秒。主循环几乎在瞬间执行，因此错误率非常低。这是一个示例演示：

```
import datetime
import thread
import threading

def foo():
     print datetime.datetime.now()
     print threading.active_count()

for x in range(0,300): 
     t = threading.Timer(x + 1, foo)
     t.start() 
```

此代码输出应如下所示：

```
2012-10-01 13:21:07.328029
301
2012-10-01 13:21:08.328281
300
2012-10-01 13:21:09.328449
299
2012-10-01 13:21:10.328615
298
2012-10-01 13:21:11.328768
297
2012-10-01 13:21:12.329006
296
2012-10-01 13:21:13.329289
295
2012-10-01 13:21:14.329369
294
2012-10-01 13:21:15.329580
293
2012-10-01 13:21:16.329793
292
2012-10-01 13:21:17.329958
291
2012-10-01 13:21:18.330138
290
2012-10-01 13:21:19.330300                                                                                                                                                                                                                         
289                         
... 
```

如您所见，每个线程在前一个线程之后大约 1 秒启动，并且您正在启动 300 个线程。

# css - Sass：使用多个嵌套选择器选择父元素

> ID：12672751
> 
> 赞同：5
> 
> 时间：2012-10-01T11:53:48.173
> 
> 标签：css, css-selectors, sass

这是我最终想要做的事情：

```
.books, .dvds, .magazines {
  article &.books {
    /* Wanting the selector to only be ".books article" */
  }
  article {
    /* Can apply to any of the `article` tags under .books, .dvds and .magazines */
  }
} 
```

我有一些嵌套的选择器，而不是打破一个新的选择`.books article`器，我想让它们保持嵌套，但仍然只有.`article``.books`

我确实尝试过，它有效，但输出是`.books.books article`，这是多余的，让我畏缩：

```
.books, .dvds, .magazines {
    &.books article {
        /* Outputs ".books.books article, .dvds.books article, .magazines.books article"...boooo, hisssss */
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-03T18:38:41.843

更像是什么：

```
article {

  .books &,
  .dvds &,
  .magazines & {
    /* book, dvd, magazine shared stuff */
  }

  .books & {
    /* book stuff */
  }

} 
```

编译为：

```
.books article, .dvds article, .magazines article {
  /* book, dvd, magazine shared stuff */
}
.books article {
  /* book stuff */
} 
```

# java - 如何在应用程序中使用 rsa 我找到了代码但不知道如何实现

> ID：12672755
> 
> 赞同：-1
> 
> 时间：2012-10-01T11:54:02.533
> 
> 标签：java, android, encryption-symmetric

如何使用这个 RSA [http://xtrace.blogspot.com/2012/03/rsa-demo-example.html?showComment=1349091173502#c199333123405145467](http://xtrace.blogspot.com/2012/03/rsa-demo-example.html?showComment=1349091173502#c199333123405145467)在我的登录代码中的教程代码我找到了代码，但不知道如何实现

```
 public class LoginScreen  extends Activity implements OnClickListener{    

EditText mobile;
EditText pin;
Button  btnLogin;
Button  btnClear;

public void onCreate(Bundle icicle)
{
    super.onCreate(icicle);
    setContentView(R.layout.login.xml);

    TextView lblMobileNo = (TextView)findViewById(R.id.lblMobileNo);
    lblMobileNo.setTextColor(getResources().getColor(R.color.text_color_red));

    mobile = (EditText)findViewById(R.id.txtMobileNo);

    TextView lblPinNo = (TextView)findViewById(R.id.lblPinNo);
    lblPinNo.setTextColor(getResources().getColor(R.color.text_color_red));

    pin = (EditText)findViewById(R.id.txtPinNo);

    btnLogin = (Button)findViewById(R.id.btnLogin);
    btnClear = (Button)findViewById(R.id.btnClear);

    btnLogin.setOnClickListener(new OnClickListener() {
         public void onClick(View view) {                
             postLoginData();
         }
         });        

    btnClear.setOnClickListener(new OnClickListener()
    {
    public void onClick(View v)

    {
        cleartext();
    }

 });

  /*  

    btnClear.setOnClickListener(new OnClickListener() {
             public void onClick(View arg0) {

             }
             }); 
             */

}   

public void postLoginData() 

{

             Intent i = new Intent(this.getApplicationContext(),NEWCLASS.class);
             Bundle bundle = new Bundle();
             bundle.putString("mno", mobile.getText().toString());
             bundle.putString("pinno", pin.getText().toString());
             i.putExtras(bundle);
             startActivity(i);          }
}

@Override
public void onClick(View v) {

}  

public void cleartext() {

    {
        pin.setText("") ;
        mobile.setText("");
    }

}

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:00:25.070

在此处查看 Encryptor/Decryptor 类的一些示例：[How to encrypt String in Java](https://stackoverflow.com/questions/1205135/how-to-encrypt-string-in-java)

或者这是一个为你做所有事情的类的一个很好的例子：

```
public class Cryptos {

private static final String ME = Cryptos.class.getSimpleName();
private static String strEncoding = "UTF-8";
private static String STATIC_STRING_IV_16 = "1234567890123456";
private String iv;
private String key;
private IvParameterSpec mIvParameterSpec;
private SecretKeySpec mSecretKeySpec;
private Cipher mCipher;

public Cryptos(String key) {
    this(STATIC_STRING_IV_16,key);
}

public Cryptos(String iv, String key) {
    this.iv = cut(iv, 16);
    this.key = key;

    mIvParameterSpec = new IvParameterSpec(this.iv.getBytes());
    mSecretKeySpec = new SecretKeySpec(this.key.getBytes(), "AES");

    try {
        mCipher = Cipher.getInstance("AES/CBC/NoPadding");
    } catch (NoSuchAlgorithmException e) {
        App.log.e(ME, "Got Exception while initializing mCipher: " + e.toString(), e);
    } catch (NoSuchPaddingException e) {
        App.log.e(ME, "Got Exception while initializing mCipher: " + e.toString(), e);
    }
}

public byte[] decryptHex(String hexString) throws Exception {
    if(hexString == null || hexString.length() == 0) {
        throw new Exception("Emtpy string given");
    }
    return byteTrim(decrypt(hexToBytes(hexString)));
}

public byte[] decrypt(byte[] input){
    try {
        mCipher.init(Cipher.DECRYPT_MODE, mSecretKeySpec, mIvParameterSpec);
        byte[] decrypted = new byte[mCipher.getOutputSize(input.length)];
        int dec_len = mCipher.update(input, 0, input.length, decrypted, 0);
        dec_len += mCipher.doFinal(decrypted, dec_len);
        return ARRAY.copyOf(decrypted, dec_len);
    } catch (ShortBufferException e) {
        e.printStackTrace();
    } catch (IllegalBlockSizeException e) {
        e.printStackTrace();
    } catch (BadPaddingException e) {
        e.printStackTrace();
    } catch (InvalidKeyException e) {
        e.printStackTrace();
    } catch (InvalidAlgorithmParameterException e) {
        e.printStackTrace();
    }
    return null;
}

public byte[] encrypt(String text) throws Exception{
    if(text == null || text.length() == 0) throw new Exception("Empty string");
    return encrypt(text.getBytes(strEncoding));
}

public byte[] encrypt(byte[] data){
    if(data==null) return null;

    try {
        int bts = data.length;
        byte[] alignData = ARRAY.copyOf(data, bts+(16-bts%16));
        data = alignData;
        mCipher.init(Cipher.ENCRYPT_MODE, mSecretKeySpec, mIvParameterSpec);
        byte[] encrypted = new byte[mCipher.getOutputSize(data.length)];
        int enc_len = mCipher.update(data, 0, data.length, encrypted, 0);
        enc_len += mCipher.doFinal(encrypted, enc_len);
        return ARRAY.copyOf(encrypted, enc_len);
    } catch (ShortBufferException e) {
        e.printStackTrace();
    } catch (IllegalBlockSizeException e) {
        e.printStackTrace();
    } catch (BadPaddingException e) {
        e.printStackTrace();
    } catch (InvalidKeyException e) {
        e.printStackTrace();
    } catch (InvalidAlgorithmParameterException e) {
        e.printStackTrace();
    }
    return null;
}

public static String bytesToHex(byte[] b){
    StringBuffer buf = new StringBuffer();
    int len = b.length;
    for (int j=0; j<len; j++)
        buf.append(byteToHex(b[j]));
    return buf.toString();
}

public static String byteToHex(byte b){
    char hexDigit[] = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'};
    char[] a = { hexDigit[(b >> 4) & 0x0f], hexDigit[b & 0x0f] };
    return new String(a);
}

public static byte[] hexToBytes(String str) {
    if (str==null) {
        return null;
    } else if (str.length() < 2) {
        return null;
    } else {
        int len = str.length() / 2;
        byte[] buffer = new byte[len];
        for (int i=0; i<len; i++) {
            buffer[i] = (byte) Integer.parseInt(str.substring(i*2,i*2+2),16);
        }
        return buffer;
    }
}

private byte[] byteTrim(byte[] bytes){
    if( bytes.length > 0){
        int trim = 0;
        for( int i = bytes.length - 1; i >= 0; i-- ){
            if( bytes[i] == 0 ){
                trim++;
            }else{
                break;
            }
        }
        if( trim > 0 ){
            byte[] newArray = new byte[bytes.length - trim];
            System.arraycopy(bytes, 0, newArray, 0, bytes.length - trim);
            return newArray;
        }
    }
    return bytes;
}

private String cut(String s, int n) {
    byte[] sBytes = s.getBytes();
    if(sBytes.length < n) {
        n = sBytes.length;
    }
    boolean extraLong = false;
    int i = 0, n16 = 0;
    while(i < n) {
        n16 += (extraLong) ? 2 : 1;
        extraLong = false;
        if((sBytes[i] & 0x80) == 0) {
            i += 1;
        } else if((sBytes[i] & 0xC0) == 0x80) {
            i += 2;
        } else if((sBytes[i] & 0xE0) == 0xC0) {
            i += 3;
        } else {
            i += 4;
            extraLong = true;
        }
    }
    return s.substring(0, n16);
}

public static String encBase64(byte[] bytes){
    return Base64.encodeToString(bytes, Base64.DEFAULT);
}

public static byte[] decBase64(String data){
    return Base64.decode(data, Base64.DEFAULT);
}   
} 
```

# android - 水平滑动启动器android

> ID：12672762
> 
> 赞同：0
> 
> 时间：2012-10-01T11:54:26.233
> 
> 标签：android, launcher

我从[这里](http://code.google.com/p/launcher2/source/checkout)得到了 launcher2 代码。它工作正常，但当应用程序数量多于适合一个屏幕的数量时，allapps 屏幕会垂直滚动。但是 ICS 源代码中存在的 launcher2 代码具有水平滚动的所有应用程序屏幕。我想编辑哪些文件才能获得这种效果。

提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:07:22.443

您只需要一个 ViewPager。您可以参考官方文档[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

# php - MySQL varchar (255) 限制和异常

> ID：12672764
> 
> 赞同：1
> 
> 时间：2012-10-01T11:54:37.250
> 
> 标签：php, mysql, varchar

我在我的mysql数据库中定义了一个列：

```
ALTER TABLE `my_table` CHANGE `desc` `desc` VARCHAR( 255 ) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL 
```

但是，当我从前端输入要插入表格的文本时，在列数据的大小达到 233 后，它会**截断进一步添加**的文本，即不保存超过 233 个字符的文本！

我尝试将列的大小更改为 VARCHAR(511) 但没有成功。

我用php计算了字符数`strlen()`，结果显示233个字符

为什么 MySQL 这样做，我怎样才能保存文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:02:38.467

`VARCHAR(250)` **NOT NULL**用一个字节存储长度 n，用 n 个字节存储实际字符串。因此，包含值“abc”的列将占 4 个字节。在`VARCHAR(250)`NULL 中，nullity 占用一位，NULL 值不会占用其他任何内容。非空值占用该位，长度为一个字节，数据为 n 个字节。这里需要一点意味着几个可为空的列共享一个或多个字节来记录它们的空值。

其他可变长度数据类型类似。各种大小的 BLOB 和 TEXT 类型的长度可能不止一个字节，但在其他方面的工作方式几乎相同。数字类型以及固定长度的 CHAR 类型具有固定的内存要求。我认为 CHAR 将省略长度字节，因为它的内容用空格填充到该固定长度。

**索引可能会增加内存需求。多字节字符集（包括`UTF-8`）可能会增加内存需求，因此仅当您的表是为 latin1 或类似文件创建时，上述语句才会成立。所以你可以推断出这`VARCHAR(250)`并不意味着 255 个字符，这取决于你如何编码你的字符串**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:58:37.367

使用`mb_strlen()`函数来计算字符数，它是多字节安全的，您的字符串中似乎有一些特殊字符，请参见[此处](http://www.php.net/manual/en/function.mb-strlen.php)。

这取决于 MySQL 服务器的版本和设置，但是如果某些字符串在插入或更新期间超出了预定义的长度 - 那么 MySQL 将自动截断超出的部分。

# java - 生成有关百分比的随机值的优雅方式？

> ID：12672765
> 
> 赞同：5
> 
> 时间：2012-10-01T11:54:39.540
> 
> 标签：java, algorithm, random, percentage

我有 N 个值（整数）。我想知道随机选择其中一个关于百分比的值的最优雅方法是什么。例如，对于 3 个值的示例：

*   值 1 有 30% 的机会被选中
*   值 2 有 12% 的机会被选中
*   值 3 有 45% 的机会被选中

我需要这个用于我正在使用 Java 开发的程序，但是伪代码算法或任何其他语言的代码都可以。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T12:07:29.167

在不计算要使用的值的情况下执行此操作的一种方法是

```
double d = Math.random() * 100;
if ((d -= 30) < 0) return 1;
if ((d -= 12) < 0) return 2;
if ((d -= 45) < 0) return 3;
return 4; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-01T11:56:24.873

建议算法：

*   在和之间生成一个随机数 ( `n`) （假设您的随机生成器分布良好）`0``1`
*   如果`n < 0.30`返回值`1`
*   如果`n < 0.42`返回值`2`
*   否则如果`n < 0.87`返回值`3`
*   否则打个招呼（你的数字加起来不是 100%）

# blackberry - BlackBerry Simulator 过多的“未找到调试信息”警告

> ID：12672769
> 
> 赞同：1
> 
> 时间：2012-10-01T11:54:54.063
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin, blackberry-jde

在 Eclipse BlackBerry JDE v 7 上以调试模式运行 BlackBerry 模拟器时，我收到很多警告。来自错误日志：

```
No debug information found for 'net_rim_bis_client__en' (4e54f479).
No debug information found for 'net_rim_bis_client__en-1' (4e54f479).
No debug information found for 'net_rim_bis_client__en-2' (4e54f479).
No debug information found for 'net_rim_bis_client__en-3' (4e54f479).
No debug information found for 'net_rim_bis_client__en-4' (4e54f479).
No debug information found for 'net_rim_bis_client__zh_CN' (4e54f511).
No debug information found for 'net_rim_bis_client__zh_CN-1' (4e54f511).
No debug information found for 'net_rim_bis_client__zh_CN-2' (4e54f511).
No debug information found for 'net_rim_bis_client__zh_TW' (4e54f517).
No debug information found for 'net_rim_bis_client__zh_TW-1' (4e54f517).
No debug information found for 'net_rim_bis_client__zh_TW-2' (4e54f517).
No debug information found for 'net_rim_bis_client__ko' (4e54f4c8).
No debug information found for 'net_rim_bis_client__ko-1' (4e54f4c8).
No debug information found for 'net_rim_bis_client__ko-2' (4e54f4c8).
No debug information found for 'net_rim_bis_client__en_GB' (4e54f47f).
No debug information found for 'net_rim_bis_client__en_GB-1' (4e54f47f).
No debug information found for 'net_rim_bis_client__en_GB-2' (4e54f47f).
No debug information found for 'net_rim_bis_client__pt' (4e54f4e1).
No debug information found for 'net_rim_bis_client__pt-1' (4e54f4e1).
No debug information found for 'net_rim_bis_client__pt-2' (4e54f4e1).
No debug information found for 'net_rim_bis_client__fr' (4e54f491).
No debug information found for 'net_rim_bis_client__fr-1' (4e54f491).
No debug information found for 'net_rim_bis_client__fr-2' (4e54f491).
No debug information found for 'net_rim_bis_client__pt_BR' (4e54f4e6).
No debug information found for 'net_rim_bis_client__pt_BR-1' (4e54f4e6).
No debug information found for 'net_rim_bis_client__pt_BR-2' (4e54f4e6).
No debug information found for 'net_rim_bis_client__es' (4e54f485).
No debug information found for 'net_rim_bis_client__es-1' (4e54f485).
No debug information found for 'net_rim_bis_client__es-2' (4e54f485).
No debug information found for 'net_rim_bis_client__vi' (4e54f50b).
No debug information found for 'net_rim_bis_client__vi-1' (4e54f50b).
No debug information found for 'net_rim_bis_client__vi-2' (4e54f50b).
No debug information found for 'SecurIDLib' (456c5107).
No debug information found for 'net_rim_bis_client_resources' (4e54f51f).
No debug information found for 'net_rim_bis_client_res' (4e54f51c).
[195.804] JVM: bklt[1] @195804: JvmBacklightEnableFor 30 ()
[195.804] VM:-DA 0
[195.867] LCD[0] type: 00004009
[195.867] WM Display [0] width: 00000280
[195.867] WM Display [0] height: 000001e0
[195.882] VM:RSRCv=0
[196.0] VM:+GC(f)w=7
[196.0] VM:-GCt=15,b=0,r=0,g=f,w=7
[196.0] VM:+GC(p)w=7
[196.007] 
[196.007] RX=47.9M,RF=51.8M,FF=40.9M,OF=746.9K,OS=216,ON=9,OR=0,FR=0,TR=0,RR=0,IS=0
[196.007] RA=5.5M,RS=216,RN=9
[196.007] TA=0,TS=0,TN=0
[196.007] PA=0,PS=0,PN=0
[196.007] R0=202.1M,1=3.7M,2=8K,3=156.6K,4=386.3K,9=63.7K,10=332,11=280,12=959.7K,13=44,15=387.8K,20=712,21=52[196.007] 4,23=231.8K,24=6K
[196.007] VM:-GCt=1,b=0,r=0,g=p,w=7,u=0,c=0
[196.023] VM:+CR
[196.023] VM:-CR t=0
[196.023] FS:ESHA 4d 
```

普通模拟器照常运行。我还运行`clean.bat`然后清理了我的项目，重新启动了 Eclipse，但似乎没有任何工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:14:28.023

不用担心。这些消息只是指出没有找到相关的 .debug 文件。模拟器文件夹中存在一些 .cod 文件以及 .debug 文件，其中包含调试信息。但是这些 .cod 文件的一部分没有 .debug 文件，这是正常的。

它不会影响您的应用程序，也不会影响其调试过程。

# c - 如何在非常慢的应用程序中找到内存泄漏？

> ID：12672770
> 
> 赞同：2
> 
> 时间：2012-10-01T11:54:52.953
> 
> 标签：c, memory-leaks, valgrind, memory-leak-detector

我有一个用 C 语言编写的程序，它使用 Berkeley-Db、glib-2 和 libxml-2。它是一个搜索索引器，它使 NLP 具有句法和语义分析，并将概念结构存储在搜索索引中而不是单词中。

但是，我有一个问题——大约一天后，我的程序内存不足。

当我尝试在 valgrind 下运行我的程序时，它的运行速度**非常**慢，在我看来，比正常运行慢 10 倍。

我所有检查内存泄漏的尝试（在 valgrind 下进行了数周左右）都没有显示任何泄漏。

有人知道在这种情况下可以帮助我的一些工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:39:33.307

我的解决方案是：

```
#define malloc(size) mymalloc(size, __FILE__, __FUNCTION__, __LINE__)
... (realloc, calloc, free)

void *mymalloc(size_t size, char *file, char *function, int line)
{
  void *data = malloc(size);
  addList(data, size, file, function, line);
  return data;
}

void myfree(void *data)
{
  removeList(data);
  free(data);
}

void debugalloc()
{
  printList();
} 
```

removeList() 将在全局列表中搜索“数据”并将其删除，或发出警告。用“debugalloc();” 您应该打印整个列表（通常它应该是空的，或者充满了您期望的内容）。

**另一种选择**：你的内存管理变得支离破碎，......（upps，Alexey Frunze 在一秒钟前在评论部分写道。）

**编辑**：XML

我发表了关于 DOM 和 SAX 的评论，我感觉只是为了扩展这个评论：

```
<head><data>...</data><data>...</data>......<data>...</data></head> 
```

是 SAX 的优秀候选者。在 DOM 中，整个 XML 将被读取并转换为内存，如果 <data> 本身是由不同大小的值构成的，这会很快导致内存碎片化。可能会发生，您的操作系统的内存模型将不利于分配少量内存。

使用 SAX，您只需将部分数据加载到内存中，并在使用后立即将其删除。但是你的实现必须从遍历 Document 变成一种状态机，带有馈送（<data>）和消费/处理（</data>）。

# javascript - 如何以编程方式更改按钮的文本属性？

> ID：12672771
> 
> 赞同：1
> 
> 时间：2012-10-01T11:54:54.503
> 
> 标签：javascript, sencha-touch, extjs, sencha-touch-2

我正在使用 Sencha Touch 2，我有一个按钮声明，在事件单击时我想更改其文本属性。

这是我的代码，不起作用..知道如何解决吗？

```
var accessibilityButton = {
        id: 'accessibilityButton',
        xtype: 'button',
        ui: 'custom-btn-confirm',
        maxWidth: '360px',
        centered: true,
        flex: 1,
        scope: this,
        style: 'color: #ffffff',
        text: 'Larger Text',

        handler: function changeStyle() {

            // Swap the CSS for Accessibility             
            var i, a, url, btn;
            btn = document.getElementById('accessibilityButton');

            for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
                if(a.getAttribute("rel").indexOf("style") != -1) {
                    url = a.href;

                    if(url.lastIndexOf('app.css') !== -1) {
                        a.href = 'resources/css/app-accesibility.css';          
                        btn.innerHTML = 'Default Text';
                    }
                    else {
                        a.href = 'resources/css/app.css';
                        btn.innerHTML = 'Larger Text';   
                    }
                } 

            }

        }

    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:01:43.470

您的处理程序函数应该在按钮组件的范围内被调用，因此只需尝试执行以下操作：

```
handler: function changeStyle() {
    this.setText('text');
} 
```

**编辑**

或者如果您更改了范围：

```
scope: this,
handler: function changeStyle(btn) {
    btn.setText('text');
} 
```

请注意，第二个版本一直有效。

# r - 无法通过代理服务器；尝试修复 SO

> ID：12672773
> 
> 赞同：0
> 
> 时间：2012-10-01T11:55:20.293
> 
> 标签：r

在 Windows 上，在需要密码身份验证的公司代理服务器后面，我尝试了[R 的代理设置中](https://stackoverflow.com/questions/6467277/proxy-setting-for-r)列出的方法以及[如何告诉 R 解释器如何使用代理服务器？](https://stackoverflow.com/questions/4832560/how-do-i-tell-the-r-interpreter-how-to-use-the-proxy-server). 当我尝试选择镜子时，我得到：

```
Warning message:
In open.connection(con, "r") : unable to resolve 'cran.r-project.org' 
```

我很确定我的用户名和密码可以通过，因为我不再收到消息 407(?) 告诉我需要身份验证。我是通过`http_proxy`从控制台或 R-properties 对话框窗口中设置的值来获得的。那么，关于我还应该尝试什么的任何建议？

编辑：Spacedman：我输入了

```
Sys.setenv(http_proxy='username:password@proxyname.company.com:80')` 
```

并且还在 R-properties (Windows) 对话框中尝试了相同的定义字符串。我是否在定义中包含“http://”都没有关系；80 或 8080 相同。

# c++ - mbstocws 的工作

> ID：12672778
> 
> 赞同：0
> 
> 时间：2012-10-01T11:55:32.620
> 
> 标签：c++, linux

这个 mbstocws 的默认值是多少？当我们使用 CP_ACP,MB_PRECOMPOSED 时，它的行为是否类似于 MultiByteToWideChar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:24:19.603

`man`您可以使用命令或互联网搜索来查找 Linux API 的描述。

在你的情况下[`man mbstowcs`](http://www.kernel.org/doc/man-pages/online/pages/man3/mbstowcs.3.html)。

# extjs - 使用 Struts2 和 ExtJS 下载文件

> ID：12672780
> 
> 赞同：0
> 
> 时间：2012-10-01T11:55:37.093
> 
> 标签：extjs, struts2

我是 ExtJS 和 Struts2 的新手。我的要求是当用户单击链接时下载文件（在新选项卡中的浏览器中保存文件或呈现内容）。下载前我不知道文件类型（可能是 pdf、gif、excel、zip 或其他文件）

我在**AJAX**请求下构造了一个调用动作：

```
 Ext.onReady( function() {
      Ext.Ajax.request({
        url : 'action/download.do',
        params : {
          loc : path
        },
        method : 'POST',
        success: function(response, request) {
          return;
        }
      });
    }); 
```

**struts.xml**配置：

```
 <action name="download" class="downloadAction" method="download" >
      <result name="success" type="stream">
        <param name="contentType">application/octet-stream</param>
        <param name="inputName">fileInputStream</param>
        <param name="contentDisposition">attachment;</param>
        <param name="bufferSize">1024</param>
      </result>
    </action> 
```

**动作**代码：

```
 public String documentDownload() {
      String filePath = "/home/sasha/abc.pdf";
      try {
        fileInputStream =  new FileInputStream(new File(filePath));
      } catch (FileNotFoundException e) {
        LOGGER.error(e.getLocalizedMessage(), e);
      }
      return SUCCESS;
    } 
```

当我在 Firebug 中验证响应时，它是“200 OK”。文件内容已以垃圾格式显示在“响应”选项卡下。

有人可以告诉我如何将内容保存为文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:01:14.267

您可以获取文件调用的内容类型`contentType = ServletActionContext.getServletContext().getMimeType(file_name)`，然后`contentType`在您的 struts.xml 中用作参数。

顺便说一句，获取文件的 mime 类型的方法不止一种，请参见[http://www.rgagnon.com/javadetails/java-0487.html](http://www.rgagnon.com/javadetails/java-0487.html)

# c# - .net 根据参数类型选择错误的方法来调用

> ID：12672781
> 
> 赞同：1
> 
> 时间：2012-10-01T11:55:42.457
> 
> 标签：c#, overloading, derived-class

我有两个数据类：***BaseDataClass***和***DerivedDataClass***，它们派生自第一个。我还有两个 Consuming 类：***ConsumingBaseClass***和***ConsumingDerivedClass***，它们派生自第一个。在***ConsumingBaseClass***我有虚拟方法***DoWork***，它接受***DerivedDataClass***并做一些工作。

在***ConsumingDerivedClass***中，我对方法***DoWork***进行了覆盖，并且对接受***BaseDataClass的******DoWork***进行了重载。当我尝试调用***DoWork***时，传递***DerivedDataClass***的实例，调用***DoWork(BaseDataClass)***而不是***DoWork(DerivedDataClass)***。

 *****有谁知道，为什么调用错误的方法？**

以下代码演示了该问题：

```
class Program
{
    private static void Main(string[] args)
    {
        ConsumingDerivedClass x = new ConsumingDerivedClass();
        // Wrong DoWork is called - expected calling of DoWork(DerivedDataClass) but actually called DoWork(BaseDataClass)
        x.DoWork(new DerivedDataClass());
        Console.ReadKey();
    }
}

public class ConsumingBaseClass
{
    public virtual void DoWork(DerivedDataClass instance)
    {
        Console.WriteLine("ConsumingBaseClass.DoWork(DerivedDataClass); Type of argument is '{0}'", instance.GetType());
    }
}

public class ConsumingDerivedClass : ConsumingBaseClass
{
    public override void DoWork(DerivedDataClass instance)
    {
        Console.WriteLine("ConsumingDerivedClass.DoWork(DerivedDataClass); Type of argument is '{0}'", instance.GetType());
        base.DoWork(instance);
        // Some additional logic
    }

    public void DoWork(BaseDataClass instance)
    {
        Console.WriteLine("ConsumingDerivedClass.DoWork(BaseDataClass); Type of argument is '{0}'", instance.GetType());
        DerivedDataClass derivedInstance = new DerivedDataClass();
        // Some logic based on what is in baseInstacne
        derivedInstance.SomeProperty = "Value, got from some logic";

        base.DoWork(derivedInstance);
        // Some additional logic
    }
}

public class BaseDataClass
{ }

public class DerivedDataClass : BaseDataClass
{ 
    public string SomeProperty { get; set; } 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T12:00:35.763

> 有谁知道，为什么调用错误的方法？

根据语言规范调用正确的方法。是你的期望是错误的。

> 在 ConsumingDerivedClass 中，我对 DoWork 方法进行了覆盖，并且对接受 BaseDataClass 的 DoWork 进行了重载。

基本上，这就是问题所在。重载解决方案并不像您认为的那样起作用。编译器从调用目标的编译时类型开始工作，一直到基类到`object`. 只考虑*新声明*的方法（甚至没有被覆盖）。

您可以通过编写来更改将使用的重载：

```
((ConsumingBaseClass) x).DoWork(new DerivedDataClass()); 
```

不过，理想情况下，如果你有这么脆弱的东西，给这些方法起不同的名字是值得的。重载应该具有相同的效果，只是以不同的方式提供信息。

基本上，看看我的[脑筋急转弯页面](http://www.yoda.arachsys.com/csharp/teasers.html)上的第一个问题，以及第一个答案的详细信息。我还有[一篇关于重载解析](http://csharpindepth.com/Articles/General/Overloading.aspx)的文章，您可能会发现它很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:07:06.313

尝试更改您的基本方法以使用 BaseDataClass 并覆盖它。提供派生数据特定版本作为“新”方法（根据@Jon Skeet 的回答）

```
class Program
    {
        private static void Main(string[] args)
        {
            ConsumingDerivedClass x = new ConsumingDerivedClass();
            // Wrong DoWork is called - expected calling of DoWork(DerivedDataClass) but actually called DoWork(BaseDataClass) 
            x.DoWork(new DerivedDataClass());
            x.DoWork(new BaseDataClass());
            Console.ReadKey();
        }
    }

    public class ConsumingBaseClass
    {
        public virtual void DoWork(BaseDataClass instance)
        {
            Console.WriteLine("ConsumingBaseClass.DoWork(DerivedDataClass); Type of argument is '{0}'", instance.GetType());
        }
    }

    public class ConsumingDerivedClass : ConsumingBaseClass
    {
        public override void DoWork(BaseDataClass instance)
        {
            Console.WriteLine("ConsumingDerivedClass.DoWork(DerivedDataClass); Type of argument is '{0}'", instance.GetType());
            base.DoWork(instance);
            // Some additional logic 
        }

        public void DoWork(DerivedDataClass instance)
        {
            Console.WriteLine("ConsumingDerivedClass.DoWork(BaseDataClass); Type of argument is '{0}'", instance.GetType());
            DerivedDataClass derivedInstance = new DerivedDataClass();
            // Some logic based on what is in baseInstacne 
            derivedInstance.SomeProperty = "Value, got from some logic";

            base.DoWork(derivedInstance);
            // Some additional logic 
        }
    }

    public class BaseDataClass
    { }

    public class DerivedDataClass : BaseDataClass
    {
        public string SomeProperty { get; set; }
    } 
```***

# c# - 如何在 MVC3 中按动作明智地管理角色分配，即每个角色由不同的动作分配？

> ID：12672783
> 
> 赞同：0
> 
> 时间：2012-10-01T11:55:47.057
> 
> 标签：c#, asp.net-mvc-3, model-view-controller, role

如何在 MVC3 中按动作明智地管理角色分配，即每个角色由 C#.net 中 MVC3 中的不同动作分配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:19:48.237

如果您想限制对给定操作的访问，您可以使用[`[Authorize]`](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)属性装饰它们并指定允许访问它的角色：

```
[Authorize(Roles = "Admin")]
public ActionResult SomeAction()
{
    ...
} 
```

# c++ - 使用 () 和 = 进行初始化有什么不同

> ID：12672784
> 
> 赞同：0
> 
> 时间：2012-10-01T11:55:49.337
> 
> 标签：c++, initialization

> **可能重复：**
> [复制初始化和直接初始化在 C++ 中有区别吗？](https://stackoverflow.com/questions/1051379/is-there-a-difference-in-c-between-copy-initialization-and-direct-initializati)

```
class Animal{};

int main(){    
  Animal white_cat;
  Animal black_cat(white_cat);
  Animal brown_cat = white_cat;    
} 
```

我知道这里的初始化都是由复制构造函数完成的。但是这两个初始化之间在性能或内存方面有什么不同吗？ `Animal black_cat(white_cat); Animal brown_cat = white_cat;`如果不是，为什么有两种方法可以做同样的事情？

# ruby - 无法从命令执行鞋子

> ID：12672786
> 
> 赞同：0
> 
> 时间：2012-10-01T11:55:56.013
> 
> 标签：ruby, shoes

我已经在我的 MAC BookPro 上安装了鞋子并尝试从终端执行并收到以下错误消息。

jfleck-mbp:scripts_in_progress joe.fleck$ 鞋子 just_for_fun.rb

-bash：鞋子：找不到命令

下面你会发现 Shoes 安装成功，根据他们的说明，'shoes just_for_fun.rb' 应该执行应用程序。

安装 sudo gem install shoes 密码：获取：
shoes-3.0.1.gem (100%) 成功安装了 shoes-3.0.1 1 个 gem
安装了 shoes-3.0.1 的 ri 文档...

为 shoes-3.0.1 安装 RDoc 文档...

这是我的代码：需要“鞋子”

鞋子.app {

```
button("Trul?") {
        alert("Klapaucius!")
    }
} 
```

所以，我是新手，不确定要从这里开始。任何帮助将不胜感激。

谢谢你，乔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T00:24:12.130

鞋子宝石不起作用，可能永远不会起作用。我们目前正在开发[shoes4](https://github.com/shoes/shoes4) - 但是您可以尝试使用[绿色鞋子](https://github.com/ashbb/green_shoes)- 这是一种鞋子实现，可以作为宝石使用。

或者，您可以尝试从[shoesrb.com](http://www.shoesrb.com/)下载安装程序，或者您可以尝试[构建自己的一双鞋](https://github.com/shoes/shoes/wiki/Building-Shoes)——因为安装程序在相当多的 OSX 版本中被破坏了。

穿鞋！

编辑：哇，这是一个快速的声誉提升，所以我把我还想包含的所有链接都放了。谢谢！

编辑2：为了清楚起见，为鞋子4创建宝石完全在路线图上-这将起作用:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:14:46.613

Gems are libraries you can use in your Ruby scripts, which means you execute the script simply using `ruby just_for_fun.rb`.

Sadly, at this time, the *shoes* gem seems to be just a stub; I have just tried it and got this message:

```
Sorry, this gem currently does nothing. Team Shoes is working on Gemifying Shoes, and this is just a placeholder until then. 
```

Try downloading the OS X installer from [the shoes web site](http://shoesrb.com); maybe that will work. (I tried installing it under Lion about a year ago, and couldn't get it to work; the windows version worked fine for me.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:07:03.687

我会尝试的第一件事是，如果鞋子程序在没有指定 ruby​​ 程序的情况下正常启动。尝试在 bash 中运行“shoes”，如果这不起作用，请尝试“sudo shoes”，因为您在 root 下安装了 gem。您可能需要在普通用户而不是 root 下安装 gem。

[如果这些都不起作用，请尝试使用来自https://github.com/shoes/shoes/downloads](https://github.com/shoes/shoes/downloads)的 Shoes-3.1.0.run

# cocos2d-iphone - setViewName 已更改

> ID：12672791
> 
> 赞同：1
> 
> 时间：2012-10-01T11:56:07.613
> 
> 标签：cocos2d-iphone, cocos2d-x

在最新版本的 cocos2d-x 中，好像`eglView->setViewName("Hello World")`已经不行了。改成什么了？

即在 main.cpp 的 HelloCpp 项目中：

```
// create the opengl view
CCEGLView* eglView = CCEGLView::sharedOpenGLView();

// set the window name
eglView->setViewName("Hello World"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:19:54.180

If you are on Windows you can set name using Window Handle (HWND).

```
HWND handle = eglView->getHWnd();
SetWindowText(handle, "MY_GAME_TITLE"); 
```

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:56:22.143

*eglView->setViewName*和*getViewName*从最新的cocos2d-x中去掉

我知道没有那个我们不能改变窗口标题

但如果你愿意，你可以编辑 CCEGLView 代码并尝试直接设置它

```
CCEGLView* eglView = CCEGLView::sharedOpenGLView();
strcpy(eglView->m_szViewName, "Test"); 
```

相应地操作 *cocos2d::CCEGLViewProtocol::m_szViewName* 受保护的成员...

这不是最好的方法......或者等他们再次添加它

试试看 ...

# .net - 在 vb.net 中将 formname 作为参数传递

> ID：12672795
> 
> 赞同：-2
> 
> 时间：2012-10-01T11:56:13.983
> 
> 标签：.net, vb.net, winforms

我有一个名为 Masterforms 的项目，其中包含许多表单。

我必须将该表单名作为参数传递给函数，即

Masterforms 包含供应商、项目、工作等表格......

我调用了一个方法`openform(masterforms.suppliers)`

定义是

```
Private Sub openform(ByVal formname as  // Form) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:46:56.933

您可以通过实例化并调用 show 方法来显示特定的表单。

像这样 ：

```
Dim form as New Form2() 
form.Show 
```

或者你可以打电话

```
form.ShowDialog() 
```

如果您希望表单以模态方式打开。如果那是你想要的...

如果您只需要表单名称，则可以将`form.Name`String 参数作为方法传递给方法，这将使用`Name`表单的属性。（请确保您已先对其进行初始化）。

希望它可以帮助你。

# xml - 将 XML 文件转换为键值结构的最佳算法是什么？

> ID：12672801
> 
> 赞同：2
> 
> 时间：2012-10-01T11:56:29.353
> 
> 标签：xml, serialization, xml-parsing, key-value

我有这样的 XML 文件：

```
<root>
    <key0>value</key0>
    <key1>value</key1>
    <key2>value</key2>
</root> 
```

将此类文件转换为键值结构很容易。让我们在 Python dict 中展示结果，例如：

```
{'key0': 'value', 'key1': 'value', 'key2': 'value'} 
```

现在他们添加了嵌套元素：

```
<root>
    <key0>value</key0>
    <key1>value</key1>
    <key2>value</key2>
    <key3>
        <sth0>value</sth0>
        <sth1>value</sth1>
    </key3>
</root> 
```

仍然很容易：

```
{'key0': 'value', 'key1': 'value', 'key2': 'value', 'key3/sth0': 'value', 'key3/sth1': 'value'} 
```

我想你明白了。现在呢？

```
<root>
    <key0>value</key0>
    <key1>value</key1>
    <key1>
         <inner>value</inner>
    </key1>
    <key2>value</key2>
    <key3>
        <sth0>value</sth0>
        <sth1>value</sth1>
    </key3>
    <key3>
        <sth0>different value</sth0>
        <sth1>different value</sth1>
    </key3>
    <key3>
        <sth0>blah blah</sth0>
        <sth1>blah blah</sth1>
    </key3>
</root> 
```

当然，经过一段时间的思考，我可以想出点什么来，但有件事告诉我，我会遇到越来越多的困难。所以问题是：是否有一种复杂的算法可以将类似简单的 XML 文件中的值“序列化”为键值形式？它必须是确定性可序列化和不可序列化的，并且不能丢失任何值。元素的顺序无关紧要（示例中的 Python dict 不是随机选择，这确实是我想要得到的）。

我知道 XML 可能非常复杂（命名空间、属性等），但事实并非如此。我需要正确解决的唯一问题是呈现的嵌套值和相同键的相关多重性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:59:33.940

我认为最好使用某种 xml 解析器。我遇到了类似的问题，并为此编写了我的 xml 解析器，但事实证明，这不是微不足道的，并且可以改变很多。我不能推荐以下文章来更多地解释问题和常见方法：

[http://elegantcode.com/2010/08/07/dont-parse-that-xml/](http://elegantcode.com/2010/08/07/dont-parse-that-xml/)

如果你可以为此定义一个模式，你可以使用 jaxb - 又好又简单！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:49:28.437

在每个名称的末尾附加一些独特的东西。Like 变成 Key0_unique ，其中 unique 是升序数字或 guid。

（虽然如果你的“生态系统”现在很大并且还在增长，我会考虑现在而不是以后解决这个问题。）

# php - 无法在 Zend Framework 2 中注册视图助手

> ID：12672802
> 
> 赞同：1
> 
> 时间：2012-10-01T11:56:29.973
> 
> 标签：php, zend-framework2, view-helpers

> **可能重复：**
> [如何将自定义视图助手添加到 Zend Framework 2](https://stackoverflow.com/questions/11392624/how-to-add-custom-view-helpers-to-zend-framework-2)

`ServiceNotFoundException`尝试在 ZF2 中加载视图助手时，我不断收到s。我的模块配置如下：

```
'view_manager' => [
    'template_path_stack' => [
        'stock' => __DIR__ . '/../view'
    ],
    'invokables' => [
        'navlink' => 'Application\View\Helper\NavLinkHelper'
    ]
] 
```

该类似乎没有添加到插件注册表中。在过去的 6 个月中，我发现了几种不同的方法，但都没有奏效。显然，官方文档（建议使用`helper_map`）也已过时。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:47:28.153

修改您的`module.config.php`以包含以下数组。请注意用于声明辅助映射的 array_key 的区别。

```
return array(
    'view_helpers' => array(
        'invokables' => array(
            'navlink' => 'Application\View\Helper\NavLinkHelper'
        )
    )
); 
```

# android - android浏览文件代码

> ID：12672803
> 
> 赞同：0
> 
> 时间：2012-10-01T11:56:37.300
> 
> 标签：android, android-layout, android-intent, android-emulator

在下面的代码中，我试图实现以下浏览器代码[http://www.remwebdevelopment.com/dev/a34/Directory-Browser-Application.html](http://www.remwebdevelopment.com/dev/a34/Directory-Browser-Application.html)

我只是在这里得到一个空白文本视图作为输出，我没有看到浏览器。我在这里做错了什么

```
 public class File_browse extends Activity {
private List<String> items = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_file_browse);
    getFiles(new File("/").listFiles());
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_file_browse, menu);
    return true;
}

protected void onListItemClick(ListView l, View v, int position, long id){
    int selectedRow = (int)id;
    if(selectedRow == 0){
        getFiles(new File("/").listFiles());
    }else{
        File file = new File(items.get(selectedRow));
        if(file.isDirectory()){
            getFiles(file.listFiles());
        }else{
             new AlertDialog.Builder(this)
             .setTitle("This file is not a directory")
             .setNeutralButton("OK", new DialogInterface.OnClickListener(){
                 public void onClick(DialogInterface dialog, int button){
                     //do nothing
                 }
             }).show();
            //Toast.makeText(this, "This file is not a directory" + position, Toast.LENGTH_SHORT).show();
        }
    }
}
private void getFiles(File[] files){
    Toast.makeText(this, "In get files" , Toast.LENGTH_SHORT).show();
    items = new ArrayList<String>();
    items.add(getString(R.string.app_name));
    for(File file : files){
        items.add(file.getPath());
    }
    ArrayAdapter<String> fileList = new ArrayAdapter<String>(this,R.layout.file_list_row, items);
    ArrayAdapter adp = new ArrayAdapter(File_browse.this, android.R.layout.simple_list_item_1);
    ListView mainlist = null;
    mainlist.setAdapter(adp);
    mainlist.setTextFilterEnabled(true);

}

 } 
```

主.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

 <ListView android:id="@android:id/list"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"/>

<!-- <TextView
    android:id="@android:id/empty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:padding="@dimen/padding_medium"
    android:text="@string/hello_world"
    tools:context=".File_browse" />-->

 </RelativeLayout> 
```

file_list_row.xml 在 activity_file_browse.xml 旁边

```
 <?xml version="1.0" encoding="utf-8"?>
 <TextView android:id="@+id/text1"
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:14:23.443

1/ mainList 为空，所以它很可能崩溃

2/ 适配器文件列表从未使用过，因此您实际上在任何地方都没有使用适配器中的文件名列表

3/ adp 不包含任何内容，因为您没有给它任何内容

4/ 鉴于您的列表名为@android:id/list，您可能想要扩展 ListActivity？

5/ onListItemClick 永远不会被调用，也不会覆盖任何东西（因为你没有扩展 ListActivity），所以它基本上是死代码

6/ File_browse 应命名为 FileBrowse 以尊重 java 中的命名格式约定。

# java - java中的虚引用是什么

> ID：12672808
> 
> 赞同：3
> 
> 时间：2012-10-01T11:56:58.277
> 
> 标签：java, reference

Java 中有四种类型的引用：Strong、Soft、Weak 和 phantom。请详细说明 Java 究竟在何处以及如何使用幻像引用。

编辑 ：

我确实阅读了 javaDoc，如下面的 assylias 所示。该部分说，如果一个对象已经完成并且一些幻像引用引用它，则该对象是幻像可回收的。我完全理解这种说法。

phantom 有什么用，在什么情况下我们应该使用它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T11:59:57.217

[`java.lang.ref`包 javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/package-summary.html)中描述了每种类型的参考是如何工作的：

> 从最强到最弱，不同级别的可达性反映了一个对象的生命周期。它们在操作上定义如下：
> 
> *   如果某个对象可以被某个线程访问而无需遍历任何引用对象，则该对象是强可达的。创建它的线程可以强烈访问新创建的对象。
> *   如果一个对象不是强可达但可以通过遍历软引用来达到，那么它就是软可达的。
> *   一个对象是弱可达的，如果它既不是强可达也不是软可达，但可以通过遍历弱引用来达到。当对弱可达对象的弱引用被清除时，该对象就有资格进行终结。
> *   如果一个对象既不是强、软或弱可达的，它是最终确定的，并且一些幻象引用引用它，它就是幻象可达的。
> *   最后，当一个对象无法通过上述任何一种方式到达时，它是不可达的，因此有资格进行回收。

Stack Overflow 上有几篇文章举例说明了您可能需要的方式和时间`PhantomReference`：

*   [您是否曾经在任何项目中使用过 Phantom 参考？](https://stackoverflow.com/questions/1599069/have-you-ever-used-phantom-reference-in-any-project)
*   [何时在 Java 中使用幻像引用？](https://stackoverflow.com/questions/9826741/java-phantom-reference-when-we-using-it)

# javascript - 在网络中存储一些选项

> ID：12672811
> 
> 赞同：1
> 
> 时间：2012-10-01T11:57:17.370
> 
> 标签：javascript, asp.net, cookies

我正在设计一个门户网站，在它的一些页面中，我有一个 javascript 网格（包括寻呼机）。我想存储用户访问的最后一页，为了做这样的事情，我想我应该使用 Cookies 和 javascript（或者可能是 jquery）

*仅供参考，我的网格是 FlexGrid，你知道 FlexGrid 是由 jquery 创建的*

有没有人可以帮助我解决这些问题？任何想法都可能有用

抱歉我的英语语法不好（我是新人）

**更新 1**：当我标记我的问题时，我使用 Asp.net (C#) 和 MSSQL 2008 作为数据库引擎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:11:18.387

如果您愿意，您当然可以[使用 JavaScript 在客户端上设置一个 cookie](https://developer.mozilla.org/en-US/docs/Code_snippets/Cookies)。

您还可以[使用 ASP.Net 设置 cookie](http://msdn.microsoft.com/en-us/library/ms178194%28v=vs.100%29.aspx)（但这会更有效）。

您还可以使用[HTML5 本地存储](http://diveintohtml5.info/storage.html)，并[回退到](https://gist.github.com/350433)旧浏览器的 cookie。

如您所见，这里有很多选择。您选择的那个取决于您的需求，但根据您的描述，我将使用一个首先使用 HTML5 存储的库，然后回退到旧浏览器的 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:11:53.657

查看[http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx)。只要用户单击链接以获取当前页面，它就应该起作用。

# android - 在文件中收集警告和错误日志？

> ID：12672813
> 
> 赞同：0
> 
> 时间：2012-10-01T11:57:22.033
> 
> 标签：android, error-logging, android-logcat

我怎样才能在一个文件中只收集我的应用程序警告和错误日志。（我使用 logcat -d 但它会获取所有日志）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:25:11.203

您可以使用`adb logcat -s "THETAGYOUWANTTOFOLLOW"`. 大多数时候我使用完整的日志来调试。使用 colouredlogcat.py 脚本很容易找到您的应用程序日志，并且拥有所有日志可以帮助我更轻松地了解正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:13:21.160

如果您使用的是 Eclipse，那么您可以使用“将所选项目导出到文本文件”按钮轻松收集所有日志和警告。![在此处输入图像描述](../Images/55a218f99dbb1660c42665045b6656ac.png)

# php - 更改 PHP 创建的文件的默认文件权限

> ID：12672815
> 
> 赞同：0
> 
> 时间：2012-10-01T11:57:30.733
> 
> 标签：php, file-permissions

我有一个具有多个用户帐户的 Amazon EC2 服务器。每个用户安装一个基于 PHP 的 CMS 系统，该系统在安装过程中从远程存储库下载一些包。问题是下载的包对用户是不可写的（即不能被删除）。

问题是，如何将 PHP 创建的文件的默认文件权限设置为 666？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:07:47.300

您可以使用它`find`来查找 apache 拥有的所有文件，然后`chmod`使用所需的权限查找它们。

例如：将递归更改指定路径
`find <your direcoty path> -type f -user "apache" -exec chmod 666 {} \;`
下所有文件的权限。`apache`

当我在网上搜索时，我发现[了这个答案](https://unix.stackexchange.com/questions/1314/how-to-set-default-file-permissions-for-all-folders-files-in-a-directory)，我认为这是处理您的问题的更合适的方法。

# java - 为什么我让事务在 jsf 和 jpa 项目中已经处于活动状态？

> ID：12672817
> 
> 赞同：1
> 
> 时间：2012-10-01T11:57:36.120
> 
> 标签：java, primefaces

```
ERROR allList Transaction already active
Hata SelectedProjectDetail: Transaction already active
ERROR allList Transaction already active 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T12:04:11.157

可能，在某个地方你正在调用`tr.begin()`已经开始的事务......你可以`tr.begin()`用一个`if`块包围你，以检查你的事务是否还没有激活..

```
if (!tr.active()) {
    tr.begin();
} 
```

**哪里**： -`tr`是您的`Transaction`参考。

# php - 桌面和移动网站，相同的网址，如何相互链接？

> ID：12672824
> 
> 赞同：0
> 
> 时间：2012-10-01T11:58:35.843
> 
> 标签：php, routing

我们正在开发我们网站的移动版本。由于各种原因，我们正在通过用户代理检测来调查“相同的 URL，不同的内容”结构。没有问题，我们很乐意根据 UA 设置设置 cookie，并使用此 cookie 来确定要使用的内容/css/etc。

问题是，我们希望提供从移动页面返回桌面版本的链接，反之亦然。我们不想仅仅链接到主页，而是到同一个页面，只是在另一个环境中。

我们正在考虑让链接包含一个 $_GET 参数

```
<a href="....html&mob=1">...</a> //mobile page, user wants desktop, AND
<a href="....html&mob=2">...</a> //desptop page, user wants mobile 
```

然后在我们的 prepend 中，我们将检查 $_GET 参数，如果找到，取决于它的状态，设置或取消设置我们的 cookie，然后重定向到 HTTP_REFERRER（与它们刚打开的页面相同）。

问题是，有谁知道这将如何影响 SEO/机器人？

是否有在同一网址上提供不同内容的最佳做法，并且有指向其他版本的链接。

任何投入将不胜感激。提前致谢！

**更新 - 我们用于检测移动用户及其选择的代码**

```
// First page load, redirect if mobile
if(!isset($_SESSION['mobile'])){
    // SCRIPT SOURCED FROM: http://code.google.com/p/php-mobile-detect/
    include_once(INCL_PREP . "lib/Mobile_Detect.php");
    $detect = new Mobile_Detect();
    // if mobile device, but NOT tablet (they handle desktop versions just fine!)
    if ($detect->isMobile()  && !$detect->isTablet()) {
    $_SESSION['mobile'] = 1;
    $redirectURL= ...; // code removed for sake of space and relevancy
    header("location:$redirectURL");
}else{
    $_SESSION['mobile'] = 2;
}
// Get the $_SESSION['mobile'] status by the $_GET parameter
if($_GET['mobile'] == "on"){
     $_SESSION['mobile'] = 1;
}else{
        $_SESSION['mobile'] = 2;
} 
```

因此，移动版有 $_GET 一个 get 参数，使用它和 $_SESSION 我们可以在页面加载时自动重定向，并且它们还可以毫无问题地在移动版和桌面版之间切换。

感谢输入的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:48:14.740

“从技术上讲”，您没有使用“相同的 URL”——查询字符串变体实际上被搜索机器人视为不同的 URL。

如果您尝试为移动/桌面用户管理不同的 URL，并希望确保 Google“看到”正确的版本，请阅读以下资源：[https ://developers.google.com/webmasters/smartphone-sites/details](https://developers.google.com/webmasters/smartphone-sites/details)

一半是关于如何使用的解释`rel="alternate"`以及`rel="canonical"`您所描述的场景。

# .htaccess - 想将此 .htaccess 规则转换为 nginx

> ID：12672827
> 
> 赞同：1
> 
> 时间：2012-10-01T11:58:46.433
> 
> 标签：.htaccess, mod-rewrite, nginx, rewrite

我是 nginx 新手，真的不知道如何做到这一点。例如，下面的代码在 htaccess 中的作用是

如果浏览器从这个网址请求这个 css 文件

```
http://www.example.com/folder1/css/style-30493094.css
```

然后它显示这个文件

```
http://www.example.com/folder1/css/style.css
```

此代码中所有其他定义的扩展也是如此。css, js, png, jpg, gif 就像浏览器从这个网址请求这个 js 文件一样

```
http://www.example.com/folder1/js/javascript-2938293.js
```

然后它显示这个文件

```
http://www.example.com/folder1/js/javascript.js
```

其实我正在努力做到这一点。[http://derek.io/blog/2009/auto-versioning-javascript-and-css-files/](http://derek.io/blog/2009/auto-versioning-javascript-and-css-files/)

```
RewriteEngine On
RewriteRule ^folder1/(css|js|images)/([a-z]+)-([0-9]+)\.(css|js|png|jpg|gif)$ /folder1/$1/$2.$4 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:08:26.673

基于此：[http](http://wiki.nginx.org/HttpRewriteModule#rewrite) ://wiki.nginx.org/HttpRewriteModule#rewrite 看起来您可以使用当前的正则表达式并在 nginx.conf 中使用它。

```
rewrite ^folder1/(css|js|images)/([a-z]+)-([0-9]+)\.(css|js|png|jpg|gif)$ /folder1/$1/$2.$4 last; 
```

所以你的整个服务器块可能看起来像：

```
server {
    listen 192.168.0.1;
    server_name blah.blah.com;

    location ~ \.(css|js|png|jpg|gif) {
        rewrite ^folder1/(css|js|images)/([a-z]+)-([0-9]+)\.(css|js|png|jpg|gif)$ /folder1/$1/$2.$4 last;
    }
} 
```

编辑：您只需要适当地调整正则表达式。在您提供的情况下：

```
rewrite ^(.*/?)([a-z]+)-([0-9]+)\.(css|js|png|jpg|gif)$ /$1$2.$4 last; 
```

这将重写：

```
[Anything with an optional trailing slash (or nothing)] followed by [at least one alphabetic character (lowercase only)] followed by [a hyphen] followed by [at least one numeric character] followed by [a dot] followed by [one of css|js|png|jpg|gif] 
```

和

```
[That first optional text followed by an optional slash][the alphabetic part (i.e. style)].[the final css|js|png|jpg|gif] 
```

# c# - 动态编辑器使用模型中的模板

> ID：12672828
> 
> 赞同：0
> 
> 时间：2012-10-01T11:58:52.667
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, templates, razor

该项目目前是 MVC3，但如果需要可以升级。

我正在尝试为一个简单的 cms 改进内容编辑器。目前我们使用

```
@Html.EditorFor(model=>model.Content) //Content is a List<EditableContent> 
```

EditableContent 具有字符串 EditorView 的（全新）属性。这个想法是这将为特定的内容项目命名合适的编辑器。

如果 EditorView 为空，我想要做的是使用我的默认 EditableContent 模板，否则使用 E​​ditorView 作为命名模板。我知道 EditorFor 的重载需要一个模板，但这将对每个内容项使用相同的模板，但这不是我想要的。

我确实尝试使用我的默认模板，基本上是在做

```
//Shared/EditorTemplates/EditableContent.cshtml
@model Website.Areas.Admin.EditableContent

@if (!string.IsNullOrWhiteSpace(Model.EditorView))
{
<text>
    @Model.EditorView
    @Html.EditorForModel(Model.EditorView)
</text>
}
else
{
  //Original template
} 
```

奇怪的是，在这种情况下，视图被定位（我有一个稍微自定义的视图引擎，它似乎可以正确定位视图）。视图的名称（通过 @Model.EditorView ）被发送到页面，但 @Html.EditorForModel() 不会产生任何东西。

有什么想法可以使用 EditorFor 或类似方法为每个项目使用自定义模板吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:46:11.183

界面

```
interface IEditableContent
{
    public virtual DatabaseContext.Content Content { get; set; }
} 
```

执行

```
class SomeTypeEditableContent : IEditableContent
{
    public SomeTypeEditableContent(DatabaseContext.Content c)
    {
        Content = c;
    }
} 
```

服务（存储库或控制器操作）

```
List<IEditableContent> lEditableContent = new List<IEditableContent>();
foreach(var c in db.Contents)
{
    switch (c.EditorView)
    {
    case "SomeType":
        lEditableContent.Add(new SomeTypeEditableContent(c));
        break;
    default:
        lEditableContent.Add(new DefaultEditableContent(c));
        break;
    }
} 
```

看法

```
@Html.EditorFor(model=>model.ListContent) //List<IEditableContent> 
```

可编辑的 SomeType 模板

```
@model SomeTypeEditableContent
//Display this as a editable string 
```

默认可编辑内容模板

```
@model IEditableContent
//Use default display 
```

* * *

对不起，我没有时间测试它。让我知道它是怎么回事，如果没有，我会编辑/删除这个答案。我会将此作为评论发布，但我需要注释和格式化。但至少它让你了解我的想法。

-编辑-

这个示例的重点是向您展示 MVC 框架应该能够为已实现的接口确定正确的模板，即使只是提供类型化为接口的对象也是如此。它将使用refelction（我相信？）来找到最高的类定义，然后寻找模板。

-编辑2（基于评论）-

更改示例以匹配新规范

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:02:04.687

您试图从已经覆盖模板的视图中覆盖编辑器模板似乎很奇怪。我不确定这是否可行（可能，但我从未尝试过，所以我不知道）。我已经在上面的问题中添加了一些评论。

如果事实证明尝试从 EditorTemplates 文件夹中指定模板不起作用，这是可以理解的，我认为您可以通过引入自定义`EditorForModel()`覆盖来实现您想要的。您可以使用 David Ebbo 的 Razor Generator VS 扩展来定义一个可在整个项目中使用的 razor 助手。

```
/// /Views/Helpers/AndiEditorForExtensions.cshtml
@helper AndiEditorFor(HtmlHelper html, Website.Areas.Admin.EditableContent model) {
    if (!string.IsNullOrWhiteSpace(Model.EditorView)) {
    <text>
        @Model.EditorView
        @Html.EditorForModel(Model.EditorView)
    </text>
    }
    else {
        // Call @Html.EditorFor(), which will use the default editor template (i.e., NOT your custom one defined in the database)
        @Html.EditorFor(model) 
    }
} 
```

然后从从数据库加载 EditableContent 项目并显示它们的正常代码中，调用您的自定义扩展：

```
@Html.AndiEditorFor(model) 
```

## 更新：

更好的选择可能是完全跳过 Razor Generator。只需定义一个自定义 HtmlHelper，模仿[EditorExtensions 方法](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/10f94d855cc9#src/System.Web.Mvc/Html/EditorExtensions.cs)。添加类似的 if/else 来处理 Model.EditorView 是否具有值。

# unix - 通过迭代删除名称中有空格的文件

> ID：12672830
> 
> 赞同：0
> 
> 时间：2012-10-01T11:59:02.800
> 
> 标签：unix

我有一些 unix 代码来删除一些文件，但其中一些文件的名称中包含空格（一或两个）。所以迭代和删除不起作用。有人可以帮助我吗？代码：

对于文件名在`ls temp_for* | grep "temp_for_...\.lst"` 做

```
if [ -f $file_name ]
then
    echo '$file_name'
    rm "$file_name"
fi 
```

完毕

文件：temp_for_1 .lst、temp_for_SI.lst、temp_for_f S.lst

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:01:07.040

使用[read](http://wiki.bash-hackers.org/commands/builtin/read)读取整行：

```
ls ... | grep  ... | while read i 
do rm "$i"
done 
```

或使用[find](http://linux.die.net/man/1/find)：

```
find . -name '...' -exec rm {} \; 
```

或将 find 与[xargs](http://linux.die.net/man/1/xargs)一起使用：

```
find . -name '...' -print0 | xargs -0 rm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:03:48.950

如果将文件名用单引号括起来，那么它将转义空格和特殊字符。您也可以使用反斜杠来转义空格和其他字符。

示例 1：

`'带空格的文件名'

示例 2：

文件名\带\空格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:03:49.777

用引号`$filename`括起来，像这样：

```
if [ -f "$file_name" ] 
```

# linux - System(command) 在生产服务器上返回 false：Ruby on Rails

> ID：12672831
> 
> 赞同：0
> 
> 时间：2012-10-01T11:59:09.090
> 
> 标签：linux, shell, ruby-on-rails-3.2

我正在使用[system()](http://rubyquicktips.com/post/5862861056/execute-shell-commands)从 rails-controller 调用 Linux shell 命令。
我正在使用[Audible magic API](http://audiblemagic.com/technology.php)生成音频文件的指纹。

**示例代码：**

```
system ("/usr/local/lib/media2xml -c AppOwner -a AppName -i temp_inputFile.mp3 -A  > temp_response.xml") 
```

**解释**

*命令运行带有一些参数和 inputFile 的 Linux 可执行文件，并在 temp_response.xml 上创建响应指纹*

如果我在终端上键入此命令，则没有错误，并且一切正常。但是当我从我的 Rails 控制器中使用它时，**system(#{command}) 返回 false**，[退出代码为](http://linux.die.net/abs-guide/exitcodes.html) **127**

Web 服务器**很薄**。
导轨 3.2

需要帮助，最好的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:21:34.263

我今天遇到了这个问题。但是我的命令是'python xxxx'。这是由系统环境引起的。可能这个命令的某些lib依赖丢失或没有在默认PATH中设置。你应该检查'media2xml'脚本。如果脚本是 #/usr/bin/xxx，然后确保 /usr/bin/xxx 是 Rails 应用程序的正确版本。

# r - Sweave/tikZ 生成的 R 图中的倒置问题（¿）

> ID：12672835
> 
> 赞同：2
> 
> 时间：2012-10-01T10:21:27.990
> 
> 标签：r, sweave

我对 Sweave 和 R 比较陌生，并且在尝试在我的绘图标签中呈现基本数学符号时遇到了问题。我相信问题可能是由 Sweave 或 tikzDevice 包引起的，因为如果我使用 png 或 pdf 设备，我能够完美地渲染数学符号。

将此代码写入 png 或 pdf 设备会产生预期的输出 --> 符号

```
qplot(factor(cyl), data=mtcars, geom="bar", colour=factor(cyl)) + scale_x_discrete(paste("",">","6k")) 
```

使用在下面的文件上运行 Sweave 产生的 .tex 输出文件将 > 符号替换为 ¿ 符号

```
<<fig=FALSE, echo=FALSE>>=
require(tikzDevice)
require(ggplot2)
require(reshape2)
tikz('sweave-math-symbols.tex', width=5.9, height=2.7)

qplot(factor(cyl), data=mtcars, geom="bar", colour=factor(cyl)) + scale_x_discrete(paste("",">","6k"))
@ 
```

下面是使用 Sweave 输出文件的 LaTeX 文档

```
\documentclass[a4paper,10pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{tikz}

%opening
\title{Sweave Math Symbols}
\author{Phiri}

    \begin{document}

    \maketitle

    \begin{abstract}

    \end{abstract}

    \section{Illustration}
    \input{sweave-math-symbols.tex}

    \end{document} 
```

这个问题出自哪里，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T19:18:49.577

您需要`tikz(..., sanitize = TRUE)`这样`tikzDevice`才能转义特殊字符。详情请参阅`?tikz`。

我一直认为在代码块中手动打开设备很尴尬，这里是等效的块，`knitr`以保持血腥细节远离：

```
<<sweave-math-symbols, dev='tikz', sanitize=TRUE, fig.width=5.9, fig.height=2.7>>=
library(ggplot2)
qplot(factor(cyl), data=mtcars, geom="bar", colour=factor(cyl)) +
  scale_x_discrete(paste("",">","6k"))
@ 
```

但`>`尚未考虑（尚未），`tikzDevice`因此您必须在选项中手动指定它（as `\textgreater{}`）：

```
<<setup, include=FALSE>>=
options(
  tikzSanitizeCharacters = c("%", "$", "}", "{", "^", "_", "#", "&", "~", ">"),
  tikzReplacementCharacters = c("\\%", "\\$", "\\}", "\\{", "\\^{}", "\\_{}", "\\#", "\\&", "\\char`\\~", "\\textgreater{}")
)
@ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T15:04:36.170

您的 Sweave 文件无需修改即可为我工作（在 Ubuntu 10.04 上），但您可以尝试将`>`TeX 数学分隔符（`$$`, ie `$>$`）包装起来；坦率地说，我很惊讶 / 不明白为什么在某些情况下*没有分隔符就可以正常工作。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T03:45:07.190

您应该`T1`在这里真正使用编码，请参阅以下对 TeX.SX 相关问题的回答：[https ://tex.stackexchange.com/a/2376/8057](https://tex.stackexchange.com/a/2376/8057)

对于`tikzDevice`，只需`\usepackage[T1]{fontenc}`写入用于测量文本和生成最终输出（选项`tikzDocumentDeclaration`和`tikzMetricPackages`）的序言。

# php - 生日计算没有结果

> ID：12672840
> 
> 赞同：0
> 
> 时间：2012-10-01T11:59:50.130
> 
> 标签：php, datetime

这就是我开始制作生日系统的方式，以显示您的年龄，例如在 Facebook 上。所以现在我用丹麦语 11-1-1993 做这件事。这是第一天，经过几个月，经过多年的时间来到这个世界或说什么。

在这里，我向您展示了一些关于我如何选择执行此操作的代码，但问题在于它不会以某种方式显示它只是空的。

```
<li>Alder: <?php echo $alder_d;?>/<?php echo $alder_m;?>-<?php echo $alder_aar;?> - 
                            <?php
                            $alle_alder = $alder_d . $alder_m . $alder_aar;
                            function age_from_dob($alle_alder) {
                                return floor((time() - strtotime($alle_alder)) / 31556926);
                            }
                            ?>
                            </li> 
```

询问您是否想了解更多信息

它就在这里，因为我想知道你的年龄。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:06:07.750

如果你想计算年份，你可以

```
$datetime1 = new DateTime("now");
$datetime2 =  DateTime::createFromFormat("m-d-Y", "11-1-1993");
$interval = $datetime1->diff($datetime2);
echo $interval->format('%y Years'); 
```

输出

```
18 Years 
```

# simple.data - 带有返回多个结果集的存储过程的 Simple.data

> ID：12672846
> 
> 赞同：5
> 
> 时间：2012-10-01T12:00:23.023
> 
> 标签：simple.data

有没有办法执行一个使用 simple.data 返回多个结果集的存储过程，你如何区分这两个集合？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T13:06:35.550

使用 SimpleResultSet.NextResult() 访问下一个结果集。

# xml - 多个xsl选择条件

> ID：12672850
> 
> 赞同：2
> 
> 时间：2012-10-01T12:00:28.257
> 
> 标签：xml, xslt, xslt-2.0

我有两个条件来检查真假并采取某种行动。

这是我的代码。

```
<xsl:variable name="hac" select="Hac1"/>

<xsl:choose>
    <xsl:when test="$hac= 'false'">
    <p style="display:inline">Hac1: </p><input type="checkbox" disabled="disabled" >
</xsl:when>
<xsl:otherwise>
    <p>HACCP: </p><input type="checkbox" disabled="disabled" checked="checked">
</xsl:otherwise>
</xsl:choose>

<xsl:variable name="glo1" select="Gloves"/>
    <xsl:choose>
    <xsl:when test1="$glo1= 'false'">
    <p style="display:inline">Gloves: </p><input type="checkbox" disabled="disabled" >
</xsl:when>
<xsl:otherwise>
    <p>Gloves: </p><input type="checkbox" disabled="disabled" checked="checked">
</xsl:otherwise>
</xsl:choose> 
```

这只显示我的 Hac1 而不是我的手套，我不知道问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:16:45.957

假设这是从您的 XSLT 直接复制/粘贴，您有几个错误，所以我很惊讶您实际上得到了任何东西。

所有四个`<input>`标签都缺少它们的关闭，因此将最后一部分从每个更改`>`为`/>`...例如...

```
<input type="checkbox" disabled="disabled" /> 
```

那么你有`<xsl:when test1=...`哪个是不正确的。它应该是`<xsl:when test=...`（注意缺少`1`）...

```
 <xsl:when test="$glo1= 'false'"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:17:44.537

**提供的 XSLT 代码有许多明显的错误**，任何兼容的 XSLT 处理器（甚至是 XML 解析器）都应该引发错误并且根本不会产生任何输出：

1.  元素没有关闭——这`<input>`会影响整个样式表的非格式良好的 XML 文档。

2.  该`<xsl:when>`指令不能有一个名为的属性`"test1"`——只允许“测试”属性。

**当我纠正这两个错误时，现在的转换是**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
    <xsl:variable name="hac" select="Hac1"/>

    <xsl:choose>
        <xsl:when test="$hac= 'false'">
        <p style="display:inline">Hac1: </p><input type="checkbox" disabled="disabled" />
    </xsl:when>
    <xsl:otherwise>
        <p>HACCP: </p><input type="checkbox" disabled="disabled" checked="checked"/>
    </xsl:otherwise>
    </xsl:choose>

    <xsl:variable name="glo1" select="Gloves"/>
     <xsl:choose>
        <xsl:when test="$glo1= 'false'">
        <p style="display:inline">Gloves: </p><input type="checkbox" disabled="disabled" />
        </xsl:when>
        <xsl:otherwise>
            <p>Gloves: </p><input type="checkbox" disabled="disabled" checked="checked"/>
        </xsl:otherwise>
    </xsl:choose>
 </xsl:template>
</xsl:stylesheet> 
```

**它会产生看起来很正常的结果**。

**应用于此 XML 文档时**（没有提供！）：

```
<t>
 <Hac1>true</Hac1>
 <Floves>false</Floves>
</t> 
```

**结果是**：

```
<p>HACCP: </p>
<input type="checkbox" disabled="disabled" checked="checked"/>
<p>Gloves: </p>
<input type="checkbox" disabled="disabled" checked="checked"/> 
```

# xml - 如何使用 ant 在 tesng.xml 中运行特定组？

> ID：12672852
> 
> 赞同：1
> 
> 时间：2012-10-01T12:00:32.287
> 
> 标签：xml, ant, testng

我必须根据 testng.xml 中的组运行测试。以及哪个测试组必须包括想要使用 ant 给予。

例如。

```
<test name="Test1" preserve-order="true">
<groups>
<run>
<include name="Group1"/>
<include name="Group2"/>
</run>
</groups>
</test> 
```

在这里我想输入 Group1 然后只有 Group1 应该运行。

如何做到这一点？请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:02:44.557

如果您使用的是[TestNG Ant 插件，](http://testng.org/doc/ant.html)您可以直接将组指定为属性：

> groups ：要运行的组列表，以空格或逗号分隔。

# mysql - 为什么 SELECT-INSERT 请求这么长？

> ID：12672858
> 
> 赞同：3
> 
> 时间：2012-10-01T12:01:01.907
> 
> 标签：mysql, lamp

我有具有快速存储和大量内存和处理器能力的**LAMP服务器。**

有 2 个结构相同的表，一个有 30.000.000 条记录，另一个是空的。我想将数据从第一个表复制到第二个表并使用此请求：

```
 INSERT INTO table2 SELECT * FROM table1 ; 
```

此请求需要超过 4 小时才能完成。我认为这是不正常的，因为`mysqldump`.`entire database finishes less then hour`

`SELECT`请求有限制吗？或者我必须使用其他代码`optimize performance`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:14:08.820

确保架构与第一个表一样，然后在**Insert query**中给出值的顺序。*****降低了**Select 查询**的性能，而**NoLock**增加了数据的可用性

喜欢，

```
Begin Tran
      INSERT INTO (Col1,Col2, Col3,...Coln) table2 
    SELECT (Col1,Col2, Col3,...Coln) FROM table1 with (NoLock)
Commit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:10:03.540

这可能归结为诸如索引数据和分配存储空间之类的内务处理任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:11:50.420

3000万是很多。您以位查询，例如每个查询中的 100 - 1000 个结果。

或者

我建议您在操作区域中使用 phpmyadmin（选择源表 1），您会看到复制表。

或者

如果您要跨不同位置进行复制，请使用 mysqlworkbench 在新表中导出和导入。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T12:14:21.207

添加超过几千条记录时，尤其是在您正在写入的表未使用时。添加时关闭索引，然后再将其重新打开。如果您有多个索引，请全部执行。

更改表`table_name`禁用键；

导入您的数据并重新打开它们。

更改表`table_name`启用键；

有关更多详细信息，请参阅[http://support.tigertech.net/mysql-large-inserts](http://support.tigertech.net/mysql-large-inserts)

# r - 如何在 R 中访问 stl() 输出值

> ID：12672865
> 
> 赞同：2
> 
> 时间：2012-10-01T12:02:10.747
> 
> 标签：r

我知道这对于 R 的熟练用户来说是一个简单的问题，但我不知道如何访问 stl 输出。我用谷歌搜索了一段时间，但我没有找到任何教程。这就是我的意思，我有这个小命令序列

```
 dd<-read.table('data.dat')
   ddts<-ts(dd,start=1,freq=300)
   stldd<-stl(ddts,s.window='periodic') 
```

知道我想对 stldd 的趋势部分进行拟合，但我不知道如何访问它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T12:11:11.257

您可以使用`str`来查看对象的结构。`stl`对象非常复杂，但您可以使用以下方法提取趋势：

```
stldd$time.series[,"trend"] 
```

# python - Python ElementTree 编写多个命名空间

> ID：12672867
> 
> 赞同：2
> 
> 时间：2012-10-01T12:02:20.913
> 
> 标签：python, xml, elementtree

我有一个 XML 文档，我正在阅读并使用 ElementTree 进行附加。这声明了多个命名空间。据我所知，ElementTree 只允许声明一个全局命名空间： `ET.register_namespace(prefix, uri)`

我想在结果文件中写出多个命名空间。如果我尝试使用 `root.set(prefix, uri)` Then 手动附加它们，它们的顺序错误，我得到`cElementTree.ParseError: unbound prefix: line 2, column 0`

编辑：事实证明我在设置的选项中有错字。我纠正了这个，它重新解析得很好。所以看起来这是一个可行的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:36:11.123

如果你不局限于只使用标准库，我建议你安装和使用提供API 的[lxml](http://lxml.de)`ElementTree`包，它有很多[优点](http://lxml.de/intro.html)，包括很容易让你在同一个文档中拥有多个[命名空间。](http://lxml.de/tutorial.html#namespaces)

# r - 如何将 xls 表读入 R

> ID：12672871
> 
> 赞同：0
> 
> 时间：2012-10-01T12:02:37.060
> 
> 标签：r, excel, xls

我在 Excel 中有一个 xls 表，如下所示：

```
Bolagets firma              Redogörelse - Liv       
Samtliga bolag                      

Org nr      -               1996

Balansräkning. Belopp i kkr.                        Sida 1 (19)

1                                               2   3
Assets

A.  Tecknat ej inbetalt kapital                 0   0

B.  Immateriella tillgångar                 
    1   Goodwill                                0   
    2   Andra immateriella tillgångar       36 651  36 651

C.  Placeringstillgångar                778 288 001 778 288 001

D.  Placeringstillgångar för vilka livförsäkrings-              30 921 242  30 921 242
    tagaren bär placeringsrisken                    

E.  Återförsäkrares andel av                    
    försäkringstekniska avsättningar                    
    1   Avsättning för ej intjänade premier         579 
        och kvardröjande risker             
    2   Livförsäkringsavsättning                    1 369 453   
    3   Avsättning för oreglerade skador            534 971 
    4   Avsättning för återbäring och rabatter          0   
    5   Övriga försäkringstekniska avsättningar         581 
    6   Avsättning för livförsäkringar för vilka            0      1 905 584
        försäkringstagaren bär placeringsrisken             

F.  Fordringar                  
    1   Fordringar avseende direkt försäkring                   5 804 718   
    2   Fordringar avseende återförsäkring                     94 319   
    3   Övriga fordringar                        7 715 106  13 614 143

G.  Andra tillgångar                    
    1   Materiella tillgångar och varulager         184 140 
    2   Kassa och bank                                           5 877 691  
    3   Egna aktier                                          93 264 
    4   Övriga tillgångar           129 360 6 284 455

H.  Förutbetalda kostnader och                  
    upplupna intäkter                   
    1   Upplupna ränte- och hyresintäkter           16 978 205  
    2   Förutbetalda anskaffningskostnader          2 502 074   
    3   Övriga förutbetalda kostnader och           710 516 20 190 795
        upplupna intäkter               

SUMMA TILLGÅNGAR                        851 240 871 
```

是否可以将其读入R？现在，当我尝试使用`read.table`家庭或`read.xls`. 我很抱歉数字跳到下面。基本上，该表在上表中的“资产”下方有 3 列。

此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:50:27.697

根据您的警告，您的列标题似乎与您的列数不匹配。这是有道理的，因为您的 xls 文件没有设置为表格。`read.table()`期望文件中的每一行在格式上都是相同的。

A 行有 4 列：“A”、“Tecknat ej inbetalt kapital”、“0”、“0” B 行有 2 列：“B”、“Immateriella tillgångar” 第 B.1 行有 3 列：“1”、 “Goodwill”、“0” B.2 行有 7 列：“2”、“Andra immateriella tillgångar”、“36”、“651”、“36”、“651”等。

您需要将章节标题（例如“Immateriella tillgångar”或“B”）移动到列中。一旦您开始使用 R 中的数据，这些列将成为因素。

# android - 想从联系人列表“android”中选择电话号码

> ID：12672873
> 
> 赞同：0
> 
> 时间：2012-10-01T12:02:39.403
> 
> 标签：android, android-layout, android-intent

我想从联系人列表中选择电话号码我写这个代码来选择电话号码但是这个抛出异常

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            switch (requestCode) {
            case CONTACT_PICKER_RESULT:
                Bundle extras = data.getExtras();
                Set<String> keys = extras.keySet();
                Iterator<String> iterate = keys.iterator();
                while (iterate.hasNext()) {
                    String key = iterate.next();
                    Log.v("R", key + "[" + extras.get(key) + "]");
                }
                Uri result = data.getData();
                Cursor c = getContentResolver().query(result,null,null,null,null);
                try {
                    c.moveToFirst();
                    String name = c
                            .getString(c
                                    .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                    Log.i("name", name);
                    String contactId = c.getString(c
                            .getColumnIndex(ContactsContract.Contacts._ID));
                    Log.i("Contact Id : ", contactId);
                    Cursor phones = getContentResolver().query(
                            ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                            null,
                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                    + " = " + contactId, null, null);
                    final String[] contactNumbers = new String[phones
                            .getCount()];
                    int count = 0;
                    while (phones.moveToNext()) {
                        contactNumbers[count] = phones
                                .getString(phones
                                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                        count++;
                    }
                    phones.close();

                    if (contactNumbers.length > 1 ) {
                        AlertDialog.Builder builder = new AlertDialog.Builder(this);
                        builder.setTitle("Call Number");
                        builder.setItems(contactNumbers, new OnClickListener() {
                            public void onClick(DialogInterface dialog, int which) {
                                ContactActivity.roamNumber
                                        .setText(contactNumbers[which]);

                            }
                        });

                        builder.create().show();

                    } else {
                        ContactActivity.roamNumber
                        .setText(contactNumbers[0]);
                    }

                } finally {
                    c.close();
                }

                break;
            }

        } else {
            // gracefully handle failure
            Log.i("", "Warning: activity result not ok");
        }

    } 
```

注意：我的手机同步在Facebook时选择了任何Facebook联系，给我号码抛出异常：

```
10-01 13:44:17.369: E/AndroidRuntime(9991): FATAL EXCEPTION: main
10-01 13:44:17.369: E/AndroidRuntime(9991): java.lang.RuntimeException: Failure delivering result ResultInfo{who=Contact, request=1001, result=-1, data=Intent { dat=content://com.android.contacts/contacts/lookup/543r3759-2D333B2D45513B2D373D41.1160i730738002/3838 flg=0x1 (has extras) }} to activity {com.xeno.callRoaming/com.xeno.callRoaming.XenoCallRoamingActivity}: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
10-01 13:44:17.369: E/AndroidRuntime(9991):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2536)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:2578)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at android.app.ActivityThread.access$2000(ActivityThread.java:117)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:965)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at android.os.Looper.loop(Looper.java:123)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at android.app.ActivityThread.main(ActivityThread.java:3687)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at java.lang.reflect.Method.invokeNative(Native Method)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at java.lang.reflect.Method.invoke(Method.java:507)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at dalvik.system.NativeStart.main(Native Method)
10-01 13:44:17.369: E/AndroidRuntime(9991): Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
10-01 13:44:17.369: E/AndroidRuntime(9991):     at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at android.database.CursorWrapper.getString(CursorWrapper.java:135)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at com.xeno.callRoaming.ContactPickerActivity.onActivityResult(ContactPickerActivity.java:67)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at android.app.ActivityGroup.dispatchActivityResult(ActivityGroup.java:119)
10-01 13:44:17.369: E/AndroidRuntime(9991):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
10-01 13:44:17.369: E/AndroidRuntime(9991):     ... 11 more 
```

问题是什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:18:15.083

我使用此代码解决问题：

```
Uri result = data.getData();

                Cursor c = getContentResolver().query(result, null, null, null,
                        null);
                Log.d("Row Count c", c.getCount() +"");
                Log.d("result", result +"");

                try {
                    c.moveToFirst();
                    String name = c
                            .getString(c
                                    .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                    Log.i("name", name);

                    String contactId = c.getString(c
                            .getColumnIndex(ContactsContract.Contacts._ID));
                    Log.i("Contact Id : ", contactId);
                    Cursor phoness = getContentResolver().query(
                            ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                            new String[]{ContactsContract.CommonDataKinds.Phone.NUMBER},
                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                    + " = " + contactId, null, null);
                    Cursor phones = managedQuery(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                            new String[]{ContactsContract.CommonDataKinds.Phone.NUMBER}, 
                            ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME  +
                            " like ('"+name+"')", null, null);

                    if (phones.getCount() == 0) {
                        AlertDialog.Builder numbersBuilder = new AlertDialog.Builder(this);
                        numbersBuilder.setMessage("No Number Found ..!")
                        .setCancelable(true);
                        AlertDialog alert = numbersBuilder.create();
                        alert.show();
                        ContactActivity.roamNumber
                        .setText("");
                        break;
                    }

                    final String[] contactNumbers = new String[phones
                            .getCount()];
                    int count = 0;
                    while (phones.moveToNext()) {
                        contactNumbers[count] = phones
                                .getString(phones
                                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                        count++;
                    }
                    phones.close();

                    if (contactNumbers.length > 1 ) {
                        AlertDialog.Builder builder = new AlertDialog.Builder(this);
                        builder.setTitle("Call Number");
                        builder.setItems(contactNumbers, new OnClickListener() {
                            public void onClick(DialogInterface dialog, int which) {
                                ContactActivity.roamNumber
                                        .setText(contactNumbers[which]);

                            }
                        });

                        builder.create().show();

                    } else {
                        ContactActivity.roamNumber
                        .setText(contactNumbers[0]);
                     }

                } finally {
                    c.close();          
                      } 
```

# php - 如何从邮政编码中获取地址

> ID：12672883
> 
> 赞同：0
> 
> 时间：2012-10-01T12:03:40.767
> 
> 标签：php, postal-code

> **可能重复：**
> [通过替代邮政编码的英国皇家邮政 PAF 地址查找器？](https://stackoverflow.com/questions/2832942/uk-royal-mail-paf-address-finder-via-postcode-alternatives)

我想实现从邮政编码获取街道地址的功能。我在 php 工作。所以我需要一个在 php 中实现的解决方案，它将邮政编码转换为街道地址。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:10:03.020

我使用 MaxMind 提供的免费[G​​eolite 数据库](http://www.maxmind.com/en/geolite)取得了巨大的成功。它以 CSV 和 SQLite 的形式出现，均可通过 PHP 访问。

我喜欢这个选项，因为它不会将您束缚在第 3 方 Web 服务上，并且他们会发布定期更新，并可选择自动将 MySQL 版本的数据库与其他现有的 MySQL 安装同步。

其用途远远超出地址查找。

编辑：要获得实际的街道地址，您“可能”需要将经纬度发送到另一个服务。GeoLite 给出了邮政编码的经纬度，街道地址有邮政编码，但邮政编码有很多街道地址，因此查找起来更加困难。

免责声明：无论如何，我都不隶属于 MaxMind。刚刚发现它是一个很好的资源。

# asp.net-mvc - 如何使用 ASP.NET MVC 和表单身份验证创建单页应用程序 (SPA)？

> ID：12672886
> 
> 赞同：4
> 
> 时间：2012-10-01T12:03:47.170
> 
> 标签：asp.net-mvc, knockout.js, asp.net-web-api, sammy.js

我使用 Knockout 用于带有外部模板的视图模型，使用 sammy 进行路由，使用 Web API 从服务器获取数据。

问题是

1.  我如何使用服务器路由将用户重定向到客户端路由，例如将人员/用户名重定向到#/人员/用户名。

2.  验证用户也有很大的困惑？

3.  如何在单页应用程序中对用户进行身份验证？

4.  有些页面无需登录即可查看？如何做到这一点？

我可以使用控制器的部分视图结果并在视图中获取吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T12:43:32.517

1.  [Custom Routing](https://stackoverflow.com/questions/5567721/including-hash-values-in-asp-net-mvc-url-routes)，但请注意，如果您必须这样做，从客户端获取数据将会令人困惑。
2.  应该是您习惯的相同类型的身份验证。[ [Authorize]](https://stackoverflow.com/questions/970271/is-the-authorize-attribute-in-asp-net-mvc-used-for-authentication-as-well-as-au)属性一如既往。
3.  应用程序将在启动时授权，“单页”部分不会影响这一点，除了您必须仔细检查用户对[每个 AJAX 请求](https://stackoverflow.com/questions/12082062/securing-ajax-calls-in-a-asp-net-mvc-application)的权限。
4.  [authorize 属性](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)可以放置在类（控制器）级别以及方法（操作）级别，因此您可以根据需要对其进行选择。
5.  [部分视图结果和 AJAX](https://stackoverflow.com/questions/4557021/mvc-3-ajax-load-partial-view-into-div)可能会令人困惑。基本上，如果要使其正常工作，您将在正常情况下构建 AJAX 请求服务器端。

最后，您可能会想方设法做到这一点。微软的 ASP.NET 是一种非常*厚实*的网络技术。我非常了解它，但我仍然会告诉你，我可以在许多其他技术中更快地构建单页应用程序。除此之外，根据您提出的问题类型，我觉得您对 ASP.NET 相当陌生，这对您来说将是一个重大挑战。

祝你好运。并读[了这本书](https://www.google.com/shopping/product/3633371592248434961)。这是较旧的技术，但我从来没有找到一本更好的书来教授良好的实践。史蒂夫桑德森是个天才。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:56:09.753

使用像 sammy 这样的 url 路由和服务器路由，通过 ajax 加载视图并通过控制器进行身份验证。

# c# - 使用 SHDocVw DLL 获取 Internet Explorer 流

> ID：12672891
> 
> 赞同：0
> 
> 时间：2012-10-01T12:03:56.890
> 
> 标签：c#, internet-explorer, shdocvw

我使用此代码打开一个网站：

```
private void OpenBrowser(string url)
{
    object sender;
    WebBrowserDocumentCompletedEventArgs e;
    ie.DocumentComplete += (DWebBrowserEvents2_DocumentCompleteEventHandler) 
        new DWebBrowserEvents2_DocumentCompleteEventHandler(webBrowser1_DocumentCompleted);
        wb = (IWebBrowserApp) ie;
        wb.Visible = true;
        object o = null;
        wb.Navigate(url, ref o, ref o, ref o, ref o);

}

private void webBrowser1_DocumentCompleted(object sender, ref object e)
{

} 
```

该网站已打开，但我想访问该网页的文档流以访问页面的内容。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:10:17.903

您可以尝试按照此处所述访问文档对象模型：http: [//msdn.microsoft.com/en-us/library/aa290341 (VS.71).aspx](http://msdn.microsoft.com/en-us/library/aa290341(VS.71).aspx)

# c# - 访问不在数据模型中的表

> ID：12672892
> 
> 赞同：0
> 
> 时间：2012-10-01T12:03:59.603
> 
> 标签：c#, asp.net-mvc-3, entity-framework-4.1, ef-code-first

我的经典初学者的 MVC3 代码优先应用程序在其数据模型中有一个包含键/值对的 POCO 类。该应用程序从数据库中读取一组这些对，这些对表示另一个表的结构（键=字段名称/值=字段类型）。现在我需要让同一个应用程序访问该表。

这是一个新的应用程序，我控制架构，所以我没有限制：表可以在同一个/另一个数据库中定义，应用程序可以使用任何技术等。

最好的方法是什么？尽管模型已经构建，我仍然可以使用 Dbcontext 来完成它吗？

注意：使用反射我创建了一种新类型的表结构，如果我可以在访问表时使用它会很好。

谢谢

# msdeploy - 在 msdeploy runco mmand 中将参数传递给批处理文件

> ID：12672893
> 
> 赞同：5
> 
> 时间：2012-10-01T12:04:09.543
> 
> 标签：msdeploy, web-deployment, webdeploy, microsoft-web-deploy

我无法让它工作

```
call "%MSDeployPath%msdeploy" -verb:sync -source:runCommand='backup.bat param1' -dest:auto,computername=10.xx.xx.xx,username=xxx,password=yyy 
```

它给了我：

> 警告：'backup.bat' 不是内部或外部命令、可运行程序或批处理文件。
> 
> 警告：进程“C:\Windows\system32\cmd.exe”（命令行“”）退出，代码为“0x1”。更改总数：1（添加 0 个，删除 0 个，更新 1 个，更改 0 个参数，复制 0 个字节）

如果我删除 param1 并将其硬编码在 .bat 中，它可以工作，因此 bat 文件没有问题，以防万一。

我试图指定 .bat 的完整路径，但它仍然不起作用：

> ```
> call "%MSDeployPath%msdeploy" -verb:sync -source:runCommand='c:\backup.bat param1' -dest:auto,computername=10.xx.xx.xx,username=xxx,password=yyy 
> ```

在这种情况下，它看起来像是将路径解释为远程路径，它希望 backup.bat 在服务器上。我在服务器上移动了 backup.bat 后向我确认了这一点，它起作用了

为什么一定要这么难？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T11:46:38.123

**编辑**你是对的，[文档指出](http://technet.microsoft.com/en-us/library/ee619740%28v=WS.10%29.aspx)cmd/bat 文件将被流式传输到目的地。

在我看来，这只是它不能接受参数的功能的限制。在部署时使用硬编码的设置创建批处理文件的修改版本应该不会太难。

就像是：

```
REM Start of prepended script
SET SCRIPT_USERNAME=ThatGuy
REM End of prepended script

IF ("%SCRIPT_USERNAME%" == "") SET SCRIPT_USERNAME=%1 
```

**更新**浏览了 msdeploy 的反射源 (ahem)，我可以确认它只是当前设计的方式。它根据整个路径是否代表一个文件来确定是否上传文件。由于添加参数会阻止它解析文件的路径，因此它不会上传任何内容。

# css - 如何在响应式 css 中更改元素的顺序和控制流

> ID：12672902
> 
> 赞同：2
> 
> 时间：2012-10-01T12:04:39.620
> 
> 标签：css, responsive-design, skeleton-css-boilerplate

我正在使用骨架，这是我想要的响应式布局：

移动布局 - 标题、图像、描述都在一个列堆栈中

桌面布局 - 图片右侧的标题和描述

![移动和桌面布局](../Images/3754fdfe42dd5297648f18f78ba76bc1.png)

我应该如何构建 html 和 css 以便响应式布局可以仅使用 css 和媒体查询从一种更改为另一种？我尝试在桌面布局中将图像浮动到左侧，并使标题成为移动布局中的块元素：

```
<div class="container">
<span class="date">10/1/2012</span>
<span class="title">title</span>
<img class="thumbnail" src="http://www.placehold.it/300x200">
<p class="description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut nisl urna, posuere et tincidunt id, malesuada id libero. Sed vel neque tellus. Nulla et justo eu sapien accumsan eleifend eget id enim. Suspendisse sagittis, erat in mattis sagittis, dolor leo molestie nisi, eget cursus massa est at erat.
</p>
</div>​​​​​​​​​​​​​​ 
```

移动 CSS

```
.title {
     display:block;
}

​.thumbnail {
}

.conatainer {
 width:320px;
} 
```

桌面 CSS

```
​.title {
     position:relative;
}

​.thumbnail {
    float:left;
}

.conatainer {
 width:960px;
} 
```

这似乎在大多数情况下都有效，除了如果文本足够长，描述会在照片底部围绕它的照片下方包裹，而不是仅仅保留在右栏。

如果我使用骨架或响应式网格系统之一，我应该如何执行此操作，我应该使用它们的列类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:12:13.943

您也可以`float: left`在样式表的`.description`段落上进行设置。`desktop.css`这将使您的段落在自己的“列”中展开。

然后，记住也要对`.container`元素应用清除

# java - 带有来自 jList 的输入的 jTextfield

> ID：12672905
> 
> 赞同：0
> 
> 时间：2012-10-01T12:04:50.687
> 
> 标签：java, swing, focus, jtextfield, jlist

我有一个 jTextfield，我必须从 jList 中获取输入。在 FocusGained 属性上，jList 应该正好出现在 jTextfield 下方，而 jList 应该在 FocusLost 属性上消失。我已经完成了一些编码，但我遇到了问题。在 FocusGained 属性中，jList 出现，但单击它后，它会转到其他 jTextfield 的背面，该 jTextfield 位于前一个文本字段下方。以下是我的代码：

```
private void txtAccountFocusGained(java.awt.event.FocusEvent evt) {                                       
    jScrollPane3.setLocation(txtAccount.getX(), txtAccount.getY()+txtAccount.getHeight());
    jScrollPane3.setVisible(true);    //scrollpane associated with list
    listAccount.setVisible(true);   //listAccount is jList
}

private void listAccountMouseClicked(java.awt.event.MouseEvent evt) {                                         
    txtAccount.setText((String)listAccount.getSelectedValue());
    jScrollPane3.setVisible(false);  //scrollpane associated with list
    txtSalesLedger.requestFocus(); //it is next field
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:02:03.673

使用 a`JComboBox`而不是 a `JTextField`。你可以打电话`JComboBox.setEditable( true )`，然后`JComboBox`会有一个编辑器`JTextField`。正是你想要的，用户可以输入任何文本，而且列表框也可以用箭头图标打开。此外，您可以通过调用使列表自动出现`JComboBox.showPopup()`。如果您将焦点侦听器添加到 JComboBox 的编辑器文本字段，您还可以在用户单击文本字段时从那里显示弹出窗口。可以使用箭头图标关闭弹出列表。

这是一个示例代码：

```
final JComboBox comboBox = new JComboBox( 
    new Object[] { "", "Item #1", "Another item", "Something else" } );

comboBox.setEditable( true );

comboBox.getEditor().getEditorComponent().addFocusListener( new FocusAdapter() {
    @Override
    public void focusGained( final FocusEvent event ) {
        comboBox.showPopup();
    }
} ); 
```

**注意：**组合框的第一项是空字符串。我添加了这一点，以便组合框的编辑器文本字段最初不会显示任何值。当然，如果你想要一个初始值，你可以删除它。

# c - C 指针和数组

> ID：12672912
> 
> 赞同：2
> 
> 时间：2012-10-01T12:05:08.090
> 
> 标签：c, arrays, pointers, multidimensional-array

我了解到：

```
char ar[] 
```

是一样的

```
char *ar 
```

这三个表达式：

```
char ar[][] //1
char *ar[] //2
char **ar //3 
```

编译器是一样的吗？

这两个表达式：

```
char ar[]
char ar[][] 
```

将在堆栈上分配数组，而所有其他人将在堆上分配它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T12:12:36.420

```
char ar[]; creates an array of characters when size is specified.

char * ar; creates a character pointer. Might point to even a single or more characters.

char ar[][]; when size is specified, creates a 2 dimensional array.
char *ar[]; creates an array of character pointers
char **ar; a pointer to pointer to character. 
```

当您静态分配内存时，例如

```
char a[10]; // this goes on stack 
```

然而

```
char *a = malloc(10); // this goes on heap and needs to be freed by the programmer 
```

一个可能常见的事情可能是您使用 char **a 分配了一个数组数组，即 a 的每个元素也是一个字符数组。然后可以使用语法 a[x][y] 访问其中的任何一个元素

另一个区别是 char *a 是一个指针变量，即*a 可以重新分配给另一个地址*，而 char a[] 将返回*一个指针常量并且不能重新分配*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T12:07:24.380

1.  它们不一样，除了函数原型。
2.  同样，它们并不相同，只是最后两个在函数原型中是相同的。
3.  这些都与堆与堆栈分配无关。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T12:10:24.863

`char ar[]`和`char *ar`不是一回事。一个是数组，一个是指针。如果你说：

```
char ar[10] = {0};

ar[0] == *ar 
```

那么是的，它们都可以被取消引用并具有相同的结果。关于堆与堆栈，这与您所说的没有任何关系......变量在静态时从堆栈分配：

```
char ar[10] = {0};  // this is allocated off the stack. 
```

动态变量在堆外分配：

```
char *a = malloc(10); //this is from the heap 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T12:13:58.510

1）两者不相同，但是在将数组传递给函数时，它被视为指针。

2)

```
int ar[10][10] 
```

ar 是一个 10 行 10 列的二维数组。

```
char *ar[] 
```

ar 是包含“char”类型指针的数组。

```
char **ar 
```

ar 是指向“char”类型的指针。

3)

```
char ar[20]
char ar[10][10] 
```

两者都从堆栈中分配内存。要从堆中分配内存，则必须使用动态内存分配概念。即：malloc。

希望这可以帮助。:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T12:15:30.230

`char ar[]`仅与`char *ar`when`ar`是函数参数相同。否则它们分别是一个数组和一个指针。

`char ar[][]``ar`如果不是函数参数，则为二维数组。否则它是一个指向一维数组的指针。

`char *ar[]``ar`如果不是函数参数，则为一维指针数组。否则它是指向指针的指针。

`char **ar`是指向指针的指针。

基本上，如果它是一个函数参数并且看起来像一个数组，它实际上是一个指向数组第一个元素的指针。数组不作为函数参数整体传递。当您尝试这样做时，您会将指针传递给数组的第一个元素，而不是数组本身。

在函数之外定义的所有变量既不在堆中也不在堆栈中。它们是全局变量。

函数内部定义的所有变量（`static`变量除外）都在堆栈上。`static`变量是全局变量，它们既不在堆中也不在堆栈中。`static`减少全局变量对函数或模块范围的可见性，仅此而已。

只有那些通过`malloc()`,显式分配`calloc()`的变量`ralloc()`存在于堆中。一些标准库函数可能会在堆中创建变量/对象，例如`fopen()`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T12:23:07.247

问题是数组包含比指针更多的信息。您可以确定数组的大小，编译器也知道。例如， 的类型`"Hello"`是**const char[6]**。注意大小。以下片段说明：

```
#include <stdio.h>

int main()
{
    const char array[] = "Hello";
    char* pointer = "Hello";
    printf("Array: %d - Pointer: %d", sizeof(array), sizeof(pointer))
    return 0;
} 
```

在我的系统上，[该代码段提供以下输出](http://codepad.org/NZ4aLNEX)：

```
Array: 6 - Pointer: 4 
```

对于数组，编译器知道大小就可以了，因为它们在编译时总是已知的。然而，指针通常是在运行时确定的，这就是为什么它们通常与动态分配的内存相关联。

一种真正简化的思考方式是数组是“整体”，而指针只是对第一个元素的引用。

# java - 下载后在WebService中删除文件

> ID：12672915
> 
> 赞同：2
> 
> 时间：2012-10-01T12:05:25.380
> 
> 标签：java, web-services, jax-ws

我开发了一个应用程序，其中文件存储在文件服务器（自定义）上。有两个 Web 服务相互通信。“WebServiceA”和“WebServiceB”。在两台不同的机器上。

WebServiceB 在 WebServiceA 的调用上存储/从 fileServer 上/获取文件。

当客户端想要下载文件时，他调用WebServiceA 的方法。WebServiceA 调用 WebServiceB 的下载方法。我启用了 MTOM 和 StreamingAttachment，因为我的文件非常大，有些是 4KB，有些高达 2GB。我在 WebServiceB 上的 WebMethods 步骤是从 FileServer （在不同的机器上）获取本地机器上的文件。通过将文件作为参数传递，从 FileDataSource 创建 DataHandler。将 DataHandler 对象返回给 WebServiceA 的方法。

问题是，经过一些操作，WebServiceB 的本地计算机存储了大量在下载操作期间创建的文件。

我试过1）删除WebServiceB中finally块中的文件，这导致WebServiceA上的文件为空

2）创建一个临时文件。temp = File.createTempFile("temp", ".txt"); temp.deleteOnExit(); 但这不会删除，因为我的 webserviceB 永远不会关闭。

3）我无法在 WebServiceA 到 WebServiceB 之间实现“确认”或“按时间间隔删除”，因为我的经理拒绝了该解决方案。

java中是否存在任何真正的解决方案，它告诉我文件目前没有被任何人使用。

我所有的机器都在 freebsd 8.2、java6、glassfish 3.1 和 jaxws 2.2 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:31:10.170

简单的解决方案是有一个批处理项目来定期删除文件。

# jquery - 通过javascript/jquery根据声音强度生成声波

> ID：12672919
> 
> 赞同：0
> 
> 时间：2012-10-01T12:05:41.263
> 
> 标签：jquery, audio

我正在尝试将基于 jquery 的音频播放器/录音机与声波集成。我们有了从那里生成声波的想法-：http: [//js.do/sound-waves-with-javascript/](http://js.do/sound-waves-with-javascript/) 我想根据音乐播放的声音深度（强度）生成相同的波。有可能吗？我真的需要帮助才能完成它。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:26:47.250

根据一些数学生成声音，然后使用基于相同数学的 javascript 创建该声音的视觉表示是一回事。

然而，HTML5 音频元素无法访问声音文件中的任何信息来生成声音播放的任何视觉表示，除了相当新的和实验性的[HTML5 音频数据 API](https://wiki.mozilla.org/Audio_Data_API)，它具有有限的浏览器支持，但可以在一些较新的版本中使用浏览器。

另一种选择是在 Python 脚本或类似的东西中运行音频文件，以生成具有间隔振幅的文本文件，可用于生成声音的视觉表示，但我见过的唯一实现是实例其中仅实现一个音频文件用于演示目的等，并且为任何音频文件设置与 Python 服务器端一起使用的东西可能会相当复杂。这里有更多关于如何使用 Python 生成声音数据[的](http://ricardocabello.com/blog/post/677)内容！

最后，总是有闪光？

# php - PHP 的 imagettftext 在透明背景上创建黑边

> ID：12672920
> 
> 赞同：5
> 
> 时间：2012-10-01T12:05:45.250
> 
> 标签：php, imagettftext

我有这个代码：

```
$im = imagecreatetruecolor(70, 25);

$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);

imagecolortransparent($im, imagecolorallocate($im, 0,0,0));

$font = 'font.ttf';

imagettftext($im, 20, 0, 3, 22, $white, $font, $randomnr);

header("Expires: Wed, 1 Jan 1997 00:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

header ("Content-type: image/png");
imagepng($im);
imagedestroy($im); 
```

就像我在标题中所说的那样，它会在文本周围产生一些黑边。我也尝试了`imagealphablending`/`imagesavealpha`并且我得到了相同的结果（我在透明背景上使用了白色文本，以便您可以看到我在说什么）：

![黑边](../Images/57fa59a0ccfa2fcc85bae3794617fd2c.png)

**更新：**解决方案是：

```
$im = imagecreatetruecolor(70, 25);
$font = 'font.ttf';
//antialiasing:
$almostblack = imagecolorallocate($im,254,254,254); 
imagefill($im,0,0,$almostblack);
$black = imagecolorallocate($im,0,0,0); 
imagecolortransparent($im,$almostblack);

imagettftext($im, 20, 0, 3, 22, $white, $font, $randomnr);
... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T12:26:18.883

这样的事情应该做的工作：

```
$width = 70;
$height = 25;

$im = imagecreatetruecolor($width, $height);

$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 221, 221, 221);

imageSaveAlpha($im, true);
imageAlphaBlending($im, false);

$transparent = imageColorAllocateAlpha($im, 0, 0, 0, 127);
imagefilledrectangle($im, 0, 0, $width-1, $height-1, $transparent);
imageAlphaBlending($im, true);

$font = 'font.ttf';
$randomnr = "1234";
imagettftext($im, 20, 0, 3, 22, $white, $font, $randomnr);

header("Expires: Wed, 1 Jan 1997 00:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

header ("Content-type: image/png");
imagepng($im);
imagedestroy($im); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:13:25.987

这就是您在此处指定的内容：

```
imagecolortransparent($im, imagecolorallocate($im, 0,0,0)); 
```

如果您想使用其他颜色作为透明，请选择其他颜色。现在你正在使用黑色。

请参阅[`imagecolortransparent`^(*文档*)](http://php.net/imagecolortransparent)。

还要记下该用户在同一页面上的注释：

> 由于抗锯齿，带有文本的透明背景似乎效果不佳。

# windows-8 - Windows 8 动态磁贴更新不起作用

> ID：12672925
> 
> 赞同：0
> 
> 时间：2012-10-01T12:05:51.777
> 
> 标签：windows-8, microsoft-metro, windows-runtime, live-tile

我正在编写一个 Windows 8 应用程序并试图让动态磁贴工作。这是我到目前为止所拥有的（全部在`App.xaml.cs`）：

在`OnLaunched()`：

```
Window.Current.VisibilityChanged += Current_VisibilityChanged; 
```

事件处理程序：

```
void Current_VisibilityChanged(object sender, Windows.UI.Core.VisibilityChangedEventArgs e)
{
    // create a string with the tile template xml
    string tileXmlString = "<tile><visual><binding template=\"TileSquareBlock\">" + App.VM.GetImageLinks() + "</binding></visual></tile>";

    // create a DOM
    Windows.Data.Xml.Dom.XmlDocument tileDOM = new Windows.Data.Xml.Dom.XmlDocument();
    // load the xml string into the DOM, catching any invalid xml characters 
    tileDOM.LoadXml(tileXmlString);

    // create a tile notification
    TileNotification tile = new TileNotification(tileDOM);

    // send the notification to the app's application tile
    TileUpdateManager.CreateTileUpdaterForApplication().Update(tile);
} 
```

`App.VM.GetImageLinks()`返回：

```
<tile>
    <visual>
        <binding template=\"TileSquareBlock\">
            <image id=\"1\">Assets/Img1.jpg</image>
            <image id=\"2\">Assets/Img2.jpg</image>
            <image id=\"3\">Assets/Img3.jpg</image>
        </binding>
    </visual>
</tile> 
```

目前，我基本上只是想让这些图像显示在开始屏幕上。我的猜测是这`VisibilityChanged`是错误的事件，因为它似乎发生得太频繁了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:24:23.117

使用的 XML 无效，因为 TileSquareBlock 模板不包含任何图像。查看[磁贴模板目录](http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx)以查看各种可视模板及其对应的 XML。

NotificationsExtensions 库（在[MSDN 切片示例](http://code.msdn.microsoft.com/windowsapps/App-tiles-and-badges-sample-5fc49148)中找到）提供了一个对象模型，可将图像和文本字段映射到命名属性。它提供了更多的验证，并可以简化您的代码。

# asp-classic - 使用经典 asp 收集数组中的第一个元素

> ID：12672926
> 
> 赞同：0
> 
> 时间：2012-10-01T12:05:58.297
> 
> 标签：asp-classic

我在经典 asp 中有一个二维数组，我的目标是在该数组中找到第一个元素并将其保存在一个变量中。之后剩余的元素（第一个元素除外）保存在同一个数组中。

示例：如果“ `aryReturn`”是一个类似的数组。

```
aryReturn(0,0) = 1001
aryReturn(1,0) = 1002
aryReturn(2,0) = 1003 
aryReturn(3,0) = 1004
aryReturn(4,0) = 1005
aryReturn(5,0) = 1006 
```

现在我想`aryReturn(0,0)= 1001`在`Dim intValue`.

```
intValue = 1001 
```

然后在那之后，它应该返回带有剩余元素的数组。aryReturn =

```
aryReturn(0,0) = 1002
aryReturn(1,0) = 1003
aryReturn(2,0) = 1004 
aryReturn(3,0) = 1005
aryReturn(4,0) = 1006 
```

请帮助我...谢谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:02:04.317

我想我已经回答了你的问题。下面的代码可能会对您有所帮助。

```
dim aryReturn(5,0)
aryReturn(0,0) = 1001
aryReturn(1,0) = 1002
aryReturn(2,0) = 1003 
aryReturn(3,0) = 1004
aryReturn(4,0) = 1005
aryReturn(5,0) = 1006
var1=aryReturn(0,0)
  for i=0 to ubound(aryReturn)-1
     aryReturn(i,0)=aryReturn(i+1,0)
  response.Write(aryReturn(i,0)&"<br>")
  next 
```

# cmake - FireBreath：未知的 CMake 命令“find_firebreath_X11_deps”

> ID：12672927
> 
> 赞同：0
> 
> 时间：2012-10-01T12:06:05.110
> 
> 标签：cmake, firebreath

成功安装firebreath（git clone，git update，python）后我想运行

```
prep2010.cmd projects build 
```

但我总是得到一个错误：

```
Generating plugin configuration files in G:/firebreath/build/projects/red/gen
CMake Error at src/PluginAuto/CMakeLists.txt:28 (find_firebreath_x11_deps): 
Unknown CMake command "find_firebreath_x11_deps". 
```

这可能是什么原因？

这只发生在 1.7 分支上。1.6完美运行！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:44:35.340

这是一个错误。现在已经修好了；拉最新的。

对此感到抱歉，我们正在为 1.7 版本做准备，而这个 bug 被我们忽略了。

# iphone - 如何在 iOS 中以编程方式访问应用程序目录

> ID：12672934
> 
> 赞同：1
> 
> 时间：2012-10-01T12:06:26.850
> 
> 标签：iphone, ios, database

如果我们以编程方式创建数据库文件，它将存储在`/Users/admin/Library/Application Support/iPhone Simulator/5.1/Applications/DB425A55-5008-44D2-B08D-C21AFFBAF935/Documents`. 为此，我们必须使用以下代码。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *databasePath = [documentsDirectory stringByAppendingPathComponent:@"sample.db"]; 
```

有没有办法在我们的本地应用程序文件夹中创建和存储数据库文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:11:43.177

您正在考虑您的应用程序包 - 您可以通过阅读该课程的文档来获取有关此内容的详细信息`NSBundle`。

但是，您对此只有读取权限 - 您可以读取包中文件的内容，但不能更改它们等。这是因为您的包已签名，如果您能够更改它，那么证书校验和等将不行 :)

为什么你特别想写入你的应用程序的文件夹？为您的应用程序提供的其他目录有什么问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:12:47.017

不，您不能更改/添加到您的应用程序包。

# c++ - C++ std::string 如何用多个双引号格式化字符串文字？

> ID：12672935
> 
> 赞同：0
> 
> 时间：2012-10-01T12:06:27.873
> 
> 标签：c++, stdstring

我有一个 std::string 文字，双引号内有双引号，双引号内。我需要使用什么格式才能使其工作？这是一个例子：

```
std:string http_command = "wget --post-data="user=bla password=bla query=select * from bla bla where username="" and name=bla\" http:://example.com" 
```

以下部分失败`username=""`

多谢你们。

更新：修复了我的样本，我在那里多了一个双引号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:08:00.573

```
std::string http_command = "wget --post-data=\"user=bla password=bla query=\"select * from bla bla where username=\"\" and name=bla\" http:://example.com" 
```

转义除第一个和最后一个引号（分隔字符串的引号）以外的所有引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:14:20.817

```
std:string http_command = "wget --post-data=\"user=bla password=bla query=\\\"select * from bla bla where username=\\\\\\"\\\\\\" and name=bla\\\" \" http:://example.com" 
```

有点猜测，但我认为你必须逃避内部反斜杠。请注意，我认为您在帖子数据的末尾缺少报价。

# android - android：使用oauth登录gmail不要求输入用户名或密码

> ID：12672938
> 
> 赞同：0
> 
> 时间：2012-10-01T12:06:41.477
> 
> 标签：android, oauth, gmail

在我的应用程序中，我使用 oauth 登录到我的谷歌帐户，并且我正在检索所有用户帐户详细信息。问题是，由于我总是登录到我的主要 gmail 帐户，我的应用程序将其作为用户帐户。它从不提示输入用户登录名/密码。所以我无法尝试获取任何其他 gmail id 的帐户详细信息。

即使用户已经登录，我如何强制要求输入电子邮件和密码。我的请求令牌代码如下所示

```
public class RequestTokenActivity extends Activity {

ProgressDialog progressDialog;
private OAuthConsumer consumer; 
private OAuthProvider provider;
private SharedPreferences prefs;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.i("create","create");

    try {
        consumer = new CommonsHttpOAuthConsumer(C.CONSUMER_KEY, C.CONSUMER_SECRET);
        provider = new CommonsHttpOAuthProvider(
                C.REQUEST_URL  + "?scope=" + URLEncoder.encode(C.SCOPE, C.ENCODING) + "&xoauth_displayname=" + C.APP_NAME,
                C.ACCESS_URL,
                C.AUTHORIZE_URL);
    } catch (Exception e) {
        Log.e(C.TAG, "Error creating consumer / provider",e);
    }

    //getRequestToken();
    new OAuthRequestTokenTask(this,consumer,provider).execute();
}

@Override
public void onNewIntent(Intent intent) {
    Log.i("newin","newintent");
    super.onNewIntent(intent); 
    prefs = PreferenceManager.getDefaultSharedPreferences(this);
    final Uri uri = intent.getData();
    if (uri != null && uri.getScheme().equals(C.OAUTH_CALLBACK_SCHEME)) {
        Log.i(C.TAG, "Callback received : " + uri);
        Log.i(C.TAG, "Retrieving Access Token");
        getAccessToken(uri);
    }
    else {
        new OAuthRequestTokenTask(this,consumer,provider).execute();
    }
}

private void getRequestToken() {
    try {
        Log.d(C.TAG, "getRequestToken() called");
        String url = provider.retrieveRequestToken(consumer, C.OAUTH_CALLBACK_URL);
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)).setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_FROM_BACKGROUND);
        this.startActivity(intent);

    } catch (Exception e) {
        Log.e(C.TAG, "Error retrieving request token", e);
    }
}

private void getAccessToken(Uri uri) {
    final String oauth_verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);
    try {
        provider.retrieveAccessToken(consumer, oauth_verifier);

        final Editor edit = prefs.edit();
        edit.putString(OAuth.OAUTH_TOKEN, consumer.getToken());
        edit.putString(OAuth.OAUTH_TOKEN_SECRET, consumer.getTokenSecret());
        edit.commit();

        String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
        String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

        consumer.setTokenWithSecret(token, secret);
        this.startActivity(new Intent(this ,OAuthMain.class));

        Log.i(C.TAG, "Access Token Retrieved");

    } catch (Exception e) {
        Log.e(C.TAG, "Access Token Retrieval Error", e);
    }
}
public class OAuthRequestTokenTask extends AsyncTask<Void, Void, Void> {

    final String TAG = getClass().getName();
    private Context context;
    private OAuthProvider provider;
    private OAuthConsumer consumer;

    /**
     * 
     * We pass the OAuth consumer and provider.
     * 
     * @param   context
     *          Required to be able to start the intent to launch the browser.
     * @param   provider
     *          The OAuthProvider object
     * @param   consumer
     *          The OAuthConsumer object
     */
    public OAuthRequestTokenTask(Context context,OAuthConsumer consumer,OAuthProvider provider) {
        this.context = context;
        this.consumer = consumer;
        this.provider = provider;
    }
 @Override
protected void onPreExecute() {
    // TODO Auto-generated method stub
    super.onPreExecute();
     progressDialog = new ProgressDialog(RequestTokenActivity.this);
    progressDialog.setCancelable(true);
    progressDialog.setMessage(" Loading ...");
    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    progressDialog.setProgress(0);
    progressDialog.setOnCancelListener(new OnCancelListener() {

        public void onCancel(DialogInterface arg0) {
            if (progressDialog.isShowing()) 
                progressDialog.dismiss();
            finish();

        }
    });

    progressDialog.show();

}
    /**
     * 
     * Retrieve the OAuth Request Token and present a browser to the user to authorize the token.
     * 
     */
    @Override
    protected Void doInBackground(Void... params) {

        try {
            Log.i(TAG, "Retrieving request token from Google servers");
            final String url = provider.retrieveRequestToken(consumer, C.OAUTH_CALLBACK_URL);
            Log.i(TAG, "Popping a browser with the authorize URL : " + url);
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)).setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_FROM_BACKGROUND);
            context.startActivity(intent);

        } catch (Exception e) {
            Log.e(TAG, "Error during OAUth retrieve request token", e);
        }

        return null;
    }
    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        progressDialog.dismiss();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:26:54.177

这里的问题不是您的代码，而是您的浏览器设置。

和

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)).setFlags(
    Intent.FLAG_ACTIVITY_SINGLE_TOP
    | Intent.FLAG_ACTIVITY_NO_HISTORY
    | Intent.FLAG_FROM_BACKGROUND);
context.startActivity(intent); 
```

您正在调用外部浏览器来打开 Google 的授权页面。如果用户已在该浏览器中登录 Google，则只会要求他批准您的申请。如果他还没有登录，他将首先看到登录屏幕。因此，只需在那里注销，您就可以以其他用户身份登录。

除了依赖外部浏览器，您还可以打开自己的[`WebView`](https://developer.android.com/reference/android/webkit/WebView.html). 如果您自己不为 Web 视图实施 cookie 管理，则将*始终*要求用户在那里登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-25T06:20:49.260

我可能会避免向最终用户询问密码，但是如果您想提示用户使用哪个电子邮件帐户（可能是已在相关设备上注册的帐户，也可能是新帐户），您可以开始帐户选择器意图。

示例伪代码：

```
//Applicable only to Google accounts for now.
        String[] accountTypes = new String[]{"com.google"};
        Intent intent = AccountPicker.newChooseAccountIntent(null, //There is no currently selected account.
                                                             null, //There is no restricted list of accounts.
                                                             accountTypes, //The dialog should list only accounts from the "com.google" domain.
                                                             true, //prompt the user to pick an account if there's only one available account (just use that one). Even if only one account currently exists, the dialog may include an option for the user to add a new account.
                                                             null, //There is no custom title for the dialog.
                                                             null, //There is no specific auth token type required.
                                                             null, //There are no restrictions based on account features.
                                                             null); //There are no authenticator-specific options.

        //Capture end-users account selection and proceed with SignIn. onActivityResult() will be called once the user has made their selection.
        startActivityForResult(intent, requestCode); //This will initiate a dialog. 
```

一旦 startActivityForResult() 返回，即用户做出了选择，您可以通过以下方式检索选择的电子邮件地址：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        switch (requestCode) {
            case <the request code you passed to startActivityForResult:
                // Receiving a result from the AccountPicker
                if (resultCode == RESULT_OK) {
                    if (data != null) {
                        //Retrieve the chosen email account
                        data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME));
                    } else {
                        //Handle error
                    }
                } else if (resultCode == RESULT_CANCELED) {
                    // The account picker dialog closed without selecting an account.
                    // Notify users that they must pick an account to proceed.
                }
                break;
        }
    } 
```

请注意，最终用户不受使用 AccountManager 选择的帐户的限制。毕竟，一旦出现意图对话框，他们总是可以使用“添加帐户”选项。

希望这可以帮助。

干杯!

# android - Android：命名资源

> ID：12672949
> 
> 赞同：5
> 
> 时间：2012-10-01T12:07:24.470
> 
> 标签：android, resources, naming-conventions

这是针对 Android 开发人员的问题，但不是与编程相关的问题，因为它只影响开发人员。

在命名各种资源（如颜色、可绘制对象和字符串等）时，最常用的约定是什么？

我毫不怀疑命名我的布局`activity_main`或`layout_secondary`. 但是，在之前提到的资源命名时，我一直有疑问。我永远不知道我是否应该根据它们的使用或内容来命名这些资源。例如：

*   颜色：`dark_blue`对比`text_highlighted`
*   可绘制：`blue_gradient`vs`top_bar_background`
*   字符串：`welcome_to_app`vs`first_time_prompt`

是否有任何社区创建的良好实践资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:26:02.487

命名几乎是个人喜好。只要名称表明所定义事物的功能是什么，该名称就是完美的。您和使用这些定义的任何其他开发人员也应该知道名称的含义以及选择哪个定义。如果您在整个项目中与名称保持一致，那就很容易了。

例如`dark_blue`，显然是蓝色，而`text_highlighted`突出显示文本的颜色。您应该使用的名称取决于您的需要：如果您想按名称对颜色进行分类，请使用第一个，如果您想从实际颜色中抽象出来，请使用第二个。对于一般布局，使用`text_highlighted`通常更有意义，因为实际颜色无关紧要，功能（文本突出显示与文本常规等）更重要。在这个例子中，在and 之间进行选择比在`text_highlighted`and`text_regular`之间进行选择要明显得多`color_light_blue`，`color_dark_blue`尽管它们可以指代相同的颜色。该名称可以帮助防止错误。

Android 在 [ ] (http://developer.android.com/reference/android/R.drawable.html) 中使用名称前缀，`android.R.drawable`例如：

*   `btn_`用于按钮图形
*   `ic_`用于图标图形
    *   `ic_menu_`对于菜单图标
    *   `ic_dialog_`用于对话框图标
*   `stat_`用于状态图标

架构当然不是完美的，但使用以最通用分类开头的前缀的优点是您可以使用代码完成来逐步搜索特定项目。所以`color_blue_dark`可能比`dark_blue_color`，至少如果您认为颜色分类比暗/亮分类更重要的话。这同样适用于`first_time_prompt`。如果你有很多`prompt`s 命名它们是有意义的`prompt_first_time`, `promt_other_time`, ... 如果它们可以按例如可以用作超类别的活动进行分类: `mainactivity_prompt_*`，`secondactivity_prompt_*`那么你就知道它们属于哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:11:10.727

Android SDK 将是一个良好实践的起点。您可以打开 SDK 中的任何示例代码并浏览代码并查看变量名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:17:35.093

我通常为它们的内容命名颜色和图片之类的资产，但我会为其功能命名一个样式或多个状态可绘制。

例如： `button_On.png; button_Off.png; button.xml`

这样，如果我想在多个地方使用相同的资源，就不会感到困惑。例如，在一个样式文件中使用颜色作为文本颜色，在另一个样式文件中使用背景。

# android - 在android中将您的相机视图锁定为横向模式

> ID：12672951
> 
> 赞同：5
> 
> 时间：2012-10-01T12:07:47.737
> 
> 标签：android, android-camera-intent

我想将我的**相机视图**锁定为“**横向**”模式。当我单击应用程序中的简单按钮时，该设备的相机将打开，并且该**相机应锁定**为“**横向模式**”。谁能知道这个问题的解决方案？

我在“CaptureImageActivity.java”活动中使用此代码。因此，在执行此活动后，我系统的摄像头将打开。

```
btn1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            Intent i=new Intent(android.provider.MediaStore. ACTION_IMAGE_CAPTURE);
            i.putExtra(android.provider.MediaStore.EXTRA_SCREEN_ORIENTATION,ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

            startActivityForResult(i,1000);

        }
    }); 
```

我想将该相机视图锁定为“风景模式”。并根据解决方案

```
<activity android:name=".CaptureImageActivity"
    android:screenOrientation="landscape"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

只有“CaptureImageActivity”活动被锁定为“风景模式”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:24:56.090

查看此链接以锁定您的相机方向，使用`setDisplayOrientation (int degrees)`

可以在以下链接上找到文档：http: [//developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29)

有关更多详细信息，请参阅此答案：

[如何正确设置 Android 相机方向？](https://stackoverflow.com/questions/4645960/how-to-set-android-camera-orientation-properly)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:16:31.930

将此添加到清单文件中的活动中

```
android:screenOrientation="portrait" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:09:46.767

```
By using setCameraDisplayOrientation=
public static void setCameraDisplayOrientation(Activity activity,
         int cameraId, android.hardware.Camera camera) {
     android.hardware.Camera.CameraInfo info =
             new android.hardware.Camera.CameraInfo();
     android.hardware.Camera.getCameraInfo(cameraId, info);
     int rotation = activity.getWindowManager().getDefaultDisplay()
             .getRotation();
     int degrees = 0;
     switch (rotation) {
         case Surface.ROTATION_0: degrees = 0; break;
         case Surface.ROTATION_90: degrees = 90; break;
         case Surface.ROTATION_180: degrees = 180; break;
         case Surface.ROTATION_270: degrees = 270; break;
     }

     int result;
     if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
         result = (info.orientation + degrees) % 360;
         result = (360 - result) % 360;  // compensate the mirror
     } else {  // back-facing
         result = (info.orientation - degrees + 360) % 360;
     }
     camera.setDisplayOrientation(result);
 } 
```

# oracle - sqlalchemy Oracle 架构

> ID：12672952
> 
> 赞同：7
> 
> 时间：2012-10-01T12:07:51.070
> 
> 标签：oracle, sqlalchemy

我应该从 Oracle 数据库中提取数据。如何找出数据库中定义了哪些模式？当我没有在 Metadata() 的描述中定义任何模式时，我找不到表。感谢您的帮助，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T15:45:22.940

默认 Oracle 模式与 Oracle 连接中使用的用户名匹配。如果您没有看到任何表 - 这意味着这些表是在另一个模式中创建的。

看起来你有两个问题：

1）关于Oracle schemas——如何在Oracle中查找schema和tables

2）关于SQLAlchemy反射——如何为表指定Oracle模式

你可以在很多地方找到第一个问题的答案。即这里：[https ://stackoverflow.com/a/2247758/1296661](https://stackoverflow.com/a/2247758/1296661)

回答第二个问题：如果表类构造函数与默认用户的模式不同，则表类构造函数有模式参数来指定表的模式。在此处查看更多信息 [http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#sqlalchemy.schema.Table](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#sqlalchemy.schema.Table)

这是回答第二个问题的python代码。您将需要设置数据库连接和表名值以匹配您的情况：

```
from sqlalchemy import Table
from sqlalchemy.ext.declarative import declarative_base

from sqlalchemy import create_engine
engine = create_engine('oracle://<user_name>:<password>@<hostname>:1521/<instance name>', echo=True)
Base = declarative_base()

reflected_table = Table('<Table name>', 
    Base.metadata, 
    autoload=True, 
    autoload_with=engine, 
    schema='<Schema name other then user_name>')
print [c.name for c in reflected_table.columns]

p = engine.execute("SELECT OWNER,count(*) table_count FROM ALL_OBJECTS WHERE OBJECT_TYPE = 'TABLE' GROUP BY OWNER");

for r in p:
    print r 
```

祝你使用 sqlschema 和反射特性好运——这很有趣。您几乎无需在程序中定义模式信息，就可以让您的 python 程序与现有数据库一起工作。

我在生产中将此功能与 oracle db 一起使用 - 我唯一需要定义的是表之间的关系明确设置外键和主键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-15T15:42:12.693

我发现了另外两种设置备用 Oracle 模式的方法。

使用`MetaData`并将其传递到 SqlAlchemy 实例或引擎的创建中。

或者`__table_args__`在定义模型并传入时使用`{'schema': 'other_schema' }`

[http://docs.sqlalchemy.org/en/latest/core/metadata.html#sqlalchemy.schema.MetaData.params.schema](http://docs.sqlalchemy.org/en/latest/core/metadata.html#sqlalchemy.schema.MetaData.params.schema)

[如何在 SQLAlchemy 列/外键混合中指定 PostgreSQL 模式？](https://stackoverflow.com/questions/27003515/how-to-specify-postgresql-schema-in-sqlalchemy-column-foreign-key-mixin)

但这两者都无助于外键调用。对于那些，您仍然必须`other_schema.`在表名之前手动添加前缀。

下面的代码片段是在使用 Flask-SqlAlchemy 的 Flask 应用程序的上下文中。

```
from sqlalchemy import schema
from flask_sqlalchemy import SQLAlchemy
import os

os.environ['TNS_ADMIN'] = os.path.join( 'oracle_tools', 'network', 'admin')

oracle_connection_string = 'oracle+cx_oracle://{username}:{password}@{tnsname}'.format(
        username='user',
        password='pass',
        tnsname='TNS_SPACE',
    )

oracle_schema = 'user_schema_1'
foreign_key_prefix = oracle_schema + '.'

app.config['SQLALCHEMY_DATABASE_URI'] = oracle_connection_string 

oracle_db_metadata = schema.MetaData(schema=oracle_schema)
db = SQLAlchemy(app, metadata=oracle_db_metadata)

user_groups_table = db.Table(db_table_prefix + 'user_groups', db.Model.metadata,
                             db.Column('...', db.Integer, db.ForeignKey(foreign_key_prefix + 'group.id')),
                             # schema=oracle_schema #  Not necessary because of the use of MetaData above
                             )

class User(db.Model):
    __tablename__ = 'user'
    # __table_args__ = {'schema': oracle_schema } # Not necessary because of the use of MetaData above
    user_name = db.Column('USER_NAME', db.String(250)) 
```

还有...另外两个相关链接：

[https://github.com/mitsuhiko/flask-sqlalchemy/issues/172](https://github.com/mitsuhiko/flask-sqlalchemy/issues/172)

[如何在 SQLAlchemy 列/外键混合中指定 PostgreSQL 模式？](https://stackoverflow.com/questions/27003515/how-to-specify-postgresql-schema-in-sqlalchemy-column-foreign-key-mixin)

希望有帮助。

# c# - Windows 8 机器在部署到 Windows Azure 模拟器时重新启动

> ID：12672954
> 
> 赞同：2
> 
> 时间：2012-10-01T12:07:59.453
> 
> 标签：c#, azure, visual-studio-2012

我目前正在 Windows 8 上使用 Azure SDK 进行开发。

我已经安装了适用于 VS2010 和 VS2012 的 Azure SDK，并将它们都安装在机器上。不幸的是，每当我在本地计算机上单击调试我的 Azure Web 和辅助角色时，存储和计算模拟器都会启动，然后立即导致我的计算机自行重启。

这发生在两个版本的 Visual Studio 中，我完全不知道为什么会这样。任何帮助将非常感激。

我确实收到了以下输出 - 自上次工作以来我没有更改任何内容：

> Windows Azure 工具：警告：服务配置文件中指定的角色“VizageAPIWorker”的证书标识设置“Microsoft.WindowsAzure.Plugins.RemoteAccess.PasswordEncryption”未在证书的服务定义文件中声明或作为 SSL 端点的一部分声明

**更新：** 一个空白项目编译并运行没有任何错误

**更新** Windows 7 PC 上的相同项目也会导致此问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T00:12:27.600

对此真的很抱歉，我已经用最新版本的 nuget 包修复了这个问题：New Relic x64 for Windows Azure 1.0.0.27 - [http://nuget.org/packages/NewRelicWindowsAzure](http://nuget.org/packages/NewRelicWindowsAzure)

我正在研究一种完全避免重新启动的方法（重新启动可能会使新部署增加大约 4 分钟）。主要问题是 Azure 云服务器的默认配置将服务“W3CSVC”标记为手动，因此单独发出 iisreset 将完全停止 IIS - 我想用 NET START 替换调用，详见此处：[https:// github.com/newrelic/nuget-azure-cloud-services/issues/7](https://github.com/newrelic/nuget-azure-cloud-services/issues/7)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T00:27:43.730

即使您的应用程序中没有配置任何 SSL 端点，我也看到了这个问题，这是您的问题吗？此外，如果您的问题与上述错误有关，创建一个非常简单的“helloworld”网络或工作者角色，不应导致此问题。

现在，如果您的应用程序中没有任何 SSL 端点并且仍然看到错误：

*   那么这个问题只是机器特定的，可能是由您机器中的特定设置引起的。
    *   有时重新启动机器，重新安装/修改应用程序等只是让这个问题消失......
    *   尝试运行[进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来记录、文件和注册表访问，以查看崩溃发生时正在访问的内容。

经过上述测试，如果您的应用程序 SSL 端点特定配置导致您的应用程序和机器回收，那么它肯定可能与您的机器中的网络和安全组件的配置方式有关或出现任何问题。这可能非常特定于您的机器，并且一一消除因素可以帮助您解决问题。此问题更具体于您机器中的 Windows Azure 组件和您的机器配置。您可能会很快找到它，或者可能会花费无数小时进行故障排除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T16:18:33.577

**问题解决了。**

这是一个奇怪的问题，我仍然不确定我是否有错。但这里有一个简短的解释，我的实例上安装了 New Relic Windows Azure NUGET 包用于监控目的。不幸的是，当您将其部署到 azure 模拟器时，它似乎会触发您的机器重新启动。在深入研究系统事件日志并找到以下内容后，我注意到了这一点：

“进程 C:\Windows\system32\shutdown.exe (????-PC) 代表用户发起重启计算机?????-PC ????-PC\?????原因如下：找不到此原因的标题原因代码：0x800000ff 关闭类型：重新启动注释：安装 New Relic .NET 代理后重新启动”

删除 New Relic Agent NUGET 包会阻止重新启动。我仍在等待 New Relic 某人的回复，看看是我愚蠢还是真正的错误。

# c++ - Xor -> And -> Xor 做什么？

> ID：12672966
> 
> 赞同：2
> 
> 时间：2012-10-01T12:08:40.773
> 
> 标签：c++, bitwise-operators

我遇到了算法问题。

我有一个用于 IO 的字节，其中某些位可以使用称为 XorAndXor 的方法设置。该算法的工作原理如下：

```
newValue = (((currentValue XOR xorMask1) AND andMask) XOR xorMask2) 
```

描述如下：

> 如果两个异或掩码具有相同的值，则此函数将异或掩码的位插入与掩码为 1 的位位置。其他位保持不变。

所以我对这个函数的期望是当我有以下字节时：`00101101`并且我`01000000`同时使用 xor-masks 和 and-mask，只有第二位设置为 1，结果为`01101101`.

但是，在进行数学运算并遍历函数时，结果是`00000000`.

我做错了什么或者这个功能有什么我不明白的地方？这种低级编程已经有一段时间了，所以我真的不知道这是否是一种经常使用的方法，以及为什么以及如何使用它。

**让我问一个简单的问题：**有没有办法有效地使用这个函数来设置（或取消设置/更改）一个位（而不是专门询问当前值）？

**例如：**当前值为`00101101`（我不知道这个），但我只是想确保设置了第二位，所以结果必须是`01101101`.

**重要信息**在我的文档 PDF 中，XOR 和第一个 xorMask1 之间似乎有一点空间，所以这可能是一个`~`或`!`其他否定符号可能存在​​的地方，并且很可能由于一些奇怪的编码问题而丢失。因此，我将测试该函数是否符合文档所述或函数声明所述。抓紧你的头盔，将返回结果（请鼓）....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T12:19:21.203

```
 00101101 
XOR  01000000
-------------
     01101101
AND  01000000
-------------
     01000000 
XOR  01000000
-------------
     00000000 
```

文档不正确。这不是我第一次看到完全偏离初始实现的实现，但没有人费心更新文档。

我做了一个快速检查，所以我可能错了，但以下内容与文档一致：

```
newValue = (((currentValue XOR xorMask1) AND ~andMask) XOR xorMask2)

     00101101 
XOR  01100100
-------------
     01001001
AND  10011011
-------------
     00001001 
XOR  01100100
-------------
     01101101 
```

这是表达式的逻辑表`New = Curr XOR Xor1 AND ~And XOR Xor2`where`Xor1 == Xor2`

```
CURR: 0 1 0 1   0 1 0 1 
XOR1: 0 0 1 1   0 0 1 1
AND:  0 0 0 0   1 1 1 1 
XOR2: 0 0 1 1   0 0 1 1 
-----------------------
NEW:  0 1 0 1   0 0 1 1 
      ---v---   ---v---
      same as   same as  
      current   xor mask
      where     where
      AND = 0   AND = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T16:18:53.360

我已经研究了一段时间了，我想我看到了其他人没有看到的东西。XOR AND XOR 过程对于设置多个字节而不干扰其他字节很有用。例如，我们有一个给定的字节，我们希望将其设置为 1x1x xxx0，其中 x 是我们不关心的值。使用 XOR AND XOR 过程，我们使用以下掩码来打开和关闭我们不关心的位。我们使用 XOR 掩码打开位，使用 AND 掩码关闭位，我们不关心我们保留默认值的掩码（0 表示 XOR 掩码 [x XOR 0 = x] 和 1对于 AND 掩码 [x AND 1 = x])。所以给定我们想要的值，我们的掩码看起来像这样：

```
XOR: 10100000
AND: 01011110 
```

如果我们的神秘位读取 10010101，那么数学如下：

```
10010101
10100000 XOR
00110101 =
01011110 AND
00010100 =
10100000 XOR
10110100 = 
```

我们想要打开的位是打开的，我们想要关闭的位是关闭的，无论它们之前的状态如何。

这是管理多个位的一个很好的逻辑。

编辑：最后一个 XOR 用于切换。如果您知道有一点需要更改，但不是什么，请将其设为 1。假设我们要切换第三位，或者掩码将是：

```
XOR1 10100000
AND  01011110
XOR2 10100100 
```

然后最后一次交互将更改为

```
00010100 =
10100100 XOR
10110000 = 
```

第三位被切换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:32:48.420

要回答您非常简单的问题，这是如何设置的：

```
value |=  0x100; 
```

这是如何清除一点：

```
value &= ~0x100; 
```

在这个例子`0x100`中是`000100000000`二进制的，所以它设置/清除第 8 位（从右数）。

其他人已经指出您的代码示例没有按照它声称的那样做，所以我不会进一步详细说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T12:20:22.857

让自己成为一个真值表，并在整个过程中遵循 1 和 0。

*   任何 Xor 0 都将保持不变（1 Xor 0 为 1；0 Xor 0 为 0）
*   任何 Xor 1 都将被翻转（1 Xor 1 为 0；0 Xor 1 为 1）
*   当 Anding 时，除了 And 掩码中有 1 位之外，一切都变为 0 - 那些保持不变

所以你的第一个 Xor 只能改变左边的第二位，因为那是你在掩码中有一个 1 的地方。它将那个位从 0 翻转到 1。 And 不理会那个位并将所有其他位设置为 0。第二个 Xor 将您的 1 翻转回 0 并保持所有其他位不变。

结果：就像你说的那样全为零。

你的问题是 Xor 和 And 的组合会给你文档所说的行为吗？要仅打开一位，请使用按位或，其中掩码只有该位 1，其他位为零。只关闭一个位，使用按位 And 其中掩码只有那个位 0，其他位是 1。这很费力，而且有很多测试，所以如果你想打开 2 位和关闭 3 位，这种诡计节省了很多“如果”，但如果你只是想影响一点，那就用简单的方法来做，忽略这个功能，它似乎写得不太正确。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T12:21:11.147

XOR 是逻辑异或。这意味着一个或另一个，但不是两者兼而有之。这是来自维基百科的真值表。

```
Input
A | B    Output
---------------
0 | 0 |  0
0 | 1 |  1
1 | 0 |  1
1 | 1 |  0

currentValue XOR xorMask1 = 
    00101101 xor 01000000 = 01101101

01010010 AND andMask = 
    01101101 and 01000000 = 01000000

01000000 XOR xorMask2 = 
    01000000 xor 01000000 = 00000000 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T12:21:38.303

XOR 是二进制互斥的，只有当一个或另一个位设置为 1 时才会返回 true，因此：

```
00101101 XOR 01000000 = 01101101
01101101 AND 01000000 = 01000000
01000000 XOR 01000000 = 00000000 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T12:22:03.043

```
p|q|r|s|p^q|(p^q)&r|((p^q)&r)^s|
0|0|0|0| 0 |   0   |     0     |
0|0|0|1| 0 |   0   |     1     |
0|0|1|0| 0 |   0   |     0     |
0|0|1|1| 0 |   0   |     1     |
0|1|0|0| 1 |   0   |     0     |
0|1|0|1| 1 |   0   |     1     |
0|1|1|0| 1 |   1   |     1     |
0|1|1|1| 1 |   1   |     0     |
1|0|0|0| 1 |   0   |     0     |
1|0|0|1| 1 |   0   |     1     |
1|0|1|0| 1 |   1   |     1     |
1|0|1|1| 1 |   1   |     0     |
1|1|0|0| 0 |   0   |     0     |
1|1|0|1| 0 |   0   |     1     |
1|1|1|0| 0 |   0   |     0     |
1|1|1|1| 0 |   0   |     1     | 
```

检查此表以获取位的输入值，以检查输出。相应地更改您的掩码，以满足您的输出需求。

# javascript - NodeJS：在另一个模块的函数中使用 module.exports

> ID：12672968
> 
> 赞同：2
> 
> 时间：2012-10-01T12:08:48.793
> 
> 标签：javascript, node.js, module

简单的例子：

```
file1

module.exports.foo = function(obj) {
  module.exports.obj = obj;
}

file2

file1 = require("file1")
var something = {a: "a"};
file1.foo(something); //export "something" being a part of file2 
```

上面的例子不起作用。

我想要的基本上是一个 module.exports 助手，因为我为整个对象“导出”计划了一些助手。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:03:14.007

`module`in 与 in`file1.js`是不同的实例`file2.js`。

文件1.js

```
module.exports.foo = function(obj) {
    module.exports.obj = obj; 
    return module;
} 
```

文件2.js

```
console.log("running file2");

file1 = require("./file1");

var something = {a: "a"}; 
var moduleOfFile1 = file1.foo(something); //export "something" being a part of file2 

console.log("file1 module: " + moduleOfFile1.id);
console.log("file2 module: " + module.id); 
```

安慰：

```
node file2.js 
```

`id`返回的不一样

* * *

**更新**

或者，为什么不更新 file2.js 来扩展它`module.exports`

文件2.js

```
// well, you may copy `extend` implementation if you 
// do not want to depend on `underscore.js`
var _ = require("underscore");     
file1 = require("./file1");  

_.extend(module.exports, file1);

var something = {a: "a"};  
// or do something else

_.extend(module.exports, {
    obj: something
}); 
```

文件3.js

```
file2 = require("./file2.js");
console.log(file2.obj.a); 
```

# android - 碎片和旋转屏幕问题

> ID：12672972
> 
> 赞同：9
> 
> 时间：2012-10-01T12:09:04.177
> 
> 标签：android, view, rotation, fragment

我有碎片和旋转屏幕的问题。我读了这个线程，它并没有解决我的问题：

[没有视图的片段在配置更改时崩溃](https://stackoverflow.com/questions/4937075/fragment-without-a-view-crashes-on-configuration-change)（不完全相同）

[更换 Fragment 时出现 IllegalStateException](https://stackoverflow.com/questions/7707032/illegalstateexception-when-replacing-a-fragment)（不能解决我的问题）

我只有一项活动：

```
public class MainActivity extends FragmentActivity implements TabSelectedListener {

    /** Application tab menu */
    private TopMenu menu;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        menu = (TopMenu) this.findViewById(R.id.menu);
        menu.setListener(this);

    }//onCreate

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        // TODO Auto-generated method stub
        super.onSaveInstanceState(outState);
    }

    public void tabSelected(int tab) {

        FragmentManager fragmentManager = this.getSupportFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        Fragment f = null;

        boolean logged = DataController.getInstance().getLogged();

        switch(tab){
        case TopMenu.TAB1:
            if( !logged ){
                f = new HomeFragment();
            }else{
                f = new AccountsFragment();
            }
            break;
        case TopMenu.TAB2:
                     // i create more fragments depending the tab
        }   

        if( f != null){

            // Replace whatever is in the fragment view with this fragment,
            // and add the transaction to the back stack
            fragmentTransaction.replace(R.id.fragment, f);
            fragmentTransaction.addToBackStack(null);

            // Commit the transaction
            fragmentTransaction.commit();
        }

    }//tabSelected

    public void setSelectedTab(int tab){
        menu.setSelectedTab(tab);
    }

 .....
} 
```

片段的代码是：

```
public class HomeFragment extends Fragment implements OnClickListener{

    private static final String KEY_STATE_BUNDLE = "HomeFragmentManagerState";

    private LocalActivityManager mLocalActivityManager;

    View homeRelative;
    View homeLocked;
    View homeUnlocked;

    EditText id;
    Button ok;
    ImageView lock;
    CheckBox remember;

    private boolean lock_state;

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            Bundle state = null;
            if (savedInstanceState != null) {
                state = savedInstanceState.getBundle(KEY_STATE_BUNDLE);
                lock_state=savedInstanceState.getBoolean("lock_state");
            } else {
                lock_state=true;
            }

            mLocalActivityManager = new LocalActivityManager(getActivity(), true);
            mLocalActivityManager.dispatchCreate(state);
        }  

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {

        // Inflate the layout for this fragment
        View view = inflater.inflate(R.layout.fragment_home, container, false);

        homeRelative = view.findViewById(R.id.home_relative);
        homeLocked = view.findViewById(R.id.ly_home_buttonlogin);
        homeLocked.setOnClickListener(this);

        homeUnlocked = view.findViewById(R.id.ly_home_buttonlogin_unlocked);
        id = (EditText) view.findViewById(R.id.userid);

        ok = (Button) view.findViewById(R.id.useridok);
        ok.setEnabled(false); // ?? if id.equalsIgnoreCase("")
        ok.setOnClickListener(this);
        lock = (ImageView) view.findViewById(R.id.iv_home_candado);
        lock.setOnClickListener(this);

        if (!lock_state)
            animateLogon(true);

        remember = (CheckBox) view.findViewById(R.id.remember);

        id.addTextChangedListener(new TextWatcher(){
            public void afterTextChanged(Editable s) {

                ok.setEnabled(!id.getText().toString().equalsIgnoreCase(""));

                id.setBackgroundResource(R.drawable.bordercolorblack_rightsquare);
            }
            public void beforeTextChanged(CharSequence s, int start, int count, int after){}
            public void onTextChanged(CharSequence s, int start, int before, int count){}
        }); 

        return view; 

    } 
```

……

只有当我更改选项卡并旋转我的设备后，我才会得到一个 FC，而 logcat 是这样的：

```
10-01 14:04:07.561: E/AndroidRuntime(11759): FATAL EXCEPTION: main
10-01 14:04:07.561: E/AndroidRuntime(11759): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.stkaction.sov/com.stkaction.sov.MainActivity}: android.view.InflateException: Binary XML file line #12: Error inflating class fragment
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3362)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.app.ActivityThread.access$700(ActivityThread.java:127)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1162)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.os.Looper.loop(Looper.java:137)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.app.ActivityThread.main(ActivityThread.java:4511)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at java.lang.reflect.Method.invokeNative(Native Method)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at java.lang.reflect.Method.invoke(Method.java:511)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:986)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:753)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at dalvik.system.NativeStart.main(Native Method)
10-01 14:04:07.561: E/AndroidRuntime(11759): Caused by: android.view.InflateException: Binary XML file line #12: Error inflating class fragment
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:272)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.app.Activity.setContentView(Activity.java:1835)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at com.stkaction.sov.MainActivity.onCreate(MainActivity.java:29)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.app.Activity.performCreate(Activity.java:4470)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
10-01 14:04:07.561: E/AndroidRuntime(11759):    ... 12 more
10-01 14:04:07.561: E/AndroidRuntime(11759): Caused by: java.lang.IllegalStateException: Fragment com.com.stkaction.sov.HomeFragment did not create a view.
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:293)
10-01 14:04:07.561: E/AndroidRuntime(11759):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
10-01 14:04:07.561: E/AndroidRuntime(11759):    ... 22 more 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T11:10:03.833

我找到了解决方案。使用动态片段时，必须使用布局，并将片段放入其中。

例如：主要活动使用这种布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:id="@+id/activity_main_layout">

    <com.myproyect.TopMenu
        android:id="@+id/menu"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
    />

    <!-- this was the problem
    <fragment 
        android:id="@+id/fragment"
        android:layout_width="match_parent" 
        android:layout_height="match_parent"
        class="com.myproyect.HomeFragment"
        android:layout_below="@id/menu"
    />  -->

    <FrameLayout android:id="@+id/fragment"
            android:layout_width="match_parent" android:layout_height="match_parent" 
            android:layout_below="@id/menu"/>

    <LinearLayout
        android:id="@+id/menu_layout"
        android:layout_width="175dp" 
        android:layout_height="wrap_content"
        android:background="@drawable/menu_filtros" 
        android:layout_marginRight="5dp"
        android:layout_below="@id/menu"
        android:layout_marginTop="-47dp"
        android:layout_alignParentRight="true"
        android:visibility="gone"
        android:orientation="vertical">
    </LinearLayout>
</RelativeLayout> 
```

我在 FrameLayout 中实例化了片段。

```
fragmentTransaction.replace(R.id.fragment, f);
fragmentTransaction.addToBackStack(null);
fragmentTransaction.commit(); 
```

# javascript - 用于增加 .JS 版本（*.js?v1、*.js?v2、...）以防止浏览器缓存的工具？

> ID：12672973
> 
> 赞同：0
> 
> 时间：2012-10-01T12:09:05.000
> 
> 标签：javascript, asp.net, version-control, auto-increment

我需要自动增加项目中的 javascript 文件版本，我的用户在他们的浏览器中始终拥有正确的 javascript 代码，而不是缓存。

每次我发布项目的新版本时，我都需要更改包含在 .aspx 文件中的每个 .js 文件。

**例如：**

示例文件.aspx：

```
<script type="text/javascript" src="file1.js" />
<script type="text/javascript" src="file2.js" />
<script type="text/javascript" src="file3.js" /> 
```

开始换刀会增加版本：

```
<script type="text/javascript" src="file1.js?v1" />
<script type="text/javascript" src="file2.js?v1" />
<script type="text/javascript" src="file3.js?v1" /> 
```

下一个版本：

```
<script type="text/javascript" src="file1.js?v2" />
<script type="text/javascript" src="file2.js?v2" />
<script type="text/javascript" src="file3.js?v2" /> 
```

等等...

我有很多文件，因此每次更改每个文件都令人沮丧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:10:56.083

而不是增加一个整数，让你的版本标志是文件内容的散列。这样，您的缓存失效将是完全自动的。此外，您还想合并这些文件。[Combres](http://combres.codeplex.com/)为您处理这两个问题（以及缩小和 GZipping）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:19:11.660

大多数人在将项目发布到 QA/Production 时都会运行构建脚本。构建脚本可以处理添加版本号并进行文件压缩。查看[NAnt](http://nant.sourceforge.net/)

# asp.net - SqlDataSource 在不同页面上的重用

> ID：12672980
> 
> 赞同：0
> 
> 时间：2012-10-01T12:09:31.100
> 
> 标签：asp.net, code-reuse

我正在使用 ASP.NET。我有一个 ReportPage1 和 ReportOutputPage1。这些是不同的 aspx 文件，并且具有不同的 MasterPages。但是，我需要在两个页面上使用相同的 SqlDataSource 对象。在 ReportPage 上我需要 SqlDataSource 来调用 StoredProcedure 并将数据导入 CSV 文件，但在 ReportOutputPage 上我需要使用 SqlDataSource 来调用相同的 StoredProcedure 并填充 GridView。

ReportPage1 是“主”页面 - 从该页面单击按钮会打开 ReportOutputPage1 并将其显示在新窗口中。ReportPage 是ReportOutputPage1 的*PreviousPage*。

以上是 Report1 的示例。Report2（带有 SqlDataSource2）和 Report3（SqlDataSource3）等的想法相同 - 10 个不同的报告。

**如何为每两个页面（ReportPage & ReportOutputPage）重用SqlDataSource？**

1.  我在网络上找到的第一个建议 - 对 ReportPage 和 ReportOutputPage 都使用母版页。这不起作用，因为我已经为 ReportPage 和 ReportOutputPage 提供了不同的母版页，然后我需要为每个报告创建 10 个不同的 MasterPages。

2.  第二个建议是在 ReportPage 上定义 SqlDataSource，然后在 ReportOutputPage 上使用 PrevousePage 重用它，但这不适用于我的特殊情况（我正在使用 Ajax 人员和部分页面回发，并且丢失了 PreviousPage，SqlDataSource 也无法序列化为将其保存在 ViewState 或类似文件中）。

3.  创建用户控件。可能这可以工作，但每次为新报告创建 UserControl 非常耗时（10 个报告 - 10 个用户控件？）。

4.  简单地复制和粘贴 SqlDataSource（我为一份报告做了）可以工作，但我想要更像代码重用的东西。如有必要，有人可能会忘记在两个不同的地方修改 SqlDataSource。

能否请您给我一些建议如何重用报告和报告输出页面的代码（特别是 SqlDataSource）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:36:07.773

你能定义使用相同的需求`SqlDataSource`吗？如果它们是两个不同的页面，并且听起来像是两种不同的用途，为什么不使用两个不同的`SqlDataSource`？无论如何，这些页面是分开的，您将无法与另一个共享对象。

我建议您考虑在应用程序中添加一个数据层以进行数据库交互，并在请求时将您的数据绑定到数据网格。这样，您只需构建一次数据库交互，并在不同的页面上重用它。

另一种选择是您只需使用两个`SqlDataSource`s 并将它们复制/粘贴到两个页面。如果您尝试进行选择或某种标准适用于您的第二页，那么请考虑`QueryStringParameter`在您的`SqlDataSource`.

希望这可以帮助。

编辑：在 App_Code 某处弹出这个，传入您的特定使用要求。

```
Public Shared Function GetData(connString As String, command As String, Optional params As SqlParameter() = Nothing) As DataTable
    Dim conn As New SqlConnection(connString)
    Dim da As New SqlDataAdapter(command, conn)
    Dim dt As New DataTable
    da.SelectCommand.CommandType = CommandType.StoredProcedure
    da.SelectCommand.CommandTimeout = 6000 '6 seconds.
    If Not IsNothing(params) Then
        For Each p As SqlParameter In params
            da.SelectCommand.Parameters.Add(p)
        Next
    End If
    Try
        conn.Open()
        da.Fill(dt)
        Return dt
    Catch ex As Exception
        Throw ex
    Finally
        conn.Close()
    End Try
End Function 
```

然后将数据表绑定到您的gridview，不确定您如何输出到文件。

```
Private Sub BindData(gridview As GridView, data As DataTable)
    gridview.DataSource = data
End Sub 
```

您现在可以从后面的代码中重用数据库交互：

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
   BindData(MyGridView,GetData(ConnectionStrings(connName).ConnectionString, _
                 "dbo.SomeSprocOrOther", _
                 New SqlParameter(){New SqlParameter("paramName","paramValue")})
End Sub 
```

# python - Python：独立于操作系统的可用存储设备列表

> ID：12672981
> 
> 赞同：8
> 
> 时间：2012-10-01T12:09:33.073
> 
> 标签：python, cross-platform

有没有办法在 Python 中获取已连接的存储设备列表，如相机、SD 卡和外部硬盘驱动器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T12:48:12.573

以下应该适用于 Linux 和 Windows。这将列出所有驱动器，而不仅仅是外部驱动器！

```
import subprocess
import sys

#on windows
#Get the fixed drives
#wmic logicaldisk get name,description
if 'win' in sys.platform:
    drivelist = subprocess.Popen('wmic logicaldisk get name,description', shell=True, stdout=subprocess.PIPE)
    drivelisto, err = drivelist.communicate()
    driveLines = drivelisto.split('\n')
elif 'linux' in sys.platform:
     listdrives=subprocess.Popen('mount', shell=True, stdout=subprocess.PIPE)
     listdrivesout, err=listdrives.communicate()
     for idx,drive in enumerate(filter(None,listdrivesout)):
         listdrivesout[idx]=drive.split()[2]
# guess how it should be on mac os, similar to linux , the mount command should 
# work, but I can't verify it...
elif 'macosx' ...
     do the rest.... 
```

Linux 的上述方法非常粗糙，并且会返回诸如此类的驱动器`sys`，`procfs`如果您想要更精细的调整，请查看使用`python-dbus`.

# c# - 从 fileInfos 中提取文件名

> ID：12672982
> 
> 赞同：-2
> 
> 时间：2012-10-01T12:09:38.090
> 
> 标签：c#

我有`FileInfo[]`fileInfos 我想使用 LINQ 表达式填充 `string[]`filesNames 和`List<string>`fileNamesList，我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:11:19.027

[`FileInfo`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)有一个`Name`属性，所以

```
var fileNamesList = fileInfos.Select(fi => fi.Name).ToList();
var filesNames = fileInfos.Select(fi => fi.Name).ToArray(); 
```

我不明白为什么你需要 a`List`和一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:11:14.850

```
var list = fileInfos.Select(fi => fi.Name).ToList();
var arr = fileInfos.Select(fi => fi.Name).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:11:33.413

```
List<string> filesNamesList = fileInfos.Select(fi => fi.Name).ToList();
string[] filesNames = filesNamesList.ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T12:12:00.497

试试这个代码：

`var fileList = fileInfos.Select(f => f.Name).ToList();`

# ios - 带有2个以上按钮的ios6 UINavigationBar

> ID：12672985
> 
> 赞同：0
> 
> 时间：2012-10-01T12:09:43.753
> 
> 标签：ios, button, user-interface, ios6, navigationbar

在我的应用程序中，我有一个带有 3 个按钮的 uinavigationbar，但我用于 ios5 的代码似乎不再适用于 ios6。您可以在我的自定义视图下方看到一个颜色错误的矩形，右侧有两个按钮。

这是我使用的代码，我在stackoverflow的某个地方找到了它：

```
UIToolbar *tools = [[[UIToolbar alloc]
                     initWithFrame:CGRectMake(0.0f, 0.0f, 110.0f, 44.01f)] autorelease]; // 44.01 shifts it up 1px for some reason
tools.clearsContextBeforeDrawing = NO;
tools.clipsToBounds = NO;
tools.translucent = self.headerbar.translucent;
tools.barStyle = self.headerbar.barStyle;  
tools.backgroundColor = self.headerbar.backgroundColor;
tools.tintColor = self.headerbar.tintColor;

NSMutableArray *buttons = [[NSMutableArray alloc] initWithCapacity:3];

// Create a standard refresh button.
UIBarButtonItem *bi = [[UIBarButtonItem alloc] initWithTitle:@"heute" style:UIBarButtonItemStylePlain target:self action:@selector(showThisWeek)];
bi.style = UIBarButtonItemStyleBordered;
bi.width = 0;
[buttons addObject:bi];
//[bi release];

// Create a spacer.
bi = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:@selector(showThisWeek)];
[buttons addObject:bi];
//[bi release];

// Add profile button.
bi = [[UIBarButtonItem alloc] initWithTitle:@"vor" style:UIBarButtonItemStylePlain target:self action:@selector(showNext)];
bi.style = UIBarButtonItemStyleBordered;
[buttons addObject:bi];
//[bi release];

// Add buttons to toolbar and toolbar to nav bar.
[tools setItems:buttons animated:NO];
[buttons release];
UIBarButtonItem *twoButtons = [[UIBarButtonItem alloc] initWithCustomView:tools];
//[tools release];
header.rightBarButtonItem = twoButtons;
[header.leftBarButtonItem setAction:@selector(showPrevious)]; 
```

有人可以提示我一个更优雅的解决方案，在 ios5 和 ios6 上都可以正常工作吗？

欢呼卢卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:15:20.747

你试过 leftBarButtonItems 和 rightBarButtonItems 吗？您可以使用它在左侧和右侧导航栏中添加按钮数组。

如果您使用它，则不需要 UIToolbar 及其子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:31:57.563

你试过 bar.style = -1 吗？