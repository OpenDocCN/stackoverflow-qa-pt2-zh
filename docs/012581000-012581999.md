# StackOverflow 问答 12581000-12581999

# wordpress - 更改 wordpress 帖子 URL

> ID：12581003
> 
> 赞同：1
> 
> 时间：2012-09-25T10:25:58.883
> 
> 标签：wordpress, url, permalinks

我有一个 wordpress 网站，里面有很多帖子。我的问题是我需要从

```
website.com/post-name 
```

到

```
website.com/specialword/post-name 
```

“特殊词”是我需要在这些帖子名称前面添加的，但仅适用于帖子类型 - 帖子。

有人能帮我吗？

我非常需要这个，主要是因为 SEO 的目的，所以我可以保留以前网站中没有在 wordpress 中完成的 URL。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-07T04:11:11.237

要让“/specialword/”出现在“post”（博客）网址中，您需要将永久链接中的“Custom Structure”设置为“/specialword/%postname%”。

然后，为了不让 /specialword/ 出现在自定义帖子类型 url 中，您需要在注册自定义帖子类型时将“with_front”设置为 false，如下所示：

```
"rewrite" => [ "slug" => "myposttype", "with_front" => false ] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T10:39:52.100

*   转到设置-> 永久链接
*   选择自定义结构
*   填写 /specialword/%postname%

截屏：

![在此处输入图像描述](../Images/69a700639f4b2920f0f28f6846c23492.png)

# matlab - 如何从 Matlab 极坐标图中删除 Rho 标签？

> ID：12581008
> 
> 赞同：1
> 
> 时间：2012-09-25T10:26:04.540
> 
> 标签：matlab, matlab-figure

在 Matlab 中的极坐标图中，我有 Theta (0, 30, 60, .., 330) 和 Rho (20, 40, .., 100) 的默认标签。我可以使用命令删除 Theta 标签

```
set(findall(gca, 'String', '0'),'String', ' '); 
```

请建议如何从图中删除 Rho 标签（20、40、..、100）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:52:12.000

要删除所有标签，只需键入

```
delete(findall(gcf,'type','text')); 
```

由于极坐标图标签是放置在图上的隐藏文本对象，因此您不能简单地通过访问轴来找到它们。要仅删除其中一些，您需要明确找到包含要删除的特定标签的文本对象。在您的情况下，查找包含 Rho 的文本对象：

```
% Get all strings in the hidden labels, choose the ones you want to delete
% Note that some of the labels may contain spaces - you need to be exact.
get(findall(gcf, 'type', 'text'), 'string');

% say your labels have the following strings..
rho_labels = {'20' '40' '60' '80' '100'};
for r=1:length(rho_labels)
    delete(findall(gcf, 'string', rho_labels{r}))
end 
```

# iphone - 如何获取 cookie 并将它们用于其他请求，如 POST ( iOS )？

> ID：12581012
> 
> 赞同：2
> 
> 时间：2012-09-25T03:21:41.443
> 
> 标签：iphone, ios, cookies

我[之前](https://stackoverflow.com/questions/12538782/how-to-remain-logged-in-until-user-decides-to-logout/)的问题是关于我每次都必须登录才能进行网络服务（例如发布链接或上传图片）的问题。Philipe 回答说我必须为每个请求使用 cookie 而不是登录过程。我发现了这种获取cookie的方法：

```
- (void)getCookies {

    NSHTTPURLResponse * response;
    NSError * error;
    NSMutableURLRequest *request;

    request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://MyWebsite.com/login.php"]
                                            cachePolicy:NSURLRequestReloadIgnoringCacheData
                                        timeoutInterval:120];
    NSData * data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    NSLog(@"%@", [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding]);
    NSArray * all = [NSHTTPCookie cookiesWithResponseHeaderFields:[response allHeaderFields] forURL:[NSURL URLWithString:@"http://MyWebsite.com/login.php"]];
    NSLog(@"%d", all.count);

    for (NSHTTPCookie *cookie in all) {
        NSLog(@"Name: %@ : Value: %@", cookie.name, cookie.value);
        NSLog(@"Comment: %@ : CommentURL: %@", cookie.comment, cookie.commentURL);
        NSLog(@"Domain: %@ : ExpiresDate: %@", cookie.domain, cookie.expiresDate);
        NSLog(@"isHTTPOnly: %c : isSecure: %c", cookie.isHTTPOnly, cookie.isSecure);
        NSLog(@"isSessionOnly: %c : path: %@", cookie.isSessionOnly, cookie.path);
        NSLog(@"portList: %@ : properties: %@", cookie.portList, cookie.properties);
        NSLog(@"version: %u", cookie.version);
    }
} 
```

我还发现这段代码可以使用这些 cookie，但我不知道如何使用它：

```
[[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookies]; 
```

这是我的 POST 方法，我使用的是 RestKit API：

```
- (IBAction)addLinkPressed:(UIButton *)sender {

        [RKClient clientWithBaseURLString:@"http://MyWebsite.com"];

        NSDictionary* params = [NSDictionary dictionaryWithObjectsAndKeys:
                                self.linkField.text, @"url",
                                self.linkTitleField.text, @"title",
                                self.linkSummaryField.text, @"summary",
                                nil];

        RKRequest *request = [[RKClient sharedClient] post:@"/send_link.php" params:params delegate:self];
        [request setUserData:@"sendLink"];   
} 
```

**问题：**我应该存储 cookie 的哪个属性以将其用于登录信息，我应该将它放在我的代码中的什么位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T05:31:55.610

```
[request setHTTPMethod:@"POST"]; 
```

# web-services - 在 Windows 8 中使用 Web 服务对用户进行身份验证

> ID：12581018
> 
> 赞同：0
> 
> 时间：2012-09-25T10:26:33.407
> 
> 标签：web-services, authentication, windows-8

我正在尝试在 Windows 8 中对用户进行身份验证。身份验证后将有许多可以调用的 CRUD 调用。有一些服务可以执行这些 CRUD 操作。为了防止对这些 CRUD 服务的未经授权的调用，我传递了一个在成功登录后返回的附加参数 GUID(Hashed)，并在每次调用时传递给这些服务，我将此 GUID 和用户名存储在数据库中。这是我进行身份验证和执行 CRUD 操作的模型。你认为它可行和安全吗？或者还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:11:47.587

这取决于。请记住，每个人都可以使用简单的 Wireshark 捕获您的 GUID。如果您确定您的 GUID 是安全且不可解码的，那肯定是。你的方式会很好，但如果现在你知道答案

# iphone - 故意减慢 localhost web 服务器

> ID：12581019
> 
> 赞同：0
> 
> 时间：2012-09-25T10:26:36.293
> 
> 标签：iphone, macos, localhost

我正在开发一个 iphone 应用程序并进行测试，我正在使用 localhost 服务器发送/接收请求/响应。

但是在3G或其他移动数据网络上实际下载和上传速度似乎非常快。

我想用较慢的互联网连接测试我的应用程序。

有什么办法可以减慢我的 macbook 的 apache 服务器的速度吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:31:50.780

将“slug”放入处理您的请求的服务器代码中，例如您正在调用的 PHP 模块。一个简单的 slug 将是一个 for 循环，它将在服务器程序响应之前捆绑服务器程序。或者复制大文件的东西。

您需要进行试验，直到获得正确的延迟。

# vb.net - 如何解决 Windows 窗体设计器问题 - 控件继续调试？

> ID：12581023
> 
> 赞同：4
> 
> 时间：2012-09-25T10:26:55.503
> 
> 标签：vb.net, visual-studio-2012, windows-forms-designer

这个奇怪的设计器问题是否有原因/修复（至少，我认为它与设计器有关），当我调试应用程序时，表单上的控件不会像在设计窗口中那样出现..！

请看下面两张截图来演示问题（注意：我已经把表格的一些内容涂黑了，这不是问题）：

**图 1：显示表单在设计器视图中的显示方式** ![在此处输入图像描述](../Images/a55ca10e848381ab7a4449fabcf483be.png)

**图 2：显示表单在调试模式下的显示方式** ![在此处输入图像描述](../Images/0d139c8f694affef7ae900bdd0bf7c54.png)

您可以清楚地看到一些按钮在表单上移动了位置。

注意：乍一看，这可能看起来像：[Windows Forms Designer destroys form layout](https://stackoverflow.com/questions/1559162/windows-forms-designer-destroys-form-layout)的副本。但是，我没有安装任何其他工具或组件。这只是 Windows 7 32 位上 Visual Studio 2012 的标准“香草”版本。

我也遇到过这个问题：[UI Controls Overlapping & Fonts Issue in Windows Forms Application](https://stackoverflow.com/questions/11574561/ui-controls-overlapping-fonts-issue-in-windows-forms-application)。但是，我没有使用“大字体”，也没有在我的控件上使用任何非标准字体（所有标签和按钮文本都保留为默认值）。不过，我可以看到这将如何影响控制位置，并将在该区域进行更多检查。

在表单的 Load 方法中没有发生任何事情。

我也在使用 TFS 2012。

这可能是什么原因造成的？有什么我可以解决的吗？

编辑：我删除了每个标签和按钮控件的字体属性，允许系统设置默认值。还是没有变化。有趣的是，如果我在设计模式下打开表单，然后保存它，然后关闭它，然后再次打开它，按钮已经移动了......如果我这样做了几次，按钮会迁移直到它们离开表单。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T10:46:50.860

好的，经过一番折腾，我找到了答案。它似乎与`Anchor`控件上的属性有关。我做了一堆更改，在每个更改之间进行测试，看看是否有任何区别。当我选择所有控件并将`Anchor`属性设置为 时`Top, Left`，这解决了问题。

我希望这会在某个时候对其他人有所帮助！

# c# - 包含 json.net 的 C# 问题

> ID：12581025
> 
> 赞同：1
> 
> 时间：2012-09-25T10:27:02.863
> 
> 标签：c#, asp.net, sharepoint, json.net

我有一个在 ASP.Net 上编写的 SharePoint 2010 网络部件，我需要使用 JSON.Net。所以我 Nugeted Json.NET 版本 4.5.9。然后问题发生：

无法加载文件或程序集“Newtonsoft.Json，Version=4.5.0.0，Culture=neutral，PublicKeyToken=30ad4fe6b2a6aeed”或其依赖项之一。找不到文件。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:30:28.143

我曾经遇到过同样的问题。

不要使用早期的参考资料。

如果有，请删除它们并使用 Nuget 再次添加 Json.Net。

> **安装包 Newtonsoft.Json**

它为我解决了。

# coffeescript - Coffeescript：条件值单行

> ID：12581027
> 
> 赞同：0
> 
> 时间：2012-09-25T10:27:08.667
> 
> 标签：coffeescript

这可以变成一个时髦的单线吗？

```
thing = thing2 / 32 * 100 * 100
thing = 0 unless thing 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:11:03.987

不幸的是，coffeescript 不支持三元运算符。但是你可以写：

```
@zoomGlobal = if @position.ratio then @position.ratio / 32 * 100 * 100 else 0 
```

或者

```
@zoomGlobal = @position.ratio / 32 * 100 * 100 || @zoomGlobal 
```

[这里的例子](http://goo.gl/FV7qS)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T18:56:56.090

如果您确信 @position.ratio 始终设置为数字，则可以：

```
@zoomGlobal = @position.ration / 32 * 100 * 100 
```

很快你就可以使用新的 ** 运算符了

```
@zoomGlobal = @position.ration / 32 * 100 ** 2 
```

如果 @position.ration 可能不存在，则使用 Ivan 建议的内容：

```
@zoomGlobal = if @position.ratio then @position.ratio / 32 * 100 * 100 else 0 
```

另外，我无法从您的示例中看到上下文是什么，但请注意

```
10 / 2 * 2 * 2 == 20 
```

尽管

```
10 / (2 * 2 * 2) == 1.25 
```

# c# - 如何通过 Stacksoft.net 的 socks 5 连接到 tor？

> ID：12581033
> 
> 赞同：0
> 
> 时间：2012-09-25T10:27:27.497
> 
> 标签：c#, socks, tor

我正在尝试使用带有[Stacksoft.net](http://sourceforge.net/projects/starksoftproxyc/)库的 socks 5 协议通过 tor 获取页面：

```
ProxyClientFactory cf = new ProxyClientFactory();
var p = cf.CreateProxyClient(ProxyType.Socks5, "127.0.0.1", 9051, "", "");
var c = p.CreateConnection("www.google.com",80); 
```

当我运行它时，我得到以下异常：

```
Unable to read data from the transport connection: An established connection was aborted by the software in your host machine.
Inner exception:An established connection was aborted by the software in your host machine 
```

当程序尝试从 google.com 读取响应时引发异常`stream.Read(response, 0, response.Length);`：

```
 private void SendCommand(byte command, string destinationHost, int destinationPort)
    {
        NetworkStream stream = _tcpClient.GetStream();

        byte addressType = GetDestAddressType(destinationHost);
        byte[] destAddr = GetDestAddressBytes(addressType, destinationHost);
        byte[] destPort = GetDestPortBytes(destinationPort);

        //  The connection request is made up of 6 bytes plus the
        //  length of the variable address byte array
        //
        //  +----+-----+-------+------+----------+----------+
        //  |VER | CMD |  RSV  | ATYP | DST.ADDR | DST.PORT |
        //  +----+-----+-------+------+----------+----------+
        //  | 1  |  1  | X'00' |  1   | Variable |    2     |
        //  +----+-----+-------+------+----------+----------+
        //
        // * VER protocol version: X'05'
        // * CMD
        //   * CONNECT X'01'
        //   * BIND X'02'
        //   * UDP ASSOCIATE X'03'
        // * RSV RESERVED
        // * ATYP address itemType of following address
        //   * IP V4 address: X'01'
        //   * DOMAINNAME: X'03'
        //   * IP V6 address: X'04'
        // * DST.ADDR desired destination address
        // * DST.PORT desired destination port in network octet order            

        byte[] request = new byte[4 + destAddr.Length + 2];
        request[0] = SOCKS5_VERSION_NUMBER;
        request[1] = command;
        request[2] = SOCKS5_RESERVED;
        request[3] = addressType;
        destAddr.CopyTo(request, 4);
        destPort.CopyTo(request, 4 + destAddr.Length);

        // send connect request.
        stream.Write(request, 0, request.Length);

        //  PROXY SERVER RESPONSE
        //  +----+-----+-------+------+----------+----------+
        //  |VER | REP |  RSV  | ATYP | BND.ADDR | BND.PORT |
        //  +----+-----+-------+------+----------+----------+
        //  | 1  |  1  | X'00' |  1   | Variable |    2     |
        //  +----+-----+-------+------+----------+----------+
        //
        // * VER protocol version: X'05'
        // * REP Reply field:
        //   * X'00' succeeded
        //   * X'01' general SOCKS server failure
        //   * X'02' connection not allowed by ruleset
        //   * X'03' Network unreachable
        //   * X'04' Host unreachable
        //   * X'05' Connection refused
        //   * X'06' TTL expired
        //   * X'07' Command not supported
        //   * X'08' Address itemType not supported
        //   * X'09' to X'FF' unassigned
        //* RSV RESERVED
        //* ATYP address itemType of following address

        byte[] response = new byte[255];

        // read proxy server response
        stream.Read(response, 0, response.Length); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T05:15:01.887

抱歉延迟回复，我已经开发了这个小型“库”，它基本上公开了一个单例 Tor 类和一个 socks 类；这是一个更大项目的一部分，我不想延迟我的回答。我希望我的方法可以为您提供一些方向。

我只想指出，我在测试时遇到的唯一问题是我似乎没有获得完整的 http 返回有效负载，这意味着代理类似乎只从 Web 服务器捕获了一部分 html 代码。我相信这是由于 Tor 网络的延迟很大。我尝试增加缓冲区数组的大小，但这没有帮助。如果您提出解决方案，我将不胜感激

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.Text;

using Starksoft.Net.Proxy;

using System.IO;
using System.Net.Sockets;
using System.Net;
using System.Web;

using System.Threading;

namespace networking
{
    namespace client
    {

        internal class proxy
        {
            public struct conn
            {
                internal TcpClient http;
                internal IProxyClient Proxy;
                public ProxyType proxy_type;

                public string proxy_host;
                public int proxy_port;
                public string target_host;
                public int target_port;
                public string recv_packet;

                public void proxy_config(string target_host, int target_port, string proxy_host, int proxy_port, ProxyType type)
                {
                    this.target_host = target_host; this.target_port = target_port;
                    this.proxy_host = proxy_host; this.proxy_port = proxy_port;
                    this.proxy_type = type;
                }
            }
            public conn proxy_conn;
            internal proxy(string target_host, int target_port, string proxy_host, int proxy_port, ProxyType type)
            {
                Console.WriteLine("Socket allocated.");
                this.proxy_conn = new proxy.conn();
                this.proxy_conn.proxy_config(target_host, target_port, proxy_host, proxy_port, type);
                ProxyClientFactory factory = new ProxyClientFactory();
                this.proxy_conn.Proxy = factory.CreateProxyClient(type, proxy_host, proxy_port);
                this.proxy_conn.Proxy.CreateConnectionAsyncCompleted += new EventHandler<CreateConnectionAsyncCompletedEventArgs>(proxy_connected);

                //this.Proxy.CreateConnectionAsync(obj.target_host, obj.target_port);
            }
            internal void connect()
            {
                this.proxy_conn.Proxy.CreateConnectionAsync(this.proxy_conn.target_host, this.proxy_conn.target_port);
            }
            private void proxy_connected(object sender, CreateConnectionAsyncCompletedEventArgs e)
            {
                if (e.Error != null)
                {
                    Console.WriteLine("Connection Error!");
                    Console.WriteLine(e.Error.Message);
                    return;
                }
                else if (e.Error == null)
                {
                    // get a reference to the open proxy connection
                    Console.WriteLine("Connected to Tor!");
                    this.proxy_conn.http = e.ProxyConnection;
                    Console.WriteLine("Proxy referenced.");
                }
            }
            public void send(string data)
            {
                this.proxy_conn.http.Client.Send(ASCIIEncoding.ASCII.GetBytes(data));
            }
            public string recv()
            {
                byte[] rcvBuffer = new byte[1024]; //1024
                int bytes = this.proxy_conn.http.Client.Receive(rcvBuffer, 1024, SocketFlags.None);
                this.proxy_conn.recv_packet += ASCIIEncoding.ASCII.GetString(rcvBuffer, 0, bytes);
                return this.proxy_conn.recv_packet;
            }

        }

        internal class Tor
        {
            private static Tor instance;

            private Process tor;
            //private conn obj_conn;
            private Tor(){}
            internal static Tor Instance
            {
                get
                {
                    if (instance == null)
                    {
                        instance = new Tor();
                    }
                    return instance;
                }
            }
            internal void tor_start()
            {
                if (this.tor == null)
                {
                    Console.WriteLine("Tor init...");
                    this.tor = new Process();
                    this.tor.StartInfo.FileName = "tor.exe";
                    this.tor.StartInfo.WorkingDirectory = Directory.GetCurrentDirectory();
                    Console.WriteLine(Directory.GetCurrentDirectory());
                    this.tor.StartInfo.CreateNoWindow = false;
                    this.tor.StartInfo.UseShellExecute = false;
                    this.tor.StartInfo.RedirectStandardOutput = true;
                    this.tor.StartInfo.RedirectStandardInput = true;
                    this.tor.StartInfo.RedirectStandardError = true;
                    this.tor.OutputDataReceived += new DataReceivedEventHandler((sender, args) => { stdout__tor(sender, args); });
                    this.tor.ErrorDataReceived += new DataReceivedEventHandler((sender, args) => { stderr__tor(sender, args); });

                    this.tor.Start();
                    Console.WriteLine("Strapping input...");
                    this.tor.BeginOutputReadLine();
                    this.tor.BeginErrorReadLine();
                }
                else
                {
                    Console.WriteLine("A Tor process already exists.");
                }

            }
            internal void tor_stop()
            {
                this.tor.StandardOutput.Close();
                this.tor.StandardInput.Close();
                this.tor.StandardError.Close();
                this.tor.Kill();
                this.tor.Dispose();
                this.tor = null;
            }
            internal void tor_restart()
            {
                tor_stop();
                tor_start();
            }
            private void stdout__tor(object sender, DataReceivedEventArgs pipe)
            {
                if (pipe.Data.Contains("Bootstrapped 100%: Done."))
                {
                    Console.WriteLine("Tor has been initialized.");
                    //this.obj_conn.Proxy.CreateConnectionAsync(obj_conn.target_host, obj_conn.target_port);
                }
                Console.WriteLine(pipe.Data);
            }
            private void stderr__tor(object sender, DataReceivedEventArgs pipe)
            {
                Console.WriteLine("[ERROR]: " + pipe.Data);
            }
        }

    }

    public class socket
    {
        internal static client.Tor Tor_obj;
        internal static List<client.proxy> proxy_socks;

        public socket()
        {
            if (Tor_obj == null || proxy_socks == null)
            {
                if (Tor_obj == null)
                {
                    Tor_obj = client.Tor.Instance;
                    Tor_obj.tor_start();
                }
                if (proxy_socks == null)
                {
                    proxy_socks = new List<client.proxy>();
                }
            }
        }
        public int add(string type, string host, int port)
        {
            int index = -1;
            if (type == "proxy")
            {
                proxy_socks.Add(new client.proxy(host, port, "127.0.0.1", 9050, ProxyType.Socks4a));
                index = proxy_socks.Count() - 1;
                proxy_socks[index].connect();
                return index;
            }
            return index;

            }
    }
}

namespace myprog
{
    class Program
    {
        static void Main(string[] args)
        {

            networking.socket connections = new networking.socket();
            Thread.Sleep(20000);
            int conn_index = connections.add("proxy", "checkmyip.com", 80);
            Thread.Sleep(10000);
            networking.socket.proxy_socks[conn_index].send("GET / HTTP/1.1\r\nHost: checkmyip.com\r\n\r\n");
            Console.WriteLine(WebUtility.HtmlDecode(networking.socket.proxy_socks[conn_index].recv()));
            Thread.Sleep(50000);
        }
    }
} 
```

我调用 thread.sleep() 以确保 Tor 进程已完全连接，然后建立到 Tor 的代理连接，然后发出请求。

# c# - 部分视图未通过 ajax 调用呈现

> ID：12581035
> 
> 赞同：1
> 
> 时间：2012-09-25T10:27:30.987
> 
> 标签：c#, ajax, asp.net-mvc, asp.net-mvc-3, jquery

我有一个由 JQuery ajax 调用的控制器操作，并希望将“结果”的内容返回到请求页面。到目前为止，我已经...

控制器

```
 public ActionResult DynCalc(resultsModel model){
    ...
    //code that populates model - all working ok
    ...
     if (Request.IsAjaxRequest())
          {
            return PartialView("results", model.Results);
          }
          else
          {
            return null; //Handle this later
          }
    } 
```

这会传回一个有效的模型。从javascript调用：

```
 $.ajax({
            url: "/Test/DynCalc",
            type: "POST",
            data: $("#frmResults").serialize(), //This part works
            dataType: "html",
            success: function (result) {
                $('#resultsSection').html(result);
                $('#hide_panel a').flash("#111", 1000);
            }
        }); 
```

成功永远不会受到打击。希望有人能告诉我我很愚蠢并且遗漏了一些明显的东西吗？

我的部分视图结果只是一个带有 javascript 的 HTML 页面。如果我只有以下

`Hello world`在我的结果视图中，它可以正常工作，使用任何脚本，它不会

我在正确的轨道上吗？我应该更改控制器上的返回类型吗？还是使用 JSON？

我没有发布结果页面的内容，因为它是整个文档还是简单的都没有关系`<b>hi</b>`- 它做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:37:21.387

尝试只返回一个视图。因为在这种情况下您的结果是一个完整的视图（因为操作结果可能是 HTML、XML、JSON ......无论如何）。仅将 PartialView**用作呈现部分**视图的一种方式。

例如，在您的 MasterPage 上，您希望“始终”呈现用户信息：`@RenderAction("UserInfoAction", "UserController")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-11T11:52:24.390

```
 var model= {
        "PropertyName1":$("#txt1").val(),
        "PropertyName1": $("#txt2").val(),         
       }

     $.ajax({
         type:"POST",
         url: 'Url.Action("DynCalc","ControllerName")',
         data: JSON.stringify(model),
         contentType: "application/json;charset=utf-8",
         success: function (data, status, xhr)
          {
         alert("The result is : " + status + ": " + data);
          },
         error: function (xhr)
         {
         alert(xhr.responseText);
         }
       }); 
```

# playframework-1.x - 播放 framework-1.x 分页从特定位置开始

> ID：12581045
> 
> 赞同：0
> 
> 时间：2012-09-25T10:28:06.620
> 
> 标签：playframework-1.x, pagination

我对 Play Framework（ver 1.x）中的分页模块有疑问，我已将分页设置为每页仅显示一个对象，以及控制器中的一些其他自定义设置：

```
import java.util.ArrayList;
import java.util.List;

import play.modules.paginate.ValuePaginator;
import play.mvc.Controller;

public class Application extends Controller {

public static void index() {

    List<String> strings = new ArrayList<String>();
    strings.add("Kalle");
    strings.add("Karin");
    strings.add("Dixie");
    strings.add("Edvin");
    strings.add("Gustav");
    strings.add("Axel");

    int pos = 0;

    for(String str : strings){
        if(str.equals("Axel")){
            pos += strings.indexOf(str);
            break;
        }
    }

    ValuePaginator namePaginator = new ValuePaginator(strings);
    namePaginator.setPageSize(1);
    namePaginator.setBoundaryControlsEnabled(false);
    namePaginator.setPagesDisplayed(0);

    renderArgs.put("pos", pos);
    renderArgs.put("namePaginator", namePaginator);
    render();
} 
```

在模板中：

```
#{extends 'main.html' /}
#{set title:'Home' /}

*{#{welcome /}}*
${pos}
#{paginate.controls items:namePaginator /}

#{paginate.list items:namePaginator, as:'name'}
${name}
#{/paginate.list}

*{#{list items:strings[pos], as:'string'}
${string}
#{/list}}* 
```

现在，正如您在模板的最后一部分中看到的那样，有一个注释部分，使用通常的 groovy 列表标记，并且由于它有一个实际列表，我可以强制列表从给定位置“pos”开始，这然而，在使用分页的情况下是不可能的。在“items:namePaginator”的情况下，它只是底层列表的名称占位符，并不是真正可迭代的，是否有可能使分页从包装列表中的指定位置开始？

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T00:15:34.513

对于这种特殊的分页情况，我设法使用 JQuery 而不是使用 Play Frameworks 分页模块来解决问题。

原理是这样的，在控制器操作中，一个普通的 Java ArrayList 由我喜欢的对象组成，然后使用包含的 Gson 库（在 Play Framework 中）将此 ArrayList 转换为 jsonObject。

```
Gson gson = new Gson();
String jsonObj = gson.toJson(objects); 
```

通过使用

```
renderArgs.put("jsonObj", jsonObj); 
```

在将 json 传递给模板的控制器操作中，顺便说一下，我首先这样做的原因是能够从对象列表中的任何位置通过对象客户端开始“分页”，然后到隐藏在模板中的 div。

接下来我使用 JQuery 来获取列表，

```
$.parseJSON($('#myhiddenlist')); 
```

然后再次使用 JQuery 在列表中来回移动（捕获上一个和下一个锚标记上的点击事件），并在每页显示相应的对象。使用 JQuery（或 javascript）的另一个好处是我不必担心页面重新加载，就像 Play Frameworks 分页模块一样。

jQuery部分

```
 $(function(){
    var ourlist = $('#ourlist').text();
    var jsonOur = $.parseJSON(ourlist);
    var length = jsonOur.length; 
    var pos = parseInt($('#ourpos').text());
    var showList = $('#showlist');

    showList.append(jsonOur[pos].name);
    initControls();

    function hasPrev(){
        if(pos > 0){
            return true;
        }else{
            return false;   
        }
    }

    function hasNext(){
        if(pos < (length - 1)){
            return true;    
        }else{
            return false;
        }

    }

    function showItem(pos){
        showList.empty();
        showList.append(jsonOur[pos].name);
    }

    $('.previous a').click(function(e){

        if(hasPrev()){pos--;}
        if(hasPrev()){
                $('li.next').removeClass('off');
                $('li.next a').css('color', 'blue');
        }else{
            $('li.previous').addClass('off');
            $('li.previous.off a').css('color', 'grey');
        }
        showItem(pos);
    });

    $('.next a').click(function(e){

        if(hasNext()){pos++;}
        if(hasNext()){
            $('li.previous').removeClass('off');
            $('li.previous a').css('color', 'blue');
        }else{
            $('li.next').addClass('off');
            $('li.next.off a').css('color', 'grey');
        }
        showItem(pos);
    });

    function initControls(){
        if(hasNext()){
            $('li.previous').removeClass('off');
        }else{
            $('li.next').addClass('off');
            $('li.next.off a').css('color', 'grey');
        }
        if(hasPrev()){
                $('li.next').removeClass('off');
        }else{
            $('li.previous').addClass('off');
            $('li.previous.off a').css('color', 'grey');
        }
    }

    //for testing only
    function showPos(pos){
        console.log(pos);
    }
}); 
```

HTML 部分

```
#{extends 'main.html' /}
#{set title:'Home' /}
#{content.rightside Pos: pos /}<!-- loads the side content -->
<div id="ourlist" class="hide">${jsonOurList}</div>
<div id="ourpos" class="hide">${pos}</div>
<ul class="pagination">
<li class="previous"><a href="#">Prev</a></li>
<li class="next"><a href="#">Next</a></li>
</ul>
<div id="showlist"></div> 
```

CSS 部分

```
ul.pagination li {
display: inline;
}
ul.pagination li a {
outline: none;
text-decoration: none;
}
li.previous.off a,
li.next.off a {
color: grey;
cursor: default;
}
li.previous a,
li.next a {
color: blue;
cursor: pointer;
}
.hide {
display: none;
} 
```

好的，所以这并不是调整 Play 模块的真正解决方案，而是使用 JQuery 的更实用的方法。

希望这可以帮助任何有类似问题的人。

//卡勒

# php - 从 2 个表加载数据并将第二个表数据设置为子数组

> ID：12581051
> 
> 赞同：4
> 
> 时间：2012-09-25T10:28:37.930
> 
> 标签：php, pdo

是否可以使用 PDO 从 2 个表中加载数据并将第二个表数据设置为第一个表的子数组？例如：

表：

```
article (id, title, description) 
links (id, article_id, link) 
```

加载数据 ~ :

```
 stdClass Object
        (
            [article.id] => 1
            [article.title] => bla bla
            [article.description] => example description
            [article.links] => array (
              [0] => array (
               links.id => 1
               links.article_id => 1
               links.link => .......
              )
              [1] => array (
               links.id => 2
               links.article_id => 1
               links.link => .......
              )            
            )
          ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:40:38.307

I am not sure how efficient this code would be, but you could use a combination of the [group_concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat) and [concat](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat) mysql functions to get the data into one row/column from the subquery, then you could bust it back out into an array in PHP.

```
select
    id,
    title,
    group_concat(concat(b.ID, '@@', b.link)) as linkies
from
    article a
        right outer join links b
            on b.article_id=a.ID
group by
    id,
    title 
```

This will result in something like this coming back in your PDO results:

```
ID | Title   | linkies
1  | bla bla | 1@@yourLink, 2@@SomeOtherLink
2  | ble ble | 1@@yourLinkRow2, 2@@SomeOtherLinkAgain 
```

Once in PHP, this would be fairily easy to bring back into arrays.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:32:41.940

不，您不能直接从 PDO 获得结果。您需要自己对对象进行水合，这通常称为对象关系映射。

或者您可以尝试一些 ORM 框架，例如[Doctrine](http://www.doctrine-project.org/)。

# wpf - 调整数据网格的大小不起作用

> ID：12581053
> 
> 赞同：1
> 
> 时间：2012-09-25T10:28:40.343
> 
> 标签：wpf, animation, datagrid

我可以在窗口中调整数据网格的大小，直到我执行这段代码：

```
 // Handle the tabcontrol animation 
DoubleAnimation dbTbViewsAnimation =
    new DoubleAnimation(dToTabHeightParameter, new Duration(new TimeSpan(0,0,1)));
this.tbViews.BeginAnimation(TabControl.HeightProperty, dbTbViewsAnimation);

// Handle the tabcontrol animation 
DoubleAnimation dbCurrentPlaylistHeightAnimation =
    new DoubleAnimation(dToCurrentPlaylistParameter, new Duration(new TimeSpan(0, 0, 1)));
this.dgCurrentPlaylist.BeginAnimation(DataGrid.HeightProperty, dbCurrentPlaylistHeightAnimation); 
```

这段代码有什么问题，为什么它会阻止数据网格调整大小？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:39:36.947

请参阅[Timeline.FillBehavior 属性](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.fillbehavior.aspx)。默认值为[HoldEnd](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.fillbehavior.aspx)。您可以使用构造函数重载来更改此行为。

```
DoubleAnimation dbTbViewsAnimation =
    new DoubleAnimation(dToTabHeightParameter,
                        new Duration(new TimeSpan(0,0,1)),
                        FillBehavior.Stop); 
```

仅供参考：[如何：使用情节提要对其进行动画处理后设置属性](http://msdn.microsoft.com/en-us/library/aa970493.aspx)

# sql-server - 如何从函数返回varchar值

> ID：12581063
> 
> 赞同：21
> 
> 时间：2012-09-25T10:28:57.900
> 
> 标签：sql-server, function

我写了以下函数。

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
Create FUNCTION NameFunction
(
    @eid int
)
RETURNS varchar
AS
BEGIN
    Declare @logid varchar(50);
    SELECT @logid = E.LoginId from HumanResources.Employee As E
    where E.BusinessEntityID = @eid

    RETURN  @logid

END
GO 
```

当我执行时，结果显示为`a`. 但预期的结果是`adventure-works\terri0` 我在这里犯错的地方。只有第一个字符来了。需要改变什么吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-25T10:30:01.330

更改您的`RETURN`类型以包含长度，此时它仅返回 1 个字符：

```
RETURNS varchar(100) 
```

完整代码：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
Create FUNCTION NameFunction
(
    @eid int
)
RETURNS varchar(100) -- or whatever length you need
AS
BEGIN
    Declare @logid varchar(50);
    SELECT @logid = E.LoginId from HumanResources.Employee As E
    where E.BusinessEntityID = @eid

    RETURN  @logid

END
GO 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-25T10:29:57.907

`RETURNS varchar`应该是`RETURNS varchar(50)`。

`varchar`没有指定长度的被解释为`varchar(1)`在此上下文中（以及`varchar(30)`在 a 的上下文中`CAST`）。

顺便说一句：进行数据访问的标量 UDF 可能会成为性能杀手。您可能需要考虑至少将其重写[为内联 TVF](http://dataeducation.com/scalar-functions-inlining-and-performance-an-entertaining-title-for-a-boring-post/)，以便优化器有更多选择。

# c++ - 枚举与强类型枚举

> ID：12581064
> 
> 赞同：84
> 
> 时间：2012-09-25T10:29:05.677
> 
> 标签：c++, c++11, enums

我是 C++ 编程的初学者。

今天遇到一个新话题：强类型`enum`。我已经对其进行了一些研究，但直到现在我无法找出我们为什么需要它以及它的用途是什么？

例如，如果我们有：

```
enum xyz{a, b, c};
/*a = 0, b = 1, c = 2, (Typical C format)*/ 
```

为什么我们需要写：

```
enum class xyz{a, b, c}; 
```

我们想在这里做什么？我最重要的疑问是如何使用它。你能提供一个小例子，这将使我理解。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-09-25T10:34:47.003

好的，第一个例子：旧式枚举没有自己的范围：

```
enum Animals {Bear, Cat, Chicken};
enum Birds {Eagle, Duck, Chicken}; // error! Chicken has already been declared!

enum class Fruits { Apple, Pear, Orange };
enum class Colours { Blue, White, Orange }; // no problem! 
```

其次，它们隐式转换为整数类型，这可能导致奇怪的行为：

```
bool b = Bear && Duck; // what? 
```

最后，您可以指定 C++11 枚举的基础整数类型：

```
enum class Foo : char { A, B, C}; 
```

以前没有指定底层类型，这可能会导致平台之间的兼容性问题。**编辑**在评论中已经指出，您还可以在 C++11 中指定“旧式”枚举的基础整数类型。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-25T10:35:04.943

[在这个 IBM 页面上](http://www.ibm.com/developerworks/rational/library/scoped-enums/index.html)有一篇关于枚举的好文章，它非常详细且写得很好。简而言之，这里有一些要点：

范围枚举解决了常规枚举的大部分限制：完整的类型安全、定义良好的底层类型、范围问题和前向声明。

*   通过禁止范围枚举到其他类型的所有隐式转换，您可以获得类型安全。
*   您获得了一个新范围，并且枚举不再位于封闭范围中，从而避免了名称冲突。
*   范围枚举使您能够指定枚举的基础类型，对于范围枚举，如果您选择不指定它，它默认为 int。
*   任何具有固定基础类型的枚举都可以前向声明。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-25T10:33:38.080

的值`enum class`实际上是 type `enum class`，而不是`underlying_type`C 枚举。

```
enum xyz { a, b, c};
enum class xyz_c { d, f, e };

void f(xyz x)
{
}

void f_c(xyz_c x)
{
}

// OK.
f(0);
// OK for C++03 and C++11.
f(a);
// OK with C++11.
f(xyz::a);
// ERROR.
f_c(0);
// OK.
f_c(xyz_c::d); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-10-14T07:58:40.723

枚举类（“新枚举”、“强枚举”）解决了传统 C++ 枚举的三个问题：

1.  常规`enums`隐式转换为`int`，当有人不希望枚举充当整数时会导致错误。
2.  常规`enums`将其枚举数导出到周围范围，导致名称冲突。
3.  `enum`无法指定an 的底层类型，导致混淆、兼容性问题，并且无法进行前向声明。

`enum class`("strong enums") 是强类型和范围的：

```
enum Alert { green, yellow, orange, red }; // traditional enum

enum class Color { red, blue };   // scoped and strongly typed enum
                                  // no export of enumerator names into enclosing scope
                                  // no implicit conversion to int
enum class TrafficLight { red, yellow, green };

Alert a = 7;              // error (as ever in C++)
Color c = 7;              // error: no int->Color conversion

int a2 = red;             // ok: Alert->int conversion
int a3 = Alert::red;      // error in C++98; ok in C++11
int a4 = blue;            // error: blue not in scope
int a5 = Color::blue;     // error: not Color->int conversion

Color a6 = Color::blue;   // ok 
```

如图所示，传统枚举照常工作，但您现在可以选择使用枚举名称进行限定。

新的枚举是“枚举类”，因为它们将传统枚举（名称值）的各个方面与类的各个方面（范围成员和没有转换）结合在一起。

能够指定底层类型允许更简单的互操作性和枚举的保证大小：

```
enum class Color : char { red, blue };  // compact representation

enum class TrafficLight { red, yellow, green };  // by default, the underlying type is int

enum E { E1 = 1, E2 = 2, Ebig = 0xFFFFFFF0U };   // how big is an E?
                                                 // (whatever the old rules say;
                                                 // i.e. "implementation defined")

enum EE : unsigned long { EE1 = 1, EE2 = 2, EEbig = 0xFFFFFFF0U };   // now we can be specific 
```

它还支持枚举的前向声明：

```
enum class Color_code : char;     // (forward) declaration
void foobar(Color_code* p);       // use of forward declaration
// ...
enum class Color_code : char { red, yellow, green, blue }; // definition 
```

基础类型必须是有符号或无符号整数类型之一；默认为`int`.

在标准库中，`enum`类用于：

1.  映射系统特定错误代码： In `<system_error>`: `enum class errc`;
2.  指针安全指标： In `<memory>`:`enum class pointer_safety { relaxed, preferred, strict };`
3.  I/O 流错误：在`<iosfwd>`：`enum class io_errc { stream = 1 };`
4.  异步通信错误处理：在`<future>`：`enum class future_errc { broken_promise, future_already_retrieved, promise_already_satisfied };`

其中有几个有操作符，比如`==`defined。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-25T10:36:10.187

枚举范围

枚举将其枚举数导出到周围的范围。这有两个缺点。首先，如果在同一作用域中声明的不同枚举中的两个枚举数具有相同的名称，则会导致名称冲突；其次，不可能使用具有完全限定名称的枚举器，包括枚举名称。

```
enum ESet {a0, a, a1, b1, c3};
enum EAlpha{a, b, c}

select = ESet::a; // error
select = a;       // is ambigious 
```

# java - 继续测试步骤失败

> ID：12581067
> 
> 赞同：0
> 
> 时间：2012-09-25T10:29:15.320
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我有一个功能-

```
private boolean selectFromDropDown(String locator, String value) {
    try {
        new Select(driver.findElement(By.xpath(locator))).selectByVisibleText(value);
        return true;
    }
     catch (Error e) {
            verificationErrors.append(e.toString());
            System.out.println("Could not find element");
            return false;
        }
} 
```

我希望函数在可以执行操作时返回 true，否则返回一些消息并继续下一步。现在我得到一个错误 -

```
Exception in thread "main" org.openqa.selenium.NoSuchElementException: Cannot locate element with text: Indi
For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html
Build info: version: '2.24.1', revision: '17205', time: '2012-06-19 16:53:24'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_07'
Driver info: driver.version: unknown
at org.openqa.selenium.support.ui.Select.selectByVisibleText(Select.java:147)
at com.adobe.auto.testcases.utils.SeleniumTest.selectFromDropDown(SeleniumTest.java:89)
at com.adobe.auto.testcases.utils.SeleniumTest.RunSeleniumTest(SeleniumTest.java:66)
at com.adobe.auto.testcases.utils.Excel_Reader.runTest(Excel_Reader.java:653)
at com.adobe.auto.testcases.utils.DriverFinal.main(DriverFinal.java:25) 
```

处决就停在那里。

我需要做什么才能使其按我的意愿工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:37:47.827

尝试捕获异常而不是错误，它应该可以正常工作。

错误派生自 java.lang.Error，异常派生自 java.lang.Exception。根据 API，错误“表示一个合理的应用程序不应该尝试捕获的严重问题”。异常“表示合理的应用程序可能想要捕获的条件”。

# c# - 非抽象类中的抽象方法

> ID：12581070
> 
> 赞同：53
> 
> 时间：2012-09-25T10:29:26.057
> 
> 标签：c#, oop, compiler-construction

我想知道在非抽象类（在 C# 中）中限制抽象方法的设计背后的原因。

我知道类实例没有定义，因此它们不能被调用，但是当定义静态方法时，它们也被排除在实例之外。为什么不以这种方式处理抽象方法，有什么具体原因吗？

它们可以在具体类中被允许，并且可以强制派生类实现方法，基本上就是在抽象类中的抽象方法的情况下所做的。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-25T11:43:27.037

首先，我认为您的要求在逻辑上没有意义。如果您有`abstract`方法，则基本上意味着该方法未完成（正如@ChrisSinclair 指出的那样）。但这也意味着整个课程都没有完成，所以它也必须是`abstract`。

或者换一种说法：如果你在一个`abstract`not 的类上有一个方法`abstract`，那就意味着你有一个不能被调用的方法。但这意味着该方法没有用，您可以将其删除，并且它们都可以正常工作。

现在，我将尝试通过一个示例更具体：想象以下代码：

```
Animal[] zoo = new Animal[] { new Monkey(), new Fish(), new Animal() };

foreach (Animal animal in zoo)
    animal.MakeSound(); 
```

这里，`Animal`是非`abstract`基类（这就是为什么我可以直接把它放到数组中），`Monkey`并且是从方法`Fish`派生而来`Animal`的。这段代码应该做什么？你没有说清楚，但我可以想象几个选择：`MakeSound()``abstract`

1.  您不能调用`MakeSound()`类型为 as 的变量`Animal`，只能使用类型为派生类之一的变量调用它，因此这是一个编译错误。

    这不是一个好的解决方案，因为重点在于`abstract`能够将派生类的实例视为基类，并且仍然获得特定于派生类的行为。如果你想要这个，只需在每个派生类中放入一个普通（no或）方法`abstract`，不要对基类做任何事情。`virtual``override`

2.  您不能调用`MakeSound()`运行时类型实际上为 的对象`Animal`，因此这是运行时错误（异常）。

    这也不是一个好的解决方案。C# 是一种静态类型语言，因此它会尝试在编译时捕获诸如“您不能调用此方法”之类的错误（反射`dynamic`和语言。此外，您可以通过`virtual`在基类中创建一个引发异常的方法来轻松完成此操作。

总而言之，您想要一些没有多大意义的东西，并且带有不良设计的味道（一个行为与其派生类不同的基类）并且可以很容易地解决。这些都是不应实施的功能的*迹象*。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-25T10:34:15.817

所以，你想允许

```
class C { abstract void M(); } 
```

编译。假设确实如此。当有人这样做时，您希望发生什么

```
new C().M(); 
```

? 您想要执行时错误吗？好吧，通常 C# 更喜欢编译时错误而不是执行时错误。如果您不喜欢这种哲学，还有其他语言可用...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T10:36:07.370

我认为您已经回答了自己的问题，最初没有定义抽象方法。因此无法实例化该类。您是说它应该忽略它，但是根据定义，在添加抽象方法时，您是在说“由此创建的每个类都必须实现此{抽象方法}”，因此您定义抽象类的类也必须是抽象的，因为那时抽象方法仍未定义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-03T08:36:32.493

您可以使用“虚拟”方法实现您想要的，但使用虚拟方法可能会导致更多运行时业务逻辑错误，因为开发人员不会“强制”在子类中实现逻辑。

我认为这里有一个有效的观点。抽象方法是完美的解决方案，因为它将“强制”定义子方法体的要求。

我遇到过很多情况，父类必须（或者更有效地）实现一些逻辑，但“只有”孩子可以实现其余的逻辑”

因此，如果有机会，我会很乐意将抽象方法与完整方法混合使用。

@AakashM，我很欣赏 C# 更喜欢编译时错误。我也是。任何人也一样。这是关于开箱即用的思考。

支持这一点不会影响这一点。

让我们在这里跳出框框思考，而不是对大男孩的决定说“万岁”。

C# 编译器可以直接检测并拒绝某人使用抽象类，因为它使用“abstract”关键字。

C# 也知道强制任何子类实现任何抽象方法。如何？因为使用了“抽象”关键字。

对于任何研究过编程语言内部的人来说，这很容易理解。

那么，为什么 C# 不能检测到普通类中方法旁边的“抽象”关键字并在编译时处理它。

原因是它需要“返工”，付出的努力不值得支持小需求。

特别是在一个缺乏大男孩给他们的框框思考的人的行业。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-21T19:30:11.857

抽象类可能包含抽象成员。如果任何方法具有我们无法在同一个类中实现的抽象关键字，则只有方法声明。所以抽象类是不完整的。这就是为什么没有为抽象类创建对象的原因。

**非抽象类不能包含抽象成员。**

**例子：**

```
namespace InterviewPreparation
{
   public abstract class baseclass
    {
        public abstract void method1(); //abstract method
        public abstract void method2(); //abstract method
        public void method3() { }  //Non- abstract method----->It is necessary to implement here.
    }
    class childclass : baseclass
    {
        public override void method1() { }
        public override void method2() { }
    }
    public class Program    //Non Abstract Class
    {
        public static void Main()
        {
            baseclass b = new childclass(); //create instance
            b.method1();
            b.method2();
            b.method3();
        }
    }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-25T11:29:52.783

目前尚不清楚您为什么要这样做，但另一种方法可能是强制派生类提供委托实例。像这样的东西

```
class MyConcreteClass
{
  readonly Func<int, DateTime, string> methodImpl;

  // constructor requires a delegate instance
  public MyConcreteClass(Func<int, DateTime, string> methodImpl)
  {
    if (methodImpl == null)
      throw new ArgumentNullException();

    this.methodImpl = methodImpl;
  }

  ...
} 
```

（当然，签名`string MethodImpl(int, DateTime)`只是一个例子。）

否则，我可以推荐其他答案来解释为什么您的愿望可能不会让世界变得更美好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-14T13:02:25.617

所以上面的答案是正确的：拥有抽象方法使类本质上是抽象的。如果你不能实例化一个类的一部分，那么你就不能实例化这个类本身。但是，上面的答案并没有真正讨论您的选择。

首先，这主要是*公共*静态方法的问题。如果这些方法不打算公开，那么您可以保护非抽象方法，这些方法在抽象类声明中是允许的。因此，您可以将这些静态方法移至单独的静态类，而不会出现太大问题。

作为替代方案，您可以将这些方法保留在类中，但随后不使用抽象方法，而是声明一个接口。本质上，您有一个多重继承问题，因为您希望派生类从两个概念上不同的对象继承：一个具有公共静态成员的非抽象父类，以及一个具有抽象方法的抽象父类。与其他一些框架不同，C# 确实允许多重继承。相反，C# 提供了一个正式的接口声明来满足这个目的。此外，抽象方法的全部意义实际上只是强加了某个概念接口。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-08T14:14:33.590

我有一个与 OP 试图实现的非常相似的场景。在我的情况下，我想要抽象的方法将是一个*受保护*的方法，并且只有基类知道。所以“新的 C().M();” 不适用，因为所讨论的方法不是公开的。我希望能够在基类上实例化和调用公共方法（因此它必须是非抽象的），但是我需要这些公共方法来调用子类中受保护方法的受保护实现并且没有默认实现在父母。从某种意义上说，我需要强制后代覆盖该方法。由于依赖注入，我不知道编译时子类是什么。

我的解决方案是遵循规则并使用具体的基类和虚拟*保护*方法。但是，对于默认实现，我抛出 NotImplementedException 错误“必须在子类的实现中提供*方法名称的实现”。*

```
protected virtual void MyProtectedMethod() 
{ 
  throw new NotImplementedException("The implementation for MyProtectedMethod must be provided in the implementation of the child class."); 
} 
```

通过这种方式，永远不能使用默认实现，并且后代实现的实现者很快就会发现他们错过了重要的一步。

# java - IntelliJ 线程调试

> ID：12581072
> 
> 赞同：19
> 
> 时间：2012-09-25T10:29:35.187
> 
> 标签：java, debugging, ide, intellij-idea

IntelliJ IDEA 是否提供线程调试？也就是说 - Netbeans 允许您调试多个线程，并在这些断点处停止（自动）。然而，我似乎在 IntelliJ 中得到的只是“线程转储”，这似乎是一种手动分析，以及当我单击“线程转储”时拍摄的快照。

有什么我想念的吗？我用谷歌搜索并没有找到足够的信息来提供帮助。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-25T10:35:43.727

我想你可以。我通过设置[暂停策略](http://www.jetbrains.com/idea/webhelp/breakpoints.html#suspend)通过断点暂停了线程。这将暂停正在执行这段代码的线程。如果您有多个线程，那么我认为他们会继续进行。

引用暂停政策

*   商品描述
*   All ：当断点被命中时，所有线程都被挂起
*   线程：当断点被命中时，断点所在的线程被挂起。
*   无：没有线程被挂起。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T10:38:23.120

你有一个很好的`Threads`视野。

按下小齿轮，您将看到所有活动线程。

![在此处输入图像描述](../Images/257eebb0bbaf41e15294938cda011a9f.png)

在每个断点上，您都可以设置暂停策略。您可以将`Thread`替代设置为所有断点的默认值，也可以在每个断点上单独设置它们。

![在此处输入图像描述](../Images/000ede0547f22cf10f5a883e5ebe39c9.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-16T23:01:44.810

对我来说，不访问线程的问题仍然存在。我为所有人设置了刹车点。并将刹车点放在调用方法中。我注意到的是，当我调用 run() 而不是 start() 时，正在访问新线程中的方法。只是想知道为什么，AFAIK start() 方法应该调用 run()。尽管如此，即使我调用 .start()，线程的输出也会发生，但从不访问它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-30T01:41:09.583

对我来说，问题是似乎存在竞争条件，在断点后恢复线程并在 IntelliJ 中评估断点。

我的短期工作是在生成线程之前不设置断点。如果我不这样做，*run()*或*call()*中的前几个断点就会丢失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-30T18:05:27.947

我认为您遇到的问题是子线程比您预期的要早关闭，因为主线程（*测试本身*）到达末尾。

请记住，当您执行 Thread.start() 时会启动一个异步调用，然后如果您使用 Junit 运行测试，则执行将在此调用之后继续执行，直到测试结束，并且一旦到达结束，它关闭您在其中启动的线程。

因此，如果你有类似的东西：

```
01\. import org.junit.Assert;
02\. import org.junit.Test;
03\. public class ThreadTest {
04\.     static boolean didIGetIt = false;
05\.     @Test
06\.     public void testThread() {
07\.         Thread myThread = new Thread(new Runnable() {
08\.             @Override
09\.             public void run() {
10\.                 System.out.println("I am an asynchronous task");
11\.                 System.out.println("and JUnit won't wait for me to finish my job!");
12\.                 didIGetIt = true;
13\.             }
14\.         });
15\.         myThread.start();
16\.         Assert.assertTrue(didIGetIt);
17\.     }
18\. } 
```

它将在 run() 中的代码之前执行 Assert，从而导致测试失败。

但是，如果您添加一个简单的睡眠，您可以停止主线程并在主线程停止之前进行调试并执行您需要的操作。

```
01\. import org.junit.Assert;
02\. import org.junit.Test;
03\. public class ThreadTest {
04\.     static boolean didIGetIt = false;
05\.     @Test
06\.     public void testThread() throws InterruptedException {
07\.         Thread myThread = new Thread(new Runnable() {
08\.             @Override
09\.             public void run() {
10\.                 System.out.println("I am an asynchronous task");
11\.                 System.out.println("and JUnit won't wait for me to finish my job!");
12\.                 didIGetIt = true;
13\.             }
14\.         });
15\.         myThread.start();
16\.         System.out.println("Let's wait for child threads to finish");
17\.         Thread.sleep(5000);
18\.         Assert.assertTrue(didIGetIt);
19\.     }
20\. } 
```

当然有更好的方法来做到这一点，但 Thread.sleep 可能是您正在寻找的。

希望它可以帮助某人！

# ios - 在 Xcode 4.5 中针对 iOS 6 SDK 构建时，视图下降 20 像素

> ID：12581075
> 
> 赞同：9
> 
> 时间：2012-09-25T10:29:48.383
> 
> 标签：ios, uiview, uisplitviewcontroller, ios6, xcode4.5

在针对 iOS 6.0 SDK 构建我的 iPad 应用程序后，我的 UISplitViewController 的详细视图出现了这种奇怪的行为。详细视图的位置比应有的位置低 20 像素（点/40 像素）。

![在此处输入图像描述](../Images/7c22b3d4a931adf274b3c593404261db.png)

这是 5.1 下的样子：

![在此处输入图像描述](../Images/1eb9592513bc951df13740d205abea35.png)

对于 Interface Builder 中的 DetailViewController_iPad.xib，我已将 Simulated Metrics > Top Bar 设置为 None。这没有帮助。我已经记录了视图框架：

```
- (void) viewDidLayoutSubviews {
//.. etc
NSLog(@"viewDidLayoutSubviews: %@", CGRectCreateDictionaryRepresentation(self.view.frame) );
} 
```

这将高度记录为 684 而不是它应该是的高度：704。

`Height = 684;` `Width = 703;` `X = 0;` `Y = 0;`

有没有人有这种事情的经验？接下来我应该尝试什么？

**更新：**这个问题似乎是间歇性的，有些编译会导致它，有些则不会。

如果其他人遇到此问题并找出原因，我仍然很想知道。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T14:20:59.190

我有完全相同的问题！

当导航控制器中存在另一个视图控制器并且此拆分视图控制器在应用程序启动期间在方法*application:didFinishLaunchingWithOptions:中推送时，将出现此问题。*

这解决了我的问题：

推送我使用的*splitViewController时*

```
dispatch_async(dispatch_get_main_queue(), ^{

     [self.navigationController pushViewController:splitViewController animated:NO];

}) 
```

代替

```
[self.navigationController pushViewController:splitViewController animated:NO]; 
```

我仅将它用于 iOS6，否则第一个视图将暂时显示在 OS < iOS6 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T01:57:25.147

我假设您没有做任何事情来影响代码中的视图框架，对吗？是视图的控制器在做所有的布局？如果是这样，您是否尝试过修补`-wantsFullScreenLayout`？

> 当视图控制器呈现其视图时，它通常会缩小该视图，使其框架不会与设备的状态栏重叠。将此属性设置为 YES 会导致视图控制器调整其视图的大小，以便它填满整个屏幕，包括状态栏下方的区域。（当然，要做到这一点，托管视图控制器的窗口本身必须调整大小以填满整个屏幕，包括状态栏下方的区域。）如果您具有半透明状态，通常会将此属性设置为 YES栏并希望您的视图内容在该视图后面可见。
> 
> 如果此属性为 YES，则视图不会调整大小以使其与选项卡栏重叠，但会调整其大小以与半透明工具栏重叠。无论此属性的值如何，导航控制器始终允许视图与半透明导航栏重叠。
> 
> 此属性的默认值为 NO，这会导致视图被布置，因此它不会在状态栏下方重叠。

请注意，`-wantsFullScreenLayout`实际上应该只影响窗口的根视图控制器。因此，如果这解决了您的问题（并且您没有对视图控制器层次结构做任何愚蠢的事情），请向 Apple 提交错误！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T13:01:45.390

也许`[UIViewController statusBarHidden]`设置`NO`在您的详细控制器上？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T01:44:58.840

Xcode 4.5 有一个应用自动布局的习惯，这可能是你的一些悲伤的原因 - 检查它并尝试取消选择它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T06:01:51.420

您是否在 xib 文件中或以编程方式设置了高度的 autosizng 属性，如果是，请尝试删除它们并查看它是否有助于解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T09:07:40.080

可能会有所帮助。我也受到了同样的问题的影响，我只是在我的示例中减小了视图的大小：我在 iPhone 应用程序的 XIB 中有 480 像素的高度，我将其减少到 460 像素。请同样为 iPad 做不确定，但可能会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-08T04:21:52.173

当我尝试在 ViewWillAppear 方法中呈现另一个视图控制器时，我遇到了同样的问题。我通过将 presentViewController 代码移动到 ViewDidAppear 方法解决了这个问题。希望它会有所帮助。

# android - Android 自定义视图和可见按钮

> ID：12581078
> 
> 赞同：0
> 
> 时间：2012-09-25T10:29:51.950
> 
> 标签：android, button, view

我做了我的自定义视图，我想添加 view.button，所以我做了这个解决方案：

```
Public void onCreate(Bundle savedInstanceState)
{
    Button up;
    up = new Button(getApplicationContext());
    up.setText("ahoj");
    up.setHeight(100);
    up.setWidth(100);
    up.setTop(200);
    up.setLeft(100);
    LinearLayout layout = new LinearLayout(getApplicationContext());
    super.onCreate(savedInstanceState);
    setContentView(layout);

    myview view = new myview(this);
    layout.addView(view);

layout.addView(up); 
```

我只看到我的视图，但没有按钮。我的观点只画了一些PNG文件。有谁知道问题出在哪里？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:35:31.917

最可能的原因是您的自定义视图添加了布局参数`MATCH_PARENT`。它占用了整个布局，并且按钮不可见。尝试使用`WRAP_CONTENT`参数添加您的自定义视图：

```
MyView view = new myview(this);
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LAYOUTParams.WRAP_CONTENT)
layout.addView(view, lp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:36:55.617

您的代码正确，但顺序错误。试试这个：

```
Public void onCreate(Bundle savedInstanceState)
{
    Button up;
    LinearLayout layout = new LinearLayout(getApplicationContext());
    up = new Button(getApplicationContext());
    up.setText("ahoj");
    up.setHeight(100);
    up.setWidth(100);
    up.setTop(200);
    up.setLeft(100);

    myview view = new myview(this);
    layout.addView(view);
    layout.addView(up);

    setContentView(layout);
    super.onCreate(savedInstanceState);
} 
```

# javascript - 仅当输入 val 长度 < n 时，输入元素上的 BOOTSTRAP 触发工具提示

> ID：12581086
> 
> 赞同：4
> 
> 时间：2012-09-25T10:30:13.580
> 
> 标签：javascript, jquery, input, twitter-bootstrap, tooltip

我想`input.val().length <= 3`在> 3个字符时显示工具提示然后隐藏工具提示

看一下这个：

```
<input type="text" id="nav-search"/>

$('#nav-search').on('keyup',function(){
   var _keys = $(this).val();
   if(_keys.length <= 3){
   $(this).tooltip({'trigger':'focus',position:'right'});
   $(this).trigger('focusin');

   }
  }); 
```

它显然不起作用：/

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T10:33:14.047

从理论上讲，它应该工作：

```
$("#nav-search").on("keyup", function() {
    if (this.value.length <= 3) {
        $(this).tooltip("show");
    } else {
        $(this).tooltip("hide");
    }
}).tooltip({
    placement: "right",
    trigger: "focus"
});​ 
```

实际上，它有效。

**演示：http:** [//jsfiddle.net/FvxnN/](http://jsfiddle.net/FvxnN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:33:13.900

```
$('#nav-search').bind('keyup',function(){
   var _keys = $(this).val();
   if(_keys.length <= 3){
   $(this).tooltip({'trigger':'focus',position:'right'});
   $(this).trigger('focusin');

   }else{

  //perform some action
  }
  }); 
```

# java - 从 Java 客户端建立 SSL 连接到 .NET 服务器时出错

> ID：12581087
> 
> 赞同：6
> 
> 时间：2012-09-25T10:30:12.890
> 
> 标签：java, .net, ssl, x509certificate, self-signed

我正在学习 SSL，在这个过程中，我试图在 .NET 服务器与 Java 客户端之间创建 SSL 连接。为此，我使用自签名证书。我不想在 Java 中使用标准密钥库，所以我创建了一个自定义密钥库并加载它。

我使用以下步骤生成证书和 pfx 文件以在 .NET 服务器端使用。

1.  在 Windows 上使用以下命令生成证书。

    > makecert -r -pe -sr "localhost" -$ individual -n "CN=localhost" -sv .pvk -r localhost.cer

2.  将其转换为 .pfx，以便我可以在 .NET 服务器应用程序上加载此证书。

3.  将 .cer 文件导出为 .pem（Base64 格式）。

4.  使用以下命令获取 .cer 文件（上述证书的公共组件）并创建一个 .jks 文件（JavaKeyStore）用作 java 客户端。

    > keytool \ -import \ -v \ -trustcacerts \ -alias 0 \ -file <(openssl x509 -in localhost.pem) \ -keystore mystore.jks\ -storetype JKS\ -storepass ez24get

5.  在 Java 客户端应用程序中加载此 .jks 并使用以下代码启动连接

    > ```
    > FileInputStream fis = new FileInputStream("res/myjksstore.jks");
    > KeyStore trusted = KeyStore.getInstance("JKS");
    > trusted.load(fis, "ez24get".toCharArray());           
    > 
    > TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
    > trustManagerFactory.init(trusted);
    > 
    > SSLContext context = SSLContext.getInstance("SSL");
    > context.init(null, trustManagerFactory.getTrustManagers(), new SecureRandom());
    > 
    > Socket socket = context.getSocketFactory().createSocket("localhost", 443);
    > 
    > String str = "abc123";
    > 
    > socket.getOutputStream().write(GeneralUtil.toByta(str.length()));
    > socket.getOutputStream().write(str.getBytes());
    > 
    > socket.setKeepAlive(true); 
    > ```

但是当我尝试将数据写入套接字时，我在服务器端收到以下错误

> System.ComponentModel.Win32Exception：客户端和服务器无法通信，因为它们没有共同的算法

我的服务器代码如下所示...

> X509Certificate cert = new X509Certificate("localhost.pfx", "abc123");
> 
> TcpListener listener = new TcpListener(IPAddress.Loopback, 443); listener.Start();
> 
> 而（真）{
> 
> 尝试 { TcpClient tcpClient = listener.AcceptTcpClient();
> 
> ```
>  NetworkStream networkStream = tcpClient.GetStream();
> 
>   SslStream sslStream = new SslStream(networkStream);
> 
>   sslStream.AuthenticateAsServer(cert, false, SslProtocols.Default, 
> ```
> 
> 错误的）;
> 
> ```
>  byte[] data1 = new byte[4];
> 
>   sslStream.Read(data1, 0, data1.Length);
> 
>   int len = BitConverter.ToInt32(data1, 0);
> 
>   String message = "Length of incoming data " + 
> ```
> 
> BitConverter.ToInt32(data1, 0);
> 
> ```
>  byte[] data2 = new byte[len];
> 
>   sslStream.Read(data2, 0, data2.Length);
> 
>   message += "   Message: " + ASCIIEncoding.ASCII.GetString(data2);
> 
>   Thread.Sleep(1000); 
> ```
> 
> } 捕捉（异常前）
> {
> } }

异常发生在该行

> sslStream.AuthenticateAsServer(cert, false, SslProtocols.Default, false);

这可能是什么原因，我该如何解决？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-10T05:13:44.683

SSLEngine（从 SSLContext 获得）必须设置为客户端模式（setUseClientMode）

# c# - 如何以编程方式添加 TemplateField

> ID：12581088
> 
> 赞同：13
> 
> 时间：2012-09-25T10:30:16.727
> 
> 标签：c#, asp.net, c#-4.0, gridview

请考虑以下代码：

```
<asp:TemplateField>
     <ItemTemplate>
         <asp:LinkButton runat="server" ID="linkmodel" Text='<%#Eval("MenuItem") %>' 
                         CommandName='<%#Eval("CommandName") %>'
                         OnCommand="linkmodel_Click" 
                         OnClientClick="return confirm('Are You Sure')">
         </asp:LinkButton>
     </ItemTemplate>
</asp:TemplateField> 
```

如何使用 C# 以编程方式添加此列？

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-25T10:39:49.430

这可能有助于开始：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    { 
        var linkField = new TemplateField();
        linkField.ItemTemplate = new LinkColumn();
        GridView1.Columns.Add(linkField);
    }
}

class LinkColumn : ITemplate
{
    public void InstantiateIn(System.Web.UI.Control container)
    {
        LinkButton link = new LinkButton();
        link.ID = "linkmodel";
        container.Controls.Add(link);
    }
} 
```

**但是**：

> 尽管您可以动态地将字段添加到数据绑定控件，但 **强烈建议**静态声明字段，然后根据需要显示或隐藏。静态声明所有字段会减小父数据绑定控件的视图状态大小。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield.templatefield.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield.templatefield.aspx)

# php - PHP：file_get_contents 函数在图形 api facebook 中不起作用

> ID：12581089
> 
> 赞同：0
> 
> 时间：2012-09-25T10:30:17.493
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试从下面的代码中通过图形检索 facebook uesr ID

```
$post =  "https://graph.facebook.com/me?access_token=".$access_token;
$response = file_get_contents($post); 
```

我收到以下错误：

> 警告：/me 无法读取 [file_get_contents] [https://graph.facebook.com/me?access_token=AAIvGrJsBAI3nLAbfaqyh8NExN5e21yKCvJAjVOGJ9ira1RdCDHRFszktHnDCY44urQtxdBHMKEsX1K7QAUWXSYF5ip3l68JI8xKeopjYdssds](https://graph.facebook.com/me?access_token=AAIvGrJsBAI3nLAbfaqyh8NExN5e21yKCvJAjVOGJ9ira1RdCDHRFszktHnDCY44urQtxdBHMKEsX1K7QAUWXSYF5ip3l68JI8xKeopjYdssds)

但是当我尝试通过浏览器访问上面的图形 URL 时，它工作正常。所以我的访问令牌是有效的。

注意：我使用的是谷歌应用引擎，所以我不能使用 cURL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:44:35.633

使用 cURL 或此类：http: [//ideone.com/Q1Zfl](http://ideone.com/Q1Zfl)

我已经多次使用这个类，它表现得很好。

用法：

```
$url = '...';
$req = new Request($url);
$data = $req->DownloadToString(); 
```

PS我希望链接不会过期

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-26T04:25:43.613

您可以使用

> $content = @file_get_contents($site);

隐藏错误。如果它不起作用。您转到 ini.php 文件并找到该行

> Allow_url_fopen = 关闭

将“关”改为“开”

> Allow_url_fopen = 开启

# c# - JSON解析麻烦

> ID：12581090
> 
> 赞同：0
> 
> 时间：2012-09-25T10:30:18.750
> 
> 标签：c#, json, parsing

```
WebClient client = new WebClient();
Stream stream = client.OpenRead(" some link ");
StreamReader reader = new StreamReader(stream);

Newtonsoft.Json.Linq.JObject jObject = Newtonsoft.Json.Linq.JObject.Parse(reader.ReadLine());
List<String> list = new List<string>();

//loading list
for (int i = 0; i < ((string)jObject["some_stream"][i]["some_channel"]["some_name"]).Count(); i++)
{

  string result = ((string)jObject["some_streams"][i]["some_channel"]["some_name"]);
  list.Insert(i, result);

}

stream.Close(); 
```

此代码有效，但在 json 数据中，我应该返回 20 多个结果，但我只得到 8 个。

可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:35:15.317

您正在计算字符串的长度。在某些时候，该字符串的长度等于或小于 i（如果您设法迭代 8 次，则为字符串的第 9 个值）

就是这段代码

```
((string)jObject["some_stream"][i]["some_channel"]["some_name"]).Count() 
```

返回位置处字符串的长度，`i`因此如果您设法迭代 8 次，则 jObject["some_stream"][9]["some_channel"]["some_name"] 处的字符串的长度为 9 或更短，此时循环结束

从用法来看，`jObject["Some_stream"]`在这种情况下，它看起来像返回一个数组，你可以做的是这样的：

```
var arr = (Treal[])jObject["Some_stream"];
var list = (from obj in arr
           select ((string)obj["some_channel"]["some_name"])).ToList(); 
```

您需要用 jObject["Some_stream"] 的实际类型替换 TReal

旁白：当您打开流时，最好在 using 语句中执行此操作。在您的代码中，如果出现异常，则不会关闭流，然后代码将是

```
WebClient client = new WebClient();  
using(var stream = client.OpenRead(" some link ")) {
    reader = new StreamReader(stream);   
    var jObject = Newtonsoft.Json.Linq.JObject.Parse(reader.ReadLine());  
    var arr = (Treal[])jObject["Some_stream"];
    var list = (from obj in arr
               select ((string)obj["some_channel"]["some_name"])).ToList();
} 
```

# c++ - 为什么 Mozilla 开发人员指南更喜欢 if (ptr) 而不是 if (ptr != nsnull)？

> ID：12581092
> 
> 赞同：1
> 
> 时间：2012-09-25T10:30:28.083
> 
> 标签：c++, coding-style

在[Mozilla Developer Style Guide](https://developer.mozilla.org/en-US/docs/Developer_Guide/Coding_Style)的***C/C++ Practices***下，可以找到：

> 测试指针时，使用 (!myPtr) 或 (myPtr)；不要使用 myPtr != nsnull 或 myPtr == nsnull。

这背后有什么原因吗？或者它只是一个约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:38:24.930

一般来说，公司编码指南就是这样 - 预计将在该公司内部执行的指南。

这是一个偏好问题——它们都实现了相同的目标（假设`myPtr`是指针*），所以这纯粹是主观的。对于大型代码库，看到`if (myPtr)`一半的地方和`if (myPtr != NULL)`另一半的地方很烦人。

[*如果`myPtr`是非指针用户定义类型，它可以重载运算符`!`，`!=`因此`==`它们实际上可能表现不同]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-26T13:12:34.677

如果您这样做，可能会出现很难发现的印刷错误

```
if (myPtr = nsnull) /* assignment operator */ 
```

虽然你真的是这个意思

```
if (myPtr == nsnull) /* test equality */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:21:34.410

> 这背后有什么原因吗？

存在公司编码准则是因为，在大型公司中，通常会有人将美学一致性置于其他编程问题之上。他们将生成大量无意义的指导方针，例如这个指导方针，并带有虚假的理由，即不相关细节的一致性使代码更具可读性。如果企业环境功能失调，这些指导方针将载入官方政策文件，并强加给所有开发人员。

> 或者它只是一个约定？

在这种情况下，最好不要使用一些可能会或可能不会评估为空指针值的非常规符号；尽管`nsnull`本样式指南可能已对此进行了定义和授权，但其含义对于内部人员来说是很清楚的。是否`if (ptr)`比更传统的`if (ptr != 0)`（或`NULL`，或`nullptr`）更好是一个品味问题：有些人会为他们的选择打圣战，其他人则不在乎。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-26T14:01:26.553

你的风格指南推荐的风格有一个名字：boolean zen。这是布尔表达式的本质。练习布尔禅意味着以最简单的形式编写布尔表达式。例如，这不是布尔 zen：

```
bool foo() {
    if(myCondition()) {
        return true;
    } else {
        return false;
    }
} 
```

用布尔 zen 重写，你会得到：

```
bool foo() {
    return myCondition();
} 
```

我相信很容易看出第二种更可取，只是因为它没有添加不必要的代码结构。

现在，在 C 派生中，如果在布尔上下文中使用，每个整数/指针也有一个定义的行为。手动进行转换是没有意义的。IE。在 C/C++/Objective-C 中的 if 语句

```
bool foo = ...;
if(foo) printf("It's true");
if(foo != false) printf("It's really true"); 
```

和线条一样等价

```
Bar* foo = ...;
if(foo) printf("It exists");
if(foo != 0) printf("It really exists"); 
```

因此，根据 boolean zen，无论哪种情况，您都应该坚持使用更简单的方法。

* * *

[您可以在此幻灯片](http://courses.cs.washington.edu/courses/cse142/08wi/lectures/2008-02-08%20ch05-3/14-ch05-3-boolean.pdf)中找到有关布尔禅的介绍。

# java - Jace:: 虚拟机关闭错误

> ID：12581094
> 
> 赞同：0
> 
> 时间：2012-09-25T10:30:30.160
> 
> 标签：java, c++, exception

这段代码有什么问题？

```
typedef ::jace::proxy::java::lang::String JString;
JString toString(const std::wstring& p)
{

    JString strVal(p.c_str());
    return strVal;
} 
```

它抛出异常`unhandled exception, jace::VirtualMachineShutdownError`，我已将 p.c_str() 传递给`JString`变量 strVal。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:33:26.327

您收到该异常的原因是 wstring::c_str() 返回`const wchar_t*`，而`jace::String`类没有接受 wchar_t* 的构造函数。它最接近的是`String( ::jace::JArray< ::jace::proxy::types::JChar > p0 );`可以被视为等价于`char*`.

您的问题的解决方法可能是这样的：

```
JString toString(const std::wstring& p)
{
    std::string s;
    s.assign( p.begin() , p.end() );
    JString strVal( s );
    return strVal;
} 
```

这不是一个有效的解决方案，但有效。

# c# - Lync API：如何通过电子邮件地址向联系人发送即时消息？

> ID：12581095
> 
> 赞同：5
> 
> 时间：2012-09-25T10:30:52.097
> 
> 标签：c#, lync, lync-2010

我有一个 Lync 用户的电子邮件地址，并想向他发送即时消息。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Microsoft.Lync.Model;
using Microsoft.Lync.Model.Conversation;

namespace Build_Server_Lync_Notifier
{
    class Program
    {
        static void Main(string[] args)
        {
            if (args.Length != 2)
            {
                Console.WriteLine("Usage: bsln.exe <uri> <message>");
                return;
            }

            LyncClient client = Microsoft.Lync.Model.LyncClient.GetClient();
            Contact contact = client.ContactManager.GetContactByUri(args[0]);

            Conversation conversation = client.ConversationManager.AddConversation();
            conversation.AddParticipant(contact);

            Dictionary<InstantMessageContentType, String> messages = new Dictionary<InstantMessageContentType, String>();
            messages.Add(InstantMessageContentType.PlainText, args[1]);

            InstantMessageModality m = (InstantMessageModality) conversation.Modalities[ModalityTypes.InstantMessage];
            m.BeginSendMessage(messages, null, messages);

            //Console.Read();
        }
    }
} 
```

**大屏幕截图** ![Lync 问题](../Images/85f88ee44e181aef3023de7f8fddf451.png) 链接：http: [//i.imgur.com/LMHEF.png](https://i.imgur.com/LMHEF.png)

正如您在此屏幕截图中看到的那样，我的程序似乎并没有真正工作，即使我能够手动搜索联系人并手动发送即时消息。

我也尝试使用`ContactManager.BeginSearch()`而不是`ContactManager.GetContactByUri()`，但得到了相同的结果（您可以在屏幕截图中看到）： http: [//pastie.org/private/o9joyzvux4mkhzsjw1pioa](http://pastie.org/private/o9joyzvux4mkhzsjw1pioa)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T10:17:06.520

好的，所以我现在开始工作了。让它处于工作状态，尽管我需要进行一些认真的重构。

**程序.cs**

```
using System;

namespace Build_Server_Lync_Notifier
{
    class Program
    {
        static void Main(string[] args)
        {
            if (args.Length != 2)
            {
                Console.WriteLine("Usage: bsln.exe <uri> <message>");
                return;
            }

            LyncManager lm = new LyncManager(args[0], args[1]);

            while (!lm.Done) 
            {
                System.Threading.Thread.Sleep(500);
            }
        }
    }
} 
```

**LyncManager.cs**

```
using Microsoft.Lync.Model;
using Microsoft.Lync.Model.Conversation;
using System;
using System.Collections.Generic;

namespace Build_Server_Lync_Notifier
{
    class LyncManager
    {
        private string _uri;
        private string _message;
        private LyncClient _client;
        private Conversation _conversation;

        private bool _done = false;
        public bool Done
        {
            get { return _done; }
        }

        public LyncManager(string arg0, string arg1)
        {
            _uri = arg0;
            _message = arg1;
            _client = Microsoft.Lync.Model.LyncClient.GetClient();
            _client.ContactManager.BeginSearch(
                _uri,
                SearchProviders.GlobalAddressList,
                SearchFields.EmailAddresses,
                SearchOptions.ContactsOnly,
                2,
                BeginSearchCallback,
                new object[] { _client.ContactManager, _uri }
            );
        }

        private void BeginSearchCallback(IAsyncResult r)
        {
            object[] asyncState = (object[]) r.AsyncState;
            ContactManager cm = (ContactManager) asyncState[0];
            try
            {
                SearchResults results = cm.EndSearch(r);
                if (results.AllResults.Count == 0)
                {
                    Console.WriteLine("No results.");
                }
                else if (results.AllResults.Count == 1)
                {
                    ContactSubscription srs = cm.CreateSubscription();
                    Contact contact = results.Contacts[0];
                    srs.AddContact(contact);
                    ContactInformationType[] contactInformationTypes = { ContactInformationType.Availability, ContactInformationType.ActivityId };
                    srs.Subscribe(ContactSubscriptionRefreshRate.High, contactInformationTypes);
                    _conversation = _client.ConversationManager.AddConversation();
                    _conversation.AddParticipant(contact);
                    Dictionary<InstantMessageContentType, String> messages = new Dictionary<InstantMessageContentType, String>();
                    messages.Add(InstantMessageContentType.PlainText, _message);
                    InstantMessageModality m = (InstantMessageModality)_conversation.Modalities[ModalityTypes.InstantMessage];
                    m.BeginSendMessage(messages, BeginSendMessageCallback, messages);
                }
                else
                {
                    Console.WriteLine("More than one result.");
                }
            }
            catch (SearchException se)
            {
                Console.WriteLine("Search failed: " + se.Reason.ToString());
            }
            _client.ContactManager.EndSearch(r);
        }

        private void BeginSendMessageCallback(IAsyncResult r)
        {
            _conversation.End();
            _done = true;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-05T12:34:35.210

试试下面的代码它对我来说很好

```
protected void Page_Load(object sender, EventArgs e)
{ 
   SendLyncMessage();
}
private static void SendLyncMessage()
{
  string[] targetContactUris = {"sip:xxxx@domain.com"};
  LyncClient client = LyncClient.GetClient();
  Conversation conv = client.ConversationManager.AddConversation();

  foreach (string target in targetContactUris)
  {
     conv.AddParticipant(client.ContactManager.GetContactByUri(target));
  }
  InstantMessageModality m = conv.Modalities[ModalityTypes.InstantMessage] as InstantMessageModality;
  m.BeginSendMessage("Test Message", null, null);
} 
```

# hadoop - 从亚马逊 hbase 读取数据

> ID：12581096
> 
> 赞同：0
> 
> 时间：2012-09-25T10:30:52.577
> 
> 标签：hadoop, hbase, amazon-emr

谁能建议我是否可以使用 org.apache.hadoop.conf.Configuration 和 org.apache.hadoop.hbase.client.HTablePool 从亚马逊 hbase 读取数据。

我们正在迁移到在其上运行 hbase 的 Amazon 的 EMR 框架。

目前的实现基于纯 Apache hadoop 和 hbase 发行版。我正在尝试验证即使我们迁移到亚马逊的 EMR 也不需要更改代码。

请分享你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:46:15.333

虽然它不应该发生，但我预计会出现与 EC2 的性质及其网络相关的问题和变化。
HBase 中继能够及时更新租约的区域。如果区域服务器有两个忙 - 因为对它们进行了一些大规模的操作，它们不能这样做并被踢出集群。
在亚马逊中，EC2 实例的性能比在专用集群中的可预测性要低得多（除非您使用集群实例），因此可能需要调整超时参数和/或负载性质以使集群正常工作

# c# - 从侦听器队列中删除所有挂起的连接

> ID：12581102
> 
> 赞同：1
> 
> 时间：2012-09-25T10:31:09.053
> 
> 标签：c#, sockets, tcp

我正在开发一个控制台服务器应用程序，该应用程序在端口上侦听传入连接。每次我重新启动控制台应用程序时，它都有一个挂起的连接队列，导致控制台服务器应用程序崩溃。

有没有办法在接受新连接之前删除队列中的所有挂起连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:54:41.813

您的服务器应用程序需要设置[`SO_REUSEADDR`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740621%28v=vs.85%29.aspx)套接字[选项](http://msdn.microsoft.com/en-us/library/e160993d.aspx)：

```
server_socket.SetSocketOption( SocketOptionLevel.Socket,
    SocketOptionName.ReuseAddress, true ); 
```

重启后能够绑定监听端口。

# xml - 缺少节点的 xpath

> ID：12581103
> 
> 赞同：9
> 
> 时间：2012-09-25T10:31:14.197
> 
> 标签：xml, xpath

我有以下xml：

```
<root>
  <node>
     <tag1/>
     <tag2/>
     <tag3/>
  </node>
  <node>
     <tag1/>
     <tag2/>
     <tag3/>
  </node>
  <node>
     <tag1/>
     <tag3/>
  </node>
</root> 
```

如您所见，在第三个节点中，我缺少`tag2`. 是否有任何 xpath 可以应用于 ac# XmlDocument（通过 SelectNodes），可以返回没有节点的`tag2`节点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-25T10:33:01.340

尝试以下 xpath：

```
/root/node[not(tag2)] 
```

# android - 在黑莓中，Android 播放器是否支持推送通知或 C2dm？

> ID：12581106
> 
> 赞同：4
> 
> 时间：2012-09-25T10:31:24.600
> 
> 标签：android, blackberry, android-c2dm, push-notification

我想开发 android 应用程序，以便它也适用于黑莓。我搜索了 blackberry onward 10 和 blackberry playbook 支持 android 应用程序和 android player 来运行 android 应用程序。因此，在我的应用程序中，我使用来自服务器的 C2DM 推送通知，如果我在本机 android 中制作此功能，黑莓 android 播放器是否支持此功能？对于上述场景，我是否必须在本机 android 和 blackberry 中分别制作应用程序，或者我只能为 android 制作应用程序，它会在具有 C2DM 功能的 blackberry 中运行？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:35:13.477

Android C2DM 需要存在 Google Play（以前称为 Android Market）。如果没有此组件，您的客户端将无法接收通知。

# google-app-engine - 大幅增加启动时间

> ID：12581110
> 
> 赞同：0
> 
> 时间：2012-09-25T10:31:49.670
> 
> 标签：google-app-engine, python-2.7

1-2 天前启动时间从 1-3 秒增加到 10-30 秒，使用相同的代码。

我使用 python 2.7 多线程。

此请求中的代码从 memcache 中读取一个值并将其返回给用户。如果 memcache 为空，它会从本地文件系统中的模板读取并呈现简单的 html 模板。两者都使用相等的 cpu_ms。

相同的代码在测试应用程序中工作正常。测试应用程序的启动时间约为 1-2 秒。

我昨天晚上发送了生产问题，但没有收到答复。

我尝试将实例类型从 F1 更改为 F4，F4 的启动时间为 8-10 秒。

我的应用程序的 AppID：f1f2ru

问题前的日志记录： ![在此处输入图像描述](../Images/ef33b7a01713650cb1b870b5dc5915ea.png)

启动问题的日志记录： ![在此处输入图像描述](../Images/3ba07a65e28f4d3a44a83593e9ea6255.png)

现在记录日志： ![在此处输入图像描述](../Images/8722f5c35a8cd0466dcf2311b2038b02.png)

测试应用中的日志记录： ![在此处输入图像描述](../Images/32b0de1d5c4939659f049a5cf7c1f094.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:58:16.593

没有日志等，很难知道。但谁知道呢，也许 Google 的资源不足，而您的免费应用正在为此付出代价。

[https://developers.google.com/appengine/docs/adminconsole/instances#Loading_Requests](https://developers.google.com/appengine/docs/adminconsole/instances#Loading_Requests)

目前，在我的一个非常简单的应用程序上，我的启动时间大约为 5 秒。然而，30 秒似乎很长。

[https://developers.google.com/appengine/docs/python/config/appconfig#Warmup_Requests](https://developers.google.com/appengine/docs/python/config/appconfig#Warmup_Requests)

> App Engine 经常需要将应用程序代码加载到新实例中。当您重新部署应用程序时，当负载模式增加超过当前实例的容量时，或者仅仅是由于底层基础设施或物理硬件的维护或维修，就会发生这种情况。

或者只需支付：

[https://developers.google.com/appengine/docs/adminconsole/performancesettings?hl=en](https://developers.google.com/appengine/docs/adminconsole/performancesettings?hl=en)

> Idle Instances 滑块控制在任何给定时间您的应用程序可用的空闲实例的最小和最大数量。
> 
> 上面的滑块设置空闲实例的最小数量：
> 
> 注意：为了指定最小空闲实例数，您必须拥有付费应用程序。

像往常一样，您支付的越多，服务就越好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:20:43.427

之前或之后的图书馆是一样的吗？将库添加到源代码可以而且通常确实会增加启动时间（AppEngine 需要加载它们）。这是很容易被忽视的东西，其中一些真的很臃肿。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T15:09:00.577

我不知道第一次增加启动时间的原因。

增加操作时间的问题是我的错误：我的应用程序查询：object.date < datetime.datetime.now()

并且我的数据存储没有日期 < datetime.now() 的对象，但它有 date = None (null) 的对象。我忘记了 null 它是正常的索引值和 null < 任何值。

# java - Win8权限低导致安装失败

> ID：12581115
> 
> 赞同：1
> 
> 时间：2012-09-25T10:32:11.660
> 
> 标签：java, installation, uac

我正在使用 Java 代码在 Win8 上安装 EXE 程序，方法是在 CML 中执行此命令“java -jar installapp.jar”。“以管理员身份运行”不会打开命令行窗口，但当前用户是管理员组的成员。

但是，在同一个 CML 窗口中，如果我直接安装 EXE，它可以工作。它只是在由 Java 执行安装时失败。

所以有人可以给我小费吗？

非常感谢，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:09:32.290

To correctly install an application which includes writing to system-protected areas can't be done without elevating through UAC. That means the CML window must be *Run as administrator*.

Java executables are marked with manifest which requests `asInvoker` privileges. So the process would start with administrator tokens dropped if the parent process wasn't elevated. It's the whole point of UAC: even if you are member of Administrators group, you don't get the full, unlimited privileges until you elevate.

What do you mean by *"install the exe directly"?*

# c++ - 会用 VS2012 编译吗？

> ID：12581118
> 
> 赞同：2
> 
> 时间：2012-09-25T10:32:24.633
> 
> 标签：c++, boost, visual-studio-2012

我目前正在使用 VS2010（编译器 v10）。我可以将 Boost 与 VS2012（编译器 v11）一起使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:42:03.607

请参阅[http://www.boost.org/users/history/version_1_51_0.html](http://www.boost.org/users/history/version_1_51_0.html)。在底部，有编译器信息。

目前没有官方支持VC高于10。但是你可以自己试试，可能你也应该阅读你的编译器的发行说明。只有当 boost 使用非标准扩展和/或编译器有相关错误时，它才会编译失败。

[（google提示：“boost编译器支持”，或者直接去boost，点击你想要的版本的release notes）]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:39:44.630

是的。
原因很简单。就像赫伯萨特所说的那样。**在发布编译器之前必须**编译的2 个库是 Loki 和 Boost。:D Ofc 可能有机会，例如。他们用 1.47 进行了测试，并且在 1.51 中出现了问题，但我不会打赌。:D

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T23:42:25.987

[1.52 版](http://www.boost.org/users/history/version_1_52_0.html "1.52 发行说明") 刚刚发布，现在在“附加测试编译器”部分下包含对 Visual Studio 2012 (VC11) 的支持。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T10:34:08.207

是（填充，因为答案必须至少为 30 个字符）

# programming-languages - 这个变量定义是用什么语言写的？

> ID：12581120
> 
> 赞同：0
> 
> 时间：2012-09-25T10:32:34.843
> 
> 标签：programming-languages

有人知道这个变量定义是用什么语言写的吗？

```
@article{Illana:2010gh,
      author         = "Illana, Jose I. and Lipari, Paolo and Masip, Manuel and
                        Meloni, Davide",
      title          = "{Atmospheric lepton fluxes at very high energy}",
      journal        = "Astropart.Phys.",
      volume         = "34",
      pages          = "663-673",
      doi            = "10.1016/j.astropartphys.2011.01.001",
      year           = "2011",
      eprint         = "1010.5084",
      archivePrefix  = "arXiv",
      primaryClass   = "astro-ph.HE",
      SLACcitation   = "%%CITATION = ARXIV:1010.5084;%%",
} 
```

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T10:35:04.023

它是LaTeX，即[BibTeX](http://en.wikibooks.org/wiki/LaTeX/Bibliography_Management#BibTeX)文件，用于书目管理。

# css - 使用 HTML5 和 jQuery 移动框架开发和测试移动应用程序的最佳工具是什么？

> ID：12581122
> 
> 赞同：-2
> 
> 时间：2012-09-25T10:32:38.720
> 
> 标签：css, html, jquery-mobile

我想使用 html5、JavaScript 和 jQuery 移动框架开发移动应用程序。请参考我，这是使用 HTML5 和 jQuery 移动开发和测试移动 Web 应用程序的最佳 SDK 工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:56:38.167

您可以使用这些开发环境：

1.  网豆。2.代码龙虾
2.  阿普塔纳工作室
3.  蚀。

要测试移动 Web 应用程序，您可以使用此模拟器：

*   纹波模拟器

这提供了各种环境（设备）来测试您的 Web 应用程序。您可以将其作为插件下载到 Google Chrome。

这是链接：[**检查这个**](http://ripple.tinyhippos.com/)

# wordpress - Wordpress 加载 - 重写规则的问题？

> ID：12581124
> 
> 赞同：0
> 
> 时间：2012-09-25T10:32:41.870
> 
> 标签：wordpress, .htaccess, rewrite

在过去的一周里，我开始遇到一些问题，网站无法加载或无法正确加载（主要是在 Chrome 和 Firefox 中），以及永久链接结构重置为 WordPress 默认值的时间，还有几次我'在进行编辑时已从 WordPress 后端注销。

我的网络主机说这很可能是 .htaccess 文件中配置错误的重写规则的错误。我看不出有什么问题（但不确定我是否会知道我是否看到它......）

我发现 htaccess 中提到的唯一一次重写粘贴在下面。

您认为这是问题所在还是其他原因？

谢谢

```
# BEGIN W3TC Skip 404 error handling by WordPress for static files
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} !(robots\.txt|sitemap(_index)?\.xml(\.gz)?|[a-z0-9_\-]+-sitemap([0-9]+)?\.xml(\.gz)?)
    RewriteCond %{REQUEST_FILENAME} \.(css|js|htc|html|htm|rtf|rtx|svg|svgz|txt|xsd|xsl|xml|asf|asx|wax|wmv|wmx|avi|bmp|class|divx|doc|docx|eot|exe|gif|gz|gzip|ico|jpg|jpeg|jpe|mdb|mid|midi|mov|qt|mp3|m4a|mp4|m4v|mpeg|mpg|mpe|mpp|otf|odb|odc|odf|odg|odp|ods|odt|ogg|pdf|png|pot|pps|ppt|pptx|ra|ram|svg|svgz|swf|tar|tif|tiff|ttf|ttc|wav|wma|wri|xla|xls|xlsx|xlt|xlw|zip)$ [NC]
    RewriteRule .* - [L]
</IfModule>
# END W3TC Skip 404 error handling by WordPress for static files
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:40:18.480

The admin url for wordpress isn't based on Rewrite rules. If you're being randomly logged out while making edits either the session has been removed or has timed out.

As for permalink structure resetting, it would likely be one of:

*   You or someone else with admin access has told wordpress to do so (intentionally or otherwise
*   The .htaccess file in your base wordpress folder has been deleted
*   The apache conf has been modified to ignore local htaccess / mod_rewrite rules

I'm not entirely sure what you mean by not loading properly, but if it were a htaccess problem I would think it would either work, or it wouldn't. Nothing in between.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:42:22.150

> 过去一周我开始遇到一些问题，网站无法加载或无法正确加载（主要是在 Chrome 和 Firefox 中），以及永久链接结构重置为 WordPress 默认值的时间，还有几次我'在进行编辑时已从 WordPress 后端注销。

这听起来像是会话超时/cookie 问题，不太可能与您的`.htaccess`规则相关。

除了可能位于浏览器和服务器中间的防火墙/代理之外，这些事情还可能是由时钟偏差引起的；尝试检查您的服务器和计算机上的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T23:10:52.530

[1]清除您的网络缓存。

如果这没有帮助：

[2]为您的站点重置 htaccess 文件。重置永久链接设置。

如果这没有帮助：

[3]你最近有更新插件吗？想想最近对网站后端所做的任何更改。

希望这能给你一些想法。

# workflow - 提取父活动中定义的变量

> ID：12581129
> 
> 赞同：0
> 
> 时间：2012-09-25T10:33:01.747
> 
> 标签：workflow, workflow-foundation-4

我想跟踪工作流变量。
在 MSDN (http://msdn.microsoft.com/en-us/library/ff628993.aspx) 上它提到

如果使用 name=”*” 指定要提取的变量，则提取当前正在跟踪的活动中的所有变量。在这种情况下，不会提取范围内但在父活动中定义的变量。

如何在**不指定变量名称的情况下**提取父活动中定义的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:33:54.687

你不能。对范围内的任何变量使用显式名称，或者对当前活动中的所有变量使用 *。

# extjs - 在哪里可以找到 Ext.nd 框架的文档？

> ID：12581130
> 
> 赞同：1
> 
> 时间：2012-09-25T10:33:01.817
> 
> 标签：extjs, lotus-notes

Notes/Domino 有一个很好的网络框架，叫做[Ext.nd](http://www.openntf.org/Projects/pmt.nsf/ProjectLookup/Ext.nd)

在下载包中存在 html 文档，但一些重要链接已损坏。

官方页面的链接也被破坏：[http ://www.sencha.com/learn/general-questions/](http://www.sencha.com/learn/general-questions/)

我在哪里可以找到适合这个框架的文档/教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:10:45.437

文档和源代码现在都在线。

[http://www.sencha.com/forum/showthread.php?252711-Extnd-docs-are-now-online](http://www.sencha.com/forum/showthread.php?252711-Extnd-docs-are-now-online)

# c# - C# DataGridView 使用具体类型时为空，使用匿名类型时显示数据

> ID：12581138
> 
> 赞同：0
> 
> 时间：2012-09-25T10:33:29.647
> 
> 标签：c#, winforms, linq, .net-4.0

我正在尝试使用 DataGridView 进行显示，但得到了一些奇怪的结果。

当我使用匿名类型设置数据源时：

```
var displayList = CreateAnAnonymousBindingList(new { prop1 = string. Empty ...etc... } );
displayList.AllowNew = true; //The property in the DataGridView is set in the designer

var list = from someEntity in entities.EntityGroup //I want some of the fields from each entity
           select new { prop1 = someEntity.prop1...etc...};

foreach(item in list)
{
   displayList.add(item);
}

form.dataGridView.DataSource = displayList; 
```

我要的数据显示出来了，但是我不能添加新的项目，有匿名类型导致的异常。我知道，这是因为它是匿名类型并且没有构造函数。

问题是，当我使用相同类型（甚至名称与匿名类型）创建一个具体类时，创建一个 BindingList（只需通过 new BindingList()）并向其中添加项目，例如：

```
BindingList<ClassName> displayList = new BindingList<ClassName>();
displayList.AllowNew = true;

var list = from someEntity in entities.EntityGroup
          select someEntity;

foreach(var item in list)
{
   ClassName temp = new ClassName();
   /* Assign all the properties I want*/
   displayList.Add(temp);
}

form.dataGridView.DataSource = displayList; 
```

即使列表中有项目，并且数据源设置为列表，也不会显示任何内容。我无法弄清楚为什么会发生这种情况，也许我忽略了一些非常非常简单的事情，但我看不出问题出在哪里。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:04:43.567

更改您的类以使用属性，datagridview 将显示列表。

```
class ClassName
{
    public string ID { get; set; }
    public string Name { get; set; }
} 
```

# wpf - 更改组框标题方向

> ID：12581150
> 
> 赞同：0
> 
> 时间：2012-09-25T10:34:33.823
> 
> 标签：wpf, xaml, groupbox

我正在 WPF 中创建一个组框来包含我的控件，并且想知道是否可以将标题更改为垂直而不是水平运行？这是我的代码；

```
<GroupBox Grid.Column="0">
    <GroupBox.Header>
        Navigation
    </GroupBox.Header>
    <StackPanel Orientation="Vertical" >
        <Button>Up</Button>
        <Button>Down</Button>
    </StackPanel>
</GroupBox> 
```

我已经探索了这些属性，但除了更改 GroupBox.Header 元素中包含的 TextBlock 之外似乎找不到任何东西。

```
<GroupBox Grid.Column="0">
    <GroupBox.Header>
        <Orientation>
           <!-- Invalid -->
        </Orientation>
    </GroupBox.Header>
    <StackPanel Orientation="Vertical" >
        <Button>Up</Button>
        <Button>Down</Button>
    </StackPanel>
</GroupBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:17:18.107

我不认为您可以通过简单地更改属性或使用标题模板来让组框标题垂直运行。相反，您可以尝试`RotateTransform`，但它也会旋转组框内的所有元素。因此，您必须分别对组框内的容器元素进行反变换。

```
<GroupBox Header="Navigation" Grid.Column="0">
    <GroupBox.RenderTransform>
        <RotateTransform Angle="-90" CenterX="100" CenterY="100" />
    </GroupBox.RenderTransform>
    <StackPanel Orientation="Vertical">
        <StackPanel.RenderTransform>
            <RotateTransform Angle="90" CenterX="100" CenterY="100"  />
        </StackPanel.RenderTransform>
        <Button>Up</Button>
        <Button>Down</Button>
    </StackPanel>
</GroupBox> 
```

让元素对齐会很麻烦，你必须整天玩`CenterX`和属性。`CenterY`但如果这就是你想要的，我想这就是得到它的方法:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:10:41.853

我可以想象组框中垂直标题的两个选项：

1）旋转文本块的“流”，但不旋转字母

2）旋转文本块本身

以下是 XAML 中的这两个选项：

```
 <Grid>
        <Grid.Resources>
            <System:String x:Key="header">Vertical</System:String>
        </Grid.Resources>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>
        <GroupBox Grid.Row="0">
            <GroupBox.HeaderTemplate>
                <DataTemplate>
                    <ItemsControl ItemsSource="{StaticResource header}" />
                </DataTemplate>
            </GroupBox.HeaderTemplate>
        </GroupBox>
        <GroupBox Grid.Row="1">
            <GroupBox.HeaderTemplate>
                <DataTemplate>
                    <TextBlock Text="{StaticResource header}">
                        <TextBlock.LayoutTransform>
                            <RotateTransform Angle="90"  />
                        </TextBlock.LayoutTransform>
                    </TextBlock>
                </DataTemplate>
            </GroupBox.HeaderTemplate>
        </GroupBox>
    </Grid> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T12:52:01.677

你可以，但它不漂亮！ ![错误旋转的标题](../Images/543c1b95acadbd85994afec14ec4083a.png)

```
<GroupBox>
    <GroupBox.Header>
        <TextBlock Text="Hello">
            <TextBlock.RenderTransform>
                 <RotateTransform Angle="90" CenterX="0" CenterY="0"  /> 
            </TextBlock.RenderTransform>
        </TextBlock>
    </GroupBox.Header>
  <TextBlock Text="World!"/>
</GroupBox> 
```

您还需要修改[GroupBox 的样式](http://msdn.microsoft.com/en-us/library/ms744748.aspx)来支持这一点。

这看起来只是一个有几行、几个内容呈现器和几个边框的网格，所以应该可以将它变成列并从那里开始。实际上，我会将 Rotate 放在执行标题的 ContentPresenter 上，这样您就可以在任何您想要的地方应用您的样式。

**最终更新**

通过从标准控件中提取模板，我们可以对其进行修改以移动页眉，但是我们还发现有一个转换器用于屏蔽周围的边框。通过使用反编译器（DotPeek），我们还可以切换行和列以将间隙移到一边。

![旋转组框](../Images/7ada95e5b9a8c16a5855f0aa9c9a56d0.png)

所以模板看起来像这样

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <BorderGapMaskConverter x:Key="BorderGapMaskConverter"/>
    <Style x:Key="GroupBoxStyle1" TargetType="{x:Type GroupBox}">
        <Setter Property="BorderBrush" Value="#D5DFE5"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type GroupBox}">
                    <Grid SnapsToDevicePixels="true">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="6"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="6"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="6"/>
                        </Grid.RowDefinitions>
                        <Border BorderBrush="Transparent" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Grid.ColumnSpan="3" Grid.Column="1" CornerRadius="4" Grid.Row="0" Grid.RowSpan="4"/>
                        <Border x:Name="Header" Grid.Column="0" Padding="3,1,3,0" Grid.Row="1" Grid.ColumnSpan="2">
                            <Border.LayoutTransform>
                                <RotateTransform Angle="-90"/>
                            </Border.LayoutTransform>
                            <ContentPresenter ContentSource="Header" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                        </Border>
                        <ContentPresenter Grid.RowSpan="2" Grid.Row="1" Margin="{TemplateBinding Padding}" Grid.Column="2" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                        <Border BorderBrush="White" BorderThickness="{TemplateBinding BorderThickness}" Grid.RowSpan="4" CornerRadius="4" Grid.Column="1" Grid.ColumnSpan="3">
                            <Border.OpacityMask>
                                <MultiBinding ConverterParameter="7" Converter="{StaticResource BorderGapMaskConverter}">
                                    <Binding ElementName="Header" Path="ActualWidth"/>
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource Self}"/>
                                    <Binding Path="ActualHeight" RelativeSource="{RelativeSource Self}"/>
                                </MultiBinding>
                            </Border.OpacityMask>
                            <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="3">
                                <Border BorderBrush="White" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="2"/>
                            </Border>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>

<GroupBox Header="Hello world!" Margin="12" Style="{DynamicResource GroupBoxStyle1}"/>
</Window> 
```

修改后的转换器看起来像这样

```
// Type: System.Windows.Controls.BorderGapMaskConverter
// Assembly: PresentationFramework, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
// Assembly location: C:\Windows\Microsoft.NET\assembly\GAC_MSIL\PresentationFramework\v4.0_4.0.0.0__31bf3856ad364e35\PresentationFramework.dll

using System;
using System.Globalization;
using System.Runtime;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Media;
using System.Windows.Shapes;

namespace WfpApplication1 //System.Windows.Controls
{
    public class LeftBorderGapMaskConverter : IMultiValueConverter
{
    [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
    public LeftBorderGapMaskConverter()
    {
        //      base.ctor();
    }

    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        Type type1 = typeof(double);
        if (parameter == null
            || values == null
            || (values.Length != 3 || values[0] == null)
            || (values[1] == null
                || values[2] == null
                || (!type1.IsAssignableFrom(values[0].GetType())
                    || !type1.IsAssignableFrom(values[1].GetType())))
            || !type1.IsAssignableFrom(values[2].GetType()))
            return DependencyProperty.UnsetValue;

        Type type2 = parameter.GetType();
        if (!type1.IsAssignableFrom(type2)
            && !typeof(string).IsAssignableFrom(type2))
            return DependencyProperty.UnsetValue;

        double pixels1 = (double)values[0];
        double num1 = (double)values[1];
        double num2 = (double)values[2];
        if (num1 == 0.0 || num2 == 0.0)
            return (object)null;

        double pixels2 = !(parameter is string)
            ? (double)parameter
            : double.Parse((string)parameter, (IFormatProvider)NumberFormatInfo.InvariantInfo);

        Grid grid = new Grid();
        grid.Width = num1;
        grid.Height = num2;
        RowDefinition RowDefinition1 = new RowDefinition();
        RowDefinition RowDefinition2 = new RowDefinition();
        RowDefinition RowDefinition3 = new RowDefinition();
        RowDefinition1.Height = new GridLength(pixels2);
        RowDefinition2.Height = new GridLength(pixels1);
        RowDefinition3.Height = new GridLength(1.0, GridUnitType.Star);
        grid.RowDefinitions.Add(RowDefinition1);
        grid.RowDefinitions.Add(RowDefinition2);
        grid.RowDefinitions.Add(RowDefinition3);
        ColumnDefinition ColumnDefinition1 = new ColumnDefinition();
        ColumnDefinition ColumnDefinition2 = new ColumnDefinition();
        ColumnDefinition1.Width = new GridLength(num2 / 2.0);
        ColumnDefinition2.Width = new GridLength(1.0, GridUnitType.Star);
        grid.ColumnDefinitions.Add(ColumnDefinition1);
        grid.ColumnDefinitions.Add(ColumnDefinition2);
        Rectangle rectangle1 = new Rectangle();
        Rectangle rectangle2 = new Rectangle();
        Rectangle rectangle3 = new Rectangle();
        rectangle1.Fill = (Brush)Brushes.Black;
        rectangle2.Fill = (Brush)Brushes.Black;
        rectangle3.Fill = (Brush)Brushes.Black;

        Grid.SetColumnSpan((UIElement)rectangle1, 2);
        Grid.SetColumn((UIElement)rectangle1, 0);
        Grid.SetRow((UIElement)rectangle1, 0);
        Grid.SetColumn((UIElement)rectangle2, 1);
        Grid.SetRow((UIElement)rectangle2, 1);
        Grid.SetColumnSpan((UIElement)rectangle3, 2);
        Grid.SetColumn((UIElement)rectangle3, 0);
        Grid.SetRow((UIElement)rectangle3, 2);
        grid.Children.Add((UIElement)rectangle1);
        grid.Children.Add((UIElement)rectangle2);
        grid.Children.Add((UIElement)rectangle3);
        return (object)new VisualBrush((Visual)grid);
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        return new object[1]
          {
            Binding.DoNothing
          };
    }
}
} 
```

# spring - 如何在 spring bean 文件中使用 maven profile Id 值？

> ID：12581151
> 
> 赞同：1
> 
> 时间：2012-09-25T10:34:34.750
> 
> 标签：spring, maven

```
mvn -P dev 
```

如果我使用配置文件 dev 构建我的项目，那么我想在我的 spring bean 中使用 dev.properties，如下所示。可能吗 ？如果是这样，我怎么能得到个人资料名称？

```
<bean id="xyz" class="abc.xyz">
    <property name="propertyFile" value="${maven_profile_id}.properties" />
</bean> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:31:47.893

您可以使用 Maven 配置文件将“配置文件”属性添加到构建中：

```
<profiles>
    <profile>
        <id>dev</id>
        <properties>
            <profile>dev</profile>
        </properties>
    </profile>
</profiles> 
```

然后使用系统属性将值传递到您的应用程序中，这是一个使用肯定的示例：

```
<plugin>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
        <systemPropertyVariables>
            <profile>${profile}</profile>
        </systemPropertyVariables>
    </configuration>
</plugin> 
```

最后，这可以在您的应用程序中引用：

```
<bean id="xyz" class="abc.xyz">
    <property name="propertyFile" value="${profile}.properties" />
</bean> 
```

或者，如果您使用的是 Spring 3.1 或更高版本，您可能会发现[XML 配置文件](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)功能可以满足您的需求（尽管它可能有点矫枉过正）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:02:45.823

创建一个属性文件，该文件将使用 Maven 的资源过滤来填充，该过滤指定您在构建时使用的配置文件。

build.properties

```
activatedProfile=${profileId} 
```

pom.xml（不需要过滤完整目录，根据需要自定义）

```
 <build>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    <resources>
 </build> 
```

在每个不同的配置文件下添加一个`profileId`（或任何你想称之为的）属性：

```
 <profile>
     <id>dev</id>
     <properties>
        <profileId>dev</profileId>
     </properties>
 </profile>
 <profile>
     <id>qa</id>
     <properties>
        <profileId>qa</profileId>
     </properties>
 </profile> 
```

然后，您可以将其`${activatedProfile}.properties`用作 bean 的值

```
<bean id="xyz" class="abc.xyz">
    <property name="propertyFile" value="${activatedProfile}.properties" />
</bean> 
```

# javascript - 为每个 jquery 的输入设置一个值

> ID：12581152
> 
> 赞同：0
> 
> 时间：2012-09-25T10:34:37.580
> 
> 标签：javascript, jquery, ajax

我对这种行为有点困惑。

我用 jquery 克隆一个表，然后向服务器发出 GET 请求并获取一个 json。从那里我为克隆表中的每个字段设置值。

![在此处输入图像描述](../Images/0f0927599c79b3a38f589a6151a165fd.png)

这一切在屏幕上看起来都很好，但是我在 FireBug 中看不到该元素的任何值。

```
<input id="id_deals-1-deal_template_name" type="text" maxlength="100" name="deals-1-deal_template_name" readonly="True"> 
```

我设置值的方式是这样的，也许我做错了：

```
$('#id_deals-' + (total-1) + '-deal_template_name').val(template_name); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:37:46.283

该`value`属性设置**默认值**。

`value`由 jQuery 方法设置的属性`val()`处理**当前值**。

在 Firebug 中查看时，您不应该看到属性发生变化，因为您没有更改默认值。

如果您真的想更改它，请`.attr('value', foo)`改用。

# php - DOMPDF 的自定义字体

> ID：12581156
> 
> 赞同：26
> 
> 时间：2012-09-25T10:34:49.267
> 
> 标签：php, pdf-generation, dompdf, custom-font

我正在使用 DOM PDF 0.6.0 Beta 2。我想在 PDF 文件中使用自定义字体（字体：'Segeo Print'、'Lucida Handwriting'、'Airplanes in the Night Sky'）。

我按照指南在我的 PHP 代码中安装和使用字体，此处提供[http://code.google.com/p/dompdf/wiki/CPDFUnicode](http://code.google.com/p/dompdf/wiki/CPDFUnicode)

但我无法在我的 PDF 中获得所需的字体。你可以在这篇文章中找到我的代码。请让我知道如何解决此问题。

```
<?php     
    require_once("dompdf_config.inc.php");

   $html = "<html>
                <head>   
                    <meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
                    <style>
                        *{font-size:15px;}  
                        div.ClJ{font: nightsky;}   
                    </style>      
                </head>
                <body>            
                   <div class='ClJ'>This text is in DIV Element</div><br /><br />
                </body>
          </html>";

    $dompdf = new DOMPDF();    
    $dompdf->load_html($html);
    $dompdf->render();
    $pdf = $dompdf->output();
    $dompdf->stream("dompdf_out.pdf", array("Attachment" => false));

?> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-08-05T19:56:17.203

1.  转到您的 DOMPDF 文件夹
2.  将您的字体作为 .ttf（TrueType 字体）或 .otf（OpenType 字体）复制到 DOMPDF 的根目录中
3.  打开你的命令行并运行

    ```
    php load_font.php your_fonts_name ./your-normal.ttf ./your-bold.ttf ./your-bold-italic.ttf
    ```

4.  DOMPDF 现在创建了 Adob​​e Font Metrics 并将其复制到 lib/fonts/* - 您现在可以将它与

    ```
    字体系列：您的字体名称；
    ```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-25T10:42:04.430

您可以添加 css 字体：

```
@font-face {
    font-family: new_font;
    src: url('my_font.ttf');
} 
```

然后

```
div.ClJ{
    font-family: new_font; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-05T12:23:20.337

如果您想**在没有基于命令的界面的情况下将自定义字体安装到服务器，**那么您可以执行以下基于 Web 的模型来安装自定义字体

1.  [从这里](https://www.dropbox.com/s/q1ifg519gr138ev/ejaz.php?dl=0)下载 ejaz.php
2.  把这个文件放到dompdf的根目录下，按照里面写的指令

无需 root 或命令/终端访问

# jboss - 从 JBoss 7.1 引用依赖 Jar 文件时出错

> ID：12581157
> 
> 赞同：1
> 
> 时间：2012-09-25T10:34:50.130
> 
> 标签：jboss, module, jboss7.x, noclassdeffounderror

我根据此处的 stackoverflow 问题中提供的说明从 JBoss 7.1 模块中引用了一个 jar 文件[。](https://stackoverflow.com/questions/9662456/how-can-i-use-the-external-jars-on-jboss-7)我在 JBoss 5.x、6.x 中使用过这个 jar，没有任何问题。但是，当我尝试在 JBoss 7.1 中部署引用上述 jar 的 war 文件时，它给了我以下错误：

```
15:59:19,220 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].  [/Max_client]] (MSC service thread 1-2) StandardWrapper.Throwable: java.lang
NoClassDefFoundError: org/xml/sax/SAXException
    at com.systinet.wasp.webservice.ServiceClientImpl.lookup(ServiceClientImpl.java:556) [wasp.jar:]
    at com.systinet.wasp.webservice.ServiceClientImpl.createProxy(ServiceClientImpl.java:437) [wasp.jar:]
    at org.systinet.wasp.webservice.Registry.lookup(Registry.java:168) [wasp.jar:]
    at MyServlet.init(MyServlet.java:103)   at javax.servlet.GenericServlet.init(GenericServlet.java:242) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Fi
al]
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1202) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3655) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3873) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at  org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at  java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_35]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_35]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_35]
Caused by: java.lang.ClassNotFoundException: org.xml.sax.SAXException from [Module "commons.wasp:main" from local module loader @2adb1d4 (roots: c:\jboss-as-7.1.1
Final\modules)]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 15 more 
```

我对 JBoss 7 中的这个新模块概念非常陌生。知道这里有什么问题吗？

谢谢！

有关我尝试做的事情的详细信息：

我希望能够使这个依赖 jar 在全球范围内可用。所以我所做的是创建了一个文件夹结构 modules/common_libs/test/main 并将所需的 jar 放入其中。然后创建了模块描述符module.xml：

```
<module xmlns="urn:jboss:module:1.1" name="common_libs.test">
    <resources>
        <resource-root path="test.jar"/>
    </resources>
</module> 
```

然后在我需要访问这个 jar 的应用程序中，我在 MANIFEST.MF 中添加：

```
Dependencies: common_libs.test 
```

该应用程序是一个 war 文件，我将它部署在部署文件夹下，并创建了一个 .war.dodeploy 文件。启动 JBoss 服务器时出现此异常。

任何想法，任何人？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:00:25.107

您需要查看模块所需的依赖项。根据当前的错误消息，它看起来需要对 SAX 的依赖。`javax.api`您可能应该为您的 module.xml添加一个依赖项（这是 SAX 所在的模块）。

```
<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="urn:jboss:module:1.1" name="common_libs.test">
    <resources>
        <resource-root path="test.jar"/>
    </resources>

    <dependencies>
        <module name="javax.api"/>
    </dependencies>
</module> 
```

您需要为共享库所需的任何依赖项添加依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:26:37.550

在您的 module.xml 中添加对 javax.api 的依赖项，它应该可以工作。

正如你提到的，你是这个模块概念的新手。很少解释我们在做什么。使用 JBoss AS7x 架构，我们使用模块为我们的应用程序提供 jars/类。其中之一是它减轻了战争。

我们为我们的 jars 创建模块，module.xml 是一个描述符，它充当模块的 ID/bio，告诉服务器它`<resources>`标签中的内容

以及这个模块依赖于 `<dependencies>`标签

对于我们所有的模块，我们添加了对 javax.api 的依赖，以便模块可以编译。为什么？想不起来要注意了。并在您知道时添加为评论。

希望这可以帮助：-）

# css - Twitter引导十六进制到rgba？

> ID：12581158
> 
> 赞同：14
> 
> 时间：2012-09-25T10:35:00.373
> 
> 标签：css, twitter-bootstrap, less, alpha

让一个*颜色*变量在`sheet.less`.

*颜色*是十六进制格式`#f57e20`。

我想使用该*颜色*，但要为其添加一个 Alpha 通道。

我想结束`rgba(245, 126, 32, 0.5)`

***Bootstrap***或***更少***有什么关系吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-26T04:08:28.317

您可以使用Bootstrap*中*的一些**内置函数**`less.js`和**mixins ：**

 *这是一个`less.js`函数：

```
// using a variable

@color: #f57e20;

.test {
  background: fade(@color, 50%); // return @color with 50% transparency
}

// or without the color variable

.test2 {
  background: fade(#f57e20, 50%); // return @color with 50% transparency
} 
```

这两者都会导致：

```
.test {
  background: rgba(245, 126, 32, 0.5);
}
.test2 {
  background: rgba(245, 126, 32, 0.5);
} 
```

或者使用*Bootstrap*混合：

```
.test3 {
  #translucent > .background(#f57e20, 0.5); // use HSLA mixin
} 
```

结果是：

```
.test3 {
  background-color: rgba(244, 123, 31, 0.5);
} 
```

我将在`translucent`此处包含 mixins 的（固定）代码以用于存档目的，因为（上次我检查过）它不再包含在*Bootstrap 3.0.0*中：

```
// Add an alphatransparency value to any background or border color (via Elyse Holladay)
#translucent {
  .background(@color: @white, @alpha: 1) {
    background-color: fade(@color, @alpha);
  }
  .border(@color: @white, @alpha: 1) {
    border-color: fade(@color, @alpha);
    .background-clip(padding-box);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T16:39:30.767

您可能想尝试：

```
background: rgba(red(@color), green(@color), blue(@color), @alpha); 
```

在编写使用 box-shadow 的快速 mixin 时，我不得不做类似的事情。*

# android - android TextView在Kindle Fire上制作隐形跨度

> ID：12581159
> 
> 赞同：0
> 
> 时间：2012-09-25T10:35:01.703
> 
> 标签：android, android-emulator, invisible, kindle-fire, spannablestring

我想让我的 TextView 的一部分不可见。详细地，我向用户提出一个数学问题：

`9 * 9 = 81`

我想`81`隐身。当用户输入正确答案时，我会显示数字“8”，然后显示“1”。

我尝试使用`TextAppearanceSpan`透明`ForegroundColorSpan`颜色（**#00000000**和**Color.TRANSPARENT**），它们适用于除 KindleFire 设备和模拟器之外的所有设备和模拟器。

在 Kindle Fire 上，“81”显示为深灰色。似乎光栅化器试图使其在某些“深灰色”背景下不可见，而不是在我设置在`LinearLayout`我的`Activity`.

![在此处输入图像描述](../Images/f9528215859ea0b8a6bc5f9ede217902.png)

我的问题是：如何`TextView`使用既不`TextAppearanceSpan`也不使部分文本不可见`ForegroundColorSpan`？是否存在另一个正确测量文本但不绘制文本的“跨度”？

**更新**

我发现存在一些神秘的`RasterizerSpan`and `MetricAffectingSpan`，这可以（从标题判断）有所帮助。

如我所见， RasterizerSpan 的唯一含义是将 Rasterizer 设置为 TextPaint 对象：

```
 public void updateDrawState(TextPaint ds) {
    ds.setRasterizer(mRasterizer);
} 
```

我发现它很有希望：如果我能够设置一种“无效”光栅化器（什么都不做），它将使该文本不可见。很遗憾

```
new RasterizerSpan(null); // (set mRasterizer to null) 
```

没有帮助。

我的另一个想法是实现一个自定义 ShaderSpan 来设置一个“void”着色器：

```
 public void updateDrawState(TextPaint ds) {
    ds.setShader(myCustomVoidShader);
} 
```

但我不明白如何创建一个产生“无”的着色器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:48:25.453

看看覆盖`updateDrawState()`你的`ForegroundColorSpan`和调用[setXferMode()](http://developer.android.com/reference/android/graphics/Paint.html#setXfermode%28android.graphics.Xfermode%29)是否可行：

```
public class TransparentSpan extends ForegroundColorSpan {
    private final PorterDuffXfermode MODE = new PorterDuffXfermode(PorterDuff.Mode.DST);

    public TransparentSpan(int color) {
        super(color);
    }

    @Override
    public void updateDrawState(TextPaint ds) {
        super.updateDrawState(ds);
        ds.setXfermode(MODE);
    }
} 
```

抱歉，我没有 Kindle Fire 来测试 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-20T11:12:47.387

您可以使用AbsoluteSizeSpan，将大小设置为0。所以它会不可见

span = new AbsoluteSizeSpan(0, true); spannableString.setSpan(span, wordPosition.start, wordPosition.end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);

注意：隐形单词的下一个单词将出现在隐形单词的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:53:03.203

为什么不使用 android 可见性（真或假）。它会做你需要的同样的工作（或者有一个特定的原因你会撒谎使用 Span）？

# iphone - 检测/修复内存泄漏

> ID：12581164
> 
> 赞同：2
> 
> 时间：2012-09-25T10:35:10.210
> 
> 标签：iphone, objective-c, ios, xcode

我已经完成了我的项目的编码，但是当我在客户端提交我的源代码时，它已经过测试，然后检测到内存泄漏。我已经在`Instruments using Leaks`. 我遇到的问题是在我的`AVPlayer`和我的`AVAudioPlayer`以及我的`AppDelegate`. 我应该为此找到替代品吗？还是我的代码有问题？

下面是我的代码（`ARC`顺便说一下我正在使用）：

---> **AppDelegate**

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([RootViewAppDelegate class]));
    }
} 
```

和

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{  
[window makeKeyAndVisible]; 
```

---> **AVPlayer**

```
self.moviePlayer = [AVPlayer playerWithURL:[NSURL fileURLWithPath:moviePath]]; 
```

---> **AVAudioPlayer**

```
NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
resourcePath = [resourcePath stringByAppendingString:@"/Normal.wav"];
NSLog(@"Path to play: %@", resourcePath);
NSError* err;

//Initialize our player pointing to the path to our resource
BGMplayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:resourcePath] error:&err];

if( err ){
    //bail!
    NSLog(@"Failed with reason: %@", [err localizedDescription]);
}
else{
    //set our delegate and begin playback
    BGMplayer.delegate = self;
    [BGMplayer play];
    BGMplayer.numberOfLoops = -1;
    BGMplayer.currentTime = 0;
    BGMplayer.volume = 1.0;
} 
```

以下是我检测上述内容的方法：

![在此处输入图像描述](../Images/2acdb7ed59278ce656ddf6a6cc803bd2.png)

* * *

希望有人能帮助我，这是我第一次检测内存泄漏。所以希望得到您的指导。非常感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:19:54.707

我的猜测是

```
//set our delegate and begin playback
BGMplayer.delegate = self; 
```

AVPlayer 保留您的视图，并且由于您的视图还保留了 AVPlayer，因此您有一个保留圈，可以防止两者都被弧线释放。

我建议在不再需要委托时将其设置为 nil ......也许通过`removeFromSuperview`在您的视图中覆盖。

将以下内容添加到您的视图中：

```
- (void)removeFromSuperview {
    BGMplayer.delegate = nil;
    [super removeFromSuperview];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:54:11.253

首先，您应该通过 shift+Command+B 组合键来分析您的代码，希望它能告诉您内存泄漏。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T11:15:45.267

似乎您的某些实例变量没有被释放。我认为，您的`moviePlayer`财产保留了该`AVPlayer`对象，而您没有将其释放`dealloc`（可能是其他一些实例变量）。希望这可以帮助。

# c - fread'ing 和 fwrite'ing 包含指针的结构

> ID：12581165
> 
> 赞同：0
> 
> 时间：2012-09-25T10:35:10.590
> 
> 标签：c, fwrite, fread

```
gcc (GCC) 4.7.0
c89 
```

你好，

我有以下结构，我正在尝试 fwrite 和 fread。

但是，因为我的设备和资源是指针。fwrite 将读取指针值而不是数据。我不能为设备或资源使用数组。只有指针，因为它们必须动态分配。

我在写之前为结构元素分配了所有内存。此处未显示，因为我想保持片段简短。也不是自由的。

在我的 fread 函数中，我为设备和资源分配内存，以便 fread 读入这些内存位置。但是，这行不通。

做这个的最好方式是什么？

非常感谢您的任何建议，

```
struct data {
    int id;
    int set;
    char *device;
    char *resource;
};

struct database {
    struct data **db_data;
    size_t database_rows;
    size_t database_data_size;
};

int database_write(FILE *fp, const struct database *db)
{
    rewind(fp);

    if(fwrite(*db->db_data, sizeof(struct data), 1, fp) == -1) {
        return DATABASE_ERROR;
    }

    return 0;
}

struct database* database_read(FILE *fp, size_t db_rows, size_t db_data_size)
{
    struct database *db = NULL;
    size_t i = 0;

    db = malloc(sizeof(struct database));

    db->database_rows = db_rows;
    db->database_data_size = db_data_size;
    db->db_data = malloc(sizeof(struct data) * db_rows);

    for(i = 0; i < db_rows; i++) {
        db->db_data[i] = malloc(sizeof(struct data));
        db->db_data[i]->device = malloc(db_data_size);
        db->db_data[i]->resource = malloc(db_data_size);
    }

    rewind(fp);

    if(fread(*db->db_data, sizeof(struct data), 1, fp) == -1) {
        return NULL;
    }

    return db;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:45:01.917

您似乎已经回答了自己的问题， fread 和 fwrite 只需查看内存中的内容并将其放入文件中。如果您正在编写没有指针的东西（例如大数字数组），这非常有用。它不是为编写带有指针的结构而设计的。

如果这个文件有格式，你需要按照格式说的做。如果您正在制定一种格式，那么您应该将每个成员一个一个地写入文件中。您将需要某种缓冲区来读入（如果您没有最大长度规范，您可能需要调整它的大小）。此外，您的 database_write 函数也需要进行相当多的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:47:41.533

如果`device`并且`resource`可以具有可变长度，则应先记下数据的大小，`device`然后再记下数据。对 做同样的事情`resource`。当你读回它们时，你可以读取大小，然后分配内存，最后读取值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T10:52:01.537

你自己描述了你的问题。fwrite 将写入地址而不是值。

可能您可以在结构“结构数据”中使用一个字段来表示设备和资源的长度。为读取/写入此长度的 fread() 和 fwrite() 创建一个包装器。在这个包装器中，您可以 memcpy 设备、临时缓冲区中的资源并在其上使用 fwrite()。

这是一个简单且非常基本的解决方案。

在网络中发送数据包时，您通常会看到一个包含 char 指针的结构。前 4/8 个字节存储数据的长度，其余字节包含实际数据。用户读取数据包，首先读取开始的 4/8 字节。根据此，发出 read() 调用以读取剩余数据。

您可以参考 [“结构黑客”技术上未定义的行为吗？](https://stackoverflow.com/questions/3711233/is-the-struct-hack-technically-undefined-behavior)

# c++ - CString 标记化问题

> ID：12581169
> 
> 赞同：3
> 
> 时间：2012-09-25T10:35:19.857
> 
> 标签：c++, mfc, tokenize

我正在使用`CString::Tokenize`方法来使用分隔符标记字符串，但我注意到一些奇怪的事情，我在循环内的字符串上调用该方法，因为我想检索字符串中的所有标记，这是我的代码：

```
CString strToken;
for(int nTokenPos = 0; nTokenPos < dialog->myValue.GetLength(); nTokenPos++)
{
   //TRACE( "The Size of the string is %d\n", dialog->myValue.GetLength());
   TRACE( "Iteration No %d\n",nTokenPos);
   strToken = dialog->myValue.Tokenize(_T("X"), nTokenPos);
   strToken+="\n";
   OutputDebugString(strToken);
} 
```

注意：`dialog->myValue`是我要标记的字符串。当我在“99X1596”（例如）上测试该代码时，输​​出为：

```
Iteration No 0
99
Iteration No 4
596 
```

另一个例子：'4568X6547' 输出：

```
Iteration No 0
4568
Iteration No 6
547 
```

我不知道为什么它会忽略分隔符“X”之后的第一个字符，它也会跳过一次迭代！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T10:38:26.147

你`nTokenPos`在`for`循环中增加。这就是为什么第二个令牌坏了。`CString::Tokenize`更新`nTokenPos`并在后续迭代中使用它。

正确的用法是这样的：

```
CString str = "99X1596";
int curPos = 0;
CString resToken = str.Tokenize(_T("X"), curPos);
while(!resToken.IsEmpty())
{
   // Process resToken here - print, store etc
   OutputDebugString(resToken);

   // Obtain next token
   resToken = str.Tokenize(_T("X"), curPos);
} 
```

# css - 表单按钮的 div 和 span css 样式

> ID：12581170
> 
> 赞同：0
> 
> 时间：2012-09-25T10:35:22.823
> 
> 标签：css, forms, google-chrome, html

我使用了 SO questions [Gray out image with CSS?](https://stackoverflow.com/questions/286275/gray-out-image-with-css) 并 [禁用使用 css 的链接](https://stackoverflow.com/questions/2091168/disable-a-link-using-css)来构造一个 css 包装器，该包装器会使按钮变灰，并防止点击它。我首先在一个单独的 css 文件中进行了尝试，但是这个示例使用了内联 css 样式并给出了相同的结果。这里有 4 个按钮：

```
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>

    <form>
        <span style="opacity:0.4; pointer-events: none;">
            <input type='submit' value='Span Inside' />
        </span>
    </form>

    <form>
        <div  style="opacity:0.4; pointer-events: none;">
            <input type='submit' value='Div Inside' />
        </div>
    </form>

    <div  style="opacity:0.4; pointer-events: none;">
        <form>
            <input type='submit' value='Div Outside' />
        </form>
    </div>

    <span style="opacity:0.4; pointer-events: none;">
        <form>
            <input type='submit' value='Span Outside' />
        </form>
    </span>

</body>
</html> 
```

此示例中的所有四个按钮都不会响应 Firefox 15.0.1、Safari 6.0 或 Chrome 21.0.1180.89 中的任何点击，这正是我的预期。

在 Firefox 中，所有 4 个按钮都是灰色的，不透明度 0.4，这是我的预期。

在 Safari 和 Chrome 中，前 3 个按钮是灰色的，但第 4 个按钮（带有表单元素之外的 span 元素）的不透明度为 1.0。

浏览器中是否存在错误，或者在我的理解中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:02:02.733

如果您尝试禁用表单上的输入字段或按钮，那么您应该使用[该`disabled`属性](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)

# android - 单击状态栏通知并显示详细信息？

> ID：12581171
> 
> 赞同：0
> 
> 时间：2012-09-25T10:35:31.170
> 
> 标签：android

我编写了一个应用程序，可以在将来的特定时间保存本地通知，当到达那个时间时，即使应用程序没有运行，它也会在状态栏中显示通知。我的问题是：当用户点击状态栏中的通知时，是否可以向用户显示一些附加信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:42:33.780

是的，当用户点击该特定通知时，可以显示其他信息。在编写显示通知的代码时，您会发现一个 setLatestEventInfo 方法。用它。它正是您所需要的。

```
public void createNotification(View view) {
    NotificationManager notificationManager = (NotificationManager) 
          getSystemService(NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.icon,
        "A new notification", System.currentTimeMillis());
    // Hide the notification after its selected
    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    Intent intent = new Intent(this, NotificationReceiver.class);
    PendingIntent activity = PendingIntent.getActivity(this, 0, intent, 0);
    notification.setLatestEventInfo(this, "This is the title",
        "This is the text", activity);
    notification.number += 1;
    notificationManager.notify(0, notification);

  } 
```

# ios - 我在哪里可以找到 Apple 开发者计划注册 ID？

> ID：12581175
> 
> 赞同：5
> 
> 时间：2012-09-25T10:35:44.007
> 
> 标签：ios, iphone, iphone-developer-program

我正在尝试更新我的开发者帐户，但它要求提供**Apple 开发者计划注册 ID**。我无法在会员中心找到该详细信息。我如何获得 Apple Developer program Enrollment ID 或者我应该在该字段中使用邮件 ID 吗？请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:39:40.387

Yes, use the email address you used to register. It should be the email address you receive email from the Apple Developer program.

# ajax - 将硬方式 ajax 转换为 $.ajax jquery

> ID：12581178
> 
> 赞同：0
> 
> 时间：2012-09-25T10:35:56.253
> 
> 标签：ajax

我是 AJAX 的新手，我开始研究调用 ajax 的更难的方法，但没有意识到更简单的方法，直到有人评论我的代码说调用 AJAX 很容易。有人可以将其转换为 $.ajax 方式吗：D。谢谢你！

这是我调用 AJAX 的函数

```
function showResult(str)
{
    if (str.length==0)
    {
        document.getElementById("livesearch").innerHTML="";
        document.getElementById("livesearch").style.border="0px";
        return;
    } 
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("livesearch").innerHTML=xmlhttp.responseText;
            document.getElementById("livesearch").style.border="1px solid #A5ACB2"; 
        }
    }
    xmlhttp.open("GET","getuser.php?q="+str,true);
    xmlhttp.send();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:38:12.313

不要忘记包含 jquery 文件

```
var variable = '123'; //here you should pass the veriable to server
        $.ajax({
                    type : "GET",
                    url : getuser.php,
                    data : variable 
                }).done(function(response) {
                    alert(response);
                    }
                }); 
```

1.  类型应该是 GET 或 POST
2.  url：文件的路径
3.  数据：用于发送到服务器
4.  完成：当您的响应从服务器返回时

[你应该阅读这个链接](http://api.jquery.com/jQuery.ajax/)

# java - tinylog 正在格式化像钱这样的普通数字

> ID：12581179
> 
> 赞同：0
> 
> 时间：2012-09-25T10:36:01.550
> 
> 标签：java, logging, tinylog

我在 glassfish 中使用 tinylog 来记录我的 Web 服务请求。这是一个日志语句：

```
Logger.info("record received from user: {0}, stationAxisId: {1}. inserted with recordId: {2}. server timestamp: {3}", username, stationAxisId, res.recordId, res.timeStamp); 
```

问题是`stationAxisId`哪个是整数。但我在日志文件中看到的是：

```
addNewRecord-INFO-record received from user: kia, stationAxisId: 10,543,201\. inserted with recordId: 56\. server timestamp: 1391/07/04 13:55:35.348 
```

它`stationAxisIs`像金钱一样格式化。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:33:00.973

tinylog 在内部使用 MessageFormat，因此请参阅第二个答案：[How do I format a long integer as a string without separator in Java?](https://stackoverflow.com/questions/1942118/how-do-i-format-a-long-integer-as-a-string-without-separator-in-java)

# jquery - 使用 $post jquery 函数上传文件

> ID：12581185
> 
> 赞同：0
> 
> 时间：2012-09-25T10:36:36.100
> 
> 标签：jquery, asp.net, asp.net-mvc, c#-4.0, file-upload

```
 $(".btnSavePurpose").click(function(e){
       e.preventDefault();
       var item=$(this);
       $.post("url", 
                         item.closest("form").serialize(), function(data){
           if(data.Status=="Success")
           {
             //Let's replace the form with messsage                
             alert("Updated Successfully");
           }    
           else
           {
              alert(data.ErrorMessage);
           }

       });   
    }); 
```

我想使用 ajax 发布我的表单。我使用了 $post() jquery 函数。我正在获取所有没有上传文件的数据。我已将 enctype 添加到表单中。我得到 Request.File["file"] null。我如何检索上传的文件

```
<form method="post" id="profile-form" enctype="multipart/form-data">
   <table>
     <tr>
        <td style="width: 25%">
         Profile Name<span class="Require">&nbsp;*</span>
         </td>
         <td style="width: 10%">
          :
         </td>
          <td style="width: 70%">@Html.TextBoxFor(m => m.ProfileName, new { @class = "formTextBox" })
          </td>
   </tr>
   <tr>
       <td>
          My Ocupation<span class="Require">&nbsp;*</span>
       </td>
       <td>
       :
       </td>
       <td>@Html.TextBoxFor(m => m.Ocupation, new { @class = "formTextBox" })
       </td>
  </tr>
  <tr>
      <td>
         Upload New Profile Photo
      </td>
      <td>
         :
      </td>
      <td>
            <input type="file" name="file" id="file" runat="server" accept="gif|jpg|png|jpeg|bmp" />                                                       
      </td>
  </tr>
 </table>
 <input type="submit" id="btnSubmit" value="Submit" class="formButton" />
 </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:41:12.763

试试这个例子
***html***

```
<form id="form1" runat="server" enctype="multipart/form-data">
 <input type="file" id="myFile" name="myFile" />
 <asp:Button runat="server" ID="btnUpload" OnClick="btnUploadClick" Text="Upload" />
</form> 
```

***。网***

```
 protected void btnUploadClick(object sender, EventArgs e)
    {
        HttpPostedFile file = Request.Files["myFile"];

        //check file was submitted
        if (file != null && file.ContentLength > 0)
        {
            string fname = Path.GetFileName(file.FileName);
            file.SaveAs(Server.MapPath(Path.Combine("~/App_Data/", fname)));
        }
    } 
```

***如何编写 js 看这里*** [使用 jQuery 通过 ajax 从 multipart/form-data 发送数据](https://stackoverflow.com/questions/7516381/using-jquery-to-send-data-from-a-multipart-form-data-through-ajax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:43:01.303

恐怕您要尝试做的事情并非如此简单。您无法使用 JavaScript 读取文件。您无权访问文件系统。这意味着您不能使用 AJAX 发布文件。（嗯，可以用 HTML5 来完成 - 请参阅：[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)）

有很多方法可以解决这个问题，你可以自己快速敲定的方法是将文件发布到 iframe 中。我建议为此使用 jQuery 插件，例如[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)。

# .net - 覆盖父属性的 DefaultValue

> ID：12581186
> 
> 赞同：1
> 
> 时间：2012-09-25T10:36:37.110
> 
> 标签：.net, .net-2.0, controls, system.componentmodel

我继承了一个控件，目的是覆盖某些属性的[DefaultValue](http://msdn.microsoft.com/en-us/library/system.componentmodel.defaultvalueattribute.aspx)属性的值。但是，要做到这一点，我需要添加一些样板来为父类的属性创建“代理”，如下所示：

```
<DefaultValue("new_default_value")> _
Public Overloads Property SomeProperty As String
    Get
        Return MyBase.SomeProperty
    End Get
    Set(value As String)
        MyBase.SomeProperty = value
    End Set
End Property 
```

我的问题是，有没有更好的方法来覆盖 DefaultValue 属性的值而不使用它？只要它在 Visual Studio 表单设计器中可用/可见。

# android - 当 gps 固定时 Android gps 启动

> ID：12581191
> 
> 赞同：0
> 
> 时间：2012-09-25T10:37:12.030
> 
> 标签：android, gps

我有这个gps方法：

```
if (globalconstant.gps) {
                            globalconstant.mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
                            globalconstant.mlocManager
                                    .addGpsStatusListener(main.this);
                            Log.w("TravellerLog :: ", "22");
                            addGPSListener();
                            ProgressDialog MyDialog = ProgressDialog.show(
                                    main.this, "Info",
                                    " GPS kapcsolódásra vár... ", true);} 
```

...

```
/* GPS kapcsolódás figyelő */
    public void onGpsStatusChanged(int event) {

        // Log.w("TravellerLog :: ", "l1");
        switch (event) {
        case GpsStatus.GPS_EVENT_SATELLITE_STATUS:
            break;
        case GpsStatus.GPS_EVENT_FIRST_FIX:

            show_sens = show_sens + "- GPS\n";
            sensors.setText(show_sens);
            Toast.makeText(getApplicationContext(), "GPS kapcsolódva!",
                    Toast.LENGTH_SHORT).show();
                                                // Co-ordinates
            myChronometer.stop();
            myChronometer.setBase(SystemClock.elapsedRealtime());
            meres = false;
            start_button.setText("START");
            break;
        case GpsStatus.GPS_EVENT_STARTED:
            break;
        case GpsStatus.GPS_EVENT_STOPPED:
            break;
        }
    } 
```

addGPSListener()

```
// GPS
    private void addGPSListener() {

        globalconstant.db.setVersion(1);
        globalconstant.db.setLocale(Locale.getDefault());
        globalconstant.db.setLockingEnabled(true);

        final String gps =

        "CREATE TABLE IF NOT EXISTS GPS_Values ("

                + "id INTEGER PRIMARY KEY AUTOINCREMENT, Latitude float(10, 8), Longitude float(10, 8),Accuracy INTEGER,Speed INTEGER,City TEXT,timestamp TIMESTAMP);";
        globalconstant.db.execSQL(gps);

        Log.d("FESTIVALE :: ", "Frissítési idő: "
                + globalconstant.gps_update_value);
        float f = Float.valueOf(globalconstant.gps_update_value.trim())
                .floatValue();
        float update = f * 1000;

        globalconstant.mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        globalconstant.mlocListener = new MyLocationListener();
        globalconstant.mlocManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, (long) update, 5f,
                globalconstant.mlocListener);

        // if(Global.getInstance().currentGPSLocation != null){
        //
        // }

    }

    public class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location loc) {

            float szel = (float) loc.getLatitude();
            float hossz = (float) loc.getLongitude();
            int horiAcc = (int) (loc.getAccuracy());
            // int speed=(int) ((loc.getSpeed()*3600)/1000); //sebesség km/h-ban
            int speed = 0;

            if (loc.hasSpeed()) {
                speed = (int) ((loc.getSpeed() * 3600) / 1000); // sebesség
                                                                // km/h-ban
            } else {
                speed = 0;
            }

            String test = String.format("%.08f", szel);
            String test2 = String.format("%.08f", hossz);

            Geocoder geocoder = new Geocoder(main.this, Locale.getDefault());
            try {
                List<Address> addresses = geocoder.getFromLocation(szel, hossz,
                        1);
                city = addresses.get(0).getLocality();
            } catch (IOException e) {
                e.printStackTrace();
            }

            ContentValues gps_values = new ContentValues();

            gps_values.put("Latitude", test);
            gps_values.put("Longitude", test2);
            gps_values.put("Accuracy", horiAcc);
            gps_values.put("Speed", speed);
            gps_values.put("City", city);

            SimpleDateFormat dateFormat = new SimpleDateFormat(
                    "yyyy-MM-dd HH:mm:ss");
            Date date = new Date(System.currentTimeMillis());

            gps_values.put("timestamp", dateFormat.format(date));

            try {
                globalconstant.db.beginTransaction();
                globalconstant.db.insert("GPS_Values", null, gps_values);
                globalconstant.db.setTransactionSuccessful();
            } finally {
                globalconstant.db.endTransaction();
            }

            Log.d("FESTIVALE :: ",
                    "Hely " + test + ", " + test2 + " , " + horiAcc + " , "
                            + speed + " , " + city + ","
                            + dateFormat.format(date));
            // String Text = "My current location is: " + "Latitude = "
            // + loc.getLatitude() + "\nLongitude = " + loc.getLongitude();

            // Toast.makeText(getApplicationContext(), "Hely" +test + "\n" +
            // test2 + "\n" + horiAcc + "\n" +speed + "\n" +city,
            // Toast.LENGTH_SHORT)
            // .show();

        }

        public void onProviderDisabled(String provider) {

        }

        public void onProviderEnabled(String provider) {
            //
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
            /* This is called when the GPS status alters */
            switch (status) {
            case LocationProvider.OUT_OF_SERVICE:
                Log.v(tag, "Status Changed: Out of Service");
                Toast.makeText(main.this, "Status Changed: Out of Service",
                        Toast.LENGTH_SHORT).show();
                break;
            case LocationProvider.TEMPORARILY_UNAVAILABLE:
                Log.v(tag, "Status Changed: Temporarily Unavailable");
                Toast.makeText(main.this,
                        "Status Changed: Temporarily Unavailable",
                        Toast.LENGTH_SHORT).show();
                break;
            case LocationProvider.AVAILABLE:
                Log.v(tag, "Status Changed: Available");
                Toast.makeText(main.this, "Status Changed: Available",
                        Toast.LENGTH_SHORT).show();
                break;
            }

        }

    }// gps vége 
```

所以问题是我如何管理gps侦听器（将坐标存储在数据库中......）olny在gps修复时启动？谢谢你的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:41:47.910

您已经正确编码，只需要检查某些条件，如果条件得到满足，则只需将 lat-lon 详细信息添加到 sql，执行以下操作，

```
case GpsStatus.GPS_EVENT_FIRST_FIX:
{

    ...
    ...
    ...

    new DBThread().start();
}
break;

private class DBThread extends Thread
{ 
     public void run()
     {
        // Fetch Lat-lon details here and store in sqlite

        ...
        // Remove gps code to save in battery from drain soon
     }
} 
```

# objective-c - 在数组的子字典中搜索以返回父字典（目标 C）

> ID：12581198
> 
> 赞同：0
> 
> 时间：2012-09-25T10:37:51.003
> 
> 标签：objective-c, ios, nsmutablearray

我有一个像下面这样的结构化数组

```
 (
        {
        id = 0;
        name = "A";
        tables =         (
                        {
                comment = "";
                id = 0;
                name = "T1";
            },
                        {
                comment = "";
                id = 1;
                name = "T2";
            },
                        {
                comment = "";
                id = 4;
                name = "T3";
            }
        );
    },
        {
        id = 1;
        name = "B";
        tables =         (
                        {
                comment = "";
                id = 5;
                name = "T1";
            },
                        {
                comment = "";
                id = 6;
                name = "T2";
            }
        );
    }
) 
```

鉴于我知道其中一个字典的 id 键的值（让我们以 id=6 为例），我怎样才能获得它的父字典或更准确地说是名称键的值（在本例中为 B）。

我试过使用谓词字符串，但问题是父字典也有一个名为 id 的键，所以我得到了错误的结果。

编辑： id 键是唯一的（并且第一个字典中元素的 id 也没有必要比具有更高索引的字典中的元素具有更低的整数值）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:48:24.240

试试这个，**数组**是你的结构化数组

```
NSDictionary *parentDict=[[NSDictionary alloc]initWithDictionary:nil];
NSString *name=[[NSString alloc]init];
NSArray *table=[[NSArray alloc]initWithArray:nil];
for (NSDictionary * dict in array) {
    table=[dict objectForKey:@"tables"];
    for (NSDictionary *childDict in table) {
        if ([[childDict objectForKey:@"id"]isEqualToString:@"6"]) {
            //if your id value is int then use ==6 to check 
            parentDict=dict;
            name=[dict objectForKey:@"name"];
            return;                
        }
    }
} 
```

# protobuf-net - 将 protobuf 网络与 DictionaryBase 一起使用

> ID：12581199
> 
> 赞同：2
> 
> 时间：2012-09-25T10:37:54.193
> 
> 标签：protobuf-net

我是使用 protobuf 的新手，并且在尝试序列化从 Dictionary 继承的类时遇到问题。其他属性没有被序列化。作为一个例子，我有这门课

```
[ProtoContract]
  public class InheritDictionary: Dictionary<string,string>
  {
    private int _myInt;

    [ProtoMember(1)]
    public int MyInt
    {
      get
      {
        return _myInt;
      }
      set
      {
        _myInt = value;
      }
    }

  } 
```

当我序列化 MyInt 属性时不包括在内。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:23:24.997

protobuf 规范没有集合对象的概念。在网络上，您**只能获得包含的元素 - 集合在数据中***根本*没有特征。因此，没有地方可以存储列表的任何属性 - 字典本质上是列表（键/值对）。

在 DTO 层，我会说：不要继承集合。*而是封装*集合。拥有一个*具有*字典并*具有*额外属性的对象。

# java - 如何生成与 JLabel 标签相同的文本图像？

> ID：12581200
> 
> 赞同：1
> 
> 时间：2012-09-25T10:37:56.490
> 
> 标签：java, swing, graphics

我想生成与 JLabel 标签相同的文本图像而不显示 JLabel。

我尝试了相同的字体，相同的绘图方法。
但生成的图像与 JLabel 不同。

我的源代码如下。
* 'super.paintComponent(g)' 已经被注释掉了，因为它是相同的方式。输出图像相同。
* 下面通过“View.paint”方法绘制，但我也尝试过“SwingUtilities2.drawString”。两个结果是一样的。

```
 /* Label */
    JLabel label = new JLabel(text) {
        @Override
        public void paintComponent(Graphics g) {
            //super.paintComponent(g);
            View v = BasicHTML.createHTMLView(this, getText());
            v.paint(g, new Rectangle(0, 0, getWidth(), getFontMetrics(
                            getFont()).getAscent()));
        }
    };
    label.setFont(new Font("Consolas", Font.PLAIN, 13));

    /* Image */
    FontMetrics fm = label.getFontMetrics(font);
    BufferedImage image = new BufferedImage(fm.stringWidth(text),
                fm.getHeight(), BufferedImage.TYPE_INT_RGB);
    Graphics2D g2d = image.createGraphics();
    g2d.setFont(label.getFont());

    // Clear background.
    g2d.setPaint(label.getBackground());
    g2d.fillRect(0, 0, image.getWidth(), image.getHeight());

    // Draw string.
    g2d.setClip(new Rectangle(0, 0, image.getWidth(), image.getHeight()));
    View v = BasicHTML.createHTMLView(label, text);
    v.paint(g2d, new Rectangle(0, 0, image.getWidth(), 
            g2d.getFontMetrics().getAscent()));

    // ... output image to file ... 
```

结果图像如下。
[JLabel]
![在此处输入图像描述](../Images/7e70cdebfa8814f931116d4f770d01e4.png)
[生成的图像]
![在此处输入图像描述](../Images/0ed44e5fd017d07ab84cf191aed0d8cc.png)

与 JLabel 的捕获相比，生成的图像略显瘦脸。
如何生成与 JLabel 标签相同的文本图像？

谢谢您的考虑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:44:24.797

*   `BasicHTML.createView`如果你想拥有一样的东西，你为什么要使用`JLabel`？
*   你可以`JLabel`直接使用（如果你只想要文本而不是背景，设置`opaque`为`false`和`border`to `null`）
*   或者你可以使用[`g2d.drawString()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawString%28java.lang.String,%20int,%20int%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T10:51:56.747

我不确定，但您可能需要创建兼容的缓冲图像（与显示器兼容）

```
GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
GraphicsDevice gs = ge.getDefaultScreenDevice();
GraphicsConfiguration gc = gs.getDefaultConfiguration();

// Create an image that does not support transparency
BufferedImage bimage = gc.createCompatibleImage(100, 100, Transparency.OPAQUE); 
```

这至少会让您接近用于渲染到屏幕的图形

您可能还想为[渲染质量](http://docs.oracle.com/javase/tutorial/2d/advanced/quality.html)付出代价

Kleopatra 不久前就类似问题发表了一篇文章，您可能会尝试追捕它

# entity-framework-4 - 使用实体框架确保原子性

> ID：12581201
> 
> 赞同：0
> 
> 时间：2012-09-25T10:37:59.117
> 
> 标签：entity-framework-4, transactions, linq-to-entities

我正在使用实体框架将插入和更新写入数据库。问题是我想做以前对存储过程所做的事情，即通过在它们周围放置事务来进行更新和插入原子组。linq to Entities/Entity Framework 怎么可能做这种事情？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:42:51.153

当您调用`SaveChanges`它时，它会在单个事务中自动执行所有内容。如果您需要将更改分组到单独的事务中，您必须按顺序执行它们并`SaveChanges`分别调用每个组。

# c# - 为什么 AccessViolationException 不能被 .NET4.0 捕获

> ID：12581202
> 
> 赞同：28
> 
> 时间：2012-09-25T10:38:04.557
> 
> 标签：c#, c++, access-violation

很有趣的是，下面的 C# 代码会在 .NET4.0 上崩溃，但在 .NET2.0 上可以正常工作。

**C# 代码**

```
class Program
{
    static void Main(string[] args)
    {
        try
        {
            ExceptionTest();
            Console.WriteLine("Done!");
        }
        catch (Exception e)
        {
            Console.WriteLine("Error !!!");
            Console.WriteLine(e.Message);
        }
    }

    [DllImport("badapp")]
    private static extern int ExceptionTest();
} 
```

**C++ 代码**

```
extern "C" __declspec(dllexport) int ExceptionTest()
{
    IUnknown* pUnk = NULL;
    pUnk->AddRef();
    return 0;
} 
```

如果针对 .NET2.0 编译上述 C# 代码，一切正常。仅针对 .NET4.0 编译它会使其在运行时崩溃。

我怀疑系统异常捕获机制自.NET4.0 以来已经改变。有任何想法吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-25T10:42:42.187

是的，它在 .NET 4 中发生了变化。您无法捕获指示损坏状态的异常。这是因为当一个损坏的状态异常被抛出时，几乎不能保证你可以做任何事情。实际上没有理由希望状态已损坏的进程继续执行。

为了与旧代码兼容，您可以通过将[`legacyCorruptedStateExceptionsPolicy`](http://msdn.microsoft.com/en-us/library/dd638517.aspx)元素添加到 app.config 来更改此行为。

[您还可以通过使用HandleProcessCorruptedStateExceptions 属性](http://msdn.microsoft.com/en-us/library/system.runtime.exceptionservices.handleprocesscorruptedstateexceptionsattribute.aspx)标记要捕获这些异常的方法来逐个执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-18T17:57:41.097

```
 [HandleProcessCorruptedStateExceptions]
    public static unsafe int LenghtPoint(this IntPtr point)
    {
        //por optimizar
        byte* bytePoint = (byte*)point.ToPointer();
        byte auxByte;
        int length = 1;
        bool encontrado = false;
        while (!encontrado)
        {

            try
            {

                auxByte = bytePoint[length];
                length++;
            }
            catch (System.AccessViolationException)
            {
                length--;
                encontrado = true;

            }
        }
        return length;
    } 
```

# android - 无法在 android 的 Simple Adapter 中设置评分栏

> ID：12581205
> 
> 赞同：3
> 
> 时间：2012-09-25T10:38:07.953
> 
> 标签：android, listadapter, simpleadapter, ratingbar

在我的 android 项目中，有一个列表显示来自 Google Places API 的一些列表，Google API 将评分作为字符串值返回我想将其添加到简单适配器以在列表中显示评分栏请帮我解决这个问题问题....

```
 import java.util.ArrayList;
    import java.util.HashMap;

    import org.json.JSONArray;
    import org.json.JSONException;
    import org.json.JSONObject;

    import android.app.ListActivity;
    import android.app.ProgressDialog;
    import android.content.Intent;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.AdapterView;
    import android.widget.AdapterView.OnItemClickListener;
    import android.widget.ListAdapter;
    import android.widget.ListView;
    import android.widget.SimpleAdapter;

    public class MyListActivity extends ListActivity {

        // JSON Node names
                    private static final String TAG_CONTACTS = "results";
                    private static final String TAG_ID = "id";
                    private static final String TAG_NAME = "name";
                    private static final String TAG_GENDER = "rating";
    //              private static final String TAG_ADDRESS = "formatted_address";
                    private static final String TAG_REFERENCE = "reference";
                    private static final String TAG_ICON = "icon";

        // contacts JSONArray
        JSONArray result = null;

        String url;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            // url to make request

            Intent in = getIntent();
             String location = in.getStringExtra("TAG_LOCATION");
             String type = in.getStringExtra("TAG_TYPE");
            url = "https://maps.googleapis.com/maps/api/place/textsearch/json?query="+type+"+in+"+location+"&sensor=true&key=AIzaSyD38pak_katUfSR92WE2_O2b9y0JSp5htA";
            //}

    //      LoadData ld = new LoadData();
    //      ld.onPreExecute();
        new LoadData().execute();

        }

    class LoadData extends AsyncTask<String, String, String>
        { 

    //  ProgressDialog pDialog;
    //  protected void onPreExecute() {
    //      
    //pDialog = new ProgressDialog(MyListActivity.this);    
    //pDialog.setMessage("Populating list please wait...");
    //      pDialog.setIndeterminate(false);
    //      pDialog.setCancelable(false);
    //      pDialog.show();
    //}

        // Hashmap for ListView
            ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
        protected String doInBackground(String... args) {

            // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();
            // getting JSON string from URL

            JSONObject json = jParser.getJSONFromUrl(url);

            try {
                // Getting Array of Contacts
                result = json.getJSONArray(TAG_CONTACTS);
                // looping through All Contacts
                for(int i = 0; i < result.length(); i++){
                    JSONObject c = result.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_ID);
                    String name = c.getString(TAG_NAME);
    //              String email = c.getString(TAG_EMAIL);
    //              String icon = c.getString(TAG_ICON);
                    String rating = c.getString(TAG_GENDER);

                    // Phone number is agin JSON Object
    //              JSONObject phone = c.getJSONObject(TAG_PHONE);
    //              String mobile = phone.getString(TAG_PHONE_MOBILE);
    //              String home = phone.getString(TAG_PHONE_HOME);
    //              String office = phone.getString(TAG_PHONE_OFFICE);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_ID, id);
                    map.put(TAG_NAME, name);
    //              map.put(TAG_ICON, icon);
                    map.put(TAG_GENDER, rating);
    //              map.put(TAG_EMAIL, email);
    //              map.put(TAG_PHONE_MOBILE, mobile);

                    // adding HashList to ArrayList
                    contactList.add(map);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
            return null;
                }    
            protected void onPostExecute(String file_url) {

    //      this.pDialog.cancel();
                    // dismiss the dialog after getting all products
                        /**
             * Updating parsed JSON data into ListView
             * */
            ListAdapter adapter = new SimpleAdapter(MyListActivity.this, contactList,
                    R.layout.listview_item_row,
                    new String[] { TAG_NAME, TAG_GENDER,}, new int[] {
                            R.id.txtTitle, R.id.ratingbar });

            setListAdapter(adapter);

            // selecting single ListView item
            ListView lv = getListView();

            // Launching new screen on Selecting Single ListItem
            lv.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    // getting values from selected ListItem
    //              String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
    //              String cost = ((TextView) view.findViewById(R.id.formatted_address)).getText().toString();
    //              String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

                    // Starting new intent
                    Intent in = new Intent(getApplicationContext(), ProfileViewActivity.class);
    //              in.putExtra(TAG_NAME, name);
    //              in.putExtra(TAG_EMAIL, cost);
    //              in.putExtra(TAG_PHONE_MOBILE, description);
                    startActivity(in);

                }
            });

            }

    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T16:48:19.807

小`RatingBar`部件应放置在适配器中使用的列表行布局中，`R.layout.listview_item_row`. 现在，我只是在主布局的`RatingBar`下方放置了一个小部件。`ListView`

# qt - QT 属性 - 语法糖或开发工具

> ID：12581209
> 
> 赞同：5
> 
> 时间：2012-09-25T10:38:15.403
> 
> 标签：qt, properties, metaclass

我敢肯定你们所有人都在那个时候 - 定义一个`Q_OBJECT`携带大量的`Q_PROPERTIES`，所有这些都带有相当微不足道的访问器：

```
class ORM_Customer : public QDjangoModel
{
    Q_OBJECT  

    Q_PROPERTY(QString firstname READ firstname WRITE setFirstname)
    Q_PROPERTY(QString lastname  READ lastname  WRITE setLastname)
    Q_PROPERTY(QString phone     READ phone     WRITE setPhone)

    Q_PROPERTY(QString address1  READ address1  WRITE setAddress1)
    Q_PROPERTY(QString address2  READ address2  WRITE setAddress2)
    Q_PROPERTY(QString houseno   READ houseno   WRITE setHouseno)
    Q_PROPERTY(QString postcode  READ postcode  WRITE setPostcode)
[... snip ...]
} 
```

有大量的访问器看起来像这样：

```
QString ORM_Customer::firstname() const { return m_firstname; }
QString ORM_Customer::lastname() const  { return m_lastname; }

void ORM_Customer::setFirstname(QString &n) { m_firstname = n; }
void ORM_Customer::setLastname(QString &n)  { m_lastname  = n; } 
```

鉴于 QDjangoModel 使用 MetaObject 自省，我不能在这里依赖动态属性（此外，我喜欢静态属性） - 问题是，是否有任何工具可以节省我的体力劳动？

Qt Creator 似乎没有选择只声明和定义一些默认访问器及其各自的私有变量.. 还有什么？它肯定会困扰更多的开发人员，而不仅仅是我自己。

或者也许只是其他人使用的另一种开发模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T07:34:37.810

我不知道工具，对不起。但是，当 Qt 5.1 准备就绪时，您可能会对它感到满意，因为它扩展了“moc”编译器。[请参阅Qt 5.1 功能列表](http://qt-project.org/wiki/New-Features-in-Qt-5.1)中的“基本模块 - > moc”部分：

> Q_PROPERTY 中的新关键字：MEMBER 允许您将属性绑定到类成员，而无需拥有 getter 或 setter。

# javascript - 是否可以使用 Javascript 监视目录以进行修改

> ID：12581213
> 
> 赞同：0
> 
> 时间：2012-09-25T10:38:22.080
> 
> 标签：javascript, qt, qml

我正在使用 Qt/QML 编写一个图像库，并且我想在一个文件夹中显示所有图像，例如，名为**img**。将此文件夹中的所有图片添加到这样的模型中

```
ListModel {
        ListElement {
            img:"img/1.jpg"
            img_big :"img/1_big.jpg";

        }

        ListElement {
            img_big :"img/2_big.jpg";
            img:"img/2.jpg"
        }
} 
```

在 .qml 文件中硬编码并不是一个完美的方法。是否可以监视此目录中的新文件并将它们添加到此模型中？
我知道我可以使用**QFileSystemWatcher**但我想知道我是否可以使用 javascript 来这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:41:55.273

[目前的HTML5 File API](http://dev.w3.org/2006/webapi/FileAPI/)草案中没有这样的规定，因此您将无法使用纯 JavaScript 执行此操作。

# sql-server-2008 - 这个“非 ISO 扩展 ASCII 英文文本，行很长，带有 CRLF 行终止符”是什么类型的编码？

> ID：12581219
> 
> 赞同：1
> 
> 时间：2012-09-25T10:38:39.263
> 
> 标签：sql-server-2008, encoding, windows-server-2003, iconv, magmi

我正在尝试根据我使用 的函数的[描述](http://msdn.microsoft.com/en-us/library/ms162773.aspx)`mssql`导出查询的输出，该查询必须使用`utf`（我想是 utf-16）编码。默认情况下，Ä 被转换为字符 z（带有 2 个点或类似 ^ 倒置的东西），并将其列为字符集。当我尝试使用记事本++ 转换此文件以向我显示一些奇怪的突出显示字符时，以及其他一些字符（例如我在 Nottepad++ 中默认使用的编码）。`-W -u``sqlcmd``ansi``utf``utf-8``(x8E)``Ä``x86``x94`

当我将文件传输到`Ubuntu 12.04`机器并使用`file`命令时说它

> user@user:~/Desktop/enc oding/checkencoding$ file convertit4.csv convertit4.csv：非 ISO 扩展 ASCII 英文文本，行很长，带有 CRLF 行终止符
> 
> user@user:~/Desktop/encoding/checkencoding$ chardet convertit4.csv convertit4.csv: ISO-8859-2 (confidence: 0.77) 我很困惑它使用什么样的编码。目的是将其转换为`utf-8`编码而不会出现任何错误，以将其上传到[`magmi`importer](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Magmi_Wiki)。

注意：我正在使用此命令删除标题后的下划线`type c:\outfiles\convertit1.temp | findstr /r /v "^\-[;\-]*$" > c:\outfiles\convertit4.csv`希望这行代码没有问题。

我希望信息完整以解决此问题，如果需要更多信息，请告诉我，问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:36:19.347

尝试 [http://www.yaldex.com/sql_server_tutorial_3/ch06lev1sec1.html中的 -f 选项](http://www.yaldex.com/sql_server_tutorial_3/ch06lev1sec1.html)

# regex - 使用 sed 和正则表达式搜索直到下一个字符

> ID：12581221
> 
> 赞同：0
> 
> 时间：2012-09-25T10:38:59.823
> 
> 标签：regex, unix, batch-file

我得到了一个带有如下 URL 的图像：

`<img alt="" src="http://www.example-site.com/folder_with_underscore/folder-with-dash/3635/0/235/NumBerS_and_Uc/image.png" />`

我在用着`sed "s///g"`

所以我正在尝试替换 src 值，但这在大多数情况下是完全不同的。

有没有办法使用`sed "s/src=\" (until first " ) / new url /g"`

**额外信息：**

我在 Windows 和`PATH=C:\cygwin\bin`我的 .bat 文件中使用 Cygwin

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T10:43:18.073

`[^"]`将匹配除 之外的任何字符`"`，因此您可以使用：

```
 sed 's/src="[^"]*"/src="NEWURL"/g' 
```

例子：

```
[me@home]$ echo '<img alt="" src="http://www.example-site.com/folder_with_underscore/folder-with-dash/3635/0/235/NumBerS_and_Uc/image.png" />' | sed 's/src="[^"]*"/src="http:\/\/stackoverflow.com"/g'
<img alt="" src="http://stackoverflow.com" /> 
```

请注意，这将匹配，直到第**一次**出现`"`可能是您想要的。如果你真的想匹配直到**最后一次**出现`"`，你可以简单地做：

```
 sed 's/src=".*"/src="NEWURL"/g' 
```

正则表达式是贪婪的，因此会占用尽可能多的字符，因此匹配到`"`. 虽然这也适用于上面的示例，但如果您的输入中还有其他内容也包含`"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:40:31.920

Shawn 的解决方案大多是正确的，但它没有处理 src url 中出现换行符的情况。 `sed`真的不是很擅长处理这种情况，但你可以破解一个解决方案：

```
sed '/src/{
/src="[^"]*"/{ s//src="NEWURL"/; n; }
s/src=".*$/src="NEWURL"/
p
:a
s/.*//;
N
/"/!ba
s/[^"]*"//
}
' input 
```

请注意，上面的许多换行符在某些版本的 sed 中是多余的，但在其他版本中是必需的。（特别是`:a`分支命令之后和之后的换行符，因为某些版本的 sed 只会在换行符处终止标签。我相信允许标签以分号终止的 sed 版本并不严格符合标准，但这是一种常见的做法。）该脚本在适当的地方进行简单的替换，但是如果在 之后没有找到引号`src="`，它会进入一个循环删除行，直到`"`看到终止。这是一个丑陋的解决方案，我建议不要使用 sed 来解析 xml。

# php - PHP会话数组不断变化

> ID：12581225
> 
> 赞同：1
> 
> 时间：2012-09-25T10:39:10.773
> 
> 标签：php, arrays, session

我有两页。在一页上，我将一个数组添加到`$_SESSION`. 在第二页上，我正在读取数组（成功），然后`unset`从`$_SESSION`.

然而，发生的事情是第二页显示的值与会话中存储的第一页不同 - 这让我认为第一页被一次又一次地调用，但如果我在会话中而*不是*自己重新加载页面？

我究竟做错了什么？谢谢

编辑：忘了提到第二个脚本是由网站上的闪存文件请求的。Flash 文件将会话 ID 作为其参数之一，然后将其发送到第二个脚本以加载正确的会话（`session_id($_REQUEST['token']);`部分）。

第 1 页：

```
$_SESSION['HEADER_MODEL'] = getModelForHeaderVideo();
/*
    [HEADER_MODEL] => Array
        (
            Yes these are just random numbers (for testing)
            [modID] => 303768959
            [modUsername] => 347073152
        )
*/ 
```

第2页：

```
<?php
        session_id($_REQUEST['token']);
        session_start();

        header('Content-Type: text/html; charset=utf-8');

        if (!isset($_SESSION['HEADER_MODEL']['modID']) || (trim($_SESSION['HEADER_MODEL']['modID']) == '')) {
                echo "modID=0";
        } else {
                echo "&modID={$_SESSION['HEADER_MODEL']['modID']}&modUsername={$_SESSION['HEADER_MODEL']['modUsername']}";
                unset($_SESSION['HEADER_MODEL']);
        }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:03:12.767

请参考 PHP 文档

> 注意：当使用会话 cookie 时，为 session_id() 指定一个 id 将始终在 session_start() 被调用时发送一个新的 cookie，无论当前会话 id 是否与设置的相同。

PHP 会话数组不断变化，因为这是您的代码指示它执行的操作

# python - 执行 Django 教程时导入错误

> ID：12581226
> 
> 赞同：2
> 
> 时间：2012-09-25T10:39:12.107
> 
> 标签：python, django

我正在关注以下链接中给出的 Django 教程：-

[http://docs.djangoproject.com/en/1.4/intro/tutorial01/](http://docs.djangoproject.com/en/1.4/intro/tutorial01/)

在运行服务器时，我收到许多错误消息：-

```
ImportError at /admin/

No module named polls.urls

Request Method:     GET
Request URL:        http://127.0.0.1:8000/admin/
Django Version:     1.4.1
Exception Type:     ImportError
Exception Value:    

No module named polls.urls

Exception Location:     C:\Python27\lib\site-packages\django\utils\importlib.py in import_module, line 35
Python Executable:      C:\Python27\python.exe
Python Version:         2.7.3

Python Path:    

['D:\\chetan\\All_My_Projects\\mysite1',
 'C:\\Windows\\system32\\python27.zip',
 'C:\\Python27\\DLLs',
 'C:\\Python27\\lib',
 'C:\\Python27\\lib\\plat-win',
 'C:\\Python27\\lib\\lib-tk',
 'C:\\Python27',
 'C:\\Python27\\lib\\site-packages'] 
```

这些错误类似于在以下内容中提出的错误：-

[没有名为 urls 的模块](https://stackoverflow.com/questions/2353416/no-module-named-urls)

我的问题是，**我们是否需要将项目目录（在我的情况下为 D:\chetan\All_My_Projects\mysite1）添加到环境变量中？**这是造成问题的原因吗..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:35:02.423

这是整个 Django 项目（我想，你在 Windows 上，使用 Py 27）

按着这些次序：

*   打开cmd，直接到`d:\`，现在`python c:/python27/lib/site-packages/django/bin/django-admin.py startproject mysite`

*   `cd mysite`和`python manage.py startapp polls`

现在，`cd polls`

```
# polls/views.py
from django.shortcuts import render_to_response
def polls_home(request):
    return render_to_response("polls.html")

# polls/urls.py
from django.conf.urls import patterns, include, url
import views
urlpatterns = patterns ("",
                            url(r'^polls$', views.polls_home),
) 
```

*   转到 d:/mysite/mysite/settings.py 并`polls`添加`INSTALLED_APPS`

*   *非常重要*：打开 mysite/mysite/urls.py

添加`url(r'^home$', include('polls.urls') ),`到 url 模式

现在，运行服务器并打开`/home/polls`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:14:34.520

在 PythonPath.ie 中添加我的项目后，Django 教程正确执行，我的项目是在 'D:\chetan\All_My_Projects\mysite1' 中创建的。我在 Aptana Studio 中所要做的就是：-

1.转到Windows->首选项->PyDev->解释器-Python

2.将“D:\chetan\All_My_Projects\mysite1”添加到 PythonPath。

谢谢大家的帮助。我还想参考以下链接，该链接强调将项目添加到 PythonPath：-

[http://www.webmonkey.com/2010/02/Install_Django_and_Build_Your_First_App](http://www.webmonkey.com/2010/02/Install_Django_and_Build_Your_First_App)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:55:22.843

是否有可能您输入了`<your_app>/urls.py`：

```
url(r'^polls/', include(polls.urls)) 
```

而不是这个？（需要引号）：

```
url(r'^polls/', include('polls.urls')) 
```

如果这不起作用，我会检查是否`polls`在`INSTALLED_APPS`里面。`<your_app>/settings.py`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-29T20:34:59.760

本教程可以受益于使用绝对路径，例如 `mysite/mysite/urls.py`，等以避免混淆。这就是为什么...

django 教程有点令人困惑，因为它创建了一个项目`mysite`（我们大多数人都会给它起一个不同的名称），然后在该项目中`mysite`它还有一个名为`mysite`.

*   一个`mysite`目录用于启动服务器，因为它包含`manage.py`
*   另一个嵌套`mysite`包含`urls.py`映射到新应用程序（本教程称为此应用程序`polls`）。

因此，尽管本教程清楚地解释了目录结构**应该**是什么样子，但如果尝试过快地遵循它，则应用程序`polls`应该与站点并排驻留并不是很明显`mysite`）。从而创造`mysite/mysite`,`mysite/polls`或者也许`djangotest/djangotest`,`djangotest/myapp`等等。

在学习本教程时，如果有人在错误的目录中创建了必要的文件，那么这个人做错了什么导致错误不会立即显而易见`No module named polls.urls`。

# c# - HTML Agility Pack 获取所有输入字段

> ID：12581227
> 
> 赞同：4
> 
> 时间：2012-09-25T10:39:13.873
> 
> 标签：c#, html-agility-pack

我在互联网上找到了一些代码，可以找到所有`href`标签并将它们更改为 google.com，但是我如何告诉代码找到所有`input`字段并将自定义文本放入其中？

这是我现在拥有的代码：

```
HtmlDocument doc = new HtmlDocument();
doc.Load(path);
foreach (HtmlNode link in doc.DocumentNode.SelectNodes("//a[@href]"))
{
    HtmlAttribute att = link.Attributes["href"];
    att.Value = "http://www.google.com";
}
doc.Save("file.htm"); 
```

拜托，有人可以帮助我吗，我似乎无法在互联网上找到任何有关此的信息:(。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T10:43:59.917

将 XPath 选择器更改`//input`为选择所有输入节点：

```
foreach (HtmlNode input in doc.DocumentNode.SelectNodes("//input"))
{
    HtmlAttribute att = input.Attributes["value"];
    att.Value = "some text";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T10:41:43.740

您当前的代码选择了所有`a`元素（具有`href`属性）`"//a[@href]"`：.

您希望它选择所有`input`元素：`"//input"`.

当然，循环的内部部分需要更改以匹配您正在寻找的内容。

我建议您阅读[XPath](http://zvon.org/xxl/XPathTutorial/General/examples.html)。

# c# - 在主键列（表）中插入重复值时在 SQL Server 中返回哪个错误代码

> ID：12581230
> 
> 赞同：-1
> 
> 时间：2012-09-25T10:39:21.247
> 
> 标签：c#, sql, sql-server, sql-server-2005, ado.net

在主键列（表）中插入重复值时在 SQL Server 中返回哪个错误代码

```
 try
     {
         dataAdapterObj = new  SqlDataAdapter(selectString, conObj);
         return true;
     }
     catch (Exception e)
     {
         MessageBox.Show("Exception is : " + e.ToString());
         return false;
     } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-05-19T08:32:32.667

错误代码为 2627（违反 PRIMARY KEY 约束）

```
 try
     {
      // do insert
     }
  catch (SqlException e)
    {
       if (e.Number == 2627)
           //do something
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T10:45:47.047

您要查找的错误代码是 2601。使用[SqlException.Number](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.number.aspx)属性

```
catch (SqlException e)
{
   MessageBox.Show(String.Format("Exception is {0} - {1}", e.Number, e.Message)); 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-26T08:43:23.827

**2601**

示例：无法在具有**唯一索引**“my_index_name”的对象“my_table_name”中插入重复的键行。

**2627**

示例：违反`PRIMARY KEY` **约束**“my_constraint_name”。无法在对象“my_table_name”中插入重复键。

来源：[https://docs.microsoft.com/en-us/previous-versions/sql/sql-server-2008-r2/cc645728(v=sql.105)](https://docs.microsoft.com/en-us/previous-versions/sql/sql-server-2008-r2/cc645728(v=sql.105))

# html - Z-index 防止在另一个元素上的悬停属性

> ID：12581233
> 
> 赞同：3
> 
> 时间：2012-09-25T10:29:48.433
> 
> 标签：html, css, z-index

我在一个较大的容器中有两个不同的元素（div class=""）。

我们称它们为 div class="overlay_container" 和 div class="title"。div class="overlay_container" 有一个子类 .image，它在悬停时在整个较大的容器上创建一个覆盖。

div class="title" 的 z-index 为 10,000，位于 .image 之上，因此位于覆盖层之上。不幸的是，当您将鼠标悬停在“标题”上时，下面的子类覆盖图像就会消失。

我知道问题显然是“标题” div 就在其他 div 之上，因此悬停时会因为 z-index 而消失。但是我该如何解决这个问题？我如何做到这一点，以便当您将鼠标悬停在“标题”上时，.image 叠加层仍然会出现？

如果您的回答涉及 jQuery，您能否告诉我将脚本放在哪里（在 /head 标记之前）？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T07:47:03.247

添加`pointer-events:none;`到标题 div 可能有效？

看起来大多数浏览器都能识别它，除了....dun dun dun...IE：[http ://caniuse.com/#search=pointer-events](http://caniuse.com/#search=pointer-events)

# jquery - 使用表格排序器时无法将数据保存到动态 DOM

> ID：12581235
> 
> 赞同：2
> 
> 时间：2012-09-25T10:39:28.903
> 
> 标签：jquery, tablesorter

**由于这不是一个真正的问题，请忽略此问题，除非您想使用以下代码解决类似问题**

当单击动态生成的表格线时，我想在谷歌地图上绘制一个多边形。似乎数据已成功保存到该 dom，但无法在 $.each() 函数之外再次读取。

```
$.getJSON(url, function(json) {
    $.each(json, function(index) {
        var id = "tableLine_"+index;
        tbody.append(
            '<tr id='+id+' class="tableLine">'+
            '<td>'+ this.status+ '</td>'+
            '<td>'+ this.name+'</td>'+
            '<td>'+ this.city+'</td>'+
            '<td>'+ this.street+'</td>'+
            '<td>'+ this.language+'</td>'+
            '<td>'+ this.distance+'</td>'+
            '</tr>'
        );

        //save data to the specific 'tr'
        $("tr#"+id).data("polygon",this.polygon);

        //this proved that the data was saved
        alert($("tr#"+id).data("polygon"));
    });

    $("table").tablesorter({
        sortLocaleCompare: true,
        widgets: ['zebra']
    }).tablesorterPager({
        container: $(".pager"),
        size: 15
    });
}); 
```

多边形：

```
"polygon":[{"x":48.235752,"y":11.685345},{"x":48.21908,"y":11.686883}...] 
```

将点击事件绑定到表格行的函数：

```
$('.tableLine').live('click', function (event){
    var polygon = $(this).data("polygon");

    if(polygon){
        addPolygon(polygon);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:02:28.353

请提供您的`jsFiddle`示例，因为我可以在我的演示中看到您的代码：http: [//jsfiddle.net/c5s5t/1/](http://jsfiddle.net/c5s5t/1/)

# javascript - jQuery AJAX: load HTML into DIV element after click

> ID：12581237
> 
> 赞同：2
> 
> 时间：2012-09-25T10:39:43.947
> 
> 标签：javascript, jquery, html, ajax

i would like to load (or be visible) an HTML/ASP.NET email form after the user clicked in a link/button. I have used this code but it doesn't work:

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#imgMail").click(function (htm) {
            $.get("mailform.html"),
                $("#mailForm").append(htm)); //i have tryed also with .html() function.
        });
    });
</script> 
```

where #imgMail is the ID of the link/button and the #mailForm is the ID of the DIV element into load the content.

How can i resolve this problem? P.S. The elements are not into a form tag.

Thanks.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T10:43:20.673

用这个..

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#imgMail").click(function() {
            $.get("mailform.html",function(data){
                $("#mailForm").append(data);
            });
        });
    });
</script> 
```

# asp.net-mvc - ASP.NET MVC - Firefox still keep selected value of dropdownlist after pressing F5

> ID：12581239
> 
> 赞同：0
> 
> 时间：2012-09-25T10:39:51.320
> 
> 标签：asp.net-mvc, firefox, drop-down-menu

I put an dropdownlist inside an ajax form, when change SelectedIndex the form will load new html. Then I press F5, the dropdownlist still keep the SelectedIndex even though the SelectedIndex in the returned html is 0.

This only happened on Firefox (I ran on FF 15.0.1) Is there any trick to resolve this?

# php - get multiple value from select box?

> ID：12581243
> 
> 赞同：1
> 
> 时间：2012-09-25T10:39:59.357
> 
> 标签：php, javascript, select

I am using this script get by somewhere from internet..

```
<html>
    <head>
        <title>Test</title>
        <script type="text/javascript">
        function sureTransfer(from, to, all) {
            if ( from.getElementsByTagName && to.appendChild ) {
                while ( getCount(from, !all) > 0 ) {
                    transfer(from, to, all);
                }
            }
        }

         function getCount(target, isSelected) {
            var options = target.getElementsByTagName("option");
            if ( !isSelected ) {
                return options.length;
            }
            var count = 0;
            for ( i = 0; i < options.length; i++ ) {
                if ( isSelected && options[i].selected ) {
                    count++;
                }
            }
            return count;
        }

        function transfer(from, to, all) {
            if ( from.getElementsByTagName && to.appendChild ) {
                var options = from.getElementsByTagName("option");
                for ( i = 0; i < options.length; i++ ) {
                    if ( all ) {
                        to.appendChild(options[i]);
                    } else {
                        if ( options[i].selected ) {
                            to.appendChild(options[i]);
                        }
                    }
                }
            }
        }

        window.onload = function() {
            document.getElementById("src2TargetAll").onclick = function() {
                sureTransfer(document.getElementById("source"), document.getElementById("target"), true);
            };
            document.getElementById("src2Target").onclick = function() {
                sureTransfer(document.getElementById("source"), document.getElementById("target"), false);
            };
            document.getElementById("target2SrcAll").onclick = function() {
                sureTransfer(document.getElementById("target"), document.getElementById("source"), true);
            };
            document.getElementById("target2Src").onclick = function() {
                sureTransfer(document.getElementById("target"), document.getElementById("source"), false);
            };
        }
        </script>
    </head>
    <body>
        <table>
            <tr>
                <td>
                    <form name="formcheck" method="post" action="target.php">
                        <select id="source" name="source" multiple>
                            <option value="1">one</option>
                            <option value="2">two</option>
                            <option value="3">three</option>
                            <option value="4">four</option>
                            <option value="5">five</option>
                            <option value="6">six</option>
                            <option value="7">seven</option>
                            <option value="8">eight</option>
                            <option value="9">nine</option>
                            <option value="10">ten</option>
                        </select>
                    </td>
                    <td>
                        <input type="button" id="src2TargetAll" name="src2TargetAll" value=">>"/><br/>
                        <input type="button" id="src2Target" name="src2Target" value=">"/><br/>
                        <input type="button" id="target2Src" name="target2Src" value="<"/><br/>
                        <input type="button" id="target2SrcAll" name="target2SrcAll" value="<<"/><br/>
                    </td>
                    <td>
                        <select id="target" name="target" multiple>
                        </select>
                    </td>
                </tr>
            </table>
        </form>
    </body>
</html> 
```

This code creating a two select box which is selected items left to right all code works fine but in php file i am trying to get value by this php code `$targets = $_POST['target'];` but don't get all value so plz tell me what is the right way to get value of this in php?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:53:12.397

用这个

```
<select id='source' name='source[]' multiple='multiple'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:41:04.520

为 select 元素指定一个以 结尾的名称，`[]`以便 PHP 将其显示为`$_POST/GET/REQUEST`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:46:42.883

用这个

```
 <select id="source" name="source[]" multiple='multiple'> 
```

它将在服务器端发布一个数组

# perl - Evaluate a condition for an IF statment in Perl

> ID：12581245
> 
> 赞同：0
> 
> 时间：2012-09-25T10:40:09.637
> 
> 标签：perl, if-statement

I need to be able to generate a conditional condition in the IF statement. The code should look something like this:

```
if($filter_by $operator $value) {
  # do something
} 
```

Which can be for example: column1 > 10 That obviously doesn't work. I tried doing this:

```
if(eval "$filter_by $operator $value") 
```

but it also doesn't work. Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:25:18.847

该`eval`函数接受一个字符串，*将当前上下文中*的字符串计算为 Perl 代码并返回结果。

直接插值是行不通的：

```
$arg1 = "ab cd";
$arg2 = "123";
$op = "==";

$result = eval "$arg1 $op $arg2"; 
```

会将字符串传递`ab cd == 123`给`eval`，这*不是*有效的 Perl 代码。

但是，有一个简单的解决方案，因为`eval`'d 代码可以看到外部变量：

```
$result = eval('$arg1 ' . $op . ' $arg2'); 
```

参数名称不会被插值，您可以构造任意代码。

请注意，这可能是 BadIdea(TM)，因为您可能会在运算符中引入恶意代码：`$op = '; system "rm -rf /"; '`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:23:13.343

我不知道您使用的表达式不起作用..我在下面显示的代码对我来说很好..

```
#!/perl/bin
use v5.14;
use warnings;

my $column = 12;
if ($column > 10) {
    say "Greater";

} else {
    say "Not greater";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:05:31.290

“正确”的方法是使用子程序引用：

```
my $compare = sub { return $_[0] > $_[1] };
if ($compare->(1,2)) { print "One is greater than two"}

$compare = sub { return $_[0] < $_[1] };
if ($compare->(1,2)) { print "One is less than two"} 
```

`eval()`由于 amon 提到的安全问题和更清晰的代码，这被认为比 更好。

话虽这么说，`eval()`在许多情况下都很好。

# perl - If loop not working in perl

> ID：12581249
> 
> 赞同：-5
> 
> 时间：2012-09-25T10:40:24.290
> 
> 标签：perl, if-statement

Please take a look at this script and suggest possible solutions..

```
my $otext = 'ABCDEABCDEABCDEABCDEABCDE'; 
my $len   = length($otext);
print "length of string is:\n".$len;
$n = 1;

if ($n == 1) {

    if (substr($otext, -1, 1) eq "E") {

        if ($len >= 3) {

            if ($len == 3) {

                $len1 = 2 * $len - 1; 
                $len2 = 3 * $len - 2; 
            }
            else {

                $len1 = 2*$len-1; 
                $len2 = 3*$len-3;
            }
        }
        else {

             $len1 = 0;
             $len2 = 0;     
        }   
        print "Length-1 is:". $len1;
        print "Length-2 is:" .$len2;
    }
}
else { 

    print "\n It's else loop ";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T11:09:51.750

除了其他答案，我想建议对您的代码进行一些改进

### 消除死代码

```
my $n = 1;
if ($n == 1) {
  # Code 1
} else {
  # Code 2
} 
```

将*始终*运行代码 1。

### 避免 C 主义

```
substr($otext,-1,1) eq "E" 
```

测试最后一个字符是否为`E`. 在 Perl 中，这可以用正则表达式写得更好：

```
$otext =~ /E$/ 
```

表示正则表达式中字符串的`$`结尾。

### 简化你的逻辑

你有这个构造：

```
if ($len >= 3) {
  if ($len == 3) {
    # Code 1
  } else {
    # Code 2
  }
} else {
  # Code 3
} 
```

这完全等于

```
if ($len == 3) {
  # Code 1
} elsif ($len > 3) {
  # Code 2
} else {
  # Code
} 
```

### 声明你的变量

始终`my`在使用它们的最外层范围内声明变量。这条规则的唯一例外是 (a) 当您正在编写快速单行代码时或 (b) 您有*充分*的理由使用全局变量。

### 将换行符放在它们所属的地方

我相信这段代码

```
 print "Length-1 is:". $len1;
  print "Length-2 is:" .$len2; 
```

旨在产生类似的输出

```
Length-1 is: 0
Length-2 is: 0 
```

并不是

```
Length-1 is:0Length-2 is:0 
```

我会将您的变量插入`$len1`到`$len2`字符串中，附加换行符并包含一个空格：

```
 print "Length-1 is: $len1\n";
  print "Length-2 is: $len2\n"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T10:47:11.350

在顶层你使用了你的 if as `if (n == 1)`，那将不会编译。你的变量应该以 a 为前缀，`$`如果它是一个标量。所以，使用`if($n == 1)`

此外，`if`它不是一个循环，它是一个构造..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T10:47:06.547

`n`应`$n`处于以下`if`状态：

```
if ($n==1){ 
```

# java - I want to log out my application after browser close in every browser?

> ID：12581250
> 
> 赞同：2
> 
> 时间：2012-09-25T10:40:25.257
> 
> 标签：java, javascript, jsf

I am calling this code by this `window.onbeforeunload=HandleOnClose;`

This is working fine in IE but not in other browsers. This code is specific for IE but this is not working in other browsers. How can we detect close event of browser in all the browser ?

```
function ConfirmClose()
    {
        if (isIE7Min) //To check for IE Version 7.0 and above
        {   
          var n = window.event.screenX - window.screenLeft; 
          var b = n > document.documentElement.scrollWidth-20;
            if ((b && window.event.clientY < 0) || window.event.altKey) 
            {
                if (!self.closed)
                {
                    refresh = true;
                }
            }
        }
        else   //IE Version 6.0 and below
        {
            if (event.clientY < 0 && event.clientX < 0)
            {
                if (!self.closed)
                {
                    refresh = true;
                }
            }
        }
    }

    /*Function for onunload*/

    function HandleOnClose()
    {

        ConfirmClose();

        if (isIE7Min)
        {

            if ((window.event.clientX > 0 && window.event.clientY < 0) || window.event.altKey) 
            {
                if (refresh == true) 
                {           
                    window.open("/DealPricingJavaUAT/DealPricingJsp/Home/logout.jsf");
                    //Code That redirects to the Session Invalidation Page
                }
            }
        }
        else
        {

            if (event.clientY < 0 && event.clientX < 0 || window.event.altKey)
            {
                if (refresh == false) 
                {                      
               window.open("/DealPricingJavaUAT/DealPricingJsp/Home/logout.jsf");
                // Code That redirects to the Session Invalidation Page    
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:46:46.200

我认为不可能总是注销用户。如果用户的网络浏览器崩溃，客户端代码将永远不会被执行。一些 Web 浏览器会非常快地自行关闭，并且不会等待执行客户端代码。

您应该找到替代解决方案，例如如果用户在一段时间内不活动，则在服务器端注销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:56:20.533

无法检测到用户何时关闭浏览器。如果您使用 java 并使用 cookie 来检查用户是否已登录，则可以执行 cookie.setMaxAge(-1)。

这将确保在浏览器关闭时删除 cookie。

# mysql - Mysql query with Union All and Join for League table

> ID：12581251
> 
> 赞同：0
> 
> 时间：2012-09-25T10:40:27.120
> 
> 标签：mysql, sql

for a soccer league i have two tables:

*   "teams" is a table that lists all teams as unique entries ('id', 'team_name')
*   "matches" is a table that shows the match results: In the columns 'home' and 'away' i save each game result. 'home_team_id' and 'away_team_id' is the association to the teams-table.

This is how my query looks like:

```
SELECT Teams, Sum(P) as 'Matches', Sum(W) as 'win', Sum(D) as 'draw', Sum(L) as 'lost',
       SUM(Pts) as 'points'
  FROM (
        SELECT home Teams, 1 P,
                IF (home > away,1,0) W,
                IF (home = away,1,0) D,
                IF (home < away,1,0) L,
                CASE 
                    WHEN home > away THEN 3
                    WHEN home = away THEN 1 
                    ELSE 0
                END PTS
          FROM `matches`

        UNION ALL
        SELECT away Teams, 1,
                IF (home < away,1,0),
                IF (home = away,1,0),
                IF (home > away,1,0),
                CASE 
                    WHEN home < away THEN 3
                    WHEN home = away THEN 1
                    ELSE 0
                END
          FROM `matches`
        ) AS ERG
GROUP BY Teams
ORDER BY SUM(Pts) DESC 
```

Now i want the team names (teams.team_name) from the team-table. To achieve this i tried several join-statements with no luck.

It's obvious that the teams-table can contain teams who did not attend a match. These teams need to be displayed with zero-results.

Therefore I tried a LEFT JOIN:

```
SELECT team_name AS 'Teams'
  FROM `teams`
  LEFT JOIN matches ON ( teams.id = matches.home_team_id ) 
```

right after the ORDER-line in the end. I got an error message. I use MySQL 5.1.44, so nested selects shouldn't be a problem.

Any idea?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:52:30.157

听起来你想做这样的事情。我更新了您的子查询以包含`home_team_id`和`away_team_id`，然后您将`JOIN`在`teams`表格上返回名称。：

```
SELECT Teams, 
  Sum(P) as 'Matches',
  Sum(W) as 'win',
  Sum(D) as 'draw',
  Sum(L) as 'lost',
  SUM(Pts) as 'points',
  h.team_name as HomeTeam,
  a.team_name as AwayTeam
FROM
(
  SELECT home Teams,
    1 P,
    IF (home > away,1,0) W,
    IF (home = away,1,0) D,
    IF (home < away,1,0) L,
    CASE WHEN home > away THEN 3 WHEN home = away THEN 1 ELSE 0 END PTS,
    home_team_id,
    away_team_id
  FROM `matches`

  UNION ALL

  SELECT away Teams,
    1,
    IF (home < away,1,0),
    IF (home = away,1,0),
    IF (home > away,1,0),
    CASE WHEN home < away THEN 3 WHEN home = away THEN 1 ELSE 0 END,
    home_team_id,
    away_team_id
  FROM `matches`
) AS ERG
LEFT JOIN `teams` h
  on ERG.home_team_id = h.home_team_id
LEFT JOIN `teams` a
  on ERG.away_team_id = a.away_team_id
GROUP BY Teams, home_team_id, away_team_id
ORDER BY SUM(Pts) DESC 
```

根据您的评论编辑＃1，听起来您想要这个（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/af835/11)）：

```
SELECT TeamId, 
  t.team_name,
  Teams, 
  Sum(P) as 'Matches', 
  Sum(W) as 'win', 
  Sum(D) as 'draw', 
  Sum(L) as 'lost',
  SUM(Pts) as 'points'
FROM 
(
  SELECT home_team_id TeamId, 
      home Teams, 1 P,
      IF (home > away,1,0) W,
      IF (home = away,1,0) D,
      IF (home < away,1,0) L,
      CASE 
          WHEN home > away THEN 3
          WHEN home = away THEN 1 
          ELSE 0
      END PTS
  FROM `matches`

  UNION ALL
  SELECT away_team_id TeamId,
       away Teams, 1,
       IF (home < away,1,0),
       IF (home = away,1,0),
       IF (home > away,1,0),
       CASE 
           WHEN home < away THEN 3
           WHEN home = away THEN 1
           ELSE 0
        END
   FROM `matches`
) AS ERG
LEFT JOIN `teams` t
  ON ERG.TeamId = t.id
GROUP BY Teams, TeamId
ORDER BY SUM(Pts) DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:52:45.950

您可以像这样使用外部联接：

```
SELECT a.team_name, Sum(ERG.P) as 'Matches', Sum(ERG.W) as 'win', Sum(ERG.D) as 'draw', Sum(ERG.L) as 'lost',
       SUM(Pts) as 'points'
  FROM 
    Teams a
    left outer join
    (
    SELECT home Teams, 1 P,
            IF (home > away,1,0) W,
            IF (home = away,1,0) D,
            IF (home < away,1,0) L,
            CASE 
                WHEN home > away THEN 3
                WHEN home = away THEN 1 
                ELSE 0
            END PTS
      FROM `matches`

    UNION ALL
    SELECT away Teams, 1,
            IF (home < away,1,0),
            IF (home = away,1,0),
            IF (home > away,1,0),
            CASE 
                WHEN home < away THEN 3
                WHEN home = away THEN 1
                ELSE 0
            END
      FROM `matches`
    ) AS ERG
    on a.team_name=ERG.Teams
GROUP BY a.team_name
ORDER BY SUM(Pts) DESC 
```

这应该可以很好地为您解决问题。

我还写了一个相当长的[问题和答案](https://stackoverflow.com/questions/12475850/how-can-an-sql-query-return-data-from-multiple-tables)，它解释了联合、连接、外连接和各种其他好东西——我在回答这样的问题时会链接到这些东西。它非常长而详细，并详细解释了所有步骤。

# algorithm - ACM MIPT - One rectangle - sample input 2 incorrect?

> ID：12581252
> 
> 赞同：0
> 
> 时间：2012-09-25T10:40:27.467
> 
> 标签：algorithm

I am not clear about problem 15 (One rectangle) of ACM MIPT (http://acm.mipt.ru/judge/problems.pl?problem=015), specifically sample test case 2\. Shouldn't the maximum rectangle for that case have area 2500 (rectangle being the one with vertices at (25, 25), (0, 50), (50, 100), (75, 75))? Here is the problem statement:

* * *

In the square 0 ≤ x ≤ 100, 0 ≤ y ≤ 100 there are N points with integer coordinates. You should find out rectangle which has no any of given point (*meaning none of the given points??*) inside and has maximum possible area.

Remark: Points are permitted to be on the border of the rectangle.

Input: First line has the number N, 1 ≤ N ≤ 100, next N lines has coordinates of N points.

Output: Your program should output one number — maximum area.

Input#1
1
50 50

Output#1
5000

Input#2
3
25 25
50 50
75 75

Output#2
3750

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:37:09.113

不，给出的答案是正确的。

如果考虑具有以下端点的矩形，则 3750 为面积：

(0, 50), (75, 50), (75, 100), (0,100)。

注意：它接触点：(50, 50) 和 (75, 75) 但里面没有三个点中的任何一个。

希望有帮助！

# objective-c - indexPath.row for whole tableview, not only section?

> ID：12581253
> 
> 赞同：0
> 
> 时间：2012-09-25T10:40:29.297
> 
> 标签：objective-c, uitableview, nsindexpath

I have a tableView wich displays content from an array with objects. But the tableview have sections for each date, and I get the same content in all the sections. I guess `NSDictionary *object = [array objectAtIndex:indexPath.row];` returns the row for the section and not for the total array. How can I get the row count for the whole tableView? Or is it some other way to do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:33:36.577

```
int rowsOffset = 0;
for (int section; section ++; section < indexPath.section) {
  rowsOffset += [[[titles objectAtIndex:section] objectForKey:@"Values"] count];
}

NSDictionary *object = [array objectAtIndex:indexPath.row+rowOffset]; 
```

可能更好：

```
NSArray *theArray = [[titles objectAtIndex:indexPath.section] objectForKey:@"Values"];
NSDictionary *object = [theArray objectAtIndex:indexPath.row]; 
```

# android - how to send image from one activity to another, using listview item

> ID：12581255
> 
> 赞同：-1
> 
> 时间：2012-09-25T10:40:38.460
> 
> 标签：android, android-intent, android-emulator, android-listview, android-activity

problem in sending image from one activity to another but able to send text to another activity, placing some source code with file name please see and correct the mistake, if possible so please writedown the required code because i am facing this problem for last two days, i have submitted this question 3 times in stackoverflow but i am not getting good answer, please someone write correct things which i need to do and write required code for me, but here i am placing some code of mine:

MainActivity Code:

```
 list.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
             // getting values from selected ListItem
                String title = ((TextView) view.findViewById
          (R.id.title)).getText().toString();
                String artist = ((TextView) view.findViewById
          (R.id.artist)).getText().toString();
                String duration = ((TextView) view.findViewById
          (R.id.duration)).getText().toString();
                byte[] image = null;
                Bitmap thumb_url = BitmapFactory.decodeByteArray
          (image, 0, image.length);

            //  Bitmap bMap = BitmapFactory.decodeByteArray
          (array, 0, array.length);

                // Starting new intent
                Intent in = new Intent
          (getApplicationContext(),    SingleMenuItemActivity.class);
                in.putExtra(KEY_TITLE, title);
                in.putExtra(KEY_ARTIST, artist);
                in.putExtra(KEY_DURATION, duration);
                in.putExtra(KEY_THUMB_URL, thumb_url);
                startActivity(in);

            }
        });     
    }   
    } 
```

ReceivingActivity Code:

```
public class SingleMenuItemActivity  extends Activity {

// XML node keys
private static final String KEY_TITLE = "title";
private static final String KEY_ARTIST = "artist";
private static final String KEY_DURATION = "duration";
private static final String KEY_THUMB_URL = "thumb_url";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    // getting intent data
    Intent in = getIntent();

    // Get XML values from previous intent
    String title = in.getStringExtra(KEY_TITLE);
    String artist = in.getStringExtra(KEY_ARTIST);
    String duration = in.getStringExtra(KEY_DURATION);

    ImageView image = (ImageView)findViewById(R.id.thumb_url);
    Object thumb_url = null;
    View bitmap = null;
    bitmap.setBackgroundResource((Integer) thumb_url);   
    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.name_label);
    TextView lblCost = (TextView) findViewById(R.id.email_label);
    TextView lblDesc = (TextView) findViewById(R.id.mobile_label);

   //what code to write for image here 

    lblName.setText(title);
    lblCost.setText(artist);
    lblDesc.setText(duration);

}
 } 
```

XML File Code:

```
 <ImageView     
        android:id="@+id/thumb_url"   
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:src="@drawable/rihanna"/>

   <TextView android:id="@+id/name_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="25dip"
        android:textStyle="bold"
        android:paddingTop="10dip"
        android:paddingBottom="10dip"
        android:textColor="#43bd00"/>

      <TextView android:id="@+id/email_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#acacac"/>

    <TextView android:id="@+id/mobile_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textStyle="bold"/>
 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:49:27.187

我可能弄错了，但我认为您尝试通过意图传递的对象的大小有限制（失败的活页夹事务错误？）。

最好的变体是将此图像存储在某处（内存或磁盘缓存）并仅将图像链接传递给您的活动，因此它将从缓存中检索图像。即使第二个活动重新启动，您也可以轻松地将链接保存在某处（onSaveInstanceState），而无需使用原始位图进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:49:30.767

尝试这个

1.

> 使用 Intent = new Intent (your activity.this,SingleMenuItemActivity.class);

代替

> Intent in = new Intent(getApplicationContext(),SingleMenuItemActivity.class);

2.

```
Intent in = getIntent();

    // Get XML values from previous intent
    String title = in.getStringExtra(KEY_TITLE);
    String artist = in.getStringExtra(KEY_ARTIST);
    String duration = in.getStringExtra(KEY_DURATION);
    Bitmap bitmap =(Bitmap) in.getParcelableExtra(KEY_THUMB_URL);

    ImageView image = (ImageView)findViewById(R.id.thumb_url);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.name_label);
    TextView lblCost = (TextView) findViewById(R.id.email_label);
    TextView lblDesc = (TextView) findViewById(R.id.mobile_label);

    image.setImageBitmap(bitmap); 

    lblName.setText(title);
    lblCost.setText(artist);
    lblDesc.setText(duration);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:50:38.957

Bitmap 实现 Parcelable，因此您始终可以在意图中传递它：

```
Intent in = new Intent
      (getApplicationContext(),    SingleMenuItemActivity.class);
            in.putExtra(KEY_TITLE, title);
            in.putExtra(KEY_ARTIST, artist);
            in.putExtra(KEY_DURATION, duration);
            in.putExtra(KEY_THUMB_URL, thumb_url);
            startActivity(in); 
```

并在另一端检索它：

```
Bitmap bitmap = (Bitmap) intent.getParcelableExtra("BitmapImage");
image.setImageBitmap(bitmap); 
```

# html - Suggestions for drawing a bar as shown below

> ID：12581256
> 
> 赞同：0
> 
> 时间：2012-09-25T10:40:40.880
> 
> 标签：html, html5-canvas

depending on the value, we need to draw bars as shown below. What do you suggest? canvas, svg or some charting tools?

![enter image description here](../Images/5764f717eb09aced1e32c967aca5e213.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:44:20.437

为什么不只使用普通的旧`<div>`元素？您可以使用 CSS 宽度作为百分比来设置条的长度，使用固定大小的父元素，这应该可以满足您的需求。下面的示例，根据需要重新设计：

```
<html>
    <head>
        <style>
            div{
                border: 1px solid black;
            }
        </style>        
    </head>
    <body>
        <div style="width: 200px; height: 20px;">
            <div style="width: 30%; height: 18px; background-color: red"></div>
        </div>
    </body>
</html> 
```

# php - config.inc.php 中的变量

> ID：12581260
> 
> 赞同：0
> 
> 时间：2012-09-25T10:40:54.120
> 
> 标签：php, variables, config

我有一个使用 config.inc.php 文件的文件管理器。我想知道如何在这个文件中使用预定义的变量，但我不知道如何。

我想知道如何调用此语法以及如何使用变量。

```
;<?php/* do not delete this line!
[FTP]

; FTP access; leave empty to use local file system instead
ftpHost = "127.0.0.1"   ; FTP server name
ftpUser = "test"        ; FTP user name
ftpPassword = "test"    ; FTP password
ftpPort = 21            ; FTP port number (default is 21)
ftpPassiveMode = yes    ; use passive mode
ftpSSL = no             ; use FTPS 
                        ; do not delete this line! */?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:45:41.873

它看起来像一个`INI`受 PHP 标签保护并使用`parse_ini_file`

之后添加：

```
ftpSSL = no             ; use FTPS 
```

这个：

```
customVar = "var"       ; custom variable 
```

您可以添加其他变量，但我认为您不能从外部分配一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:46:23.860

看看 parse_ini_file 函数：[http://php.net/manual/en/function.parse-ini-file.php](http://php.net/manual/en/function.parse-ini-file.php)

这会将输入文件转换为可以轻松查询的数组。

例如：

```
$ini = parse_ini_file("config.inc.php");
print_r($ini); 
```

# checkbox - 从外部 radgid 事件中选择一个 radgrid 行？

> ID：12581262
> 
> 赞同：1
> 
> 时间：2012-09-25T10:41:02.427
> 
> 标签：checkbox, telerik, radgrid

有没有办法从外部 radgrid 事件中选择一个 radgrid 行，例如从 buttonclick 事件内部？我有一个带有“产品名称”列、其他一些列和一个 GridClientSelectColumn（复选框）的 ragrid。

我的页面也有一个文本框和一个按钮。当用户在文本框中键入产品名称（例如“n”）并按下按钮时，我希望选中包含该特定产品名称的行的复选框。

这可能吗？我之所以想要这个，是因为我的用户将使用条形码扫描仪扫描产品名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:40:25.380

请尝试使用代码片段。

.aspx.cs

```
 protected void Button1_Click(object sender, EventArgs e)
{
    foreach (GridDataItem item in RadGrid1.MasterTableView.Items)
    {
        // By using Datakey
        if (item.GetDataKeyValue("ID").ToString() == "1")
        {
            item.Selected = true;
        }

        // By using column
        if (item["Name"].Text== "Name1") // "Name" is column unique name
        {
            item.Selected = true;
        }
    }
} 
```

.aspx

```
<MasterTableView  DataKeyNames="ID">

            <Columns>
                <telerik:GridBoundColumn DataField="Name" UniqueName="Name" HeaderText="Name">
                </telerik:GridBoundColumn> 
```

# ruby - 确定 Ruby 中的哪个星期天

> ID：12581264
> 
> 赞同：2
> 
> 时间：2012-09-25T04:09:45.880
> 
> 标签：ruby, date-format

使用 Ruby 如何确定即将到来的星期日是本月的第一个、第二个或第三个星期日？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T05:05:49.317

@ElYusubov - 很接近，但不太正确。

作为起点，除以七（一周中的天数）。但是 time.day 给出了从 1 到 31 的日期，所以首先你需要在除法之前减去一个，然后在除法之后加上一个。任何一个月的前八天给...

```
Day number    (Day# - 1) / 7    Week#
----------    --------------    -----
         1      0.0             1
         2      0.14            1
         3      0.29            1
         4      0.43            1
         5      0.57            1
         6      0.71            1
         7      0.86            1
         8      1               2 
```

无论 time.day 给出的是哪一天，那一周#表示它是否是那一周的第一天、第二天等。但你想要*即将到来的*星期天。

wday 给出一个工作日 - 0 到 6，其中 0 表示星期日。那么距离即将到来的周日还有多少天呢？嗯，这取决于你对“即将到来”的定义，但如果你排除今天==星期日，你基本上从 7 中减去今天的工作日。

```
Weekday today     Days until next Sunday
-------------     ----------------------
 0 (Sun)           7
 1 (Mon)           6
 2 (Tue)           5
 3 (Wed)           4
 4 (Thu)           3
 5 (Fri)           2
 6 (Sat)           1 
```

如果您允许“即将到来的”星期日是今天，那么您将做同样的事情，但将七替换为零。您可以进行条件检查，也可以使用模数/余数运算符。

无论如何，一旦您知道即将到来的星期日还有多少天，您就可以计算日期值（将这些天添加到今天的日期），然后使用第一种方法确定该日期而不是今天的月份中的周数（减 1，除以 7，加 1）。

相关词汇...

```
Date.wday        0 to 6 (0 = sunday)
Date.day         1 to 31 
```

我不会尝试提供代码，因为我不了解 Ruby。

# c# - 如何使用 NHibernate 上传大文件？

> ID：12581270
> 
> 赞同：2
> 
> 时间：2012-09-25T10:41:16.780
> 
> 标签：c#, asp.net, .net, nhibernate

问题陈述：

我有一个支持文件上传（即附件）的 aspx 网页。附件的大小最大为 500 MB。我能够获取 HttpPostedFile 但是当将流读取到 Byte[] 并将其保存到数据库时，对于较大的文件会失败。在 NHibernateSession.Flush() 中，抛出内存不足异常。

注意：我最多可以上传 45MB 数据。

如何解决这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:59:28.820

您不应该使用`byte[]`，因为这意味着您必须将整个文件加载到内存中。这是一篇[很好的文章](http://blog.calyptus.eu/seb/2009/03/large-object-storage-for-nhibernate-and-ddd-part-1-blobs-clobs-and-xlobs/)，它说明了如何使用 BLOBS`Streams`来缓解这些问题。可以在[此处](http://blog.calyptus.eu/source-code/)找到文章类型中说明的自定义 Blob 数据的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T08:10:49.357

如果您的数据库是 MS SQL，那么您应该使用[SqlFileStream](http://msdn.microsoft.com/en-us/library/system.data.sqltypes.sqlfilestream%28v=vs.100%29.aspx)。这是一个很好的[例子](http://msdn.microsoft.com/en-us/library/cc716724%28v=vs.100%29.aspx)。

# android - Android - 将文本文件保存到哪里？

> ID：12581273
> 
> 赞同：1
> 
> 时间：2012-09-25T10:41:27.887
> 
> 标签：android, air, path

我正在使用 Adob​​e AIR 构建一个允许用户导入和导出 .txt 文件的 Android 应用程序。用作将 .txt 文件保存到的默认路径的最佳文件夹是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:48:00.007

您应该将文件保存在外部 SD 卡上。[只需在Environment.getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)下创建一个自己的目录，该目录的名称与您的应用程序类似，并将它们全部保存在那里。这几乎是惯例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:44:25.993

您可以将 txt 保存在任何您想要的地方。我建议您尝试将任何文件保存在外部存储器中，如果失败，则将其保存到手机存储器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:45:58.977

最佳路径是 /data/data/your packagename/files/somefile.txt

此位置对特定应用程序是私有的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T11:05:41.300

你有两个选择

> *   将其保存在 SD 卡等外部手机存储中。然而，这对所有用户和应用程序也是可见的。用户可以在您不知情的情况下将其删除。

下一个选项是

> *   将其保存在手机内部存储中，此处没有用户和应用程序可以访问这些文件（除非手机已root）。但是如果用户从 Settings -> Apps -> 中选择清除数据，这些文件将被删除。

您将需要决定哪些选项更好，并相应地选择适当的位置来保存它们

# ipad - PhoneGap 2.1.0 - window.RequestFileSystem

> ID：12581281
> 
> 赞同：1
> 
> 时间：2012-09-25T10:42:14.303
> 
> 标签：ipad, cordova, filesystems, ios6, xcode4.5

我已经更新到 iOS6，因此一直在尝试更新到 PhoneGap 2.1.0 版。（因为相机等似乎在此之前的版本中不起作用 - 我现在已经让这部分工作了）但是当我尝试通过运行以下代码行来访问文件系统时：

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0,  success, fail); 
```

该应用程序只是崩溃了，没有错误等。如果我将此行放在主页上并从模拟器中开始，那么我会收到以下错误：

```
2012-09-25 11:26:38.741 MobileManager[4866:15b03] Multi-tasking -> Device: YES, App: YES
2012-09-25 11:26:59.756 MobileManager[4866:17f03] void SendDelegateMessage(NSInvocation     *): delegate (webView:runJavaScriptAlertPanelWithMessage:initiatedByFrame:) failed to return after waiting 10 seconds. main run loop mode: kCFRunLoopDefaultMode
2012-09-25 11:26:59.766 MobileManager[4866:15b03] -[NSNull intValue]: unrecognized selector sent to instance 0x275678
2012-09-25 11:26:59.767 MobileManager[4866:15b03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSNull intValue]: unrecognized selector sent to instance 0x275678'
*** First throw call stack:
(0x144012 0x257de7e 0x1cf4bd 0x133bbc 0x13394e 0xd953 0x60812 0x5ff9e 0x60379 0x25916b0     0x1119035 0xc7f3f 0xc796f 0xea734 0xe9f44 0xe9e1b 0x33ae7e3 0x33ae668 0x37f65c 0x22b6 0x21e5)
libc++abi.dylib: terminate called throwing an exception 
```

这个错误是什么意思，我该如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:31:16.263

我不小心将 LocalFileSystem 变量设置为其他值（LocalFileSystem.PERSISTENT 未定义。

# android - 打开 DataInputStream 运行很慢

> ID：12581289
> 
> 赞同：0
> 
> 时间：2012-09-25T10:42:35.327
> 
> 标签：android

我正在将文件上传到服务器，根据对文件的处理，我从服务器得到不同的回复。一切正常，但是从服务器获得回复非常慢。我检查了调试器，下面的代码行需要 6 秒才能运行。

```
 inStream = new DataInputStream( connection.getInputStream() ); 
```

我已经在网络浏览器上测试了相同的文件和代码，结果非常完美，大约需要 1 或 2 秒才能显示回复。这是我的完整代码，我认为还可以，但也许这里有些事情没有正确完成。有没有更好的方法来做到这一点？还是一个新的 DataInputStream 总是那么慢？

```
 private String loadImageFromNetwork(String myfile) {
        HttpURLConnection connection = null;
        DataOutputStream outStream = null;
        DataInputStream inStream = null;
        String make = "";
        String model = "";
        String disp = "";
            String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary = "*****";

        int bytesRead, bytesAvailable, bufferSize;

        byte[] buffer;

        int maxBufferSize = 1*1024*1024;

        String urlString = "http://xxxxxxxxxxxxxx/upload.php";
        sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + myfile)));

            try {

            FileInputStream fileInputStream = new FileInputStream(new File(myfile));

            // open a URL connection to the Servlet
            URL url = new URL(urlString);

            // Open a HTTP connection to the URL
            connection = (HttpURLConnection) url.openConnection();

            // Allow Inputs
            connection.setDoInput(true);

            // Allow Outputs
            connection.setDoOutput(true);

            // Don't use a cached copy.
            connection.setUseCaches(false);

            // Use a post method.
            connection.setRequestMethod("POST");

            connection.setRequestProperty("Connection", "Keep-Alive");

            connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

            outStream = new DataOutputStream(connection.getOutputStream());

            outStream.writeBytes(twoHyphens + boundary + lineEnd);
            outStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + myfile +"\"" + lineEnd);
            outStream.writeBytes(lineEnd);

            // create a buffer of maximum size
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            buffer = new byte[bufferSize];

            // read file and write it into form...

            bytesRead = fileInputStream.read(buffer, 0, bufferSize);

                while (bytesRead > 0) {
                        outStream.write(buffer, 0, bufferSize);
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }

            // send multipart form data necesssary after file data...
                outStream.writeBytes(lineEnd);
                outStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

            // close streams
            fileInputStream.close();
            outStream.flush();
            outStream.close();

          }
          catch (MalformedURLException ex) {
                  ex.printStackTrace();
          }

          catch (IOException ioe) {
                  ioe.printStackTrace();
          }

          //------------------ read the SERVER RESPONSE
          try {

               inStream = new DataInputStream( connection.getInputStream() );

                   String str;

                   while (( str = inStream.readLine()) != null)
                   {
                            disp = disp + str;

                   }

                   inStream.close();

          }
          catch (IOException ioex){
                  ioex.printStackTrace();
          }
          return disp;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:53:50.007

您应该移动代码以从服务器读取响应到新线程。前任：

```
private class ReadResponse implements Runnable {
  public void run() {
              //------------------ read the SERVER RESPONSE   
      try {   

           inStream = new DataInputStream( connection.getInputStream() );   

               String str;   

               while (( str = inStream.readLine()) != null)   
               {   
                        disp = disp + str;   

               }   

               inStream.close();   

      }   
      catch (IOException ioex){   
              ioex.printStackTrace();   
      }   
      //return disp; 
      //here you need to show your display on UI thread
    }
  }
} 
```

并在上传文件之前启动阅读线程。

# spring - 无法获取 Hibernate 默认架构

> ID：12581292
> 
> 赞同：2
> 
> 时间：2012-09-25T10:42:45.443
> 
> 标签：spring, hibernate

我正在尝试从 oracle 数据库的两个表中获取一些数据。我定义`MyEntity`了使用注释的类（仅在定义类时`@Entity`不使用`@Table`）。这个实体的休眠看起来像下面的代码：

```
public List<MyEntity> getAll() {
    return oracleSessionFactory.getCurrentSession()
           .createSQLQuery("SELECT a.column1, a.column2, b.column1" +
                    "FROM A_table a JOIN B_table b " +
                    "ON a.column1 = b.column1")
            .addEntity(MyEntity.class).list();
} 
```

我已经设置了休眠的默认模式属性。`default_property`在持久性文件的数据源中。但是，这不适用于以下错误：

`java.sql.SQLException: ORA-00942: table or view does not exist`

当我像下面这样将硬代码添加到 sql 查询中时，程序运行良好。

`"SELECT a.column1, a.column2, b.column1 FROM myschema.A_table a JOIN myschema.B_table b ON a.column1 = b.column1"`,

我怎样才能让我的程序选择默认设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:39:25.333

试试这个添加到 hibernate.cfg.xml 文件中

```
<property name="hibernate.hbm2ddl.auto">update</property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:07:27.667

为您的实体添加注释：

```
@Table(schema="myschema") 
```

# valgrind - 在编译过程中使用 Valgrind 的各种工具

> ID：12581298
> 
> 赞同：2
> 
> 时间：2012-09-25T10:43:11.143
> 
> 标签：valgrind

使用不同的 Valgrind 工具来分析和调试单个程序很容易。我正在做一个有很多模块和包的大项目。（对于路由器 SoC）。

在构建模型时，如何在整个模型的编译过程中使用 Valgrind 进行调试？我是否应该在 makefile 中包含 Valgrind（因为我不想为每个单独的文件单独运行 Valgrind）？我想要的只是在整个大模型的编译过程中，我想要每个单独的 C 程序的 Valgrind 的输出日志文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T00:35:44.633

您可以尝试类似`valgrind --trace-children=yes --log-file="log.%p" the-whole-shebang`. %p 代替了 pid。如果您想跳过某些无趣的部分，您可以添加一些`--trace-children-skip`或选项。`--trace-children-skip-by-arg`有关详细信息，请参阅 valgrind 手册页。或者也许是`--log-socket`和的组合`valgrind-listener`？如果您准备编写少量脚本，那么以这种方式过滤输出会更容易。

# objective-c - 下载两个不同文件夹中的文件ios

> ID：12581306
> 
> 赞同：-2
> 
> 时间：2012-09-25T10:43:31.707
> 
> 标签：objective-c, ios, cocoa-touch, download, asihttprequest

我有一个 iphone 应用程序，它使用 JSON 文件下载 pdf 文件 JSON 响应看起来像这样

```
{
    "resource_id":"1132",
    "name_en":"mpla mpla mpla",
    "name_cn":null,
    "product_id":"1064",
    "product":"mpla",
    "category":"mpla Literature",
    "fileURLString_en":"http://mpla.mpla.com/media/427/mpla.pdf",
    "fileURLString_en_date":"Mon, 03 Sep 2012 08:53:40 GMT",
    "fileURLString_cn":"http://mpla.mpla.com/media/427/mpla.pdf",
    "fileURLString_cn_date":"Mon, 03 Sep 2012 08:53:40 GMT",
    "thumbnailURLString_en":"http://mpla.mpla.com/media/1472/mpla.png",
    "emailURLString_en":null,
    "emailURLString_en_date":null,
    "descriptionString_en":null,
    "emailThumbnailURLString_en":null,
    "emailThumbnailURLString_en_date":null,
    "externalUrl":null
}, 
```

我想下载Library/Caches/en文件夹中的en文件和Library/Cashes/ch文件夹中的中文文件。

我正在使用 ASIHTTPRequest 作为通信部分！您对下载和保存文件到特定文件夹有什么建议（在代码中）？

到目前为止，这是我的代码：

```
 -(void)createDirectory:(NSString *)directoryName atFilePath:(NSString *)filePath
        {
    NSString *filePathAndDirectory = [filePath stringByAppendingPathComponent:directoryName];
    NSLog(@"%@",filePathAndDirectory);
    NSError *error;

    if (![[NSFileManager defaultManager] createDirectoryAtPath:filePathAndDirectory withIntermediateDirectories:NO
                                                    attributes:nil
                                                         error:&error])
    {
        NSLog(@"Create directory error: %@", error);
    }
    }

NSString* filePath=[NSString stringWithFormat:@""];

        NSString *clanguage = [[NSLocale preferredLanguages] objectAtIndex:0];

        if([clanguage isEqualToString:@"en"])
        {
            NSString *cachesPath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject];
            filePath = [NSString stringWithFormat:@"%@/en/%@",cachesPath,urlPath.lastObject];
        }
        else if([clanguage isEqualToString:@"zh-Hans"])
        {
            NSString *cachesPath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject];
            filePath = [NSString stringWithFormat:@"%@/cn/%@",cachesPath,urlPath.lastObject];

        } 
```

我尝试创建两个子文件夹，但无法根据链接将文件保存在其中。我还尝试将文件重命名为英文的名称和中文的ch_name，但这不方便！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:53:47.353

做这个：

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSString *cachePath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) objectAtIndex:0];
if(![fileManager fileExistsAtPath:[cachePath stringByAppendingPathComponent:@"en/mpla.pdf"]]) {
    [downloadedPdfData writeToFile:cachePath options:NSDataWritingAtomic error:&error];

}
if(![fileManager fileExistsAtPath:[cachePath stringByAppendingPathComponent:@"ch/mpla.pdf"]]) {
    [downloadedPdfData writeToFile:cachePath options:NSDataWritingAtomic error:&error];
} 
```

[从这里](https://stackoverflow.com/a/5174708/1106035)检查目录或文件是否存在

# html - 背景图不显示

> ID：12581308
> 
> 赞同：1
> 
> 时间：2012-09-25T10:43:42.547
> 
> 标签：html, css

我的身体背景没有显示。半小时前它工作正常，我不明白为什么它没有在 IE 9 或 Chrome 中显示。它在 Expression Web 4 的预览中显示良好。

它应该看起来像这样 >> [http://imageshack.us/photo/my-images/31/screenshotlrj.jpg/](http://imageshack.us/photo/my-images/31/screenshotlrj.jpg/)

HTML 代码：

```
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Chinatown</title>
<link href="main.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div id="body-1">
    <div id="header">
        <img height="315" src="images/Chinatown-header.png" width="850" />
    </div>
    <div id="title-1">
        <p>We is pleased to announce the launch of our Social Enterprise - Experience Chinatown</p>
    </div>
    <div id="maindescription-1">
        <p>RTE are conducting unique tours to celebrate Chinatown, the beating heart of our culture in.  We will be 
        taking people on a journey through Chinatown on a guided tour about the stories of the locals and pioneers that
        made Chinatown what it is today, and then expanding the experiences with tasting tours of the variety of delicious cuisines
        on offer.  Please see below for more information:</p>
    </div>
</div>
</body>
</html> 
```

CSS：

```
html,
body {
    margin:0;
    padding:0;
    color:#000;
    background: #9c0000;
}
p {
    margin : 0;
    padding : 0;
}
#body-1 {
    width: 870px;
    margin: 0 auto;
    background: #9c0000;
    background-image: url('images/Chinatown-bg.png');
}
#header {
    padding:10px;
    background:#bc0000;
}
#title-1 {
    font: normal normal bold 100% "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande", "Lucida Sans", Arial, sans-serif;
    float: left;
    width: 850px;
    padding: 0 10px 10px 10px;
    color: #FFFF00;
    text-align: justify;
    vertical-align: top;
}
#maindescription-1 {
    font: 100% "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande", "Lucida Sans", Arial, sans-serif;
    float: left;
    width: 850px;
    padding: 0 10px 10px 10px;
    color: #FFFFFF;
    text-align: justify;
    vertical-align: top;
} 
```

有人看到它有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:57:15.243

写成——

```
#body-1 {
    width: 870px; height: 500px;
    margin: 0 auto;
    background: url('images/Chinatown-bg.png') #9c0000 no-repeat left top;
} 
```

编辑：

它必须隐藏在那里。尝试为 ID 设置一些高度 -

在这里检查[**JSFiddle**](http://jsfiddle.net/wG3fa/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:22:28.840

***[演示](http://tinkerbin.com/2zj03aMv)***

您好，现在`overflow:hidden;`在您的`#body-1` **id中定义**

像这样

```
#body-1 {
   overflow:hidden;
 } 
```

***[现场演示](http://tinkerbin.com/kqjQCULZ)***

## ----------------------------

## ----------------------

**其次**是

```
#body-1:after{
content:'';
  clear:both;
  overflow:hidden;
display:block;
} 
```

***[现场演示](http://tinkerbin.com/evBRraJg)***

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T11:08:09.700

请试试这个

```
#body-1 {
    width: 870px;
    margin: 0 auto;
    background: #9c0000 url('images/Chinatown-bg.png')  no-repeat 0 0;
} 
```

# macos - 在 mac os 上托管 tomcat

> ID：12581309
> 
> 赞同：1
> 
> 时间：2012-09-25T10:43:48.677
> 
> 标签：macos, tomcat, hosting, router

我正在使用 mini mac 和 tomcat 7.0.29，我想从我的计算机托管它，以便网络外的其他计算机可以连接到它。我已将端口转发设置为 80 开始和结束。在我的迷你 Mac 上设置静态 IP。但是，在从 ip2location.com 获取路由器 IP 地址并从外部计算机访问它后，它显示“它可以工作！” 屏幕，而不是tomcat主页。当我使用 localhost 而不是 localhost:8080 时，也会显示此页面。这是我从两台计算机上拍摄的一些快照 [http://i182.photobucket.com/albums/x38/DNK90/staticIP.jpg](http://i182.photobucket.com/albums/x38/DNK90/staticIP.jpg)

[http://i182.photobucket.com/albums/x38/DNK90/portforwarding.jpg](http://i182.photobucket.com/albums/x38/DNK90/portforwarding.jpg)

这是来自外部计算机

i182.photobucket.com/albums/x38/DNK90/tomcat.jpg

谁知道如何通过路由器IP直接访问localhost：8080，告诉我^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:56:28.490

那么问题是，在端口 80 上，正在调用 apache 以寻求答案。您将不得不配置您的 NAT 有点不同。您可以在路由器上找到一个选项，将每次对端口 80 的呼叫转发到 mac mini 上的端口 8080，或者使用 ipfw（在 linux 机器上使用 iptables）。尝试

```
sudo ipfw add fwd 127.0.0.1,80 tcp from me to 127.0.0.1 dst-port 8080 
```

我现在面前没有mac，所以这个命令未经测试，但我认为它会起作用。

附言。回到家后，我将测试命令并编辑这篇文章。

# java - 局部变量如何保存在内存中？

> ID：12581310
> 
> 赞同：0
> 
> 时间：2012-09-25T10:43:49.910
> 
> 标签：java

我想知道如何在内存中放置一个局部变量？在方法 1 中，变量是否会一次进入内存？在方法2中，每次删除内存中的旧位置后，变量是否会占一个位置？

```
public void method1() {
    Object obj = null;
    for(.....) {
        obj = come from other-->

    }
}

public void method2() {
    for(.....) {
        Object obj = come from other-->
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:45:53.943

您有一个局部变量，它可能在寄存器中或曾经在内存中。

您还有一个局部变量引用的对象。这将在两种情况下的每次迭代中创建。

它们实际上是相同的，但如果可能的话，我更喜欢第二种情况，因为它缩小了局部变量的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:48:51.033

每个方法调用都与存储在调用堆栈中的激活记录相关联。激活记录保存对堆中与方法级变量相对应的内存块的引用。一旦方法调用返回给调用者，此激活记录将从堆栈中删除，并且内存引用可能可用于垃圾收集。

在你的情况下，

1.  在`obj`第一种方法中，它的引用存储在调用堆栈中，实际内存在堆上，每次方法调用都会执行一次。
2.  第二种方法中的`obj`for 循环在每次迭代中创建一次，并在每次迭代结束时超出范围。因此，每次迭代都会分配堆上的引用和内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T10:51:36.953

局部变量通常（除非例如优化掉）保存在堆栈内存中。但它们只能存储原始值或引用。引用的对象本身通常分配在堆上（经受任何 JIT 优化）。

请参阅[基于堆栈的内存分配（维基百科）](https://en.wikipedia.org/wiki/Stack-based_memory_allocation)与[基于堆的内存分配（维基百科）](https://en.wikipedia.org/wiki/Memory_management#Dynamic_memory_allocation)。

在堆栈上存储值**非常便宜**。类似于函数调用，您将返回指针存储在堆栈中。它只需要增加堆栈指针即可（您可以想象增加专用 CPU 寄存器的速度很快！）

对象本身是不同的。请注意，理论上，某些 java 编译器或 JIT 可能能够更好地优化您的第二个代码，因为您清楚地表明下一次迭代不需要该值。（一个更好的编译器应该能够自己解决这个问题。）

一般来说，现代编译器*应该*在对这两种情况进行优化后生成相同的机器代码。（这可能发生在 JIT 编译器中，因此 Java 字节码可能仍会显示差异）。

无论如何：**不要试图通过重用局部变量来过度优化**。相反，编写显式代码并让编译器进行优化。通过在循环中使用新变量，您可以明确表明它不会在任何地方重用。这样可以防止一些编程错误！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T10:48:41.817

我相信在这两种情况下，每次迭代都会在内存中创建一个新对象。垃圾收集器会注意到除了最新的“最近”对象之外没有任何引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T10:51:47.820

method1 和 method2 中的对象会被放到堆中，但是 java 编译器会进行**[Escape 分析](http://en.wikipedia.org/wiki/Escape_analysis)**来判断我们是否需要在方法执行后释放这种对象。逃逸分析在 Java 标准版 6 中实现

# android - Android：为什么按钮在不同的 API 级别看起来不同？

> ID：12581311
> 
> 赞同：0
> 
> 时间：2012-09-25T10:43:50.480
> 
> 标签：android, android-layout

我的布局中有一个**按钮**，我为它使用了背景。但是这个**按钮**在不同的 API 级别看起来不同。

在 API 7 (Android 2.1)

![在此处输入图像描述](../Images/84558a856ca82f6a9a4279e1cfc8ed8f.png)

在 API 15 (Android 4.0.3)

![在此处输入图像描述](../Images/d6beaab7f1aa84bb31ed956df108d943.png)

这是我的布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="110px"
    android:layout_height="134px"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="10dp"
    android:background="@drawable/imageview_bg" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toLeftOf="@+id/imageView1"
    android:text="title" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_toLeftOf="@+id/imageView1"
    android:text="price" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/imageView1"
    android:layout_alignParentLeft="true"
    android:background="@drawable/button_small_green_bg"
    android:gravity="center"
    android:text="Button"
    android:textColor="#ffffff"
    android:textSize="13sp" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:47:35.693

首先，您不应该为 ImageView 使用像素值，但这不是您的问题。我不知道为什么它看起来不同，但我猜默认填充/边距会根据 API 发生变化（如果我错了，请纠正我）。尝试在 xml 中设置按钮的填充和边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:47:47.853

可绘制文件夹未正确管理。为 hdpi、mdpi、ldpi 或您想要支持的任何分辨率提供适当的背景图像。

# c# - 单选按钮选择不应被任何人更改

> ID：12581312
> 
> 赞同：1
> 
> 时间：2012-09-25T10:43:53.130
> 
> 标签：c#, radio-button

我在 C# 的 aspx 页面中创建了一个单选按钮列表

```
<asp:RadioButtonList ID="RblMentor_teacher_student" class="case"  runat="server"
                        RepeatDirection="Horizontal" AppendDataBoundItems="False" >
                        <asp:ListItem Text="Docent" Value="0"></asp:ListItem>
                        <asp:ListItem Text="Mentor" Value="1"></asp:ListItem>
                        <asp:ListItem Text="Student" Value="2"></asp:ListItem>
                    </asp:RadioButtonList> 
```

它可以完美地工作，因为它显示所选的人是老师或学生或导师。

但我希望没有人可以改变这个选择。

任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:47:05.577

您可以将`Enabled`属性设置为`false`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:47:22.983

你可以把它放在你的`Page_load()`，它会禁用整个列表。

```
RblMentor_teacher_student.Enabled = false; 
```

或者您可以禁用特定的列表项

```
<asp:ListItem Text="Docent" Value="0" Disabled="Disabled"></asp:ListItem> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T10:50:36.370

在单选按钮的**selectedindexchanged**事件上..然后为所选项目设置启用属性 false

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T11:23:41.703

使用 jQuery：

**使用它的好处是检查的值将始终在提交时发布。**

```
 $(function () {
            $("input[type=radio]", $("#<%= RblMentor_teacher_student.ClientID%>")).each(function (index) {
                if ($(this).attr("checked") != "checked") {
                    $(this).attr("disabled", "disabled");
                }
            });
   }); 
```

# c# - 如何将多个表合并为一个

> ID：12581314
> 
> 赞同：1
> 
> 时间：2012-09-25T10:43:58.383
> 
> 标签：c#, sql, database

如何将多个表合并为一个？

我有 3 个带有列名的数据表：`Test 1, Test 2 and Test3`

数据表有 3 行带有值。

我希望它们在一个数据表中，如下例所示

```
TEST 1  |  TEST2  |  TEST 3 
```

我尝试了合并功能`dt1.merge(dt2)`，但它为每列添加了额外的 3 行。

该表为`DataGridView`.

这是关于我如何从数据库中检索表的代码示例。

```
 string queryStatusTest =
               "SELECT status AS 'uppgift " + t +"' FROM b_personuppgift
                        WHERE uppgiftid IN(SELECT uppgiftid FROM b_uppgift
                                                   WHERE kursid = 'ABC123') "
                  + "AND uppgiftid=" + t + " ORDER BY uppgiftid";
            DataTable dTest = dataBase.Select(queryStatusTest); 
```

该`database.Select()`函数只返回一个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:51:05.697

我猜那个说**数据库**你的意思是**table**。您可以使用以下语句将所有 3 个表中的数据插入到一个表中：

```
INSERT INTO table_all(column1,column2,column3) 
VALUES( 
  (SELECT column1 FROM test1),
  (SELECT column1 FROM test2),
  (SELECT column1 FROM test3),
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:13:22.147

此问题的最常见原因是您尚未在 DataTables 上设置主键。Merge 方法使用主键来匹配行。

MSDN 中的[Merge 方法文档指出：](http://msdn.microsoft.com/en-us/library/fk68ew7b.aspx)

> 将新的源 DataTable 合并到目标中时，任何 DataRowState 值为 Unchanged、Modified 或 Deleted 的源行都会与具有相同主键值的目标行匹配。DataRowState 值为已添加的源行与具有与新源行相同的主键值的新目标行匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:16:18.293

假设 3 列类型是字符串：

```
var mergeTable = dt1.AsEnumerable()
     .Concat(dt2.AsEnumerable())
     .Concat(dt3.AsEnumerable())
     .GroupBy(row => new { 
                        Test1 = row.Field<string>("Test1")
                        Test2 = row.Field<string>("Test2") 
                        Test3 = row.Field<string>("Test3") 
                        })

     .Select(g => g.First())
     .CopyToDataTable(); 
```

# android - Android：API 中的 bitmap.getByteCount() 小于 12

> ID：12581322
> 
> 赞同：21
> 
> 时间：2012-09-25T10:44:28.910
> 
> 标签：android, getimagesize

当我在将图像保存到 SD 卡之前搜索如何找到图像的大小时，我发现了这个：

```
bitmap.getByteCount(); 
```

但是该方法是在 API 12 中添加的，我正在使用 API 10。所以我再次发现了这一点：

**getByteCount() 只是一种方便的方法，它完全按照您在 else 块中放置的操作。换句话说，如果你简单地重写 getSizeInBytes 以始终返回“bitmap.getRowBytes() * bitmap.getHeight()”**

这里：

[Bitmap getByteCount() 到底在哪里？](https://stackoverflow.com/questions/6428193/where-the-heck-is-bitmap-getbytecount#comment-12827232)

所以，通过计算这个`bitmap.getRowBytes() * bitmap.getHeight()`我得到了价值`120000 (117 KB)`。

其中 SD 卡上的图像大小为`1.6 KB`.

我错过了什么？还是做错了？

谢谢你

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-29T21:53:13.957

## **你做对了！**

确定这些值是否有效的一种快速方法是像这样记录它：

```
int numBytesByRow = bitmap.getRowBytes() * bitmap.getHeight();
int numBytesByCount = bitmap.getByteCount();
Log.v( TAG, "numBytesByRow=" + numBytesByRow ); 
Log.v( TAG, "numBytesByCount=" + numBytesByCount ); 
```

这给出了结果：

```
03-29 17:31:10.493: V/ImageCache(19704): numBytesByRow=270000
03-29 17:31:10.493: V/ImageCache(19704): numBytesByCount=270000 
```

所以两者都在计算相同的数字，我怀疑这是**位图的内存大小。** 这与磁盘上的**JPG**或**PNG**不同，因为它是完全未压缩的。

* * *

有关更多信息，我们可以查看 AOSP 和示例项目中的源代码。这是Android 开发者文档**[Caching](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)** **Bitmaps 中示例项目BitmapFun中使用的文件**

**[AOSP ImageCache.java](http://code.google.com/p/adamkoch/source/browse/bitmapfun/src/com/example/android/bitmapfun/util/ImageCache.java)**

```
/**
 * Get the size in bytes of a bitmap in a BitmapDrawable.
 * @param value
 * @return size in bytes
 */
@TargetApi(12)
public static int getBitmapSize(BitmapDrawable value) {
    Bitmap bitmap = value.getBitmap();

    if (APIUtil.hasHoneycombMR1()) {
        return bitmap.getByteCount();
    }
    // Pre HC-MR1
    return bitmap.getRowBytes() * bitmap.getHeight();
} 
```

如您所见，这是他们使用的相同技术

```
bitmap.getRowBytes() * bitmap.getHeight(); 
```

* * *

参考：

*   [http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)
*   [http://code.google.com/p/adamkoch/source/browse/bitmapfun/](http://code.google.com/p/adamkoch/source/browse/bitmapfun/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T10:41:20.763

现在我正在使用这个：

```
ByteArrayOutputStream bao = new ByteArrayOutputStream();
my_bitmap.compress(Bitmap.CompressFormat.PNG, 100, bao);
byte[] ba = bao.toByteArray();
int size = ba.length; 
```

获得总字节数作为大小。因为我在这里得到的值完全匹配 SD 卡上图像的大小（以字节为单位）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T14:34:39.403

什么都没有！您的代码片段显示了来自 Android-Source 的确切实现：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/graphics/Bitmap.java#Bitmap.getByteCount%28%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/graphics/Bitmap.java#Bitmap.getByteCount%28%29)

我认为大小的差异是图像压缩（jpg等）的结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-15T06:54:44.603

这是另一种方法：

```
public static int getBitmapByteCount(Bitmap bitmap) {
    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB_MR1)
        return bitmap.getRowBytes() * bitmap.getHeight();
    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.KITKAT)
        return bitmap.getByteCount();
    return bitmap.getAllocationByteCount();
} 
```

来自 IDE 的声明`getAllocationByteCount()`：

> 如果重新使用位图来解码较小尺寸的其他位图，或者通过手动重新配置，这可能大于 getByteCount() 的结果。请参阅 reconfigure(int, int, Bitmap.Config)、setWidth(int)、setHeight(int)、setConfig(Bitmap.Config) 和 BitmapFactory.Options.inBitmap。如果不以这种方式修改位图，则该值将与 getByteCount() 返回的值相同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T06:16:45.420

你可以试试这个代码吗

```
int pixels = bitmap.getHeight() * bitmap.getWidth();
int bytesPerPixel = 0;
switch(bitmap.getConfig()) {
case ARGB_8888:
bytesPerPixel = 4;
break;
case RGB_565:
bytesPerPixel = 2; 
 break;
case ARGB_4444:
bytesPerPixel = 2; 
 break;
case ALPHA_8 :
 bytesPerPixel = 1; 
 break;
}
 int byteCount = pixels / bytesPerPixel; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T18:43:33.087

sd 卡上的图像有不同的大小，因为它是压缩的。在设备上，它将取决于宽度/高度

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-13T15:46:52.067

你为什么不尝试在1024之间划分它？获取 KB 而不是 Bytes。

# google-chrome - 使用 javascript?Mobile 获取滚动位置（Android 4.0.4 Webkit）

> ID：12581328
> 
> 赞同：5
> 
> 时间：2012-09-25T10:44:41.490
> 
> 标签：google-chrome, mobile, webkit, scroll, touch

在**带有默认浏览器的三星 S3 中**，所有列出的本机 js 和 Jquery 代码均不提供

```
$('html').scrollTop()

window.pageYOffset

document.documentElement.scrollTop

document.body.scrollTop 
```

不提供滚动位置并**返回 0**。我还不能测试很多手机，但我想这个问题也可能出现在其他 Android 手机上。至少三星的。

**安装**Chrome后****出现第二个问题**，位置正确，但是这一次，Chrome 没有给**touchmove**事件提供预期的反馈。触摸开始时仅抛出一次。所以添加了下面列出的所有事件**

 **```
touch

touchend

touchmove

touchstart 
```

**但没有变化**。再次仅在开始时或触摸屏幕时抛出一次。所以它会导致项目工作流程的延迟..

有任何想法或解决方法来解决它。这是我们的测试页面：

[http://manifakture.com/clients/zete](http://manifakture.com/clients/zete)**

# google-docs-api - 当网站关闭时，SMS 警报没有收到免打扰号码

> ID：12581329
> 
> 赞同：0
> 
> 时间：2012-09-25T10:44:42.490
> 
> 标签：google-docs-api

我正在尝试使用[使用 Google Docs 脚本进行监控的文章](http://www.labnol.org/internet/website-monitoring-with-sms-alerts/25382/)来找出网站的正常运行时间和停机时间。当站点关闭时，该脚本还会使用 SMS 发送文本消息。

我使用了 5 个手机号码进行测试，其中只有一部手机能够收到通知。其他 4 部手机已 [激活 DND（请勿打扰）](http://www.nccptrai.gov.in/nccpregistry/)，我认为这是 SMS 无法发送的原因。

我担心的是，当我输入 DND（请勿打扰）号码时，当我与谷歌日历关联时，他们得到了验证码，并且在输入验证码后他们注册了。因此，为了进行验证，他们收到了 SMS，但是当网站关闭或启动时，他们没有收到警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:17:04.087

像[downnotifier.com](http://www.downnotifier.com)这样的服务也是免费的（除了 SMS 消息的价格），并且可以做这些事情。

# java - 多线程通信：AtomicInteger 等原子变量的使用效果如何？为什么没有 AtomicFloat？

> ID：12581332
> 
> 赞同：5
> 
> 时间：2012-09-25T10:44:46.120
> 
> 标签：java, android, multithreading

介绍：

我想创建一个多线程的 android 应用程序。我的问题是线程之间的通信。我阅读了有关线程之间的通信的文章，并且遇到了诸如 Looper/Handler 设计之类的东西，这似乎很复杂，还有诸如 AtomicInteger 之类的原子变量。目前，我使用 AtomicInteger 作为通信工具，但由于我在 Java 方面的经验不是很丰富，我不确定这对我的情况是否不利/是否有更好的解决方案来满足我的特定目的。当我注意到我实际上需要像 AtomicFloat 这样的东西时，我也对我的方法有点怀疑，但它并不存在。我觉得我错过了这个概念。我还发现你可以让自己成为 AtomicFloat，但我只是不确定我是否走在正确的道路上，或者是否有更好的技术。

问题： **为我的特定目的使用原子变量并实现 AtomicFloat 是否可以/很好（如下所述），还是有更好的处理通信的方法？**

**到目前为止使用 AtomicVariables 的应用程序的目的/架构：**

我有 4 个线程，目的如下：

1.SensorThread：读取传感器数据并将最新的值保存在 AtomicVariables 中，例如

```
AtomicFloat gyro_z,AtomicFloat gyro_y, ... 
```

2.CommunicationThread：与 PC 通信，解释来自套接字的命令，并根据 AtomicInteger：AtomicInteger 状态设置应用程序的状态；

3.UIThread：显示来自AtomicFloat gyro_z，AtomicFloat gyro_y，的当前传感器值，

4.ComputationThread：使用传感器值`AtomicFloat gyro_z,AtomicFloat gyro_y, ...`和状态`AtomicInteger state`进行计算并通过USB发送命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:38:29.577

你基本上有一个读者作家的问题，有两个读者，（目前）只有一个作家。如果您只想在线程之间传递简单类型，AtomicInteger 或类似实现的 AtomicFloat 就可以了。

然而，一个更适合的解决方案，它可以让您使用更复杂的数据类型，它将是一个 ReadWriteLock 保护您读取或写入对象数据的代码：

例如：

```
private ReadWriteLock readWriteLock = new ReentrantReadWriteLock(); //the reentrant impl

....

public void readMethod() {

    readWriteLock.readLock().lock();

    try {
        //code that simply _reads_ your object
    } finally {
        readWriteLock.readLock().unlock();
    }

}

public void writeMethod() {

     readWriteLock.writeLock().lock();

     try {
        //... code that modifies your shared object / objects
     } finally {
         readWriteLock.writeLock().unlock();
     }
} 
```

这只会启用“仅一个编写器”或“多个读取器”方案来访问您的共享对象。

例如，这将使您能够使用如下所示的复杂类型：

```
public class SensorRead {

    public java.util.Date dateTimeForSample;

    public float value;

} 
```

使用此数据类型时，您应该注意这两个字段是否已安全且原子地设置和修改。AtomicXXX 类型对象不再有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:20:57.023

您必须首先问自己是否真的需要理论的功能`AtomicFloat`。与简单相比，您可以拥有的唯一好处`volatile float`是`compareAndSet`and`addAndGet`操作（因为我猜在浮点数的情况下递增和递减实际上没有意义）。

如果您真的需要这些，您可以通过研究以下代码来实现它们`AtomicInteger`：

```
public final int addAndGet(int delta) {
    for (;;) { 
       int current = get();
       int next = current + delta;
       if (compareAndSet(current, next))
           return next;
    }
} 
```

现在这里唯一的问题是`compareAndSet`使用浮点不存在的特定于平台的调用，因此您可能需要通过使用`Float.floatToIntBits`获取 int 的方法来模拟它，然后使用 CAS `AtomicInteger`，例如：

```
private volatile float value;

public final boolean compareAndSet(float expect, float next) {
    AtomicInteger local = new AtomicInteger();
    for(;;) {
        local.set(Float.floatToIntBits(value)); 
        if(local.compareAndSet(Float.floatToIntBits(expect), 
                               Float.floatToIntBits(next)) {
            set(Float.intBitsToFloat(local.get()));
            return true;
        }
    } 
}

public final float addAndGet(float delta) {
    for (;;) { 
       float current = get();
       float next = current + delta;
       if (compareAndSet(current, next))
           return next;
    }
} 
```

# android - 安卓应用耗电量

> ID：12581333
> 
> 赞同：10
> 
> 时间：2012-09-25T10:44:53.033
> 
> 标签：android

如何查看Android中各个应用的耗电量？
与不同的应用程序相比，至少功耗应该是相对的，这些应用程序可能正在使用任何服务，如 WIFI、GPS、LCD、wakelock 等。

为了测量使用上述资源的应用程序的功耗，android中是否有任何关于相同的API？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T11:39:57.437

有[一篇](http://web.eecs.umich.edu/~zmao/Papers/powertutor_cases2010.pdf)名为“Accurate Online Power Estimation and Automatic Battery Behavior Based Power Model Generation for Smartphones”的研究论文。对于本文，研究人员开发了一种名为 PowerTutor 的工具，您可以在[此处](https://github.com/msg555/PowerTutor)找到其来源。应该提到的是，您的设备必须植根才能使用此应用程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-10T09:57:17.670

首先，来自 Google Play 的 powertutor 已经过时了。我查看了它的源代码，发现功率估计模型是针对一些旧的移动模型的。电源导师的值远小于实际功耗。

因此，我建议您使用谷歌开发的[Battery Historian](https://developer.android.com/studio/profile/battery-historian.html)来估算每个 App 的电池消耗。但它是用 Python/Go 编写的。它将在 html 文件中说明硬件调用。您可以在相应的文本文件中找到每个 App 的电池消耗情况。

[Battery Historian 示例](https://i.stack.imgur.com/qqxTI.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-04T21:26:40.257

查看[Powertutor](https://play.google.com/store/apps/details?id=edu.umich.PowerTutor&hl=en)。根据我的经验，这是衡量应用程序功耗的最佳应用程序。它不是 100% 准确，但足以进行估计。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-02T15:04:03.260

您无法以编程方式检查每个应用程序的电池消耗。相反，您可以像这样检查整体消耗：

energyLeftInmAh = 设备电池容量（mAh）* 电池电量（%）* 0.01；

例如 Nexus 5，电池容量：2300 mAh

```
 mBatteryManager = (BatteryManager)MainActivity.this.getSystemService(Context.BATTERY_SERVICE);
  int level = mBatteryManager.getIntProperty(BatteryManager.BATTERY_PROPERTY_CAPACITY);
  double mAh = (2300 * level * 0.01); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-19T18:24:22.410

（免责声明：我与人共同创立了制造以下产品的公司）

试试[Little](http://www.littleeye.co) Eye Labs 的 Little Eye，就是这样做的。可以跟踪单个应用程序的功率并通过 CPU/显示器和 Wifi 获得故障（即将推出的版本将支持 GPS 和 3G）。它还超越了电源并跟踪单个应用程序的数据、内存和 CPU 消耗。请注意它是一个桌面工具，您需要从[这里](http://www.littleeye.co)下载和安装。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-25T10:55:49.177

从 ICS 开始，查看哪个电池消耗了多少电池的一个简单指南是检查设置->电池。这里显示了应用程序消耗的百分比。其他方法可以是通过密集使用该应用程序来物理监控电池电量下降，例如，在您开始使用该应用程序之前，电池电量可能为 80%。然后您尝试 30 分钟，然后再次检查电池电量百分比。

# c++ - 可以在数据报套接字中使用发送和接收吗？

> ID：12581334
> 
> 赞同：2
> 
> 时间：2012-09-25T10:45:00.573
> 
> 标签：c++, c, sockets, networking

我的 MasterSlaveSynchronize 类用于发送和接收心跳。是否可以只有一个数据报套接字同时用于发送和接收？

下面的2种方法不定时运行，可以同时运行。

```
void MasterSlaveSynchronize::sendHearBeat() {
    const int HEARBEAT_LEN = 1;
    const char HEARBEAT[1] = { '1' };

    int n = sendto(sock, HEARBEAT, HEARBEAT_LEN, 0,(const struct sockaddr *) &target_, length_);
    if (n < 0)
        printf("Sendto"); //TODO ERR
}

void MasterSlaveSynchronize::recivedHearBeat() {
    char buf[1024];
    if (bind(sock, (struct sockaddr *) &this_, length_) < 0)
        printf("binding"); //TODO err
    while (1) {
        int n = recvfrom(sock, buf, 1024, 0, (struct sockaddr *) &target_,&length_);
        if (n < 0)
            printf("recvfrom"); //TODO ER
        //TODO update got hearbeat
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:58:33.387

`sendto`是的，对and使用相同的套接字很好（确实是预期的）`recvfrom`。

但是，您的`recivedHearBeat()`功能永远不会退出。没关系，如果它在单独的线程中运行。

# java - 多线程应用程序有哪些有用的 JVM 选项？

> ID：12581337
> 
> 赞同：1
> 
> 时间：2012-09-25T10:45:08.960
> 
> 标签：java, garbage-collection, jvm

我正在开发一个创建大量线程并严重依赖字符串操作的应用程序。
该应用程序一次可以运行 24 小时，并且需要始终保持响应速度。
我试图将对象的创建保持在最低限度。该应用程序目前运行良好，无需任何配置。

但是我想知道使用特定的 JVM 配置是否有任何优势（或劣势）？

请多多包涵，我对 JVM/GC 配置的主题还很陌生：

*   我想知道在使用多线程时是否绝对应该使用任何 JVM 选项？
    *   我应该配置堆吗？
    *   我还应该配置 GC 吗？
    *   我应该尽量减少垃圾收集吗？

    我开始阅读：[http](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)
    ://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html 关于该主题的任何提示将不胜感激。

    提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T10:49:56.407

一般来说，关于调整 JVM 的最佳初始建议是**不要**。除非您在使用默认设置时遇到与 JVM 相关的特定问题，否则不要理会它们。

如果您确实需要摆弄设置，我建议您设置一个有代表性的测试用例并使用高级分析器，例如[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html?gclid=CJ_a1bPH0LICFaXKtAodVTsACQ)。

此外，您应该真正阅读有关 HotSpot VM 的技术文档，特别是内存管理白皮书，您可以在[此处](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-140228.html)找到所有这些文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T10:50:26.360

**如果它工作正常，那么你不应该做任何事情。**

如果您的应用程序受 CPU 限制，则不应创建大量线程。原因是大量时间浪费在上下文切换上。字符串操作，如果它在内存中，那么应该只有那些需要的线程

```
NCPU = UCPU* (1+W/C)

Where  NCPU--> Number of CPU
UCPU--> Target CPU Utilization
W-->Wait time
C--> Compute time 
```

因此，对于 CPU 绑定操作，它应该是最大（CPU 数量 +1）线程。

Java Concurrency in Practice 中也为并发应用程序定义了很多测试用例。你可能想检查那些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T11:02:10.783

> 我想知道在使用多线程时是否绝对应该使用任何 JVM 选项？

默认情况下，所有最佳选项都将打开。如果您查看[HotSpot VM 选项](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)，您会看到很多选项，`-XX:+`这意味着它们默认处于打开状态。

> 我应该配置堆吗？

可能。但如果可以的话，我会保留默认设置。

> 我还应该配置 GC 吗？

可能。但如果可以的话，我会保留默认设置。

> 我应该尽量减少垃圾收集吗？

减少产生的垃圾量需要付出努力。它在一定程度上提供了一些好处。你必须决定什么是最好的利用你的时间，以及花多少时间来减少产生的垃圾量。

我总是从内存分析器开始，找出你在哪里创建了最多的垃圾。从列表的顶部开始，而不是尝试调整所有内容，因为这样可以确保您以最少的努力获得最大的收益。

* * *

顺便说一句：我提倡低垃圾和堆外程序，这样做是有意义的。我已经编写了可以运行一天的交易系统，甚至可以在没有次要 GC 的情况下运行，以及可以在堆外内存中加载/使用 500+ GB 数据的程序。但是，您必须能够证明或量化它将对最终用户或您的业务产生多大的影响，以确定它是否真的值得。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T11:00:51.280

> 我想知道在使用多线程时是否绝对应该使用任何 JVM 选项？

不。

> 我应该配置堆吗？

不，除了将堆大小设置为合理的值（使用 -Xmx 和 -Xms）

> 我还应该配置 GC 吗？

不，除非您特别需要“低暂停”。如果您当前正在满足“响应性”目标，则默认吞吐量编译器是最佳选择。如果您没有达到这些目标，那么您应该考虑 CMS 或 G1 ......但要注意它们会减少暂停，但也会降低吞吐量。

> 我应该尽量减少垃圾收集吗？

不，这不是一个明智的目标。您的目标是最大化吞吐量，而最小化 GC 不一定能实现这一目标。在很多情况下，产生垃圾比让应用程序做额外的工作来避免产生垃圾更有效。（正如 Peter Lawrey 指出的那样，您还需要额外的开发人员来编写和维护模式复杂代码。）

* * *

我建议您使用分析器来查看您的应用程序相对于执行其他生产性工作是否花费了大量时间（CPU 时间或经过的时间）。如果没有，或者应用程序已经运行得足够快，那么不要摆弄 JVM 选项。

如果您担心您的应用程序将来无法应对增加的负载，那么调整 GC 不会扩展。更好的选择是研究扩展您的硬件和/或弄清楚如何在多台机器上完成工作。此外，调整 GC 以提高当前负载的性能实际上可能会导致负载增加时性能更差。（考虑当 CMS 无法跟上并被迫进行完整的全球范围收集以恢复时出现的问题。）

* * *

最后，拥有大量线程通常是个坏主意。最好使用少量工作线程（大致等于处理器/内核的数量）并通过并发队列等为它们提供工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T16:21:24.310

过去，我遇到过类似的服务器应用程序：大量的字符串操作、字符串创建，并且需要始终非常响应。该应用程序在默认配置下运行良好，直到遇到高压力情况。您需要启用 -XX:+UseConcMarkSweepGC 以获得低暂停，并微调其他参数以确保应用程序以您想要的方式运行。这是简短的清单：

-XX:+CMSParallelRemarkEnabled
-XX:+CMSScavengeBeforeRemark
-XX:+UseCMSInitiatingOccupancyOnly
-XX:CMSInitiatingOccupancyFraction=nn
-XX:CMSWaitDuration=300000
-XX:GCTimeRatio=nn
-XX:+DisableExplicitGC

# php - 在单页中使用 ajax 和 php 上传多个表单数据

> ID：12581343
> 
> 赞同：1
> 
> 时间：2012-09-25T10:45:33.283
> 
> 标签：php, javascript, ajax, jquery

我的疑问是如果我有

这些div标签使用jquery使用过渡效果隐藏我想在结果中获得div 1 2 3的结果

```
1 div
  <div id="1">    
   </div>      
2 div
   <div id="2">
    </div>       
3 div
   <div id="3">
   </div>
   <input type="submit" name="first-sudmit" value="NEXT" onclick="result(this.value)" />
    </div>
    <div id="result">   
        result    
    </div> 
```

在js中：

```
<script type="text/javascript">
function showResult()    
{
    alert("dfadsfdasf");
    xmlhttp.open("GET","result.php?q="+str,true);
    xmlhttp.send();
}
</script> 
```

我什至也尝试过序列化.....没有运行php脚本

喜欢

js：

```
<script type="text/javascript">     
function showFormData(oForm) {
   var msg = "The data that you entered for the form with 'name' attribute='" + oForm.name + "': \n";

  submitHandler: function(form) {
                // do other stuff for a valid form
                $.post('result.php', $("#submit_drop,#submit_radio,#submit_check,#submit_text,#submit_drag_text,#submit_drag_img").serialize(), function(data) {
                 $('#results').html(data);
            });           
   alert(msg);
}  
</script> 
```

php:

```
 //page1 process
    if(!ekpty($_POST['first-submit']))
    {
        $first1=$_POST['drop1'];
        $first2=$_POST['drop2'];
        $first3=$_POST['drop3'];
        $first4=$_POST['drop4'];
        $first5=$_POST['drop5'];
      for(i=0;i<=4;i++)
      {         
          $sql="INSERT INTO $score1(correct)VALUES('$first[i]')";        
      }                
    }
    else
    {
          print '<script type="text/javascript">'; 
          print 'alert("page 1 no answer is attempted")'; 
          print '</script>'; 
    }
//output resu;ts
$sql="SELECT count(chkpt) from score1 where chkpt='1'";    
echo $sql; 
```

那么现在如何在最后一个结果 div 标签中获取这些表单的结果.......

请一些人回答这个......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:22:10.523

您的问题有点难以阅读，但是如果我理解您的要求，我相信您的序列化代码会起作用，但是我相信您需要使用包含您希望序列化的元素的表单的 ID。所以：

```
1 div
  <div id="1">
     <form id="firstFormToSubmit">......</form>
   </div>      
2 div
   <div id="2">
     <form id="secondFormToSubmit">......</form>
    </div>       
3 div
   <div id="3">
    <form id="thirdFormToSubmit">......</form>
   </div>
   <input type="submit" name="first-sudmit" value="NEXT" onclick="result(this.value)" />
    </div>
    <div id="result">   
        result    
    </div> 
```

然后处理这些表格：

```
submitHandler: function(form) {
            // do other stuff for a valid form
            $.post('result.php', $("#firstFormToSubmit").serialize(), function(data) {
             $('#results').html(data);
        }); 
```

# java - String中如何输入参数？

> ID：12581345
> 
> 赞同：2
> 
> 时间：2012-09-25T10:45:38.080
> 
> 标签：java

我想把 a 的价值放在`{0}`。使用 C#，我编码为：

```
String a="123"
String b="Xin chao: {0}, ban the nao";
String c=String.Format(b,a); 
```

但是在Java中我不知道。你能帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T10:51:18.457

Java的对应物是[`java.text.MessageFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html)允许使用格式方法替换像您问题中的占位符

```
String a = "123";
MessageFormat.format("Xin chao: {0}, ban the nao", a); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T10:49:17.343

```
String b= "Xin chao: %s";
String bF = String.format(b,"123"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T10:51:24.517

见[`String.format(String format, Object... args)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)。

例如

```
String s = String.format("Xin chao: %1$s", "123"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T10:51:50.537

如果你不知道`{0}`会出现在哪里，你可以使用`String.replaceAll()`方法：

```
 String a = "123";
    String b = "Xin chao: {0}, ban the nao";
    String c = b.replaceAll("\\{0\\}", a); 
```

您可能需要检查[StringEscapeUtils](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html)以进行自动转义。

# iphone - UIScrollview 仅在为空时滚动

> ID：12581348
> 
> 赞同：-2
> 
> 时间：2012-09-25T10:45:43.203
> 
> 标签：iphone, objective-c, ios, xcode

我将 xcode 更新为 4.5，但现在当我制作 à UIScrollview 时，它会停止滚动，只要我在滚动中放置一些东西，如 à 标签或按钮，当我删除它们时，滚动再次起作用

有人知道修复吗？

**代码**

我的 ScrollView 是 320 x 430，在我的 viewdidload 中我使用：

```
 [scroller setScrollEnabled:YES];
    [scroller setContentSize:CGSizeMake(320, 481)]; 
```

**编辑**

我刚刚发现在横向模式下它确实滚动所以也许我设置我的内容大小错误？:S

**编辑#2**

如果我在滚动视图中创建一个文本视图并使文本大于屏幕，它现在可以工作，但是当我将一个按钮放入其中时，按钮不会滚动..

**另外** ，我制作了一个视频，展示了我希望有人能告诉我我做错了什么 [http://www.youtube.com/watch?v=rzYTWLiIC8g&feature=youtu.be](http://www.youtube.com/watch?v=rzYTWLiIC8g&feature=youtu.be)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:04:10.437

您没有足够的内容进行滚动。

请添加更多内容文本。然后只有它滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:41:58.690

“使用自动布局”打开它必须关闭，它将被修复感谢您的所有支持。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T10:59:01.937

将`contentSize`滚动视图的 设置为内容的大小，例如。如果您有 10 行按钮，每行的高度假设为 40 像素，并且填充`contentSize`5 像素，则滚动视图的高度（如果垂直放置内容则为高度，如果水平放置则为宽度）为：10*45.0f+5.0f . 如果这没有帮助，请向我们展示您的代码。

# php - 如何在magento的连接查询中使用另一个没有主键的字段

> ID：12581351
> 
> 赞同：1
> 
> 时间：2012-09-25T10:45:52.547
> 
> 标签：php, magento

```
$this->select->from(array('tip'=>$this->_tipTable))
     ->joinLeft(array('prodname'=>$this->_prodTable),'prodname.item_id = tip.entity_id',array('*'))
     ->where('tip.`reserved_order_id` IS NULL AND tip.`items_count` > 0'); 
```

我只是给出了它的工作原理，但它并没有完全满足我需要检查的要求

```
prodname.quote_id = tip.entity_id' 
```

这里 quote_id 不是主键，它返回一个错误。

请帮我离开这里。我想检查另一个不是主键的字段？

提前致谢！！

# java - 以有效的方式保存各种对象的 ArrayList

> ID：12581361
> 
> 赞同：1
> 
> 时间：2012-09-25T10:46:18.373
> 
> 标签：java, arraylist, abstract-class, abstract

我想知道如何将抽象对象的 ArrayList 保存到文件中。到目前为止，我只保存原始类型或原始类型的 ArrayList，方法是将它们转换为逗号分隔的字符串并将其存储在缓冲读取器中。

但是现在我有一个游戏元素的 ArrayList，它具有非常不同的属性和构造函数，所以我的正常方法行不通。必须有比将每个对象存储到文件或将每种类型的对象存储到文件或添加大量分隔符级别更好的东西。

我该如何以一种好的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:49:21.710

看看序列化，那里有很多教程，所以我不打算发布任何代码：

[http://www.tutorialspoint.com/java/java_serialization.htm](http://www.tutorialspoint.com/java/java_serialization.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:57:00.130

您不能实例化抽象对象，因此您需要一个扩展它的子类。抽象类也应该实现`Serialize`。然后使用`ObjectOutputStream`可以直接写`ArrayList`using`writeObject()`方法。

下面是示例应用程序

```
public abstract class Parent implements Serializable {
    public abstract String getValue(); //Just to show value persist
}

public class Child extends Parent {
    String value = null;
    Child(String value) {
        this.value = value;
    }
    public String getValue() {
        return value;
    }
}
// No throws clause here
public static void main(String[] args) throws FileNotFoundException,
        IOException, ClassNotFoundException {
    //create Arraylist
    ArrayList<Parent> parents = new ArrayList<Parent>();
    parents.add(new Child("test"));
    //store
    ObjectOutputStream objectOutputStream = new ObjectOutputStream(
            new FileOutputStream("test.txt"));
    objectOutputStream.writeObject(parents);
    objectOutputStream.close();
    //Read back     
    ObjectInputStream objectInputStream = new ObjectInputStream(
            new FileInputStream("test.txt"));
    ArrayList<Parent> readObjects = (ArrayList<Parent>)objectInputStream.readObject();
    System.out.println(readObjects.get(0).getValue());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:36:24.263

答案可能是两个。

以后看文件的用途是什么。

ANS 1：如果您希望将对象值临时保存在文件中并从文件中重新加载，那么序列化是最好的选择。

ANS 2：如果文件是程序的输出，然后您尝试以下选项#1：文件中的每一行以唯一的对象名称 OBJECT1、蓝色、粉红色、黄色.... OBJECT2、玫瑰、乳制品、向日葵开始, cauliflower.. option#2 而不是平面文件（txt），您可以使用 apache poi 框架以更有条理的方式编写对象。

# c# - 如何通过 Iphone 访问 .Net MVC4 Mobile 应用程序？

> ID：12581362
> 
> 赞同：1
> 
> 时间：2012-09-25T10:46:19.017
> 
> 标签：c#, iphone, asp.net-mvc-4

我已经开始学习 MVC4，并在简单的移动网站上工作，但我想知道如何通过 iPhone 打开该网站。谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:16:12.403

在 Visual Studio 中打开您的项目，在解决方案资源管理器中右键单击您的解决方案并选择“启用 IIS Express”。这将确保您使用 IIS Express 来测试您的项目。然后运行您的应用程序以确保它像以前一样出现在您的浏览器中，`http://localhost:2121`

现在，在 Windows 中，转到 Documents 或 My Documents，您应该会看到一个名为`IISExpress`. 在这里面有一个名为`Config`. 里面`Config`打开文件`applicationhost.config`。这包含在 IIS Express 上运行的每个项目的设置。

向下滚动，直到您在该`<sites>`部分中找到您的网站。它看起来像这样：

```
<sites>
        <site name="WebSite1" id="1">
            <application path="/">
                <virtualDirectory path="/" physicalPath="%IIS_SITES_HOME%\WebSite1" />
            </application>
            <bindings>
                <binding protocol="http" bindingInformation="*:2121:localhost" />
            </bindings>
        </site>
</sites> 
```

从 中删除，`localhost`所以`bindingInformation`它看起来像这样：

```
<binding protocol="http" bindingInformation="*:2121:" /> 
```

现在保存文件，然后重新启动 IIS Express。最简单的方法是重新启动 Visual Studios。

确保 Windows 或任何防火墙/防病毒程序没有阻止您的 Web 应用程序的端口，在我的示例中它是`2121`，您应该很高兴。

我们所做的是告诉 IIS Express，任何与此端口的连接都是为了访问此站点/应用程序。因此，如果您将路由器设置为将端口转发到您的开发计算机，那么您/任何人都可以访问您的站点，只要您在开发系统中处理它即可。当您进行更改并且只想与 LAN 外部的人核实而无需部署站点时，这很好。

因此，现在您可以在开发系统上运行时从您的 iPhone 或任何其他设备访问应用程序/站点。如果您的 IPhone 未连接到您的局域网中，您需要将端口添加到路由器上的端口转发，如上所述，然后通过您的 IP 地址冒号端口号访问您的站点。您还可以将子域添加到您拥有的网站（或免费的在线 DNS 系统），以便您可以访问您的开发应用程序/站点`http://dev.somedomain.com:2121`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T09:33:15.897

反正对于其他人来说看起来有点晚了。我们可以使用 iis express web 服务器从远程查看站点这里是[从 Lan IIS Express 访问本地站点](http://www.codeplussoft.com/Pages/siteonlan)的分步指南，希望这会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:49:41.910

我想测试您正在开发的站点的最简单方法是找出您的本地 IP 并配置您的 IIS 以从该 IP 为您的开发站点提供服务。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-25T10:54:07.773

Visual Studio 的内置“Web 开发服务器”不允许远程连接。您需要在 IIS 上托管您的应用程序，以便能够从另一台计算机或您的 iPhone 访问该站点。

# uml - 以图表形式完成软件开发

> ID：12581364
> 
> 赞同：1
> 
> 时间：2012-09-25T10:46:28.650
> 
> 标签：uml, visio

我一直认为我们绘制我们想要设计的软件图表。然后我们在（文本）文件中编码。随后是设计更改和代码必须相应更改或代码更改和设计必须更改的过程。

任何方式设计（图表）和代码都是两个不同的实体，都需要彼此同步。

是否有一个系统可以为我们的软件生成图表，然后将代码直接放入图表中（而不是文本文件中）？然后可能是数据流等在同一张图中可视化。我们调试图表而不是文本文件。有意见的朋友吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:34:23.380

我已经测试并使用了 c++ 的 bouml（现在不再是开源的）。

它可以反转您的代码，几乎可以完美地反转 95%，除了通常不会反转的额外定义。但从那里一切都是手动的。您必须手动绘制类图和顺序图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:08:47.687

如果这是关于意见的元问题，那么最好询问元站点或论坛！

但是，如果这是关于从您的 UML 图生成代码的问题。你绝对可以做到。

[Enterprise Architect 中的代码生成](http://www.sparxsystems.com.au/support/faq/code_generation.html)

这是我以前使用过的一种工具。每个类的部分元数据是您描述它的语言。然后，您可以将图表同步到代码或将代码同步到图表...

然而，这些工具中的大多数都不如消除手动编码恕我直言的需要。当你第一次开始编码时，除了构建骨架之外，我还没有使用过这些工具！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:19:57.190

维基百科为您准备了一个 UML 工具列表： [http ://en.wikipedia.org/wiki/List_of_UML_tools#Features](http://en.wikipedia.org/wiki/List_of_UML_tools#Features)

在“生成的语言”列中，您可以看到工具可以从您构建的模型中生成哪些语言的代码。在“逆向工程语言”中，您可以看到工具可以从哪些语言生成模型。

还应该提到，所有工具（至少我知道的那些）在解释 UML 规范的方式上都不同，并且至少大多数工具在某种程度上违反了规范。在您想将模型从一种工具迁移到另一种工具之前，这没什么大不了的。那么这几乎是不可能的。

# mysql - 使用 Doctrine2 的一个很好的 SQL 查询，用于从标签列表中获取项目

> ID：12581365
> 
> 赞同：1
> 
> 时间：2012-09-25T10:46:37.487
> 
> 标签：mysql, symfony, doctrine-orm, many-to-many, query-optimization

我将 Symfony2 与 Doctrine2 和 MySQL 一起使用。

我创建了 2 个实体：

*   文章
*   标签之间有一个多对多的链接。

我正在尝试从标签 ID 列表中获取文章的 OR 和 AND。

一个例子可能更好：

*   文章 1 <-> 标签 1、标签 2
*   第 2 条 <-> 标记 2、标记 3、标记 4
*   第 3 条 <-> 标记 1、标记 4

我会从我的标签 ID [2, 3] 列表中，执行 AND 和 OR 请求，以获取一些文章：

*   AND => [Article2] 是唯一包含这两个标签的。
*   OR => [Article1, Article2] 是唯一具有 tag2 和 tag3 的

我成功地使用循环在 PHP 代码中对多个请求进行了 OR 查询，这实际上根本没有优化。而且我害怕对 AND 的请求数量进行组合爆炸。我知道在 MySQL 中使用 JOIN 有一种正确的方法，我猜是 Doctrine2 语言，两者都在一个请求中，但是我阅读和尝试的文档越多，我就越发现这不是我的计算水平。

如果有人可以在这一点上帮助我，我将不胜感激。

编辑：这是我当前的解决方案，未优化：

```
class TagRepository extends EntityRepository
{
    public function getItemsFromIds($ids)
    {
        $qb = $this->createQueryBuilder('a');
        $qb->where('a.id IN (:ids)')
            ->setParameter('ids', $ids);

        return $qb->getQuery()->getResult();
    }
} 
```

然后在我的 DefaultController.php 中，在处理这些东西的函数中：

```
$finalarticles = array();

$tagsrepository = $this->getDoctrine()
                   ->getEntityManager()
                   ->getRepository('ElephantTagsBundle:Tag');

$tags = $tagsrepository->getItemsFromIds($tagids);
$nbtags = count($tags);

foreach ($tags as $tag) {
    $articles = $tag->getArticles();
    foreach ($articles as $article) {
        $articlestags = $article->getTags();
        $tmpnbtags = 0;
        foreach ($articlestags as $articlestag) {
            if (in_array($articlestag->getId(), $tagids))
                $tmpnbtags += 1;
        }
        if ($tmpnbtags == $nbtags)
            $finalarticles[$article->getId()] = $article;
    }
} 
```

如您所见，此方法包括 3 个 for 循环（我猜是“array_in”中的一个），其中也包括很多 MySQL 调用。我确信在存储库中有适当的方法来做到这一点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:10:59.233

请从资源/配置文件夹中提供您的实体定义。您正在寻找的是所谓的**双向关联映射**。看看文档：

[http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#many-to-many-bidirectional](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#many-to-many-bidirectional)

在您的文章中：

```
<many-to-many target-entity="Tag" inversed-by="articles" field="articles"/> 
```

并在您的标签中：

```
<many-to-many field="articles" target-entity="Article" mapped-by="tags"/> 
```

生成类后，您可以双向添加和获取标签或文章。

请记住，如果要从文章中删除标签，则必须在文章和标签类中实现自定义方法，如下所示：

在文章类中：

```
public function removeTag(\YourBundle\Entity\Tag $tag){
        return $this->tags->removeElement($tag);
} 
```

在标记类中：

```
public function removeArticle(\YourBundle\Entity\Article $article){
        return $this->articles->removeElement($article);
} 
```

# c# - 在 SQL 数据库中存储度量数据时使用什么数据类型？

> ID：12581367
> 
> 赞同：5
> 
> 时间：2012-09-25T10:46:43.773
> 
> 标签：c#, sql-server, sql-server-2012, sqldatatypes

我正在尝试在 SQL Server 2012 中存储度量数据（米、公里、平方米）。

最好使用的数据类型是什么？`float`(C#: double), `decimal`(C#: decimal) 甚至`geometry`? 还是有什么不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T10:48:51.817

`decimal`对您的数据具有适当精度的 a 或类型`int`（如果适用）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T10:50:55.620

这完全取决于应用程序以及您需要的精度。

如果我们谈论的是架构，那么精度需求相对有限，并且`C# 32-bit float`会带您走很长一段路。在 SQL 中，这转换为`float(24)`，也称为数据库类型`real`。此 SQL DB 类型每个条目需要 4 个字节的存储空间。

如果我们想要处理地球表面上的点，则需要更高的精度。这里 a`C# double`是合适的，它对应于 a`SQL float(53)`或 just `float`。这种 SQL DB 类型需要 8 个字节的存储空间，并且应该仅在需要或应用程序很小且磁盘/内存使用不重要时才使用。

这`SQL Decimal`可能是实际 SQL DB 的一个很好的替代方案，但有两个缺点：

1.  它对应于`C# Decimal`为金融用途而设计的类型并防止舍入错误。当在三角方法等中使用时，这种设计使 C# Decimal 类型比 float/double 慢。您当然可以在代码中来回转换，但这不是 IMO 最直接的方法。

    > “Decimal 值类型适用于需要大量有效整数和小数位且无舍入错误的财务计算。” - [MSDN：十进制结构](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)

2.  SQL DB 类型`Decimal`每个条目需要 5-9 个字节的存储空间（取决于使用的精度），这比 float(x) 替代方案大。

所以，根据你的需要使用它。在您的评论中，您声明它与房地产有关，所以我会选择`float(24)`(aka `real`)，它正好是 4 个字节并直接转换为`C# float`. 请参阅：[浮点数和实数 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms173773.aspx)

最后，这里是在 .Net 和 SQL 之间转换不同类型的有用资源：[SqlDbType Enumeration](http://msdn.microsoft.com/en-us/library/system.data.sqldbtype.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T10:50:13.463

取决于您想要做什么
float 或 double 是非精确数据类型（因此 5.0 == 5.0 由于舍入问题可能为假）
Decimal 是精确数据类型（因此 5.0 == 5.0 将始终为真）
和几何/地理（容易说）用于地图上的位置。

浮点计算应该是三者中最快的，因为地理是二进制数据，带有一些关于投影的信息（这里都是关于地图的），而十进制在技术上不像浮点那么容易处理。

# java - 面板使用与父页面相同的模型

> ID：12581370
> 
> 赞同：0
> 
> 时间：2012-09-25T10:46:50.473
> 
> 标签：java, model, wicket

如何让面板使用某些模型对象作为父页面？

我有一个使用 OwnedAccount 作为模型的表单，在表单中我有一个自定义面板，它有一个包含金融帐户列表的刷新视图。问题是金融帐户的更改没有在表单的模型对象中更改。

一些代码，我删除了很多有 3 个点“...”的代码

```
@Entity
@Table(name = "ownedaccount")
public class OwnedAccount implements Serializable {

...

    //used for multiple currencies
    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER, mappedBy = "ownedAccount")
    private List<FinanceAccount> financeAccounts = new ArrayList<FinanceAccount>();

...
} 
```

* * *

```
public class AssetsPage extends LoggedInPage {

...

    // bookmarkable constructor
    public AssetsPage(PageParameters parameters) {
        super(parameters);

        init();
    }

    private void init() {
        final OwnedAccount ownedAccount = getCurrentSelections().getSelectedOwnedAccount();

        add(new FeedbackPanel("feedback"));

        entityEdit = new OwnedAccountForm("entityEdit", ownedAccount);
        add(entityEdit);

    }

    @Override
    protected void selectionsChanged() {
        OwnedAccount selectedOwnedAccount = getCurrentSelections().getSelectedOwnedAccount();
        CompoundPropertyModel<OwnedAccount> model = new CompoundPropertyModel<OwnedAccount>(selectedOwnedAccount);
        entityEdit.setModel(model);
    }

...

    class OwnedAccountForm extends BaseCreateEditForm<OwnedAccount, Void> {

...

        public OwnedAccountForm(String s, OwnedAccount entity) {
            super(s, entity, null);
            assetType = entity.getAssetType();
        }

        @Override
        protected void initComponents(Void initParams) {

  ...
            multipleCurrenciesPanel = new MultipleCurrenciesPanel("multipleCurrenciesPanel", ownedAccountService, getCurrentSelections());
            add(multipleCurrenciesPanel);

...

        }
... 
```

## }

```
 public class MultipleCurrenciesPanel extends Panel {

        OwnedAccountService ownedAccountService;
        CurrentSelections currentSelections;

        public MultipleCurrenciesPanel(String id, OwnedAccountService ownedAccountService, CurrentSelections currentSelections) {
            super(id);
            this.ownedAccountService = ownedAccountService;
            this.currentSelections = currentSelections;
            init();
        }

        private void init() {

            DepositoryLabel currencyLabel = new DepositoryLabel("currency", new ResourceModel("currency"));
            add(currencyLabel);

            DepositoryLabel accountForSecuritasLabel = new DepositoryLabel("account.for.securitas", new ResourceModel("account.for.securitas"));
            add(accountForSecuritasLabel);

            DepositoryLabel accountForCashLabel = new DepositoryLabel("account.for.cash", new ResourceModel("account.for.cash"));
            add(accountForCashLabel);

            DepositoryLabel buttonDeleteLabel = new DepositoryLabel("button.delete", new ResourceModel("button.delete"));
            add(buttonDeleteLabel);

            CurrenciesView currenciesView = new CurrenciesView("financeAccounts", ownedAccountService, currentSelections, this);
            add(currenciesView);

            setOutputMarkupId(true);
        }

    } 
```

* * *

25/9 更新 - 15:15

```
public class CurrenciesView extends RefreshingView<FinanceAccount> {

    private OwnedAccountService ownedAccountService;
    private CurrentSelections currentSelections;
    private WebMarkupContainer multipleCurrenciesForDepot;

    public CurrenciesView(String id, OwnedAccountService ownedAccountService, CurrentSelections currentSelections, WebMarkupContainer multipleCurrenciesForDepot) {
        super(id);
        this.ownedAccountService = ownedAccountService;
        this.currentSelections = currentSelections;
        this.multipleCurrenciesForDepot = multipleCurrenciesForDepot;
    }

    @Override
    protected Iterator getItemModels() {

        List<FinanceAccount> financeAccounts = ownedAccountService.getFinanceAccounts(currentSelections.getSelectedOwnedAccount());

        return new ModelIteratorAdapter<FinanceAccount>(financeAccounts.iterator()) {
            @Override
            protected IModel<FinanceAccount> model(FinanceAccount object) {
                return new CompoundPropertyModel<FinanceAccount>((object));
            }
        };
    }

    @Override
    protected void populateItem(Item<FinanceAccount> item) {

        final FinanceAccount financeAccount = item.getModelObject();
        item.add(new EnumDropDownChoice<MoneyCurrency>("forCurrency"));
        item.add(new TextField("accountNumber"));
        item.add(new OwnedAccountDropDownChoice("accountForCash", currentSelections.getSelectedLegalEntity().getOwnedBankAccounts()));
        item.add(new AjaxButton("deleteFinanceAccount") {
            @Override
            protected void onSubmit(AjaxRequestTarget target, Form<?> form) {
                //TODO Delete finance account
                ownedAccountService.deleteFinanceAccount(currentSelections.getSelectedOwnedAccount(), financeAccount);
                target.add(multipleCurrenciesForDepot);
            }

            @Override
            protected void onError(AjaxRequestTarget target, Form<?> form) {
                //TODO create error message
            }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:53:30.857

CurrentSelections needs to model if its going to be used and mutiplated by two different wicket page/components.

For example theres a parent page, which has a constructor, a new String object and a Panel that uses the String object as a parameter,

```
public class ParentPage extends WebPage {

       public ParentPage() {

            String string = new String("Dave");
            add(new Panel("childPanel", string));
            string = new String("Brian");  
       }
} 
```

If the string object is updated after the panel has been added, then that updated string isn't what the panel has. What the panel has is "Dave" when thought the ParentPage now has the string as "Brian".

But if we made a model and made it use the string object then when we change the string the childPanel will get the update.

```
public class ParentPage extends WebPage {

       public ParentPage() {

            String string = new String("Dave");
            IModel model = new Model(string);

            add(new Panel("childPanel", model));
            model.setObject(new String("Brian"));  
       }
} 
```

Its a very simple example but i hope it helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:54:27.467

我将构造函数中传递的模型引用保存到面板，到目前为止它工作正常。

```
 BankAccountPanel bankAccountPanel = new BankAccountPanel("bankAccountPanel", getModel());
            add(bankAccountPanel); 
```

...

```
public class BankAccountPanel extends Panel {

    IModel<OwnedAccount> iModel;

    public BankAccountPanel(String id, IModel<OwnedAccount> model) {
        super(id, model);
        this.iModel = model;
        init();
    } 
```

# php - 在 PHP 中定位特定版本的 Internet Explorer

> ID：12581373
> 
> 赞同：2
> 
> 时间：2012-09-25T10:47:05.933
> 
> 标签：php, internet-explorer, conditional-statements

我正在使用以下 PHP 来定位除 Internet Explorer 之外的所有浏览器：

```
if(isset($_SERVER['HTTP_USER_AGENT']) && (strpos($_SERVER['HTTP_USER_AGENT'],'MSIE') == false)) {
   DO STUFF
   } 
```

我现在想针对特定版本的 Internet Explorer，即仅排除 IE8 和更低版本，而不是所有版本的 IE。

我将如何调整上面的代码来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:51:23.253

我认为你应该看看[get_browser](http://php.net/manual/en/function.get-browser.php)

```
$browser = get_browser(null, true);
print_r($browser); 
```

你也可以做

```
$ie8 = (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE 8.') !== FALSE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:54:42.677

```
function ie($version) {

if (strpos($_SERVER['HTTP_USER_AGENT'], $version) !== false)
{ return true; }
return false;

}   

if (ie('MSIE 8.') == true || ie('MSIE 7.') == true || ie('MSIE 6.') == true) { 
echo "Do something";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T10:52:11.517

此函数返回 ie 版本

```
function detectIEversion() {
      ereg('MSIE ([0-9].[0-9])',$_SERVER['HTTP_USER_AGENT'],$reg);
      if(!isset($reg[1])) {
        return -1;
      } else {
        return floatval($reg[1]);
      }
    } 
```

# codeigniter - 从codeigniter中的url获取参数？

> ID：12581381
> 
> 赞同：3
> 
> 时间：2012-09-25T10:47:38.837
> 
> 标签：codeigniter

我的网址是：localhost/school/DPC 在上面的网址中，**学校**是我的控制器类，**DPC**是学校名称。我想从**学校**控制器类的 url 中获取名称**DPC 。**

 **在我使用过的 routes.php 页面中

```
$route['default_controller'] = "school"; 
```

现在我该怎么做才能从网址中获取学校名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:55:07.400

我想你想创建一个像其他网站一样的个人资料页面......`abc.com/hameed` **对**吗？
如果是，那么在 Route 你也应该添加这个

```
$route['school/(:any)'] = "school/profile/$1"; 
```

在您的**学校**控制器中，您可以执行此操作

```
function profile($school_name){
  echo $school_name ; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:25:00.900

根据您的问题“ localhost/school/DPC ”，codeigniter 将通过以下方式对其进行解释：

'school' 作为控制器，'DPC' 作为 'school' 控制器类的函数名。

由于您希望通过 url 直接发送 DPC，因此您应该在学校课程中使用一个参数为“$name”的函数说“myFunction”，然后您的 url 将看起来像“localhost/school/myFunction/DPC”，那么只有你可以得到你想要的结果。

请记住：CI 的 url 格式是“主机名/控制器/功能/参数”。您缺少接受该参数的函数名称。**

# build - TFS Build/MSBuild 2010 bin 文件夹自动重定向到二进制文件夹而不重定向所有项目

> ID：12581386
> 
> 赞同：1
> 
> 时间：2012-09-25T10:47:48.553
> 
> 标签：build, msbuild, build-process, build-automation

我有 TFS2010 构建工作流程，它编译我们的解决方案，其中包含约 100 个项目。编译成功，测试按预期运行等。我遇到的问题与 bin 输出文件夹的重定向有关。

据我了解，MSBuild 的 TFS2010 构建活动将您的 bin 文件夹输出重定向到与 Sources 和 TestResults 文件夹处于同一级别的二进制文件夹，如下所示。

C:\Builds\1\MyPlatform\MyPlatform Main - CI\Binaries

C:\Builds\1\MyPlatform\MyPlatform Main - CI\Sources

C:\Builds\1\MyPlatform\MyPlatform 主 - CI\TestResults

bin 文件夹的这种重定向对我的 80% 的项目都按预期工作。其余项目 bin 文件夹在其标准位置显示为未重定向，就好像我在本地计算机上使用 VS 进行编译一样。

为了说明，当按预期工作时......

源路径：-

C:\Builds\1\MyPlatform\MyPlatform Main - CI\Sources\Source\MyPlatform.Modules.Interaction.Specs

Bin 输出成功重定向到二进制文件夹：-

C:\Builds\1\MyPlatform\MyPlatform Main - CI\Binaries\Mixed Platforms\Debug\MyPlatform.Modules.Interaction.Specs

现在是一个非重定向的例子......

源路径：-

C:\Builds\1\MyPlatform\MyPlatform Main - CI\Sources\Source\MyPlatform.AddIns.Framework.Services

Bin 输出未重定向并保留在源文件夹中：-

C:\Builds\1\MyPlatform\MyPlatform Main - CI\Sources\Source\MyPlatform.AddIns.Framework.Services\bin\Debug

澄清一下，这不是放置位置的问题，而是将 bin 输出重定向到中间 Binaries 文件夹。到我的最终放置位置的副本按预期工作，所有这些都减去了 bin 输出最初没有重定向到二进制文件夹的项目。

我环顾四周，我看到的所有信息都指向将输出自定义到二进制文件夹或与放置位置相关。阅读此内容后，我看不到任何会导致某些项目忽略默认重定向的内容。

我的大多数项目都是标准的 .NET 4 类库，尽管有几个 c++ 项目和一个 WIX 安装程序。我最初虽然它与这种差异有关，但这个问题发生在几个 .NET 4 类库上，这些类库与所有其他成功重定向的项目具有相同的设置。

关于上面示例路径的另一点。我已经用“我的”代替了实际的项目前缀，但其他路径都是使用的。

有谁知道为什么某些项目的 bin 输出可能不会被重定向？

您可以提供的任何帮助将不胜感激。

谢谢H

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:06:50.753

Dharmesh Shah 在 MSDN 上的持续调查和正确方向的推动表明，这都与“TeamBuildOutDir”设置有关。更多细节可以在这里找到[http://blogs.msdn.com/b/jimlamba/archive/2010/04/13/customizableoutdir-in-tfs-2010.aspx](http://blogs.msdn.com/b/jimlamb/archive/2010/04/13/customizableoutdir-in-tfs-2010.aspx)

# javascript - JavaScript：推送到具有未知键名的数组

> ID：12581387
> 
> 赞同：1
> 
> 时间：2012-09-25T10:47:48.903
> 
> 标签：javascript

我有一个返回 JSON 的小程序，然后在将其推入数组之前对其进行询问。

数据示例如下：

> id=1|owner=Vina San Pedro|brandName=1865 智利葡萄酒|variantName=1865 智利葡萄酒|quality=Standard|minorRegionName=北欧国家|vol02=0|vol07=0|vol08=4.25|vol09=4.25|vol10=0 |

我可以迭代上面的字符串，将值推送到数组中，但是考虑到诸如“Vol02”、“Vol07”之类的项目可能被标记为“val02”、“val07”或“minorRegionName”在某些情况下可以是“majorRegionName”。

*编辑*

```
 var finalSplit = brandDataRow.split('|');
                                $.each(finalSplit, function (x, y) {
                                    var v = y.split('=');
                                    $.each(v, function (m, n) {
                                        formattedBrandData.push({ m: m }, { n: n });
                                    });
                                }); 
```

在上面的例子中，如果我的 | 分隔符字符串包含“所有者=??????|值=????????|品牌=???????” 然后当我将它推入一个数组时，我希望键是“所有者”、“价值”和“品牌”。

但是，直到我返回数据后我才知道键名，所以有时 | 分隔字符串可以是“所有者=??????|Line=???????|Region=??????”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:27:05.650

首先：你不是在寻找一个数组，而是一个对象。JS 数组实际上是拖拽中的对象，但这不是重点；JS 没有*关联数组*，只有对象。但是要回答您的问题：IMO，您可以将字符串转换为对象的最简单（并且我怀疑是最快）的方法是将其转换为有效的 JSON：

```
var str = 'id=1|owner=Vina San Pedro|brandName=1865 Chilean Wine|variantName=1865 Chilean Wine|quality=Standard|minorRegionName=Nordic Countries|vol02=0|vol07=0|vol08=4.25|vol09=4.25|vol10=0|';
var obj = JSON.parse('{"'+str.substring(0,str.length-1).replace(/(=|\|)/g,function(s1,s2)
{
    return '"'+(s2 === '=' ? ':' : ',')+'"';
})+'"}'); 
```

这是密集版本，如果我们将其分解：

```
str.substring(0,str.length-1);//leave out trailing pipe (|)
//if the pipe is not always there:
str  = str.substr(-1) === '|' ? str.substring(0,str.length-1) : str; 
```

然后替换所有`=`和`|`：

```
str = str.replace(/(=|\|)/g,function(s1,s2)
{//s1 will be the entire matched substring, s2 the first group, not required in this case, but just so you know
    return '"'+(s2 === '=' ? ':' : ',') + '"';
});//pipes become comma's, = becomes colon 
```

我们现在差不多了，返回的字符串将是`id":"1","owner":"Vina San Pedro","brandName":"1865 Chilean Wine","variantName":"1865 Chilean Wine","quality":"Standard","minorRegionName":"Nordic Countries","vol02":"0","vol07":"0","vol08":"4.25","vol09":"4.25","vol10":"0`. 如您所见，我们需要添加的只是开始和结束花括号，以及字符串开头和结尾的双引号，我们最终得到有效的 JSON：

```
var obj = JSON.parse('{"'+str+'"}');//returns object
//is the same as:
obj = { brandName: "1865 Chilean Wine",
        id: "1",
        minorRegionName: "Nordic Countries",
        owner: "Vina San Pedro",
        quality: "Standard",
        variantName: "1865 Chilean Wine",
        vol02: "0",
        vol07: "0",
        vol08: "4.25",
        vol09: "4.25",
        vol10: "0"}; 
```

从那时起：

```
console.log(obj.id);//logs 1
console.log(obj.owner);//logs 'Vina San Pedro'
console.log(obj['brandName']);//string access: logs "1865 Chilean Wine"
//etc... 
```

此代码经过测试并且可以正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:03:33.120

尝试这个：

```
var data = "id=1|owner=Vina San Pedro|brandName=1865 Chilean Wine|variantName=1865 Chilean Wine|quality=Standard|minorRegionName=Nordic Countries|vol02=0|vol07=0|vol08=4.25|vol09=4.25|vol10=0|";

var keyVal = data.split("|");
var res = {};
for(var i =0; i< keyVal.length; i++) {
    var tmp = keyVal[i].split("=")
    res[tmp[0]] = tmp[1];
}
console.log(res); 
```

是的，它会返回一个对象，但数组只能包含数字索引。在大多数情况下，您可以像使用数组一样使用对象。此外，没有理由将 $.each 用于如此简单的任务。只是要执行的附加代码。

[JSFiddle 演示](http://jsfiddle.net/KSsFA/1/)- 查看控制台输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:51:46.890

您可以使用字符串来命名密钥。例如。

```
var sample = new Array();
sample["bob"] = 123;
sample.bob; //returns 123 
```

希望能帮助到你。

# android - PhoneGap - Android 应用中的样式和主题

> ID：12581392
> 
> 赞同：1
> 
> 时间：2012-09-25T10:48:14.107
> 
> 标签：android, cordova, android-actionbar

我正在使用 PhoneGap 构建一个 Android 应用程序，并希望在长按文本以覆盖应用程序后显示复制/共享菜单。为此，我必须设置`android:windowActionBar`为`true`. 这就是文档所说的：

> 请注意，隐藏和删除操作栏会导致您的活动重新布局，以考虑操作栏占用的空间。如果您的活动经常隐藏和显示操作栏（例如在 Android Gallery 应用程序中），您可能需要使用覆盖模式。覆盖模式将操作栏绘制在您的活动布局之上，而不是在其自己的屏幕区域中。这样，当操作栏隐藏和重新出现时，您的布局保持固定。要启用覆盖模式，请为您的活动创建一个主题并将 android:windowActionBarOverlay 设置为 true。

所以我尝试应用这个主题：

```
<resources>
    <style name="AppTheme" parent="android:Theme.Holo.Light">
        <item name="android:windowActionBarOverlay">true</item>
    </style>
</resources> 
```

到我的应用程序：

```
<application
        android:icon="@drawable/icono_p"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" > 
```

没有成功。

有没有办法在 PhoneGap 应用程序中`android:windowActionBar`设置`true`？

编辑：

主题实际上正在被应用，但它没有按预期工作，栏不断调整应用程序的大小

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:56:24.220

我很确定您必须为较低的 android 版本编写一个插件。我不确定这个功能何时可用，但在我的 ICS 4.0 上，我可以从任何 phonegap 应用程序中复制和共享任何文本，而无需声明任何特殊内容。它是一个系统功能，它的工作方式应该与从标准浏览器中复制和共享文本的方式相同。你在测试什么以及哪个版本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:57:44.933

解决了。问题是复制/共享菜单不是操作栏，而是[上下文操作模式](http://developer.android.com/guide/topics/ui/menus.html#CAB)启动时显示的上下文操作栏。因此，`android:windowActionBar`要设置的属性`true`不是，而是`android:windowActionModeOverlay`

# php - 创建一个用 HTML 包装输出的树枝过滤器

> ID：12581397
> 
> 赞同：3
> 
> 时间：2012-09-25T10:48:42.440
> 
> 标签：php, filter, twig, template-engine

我在 Twig 中创建了一个过滤器，它在输出周围包装了一些 HTML。例如

```
{{ 'this is a "test"'|display }} 
```

输出

```
<div id="container">
  <div id="content">
    this is a "test"
  </div>
  <div id="toolbar">
    <a href="/edit.php">edit</a>
  </div>
</div> 
```

困境是，我希望后续过滤器仅应用于原始内容，而不是整个 html。例如

```
{{ 'this is a "test"'|display|upper|e }} 
```

输出

```
&LT;DIV ID=&QUOT;CONTAINER&QUOT;&GT;
  &LT;DIV ID=&QUOT;CONTENT&QUOT;&GT;
    THIS IS A &QUOT;TEST&QUOT;
  &LT;/DIV&GT;
  &LT;DIV ID=&QUOT;TOOLBAR&QUOT;&GT;
    &LT;A HREF=&QUOT;/EDIT.PHP&QUOT;&GT;EDIT&LT;/A&GT;
  &LT;/DIV&GT;
&LT;/DIV&GT; 
```

但你可以想象，我更喜欢这样的输出

```
<div id="container">
  <div id="content">
    THIS IS A &QUOT;TEST&QUOT;
  </div>
  <div id="toolbar">
    <a href="/edit.php">edit</a>
  </div>
</div> 
```

将过滤器顺序更改为

```
{{ 'this is a "test"'|upper|e|display }} 
```

将适用于上层过滤器，但不适用于逃生过滤器，因为它始终将自身置于过滤器队列的末尾。它也应该与 autoescape=true 一起使用。

阅读树枝文档，我找不到做我想做的事的标准方法。有人可能尝试过类似的东西吗？或者有人想解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:57:36.413

尝试：

```
{{ 'this is a "test"'|upper|e|display }} 
```

首先过滤您的内容，然后将其包装。

# list - Scheme - 返回一个不断增长的列表的函数

> ID：12581399
> 
> 赞同：1
> 
> 时间：2012-09-25T10:48:48.727
> 
> 标签：list, scheme

我在这里找不到类似的问题，但我正在尝试为课程编写一个程序，因此非常感谢提示！我基本上对如何实现这一点感到困惑，但这里有一个关于它应该如何工作的例子。`(index 5)`应该返回列表`(1 2 3 4 5)`。我有几个想法，他们可以工作吗？

1.  我将参数设为一个全局变量，每次递归调用该函数时都会递增该变量。到目前为止，我遇到的问题是使用 set! 返回一个列表，但输出看起来像这样 (#value #value....)

2.  编写一个简单的递归函数，给出列表 (5 4 3 2 1) 然后反转它，但我能做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:51:37.723

我会选择解决方案 2，因为它是迄今为止最干净、最简单的选择。你只需要弄清楚递归。提示：在 处达到基本情况`(index 0)`，它应该返回空列表。之后的逆向可以通过将实际递归放入辅助函数中来完成：

```
(define (index-r n)
  ...)

(define (index n)
  (reverse (index-r n))) 
```

（或使用命名`let`循环。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:22:07.903

> 编写一个简单的递归函数，给出列表 (5 4 3 2 1) 然后反转它，但我能做到吗？

为什么不直接编写一个给出列表的递归函数 (1 2 3 4 5) ？在“伪代码”中，以便我不为您做：

```
f(x) = cons x (f(x+1))
f(5) = (list 5) 
```

然后，调用`f(1)`……</p>

# css - 具有百分比宽度值的 DIV 图像包装器高度错误

> ID：12581403
> 
> 赞同：5
> 
> 时间：2012-09-25T10:48:57.457
> 
> 标签：css, html, image

我想将图像包装到 html`DIV`中，并且由于我希望它可以完全随窗口大小缩放，因此我想将`DIV`百分比的宽度设置如下：

**html**

```
<div id="wrapper">
    <img src="http://openclipart.org/people/netalloy/rally-car.svg" />
</div> 
```

**css**

```
#wrapper {
    position: absolute;
    width: 50%;
}

#wrapper img {
    width: 100%;
} 
```

图像应确定其容器的高度。这是因为图像宽度设置为 100%，并且相应地计算图像高度，保持正确的纵横比。

结果在 jsfiddle 上可见：http: [//jsfiddle.net/lorenzopolidori/5BN4g/15/](http://jsfiddle.net/lorenzopolidori/5BN4g/15/)

我的问题是：

1.  为什么所有现代浏览器都将包装器渲染为`DIV`比内部图像高 5 像素？
2.  我怎样才能摆脱这个 5px 的差距，同时仍然以百分比设置所有大小并且*不*使用 javascript？

令人惊讶的是，这发生在 Chrome (21.0.1180.89)、Firefox (15.0.1) 和 IE8 中，而 IE7 正确呈现它，`DIV`使图像的高度与图像的高度相匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:01:15.063

看一下这个 ：

[http://jsfiddle.net/5BN4g/29/](http://jsfiddle.net/5BN4g/29/)

这是一个行高问题:-)

你需要 ：

```
#wrapper {
    width: 60%;
    background-color: #aaa;
    margin: 50px auto;
    line-height:0;
}

#wrapper img {
    width:100%;
    border: 1px dashed red;
    box-sizing:border-box;
}
​ 
```

我使用 box-sizing 来确保图像的宽度不会溢出容器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:58:01.510

好的，摆弄一下，我找到了一个很好的解决方案：

```
#wrapper img {
    display: block;
    width: 100%;
    border: 1px dashed red; 
```

}

从默认`inline`显示更改为`block`显示会立即消除`line-height`问题。

这种方法在*语义*上也是正确的，因为在这种情况下，我们真正想要的是一个包裹在 a 中的单个图像，其中`DIV`没有任何其他元素，因此`line-height`需要通过将图像显示为一个块来完全消除 of 的概念。

它适用于所有主要浏览器：http: [//jsfiddle.net/lorenzopolidori/5Cpf2/3/](http://jsfiddle.net/lorenzopolidori/5Cpf2/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T10:59:39.537

......

嗨，现在添加`vertical-align:top`你的`img tag`throw css

像这样

```
#wrapper img {
    width: 100%;
    border: 1px dashed red;
    vertical-align:top; // add this line
} 
```

***[现场演示](http://jsfiddle.net/5BN4g/28/)***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T10:49:34.520

您的问题是图像 -`<img>`确切地说是标签 - 是一个内联元素。您需要做的就是`display: block`在图像上设置，多余的填充就会消失。[演示](http://jsfiddle.net/5BN4g/48/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T10:57:51.623

我认为您应该设置 align 属性以强制浏览器正确显示 img 标签。

```
<div id="wrapper">
  <img align="center" src="http://openclipart.org/image/800px/svg_to_png/74557/rally-car.png" />
</div> 
```

[演示](http://jsfiddle.net/afshinprofe/5BN4g/24/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T11:04:14.480

我认为是因为它看不到表格

我在您的代码中添加了 display:table

现在看起来很好，检查链接

[示例显示表](http://jsfiddle.net/5BN4g/32/)

# tfs - 我可以在一台机器上运行 TFS 构建控制器和单元测试，在另一台机器上运行 TFS 构建代理吗？

> ID：12581405
> 
> 赞同：0
> 
> 时间：2012-09-25T10:49:03.640
> 
> 标签：tfs, tfsbuild

我已经成功设置了两台机器。第一台机器用作 TFS 构建控制器，另一台机器用作 TFS 构建代理。

我想做两件事。

1.  在 TFS 构建控制器机器上运行 SQL 脚本。我在 TFS 上有所有 SQL 脚本文件，但我不知道如何让它运行。
2.  我想做的是将 TFS Build Agent 机器的输出（dll 和 exe 文件）上传回 TFS Build Controller 机器，然后在这台机器上运行测试。（我想在运行所有 sql 脚本文件后运行测试）

请让我知道这是否可能。你可以给我一个链接，因为我知道这可能需要很长的解释。如果你能写下答案，我会很高兴。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:43:47.873

是的，这一切皆有可能，但我强烈建议不要为此使用构建控制器。构建控制器旨在将构建分配给执行所有工作的代理。此外，构建控制器通常在团队项目之间共享，因此如果单个团队项目滥用控制器，它可能会影响其他人；而构建代理通常专用于团队项目。您应该能够在 Build Agent 上运行您的 SQL 脚本和测试，这是大多数人会做的。

话虽如此，如果您仍然打算这样做，您可以修改构建工作流模板来完成它。Run On Agent 活动中的任何内容都在 Build Agent 上运行，之外的任何内容都在 Build Controller 上运行。如果您以前从未做过自定义 TFS 构建，请参阅 Ewald 的博客系列：[http ://www.ewaldhofman.nl/post/2010/04/20/Customize-Team-Build-2010-e28093-Part-1-Introduction .aspx](http://www.ewaldhofman.nl/post/2010/04/20/Customize-Team-Build-2010-e28093-Part-1-Introduction.aspx)

# c# - 安全页面在 web.config 中的位置

> ID：12581407
> 
> 赞同：-1
> 
> 时间：2012-09-25T10:49:08.663
> 
> 标签：c#, asp.net, security

我正在 Asp.net 4.0 中开发一个 Web 应用程序，其中我有两种类型的页面“安全”和“不安全”。

要访问安全页面，请在我的安全 web.config 中使用位置标签，并且用户必须成功登录。登录后我将复制该网址，然后注销。

我的预期结果：-虽然我要将该网址粘贴到浏览器中，但它会再次向我显示登录页面。

所以请给我与我的查询相关的示例。

提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:38:57.680

我所做的是创建一个文件夹（可能名为“Secure”）并在文件夹内添加一个 web.config 文件。它会非常小......可能就像这样简单（只允许登录用户）：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.web>
        <authorization>
            <deny users="?" />
        </authorization>
    </system.web>
</configuration> 
```

添加到文件夹的任何页面都会在访问时导致登录提示，您无需执行任何其他操作。这是假设您正在使用 ASP.Net 成员资格/安全功能（从您的问题中听起来）。

注意：附加/小 web.config 文件将被限制在包含它的文件夹的范围内。

如果您想创建几个角色（我们为内部管理员页面执行此操作），您可以将访问权限限制为仅与这些角色相关联的用户......这很容易。以下 web.config 位于我们的 Admin 文件夹中，其中包含我们所有的管理页面...

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.web>
        <authorization>
            <allow roles="FullClearance" />
            <allow roles="HighClearance" /><!-- mgr clearance-->
            <allow roles="StandardClearance" /> <!-- staff clearance-->
            <deny users="*" /><!-- authenticated users -->
            <deny users="?" /><!-- anonymous  users -->
        </authorization>
    </system.web>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:55:49.957

您需要使用您所在位置的[授权](http://msdn.microsoft.com/en-us/library/wce3kxhd.aspx)标签来限制匿名用户的访问，例如

```
<location path="Secured.aspx">
    <system.web>
        <authorization>
            <deny users="?"/>
        </authorization>
    </system.web>
</location> 
```

# installation - 是否可以覆盖另一个 msi 安装的 xap 文件？

> ID：12581409
> 
> 赞同：-1
> 
> 时间：2012-09-25T10:49:20.490
> 
> 标签：installation, windows-installer, xap

假设我们有 msi x.msi 并且它正在安装一个 xap 文件。

我们想通过另一个 msi 覆盖 xap 文件（例如使用 y.msi）。

是否可以通过另一个 msi 覆盖？它会不会有任何问题，因为它没有任何相关的版本号？

如果有可能，如果我们卸载 x.msi 会发生什么？

是否建议覆盖另一个 msi 安装的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:33:31.510

XAP 文件尽管是应用程序二进制文件，但没有版本资源，因此 Windows Installer 无法正确对其进行版本控制。结果，您可能会进入 DLL 地狱，因为将安装最后一个包。

为了缓解这种情况，请考虑使用一个版本构建一个无意义的 DLL，并将其用作组件的密钥文件。这样 MSI 将根据 DLL 版本评估安装。这应该可以防止 XAP 的版本冲突。

确保两个 MSI 具有相同的组件 ID，并且该组件被标记为共享。这将适应正确的引用，以便最后一次卸载将删除该组件。

# oauth-2.0 - 如何强制 oauth 身份验证针对特定用户

> ID：12581413
> 
> 赞同：2
> 
> 时间：2012-09-25T10:49:24.433
> 
> 标签：oauth-2.0, google-drive-api, google-authentication

我正在遵循[https://developers.google.com/accounts/docs/OAuth2UserAgent中所述的客户端身份验证](https://developers.google.com/accounts/docs/OAuth2UserAgent)

我经常登录多个 Google 帐户。通常，流程会提示我选择我要使用哪个帐户进行身份验证。但是，有时它假定我登录的第一个帐户*不是*我希望使用的帐户。

当用户注册我的服务时，他们会使用特定的电子邮件地址（和 google id）进行注册。

如何限定 oauth 对话，使其始终仅使用指定用户进行？

在[https://developers.google.com/drive/about-auth](https://developers.google.com/drive/about-auth)我可以看到评论...

```
Note: If you want to use the user_id parameter to select the current user from
 (potentially) multiple logged-in accounts,
 also add https://www.googleapis.com/auth/userinfo.email. 
```

这意味着我可以在 oauth 调用中包含一个 user_id 参数，但是我在任何地方都看不到它的文档，并且在 Javascript API 中没有可以注入 user_id 的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:56:08.657

将 user_id 参数添加到您的授权 URI。

```
 gapi.auth.authorize({..., user_id: 'ali@gmail.com'}, handleAuthResult); 
```

# windows - Node.js 开发，windows 还是 linux？

> ID：12581416
> 
> 赞同：37
> 
> 时间：2012-09-25T10:49:31.817
> 
> 标签：windows, linux, node.js, virtualization

我对 Node.js 平台上的 Web 开发很感兴趣。我的主机操作系统是 Windows 7。设置开发环境的首选方法是什么。直接在主机上运行还是在基于 linux 的虚拟机上运行？这两种方法的优缺点是什么？

如果我使用虚拟机，我是否仍然可以在 Windows 中运行文本编辑器和 Web 浏览器（出于性能原因）？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-12-13T09:43:58.040

嗯，经验之谈，用~~Linux~~码头工人。

**编辑**使用 Docker。烘焙您的依赖项，在运行时挂载您的项目，仅固定到特定版本的 LTS 节点。我会在无法运行的项目上使用 2gb 的 docker 映像，这会导致被迫升级到新软件包的日子失去了。- 2018/04/10

但是对于过去 8 年在基于 linux 的环境中进行开发的人，以及在过去 6 个月中使用 nodejs 在 windows dot net 环境中开发软件的人来说，这是我的发现，无论是令人震惊还是其他...

### 窗户问题：

*   ~~无法有效利用docker~~就我而言，最新版本的 docker 工具包解决了这个问题。ymmv。
*   大多数节点模块都需要 node_gyp，从表面上看似乎没有问题（因为 gyp 应该是跨平台编译器），除非您深入研究在 Windows 上运行它需要什么：安装 Visual Studio 就可以了. 由于以下几个原因，这对我来说很糟糕：
*   我通常在 linux 上，所以我永远不想使用 Visual Studio。
*   在 Windows 上编译某些东西至少需要 3GB 的 IDE 安装，这完全是最荒谬的想法……不是库，而是我永远不会启动的完全单一的 GUI 软件。
*   相当于 Windows 的 debians`build-essentials`实际上是一个分散在 Internet 上的、分散在 Internet 上的、分散的、名称错误的 gui 安装程序集合，所有这些都需要特定的安装顺序。相比之下，这`sudo apt-get install build-essentials`过于耗时且充满隐藏的陷阱。

*   在 Windows 上开发将使您养成混合大小写路径名称的坏习惯，除非您的团队要么有严格的政策要遵循/执行，否则这将是以后出现问题的滑坡。

*   虽然 windows 在路径中支持超过 256 个字符，但重要的工具却不支持。进入舞台左侧：rimraf 和 robocopy ......呃。

*   Windows终端很糟糕......默认shell也是如此：cmd.exe...... ~~Powershell 的语法过于冗长，不符合我的口味……安装 Cmder 可以在一定程度上缓解这种情况，但是 Cmder 与 cmd.exe 交互的唯一方法是基本上将击键复制到运行 cmd.exe 的隐藏 Windows 终端。（洛鲁特）。Cmder 与更模块化的 shell（zsh、bash 等）一起工作得更好。~~. *更新*：我现在使用带有 pshazz 和 scoop 的 powershell，实际上使用起来很愉快。

*   ~~仍然改进了 shell 和终端的情况，windows 的 nodejs 仍然会假设你的环境变量是 %OF% %THE% %WINDOWS% %VARIETY%...而不是 $UNIX $STYLE。因此，您基本上将主要从 cmd.exe 使用 bower 和 npm ......更多啊。~~我似乎不再有这个问题，因为我已经混合了`cross-env`指挥官或 yargs。

    *   你还需要为 windows 安装 python，这不是问题，因为 choco 存在并且你回到那里。*更新*：看看 boxstarter，它将帮助您使用食谱自动化您的新机器设置（或者您实际上可以毕业使用 ansible 或 salt）。

    *   经验丰富的 python，ruby 开发人员会告诉您，旧项目将需要他们的引擎版本，以便在您需要重新访问它们时（升级到新版本大多不方便或不实用，请阅读：兔子洞），所以你会想要 rvm 和 virtualenv 之类的东西...

    *   nvm（仅适用于 unix 系统 linux 和 macosx），因为它是 bash 脚本的集合。我推荐使用 ZSH 作为你的 shell 以及 Zgen 和`Tarrasch/zsh-autoenv`插件。

    *   nodeenv，更可能是……一个与virtualenv集成的python程序。有些人喜欢这样。我对此没有任何问题，但我们的团队使用的是 nvm。
    *   ~~但是，由于“原因”，您最好使用 nvm-windows。~~从头开始，`nodist`在windows上使用......更好的选择，你不必担心某种autoenv，因为nodist by design可以处理这个问题。

### 在 Windows 上安装：

1.  安装巧克力
2.  ~~`choco install cmder nodejs python2`~~ `choco install python2`
3.  install `http://scoop.sh`，然后用它来安装 pshazz。
4.  删除全局手动安装的任何节点版本。
5.  ~~安装 nvm-windows~~安装节点。
6.  ~~安装visual-studio 2012 express，如果你珍惜你的CPU周期，就永远不要启动它。~~这可能有点矫枉过正，因为微软已经发布了与 build-essentials 等效的版本。
7.  安装 windows 7/10 64bit sdk

### Linux 上的问题：

tldr; 使用非虚拟机。出于以下原因之外的更多原因。

*   ~~您必须将全局 npm node_modules 路径设置为用户拥有的目录（我已经开始使用`~/.local/share/npm`）。令人高兴的是，我发现 nodejs 的 windows 安装是正确的（可能不是故意的）。~~使用 nvm 时没有问题。
*   ~~Ubuntu 已经有一个名为 的二进制文件`node`，因此`#!/usr/bin/env node`默认情况下不会运行 nodejs。幸运的是，debian 系统有一个简洁的管理工具来控制`env`二进制文件发出的内容：`update-alternatives`. 忽略此处使用符号链接的建议，这只会在以后以微妙的方式引起问题。~~使用 nvm 时也不是问题。

### 在 Linux 上安装：

```
$ sudo apt-get install git-core git-flow build-essentials python-dev python-  pip
$ curl https://raw.githubusercontent.com/creationix/nvm/v0.20.0/install.sh | bash
$ npm config set prefix ~/.local/share/npm
$ nvm install stable
$ nvm alias default stable 
```

参考：

*   [https://groups.google.com/forum/?fromgroups#!msg/msysgit/9YIR6jlNB0Q/zHhPN3tejFkJ](https://groups.google.com/forum/?fromgroups#!msg/msysgit/9YIR6jlNB0Q/zHhPN3tejFkJ)
*   [https://github.com/creationix/nvm](https://github.com/creationix/nvm)
*   ~~[http://bliker.github.io/cmder/](http://bliker.github.io/cmder/)~~
*   ~~[https://github.com/coreybutler/nvm-windows](https://github.com/coreybutler/nvm-windows)~~
*   [https://github.com/Tarrasch/zsh-autoenv](https://github.com/Tarrasch/zsh-autoenv)
*   [https://github.com/lukesampson/pshazz](https://github.com/lukesampson/pshazz)
*   [http://scoop.sh](http://scoop.sh)
*   [https://github.com/marcelklehr/nodist](https://github.com/marcelklehr/nodist)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-25T13:30:05.770

我们有一个系统，通过它我们只使用一个配置文件，它可以处理我们所有的问题，比如路径差异（`"c:\blarg"`vs `"~user/blarg"`），并且作为奖励，让我们可以控制调试和生产环境之间的差异。

Node.js 是跨平台的，所以我们完全有开发人员在各种计算机上工作，这完全没有问题。

这是我在文件存储项目中使用的示例配置文件：

```
/**
 * All of these are mandatory except for log_level (which defaults to "info", 1) 
 * and log_echo_to_console (which defaults to false)
 */
exports.config = {
    log_level: 0,
    log_file: "/path/to/send.log",
    request_log_file: "/path/to/send_requests.log",
    log_echo_to_console: true,
    port_number: 8088,
    no_notification_emails: true,
    image_url_base: "http://s3.amazonaws.com/",      // MAKE SURE THIS ENDS IN "/"
    tmp_file_folder:"/tmp/",
    s3_info: {
        key: 'xxxxxx',
        secret: 'yyyyy',
        file_bucket: 'sendtransfer/',
    },
    backend_info: {
        db_info: {
            server: "localhost",
            user: "db_user",
            password: "secret",
            database: "SendRemote",
            pooled_connections: 125,
            idle_timeout_millis: 30000
        },
        memcache_info: {
            host: "127.0.0.1",
            port: "31111",
            pooled_connections: 200,
            timeout: 20000
        }
    },

    debug_server: true
}; 
```

对于 Windows 机器，只需更改路径。都很好！

然后在代码中，您只需键入：

```
var local = require('local.config.js');
fs.writeFile(local.config.log_file);
// etc 
```

拥抱多元文化！！！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-25T13:50:00.890

我也在 Windows 7 上并在 Linux ( debian ) 客户机上使用 Virtualbox，我会推荐它，因为我自己在命令行中做一些事情然后在 Windows 中单击 arround 更快。

另一个不错的功能是，如果您将 VM 放在 U 盘上，您可以随身携带并在任何安装了 Virtualbox 主机的地方使用它，这样您就可以随身携带整个开发环境。

在 Windows 中使用您喜欢的文本编辑器或浏览器完全没有问题，只需安装 samba 并将您的主目录挂载到 Windows 中即可。您的浏览器也是如此，因为虚拟机只是局域网中的另一台机器，而不是将浏览器指向本地主机，而是将其指向虚拟机 Ip，您就可以了。

明显的缺点是，如果您没有任何 Linux 经验，但您可能应该坚持使用 Windows，因为您需要一些时间才能进入它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-01T11:02:23.760

只是我的两分钱可能更少：

我会建议你第三种选择：双重安装 windows/ubuntu 设置（最好是对 gui 最​​友好的[ubuntu](http://www.ubuntu.com/desktop) dist）并研究这个选项，这样你会更熟悉 linux/unix 甚至 iOS，甚至会让你更好地理解windows，成为更好的程序员。有时虚拟机太慢，而 linux 的资源效率很高。

如果您有能力安装虚拟机，您也可以尝试安装[linux 发行版](http://en.wikipedia.org/wiki/Linux_distribution) ，并让自己熟悉这种语言/系统的操作系统，许多网络都是基于这种语言/系统构建的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T16:09:04.713

我真的很喜欢在 Windows 上使用 git bash 编码 node.js：http: [//blog.nodester.com/post/19902515151/tips-for-windows-users](http://blog.nodester.com/post/19902515151/tips-for-windows-users)

它似乎比运行 VirtualBox 更快更容易。鉴于我在投入生产之前仍然使用 Virtual Box 进行测试。

# struts2 - struts2 - 如何公开操作类字段的子类以转换为 JSON？

> ID：12581417
> 
> 赞同：0
> 
> 时间：2012-09-25T10:49:35.827
> 
> 标签：struts2, struts

```
class ReportAction{
   private Report report;
   String reportType;
   ...
   public String execute(){
      switch (reportType){
        case "user" : someService.getUserReport();
        ....

      }
   }    
} 
```

现在，该服务`Report`根据所要求的报告类型返回 的子类。当我使用**json**结果类型并指定 ' `report`' 转换为**JSON**时，我假设只有 Report 中声明的字段将转换为**JSON**，而不是 ' `report`' 持有的实际子类引用的字段。每个子类`Report`都有额外的字段，我希望在将“ `report`”字段转换为**JSON时包含它们**

# java - 有没有办法使用 TypeAdapter 来序列化父类和子类实例

> ID：12581418
> 
> 赞同：1
> 
> 时间：2012-09-25T10:49:39.137
> 
> 标签：java, json, gson, jsonserializer

我是 json 和 gson 的新手。我有个问题。我有一个父类和一个扩展它的子类。我有一个父类的列表。一些整体是儿童类。当我使用 gson api toJson() 时，我只得到父类中定义的字段。有人可以给我一个关于如何实现TypeAdapter的想法，如果它是子类的实例，则能够获取子类+父类的字段，否则只能获取父类的字段

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:47:16.843

看看[RuntimeTypeAdapterFactory](http://code.google.com/p/google-gson/source/browse/trunk/extras/src/main/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactory.java)。该类还不是核心 Gson 的一部分，但您可以将其复制到您的项目中。

# android - 为什么通话断开后背景音乐不暂停？

> ID：12581426
> 
> 赞同：1
> 
> 时间：2012-09-25T10:50:12.497
> 
> 标签：android, service

在我的应用程序中，我在服务中使用媒体播放器来播放音乐文件。我用`TelephonyManager`它来检查来电和去电，并相应地播放和暂停音乐。

对于来电和去电，该应用程序可以正常工作，并且每当通话发生时音乐都会暂停，并在通话断开后恢复。但是，当我在通话断开后尝试手动暂停时，它不会暂停。

下面是我的代码：

```
public class ChalisaService extends Service
{
static MediaPlayer mediaPlayer;
static int playerFlag = 0;
TelephonyManager tm;
ActivityManager actManager;
Context mContext = getApplicationContext();
/**
 * 0 for stop
 * 1 for play
 * 2 for pause*/
@Override
public IBinder onBind(Intent intent) 
{
    return null;
}//onBind

@Override
public void onCreate() 
{
    super.onCreate();

    mediaPlayer = MediaPlayer.create(getApplicationContext(), R.raw.chalisa);
    mediaPlayer.setVolume(100, 100);

    tm = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
    tm.listen(mPhoneListener, PhoneStateListener.LISTEN_CALL_STATE);
}//onCreate

@Override
public int onStartCommand(Intent intent, int flags, int startId) 
{
    if(mediaPlayer.isPlaying())
    {
        mediaPlayer.pause();
        /*HanuAlarm.txtPlay.setText("Play");
        HanuAlarm.btn_Play.setBackgroundResource(R.drawable.btnplay);*/
        playerFlag = 2;
    }//if
    else
    {
        mediaPlayer.start();
        /*HanuAlarm.txtPlay.setText("Pause");
        HanuAlarm.btn_Play.setBackgroundResource(R.drawable.btnpause);*/
        playerFlag = 1;
    }//else

    startForeground(0, null);
    return playerFlag;
}//onStartCommand

@Override
public void onDestroy() 
{
    mediaPlayer.stop();
    mediaPlayer.release();
    playerFlag = 0;
}//onDestroy

private PhoneStateListener mPhoneListener = new PhoneStateListener() {
    public void onCallStateChanged(int state, String incomingNumber) {
        switch (state) {
        case TelephonyManager.CALL_STATE_RINGING:
            Intent i = new Intent("com.android.music.musicservicecommand");
            i.putExtra("command", "pause");
            mContext.sendBroadcast(i);
            break;

        case TelephonyManager.CALL_STATE_OFFHOOK:
            Intent in = new Intent("com.android.music.musicservicecommand");
            in.putExtra("command", "pause");
            mContext.sendBroadcast(in);
            break;

        case TelephonyManager.CALL_STATE_IDLE:
            if(!mediaPlayer.isPlaying())
            {
                mediaPlayer.start();
                playerFlag = 1;
            }//if
            else
            {
                Intent in1 = new Intent("com.android.music.musicservicecommand");
                in1.putExtra("command", "pause");
                mContext.sendBroadcast(in1);
            }//else
            tm.listen(mPhoneListener, PhoneStateListener.LISTEN_CALL_STATE);
        default:
            Log.d("Chalisa Service", "Unknown phone state=" + state);
        }
    } 
};
}//ChalisaService 
```

我正在播放或暂停媒体播放器的按钮代码：

```
btn_Play.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v) 
        {
            if(ChalisaService.playerFlag == 0 || ChalisaService.playerFlag == 2)
            {
                startService(in);
                ChalisaService.playerFlag = 1;
                Log.i("HanuAlarm play button if", ""+chalisaPlaying);
                txtPlay.setText("Pause");
                txtPlay.setTextColor(getResources().getColor(R.color.redwine));
                btn_Play.setBackgroundResource(R.drawable.btnpause);
            }//if
            else if(ChalisaService.playerFlag == 1)
            {
                ChalisaService.mediaPlayer.pause();
                ChalisaService.playerFlag = 2;
                Log.i("HanuAlarm play button else", ""+chalisaPlaying);
                txtPlay.setText("Play");
                txtPlay.setTextColor(getResources().getColor(R.color.white));
                btn_Play.setBackgroundResource(R.drawable.btnplay_a);
            }//else if
        }//onClick
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:13:37.767

我已经解决了我的问题。下面，我发布了我的音乐服务的代码。

```
public class ChalisaService extends Service implements OnCompletionListener
{
static MediaPlayer mediaPlayer;
static int playerFlag = 0;
TelephonyManager tm;
ActivityManager actManager;
/**
 * 0 for stop/pause
 * 1 for play*/
@Override
public IBinder onBind(Intent intent) 
{
    return null;
}//onBind

@Override
public void onCreate() 
{
    super.onCreate();

    mediaPlayer = MediaPlayer.create(getApplicationContext(), R.raw.chalisa);
    mediaPlayer.setVolume(100, 100);
    mediaPlayer.setOnCompletionListener(this);
    tm = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
    tm.listen(mPhoneListener, PhoneStateListener.LISTEN_CALL_STATE);
}//onCreate

@Override
public int onStartCommand(Intent intent, int flags, int startId) 
{
    if(mediaPlayer.isPlaying())
    {
        mediaPlayer.pause();
        /*HanuAlarm.txtPlay.setText("Play");
        HanuAlarm.btn_Play.setBackgroundResource(R.drawable.btnplay);*/
        playerFlag = 0;
    }//if
    else
    {
        mediaPlayer.start();
        /*HanuAlarm.txtPlay.setText("Pause");
        HanuAlarm.btn_Play.setBackgroundResource(R.drawable.btnpause);*/
        playerFlag = 1;
    }//else

    startForeground(0, null);
    return playerFlag;
}//onStartCommand

@Override
public void onDestroy() 
{
    super.onDestroy();
    /*//mediaPlayer.stop();
    //mediaPlayer.release();
    playerFlag = 0;
    Log.v("Chalisa service", "on destroy called");*/
}//onDestroy

private PhoneStateListener mPhoneListener = new PhoneStateListener() {
    public void onCallStateChanged(int state, String incomingNumber) {
        switch (state) {
        case TelephonyManager.CALL_STATE_RINGING:
            if(mediaPlayer.isPlaying())
            {
                mediaPlayer.pause();
                playerFlag = 0;
            }//if
            break;

        case TelephonyManager.CALL_STATE_OFFHOOK:
            if(mediaPlayer.isPlaying())
            {
                mediaPlayer.pause();
                playerFlag = 0;
            }//if
            break;

            /**
             * Nitish 
             * 26 Sep 2012, Wed 
             * 11:50 AM*/
        case TelephonyManager.CALL_STATE_IDLE:
            if(!mediaPlayer.isPlaying())
            {
                mediaPlayer.start();
                playerFlag = 1;
            }//if
        default:
            Log.d("Chalisa Service", "Unknown phone state=" + state);
        }
    } 
};

public void onCompletion(MediaPlayer mp) 
{
    mp.stop();
    mp.release();
    playerFlag = 0;
    stopSelf();
    updateUI();
    Log.v("Chalisa Service media player", "on completion listener called");
}

private void updateUI() 
{
    Intent in = new Intent("com.dzo.HanumanChalisaWithAudioAndAlarm.UPDATE_UI");
    in.putExtra("Player_FLAG_VALUE", playerFlag);
    getApplicationContext().sendBroadcast(in);
}
}//ChalisaService 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:22:28.383

尝试使用以下命令强制它暂停：

```
Intent i = new Intent("com.android.music.musicservicecommand");
        i.putExtra("command", "pause");
        mContext.sendBroadcast(i); 
```

# eclipse - 无法在 Eclipse 中的 Java 编辑器中键入与 (&) 字符

> ID：12581431
> 
> 赞同：3
> 
> 时间：2012-09-25T10:50:31.397
> 
> 标签：eclipse, keyboard-shortcuts

在互联网上没有找到任何有用的信息。我正在使用带有匈牙利语键盘布局的 Windows 7 安装，并且我无法`AltGr+C`在 Eclipse 中使用我的 Java 源文件输入与号 (&) 字符。我可以在 XML 文件中做同样的事情。如果我改回英文键盘布局，我可以使用`Shift+8`.

是什么阻止了 Eclipse 中的这个快捷方式？我可以毫无问题地在 NetBeans 中输入相同的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T11:50:17.240

Window->Preferences 然后 General->Keys。搜索“Ctrl+Alt+C”。

# c# - 更改 ClickOnce 应用程序的更新 URL

> ID：12581433
> 
> 赞同：8
> 
> 时间：2012-09-25T10:50:34.530
> 
> 标签：c#, clickonce

是否可以将更新[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)更改为已安装 ClickOnce 应用程序的不同位置？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:37:05.107

您在评论中提到您希望“在客户端”更改它。这是不可能的。您的客户端应用程序必须能够检查先前位置的更新，然后将其重定向到新位置以立即进行下一次部署。

请参阅[如何移动 ClickOnce 部署](http://robindotnet.wordpress.com/2010/01/17/how-to-move-a-clickonce-deployment/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-21T06:14:30.020

有技巧可以吗。您可以将其部署到默认发布位置。（应用程序不应检查更新）。然后将您的部署复制到客户服务器。只需在客户端机器上安装您的应用程序。System.Deployment.Application.ApplicationDeployment.CurrentDeployment.UpdateLocation.AbsoluteUri 字段包含安装应用程序的位置和 .application。如果你知道，那么你可以简单地执行这个 url。要检查是否有更新，请检查 .application 文件和版本。

这是我的助手类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;

namespace MatemanSC.Utility
{
    public class ClickOnceUtil
    {
        Version _UpdateVersion = null;
        public string UpdateLocation
        {
            get
            {
                return System.Deployment.Application.ApplicationDeployment.CurrentDeployment.UpdateLocation.AbsoluteUri;
            }
        }
        public Version AvailableVersion
        {
            get
            {
                if (_UpdateVersion == null)
                {
                    _UpdateVersion = new Version("0.0.0.0");
                    if (System.Deployment.Application.ApplicationDeployment.IsNetworkDeployed)
                    {
                        using (XmlReader reader = XmlReader.Create(System.Deployment.Application.ApplicationDeployment.CurrentDeployment.UpdateLocation.AbsoluteUri))
                        {
                            //Keep reading until there are no more FieldRef elements
                            while (reader.ReadToFollowing("assemblyIdentity"))
                            {
                                //Extract the value of the Name attribute
                                string versie = reader.GetAttribute("version");
                                _UpdateVersion = new Version(versie);
                            }
                        }
                    }
                }
                return _UpdateVersion;
            }
        }
        public bool UpdateAvailable
        {
            get
            {
                return System.Deployment.Application.ApplicationDeployment.CurrentDeployment.CurrentVersion != AvailableVersion;
            }
        }
        public string CurrentVersion
        {
            get
            {
                return System.Deployment.Application.ApplicationDeployment.CurrentDeployment.CurrentVersion.ToString();
            }
        }

        public void Update()
        {
            System.Diagnostics.Process.Start(System.Deployment.Application.ApplicationDeployment.CurrentDeployment.UpdateLocation.AbsoluteUri);
            Environment.Exit(0);
        }

        public void CheckAndUpdate()
        {
            try
            {
                if (UpdateAvailable)
                    Update();
            }
            catch (Exception)
            {
            }
        }
    }
} 
```

这是如何使用它：

```
public partial class App : Application
{
    public App()
    {
        ClickOnceUtil clickonceutil = new ClickOnceUtil();
        clickonceutil.CheckAndUpdate();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-29T20:49:52.700

当你想更改升级程序的 url 时，你可以在 web.config 中使用 url rewrite：旧程序将指向旧 url，但它会带来新程序，新程序将具有新 url .

# c++ - 协议缓冲区；将数据保存到磁盘并加载回问题

> ID：12581435
> 
> 赞同：8
> 
> 时间：2012-09-25T10:50:38.140
> 
> 标签：c++, protocol-buffers

我在将 Protobuf 数据存储到磁盘时遇到问题。我拥有的应用程序使用协议缓冲区通过套接字传输数据（工作正常），但是当我尝试将数据存储到磁盘时它失败了。实际上，保存数据报告没有问题，但我似乎无法再次正确加载它们。任何提示将不胜感激。

```
void writeToDisk(DataList & dList)
{
    // open streams
    int fd = open("serializedMessage.pb", O_WRONLY | O_CREAT);
    google::protobuf::io::ZeroCopyOutputStream* fileOutput = new google::protobuf::io::FileOutputStream(fd);
    google::protobuf::io::CodedOutputStream* codedOutput = new google::protobuf::io::CodedOutputStream(fileOutput);

    // save data
    codedOutput->WriteLittleEndian32(PROTOBUF_MESSAGE_ID_NUMBER); // store with message id
    codedOutput->WriteLittleEndian32(dList.ByteSize()); // the size of the data i will serialize
    dList.SerializeToCodedStream(codedOutput); // serialize the data

    // close streams
    delete codedOutput;
    delete fileOutput;

    close(fd);
} 
```

我已经验证了这个函数中的数据，dList 包含我期望的数据。流报告没有发生错误，并且有合理数量的字节被写入磁盘。（文件大小也很合理）但是当我尝试读回数据时，它不起作用。此外，真正奇怪的是，如果我将更多数据附加到此文件，我可以读取第一条消息（但不是最后的消息）。

```
void readDataFromFile()
{   
    // open streams
    int fd = open("serializedMessage.pb", O_RDONLY);
    google::protobuf::io::ZeroCopyInputStream* fileinput = new google::protobuf::io::FileInputStream(fd);
    google::protobuf::io::CodedInputStream* codedinput = new google::protobuf::io::CodedInputStream(fileinput);

    // read back
    uint32_t sizeToRead = 0, magicNumber = 0;
    string parsedStr = "";

    codedinput->ReadLittleEndian32(&magicNumber); // the message id-number i expect
    codedinput->ReadLittleEndian32(&sizeToRead); // the reported data size, also what i expect
    codedinput->ReadString(&parsedstr, sizeToRead)) // the size() of 'parsedstr' is much less than it should (sizeToRead)

    DataList dl = DataList();

    if (dl.ParseFromString(parsedstr)) // fails
    {
        // work with data if all okay
    }

    // close streams
    delete codedinput;
    delete fileinput;
    close(fd);
} 
```

显然我在这里省略了一些代码以简化一切。作为旁注，我还尝试将消息序列化为字符串并通过 CodedOutputStream 保存该字符串。这也不起作用。我已经验证了该字符串的内容，所以我猜罪魁祸首一定是流函数。

这是一个 Windows 环境，带有协议缓冲区和 Qt 的 c++。

感谢您的时间！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T07:23:43.050

我通过从文件描述符切换到 fstream 并将 FileCopyStream 切换到 OstreamOutputStream 解决了这个问题。

尽管我已经看到使用前者的示例，但它对我不起作用。

我在 google coded_stream 标头中找到了一个很好的代码示例。[链接#1](http://code.google.com/p/protobuf/source/browse/trunk/src/google/protobuf/io/coded_stream.h?r=410)

此外，由于我需要使用协议缓冲区将多条消息序列化到同一个文件，这个链接很有启发性。[链接#2](http://www.mail-archive.com/protobuf@googlegroups.com/msg03417.html)

出于某种原因，在我实际破坏流对象之前，输出文件并不“完整”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-03T14:18:43.517

读取失败是因为未使用 O_BINARY 打开文件进行读取 - 将文件打开更改为此并且它可以工作：

`int fd = open("serializedMessage.pb", O_RDONLY | O_BINARY);`

根本原因与此处相同：“ [read() 仅从文件中读取几个字节](https://stackoverflow.com/questions/8743467/read-only-reads-a-few-bytes-from-file)”。您很可能遵循 protobuf 文档中的示例，该示例以相同的方式打开文件，但是当它遇到文件中的特殊字符时，它会在 Windows 上停止解析。

此外，在该库的更新版本中，您可以使用`protobuf::util::ParseDelimitedFromCodedStream`来简化读取大小+有效负载对。

...这个问题可能是古老的，但问题仍然存在，这个答案几乎可以肯定是对原始问题的修复。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T12:37:55.273

尝试使用

`codedinput->readRawBytes`而不是`ReadString`

和

`dl.ParseFromArray`代替`ParseFromString`

对协议缓冲区不太熟悉，但`ReadString`可能只读取 type 的字段`strine`。

# python - 带有生成器/可迭代/迭代器的 Python 随机样本

> ID：12581437
> 
> 赞同：45
> 
> 时间：2012-09-25T10:50:43.483
> 
> 标签：python, random, generator

你知道是否有办法让 python`random.sample`使用生成器对象。我正在尝试从一个非常大的文本语料库中获取随机样本。问题是`random.sample()`引发以下错误。

```
TypeError: object of type 'generator' has no len() 
```

我在想也许有一些方法可以用一些东西来做这件事，`itertools`但通过一些搜索却找不到任何东西。

一个有点编造的例子：

```
import random
def list_item(ls):
    for item in ls:
        yield item

random.sample( list_item(range(100)), 20 ) 
```

* * *

* * *

**更新**

* * *

根据`MartinPieters`的要求，我对目前提出的三种方法做了一些时间安排。结果如下。

```
Sampling 1000 from 10000
Using iterSample 0.0163 s
Using sample_from_iterable 0.0098 s
Using iter_sample_fast 0.0148 s

Sampling 10000 from 100000
Using iterSample 0.1786 s
Using sample_from_iterable 0.1320 s
Using iter_sample_fast 0.1576 s

Sampling 100000 from 1000000
Using iterSample 3.2740 s
Using sample_from_iterable 1.9860 s
Using iter_sample_fast 1.4586 s

Sampling 200000 from 1000000
Using iterSample 7.6115 s
Using sample_from_iterable 3.0663 s
Using iter_sample_fast 1.4101 s

Sampling 500000 from 1000000
Using iterSample 39.2595 s
Using sample_from_iterable 4.9994 s
Using iter_sample_fast 1.2178 s

Sampling 2000000 from 5000000
Using iterSample 798.8016 s
Using sample_from_iterable 28.6618 s
Using iter_sample_fast 6.6482 s 
```

所以事实证明，`array.insert`当涉及到大样本时，它有一个严重的缺点。我用来计时方法的代码

```
from heapq import nlargest
import random
import timeit

def iterSample(iterable, samplesize):
    results = []
    for i, v in enumerate(iterable):
        r = random.randint(0, i)
        if r < samplesize:
            if i < samplesize:
                results.insert(r, v) # add first samplesize items in random order
            else:
                results[r] = v # at a decreasing rate, replace random items

    if len(results) < samplesize:
        raise ValueError("Sample larger than population.")

    return results

def sample_from_iterable(iterable, samplesize):
    return (x for _, x in nlargest(samplesize, ((random.random(), x) for x in iterable)))

def iter_sample_fast(iterable, samplesize):
    results = []
    iterator = iter(iterable)
    # Fill in the first samplesize elements:
    for _ in xrange(samplesize):
        results.append(iterator.next())
    random.shuffle(results)  # Randomize their positions
    for i, v in enumerate(iterator, samplesize):
        r = random.randint(0, i)
        if r < samplesize:
            results[r] = v  # at a decreasing rate, replace random items

    if len(results) < samplesize:
        raise ValueError("Sample larger than population.")
    return results

if __name__ == '__main__':
    pop_sizes = [int(10e+3),int(10e+4),int(10e+5),int(10e+5),int(10e+5),int(10e+5)*5]
    k_sizes = [int(10e+2),int(10e+3),int(10e+4),int(10e+4)*2,int(10e+4)*5,int(10e+5)*2]

    for pop_size, k_size in zip(pop_sizes, k_sizes):
        pop = xrange(pop_size)
        k = k_size
        t1 = timeit.Timer(stmt='iterSample(pop, %i)'%(k_size), setup='from __main__ import iterSample,pop')
        t2 = timeit.Timer(stmt='sample_from_iterable(pop, %i)'%(k_size), setup='from __main__ import sample_from_iterable,pop')
        t3 = timeit.Timer(stmt='iter_sample_fast(pop, %i)'%(k_size), setup='from __main__ import iter_sample_fast,pop')

        print 'Sampling', k, 'from', pop_size
        print 'Using iterSample', '%1.4f s'%(t1.timeit(number=100) / 100.0)
        print 'Using sample_from_iterable', '%1.4f s'%(t2.timeit(number=100) / 100.0)
        print 'Using iter_sample_fast', '%1.4f s'%(t3.timeit(number=100) / 100.0)
        print '' 
```

我还进行了一项测试，以检查所有方法确实确实采用了生成器的无偏样本。因此，对于所有方法，我从时间中采样`1000`元素`10000` `100000`并计算总体中每个项目的平均出现频率，结果证明这`~.1`与所有三种方法的预期相同。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-25T12:56:13.753

虽然 Martijn Pieters 的答案是正确的，但它在变大时确实会变慢`samplesize`，因为`list.insert`在循环中使用可能具有二次复杂度。

在我看来，这是一种在提高性能的同时保持均匀性的替代方案：

```
def iter_sample_fast(iterable, samplesize):
    results = []
    iterator = iter(iterable)
    # Fill in the first samplesize elements:
    try:
        for _ in xrange(samplesize):
            results.append(iterator.next())
    except StopIteration:
        raise ValueError("Sample larger than population.")
    random.shuffle(results)  # Randomize their positions
    for i, v in enumerate(iterator, samplesize):
        r = random.randint(0, i)
        if r < samplesize:
            results[r] = v  # at a decreasing rate, replace random items
    return results 
```

`samplesize`对于上面的值，差异慢慢开始显现`10000`。拨打电话的时间`(1000000, 100000)`：

*   迭代采样：5.05s
*   iter_sample_fast：2.64 秒

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-25T10:53:34.763

你不能。

您有两种选择：将整个生成器读入一个列表，然后从该列表中采样，或者使用一种方法逐个读取生成器并从中挑选样本：

```
import random

def iterSample(iterable, samplesize):
    results = []

    for i, v in enumerate(iterable):
        r = random.randint(0, i)
        if r < samplesize:
            if i < samplesize:
                results.insert(r, v) # add first samplesize items in random order
            else:
                results[r] = v # at a decreasing rate, replace random items

    if len(results) < samplesize:
        raise ValueError("Sample larger than population.")

    return results 
```

*此方法根据迄今为止*可迭代项中的项目数调整下一个项目是样本一部分的机会。它不需要`samplesize`在内存中保存超过项目。

解决方案不是我的；[它是在 SO 上](https://stackoverflow.com/a/12134726/4279)作为另一个答案的一部分提供的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-25T12:24:42.197

只是为了它，这是一个单线，它从O( *n* lg *k* ) 时间生成的*n 个项目中采样**k*个元素而不替换：

 ***```
from heapq import nlargest

def sample_from_iterable(it, k):
    return (x for _, x in nlargest(k, ((random.random(), x) for x in it))) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-27T16:31:28.793

> 我正在尝试从一个非常大的文本语料库中获取随机样本。

[您出色的综合答案](https://stackoverflow.com/q/12581437/1424877)目前显示`iter_sample_fast(gen, pop)`. 但是，我尝试了 Katriel 的推荐`random.sample(list(gen), pop)`——相比之下，它的速度快得惊人！

```
def iter_sample_easy(iterable, samplesize):
    return random.sample(list(iterable), samplesize)

Sampling 1000 from 10000
Using iter_sample_fast 0.0192 s
Using iter_sample_easy 0.0009 s

Sampling 10000 from 100000
Using iter_sample_fast 0.1807 s
Using iter_sample_easy 0.0103 s

Sampling 100000 from 1000000
Using iter_sample_fast 1.8192 s
Using iter_sample_easy 0.2268 s

Sampling 200000 from 1000000
Using iter_sample_fast 1.7467 s
Using iter_sample_easy 0.3297 s

Sampling 500000 from 1000000
Using iter_sample_easy 0.5628 s

Sampling 2000000 from 5000000
Using iter_sample_easy 2.7147 s 
```

* * *

现在，随着您的语料库变得*非常大*，将整个迭代物化为 a`list`将使用大量的内存。*但是，如果我们可以将问题分块，*我们仍然可以利用 Python 的超快性：基本上，我们选择一个`CHUNKSIZE`“相当小”`random.sample`的块，然后`random.sample`再将它们合并在一起。我们只需要正确设置边界条件。

`list(iterable)`如果长度是 的精确倍数`CHUNKSIZE`且不大于 ，我知道该怎么做`samplesize*CHUNKSIZE`：

```
def iter_sample_dist_naive(iterable, samplesize):
    CHUNKSIZE = 10000
    samples = []
    it = iter(iterable)
    try:
        while True:
            first = next(it)
            chunk = itertools.chain([first], itertools.islice(it, CHUNKSIZE-1))
            samples += iter_sample_easy(chunk, samplesize)
    except StopIteration:
        return random.sample(samples, samplesize) 
```

但是，上面的代码在 时会产生非均匀采样，并且会在“非常大”时`len(list(iterable)) % CHUNKSIZE != 0`耗尽内存。`len(list(iterable)) * samplesize / CHUNKSIZE`修复这些错误恐怕超出了我的薪酬等级，但[这篇博文](https://ballsandbins.wordpress.com/2014/04/13/distributedparallel-reservoir-sampling/)中描述了一个解决方案，对我来说听起来很合理。（搜索词：“分布式随机抽样”、“分布式水库抽样”。）

```
Sampling 1000 from 10000
Using iter_sample_fast 0.0182 s
Using iter_sample_dist_naive 0.0017 s
Using iter_sample_easy 0.0009 s

Sampling 10000 from 100000
Using iter_sample_fast 0.1830 s
Using iter_sample_dist_naive 0.0402 s
Using iter_sample_easy 0.0103 s

Sampling 100000 from 1000000
Using iter_sample_fast 1.7965 s
Using iter_sample_dist_naive 0.6726 s
Using iter_sample_easy 0.2268 s

Sampling 200000 from 1000000
Using iter_sample_fast 1.7467 s
Using iter_sample_dist_naive 0.8209 s
Using iter_sample_easy 0.3297 s 
```

* * *

我们真正获胜的地方是`samplesize`相对于 非常小的时候`len(list(iterable))`。

```
Sampling 20 from 10000
Using iterSample 0.0202 s
Using sample_from_iterable 0.0047 s
Using iter_sample_fast 0.0196 s
Using iter_sample_easy 0.0001 s
Using iter_sample_dist_naive 0.0004 s

Sampling 20 from 100000
Using iterSample 0.2004 s
Using sample_from_iterable 0.0522 s
Using iter_sample_fast 0.1903 s
Using iter_sample_easy 0.0016 s
Using iter_sample_dist_naive 0.0029 s

Sampling 20 from 1000000
Using iterSample 1.9343 s
Using sample_from_iterable 0.4907 s
Using iter_sample_fast 1.9533 s
Using iter_sample_easy 0.0211 s
Using iter_sample_dist_naive 0.0319 s

Sampling 20 from 10000000
Using iterSample 18.6686 s
Using sample_from_iterable 4.8120 s
Using iter_sample_fast 19.3525 s
Using iter_sample_easy 0.3162 s
Using iter_sample_dist_naive 0.3210 s

Sampling 20 from 100000000
Using iter_sample_easy 2.8248 s
Using iter_sample_dist_naive 3.3817 s 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-30T07:47:56.060

如果人口规模*n*是已知的，这里有一些内存高效的代码在生成器上循环，只提取目标样本：

```
from random import sample
from itertools import count, compress

targets = set(sample(range(n), k=10))
for selection in compress(pop, map(targets.__contains__, count())):
    print(selection) 
```

这会按照人口生成器生成的顺序输出选择。

该技术是使用标准库*random.sample()*随机选择目标索引进行选择。第二个like 确定给定索引是否在目标中，如果是，则从生成器中给出相应的值。

例如，给定目标`{6, 2, 4}`：

```
0  1  2  3  4  5  6  7  8  9  10   ...  output of count()
F  F  T  F  T  F  T  F  F  F  F    ...  is the count in targets?
A  B  C  D  E  F  G  H  I  J  K    ...  output of the population generator
-  -  C  -  E  -  G  -  -  -  -    ...  selections emitted by compress 
```

这种技术适用于循环一个太大而无法放入内存的语料库（否则，您可以直接在总体上 使用*sample() ）。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-14T00:21:27.683

如果迭代器中的项目数是已知的（通过其他地方计算项目），另一种方法是：

```
def iter_sample(iterable, iterlen, samplesize):
    if iterlen < samplesize:
        raise ValueError("Sample larger than population.")
    indexes = set()
    while len(indexes) < samplesize:
        indexes.add(random.randint(0,iterlen))
    indexesiter = iter(sorted(indexes))
    current = indexesiter.next()
    ret = []
    for i, item in enumerate(iterable):
        if i == current:
            ret.append(item)
            try:
                current = indexesiter.next()
            except StopIteration:
                break
    random.shuffle(ret)
    return ret 
```

我发现这更快，尤其是当 sampsize 相对于 iterlen 较小时。但是，当要求提供整体或接近整体的样本时，就会出现问题。

iter_sample (iterlen=10000, samplesize=100) 时间: (1, 'ms') iter_sample_fast (iterlen=10000, samplesize=100) 时间: (15, 'ms')

iter_sample (iterlen=1000000, samplesize=100) 时间: (65, 'ms') iter_sample_fast (iterlen=1000000, samplesize=100) 时间: (1477, 'ms')

iter_sample (iterlen=1000000, samplesize=1000) 时间: (64, 'ms') iter_sample_fast (iterlen=1000000, samplesize=1000) 时间: (1459, 'ms')

iter_sample (iterlen=1000000, samplesize=10000) 时间: (86, 'ms') iter_sample_fast (iterlen=1000000, samplesize=10000) 时间: (1480, 'ms')

iter_sample (iterlen=1000000, samplesize=100000) 时间: (388, 'ms') iter_sample_fast (iterlen=1000000, samplesize=100000) 时间: (1521, 'ms')

iter_sample (iterlen=1000000, samplesize=1000000) 时间: (25359, 'ms') iter_sample_fast (iterlen=1000000, samplesize=1000000) 时间: (2178, 'ms')

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-19T12:47:06.783

最快的方法，直到你知道生成器有多长（并且将渐近均匀分布）时，否则证明不是这样：

```
def gen_sample(generator_list, sample_size, iterlen):
    num = 0
    inds = numpy.random.random(iterlen) <= (sample_size * 1.0 / iterlen)
    results = []
    iterator = iter(generator_list)
    gotten = 0
    while gotten < sample_size: 
        try:
            b = iterator.next()
            if inds[num]: 
                results.append(b)
                gotten += 1
            num += 1    
        except: 
            num = 0
            iterator = iter(generator_list)
            inds = numpy.random.random(iterlen) <= ((sample_size - gotten) * 1.0 / iterlen)
    return results 
```

它在小型迭代和大型迭代中都是最快的（可能介于两者之间）

```
# Huge
res = gen_sample(xrange(5000000), 200000, 5000000)
timing: 1.22s

# Small
z = gen_sample(xrange(10000), 1000, 10000) 
timing: 0.000441 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-11T04:44:04.713

这是一个完全不同的变体，它使用一组作为一桶项目。它首先用`pool`项目启动桶，然后从桶中产生样本，从迭代器中替换它们，最后它排出桶的剩余部分。

`HashWrapper`用于隐藏`set`.

```
class HashWrapper(tuple):
    """Wrap unhashable type."""
    def __hash__(self):
        return id(self)

def randomize_iterator(data: Iterator, pool=100) -> Iterator:
    """
    Randomize an iterator.
    """

    bucket = set()
    iterator = iter(data)

    # Prime the bucket
    for _ in range(pool):
        try:
            bucket.add(HashWrapper(next(iterator)))
        except StopIteration:
            # We've drained the iterator
            break

    # Start picking from the bucket and replacing new items from the iterator
    for item in iterator:
        sample, = random.sample(bucket, 1)
        yield sample
        bucket.remove(sample)
        bucket.add(HashWrapper(item))

    # Drain the bucket
    yield from random.sample(bucket, len(bucket)) 
```***

# angularjs - 如何向 AngularJS 表单添加自定义验证？

> ID：12581439
> 
> 赞同：281
> 
> 时间：2012-09-25T10:50:50.547
> 
> 标签：angularjs

`required`通过添加属性等，我有一个带有输入字段和验证设置的表单。但对于某些领域，我需要做一些额外的验证。我将如何“利用”控制的验证`FormController`？

自定义验证可能类似于“如果填写了这 3 个字段，则此字段是必需的并且需要以特定方式格式化”。

有一个方法，`FormController.$setValidity`但它看起来不像公共 API，所以我宁愿不使用它。创建自定义指令并使用`NgModelController`看起来像是另一种选择，但基本上需要我为每个自定义验证规则创建一个指令，这是我不想要的。

实际上，将控制器中的字段标记为无效（同时保持`FormController`同步）可能是我在最简单的情况下完成工作所需要的，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：375
> 
> 时间：2013-02-26T13:52:57.060

**编辑：在下面添加了有关 ngMessages (>= 1.3.X) 的信息。**

## 标准表单验证消息（1.0.X 及更高版本）

由于如果您使用 Google“Angular 表单验证”，这是最好的结果之一，目前，我想为从那里进来的任何人添加另一个答案。

> FormController.$setValidity 中有一个方法，但它看起来不像公共 API，所以我宁愿不使用它。

这是“公开的”，不用担心。用它。这就是它的用途。如果不打算使用它，Angular 开发人员会在闭包中将其私有化。

要进行自定义验证，如果您不想像其他答案所建议的那样使用 Angular-UI，您可以简单地滚动您自己的验证指令。

```
app.directive('blacklist', function (){ 
   return {
      require: 'ngModel',
      link: function(scope, elem, attr, ngModel) {
          var blacklist = attr.blacklist.split(',');

          //For DOM -> model validation
          ngModel.$parsers.unshift(function(value) {
             var valid = blacklist.indexOf(value) === -1;
             ngModel.$setValidity('blacklist', valid);
             return valid ? value : undefined;
          });

          //For model -> DOM validation
          ngModel.$formatters.unshift(function(value) {
             ngModel.$setValidity('blacklist', blacklist.indexOf(value) === -1);
             return value;
          });
      }
   };
}); 
```

这是一些示例用法：

```
<form name="myForm" ng-submit="doSomething()">
   <input type="text" name="fruitName" ng-model="data.fruitName" blacklist="coconuts,bananas,pears" required/>
   <span ng-show="myForm.fruitName.$error.blacklist">
      The phrase "{{data.fruitName}}" is blacklisted</span>
   <span ng-show="myForm.fruitName.$error.required">required</span>
   <button type="submit" ng-disabled="myForm.$invalid">Submit</button>
</form> 
```

**注意：在 1.2.X 中，它可能更适合`ng-if`替换`ng-show`上面**

这是一个强制性的[plunker 链接](http://plnkr.co/edit/4u8FV869aD33WozdqdQ2?p=preview)

此外，我还写了一些关于这个主题的博客文章，其中包含更详细的内容：

[角度表单验证](http://www.benlesh.com/2012/11/angular-js-form-validation.html)

[自定义验证指令](http://www.benlesh.com/2012/12/angular-js-custom-validation-via.html)

## 编辑：在 1.3.X 中使用 ngMessages

您现在可以使用 ngMessages 模块而不是 ngShow 来显示错误消息。它实际上可以与任何东西一起使用，它不一定是错误消息，但这里是基础知识：

1.  包括`<script src="angular-messages.js"></script>`
2.  `ngMessages`在您的模块声明中引用：

    ```
    var app = angular.module('myApp', ['ngMessages']); 
    ```

3.  添加适当的标记：

    ```
    <form name="personForm">
      <input type="email" name="email" ng-model="person.email" required/>

      <div ng-messages="personForm.email.$error">
        <div ng-message="required">required</div>
        <div ng-message="email">invalid email</div>
      </div>
    </form> 
    ```

在上面的标记中，基本上为子指令`ng-message="personForm.email.$error"`指定了一个上下文。`ng-message`然后 在该上下文`ng-message="required"`上`ng-message="email"`指定要观察的属性。**最重要的是，他们还指定了签入的顺序**。它在列表中找到的第一个“真实”的获胜，它将显示该消息而不显示其他消息。

还有一个[ngMessages 示例的 plunker](http://plnkr.co/edit/ucbkRcZxaSvWSLBC5v2z?p=preview)

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2012-10-05T10:08:07.403

Angular-UI 的项目包括一个 ui-validate 指令，它可能会帮助你。它让您指定一个要调用的函数来进行验证。

查看演示页面：[http](http://angular-ui.github.com/) ://angular-ui.github.com/ ，搜索到 Validate 标题。

从演示页面：

```
<input ng-model="email" ui-validate='{blacklist : notBlackListed}'>
<span ng-show='form.email.$error.blacklist'>This e-mail is black-listed!</span> 
```

然后在你的控制器中：

```
function ValidateCtrl($scope) {
  $scope.blackList = ['bad@domain.com','verybad@domain.com'];
  $scope.notBlackListed = function(value) {
    return $scope.blackList.indexOf(value) === -1;
  };
} 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2013-03-05T11:15:50.853

您可以将 ng-required 用于您的验证场景（“如果填写了这 3 个字段，则此字段是必需的”：

```
<div ng-app>
    <input type="text" ng-model="field1" placeholder="Field1">
    <input type="text" ng-model="field2" placeholder="Field2">
    <input type="text" ng-model="field3" placeholder="Field3">
    <input type="text" ng-model="dependentField" placeholder="Custom validation"
        ng-required="field1 && field2 && field3">
</div> 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2014-08-08T03:20:03.880

您可以使用[Angular-Validator](https://github.com/turinggroup/angular-validator)。

**示例：使用函数验证字段**

```
<input  type = "text"
    name = "firstName"
    ng-model = "person.firstName"
    validator = "myCustomValidationFunction(form.firstName)"> 
```

然后在你的控制器中你会有类似的东西

```
$scope.myCustomValidationFunction = function(firstName){ 
   if ( firstName === "John") {
       return true;
    } 
```

**你也可以这样做：**

```
<input  type = "text"
        name = "firstName"
        ng-model = "person.firstName"
        validator = "'!(field1 && field2 && field3)'"
        invalid-message = "'This field is required'"> 
```

（其中 field1 field2 和 field3 是范围变量。您可能还想检查字段是否不等于空字符串）

如果该字段未通过，`validator`则该字段将被标记为无效，用户将无法提交表单。

有关更多用例和示例，请参见：[https ://github.com/turinggroup/angular-validator](https://github.com/turinggroup/angular-validator)

*免责声明：我是 Angular-Validator 的作者*

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2014-01-05T19:58:49.373

这是在表单中进行自定义通配符表达式验证的一种很酷的方法（来自：[Advanced form validation with AngularJS and filters](http://blog.bennybottema.com/2014/01/05/advanced-form-validation-with-angularjs-and-filters/)）：

```
<form novalidate="">  
   <input type="text" id="name" name="name" ng-model="newPerson.name"
      ensure-expression="(persons | filter:{name: newPerson.name}:true).length !== 1">
   <!-- or in your case:-->
   <input type="text" id="fruitName" name="fruitName" ng-model="data.fruitName"
      ensure-expression="(blacklist | filter:{fruitName: data.fruitName}:true).length !== 1">
</form> 
```

```
app.directive('ensureExpression', ['$http', '$parse', function($http, $parse) {
    return {
        require: 'ngModel',
        link: function(scope, ele, attrs, ngModelController) {
            scope.$watch(attrs.ngModel, function(value) {
                var booleanResult = $parse(attrs.ensureExpression)(scope);
                ngModelController.$setValidity('expression', booleanResult);
            });
        }
    };
}]); 
```

[jsFiddle demo](http://jsfiddle.net/plantface/LS8rt/)（支持表达式命名和多个表达式）

它类似于`ui-validate`，但您不需要特定于范围的验证功能（这通常适用），当然您也不需要*ui.utils*这种方式。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2015-06-05T14:36:50.563

我最近创建了一个指令，允许基于表达式的角度形式输入无效。可以使用任何有效的角度表达式，并且它支持使用对象表示法的自定义验证键。使用角度 v1.3.8 测试

```
 .directive('invalidIf', [function () {
        return {
            require: 'ngModel',
            link: function (scope, elm, attrs, ctrl) {

                var argsObject = scope.$eval(attrs.invalidIf);

                if (!angular.isObject(argsObject)) {
                    argsObject = { invalidIf: attrs.invalidIf };
                }

                for (var validationKey in argsObject) {
                    scope.$watch(argsObject[validationKey], function (newVal) {
                        ctrl.$setValidity(validationKey, !newVal);
                    });
                }
            }
        };
    }]); 
```

你可以像这样使用它：

```
<input ng-model="foo" invalid-if="{fooIsGreaterThanBar: 'foo > bar',
                                   fooEqualsSomeFuncResult: 'foo == someFuncResult()'}/> 
```

或者只是传入一个表达式（它将被赋予“invalidIf”的默认validationKey）

```
<input ng-model="foo" invalid-if="foo > bar"/> 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-10-01T05:35:49.423

@synergetic 我认为@blesh 假设将函数验证如下

```
function validate(value) {
    var valid = blacklist.indexOf(value) === -1;
    ngModel.$setValidity('blacklist', valid);
    return valid ? value : undefined;
}

ngModel.$formatters.unshift(validate);
ngModel.$parsers.unshift(validate); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-02-10T22:48:25.483

**更新：**

具有相同功能的先前指令的改进和简化版本（一个而不是两个）：

```
.directive('myTestExpression', ['$parse', function ($parse) {
    return {
        restrict: 'A',
        require: 'ngModel',
        link: function (scope, element, attrs, ctrl) {
            var expr = attrs.myTestExpression;
            var watches = attrs.myTestExpressionWatch;

            ctrl.$validators.mytestexpression = function (modelValue, viewValue) {
                return expr == undefined || (angular.isString(expr) && expr.length < 1) || $parse(expr)(scope, { $model: modelValue, $view: viewValue }) === true;
            };

            if (angular.isString(watches)) {
                angular.forEach(watches.split(",").filter(function (n) { return !!n; }), function (n) {
                    scope.$watch(n, function () {
                        ctrl.$validate();
                    });
                });
            }
        }
    };
}]) 
```

示例用法：

```
<input ng-model="price1" 
       my-test-expression="$model > 0" 
       my-test-expression-watch="price2,someOtherWatchedPrice" />
<input ng-model="price2" 
       my-test-expression="$model > 10" 
       my-test-expression-watch="price1" 
       required /> 
```

结果：相互依赖的测试表达式，其中验证器在其他指令模型和当前模型的更改时执行。

测试表达式具有局部`$model`变量，您应该使用它来将其与其他变量进行比较。

**之前：**

我试图通过添加额外的指令来改进@Plantface 代码。如果在多个 ngModel 变量中进行更改时需要执行我们的表达式，这个额外的指令非常有用。

```
.directive('ensureExpression', ['$parse', function($parse) {
    return {
        restrict: 'A',
        require: 'ngModel',
        controller: function () { },
        scope: true,
        link: function (scope, element, attrs, ngModelCtrl) {
            scope.validate = function () {
                var booleanResult = $parse(attrs.ensureExpression)(scope);
                ngModelCtrl.$setValidity('expression', booleanResult);
            };

            scope.$watch(attrs.ngModel, function(value) {
                scope.validate();
            });
        }
    };
}])

.directive('ensureWatch', ['$parse', function ($parse) {
    return {
        restrict: 'A',
        require: 'ensureExpression',
        link: function (scope, element, attrs, ctrl) {
            angular.forEach(attrs.ensureWatch.split(",").filter(function (n) { return !!n; }), function (n) {
                scope.$watch(n, function () {
                    scope.validate();
                });
            });
        }
    };
}]) 
```

示例如何使用它来制作交叉验证字段：

```
<input name="price1"
       ng-model="price1" 
       ensure-expression="price1 > price2" 
       ensure-watch="price2" />
<input name="price2" 
       ng-model="price2" 
       ensure-expression="price2 > price3" 
       ensure-watch="price3" />
<input name="price3" 
       ng-model="price3" 
       ensure-expression="price3 > price1 && price3 > price2" 
       ensure-watch="price1,price2" /> 
```

`ensure-expression``ng-model`当或任何`ensure-watch`变量更改时执行以验证模型。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-05-08T05:18:05.363

# 调用服务器的自定义验证

使用处理异步验证的[ngModelController `$asyncValidators`API](https://docs.angularjs.org/api/ng/type/ngModel.NgModelController#$asyncValidators)，例如`$http`向后端发出请求。添加到对象的函数必须返回一个必须在有效时解析或在无效时拒绝的承诺。进行中的异步验证通过密钥存储在`ngModelController.$pending`. 有关更多信息，请参阅[AngularJS 开发人员指南 - 表单（自定义验证）](https://docs.angularjs.org/guide/forms#custom-validation)。

```
ngModel.$asyncValidators.uniqueUsername = function(modelValue, viewValue) {
  var value = modelValue || viewValue;

  // Lookup user by username
  return $http.get('/api/users/' + value).
     then(function resolved() {
       //username exists, this means validation fails
       return $q.reject('exists');
     }, function rejected() {
       //username does not exist, therefore this validation passes
       return true;
     });
}; 
```

有关详细信息，请参阅

*   [ngModelController `$asyncValidators`API](https://docs.angularjs.org/api/ng/type/ngModel.NgModelController#$asyncValidators)

*   [AngularJS 开发人员指南 - 表单（自定义验证）](https://docs.angularjs.org/guide/forms#custom-validation)。

* * *

## 使用`$validators`API

接受的答案使用`$parsers`和`$formatters`管道添加自定义同步验证器。AngularJS 1.3+ 添加了一个`$validators`API，因此无需将验证器放入`$parsers`和`$formatters`管道中：

```
app.directive('blacklist', function (){ 
   return {
      require: 'ngModel',
      link: function(scope, elem, attr, ngModel) {           
          ngModel.$validators.blacklist = function(modelValue, viewValue) {
              var blacklist = attr.blacklist.split(',');
              var value = modelValue || viewValue;
              var valid = blacklist.indexOf(value) === -1;
              return valid;
          });    
      }
   };
}); 
```

有关更多信息，请参阅[AngularJS ngModelController API 参考 - $validators](https://docs.angularjs.org/api/ng/type/ngModel.NgModelController#$validators)。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-09-09T11:35:22.550

在 AngularJS 中，定义自定义验证的最佳位置是 Cutsom 指令。AngularJS 提供了一个 ngMessages 模块。

> ngMessages 是一个指令，旨在根据它所侦听的键/值对象的状态显示和隐藏消息。该指令本身使用 ngModel $error 对象（存储验证错误的键/值状态）补充错误消息报告。

对于自定义表单验证一个应该使用带有自定义指令的 ngMessages 模块。这里我有一个简单的验证，它将检查数字长度是否小于 6 在屏幕上显示错误

```
 <form name="myform" novalidate>
                <table>
                    <tr>
                        <td><input name='test' type='text' required  ng-model='test' custom-validation></td>
                        <td ng-messages="myform.test.$error"><span ng-message="invalidshrt">Too Short</span></td>
                    </tr>
                </table>
            </form> 
```

这是创建自定义验证指令的方法

```
angular.module('myApp',['ngMessages']);
        angular.module('myApp',['ngMessages']).directive('customValidation',function(){
            return{
            restrict:'A',
            require: 'ngModel',
            link:function (scope, element, attr, ctrl) {// 4th argument contain model information 

            function validationError(value) // you can use any function and parameter name 
                {
                 if (value.length > 6) // if model length is greater then 6 it is valide state
                 {
                 ctrl.$setValidity('invalidshrt',true);
                 }
                 else
                 {
                 ctrl.$setValidity('invalidshrt',false) //if less then 6 is invalide
                 }

                 return value; //return to display  error 
                }
                ctrl.$parsers.push(validationError); //parsers change how view values will be saved in the model
            }
            };
        }); 
```

`$setValidity`是用于将模型状态设置为有效/无效的内置函数

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-11-18T10:36:02.583

我扩展了@Ben Lesh 的答案，能够指定验证是否区分大小写（默认）

采用：

```
<input type="text" name="fruitName" ng-model="data.fruitName" blacklist="Coconuts,Bananas,Pears" caseSensitive="true" required/> 
```

代码：

```
angular.module('crm.directives', []).
directive('blacklist', [
    function () {
        return {
            restrict: 'A',
            require: 'ngModel',
            scope: {
                'blacklist': '=',
            },
            link: function ($scope, $elem, $attrs, modelCtrl) {

                var check = function (value) {
                    if (!$attrs.casesensitive) {
                        value = (value && value.toUpperCase) ? value.toUpperCase() : value;

                        $scope.blacklist = _.map($scope.blacklist, function (item) {
                            return (item.toUpperCase) ? item.toUpperCase() : item
                        })
                    }

                    return !_.isArray($scope.blacklist) || $scope.blacklist.indexOf(value) === -1;
                }

                //For DOM -> model validation
                modelCtrl.$parsers.unshift(function (value) {
                    var valid = check(value);
                    modelCtrl.$setValidity('blacklist', valid);

                    return value;
                });
                //For model -> DOM validation
                modelCtrl.$formatters.unshift(function (value) {
                    modelCtrl.$setValidity('blacklist', check(value));
                    return value;
                });
            }
        };
    }
]); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-11-07T21:01:17.583

该线程中提供了一些很棒的示例和库，但它们并不完全符合我的要求。我的方法：[angular-validity——](https://github.com/2Toad/Angular-Validity)一个基于 promise 的异步验证验证库，带有可选的 Bootstrap 样式。

OP 用例的角度有效性解决方案可能如下所示：

```
<input  type="text" name="field4" ng-model="field4"
        validity="eval"
        validity-eval="!(field1 && field2 && field3 && !field4)"
        validity-message-eval="This field is required"> 
```

这是一个[Fiddle](https://jsfiddle.net/zze8yste/)，如果你想试一试的话。该库在[GitHub](https://github.com/2Toad/Angular-Validity)上可用，有详细的文档和大量的现场演示。

# javascript - 尝试根据用户输入 JS/JQuery 从数组中检索数据

> ID：12581441
> 
> 赞同：0
> 
> 时间：2012-09-25T10:50:57.140
> 
> 标签：javascript, jquery

我正在尝试为我和朋友一起玩的桌面策略游戏创建一个随机领主生成器，基本上用户选择为其创建它的派系（然后更改可用名称）并选择它是国王还是领主（更改标题取决于当前选择的派系和排名）。

该脚本还将随机生成忠诚度、财富和影响力（游戏中需要的统计数据。）目前发生的情况是它显示统计数据，有时会搞砸影响力说 NaN 而不是预期的随机数，它还显示 Undefined Undefined of Undefined而不是 CurNation 的 CurTitle CurLordName。我通过 JSlint 运行它，只得到告诉我它应该在第 5 列而不是第 9 列等的东西，所以我很难过。

```
 // King/Lord creator
// when starting a campaign all kings are NPCs, also some lords are npcs.
//Global Variables
var iFaction, isKing;// faction in numbers (used for calculations)i and is character lord or king? 1 = king 2=lord
var curLordname, curTitle, curNation;  //Current lord name (For output), Current title (For output) and Current nation (For output)
var iModder; // Number to add to the random math
var curWealth; // Lord wealth (random number 200 - 1000)
var curLoyalty; //Lord Loyalty (random number between 1-10)
var curInfluence; //Lord Influence ((random number 1-10 + wealth/100)/2)
// King Titles

var aTitles = new Array();
aTitles[1] = "King";
aTitles[2] = "High Chief";
aTitles[3] = "Anax";
aTitles[4] = "Emperor";
// Lord Titles
aTitles[5] = "Baron";
aTitles[6] = "Jarl";
aTitles[7] = "Stratigos";
aTitles[8] = "Warlord";

// Lords names, Leontrois (1-25), Saxathia(26-50), Hellios(51-75), Drakon(75-100)
var aNames = new Array();
aNames[0] = "Maverick";
//Leontrois Names (Math.floor((Math.random()*25)+1);)
aNames[1] = "Henry";
aNames[2] = "Edward";
aNames[3] = "Thomas";
aNames[4] = "George";
aNames[5] = "Stephen";
aNames[6] = "William";
aNames[7] = "James";
aNames[8] = "Louis";
aNames[9] = "Charles";
aNames[10] = "David";
aNames[11] = "Oliver";
aNames[12] = "Duncan";
aNames[13] = "Leonardo";
aNames[14] = "Phillip";
aNames[15] = "Francis";
aNames[16] = "Johnathan";
aNames[17] = "Richard";
aNames[18] = "Robert";
aNames[19] = "Jacob";
aNames[20] = "Peter";
aNames[21] = "Patrick";
aNames[22] = "Arthur";
aNames[23] = "Isaac";
aNames[24] = "Laurence";
aNames[25] = "Edmund";
// Saxathia Names (Math.floor((Math.random()*25)+26);)
aNames[26] = "Mordra";
aNames[27] = "Horsa";
aNames[28] = "Offa";
aNames[29] = "Sigfryd";
aNames[30] = "Coelwulf";
aNames[31] = "Sledda";
aNames[32] = "Harold";
aNames[33] = "Ulfryk";
aNames[34] = "Ongar";
aNames[35] = "Ragnar";
aNames[36] = "Kren";
aNames[37] = "Merkar";
aNames[38] = "Canute";
aNames[39] = "Kealin";
aNames[40] = "Echbert";
aNames[41] = "Aethelred";
aNames[42] = "Ulfred";
aNames[43] = "Bryn";
aNames[44] = "Godwin";
aNames[45] = "Cin";
aNames[46] = "Oswine";
aNames[47] = "Mul";
aNames[48] = "Cnut";
aNames[49] = "Aelthor";
aNames[50] = "Gryff";
//Hellios Names (Math.floor((Math.random()*25)+51);)
aNames[51] = "Alexander";
aNames[52] = "Ajax";
aNames[53] = "Telemachus";
aNames[54] = "Odysseus";
aNames[55] = "Antinous";
aNames[56] = "Marcus";
aNames[57] = "Julius";
aNames[58] = "Nero";
aNames[59] = "Constantine";
aNames[60] = "Achillies";
aNames[62] = "Agamemnon";
aNames[63] = "Menelaus";
aNames[64] = "Nestor";
aNames[65] = "Laertes";
aNames[66] = "Priam";
aNames[67] = "Hector";
aNames[68] = "Paris";
aNames[69] = "Diomedes";
aNames[70] = "Patroclus";
aNames[71] = "Glaucus";
aNames[72] = "Sarpedon";
aNames[73] = "Idomeneus";
aNames[74] = "Eurymachus";
aNames[75] = "Amphinomus";
//Drakon names (Math.floor((Math.random()*25)+76);)
aNames[76] = "Xiahou";
aNames[77] = "Cao Yi";
aNames[78] = "Sun Li";
aNames[79] = "Ma Tao";
aNames[80] = "Jin Yuan";
aNames[81] = "Huang";
aNames[82] = "Zhong";
aNames[83] = "Fei Song";
aNames[84] = "Chan Yin";
aNames[85] = "Dong Xa";
aNames[86] = "Pang Shao";
aNames[87] = "Keiji";
aNames[88] = "Reiji";
aNames[89] = "Matsuhide";
aNames[90] = "Samonuske";
aNames[91] = "Nobunaga";
aNames[92] = "Ieyasu";
aNames[93] = "Minghuan";
aNames[94] = "Yisun";
aNames[95] = "Erdene";
aNames[96] = "Tolui";
aNames[97] = "Kenji";
aNames[98] = "Masamune";
aNames[99] = "Hassan";
aNames[100] = "Al'Tar";
//End of lord names

// First what nation are you from:
$("#selNation").change(function() {
iFaction = $(this).val();
    switch (iFaction) {
    case 1:
        curNation = "Leontrois";
        iModder = 1;
        break;
    case 2:
        //iFaction=2;
        curNation = "Saxathia";
        iModder = 26;
        break;
    case 3:
        //iFaction=3;
        curNation = "Hellios";
        iModder = 51;
        break;
    case 4:
        //iFaction = 4;
        curNation = "Drakon";
        iModder = 76;
        break;
    }
//$("#selLord").disabled = false;
});

$("#selLord").change(function() {
    isKing = $(this).val();
    switch (isKing) {
    case 1:
        curTitle = aTitles[iFaction];
        //  switch(iFaction){
                // case 1:
                // curTitle = aTitles[1];
                // break;
                // case 2:
                // curTitle = aTitles[2];
                // break;
                // case 3:
                // curTitle = aTitles[3];
                // break;
                // case 4:
                // curTitle = aTitles[4];
                // break;
            //}
        break;
    case 2:
        var temp = iFaction + 4;
        curTitle = aTitles[temp];
            // switch(iFaction){
                // case 1:
                // curTitle = aTitles[5];
                // break;
                // case 2:
                // curTitle = aTitles[6];
                // break;
                // case 3:
                // curTitle = aTitles[7];
                // break;
                // case 4:
                // curTitle = aTitles[8];
                // break;
            // }
        break;
    }
//$("#lordbtn").disabled = false;
});

function createlord() {
//get lord name
    var temp2 = Math.floor(curWealth/100) + 1, temp3 = Math.floor(((Math.random() * 10) + temp2) / 2), temp4 = Math.floor((Math.random() * 25) + iModder);
    curInfluence = temp3;
    curLoyalty = Math.floor((Math.random() * 10) + 1);
    curWealth = Math.floor((Math.random() * 800) + 200);
    curLordname = aNames[temp4];
//display result
    var supastring = "<h3>" + curTitle + " " + curLordname + " of " + curNation + ". </h3>" + "<br /> <p>His wealth is " + curWealth + "Gp, His influence is " + curInfluence + " and his loyalty is " + curLoyalty + ".</p>" + "<br /> <button class='btn btn-large' type='button' onclick='resetlord()'>Create another Lord</button>";
//$("#lordresult").innerHTML = supastring;
    document.getElementById("lordresult").innerHTML = supastring;
}
function resetlord() {
// $("#lordresult").innerHTML
//document.getElementById("lordresult").innerHTML 

        document.getElementById("lordresult").innerHTML = "<h2>Broken History: Lord Creator tool</h2>   <small>This tool is designed to help you when playing Broken History 1.0 the CWDC Expansion, and is used to determine the name of a new NPC lords (on the death of a previous lord). Note: 'You' refers to the character being created.</small><br />   <p>Choose faction and rank then click button to generate the new NPC.<br /></p><label>What faction are you from?</label><select id='selNation'><option selected='selected' disabled='disabled'>Select faction:</option><option value='Leontrois' >Leontrois</option><option value='Saxathia'>Saxathia</option>        <option value='Hellios'>Hellios</option><option value='Drakon'> Drakon</option>      </select><label>Are you the Monarch of a faction?</label><select id='selLord'> <option selected='selected'>Choose rank:</option><option value='1' >Monarch</option><option value='2'>Vassal</option> </select> <button class='btn btn-large' type='button' id='lordbtn' onclick='createlord()'>Generate new lord</button></p>";
    } 
```

这是结果屏幕的屏幕截图： ![截屏](../Images/273d2c97acfbd525e3af88035930612f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:21:16.117

然后选择更改

```
$("#selNation").change --> set variable "var curNation, iModder, iFaction" 
```

那么selLord改变

```
$("#selLord").change --> set variable "var curTitle" 
```

创建领主函数

```
function createlord() {

    curLoyalty = Math.floor((Math.random() * 10) + 1);
    curWealth = Math.floor((Math.random() * 800) + 200);

    // selNation change set 
    curNation = "Leontrois";
    iModder = 1;
    iFaction = 1;

    // selLord change
    curTitle = aTitles[iFaction];

    var temp2 = Math.floor(curWealth/100) + 1, 
        temp3 = Math.floor(((Math.random() * 10) + temp2) / 2), 
        temp4 = Math.floor((Math.random() * 25) + iModder);

    curInfluence = temp3;
    curLordname = aNames[temp4];

    var supastring = curTitle + " " + curLordname + " of " + curNation + curWealth + curInfluence + curLoyalty;

}

createlord(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:33:35.370

将您的事件处理代码放入文档就绪事件中：

```
$(document).ready(function() {
    $("#selNation").change(function() {
      ....
    });

    $("#selLord").change(function() {
      .....
    });
}); 
```

但是你正在将它与`iFaction = $(this).val();`一个数字进行比较，你应该将它输入为一个数字：

```
iFaction = Number($(this).val()); // parseInt also will work 
```

最后，您使用的是未定义的 curWealth。在使用它之前先定义值：

更改此部分：

```
var temp2 = Math.floor(curWealth/100) + 1, temp3 = Math.floor(((Math.random() * 10) + temp2) / 2), temp4 = Math.floor((Math.random() * 25) + iModder);
    curInfluence = temp3;
    curLoyalty = Math.floor((Math.random() * 10) + 1);
    curWealth = Math.floor((Math.random() * 800) + 200); 
```

对此：

```
curWealth = Math.floor((Math.random() * 800) + 200);

var temp2 = Math.floor(curWealth/100) + 1, temp3 = Math.floor(((Math.random() * 10) + temp2) / 2), temp4 = Math.floor((Math.random() * 25) + iModder);
    curInfluence = temp3;
    curLoyalty = Math.floor((Math.random() * 10) + 1); 
```

这是工作[小提琴](http://jsfiddle.net/CYe8J/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T11:51:07.860

您遇到的一个错误是`iFaction`变量放错位置，您的以下代码：

```
switch (isKing) {
    case 1:
        curTitle = aTitles[iFaction]; 
```

应该是这样的：

```
switch (isKing) {
    case 1:
        curTitle = aTitles[isKing]; 
```

# c - 在C中使用char数组作为二维数组

> ID：12581451
> 
> 赞同：1
> 
> 时间：2012-09-25T10:51:35.933
> 
> 标签：c, pointers, casting, multidimensional-array

我有一个包含`unsigned char *`用于存储任意数据的结构。在某些时候，我想像使用二维数组一样使用这些数据。我就是这样做的：

```
#define DATA_SIZE 10
unsigned char *data = malloc(DATA_SIZE * DATA_SIZE * sizeof(unsigned char));

// this is not allowed
unsigned char (* matrix)[DATA_SIZE] = (unsigned char*[DATA_SIZE]) &data;

// this gives a warning and doesn't work at all
unsigned char (* matrix)[DATA_SIZE] = (unsigned char **) &data; 
```

我想将指向任意数据的指针转换为二维数组，但当然我不能转换为数组类型。我需要怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T11:06:19.053

你把演员的语法弄错了，

```
unsigned char (* matrix)[DATA_SIZE] = (unsigned char(*)[DATA_SIZE]) data; 
```

在您`#define`通过删除`=`.

```
#define DATA_SIZE 10

    unsigned char *data = malloc(DATA_SIZE * DATA_SIZE * sizeof(unsigned char));

    // this is the correct way to cast
    unsigned char (* matrix)[DATA_SIZE] = (unsigned char(*)[DATA_SIZE]) data; 
```

# iphone - iOS 中的应用程序存在设计问题

> ID：12581453
> 
> 赞同：-1
> 
> 时间：2012-09-25T10:51:37.147
> 
> 标签：iphone, ios6, iphone-5

我在应用商店中有一个应用程序。在 iPhone 5 中，我遇到了与应用程序的外观和感觉有关的问题。如果在 iphone 5 中打开该应用程序，那么屏幕顶部和底部会出现一个黑色空间。

我已经检查了应用商店中存在的各种应用程序，并且所有应用程序都发生了这种情况。有没有人遇到过这样的问题。我只是想知道，是否需要从开发人员方面做任何事情，例如不同尺寸的图像，如为视网膜和正常显示或苹果提供的一个默认纵横比。

我被严重卡住了，客户正在询问是否有任何解决方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:03:24.823

作为开发人员，请注意周围发生的事情！除非为 iphone 5 重新修改，否则 appstore 中的所有现有应用程序都将在信箱模式下运行。您必须使用 Xocde 4.5 来开发兼容 ios 6 的 iPhone 5 应用程序。

如果您的客户需要解决此问题，您可以向他收取费用以进行更改。:)

# java - Wireshark 捕获数据包但 JAVA 应用程序不捕获

> ID：12581455
> 
> 赞同：1
> 
> 时间：2012-09-25T10:51:38.413
> 
> 标签：java, networking, udp, wireshark

我正在控制器端的 MEGACO 协议上开发应用程序。我通过 UDP prptocol 向媒体网关发送 MEGACO 消息。媒体网关正在响应请求。当我使用指定的端口和 IP 过滤器运行 wireshark 时，wireshark 会显示所有捕获的 MEGACO 数据包。但是在我的应用程序（用 JAVA 编写）中，一些数据包没有到达。更具体地说，对我的应用程序只有事务回复和事务回复确认（参考：RFC 3015）消息没有到达。

我尝试了很多排列和组合。即使我已经为每个接收消息分配了新的数据报包和缓冲区空间作为测试。但没有结果。我的 udp 接收器代码如下。

```
while (running) {
        //do work here
        try {
            byte[] dpBuffer = new byte[MAX_BUFFER_SIZE];
            DatagramPacket dp = new DatagramPacket(dpBuffer, MAX_BUFFER_SIZE);
            this.socket.receive(dp);
            byte[] temp = new byte[dp.getLength()];
            System.arraycopy(dp.getData(), 0, temp, 0, dp.getLength());
            System.out.println("Read data");
            for(int i=0;i<temp.length;i++)
            {
                System.out.print((char)(temp[i]));
            }
            ByteArrayUtil msg = new ByteArrayUtil(temp, dp.getLength());
            msgParser.parseMsg(msg);
        } catch (Exception e) {
            logger.error("Megaco Reader Failed to read Packet due to :" ,e);
        }
    } 
```

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:17:57.490

感谢 E_net4。

正如我在评论中提到的，我在wireshark 中使用了错误的过滤器。在wireshark中，如果你只使用

```
"udp.port == x" 
```

作为过滤器，它将过滤那些具有源端口或目标端口 x 的数据包。要过滤具有源端口 == x 或目标端口 ==x 的数据包，您应该分别使用 udp.srcport == x 和 udp.destport==x。感谢大家。

# ios - 如何将 Alfresco 集成到我的 ios 应用程序中？

> ID：12581458
> 
> 赞同：1
> 
> 时间：2012-09-25T10:51:47.620
> 
> 标签：ios, content-management-system, alfresco

在我的 ios 应用程序中，我必须从一些内容管理系统（如 Alfresco）中提取一些信息。您能否建议我，如何将 Alfresco 集成到我的 ios 应用程序中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:45:54.627

您有两种选择

其中之一是获取开源[的 Alfresco Mobile App for iOS](http://www.alfresco.com/products/mobile)的源代码，并从那里开始。以 Alfresco 代码为起点，自定义 Alfresco 应用程序以执行您需要的所有其他操作。如果您基本上想要 Alfresco 应用程序提供的内容，这将最有效，只需进行一些小改动。

另一种是使用 Alfresco 移动应用程序使用的 iOS CMIS 库，将其包含在您现有的应用程序中，并通过 CMIS 与 Alfresco 交互。它也是开源的。如果您是 CMIS 新手并想了解更多信息，请[访问 cmis.alfresco.com 。](http://cmis.alfresco.com/)

您可能还想加入[Alfresco 移动论坛](https://forums.alfresco.com/en/viewforum.php?f=54&sid=4449ca39a6ee717b4d009780608c715b)，这将是获得开源移动应用程序或 iOS CMIS 客户端帮助的最佳场所。

# jquery - jQuery UI 内联 Datepicker 自动调整到父容器的大小

> ID：12581462
> 
> 赞同：7
> 
> 时间：2012-09-25T10:51:54.030
> 
> 标签：jquery, jquery-ui, datepicker

我正在使用 twitters bootstrap 的响应式网格系统和 jquery ui datepicker。我在“行”、“spanX”结构中有一个**内联日期选择器，如下所示：**

```
<div class="row">      
<div class="span3 widget">      
<div id="datepicker"></div>
</div>
...
</div>

jQuery('#datepicker').datepicker({
inline: true,
    ...
}) 
```

调整 Datepicker 小部件大小的建议方法是覆盖字体大小。但是，如果我想在窗口调整大小或不同分辨率时使 Datepicker 大小取决于 spanX 父容器的大小，这不是很有帮助。

有没有一种优雅的方法可以将**内联**的Datepicker 保持在父容器的 100% 宽度和高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T14:15:43.373

尝试这样的事情：

```
function datepResize() {

    // Get width of parent container
    var width = jQuery("#calendar").width(); //attr('clientWidth');
    if (width == null || width < 1){
        // For IE, revert to offsetWidth if necessary
        width = jQuery("#calendar").attr('offsetWidth');
    }
    width = width - 2; // Fudge factor to prevent horizontal scrollbars
    if (width > 0 &&
        // Only resize if new width exceeds a minimal threshold
        // Fixes IE issue with in-place resizing when mousing-over frame bars
        Math.abs(width - jQuery("div ui-datepicker").width()) > 5)
    {
        if (width < 166){
            jQuery("div.ui-datepicker").css({'font-size': '8px'});
            jQuery(".ui-datepicker td .ui-state-default").css({'padding':'0px','font-size': '6px'});
        }
        else if (width > 228){
            jQuery("div.ui-datepicker").css({'font-size': '13px'});
            jQuery(".ui-datepicker td .ui-state-default").css({'padding':'5px','font-size': '100%'});

        }
        else{
            jQuery("div.ui-datepicker").css({'font-size': (width-43)/16+'px'});
        }
    }

} 
```

它为引导程序所做的每个响应转换提供了预设大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T00:59:57.227

这是[sass](http://sass-lang.com/)

```
your-container{
  .ui-datepicker {
    width: 99%;
    padding: 0;
  }
  .ui-widget {
    font-size: 0.9em;
  }
  .ui-datepicker table {
    font-size: 0.7em;
  }
} 
```

您可以更改值，直到看到您喜欢的字体大小、填充和宽度。

# python - 如何使用 python 使 PC 进入睡眠模式？

> ID：12581463
> 
> 赞同：2
> 
> 时间：2012-09-25T10:51:54.390
> 
> 标签：python

在复制过程中，我们可以让 PC 进入睡眠模式一段时间，然后唤醒并使用 python 脚本继续复制吗？你能分享一下代码吗？

实际上，这可以使用 shell 脚本来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:05:37.493

2000 年以后生产的大多数机器都支持实时时钟唤醒。这样做的原因有很多，其中之一是在某个时间录制电视节目。请参阅[ACPI 唤醒](http://www.mythtv.org/wiki/ACPI_Wakeup)。

您必须解释“在复制过程中”的意思——这个问题没有什么可继续的。虽然操作系统驱动程序具有挂起/恢复功能，但我不知道如何告诉 python 解释器在运行脚本的过程中保存其状态，然后在唤醒后恢复。操作系统挂起/休眠可能会完全捕获复制操作的状态并在没有打嗝的情况下恢复，但如果没有大量测试，我不相信它会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:02:16.403

如果您启用了“Wake On Lan”，您可能会在另一台 PC 上运行 python 脚本并在特定时间段后触发唤醒。

脚本可能需要相互交谈，除非您只是在预先设置的时间完成所有操作。

# c++ - 用于 C++ 的 Visual Studio 2010 评论插件

> ID：12581468
> 
> 赞同：1
> 
> 时间：2012-09-25T10:52:03.733
> 
> 标签：c++, visual-studio-2010, visual-c++, plugins, comments

您能否推荐评论生成器——VS 2010 的插件，例如用于 C++ 的 GhostDoc？

GhostDoc 非常完美，但仅适用于 .NET 并生成 XML 注释。我需要为方法和类生成纯 C 风格的注释。

有没有这样的扩展？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:21:00.550

[Atomineer Utils](http://www.atomineerutils.com/products.php)是一个非常好的 Visual Studio 插件。单键组合，用于根据易于定义的模式为整个块甚至整个文件自动生成注释。

# android - 延迟后停止铃声

> ID：12581469
> 
> 赞同：0
> 
> 时间：2012-09-25T10:52:09.803
> 
> 标签：android

我想在延迟时间后停止来电铃声...可以吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:07:42.190

很简单，使用定时器或者你也可以使用线程。如果用户未启用接听电话并且正在响铃，那么在您设置的特定时间后，您可以停止响铃。随便搜一下：如何在android中使用timer，代码很简单，很容易理解。它会解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:54:42.720

您可以使用 Timer 或 TimerTask。但是，我建议您为此使用处理程序，并发布延迟消息以触发 disered 事件：sendMessageDelayed(android.os.Message, long)

希望能帮助到你！

```
 MyTimerTask myTask = new MyTimerTask();
        Timer myTimer = new Timer();
        myTimer.schedule(myTask, DELAY_TIME_IN_MILISECONDS, 10000); 
```

和 TimerTask 实现：

```
class MyTimerTask extends TimerTask {
      public void run() {
             //STOP YOUR RINGTONE
             myTimer.cancel();
             myTimer=null;
      }
    } 
```

# mysql - 无法从 PHP 和 MySQL 获取印地语的 Unicode 数据

> ID：12581474
> 
> 赞同：1
> 
> 时间：2012-09-25T10:52:25.267
> 
> 标签：mysql, unicode, utf-8, fetch, hindi

我有一个数据库 (utf8_unicode_ci)、表 (utf8_unicode_ci) 和一个 mysql_query("SET CHARACTER SET utf8")。

我今天还有一个问题。我有一张表，其中有 10,000 条记录，以印地语的 unicode 格式存储。我正在使用 Xampp 1.6.2 版本。当我在本地机器上获取数据时，它显示正确；例如“select * from unicode_table order by id”。

但是如果我将它上传到我的实时服务器上，它不会显示任何记录。我试图弄清楚，我发现如果我写：

```
select * from unicode_table order by id limit 0, 40 
```

带有`limit 0, 40`显示数据的查询，如果我给出`limit 0, 50`，则显示垃圾。所以记录集/mysql查询连接有问题。任何人都可以帮我解决这个问题吗？

我的实时服务器是 PHP 和 MySQL 的最新更新，服务器由一家优秀的托管公司维护。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-20T18:07:19.967

需要注意的事项： 1\. 确保您的 html 或 php 文件可以呈现内容：i)`<?php header('Content-Type: text/html; charset=utf-8'); ?>` 或 ii)。

```
<?php $page_html = "<html>";

    $page_html .= "<META HTTP-EQUIV=\"content-type\" CONTENT=\"text/html; charset=utf-8\">";

    $page_html .= "<body>";

    $page_html .= " process and display your content from the database here ";

$page_html .= "</body></html>";

    echo $page_html; 
```

2.  确保您有正确的排序规则，如下所述。（ ：） 一切顺利 ）

因此，就我而言，我尝试将排序规则从`utf8mb4_unicode_ci`for mysql 更改为`uft8_general_ci`.

然后粘贴：

```
mysqli_set_charset( $con, 'utf8'); 
```

就在我执行 SELECT 命令之前。

这是我从 db 读取的代码：

```
/*

$DB_SERVER="db_server_name";
$DB_USER_READER="root";
$DB_PASS_READER="passw*rd";
$DB_NAME="db_name";
$DB_PORT="port number";

$SELECT_WHAT="`name_of_column_as_in_your_table`";
$WHICH_TBL="`table_name`";
$ON_WHAT_CONDITION="`id`='7'";

*/

$con = mysqli_connect($DB_SERVER, $DB_USER_READER, $DB_PASS_READER, $DB_NAME, $DB_PORT);//this is the unique connection for the selection

    mysqli_set_charset( $con, 'utf8');

        $slct_stmnt = "SELECT ".$SELECT_WHAT." FROM ".$WHICH_TBL." WHERE ".$ON_WHAT_CONDITION;

    $slct_query = mysqli_query($con, $slct_stmnt);

        if ($slct_query==true) {
//Do your stuff here . . . 
} 
```

它就像一个魅力。一切顺利。上面的代码可以从数据库的表列中读取中文、俄文或阿拉伯文或任何国际语言，其中包含此类数据。

# android - Android - 检查我正在播放的收音机

> ID：12581477
> 
> 赞同：0
> 
> 时间：2012-09-25T10:52:41.257
> 
> 标签：android, service, android-activity, radio

我有 2 项活动：

活动 A - 列表视图/适配器

活动 B - 广播

在活动 A 中，我选择一个收音机，然后 B 播放该收音机（服务）。

但每次我在列表中选择另一个收音机时，活动 B 都会再次实例化，收音机会停止并再次播放。

情况示例：

```
# 1 - I'm playing Radio X, I choose X on the list
# 2 - A new instance is created (service is in onCreate() of Activity B)
# 3 - Radio X playing (play() is in onStart() of service)
# 4 - I go back to the list
# 5 - I want to play Radio Y
# 6 - A new instance is created (service is in onCreate() of Activity B)
# 7 - Radio Y playing (play() is in onStart() of service)
# * In onCreate() of service isn't doing nothing 
```

一切都很好，但是如果我回到列表并选择相同的收音机会发生什么，例如：

```
# 1 - Radio Y playing
# 2 - I go back to the list
# 3 - I wanna go to Radio Y again
# 4 - A new instance is created (service is in onCreate() of Activity B) (I don't want this)
# 5 - Radio Y stops and plays again (I don't want this) 
```

我想有一种方法来检查正在播放的收音机是否与我想播放的收音机相同，并且不要创建新实例，也不要停止并再次播放相同的收音机。

编辑：

列表显示

```
if (item == "Radio 1"){
       Intent intent = new Intent(getBaseContext(), Radio.class);
       intent.putExtra("radio", "http://test1.com");
       this.startActivity(intent);
} else if (item == "Radio 2"){
       Intent intent = new Intent(getBaseContext(), Radio.class);
       intent.putExtra("radio", "http://test2.com");
       this.startActivity(intent);
} 
```

无线电.java

```
@Override
public void onCreate(Bundle icicle) {
    requestWindowFeature(Window.FEATURE_LEFT_ICON);
    super.onCreate(icicle);
    setContentView(R.layout.main);

    Intent music = new Intent(getApplicationContext(), Service.class);
    music.putExtra("url", this.getIntent().getStringExtra("radio"));
    startService(music);
} 
```

服务.java

```
@Override
public void onStart(Intent intent, int startid) {
    Multiplayer m = new MultiPlayer();
    m.playAsync(intent.getExtras().getString("url"));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:48:07.523

为了澄清我的答案：

您有 2 个选项（取决于：

将播放 url 存储在服务中（在 onStart 中）并将其与正在发送的新 url 进行比较。

```
private String mCurrentUrl;

@Override
public void onStart(Intent intent, int startid) {    
    String newUrl = intent.getExtras().getString("url");

    if ((newUrl.equals(mCurrentUrl)) {
        mCurrentUrl = newUrl;
        Multiplayer m = new MultiPlayer();  
        m.playAsync(mCurrentUrl );
    }
} 
```

或者：

定义检索当前无线电频道的服务[(AIDL)接口。](http://developer.android.com/guide/components/aidl.html)如果您让活动绑定到它，您可以调用此方法来检索当前通道。注意：您必须使用 startService 启动服务，然后直接绑定到它。（否则你的服务在你的活动被杀死后被杀死）

# actionscript-2 - 带有 2 个或更多可能性的溢出字符串与动作脚本 2

> ID：12581479
> 
> 赞同：0
> 
> 时间：2012-09-25T10:52:47.627
> 
> 标签：actionscript-2

我正在尝试使用操作脚本 2 简化 baseURL 字符串。

但是我遇到了麻烦，因为我的基本 URL 可能必须是可能的。

到目前为止我所拥有的......感谢*@Will Kru*

```
.split("http://").join("").split("/")[0]; 
```

所以如果我的 baseURL 是这样的...... **http://www.actionscript.com/category/splitting**

然后上面的代码将返回... **www.actionscript.com**

我的下一个问题是，baseURL 可能处于 SSL 模式。所以字符串的开头是**https://**

所以我的问题是-无论如何要从第一个中拆分baseURL`://`并删除之前出现的内容`://`-无论是`http`还是`https`

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:15:44.583

你可以使用这个。

```
.split("://")[1].split("/")[0] 
```

# c++ - 我可以用 boost.program_options 做什么和不能做什么？

> ID：12581480
> 
> 赞同：4
> 
> 时间：2012-09-25T10:53:01.003
> 
> 标签：c++, boost, boost-program-options

我目前使用一些旧的 C 库来获取程序选项，并希望用一些适当的 C++ 替换它（主要是为了独立于那个库，这是一个真正的负担）。我正在考虑使用 boost.program_options，但不确定它能否支持我想要的一切。我想要的一些东西是：

1.  允许以下命令行语法：（`myprogram option=value`特别是，我真的不想要这种`--option value`语法）

2.  如果没有提供值，则使用默认值（显然这可以在我的程序中完成，但选项库中的支持会很好）

3.  允许默认选项（即使我不提供它们也始终存在）和包含所有选项及其描述的自动帮助输出

4.  允许数学解析，即（命令行）`myprogram option1=Pi option2=3/5 option3=sqrt(2)`在我的程序中给出 3.1415...、0.6 和 1.415...

5.  允许扩展单个值。让`option_3Dpoint`对应于一个`std::array<double,3>`，我希望`myprogram option_3Dpoint=0,0,0`和`myprogram option_3Dpoint=0`（扩展为`0,0,0`）都工作

boost.program_options 可以支持哪些？有没有其他选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:10:46.950

boost.program_options 是一个非常好的库。您也可以用来解析配置文件。答案：

1.  不知道，但似乎没有内置支持。
2.  是的。
3.  是的。
4.  不，除非您制作自己的表达式评估处理程序或使用其他一些提升库来执行此操作。
5.  是的，您需要编写自己的处理程序，该处理程序`3DPoint`从字符串创建对象，例如`0,0,0`

# asp.net - 在 ASP.NET 中过滤下拉列表项和搜索

> ID：12581485
> 
> 赞同：1
> 
> 时间：2012-09-25T10:53:37.323
> 
> 标签：asp.net, drop-down-menu, filtering

我有一个下拉列表，当用户键入相同的内容时，下拉列表必须显示要选择的过滤选项。我已经完成了后面的代码，但过滤尚未完成。

```
 <asp:DropDownList ID="AppraisersDpd" runat="server" Width="134px" 
         CssClass="dropdownpersonal textfont" 
         onselectedindexchanged="AppraisersDpd_SelectedIndexChanged" AutoPostBack="true"></asp:DropDownList> 
```

后面的代码也在运行：

```
 AppraisersDpd.DataSource = apprblobj.FillAppraisers();  //fills Appraisers drop down
        AppraisersDpd.DataTextField = "AppraiserName";
        AppraisersDpd.DataValueField = "AppraiserId";
        AppraisersDpd.DataBind(); 
```

谁能给我一些线索？我应该使用组合框还是正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:00:12.010

这将需要实现一些 Javascript；因为当您在组合中键入内容时，不会触发任何 ComboBox 服务器端事件。我建议您使用支持“自动完成”功能的第 3 方 ComboBox 控件。[Ajax Toolkit ComboBox](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx)控件可能适合您。

# java - 运行 Nutch 2 时出现连接被拒绝错误

> ID：12581492
> 
> 赞同：6
> 
> 时间：2012-09-25T10:53:55.653
> 
> 标签：java, web-crawler, nutch

我正在尝试在我的系统上运行 Nutch 2 爬虫，但出现以下错误：

```
Exception in thread "main" org.apache.gora.util.GoraException: java.io.IOException: java.sql.SQLTransientConnectionException: java.net.ConnectException: Connection refused
at org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:167)
at org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:135)
at org.apache.nutch.storage.StorageUtils.createWebStore(StorageUtils.java:69)
at org.apache.nutch.crawl.InjectorJob.run(InjectorJob.java:243)
at org.apache.nutch.crawl.Crawler.runTool(Crawler.java:68)
at org.apache.nutch.crawl.Crawler.run(Crawler.java:136)
at org.apache.nutch.crawl.Crawler.run(Crawler.java:250)
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
at org.apache.nutch.crawl.Crawler.main(Crawler.java:257)
Caused by: java.io.IOException: java.sql.SQLTr
ansientConnectionException: java.net.ConnectException: Connection refused
    at org.apache.gora.sql.store.SqlStore.getConnection(SqlStore.java:747)
    at org.apache.gora.sql.store.SqlStore.initialize(SqlStore.java:160)
    at org.apache.gora.store.DataStoreFactory.initializeDataStore(DataStoreFactory.java:102)
    at org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:161)
    ... 8 more
Caused by: java.sql.SQLTransientConnectionException: java.net.ConnectException: Connection refused
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCConnection.<init>(Unknown Source)
    at org.hsqldb.jdbc.JDBCDriver.getConnection(Unknown Source)
    at org.hsqldb.jdbc.JDBCDriver.connect(Unknown Source)
    at java.sql.DriverManager.getConnection(DriverManager.java:620)
    at java.sql.DriverManager.getConnection(DriverManager.java:200)
    at org.apache.gora.sql.store.SqlStore.getConnection(SqlStore.java:739)
    ... 11 more
Caused by: org.hsqldb.HsqlException: java.net.ConnectException: Connection refused
    at org.hsqldb.ClientConnection.openConnection(Unknown Source)
    at org.hsqldb.ClientConnection.initConnection(Unknown Source)
    at org.hsqldb.ClientConnection.<init>(Unknown Source)
    ... 17 more
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)
    at java.net.Socket.connect(Socket.java:546)
    at java.net.Socket.connect(Socket.java:495)
    at java.net.Socket.<init>(Socket.java:392)
    at java.net.Socket.<init>(Socket.java:206)
    at org.hsqldb.server.HsqlSocketFactory.createSocket(Unknown Source)
    ... 20 more 
```

问题是什么？我的互联网连接是直接的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T20:10:32.237

我有同样的错误。我将连接 URL 从

```
<property name="connection.url">jdbc:hsqldb:hsql://localhost</property> 
```

至

```
<property name="connection.url">jdbc:hsqldb:mem://localhost</property> 
```

它成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T15:14:56.963

有同样的错误。我忘记了 conf/nutch-site.xml 中的“配置”标签：

```
<configuration>
    <property>
        <name>storage.data.store.class</name>
        <value>org.apache.gora.hbase.store.HBaseStore</value>
        <description>Default class for storing data</description>
    </property>
</configuration> 
```

# colors - MathJax 和 LaTeX \definecolor

> ID：12581495
> 
> 赞同：2
> 
> 时间：2012-09-25T10:54:10.170
> 
> 标签：colors, latex, mathjax

对我来说，这似乎`\definecolor`不适用于 Mathjax。

我使用 MathJax 2.0，并包含了 TeX：{extension：“color.js”}。

例如，TEX 代码

```
$$\definecolor{somecolor}{RGB}{1243,45,46} \color{somecolor}{test}$$ 
```

在 MathJax 中呈现为

> \definecolorsomecolorRGB123,45,46test

并`\definecolor`以红色显示。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T18:19:29.293

应该`extensions`不是`extension`。红色`\definecolor`表示未定义宏，因此应指示您检查扩展是否已正确加载。在这种情况下，属性的拼写意味着 MathJax 将看不到加载扩展的请求，因此它不会被加载，因此`\definecolor`永远不会被定义。

另一方面，即使你让它正确加载，你会发现当前版本`color.js`没有实现`RGB`颜色空间，只有`rgb`一个（这在即将到来的 MathJax v2.1 中修复）。因此，您应该转换为 0 和 1 之间的小数（使用 123/256、45/256 和 36/256）。那应该这样做。

# c# - 如何在扫描图像中搜索著名的标志？

> ID：12581500
> 
> 赞同：8
> 
> 时间：2012-09-25T10:54:34.403
> 
> 标签：c#, image-processing, pattern-matching, pattern-recognition, aforge

我有以下扫描文档，上面有徽标，我还有另一个具有相同徽标和样式的黑白图像（以下以黑白显示）。

如何确保此图像上是否存在徽标？

![在图片中搜索图片](../Images/f3ecd6f417277c814baec742abfe31b9.png)

通常我会有很多扫描文件，OCR 会提取 MTNL，但有时这些标志只是由 OCR 不易识别的符号组成。

徽标的大小和位置会发生变化，它们不会多次固定。它们可以放置在文档的任何位置。

我想根据存在的徽标和符号对扫描的图像进行组织和分类。大多数文件可能是英文的，也可能不是英文的，可能包含也可能不包含任何条形码，在这种情况下，徽标匹配会有所帮助。

我看过 Aforge.NET 库，但我不太确定要结合哪些方法来进行搜索。如果源目标大小不同，像素搜索非常慢并且失败。

我听说 YouTube 会进行某种直方图或热签名匹配，以查看视频是否包含任何受版权保护的材料。如果有人可以在这种情况下指导我，我会很有帮助。

我的理想选择是 C# 和 Aforge.NET，否则一些命令行工具将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:07:46.463

您可以尝试使用 Aforge.net
检查这些链接
1) [http://www.aforgenet.com/articles/shape_checker/](http://www.aforgenet.com/articles/shape_checker/)
2) [http://www.codeproject.com/Articles/9727/Image-Processing-Lab-in- C](http://www.codeproject.com/Articles/9727/Image-Processing-Lab-in-C)
3) [http://www.aforgenet.com/forum/viewtopic.php?f=4&t=323](http://www.aforgenet.com/forum/viewtopic.php?f=4&t=323)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T13:24:37.297

您可以使用这个小实用程序： [https](https://github.com/remdex/logoDetect) ://github.com/remdex/logoDetect 它对我有用。也许它也对你有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:04:29.050

检测徽标图像中的有用特征，并在扫描的文档中查找这些特征。 [SIFT](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)是一个有用的特征描述符，它是尺度和旋转不变的。其他描述符包括[SURF](http://en.wikipedia.org/wiki/SURF)和[HOG](http://en.wikipedia.org/wiki/Histogram_of_oriented_gradients)。

如果您环顾四周，将会有很多实现，其中一些甚至在 C# 中。

# vb.net - 将gridview的数据源设置为没有绑定的数据表

> ID：12581507
> 
> 赞同：0
> 
> 时间：2012-09-25T10:55:13.217
> 
> 标签：vb.net, data-binding, datagridview, datatable

我正在将 dataGridview 的数据源设置为表。First In Load 事件

```
Datagridview.datasource=DTFromSQl 
```

在一些随机事件中我会这样做。

```
Dim Dt as datatable=DataGridview1.datasource 
```

当我这样做时`DT.rows.clear()`，它还会清除 Datagridview 中的行。我想它是由于数据绑定。但是数据绑定是如何发生的呢？以及如何删除它，以便`DT`仅在其中发生变化。

谢谢

* * *

好的，我做到了，但是感觉有些不对劲。

```
Dim DTSend As New DataTable

    For i As Integer = 0 To DataGridView1.ColumnCount - 1
        DTSend.Columns.Add(DataGridView1.Columns(i).Name)
    Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:17:02.897

使用以下代码。当你清除`datatable`它不会清除你的`datagridview`

```
 Dim dtsend As DataTable

 dtsend = CType(DataGridView1.DataSource, DataTable).Copy()

 dtsend.Clear() 
```

# php - nginx 可以提供 PHP 缓存的文件吗？

> ID：12581509
> 
> 赞同：4
> 
> 时间：2012-09-25T10:55:19.000
> 
> 标签：php, caching, nginx

作为我计划的新 CMS 的一部分，我将缓存一些“静态”内容的 HTML 输出。我说“静态”是因为存储在数据库中的任何内容都不是真正静态的，但它已经足够接近了。系统将对请求 URL 进行 MD5 哈希处理，并将 HTML 输出的缩小版本保存在缓存文件夹中。下次请求页面时，CMS 会检查是否存在缓存版本，然后检查文件的年龄，然后提供缓存版本，从而节省大量资源（尤其是在 DB 调用时） ）。

显然，让 nginx 在不接近 PHP 的情况下提供静态文件会快得多。那么有没有办法让 nginx 对请求 URL 进行哈希处理并检查临时文件夹以查看它是否存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:59:26.933

是的！

您可以让 nginx 缓存来自 fcgi 的响应。它正在使用您必须在 nginx 中启用的[HttpProxyModule 。](http://wiki.nginx.org/HttpProxyModule)

[这](http://fennb.com/microcaching-speed-your-app-up-250x-with-no-n)是一个很好的指导如何做到这一点。

或者，您也可以将 nginx 与 memcache 一起使用。实际上，您有很多选择。两者都工作得很好！

# python - 在 Python 中将文件复制到远程位置

> ID：12581512
> 
> 赞同：2
> 
> 时间：2012-09-25T10:55:26.213
> 
> 标签：python, share

```
copy testfile.txt \\\\IP_ADDR\\FOLDER 
```

在命令行中工作，但：

```
os.system("copy testfile.txt \\\\IP_ADDR\\FOLDER") 
```

不知何故不起作用。有任何想法吗？

有一个替代品，`os.system`但为什么这不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T11:00:49.577

我认为您要么需要将反斜杠加倍，要么将 'r' 放在字符串前面：

```
os.system("copy testfile.txt \\\\\\\\IP_ADDR\\\\FOLDER")

os.system(r"copy testfile.txt \\\\IP_ADDR\\FOLDER") 
```

# java - 从 VPN 令牌/智能卡读取证书

> ID：12581513
> 
> 赞同：2
> 
> 时间：2012-09-25T10:55:33.423
> 
> 标签：java, applet, vpn, smartcard, smartcard-reader

我正在尝试从令牌设备读取 VPN 证书，如下所示：

```
keystore = KeyStore.getInstance("Windows-MY","SunMSCAPI");  
keystore.load(null, null);
int i=0;

for(Enumeration oEnum = keystore.aliases(); oEnum.hasMoreElements();) 
{  
    sAlias = (String) oEnum.nextElement();
    TokenReader tr = new TokenReader();
    String id =  tr.readToken(sAlias, keystore);

    setFont(new Font("Helvetica", Font.BOLD, 36));    
    i++;  
} 
```

它再次要求输入 PIN，就像我已经连接到 vpn 时一样，这确认我已经提供了一次 PIN。

是否可以加载已连接到 VPN 的相同击键实例，避免 PIN 请求？

此外，在某些机器上，它给出了 **请插入智能卡错误框**可能是什么问题？

或任何其他从智能卡/VPN 令牌读取证书的建议方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:33:36.663

这是三个问题，但我会尽力回答。

1.  可能不会，如果 PIN 输入框可以被其他应用程序读取，并且智能卡在重置后不记得 PIN，这不是一个好主意；
2.  这是一个本地化问题，可能是另一个程序具有独占访问权限（例如 VPN 客户端仍然具有访问权限）；
3.  我认为没有其他方法，如果有的话，它们可能会要求您在目标机器上安装其他软件。

# c++ - C++ - 推进作为参数传递的指针

> ID：12581514
> 
> 赞同：2
> 
> 时间：2012-09-25T10:55:38.213
> 
> 标签：c++, function

我无法推进作为参数传入的指针。想法是该函数将读取指针处的值并推进指针。我需要通过引用传递它吗？甚至可以通过引用传递指针吗？

```
int32 File::readDWORD(char* offset)
{
    int32 value;
    memcpy(&value, offset, sizeof(int32));
    offset += sizeof(int32);
    return value;
} 
```

该函数读取值并推进本地指针，但我希望它推进传入的指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:02:53.997

您可以通过引用传递指针，也可以将指针传递给指针（句柄）。这两种解决方案都允许您修改*指针的值*，即它指向的位置。

但是请注意，通常您不应该在 C++ 中使用“原始”指针。您提出的内存操作可以替换为更高级的语言结构；我能想到的是以一种可能类似于流的方式更好地封装您的 File 类。

这可能会导致另一个问题——你为什么不直接使用`std::fstream`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T10:58:33.937

**是的**

```
int32 WLD::readDWORD(const char*&offset)
{
    int32 value;
    memcpy(&value, offset, sizeof(int32));
    offset += sizeof(int32);
    return value;
}

char*pter = initial;
WLD::readDWORD(pter);
assert(pter == initial+sizeof(int32)); 
```

这`offset`是对 a 的引用`const char*`。因此，虽然您可以更改指针，但您无法更改它所指向的内容。在这种情况下，这正是您想要的。

您不应该通过“请求更改行为以通过引用传递”（通过编译器选项）来更改行为。这使您的代码不可移植、非标准和非人类可读（除了那些知道的人......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T10:58:34.257

是的，是的。除非您特别请求按引用传递，否则所有参数（包括指针）都按值传递，这意味着更改参数的值不会改变任何可能用作函数参数的变量的状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T10:59:38.380

你必须通过引用传递它

```
int32 File::readDWORD(char* & offset)
{
     [...]
     offset += sizeof(uint32);
     [...]
} 
```

# logic - 一个 CNF 句子有多少个可能的赋值？

> ID：12581520
> 
> 赞同：-1
> 
> 时间：2012-09-25T10:55:54.240
> 
> 标签：logic, artificial-intelligence

我在理解以下内容时遇到了一些麻烦：

当我们以合取范式查看可满足性问题时，欠约束问题是约束变量的子句相对较少的问题。例如。这是一个随机生成的带有五个符号和五个从句的 3-CNF 句子。（每个子句包含 3 个随机选择的不同符号，每个符号以 50% 的概率被否定。）

```
 (¬D ∨ ¬B ∨ C) ∧ (B ∨ ¬A ∨ ¬C) ∧ (¬C ∨ ¬B ∨ E) ∧ (E ∨ ¬D ∨ B) ∧ (B ∨ E ∨ ¬C) 
```

32 个可能的分配中有 16 个是该句子的模型，因此，平均而言，只需 2 次随机猜测即可找到模型。

* * *

我不明白最后一行 - 说有 32 种可能的分配。32岁怎么样？其中只有 16 个是句子的模型吗？对不起，但我发现这个概念有点混乱。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:38:25.207

*两个值true*和*false*有 2^5=32 可能分配给 5 个变量：

```
1:  00000
2:  00001
3:  00010
    ...
31: 11110
32: 11111 
```

这些作业中有 16 个满足（我没有检查）给定的公式，因此是它的模型。

# continuous-integration - 与 Jenkins 持续集成：需要将二进制输出复制到共享目录

> ID：12581522
> 
> 赞同：0
> 
> 时间：2012-09-25T10:56:02.157
> 
> 标签：continuous-integration, jenkins, jenkins-plugins

我们的 .NET 应用程序包含 8-10 个项目，并创建了一个 Jenkins 作业来构建它。我们还在 Jenkins 中调用了一个批处理作业，以使用 INNO Setup 为我们的应用程序创建设置文件。我们需要解决的问题是将安装文件复制到共享位置。您能否提出一个更好的方法来完成它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:53:13.517

在 .NET 环境中，您应该看看 Nant ( [http://nant.sourceforge.net/](http://nant.sourceforge.net/) )。

使用 Nant 脚本作为带有 default.build 的构建后操作，如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?>
<project name="MyProject" default="network-copy" basedir=".">
    <target name="network-copy">
        <copy file="target\setup.exe"
            todir="\\server\share$\directory"></copy>
    </target>
</project> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T16:13:25.697

一般来说，您可能想要使用发布插件。根据您要放置文件的位置（和方式），有不同的插件。这是一个快速列表，可帮助您入门：

*   [Publish Over FTP Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+FTP+Plugin) - 如果要将输出发送到 FTP 位置，请使用
*   [Publish Over SSH Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+SSH+Plugin) - 如果您想使用 SSH 发布您的工件，请使用。
*   [Publish Over CIFS Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+CIFS+Plugin) - 如果您想将内容放入 Windows（CIFS、SMB）共享中，请使用此插件

可以在[Artifact Uploader Plugins](https://wiki.jenkins-ci.org/display/JENKINS/Plugins#Plugins-Artifactuploaders)列表中找到更大的列表。

# windows-8 - Metro IndexedDB，浏览数据库

> ID：12581523
> 
> 赞同：2
> 
> 时间：2012-09-25T10:56:08.943
> 
> 标签：windows-8, microsoft-metro, indexeddb, internet-explorer-10

我正在尝试使用 IndexedDB 将数据存储在适用于 Windows 8 的“Metro”应用程序中。

我希望能够浏览数据库（以监控我的操作是否按预期修改数据）。所以我的问题是；有没有办法查看 Metro 应用程序（IE10）的实际数据库？（类似于 Chrome 开发工具（资源 > IndexedDB））

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:18:55.493

IE 团队有一篇博客文章[调试 IndexedDB 应用程序](http://blogs.msdn.com/b/ie/archive/2012/01/25/debugging-indexeddb-applications.aspx)，其中包含一个 IDBExplorer 模块，您可以将其合并到您的应用程序中（用于测试，不推荐用于生产）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:01:51.030

我不知道，但我的[linq2indexeddb 库](http://linq2indexeddb.codeplex.com)中有一个查看器。这样您就可以在调试时检查数据库的内容。Metro 应用程序的 nuget 包可在[此处](https://nuget.org/packages/Linq2IndexedDBWin8)找到。最后，我有一篇关于如何使用它的[博文。](http://www.kristofdegrave.be/2012/07/linq2indexeddb-debugging-indexeddb.html)

# zend-framework - 从 Zend_Navigation 中的导航中删除 Home 元素

> ID：12581528
> 
> 赞同：0
> 
> 时间：2012-09-25T10:56:34.247
> 
> 标签：zend-framework, zend-navigation

我可以从包含菜单的 XML 文件中删除 Home 元素吗？

```
<?xml version="1.0" encoding="UTF-8"?>
    <configdata>
     <nav>
    <label>HOME</label>
    <controller>index</controller>
    <action>index</action>
    <id>root</id>
    <pages>...</pages>
.... 
```

当我从 xml 文件中删除它时（从第 4 行到第 7 行），我得到一个异常

> Zend_Navigation_Exception: Invalid argument: Unable to determine class to instance in C:\www\project\library\Zend\Navigation\Page.php on line 235

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:57:12.073

好吧，除了 <nav> 标记之外，您还删除了与 Home 元素相关的行！！！！

然后XML文件变成

```
<?xml version="1.0" encoding="UTF-8"?>
<configdata>
<menu1>...</menu1>
<menu2>...</menu2>
...
</configdata> 
```

# c# - C# Backgroundworker：定期更新 PictureBox 的方法是什么？

> ID：12581529
> 
> 赞同：2
> 
> 时间：2012-09-25T10:56:40.490
> 
> 标签：c#, .net, multithreading, backgroundworker, picturebox

我正在使用 BackgroundWorker 定期检查硬件开关。由于它是通过慢速 RS485 网络连接的，我不得不延迟下一次状态更新。在切换状态更改时，我想更新 OK/nOK 图片框。这被实现为一个绿色的 OK pictureBox 在一个 noOK pictureBox 上。这里没有做任何真正的工作。

为了可扩展性，我决定使用 Backgroundworker。最后我想要一个隐藏的工人，

1.  全局提供三个开关的状态和
2.  StatusChange 图片框的更新。

**问题描述** BackgroundWorker 启动后，按预期工作。但是 GUI 冻结。

**我尝试了什么？**[MSDN BackgroundWorker Class Note 1](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)说 ， 应该通过 ProgressChanged 更新 GUI。我试图通过 Worker_Switch.ReportProgress(fakeProgress++) 引发此事件但失败了。PictureBox 不再更新。

*设计师的片段*

```
this.Worker_Switch = new System.ComponentModel.BackgroundWorker();
// 
// Worker_Switch
// 
this.Worker_Switch.WorkerSupportsCancellation = true;
this.Worker_Switch.DoWork += new System.ComponentModel.DoWorkEventHandler(this.Worker_Switch_DoWork); 
```

*主窗体的片段*

```
delegate void SetEventCallback(object sender, DoWorkEventArgs e);   // Threadsafe calls for DoWork

private void btnBackgroundworker_Click(object sender, EventArgs e)
{
    if (!Worker_Switch.IsBusy)
    {
        Worker_Switch.RunWorkerAsync();                              
    }
}

private void Worker_Switch_DoWork(object sender, DoWorkEventArgs e)
{
    // Worker Thread has no permission to change PictureBox "pictureBoxSwitchrightOK"
        // Therefore this method calls itsself in the MainThread, if necessary.
    while (!Worker_Switch.CancellationPending)
    {
      if (this.pictureBoxSwitchrightOK.InvokeRequired)              // Worker Thread
    {
            System.Threading.Thread.Sleep(400);
        SetEventCallback myCall = new SetEventCallback(Worker_Switch_DoWork);
        this.Invoke(myCall, new object[] { sender, e });
    }
    else                                                            // Main Thread
    {
        // Turns OK Picture Box invisible, if nOk State (Switch pushed)
        pictureBoxSwitchrightOK.Visible = SwitchOK("right");  // true: OK (green)
        this.Refresh();

    }
}

private bool SwitchOK(string rightOrLeft)               // select one of the switches
{ (...)}                                    // gets hardware switch status 
```

**编辑：**特别感谢 laszlokiss88（3 种可能性）和 JMK（为了简单起见，使用`System.Windows.Forms`工具箱中的 Timer）

Toolbox 中的这种替代方法也有效：

```
this.timer_Switch.Enabled = true;
    this.timer_Switch.Interval = 400;
    this.timer_Switch.Tick += new System.EventHandler(this.timer_Switch_Tick);

    private void timer_Switch_Tick(object sender, EventArgs e)
{
    motorSwitchControl.Init();        // globally available Switch status                                               
    SwitchRight = SwitchOK("right");
    SwitchRightOK.Visible = SwitchRight; 

    SwitchLeft = SwitchOK("left");    // globally available Switch status
    SwitchLeftOK.Visible = SwitchLeft;  
    SwitchAllOK = SwitchRight & SwitchLeft;
    this.Refresh();
} 
```

a) Sleep() 实际上发生在工作线程中是否正确？- 没有主线程

b) 如果我在 DoWork 中操作用户界面对象，会出现什么问题？（与 MSDN 注释相反）- 在主线程中工作？

c) 定期更新 PictureBox 的正确方法是什么？DoWork、ProgressChanged、RunWorkerCompleted...？- 来自 laszlokiss88 答案的三种可能性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T11:10:15.137

您可以通过 Dispatcher 或 Control.Begininvoke(winforms) 从 DoWork 事件更新 UI，也可以通过 BackgroundWorker 的 ProgressChanged 事件进行更新：

```
 public MainWindow()
    {
        InitializeComponent();

        var bw = new BackgroundWorker();
        bw.WorkerReportsProgress = true;
        bw.DoWork += new DoWorkEventHandler(bw_DoWork);
        bw.ProgressChanged += new ProgressChangedEventHandler(bw_ProgressChanged);
        bw.RunWorkerAsync();
    }

    void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        // You are in the main thread
        // Update the UI here
        string data = (string)e.UserState;
    }

    void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        // You are in a worker thread
        (sender as BackgroundWorker).ReportProgress(0, "right");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:19:08.620

首先，您几乎不需要让活动的背景广告进入睡眠状态。我也不确定你为什么要以这种方式构造/定义委托，尝试一些类似的东西

```
public delegate void UpdatePictureBox();
myDelegate = new UpdatePictureBox(UpdatePictureboxMethod); 
```

那么你有一个方法`UpdatePictureBoxMethod`

```
private void UpdatePictureBoxMethod()
{
    this.pictureBox1.Image = Properties.Resources.SomeImage;
} 
```

或类似的东西，您在其中传递要更新的图像。

或者，您可以使用该`(bgWorker as BackgroundWorker).ReportProgress(progress, object);`方法。所以从你调用的后台线程

```
(bgWorker as BackgroundWorker).ReportProgress(progressBarValue, infoBall); 
```

这里的课程`IfoBall`将保存您所有的重要信息

```
class InfoBall
{
    public int nProgressBar { get; set; } 
    public int nMaxProgressBar { get; set; }
    public Image image { get; set; }
} 
```

然后您可以将此对象传递回 UI 线程并进行更新

```
void bgWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    // On UI thread.
    InfoBall someBall = (InfoBall)e.UserState;
    this.pictureBox1.Image = someBall.image;
    // etc...
} 
```

我希望这有帮助。

# java - java中如何将html表格的列宽转换为excel列的宽度

> ID：12581531
> 
> 赞同：1
> 
> 时间：2012-09-25T10:56:50.287
> 
> 标签：java, apache-poi

我将列值的宽度作为百分比，我想将其转换为 excel 宽度以设置列的宽度。我们如何在java中做到这一点，基于在excel中计算的列宽。？

我使用以下内容：

```
HSSFSheet sheet = hwb.createSheet(reportName); 
sheet.setColumnWidth((short)columnIterator, (short)6000); 
```

在此方法中，第一个参数是列 id，第二个参数是列的宽度。我想使用 html 宽度动态设置这个宽度。

例子：

如果 html 中的列宽是 10% 那么 excel 宽度中的等距宽度是多少。？我想像setAutoColumnwidth（）一样动态设置excel的列宽。

更新 ：

我发现[了这个](http://apache-poi.1045710.n5.nabble.com/Excel-Column-Width-Unit-Converter-pixels-excel-column-width-units-td2301481.html)，这是正确的。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:08:04.187

[http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFSheet.html#autoSizeColumn%28int%29](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFSheet.html#autoSizeColumn%28int%29)

这是做你想做的吗？

# razor - Razor 在内容前添加空格

> ID：12581536
> 
> 赞同：0
> 
> 时间：2012-09-25T10:57:06.210
> 
> 标签：razor

我正在输出一个我想用逗号分隔的地址。如果我在输出地址之前不包含任何 html，它会正确显示，没有任何额外的空格。

**例子：**

97 Glen Road, 霍利伍德, BT18 0LE

**目前获得：**

97 格伦路 , 霍利伍德 , BT18 0LE

我的代码是：

```
 <p class="no-margin-top">@Html.DisplayFor(modelItem => item.Address1)
    @if(!string.IsNullOrEmpty(item.Address2)){
        @:, @Html.DisplayFor(modelItem => item.Address2)
    }
    @if(!string.IsNullOrEmpty(item.Address3)){
        @:, @Html.DisplayFor(modelItem => item.Address3)
    }
    @if(!string.IsNullOrEmpty(item.Town)){
        @:, @Html.DisplayFor(modelItem => item.Town)
    }
    @if(!string.IsNullOrEmpty(item.County)){
        @(", ")@("Co. ")@Html.DisplayFor(modelItem => item.County)
    }
    @if(!string.IsNullOrEmpty(item.Postcode)){
        @(", ")@Html.DisplayFor(modelItem => item.Postcode)
    }
    @if(!string.IsNullOrEmpty(item.Country)){
        @(", ")@Html.DisplayFor(modelItem => item.Country)
    } 
```

如上所示，我尝试以不同的方式输出逗号，但仍然得到相同的结果。

我还尝试从代码中删除所有空格以及使用@Html.Raw。

如果有人对此有解决方案或可以提出更好的方法，将不胜感激。

**更新**

由于框架内的变化，Darin 的解决方案现在会产生错误。

您需要确保您使用的是 System.Linq

然后修改达林的代码如下：

```
 public string FormattedAddress
    {
        get
        {
            var values = new[] { Address1, Address2, Address3, Town, Postcode, "Co. " + County }.Where(x => !string.IsNullOrEmpty(x));
            return string.Join(", ", values);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:06:03.123

哇，在你看来，这看起来像一个可怕的混乱。我建议您使用视图模型并将以下属性添加到您的视图模型中，以正确格式化地址：

```
public string FormattedAddress
{
    get
    {
        var values = new[] { Address1, Address2, Address3, Town, Postcode, "Co. " + County }
            .Where(!string.IsNullOrEmpty);
        return string.Join(", ", values);
    }
} 
```

然后在您看来，将混乱替换为：

```
<p class="no-margin-top">
    @Html.DisplayFor(modelItem => item.FormattedAddress)
</p> 
```

如果现在您告诉我您违反了所有良好实践并且没有使用视图模型，而是直接将您的域实体传递给视图，那么除了告诉您这是错误的之外，您可以以某种方式在视图中破解它：

```
<p class="no-margin-top">
    @{
        var values = new[] { item.Address1, item.Address2, item.Address3, item.Town, item.Postcode, "Co. " + item.County }
            .Where(!string.IsNullOrEmpty);
        var formattedAddress = string.Join(", ", values);
    }
    @formattedAddress
</p> 
```

但老实说去使用视图模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:04:30.300

尝试使用剃刀文本标记将逗号加空格强制为文本。这可能是一个剃刀解释问题。

```
{<text>, </text>@Html.DisplayFor(modelItem => item.Address2)} 
```

祝你好运

# android - 如何在列表视图中添加快速滚动和字母部分索引

> ID：12581538
> 
> 赞同：1
> 
> 时间：2012-09-25T10:57:20.673
> 
> 标签：android, android-layout, android-intent, android-emulator, android-ndk

详细地说，我正在寻找一个与下图完全相同的示例。我在这个链接[https://github.com/woozzu/IndexableListView](https://github.com/woozzu/IndexableListView)中有一个很好的例子。它可以按照我的要求正常工作。但是当我实施到我的项目时，它在列表视图中显示错误。下面是我的代码请帮助我。我是这个话题的新手。先感谢您！

寻找：

![所需 UI 的屏幕截图](../Images/5bb0e71e53705af2f289f6a7249a64bb.png)
这是我下面的代码，请说出我的错误..

主要活动.java

```
public class MainActivity extends Activity implements     SearchView.OnQueryTextListener,SearchView.OnCloseListener {

private ListView listView;
private SearchView search;
EfficientAdapter objectAdapter;
EfficientAdapter2 objectAdapter1;
int textlength=0;
private CheckBox checkStat, checkRoutine, checkTat;
 private GestureDetector mGestureDetector;
private ArrayList<CountriesList> elements;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
   setContentView(R.layout.homempleb);
   Log.i("scan"," txtScanResult ");

//Arrays.sort(CountriesList.name);
ActionItem nextItem     = new ActionItem(); 
final QuickAction quickAction = new QuickAction(this, QuickAction.VERTICAL);
quickAction.addActionItem(nextItem);
quickAction.setOnDismissListener(new QuickAction.OnDismissListener() {          
    @Override
    public void onDismiss() {
        Toast.makeText(getApplicationContext(), "Dismissed", Toast.LENGTH_SHORT).show();
    }
});

search = (SearchView) findViewById(R.id.searchView1);
search.setIconifiedByDefault(false);    
search.setOnQueryTextListener(this);
search.setOnCloseListener(this);
search.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        quickAction.show(v);
    }
});
checkStat  =  (CheckBox) findViewById(R.id.checkBoxStat);
checkRoutine  =  (CheckBox) findViewById(R.id.checkBoxRoutine);
checkTat  =  (CheckBox) findViewById(R.id.checkBoxTat);
checkStat.setOnClickListener(new OnClickListener() {             
      @Override
      public void onClick(View v) {                  
          if (((CheckBox) v).isChecked()) {
              checkStat.setChecked(true);
              Toast.makeText(MainActivity.this, "STAT", Toast.LENGTH_SHORT).show();
              checkRoutine.setChecked(false);
              checkTat.setChecked(false);                 
                } 
      }
    });
checkRoutine.setOnClickListener(new OnClickListener() {          
      @Override
      public void onClick(View v) {                  
          if (((CheckBox) v).isChecked()) {
              checkRoutine.setChecked(true);
              Toast.makeText(MainActivity.this, "ROUTINE", Toast.LENGTH_SHORT).show();
              checkStat.setChecked(false);
              checkTat.setChecked(false);                 
                } 
      }
    });
checkTat.setOnClickListener(new OnClickListener() {          
      @Override
      public void onClick(View v) {                  
          if (((CheckBox) v).isChecked()) {
              checkTat.setChecked(true);
              Toast.makeText(MainActivity.this, "TAT Effeciency", Toast.LENGTH_SHORT).show();
              checkRoutine.setChecked(false);
              checkStat.setChecked(false);                
                } 
      }
    });

listView = (ListView) findViewById(R.id.homelistView);
listView.setTextFilterEnabled(true);
listView.setFastScrollEnabled(true);  
objectAdapter = new EfficientAdapter(this, elements );
listView.setAdapter(objectAdapter);

Button refreshButton= (Button)findViewById(R.id.refreshButton);
 refreshButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        objectAdapter1 = new EfficientAdapter2(MainActivity.this);
//       objectAdapter = new EfficientAdapter(MainActivity.this);// adapter with new data
       listView.setAdapter(objectAdapter1);

       Log.i("notifyDataSetChanged", "data updated");
       objectAdapter1.notifyDataSetChanged();

    }
});  

}

@Override
public boolean onClose() {
    return false;
}

@Override
public boolean onQueryTextChange(String newText) {
    return false;
}

@Override
public boolean onQueryTextSubmit(String query) {
    return false;
}
} 
```

高效适配器.java

```
 public class EfficientAdapter extends BaseAdapter implements SectionIndexer {

private AlphabetIndexer alphaIndexer;

private String mSections = "#ABCDEFGHIJKLMNOPQRSTUVWXYZ";

   private LayoutInflater mInflater;
    private Context context;

  public EfficientAdapter(Context context, ArrayList<CountriesList> elements) {
mInflater = LayoutInflater.from(context);

this.context=context;

   }

public int getCount() {
return CountriesList.name.length;
    }

       public Object getItem(int position) {

return position;
     }

           public long getItemId(int position) {
return position;
         }

      public View getView(int position, View convertView, ViewGroup parent) {
     ViewHolder holder;
   if (convertView == null) {
    convertView = mInflater.inflate(R.layout.homemplebrowview, null);
    holder = new ViewHolder();
    holder.text1 = (TextView) convertView
            .findViewById(R.id.name);
    holder.text2 = (TextView) convertView
            .findViewById(R.id.mrn);
    holder.text3 = (TextView) convertView
            .findViewById(R.id.date);
    holder.text4 = (TextView) convertView
            .findViewById(R.id.age);
    holder.text5 = (TextView) convertView
            .findViewById(R.id.gender);
    holder.text6 = (TextView) convertView
            .findViewById(R.id.wardno);
    holder.text7 = (TextView) convertView
            .findViewById(R.id.roomno);
    holder.text8 = (TextView) convertView
            .findViewById(R.id.bedno);                  
    holder.btnList = (Button)convertView.findViewById(R.id.listbutton);
         //   holder.btnList.setOnClickListener(this);

    holder.btnList.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {                       
            Intent next=new Intent(context, SeviceDetails.class);
            context.startActivity(next);
        }
    });

    convertView.setTag(holder);
} else {
    holder = (ViewHolder) convertView.getTag();
}

holder.text1.setText(CountriesList.name[position]);
holder.text2.setText(CountriesList.mrn[position]);
holder.text3.setText(CountriesList.actualstart[position]);
holder.text4.setText(CountriesList.age[position]);
holder.text5.setText(CountriesList.gender[position]);
holder.text6.setText(CountriesList.wardNo[position]);
holder.text7.setText(CountriesList.roomNo[position]);
holder.text8.setText(CountriesList.bedNo[position]);

return convertView;
      }

    static class ViewHolder {
public Button btnList;
public TextView text8;
public TextView text7;
public TextView text6;
public TextView text5;
public TextView text4;
public TextView text1;
public TextView text2;
public TextView text3;
     }

         @Override
    public void notifyDataSetChanged()
      {
    super.notifyDataSetChanged();
         }

        @Override
          public int getPositionForSection(int section) {
// If there is no item for current section, previous section will be selected
for (int i = section; i >= 0; i--) {
    for (int j = 0; j < getCount(); j++) {
        if (i == 0) {
            // For numeric section
            for (int k = 0; k <= 9; k++) {
            //  if (StringMatcher.match(String.valueOf(getItem(j).charAt(0)), String.valueOf(k)))
                    return j;
            }
        } else {
        //  if (StringMatcher.match(String.valueOf(getItem(j).charAt(0)), String.valueOf(mSections.charAt(i))))
                return j;
        }
    }
}
return 0;
    }

   @Override
           public int getSectionForPosition(int position) {
return 0;
      }

         @Override
   public Object[] getSections() {
String[] sections = new String[mSections.length()];
for (int i = 0; i < mSections.length(); i++)
    sections[i] = String.valueOf(mSections.charAt(i));
return sections;
      }

      } 
```

IndexableListView.java

```
 public class IndexableListView extends ListView {

private boolean mIsFastScrollEnabled = false;
private IndexScroller mScroller = null;
private GestureDetector mGestureDetector = null;

public IndexableListView(Context context) {
    super(context);
}

public IndexableListView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public IndexableListView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
public boolean isFastScrollEnabled() {
    return mIsFastScrollEnabled;
}

@Override
public void setFastScrollEnabled(boolean enabled) {
    mIsFastScrollEnabled = enabled;
    if (mIsFastScrollEnabled) {
        if (mScroller == null)
            mScroller = new IndexScroller(getContext(), this);
    } else {
        if (mScroller != null) {
            mScroller.hide();
            mScroller = null;
        }
    }
}

@Override
public void draw(Canvas canvas) {
    super.draw(canvas);

    // Overlay index bar
    if (mScroller != null)
        mScroller.draw(canvas);
}

@Override
public boolean onTouchEvent(MotionEvent ev) {
    // Intercept ListView's touch event
    if (mScroller != null && mScroller.onTouchEvent(ev))
        return true;

    if (mGestureDetector == null) {
        mGestureDetector = new GestureDetector(getContext(), new GestureDetector.SimpleOnGestureListener() {

            @Override
            public boolean onFling(MotionEvent e1, MotionEvent e2,
                    float velocityX, float velocityY) {
                // If fling happens, index bar shows
                mScroller.show();
                return super.onFling(e1, e2, velocityX, velocityY);
            }

        });
    }
    mGestureDetector.onTouchEvent(ev);

    return super.onTouchEvent(ev);
}

@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    return true;
}

@Override
public void setAdapter(ListAdapter adapter) {
    super.setAdapter(adapter);
    if (mScroller != null)
        mScroller.setAdapter(adapter);
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    if (mScroller != null)
        mScroller.onSizeChanged(w, h, oldw, oldh);
}

} 
```

字符串匹配器.java

```
 public class StringMatcher {

public static boolean match(String value, String keyword) {
    if (value == null || keyword == null)
        return false;
    if (keyword.length() > value.length())
        return false;

    int i = 0, j = 0;
    do {
        if (isKorean(value.charAt(i)) && isInitialSound(keyword.charAt(j))) {
        } else {
            if (keyword.charAt(j) == value.charAt(i)) {
                i++;
                j++;
            } else if (j > 0)
                break;
            else
                i++;
        }
    } while (i < value.length() && j < keyword.length());

    return (j == keyword.length())? true : false;
}

private static boolean isKorean(char c) {
    return false;
}

private static boolean isInitialSound(char c) {
    return false;
} 
```

}

IndexScroller.java

```
public class IndexScroller {

private static final int STATE_HIDDEN = 0;
private static final int STATE_SHOWING = 1;
private static final int STATE_SHOWN = 2;
private static final int STATE_HIDING = 3;

public IndexScroller(Context context, ListView lv) {
    mDensity = context.getResources().getDisplayMetrics().density;
    mScaledDensity = context.getResources().getDisplayMetrics().scaledDensity;
    mListView = lv;
    setAdapter(mListView.getAdapter());

    mIndexbarWidth = 20 * mDensity;
    mIndexbarMargin = 10 * mDensity;
    mPreviewPadding = 5 * mDensity;
}

public void draw(Canvas canvas) {
    if (mState == STATE_HIDDEN)
        return;

    // mAlphaRate determines the rate of opacity
    Paint indexbarPaint = new Paint();
    indexbarPaint.setColor(Color.BLACK);
    indexbarPaint.setAlpha((int) (64 * mAlphaRate));
    indexbarPaint.setAntiAlias(true);
    canvas.drawRoundRect(mIndexbarRect, 5 * mDensity, 5 * mDensity, indexbarPaint);

    if (mSections != null && mSections.length > 0) {
        // Preview is shown when mCurrentSection is set
        if (mCurrentSection >= 0) {
            Paint previewPaint = new Paint();
            previewPaint.setColor(Color.BLACK);
            previewPaint.setAlpha(96);
            previewPaint.setAntiAlias(true);
            previewPaint.setShadowLayer(3, 0, 0, Color.argb(64, 0, 0, 0));

            Paint previewTextPaint = new Paint();
            previewTextPaint.setColor(Color.WHITE);
            previewTextPaint.setAntiAlias(true);
            previewTextPaint.setTextSize(50 * mScaledDensity);

            float previewTextWidth = previewTextPaint.measureText(mSections[mCurrentSection]);
            float previewSize = 2 * mPreviewPadding + previewTextPaint.descent() - previewTextPaint.ascent();
            RectF previewRect = new RectF((mListViewWidth - previewSize) / 2
                    , (mListViewHeight - previewSize) / 2
                    , (mListViewWidth - previewSize) / 2 + previewSize
                    , (mListViewHeight - previewSize) / 2 + previewSize);

            canvas.drawRoundRect(previewRect, 5 * mDensity, 5 * mDensity, previewPaint);
            canvas.drawText(mSections[mCurrentSection], previewRect.left + (previewSize - previewTextWidth) / 2 - 1
                    , previewRect.top + mPreviewPadding - previewTextPaint.ascent() + 1, previewTextPaint);
        }

        Paint indexPaint = new Paint();
        indexPaint.setColor(Color.WHITE);
        indexPaint.setAlpha((int) (255 * mAlphaRate));
        indexPaint.setAntiAlias(true);
        indexPaint.setTextSize(12 * mScaledDensity);

        float sectionHeight = (mIndexbarRect.height() - 2 * mIndexbarMargin) / mSections.length;
        float paddingTop = (sectionHeight - (indexPaint.descent() - indexPaint.ascent())) / 2;
        for (int i = 0; i < mSections.length; i++) {
            float paddingLeft = (mIndexbarWidth - indexPaint.measureText(mSections[i])) / 2;
            canvas.drawText(mSections[i], mIndexbarRect.left + paddingLeft
                    , mIndexbarRect.top + mIndexbarMargin + sectionHeight * i + paddingTop - indexPaint.ascent(), indexPaint);
        }
    }
}

public boolean onTouchEvent(MotionEvent ev) {
    switch (ev.getAction()) {
    case MotionEvent.ACTION_DOWN:
        // If down event occurs inside index bar region, start indexing
        if (mState != STATE_HIDDEN && contains(ev.getX(), ev.getY())) {
            setState(STATE_SHOWN);

            // It demonstrates that the motion event started from index bar
            mIsIndexing = true;
            // Determine which section the point is in, and move the list to that section
            mCurrentSection = getSectionByPoint(ev.getY());
            mListView.setSelection(mIndexer.getPositionForSection(mCurrentSection));
            return true;
        }
        break;
    case MotionEvent.ACTION_MOVE:
        if (mIsIndexing) {
            // If this event moves inside index bar
            if (contains(ev.getX(), ev.getY())) {
                // Determine which section the point is in, and move the list to that section
                mCurrentSection = getSectionByPoint(ev.getY());
                mListView.setSelection(mIndexer.getPositionForSection(mCurrentSection));
            }
            return true;
        }
        break;
    case MotionEvent.ACTION_UP:
        if (mIsIndexing) {
            mIsIndexing = false;
            mCurrentSection = -1;
        }
        if (mState == STATE_SHOWN)
            setState(STATE_HIDING);
        break;
    }
    return false;
}

public void onSizeChanged(int w, int h, int oldw, int oldh) {
    mListViewWidth = w;
    mListViewHeight = h;
    mIndexbarRect = new RectF(w - mIndexbarMargin - mIndexbarWidth
            , mIndexbarMargin
            , w - mIndexbarMargin
            , h - mIndexbarMargin);
}

public void show() {
    if (mState == STATE_HIDDEN)
        setState(STATE_SHOWING);
    else if (mState == STATE_HIDING)
        setState(STATE_HIDING);
}

public void hide() {
    if (mState == STATE_SHOWN)
        setState(STATE_HIDING);
}

public void setAdapter(Adapter adapter) {
    if (adapter instanceof SectionIndexer) {
        mIndexer = (SectionIndexer) adapter;
        mSections = (String[]) mIndexer.getSections();
    }
}

private void setState(int state) {
    if (state < STATE_HIDDEN || state > STATE_HIDING)
        return;

    mState = state;
    switch (mState) {
    case STATE_HIDDEN:
        // Cancel any fade effect
        mHandler.removeMessages(0);
        break;
    case STATE_SHOWING:
        // Start to fade in
        mAlphaRate = 0;
        fade(0);
        break;
    case STATE_SHOWN:
        // Cancel any fade effect
        mHandler.removeMessages(0);
        break;
    case STATE_HIDING:
        // Start to fade out after three seconds
        mAlphaRate = 1;
        fade(3000);
        break;
    }
}

private boolean contains(float x, float y) {
    // Determine if the point is in index bar region, which includes the right margin of the bar
    return (x >= mIndexbarRect.left && y >= mIndexbarRect.top && y <= mIndexbarRect.top + mIndexbarRect.height());
}

private int getSectionByPoint(float y) {
    if (mSections == null || mSections.length == 0)
        return 0;
    if (y < mIndexbarRect.top + mIndexbarMargin)
        return 0;
    if (y >= mIndexbarRect.top + mIndexbarRect.height() - mIndexbarMargin)
        return mSections.length - 1;
    return (int) ((y - mIndexbarRect.top - mIndexbarMargin) / ((mIndexbarRect.height() - 2 * mIndexbarMargin) / mSections.length));
}

private void fade(long delay) {
    mHandler.removeMessages(0);
    mHandler.sendEmptyMessageAtTime(0, SystemClock.uptimeMillis() + delay);
}

private Handler mHandler = new Handler() {

    @Override
    public void handleMessage(Message msg) {
        super.handleMessage(msg);

        switch (mState) {
        case STATE_SHOWING:
            // Fade in effect
            mAlphaRate += (1 - mAlphaRate) * 0.2;
            if (mAlphaRate > 0.9) {
                mAlphaRate = 1;
                setState(STATE_SHOWN);
            }

            mListView.invalidate();
            fade(10);
            break;
        case STATE_SHOWN:
            // If no action, hide automatically
            setState(STATE_HIDING);
            break;
        case STATE_HIDING:
            // Fade out effect
            mAlphaRate -= mAlphaRate * 0.2;
            if (mAlphaRate < 0.1) {
                mAlphaRate = 0;
                setState(STATE_HIDDEN);
            }

            mListView.invalidate();
            fade(10);
            break;
        }
    }

};
 } 
```

如果我添加它它在 mainactivity listView = (ListView) findViewById(R.id.homelistView);

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T11:09:10.980

您正在使用自定义 ListView 类 com.woozzu.android.widget.IndexableListView 您必须将布局文件中的“ListView”替换为“com.woozzu.android.widget.IndexableListView”

将您的布​​局更改为：

```
 <?xml version="1.0" encoding="utf-8"?>
        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:background="#ff3344"
        android:layout_height="fill_parent" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:background="#ffffff"     
                android:layout_alignTop="@+id/scrollView1"
                android:layout_toRightOf="@+id/scrollView1" >           

                <com.woozzu.android.widget.IndexableListView
                    android:id="@+id/homelistView"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="1.04"
                    android:dividerHeight="0dip" >

                </com.woozzu.android.widget.IndexableListView>

            </LinearLayout>

        </RelativeLayout>

        </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-23T13:05:48.850

@Anis 建议的解决方案是我找到的唯一可行的解​​决方案。除此之外，如果您希望单击列表视图项上的组件的侦听器，则必须更新此处提到的代码，[https://github.com/denley/IndexableListView/commit/18210a54487ba079bb332fafec709e2de26883db](https://github.com/denley/IndexableListView/commit/18210a54487ba079bb332fafec709e2de26883db)

# jboss - 如何配置 jboss 服务器以读取客户端证书

> ID：12581539
> 
> 赞同：2
> 
> 时间：2012-09-25T10:57:26.213
> 
> 标签：jboss, client-certificates

我有一个 PKCS12 密钥库文件。我已经在我的浏览器中导入了它。在我的代码中，我必须检索证书信息和数据。

在 JBOSS EAP 5.1 中是否需要进行任何配置？

```
 HttpServletRequest req=(HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
    response.setContentType("text/plain");
    PrintWriter out = response.getWriter();
    X509Certificate[] certs = (X509Certificate[]) req.getAttribute("javax.servlet.request.X509Certificate");    
    if (certs != null) {
    for (int i = 0; i < certs.length; i++) {
    out.println("Client Certificate [" + i + "] = " + certs[i].toString());
    }
    }
    else {
    if ("https".equals(request.getScheme())) {
    out.println("This was an HTTPS request, but no client certificate is available");
    } 
```

在运行它时。线

```
X509Certificate[] certs = (X509Certificate[]) req.getAttribute("javax.servlet.request.X509Certificate"); 
```

每次都给null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:15:43.137

您确定客户正在出示证书吗？

这可能不是您想要做的，但我在 AS 7 中使用standalone.xml 中配置的安全域做了类似的事情

这个线程几乎解释了这一切： [https ://community.jboss.org/thread/172052?start=0&tstart=0](https://community.jboss.org/thread/172052?start=0&tstart=0)

# php - MySQL 查询以显示基于三个表的格式

> ID：12581540
> 
> 赞同：2
> 
> 时间：2012-09-25T10:57:26.757
> 
> 标签：php, mysql

我在下面有三个表格，显示了学生记录、科目和有科目的学生。

我想问一下什么是有效的 SQL 查询来显示下面的结果。我可以使用 JOIN 显示它，但不能使用下面的格式。

```
+------+------------+-----------+-----+---------+- ----------+--------+
| 姓名 | 地址 | 电话 | 性别 | 科目 | 老师 | 活跃 |
+------+------------+-----------+-----+---------+- ----------+--------+
| 约翰 | 某处| 12345 | 中号 | | 老师1 | 是 |
| 约翰 | 某处| 12345 | 中号 | 数学 | | 是 |
| 约翰 | 某处| 12345 | 中号 | 科学 | | 是 |
| 约翰 | 某处| 12345 | 中号 | 英语 | | 是 |
| 马特 | 某处| 123456 | 中号 | | 老师2 | 是 |
| 马特 | 某处| 23456 | 中号 | 数学 | | 是 |
| 马特 | 某处| 123456 | 中号 | 科学 | | 是 |
| 女孩 | 某处| 5431 | F | | 老师3 | 是 |
| 女孩 | 某处| 5431 | F | 物理学 | | 是 |
| 女孩 | 某处| 5431 | F | 数学 | | 是 |
+------+------------+-----------+-----+---------+- ----------+--------+

从 student_record 中选择 *；
+------------+------+-----------------+------------ +-----+----------+--------+
| id_student | 姓名 | 地址 | 电话 | 性别 | 老师 | 活跃 |
+------------+------+-----------------+------------ +-----+----------+--------+
| 1 | 约翰 | 某处 | 12345 | 中号 | 老师 | 0 |
| 2 | 马特 | 某处| 12345222 | 中号 | 老师1 | 0 |
| 3 | 女孩 | 这里某处| 第3333章 F | 老师2 | 0 |
+------------+------+-----------------+------------ +-----+----------+--------+

从主题中选择 *；
+------------+--------------+---------- +
| id_subject | 主题名 | 主题描述 |
+------------+--------------+---------- +
| 1 | 数学 | 数学 |
| 2 | 科学 | 科学 |
| 3 | 英语 | 英语 |
| 4 | 物理学 | 物理学 |
+------------+--------------+---------- +

从 with_subjects 中选择 *；
+--------------------+--------------------+-------- -----+
| id_student_subject | student_id_subject | 学生ID |
+--------------------+--------------------+-------- -----+
| 1 | 1 | 1 |
| 2 | 2 | 1 |
| 3 | 3 | 1 |
| 4 | 4 | 1 |
| 5 | 4 | 2 |
| 6 | 3 | 2 |
| 8 | 1 | 2 |
| 9 | 1 | 3 |
| 10 | 2 | 3 |
| 11 | 3 | 3 |
| 12 | 4 | 3 |
+--------------------+--------------------+-------- -----+

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:30:24.703

怎么样

选择 a.name 作为“姓名”，a.address 作为“地址”，a.telephone 作为“电话”，a.sex 作为“性别”，null 作为“主题”，a.teacher 作为“教师”，a.active作为学生记录中的“活动”作为联合 a.name 作为“姓名”，a.address 作为“地址”，a.telephone 作为“电话”，a.sex 作为“性别”，b.subject_name 作为“主题”，null as "Teacher",a.active as "Active" from (student_record as a inner join with_subjects as c on a.id_student = c.student_id) inner join subject as b on c.student_id_subject = b.id_subject

没有测试它。它的顺序与您的示例相同，但应该包含所有数据

# java - 使用java检测android设备是否连接到pc

> ID：12581542
> 
> 赞同：-2
> 
> 时间：2012-09-25T10:57:32.873
> 
> 标签：java, android

我如何使用java检测android设备是否连接到pc。我正在创建一个动态web项目，在一个jsp页面中我想检查android设备是否连接到客户端机器。假设客户端机器没有已安装安卓 SDK。

任何帮助将不胜感激。

我希望在 google play 中得到完全相同的结果，如下图所示 ![在此处输入图像描述](../Images/44100415939810531b28860d7a0bef91.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:58:37.727

您可以使用亚行。它位于 SDK 文件夹中。

```
adb devices 
```

打印已连接设备的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:11:18.857

您将需要在 windows 上使用 java 获取 shell，并按照 cypressious 的建议尝试 adb devices。

```
try {
        mProcess = Runtime.getRuntime().exec("adb devices > C:\Users\status.txt");
    } catch (IOException e) {
        e.printstacktrace   }
    osStream = new DataOutputStream(mProcess.getOutputStream()); 
```

在此之后，您可以简单地解析 status.txt 文件并查看设备是否已连接。

# drupal - 如何在包含 drupal_get_form(formid) 的首页显示自定义块

> ID：12581550
> 
> 赞同：0
> 
> 时间：2012-09-25T10:58:09.647
> 
> 标签：drupal

嗨朋友们，我开发了一个自定义块，它从现有模块中获取表单，它适用于将表单 id 作为参数的页面，但在其他页面中我收到此错误/警告。call_user_func_array() 期望参数 1 是一个有效的回调，函数 'simplenews_subscription_manager_form' 在第 382 行的 /var/www/rajesh/ph/drupal/includes/form.inc 中未找到或无效的函数名称。

谁能告诉我在每一页或首页中显示此表单的解决方案。

在此先感谢， 拉杰什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:01:53.503

这是一个基于drupal的问题。请张贴在[drupal stackexchange 上。](https://drupal.stackexchange.com/)快速回复

```
<?php
module_load_include('inc', 'simplenews', 'simplenews.subscription');
print drupal_get_form('simplenews_subscription_manager_form');
?> 
```

像这样使用

# mod-rewrite - HTTP 主机基础路由

> ID：12581554
> 
> 赞同：0
> 
> 时间：2012-09-25T10:58:27.663
> 
> 标签：mod-rewrite, nginx

哪个软件可以帮助做到这一点：

> *   [在端口 80 上对http://host1.mycomp.com](http://host1.mycomp.com)的请求将被 NAT 到端口 80 上的 PC1。
> *   [在端口 80 上对http://host2.mycomp.com](http://host2.mycomp.com)的请求将被 NAT 到端口 80 上的 PC2。

我们只有 1 个 IP。host1 和 host2.mycomp.com 指向同一个 IP。有人说 nginx 会有所帮助，有人说 url rewriter 会有所帮助。请告诉我怎么做。提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:57:16.283

我现在正在使用 nginx，但还不满意。

# c# - 将值设置为已经具有值的嵌套控件的属性

> ID：12581555
> 
> 赞同：0
> 
> 时间：2012-09-25T10:58:28.660
> 
> 标签：c#, wpf, xaml

我有一个CustomControl，比如说Grid with Button，我不能直接修改它。该嵌套按钮的 Content 属性设置为“Hello world”。CustomControl 不会将此按钮暴露给外部代码。那么，如何在主窗口中设置此属性？我试图设置风格

```
<Style TargetType="{x:Type Button}">
    <Setter Property="Content" Value="Bye" />
</Style> 
```

如果没有设置按钮的属性，它可以完美地工作，遗憾的是，这不是我的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:27:00.627

您必须在控件中创建一个 Dependency 属性才能执行此操作。[这](http://www.wpftutorial.net/dependencyproperties.html)是一个教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:15:48.557

尝试先获取用户 Control

CustomControl = Page.FindControl("CustomControl name") as CustomControl;

然后尝试使用与上述相同的方式获取其他控件。

注意：我不是 100% 确定这会奏效。我回答是因为我们在其他地方使用相同的逻辑。所以这可能会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:07:46.807

`Property`在您的其中创建一个`CustomControl`回馈并设置按钮的内容。

# sql - 查找不完全相同的重复行

> ID：12581556
> 
> 赞同：1
> 
> 时间：2012-09-25T10:58:31.953
> 
> 标签：sql, oracle, duplicates

我可以选择所有具有相同列值的行（例如 SSN 字段），但可以单独显示它们。?

我已经搜索了这个答案，但它们都有“计数（*）和分组依据”部分，要求行完全相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:03:53.720

试试这个：

```
SELECT A, B FROM MyTable
WHERE A IN
(
    SELECT A FROM MyTable GROUP BY A HAVING COUNT(*)>1
) 
```

我已经完成了 SQL 服务器。但希望这是你需要的

![在此处输入图像描述](../Images/db7638aab84bb3500acbd08f347bd5fa.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T12:16:04.380

这是另一种方法，它只引用表一次，使用分析函数而不是子查询来获取重复计数它可能会更快；它也可能不会，具体取决于特定数据。

```
SELECT * FROM (
  SELECT col1, col2, col3, ssn, COUNT(*) OVER (PARTITION BY ssn) ssn_dup_count
)
WHERE ssn_dup_count > 1
ORDER BY ssn_dup_count DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:02:29.603

```
SELECT
    *
FROM
    MyTable
WHERE
    EXISTS
    (
        SELECT
            NULL
        FROM
            MyTable MT
        WHERE
            MyTable.SameColumnName = MT.SameColumnName
        AND MyTable.DifferentColumnName <> MT.DifferentColumnName) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T11:13:57.970

这将获取所需的数据并按顺序显示它们，以便我们可以一起查看分组数据。

```
SELECT * FROM TABLENAME
WHERE SSN  IN
(
    SELECT SSN FROM TABLENAMEGROUP BY SSN HAVING COUNT(SSN)>1
)

ORDER BY SSN 
```

这里 SSN 是对其进行类似值检查的列名。

# iphone - 如何延迟震动通知

> ID：12581566
> 
> 赞同：0
> 
> 时间：2012-09-25T10:59:05.953
> 
> 标签：iphone, objective-c, xcode, xcode4

我想将摇动延迟 5 秒，因为如果用户连续摇动设备，则响应显示为空。所以这就是为什么我想延迟摇动直到 n 除非响应还活着。

这是我的代码是

```
- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event {

    if (motion == UIEventSubtypeMotionShake) {

        [FlurryAnalytics logEvent:@"User shaked to update"];

        [[NSNotificationCenter defaultCenter] postNotificationName:@"CheckWeather" object:nil];

        [[NSNotificationCenter defaultCenter] postNotificationName:@"startWeatherNeue" object:nil];

        if ( [super respondsToSelector:@selector(motionEnded:withEvent:)] )

            [super motionEnded:motion withEvent:event];

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:04:24.127

要稍后执行一些选择器，您可以使用：

```
- (void)performSelector:(SEL)aSelector withObject:(id)anArgument afterDelay:(NSTimeInterval)delay 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:53:13.350

在目标 ci 中使用**sleep(6)**停止处理，将 sleep(6) 放在您触发的通知代码之前：-

```
-(void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event {

if (motion == UIEventSubtypeMotionShake) {

 sleep(6);

[FlurryAnalytics logEvent:@"User shaked to update"];

[[NSNotificationCenter defaultCenter] postNotificationName:@"CheckWeather" object:nil];

[[NSNotificationCenter defaultCenter] postNotificationName:@"startWeatherNeue" object:nil];

if ( [super respondsToSelector:@selector(motionEnded:withEvent:)] )

    [super motionEnded:motion withEvent:event];

    } 
 } 
```

然后处理停止 6 秒，然后在 6 秒后触发通知可能对您有帮助

**其他**

你也使用 NSTimer :-

在 NSTimer 中，您在 if else 条件下检查您的响应数组计数 > 0，并在您的响应数组 > 0 时用 1 秒调用方法，然后调用 NSNOtification 方法

这是我的例子：- 使用 NSTimer

```
 -(void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event 
 {

  self.TimeOfActiveUser = [NSTimer scheduledTimerWithTimeInterval:01.0  target:self   selector:@selector(checkInfoString) userInfo:nil repeats:YES];
 }

 -(IBAction)checkInfoString
 {

    if([responsearray count]>0)
    {
    [FlurryAnalytics logEvent:@"User shaked to update"];

    [[NSNotificationCenter defaultCenter] postNotificationName:@"CheckWeather" object:nil];

    [[NSNotificationCenter defaultCenter] postNotificationName:@"startWeatherNeue" object:nil];

        if ( [super respondsToSelector:@selector(motionEnded:withEvent:)] )
        {
          [super motionEnded:motion withEvent:event];
         } 

    }
   else
    {

     NSLOG
    }
 } 
```

# statistics - RMSE和相关系数两种回归模型的比较

> ID：12581567
> 
> 赞同：0
> 
> 时间：2012-09-25T10:59:14.327
> 
> 标签：statistics, regression, model-comparison

我有两个回归模型，一个具有 87 的相关系数和 0.045 的 RMSE，另一个具有 93 的相关系数和 0.055 的 RMSE。其中哪个是预测未来病例的更好模型？或者，相关系数或 RMSE 哪个更适合回归模型评估？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:05:37.307

两个变量相关系数和 RMSe 之间没有关系。相关系数表明这些项目之间的关系权重。当相关系数很高时，这很好。当 RMSE 较低时，RMSE 显示结果的误差取决于输入，因此它是理想的。根据您的业务您可以选择。在我的业务中，我将选择 93 的第二项相关系数和 0.055 的 RMSE，因为我更确定项目之间存在关系并且 RMSE = 0.055 非常小。

# android - 在android中将时间戳转换为相对时间

> ID：12581569
> 
> 赞同：0
> 
> 时间：2012-09-25T10:59:18.350
> 
> 标签：android, timestamp, android-dateutils

`Timestamp`我使用的格式是 "YYYY-MM-DD HH:MM:SS" 现在我希望它把它转换成相应的相对时间。在这个话题上搜索了很多。我知道`DateUtils`可以用来做这个，但我找不到任何`DateUtils`用作`Timestamp`参数的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:01:03.437

查看`SimpleDateFormat`课程：http: [//developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

# hibernate - jpa hibernate序列预分配

> ID：12581571
> 
> 赞同：0
> 
> 时间：2012-09-25T10:59:23.997
> 
> 标签：hibernate, orm, jpa-2.0, eclipselink

我一直在浏览 JPA 文档，并在分配序列 id 时遇到了预分配的事情。

尽管出于明显的性能原因它非常好。但我正在考虑它可能会搞砸事情的场景。

据我了解，当我们在使用表排序或排序对象作为生成序列的策略时设置分配大小 = 100 时，像 hibernate 或 Eclipse 链接这样的持久性提供程序将维护内存计数器，插入记录的应用程序代码不必进入数据库对于每个插入。

当该内存计数器达到 100 时，数据库序列增加 100 并继续相同的故事。到目前为止一切都很好。

但是假设我们在生产中遇到了一个错误，我们发现某些表中的记录没有被插入到数据库中。

所以我们准备脚本在数据库中插入这些记录，现在我们为表的主键赋予什么值。如果我们从数据库中获取值，当应用程序尝试插入记录时很有可能会发生冲突使用内存计数器并会给出 SQL 异常。

有人遇到过这样的问题吗？处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:07:34.277

只需确保在脚本中使用与 Hibernate 生成器相同的策略即可。例如，如果序列位于 2300，并且 Hibernate 生成器将序列增加 100 并生成 ID 2301 到 2400 而不转到序列，请在脚本中执行相同操作。

或者停止应用程序，运行您的脚本，并使用一个值重新生成序列，以保证 Hibernate 生成器不会生成已使用的 ID。

# html - 跨度文本的颜色

> ID：12581572
> 
> 赞同：0
> 
> 时间：2012-09-25T10:59:25.227
> 
> 标签：html, css

我正在使用 HTML5 文档类型。我创建了一个跨度标记并将文本颜色设为红色，但在我运行页面时它没有应用任何跨度。但奇迹是它在 jsfiddle [http://jsfiddle.net/r9bP8/2/中工作](http://jsfiddle.net/r9bP8/2/)

```
 <!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>

body{margin:0; padding:0; }
.wrapper{width:1024px; height:768px; position:relative; margin:0 auto; background:url(../images/.jpg) repeat top left}
header{
    display:block; padding:0 125px;
    background-color: #007DC4; text-align:center;
    overflow:auto
}
header a:first-child{float:left; padding:15px 0}
header a:last-child{float:right; padding:15px 0}
.logo{ padding-top:8px ; display:inline-block }

.container{width:801px; height:700px; background-color:#FFF; margin:0 auto;
    -webkit-box-shadow: 2px 2px  #e1e1e1,  -2px 0 2px #e1e1e1;   
    -moz-box-shadow: 2px 0 2px #e1e1e1,  -2px 0 2px #e1e1e1;   
    box-shadow: 2px 0 2px #e1e1e1,  -2px 0 2px #e1e1e1; 
}
.home_menu{
    width:500px; margin:0 auto; overflow:auto; position:relative
}
.test{ padding:35px 50px; width:150px; display:inline-block; float:left}
.test a{
    width:150px;
    float:left;  line-height:150px; 
    background-color:#0091ce ;
    border-radius:6px;  text-align:center;  vertical-align:middle;
}​
.test span{
    color:#F66
}​
</style>
</head>

<body>
<div class="wrapper">

<header>
<a href="#"><fhj</a>
<a href="#" class="logo">fh</a>
<a href="#">gj</a>
</header>

<div class="container">
<div class="home_menu">
<div class="test">
<a href="#"><img src="images/channels.jpg" width="59" height="60" alt="channels" style="vertical-align:middle" /></a><span>test</span></div>
<div class="test"><a href="#"><img src="images/.jpg" width="64" height="73" alt="" style="vertical-align:middle" /></a><span>uspan</span></div>
<div class="test"><a href="#"><img src="images/.jpg" width="99" height="78" alt="" style="vertical-align:middle" /></a><span>htu</span></div>
<div class="test"><a href="#"><img src="images/.jpg" width="76" height="49" alt="" style="vertical-align:middle" /></a><span>ggg</span></div>
<div class="test"><a href="#"><img src="images/.jpg" width="71" height="68" alt="" style="vertical-align:middle" /></a><span>tehhhst</span></div>
<div class="test"><a href="#"><img src="images/.jpg" width="70" height="68" alt="" style="vertical-align:middle" /></a><span>bgfg</span></div>
</div>

</div>

</div>
</body>
</html> 
```

为什么在运行页面时它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:39:32.713

根据我的评论，我删除了复制时出现在大括号`test a`和右大括号上的两个问号。`test span`（可能的字符编码问题？）

我还添加了省略的分号和样式表的类型。

```
<style type="text/css">
  body{margin:0; padding:0;}
  .wrapper{width:1024px; height:768px; position:relative; margin:0 auto; background:url(../images/.jpg) repeat top left;}
  header{
      display:block; padding:0 125px;
      background-color: #007DC4; text-align:center;
      overflow:auto;
  }
  header a:first-child{float:left; padding:15px 0;}
  header a:last-child{float:right; padding:15px 0;}
  .logo{ padding-top:8px ; display:inline-block; }

  .container{width:801px; height:700px; background-color:#FFF; margin:0 auto;
      -webkit-box-shadow: 2px 2px  #e1e1e1,  -2px 0 2px #e1e1e1;   
      -moz-box-shadow: 2px 0 2px #e1e1e1,  -2px 0 2px #e1e1e1;   
      box-shadow: 2px 0 2px #e1e1e1,  -2px 0 2px #e1e1e1; 
  }
  .home_menu{
      width:500px; margin:0 auto; overflow:auto; position:relative;
  }
  .test{ padding:35px 50px; width:150px; display:inline-block; float:left;}
  .test a{
      width:150px;
      float:left;  line-height:150px; 
      background-color:#0091ce;
      border-radius:6px;  text-align:center;  vertical-align:middle;
  }
  .test span{
      color:#F66;
  }
</style> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T11:05:30.550

这是默认设置现在你设置自己的**[编辑](http://jsfiddle.net/r9bP8/3/)**

**样式链接**

```
a:link {color:#FF0000;}      /* unvisited link */
a:visited {color:#00FF00;}  /* visited link */
a:hover {color:#FF00FF;}  /* mouse over link */
a:active {color:#0000FF;}  /* selected link */ 
```

**文字装饰**

```
a:link {text-decoration:none;}
a:visited {text-decoration:none;}
a:hover {text-decoration:underline;}
a:active {text-decoration:underline;} 
```

# c# - 创建控件的透明部分以查看其下方的控件

> ID：12581578
> 
> 赞同：3
> 
> 时间：2012-09-25T10:59:43.933
> 
> 标签：c#, winforms, transparency, contextmenustrip

我已经修改了CodeProject 中的[SuperContextMenuStrip](http://www.codeproject.com/Articles/22780/Super-Context-Menu-Strip)以满足我的一些项目需求。我将它用作[GMap.NET Map Control](http://greatmaps.codeplex.com/)上地图标记的工具提示。这是它的外观示例：

![在此处输入图像描述](../Images/deb27bc6d37ecfb0903ab6cab84a47eb.png)

我想做的就是让它看起来更像一个泡沫，让它看起来更漂亮一点。类似于旧的 Google 地图样式工具提示：

![在此处输入图像描述](../Images/53208a117e97d6d8f7a79dae03e915a2.png)

我花了一些时间搜索控制透明度，我知道这不是一件容易的事。 [这个 SO question 特别说明了这一点。](https://stackoverflow.com/questions/592538/how-to-create-a-transparent-control-which-works-when-on-top-of-other-controls)

我已经考虑覆盖 的`OnPaint`方法`SuperContextMenuStrip`来绘制位于 下方的 GMap.NET 控件的背景`SuperContextMenuStrip`，但即使在标记挂在 GMap.NET 控件上的情况下也会失败：

![在此处输入图像描述](../Images/dc5d3a7f64e4da2df5a429e637dd3c25.png)

创建我正在寻找的透明度类型的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:22:32.200

在 Windows 窗体中，您可以通过定义区域来实现透明度（或绘制形状不规则的窗口）。引用 MSDN

> 窗口区域是操作系统允许绘制的窗口内的像素集合。

在您的情况下，您应该有一个将用作遮罩的位图。位图应该至少有两种不同的颜色。这些颜色中的一种应该代表您想要透明的控件部分。

然后，您将创建一个像这样的区域：

```
// this code assumes that the pixel 0, 0 (the pixel at the top, left corner) 
// of the bitmap passed contains the color you  wish to make transparent.

       private static Region CreateRegion(Bitmap maskImage) {
           Color mask = maskImage.GetPixel(0, 0);
           GraphicsPath grapicsPath = new GraphicsPath(); 
           for (int x = 0; x < maskImage.Width; x++) {
               for (int y = 0; y < maskImage.Height; y++) {
                   if (!maskImage.GetPixel(x, y).Equals(mask)) {
                           grapicsPath.AddRectangle(new Rectangle(x, y, 1, 1));
                       }
                   }
           }

           return new Region(grapicsPath);
       } 
```

然后将控件的区域设置为 CreateRegion 方法返回的区域。

```
this.Region = CreateRegion(YourMaskBitmap); 
```

去除透明度：

```
this.Region = new Region(); 
```

正如您可能从上面的代码中看出的那样，创建区域在资源方面是昂贵的。如果您需要多次使用它们，我建议将区域保存在变量中。如果您以这种方式使用缓存区域，您很快就会遇到另一个问题。分配将在第一次工作，但您会在后续调用中获得 ObjectDisposedException。

使用 refrector 进行一些调查会在 Region 属性的 set 访问器中显示以下代码：

```
 this.Properties.SetObject(PropRegion, value);
            if (region != null)
            {
                region.Dispose();
            } 
```

Region 对象在使用后被释放！幸运的是，Region 是可克隆的，您只需分配一个克隆即可保存 Region 对象：

```
private Region _myRegion = null;
private void SomeMethod() {
    _myRegion = CreateRegion(YourMaskBitmap);            
}

private void SomeOtherMethod() {
    this.Region = _myRegion.Clone();
} 
```

# java - 如何在java中获取字符串的特定部分？

> ID：12581581
> 
> 赞同：2
> 
> 时间：2012-09-25T11:00:03.140
> 
> 标签：java, string

我想从一个完整的单词中获取 String 的特定部分。

例如：

我有以下字符串。

```
# STRING_VALUES # 
```

一句话如下

```
<p># STRING_VALUE #<br /># CMESSAGE #<br /># CUSTOMERADDRESS #<br /><br /></p> 
```

从上面，我想得到如下字符串：

```
STRING_VALUES
CMESSAGE
CUSTOMERADDRESS 
```

如何获取上述字符串？我被这个困住了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T11:06:05.927

使用`split`：

```
String ss ="# STRING_VALUES #";
String[] parts = ss.split("#");
System.out.println(parts[1].trim()); // STRING_VALUES 
```

**[演示](http://ideone.com/4cwbU)**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T11:03:53.390

对于您的特定情况，以下代码将起作用：

```
String str = "# STRING_VALUES #";
String result = str.substring(2,str.length()-2); 
```

**更新：（**以下代码适用于您修改后的输入字符串）

```
String str = "<p># STRING_VALUE #<br /># CMESSAGE #<br /># CUSTOMERADDRESS #<br /><br /></p>";

String[] tokens = str.substring(3, str.length()-4).split("<br />");
// tokens will contain [0] = "# STRING_VALUE #"
//                     [1] = "# CMESSAGE #"
//                     [2] = "# CUSTOMERADDRESS #"
//                     [3] = ""

ArrayList<String> results = new ArrayList<String>();

for(String  token : tokens)
{
    if(token.length() != 0)
    {
        results.add(token.substring(2,str.length()-2));
    }
}

// results has required strings
for(String  result : results)
{
    System.out.println(result);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:02:26.600

你可以用正则表达式来做到这一点。请参阅类[Pattern](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)和[Matcher](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)。在您的示例中查找 STRING_VALUE 字符串的正则表达式将是：

```
#\s(\w*)\s# 
```

这将在“#”和空格之后以及在空格和“#”之前返回一串单词字符（字母、数字和下划线）。单词字符链将作为您可以单独提取的子匹配返回。

或者，您可以使用[String.indexOf](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29)在您的字符串中搜索分隔符的位置，并使用[String.substring](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29)来提取您找到的分隔符位置之间的部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T11:03:22.143

看看[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)

他们会告诉你：

以下是有关如何使用字符串的更多示例：

```
 System.out.println("abc");
     String cde = "cde";
     System.out.println("abc" + cde);
     String c = "abc".substring(2,3);
     String d = cde.substring(1, 2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T11:03:32.267

您可以使用[此处](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)`String[] split(String regex)`记录的 String 类的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T11:04:02.420

如果您的字符串采用这种格式，即空格分隔，您可以使用 String.split()

```
String ss ="# STRING_VALUES #";
    System.out.println(ss.split("\\s")[1]); 
```

上面的代码返回 STRING_VALUES 作为输出

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T11:07:10.097

您可以使用子字符串：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#substring(int](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#substring(int) , int)

或者你可以使用正则表达式： [Need regexp to find substring between two tokens](https://stackoverflow.com/questions/489567/need-regexp-to-find-substring-between-two-tokens)

# php - Zend 关系：如何从视图中的依赖表中获取属性？

> ID：12581586
> 
> 赞同：1
> 
> 时间：2012-09-25T11:00:21.640
> 
> 标签：php, zend-framework, zend-db-table, table-relationships

我使用这个合成器从我的视图模板上的依赖表中获取一个属性：

```
<?php echo $row->findParentRow('Apimail_Model_DbTable_Campagne')->title ?> 
```

这是工作，但我想知道这是否是这样做的好方法。
有可能像这样更简单吗？

```
<?php echo $row->Campagne->title ?> //Where Campagne is my rules in referenceMap 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:56:46.290

是的，它正在工作，您可以保留它而无需其他任何东西。但也许你想让它更“对开发者友好”。有几种解决方案可以屏蔽您的数据表关系：

*   你可以使用`Table Data Gateway`，扩展`Zend_Db_Table_Abstract`。这是 Rob Allen 的一个很好的[初学者指南](http://akrabat.com/wp-content/uploads/Getting-Started-with-Zend-Framework.pdf)（参见“模型”部分）。这也是 ZF 参考指南中选择的方式。
*   您可以选择“映射器”方式。这是[来自 ZF 网站的快速入门指南](http://framework.zend.com/manual/1.12/fr/learning.quickstart.create-model.html)（请注意，它仅对`Application_Model_Guestbook`和`Application_Model_GuestbookMapper`类感兴趣，其余的在 imo 中非常令人困惑。小心它）
*   您也可以选择使用`Table Data Gateway`PLUS 扩展`Zend_Db_Table_Row`。这是我的首选解决方案。您将在 Stackoverflow 上找到更多帮助，尤其是在[此页面上](https://stackoverflow.com/questions/4843676/zend-framework-why-should-i-use-data-mapper-db-table-row)。我想你会更喜欢这个解决方案。
*   最后，您可以选择使用外部 ORM，例如 Doctrine。[在此处](http://www.throrinstudio.com/dev/zf/introduction-au-zf-partie-5-doctrine/)和[此处](http://www.tribulations.eu/articles/doctrine-2-et-zend-framework.html)使用 Doctrine 与 ZF 的一些帮助（法语，我想您不会介意 :)）或[英语](http://net.tutsplus.com/tutorials/php/zend-framework-from-scratch-models-and-integrating-doctrine-orm/)

# html - 如何给div无限宽度？

> ID：12581588
> 
> 赞同：3
> 
> 时间：2012-09-25T11:00:24.540
> 
> 标签：html, css, width

假设有两个 div，A 和 B。

Div B 的宽度为 900px；

屏幕分辨率为500px；

这将导致水平滚动。

问题是当我向右滚动时，我看到 DivA 并不是 100%。

有什么方法可以让 DivA 总是填满剩余空间？

看图，

![在此处输入图像描述](../Images/73c8b12d37d96419b81ff7912e00524f.png)

添加以下图像以解释问题：

![在此处输入图像描述](../Images/205b46655574d727085ff7f6e5455373.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:03:51.690

如果您使用 CSS3 -webkit-box-flex 属性，它会有所帮助。但问题是，它不适用于所有浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:30:45.817

难道你不能只`width:100%`用于 DivA 它会填补空白。此外，`float:left; position:relative`为两个 div 添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:02:10.940

嗨，现在给你的`body min-width:900px;`

像这样

```
body{
min-width:900px;  // total width of your wraper as like wraper width 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T11:07:53.747

我认为您缺少浮动：DivA 的左侧

```
.DivA{
float: left
width: 100%
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-11T17:16:29.020

问题是： div 容器没有在窗口宽度上扩展... divA 具有自动宽度，因此它将扩展到容器宽度，网格 div 的最小宽度大于窗口宽度（我认为...在代码中看不到）

我的回答是：

html:

```
<h1>Child Expand Test</h1>
<form action="#">
    <div class="divContainer">
        <div class="divA">
            &nbsp;
        </div> 

        <div class="divGrid">
            &nbsp;
        </div>
    </div>
</form> 
```

CSS: form { /* 只是为了显示表单没有展开，如果需要展开它*//*将答案行移到这个类 */ background-color: silver; 填充顶部：1em；底部填充：1em；}

```
.divContainer {
    display: inline-block; /* this is the answer line, to expand over the window width */
}

.divA { /* this div will expand over the window width */
    background-color: red;
}

.divGrid {
    background-color: blue;
     min-width: 1500px; /* This is the reason why its needed, yo expand one child width over the size of the window */
} 
```

这是一个小提琴：http: [//jsfiddle.net/bjb7drdm/](http://jsfiddle.net/bjb7drdm/)

# javascript - 使用 Javascript 添加两个类名

> ID：12581594
> 
> 赞同：1
> 
> 时间：2012-09-25T11:00:51.163
> 
> 标签：javascript, css

```
 document.Deceasedinfo.DOBOfPrimary.className = "deceasedinfoinput datepick3"; 
```

如何为表中的对象添加两个不同的类。我试过这个。一个类被应用，但另一个类没有被应用。

如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:42:24.257

如果元素没有类，则给它一个。否则，在新的类名后面附加一个空格：

```
var el = document.getElementById('hello');
if(el) {
  el.className += el.className ? ' someClass' : 'someClass';
} 
```

# javascript - 异步 Ajax 请求块导航器？

> ID：12581595
> 
> 赞同：2
> 
> 时间：2012-09-25T11:00:57.967
> 
> 标签：javascript, ajax, jquery

我有以下代码，我尝试通过“whatever.php”获取一些数据。这个 php 文件花费大约 20 秒来获取数据库请求。在服务器回答数据之前，导航器被阻止（如果我让它异步，它允许我点击或填写输入，但它只在提到的 20 秒后重定向）。我尝试中止这个 ajax 实例，但是在中止之后，它也会等待那个时间。

我想要做的是，如果用户不想等待请求完成并显示表格，他应该能够打开指向其他子页面的链接。

```
var contenidoAjax = $('div#table_solicitudes').html('<p><img src="'.URL.'images/ajax-loader.gif" /></p>');
var instanciaAjax=$.ajax({   
url: whatever.php, 
success: function(data) {   
    if (data == "bad") {
        $('div#table_solicitudes').html("Went bad");
    }
    else {  
        $('div#table_solicitudes').html(data);
    }
} 
```

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:42:29.377

您应该使用“beforeSend”和“complete”方法来显示和隐藏指标。

**例子 ：**

```
$.ajax({   
   url: whatever.php, 
   beforeSend: function(){
      $('div#table_solicitudes').html('<p><img src="'.URL.'images/ajax-loader.gif" /></p>'); // add indicator
   },
   complete: function(){
      $('div#table_solicitudes').html(""); // remove indicator
   }
   // existing stuff
} 
```

希望这会有所帮助！

# php - 在地址标签中隐藏一个字段

> ID：12581599
> 
> 赞同：0
> 
> 时间：2012-09-25T11:01:12.267
> 
> 标签：php, html, magento

我有使用地址标签显示的用户信息：

```
<address><?php echo $this->getShipping()->format('html') ?></address> 
```

我想在地址中隐藏一个字段（不可见）。例如，如果地址标签包含

```
name:<br>address:<br>location:<br>company:<br> 
```

我只想显示姓名、地址和位置，而不是公司。那么我该怎么做呢？或者在从 PHP 获取数据时有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:50:51.210

为什么不使用[正则表达式](http://php.net/manual/en/reference.pcre.pattern.syntax.php)，更具体地说是[preg_replace](http://php.net/manual/fr/function.preg-replace.php)？

```
$field = 'company';
$str = $this->getShipping()->format('html');
$str = preg_replace('/' .$field. '(.+)<br>/', '', $str); 
```

现在您只需要调用：

```
echo '<address>' .$str. '</address>'; 
```

您希望在哪里打印，它应该可以解决问题。

如果要删除不同字段的内容，只需更改 $field。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T12:29:56.780

那么您可以从 Magento 管理员的模板中删除公司吗？它在下面`System -> Configuration -> Customer configuration -> Address templates -> HTML`

# c - 在 udp 服务器中实现并发

> ID：12581604
> 
> 赞同：0
> 
> 时间：2012-09-25T11:01:32.280
> 
> 标签：c, udp

有什么简单的方法可以在 udp 服务器中实现并发。在 TCP 中，我们有一个连接可以用来区分客户端，而在 UDP 中则不然。那么有没有其他方法可以从另一个尝试连接到服务器的客户端中唯一地标识一个客户端，以便服务器可以为来自新客户端的每个新数据报派生一个进程。或者是否有任何不使用分叉的替代实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:05:37.070

您将需要查看在 recvfrom 返回后将指针传递给 recvfrom 的 sockaddr 结构。这将告诉您数据的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:04:06.770

保留一个已经“连接”的客户端列表，当收到新的数据报时，检查这个列表。

# matlab - fminsearch 中匿名函数的多个输出

> ID：12581621
> 
> 赞同：1
> 
> 时间：2012-09-25T11:02:38.943
> 
> 标签：matlab, anonymous-function

我正在尝试从 fminsearch 优化返回结果。我正在使用 fminsearch 来查找 SVM 的最佳超参数（变量 z）。匿名函数正在最小化分类错误（'Crit'），但我也希望返回在同一迭代中获得的另一个变量（给定超参数的选定特征）（'Features'）：

```
fun = @(z)SVM_min_fn(Data,Labels,exp(z(1)),exp(z(2)),num_folds);
[z_opt,Crit] = fminsearch(fun,z0,opts);

function [Crit Features] = SVM_min_fn(Data,Labels,rbf_sigma,boxconstraint,num_folds)
direction = 'forward';
opts = statset('display','iter');
kernel = 'rbf';

disp(sprintf('RBF sigma: %1.4f. Boxconstraint: %1.4f',rbf_sigma,boxconstraint))
c = cvpartition(Labels,'k',num_folds);
opts = statset('display','iter','TolFun',1e-3);
fun = @(x_train,y_train,x_test,y_test)SVM_class_fun(x_train,y_train,x_test,y_test,kernel,rbf_sigma,boxconstraint);
[fs,history] = sequentialfs(fun,Data,Labels,'cv',c,'direction',direction,'options',opts);

Features = find(fs==1);        % Features selected for given sigma and C
[Crit,h] = min(history.Crit);  % Mean classification error 
```

有没有办法让“fminsearch”同时返回“Crit”和`Features`？保存到工作区不起作用，因为功能不是“fminsearch”返回的超参数的正确功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:22:01.550

如果您在完成后再进行一次函数评估，这是最简单的`fminsearch`：

```
fun = @(z)SVM_min_fn(Data,Labels,exp(z(1)),exp(z(2)),num_folds);
[z_opt,Crit] = fminsearch(fun,z0,opts);

[~, Features_opt] = fun(z_opt); 
```

# visual-studio-2010 - 没有 Team Foundation Server 的 Visual Studio 2010 版本控制

> ID：12581623
> 
> 赞同：2
> 
> 时间：2012-09-25T11:02:45.810
> 
> 标签：visual-studio-2010, azure-devops

自从我开始在 Visuel Studio 中编程并且在我的上一个项目中拥有 TFS 的经验，我想知道，我是否可以在我的本地机器上使用版本控制？

由于我不在团队中工作，而且我无法访问旧的 TFS（因为它来自我的大学），如果 Visual Studio 2010 中有一个允许本地版本控制的功能，那就太酷了。

由于我从未使用过版本控制，因此我不太习惯替代方案，并希望使用 Visual Studion Build in 解决方案保持简单。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:07:09.850

单个开发人员最常见的解决方案是使用一些免费的版本控制解决方案，例如 SVN、Mercurial 或 Git。所有这些都可以轻松设置您自己的存储库，或者您可以使用一些托管服务提供商（一些提供商为小型项目提供免费托管服务）。SVN 可以使用 AnkhSVN 集成到 Visual Studio 中，用户体验将与 MS Team 解决方案非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:07:37.743

Tfs 总是涉及一台服务器，但如果你想避免需要一台服务器，我建议你查看托管的按需版本

[http://tfspreview.com/](http://tfspreview.com/)

需要注意的是，通常您不希望所有版本控制都是本地的，因为这样您将失去远程备份代码的好处。也就是说，您可能想探索像 git 这样的分布式版本控制系统，它可以为您提供本地存储和远程主机的好处（我推荐[github:windows](http://windows.github.com/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:11:30.967

随着 Team Foundation Server 2012 的发布，还有一个名为[Visual Studio Team Foundation Server Express 2012](http://www.microsoft.com/visualstudio/eng/products/visual-studio-team-foundation-server-express)的 TFS 表达式版本。

您可以[在此处](http://www.microsoft.com/visualstudio/eng/downloads)免费下载（位于 Visual Studio Express 2012 下，然后位于 Visual Studio Team Foundation Server Express 2012 下）。

[这是 Brian Harry 的博客文章](http://blogs.msdn.com/b/bharry/archive/2012/02/23/coming-soon-tfs-express.aspx)，他在其中宣布了该产品。

如果您不想在本地计算机上安装服务器产品，可以查看 Team Foundation Service：[http ://tfspreview.com/](http://tfspreview.com/)

我将它用于我自己的个人项目，并且效果很好。目前它仍处于测试阶段，并且完全免费。价格尚未公布，但可能会有一个免费帐户选项供少量使用。

# perl - 访问常量的名称，而不仅仅是它的值？

> ID：12581628
> 
> 赞同：1
> 
> 时间：2012-09-25T11:03:08.253
> 
> 标签：perl, constants

在 Perl 中，是否可以将常量传递给函数，然后按字面显示常量的名称以及使用它的值？也许通过将某种转义的常量名称传递给函数？

这是我想做的一个例子，当然 exitError() 中的代码并没有做我想做的事情。

```
use constant MAIL_SEND_FAILED => 1;

# exitError($exitcode)
sub exitError
{
    my $exitCode = $_[0];
    say "error, exitcode: $exitCode"; # output constant name as human readable exitcode, e.g. MAIL_SEND_FAILED
    exit $exitCode; # use value of exitcode, e.g. 1
}

exitError(MAIL_SEND_FAILED);
# function call should effectively execute this code
# say "error, exitcode: MAIL_SEND_FAILED";
# exit 1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:14:02.997

不完全是您想要的方式，但是为了同样的效果，您可以使用 Perl 的能力来使用 from 将不同的字符串和数字表示存储在单个标量`dualvar`中[`Scalar::Util`](http://p3rl.org/Scalar%3a%3aUtil)：

```
use strict;
use warnings;
use feature 'say';
use Scalar::Util qw(dualvar);

use constant MAIL_SEND_FAILED => dualvar 1, 'MAIL_SEND_FAILED';

sub exitError
{
    my $exitCode = $_[0];
    say "error, exitcode: $exitCode"; # output constant name as human readable exitcode, e.g. MAIL_SEND_FAILED
    exit $exitCode; # use value of exitcode, e.g. 1
}

exitError(MAIL_SEND_FAILED); 
```

更接近您最初的想法，您可以利用常量实际上是内联 subs 的事实，并通过`can`from的名称找到原始 sub [`UNIVERSAL`](http://p3rl.org/UNIVERSAL)：

```
use strict;
use warnings;
use feature 'say';
use Scalar::Util qw(dualvar);

use constant MAIL_SEND_FAILED => 2;

sub exitError
{
    my $exitCode = $_[0];
    say "error, exitcode: $exitCode"; # output constant name as human readable exitcode, e.g. MAIL_SEND_FAILED
    exit __PACKAGE__->can($exitCode)->(); # use value of exitcode, e.g. 1
}

exitError('MAIL_SEND_FAILED'); 
```

但是，IIRC Perl 不保证常量总是以这种方式生成，所以这可能会在以后中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T17:50:29.640

如果您想使用某物的名称及其值，那么您正在寻找哈希值。你甚至可能有一个带有[Readonly](https://www.metacpan.org/module/Readonly)的常量散列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:48:38.607

```
use constant MAIL_SEND_FAILED => 1;

sub exitError
{
   my %data = @_;
   # Keys are names and values are values....
}

exitError(MAIL_SEND_FAILED => MAIL_SEND_FAILED); 
```

# scala - 模式匹配时的虚线类型失败

> ID：12581632
> 
> 赞同：1
> 
> 时间：2012-09-25T11:03:23.213
> 
> 标签：scala, code-generation, pattern-matching

我已经看到这些情况工作正常（注意*scala.Int*而不是*Int*）：

```
def f(l: List[scala.Int]): List[scala.Int] = l
val l: List[scala.Int] = List[scala.Int]() 
```

但在以下示例中使用整个路径失败：

```
def f[T: TypeTag](l: List[T]): Int = {
  l match {
    case li: List[scala.Int] if typeOf[T] <:< typeOf[scala.Int] => li(0)
    case _ => 0
  }
} 
```

是否有可能在保持*scala.Int*的同时摆脱这种情况？问题是我需要自动生成此代码，并且我想避免使用*import redefinitions*。

# c# - 使用 Entity Framework 4.1 - DB First 方法删除/添加自我引用的“朋友”

> ID：12581636
> 
> 赞同：4
> 
> 时间：2012-09-25T11:03:35.927
> 
> 标签：c#, asp.net-mvc, entity-framework-4.1

我得到了 ET 4.1 生成的用户模型 - 我首先制作了数据库：

```
public partial class User
{
    public User()
    {
        this.Photos = new HashSet<Photo>();
        this.Posts = new HashSet<Post>();
        this.My_requests = new HashSet<User>();
        this.Requests = new HashSet<User>();
        this.FriendLeft = new HashSet<User>();
        this.FriendRight = new HashSet<User>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public string Surname { get; set; }
    public string Email { get; set; }
    public string Project { get; set; }
    public string City { get; set; }
    public string Street { get; set; }
    public string House_number { get; set; }
    public string Apartment_number { get; set; }
    public string username { get; set; }
    public string Zip_code { get; set; }

    public virtual ICollection<Photo> Photos { get; set; }
    public virtual ICollection<Post> Posts { get; set; }
    public virtual ICollection<User> My_requests { get; set; }
    public virtual ICollection<User> Requests { get; set; }
    public virtual ICollection<User> FriendLeft { get; set; }
    public virtual ICollection<User> FriendRight { get; set; }
} 
```

每个“用户”都可以邀请其他“用户”成为他的朋友。因此，当有人邀请您时，他会出现在“请求”中，当您邀请某人时，他会出现在“我的请求”中。该数据存储在“Friend_requests”表中，如下所示：

ProposerId(col1) RecipientId(col2)

并且两列都通过 UserId 与 User 表相关 - 它是多对多的。

我的问题是从“Friend_request”中删除行，因为 EF 没有为我提供该表的上下文，而是生成了之前显示的模型......

我尝试过这样的事情：

```
User User2 = GetUserInfo(UserId2);
context.Users.Where(u => u.Id.Equals(UserId1)).SingleOrDefault().Requests.Remove(User2);
context.SaveChanges(); 
```

但这当然是错误的，它给了我一个错误：

> "Can't update EntitySet „Friends_Request”, because it has element DefiningQuery, and in element there is no element , wchich can handle this operation."

And my questions are:
How I can delete and how to add rows to table 'Friend_Requests'?

**EDIT:**

Table relations:
![enter image description here](../Images/0993df82bc7d72a21849fc62ae5595ba.png)

And in model generated by ET it's:
My_requests -> when User is Proposer
Requests -> when User is Recipient

Still the problem is how to add new "Friend requests" and how to delete them?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:01:10.277

Of course Slauma as a experienced EF user, was right from the beginning. Without keys on Friends table it won't work. Add/remove elements now works normally as i write before. Just use like normal List. Learn on your own mistakes :)

# python - 是否可以让 Python 交互式解释器在加载时运行脚本？

> ID：12581638
> 
> 赞同：6
> 
> 时间：2012-09-25T11:03:39.690
> 
> 标签：python, python-interactive

在处理项目时，我的脚本通常有一些样板代码，例如添加路径到 sys.path 和导入我的项目的模块。每次我启动交互式解释器以快速检查某些内容时，运行这个样板代码会变得乏味，所以我想知道是否可以将脚本传递给解释器，让它在它变得“交互式”之前运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T11:03:39.690

这可以使用该`-i`选项来完成。引用解释器帮助文本：

```
-i : 运行脚本后交互检查；甚至强制提示
         如果 stdin 似乎不是终端；还有 PYTHONINSPECT=x

```

所以解释器运行脚本，然后在执行后使交互式提示可用。

例子：

```
$ python -i 样板文件.py
>>> 打印 mymodule.__doc__
我是模块！
>>>

```

* * *

这也可以使用环境变量*PYTHONSTARTUP*来完成。例子：

```
$ PYTHONSTARTUP=boilerplate.py python
Python 2.7.3（默认，2012 年 9 月 4 日，10:30:34）
[GCC 4.2.1 (基于 Apple Inc. build 5658) (LLVM build 2336.11.00)] 在 darwin
输入“帮助”、“版权”、“信用”或“许可”以获取更多信息。
>>> 打印 mymodule.__doc__
我是模块！
>>>

```

我个人更喜欢前一种方法，因为它不显示三行信息，但两者都可以完成工作。

# firefox - 来自非ie浏览器的机器mac地址

> ID：12581641
> 
> 赞同：1
> 
> 时间：2012-09-25T11:03:42.073
> 
> 标签：firefox, scripting, mac-address

我真的很想从非 IE 浏览器获取 windows 机器的 mac 地址。（我知道这侵犯了用户的隐私，但我的客户需要它，我们不得不遵守）。

我已经在 IE 中使用 activex 对象实现了它。

对于非 IE 浏览器，按照谷歌签名的 Applet 是唯一可行的方法，但加载 applet 所花费的时间超出了可接受的范围。

我怎样才能正确地做到这一点？

PS：我主要是想在 FireFox 中实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:20:24.163

为什么您的客户要求您通过 Internet 获取本质上是私有且无意义的信息（我假设这不是 LAN/Intranet 应用程序）以及易于伪造的信息。这个练习有什么意义？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:09:45.420

您可以使用 java 小程序来执行此操作：

[http://techdetails.agwego.com/2008/02/11/37/](http://techdetails.agwego.com/2008/02/11/37/)

# jquery - jQuery循环遍历表格单元格

> ID：12581650
> 
> 赞同：1
> 
> 时间：2012-09-25T11:04:11.823
> 
> 标签：jquery, loops, html-table, each

我有一个 id=main 的表...希望将每行中的两个单元格添加在一起，然后对另一行执行相同操作等等。但是，虽然我已经设法为第一行这样做，但所有结果单元格在以下行中是相同的。例如，表格中所有单元格的“测试”= 102.9...顺便说一句，一直在研究`.each()`但不确定如何实现..

```
<tr id='main'>
<td class='rtng'>100</td>
<td class='win'>2.90</td>
<td class='test'></td></tr>

<tr id='main'>
<td class='rtng'>95</td>
<td class='win'>4.25</td>
<td class='test'></td></tr> 
```

这是我的 jQuery

```
$(document).ready(function() {
    var num1 = $(".rtng").html();
    var num2 = $(".win").html();
    var result = parseFloat(num1) + parseFloat(num2);
    $(".test").html(result);
});​ 
```

另一次尝试

```
$(document).ready(function() {
    $('tr.rtng').each(function() {
        var num1 = $(".rtng").html();
        var num2 = $(".win").html();
        var result = parseFloat(num1) + parseFloat(num2);
        $(".test").html(result);
    });
});​ 
```

任何帮助都会很可爱:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:14:01.277

首先，您的 HTML 无效。没有`<table>`元素，并且您使用了两次相同的 id - id 是唯一的。使您的 HTML 像这样：

```
<table id="tableMain">
    <tr>
        <td class='rtng'>100</td>
        <td class='win'>2.90</td>
        <td class='test'></td>
    </tr>
    <tr>
        <td class='rtng'>95</td>
        <td class='win'>4.25</td>
        <td class='test'></td>
    </tr>
</table> 
```

然后在 jQuery 中：

```
$(document).ready(function() {         
    $('#tableMain tr').each(function() {
        var $this = $(this);
        $this.find('.test').text(parseFloat($this.find('.rtng').text()) + parseFloat($this.find('.win').text()));
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:08:30.017

您可以通过调用并传入计算正确值的函数来选择所有`.test`元素并设置其内容：[`.html()`](http://api.jquery.com/html/)

```
$(".test").html(function () {
    // `this` refers to the current `.test` element...
    var num1 = parseFloat($(this).siblings(".rtng").html()),
        num2 = parseFloat($(this).siblings(".win").html());
    return num1 + num2;
});​​​​​ 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/96xqQ/1/)。

旁注：正如其他人所提到的，`id`属性的值在文档中必须是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:14:36.733

首先，您两次使用了相同的 id，这会产生问题。给行唯一的 id 或将它们更改为类。假设你去上课，我会做类似的事情：

```
$('tr.main').each(function() {
    var num1 = $(this).children('.rtng').text();
    var num2 = $(this).children('.win').text();
    var result = parseFloat(num1) + parseFloat(num2);
    $(this).children('.test').text(result);
}); 
```

您需要在行的上下文中选择每个 td，因此子函数。

# c# - 单例 - 我可以创建多个实例

> ID：12581653
> 
> 赞同：2
> 
> 时间：2012-09-25T11:04:15.750
> 
> 标签：c#, design-patterns, singleton

我认为单例的意义是我一次只能初始化一个实例？如果这是正确的，那么我的 C# 控制台应用程序代码肯定有问题（见下文）。

如果我对单例的理解是正确的或者我的代码中是否有错误，请有人告诉我。

```
using System;
using System.Collections.Generic;
using System.Text;

namespace TestSingleton
{
    class Program
    {
        static void Main(string[] args)
        {
            Singleton t = Singleton.Instance;
            t.MyProperty = "Hi";

            Singleton t2 = Singleton.Instance;
            t2.MyProperty = "Hello";

            if (t.MyProperty != "")
                Console.WriteLine("No");

            if (t2.MyProperty != "")
                Console.WriteLine("No 2");

            Console.ReadKey();
        }
    }

    public sealed class Singleton
    {
        private static readonly Singleton instance = new Singleton();

        public string MyProperty { get; set; }

        private Singleton()
        {}

        static Singleton()
        { }

        public static Singleton Instance { get { return instance; } }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T11:05:51.580

事实上，这里只有**一个**实例。你得到2个指针

```
Singleton t = Singleton.Instance; //FIRST POINTER
t.MyProperty = "Hi";

Singleton t2 = Singleton.Instance; //SECOND POINTER
t2.MyProperty = "Hello"; 
```

但它们都指向**同一个**内存位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T11:08:30.720

尝试

```
Console.WriteLine("{0}, {1}", t.MyProperty, t2.MyProperty); 
```

刚刚测试了你的代码，它给出了`Hello Hello`而不是`Hi Hello`. 所以你在操作同一个实例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T11:07:37.303

实际上，您的示例程序中只有一个实例。变量 t1 和 t2 指向对象的同一个实例。您创建的对象是

```
private static readonly Singleton instance = new Singleton(); 
```

并且 t1 和 t2 都指向同一个对象。正如内存中的其他人所说，只创建了一个对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T11:07:48.083

您的**引用**是对单个对象`Singleton.Instance;`的引用`Singleton.instance`，因此是对单个对象的引用。没有创建第二个 Singleton**对象**

# php - 随机图像采集器

> ID：12581660
> 
> 赞同：0
> 
> 时间：2012-09-25T11:04:53.030
> 
> 标签：php, image, random, capture

我有一个脚本，可以在我想通过 Javascript 或 PHP 记录的页面上显示随机图像。问题是，图像源类似于 /random.php。如何在不丢失分配给该页面的实际随机数的情况下检索图像数据？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:10:27.783

这个javascript是否可以解决问题：

```
function getBase64Image(img) {
    var canvas = document.createElement("canvas");
    canvas.width = img.width;
    canvas.height = img.height;
    var ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0);
    var dataURL = canvas.toDataURL("image/png");
    return dataURL.replace(/^data:image\/(png|jpg);base64,/, "");
} 
```

使用 jQuery 选择器：

```
getBase64Image($('#omg')[0]) 
```

其中 omg 是您的图像的 id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T11:57:16.103

使用此链接的 Usahe

[http://lorempixel.com/300/300/](http://lorempixel.com/300/300/)

它使用随机图像和自定义尺寸

像这样。

```
<img src="http://lorempixel.com/300/300/"> 
```

# php - 如何为可下载文件制作临时链接

> ID：12581663
> 
> 赞同：8
> 
> 时间：2012-09-25T11:04:55.320
> 
> 标签：php, cakephp, cakephp-1.3

我正在为我制作一个临时下载链接的项目，以保护文件免受热链接...

我相信这是可能的。因为我们都知道许多文件共享网站“*不想提及任何*”......他们的文件链接已过期......

前任。

如果我从他们的网站下载一个文件，他们会提供直接链接以单击它，对吗？但是该链接将在几小时或几分钟后立即失效。

我怎么知道链接已过期？如果一天后我在下载管理器上复制相同的链接，它就无法下载相同的文件。

我已经在`htaccess`.

前任。

```
RewriteRule .*\.(rar|ZIP)$ http://domain.com [R,NC] 
```

如果他们复制浏览器地址栏中的直接链接，他们将被重定向到**[http://domain.com](http://domain.com)**

但是，如果他们在下载管理器上复制直接链接，文件将被下载。

如果他们将链接发布到任何其他网站，如论坛网站、博客等，并要求读者将链接复制并粘贴到他们的下载管理器中，这样他们就可以直接下载了。

这是我要防止保护我的文件的问题。我在 PHP 上这样做，但我无法弄清楚......

非常感激您的帮忙。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-26T01:34:37.210

链接到类似的东西`/downloads/abb76b3acbd954a05bea357144d614b4`，其中*abb...*是一个随机字符串，例如当前时间的盐渍哈希。当您为某人创建此链接时，将随机字符串存储在数据库表中。此表可能如下所示：

```
+----+-------------+----------------------------------+---------------------+---------------------+
| id | filename    | token                            | created             | modified            |
+----+-------------+----------------------------------+---------------------+---------------------+
|  1 | image.jpg   | abb76b3acbd954a05bea357144d614b4 | 2012-03-26 19:36:41 | 2012-03-26 19:36:41 |
|  2 | program.exe | 19660d0f5e0ca3d42e1718de5d0a1d7e | 2012-08-29 11:07:58 | 2012-08-29 11:07:58 |
+----+-------------+----------------------------------+---------------------+---------------------+ 
```

当您在 收到请求时`/downloads/...`，查找随机字符串并发送回正确的文件。如果`created`时间戳太旧，请不要这样做。使用 cronjob 清理旧表行，或者不太理想的是，每次有人向`/downloads/...`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:10:09.253

使用一些这样的代码

```
 $path="uploads/";
                  $actualfilename=$path.$filename;
                  $fakefilename="downloadfile.pdf";
                   if($typeofview=="download") {
                          @readfile($actualfilename);
                        header('Content-type: application/pdf');
                        header('Content-Disposition: attachment; filename="' . $fakefilename . '"');
                        header('Content-Transfer-Encoding: binary');
                        header('Content-Length: ' . filesize($actualfilename));
                        header('Accept-Ranges: bytes');
                        exit; 
```

将此添加到您的 .htaccess 文件中

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule fakefile.php(.*)$ orignalfile.php?$1 [L,QSA] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:04:47.210

我想到的解决方案如下：如果你有代表文件的表，例如 FileModel 你可以在那里保存文件的名称、一些细节、大小、文件系统中文件的路径和唯一的，这可以是您根据一些文件详细信息为它选择的一些数据的 md5 的结果，例如：

```
$data[FileModel]['unique'] = md5(time() . $data[FileModel]['file']); 
```

每次在让某人下载您的文件之前，您检查表中是否有这样的唯一值，如果是这样，您让某人使用在 FileModel 中创建的您的 downloadFile 方法下载它，但在此之前，您创建新的唯一值以防止更多下载

```
$data[FileModel]['unique'] = md5(time() . $data[$this -> name]['file']);
$this -> FileModel-> save($data[$this -> name]);
$this -> FileModel -> downloadFile($data[$this -> name]); 
```

如果您的数据库中没有这样的唯一值，那么您只会向用户显示有关超时链接的错误

```
$this -> setFlashError('link expired'); 
```

在这里，我为您提供了一个示例动作原型，您可以在控制器中开始：

```
function download($file_data = ''){
        $data = $this->FileModel->find('first', array('conditions' => array('FileModel.unique' => $file), 'fields' => array('*')));

        if(!is_array($data[FileModel])) $this -> setFlashError('link expired');

        else
        {
            $data[FileModel]['unique'] = md5(time() . $data[$this -> name]['file']);
            $this -> FileModel-> save($data[$this -> name]);
            if(!$this -> FileModel -> downloadFile($data[$this -> name]))
            {
                $this -> setFlashError('error'));
            }
        }
} 
```

您还可以创建日期时间字段，例如，您可以将 1 天添加到当前日期并检查剩余时间是否已过期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-25T17:04:47.237

我发现的那个：

```
header('Content-Type: application/force-download');
$filee = "your_file.txt";
$filesLocation = dirname(__file__).'/the_sub_folder_for_the_file/'.$filee;
header('Content-Length:' . filesize($filesLocation));
header("Content-Disposition: inline; filename=\"".$filee."\"");
$filesPointer = fopen($filesLocation,"rb");
fpassthru($filesPointer); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-16T18:57:51.313

我知道这个老问题，但我有办法在不使用数据库的情况下只下载文件 1 次，快速的方法:)

```
if( isset($_GET['file']) && file_exists($_GET['file']) )
{
    $oldName = $_GET['file'];
    $newName = md5(time()).".txt";

    if( rename($oldName, $newName) ) { // rename file to download just once
        downloadFile( $newName ); // download file function
    } else {
        echo 'this file is not exist';
    }
} 
```

# java - 在 Gemfire 缓存中写入对象作为键

> ID：12581665
> 
> 赞同：0
> 
> 时间：2012-09-25T11:05:17.850
> 
> 标签：java, caching, distributed-caching, distributed-cache, gemfire

我试图将一个对象作为 Gemfire 区域内的键。

```
TestClass keyObject = new TestClass();
region.put(keyObject, "value"); 
```

它失败并出现以下错误 -

> com.gemstone.gemfire.cache.client.ServerOperationException：com.gemstone.gemfire.pdx.PdxSerializationException：无法创建类“TestClass”的实例

请建议在存储在 gemfire 缓存区域时需要用作键的对象中需要实现的内容。

PS我已将gemfire的自动序列化属性设置为**true**，并且我在我的TestClass中覆盖了equals和hashcode，它有一个默认的空构造函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:49:12.120

如果服务器无法找到并加载有问题的类，通常会发生此错误。类 TestClass 必须添加到缓存服务器的类路径中。

对不起，如果答案对你来说太晚了——希望它能帮助其他有同样问题的人。

# java - java jvm.dll 路径

> ID：12581666
> 
> 赞同：3
> 
> 时间：2012-09-25T11:05:25.167
> 
> 标签：java, visual-c++, java-native-interface

我正在构建通过 JNI 运行 java 的 MS VC++ 项目。我在我的电脑（`jdk1.4`和`jre7`）上安装了几个 java 版本。

环境变量：

```
JAVA_HOME=C:\Program Files (x86)\Java\jre7
PATH=...
C:\Program Files (x86)\Java\jre7\jre\bin\server
C:\Program Files (x86)\Java\jre7\bin
C:\Program Files (x86)\Java\jre7\lib
C:\Program Files (x86)\Java\jre7\include
C:\Program Files (x86)\Java\jre7\include\win32
... 
```

当我试图静态调用 java 时，它试图从 jdk1.4 加载 jvm.dll 并崩溃（这是第二个问题）。我知道它正在搜索 jdk1.4，因为如果我重命名 jdk1.4 安装目录项目会告诉无法启动，因为缺少 jvm.dll。为什么项目要找jdk1.4？我已将环境变量设置为 jre7 路径。

如果我动态加载java，通过告诉加载哪个确切的dll，一切都很好。

动态加载：

```
...    
HINSTANCE ghDllInstance = LoadLibrary(L"C:\\Program Files (x86)\\Java\\jdk1.7.0_01\\jre\\bin\\server\\jvm.dll");
... 
```

# javascript - Jquery将类添加到最后5个元素

> ID：12581668
> 
> 赞同：1
> 
> 时间：2012-09-25T11:05:35.700
> 
> 标签：javascript, jquery, image

我有很多图片：

```
<img src="images/img.jpg" alt="" />
<img src="images/img2.jpg" alt="" />
<img src="images/img3.jpg" alt="" />
<img src="images/img4.jpg" alt="" />
<img src="images/img5.jpg" alt="" />
<img src="images/img6.jpg" alt="" />
<img src="images/img7.jpg" alt="" />
<img src="images/img8.jpg" alt="" /> 
```

等等...

如何仅将类添加到最后五个图像？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T11:07:32.157

您可以[`slice()`](http://api.jquery.com/slice/)为此使用：

```
$("img").slice(-5).addClass("myclass"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:26:13.777

您可以使用 jQuery 过滤器[jfiddle](http://jsfiddle.net/cLL4V/)

```
var lastimageIndex = $('img').length -1;
$('img').filter(function(index) {
    console.log(lastimageIndex - index - 6 < 0);
   return lastimageIndex - index - 5 < 0;
}).addClass("yourclass");​ 
```

# ruby-on-rails - 如何使用 squeel 对数组的结果进行连接

> ID：12581673
> 
> 赞同：0
> 
> 时间：2012-09-25T11:05:48.443
> 
> 标签：ruby-on-rails, squeel

我已经安装了[squeel](http://erniemiller.org/projects/squeel/) ，并希望执行以下操作：

```
@branches = Branch.near(@latlon) #This provides an array of nearby branches

@dispensers = Dispenser.joins{@branches} #This does not work 
```

我可以对我的分配器进行地理编码，但我通常更喜欢上面的选项，如果可能的话，使用活动记录或活动记录 + squeel。在 Rails 中必须有一些简单的方法来解决这个问题。

# jquery - 基于鼠标位置的 CSS 背景图像位置

> ID：12581674
> 
> 赞同：0
> 
> 时间：2012-09-25T11:05:50.330
> 
> 标签：jquery, css

我有一个带有背景图像的 div，它根据鼠标位置改变它的位置。它的基本作用是创建某人转过头的动画（查看[http://www.fore6.com/?p=533](http://www.fore6.com/?p=533)给你一个更好的主意。

我可以让它正常工作，但是，我有 3 个不同的图像彼此相邻。如何让每个图像独立动画？目前它们的动画是一致的，但它们的动画应该不同，因为鼠标相对于每个图像总是处于不同的位置。我在想也许我应该使用循环，但我不知道如何实现它。

我的 jQuery 代码是：

```
var aniX = null;
var aniY = null;

aniX = $('.anim-photo').offset().left;
aniY = $('.anim-photo').offset().top;

$(document).mousemove(function(event) {
    var mousePos = new Array(event.pageX, event.pageY);
    interact(mousePos, ["0px", "-288px", "-576px"]);
})

function interact(mouseCord, aniCord) {
    if (mouseCord[0] < aniX && mouseCord[1] < aniY){ // Box-1
    $(".anim-photo").css("background-position", aniCord[0]+" 0px");

} else if (mouseCord[0] > aniX && mouseCord[0] < aniX+285 && mouseCord[1] < aniY){ // Box-2
    $(".anim-photo").css("background-position", aniCord[1]+" 0px");

} else if (mouseCord[0] > aniX+285 && mouseCord[1] < aniY){ // Box-3
    $(".anim-photo").css("background-position", aniCord[2]+" 0px");

} else if (mouseCord[0] < aniX && mouseCord[1] > aniY && mouseCord[1] < aniY+357){ // Box-4
    $(".anim-photo").css("background-position", aniCord[0]+" -360px");

} else if (mouseCord[0] > aniX && mouseCord[0] < aniX+285 && mouseCord[1] > aniY && mouseCord[1] < aniY+357){ // Box-5
    $(".anim-photo").css("background-position", aniCord[1]+" -360px");

}else if (mouseCord[0] > aniX+285 && mouseCord[1] > aniY && mouseCord[1] < aniY+357){ // Box-6
    $(".anim-photo").css("background-position", aniCord[2]+" -360px");

} else if (mouseCord[0] < aniX && mouseCord[1] > aniY+357){ // Box-7
    $(".anim-photo").css("background-position", aniCord[0]+" -720px");

} else if (mouseCord[0] > aniX && mouseCord[0] < aniX+285 && mouseCord[1] > aniY+357){ // Box-8
    $(".anim-photo").css("background-position", aniCord[1]+" -720px");

} else if (mouseCord[0] > aniX+285 && mouseCord[1] > aniY+357){ // Box-9
    $(".anim-photo").css("background-position", aniCord[2]+" -720px");
}
}; 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:17:54.520

`interact(mousePos, ["0px", "-288px", "-576px"]);`使用 mousePos 为每个图像创建三个不同的调用，第二个参数是您当前正在制作动画*的对象的对象/坐标。*还为每个类创建单独的类，或者将您当前正在制作动画*的 jQuery 对象作为参数提供给您的交互函数*

# service - java7 drupal服务XmlRpcHttpTransportException：HTTP服务器返回意外状态：未经授权：用户匿名访问被拒绝

> ID：12581680
> 
> 赞同：0
> 
> 时间：2012-09-25T11:06:12.703
> 
> 标签：service, drupal-7, xml-rpc, java-7

我有一个 java web start 程序，它使用 xmlrpc 服务 3 在 drupal 7 站点上创建内容。我的代码大致基于[此](http://drupal.org/node/1267522) ，它在以下平台上运行良好：

linux x86 x64 (openjdk6-7), mac os x64 (java6 x64), windows x64 (oracle jvm x32,x64) 从java6到java7u4

从 oracle java7u5 到 java7u7 我的代码不起作用。在 u5 中，我得到了一些奇怪的 jnlp 异常，在 u6 和 u7 中，我得到了以下堆栈跟踪：

```
org.apache.xmlrpc.client.XmlRpcHttpTransportException: HTTP server returned unexpected status: Unauthorized: Access denied for user anonymous
org.apache.xmlrpc.client.XmlRpcSunHttpTransport.getInputStream(XmlRpcSunHttpTransport.java:94)
org.apache.xmlrpc.client.XmlRpcStreamTransport.sendRequest(XmlRpcStreamTransport.java:152)
org.apache.xmlrpc.client.XmlRpcHttpTransport.sendRequest(XmlRpcHttpTransport.java:143)
org.apache.xmlrpc.client.XmlRpcSunHttpTransport.sendRequest(XmlRpcSunHttpTransport.java:69)
org.apache.xmlrpc.client.XmlRpcClientWorker.execute(XmlRpcClientWorker.java:56)
org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:167)
org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:158)
org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:147)
my.program.Drupal7XmlRpc.createNode(Drupal7XmlRpc.java:223)
... 
```

但是，如果我在 windows 上从我的 eclipse IDE 运行程序，而没有 java web start，我的代码可以正常工作。我不知道这是对最新的 oracle jvms 的一些安全规定，还是我应该发布的错误。

最后一点是我的 jnlp 文件是基于[这个](http://www.eclipse.org/swt/jws/).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:33:00.860

首先，我想指出您应该发布一些代码来帮助我们开发更准确的答案。

您使用的是哪种身份验证？您是否使用**任何**身份验证？正如[这里](http://denver2012.drupal.org/program/sessions/services-inside-and-out)所说，这种问题经常发生，因为人们试图在没有首先进行身份验证的情况下创建节点。

另一方面，如果您在尝试创建节点之前已经进行了身份验证，也可能会发生此问题。这（很可能）是由于经过身份验证的用户无权创建指定内容类型的节点。

# qt - 为 QTreeWidgetItem 添加上下文菜单

> ID：12581685
> 
> 赞同：0
> 
> 时间：2012-09-25T11:06:33.400
> 
> 标签：qt, qt4

## 内部构造函数

```
connect(ui.UserSpecificMaterial_treeWidget, SIGNAL(customContextMenuRequested(const QPoint &)),this, SLOT(ContMenu(const QPoint &))); 
```

## 内槽

```
void MyContMenu::ContMenu(const QPoint &pos)
{
 QTreeWidgetItem *item = ui.UserSpecificMaterial_treeWidget->itemAt(pos);
     if (!item)
         return;
    QMenu *menu = new QMenu(ui.UserSpecificMaterial_treeWidget);
        myAction = menu->addAction("Remove");
    myAction->setIcon(QIcon(QString::fromUtf8("Resources/Remove.png")));
    myAction->setShortcut(tr("Ctrl+D"));
    myAction->setStatusTip(tr("Remove the respective material from the User DB"));
    menu->exec(ui.UserSpecificMaterial_treeWidget->viewport()->mapToGlobal(pos));
          /---code to remove the item ./ } 
```

在上面的代码中，每当我右键单击 QTreeWidgetItem 时，它都会向我显示包含一个名为 Remove 的菜单项的上下文菜单。我想要的是，只要用户当时单击该删除菜单项，它就应该从 qtreewidget 中删除该 QTreeWidgetItem 。但是在 rigtclick 之后的上述代码中，即使我单击 UI 的任何部分，它也会从 treewidget 中删除相应的 QTreeWidgetItem，这是我想避免的。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:15:40.040

您必须检查来自 QMenu::exec(...) 的返回值。

像这样：

```
QAction* item = myMenu.exec(QCursor::pos()); 
```

现在，您可以检查例如 QAction::text() 方法以查看是否实际单击了 Remove。

# c++ - 类模板上的重载方法，编译器看不到它，只看到其他重载函数

> ID：12581688
> 
> 赞同：-1
> 
> 时间：2012-09-25T11:06:50.067
> 
> 标签：c++, templates, operator-overloading

我对模板有点陌生，我正在尝试修改一些为 c++ 提供矩阵和向量操作的库，我有一个向量类，我试图重载 operator() 以便它处理像这样的操作 Vector (2:5) 将返回一个向量，其中包含原始向量的 2,3,4,5 元素，我正在使用一个名为冒号的类，其中冒号 (2:5) 将 (2:5) 效果表示为我发现 c++ 没有运算符：。希望我给了一个适当的介绍。相关代码如下

向量类

```
template< size_t M, typename T = float >
class Vector
{
public:
typedef T   value_type;
inline T& operator()( size_t index );
inline const T& operator()( size_t index ) const;
template <size_t N> Vector<N,T> operator()(const  colon &cex) const;
.
.
} 
```

以及相应的实现

```
template< size_t M, typename T >
template< size_t N>
Vector<N,T>
Vector<M,T>::operator()( const colon &cex ) const
{
long i, ii, st = 0, in = 0, en = 0, s;
cex.apply(M, st, in, en, s);
if (s && (st>0) && (st>M))
{
Vector<N,T> result;
for (i=st,ii=0;i+=in,ii++;i<=en,ii<N)
{
result(ii)=array(i);
return result;
}

}
return 0;
} 
```

这里的 return 0 只是一个占位符，它应该返回一个空向量。冒号类（取自另一个库并由我修改）。

```
class colon
{
public:
/// Colon expression '(:)'
colon() { _flag = 'a'; }
/// Colon expression of type '(2:5)'
colon(long s, long e) { _s = s; _i = 1; _e = e; _flag = 'r'; }
void apply(long s, long &f, long &i, long &l, long &n) const;

private:
/// Type of colon expression.
char _flag;
/// First index.
long _s;
/// Increment.
long _i;
/// Last index.
long _e;

}; /* class colon */ 
```

相关的实现是

```
void
colon::apply(long n, long &st, long &in, long &en,
     long &le) const
{
switch (_flag)
{
    case 'r':
        if ((_i == 0 ) || ((_e - _s) / _i < 0 )) le = 0;
        else
        {
            st = _s;
            in = _i;
            en = _e - (_e - _s) % _i;
            le = (_e - _s) / _i + 1;
        }
        break;
    case 'a':
        if (n)
        {
            st = 1;
            in = 1;
            en = n;
            le = n;
        }
        else le = 0;
        break;

 }
} 
```

用于测试功能的代码是

```
bool ok = true;

Vector< 4, double > v;
double data[] = { 1, 2, 3, 4 };

v.iter_set( data, data+4 );//just puts elements of data inside v with the same type

// test  Vector colon
{
    bool ok = true;
    Vector<3,long> test;
    test=v(colon(2,4));//Problem

} 
```

现在的错误是

```
C2664: 'const double &Vector<M,T>::operator ()(size_t) const' : 
cannot convert parameter 1 from 'colon' to 'size_t' 
```

编译器的输出是

```
error C2664: 'const double &Vector<M,T>::operator ()(size_t) const' : 
cannot convert parameter 1 from 'colon' to 'size_t'
with
[
M=4,
T=double
]
No user-defined-conversion operator available that can perform this conversion, 
or the operator cannot be called 
```

？？？帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:10:44.697

```
template <size_t N> Vector<N,T> operator()(const  colon &cex) const; 
```

本身是在 N 上模板化的，并且 N 的值不能从冒号推导出来，因此在重载集中不考虑它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:47:20.973

我有太多话要说，无法将其放入评论中，因此我将为此使用答案（尽管它不会直接回答您的问题）：

您需要知道您的用例将是什么。如果你要对运行时变量做很多事情，那么在模板中实现它是没有意义的。如果您只想使用模板，那么您也需要使用`class colon`. 我会给你一些提示。

首先，让我比评论更详细地解释您的问题。

假设我们有一个`Vector<5, int> vec;`.

案例“编译时大小”：

```
//get the entries with indices 1 to 3 (including)
Vector<3, int> vec2 = vec(colon(1, 3)); 
```

对于此代码，所有内容在编译时都是已知的，因此可以在编译时执行此操作（尽管为此目的不必要的丑陋）。

案例“运行时大小”：

```
//we get the variables a and b as input from the user at runtime
Vector<?, int> vec2 = vec(colon(a, b)); 
```

看到那些`a`和`b`变量了吗？当你编写程序时，你知道它们持有什么价值吗？不，你不能，因为用户应该输入它们。他们可能是`0:0`or`0:4`或`42:1337`，谁知道用户将输入什么（不小心）。当您不知道 的值`a`并且`b`您也不知道将代表什么时`?`，但是您必须在编译时知道，因为每个模板参数都必须在编译时知道。

现在你需要知道你想做什么。您是想使用`a:b`（运行时参数）还是只想输入常量，例如`1:3`（编译时参数）。根据这个你需要选择，如何实现`Vector<n,T>::operator()`。

您会看到：一旦 的大小`Vector`取决于运行时值，它就无法在编译时确定，因此不可能返回正确大小的向量。

但是，您可以实现一个编译时大小和一个运行时大小的向量和冒号类，以便以更复杂的实现为代价来启用两者。他们会给出以下模式：

```
CompileTimeVector CompileTimeVector::operator()(CompileTimeColon);
RunTimeVector CompileTimeVector::operator()(RunTimeColon);
RunTimeVector RunTimeVector::operator()(CompileTimeColon);
RunTimeVector RunTimeVector::operator()(RunTimeColon); 
```

这种模式对于任何在 Vector 和冒号的运行时和编译时类型之间进行互操作的操作都是必需的。

# php - 如何在没有重复的情况下将文本存储在数据库中，并且单词顺序无关紧要？

> ID：12581694
> 
> 赞同：1
> 
> 时间：2012-09-25T11:07:09.877
> 
> 标签：php, mysql, sql, database

所以我想将我网站上的搜索存储在数据库中，我希望它们是唯一的，即使单词的顺序对我来说并不重要，例如：

```
some words 
```

和

```
words some 
```

对我来说都是一样的，我只想更新上次搜索的时间。

那么有没有办法在 SQL（如 UNIQUE）中做到这一点，或者我应该在服务器端语言中找到解决方案？

并提前感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:12:38.590

我不知道是否有更好的方法来做到这一点，但我能想到的唯一方法是在 PHP 中你用空格分割字符串，然后按字母顺序排列：

```
$words = explode(" ", $keywords);
sort($words);
$sorted_keywords = implode(" ", $words); 
```

然后，当您从数据库存储/搜索时，无论单词 WERE 的顺序如何，您都将始终使用相同的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:10:58.403

```
$words = preg_split("\b", $words);
sort($words);
implode(" ", $words); 
```

如果你肯定用空格分隔单词，你也可以在空格上爆炸，你也可以使用`array_unique`。这将是一个列出搜索词的排序字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:11:41.200

我严重怀疑 DBMS 是否提供了这种开箱即用的功能。您需要以这样的方式规范您的搜索文本

```
normalize("some words") = normalize("words some") 
```

然后您可以将规范化版本存储在数据库中，并在遇到导致相同规范化形式的不同搜索文本时对其进行更新。

# c++ - 为什么我的 C++/CX 单元测试没有失败？

> ID：12581714
> 
> 赞同：0
> 
> 时间：2012-09-25T11:07:52.187
> 
> 标签：c++, unit-testing, windows-runtime, visual-studio-2012, c++-cx

我在 VS 2012 C++/CX 中有以下“Windows Store/Metro Style”测试方法

这个成功了，还行

```
TEST_METHOD(TestMethod)
{
    bool passed = false;
    concurrency::event finished;
    finished.reset();                                   
    auto testTask = concurrency::create_task( [&finished, &passed]()
    {   
        passed = true;
        finished.set();
    }); 
    finished.wait(100000);
    Assert::IsTrue(passed);
} 
```

这个失败了，这也没关系：

```
TEST_METHOD(TestMethod)
{
    bool passed = true;
    concurrency::event finished;
    finished.reset();                                   
    auto testTask = concurrency::create_task( [&finished, &passed]()
    {   
        passed = false;
        finished.set();
    }); 
    finished.wait(100000);
    Assert::IsTrue(passed);
} 
```

但由于某种原因，这个测试并没有失败：

```
TEST_METHOD(FailedTest)
{
    concurrency::event finished;
    finished.reset();                                   
    auto testTask = concurrency::create_task( [&finished]()
    {   
        Assert::IsTrue(false);
        finished.set();
    });
    finished.wait(100000);          
} 
```

难道我做错了什么？

作为旁注，一种可能的解决方法是将我的所有测试结果放入变量中并在之后“测试”它们`finished.wait(100000);`，但我仍然想知道我正在做的事情是否真的有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:23:38.077

测试确实失败了。如果您打开 Tests Output 窗口（*View -> Output*，然后在*Show output from*下，选择*Tests*），您应该会看到以下内容：

> 由于执行过程意外退出，活动的测试运行被中止。要进一步调查，请在计算机级别或进程 vstest.executionengine.appcontainer.x86.exe 启用本地故障转储。转到更多详细信息：http: [//go.microsoft.com/fwlink/ ?linkid=232477](http://go.microsoft.com/fwlink/?linkid=232477)

在*测试资源管理器*中，测试应该显示为灰色，因为测试未能运行完成。不幸的是，由于测试运行完全失败，如果测试在过去的任何时间通过，该测试仍然出现在*Passed Tests*组中，并且旁边仍然有一个绿色复选标记。依靠灰显的名称作为测试未运行完成的指示。

在这种情况下，我建议在[Microsoft Connect](http://connect.microsoft.com/VisualStudio)上打开一个关于测试资源管理器中令人困惑的 UI 的错误（如果您打开错误，请将链接作为对此答案的评论或您的问题发布，以便其他人可以找到它）。

# svn - 尝试执行 svn 更新时，提交后挂钩会出现分段错误

> ID：12581717
> 
> 赞同：0
> 
> 时间：2012-09-25T11:08:04.807
> 
> 标签：svn, segmentation-fault, fault

从 post-commit 钩子或 php 页面 [exec('svn up /var/www/test)] 执行 svn update。出现问题并返回分段错误错误。

如果我尝试`svn commit`从 php 页面执行（有或没有用户和密码），也会发生同样的情况。

`var/svn`(www-data owner) 644 权限中的存储库。(www-data owner) 644
中的工作副本。`var/www/`

我尝试使用 chmod 777`var/www/test`但发生了同样的错误。

有人可以告诉我为什么会出现这个错误？

*   虚拟机上的 Ubuntu 11.10 服务器（主机 Windows 7 64）

*   SVN 1.7.6

*   php 5.3.6-13 ubuntu3.8

*   Apache/2.2.20 (Ubuntu)

*   以 www-data 权限运行的 Svnserve

# matlab - find(isnan) 的对面

> ID：12581724
> 
> 赞同：3
> 
> 时间：2012-09-25T11:08:34.750
> 
> 标签：matlab, if-statement, nan

我正在测试一个向量以查看它是否包含任何 NaN。如果是这样，那么我不希望执行我的操作。如果它不包含 NaN，则应执行该操作。目前，我的代码如下所示（并且有效）：

```
if find(isnan(myVector))
else
    action;
end 
```

由于该部分中没有任何内容，因此`if`根据该条款采取我的行动`else`似乎很草率。我该如何改写块，这样我就不需要使用`else`?

我已经尝试过以下方法：

```
if ~find(isnan(myVector))
if find(~isnan(myVector))
if find(isfinite(myVector)) 
```

澄清一下，我的输入向量可以包含任意数量的 NaN，但我*只*想要 'action;' 如果根本没有就执行。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T11:12:35.150

```
if all(~isnan(myVector))
    action;
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:12:09.110

尝试：

```
if isempty(find(isnan(myVector)))
    action;
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T11:14:28.223

看看[这个问题](https://stackoverflow.com/q/1713724/1324631)。如果您的数据集足够小，您可以尝试找到所有 NaN 元素然后计算它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T11:14:50.857

问题是 find 是返回一个向量而不是一个布尔值。你想要的是这样的：

```
length(find(isnan(myVector))) == 0 
```

虽然我承认我不记得 matlab 如何比较向量。

# php - 修复链接以返回表单或主页

> ID：12581727
> 
> 赞同：0
> 
> 时间：2012-09-25T11:08:50.203
> 
> 标签：php

我有点迷茫，我试图在用户提交表单时为每条错误消息放置一个链接以返回到“表单”页面或“主页”页面。同样，当用户成功提交表单时，它会提供返回表单页面或主页的链接。基本上我想要一个修复链接返回到表单或主页。谢谢你们，请让我知道我能做什么或指导我。

到目前为止，这是我的流程部分代码：

```
<?php
//
//umask(0007)
//mkdir($newdir, 02770);
//$filename = "../../data/status.txt";

$errors = array();
$permissionsArray = (isset($_POST['permission']) ? $_POST['permission'] : null);

if (isset($_POST["statuscode"])) 
{
    $statusCode = $_POST["statuscode"];
    $patternCode = "/^S[0-9]{4}$/";
    if (preg_match($patternCode, $statusCode)) 
    {
        $ans = "";
        $length = strlen($statusCode);
        echo $statusCode . "<br />";
    }
}
else
{
    array_push($errors, "Please fill in Status Code as they are mandatory field");
}

if (isset ($_POST["status"])) 
{
    $status = $_POST["status"];
    $pattern = "/^[a-zA-Z0-9\s\.,!?]*$/";
    if (preg_match($pattern, $status)) 
    {
        echo $status . "<br />";
    }
}
else
{
    array_push($errors, "<b>Error:</b> Please fill in Status as they are mandatory field!");
}

if (isset ($_POST["share"])) 
{
    $shareButton = $_POST["share"];
    echo $shareButton . "<br />";
}
else
{
    //Not possible unless in exceptional circumstances
    array_push($errors, "Please choose a share");
}

if (!isset($_POST["date"])) 
{
    $date = date("d/m/y");
    echo $date . "<br />";
} else {
    $date = $_POST["date"];
} 

if (isset($permissionsArray)) 
{
    foreach($permissionsArray as $permission){
        echo $permission . "<br />";
    }
}

if(isset($statusCode, $status))
{
    if(empty($statusCode) || empty($status))
    {
    array_push($errors, "Please fill in the required part!");
    }
    if (0 === strlen($statusCode > 5 || $statusCode < 5)) 
    {
        array_push($errors, "<b>Error:</b> You characters length is either less or more than 5 characters<br/>");
    }
    if (0 === preg_match("/\S+/", $statusCode)) 
    {
        array_push($errors, "<b>Error:</b> You forgot to fill in Status Code!<br/>");
    }
    if (0 === preg_match("/\S+/", $status)) 
    {
        array_push($errors, "<b>Error:</b> You forgot to fill in the Status! <br/>");
    }
    if (0 === preg_match($patternCode, $statusCode)) 
    {
        array_push($errors, "<b>Error:</b> please make sure that the first letter in Status Code is uppercase 'S' following by 4 numbers. <br/>");
    }
    if (0 === preg_match($pattern, $status)) 
    {
        array_push($errors, "<b>Error:</b> Please make sure to avoid symbols other than \",.?!\" <br/>");
    }
}

if (isset($errors)) 
{
    foreach ($errors as $error) 
    {
        echo '<strong>', $error, '</strong>';
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:11:25.993

您可以使用链接`history.go(-1)`在 Javascript 中调用，这实际上与单击浏览器中的后退按钮相同。

例如在 PHP（你的文件）中，这将是：`echo "<a href=\"javascript:history.go(-1)\"> GO BACK </a>";`

**编辑：**

那么严格的PHP？那么试试这个：

```
header('Location: ' . $_SERVER['HTTP_REFERER']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:28:47.777

用这个

```
$ref = $_SERVER['HTTP_REFERER'];
header("Location:".$ref); 
```

$_SERVER['HTTP_REFERER'] 为您提供重定向的 URL。

# mysql - 将mysql字符串转换为定时事件中定义的mysql变量

> ID：12581728
> 
> 赞同：0
> 
> 时间：2012-09-25T11:09:10.343
> 
> 标签：mysql, date, intervals, timing

我已将定时事件保存在数据库中。这些事件是每年，每季度，每月，每周和每天。所以我添加了一个表来存储它的事件类型。

现在我只想选择今天需要完成的事件**。**所以我想选择事件的开始日期，添加时间（YEAR、QUARTER 等），然后查看该日期是否是今天的日期。

这将是 where 语句：

```
WHERE (
    DATEDIFF(NOW(),
        DATE_ADD(
            IFNULL(
                timer.last_trigger,
                timer.start_date
            ), 
            INTERVAL 1 timer.period_type
         )
    )
) = 0 
```

查询在它说的地方中断：

```
INTERVAL 1 timer.period_type 
```

因为那应该是这样的：

```
INTERVAL 1 YEAR 
```

所以我想将我的“变量”`timer.period_type`与值`'YEAR'`转换为定义的 mysql var `YEAR`。如果是季度、月、周或日，同样的事情。

有没有办法做到这一点，或者有解决方法吗？也许可以更改的列类型`timer.period_type`？想要防止使用 PHP 循环遍历数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:22:11.137

当然，有解决方法，你可以使用一个`CASE`语句，例如：

```
SELECT BLA-BLA-BLA
/*MORE CODE HERE*/

WHERE (
  DATEDIFF(NOW(),
    CASE timer.period_type 
    WHEN 'YEAR' THEN 
      DATE_ADD(IFNULL(timer.last_trigger,timer.start_date), INTERVAL 1 YEAR)
    WHEN 'MONTH' THEN
      DATE_ADD(IFNULL(timer.last_trigger,timer.start_date), INTERVAL 1 MONTH)
    WHEN 'WEEK' THEN
      DATE_ADD(IFNULL(timer.last_trigger,timer.start_date), INTERVAL 1 WEEK)
    WHEN 'DAY' THEN
      DATE_ADD(IFNULL(timer.last_trigger,timer.start_date), INTERVAL 1 DAY)
    END
  )
)= 0 
```

# jquery - 选中复选框时启用或禁用 td 内的文本框

> ID：12581730
> 
> 赞同：-2
> 
> 时间：2012-09-25T11:09:41.460
> 
> 标签：jquery, asp.net-mvc

我的 Edit.cshtml -

```
<table id="scDetails" class="dataTable">
        <thead>
            <tr>
                <th>RItem</th>
                <th>IChecked</th>
                <th>Notes</th>
            </tr>
        </thead>
        <tbody>
           @foreach (var fback in Model.Fbacks)
            {
                <tr>
                    <td>@Html.HiddenFor(m => fback.FItem)

                        @Html.DisplayFor(m => fback.RItem)
                    </td>
                    <td>@Html.CheckBoxFor(m => fback.IChecked)</td>
                    <td>@Html.TextBoxFor(m => fback.Notes)</td>
                </tr>
            }
        </tbody>
    </table> 
```

选中表行上的“iChecked”复选框时，应禁用文本框“Notes”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:18:21.837

如果您使用的是 jQuery：

```
$(function() {
    $('#scDetails tbody input[type="checkbox"]').click(function() {
        var notes = $(this).closest('tr .notes');
        notes.prop('disabled', $(this).is(':checked'));
    });
}); 
```

只需为您的文本框提供`notes`类名，以便之前的选择器正常工作：

```
<td>@Html.TextBoxFor(m => fback.Notes, new { @class = "notes" })</td> 
```

备注：[`.prop()`](http://api.jquery.com/prop/)我的示例中使用的函数是在文本框上设置禁用或只读等属性的推荐方法。它从 jQuery 1.6 开始可用。如果您使用的是旧版本的 jQuery，您可以使用该[`.attr()`](http://api.jquery.com/attr/)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:14:54.073

```
<script language="javascript">
<!--    
function fnDisabled(trecval)
    {
        if(trecval=="2")
        {
            document.getElementById('inputname').disabled=true;
        }
    }
</script> 
```

# java - 我想在用户使用我的应用程序之前执行登录

> ID：12581731
> 
> 赞同：1
> 
> 时间：2012-09-25T11:09:42.347
> 
> 标签：java, login

你好，我想知道你是否可以帮助我。我的应用程序上有一个登录表单或框架。它有用户名和密码文本字段，我的应用程序连接到访问数据库。我希望用户在可以在应用程序上执行其他操作之前登录。在visual basic中是小菜一碟，但在java中是一块石头，这是我拥有的代码

```
import java.sql.*;

public class Login1 extends  JavaApplication1
{

    private static Connection conn;
    static Statement state;
    public static void login()
    {
        String url = "jdbc:odbc:Java_Testing";            
        try
        {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            conn = DriverManager.getConnection(url);
            System.out.println("The driver was loaded successfully");
        }
        catch(ClassNotFoundException error)
        {
            System.out.println("Unable to load the driver" + error);
        }
        catch(SQLException error)
        {
            System.out.println("Could not connect to the database" + error);
        } 

        try
        {
            String query1 = "SELECT Username , User_Password From Users Where Username = ('"+ JavaApplication1.txtUsername.getText() + "' AND User_Password ='" + JavaApplication1.txtPassword.getText() + "')";
            state = conn.createStatement();

            ResultSet results = state.executeQuery(query1);
            System.out.println("Congradulations you have succefully loged in");                     
        }   
        catch(Exception error)
        {
            System.out.print("Enable to login the user: " + error);
        }            
    }
} 
```

`JavaApplication1`只是另一个进行所有事件处理并具有 awt 控件的类。

当我运行此代码时，这是我得到的错误

```
Unenable to to login the user: java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] Data type mismatch in criteria expression. 
```

如果您有答案，请分享并再次查看第二个尝试块，我知道问题出在哪里。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:17:00.293

您忘记在 URl 中提供数据库登录凭据

```
 String url = "jdbc:odbc:Java_Testing;user=dbusername;password=passwordfordb"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:17:18.017

您的 SQL 不正确。你的括号放错地方了。

```
SELECT Username , User_Password From Users 
Where Username = ('txtUsername' AND User_Password ='txtPassword') 
```

由于您似乎不需要它们，我会从 SQL 中删除括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:21:12.893

查看您的错误，我可以说存在数据类型不匹配，这意味着您传递的值的数据类型与您在数据库中声明的数据类型不匹配。所以只需在数据库中检查数据类型。

# jquery - 悬停在隐藏图像的图层上不起作用（IE9），适用于 Firefox 和 chrome

> ID：12581733
> 
> 赞同：0
> 
> 时间：2012-09-25T11:09:45.243
> 
> 标签：jquery, css, internet-explorer, positioning

请参阅所有代码的问题[描述：](http://pastebin.com/VaPqNh7Q)

摘要：（基本上是制作图像地图）

*   我有一个相对定位的 div（我将其称为容器 :)），包含 1 个图像和几个带有自己图像的 div 标签。
*   容器正下方的图像是背景图像。
*   容器下的 div 绝对定位在背景图像之上，宽度和高度设置为允许调用捕获“悬停”。
*   这些 div 下的图像在开始时被隐藏（图像尺寸用于它们各自 div 的宽度和高度）。
*   当悬停发生在这些 div 之一时，它包含的图像变得可见）

==> 定位和隐藏显示都是通过 jquery 完成的，有关详细信息，请参阅帖子顶部的 pastebin 链接。

这在 chrome 和 firefox 中运行良好，但在 IE9 上测试时，悬停不起作用。我曾尝试使用 div 的 z-index，但无济于事。有人可以阐明这个问题吗？

请参阅所有代码的问题[描述：](http://pastebin.com/VaPqNh7Q)

谢谢！

编辑：从提供的代码创建了一个[jsfiddle ：](http://jsfiddle.net/gupb3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:49:14.450

删除 console.info 行。

控制台仅适用于 javascript 调试器。

另请参阅：[“控制台”是 Internet Explorer 的未定义错误](https://stackoverflow.com/questions/3326650/console-is-undefined-error-for-internet-explorer)

# ruby-on-rails - 将 form_for 对象传递给 rjs 中的部分对象

> ID：12581736
> 
> 赞同：0
> 
> 时间：2012-09-25T11:09:58.853
> 
> 标签：ruby-on-rails

我有一个带有字段位置的表格。根据选择的位置值，显示一个部分。

```
<% form_for @expression, :url => { :controller => "expressions", :action => "update" } do |f| %>

Location: <%= f.select(:lcn_location, [['loc_A', 'loc_A'],
    ['loc_B', 'loc_B'],
    ['loc_B', 'loc_B']
  ]) %>

<!--observe location field-->
<%= observe_field(form_tag_id(f.object_name,:lcn_location),
  :url => {:controller => 'expressions',
    :action => :display_field},
  :with => "'location_value='+value+'&form_object=#{f}'"   //here i am passing the form object
) %>

<% end %> 
```

**display_field.rjs

```
if (params[:location_value] == 'loc_A')
   page.replace(div_id,  :partial => "adjacent_to_location", :locals => {:f => params[:form_object]} );
else
 page.replace_html div_id, 'Hello World!'
end 
```

**_adjacent_to_location.html.erb

```
<%= f.text_field  :lcn_adjacent_to , { :size => 55} %> 
```

我的问题是如何使用 rjs 将表单对象传递给部分？以上不起作用。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:12:42.977

改变

```
<%= f.text_field  :lcn_adjacent_to , { :size => 55} %> 
```

到

```
<%= text_field_tag :expression, :lcn_adjacent_to , { :size => 55} %> 
```

# android - Android 如何在超类中设置标题

> ID：12581746
> 
> 赞同：0
> 
> 时间：2012-09-25T11:10:43.010
> 
> 标签：android, inheritance, titlebar

我有一组`activities`都扩展了一个`baseActivity`.

我正在尝试设置它，`title in the BaseActivity`以便它反映在所有子活动中。

该应用程序正在登录用户。我试图`username across the title`在他们登录后进入每个屏幕。

```
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

    public class NfcBaseActivity extends Activity{

        private static final String TAG = NfcBaseActivity.class.getSimpleName(); 
        String carername;

        public String getCarername() {
            return carername;
        }

        public void setCarername(String carername) {
            this.carername = carername;
            Log.e(TAG, "setting carername to " + this.carername);
            setTitle(carername + " is currently logged in");
        }

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            //setTitle(getCarername() + " is logged in");
        }

    }   

    @Override
        protected void onCreate(final Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.entryscreen); 
            nfcscannerapplication = (NfcScannerApplication) getApplication();
            //loginWebservice = new LoginWebservice(this);
            loginWebservice = nfcscannerapplication.loginWebservice;
            userName = (EditText)findViewById(R.id.username);
            passwordPin = (EditText)findViewById(R.id.password);

            login = (Button)findViewById(R.id.buttonlogin);
            login.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    ////////////get user's input///////////

                     compId = "100";
                    String theUsername = userName.getText().toString();
                    thePassword = passwordPin.getText().toString();
                    String loginType = "1";

                    String[] params = new String[]{compId, theUsername, thePassword, loginType};

                    //validate user Asynchonously on background thread

                    AsyncValidateCarer avc = new AsyncValidateCarer();
                    avc.execute(params);
                EntryActivity.this.setCarername(fullName);

                }// end of onclick
            }); 
```

我调用`AsyncTask`which 验证用户是否针对 web 服务，然后将实例变量 fullName 设置为用户名。

这个 AsyncTask 是从 Activity 的`onClick()`. 我使用下面的方法来调用活动的超类方法`setcarer()`，该方法在超类中设置标题。

我希望这种变化会反映在所有其他扩展超类的类中。

为什么这没有得到反映？

```
EntryActivity.this.setCarername(fullName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:19:06.180

可能是因为您的`fullName`变量在调用时仍然为空`EntryActivity.this.setCarername(fullName);`。

我假设您在 AsyncTask 中的某处设置了此变量，因此您必须调用AsyncTask`EntryActivity.this.setCarername(fullName);`的`onPostExecute`方法，因为`avc.execute(params);`无需等待 AsyncTask 完成即可继续。

# sql-server-2008 - 从一个表插入到另一个表

> ID：12581750
> 
> 赞同：1
> 
> 时间：2012-09-25T11:10:49.400
> 
> 标签：sql-server-2008

我正在处理一个未规范化的数据库，并且由于我没有权限而无法对其进行规范化。问题是

我有两张桌子

*   **Gl_Account**
*   **试算表**

表的结构就像

**Gl_Account（空表或一些旧数据）**

```
loc  |  gl_acct  |  HMISTOTAL
-------------------------------
     |           |
------------------------------- 
```

**试算表**

```
loc   |    g1101    |   g1102   | g1103
----------------------------------------
1400  |     20      |    30     |  0
----------------------------------------
1500  |     10      |    0      |  40
---------------------------------------- 
```

现在我想做的是

**从trialBalance**表中获取不在**Gl_Account**表中的记录，并使用相应的 GL_acct 编号，其中相应**gXXXX**（在试算表中）下的金额不为零

 ****让我用一个例子来解释它。牢记上表，我想将表 GL_Account 填写为

**GL_Account**

```
 loc      |    gl_acct      |  HMISTOTAL
    ---------------------------------------
       1400  |      1101       |   20
    ---------------------------------------
       1400  |      1102       |   30
    ---------------------------------------
       1500  |      1101       |   10
    ---------------------------------------
       1500  |      1103       |   40
    --------------------------------------- 
```

我已经尝试过这个查询，但它只有捕获的第一条记录被输入到 gl_accountt 表中。我暂时跳过了金额部分..但它是必需的。

```
insert into Gl_Account (loc,gl_acct,HMISTOTAL)
  select * from (
                select a.loc,
                 CASE
                 WHEN a.G1101 <> 0 THEN '1101'
                 WHEN a.G1102 <> 0 THEN '1102'
                 WHEN a.G1104 <> 0 THEN '1104'
                 WHEN a.G1151 <> 0 THEN '1151'
                 END AS gl_Acct
               '0' as HMISTOTAL
                  FROM trialBalance a where NOT EXISTS
                         (SELECT 1 from GL_Account b WHERE b.loc = a.loc)) ab 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T12:05:33.993

如果您在 TrialBalance 中的记录有限且不超过 100 万条记录，最简单的方法是使用下面的 union，但您也可以将其写为 loop ，我不知道哪个对您更有效

```
Select loc,HMISTOTAL,gl_acct from(
SELECT   [Trial Balance].loc, [Trial Balance].g1101 AS HMISTOTAL, '1101' AS gl_acct
FROM         [Trial Balance] LEFT OUTER JOIN
                      [Gl_Account] ON [Trial Balance].g1101 = [Gl_Account].gl_acct AND [Trial Balance].loc = [Gl_Account].loc

Union
                      SELECT   [Trial Balance].loc, [Trial Balance].g1102 AS HMISTOTAL, '1102' AS gl_acct
FROM         [Trial Balance] LEFT OUTER JOIN
                      [Gl_Account] ON [Trial Balance].g1101 = [Gl_Account].gl_acct AND [Trial Balance].loc = [Gl_Account].loc

Union
                      SELECT   [Trial Balance].loc, [Trial Balance].g1103 AS HMISTOTAL, '1103' AS gl_acct
FROM         [Trial Balance] LEFT OUTER JOIN
                      [Gl_Account] ON [Trial Balance].g1101 = [Gl_Account].gl_acct AND [Trial Balance].loc = [Gl_Account].loc) x

where HMISTOTAL >0
Order By loc,HMISTOTAL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:24:14.420

试试这个。

```
INSERT INTO Gl_Account (loc,gl_acct,HMISTOTAL)
  SELECT * FROM (
                SELECT trialBalance .loc,
                 CASE
                 WHEN a.G1101 <> 0 THEN '1101'
                 WHEN a.G1102 <> 0 THEN '1102'
                 WHEN a.G1104 <> 0 THEN '1104'
                 WHEN a.G1151 <> 0 THEN '1151'
                 END AS gl_Acct
               '0' AS HMISTOTAL
                  FROM 
                    trialBalance LEFT JOIN GL_Account 
                    ON trialBalance.loc = GL_Account.loc
                  WHERE 
                    GL_Account.loc IS NULL
                  ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T11:35:56.460

这将获得您指定的结果：

```
SELECT  loc,
        gl_acct,
        CASE gl_acct
            WHEN '1101' THEN g1101 
            WHEN '1102' THEN g1102
            WHEN '1103' THEN g1103 
        END AS HMISTOTAL
FROM    trialBalance a
JOIN (
        VALUES  ('1101'), 
                ('1102'),
                ('1103')
        ) c(gl_acct) ON
        (a.g1101 <> 0 AND gl_acct = '1101') OR
        (a.g1102 <> 0 AND gl_acct = '1102') OR
        (a.g1103 <> 0 AND gl_acct = '1103')
WHERE   NOT EXISTS
(
    SELECT  1
    FROM    GL_Account x
    WHERE   x.loc = a.loc
) 
```

我使用`VALUES`行构造函数创建了一个包含要加入的值的临时表。****

# java - sun-jaxws.xml - 什么时候需要，什么时候不需要？

> ID：12581751
> 
> 赞同：29
> 
> 时间：2012-09-25T11:10:54.010
> 
> 标签：java, web-services, jax-ws

我对 JAX-WS 进行了高度概述，并注意到了一些对`sun-jaxws.xml`（以及`com.sun.xml.ws.transport.http.servlet.WSServletContextListener`and `com.sun.xml.ws.transport.http.servlet.WSServlet`）的引用。

在什么情况下需要这个？（我认为 JSR 109 服务器？！）

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-25T17:32:39.247

`sun-jaxws.xml`是使用 SUN 的参考实现将 Web 服务作为标准`WAR`存档部署在非 Java EE5 servlet 容器上时所需的专有部署描述符。

Sun 的 RI`WSServletContextListener`用作 servlet 上下文事件的侦听器和`WSServlet`调度程序 servlet；两者都必须在`web.xml`. 然后需要该`sun-jaxws.xml`文件来定义 Web 服务端点，`WSServlet`以使其知道必须将服务请求分派到哪个端点。

通过这种方式，Web 服务可以在任何`JAX-WS`启用了 RI 的 servlet 容器中运行，尽管它们不是可移植的。

符合 Java EE 5+ 的应用程序服务器（例如[参考实现 Glassfish）](http://jax-ws.java.net/)符合 JSR 109 ( `Web services 1.2/1.3`) 和 JSR 224 ( `JAX-WS 2.0/2.1/2.2`) 并且不需要非标准`sun-jaxws.xml`部署描述符。

请在此处查看更多信息：

[http://jax-ws.java.net/nonav/2.2.1/docs/UsersGuide.html#1.0_Introduction](http://jax-ws.java.net/nonav/2.2.1/docs/UsersGuide.html#1.0_Introduction)

[http://www.ibm.com/developerworks/java/library/j-jws9/index.html](http://www.ibm.com/developerworks/java/library/j-jws9/index.html)

# c# - 如何在接口中的方法上使用等待

> ID：12581764
> 
> 赞同：30
> 
> 时间：2012-09-25T11:12:01.620
> 
> 标签：c#, .net-4.5, async-await

*当使用await*关键字实现接口（因为模拟、远程处理或类似）并具有返回 Task<> 方法的接口时：

```
interface IFoo
{
    Task<BigInteger> CalculateFaculty(int value);
} 
```

编译器出现错误：

> 'await' 运算符只能在异步方法中使用。考虑使用“异步”修饰符标记此方法并将其返回类型更改为“任务”

考虑到返回类型是“任务”，这有点不寻常。*这个问题有点令人沮丧，并迫使我使用延续样式*“回退”或围绕此接口提供额外的代理（因此对于几乎每个对我来说都不可行的接口）

有没有人知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-25T11:17:38.983

消息不是关于接口的，而是关于调用方法的。您需要使用修饰符标记包含`await`关键字的方法：`async`

```
public interface IFoo
{
    Task<int> AwaitableMethod();
}

class Bar
{
    static async Task AsyncMethod() // marked as async!
    {
        IFoo x;
        await x.AwaitableMethod();
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-25T11:14:41.417

这一定没问题：

```
interface IFoo
{
    Task<BigInteger> CalculateFaculty(int value);
}

public class Foo: IFoo
{
  public async Task<BigInteger> CalculateFaculty(int value)
  {
    var res =  await AsyncCall();
    return res;
  }
} 
```

* * *

用法：

```
 public async Task DoSomething(IFoo foo) 
 { 
   var result = await foo.CalculateFaculty(123); 
 } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T10:02:22.960

编译器消息不在接口上的用法上。当在操作上遇到适当的等待时，它是由运行时实现的对任务的异步请求。

用法应该在方法实现上，即。班上; 接口用法与接口中的 setter 和 getter 相同。

# .net - Unity 3D 连接到 (MS)SQL 服务器

> ID：12581767
> 
> 赞同：0
> 
> 时间：2012-09-25T11:12:20.557
> 
> 标签：.net, sql-server, database-connection, unity3d

我有一个学校项目 - 连接到 MSSQL 数据库，获取特定设备的一些数据，然后统一绘制一个图形，该图形将与一些 3D 对象（建筑物中的设备等）绑定，我有时间到 12 月。它可以是桌面应用程序或 Web 应用程序，或两者兼而有之。但我不知道，如果在一些免费的网络服务器上我可以使用 Unity3D 和我要求的技术。

我正在浏览互联网，但我找不到（即使在 Unity3D 文档中），它究竟是如何工作的，我的意思是：Unity 运行在哪种技术上，它使用了哪些技术，或者可以使用哪些技术。我在论坛上发现了一些尖锐的东西，但你知道...

我希望，有可能如何以某种方式使用 .NET 连接到 MSSQL 服务器......但我正在寻找其他方式，如何连接到数据库。我找到[了 SmartFoxServer](http://www.smartfoxserver.com/)，它看起来很棒，但也许没有必要？有些人建议编写自己的套接字，但我没有在这么短的时间内这样做的技能（如果我考虑到，我不知道 Unity 是如何工作的）。

我从 Unity 开始，所以也许有人知道一本关于我的问题的好书。我只发现了游戏开发，但没有发现 Unity 本身。

谢谢很多人。

（如果有的话，我的 Skype：teddinka1）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-05T21:16:01.930

这是一个快速教程如何实现这一点：[https ://roderickvella.wordpress.com/2014/08/04/write-data-from-unity-3d-to-sql-server-using-asp-net/](https://roderickvella.wordpress.com/2014/08/04/write-data-from-unity-3d-to-sql-server-using-asp-net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:07:37.370

[关于 SQL 服务器连接，这个答案可能是连接到 sql 数据库](http://answers.unity3d.com/questions/8171/connect-to-the-sql-database.html)的一个很好的起点。

更大的问题将是找到一个提供 MS SQL 服务器的免费主机，但我认为你学校的 Intranet 中应该有一切。因此，我建议将重点放在独立客户端上。无论如何，您可以轻松生成 Web 应用程序并将其放在任何服务器上的某个可访问目录中，但是 Web 应用程序通常会在访问限制、数据库连接等方面产生更多麻烦......

在 Unity 中进行开发非常简单且有据可查。[从手册中的基础](http://docs.unity3d.com/Documentation/Manual/UnityBasics.html)开始，然后继续阅读您感兴趣的部分并查看示例项目。此外，Unity 的资产商店中还有完整的项目（其中一些是免费的）。

# asp.net - 果园cms模块编译

> ID：12581772
> 
> 赞同：1
> 
> 时间：2012-09-25T11:12:51.620
> 
> 标签：asp.net, asp.net-mvc, routes, orchardcms

我正在开发一个 Orchard 模块，它里面有一个 Route。在预编译的编译下它是 404s，如果我删除 bin dir（动态编译），那么 Route 就可以工作。有什么想法吗？该 dll 位于 App_Data/Dependencies 目录中，有时也带有 .deleted 副本。如果我反编译程序集，则内容是正确的。以前没有见过这种行为，可以安装我自己的其他模块并且路由工作正常。使用最新的 Orchard 1.5.1 二进制安装。

**更新**

切换到 1.x 分支上的最新变更集，一切都很好吗？有一个 zip，将尝试在 codeplex 上记录一个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:54:08.650

今天安装VS2012后我遇到了同样的问题。使用 Orchard 1.5.1，我的自定义模块不会被加载，并且在重新编译后，我的自定义模块中的所有路由都得到 404。我发现对 System.Web.Mvc 的引用已更改为版本 4.0.0.0。使用版本 3.0.0.0 重新添加引用为我解决了这个问题。

另一种方法是升级到使用 MVC4 的 Orchard 版本 1.6，但在我的情况下这不是一个选项，因为它需要 .Net Framework 4.5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:06:58.467

好吧，首先尝试删除（或重命名）完整的 App_Data/Dependencies 文件夹，它将在启动时重建。

# asp.net-mvc - 用户使用 IE 时不呈现 Ajax.Actionlink 的一种方法

> ID：12581774
> 
> 赞同：0
> 
> 时间：2012-09-25T11:13:03.007
> 
> 标签：asp.net-mvc, html-helper, ajaxhelper

我有以下问题。如您所知，即当前版本不支持 pushstate html5 功能。因此，当用户是 ie 时，我不想使用 Ajax 呈现我的内容。

我想实现这一点的最佳方法是使用 Ajax 助手的扩展，当检测到的浏览器不是 ie 时返回 ajax.actionlink，当用户的浏览器是 ie 时返回标准 (html.routelink)。

在进行扩展时，我被要求为未显示为属性的 routeName ...

我不知道是否有人遇到过这个问题以及您使用的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:05:37.230

我最终用来实现我想要的方法是在视图中定义一个剃刀助手。我知道最好进行延期。但这很复杂，因为我想同时利用 ajaxhelper 和 htmlhelper ......（所以我不得不识别路线名称和所有这些东西）

```
@helper ConditionalLinkIE(string link, string action, string controller, object routeValues, AjaxOptions ajaxOptions)
{         
    if(ViewContext.RequestContext.HttpContext.Request.Browser.Browser.ToString().ToUpper() == "IE")
    {
      @Html.ActionLink(link, action, controller)
    }
    else
    {
      @Ajax.ActionLink(link, action, controller, routeValues, ajaxOptions)  
    }
} 
```

# svn - 如何删除颠覆变更列表

> ID：12581779
> 
> 赞同：1
> 
> 时间：2012-09-25T11:13:33.537
> 
> 标签：svn

subversion的*changelist*功能对于在同一个工作空间中与不同任务相关的不同工作非常有用。

```
svn changelist MyIssue fileA fileB
svn commit --cl MyIssue fileA 
```

但在完成工作后，*变更列表*仍然包含所有未提交（例如恢复）的文件。
`svn status`产生以下输出：

> --- 更改列表“我的问题”：fileB

必须从更改列表中手动删除此文件。

据我所知，在当前工作区中删除此更改列表的唯一方法*是*调用：

```
svn changelist --remove fileB 
```

我关于*变更列表*的问题是：

*   是否有另一种方法可以在当前工作区中删除更改*列表？*
*   是否有任何方便的解决方法，例如 shell 脚本或 emacs 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:21:24.623

我自己从未使用过更改列表，但听起来我想尝试一下。所以谢谢你的提示。

对您来说不是一个完整的答案，但也许是一个有价值的起点：我为 svn cli 命令创建了一个小型 shell 包装器：[http ://cli-apps.org/content/show.php/crescow?content=147510](http://cli-apps.org/content/show.php/crescow?content=147510)

您可以根据需要添加另一个子命令来执行清理。与单独的脚本或其他东西相比，这将使它更方便使用。例如你可以引入子命令'cleanup'，这样你就可以调用'>svn cleanup MyIssue'

如果你成功了，请留下一个便条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:23:35.043

如果要删除整个文件目录，请使用`--recursive`带有更改列表的标志

以下是更改列表中的选项

```
--changelist ARG
--depth ARG
--quiet (-q)
--recursive (-R)
--remove
--targets FILENAME 
```

# json - 使用 Sencha Architect 在数据视图中嵌套 JSON

> ID：12581780
> 
> 赞同：1
> 
> 时间：2012-09-25T11:13:37.207
> 
> 标签：json, sencha-touch-2, sencha-architect

我想在我的 Sencha Touch 2 项目的数据视图中显示嵌套的 JSON 数据。JSON 包含带有进度的服务请求的详细信息。

JSON：

```
{
    "success": true,
    "message": "Request retrieved with id:789",
    "data": {
        "id": 789,
        "description": "request description",
        "subject": "request subject",
        "progresses": [
            {
                "description": "progress description 1"
            },
            {
                "description": "progress description 2"
            },
            {
                "description": "progress description 3"
            }
        ]
    }
} 
```

为了获取数据，我有两个模型，一个用于 requestdetails，一个用于进度，当然还有一个 store。

我的店铺：

```
Ext.define('MyApp.store.RequestStore', {
    extend: 'Ext.data.Store',
    requires: [
        'MyApp.model.RequestModel'
    ],
    config: {
        autoLoad: true,
        autoSync: true,
        model: 'MyApp.model.RequestModel'
    }
}); 
```

还有我的模型：

```
Ext.define('MyApp.model.RequestModel', {
    extend: 'Ext.data.Model',
    uses: [
        'MyApp.model.ProgressModel'
    ],
    config: {
        fields: [
            {
                name: 'id'
            },
            {
                name: 'description'
            },
            {
                name: 'subject'
            }
        ],
        hasMany: {
            associationKey: 'progresses',
            model: 'MyApp.model.ProgressModel'
        },
        proxy: {
            type: 'rest',
            url: 'http://myurl.com/rest/request/789',
            reader: {
                type: 'json',
                rootProperty: 'data'
            }
        }
    }
});

Ext.define('MyApp.model.ProgressModel', {
    extend: 'Ext.data.Model',
    uses: [
        'MyApp.model.RequestModel'
    ],
    config: {
        fields: [
            {
                name: 'description'
            }
        ],
        belongsTo: {
            model: 'MyApp.model.RequestModel'
        }
    }
}); 
```

这是我的看法：

```
Ext.define('MyApp.view.MyDataView', {
extend: 'Ext.dataview.DataView',

config: {
    store: 'RequestStoreId',
    itemTpl: [
        '<div>',
        '   <div>ID</div>',
        '   <div>{id}</div>',
        '           ',
        '   <div>Subject</div>',
        '   <div>{subject}</div>',
        '           ',
        '   <div>Description</div>',
        '   <div>{description}</div>',
        '</div>',
        '',
        '<h2><b>Progress:</b></h2>',
        '<tpl for="progressmodels">',
        '    <div>',
        '        <div>{description}</div>',
        '    </div>',
        '</tpl>'
    ]
}
}); 
```

显示`id`,`requestType`和`description`工作`subject`正常。如果是进度，我希望显示所有进度描述，但现在只显示第一个描述。

我尝试了很多并搜索互联网以解决它，但我无法弄清楚它是什么。

我在这里做错了什么？我错过了什么吗？有同样问题的人吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:25:37.643

更换

`<tpl for="progressmodels">`

和

`<tpl for="progresses">`

为我工作。该`progresses`节点是我要循环的节点。唯一的缺点是您无法使用模型转换节点中的数据。据我所知，您必须在您的 XTemplate 中执行此操作:)

希望这会对某人有所帮助！

# c# - MapMany 实现有问题。在运行时编译良好但不是所需的输出

> ID：12581781
> 
> 赞同：0
> 
> 时间：2012-09-25T11:13:46.250
> 
> 标签：c#, ienumerable

我正在尝试测试我的 MapMany 实现，但在获取输出时遇到问题。

代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication3
{   
    static class E
    {
         static void Main()
        {

            var sequence = new int[] { 0, 1, 2, 3, 4 };
            var result = sequence.MapMany(
            s => s % 2 == 1 ? new int[] { s } : new int[] { });
            Console.WriteLine("{0}", result);
         }

        public static IEnumerable<U> MapMany<T,U> 
        (this IEnumerable<T> sequence, Func<T,IEnumerable<U>> func) {

            foreach (T item in sequence) {
               IEnumerable<U> sequence2 = func(item);

                    foreach (U item2 in sequence2) {
                         yield return item2;
                    }
                }

        }

    }
     } 
```

当我尝试运行代码时，它会给我以下输出：

```
ConsoleApplication3.E+<MapMany>d__2'2[System.Int32,System.Int32] 
```

有人知道怎么修这个东西吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:19:24.890

例如，

```
result.ToList().ForEach(res=>Console.WriteLine("{0}", res)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:17:32.803

更改 Console.WriteLine。输出是正确的。

编辑： result.ToList().ForEach(x => Console.Write(x + " "));

# wcf - WCF 二进制序列化和非 .NET 客户端

> ID：12581782
> 
> 赞同：0
> 
> 时间：2012-09-25T11:13:46.983
> 
> 标签：wcf, serialization, binary

有什么方法可以让我使用使用二进制序列化进行通信的 WCF 服务？序列化的格式是什么，我可以以某种方式反序列化 .NET 序列化对象（使用非 .NET）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:19:01.520

如果“二进制序列化”是指具有二进制编码的端点，那么是的，您可以**以某种方式**反序列化非 .NET 客户端上的 .NET 对象 - 该格式已公开记录（见下文）。但是，AFAIK 没有用于非 .NET 客户端的库可以反序列化该格式的对象，因此您只能靠自己。如果可以，您确实应该考虑添加另一个端点，以“普通”XML 形式公开数据。

二进制格式（同样，如果您使用的是二进制编码器）实际上只是 XML 的一种格式。因此，不要将数据序列化为以下格式

```
<Person xmlns="http://my.namespace.com">
    <Name>John Doe</Name>
    <Age>29</Age>
</Person> 
```

它将以二进制版本序列化，但它代表相同的数据（XML 信息集）。

可以在[http://msdn.microsoft.com/en-us/library/cc219210(v=prot.10).aspx](http://msdn.microsoft.com/en-us/library/cc219210(v=prot.10).aspx)找到二进制 XML 格式的规范。二进制格式还定义了一个[字典概念](http://blogs.msdn.com/b/carlosfigueira/archive/2011/01/26/wcf-binary-xml-and-dictionaries.aspx)（用于从流中消除重复或常用的字符串），您可能需要查看[http://msdn.microsoft.com/en-上的“SOAP 数据结构”协议us/library/cc219175(v=prot.10).aspx](http://msdn.microsoft.com/en-us/library/cc219175(v=prot.10).aspx)也是如此。

# iphone - （空）：iPad：应用程序可执行文件包含不受支持的架构：armv7s (-19031)

> ID：12581786
> 
> 赞同：3
> 
> 时间：2012-09-25T11:14:01.497
> 
> 标签：iphone, ios, xcode, architecture, error-handling

当我构建我的 iphone 应用程序和我的 ipad 应用程序以进行归档时，我收到以下消息：（但在 iPhone 应用程序 ofc 中使用 iPhone 而不是 iPad）

```
(null):  iPad: application executable contains unsupported architecture(s): armv7s (-19031) 
```

我之前没有收到这个错误！我的应用程序的免费版本没有得到它（几乎是相同的代码）我认为它与 iPhone 5 有关？我希望它与 iPhone 5 一起使用，所以我不想删除它 armv7s

/一个菜鸟

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T18:58:43.907

当您使用 armv7 设备归档应用程序时，此警告是完全正常的。

想一想，您制作了一个包含 armv7s 架构（这是我们想要的）的存档，并且警告告诉您您的 armv7 设备不支持该架构（这完全有道理）。

为了进一步证明这一点，只需连接 iPhone 5 并尝试存档，您就会看到警告消失了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T11:23:28.643

您必须等到项目中的所有自定义库都更新后。检查一下，一些流行的库已经更新了。

直到删除 armv7s：

项目 -> 构建设置 -> 架构

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T07:57:44.103

我在 XCode 4.6.3 上遇到了类似的问题。我收到消息：

```
iPhone/iPod: application executable contains unsupported architecture(s): i386 
```

事实证明，如果在 Build 之前，在模拟器上运行应用程序，该应用程序将进入 i386 架构（适用于 Mac），而忽略了项目设置。在构建之前需要选择 iOS 设备作为目标。

# xmpp - 使用 strophe 在 xmpp 中传输文件

> ID：12581788
> 
> 赞同：0
> 
> 时间：2012-09-25T11:14:02.927
> 
> 标签：xmpp, strophe

我知道这类问题也较早发布。但我在那个链接上没有得到任何答案。

我正在为 html 聊天客户端使用 open fire server、XMPP 和 strophe。现在我想将图像传输给我的 pub-sub 节点的所有订阅者。

是否可以使用 strophe 实现文件传输？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:07:25.040

一种方法可能是将文件上传到您的服务器，然后将链接发送给另一个用户，如消息....稍后用户单击链接并下载它或在聊天区域中将源显示为图像...

# iphone - 如何在图像上绘制（显示）用户位置？iOS

> ID：12581789
> 
> 赞同：13
> 
> 时间：2012-09-25T11:14:06.427
> 
> 标签：iphone, ios, ipad, ios5, geolocation

所以这是我需要在 iOS 上完成的任务：

在图像上显示用户的当前位置，如下所示：

![在此处输入图像描述](../Images/44556b6462f69bcde383e3c9ee284fb6.png)

是的，就像这张图片！

很少有人看到它就会注意到它。它的倾斜。它的标题已关闭。你可以看到地平线..！

可以说，

*   我有这张图片角落的位置坐标。
*   我有这个图像倾斜的角度。（例如 50°）
*   我有图像的航向角。（例如 -170° 北，这意味着它大约 10° 西南，如果我错了，请纠正我。）
*   我有缩放级别，如果这张图片在谷歌地图/谷歌地球上，它会被缩放。（例如 14 个缩放级别 - 共 20 个）

但这就是任务，我需要在这些图像上显示用户位置。就像在“谷歌地球”中一样。

谁能给我提示来完成这项任务？

谢谢大家。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:04:12.573

鉴于您拥有的信息，听起来您可以使用[线平面相交](http://en.wikipedia.org/wiki/Line-plane_intersection)来解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:58:45.507

我通过在 UIView 上绘制坐标并使用[CATrasnform3D](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/CoreAnimation_functions/Reference/reference.html)对其进行转换来实现预期的结果。这些解释也有帮助，从核心动画和[核心动画编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html)本身的角度[解释变换矩阵。](http://milen.me/technical/core-animation-3d-model/)

```
_graphic.transform = CGAffineTransformMakeRotation(-2.89724656);

CATransform3D rotatedTransform = _graphic.layer.transform;

rotatedTransform.m34 = 1.0 / 500;
rotatedTransform.m22 = -2;
rotatedTransform.m41 = 170;
rotatedTransform.m42 = 170;

rotatedTransform = 
CATransform3DRotate(rotatedTransform, 
                    51 * M_PI / 180.0f, 
                    1.0f, 
                    0.0f, 
                    0.0f);

_graphic.layer.transform = rotatedTransform;

[_graphic setNeedsDisplay]; 
```

谢谢你们。

# php - 如何下载 PDF 文件而不是在 Adob e Reader 中显示？

> ID：12581791
> 
> 赞同：0
> 
> 时间：2012-09-25T11:14:14.377
> 
> 标签：php, download

我正在尝试为 PDF 文件创建下载链接。如果安装了 Adob​​e Reader，它可以正常工作，但如果我卸载它，它会尝试在浏览器中打开并失败。

请告诉我这方面的实际问题是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:15:39.237

问题是，当安装 adobe reader 时，它会自动获取 .pdf 文件的标题并显示该文件。

你可以用这个。它总是会提示下载文件..

```
$path="uploads/";

$actualfilename=$path.$row["name"];

//name of the file or location of file..
if($typeofview=="download") {
    @readfile($actualfilename);
    header('Content-type: application/pdf');
    header('Content-Disposition: attachment; filename="' . $actualfilename. '"');
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: ' . filesize($actualfilename));
    header('Accept-Ranges: bytes');
    exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:53:03.270

这是这个[问题](https://stackoverflow.com/questions/12565683/how-to-create-download-link-to-download-a-file-instead-of-redirecting-to-browser/12565743#12565743)的副本，但这里是答案：

```
$path_to_file = '/var/www/somefile.pdf'; //Path to file you want downloaded
$file_name = "somefile.pdf"; //Name of file for download
header('Pragma: public');   // required
header('Expires: 0');    // no cache
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header("Content-Type: application/octet-stream");
header('Content-Disposition: attachment; filename="'.$file_name.'"');
header('Content-Transfer-Encoding: binary');
readfile($path_to_file);
die(); 
```

# windows-phone-7 - 是否可以替换 Windows Phone 7.5\8 中的默认拨号程序？

> ID：12581795
> 
> 赞同：1
> 
> 时间：2012-09-25T11:14:21.840
> 
> 标签：windows-phone-7, windows-phone-8

我正在研究我正在变成产品的想法的技术选择。

从网上一些零散的信息中，我了解到更换默认拨号器是不可能的。但是，搜索 WP 商店会带来几个[拨号器](http://www.windowsphone.com/en-us/store/search?q=dialer)。由于我没有\有 Windows Phone，我不确定这些拨号器是否只是添加到 Metro 的应用程序......或者实际上成为默认拨号器的东西。

**我的问题：**我想在电话所有者拨打电话时拦截电话，进行一些操作，然后运行我自己的应用程序或将其传递给默认拨号器。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:22:48.210

这是不可能的，当设备接到电话时，没有任何事件可以挂钩。

您所指的应用程序就是那些应用程序，虽然它们看起来像是拨号器的替代品，但实际上它们只是以这种方式构造的屏幕。

他们连接到 PhoneCallTask​​，如何使用它的链接如下：- [http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394025%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394025%28v=vs.92%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:18:45.387

附加拨号器只是应用程序，无法替换/更改 Windows Phone 7 中的默认拨号器。~

# java - 两个日期之间的差异？

> ID：12581796
> 
> 赞同：1
> 
> 时间：2012-09-25T11:14:24.817
> 
> 标签：java, android, date

朋友们，我正在寻找计算天数的差异。

嘿，假设如果我输入**31st Aug 23:59:00**和下一个日期**1 September 00:02:00**，我需要将记录显示为 1 天。

请帮我解决这个问题。

现在我正在计算相同的使用 `.getTimeInMillis()`，但它没有给我上面提到的日期条件的预期结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:20:31.113

我然后寻找日期和时差，使用我的代码

```
public class AndroidWebImage extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
  Date sdate=Calendar.getInstance().getTime();
  SimpleDateFormat format = new SimpleDateFormat("dd/MM/yy HH:mm:ss");

  String setDate = "13/09/12 10:20:43";
  Date AlarmDate=new Date(setDate);
  String currentDate = format.format(sdate);

  Date d1 = null;
  Date d2 = null;
  try {
      d1 = format.parse(setDate);
      d2 = format.parse(currentDate);
  } catch (ParseException e) {
      e.printStackTrace();
  }    
 //Comparison
  long diff = d1.getTime() - d2.getTime();
  long diffSeconds = diff / 1000 % 60;  

  long days = (int) (diff / (1000 * 60 * 60 * 24));
  long diffHours = (int) ((diff- (1000 * 60 * 60 * 24 * days)) / (1000 * 60 * 60));
  long diffMinutes = (int) (diff- (1000 * 60 * 60 * 24 * days) - (1000 * 60 * 60 *      diffHours))/ (1000 * 60);

  int curhour=sdate.getHours();
  int curmin=sdate.getMinutes();
  int alarmhour=AlarmDate.getHours();
  int alarmmin=AlarmDate.getMinutes();
  if(curhour==alarmhour && curmin==alarmmin)
  {
      Toast.makeText(getApplicationContext(), String.valueOf(days+"days\n"+diffHours+"hrs"+diffMinutes+"min\n"+diffSeconds+"sec"),Toast.LENGTH_LONG).show();
  }
  else if(curhour>=alarmhour && curmin>=alarmmin || curhour<=alarmhour && curmin<=alarmmin)
  {
      Toast.makeText(getApplicationContext(), String.valueOf(days+"days\n"+diffHours+"hrs"+diffMinutes+"min\n"+diffSeconds+"sec"),Toast.LENGTH_LONG).show();
  }

 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:21:55.120

```
import java.util.Calendar;

public class DateDifference
{  
    public static void main(String[] args)
    {
        Calendar calendar1 = Calendar.getInstance();
        Calendar calendar2 = Calendar.getInstance();

        calendar1.set(2012, 01, 10);
        calendar2.set(2012, 07, 01);

        long milliseconds1 = calendar1.getTimeInMillis();
        long milliseconds2 = calendar2.getTimeInMillis();

        long diffDays = diff / (24 * 60 * 60 * 1000);

        System.out.println("Time in days: " + diffDays + " days.");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:16:19.300

您需要去掉时间戳，然后减去日期以获得日期差异，或者您可以使用[Joda-time](http://joda-time.sourceforge.net/)，如下所示：

```
import java.util.Date;
import org.joda.time.DateTime;
import org.joda.time.Days;

Date past = new Date(112, 8, 1); 
Date today = new Date(112, 7, 30); 
int days = Days.daysBetween(new DateTime(past), new DateTime(today)).getDays(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T15:45:26.510

[重新发布](https://stackoverflow.com/questions/3838527/android-java-date-difference-in-days/13936264#13936264)：

有一个简单的解决方案，至少对我来说，是唯一可行的解​​决方案。

问题是，我看到的所有答案——使用 Joda、Calendar、Date 或其他任何东西——只考虑了毫秒数。他们最终计算**两个日期之间的 24 小时周期**数，而不是**实际天数**。因此，从 1 月 1 日晚上 11 点到 1 月 2 日凌晨 1 点的时间将返回 0 天。

`startDate`要计算和之间的实际天数`endDate`，只需执行以下操作：

```
// Find the sequential day from a date, essentially resetting time to start of the day
long startDay = startDate.getTime() / 1000 / 60 / 60 / 24;
long endDay = endDate.getTime() / 1000 / 60 / 60 / 24;

// Find the difference, duh
long daysBetween = endDay - startDay; 
```

这将在 1 月 2 日和 1 月 1 日之间返回“1”。如果您需要计算结束日，只需将 1 添加到`daysBetween`（我需要在我的代码中执行此操作，因为我想计算该范围内的总天数）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T11:17:17.277

您不能使用millis 执行此操作，因为您需要知道日期边界在哪里（即午夜）。午夜前后的一毫秒意味着两个不同的日子。

您需要使用日历来确定两个日期之间的间隔天数。JodaTime库对这种计算有很多额外的支持[。](http://joda-time.sourceforge.net/)

另请参阅[计算两个 Java 日期实例之间的差异](https://stackoverflow.com/questions/1555262/calculating-the-difference-between-two-java-date-instances)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T11:18:34.073

你只是想找到天数，对吧？

试试看[这个](https://stackoverflow.com/q/3299972/1324631)，它可能有你要找的东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T11:19:08.400

我以前做过这个代码，它可能对你有帮助

```
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;

/**
 *
 * @author MErsan
 */
public class DateFormatter {

    public static String formatDate(long time) {
        StringBuilder result = new StringBuilder();

        // 1- Check the year
        // 2- Check the Month
        // 3- Check the Day
        // 4- Check the Hours

        Date myDate = new Date(time);
        Date todayDate = new Date(System.currentTimeMillis());

        if (todayDate.getYear() - myDate.getYear() != 0) {
            // Not same year, and should append the whole time
            return DateFormat.getDateTimeInstance(DateFormat.MEDIUM, DateFormat.SHORT).format(myDate);
        }
        // Same Year
        // now Check the month
        if (todayDate.getMonth() - myDate.getMonth() != 0) {
            return new SimpleDateFormat("MMM dd, hh:mm a").format(myDate);// Aug
            // 16,
            // 11:55
            // PM
        }

        // Now Same Month
        // Check the day
        int daysDiff = todayDate.getDate() - myDate.getDate();
        if (daysDiff == 1) {// Yesterday
            result.append("Yesterday").append(' ');
            result.append(new SimpleDateFormat("hh:mm a").format(myDate));
            return result.toString();
        } else if (daysDiff != 0) {
            return new SimpleDateFormat("MMM dd, hh:mm a").format(myDate);// Aug
            // 16,
            // 11:55
            // PM
        }

        // Same Day :')
        // Check the hour
        int hoursDiff = todayDate.getHours() - myDate.getHours();
        if (hoursDiff < 0) {// Invalid Time
            // :@
            result.append("Today").append(' ');
            result.append(new SimpleDateFormat("hh:mm a").format(myDate));
            return result.toString();
        } else if (hoursDiff > 3) {// Not Same Hour, Hour Diff more than 3 hours
            result.append("Today").append(' ');
            result.append(new SimpleDateFormat("hh:mm a").format(myDate));
            return result.toString();
        } else if (hoursDiff != 0) {// Hours Diff less than 3 hours, but not
            // current hour
            int mintuesDiff = todayDate.getMinutes() - myDate.getMinutes();

            result.append("Before").append(' ');
            result.append(hoursDiff).append(' ');
            result.append("Hours").append(' ');
            result.append("and").append(' ');
            result.append(Math.abs(mintuesDiff)).append(' ');
            result.append("Minutes");
            System.err.println("Case 6");
            return result.toString();
        } else if (hoursDiff == 0) {// Same Hours
            int mintuesDiff = todayDate.getMinutes() - myDate.getMinutes();
            if (mintuesDiff < 1) {// Seconds Only {Same Minute}
                int secondsDiff = todayDate.getSeconds() - myDate.getSeconds();
                result.append("Before").append(' ');
                result.append(Math.abs(secondsDiff)).append(' ');
                result.append("Seconds");
                return result.toString();
            } else {
                result.append("Before").append(' ');
                result.append(Math.abs(mintuesDiff)).append(' ');
                result.append("Minutes");
                return result.toString();
            }
        }

        // Default
        return DateFormat.getDateTimeInstance(DateFormat.MEDIUM, DateFormat.SHORT).format(myDate);
    }
} 
```

# android - AdMob：在 WebView 中显示广告

> ID：12581806
> 
> 赞同：1
> 
> 时间：2012-09-25T11:15:05.130
> 
> 标签：android, webview, admob

我使用`AdMob`服务在我的 android 应用程序中显示广告。

我需要使用`WebView`而不是为其打开外部网络浏览器来显示广告。

覆盖`onLeaveApplication()`方法`AdListener`没有帮助，在运行方法代码后无论如何都会打开外部应用程序。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:20:55.163

你的意思是当你点击你的广告时，它会在一个单独的浏览器窗口中打开？你希望它在同一个 webview 中打开吗？

那么你只需要添加一个shouldoverrideurlloading。像这样的东西：

```
 public boolean shouldOverrideUrlLoading(WebView view, String url) {

            if( url.startsWith("http:") || url.startsWith("https:") ) {
                 return false;

            }

             // Otherwise allow the OS to handle it
             Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
             startActivity( intent ); 
```

编辑：对不起，这仅适用于您在应用程序中使用的实际 web 视图。由于 admob 广告显示在它们自己的小横幅中（本质上也是一个 web 视图），因此将该网页加载到横幅中是没有意义的。因此必须弹出一个浏览器窗口。我可以问一下为什么这对你如此重要吗？我不认为它可以很容易地实现，这意味着它不是真的可能。

# objective-c - EXC_BAD_ACCESS 试图重写 NSString ComponentsSeparatedByString：

> ID：12581808
> 
> 赞同：2
> 
> 时间：2012-09-25T11:15:21.463
> 
> 标签：objective-c, arrays, nsstring, char

我正在编写一个 Objective-C 程序来处理带有 XCODE 4.3.1 和 ARC 的生物分子的轨迹。我需要阅读 PDB 文件，即解析大量文本格式的数据。我对 NSString 的低效率感到非常失望，并试图编写一个 C 等效的 componentsSeparatedByString:。该算法适用于 NSString 和 NSMutableArrays，但我很难使用 char* 和 char**。

不幸的是，我收到了 EXC_BAD_ACCESS 错误。奇怪的是，我得到了 i=68103 和 j=68049 的错误（这些数字是否对您响起？），这意味着它在崩溃之前工作了一段时间。错误是“静态的”（总是以相同的 (i,j) 数字阻塞）。该数组似乎工作得很好（崩溃前的 NSLog 值）。

看起来，我对 C 代码和指针背后的微妙之处不是很有经验，但我肯定很高兴听到你的建议，让它工作！谢谢 ！

继承人的代码：

```
+(char**) componentsSeparedByNewLineCEQUIV:(const char*)aChar:(int*)numWord
{ // char* aChar : my file, is typically 3 millions characters
int j=-1; //Last non space character
int i; //Scanned character
int len=strlen(aChar);

char** stringArray=malloc((*numWord)*sizeof(char*));

for (i=0;i<len; i++)
{   if (aChar[i]==10)
    {
        if ( j!=-1)
        {   
            char* buffer2=malloc(i-j+1);
            strcpy(buffer2, strndup(aChar+j, i-j));
            stringArray[i]=malloc(sizeof(char)*strlen(buffer2)+1); //EXC_BAD_ACCESS HERE
            strcpy(stringArray[i], buffer2);
        }
        j=-1;
    }
    else if (j==-1)
    {j=i;}
}
if (j!=-1)
{   char* buffer2=malloc(i-j+1);
    strcpy(buffer2, strndup(aChar+j, i-j));
    stringArray[i]=malloc(strlen(buffer2)+1);
    strcpy(stringArray[i], buffer2);
}

return stringArray;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:26:27.867

你可能不是第一个遇到这个问题的人:)

为什么不只使用[strtok](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)？

PS 什么分析表明 NSString 是你的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:53:56.603

更新给所有可能感兴趣的人：这是一个工作版本，使用 strtok 可能很有用，尽管我仍然对我的代码的响应感兴趣。

此代码已经过测试，比 [astring componentsSeparatedByString:@"\n"] ... 快 5 倍（125ms vs 581ms）。

```
+(char**)componentsSeparatedByNewLine:(const char*)aChar:(int*)numWord
{

int i;
int j=0;
int len = strlen(aChar);
*numWord=1;
for (i=0;i<len; i++)
{
    if (aChar[i]==10) *numWord=*numWord+1;   //change 10 for any other character (ASCII for space)
}

char** stringArray=malloc((*numWord)*sizeof(char*));
char* pch;

char* aChar2=malloc(len+1);
strcpy(aChar2,aChar);

pch = strtok(aChar2,"\n");
while (pch != NULL)
{   
    stringArray[j]=(char*)malloc( (strlen(pch)+1)*sizeof(char));
    strcpy(stringArray[j], pch);
    //NSLog(@"%s",stringArray[j]);
    j=j+1;
    pch = strtok (NULL, "\n");
}
return stringArray;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:36:26.663

我不知道为什么错误出现在它应该在上面的那一行。但是你正在复制一个未分配的字符串。
stringArray[i] 复制时未分配 buffer2，分配它：

```
 if ( j!=-1)
    {   
        char* buffer2=malloc(i-j+1);
        strcpy(buffer2, strndup(aChar+j, i-j));
        stringArray[i]=malloc(sizeof(char)*strlen(buffer2)+1); //EXC_BAD_ACCESS HERE
        stringArray[i]=(char*)malloc( (strlen(buffer2)+1)*sizeof(char));  // Allocate the string
        strcpy(stringArray[i], buffer2);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:03:56.190

第一：如果我没有完全错，但我认为你消耗的内存至少是你需要的 4 倍：

您`malloc`用于创建`buffer2`并`strndup`用于获取所需的字符。`strndup`完全符合您的要求，但一步到位。`char* buffer2 = strndup(aChar+j, i-j)`应该是你的第一步。更糟糕的是，在接下来的两行中，您必须再次做同样的事情。所以我认为你真正想要的是`stringArray[i] = strndup(aChar+j, i-j)`。看内存问题：所有函数都`errno`用来表示内存分配失败。

第二：您的函数不会返回组件的数量，因此您`stringArray`可能会在不知不觉中包含一些垃圾。

第三：`strlen`贵，不需要，直接用`for(int i = 0; aChar[i] != '\0'; i++)`

# c++ - 将无符号字符转换为 LPCSTR

> ID：12581809
> 
> 赞同：1
> 
> 时间：2012-09-25T11:15:21.727
> 
> 标签：c++

嗨，我正在使用 VS2010 和 MBCS。谁能告诉我如何将无符号字符转换为 LPCSTR？对不起，我只是 C++ 的新手... :) 谢谢

这是它失败的代码：

```
 hr = MsiSetProperty(hInstall, "LOCKCODE",  szLockCode);
    ExitOnFailure(hr, "failed to set LOCKCODE"); 
```

`szLockCode`是需要转换的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:19:05.487

无符号字符数组（`unsigned char szLockCode[10]`例如）在技术上已经是 LPCSTR。如果您已经在使用数组，那么转换不是问题，如果不是，那么您需要一个数组。如果您想要一个字符串，那么您需要一个长度为 2 的数组。字符位于第一个位置 ( `szLockCode[0]`)，值 0 位于第二个位置 ( `szLockCode[1]`)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T12:55:52.660

您可能会收到如下错误消息：

> 无法将参数 3 从“const char *”转换为“LPCWSTR”

为避免这种情况，您应该进行类型转换：

```
hr = MsiSetProperty(hInstall, "LOCKCODE",  (LPCSTR)szLockCode); 
```

或在字符串前使用 L 前缀：

```
LPCSTR szLockCode = L"Some error";
hr = MsiSetProperty(hInstall, "LOCKCODE",  szLockCode ); 
```

这是对 LPCSTR 代表的一个很好的解释：

[LPCSTR、LPCTSTR 和 LPTSTR](https://stackoverflow.com/questions/321413/lpcstr-lpctstr-and-lptstr)

# java - 尝试解析 xml 文件时出现 NullPointerException

> ID：12581811
> 
> 赞同：0
> 
> 时间：2012-09-25T11:15:29.730
> 
> 标签：java, xml-parsing

我有以下内容：

```
public static void main(String args[]) {

     // upload config' data for program - param' are path and Xml's Root node/ where to get data from
     confLoader conf = new confLoader("conf.xml", "config"); 

     System.out.println(conf.getDbElement("dataSource") );
     System.out.println(conf.getDbElement("dataSource") );
     System.out.println(conf.getDbElement("dataSource") );  // Fails 
... 
```

* * *

负责构建 DOM 并从 ('getDbElement()') 解析的代码：

```
public class confLoader{

 DocumentBuilderFactory docBuilderFactory;
 DocumentBuilder docBuilder;
 Document doc;
 NodeList nList;

 public confLoader(String path, String XmlRoot){

    try {
            docBuilderFactory = DocumentBuilderFactory.newInstance();
            docBuilder = docBuilderFactory.newDocumentBuilder();
            doc = docBuilder.parse(new File(path));
            // normalize text representation
            doc.getDocumentElement().normalize();                
    nList = doc.getElementsByTagName(XmlRoot);

  } catch (Exception e) {
    e.printStackTrace();
  } 
}

public String getDbElement(String element) {

    Node nNode = nList.item(0); //  1st item/node - sql
    try {
        if (nNode.getNodeType() == Node.ELEMENT_NODE) {     /////  Line 36 - Problematic

            Element eElement = (Element) nNode;
            return (((Node) eElement.getElementsByTagName(element).item(0).getChildNodes().item(0)).getNodeValue());
        }
    } catch (Exception ex) {
        System.out.println("Error retrieving " + element + " :" + ex.getMessage());//Thread.dumpStack();
         ex.printStackTrace();
      }
    return "not available";
 }

} 
```

* * *

给定代码的堆栈跟踪：

```
 jdbc:mysql://localhost:...
  java.lang.NullPointerException
  jdbc:mysql://localhost:...
  Error retrieving dataSource :null
  not available
  at exercise.confLoader.getDbElement(confLoader.java:36)
  at exercise.Exercise.main(Exercise.java:22)

      Line 36 : if (nNode.getNodeType() == Node.ELEMENT_NODE) 
```

xml 解析完成了两次，第三次我尝试从 Xml 解析，我得到 NullPointerException。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:45:42.603

代码太多！此外，按需读取配置片段也不是很有用。依赖实例变量会使您的代码更难测试和理解，甚至在并发场景中可能不安全。你不需要所有那些类、方法和东西。这只是一个问题

```
public class Exercise {

    public static void main(String[] args) throws XPathExpressionException {

        XPath xpath = XPathFactory.newInstance().newXPath();
        InputSource in = new InputSource("res/config.xml");

        String user = xpath.evaluate("//sql/user/text()", in);
        String password = xpath.evaluate("//sql/password/text()", in);
        String path = xpath.evaluate("//sql/dataSource/text()", in);

        Sql sql = new Sql(path, user, password);
    }

} 
```

您可以选择使您的代码更复杂一点，方法是将所有配置存储在 中`Map<String, String>`，但实际上您最好使用通用 API，例如[`Properties`](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)，它能够从 XML 加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:35:25.660

通过从构建路径中删除 gnujaxp.jar 解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:26:04.907

首先，我建议您不要在一行上链接太多方法。将调用结构分成多行将增加可读性并简化调试。

例如，重写：

```
return (((Node) (eElement.getElementsByTagName("password").item(0).getChildNodes().item(0)).getNodeValue()); 
```

到：

```
NodeList rootEls = eElement.getElementsByTagName("password");
Node rootEl = rootEls.item(0)
NodeList children = rootEl.getChildNodes();
Node passEl = children.item(0);
return passEl.getNodeValue(); 
```

当您获得 NullPointerException 时，使用此代码，您可以从异常中的行号中提取更多信息。

其次，在这种情况下，查看用于 Java 的各种 XML 处理库并找到一个允许使用 XPath 的库可能很有用，另请参见：[this tutorial on Xpath](http://oreilly.com/perl/excerpts/system-admin-with-perl/ten-minute-xpath-utorial.html)。

我希望这有帮助。随时提出任何问题。

# java - 在 Spring Web 服务中缓存？

> ID：12581812
> 
> 赞同：2
> 
> 时间：2012-09-25T11:15:30.320
> 
> 标签：java, spring, caching

我需要在服务器启动时将一些数据从数据库加载到缓存。一旦请求到来，需要从这个缓存中获取数据。还需要经常刷新缓存。如果有人提供实现这一点的方法，那将是有帮助的.我正在使用 Spring 3.1。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:47:08.827

有很多可用的缓存实现：

*   Spring [Cache](http://static.springsource.org/spring/docs/3.1.2.RELEASE/spring-framework-reference/html/cache.html)抽象
*   [Ehcache](http://ehcache.org/)（这是 Spring Cache 的一种可能提供者）
*   [番石榴](http://code.google.com/p/guava-libraries/)_[`LoadingCache`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html?com/google/common/cache/LoadingCache.html)
*   正如 user1516873 所建议的那样，Infinispan
*   [`ConcurrentHashMap`](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/concurrent/ConcurrentHashMap.html)如果您不想要更多依赖项，则来自JDK
*   等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:40:52.720

试试[Infinispan](https://docs.jboss.org/author/display/ISPN/Getting+Started+Guide)。

它现代、开源且易于使用的缓存。可以直接嵌入使用，也可以在hibernate中作为二级缓存使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T11:59:16.410

我认为这就是你要找的：

[春天：休眠+ ehcache](https://stackoverflow.com/questions/5270998/spring-hibernate-ehcache)

如您所见，我的建议是使用休眠二级缓存，您的问题将在配置级别得到解决。

# objective-c - iOS - QLPreviewController 不会重新加载

> ID：12581813
> 
> 赞同：2
> 
> 时间：2012-09-25T11:15:32.447
> 
> 标签：objective-c, ios

我已经将 QLPreviewController 子类化，这是它应该做的：

QLPreviewController 显示照片。如果用户想要更改那张照片，他可以用相机拍摄新照片（显示 UIImagePickerController）

之后，我想在 QLPreviewController 上显示新照片，但旧照片仍然可见。

似乎 QLPreviewController 的 QLPreviewItem 并没有改变

```
[QLPreviewController  refreshCurrentPreviewItem]; 
```

或者

```
[QLPreviewController reloadData]; 
```

问题可能是新照片以与旧照片相同的名称保存。（我不想改变它）

如何强制 QLPreviewController 再次重新加载该文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:47:19.933

如果您将与旧照片同名的照片保存在同一目录中，则应该存在“具有此名称的文件存在”错误。您是否在保存新图像之前删除旧图像？如果不是，那么您将收到错误消息，并且新图像未保存在文件系统上。

# asynchronous - 异步 cuBLAS 调用

> ID：12581821
> 
> 赞同：11
> 
> 时间：2012-09-25T11:16:04.853
> 
> 标签：asynchronous, cuda, cublas

我想异步调用 cuBLAS 例程。是否可以？如果是，我该如何实现？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T11:40:30.373

`cublasSetStream`在 cublas 调用之前使用该函数。

`cublasSetStream(cublasHandle, cudaStream)`;

# android - 发布通知进度条的更改

> ID：12581827
> 
> 赞同：1
> 
> 时间：2012-09-25T11:16:26.653
> 
> 标签：android, notifications

我有一个包含进度条的通知。progressBar 更新代码在服务中运行。代码如下

```
notificationManager.notify(42, notification);

while((count = inputStream.read(data)) != -1)
{
    //new 
    downloadProgress += count;
    outputStream.write(data,0,count);
    //new
    notification.contentView.setProgressBar(R.id.status_progress, contentLength, downloadProgress, false);
    notificationManager.notify(42, notification);
} 
```

我面临的问题是，由于在`notificatoinManager.notify()`从流中读取的数据之间调用了该方法，因此会减慢复制过程。

我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:24:24.113

您可能可以使用 AsyncTask 将 UI 更新与实际阅读分开

```
public class ReadFile extends AsyncTask<Void, Integer, String> {
@Override 
protected String doInBackground(Void... params) {    
//Do the reading here
downloadProgress += count;    
outputStream.write(data,0,count);
publishProgress(downloadProgress);
}
@Override
protected void onProgressUpdate(Integer... progress) {
notification.contentView.setProgressBar(R.id.status_progress, contentLength, downloadProgress, false);       
notificationManager.notify(42, notification);               
} 
```

希望这可以帮助！

# entity-framework - 从带有实体框架的遗留数据库映射表关系，只有主键

> ID：12581835
> 
> 赞同：1
> 
> 时间：2012-09-25T11:17:11.443
> 
> 标签：entity-framework, entity-relationship, entity-framework-5

**数据（表名）**

数据ID PK，

值1，

值2，

价值3

**data_address（表名）**

dataaddressid PK,

dataid - 到 errenddataid 的 ID，

addressid1 - id 到 en addressid，

addressid2 - id 到 en addressid，

类型

**地址（表名）**

addressid PK - 到 addressid1 或 addressid2 的 ID，

地址1，

地址2，

姓名，

邮政编码，

城市

我很难尝试使用 Entity Framework 5 映射这种关系，如果有人有想法或好的链接，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:21:37.180

如果您确定数据库的完整性是可靠的，您可以只映射表并在 EF 模型中手动创建关联。

在数据库优先的模式下，我使用了一个简单的数据模型：没有 FK 的父 + 子。这些表当然是在没有关联的情况下导入的。然后我在父级上做了“添加关联...”，如下所示：

![在此处输入图像描述](../Images/016e4afc3b0c18f2a7ba2717a884b8e9.png)

注意：还没有外键属性。我在关联的属性中手动添加了它：

![在此处输入图像描述](../Images/def6d4fdaabf9552af7adedd65bb9fc9.png)

![在此处输入图像描述](../Images/100e79667e568898d223566f27da05cb.png)

我可以在`Parent.Children`.

我认为这对你来说是最简单的方法。edmx 设计图面为您提供了一些指导，以了解您创建了哪些关联。您始终可以添加一个代码生成项来生成一个`DbContext`比默认更易于使用的`ObjectContext`.

# c# - 获取所有独特的变体

> ID：12581839
> 
> 赞同：0
> 
> 时间：2012-09-25T11:17:24.497
> 
> 标签：c#, .net, linq, math

这是我的课：

```
public class Schedule
{
    public string mintime { get; set; }
    public string maxtime { get; set; }
    public string weekday { get; set; }
} 
```

我得到了这样的时间表列表，其中包含重复的工作日，例如

```
List<Schedule> list = new List<Schedule> {
    new Schedule { mintime = "01.01.2012", maxtime = "05.01.2012", weekday = "1" },
    new Schedule { mintime = "05.01.2012", maxtime = "10.01.2012", weekday = "1" },
    new Schedule { mintime = "10.01.2012", maxtime = "20.01.2012", weekday = "2" },
    new Schedule { mintime = "01.02.2012", maxtime = "10.02.2012", weekday = "2" },
    new Schedule { mintime = "01.03.2012", maxtime = "10.03.2012", weekday = "3" },
    new Schedule { mintime = "01.04.2012", maxtime = "10.04.2012", weekday = "4" }
}; 
```

如何获得 List> 的所有组合，例如：

```
List<List<Schedule>> list = new List<List<Schedule>> {
    new List<Schedule> { 
        new Schedule { mintime = "01.01.2012", maxtime = "05.01.2012", weekday = "1" },
        new Schedule { mintime = "10.01.2012", maxtime = "20.01.2012", weekday = "2" }, 
        new Schedule { mintime = "01.03.2012", maxtime = "10.03.2012", weekday = "3" },
        new Schedule { mintime = "01.04.2012", maxtime = "10.04.2012", weekday = "4" }
    },
    new List<Schedule> { 
        new Schedule { mintime = "01.01.2012", maxtime = "05.01.2012", weekday = "1" },
        new Schedule { mintime = "01.02.2012", maxtime = "10.02.2012", weekday = "2" },
        new Schedule { mintime = "01.03.2012", maxtime = "10.03.2012", weekday = "3" },
        new Schedule { mintime = "01.04.2012", maxtime = "10.04.2012", weekday = "4" }
    },
    new List<Schedule> { 
        new Schedule { mintime = "05.01.2012", maxtime = "10.01.2012", weekday = "1" },
        new Schedule { mintime = "10.01.2012", maxtime = "20.01.2012", weekday = "2" },
        new Schedule { mintime = "01.03.2012", maxtime = "10.03.2012", weekday = "3" },
        new Schedule { mintime = "01.04.2012", maxtime = "10.04.2012", weekday = "4" }
    },
    new List<Schedule> { 
        new Schedule { mintime = "05.01.2012", maxtime = "10.01.2012", weekday = "1" },
        new Schedule { mintime = "01.02.2012", maxtime = "10.02.2012", weekday = "2" },
        new Schedule { mintime = "01.03.2012", maxtime = "10.03.2012", weekday = "3" },
        new Schedule { mintime = "01.04.2012", maxtime = "10.04.2012", weekday = "4" }
    },
}; 
```

?

是否可以使用 LINQ 获得它？

* * *

我的问题的主要主题是建立时间表列表。每个时间表应包括周一、周二、周三、周四、周五、周六和周日一次。我需要使用一个更常见的列表来构建这样的列表，其中包含周一、周三等的许多时间表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:48:26.797

在这里使用`Eric Lippert`'s [CartesianProduct](http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx)

```
List<List<Schedule>> newList = CartesianProduct(list.GroupBy(l => l.weekday))
                               .Select(x => x.ToList())
                               .ToList(); 
```

--

```
public static IEnumerable<IEnumerable<T>> CartesianProduct<T>(IEnumerable<IEnumerable<T>> sequences)
{
    IEnumerable<IEnumerable<T>> emptyProduct = new[] { Enumerable.Empty<T>() };
    return sequences.Aggregate(
        emptyProduct,
        (accumulator, sequence) =>
        from accseq in accumulator
        from item in sequence
        select accseq.Concat(new[] { item }));
} 
```

# sql - SQL 树在特定级别查找祖先

> ID：12581841
> 
> 赞同：5
> 
> 时间：2012-09-25T11:17:32.333
> 
> 标签：sql, sql-server, sql-server-2008, tsql

假设我有以下树：

```
CREATE TABLE Tree(Id int, ParentId int, Name varchar(20), Level int)

INSERT INTO Tree(Id, ParentId, Name, Level)
SELECT 1, NULL, 'Bob', 0 UNION ALL 
SELECT 2, 1, 'John', 1 UNION ALL
SELECT 3, 1, 'Bill', 1 UNION ALL
SELECT 4, 3, 'Peter', 2 UNION ALL
SELECT 5, 4, 'Sarah', 3 
```

我需要一个脚本来在特定级别找到给定节点的祖先：

例如，Sarah 在级别 2 的祖先是 Peter，而 Peter 在级别 0 的祖先是 Bob。

有没有一种简单的方法可以使用分层 CTE 来做到这一点？[sqlfiddle](http://sqlfiddle.com/#!3/b0572)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T11:24:03.373

你可以这样做：

```
;WITH TreeCTE
AS
(
    SELECT Id, ParentId, Name, Level
    FROM Tree
    WHERE Id = 5
    UNION ALL 
    SELECT t.Id, t.ParentId, t.Name, t.Level
    FROM TreeCTE AS c
    INNER JOIN Tree t ON c.ParentId = t.Id  
)
SELECT * FROM TreeCTE; 
```

这将为您提供父子链，从`Sarah`以.`id = 5``parentid = NULL`

这是[**更新的sql小提琴**](http://sqlfiddle.com/#!3/b0572/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T11:24:16.260

```
declare @fromid int, @level int
select @fromid = 5, @level = 2 -- for sarah's ancestor at level 2
select @fromid = 4, @level = 0 -- for peter's ancestor at level 0

;with cte as (    
    select * from tree where id = @fromId
    union all
    select t.Id, t.ParentId, t.Name, t.Level from cte
        inner join tree t on t.id = cte.ParentId
) 
    select * from cte
    where Level=@level 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:34:39.433

试试这个：

```
DEclare @level int=0
Declare @name varchar(10)='Peter'
;WITH CTE as (
select * from tree where Name=@name
UNION ALL
select t.* from Tree t inner join CTE c on
t.ID=c.ParentId and t.Level >=@level)
select top 1 Name as Ancestor from CTE order by id 
```

# c# - 使用c#在winform中通过串口发送数据没有得到确认？

> ID：12581844
> 
> 赞同：1
> 
> 时间：2012-09-25T11:17:48.763
> 
> 标签：c#, serial-port

我正在通过串口发送数据..发送部分没问题，我正在另一端获取数据，但我无法完成确认部分......这就是我正在做的......

```
mySerialPort.Open();
        mySerialPort.Write(databuffer, 0, 19);
        System.Threading.Thread.Sleep(2000);
        if (mySerialPort.BytesToRead > 0)      // this condition not working
        {
            string rdata = mySerialPort.ReadExisting();
            if (rdata.ToUpper().Trim() == "OK")
            {
                lblmsg.Text = "OK";
            }
            else
            {
                lblmsg.Text = "FL";
            }
        }

        mySerialPort.Close(); 
```

进一步我的串口设置是这样的......

```
public void SettingRS232(string port)
    {
        try
        {
            SerialPort mySerialPort = new SerialPort(port);
            mySerialPort.PortName = port;
            mySerialPort.BaudRate = 9600;
            mySerialPort.Parity = Parity.None;
            mySerialPort.StopBits = StopBits.One;
            mySerialPort.DataBits = 8;
            mySerialPort.Handshake = Handshake.None;
            mySerialPort.ReadTimeout = 2000;
            mySerialPort.WriteTimeout = 500;

            mySerialPort.DtrEnable = true;
            mySerialPort.RtsEnable = true;
        }
        catch (Exception ex)
        {
            lblmsg.Text = ex.Message;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:20:40.307

您需要挂钩到串口的[DataReceived事件。](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)有很多很好的资源可以帮助您入门。本质上，挂上一个事件处理程序，在事件处理程序内部，只要有数据就从端口读取（BytesToRead > 0）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:27:50.127

这是非常少的。首先使用*另一个*程序来测试连接，例如 HyperTerminal 或 Putty。这让您非常了解基础知识、正确的电气连接以及正确的波特率、奇偶校验、停止位和数据位设置。并检查设备是否在您选择的幻数内返回响应，即 2 秒。

到目前为止，最常见的错误是没有注意正确的握手。如果您将其保留为“无”，那么您**必须**自己打开握手信号。将 RtsEnable 和 DtrEnable 属性设置为 true。当设备看到这些信号关闭时，它不会发送任何内容，它假定您没有通电 (DTR) 并且没有准备好接收数据 (RTS)。

通过避免混合二进制数据和字符串来进一步改进您的代码，摆脱可怕的 Sleep()。调用Read()方法接收字节，注意返回值就知道得到了多少。继续调用 Read() 直到你得到所有你期望收到的。

* * *

编辑：您的 SettingRS232() 方法有一个错误：

```
 SerialPort mySerialPort = new SerialPort(port); 
```

这将创建一个名为 mySerialPort 的*局部变量*。您正在初始化该局部变量，而不是其余代码正在使用的 mySerialPort 变量。通过这样编写来修复错误：

```
 mySerialPort = new SerialPort(port); 
```

# python - 用python解析DNS文本文件

> ID：12581846
> 
> 赞同：-2
> 
> 时间：2012-09-25T11:17:52.347
> 
> 标签：python, parsing, dns

我是 Python 的绝对和完整的新手，一个小时前才将它安装在我的计算机上。

我从一个拆分项目开始，拆分一个相当复杂的 DNS 系统，并且主要需要解析大约 20 多个 BIND 服务器上的各种 named.conf 和区域文件。

对于初学者，我需要确定不同服务器认为自己是哪些 DNS 区域的主人。

我最初是使用 Python 读取 named.conf 文本文件，搜索“type master;” 并在文本文件或其他文件中输出区域的名称。

**一个名为.conf 的示例的摘录：**

```
zone "92.34.163.in-addr.arpa" in { 
type master; 
file "92.34.163.in-addr.arpa.db"; 
        update-policy {
        grant _nbc_update_channel_key_only_ wildcard * ANY;        };}; 

zone "aam.hal.hydro.com" in { 
type master;   
file "aam.hal.hydro.com.db"; 
        update-policy {
        grant _nbc_update_channel_key_only_ wildcard * ANY;        };}; 
```

**文本文件中的所需输出将是：**

```
master 10.10.10.in-addr.arpa    
master kodal.no
master smula.no 
```

任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:24:50.927

在您的位置，我可能会使用解析器生成器（例如[PLY](http://www.dabeaz.com/ply/)）来编写解析器，以从各种 DNS 配置文件中提取所需的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:20:30.060

你可以[`bicop`](http://pypi.python.org/pypi/bicop)用来解析这样的文件：

```
from bicop import parse
parse(open("/etc/bind/named.conf")) 
```

# c# - 用另一个 xelement 替换放置在树视图中的 xdocument 中的元素

> ID：12581849
> 
> 赞同：1
> 
> 时间：2012-09-25T11:17:58.583
> 
> 标签：c#, wpf, linq-to-xml

我有一个简单的 xmlfile，它放在树视图中

```
 <bookstore xmlns="generic">
     <book genre="Book" >`
       <title>Book of Benjamin Franklin</title>
       <author>
         <first-name>Benson</first-name>
         <last-name>Frank</last-name>
      </author>
      <price>89.88</price> 
     </book>
     <book genre="autobiography">
        <title>The Autobiography of Benjamin Franklin</title> 
        <author>
           <first-name>Ben</first-name> 
           <middlename /> 
           <last-name>Franklin</last-name> 
        </author>
        <price>89.88</price> 
     </book>
   <book genre="novel" >
     <title>The Confidence Man</title> 
     <author>
       <first-name>John</first-name> 
       <last-name>Melville</last-name> 
     </author>
    <price>11.99</price> 
   </book>
</bookstore> 
```

我想替换（第二个元素）

```
<book genre="autobiography" >
    <title>The Autobiography of Benjamin Franklin</title> 
    <author>
       <first-name>Ben</first-name> 
       <middlename /> 
       <last-name>Franklin</last-name> 
    </author>
    <price>89.88</price> 
 </book> 
```

与另一个元素（已编辑，我已将部分编辑为字符串）

```
<book genre="autobiography">
   <title>The Autobiography of Benjamin Franklin</title>
   <author>
     <first-name>Ben</first-name>
     <last-name>Franklin</last-name>
   </author>
   <price>89.88</price>
</book> 
```

我使用的代码在这里

```
 XElement XmlTree = XElement.Parse(text);//text contain edited portion
            XmlElement XMLE = (XmlElement)TreeV.SelectedItem;

            XmlDocument xdoc = new XmlDocument();
            xdoc.Load(scd_file);

            XmlDocumentFragment xfrag = xdoc.CreateDocumentFragment();
            xfrag.InnerXml = text;
            XmlDocumentFragment xfrag1 = xdoc.CreateDocumentFragment();
            xfrag1.InnerXml = XMLE.OuterXml;

            xdoc.ReplaceChild(xfrag, xfrag1); 
```

但它显示错误（xfrag1 不是 xdoc 的节点）请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:39:39.237

谢谢你们，我得到了解决方案。

```
 XmlElement XMLE = (XmlElement)TreeV.SelectedItem;// selection from treeview(TreeV) that we want to edit (2nd element)
  XmlDocument XD = new XmlDocument();
  XD.LoadXml(text);// text is edited part save as a string
  XmlNode root=XD.DocumentElement;
  XmlDocument xml = XMLE.ParentNode.OwnerDocument;
  XmlNode import= xml.ImportNode(root, true);
  XMLE.ParentNode.ReplaceChild(import, XMLE);
  xml.Save(scd_file); //scd_file path 
```

# ruby-on-rails - 设计 + OmniAuth + 炼油厂 CMS

> ID：12581853
> 
> 赞同：1
> 
> 时间：2012-09-25T11:18:27.547
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2, omniauth, refinerycms

我们使用 Devise + OmniAuth 作为身份验证机制，通过 facebook、twitter 和 openid 对用户进行身份验证。现在我们需要将 Refinery CMS 集成到我们现有的应用程序中。

**要求：** 应用程序首页有注册/登录按钮，带有一些静态内容。登录后，用户可以访问受限区域。我们想在受限页面上添加访问炼油厂 CMS 的链接。它不应该再次要求任何凭证。

我们按照以下链接集成炼油厂 CMS：

1.  [http://refinerycms.com/guides/with-an-existing-rails-app](http://refinerycms.com/guides/with-an-existing-rails-app)
2.  [http://refinerycms.com/guides/with-an-existing-rails-31-devise-app](http://refinerycms.com/guides/with-an-existing-rails-31-devise-app)

现在启动服务器后，当我们点击 `http://localhost:3000`它时，它会重定向到`http://localhost:3000/refinery/users/register`. 用户应该能够看到包含公共内容的主页。只有在用户使用任何受支持的服务进行身份验证后，用户才能访问炼油厂 CMS（通过 /help）。

这是**config/routes.rb的快照**

```
mount Refinery::Core::Engine, :at => '/'
...
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks", registrations: "registrations" }
....
root :to => "home#index" 
```

**配置/应用程序.rb**

```
config.autoload_paths += Dir["#{config.root}/lib/**/"] # to load files from lib directory, including subfolders

    config.before_initialize do
      require 'refinery_patch'
      require 'restrict_refinery_to_refinery_users'
    end

    include Refinery::Engine
    after_inclusion do
      [ApplicationController, ApplicationHelper].each do |c|
        c.send :include, ::RefineryPatch
      end

      ::Refinery::AdminController.send :include, ::RestrictRefineryToRefineryUsers
      ::Refinery::AdminController.send :before_filter, :restrict_refinery_to_refinery_users
    end 
```

我们是初学者。任何帮助都是不言而喻的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T05:55:44.870

我们遵循了[http://sdownie.com/blogs/integrating-refinery-rails-3-2-into-your-existing-rails-app](http://sdownie.com/blogs/integrating-refinery-rails-3-2-into-your-existing-rails-app)的工作。

我们在这里讨论了一些问题。

[https://groups.google.com/d/topic/refinery-cms/G5twqi0uTHs/discussion](https://groups.google.com/d/topic/refinery-cms/G5twqi0uTHs/discussion) [https://groups.google.com/d/topic/refinery-cms/w-4VrfPewQY/discussion](https://groups.google.com/d/topic/refinery-cms/w-4VrfPewQY/discussion)

# javascript - 在代码中使用 $(this) 时，人们如何命名它？

> ID：12581856
> 
> 赞同：0
> 
> 时间：2012-09-25T11:18:42.983
> 
> 标签：javascript, jquery

我有以下代码：

```
$('#detailData')
    .on('change', '.updatable', function () {
        var type = $(this).attr('id').split('_')[1];
        updateField(entity, $(this), type);
        return false;
    }) 
```

我想添加到代码中并`$(this)`多次使用。为了清楚起见，我想分配`this`给一个变量。当我使用 jQuery 时，我看到人们`$`在变量名之前放置了一个。我是否正确地说以下是正确的？

```
var $abc = $('#abc'); 
```

`$(this)`如果这是正确的，那么如果我理解正确指向 DOM 变量，我应该如何命名。DOM 变量和返回的内容之间有什么区别`$('#abc')`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T11:21:24.863

使用`$this`to store`$(this)`只是一种代码*约定*，用于提醒程序员所讨论的变量*已经*是一个 jQuery 对象，而不是一个纯 DOM 元素。

它有助于避免常见的写作错误：

```
var foo = $(...);
$(foo).doSomething(); 
```

该错误是无害的，但会导致代码效率稍低。

相反， using`$foo`也提醒程序员他们不能直接在该变量上调用本机 DOM 函数，而应该使用`$foo[n]`or`$foo.get(n)`来访问封闭的 DOM 元素。

另外，不要忘记，由于`this` *它*只是一个纯 DOM 元素，因此您可以（并且应该）在适当的时候使用本机 DOM 函数或属性：

```
var type = this.id.split('_')[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:21:40.537

`$this`很常见，但这完全取决于您。一致性是最重要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:23:05.237

```
 //jQuery to jQuery object
 $myvar = $(this);

 //jQuery to JavaScript HTML object
 var myVar = $(this)[0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T11:27:39.127

指某东西的用途：

var $this = $(this);

通常是当函数在 this 的上下文中对对象调用多个单独的调用时。这个想法是，必须一次获取这个 dom 对象是一种性能成本，因为 Jquery 将重新扫描 dom 以获取所需的对象。通过将对象分配给本地范围，在 $(this) 上重用 $this 的成本会降低。

碰巧使用 $this 作为局部变量名是大多数开发人员常用的命名方案。

```
$('#detailData').on('change', '.updatable', function (){
    var $this = $(this),
        type = $this.attr('id').split('_')[1];
    updateField(entity, $this, type);
    return false;
}); 
```

# java - Primefaces -> 数据表 - 延迟加载

> ID：12581864
> 
> 赞同：2
> 
> 时间：2012-09-25T11:19:05.613
> 
> 标签：java, datatable, primefaces, nullpointerexception, lazy-loading

我对**DataTable - Lazy Loading**有疑问。我认为问题出在**IdiomasBean.java**（TableBean.java 的等效项）中，如果我输入：

```
public IdiomasBean() {  }

public LazyDataModel<Idiomas> getLazyModel() {  
        lazyModel = new LazyIdiomasDataModel(idiomasBo.findAllIdiomas());
        return lazyModel;
} 
```

我得到了正确的数据表，但是...... `sortBy`，`filterBy`并且`onRowSelect`不工作。

```
public IdiomasBean() {  
        lazyModel = new LazyIdiomasDataModel(idiomasList);
}

public LazyDataModel<Idiomas> getLazyModel() {  
        return lazyModel;
} 
```

我得到：**java.lang.NullPointerException** 这是堆栈跟踪：

```
> at
> brany.view.lazyDataModel.LazyIdiomasDataModel.load(LazyIdiomasDataModel.java:42)
>   at
> org.primefaces.component.datatable.DataTable.loadLazyData(DataTable.java:690)
>   at
> org.primefaces.component.datatable.DataTableRenderer.encodeMarkup(DataTableRenderer.java:192)
>   at
> org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:108)
>   at
> javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
>   at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1763)
>   at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)    at
> javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
>   at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1756)
>   at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
>   at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
>   at
> com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:401)
>   at
> com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
>   at
> com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
>   at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)    at
> com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
>   at javax.faces.webapp.FacesServlet.service(FacesServlet.java:410)   at
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
>   at
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
>   at
> org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
>   at
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
>   at
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
>   at
> org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
>   at
> org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
>   at
> org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
>   at
> org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
>   at
> org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
>   at
> org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
>   at
> org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
>   at
> org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
>   at
> org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
>   at
> org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
>   at
> org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
>   at
> java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
>   at
> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
>   at java.lang.Thread.run(Thread.java:722) 
```

这是其余的代码：

**索引.xhtml**

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"      
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>PRUEBA PRIMEFACES</title>
    </h:head>
    <h:body>
<h:form id="form">
    <p:dataTable var="id" value="#{idiomasBean.lazyModel}" paginator="true" rows="10"
                 paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                 rowsPerPageTemplate="5,10,15" selectionMode="single" selection="#{idiomasBean.selectedIdiomas}" id="idiomasTable" lazy="true">

        <p:ajax event="rowSelect" listener="#{idiomasBean.onRowSelect}" update=":form:display" oncomplete="idiomasDialog.show()" />

        <p:column headerText="Nombre" sortBy="#{id.nombre}" filterBy="#{id.nombre}">
            <h:outputText value="#{id.nombre}" />
        </p:column>

        <p:column headerText="Año" sortBy="#{id.name}" filterBy="#{id.name}">
            <h:outputText value="#{id.name}" />
        </p:column>

    </p:dataTable>

    <p:dialog header="Detalles Idioma" widgetVar="idiomasDialog" resizable="false"
              showEffect="explode" hideEffect="explode">

        <h:panelGrid id="display" columns="2" cellpadding="4">

            <h:outputText value="Nombre:" />
            <h:outputText value="#{idiomasBean.selectedIdiomas.nombre}" style="font-weight:bold"/>

            <h:outputText value="Valoración:" />
            <h:outputText value="#{idiomasBean.selectedIdiomas.valoracion}" style="font-weight:bold"/>

        </h:panelGrid>
    </p:dialog>
</h:form>
    </h:body>
</html> 
```

**idiomasBean.java**

```
package brany.spring.managedBean;

import brany.model.bo.imp.IdiomasBo;
import brany.model.entityBean.Idiomas;
import brany.view.lazyDataModel.LazyIdiomasDataModel;
import java.util.List;
import org.primefaces.model.LazyDataModel;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Controller;

@Controller  
@Scope("session")
public class IdiomasBean implements java.io.Serializable {
    private String nombre;
    private String name;

    @Autowired
    private IdiomasBo idiomasBo;

    private List<Idiomas> idiomasList;

    private LazyDataModel<Idiomas> lazyModel;
    private Idiomas selectedIdiomas;

    public IdiomasBean() {  
        lazyModel = new LazyIdiomasDataModel(idiomasList);
    }

    public void setIdiomasBo (IdiomasBo idiomasBo) {
        this.idiomasBo = idiomasBo;
    }

    public List<Idiomas> getIdiomasList() {
        idiomasList = idiomasBo.findAllIdiomas();
        return idiomasList;
    }

    public IdiomasBo getIdiomasBo () {
        return idiomasBo;
    }

    public String getNombre() {
        return this.nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }
    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public LazyDataModel<Idiomas> getLazyModel() {  
        return lazyModel;
    } 

    public Idiomas getSelectedIdiomas() {  
        return selectedIdiomas;  
    }  

    public void setSelectedIdiomas(Idiomas selectedIdiomas) {  
        this.selectedIdiomas = selectedIdiomas;  
    } 
} 
```

**LazyIdiomasDataModel.java**

```
package brany.view.lazyDataModel;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import brany.model.entityBean.Idiomas;
import brany.view.util.LazySorter;
import org.primefaces.model.LazyDataModel;
import org.primefaces.model.SortOrder;

public class LazyIdiomasDataModel extends LazyDataModel<Idiomas> {

    private List<Idiomas> datasource;

    public LazyIdiomasDataModel(List<Idiomas> datasource) {
        this.datasource = datasource;
    }

    @Override
    public Idiomas getRowData(String rowKey) {
        for(Idiomas idiomas : datasource) {
            if(idiomas.getNombre().equals(rowKey))   
                return idiomas;
        }

        return null;
    }

    @Override
    public Object getRowKey(Idiomas idiomas) {
        return idiomas.getNombre();                 
    }

    @Override
    public List<Idiomas> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String,String> filters) {
        List<Idiomas> data = new ArrayList<Idiomas>();

        //filter
        for(Idiomas idiomas : datasource) {
            boolean match = true;

            for(Iterator<String> it = filters.keySet().iterator(); it.hasNext();) {
                try {
                    String filterProperty = it.next();
                    String filterValue = filters.get(filterProperty);
                    String fieldValue = String.valueOf(idiomas.getClass().getField(filterProperty).get(idiomas));

                    if(filterValue == null || fieldValue.startsWith(filterValue)) {
                        match = true;
                    }
                    else {
                        match = false;
                        break;
                    }
                } catch(Exception e) {
                    match = false;
                } 
            }

            if(match) {
                data.add(idiomas);
            }
        }

        //sort
        if(sortField != null) {
            Collections.sort(data, new LazySorter(sortField, sortOrder));
        }

        //rowCount
        int dataSize = data.size();
        this.setRowCount(dataSize);

        //paginate
        if(dataSize > pageSize) {
            try {
                return data.subList(first, first + pageSize);
            }
            catch(IndexOutOfBoundsException e) {
                return data.subList(first, first + (dataSize % pageSize));
            }
        }
        else {
            return data;
        }
    }
} 
```

**IdiomasBo.java**

```
package brany.model.bo.imp;

import brany.model.bo.IIdiomasBo;
import brany.model.dao.imp.IdiomasDao;
import brany.model.entityBean.Idiomas;
import java.util.List;
import org.springframework.stereotype.Service;

@Service
public class IdiomasBo implements IIdiomasBo {

    private IdiomasDao idiomasDao;

    public void setIdiomasDao (IdiomasDao idiomasDao) {
        this.idiomasDao = idiomasDao;
    }

    @Override
    public List<Idiomas> findAllIdiomas() {
        return this.idiomasDao.findAllIdiomas();
    }   
} 
```

**IdiomasDao.java**

```
package brany.model.dao.imp;

import brany.model.dao.IIdiomasDao;
import brany.model.entityBean.Idiomas;
import java.util.List;
import org.springframework.orm.hibernate3.support.HibernateDaoSupport;
import org.springframework.stereotype.Repository;

@Repository
public class IdiomasDao extends HibernateDaoSupport implements IIdiomasDao {
    @Override
    public List<Idiomas> findAllIdiomas() {      
        return getHibernateTemplate().find("from Idiomas");
    }
} 
```

**成语.java**

```
package brany.model.entityBean;

public class Idiomas  implements java.io.Serializable {
     private Integer ididioma;
     private String nombre;
     private String name;

    public Idiomas() {
    }

    public Idiomas(String nombre, String name) {
       this.nombre = nombre;
       this.name = name;
    }

    public Integer getIdidioma() {
        return this.ididioma;
    }

    public void setIdidioma(Integer ididioma) {
        this.ididioma = ididioma;
    }
    public String getNombre() {
        return this.nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }
    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

**LazySorter.java**

```
package brany.view.util;

import java.util.Comparator;
import brany.spring.util.ReflectionUtil;
import org.primefaces.model.SortOrder;

public class LazySorter<T> implements Comparator<T> {

    private String sortField;
    private SortOrder sortOrder;

    public LazySorter(String sortField, SortOrder sortOrder) {
        this.sortField = sortField;
        this.sortOrder = sortOrder;
    }

    @Override
    public int compare(Object first, Object second) {
        try {
            Object value1 = ReflectionUtil.getValue(first, sortField);
            Object value2 = ReflectionUtil.getValue(second, sortField);

            int value = 0;

            if(value1 instanceof Comparable)
                value = ((Comparable) value1).compareTo(value2);
            else if(value1 instanceof Boolean && !value1.equals(value2))                
                value = (Boolean)value1 ? 1 : -1; 

            return SortOrder.ASCENDING.equals(sortOrder) ? value : -1 * value;
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
} 
```

**ReflectionUtil.java**

```
package brany.spring.util;

public class ReflectionUtil {
    public static Object getValue(Object object, String fieldName) {
        try {
            String getterName = "get" + Character.toUpperCase(fieldName.charAt(0)) + fieldName.substring(1);
            return object.getClass().getMethod(getterName).invoke(object);
        } catch (Exception e) {
            return null;
        }
    }
} 
```

**面孔-config.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.1"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd">

    <application>
            <!-- Estamos activando el soporte de Spring para la inyección de dependencias 
            de tal forma que JSF sabrá que si no encuentra un bean bajo su contexto debe 
            ir a buscarlo al contexto de Spring -->
            <el-resolver>
                    org.springframework.web.jsf.el.SpringBeanFacesELResolver
            </el-resolver>
    </application>

        <!-- Definimos el bean que va a trabajar con la aplicación que tiene asociada la 
        clase IdiomasBean y seteamos el atributo (property) idiomasBo-->
    <managed-bean>
        <managed-bean-name>idiomasBean</managed-bean-name>
        <managed-bean-class>brany.spring.managedBean.IdiomasBean</managed-bean-class>

        <managed-bean-scope>session</managed-bean-scope>
        <managed-property>
            <property-name>idiomasBo</property-name>
            <value>#{idiomasBo}</value>
        </managed-property>
        </managed-bean>

</faces-config> 
```

有没有人有任何解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-25T01:23:01.693

试试这个你的 LazySorter 类应该通过不工作来修复排序

```
public class LazySorter implements Comparator<Idiomas> {

    private String sortField;

    private SortOrder sortOrder;

    /**
     * initializing sorting field and sorting order
     * @param sortField
     * @param sortOrder
     */
    public LazySorter(String sortField, SortOrder sortOrder) {
        this.sortField = sortField;
        this.sortOrder = sortOrder;
    }

    /**
     * Comparing object1 and object2 with reflection
     * @param object1
     * @param object2
     * @return
     */
    @Override
    public int compare(Idiomas object1, Idiomas object2) {
        try {
            Field field1 = object1.getClass().getDeclaredField(this.sortField);
            Field field2 = object2.getClass().getDeclaredField(this.sortField);
            field1.setAccessible(true);
            field2.setAccessible(true);
            Object value1 = field1.get(object1);
            Object value2 = field2.get(object2);

            int value = ((Comparable)value1).compareTo(value2);
            return SortOrder.ASCENDING.equals(sortOrder) ? value : -1 * value;
        }
        catch(Exception e) {
            throw new RuntimeException();
        }
    }
} 
```

# cordova - Jquery-mobile 和 Phonegap 最佳技术

> ID：12581872
> 
> 赞同：2
> 
> 时间：2012-09-25T11:19:35.653
> 
> 标签：cordova, jquery-mobile, multipage

我正在使用 jqmobile 和 phonegap。在开发移动 Web 应用程序时，通常建议使用多页技术，即将不同的页面放在同一个 .html 文件中，以便更快地转换。但是，只要我使用phonegap（所以每个html文件都包含在每个手机的apk LOCALLY中），是否也建议使用多页技术？使用 jqmobile 和 phonegap 将多个文件放在同一个 .html 中会更快吗？

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:24:13.920

老实说，jQuery Mobile 并不是在基于 PhoneGap 的应用程序中使用的最佳工具。jQM 依赖于 jQuery，其中包含许多在构建移动应用程序时并不真正需要的代码。那里有支持 IE 和 Firefox 的代码，但由于三大手机操作系统（iOS、Android、BB）都是基于 WebKit 的，所以它只是过头了。

但是，如果我打算在我的 PG 应用程序中使用 jQM，我会尽可能使用单页方法。这将防止人们在使用 jQM/PG 时看到的几个常见问题。例如，当您导航到第二个页面时，移动设备上的过渡并不总是很好，它们在 Android 上尤其糟糕。同样，当您的应用程序移动到第二页时，它必须重新加载 jQuery、jQuery Mobile 和 PhoneGap，这需要时间。因此，如果您可以通过显示/隐藏 div 将所有内容放入一页中，那么性能会更好。如果您需要转到第二个页面，请查看通过 AJAX 将其加载到当前页面 DOM 中。

此外，如果您使用的是 Android，您可能希望禁用一些 CSS 以使事情运行更顺畅。

[https://stackoverflow.com/a/8212384/41679](https://stackoverflow.com/a/8212384/41679)

# c# - C# - Singleton - 我需要一个构造函数吗？

> ID：12581874
> 
> 赞同：0
> 
> 时间：2012-09-25T11:20:00.160
> 
> 标签：c#, design-patterns, singleton

> **可能重复：**
> [Jon Skeet 的 Singleton 澄清](https://stackoverflow.com/questions/2550925/singleton-by-jon-skeet-clarification)

我正在阅读单身人士，现在（也感谢 SO）非常了解。

我的实现（应该是教科书）看起来像

```
public sealed class Singleton
{
   private static readonly Singleton instance = new Singleton();

   private Singleton(){ }    
   static Singleton(){ }

   public static Singleton Instance { get { return instance; } }
} 
```

我的问题是，在 .NET 4.0 上，我是否应该包含构造函数（我认为私有 ctor 是隐式创建的 - 但是静态（可疑）呢）。

以下似乎同样有效，但我担心它只在我设计的测试示例中运行良好。

```
public sealed class Singleton
{
    private static readonly Singleton instance = new Singleton();    
    public static Singleton Instance { get { return instance; } }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T11:21:48.863

> 我的问题是，在 .NET 4.0 上，我是否应该包含构造函数（我认为它们现在是隐式创建的）。

是的，Fx4 或 C# 4 没有变化。
如果您不提供实例构造函数，那么编译器会提供一个**公共**构造函数。
没有理由提供静态构造函数。

> 以下似乎也同样有效，

关键是那 **不**`var s = new Singleton();` 应该工作。这就是要测试的东西。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:25:07.553

> 除非类是静态的，否则 C# 编译器会为没有构造函数的类提供公共默认构造函数，以启用类实例化。有关详细信息，请参阅静态类和静态类成员。

密封关键字仅使其不可继承。

您可以通过将构造函数设为私有来防止实例化类。如果您不包含构造函数，它将不尊重单例设计模式。所以基本上，是的，如果你想要一个真正的单身人士，你也应该包括那些。

正如 hvd 的评论所指出的，您还应该包括其他构造函数。

来源： [官方 MSDND C#](http://msdn.microsoft.com/en-us/library/ms173115%28v=vs.80%29.aspx)**

# asp.net - 为什么我在第一次点击更新面板和转发器后出现问题？

> ID：12581877
> 
> 赞同：0
> 
> 时间：2012-09-25T11:20:21.040
> 
> 标签：asp.net, updatepanel, repeater

我遇到了更新面板和中继器的问题。我有一个在更新面板中的中继器，我有一个在另一个更新面板中的 div。所以在中继器中我也有 GroupRadioButton。当显示单选按钮checkedchanged div时。通常我们无法到达外面的中继器项目。所以我在 itemdatabound 中对其进行编码。第一次点击正常工作。但是第二次点击页面是回发。我该如何解决？

这是我的转发器和 itemdatabound 事件。

```
<asp:UpdatePanel ID="upUsers" runat="server">
    <ContentTemplate>
        <div class="content">
            <asp:Repeater id="Repeater1" runat="server" OnItemDataBound="Repeater1_ItemDataBound">
                <vs:GroupRadioButton ID="rbChoose" GroupName="grup1" runat="server" OnCheckedChanged="select_CheckedChanged" AutoPostBack="true" />
                ... another control etc ...
            </asp:Repeater>
        </div>
    </ContentTemplate>
</asp:UpdatePanel>

there are some buttons and controls between both two updatepanels ...

<asp:UpdatePanel ID="upUserDetails" runat="server">
    <ContentTemplate>
        <div class="content">
            <div id="divUserDetails" runat="server">
                ... details ...
            </div>
        </div>
    </ContentTemplate>
</asp:UpdatePanel>

protected void Repeater1_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        ScriptManager sm = (ScriptManager)Master.FindControl("scr");
        AsyncPostBackTrigger trigger = new AsyncPostBackTrigger();
        GroupRadioButton rbChoose = e.Item.FindControl("rbChoose") as GroupRadioButton;
        sm.RegisterAsyncPostBackControl(rbChoose);
        trigger.ControlID = rbChoose.ID;
        upUserDetails.Triggers.Add(trigger);
        upUserDetails.UpdateMode = UpdatePanelUpdateMode.Always;
    }
} 
```

# c# - 为什么时区偏移返回不同的值？

> ID：12581881
> 
> 赞同：4
> 
> 时间：2012-09-25T11:20:29.990
> 
> 标签：c#, javascript

我的位置是格林威治标准时间 +5:30

当我尝试`getTimezoneOffset`使用 JavaScript查找时

```
var x = new Date();
var currentTimeZoneOffsetInHours = x.getTimezoneOffset() / 60; 
```

我得到了价值`-5.5`。奇怪的是，当我使用 C# 做同样的事情时

```
var localZone = TimeZone.CurrentTimeZone;
var localOffset = localZone.GetUtcOffset(new Date());
var currentTimeZoneOffsetInHours = localOffset.TotalHours; 
```

返回值为`5.5`。

这个标志是设计改变的还是我错过了什么重要的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T11:23:50.590

[JavaScript`getTimeZoneOffset`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset)返回要添加到*本地*时间以达到 UTC 的偏移量。（“时区与 UTC 的偏移”的描述具有误导性，IMO。）

.NET`GetUtcOffset`返回要添加到*UTC*时间以达到本地时间的偏移量，这是 IMO 更传统的方法。基本上，这只是一个不同的参考点。

请注意，如果您使用的是 .NET 3.5 或更高版本，您应该真正使用[`TimeZoneInfo`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx)而不是`TimeZone`.

# entity-framework - Entity Framework 4.0 - The underlying provider failed on Open

> ID：12581887
> 
> 赞同：2
> 
> 时间：2012-09-25T11:20:56.450
> 
> 标签：entity-framework, c#-4.0, linq-to-sql

We have a web application with Entity Framework 4.0\. Unfortunately, when the large volume of users hit the application the EF throws an error *The underlying provider failed on Open*

Below is the code snippet:

```
//DAL
public IQueryable<EmployeeEntity> GetEmployeeDetail()
{
    DatabaseEntities ent = new DatabaseEntities(this._connectionString);
    IQueryable<EmployeeEntity> result = from employee in ent.EmployeeEntity
                                           select employee;

    return result;
} 
```

Please note the above code returns IQuerable.

1.  Is anything wrong with above pattern that could cause the exception to occur?
2.  When and how does Entity Framework determine to close / open db connection and also how long to retain?
3.  On what scenario does above error occurs?
4.  What's the maximum number of connection pool for EF and how do we configure?
5.  Do we need to explicitely specify open and close
6.  Is code below a best way to resolve above issue?

* * *

```
public IQueryable<EmployeeEntity> GetEmployeeDetail()
{
    using (DatabaseEntities ent = new DatabaseEntities(this._connectionString))
    {
        IQueryable<EmployeeEntity> result = from employee in ent.EmployeeEntity 
                                            select employee;                     
        return result.ToList().AsQuerable();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:56:02.583

The `ToList()` call will cause the query to run on the database immediately and as this is not filtered in any way will return every employee in your database. This is probably likely to cause you performance issues.

However you can't remove this in your case because if you return the `IQueryable` directly then the context will be disposed by the time you try and fetch results.

You could either:

*   change the way it works so that the scope of `ent` does not end when the method returns and return the query without calling `ToList()`. You can then further filter the `IQueryable` before calling `ToList()`.
*   call `ToList()` within the method but filter/limit the query first (e.g. pass some parameters into the method to specify this) to reduce the number of rows coming back from the database.

# windows - 为什么是 TranslateMessage

> ID：12581889
> 
> 赞同：7
> 
> 时间：2012-09-25T11:20:58.177
> 
> 标签：windows, winapi, visual-c++

我试图理解“消息循环”。这是它的外观：

```
MSG msg = { };
while (GetMessage(&msg, NULL, 0, 0))
{
    TranslateMessage(&msg);
    DispatchMessage(&msg);
} 
```

到目前为止，我对这个概念很清楚（至少我希望如此）。当用户使用键盘和鼠标与 Windows 应用程序交互时，这些事件被相应的设备驱动程序转换为适当的消息并发布到系统消息队列。

操作系统从队列中逐一删除消息并检查它们中的每一个以将它们发送到负责创建目标窗口的相应应用程序线程的队列。

现在在我的应用程序中

```
MSG msg;
GetMessage(&msg, NULL, 0, 0); 
```

从线程特定的消息队列中删除消息并填充 MSG 结构。

但是`TranslateMessage`据说将虚拟击键转换为字符并将它们发送回调用者线程的消息队列。

`DispatchMessage`指示 OS 调用适当的目标窗口的 Windows 过程。

两个疑惑：

1）TranslateMessage的确切功能是什么；是否只是将虚拟击键转换为字符消息（我假设虚拟击键是字母和数字以外的击键），如果字符消息被发送回队列，循环是否中断?

2）鼠标事件呢？它们是直接调度的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T12:17:42.257

是的，当您的消息循环看起来像这样时，您必须调用 TranslateMessage() 是没有意义的。但这不是规范的 Petzold 消息循环的样子：

```
while (GetMessage(&msg, NULL, 0, 0))
{
    if (!TranslateAccelerator(msg.hwnd, hAccelTable, &msg))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
} 
```

加速器在这里很重要，也称为“快捷键”。无论哪个窗口具有焦点，您的程序都希望响应它们。就像 F1 显示程序的帮助文件一样，不管哪个控件有焦点。您不想编写子类化每个控制窗口的代码来识别 F1。

所以如果它是一个快捷键，那么你**不想**调用 TranslateMessage。如果键碰巧与键入键匹配，则该键不应产生 WM_CHAR 消息。这就是为什么它是一个单独的调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T11:31:24.277

简而言之，

1.  是的，它只是将虚拟按键转换为字符消息
2.  是的，他们是直接派出的，见[msdn上的这个博客](https://web.archive.org/web/20160202135109/http://blogs.msdn.com/b/jfoscoding/archive/2005/07/28/444647.aspx)

详情见

*   [翻译消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644955%28v=vs.85%29.aspx)

*   [获取消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644936%28v=vs.85%29.aspx)

*   [消息和消息队列](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632590%28v=vs.85%29.aspx)

*   [关于鼠标输入](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645601%28v=vs.85%29.aspx)

# scala - Scala Lift Rest API 响应 HTML

> ID：12581890
> 
> 赞同：1
> 
> 时间：2012-09-25T11:20:59.717
> 
> 标签：scala, rest, lift

我目前正在使用 Lift 作为框架来开发 Rest Api。大多数请求都使用 Json 作为返回类型，效果很好：

```
serve ("api" / "item" prefix {
    case _ :: Nil JsonGet _ => {
      if (checkKey(S.params("api_key").mkString)) Item.newItem(S.params("item_id").mkString, S.params("api_key").mkString)
    }
  }) 
```

现在我想添加一个函数，它返回存储在 mysql db 中的纯 html。所以基本上我想将一个字符串返回给 Resthelper。我试过这样的东西，但它没有编译：

```
serve {
    case "itemDesc" :: itemnum :: _ => {
      Item.getDescription(itemnum)
    }
  } 
```

也许我很愚蠢，但我在电梯“食谱”中找不到任何东西

更新：

```
serve { 
    case "itemDesc" :: AsInt(itemnum) :: _ XmlGet _ => { 
      Item.getDescription(itemnum) 
    } 
  } 
```

我试图通过将 html 作为 XML 出售来愚弄电梯。它编译但最后没有工作。显然不可能从 RestHelper 回复正常的字符串。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:35:08.067

你必须回馈`Box[LiftResponse]`。

所以在那种情况下它会是`Full(PlainTextResponse(Item.getDescription(itemnum))`。

我还将添加隐式转换`LiftResponse -> Box[LiftResponse]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:08:12.767

```
serve {
    case "itemDesc" :: AsInt(itemnum) :: _ XmlGet _ => {
      Full(PlainTextResponse(Item.getDescription(itemnum), ("Content-Type" -> "text/html") :: Nil, 200))
    }
  } 
```

是正确答案。我必须将内容类型添加到 PlainTextResponse 才能解析 HTML。有了这个片段，我可以让我的 rest api 像魅力一样工作，并添加一个函数，将内容类型为 html 的纯文本返回给浏览器。

# c# - 重定向到引荐来源网址，但在查询字符串中添加一些内容

> ID：12581891
> 
> 赞同：6
> 
> 时间：2012-09-25T11:21:00.097
> 
> 标签：c#, .net, asp.net-mvc-3

使用 ASP.Net MVC，我正在发布一个动作（然后我将一个电子邮件地址添加到数据库表等）

我需要重新定向回引荐来源网址，但还需要在引荐来源网址的查询字符串中添加一些内容。这个动作可以从很多地方调用，所以我不能重定向到当前控制器中的动作。

如何重定向到引用者并向查询字符串添加一些内容（请记住，引用者可能已经具有我需要保留的查询字符串值）。

```
[HttpPost]
public ActionResult MyAction(MyModel model)
{
    //Do stuff.

    return new RedirectResult(Request.UrlReferrer.ToString()); // + query string value?
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T12:06:41.397

使用[UriBuilder](http://msdn.microsoft.com/en-us/library/system.uribuilder.aspx)和[HttpUtility.ParseQueryString](http://msdn.microsoft.com/en-us/library/ms150046.aspx)：

```
[HttpPost]
public ActionResult MyAction(MyModel model)
{
    //Do stuff.

    UriBuilder uriBuilder = new UriBuilder(Request.UrlReferrer);
    NameValueCollection query = HttpUtility.ParseQueryString(uriBuilder.Query);
    query.Add("myparam", "something");
    uriBuilder.Query = query.ToString();

    return new RedirectResult(uriBuilder.Uri);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:57:06.247

尝试这个

```
string url = Request.UrlReferrer.ToString();
if(url.Contains("?"))
    url += "&newparam=something";
else
    url += "?newparam=something";        
return new RedirectResult(url); 
```

# java - Java 音频流 - FireFox 中的 Mp3 音频文件无法播放

> ID：12581893
> 
> 赞同：0
> 
> 时间：2012-09-25T11:21:09.980
> 
> 标签：java, firefox, mp3, audio-streaming, outputstream

我最近创建了一个 Java 程序，使用 servletOutputStream 将 MP3 音频流式传输到浏览器。我在 Firefox、chrome 和 IE 上对其进行了测试，它运行良好，直到我将 Firefox 更新到最新版本（15.0.1）。起初我以为这是因为这个新版本的 FireFox 包含了新版本的 Flash，但我检查了 Chrome 和 IE，它们都使用了最新版本的 Flash。有谁知道为什么最新版本的 Firefox 会导致音频流停止工作？没有错误被抛出，它只是不会播放。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:49:25.493

我们在将 Flash 播放器从 11.2.x 升级到 11.4.x 之前，曾经完美地加载和播放 mp3 文件的音乐播放器遇到了问题。

这目前**仅影响 Firefox**，因为 IE 和 Google Chrome 似乎仍在使用以前版本的 Flash 播放器（分别为 11.3.x 和 11.2.x）。

我们使用两行简单的代码加载音乐

```
var player:Sound = new Sound();
player.loadSound(filepath, true); 
```

我可以看到该文件已加载到进度条上，但它只是无法开始播放。

这当然不能帮助您解决问题，但希望附加信息对其他更多的 Flash 专家很重要。

# android - FragmentPagerAdapter getItem 未被调用

> ID：12581896
> 
> 赞同：127
> 
> 时间：2012-09-25T11:21:15.603
> 
> 标签：android, android-fragments, android-fragmentactivity

我无法在 FragmentPagerAdapter 中重用片段 .. 使用 destroyItem() 方法，它正在删除片段但仍然没有再次调用 getItem() .. 只有 2-3 个图像，所以我使用 FragmentPagerAdapter 而不是 FragmentStatePagerAdapter ..

```
public class ExamplePagerAdapter extends FragmentPagerAdapter {

    ArrayList < String > urls;
    int size = 0;
    public ExamplePagerAdapter(FragmentManager fm, ArrayList < String > res) {
        super(fm);
        urls = res;
        size = urls.size();
    }

    @Override
    public int getCount() {
        if (urls == null) {
            return 0;
        } else {
            return size;
        }

    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        FragmentManager manager = ((Fragment) object).getFragmentManager();
        FragmentTransaction trans = manager.beginTransaction();
        trans.remove((Fragment) object);
        trans.commit();
    }

    @Override
    public Fragment getItem(int position) {

        Fragment fragment = new FloorPlanFragment();
        Bundle b = new Bundle();
        b.putInt("p", position);
        b.putString("image", urls.get(position));
        Log.i("image", "" + urls.get(position));
        fragment.setArguments(b);
        return fragment;
    }
} 
```

在 FragmentActivity 中，

```
pager.setAdapter(new ExamplePagerAdapter(getSupportFragmentManager(), res2)); 
```

* * *

## 回答 #1

> 赞同：314
> 
> 时间：2012-09-25T12:00:25.473

亲吻答案：

简单地使用[FragmentStatePagerAdapter](https://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html)而不是[FragmentPagerAdapter](https://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)。

我得到了答案。首先我想删除这个问题，因为我犯了一个非常愚蠢的错误，但是这个答案将帮助那些面临同样问题的人，而不是`FragmentPagerAdapter`使用`FragmentStatePagerAdapter`。

正如评论中提到的@BlackHatSamurai：

> 这样做的原因是因为`FragmentStatePagerAdapter`销毁为未使用的片段。`FragmentPagerAdapter`才不是。

* * *

## 回答 #2

> 赞同：171
> 
> 时间：2015-04-16T05:33:32.657

使用 a`FragmentStatePagerAdapter`并不能完全解决我的问题，这是一个类似的问题，`onCreateView`在视图寻呼机中没有为子片段调用。我实际上将**我的内部嵌套`FragmentPagerAdapter`在另一个内部，`Fragment`**因此`FragmentManager`它们在所有这些中共享，从而保留了旧片段的实例。解决方法是改为将 的实例提供给我的主机片段中`getChildFragmentManager`的构造函数。`FragmentPagerAdapter`就像是...

```
FragmentPagerAdapter adapter = new FragmentPagerAdapter(getChildFragmentManager()); 
```

该`getChildFragmentManager()`方法可以通过片段访问，这对我有用，因为它返回`FragmentManager`该片段的私有，专门用于需要嵌套片段的情况。我希望这对可能遇到与我相同问题的人有所帮助！

*   但是请记住，使用`getChildFragmentManager()`您的最低 API 版本必须至少为`17 (4.2)`，因此这可能会给您带来麻烦。当然，如果您使用支持库 v4 中的片段，您应该没问题。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-02-16T15:17:26.240

**覆盖`long getItemId (int position)`**

`FragmentPagerAdapter`缓存它使用创建的片段`getItem`。我面临着同样的问题 - 即使`notifyDataSetChanged()` `getItem`没有打电话。

这实际上是一个功能，而不是一个错误。您需要覆盖`getItemId`，以便您可以正确地重用您的片段。由于您正在移除碎片，因此您的位置正在改变。如文档中所述：

> `long getItemId (int position)`
> 
> 返回给定位置的项目的唯一标识符。
> 
> 默认实现返回给定的位置。**如果项目的位置可以更改，子类应覆盖此方法。**

只需为每个片段提供一个唯一的 id 即可。

使用 a`FragementStatePagerAdapter`或返回`POSITION_NONE`是`int getItemPosition (Object object)`错误的。你不会得到任何缓存。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-04-28T02:39:41.730

我做了@kanika 和@Jraco11 发布的内容，但我仍然遇到了问题。

因此，经过大量更改后，我找到了一个对我有用的，并将下一个代码添加到我的 FragmentPagerAdapter 中：

```
 @Override
    public int getItemPosition(Object object) {
        return POSITION_NONE;
    } 
```

根据我阅读的内容，**getItemPosition**用于通知**ViewPager**是否刷新项目，并在可见位置的项目没有更改的情况下避免更新。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-10-30T10:23:08.203

方法`getItem()`仅用于创建新项目。一旦他们创建，这个方法将不会被调用。如果您需要获取适配器当前正在使用的项目，请使用此方法：

```
pagerAdapter.instantiateItem(viewPager, TAB_POS) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-21T09:37:23.280

有两种不同的情况： 1.) 每个寻呼机都有相同的布局：在这种情况下，最好通过 PagerAdapter 扩展自定义适配器并返回单个布局。

2.) 每个寻呼机都有不同的布局：在这种情况下，最好通过 FragmentStatePagerAdapter 扩展自定义适配器并为每个寻呼机返回不同的片段。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-04T07:19:29.593

我发现在选项卡布局上设置一个侦听器会阻止它被调用，可能是因为它们只有一个侦听器的空间`tabLayout.setOnTabSelectedListener`而不是一组侦听器。

# sql - SQL SERVER 2008 获取最后插入的值

> ID：12581902
> 
> 赞同：5
> 
> 时间：2012-09-25T11:21:27.193
> 
> 标签：sql, sql-server-2008, jdbc

这是我的桌子。

```
Ticket(id int auto_increment,name varchar(50)); 
```

插入此表后，我想将 id 和名称发送到邮件.. 我怎样才能获得最后插入的值。

帮助解决这个...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T11:26:02.563

调查：[Scope_identity](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)

```
SCOPE_IDENTITY() 
```

从该表中具有标识属性的表我们可以获得最后插入的记录 id 将是这样的

```
SELECT SCOPE_IDENTITY() 
```

**或者**

但这不是一种安全的技术：

```
SELECT MAX(Id) FROM Ticket 
```

**或者**

这也不是一个安全的技术：

```
SELECT TOP 1 Id FROM Ticket ORDER BY Id DESC 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T11:26:42.807

您应该使用[`SCOPE_IDENTITY()`](http://msdn.microsoft.com/en-us/library/ms190315.aspx)在您的表上获取最后一个主键插入值。我想这应该是`ID`价值。一旦你有了它，`SELECT`使用这个 ID 就可以了。

使用其中一种或另一种可能会导致值不准确，但也`@@IDENTITY`存在一些差异。

查看这些详细文章以获得更多见解、如何使用它们的详细描述、它们为何不同以及一些演示代码：

*   [**最后一次，不，你不能相信 IDENT_CURRENT()**](http://sqlperformance.com/2014/01/t-sql-queries/ident-current)

*   [**sql server identity vs scope_identity vs ident_current 检索最后插入的记录标识**](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T10:34:49.503

对于 2008 R2 Service Pack 1 之前的 SQL Server（[链接](http://support.microsoft.com/kb/2019779)）：

> 使用 SCOPE_IDENTITY() 和 @@IDENTITY 时，您可能会收到不正确的值

在这种情况下，OUTPUT 子句是最安全的机制：

```
DECLARE @InsertedRows AS TABLE (Id int)
DECLARE @NewId AS INT
INSERT INTO HumanResources.Employees
  ( /* column names */)
OUTPUT Inserted.Id INTO @InsertedRows
  VALUES (/* column values */)
SELECT @NewId = Id FROM @InsertedRows 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-06T19:27:30.457

在您的表中添加自动增量字段，例如.... index (INT,AUTO INCREEMENT) 然后在插入或完成任何操作之前 c 通过获取 max(index) 来获取您的最后一条记录

# mysql - SQL - ORDER BY ASC LIMIT 1 排除多个相同的结果 - 最佳方法？

> ID：12581903
> 
> 赞同：2
> 
> 时间：2012-09-25T11:21:29.573
> 
> 标签：mysql, sql, limit

我仍在学习 SQL，所以我想知道是否有更好的方法来执行以下操作。

我需要获取列中最低和最高值的行数据（我们称之为columnA）。我会使用：

```
SELECT *
  FROM table
 ORDER BY columnA
  DESC LIMIT 1 
```

问题是我只得到一个结果，因为`LIMIT 1`ColumnA 中可能有相同的最低/最高值，而在其他列中具有不同的值。我也需要其他行。

有，`SELECT(MAX)`但我相信这也只会产生一行数据。

我能想到的方法是将最高/最低的 columnA 值放入一个变量中，然后返回到第二个查询中，`OR`使用`LEFT JOIN`别名表在单个查询中执行此操作，但还有更直接的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:24:04.423

最简单的方法是执行子查询：

```
SELECT * FROM MyTable WHERE columnA = (SELECT MAX(columnA) FROM MyTable); 
```

您甚至可以同时查询两个极端：

```
SELECT * FROM MyTable
WHERE columnA = (SELECT MAX(columnA) FROM MyTable);
   OR columnA = (SELECT MIN(columnA) FROM MyTable); 
```

我还没有测试过下一个（不知道 MySQL 是否支持`UNION`子查询），但它应该也可以工作，可能效率更高一些（取决于您的数据大小）。

```
SELECT * FROM MyTable
WHERE columnA IN (
    SELECT MAX(columnA) FROM MyTable
    UNION
    SELECT MIN(columnA) FROM MyTable
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:27:12.590

另一种选择是：

```
SELECT * 
FROM MyTable m1 
WHERE not exists (select 1 from MyTable where columnA > m1.columnA) 
```

# ios - mkmapview 自定义标注气泡 ios6

> ID：12581916
> 
> 赞同：4
> 
> 时间：2012-09-25T11:22:20.943
> 
> 标签：ios, mkmapview, ios6

在 iOS6 地图视图中选择图钉时遇到一个神秘问题 ![在此处输入图像描述](../Images/75ea5d21138e4272ea5416de83d54a84.png)

顺便说一句，它在 iOS 5 中正常工作，我不确定它们在 iOS 6 的地图中发生了什么变化，从而产生了这个问题。

请注意，当我单击地图时，标注直接越过大头针并正确显示

任何帮助/线索将不胜感激，

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T09:39:41.177

答案可能会有所不同，具体取决于您如何实现自定义标注气泡。这是/是我正在使用的解决方案：[自定义 MKAnnotationView 标注](https://stackoverflow.com/questions/8018841/customize-the-mkannotationview-callout)，我遇到了完全相同的问题。

基本上，每次标注要显示时，我都必须将子视图放在前面。

在这种情况下，我的自定义标注气泡是一个名为“BaseCalloutView”的类，其中包含一个 UIView 作为其 ContentView 属性（如您在上面链接的 UML 图中所见）。选择注释时，它会触发 BaseCalloutView 的“animateIn”函数，我在其中添加了：

```
[self.superview bringSubviewToFront:self]; 
```

正如我所提到的，您的里程可能会有所不同，具体取决于您实施自定义标注气泡的方式。如果需要，我可以为您提供完整的代码 - 但老实说，我 90% 的代码来自上面的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T06:42:00.547

这个解决方案对我不起作用，但是这个解决方案做到了：

[自定义注释视图在 iOS6 上不起作用](https://stackoverflow.com/questions/12605249/custom-annotation-view-do-not-work-on-ios6)

抱歉，不确定如何正确链接答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T04:22:04.980

在 IOS 5 和 IOS 6 中，我试试这个，没关系

该图钉永远不会与 CalloutView 重叠。我使用自定义 calloutview ，在文件 Base calloutView 中添加：

```
 - (void)didMoveToSuperview {
        [super didMoveToSuperview];
        [self.superview bringSubviewToFront:self];
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T01:23:46.727

我正在使用相同的代码库，遇到了同样的问题。[self.superview 带来SubviewToFront:self]; 对我不起作用，无论我把它放在哪里。[annimateIn] 或 [didMoveToSuperView] 或 [layoutIfNeeded]

因为这个问题通过手指稍微移动一下地图就解决了，所以我发现很容易通过将代码放入 - (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view 来模拟这种效果。偏移量很小，根本看不到任何视觉运动。

```
 CLLocationCoordinate2D newCenterCoordinate = {self.mapView.region.center.latitude + 0.0000001,
        self.mapView.region.center.longitude + 0.0000001};

    [self.mapView setCenterCoordinate:newCenterCoordinate animated:NO]; 
```

# c# - 使用并行编程进行拖放的想法

> ID：12581919
> 
> 赞同：0
> 
> 时间：2012-09-25T11:22:30.890
> 
> 标签：c#, asp.net, drag-and-drop, parallel-processing

我是一名软件开发专业的学生，​​最近被介绍到 c# 中的并行编程。我想做一个包含拖放功能和并行编程的应用程序。任何我可以用来激发灵感的想法都将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:30:15.790

将涉及操作的图片（项目）从“任务”列表拖动到“执行”列表会怎么样。一旦你放下一个项目，它就会启动一个与该项目相对应的后台任务。您可以执行多项任务，例如：

*   发送电子邮件
*   连接到网络服务并获得任何东西
*   ...

也许好的一点是决定您可以执行哪些后台任务。

** 我假设您的应用是为测试目的而构建的。

# asp.net-mvc - MVCContrib 是否支持 MVC4？

> ID：12581931
> 
> 赞同：2
> 
> 时间：2012-09-25T11:23:13.910
> 
> 标签：asp.net-mvc, mvccontrib

MVCContrib 是否支持 MVC4？我正在尝试在我的项目中使用它。谁能帮我举个例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:38:09.347

> MVCContrib 是否支持 MVC4？

不。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:15:41.613

该文档提到了对 MVC4 的脚本和样式捆绑的支持。其他关于 codeplex 的讨论表明 MVC4 中的 T4MVC 正在为人们工作。

[https://t4mvc.codeplex.com/documentation](https://t4mvc.codeplex.com/documentation)

> 支持 MVC 的脚本和样式包
> 
> 从 MVC4 开始，可以定义脚本和样式表的“捆绑”，它们会自动组合和缩小。但是，魔术字符串用于定义资源 URL。要消除它们，请按照以下步骤 1 到 3 操作。

似乎仍在添加对此的完全支持。但是我知道在 MVC2 中有效的功能仍然在 MVC3 中有效，因为我在 MVC3 中使用了它们；但文档没有明确说明它适用于 MVC3。我怀疑 MVC4 中作为 MVC3 一部分的每个功能在 MVC4 中仍然有效。

这是捆绑的参考讨论：http: [//t4mvc.codeplex.com/discussions/399205](http://t4mvc.codeplex.com/discussions/399205)

T4MVC 仍然比依靠魔术字符串来引用控制器动作和视图名称要好。在我看来，下一个版本的 MVC 只需要在基本功能集中包含 T4MVC。在此之前，我将继续使用 T4MVC。

# c# - 如何调试 Web 服务？

> ID：12581932
> 
> 赞同：14
> 
> 时间：2012-09-25T11:23:19.643
> 
> 标签：c#, asp.net, debugging

我正在使用 Visual Studio，我将 asp.net 应用程序作为一个项目，将 Web 服务作为另一个项目。我在我的 asp.net 应用程序中使用 Web 服务。我的 Web 服务代码存在某种问题。但我无法从 asp.net 应用程序到 Web 服务进行连续调试。我在应用程序和 Web 服务中都设置了断点，但断点未在 Web 服务中激活，它显示连接错误。在 localhost 上托管时如何执行此操作？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-25T11:28:49.477

如果您将 Web 应用程序作为启动项目运行，请尝试在另一个调试实例中运行 Web 服务。

您可以通过右键单击 Web 服务项目，调试 -> 启动新实例来完成

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-25T11:25:22.503

您应该将调试器附加到 w3wp（IIS 进程）。

这是一个可以帮助您的[链接。](http://www.codeproject.com/Articles/37182/Debug-your-ASP-NET-Application-while-Hosted-on-IIS)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T11:29:24.600

如果要在本地系统调试，可以设置多个启动项目。您可以通过解决方案属性设置多个启动。希望这有帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T11:34:05.883

尝试调试服务本身并查看它是否命中断点。只需将其中包含服务的项目设置为主项目，并将服务设置为主启动页面即可。

如果它没有达到断点，它可能没有加载所有符号。如果项目设置为，比如说，发布配置而不是调试，就会发生这种情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T11:24:59.940

Web 服务是否在远程计算机上运行，​​如果是，您需要为 Web 服务设置远程调试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T11:34:56.397

请检查您是否添加了服务引用您的网络服务或其他您无法访问您的网络服务功能。我在我的项目中使用网络服务，如下所示

这是我的网络服务代码

```
[WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    [System.Web.Script.Services.ScriptService]
    public class JsonData : System.Web.Services.WebService
    {

        [WebMethod(Description = "")]
        [ScriptMethod(UseHttpGet = false, ResponseFormat = ResponseFormat.Json)]
        public StateData[] GetStateByCountryID(int ID)
        {
            StateData objStateData = new StateData();
            LMGDAL.db_LMGEntities dbData = new db_LMGEntities();                
            var data = (from con in dbData.tblStates
                        where con.State_CountryID == ID
                        select new StateData
                        {
                            StateID = con.StateID,
                            StateName = con.StateName
                        }).ToList();
            return data.ToArray();
        } 
```

然后我将服务引用添加到我的 asp.net 网络表单

我的表格中的这段代码

```
<script type="text/javascript">
    $(function () {

        $("#ddlCountry").change(function () {
            var countryID = $("#ddlCountry").val();
            $.ajax({
                type: "POST",
                url: "JsonData.asmx/GetStateByCountryID",
                contentType: "application/json; charset=utf-8",
                dataType: 'json',
                data: '{ID:"' + countryID + '"}',
                success: function (msg) {
                    var data = msg.d;
                    var stateData = "";
                    $.each(data, function (index, itemdata) {
                        stateData += "<option  value='" + itemdata.StateID + "' > " + itemdata.StateName + " </option>";
                    });
                    $("#ddlState").empty();
                    $("#ddlState").append("<option value='0'>-Select State-</option>");

                    $("#ddlState").append(stateData);
                },
                error: function () {
                    alert('Faild To Retrieve States.');
                }
            });
        }); 
```

我想这会对你有所帮助

# javascript - 如何从子窗口调用父母的父javascript函数

> ID：12581935
> 
> 赞同：5
> 
> 时间：2012-09-25T11:23:28.990
> 
> 标签：javascript

如何从子窗口调用父级的父级 javascript 函数。

示例 - 父 1 具有 javascript 函数 abc() 现在如何在父 2 的子窗口中调用 Parent1 Javascript 函数，该函数最初是从父 1 窗口触发的。我试过window.parent.parent。仍然没有运气。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T11:27:40.360

不确定您对子窗口的含义。但我想[`window.opener`](https://developer.mozilla.org/en-US/docs/DOM/window.opener)可能是你正在寻找的。

```
// Call abc in the window that opened the current window
window.opener.abc(); 
```

**更新**

还没有尝试过，但是由于`window.opener`是对打开当前窗口的窗口的引用，那么我想您应该能够`opener`在该引用上调用该属性，以获取对其父级的引用：

```
window.opener.opener.abc(); 
```

如果你想到达最顶层的窗口（根窗口，或者你会称之为），那么你可以使用[`window.top`](https://developer.mozilla.org/en-US/docs/DOM/window.top)：

```
window.top.abc(); 
```

# animation - CSS3 动画 | 简单的问题

> ID：12581940
> 
> 赞同：1
> 
> 时间：2012-09-25T11:23:44.993
> 
> 标签：animation, css, css-animations

我有以下 CSS 代码：

```
@keyframes hvr_shadow
{
    from
    {
        box-shadow: 0px 0px 4px rgba(60, 60, 60, 0.5);
    }

    to
    {
        box-shadow: 0px 0px 6px rgba(60, 60, 60, 0.8);
    }
}

@-moz-keyframes hvr_shadow /* Firefox */
{
    from
    {
        -moz-box-shadow: 0px 0px 4px rgba(60, 60, 60, 0.5);
    }

    to
    {
        -moz-box-shadow: 0px 0px 6px rgba(60, 60, 60, 0.8);
    }
}

@-webkit-keyframes hvr_shadow /* Safari and Chrome */
{
    from
    {
        -webkit-box-shadow: 0px 0px 4px rgba(60, 60, 60, 0.5);
    }

    to
    {
        -webkit-box-shadow: 0px 0px 6px rgba(60, 60, 60, 0.8);
    }
}

#gallery .fancybox
{
    border: 1px solid #333;
    display: block;
    padding: 0;
    margin: 0;
    height: 138px;
    -moz-box-shadow: 0px 0px 4px rgba(60, 60, 60, 0.5);
    -webkit-box-shadow: 0px 0px 0px rgba(60, 60, 60, 0.5);
box-shadow: 0px 0px 4px rgba(60, 60, 60, 0.5);
}

#gallery .fancybox:hover
{
    animation: hvr_shadow 700ms;
    -moz-animation: hvr_shadow 700ms; /* Firefox */
    -webkit-animation: hvr_shadow 700ms; /* Safari and Chrome */
    -o-animation: hvr_shadow 700ms; /* Opera */
} 
```

动画运行时，阴影会在一段时间后自动恢复到初始设置。

当鼠标仍然悬停在图像上时，如何保持动画的设置？

在这里你可以找到一个小提琴演示：http: [//jsfiddle.net/haX8j/](http://jsfiddle.net/haX8j/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:36:40.883

这将解决您的问题：

```
-webkit-animation: hvr_shadow  700ms .1s 1 ease-in-out normal forwards;
-moz-animation: hvr_shadow  700ms .1s 1 ease-in-out normal forwards;
-o-animation: hvr_shadow  700ms .1s 1 ease-in-out normal forwards;
animation: hvr_shadow  700ms .1s 1 ease-in-out normal forwards; 
```

JS 小提琴：http: **[//jsfiddle.net/haX8j/1/](http://jsfiddle.net/haX8j/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:02:11.817

实际上，我认为您最好使用过渡。它要简单得多，它适用于 Firefox，并且在离开链接时会正确淡出：

```
.link
{
    -moz-box-shadow: 0px 0px 4px rgba(60, 60, 60, 0.5);
    -webkit-box-shadow: 0px 0px 4px rgba(60, 60, 60, 0.5);
    box-shadow: 0px 0px 4px rgba(60, 60, 60, 0.5);

    -moz-transition: all 0.7s;
    -webkit-transition: all 0.7s;
    -o-transition: all 0.7s;
    transition: all 0.7s;
}
.link:hover
{
    -moz-box-shadow: 0px 0px 6px rgba(60, 60, 60, 0.8);
    -webkit-box-shadow: 0px 0px 6px rgba(60, 60, 60, 0.8);
    box-shadow: 0px 0px 6px rgba(60, 60, 60, 0.8);
} 
```

这是一个小提琴示例。我把阴影做得更大了，所以你可以更清楚地看到效果：http: [//jsfiddle.net/DYdZs/](http://jsfiddle.net/DYdZs/)

# vbscript - 在访问中连接数据库的vb脚本

> ID：12581943
> 
> 赞同：0
> 
> 时间：2012-09-25T11:23:57.367
> 
> 标签：vbscript

我需要使用 VB 脚本连接到 Access 数据库并显示表的内容。任何人都可以在下面的代码中找出错误。它用于连接数据库

Private Sub Form_Load() Dim cnnLogin Dim rstLogin

```
strSQL = "SELECT * FROM employee"
Set cnnLogin = Server.CreateObject("ADODB.Connection")

cnnLogin.Open ("DRIVER={Microsoft Access Driver (*.mdb), *.accdb};" _
    & "DBQ=" & Server.MapPath("database2.aacdb"))

 cnnLogin.Execute(strSQL) 
```

结束子

# sql - SQL 输出中的格式问题

> ID：12581947
> 
> 赞同：0
> 
> 时间：2012-09-25T11:24:12.853
> 
> 标签：sql

我在格式化查询输出时遇到问题：

```
 SELECT i.product AS "Product Line",
  COUNT(i.incident_id) "Count Of Tickets",
  TRUNC((SUM(NVL(RSSEC,0) - NVL(WCTSEC,0))/COUNT(i.incident_id)) / 86400)
  || ':'
  || TRUNC(MOD(((SUM(NVL(RSSEC,0) - NVL(WCTSEC,0))/COUNT(i.incident_id)) / 3600),24))
  || ':'
  || TRUNC(MOD(((SUM(NVL(RSSEC,0) - NVL(WCTSEC,0))/COUNT(i.incident_id)) / 60),60))
  || ':'
  || TRUNC(MOD((SUM( NVL(RSSEC,0) - NVL(WCTSEC,0))/COUNT(i.incident_id)),60)) AS "MTTR"
FROM info i; 
```

其中 RSSEC-Total RSSeconds（类型编号）
WCTSEC- Total WSeconds（类型编号）

```
电流输出：
TTPLL 8 2:4:0:18
阿斯达德 1 0:0:9:0
UASDF 2 0:0:0:8
ERTEU 4 0:3:0:46

```

```
预期输出：
TTPLL 8 02:04:00:18
阿斯达德 1 00:00:09:00
美国自卫队 2 00:00:00:08
ERTEU 4 00:03:00:46

```

谁能帮我实现上述格式？

请让我知道任何替代解决方案以获得高于截断位置以外的输出格式。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:33:48.007

我不知道这是哪个 RDBMS，所以我猜，但是这个怎么样？

```
 SELECT i.product AS "Product Line",
  COUNT(i.incident_id) "Count Of Tickets",
  RIGHT('0' || TRUNC((SUM(NVL(RSSEC,0) - NVL(WCTSEC,0))/COUNT(i.incident_id)) / 86400), 2)
  || ':'
  || RIGHT('0' || TRUNC(MOD(((SUM(NVL(RSSEC,0) - NVL(WCTSEC,0))/COUNT(i.incident_id)) / 3600),24)), 2)
  || ':'
  || RIGHT('0' || TRUNC(MOD(((SUM(NVL(RSSEC,0) - NVL(WCTSEC,0))/COUNT(i.incident_id)) / 60),60)), 2)
  || ':'
  || RIGHT('0' || TRUNC(MOD((SUM( NVL(RSSEC,0) - NVL(WCTSEC,0))/COUNT(i.incident_id)),60)), 2) AS "MTTR"
FROM info i; 
```

# php - 点击浏览器后退按钮时如何保持无线电选择状态？

> ID：12581950
> 
> 赞同：0
> 
> 时间：2012-09-25T11:24:15.970
> 
> 标签：php

我正在处理带有许多收音机的调查多步表格。

他们有一些默认状态

用户对它们进行操作以选择他的偏好。

现在，客户希望在点击浏览器后退按钮或侧导航链接（一组指向调查先前阶段的链接）时，获得用户先前选择的单选状态。

以下是导航器的外观：

```
<ul>
<li><a href="index.php?site=form1">Step1</a></li>
<li><a href="index.php?site=form2">Step2</a></li>
<li><a href="index.php?site=form3">Step3</a></li>
</ul> 
```

只有一个 $_SESSION 在整个调查过程中收集数据。

我知道我可以直接从 $_SESSION 加载信息，但是当请求来自导航器链接/后退按钮时，我需要替换默认状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:26:46.697

有两种主要方法，基本上你是说收音机的选择状态需要保存在表单的不同页面之间。

因此，当您返回之前所在的页面但未提交时，选择应该仍然相同。

有两种关键方法，使用 PHP 的服务器端或使用 Javascript 的客户端

**PHP**

您可以在网站上设置任何链接以提交表单，并且可以保存单选选项，然后在创建表单时可以检查先前选择的值

可以保存此信息，`$_SESSION`但他们每次更改页面时都需要提交表单（您可以更改链接来执行此操作）

**Javascript**

您可以编写一些 javascript 来记住选择的内容并将它们作为 cookie 存储在用户浏览器中，这可以在他们每次单击按钮时更新。当页面加载时，javascript 将检查 cookie（或本地存储）并加载以前的选项。

当他们完成并提交表单时，您将清除 javascript

基本示例

```
$('form input[type=radio]:checked') 
```

一旦我有更多信息，我将进一步充实这个答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:27:02.640

发布表单后，您可以在会话中保存值。当再次访问上一页（甚至第一次加载）时，读取会话的值并检查指定的无线电。如果你第一次访问页面，会话中不会有数据，所以不会检查任何人。

您还可以使用 JavaScript 和 cookie 生动地存储选定的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:36:09.020

一个非常简化的可能解决方案：

```
<?php
   session_start(); // this needs to be at the top of all pages using $_SESSION (before anything else) else $_SESSION will always be empty
   if($_POST['vehicle']){
      $_SESSION['checkbox1'] = $_POST['vehicle'];
   }
print_r($_SESSION); // remove this line after testing. It will show you the contents of the $_SESSION, which is handy for seeing when variables are set within it
?>

<!DOCTYPE html>
<html>
<body>
<form action="" method="post">
   <input type="checkbox" name="vehicle" value="Bike"<?php if($_SESSION['checkbox1'] == "Bike"){ echo " checked"}?>>I have a bike<br />
   <input type="checkbox" name="vehicle" value="Car"<?php if($_SESSION['checkbox1'] == "Car"){ echo " checked"}?>>I have a car <br />#
   <input type="submit" value="Go" />
</form>
</body>
</html> 
```

您可以在隐藏的输入区域中添加在第一页生成的唯一 ID，该 ID 在发布时可以构成会话变量名称的一部分。从那里，信息将在该变量名下的 $_SESSION 中建立索引，从而更容易将数据拉回或创建新的表单会话。

希望我没有失去你。

# android - 如何根据设备屏幕大小加载特定的 xml 布局文件？

> ID：12581954
> 
> 赞同：0
> 
> 时间：2012-09-25T11:24:25.380
> 
> 标签：android, android-screen-support, xml-layout

[我已尝试使用此 devoloper链接](http://developer.android.com/guide/practices/screens_support.html)上提供的这些说明

我需要加载`res/layout-w1024dp-h768dp/activity_main.xml`分辨率为 1024x768 的设备或默认 xml 文件，所以我配置了我的 AVD，我的项目资源管理器如下所示 ![在此处输入图像描述](../Images/66525d4c308d4e6e5691df80c2acb5e6.png)

我已经尝试了所有方法，但它不适用于该规格的 AVD .. 任何人都可以帮助我...

这是清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.fm_player"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15" />

<supports-screens android:requiresSmallestWidthDp="768" />

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:28:44.377

Android可以处理文件夹名称中的两种不同分辨率吗？

您是否尝试过使用：

```
res/layout-sw768dp 
```

从宽度和高度来看，哪个会占用最短的 768 长度？

# vim - 如何在来自 GUI 的 XML 文件的 VIM for Windows 中使用 gg=G 命令？

> ID：12581955
> 
> 赞同：4
> 
> 时间：2012-09-25T11:24:26.663
> 
> 标签：vim, indentation, vi

我已经在 Windows XP 上安装了 VIM。我想使用 GUI/命令行格式化 XML 文件？怎么做 ？

我浏览了[这篇文章](https://stackoverflow.com/questions/506075/how-do-i-fix-the-indentation-of-an-entire-file-in-vi)`gg=G`，但是在哪里可以从 gui输入该命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T11:53:02.667

Vi(m) 是一个*模态编辑器*，即有文本输入的*输入*模式、跳转和操作文本的*普通模式和**命令行模式*，您可以在其中输入以冒号开头的 Ex 命令，（以及更多） .

是`gg=G`正常模式命令；由于这是默认模式，因此只需在打开 XML 文件后键入即可。为了使其正常工作，必须检测到文件类型，但对于默认安装，这应该不是问题。`:w`然后，您可以通过（后跟）保存重新格式化的文件`Enter`，并通过退出 Vim `:q`。

Vim 是一种不同的编辑器，一旦你学会了它的方式，它就会非常强大。如果你对它感兴趣，我会推荐内置的*vimtutor* ( `%ProgramFiles%\Vim\vim73\vimtutor.bat`) 作为一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:48:11.503

在 Vim 中打开文件，然后按字符。您不需要特殊提示。例如，您还可以使用键 j 和 k 在文件中上下移动。

如果你想插入新字符，你首先需要进入“插入”模式，例如按 i。您现在输入的所有内容都被解释为普通的内容输入。如果要离开插入模式，请按 ESC 键并返回命令模式。

除了插入和命令模式之外，还有其他几种模式。您可以在命令模式下按 : 访问命令行。在命令模式下按 v 可以进入可视模式。

万一你迷路了，想离开 vim，按 : 从命令模式转到命令行，然后输入 q 然后回车，或者在命令模式下按 ZZ ;-)

# dom - 加载和解析外部 HTML 的一部分

> ID：12581956
> 
> 赞同：1
> 
> 时间：2012-09-25T11:24:27.610
> 
> 标签：dom

我想使用 php 从外部网站提取（解析）部分 HTML 文档

例如：为了从 yahoo 中提取新闻，我尝试使用[sourceforge中的 SimpleHTML DOM Parser](http://simplehtmldom.sourceforge.net)

```
<?php
$url="http://news.yahoo.com/einsteins-brain-now-interactive-ipad-app-071441969.html";
include('simple_html_dom.php');  
$html=new simple_html_dom();
$html->load_file($url);
$xxx=$html->find('title')->innertext; 
echo $xxx;
?> 
```

> 致命错误：在第 1113 行的 /home/a1234bc/public_html/simple_html_dom.php 中的非对象上调用成员函数 find()

* * *

然后我尝试回显加载的 html

```
<?php
$url="http://news.yahoo.com/einsteins-brain-now-interactive-ipad-app-071441969.html";
include('simple_html_dom.php');  
$html=new simple_html_dom();
$html->load_file($url);
echo $html;
?> 
```

现在我得到：

> 致命错误：在第 1688 行的 /home/a1234bc/public_html/simple_html_dom.php 中的非对象上调用成员函数 innertext()

* * *

我还尝试通过 file_get_contents() 使用 DOMDocument()

```
<?php
$url="http://news.yahoo.com/einsteins-brain-now-interactive-ipad-app-071441969.html";
$content = file_get_contents($url);
// echo $content works perfect

$doc = new DOMDocument();
$doc->loadHTML($content);
$jjj=$doc->getElementsByTagName('title')->item(0);
echo $jjj;
?> 
```

这会引发一长串警告。所以让我单独复制粘贴前10个

> 警告：DOMDocument::loadHTML() [domdocument.loadhtml]: htmlParseEntityRef: 实体中没有名称，第 37 行 /home/a1234bc/public_html/simple_html_dom.php 中的第 166 行
> 
> 警告：DOMDocument::loadHTML() [domdocument.loadhtml]: htmlParseEntityRef: 期待 ';' 在实体中，第 37 行 /home/a1234bc/public_html/simple_html_dom.php 中的第 166 行
> 
> 警告：DOMDocument::loadHTML() [domdocument.loadhtml]: htmlParseEntityRef: 实体中没有名称，第 37 行 /home/a1234bc/public_html/simple_html_dom.php 中的第 256 行
> 
> 警告：DOMDocument::loadHTML() [domdocument.loadhtml]: htmlParseEntityRef: 期待 ';' 在实体中，第 37 行 /home/a1234bc/public_html/simple_html_dom.php 中的第 256 行
> 
> 警告：DOMDocument::loadHTML() [domdocument.loadhtml]：标签 fb:login-button 在实体中无效，第 37 行 /home/a1234bc/public_html/simple_html_dom.php 中的第 256 行
> 
> 警告：DOMDocument::loadHTML() [domdocument.loadhtml]: htmlParseEntityRef: 期待 ';' 在实体中，第 37 行 /home/a1234bc/public_html/simple_html_dom.php 中的第 275 行
> 
> 警告：DOMDocument::loadHTML() [domdocument.loadhtml]: htmlParseEntityRef: 期待 ';' 在实体中，第 37 行 /home/a1234bc/public_html/simple_html_dom.php 中的第 287 行
> 
> 警告：DOMDocument::loadHTML() [domdocument.loadhtml]: htmlParseEntityRef: 期待 ';' 在实体中，第 37 行 /home/a1234bc/public_html/simple_html_dom.php 中的第 292 行
> 
> 警告：DOMDocument::loadHTML() [domdocument.loadhtml]: htmlParseEntityRef: 期待 ';' 在实体中，第 37 行 /home/a1234bc/public_html/simple_html_dom.php 中的第 311 行
> 
> 警告：DOMDocument::loadHTML() [domdocument.loadhtml]：在实体中重新定义属性类，第 37 行 /home/a1234bc/public_html/simple_html_dom.php 中的第 325 行

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:50:00.470

使用手册中所示的面向对象方式时，我遇到了同样的错误：

```
// Create a DOM object
$html = new simple_html_dom();

// Load HTML from a string
$html->load('<html><body>Hello!</body></html>');

// Load HTML from a URL 
$html->load_file('http://www.google.com/');

// Load HTML from a HTML file 
$html->load_file('test.htm'); 
```

当我切换到手册中所示的快速方式时，摆脱了错误并让我的脚本正常工作：

```
// Create a DOM object from a string
$html = str_get_html('<html><body>Hello!</body></html>');

// Create a DOM object from a URL
$html = file_get_html('http://www.google.com/');

// Create a DOM object from a HTML file
$html = file_get_html('test.htm'); 
```

在这之后`$html->find`工作得很好！

PHP Simple HTML DOM Parser 手册可以在这里找到：[http ://simplehtmldom.sourceforge.net/manual.htm](http://simplehtmldom.sourceforge.net/manual.htm)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T11:31:38.270

DOMDocument/SimpleXML 是为解析 XML 而不是 HTML 而设计的。您需要使用 file_get_contents 将 HTML 转换为字符串，然后使用字符串操作函数来获取您需要的部分。[preg_match_all](http://php.net/manual/en/function.preg-match-all.php "preg_match_all")将是一个很好的起点。

# jsf-2 - Primefaces可编辑数据表中的EnumConverter

> ID：12581958
> 
> 赞同：5
> 
> 时间：2012-09-25T11:24:34.887
> 
> 标签：jsf-2, primefaces, converter

我写了一个 EnumConverter，在[Use enum in h:selectManyCheckbox 中](https://stackoverflow.com/questions/3822058/jsf-2-0-use-enum-in-selectmany-menu#answer-3823776)进行了描述？一切都很好，直到我们认识到这个转换器在 primefaces 可编辑数据表中不能正常工作。问题是，虽然我在 getAsString 和 getAsObject 方法中添加了一个属性，如下所示：

```
@Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        if (value instanceof Enum) {
            component.getAttributes().put(ATTRIBUTE_ENUM_TYPE, value.getClass());
            return ((Enum<?>) value).name();
        } else {
            throw new ConverterException(new FacesMessage("Value is not an enum: " + value.getClass()));
        }
    }
public Object getAsObject(FacesContext context, UIComponent component, String value) {
        Class<Enum> enumType = (Class<Enum>) component.getAttributes().get(ATTRIBUTE_ENUM_TYPE);
        try {
            return Enum.valueOf(enumType, value);
        } catch (IllegalArgumentException e) {
            throw new ConverterException(new FacesMessage("Value is not an enum of type: " + enumType));
        }
    } 
```

在后一种方法中（`getAsObject`）找不到我赋予组件属性映射的属性。但是在 pprimefaces 可编辑的数据表中，一切都很好。有什么解决方案可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:15:39.337

这个问题是因为自定义组件属性没有保存在 PrimeFaces 数据表的行状态中（它在标准中工作正常`h:dataTable`）。

我们将需要将此信息存储在其他地方。在视图范围内以及组件 ID 将是一种方式。

在`getAsString()`：

```
context.getViewRoot().getViewMap().put(ATTRIBUTE_ENUM_TYPE + component.getId(), value.getClass()); 
```

并且在`getAsObject()`：

```
Class<Enum> enumType = (Class<Enum>) context.getViewRoot().getViewMap().get(ATTRIBUTE_ENUM_TYPE + component.getId()); 
```

# sql - 如何根据另一列将列的值相加

> ID：12581960
> 
> 赞同：0
> 
> 时间：2012-09-25T11:24:46.540
> 
> 标签：sql, join

这是一个很难解释的问题，但可能（希望）是一个容易解决的问题，所以我将解释我想要实现的目标。

我有一个表格，可以在其中输入一天的多个日志，每个日志作为单独的行，然后我有一个小数作为另一列，我正在尝试为每一天创建一个摘要，类似于

1900 年 1 月 1 日 | | 5.5

当 1900 年 1 月 1 日的条目为 2.5 时，主表中有一个条目为 3，因此将当天的值加在一起？

我唯一的问题是将日期加在一起，如果日期相同，我在想类似

选择不同的日期并将其与一个表格连接起来，该表格获取日期所在的小数列的总和......这就是我不太确定的地方？

任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:30:25.553

如果您的表被命名为日志，其数据如下

```
log_date     | value
1900-01-01   | 2.5
1900-01-01   | 3 
```

那么你的查询是

```
SELECT sum(value) FROM logs GROUP BY log_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:31:10.190

您正在寻找的可能是一个 GROUP BY 子句。

```
SELECT [ yourdatecol, ] sum(yourdecimalcol) FROM yourtable
  [ WHERE yourdatecol = .. ] 
     GROUP BY [ get_ymd_from_date(yourdatecol) | yourdatecol ] ; 
```

使用这种语法，您将获得由相同 datecol 值选择的行集的总和。如果日期包含 H/M/ss 并且您想要的是每天的总和，您可能还想估算日期（例如，仅从中获取 Y/M/D 部分）。我用方括号括起来的可选部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T11:33:03.080

```
SELECT log_date,sum(value) FROM logs GROUP BY log_date 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T11:31:04.467

```
CREATE VIEW Summary
AS
SELECT
    DateValue,
    SUM(DecimalValue) DayTotal
FROM
    EventTable
GROUP BY
    DateValue; 
```

然后

```
SELECT
    *
FROM
    Summary
WHERE
    DateValue = '1900-01-01' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T11:36:11.850

试试这个 ：

```
SELECT CONVERT(VARCHAR, DateColumn, 103) AS OutputDate, SUM(ValueColumn) AS TotalValue
FROM YourTable
GROUP BY CONVERT(VARCHAR, DateColumn, 103) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T11:45:34.243

我假设使用了 DateTime，我们称之为 logdate。我还假设另一个是小数，我们称之为 logdecimal。

使用 SQL Server 2008，您可以执行以下操作（这是一种名为 date 的类型，没有时间部分）：

```
SELECT 
CAST(logdate as date) as TheDay, 
SUM(logdecimal) as TheSum 
FROM logTable
GROUP BY CAST(logdatetime as date) 
```

使用没有日期类型的 SQL 服务器，可能类似于：

```
SELECT 
CONVERT(varchar(10), logdate, 101) as TheDay, 
SUM(logdecimal) as TheSum 
FROM logTable
GROUP BY  CONVERT(varchar(10), logdate , 101) 
```

问候， Olle

编辑：如果它是您想要分组为日期（不包括时间部分）的 DateTime（包括时间部分），则此选项将起作用。看起来这个问题不是这种情况。

# java - Spring 3.x 验证、@Valid 和 2 Duck 方法

> ID：12581962
> 
> 赞同：1
> 
> 时间：2012-09-25T11:24:58.613
> 
> 标签：java, spring, validation, spring-mvc

我在弄清楚 @Valid 标签和正确使用时遇到问题 - 非常感谢任何帮助！

假设我有一个 REST 控制器，它对 Duck 执行简单的 CRUD 操作（我需要用一些东西来说明！）。让我们看看创建和更新鸭子。在这两种情况下，我都需要传入整个 Duck，首先是创建它，其次是因为可以修改它的任何数据项。所以这些方法看起来像：

```
@RequestMapping(value = "/ducks", method = RequestMethod.POST)
@ResponseBody
public ResponseEntity<Duck> createDuck(@Valid @RequestBody Duck duck) {  ... } 
```

和

```
@RequestMapping(value = "/ducks/{duckId}", method = RequestMethod.PUT)
@ResponseBody
public ResponseEntity<Duck> updateDuck(@Valid @RequestBody Duck duck) { ... } 
```

我在每个参数上都插入了“@Valid”，因为我想验证每个调用。@Valid 标签在这里似乎很有吸引力，因为我可以在收到时验证整个对象，而不是在食物链的下游使用不同的 JSR 303 注释。因为（也许）我在这个控制器中有其他不带鸭子的方法，所以我启用了@Valid：

```
@InitBinder("duck")
protected void initBinder(DataBinder binder) {
    binder.setValidator(new MyDuckValidator());
} 
```

其中 MyDuckValidator 实现了 org.springframework.validation.Validator 接口。

问题是我希望在“更新的鸭子”上传递的 Id（主键）被验证为非 Null。但是当我创建一个 Duck 时，该 Id 为空是完全有效的。这看起来像“验证 101”，但我似乎无法从任何示例或文档中弄清楚。有谁知道一个简单的解决方案？我不介意有两个验证器并将它们连接起来。但是，我不想破坏 API 只是为了解决验证问题......

# css - 引导响应式 CSS

> ID：12581965
> 
> 赞同：2
> 
> 时间：2012-09-25T11:03:06.803
> 
> 标签：css, twitter-bootstrap, grid, sass

我有一个四列设计，我正在使用 Bootstrap。该设计在移动设备的单列中呈现良好，但在“（最小宽度：768px）和（最大宽度：979px）”中，我得到四列，尽管只有两列空间。很明显，需要针对这些尺寸重新考虑行/跨度设置。

我能想到的唯一方法是在 HTML 中使用语义 CSS 类，并且只在 CSS 中使用 LESS 包含网格类，然后根据屏幕大小，包含不同的网格类来实现四列或两列布局。不确定这是否也有效。

这是要走的路，还是我想的太复杂了？

谢谢！

编辑：这不起作用。它只导入直接应用于 .row 的规则，不涉及更复杂的规则 .row。我认为它会起作用的原因是我看到有人在其他网格上使用 SASS 执行此操作。想法？

```
.header{
     .row;
} 
```

也在：[https ://groups.google.com/forum/#!topic/twitter-bootstrap/R5jEp0oQ_-E](https://groups.google.com/forum/#!topic/twitter-bootstrap/R5jEp0oQ_-E)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:21:41.537

不确定这是否是您的想法，但也许您可以为页面的那部分设置样式并使用类似的东西？

```
@gridColumnWidth: 60px; // example width declared in bootstrap

@media only screen and (min-width: 768px) and (max-width: 979px) {
   .yourClass {
        max-width: @gridColumnWidth * 2
    }
} 
```

# svn - 为什么在版本控制系统中移动标签是一种不好的做法？

> ID：12581969
> 
> 赞同：3
> 
> 时间：2012-09-25T11:25:14.197
> 
> 标签：svn, version-control, build, continuous-integration, build-process

为什么在版本控制系统中移动标签是一种不好的做法？我经常遇到这个一般性建议，但从未见过背后的解释。

注意：我使用的是我认为与 CVS 更相关的术语“移动标签”。但是对于 SVN，当我们只在标签文件夹中提交更改时，这是一个类似的概念。

我的具体情况在这里：我使用SVN。我将使用构建系统自动创建标签。在创建新标签后，构建系统将标签描述信息放入已标记文件之一，提交，并在此更改的文件上移动标签。

我可以理解，如果在项目上设置了标签，并且对项目进行了测试，那么对标签进行更改可能会导致团队之间的误解。有人可能会签出旧版本的标签，而另一个人可能会签出新版本。但是在正式宣布之前对标签进行更改有什么不好的吗？

我想是否移动标签的决定可能取决于项目类型（商业、开源、个人）、从事项目的人数、标签创建后经过的时间、开发过程类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:48:37.717

标签旨在代表您的源代码的项目范围的特定修订，不应用于其他目的。也就是说，严格遵守这一原则可能会导致不得不跳过版本号，这可能同样是不可接受的。

对于复杂的构建过程，您应该尝试在发布候选分支中执行大部分工作，并且只在最后时刻进行标记。但是，您可能需要在中途修复某些东西，我认为对标记版本执行小的、受控的更改是可以接受的，特别是如果它的存在尚未正式宣传。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:36:23.253

> 为什么在版本控制系统中移动标签是一种不好的做法？

因为它是普遍接受的约定。您必须遵守规则才能获得所需的结果，否则您将陷入混乱和无政府状态

在您的情况下，您的工作流程格式不正确，这违反了常见规则。“正确的方法”是改变工作流程，而不是规则。

我看到至少 2 个可能的版本：

1.  从 repo 修订版 N 检出 CI，成功构建后在 WC 中添加文件，提交到主干，将主干 HEAD 复制到标签中（标签将为 N+2）
2.  CI 像现在一样创建标签，但必须添加额外的元数据作为此标签的自定义修订属性（属性）（`svn help propset`，`propset PROPNAME --revprop -r REV PROPVAL [TARGET]`版本）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T11:33:52.093

标签通常被认为是存储库特定状态的不可变快照。有几个工具，例如 CI 工具，适用于这个假设。这是一条重要的规则，它确保您有一种独特的方式来引用项目的特定状态。

这就像 SVN 中的修订号或 Git 中的 SHA1 提交哈希。当人员或工具使用提交标识符引用提交时，他们确定他们正在谈论特定版本。

这同样适用于标签。如果您使用的规则是一旦存储库的状态被标记就不能改变，这意味着每个人（包括人员和工具）都可以安全地假设如果有问题，每个人都存在问题。如果应用程序行为或行为不端，那么对于检查该特定标签的任何人，它都会表现或行为不端。

这是一个需要牢记的非常重要的概念，因为一旦你打破了这个假设，你最终可能会花费更多的时间来尝试使用你在阅读 CI 日志或与其他开发人员交谈时引用的标签版本进行调试。

# nagios - Nagios - 主机/服务依赖

> ID：12581975
> 
> 赞同：1
> 
> 时间：2012-09-25T11:25:34.760
> 
> 标签：nagios

我正在为客户实施 Nagios。

客户有以下要求；

我们有一台 PC (PC-1) 和一台服务器 (Server-1)。PC 在 Nagios 中只有 ping 监控，服务器有 Ping 监控但也有服务检查（检查 Citrix 是否启动）。

当 Server-1 上的 Citrix 服务处于关闭状态时，我们希望 PC-1 进入警告状态。我们想要这样做的原因是出于报告目的。

我知道服务到服务的依赖关系，但我想知道这个服务到主机依赖关系是否会起作用以及如何:)。

欢迎任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:39:01.833

是的，这是可以做到的。请参阅[有关依赖项的文档](http://nagios.sourceforge.net/docs/3_0/dependencies.html)。

您没有明确地使服务依赖于另一台主机。相反，您必须使其依赖于该主机上的**服务**。由于服务也隐含地依赖于它们的主机，这会导致你想要的行为。

您可以为此目的使用 ping 服务检查，这是您真正需要 check_ping（或 check_icmp）服务检查的唯一时间。

如果您阅读有关实际**主机**依赖关系的部分，您会看到建议使用父/子关系。

# c++ - 与基类同名的 C++ 类成员

> ID：12581977
> 
> 赞同：0
> 
> 时间：2012-09-25T11:25:43.257
> 
> 标签：c++, gcc

this 指针在基类方法中使用时的行为方式：

```
class Base{
public:
   int a;
   Base() : a(5) {}
   void func(){
       std::cout << " value is : " << this->a << std::endl;
   }
};

class Derived : public Base{
private:
   int a;
public:
   Derived() : a(1){}
   void func1(){
       std::cout << " value is : " << this->a << std::endl;
   }
};

int main(){
   Derived d;
   d.func();
   d.func1();
} 
```

代码的输出是：

值为：5

值为：1

因为我使用同一个对象来调用这两个函数。那么这个指针的值在基类和派生类的方法中会有所不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:27:57.377

`this->a`相当于`a`在那个上下文中，所以它与基指针无关。

成员`a`是静态解析的，派生类隐藏基类成员，因为它们都命名为`a`.

要检查`this`指针本身，您可以直接打印它：

```
std::cout << this; 
```

这两个对象都是一样的。

从中可以看出的主要内容`Base::a`是`Derived::a`不同的。在中尝试以下操作`Derived`：

```
void func1(){
    std::cout << "derived value is : " << a << std::endl;
    std::cout << "   base value is : " << Base::a << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:27:16.100

**`this`指针将始终指向它所在的当前对象。**

调用时`func`，使用基类并打印基类字段。但，

调用时`func1`，使用派生类并打印其字段。

* * *

尝试评论这一行`Derived() : a(1){}`，你会更清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:30:30.403

您必须做`this->Base::a`才能访问 Base 的`a`. 否则你总是访问`Derived::a`.

# c# - 接口不能包含字段

> ID：12581981
> 
> 赞同：13
> 
> 时间：2012-09-25T11:26:02.973
> 
> 标签：c#, interface

可能是一个非常愚蠢的问题，但我通过以下代码不断收到上述错误：

```
public interface IAttributeOption
{
    AttributeTypeCode Type { get; set; }
} 
```

您可能会说，我正在尝试使用单个属性定义接口。

我知道有人一定会告诉我“接口是一个虚拟类，等等等等”，我想提前确认我知道这一点！我显然正在尝试定义一个属性，据我所知，它在界面中很好。

那么有什么问题吗？？

谢谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T11:31:39.953

> 那么有什么问题呢？

没什么，你的接口声明很好。听起来您可能忘记将访问器声明放入之前：

```
public interface IAttributeOption
{
    AttributeType Type; // no { get; set; }
} 
```

如果它是链接程序集，您可能需要进行完全重建，因为您可能正在提取缓存版本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T11:27:08.610

> 我显然正在尝试定义一个属性，据我所知，它在界面中很好。

这段代码没有任何问题。您得到的错误在其他地方。只要确保`AttributeTypeCode`当然定义了类。

# c# - 受保护方法线程中的字典是否安全？

> ID：12581984
> 
> 赞同：0
> 
> 时间：2012-09-25T11:26:11.967
> 
> 标签：c#, multithreading, c#-4.0, thread-safety, task-parallel-library

我有一个具有受保护方法的抽象类。我在这个方法中使用字典。这个类有2个实现。这两个类都为某些操作调用了这个受保护的方法。如果两个实现都在不同的线程中运行，受保护方法线程内的字典是否安全？

保护方法如下

```
protected Dictionary<string, string> GenerateParameterFromQueue()
    {
        Dictionary<string, string> parameters;
        string queueInput = this._Queue.QueueInput;
        string[] inputArray = Regex.Split(queueInput,Constants.KEY_DELIMITER); 

        parameters = inputArray.ToDictionary(s => s.Split(Convert.ToChar(Constants.KEY_EQUALITY))[0], s => s.Split(Convert.ToChar(Constants.KEY_EQUALITY))[1]);

        return parameters;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:31:41.923

是的，由于方法中的字典是在方法本身内的每个线程中创建的，因此您对 的使用`Dictionary`是线程安全的。当然，这并不意味着在它返回后在方法之外的任何使用都是自动线程安全的。

只有当两个线程访问/更改一个线程时`Dictionary`，您才会遇到问题。它与被保护的方法无关。

The thing I'd worry about in the method is the this._Queue variable though, since it's shared between multiple threads and you're not locking it, you need to make sure that it's thread safe in itself.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:29:22.520

字典是“线程安全的”，但不是因为它是受保护的方法。它是线程安全的，因为您是从头开始生成字典。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:29:26.053

`protected`关键字 only 表示该方法仅在包含类型或子类中可见。它*不会*使它成为线程安全的。`Dictionary`正在为每个线程调用该方法创建，这使得该`Dictionary`示例中的线程安全......

对于线程安全集合，请参见[ConcurrentCollection](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)类。

我希望这有帮助。

# javascript - javascript：在文本区域中显示值

> ID：12581986
> 
> 赞同：1
> 
> 时间：2012-09-25T11:26:16.347
> 
> 标签：javascript, html

我正在尝试在 textarea 中显示默认值，单击它应该清除现有数据并在模糊时它应该显示默认文本。以下是我的代码->

```
<textarea class="TextArea" id="appfield" name="appfield" style="height:44px;" rows="2" onfocus="deletetext(this)" onblur="filltext(this)" value="defaulttext"></textarea> 
```

值未显示在 textarea 中。出了什么问题？我们在这个网站的标题文本框中有类似的情况。我必须在我的情况下实现相同的情况。请提出一个答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:27:55.433

正确的方法是

```
<textarea ...>defaulttext</textarea> 
```

但是您应该设置一个工作小提琴（包括功能）来重现该问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:29:16.757

如果您有一个选项并且想要使用 HTML5，您可以使用占位符属性来实现。

```
<textarea 
    class="TextArea" 
    id="appfield" 
    name="appfield" 
    style="height:44px; 
    rows="2" 
    placeholder="default text"
    value=""></textarea> 
```

其他选项是

```
<textarea 
    onfocus="if(this.value==this.defaultValue)this.value='';"
    onblur="if(this.value=='')this.value=this.defaultValue;"
    class="TextArea"
    id="appfield" 
    name="appfield" 
    style="height:44px; 
    rows="2">default text</textarea> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T11:33:03.793

你可以用这个

```
 <textarea  id="username"  name="username" 
onfocus="if(this.value=='somevalue') { this.value='';this.style.color='#333333';}" 

onblur="if(this.value=='') {this.value='somevalue'; this.style.color='#B2B2B2';}">
somevalue
</textarea> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T11:31:08.520

您可以使用占位符，而不是使用 JavaScript。[jsfiddle](http://jsfiddle.net/fB4ZL/)。但旧版浏览器不支持占位符。你可以使用[jquery 库](http://www.kamikazemusic.com/quick-tips/jquery-html5-placeholder-fix/)。

```
<textarea class="FullTextArea" id="applyfieldscontrol" name="applyfieldscontrol" style="height:44px"  placeholder="defaulttext"></textarea> 
```

# html - 我的网页可以拾取浏览器其他选项卡中正在播放的音频吗？

> ID：12581989
> 
> 赞同：2
> 
> 时间：2012-09-25T11:26:36.133
> 
> 标签：html, google-chrome, visualization, html5-audio

我正在为启动页面创建一个 HTML5 可视化工具。在我最初的简报中，我被要求让页面拾取电脑扬声器发出的任何音频。我的第一个问题是，这可能吗？我假设它不是因为拾取麦克风输入的能力似乎才刚刚实现。

我的第二个选择是让页面拾取浏览器踢出的任何音频（在其他选项卡上）。有谁知道这可能是如何完成的，比如说，chrome？

我希望这是一个好问题。我对网站开发非常陌生。

# php - php多数组回显

> ID：12581992
> 
> 赞同：2
> 
> 时间：2012-09-25T11:26:46.640
> 
> 标签：php, arrays

我有一个 php，下面有我如何在 php 中回显。

我想像这样回应

```
Veg.Pizaa => 
          Extra = > Cheese, price 50
          Vegetables = > Avocado, price 25 
```

数组在下面

```
array
  (
     'Veg.Pizaa' => 
      (
        array
          (
            'Extra' => 
             (
               array
                (
                 'name' => string '25g Cheese' (length=10),
                 'price' => string '50' (length=2),
                 'quanty' => int 13,
                 'Vegetables' =>
                ), 
               array
                (
                 'name' => string 'Avocado' (length=7),
                 'price' => string '25' (length=2),
                 'quanty' => int 13,
                 'Nuts' =>
                 ), 
               array
                (
                 'name' => string 'Almonds' (length=7),
                 'price' => string '30' (length=2),
                 'quanty' => int 21
                )
             )
          )
       )
    ) 
```

我试过下面的代码

```
foreach($sub as $sub) {
  var_dump($sub);
  echo "<tr>";
  echo "<td><h3 style='font-weight: bolder; color: Maroon; line-height: 10px;'>".$sub[0]['productname']
    ."</h3></td>";
  echo "<td><h3 style='font-weight: bolder; color: Maroon; line-height: 10px;'>".$sub[0]['qty']
    ."</h3></td>";
  echo "</tr>";
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T11:29:55.260

```
$array = ...;

foreach( $array as $key => $val )
{
  echo $key . " =>\n";

  foreach( $val as $key2 => $val2 )
  {
    echo "\t" . $key2 . ' => ' . $val2['name'] . "\n";
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:33:55.773

```
foreach($array as $key => $val)
{
    echo $key.' ';
    if(is_array($val)
    {
        foreach($val as $name => $qty)
        {
            if($name=='name')
            {
                echo $qty;
            }
            if($name=='price')
            {
                echo $name.', '.$qty.'\n<br>';
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T11:42:46.803

你为什么不这样做：

```
print_r($array) 
```

这就是我用来调试数组的方法。