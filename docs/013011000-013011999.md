# StackOverflow 问答 13011000-13011999

# spring - prime faces jsf 页面不会在 linux tomcat 上呈现，但会在 eclipse 测试环境中呈现

> ID：13011011
> 
> 赞同：2
> 
> 时间：2012-10-22T12:00:28.927
> 
> 标签：spring, tomcat, primefaces

我第一次发帖，所以如果我打破了协议，我很抱歉

我创建了一个项目，该项目使用 Eclipse 和 Windows 上的 tomcat 6 服务器运行 Primefaces

所有库都按原样复制，当我尝试使用 jsf 扩展名（login.jsf）访问 linux 框上的 url 时，我收到 404 错误，当我尝试使用 .xhtml 扩展名（login.xhtml）我接收代码的 xml 视图

我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
  <welcome-file-list>
    <welcome-file></welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>myApp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>WEB-INF/applicationContext.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  </servlet>
  <context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
  </context-param>
  <context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.xhtml</param-value>
  </context-param>
  <context-param>
    <param-name>com.sun.faces.expressionFactory</param-name>
    <param-value>com.sun.el.ExpressionFactoryImpl</param-value>
  </context-param>
  <context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
  </context-param>
  <context-param>
    <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
    <param-value>true</param-value>
  </context-param>
  <servlet-mapping>
    <servlet-name>myApp</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
  </servlet-mapping>
  <context-param>
    <param-name>log4jtLocation</param-name>
    <param-value>/WEB-INF/log4j.xml</param-value>
  </context-param>
  <listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
  </listener>
  <listener>
    <listener-class>
      org.springframework.web.context.ContextLoaderListener
   </listener-class>
  </listener>
  <listener>
    <listener-class>
          org.springframework.web.context.request.RequestContextListener
       </listener-class>
  </listener>
</web-app> 
```

我的 login.xhtml

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <ui:composition xmlns="http://www.w3.org/1999/xhtml"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:f="http://java.sun.com/jsf/core"
          xmlns:ui="http://java.sun.com/jsf/facelets"
          xmlns:p="http://primefaces.org/ui"
          template = "template/template.xhtml">
    <h:head>

    </h:head>
    <ui:define name="body">
    <h:form id="form">

    <p:growl id="growl" showDetail="true" /> 

          <p:panel>
                <p:panelGrid columns="2">
                        <h:outputLabel value="Username:"/>
                        <p:inputText value = "#{loginUI.username}"/>

                        <h:outputLabel value="Password"/>
                        <p:password value = "#{loginUI.password}"/>

                </p:panelGrid>
                <p:commandButton value="Login" actionListener="#{loginUI.login}" update="growl"/> 

          </p:panel>
    </h:form>
    </ui:define>
    </ui:composition>
    [/code] 
```

我的面孔配置文件

```
 <?xml version="1.0" encoding="UTF-8"?>

    <faces-config
        xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd"
        version="2.1">

         <application>
      <el-resolver>
              org.springframework.web.jsf.el.SpringBeanFacesELResolver
      </el-resolver>
       </application>

    </faces-config> 
```

当我启动tomcat时，日志中没有错误

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:11:09.093

在小服务程序中

```
<servlet-name>Faces Servlet</servlet-name> 
```

放

```
<load-on-startup>1</load-on-startup> 
```

并在 servlet

```
<servlet-name>myApp</servlet-name> 
```

放

```
<load-on-startup>2</load-on-startup> 
```

# java - 谷歌应用引擎入门 - chrome 中的错误

> ID：13011014
> 
> 赞同：0
> 
> 时间：2012-10-22T12:00:49.090
> 
> 标签：java, google-app-engine

我浏览了 Google App Engine for Java 中的入门部分。我安装了以下软件：

*   Eclipse EE IDE（版本：Juno Release Build id：20120614-1722）
*   插件 GWT SDK 2.4.0
*   插件eclipse 4.2
*   插件 GAE Java SDK 1.7.2.1
*   插件 GWT 设计器 2.6.0
*   甲骨文 Java SE 7u9
*   Chome 扩展 GWT 开发者插件 1.0.1133

我尝试创建一个使用 GWT 和 GAE SDK 的 hello world google web 应用程序，但是当我尝试在调试模式下运行它时，它会创建一个 URL，当我单击它时会给出错误消息：“无法加载 GWT DMP 插件” . 我正在运行 Chrome 版本 22.0.1229.94 m

如果我尝试仅使用 GAE SDK 创建一个 hello world google web 应用程序，它似乎根本不起作用。

我按照这里的说明进行操作：[https](https://developers.google.com/appengine/docs/java/gettingstarted/) ://developers.google.com/appengine/docs/java/gettingstarted/ 但是下载和使用的eclipse版本或下载和使用的Java版本不是很清楚。有没有其他人有同样的问题，或者你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:03:24.923

GAE 不支持 Java 7，只支持 5 和 6。

[https://developers.google.com/appengine/docs/java/gettingstarted/installing](https://developers.google.com/appengine/docs/java/gettingstarted/installing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:25:46.387

最新版本的 chrome 已经破坏了插件。该插件的新版本于周五发布。尝试卸载插件并重新安装最新的插件。

这是此处讨论的当前问题 [https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/4fWzySzpbtQ](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/4fWzySzpbtQ)

# razor - 无法摆脱“找到与控制器匹配的多种类型”

> ID：13011016
> 
> 赞同：2
> 
> 时间：2012-10-22T12:01:05.260
> 
> 标签：razor, asp.net-mvc-4, area

我已经在 StackOverflow 中尝试了所有可能的链接到这个主题，这里给出的所有建议，查看了 Rick Anderson 的视频，但没有任何积极的结果。仍然收到可怕的“找到多种类型......”消息。而我的项目只是一个尝试区域现象的设置。是否可以在 Razor 查看器中使用区域？还是只有 ASPX？

这就是我所拥有的： 在 Global.asax 中：

```
 routes.MapRoute( _
        "Default", _
        "{controller}/{action}/{id}", _
        New With {.controller = "Home", .action = "Index", .id = UrlParameter.Optional}, New String() {"MyApplication.Controllers"}) 
```

在三个单独的 AreaRegistration 文件中：

```
 Public Overrides Sub RegisterArea(ByVal context As System.Web.Mvc.AreaRegistrationContext)
        context.MapRoute( _
            "Shopping_default", _
           "Shopping/{controller}/{action}/{id}", _
            New With {.controller = "Home", .action = "Index", .id = UrlParameter.Optional})
    End Sub 
```

和：

```
 Public Overrides Sub RegisterArea(ByVal context As System.Web.Mvc.AreaRegistrationContext)
        context.MapRoute( _
            "Blog_default", _
           "Blog/{controller}/{action}/{id}", _
            New With {.controller = "Home", .action = "Index", .id = UrlParameter.Optional})
    End Sub 
```

和：

```
 Public Overrides Sub RegisterArea(ByVal context As System.Web.Mvc.AreaRegistrationContext)
        context.MapRoute( _
            "Admin_default", _
           "Admin/{controller}/{action}/{id}", _
            New With {.controller = "Home", .action = "Index", .id = UrlParameter.Optional})
    End Sub 
```

我有三个 AreaRegistration 文件，但没有额外引用“.controller = “Home””，但它们都给出了相同的结果。我还尝试将命名空间的额外参数添加到这三个声明中。我试图将其添加到 Global.asax：

```
 ControllerBuilder.Current.DefaultNamespaces.Add("MyApplication.Admin.Controllers")
    ControllerBuilder.Current.DefaultNamespaces.Add("MyApplication.Blog.Controllers")
    ControllerBuilder.Current.DefaultNamespaces.Add("MyApplication.Shopping.Controllers")

    ControllerBuilder.Current.DefaultNamespaces.Add("MyApplication.Controllers") 
```

但这也没有积极的结果。我也试过在 AreaRegistration 类中没有应用程序名称。我可以尝试哪些其他可能的行动（并取得成功的结果）？项目结构很简单：我从一个空项目开始，立即添加了三个区域，即 HomeControllers 和 Index 视图。没有更改命名空间，尽可能保持默认。使用了 MVC 4 模板。任何人的任何建议？

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:45:31.263

问题是这样解决的：

1.  通过添加 %AppName%.Areas.%AreaName%.Controllers 来更改模板为每个控制器提供的默认命名空间。所以在上面的例子中，Admin 区域的 HomeController 被放在了 Namespace

    ```
    Namespace MyApplication.Areas.Admin.Controllers 
    ```

    这恰好与模板呈现的 AreaRegistration 类中的命名空间相同，并添加了“Controllers”后缀。

2.  更改 Global.asax 中的代码，如下所示：

    ```
    routes.MapRoute( _
        "Default", _
        "{controller}/{action}/{id}", _
        New With {.controller = "Home", .action = "Index", .id = UrlParameter.Optional}, New String() {"MyApplication"} _
    ) 
    ```

    所以这里添加了“MyApplication”命名空间。这在应用程序根 HomeController 中没有添加任何命名空间的假设下是正确的（这是默认设置）。如果根 HomeController 中有命名空间，则应在 Global.asax 文件中使用该命名空间。

我发现还有其他方法可以解决同样的问题，但与模板生成的代码相比，这是代码更改最少的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:17:09.967

创建区域时，请勿更改其默认命名空间。看起来您将它们从 更改`MyApplication.Areas.Admin.Controllers`为（与和`MyApplication.Admin.Controllers`相同的模式）。如果您使用默认约定，则不应收到此错误。`Blog``Shopping`

# android - MultiPanel 平板电脑布局的更改 - 如何减少到一个活动？

> ID：13011017
> 
> 赞同：0
> 
> 时间：2012-10-22T12:01:06.960
> 
> 标签：android, android-activity, android-fragments, tablet

我正在开发一个项目，该项目应该能够显示平板电脑的多面板布局。目前使用的是片段，但仍然有很多活动。

MultiPanel 布局要求只有一个父活动，它处理多面板中的所有片段。问题是，在多面板布局的一部分内显示了各种活动，但理想情况下允许一个活动。所有的活动都是庞大而复杂的——它们处理绑定服务、广播和其他生命周期特定的功能。将案例中的活动减少为一项活动意味着必须完全重新设计项目。

有没有什么想法可以解决这个问题，而不是将所有复杂的活动合并到一个活动中并将活动中的逻辑放入片段中？到目前为止有人遇到过这个问题吗？

# apache-flex - 将 AS3 类函数绑定到 Flex 菜单栏

> ID：13011018
> 
> 赞同：2
> 
> 时间：2012-10-22T12:01:07.973
> 
> 标签：apache-flex, binding, actionscript, mxml, menubar

Flex 和 mxml 的新功能。如何将 AS3 类的功能绑定到菜单栏项？我的菜单栏代码是这样的：

```
<mx:MenuBar id="myMenubar" labelField="@label">
    <fx:XMLList xmlns="">
        <item label="File">
            <item label="New" />
            <item label="Open"/>
            <item label="Save"/>
            <item label="Save As"/>
            <item label="Quit"/>
        </item>

        <item label="Edit">
            <item label="Undo"/>
            <item label="Redo"/>
            <item label="Preferences"/>
        </item>

        <item label="Level">
            <item label="New Room"/>
            <item label="Properties"/>
        </item>

        <item label="Objects">
            <item label="Clickable"/>
            <item label="Character"/>
            <item label="Door"/>
            <item label="Treasure"/>
        </item>
    </fx:XMLList>
</mx:MenuBar> 
```

我浏览了 Google 中的几个示例，但找不到明确的解释或示例如何触发 AS3 类函数。我认为我应该以某种方式为我的子项制作点击事件监听器并调用我的班级。但是，mxml 语法让我感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:35:07.703

`MXML`只是一种以声明方式描述数据和组件的方式，最终无论如何它都会编译为纯 ActionScript，因此您只需订阅一个适当的侦听器即可`myMenubar`。

我认为您正在寻找该[`itemClick`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/MenuBar.html#event%3aitemClick)事件：

```
myMenubar.addEventListener(MenuEvent.ITEM_CLICK, function(e:MenuEvent):void
{
    trace(e.label + ' was clicked');
}); 
```

为了能够在更改标签的同时区分项目，我建议为它们分配 ID：

```
<mx:MenuBar id="myMenubar" labelField="@label">
    <fx:XMLList xmlns="">
        <item label="File">
            <item id="abc" label="New" />
            <item id="xyz" label="Open"/>
            ... 
```

然后你可以例如使用一个简单的开关来处理不同的项目：

```
myMenubar.addEventListener(MenuEvent.ITEM_CLICK, function(e:MenuEvent):void
{
    switch(e.item.@id)
    {
        case 'abc':
            // do something
            break;

        case 'xyz':
            // do something else
            break;
    }
}); 
```

当然，您也可以使用以下方法定义要调用的函数`MXML`：

```
<mx:MenuBar id="myMenubar" labelField="@label" itemClick="myMenuItemClickHandler(event)"> 
```

-

```
private function myMenuItemClickHandler(e:MenuEvent)
{
    ...
} 
```

另请参阅[Adob​​e LiveDocs 中的示例，](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/MenuBar.html#includeExamplesSummary)以了解这一切是如何结合在一起的：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Simple example to demonstrate the Halo MenuBar control. -->
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:mx="library://ns.adobe.com/flex/mx"
        initialize="initCollections();">

    <fx:Script>
        <![CDATA[
            import mx.collections.*;
            import mx.controls.Alert;
            import mx.events.MenuEvent;

            [Bindable]
            public var menuBarCollection:XMLListCollection;

            private var menubarXML:XMLList =
                <>
                    <menuitem label="Menu1" data="top">
                        <menuitem label="MenuItem 1-A" data="1A"/>
                        <menuitem label="MenuItem 1-B" data="1B"/>
                    </menuitem>
                    <menuitem label="Menu2" data="top">
                        <menuitem label="MenuItem 2-A" type="check" data="2A"/>
                        <menuitem type="separator"/>
                        <menuitem label="MenuItem 2-B" >
                            <menuitem label="SubMenuItem 3-A" type="radio"
                                groupName="one" data="3A"/>
                            <menuitem label="SubMenuItem 3-B" type="radio"
                                groupName="one" data="3B"/>
                        </menuitem>
                    </menuitem>
                </>;

            // Event handler to initialize the MenuBar control.
            private function initCollections():void {
                menuBarCollection = new XMLListCollection(menubarXML);
            }

            // Event handler for the MenuBar control's itemClick event.
            private function menuHandler(evt:MenuEvent):void  {
                // Don't open the Alert for a menu bar item that 
                // opens a popup submenu.
                if (evt.item.@data != "top") {
                    Alert.show("Label: " + evt.item.@label + "\n" + 
                        "Data: " + evt.item.@data, "Clicked menu item");
                }
            }
         ]]>
    </fx:Script>

    <s:Panel title="Halo MenuBar Control Example"
            width="75%" height="75%"
            horizontalCenter="0" verticalCenter="0">
        <s:VGroup left="10" right="10" top="10" bottom="10">
            <s:Label width="100%" color="blue" text="Select a menu item."/>

            <mx:MenuBar labelField="@label" itemClick="menuHandler(event);" 
                    dataProvider="{menuBarCollection}" />
        </s:VGroup>
    </s:Panel>

</s:Application> 
```

# java - JavaFX 在场景图控件上循环

> ID：13011023
> 
> 赞同：8
> 
> 时间：2012-10-22T12:01:36.797
> 
> 标签：java, javafx-2, javafx

如何循环控制场景？我尝试使用 getChildrenUnmodifiable() 但它只返回第一级儿童。

```
public void rec(Node node){

    f(node);

    if (node instanceof Parent) {
        Iterator<Node> i = ((Parent) node).getChildrenUnmodifiable().iterator();

        while (i.hasNext()){
            this.rec(i.next());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-07-09T18:02:02.373

这是我正在使用的[amru 答案](https://stackoverflow.com/a/13011616/1005102)的修改版本，此方法为您提供特定类型的组件：

```
private <T> List<T> getNodesOfType(Pane parent, Class<T> type) {
    List<T> elements = new ArrayList<>();
    for (Node node : parent.getChildren()) {
        if (node instanceof Pane) {
            elements.addAll(getNodesOfType((Pane) node, type));
        } else if (type.isAssignableFrom(node.getClass())) {
            //noinspection unchecked
            elements.add((T) node);
        }
    }
    return Collections.unmodifiableList(elements);
} 
```

获取所有组件：

```
List<Node> nodes = getNodesOfType(pane, Node.class); 
```

仅获取按钮：

```
List<Button> buttons= getNodesOfType(pane, Button.class); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-22T12:37:34.213

您需要递归扫描。例如：

```
private void scanInputControls(Pane parent) {
    for (Node component : parent.getChildren()) {
        if (component instanceof Pane) {
            //if the component is a container, scan its children
            scanInputControls((Pane) component);
        } else if (component instanceof IInputControl) {
            //if the component is an instance of IInputControl, add to list
            lstInputControl.add((IInputControl) component);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-13T08:26:37.163

你也可以传入一个谓词，它允许任何类型的选择。

```
Predicate<Node> p= n -> null ≃ n.getId() && n instanceof TextInputControl 
```

将获得所有 TextFields 和 TextAreas。

您可以将其全部打包在一个接口中，Java 8 样式，然后您只需要`Parent getRoot()` 在 Pane 或其他容器中实现。

```
@FunctionalInterface
public interface FXUIScraper {
    // abstract method.
    Parent getRoot();

    default List<Node> scrape( Predicate<Node> filter ) {
        Parent top = getRoot();

        List<Node> result = new ArrayList<>();
        scrape( filter, result, top );
        return result;
    }

    static void scrape( Predicate<Node> filter, List<Node> result, Parent top ) {
        ObservableList<Node> childrenUnmodifiable = top.getChildrenUnmodifiable();
        for ( Node node : childrenUnmodifiable ) {
            if ( filter.test( node ) ) {
                result.add( node );
            }
            if ( node instanceof Parent ) {
                scrape( filter, result, (Parent)node );
            }
        }
    }
} 
```

假设您的窗格称为窗格：

```
 FXUIScraper scraper = () ->pane;
   List<Node> textNodesWithId = 
        scraper.scrape(n -> null ≃ n.getId()
                    && n instanceof TextInputControl); 
```

如果您有有意义的 id，例如实体的字段名称或 json 对象中的键名，则将结果处理为所需的形式变得微不足道。github上有一个项目，[其中包含 fxuiscraper](https://github.com/homberghp/fxuiscraper)作为一个单独的项目。

# html - 水平列表项不成行

> ID：13011036
> 
> 赞同：-1
> 
> 时间：2012-10-22T12:02:13.537
> 
> 标签：html, css, list

谁能告诉我为什么我的 3 个列表项与第一个列表项不对齐？

垂直差异似乎因浏览器而异。

完整代码和 css 在这里：[http ://tinkerbin.com/sPPwMctY](http://tinkerbin.com/sPPwMctY)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:29:54.383

通过对您的 CSS 进行一些更改，它现在是跨浏览器。

[**看演示**](http://tinkerbin.com/89I0GPcX)

添加/更新如下：

```
.select_style {
    height:23px;
    line-height:23px;
}

.junior_rank #one  {
    position:relative;
    width:753px;
    left: 118px;
        /*Removed top property*/    
}

#groupranking_label {
    position: relative;
    left: 23px;
    width: 100px;
    top: 17px; /*updated*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:13:22.023

指定第二个和第三个框`margin-top: 0;`旁边的单选按钮。`select`

检查这个**演示**：[http ://tinkerbin.com/3Kgy5SjV](http://tinkerbin.com/3Kgy5SjV)

# android - Android中的HTTP Post到模拟器实例

> ID：13011037
> 
> 赞同：0
> 
> 时间：2012-10-22T12:02:16.693
> 
> 标签：android, http, serversocket

我的要求是我有一个监听端口 5001 的模拟器。如何从我的模拟器的另一个实例向该端口发送 HTTP Post？网址应该是什么？当我尝试像 10.0.2.15:5001 这样的 URL 时，出现异常（无响应且目标服务器无法响应）。

此外，即使我让 serversocket 在单独的线程中侦听，也会收到 ANR 异常。如果我必须进行端口重定向或端口转发，请告诉我。

任何示例链接/教程都会有所帮助（因为我找不到）。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:43:46.877

试试这个 ....

```
private class WriteToServer extends AsyncTask<Double, Void, Void> {

        private final String serverip = "10.0.2.15";
        private final int serverport = 5001;
        Socket s;
        private DataOutputStream dos = null;

        @Override
        protected Void doInBackground(Double... params) {

            try {

                // open the stream
                s = new Socket("10.0.2.15", 5001);
                dos = new DataOutputStream(s.getOutputStream());

                // write the passed double to the stream
                dos.writeDouble(params[0]);
                dos.flush();

            } catch (Exception e) {
                Log.i("AsyncTank", "something's gone wrong");
            }

            return null;
        } 
```

更多信息检查... [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# openerp - 在 OpenERP 中一次安装所有模块？

> ID：13011038
> 
> 赞同：1
> 
> 时间：2012-10-22T12:02:27.030
> 
> 标签：openerp

如何一次安装 OpenERP 中的所有模块？单击即可安装所有模块。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T13:21:17.960

如果您使用 7.0，那么对您来说是个好消息。

-> 进入设置，点击模块并进入模块列表视图。

- >通过单击搜索框搜索未安装的模块。

-> 点击右上角的限制（156 个中的 1-80 个）并选择无限制。

->选中左上角复选框，可以选中列表视图中所有模块的所有复选框。

-> 现在单击更多按钮，然后单击立即安装的模块。

-> 请耐心等待，这将需要一些时间来安装所有模块，但它会安装所有模块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T11:23:26.897

那么皮纳金，

它们可能是您更喜欢讽刺的方式，您可以选择 Heroic 或者您也可以使用一些外部 shell 脚本来运行。

代码可能如下所示。保存这是服务器文件夹下的 Shell 脚本。

```
#line to drop some existing db if we have any, You can skip this.
psql -l | grep somedb_name |cut -d \| -f1  | xargs -n1 dropdb

# Create new Db
createdb somedb_name --encoding=Unicode

# install base module. and Stop the server
./openerp-server --addons-path=../../addons/trunk,../../web/trunk/addons/ -d somedb_name --stop-after-init -i base

#Now trigger sql and marke all module to install with demo true.
psql somedb_name -c "UPDATE ir_module_module SET state = 'to install', demo = true ;"

#againstart Server and let all module get insalled and then server will keep running foreve you want.
./openerp-server --addons-path=../../addons/trunk,../../web/trunk/addons/ -u base -d somedb_name 
```

您可能需要根据目录上的代码管理来更改某些路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T14:07:41.257

启动服务器时，您可以在服务器路径中添加参数，例如

```
./openerp-server --addons ../addons/,
                  ../openerp-web/addons/ -i <list of modules> -d <database name> 
```

给出以逗号分隔的模块名称列表，它将安装在给定数据库中的模块中。

# python - Python中.pyc文件的共享对象？

> ID：13011039
> 
> 赞同：2
> 
> 时间：2012-10-22T12:02:32.497
> 
> 标签：python, python-2.4

**编辑**（澄清问题）：

我有一个包含许多 .py 文件的包的 python 2.4 脚本。.Pyc 文件是自动创建的。

我可以从许多 .pyc 文件中只制作一个 .pyc 文件吗？

客户不应获得 .py 文件。在最好的情况下，他应该只得到一个 .pyc 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T12:04:22.510

如果您使用 Python 3.2+，这些文件将被放置在[一个`__pycache__`目录](http://www.python.org/dev/peps/pep-3147/#proposal)中。

在早期版本中，我不相信有办法改变 Python 的行为（尽管 PEP 确实说该功能[可能会向后移植到 2.7](http://www.python.org/dev/peps/pep-3147/#implementation-strategy) - 这没有发生） - 但您可能能够将文件管理器配置为隐藏`.pyc`文件。

除此之外，您可以使用 bash 脚本或类似的东西清除这些文件，因为它们可以在每次运行程序时生成。

一般来说，我建议让它们保持原样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:44:11.783

我仍然不能 100% 确定您**为什么**要这样做，但一种方法是压缩所有 *.pyc 文件，然后使用自 Py2.3 以来一直存在的[zipimport机制。](http://docs.python.org/library/zipimport.html)

取自页面底部的示例：

```
$ unzip -l /tmp/example.zip
Archive:  /tmp/example.zip
  Length     Date   Time    Name
 --------    ----   ----    ----
     8467  11-26-02 22:30   jwzthreading.py
 --------                   -------
     8467                   1 file
$ ./python
Python 2.3 (#1, Aug 1 2003, 19:54:32)
>>> import sys
>>> sys.path.insert(0, '/tmp/example.zip')  # Add .zip file to front of path
>>> import jwzthreading
>>> jwzthreading.__file__
'/tmp/example.zip/jwzthreading.py' 
```

# java - JBoss AS 7.1.1 部署错误

> ID：13011047
> 
> 赞同：0
> 
> 时间：2012-10-22T12:02:53.397
> 
> 标签：java, maven, intellij-idea, jboss7.x

我在部署过程中遇到错误，我不明白这是什么意思。这是日志：

```
16:54:50,298 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry activation.jar in "/content/RQ.war/WEB-INF/lib/mail-1.4.jar"  does not point to a valid jar for a Class-Path reference.
16:54:52,888 ERROR [org.jboss.as] (MSC service thread 1-4) JBAS015875: JBoss AS 7.1.1.Final "Brontes" started (with errors) in 6379ms - Started 632 of 876 services (163 services failed or missing dependencies, 76 services are passive or on-demand) 
```

在该日志中，我只能看到一个错误和一个警告。并且应用程序没有部署..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:58:42.063

未正确安装 oracle 驱动程序。我重新安装了它，它现在工作正常。

# php - 如何将日期添加到 MySQL 表名？

> ID：13011049
> 
> 赞同：-5
> 
> 时间：2012-10-22T12:02:55.710
> 
> 标签：php, mysql, date

我现在正在为 cronjob 编写一些查询。查询需要创建一个像现有表一样的表。只有它必须将之后的日期（不带分隔符）添加到表名中。

我想出了这个解决方案：明天的代码：

```
$date = date ('dmY');
$date = strtotime(date("dmY", strtotime($date)) . " +1 day"); 
```

查询：

```
$queryvc = "CREATE TABLE vervanger$date LIKE vervanger;
            INSERT vervanger$date SELECT * FROM vervanger"; 
```

当我在 PHP 中回显它时，它会给出我想要的结果，但查询不会执行。而且我认为这是因为我没有`$date`从通常必须的查询中“删除”。有人对此有解决方案吗？

该查询将使用 cronjob 每周运行一次，但在 cronjob 中，日期超过几个月的所有表也将被删除。这样数据库就不会变得太大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:12:53.747

而不是创建一个表，也许你可以给这个表中的每条记录一个日期。然后您可以删除太旧的条目。

之后，如果您仍想创建一个存档表......您可以考虑这个关于[一个语句字符串中的多个语句的](http://php.net/manual/en/mysqli.quickstart.multiple-statement.php)文档。你必须使用[mysqli.multi-query](http://www.php.net/manual/en/mysqli.multi-query.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:20:18.200

*   第一次创建存档数据库（vervanger_archive）。
*   如果您没有设置 DATE_ADD（为每一行添加时间戳），则在原始基础上排名第二。
*   3rd SET 1 cron 任务每天一次，将 OLD 行从原始表移动到存档表。

创建带有时间戳名称的表是不好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:36:44.420

不知道为什么要选择创建多个表，因为这将是一场噩梦。

但只是您知道多个查询不会在一个操作中执行。您可以使用 mysqli::multi_query 执行此操作。然后再次确保 db 用户已被授予创建表的访问权限。

我的建议是添加一个附加列“日期”设置为索引并刷新此数据（删除过时的插入新或插入重复键更新或插入忽略，因为您的应用程序需要记录此数据）。如果数据按月存储等，您可能需要研究 MySQL 存储桶。

# uitableview - 动态获取单元格的高度取决于 UIImageView

> ID：13011051
> 
> 赞同：1
> 
> 时间：2012-10-22T12:03:03.223
> 
> 标签：uitableview, uiimageview

我有一些图片。我的 tableview 将加载它们并根据图片的高度更改行的高度。我的图片大小不同。

```
- (void)viewDidLoad
{

    NSString *imageName=[kDataArray objectAtIndex:(arc4random()%[kDataArray count])];
    UIImageView *importIMG=[[UIImageView alloc]initWithImage:[UIImage imageNamed:imageName]];

    //init tablexiewcell
    arrayList=[[NSMutableArray alloc] initWithCapacity:kRowsInitSize];
    for (NSUInteger i=0; i<kRowsInitSize; i++) {
        [arrayList addObject:[kDataArray objectAtIndex:rand()%2]];
    }

    [TableView setPullToRefreshHandler:^{

        NSArray * newRows=[NSArray arrayWithObject:[kDataArray objectAtIndex:rand()%2]];
        [self performSelector:@selector(dataDidRefresh:) withObject:newRows afterDelay:3.0];

    }];

[super viewDidLoad];
}

#pragma mark- UITableViewDataSource

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    MyCell* cell=[self tableView:tableView cellForRowAtIndexPath:indexPath];
    NSLog(@"%f",cell.Pimage.frame.size.height);
    return cell.Pimage.frame.size.height;

}
-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [arrayList count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    NSString *imageName=[kDataArray objectAtIndex:(arc4random()%[kDataArray count])];
    UIImageView *importIMG=[[UIImageView alloc]initWithImage:[UIImage imageNamed:imageName]];

    MyCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell==nil) {
        cell = [[[MyCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.Pimage=importIMG;

    }
    return cell;
}

#pragma mark - Private methods

-(void)dataDidRefresh:(NSArray *)data
{
    [TableView refreshFinished];

    NSIndexSet * indexSet=[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, [data count]) ];
    NSLog(@"%d",[data count]);
    [arrayList insertObjects:data atIndexes:indexSet];

    NSMutableArray * indexPaths=[[NSMutableArray alloc] initWithCapacity:[data count]];
    for (NSUInteger i=0; i<[data count]; i++)
    {
        [indexPaths addObject:[NSIndexPath indexPathForRow:i inSection:0]];
    }
    [TableView insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationTop];
    [indexPaths release];
} 
```

我写了这些代码，但我没有达到我的目标。我该如何编码？请给我帮助！

# java - 如何使 javax 验证只显示一条错误消息

> ID：13011060
> 
> 赞同：1
> 
> 时间：2012-10-22T12:03:35.040
> 
> 标签：java, spring-mvc, bean-validation, hibernate-validator

假设我对这样的字段进行了验证：

```
@NotEmpty
@Digits(integer = 3, fraction = 0)
private String code; 
```

目前使用 Spring MVC 和 Hibernate 验证，如果我将表单字段留空，我会收到两条消息。有没有办法只显示`@NotEmpty`消息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T08:04:54.467

如果您想坚持 Bean Validation Specification，则需要使用组序列。只有组序列才能保证在第一个错误时停止的有序约束评估。就像是：

```
@GroupSequence({ First.class, Second.class })
public class MyBean {
   @NotEmpty(groups = First.class)
   @Digits(integer = 3, fraction = 0, groups = Second.class)
   private String code;
} 
```

# javascript - 在 YUI3 的自定义模块上定义和触发自定义事件

> ID：13011061
> 
> 赞同：1
> 
> 时间：2012-10-22T12:03:36.050
> 
> 标签：javascript, events, module, dom-events, yui3

这就是我们在 YUI3 中创建自定义模块的方法，

```
<script type="text/javascript">
    YUI.add('my-module', function (Y) {
       // Write your module code here, and make your module available on the Y
       // object if desired.
       Y.MyModule = {
           sayHello: function () {
               console.log('Hello!');
           }
       };
    });
</script> 
```

但是现在我想在这个模块上定义一些自定义事件然后触发它们，我只是在YUI3官方网站上找不到任何相关信息。

我们如何才能真正做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:37:54.960

自定义事件实际上在整个 YUI 中非常重要。该文档页面详细描述了它们：http: [//yuilibrary.com/yui/docs/event-custom/](http://yuilibrary.com/yui/docs/event-custom/)。阅读此页面和侧边栏中的一些示例。

触发自定义事件的最简单和最简单的方法是从 Y 触发它，如 Y.fire("myEvent")。但是，如果您想从您的对象触发一个事件，您需要为您的对象提供 EventTarget API 并调用 this.fire("myEvent")。大多数人通过扩展 Y.Base 来做到这一点，其中包括 Y.EventTarget。见[http://yuilibrary.com/yui/docs/base/——](http://yuilibrary.com/yui/docs/base/)如果你扩展 Base，你会得到一个 fire() 方法，使用 on() 或 after() 监听事件的能力，以及许多其他的好东西.

# perl - LWP::Useragent 超时与 HTTP::Headers

> ID：13011074
> 
> 赞同：1
> 
> 时间：2012-10-22T12:04:06.670
> 
> 标签：perl

我写了一个连接到 URL 的小脚本，发布一些 xml 数据并等待响应，到目前为止一切都很好，我需要设置超时，但我认为我做错了，因为我收到了以下错误消息：

> 无法通过 /usr/share/perl5/HTTP/Message.pm 第 644 行的包“HTTP::Headers”找到对象方法“超时”。

这是我的小代码：

```
#!/usr/bin/perl
use strict;
use warnings;

use LWP::UserAgent;

my $msg =<< "EOT";
<?xml version="1.0" encoding="utf-8"?>
EOT

my $uri = "http://www.myhostexample.com/script";
my $request = HTTP::Request->new(POST => $uri);
$request->content_type("text/xml");
$request->content($msg);

my $response = LWP::UserAgent->new->request($request);
$response->timeout(10);
#print $response->content . "\n"; # debug

if ($response->content =~ /<?xml/s) {

    print "OK!\n";
}
else {

    print "BAD!\n";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:16:02.270

您需要为 LWP::UserAgent 设置超时。

```
...
my $ua = LWP::UserAgent->new();
$ua->timeout(10);

my $response = $ua->request($request);
... 
```

# android - 收到短信并在 android 的 textview 中显示

> ID：13011082
> 
> 赞同：2
> 
> 时间：2012-10-22T12:04:36.193
> 
> 标签：android, android-layout, android-intent, android-emulator, sms

我在android中编写用于发送和接收短信的程序，并在文本视图中显示接收到的内容短信。我想在程序中接收短信，而不是在收件箱信息中！！！！我知道必须从 textview.settext("smsContentEtc") 使用，但我不能使用和实现它。我把总代码。sms.java 用于发送短信，SmsReceiver.java 用于接收短信。请帮我。

短信.java

```
public class SMS extends Activity {

        Button btnSendSMS;
        EditText txtPhoneNo;
        EditText txtMessage;
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);          
            btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
            txtPhoneNo = (EditText) findViewById(R.id.txtPhoneNo);
            txtMessage = (EditText) findViewById(R.id.txtMessage);         
            btnSendSMS.setOnClickListener(new View.OnClickListener() 
            {
                public void onClick(View v) 
                {                
                    String phoneNo = txtPhoneNo.getText().toString();
                    String message = txtMessage.getText().toString();                 
                    if (phoneNo.length()>0 && message.length()>0)                
                        sendSMS(phoneNo, message);                
                    else
                        Toast.makeText(getBaseContext(), 
                            "Please enter both phone number and message.", 
                            Toast.LENGTH_SHORT).show();
                }
            });        
        } 
        private void sendSMS(String phoneNumber, String message)
        {        
            String SENT = "SMS_SENT";
            String DELIVERED = "SMS_DELIVERED";

            PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
                new Intent(SENT), 0);

            PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
                new Intent(DELIVERED), 0);

            //---when the SMS has been sent---
            registerReceiver(new BroadcastReceiver(){
                @Override
                public void onReceive(Context arg0, Intent arg1) {
                    switch (getResultCode())
                    {
                        case Activity.RESULT_OK:
                            Toast.makeText(getBaseContext(), "SMS sent", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                            Toast.makeText(getBaseContext(), "Generic failure", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_NO_SERVICE:
                            Toast.makeText(getBaseContext(), "No service", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_NULL_PDU:
                            Toast.makeText(getBaseContext(), "Null PDU", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_RADIO_OFF:
                            Toast.makeText(getBaseContext(), "Radio off", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                    }
                }
            }, new IntentFilter(SENT));

            //---when the SMS has been delivered---
            registerReceiver(new BroadcastReceiver(){
                @Override
                public void onReceive(Context arg0, Intent arg1) {
                    switch (getResultCode())
                    {
                        case Activity.RESULT_OK:
                            Toast.makeText(getBaseContext(), "SMS delivered", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case Activity.RESULT_CANCELED:
                            Toast.makeText(getBaseContext(), "SMS not delivered", 
                                    Toast.LENGTH_SHORT).show();
                            break;                        
                    }
                }
            }, new IntentFilter(DELIVERED));             
            SmsManager sms = SmsManager.getDefault();
            sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);        
        }
} 
```

短信接收器.java

```
 public class SmsReceiver extends BroadcastReceiver
    {
        private TextView txtshow;
         @Override
            public void onReceive(Context context, Intent intent) 
            {
                //---get the SMS message passed in---
                Bundle bundle = intent.getExtras();        
                SmsMessage[] msgs = null;
                String str = "";            
                if (bundle != null)
                {
                    //---retrieve the SMS message received---
                    Object[] pdus = (Object[]) bundle.get("pdus");
                    msgs = new SmsMessage[pdus.length]; 

                    for (int i=0; i<msgs.length; i++){
                        msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                         
                        str += "SMS from " + msgs[i].getOriginatingAddress();                     
                        str += " :";
                        str += msgs[i].getMessageBody().toString();
                        str += "\n";  

                    }
                    //---display the new SMS message---
                   //Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
                    txtshow.setText("smsContentEtc");                  
                }                         
            }
        } 
```

主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <TextView  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="Enter the phone number of recipient"
        />     

    <EditText
        android:id="@+id/txtPhoneNo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <TextView  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"         
        android:text="Message"
        />     

    <EditText
        android:id="@+id/txtMessage"
        android:layout_width="fill_parent"
        android:layout_height="150px"
        android:gravity="top" />

    <Button 
        android:id="@+id/btnSendSMS"  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:text="Send SMS"
        />

    <TextView
        android:id="@+id/txt_Show"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:freezesText="@bool/r"
        android:text="TextView" />

</LinearLayout>
</RelativeLayout> 
```

清单.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.sms"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />

    <application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
        <activity android:name=".SMS"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
         <receiver android:name=".SmsReceiver"> 
            <intent-filter > 
                <action android:name=
                    "android.provider.Telephony.SMS_RECEIVED" /> 
            </intent-filter> 
        </receiver>
    </application>
    <uses-permission android:name="android.permission.SEND_SMS">
    </uses-permission>
    <uses-permission android:name="android.permission.RECEIVE_SMS">
    </uses-permission>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:17:52.930

您不能使用 setText 或任何其他类似的视图方法

> txtshow.setText("smsContentEtc");

为了修改您的文本视图，首先您应该使用 R.findViewById 并初始化您的视图，但是由于您的类没有从 Activity 扩展，因此您不能使用它。相反，我建议您使用[Shared Preferences](http://developer.android.com/reference/android/content/SharedPreferences.html)

此外，如果您不想收件箱中的短信，您可以使用[AbortBroadcast](http://developer.android.com/reference/android/content/BroadcastReceiver.html#abortBroadcast%28%29)

# mocking - PowerMockMockito 测试在 Junit 下运行，但不在 TestNG 下

> ID：13011090
> 
> 赞同：4
> 
> 时间：2012-10-22T12:05:03.103
> 
> 标签：mocking, testng, mockito, powermock

我正在尝试从 Powermock运行[此基线单元测试。](http://code.google.com/p/powermock/source/browse/trunk/modules/module-test/mockito/junit4/src/test/java/samples/powermockito/junit4/system/SystemClassUserTest.java)使用 Mockito 和 Junit 从该链接按原样运行代码，它运行时没有错误。不幸的是，我需要 Mockito 和 TestNG，这在 10 次测试中有 6 次出现错误：

```
Mockito cannot mock this class: class replica.java.util.UUID$$PowerMock5
Mockito can only mock visible & non-final classes. 
```

对不起，这是一个很长的代码帖子，但我想完整。第一个测试通过，第二个、第5个、第6个、第7个、第9个和第10个都失败了。这可以在TestNG下工作吗？

**编辑 - 添加版本号**

## 这些结果出现在 Mockito V1.9.0、Powermock V1.4.12 和 TestNG v6.8（均在 Java 1.7 下运行）

这是我稍作修改的代码：

```
/*
 * Copyright 2008 the original author or authors.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import static org.mockito.BDDMockito.given;
import static org.mockito.Matchers.anyLong;
import static org.mockito.Mockito.times;
import static org.powermock.api.mockito.PowerMockito.doNothing;
import static org.powermock.api.mockito.PowerMockito.mock;
import static org.powermock.api.mockito.PowerMockito.mockStatic;
import static org.powermock.api.mockito.PowerMockito.spy;
import static org.powermock.api.mockito.PowerMockito.verifyStatic;
import static org.powermock.api.mockito.PowerMockito.when;

import java.net.URL;
import java.net.URLConnection;
import java.net.URLEncoder;
import java.util.Collections;
import java.util.LinkedList;
import java.util.List;
import java.util.UUID;

import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.testng.PowerMockObjectFactory;
import org.testng.Assert;
import org.testng.IObjectFactory;
import org.testng.annotations.ObjectFactory;
import org.testng.annotations.Test;

/**
 * Demonstrates PowerMockito's ability to mock non-final and final system
 * classes. To mock a system class you need to prepare the calling class for
 * testing. I.e. let's say you're testing class A which interacts with
 * URLEncoder then you would do:
 * 
 * <pre>
 * 
 * &#064;PrepareForTest({A.class})
 * 
 * </pre>
 */
// @RunWith(PowerMockRunner.class)
@PrepareForTest({ SystemClassUser.class })
public class SystemClassUserTest {

    @ObjectFactory
    public IObjectFactory getObjectFactory() {
        return new PowerMockObjectFactory();
    }

    @Test
    public void assertThatMockingOfNonFinalSystemClassesWorks() throws Exception {
        mockStatic(URLEncoder.class);

        when(URLEncoder.encode("string", "enc")).thenReturn("something");

        Assert.assertEquals("something", new SystemClassUser().performEncode());

    }

    @Test
    public void assertThatMockingOfTheRuntimeSystemClassWorks() throws Exception {
        mockStatic(Runtime.class);

        Runtime runtimeMock = mock(Runtime.class);
        Process processMock = mock(Process.class);

        when(Runtime.getRuntime()).thenReturn(runtimeMock);
        when(runtimeMock.exec("command")).thenReturn(processMock);

        Assert.assertSame(processMock, new SystemClassUser().executeCommand());
    }

    @Test
    public void assertThatMockingOfFinalSystemClassesWorks() throws Exception {
        mockStatic(System.class);

        when(System.getProperty("property")).thenReturn("my property");

        Assert.assertEquals("my property", new SystemClassUser().getSystemProperty());
    }

    @Test
    public void assertThatPartialMockingOfFinalSystemClassesWorks() throws Exception {
        spy(System.class);

        when(System.nanoTime()).thenReturn(2L);

        new SystemClassUser().doMoreComplicatedStuff();

        Assert.assertEquals("2", System.getProperty("nanoTime"));
    }

    @Test
    public void assertThatMockingOfCollectionsWork() throws Exception {
        List<?> list = new LinkedList<Object>();
        mockStatic(Collections.class);

        Collections.shuffle(list);

        new SystemClassUser().shuffleCollection(list);

        verifyStatic(times(2));
        Collections.shuffle(list);
    }

    @Test
    public void assertThatPartialMockingOfFinalSystemClassesWorksForNonVoidMethods() throws Exception {
        spy(System.class);

        when(System.getProperty("property")).thenReturn("my property");

        final SystemClassUser systemClassUser = new SystemClassUser();
        systemClassUser.copyProperty("to", "property");
    }

    @Test
    public void assertThatMockingStringWorks() throws Exception {
        mockStatic(String.class);
        final String string = "string";
        final String args = "args";
        final String returnValue = "returnValue";

        when(String.format(string, args)).thenReturn(returnValue);

        final SystemClassUser systemClassUser = new SystemClassUser();
        Assert.assertEquals(systemClassUser.format(string, args), returnValue);
    }

    @Test
    public void mockingStaticVoidMethodWorks() throws Exception {
        mockStatic(Thread.class);
        doNothing().when(Thread.class);
        Thread.sleep(anyLong());

        long startTime = System.currentTimeMillis();
        final SystemClassUser systemClassUser = new SystemClassUser();
        systemClassUser.threadSleep();
        long endTime = System.currentTimeMillis();
        Assert.assertTrue(endTime - startTime < 5000);
    }

    @Test
    public void mockingURLWorks() throws Exception {
        URL url = mock(URL.class);
        URLConnection urlConnectionMock = mock(URLConnection.class);

        when(url.openConnection()).thenReturn(urlConnectionMock);

        URLConnection openConnection = url.openConnection();

        Assert.assertSame(openConnection, urlConnectionMock);
    }

    @Test
    public void mockingUUIDWorks() throws Exception {
        // given
        final UUID mock = mock(UUID.class);
        mockStatic(UUID.class);
        given(UUID.randomUUID()).willReturn(mock);

        // when
        String actual = new SystemClassUser().generatePerishableToken();

        // then
        Assert.assertEquals("00000000000000000000000000000000", actual);
    }
} 
```

* * *

如果有帮助，这里有一个精简的版本，它执行了一个失败的测试：[我不确定我是否应该编辑这个问题，如果我应该这样做，我很抱歉，但它在哪里已经太长了，这种方法似乎更有意义。]

```
import static org.powermock.api.mockito.PowerMockito.mockStatic;
import static org.powermock.api.mockito.PowerMockito.when;

import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.testng.PowerMockObjectFactory;
import org.testng.Assert;
import org.testng.IObjectFactory;
import org.testng.annotations.ObjectFactory;
import org.testng.annotations.Test;

@PrepareForTest({ SystemClassUser.class })
public class SystemClassUserTest {

@ObjectFactory
public IObjectFactory getObjectFactory() {
    return new PowerMockObjectFactory();
}

@Test
public void assertThatMockingOfFinalSystemClassesWorks() throws Exception {
    mockStatic(System.class);

    when(System.getProperty("property")).thenReturn("my property");

    Assert.assertEquals("my property", new SystemClassUser().getSystemProperty());
}
} 
```

* * *

现在这里是类似剥离的 SystemClassUser 类：

```
import java.io.IOException;

public class SystemClassUser {

    public String getSystemProperty() throws IOException {
        return System.getProperty("property");
    }

} 
```

在此异常中运行结果：

失败：assertThatMockingOfFinalSystemClassesWorks org.mockito.exceptions.base.MockitoException：Mockito 无法模拟此类：class replica.java.lang.System$$PowerMock0 Mockito 只能模拟可见和非最终类。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T16:07:37.903

我只是将测试用例修改为

```
public class SystemClassUserTest extends PowerMockTestCase {
    ...
} 
```

它工作正常

* * *

**编辑（一年后）：**我最近发现了[系统规则库](http://www.stefan-birkner.de/system-rules/)，我没有尝试过`getProperty()`，但`System.exit()`完全符合我的预期......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:58:25.067

我不确定 TestNG 与这个错误有什么关系。您确定在这两种情况下都使用相同版本的 Mockito 吗？

# c# - 查找 URL 方案

> ID：13011095
> 
> 赞同：2
> 
> 时间：2012-10-22T12:05:22.100
> 
> 标签：c#, asp.net-mvc

我想检查传入的url在c#中是否有http或https？是否有任何默认方法来查找 url 方案（http/https）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T12:07:38.560

您可以使用 Uri.Scheme 来检查它是否是 https。

你也可以只使用[`Request.IsSecureConnection`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.issecureconnection.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T12:07:47.687

```
var currentUrl = System.Web.HttpContext.Current.Request.Url;
if (!currentUrl.Scheme.Equals(Uri.UriSchemeHttps, 
    StringComparison.CurrentCultureIgnoreCase)) 
```

更多信息：[Uri.UriSchemeHttps 字段](http://msdn.microsoft.com/en-us/library/system.uri.urischemehttps.aspx)

# c# - 给定一个 DropDownList 如何找到关联的“OnSelectedIndexedChanged”事件方法名称

> ID：13011099
> 
> 赞同：0
> 
> 时间：2012-10-22T12:05:33.880
> 
> 标签：c#, asp.net, .net

我的页面中有一个下拉列表，如下所示：

```
<asp:DropDownList ID="DropDownList1" runat="server" 
        onselectedindexchanged="DropDownList1_SelectedIndexChanged" AutoPostBack="true">
        <asp:ListItem Text="1" Value="1"></asp:ListItem>
        <asp:ListItem Text="2" Value="2"></asp:ListItem>
        <asp:ListItem Text="3" Value="3"></asp:ListItem>
    </asp:DropDownList> 
```

代码背后：

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
       //Logic Goes Here
    } 
```

在页面加载中，从会话变量中，我将 DropDownList id 设为“DropDownList1”。基于此 ID 字符串，我可以获得控件，但无法获得与其关联的事件名称。

那么如何通过知道Control来找到Control的事件名称呢？？

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:08:36.203

您可能需要通过属性获取它。

```
string selected = EventDropDownList1.Attributes["onselectedindexchanged"].ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:15:01.840

不知道你在这里问什么，但活动可以通过两种方式进行连接，

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)Handles DropDownList1.SelectedIndexChanged 
```

或者在页面加载部分：

```
AddHandler DropdownList1.SelectedIndexChanged, AddressOf DropDownList1_SelectedIndexChanged 
```

我知道您的问题是要求从控件名称中查找事件的名称，但您将事件连接到控件。如果您需要测试哪个控件触发了该事件，即您将相同的代码连接到多个下拉列表，并且您希望根据 DDL ID 控制代码流，然后强制发送者访问它的值：

```
Dim id As String = CType(sender,DropDownList).ID 
```

希望对您有所帮助，如果您可以提供更多信息，我也许可以给出更明确的答案。

很抱歉在 VB.Net 中回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:10:19.323

您可以使用打击代码：

```
Request.Form("__EVENTTARGET") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T12:10:27.093

如果您使用 AutoPostBack = true，则无需指定事件。自动回发将根据回发中发生的情况运行正确的事件。

所以你不需要知道事件的名称，只需在后端创建事件，自动回发就会触发相应的代码。

# jsp - 为什么href标签总是打开新窗口？

> ID：13011109
> 
> 赞同：0
> 
> 时间：2012-10-22T12:06:11.223
> 
> 标签：jsp, liferay, href, portlet, location-href

这是我的jsp页面代码

```
<div class="hide">
    <!-- actions for datatables -->
    <div class="dt_gal_actions">
    <div class="btn-group">
        <portlet:renderURL var="showjspURL">
            <portlet:param name="jspPage" value="/jsps/newrestaurant.jsp" />
        </portlet:renderURL>

        <a href="<%= showjspURL.toString() %>" target="_self" class="btn btn-success" title="Click to Add new advertise">New Restaurant</a>

        <button data-toggle="dropdown" class="btn dropdown-toggle">
            Action <span class="caret"></span>
        </button>

        <ul class="dropdown-menu">
            <li><a href="#" class="delete_rows_dt" data-tableid="dt_gal"><i class="icon-trash"></i> Delete</a></li>
            <li><a href="javascript:void(0)">Lorem ipsum</a></li>
            <li><a href="javascript:void(0)">Lorem ipsum</a></li>
        </ul>
    </div>
</div> 
```

这是我的问题：

```
<a href="<%= showjspURL.toString() %>" target="_self" class="btn btn-success" title="Click to Add new advertise">New Restaurant</a> 
```

此链接始终在新窗口中打开。我尝试了 evry 标签，但它并没有改变它的打开方式..

我该如何解决这个问题？以上是我使用它的jsp页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:14:59.957

我不知道那个简单的href有什么问题..但是如果它对其他人有帮助的话，我已经用下面的href使用java脚本解决了这个问题......

```
 <a href="javascript:q=(document.location.href);void(open('<%=showjspURLs.toString() %>?url='+escape(q),'_self','resizable,location,menubar,toolbar,scrollbars,status'));" class="btn btn-success" title="Click to Add new advertise">New AD</a> 
```

希望这对某人有帮助

# aptana3 - 复制粘贴打开 callback.php

> ID：13011111
> 
> 赞同：1
> 
> 时间：2012-10-22T12:06:13.370
> 
> 标签：aptana3

我对 MacOS Lion 上的最新版本的 Aptana (3.2) 有疑问。很多时候，当我复制粘贴一段代码（使用cmd+C,cmd+V）时，它会打开callback.php，我的代码也粘贴在其中，这不是很方便。

我做错了吗？只有Mac版吗？是否有一些钥匙隐藏在某个地方？

谢谢你的帮助！

# asp.net-mvc - 用于 MVC 项目的 vs.net 2010 解决方案资源管理器

> ID：13011114
> 
> 赞同：0
> 
> 时间：2012-10-22T12:06:31.263
> 
> 标签：asp.net-mvc, visual-studio

在 asp.net-mvc 项目中查找相关项目文件是一个 PIA。视图/控制器/脚本/模型都分散在不同的项目和文件夹中。生产力工具->解决方案导航器插件也无济于事。你知道一个扩展/附加组件，以帮助减轻浏览 mvc 项目的痛苦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:15:44.143

[Resharper](http://www.jetbrains.com/resharper/) (R#) 擅长于此。

Ctrl + N 为您提供了一个查找框，您可以在其中快速筛选类型。

Ctrl + Shift + N 同样适用于文件名。

如果您无法获得 R#，请尝试为视觉工作室添加快捷方式 EDIT | 导航到框

ps - 我没有从 R# 获得佣金

# c# - 在 C# 中添加可为空的小数

> ID：13011117
> 
> 赞同：2
> 
> 时间：2012-10-22T12:06:45.457
> 
> 标签：c#, nullable

让我重新表述。我在 ForEach 循环中应该添加计算的小数？值到小数点？正如您所指出的， originalAmount 在第一次当然是空的。所以我只需要先检查 null 否则做加法。

```
decimal? convertedAmount = Calculate(inputValue); //always returns a value

originalAmount = originalAmount==null ? convertedAmount : originalAmount + convertedAmount; 
```

originalAmount 是在前面定义的，在循环之外。

很抱歉造成混淆，如有必要，可以关闭/删除问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T12:11:35.037

（来自评论）

> 如果 convertAmount 有，我只希望 originalAmount 有一个值，否则它应该为空。

所以：

```
decimal? convertedAmount = ...

decimal? originalAmount = convertedAmount; 
```

它可以满足该要求的所有要求。

您*可能*会更冗长，但这**没有任何意义**：

```
// unnecessary: don't do this:
decimal? originalAmount =
    convertedAmount.HasValue ? convertedAmount.Value : (decimal?)null; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T12:12:57.587

您需要指定当一个或两个值都为空时您的加法应该如何表现。作为建议尝试这样的事情：

```
decimal? convertedAmount = ...
decimal? originalAmount = ...
if (convertedAmount.HasValue)
{
    originalAmount = originalAmount.GetValueOrDefault() + convertedAmount.Value;
} 
```

# objective-c - 使用 NSExpression 找到指数值？

> ID：13011119
> 
> 赞同：1
> 
> 时间：2012-10-22T12:07:01.493
> 
> 标签：objective-c, ios, expression

我正在尝试使用`NSExpression`如下方式计算指数值：

```
NSNumber *number1 = [NSNumber numberWithInteger:2];        
NSNumber *number2 = [NSNumber numberWithInteger:4];

NSArray *arrNum=[NSArray arrayWithObjects:number1,number2,nil];
NSExpression *arrayExpression = [NSExpression expressionForConstantValue: arrNum];

NSArray *arrExp=[NSArray arrayWithObject:arrayExpression]; 

NSExpression* expression =[NSExpression expressionForFunction:@"raise:toPower:" arguments:arrExp];

NSLog(@"powerExp:%@",expression);

int  resultSum = [[expression expressionValueWithObject:nil context: nil] intValue];

NSLog(@"resultnum:%f",resultSum); 
```

我得到了错误：

> -[__NSArrayI doubleValue]：无法识别的选择器发送到实例 0x7439e60 2012-10-22 16:04:04.034 operator[3958:c07] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[__NSArrayI doubleValue]：无法识别的选择器发送到实例 0x7439e60'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:41:57.197

```
NSNumber *number1 = [NSNumber numberWithInteger:2];
NSNumber *number2 = [NSNumber numberWithInteger:4];

NSExpression *expr1 = [NSExpression expressionForConstantValue:number1];
NSExpression *expr2 = [NSExpression expressionForConstantValue:number2];

NSArray *exprArgs = [NSArray arrayWithObjects:expr1, expr2, nil];

NSExpression *expression = [NSExpression expressionForFunction:@"raise:toPower:" arguments:exprArgs];
NSLog(@"powerExp:%@",expression);

int resultSum = [[expression expressionValueWithObject:nil context: nil] intValue];
NSLog(@"resultnum:%d",resultSum); 
```

输出：

```
powerExp:2 ** 4
resultnum:16 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:15:12.973

`expressionForConstantValue:`需要一个`NSNumber`. 你通过了`NSArray`它`NSNumber`。

该`exp:`函数采用单个数字 (n) 并返回 e^n。那是你想要做的吗？或者你的意思是使用`raise:toPower:`，它需要两个值？

# mysql - 为什么这个触发器会使我的一些插入挂起？

> ID：13011123
> 
> 赞同：3
> 
> 时间：2012-10-22T12:07:20.133
> 
> 标签：mysql, triggers

触发器如下：

```
DELIMITER //
CREATE TRIGGER `Conturi_BI` BEFORE INSERT ON `Conturi` FOR EACH ROW BEGIN
SET NEW.CUI_cod = digits(NEW.CUI);
END//
DELIMITER ; 
```

我只是将数字函数应用于用户输入以更快地匹配和重复搜索，但自从我实现它以来，我的一些插入只是挂起。我做了一个类似的更新，它没有同样的问题。

数字函数是由我创建的，触发器和插入在大多数情况下都可以正常工作。

数字功能，根据要求：

```
BEGIN
  DECLARE i, len SMALLINT DEFAULT 1;
  DECLARE ret CHAR(32) DEFAULT '';
  DECLARE c CHAR(1);
  SET len = CHAR_LENGTH( str );
  REPEAT
    BEGIN
      SET c = MID( str, i, 1 );
      IF c BETWEEN '0' AND '9' THEN 
        SET ret=CONCAT(ret,c);
      END IF;
      SET i = i + 1;
      END;
  UNTIL i > len END REPEAT;
  RETURN ret;
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:22:26.083

如果您传递给它，您的`digit`功能将不起作用。`null`它将永远循环。试试看

```
select digits(null) 
```

所以每次`NEW.CUI`都是空的，那么它会让你的插入挂起。`null`您可以在函数的开头添加一个检查：

```
if str is null
then 
   return '';
end if; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:06:26.530

我最好的猜测是，这是从你的“一些”陈述来看，你遇到了[lock contention](https://secure.wikimedia.org/wikipedia/en/wiki/Lock_%28computer_science%29#Granularity)的问题。

如果我理解你的触发器是正确的，在（实际上是在之前）写入表 A 时，你会触发你的过程，这反过来会改变写入所针对的同一个表 A 中的每条记录，专门锁定单个事务中的每一行。

在另一个事务中这样做很可能会导致[死锁](https://secure.wikimedia.org/wikipedia/en/wiki/Deadlock)情况，您的触发器等待升级锁，而另一个事务等待您的完成（如果您愿意的话，简而言之就是死锁）。

这项努力的成功至少取决于数据库驱动程序的实现。锁定一行，然后在触发的事务中再次锁定它 大多数数据库驱动程序假设事务可以扩展，但是，一些数据库无法看到事务来自同一个连接并单独处理它们。

# python - Tkinter 条目小部件的问题

> ID：13011124
> 
> 赞同：1
> 
> 时间：2012-10-22T12:07:20.650
> 
> 标签：python, widget, tkinter

我正在关注 tkinter 的介绍，特别是第 29 页上的对话框条目示例。[http://www.ittc.ku.edu/~niehaus/classes/448-s04/448-standard/tkinter-intro.pdf](http://www.ittc.ku.edu/~niehaus/classes/448-s04/448-standard/tkinter-intro.pdf)

我收到以下错误：

```
d = MyDialog(root)
TypeError: this constructor takes no arguments 
```

我从变量 d 中删除了参数，以及 wait_window 的参数（参见下面的代码），程序将运行，但是没有输入字段。

这是代码

```
from Tkinter import *

class MyDialog:

    def init(self, parent):

        top = Toplevel(parent)

        Label(top, text="Value").pack()

        self.e = Entry(top)
        self.e.pack(padx=5)

        b = Button(top, text="OK", command=self.ok)
        b.pack(pady=5)

    def ok(self):
        print "value is", self.e.get()

        self.top.destroy()

root = Tk()
Button(root, text="Hello!").pack()
root.update()

d = MyDialog(root)

root.wait_window(d.top) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:09:20.260

改变

```
def init(self, parent): 
```

到

```
def __init__(self, parent): 
```

请参阅 的文档[`object.__init__`](http://docs.python.org/reference/datamodel.html#object.__init__)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T12:09:31.727

你需要改变

```
def init(self, parent):
    ... 
```

到

```
def __init__(self, parent):
    ... 
```

（注意括号内的双下划线）。

在 python 中，文档对它调用构造函数的内容有点模糊，但`__init__`通常被称为构造函数（尽管有些人会争辩说这是`__new__`.) 的工作。抛开语义不谈，传递给的参数`MyClass(arg1,arg2,...)`将被传递给`__init__`（前提是你不做有趣的事情，在`__new__`不同的时间进行讨论）。例如：

```
class MyFoo(object): #Inherit from object.  It's a good idea
    def __init__(self,foo,bar):
       self.foo = foo
       self.bar = bar

my_instance = MyFoo("foo","bar") 
```

正如您的代码一样，由于您没有定义`__init__`，因此使用默认值，相当于：

```
def __init__(self): pass 
```

不带任何参数（除了强制的`self`）

* * *

您还需要执行以下操作：

```
self.top = Toplevel(...) 
```

因为稍后您尝试获取顶部属性（`d.top`），但`d`没有属性`top`，因为您从未添加为属性。

# javascript - 如何删除/更改 JQuery UI 自动完成助手文本？

> ID：13011127
> 
> 赞同：95
> 
> 时间：2012-10-22T12:07:24.723
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

这似乎是 JQuery UI 1.9.0 中的一个新功能，因为我之前使用过很多次 JQuery UI 并且从未弹出此文本。

在 API 文档中找不到任何相关内容。

因此，使用带有本地源的基本自动完成示例

```
$( "#find-subj" ).autocomplete({
    source: availableTags
}); 
```

当搜索匹配时，它会显示这个相关的帮助文本：

> '1 个结果可用，使用向上和向下箭头键导航。

如何以一种很好的方式禁用它，而不是使用 JQuery 选择器将其删除。

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-10-26T17:23:32.493

我知道这已经得到解决，但只是想给出一个实现示例：

```
var availableTags = [
      "ActionScript",
      "AppleScript",
      "Asp",
      "BASIC",
      "C",
      "C++"
    ];

$("#find-subj").autocomplete({
    source: availableTags,
    messages: {
        noResults: 'no results',
        results: function(amount) {
            return amount + 'results.'
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2012-11-13T14:15:53.997

这用于可访问性，一种隐藏它的简单方法是使用 CSS：

```
.ui-helper-hidden-accessible { display:none; } 
```

或者（见下面丹尼尔的评论）

```
.ui-helper-hidden-accessible { position: absolute; left:-999em; } 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-09-05T13:58:02.937

上面的答案达到了想要的视觉效果，但是打败了jQuery支持ARIA的对象，对于依赖它的用户来说有点小菜一碟！那些提到jQuery CSS为你隐藏这个的人是正确的，这就是这样做的风格：

```
.ui-helper-hidden-accessible {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
} 
```

请将其复制到您的样式表中，而不是删除消息，请:)。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-10-22T15:19:24.140

根据[这个博客](http://blog.andrewawhitaker.com/2012/10/08/jqueryui-autocomplete-1-9/)：

> 我们现在使用 ARIA 实时区域来宣布结果何时可用以及如何浏览建议列表。公告可以通过 messages 选项进行配置，该选项有两个属性：noResults 表示没有返回任何项目，而results 表示至少返回一项。通常，如果您希望字符串以不同的语言编写，您只需要更改这些选项。消息选项在未来版本中可能会发生变化，而我们正在为所有插件的字符串操作和国际化提供完整的解决方案。如果您对消息选项感兴趣，我们鼓励您阅读源代码；相关代码位于自动完成插件的最底部，只有几行。
> 
> ...
> 
> 那么这如何应用于自动完成小部件？好吧，现在当你搜索一个项目时，如果你安装了屏幕阅读器，它会读到类似“1 个结果可用，使用向上和向下箭头键导航。”之类的内容。很酷吧？

因此，如果你去 github 并查看[自动完成源代码](https://github.com/jquery/jquery-ui/blob/master/ui/widgets/autocomplete.js)，大约在第 571 行，你会看到它实际上是在哪里实现的。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-08-22T17:24:12.400

添加 jquery css 也可以删除说明文本。

```
<link
 rel="stylesheet"
 href="http://code.jquery.com/ui/1.9.0/themes/smoothness/jquery-ui.css" /> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-06-11T14:39:50.113

由于这是出于可访问性的原因，因此最好使用 CSS 将其隐藏。

但是，我建议：

```
.ui-helper-hidden-accessible { position: absolute; left: -9999px; } 
```

而不是：

```
.ui-helper-hidden-accessible { display:none; } 
```

因为前者会将项目隐藏在屏幕外，但仍允许屏幕阅读器阅读它，而`display:none`不会。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-08-02T18:03:31.370

好吧，这个问题有点老了，但是当您包含相应的 css 文件时，文本根本不显示：

```
<link
 rel="stylesheet"
 href="http://code.jquery.com/ui/1.9.0/themes/YOUR_THEME_HERE/jquery-ui.css" /> 
```

当然你必须插入一个实际的主题而不是`YOUR_THEME_HERE`例如“平滑度”

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-03-06T09:14:59.820

样式它如何 jQuery 主题本身的样式。许多其他答案建议包括整个样式表，但如果您只想要相关的 CSS，这就是它的完成方式`http://code.jquery.com/ui/1.9.0/themes/smoothness/jquery-ui.css`：

```
.ui-helper-hidden-accessible { 
    position: absolute !important; 
    clip: rect(1px 1px 1px 1px); 
    clip: rect(1px,1px,1px,1px);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-01-24T18:10:17.810

jQuery CSS .ui-helper-hidden-accessible 位于themes/base/core.css 文件中。为了向前兼容，您应该（至少）在样式表中包含此文件。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-07-21T14:19:28.363

在脚本中的自动完成之后立即添加此代码会将烦人的助手推离页面，但使用屏幕阅读器的人仍然会从中受益：

```
$(document).ready(function() { //pushing the autocomplete helper out of the visible page
    $(".ui-helper-hidden-accessible").css({"position": "absolute", "left":"-999em"}) //{"display","none"} will remove the element from the page
}); 
```

我不喜欢用 JS 操作 CSS，但在这种情况下，我认为这是有道理的。JS代码首先创建了问题，并且在同一文件中的以下几行将解决问题。IMO 这比在单独的 CSS 文件中解决问题要好，该文件可能由其他不知道为什么 .ui-helper-hidden-accessible 类被这样修改的人编辑。

# ios - UIScrollView：大图像性能不佳

> ID：13011128
> 
> 赞同：1
> 
> 时间：2012-10-22T12:07:32.310
> 
> 标签：ios, performance, uiscrollview, photo-gallery

**TL:博士**

Apple 使用什么技术让 Photo.app 如此快速，即使是大图像？

**长版**

我观看了 Apple 的 WWDC 2010 关于滚动视图的视频，以了解如何复制 Photo.app 分页行为和低内存利用率（PhotoScroller 演示）。它运作良好，但由于图像仅在需要时加载，所以当我尝试分页到另一个图像时，应用程序在 JPEG 被解压缩时锁定。

相同的视频显示了一种平铺技术以获得更好的性能，但由于我使用的是从相机拍摄并存储在应用程序中的照片，这似乎不可行（每张照片的多个副本，以不同的分辨率，也会消耗很多空间 - 4MB 与 27MB）。此外，使用 iExplorer，我注意到 Photo.apps 只有每张照片的副本（它甚至没有画廊的小缩略图副本）。

Apple 使用什么技术让 Photos.app 变得如此之快？如何在我的应用程序中获得相同的性能？

> 如果这应该在这里或程序员上，我有点困惑，因为问题中没有代码，但常见问题解答说算法问题是 Stackoverflow 的一部分，这里的标签更好地匹配它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:13:09.167

因此，如果您只全屏显示一张图像，您可以这样做：

在 WWDC11 Session 104 - Advanced Scroll View Techniques 中，他们讨论了无限滚动以及如何做到这一点。基本思想是滚动视图，并在滚动视图后重新定位滚动视图内的 (UIImage) 视图，使其居中或无论您的布局约束是什么。然后您可以将新的 UIImage 加载到`UIImageView`. 因为你只有一个`UIImageView`，所以它应该是相当低的内存消耗。我不确定图像的加载时间会如何表现。

也许预加载`UIImage`当前图像左侧和右侧的下一个，然后将其加载到`UIImageView`重新定位后，滚动视图可以在这里提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-30T21:25:03.157

对于仍在寻找包含大量图像的滚动视图的简单实现的任何人。

[https://github.com/sumofighter666/ReusableScrollView](https://github.com/sumofighter666/ReusableScrollView)

就像实现 UITableView 一样简单

# cordova - Phonegap 设备准备好在黑莓中未触发

> ID：13011129
> 
> 赞同：0
> 
> 时间：2012-10-22T12:07:36.650
> 
> 标签：cordova, blackberry

我正在使用 phonegap 做我的第一个黑莓应用程序，但我无法让设备准备好触发我收到警报“进入初始化函数”但没有调用回调函数我使用 cordova 2.1.0 和 5.0.0.469 黑莓

这是 Index.html

```
 <!DOCTYPE html>
<!--
    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="format-detection" content="telephone=no" />
<meta name="viewport"
    content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
<link rel="stylesheet" type="text/css" href="css/index.css" />
<title>Hello World</title>
</head>
<body onload="init();">
    <div class="app">
        <h1>Apache Cordova</h1>
        <div id="deviceready" class="blink">
            <p class="event listening">Connecting to Device</p>
            <p class="event received">Device is Ready</p>
        </div>
    </div>
    <script type="text/javascript" src="js/webworks.js"></script>
    <script type="text/javascript" src="cordova-2.1.0.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script>
        function onDeviceReady() {
            alert("Inside Device Ready");
        }

        // register Cordova event listeners when DOM content loaded
        function init() {
            alert("entered init function");
            document.addEventListener('deviceready', onDeviceReady, true);
        }
    </script>
    <script type="text/javascript">
        //app.initialize();
    </script>
</body>
</html> 
```

请建议这里可能有问题的是plugins.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
 http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing,
   software distributed under the License is distributed on an
   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
   KIND, either express or implied.  See the License for the
   specific language governing permissions and limitations
   under the License. 
```

-->

```
<plugin
    name="App"
    value="com.phonegap.app.App" />

<plugin
    name="Device"
    value="com.phonegap.device.Device" />

<plugin
    name="Camera"
    value="com.phonegap.camera.Camera" />

<plugin
    name="Network Status"
    value="com.phonegap.network.Network" />

<plugin
    name="Notification"
    value="com.phonegap.notification.Notification" />

<plugin
    name="Accelerometer"
    value="com.phonegap.accelerometer.Accelerometer" />

<plugin
    name="Geolocation"
    value="com.phonegap.geolocation.Geolocation" />

<plugin
    name="File"
    value="com.phonegap.file.FileManager" />

<plugin
    name="FileTransfer"
    value="com.phonegap.http.FileTransfer" />

<plugin
    name="Contact"
    value="com.phonegap.pim.Contact" />

<plugin
    name="MediaCapture"
    value="com.phonegap.media.MediaCapture" />

<plugin
    name="Battery"
    value="com.phonegap.battery.Battery" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:50:59.627

我假设您已经放置了您的 cordova.js 并且可以正确生成您的 cod 文件。

查看您的 config.xml 和小部件功能：

```
 <feature id="blackberry.system" required="true" version="1.0.0.0" />
  <feature id="org.apache.cordova" required="true" version="1.0.0" />
  <feature id="blackberry.app" required="true" version="1.0.0.0" />
  <feature id="blackberry.app.event" required="true" version="1.0.0.0" />
  <feature id="blackberry.system.event" required="true" version="1.0.0.0"/> 
```

这些将激活您的黑莓事件到您的 Phonegap 应用程序。

您可以激活所有功能以查看您想要的此类事件是否未被触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:02:37.223

你可以检查两件事。

1.javascript文件中提到的cordova版本与您在www文件夹中的版本相同。

例如，如果您在 .js 文件中包含版本 2.1.0 作为..

```
<script type="text/javascript" src="cordova-2.1.0.js"></script> 
```

您的 www 文件夹中也应该有相同版本的科尔多瓦。

2.您需要在 config.xml 中添加以下行

```
"<feature id="org.apache.cordova" required="true" version="1.0.0" />" 
```

# javascript - 在 ajax 调用中更改全局变量

> ID：13011143
> 
> 赞同：0
> 
> 时间：2012-10-22T12:08:13.803
> 
> 标签：javascript, ajax, json

很长一段时间以来，我一直在努力解决这个问题，我试图在第二个 ajax 调用之后从第一个 ajax 调用中附加对象。但是 for 循环似乎在附加信息之前将值的更改迭代到最后一个结果，每次都附加最后一个帖子。

```
 var scribjson = 
{
    "user_id" : localStorage.viewing,
};
scribjs = JSON.stringify(scribjson);
var scrib = {json:scribjs};
$.ajax({
    type: "POST",
    url: "getScribbles.php",
    data: scrib,
    success: function(result)
    {     
        var obj = jQuery.parseJSON(result);
        for(var i = 0; i < obj.length; i+=1)
        {   
            var userjson = 
            {
                "user_id" : obj[i].user_id
            };
            userjs = JSON.stringify(userjson);
            var user = {json:userjs};
            localStorage.post = obj[i].post;
            $.ajax({
                type: "POST",
                url: "getRequestsInfo.php",
                data: user,
                success: function(result)
                {     
                    var obj2 = jQuery.parseJSON(result);
                    $('#listOfScribbles').append("<tr><td><img id = 'small_pic' src = '" + obj2[0].profileImage + "'/></td><tr><td>" + obj2[0].firstname + " " + obj2[0].lastname + "</td></tr> ");
                    $('#listOfScribbles').append("<tr><td>" + obj[i].post + "</td></tr>");
                },
                error: function()
                {
                    alert('An Error has occured, please try again.');
                }
            });

        }
    },
    error: function()
    {
        alert('An Error has occured, please try again.');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:21:30.610

使用 IIFE：

```
success: (function(i){return function(result) {
    var obj2 = jQuery.parseJSON(result);
    $('#listOfScribbles').append("<tr><td><img id = 'small_pic' src = '" + obj2[0].profileImage + "'/></td><tr><td>" + obj2[0].firstname + " " + obj2[0].lastname + "</td></tr> ");
    $('#listOfScribbles').append("<tr><td>" + obj[i].post + "</td></tr>");
}})(i), 
```

等等。目前，您的循环生成的 ajax 成功处理程序包含对计数器本身的直接引用，该计数器（在调用它们时）已达到其最终值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:26:32.147

由于 ajax 调用 看起来`success`内部 ajax 调用的所有函数都在循环结束后被调用，所以`i`总是最后一个迭代值。

试试这个：

```
(function(i)
{

    $.ajax({
        type: "POST",
        url: "getRequestsInfo.php",
        data: user,
        success: function(result)
        {     
            var obj2 = jQuery.parseJSON(result);
            $('#listOfScribbles').append("<tr><td><img id = 'small_pic' src = '" + obj2[0].profileImage + "'/></td><tr><td>" + obj2[0].firstname + " " + obj2[0].lastname + "</td></tr> ");
            $('#listOfScribbles').append("<tr><td>" + obj[i].post + "</td></tr>");
        },
        error: function()
        {
            alert('An Error has occured, please try again.');
        }
    });
})(i); 
```

这将在 上创建一个闭包`i`，这将为每个 ajax 调用提供其自己的当前值副本。

# jquery - Jquery UI Dual datepicker：悬停突出显示“从”到“范围”

> ID：13011144
> 
> 赞同：1
> 
> 时间：2012-10-22T12:08:14.667
> 
> 标签：jquery, jquery-ui

我的页面上有一个 jQuery 日期选择器，显示 2 个月。

它允许用户选择（假设）相隔**3 天**`Send`的日期和日期。当用户将鼠标悬停在某个日期上时，我需要突出显示 和 之间的日期。我也需要做相反的事情。即在和之间的突出显示天悬停。`Deliver`**`Send``Send``Deliver``Deliver``Deliver``Send`**

 **我尝试用谷歌搜索相同的结果，但我得到的唯一结果是`beforeShowDay`只有在显示日历之前才有效。

任何帮助/链接将不胜感激。

谢谢。**

# xcode - 如何停止从 shell 脚本构建 Xcode

> ID：13011146
> 
> 赞同：8
> 
> 时间：2012-10-22T12:08:17.013
> 
> 标签：xcode, bash, shell

我目前正在 Xcode 中开发一个应用程序，其中我添加了一个运行 shell 脚本的构建阶段。

该脚本从桌面查找资源并将它们复制到应用程序。如果文件/文件夹不存在，脚本应该取消应用程序的构建。

我已经尝试了各种方法来停止构建，例如`xcodebuild clean`但我无法弄清楚。这是我所拥有的：

```
if [ -d ~/Desktop/MyFolder ]; then
    cp -r ~/Desktop/MyFolder ${CONFIGURATION_BUILD_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}/MyFolder
else
    #Stop the build
fi 
```

有没有办法让脚本告诉 Xcode 停止构建？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T14:06:20.263

您需要从脚本返回一个非零退出代码：

```
exit 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-05T23:01:34.233

另一个有用的技术是让脚本生成带有“error:”前缀的输出。这将导致 Xcode 在构建日志中显示错误，并且如果您的 Xcode 设置在失败时停止构建 - 它会停在那里。

除此之外，您还可以通过打印“警告：”前缀来触发警告。

例子：

```
if [ -d ~/Desktop/MyFolder ]; then
    cp -r ~/Desktop/MyFolder ${CONFIGURATION_BUILD_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}/MyFolder
else
    echo "error: Copy failed!"
fi 
```

# iphone - iphone mapview 获取路线

> ID：13011154
> 
> 赞同：3
> 
> 时间：2012-10-22T12:08:35.693
> 
> 标签：iphone, objective-c, xcode, ios6, mkmapview

我想找到一种简单的方法来获取方向。有什么办法可以做到这一点`mapview`吗？以下是我当前的代码。

```
- (IBAction)goToMap:(id)sender {

[self.view addSubview:self.mapUIView];
[self.mapUIView setFrame:CGRectMake(0, 0, 320, 460)];

self.mapview.mapType = MKMapTypeStandard;

CLLocationCoordinate2D coordinate;
coordinate.latitude = [[self.find lat] floatValue];
coordinate.longitude = [[self.find lng] floatValue];
MKPointAnnotation *annotation = [[MKPointAnnotation alloc] init];

[annotation setCoordinate:coordinate];
[annotation setTitle:[self.find name]];
//[annotation setSubtitle:@"Hello"];
[self.mapview addAnnotation:annotation];
[annotation release];

[self zoomMapViewToFitAnnotations:self.mapview animated:YES];

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:30:13.633

如果你想显示设备的当前位置（比如开车时），你必须在你的项目中添加 CoreLocation 框架，并且应该使用“updateLocation”方法来获取当前位置，但是如果你想在两个位置之间绘制一条路径，你必须使用谷歌API为此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:16:13.283

您不能将 MapKit 用于行车路线。它不支持这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:10:02.507

```
CLLocationManager *manager = [[CLLocationManager alloc] init] ;
    CLLocationCoordinate2D currentLocation = [manager location].coordinate;
    CLLocationCoordinate2D coords = CLLocationCoordinate2DMake(37.365502,-94.394531);
    NSString *fromLocation = [NSString stringWithFormat: @"%f,%f",
                      currentLocation.latitude, currentLocation.longitude];
    NSString *toLocation = [NSString stringWithFormat: @"%f,%f",
                                Coordinate.latitude, Coordinate.longitude];
    NSString *url = [NSString stringWithFormat:
                     @"http://maps.google.com/maps?saddr=%@&daddr=%@", fromLocation, fromLocation];

    UIWebView *webView = [[UIWebView alloc]init];
    NSURL *targetURL = [NSURL URLWithString:url];
    NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
    [webView loadRequest:request]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T12:51:33.653

如果您想绘制方向，请使用： [https ://github.com/kishikawakatsumi/MapKit-Route-Directions](https://github.com/kishikawakatsumi/MapKit-Route-Directions)

# javascript - 如果手风琴打开或关闭，则交换 jQuery 手风琴的标题

> ID：13011156
> 
> 赞同：2
> 
> 时间：2012-10-22T12:08:41.943
> 
> 标签：javascript, jquery, html, accordion

我已经完成了 95%（我希望如此）。我正在研究一个手风琴功能，它根据手风琴是打开还是关闭来更改手风琴头部的文本。（我有一个正负图像工作）。

目前，如果客户端单击手风琴打开和关闭它，标题会正确更改，但如果客户端打开不同的手风琴，原来的手风琴会向上滑动，但标题不会更新。我已经尝试了几个我认为可行的选项，但还没有成功。

我在[这里做了一个jsfiddle](http://jsfiddle.net/lharby/Jknxh/)

jQuery是：

```
 $(document).ready(function() {
// accordion functionality 
$('.accordion-head').click(function(e){
    var content = $(this).parent().find('.accordion-content');
    var head = $(this).parent().find('.accordion-head');
    var $showMore = "Show me more";
    var $hideContent = "Hide this offer";            

    content.addClass('actual');

    $('.accordion-content').not('.actual').each(function(){
        if ($(this).hasClass('accordion-opened')){
            $(this).slideUp(200,function(){
                $(this).toggleClass('accordion-opened');
                $(this).parent().find('.accordion-head').toggleClass('accordion-open');
            });
        }
    });

    $(this).toggleClass('accordion-open');
    content.removeClass('actual');               

    if($(this).hasClass('accordion-open')){
        content.slideDown(200,function(){
            content.toggleClass('accordion-opened');
            head.html($hideContent);
        });
    }else{
        content.slideUp(200,function(){
            content.toggleClass('accordion-opened');
            head.html($showMore);
        });
    }
    e.preventDefault();
   });

 });​ 
```

HTML 看起来像这样：

```
 <div class="accordion">
         <div class="accordion-head">
                        <a href="#">
                           <span class="accordion-heading">Show me more</span>
                        </a>
                    </div>
                    <div class="accordion-content">
                        Including Thames Water, Severn Trent, Anglian Water, Yorkshire Water and many more, plus all council tax local authorities. Cashback on mortgage payments up to maximum monthly mortgage payment of £1,000.
                    </div>
                </div>

                <span class="spacer"></span>

                <div class="accordion">
                    <div class="accordion-head">
                        <a href="#">
                            <span class="accordion-heading">Show me more</span>
                        </a>
                    </div>
                    <div class="accordion-content">
                        Including British Gas, SSE, EDF Energy, E.ON, npower and many more.
                    </div>
                </div>
                <span class="spacer"></span>
            etc. 
```

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:19:52.803

`head.html($showMore)`您可以在折叠循环期间通过删除和更改来重写标题

```
$(this).parent().find('.accordion-head').toggleClass('accordion-open'); 
```

到

```
$(this).parent().find('.accordion-head').toggleClass('accordion-open').html($showMore); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:26:42.920

您还可以`$('.accordion-head').html($showMore);`在 click 函数中插入，它将首先更新所有标题以显示更多，然后根据条件更新各个标题。
var $showMore = "显示更多";
var $hideContent = "隐藏此优惠";
***$('.accordion-head').html($showMore);***
content.addClass('实际');

# html - Android 软键盘：下一个按钮在 HTML5 数字输入之间不“跳动”

> ID：13011159
> 
> 赞同：8
> 
> 时间：2012-10-22T12:08:56.520
> 
> 标签：html, android-softkeyboard

我正在用我的 Android 手机测试 HTML5 输入类型“数字”。在执行此操作时，我注意到当软键盘在数字输入类型上处于活动状态时，下一个按钮似乎不会在输入之间切换。

现在我认为它*应该*在输入之间制表符，但我找不到任何明确的措辞来说明这种*情况*。

我目前正在使用带有股票浏览器的 Android 4.1.1。我也在 Chrome 中尝试过同样的结果。

我在这里有一个示例页面：http: [//jsfiddle.net/axECg/](http://jsfiddle.net/axECg/)这是它的代码：

```
<html>
    <head>
        <title></title>
    </head>
    <body>
        <form id="myForm">
            Number 1<input type="number" id="numA" name="numA" /><br />
            Number 2<input type="number" id="numB" name="numB" />
        </form>
    </body>
</html> 
```

难道我做错了什么？还是目前对 HTML5 + Android 期望过高？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T12:36:00.230

这似乎是 Chrome/Android 浏览器的限制。已记录一个[问题。](http://code.google.com/p/chromium/issues/detail?id=142233)我已经在具有多个浏览器的两台设备上测试了该示例（并尝试了一些修改）。

Nexus 7 4.2.1 和三星 S3 4.1.1

*   Chrome：“下一步”按钮显示但不起作用
*   FF Mobile：按预期工作

我还测试了输入类型：`email`, `text`, `tel`. 在 Chrome 中，它们要么显示无功能的“下一步”按钮，要么不显示“下一步”按钮。FF Mobile 有一个适用于所有情况的“下一步”按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:38:47.693

我注意到我的 Android 键盘上有两个“下一步”按钮；键盘上方有一个似乎用它的同级 [Prev] 按钮正确地制表字段；键盘上的 [Next] 似乎没有发送事件。

# html - XML页面无法显示，这个错误的原因是什么？

> ID：13011160
> 
> 赞同：1
> 
> 时间：2012-10-22T12:08:56.127
> 
> 标签：html, xml

我有以下页面，其中包含以下嵌入在 JSP 中的代码。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>B2E</title>
<link rel="stylesheet" href="../style/global.css">
<link rel="stylesheet" href="../style/local.css">
<link rel="stylesheet" href="../style/calendarControl.css">
<script language="JavaScript" src="../jscripts/calendarControl.js"></script>
<script src="../jscripts/ajaxAction.js"></script>
<script language="javascript" src="../jscripts/ajaxMaster.js"></script>
</head>
<body>
<table border = "0" cellspacing="0" cellpadding="0" width = "100%">
            <tr>
                <td colspan="100%" bgcolor=""><img height="" src="../images/spacer.gif" width="100%"></td>
            </tr>
            <tr>
                <td bgcolor="#FFFFFF" colspan="100%" align = "left" class="headerbg" height="30">&nbsp;</td>
            </tr>
            <tr>
                <td colspan="100%" bgcolor=""><img height="" src="../images/spacer.gif" width="100%"></td>
            </tr>
</table>
<%//@ include file="../includes/mainTheme.jsp"%>
<form action="" name="f"> 
<table align ="right">
    <tr>
        <td><input type="text" name="vs" value="" size="30" class="small"></td>
        <td><input type="button" value="Find" onclick="return check()" class="small"/></td>
    </tr>
    <tr>
        <td class="greysmall">(Enter visitor name/company name)</td>
    </tr>
</table>
</form>
    <table border = "0" cellspacing="0" cellpadding="0" width = "100%">
            <tr>
                <td colspan="100%" bgcolor=""><img height="1" src="../images/spacer.gif" width="100%"></td>
            </tr>
    </table>
<br>

<table border = "0" cellspacing="0" cellpadding="0" width = "100%" style="background-color:#9900FF" height="30">
        <tr>
            <td colspan="" bgcolor="">&nbsp;</td>
            <td colspan="" bgcolor="" ><a href="javascript:void();" class="boldsmall" onclick="goHome()" style="color:#FFFFFF">Home</a></td>
            <td colspan="" bgcolor="" ><a href="javascript:void();" class="boldsmall" onclick="createNew()" style="color:#FFFFFF">Create Visit</a></td>
            <td colspan="" bgcolor="" ><a href="javascript:void();" class="boldsmall" onclick="scheduleVisit()" style="color:#FFFFFF">Schedule Visit</a></td>
            <!--<td colspan="" bgcolor=""><a href="javascript:void();" class="boldsmall">Other Administrative Tasks</a></td>-->
            <td colspan="" bgcolor="" ><a href="javascript:void();" class="boldsmall" onclick="showAllVisitor()" style="color:#FFFFFF">All Visitors</a></td>
            <td colspan="" bgcolor="" ><a href="javascript:void();" class="boldsmall" onclick="showExVisitor()" style="color:#FFFFFF">Exited Visitors</a></td>
            <td colspan="" bgcolor="" ><a href="javascript:void();" class="boldsmall" onclick="showScheduleVisitor()" style="color:#FFFFFF">Scheduled Visitors</a></td>
            <td colspan="" bgcolor="" ><a href="javascript:void();" class="boldsmall" onclick="showBlackVisitor()" style="color:#FFFFFF">Black List Visitors</a></td>
            <td colspan="" bgcolor="" ><a href="javascript:void();" class="boldsmall" onclick="launchBox();" style="color:#FFFFFF">Daily Visitors</a></td>

        </tr>
</table>
<br>
<table border = "0" cellspacing="0" cellpadding="0" width = "100%">
        <tr>
            <td colspan="100%" bgcolor=""><img height="1" src="../images/spacer.gif" width="100%"></td>
        </tr>
</table>
<div id="txtHint" class="small" align="center" style="overflow:">

</div>
<br/>
<%//@ include file="../includes/footer.jsp"%>

<%response.setContentType("text/xml");
response.setHeader("Cache-Control", "no-cache");
%>
</body>
</html> 
```

当我在 Tomcat Web 服务器上处理此页面时，我遇到了以下错误。

![在此处输入图像描述](../Images/a68a6f9e7bd8d1b53f137b98837e5a37.png)

我无法解决这个问题。这个错误的原因是什么？

正如错误所暗示的那样，但由于它已经正确关闭，因此`>`无需放置更多。`>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:16:22.800

您的链接标签未关闭，您的所有中断标签和图像标签也未关闭。

固定示例：

```
 <link rel="stylesheet" href="../style/global.css"/>
   <link rel="stylesheet" href="../style/local.css"/>
   <link rel="stylesheet" href="../style/calendarControl.css"/> 
```

# objective-c - 核心位置，MapKit 错误

> ID：13011166
> 
> 赞同：1
> 
> 时间：2012-10-22T12:09:20.260
> 
> 标签：objective-c, ios, mapkit, core-location

我试图在 Mapkit 中显示我当前的位置，这是代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    //Make this controller the delegate for the map view.
    self.MapView.delegate = self;     

    // Ensure that you can view your own location in the map view.
    [self.MapView setShowsUserLocation:YES];
    locationManager = [[CLLocationManager alloc] init];
    [locationManager setDelegate:self];
    [locationManager setDistanceFilter:kCLDistanceFilterNone];
    [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
} 
```

我写了这个 Mapkit 的代表

```
#pragma mark - MKMapViewDelegate methods. 
- (void)mapView:(MKMapView *)mv didAddAnnotationViews:(NSArray *)views {    
    MKCoordinateRegion region;
    region = MKCoordinateRegionMakeWithDistance(locationManager.location.coordinate,2000,2000);

    [mv setRegion:region animated:YES];
} 
```

但是我在埃及的位置弄错了，这给了我在美国的我，任何人都可以帮助我吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:13:54.430

以防万一：如果您使用的是模拟器，该位置将不是您的真实位置。您必须在模拟器中设置您的位置：调试 -> 位置 -> 自定义位置（或其他任何东西）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:14:10.330

首先。

你没用过

```
[locationManager startUpdatingLocation]; 
```

请在启动位置管理器变量后添加此行。如果您在模拟器中看到这个位置美国，也请告诉我。

如果是：您的模拟器模拟用户偏好给出的位置。进入模拟器窗口，您将获得根据您的选择显示自定义位置的选项。默认情况下，它被选为美国。

希望它能解决你的问题。

# java - 检查 NaN 并在 If 中使用它

> ID：13011170
> 
> 赞同：13
> 
> 时间：2012-10-22T12:09:30.203
> 
> 标签：java, if-statement, nan

我正在从数据库中收集一些数据并将它们加在一起以获得一些统计数据，但是由于我回溯了一些数据，所以计算的总和有时会出现`NaN`（不是数字）我想创建一个 if 语句，表示 if（不是数字）然后从我的表中排除这些数据。

如何测试数据（在这种情况下为双精度）是否为`NaN`？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-22T12:11:44.133

有静态方法[`Float.isNaN(float)`](https://docs.oracle.com/javase/7/docs/api/java/lang/Float.html#isNaN(float))，[`Double.isNaN(double)`](https://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#isNaN%28double%29)您可以使用它们。

```
double x = ... // whatever calculation you do

if (Double.isNaN(x)) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T12:13:47.403

您可以通过两种方式测试 NaN。您可以使用内置功能

```
Double.isNaN(x) 
```

或执行检查，这是

```
if (x != x) 
```

如果 x 是 a`double`或 a`float`

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-10-22T12:12:55.203

这对你有用。

```
if(number == Float.NaN) 
```

# perl - 模块：我什么时候应该在文档中提及所需的 Perl 版本？

> ID：13011174
> 
> 赞同：3
> 
> 时间：2012-10-22T12:09:33.817
> 
> 标签：perl, documentation, version

哪一个是最高的 Perl 版本，我将不再提及作为文档中的要求？例如我从未见过：需要 Perl 4 或更高版本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T12:43:51.643

归根结底，向用户提供额外信息并没有什么坏处，所以如果您知道即使是非常旧的版本也不兼容，您不妨提一下。

然而，Perl 4 被认为是一门独立的语言。无需提及；没有人会期望 C++ 程序在 C 中运行。

从本论坛人们的提问来看，5.8还在广泛使用中。因此，如果您有兴趣制作一个经过充分测试并尽可能广泛使用的模块，我认为至少在您的测试中回溯到那么远是一个好主意。

如果您需要运行某个版本，[`require VERSION`](http://perldoc.perl.org/functions/require.html)在您的模块中使用可能有助于强制执行此要求。这样，如果用户尝试在太旧的版本上运行您的模块，他们就会收到明确的错误消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T02:59:43.200

记录您实际测试过的最古老的 Perl，无论它是什么。不要猜测它；不兼容性蔓延。正如其他人所提到的，在您的代码`use v5.x`和模块元数据中声明您的最低版本。

你应该往回走多远？无论您愿意支持和测试的最旧版本是什么。这是你的时间和潜在的挫折。你越往后走，你错过的功能就越多，工作的 CPAN 模块就越少，你必须解决的错误就越多。

如果您使用线程或 Unicode，请尽可能使用最新的。Unicode 支持一直在改进。线程在 5.8 开始时非常错误，在 5.10 中开始稳定，并且从那以后变得更好。

5.10.1 是一个非常安全的最低版本，您可以获得诸如[autodie、parent、compression 和 archive modules、defined-或者说 given/when、smart match 和 named captures 之](http://perldoc.perl.org/5.10.0/perldelta.html)类的东西。5.10.1 特别是因为[它修复了智能匹配如何以与 5.10.0 不兼容的方式工作](http://perldoc.perl.org/5.10.1/perldelta.html#Smart-match-changes)。这[是 Debian stable 附带的](http://packages.debian.org/stable/perl-base)，这是一个很好的兼容性较低的标准。这是您最早可以期待大多数 CPAN 模块提供可靠支持的时间。

在此之前的下一步是 5.8.9，这是 5.8 系列中的最后一个。这是您可能在健全的生产环境中看到的最古老的 Perl。你失去了很多功能，线程不太可能很好地工作，Unicode 仍然有点不稳定，CPAN 模块开始崩溃。

在此之前是 5.8.4，它是已知的最古老的 Perl，它与主流操作系统 Solaris 一起发布。这是一个[方便的操作系统版本列表以及它们附带的 Perl](https://www.socialtext.net/perl5/versions)。

在此之前是 5.6.1。5.6.2 虽然包含许多错误修复，但从未被广泛采用。在这一点上，你已经深入了几层硬壳、尘土飞扬的安装，这些安装永远不会升级。存在线程和 Unicode 支持，但以非常不同和非常破碎的形式存在。许多 CPAN 模块不支持 5.6。

5.005_03 和 5.004_04 是下一个摇摇欲坠的窗台。在这一点上成为受虐狂或学术练习。您可能会发现一些非常古老的安装，或者一些“在添加线程和 Unicode 之前 Perl 更好”的顽固派。

5.004 之前的任何内容和非常常见的语法片段，如`foreach my $foo`不可用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T12:29:26.817

www.perl.org：

> 当前版本：Perl 5.16.1

所以也许任何高于 5.10 的东西都值得一提。

我使用 Modern::Perl

> 概要
> 
> 现代 Perl 程序使用几个模块来启用 Perl 和 CPAN 的附加功能。不要复制和粘贴所有这些使用行，而是只写一个：

```
use Modern::Perl 
```

> 为了向前兼容，我建议您将年份指定为单个可选导入标记。例如：使用 Modern::Perl '2009'；使用 Modern::Perl '2010';
> 
> ...都启用 5.10 功能，...

***另见：*** perldoc Modern::Perl 或[https://metacpan.org/module/Modern::Perl](https://metacpan.org/module/Modern::Perl)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T16:33:58.463

如果您知道需要最低版本，为什么不记录呢？依赖项通常记录在 README 文件中，并在 Makefile.PL 或 Build.PL 中指定给安装程序。

5.14 和 5.16 是仅有的两个受支持的 Perl 版本，但许多仍然使用 5.8 和 5.10。我什至偶尔听到 5.5 和 5.6。

# vba - 在excel中自动对帐

> ID：13011177
> 
> 赞同：-2
> 
> 时间：2012-10-22T12:09:42.590
> 
> 标签：vba, excel, excel-2007

我有一个包含三列的电子表格。第一列包含人名。第二列包含日期。第三栏包含当日收到的金额和支付的发票。

例如：

```
Name  date         amount
abc   1-jan-2012   2000 usd
abc   2-jan-2012   (1500) usd
abc   3-jan-2012   2000 usd
abc   3-jan-2012   2000 usd
abc   3-jan-2012   (3500) usd 
```

我正在尝试用收到的付款（负值）抵消发票（正值）。如果我使用 lifo 应用程序，那么第一个条目的 net_value 将为 500 美元。第二个条目的净值将为零。

任何人都可以提出一种自动化此练习的方法。我已经写了一个 if 语句，但是当付款超过发票时条件不成立（客户收到预付款的情况）

提前致谢。

这就是决赛桌的样子

```
NAME    DATE    AMOUNT  NET VALUE
abc 1-Jan-12     (4,910.00)  (4,910.00)
abc 2-Jan-12     3,674.00    (26.00)
abc 16-Jan-12    1,777.00    -   
abc 17-Jan-12    (5,477.00)  -   
abc 22-Mar-12    258.00      258.00 
abc 31-Mar-12    5,502.00    1,465.00 
abc 7-May-12     3,986.00    -   
abc 20-May-12    5,238.00    -   
abc 23-May-12    (6,861.00)  -   
abc 4-Jul-12     (6,400.00)  -   
abc 9-Aug-12     2,238.00    2,238.00 
abc 21-Aug-12    4,855.00    2,456.00 
abc 26-Aug-12    (2,399.00)  -   
abc 9-Sep-12     3,938.00    3,938.00 
```

抱歉，造成混乱的人...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:51:36.000

您想平衡每张发票吗？如果是这样，您将希望有一个包含所有发票的单独表格，然后可以为每个发票名称/ID 计算总/剩余余额。

我可能只会使用我会在 workbook_change 上刷新的数据透视表： ![EG3](../Images/07cb2570fbdf2ac700029557587f06da.png)

至少对于一个小规模的 excel 协调项目，我会这样做。希望能帮助到你。祝你好运。

您可以这样做的另一种方法 - 要创建唯一发票列表，您可以使用通过 ctrl+shift+enter 输入的数组公式：

```
=IFERROR(INDEX($A$2:$A$20, MATCH(0, COUNTIF($E$1:E1, $A$2:$A$20), 0)),"") 
```

![例1](../Images/b4a095088a9c8bfd75437d64f41efe93.png)

然后您可以简单地对每个发票 ID 执行 SUMIF：

```
=SUMIF($A$2:$A$22,E2,$C$2:$C$22) 
```

![例2](../Images/836adb92183fc07afd5d5ec6df2f5bde.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:13:58.907

assuming you have the values listed as actual currency amounts, and not the type of text in your example, you can use `SUMIF` to keep a running total of the account.

in D2:

```
=SUMIF($A$2:A2,A2,$C$2:C2) 
```

and copy that down. it will show a running total for the status of the account, also keeps note of the items relating to the name in column A, and not for all names.

for your example, this is the result:

```
Name date      amount    Running Total
abc  1-Jan-12  $2,000    2000
abc  2-Jan-12  ($1,500)  500
abc  3-Jan-12  $2,000    2500
abc  3-Jan-12  $2,000    4500
abc  3-Jan-12  ($3,500)  1000 
```

Reversed format for a LIFO table - you put the first formula at the last cell (D6 in the example)

```
=SUMIF(A6:$A$6,A6,C6:$C$6) 
```

and copying it upwards, giving a result that looks like this:

```
Name date      amount    Running Total
abc  3-Jan-12  ($3,500)  1000
abc  3-Jan-12  $2,000    4500
abc  3-Jan-12  $2,000    2500
abc  2-Jan-12  ($1,500)  500
abc  1-Jan-12  $2,000    2000 
```

with the total consisting of the amounts on that line and below.

# c++ - _bstr_t 内存泄漏

> ID：13011179
> 
> 赞同：4
> 
> 时间：2012-10-22T12:09:45.057
> 
> 标签：c++, memory-management, memory-leaks, bstr

我有一个 C++ 代码。但它没有正确释放内存。告诉我哪里错了，这是我的代码

```
1 void MyClass::MyFunction(void)
2 {
3    for (int i=0; i<count; i++)
4    {
5        _bstr_t xml = GetXML(i);
6        // some work
7        SysFreeString(xml);
8    }
9 } 
```

GetXML（第 5 行）返回一个 BSTR。在这个程序的内存增加。但是在 SysFreeString（第 7 行）之后内存没有释放。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T12:29:36.873

First:

```
// This makes a copy.
// This is where the leak is. You are leaking the original string.
_bstr_t xml = GetXML();

// You want to use this, to attach the BSTR to the _bstr_t
_bstr_t xml = _bstr_t(GetXML(), false); 
```

Second, **don't do this**:

```
SysFreeString(xml); 
```

The `_bstr_t` class will do that for you.

Third, BSTR will not release the memory to the OS immediately, it caches recently used strings in order to make SysAllocString faster. You shouldn't expect to see memory usage go straight down after SysFreeString.

You can control this behaviour for debugging purposes:

*   [http://support.microsoft.com/default.aspx?scid=kb;en-us;Q139071](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q139071)

Lastly, when viewing memory usage in Task Manager you need to look at the column "Commit Size" not "Working Set". Go to Menu->View->Select Columns to show the column. And also note that this really only helps over a period of time - the memory may not be released to the OS immediately, but if you have no leaks, it shouln't go up forever, over a course of hours.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:16:53.557

我想你应该使用：

```
xml.Attach(GetXML(i)); 
```

operator= 看起来它实际上是在分配新值 - 这意味着复制它。GetXML 返回的值保持未释放状态。

也应该不需要 SysFreeString(xml);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:29:39.460

Task Manager only provides the amount of memory allocated to the process. When C++ releases memory ( C's free) it does not necessarily return the memory to the Operating system so Task Manager will not necessarily show memory going doem until the process ends.

What Task Manager can show is if you keep allocating memory and not releasing it then the memory size of the process will keep increasing, if this happens you probably hava a memory leak.

When programming you need to use memory profilers to see if you are releasing memory. In Windows I used Rational's Purify to give me this information but it costs a lot. MS C runtime can be used to track memory. [MSDN](http://msdn.microsoft.com/en-us/library/974tc9t1%28v=vs.80%29.aspx) provides an overview here, read and follow th links.

As to your code and as per other comments and answers one of the points of using _bstr_t class is to do the memory and other resource management for you so you should not call SysFreeString

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-03T01:05:55.230

_bstr_t 的析构函数会调用 SysFreeString(xml)，所以不需要再调用 SysFreeString(xml)。额外的可用内存将导致崩溃。

# javascript - 输入时未触发Jquery按键事件

> ID：13011182
> 
> 赞同：1
> 
> 时间：2012-10-22T12:09:54.177
> 
> 标签：javascript, jquery, html

```
$("#username,#password").keypress(function(e)
    {
        //alert('');
        if(e.keyCode == 13)
        {
            signIn();
        }
    }); 
```

如果按下回车按钮，则不会调用 keypress 事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:10:56.017

尝试使用 keyUp 事件。

**[现场演示](http://jsfiddle.net/DgD4j/1/)**

```
$("#username,#password").keyup(function(e){
        //alert('');
        if(e.keyCode == 13)
        {
            signIn();
        }
}); 
```

这也适用于按键

**[现场演示](http://jsfiddle.net/WcgBh/1/)**

```
$("#txt1").keypress(function(e) {

    if (e.keyCode == 13) {
        //signIn();
        alert("keypress");
    }
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T12:16:42.223

Key down 更合适：

```
$("#username,#password").keydown(function(e){
        if(e.keyCode == 13)
        {
            signIn();
        }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:15:09.120

1.  使用`e.which`而不是`e.keyCode`因为这是 jQuery 保证的事件
2.  尝试`e.preventDefault()`，因为没有它（如果它们在表单中），表单会提交
3.  也许最好的方法是收听表单的`submit`事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T12:15:12.880

你确定不是`signIn ();`功能有问题？因为这似乎工作得很好；[http://jsfiddle.net/vDkBs/1/](http://jsfiddle.net/vDkBs/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T12:25:38.710

使用 keypress 和 which 语句：

```
$("#username,#password").keypress(function(e) {
    if (e.which == 13) {
        //call here your function
    }
}); 
```

# ruby-on-rails - 在 Ruby on rails 中打印数组或对象。还可以查看数据的结构

> ID：13011184
> 
> 赞同：5
> 
> 时间：2012-10-22T12:10:02.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, puts

我正在控制器中执行 Active Record 查询。现在我想以数组或对象的形式查看它的所有内容。我想查看返回数据的结构。我是 ruby​​ on rails 的新手。在 PHP 中，我们使用`var_dump()`or `print_r()`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T13:19:30.017

有几种方法可以做到这一点。如果您想以交互方式使用结果，请键入 . 打开 rails 控制台`rails console`。在控制台中运行您想要的查询

```
query_result = MyModel.find_by_interesting_parameter( 'Foo' ) 
```

然后使用该`to_yaml`方法转储一个不错的结构

```
puts query_result.to_yaml 
```

有时，更容易看到视图返回的内容。为此，请使用`debug`视图本身中的方法...

```
<%= debug @post %> 
```

请参阅此页面以获取更多[信息](http://guides.rubyonrails.org/debugging_rails_applications.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T12:13:15.043

试试`to_yaml`和`inspect`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T13:07:59.713

看看这个文档，“调试 Rails 应用程序”，特别是第 3 节，“使用 ruby​​-debug 调试”： http: [//guides.rubyonrails.org/debugging_rails_applications.html](http://guides.rubyonrails.org/debugging_rails_applications.html)

# android - 看不到整个 GridView

> ID：13011186
> 
> 赞同：0
> 
> 时间：2012-10-22T12:10:06.280
> 
> 标签：android

我有一个字符串`Canada@3@United States@14@Zambia@3@`需要在 gridView 上显示。

```
String[] numbers=newString.split("\\@");
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, numbers);
gridView.setAdapter(adapter);
gridView.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        Toast.makeText(getApplicationContext(), ((TextView) v).getText(), Toast.LENGTH_SHORT).show();
    }
});

<GridView
   android:id="@+id/gridView1"
   android:layout_width="match_parent"
   android:layout_height="fill_parent"
   android:layout_marginTop="100dp"
   android:numColumns="2"
   android:textColor="#151B54" >
</GridView> 
```

我只能看到白色的第一个条目（OnItemClickListener）对我有用，我只能看到吐司的形式。请纠正我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:43:43.347

我确实添加了适配器，所以没有显示视图。

# android - 如何在 webview 中显示交互式地图？

> ID：13011193
> 
> 赞同：0
> 
> 时间：2012-10-22T12:10:35.990
> 
> 标签：android, android-layout, android-intent

我正在尝试显示我使用 imapbuilder 创建的交互式地图。问题是当我在我的网络视图中加载它时，我只是得到一个空白屏幕。我已经尝试了一切（我只是想知道我的设备是否无法处理闪存有 sgs2 和摩托罗拉 xoom2 10.1in 平板电脑都带有 ICS）。这是我的 XML 代码。

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<WebView android:id="@+id/webview"

    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/>

</LinearLayout> 
```

对于我的.java；

```
import android.os.Bundle;
import android.app.Activity;
import android.os.Handler; 
import android.view.Window;
import android.view.WindowManager;
import android.webkit.WebView; 

public class MainActivity extends Activity { 

  private Handler mHandler = new Handler(); 

  @Override 
  public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE); 
    this.getWindow().setFlags   
    (WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.FLAG_FULLSCREEN); 
    setContentView(R.layout.activity_main); 
    WebView view=(WebView)findViewById(R.id.webview);
    view.getSettings().setPluginsEnabled(true);
    view.loadUrl("file:///android_asset/Interactive.htm"); 
    view.addJavascriptInterface(new MyJavaScriptInterface(), "Android"); 
} 

final class MyJavaScriptInterface 
{ 
    public void ProcessJavaScript(final String scriptname, final String args) 
        {              
            mHandler.post(new Runnable() 
                { 
                    public void run() 
                        { 
                            //Do your activities 
                        } 
                });
        }
}
} 
```

在我的资产文件夹中是 Interactive.htm 和子文件夹，其中包含从我使用的软件导出的 flash 文件和内容。那么我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:00:09.450

您是否将此权限添加到清单文件中？

`<uses-permission android:name="android.permission.INTERNET" />`

# sharepoint - 如何在 sharepoint 2010 中使用 CustomAction 添加功能区项目？

> ID：13011196
> 
> 赞同：2
> 
> 时间：2012-10-22T12:10:57.207
> 
> 标签：sharepoint

如何在 sharepoint 2010 中使用 CustomAction 添加功能区项目

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T13:14:06.000

我真的推荐这个博客系列：[http ://www.sharepointnutsandbolts.com/2010/01/customizing-ribbon-part-1-creating-tabs.html](http://www.sharepointnutsandbolts.com/2010/01/customizing-ribbon-part-1-creating-tabs.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T23:48:29.770

以下是使用 SharePoint 2010 中的 CustomAction 将名为“测试操作 1”的功能区项（按钮）添加到 TemplateType = 10003 的列表的步骤

1.添加一个新元素并添加以下代码。请注意，有两个 CustomAction。一个添加功能区按钮，另一个添加 javascript 文件。

RegistrationId 与 ListTemplateType 相同。

有关默认服务器功能区自定义位置的列表，请参阅[本文](http://msdn.microsoft.com/en-us/library/ee537543.aspx)。

```
 <?xml version="1.0" encoding="utf-8"?>
    <Elements xmlns="http://schemas.microsoft.com/sharepoint/"> 
      <CustomAction ShowInLists="TRUE" Id="TestAction1" RegistrationType="List" RegistrationId="10003" Location="CommandUI.Ribbon">
        <CommandUIExtension>
          <CommandUIDefinitions>
            <CommandUIDefinition  Location="Ribbon.ListItem.Actions.Controls._children">
              <Button  Id="Ribbon.ListItem.Actions.TestAction1" Alt="Test Action 1" Sequence="10" Image32by32="/_layouts/images/ACTIONSEDITPAGE.PNG" Command="Test_Action1" LabelText="Test Action 1" TemplateAlias="o2"/>
            </CommandUIDefinition>
          </CommandUIDefinitions>
          <CommandUIHandlers>
            <CommandUIHandler Command="Test_Action1" CommandAction="javascript:TestAction1();" />
          </CommandUIHandlers>
        </CommandUIExtension>
      </CustomAction>
      <CustomAction Id="Test.Ribbon.TestScript" Location="ScriptLink" ScriptSrc="~/_layouts/SPTest/TestJScript1.js" />
    </Elements> 
```

2.映射 Layouts 文件夹并添加 TestJScript1.js 文件。

```
function TestAction1() {
    alert("This the test action 1");
} 
```

查看示例项目结构

![示例解决方案资源管理器视图](../Images/4fa4e3ac0b4c48030d78d6680aa9e5e4.png)

# ios - 如何获取文件扩展名

> ID：13011199
> 
> 赞同：1
> 
> 时间：2012-10-22T12:11:06.480
> 
> 标签：ios, iphone, ipad, nspredicate

如何在 NSPredicate 中给出多个检查条件

```
[NSPredicate predicateWithFormat:@"SELF ENDSWITH %@ %@%@ ,doc,pdf,png]; 
```

它需要工作并给我三种类型并给我输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:19:49.367

试试这个....

```
NSArray *ext = [NSArray arrayWithObjects:@"doc", @"pdf", @"png", nil];
NSArray *dirContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsDirPath error:nil];
NSArray *files = [dirContents filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"pathExtension IN %@", ext]]; 
```

# scala - Scala 的“后缀操作”

> ID：13011204
> 
> 赞同：62
> 
> 时间：2012-10-22T12:11:22.943
> 
> 标签：scala, scala-2.10

我已经搜索了半个小时，仍然无法弄清楚。

在[SIP：模块化语言特性](http://docs.scala-lang.org/sips/pending/modularizing-language-features.html)中，有许多特性需要在 Scala 2.10 ( `import language.feature`) 中明确“启用”。其中有`postfixOps`，我在任何地方都找不到参考。这个功能到底允许什么？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-22T12:17:09.257

它允许您在后缀位置使用运算符语法。例如

```
List(1,2,3) tail 
```

而不是

```
List(1,2,3).tail 
```

在这个无害的例子中，这不是问题，但它可能会导致歧义。这不会编译：

```
val appender:List[Int] => List[Int] = List(1,2,3) ::: //add ; here
List(3,4,5).foreach {println} 
```

并且错误消息不是很有帮助：

```
 value ::: is not a member of Unit 
```

它尝试在调用`:::`结果上调用该方法，该结果`foreach`为`Unit`. 这可能不是程序员的本意。要获得正确的结果，您需要在第一行之后插入一个分号。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-06-25T18:57:43.290

**有史以来最简单的答案：**

从没有参数的方法中删除点已[弃用](http://docs.scala-lang.org/style/method-invocation.html#suffix_notation)！

```
List(1,2,3) reverse //is bad style and will lead to unpredicted behaviour
List(1,2,3) map(_*2) reverse //bad too, because reverse can take first method call from the next line (details below) 
```

可以在采用map、filter、count 等[高阶函数](http://docs.scala-lang.org/style/method-invocation.html#higherorder_functions)参数的方法中删除 dot并确保安全！此外，[纯函数](http://docs.scala-lang.org/style/method-invocation.html#arity1)方法，如 zip。

```
List(1,2,3) map(_*2) filter(_>2)
(List(1,2,3) map(_*2)).reverse //safe and good
List(1,3,5) zip List(2,4,6) 
```

* * *

**长答案为什么**

```
case class MyBool(x: Boolean) {
  def !!! = MyBool(!x) //postfix
  def or(other: MyBool): MyBool = if(x) other else this //infix
  def justMethod0() = this //method with empty parameters
  def justMethod2(a: MyBool, b: MyBool) = this //method with two or more
  override def toString = if(x) "true" else "false"
} 
```

**1)**后缀运算符 - 实际上是一个没有参数 (a!==a.!) 且没有括号的方法调用。（被认为不安全且已弃用）

```
val b1 = MyBool(false) !!!
List(1,2,3) head 
```

**2）**后缀运算符是方法，应该结束行，否则将被视为中缀。

```
val b1 = MyBool(true) no! no! //ERROR
//is actually parsed like
val b2 = MyBool(true).no!(no!) //(no!) is unknown identifier
//as bad as
Vector(1,2,3) toList map(_*2) //ERROR 
```

**3)**中缀操作符是一个参数的方法，可以在没有点和括号的情况下调用。仅适用于[纯函数](http://docs.scala-lang.org/style/method-invocation.html#arity1)方法

```
val c1 = MyBool(true) or b1 or MyBool(true)
val c2 = MyBool(true).or(b1).or(MyBool(true))
c1 == c2 
```

**4)**如果你用参数调用它，带有一个或多个参数的方法将不带点链接。def a(), def a(x), def a(x,y) 但是你应该只对使用[高阶函数](http://docs.scala-lang.org/style/method-invocation.html#higherorder_functions)作为参数的方法这样做！

```
val d1 = MyBool(true) justMethod2(b1, c1) or b1 justMethod0() justMethod2(c1, b1)
//yes, it works, but it may be confusing idea
val d2 = MyBool(true).justMethod2(b1,c1).or(b1).justMethod0().justMethod2(c1, b1)
d1 == d2
//looks familiar? This is where it should be used:
List(1,2,3) filter(_>1) map(_*2) 
```

* * *

示例警告：

> 警告：有 1 个弃用警告；使用 -deprecation 重新运行以获取详细信息警告：后缀运算符尾部应通过使隐式值 scala.language.postfixOps 可见来启用。这可以通过添加导入子句 'import scala.language.postfixOps' 或通过设置编译器选项 -language:postfixOps 来实现。请参阅 Scala 文档以获取值 scala.language.postfixOps 以讨论为什么应显式启用该功能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-22T12:16:47.450

它指的是调用 nullary（没有 arg 列表或空 arg 列表）方法作为后缀运算符的能力：

举例：

```
case class MyBool(value: Boolean) {
    def negated = new MyBool(!value)
}
val b1 = MyBool( true )
val b2 = b1 negated // Same as b1.negated 
```

见：[http ://www.scala-lang.org/node/118](http://www.scala-lang.org/node/118)

# css - HTML5 元素仅拉伸到窗口大小

> ID：13011211
> 
> 赞同：0
> 
> 时间：2012-10-22T12:11:52.633
> 
> 标签：css, html

我正在整理一个 HTML5 页面。我注意到在“页眉”和“页脚”等元素中没有指定宽度的 div 只会填充窗口的宽度。因此，例如，如果您有：

```
<header>
   <div id="header-background" style="background: #ddd">
      <h1 style="width:960px">Hello World</h1>
   </div>
</header> 
```

并且你将窗口的大小减小到 960 像素以下（例如 600 像素）并水平滚动，“标题背景”只会拉伸到 600 像素，右侧将是一个空白区域。

您甚至可以在 stackoverflow.com 上看到这一点

有没有解决的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:18:46.717

默认情况下，任何块级元素都将占据页面宽度的 100%。如果您的宽度不能（或不想）低于，那么您可以使用`min-width`

```
header { 
    min-width: 960px;
    width: auto; 
} 
```

# c# - 执行多个 ajax 调用时会话为空

> ID：13011214
> 
> 赞同：3
> 
> 时间：2012-10-22T12:12:13.050
> 
> 标签：c#, ajax, session

请帮忙，因为自上周以来这一直让我发疯，我仍然没有接近解决方案......

环境：IIS 7.5、.Net 4.0、jQuery（最新）

我有一个内部 Web 服务，我调用它来创建一个由许多客户及其关系组成的层次结构对象。在我的 Web 服务中，我将层次结构对象存储在`HttpContext.Current.Session`.

不久之后，在我的 javascript 中，我遍历了用户可见的客户。对于每个客户，我调用一个 $.ajax 函数，该函数调用我的 Web 服务中的另一个过程。在 C# 代码中，我从我的层次结构对象中`HttpContext.Current.Session`读取并使用 linq 读取当前客户的数据。

我的问题是`HttpContext.Current.Session["hierarchy"]`某些客户返回 null 。即使我调用完全相同的 url，每次的客户也不相同。

我已经尝试在写入之后立即读取层次结构，`HttpContext.Current.Session`只是为了验证我的层次结构对象中的所有内容实际上都写入了`HttpContext.Current.Session`.

我尝试记录`HttpContext.Current.Session.SessionId`以验证会话是否相同并且所有内容都加起来。

`EnableSessionState`我在我的 Default.apsx 中尝试过使用和不使用

提前感谢任何可以指导我正确方向的人...

./CJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:30:21.230

如果您使用的是 ASMX Web 服务（希望不是），请确保在每种方法之上都有以下内容：

```
[WebMethod(EnableSession = true)] 
```

否则，关于 WCF，Xing 是正确的。我从经验中知道，如果您不手动打开 ASP.NET 会话，会话将返回 null。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T12:25:48.290

您的 Web 服务是由 WCF 制成的吗？如果是这样，则根本没有会话，除非启用了 asp.net 兼容模式。

# c++ - c++：从另一个类调用一个类的变量

> ID：13011215
> 
> 赞同：1
> 
> 时间：2012-10-22T12:12:16.990
> 
> 标签：c++

我有一堂课让我们说

```
class ABC
{
   int x;
   char y;
  ....
} 
```

另一个班级

```
class xyz{
   int UseVariablOfABC(int a,char b)
   // a and b are the variables/members declared in class ABC above
}

int xyz::UseVariablOfABC(int a,char b){
//Do some thing with a and b
} 
```

xyz 类是从用户抽象出来的（意味着他不能设置其成员函数的参数值，这里是 useVariableofABC ），用户只能使用 ABC 类 .... 在 c++ 中是否可行...我需要创建一个对象吗xyz中的ABC类......

任何建议请......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:15:00.600

`ABC`如果are not的成员`static`，那么是的，您确实需要一个实例。如果您只希望 的参数`xyz::UseVariablOfABC`成为 的成员`ABC`，只需将该实例作为参数传递：

```
int xyz::UseVariablOfABC(const ABC&) 
```

# jquery - 使用 jquery 设置输入值

> ID：13011219
> 
> 赞同：0
> 
> 时间：2012-10-22T12:12:26.733
> 
> 标签：jquery

我正在尝试创建一个包含员工月薪的简单 html 文件，并且必须计算每个薪水的应付税款！我使用“添加”按钮来添加更多员工文本字段，从而创建一个包含类似 div 的新 div 类！在工资文本字段的 onchange 事件中，我无法设置相应员工的税值！

不幸的是，我无法上传屏幕截图，所以我把所有代码都放在了让我的问题尽可能清楚的地方！

这是html代码：

```
<div id="all_emps">
    <div class="em_area">
        <label>Employee 1</label>
        <input type=text required  />
        <label>Position</label>
        <input type=text required  />
        <label>Monthly Salary</label>
        <input class=em_sal type=text required  size=10 />
        &nbsp &nbsp &nbsp 
        <label>Salary Tax</label>
        <input class=em_tax type=text required size=10 readonly />
        &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp
        <a href="#" id="add_emp">Add</a>
        &nbsp &nbsp &nbsp &nbsp &nbsp
        <a href="#" id="del_emp">Remove</a>
    </div>  
</div> 
```

这是jquery代码：

```
$(document).ready(function(){
var counter = 2;
$("#add_emp").click(function () {
var newTextBoxDiv = $(document.createElement('div'))
     .attr("class", 'em_area' + counter);

newTextBoxDiv.after().html('<br><label>Employee '+counter+' </label> <input id=em_name name=em_name type=text required  /> <label>Position</label> <input id=em_post name=em_post type=text required  /> <label>Monthly Salary</label> <input class=em_sal name=em_sal size=10 type=text required  /> &nbsp &nbsp &nbsp <label>Salary Tax</label> <input class=em_tax type=text size=10 required />  ' );
newTextBoxDiv.appendTo("#all_emps");
counter++;
 });

 $("#del_emp").click(function () {
if(counter==2)
{
    alert("Can not remove the only employee!");
}
else{
    counter--;
    $(".em_area" + counter).remove();
}
 });
  $('#em_area').on('change' , '.em_sal', function() { // Fire the change event

var salary = parseInt(this.value);
var dueTax = 0;
if(salary < 5000){  
    alert('Salary less than 5000!!');
}
else if(salary >= 5000)
{
    due_tax= salary/100;
    due_tax= salary - due_tax;
}
// This will get the corresponding tax input for the employee..
$(this).closest('div').find('.em_tax').val(due_tax) ;
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:37:37.933

重构了一下。你现在有一个`all_emps`div，`div`每个员工一个，有`id="em<counter>"`

[提琴手](http://jsfiddle.net/2cWft/9/)

html部分：

```
<div id="all_emps">
    <div id="em1">
        <label>Employee 1</label>
        <input type=text required  />
        <label>Position</label>
        <input type=text required  />
        <label>Monthly Salary</label>
        <input class=em_sal type=text required  size=10 />
        &nbsp &nbsp &nbsp 
        <label>Salary Tax</label>
        <input class=em_tax type=text required size=10 readonly />
        &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp

    </div> 
    <a href="#" id="add_emp">Add</a>
        &nbsp &nbsp &nbsp &nbsp &nbsp
     <a href="#" id="del_emp">Remove</a>    
</div>​​​​​​ 
```

js部分

```
$(document).ready(function() {
    var counter = 2;
    $("#add_emp").click(function() {
        var newTextBoxDiv = $(document.createElement('div'));
        newTextBoxDiv.attr("id", 'em' + counter);

        newTextBoxDiv.html('<br><label>Employee ' + counter + ' </label> <input id=em_name name=em_name type=text required  /> <label>Position</label> <input id=em_post name=em_post type=text required  /> <label>Monthly Salary</label> <input class=em_sal name=em_sal size=10 type=text required  /> &nbsp &nbsp &nbsp <label>Salary Tax</label> <input class=em_tax type=text size=10 required />  ');

        $("#all_emps div").last().after(newTextBoxDiv);
        counter++;
    });

    $("#del_emp").click(function() {
        if (counter == 2) {
            alert("Can not remove the only employee!");
        } else {
            counter--;
            $("#em" + counter).remove();
        }
    });
    $('#all_emps').on('change', '.em_sal', function() { // Fire the change event
        var salary = parseInt(this.value);
        var due_tax= 0;
        if (salary < 5000) {
            alert('Salary less than 5000!!');
        } else{
            due_tax = salary / 100;
            due_tax = salary - due_tax;
        }
        // This will get the corresponding tax input for the employee..
        $(this).closest('div').find('.em_tax').val(due_tax);
    });
}); 
```

​</p>

# java - 如何从 Pax Web 部署的 Web 包访问（蓝图）OSGi 服务？

> ID：13011222
> 
> 赞同：1
> 
> 时间：2012-10-22T12:12:39.213
> 
> 标签：java, osgi, blueprint-osgi, pax-web, eclipse-gemini

我目前正在使用 Pax Web 部署 OSGi Web 应用程序包。从这个 Web 包中，我需要访问一组 OSGi 服务。在系统的其余部分，我使用蓝图来创建和使用服务。这很棒，因为它提供了代理、阻尼等。

从 Pax Web 部署的 Web 应用程序包中，访问这些 OSGi 服务的最佳方式是什么？

我的想法是

1）通过osgi-bundlecontext属性从ServletContext中获取BundleContext，然后使用OSGi ServiceTracker类。

2) 在 Web 包中创建一个蓝图上下文文件，其中包含对我需要的服务的引用。Blueprint 上下文由 Blueprint 扩展程序在 OSGi 服务注册表中注册，我可以从中检索它，然后按 id 查找 bean。

3) 使用 Springs ContextLoaderListener 之类的东西在 web.xml 文件中创建蓝图上下文。

选项 1 很好，但意味着我必须跟踪服务并且无法获得蓝图的任何好处。

选项 2 也可以正常工作，只是遇到时间问题。实际上，现在有两个服务正在部署应用程序 - 使用 web.xml 文件部署的 Pax Web 扩展器和部署蓝图上下文文件的（在我的例子中是 Gemini）蓝图扩展器。在启动时，这些扩展程序会同时部署，并且当 Pax Web 扩展程序实例化任何 servlet 上下文侦听器时，无法保证应用程序上下文在 OSGi 服务注册表中可用。这意味着不能从上下文侦听器代码调用 OSGi 服务。

选项 3 - 不太确定是否可以这样做。看起来 Spring DM 曾经使用过这种方法？

我觉得我一定遗漏了一些东西 - 有没有一种简单的方法可以从 Pax Web 部署的 Web 包中使用蓝图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:32:30.957

是的，你错过了另一个可以使用 jndi 作为桥梁的工具。如果使用 aries（虽然我不知道双子座），您也可以检索任何 OSGi 服务作为 jndi 查找。现在通过 web.xml 检索它，你会没事的。

例如使用

```
osgi:service/<interface>[/<filter>] 
```

作为来自 web.xml 的 jndi 源 这样做的好处是，您不会遇到现在无法完成的 #2 关于 #3 的问题。所以基本上你仍然可以选择 3 但我建议使用 #4

# ios - 在没有 Xcode 数据设计器的情况下使用 Core Data 迁移

> ID：13011229
> 
> 赞同：2
> 
> 时间：2012-10-22T12:12:58.420
> 
> 标签：ios, core-data, core-data-migration, rubymotion

我将 Core Data 与 Rubymotion 一起使用，我不想使用 Xcode 图形数据建模器，我只是在代码中创建了一堆 NSEntityDescriptions 和 NSEntityAttributes，而且效果很好。

*   但是我还没有弄清楚是否可以在不创建 .xcdatamodeld 文件的情况下使用 Core Data 模式迁移？

*   而且，如果没有 .xcdatamodeld 文件就无法运行迁移，也许有一些库可以从 NSEntityDescriptions 生成所需的文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:43:10.380

看看 MotionData 是如何尝试实现这一目标的。 [https://github.com/alloy/MotionData/blob/master/app/schema.rb#L108](https://github.com/alloy/MotionData/blob/master/app/schema.rb#L108) 可能我们必须使用[NSMigrationManager](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSMigrationManager_class/Reference/NSMigrationManager.html)。查看他们的规范以及它如何使用它[https://github.com/alloy/MotionData/blob/master/spec/schema_spec.rb#L146](https://github.com/alloy/MotionData/blob/master/spec/schema_spec.rb#L146) 如果您能够弄清楚这一点，请与我们分享。我也在尝试解决完全相同的问题。

# javascript - 是否有一个简单但有用的 jquery.JsPlumb 示例？

> ID：13011230
> 
> 赞同：20
> 
> 时间：2012-10-22T12:12:58.947
> 
> 标签：javascript, jquery, jquery-ui, jsplumb

上周我一直在寻找一些图形可视化 javascript-library 并且我偶然发现了[jsPlumb](http://jsplumb.org)，这是从我见过的例子来看的，这是迄今为止我见过的最好看和最先进的库。该文档虽然很大，但不是很有帮助，因为我无法弄清楚如何实际执行最重要的任务。

我的问题清单包括：

*   如何告诉图形使用 DOM 树的预定义元素？
*   将显示这些元素的哪一部分？
*   虽然连接很容易，但如何定义对齐方式？

虽然这些问题仍然存在，但有一些示例，但它们要么简单到无法使用（参见示例 1），要么它们非常复杂，甚至可以检索（下载不是问题，但我没有在玩一些库之前真的想分析一切......）代码至少对我来说是不可能的（参见[https://github.com/sporritt/jsPlumb/tree/master/demo](https://github.com/sporritt/jsPlumb/tree/master/demo)）。

示例 1

```
 <head>
  <script type="text/javascript" 
     src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js">
  </script>
  <script type="text/javascript" 
     src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js">
  </script>
  <script type="text/javascript" 
     src="PATH_TO/jquery.jsPlumb-1.3.15-all-min.js ">
  </script>
  <script type="text/javascript">
     jsPlumb.bind("ready", function() {
        var e0 = jsPlumb.addEndpoint("container0"),
        e1 = jsPlumb.addEndpoint("container1");

        jsPlumb.connect({ source:e0, target:e1 });
     });
 </script>
 </head>
 <body>
   <div id="container0">
   </div>
   <div id="container1">
   </div>
 </body> 
```

这导致 ![示例 1 的屏幕截图](../Images/9e044597e4b75f855497f9922b22b1f7.png)

谁能给我一个回答我的问题的例子？

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T00:27:54.670

尝试在结束头标签之前添加它...

```
<style type="text/css">
    #container0, #container1 {
        float: left;
        height: 100px;
        width: 100px;
        border: 1px solid black;
        margin: 10px;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T05:39:54.037

你在那里得到的东西没有错，但是你的 div 没有样式并且没有定位。

我建议将它们绝对定位，给它们一个顶部/左侧，也许还有一个边框，你会看到一些更有用的东西。

# vb.net - Visual Basic 重载解析失败，因为无法调用可访问的“新建”，错误

> ID：13011234
> 
> 赞同：3
> 
> 时间：2012-10-22T12:13:10.290
> 
> 标签：vb.net, email

我有这个问题的代码：

[使用 Memory Stream 生成 PDF 文件作为 system.net.mail.attachment](https://stackoverflow.com/questions/8272203/generate-a-pdf-file-as-system-net-mail-attachment-using-memory-stream)

帮助我在内存中创建电子邮件附件。

```
Imports System.IO
Imports System.Net.Mail
Imports System.Text.ASCIIEncoding
Imports System.net.Mime

Public Sub SendMail(ByVal att As String, Optional ByVal filename As String _
    = "Attachment.csv")

    Dim sendMail As New SmtpClient
    Dim mail As New MailMessage

    Using MemoryStream = New MemoryStream

        If att.Length <> 0 Then

            Dim data As Byte() = ASCII.GetBytes(att)

            MemoryStream.Write(data, 0, data.Length)
            MemoryStream.Seek(0, SeekOrigin.Begin)
            MemoryStream.Position = 0

            Dim content As New Net.Mime.ContentType()

            content.MediaType = MediaTypeNames.Application.Octet
            content.Name = filename

            Dim Attach As Attachment
            Attach = New Attachment(MemoryStream, content)
            mail.Attachments.Add(Attach)
        End If

        sendMail.DeliveryMethod = SmtpDeliveryMethod.Network
        sendMail.Host = "SERVER"
        sendMail.UseDefaultCredentials = False

        sendMail.Credentials = New System.Net.NetworkCredential("UN", "PW")
        sendMail.Send(mail)
    End Using
End Sub 
```

我收到此错误：

> 重载解析失败，因为没有缩小转换就无法调用可访问的“新”：
> 
> 'Public Sub New(contentStream As System.IO.Stream, contentType As System.Net.Mime.ContentType)'：参数匹配参数 'contentStream' 从 'Object' 缩小到 'System.IO.Stream'。
> 
> 'Public Sub New(fileName As String, contentType As System.Net.Mime.ContentType)'：参数匹配参数 'fileName' 从 'Object' 缩小到 'String'。

```
Dim Attach As Attachment
Attach = New Attachment(MemoryStream, content) 
```

在这条线上。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:23:25.343

在您的 Using 语句中，您将名为 MemoryStream 的变量初始化为 Object 而不是 MemoryStream。

尝试将您的 Using 语句从

```
Using MemoryStream = New MemoryStream 
```

到

```
Using MemoryStream As New MemoryStream 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T12:59:40.093

或使用这个

```
Using MemoryStream As MemoryStream = new MemoryStream() 
```

# javascript - 更改单击按钮时请求的 URL 的参数

> ID：13011238
> 
> 赞同：1
> 
> 时间：2012-10-22T12:13:20.717
> 
> 标签：javascript, jquery

对于无法提供更多信息，我提前道歉，如果信息有限，我将删除该问题。

所以，我有一个脚本，它生成一种依赖于脚本（也是动态生成的）的搜索引擎，这非常复杂，我对它没有任何影响。

当您单击应用（搜索）按钮时，将触发搜索过程，您可以在包含一些参数的新 URL 上看到结果。

```
E. g.: http://www..example.com/...&ThisParameter=XYZ&SecondParameter=foo&ThirdParameter=bar 
```

我的问题是 - 是否可以更改`"ThisParameter=XYZ"`为其他内容，例如`"ThisParameter=Something"`.

问题是我不知道 URL 是如何构造的并且不能影响它，所以我需要一个代码来获取生成的任何 URL 并更改提到的这部分。

提前感谢您的意见！

编辑

我找到了影响生成的 URL 的脚本部分。当我在 DOM 中更改它时，它会将我重定向到所需的页面。

```
var options = {"FOO":123,"BAR":"ABC","ThisParameter":"STH","EXAMPLE":123, ...} 
```

这是您选择“复制路径”时的输出：

```
_options[0].ThisParameter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:22:28.423

如果查询参数的顺序始终相同：

```
var url = window.location.href;
var lst_temp = url.split('?');
var $lst_parts = lst_temp[1].split('&');

var new_val = 'blabla';
var position = 'x';
lst_parts[x] = 'ThisParameter=' + new_val;

var url_new = lst_temp[0] + '?';
url_new += lst_parts.join('&'); 
```

编辑：
如果事先不知道查询键的顺序，请执行以下操作：

从这里使用此功能：[https ://stackoverflow.com/a/111545/888177](https://stackoverflow.com/a/111545/888177)

```
function EncodeQueryData(arr_data) {
   var ret = [];
   for (var d in arr_data)
      ret.push(encodeURIComponent(d) + "=" + encodeURIComponent(arr_data[d]));
   return ret.join("&");
} 
```

然后读取 url 并像这样拆分它：

```
var url = window.location.href;
var key = "ThisParameter";
var new_val = 'blabla';
var lst_temp = url.split('?');
var lst_parts = lst_temp[1].split('&'); 
```

添加此循环以创建一个包含查询参数和值的关联数组：

```
var arr_data = new Array();
for (var index in lst_parts) {
   lst = lst_parts[index].split('=');
   arr_data[lst[0]] = lst[1];
} 
```

为避免无休止的刷新：

```
var val = arr_data[key];
if (val != new_val) {
  arr_data[key] = new_val;
  var  new_url = lst_temp[0] + '?' + EncodeQueryData(arr_data);
  window.location.href = new_url;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:37:13.843

如果不重新加载页面，您将无法更改 url，但以下内容将允许您进行调整。它需要当前页面的 url（来源解释不清楚）。如果您引用的 url 在链接的 href 中，则可以简单地修改此代码

```
/* get current url info using location object*/
var baseUrl = location.href.split('?')[0];
/* array of search strings */
var searchParams = location.search.slice(1).split('&');
var searchKeyToChange = 'ThisParameter';
var newVal = 'someNewValue';

var doPageReload = false;
/* loop over search strings, modify appropriate one*/
for (i = 0; i < searchParams.length; i++) {
    var params = searchParams[i].split('=');
    if (params[0] == searchKeyToChange) {
        if (params[1] != newVal) {
            searchParams[i] == searchKeyToChange + '=' + newVal;
            doPageReload = true;
        }
    }
} /* load adjusted url if new value not already set*/
if (doPageReload) {
    location = baseUrl + '?' + searchParams.join('&');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:18:12.563

您可以简单地通过正则表达式替换或拆分，`?`以`&`获取参数值对的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T12:34:36.053

如果您的问题是如何使用 JavaScript 动态更改浏览器中的 URL，这是不可能的（出于安全原因）。如果您只需要通过使用然后更改您的 URL 来请求页面，您可以使用之前评论中的方式然后：window.location.replace(yourModifiedUrl);

# android - 如何在 Android 中禁用 WIFI 自动连接

> ID：13011252
> 
> 赞同：27
> 
> 时间：2012-10-22T12:14:18.630
> 
> 标签：android, wifi

Android 将 WIFI 详细信息保存到[WifiConfiguration](http://developer.android.com/reference/android/net/wifi/WifiConfiguration.html)类中。当 WIFI 开启且 SSID 时，密钥详细信息与 WIFI 网络匹配，然后 Android 自动连接到特定的 WIFI 网络。如何禁用该自动连接功能？问这个问题的目的是，我有两个配置的网络（已经保存），我想在按钮点击事件上连接 WIFI，但 android 的自动连接功能与 WIFI 本身连接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T12:51:58.727

不，你不能这样做。操作系统会跟踪设备中配置的网络。它试图找到这些网络，并根据优先级驱动方法，选择一个合适的网络，并在 WiFi 打开后立即连接到它。正如 Arpit 建议的那样，您可以忘记这些网络，操作系统将从内存中删除它的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-01T11:28:52.207

虽然原生 Android 没有此选项，但 MIUI ROM 确实提供了它。ROM 有一个设置，可以切换记住的网络的自动连接。

官方 MIUI ROM 可[在此处](http://en.miui.com/)获得，非官方国际版可在[此处](https://xiaomi.eu/community/)找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-09T17:21:41.607

如果您的手机中未显示连接优化器选项，请转到设置>位置访问并禁用 wifi 和移动网络位置，或者您可以尝试第二种方法 从 google play store 下载 wifi matic 应用程序，它将阻止您自动打开 wifi .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-22T10:57:24.490

自 Android 7 更新以来，我的三星 S7 就可以做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-27T12:11:08.533

```
1) Get an instance of class WifiManager by calling Context.getSystemService(Context.WIFI_SERVICE).
2) Enable or disable Wifi using wifimanager.setWifiEnabled(true); and wifimanager.setWifiEnabled(false); respectively.

public void DisableWiFi(){

        wifimanager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        wifimanager.setWifiEnabled(false);

    } 
```

所需权限

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
 <uses-permission android:name="android.permission.INTERNET" />
 <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" /> 
```

或者

要阻止您的 Android 设备自动连接到开放网络，请打开设置并转到**网络和 Internet > Wi-Fi > Wi-Fi 首选项。**点击连接旁边的按钮以打开网络以禁用它。

注意：这已确认在适用于 Pixel 的 Android 10 Q 中有效，但也可能在旧版本的 Android 中有效。如果您没有看到这些特定屏幕，请查看“设置”中的“移动网络”或“连接”等内容。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-08-27T16:54:34.003

有一种方法可以让您的 android 不自动连接。诀窍是按住连接的网络来修改它，然后输入一个六进制密码。即十六进制或字符或 8 位数字或组合的密码，然后保存密码。

下次尝试重新连接时会提示“身份验证问题”

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2015-06-20T02:12:35.937

转到菜单 - 设置 - 更多设置 - 移动网络 - 连接优化器并取消选中 Sprint 连接优化器。

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2012-10-22T12:18:42.433

您必须在设备中做一件事，只需转到设置 -> 网络设置 -> WiFI，然后单击下面列出的网络，当对话框出现时，只需单击忘记。

现在您将不会自动连接到该网络。

# ipad - ipad左对齐

> ID：13011255
> 
> 赞同：0
> 
> 时间：2012-10-22T12:14:37.340
> 
> 标签：ipad, alignment

在我的大多数网站上，它们似乎在 ipad 或 iphone 上几乎正确地显示，除了它们看起来像左对齐 - 尽管它真的不止于此。

似乎每个设备都有一个小的右侧边距类型的区域，它以某种方式与身体相关联（当我改变身体背景颜色时，这种颜色会改变）。

在这个特定站点上，有一个重复的背景图像，然后会被截断/不再重复。显然我错过了某种类型的编码 - 我已经用谷歌搜索并尝试了几种不同的解决方案，但没有一个有效。

918nawreck.com

# iphone - MPMoviePlayerController 应该只在横向模式下

> ID：13011266
> 
> 赞同：3
> 
> 时间：2012-10-22T12:15:10.820
> 
> 标签：iphone, ios, ipad, mpmovieplayercontroller, uiinterfaceorientation

我在我的应用程序中使用 MPMoviePlayerController 来播放视频。我的应用程序仅在纵向模式下工作。我希望应用程序视频只能在横向模式下播放。所以请任何人建议我如何做到这一点。现在我的视频正在纵向模式下播放。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:18:15.287

为此，您需要对该类进行子`MPMoviePlayerController`类化。

```
@interface yourMovie:MPMoviePlayerController
{
}
@end 
```

并且您需要在实现中实现该`shouldAutoRotate`方法并仅返回横向模式

```
@implementation yourMovie

- (BOOL)shouldAutorotate
{
    return [[UIDevice currentDevice] orientation] != UIInterfaceOrientationPortrait;
}
@end 
```

你需要创建`yourMovie`实例而不是`MPMoviePlayerController`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T12:17:58.470

在您的 MPMoviePlayerController 中使用此代码，

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    [[UIApplication sharedApplication] setStatusBarOrientation: UIInterfaceOrientationLandscapeLeft];
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

而不是`UIInterfaceOrientationLandscapeLeft`你也可以使用`UIInterfaceOrientationLandscapeRight`...

# node.js - iisnode 无法处理 http 响应状态行

> ID：13011269
> 
> 赞同：2
> 
> 时间：2012-10-22T12:15:22.943
> 
> 标签：node.js, iisnode

我在 Windows 2008 R2 和 Node 0.8 上使用 IISnode 0.1.21 x64

我的应用程序使用 4 个线程成功运行。但是一段时间后（比如 3-4 小时），响应不会从 IISnode 发送到客户端，并且用户不会在页面上获得数据（但应用程序的其余部分正在工作）。我尝试在 IISnode 文件夹中创建一个日志，但没有从那里得到任何东西。

如果我从任务管理器中删除一个 node.exe 进程，应用程序就会开始正常工作。又过了几个小时，我又回到了原点。

我得到了 ETW 日志，这就是它显示的内容：

```
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
    <System>
        <Provider Guid="{1040dfc4-61db-484a-9530-584b2735f7f7}" />
        <EventID>0</EventID>
        <Version>0</Version>
        <Level>2</Level>
        <Task>0</Task>
        <Opcode>0</Opcode>
        <Keywords>0x0</Keywords>
        <TimeCreated SystemTime="2012-10-21T13:21:56.783161800Z" />
        <Correlation ActivityID="{00000000-0000-0000-0000-000000000000}" />
        <Execution ProcessID="2468" ThreadID="3484" ProcessorID="0" KernelTime="195" UserTime="435" />
        <Channel />
        <Computer />
    </System>
        <Data>{00000000-0000-0000-6E02-0080000000CA}: iisnode failed to process http response status line</Data>
</Event>
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
    <System>
        <Provider Guid="{1040dfc4-61db-484a-9530-584b2735f7f7}" />
        <EventID>0</EventID>
        <Version>0</Version>
        <Level>5</Level>
        <Task>0</Task>
        <Opcode>0</Opcode>
        <Keywords>0x0</Keywords>
        <TimeCreated SystemTime="2012-10-21T13:21:56.783171500Z" />
        <Correlation ActivityID="{00000000-0000-0000-0000-000000000000}" />
        <Execution ProcessID="2468" ThreadID="3484" ProcessorID="0" KernelTime="195" UserTime="435" />
        <Channel />
        <Computer />
    </System>
        <Data>{00000000-0000-0000-6E02-0080000000CA}: iisnode request processing failed for reasons unrecognized by iisnode</Data>
</Event> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:54:53.743

这种情况通常表明 node.exe 和 iisnode 之间的连接在应用程序发送回 HTTP 响应的过程中中断。这又可能是响应处理期间异常的结果。检查您的响应代码路径是否有未处理的异常，和/或注册一个全局 uncaughtException 处理程序以查看是否有任何异常未处理可能是一个好主意。如果这没有帮助，请在[https://github.com/tjanczuk/iisnode/issues/new](https://github.com/tjanczuk/iisnode/issues/new)上打开一个问题。

# c# - 在 WPF 中更改选项卡时如何刷新文本框文本

> ID：13011270
> 
> 赞同：1
> 
> 时间：2012-10-22T12:15:21.983
> 
> 标签：c#, .net, wpf, tabs, textbox

好吧，在我的 WPF 应用程序中，我正在使用具有大约 5 个选项卡的选项卡控件。每个选项卡的视图都是我通过工具箱添加的用户控件。

**主要 Xaml 文件：**

```
<Grid>
    <TabControl Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="tabControl1" VerticalAlignment="Stretch" Width="Auto">
        <TabItem Header="Device Control" Name="Connect">
            <ScrollViewer Height="Auto" Name="scrollViewer1" Width="Auto">
                <my:ConnectView Name="connectView1" />
            </ScrollViewer>
        </TabItem>
        <TabItem Header="I2C">
            <ScrollViewer Height="Auto" Name="scrollViewer2" Width="Auto">
                <my1:I2CControlView Name="i2CControlView1" />
            </ScrollViewer>
        </TabItem>
            <TabItem Header="Voltage">
                <ScrollViewer Height="Auto" Name="scrollViewer3" Width="Auto">
                    <my2:VoltageView Name="voltageView1" />
                </ScrollViewer>
            </TabItem>
    </TabControl>
</Grid> 
```

如果您注意到每个视图 ie.e `Connect`，`I2C`并且`Voltage`是具有视图、视图模型和模型类的用户控件 :)

这些视图中的每一个在其各自的 xaml 文件中都有一组文本框。

**连接.xaml：**

```
<Grid>
    <Textbox Text="{Binding Box}", Name="hello" />
    // Some more textboxes
</Grid> 
```

**I2c.xaml：**

```
<Grid>
    <Textbox Text="{Binding I2CBox}", Name="helI2c" />
    // Some more textboxes
</Grid> 
```

**电压.xaml：**

```
<Grid>
    <Textbox Text="{Binding VoltBox}", Name="heVoltllo" />
    // Some more textboxes
</Grid>** 
```

默认情况下，我已将这些文本框的文本设置为某个值。让我们在我的视图模型类中分别说“12”“13”“14”。我的主要要求是设置每个用户控件中存在的这些文本框的文本，以便在我更改选项卡时刷新。

**描述：**

假设显示连接视图：文本框的值为 12，我对其进行编辑并将其更改为 16。现在我单击 I2C 选项卡，然后返回连接选项卡，我希望文本框值刷新回初始值即12。

准确地说，他们是不是一种称为 visibilitychanged() 的方法，我可以在所有用户控件类中编写它，我可以在标签更改时设置这些 Ui 组件的值？

请帮忙 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:03:12.453

好的，例如。我们有简单的 WPF 应用程序。主窗口：

```
<Window x:Class="tabs.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:my="clr-namespace:tabs" 
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <TabControl SelectionChanged="TabControl_SelectionChanged">
            <TabItem Header="1">
                <my:Tab1/>
            </TabItem>
            <TabItem Header="2">
                <my:Tab2/>
            </TabItem>
        </TabControl>
    </Grid>
</Window> 
```

Tab1 只是 VS 的默认模板，所以这里没有代码。表 2：

```
<UserControl x:Class="tabs.Tab2"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <TextBox Height="23" HorizontalAlignment="Left" Name="textBox1" VerticalAlignment="Top" Width="120" Text="asd" />
    </Grid>
</UserControl> 
```

如您所见，我们有 TabControl_SelectionChanged 事件的事件处理程序。在主窗口后面的代码中，我们有：

```
private void TabControl_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (e.Source is TabControl)
    {
        TabItem tabitem = e.AddedItems[0] as TabItem;
        if (tabitem == null)
            return;

        Tab2 tab2 = tabitem.Content as Tab2;
        if (tab2 == null)
            return;

        tab2.textBox1.Text = "zxczxczxczxc";
    }
} 
```

像这样的东西。您可以调用 Reinit 方法而不是设置文本框的值。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:28:01.167

您可以对 TabControl 的“SelectedTab”或“SelectedIndex”属性进行数据绑定。因此，当用户更改选项卡时，将调用视图模型中的设置器，您可以在那里重置文本框属性绑定..

编辑：

这是一个示例

**XAML：**

```
<TabControl SelectedIndex="{Binding TabIndex}">
            <TabItem Header="Tab 1">
                <TextBox Text="{Binding TextValue1}" Height="20" Width="200"></TextBox>
            </TabItem>
            <TabItem Header="Tab 2">
                <TextBox Text="{Binding TextValue2}" Height="20" Width="200"></TextBox>
            </TabItem>
            <TabItem Header="Tab 3">
                <TextBox Text="{Binding TextValue3}" Height="20" Width="200"></TextBox>
            </TabItem>
        </TabControl> 
```

**ViewModel 中的属性和方法：**

```
private int tabIndex;
        public int TabIndex
        {
            get { return tabIndex; }
            set
            {
                tabIndex = value;
                NotifyPropertyChanged("TabIndex");

                ResetTextBoxes();
            }
        }

        private void ResetTextBoxes()
        {
            TextValue1 = "12";
            TextValue2 = string.Empty;
            TextValue3 = "default";
        }

        private string textValue1;
        public string TextValue1
        {
            get { return textValue1; }
            set
            {
                textValue1 = value;
                NotifyPropertyChanged("TextValue1");
            }
        }

        private string textValue2;
        public string TextValue2
        {
            get { return textValue2; }
            set
            {
                textValue2 = value;
                NotifyPropertyChanged("TextValue2");
            }
        }

        private string textValue3;
        public string TextValue3
        {
            get { return textValue3; }
            set
            {
                textValue3 = value;
                NotifyPropertyChanged("TextValue3");
            }
        } 
```

# android - 如何将 JSONArray 从 Activity 传递到 Html 脚本？

> ID：13011275
> 
> 赞同：4
> 
> 时间：2012-10-22T12:15:43.957
> 
> 标签：android, android-webview, arrays

我想通过`JSONArray`From`Activity`到`HTML Script`我正在尝试以下方式，但我无法获取数据 `HTML`

活动：-

```
public class DayViewJSActivity extends Activity {

    WebView webviewobj;

    String jsurl, eventobj;

    JSONArray jArray = new JSONArray();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        webviewobj = (WebView) findViewById(R.id.webView1);
        webviewobj.getSettings().setJavaScriptEnabled(true);
        webviewobj.addJavascriptInterface(new calendarInterface(),
                "Androidfunction");
        webviewobj.loadUrl("file:///android_asset/caljs.html");

        JSONObject jobject = new JSONObject();

        try {

            jobject.put("id", 1);
            jobject.put("start_date", "2012-10-22 09:00:00");
            jobject.put("end_date", "2012-10-22 10:00:00");
            jobject.put("text", "Demo scheduled");
            jobject.put("details:", "");

        } catch (JSONException e) {

            e.printStackTrace();
        }

        jArray.put(jobject);

        jsurl = "javascript:setData('" + jArray + "')";

        System.out.println("JSURL IS :" + jsurl);
        webviewobj.loadUrl(jsurl);

    }

    final class calendarInterface {

        calendarInterface() {

        }

        public void run() {

            webviewobj.loadUrl("javascript:setData( " + jArray + ")");
        }

    } 
```

HTML:-

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <meta  name = "viewport" content = "initial-scale = 1.0, maximum-scale = 1.0, user-scalable = no">
        <script src="Cjs/dhxscheduler_mobile_rec.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="Cjs/dhxscheduler_mobile_rec.css">

        <title></title>

       <script type="text/javascript">

        var eventData = null;

        function setData(eventobj)
        {

                eventData = eventobj;
        }

        dhx.ready(function(){
                dhx.ui.fullScreen();
                dhx.ui(
                    {
                        view:"scheduler",
                        id:"scheduler"  
                    }
                );

                var data = eventData;

                $$("scheduler").$$("buttons").setValue("day");
                $$("scheduler").parse(data);

            });

        </script>
    </head>
    <body>
    </body>
</html> 
```

我应该如何从中获取`HTML`值`Activity`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:48:56.460

将文件的位置显式写入 HTML 文件中的每个位置

```
file:///android_asset/Cjs/dhxscheduler_mobile_rec.js 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:04:09.793

在这里，只是简单的方法，假设您有以下带有界面的活动代码，请查看以下代码...

```
public class htmldecoder extends Activity implements OnClickListener,TextWatcher
    {
    Button btsubmit; // this button in your xml file
    WebView wvbrowser;
    public void onCreate(Bundle savedInstanceState)
    {
                super.onCreate(savedInstanceState);
                    setContentView(R.layout.htmldecoder);

        btsubmit=(Button)findViewById(R.id.btsubmit);
        btsubmit.setOnClickListener(this);

        wvbrowser=(WebView)findViewById(R.id.wvbrowser);
        wvbrowser.setWebViewClient(new HelloWebViewClient());
        wvbrowser.getSettings().setJavaScriptEnabled(true);
        wvbrowser.getSettings().setPluginsEnabled(true);
        wvbrowser.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
        MyJavaScriptInterface myinterface=new MyJavaScriptInterface();
        wvbrowser.addJavascriptInterface(myinterface,"interface");
        webView.loadUrl("file:///android_asset/simple.html");  //use one html file for //testing put your html file in assets. Make sure that you done JavaScript methods to get //values for html content in html file . 
   }
   public void onClick(View v)
{
    if(btsubmit==v)
    {

        webView.loadUrl("javascript:showalert()");// call javascript method.  
        //wvbr
    }
}

final class MyJavaScriptInterface {

        MyJavaScriptInterface() {

        }

        public void sendValueFromHtml(String value) {
           System.out.println("Here is the value from html::"+value);
        }

    }

} 
```

如果您查看此代码，您会发现，我已将接口（MyJavaScriptInterface）添加到 webview

```
wvbrowser.addJavascriptInterface(myinterface,"interface"); 
```

现在你的javascript需要用html写

```
<script type="text/javascript">
    //<![CDATA[
    var n1;
    function callme(){
    n1=document.getElementById("FacadeAL").value;
    }
    function showalert(){
     window.interface.sendValueFromHtml(n1);// this method calling the method of interface which //you attached to html file in android. // & we called this showalert javasript method on //submmit buttton click of android. 
    }
    //]]>
    </script> 
```

& 确保你在 html 中调用 callme，如下所示

```
<input name="FacadeAL" id="FacadeAL" type="text" size="5" onblur="callme()"/> 
```

希望，你会明白它是如何工作的。可能这将帮助您传递您的 json 数组。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-30T09:34:18.323

```
String htmlResp = httpGet(link);

public static String httpGet(String url) {

        HttpParams httpParameters = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParameters, 0);
        HttpConnectionParams.setSoTimeout(httpParameters, 0);
        DefaultHttpClient httpclient = new DefaultHttpClient(httpParameters);
        try {
            final String USER_AGENT = "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8 (.NET CLR 3.5.30729)";
            // final String ACCEPT_CHARSET = "ISO-8859-1,utf-8;q=0.7,*;q=0.7";
            final String ACCEPT_CHARSET = "utf-8";
            // final String ACCEPT =
            // "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
            final String ACCEPT = "text/html";

            // HttpGet httpget = new HttpGet(url);
            HttpGet httpget = new HttpGet(url);
            // httpget.addHeader("User-Agent", "ie 6");
            httpget.addHeader("User-Agent", USER_AGENT);
            httpget.addHeader("Accept", ACCEPT);
            httpget.addHeader("Accept-Charset", ACCEPT_CHARSET);
            httpget.setParams(httpParameters);
            HttpResponse response = httpclient.execute(httpget);
            HttpEntity entity = response.getEntity();
            return generateString(entity.getContent());
            // return getResponseBody(response);
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }

    }

    private static String generateString(InputStream stream) {
        StringBuilder sb = new StringBuilder();
        InputStreamReader reader = null;
        try {
            reader = new InputStreamReader(stream, "utf-8");
            BufferedReader buffer = new BufferedReader(reader);
            String cur;
            while ((cur = buffer.readLine()) != null) {
                sb.append(cur + "\n");
            }

        } catch (UnsupportedEncodingException e1) {
            e1.printStackTrace();
            return null;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        } finally {
            if (reader != null) {
                try {
                    reader.close();
                    reader = null;
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (stream != null) {
                try {
                    stream.close();
                    stream = null;
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }

        return sb.toString();
    } 
```

请申请此代码

# sql - 如果一个不相关的子查询在查询中的多个位置重复，是否可以将其缓存并重用结果？

> ID：13011280
> 
> 赞同：5
> 
> 时间：2012-10-22T12:16:03.167
> 
> 标签：sql, postgresql, subquery, postgresql-9.1

如果我有类似的查询

```
SELECT date_trunc('day', assigndate)e,
       count(CASE WHEN a.assigneeid = 65548
             AND a.assigneeid IN
               (SELECT userid
                FROM groupmembers
                WHERE groupid = 65553) THEN 1 ELSE NULL END) assigned,
       count(CASE WHEN a.assigneeid = 65548
             AND a.completedtime IS NOT NULL
             AND a.assigneeid IN
               (SELECT userid
                FROM groupmembers
                WHERE groupid = 65553) THEN 1 ELSE NULL END) completed
FROM ASSIGNMENT a
WHERE assigndate > CURRENT_TIMESTAMP - interval '20 days'
GROUP BY date_trunc('day',assigndate); 
```

有问题的子查询是

```
SELECT userid
                FROM groupmembers
                WHERE groupid = 65553 
```

那么由于子查询是`not co-related`针对父查询的，因此它将只执行一次并使用缓存的结果。但是由于子查询存在于查询中的 2 个位置，因此根据`SQL plan`，它被评估**两次**。有没有办法获得`cache`该子查询的结果并在两个位置都使用它？

子查询不能转换为连接，因为没有要连接的单个字段（也不能是无条件连接，因为计数会出错）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T12:46:12.353

您可以使用公用表 express ( [`WITH`](http://www.postgresql.org/docs/8.4/static/queries-with.html))

```
with cte as 
(
     SELECT userid FROM groupmembers WHERE groupid = 65553
)
SELECT 
    date_trunc('day', assigndate)e,  
    count(CASE WHEN a.assigneeid = 65548 AND a.assigneeid IN  
           (SELECT userid from cte) then 1 else null end) assigned,
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:03:14.010

您应该重写查询以消除子查询：

```
SELECT date_trunc('day', assigndate)e,
       sum(CASE WHEN a.assigneeid = 65548 and gm.userid is not null then 1 else 0
           end) as assigned,
       sum(CASE WHEN a.assigneeid = 65548 and a.completedtime IS NOT NULL and gm.userid is not null
                then 1 else 0
           end) as completed
FROM ASSIGNMENT a left outer join
     (select distinct userid
      from groupmembers
      where groupid = 65553
     ) gm
     on a.assigneeid = gm.userid
WHERE assigndate > CURRENT_TIMESTAMP - interval '20 days'
GROUP BY date_trunc('day',assigndate)
order by 1 
```

一般来说，我认为在`FROM`(or `WITH`) 子句中保留表引用是一种很好的做法。很难遵循`SELECT`子句中子查询的逻辑。在这种情况下，子查询是如此相似，以至于它们实际上是在乞求组合成一个语句。

# c++ - 如何在boost asio下将serial_port flow_control设置为非none

> ID：13011282
> 
> 赞同：2
> 
> 时间：2012-10-22T12:16:08.493
> 
> 标签：c++, boost, serial-port, boost-asio, flow-control

我发现了这行代码：

serial_port_base::flow_control FLOW(serial_port_base::flow_control::none);

现在，我需要将 flow_control 设置为硬件流控制 - 我该怎么做？

到目前为止还没有这方面的文档，我已经很伤心了，我不得不使用 Windows 标头来解决我发送中断信号的问题。

请告诉我至少有一种方法可以在不使用 Windows 标头的情况下设置所有串行端口选项。

如果没有 Windows 标头就没有办法，我也会在这里走脏路，所以也请发布脏示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:23:33.157

如果您在 boost 文档中查看[头文件本身](http://www.boost.org/doc/libs/1_51_0/boost/asio/serial_port_base.hpp)，您会发现类`flow_control`：

```
class flow_control
  {
  public:
    enum type { none, software, hardware };
    BOOST_ASIO_DECL explicit flow_control(type t = none);
    type value() const;
    BOOST_ASIO_DECL boost::system::error_code store(
        BOOST_ASIO_OPTION_STORAGE& storage,
        boost::system::error_code& ec) const;
    BOOST_ASIO_DECL boost::system::error_code load(
        const BOOST_ASIO_OPTION_STORAGE& storage,
        boost::system::error_code& ec);
  private:
    type value_;
  }; 
```

您应该能够`serial_port_base::flow_control::hardware`在该函数调用中使用您必须启用硬件流控制。

# c# - 发布应用程序后，图标没有变化

> ID：13011289
> 
> 赞同：1
> 
> 时间：2012-10-22T12:16:30.260
> 
> 标签：c#, icons, taskbar

我正在使用以下命令根据性能更改我的图标。

```
this.Icon = Properties.Resources.high;   
this.Icon = Properties.Resources.low;   
this.Icon = Properties.Resources.normal; 
```

如果我运行程序 exe 文件，它可以工作，但是在我发布应用程序后，将其设置到我的计算机然后运行它，图标始终保持不变。它没有被更新。我该如何解决这个问题？

PS在应用程序运行期间，当我右键单击任务栏图标时，将其从任务栏固定并从任务栏取消固定，应用程序像exe文件一样工作，图标正在改变。但我不能告诉客户每次都做这个过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:08:19.273

这是一个我认为您想要的示例：

```
using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Resources;
    using System.Text;
    using System.Windows.Forms;

    namespace WindowsFormsApplication8
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }

            private void Form1_Load(object sender, EventArgs e)
            {

            }

            private void button1_Click(object sender, EventArgs e)
            {
                this.Icon = Properties.Resources.icon;

            }

            private void button2_Click(object sender, EventArgs e)
            {
                this.Icon = Properties.Resources.image;
            }

            private void button3_Click(object sender, EventArgs e)
            {
                this.Icon = Properties.Resources.ICO_Logo;
            }
        }
    } 
```

# javascript - 找不到模块“咖啡脚本”

> ID：13011290
> 
> 赞同：37
> 
> 时间：2012-10-22T12:16:31.007
> 
> 标签：javascript, node.js, coffeescript, towerjs

尝试使用 TowerJS 设置一个基本站点作为测试，但在运行脚手架生成器时遇到此错误。

```
Macbook:app john$ tower generate scaffold Post title:string body:text belongsTo:user
{ [Error: Cannot find module 'coffee-script'] code: 'MODULE_NOT_FOUND' }

module.js:340
    throw err;
          ^
Error: Cannot find module '/Users/john/Sites/tower/app/app/config/shared/application'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Function.Tower.Application.Application.reopenClass.instance (/usr/local/lib/node_modules/tower/lib/tower-application/server/application.js:42:15)
    at _.extend.namespace (/usr/local/lib/node_modules/tower/lib/tower-support/shared/shared.js:218:30)
    at GeneratorScaffoldGenerator.Tower.GeneratorResources.buildApp (/usr/local/lib/node_modules/tower/lib/tower-generator/server/resources.js:273:66)
    at GeneratorScaffoldGenerator.Generator (/usr/local/lib/node_modules/tower/lib/tower-generator/server/generator.js:57:23)
    at new GeneratorScaffoldGenerator (/usr/local/lib/node_modules/tower/lib/tower-generator/server/generators/tower/scaffold/scaffoldGenerator.js:21:61)
    at Function.run (/usr/local/lib/node_modules/tower/lib/tower-generator/server/generator.js:22:12) 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-09-26T08:32:52.587

使用 grunt 时遇到类似问题，我已删除

```
node_modules 
```

我的根文件夹中的文件夹并运行

```
npm install 
```

这解决了我的问题

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-12-10T03:27:13.380

更新你的 package.json 文件

```
"coffee-script": "~1.6.3" 
```

在“devDependencies”上并再次更新 npm

```
npm update 
```

为我解决了同样的问题

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-04-26T17:34:43.883

您需要对照 . 给出的位置检查 NODE_PATH 变量`npm list -g coffee-script`。
如果为空，`npm install -g coffee-script`.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-11-13T22:15:37.900

这对我有用

```
npm install --save-dev coffee-script 
```

使用节点 v0.10.31

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-02T07:23:20.863

您需要检查 NODE_PATH 变量，如果它为空，则使用此处给出的说明进行设置 [http://www.davidarno.org/2012/02/09/writing-a-node.js-module-in-coffeescript/](http://www.davidarno.org/2012/02/09/writing-a-node.js-module-in-coffeescript/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-12-21T10:48:11.983

这是 2012 年的一个问题。现在已经快 2015 年了，与此同时，现在有另一种新的方法来解决由引入到 node 和 coffeescript 的破坏性更改引起的问题的不同变化。

对于 coffeescript > v1.7，您现在必须调用

```
var coffee = require('coffee-script').register(); 
```

代替

```
var coffee = require('coffee-script'); 
```

请参阅此问题的答案 [https://stackoverflow.com/a/21585379](https://stackoverflow.com/a/21585379) ： [如何使用 Node.js 正确设置 Coffeescript](https://stackoverflow.com/questions/21583899/how-to-properly-set-up-coffeescript-with-node-js)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-24T07:55:05.827

[https://github.com/fgnass/node-dev#settings](https://github.com/fgnass/node-dev#settings) 注意：如果你想使用coffee-script < 1.7，你必须将设置更改为{“coffee”：“coffee-script”}。

所以更新你的咖啡脚本或配置你的设置

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-09T13:11:28.770

尝试单独安装所需的软件包，例如：

```
npm install coffee-script 
```

之后它需要一个额外的包，希望它是最后一个：D

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-12T07:43:35.343

通过 2 个简单的步骤，我能够解决此问题

1.  `npm cache clean`
2.  `npm install`

希望这可以帮助！

# asp.net - IIS8 Express 上的 SqlRoleProvider

> ID：13011291
> 
> 赞同：3
> 
> 时间：2012-10-22T12:16:34.460
> 
> 标签：asp.net, iis-express, iis-8, sqlroleprovider

我的 Web 应用程序（一个 WCF 服务）使用`SqlRoleProvider`，它在**Visual Studio Development Server**上运行良好。将其切换到**IIS8 Express**会导致它抛出一个错误`NullReferenceException`：

```
Roles.IsUserInRole(username, role) // neither of them actually null 
```

[我在`IsUserInRole`方法文档](http://msdn.microsoft.com/en-us/library/system.web.security.sqlroleprovider.isuserinrole.aspx)中找不到此异常的提示。切换回 Visual Studio 开发服务器使其工作。此异常的原因是什么，我该如何正确修复它？该项目的*目标框架*是*.NET Framework 4*。

这是配置的连接字符串：

```
<add name="ConnectionString"
      connectionString="Data Source=.\sqlexpress;Initial Catalog=DevWeb;Integrated Security=True"
      providerName="System.Data.SqlClient" /> 
```

这是`roleManager/providers`节点：

```
<clear />
<add connectionStringName="ConnectionString" applicationName="MyApp" name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-27T23:23:56.090

弗拉基米尔说的是真的，但实际上并没有解释发生了什么。引发 NullReferenceException 的是 IsUserInRole 和 GetRolesForUser 中的 EtwTrace 代码。Roles 类中的所有其他内容都说明了 HttpContext.Current 可以为 null 的事实。[我通过在http://referencesource.microsoft.com/netframework.aspx](http://referencesource.microsoft.com/netframework.aspx)中查看“NET，版本 4.5”的 Microsoft 参考源发现了这一点

在我尝试过的所有其他测试环境中，跟踪级别都不足以触发 NullReferenceException。只有在安装 Visual Studio 2013 后使用 IIS Express 8 时，我才看到问题，并且仅在 IIS Express 中。

你能为这个做什么？

一种选择是为 WCF 启用“ASP.Net 兼容模式”。首先，在 web.config 中，将属性 aspNetCompatibilityEnabled="true" 添加到节点 <configuration><system.serviceModel><serviceHostingEnvironment>。然后通过将属性 [System.ServiceModel.Activation.AspNetCompatibilityRequirements(RequirementsMode = System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed)] 添加到类定义中来选择您的服务类。启用此功能后，将填充 HttpContext.Current当您从 Roles 类请求角色时，假设您没有在 Vladimir 提到的后台线程上工作（在这种情况下，您需要先修补 HttpContext.Current）。您可以在以下位置阅读有关 WCF 的 ASP.NET 兼容模式的更多信息[http://blogs.msdn.com/b/wenlong/archive/2006/01/23/516041.aspx](http://blogs.msdn.com/b/wenlong/archive/2006/01/23/516041.aspx)。

另一种选择是为这两种方法绕过 Roles 类。不要调用 Roles.IsUserInRole，而是调用 Roles.Provider.IsUserInRole。不要调用 Roles.GetRolesForUser，而是调用 Roles.Provider.GetRolesForUser。每个方法都有相同的重载可用。您丢失了跟踪停止和本地角色缓存，但您绕过了空引用异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T13:47:31.720

如果您在不同的线程中调用 Roles.IsUserInRole，那么您应该检查 HttpContext。在这种情况下将为空。因此，为了修复，您应该将 HttpContext 从主线程复制到子线程。

```
 var context = HttpContext.Current;
        Thread thread = new Thread(delegate() {
            if (HttpContext.Current == null)
                HttpContext.Current = context;
        });

        thread.Start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:24:25.723

相当确定您的问题将与数据库和访问它的帐户的权限有关。尝试将您的 IIS 帐户添加到 sa priv 并查看问题是否解决。如果是这样，那么您缺少权限。

# android - ListView 上的延迟加载图像未刷新

> ID：13011302
> 
> 赞同：1
> 
> 时间：2012-10-22T12:17:09.343
> 
> 标签：android

我只是将这段代码从 Stack Overflow 问题 How do I do a lazy load of images in ListView 的答案中包含到我[的](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)[*项目*](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)[中](https://github.com/thest1/LazyList)。[](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)

 *我在*[如何在 ListView 中延迟加载图像中](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)*阅读了所有相关信息。

我成功添加到我的项目中，图像看起来不错，但它们仅在我向上/向下滚动时才会显示，我的意思是，当列表自行刷新时。所以，如果我什么都不做（滚动），我会一直看到我的默认图像，而没有已经下载的图像。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:14:25.823

使用 imageLoader 设置图像时添加此行：

```
imageView.setTag(imgURL); \\Add this line
imageLoader.DisplayImage(imgURL,this,imageView); 
```*

# python - 如何创建用于识别 CR 的层规则？

> ID：13011303
> 
> 赞同：3
> 
> 时间：2012-10-22T12:17:13.860
> 
> 标签：python, lexer, ply

我在 PLY 词法分析器中无法区分 \r (0x0d) 和 \n (0x0a)。

一个最小的例子是以下程序

```
import ply.lex as lex

# token names
tokens = ('CR', 'LF')

# token regexes
t_CR = r'\r'
t_LF = r'\n'

# chars to ignore
t_ignore  = 'abc \t'

# Build the lexer
lexer = lex.lex()

# lex
f = open('foo', 'r')
lexer.input(f.read())
while True:
    tok = lexer.token()
    if not tok: break
    print(tok) 
```

现在创建一个文件 foo 如下：

```
printf "a\r\n\r\rbc\r\n\n\r" > foo 
```

验证它看起来没问题：

```
hd foo
00000000  61 0d 0a 0d 0d 62 63 0d  0a 0a 0d                 |a....bc....|
0000000b 
```

现在我假设我会得到一些 CR 和一些 LF 令牌，但是：

```
python3 crlf.py 
WARNING: No t_error rule is defined
LexToken(LF,'\n',1,1)
LexToken(LF,'\n',1,2)
LexToken(LF,'\n',1,3)
LexToken(LF,'\n',1,6)
LexToken(LF,'\n',1,7)
LexToken(LF,'\n',1,8) 
```

原来我只得到 LF 代币。我想知道为什么会发生这种情况，以及我应该怎么做。

这是 Ubuntu 12.04 上的 Python 3.2.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:54:35.900

您以默认模式打开文件。在该模式下，`newline=None`, 意味着（除其他外）*任何* `\r`,`\n`和`\r\n`被视为行尾并转换为单个`\n`字符。有关详细信息，请参阅[打开的文档](http://docs.python.org/3/library/functions.html#open)。

You can disable this behavior by passing `newline=''` to `open`, which means it'll accept any kind of newline but not normalize them to `\n`.

# c++ - 如何确定是否在 openMP 并行区域内？

> ID：13011306
> 
> 赞同：5
> 
> 时间：2012-10-22T12:17:26.410
> 
> 标签：c++, c, openmp

在我的代码中，我想避免从任何 openMP 并行区域内抛出异常（因为如果未在同一区域内捕获，这会导致未处理的异常）。为此，我尝试使用openmp运行时库函数

```
omp_in_parallel(); 
```

决定是抛出异常还是写出错误消息并终止。但是，在 gcc 4.7.0 下，如果并行区域只有一个线程，这将不起作用：

```
#include <iostream>
#include <omp.h>

void do_something()
{
  if(!omp_in_parallel())           // omp_in_parallel() returns false!
    throw 3;                       // so should be able to safely throw
}

int main()
{
  omp_set_num_threads(1);
  try {
#   pragma omp parallel
    do_something();
  } catch(int e) {
    std::cerr<<"error: '"<<e<<"'\n";  // never gets here
  }
} 
```

不会导致*错误：'3'*，但在*抛出 'int' Abort 的实例后调用终止*。

这是（的`omp_in_parallel()`）正确的行为吗？（openMP 标准看起来很模糊）还是 gcc 中的错误？如何修复上述代码`do_something()`，使其仅在不在并行区域时抛出？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T13:57:32.877

OpenMP 标准规定当且仅当封闭区域处于活动状态时才`omp_in_parallel()`返回*true 。*`parallel`活动`parallel`区域被定义为由*多个线程*组成的团队执行的区域。在您的情况下，您有一个非活动的并行区域，因为只有一个线程。因此`omp_in_parallel()`返回`false`并`throw`执行。之所以出错，是因为 OpenMP 标准将异常限制在同一并行区域和线程：

> `throw`在一个区域内执行`parallel`必须导致在同一`parallel`区域内恢复执行，并且抛出异常的同一个线程必须捕获它。

这会使您的代码不一致，因为您让异常未经处理地通过并行区域。英特尔 OpenMP 运行时发出相同的错误，因此它不是特定于 GCC 的行为。

实际发生的情况是 GCC 通过将您的代码包装在一个`try/catch`带有包罗万象的异常过滤器的块中来转换 OpenMP 区域：

```
#pragma omp parallel [child fn: main.omp_fn.0 (???)]
  {
    try
      {
        do_something ();
      }
    catch
      {
        <<<eh_filter (NULL)>>>
          {
            terminate ();
          }
      }
    #pragma omp return
  } 
```

正是这个包罗万象的异常过滤器负责终止消息。

为了解决这个问题，整个`try/catch`块应该*在*并行区域内，反之亦然：

```
# pragma omp parallel
{
   try {
      do_something();
   } catch(int e) {
      std::cerr<<"error: '"<<e<<"'\n";  // never gets here
   }
} 
```

（添加的附加块是为了让英特尔 C++ 编译器满意；对于 GCC 不是绝对必要的）

这`error: '3'`按预期输出。

编辑：有趣的是你的异常处理程序甚至没有进入最终的二进制文件。即使给定 GCC 的默认优化级别（即使用 编译`g++ -fopenmp -o prog prog.cc`），冗余消除器也能够检测到由于隐式内部异常处理程序将永远无法到达您的异常处理程序，因此您的处理程序被删除。然后编译器发现隐式终止处理程序也是多余的，因为整个进程已经有一个顶级异常处理程序执行相同的操作（调用`terminate()`），因此甚至删除了隐式处理程序。最终的代码是如此精简和卑鄙 - 根本没有异常处理程序：

```
;; Function int main() (main, funcdef_no=970, decl_uid=20816, cgraph_uid=212)

int main() ()
{
  int e;
  int D.20855;
  struct basic_ostream & D.20854;
  struct basic_ostream & D.20853;
  void * D.20852;
  register int * D.20819;

<bb 2>:
  omp_set_num_threads (1);
  __builtin_GOMP_parallel_start (main._omp_fn.0, 0B, 0);
  main._omp_fn.0 (0B);
  __builtin_GOMP_parallel_end ();
  D.20855_1 = 0;
  // <------ See, ma', no exception handling at all :)

<L0>:
  return D.20855_1;

}

;; Function <built-in> (main._omp_fn.0, funcdef_no=976, decl_uid=20857, cgraph_uid=222)

<built-in> (void * .omp_data_i)
{
<bb 2>:
  do_something ();
  return;
  // <------ See, ma', they've nuked the implicit termination handler

} 
```

人们会爱上`-fdump-tree-all`GCC 选项。

编辑：关于如何修复的问题`do_something()`- 使用`omp_get_level()`而不是`omp_in_parallel()`：

```
void do_something()
{
   if(omp_get_level() == 0)
     throw 3;
} 
```

`omp_get_level()`返回包含调用的区域的嵌套级别`parallel`，无论它们是否处于活动状态。

# objective-c - 使用核心数据和 Web 服务的最佳方式

> ID：13011310
> 
> 赞同：2
> 
> 时间：2012-10-22T12:17:32.057
> 
> 标签：objective-c, web-services, core-data

我对IOS开发很陌生。现在，对于我的第一个项目，我需要构建一个从 webService 检索数据的应用程序。

现在我也想使用核心数据。你们知道这样做的最佳实践方式吗？有什么好的教程吗？

亲切的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:41:15.120

你可以试试**[RestKit](http://restkit.org/)**

> RestKit 是一个用于 iOS 的 Objective-C 框架，旨在使与 RESTful Web 服务的交互变得简单、快速和有趣。它将干净、简单的 HTTP 请求/响应 API 与强大的对象映射系统相结合，减少了完成工作所需编写的代码量。
> 
> RestKit 建立在对象映射层之上，提供与 Apple 的 Core Data 框架的集成。这种支持允许 RestKit 将远程加载的对象直接保存回本地存储，作为快速本地缓存或定期与云同步的主数据存储。RestKit 可以为您填充核心数据关联，允许基于自然属性遍历您的数据模型。它还在 Core Data 原语之上提供了一个很好的 API，可以简化配置和查询用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:39:04.603

AFNetworking 是使用 Web 服务的好方法。我写了一个 [semi] 完整的类，它使得调用基于 POST 的 web 服务变得相当容易。有关更多详细信息和课程本身，请参阅[此 SO 帖子](https://stackoverflow.com/questions/10618056/how-to-post-more-parameters-with-image-upload-code-in-ios/10618557#10618557)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:10:34.737

试试这个来自 ray 的 tut。它有两个部分。它应该让您很好地理解如何使用核心数据解析来自 Web 的数据。希望能帮助到你。阿德里安。这是链接：[http ://www.raywenderlich.com/17927/how-to-synchronize-core-data-with-a-web-service-part-2](http://www.raywenderlich.com/17927/how-to-synchronize-core-data-with-a-web-service-part-2)

# jquery - 将 ajax 响应数组存储到变量中以供以后使用

> ID：13011313
> 
> 赞同：9
> 
> 时间：2012-10-22T12:17:38.570
> 
> 标签：jquery, ajax, arrays

您好我需要将 AJAX 响应存储到两个变量 x 和 y 或数组中。我的 AJAX 响应是一个数组。我能够看到数据，但只有在 che call 时才会发出警报。我需要 ajax 调用之外的数据

```
var x;
var y;

$.ajax({
    url: 'ajaxload.php',
    dataType: "json",
    success: function (data) {
        x = data.posX;
        y = data.posX;
        alert(x + " " + y);  // I can se data but I need outside ajax call
    }
}); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-22T12:41:53.527

如果我理解正确，您希望稍后在代码中重用 ajax 响应。如果是这种情况，您当前的代码将无法工作，因为默认情况下，javascript 引擎不会等待 ajax 请求的响应。换句话说，下面的代码将不起作用：

```
<script type="text/javascript">
$(document).ready(function(){
    var x; 
    var y;
    $.ajax({
        url: 'ajaxload.php',
        dataType: "json", 
        success: function(data) { 
            x= data.posX;
            y= data.posX;
            alert (x+" "+y);  // I can se data but I need outside ajax call
        }
    });
    alert(x+" "+y); // You won't see anything, because this data isn't yet populated. The reason for this is, the "success" function is called when the ajax request has finished (it has received a response).
})
</script> 
```

您需要等待 ajax 响应。要使用 jQuery 做到这一点，您需要稍微修改您的代码：

```
<script type="text/javascript">
$(document).ready(function(){
    var data = $.parseJSON($.ajax({
        url:  'ajaxload.php',
        dataType: "json", 
        async: false
    }).responseText); // This will wait until you get a response from the ajax request.

    // Now you can use data.posX, data.posY later in your code and it will work.
    var x = data.posX;
    var y = data.posY;
    alert(x+" "+y);
    alert(data.posX+" "+data.posY);
});
</script> 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-05-24T06:58:20.140

您可以将 ajax 响应存储在全局数组中，以便在其他 javascript 函数中进一步使用

```
var ajaxResult=[];

$(document).ready(function(){

  $.ajax({
    url: 'ajaxload.php',
    async:true,
    dataType: "json", 
    success: function(data)
     { 
        ajaxResult.push(data);
     }
  });
}); 
```

```
otherJsfunc()
 {
  console.log(ajaxResult); 
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:25:49.940

如果你 decalre 变量，你可以访问 ajax 之外的值。

例如：

```
<script type="text/javascript">
   var x = '';
   var y = '';

   function sendAjax()
   {
        // your ajax call
        x= data.posX;
        y= data.posX;  
   } 
   sendAjax();
</script> 
```

如果 ajax 运行良好，您可以全局访问变量**x**和**y**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T12:27:32.583

如果您在文档就绪处理程序中运行此代码，则您的 x 和 y 变量并不是真正的全局变量。尝试`window.x=''; window.y='';`

# java - 从 Java 方法返回 Google 用户登录成功

> ID：13011314
> 
> 赞同：1
> 
> 时间：2012-10-22T12:17:39.827
> 
> 标签：java, oauth

我们需要在 Java 程序中检查 google 用户的凭据是否正确。Java程序会得到google的用户名和密码，应该检查用户名和密码是否匹配。我怎样才能做到这一点？

# jquery - 嵌套异步函数

> ID：13011315
> 
> 赞同：2
> 
> 时间：2012-10-22T12:17:45.530
> 
> 标签：jquery, asynchronous, nested

我想从客户端获取地理位置，然后按 Ajax 加载位置，然后将它们显示到列表中。

我有Functions`getGeolocation`和.`loadLocation``createList`

`getGeolocation`并且`loadLocation`是异步函数，所以我需要回调或使用延迟对象。我在互联网上搜索了几个小时，但我仍然不明白如何处理这个问题的语法。

我知道可以`loadLocations`在`success`函数和函数`createList`中调用，`afterResponse`但我想在几个地方调用这个函数，所以它不是我的选择。

```
var lat = 0;
var long = 0;
var locations;

getGeolocation();
loadLocations();
createList();

    $('#map').live("pageshow", function() {    
        google.maps.event.trigger(map, 'resize');
    });

function getGeolocation(){    
    console.log("getGeolocation");
    if (navigator.geolocation) {

             // getCurrentPosition ruft die Funktion success auf und übermittelt die Position Werte
             // error wird ausgeführt wenn es einen Fehler beim ermitteln der Position gibt
        navigator.geolocation.getCurrentPosition(success, error);
    } else {
        alert("GeoLocation API ist NICHT verfügbar!");
    }

}

function success(position) {    
    console.log("success");
    lat = position.coords.latitude;
    long = position.coords.longitude;
}

function error(msg) {    
    console.log(typeof msg == 'string' ? msg : "error");
}

function loadLocations(){    
    console.log("loadLocations");
    return $.ajax({
        type: "GET",
        url: "http://www.example.at/api/getLocationsByGeodata_JSON",
        success: afterResponse,
        /*beforeSend: showPreloader,*/
        data: {lat : lat, long: long},
        dataType: 'json'
    });
}

function afterResponse(response_objekt) {    
    console.log("afterResponse");
    console.log(response_objekt['results']);
    locations = response_objekt['results'];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:43:23.967

我认为您可以使用回调函数来实现这一点

前任：

```
var lat = 0;
var long = 0;
var locations;

getGeolocation(function(){
    loadLocations().done(function(){
        createList();
    });
});

    $('#map').live("pageshow", function() {    
        google.maps.event.trigger(map, 'resize');
    });

function getGeolocation(successCallback){    
    console.log("getGeolocation");
    if (navigator.geolocation) {

             // getCurrentPosition ruft die Funktion success auf und übermittelt die Position Werte
             // error wird ausgeführt wenn es einen Fehler beim ermitteln der Position gibt
        navigator.geolocation.getCurrentPosition(getCurrentPositionCallback(successCallback), error);
    } else {
        alert("GeoLocation API ist NICHT verfügbar!");
    }

}

function getCurrentPositionCallback(callback){
    return function (position) {    
        console.log("success");

        if(typeof callback == 'function'){
            callback(position);
        }

        lat = position.coords.latitude;
        long = position.coords.longitude;
    };
}

function error(msg) {    
    console.log(typeof msg == 'string' ? msg : "error");
}

function loadLocations(){    
    console.log("loadLocations");
    return $.ajax({
        type: "GET",
        url: "http://www.example.at/api/getLocationsByGeodata_JSON",
        success: afterResponse,
        /*beforeSend: showPreloader,*/
        data: {lat : lat, long: long},
        dataType: 'json'
    });
}

function afterResponse(response_objekt) {    
    console.log("afterResponse");
    console.log(response_objekt['results']);
    locations = response_objekt['results'];
} 
```

# c - 在线程安全和可重入代码中使用 utf8proc

> ID：13011319
> 
> 赞同：2
> 
> 时间：2012-10-22T12:17:57.263
> 
> 标签：c, unicode, thread-safety, posix, reentrancy

我正在重构一个遗留的 C 应用程序以使其能够识别 Unicode。它目前`char*`用于字符串。我遇到过[utf8 library](http://www.flexiguided.de/publications.utf8proc.en.html)，但文档很少，我无法确定它是否适合用于预期是线程安全和可重入的代码中。

有谁知道 utf8proc 是否可以在线程安全（POSIX）、可重入代码环境中使用的明确答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-27T02:24:01.840

查看源代码，很明显 utf8proc 库是可重入和线程安全的（假设您有线程安全的 malloc/realloc/free）。它不使用任何非常量全局变量，没有静态局部变量，调用除了内存分配之外的少数标准库函数，并且通常只是对堆分配的缓冲区进行简单的迭代。

# c# - c#中的递归代码错误？

> ID：13011324
> 
> 赞同：-9
> 
> 时间：2012-10-22T12:18:07.730
> 
> 标签：c#, recursion

我是 c# 的新手，所以请忽略我的询问方式，我很困惑我的递归函数是正确的，但代码显示错误。请帮忙

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication3
{
    class Program
    {
        static void Main(string[] args)
        {
      void Print100(int n)
        {
            if (n >= 100)
            {
                Console.WriteLine();  
                return;               
            }

            Console.WriteLine(n);   
            Print100(n + 1);
            Console.WriteLine(n);  

}

        }
    }
} 
```

我创建了一个函数来使用递归显示 1-100 和 100-1 整数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T12:19:04.967

您正在尝试在另一种方法中声明一种方法。这在 C# 中无效。您*可以*使用匿名函数，但它会比较痛苦。只需将`Print100`方法（最好同时重命名）移到外部*，*`Main`然后从.*`Main`*

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T12:19:26.077

您在方法中有方法。`Print100`在 Main 方法之外提取方法。`Print100`然后从您的`Main`函数调用方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T12:21:05.927

将您的代码写`Print100`在 void main 块之外，并从 Void Main 块中调用它。您错误地放置了代码部分。*

# c# - 如果标签的文本宽度大于其容器的总宽度，则使用像素智能显示子字符串

> ID：13011334
> 
> 赞同：2
> 
> 时间：2012-10-22T12:18:48.133
> 
> 标签：c#, html, css

我想这样做：如果标签的文本宽度大于其容器的总宽度，则显示标签的子字符串，而不是显示完整标签的文本。在 c# 中：目前正在使用以下代码

```
 if (SensorType.Text.Length >= 25) {
    SensorType.Text = SensorType.Text.Substring(0, 20) + "...";
} 
```

它的工作，但它忽略像素或特定 .div 的区域是否有任何东西可以感知 div 像素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:21:35.217

您可以使用 PURE CSS 来实现这一点...

刚刚设置

```
overflow:hidden;
text-overflow: ellipsis; 
```

请享用

# smarty - 使用默认修饰符

> ID：13011344
> 
> 赞同：0
> 
> 时间：2012-10-22T12:19:32.423
> 
> 标签：smarty, smarty3

我试图超越 Smarty 的基本用法，并在使用默认的“capitalize”修饰符时遇到了一个小问题。我的操作假设不需要进行显式调用来使用此运算符，因此在我的模板中我有以下内容：

```
{* Smarty Part: Add-ins *}

<div class="control-group form-inline">
<label class="control-label">Add-ins:</label>
  <div class="controls ">
    {foreach $add_ins as $add_in}
    <label class="checkbox inline"><input type="checkbox" cf-change="toggle-field::#{$add_in}-add-in"> {$add_in|capitalize}</label>
    {/foreach}
  </div>
</div> 
```

如果我要更换：

```
{$add_in|capitalize} 
```

和

```
{$add_in} 
```

它可以正常工作，但添加修饰符会给我以下错误：

> PHP 致命错误：未捕获异常 'SmartyCompilerException'，第 7 行“模板 [FILE_PATH] 中的消息“语法错误”“<label class=”checkbox inline”><input type=”checkbox”cf-change=” toggle-field::#{$add_in}-add-in"> {$add_in|capitalize}</label>" 未知修饰符“大写”'

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:02:07.543

在您的 Smarty 目录中应该有一个 plugins 目录，其中包含所有默认插件，包括常用的修饰符。

如果您无法解决该问题，请记住您可以使用任何 PHP 函数作为修饰符。所以在这种情况下，您可以使用`ucfirst()`：

```
{$add_in|ucfirst} 
```

然而，这受制于 的状态`$security`。有关详细信息，请参阅[文档](http://www.smarty.net/docsv2/en/language.modifiers.tpl)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:28:45.093

问题来自为您自己的插件注册一个目录，而不是保留对默认目录的引用。因此，例如，我使用了如下所示的初始化 smarty：

```
 public static function init () {
    $object = new Smarty();
    $object->setTemplateDir ( LG_FE_DIR . '/templates/uncompiled' );
    $object->setCompileDir ( LG_FE_DIR . '/templates/compiled'  );
    $object->setCacheDir ( LG_FE_DIR . '/templates/cache' );
    $object->setConfigDir ( LG_FE_DIR . '/templates/configs' );

    return $object;
} 
```

在这一点上，我可以毫无问题地使用 Smarty 的默认修饰符。然后我决定我想要我自己的插件目录并将以下行添加到我的 init() 方法中：

```
$object->setPluginsDir ( LG_FE_DIR . '/templates/plugins_dir'); 
```

在我现在可以调用自己的插件的意义上工作得很好，但它也破坏了默认插件（和修饰符）。为什么？我想一旦您明确了插件目录，默认目录就会超出范围，因此您需要同时指定两者。幸运的是，这很容易……您只需将要包含的不同目录粘贴到数组中即可。对我来说，它看起来像这样：

```
$object->setPluginsDir ( array(LG_FE_DIR . '/templates/plugins_dir', LG_FE_DIR . '/externals/Smarty/libs/plugins') ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T10:38:25.210

当使用来自 ken 的上述代码时，您还可以/更好地使用

```
$object->addPluginsDir(LG_FE_DIR . '/templates/plugins_dir'); 
```

然后你不必关心默认的东西。

# iphone - 笔记应用程序中的笔记列表

> ID：13011345
> 
> 赞同：-3
> 
> 时间：2012-10-22T12:19:35.100
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [我的应用程序可以访问 iOS 中的 Notes（Apple 应用程序）文件夹吗？](https://stackoverflow.com/questions/7428458/can-my-app-access-the-notes-apple-app-folder-in-ios)

我们可以从 iOS 笔记应用程序中获取笔记列表吗？我想获取用户在 iphone Notes 应用程序中添加的笔记列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:22:49.647

这个答案：[https ://stackoverflow.com/a/7428483/1648976](https://stackoverflow.com/a/7428483/1648976)

告诉：

所有应用程序都经过沙盒处理，因此您无法访问他们在 Notes 应用程序中创建的用户注释。Apple 不提供无需越狱和私有方法即可使用的 SDK 方法。

一个潜在的（但繁琐的）解决方案可能是将 Notes 同步到用户 IMAP 帐户。您可以通过询问登录凭据然后获取 Notes 来查看是否可以与 IMAP 服务器通信。

# sql - 在 SQL Server 2008 R2 中使用 PIVOT 表

> ID：13011350
> 
> 赞同：5
> 
> 时间：2012-10-22T12:19:49.770
> 
> 标签：sql, sql-server-2008-r2, pivot

我遇到了一个我无法解决的问题，并且已经尝试了所有方法。希望我能在这里得到答案。

我表中的数据如下

```
Id Month Val1 Val2 Val3
1  Jan   70   80   90
2  Jan   12   13   15
3  Feb   12   67   99
4  March 14   15   17.1 
```

从以下结构中，我想基于列旋转数据，`val1`因此我的输出将如下所示：

```
Jan Jan Feb March
70  12  12  14 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:43:47.807

您将需要使用我认为的动态 SQL（除非您的列将保持静态）

需要执行的查询是：

```
SELECT  [Jan] = [Jan1], 
        [Jan] = [Jan2], 
        [Feb] = [Feb1], 
        [March] = [March1]
FROM    (   SELECT  [PivotColumn] = [Month] + CONVERT(VARCHAR(10), ROW_NUMBER() OVER(PARTITION BY [Month] ORDER BY ID)), 
                    Val1
            FROM    T
        ) t
        PIVOT
        (   MAX(Val1)
            FOR [PivotColumn] IN ([Jan1], [Jan2], [Feb1], [March1])
        ) pvt 
```

虽然我不确定为什么会这样

```
Jan Jan Feb March
70  12  12  14 
```

并不是

```
Jan Jan Feb March
12  70  12  14 
```

所以你可能需要修改函数`ORDER BY`中的`ROW_NUMBER`。

要动态构建它，您可以使用：

```
-- CREATE SAMPLE TABLE AND INSERT DATA
CREATE TABLE #T (ID INT, Month VARCHAR(10), Val1 INT, Val2 INT, Val3 DECIMAL(5, 1));
INSERT #T VALUES (1, 'Jan', 70, 80, 90), (2, 'Jan', 12, 13, 15), (3, 'Feb', 12, 67, 99), (4, 'March', 14, 15, 17.1);

-- DECLARE VARIABLES TO STORE THE COLUMN NAMES
DECLARE @PivotList NVARCHAR(MAX) = '',
        @ColumnList NVARCHAR(MAX) = '';

-- HERE USE ROW_NUMBER() TO UNIQUELY IDENTIFY VALUES FOR MONTHS 
-- THIS MEANS JAN: 70 AND JAN: 12 CAN BE IDENTIFIED SEPARATELY LATER, BUT RETAIN THE DUPLICATE COLUMN NAME [Jan]
SELECT  @ColumnList = @ColumnList + ', ' + QUOTENAME([Month]) + ' = ' + QUOTENAME([Month] + CONVERT(VARCHAR(10), ROW_NUMBER() OVER(PARTITION BY [Month] ORDER BY ID))),
        @PivotList = @PivotList + ', ' + QUOTENAME([Month] + CONVERT(VARCHAR(10), ROW_NUMBER() OVER(PARTITION BY [Month] ORDER BY ID)))
FROM    #T
ORDER BY ID;

DECLARE @SQL NVARCHAR(MAX) = 'SELECT ' + STUFF(@ColumnList, 1, 2, '') + '
                            FROM    (   SELECT  [PivotColumn] = [Month] + CONVERT(VARCHAR(10), ROW_NUMBER() OVER(PARTITION BY [Month] ORDER BY ID)), 
                                                Val1
                                        FROM    #T
                                    ) t
                                    PIVOT
                                    (   MAX(Val1)
                                        FOR [PivotColumn] IN (' + STUFF(@PivotList, 1, 2, '') + ')
                                    ) pvt';

EXECUTE SP_EXECUTESQL @SQL;

DROP TABLE #T; 
```

同样，will 中的任何更改`ROW_NUMBER`也需要反映在`ORDER BY`生成列名称和数据透视表的查询中的子句中：

```
SELECT  @ColumnList = @ColumnList + ', ' + QUOTENAME([Month]) + ' = ' + QUOTENAME([Month] + CONVERT(VARCHAR(10), ROW_NUMBER() OVER(PARTITION BY [Month] ORDER BY ID))),
        @PivotList = @PivotList + ', ' + QUOTENAME([Month] + CONVERT(VARCHAR(10), ROW_NUMBER() OVER(PARTITION BY [Month] ORDER BY ID)))
FROM    #T
ORDER BY ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:09:05.227

这对我有用：

```
SELECT * FROM
(select COUNT(isnull(intFileStatus,0)) as FileCount , case cast(intfilestatus as nvarchar(25)) when '0' then 'Not Allocated'  when '1' then 'Assigned' when '2' then 'Pending' when '3'  then 'Send For Qc'  when '4' then 'Allocated To Qc' when '5' then 'Finish Qc'  when '7' then 'Delivered'  else cast(isnull(intFileStatus,0) as nvarchar (25)) end FileStatusfrom dbo.tblLPO_FileDetails   group by intFileStatus ) AS original
PIVOT 
(
    MIN(FileCount) FOR [FileStatus] IN ([Not Allocated], [Assigned], [Pending],[Send For Qc],[Allocated To Qc],[Finish Qc],[Delivered])
) AS PivotTable 
```

试一试..

# android - android listview 适配器没有显示正确的数据

> ID：13011356
> 
> 赞同：0
> 
> 时间：2012-10-22T12:20:09.823
> 
> 标签：android, listview

我有一个用于为照顾者获取轮班表的应用程序。护理人员登录后，他/她可以单击名为 getRota 的按钮。此按钮调用 Web 服务并获取当天的轮播表，因为日期也传递给此方法。一旦在列表视图中显示列表的列表页面上，我已经用 3 个按钮覆盖了该活动的选项菜单，下一个，上一个和选择一天。第一个 2 按钮从 dateTime 中添加一天或删除一天，然后将其传递回调用类以使用新的 datetime 再次调用 web 服务。

所有这些都可以正常工作，直到您在查看列表时按返回键。当按下返回键时，它会返回调用活动，您可以在其中单击 getRota，在此方法中，我总是将 dateTime 设置为今天。问题是，当用户点击 get rota，然后点击 next，然后返回键然后 getrota，今天的日期应该显示在列表视图中，但显示第二天的 rota。就像列表视图没有使用当前日期更新。

这是一些代码，如果需要，我可以提供更多。

```
public class GetRota extends NfcBaseActivity implements OnItemClickListener {

    private static final String TAG = GetRota.class.getSimpleName();
    ListView listView;
    Intent intent;
    String callID;

    NfcScannerApplication nfcscannerapplication;
    ArrayList<?> array;
    String needName = "";
    MySimpleArrayAdapter arrayAdapter;
    private DatePicker dpResult;
    private int year;
    private int month;
    private int day;
    String statusField;
    static final int DATE_DIALOG_ID = 999;  
    TextView textViewDate; 

    @Override
    protected void onNewIntent(Intent intent) {
        setIntent(intent);
        super.onNewIntent(intent);
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.getrotalayout);
        setCurrentDateOnView();

        nfcscannerapplication = (NfcScannerApplication) getApplication();
        //set titlebar to carer's name
        Cursor cursorCarerName = nfcscannerapplication.loginValidate.queryAllFromCarer();
        cursorCarerName.moveToLast();
        String carerTitleName = cursorCarerName.getString(cursorCarerName.getColumnIndex(LoginValidate.C_CARER_FIRSTNAME)) + " " + cursorCarerName.getString(cursorCarerName.getColumnIndex(LoginValidate.C_CARER_LASTNAME)) ;
        setTitle(carerTitleName + " is currently logged in");
        listView = (ListView) findViewById(R.id.rotalist);
        textViewDate = (TextView)findViewById(R.id.textviewdate);
        Log.e(TAG, "textview = "+textViewDate);
        listView.setAdapter(arrayAdapter);
        listView.setOnItemClickListener(this);
    }// end of onCreate

    @Override
    public void onBackPressed() {
        Log.e(TAG, "onBack pressed globaldatetime = " + nfcscannerapplication.getglobalDateTime());
        super.onBackPressed();
    }

    @Override
    protected void onResume(){
        super.onResume();
        Log.e(TAG, "global date in onresume getrota = " + nfcscannerapplication.getglobalDateTime());
        array = (ArrayList<String[]>)getIntent().getBundleExtra("rotaArrayBundle").get("rotaArray");
        Log.e(TAG, "array size in onresume = " + array.size());
        if(array.size() == 0){
            //then needname must be out of range, toast user with no rota available
        DateTime unavailableDate = nfcscannerapplication.getglobalDateTime();
        DateTimeFormatter fmt2 = DateTimeFormat.forPattern("E dd MMM");
        String unavailStringDate = fmt2.print(unavailableDate);
        Log.e(TAG, "no rota!!!!!!!!!!!!!!!!");
        AlertDialog alertDialog = new AlertDialog.Builder(GetRota.this).create();
        alertDialog.setTitle("No Rota Available ");
        alertDialog.setMessage("Unable To View Rota For  " +"\n" + unavailStringDate);
        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {

                          onBackPressed();

                    } }); 

                alertDialog.show();

            }
            if (arrayAdapter == null){
                MySimpleArrayAdapter arrayAdapter = new MySimpleArrayAdapter(this, array);

                listView.setAdapter(arrayAdapter);
            }
        }

        private MySimpleArrayAdapter getListAdapter() {

            return arrayAdapter;
        }

        public void setCurrentDateOnView() {

            dpResult = (DatePicker) findViewById(R.id.datepicker1);

            final Calendar c = Calendar.getInstance();
            year = c.get(Calendar.YEAR);
            month = c.get(Calendar.MONTH);
            day = c.get(Calendar.DAY_OF_MONTH);

        }

        public boolean onCreateOptionsMenu(Menu menu) {
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.menurotadetails, menu);
            return true;
        }

        public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {

            case R.id.previous:

                DateTime dateTime = nfcscannerapplication.getglobalDateTime();
                DateTime dateTimeMinusOne = dateTime.minusDays(1);
                nfcscannerapplication.setGobalDateTime(dateTimeMinusOne);

                DateTimeFormatter fmt2 = DateTimeFormat.forPattern("d-MMM-Y");
                String previousDay = fmt2.print(dateTimeMinusOne);

                Intent i2 = new Intent(this, NfcscannerActivity.class);
                i2.putExtra("nextRota", previousDay);
                i2.setAction("NEXT_ROTA");
                startActivity(i2);

                return true;

            case R.id.next:

                DateTime dateTime2 = nfcscannerapplication.getglobalDateTime();
                DateTime dateTimePlusOne = dateTime2.plusDays(1);
                nfcscannerapplication.setGobalDateTime(dateTimePlusOne);

                DateTimeFormatter fmt = DateTimeFormat.forPattern("d-MMM-Y");
                String nextDay = fmt.print(dateTimePlusOne);

                Intent i = new Intent(this, NfcscannerActivity.class);
                i.putExtra("nextRota", nextDay);
                i.setAction("NEXT_ROTA");
                startActivity(i);

                return true;

            case R.id.today:
                setCurrentDateOnView();
                showDialog(DATE_DIALOG_ID);
                return true;

            default:

                return super.onOptionsItemSelected(item);
            }
        }

//adapter stuff... 
```

.

在调用类（NfcscannerActivity）

```
 Button getRota = (Button)findViewById(R.id.buttongetrota);

            getRota.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Log.e(TAG, "onclicked getRota");

                    DateTime now = new DateTime();
                    nfcscannerapplication.setGobalDateTime(now);
                    Log.e(TAG, "now in getrota method in nfcact = "+ now);
                    DateTimeFormatter fmt = DateTimeFormat.forPattern("d-MMM-Y");
                    String formattedNow = fmt.print(now);
                    String[] params = new String[]{nfcscannerapplication.getCarerID(), formattedNow}; 
                    AsyncGetRota agr = new AsyncGetRota();
                    agr.execute(params); 

                     }

                }// end of onclick
            });

some intent processing......
if(intent.getAction().equalsIgnoreCase("NEXT_ROTA")){

            Log.e(TAG, "next rota action");
            String date = intent.getStringExtra("nextRota");

            getNextRota(date);
        } 

private void getNextRota(String stringExtra) {

    String[] params = new String[]{nfcscannerapplication.getCarerID(), stringExtra}; 
    AsyncGetRota agr = new AsyncGetRota();
    agr.execute(params);

    }

private class AsyncGetRota extends AsyncTask<String, Void, Void> {

        ProgressDialog progressDialog;
        Boolean isRotaArrayNull = false;

        @Override
        protected void onPreExecute()
        {
            progressDialog= ProgressDialog.show(NfcscannerActivity.this, 
                    "Connecting to Server"," retrieving rota...", true);

        };      

        @Override
        protected Void doInBackground(String... params) {

            try {
                Log.e(TAG, "inside doInBackground");

                Log.e(TAG, "now in doinbackground = " + params[1]);
                rotaArray = nfcscannerapplication.loginWebservice.getRota(params[0], params[1]);
                //nfcscannerapplication.loginWebservice.getRota(params[0], params[1]);

               if (rotaArray == null){
                   Log.e(TAG, "about to call onstart");
                   isRotaArrayNull = true;
               }

            } catch (Exception e) {

               e.printStackTrace();

            }
            return null;

        }

        @Override
        protected void onPostExecute(Void result)
        {
            super.onPostExecute(result);
            if(progressDialog != null)
            progressDialog.dismiss();

           if(isRotaArrayNull == false){

            Intent intent = new Intent(NfcscannerActivity.this,
                            GetRota.class);
             Bundle b = new Bundle();
             b.putSerializable("rotaArray", rotaArray);

             intent.putExtra("rotaArrayBundle", b);
             startActivity(intent);
        }else{

            AlertDialog alertDialog = new AlertDialog.Builder(NfcscannerActivity.this).create();
            alertDialog.setTitle("Signal Test");
            alertDialog.setMessage("No Phone Signal");

             alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                  public void onClick(DialogInterface dialog, int which) {

                      onStart();
                } }); 

             alertDialog.show();

        }

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:47:21.410

解决了。我将以下内容添加到清单中

```
<activity
            android:name=".GetRota"
            android:launchMode="singleTask"
            android:screenOrientation="portrait" >
        </activity> 
```

我不是 100% 为什么这会有所作为，但是将 singleTop 更改为 singleTask 已经解决了

# c++ - 多个重载函数实例与参数列表匹配

> ID：13011361
> 
> 赞同：11
> 
> 时间：2012-10-22T12:20:29.517
> 
> 标签：c++, visual-studio-2010

使用时出现上述错误

```
double x = log10(100); 
```

我在同一个项目中的其他课程中使用过它，它没有显示此错误。

我如何解决它？

非常感谢

钦坦

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-22T12:26:15.323

该错误通常表明该函数存在多个重载，并且对于该特定调用`log10`，它们中没有一个比其他的*更好。*例如，重载可以采用`float`and `double`:`100`是`int`可以转换为其中之一的，并且转换是等效的，因此编译器无法确定*最佳*选项是什么。

您可以显式强制转换为重载之一：

```
double x = log10( 100\. );    // 100\. is a double
float  y = log10( 100f );    // 100f is a float
int i = 100;
double z = log10( static_cast<double>(i) ); // or cast 
```

# android - android achartengine - 如何识别条形图中触摸了哪个条？

> ID：13011369
> 
> 赞同：7
> 
> 时间：2012-10-22T12:21:06.257
> 
> 标签：android, achartengine

我正在开发一个 android 应用程序并使用 AChartEngine 制作条形图。一切正常，除了我无法确定图表中的哪个条被触摸（未单击）。似乎 .getCurrentSeriesAndPoint() 在 OnTouchListener 中不起作用。每次都返回NULL。当我使用 OnClickListener 时，一切正常，但我需要知道哪个栏被触摸（Action_Down 和 Action_Up）没有被点击。

.getCurrentSeriesAndPoint() 通常不能在 TouchListener 中工作吗？是否有解决方法或其他方法来实现触摸哪个栏？

```
mChartView.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            SeriesSelection seriesSelection = mChartView.getCurrentSeriesAndPoint();

            SimpleSeriesRenderer r = new SimpleSeriesRenderer();
            switch(event.getAction()) {
                case MotionEvent.ACTION_DOWN:{
                        Toast.makeText(MainActivity.this, "DOWN", Toast.LENGTH_SHORT) .show();                          
                        if(seriesSelection != null) touchedBar = seriesSelection.getPointIndex();
                        break;}

                case MotionEvent.ACTION_UP:{
                        Toast.makeText(MainActivity.this, "UP", Toast.LENGTH_LONG) .show();                         
                        touchedBar = 0;
                        break;}
                default: break;
            }

            mRenderer.removeAllRenderers(); 
            r.setColor(Color.RED);
            r.setSelectedBar(ClickedBar);
            mRenderer.addSeriesRenderer(r);                 
            mChartView.repaint();

            return true;
        }
    }); 
```

亲切的问候克里斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:59:43.657

它应该与触摸侦听器一起使用。但是，您仍然必须这样做：

```
mRenderer.setClickEnabled(true); 
```

AChartEngine 内部使用了onTouchEvent，所以有可能你的触摸事件是在ACE 之后调用的，所以这可能是没有得到预期值的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T01:44:10.117

当您要触摸和长按时，您需要设置：

```
mRenderer.setOnClickable(false) 
```

# c - Linux shell 脚本错误

> ID：13011371
> 
> 赞同：-1
> 
> 时间：2012-10-22T12:21:10.623
> 
> 标签：c, linux, shell

我必须修改这个脚本，它将“PATH”中的每个路径与脚本的每个参数结合起来，并为每个参数执行“ls -l”命令......这就是我想象的方式，但我有一些问题，不要'不知道到底是什么问题....我得到“分段错误（核心转储）”，如果没有，那么无论我给出多少个参数，输出都是相同的，所以我认为它只为其中一个执行命令但我不确定......谁能帮助我？...对不起，如果我的英语很粗糙或代码中的外语...

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

int main (int argc,char* argv[])
{
char* s=(char*)malloc(sizeof(char)*strlen(getenv("PATH")));
s=getenv("PATH");
if (argc==0) {printf("Nem irt be egyetlen parametert sem!");}
else
{
    char* seged=(char*)malloc(sizeof(char)*(strlen(strtok(s,":"))+1));
    seged=strtok(NULL,":");
    strcat(seged,"/");
    int i=1;
    for (i=1;i<=argc;i++);
    {

        char* seged2=(char*)malloc(sizeof(char)*(1000));
        //char* seged2=(char*)malloc(sizeof(char)*(strlen(strtok(NULL,":"))+(strlen(argv[i]))+1));  if i use this line i get Segmentation Fault
        strcat(seged2,seged);
        strcat(seged2,argv[i]);
        int pid=fork();
        if (pid==0)
        {
            execl("/bin/ls","ls -l",seged2);
        }
        free(seged2);
    }
    while (strtok(NULL,":")!=NULL)
    {
        free(seged);            
        char* seged=(char*)malloc(sizeof(char)*(strlen(strtok(NULL,":"))+1));
        seged=strtok(NULL,":");
        strcat(seged,"/");  
        for (i=1;i<argc;i++);
        {               
            char* seged2=(char*)malloc(sizeof(char)*(strlen(strtok(NULL,":"))+strlen(argv[i])+1));
            strcat(seged2,seged);
            strcat(seged2,argv[i]);
            pid_t pid=fork();
            if (pid==0)
            {
                execl("/bin/ls","ls -l",seged2);
            }
            free(seged2);
        }
    }   

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:28:03.150

In Addition to what Olaf said:

You need to call the `execl` function with a separate string for each option you want to pass and terminate with the arguments with `NULL` like so:

```
execl("/bin/ls", "ls", "-l", seged2, 0); 
```

See `man execl` for further reference.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:26:34.990

您必须测试 的返回值`strtok()`。当您的 , 中没有更多标记时`PATH`，`strtok()`返回`NULL`并`strlen(NULL)`给出您的分段错误。

请阅读`man strtok`。

我建议您不要以这种方式嵌套函数调用，因为您总有可能获得意外的返回值。

# typo3 - 错字3删除每个新请求的fe插件缓存

> ID：13011374
> 
> 赞同：0
> 
> 时间：2012-10-22T12:21:19.633
> 
> 标签：typo3, typoscript

我在typo3中有一些非常具体的问题。这是情况：

我得到了 fe 扩展，它的一部分是插件，它显示在 fe 中，它说，用户是否登录（或未注册，禁用，有很多可能性）。

该插件显示在一些“虚拟”隐藏页面中，然后通过打字稿（内容对象）注入主模板。

我需要摆脱 t3 缓存功能，我需要，这个插件源代码在用户提出的每个请求中都会执行。

我尝试通过已知选项禁用缓存，在插件类中设置 pi_USER_INT =1 属性，尝试使用 COA_INT 加载内容，但插件内容仍然缓存某些请求，我认为，该缓存链接到登录用户（但这是不能接受的）。

任何想法，如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:01:36.767

如果 COA_INT 没有帮助，请考虑 Proxy-Cache 或 Browser-Cache。COA_INT 未缓存 - 但如果您的网络服务器没有请求，您将不会获得更新。

也许添加

```
config.additionalHeaders = Cache-Control: no-cache 
```

所以你会阻止缓存。如果这有效，您就知道问题出在客户端。

# jaxb - 通过 JAXB 使用选择复杂数据类型

> ID：13011376
> 
> 赞同：5
> 
> 时间：2012-10-22T12:21:26.010
> 
> 标签：jaxb

我有以下 XML 消息，我需要反序列化它

```
<xs:complexType name="DataType">
   <xs:choice>
       <xs:element name="Ext_a_Data" type="ExtTest1DataType" />
       <xs:element name="Ext_b_Data" type="ExtTest2DataType" />
       <xs:element name="Ext_c_Data" type="ExtTest3DataType" />
   </xs:choice>
</xs:complexType> 
```

我该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:32:17.367

`@XmlElements`注释用于映射选择结构 。

*   [http://blog.bdoughan.com/2010/10/jaxb-and-xsd-choice-xmlelements.html](http://blog.bdoughan.com/2010/10/jaxb-and-xsd-choice-xmlelements.html)

# firefox-addon - 为 Firefox 扩展定义插件的正确方法

> ID：13011382
> 
> 赞同：0
> 
> 时间：2012-10-22T12:21:45.087
> 
> 标签：firefox-addon, xul

我编写了一个 Firefox 扩展 (MyPlugin)，它为另一个 Firefox 扩展 (MainExtension) 添加了一些功能。我想把它放在 Mozilla 附加组件页面上，但我想先检查一下构建这样一个扩展的最佳方法。

目前，我在 chrome.manifest 中用 MyPlugin 的 xul 覆盖 MainExtension 的 xul。在 MyPlugin 的 xul 中，一个标签调用一个 .js 文件，该文件定义`MainExtension.MyPlugin`了覆盖层元素可以调用的所有方法。

这种设置本身可以吗？当我第一次尝试将插件上传到 Mozilla 附加组件页面时，我发现 install.rdf 的“requires”元素不再受支持。我一直认为这将负责检查 MainExtension 是否实际安装。我是否应该在我的插件中进行任何错误检查以确保安装了 MainExtension？我认为现在 chrome.manifest 中的覆盖线如果没有安装 MainExtension 就会失败，然后不会发生任何其他事情，这似乎很好。从功能上讲，我不打算在没有主扩展的情况下安装插件，所以这应该不是问题，但是由于我想将扩展发布到其他人可以下载的地方，我想确保我没有造成任何问题为他们（而我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:50:30.167

所以我在我的扩展上做了更多的工作，阅读了更多的在线文档，并咨询了一些更有经验的开发人员，而我现在得到的解决方案是使用模块来定义我的扩展的一些基本内部部分。我在模块中创建了一个 MyPlugin 对象，然后通过使用模块对 Firefox 通用。然后使用 MainExtension 的 xul 覆盖层调用的脚本，我创建了另一个 chrome 对象（称为例如 MyPluginChrome），它仅包含与与 MainExtension 的 XUL 元素交互相关的函数。当问这个问题时，我虽然有必要定义一个 XPCOM 组件以使我的插件独立，这对于我的简单插件到现有扩展来说似乎有点矫枉过正，

为了学习如何执行上述操作，我使用了 Mozilla Developer Network 站点上[XUL School 教程中的](https://developer.mozilla.org/en-US/docs/XUL_School)[JavaScript 对象管理](https://developer.mozilla.org/en-US/docs/XUL_School/JavaScript_Object_Management)页面。本教程有点古怪（因为它是从另一个来源改编的）但非常有帮助。它也与 MDN 上的[构建扩展](https://developer.mozilla.org/en-US/docs/Building_an_Extension)页面分开。其他几个较旧的网页在 Google 上的点击率更高，但我发现 XUL School 教程信息量最大且最有用。

# r - 如何在 R 中创建纯 ascii 表作为输出，类似于 MySQL 风格？

> ID：13011383
> 
> 赞同：9
> 
> 时间：2012-10-22T12:21:45.613
> 
> 标签：r, ascii

我正在尝试为 R 找到一个函数，它可以`data.frame`像这样以 MySQL 样式的 ascii 表输出对象

```
+----+------+------+
| id | var1 | var2 |
+----+------+------+
|  1 | asdf | g    |
|  2 | asdf | h    |
|  3 | asdf | j    |
+----+------+------+ 
```

有这样的功能吗？至少有两个工具可以做到这一点

*   [csvfix asctii_table](http://csvfix.byethost5.com/csvfix13/csvfix.html?ascii_table.html)
*   [将文本格式化为表格](http://www.sensefulsolutions.com/2010/10/format-text-as-table.html)

但是有没有办法直接从 R 中做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-22T13:16:53.583

使用您的数据：

```
d <- data.frame(id = 1:3, va1 = rep("asdf", 3), var2 = c("g","h","j"),
                stringsAsFactors = FALSE) 
```

这里有一些可以帮助您入门的东西，至少对于简单的表格来说可能就足够了。

```
asciify <- function(df, pad = 1, ...) {
    ## error checking
    stopifnot(is.data.frame(df))
    ## internal functions
    SepLine <- function(n, pad = 1) {
        tmp <- lapply(n, function(x, pad) paste(rep("-", x + (2* pad)),
                                                collapse = ""),
                      pad = pad)
        paste0("+", paste(tmp, collapse = "+"), "+")
    }
    Row <- function(x, n, pad = 1) {
        foo <- function(i, x, n) {
            fmt <- paste0("%", n[i], "s")
            sprintf(fmt, as.character(x[i]))
        }
        rowc <- sapply(seq_along(x), foo, x = x, n = n)
        paste0("|", paste(paste0(rep(" ", pad), rowc, rep(" ", pad)),
                          collapse = "|"),
               "|")
    }
    ## convert everything to characters
    df <- as.matrix(df)
    ## nchar in data
    mdf <- apply(df, 2, function(x) max(nchar(x)))
    ## nchar in names
    cnames <- nchar(colnames(df))
    ## max nchar of name+data per elements
    M <- pmax(mdf, cnames)
    ## write the header
    sep <- SepLine(M, pad = pad)
    writeLines(sep)
    writeLines(Row(colnames(df), M, pad = pad))
    writeLines(sep)
    ## write the rows
    for(i in seq_len(nrow(df))) {
        ## write a row
        writeLines(Row(df[i,], M, pad = pad))
        ## write separator
        writeLines(sep)
    }
    invisible(df)
} 
```

在使用中我们得到：

```
> asciify(d)
+----+------+------+
| id |  va1 | var2 |
+----+------+------+
|  1 | asdf |    g |
+----+------+------+
|  2 | asdf |    h |
+----+------+------+
|  3 | asdf |    j |
+----+------+------+ 
```

在一些更复杂的事情上，我们得到

```
> asciify(mtcars)
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
|  mpg | cyl |  disp |  hp | drat |    wt |  qsec | vs | am | gear | carb |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
|   21 |   6 |   160 | 110 |  3.9 |  2.62 | 16.46 |  0 |  1 |    4 |    4 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
|   21 |   6 |   160 | 110 |  3.9 | 2.875 | 17.02 |  0 |  1 |    4 |    4 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 22.8 |   4 |   108 |  93 | 3.85 |  2.32 | 18.61 |  1 |  1 |    4 |    1 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 21.4 |   6 |   258 | 110 | 3.08 | 3.215 | 19.44 |  1 |  0 |    3 |    1 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 18.7 |   8 |   360 | 175 | 3.15 |  3.44 | 17.02 |  0 |  0 |    3 |    2 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 18.1 |   6 |   225 | 105 | 2.76 |  3.46 | 20.22 |  1 |  0 |    3 |    1 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 14.3 |   8 |   360 | 245 | 3.21 |  3.57 | 15.84 |  0 |  0 |    3 |    4 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 24.4 |   4 | 146.7 |  62 | 3.69 |  3.19 |    20 |  1 |  0 |    4 |    2 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 22.8 |   4 | 140.8 |  95 | 3.92 |  3.15 |  22.9 |  1 |  0 |    4 |    2 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 19.2 |   6 | 167.6 | 123 | 3.92 |  3.44 |  18.3 |  1 |  0 |    4 |    4 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 17.8 |   6 | 167.6 | 123 | 3.92 |  3.44 |  18.9 |  1 |  0 |    4 |    4 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 16.4 |   8 | 275.8 | 180 | 3.07 |  4.07 |  17.4 |  0 |  0 |    3 |    3 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 17.3 |   8 | 275.8 | 180 | 3.07 |  3.73 |  17.6 |  0 |  0 |    3 |    3 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 15.2 |   8 | 275.8 | 180 | 3.07 |  3.78 |    18 |  0 |  0 |    3 |    3 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 10.4 |   8 |   472 | 205 | 2.93 |  5.25 | 17.98 |  0 |  0 |    3 |    4 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 10.4 |   8 |   460 | 215 |    3 | 5.424 | 17.82 |  0 |  0 |    3 |    4 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 14.7 |   8 |   440 | 230 | 3.23 | 5.345 | 17.42 |  0 |  0 |    3 |    4 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 32.4 |   4 |  78.7 |  66 | 4.08 |   2.2 | 19.47 |  1 |  1 |    4 |    1 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 30.4 |   4 |  75.7 |  52 | 4.93 | 1.615 | 18.52 |  1 |  1 |    4 |    2 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 33.9 |   4 |  71.1 |  65 | 4.22 | 1.835 |  19.9 |  1 |  1 |    4 |    1 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 21.5 |   4 | 120.1 |  97 |  3.7 | 2.465 | 20.01 |  1 |  0 |    3 |    1 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 15.5 |   8 |   318 | 150 | 2.76 |  3.52 | 16.87 |  0 |  0 |    3 |    2 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 15.2 |   8 |   304 | 150 | 3.15 | 3.435 |  17.3 |  0 |  0 |    3 |    2 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 13.3 |   8 |   350 | 245 | 3.73 |  3.84 | 15.41 |  0 |  0 |    3 |    4 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 19.2 |   8 |   400 | 175 | 3.08 | 3.845 | 17.05 |  0 |  0 |    3 |    2 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 27.3 |   4 |    79 |  66 | 4.08 | 1.935 |  18.9 |  1 |  1 |    4 |    1 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
|   26 |   4 | 120.3 |  91 | 4.43 |  2.14 |  16.7 |  0 |  1 |    5 |    2 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 30.4 |   4 |  95.1 | 113 | 3.77 | 1.513 |  16.9 |  1 |  1 |    5 |    2 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 15.8 |   8 |   351 | 264 | 4.22 |  3.17 |  14.5 |  0 |  1 |    5 |    4 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 19.7 |   6 |   145 | 175 | 3.62 |  2.77 |  15.5 |  0 |  1 |    5 |    6 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
|   15 |   8 |   301 | 335 | 3.54 |  3.57 |  14.6 |  0 |  1 |    5 |    8 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+
| 21.4 |   4 |   121 | 109 | 4.11 |  2.78 |  18.6 |  1 |  1 |    4 |    2 |
+------+-----+-------+-----+------+-------+-------+----+----+------+------+ 
```

请注意，代码不处理在小数点上对齐数字数据，但`Row()`可以修改内部函数的代码以适应所有需要的`sprintf()`调用略有不同。另外，我意识到我已将字符串右对齐，这不是您在示例表中显示的内容，但不是终端故障！

要在文件中获取输出，请`asciify()`使用以下命令捕获输出`capture.output()`：

```
> capture.output(asciify(d), file = "asciified_d.txt")
> readLines("asciified_d.txt")
[1] "+----+------+------+" "| id |  va1 | var2 |" "+----+------+------+"
[4] "|  1 | asdf |    g |" "+----+------+------+" "|  2 | asdf |    h |"
[7] "+----+------+------+" "|  3 | asdf |    j |" "+----+------+------+" 
```

（注意上面显示的输出只是一个字符串向量，每个字符串在捕获的文件中占一行。文件在磁盘上看起来像这样：

```
$ cat asciified_d.txt 
+----+------+------+
| id |  va1 | var2 |
+----+------+------+
|  1 | asdf |    g |
+----+------+------+
|  2 | asdf |    h |
+----+------+------+
|  3 | asdf |    j |
+----+------+------+ 
```

.)

我没有检查过这么多，在很多情况下它很可能会失败，但它适用于基本数据帧。

**Update** `asciify()`现在处理带有因子的数据帧以及字符和数字数据：

```
> require(ggplot2)
> asciify(head(diamonds))
+-------+-----------+-------+---------+-------+-------+-------+------+------+------+
| carat |       cut | color | clarity | depth | table | price |    x |    y |    z |
+-------+-----------+-------+---------+-------+-------+-------+------+------+------+
|  0.23 |     Ideal |     E |     SI2 |  61.5 |    55 |   326 | 3.95 | 3.98 | 2.43 |
+-------+-----------+-------+---------+-------+-------+-------+------+------+------+
|  0.21 |   Premium |     E |     SI1 |  59.8 |    61 |   326 | 3.89 | 3.84 | 2.31 |
+-------+-----------+-------+---------+-------+-------+-------+------+------+------+
|  0.23 |      Good |     E |     VS1 |  56.9 |    65 |   327 | 4.05 | 4.07 | 2.31 |
+-------+-----------+-------+---------+-------+-------+-------+------+------+------+
|  0.29 |   Premium |     I |     VS2 |  62.4 |    58 |   334 | 4.20 | 4.23 | 2.63 |
+-------+-----------+-------+---------+-------+-------+-------+------+------+------+
|  0.31 |      Good |     J |     SI2 |  63.3 |    58 |   335 | 4.34 | 4.35 | 2.75 |
+-------+-----------+-------+---------+-------+-------+-------+------+------+------+
|  0.24 | Very Good |     J |    VVS2 |  62.8 |    57 |   336 | 3.94 | 3.96 | 2.48 |
+-------+-----------+-------+---------+-------+-------+-------+------+------+------+ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-22T15:56:31.013

另一个已经比我在午餐时写的代码更先进的解决方案是[**pander**包](https://github.com/Rapporter/pander)，它在 Pandoc markdown 中呈现 R 对象，以便随后转换为一系列其他格式。

标记与显示的 MySQL 不太相同，但最相似的是：

```
> pandoc.table(m, style = "grid")

+---------------------+-------+-------+--------+
| &nbsp;              | mpg   | cyl   | disp   |
+=====================+=======+=======+========+
| **Mazda RX4**       | 21    | 6     | 160    |
+---------------------+-------+-------+--------+
| **Mazda RX4 Wag**   | 21    | 6     | 160    |
+---------------------+-------+-------+--------+ 
```

如您所见，这具有对行名称的内置处理（我的没有），并且随着时间的推移可能会获得更多的糖。

[在这个 StackOverflow question](https://stackoverflow.com/a/10776476/429846)中有一些相关的讨论和进一步的例子。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-22T20:06:36.660

如果您追求的是 HTML 结果，也许您可​​以收获`googleVis`包的力量。您在包中有更多示例`demo()`。

```
library(googleVis)
x <- data.frame(matrix(runif(9), nrow = 3))
xg <- gvisTable(x, options=list(page='enable', height=300))
plot(xg) 
```

上面的块将生成一个看起来像这样的网页。

![在此处输入图像描述](../Images/86aa7cf3e3224d6cbb536531f537efa5.png)

如果您正在寻找报告工具，可以`Markdown`在 RStudio 中查看。

# java - 使用 Eclipse 提取到可执行 JAR

> ID：13011384
> 
> 赞同：0
> 
> 时间：2012-10-22T12:21:51.280
> 
> 标签：java, eclipse, jar

这可能是一个简单的问题，但如果我使用 Eclipse，我如何“构建”我的项目，使其成为可执行的 jar 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:24:53.650

右键单击 Project -> Export -> Jar File / Runnable Jar File。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:26:04.800

文件 -> 导出 -> Java -> 可运行 Jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:25:57.413

最简单的方法是制作一个[**Ant**](http://ant.apache.org/manual/using.html)构建脚本。这是一个很好的解决方案，因为您可以从 Eclipse 和命令行构建 jar。

# java - JSF 服务层

> ID：13011392
> 
> 赞同：21
> 
> 时间：2012-10-22T12:22:30.850
> 
> 标签：java, model-view-controller, jsf, service-layer

我不确定我在 JSF 中使用 MVC 环境的方法是否是最好的方法。由于我试图充分利用 JSF，我想知道我的服务层（或模型，用 MVC 术语来说）应该如何“设计”。

我知道 View-Controller 比率应该是 1 比 1（排除了例外情况）。现在我应该以什么方式设计我的服务层？我应该使用一项大服务（不这么认为）吗？如果不是，我应该根据什么拆分我的服务？

请注意，我的服务将从 Bean（MVC 术语中的控制器）调用，并且服务本身将在必要时使用 JPA 调用 DAO。

提前致谢

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-22T13:55:15.560

服务层（业务模型）应该围绕主要实体（数据模型）设计。例如`UserService`for `User`, `ProductService`for `Product`, `OrderService`for`Order`等。你绝对不应该有一个庞大的服务类左右。那是极端紧密的耦合。

至于服务层 API 本身，Java EE 6 提供 EJB 3.1 作为服务层 API。在黑暗的 J2EE 时代，很久以前，当 EJB 2.0 难以开发时，Spring 更多地被用作服务层 API。现在有些人仍在使用它，但由于 Java EE 6 已经吸收了从 Spring 中学到的所有优秀经验，所以它变得[多余](https://blogs.oracle.com/arungupta/entry/why_java_ee_6_is)了。请注意，EJB（和 JPA）在 Tomcat 等准系统 servlet 容器中不可用。您需要在其上安装例如 OpenEJB（或仅升级到 TomEE）。

无论选择何种服务层 API，最好的办法是通过完全在服务层中执行业务工作，使您的 JSF 支持 bean（动作）侦听器方法*尽可能灵活。*请注意，服务层本身**不应**有任何 JSF 依赖项。因此，服务层代码中的任何（内）直接导入都`javax.faces.*`表明设计不佳。您应该将特定的代码行保留在支持 bean 中（通常是根据服务调用结果添加面孔消息的代码）。通过这种方式，服务层可重用于其他前端，例如 JAX-RS 甚至普通 servlet。

您应该了解，Java EE 应用程序中服务层的主要优势是容器管理事务的可用性。EJB上的一个服务方法调用`@Stateless`实际上算作单个 DB 事务。`@PersistenceContext EntityManager`因此，如果在服务方法调用调用的任何 DAO 操作中发生异常，则将触发*完整的回滚。*这样，您最终会得到一个干净的 DB 状态而不是一个脏 DB 状态，因为例如第一个 DB 操作查询成功，但第二个没有。

### 也可以看看：

*   [为实体创建主从页面，如何链接它们以及选择哪个 bean 范围](https://stackoverflow.com/questions/8459903/creating-a-master-detail-user-interface-for-entities-which-bean-scope-to-choose/)
*   [什么时候需要或方便地使用 Spring 或 EJB3 或同时使用它们？](https://stackoverflow.com/questions/18369356/when-is-it-necessary-or-convenient-to-use-springjsf2-or-ejb3jsf2-or-all-of-the/)
*   [JSF 控制器、服务和 DAO](https://stackoverflow.com/questions/30639785/jsf-controller-service-and-dao)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-29T17:51:43.390

如果您的应用程序中的实体很少，那么服务和模型实体之间的 1:1 比例可能还不错。但如果它是一个大应用程序，就会有太多的服务。

服务的数量取决于您正在设计的应用程序的用例。一旦在分析阶段确定了它们，就必须根据它们的功能将它们分成几组。每组用例都是一个服务，每个用例都是该服务中的一个方法。每个服务可以管理多个模型实体（并且您必须在其中注入执行其功能所需的 DAO）。通常，服务的用例管理模型类图中相互关联的模型实体。服务可能遵循“最大内聚/最小耦合”的良好做法。

DAO 与模型实体的比例为 1:1。每个 DAO 对其实体执行 CRUD 操作和查询。如果一个方法需要查询 2 个关联实体，根据业务概念放在更合适的 DAO 中。

在 JSF 表示层中，我在页面和控制器之间没有 1:1 的比例，这将是太多的控制器。我将执行每个服务的用例所需的所有页面组合到一个控制器中。因此，控制器和服务之间的比例为 1:1，将每个服务注入到其页面执行其用例的控制器中。

当然，这些都是一般原则。您可能在应用程序中有一些特殊情况会破坏它们，但它们很少。

您可能没有太多的服务和控制器，但也不会太少，因为那样它们就会有太多的逻辑和字段。你必须达成妥协。

# python - 不同长度的求和列表

> ID：13011394
> 
> 赞同：12
> 
> 时间：2012-10-22T12:22:34.273
> 
> 标签：python, algorithm, list, sum

对两个或多个列表求和的最佳方法是什么，即使它们的长度不同？

例如我有：

```
lists = [[1, 2], [0, 3, 4], [5]] 
```

结果应该是：

```
result = [6, 5, 4] 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-22T12:27:07.563

您可以使用[`itertools.izip_longest()`](http://docs.python.org/library/itertools.html?highlight=itertools#itertools.izip_longest), 并使用`fillvalue`等于`0`

```
In [6]: [sum(x) for x in itertools.izip_longest(*lists, fillvalue=0)]
Out[6]: [6, 5, 4] 
```

对于 Python < 2.6：

```
In [27]: ml = max(map(len, lists))

In [28]: ml       #length of the longest list in lists
Out[28]: 3

In [29]: [sum(x) for x in zip(*map(lambda x:x+[0]*ml if len(x)<ml else x, lists))]
Out[29]: [6, 5, 4] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-19T09:22:17.890

```
#You can do the same without using predefined header files.
def sumlists(a,b,c):
    sumlist = []
    while(len(a)!=len(b) or len(a)!=len(c)):
        if len(a)>len(b):
            b.append(0)
        if len(a)>len(c):
            c.append(0)
        elif len(b)>len(a):
            a.append(0)
        if len(b)>len(c):
             c.append(0)
        elif len(c)>len(a):
            a.append(0)
        if len(c)>len(b):
             b.append(0)
    for i,j,k in zip(a,b,c):
         sumlist.append(i+j+k)
    return sumlist
 print(sumlists([1,2],[0,3,4],[5])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-04T17:16:29.397

我想出的最好的方法如下：

```
result = [sum(filter(None, i)) for i in map(None, *lists)] 
```

这还不错，但我必须添加 NoneTypes 然后过滤它们才能总结。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-19T08:50:06.470

这适用于具有一千个元素的列表。检查 if 语句要附加的天气需要很长时间，但这运行得非常快。我有一个函数，“longestlist”，它识别并返回最长的列表，但这很容易编写，所以使用该输出......

```
def listfiller(a,b,c,d)
  longest = longestlist(a,b,c,d)
  for i in range(len(longest)-len(a)):
    a.append(0)
  for i in range(len(longest)-len(b)):
    b.append(0)
    print(b)
  for i in range(len(longest)-len(c)):
    c.append(0)
  for i in range(len(longest)-len(d)):
    d.append(0)
  return(a,b,c,d) 
```

# java - Java 视频处理库

> ID：13011397
> 
> 赞同：9
> 
> 时间：2012-10-22T12:22:48.953
> 
> 标签：java, video-processing, gstreamer, jmf, xuggle

我想从视频中提取帧并对其应用一些过滤器，例如 gabor/hough 等。哪个 Java 库最适合处理各种视频编码？我一直在研究 GStreamer、JMF、Xuggler 等，但无法确定哪个是最好的。我也在寻找编辑帧并使用新帧制作视频。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T12:31:35.257

如果您正在寻找执行低级别操作，例如提取帧并对其进行操作，那么 Xuggler 将是最佳选择，因为 API 是针对此低级别的。它适用于 ffmpeg，因此可以处理所有类型的视频编码。

不要将 JMF 用于任何事情，它陈旧、过时且有问题 - GStreamer 很好，但 API 更适合播放视频而不是操纵帧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-30T03:52:04.933

你可以试试[Marvin 框架](http://marvinproject.sourceforge.net/)。它使用 JavaCV 进行视频编码和设备访问，但所有图像处理算法都是纯 Java。

加载视频并实时处理帧非常容易，如下面的边缘检测示例所示。

[![在此处输入图像描述](../Images/80fa00ec131b91de0e69cabfafe44e05.png)](https://i.stack.imgur.com/rPTCu.png)

**源代码：**

```
import static marvin.MarvinPluginCollection.*;

public class SimpleVideoProcessing extends JFrame implements Runnable{

    private MarvinVideoInterface    videoAdapter = new MarvinJavaCVAdapter();
    private MarvinImagePanel        videoPanel = new MarvinImagePanel();
    private MarvinImage             videoFrame, videoOut = new MarvinImage(640,480);

    public SimpleVideoProcessing() throws MarvinVideoInterfaceException{
        super("Simple Video Processing using Marvin");
        add(videoPanel);
        // Load video file and start the processing thread
        videoAdapter.loadResource("./res/snooker.wmv");
        new Thread(this).start();
        setSize(640,500);
        setVisible(true);
    }

    public void run() {
        try {
            while(true){
                // Request, process and show the video frame.
                videoOut.clear();
                videoFrame = videoAdapter.getFrame();
                prewitt(videoFrame.clone(), videoOut);
                videoPanel.setImage(videoOut);
            }
        } catch (MarvinVideoInterfaceException e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) throws MarvinVideoInterfaceException {
        new SimpleVideoProcessing().setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T20:48:01.213

JMF 是一个不错的选择。但如果处理时间在您的代码中很重要，则最好使用 Xuggler。显然，JMF 比 Xuggler 更通用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-22T15:37:00.707

许格勒，是的。但是，如果您要进行大量图像处理，则应该使用[OpenImaj](http://openimaj.org/)。该库使用 Xuggler 作为其依赖项，但这并不是它的全部功能。想想拥有 Opencv 的功能，而不会缺乏 Java 中的速度。此外，它所需要的只是添加一个 Maven 依赖项，你就可以开始了。代码量也减少了。

**注意**：我仍在审查图书馆，并将继续更新我的答案。

介绍视频：[https ://www.youtube.com/watch?v=TNEQ0eNqLgA](https://www.youtube.com/watch?v=TNEQ0eNqLgA)

# android - 如何在android中使用警报对话框构建器实现多选选择器

> ID：13011399
> 
> 赞同：-1
> 
> 时间：2012-10-22T12:22:53.717
> 
> 标签：android

谁能告诉如何在android中使用警报对话框构建器来实现多选选择器

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:32:41.863

很简单，按照以下教程进行操作：

[http://labs.makemachine.net/2010/03/android-multi-selection-dialogs/](http://labs.makemachine.net/2010/03/android-multi-selection-dialogs/)

简而言之：

```
new AlertDialog.Builder( this )
               .setTitle( "Planets" )
               .setMultiChoiceItems( new String[]{"Mars", "Earth"}, new boolean[]{false, false}, new DialogSelectionClickHandler() )
               .setPositiveButton( "OK", new DialogButtonClickHandler() )
               .create(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T11:13:44.353

```
 btnHost = (Button) view.findViewById(R.id.btnHost);
    btnHost.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            // ((TextView)((RelativeLayout)getActivity().getLayoutInflater().inflate(R.layout.event_filter_title,
            // null)).findViewById(R.id.tvDialogTitle)).setText("Hosts");

            // Log.d( "Dialog object",
            // " static made dialog in checkbox--> "+((TextView)((RelativeLayout)getActivity().getLayoutInflater().inflate(R.layout.event_filter_title,
            // null)).findViewById(R.id.tvDialogTitle)).getText());

            final LayoutInflater inflater123 = (LayoutInflater) getActivity()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            final View view123 = inflater123.inflate(
                    R.layout.event_filter_title, null);

            // Log.d( "Dialog object",
            // " static made dialog in view123--> "+view123);
            //
            // Log.d( "Dialog object",
            // " static made dialog in checkbox--> "+((CheckBox)view123.findViewById(R.id.cbSelectAll)));
            //
            // Log.d( "Dialog object",
            // " static made dialog in checkbox--> "+((CheckBox)inflater.inflate(R.layout.event_filter_title,
            // (ViewGroup) ((AlertDialog)
            // BeepsFragment.dialog).getCurrentFocus(),
            // true).findViewById(R.id.cbSelectAll)));
            //
            // Log.d( "Dialog object",
            // " static made dialog in checkbox--> "+((CheckBox)(((RelativeLayout)getActivity().getLayoutInflater().inflate(R.layout.event_filter_title,
            // null)).findViewById(R.id.cbSelectAll))));

            hostsDialog = new AlertDialog.Builder(getActivity())
                    .setCustomTitle(/*
                                     * Html.fromHtml(
                                     * "<b><font color=\"purple\">  Host</font></b>"
                                     * )
                                     */view123)
                    .setIcon(
                            getActivity().getResources().getDrawable(
                                    R.drawable.add_host))
                    .setMultiChoiceItems(hostsStringArray, isSelectedHosts,
                            new OnMultiChoiceClickListener() {

                                // android.content.DialogInterface.OnShowListener
                                // ocl = new
                                // DialogInterface.OnShowListener() {
                                //
                                // @Override
                                // public void onShow(DialogInterface
                                // dialog) {
                                // // TODO Auto-generated method stub
                                // BeepsFragment.dialog = dialog;
                                // }
                                // };

                                public void onClick(DialogInterface dialog,
                                        int clicked, boolean selected) {

                                    boolean all = true;
                                    Log.i("ME", hosts.toArray()[clicked]
                                            + " selected: " + selected);

                                    // for (int i = 0; i <
                                    // isSelectedHosts.length; i++ ){
                                    //
                                    // if(isSelectedHosts[i]==true){
                                    // all = true;
                                    // }else{
                                    // all = false;
                                    // }
                                    // }
                                    //
                                    // Log.i( "ME", all + " selected:--- "
                                    // +((CheckBox)view123.findViewById(R.id.cbSelectAll)));
                                    //
                                    // if(all = true){
                                    // ((CheckBox)view123.findViewById(R.id.cbSelectAll)).setChecked(true);
                                    // }else{
                                    // ((CheckBox)view123.findViewById(R.id.cbSelectAll)).setChecked(false);
                                    // }

                                    Log.d("Dialog object",
                                            " static made dialog --> "
                                                    + BeepsFragment.dialog
                                                    + " from parameter dialog --> "
                                                    + dialog);

                                }

                            })
                    .setPositiveButton(
                            Html.fromHtml("<b><font color=\"purple\">Apply Filter</font></b>"),
                            new DialogButtonClickHandler() {

                                // android.content.DialogInterface.OnShowListener
                                // ocl = new
                                // DialogInterface.OnShowListener() {
                                //
                                // @Override
                                // public void onShow(DialogInterface
                                // dialog) {
                                // // TODO Auto-generated method stub
                                // BeepsFragment.dialog = dialog;
                                // }
                                // };

                                public void onClick(DialogInterface dialog,
                                        int clicked) {
                                    switch (clicked) {
                                    case DialogInterface.BUTTON_POSITIVE:

                                        filteredList.clear();
                                        hostsSelected.clear();

                                        for (int i = 0; i < hostsStringArray.length; i++) {
                                            Log.i("ME",
                                                    hosts.toArray()[i]
                                                            + " selected: "
                                                            + isSelectedHosts[i]
                                                            + "\n\n\t hostStringArray-->"
                                                            + hostsStringArray[i]);

                                            if (isSelectedHosts[i] == true) {

                                                hostsSelected.add(hosts
                                                        .get(i));
                                                isSelectedHosts[i] = false;
                                            }
                                            // isSelectedHosts[i] = false;
                                        }

                                        Calendar currentCalender = Calendar
                                                .getInstance(Locale
                                                        .getDefault());

                                        Date currentDate = new Date(
                                                currentCalender
                                                        .getTimeInMillis());

                                        if (listSelected == 0) {
                                            for (int j = 0; j < arr_BLID
                                                    .size(); j++) {
                                                if (Helper
                                                        .stringToDate(
                                                                arr_BLID.get(
                                                                        j)
                                                                        .getStart_ts()
                                                                        .toString(),
                                                                Helper.SERVER_FORMAT)
                                                        .after(currentDate)) {
                                                    if (hostsSelected
                                                            .contains(arr_BLID
                                                                    .get(j)
                                                                    .getHost_name())) {
                                                        filteredList
                                                                .add(arr_BLID
                                                                        .get(j));
                                                    }
                                                    if (hostsSelected
                                                            .contains("Me"))
                                                        if (BeepApplication
                                                                .getSelfId() == arr_BLID
                                                                .get(j)
                                                                .getHost_id())
                                                            filteredList
                                                                    .add(arr_BLID
                                                                            .get(j));
                                                }
                                            }

                                        } else {
                                            for (int j = 0; j < arr_BLID
                                                    .size(); j++) {
                                                if (currentDate.after(Helper
                                                        .stringToDate(
                                                                arr_BLID.get(
                                                                        j)
                                                                        .getStart_ts()
                                                                        .toString(),
                                                                Helper.SERVER_FORMAT))) {
                                                    if (hostsSelected
                                                            .contains(arr_BLID
                                                                    .get(j)
                                                                    .getHost_name())) {
                                                        filteredList
                                                                .add(arr_BLID
                                                                        .get(j));
                                                    }
                                                    if (hostsSelected
                                                            .contains("Me"))
                                                        if (BeepApplication
                                                                .getSelfId() == arr_BLID
                                                                .get(j)
                                                                .getHost_id())
                                                            filteredList
                                                                    .add(arr_BLID
                                                                            .get(j));
                                                }
                                            }

                                        }
                                        lvBeeps.setAdapter(new EventsAdapter(
                                                ctx));
                                        break;
                                    }
                                }

                            })
                    .setNegativeButton(
                            Html.fromHtml("<b><font color=\"purple\">Remove Filter</font></b>"),
                            new DialogButtonClickHandler() {

                                public void onClick(
                                        final DialogInterface dialog,
                                        int clicked) {

                                    Calendar currentCalender = Calendar
                                            .getInstance(Locale
                                                    .getDefault());

                                    Date currentDate = new Date(
                                            currentCalender
                                                    .getTimeInMillis());

                                    if (listSelected == 0) {

                                        filteredList.clear();
                                        for (int i = 0; i < arr_BLID.size(); i++) {
                                            if (Helper.stringToDate(
                                                    arr_BLID.get(i)
                                                            .getStart_ts()
                                                            .toString(),
                                                    Helper.SERVER_FORMAT)
                                                    .after(currentDate)) {
                                                filteredList.add(arr_BLID
                                                        .get(i));
                                                if (i < isSelectedHosts.length) {
                                                    isSelectedHosts[i] = false;
                                                } else {
                                                    continue;
                                                }
                                            }
                                        }

                                        lvBeeps.setAdapter(new EventsAdapter(
                                                ctx));
                                    } else {

                                        filteredList.clear();
                                        for (int i = 0; i < arr_BLID.size(); i++) {
                                            if (currentDate.after(Helper
                                                    .stringToDate(
                                                            arr_BLID.get(i)
                                                                    .getStart_ts()
                                                                    .toString(),
                                                            Helper.SERVER_FORMAT))) {
                                                filteredList.add(arr_BLID
                                                        .get(i));
                                                if (i < isSelectedHosts.length) {
                                                    isSelectedHosts[i] = false;
                                                } else {
                                                    continue;
                                                }
                                            }
                                        }

                                        lvBeeps.setAdapter(new EventsAdapter(
                                                ctx));

                                    }
                                }
                            });

            final AlertDialog dlg = hostsDialog.create();

            dlg.show();

            ((TextView) view123.findViewById(R.id.tvDialogTitle))
                    .setText("Hosts");

            ((CheckBox) view123.findViewById(R.id.cbSelectAll))
                    .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                        @Override
                        public void onCheckedChanged(
                                CompoundButton buttonView, boolean isChecked) {
                            // TODO Auto-generated method stub

                            if (isChecked == true) {

                                ListView list = dlg.getListView();
                                for (int i = 0; i < list.getCount(); i++) {

                                    isSelectedHosts[i] = true;
                                    list.setItemChecked(i, true);

                                }

                            }

                            else if (isChecked == false) {

                                ListView list = dlg.getListView();
                                for (int j = 0; j < list.getCount(); j++) {

                                    isSelectedHosts[j] = false;
                                    list.setItemChecked(j, false);
                                }
                                // }
                            }

                        }
                    });

        }
    }); 
```

# php - 使用 FPDF 和 FPDI

> ID：13011400
> 
> 赞同：2
> 
> 时间：2012-10-22T12:22:58.947
> 
> 标签：php, fpdf, fpdi

我网站的根目录是“/var/www/PDFBuilder”。我有 2 个文件夹“fpdf17”和“fpdi142”，我在“fpdf17”文件夹中解压了一个名为“fpdf_tpl.php”的文件。

这是我的代码：

```
error_reporting(E_ALL);
ini_set('display_errors', '1');

define('FPDF_FONTPATH','/var/www/PDFBuilder/fpdf17/');

require('/var/www/PDFBuilder/fpdf17/fpdf.php');
include('/var/www/PDFBuilder/fpdi142/fpdi.php'); 
```

当我尝试打开我的网站时，这是我得到的输出：

> 警告：require_once(fpdf_tpl.php)：无法打开流：第 27 行的 /var/www/PDFBuilder/fpdi142/fpdi.php 中没有这样的文件或目录致命错误：require_once()：无法打开所需的“fpdf_tpl.php” (include_path='.:/usr/share/php:/usr/share/pear') 在第 27 行的 /var/www/PDFBuilder/fpdi142/fpdi.php

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:46:31.220

找到了解决方案。

[您可以从http://www.setasign.de/support/manuals/fpdi/fpdi/](http://www.setasign.de/support/manuals/fpdi/fpdi/)下载 PDF_TPL 文件 (PDF_TPL-1.2.1.zip)

只需将其解压缩并将其放在与 fpdi 相同的文件夹中，就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:32:35.370

使用相对路径，例如，如果您的代码在 fpdf17 中，您的要求应该是：

```
require('fpdf.php');
require('../fpdi142/fpdi.php'); 
```

# freebase - 自由基地死亡年

> ID：13011401
> 
> 赞同：1
> 
> 时间：2012-10-22T12:23:03.767
> 
> 标签：freebase

免费用户！

我试图得到这个结果：

*   2011 年死亡的所有人名单
*   2011年死亡的所有美国人名单

我使用带有简单查询的python代码：

```
import freebase
r = freebase.mqlreaditer({"/people/deceased_person/date_of_death":'2011', "name":None})
for i in r:
    print i 
```

但是输出给了我 20 个名字。将结果与本文 (http://en.wikipedia.org/wiki/Category:2011_deaths) 进行比较 - 5,612 个名称，显然有一些错误。

任何想法如何获得正确的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:41:56.473

您编写的查询：

```
{
  "name": null,
  "/people/deceased_person/date_of_death": "2011"
}​ 
```

这只查找死亡日期在 Freebase 中记录为“2011”的人。您打算查询的是在 2011 年 1 月 1 日或之后但在 2012 年 1 月 1 日之前死亡的人。该查询如下所示：

```
{
  "id": null,
  "name": null,
  "type": "/people/deceased_person",
  "date_of_death": null,
  "date_of_death>=": "2011",
  "date_of_death<": "2012"
}​ 
```

您可以进一步细化该查询以仅搜索这样的美国人：

```
{
  "id": null,
  "name": null,
  "type": "/people/deceased_person",
  "date_of_death": null,
  "date_of_death>=": "2011",
  "date_of_death<": "2012",
  "/people/person/nationality": {
    "id": "/en/united_states"
  }
}​ 
```

请注意，由于国籍是 /people/person 而不是 /people/deeased_person （声明的类型）的一部分，因此我需要使用完整的属性 ID，而 date_of_death 可以使用缩短的 ID。

# scala - Twitter Scalding 中的 SQL Union 等效项

> ID：13011402
> 
> 赞同：4
> 
> 时间：2012-10-22T12:23:04.607
> 
> 标签：scala, mapreduce, scalding

我需要加入 2 个具有相同字段集的管道，即（'id，'groupName，'name），与 SQL UNION 的工作方式相同。如何在 Twitter Scalding 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:32:33.560

使用 ++ 连接管道，然后使用 project 摆脱 id 字段。

如果这个答案太简洁，请告诉我，我会尝试扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T22:13:52.610

要在三组字段上连接两个管道，您首先想知道哪个管道在较小的数据集上运行：

```
 largerPipe1.joinWithSmaller(('id1, 'groupName1, 'name1) -> ('id2, 'groupName2, 'name2), smallerPipe2) 
```

请注意，字段名称不需要相同。您只需要将它们按相同的顺序排列即可。结果将仅包含 largePipe1 中的符号名称。

请注意下面的评论：++ 连接操作只是将数据从一个管道附加到另一个管道。这不是一个连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T13:36:33.493

def ++[U >: T](其他: TypedPipe[U]): TypedPipe[U]

合并两个 TypedPipes（不保证顺序） 这仅在执行组（或连接）时实现。

# wpf - Caliburn Micro，绑定和通知

> ID：13011406
> 
> 赞同：5
> 
> 时间：2012-10-22T12:23:21.193
> 
> 标签：wpf, binding, caliburn.micro

经过几个月的 WPF 实践后，我决定试一试 Caliburn Micro。我有几件事情我不能上班。我将首先发布代码，请参阅下面的问题/问题：

```
public class MainViewModel : PropertyChangedBase
{
    BindableCollection<PlayerProfile> _playerProfiles = staticInfos.Load();

    public BindableCollection<PlayerProfile> PlayerProfiles {
        get { return _playerProfiles; }
        set { 
            _playerProfiles = value;
            NotifyOfPropertyChange(() => PlayerList);
        }
    }

    string _tb_AddPlayer;
    public string TB_AddPlayer {
        get { return _tb_AddPlayer; }
        set { 
            _tb_AddPlayer = value;
            NotifyOfPropertyChange(() => TB_AddPlayer);
            NotifyOfPropertyChange(() => CanAddPlayer);
        }
    }

    List<string> _pl = new List<string>(); 
    public List<string> PlayerList {
        get{
            foreach (PlayerProfile p in PlayerProfiles) {
                if (!_pl.Contains(p.Name)) _pl.Add(p.Name);
            }
            return _pl;               
        }
        set {
            _pl = value;
            NotifyOfPropertyChange(()=>PlayerList);
        }
    }

    // Dummy Test String
    string _test;
    public string Test { 
        get { return _test; } 
        set { 
            _test = value; 
            NotifyOfPropertyChange(() => Test); 
        }
    }

    // Button Action
    public void AddPlayer() {
         _playerProfiles.Add(new PlayerProfile(TB_AddPlayer));
         Test = "Pressed";
         NotifyOfPropertyChange(() => PlayerProfiles);
    }

    public bool CanAddPlayer {
        get { return true; }
        // doesnt work: get { return !string.IsNullOrWhiteSpace(TB_AddPlayer); }
    }
} 
```

所以这里是：我使用绑定约定，即 MainView 中的属性应该绑定到视图中同名的元素。

*   首先，请注意这`PlayerList`只是`PlayerProfiles`我创建的玩家名称列表，因为当绑定到 a`Combobox`时，当我命名时它们不会出现`Combobox PlayerProfiles`，但是当我通过列表并命名时它们会出现`PlayerList`- 虽然我已经覆盖`ToString`了`PlayerProfile class`. 为什么？这看起来很笨拙...（如果您想知道的话，该`staticInfos.Load()`方法会填充`PlayerProfiles`几个虚拟名称...）

*   当我在文本框中输入内容（称为`TB_AddPlayer`）并按下按钮（称为`AddPlayer`）时，会出现测试字符串，所以我知道发生了操作，但新名称没有出现在组合框中

*   此外，如果我使用属性中的注释行`CanAddPlayer`，则永远不会启用该按钮，如果我开始键入，也不会在文本框失去焦点且其中包含文本时。为什么？

抱歉这些基本问题，我已经盯着“Hello World”caliburn 示例看了好几个小时，看不到我遗漏了什么……谢谢。提前！

编辑：这是 .xaml

```
<UserControl x:Class="MixGameM8_MVVM.Views.MainView"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:MixGameM8_MVVM.Views">

<UserControl.Resources>
    <Style TargetType="TextBlock" x:Key="TB_A">
        <Setter Property="Margin" Value="5,5,5,5" />
        <Setter Property="HorizontalAlignment" Value="Center" />
        <Setter Property="FontSize" Value="15" />
    </Style>

    <!-- ... Some more of this kind -->
</UserControl.Resources>

<Grid>
    <!-- ... Grid definitions -->
    <Border Style="{StaticResource Border_A}" Grid.Row="0" Grid.Column="0">
        <StackPanel Name="SP_Controls">
            <TextBlock Style="{StaticResource TB_A}" Text="Controls"/>
            <ComboBox Style="{StaticResource CB_A}" Name="PlayerProfiles"/>
            <StackPanel Orientation="Horizontal">
                <TextBox Style="{StaticResource TBox_A}" Name="TB_AddPlayer" MinWidth ="100" />
                <Button Style="{StaticResource Button_AddPlayer}" Content="Add Player" Name="AddPlayer" />
             </StackPanel>
        </StackPanel>
    </Border>

<!-- ... And some more cells in the grid, one containing the dummy textbox -->

</Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T12:34:09.623

首先，我将首先删除您的`PlayerList`财产，然后像这样更新您的`PlayerProfiles`财产：

```
 public BindableCollection<PlayerProfile> PlayerProfiles {
    get { return _playerProfiles; }
    set { 
        _playerProfiles = value;
        NotifyOfPropertyChange(() => PlayerProfiles);
    }
} 
```

接下来，我不会将您的视图模型属性称为描述它们如何呈现的东西，即更改`TB_AddPlayer`为just `AddPlayer`（或者更好`PlayerName`的是，它就是这样的东西）。

接下来，如果你调用你的 ComboBox `PlayerProfiles`，那么绑定应该通过约定自动发生。在您的 AddPlayer 方法中，您希望通过您的属性添加新的玩家资料，而不是支持字段：

改变：

```
public void AddPlayer() {
     _playerProfiles.Add(new PlayerProfile(TB_AddPlayer));
     Test = "Pressed";
     NotifyOfPropertyChange(() => PlayerProfiles);
} 
```

到：

```
public void AddPlayer() {
     this.PlayerProfiles.Add(new PlayerProfile(this.PlayerName));
} 
```

因为 PlayerProfiles 是一个 BindableCollection，所以将执行更改通知，并且您的 ComboBox 将被更新。

此外，我总是会为您的支持字段明确指定访问修饰符，即`private string _playerName;`不仅仅是字符串`_playerName;`

尝试这些更改，如果仍有问题，请更新问题中的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:59:40.570

我想我得到了答案

在您的文本框中使用 updatesourcetrigger=property changed The Can Execute 没有更新，因为您没有使用取决于（或依赖项不记得名称）属性。

组合框未更新导致您应该将其绑定到可绑定集合。

# c# - DataGridViewLinkColumn的点击事件如何处理

> ID：13011407
> 
> 赞同：15
> 
> 时间：2012-10-22T12:23:23.290
> 
> 标签：c#, winforms, datagridview

我在 C# 中有一个 WinForm。的一列`DataGridView`是类型`DataGridViewLinkColumn`。如何处理每一列的点击事件？

此代码似乎不起作用：

```
private void UserDataTable_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {
            //Code here
        } 
```

例如，如果我有 10 行，每当我单击与列“ `DataGridViewLinkColumn`”对应的每一行的内容时，我应该能够处理它。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T12:26:31.453

为什么不使用事件处理程序，您可以使用`CellClick`引用每一行的对应列，如下所示：`e.RowIndex``e.ColumnIndex`

```
private void dataGridView1_CellClick(object sender,
    DataGridViewCellEventArgs e)
{
    // here you can have column reference by using e.ColumnIndex
    DataGridViewImageCell cell = (DataGridViewImageCell)
        dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex];

    // ... do something ...
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-24T16:52:35.400

实际上，我相信 Kiran 使用`CellContentClick`. 当您使用它时，它不会在单击单元格的空白区域时触发，只有在单击其实际内容时才会触发。因此，如果您有`DataGridViewLinkColumn`，单击链接时它将触发。如果你有一个`DataGridViewTextBoxColumn`它会在单击单元格中的文本时触发。如果单击空白区域，它将不会触发，或者如果单元格为空，则该单元格根本不会触发。

`CellClick`每当单击单元格的任何部分（包括空白部分）时都会触发该事件。@chessofnerd，我不确定为什么这对你不起作用，但我已经对此进行了测试以确保，至少对我来说它完全按预期工作。

Kiran，这让我想知道为什么你`CellContentClick`一开始就没有工作。想到的第一件事是确保您正在向`DataGridViewCellEventHandler`gridview 的 CellContentClick 属性添加一个新属性。例如，如果我的 gridview 标题为 gridVendorInfo，我需要先使用以下代码：

```
this.gridVendorInfo.CellContentClick += new System.Windows.Forms.DataGridViewCellEventHandler(this.gridVendorInfo_CellContentClick); 
```

现在我需要在我的代码中使用那个确切的方法来实际捕获它：

```
private void gridVendorInfo_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {
            string vendorName = "";
            if (e.ColumnIndex == 0)
            {
                vendorName = gridVendorInfo.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString();
            }
        } 
```

如果您不为 gridview 的 CellContentClick 事件分配一个新的事件处理程序并添加拼写完全相同的方法，它将不会触发。希望这会有所帮助！只需转到您的表单，单击您的网格视图，转到“属性”窗口中的“事件”选项卡，找到 CellContentClick，然后双击它右侧的空间，就容易多了。VS 将为您完成创建方法和为 gridvew 分配新事件处理程序的所有工作。然后你只需要进入该方法并添加一些代码和一个断点来查看它是否正在触发，它应该是。

# ruby-on-rails - 从 rails 项目中提取 I18n 翻译键

> ID：13011410
> 
> 赞同：2
> 
> 时间：2012-10-22T12:23:34.187
> 
> 标签：ruby-on-rails, internationalization

是否有一些 gem 或工具可用于解析我的代码并将 I18n 密钥提取到 yml 文件？

所以如果我在代码中有：

```
<%= t("homepage.header", default: "Cool website") %> 
```

它将添加到 yml 文件中

```
homepage:
  header: "Cool website" 
```

GetText 可以做到，但对于我的项目，我们现在使用默认的 rails 设置。当我需要新的翻译键时，我不得不手动更新 yml 文件，这让我很困扰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-03T17:11:29.390

对于从 Google 来到这里的任何人来说，现在所有这些东西都有一块宝石。

[https://github.com/glebm/i18n-tasks](https://github.com/glebm/i18n-tasks)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T12:58:07.500

如果您在`default:`任何地方都在使用，那么有一个可能适合您的解决方案：

*   前往[Locale](http://www.localeapp.com)并创建一个帐户和一个新项目
*   在您的 Rails 项目中设置 localeapp gem，使用 API 密钥等配置它...
*   默认情况下，当您访问带有示例中的翻译调用的页面时，它会将翻译发送到 Locale 服务器，并将其同步回您的 YAML。
*   或者，如果您有良好的测试覆盖率，您可以配置 localeapp 以在测试环境中运行并运行您的测试套件。

不理想，也不是 Locale 的主要目的（避免手动编辑 YAML 文件），但它应该在这种情况下工作。

全面披露：我共同创立了 Locale。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:30:17.917

我还没有听说过这种用于 Ruby on Rails 的工具，但我很确定它存在。另一方面，您可以自己创建一个 - 可以使用相对简单的正则表达式来完成，例如：

```
\s+t\(\"(?<key>.*?)\"\s*,\s*default:\s*\"(?<value>.*?)\"\) 
```

然后，您所要做的就是访问命名组（上例中的键和值）并将其写入 YAML 文件。根据您要用于捕获此正则表达式的编程语言，您可能需要在正则表达式前面添加 (?s) 或 (?-s) 以允许将行结尾视为空格（即多行声明） .

# iphone - 如何将字符串对象传递给 ABNewPersonViewController.h 的名称字段？

> ID：13011412
> 
> 赞同：3
> 
> 时间：2012-10-22T12:23:43.640
> 
> 标签：iphone, objective-c, abaddressbook, addressbookui

我正在开发名片阅读器应用程序。当我读取卡片时，我从 OCR 输出中得到一个字符串对象。我将字符串分隔为不同的其他字符串，例如姓名、地址、电话号码、电子邮件和网址。但是我的问题是我无法在`ABNewPersonViewController`类的相应字段中发送这些字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:38:08.810

请参阅下面的代码。这是一个详细的代码。

```
-(NSUInteger)addNewContacts_InAddressBook:(NSMutableArray*)contactsToBeAdded
{

    int numContacts=[contactsToBeAdded count];

    if (numContacts==0) 
    {
        return 0;
    }

    int32_t uniqueId;

    @try 
    {
        ABAddressBookRef iphoneAddressBook=ABAddressBookCreate();

        CFErrorRef error = NULL; 

        if(!iphoneAddressBook)
        {
            DLog(@"unable to open addressBook");

            return 0;
        }

        NSDateFormatter *inFormat = [[NSDateFormatter alloc] init];
        [inFormat setDateFormat:@"yyyy-MM-dd"];
        [inFormat setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT"]];
        NSAutoreleasePool* pool=[[NSAutoreleasePool alloc] init];
        NSMutableArray *recordRefArray=[[NSMutableArray alloc] initWithCapacity:numContacts];
        BOOL shouldReleasePool=NO;
        NSAutoreleasePool *innerPool=nil;
        for(int j=0;j<numContacts;j++)
        {
            if((j&255)==0)
            {
                innerPool= [[NSAutoreleasePool alloc] init];
                shouldReleasePool=YES;
            }
            Contact *objContact=[contactsToBeAdded objectAtIndex:j];
            ABRecordRef newPerson = ABPersonCreate();
            if(objContact.mPrefixName!=nil)
            {   
                if([objContact.mPrefixName isEqualToString:@""]==FALSE)
                {
                    ABRecordSetValue(newPerson, kABPersonPrefixProperty, (CFStringRef)objContact.mPrefixName , &error);
                }
            }

            if(objContact.mFirstName!=nil)
            {   
                if([objContact.mFirstName isEqualToString:@""]==FALSE)
                {
                    ABRecordSetValue(newPerson, kABPersonFirstNameProperty, (CFStringRef)objContact.mFirstName , &error);
                }
            }

            if(objContact.mMiddleName!=nil)
            {   
                if([objContact.mMiddleName isEqualToString:@""]==FALSE)
                {
                    ABRecordSetValue(newPerson, kABPersonMiddleNameProperty, (CFStringRef)objContact.mMiddleName , &error);
                }
            }

            if(objContact.mLastName!=nil)
            {   
                if([objContact.mLastName isEqualToString:@""]==FALSE)
                {
                    ABRecordSetValue(newPerson, kABPersonLastNameProperty, (CFStringRef)objContact.mLastName , &error);
                }
            }

            if(objContact.mNickName!=nil)
            {   
                if([objContact.mNickName isEqualToString:@""]==FALSE)
                {
                    ABRecordSetValue(newPerson, kABPersonNicknameProperty, (CFStringRef)objContact.mNickName , &error);
                }
            }

            if(objContact.mSuffixName!=nil)
            {   
                if([objContact.mSuffixName isEqualToString:@""]==FALSE)
                {
                    ABRecordSetValue(newPerson, kABPersonSuffixProperty, (CFStringRef)objContact.mSuffixName , &error);
                }
            }

            // Storing user photo into address book
            if(objContact.mUserPhotoData)
            {
                if ([objContact.mUserPhotoData length] > 0)
                    ABPersonSetImageData(newPerson, (CFDataRef)objContact.mUserPhotoData, &error);
            }

            ContactProperty *objContactProperty;
            int numProps=[objContact.mPropertyArray count];

            ABMutableMultiValueRef multiPhone = ABMultiValueCreateMutable(kABMultiStringPropertyType);
            ABMutableMultiValueRef multiEmail = ABMultiValueCreateMutable(kABMultiStringPropertyType);
            ABMutableMultiValueRef multiUrl = ABMultiValueCreateMutable(kABMultiStringPropertyType);
            NSMutableDictionary *addressDictionary=[[NSMutableDictionary alloc] init];
            ABMutableMultiValueRef multiAddress = ABMultiValueCreateMutable(kABMultiDictionaryPropertyType);

            BOOL notFirstTime=NO;
            int currentPropertyIndex=-1;
            NSString *displayName;
            ABMutableMultiValueRef multiDate = ABMultiValueCreateMutable(kABMultiStringPropertyType);
            ABMutableMultiValueRef multiIM = ABMultiValueCreateMutable(kABMultiDictionaryPropertyType);

            NSMutableDictionary *IMDictionary;

            for(int i=0;i<numProps;i++)
            {

                objContactProperty=[objContact.mPropertyArray objectAtIndex:i];

                int PID=objContactProperty.mContactPropId;

               // if([objContactProperty.mContactDataType compare:@"Text"]==NSOrderedSame)
                //{

                if (PID==3) 
                {

                    if(objContactProperty.mContactPropertyString)
                    {
                      //  DLog(@"Saving Into AddressBook: Label : %@  Value : %@",objContactProperty.mDisplayName,objContactProperty.mContactPropertyString);
                        ABRecordSetValue(newPerson, kABPersonOrganizationProperty, (CFStringRef)objContactProperty.mContactPropertyString, &error);
                    }

                }
               // }

            ///\/\/\/\/\/\/\/\/

                if(PID==1901)
                {
                        if(objContactProperty.mContactPropertyString)
                        {
                       //     DLog(@"Saving Into AddressBook: Label : %@  Value : %@",objContactProperty.mDisplayName,objContactProperty.mContactPropertyString);
                            ABRecordSetValue(newPerson, kABPersonNoteProperty, (CFStringRef)objContactProperty.mContactPropertyString, &error);
                        }

                 }

                if(PID==4)
                {   
                        if(objContactProperty.mContactPropertyString)
                        {
                 //           DLog(@"Saving Into AddressBook: Label : %@  Value : %@",objContactProperty.mDisplayName,objContactProperty.mContactPropertyString);
                            ABRecordSetValue(newPerson, kABPersonFirstNamePhoneticProperty, (CFStringRef)objContactProperty.mContactPropertyString, &error);
                        }

                }

                if(PID==5)
                {   
                    if(objContactProperty.mContactPropertyString)
                    {
                        //           DLog(@"Saving Into AddressBook: Label : %@  Value : %@",objContactProperty.mDisplayName,objContactProperty.mContactPropertyString);
                        ABRecordSetValue(newPerson, kABPersonLastNamePhoneticProperty, (CFStringRef)objContactProperty.mContactPropertyString, &error);
                    }

                }

                if(PID==6)
                {   
                    if([objContactProperty.mContactPropertyString length]>=1)
                    {
                        //           DLog(@"Saving Into AddressBook: Label : %@  Value : %@",objContactProperty.mDisplayName,objContactProperty.mContactPropertyString);
                        ABRecordSetValue(newPerson, kABPersonJobTitleProperty, (CFStringRef)objContactProperty.mContactPropertyString, &error);
                    }

                }

                if(PID==7)
                {   
                    if(objContactProperty.mContactPropertyString)
                    {
                        //           DLog(@"Saving Into AddressBook: Label : %@  Value : %@",objContactProperty.mDisplayName,objContactProperty.mContactPropertyString);
                        ABRecordSetValue(newPerson, kABPersonDepartmentProperty, (CFStringRef)objContactProperty.mContactPropertyString, &error);
                    }

                }

            //Adding phone numbers

                //if([objContactProperty.mContactDataType compare:@"Phone"]==NSOrderedSame)
                if(PID>10 && PID<=200)
                {
      //              if(objContactProperty.mContactPropertyString)
      //              {
              //          DLog(@"Label : %@  Value : %@",objContactProperty.mDisplayName,objContactProperty.mContactPropertyString);
                        ABMultiValueAddValueAndLabel(multiPhone, objContactProperty.mContactPropertyString, (CFStringRef)objContactProperty.mDisplayName, NULL);
     //               }
                }

            //Adding emails

         //       if([objContactProperty.mContactDataType compare:@"Email"]==NSOrderedSame)
                if(PID>300 && PID<=320)
                {
                        ABMultiValueAddValueAndLabel(multiEmail, objContactProperty.mContactPropertyString, @"home", NULL);
                }
                else if(PID>320 && PID<=340)
                {
                    ABMultiValueAddValueAndLabel(multiEmail, objContactProperty.mContactPropertyString, @"work", NULL);
                }
                else if(PID>340 && PID<=400)
                {
                    ABMultiValueAddValueAndLabel(multiEmail, objContactProperty.mContactPropertyString, (CFStringRef)objContactProperty.mDisplayName, NULL);
                }

            //Adding web URLs

     //           if([objContactProperty.mContactDataType compare:@"Url"]==NSOrderedSame)
                if(PID>500  && PID<=600)
                {
     //               if(objContactProperty.mContactPropertyString)
     //               {
                        ABMultiValueAddValueAndLabel(multiUrl, objContactProperty.mContactPropertyString, (CFStringRef)objContactProperty.mDisplayName, NULL);
     //               }
                }

            //ADDRESSES

                if (PID>700 && PID<=1300) 
                {

                    int propertyIndex=(PID-1)/10;  //To adjust for 710 to fall into category of (710-1)/10=70 instead of 71.

                    if (propertyIndex!=currentPropertyIndex) 
                    {
                        if (notFirstTime) 
                        {
                            bool didAddAddress;

                            if(currentPropertyIndex*10<901)
                                didAddAddress = ABMultiValueAddValueAndLabel(multiAddress, addressDictionary, kABHomeLabel, NULL);
                            else if(currentPropertyIndex*10<1101)
                                didAddAddress = ABMultiValueAddValueAndLabel(multiAddress, addressDictionary, kABWorkLabel, NULL);
                            else
                                didAddAddress = ABMultiValueAddValueAndLabel(multiAddress, addressDictionary, displayName, NULL);

                            [addressDictionary release];
                            addressDictionary = [[NSMutableDictionary alloc] init];
                        }

                        currentPropertyIndex=propertyIndex;

                        notFirstTime=YES;
                    }

                    displayName=[NSString stringWithString:objContactProperty.mDisplayName];

                    switch (PID%10) 
                    {
                        case 1:

                            [addressDictionary setObject:objContactProperty.mContactPropertyString forKey:(NSString *) kABPersonAddressStreetKey];
                            break;

                        case 2:
                            [addressDictionary setObject:objContactProperty.mContactPropertyString forKey:(NSString *)kABPersonAddressCityKey];
                            break;

                        case 3:
                            [addressDictionary setObject:objContactProperty.mContactPropertyString forKey:(NSString *)kABPersonAddressStateKey];
                            break;

                        case 4:
                            [addressDictionary setObject:objContactProperty.mContactPropertyString forKey:(NSString *)kABPersonAddressZIPKey];
                            break;

                        case 5:
                            [addressDictionary setObject:objContactProperty.mContactPropertyString forKey:(NSString *)kABPersonAddressCountryKey];
                            break;

                        default:
                            break;
                    }
                }

                //DATE AND BIRTHDAY

                    NSDate *ddate;

                    if (PID>1400 && PID<=1500) 
                    {
                        switch (PID) 
                        {
                            case 1401:
                                ddate=[inFormat dateFromString:[objContactProperty.mContactPropertyString substringToIndex:10]];
                                ABRecordSetValue(newPerson, kABPersonBirthdayProperty, ddate , &error);
                                break;

                            default:
                                ddate=[inFormat dateFromString:[objContactProperty.mContactPropertyString substringToIndex:10]];
                                ABMultiValueAddValueAndLabel(multiDate, ddate, (CFStringRef)objContactProperty.mDisplayName, NULL);
                                break;
                        }
                    }

                //INSTANT MESSAGE

                    if (PID>1600 && PID<=1800) 
                    {

                        switch (PID%2) 
                        {
                            case 1:
                                IMDictionary=[[NSMutableDictionary alloc] init];
                                [IMDictionary setObject:objContactProperty.mContactPropertyString forKey:(NSString *) kABPersonInstantMessageUsernameKey];
                                break;
                            case 0:
                                [IMDictionary setObject:objContactProperty.mContactPropertyString forKey:(NSString *) kABPersonInstantMessageServiceKey];
                                ABMultiValueAddValueAndLabel(multiIM, IMDictionary, (CFStringRef)objContactProperty.mDisplayName, NULL);
                                [IMDictionary release];
                            default:
                                break;
                        }
                    }

            }

            if ([addressDictionary count]!=0) 
            {
                bool didAddAddress;

                NSRange range1,range2;

                range1=[displayName rangeOfString:@"home" options:NSCaseInsensitiveSearch];
                range2=[displayName rangeOfString:@"work" options:NSCaseInsensitiveSearch];

                if (range1.location!=NSNotFound)
                    didAddAddress = ABMultiValueAddValueAndLabel(multiAddress, addressDictionary, kABHomeLabel, NULL);
                else if (range2.location!=NSNotFound)
                    didAddAddress = ABMultiValueAddValueAndLabel(multiAddress, addressDictionary, kABWorkLabel, NULL);
                else
                    didAddAddress = ABMultiValueAddValueAndLabel(multiAddress, addressDictionary, (CFStringRef)displayName, NULL);
            }
            [addressDictionary release];

            ABRecordSetValue(newPerson, kABPersonAddressProperty, multiAddress, NULL);
            CFRelease(multiAddress);

            DLog(@"Saving Phone Numbers");
            ABRecordSetValue(newPerson, kABPersonPhoneProperty, multiPhone,nil);
            CFRelease(multiPhone);
            ABRecordSetValue(newPerson, kABPersonEmailProperty, multiEmail,nil);
            CFRelease(multiEmail);    
            ABRecordSetValue(newPerson, kABPersonURLProperty, multiUrl,nil);
            CFRelease(multiUrl);
            ABRecordSetValue(newPerson, kABPersonDateProperty, multiDate,nil);
            CFRelease(multiDate);
            ABRecordSetValue(newPerson, kABPersonInstantMessageProperty, multiIM, NULL);
            CFRelease(multiIM);

            bool outcome=ABAddressBookAddRecord(iphoneAddressBook, newPerson, &error);

#ifdef  ENABLE_DEBUG_CONSOLE_OUTPUT           
            if(outcome==FALSE)
                DLog(@"RECORD COULD NOT BE ADDED TO THE ADDRESSBOOK");
#endif

            [recordRefArray addObject:newPerson];
            CFRelease(newPerson);

            if(shouldReleasePool)
            {
                [innerPool release];
                shouldReleasePool=NO;
            }

        }

        DLog(@"Saving AddressBook");
        DBManager *dbManager=[DBManager getInstance];
        [dbManager setFLAGIsSavingAddressBook:YES];
        bool outcome=ABAddressBookSave(iphoneAddressBook, &error);
        [dbManager setFLAGIsSavingAddressBook:NO];
        [[NSNotificationCenter defaultCenter] postNotificationName:ADDRESSBOOK_DONE_SAVING object:nil];

#ifdef  ENABLE_DEBUG_CONSOLE_OUTPUT 
        if(outcome==FALSE)
            DLog(@"ADDRESSBOOK COULD NOT BE SAVED");
#endif

        for(int i=0;i<numContacts;i++)
        {

            uniqueId=ABRecordGetRecordID([recordRefArray objectAtIndex:i]);
            Contact *objContact=[contactsToBeAdded objectAtIndex:i];
            objContact.addressBookId=uniqueId;

            DLog(@"Adding multiple records at once. The LID for the newly added record is: %i",uniqueId);
        }

        [recordRefArray release];

        //Initializing new addressBook id in contact
        //objContact.addressBookId=uniqueId;

        CFRelease(iphoneAddressBook);

        [pool release];

        [inFormat release];

    }
    @catch (NSException * e) 
    {
        DLog(@"Exception in addNewContactInAddressBook ");
    }
    @finally {
    }

    return 0;
//  

    return uniqueId;
    } 
```

# oracle - 如何使用spring jdbc复制表格的一行

> ID：13011414
> 
> 赞同：1
> 
> 时间：2012-10-22T12:23:52.500
> 
> 标签：oracle, spring, jdbc

我需要使用spring jdbc复制除一列之外的一行，该列是另一行的唯一键。即使我检查空值，我也会收到空指针异常。有没有其他好的方法来实现这一目标？帮我。谢谢。请在下面找到我的代码：

```
insert.update(new Object[] { 
                    argModel.getKey(),
                    CommonUtils.isNotNull(argModel.getPage_Key())?argModel.getPage_Key():"",
                    CommonUtils.isNotNull(argModel.getNoteBookRef())?argModel.getNoteBookRef():"", 
                    argModel.getBatchNum(),
                    alStructKey,
                    identifiedStructKey,
                    reactionKey,
                    argModel.getAnalysisType(),
                    CommonUtils.isNotNull(argModel.getSubmitted_Amt())?argModel.getSubmitted_Amt():"0",
                    CommonUtils.isNotNull(argModel.getEstimated_Purity())?argModel.getEstimated_Purity():"0",
                    CommonUtils.isNotNull(argModel.getKey_Nmr_Exp())?argModel.getKey_Nmr_Exp():"",
                    CommonUtils.isNotNull(argModel.getSolvent_Used())?argModel.getSolvent_Used():"",
                    CommonUtils.isNotNull(argModel.getProbe_Used())?argModel.getProbe_Used():"",
                    CommonUtils.isNotNull(argModel.getSamp_Temp())?argModel.getSamp_Temp():"0",
                    CommonUtils.isNotNull(argModel.getAchiral_Purity())?new Float(argModel.getAchiral_Purity()):0.0,
                    CommonUtils.isNotNull(argModel.getChiral_Purity())?new Float(argModel.getChiral_Purity()):0.0,
                    CommonUtils.isNotNull(argModel.getPeak1_Amt())?argModel.getPeak1_Amt():"0",
                    CommonUtils.isNotNull(argModel.getPeak2_Amt())?argModel.getPeak2_Amt():"0",
                    CommonUtils.isNotNull(argModel.getRequestId())?argModel.getRequestId():"0",
                    CommonUtils.isNotNull(argModel.getSubmissionComments())?argModel.getSubmissionComments():"",
                    CommonUtils.isNotNull(argModel.getStatusComments())?argModel.getStatusComments():"",
                    CommonUtils.isNotNull(argModel.getCcList())?argModel.getCcList():"",
                    argModel.isSaveSampleForPickUp()?"YES":"NO",
                    CommonUtils.isNotNull(argModel.getAnalyticalContact())?argModel.getAnalyticalContact():"",
                    argModel.getSubmittedOn(),
                    argModel.getAcceptedOn(),
                    CommonUtils.isNotNull(argModel.getSubmissionStatus())?argModel.getSubmissionStatus():"",
                    CommonUtils.isNotNull(argModel.getSubmitter())?argModel.getSubmitter():"",
                    CommonUtils.isNotNull(argModel.getTherapetuicArea())?argModel.getTherapetuicArea():"",
                    CommonUtils.isNotNull(argModel.getProjectCode())?argModel.getProjectCode():"",
                    CommonUtils.isNotNull(argModel.getCro())?argModel.getCro():"",
                    CommonUtils.isNotNull(argModel.getSiteCode())?argModel.getSiteCode():"",
                    CommonUtils.isNotNull(argModel.getAnalysisXml())?StorageUtils.toClobObject(CommonUtils.replaceSpecialCharsinXML(argModel.getAnalysisXml())):""
                    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:57:28.417

```
insert into submitted_batch select (your_new_page_key, n1, n2, n3, ...) from submitted_batch where analytical_page_key='24695d63ac1e31a8730de255639e5b2c8f7972d8'; 
```

其中 your_new_page_key 是您的新键，n1, n2, n3, ... 都是非主键列。

# android - 在 Android/PhoneGap 应用程序中使用评论框

> ID：13011415
> 
> 赞同：5
> 
> 时间：2012-10-22T12:23:53.153
> 
> 标签：android, cordova, facebook-comments

我的问题在于 Facebook SDK、Android、PhoneGap 和评论框。

我对 Facebook SDK 不够熟悉，所以我真的知道使用评论框的两种方式之间的区别是什么，但似乎有两种不同的方式可以包括对“页面”的评论。至少它们似乎会产生不同类型的错误。

症状之一是，使用“旧”方式执行此操作时，评论框 iframe 会出现问题，因为“协议、主机和端口必须匹配”或类似内容而拒绝请求。该页面来自“file://...”，而 iframe 显然来自 Facebook（http 和 facebook.com）。

旧的方法是这样做：http: [//developers.facebook.com/docs/reference/plugins/comments/](http://developers.facebook.com/docs/reference/plugins/comments/)

症状二是，使用“新”方式执行此操作时，您的 API 只是拒绝调用。API 只是告诉我们应用程序配置不正确，或类似情况。显然我们无法“正确”配置它。对于移动网站，您需要服务的 url（来自移动设备的本地“file://...”）与配置的任何内容相匹配，另一方面，不能将其设置为“ http”或“https”。对于 Android 应用程序，这也是不可能的，因为 Facebook 想要启动我们应用程序的活动，然后将用户重定向回开始。或者其他的东西。

使用新方法是这样做：[https ://developers.facebook.com/blog/post/472/](https://developers.facebook.com/blog/post/472/)

有没有人能够解决这个问题，或者它是否需要 Facebook 中的应用程序的“PhoneGap”类型以减少对请求的限制？

# c# - 如何在 Web 浏览器中显示 xml 文件？

> ID：13011417
> 
> 赞同：1
> 
> 时间：2012-10-22T12:24:03.610
> 
> 标签：c#, .net, xml

我在 c# 中使用此控件创建了一个普通的 xml 文件：

```
XmlTextWriter writer = new XmlTextWriter("XMLFile.xml", System.Text.Encoding.UTF8); 
```

＆该文件已正确创建，并且具有特定的标签和所有内容。[我跟着这个[教程]](http://csharp.net-informations.com/xml/how-to-create-xml.htm)

但我希望将文件在线发送，以便其他服务可以使用它....

所以，我尝试了这个：

```
XmlTextWriter writer = new XmlTextWriter(Response.OutputStream, System.Text.Encoding.UTF8); 
```

但这会在没有任何标签的浏览器上输出一个奇怪的文件......那么我怎样才能将文件流作为普通的 xml 文件呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:13:46.967

XmlTextWriter writer = new XmlTextWriter(Response.OutputStream, System.Text.Encoding.UTF8); writer.WriteStartDocument(true); writer.Formatting = Formatting.Indented; writer.Indentation = 2;

```
 writer.WriteStartElement("table");
    createNode("1","Product 1","1000",writer);
    createNode("2", "Product 2", "2000", writer);
    createNode("3", "Product 3", "3000", writer);
    createNode("4", "Product 4", "4000", writer);
    writer.WriteEndElement();
    writer.WriteEndDocument();
    writer.Close();
    Response.ContentType = "text/xml";
    Response.End();                            --------did you remember that part? 
```

[参考](http://www.dotnetperls.com/outputstream)

# java - Android 位图复用

> ID：13011424
> 
> 赞同：0
> 
> 时间：2012-10-22T12:24:36.587
> 
> 标签：java, android, bitmap, garbage-collection, reusability

我是安卓新手！我对 Android 的 SDK 有一些巨大的问题，因为我正在开发一个使用巨大位图（> 1200 * 1000）的应用程序，问题是在应用程序期间我需要多个相同大小的图层/位图（其中 3-5 个） . 问题是内存堆在这些分配之一上消耗得非常快，并且触发了 OutOfMemory 异常。

好的部分是我不需要同时使用所有位图。

我尝试了 recycle() 方法调用，尽管我知道它已经过时了，因为位图的内存现在驻留在堆上，而不是本机内存上。我还尝试从特定位图中删除所有引用，甚至手动调用 System.gc() 但没有用，无法删除位图。好吧，也许会有我不知道的内存泄漏，尽管我对此表示怀疑。

我尝试了各种解决方案，但都没有奏效。

对我来说最好的选择是重用位图，但是 BitmapFactory 的解码方法只知道分配一个消耗内存的新位图。

我的问题是，你知道重用位图像素（覆盖位图像素而不分配另一个位图/像素数组）的方法吗？问题是我不能驻留在 GarbageCollector 解决方案上，因为我的应用程序中有特定时刻我必须确定这些位图已从内存中删除/其他位图不会被分配。

另一种解决方案是：您知道一种直接在 sdcard 上绘制一些位图而不通过堆内存的方法吗？当我尝试分配一个大位图（原始大小的两倍）来连接其他两个已处理的位图时，它会崩溃……这就是我要问的原因。是否有可能直接从数据流中实例化 Canvas 或其他绘图对象？

其他解决方案是使用虚拟交换内存之类的东西，它可以模拟堆内存，但在 SDCARD 或其他东西上进行缓存。但也找不到这样做的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:37:23.127

Write a separate class for performing Custom Bitmap operations:

```
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

class BitmapLoader
{
public static int getScale(int originalWidth,int originalHeight,
   final int requiredWidth,final int requiredHeight)
{
    //a scale of 1 means the original dimensions 
    //of the image are maintained
    int scale=1;

    //calculate scale only if the height or width of 
    //the image exceeds the required value. 
    if((originalWidth>requiredWidth) || (originalHeight>requiredHeight)) 
    {
        //calculate scale with respect to
        //the smaller dimension
        if(originalWidth<originalHeight)
            scale=Math.round((float)originalWidth/requiredWidth);
        else
          scale=Math.round((float)originalHeight/requiredHeight);

    }

    return scale;
}

public static BitmapFactory.Options getOptions(String filePath,
        int requiredWidth,int requiredHeight)
{

    BitmapFactory.Options options=new BitmapFactory.Options();
    //setting inJustDecodeBounds to true
    //ensures that we are able to measure
    //the dimensions of the image,without
    //actually allocating it memory
    options.inJustDecodeBounds=true;

    //decode the file for measurement
    BitmapFactory.decodeFile(filePath,options);

    //obtain the inSampleSize for loading a 
    //scaled down version of the image.
    //options.outWidth and options.outHeight 
    //are the measured dimensions of the 
    //original image
    options.inSampleSize=getScale(options.outWidth,
            options.outHeight, requiredWidth, requiredHeight);

    //set inJustDecodeBounds to false again
    //so that we can now actually allocate the
    //bitmap some memory
    options.inJustDecodeBounds=false;

    return options;

}

public static Bitmap loadBitmap(String filePath,
        int requiredWidth,int requiredHeight){

    BitmapFactory.Options options= getOptions(filePath,
            requiredWidth, requiredHeight);

    return BitmapFactory.decodeFile(filePath,options);
}
} 
```

Then from your activity, call `Bitmap reqBitmap = loadBitmap(String filePath,int requiredWidth,int requiredHeight)` method of this class providing the `filepath` of the bitmap obtained from the sd card, and setting the requiredWidth and requiredHeight to the dimensions you wish to scale the bitmap to. Now use the `reqBitmap`.

This way large bitmaps will be scaled down before they are loaded into the heap memory. I had the same problem and this solved it for me. :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:52:06.177

我遇到过类似的问题，比如`recycle()`对我不起作用的地方。所以我做了一些像 set 一样微不足道的事情`myBitmap = null`。这向垃圾收集器表明 myBitmap 已被取消引用并且不再需要它。因此它将完成释放堆的工作。然后，您可以继续使用 myBitmap 加载新的位图，而不会出现内存异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:38:40.790

这可能为时已晚，但我建议使用“BitmapFactory.Options.inBitmap”。如果设置，skia 将尝试重新使用此位图来解码图像。 [http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inBitmap](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inBitmap)

# android - 如何在 SharedPreferences 中保存 2 个字符串

> ID：13011425
> 
> 赞同：0
> 
> 时间：2012-10-22T12:24:38.430
> 
> 标签：android, android-widget, save, sharedpreferences

我的小部件配置类中有一个联系人姓名，并使用以下代码保存它：

```
String name= mAppWidgetPrefix.getText().toString();
save(context, mAppWidgetId, name);

static void save(Context context, int appWidgetId, String text) {
SharedPreferences.Editor prefs = context.getSharedPreferences(
PREFS_NAME, 0).edit();
prefs.putString(PREF_PREFIX_KEY + appWidgetId, text);
prefs.commit();
} 
```

我用这个加载它：

```
static String load(Context context, int appWidgetId) {
SharedPreferences prefs = context.getSharedPreferences(PREFS_NAME, 0);
String prefix = prefs.getString(PREF_PREFIX_KEY + appWidgetId, null);

return prefix;

} 
```

它工作正常，但我也想保存电话号码。我需要如何更改代码？

```
String numberPrefix = pickedNumber.getText().toString(); //I need to save this too 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:27:57.543

只需指定另一个键进行保存。像这样：

```
SharedPreferences.Editor prefs = context.getSharedPreferences(
PREFS_NAME, 0).edit();
prefs.putString(PREF_PREFIX_KEY_NUMBER + appWidgetId, text);
prefs.commit(); 
```

# crash - 使用 PLCrashReporter 会禁用 iTunes 连接崩溃报告吗？

> ID：13011434
> 
> 赞同：1
> 
> 时间：2012-10-22T12:25:08.303
> 
> 标签：crash, itunes, app-store-connect, plcrashreporter

我在我的应用程序中使用 PLCrashRepoter。在 iTunes Connect 中，我没有看到任何崩溃报告，但我的应用程序被下载了 50000 多次，因此很可能会发生崩溃/报告。然而 iTunes Connect 没有显示任何报告。

经过非常简单的处理后，我调用`[crashReporter purgePendingCrashReport];`了 App start。所以我想知道 - 我是否通过删除否则 iTunes 将上传到 iTunes 连接的 crashReports？

我查看了代码，似乎 purgePendingCrashReports 只是从它自己创建的字典中删除。

在 PlCrashReporter 中，我还发现：

> NSSetUncaughtExceptionHandler(&uncaught_exception_handler);

这可能是覆盖了 iTunes 连接上传机制所依赖的 defaultHandler 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T14:31:25.817

PLCrashReporter 不会**禁用**Apple 的崩溃报告功能。您在 iTunes Connect 中看不到崩溃报告的原因是它收集和汇总崩溃报告的方式。

1.  只有当用户同意将设备的匿名使用数据发送给 Apple 时，才会发送崩溃报告。这是非常普遍的，大多数用户只是说不。
2.  由于 iOS 5 崩溃报告是直接从设备发送的，在（未知的）间隔内，在设备与 iTunes 同步（很少这样做）之前发送。
3.  崩溃报告仅在每种类型的崩溃通过（未知）数量的崩溃报告之前出现。
4.  您每天只能为您的应用版本刷新一次崩溃数据。

通常至少需要 2 周才能看到 iTunes Connect 中出现的内容，很多时候需要更长的时间，甚至什么都没有出现。

# cakephp - cakePHP 和 nuSOAP，重定向到 app/webroot 并且没有命中控制器/方法，为什么？

> ID：13011437
> 
> 赞同：1
> 
> 时间：2012-10-22T12:25:10.943
> 
> 标签：cakephp, soap, routing, nusoap

我正在使用 CakePHP 版本：1.2.10
和 NuSOAP 版本：0.9.5

我的服务在不是用 Cakephp（旧程序代码）编写的应用程序下工作。
我想在我的 cakePHP 应用程序下移动服务。

旧网站托管在子域上：`www.`
旧服务（按预期工作）位于：

```
<!-- old Procedural code -->
http://www.mysite.org.uk/services/donations.php 
```

* * *

CakePHP 网站托管在子域上：`new.`
新服务（代码几乎完全相同！）位于：

```
<!-- CakePHP - SOAP response doesn't reach here?, redirects to app/webroot -->
http://new.mysite.org.uk/services/registerDonation/ 
```

**问题**
- 当 cakePHP 收到响应时，而不是去`controller/action`( `services/registerDonation`，在这种情况下)。它转到`app/webroot`（它将发件人返回到主页（显然无法处理 SOAP 响应和响应）。

...所以请求失败...`:(`

显然这是 cakePHP 的一个问题以及它如何路由请求，但我坚持如何找到解决这个问题的任何方法？( `noob@cakePHP`)。

会`.htaccess`吗？！还是自定义 cakePHP `route`？！做这项工作？，如果是这样，我该如何实施？

**总结一下..**
如何从外部服务器获取 SOAP 请求以点击 cakePHP 中的 `services/registerDonation`[ `controller/method`]。

如果需要更多信息，只需大喊并留言即可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:31:23.420

我想你需要服务模型：

```
class Services extends AppModel {
   public $name = 'Services';
   public $useTable = false;
} 
```

如果它不存在，蛋糕也不会看到您的服务控制器......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:32:58.693

告诉我你的 webroot 中没有 services 文件夹。它发生在我身上一次......那只会向您显示此文件夹的内容，而不会显示其他内容

# uidatepicker - Jquery datepicker：如何使用自定义值填充 altField，例如（当前日期 30 天）

> ID：13011440
> 
> 赞同：0
> 
> 时间：2012-10-22T12:25:36.223
> 
> 标签：uidatepicker

我必须使用 Jquery datepicker 创建一个日期范围控件。

有两个日期选择器。FromDt 和 EndDt

我正在尝试通过使用 altField 作为 FromDt.Val()+30 来设置 EndDt 的值，并为 FromDt 使用相同的方法......这将是 FromDt.Val()-30。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:33:09.453

下面是一个示例，说明如何使用 jQuery datepicker 根据选择的另一个日期来设置日期字段值。在此示例中，结束日期会自动填充并设置为所选日期之后的 30 天。

```
 <input id="startdate" type="text" class="datepicker"  />
 <input id="enddate" type="text" readonly="readonly" />

$('input[id="startdate"]').datepicker({
    onSelect: function () {
        var start = $('#startdate').val();
        var nights = 30;
        var date = new Date(start);
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();
        var edate = new Date(y, m, d + nights);
        var test = $.datepicker.formatDate('mm/dd/yy', edate);
        $('#enddate').val(test);
    }
}); 
```

这应该使您走上正确的道路。

# html - 是否可以仅使用 [Tab] 键选择子菜单？（仅限 CSS）

> ID：13011443
> 
> 赞同：1
> 
> 时间：2012-10-22T12:25:42.503
> 
> 标签：html, css, focus, accessibility

是否可以仅使用 [Tab] 键在 ul/ol 样式的菜单中选择（激活）子菜单，以便子菜单可见？

我尝试使用 :focus 伪类

```
ul
    li
        a:focus
        +
        ul
            li
                a ... 
```

并选择子菜单：

```
ul
    li
        a (?)
        +
        ul
            li
                a:focus ... 
```

但我无法使用 CSS 选择活动节点

检查这个：http: [//jsfiddle.net/iegik/DKvH2/](http://jsfiddle.net/iegik/DKvH2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:16:37.777

可能**tabindex**适合你。

**HTML**

```
<ul class="links">
        <li tabindex="1">
            <a href="#i1">Item 1</a>
        </li>
            <li tabindex="2">
            <a href="#i2">Item 2</a>
            <ul class="links">
                <li><a href="#i2-1">Item 2.1</a></li>
                <li><a href="#i2-1">Item 2.2</a></li>
            </ul>
        </li>
    </ul> 
```

**CSS**

```
.links > li:focus a + ul{top:auto} 
```

我已经创建了一个示例[http://jsfiddle.net/DKvH2/3/](http://jsfiddle.net/DKvH2/3/)

阅读此[http://css-tricks.com/expanding-images-html5/](http://css-tricks.com/expanding-images-html5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:54:42.953

If you want the complete submenue to be visible when a submenue-item has focus, I don't see a way without Javascript. If it is enough for you, if just the focused element is visible, you could try something like this:

```
.links > li:not(:hover) li a:focus {
    left: 9999em;
    position: relative;
} 
```

This would move the focused element back where it should be, if this didn't already happen via :hover-pseudo-class.

[http://jsfiddle.net/DKvH2/1/](http://jsfiddle.net/DKvH2/1/)

# jquery - 我如何在 jquery 的类鼠标按下时获得 col 索引

> ID：13011445
> 
> 赞同：-1
> 
> 时间：2012-10-22T12:25:45.813
> 
> 标签：jquery

```
<table>
<tr class="csstablelisttd">
    <td>
    </td>
    <td>
        15
    </td>
</tr>
<tr class="csstablelisttd">
    <td>
    </td>
    <td>
        30
    </td>
</tr>
<tr class="csstablelisttd">
    <td>
    </td>
    <td>
        45
    </td>
</tr> 
```

```
$(".csstablelisttd").live('mousedown', function(e) {
    lastRow = $(this).closest("tr")[0].rowIndex;
} 
```

如何在 jQuery 中获取类的鼠标按下时的列索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:28:30.057

要获取列的索引，您可以使用[index](http://api.jquery.com/index/)函数：

```
$(".csstablelisttd td").on('mousedown', function (e) {
    var colIndex = $(this).index();
}); 
```

[示范](http://jsfiddle.net/z9x5g/1/)

请注意，您必须在 上而`td`不是在上检测到事件`tr`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:29:06.717

列索引如下：

```
$('.csstablelisttd').mousedown(function (e) {
    var colIndex = $(e.target).closest('td').index();
}); 
```

我已经更新了你的[小提琴](http://jsfiddle.net/jquYB/1/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T12:29:30.803

您当前的代码正在检查`index`，请`tr`选择`td`：

```
$(".csstablelisttd td").live('mousedown', function(e) {
    idx = $(this).index();
}); 
```

[**示例小提琴**](http://jsfiddle.net/CJm9y/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T12:29:29.593

您正在侦听行本身的事件，根据定义，该事件跨越表中的所有可用列。你可以这样做：

```
$('tr.csstablelisttd td').on('mouseover', function()
{
    var col = $(this).parent().children().index($(this)),
        row = $(this).parent().parent().children().index($(this).parent());

    alert('Row: ' + row + ', Column: ' + col);
}); 
```

# android - SQLite查询SQLiteLog(1)没有这样的Column：

> ID：13011452
> 
> 赞同：6
> 
> 时间：2012-10-22T12:26:07.783
> 
> 标签：android, sqlite, android-cursor

我有3节课。一个设置数据库和表，工作正常。`DBHelper.java`

```
private static final String TAG = "DBHelper";
public static final String DB_NAME = "pat_test.db";
public static final String TABLE5 = "sites";
public static final String S_ID = BaseColumns._ID;
public static final String S_CLIENT = "client_of_site";
public static final String S_POSTCODE = "site_postode";
public static final String S_CON_NAME = "contact_name";
public static final String S_CON_NUM = "contact_tel_num";
public static final String S_NAME = "site_name";
public static final String S_LAST_TEST = "last_test_date";

public DBHelper(Context context) {
    super(context, DB_NAME, null, DB_VERSION);

}

@Override
public void onCreate(SQLiteDatabase db) {

String sql5 = String.format("create table %s (%s INT PRIMARY KEY, %s TEXT, %s TEXT, %s TEXT, %s TEXT, %s INT, %s TEXT)",TABLE5, S_ID, S_CLIENT, S_NAME, S_POSTCODE, S_CON_NAME,S_CON_NUM,S_LAST_TEST); 
Log.d(TAG, "onCreate: " + sql5);
db.execSQL(sql5);
} 
```

下一个有我的功能`DBControl.java`

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;    
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.provider.BaseColumns;

public class DBControl {

public static final String TABLE5 = "sites";

public static final String S_ID = BaseColumns._ID;
public static final String S_CLIENT = "client_of_site";
public static final String S_NAME = "site_name";
public static final String S_POSTCODE = "site_postode";
public static final String S_CON_NAME = "contact_name";
public static final String S_CON_NUM = "contact_tel_num";
public static final String S_LAST_TEST = "last_test_date";

private Context context;
private SQLiteDatabase database;
private DBHelper dbhelper;

public DBControl(Context context) {

    this.context = context;

}

  public DBControl open() throws SQLiteException {

    dbhelper = new DBHelper(context);
    database = dbhelper.getWritableDatabase();
    return this;
}

public void close() {

    dbhelper.close();

}
   public ContentValues createContentValues3(String CLIENT, 
        String NAME,    String POSTCODE, String CON_NAME, 
         long CON_NUM) {

    ContentValues values = new ContentValues();
    values.put(S_CLIENT, CLIENT);
    values.put(S_POSTCODE, POSTCODE);
    values.put(S_CON_NAME, CON_NAME);
    values.put(S_CON_NUM, CON_NUM);
    values.put(S_NAME, NAME);
    return values;
  }  
   public long addSiteDetails( String CLIENT, String NAME,
        String POSTCODE, String CON_NAME, int CON_NUM ) {

    ContentValues siteValues = createContentValues3( CLIENT, NAME,
            POSTCODE, CON_NAME, CON_NUM );

    return database.insert(TABLE5, null, siteValues);
}

public boolean updateSiteDetails(long id, String CLIENT, String NAME,
        String POSTCODE, String CON_NAME , int CON_NUM
        ) {

    ContentValues siteUpdateValues = createContentValues3( CLIENT, NAME,
            POSTCODE, CON_NAME, CON_NUM);

    return database.update(TABLE5, siteUpdateValues, S_ID + "=" + id, null) > 0;
}

}
  public long fetchSiteIdByName(String NAME){

     Cursor dbCursor; 
     long id = 0;

      try { 

     dbCursor = database.query(true, TABLE5, new String []{S_ID}, S_NAME + "= " + NAME  , null, null, null, null, null);
     dbCursor.moveToFirst(); 
     id = dbCursor.getLong(dbCursor.getColumnIndex(S_ID)); } 

      catch (SQLiteException e) { 

          id = -1;

      }

      return id;

      } 
```

我的第三节课是用来打电话查的。但这是我的问题出现的地方，或者在上一课的 fetchSiteIdByName 中。

```
 import android.app.Activity;
  import android.app.Dialog;
  import android.content.Intent;
  import android.database.sqlite.SQLiteException;
  import android.os.Bundle;
  import android.view.Menu;
  import android.view.View;
  import android.view.View.OnClickListener;
  import android.widget.AutoCompleteTextView;
  import android.widget.Button;
  import android.widget.EditText;
  import android.widget.TextView;
  import android.widget.Toast;

  public class activityStartNewTest extends Activity implements OnClickListener {

Button buttonBeginTesting;
private AutoCompleteTextView clientInput;       //Refers to input box for client
private AutoCompleteTextView siteInput;         //Refers to input box for site
private AutoCompleteTextView postcodeInput;     //Refers to input box for postcode
private EditText nameInput;                     //Refers to input box for contact name
private EditText telInput;                      //Refers to input box for contact number
  //    private EditText jobrefInput;                   //Refers to input box for Job reference number

private DBControl dbControl;                

@ Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.start_new_test);
    dbControl = new DBControl(this);
    clientInput = (AutoCompleteTextView) findViewById(R.id.autoCompleteClientNameEdit);
    siteInput = (AutoCompleteTextView) findViewById(R.id.autoCompleteSiteNameEdit);
    postcodeInput = (AutoCompleteTextView) findViewById(R.id.autoCompletePostcodeEdit);
    nameInput = (EditText) findViewById(R.id.editTextContactName);
    telInput = (EditText) findViewById(R.id.editTextContactNum);
  //        jobrefInput = (EditText)findViewById(R.id.editTextJobRef);      

    buttonBeginTesting = (Button) findViewById(R.id.buttonBeginTesting);
    buttonBeginTesting.setOnClickListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onClick(View arg) {

    String clientData = clientInput.getText().toString();
    String siteData = siteInput.getText().toString();
    String postcodeData = postcodeInput.getText().toString();
    String nameData = nameInput.getText().toString();
    String telData = telInput.getText().toString();
     // String jobrefData = jobrefInput.getText().toString();

    Toast toastNotice = new Toast(this);
    Dialog notice = new Dialog(this); // this needs the textview below for displaying
    TextView msgBody = new TextView(this);
    msgBody.setTextSize(20);
    long tempValue = 0;

    switch(arg.getId()){

    case R.id.buttonBeginTesting:

    try{
        int telDataAsNum = Integer.parseInt(telData);
        dbControl.open();

        if((tempValue = dbControl.fetchSiteIdByName(siteData)) != -1) {

            if(dbControl.updateSiteDetails(tempValue, clientData, siteData, postcodeData, nameData, telDataAsNum)){
                notice.setTitle("Site Updated!");
                msgBody.setText("Site detail have been updated instead");
            }
            else{
                notice.setTitle("Update failed!");
                msgBody.setText("Site already Exists, but failed!");
            }
        }
        else{
            long siteID = 0;

            siteID = dbControl.addSiteDetails( clientData, siteData, postcodeData, nameData, telDataAsNum );
            notice.setTitle("Site Added");
            msgBody.setText("Site added at row "+ siteID);
    }
    dbControl.close();

    }
    catch (SQLiteException e){ // Notifies user if SQL error occurred
        e.printStackTrace();
        notice.setTitle("Insert failed");
        msgBody.setText("SQL Error!");
    }
    catch (NumberFormatException e){ // Notifies user if NUM format error occurred
        e.printStackTrace();
        notice.setTitle("Insert failed");
        msgBody.setText("Contact number must be a number!");
    }
    notice.setContentView(msgBody);
    notice.show();
  }
  }
  } 
```

现在，当我运行应用程序时，我用新的细节绝对可以插入数据库。使用 adb 我拉数据库并在 sqlite3 中打开。它显示第一列中为 NULL 且最后一列为 NULL 的所有条目（最后一个尚未发布）。我在编辑框 siteData 的字段中使用了相同的文本，它只是添加了一个新条目而不更新以前的条目。

日志猫显示 SQLiteLog (1) no such column: xxx 其中 xxx 将是进入 autocompleteTextView 的条目。

为什么它要寻找一个以输入的任何文本命名的列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:38:40.080

Surrounding the NAME in fetchSiteIdByName() with single quotes might help.

```
dbCursor = database.query(true, TABLE5, new String []{S_ID}, S_NAME + "= '" + NAME + "'"  , null, null, null, null, null); 
```

I'm not much sure if it will work on SQLite but I've been through same kind of issues in MySQL and it helps. Moreover, when you fetch non-numeric values in the database you surround them in single quotes.

Hope it helps. :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T00:15:25.277

It appears I had 3 different issues but using Lokesh's links and post's help me get a fix.

I modified the SQL string in DBelper.java to this

```
 String sql5 = String.format("create table %s (%s INTEGER PRIMARY KEY **AUTOINCREMENT**, %s TEXT, %s TEXT, %s TEXT, %s TEXT, %s INT, %s TEXT)",
                    TABLE5, S_ID, S_CLIENT, S_NAME, S_POSTCODE, S_CON_NAME,
                    S_CON_NUM, S_LAST_TEST); 
```

And added to the DBControl.java class

```
 **if**(dbCursor.moveToFirst()) id = dbCursor.getLong(dbCursor.getColumnIndex(S_ID)); 
```

Dropping the semicolon after the moveToFirst()). Like I said I'm a real noob but believe this to be correct.

Adding the AUTOINCREMENT had 1 dramatic effect when I uninstalled and reinstalled the application (I could have changed the DB version instead, if I wanted too, I know).

When the Tables were rebuilt they did not have the column _id I had seen before. So I think the SQL string was the reason for my failure. I'm sure I heard somewhere it wasn't required for PRIMARY KEY basecolumns._ID but now I know IT IS.

Thanks Lokesh for your pointers. I couldn't have found the issue without some guidance and I really appreciate it.

I tried to add to the up arrow but don't have enough rating yet. Doh.

Hope this helps others.

# email - 电子邮件退订链接

> ID：13011453
> 
> 赞同：0
> 
> 时间：2012-10-22T12:26:10.013
> 
> 标签：email, client, unsubscribe

我想对现有的邮件列表进行邮寄。我想在电子邮件中包含一个取消订阅链接，当收件人单击该链接时，它将请求一个指向我服务器上脚本的 URL，该脚本将处理取消订阅请求。当收件人收到包含取消订阅链接的电子邮件并单击该链接时，我想从电子邮件的“收件人：”框中提取电子邮件地址并将其作为参数传递给脚本 url，即

退订

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:37:59.153

我会在服务器端而不是客户端做这个。一种体面的方法是在您的服务器上为每个电子邮件收件人生成一个随机 guid。然后为每个收件人生成一个包含其随机 guid 的 URL，或者使用该 guid 作为 URL 参数。当收件人单击电子邮件链接取消订阅时，您可以使用 guid 在数据库中为该收件人执行“取消订阅”操作。

使用 guid 使攻击者无法取消订阅特定收件人。这也使得攻击者很难取消订阅随机收件人，因为 guid 搜索空间非常大。

显然，这仅在您可以在每封电子邮件中生成自定义退订链接时才有效。我们可能需要有关您的环境的更多信息。

# iphone - 用户转换时如何确定图像状态

> ID：13011455
> 
> 赞同：0
> 
> 时间：2012-10-22T12:26:17.907
> 
> 标签：iphone, objective-c, uiimageview, cgaffinetransform, image-rotation

好的，标题可能含糊不清，但这是我想做的。

我的应用程序有两个轮子。用户可以旋转外轮来匹配内轮中的值，从而根据选择的值显示一定的结果。

现在我可以通过设置 transform 属性来很好地旋转图像。但是一旦变形，我怎么知道外轮上选择了什么？

一种方法是获取转换属性并对其进行操作。

但是如何？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:11:39.143

我不会旋转图像本身，而是图像视图的图层。然后，您始终可以访问包含您的图像的图像视图层的变换属性。

好的，这里有一些代码。首先你必须得到 uiimageview 的层

```
CALayer* layer = [self.layer presentationLayer]; 
```

然后你可以像这样从图层 keypath 中读取你需要的任何旋转。

```
float rotationAngle = [[layer valueForKeyPath:@"transform.rotation.z"] floatValue]; 
```

如果这没有帮助，请告诉我。还有另一种获得旋转角度的方法。但它有点复杂;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:34:39.600

您可以根据需要以弧度或度数跟踪图像旋转了多少，然后进行一些触发以找出它指向的位置。从仿射变换中提取旋转非常困难。

**编辑：**这里有一些未经测试的片段可以帮助您入门：

在您的标题中：

```
CGFloat _userRotation; 
```

当您应用旋转时，假设`rotation`是用户旋转量的 CGFloat，以弧度表示：

```
myView.transform = CGAffineTransformMakeRotation(rotation);
_userRotation = rotation; 
```

然后，您需要做的就是使用一些触发来确定您指向的图像。我无法为此提供示例代码，因为数学取决于您要执行的操作，但当前的轮换将在`_userRotation`.

我不确定你问的是不是这个。它有帮助吗？

# c# - 实体 CRM2011 更新导致预删除失败

> ID：13011459
> 
> 赞同：1
> 
> 时间：2012-10-22T12:26:38.370
> 
> 标签：c#, plugins, crm

我正在使用一个插件，它应该在删除实体之前检查某些先决条件是否为真。如果它是假的，我会抛出一个`InvaludPluginExecutionException`. 这工作得很好，但我的问题是，我有另一个插件来处理实体的更新，当然有些条件是真的，并删除了链接的实体。您必须了解在帐户实体中`AccountGroups`存在实体列表。更新插件关心只有一个`AccountGroup`实体被标记为主要实体。如果将新`AccountGroup`实体添加到帐户，插件将删除`AccountGroup`标记为主要实体的旧实体并将新`AccountGroup`实体添加为主要实体。在这种情况下，更新插件会触发预删除插件并取消删除步骤。进一步`InvalidExecutionException`抛出。

有什么方法可以找出插件在哪里触发？例如，更新插件触发删除调用，不应该执行预删除插件？或者还有其他方法吗？

预删除插件代码：

```
[OnPreDelete]
public void PreventDeletion(IServiceProvider serviceProvider){

    var pluginServiceFactory = new PluginServiceFactory(serviceProvider);
    var targetAccount = pluginServiceFactory.Context.GetTargetEntityReference();

    using (var context = new DataContext(pluginServiceFactory.OrganizationService))
    {
        var acgr = (from ac in context.im_customergroupSet
                  where ac.Id == targetAccount.Id
                  select ac).FirstOrDefault();

        if (acgr.im_Primary == true)
        {
            throw new InvalidPluginExecutionException("Primary Account Groups can not be deleted!");
        }
    }            
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:21:11.090

您可以通过使用 SharedVariables 集合在插件之间传递数据来解决此问题，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/gg328579.aspx)。我相信这应该使您的更新插件可以将一些标志添加到删除插件可以读取的 SharedVariables 中，然后您可以从中驱动您的逻辑（例如，如果设置了标志，请不要停止删除记录） .

# python - 为什么我不能直接在 int 对象上调用方法？

> ID：13011461
> 
> 赞同：4
> 
> 时间：2012-10-22T12:26:46.427
> 
> 标签：python

> **可能重复：**
> [访问python int 文字方法](https://stackoverflow.com/questions/10955703/accessing-a-python-int-literals-methods)
> [整数文字是Python 中的对象吗？](https://stackoverflow.com/questions/11802214/integer-literal-is-an-object-in-python)

在 python 中，直接在文字上调用方法或查找属性是可能的，有时甚至是常见的：

```
>>> "-".join("abc")
'a-b-c'
>>> {1: 3, 2: 9}.pop(1)
3
>>> 3j.imag
3.0
>>> 8.0.__add__(8)
16.0 
```

但由于某种原因，这不适用于整数对象：

```
>>> 3.__add__(42)
  File "<stdin>", line 1
    3.__add__(42)
            ^
SyntaxError: invalid syntax 
```

为什么不？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T12:26:46.427

通常情况下，当我开始输入 Stack Overflow 问题时，我会在研究时自己找到可能的答案。好吧，今天我无论如何都会发布这个问题，以及我认为的答案：

它不适用于整数，因为`.`解析器将其解释为小数点。浮点示例有效，因为解析器知道第二个周期必须是属性查找——在这种情况下没有歧义。

# android - 在 onStart 中打开 ASyncTask 时出错

> ID：13011464
> 
> 赞同：0
> 
> 时间：2012-10-22T12:26:52.677
> 
> 标签：android, android-asynctask, progressdialog, onstart

在我的应用程序中，每次启动应用程序时，我都想执行一个 php 脚本并相应地加载应用程序。因此我创建了一个静态布尔变量

```
boolean firstRun = false; 
```

在我的 onStart 中，我添加了以下代码：

```
// If images need to be downloaded, call SProgressAsyncTask class
    public void onStart() {
    super.onStart();

    if (firstRun) {
        sat = new SProgressAsyncTask(this);
        sat.execute("");

        firstRun = false;
    }
} 
```

在索尼的朋友设备上，它可以完美运行，即上面的代码只执行一次，即应用程序启动。在我的 Sony Xperia P 上，每次应用程序进入此主屏幕时都会执行上述代码。当 firstRun 设置为 false 时，为什么上面的代码每次回到这个活动时都会运行。我尝试在我的设备上进行调试，但出现以下错误：

```
10-22 17:41:49.879: E/WindowManager(30235): Activity org.mumbai77.core.Mumbai77Activity has    leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4143a460 that was originally added here 
10-22 17:41:49.879: E/WindowManager(30235): android.view.WindowLeaked: Activity org.mumbai77.core.Mumbai77Activity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4143a460 that was originally added here 
10-22 17:41:49.879: E/WindowManager(30235):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
10-22 17:41:49.879: E/WindowManager(30235):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
10-22 17:41:49.879: E/WindowManager(30235):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
10-22 17:41:49.879: E/WindowManager(30235):     at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
10-22 17:41:49.879: E/WindowManager(30235):     at android.view.Window$LocalWindowManager.addView(Window.java:537)
10-22 17:41:49.879: E/WindowManager(30235):     at android.app.Dialog.show(Dialog.java:278)
10-22 17:41:49.879: E/WindowManager(30235):     at org.mumbai77.components.ProgressAsyncTask.onPreExecute(ProgressAsyncTask.java:56)
10-22 17:41:49.879: E/WindowManager(30235):     at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
10-22 17:41:49.879: E/WindowManager(30235):     at android.os.AsyncTask.execute(AsyncTask.java:511)
10-22 17:41:49.879: E/WindowManager(30235):     at org.mumbai77.core.Mumbai77Activity.onStart(Mumbai77Activity.java:170)
10-22 17:41:49.879: E/WindowManager(30235):     at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1133)
10-22 17:41:49.879: E/WindowManager(30235):     at android.app.Activity.performStart(Activity.java:4475)
 10-22 17:41:49.879: E/WindowManager(30235):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1940)
10-22 17:41:49.879: E/WindowManager(30235):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
10-22 17:41:49.879: E/WindowManager(30235):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
10-22 17:41:49.879: E/WindowManager(30235):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
10-22 17:41:49.879: E/WindowManager(30235):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-22 17:41:49.879: E/WindowManager(30235):     at android.os.Looper.loop(Looper.java:137)
10-22 17:41:49.879: E/WindowManager(30235):     at android.app.ActivityThread.main(ActivityThread.java:4441)
10-22 17:41:49.879: E/WindowManager(30235):     at java.lang.reflect.Method.invokeNative(Native Method)
10-22 17:41:49.879: E/WindowManager(30235):     at java.lang.reflect.Method.invoke(Method.java:511)
10-22 17:41:49.879: E/WindowManager(30235):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
10-22 17:41:49.879: E/WindowManager(30235):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
10-22 17:41:49.879: E/WindowManager(30235):     at dalvik.system.NativeStart.main(Native Method) 
```

我更改了 SProgressAsyncTask 类，而不是传递 Activity，而是传递了 Context - getApplicationContext()，但这让情况变得更糟。

谁能帮我知道，为什么 onStart if (firstRun) 每次都执行而不是只执行一次。

顺便说一句，我和我朋友的设备都只有 ICECREAM Os。

从 mlast 5-6 天以来，我一直停留在这个阶段，任何帮助都非常感谢。请帮我摆脱这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:37:21.553

我假设您将`firstRun`对象设置`true`为`onCreate`else 它永远不会启动。

如果你这样做，你应该再次检查[活动的生命周期](http://developer.android.com/reference/android/app/Activity.html)，活动以 onCreate 开始（你将 firstRun 设置为 true）然后 onStart 来了。

使用此设置，应用程序将`ASyncTask`在每次启动时启动它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:38:35.747

我也遇到过的这个例外可能是你陷入了同样的境地。AsyncTask 在后台工作，在并行执行的 UI 线程中发生异常。AsyncTask 仍在运行，试图显示给出此异常的对话框。确切的原因也会在此异常堆栈跟踪之前打印在 logcat 中。检查你的日志猫。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:41:24.910

这是多么出乎意料！

我刚刚尝试在一个静态类中创建了一个变量

```
public static boolean FIRST_START = true; 
```

在我的活动类中，将 firstRun 变量替换为 CONSTANTS.FIRST_START 并在 onStart() 的 if 中设置 CONTACTS.FIRST_START = false。现在它只调用一次该方法，即在应用程序实际启动时。然后，当我再次回到活动时，它不会被调用。

相同的方法，只是使用了不同类的不同变量。这有多奇怪？如果有的话，这可能会对某人有所帮助。

# php - 动态图像上的getimagesize

> ID：13011465
> 
> 赞同：0
> 
> 时间：2012-10-22T12:27:03.620
> 
> 标签：php, .htaccess, dynamic, getimagesize

我有一个 MySQL 表，我在其中将用户头像存储为 blob。我使用名为 avatar.php 的脚本获取这些图像，该脚本输出图像。要请求特定的用户图像，您必须调用 avatar.php?id=(user id)。为了使动态图像名称更漂亮，我在 .htaccess 中添加了 URL 重写，因此您也可以调用 avatar-(userid).jpg，它将转换为 avatar.php?id=(userid)。

现在我想获取用户图像并使用 GD 对其进行操作。我尝试使用 getimagesize() 和 imagecreatefromjpeg() 但我不断收到“无法打开流，没有这样的文件或目录”错误。我尝试使用这些函数的两个脚本，如 avatar.php 脚本，位于根目录中。我试过了：

```
getimagesize('avatar.php?id=1');
getimagesize('./avatar.php?id=1');
getimagesize('/avatar.php?id=1');
...and the same but using avatar-1.jpg instead. 
```

当我使用我网站的完整网址（包括 http:// 等）时，它实际上可以工作......但我还没有找到原因。

//**编辑**：使用 file_exists() 函数时会出现类似的问题。如果我尝试 file_exists('./avatar.php') 它返回 true，如果我添加 get-vars 它返回 false。这些功能不适合动态文件吗？

有人可以帮帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:36:34.257

`getimagesize` expects a ***file path***. `getimagesize('avatar.php?id=1')` tries to open the file `avatar.php?id=1` on the local hard disk, which of course doesn't exist.
If you use `getimagesize('http://example.com/avatar.php?id=1')`, it is understood that the path is a URL and it will go through the HTTP wrapper. Basically, `getimagesize` will still think it's opening a local file, but PHP will fetch that file through an HTTP request in the background. Since that HTTP request is actually returning a valid image file, that works.
Of course you do *not* want to engage your web server every time you're trying to open an image, as that's an unnecessary waste of resources. In fact, even if `getimagesize('avatar.php?id=1')` would work the way you think it does, that's still a lot of overhead for what you're trying to do.

If your images are stored in the database, figure out the image dimensions *once* when you put the image into the database and store them in a database column. Then simply query the size from the database.

* * *

> Similar problem occurs when using the file_exists() function. If I try `file_exists('./avatar.php')` it returns true, if I add get-vars it returns false. Are these functions unsuitable for dynamic files?

All these functions expect ***file paths***. `avatar.php` is a valid file name/path. `avatar.php?foo=bar` is *not* a valid file name/path. The latter is (part of) a URL. URLs have nothing to do with the local file system. They're only handled through a web server, which may or may not invoke a PHP or some other file on the disk. You need to distinguish the concept of *file paths* and *URLs*.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T12:42:23.970

1.  Load the image string directly from your database into a variable ... not via getimagesize('avatar.php?id=1');
2.  Use [imagecreatefromstring](http://www.php.net/manual/de/function.imagecreatefromstring.php) to load your image as an image object. Afterwards you can manipulate your image and send it to your output.

If you just want the image size without any manipulation you can use [getimagesizefromstring](http://www.php.net/manual/de/function.getimagesizefromstring.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T12:35:46.097

It doesn't work because `getimagesize` tries to open the php file, not the "image" the php file would output when parsed and executed.

This is also the reason why the full URL works: your script *requests* the output from your webserver, and the webserver executes the script (loading the image from DB and outputting it).

Loading it through the webserver (with full URL) might still be the simplest option.

You could also create an image resource with `imagecreatefromstring` ([link](http://php.net/manual/en/function.imagecreatefromstring.php)), giving the function your results from the DB and then manipulate that.

# c++ - 解决由全局静态变量引起的内存问题

> ID：13011474
> 
> 赞同：4
> 
> 时间：2012-10-22T12:27:42.957
> 
> 标签：c++, memory-management, static, global-variables, valgrind

警告：之所以出现这个问题，是因为我必须处理一大堆糟糕的代码，没有适当的文档，这些代码是 6 年前由其他人作为研究项目编写的。显然，更好的解决方案是首先通过适当的设计*不引起这些问题......*

也就是说，问题是：摆脱这种情况的最佳方法是什么：

1.  一个类在堆上分配内存，并在析构函数中释放它。
2.  在某个地方，该类的一个实例在全局范围内声明。
3.  存在一个初始化此实例的函数。
4.  该函数的返回值用于初始化静态变量。
5.  全局范围的变量在静态范围之外使用。

最小的工作示例：

文件“myclass.h”：

```
#ifndef MYCLASS_H
#define MYCLASS_H

#include<vector>
using namespace std;

class myclass{
        vector<int> *onTheHeap;
public:
        myclass(int len=0){
                onTheHeap = new vector<int>(len);
        }

        ~myclass(){
                delete onTheHeap;
        }

};

#endif 
```

文件“static_loader.cpp”

```
#include "class.h"
myclass existsForever;

int cause_static_global_creation(){
        existsForever = myclass(5);

}

static int bootstrap = cause_static_global_creation(); 
```

和文件“main.cpp”：

```
#include "class.h"

extern myclass existsForever;

int main(){
        return 0;
} 
```

构建：

```
g++ -g -c static_loader.cpp
g++ -g main.cpp static_loader.o 
```

并运行为：

```
 valgrind --leak-check=full ./a.out 
```

结果：当在退出处理程序的以下 main 中调用其析构函数时，该变量被释放，而且*在*main 下的 static_initialization_and_destruction_0 函数中从 static_loader 调用！

有没有办法确保这些变量在不涉及广泛重构代码的情况下被*完全释放？*在我必须使用的库中，有几十个这种模式的实例......

编辑：

添加功能：

```
 void operator=(myclass other){
            delete this->onTheHeap;
            this->onTheHeap = other.onTheHeap;
    } 
```

和

```
 myclass(const myclass& other){
            this->onTheHeap = new vector<int>(*(other.onTheHeap));
    } 
```

不改变行为。

第二次编辑：

```
 myclass& operator=(const myclass& other){
            delete this->onTheHeap;
            this->onTheHeap = new vector<int>(*(other.onTheHeap));
            return *this;
    } 
```

解决所有问题。无论如何，我的图书馆有这样的来源的内存泄漏，但我不再确定如何重现它。至少不是这样，也感谢重构等方面的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:48:43.807

你的假设被打破了。`myclass existsForever;`不是由 初始化`cause_static_global_creation`，而是由初始化`myclass::myclass`。相反，`cause_static_global_creation`为已经初始化的对象分配一个值。

由于课程违反了三原则，因此作业引起问题也就不足为奇了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:46:14.210

`myclass`在您的示例中构造了两次。

首先，用`len=0`by 语句`myclass existsForever;`。

`cause_static_global_creation`稍后，在with中构造了一个临时实例，`len=5`并使用默认赋值运算符将其分配给`existsForever`。此时，`existsForever`临时将共享相同的`onTheHeap`指针值。临时在 中立即被销毁`cause_static_global_creation`，为向量释放内存。当全局实例被销毁时，相同的内存在程序结束时再次被释放。

我有一些建议如何快速解决这个问题。

1.定义构造函数如下

```
myclass(int len=0)
{
  if ( len > 0 )
    onTheHeap = new vector<int>(len);
  else
    onTheHeap = NULL;
} 
```

2.使用智能指针而不是裸指针。

```
std::shared_ptr<vector <int>> onTheHeap; 
```

3.不要在堆上构造向量，而是使用实例成员。

更长的方法是正确实现赋值运算符和复制构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T12:46:50.093

我认为这些评论/策略涵盖了您的情况：

1.  如果您拥有 class.h 则只需将 替换`vector<int>*`为`vector`. 编译器将负责堆栈内存管理，您将避免堆泄漏。
2.  请注意，全局静态将在程序执行期间消耗堆栈空间，因此逐字节这与动态内存泄漏一样“糟糕”。
3.  您的双重删除可能是由对指针转义的引用引起的，正如 Benji 通过默认复制 ctor 所指出的那样。您可以将其替换为共享指针（不需要调用 delete），但堆栈更好。考虑禁用复制构造函数或编写深复制而不是浅复制的复制 ctor，并且正如 Benji 进一步指出的那样，如果您禁用赋值和复制构造并且它不编译，您已经找到了（一个）您的问题。
4.  全局静态在内存使用中不应该成为问题，除非它们是一个集合并且无限期地扩展而不会在使用后删除它们的垃圾。如果里面的向量在没有被清理的情况下不会无限扩展，那么这些向量在程序执行方面会消耗一定数量的内存。确保这些具有更短的生命周期将导致更好的分解代码，但如果您关心的是内存，则将被视为过早优化。

# c# - 选择数组中的随机位置

> ID：13011475
> 
> 赞同：1
> 
> 时间：2012-10-22T12:27:47.610
> 
> 标签：c#, arrays, brute-force

有没有办法在没有暴力破解的情况下在 2d 布尔数组 (bool[,]) 中选择一个随机位置，其值为负值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:41:39.353

这是一种非暴力方法，但它涉及对整个表的初始扫描：

```
int[] negOffsets = new int[data.Length];
int dataOffset = 0, count = 0;
foreach(bool x in data)
{
    if(!x) negOffsets[count++] = dataOffset;
    dataOffset++;
}
if(count == 0) {
    // nothing to pick
} else {
    int index = negOffsets[rand.Next(0, count)];

    int x = index / data.GetLength(1),
        y = index % data.GetLength(0);
    // assertion: the following should be false
    bool b = data[x, y];
} 
```

此外，您可能希望保留`offsets`并在迭代之间重新使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:46:11.637

希望你能从代码中得到想法。显然它需要一些调整，但是这个概念是使用 TestClass 作为数组的覆盖。不需要任何扫描，而且非常易于使用；）

```
 public class TestClass
    {
        public bool[,] BoolArray
        {
            get;
            private set;
        }
        private List<Tuple<int, int>> negativeValues;

        public TestClass(int x, int y)
        {
            this.negativeValues = new List<Tuple<int, int>>();
            this.BoolArray = new bool[x, y];
        }

        public Tuple<int, int> GetPosition()
        {
            if (this.negativeValues.Count > 0)
            {
                Random rand = new Random();
                return this.negativeValues[rand.Next(this.negativeValues.Count - 1)];
            }
            else
                return null;
        }

        public bool this[int x, int y]
        {
            get
            {
                return this.BoolArray[x, y];
            }

            set
            {
                if (!value)
                    negativeValues.Add(new Tuple<int, int>(x, y));

                this.BoolArray[x][y] = value;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:37:41.853

是的，完全有可能：

```
var random = new Random();
int xBound = 100;
int yBound = 100;
var values = new bool[xBound, yBound];

// Fill the values array
for (int y = 0; y < yBound; y++)
{
    for (int x = 0; x < xBound; x++)
    {
        values[x, y] = random.Next(0, 2) == 1;
    }
}

// Find the value at a random position that's false
bool foundFalse = false;
int probeX, probeY;

while (!foundFalse)
{
    probeX = random.Next(0, xBound);
    probeY = random.Next(0, yBound);

    if (values[probeX, probeY] == false)
    {
        // Do something with your probeX, probeY values perhaps
        foundFalse = true;
    }
} 
```

但是，询问这是否有用可能是明智的。为什么要在多维数组中随机探测，直到找到某个值？是不是有一些潜在的问题可以用不同的方式解决，更重要，更有效？

请注意，例如，使用这种方法，`while()`循环很可能永远不会结束。

您可以尝试事先遍历数组，以定位存在 a 的 [x,y] 索引`false`并将这些坐标存储在单独的列表中，例如，`Tuple<int,int>`（或使用@MarcGravell 发布的更优雅的解决方案） .

然后您可以从该列表中选择一个随机项目，您将有一个随机`[x,y]`where `values[x,y]`will be `false`。

# python - 由于会话，具有 gevent-socketio 的多个工作人员因 xhr-polling 传输而失败

> ID：13011477
> 
> 赞同：5
> 
> 时间：2012-10-22T12:27:56.683
> 
> 标签：python, socket.io, gevent, gunicorn

我目前正在尝试使用工作者 socketio.sgunicorn.GeventSocketIOWorker 使用 gunicorn 服务器在多个工作者之间扩展**gevent** - [socketio](https://github.com/abourget/gevent-socketio)。我在存在 websockets 时使用它，否则我会强制 XHR 轮询（对于 IE 等）。

 **XHR-polling 需要一个会话来跟踪以下民意调查，但是一旦我从一个到两个或更多工作人员，请求开始在它们之间传播，这意味着状态丢失并且一切都崩溃了。

我认为以下代码行是相关的： [https://github.com/abourget/gevent-socketio/blob/master/socketio/handler.py#L104-106](https://github.com/abourget/gevent-socketio/blob/master/socketio/handler.py#L104-106) 我想我需要一些其他存储引擎，例如redis我正在使用常规的 pubsub-actions，但这在实际库的深处。

所以我的问题是如何在我的应用程序中全局从内存中的会话存储转到另一个后端引擎（它是否优雅地覆盖了上面链接中的会话代码？）**而**无需修改库本身？[类似于 php.ini 中的 PHP 会话指令](http://www.php.net/manual/en/session.configuration.php#ini.session.save-handler)。我想可以说这是一个非常通用的python问题，但我很难找到相关信息，而且我也不确定它是否适用于这个库。

或者，我如何在不同的工作人员和服务器之间使用 gevent-socketio 的 xhr-polling 传输（没有粘性）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T12:30:21.303

这显然是socketio的一个限制。从我在网上看到的情况来看，会话处理通常是在 web 框架层而不是 web 服务器层完成的。socketio 尝试在其自己的较低层上执行此操作，并且以有限的方式执行此操作。我猜作者认为一个成熟的解决方案将是一个矫枉过正。在你的情况下，他们被证明是错误的。

只有两种方法可以克服需要更改逻辑的限制：修补源代码和在运行时修补。选择最让你满意的（或者，好吧，最不讨厌的：^））。**对于第二个选项，我建议`request_tokens`用具有相同接口的另一个实体替换和/或创建它的代码。**由于第 1 段中所述的原因，我真的认为 socketio 作者可能会接受一个源补丁，如果您提出一个，它将允许它利用外部会话处理机制。

会话信息的标准位置是：共享内存、文件、数据库。我建议您更改逻辑，使 socketio 使用与您的 Web 框架（或任何组成您的页面）相同的机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:02:59.447

看看这里的例子：

[https://github.com/abourget/gevent-socketio/tree/master/examples/pyramid_backbone_redis_chat_persistence](https://github.com/abourget/gevent-socketio/tree/master/examples/pyramid_backbone_redis_chat_persistence)

它展示了如何使用 redis 作为分布式消息队列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-19T21:36:59.613

只是一个想法，因为我有同样的问题；而不是让 gunicorn 分叉（使用 -w 标志），也许您可​​以在不同的端口上生成多个 gunicorn 进程，然后使用 nginx 使用[带有“粘性”会话的“上游”块](http://nginx.org/en/docs/http/ngx_http_upstream_module.html#sticky)来平衡它们。我相信这就是 nodejs 实现在不与 Redis 共享状态时如何处理工作人员的多处理。**

# gwt - GWT：注入的 PlaceManager 为空

> ID：13011488
> 
> 赞同：0
> 
> 时间：2012-10-22T12:28:32.880
> 
> 标签：gwt, requestfactory, inject, gwt-celltable, event-bus

在下面的代码中，我`PlaceManager`在第 4 行注入 a，并尝试`placeManager.revealPlace()`在最后一行使用。但是，在那一刻我得到一个空异常。

此外，如果我`if(placeManager==null){ Window.alert("Hello"); }`在该行之前添加一个，则会显示警报。

任何想法为什么会发生这种情况？也许是因为它是在`FieldUpdater`处理程序中执行的？

谢谢

```
public class CellTableManager {

private final DialectiveRequestFactory requestFactory = GWT.create(DialectiveRequestFactory.class);
private EventBus eventBus;
@Inject PlaceManager placeManager;

public CellTableManager (final CellTable<Diagram> cellTable, SimplePager pager) {
    DiagramDatabase.get().getDiagramProvider().addDataDisplay(cellTable);
    ListHandler<Diagram> sortHandler = new ListHandler<Diagram>(
        DiagramDatabase.get().getDiagramProvider().getList());
    cellTable.addColumnSortHandler(sortHandler);
    this.eventBus = new SimpleEventBus();
    requestFactory.initialize(eventBus);
    SimplePager.Resources pagerResources = GWT.create(SimplePager.Resources.class);
    pager = new SimplePager(TextLocation.CENTER, pagerResources, false, 0, true);
    pager.setDisplay(cellTable);

    final SelectionModel<Diagram> selectionModel = initSelectionMode(cellTable);

    initTableColumns(cellTable, selectionModel, sortHandler);

    DiagramRequest diagramRequest = requestFactory.diagramRequest();
    diagramRequest.listAll().fire(new Receiver<List<DiagramProxy>>() {
        public void onSuccess(List<DiagramProxy> response) {
            for (int i=0;i<response.size();i++) {
                insertEmptyRow(cellTable, response.get(i));
            }
        }
    });
}

private void initTableColumns(final CellTable<Diagram> cellTable,
            final SelectionModel<Diagram> selectionModel, ListHandler<Diagram> sortHandler) {
        Column<Diagram, String> titleColumn = new Column<Diagram, String>(
            new TextCell()) {
          @Override
          public String getValue(Diagram object) {
            return object.getTitle();
          }
        };
        titleColumn.setSortable(true);
        sortHandler.setComparator(titleColumn, new Comparator<Diagram>() {
            @Override
            public int compare(Diagram o1, Diagram o2) {
                return o1.getTitle().compareTo(o2.getTitle());
            }
        });

        cellTable.addColumn(titleColumn, BasicConstants.editTableText[0]);
        cellTable.setColumnWidth(titleColumn, 20, Unit.PCT);

        Column<Diagram, String> descriptionColumn = new Column<Diagram, String>(
            new TextCell()) {
          @Override
          public String getValue(Diagram object) {
            return object.getDescription();
          }
        };

        descriptionColumn.setSortable(true);
        sortHandler.setComparator(descriptionColumn, new Comparator<Diagram>() {
            @Override
            public int compare(Diagram o1, Diagram o2) {
                return o1.getDescription().compareTo(o2.getDescription());
            }
        });

        cellTable.addColumn(descriptionColumn, BasicConstants.editTableText[1], "");
        cellTable.setColumnWidth(descriptionColumn, 50, Unit.PCT);

        Column<Diagram, String> editColumn = new Column<Diagram, String>(
                new ButtonCell()) {
              @Override
              public String getValue(Diagram object) {
                return "edit";
              }
            };

        cellTable.addColumn(editColumn, "");
        editColumn.setFieldUpdater(new FieldUpdater<Diagram, String>() {
              @Override
              public void update(int index, Diagram object, String value) {
                  String diagramCode = object.getDiagramId(); 
                  ClientState.setCurrentDiagramId(diagramCode);
                  PlaceRequest request = new PlaceRequest(NameTokens.e).with("id", diagramCode);
                  placeManager.revealPlace(request);
              }
        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:47:44.103

你有没有在你的`bind(...)`（我们可以看到后者吗？）`PlaceManager``ClientModule`

您是否检查并验证了您的`GinModules`/ `Ginjector`（假设您使用的是`gin`）？

干杯，

# magento - How to skip the checkout process in magento?

> ID：13011491
> 
> 赞同：1
> 
> 时间：2012-10-22T12:28:38.843
> 
> 标签：magento

I am new to magento. I want skip the checkout process for magento downloadable product.

In my magento store, I have 4 products named as,

*   **Freemium**
*   **Standard**
*   **Super**
*   **Ultimate**

If the customer select the freemium product skip the checkout page and redirect it to the `downloadable/customer/products` with the count of the product. And place the order in order table too.

Help me to solve this issue. Thanks a lot.

# android - Android client using XML-messages

> ID：13011494
> 
> 赞同：0
> 
> 时间：2012-10-22T12:28:43.910
> 
> 标签：android, xml, client

> **Possible Duplicate:**
> [How to reading XML from a URL in Android](https://stackoverflow.com/questions/12854650/how-to-reading-xml-from-a-url-in-android)

The idea is to make an Android application, which would work with an existing server sending XML-messages and getting XML-responses.

Here's the code:

```
try {
                URL url1 = null;
                url1 = new URL("http://mysite.com/");
                URLConnection urlc1 = url1.openConnection();
                HttpURLConnection con1 = (HttpURLConnection) urlc1;

                con1.setRequestMethod("POST");

                con1.setUseCaches(false);
                con1.setDoOutput(true);
                con1.setDoInput(true);
                con1.setRequestProperty("accept-charset", "UTF-8");
                con1.setRequestProperty("content-type", "application/x-www-form-urlencoded");

                XmlSerializer ser1 = Xml.newSerializer();
                StringWriter writer = new StringWriter();
                ser1.setOutput(writer);
                ser1.startDocument("UTF-8", true);              
                ser1.startTag("", "request");
                ser1.attribute("", "query", "open_session");
                ser1.startTag("", "");
                ser1.attribute("", "client", "name");
                ser1.attribute("", "version", "1.0");
                ser1.endTag("", "");
                ser1.endTag("", "request");
                ser1.endDocument();

                String query = writer.toString();   

                con1.connect();

                OutputStreamWriter out1 = new OutputStreamWriter(con1.getOutputStream());  
                out1.write(query);  
                out1.flush();   

                String result1 = null;
                BufferedReader br1 = new BufferedReader(new InputStreamReader(con1.getInputStream()));
                 StringBuffer sb = new StringBuffer();
                 String line;
                 while ((line = br1.readLine()) != null){
                     sb.append(line);
                     }
                 br1.close();
                 result1 = sb.toString();

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

The program opens the connection, creates a login request XML, sends it to the server and gets XML-answer.

But it does not work properly. The response I get is:

```
<html><head><title>302 Found</title></head></body bg color="white"><center><h1>302 Found</h1></center><hr><center>nginx/1.0.0</center></body><html> 
```

And that's not a listed error from the server. The successful answer should be:

```
<result success="true">
<session-info time-out="number" id="number" start="number"/>
</result> 
```

It's interesting, that when I comment this part of the code:

```
OutputStreamWriter out1 = new OutputStreamWriter(con1.getOutputStream());  
out1.write(query);  
out1.flush(); 
```

I get the proper XML-error answer:

```
<result success="false">
<error error-code="XML-01">
Wrong XML
</error>
</result> 
```

Could you help me?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:42:49.133

`302 Found` is a redirect message and if you are using the `HttpClient`, it can handle these redirects internally.

Take a look at [https://stackoverflow.com/a/2560129/1321873](https://stackoverflow.com/a/2560129/1321873) to get an overview of how you can post an XML to a server. (Although they are sending a SOAP XML, the mechanism for sending a plain XML is also the same - just change the content-type)

# r - 二叉决策树（CART）的分裂和根节点

> ID：13011496
> 
> 赞同：4
> 
> 时间：2012-10-22T12:28:47.817
> 
> 标签：r, tree, rpart, cart-analysis

如何在回归树中找到拆分和根节点，我从多个向量制作了一个回归树，现在我必须提取多个向量的 rpart 的根节点。文件包含多个向量的数值`A`, `B`, `C`, `D`, `E`, `F`, `G`, `H`ex。一个向量包含 4,3,6,7,2,4,5,... 等类似其他 B,C,D,E,F,G,H .so 想要提取`F`（这是一个根节点我的情况）作为此输入的输出，在创建一棵树之后。谢谢。抱歉无法放置任何图像:(

这是我到目前为止所做的

```
log_data <- read.csv(file="C:\\Users\\AASHU\\Desktop\\CART\\syn.csv",
                      header=T, as.is=T)
library(rpart)

fit <- rpart(A ~ B+C+D+E+F+G+H, log_data)
# plot(fit)
plot(fit, compress=TRUE, branch=0)
text(fit, xpd = NA, cex = 0.7)

summary(fit)
Call:
rpart(formula = A ~ B + C + D + E + F + G + H, data = log_data)
n=52 (1 observation deleted due to missingness)

          CP nsplit rel error   xerror      xstd
1 0.09798662      0 1.0000000 1.065250 0.1888568

2 0.09347624      1 0.9020134 1.198999 0.1842667

3 0.03632980      2 0.8085371 1.154558 0.1859743

4 0.02297130      3 0.7722073 1.254874 0.2029423

5 0.01000000      4 0.7492360 1.274024 0.2118272

Node number 1: 52 observations,    complexity param=0.09798662

 mean=4.403846, MSE=1.509985 

 left son=2 (7 obs) right son=3 (45 obs)

 Primary splits:

F < 5.5 to the right, improve=0.09798662, (0 missing) 
```

`F(F>=5.5)`......现在我必须从拟合（回归树）及其拆分中提取根节点，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T13:36:09.747

找到那棵树的**标签**，以便我们可以提取任何向量

当根节点是字符时（例如-A）

```
nodes<-labels(fit, digits=4, minlength=1L, pretty, collapse=TRUE)
root<-substr(nodes[2], 1, 1) 
```

从**路径**中我们可以提取树的根节点，下面最好通过第二次拆分来提取根节点名称，这只是一个根节点。

```
nodes<-labels(fit, digits=4, minlength=1L, pretty, collapse=TRUE)
path<-path.rpart(fit, node_no, pretty=0, print.it=FALSE) 
path[[2]][1] 
```

# django - How to check session without creating new one?

> ID：13011497
> 
> 赞同：0
> 
> 时间：2012-10-22T12:28:52.083
> 
> 标签：django, django-sessions

In part of my application i have some custom settings for visitors. When user load page i try to check custom settings for request and if settings exist i do customization in page.

i do it in [Template Context Processor](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-TEMPLATE_CONTEXT_PROCESSORS)

```
def shared_values(request):

    show_help = request.session.get('show_help', True)
    return {
        'show_help': show_help,
    } 
```

It's work perfect, but i have problem - each time, when i check session django create new entry in Session table if entry does not exist before.

How can i check session without creating new one?

Edit 1:

Then i disable checking for session key, i see what django does not create any Session entry for requests.

1.  I login as admin in 1st browser (chrome) and delete all session (except one for mydself)
2.  Edit context processor, so i don't access sessions in my project:

    show_help = True

3.  Open page in different browser (firefox)

4.  Switch to 1st browser and check if new session object is appear, but nothing has changed - only one session object exist.

Edit 2:

i use django 1.4.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:18:09.970

[文档](https://docs.djangoproject.com/en/dev/topics/http/sessions/#using-sessions-in-views)：

> 当`SessionMiddleware`被激活时，每个`HttpRequest`对象——任何 Django 视图函数的第一个参数——都会有一个`session` 属性，它是一个类似字典的对象。

因此，每次您提出请求时 - 如果会话尚不存在，则会创建会话。何时`context_processor`应用 - 会话已存在。你不应该担心这一点。

# java - Partial data displayed and rest by tooltip using JTextPane

> ID：13011505
> 
> 赞同：0
> 
> 时间：2012-10-22T12:29:29.510
> 
> 标签：java, swing, model, tooltip, jtextpane

I just wanted a code where I can display partial text and the remaining text by the tool tip using 'JTextPane'.

Eg: If text is 'Java is re useable'. I want it to display 'Java is ...' Then I want to add a tooltip to display the rest of the data.

Please do let me know how it is done.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:18:19.050

`JLabel`这是当前宽度小于其首选大小的 a 的默认行为。您可以通过调整此[示例](https://stackoverflow.com/a/3597688/230513)中的封闭框架的大小来研究效果，该框架覆盖`layoutCL()`以显示文本布局状态。

![图片](../Images/9bc86af7157a3e22fb7bd981dfe55d81.png)

# shell - 如何将变量从shell脚本传递到applescript

> ID：13011507
> 
> 赞同：4
> 
> 时间：2012-10-22T12:29:34.797
> 
> 标签：shell, applescript

我有一个 shell 脚本，它检查文件夹是否有一定数量的文件并向用户显示错误消息。我使用 applescript 来显示错误消息。有没有办法将 shell 脚本的变量传递给 AppleScript？

这是我所拥有的：

```
declare -i count=5;
osascript -e 'tell app "Xcode" to display dialog "Counted $count items." buttons {"Continue"}' 
```

我希望输出是，`Counted 5 items.`但它只是作为`Counted $count items.`如何将 shell 脚本变量传递给 applescript？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T12:34:03.877

有三种解决方案：

1.  使用 "" 而不是 '' 以便 shell 扩展 $var

2.  关闭引号，放置 var，然后不带空格地重新打开（例如，'string'$var'rest of string'）。但是，如果变量可以包含空格，则这是不安全的。

3.  在 AppleScript 脚本中[使用正式的命令行参数](http://hints.macworld.com/article.php?story=20050523140439734)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T13:41:12.310

只是为了澄清一下，这就是我最终为了让它工作而做的事情。

```
declare -i count=5;
osascript -e 'tell app "Xcode" to display dialog "Counted '$count' items." buttons {"Continue"}' 
```

# objective-c - IOS - 以编程方式暂停/静音/降低背景音乐的音量然后恢复它

> ID：13011516
> 
> 赞同：3
> 
> 时间：2012-10-22T12:30:22.837
> 
> 标签：objective-c, ios

当我的应用播放音效时，我需要暂时静音/暂停/降低 iPhone/iPod 上背景音乐的音量，然后再恢复。

`MPMusicplayerController`方法适用于 iPod/iPhone 音乐应用程序，但不适用于 Spotify 等第三方应用程序

有没有人有这样做的例子`AVAudioPlayer`，或者别的什么？将会话类别从环境更改为播放，然后再返回运行良好，但在我的显示中引入了短暂但明显的延迟

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:53:04.030

希望这篇[文章](http://what-when-how.com/ios-4/building-an-audio-playing-application-with-the-audio-toolbox-framework-ios-4/)对你有所帮助。查看“AVAudioSessionCategoryPlayAndRecord”类别

# ios6 - 当用户在地图上放置图钉时，自动调用委托方法“didSelectAnnotationView”

> ID：13011519
> 
> 赞同：0
> 
> 时间：2012-10-22T12:30:35.380
> 
> 标签：ios6

我正在 iOS6 中开发一个应用程序。我正在使用苹果的地图。我必须在用户点击的地图上放置大头针。我通过在地图上使用 UITapGestureRecognizer 来做到这一点。但问题是，当用户点击放下 pin 时，Map Delegate 方法“didSelectAnnotationView”也会在 pin drop 后自动调用。我也尝试过使用 UILongPressGestureRecognizer 但结果相同。这不会发生在 iOS 5 中的 Google Maps 装置中。在 iOS 5 中它运行良好。我正在对此进行研究，但无法得到任何结果。请你告诉我：

有什么办法可以处理这个。OR Apple Map 提供了动态放置图钉的功能。

谢谢。

以下我写的代码：

```
- (IBAction)singleTapGestureOccur:(UITapGestureRecognizer *)sender {
CGPoint touchPoint = [sender locationInView:_mapView_View];
CLLocationCoordinate2D cord = [_mapView_View convertPoint:touchPoint toCoordinateFromView:_mapView_View];
MapAnnotation *annotation = [[MapAnnotation alloc] initWithCordinate:cord];
[_mapView_View addAnnotation:annotation]; 
```

}

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view{
NSLog(@"DidSelectAnnotation"); 
```

}

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch{
if ([gestureRecognizer isKindOfClass:[UITapGestureRecognizer class]]) {
    if ([[touch.view class] isSubclassOfClass:[MKPinAnnotationView class]]) {
        return NO;
    }else {
        return YES;
    }
}else {
    return YES;
} 
```

}

# gwt - GWT Autobean 设置创建接口的初始值

> ID：13011520
> 
> 赞同：0
> 
> 时间：2012-10-22T12:30:40.647
> 
> 标签：gwt, autobean

我们正在使用 AutoBeans 创建我们的 Pojo 对象以用于 RPC-Calls。Pojo 具有默认值或其他类初始化的推荐方法是什么？

例如

```
 public interface SamplePojo {
        // should default to 5
        int getSampleProperty();
        void setSampleProperty(int sampleProperty);
    }

    public interface ModelFactory extends AutoBeanFactory {
        AutoBean<SamplePojo> getSamplePojo();   
    } 
```

SamplePojo 有一个 int 属性，我们总是希望默认为 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:01:26.880

AutoBeans 应该被视为低级的，直接映射到 JSON 或从 JSON 映射。*考虑到这*一点，您不想`getSampleProperty()`成为5，而是想检测该属性是否缺少特定值并在这种情况下*使用*5。

 **因此，如果`0`（an 的默认值`int`）不是该属性可接受的值，则只需“如果该属性为 0，则使用 5”。否则，将返回类型更改为`Integer`“如果属性为`null`”，则使用 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:18:26.913

这行得通吗？

```
public interface SamplePojo {
        // should default to 5
        int getSampleProperty();
        void setSampleProperty(int sampleProperty);
    }

public class SamplePojoImpl implements SamplePojo{
    private int sampleProperty = 5
    // getters/setters
    int getSampleProperty(){ return sampleProperty;}
    void setSampleProperty(int sampleProperty){this.sampleProperty = sampleProperty;}

}

public interface ModelFactory extends AutoBeanFactory {
    AutoBean<SamplePojo> getSamplePojo(SamplePojoImpl samplePojo );   
} 
```**

# php - Drupal 7 FAPI - ajax 图像预览

> ID：13011522
> 
> 赞同：1
> 
> 时间：2012-10-22T12:30:51.473
> 
> 标签：php, drupal-7, drupal-fapi, drupal-forms, drupal-ajax

我正在尝试在我的 D7 模块中使用 ajax 预览上传的图像，但不知道为什么它不起作用。这是我想要做的： -

```
function create_ad_form($form, &$form_state)
{
   $form['image_file'] = array(
       '#title' => t('Upload Banner:'),
       '#type' => 'file',
   );

   $form['submit'] = array(
       '#type' => 'submit',
       '#value' => 'Submit',
       '#submit' => array('create_ad_form_submit'),
       '#ajax'=> array(
          'callback'=>'create_ad_form_submit',
          'wrapper'=> 'im-area',
          'method'=> 'replace',
          'effect'=> 'fade',
       )
   );

   $form['im-container']=array(
       '#prefix'=>'<div id="im-area">',
       '#suffix'=>'</div>',
   );
}

function create_ad_form_submit($form, $form_state)
{
   $file = file_save_upload('image_file', array(), "public://",$replace = FILE_EXISTS_REPLACE);
   if ($file)
   {
       $file->status=FILE_STATUS_PERMANENT;
       file_save($file);
       $form['im-container']=array(
             '#title'=>t('Preview:'),
             '#prefix'=>'<div id="im-area">',
             '#markup'=>'<img src="sites/default/files/'.$file->filename.'">',
             '#suffix'=>'</div>',
       );
   }
   else
       drupal_set_message('No file uploaded.');

   return $form['im-container'];
} 
```

上面的代码没有给出错误，但没有显示图像预览。谁能告诉我在这里做错了什么，我该怎么办？？？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:13:46.447

好的。我让它工作了。我已经更新了上面的代码，它对我有用。刚刚禁用并重新启用模块，相同的代码开始工作。它很奇怪，但它是，不知道是什么问题。

# visual-studio-2010 - SQLException was unhandled 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误

> ID：13011525
> 
> 赞同：0
> 
> 时间：2012-10-22T12:30:55.403
> 
> 标签：visual-studio-2010, sql-server-2008-r2

我在我的 win7 32 位中安装了 SQL Server 2008 R2 和 Visual Studio 2010。它们安装正确。每个单独工作都很好。但是当我想从 Visual Studio 连接到 SQL Server Management Studio 时，我收到了这个错误。（我想连接到本地数据库）：

> SQLException was unhandled 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

这是我的连接代码：

```
cn = new SqlConnection();
cn.ConnectionString = "Data Source=(local); Initial Catalog=XXX_amlak; User ID=sa; password=XXX";
cn.Open(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:41:21.650

使用此连接字符串连接到本地数据库：

`cn.ConnectionString = "Data Source=.\SqlExpress; Initial Catalog=XXX_amlak; User ID=sa; password=XXX";`

或者查看这个问题： [如何连接到 SQL Server 2008 Express 的本地实例](https://stackoverflow.com/questions/360141/how-to-connect-to-local-instance-of-sql-server-2008-express)

# google-maps - 谷歌地图将数据从 xml 打印到信息选项卡

> ID：13011526
> 
> 赞同：-2
> 
> 时间：2012-10-22T12:30:58.543
> 
> 标签：google-maps

我有谷歌地图..标记从xml获取数据..一切正常..但我想将信息从xml写入选项卡..但我不知道怎么做..请看我的代码..帮助我:((

```
 var gmarkers = [];
          var gicons = [];
           map = null;

var iconImage = new google.maps.MarkerImage('images/intake.png',

      new google.maps.Size(20, 34),

      new google.maps.Point(0,0),

      new google.maps.Point(9, 34));

  var iconShadow = new google.maps.MarkerImage('http://www.google.com/mapfiles/shadow50.png',
      new google.maps.Size(37, 34),
      new google.maps.Point(0,0),
      new google.maps.Point(9, 34));

  var iconShape = {
      coord: [9,0,6,1,4,2,2,4,0,8,0,12,1,14,2,16,5,19,7,23,8,26,9,30,9,34,11,34,11,30,12,26,13,24,14,21,16,18,18,16,20,12,20,8,18,4,16,2,15,1,13,0],
      type: 'poly'
  };

   var contentString = [

      '<div id="tabs">',

      '<ul>',

        '<li><a href="#tab-1"><span>Info</span></a></li>',
        '<li><a href="#tab-2"><span>Info</span></a></li>',
        '<li><a href="#tab-3"><span>Photo</span></a></li>',
      '</ul>',

      '<div id="tab-1">',

      ' i must add info here',

      '</div>',
      '<div id="tab-2">',

       '<p>and here</p>',

      '</div>',

      '<div id="tab-3">',

        '<p>Any info and photo will be here.. <br/> <img src="images/logo.gif" height="60" ></p>',
      '</div>',
      '</div>'
    ].join('');  

var infowindow = new google.maps.InfoWindow(
  { 

content: contentString

  });

      // A function to create the marker and set up the event window

function createMarker(latlng,name,html,category) {

    var contentString = html;

    var marker = new google.maps.Marker({

        position: latlng,
        icon: gicons[category],
        shadow: iconShadow,
        map: map,
        title: name,

        zIndex: Math.round(latlng.lat()*-100000)<<5

        });

        // === Store the category and name info as a marker properties ===
        marker.mycategory = category;      

        marker.myname = name;

        gmarkers.push(marker);

    google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(contentString); 
        infowindow.open(map,marker);
        });
}

      // == shows all markers of a particular category, and ensures the checkbox is checked ==

      function show(category) {
        for (var i=0; i<gmarkers.length; i++) {
          if (gmarkers[i].mycategory == category) {
            gmarkers[i].setVisible(true);
          }
        }
        // == check the checkbox ==
        document.getElementById(category+"box").checked = true;
      }

      // == hides all markers of a particular category, and ensures the checkbox is cleared ==
      function hide(category) {
        for (var i=0; i<gmarkers.length; i++) {
          if (gmarkers[i].mycategory == category) {
            gmarkers[i].setVisible(false);
          }
        }
        // == clear the checkbox ==
        document.getElementById(category+"box").checked = false;
        // == close the info window, in case its open on a marker that we just hid
        infowindow.close();
      }

      // == a checkbox has been clicked ==
      function boxclick(box,category) {
        if (box.checked) {
          show(category);
        } else {
          hide(category);
        }

      }

  function initialize() {
    var myOptions = {
      zoom: 8,
      center: new google.maps.LatLng(40.0000, 48.0000),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map"), myOptions);

   google.maps.event.addListener(infowindow, 'domready', function() {
      $("#tabs").tabs();
    });

    google.maps.event.addListener(map, 'click', function() {
        infowindow.close();
        }); 
```

这是xml

```
 // Read the data

      downloadUrl("xml/cat.xml", function(doc) {

  var xml = xmlParse(doc);

  var markers = xml.documentElement.getElementsByTagName("marker");

        for (var i = 0; i < markers.length; i++) {
          // obtain the attribues of each marker
          var lat = parseFloat(markers[i].getAttribute("lat"));
          var lng = parseFloat(markers[i].getAttribute("lng"));
          var point = new google.maps.LatLng(lat,lng);
         var address = markers[i].getAttribute("address");
          var id = markers[i].getAttribute("id");
          var name = markers[i].getAttribute("name");
          var html = contentString;
          var category = markers[i].getAttribute("category");
          // create the marker
          var marker = createMarker(point,name,html,category);
        }

        // == show or hide the categories initially ==
        show("intake");
        hide("reservoir");
        hide("wps");
        show("wtp");
        hide("wwps");
        hide("wwtp");
        // == create the initial sidebar ==

      });

 toggleKML = function(x) { 
          i = x;
        //alert(i);
        //alert(toggleArray[0]);
        //alert(toggleArray[1]);
        //alert(toggleArray[2]);        
        if (toggleArray[i] == 1) {
        kmlArray[i].setMap(null);

        toggleArray.splice(i,1,'0');                  
        }
        else {
        kmlArray[i].setMap(map);

        toggleArray.splice(i,1,'1');        
        }
 }}
</script> 
```

伙计们请帮助我（（..

我为此工作了超过 12 个小时，但它不起作用（（..

如何将 xml 数据放入 contentstring 中？

我的xml示例也是..

```
<marker code="20070" id="WWS7" name="8 Wells Nisaqala Gallery" title="NWSSP-2" capacity="9.84" completed="0" lat="xxx" lng="xx"  category="intake"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:57:25.743

我已经意识到你在问什么，你可以在这里查看我的代码：http: [//turom-mice.it/condorincentive/incentive.html](http://turom-mice.it/condorincentive/incentive.html)（使用 Firebug 获取脚本和相关的 XML 文件） 代码注释一样多尽可能，但如果您需要解释，请询问。代码是此处各种搜索和阅读以及 Google Maps v3 API/示例的结果。

希望能帮助到你。皮疹*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:04:29.390

您需要根据标记上的点击事件来设置信息窗口的内容。您还需要最有可能使用闭包来执行此操作。现在，您每次都在设置相同的内容，因为`contentString`永远不会改变。您只需使用 XML 文件中的值在单击事件处理程序中设置该内容。

# cocoa - 如何在可可中使用核心动画为 png 序列设置动画（非触摸）

> ID：13011527
> 
> 赞同：4
> 
> 时间：2012-10-22T12:30:59.710
> 
> 标签：cocoa, core-animation, calayer

我想在 NSImageView 中为 png 序列设置动画，但我无法使其工作。它只是不想显示任何动画。有什么建议吗？

这是我的代码：

```
- (void) imageAnimation {
  NSMutableArray *iconImages = [[NSMutableArray alloc] init];
  for (int i=0; i<=159; i++) {
    NSString *imagePath = [NSString stringWithFormat:@"%@_%05d",@"clear",i];
    [iconImages addObject:(id)[NSImage imageNamed:imagePath]];
    //NSImage *iconImage = [NSImage imageNamed:imagePath];
    //[iconImages addObject:(__bridge id)CGImageCreateWithNSImage(iconImage)];
  }

  CALayer *layer = [CALayer layer];
  CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"contents"];
  [animation setCalculationMode:kCAAnimationDiscrete];
  [animation setDuration:10.0f];
  [animation setRepeatCount:HUGE_VALF];
  [animation setValues:iconImages];

  [layer setFrame:NSMakeRect(0, 0, 104, 104)];
  layer.bounds = NSMakeRect(0, 0, 104, 104);
  [layer addAnimation:animation forKey:@"contents"];

  //Add to the NSImageView layer
  [iconV.layer addSublayer:layer];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T13:41:53.157

**tl;博士：**

通过调用使您的视图层托管

```
[iconV setLayer:[CALayer layer]];
[iconV setWantsLayer:YES]; 
```

* * *

## 为什么什么也没发生

没有发生任何事情的原因是您的图像视图没有图层，因此当您调用时，`[iconV.layer addSublayer:layer];`您正在向其发送消息`nil`并且没有任何反应（子图层未添加到图像视图中）。

默认情况下，OS X 上的视图不使用 Core Animation 层作为它们的后备存储，以实现向后兼容性。带有层的视图可以是*layer-backed*或*layer-hosting*。

您不应该直接与*支持*图层的视图进行交互，也不应该将*视图*（但可以添加图层）添加到图层*托管*视图。由于您要将图层添加到图像视图图层（并因此直接与其交互），因此您需要一个图层托管视图。

## 修复它

你可以告诉你的视图它应该是层托管的，首先给它层使用`[iconV setLayer:[CALayer layer]];`，然后（顺序很重要）告诉它它想要一个层使用`[iconV setWantsLayer:YES];`。

有关 layer-backed 和 layer-hosting 视图的更多信息，请[阅读`wantsLayer`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/setWantsLayer: "wantLayer 文档").

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-01T22:15:05.523

我迟到了，但我会发布我的解决方案，因为原来的一个加上@David 发布的答案对我不起作用。我在 Xcode 8.3.3 上创建，为 10.10 编译。

对我不起作用的是单独创建图层，然后用它设置图像视图。

**这对我不起作用**

```
CALayer *layer = [CALayer layer];
layer.frame = self.imageView.bounds;
layer.bounds = self.imageView.bounds;
[self.imageView setLayer:layer]; 
```

结果总是没有动画。

显然，在 10.10 上，当你这样做时：

```
self.imageView.wantsLayer = YES; 
```

MacOS 创建一个图层并将其分配给图像视图。

所以，**对我有用**的代码是：

```
self.imageView.wantsLayer = YES;

CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"contents"];
[animation setCalculationMode:kCAAnimationDiscrete];
[animation setDuration:1.3f];
[animation setRepeatCount:HUGE_VALF];
[animation setValues:imageArray];
[self.imageView.layer addAnimation:animation forKey:@"contents"];  
[self.imageView setAnimates:YES];

[self.imageView setCanDrawSubviewsIntoLayer:YES]; 
```

最后一行非常重要。如果您删除它，它将不会显示任何图像！

# java - 从 POJO 调用基于 Spring 的 Web 应用程序类

> ID：13011529
> 
> 赞同：2
> 
> 时间：2012-10-22T12:31:02.883
> 
> 标签：java, spring, jakarta-ee, pojo

我有一个 WEB 应用程序。我被要求从 POJO 调用 Spring 应用程序内的类（服务）。

该服务不作为 Web 服务或 REST 公开。我只是一个罐子里的应用程序。我必须添加它来构建路径并调用服务。

会起作用吗？？

我非常困惑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:40:39.400

这里没有太多细节，但我假设这是一个使用 Spring MVC 的 Spring 应用程序，在这种情况下是的，没有理由不能将服务作为一个类来调用。

这就是为什么您可以在 Spring 中使用 JUnit 测试 @Controller 类的原因，它实际上只是一个 POJO。

下面的链接作为如何执行此操作的示例。

[如何使用 @PathVariable 对 Spring MVC 控制器进行单元测试？](https://stackoverflow.com/questions/1401128/how-to-unit-test-a-spring-mvc-controller-using-pathvariable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:40:06.303

如果您的 pojo 是 Spring Bean，那么您可以像这样自动装配服务：

```
public class YourPojo {
   @Autowired
   YourService yourService; 
} 
```

您可能会考虑通过使用 @Component 注释 Pojo 或在 ApplicationContext.xml 中声明它来使您的 Pojo 成为 Spring Bean

如果没有，如果你有一个请求对象，你会得到这样的服务：

```
ServletContext sc = req.getSession().getServletContext();
ApplicationContext ac = WebApplicationContextUtils.getWebApplicationContext(sc);
YourService yourService = ac.getBean("yourService"); 
```

# php - Behat & Mink : 使用测试环境

> ID：13011531
> 
> 赞同：31
> 
> 时间：2012-10-22T12:31:15.817
> 
> 标签：php, testing, behat, mink, goutte

我目前正在使用 Behat 和 Mink & Goutte Driver。当我尝试通过文件（来自**Symfony2**`app_dev.php`标准版的典型文件）在我的开发环境中使用它时，我的测试工作得很好（[要点](https://gist.github.com/5a1857bb5a76c9765f87)）。`app_dev.php`

 **但是，如果我想使用一个`app_test`文件（与`app_dev`文件相同，除了环境参数设置为**"test"**而不是**"dev"**，并且禁用调试模式），在注销场景中，Goutte 似乎可以'找不到“user_signup”标识符，并且在“登录”场景中，找不到“根”文本节点。事实上，当我使用 a`print last response`时，似乎用户只是没有登录：我仍然看到登录用户的表单......

当我在我的开发环境（`app_dev`）或产品环境（`app`）上时，一切似乎都工作得很好……知道吗？

（如果您认为需要其他文件，请告诉我）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:35:19.027

默认情况下，Mink 使用名为“symfony2”的会话。这就是您从浏览器访问和使用 Behat 获得不同结果的原因。您可以在 behat.yml 文件中更改它。查看此文档以获取更多信息：[http ://extensions.behat.org/symfony2/index.html#symfony2-mink-session](http://extensions.behat.org/symfony2/index.html#symfony2-mink-session)**

# c++ - 使用 sntp (windows c++) 从服务器获取时间/日期

> ID：13011532
> 
> 赞同：5
> 
> 时间：2012-10-22T12:31:23.163
> 
> 标签：c++, ntp

我正在寻找从服务器（ntp.belnet.be）获取时间和日期的 c/c++ 中的工作代码。它适用于 UDP 并使用端口 123。

有人可以帮忙吗？

```
//sending pakket
memset(&sntp_msg_header, 0, sizeof sntp_msg_header);
sntp_msg_header.flags = 27;
sntp_msg_header.originate_timestamp_secs = time(NULL);

// Get data in rxmsg
...
...

// print time
timeval = ntohl(rxmsg.transmit_timestamp_secs) - ((70ul * 365ul + 17ul) * 86400ul);
printf("%s", ctime(&timeval)); 
```

这就是我到目前为止所拥有的。但我无法从中获得正确的数据。我希望这是更多信息。

如果发现这个：

```
import socket
import struct
import sys
import time

TIME1970 = 2208988800L      # Thanks to F.Lundh

client = socket.socket( socket.AF_INET, socket.SOCK_DGRAM )
data = '\x1b' + 47 * '\0'
client.sendto( data, ( sys.argv[1], 123 ))
data, address = client.recvfrom( 1024 )
if data:
    print 'Response received from:', address
    t = struct.unpack( '!12I', data )[10]
    t -= TIME1970
    print '\tTime=%s' % time.ctime(t) 
```

但它是在python中。有人可以将其更改为 c++ 还是有一个转换器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T18:05:43.717

这就是我使用的。它不是很优雅，但应该足以让这个想法得到理解。基本思想是具有与网络发送和接收的内容相匹配的结构。颠倒的字节顺序最初并不明显。这里值得一提的是，这对于错误情况几乎没有任何用处。你想解决这个问题。:)

```
#define ReverseEndianInt(x) ((x) = \
    ((x)&0xff000000) >> 24 |\
    ((x)&0x00ff0000) >> 8 |\
    ((x)&0x0000ff00) << 8 |\
    ((x)&0x000000ff) << 24)

/**
 * NTP Fixed-Point Timestamp Format.
 * From [RFC 5905](http://tools.ietf.org/html/rfc5905).
 */
struct Timestamp
{
    unsigned int seconds; /**< Seconds since Jan 1, 1900\. */
    unsigned int fraction; /**< Fractional part of seconds. Integer number of 2^-32 seconds. */

    /**
     * Reverses the Endianness of the timestamp.
     * Network byte order is big endian, so it needs to be switched before
     * sending or reading.
     */
    void ReverseEndian() {
        ReverseEndianInt(seconds);
        ReverseEndianInt(fraction);
    }

    /**
     * Convert to time_t.
     * Returns the integer part of the timestamp in unix time_t format,
     * which is seconds since Jan 1, 1970.
     */
    time_t to_time_t()
    {
        return (seconds - ((70 * 365 + 17) * 86400))&0x7fffffff;
    }
};

/**
 * A Network Time Protocol Message.
 * From [RFC 5905](http://tools.ietf.org/html/rfc5905).
 */
struct NTPMessage
{
    unsigned int mode :3; /**< Mode of the message sender. 3 = Client, 4 = Server */
    unsigned int version :2; /**< Protocol version. Should be set to 3\. */
    unsigned int leap :2; /**< Leap seconds warning. See the [RFC](http://tools.ietf.org/html/rfc5905#section-7.3) */
    unsigned char stratum; /**< Servers between client and physical timekeeper. 1 = Server is Connected to Physical Source. 0 = Unknown. */
    unsigned char poll; /**< Max Poll Rate. In log2 seconds. */
    unsigned char precision; /**< Precision of the clock. In log2 seconds. */
    unsigned int sync_distance; /**< Round-trip to reference clock. NTP Short Format. */
    unsigned int drift_rate; /**< Dispersion to reference clock. NTP Short Format. */
    unsigned char ref_clock_id[4]; /**< Reference ID. For Stratum 1 devices, a 4-byte string. For other devices, 4-byte IP address. */
    Timestamp ref; /**< Reference Timestamp. The time when the system clock was last updated. */
    Timestamp orig; /**< Origin Timestamp. Send time of the request. Copied from the request. */
    Timestamp rx; /**< Recieve Timestamp. Reciept time of the request. */
    Timestamp tx; /**< Transmit Timestamp. Send time of the response. If only a single time is needed, use this one. */

    /**
     * Reverses the Endianness of all the timestamps.
     * Network byte order is big endian, so they need to be switched before
     * sending and after reading.
     *
     * Maintaining them in little endian makes them easier to work with
     * locally, though.
     */
    void ReverseEndian() {
        ref.ReverseEndian();
        orig.ReverseEndian();
        rx.ReverseEndian();
        tx.ReverseEndian();
    }

    /**
     * Recieve an NTPMessage.
     * Overwrites this object with values from the recieved packet.
     */
    int recv(int sock)
    {
        int ret = ::recv(sock, (char*)this, sizeof(*this), 0);
        ReverseEndian();
        return ret;
    }

    /**
     * Send an NTPMessage.
     */
    int sendto(int sock, struct sockaddr_in* srv_addr)
    {
        ReverseEndian();
        int ret = ::sendto(sock, (const char*)this, sizeof(*this), 0, (sockaddr*)srv_addr, sizeof(*srv_addr));
        ReverseEndian();
        return ret;
    }

    /**
     * Zero all the values.
     */
    void clear()
    {
        memset(this, 0, sizeof(*this));
    }
}; 
```

你会像这样使用它，也许在`main()`.

```
WSADATA wsaData;
DWORD ret = WSAStartup(MAKEWORD(2,0), &wsaData);

char *host = "pool.ntp.org"; /* Don't distribute stuff pointing here, it's not polite. */
//char *host = "time.nist.gov"; /* This one's probably ok, but can get grumpy about request rates during debugging. */

NTPMessage msg;
/* Important, if you don't set the version/mode, the server will ignore you. */
msg.clear();
msg.version = 3;
msg.mode = 3 /* client */;

NTPMessage response;
response.clear();

int sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP);
sockaddr_in srv_addr;
memset(&srv_addr, 0, sizeof(srv_addr));
dns_lookup(host, &srv_addr); /* Helper function defined below. */

msg.sendto(sock, &srv_addr);
response.recv(sock);

time_t t = response.tx.to_time_t();
char *s = ctime(&t);
printf("The time is %s.", s);

WSACleanup(); 
```

有很多方法可以获取 ip 和端口，但 getaddrinfo 在 Windows 上做得不错：

```
int dns_lookup(const char *host, sockaddr_in *out)
{
    struct addrinfo *result;
    int ret = getaddrinfo(host, "ntp", NULL, &result);
    for (struct addrinfo *p = result; p; p = p->ai_next)
    {
        if (p->ai_family != AF_INET)
            continue;

        memcpy(out, p->ai_addr, sizeof(*out));
    }
    freeaddrinfo(result);
} 
```

自然，该解决方案与搁浅的鲸鱼一样便携，但它适用于我™。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:52:24.403

C/++ 中的套接字不如大多数其他语言令人愉快，尤其是解释型和较新的编译型。

为什么不使用官方实现

*   [http://ntp.org/downloads.html](http://ntp.org/downloads.html)

当然，NTP 需要 MinGW，但是那里有一些库。

*   [http://www.hillstone-software.com/hs_ntp_details.htm](http://www.hillstone-software.com/hs_ntp_details.htm)（它不是免费的，但可以免费试用，这不是必需的）

自服务器 2000 版本以来，Windows 还内置了 NTP。我无法验证它，但它至少应该可以在 Vista 以来的系统上运行。

*   `w32tm /help`（寻找`/query`部分）
*   更多文档：[http ://technet.microsoft.com/en-us/library/cc773263%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc773263%28v=ws.10%29.aspx)

# c# - 如何创建简单的无限深度函数解析器

> ID：13011533
> 
> 赞同：1
> 
> 时间：2012-10-22T12:31:28.890
> 
> 标签：c#, parsing

我计划创建一个字符串命令，如下所示

```
string syntax = "Download(TagMatch(Download(\"http://www.aaa.com\"), \"<div title='aa'>\", \"</div>\"))";
MyParser.Execute(syntax); 
```

然后 MyParser 将解析里面的语法，并首先使用最深命令的参数调用正确的方法，直到最外面的命令。所以基本上会

1.  下载('http://www.aaa.com')
2.  完成下载它将列出所有标签匹配并结束
3.  它将再次调用 Download 但过载 Download(string[] param)

所以基本上我有这些方法

```
private string Download(string download)
{
//return single string
}

private string[] Download(string[] download)
{
//return string array
}

private string[] TagMatch(string webpage, string startTag, string endTag)
{
//return multiple Tag matches the array
} 
```

如何创建这样的解析器并首先调用该方法？任何人都可以帮助我吗？我是解析的新手。我计划仅通过提供一种语法来创建一个处理网络抓取的库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:11:32.983

为了创建一个像样的解析器，您需要做一些事情：

1.  使用 EBNF 等符号定义您想要正确解析的语言。
2.  使用基于您的语言的 EBNF 定义的解析器创建工具。
3.  将生成的解析器代码集成到您的应用程序中，并调整您的应用程序以使用解析器代码从输入字符串生成的树结构。

用于创建解析器（包括在 C# 中）的一个好工具是位于[http://goldparser.org](http://goldparser.org)的 Gold Parser Generator 。

但请确保首先在 EBNF 中正确定义您的语言。不要仅仅使用正则表达式将“解析器”组合在一起，它们对于正确的语言解析来说太有限了。

# popup - yui 图像弹出窗口

> ID：13011535
> 
> 赞同：0
> 
> 时间：2012-10-22T12:31:45.820
> 
> 标签：popup, yui

我不敢相信这个问题以前没有被问过！也许我不明白 YUI... 我有一个客户在他们的网站上使用 YUI 库。我不想加载额外的库（即 jquery） 我对 YIU 知之甚少，但我认为它的目的与 jquery 相似。（我遇到了这个问题，只是我在其他地方发布了答案，答案是“使用 jquery”，或者“你为什么要在 YUI 中这样做”而不是回答问题）

Sooo...我想加载一个小图像并在单击该图像时弹出一个带有大版本的模态对话框...我想使用YIU。请有人告诉我这是否可以完成，如果可以..请指点我一个 tut，或者至少指向在 YUI API 中查看的位置。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:56:44.873

假设您使用的是 YUI 3，您应该为此使用 Y.Panel。使用这个小部件非常简单。

这是一个完整的工作示例：http: [//jsbin.com/uxalec/1/edit](http://jsbin.com/uxalec/1/edit)

Y.Panel 的文档位于[http://yuilibrary.com/yui/docs/panel/dialog.html](http://yuilibrary.com/yui/docs/panel/dialog.html)

# forms - symfony2 集合验证器类

> ID：13011536
> 
> 赞同：3
> 
> 时间：2012-10-22T12:31:45.600
> 
> 标签：forms, validation, symfony, collections, subform

我在集合中使用自定义类验证器时遇到问题。它发现错误，获取良好的属性路径，但将其发送到父表单。它导致错误列在父表单中，而不是集合的每个子表单中......

一些更相关的代码：

验证.yml

```
My\SuperBundle\Entity\Event:
    properties:
      conflictComment:
        - NotNull: ~ # this property constraint got the right property path in the right form !
    constraints:
      - My\SuperBundle\Validator\DateIsAvailable: ~ # this one got the right property path, but in the parent form. 
```

MultiEventType.php，得到子表单错误的父表单

```
$builder
    ->add('events', 'collection', array(
        'type' => new \My\SuperBundle\Form\Type\EventDateType()
    ));

...

    'data_class' => 'My\SuperBundle\Form\Model\MultiEvent' 
```

EventDateType.php，应该得到错误的集合

```
$required = false;
$builder
    ->add('begin', 'datetime', array(
        'date_widget' => 'single_text',
        'time_widget' => 'text',
        'date_format' => 'dd/MM/yyyy',
        'label' => 'form.date.begin')
    )
    ->add('automatic', 'checkbox', compact('required'))
    ->add('conflictComment', 'textarea', compact('required'));

...

    'data_class' => '\My\SuperBundle\Entity\Event' 
```

DateIsAvailableValidator.php

```
namespace My\SuperBundle\Validator;
use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;

class DateIsAvailableValidator extends ConstraintValidator
{
    private $container;

    public function __construct($container)
    {
        $this->container = $container;
    }

    public function isValid($event, Constraint $constraint)
    {
        $this->setMessage($constraint->message);

        return false;
    }
} 
```

属性路径就像**children[events][0].data**但呈现在**form_errors(multiEventForm.events)**上，而不是**form_errors(prototype)**，因为它应该在我的集合行模板中......

有没有办法以正确的形式获取错误，或者这是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:10:01.980

好的，这是我绕过这个问题所做的：

只需创建一个扩展即可以正确的形式呈现错误：

SubformExtension.php

```
<?php

namespace My\SuperBundle\Twig;

use Symfony\Component\Form\FormView;
use Twig_Environment;
use Twig_Extension;
use Twig_Function_Method;

/**
 * Add methods to render into the appropriate form
 *
 * @author Jérémy Hubert <jhubert@eskape.fr>
 */
class SubformExtension extends Twig_Extension
{

    /**
     * {@inheritdoc}
     */
    public function initRuntime(Twig_Environment $environment)
    {
        $this->environment = $environment;
    }

    /**
     * {@inheritdoc}
     */
    public function getName()
    {
        return 'subform_extension';
    }

    /**
     * {@inheritdoc}
     */
    public function getFunctions()
    {
        return array(
            'subform_errors' => new Twig_Function_Method($this, 'renderErrors', array('is_safe' => array('html'))),
        );
    }

    /**
     * Render errors handled by parent form of a collection in the right subform
     * @param FormView $view     The Child/Collection form which should handle the error
     * @param string   $template Template used to render the error message
     *
     * @return string
     */
    public function renderErrors(FormView $view, $template = null)
    {
        // Get the root form, where our (sub)collection errors bubbled
        $parentForm = $view;
        do {
            $parentForm = $parentForm->getParent()->getParent();
        } while ($parentForm->hasParent());
        $parentForm = $parentForm->getVars();

        // Seeking property path
        $fieldName = $view->get('full_name');
        $validationName = '[' . preg_replace('/^[a-zA-Z_]*/', 'children', $fieldName) . '.data]';

        // Render errors
        $html = '';
        foreach ($parentForm['errors'] as $error) {
            if (false !== strpos($error->getMessageTemplate(), $validationName)) {
                $message = str_replace($validationName, '', $error->getMessageTemplate());

                if (null !== $template) {
                    $html .= $this->environment->render($template, compact('message'));
                } else {
                    $html .= $message;
                }
            }
        }

        return $html;
    }

} 
```

服务.yml

```
parameters:
    twig.extension.subform.class: My\SuperBundle\Twig\SubformExtension

services:
    twig.extension.subform:
        class: %twig.extension.subform.class%
        tags:
            - { name: twig.extension } 
```

errorMessage.html.twig（使用 Twitter Bootstrap）

```
<div class="alert alert-error no-margin-bottom">
    <div class="align-center">
        <i class="icon-chevron-down pull-left"></i>
        {{ message }}
        <i class="icon-chevron-down pull-right"></i>
    </div>
</div> 
```

在我的收藏原型中：

```
{{ subform_errors(prototype, 'MySuperBundle:Message:errorMessage.html.twig') }} 
```

希望这会有所帮助，但没有提出任何更好的解决方案。

# java - 生成单页 HTML JavaDoc

> ID：13011538
> 
> 赞同：8
> 
> 时间：2012-10-22T12:31:52.097
> 
> 标签：java, javadoc

我想从项目的所有 Java 源文件中生成一个 HTML 文件。通常，JavaDoc 会生成多个链接在一起的 HTML 页面，但我希望将所有内容都放在一个页面中。那可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:48:00.883

好吧，我能够使用[PDF Doclet](http://sourceforge.net/projects/pdfdoclet/)从我的 JavaDoc 中获取 PDF 。

# objective-c - 在 OS X 上创建和使用静态库

> ID：13011540
> 
> 赞同：3
> 
> 时间：2012-10-22T12:31:58.430
> 
> 标签：objective-c, xcode, macos, cocoa, static-libraries

好的，我正在尝试创建一个可可库（静态）并使用，但我不断收到错误消息。

我创建了一个超级基本的静态库 ( `TSXLib`)，其中只有一个附加类。

```
#import <Foundation/Foundation.h>

@interface ClassOne : NSObject

- (void)doIt;

@end 
```

* * *

```
#import "ClassOne.h"

@implementation ClassOne

- (void)doIt
{
    NSLog(@"Oops... I did it again!");
}

@end 
```

然后，我将**动态库安装名称**（在构建设置中）设置为：

```
@executable_path/../Frameworks/libTSXLib.a 
```

现在在我的测试项目中：

*   我拖放`libTSXLib.a`文件（并将其复制到目标）
*   添加了一个构建阶段（复制文件），我将其复制`libTSXLib.a`到`Frameworks`
*   然后我要去我的`AppDelegate.m`并尝试导入我图书馆的课程
*   在`#import <ClassOne.h>`，编译器抛出一个找不到类的错误

* * *

有任何想法吗？

* * *

**注意：** *我实际上对库、框架等感到很困惑（这就是为什么我倾向于尽可能避免它们）。我要做的就是打包一些类/函数，以便我可以在不同的项目中轻松地重用它们。不管是框架，还是库，我真的不在乎。我需要的是：打包并重用我的代码。（在捆绑时阻止任何人查看/使用其中的内容的能力将是一个加号）*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T02:22:23.940

好的，所以，一段时间后回来，这就是我为使其正常工作所做的工作：

## 第 1 步：创建库

*   使用内置的 Cocoa 库模板创建一个**新项目**
*   将**库类型**设置为*静态*。
*   添加你的类/函数/任何
*   在**Build Phases**下，注意哪些标头将变为*Public*。

## 第 2 步：在测试项目中使用库

*   *将最终的 .a 库文件拖放*到项目中（如果您也将其复制到目标目录也没关系）
*   链接到图书馆
*   **将用户标头搜索路径**更新为您的初始库`.a`文件来源（使用递归（如`/the/path/to/your/library/folder/**`）
*   将**始终搜索用户路径**设置为`YES`
*   **在Build Settings**下添加`-ObjC`到**Other Linker Flags**。

# .net - 当 JSON 文档使用已移除的类时该怎么办？

> ID：13011545
> 
> 赞同：3
> 
> 时间：2012-10-22T12:32:18.937
> 
> 标签：.net, json, ravendb, json.net

我最近不得不删除一个被许多 json 文档使用的类。现在反序列化失败，因为删除的类不再存在。

抛出的错误如下所示：

> 解析 JSON 'MyClass，MyAssembly' 中指定的类型时出错。

这里是 json 文档：

```
{
  "$type": "MyClass, MyAssembly",
  "Property": "Value"
} 
```

我在用着`TypeNameHandling.All`.

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:47:39.213

使用 TypeNameHandling.None 或 TypeNameHandling.Auto

# javascript - 如何灵活改变highcharts的主题（使用渐变）？

> ID：13011546
> 
> 赞同：1
> 
> 时间：2012-10-22T12:32:23.040
> 
> 标签：javascript, jquery, highcharts, theming

我们如何为 highcharts 创建高级主题？以下链接 (http://www.highcharts.com/documentation/how-to-use) 上的文档是不够的。

我正在尝试创建一个类似于以下链接的主题： [https ://app.simplymeasured.com/viewer/acpsb7gp68xdpxnb2sufahdtvmfcmu/357342](https://app.simplymeasured.com/viewer/acpsb7gp68xdpxnb2sufahdtvmfcmu/357342)

基本上我们如何为条形和背景使用渐变？如果这不是一件容易的工作，有没有人知道一些现成的主题？

# c# - Is there any method to get an overlay of media file while it is playing?

> ID：13011549
> 
> 赞同：5
> 
> 时间：2012-10-22T12:32:43.997
> 
> 标签：c#, media, subtitle

I'd like to insert subtitle into the media file without using Library that provides it automatically(Like a DirectShow)

I used way to draw by using window desktop's drawing handle, but it couldn't work. I think it is because of the speed of update... right? Anyway, is there any function or method to paint over a media file or get their overlay handle?

```
 [DllImport("user32.dll")]
    static extern IntPtr GetDesktopWindow();

    [DllImport("user32.dll")]
    static extern IntPtr GetDCEx(IntPtr hwnd, IntPtr hrgn, uint flags);

    [DllImport("user32.dll")]
    static extern IntPtr ReleaseDC(IntPtr hwnd, IntPtr hdc);

    public void SubtitleDraw()
    {
        IntPtr hWnd = GetDesktopWindow();
        IntPtr hDc = GetDCEx(hWnd, IntPtr.Zero, 1027);

        Font font1 = new Font("Times New Roman", 24, FontStyle.Regular,GraphicsUnit.Pixel);    
        Point pt = new Point(40, 375);

        PointF pointF1 = new PointF();
        pointF1 = PlayerForm.ActiveForm.PointToScreen(pt);

        Graphics g = Graphics.FromHdc(hDc);
        g.DrawString(SubtitleText, font1, Brushes.Black, pointF1);

        ReleaseDC(hWnd, hDc);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:15:20.910

You're going to want to research DirectShow and filters if you want to draw on top of a video while playing at any decent framerate. There is some scattered documentation out there for how to interact with DirectShow filter graphs from .NET, but it's pretty scarce.

If you have a video playing in a media control, it will almost always be playing the video in an overlay, so anything you draw "on top" of it will be on top of the control, but still beneath the "overlay" where the real video is playing.

# ios - FTP 下载和显示内容的可能性

> ID：13011558
> 
> 赞同：1
> 
> 时间：2012-10-22T12:33:34.453
> 
> 标签：ios

我在 android 中创建了一个应用程序，该应用程序通过 FTP 连接下载一些内容（pdf、mp4、jpg）并将其保存在 sdCard 上，然后用户可以通过应用程序上的一些按钮查看每个内容文件。我的客户要求我为 iPad 创建相同的东西。我的问题是是否可以创建 FTP 连接并下载所需的内容，然后在我需要时将其显示在我的应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:39:41.173

这可能会帮助您：

[http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)

还有这个关于stackoverflow的答案：

[iPhone FTP 集成](https://stackoverflow.com/questions/4281109/iphone-ftp-integration)

或许：

[使用 iPhone SDK 通过 ftp 上传和下载](https://stackoverflow.com/questions/1354012/uploading-and-downloading-via-ftp-with-iphone-sdk)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:41:41.297

我在自己的 iOS 应用程序中充分利用了[这个 FTP 库](https://github.com/lloydsargent/BlackRaccoon)

# android - 将数组中的对象添加到可搜索列表

> ID：13011561
> 
> 赞同：1
> 
> 时间：2012-10-22T12:33:40.403
> 
> 标签：android, object, arraylist

我正在尝试使用来自对象的“名称”数据填充搜索列表。然后我希望能够单击对象并将对象发送到下一个活动。我只使用字符串让它工作，但使用对象我得到各种错误。有谁知道如何解决这个问题？这是到目前为止的代码。

```
public class SearchActivity extends Activity
{
    public final static String sampleObject = "no.uib.nutritionapplication.dene";
    private ListView list;
    private EditText edText;
    private ArrayList<FoodItem> array_sort= new ArrayList<FoodItem>();
    int textlength = 0;   

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_search);

    ArrayList<FoodItem> foodList = new ArrayList<FoodItem>();

    FoodItem orange_juice = new FoodItem("Orange juice", 10, 2, 100, 140, "Orange juice from concentrate");
    FoodItem bread = new FoodItem("Bread", 12, 5, 150, 160, "Whole grain bread");
    FoodItem jarlsberg = new FoodItem("Jarlsberg cheese", 8, 8, 130, 180, "Jarlsberg cheese");

    foodList.add(orange_juice);
    foodList.add(bread);
    foodList.add(jarlsberg);

    list = (ListView) findViewById(R.id.ListView01);
    edText = (EditText) findViewById(R.id.EditText01);
    list.setAdapter(new ArrayAdapter<FoodItem>(this, android.R.layout.simple_list_item_1, foodList));

    list.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View itemClicked, int position,
                long rowId) {

            Intent intent = new Intent(SearchActivity.this, AddMealActivity.class);

            TextView textView = (TextView) itemClicked;  
            FoodItem message = textView.getName().toString();  

            intent.putExtra("sampleObject", message);
            startActivity(intent);

        }
    });

    edText.addTextChangedListener(new TextWatcher() {

        public void afterTextChanged(Editable s){
            // Abstract Method of TextWatcher Interface.
        }

        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            // Abstract Method of TextWatcher Interface.
        }

        public void onTextChanged(CharSequence s, int start, int before, int count) {
            textlength = edText.getText().length();
            array_sort.clear();

            for (int i = 0; i < foodList.length; i++) {
                if (textlength <= foodList.getName()[i].length()) {
                    if(edText.getText().toString().equalsIgnoreCase((String)foodList.getName()[i].subSequence(0,textlength))){
                        array_sort.add(foodList.getName()[i]);
                    }
                }
            }

            list.setAdapter(new ArrayAdapter<String>(SearchActivity.this,android.R.layout.simple_list_item_1, array_sort));
            }
        }
    );

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:45:07.307

您必须为此创建自己的适配器。

查看以下教程以获取更多信息： [http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

```
public class MySimpleArrayAdapter extends ArrayAdapter<FoodItem> {
    private final Context context;
    private final ArrayList<FoodItem> values;

    public MySimpleArrayAdapter(Context context, ArrayList<FoodItem> values) {
        super(context, R.layout.YOURLAYOUT, values);
        this.context = context;
        this.values = values;
      }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater).getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.YOURLAYOUT, parent, false);

        TextView textView = (TextView) rowView.findViewById(R.id.label);
        textView.setText(values.get(position).NAMEOFFOOD);

        return rowView;
    }
} 
```

# php - 在 imagephp 上投影变黑

> ID：13011562
> 
> 赞同：0
> 
> 时间：2012-10-22T12:33:41.460
> 
> 标签：php, gd, shadow

所以我从 PHP Doc 和一些有用的线程/建议创建了一个脚本，并得出了这个：

```
$filename = time();

$glassurl = $_GET['GlassImg'];
$frameurl = $_GET['FrameImg'];
$handleurl = "images/helpbutton.png";
$handleurl2 = "images/helpbutton.png";

$glassimg = imagecreatefromjpeg($glassurl);
$frameimg = imagecreatefromgif($frameurl);
$handleimg = imagecreatefrompng($handleurl);
$handleimg2 = imagecreatefrompng($handleurl2);

$frame_x = imagesx($frameimg);
$frame_y = imagesy($frameimg);
imagecopymerge($glassimg, $frameimg, 0, 0, 0, 0, $frame_x, $frame_y, 100);

imagecolortransparent($handleimg, imagecolorat($handleimg, 0, 0));
imagecolortransparent($handleimg2, imagecolorat($handleimg2, 0, 0));

$handle_x = imagesx($handleimg);
$handle_y = imagesy($handleimg);
imagecopymerge($glassimg, $handleimg, 460, 150, 0, 0, $handle_x, $handle_y, 100);

$handle2_x = imagesx($handleimg2);
$handle2_y = imagesy($handleimg2);
imagecopymerge($glassimg, $handleimg2, 5, 5, 0, 0, $handle2_x, $handle2_y, 100);

// Output and free from memory
imagepng($glassimg, "uploads/$filename.png");

imagedestroy($glassimg);
imagedestroy($frameimg);
imagedestroy($handleimg);
imagedestroy($handleimg2); 
```

它几乎可以完美运行，但是有一个小问题。helpbutton.png 只是一个占位符图像，可以看到我可以定位图像并合并它们，最终会产生一个纯黑色阴影，导致图像看起来很糟糕。

这应该是这样的：

![帮助按钮.png](../Images/ffd03d7b9487e75a2d3c1321eb06ea3c.png)

这是合并后的结果：

![帮助结果.png](../Images/066bdef12716d458de8b05dc28bb2989.png)

我研究了很多图像控件，包括混合等，但似乎没有一个会影响它。有谁知道如何控制在 PHP 中不应该变暗的阴影？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:48:16.167

`imagesavealpha($res, true)`&`imagealphablending($res, false)`派上用场，当您保存带有 alpha 通道的 png 图像时（尤其是从 jpeg 打开时）。

**编辑**：试试这个：

```
$glassimg = imagecreatefromjpeg($glassurl);
imagealphablending($glassimg, false);
imagesavealpha($glassimg, true)

$frameimg = imagecreatefromgif($frameurl);
imagealphablending($frameimg, false);
imagesavealpha($frameimg, true)

$handleimg = imagecreatefrompng($handleurl);
imagealphablending($handleimg, false);
imagesavealpha($handleimg, true)

$handleimg2 = imagecreatefrompng($handleurl2);
imagealphablending($handleimg2, false);
imagesavealpha($handleimg2, true) 
```

# java - jsp上的注册商标

> ID：13011563
> 
> 赞同：4
> 
> 时间：2012-10-22T12:33:45.707
> 
> 标签：java, jsp, symbols

我想在jsp页面上显示注册商标（即圆圈内的'R'），我发现使用`&#174;`html代码。我可以显示它，但在我的情况下，我想通过在 jsp 中使用迭代器来显示它，这是（迭代器）从其操作类中的 DB 获取数据并将其显示在 jsp 上（我将此符号保存到 DB 表中）作为我们总是这样做，对于这个符号，我`&#174;`在 DB 中插入了相同的 html 代码 ()，但它`&#174;`在 jsp 中显示代码本身。如果您有任何想法，请告诉我。

我正在使用：**<%@ page contentType="text/html; charset=UTF-8"%>** for jsp。因为我在谷歌上搜索找到了这个解决方案，发现它也依赖于上面的东西，但它已经是正确的（据我所知）。

下面是jsp示例代码：

```
<s:iterator value="options" status="rowstatus">
<!-- Option rows -->
<tr>
<td>
<s:property value="name"/>
</td>
<td class="clsQuestions2"><s:property value="value"/></td>
</tr>
</s:iterator> 
```

如果我输入的代码如果`&#174;`出现然后打印它`&#174;`本身然后它显示注册商标但我不想要它。例如在下面的情况下它显示符号：

```
<s:if test="name == 'virtuwell&#174;'">virtuwell®</s:if> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:42:27.130

Struts2 属性标签提供 HTML 转义。试试这个来避免它：

```
<s:property value="name" escape="false" /> 
```

# android - 在android的strings.xml中写入%

> ID：13011564
> 
> 赞同：40
> 
> 时间：2012-10-22T12:33:48.840
> 
> 标签：android

我想在我的`strings.xml`文件中创建以下字符串数组：

```
<string-array name="an_array_columns">
         <item>% Select percentage1</item>
         <item>% Select percentage2</item>
</string-array> 
```

这里的字符串是“% 选择百分比”。现在，当我在我的 strings.xml 中写这个时，我收到以下错误：

```
Multiple annotations found at this line:
    - error: Multiple substitutions specified in non-positional format; did you mean to 
     add the formatted="false" attribute?
    - error: Found tag </item> where </string-array> is expected 
```

我知道我们可以更改`&`为`&amp;`或`'`，`\'`但是我该怎么做百分号？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2017-02-13T17:22:10.253

`%%`似乎对我有用。例如：

`<string name="num_percent">%1$d %%</string>`

和

`String oneHundredPercentString = getString(R.string.num_percent, 100); // This gives "100 %"`

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-10-22T12:35:48.067

You can use its code. Try this: `&#37;`

Also check the similar question: [Android XML Percent Symbol](https://stackoverflow.com/questions/4414389/android-xml-percent-symbol)

# php - Ajax获取动态创建字段的ID

> ID：13011566
> 
> 赞同：1
> 
> 时间：2012-10-22T12:34:01.507
> 
> 标签：php, ajax, forms, dynamic

请原谅这是一个愚蠢的问题，因为我是 AJAX 新手。

我有一个由 PHP 根据 mysql 查询的数据动态生成的表单

我可以获取值，但我还需要知道的是如何获取表单字段的名称或 ID（即 `num[$id]`）

```
<input type='text' name='num[$id]' id='num[$id]' value='0' onchange = 'getAmt(this.value)'/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:42:05.540

你的 html 应该是这样的。
`<input type='text' name='num[]' id='num_<?php echo $id; ?>' value='<?php echo echo $id; ?>' onchange = 'getAmt(this)'/>`

在你的 js 函数 getAmt

```
var id=this.id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:57:21.557

HTML 代码：
`<input type='text' name='num[$id]' id='num[$id]' value='0' onchange='getAmt(this)'/>`

脚本：
`function getAmt(Obj){`
`var id = Obj.id;`
`var name = Obj.name;`
`}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:40:53.610

```
document.getElementById("MYID");
alert(x.name); 
```

# c# - 如何阅读文本框？

> ID：13011567
> 
> 赞同：0
> 
> 时间：2012-10-22T12:34:01.140
> 
> 标签：c#, vb.net

```
TextBox[,] tb = new TextBox[x,y]; 
```

例如，如何从 TextBox[0,0] 读取值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:35:05.420

使用[文本](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.text.aspx)属性。与单个文本框相同。

```
Console.WriteLine(tb[0,0].Text); 
```

*`tb`请记住使用您在代码中定义的变量名称访问它。将您的 TextBox 数组命名为更易于理解的名称可能会更好。*

# c - 为什么会有多余的号码？

> ID：13011571
> 
> 赞同：-2
> 
> 时间：2012-10-22T12:34:11.643
> 
> 标签：c, date

例子：

输入（dd mm yyyy）：11 11 2011

输出：2011 年 11 月 11 日

这是正确的，但月份和年份之间有一个额外的数字

我不知道如何删除它。请帮忙！

```
#include <stdio.h>
int getDay(int day)
{
  switch(day)
  {
    case 1: printf("%dst ", day); break;
    case 2: printf("%dnd ", day); break;
    case 3: printf("%drd ", day); break;
    default: printf("%dth ", day); break;
  }
}
int getMonth(int month)
{
  switch(month)
  {  
    case 1: printf("January "); break;
    case 2: printf("February "); break;
    case 3: printf("March "); break;
    case 4: printf("April "); break;
    case 5: printf("May "); break;
    case 6: printf("June "); break;
    case 7: printf("July "); break;
    case 8: printf("August "); break;
    case 9: printf("September "); break;
    case 10: printf("October "); break;
    case 11: printf("November "); break;
    case 12: printf("December "); break;
    default: printf("Invalid "); break;
  }
}

int main()
{
  int day, month, year;
  printf("Enter date in dd mm yyyy format: ");
  scanf("%d %d %d", &day, &month, &year);
  day = getDay(day);
  month = getMonth(month);
  year = year;
  printf("%d", day);
  printf("%d", month);
  printf("%d", year);
  fflush(stdin);
  getchar();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:38:18.407

为什么你的`getMonth`函数（应该称为 IMO `printMonth`）既有副作用（它打印一些东西）又给出了一些有用（但未指定）的值（即缺少`return`）？你应该学会启用所有警告，改进你的代码直到编译器没有给出警告，并使用调试器。在 Linux 上，这意味着编译`gcc -Wall -g source.c -o myprog`然后调试`gdb myprog`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:42:37.237

Your `getMonth()` and `getDay()` functions both should return an `int` according to the headers, you're not returning anything from the functions, so what's stored in these lines:

```
day = getDay(day);
month = getMonth(month); 
```

Is anyone's guess, then you're printing those values here:

```
printf("%d", day);   
printf("%d", month); 
```

If you just want to display "11th November 2011" have both your `getDay` and `getMonth` functions return void, don't re-assign `day` and `month`, and restructure your output:

```
getDay(day);         //print day and "th" or "st" or "rd"
getMonth(month);     //print month
printf("%d", year);  //print year 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:24:58.460

该代码中有很多错误和未定义的行为。我建议做类似的事情：

```
#include <stdio.h>

typedef enum
{
  DAY_FORMAT_ST,
  DAY_FORMAT_ND,
  DAY_FORMAT_RD,
  DAY_FORMAT_TH,
  DAY_FORMAT_N

} day_format_t;

#define MONTHS_N  12

const char* get_day_str   (unsigned int day);
const char* get_month_str (unsigned int month);

int main()
{
  int day;
  int month;
  int year;

  printf("Enter date in dd mm yyyy format: ");
  scanf("%d %d %d", &day, &month, &year);
  getchar(); // clear trailing line feed from stdin

  printf("%d%s ", day, get_day_str(day));
  printf("%s ", get_month_str(month));
  printf("%d", year);
  getchar();
  return 0;
}

const char* get_day_str (unsigned int day)
{
  static const char* DAY_FORMAT [DAY_FORMAT_N] =
  {
    "st",
    "nd",
    "rd",
    "th"
  };

  day_format_t  day_index = day - 1; // compensate for 0-index arrays
  const char*   result;

  if (day_index < DAY_FORMAT_TH)
  {
    result = DAY_FORMAT[day_index];
  }
  else
  {
    result = DAY_FORMAT[DAY_FORMAT_TH];
  }

  return result;
}

const char* get_month_str (unsigned int month)
{
  static const char* MONTH [MONTHS_N] =
  {
    "January",
    "February",    
    "March",
    "April",
    "May",
    "June",
    "July",
    "August",
    "September",
    "October",
    "November",
    "December"
  };

  return MONTH [month-1];
} 
```

请注意，代码需要额外的错误处理来处理奇怪的用户输入，并且这种错误处理最好在 main() 中而不是在函数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T12:51:05.620

```
#include <stdio.h>
int getDay(int day)
{
  switch(day)
  {
    case 1: printf("%dst ", day); break;
    case 2: printf("%dnd ", day); break;
    case 3: printf("%drd ", day); break;
    default: printf("%dth ", day); break;
  }
}
int getMonth(int month)
{
  switch(month)
  {  
    case 1: printf("January "); break;
    case 2: printf("February "); break;
    case 3: printf("March "); break;
    case 4: printf("April "); break;
    case 5: printf("May "); break;
    case 6: printf("June "); break;
    case 7: printf("July "); break;
    case 8: printf("August "); break;
    case 9: printf("September "); break;
    case 10: printf("October "); break;
    case 11: printf("November "); break;
    case 12: printf("December "); break;
    default: printf("Invalid "); break;
  }
}

int main()
{
  int day, month, year;
  printf("Enter date in dd mm yyyy format: ");
  scanf("%d %d %d", &day, &month, &year);
  getDay(day);
  getMonth(month);
  printf("%d", year);
  fflush(stdin);
  getchar();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T12:46:45.177

you were printing day and month twice here is redefined code

```
 #include <stdio.h>
 void getDay(int day)
 {
   switch(day)
 {
      case 1: printf("%dst ", day); break;
       case 2: printf("%dnd ", day); break;
       case 3: printf("%drd ", day); break;
       default: printf("%dth ", day); break;
 }
}
void getMonth(int month)
{
 switch(month)
{
  case 1: printf("January "); break;
   case 2: printf("February "); break;
   case 3: printf("March "); break;
    case 4: printf("April "); break;
case 5: printf("May "); break;
case 6: printf("June "); break;
case 7: printf("July "); break;
case 8: printf("August "); break;
case 9: printf("September "); break;
case 10: printf("October "); break;
case 11: printf("November "); break;
case 12: printf("December "); break;
default: printf("Invalid "); break;
}
}

int main()
{
   int day, month, year;
   printf("Enter date in dd mm yyyy format: ");
    scanf("%d %d %d", &day, &month, &year);
      getDay(day);
    getMonth(month);
    year;
   // printf("%d", day);
  // printf("%d", month);
   printf("%d", year);
   fflush(stdin);
   getchar();
} 
```

this is one way....

# c# - 动画屏幕保护程序

> ID：13011581
> 
> 赞同：0
> 
> 时间：2012-10-22T12:34:44.770
> 
> 标签：c#, silverlight, screensaver

我需要为 Windows 创建一个动画屏幕保护程序。屏幕保护程序包含一些图像和一些文本。我想从网页更新屏幕保护程序内容（上传图像和编辑文本）等。

可以使用 c# 来做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:37:35.857

"is possible to do this using c#?"

Yes.

C# is a full code language, and with it, you can do virtually everything a computer is able to do. Now... I would expect you to expand your question a bit more.

# java - 如何检查字节数组是否损坏了 FastInfoSet 文档

> ID：13011582
> 
> 赞同：0
> 
> 时间：2012-10-22T12:34:53.977
> 
> 标签：java, fastinfoset

如何检查字节数组是损坏的 FastInfoSet 文档还是二进制垃圾？

我的意思是可能存在一些我们可以检查的二进制“标题”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:48:44.453

类中存在静态方法[isFastInfosetDocument](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/com/sun/xml/internal/fastinfoset/Decoder.java.html)来`com.sun.xml.internal.fastinfoset.Decoder`检查`java.io.InputStream`.

当然，它只有在没有损坏前 4 个字节的情况下才会起作用。

# jpa - Netbeans 平台和 JPA

> ID：13011586
> 
> 赞同：0
> 
> 时间：2012-10-22T12:35:10.380
> 
> 标签：jpa, netbeans, netbeans-platform

我在 Java EE 中的 JPA 方面有相当长的一段时间的经验。现在我想使用 JavaSE 开发一个带有 Netbeans 平台的桌面应用程序。

（我指的不是简单地使用 Netbeans IDE 进行编码，而是使用[Netbeans 平台](http://netbeans.org/features/platform/index.html)开发使用 JavaSE 的胖客户端应用程序。）

任何人都可以指向我展示 JPA 对 Nebeans 平台应用程序的支持的文档吗？谷歌搜索没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:55:32.063

这个问题确实很合适。

[这里有一个关于如何做到这一点](http://platform.netbeans.org/tutorials/nbm-crud.html)的教程

# android - android - 安卓 2.1 上的 SDK 4.0

> ID：13011587
> 
> 赞同：2
> 
> 时间：2012-10-22T12:35:12.113
> 
> 标签：android

即使我在android上做了一些应用程序，我仍然感到困惑。是否可以使用 SDK 4.0 中的功能，并在 android 2.1 或更低版本上运行应用程序？

我尝试了你们提到的方法，但出现错误 -

字段需要 API 级别 11（当前最小值为 7）：android.os.AsyncTask#THREAD_POOL_EXECUTOR，如果我将 min 更改为 11，应用程序无法在 android 2.1 上安装，所以即使我可以使用更高的 API，但它仍然可以t在android较低版本上运行...如何解决？

根据 Kzinch 的建议，将 TargetApi 设置为 11，然后它就可以工作了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:25:54.887

如果您想要一个同时在 SDK4 和 SDK 2.1 上运行的程序，您有两种可能性。一种是在需要时为您的代码提供替代实现，即，如果 SDK4 中的某些功能在 SDK2.1 中不可用，那么您在代码中添加一个条件块，用于检查 SDK 版本并为每个分支提供代码。

另一种可能性是使用[Android 支持库](http://developer.android.com/tools/extras/support-library.html)以便为两个 SDK 使用**相同的代码**（不需要条件块）。如果您需要 SDK4 提供但 SDK2.1 不需要的功能，您可以检查该功能是否由支持库提供。如果是，您可以使用它，您的代码将在 SDK4 和 SDK2.1 上运行良好，无需任何版本检查。例如，如果您需要使用`LruCache`自 API 级别 12 起可用的类（因此在 SDK2.1 上不可用），您可以使用提供该功能并适用于 SDK2.1 和 SDK4 的 v4 支持库。所以在你的代码中你会使用

```
import android.support.v4.util.LruCache; 
```

代替

```
import android.util.LruCache; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:40:42.240

是的，您可以在代码中使用来自较高 API 的函数，但您必须确保它们永远不会在运行时在较低 API 上调用。

您应该在运行时检查 API 级别并提供该 API 级别存在的替代实现。

让我提供一些简单的例子：

```
 SharedPreferences.Editor edit = PreferenceManager
            .getDefaultSharedPreferences(getActivity()).edit();
    edit.putInt(KEY, VALUE);
    if (Build.VERSION.SDK_INT >= 9) {
        edit.apply();
    } else {
        edit.commit();
    } 
```

`apply()`方法是一种更快（异步）的`commit()`方法实现，但它在低于 9 的 API 级别上不受支持。在 API 版本检查的帮助下，它对所有设备都适用。

**更新**@TargetApi 注释可用于抑制 API 检查的 Lint 警告/错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T12:42:32.790

it doesn't matter what SDK level you compile your code against. Important is which methods/classes are you calling/instantiating.

If you use any newer classes or methods your code WILL crash running on older devices. The suggested method to deal with it is Lazy Loading: [http://android-developers.blogspot.co.uk/2010/07/how-to-have-your-cupcake-and-eat-it-too.html](http://android-developers.blogspot.co.uk/2010/07/how-to-have-your-cupcake-and-eat-it-too.html)

and remember, I'm saying this about the SDK.

The compatibility pack is a library developed by google that you can add to any project and use the functions of the library without issues.

Furthermore, there're 3rd party libraries (such as the ActionBar Sherlock [http://actionbarsherlock.com/](http://actionbarsherlock.com/) that aims to bring higher SDK level functionalities to lower SDK levels)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T12:42:58.900

No. You cannot **use** methods from higher API, because the code to handle it is simply not present on lower version of API. You can, however target as high API version as possible, but you may take care to call these methods on right API. You can easily check that at runtime with. i.e.

```
f( Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ) {
     // code to be run on Honeycomb and higher versions
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T12:42:22.710

If you are using the API which are specific to higher version, then the app wont work in older version.As those are not defined in the older version it will throw an error.That is the reason we restrict apps before uploading into market using minSDK in AndroidManifest.xml.

# java - 从多个表中检索信息

> ID：13011589
> 
> 赞同：0
> 
> 时间：2012-10-22T12:35:24.453
> 
> 标签：java, sql, netbeans

我有 3 个表，称为 Drivers、Offenses 和 Points，到目前为止，我正在使用 3 个 sql 字符串在表中插入和更新数据

```
String command1 = "INSERT INTO Drivers (IDNumber, FirstName, LastName) VALUES" + drivID + FName + LName;
String command2 = "INSERT INTO Offences(IDNumber, SpeedLimit, DriverSpeed, SeatBelt, DrunkenDriving, DriversLicense) VALUES" + drivID + intspeed + intDSpeed + strSeat + strDrunk + strLicense;
String command3 = "INSERT INTO DriverPoints(IDNumber, Points) VALUES" + drivID + intpoints; 
```

每个表通过主键 IDNumber 相互连接

有没有办法代替 3 个 Sql 命令/字符串，我只能有 1 个但仍然能够插入和更新所有 3 个表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:38:51.760

写一个[`Stored Procedure`](http://en.wikipedia.org/wiki/Stored_procedure)。

但是，要使其独立于平台，您应该使用[`ANSI SQL`](http://wiki.answers.com/Q/What_Is_ANSI_SQL)语法。

根据 BigMike 的评论，您还可以创建一个视图。[`This`](https://stackoverflow.com/questions/2923543/how-can-i-create-a-view-from-more-than-one-table)将为创建视图提供更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:44:39.620

粗略地说，您的查询应该如下所示：

```
SELECT d.IDNumber, d.FirstName, d.LastName, o.SpeedLimit, o.DriverSpeed, o.SeatBelt, o.DrunkenDriving, o.DriversLicense, p.Points 
  FROM Drivers d
JOIN Offences o on (d.IDNumber = o.IDNumber)
JOIN DriverPoints p on (d.IDNumber = p.IDNumber)
WHERE (...) -- Whathever where condition you like 
```

这将读取所有内容。

对于更新，您必须执行 3 个不同的更新语句或使用存储过程或视图，但这实际上取决于您使用的数据库。

编辑：对于插入，我建议您使用 PreparedStatements

```
String command1 = "INSERT INTO Drivers (IDNumber, FirstName, LastName) VALUES (?, ?, ?)";
PreparedStatement ps = connection.prepareStatement(command1);
ps.setInteger(1, drivID );
ps.setString(2, FName );
ps.setString(3, LName );
ps.execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:51:18.447

您不能用一个语句插入多个表，所以简短的回答是否定的。您将需要三个语句来插入三个表。

此外，您的语法需要更像：
`String command1 = "INSERT INTO Drivers (IDNumber, FirstName, LastName) VALUES (" + drivID + ", " + FName + ", " + LName + ")";`

注意逗号和大括号的添加。

此外，如果您的意思是这样，您可以将所有语句放入一个*查询中。*

# asp.net-mvc-3 - asp.net MVC 3 Razor 视图字符串中的链接

> ID：13011590
> 
> 赞同：0
> 
> 时间：2012-10-22T12:35:26.117
> 
> 标签：asp.net-mvc-3, razor

我正在使用 Razor 视图在 asp.net MVC 3 应用程序中工作。

我有字符串，我需要在其中添加一个链接，如下所示：

```
var closingMsg = "Thank you for submitting your dispute. If you wish, you may <a href='<%= Url.Action('Index', 'Product') %>purchase our SMS alert service</a> for immediate notification of any creditor response or request."; 
```

但它给出了错误。

请建议如何使用 href 或 HTML.actionLink 进行操作。我还需要将样式应用于链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:48:43.453

剃须刀使用`@`而不是`<% %>`

所以它会是这样的

```
<a href='@Url.Action('Index', 'Product')... 
```

这是非常基础的，建议您学习一些初学者教程来熟悉基础知识。

# c# - 将参数传递给 ViewModel 并显示其数据

> ID：13011591
> 
> 赞同：1
> 
> 时间：2012-10-22T12:35:27.390
> 
> 标签：c#, wpf, visual-studio-2010

[在 CodeProject 的这篇文章](http://www.codeproject.com/Articles/72724/Beginning-a-WPF-MVVM-application-Navigating-betwee)之后，我创建了一个使用 WPF 和 MVVM 的应用程序。

我有一个视图，`TVSeriesView`，它有一个`TVSeriesViewModel`. 这两个使用 DataTemplate 连接，这是在文章之后完成的。

```
<DataTemplate DataType="{x:Type Implementation:TVSeriesViewModel}">
    <TVSeriesLibrary:TVSeriesView />
</DataTemplate> 
```

这个想法是将我的模型传递`TVSeries`给这个 ViewModel，因为我有一个`TVSeries`在 ViewModel 中命名的属性。设置此属性后，我将填充其他属性，例如`Title`,`Cover`等等。这些属性旨在绑定到视图中的控件。

```
public class TVSeriesViewModel : ViewModelBase, ITVSeriesViewModel
{
    private TVSeries _tvSeries;
    private string _title;
    private ImageSource _cover;

    public TVSeries TVSeries
    {
        get
        {
            return this._tvSeries;
        }
        set
        {
            this._tvSeries = value;
        }
    }

    public string Title
    {
        get
        {
            return this._title;
        }
        set
        {
            this._title = value;
            OnPropertyChanged("Title");
        }
    }

    public ImageSource Cover
    {
        get
        {
            return this._cover;
        }
        set
        {
            this._cover = value;
            OnPropertyChanged("Cover");
        }
    }
} 
```

首先，这听起来像是正确的方法吗？

接下来，有谁知道如何将参数（`TVSeries`对象）传递给 ViewModel，当`TVSeriesView`？

最后，有谁知道我如何直接访问视图中的资源？例如，如果我不想使用数据绑定，而是想像这样直接设置图像：

`myImage.ImageSource = myImageSource`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:03:44.513

View 和 ViewModel 一起是模型的可能表示形式之一。

您可以传递一个存储库句柄，该句柄最终将负责数据访问或模型的具体/抽象对象，通过构造函数或
依赖注入的依赖注入，通过属性/方法或更粗略的方式，您可以在 VM 中编写数据库访问代码（显然不建议这样做。）

我更喜欢这里给出的顺序。您的代码正在执行第三个选项。

# vba - 用于 Outlook 的 VBA 脚本，用于在 Web 浏览器中自动打开邮件正文中的 URL，用于所有传入邮件

> ID：13011593
> 
> 赞同：2
> 
> 时间：2012-10-22T12:35:40.637
> 
> 标签：vba, outlook

我对编写 VBA 脚本很陌生。实际上，我正在尝试编写一个小的 VBA 脚本，它将通过新收到的电子邮件，扫描邮件正文并打开所有 url（我将此脚本定位为始终包含单个 URL 的邮件） IE、FF 或 Chrome 等网络浏览器。我尝试在 SO 和 Google 上寻找类似的 Q。我在这里找到了一个：[如何在一封电子邮件到达时启动一个 URL，该 URL](https://stackoverflow.com/questions/619079/how-to-launch-a-url-when-an-email-arrives)这是关于如何在电子邮件到达时打开 URL。但它总是打开一个固定的 URL，而不是通过邮件正文并从那里选择 URL。另外，我发现了这个：[Using VB/VBA to search Outlook messages and extract specific data into Excel worksheet](https://stackoverflow.com/questions/5826158/using-vb-vba-to-search-outlook-messages-and-extract-specific-data-into-excel-wor)它通过消息正文来选择/搜索某些东西。在我的场景中，我想合并两者，但我无法提出基本脚本。有人可以给我一些整合这两者的指导，并帮助我实现每当有新邮件到达 Outlook 邮箱时从邮件正文打开 URL 的目标。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T04:32:39.197

```
Sub LaunchURL(itm As MailItem)

    Dim bodyString As String
    Dim bodyStringSplitLine
    Dim bodyStringSplitWord
    Dim splitLine
    Dim splitWord

    bodyString = itm.Body
    bodyStringSplitLine = Split(bodyString, vbCrLf)

    For Each splitLine In bodyStringSplitLine
        bodyStringSplitWord = Split(splitLine, " ")

        For Each splitWord In bodyStringSplitWord
            If Left(splitWord, 7) = "http://" Then
                Shell ("C:\Program Files\Internet Explorer\IEXPLORE.EXE" & " " & splitWord)
            End If
        Next

    Next

    Set itm = Nothing

End Sub

Private Sub test()
    Dim currItem As MailItem
    Set currItem = ActiveInspector.currentItem
    LaunchURL currItem
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T00:11:06.690

Alpha，我觉得这东西有点不安全，即使你的规则只有来自特定域的人。这是一个好主意，当您使用您创建的变量检查 urlstring 时（例如仅来自本地 Intranet 的链接）。

```
if splitWord like "my_company_internat_url" then '... 
```

# drupal - Drupal #limit_validation_errors 不起作用

> ID：13011594
> 
> 赞同：3
> 
> 时间：2012-10-22T12:35:42.940
> 
> 标签：drupal, drupal-7

我正在使用 Drupal FAPI 构建一个表单，并且有点复杂。我想要做的是放置一个按钮并在用户单击它时添加一些信息，因此我需要使用该按钮跳过验证。我正在尝试使用 #limit_validation_errors 属性，但似乎不起作用并且正在执行所有验证。

我注意到，当我将元素放在表单树的根级别时，它确实有效。这就是我所拥有的：

```
$form['application']['education']['add_education'] = array(
    '#type' => 'submit',
    '#value' => 'Add',
    '#submit' => array('_education_submit'),
    '#limit_validation_errors' => array(),
); 
```

上面的代码不起作用，下面的代码虽然有效：

```
$form['add_education'] = array(
    '#type' => 'submit',
    '#value' => 'Add',
    '#submit' => array('_education_submit'),
    '#limit_validation_errors' => array(),
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:34:12.777

看起来 Drupal 正在寻找 triggering_element 使用 value 属性进行比较；因为我有另一个具有相同值的按钮，所以系统会弄乱这些值并将另一个按钮作为单击的按钮。

要修复代码，我只需要更改按钮的#value 属性。当我更改树上的位置时它正在工作，因为在这种情况下，Drupal 选择了正确的按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T02:15:47.817

以下是使用此属性的示例：

```
$form['add_education'] = array(
    '#type' => 'submit',
    '#value' => 'Add',
    '#submit' => array('submit_function'),
    '#limit_validation_errors' => array(array('_education_submit')),
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-18T23:09:02.667

对于 Drupal 8，我必须从 a 切换`type="submit"`到`type="button"`以禁用错误 + 使用 Ajax。

```
 public function buildForm(array $form, FormStateInterface $form_state) {

    // ...

    // Create Draft Button
    $form['#prefix'] = '<div id="send-emails-manual-send-by-role-wrapper">';
    $form['#suffix'] = '</div>';
    $form['actions']['save_draft'] = [
      '#type' => 'button',
      '#value' => $this->t('Save Draft'),
      '#name' => 'submit__save_draft', // TODO: Make constant
      '#limit_validation_errors' => [],
      '#ajax' => [
        'callback' => [$this, 'ajaxSubmitForm'],
        'wrapper' => 'send-emails-manual-send-by-role-wrapper',
        'method' => 'replace',
        'effect' => 'fade',
      ],
    ];

    return $form;  
  }

  /**
   * Submit the form using ajax
   */
  public function ajaxSubmitForm(array &$form, FormStateInterface $form_state) {
    $this->submitForm($form, $form_state);
    return $form;
  } 
```

# objective-c - How to avoid grouping separator in NSNumberFormater until 5 digits

> ID：13011595
> 
> 赞同：1
> 
> 时间：2012-10-22T12:35:42.737
> 
> 标签：objective-c, macos, cocoa, numbers, nsnumberformatter

I have an application that needs to display metric units in millimeters and based on the research that I have done (e.g. [http://physics.nist.gov/cuu/pdf/sp811.pdf](http://physics.nist.gov/cuu/pdf/sp811.pdf)), it is recommended that you don't add grouping separators until you have 5 digits. Is this possible with NSNumberFormatter? I know I could test the value and enable/disable grouping based on its size but I would rather use the appropriate configuration for the NSNumberFormatter if it exists. (BTW, I am on Mac OS X) So for example:

3456 should be shown as 3456 mm

10234 should be shown as 10,234 mm (assuming comma is the grouping separator)

I have read the Apple docs and didn't see anything. I experimented with different searches to find the answer on Stackoverflow but couldn't find a similar question.

Here is how I am currently setting up my NSNumberFormatter:

```
if (numberFormatter == nil) {
    numberFormatter = [[NSNumberFormatter alloc] init];
    [numberFormatter setRoundingMode:NSNumberFormatterRoundHalfUp];
    [numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
    [numberFormatter setLocale:[NSLocale currentLocale]];
    [numberFormatter setMinimumFractionDigits:0];
    [numberFormatter setMaximumFractionDigits:2];
}

NSNumber *numberInMM = [NSNumber numberWithFloat:fLenInMMs];
NSString *numberStr = [numberFormatter stringFromNumber:numberInMM];
numberStr = [numberStr stringByAppendingString:@" mm"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:54:36.277

```
long long d = fLenInMMs;
if (d>9999) {
    NSNumberFormatter *numberFormatter=nil;
    if (numberFormatter == nil) {
        numberFormatter = [[NSNumberFormatter alloc] init];
        [numberFormatter setRoundingMode:NSNumberFormatterRoundHalfUp];
        [numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
        [numberFormatter setLocale:[NSLocale currentLocale]];
        [numberFormatter setMinimumFractionDigits:0];
        [numberFormatter setMaximumFractionDigits:2];
    }

    NSNumber *numberInMM = [NSNumber numberWithFloat:fLenInMMs];
    NSString *numberStr = [numberFormatter stringFromNumber:numberInMM];
    numberStr = [numberStr stringByAppendingString:@" mm"];
    NSLog(@"%@", numberStr);
}
else {
    NSNumber *numberInMM = [NSNumber numberWithFloat:fLenInMMs];
NSString *numberStr =   [NSString stringWithFormat:@"%@ mm",numberInMM];
} 
```

**EDIT**

You can also subclass `NSNumberFormatter` and implement

```
- (NSString *)stringFromNumber:(NSNumber *)number
{
    NSNumber *nm = [NSNumber numberWithInt:9999];

    if (NSOrderedAscending==[number compare:nm]) {
        return [NSString stringWithFormat:@"%@ mm",number];
    }

    return [super stringFromNumber:number];
} 
```

# jquery - Anchor tag stripped from URL on form submit

> ID：13011598
> 
> 赞同：6
> 
> 时间：2012-10-22T12:35:55.327
> 
> 标签：jquery, expressionengine, zurb-foundation

Freeform version: 4.07 ExpressionEngine v2.5.3 - Build Date: 20120911

I have a freeform form inside a jQuery tab. When the form is submitted with erros, the anchor for that tab is stripped from the URL. This takes me back to the first tab and not the tab with the form in. Is there a way to redirect the user back to the form tab?

Thanks

```
<li id="qaTab">
  {exp:freeform:form
  form_id="2"
  required="name|email|user_message"
  return="contact_us/thank_you"
  recipients="yes"
  recipient1="Happy Harry|h_harry@somemail.com"
  recipient2="Lazy Larry|lazyl63@somemail.com"
  recipient_template="contact_form"
  notify_user="yes"
  user_email_field="user_email"
  inline_errors="yes"
  }
   {if freeform:general_errors}
    <h2>There were some error(s) with your submission:</h2>
   <ul>
   {freeform:general_errors}
    <li>{freeform:error_message}</li>
   {/freeform:general_errors}
   </ul>
   {/if}
   <div class="row">
    <div class="six columns">
     <label>{freeform:label:name}</label>
     {freeform:field:name}
     {if freeform:error:name}<small class="error">{freeform:error:name}</small>{/if}
    </div>
    <div class="six columns">
     <label>{freeform:label:email}</label>
     {freeform:field:email}
     {if freeform:error:email}<small class="error">{freeform:error:email}</small>{/if}
    </div>
   </div>
   {freeform:label:user_message}
   {freeform:field:user_message}
   {if freeform:error:user_message}
   <small class="error">{freeform:error:user_message}</small>{/if}
   <input type="hidden" name="subject" value="{title}" id="subject">
   <input type="submit" name="submit" value="Submit" id="submit" class="button">
  {/exp:freeform:form}
 </li> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T18:39:45.527

您应该使用 jQuery 通过以下方式解决此问题：

1.  检查是否存在类错误
2.  如果存在：打开带有表单的选项卡
3.  其他：什么都不做

这将是这样的：

```
if ($(".error").length > 0) {  
    $("#tabs").tabs("select", "#qaTab");
} 
```

祝你好运！

# c# - 在 DataGrid 中显示随机 XML 文件

> ID：13011599
> 
> 赞同：1
> 
> 时间：2012-10-22T12:36:04.453
> 
> 标签：c#, xml

我一直在关注[这篇](http://support.microsoft.com/kb/307548)文章，将 XML 文件读入 datagridview 控件。

我在这里发布了相关的代码。

```
string filePath = "Complete path where you saved the XML file";
dsAuthors.ReadXml(filePath);
dataGrid1.DataSource = dsAuthors;
dataGrid1.DataMember = "authors";
dataGrid1.CaptionText = dataGrid1.DataMember; 
```

**现在我希望能够在**不知道 XML 文件的元素的情况下读取任何 XML 文件，但是上面的方法需要我声明在`dataGrid1.DataMember = "authors";`随机 XML 文件的情况下，我不会知道。

谢谢，

阿比杰特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:42:46.097

幸运的是，以下属性已被填充：

```
dataGrid1.DataMember = dsAuthors.Tables[0].Tablename; 
```

# java - Checkstyle - 每行一个声明对齐到一个块

> ID：13011609
> 
> 赞同：2
> 
> 时间：2012-10-22T12:37:05.397
> 
> 标签：java, eclipse, checkstyle

我正在尝试配置 Eclipse Checkstyle，但我找不到两件事的选项：

在方法中，我希望每个声明都有一个新行：

```
public int calc (int x, 
                 int y,
                 int z) {
} 
```

并不是：

```
public int calc (int x, int y, int z) {
} 
```

声明应该像这样包装

```
private var                a;
private int []             b = null;
private ArrayList<Integer> c = new ArrayList<Integer> (); 
```

并不是：

```
private var a;
private int [] b = null;
private ArrayList<Integer> c = new ArrayList<Integer> (); 
```

我已经尝试过“MultipleVariableDeclarations”和 OneStatementPerLine，但它们仅在方法内部有效，不适用于方法的参数。

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:42:20.217

我认为没有内置的 Checkstyle 规则。内置规则旨在保持一种常见且既定的风格。就像@yegor256 已经说过的那样，你的不是。您可以浏览[此站点](http://checkstyle.sourceforge.net/availablechecks.html)以查找符合您要求的任何检查。我找不到任何东西。作为最后的选择，您可以随时[编写自己的支票](http://checkstyle.sourceforge.net/writingchecks.html)。

代码格式化程序的提示：转到`Window`->`Preferences`并为`Save Actions`. 在那里你可以定义你的代码在保存时应该总是被格式化。也许您不需要像 Checkstyle 这样的工具来警告您未格式化的代码。

# sql-server - filtering duplicate string in database

> ID：13011610
> 
> 赞同：0
> 
> 时间：2012-10-22T12:37:12.127
> 
> 标签：sql-server

My application sends bulk messages to customers. What I want is:

1.Application should not accept more than 10 duplicate message per day. 2.should be checked for same sender, same number and on same message.

How can i do it in database? The sent message details are saved in a table and it has columns to store sender id, mobile no, message and datetime

Before insertion, the condition should be checked.

please help me out.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:55:00.827

您可以在表上创建触发器以对其进行验证，或者在插入之前通过查询检查 UI。

# macos - Mac 查询表

> ID：13011618
> 
> 赞同：0
> 
> 时间：2012-10-22T12:37:36.737
> 
> 标签：macos, excel, vba

我编写了一个脚本，它使用查询表将来自雅虎财务的数据下载到 excel 中。它应该遍历每个 URL 并下载数据，但它无法通过第二个循环并在 .Refresh BackroundQuery:=False 处失败，错误代码为 1004 - 发生意外错误。

这是代码：

```
rowOffset = 0
url = Worksheets("Yahoo codes").Range("b2").Offset(rowOffset, 0)

Do While url <> ""

With ActiveSheet.QueryTables.Add(Connection:="URL;" & url, Destination:=Worksheets("Yahoo Data").Range("A65536").End(xlUp).Offset(1, 0))
    .RefreshStyle = xlOverwriteCells
    .SaveData = True
    .BackgroundQuery = True
    .Refresh BackgroundQuery:=False

    '.Refresh

End With

rowOffset = rowOffset + 1
url = Worksheets("Yahoo Data").Range("a2").Offset(rowOffset, 0)
Loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:29:35.693

看起来您从 B2 获得第一个 URL，从 A3 获得后续 URL ...

当您收到错误时，进入即时窗口 (Ctl+G) 并键入

```
?Worksheets("Yahoo Data").QueryTables(2).Connection 
```

看看它是否正确。如果不是，我怀疑你的第二个`url = ...`陈述是错误的。

# c# - 发送电子邮件时出现异常消息

> ID：13011621
> 
> 赞同：1
> 
> 时间：2012-10-22T12:37:42.970
> 
> 标签：c#, asp.net, c#-4.0, c#-3.0

例外：

> SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.7.1 客户端未通过身份验证

我没有使用`Defaultcredentials`，所以我设置`client.UseDefaultCredentials = false;` 了另外，我提供了有效的电子邮件 ID 和密码、主机名和端口号；但是，我仍然得到相同的异常。我该如何解决这个问题？提前感谢您的帮助。

```
public void SendCustomerForgotPassword(string mailTo, string forgotUserId, string forgotPassword) 
{ 
    string mailSubject = "", mailBody = "";
    mailSubject = ""; 
    StringBuilder sbMailBody = new StringBuilder(); 
    sbMailBody.AppendLine("Welcome to *****,"); 
    sbMailBody.AppendLine("\r"); 
    mailBody = sbMailBody.ToString(); 
    SetSmtpClient(mailTo, mailSubject, mailBody); 
}

    private void SetSmtpClient(string recipients, string subject, string body)
    {
        string EmailFrom = "here set an email id";
        string EmailFromPassword = "set password";

        System.Net.NetworkCredential credentials = new System.Net.NetworkCredential(EmailFrom, EmailFromPassword); 
        SmtpClient client = new SmtpClient(); 
        client.DeliveryMethod = SmtpDeliveryMethod.Network; 
        client.EnableSsl = true; 
        client.Host = "pod51018.outlook.com"; 
        client.Port = 587; 
        client.UseDefaultCredentials = false; 
        client.Credentials = credentials; 
        client.Send(EmailFrom, recipients, subject, body);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:17:05.703

就像消息指出的那样，您没有经过身份验证。

在您的代码中：

```
string EmailFrom = "";
string EmailFromPassword = "";

        System.Net.NetworkCredential credentials = new System.Net.NetworkCredential(EmailFrom, EmailFromPassword); 
```

如果这是您的确切代码-您传递的是空的用户名和密码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:18:18.817

您需要检查以下详细信息是否正确（如 Office 365 面板上显示的详细信息）

1.  主机名
2.  电子邮件地址
3.  密码

该代码看起来不错（假设您实际上传递了地址/密码**，因为它是代码中的空白字符串**），因此它可能是您的设置中的一个问题。

# android - 如何从谷歌地图为Android应用程序更新文本字段中当前位置的地址

> ID：13011625
> 
> 赞同：0
> 
> 时间：2012-10-22T12:38:09.340
> 
> 标签：android, google-maps

嗨，我正在努力创建应用程序，该应用程序获取当前位置的地址并随着谷歌地图的位置变化而更新它们。

它目前工作正常，但没有更新。我在文本视图上显示地址，谷歌地图上的当前位置标记随着当前位置的变化而变化，但地址不反映变化。它只显示第一个位置的地址，不更新...

谁能告诉我我做错了什么？首先十分感谢。

下面是我的代码；

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    map = (MapView) findViewById(R.id.map);
    map.setBuiltInZoomControls(true);
    map.setClickable(true);

    map.getController().setZoom(17);

    tv = (TextView) findViewById(R.id.address_label);

    overlay = new MyLocationOverlay(getApplicationContext(), map);
    overlay.onProviderEnabled(LocationManager.GPS_PROVIDER);
    overlay.enableMyLocation();

    overlay.runOnFirstFix(new Runnable() {
        public void run() {

            GeoPoint g = overlay.getMyLocation();
            map.getController().animateTo(g);
            map.getController().setCenter(g);

            Geocoder geoCoder = new Geocoder(getBaseContext(), Locale
                    .getDefault());
            boolean chk1 = isNetworkAvailable();
            if (chk1 == true) {

                try {
                    List<Address> addresses = geoCoder.getFromLocation(
                            g.getLatitudeE6() / 1E6,
                            g.getLongitudeE6() / 1E6, 1);
                    add="";
                    if (addresses.size() > 0) {
                        for (int i = 0; i < addresses.get(0)
                                .getMaxAddressLineIndex(); i++)
                            add += addresses.get(0).getAddressLine(i) + ", ";
                    }

                } catch (Exception e) {
                    e.printStackTrace();
                }
                ui_handler.post(new Runnable() {
                    public void run() {
                        tv.setText(add);
                    }
                });
            } else {
                ui_handler.post(new Runnable() {
                    public void run() {
                        tv.setText("Connection not found.");

                    }
                });
            }

        }
    });

    map.getOverlays().add(overlay);
    map.invalidate();

} 
```

# mysql - MySQL将数据添加到现有字段

> ID：13011634
> 
> 赞同：1
> 
> 时间：2012-10-22T12:38:43.857
> 
> 标签：mysql, field, updates

我有一个字段`enq_id`- 它目前包含以下数字：

```
80081
414365
567 
```

现在，我需要以两种方式更新该字段，首先我需要找出是否有任何数字超过 6 个字符（不应该，但我需要检查）。然后我需要在该字段上设置 6 个字符的字符限制，然后，最后，添加`0's`到任何`enq_id`不是 6 个字符长的字符的开头，使其变为 6 个字符。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:57:53.410

如果以下返回您尝试实现的结果：

```
SELECT
    `enq_id`,
    IF(CHAR_LENGTH(`enq_id`) < 6,
        LPAD(`enq_id`,6,'0'),
        SUBSTRING(`enq_id`,1,6)
    ) AS 'result'
FROM `some_table`
WHERE CHAR_LENGTH(`enq_id`) != 6 
```

然后使用以下内容将相应地更新您的表格。

```
UPDATE `some_table`
SET `enq_id` = 
    IF(CHAR_LENGTH(`enq_id`) < 6,
        LPAD(`enq_id`,6,'0'),
        SUBSTRING(`enq_id`,1,6))
WHERE CHAR_LENGTH(`enq_id`) != 6 
```

请注意，该`SUBSTRING()`函数会删除第 6 个字符之后的所有字符，如果需要，LPAD 会在每条记录中添加前面的零（在上面的示例中）。

* * *

**更新：**出于某种原因，我添加了一个额外的条件。优化的代码应该是：

```
SELECT `enq_id`,LPAD(`enq_id`,6,'0') AS 'result'
FROM `some_table`
WHERE CHAR_LENGTH(`enq_id`) < 6 
```

和

```
UPDATE `some_table`
SET `enq_id` = LPAD(`enq_id`,6,'0')
WHERE CHAR_LENGTH(`enq_id`) < 6 
```

# mysql - mysql优化表

> ID：13011636
> 
> 赞同：5
> 
> 时间：2012-10-22T12:38:47.050
> 
> 标签：mysql, optimization

我想创建一个朋友系统（类似于 facebook）。

我想在MySql中保存关系数据，但不知道哪种方式更好：

1.  将每一个关系保存为一个条目，例如：

    ```
    id | people1 | people2
    1  | john    | maria
    2  | john    | fred
    3  | maria   | fred 
    ```

    （我宣布这三个人之间的关系）

2.  要保存每个人的姓名并列出他的朋友：

    ```
    id | people | friends
    1  | fred   | mary, john
    2  | mary   | john, fred
    3  | john   | fred, mary 
    ```

或者也许有更好的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T12:46:05.447

不亲爱的，

你只需要一张桌子来建立朋友关系。结构如下我用过

id（主键） | my_id( 整数登录用户 id ) | friend_id （另一个用户的整数用户ID，他将收到来自登录用户的好友请求）

就像我们的用户表中有两个用户，那么我们有两个条目供两个用户相互建立关系

```
id | name | age
1  | vipan | 12
2  | karan | 12 
```

那么条目应该是

```
id | my_id | friend_id
 1     1        2
 2     2        1 
```

请不要在任何情况下投反对票，但我在我的网站中使用了这个表结构，这与 joomsocial 中使用的结构相同，这是我认为最好的表结构，所以我使用它，请不要在表中使用逗号分隔值他们在某些情况下会导致连接和关系出现问题

请参阅以下帖子链接中的 4 号评论

[从 mysql 表中分隔逗号分隔值](https://stackoverflow.com/questions/9906430/separate-comma-separated-values-from-mysql-table)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T12:46:40.447

第一个无疑是最好的，因为第二个不会尊重第[一个范式](http://en.wikipedia.org/wiki/First_normal_form)。

您必须避免在同一列中有多个值，因为编辑起来会很痛苦

[这](http://en.wikipedia.org/wiki/Database_normalization)是关于数据库规范化的链接。大多数时候，我们尊重第三范式，因为它是规范化和性能之间的良好折衷。

此外，就像 Randy 所说，您必须使用 ID，然后才能将它们与外键链接。

# java - 使用 solrj 检索 json 格式的 SolrDocument

> ID：13011637
> 
> 赞同：2
> 
> 时间：2012-10-22T12:38:50.823
> 
> 标签：java, solr, solrj

如何指定 SolrQuery 以 json 格式返回数据？下面是我用来查询数据的代码：一旦我得到 SolrDocument，我如何将它转换为 json 对象/字符串？

```
 SolrQuery sQuery = new SolrQuery();
 sQuery.setQuery("name:test");
 QueryResponse resp = server.query(sQuery);
 SolrDocumentList docs = resp.getResults(); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-04T18:27:00.063

从 solrj 导入 JSONUtil 类，它具有 solr 文档的 json 转换器，或者如果您看到该类的代码，您可以轻松编写一个：

```
import org.apache.noggit.JSONUtil;

SolrQuery sQuery = new SolrQuery();
sQuery.setQuery("name:test");
QueryResponse resp = server.query(sQuery);
SolrDocumentList docs = resp.getResults();
String returnValue = JSONUtil.toJSON(docs); //this has the json documents 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T12:47:50.530

SolrJ 旨在将文档检索/转换为您定义的 POJO。如果要将文档转换为 JSON，则需要使用[Jackson](http://wiki.fasterxml.com/JacksonHome)之类的库将 SolrDocument 转换为 JSON。

不确定这是否适合您，但想提一下，您可能会考虑从已格式化为 JSON 的 Solr 获取响应。有关更多详细信息，请参阅[SolJSON](http://wiki.apache.org/solr/SolJSON)。在这种情况下，您不需要使用 SolrJ。最简单的方法是使用直接的 http 调用（通过 java http 客户端库）并使用 SolJSON 技术从 Solr 获取 JSON 响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-15T04:20:55.047

您也可以使用**GSON**来完成。

```
SolrDocumentList SolrResponse = searchWithSolr();
Gson gson = new Gson();
if (SolrResponse.size()!=0) {
  System.out.println(gson.toJson(SolrResponse));
  interpolMap.put("interpol", gson.toJson(InterpolSolrResponse));
}
```

# c++ - winAPI c++ 禁用无线适配器

> ID：13011639
> 
> 赞同：2
> 
> 时间：2012-10-22T12:38:53.743
> 
> 标签：c++, winapi, wifi, adapter

我一直在使用 Native Wi-Fi WinAPI 文档，但我仍然看得很清楚。

我想通过使用 C++ 中的 WinAPI 关闭计算机的无线适配器和蓝牙适配器。我几乎可以肯定我必须使用`WlanSetInterface`上述库中的函数，但我不能让它工作。我不知道如何正确调用该函数。

以前有没有人做过同样的任务，所以我可以得到一些帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:03:33.993

目前尚不清楚“关闭无线适配器”是什么意思，但据我所知，SetupDiChangeState API 可用于启用/禁用设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:37:41.753

查看 SetupApi 这个 api 允许你篡改硬件设备。你不能使用 wifi api 或蓝牙来做到这一点。

# c++ - 将抽象类传递给 i/o 宏

> ID：13011640
> 
> 赞同：3
> 
> 时间：2012-10-22T12:39:08.440
> 
> 标签：c++

我通过确保继承层次结构中的类实现虚拟读写功能来实现序列化：

```
class base
{
     ...

     virtual void read(std::istream&)=0;
     virtual void write(std::ostream&) const=0;
     virtual std::string is_a() const;
};

BEGIN_NAMESPACE_1(io)
    SERIALISE(base)
END_NAMESPACE_1 
```

其中宏“SERIALISE”实现了“serialise”和“deserialise”函数的重载，以允许通过基类指针轻松输入/输出：

```
#define SERIALISE(TYPE)\
void deserialise( boost::shared_ptr<TYPE>& dat, std::istream& ifs )\
{\
    std::string type;\
    read(type, ifs);\
\
    dat = TYPE::make_##TYPE(type);\
    dat->read(ifs);\
}\
\
void serialise( const boost::shared_ptr<TYPE>& dat, std::ofstream& ofs )\
{\
    write(dat->is_a(), ofs);\
    dat->write(ofs);\
} 
```

但是，如果基类包含纯虚函数，我会收到编译器错误“无法分配抽象类型“基”的对象，因为以下函数在“基”中是纯的......”，大概是因为编译器试图实例化抽象类名传递给宏调用时的基类。有没有办法挽救这个 i/o 设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:30:03.033

您不能实例化抽象基类或将其用作函数的值参数。

> **模板显式 shared_ptr(Y * p); 要求：p 必须可转换为 T *。Y 必须是完整类型。**表达式 delete p 必须是格式正确的，不能调用未定义的行为，也不能抛出异常。
> 
> 效果：构造一个拥有指针 p 的 shared_ptr。
> 
> 后置条件：use_count() == 1 && get() == p。
> 
> 抛出：std::bad_alloc，或者当无法获取内存以外的资源时发生实现定义的异常。
> 
> 异常安全：如果抛出异常，则调用 delete p。
> 
> 注意： p 必须是指向通过 C++ new 表达式分配的对象的指针，或者为 0。即使 p 为 0，使用 count 为 1 的后置条件也成立；对值为 0 的指针调用 delete 是无害的。

在这种情况下，编译器不必将模板 shared_ptr 解析为内部具有 TYPE 类型的值，因为它们永远不能被实例化。

# c# - 如何在 ASP.NET/C# 中创建选择列表？

> ID：13011642
> 
> 赞同：0
> 
> 时间：2012-10-22T12:39:16.573
> 
> 标签：c#, asp.net, html

我想做的只是一个非常简单的选择/选择列表，其中包含来自 MySQL 数据库的值。

我试图在网上找到一个简单的解决方案（我是 C# 新手），我发现的一切都非常复杂。

我要做的就是生成`<select><option..`etc 部分，以及我想要设置的所有属性和值。

这似乎应该非常非常容易。任何人都可以给我一些基本的说明，或者给我一个说明如何完成这个的教程吗？

目前，我正在使用`MySqlCommand`and`MySqlDataReader`类与数据库通信（用于另一个函数）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:55:52.163

Create a class for the entity you want to display. Ex : If you want to show all states in the dropdown, create State class

```
public class State
{
  public int ID  { set;get;}
  public string Name { set;get;}
} 
```

Now write a method in which you query the database and get the result to the DataReader, Iterate over the items and set the values a new object of our State class. Add each object to a list (of State class). So your method's return type will be a List of `State` class object.

```
public List<State> GetStates()
{
  List<State> stateList=new List<State>();

  // execute query, read from reader and add to the stateList
  // the below code is SqlServer DB specific.
  // you need to change the Connection,Command class for it to use with MySql.
   using (var con= new SqlConnection("replace your connection string"))
   {
      string qry="SELECT ID,NAME FROM STATES";
      var cmd= new SqlCommand(qry, objConnection);
      cmd.CommandType = CommandType.Text;           
      con.Open();
      using (var objReader = cmd.ExecuteReader())
      {
        if (objReader.HasRows)
        {
           while (objReader.Read())
           {
             var item=new State();
             item.ID=reader.GetInt32(reader.GetOrdinal("ID"));
             item.Name=reader.GetString(reader.GetOrdinal("Name"));

             stateList.Add(item);
           }
         }
       }
    }
    return stateList;
} 
```

Now, have a DropDownList control in your page,

```
<asp:DropDownList id="states" runat="server" /> 
```

Now in the codebehind of this page, you can set the data for the dropdown( possibly in the Page_Load event)

```
if(!isPostBack)
{  
  states.DataSource=yourRepositary.GetStates();
  states.DataTextField="Name";
  states.DataValueField="ID";
  states.DataBind(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:55:07.790

I think what you searching for is something like a `DropDownList`, it accepts a `DataSource`, so you can use your already populated `MySqlDataReader` as it.

Something like this

```
MySqlDataReader dr = //the code to fill the MySqlDataReader
DropDownList1.DataSource = dr; 
```

You can create the DropDownList in the design of your page.

To show the data you need to set then the values

```
DropDownList1.DataValueField = "DbField1";
DropDownList1.DataTextField = "DbField2"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:52:08.790

通常，在列表/下拉列表中，您会获得 (a) 将被选择的值和 (b) 向用户呈现的值。第一个可能是一些主键，第二个可能是一些标签，对用户来说是不言自明的。

假设你有一张像食物这样的桌子

```
FoodValue | FoodLabel
---------------
00010     | Sausage
00020     | Eggs
00030     | Cheese 
```

在您的 ASP.NET 视图中放置一个列表框，例如 listBox1，然后您可以在后面的代码中使用

```
MySqlConnection con = new MySqlConnection("YOUR CONNECTION STRING");
MySqlCommand cmd = new MySqlCommand("SELECT FoodValue, FoodLabel FROM FOOD", con);
con.Open();
MySqlDataReader r = cmd.ExecuteReader();

while(r.Read()) {
    listBox1.Items.Add(new ListItem(r["FoodLabel"], r["FoodValue"]);
}
con.Close(); 
```

但请记住，这是一种快速而肮脏的方法。在生产代码中，您需要将表示层和数据层分开。使用数据源控件以更好的方式绑定您的数据。

# maven - Maven 在 Netbeans 7.x 中的 MissingProjectException

> ID：13011648
> 
> 赞同：3
> 
> 时间：2012-10-22T12:39:46.237
> 
> 标签：maven, netbeans

当我尝试在 NetBeans 中**构建、清理和构建**或**运行**（播放按钮）我*的“Maven Web 应用程序”*时，我得到以下输出：

```
cd E:\Dev\Apps\2012_2013\MyApp; JAVA_HOME=E:\\Apps\\Dev\\jdk7u5 "\"E:\\Apps (x86)\\Dev\\NetBeans7.0.1\\java\\maven\\bin\\mvn.bat\"" 安装-e
错误堆栈跟踪已打开。
正在扫描项目...
-------------------------------------------------- ----------------------
构建失败
-------------------------------------------------- ----------------------
总时间：0.138s
完成时间：2012 年 10 月 22 日星期一 13:16:36 CEST
最终内存：2M/15M
-------------------------------------------------- ----------------------
您指定的目标需要执行项目，但此目录 (E:\) 中没有 POM。请确认您从正确的目录调用了 Maven。-> [帮助 1]
org.apache.maven.lifecycle.MissingProjectException：你指定的目标需要一个项目来执行，但是这个目录（E:\）中没有POM。请确认您从正确的目录调用了 Maven。
    在 org.apache.maven.lifecycle.internal.LifecycleStarter.execute（LifecycleStarter.java:89）
    在 org.apache.maven.DefaultMaven.doExecute（DefaultMaven.java:319）
    在 org.apache.maven.DefaultMaven.execute（DefaultMaven.java:156）
    在 org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    在 org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    在 org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 java.lang.reflect.Method.invoke(Method.java:601)
    在 org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced（Launcher.java:290）
    在 org.codehaus.plexus.classworlds.launcher.Launcher.launch（Launcher.java:230）
    在 org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    在 org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)

使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。

有关错误和可能的解决方案的更多信息，请阅读以下文章：
[帮助1] http://cwiki.apache.org/confluence/display/MAVEN/MissingProjectException

```

这是我试图解决的问题：

*   卸载NetBeans 7.2，去掉.m2目录，去掉.nbi目录（不知道是不是属于NetBeans），重启重新安装NetBeans 7.2
*   卸载 NetBeans 7.2 并安装 NetBeans 7.0.1
*   修改项目的POM文件
*   修改我项目的 META-INF/ 文件夹中的 context.xml 文件，使其指向不同的路径。
*   通过添加正确的环境变量正确安装 Maven（适用于 mvn --version 在 cmdline 但在 NetBeans 中仍然错误）

当我使用 NetBeans 7.0.1 时，我的项目可以完美地构建和运行，直到我安装了 NetBeans 7.2。那是我开始收到此错误的时候。我的项目中有一个 POM 文件。无论我尝试什么，错误都不会消失。

**其他奇怪的行为**：

*   当我尝试在 NetBeans 中创建一个新的 Maven Web 应用程序时，它总是在我的驱动器 E:\ 的根目录下的一个文件夹中创建它，即使我明确告诉它将它安装在我的项目文件夹下。

**什么有效：**

*   我的项目成功构建和运行的唯一一次是在我的 Windows XP SP3 虚拟机中运行它们。所以我不知道在这里怎么想。哪个应用程序或配置有问题？我发现很难排除故障。

*   运行此命令：[https](https://cwiki.apache.org/confluence/display/MAVEN/MissingProjectException) ://cwiki.apache.org/confluence/display/MAVEN/MissingProjectException 从而使用我的项目的显式路径。我不想每次都这样做。我希望它像它应该的那样工作。

**规格**：

*   JDK 1.7
*   源代码 java
*   版本：1.6
*   操作系统：Windows 7 x64
*   使用的服务器：Tomcat 7.x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-27T12:14:37.790

当我将 Windows 寄存器中的命令提示符默认目录设置为 E:\ 时，我遇到了同样的问题： [http ://www.sevenforums.com/customization/77997-change-command-prompt-default-directory.html](http://www.sevenforums.com/customization/77997-change-command-prompt-default-directory.html)

在我删除了这个 regkey netbeans 后，它对我来说是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:18:38.373

这是一个很长的镜头，但这对我有用：

我遇到了同样的问题，我得到了一个新的工作站（使用 Windows 8 64 位）。我尝试构建我的 EJB 并得到了与您相同的异常。

我知道我的项目目录在我的文档目录中，我也知道这个目录实际上被重定向到服务器。这似乎是我现在在本地某个地方有我的项目并且一切正常的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-16T15:35:06.650

当我在 maven (linux) 中启动 tomcat 时遇到了同样的问题，然后它抛出了这个提示[在此处输入链接描述](https://cwiki.apache.org//confluence/display/MAVEN/MissingProjectException)

然后我发现你必须明确告诉 Maven 要构建的 POM 所在的位置，如下所示： mvn -f path/to/pom.xml ...

# php - php代码中的意外错误

> ID：13011651
> 
> 赞同：-5
> 
> 时间：2012-10-22T12:39:54.357
> 
> 标签：php

PHP新手。继续获取

> 解析错误：语法错误，意外的 T_ECHO

用我的代码。

```
<?php
header('Location: http://www.dcaccountancyservices.com/index.php?option=com_chronoforms&tmpl=component&chronoform=EditClient&token='  echo $client['id']);
?> 
```

无法弄清楚语法错误是什么。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:42:18.587

在你的行的最后，你有：

```
echo $client['id']); 
```

您正在尝试将 附加`$client['id']`到 URL，因此删除并将其`echo`替换为`.`：

```
header('Location: http://www.dcaccountancyservices.com/index.php?option=com_chronoforms&tmpl=component&chronoform=EditClient&token=' . $client['id']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:42:11.667

您必须连接这些值：

```
<?php
header('Location: http://www.dcaccountancyservices.com/index.php?option=com_chronoforms&tmpl=component&chronoform=EditClient&token='  . $client['id']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:42:21.020

try this

```
<?php
header('Location: http://www.dcaccountancyservices.com/index.php?option=com_chronoforms&tmpl=component&chronoform=EditClient&token='.$client['id']);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T12:42:30.303

```
header('Location: http://www.dcaccountancyservices.com/index.php?option=com_chronoforms&tmpl=component&chronoform=EditClient&token='.$client['id']); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T12:43:18.030

You do not use `echo` when you want to concatenate a string, you use `.` (dot). So change the your `header` line to:

```
header('Location: http://www.dcaccountancyservices.com/index.php?option=com_chronoforms&tmpl=component&chronoform=EditClient&token='.$client['id']); 
```

# python - 从 python 解释器内部创建管道

> ID：13011652
> 
> 赞同：3
> 
> 时间：2012-10-22T12:39:54.280
> 
> 标签：python, bash, python-3.x, pipe

有时我只想快速将大输出重定向到外部程序，假设在 Python 3.xi 中有

```
>>> import sys
>>> sys.modules.keys() 
```

我如何重定向输出

```
>>> sys.modules.keys() 
```

到特定的命令或应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T12:57:28.163

如果你经常做这样的事情，那么创建一个辅助模块可能会很有用，它基本上可以

```
def pipeinto(data, *prog):
    import subprocess
    sp = subprocess.Popen(prog, stdin=subprocess.PIPE)
    sp.stdin.write(str(data))
    sp.stdin.close()
    return sp 
```

这使您能够做到

```
pipeinto("\n".join(sys.modules.keys()), "gedit") 
```

# java - 如何使用 Maven Bundle Plugin (BND) 从存在于另一个依赖项中的依赖项中排除命名包？

> ID：13011654
> 
> 赞同：2
> 
> 时间：2012-10-22T12:39:58.217
> 
> 标签：java, osgi, bnd, maven-bundle-plugin

我有两个依赖项：

```
<dependency>
    <groupId>org.postgis</groupId>
    <artifactId>postgis-jdbc</artifactId>
    <version>1.5.2</version>
</dependency>
<dependency>
    <groupId>org.postgresql</groupId>
    <artifactId>com.springsource.org.postgresql.jdbc4</artifactId>
    <version>8.3.604</version>
</dependency> 
```

两个依赖导出包：

*   org.postgres

*使用 Maven Bundle Plugin 的wrap*命令时，如何排除从 postgis-jdbc导出*org.postgres ？*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:43:07.900

将以下内容添加到 pom 中的配置部分：

```
<Export-Package>!org.postgres</Export-Package> 
```

或者你可能会忽略任何包

```
<Export-Package>!*</Export-Package> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T11:55:47.073

使用 Maven 捆绑插件，我找不到一种实用的方法来选择性地排除选定包装依赖项的包导出。我的解决方案是将*com.springsource.org.postgresql.jdbc4*和*postgis-jdbc*都嵌入到我的包中，而不是导出它们的包：

```
<plugin>
    <groupId>org.apache.felix</groupId>
    <artifactId>maven-bundle-plugin</artifactId>
    <version>2.3.7</version>
    <extensions>true</extensions>
    <configuration>
      <instructions>
            ...
            <Embed-Dependency>
                postgresql;postgis-jdbc
            </Embed-Dependency>
            ...
        </instructions>
    </configuration>
    <executions>
        <execution>
          <phase>package</phase>
          <goals>
            <goal>bundle</goal>
           </goals>
        </execution>
    </executions>
</plugin> 
```*

# sql - 按组子句聚合函数警告

> ID：13011655
> 
> 赞同：1
> 
> 时间：2012-10-22T12:40:05.827
> 
> 标签：sql, ms-access, group-by, ms-access-2007

所以我一直在遇到这个问题，也许有人可以很好地解释它如何或为什么不起作用。我正在尝试仅按一列 CSHFutureTAs.Time 进行分组，并且我尝试集成简单的行

```
GROUP BY CSHFutureTAs.Time 
```

但是，这给了我一个错误“您尝试执行的查询不包含指定表达式'TA'作为聚合函数的一部分”，有人可以帮助我吗？

完整的 SQL（没有 GROUP CLAUSE）：

```
 SELECT CSHFutureTAs.TA
   , CSHFutureTAs.TIME AS CSHGeneralTAs_TIME
   , CSHFutureTAs.[CUT OFF         TIME]
   , CSHFutureTAs.SUNDAY AS CSHGeneralTAs_SUNDAY
   , CSHFutureTAs.MONDAY AS CSHGeneralTAs_MONDAY
   , CSHFutureTAs.TUESDAY AS CSHGeneralTAs_TUESDAY
   , CSHFutureTAs.WEDNESDAY AS CSHGeneralTAs_WEDNESDAY
   , CSHFutureTAs.THURSDAY AS CSHGeneralTAs_THURSDAY
   , CSHFutureTAs.FRIDAY AS CSHGeneralTAs_FRIDAY
   , CSHFutureTAs.SATURDAY AS CSHGeneralTAs_SATURDAY
   , FUT_Totals.TIME AS GeneralTotals_Time
   , FUT_Totals.SUNDAY AS GeneralTotals_SUNDAY
   , FUT_Totals.MONDAY AS GeneralTotals_MONDAY
   , FUT_Totals.TUESDAY AS GeneralTotals_TUESDAY
   , FUT_Totals.WEDNESDAY AS GeneralTotals_WEDNESDAY
   , FUT_Totals.THURSDAY AS GeneralTotals_THURSDAY
   , FUT_Totals.FRIDAY AS GeneralTotals_FRIDAY
   , FUT_Totals.SATURDAY AS GeneralTotals_SATURDAY
   , CSHFutureTAs.[EXCEPTION DAYS]
   , CSHFutureTAs.[EXCEPTION VALUE]
   , IIf([FUT_Totals] ! [Time] = "09:00 - 21:00"
      OR [FUT_Totals] ! [Time] = "10:00 - 22:00", 9, 1) AS SortKey
FROM
(
   CSHFutureTAs
   INNER JOIN FUT_Totals ON (CSHFutureTAs.[HG ID] = FUT_Totals.HG_ID)
      AND (CSHFutureTAs.TIME = FUT_Totals.TIME)
)
INNER JOIN Current_INFO ON (CSHFutureTAs.[HG ID] = Current_INFO.[HG ID])
   AND (CSHFutureTAs.[HEADER ID] = Current_INFO.[HEADER ID])
   AND (FUT_Totals.HG_ID = Current_INFO.[HG ID])
ORDER BY IIf([FUT_Totals] ! [Time] = "09:00 - 21:00"
      OR [FUT_Totals] ! [Time] = "10:00 - 22:00", 9, 1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:46:49.990

`GROUP BY CSHFutureTAs.Time`你的条款到底在哪里？

您需要按一列分组，并且不属于该组的任何其他列都必须具有聚合函数，例如 SUM 或 AVG。

另外，我认为您的 FROM 上不需要该 parentesys。你为什么加那个？

# java - 高级解析字符串中的数字范围

> ID：13011657
> 
> 赞同：14
> 
> 时间：2012-10-22T12:40:06.637
> 
> 标签：java, regex

我正在使用 Java 解析用户输入的字符串，表示单个数值或范围。用户可以输入以下字符串：

```
10-19 
```

`10-19`他的意图是使用来自-->的整数`10,11,12...19`

用户还可以指定数字列表：

```
10,15,19 
```

或以上组合：

```
10-19,25,33 
```

是否有一种方便的方法（可能基于正则表达式）来执行此解析？或者我必须使用 拆分字符串`String.split()`，然后手动迭代特殊符号（在这种情况下为“，”和“-”）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-22T12:45:35.763

我会这样做：

1.  使用`,`作为分隔符的拆分。
2.  如果它匹配这个正则表达式: `^(\\d+)-(\\d+)$`，那么我知道我有一个范围。然后我会提取数字并创建我的范围（确保第一个数字低于第二个数字可能是个好主意，因为你永远不知道......）。然后你采取相应的行动。
3.  如果它匹配这个正则表达式：`^\\d+$`我会知道我只有 1 个数字，所以我有一个特定的页面。然后我会采取相应的行动。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-23T03:18:30.967

这个经过测试（并经过充分评论）的正则表达式解决方案符合 OP 要求：

## Java 正则表达式解决方案

```
// TEST.java 20121024_0700
import java.util.regex.*;
public class TEST {
    public static Boolean isValidIntRangeInput(String text) {
        Pattern re_valid = Pattern.compile(
            "# Validate comma separated integers/integer ranges.\n" +
            "^             # Anchor to start of string.         \n" +
            "[0-9]+        # Integer of 1st value (required).   \n" +
            "(?:           # Range for 1st value (optional).    \n" +
            "  -           # Dash separates range integer.      \n" +
            "  [0-9]+      # Range integer of 1st value.        \n" +
            ")?            # Range for 1st value (optional).    \n" +
            "(?:           # Zero or more additional values.    \n" +
            "  ,           # Comma separates additional values. \n" +
            "  [0-9]+      # Integer of extra value (required). \n" +
            "  (?:         # Range for extra value (optional).  \n" +
            "    -         # Dash separates range integer.      \n" +
            "    [0-9]+    # Range integer of extra value.      \n" +
            "  )?          # Range for extra value (optional).  \n" +
            ")*            # Zero or more additional values.    \n" +
            "$             # Anchor to end of string.           ", 
            Pattern.COMMENTS);
        Matcher m = re_valid.matcher(text);
        if (m.matches())    return true;
        else                return false;
    }
    public static void printIntRanges(String text) {
        Pattern re_next_val = Pattern.compile(
            "# extract next integers/integer range value.    \n" +
            "([0-9]+)      # $1: 1st integer (Base).         \n" +
            "(?:           # Range for value (optional).     \n" +
            "  -           # Dash separates range integer.   \n" +
            "  ([0-9]+)    # $2: 2nd integer (Range)         \n" +
            ")?            # Range for value (optional). \n" +
            "(?:,|$)       # End on comma or string end.", 
            Pattern.COMMENTS);
        Matcher m = re_next_val.matcher(text);
        String msg;
        int i = 0;
        while (m.find()) {
            msg = "  value["+ ++i +"] ibase="+ m.group(1);
            if (m.group(2) != null) {
                msg += " range="+ m.group(2);
            };
            System.out.println(msg);
        }
    }
    public static void main(String[] args) {
        String[] arr = new String[] 
                { // Valid inputs:
                    "1", 
                    "1,2,3",
                    "1-9",
                    "1-9,10-19,20-199",
                    "1-8,9,10-18,19,20-199",
                  // Invalid inputs:
                    "A", 
                    "1,2,",
                    "1 - 9",
                    " ",
                    ""
                };
        // Loop through all test input strings:
        int i = 0;
        for (String s : arr) {
            String msg = "String["+ ++i +"] = \""+ s +"\" is ";
            if (isValidIntRangeInput(s)) {
                // Valid input line
                System.out.println(msg +"valid input. Parsing...");
                printIntRanges(s);
            } else {
                // Match attempt failed
                System.out.println(msg +"NOT valid input.");
            } 
        }
    }
} 
```

## 输出：

```
r'''
String[1] = "1" is valid input. Parsing...
  value[1] ibase=1
String[2] = "1,2,3" is valid input. Parsing...
  value[1] ibase=1
  value[2] ibase=2
  value[3] ibase=3
String[3] = "1-9" is valid input. Parsing...
  value[1] ibase=1 range=9
String[4] = "1-9,10-19,20-199" is valid input. Parsing...
  value[1] ibase=1 range=9
  value[2] ibase=10 range=19
  value[3] ibase=20 range=199
String[5] = "1-8,9,10-18,19,20-199" is valid input. Parsing...
  value[1] ibase=1 range=8
  value[2] ibase=9
  value[3] ibase=10 range=18
  value[4] ibase=19
  value[5] ibase=20 range=199
String[6] = "A" is NOT valid input.
String[7] = "1,2," is NOT valid input.
String[8] = "1 - 9" is NOT valid input.
String[9] = " " is NOT valid input.
String[10] = "" is NOT valid input.
''' 
```

请注意，此解决方案仅演示了如何验证输入行以及如何从每行解析/提取值组件。它没有进一步验证对于范围值，第二个整数大于第一个整数。但是，可以轻松添加此逻辑检查。

**编辑：2012-10-24 07:00**固定索引 i 从零开始计数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T12:46:47.783

您可以使用

```
strinput = '10-19,25,33'
eval(cat(2,'[',strrep(strinput,'-',':'),']')) 
```

最好是包括一些输入检查，负数也会给这种方法带来问题。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-10-22T12:45:46.437

在最简单的方法中，您可以`eval`为此使用邪恶

```
A = eval('[10:19,25,33]')

A =

   10    11    12    13    14    15    16    17    18    19    25    33 
```

**但**当然，在你这样做之前你应该三思而后行。特别是如果这是用户提供的字符串！想象一下，如果用户提供任何其他命令会发生什么......

```
eval('!rm -rf /') 
```

你必须确保除了你想要的之外真的没有别的东西。您可以通过`regexp`.

# c++ - Concat boost::asio::read() 响应

> ID：13011658
> 
> 赞同：1
> 
> 时间：2012-10-22T12:40:11.957
> 
> 标签：c++, concatenation, boost-asio

只是一个简短的问题......我使用sync_client.cpp，一个由boost.asio给出的例子，尝试这个库。代码 ：

```
#include <iostream>
#include <istream>
#include <ostream>
#include <string>
#include <string.h>
#include <boost/asio.hpp>

using boost::asio::ip::tcp;

int main(int argc, char* argv[])
{
try
{

boost::asio::io_service io_service;

// Get a list of endpoints corresponding to the server name.
tcp::resolver resolver(io_service);
tcp::resolver::query query(argv[1], "http");
tcp::resolver::iterator endpoint_iterator = resolver.resolve(query);

// Try each endpoint until we successfully establish a connection.
tcp::socket socket(io_service);
boost::asio::connect(socket, endpoint_iterator);

// Form the request. We specify the "Connection: close" header so that the
// server will close the socket after transmitting the response. This will
// allow us to treat all data up until the EOF as the content.
boost::asio::streambuf request;
std::ostream request_stream(&request);
request_stream << "GET " << argv[2] << " HTTP/1.0\r\n";
request_stream << "Host: " << argv[1] << "\r\n";
request_stream << "Accept: */*\r\n";
request_stream << "Connection: close\r\n\r\n";

// Send the request.
boost::asio::write(socket, request);

// Read the response status line. The response streambuf will automatically
// grow to accommodate the entire line. The growth may be limited by passing
// a maximum size to the streambuf constructor.
boost::asio::streambuf response;
boost::asio::read_until(socket, response, "\r\n");

// Check that response is OK.
std::istream response_stream(&response);
std::string http_version;
response_stream >> http_version;
unsigned int status_code;
response_stream >> status_code;
std::string status_message;
std::getline(response_stream, status_message);
if (!response_stream || http_version.substr(0, 5) != "HTTP/")
{
  std::cout << "Invalid response\n";
  return 1;
}
if (status_code != 200)
{
  std::cout << "Response returned with status code " << status_code << "\n";
  return 1;
}

// Read the response headers, which are terminated by a blank line.
boost::asio::read_until(socket, response, "\r\n\r\n");

// Process the response headers.
std::string header;
while (std::getline(response_stream, header) && header != "\r")
  std::cout << header << "\n";
std::cout << "\n";

// Write whatever content we already have to output.
if (response.size() > 0)
  std::cout << &response;

// Read until EOF, writing data to output as we go.
boost::system::error_code error;
while (boost::asio::read(socket, response,
      boost::asio::transfer_at_least(1), error))
 std::cout << &response;

if (error != boost::asio::error::eof)
  throw boost::system::system_error(error);
 }
 catch (std::exception& e)
 {
  std::cout << "Exception: " << e.what() << "\n";
 }

 return 0;
} 
```

但是这段代码，在 prump 中显示了结果。我想将响应放在不同的 var 中以便之后进行处理。

我是新手，对我的英语感到抱歉。非常感谢 ！

**编辑 ：**

很好，我找到了解决方案。

```
std::stringstream s;

while (boost::asio::read(socket, response,
      boost::asio::transfer_at_least(1), error))
s << &response;

const std::string htmlContent = s.str(); 
```

# php - 将一个链接分成多个链接（php）

> ID：13011660
> 
> 赞同：1
> 
> 时间：2012-10-22T12:40:20.500
> 
> 标签：php, mysql

我有一个带有 html 表的结果 php 页面。里面`row[3]`有*剧透*。如果我点击一个文本值，我可以看到隐藏的内容。
在隐藏的内容中，我在不同的行上有*链接*
要做到这一点：
- 我在 mysql textarea 中插入文本，所以： - 然后我在部分

![在此处输入图像描述](../Images/2bd0420164804b9b7068d98f944138b7.png)
中添加 javascript 代码`<head>`

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
   <script type="text/javascript">
$(function() {
        $(".spoiler-label").click(function() {
        $(this).parent().find(".spoiler-content").toggle();
    });
    });
</script> 
```

- 然后是 php 代码：

```
echo '<td><span class="spoiler-label">'.$row[1].'</span><div class="spoiler-content" style="display: none"><br><a href='.$row[3].'<a/></div><td>'; 
```

- 要打破新行中的文本，我使用以下 php 代码：

```
 $row['3']=stripslashes($row['3']);
    $row['3']=str_replace('<br />',"newline",$row['3']);
    $row['3']=htmlentities($row['3']);
    $row['3']=str_replace('newline',"<br>",$row['3']) 
```

我得到了这个最终结果：

![在此处输入图像描述](../Images/c3aeb3b15d09c701e37a7fe6fb3c7d73.png)

但您可以看到问题：

- 格式丢失，因为`<th>`X 行是黑色而不是橙色
- 扰流板内的链接是 2，但被视为一个链接。
- 我没有正确链接，因为**google.com**是`http://google.com<br`WHY？
您可以看到 2 个链接：
`http://alfa.com`
`http://google.com`
但是如果我单击[http://alfa.com](http://alfa.com)，则该链接始终是`http://google.com<br`
**我想要**的：-从链接中删除-将 一个链接分隔为不同的链接（alfa.com 和 google.com）
- 修复不正确的行格式 这是我的页面完整代码[http://pastebin.com/zb22VqwD](http://pastebin.com/zb22VqwD)和这个 css [http://pastebin.com/dFRFURGM](http://pastebin.com/dFRFURGM)`<br`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:54:43.250

first off, your 1 line php code echo is wrong (u didnt close `<a>`). The css didnt work because of this.

(i removed the first echo)

second, an `<a>` tag cannot have another `<a>` tag inside it, so you should just remove the whole `<a>` from your code above, meaning it should be:

```
echo '<td><span class="spoiler-label">'.$row[1].'</span><div class="spoiler-content" style="display: none"><br>'.$row[3].'</div><td>'; 
```

then, when instead of for some reason changing ur correct `<br/>`'s into the old version `<br>` tag, use the tag to create an array:

```
$ary=explode('<br />',$row['3']);
$str="";
foreach($ary as $str2){
$str.="<a href=\"$str2\">$str2</a><br/>";
} 
```

and then echo `$str` into the row,

Your code should be:

```
$row['3']=str_replace('<br />',"newline",$row['3']);
$row['3']=stripslashes($row['3']);
$row['3']=htmlentities($row['3']);
$ary=explode('newline',$row['3']);
$str="";
foreach($ary as $str2){
    $str.="<a href=\"$str2\">$str2</a><br/>";
    //$str.="$str2<br/>";
}
$row['3']=$str; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:51:43.157

您正在使用以下代码：

```
$row['3']=stripslashes($row['3']);
$row['3']=str_replace('<br />',"newline",$row['3']);
$row['3']=htmlentities($row['3']);
$row['3']=str_replace('newline',"<br>",$row['3']) 
```

而不是上面的代码使用下面：

```
$row['3']=str_replace('<br />',"newline",$row['3']);
$row['3']=stripslashes($row['3']);
$row['3']=htmlentities($row['3']);
$row['3']=str_replace('newline',"<br>",$row['3']) 
```

只需将第一行替换为第二行，将第二行替换为第一行..尝试...希望这有帮助..

# windows-phone-7 - sqlite：在wp7中插入时约束失败异常

> ID：13011661
> 
> 赞同：1
> 
> 时间：2012-10-22T12:40:21.203
> 
> 标签：windows-phone-7

我正在 wp7 中开发数据库应用程序，当我尝试将记录插入数据库时​​，它会引发约束失败异常。当我在谷歌搜索时，我发现给出 not null 会导致异常。所以我只是从数据库字段，之后我可以成功插入记录，但是当我查看记录时，所有记录都只填充了空值。所以我无法执行任何数据库操作。请帮我解决这个问题。这是我的轨迹

```
 at SQLiteClient.SQLiteCommand.ExecuteNonQuery[T](Case toInsert)
   at Lawyers_Application.DBHelper.Insert[T](Case obj, String statement)
   at Lawyers_Application.MainPage.button1_Click(Object sender, RoutedEventArgs e)
   at System.Windows.Controls.Primitives.ButtonBase.OnClick()
   at System.Windows.Controls.Button.OnClick()
   at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs e)
   at System.Windows.Controls.Control.OnMouseLeftButtonUp(Control ctrl, EventArgs e)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:05:05.667

我假设当您有`null`约束时抛出了堆栈跟踪？您插入的数据有问题。如果`null`最初抛出了约束，则意味着您正在通过`null`. 现在您已经删除了约束，数据库允许您插入`null`值。在这种情况下，数据库没有任何问题，但是您传递的数据似乎有些不正确。

# jsp - Spring MVC 和灯箱

> ID：13011662
> 
> 赞同：0
> 
> 时间：2012-10-22T12:40:24.467
> 
> 标签：jsp, spring-mvc, lightbox

我想使用**灯箱**来显示我的表格，我使用**了 Fancybox**，但没有成功。我想要一些关于用于实现此目的的最佳**灯箱**插件的建议，以及我需要如何设置它，因为我的表单请求将首先通过控制器。

**更新：**

这种形式在没有灯箱的情况下可以正常工作。当我单击链接时，控制器正在工作，它只是将我带到页面并且不会在灯箱中显示表单。

**代码：**

```
<%@ include file="/WEB-INF/jsp/include.jsp" %>
<%@taglib prefix="form" uri="http://www.springframework.org/tags/form"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

  <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>

    <script type="text/javascript">
            <%@ include file="../js/lightbox/jquery.fancybox.pack.js"%>

    </script>

    <style>
            <%@ include file="../js/lightbox/jquery.fancybox.css" %>

    </style>    

  <script type="text/javascript">
        $(document).ready(function() {

            $(".fancybox").fancybox();
        });
    </script>

  <title><fmt:message key="title"/></title>

  </head>
  <body>
    <h1><fmt:message key="heading"/></h1>
    <p><fmt:message key="greeting"/></p>

    <a href="<c:url value="login.htm"/>">Login</a></br>

    <a href="<c:url value="officer_registration.htm"/>">Register</a></br>

    <a class="fancybox" href="officer_registration.htm">Light Box Registration</a></br>
    <a class="fancybox" href="http://en.gtwallpaper.com/fondecran/chiens/chiens_01.jpg" >dog</a>

   </body>
</html> 
```

**更新代码**

```
<%@ include file="/WEB-INF/jsp/include.jsp" %>
<%@taglib prefix="form" uri="http://www.springframework.org/tags/form"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

  <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 

    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>

    <script type="text/javascript">
            <%@ include file="../js/lightbox/jquery.fancybox.pack.js"%>

    </script>

    <style>
            <%@ include file="../js/lightbox/jquery.fancybox.css" %>

    </style>    

  <script type="text/javascript">
        $(document).ready(function() {

            $('#regForm').click(function() {
                $.fancybox({
                        'href' : '/officer_registration.htm'
                    });

                return false;
            });

            $('#pic').click(function() {
                $.fancybox({
                        'href' : 'http://en.gtwallpaper.com/fondecran/chiens/chiens_01.jpg'
                    });

                return false;
            });

        });
    </script>

  <title><fmt:message key="title"/></title>

  </head>
  <body>
    <h1><fmt:message key="heading"/></h1>
    <p><fmt:message key="greeting"/></p>

    <!--  <a href="<c:url value="login.htm"/>">Login</a></br> -->   
    <!-- <a href="<c:url value="officer_registration.htm"/>">Register</a></br>  -->

    <!-- <a class="fancybox" href="login.htm">Light Box login</a></br>  -->

    <a id="regForm" class="fancybox" href="officer_registration.htm">Light Box Registration</a></br>

    <!-- <a id ="pic" class="fancybox" href="http://en.gtwallpaper.com/fondecran/chiens/chiens_01.jpg" >dog</a>  This picture works presently-->

   </body>
</html> 
```

**运行时编辑的 HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

  <head>
     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 

   <!--  <script src="http://code.jquery.com/jquery-1.8.2.js"></script> -->

    <script type="text/javascript">
            /*! fancyBox v2.1.2 fancyapps.com | fancyapps.com/fancybox/#license */

.......... 

    </script>

    <style>
            /*! fancyBox v2.1.2 fancyapps.com | fancyapps.com/fancybox/#license */
.fancybox-wrap,
.fancybox-skin,
.fancybox-outer,
.fancybox-inner,
.fancybox-image,
.fancybox-wrap iframe,
.fancybox-wrap object,
.fancybox-nav,
.fancybox-nav span,
.fancybox-tmp
{
    padding: 0;
    margin: 0;
    border: 0;
    outline: none;
    vertical-align: top;
}

.fancybox-wrap {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 8020;
}

.fancybox-skin {
    position: relative;
    background: #f9f9f9;
    color: #444;
    text-shadow: none;
    -webkit-border-radius: 4px;
       -moz-border-radius: 4px;
            border-radius: 4px;
}

.fancybox-opened {
    z-index: 8030;
}

.fancybox-opened .fancybox-skin {
    -webkit-box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
       -moz-box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
}

.fancybox-outer, .fancybox-inner {
    position: relative;
}

.fancybox-inner {
    overflow: hidden;
}

.fancybox-type-iframe .fancybox-inner {
    -webkit-overflow-scrolling: touch;
}

.fancybox-error {
    color: #444;
    font: 14px/20px "Helvetica Neue",Helvetica,Arial,sans-serif;
    margin: 0;
    padding: 15px;
    white-space: nowrap;
}

.fancybox-image, .fancybox-iframe {
    display: block;
    width: 100%;
    height: 100%;
}

.fancybox-image {
    max-width: 100%;
    max-height: 100%;
}

#fancybox-loading, .fancybox-close, .fancybox-prev span, .fancybox-next span {
    background-image: url('fancybox_sprite.png');
}

#fancybox-loading {
    position: fixed;
    top: 50%;
    left: 50%;
    margin-top: -22px;
    margin-left: -22px;
    background-position: 0 -108px;
    opacity: 0.8;
    cursor: pointer;
    z-index: 8060;
}

#fancybox-loading div {
    width: 44px;
    height: 44px;
    background: url('fancybox_loading.gif') center center no-repeat;
}

.fancybox-close {
    position: absolute;
    top: -18px;
    right: -18px;
    width: 36px;
    height: 36px;
    cursor: pointer;
    z-index: 8040;
}

.fancybox-nav {
    position: absolute;
    top: 0;
    width: 40%;
    height: 100%;
    cursor: pointer;
    text-decoration: none;
    background: transparent url('blank.gif'); /* helps IE */
    -webkit-tap-highlight-color: rgba(0,0,0,0);
    z-index: 8040;
}

.fancybox-prev {
    left: 0;
}

.fancybox-next {
    right: 0;
}

.fancybox-nav span {
    position: absolute;
    top: 50%;
    width: 36px;
    height: 34px;
    margin-top: -18px;
    cursor: pointer;
    z-index: 8040;
    visibility: hidden;
}

.fancybox-prev span {
    left: 10px;
    background-position: 0 -36px;
}

.fancybox-next span {
    right: 10px;
    background-position: 0 -72px;
}

.fancybox-nav:hover span {
    visibility: visible;
}

.fancybox-tmp {
    position: absolute;
    top: -9999px;
    left: -9999px;
    visibility: hidden;
}

/* Overlay helper */

.fancybox-lock {
    overflow: hidden;
}

.fancybox-overlay {
    position: absolute;
    top: 0;
    left: 0;
    overflow: hidden;
    display: none;
    z-index: 8010;
    background: url('fancybox_overlay.png');
}

.fancybox-overlay-fixed {
    position: fixed;
    bottom: 0;
    right: 0;
}

.fancybox-lock .fancybox-overlay {
    overflow: auto;
    overflow-y: scroll;
}

/* Title helper */

.fancybox-title {
    visibility: hidden;
    font: normal 13px/20px "Helvetica Neue",Helvetica,Arial,sans-serif;
    position: relative;
    text-shadow: none;
    z-index: 8050;
}

.fancybox-opened .fancybox-title {
    visibility: visible;
}

.fancybox-title-float-wrap {
    position: absolute;
    bottom: 0;
    right: 50%;
    margin-bottom: -35px;
    z-index: 8050;
    text-align: center;
}

.fancybox-title-float-wrap .child {
    display: inline-block;
    margin-right: -100%;
    padding: 2px 20px;
    background: transparent; /* Fallback for web browsers that doesn't support RGBa */
    background: rgba(0, 0, 0, 0.8);
    -webkit-border-radius: 15px;
       -moz-border-radius: 15px;
            border-radius: 15px;
    text-shadow: 0 1px 2px #222;
    color: #FFF;
    font-weight: bold;
    line-height: 24px;
    white-space: nowrap;
}

.fancybox-title-outside-wrap {
    position: relative;
    margin-top: 10px;
    color: #fff;
}

.fancybox-title-inside-wrap {
    padding-top: 10px;
}

.fancybox-title-over-wrap {
    position: absolute;
    bottom: 0;
    left: 0;
    color: #fff;
    padding: 10px;
    background: #000;
    background: rgba(0, 0, 0, .8);
}

    </style>    

  <script type="text/javascript">
        $(document).ready(function() {

            $('#regForm').click(function() {
                $.fancybox({
                        'href' : '/officer_registration.htm'
                    });

                return false;
            });

            $('#pic').click(function() {
                $.fancybox({
                        'href' : 'http://en.gtwallpaper.com/fondecran/chiens/chiens_01.jpg'
                    });

                return false;
            });

        });
    </script>

  <title>Crime Track Application</title>

  </head>
  <body>
    <h1>Hello :: Spring Application Test</h1>
    <p>Greetings Darindra Ramdhanie 4</p>

    <!--  <a href="login.htm">Login</a></br> -->    
    <!-- <a href="officer_registration.htm">Register</a></br>  -->

    <!-- <a class="fancybox" href="login.htm">Light Box login</a></br>  -->

    <a id="regForm" class="fancybox" href="officer_registration.htm">Light Box Registration</a></br>

    <!-- <a id ="pic" class="fancybox" href="http://en.gtwallpaper.com/fondecran/chiens/chiens_01.jpg" >dog</a>  This picture works presently-->

   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:56:06.450

Do you have the view/controller portion working without the lightbox? If not, get that working first. Then use the url that you'd use to call the form for displaying in the lightbox. I bet lightbox gives you an option of specifying a url for display. Also, is there an basic example of round trip interaction with php backend? Use that to extrapolated implementation in you spring app. I'd suggest get some code going and come back for more when you get stuck.

**EDIT:** It does seem to support external urls, see #4 [here](http://fancybox.net/blog) It will take 'href' as a parameter.

**EDIT 2:**

```
$('.fancybox').click(function() {
    $.fancybox({
            'href' : 'officer_registration.htm'
        });

    return false;
}); 
```

... not sure though if it needs an absolute url.

EDIT 3:

Per [their examples](http://fancyapps.com/fancybox/#examples) the href that you try to call fancybox on, needs to tell it that outside content needs to be displayed in an iframe: class="fancybox fancybox.iframe" in your case.

# ant - 或者登录ant os任务

> ID：13011663
> 
> 赞同：0
> 
> 时间：2012-10-22T12:40:30.973
> 
> 标签：ant, operating-system

> **可能重复：**
> [如何检查 ant 中的条件并根据其值打印消息？](https://stackoverflow.com/questions/10680982/how-check-for-a-condition-in-ant-and-depending-on-its-value-print-a-message)

我正在运行一个 ant 脚本，并且我有一个条件说：

```
<if>
     <os name="AIX"/>
         <then>
I want to give an or condition in this task, so that I can have something like:
<if>
      <os name="AIX" or "Linux">
                 <then> 
```

但我不知道如何使这成为可能.. 有人可以建议。

# c# - WebRequest.Create 方法是否真的调用了一个 url？

> ID：13011669
> 
> 赞同：0
> 
> 时间：2012-10-22T12:40:42.160
> 
> 标签：c#, webrequest

我的一位同事建议我 WebRequest.Create 实际上将 Web 请求发送到指定的 url，我不必使用异步 Web 请求来避免等待。

这是真的？

我怎么不同意他的意见，当我向他展示文档时，但他说他一直在调用 WebRequest.Create 来发送请求。

我不确定这是否属实，因为我对 .net 没有深入的了解

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T12:42:31.253

No, calls to `GetResponse()` on the created `WebRequest` is what actually issues the request.

From the [docs](http://msdn.microsoft.com/en-us/library/system.net.webrequest.getresponse.aspx):

> The GetResponse method sends a request to an Internet resource and returns a WebResponse instance.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:43:13.860

That is not true. It just initializes a new request.

You need to call `GetResponse()` to actually make the call.

# php - 捕获重复的 PayPal IPN 付款

> ID：13011671
> 
> 赞同：0
> 
> 时间：2012-10-22T12:40:49.850
> 
> 标签：php, paypal, paypal-ipn

我有一个通过 PayPal 的 IPN 服务设置的定期支付解决方案，基本上用户填写表格，支付款项，然后通过 IPN 我的系统得到一个 ping 来让用户访问系统。

从技术上讲，一切正常，但有时在用户周期的最后一天，他们会忘记这是定期付款并再次填写表格。PayPal 似乎并不介意这一点，并创建了第二个定期付款配置文件。

目前我进去，退钱并取消这个新的付款资料，但显然这并不理想 - 有什么办法可以将 PayPal 配置为不接受当前有效资料的人的新资料？还是我需要在我的网站结束时捕捉到这一点并在允许付款之前进行某种形式的查找？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T13:34:31.293

Paypal 无法识别交易是重复交易，它将交易视为新交易。你将不得不从你的系统中解决它。在实施支付网关时，最好在发送到支付网关之前将账单保存为待处理状态或系统中的某些内容。同样在用户填写的表单中，您可以实现一个字段来唯一标识用户，例如他的电子邮件地址，您还可以根据系统中的用户唯一字段保存到期日期或第二个重复日期。现在，当用户输入相同的唯一字段并想再次提交表单时，您可以验证同一用户正在再次付款，但其第二个计费日期尚未到期，因此提示并限制他再次付款。

希望它会帮助你。

# c# - 在 asp.net 中没有正确设置文字控制文本渲染？

> ID：13011676
> 
> 赞同：0
> 
> 时间：2012-10-22T12:41:17.843
> 
> 标签：c#, asp.net, .net, c#-4.0

在我的 asp.net Web 应用程序中，我使用了 liter 控件来显示 HTML 数据。每当用户单击按钮时，我都会有一组 html 数据，并且需要在文本控件中显示它。

假设如果我有 HTML 表格数据或任何其他带有一些格式化标签的文本，那么它也可以完美地显示在文字控制中......

但是我在显示这个 HTML TABLE 数据时遇到了问题（尤其是这个）。例如，我在字符串中有这个 HTML TABLE 数据。在调试模式下，我只是复制了字符串值并将其存储为 .html 文件。所以，如果我在浏览器中打开文件，它会显示完整的表数据（***方式 1***）。但是在我的项目中，我只是将字符串值分配给文字控制文本。

```
literal1.text=htmlString; 
```

但是当我查看浏览器时，我的文字控件仅显示部分 html 表数据。特别是，第一列完全没有显示，第二行的一部分也没有显示（***方式 2***）。

我有点怀疑这是否是对齐问题。无论如何我都无法设置文字控件的对齐方式......

请指导我摆脱这个问题......

我附上了浏览器中显示的原始表格数据（图 1）和文字控制表数据（图 2）的打印屏幕...

![图片1](../Images/b6d9d272b3643c2b1502ad76054e4da9.png) *** 方式 1 的图像 1***

![图片2](../Images/35c40151ded633ca539abe818e24f532.png) *** 方式 2 的图像 2 ***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:46:12.823

我建议的第一件事是使用 Firebug 或其他 Web 开发工具比较生成的 html 标记和影响 CSS。这应该告诉你差异在哪里。

根据您的屏幕截图，差异似乎归结为样式，因此您的 HTML 从一个版本到另一个版本和/或 CSS 不同。

您可以发布一些代码来解决您的问题吗？

# debugging - 果园 cms 模块断点

> ID：13011681
> 
> 赞同：0
> 
> 时间：2012-10-22T12:41:30.693
> 
> 标签：debugging, module, content-management-system, orchardcms, breakpoints

我想调试一个模块并设置了一些断点，但是当附加果园解决方案时，断点未命中，断点圆圈不为空，因此加载了符号。我在显示和 DateTimeFieldDriver 的编辑方法中设置断点并浏览页面创建页面。我应该怎么办？我发现页面创建不使用 DateTimeFieldDriver ，它是如何发生的？

# android - android getIntent doInBackground

> ID：13011686
> 
> 赞同：0
> 
> 时间：2012-10-22T12:41:56.693
> 
> 标签：android, android-intent, android-asynctask

我是安卓新手。我试图从一个活动中得到这个：

```
i.putExtra("mlat", String.valueOf(latitude)); 
```

到这里：

```
public class PostDataActivity extends AsyncTask<Void, Void, Void>{
    GpsData gps;
//  double latitude = gps.getLatitude(); 
    //String mlat;

    @Override
    protected Void doInBackground(Void... params) {
        Bundle extras = getIntent().getExtras();
        String mlat = extras.getString("mlat");

        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost("http://test.de");
         List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
          nameValuePairs.add(new BasicNameValuePair("lat", mlat));
          nameValuePairs.add(new BasicNameValuePair("lon", "7.358154"));
           try {
            httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
           } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
           }
           try {
            httpClient.execute(httpPost);
           } catch (ClientProtocolException e) {
            e.printStackTrace();
           } catch (IOException e) {
            e.printStackTrace();
           }
        return null;
    } 
```

但是 getIntent 是未定义的

```
Bundle extras = getIntent().getExtras();
String mlat = extras.getString("mlat"); 
```

如何在 Activity 和 doInBackground 之间传输数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:50:11.750

`execute`方法接受一个字符串参数数组，这些`AsyncTask`参数可用于将额外数据获取到后台任务中。

这是来自[Android 源文档](http://developer.android.com/reference/android/os/AsyncTask.html)的示例：

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected Long doInBackground(URL... urls) {
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));
             // Escape early if cancel() is called
             if (isCancelled()) break;
         }
         return totalSize;
     }

  ..
} 
```

您可以通过这种方式从主线程调用它：

```
new DownloadFilesTask().execute(url1, url2, url3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:59:00.470

首先通过我的 Matt 提供的教程。

对于您的情况，您必须修改您的代码，如下所示：

1.将参数类型从 void 更改为 String：

公共类 PostDataActivity 扩展 AsyncTask< **String** , Void, Void>{

2.将您的数据作为参数传递给 AsyncTask：

新 PostDataActivity().execute(" **mlat** ");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:05:37.927

Intent 不包含任何内容，因为您正在扩展`AsyncTask`. 我认为整个方法是有缺陷的。

由于`PostDataActivity`它是一个 Activity，它不应该扩展 AsyncTask。以下是我认为应该是什么样子的想法：

```
public class PostDataActivity extends Activity {
GPSData gps;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.);

    Bundle extras = getIntent().getExtras();
    String mlat = extras.getString("mlat");

    MyDownloaderTask task = new MyDownloaderTask();
    task.execute(mlat);
}
    //Check docs for parameterisation of AsyncTask
private class MyDownloaderTask extends AsyncTask<String, Void, String> {
    protected String doInBackground(String params...) {
        string someResult;
        String mlat = params[0];
        //Got your variable, do whatever you want from here on
        return someResult; //Since it is no longer AsyncTask<Void, Void, Void>
    }
    protected void onPostExecute(String result) {
        //This executes after task completes successfully
    }
    protected void onCancelled(String result) {
        //This executes after task completes unsuccessfully
    }
}

//...
} 
```

# java - 为什么Java Date 对象被设计成无法获取日期？

> ID：13011687
> 
> 赞同：2
> 
> 时间：2012-10-22T12:42:02.097
> 
> 标签：java

为什么 Java 使如何从 Date 对象中获取月份中的哪一天变得不明显？

`.getDay()`已弃用，建议使用`Calendar.get(Calendar.MONTH)`

这对我来说毫无意义，我很好奇这种弃用背后的理由是什么。

我有一个 Date 对象，我只想要这一天。这是有史以来最自然的事情，我无法调用它。这种设计是错误的，因此我的代码没有按应有的方式工作：

```
private String getIngivningsDag() {

    return ""+ingivningsDatum.getDate();
}

private String getIngivningsMonth() {

    return ""+ingivningsDatum.getmonth();
}

private String getIngivningsYear() {

    return ""+ingivningsDatum.getYear();
} 
```

## 更新

这是“解决方案”：

```
public String getIngivningsDag() {

    Calendar cal = Calendar.getInstance();
    cal.setTime(ingivningsDatum);
    return cal.get(Calendar.DAY_OF_WEEK_IN_MONTH)+"";
} 
```

没有 Java 的设计错误并使用方法参数而不是奇怪的 Class 方法和工厂，它应该看起来简单而良好：

```
public String getIngivningsDag() {

    return ingivningsDatum.getDay(Calendar.GREGORIAN, "SE");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T12:45:54.793

这`Date`意味着一个时刻，但确切的日/月/时间/等在不同的日历和时区中是不同的。因此，要知道特定时间戳是哪一天，您应该使用`Calendar` `Timezone`and `DateFormat`。例如 jdk 至少有两个日历实现 - BuddistCalendar 和 GregorianCalendar。默认日历取决于用户的偏好。

另外，请查看 Jodatime 库 - 它具有更多功能，并且在 Java 中管理日期更有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T12:47:52.577

不仅是那个方法，`Date`类的大部分方法和一些构造函数现在都被弃用了。您必须使用`Calendar`类来获取`DAY`，或`MONTH`从您的 Date 对象中获取。

但是，我建议你尝试一下[**`Joda-Time API`**](http://joda-time.sourceforge.net/)，这会让你更快乐，因为，当涉及到索引时，甚至`Calendar`类也是一个，从它开始。`bit inconsistent``MONTH``0`

但是，对于您当前的问题，您可以使用以下方法将`Date`对象转换为`Calendar`实例：-

```
Calendar cal = Calendar.getInstance();
cal.setTime(date);

System.out.println(cal.get(Calendar.MONTH)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T12:46:00.183

从[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Date.html)：

> 在 JDK 1.1 之前，Date 类有两个附加功能。它允许将日期解释为年、月、日、小时、分钟和秒值。它还允许格式化和解析日期字符串。不幸的是，这些函数的 API**不适合国际化。**从 JDK 1.1 开始，应使用 Calendar 类在日期和时间字段之间进行转换，并且应使用 DateFormat 类来格式化和解析日期字符串。Date 中的相应方法已弃用。

还要考虑日期的定义

> Date 类表示特定的时间瞬间，精度为毫秒。

向其添加日历功能可以说违反了单一职责原则。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T12:46:03.330

java.Date 仅用于存储自 1970 年 1 月 1 日以来的毫秒数。如果你想拥有像 getDay() 或 dayOfWeek() 这样的日历功能，你必须使用 Calendar 类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T12:47:16.300

最简单的解决方案不是找出完成的原因，而是使用[Joda-Time](http://joda-time.sourceforge.net/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-22T12:49:40.990

首先，生气说设计是错误的并没有任何帮助。

第二，`Calendar.getDay(Calendar.MONTH)`不是静态方法。要访问您的化合物，`Date`请通过三个步骤使用`Calendar`类：

1.  通过调用创建`Calendar`实例`Calendar cal = Calendar.getInstance()`
2.  通过调用将您的日期设置为`Calendar`实例`Calendar.setTime(date)`
3.  通过调用获得月份`cal.get(Calendar.MONTH)`

# javascript - Facebook 提要对话框不起作用

> ID：13011697
> 
> 赞同：5
> 
> 时间：2012-10-22T12:42:24.733
> 
> 标签：javascript, facebook, dialog, facebook-javascript-sdk, facebook-feed

我正在尝试让 Facebook Feed 对话框在测试站点上工作，但我不断收到相同的错误消息：“[app_name] 发生错误。请稍后再试。”。当我查看[文档](http://developers.facebook.com/docs/reference/dialogs/feed/)时，我意识到文档中的示例也不起作用。

尝试了许多不同的解决方案。这是我的测试代码：

```
 <html xmlns:fb="https://www.facebook.com/2008/fbml">
  <body>
  <div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : '400714233333865', // App ID from the App Dashboard
      channelUrl : '//demo.xxxxxxx.se/nptest/channel.html', // Channel File for x-domain communication
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    });

    // Additional initialization code such as adding Event Listeners goes here

  };

  function postToFeed(){

  FB.ui(
  {
   method: 'feed',
   name: 'The Facebook SDK for Javascript',
   caption: 'Bringing Facebook to the desktop and mobile web',
   description: (
      'A small JavaScript library that allows you to harness ' +
      'the power of Facebook, bringing the user\'s identity, ' +
      'social graph and distribution power to your site.'
   ),
   link: 'https://developers.facebook.com/docs/reference/javascript/',
   picture: 'http://www.fbrell.com/public/f8.jpg'
  },
  function(response) {
    if (response && response.post_id) {
      alert('Post was published.');
    } else {
      alert('Post was not published.');
    }
  }
);

};

  // Load the SDK's source Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>

     <div id='fb-root'></div>
<a onClick="postToFeed('Text');">
    Share in the feeeeeeeeeeeeed
</a>
  </body>
</html> 
```

有没有人遇到过类似的问题或解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:57:30.707

确保您通过应用程序设置中指定的相同 URL 进行测试。在您的提要对话框中提供您自己的链接和图像，即在应用程序设置中指定的您自己的域的链接，而不是在 Facebook 示例中给出的链接。

# python - apache mod_wsgi 仅在守护程序模式下崩溃

> ID：13011701
> 
> 赞同：0
> 
> 时间：2012-10-22T12:42:32.587
> 
> 标签：python, django, apache, mod-wsgi

我使用 apache webserver 和 mod_python 作为我的界面。我正在从 mod_python 转移到 mod_wsgi。我已经完成了所有设置，一切正常。现在，当我添加以下行（启用守护程序模式）时，该站点无法正常工作。

```
WSGIDaemonProcess test.tessite.com processes=5 threads=10 display-name=%{GROUP} 
```

我收到来自服务器的 500 错误响应。当我查看 Apache 的错误日志时，我有以下情况，

```
[Mon Oct 22 12:31:07 2012] [error] [client 58.68.24.230] Premature end of script headers: ls.wsgi 
```

这是我在 conf 中的 WSGI 设置，

```
#Set the number of process and threads for each process. process*thread number of requests can be handled at a time
WSGIDaemonProcess test.testsite.com processes=5 threads=10 display-name=%{GROUP}
#Sets which process group WSGI application is assigned to.
WSGIProcessGroup test.testsite.com
#Maps a URL to a filesystem location and designates the target as a WSGI script.
WSGIScriptAlias / /public/gdp/trunk/src/ukl/lis/process/ls.wsgi
<Directory /public/gdp/trunk/src/ukl/lis/process/>
    Order allow,deny
    Allow from all
</Directory> 
```

为什么这只发生在守护进程模式下？如何解决这个问题？在非守护程序模式下运行是否安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:46:49.533

看看[https://code.google.com/p/modwsgi/wiki/FrequentlyAskedQuestions](https://code.google.com/p/modwsgi/wiki/FrequentlyAskedQuestions)，“Apache 进程崩溃”部分，最后一个问题。mod_python apache 模块是否仍然加载？您是否使用任何具有 C 组件的第三方库？

# java - How to add an ImageIcon to a JFrame?

> ID：13011705
> 
> 赞同：6
> 
> 时间：2012-10-22T12:42:47.480
> 
> 标签：java, swing, jframe, jlabel, imageicon

I'm trying to add an image to one frame but it seems it does not working. The image created by an ImageIcon from the specified file. The image file is in the seam directory the java file exist.

```
import java.awt.BorderLayout;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;

    public class image {

        public static void main(String args[])
        {
            TimeFrame frame = new TimeFrame();
        }
    }

    class TimeFrame extends JFrame
    {
        //Image icon = Toolkit.getDefaultToolkit().getImage("me.jpg");
        ImageIcon icon = new ImageIcon("me.jpg");
        JLabel label = new JLabel(icon);
        public TimeFrame(){
            this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setTitle("My Frame");
            setSize(500,400);
            //this.setIconImage(icon);
            add(label,BorderLayout.CENTER);
            setVisible(true);
        }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T13:10:39.210

如果你的图标在 java 文件旁边`TimeFrame`，你应该使用

```
java.net.URL imgUrl = getClass().getResource("me.jpg");
ImageIcon icon = new ImageIcon(imgUrl); 
```

或者

```
java.net.URL imgUrl = TimeFrame.class.getResource("me.jpg");
ImageIcon icon = new ImageIcon(imgUrl); 
```

您（可能）目前正在您的工作目录中寻找它，您可以通过它输出

```
System.out.println(System.getProperty("user.dir")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T13:13:38.763

你会试试这个吗？

```
 ImageIcon ImageIcon = new ImageIcon("me.jpg");
    Image Image = ImageIcon.getImage();
    this.setIconImage(Image); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-20T13:58:10.047

只需将目录更改为“src/me.jpg”

# javascript - jQuery File Upload - 如何识别所有文件何时上传

> ID：13011716
> 
> 赞同：17
> 
> 时间：2012-10-22T12:43:27.370
> 
> 标签：javascript, jquery, jquery-plugins, file-upload

我正在使用 jQuery 文件上传插件。

我希望能够在所有选定文件完成上传后触发事件。So far I have an event for doing an action when a file(s) is selected for uploading and when each particular file finishes uploading - is there a way to detect that all selected files have finished uploading?

实际的应用程序在这里[http://repinzle-demo.herokuapp.com/upload](http://repinzle-demo.herokuapp.com/upload)

我的输入字段如下所示：

```
<div id="fine-uploader-basic" class="btn btn-success" style="position: relative; overflow: hidden; direction: ltr;"> 
```

我的脚本代码如下所示：

```
<script>
        $(function () {
            $('#fileupload').fileupload({
                dataType: 'json',
                add: function (e, data) {   // when files are selected this lists the files to be uploaded
                    $.each(data.files, function (index, file) {
                        $('<p/>').text("Uploading ... "+file.name).appendTo("#fileList");
                    });
                    data.submit();
                },
                done: function (e, data) {  // when a file gets uploaded this lists the name
                    $.each(data.files, function (index, file) {
                        $('<p/>').text("Upload complete ..."+file.name).appendTo("#fileList");
                    });
                }
            });
        });
    </script> 
```

我正在使用如下所示的 Play Framework (Java) 控制器处理请求：

公开

```
c static void doUpload(File[] files) throws IOException{

        List<ImageToUpload> imagesdata = new ArrayList<ImageToUpload>();
               //ImageToUpload has information about images that are going to be uploaded, name size etc.

        for(int i=0;i<files.length;i++){
            Upload upload = new Upload(files[i]);
            upload.doit(); //uploads pictures to Amazon S3
            Picture pic = new Picture(files[i].getName());
            pic.save(); // saves metadata to a MongoDB instance
            imagesdata.add(new ImageToUpload(files[i].getName()));
        }

        renderJSON(imagesdata);
    } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-25T17:51:31.490

我认为您正在寻找“停止”事件：

```
$('#fileupload').bind('fileuploadstop', function (e) {/* ... */}) 
```

如[插件文档](https://github.com/blueimp/jQuery-File-Upload/wiki/Options#stop)中所述：

> 上传停止回调，相当于全局 ajaxStop 事件（但仅针对文件上传请求）。

您还可以在插件创建时指定函数，将其作为参数传递

```
$('#fileupload').fileupload({
        stop: function (e) {}, // .bind('fileuploadstop', func);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-12T19:59:11.687

这是您想要的解决方案：

```
$('#fileupload').on('fileuploaddone', function(e, data) {
      var activeUploads = $('#fileupload').fileupload('active');
      if (activeUploads == 1) {
          console.info("All uploads done");
      }
  });
```

我也有这个问题，3年前修复。

# javascript - 使用 jQuery 创建新的表单字段

> ID：13011718
> 
> 赞同：2
> 
> 时间：2012-10-22T12:43:43.563
> 
> 标签：javascript, jquery, html, forms, dynamic

我有一个以 2 个文本输入开头的表单。标准场景是用户在一个字段中输入一个数字，在另一个字段中输入他/她的名字，然后页面将被更新（不重新加载）。但在某些情况下，用户可能想要输入多个连接到相同名称的数字，实现方式是用户单击文本框旁边的“添加另一个”链接。

当用户单击“添加另一个”链接时，需要将文本框中的值插入到新的（动态创建的）文本字段中，并且用户输入数字的文本字段应重置为默认值。用户可以通过这种方式输入 10 个数字，然后出现警报，告知他/她执行此操作的更有效方法。

我不知道这是如何完成的（可以完成）jQuery，如果有人可以提供帮助，那就太好了。

这是我正在使用的html：

```
<div id="searchFields" class="control-group inlineForm">
    <label for="regNr">Regnr</label> <input type="text" id="regNr" class="uprCase" placeholder="Regnr." size="6" maxlength="6">
    <span class="addRegNr"><a href="#">add another</a></div>
    <label for="poNr">PO.nr</label> <input type="text" id="poNr" placeholder="PO.nr." size="12" maxlength="12">
    <input type="button" value="GET INFO" class="last" id="getBaseInf">
</div> 
```

[http://jsfiddle.net/RgKV9/](http://jsfiddle.net/RgKV9/)

干杯!

**编辑更新**

我喜欢 Aske G 的示例并对其进行了一些更改。这是我正在使用的新代码，[jsfiddle.net/SDpfy](http://jsfiddle.net/SDpfy)虽然我设法对 AskeG 的代码进行了一些小的更改，但我不知道如何为最终在篮子中的每个生成字段添加唯一 ID 和单独的删除链接. 另外，如何将生成的字段设置为只读并在它们出现在篮子中时对其进行动画处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:58:19.003

我想，你可能只是在寻找这样的[东西](http://www.mkyong.com/jquery/how-to-add-remove-textbox-dynamically-with-jquery/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:53:12.303

只需向跨度添加一个点击观察器。检查这个小提琴：http: [//jsfiddle.net/ranjith19/RgKV9/4/](http://jsfiddle.net/ranjith19/RgKV9/4/)

我做了一些基本的改变。如果您需要自定义名称 id，您应该使用模板库，然后附加它

```
<div id="searchFields" class="control-group inlineForm">
    <label for="regNr">Regnr</label> <input type="text" id="regNr" class="uprCase" placeholder="Regnr." size="6"
                                            maxlength="6">

    <label for="poNr">PO.nr</label> <input type="text" id="poNr" placeholder="PO.nr." size="12" maxlength="12">
    <input type="button" value="GET INFO" class="last" id="getBaseInf">

    <p></p>
</div>
<span class="addRegNr" style="display:inline"><a href="#">add another</a></span>&nbsp;&nbsp;&nbsp;
<script type="text/javascript">
    $(document).ready(function () {
        str_to_append = '<label for="regNr">Regnr</label> <input type="text" id="regNr" class="uprCase" placeholder="Regnr." size="6" maxlength="6">\
    <label for="poNr">PO.nr</label> <input type="text" id="poNr" placeholder="PO.nr." size="12" maxlength="12">\
    <input type="button" value="GET INFO" class="last" id="getBaseInf"><p></p>'
        $(".addRegNr").click(function () {
            $("#searchFields").append(str_to_append)
        })
    })

</script>
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:53:55.807

你可以做到这一点，使用jquery append 方法。

在这里，我留下了一些示例的链接：

[http://api.jquery.com/append/](http://api.jquery.com/append/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T13:06:11.307

我会做这样的事情：

```
<div id="searchFields" class="control-group inlineForm">
<label for="regNr">Regnr&nbsp;</label><input type="text" id="regNr" class="uprCase" placeholder="Regnr." size="6" maxlength="6"/><br/>
</div>
<span class="addRegNr">add another</span><br/>
<label for="poNr">PO.nr</label> <input type="text" id="poNr" placeholder="PO.nr." size="12" maxlength="12">
<input type="button" value="GET INFO" class="last" id="getBaseInf"> 
```

然后是一些看起来像这样的js：

```
var $input = $("#searchFields").children();

$(".addRegNr").on("click", function(){
   var $newField = $input.clone();
   // change what you need to do with the field here.
   $(this).siblings("#searchFields").append($newField);
}); 
```

它也在这里：http: [//jsfiddle.net/tatLw/](http://jsfiddle.net/tatLw/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T13:14:51.313

要使用 jQuery 添加任何 HTML，您最终将调用[.append()](http://api.jquery.com/append/)或其变体之一，例如[.before](http://api.jquery.com/before/)、[.appendTo](http://api.jquery.com/appendTo/)等。

这些可以被赋予原始的 HTML 字符串，但除非你有一个准备好的 HTML 模板，否则不要使用字符串连接来构建你的 HTM。这是脆弱和不安全的。[相反，直接使用jQuery()](http://api.jquery.com/jQuery/#jQuery2)创建元素，如下所示：

```
jQuery('<input type="text"/>').attr({
    value: '',
    placeholder: '...',
    id: '..'
})
.appendTo( .. ) 
```

此外，不要忘记为这些新元素创建标签（如果合适的话）。

与此方案相关的其他一些最佳实践：

*   如果您要动态地显示新的表单元素（而不是为现有字段添加更多附加字段），最好不要使用 JavaScript 创建这些元素。相反，请确保它们从一开始就出现在页面输出中，然后`$(document).ready`使用[.hide()](http://api.jquery.com/hide/)隐藏它们。这样会容易得多（因为您只需要引用隐藏元素，并在必要时调用 .show() ）。这样，它不依赖于存在、启用和按预期运行的 javascript 流，因为这样，如果在此过程中发生任何事情（抛出异常、cdn 问题等），表单将回退到一个完全存在的版本，只是工作.

*   如果您将有很多这些“+”或“添加”按钮场景，我会创建一个原始字段的[.clone()](http://api.jquery.com/clone/)，剥离它（清除值，删除 id 属性），然后存储它在局部变量中。然后从单击处理程序中克隆它，并将其放入您需要的文档中。您可能还希望通过使添加按钮成为具有特定名称/值对的提交按钮来获得服务器端后备，服务器将其检测为非最终输入，在这种情况下，它将返回具有值的相同页面 pre-填充但有更多字段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T13:15:06.727

基于此博客文章[jQuery -](http://charlie.griefer.com/blog/2009/09/17/jquery-dynamically-adding-form-elements/) [Charlie Griefer](http://charlie.griefer.com/blog/about-charlie/)的动态添加表单元素的解决方案，您可以尝试以下操作：

**标记**：

```
<div id="searchFields" class="control-group inlineForm">
<form id="myForm">
    <div id="input1" style="margin-bottom:4px;" class="clonedInput">
        <label for="regNr">Regnr</label>: <input type="text" name="regNr" placeholder="Regnr." size="6" maxlength="6" />
        <label for="poNr">PO.nr</label>: <input type="text" id="poNr" placeholder="PO.nr." size="12" maxlength="12">
    </div>

    <div>
        <input type="button" id="btnAdd" value="add another Reg field" />
        <input type="button" id="btnDel" value="remove fields" />
    </div>
    <input type="button" value="GET INFO" class="last" id="getBaseInf">
</form>
</div>​ 
```

**Javascript**：

```
$('#btnAdd').click(function() {
    var num     = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
    var newNum  = new Number(num + 1); // the numeric ID of the new input field being added

    // create the new element via clone(), and manipulate it's ID using newNum value  
    var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);

    // manipulate the name/id values of the input inside the new element
    newElem.children(':first').attr('id', 'regNr' + newNum).attr('regNr', 'regNr' + newNum);

    // insert the new element after the last "duplicatable" input field
    $('#input' + num).after(newElem);

    // enable the "remove" button
    $('#btnDel').removeAttr('disabled');

    // business rule: you can only add 5 names
    if (newNum == 5)
        $('#btnAdd').attr('disabled','disabled');
});

$('#btnDel').click(function() {
     var num = $('.clonedInput').length;

    $('#input' + num).remove();     // remove the last element

    $('#btnAdd').attr('disabled',''); // enable the "add" button

    // if only one element remains, disable the "remove" button
    if (num-1 == 1)
          $('#btnDel').attr('disabled','disabled');
});

$('#btnDel').attr('disabled','disabled');​ 
```

**演示**：http: [//jsfiddle.net/chridam/qW9ra/](http://jsfiddle.net/chridam/qW9ra/)

# android - 是否可以使用 oauth2 手动验证用户身份

> ID：13011722
> 
> 赞同：2
> 
> 时间：2012-10-22T12:43:53.750
> 
> 标签：android, google-drive-api

我想使用 oauth2 对用户进行身份验证以访问谷歌驱动器。我可以在使用 AccountManager 检索帐户时获取所需的访问令牌，然后通过以下方式获取令牌：

```
mgr.blockingGetAuthToken(account, ApiConst.DRIVE_AUTH_SCOPE, true); 
```

但我希望用户能够通过提供用户名和密码而不是使用添加到手机的帐户来进行身份验证。这可能吗？

**编辑**

所以我试图在 WebView 中实现授权。我按照[这个例子](http://blog.doityourselfandroid.com/2011/08/06/oauth-2-0-flow-android/)。我已经提取了*代码请求参数*，但用于检索访问令牌的代码似乎已被弃用，并且与 Google Drive SDK 使用的包不兼容。这是示例中用于检索访问令牌的代码：

```
AccessTokenResponse accessTokenResponse = new GoogleAuthorizationCodeGrant(new NetHttpTransport(),
new JacksonFactory(),
OAuth2ClientCredentials.CLIENT_ID,
OAuth2ClientCredentials.CLIENT_SECRET,
code,
OAuth2ClientCredentials.REDIRECT_URI).execute(); 
```

这可以通过其他方式完成还是我应该放弃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T12:09:32.173

If you are in Android, you don't nedd to do all that stuff to authenticate a user. Just use "GoogleAccountCredential" object to set the user's account:

```
GoogleAccountCredential credential = GoogleAccountCredential.usingOAuth2(this, scopes);
credential.setSelectedAccountName(theGoogleAccount); 
```

Remember that for select user's account you need:

```
startActivityForResult(credential.newChooseAccountIntent(), REQUEST_ACCOUNT); 
```

Then you'll be able to initialize Drive:

```
Drive service = new Drive.Builder(AndroidHttp.newCompatibleTransport(), new GsonFactory(), credential).build(); 
```

Greetings.

# highcharts - Highchart导出，完成后执行函数

> ID：13011723
> 
> 赞同：1
> 
> 时间：2012-10-22T12:43:57.920
> 
> 标签：highcharts

我需要对 Highchart 图的 png 文件进行一些后处理工作。如何确定导出何时完成？我试图附加一个函数，但它永远不会被调用：

```
console.log("Saving chart...");
chart.exportChart({
  type    : "application/png",
  filename: "tmp_chart_filename"
 },
 function(data) {
   console.log("Export done, Data: " + data); // Not called.
})
console.log("Out"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:16:57.447

据我了解，开箱即用是不可能的。

该方法内部发生的情况`exportChart()`是，动态创建一个表单，并通过以编程方式触发该表单上的提交，将图表 svg 发送到服务器。服务器依次将 svg 接收到 png （或您可以选择的任何内容）中并将其返回给浏览器。

您看到的要求您“另存为”的弹出窗口是浏览器在向其抛出文件时的操作（而不是任何高图代码）。基本上返回的 png 永远不会返回到代码中，它直接进入浏览器。

但是，您可以编写您的[自定义 svg->png 服务器模块](http://api.highcharts.com/highstock#exporting.url)并在那里发挥您的魔力 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-29T14:18:02.183

我有一个相当相似的问题，并通过在 contextButton 上定义[onclick 事件来解决它。](https://api.highcharts.com/highstock/exporting.buttons.contextButton.onclick)仅当您同意丢失上下文菜单中的项目（按文件类型导出）时，这似乎才有可能，这在我的情况下不是问题。在要包含在图表初始构建中的代码下方：

```
 [... your Highcharts chart setup ...],

   exporting: {
        buttons: {
             contextButton: {
                  menuItem: null, // You'll lose your menu items here
                  onclick: function(event) {
                       yourFunctionBeforeExport();
                       this.exportChart();
                       yourFunctionAfterExport();
                  }
             }
        }
  }

  [... rest of the Highcharts chart setup ...] 
```

# java - 如何使用 jaxb 循环多个 xml 文件

> ID：13011724
> 
> 赞同：2
> 
> 时间：2012-10-22T12:43:58.290
> 
> 标签：java, xml, xml-parsing, jaxb

我有一个创建一些临时 XML 的应用程序，我必须在其中解析和捕获一些信息。其中一个 XML 包含多个行，其中包含每个相关 XML 的路径。它是这样的：

```
<z:row TimeStamp="2012-09-25T09:58:49" FileName="\\test\app\myfile_AB.xml"/>
<z:row TimeStamp="2012-09-25T09:58:49" FileName="\\test\app\myfile_CD.xml"/>
... 
```

我想知道是否可以使用 JAXB 解析这个“主”XML，获取所有路径，然后执行循环并在一个操作中处理每个相关的 XML。

所有的 XML 都具有大致相同的结构。

预先感谢您的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T13:36:30.507

这是可能的。您必须首先定义 2 个单独的 XSD。一个是主文件的主 XSD，然后是其他所有文件的第二个 XSD。以下是主 XML 的一种建议 XML 结构

```
 <files>
      <z:row>
      <z:row>
      <z:row>
      .
      .
  <files> 
```

为两个 XSD 自动生成 java pojo 类。然后，每当您收到主 XML 时，首先使用为主 XSD 自动生成的类对其进行解组。在这里，您将获得对应于根元素的对象，例如 Files.java 对象。现在在这个文件对象中迭代行对象并获取文件名。现在对于每个 FileName，再次创建单独的 unmarshaller & unmarshall 该文件及其自动生成的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:26:20.843

我建议使用[**StAX (JSR-173)**](http://www.jcp.org/en/jsr/detail?id=173) `XMLStreamReader`解析外部文档。当您前进到每个`row`元素时，我会让[JAXB (JSR-222)](http://www.jcp.org/en/jsr/detail?id=222)实现解组内容。这消除了将整个外部文档保存在内存中的需要。

**演示概念的示例**

*   [JAXB 对“通用”现实世界文档进行解组](https://stackoverflow.com/questions/12402215/jaxb-unmarshalling-of-generic-real-world-documents/12402813#12402813)

# css - 在 Symfony 2 中集成时，如何从 LESS 编译器中获得好的错误

> ID：13011730
> 
> 赞同：1
> 
> 时间：2012-10-22T12:44:23.973
> 
> 标签：css, symfony, less

我正在使用[Symfony 2](http://symfony.com/)作为应用程序框架，并且我已经将[LESS](http://lesscss.org/)脚本的动态编译集成到 CSS 中以用于每次页面刷新。这是我遵循的指南：

[http://www.kiwwito.com/article/less-css-with-assetic-and-symfony-2](http://www.kiwwito.com/article/less-css-with-assetic-and-symfony-2)

一切似乎都很好，但是当我在 LESS 脚本中出现错误时，所有编译都会失败，并且没有 CSS 被传递到浏览器。

我如何从 LESS 编译器获得关于哪里出了问题的反馈？是否有任何日志可以帮助使用 Symfony 调试 LESS 脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:15:34.550

跑步`app/console assetic:dump`应该有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:36:23.303

在开发者模式下，Symfony 会在此处写入一个开发者日志，其中包含较少的错误以及其他反馈。

```
app/logs/dev.log 
```

# objective-c - 关闭 3 个模态视图

> ID：13011734
> 
> 赞同：0
> 
> 时间：2012-10-22T12:44:43.157
> 
> 标签：objective-c, xcode4.2

我在另一个模态视图的模态视图上有一个模态视图控制器。

我想转回第一个视图，但无论我做什么，它都不起作用....我试图用所有可用选项关闭视图，但没有任何反应......

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:04:16.117

使用的是 xib 还是故事板？如果 modalview 的名称在您的类中正确，则如果 xib 关闭 modalview 应该可以工作。您还可以将 ibaction 用作按钮并关闭您的 modalview 并通过 ibaction 推送新视图。如果您使用情节提要，请使用情节提要中的模式选项。我之前在一个视图中有太多模式时使用了按钮操作，因为视图控制器类有时会起作用。只是一个建议，希望它有所帮助。阿德里安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:00:39.593

使用完成块

```
[self dismissViewControllerAnimated:YES completion:^{
    // Delegate back to your second modal view and do the same thing    
}]; 
```

连续 3 个关闭动画可能看起来很奇怪，所以我会使用 Animated:NO 代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:30:23.963

好吧，我使用了 NSNotificationCenter 并发布了一个通知：

```
-(void)dismiss{

[self dismissModalViewControllerAnimated:NO];
[self.view removeFromSuperview]; 
```

}

# ruby - 我可以使用 Ransack 在多个列中搜索相同的值吗？

> ID：13011735
> 
> 赞同：0
> 
> 时间：2012-10-22T12:44:43.500
> 
> 标签：ruby, ransack

Ransack gem 可以为同一值生成多列的 SQL 搜索吗？

例如，诸如“名字或姓氏包含'James'的用户”之类的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T12:53:08.693

是的，这是一个例子：

```
MyModel.search(:firstname_or_lastname_cont => "James").result 
```

# nsis - 如何用一个 nsis 脚本创建两个 exe 文件？

> ID：13011737
> 
> 赞同：1
> 
> 时间：2012-10-22T12:44:56.360
> 
> 标签：nsis

我必须用一个 nsis 脚本创建两个 exe 文件。一个包含作为完整包的 zip 文件，另一个不包含 zip 文件。我在 perl 文件中设置了一个参数，该文件正在调用我的 nsis 脚本并使用 nsis 脚本中的参数。问题在于“outfile”。无法检查状况。

例子：

传递参数为 $FULL_PKG =1（带 zip 文件），=0（不带 zip 文件） name "PKG" Strcmp ${FULL_PKG} "1" 0 1 outfile "FULLPKG.exe" outfile "PKG.exe"'

```
ERROR: command not valid outside section or function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:32:04.853

`Outfile`诸如不能在运行时更改的属性（部分和函数中的代码）

您可以使用[/D 和 makensis](http://nsis.sourceforge.net/Docs/Chapter3.html)创建定义：`makensis /DNOZIP yourscript.nsi`然后检查此定义：

```
!ifdef NOZIP
Outfile nozip.exe
!else
Outfile withzip.exe
!endif
...
Section
!ifndef NOZIP
File foo.zip ;Extract the zip file
!endif
SectionEnd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-13T12:03:26.363

对我来说，这也是有效的（也许它在 2012 年不可用）：

```
!if ${FULL_PKG} == 1
    OutFile "FULLPKG.exe"
!else
    OutFile "PKG.exe"
!endif 
```

# http - http请求和响应转发到服务器和从服务器转发

> ID：13011738
> 
> 赞同：1
> 
> 时间：2012-10-22T12:45:00.107
> 
> 标签：http, httpresponse, http-request

我正在实现 HTTP 服务器，它将负责：
1\. 从浏览器接收请求并将其转发到另一个 HTTP 服务器。2\. 从 HTTP 服务器读取响应并直接转发到浏览器。

在这种情况下，我只需要修改接收到的请求中的主机名，同时使用`send()`套接字 API 通过套接字将其发送到 HTTP 服务器，我正在使用与 HTTP 服务器的套接字连接来转发从浏览器接收到的 HTTP 请求。

我有以下查询：

1.  HTTP 请求转发是否可以与`recv()`套接字`send()`API 一起使用。
2.  如果`recv()`返回`0`则服务器或浏览器已关闭套接字？
    但是有时我的应用程序会卡在接收中并且 1-2 分钟内没有返回。
3.  为了从服务器接收套接字上的数据，我需要等到`recv()`返回 0 还是需要检查接收数据的内容长度，然后继续`recv()`。

我对 HTTP 很陌生。如果有人有用于转发 http 请求的示例应用程序，请提供，以便我更好地学习。

# java - 如何运行多个 java 运行时作业并等待它们全部完成？

> ID：13011739
> 
> 赞同：1
> 
> 时间：2012-10-22T12:45:05.097
> 
> 标签：java, multithreading, loops, jobs

我有这段代码可以在java中运行带有进度条的作业：

```
private void createNewJobRun(final int i) {
    Job job = new Job("Experiment " //$NON-NLS-1$
            + getName()) {
        @Override
        protected IStatus run(IProgressMonitor monitor) {

            monitor.beginTask("Experiment is running ...", 100); //$NON-NLS-1$
            //call here my own functions that to the actual work

            monitor.done();
            return Status.OK_STATUS;
        }
    };
    job.schedule();

} 
```

问题是我想多次调用此函数，但只有第一个作业运行，其他作业几乎同时启动，但我从未看到他们的结果......尽管显示了他们的进度监视器。我如何等待所有这些都以某种方式完成或问题出在其他地方？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-23T08:52:28.373

首先，您必须创建自己的类，它是 Callable 的子类。

在此类中，您将覆盖调用方法并执行您在 createNewJobRun 中执行的操作。

现在您必须创建一个 FutureTask（在线程中执行以创建您的作业并获得结果）。

示例：查看此链接（在标题 FutureTask 处`<V>`）

[这里](http://www.angelikalanger.com/Articles/EffectiveJava/19.Callables/19.Callables.html)

# windows - 什么是 wget 以及如何从公共目录中获取图像？

> ID：13011741
> 
> 赞同：-5
> 
> 时间：2012-10-22T12:45:12.763
> 
> 标签：windows, linux, bash, shell, wget

什么是 wget 以及如何从 Windows 的公共目录中获取图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:50:39.200

来自[GNU Wget 页面](http://www.gnu.org/software/wget/)的描述：

> GNU Wget 是一个免费软件包，用于使用最广泛使用的 Internet 协议 HTTP、HTTPS 和 FTP 检索文件。它是一个非交互式命令行工具，因此可以很容易地从脚本、cron 作业、不支持 X-Windows 的终端等中调用它。

这是[Windows 版本的链接](http://gnuwin32.sourceforge.net/packages/wget.htm)。

问题[如何使用 Wget 将所有图像下载到单个文件夹](https://stackoverflow.com/questions/4602153/how-do-i-use-wget-to-download-all-images-into-a-single-folder)中描述了如何从给定位置下载所有图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:03:27.647

Wget 是一种命令行工具，可帮助人们通过 Internet 检索文件。由于它通过命令行工作，因此您可以非交互方式使用它并自动执行下载过程。Wget 通常会下载用户传递的 url 指向的任何内容。例如，如果输入以下命令 wget [http://www.google.com](http://www.google.com)

然后一个包含 google 主页源代码的 html 文件 (index.html) 将被下载到您运行该命令的目录中。

# javascript - 替换整个 HTMLinside body 标签

> ID：13011743
> 
> 赞同：1
> 
> 时间：2012-10-22T12:45:17.203
> 
> 标签：javascript, html

我想用一些内容替换**body标签内的整个HTML，我在****head**和**body**部分都使用这些代码，但是在第一个代码中它不显示内容，在第二个代码中它显示内容但不清除前内容。

第一个代码：

```
<script>

var content = 'some content';

if(navigator.appName=="Netscape")
{
document.getElementsByTagName('body').innerHTML = content; 
}

</script> 
```

第二个代码：

```
<script>

var content = 'some content';

if(navigator.appName=="Netscape")
{
document.body.innerHTML = content; 
}

</script> 
```

我也在文档中使用了一些 php 代码

我应该怎么办？
谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T12:50:55.130

`.getElementsByTagName`返回一个数组，因此您必须使用它`[0]`来获取第一个元素：

```
<script type="text/javascript">

    var content = 'some content';
    document.getElementsByTagName('body')[0].innerHTML = content; 

</script> 
```

这是一个例子：http: [//jsfiddle.net/MWjsc/](http://jsfiddle.net/MWjsc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T12:52:54.130

我相信你想显示一些特殊的内容，比如网景不支持的浏览器。

您可以使用[document.write](http://www.w3schools.com/jsref/met_doc_write.asp) `document.write(content);`这将替换整个文档内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-06T04:17:44.920

变得花哨：

```
document.documentElement.innerHTML = document.implementation.createHTMLDocument().documentElement.outerHTML
// <html><head></head><body></body></html> 
```

# twitter - Twitter的用户嵌入时间线

> ID：13011744
> 
> 赞同：-1
> 
> 时间：2012-10-22T12:45:19.680
> 
> 标签：twitter

是否可以自动刷新用户时间线的推文，而无需刷新页面/重新加载 Javascript 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:34:56.237

阅读文档：

> 它们加载速度快，随您的流量扩展，并实时更新。

[https://dev.twitter.com/docs/embedded-timelines](https://dev.twitter.com/docs/embedded-timelines)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:51:22.633

是的，这实际上是可能的。我们不知道您想要哪种技术或您正在尝试做什么，但它是可能的，即使从浏览器本身也是如此。

# javascript - JQuery：将新单元格附加到表格并循环通过它们在 FF、Chrome 中有效，但在 IE 中无效

> ID：13011746
> 
> 赞同：2
> 
> 时间：2012-10-22T12:45:27.327
> 
> 标签：javascript, jquery, internet-explorer, jsp, foreach

在以下情况下我遇到了一些麻烦：

我的目标是附加分钟。2 在表格中输入字段。在下一步中，它应该能够遍历新生成的单元格以从新生成的字段中获取值。

代码如下所示：

**调用添加新部分（1.输入字段）**

```
<a href="javascript:;" onclick="addAbschnittElement();">
<spring:message code="newSection"/></a> 
```

**JS：追加新字段**

```
function addAbschnittElement() {
var ni = document.getElementById('tbl_produktinfo');
var numi = document.getElementById('val');
var num = (document.getElementById('val').value -1)+ 2;
numi.value = num;

var newTr = document.createElement('tr');
var newTrIdName = 'tr_abschnitt_'+num;
var newTdIdName = 'td_abschnitt_'+num;
var newDivIdName = 'div_abschnitt_'+num;
var hiddenValueName = 'hv_'+newTrIdName;
newTr.setAttribute('id',newTrIdName);
newTr.innerHTML = '<td id="' + newTdIdName + '"><div id="'+newDivIdName+'"><input        id="a'+num+'z0" style="width:500px;" ></input><a href=\'#\' onclick=\'removeAbschnitt("' +newTdIdName + '","'+newDivIdName+'")\'>Abschnitt löschen</a> <input type="hidden" value="0" id="'+ hiddenValueName +'" /></div></td>';
ni.appendChild(newTr);

var li = document.getElementById('div_abschnitt_'+num);
var linediv = document.createElement("div");
var lineDivIdName = 'div_line_'+num;
linediv.setAttribute('id',lineDivIdName);
linediv.innerHTML = '<input id="a'+num+'z1" style="width:350px;"></input> <a href=\'#\' onclick=\'addZeile("'+num+'","'+lineDivIdName+'","'+hiddenValueName+'")\'>Zeile hinzufügen</a><br>';
li.appendChild(linediv); 

} 
```

**最后，将调用此函数：**

```
function submitForm() {
var mapArray = [];
jQuery.ajaxSettings.traditional = true;

var infoCells = $('#tbl_produktinfo').find('tr').find('td');

infoCells.each(function(){
    $(this).each(function(){
        $(this).children().each(function()
        {
            $(this).children().each(function(){
                if (this.localName == "input" && this.type == "text")
                {
                    mapArray.push(this.id + ";" + $(this).val());
                }
                if (this.localName == "div") {
                    $(this).children().each(function()
                    {
                        if (this.localName == "input" && this.type == "text") {
                            mapArray.push(this.id + ";" + $(this).val());
                        }
                    });
                }
            });
        });
    });
}); 
```

// 在这个地方，一个 AJAX 调用会将 mapArray 传输到服务器 }

线

```
var infoCells = $('#tbl_produktinfo').find('tr').find('td'); 
```

返回一个空对象！因此，mayarray 永远不会充满一些输入......

我的错误在哪里？

附加信息：FF 中的 Firebug 告诉我，在添加一些部分后 DOM 已更新！但不是在 IE 中 :( 这可能是错误，但我不确定！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:27:54.073

在这种情况下，Internet Explorer 正在防止将`<tr>`元素直接无效嵌套在`<table>`元素中。为了附加 tr，您需要将其附加到 a`<tbody>`或`<thead>`. 举个例子：

```
var ni = document.getElementById('tbl_produktinfo');
var tbody = ni.getElementsByTagName('tbody')[0];

if(!tbody) {
  tbody = ni.appendChild(document.createElement('tbody'));
}

// rest of your code

tbody.appendChild(newTr); 
```

由于您有可用的 jQuery，因此您也可以将 if 用于您的 DOM 操作，并将附加行切换为：

```
$(ni).append(newTr); 
```

`tbody`jQuery 将在必要时自动进行包装。

`submitForm`也可以通过使用 CSS 选择器来挑选表格中的输入字段来大大简化：

```
$('#tbl_produktinfo input[type=text]').each(function() {
   mapArray.push(this.id + ';' + this.value);
}); 
```

# c# - VB6中的复合字符串格式化（即：在字符串中使用{0}、{1}和{2}进行格式化）

> ID：13011747
> 
> 赞同：2
> 
> 时间：2012-10-22T12:45:34.163
> 
> 标签：c#, .net, vb.net, string, vb6

如此处所述（复合格式字符串： http: [//msdn.microsoft.com/en-us/library/txafckwd.aspx](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)）适用于 VB.NET 和 C#.NET（.NET Framework）。

但是，我在任何地方都没有看到 VB6 的这种情况，谷歌也没有返回任何有用的东西。

这是我想做的.NET Framework（VB.NET和C#.NET）的一些示例代码，但在VB6中：

在 VB.NET 中：

```
Dim myName As String = "Fred" 
String.Format("Name = {0}, hours = {1:hh}", myName, DateTime.Now) 
```

在 C# 中：

```
string myName = "Fred";
String.Format("Name = {0}, hours = {1:hh}", myName, DateTime.Now); 
```

如果有人知道如何在 VB6 中执行此操作，或者它是否存在于 VB Classic 的某个隐藏角落，我很想知道。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T14:51:14.590

这个功能应该做你想做的

```
'Example:
Debug.Print FS("Name = {0}, Time = {1:hh:mm}, Number={2:#.00}", "My name", Now(), 12.5)

Function FS(strText As String, ParamArray values())
    Dim i As Integer
    i = 0

    For Each Value In values
        Dim intStart As Integer
        intStart = InStr(strText, "{" & i & "}")
        If intStart < 1 Then intStart = InStr(strText, "{" & i & ":")

        If intStart > 0 Then
            Dim intEnd As Integer
            intEnd = InStr(intStart, strText, "}")

            Dim strFormatedValue As String

            Dim intFormatPos As Integer
            intFormatPos = InStr(intStart, strText, ":")
            If intFormatPos < intEnd Then
                Dim strFormat As String
                strFormat = Mid(strText, intFormatPos + 1, intEnd - intFormatPos - 1)
                strFormatedValue = Format(Value, strFormat)
            Else
                strFormatedValue = Value
            End If

            strText = Left(strText, intStart - 1) & _
                      strFormatedValue & _
                      Mid(strText, intEnd + 1)

        End If
        i = i + 1
    Next

    FS = strText

End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T12:51:47.167

VB6 中最接近 NET 复合格式的是运行时内置的[Format函数。](http://www.informit.com/library/content.aspx?b=STY_VB6_24hours&seqNum=154)
但是，它与提供相同的功能相去甚远。
在我看来，除非你有非常简单的要求，否则你就不走运了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T13:02:57.540

您最好考虑模拟 C/C++，例如 sprintf。[如果您在 google 上搜索“vb6 call sprintf”，这里有一些有用的](http://www.developerfusion.com/code/668/simulate-the-sprintf-function-in-vb/)文章，例如这篇文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T16:14:34.203

如果这不仅仅是 VB6 函数中内置的学术问题，请替换和格式化。两者都没有 .NET Format 功能强大。您可以轻松滚动自己。为您编写自定义函数并将其添加到您重复使用的方法的 .bas 文件中。然后，您可以通过添加 .bas 文件将您喜欢的方法添加到项目中。这是一个类似于 .NET Format 函数的函数。

```
Public Function StringFormat(ByVal SourceString As String, ParamArray Arguments() As Variant) As String
   Dim objRegEx As RegExp  ' regular expression object
   Dim objMatch As Match   ' regular expression match object
   Dim strReturn As String ' the string that will be returned

   Set objRegEx = New RegExp
   objRegEx.Global = True
   objRegEx.Pattern = "(\{)(\d)(\})"

   strReturn = SourceString
   For Each objMatch In objRegEx.Execute(SourceString)
      strReturn = Replace(strReturn, objMatch.Value, Arguments(CInt(objMatch.SubMatches(1))))
   Next objMatch

   StringFormat = strReturn

End Function 
```

*例子：*

StringFormat("您好 {0}。我想见见 {1}。他们都为 {2} 工作。{0} 为 {2} 工作了 15 年。", "Bruce", "Chris", “凯尔”）

这个和类似的答案在这里，[VBScript：格式化字符串的最简单方法是什么？](https://stackoverflow.com/questions/1840767/vbscript-what-is-the-simplest-way-to-format-a-string/1841323#1841323)

# java - 如何将列表（java.util.list）中的值传递给绘制方法？

> ID：13011750
> 
> 赞同：0
> 
> 时间：2012-10-22T12:45:38.313
> 
> 标签：java, xml-parsing

我有关于 XML 和 java.util.List 的问题。在我的脚本中，我能够从输入中解析 XML 文件，系统写给我，例如 [124, 123], [123, 130] （根据这个输入文件中的内容。）但我的问题是 - 如何从 xList 传递值和 yList 来绘制方法？我需要做什么？设置/获取价值？或者也许有更好的方法来做到这一点。谢谢

我的脚本的一部分：

```
 try
        {

        SAXParserFactory factory = SAXParserFactory.newInstance();
        SAXParser saxParser = factory.newSAXParser();

        MyDefaultHandler handler = new MyDefaultHandler();
        saxParser.parse(filechooser.getSelectedFile(), handler);
        System.out.println(handler.getXList() + ", " + handler.getYList());
    }
    catch (Exception exe)
    {
        exe.printStackTrace();
    }
    }    
        }

    class MyDefaultHandler extends DefaultHandler
{
    final List<Integer> xList = new ArrayList<Integer>();
    final List<Integer> yList = new ArrayList<Integer>();

    boolean xele = false;
    boolean yele = false;

    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException
    {

        if (qName.equalsIgnoreCase("X"))
        {
            xele = true;
        }

        if (qName.equalsIgnoreCase("Y"))
        {
            yele = true;
        }

    }

    public void characters(char ch[], int start, int length) throws SAXException
    {

        if (xele)
        {
            System.out.println("X value : " + new String(ch, start, length));
            xele = false;
            xList.add(Integer.parseInt(new String(ch, start, length)));
        }

        if (yele)
        {
            System.out.println("Y value : " + new String(ch, start, length));
            yele = false;
            yList.add(Integer.parseInt(new String(ch, start, length)));

        }
;
    }

    final List<Integer> getXList()
    {
        return xList;

    }

    final List<Integer> getYList()
    {
        return yList;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:55:36.387

如果我理解您的问题并期望列表的长度相同，您将需要这样的东西：

```
for (int i=0; i<xList.size(); i++) { paint(xList.get(i),yList.get(i)); } 
```

# c# - Winproc 上的 SetWindowsLong 导致旧的 winproc 被垃圾收集

> ID：13011755
> 
> 赞同：5
> 
> 时间：2012-10-22T12:46:02.447
> 
> 标签：c#, interop

我有一个问题让我发疯。我花了一周的时间追查这个错误，可能只是我对互操作的理解不如我想的那么好。这里是：

```
 public class User
{
  public const int GWL_WNDPROC = -4;

   [DllImport("user32.dll", SetLastError = true)]
    public static extern IntPtr SetWindowLong(IntPtr hWnd, int nIndex, User.WindowProc newProc);

   [DllImport("user32.dll", SetLastError = true)]
    public static extern IntPtr CallWindowProc(IntPtr lpPrevWndFunc, IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);

    public delegate IntPtr WindowProc(IntPtr hWnd, uint msg, IntPtr wParam, IntPtr lParam);

 } 
```

那是我的基本 User32 包装器。现在这样称呼：

```
class MyClass
{
  private User.WindowProc proc;

  public void MyMethod()
  {      
    proc = new User.WindowProc(WndProc);

    old_window_proc = User.SetWindowLong(handle,User.GWL_WNDPROC,proc);
  }

} 
```

强制垃圾回收：

```
 GC.Collect();
   GC.WaitForPendingFinalizers(); 
```

然后调用这个：

```
User.CallWindowProc(old_window_proc,hWnd,   (uint)message.Msg,message.WParam,message.LParam); 
```

我收到 * *CallbackOnCollectedDelegate **错误。为什么旧 Winproc 指针处存在的非托管代码会被 GC 处理？如果我添加这个：

```
oldProcHolder = (User.WindowProc)Marshal.GetDelegateForFunctionPointer(old_window_proc, typeof(User.WindowProc)); 
```

在 SetWindowLong() 之后，它会一直保持它并且没有错误。

我想我根本不明白为什么旧的非托管代码有资格进行垃圾收集？它快把我逼疯了。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:51:32.193

GetDelegateForFunctionPointer 函数在使用时将非托管函数转换为托管代码，即委托。由于任何委托都是托管代码，垃圾收集过程会自动运行。因此 GetDelegateForFunctionPointer 函数符合自动垃圾收集的条件。

# android - Android 远程或推送配置文件

> ID：13011757
> 
> 赞同：3
> 
> 时间：2012-10-22T12:46:03.440
> 
> 标签：android, api, email, configuration, mdm

我正在寻找从 Web URL/链接配置 Android 邮件帐户的解决方案。

Android 设备管理 API（自 2.2 起）非常严格，不包括邮件帐户配置。

在 iOS 上，有配置文件系统。您只需要下载它来配置您的 iOS 设备，但使用 Android 设备的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T04:23:18.527

Android 上没有配置文件。Android 上 MDM 的整个概念与 iOS 上（您已经看到）非常不同。

查看有关电子邮件配置的这些问题。但是，所有这些都与通过在设备上执行代码来配置它有关：

[以编程方式在 Android 中配置第 3 方电子邮件帐户](https://stackoverflow.com/questions/13116381/configuring-a-3rd-party-email-account-in-android-programmatically)

[如何成功将帐户添加到 android 电子邮件数据库？](https://stackoverflow.com/questions/2400786/how-to-successfully-add-account-to-android-e-mail-database)

[Android 电子邮件程序化设置](https://stackoverflow.com/questions/2821270/android-email-programmatic-setup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T02:52:58.703

如果您尝试远程设置用户或设置一些将直接从商店接收其设备的用户 - 您可以在手机上设置用户电子邮件和其他设置，然后将 smartswitch 配置文件下载到 SD 卡（或其他媒体），然后通过电子邮件将其发送给用户，以将其放入他们的 SD 卡中，以将预配置的设置和帐户信息导入他们的手机。您可以选择只复制设置文件，甚至可以只复制电子邮件设置。玩一玩。它是一个非常有用的工具。

# javascript - 在 Android 设备的移动浏览器上自动打开组合框

> ID：13011760
> 
> 赞同：5
> 
> 时间：2012-10-22T12:46:09.070
> 
> 标签：javascript, jquery, html, jquery-mobile, mobile-website

我想**在 Android 设备的浏览器上**自动打开一个组合框。
我有以下代码：

```
<!doctype html>
<head>
 <meta charset="utf-8">
 <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
 <script src="jquery-1.8.0.min.js" type="text/javascript"></script>
 <title>Combobox</title>
</head>

<body>
  <div id="combobox">
    <select id="select">
      <option>1</option>
      <option>2</option>
      <option>3</option>
      <option>4</option>
      <option>5</option>
    </select>
  </div>

  <script>
    $(document).ready(function() {
      document.getElementById('select').size=3;
    });
  </script>
</body>
</html> 
```

这适用于桌面浏览器（参见屏幕截图 1），但不幸的是不适用于 Android 设备上的浏览器（参见屏幕截图 2），只有在当前触摸组合框后才会出现选项：

![截图 桌面](../Images/f30c623c1c6b355859373619d2e193df.png)           ![截图设备](../Images/d547a3764f4b0159b994be91192b5bcd.png)

**我希望它们在打开页面后立即出现**（参见屏幕截图 3）
，并且如果可能只显示 3 个选项（滚动后的其他选项）：

![截图 3](../Images/32af8ad2a34790c8d9012ecda6acbb03.png)

**我该怎么做？**

**编辑 1 ：同时我在**[这里](https://stackoverflow.com/questions/3216017/opening-a-select-box-using-js-in-android-web-browser)发现了一个类似的问题，但似乎也没有解决方案...

**编辑 2**：我现在找到了jQuery **Mobile**和**listview的****解决方法**，请参阅下面的答案，但是我还在等待其他（更好的）想法...

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:43:15.910

我现在找到了一种使用**jQuery Mobile**和**listview**的解决方法。
打开页面后列表视图立即出现，这对我来说没问题。然而，一个完美的解决方案是只显示 3 个选项（滚动后的其他选项）。还在等待其他想法...

```
<!DOCTYPE html>
<html>
<head>
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
 <script src="jquery-1.8.0.min.js"></script>
 <script src="jquery.mobile-1.2.0.min.js"></script>
 <title>Combobox Workaround</title>
</head>

<body>
  <div data-role="page">
    <ul id="listview" data-role="listview">
      <li><a href="#">1</a></li>
      <li><a href="#">2</a></li>
      <li><a href="#">3</a></li>
      <li><a href="#">4</a></li>
      <li><a href="#">5</a></li>
    </ul>
  </div>

  <script>
    $('#listview').on('click', ' > li', function () {
      // show selected index in alert box
      alert('index=' + $(this).index());
    });
  </script>
</body>
</html> 
```

解决方法的屏幕截图：
![截屏](../Images/3dad15c19ab9eb9932d2778a71bb04f6.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T01:57:06.703

而不是使用 div。我认为您应该使用表格。****

# iphone - UIBarButtonItem 外观 setBackgroundImage 按钮下的黑线

> ID：13011767
> 
> 赞同：3
> 
> 时间：2012-10-22T12:46:17.843
> 
> 标签：iphone, ios, uibutton, uiappearance

我所有的按钮下面都有一条小黑线，它们位于`UIControlStateNormal`. 后退按钮和完成按钮不受影响。

这是图像：

![在此处输入图像描述](../Images/8133c9a8476446276f64271faa334216.png)

你可以清楚地看到它，它非常烦人。这是我设置所有图像的方式：

```
[[UIBarButtonItem appearance] setBackgroundImage:[UIImage imageNamed:@"nav-button"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

我对返回和完成按钮使用相同的技术，这没有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:51:45.077

尝试使用`[[UIImage imageNamed:@"nav-button"] resizableImageWithCapInsets:...]`. 似乎您的图像正在平铺，因为它比按钮高度短。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T12:59:18.577

可能不是你想要的，但这就是我处理这个的方式：

```
+ (id) customButtonWithImageNamed:(NSString *)imageName selectedImageNamed:(NSString *)selectedImageName leftCapWidth:(CGFloat)leftCapWidth edgeInsets:(UIEdgeInsets)edgeInsets title:(NSString *)title target:(id)target selector:(SEL)selector {

    UIButton* customButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [customButton addTarget:target action:selector forControlEvents:UIControlEventTouchUpInside];
    customButton.titleLabel.font = [UIFont boldSystemFontOfSize:12.0f];
    customButton.titleLabel.shadowColor = [UIColor colorWithRed:0.0f/255.0f green:0.0f/255.0f blue:0.0f/255.0f alpha:0.25f];
    customButton.titleLabel.shadowOffset = CGSizeMake(0.0f, -1.0f);
    customButton.titleLabel.lineBreakMode = UILineBreakModeTailTruncation;
    customButton.titleEdgeInsets = edgeInsets;
    UIImage* navButtonBackgroundImage = [[UIImage imageNamed:imageName] stretchableImageWithLeftCapWidth:leftCapWidth topCapHeight:0.0f];
    UIImage* navButtonPressedBackgroundImage = [[UIImage imageNamed:selectedImageName] stretchableImageWithLeftCapWidth:leftCapWidth topCapHeight:0.0f];
    [customButton setBackgroundImage:navButtonBackgroundImage forState:UIControlStateNormal];
    [customButton setTitle:title forState:UIControlStateNormal];
    [customButton setBackgroundImage:navButtonPressedBackgroundImage forState:UIControlStateHighlighted];
    [customButton setBackgroundImage:navButtonPressedBackgroundImage forState:UIControlStateSelected];

    CGSize size = CGSizeMake(30.0f, 30.0f);
    if (title != nil) {
        size = [[NSString stringWithString:title] sizeWithFont:customButton.titleLabel.font];
    }
    customButton.frame = CGRectMake(0.0f, 0.0f, size.width + 20.0f, 30.0f);
    customButton.layer.shouldRasterize = YES;
    customButton.layer.rasterizationScale = [[UIScreen mainScreen] scale];
    return [[[UIBarButtonItem alloc] initWithCustomView:customButton] autorelease];
} 
```

我有一个静态方法可以为我返回一个不错的按钮:)

和

```
+ (id) customBarButtonWithTitle:(NSString *)title target:(id)target selector:(SEL)selector {
    return [self customButtonWithImageNamed:@"navbarbutton"
                         selectedImageNamed:@"navbarbutton_active"
                               leftCapWidth:5.0f
                                 edgeInsets:UIEdgeInsetsMake(0.0f, 5.0f, 0.0f, 5.0f)
                                      title:title
                                     target:target
                                   selector:selector];
} 
```

=> self.navigationItem.leftBarButtonItem = [UIBarButtonItem customBarButtonWithTitle:@"Info" target:self 选择器:@selector(pushInfoViewController)];

# iphone - 从 iphone 邮件应用程序获取邮件列表

> ID：13011768
> 
> 赞同：0
> 
> 时间：2012-10-22T12:46:17.437
> 
> 标签：iphone, objective-c, ios

我们可以从 iphone 邮件应用程序访问邮件列表吗？我需要在我的本机应用程序中获取邮件列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:49:51.067

这在 SDK 中不可用，并且没有越狱就无法做到这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T12:51:20.387

不，Apple 不允许这样的事情。（而且您也无法访问消息）但您可以将 EventKit 用于提醒和日历

# java - 如何将数据从 BroadcastReceiver 传递到主要活动？

> ID：13011769
> 
> 赞同：0
> 
> 时间：2012-10-22T12:46:20.750
> 
> 标签：java, android, android-intent, broadcastreceiver

> **可能重复：**
> [如何将数据从 BroadcastReceiver 传递到正在启动的 Activity？](https://stackoverflow.com/questions/2616859/how-do-i-pass-data-from-a-broadcastreceiver-through-to-an-activity-being-started)

在我的 Android 应用程序中，我有一个名为的主要活动`App`和一个名为的 BroadcastReceiver `SmsReceiver`。在`onReceive()`方法中`SmsReceiver`，我想捕获一条短信并将其内容发送回`App`。不过，我不知道该怎么做。这可以通过里面的课程来完成`App`吗？我已经尝试过这样做，并将该类的名称添加到 AndroidManifest，但在尝试调用它时，应用程序崩溃并显示无法实例化此类的错误。

（我知道这个问题之前已经发布过，但我还没有看到任何令人满意的答案。）

编辑，以说明我尝试的解决方案：

在 AndroidManifest 中，我添加了以下内容：

```
 <receiver android:name=".App.SmsHandler" >
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver> 
```

在 App 类中，我添加了：

```
public class SmsHandler extends BroadcastReceiver {
    public void onReceive(Context context, Intent intent) {
        // Stuff here
    }
} 
```

和

```
public static final String TEXT_INTENT = "textintent"; 
```

我尝试使用以下代码调用它（`SmsReceiver`但这会使应用程序崩溃）：

```
private void forwardSms(Message message, Context context) {
    Intent myIntent = new Intent(MsgWallApp.TEXT_INTENT);

    Bundle myData = new Bundle();
    myData.putString("sender", message.getSender());
    myData.putString("text", message.getText());
    context.sendBroadcast(myIntent);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:51:35.113

如果您只想在活动未销毁时捕获事件，那么在活动内拥有广播接收器就足够了。

如果您想捕获所有广播，即使您的活动没有开始，请查看[Android Services](http://developer.android.com/reference/android/app/Service.html)。

关于您的具体错误，将其粘贴在这里怎么样？也可能是你的代码？

# wordpress - Wordpress Multisite shares wp_posts table with postmeta

> ID：13011777
> 
> 赞同：1
> 
> 时间：2012-10-22T12:46:46.783
> 
> 标签：wordpress

I've been working with wordpress for a couple of years and I can say I'm a pretty advanced user. The thing is that I am finding my self duplicating lots of wordpress sites that I created that need the exact same database and I just need to change some minor theme settings(Logo, some pages, footer/header text, title etc...).

I was reading in the documentation about multi-sites and it seems like a good solution. What i couldn't understand is if I could use in multisite a master database that will be used for all the site I create. Is this possible?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:35:16.960

默认情况下，当您打开 WordPress 多站点功能时，每个站点都有自己的表（wp_2_posts 等...）。

我认为您不能与不同的站点共享 wp_posts 表。

查看有关多站点数据库结构的 Codex 页面：

[http://codex.wordpress.org/Database_Description#Site_Specific_Tables](http://codex.wordpress.org/Database_Description#Site_Specific_Tables)

干杯。

# c# - SelectedIndex 更改后调用操作

> ID：13011785
> 
> 赞同：0
> 
> 时间：2012-10-22T12:46:59.267
> 
> 标签：c#, windows-phone-7, mvvm-light, panorama-control

我是 MVVMLight 的新手。我想在全景标签更改后调用一些方法。我想了解有关所选全景选项卡的信息。一个问题是，未调用 HandlePanoramaViewSelected 方法。

我不能让它工作。不知道怎么回事

xml:

```
<controls:Panorama x:Name="mainViewPanorama">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="SelectionChanged">
                    <cmd:EventToCommand Command ="{Binding PanoramaSelectedViewCommand, Mode=OneWay}"
                                        CommandParameter="{Binding SelectedValue, ElementName=mainViewPanorama}" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
</controls:Panorama> 
```

构造函数：

```
PanoramaSelectedViewCommand = new RelayCommand<SelectionChangedEventArgs>(x => HandlePanoramaViewSelected(x)); 
```

视图模型：

```
public RelayCommand<SelectionChangedEventArgs> PanoramaSelectedViewCommand { get; set; }

private void HandlePanoramaViewSelected(SelectionChangedEventArgs args)
{
// do something
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:44:35.613

您正在混合两种不同的方法。请仅执行以下示例之一：

**传递事件参数**

XAML：

```
<controls:Panorama x:Name="mainViewPanorama">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="SelectionChanged">
            <cmd:EventToCommand Command ="{Binding PanoramaSelectedViewCommand}"
                                PassEventArgsToCommand="True" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</controls:Panorama> 
```

属性和处理程序：

```
public RelayCommand<SelectionChangedEventArgs> PanoramaSelectedViewCommand { get; set; }

private void HandlePanoramaViewSelected(SelectionChangedEventArgs args)
{
    // do something
} 
```

构造函数：

```
PanoramaSelectedViewCommand = new RelayCommand<SelectionChangedEventArgs>(HandlePanoramaViewSelected); 
```

**传递命令参数**

XAML：

```
<controls:Panorama x:Name="mainViewPanorama">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="SelectionChanged">
            <cmd:EventToCommand Command ="{Binding PanoramaSelectedViewCommand}"
                                CommandParameter="{Binding Path=SelectedItem, ElementName=mainViewPanorama}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</controls:Panorama> 
```

属性和处理程序：

```
public RelayCommand<object> PanoramaSelectedViewCommand { get; set; }

private void HandlePanoramaViewSelected(object selectedItem)
{
    // do something
} 
```

构造函数：

```
PanoramaSelectedViewCommand = new RelayCommand<object>(HandlePanoramaViewSelected); 
```

# php - 使用 New Relic 跟踪 PHP 异常日志

> ID：13011786
> 
> 赞同：3
> 
> 时间：2012-10-22T12:46:59.627
> 
> 标签：php, newrelic

**问题**：我们想用 New Relic 跟踪日志消息。日志文本是 PHP 应用程序中异常的产物。到目前为止，我们将异常消息写入数据库，并面临严重的内存空间问题。

**实际状态**：PHP 代理已安装且可用（理论上）。

**问题**：使用 New Relic PHP-API 调用哪个方法？！接收手动编写错误消息的目标的步骤是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:14:23.727

我认为我正在寻找的 API 调用是“ **newrelic_notice_error (message, exception)** ”。

# mysql - 在mysql中导入数据而不覆盖某些列

> ID：13011792
> 
> 赞同：0
> 
> 时间：2012-10-22T12:47:19.443
> 
> 标签：mysql, mysqldump

好的，我已经在这个问题上坐了一段时间，我找到了一些解决方法，但我想知道是否可以按照我的想法进行操作。

我有 2 个数据库，一个`DB_A`位于网络服务器上的远程（我将调用它）收集数据，一个在我的本地机器上分析此数据（我将调用它`DB_B`）。这些表具有基本相同的结构，但在处理端（`DB_B`）我添加一些列。

所以服务器端（`DB_A`）看起来像这样：

```
|UserID|LastActive|InfoA|InfoB| 
```

在本地 ( `DB_B`) 上是这样的：

```
|UserID|LastActive|InfoA|InfoB|InfoC| 
```

因此，当我最初将数据导入本地时`InfoC`，`NULL`然后我处理数据以在`InfoC`. 与此同时，`DB_A`用新数据填充和更新。我想要的是从中导出数据`DB_A`并将其导入`DB_B`并更新字段，例如`LastActive`并且`InfoB`不覆盖`InfoC`，这样我以后可以处理所有`InfoC`尚未设置的行

到目前为止我发现了什么：

*   一个简单的 mysqldump 和 import 不起作用，因为表的结构不同。因此，我使用带有 --execute 和 -X 参数的 mysql 来获取 XML 数据文件
*   在我使用时导入 XML 文件`DB_B`没有错误： `LOAD XML INFILE 'path/to/file.xml' REPLACE INTO TABLE users;`但它会清除所有信息`InfoC`
*   当我使用该`INSERT IGNORE`语句时，它显然不会更新已导入的用户。

所以我的问题是：有没有办法在不使用中间表之类的变通方法的情况下使用 MySQL 来做到这一点。

另外：我知道这可以通过使用 PHP 或任何其他语言轻松完成，但我希望坚持使用简单的 MySQL 解决方案

**编辑：** 感谢 Simon，我得到了一个相当简单的解决方案，它使用 tmp 数据库。有了这个，我什至可以使用 mysqldump 并且不需要使用缓慢的 XML 方式：

```
# create temporary db (for tweaking performance create it in memory)
DROP TABLE IF EXISTS tmp_users;
CREATE TABLE tmp_users LIKE users; 

# import data (just as an example, this is not mysql syntax)
mysql<users.sql

# this is even simpler than in the answer
# since you don't have to specify values for the select and insert
INSERT INTO users
SELECT * FROM tmp_users
ON DUPLICATE KEY UPDATE 
  LastActive = VALUES(LastActive),
  InfoA = VALUES(InfoA),
  InfoB = VALUES(InfoB);

DROP TABLE IF EXISTS tmp_users; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:25:38.990

使用 INSERT 可能是执行此操作的方法，类似于以下内容，使用“ON DUPLICATE KEY UPDATE”（链接到文档：[http ://dev.mysql.com/doc/refman/5.0/en /insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html) )

```
-- Set up the insert into DB_B
INSERT INTO DB_B (
  UserID, -- Assuming this is the PK
  LastActive,
  InfoA,
  InfoB,
  InfoC
) 
-- Do whatever you did in your INSERT IGNORE statement, a temp. table is probably most efficient though
SELECT
  UserID,
  LastActive,
  InfoA,
  InfoB,
  NULL -- Assumes that the default for InfoC is NULL
FROM tempTable
-- Now tell MySQL to update any where the PK matches
ON DUPLICATE KEY UPDATE
  LastActive = VALUES(LastActive),
  InfoA = VALUES(InfoA),
  InfoB = VALUES(InfoB) 
```

我真的看不到单独使用 LOAD DATA 直接执行此操作的方法，因为它似乎只是真正支持`IGNORE`和`REPLACE`作为选项，这两者都不是真正适合您的目的。

# ruby-on-rails - ArgumentError（无法解析 Cookie 标头：无效的 %-encoding (Req%201008%20-

> ID：13011796
> 
> 赞同：3
> 
> 时间：2012-10-22T12:47:45.097
> 
> 标签：ruby-on-rails, ruby, cookies, encoding, jruby

在我的 rails 应用程序中，当我使用一些非 uni-code 字符时

来吧？Cómo estás？代表代表પ્રતિનિધિત્વ Požádat అభ్యర్థించవచ్చు</p>

我的应用程序似乎因以下错误而崩溃：

```
Started GET "/requests/1008" for 127.0.0.1 at 2012-10-22 18:00:47 +0530
ArgumentError (cannot parse Cookie header: invalid %-encoding (Req%201008%20-  %20%u0AAA%u0ACD%u0AB0%u0AA4%u0ABF%u0AA8%u0ABF%u0AA7%u0ABF%u0AA4%u0ACD%u0AB5*http://127.0.0.1:3000/requests/1008)): 
```

请让我知道是否有人对此问题有任何想法。

谢谢，院长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T07:14:16.917

您需要做的是清除此特定站点的 cookie（在您的情况下为 localhost）。

某些设置不正确的 cookie。

# android - 空指针列表适配器android

> ID：13011797
> 
> 赞同：-2
> 
> 时间：2012-10-22T12:47:45.940
> 
> 标签：android, list, pointers, null, adapter

我创建了自己的适配器来将一些音乐会放在列表中。没有日期分隔符，一切正常，但是有了它们，当您向下滚动列表并为将出现在屏幕上的每个新行调用 convertView 函数时，我在 convertView 函数的以下行中得到 NullPointer 异常：

```
tvNombre.setText(entry.getArtista()); 
```

但是我可以在日志中打印艺术家的名字，并且我修改了将正确的列表传递给适配器。有谁能够帮我？

提前致谢。

```
 listConciertoEvento.add(new ConciertoEvento("dia_0", "", new GregorianCalendar(2012,10,dia,0,0)));

    listConciertoEvento.add(new ConciertoEvento(x++,"Moodyman","Becool","Electrónica",
            new GregorianCalendar(2012,10,dia,23,30),new GregorianCalendar(2012,10,dia+1,5,0),"","",10));
    listConciertoEvento.add(new ConciertoEvento(x++,"Chinese Man","Razzmataz 2","Trip-Hop",
            new GregorianCalendar(2012,10,dia,21,0),new GregorianCalendar(2012,10,dia,23,0),"","", 50));
    listConciertoEvento.add(new ConciertoEvento(x++,"Kreator","Razzmataz","Thrash Metal",
            new GregorianCalendar(2012,10,dia,20,30),new GregorianCalendar(2012,10,dia,23,0),"","",10));
    listConciertoEvento.add(new ConciertoEvento(x++,"Barricada","KGB","Rock",
            new GregorianCalendar(2012,10,dia,22,0),new GregorianCalendar(2012,10,dia+1,0,30),"","", 50));
    listConciertoEvento.add(new ConciertoEvento(x++,"The Buzzcocks","Apolo","Thrash Metal",
            new GregorianCalendar(2012,10,dia,21,30),new GregorianCalendar(2012,10,dia,23,30),"","",10));
    listConciertoEvento.add(new ConciertoEvento(x++,"Mr.Oizo","La 2","Electrónica",
            new GregorianCalendar(2012,10,dia,23,30),new GregorianCalendar(2012,10,dia+1,3,0),"","", 50));

    dia++;
    //listConciertoEvento.add(new ConciertoEvento("dia_1", "", new GregorianCalendar(2012,10,dia,0,0)));

        listConciertoEvento.add(new ConciertoEvento(x++,"Cannibal Corpse_1","Razzmataz","Death Metal",new GregorianCalendar(2012,10,13,13,30),new GregorianCalendar(2012,10,13,15,0),"","", 15));
    listConciertoEvento.add(new ConciertoEvento(x++,"Cannibal Corpse_2","Razzmataz","Death Metal",new GregorianCalendar(2012,10,13,13,30),new GregorianCalendar(2012,10,13,15,0),"","", 15));
    listConciertoEvento.add(new ConciertoEvento(x++,"Cannibal Corpse_3","Razzmataz","Death Metal",new GregorianCalendar(2012,10,13,13,30),new GregorianCalendar(2012,10,13,15,0),"","", 15));
    listConciertoEvento.add(new ConciertoEvento(x++,"Cannibal Corpse_4","Razzmataz","Death Metal",new GregorianCalendar(2012,10,13,13,30),new GregorianCalendar(2012,10,13,15,0),"","", 15));
    listConciertoEvento.add(new ConciertoEvento(x++,"Cannibal Corpse_5","Razzmataz","Death Metal",new GregorianCalendar(2012,10,13,13,30),new GregorianCalendar(2012,10,13,15,0),"","", 15));
    listConciertoEvento.add(new ConciertoEvento(x++,"Cannibal Corpse_6","Razzmataz","Death Metal",new GregorianCalendar(2012,10,13,13,30),new GregorianCalendar(2012,10,13,15,0),"","", 15));
    listConciertoEvento.add(new ConciertoEvento(x++,"Cannibal Corpse_7","Razzmataz","Death Metal",new GregorianCalendar(2012,10,13,13,30),new GregorianCalendar(2012,10,13,15,0),"","", 15));
    listConciertoEvento.add(new ConciertoEvento(x++,"Cannibal Corpse_8","Razzmataz","Death Metal",new GregorianCalendar(2012,10,13,13,30),new GregorianCalendar(2012,10,13,15,0),"","", 15));
    listConciertoEvento.add(new ConciertoEvento(x++,"Cannibal Corpse_9","Razzmataz","Death Metal",new GregorianCalendar(2012,10,13,13,30),new GregorianCalendar(2012,10,13,15,0),"","", 15));
    listConciertoEvento.add(new ConciertoEvento(x++,"Cannibal Corpse_10","Razzmataz","Death Metal",new GregorianCalendar(2012,10,13,13,30),new GregorianCalendar(2012,10,13,15,0),"","", 15));
    listConciertoEvento.add(new ConciertoEvento(x++,"Cannibal Corpse_11","Razzmataz","Death Metal",new GregorianCalendar(2012,10,13,13,30),new GregorianCalendar(2012,10,13,15,0),"","", 15));
    listConciertoEvento.add(new ConciertoEvento(x++,"Cannibal Corpse_12","Razzmataz","Death Metal",new GregorianCalendar(2012,10,13,13,30),new GregorianCalendar(2012,10,13,15,0),"","", 15));
    listConciertoEvento.add(new ConciertoEvento(x++,"Cannibal Corpse_13","Razzmataz","Death Metal",new GregorianCalendar(2012,10,13,13,30),new GregorianCalendar(2012,10,13,15,0),"","", 15));
    listConciertoEvento.add(new ConciertoEvento(x++,"Cannibal Corpse_14","Razzmataz","Death Metal",new GregorianCalendar(2012,10,13,13,30),new GregorianCalendar(2012,10,13,15,0),"","", 15));
    listConciertoEvento.add(new ConciertoEvento(x++,"Cannibal Corpse_15","Razzmataz","Death Metal",new GregorianCalendar(2012,10,13,13,30),new GregorianCalendar(2012,10,13,15,0),"","", 15)); 
```

这里是适配器上 convertView 的代码：

```
 public View getView(int position, View convertView, ViewGroup viewGroup) {

    ConciertoEvento entry = listConciertoEvento.get(position);
    if (convertView == null) {

        if (!entry.getArtista().startsWith("dia_")){

            Log.v("lalalala", "XXXX layout concierto");

            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.concierto_evento_row, null);

        }else{

            Log.v("lalalala", "XXXX layout dia");

            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.dia_row, null);
        }
    }

final int id = entry.getId();
    if (!entry.getArtista().startsWith("dia_")){

        Log.v("lalalala", "XXXX is concert");

        ImageView imSquare = (ImageView) convertView.findViewById(R.id.imSquare);

        TextView tvNombre = (TextView) convertView.findViewById(R.id.tvNombre);

        Log.v("lalalala", entry.getArtista());
        tvNombre.setText(entry.getArtista());
        Log.v("lalalala", "XXXX tvNombre.setText(entry.getArtista()); done");

        TextView tvPath = (TextView) convertView.findViewById(R.id.tvPath);
        tvPath.setText(entry.getPath_imagen());

    }else{
        Log.v("lalalala", "XXXX is day");
        Log.v("lalalala", entry.getArtista());

    }

    return convertView;
} 
```

这里的日志：

```
10-22 12:23:11.468: V/lalalala(582): XXXXXXXXXXX  xivato en fragment2
10-22 12:23:11.468: V/lalalala(582): dia_0
10-22 12:23:11.468: V/lalalala(582): Kreator
10-22 12:23:11.468: V/lalalala(582): Chinese Man
10-22 12:23:11.468: V/lalalala(582): The Buzzcocks
10-22 12:23:11.468: V/lalalala(582): Barricada
10-22 12:23:11.468: V/lalalala(582): Mr.Oizo
10-22 12:23:11.468: V/lalalala(582): Moodyman
10-22 12:23:11.468: V/lalalala(582): dia_1
10-22 12:23:11.468: V/lalalala(582): Cannibal Corpse_15
10-22 12:23:11.468: V/lalalala(582): Cannibal Corpse_14
10-22 12:23:11.468: V/lalalala(582): Cannibal Corpse_13
10-22 12:23:11.468: V/lalalala(582): Cannibal Corpse_12
10-22 12:23:11.468: V/lalalala(582): Cannibal Corpse_11
10-22 12:23:11.468: V/lalalala(582): Cannibal Corpse_10
10-22 12:23:11.468: V/lalalala(582): Cannibal Corpse_9
10-22 12:23:11.468: V/lalalala(582): Cannibal Corpse_8
10-22 12:23:11.468: V/lalalala(582): Cannibal Corpse_7
10-22 12:23:11.468: V/lalalala(582): Cannibal Corpse_6
10-22 12:23:11.468: V/lalalala(582): Cannibal Corpse_5
10-22 12:23:11.468: V/lalalala(582): Cannibal Corpse_4
10-22 12:23:11.468: V/lalalala(582): Cannibal Corpse_3
10-22 12:23:11.468: V/lalalala(582): Cannibal Corpse_2
10-22 12:23:11.468: V/lalalala(582): Cannibal Corpse_1
10-22 12:23:11.619: D/dalvikvm(582): GC_EXTERNAL_ALLOC freed 130K, 51% free 2642K/5379K, external 904K/1038K, paused 48ms
10-22 12:23:11.669: V/lalalala(582): XXXX layout dia
10-22 12:23:11.669: V/lalalala(582): XXXX is day
10-22 12:23:11.669: V/lalalala(582): dia_0
10-22 12:23:11.679: V/lalalala(582): XXXX layout concierto
10-22 12:23:11.739: D/dalvikvm(582): GC_EXTERNAL_ALLOC freed 12K, 51% free 2640K/5379K, external 1058K/1570K, paused 50ms
10-22 12:23:11.779: V/lalalala(582): XXXX is concert
10-22 12:23:11.779: V/lalalala(582): Kreator
10-22 12:23:11.779: V/lalalala(582): XXXX tvNombre.setText(entry.getArtista()); done
10-22 12:23:11.789: V/lalalala(582): XXXX layout concierto
10-22 12:23:11.799: V/lalalala(582): XXXX is concert
10-22 12:23:11.799: V/lalalala(582): Chinese Man
10-22 12:23:11.799: V/lalalala(582): XXXX tvNombre.setText(entry.getArtista()); done
10-22 12:23:11.809: V/lalalala(582): XXXX layout concierto
10-22 12:23:11.819: V/lalalala(582): XXXX is concert
10-22 12:23:11.819: V/lalalala(582): The Buzzcocks
10-22 12:23:11.819: V/lalalala(582): XXXX tvNombre.setText(entry.getArtista()); done
10-22 12:23:11.819: V/lalalala(582): XXXX layout concierto
10-22 12:23:11.839: V/lalalala(582): XXXX is concert
10-22 12:23:11.839: V/lalalala(582): Barricada
10-22 12:23:11.839: V/lalalala(582): XXXX tvNombre.setText(entry.getArtista()); done
10-22 12:23:11.839: V/lalalala(582): XXXX layout concierto
10-22 12:23:11.869: V/lalalala(582): XXXX is concert
10-22 12:23:11.879: V/lalalala(582): Mr.Oizo
10-22 12:23:11.879: V/lalalala(582): XXXX tvNombre.setText(entry.getArtista()); done
10-22 12:23:11.889: V/lalalala(582): XXXX layout concierto
10-22 12:23:11.899: V/lalalala(582): XXXX is concert
10-22 12:23:11.899: V/lalalala(582): Moodyman
10-22 12:23:11.899: V/lalalala(582): XXXX tvNombre.setText(entry.getArtista()); done
10-22 12:23:11.909: V/lalalala(582): XXXX layout dia
10-22 12:23:11.909: V/lalalala(582): XXXX is day
10-22 12:23:11.909: V/lalalala(582): dia_1
10-22 12:23:11.909: V/lalalala(582): XXXX layout concierto
10-22 12:23:11.929: V/lalalala(582): XXXX is concert
10-22 12:23:11.929: V/lalalala(582): Cannibal Corpse_15
10-22 12:23:11.929: V/lalalala(582): XXXX tvNombre.setText(entry.getArtista()); done
10-22 12:23:37.829: W/KeyCharacterMap(582): No keyboard for id 0
10-22 12:23:37.829: W/KeyCharacterMap(582): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
10-22 12:23:39.729: V/lalalala(582): XXXX is concert
10-22 12:23:39.739: V/lalalala(582): Cannibal Corpse_14
10-22 12:23:39.739: D/AndroidRuntime(582): Shutting down VM
10-22 12:23:39.749: W/dalvikvm(582): threadid=1: thread exiting with uncaught exception (group=0x40015560)
10-22 12:23:39.769: E/AndroidRuntime(582): FATAL EXCEPTION: main
10-22 12:23:39.769: E/AndroidRuntime(582): java.lang.NullPointerException
10-22 12:23:39.769: E/AndroidRuntime(582):  at com.u.totsound.AdapterConciertoEvento.getView(AdapterConciertoEvento.java:89)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.widget.AbsListView.obtainView(AbsListView.java:1409)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.widget.ListView.addViewBelow(ListView.java:2914)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.widget.ListView.scrollListItemsBy(ListView.java:2843)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.widget.ListView.arrowScrollImpl(ListView.java:2340)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.widget.ListView.arrowScroll(ListView.java:2287)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.widget.ListView.commonKey(ListView.java:2089)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.widget.ListView.onKeyDown(ListView.java:2036)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.view.KeyEvent.dispatch(KeyEvent.java:1256)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.view.View.dispatchKeyEvent(View.java:3855)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:787)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.widget.ListView.dispatchKeyEvent(ListView.java:2021)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.widget.TabHost.dispatchKeyEvent(TabHost.java:278)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-22 12:23:39.769: E/AndroidRuntime(582):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1687)
10-22 12:23:39.769: E/AndroidRuntime(582):  at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1120)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.app.Activity.dispatchKeyEvent(Activity.java:2073)
10-22 12:23:39.769: E/AndroidRuntime(582):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1663)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2560)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2535)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1867)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.os.Looper.loop(Looper.java:123)
10-22 12:23:39.769: E/AndroidRuntime(582):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-22 12:23:39.769: E/AndroidRuntime(582):  at java.lang.reflect.Method.invokeNative(Native Method)
10-22 12:23:39.769: E/AndroidRuntime(582):  at java.lang.reflect.Method.invoke(Method.java:507)
10-22 12:23:39.769: E/AndroidRuntime(582):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-22 12:23:39.769: E/AndroidRuntime(582):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-22 12:23:39.769: E/AndroidRuntime(582):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:54:55.887

are you aware that ListAdapter has its way to manage different kind of row?

You should rely on `public int getItemViewType (int position)` and `public int getViewTypeCount ()` instead of check if the `entry.getArtist()` starts with `"dia"`. The issue is surely related to this.

# opencv - 对于大于 64 x 128 像素的图像，如何为 HoG 训练图像？

> ID：13011800
> 
> 赞同：0
> 
> 时间：2012-10-22T12:47:59.720
> 
> 标签：opencv, computer-vision, svm, object-detection

我正在编写自己的 HoG 以供将来修改，并尝试不同的方法。但我偶然发现了这个问题/问题。

我从 INRIA 下载了数据集，其中有 320 x 240 的图像。而 HoG 的默认训练窗口大小为 64 x 128。我应该如何解决这个问题？

对于正图像，它们大约为 96 x 160 像素，我所做的是将它们的大小调整为 64 x 128。但是对于较大的图像，我是否调整它们的大小，使用逐个像素移动的滑动窗口，或者我计算该大图像中 64 x 128 块的特征？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T01:37:44.220

这个问题的答案完全取决于您的应用领域以及您对这些图像的了解。我以前没有玩过INRIA，但是....

1）您要查找的对象是否都大小相同，并且在所有图像中的位置都相同？那么固定大小、固定位置的 64x128 集可能就可以了。

2）您要查找的对象是否都大小相同，只是在不同图像中的不同位置？然后滑动窗口可能会起作用。

3）您是否希望对象改变大小并填充整个图像的不同百分比？然后你需要做一些事情来减轻比例和位置变化，使用图像金字塔或其他比例不变技术（你可以通过将图像调整为几个中间尺寸并运行滑动窗口版本来粗略地做到这一点每个）。

另外，这是为了训练分类器吗？如果是这样，您需要一种方法来标记适当的规模和位置，和/或解决多实例学习问题。如果你只是想跑，你需要一种方式来声明和给自己打分……

很多有趣的事情！

# algorithm - 有些程序如何画出流畅的线条？

> ID：13011802
> 
> 赞同：1
> 
> 时间：2012-10-22T12:48:02.580
> 
> 标签：algorithm, graphics, 2d

如您所知，当我们使用通常的线条绘制方法时，我们使用这样的代码（我不是在谈论特定的编程语言。我只是在谈论我们做什么。）：

```
line(point1,point2) 
```

或类似的东西。

我相信你已经看到，当我们用这些常用的方法画一条**对角线**时，这条线不会是平滑的。例如，如果你去 windows paint 并将线宽设置为最小，然后尝试画一条对角线，你会看到线条中的断点。但是，在 Photoshop、Corel DRAW 等一些程序中，当您绘制对角线时，它非常平滑，您看不到断点。如果您仔细观察像素，您会发现是什么原因造成的：

[https://skydrive.live.com/embed?cid=6D7B572F0E7DEFED&resid=6D7B572F0E7DEFED%21115&authkey=AMgqS95hWkp-e5w](https://skydrive.live.com/embed?cid=6D7B572F0E7DEFED&resid=6D7B572F0E7DEFED%21115&authkey=AMgqS95hWkp-e5w)

我知道浅色像素会导致平滑度。

好的，你能告诉我我需要什么算法吗？

简单地说，请。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:59:08.633

我认为[Xiaolin Wu的线路算法](http://en.wikipedia.org/wiki/Xiaolin_Wu%27s_line_algorithm)正是你所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:52:04.437

您需要应用**抗锯齿算法**

抗锯齿是指用于解决采样信号（例如数字图像）中的混叠问题的多种技术。具体可以指：

*   抗混叠滤波器，信号采样器之前使用的滤波器，用于限制信号的带宽
*   多重采样抗锯齿，一种抗锯齿，一种用于计算机图形学以提高图像质量的技术
*   Supersample anti-aliasing，一种抗锯齿技术
*   空间抗锯齿，在以较低分辨率表示高分辨率图像时最小化锯齿的技术
*   时间抗锯齿，旨在减少或消除时间锯齿的影响

实现抗锯齿的一种简单方法是将图像渲染为原始大小的 4 倍，然后存储每 4 个像素（4 个正方形像素）的平均颜色值，并使用平均值渲染一个新图像，使其平滑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T13:03:35.353

仔细看在windows中绘制的线条画它用一种颜色填充像素（没有线条颜色的阴影），因此它不会是平滑的。
平滑线用线条颜色的浅色调填充相邻像素，使线条看起来平滑。![在此处输入图像描述](../Images/48b3a92016838d0e92858422b561d2d9.png)

# c# - LINQ 是否仅将 SQL Server 中的所有项目加载到内存或块中？

> ID：13011808
> 
> 赞同：3
> 
> 时间：2012-10-22T12:48:24.157
> 
> 标签：c#, .net, sql-server, linq, sqldatareader

我想知道 LINQ 和 SqlDataProvider 设法遍历整个表。

**对于下面的示例，**

*   整个 foo 项是否已一次性加载到内存中，CLR 是否遍历内存中的 foo 项？

*   或者 foo 项目是从 SQL Server 分块加载的？

*   或者它们一次只能从 SQL SERVER 加载到 MEMORT 一个 foo 中？

*   或者 ？

```
using (var context = new FooEntities())
{
    var allItems = from foo in context.Foos
                   select foo;      

    // Are all foos LOADED into the MEMORY at once?
    // Or they come from SQL SERVER in chunks?
    foreach (f in foos)
        Console.WriteLine(f.ID);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:56:44.747

这取决于 ORM 工具。目前还不清楚，但它*看起来*像`FooEntities`实体框架？

首先，请注意，大多数“完整”的 ORM 将（默认情况下）将它加载的所有对象附加到身份管理器/更改管理器中，这意味着一旦看到对象，它们将在 ORM 实例的生命周期内一直存在（尽管有时有禁用此功能的方法）。

其次，请注意，通常类似的结果`.Foos`将是一个“实体集”或类似的，一个完全加载的数据集；但同样，它*不一定*。

基本上，这取决于很多不在问题中的细节。但是，通常有 API 可以加载非缓冲（假脱机）的数据，并且不附加到更改管理器/身份管理器。例如，LINQ-to-SQL 具有`ObjectTrackingEnabled`和其他一些切换功能。

如果您只是在使用可以延迟处理数据、将行具体化为对象的工具，那么[dapper](http://nuget.org/packages/Dapper)可能会很有用：

```
foreach(EntityType row in connection.Query<EntityType>(
   "select * from TableName", buffered: false))
{
    // fully streaming, no identity manager
    Console.WriteLine(row.Id);
    // ...etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:22:38.870

在您的具体示例中，您很可能会将整个表格拉入内存。对 DB 的调用将在 开始时进行`foreach`，看起来像`SELECT * FROM FOO`. 尝试像其他人建议的那样跨过并观看分析器。

SQL Server 探查器非常适合这些东西，EFProfiler 也是如此。请参阅此处： EFProfiler 网站上的[http://www.hibernatingrhinos.com/products/efprof/learn](http://www.hibernatingrhinos.com/products/efprof/learn)，了解使用 Linq 的一些“反模式”。这些实际上几乎适用于任何类型的数据访问。还请查看 Joe Albahari 的 LINQ 测验：[http](http://www.albahari.com/nutshell/linqquiz.aspx) ://www.albahari.com/nutshell/linqquiz.aspx也有一些有趣的东西需要注意 LINQ。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:50:17.773

是的，只要开始访问它。这些被加载到内存中。

只有`virtual`对象的属性不会被加载。

如果您不想一次加载所有对象，则可以使用`Take`and`Skip`进行分页。

```
// Take only 100 objects.
var someitems = allItems.Skip(100).Take(100); 
```

为了更好地理解，请查看文章。

> [Linq to SQL 延迟加载 - 延迟加载](http://blogs.microsoft.co.il/blogs/bursteg/archive/2007/10/06/linq-to-sql-deferred-loading-lazy-load.aspx)

# java - 在计时器上绘制图像

> ID：13011809
> 
> 赞同：3
> 
> 时间：2012-10-22T12:48:24.047
> 
> 标签：java, image, netbeans, timer

我正在用java制作一个xlet应用程序，在一个场景中，当我输入右键时，我现在有一个鼠标图像。但现在我希望它在计时器上移动，我现在拥有的是一个计时器，它在刻度上打印我的图像的位置，它会正确地改变 zo x 和 y 的变化。但是图像没有绘制，有人可以帮助我吗？这是我拥有的 3 个文件：

这是 hellotvxlet 类（主要的东西）：

```
package hellotvxlet;

import javax.tv.xlet.*;
import org.havi.ui.*;
import java.awt.*;
import java.awt.event.KeyEvent;
import org.bluray.ui.event.HRcEvent;
import org.dvb.event.EventManager;
import org.dvb.event.UserEventListener;
import org.dvb.event.UserEventRepository;
import org.dvb.ui.*;
import java.util.Timer;
//import org.dvb.ui.*;
//import java.awt.event.ActionEvent;
//import org.havi.ui.event.HActionListener;

public class HelloTVXlet implements Xlet, UserEventListener{
    private XletContext actueleXletContext;
    public HScene scene;
    int waardex = 20;
    int waardey = 20;
    // x; y; 
    MijnComponent mc = new MijnComponent("bitmap1.jpg",waardex,waardey);
    // debuggen of niet ?
    private boolean debug=true;

    public HelloTVXlet(){

    }

    public void initXlet(XletContext context) throws XletStateChangeException {
      if(debug) System.out.println("Xlet initialiseren");
      this.actueleXletContext = context;

      HSceneTemplate sceneTemplate = new HSceneTemplate();

      sceneTemplate.setPreference(HSceneTemplate.SCENE_SCREEN_DIMENSION, new HScreenDimension(1.0f, 1.0f), HSceneTemplate.REQUIRED);

      sceneTemplate.setPreference(HSceneTemplate.SCENE_SCREEN_LOCATION, new HScreenPoint(0.0f,0.0f), HSceneTemplate.REQUIRED);

      scene = HSceneFactory.getInstance().getBestScene(sceneTemplate);

      scene.add(mc);

    }

    public void startXlet () throws XletStateChangeException {

    MijnTimerTask objMijnTimerTask=new MijnTimerTask ( );
    Timer timer = new Timer();
    timer.scheduleAtFixedRate(objMijnTimerTask ,0, 100); 
    //star t na 0ms, elke 100ms 

    if(debug) System.out.println("Xlet starten");

    EventManager manager = EventManager.getInstance();
    UserEventRepository repository = new UserEventRepository("voorbeeld");
    repository.addKey( org.havi.ui.event.HRcEvent.VK_UP);
    repository.addKey( org.havi.ui.event.HRcEvent.VK_DOWN);
    repository.addKey( org.havi.ui.event.HRcEvent.VK_RIGHT);
    repository.addKey( org.havi.ui.event.HRcEvent.VK_LEFT);

    manager.addUserEventListener(this, repository);

    scene.validate();
    scene.setVisible(true);
    }

    public void pauseXlet() {

    }

    public void destroyXlet(boolean unconditional)throws XletStateChangeException {

    }

    public void userEventReceived(org.dvb.event.UserEvent e){

        if(e.getType() == KeyEvent.KEY_PRESSED){
        System.out.println("pushed button");
        switch (e.getCode()){
            case HRcEvent.VK_UP:
                System.out.println("vk up");
                waardey --;
                mc.setLocation(waardex, waardey);
                break;
            case HRcEvent.VK_DOWN:
                System.out.println("vk down");
                waardey ++;
                mc.setLocation(waardex, waardey);
                break;

            case HRcEvent.VK_RIGHT:
                System.out.println("vk right");
                mc.setLocation(waardex, waardey);
                waardex ++;
                break;

            case HRcEvent.VK_LEFT:
                System.out.println("vk left");
                mc.setLocation(waardex, waardey);
                waardex --;
                break;

        }
        }

    }

} 
```

这是`MijnComponent`：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package hellotvxlet;

import org.havi.ui.*;
import java.awt.*;
import org.dvb.ui.*;

/**
 *
 * @author student
 */
public class MijnComponent extends HComponent{

    private Image bmap;
    private MediaTracker mtrack;

    public MijnComponent(String bitmapnaam, int x, int y){

    bmap = this.getToolkit().getImage(bitmapnaam);
    mtrack = new MediaTracker(this);
    mtrack.addImage(bmap,0);
    try{

    mtrack.waitForAll();
    }
    catch(Exception e){
    System.out.println(e.toString());
    }
    this.setBounds(x,y,bmap.getWidth(null),bmap.getWidth(null));
}

    public void paint (Graphics g){
    java.awt.Image imgjpg = this.getToolkit().getImage("bitmap1.jpg");
      g.drawImage(bmap, 0,0,null); 
    }

   /* public void MoveLeft(){

    }
    public void MoveRight(){

    }
    public void MoveUp(){

    }
    public void MoveDown(){

    }
    */

} 
```

这是计时器类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package hellotvxlet;
import java.util.TimerTask;
/**
 *
 * @author student
 */

public class MijnTimerTask extends TimerTask {
    HelloTVXlet xlet = new HelloTVXlet();
     int waardex = 20;
     int waardey = 20;
    // x; y; 

public void run ( )
{
System.out.println(xlet.mc.getLocation());
xlet.waardex ++;
xlet.mc.setLocation(xlet.waardex, xlet.waardey);
//int appelsap = (int) xlet.mc.getAlignmentX();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:55:42.270

我没有看到任何导致显示刷新的东西。我认为您需要从计时器运行方法中调用“repaint()”，以便刷新显示。

# sql - 我的 SQL Server PIVOT 无法按预期工作

> ID：13011810
> 
> 赞同：0
> 
> 时间：2012-10-22T12:48:24.697
> 
> 标签：sql, sql-server-2008

我有以下数据：

```
Id  names   namevalues
1   name1   first value1
1   name2   first value2
2   name1   second value1
2   name2   second value2 
```

DDL 是：

```
Declare @t table(Id int, names varchar(50),namevalues varchar(100))
Insert Into @t select 1,'name1','first value1'
Insert Into @t select 1,'name2','first value2'
Insert Into @t select 1,'name1','second value1'
Insert Into @t select 1,'name2','second value2'

select * from @t 
```

预期输出为：

```
Id  name1           name2
1   first value1    first value2
2   second value1   second value2 
```

我的尝试：

```
SELECT *
FROM  @t AS src 
PIVOT ( 
    MAX(namevalues) FOR namevalues IN ([name1],[name2] ) 
) AS pvt 
```

然而，这是错误的。我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:50:42.267

您正在旋转`names`列，而不是 namevalues 列，所以

```
SELECT * 
FROM  @t AS src  
PIVOT (  
    MAX(namevalues) FOR names IN ([name1],[name2] )  
) AS pvt 
```

# generics - F# 泛型类型约束和鸭子类型

> ID：13011811
> 
> 赞同：12
> 
> 时间：2012-10-22T12:48:33.633
> 
> 标签：generics, f#, inline

我正在尝试在 F# 中实现鸭子类型，我发现您可以[在 F# 泛型中有一个成员约束，](http://msdn.microsoft.com/en-us/library/dd233203.aspx)如下所示：

```
type ListEntryViewModel<'T when 'T : (member Name : string)>(model:'T) = 
  inherit ViewModelBase()

  member this.Name with get() = model.Name 
```

但是，当我尝试引用该属性时，上面的代码将无法编译。我得到一个编译器错误：

> 此代码不够通用。^T : (member get_Name : ^T -> string) 时的类型变量 ^T 无法泛化，因为它会超出其范围。

是否可以通过通用约束来实现鸭子类型？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-22T13:02:27.593

最近有一个类似的问题，[在类型声明中使用了成员约束](https://stackoverflow.com/questions/12881828/statically-resolved-type-parameters/12887778#12887778)。

我不确定如何更正您的示例以使其编译，但如果这是不可能的，我不会感到惊讶。成员约束旨在与静态解析的类型参数一起使用，尤其是与`inline`函数或成员一起使用，我认为将它们与类的类型参数一起使用不是惯用的 F# 代码。

我认为您的示例更惯用的解决方案是定义一个接口：

```
type INamed = 
  abstract Name : string

type ListEntryViewModel<'T when 'T :> INamed>(model:'T) =  
  member this.Name = model.Name 
```

（实际上，`ListEntryViewModel`可能不需要类型参数，可以直接`INamed`作为构造函数参数，但这样写可能会有一些好处。）

现在，您仍然可以使用鸭子类型并`ListEntryViewModel`在具有属性的事物上使用`Name`，但不要实现`INamed`接口！这可以通过编写一个`inline`返回`INamed`并使用静态成员约束来捕获现有`Name`属性的函数来完成：

```
let inline namedModel< ^T when ^T : (member Name : string)> (model:^T)= 
  { new INamed with
      member x.Name = 
        (^T : (member Name : string) model) } 
```

然后，您可以通过编写不需要实现接口而只需要属性的`ListEntryViewModel(namedModel someObj)`位置来创建视图模型。`someObj``Name`

我更喜欢这种风格，因为通过使用接口，您可以更好地记录您对模型的要求。如果您有其他不符合该方案的对象，您可以调整它们，但如果您正在编写模型，那么实现接口是确保它公开所有必需功能的好方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T08:54:23.210

> 是否可以通过通用约束来实现鸭子类型？

不可以。除了一些特殊情况外，F# 只实现了无法进行鸭式打字的名义打字。正如其他答案所解释的那样，惯用的“解决方案”是将接口改装到您希望遵守该接口的所有类上，但当然，在大多数情况下您想要鸭子打字是不切实际的。

请注意，F# 中的这一限制是从 .NET 继承的。如果您想查看类似于鸭子类型的更实用的解决方案，请查看 OCaml 的结构类型多态变体和对象。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-22T17:04:07.363

要使您的原始代码工作：

```
type ListEntryViewModel< ^T when ^T : (member Name : string)>(model:^T) = 
    inherit ViewModelBase()

    member inline this.Name with get() = (^T : (member Name : string) model) 
```

所以你必须将成员标记为“内联”并在成员函数中重复约束。

我同意 Tomas 的观点，即在 F# 中通常首选基于接口的方法。

# android - 在 ViewPager 中滑动最后一页后指示

> ID：13011815
> 
> 赞同：3
> 
> 时间：2012-10-22T12:48:42.710
> 
> 标签：android, android-viewpager, viewpagerindicator

我创建了一个带有圆形页面指示器的视图寻呼机。它工作正常。这是我的新要求：当我在最后一页/第一页并尝试滑动到下一页/上一页时，我的屏幕应该向滑动方向移动至少 30% 并回到原来的位置，因为没有更多页面导航？当然，我在顶部有页面指示器，它告诉我在可用页面中的位置。我希望我的要求很明确。我怎样才能实现它？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-19T04:30:40.480

```
ViewPager.OnPageChangeListener pagerListener = new ViewPager.OnPageChangeListener() {
        boolean lastPageChange = false;

        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels){
            int lastIdx = mPgScreenAdapter.getCount() - 1;

            Log.d(TAG, "pos:" + position);
            if(lastPageChange && position == lastIdx)
                PPIntent.changeScene(curAct, new Intent(curAct, LoginActivity.class), true);
        }
        @Override
        public void onPageSelected( int i) {
            pgText.setCurrentItem(i/2);
        }
        @Override
        public void onPageScrollStateChanged(int state) {
            int lastIdx = mPgScreenAdapter.getCount() - 1;

            int curItem = pgScreen.getCurrentItem();
            if(curItem==lastIdx /*&& lastPos==lastIdx*/  && state==1)   lastPageChange = true;
            else                                                         lastPageChange = false;
        }
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T13:03:08.663

这是自动的。操作系统内置了指示器来告诉用户视图不能再滑动了。操作系统将在屏幕一侧显示发光，用户无法进一步拉动。

不确定您是否可以创建自己独特的 UI 来处理这个问题 - 操作系统确实提供了一个开箱即用的指示器。

# javascript - 将上下文菜单添加到 DevExpress MVC 扩展树视图

> ID：13011822
> 
> 赞同：0
> 
> 时间：2012-10-22T12:49:11.103
> 
> 标签：javascript, asp.net-mvc, treeview, devexpress, contextmenu

我一直在关注[这个示例](http://www.devexpress.com/Support/Center/Example/Details/E4277)，了解如何让上下文菜单与树视图扩展一起使用，现在，我只是尝试实现与我的应用程序示例中相同的功能。当我运行应用程序时，上下文菜单不起作用，但调试 javascript 显示错误：

> 未捕获的类型错误：对象 1 没有方法“GetHtmlElement”

当它跳出init函数到ProcessNode函数时。发生这种情况有什么已知的原因吗？我查看了文档，没有什么，也无济于事。

如果您需要我提供更多信息，请发表评论，我会尽我所能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:08:40.587

找到答案了，谢谢。真的有点傻，这是人为错误的时刻之一。不过找了好久！错误在于我递归循环遍历树视图中父节点的所有子节点的方式。

# c# - 复制 ElementName 绑定

> ID：13011825
> 
> 赞同：0
> 
> 时间：2012-10-22T12:49:17.723
> 
> 标签：c#, wpf, xaml, binding, wpf-controls

我有一个 TextBox (TB1)，它的 Text 值使用 ElementName="TB2" 和 Path="Text" 绑定到另一个 TextBox (TB2)。

然后我有第三个文本框（TB3），我在 TB1 后面的代码中设置绑定，我希望这将允许我编辑 TB3，并且 TB1 和 TB2 也将反映由于绑定（理论上）对所有人都相同而导致的更改.

我可以编辑 TB1 和更新 TB2（反之亦然），但 TB3 从不显示/更新值。

我只能认为这是因为 TB1 绑定使用的是 ElementName 而不是 DependencyProperty？

是否可以复制使用 ElementName 绑定的元素的绑定？

```
<TextBox Name="TB1">
    <Binding ElementName="TB2" Path="Text" UpdateSourceTrigger="PropertyChanged"/>
</TextBox>
<TextBox Name="TB2">
    <Binding Path="Name" UpdateSourceTrigger="PropertyChanged"/>
</TextBox> 
```

然后在我后面的代码中：

```
BindingExpression bindExpression = TB1.GetBindingExpression(TextBox.TextProperty);
if (bindExpression != null && bindExpression.ParentBinding != null && bindExpression.ParentBinding.Path != null)
{
    TB3.DataContext = TB1.DataContext;
    TB3.SetBinding(TextBox.TextProperty, bindExpression.ParentBinding);
} 
```

* * *

通常刚刚通过测试发现，如果在同一个 xaml 中，这确实有效。但是，我在自己的窗口中有 TB3，如下所示，并且文本框从未正确绑定..我错过了什么？

```
if (bindExpression != null && bindExpression.ParentBinding != null && bindExpression.ParentBinding.Path != null)
{
    PopupWindow wnd = new PopupWindow();
    wnd.DataContext = TB1.DataContext;
    wnd.TB3.SetBinding(TextBox.TextProperty, bindExpression.ParentBinding);
    wnd.Show();
} 
```

* * *

我不是 100% 确定为什么，但这确实成功了，它似乎做了与 SetBinding 相同的绑定，但源设置为 DataItem，但它给了我所需的结果......谢谢 Klaus78..

```
if (bindExpression != null && bindExpression.ParentBinding != null && bindExpression.ParentBinding.Path != null)
    {
        PopupWindow wnd = new PopupWindow();
        Binding b = new Binding();
        b.Source = bindExpression.DataItem; //TB1;
        b.Path = new PropertyPath("Text");
        b.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;
        wnd.TB3.SetBinding(TextBox.TextProperty, b);
        wnd.Show();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:18:46.103

在您的新窗口中，您绑定`TB3.Text`到`TB2.Text`

在 TB3.Text 的实践中，您有一个 Binding 对象 where`Element=TB2`和`Path=Text`. 问题是在新窗口的可视化树中没有带有名称的元素，`TB2`因此如果查看 Visual Studio 输出调试，则会出现绑定错误。

还要注意那`TB1.DataContext`是空的。另一方面，此命令是无用的，因为绑定类已经具有`Element`作为绑定源的属性集。

我认为您不能简单地将绑定从 TB1 复制到 TB3。无论如何，您需要为 TB3 创建一个新的 Binding 对象，例如

```
Window2 wnd = new Window2();
Binding b = new Binding();
b.Source = TB1;
b.Path = new PropertyPath("Text");
wnd.TB3.SetBinding(TextBox.TextProperty, b);
wnd.Show(); 
```

像这样的代码对你有帮助吗？

# asp.net - 如何在 asp.net 中将 ckfinder 与 ckeditor 集成？

> ID：13011826
> 
> 赞同：2
> 
> 时间：2012-10-22T12:49:21.853
> 
> 标签：asp.net, image, upload, ckeditor, ckfinder

我正在将 ckfinder 与 ckeditor 集成，我有点成功，但在上传任何图像时遇到以下错误。

> **出于安全原因，文件浏览器被禁用。请联系您的系统管理员并检查 CKFinder 配置文件**

我已经设置了配置文件。但它对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:00:20.780

默认情况下，CKFinder 设置为不授权向服务器发送文件。所以你需要做的就是进入 ckfinder/config.ascx，这是主要的配置文件，这里暂时将 CheckAuthentication() 方法更改为返回 true 而不是错误的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:28:58.507

试试这个[链接](http://www.codedigest.com/Articles/ASPNET/423_Upload_Images_and_Integrate_with_CKeditor_in_AspNet.aspx)，它有一个工作示例。[从.Net](http://download.cksource.com/CKEditor/CKEditor.NET/CKEditor.NET%203.6.4/ckeditor_aspnet_3.6.4.zip)下载 ckeditor并将 ckeditor 文件夹放在项目的根目录中。

# windows - Excel VBA：使用 getOpenFilename 打开文件夹和文件

> ID：13011827
> 
> 赞同：0
> 
> 时间：2012-10-22T12:49:25.747
> 
> 标签：windows, excel, getopenfilename, vba

我想使用此例程`Application.GetOpenFilename`打开`*.txt`文件或整个文件夹。这有可能吗？
例如，如果没有选择文件/文件夹，则返回父文件夹路径，否则返回所选文件名？

示例：假设我有一个名为`"test.txt"`path的文件`C:\folder1\folder2\test.txt`。现在我在搜索文件并选择`C:\folder1`（“父文件夹”）时很懒惰。我的程序现在在子文件夹中搜索`test.txt`. 但有时我并不懒惰，我想选择特定的文件`test.txt`

我正在寻找一个用户友好的对话框来处理两者：打开一个文件夹（并仅返回文件夹路径）并打开一个文件（并返回文件路径）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:08:08.690

`parent`我假设您的意思是调用 VBA 的文件。如果没有，您应该能够很容易地调整以下内容。

```
Sub getFileorFolder()

fileToOpen = Application.GetOpenFilename("Text Files (*.txt), *.txt")

If fileToOpen = False Then fileToOpen = ThisWorkbook.Path

MsgBox "File is " & fileToOpen

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T18:16:03.623

我有一种更好的打开文本文件的方法，但使用了上面的答案之一。

```
Sub ImportTextFile()
'better method to retrieving Data from txt.
If Not Range("A2").Value = "" Then
MsgBox "Clear Data First"
Sheets("Input DATA").Select
Exit Sub
End If

fileToOpen = application.GetOpenFilename("Text Files (*.txt), *.txt")
If fileToOpen = False Then fileToOpen = ThisWorkbook.Path
MsgBox "File is " & fileToOpen

    With ActiveSheet.QueryTables.Add(connection:= _
        "TEXT;" + fileToOpen, Destination:=Range("$A$2"))
        '.name = "All"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 437
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = False
        .TextFileTabDelimiter = True
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = False
        .TextFileColumnDataTypes = Array(1)
        .TextFileTrailingMinusNumbers = True
        .Refresh BackgroundQuery:=False
    End With
Call RemoveEmptyRows
End Sub

Sub RemoveEmptyRows()
On Error Resume Next
Range("A2:A5000").Select
Selection.SpecialCells(xlCellTypeBlanks).Select
Selection.Delete Shift:=xlUp
Resume:
Range("A2").Select
End Sub 
```

# jpa - JPA 查询超时

> ID：13011829
> 
> 赞同：0
> 
> 时间：2012-10-22T12:49:44.120
> 
> 标签：jpa, jpa-2.0

我在 WebSphere V8 上使用 Open JPA 2.0 - IBM 实现。我需要在单个查询级别设置查询超时。如何做到这一点？

使用以下提示将为所有查询设置超时，但我需要为特定查询控制它

> javax.persistence.query.timeout

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:55:13.460

Errm, perhaps ...

```
query.setHint("javax.persistence.query.timeout", timeout); 
```

# sql - 检查 System i 中是否存在表，然后将其删除

> ID：13011830
> 
> 赞同：1
> 
> 时间：2012-10-22T12:49:47.730
> 
> 标签：sql, ibm-midrange, iseries-navigator

我正在尝试编写一个 SQL 语句来检查表是否存在，如果存在，则将其放入 System i 中。

我以为这将是一个简单的`IF EXISTS`陈述，但我遇到了麻烦并且不确定如何继续。

声明全文：

```
IF EXISTS (SELECT TABLE_NAME FROM <<DatabaseName>>.VIEWS         
WHERE TABLE_NAME = 'TABLE')         
DROP VIEW <<DatabaseName>>.TABLE
GO 
```

它返回错误

> 没有预期的关键字 IF

我是 System i 的完整初学者，但我读过有关程序可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:49:56.693

You can use an IF statement inside a stored procedure, so you could accomplish this with something like:

```
CREATE PROCEDURE CREATE_TABLE (
    IN IN_TABLE_NAME VARCHAR(128), 
    IN IN_TABLE_SCHEMA VARCHAR(128),
    IN IN_TABLE_DEF VARCHAR(4000))

    LANGUAGE SQL MODIFIES SQL DATA

    DECLARE CNT INT DEFAULT 0;
    DECLARE STMT VARCHAR(1000);
    SELECT COUNT(*) INTO CNT
      FROM QSYS2/SYSTABLES
      WHERE TABLE_NAME = IN_TABLE_NAME and TABLE_SCHEMA = IN_TABLE_SCHEMA

    CASE CNT
        WHEN 1 THEN
            SET TABLE_NAME = 'CORPDATA.DEPT_' CONCAT P_DEPT CONCAT '_T';
            SET STMT = 'DROP TABLE ' || IN_TABLE_SCHEMA || '/' || IN_TABLE_NAME;
            PREPARE S1 FROM STMT;
            EXECUTE S1;
    END CASE

    SET STMT = 'CREATE TABLE ' || IN_TABLE_SCHEMA || '/' || IN_TABLE_NAME || 
                IN_TABLE_DEF;
    PREPARE S1 FROM STMT;
    EXECUTE S1; 
```

You could then call this proc passing in the table name, schema, and column definition:

```
CALL CREATE_TABLE('MYTABLE', 'MYSCHEMA', '(
    COL1 INTEGER NOT NULL, 
    COL2 VARCHAR(100))'; 
```

I haven't actually tested this, but this should give you a basic idea of what you need to do.

# php - 错误：尝试获取用户索引时出现问题！使用drupal服务的moodle认证模块

> ID：13011831
> 
> 赞同：1
> 
> 时间：2012-10-22T12:49:48.103
> 
> 标签：php, drupal-7, moodle

目前我正在使用 Drupal 7 和 Moodle2.3 集成，但出现错误“错误：尝试获取用户索引时出现问题！”

[https://github.com/cannod/moodle-drupalservices/blob/a2c607368d7f2087e575c006425eb2da39bf02cb/README.md](https://github.com/cannod/moodle-drupalservices/blob/a2c607368d7f2087e575c006425eb2da39bf02cb/README.md)

== 编辑（作者添加的评论）==

我有机会查看该文件，因此它调用了 auth.php。

```
$drupal_users = $apiObj->Index('muser');
if (is_null($drupal_users) || empty($drupal_users)) { 
    die("ERROR: Problems trying to get index of users!\n"); 
```

并且，REST-API.php 文件中的函数调用索引...

```
$callerId = 'RemoteAPI->Index'; 
if (!$this->VerifyLoggedIn( $callerId )) { 
    return NULL; // error 
} 
$url = $this->gateway.$this->endpoint.'/'.$resourceType . $options; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:42:57.657

我也有类似的情况。我正在尝试使用 drupal 服务，但直到现在我无法成功设置它。我也想在这里问一个问题，但我注意到最近开发人员更新了他在 Github 上的 wiki 页面。因此，您可以在那里观看它的进展情况，也许您可​​以找到解决问题的方法。希望能帮助到你..

# python - Python嵌套if在列表理解中

> ID：13011835
> 
> 赞同：-1
> 
> 时间：2012-10-22T12:50:15.527
> 
> 标签：python, list-comprehension, nested-loops

嗨，假设我有一个列表理解

```
mynewdictionary = {key: ([value[0], value[1].strip('Bat')] if 'Bat' in value[1] else value) for key, value in myoriginaldictionary.iteritems()} 
```

那么这是做什么的，看看`myoriginaldictionary`它是否找到`'Bat'`了，`value[1]`因为 value 是一个包含两个项目的列表，我只关心第二个项目，如果它确实有`'Bat'`，则将密钥附加到我的新字典中。

但我想做一个嵌套 if 语句。

我想补充一下，如果`len(value) > 0`那么做所有这些，如果不跳过。

```
myolddictionary= {[key1: 'Bat I am'], ['Key2': 'I am nothing'], [key3: '']}

mynewdictionary={[key1: 'I am'], ['Key2': 'I am nothing']} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:54:59.130

Do you mean that you want something like this?:

```
mynewdictionary = {key: ([value[0], value[1].strip('Bat')] 
                         if 'Bat' in value[1] else value) 
                        for key, value in myoriginaldictionary.iteritems() 
                        if value} 
```

# c++ - c++ 中像 myoutput << myinput.rdbuf() 这样的 iostream 语句的语义是什么？

> ID：13011837
> 
> 赞同：1
> 
> 时间：2012-10-22T12:50:27.087
> 
> 标签：c++, stl, iostream

以这段代码为例

```
std::ifstream myinput("myinput.txt");
std::ofstream myoutput("myoutout.txt");
myoutput << myinput.rdbuf(); 
```

1.  操作的语义是什么？
2.  C++ 版本是否可以使用 operator<< 的这种特定重载？
3.  有没有更明确的方法[通过使用命名函数而不是运算符]来实现相同的效果？
4.  我如何知道在操作中复制了多少字节？
5.  我可以限制复制的字节数吗？
6.  你能概述一下这个特定的 operator<< 重载是如何实现的或指向一个已建立的实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T13:22:30.033

1.  它将整个输入流（整个文件）复制到输出流。
2.  它总是在 C++ 中可用。std::ifstream 定义在 中`<istream>`，std::ofstream 定义在`<ostream>`.
3.  不，这是唯一的方法。
4.  使用 myoutput.tellp()。
5.  您需要使用 std::ifstream::read 在循环中手动读取流，将数据复制到缓冲区并使用 std::ofstream::write 将该数据写入输出流，直到您复制了你想要的金额。
6.  如果您安装了 C++ 编译器，您可以查看它的实现（大多数流类都是模板，这意味着它们的实现必须在标头中）。因为`std::basic_ios::rdbuf`，你可以往里看`<ios>`，而且`std::ostream::operator<<(std::basic_streambuf*)`，你可以往里看`<ostream>`。

# objective-c - 带有 2 个 nstextfields 的 controlTextDidChange - 调用不同的选择器

> ID：13011838
> 
> 赞同：3
> 
> 时间：2012-10-22T12:50:28.930
> 
> 标签：objective-c, macos, cocoa

可可新手在这里

我有 2 个与 controlTextDidChange 连接的 nstextfields。它工作正常。

```
- (void)controlTextDidChange:(NSNotification *)anotif{
    [self eval];
} 
```

当任一文本字段更改 eval 被调用时。

我想要做的是检查更改的文本字段，如果它是第一个调用 eval1，是否是第二个调用 eval2。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T19:11:09.430

Given that the `NSTextField`s are `field1` and `field2`, all you have to do is check which one of them is the sender object, given along with the notification.

**E.g.:**

```
- (void)controlTextDidChange:(NSNotification *)anotif
{
    if ([anotif object]==field1)
    {
        // field1 processing
    }
    else
    {
        // field2 processing
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:22:44.777

好的，我想我找到了。

`NSTextField`我在两个s上都设置了标签。

然后，我可以通过以下方式获取标签号：

```
[[anotif object] tag] 
```

# c# - 我的循环迭代了多少次

> ID：13011839
> 
> 赞同：1
> 
> 时间：2012-10-22T12:50:34.343
> 
> 标签：c#, multithreading

我有一个非常人为的问题。

想象一下，我有一个只有一个方法和一个字段的类。喜欢：

```
public class WhereAmI
{
    public int Number = 0;
    public void Looping()
    {
         for (int i = 0; i < 100; i++)
        {
            Number = i;
            Sleep(10000);
        }
    }
} 
```

我以您期望的正常方式从另一个班级调用它

```
WhereAmI wai = new WhereAmI();
wai.Looping();
int CurrentNumber = wai.Number; 
```

我想要的是一种查看我当前达到的数字并将其显示在屏幕上的方法。我已经尝试过与上面类似的方法，但这不起作用，因为编译器在完成之前不会越过 wai.Loopping() 方法。

我假设我必须在一个新线程上执行此操作，然后进入交叉线程的世界？然后我认为我的设计一定是错误的，我已经过度复杂化了！

有人愿意就此发表他们的意见或建议吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T12:57:43.247

假设此代码在 UI 线程上运行，它可以直接在循环内更新 UI。但是，如果不想将 UI 代码与您的业务逻辑混合（这是一个好主意），那么是的，您需要在另一个线程上运行此处理并让 UI 线程检查此对象，或者最好将事件通知作为任务获取进展。

您可能应该考虑使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)来处理处理。此类使处理此类任务变得更简单，并包含支持进度指示器的逻辑。

MSDN 文章中的示例代码展示了如何通过拖放到设计图面上进行大量设置（假设您使用的是 WinForms），以及如何将 BackgroundWorker 链接到进度条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:07:14.573

使用回调或事件处理程序将所有内容保持在同一个线程上。

回调：

```
public void Looping(Action onIncrement)
{
   for (int i = 0; i < 100; i++)
   {
      Number = i;
      onIncrement();
      Sleep(10000);
   }
}

obj.Looping(() => Console.WriteLine(obj.Number)); 
```

事件处理程序：

```
public event EventHandler Increment;

public void Looping()
{
   for (int i = 0; i < 100; i++)
   {
      Number = i;
      if (Increment != null)
      {
          Increment(this, EventArgs.Empty);
      }
      Sleep(10000);
   }
}

obj.Increment += (s, e) => Console.WriteLine(obj.Number);
obj.Looping(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T13:04:42.180

这是一个使用 ThreadPool 进行线程处理的基本示例：

```
void Main()
{
   var pooling = new JustPooling();

   pooling.RunThread();

   Thread.Sleep(500);

   while (pooling.Operating)
   {
      Console.Write (" " + pooling.CurrentIndex);
      Thread.Sleep(500);
   }

   Console.Write(" Done");
   /* 1 1 2 2 2 3 3 3 4 4 4 5 5 5 Done */

}

// Define other methods and classes here

public class JustPooling
{
   public bool Operating { get; set; }
   public int CurrentIndex { get; set; }

   public void RunThread()
   {
       ThreadPool.QueueUserWorkItem(delegate
        {
            Operating = true;

            for ( int index = 0; index < 5; ++index )
            {
                ++CurrentIndex;
                Thread.Sleep( 1500 );
            }

            Operating = false;
        });
   }

} 
```

要查看锁定关键部分的此示例，请参阅[C# MultiThreading Using ThreadPool, Anonymous Delegates and Locks](http://omegacoder.com/?p=262)

# java - 切换语句

> ID：13011842
> 
> 赞同：0
> 
> 时间：2012-10-22T12:50:41.527
> 
> 标签：java, switch-statement

问题是要在不同的时间写第 5 段。每个段落都有不同的笼号和对应的动物。所以笼子 1 有一只狮子，笼子 2 有一只老虎。问题是我不知道如何将同一段中的不同对应动物的笼号结合起来。

我不知道如何在该段的第二行输入switch语句。我试着写 println("这个笼子里有一个 " + i); 但 Eclipse 给了我一个错误。我如何同时将变量 n 和 i 合并到同一段落中？

```
import acm.program.*;

public class ZooAnimals extends ConsoleProgram {
    private static final int START = 1; 

    public void run(){
        for (int n = START; n <=5; n++ ) {
             println("This animal is in cage" + n);
             println("This cage holds a " );  <---- type of animal goes in here. 
             println("Wild animals are very dangerous.");
        }       

        for(int i = START; i<=5; i++) {
              switch(i) { 
                   case 1: println("lion");
                   case 2: println("tiger");
                   case 3: println("elephant");
                   case 4: println("snakes");
                   case 5: println("hippo");
              }                   
        } 

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:56:14.670

我会写一个像这样的小方法：

```
public String getAnimal(int cage)
{
     switch(cage) { 
           case 1: return "lion";
           case 2: return "tiger";
           case 3: return "elephant";
           case 4: return "snakes";
           case 5: return "hippo";
           default: return "Animal Not Found!";
           }    

} 
```

然后我将替换此代码：

```
for (int n = START; n <=5; n++ ) {
  println("This animal is in cage" + n);
  println("This cage holds a " );     <-----------type of animal goes in here. 
  println("Wild animals are very dangerous.");
             } 
```

有了这个：

```
for (int n = START; n <=5; n++ ) {
  println("This animal is in cage" + n);
  println("This cage holds a " + getAnimal(n));     <-----------type of animal goes in here. 
  println("Wild animals are very dangerous.");
             } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:56:43.283

我会使用一个数组

```
public class ZooAnimals extends ConsoleProgram {
    String[] animals = "none,lion,tiger,elephant,snake,hippo".split(",");

    public void run() {
        for (int n = START; n < animals.length; n++) {
            println("This animal is in cage" + n);
            println("This cage holds a " + animals[n]);
            println("Wild animals are very dangerous.");
        }

        for (int i = START; i < animals.length; i++) {
             println(animals[i]);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:56:12.880

如果你按照你的要求打印 i ，你会得到这样的句子：“这个笼子里有一个 1”。我怀疑这不是你所追求的。相反，创建一个变量来保存动物的名称并在您的 switch 语句中分配它的值。之后，您可以执行 println 语句。

这在我看来就像一个家庭作业，所以我会让你弄清楚如何准确地实现它:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T12:58:26.977

我认为您正在尝试这样做

```
 import acm.program.*;

public class ZooAnimals extends ConsoleProgram {

public void run(){

for (int n = START; n <=5; n++ ) {
  println("This animal is in cage" + n);
  println("This cage holds a " );     <-----------type of animal goes in here. 

           switch(n) { 
           case 1: println("lion");break;
           case 2: println("tiger");break;
           case 3: println("elephant");break;
           case 4: println("snakes");break;
           case 5: println("hippo");break;
               }                   

println("Wild animals are very dangerous.");
              }

private static final int START = 1; 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T12:59:50.193

删除第二个循环，在 switch 中使用 n 而不是 i 并在 switch 的每个分支中添加 break。

最好的方法是以正确的顺序创建包含动物名称的数组，而不是仅仅使用“n”作为索引来获取正确动物的名称

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T13:00:01.900

您应该使用`print`方法而不是`println`. 见前行`switch`。

并且，`break`在使用开关时使用。

```
for (int n = START; n <=5; n++ ) 
{   
    println("This animal is in cage" + n);   
    print("This cage holds a " );

    switch(n) 
    {             
        case 1: println("lion"); break;        
        case 2: println("tiger"); break;            
        case 3: println("elephant");  break;           
        case 4: println("snakes");  break;           
        case 5: println("hippo");  break;
        default: println("unknown"); break; // good practice to add default case.
    }
}

println("Wild animals are very dangerous."); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-22T13:00:17.623

您可以做一件事，而不是使用 if else 并在其中调用函数并从那里返回值

```
 for(int n = START;n<=5;n++){                     
        String animal=type();
        println("This animal is in cage" + n);
        println("This cage holds a "+animal);     <-----------type of animal goes in here. 
        println("Wild animals are very dangerous.");
 }

 for(int i = START; i<=5; i++) {
       switch(i) { 
           if(i==1){
                String type()
                    return "tiger";
           }else if(i==2){
                  String type()
                    return "lion"; 
           }

       }                   
  } 
```

我希望这会......n是的，它可以比这个解决方案好得多，但现在这应该工作休息你可以修改。祝你好运

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-22T13:03:44.663

```
for (int n = START; n <=5; n++ ) {
  println("This animal is in cage" + n);
  println("This cage holds a " );     <-----------type of animal goes in here. 

       switch(n) { 
       case 1: println("lion");
       case 2: println("tiger");
       case 3: println("elephant");
       case 4: println("snakes");
       case 5: println("hippo");
       }                  

  println("Wild animals are very dangerous."); 
```

}

我不确定我是否正确理解了您的问题。上面的代码对你有帮助吗？

# jquery - jquery 选择器和 Asp.net 动态控件

> ID：13011844
> 
> 赞同：1
> 
> 时间：2012-10-22T12:50:43.673
> 
> 标签：jquery, asp.net

我动态创建了一组 RadioButtons，然后我想在 javascript 中选择一个。

控件创建如下：

```
protected override void CreateChildControls()
{
    base.CreateChildControls();
    var rb = new RadioButton {GroupName = "group1"};

    this.availableActions.Controls.Add(rb);
    ................
} 
```

然后，在页面上，我正在做：

```
$(document).ready(function () { alert($('input[name=group1]')); }); 
```

警报显示为空。我不知道为什么...我检查了 chrome 中的代码，单选按钮在页面中。

```
<p id="availableActions" class="download_options">
    <input id="rb_0" type="radio" name="group1" value="rb_0" checked="checked">
    ..... 
```

有任何想法吗？

需要注意的是，此代码位于由 prettyPhoto jquery 插件生成的 iframe 中。我想知道这是否是问题的根源......

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:02:28.430

您的代码似乎完全正确。如果你在这里分享你的html会更好。尝试使用 console.log 而不是 alert 并检查你的 firebug 控制台该元素是否返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:10:20.923

不清楚你的意思是`create dynamically`如果你在客户端上动态创建，那么你最好用`.on`它来做绑定

```
$("availableActions").on("change","input[name=group1",function(){
    ///do what ever you wish
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:36:19.137

如果有人遇到这个问题，解决方案是将 jQuery 更改为无冲突模式。

我不确定是什么导致了冲突，因为`$(document).ready(function () { console.log('loaded'); });`工作正常，但我在页面上找不到任何控件。

要更改为无冲突模式，只需添加`jQuery.noConflict();`$ 并将其更改为 jQuery。

# java - SAP Crystal Reports 2011 中的不可打印 PDF 导出

> ID：13011849
> 
> 赞同：0
> 
> 时间：2012-10-22T12:51:06.603
> 
> 标签：java, crystal-reports, pdf-generation

在 Crystal Reports 2011 中是否可以将报表导出为不可打印或不可复制的 PDF？

我知道 JasperReports 中有一个类似的功能，如下所示： `exporter.setParameter(JRPdfExporterParameter.IS_ENCRYPTED, Boolean.TRUE);` `exporter.setParameter(JRPdfExporterParameter.OWNER_PASSWORD, "Pa$$w0rD");`

为了允许打印，可以使用 `exporter.setParameter(JRPdfExporterParameter.PERMISSIONS, new Integer( PdfWriter.ALLOW_PRINTING));`

# android - 将视图动态添加到表格行中

> ID：13011851
> 
> 赞同：0
> 
> 时间：2012-10-22T12:51:09.663
> 
> 标签：android, android-view, android-tablelayout

我的表格布局有几行，每行包含一个 textView n 一个 editText。我有一个空白行，我想用 textView 和 editText 动态填充它。我添加了一个 textView(hips) 但它没有显示为其他。见下文，在第 3 行 textView 显示为透明的。我想动态添加与上述行相同的 textView n 和 editText 。

![在此处输入图像描述](../Images/6632b43431b867729845a0be94b42230.png)

```
 TableRow row = (TableRow) findViewById(R.id.tblHips);
     TextView txt=new TextView(getApplicationContext());
     txt.setTextAppearance(getApplicationContext(), android.R.attr.textAppearanceLarge);
     txt.setId(R.id.txtHipId);
     txt.setText("Hips");
     row.addView(txt); 
```

我只为腰部以下的行添加了代码-

```
 <TextView
            android:id="@+id/TextView02"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:text="Waist"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <EditText
            android:id="@+id/EditText02"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:inputType="numberDecimal" />

    </TableRow>

    <TableRow
        android:id="@+id/tblHips"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    </TableRow>

    <TableRow
        android:id="@+id/tableRow7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <RadioGroup
            android:id="@+id/rdMs"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:orientation="horizontal" >

            <RadioButton
                android:id="@+id/radio0"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:checked="true"
                android:text="Imperial" />

            <RadioButton
                android:id="@+id/radio1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Metric" />
        </RadioGroup>

    </TableRow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:49:46.107

看起来透明的原因`TextView`是文本的 alpha 未设置为 255。`txt.setAlpha(255);`将解决该问题。

如果您只想拥有一个隐藏字段，解决问题的最佳方法是将所有视图放在 xml 中，并使用`android:visibility="gone"`. 然后在你的代码中你可以切换`View.GONE` `View.VISIBLE`（你想使用gone，因为它会从布局中删除视图）。

如果您真的需要在运行时添加视图，您将需要指定每个小细节，例如文本大小（并使用不同的 dpi 更改）、文本颜色/alpha 等。这很快成为支持的噩梦。在这种情况下，您应该制作一个单独的布局 .xml 文件并使用布局充气器来生成视图。

```
LayoutInflater inflater = this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
TableRow row = (TableRow)inflater.inflate(R.layout.hips, container, false);
//where 'container' is the containing TableView & 'this' is an activity 
```

# actionscript-3 - 2 个单词的数组 Greensock Tween

> ID：13011852
> 
> 赞同：0
> 
> 时间：2012-10-22T12:51:10.657
> 
> 标签：actionscript-3, tween

我正在尝试使用 greensock 引擎对 2 个单词数组实现简单的效果。

它正在工作，但时间已关闭。我希望它们是协调的，并且在我想要的简单方式之间有一个 alpha 我只是在重复中一个接一个地显示一个单词，现在我几乎明白了，这不是一个好的时机。

```
var allnum2:Array = [text1, text2];
Timeline.appendMultiple(
  TweenMax.allFrom(allnum2, .7, {
    alpha: 0,
    repeat: 7,
    yoyo: true,
    ease:Strong.easeInOut
  }, .7)
, 1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:03:29.400

我想知道这段代码是如何工作的，因为 Timeline 不是 Greensock api 的一个类。

试试这个：

```
var allnum2:Array = [text1, text2];
var tl:TimelineLite = new TimelineLite();
tl.appendMultiple(
  TweenMax.allFrom(allnum2, .7, {
    alpha: 0,
    repeat: 7,
    yoyo: true,
    ease:Strong.easeInOut
  }, .7)
, 1); 
```

你为什么使用时间线？allFrom 足以完成您的简单补间。

# javascript - 无法使用 jQuery 解析 HTML

> ID：13011853
> 
> 赞同：0
> 
> 时间：2012-10-22T12:51:14.800
> 
> 标签：javascript, jquery

我想使用 jQuery 解析家庭 HTML，如下所示。当我使用**文档**时，它正在工作。但是在使用字符串时不起作用。

**输出：** *空*

```
var str = "<html><title>This is Title</title><body><p>This is a content</p><p class='test'>Test content</p></body></html>";
$str = $(document); // working
$str = $(str);      // not working
alert($str.find(".test").html()); 
```

另一种方法（也失败）：

**输出：** *空*

```
var str = "<html><title>This is Title</title><body><p>This is a content</p><p class='test'>Test content</p></body></html>";
alert($('.test',str).html()); 
```

* * *

我得到的字符串也不能被解析为 XML，因为它不是有效的 XHTML。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T12:56:52.860

jQuery 可以将 HTML 片段转换为 DOM 元素树，但它只对内容元素执行此操作，而不是`html`, `title`,`head`等。只有你要放入的*内容* `body`。所以这可能会导致一些麻烦开始。

该[`find`](http://api.jquery.com/filter/)函数查找与给定选择器匹配的*后代*元素。因此，即使 jQuery 实例中的任何顶级元素与选择器匹配，它们也不会被`find`. 例如：

```
$('<p class="foo">foo</p>').find('.foo').length; // 0 -- none found 
```

...因为匹配元素不是*后代*。要在顶层查找匹配的元素，请使用[`filter`](http://api.jquery.com/filter/)：

```
var str = "<p>This is a content</p><p class='test'>Test content</p>";
$(str).find('.test').length; // 0 -- no *descendants* found that match
$(str).filter('.test').length; // 1 -- there was one top-level element that matched 
```

另一种方法是在使用之前将所有元素放入容器中，例如 div `find`：

```
var str = "<div><p>This is a content</p><p class='test'>Test content</p></div>";
$(str).find('.test').length; // 1 -- it was found 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:57:04.780

尝试这个：

```
var str = "<html><title>This is Title</title><body><p>This is a content</p><p class='test'>Test content</p></body></html>";
console.log($($.parseXML(str)).find('.test')); 
```

因此，您首先将字符串解析为 XML。

UPD。正如 TJCrowder 在评论中指出的那样，您必须确保您的 HMTL 字符串是有效的 XHTML。

并使用普通 JS 的力量，它可能是：

```
var parser, xml,
    str = "<html><title>This is Title</title><body><p>This is a content</p><p class='test'>Test content</p></body></html>";

if (window.DOMParser) {
    parser = new DOMParser();
    xml = parser.parseFromString(str, "text/xml");
}
else { // IE
    xml = new ActiveXObject("Microsoft.XMLDOM");
    xml.async = "false";
    xml.loadXML(str);
}

console.log( $(xml).find('.test') ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T12:57:09.100

问题是您的字符串包含完整的 HTML 文档。

这会起作用：

```
var str = "<div><p>This is a content</p><p class='test'>Test content</p></div>";
alert($(str).find('.test').html());​​​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T12:56:45.450

你这么近！:) 该`$(document)`行返回一个 jQuery 集；您无需对其进行任何额外的转换。

```
$str = $(document); // working
alert($str.find(".test").html());​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T12:58:00.350

试试下面的代码：

```
$(str).find(".test").html(); 
```

直接使用 str 变量...不要在变量中分配..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T14:38:58.067

好的，因为它不是有效的 XHTML，我无法解析为 XML。但是我仍然得到了一个简单而愚蠢的解决方案来实现我想要的。

```
var str = "<html><title>This is Title</title><body><p>This is a content</p><p class='test'>Test content</p></body></html>";

//-- replace with document or whatever which will not conflict ---------
str = str.replace(/html>/gi,'document>');

alert($(str).find('.test').html()); 
```

**输出：** `Test content.`

*可能不是正确的方法。但它仍然很好用！*

*谢谢**@TJ克劳德**。我从 jQuery 只能解析 HTML 片段的概念中得到了这个想法。所以，我们可以通过伪造来实现这一点！*

# logging - NLog 文件归档

> ID：13011863
> 
> 赞同：0
> 
> 时间：2012-10-22T12:51:31.900
> 
> 标签：logging, archive, nlog

我可以使用*NLog*完成以下操作：

1.  日志文件按以下格式创建 - `LogFileName_YYYY_MM_dd_HH_mm_ss.log`.
2.  当文件的大小超过 ex:- 的配置大小时，将创建一个具有相同格式的新日志文件 - `LogFileName_YYYY_MM_dd_HH_mm_ss.log`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:57:54.427

NLog 的文档在他们的网站上非常好：

[文件目标 - NLog](https://github.com/nlog/NLog/wiki/File-target)

# html - em单位的相关性？

> ID：13011872
> 
> 赞同：0
> 
> 时间：2012-10-22T12:51:49.800
> 
> 标签：html, css, liquid-layout

我正在做一个旧项目，它在所有方面都使用 em，从字体大小到布局（宽度、边距、填充等），这让我想知道使用 em 来布局页面和字体是否真的有任何好处?

我什至不使用 em 作为字体，我发现它们有点令人困惑，尤其是没有`body { font-size: 62.5%; }`技巧（[这显然很糟糕](http://filamentgroup.com/lab/how_we_learned_to_leave_body_font_size_alone/)）。据我所知，现在每个浏览器都可以正确调整 px 大小。

我不知道使用 em 对于移动设备的好处是否有任何好处，据我所知，这个元标记*应该*让移动浏览器以标准尺寸显示像素

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

来自[CSS 2.1 规范](http://www.w3.org/TR/CSS2/syndata.html#length-units)：

> 参考像素是像素密度为 96dpi 且距离阅读器一臂远的设备上一个像素的视角。对于 28 英寸的标称臂长，因此视角约为 0.0213 度。对于在手臂长度上阅读，1px 因此对应于大约 0.26 毫米（1/96 英寸）。

我想我真正想问的问题是，在调整布局和/或字体大小时，em 是否比 px 提供任何好处（除了 em 允许您创建现场字体调整大小功能的事实）？或者 em 与 px 是否已经成为一种偏好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T13:01:34.603

正如您所指出的，CSS-Pixels 不再是真正的像素，主要浏览器可以正确处理这些。

所以使用 em 的唯一用例是如果你真的想要一些相对于字体高度的东西。

例如，您希望在默认情况下拥有一个 textarea “3 行高”，您可以给它 height: 3em; 因此，即使在项目后期更改字体大小或其他任何内容后，此文本区域仍将是“3 行高”。

如果您不希望您的定义实际上与字体高度相关，请不要使用 em。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:57:08.380

我知道的唯一好处是，如果用户觉得文本太小，用户可以在网页上调整 em 的大小。如果您以像素为单位指定，则用户无法更改字体大小。这是我所知道的唯一好处。但这仅适用于较旧的浏览器。现代浏览器可以调整任何文本的大小。就个人而言，我从不使用 em，只使用像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:01:36.450

问题是您假设您知道像素是什么以及它的大小。屏幕像素密度变化很大（有些手机的像素比桌面屏幕多！）因此像素不是物理测量值，不应该用于它。已定义 em 以提供可移植的通用物理尺寸，因此如果我在 1em 处创建角色，它将在每个设备上大致相同的物理尺寸，这通常是我们想要做的（而不是挤压整个网络页面以不可读的尺寸放到移动屏幕上）。因此 em 是布局页面的首选方式。

# php - 使用 PHP 为记录集中的每 3 条记录输出特定代码

> ID：13011873
> 
> 赞同：2
> 
> 时间：2012-10-22T12:51:56.133
> 
> 标签：php, loops

目前我有一个页面可以输出数据库中每个人的一堆记录。因此，对于此页面上显示的每个人，他们的所有详细信息也会显示出来。

我现在要做的是正确格式化这些数据，以便在每第三或第四个人之后插入一些 HTML 代码来分解数据并使其更易于阅读，例如一个灰色条，说明数据的用途。我不知道我怎么能做到这一点？

**编辑**
我已将建议的代码添加到我的代码中，现在看起来像这样：

```
 <div class="content">
         <?php $i=0; ?>
            <?php foreach ($members as $members) { ?>
            <div class="repblock">

            </div>              
        <?php
            if (($i%4) == 0) { ?>
                </div>
            </div>
            <div class="page" style="page-break-before: always;">
                <div class="content">
        <?php   }
         $i++; } ?>
    </div> 
```

建议的代码在一定程度上有效。发生的情况是第一个成员单独显示，然后四个记录显示在一个组中，然后继续以四个为一组显示剩余的记录，直到记录用尽，如下所示：

> 会员记录1
> ----------------
> 会员记录2
> 会员记录3
> 会员记录4
> 会员记录5
> ----------------
> 会员记录6
> 会员记录7
> 会员记录8
> 会员记录9
> ----------------
> 会员记录10
> 会员记录11

为什么一开始只显示一条记录，然后正确分组记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:54:31.583

如果没有代码示例，我将假设您正在使用标准`for`循环来遍历您的数据。有了这个，您可以使用模数运算符 ,`%`来检查您在哪个号码上：

```
$numRecords = count($yourData);
for ($i = 0; $i < $numRecords; $i++) {
    if (($i > 0) && (($i % 3) == 0)) {
        // display a <br />, <hr />, whatever
    }

    // display stuff
} 
```

如果您使用的是`foreach`循环，则可以在其外部保留一个单独的计数器并以相同的方式对其进行检查：

```
$i = 0;
foreach ($yourData as $singleRecord) {
    if ((++$i % 3) == 0) {
        // display a <br />, <hr />, whatever
    }

    // display stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T12:53:58.897

您可以使用模运算符来确定哪个索引是每三分之一。

```
if ($index % 3 == 0) {
    // Every third.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T12:57:42.343

这很简单。

您必须保留一个计数器，为每个人增加它，每当它超过 3 或 4 时，输出分隔符并重置计数器。

就像是：

```
$i = 0;
// for loop here
if(($i = $i%3) == 0){
    echo '<hr />';
}
$i++;
// end for loop 
```

# playframework-2.0 - 为什么Ebean无缘无故返回null？

> ID：13011874
> 
> 赞同：5
> 
> 时间：2012-10-22T12:51:57.040
> 
> 标签：playframework-2.0, ebean

使用 Play Framework，我有一个这样的模型：

```
class MyModel extends Model {
    // Some columns

    @ManyToOne
    public OtherModel other;

    public OtherModel getOther() {
        return other;
    }
} 
```

由于我无法理解的原因，如果我调用`myModel.other`OR `myModel.getOther()`（`myModel`作为 的实例`MyModel`），我得到一个 Null 值，即使它应该返回 OtherModel 的实例！

此外，如果我将`getOther()`方法更改为此：

```
public OtherModel getOther() {
    console.log (String.valueOf(other));
    return other;
} 
```

`getOther()`返回预期的实例`OtherModel`

为什么我会得到这个，以及如何解决这个奇怪的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T19:58:24.097

我有一个类似的问题（但我不需要`console.log`声明）。

我所做的只是用私有字段替换公共字段，并使用公共 getter 和 setter。我认为这是一个 Playframework 错误，但我找不到我在哪里看到的。

# ios - 仅允许纵向 - 适用于 iOS6 但不适用于 iOS5

> ID：13011880
> 
> 赞同：1
> 
> 时间：2012-10-22T12:52:09.960
> 
> 标签：ios, xcode, uiinterfaceorientation, autorotate, interface-orientation

我正在使用 iOS 6.0 的 Base SDK 构建一个项目。

在 Targets > Summary 中，我将 Supported Deviceorientations 设置为仅纵向（未选择其他方向）。

当我在 6.0 模拟器中运行应用程序时，这很有效，应用程序按预期锁定为纵向。但是，当我运行 5.1 模拟器时，它支持两个横向（但不倒置）！？

我想在整个应用程序中的每个视图中强制使用肖像（一个视图控制器）。目前在 iOS 5.1 中进行测试时，无论我做什么，它都允许旋转。

尽管在 iOS6 中被贬值，但我一直保留：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

但这无济于事。

我如何也只能在 iOS 5.0 中强制人像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:31:56.270

`shouldAutorotateToInterfaceOrientation`应该做的伎俩。你确定它正在执行？你确定它是在你的主视图控制器中定义的，而不是在其他地方吗？

# node.js - Node.js：简单的应用程序无法在 Heroku 上运行

> ID：13011881
> 
> 赞同：10
> 
> 时间：2012-10-22T12:52:14.037
> 
> 标签：node.js, deployment, heroku

我编写了一个基本的 node.js 应用程序，并且成功地将它部署在 Heroku 上，没有任何问题。我已经创建了**package.json**和**Procfile**，但是从日志中我看到没有正在运行的进程，因此无法得到任何响应。可能是什么问题呢？

**PS：**我不想使用**Express**框架

**我的代码：**

```
var http = require("http");

http.createServer(function(request, response) {
  response.writeHead(200, {"Content-Type": "text/plain"});
  response.write("Hello World");
  response.end();

  console.log("I am working");
}).listen(8888); 
```

**我的 package.json：**

```
{
  "name": "node-example",
  "version": "0.0.1",
  "dependencies": {
  },
  "engines": {
    "node": "0.8.x",
    "npm": "1.1.x"
  }
} 
```

**日志：**

```
2012-10-22T12:36:58+00:00 heroku[slugc]: Slug compilation started
2012-10-22T12:37:07+00:00 heroku[slugc]: Slug compilation finished
2012-10-22T12:40:55+00:00 heroku[router]: Error H14 (No web processes running) -> GET aqueous-bastion-6914.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-10-22T12:50:44+00:00 heroku[router]: Error H14 (No web processes running) -> GET aqueous-bastion-6914.herokuapp.com/ dyno= queue= wait= service= status=503 bytes= 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-22T13:42:09.717

您是否扩展了 heroku 应用程序？

```
$ heroku ps:scale web=1 
```

这是必需的步骤。这`1`是您希望为您的应用程序生成的进程数。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-22T14:07:45.830

更改您的端口

从

```
.listen(8888) 
```

至

```
.listen(process.env.PORT || 8888) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T14:15:28.757

你的 Procfile 里面有什么？它与您的应用名称匹配吗？

```
$ ls
app.js Procfile
$ cat Procfile
web: node app$
$ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-17T07:54:40.250

我必须做的事情（不必扩展或使用 Express）..

1.  在根目录中创建一个 Procfile（一个字面称为 Procfile 的文件，没有扩展名）。
    在 Procfile 中，键入：

    ```
    web: node server.js 
    ```

2.  将脚本和引擎添加到 package.json

    ```
    "scripts": {
            "start": "node server.js"
    }

    "engines": {
            "node": "8.9.3"
    } 
    ```

3.  更新 server.js 中的端口

    ```
    var port = process.env.PORT || 8080; 
    ```

以及为什么..

1.  明确声明应该执行什么命令来启动您的应用程序。Heroku 查找指定进程类型的 Procfile

2.  对于脚本，如果在构建过程中根目录中没有 Procfile，您的 Web 进程将通过运行 npm start 来启动。对于引擎，指定与您正在开发并希望在 Heroku 上使用的运行时相匹配的 Node 版本。

3.  Heroku 已经为您的应用程序分配了一个端口并将其添加到环境中，因此您不能将端口设置为固定数字。

资源：

[https://devcenter.heroku.com/articles/getting-started-with-nodejs#introduction](https://devcenter.heroku.com/articles/getting-started-with-nodejs#introduction)

[https://devcenter.heroku.com/articles/troubleshooting-node-deploys](https://devcenter.heroku.com/articles/troubleshooting-node-deploys)

[https://devcenter.heroku.com/articles/deploying-nodejs](https://devcenter.heroku.com/articles/deploying-nodejs)

# .net - 安装 .NET 4.5 真的会取代 .NET 4.0 程序集吗？

> ID：13011883
> 
> 赞同：14
> 
> 时间：2012-10-22T12:52:20.603
> 
> 标签：.net, .net-4.0, compatibility, .net-4.5

我现在正式感到困惑。有关安装 .NET 4.5 框架的 MSDN 文章指出以下内容：

*“.NET Framework 4.5 替换了 .NET Framework 4。在安装了 .NET Framework 4 的系统上安装 .NET Framework 4.5 时，程序集将被替换。”*

那么，为什么我会在我的文件系统上找到 .NET 4.0 程序集呢？当我浏览到“C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework”时，我发现了几个文件夹，包括包含 DLL 的“v3.5”、“v4.0”和“v4.5”对于每个版本。怎么了？

这告诉我 .NET Framework 4 的程序集根本没有被 4.5 取代。有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T12:57:34.187

是的，.NET 4.5 是一个就地升级，因此它确实取代了 .NET 4.0 程序集。

请参阅 Hans Passant 的这个答案，解释参考程序集目录中的程序集的用途：[参考程序集文件夹和具有相同版本的不同程序集](https://stackoverflow.com/questions/9701135/reference-assemblies-folder-and-different-assemblies-with-the-same-version)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T10:33:33.650

是的，NET 4.5 是 .NET 4.0 的就地升级，这意味着 CLR 是相同的，但添加了新库以及错误修复和性能改进，并且两者都指向 .NET CLR 4。

但是，.NET 4 库实际上并没有消失。

您仍然可以在以下位置找到它们：

C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0

（假设您的操作系统是 32 位）

有了它，如果您已安装 .NET 4.5，您可以安全地针对 .NET 4

去[这里](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx)查找更多信息

# css - 浮动和居中的 Wordpress 页面内容

> ID：13011885
> 
> 赞同：0
> 
> 时间：2012-10-22T12:52:29.287
> 
> 标签：css, wordpress, css-float, center, margin

所以，

我在尝试将一系列浮动元素放在页面上时遇到问题。我正在处理一个在顶部使用一些浮动元素的页面：页面标题，然后是图像，然后是页面标题中的另一个单词，所有这些都按该顺序彼此相邻浮动。

为此，我正在使用：

```
<div class="bodyheaddiv"><p class="bodyheadtext">Contact Us</p><img class="bodyhead"     src="http://lrgi.org/wp-content/uploads/2012/10/Contact_icon_1.png" alt="" /><p     class="bodyheadtext">Contáctenos</p></div>​ 
```

使用 CSS：

```
.bodyheaddiv {
height: 51px;
width: 500px;
margin-left: auto;
margin-right: auto;
}

.bodyhead {
display: inline;
float: left;
margin-left: 10px;
margin-right: 10px;
position: relative;
}

.bodyheadtext {
line-height: 30px;
display: inline;
clear: none;
float: left;
margin-top: 0px;
font-size: 18px;
position: relative;
}​ 
```

目前的结果是这样的： ![在此处输入图像描述](../Images/f679c153935d0e0f3d7c6f4e32b39189.png)

页面标题和图像不在其列中居中的位置。*但是*，我想要实现的是：

![在此处输入图像描述](../Images/51d290e18ec8c9c8f31fa5c22aabd6e9.png)

任何帮助弄清楚如何在页面上居中这些元素将不胜感激！

-马卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:03:52.827

这应该为你做：

**[演示](http://jsfiddle.net/4VJqh/)**

```
<div>
    <p><span>Contact Us</span><span>Contáctenos</span></p>
</div>​ 
```

使用 CSS：

```
div {
    height: 70px;
    width: 500px;
    0 auto;
    background-image: url('http://lrgi.org/wp-content/uploads/2012/10/Contact_icon_1.png');
    background-position: top center;
    background-repeat: no-repeat;
}

div p {
    text-align: center;
    height: 70px;
    line-height: 70px;
}

div p span {
    margin: 0 60px;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T13:01:11.533

这是你的答案

```
<div class="bodyheaddiv">
<table align="center">
<tr>
<td>
<p class="bodyheadtext">Contact Us</p></td>
<td><img class="bodyhead"     src="http://lrgi.org/wp-content/uploads/2012/10/Contact_icon_1.png" alt="" /></td>
<td><p class="bodyheadtext">Contáctenos</p></td>
</tr>
</table>
</div> 
```

# jquery - 可调整大小的文本区域

> ID：13011887
> 
> 赞同：1
> 
> 时间：2012-10-22T12:52:49.850
> 
> 标签：jquery, asp.net

我在 CSS 文件中有这样的 textareaBox 和 textarea 定义：

```
.textareaBox {
   border: 1px solid #e5e5e5;
   width: 371px;
   height: 73px;
   float: right;
   padding: 5px 10px;
}
.textareaBox textarea {
   width: 370px;
   height: 67px;
   line-height: 18px;
   outline: none;
   border: none;
   font-size: 12px;
   color: #888888;
   font-family: "Segoe UI Light", segoeuil; 
```

}

在我放置的 ASPX 页面上

```
<asp:Content ID=....>
<link type="text/css" href="~/stylesheets/jquery-ui-1.9.0.custom.css" rel="Stylesheet"/>
<script type="text/javascript" src="~/Scripts/jquery-ui-1.9.0.custom.min.js"></script>
<script type="text/javascript" src="~/Scripts/jquery-ui-1.9.0.custom.js"></script>
<script type="text/javascript">
    $(function () {
        $(".textareaBox").resizable();
    });
</script> 
```

但是 textareaBox 不会改变它的大小。并且它里面的textarea总是当它变得比textareaBox外面的textareaBox大时。

```
<div class="textareaBox">
 <textarea ... rows="10" cols="10" class="textarea jq_black"></textarea>
</div> 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:55:11.660

您是否在“样式表/jquery-ui-1.9.0.custom.css”样式表中的某处引用“调整大小”图像？如果没有，请添加对此样式表的引用。

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" /> 
```

# android - 播放 videoView 时仅在 layout-land android 中制作全屏

> ID：13011891
> 
> 赞同：3
> 
> 时间：2012-10-22T12:52:59.030
> 
> 标签：android, android-layout, android-manifest, android-videoview

我正在创建 android 应用程序来播放 liveStream，我在 layout.xml 中添加了 videoView 并添加了 layout-land 文件夹

我想让应用程序仅在布局区域而不是纵向中全屏显示视频

所以我在 onCreate() 中添加了以下代码：

```
public void onConfigurationChanged(Configuration newConfig){
if(getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE
   {
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
   } else 
    if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN,    WindowManager.LayoutParams.FLAG_FULLSCREEN);
    }
} 
```

但我的问题是，当我旋转设备时，它会重新启动活动，这会导致视频流停止，我想阻止这种情况。所以。我添加以体现这一行

```
 android:configChanges="keyboard|keyboardHidden|orientation|screenSize" 
```

但这会导致 onCreate() 的代码只执行一次。

如何让我的应用程序连续播放视频流，当我旋转设备以在布局区域中全屏显示，然后回到纵向时使其正常？

希望有人明白我的意思。提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T15:12:44.380

您应该将您的视频视图（或内容父级）添加为布局文件中的最后一个元素。并使用下一个代码：

```
private RelativeLayout.LayoutParams paramsNotFullscreen; //if you're using RelativeLatout           

@Override
public void onConfigurationChanged(Configuration newConfig) 
{
    super.onConfigurationChanged(newConfig);

    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) //To fullscreen
    {
        paramsNotFullscreen=(RelativeLayout.LayoutParams)mVideoView.getLayoutParams();
        RelativeLayout.LayoutParams params=new LayoutParams(paramsNotFullscreen);
        params.setMargins(0, 0, 0, 0);
        params.height=ViewGroup.LayoutParams.MATCH_PARENT;
        params.width=ViewGroup.LayoutParams.MATCH_PARENT;
        params.addRule(RelativeLayout.CENTER_IN_PARENT);
        mVideoView.setLayoutParams(params);

    } 
    else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) 
    {
        mVideoView.setLayoutParams(paramsNotFullscreen);
    }
} 
```

它获取 videoview layoutparams 的副本并将其保存在全局变量中。然后使用以前的值创建一个新的 layoutparams 对象，但现在将限制设置为 match_parent 并将其设置在您的视频视图中。您现在的 videoview 是全屏显示。当您将设备置于纵向时，paramsNotFullscreen 会恢复以前的值。

**更新：**

在您的清单文件中，您必须在 Activity 声明中添加以下代码以避免 Activity 重新启动：

```
android:configChanges="screenLayout|screenSize|orientation" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:00:39.337

试试这个...

```
@Override
    public void onConfigurationChanged(Configuration newConfig) 
    {
        super.onConfigurationChanged(newConfig);

        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) 
        {
            setContentView(R.layout.create_job_l);

        } 
        else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT)
        {
            setContentView(R.layout.create_job_p);

        }
    }
    @Override
    public void onCreate(Bundle savedInstanceState)
    {

        super.onCreate(savedInstanceState);
        if (getResources().getConfiguration().orientation == 1)
        {
            setContentView(R.layout.create_job_p);
        }
        if (getResources().getConfiguration().orientation == 2)
        {
            setContentView(R.layout.create_job_l);
        }

    } 
```

# java - 如何在 Java (IDE) 中找到当前项目目录的路径？

> ID：13011892
> 
> 赞同：72
> 
> 时间：2012-10-22T12:53:01.270
> 
> 标签：java, eclipse, path

我正在尝试在 Java 中以编程方式定位当前正在运行/调试的项目的路径，我查看了 Google，我发现的是`System.getProperty("user.id")`，这并没有让我得到项目的路径。

我知道`Environment.currentDirectory`C# 中的命令给出了当前运行/调试项目的路径，所以我确信 Java 中也必须有类似的方式。

所以我问是否有人可以告诉我或给我一个代码，以编程方式定位当前正在运行/调试的项目的路径？

**编辑**：我正在编写随 eclipse 启动加载的插件。该插件向 Eclipse 的工作台添加了一个按钮，在插件的代码中，当我单击该按钮时，我会搜索当前目录路径。

我的目的是，例如，当我调试一个项目然后单击按钮时，会弹出一个窗口，显示调试项目的路径，谢谢

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-10-22T12:55:26.190

Two ways

```
System.getProperty("user.dir"); 
```

or this

```
File currentDirFile = new File(".");
String helper = currentDirFile.getAbsolutePath();
String currentDir = helper.substring(0, helper.length() - currentDirFile.getCanonicalPath().length());//this line may need a try-catch block 
```

The idea is to get the current folder with ".", and then fetch the absolute position to it and remove the filename from it, so from something like

```
/home/shark/eclipse/workspace/project/src/com/package/name/bin/Class.class 
```

when you remove Class.class you'd get

```
/home/shark/eclipse/workspace/project/src/com/package/name/bin/ 
```

which is kinda what you want.

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-02-25T10:15:21.930

使用`user.dir`java 获取项目位置的密钥。

**代码：**

```
System.out.println("Present Project Directory : "+ System.getProperty("user.dir")); 
```

**输出：**

`Present Project Directory :C:\workspace\MyEclipse 10\examples\MySqlMavenDomain`

要显示所有系统属性，只需使用`System.getProperties();`

使用`Key`值`System.getProperty("java.version");`获取输出。

**代码：**

```
Properties properties = System.getProperties();
Enumeration<Object> enumeration = properties.keys();
for (int i = 0; i < properties.size(); i++) {
    Object obj = enumeration.nextElement();
    System.out.println("Key: "+obj+"\tOutPut= "+System.getProperty(obj.toString()));
} 
```

**输出：**

```
Key: java.runtime.name  OutPut= Java(TM) SE Runtime Environment
Key: sun.boot.library.path  OutPut= C:\Program Files\Java\jdk1.7.0_45\jre\bin
Key: java.vm.version    OutPut= 24.45-b08
Key: java.vm.vendor OutPut= Oracle Corporation
Key: java.vendor.url    OutPut= http://java.oracle.com/
Key: path.separator OutPut= ;
Key: java.vm.name   OutPut= Java HotSpot(TM) Client VM
Key: file.encoding.pkg  OutPut= sun.io
Key: user.country   OutPut= US
Key: user.script    OutPut= 
Key: sun.java.launcher  OutPut= SUN_STANDARD
Key: sun.os.patch.level OutPut= Service Pack 3
Key: java.vm.specification.name OutPut= Java Virtual Machine Specification
Key: user.dir   OutPut= C:\workspace\MyEclipse 10\examples\MySqlMavenDomain
Key: java.runtime.version   OutPut= 1.7.0_45-b18
Key: java.awt.graphicsenv   OutPut= sun.awt.Win32GraphicsEnvironment
Key: java.endorsed.dirs OutPut= C:\Program Files\Java\jdk1.7.0_45\jre\lib\endorsed
Key: os.arch    OutPut= x86
Key: java.io.tmpdir OutPut= C:\DOCUME~1\UDAYP~2.PBS\LOCALS~1\Temp\
Key: line.separator OutPut= 

Key: java.vm.specification.vendor   OutPut= Oracle Corporation
Key: user.variant   OutPut= 
Key: os.name    OutPut= Windows XP
Key: sun.jnu.encoding   OutPut= Cp1252
Key: java.library.path  OutPut= C:\Program Files\Java\jdk1.7.0_45\bin;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32;C:\WINDOWS;C:/Program Files/MyEclipse/Common/binary/com.sun.java.jdk.win32.x86_1.6.0.013/jre/bin/client;C:/Program Files/MyEclipse/Common/binary/com.sun.java.jdk.win32.x86_1.6.0.013/jre/bin;C:/Program Files/MyEclipse/Common/binary/com.sun.java.jdk.win32.x86_1.6.0.013/jre/lib/i386;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\system32\WindowsPowerShell\v1.0;D:\Program Files\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;D:\Program Files\Microsoft SQL Server\100\Tools\Binn\;D:\Program Files\Microsoft SQL Server\100\DTS\Binn\;.
Key: java.specification.name    OutPut= Java Platform API Specification
Key: java.class.version OutPut= 51.0
Key: sun.management.compiler    OutPut= HotSpot Client Compiler
Key: os.version OutPut= 5.1
Key: user.home  OutPut= C:\Documents and Settings\uday.p.PBSYSTEMS
Key: user.timezone  OutPut= 
Key: java.awt.printerjob    OutPut= sun.awt.windows.WPrinterJob
Key: file.encoding  OutPut= UTF-8
Key: java.specification.version OutPut= 1.7
Key: java.class.path    OutPut= C:\workspace\MyEclipse 10\examples\MySqlMavenDomain\target\test-classes;C:\workspace\MyEclipse 10\examples\MySqlMavenDomain\target\classes;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\jstl\jstl\1.2\jstl-1.2.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\javax\servlet\javax.servlet-api\3.1.0\javax.servlet-api-3.1.0.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\mysql\mysql-connector-java\5.1.28\mysql-connector-java-5.1.28.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\javax\mail\mail\1.4.7\mail-1.4.7.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\javax\activation\activation\1.1\activation-1.1.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\junit\junit\4.11\junit-4.11.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\hamcrest\hamcrest-core\1.3\hamcrest-core-1.3.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\hibernate\hibernate-core\4.3.0.Final\hibernate-core-4.3.0.Final.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\jboss\logging\jboss-logging\3.1.3.GA\jboss-logging-3.1.3.GA.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\jboss\logging\jboss-logging-annotations\1.2.0.Beta1\jboss-logging-annotations-1.2.0.Beta1.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\jboss\spec\javax\transaction\jboss-transaction-api_1.2_spec\1.0.0.Final\jboss-transaction-api_1.2_spec-1.0.0.Final.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\dom4j\dom4j\1.6.1\dom4j-1.6.1.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\xml-apis\xml-apis\1.0.b2\xml-apis-1.0.b2.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\hibernate\common\hibernate-commons-annotations\4.0.4.Final\hibernate-commons-annotations-4.0.4.Final.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\hibernate\javax\persistence\hibernate-jpa-2.1-api\1.0.0.Final\hibernate-jpa-2.1-api-1.0.0.Final.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\javassist\javassist\3.18.1-GA\javassist-3.18.1-GA.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\antlr\antlr\2.7.7\antlr-2.7.7.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\jboss\jandex\1.1.0.Final\jandex-1.1.0.Final.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\hibernate\hibernate-entitymanager\4.3.0.Final\hibernate-entitymanager-4.3.0.Final.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\commons-dbcp\commons-dbcp\1.4\commons-dbcp-1.4.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\commons-fileupload\commons-fileupload\1.3\commons-fileupload-1.3.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\commons-io\commons-io\2.4\commons-io-2.4.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\commons-net\commons-net\3.3\commons-net-3.3.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\commons-codec\commons-codec\1.9\commons-codec-1.9.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\commons-pool\commons-pool\1.6\commons-pool-1.6.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\commons-collections\commons-collections\3.2.1\commons-collections-3.2.1.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\commons-logging\commons-logging\1.1.3\commons-logging-1.1.3.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\commons-beanutils\commons-beanutils\1.9.0\commons-beanutils-1.9.0.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\apache\commons\commons-lang3\3.1\commons-lang3-3.1.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\log4j\log4j\1.2.16\log4j-1.2.16.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\springframework\spring-orm\3.2.6.RELEASE\spring-orm-3.2.6.RELEASE.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\aopalliance\aopalliance\1.0\aopalliance-1.0.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\springframework\spring-jdbc\3.2.6.RELEASE\spring-jdbc-3.2.6.RELEASE.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\springframework\spring-tx\3.2.6.RELEASE\spring-tx-3.2.6.RELEASE.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\springframework\spring-web\3.2.6.RELEASE\spring-web-3.2.6.RELEASE.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\springframework\spring-aop\3.2.6.RELEASE\spring-aop-3.2.6.RELEASE.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\springframework\spring-webmvc\3.2.6.RELEASE\spring-webmvc-3.2.6.RELEASE.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\springframework\spring-aspects\3.2.6.RELEASE\spring-aspects-3.2.6.RELEASE.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\aspectj\aspectjweaver\1.7.2\aspectjweaver-1.7.2.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\springframework\spring-beans\3.2.6.RELEASE\spring-beans-3.2.6.RELEASE.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\springframework\spring-context\3.2.6.RELEASE\spring-context-3.2.6.RELEASE.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\springframework\spring-context-support\3.2.6.RELEASE\spring-context-support-3.2.6.RELEASE.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\springframework\spring-core\3.2.6.RELEASE\spring-core-3.2.6.RELEASE.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\springframework\spring-expression\3.2.6.RELEASE\spring-expression-3.2.6.RELEASE.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\springframework\spring-instrument\3.2.6.RELEASE\spring-instrument-3.2.6.RELEASE.jar;C:\Documents and Settings\uday.p.PBSYSTEMS\.m2\repository\org\springframework\spring-instrument-tomcat\3.2.6.RELEASE\spring-instrument-tomcat-3.2.6.RELEASE.jar
Key: user.name  OutPut= uday.p
Key: java.vm.specification.version  OutPut= 1.7
Key: sun.java.command   OutPut= com.uk.mysqlmaven.domain.test.UserLoginDetails
Key: java.home  OutPut= C:\Program Files\Java\jdk1.7.0_45\jre
Key: sun.arch.data.model    OutPut= 32
Key: user.language  OutPut= en
Key: java.specification.vendor  OutPut= Oracle Corporation
Key: awt.toolkit    OutPut= sun.awt.windows.WToolkit
Key: java.vm.info   OutPut= mixed mode, sharing
Key: java.version   OutPut= 1.7.0_45
Key: java.ext.dirs  OutPut= C:\Program Files\Java\jdk1.7.0_45\jre\lib\ext;C:\WINDOWS\Sun\Java\lib\ext
Key: sun.boot.class.path    OutPut= C:\Program Files\Java\jdk1.7.0_45\jre\lib\resources.jar;C:\Program Files\Java\jdk1.7.0_45\jre\lib\rt.jar;C:\Program Files\Java\jdk1.7.0_45\jre\lib\sunrsasign.jar;C:\Program Files\Java\jdk1.7.0_45\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.7.0_45\jre\lib\jce.jar;C:\Program Files\Java\jdk1.7.0_45\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.7.0_45\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.7.0_45\jre\classes
Key: java.vendor    OutPut= Oracle Corporation
Key: file.separator OutPut= \
Key: java.vendor.url.bug    OutPut= http://bugreport.sun.com/bugreport/
Key: sun.io.unicode.encoding    OutPut= UnicodeLittle
Key: sun.cpu.endian OutPut= little
Key: sun.desktop    OutPut= windows
Key: sun.cpu.isalist    OutPut= pentium_pro+mmx pentium_pro pentium+mmx pentium i486 i386 i86 
```

更多详情请参阅[班级系统](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-04-19T21:45:22.450

这是执行此操作的新方法：

```
Path root = FileSystems.getDefault().getPath("").toAbsolutePath();
Path filePath = Paths.get(root.toString(),"src", "main", "resources", fileName); 
```

甚至更好：

```
Path root = Paths.get(".").normalize().toAbsolutePath(); 
```

但我会更进一步：

```
public Path getUsersProjectRootDirectory() {
    String envRootDir = System.getProperty("user.dir");
    Path rootDIr = Paths.get(".").normalize().toAbsolutePath();
    if ( rootDir.startsWith(envRootDir) ) {
        return rootDir;
    } else {
        throw new RuntimeException("Root dir not found in user directory.");
    }
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-22T12:56:32.250

怎么样`System.getProperty("user.dir")`？它将为您提供启动程序的工作目录。

有关Java 系统[属性](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html "s")的概述，请参阅 Java 教程中的系统属性。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-23T15:07:01.247

# 你不能。

Java-Projects 没有一条路径！Java-Projects 有多个路径，即使一个类可以在一个“项目”中的不同类路径中具有多个位置。

因此，如果您的 JRE/lib 中有一个calculator.jar，并且在 CD 上有一个具有相同类的calculator.jar：如果您从 CD 中执行calculator.jar 类，java-vm 将从JRE/库！

这个问题经常出现在喜欢加载项目内部部署的资源的程序员身上。在这种情况下，

```
System.getResource("/likebutton.png") 
```

以为例。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-03-13T06:49:45.903

可以获取当前项目路径使用`System.getProperty("user.dir")`

在该方法中，您编写 Key name 以获取不同的路径，如果您不知道 key，您可以找到`System.getProperties()`该方法的所有属性使用是返回带有 key 的所有属性。您可以从中手动找到键名。

和写`System.getProperty("KEY NAME")`

并得到你需要的路径。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-22T13:02:42.570

```
File currDir = new File(".");
String path = currDir.getAbsolutePath();
System.out.println(path); 
```

这将在最后打印`.`。要删除，只需将字符串截断一个字符，例如：

```
File currDir = new File(".");
String path = currDir.getAbsolutePath();
path = path.substring(0, path.length()-1);
System.out.println(path); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-08-15T18:16:18.390

这是一段代码片段，用于在 java 中检索当前正在运行的 Web 应用程序项目的路径。

```
public String getPath() throws UnsupportedEncodingException {

    String path = this.getClass().getClassLoader().getResource("").getPath();
    String fullPath = URLDecoder.decode(path, "UTF-8");
    String pathArr[] = fullPath.split("/WEB-INF/classes/");
    System.out.println(fullPath);
    System.out.println(pathArr[0]);
    fullPath = pathArr[0];

    return fullPath;

} 
```

来源：[https ://dzone.com/articles/get-current-web-application](https://dzone.com/articles/get-current-web-application)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-07T08:49:49.567

我刚刚用过这个：

```
System.out.println(System.getenv().get("PWD")); 
```

使用 OpenJDK 11

# mysql - 同一字段中的逗号分隔值按公共数据分组

> ID：13011893
> 
> 赞同：0
> 
> 时间：2012-10-22T12:53:04.733
> 
> 标签：mysql, csv

我有一个概述以下需求的要求：

[对常用数据的逗号分隔值进行分组](https://stackoverflow.com/questions/9950216/grouping-a-comma-separated-value-on-common-data)

我需要对具有公共数据的逗号分隔值进行分组。Andreas 在上面的链接中提出的解决方案有效，但是卡在了第一组值的循环中，因此正确地将 grp 更新为 1，但是它没有执行 current_group = currenct_group+1。

看起来它没有脱离 unprocessed: 循环，因此不会返回到 main:loop 来更新下一组。无法弄清楚为什么未处理不会设置为空。我的第一组值只有两个参考，在组表中似乎重复了很多次。

有什么想法吗？

# iphone - Parse iOS API 中的 PFUser 和 Facebook

> ID：13011894
> 
> 赞同：1
> 
> 时间：2012-10-22T12:53:05.967
> 
> 标签：iphone, objective-c, ios, facebook

我正在尝试[使用 Parse Mobile 平台创建登录和注册页面](http://www.youtube.com/watch?v=X-9zk2ArATI&feature=plcp)。问题是我想将我的 App 用户连接到他的 Facebook。[我可以使用Facebook Users](https://www.parse.com/docs/ios_guide#fbusers)使其工作。

问题是当我们点击 facebook 按钮时，如果 facebook id 没有链接到任何用户，它会在系统中创建一个新用户。那是我不想要的。

所以我强制创建自己的 facebook 连接机制：

```
if(![_prefs boolForKey:@"facebook"]) {
        [_login.logInView.facebookButton removeTarget:nil action:NULL forControlEvents: UIControlEventTouchUpInside];

        if(!user)
            [_login.logInView.facebookButton addTarget:self action:@selector(firstTimeFBConnect) forControlEvents:UIControlEventTouchUpInside];
        else if(user.isNew)
            [_login.logInView.facebookButton addTarget:self action:@selector(fbConnNewUser) forControlEvents:UIControlEventTouchUpInside];
    } 
```

如您所见，在此代码中，我使用了 UserDefault，一切都很完美，直到我卸载应用程序并再次安装，所有 UserDefault 都将被重置，但我的 Parse 云中用户和 facebook 之间的链接没有。

我想要的是：

当用户第一次安装应用程序并单击 facebook 按钮时，我可以检查此 facebook id 是否连接到系统中的任何注册用户。

如果是，则返回 TRUE。如果不返回 FALSE。

我在 Parse 中找不到任何有用的代码。

# sql-server - 需要帮助来获取当前日期的记录？

> ID：13011900
> 
> 赞同：0
> 
> 时间：2012-10-22T12:53:33.963
> 
> 标签：sql-server, stored-procedures

我正在尝试编写存储过程来获取当前日期的记录，但我无法这样做。我已经创建了一个用于记录显示的最新版本，并尝试对其进行修改。

这是代码：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[SP_SELECTTODAYRECORDS_Test]
AS
BEGIN 
    SELECT col_Source as 'country', 
    col_FirstName +' '+col_LastName as 'name',
    description as 'state' ,
    col_county
    from tbl_Info_Test, tbl_CountySite 
    where col_Pic is not null
    and col_Source = sourcecountry
    and ISDATE(col_BookDate) = 1
    order by CONVERT(datetime, col_BookDate) DESC
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:01:58.790

如果您想获取今天日期的报告，那么您可以使用带有 GetDate() 的转换函数。

如果您在 SP 中添加以下 where 条件，它将提供当天日期的 col_BookDate 记录。

```
CONVERT(VARCHAR(10),col_BookDate,101)=CONVERT(VARCHAR(10),GETDATE(),101) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:04:10.007

日期字段结合了日期和时间信息。要选择当前日期的记录，您必须省略时间部分。一种方法是从字段中删除时间部分。请参阅以下链接：

[SQL Server 中从日期+时间获取日期的最有效方法？](https://stackoverflow.com/questions/133081/most-efficient-way-in-sql-server-to-get-date-from-datetime)

其他方法是选择当前日期开始（00:00）和第二天开始之间的所有记录：

```
... WHERE DateField >= @Date AND DateField < DATEADD(d, 1, @Date) 
```

# c# - 绑定按钮路径图片（Using MvxBaseAndroidTargetBinding）Android

> ID：13011901
> 
> 赞同：2
> 
> 时间：2012-10-22T12:53:35.280
> 
> 标签：c#, mono, xamarin.android, mvvmcross

如何使用 MvxBaseAndroidTargetBinding 将路径图像绑定到按钮？

1）我创建一个绑定

```
public class MvxButtonIconBinding: MvxBaseAndroidTargetBinding
{
    private readonly View _view;

public MvxButtonIconBinding(View view)
{
    _view = view;
}

public override void SetValue(object value)
{
    string path = System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal);
    path = Path.Combine(path, "pictures");
    path = Path.Combine(path, (string)value);
    if (File.Exists(path))
    {
        var dr = Drawable.CreateFromPath(path);
        Button b = _view as Button;
        var drawables = b.GetCompoundDrawables();
        foreach (var d in drawables)
            if (d!=null)
                d.Dispose(); // To avoid "out of memory" messages
        b.SetCompoundDrawablesWithIntrinsicBounds(null, dr, null, null);
    }
    else
    {
        Console.WriteLine("File {0} does not exists", path);
    } 
}

public override MvxBindingMode DefaultMode
{
    get { return MvxBindingMode.OneWay; }
}

public override Type TargetType
{
    get { return typeof(string); }
}

protected override void Dispose(bool isDisposing)
{
    if (isDisposing)
    {
    }
    base.Dispose(isDisposing);
} 
```

}

2）设置绑定：

```
registry.RegisterFactory(new MvxCustomBindingFactory<View>("ButtonIcon", view => new MvxButtonIconBinding(view))); 
```

3) 创建 button_list.аxml

```
<Button
android:id="@+id/ButtonArticle"
android:layout_width="fill_parent"
android:layout_height="160dp"
android:gravity="bottom|center"
android:paddingBottom="5dp"
android:paddingTop="5dp"
local:MvxBind="{'Click':{'Path':'Command1'},'ButtonIcon':{'Path':'Item.PictureFileName'}}"
android:textSize="14dip"
android:textColor="@drawable/ToggleButtonSelector" /> 
```

* * *

**哪个路径传输属性 PictureFileName？请给我一个例子。**

* * *

[*摘自*](https://stackoverflow.com/questions/12914544/ssue-with-binding-to-gridlayout-to-android)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:18:34.603

从您的代码中，图像应位于：

```
string path = System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal);
path = Path.Combine(path, "pictures");
path = Path.Combine(path, (string)value); 
```

因此，如果您的输入值为`Item.PictureFileName`“icon1.png”，那么您需要将图像保存在：

```
/data/data/YOUR_APP_NAME/files/pictures/icon1.png 
```

* * *

我根据[MonoDroid 中 SQLite](https://stackoverflow.com/questions/6319666/database-file-location-for-sqlite-within-monodroid)`System.Environment.SpecialFolder.Personal`的数据库文件位置中的信息解决了这个问题

* * *

如果您使用的是固定图标集（不是下载或动态创建图像），那么您最好使用[会议示例](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Bindings/FavoritesButtonBinding.cs)`SetButtonBackground`中所示的 resourceId 方法

# macos - Java: JFrame icon not showing in titlebar (OS X)

> ID：13011908
> 
> 赞同：0
> 
> 时间：2012-10-22T12:54:25.753
> 
> 标签：macos, icons, jframe

I am trying to add an icon to a JFrame titlebar in OS X. The code I have used is:

```
ImageIcon icon = new ImageIcon("src/images/theIcon.gif");
System.out.println("Icon dimensions are " + icon.getIconWidth() + " by " + icon.getIconHeight());
frame.setIconImage(icon.getImage()); 
```

No icon shows up, and the console output shows the correct dimensions for the image. There must be something wrong with the expression `setIconImage(icon.getImage())`, but I can't see what.

I am on Mac OS 10.8.2, running Java SE 6 and Eclipse Juno. Actually, I'm wondering if this is an OS X issue.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T06:59:46.287

默认情况下，OS X 不会用图标绘制标题栏。您可以启用跨平台外观来绘制图标。但是，这样做可能会伤害您的眼睛，因为它不是特别漂亮。

在创建 JFrame 之前执行此操作（例如在`main`方法中）。

```
try {
    UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());
    JFrame.setDefaultLookAndFeelDecorated(true);
} catch (Exception e) {
    e.printStackTrace();
} 
```

这是带有和不带有上述代码的屏幕截图：

![JFrame 带和不带跨平台 l&f](../Images/36fc247950e41f456838451206d6aca4.png)

# c - C 输出格式问题

> ID：13011919
> 
> 赞同：1
> 
> 时间：2012-10-22T12:55:02.910
> 
> 标签：c, formatting, output

我在 C 中的输出格式存在一些问题。请参阅下图了解我的输出

![看图片](../Images/1479e466f6277b815ac9b145cff1a918.png)

我希望我的输出如下

输入单词：KayaK

皮划艇是回文。

```
 // palindrome.c
    #include <stdio.h>
    #include <string.h>
    #include <ctype.h>
    #define MAXLEN 20

    int isPalindrome(char [], int);

    int main(void) {
    char word[MAXLEN+1];
    int size;

    printf("Enter word: ");
    fgets(word,MAXLEN+1,stdin);
    size = strlen(word);
    if (isPalindrome(word, size-1)) //size - 1 because strlen includes \0
   {
    printf("%s is a palindrome.\n",word);
   }
   else
   {
    printf("%s is not a palindrome.\n",word);
   }
   return 0;
   }

 int isPalindrome(char str[], int size) {
int i;
for (i = 0; i < size; i++)
{
    if (tolower(str[i]) != tolower(str[size - i - 1]))
    {
        return 0;
    }
}
return 1;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T12:56:31.940

`fgets`读取字符串，包括终止换行符。在进一步处理之前将其剥离。

请注意，您实际上在传递时考虑到了这一点`size-1`，但是出于错误的原因。它包括`\n`，不`\0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:58:03.583

您的代码掩盖了包含行尾标记的原始字符串的问题：

这条线切断了尾随的零

```
if (isPalindrome(word, size-1)) //size - 1 because strlen includes \0 
```

顺便说一句，评论是错误的：`strlen`不包括`\0`，它包括`\n`。

`\n`由于再次`size - i - 1`减去，这一行忽略了尾随`1`，即使您在第一次调用函数时已经减去了它：

```
if (tolower(str[i]) != tolower(str[size - i - 1])) 
```

你应该做这个：

```
size--;
word[size] = '\0';
if (isPalindrome(word, size-1)) //size - 1 because strlen includes \0 
```

现在您可以按如下方式更正您的回文检查器：

```
if (tolower(str[i]) != tolower(str[size - i])) // No "minus one"
{
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:00:57.770

剥离它意味着将其从字符串中删除。

```
//...
printf("Enter word: ");
fgets(word,MAXLEN+1,stdin);
size = strlen(word);
word[size-1] = '\0'
//program 
```

# c# - Handling 2, 3, 4, 5 Fingers Tapped, DoubleTap & Holding Gestures in WinRT App

> ID：13011920
> 
> 赞同：9
> 
> 时间：2012-10-22T12:55:06.870
> 
> 标签：c#, .net, vb.net, windows-runtime

I can easily handle 1 finger `Tapped`, `DoubleTap` and `Holding` gestures like this:

```
public MainPage()
{
    this.InitializeComponent();
    this.Tapped += mc_Tapped;
    this.DoubleTapped += mc_DoubleTapped;
    this.Holding += mc_Holding;
}
public void mc_Tapped(object sender, TappedRoutedEventArgs e)
{
    //Tap
}
public void mc_DoubleTapped(object sender, DoubleTappedRoutedEventArgs e)
{
    //DoubleTap
}
public void mc_Holding(object sender, HoldingRoutedEventArgs e)
{
    //Hold
} 
```

But the events don't have a property to get the number of fingers and they don't even get fired when more than 1 touch contact is present on the screen. I also want to handle 2, 3, 4, 5 fingers `Tapped`, `DoubleTap` and `Holding` gestures. Can anyone tell me how to do that?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:50:08.757

您必须使用在 Pointer 事件（即按下、输入、释放等）上传递的 PointerRoutedEventArgs 并以艰难的方式完成

每次指针进入控件时都会分配一个唯一的指针 ID。我会创建一个字典，并在控件上按下时将每个指针添加到该字典（并且在它们退出时显然将它们删除）。然后在您现有的点击、双击和此类处理程序中，只需检查字典中有多少指针并调用适当的处理程序

# android - Make Errors - NDK Build (ipcamera)

> ID：13011924
> 
> 赞同：0
> 
> 时间：2012-10-22T12:55:21.817
> 
> 标签：android, makefile, ip-camera

I followed [these steps](https://stackoverflow.com/questions/9002471/building-ndk-applications-ipcamera) and get

*** No rule to make target '/jni/talk/base/time.cc', needed by `/obj/local/armeabi/objs/teaonly/talk/base/time.o'. Stop. ***

I'm on 64bit Win7\. Is there a missing make file with rev 207 of the libjingle?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:13:13.937

我得到了编译和运行的代码。问题是最近的版本中缺少一些资源。然后你必须编辑几个点才能让它使用前置摄像头。

设备托管的网站上的 flowplayer 不会播放流。VLC 将播放它。

大约有 10 分钟的延迟 11 秒，然后延迟 3 秒。不会为我想做的事情工作。感谢juned的提示。

# web-services - Web service servlet context is null

> ID：13011926
> 
> 赞同：1
> 
> 时间：2012-10-22T12:55:25.357
> 
> 标签：web-services, jakarta-ee, soap

I am developing a stand alone web service, which doesn't need to be running inside a web container.

It looks very similar to this:

[http://weblogs.java.net/blog/ramapulavarthi/archive/2006/06/maintaining_ses.html](http://weblogs.java.net/blog/ramapulavarthi/archive/2006/06/maintaining_ses.html)

I also found the following:

[How can I access the ServletContext from within a JAX-WS web service?](https://stackoverflow.com/questions/261348/how-can-i-access-the-servletcontext-from-within-a-jax-ws-web-service)

I enabled the session management from the client with this:

```
((BindingProvider) webInterface).getRequestContext().put(BindingProvider.SESSION_MAINTAIN_PROPERTY, true); 
```

on the server side, I was able to get the message context:

```
MessageContext mc = wsContext.getMessageContext(); 
```

But when I trying to get:

```
Object c = mc.get(MessageContext.SERVLET_REQUEST); 
```

The object `c` is always `null`.

# c# - 通过 C++“加载器”加载 C# 应用程序？

> ID：13011928
> 
> 赞同：2
> 
> 时间：2012-10-22T12:55:33.983
> 
> 标签：c#, c++

是否可以在 C++ 中编写一个应该加载 C# 应用程序的小型“加载器”？

这样做的目的是使在 Reflector 中无法看到代码。

检查以下应用程序。该应用程序是用 C# 编写的，但不知何故已经构建了一个加载器，因此无法在 Reflector 中看到实际的源代码。

```
https://www.dropbox.com/sh/b0enylff5wptd7s/Ingphu4bXK/AccountMaster.0mmo.net.rar 
```

编辑：我不确定应用程序是否可以安全运行！

但是非常有趣的是，当您尝试将其放入 Reflector 时会发生什么！

当我看到它时，我认为这可能是一种让“新手”饼干远离的聪明方法。为 C# 应用程序增加更多安全性的好方法。这就是为什么我想知道这是怎么做到的:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:20:21.150

是的，您可以从 C++（或任何其他语言应用程序）启动 C# 应用程序。只需从您的 C++ 应用程序启动一个单独的进程。有很多方法可以做到这一点。我建议在您最喜欢的搜索引擎中搜索“创建流程”。

这是关于堆栈溢出的[另一篇文章。](https://stackoverflow.com/questions/42531/how-do-i-call-createprocess-in-c-to-launch-a-windows-executable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:37:50.507

C++ 前端将无济于事，您所要做的就是加载与该前端加载器加载的相同的东西。几乎唯一要做的就是使用混淆器。VS 附带了一个名为 dotfuscator community edition 的软件，可以帮助您入门。

# android - Android fragments overlaps after rotation

> ID：13011929
> 
> 赞同：-1
> 
> 时间：2012-10-22T12:55:35.373
> 
> 标签：android

I am working with fragments. I am using two fragments and its working fine in some cases. After rotation of the device overlapping of fragments data take place in some cases.

However I have tried to save the state of fragments and all. But its not working.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:03:16.407

在您的片段交易中使用 .replace() 。它通常可以解决 90% 的重叠片段。

# asp.net-mvc - 强类型视图：未列出模型类

> ID：13011937
> 
> 赞同：1
> 
> 时间：2012-10-22T12:55:55.217
> 
> 标签：asp.net-mvc

我正在尝试从模型类创建强类型视图`N1Process`。在尝试添加 View 之前，我确实编译了解决方案。但是在添加视图向导中找不到这个 N1Process 模型。

![在此处输入图像描述](../Images/63b53d70e88eb287275b95a498cbb937.png)

```
namespace GetPathOfRunningProcess.Models
{
    public class N1Process
    {
        public string Name { get; set; }
        public string Path { get; set; }
    }
} 
```

它是否必须与已定义`GetPathOfRunningProcess.Models`的名称空间做任何事情？`N1Process`

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:29:49.330

您可以在向导中输入路径或仅添加

```
@model N1Process 
```

到您的视图文件的顶部。

（您可能需要 @model 语句中的完全限定名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T08:31:06.200

构建您的应用程序并显示模型

# objective-c - 可达性误报问题

> ID：13011938
> 
> 赞同：2
> 
> 时间：2012-10-22T12:56:00.527
> 
> 标签：objective-c, reachability

我正在尝试从 AppDelegate 中的 A 类执行选择器。

我设置了一个警报，提示用户在购买应用程序后不久立即下载所有内容并缓存它们以供以后阅读。

我在 A 类中有确切的东西，它工作得非常好。

现在，当我在首次启动时尝试执行此操作时，可达性显示我处于离线状态，而我实际上在线。

内容只能通过 WiFi 下载，不能通过 3G 下载（数据计划保存），但是，即使我在自己的 WiFi 网络中，它也会说我离线。

我在 App Delegate 中使用以下代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{   
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if (![defaults objectForKey:@"mainLaunch"]){
    [self performSelector:@selector(askForDownloadContentsAtFirstStart) withObject:nil afterDelay:0.5];
    [defaults setObject:[NSDate date] forKey:@"mainLaunch"];

    //...
    }

-(void)askForDownloadContentsAtFirstStart{
    UIAlertView *alert = [[[UIAlertView alloc] initWithTitle:@"Download contents" message:@"blahblahblah" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes", nil]autorelease];
    [alert show];
}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
    if (buttonIndex == 0){
        [alertView dismissWithClickedButtonIndex:0 animated:YES];
    }else{
        aVc = [[AViewController alloc]init];
        [aVc performSelector:@selector(offlineDownload:)];
    }
} 
```

在我的 aVc 中有以下一个：

```
- (void)viewWillAppear:(BOOL)animated
{
    internetReachable = [[Reachability reachabilityForInternetConnection] retain];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(offlineDownload:)
                                                 name:kReachabilityChangedNotification object:nil];
}

    - (IBAction)offlineDownload:(id)sender{
        UIAlertView *alert = [[[UIAlertView alloc] initWithTitle:@"Warning!" message:@"Blahblahblah" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes", nil]autorelease];
        [alert show];
    }

    -(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
        if (buttonIndex == 0){
            [alertView dismissWithClickedButtonIndex:0 animated:YES];
        }
        else{
            NetworkStatus internetStatus = [internetReachable currentReachabilityStatus];
            switch (internetStatus) {
                case NotReachable:
                {
                   NSLog(@"Offline");
                }
                case (ReachableViaWWAN):
                {
                    NSLog(@"3G");
                }
                case (ReachableViaWiFi):{
                    HUD = [[MBProgressHUD showHUDAddedTo:key_Window animated:YES]retain];
                    HUD.delegate = self;
                    HUD.dimBackground = YES;
                    HUD.labelText = NSLocalizedString(@"Connecting",@"Connecting...");
                    NSURL *URL = [NSURL URLWithString:NSLocalizedString(@"plistUrl",@"")];
                    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:URL];
                    [request addValue:@"" forHTTPHeaderField:@"Accept-Encoding"];
                    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
                    [connection start];
                    [connection release];
                    break;
                }

                default:
                    break;
            }

        }
    } 
```

这个问题再次发生，但我通过保留 internetReachable 解决了它。现在看来，这行不通！

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T01:34:03.223

`kReachabilityChangedNotification`您可以像这样为通知添加观察者：

```
[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(reachabilityChanged:) name: kReachabilityChangedNotification object: nil]; 
```

然后启动通知器：

```
[[Reachability reachabilityForLocalWiFi] startNotifier]; 
```

在您的通知侦听器中，您可以测试 wifi 是否可用：

```
- (void) reachabilityChanged: (NSNotification* )note
{
    Reachability* curReach = [note object];
    NetworkStatus netStatus = [curReach currentReachabilityStatus];
    if(netStatus == ReachableViaWiFi) {
        // wifi available
        [self askForDownloadContentsAtFirstStart];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:29:06.093

我不认为应用程序启动后可达性就保证是正确的。我们的解决方案是监控通知，等到它报告连接成功，然后从那里处理事情。

*我们的应用程序还在internetReachable*上调用*startNotifier*，然后在*-(void)reachabilityChanged:(NSNotification* )theNotification* 回调中注意可达性。我们在管理器类中执行此操作，然后我们可以检查当前的可达性，并且当可达性发生变化时，它还可以向应用程序的其余部分（如果需要）发送通知。

# android - 安卓中的全局定时器

> ID：13011939
> 
> 赞同：2
> 
> 时间：2012-10-22T12:56:00.660
> 
> 标签：android, timer

我想制作一个计时器，它将显示在我的应用程序的每个活动中。

我知道如何在下面的活动上制作计时器是我的代码

```
public class Timer extends Activity implements OnClickListener {
    public TextView mTextField;
    private Button btnstart;

    public String formatTime(long millis) { 
        String output = "00:00"; 
        long seconds = millis / 1000; 
        long minutes = seconds / 60; 

        seconds = seconds % 60; 
        minutes = minutes % 60; 

        String secondsD = String.valueOf(seconds); 
        String minutesD = String.valueOf(minutes); 

        if (seconds < 10) 
            secondsD = "0" + seconds; 
        if (minutes < 10) 
            minutesD = "0" + minutes; 

        output = minutesD + " : " + secondsD; 
        return output; 
    } 
    public CountDownTimer Counter1;

    @Override 
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.main); 

        //Declare Start/Stop button 
        btnstart = (Button)findViewById(R.id.btnThread1); 
        btnstart.setOnClickListener(this);
        //Button btnstop = (Button)findViewById(R.id.button02); 
        //Button btnpass = (Button)findViewById(R.id.button03);

        //Declare Text fields to show time left 
        final TextView mCounter1TextField=(TextView)findViewById(R.id.txtThread1); 
        final TextView mCounter2TextField = (TextView)findViewById(R.id.txtThread2); 
        //final TextView mCounter3TextField=(TextView)findViewById(R.id.textView03); 

        //Counter 1 
        Counter1 = new CountDownTimer(120000 , 1000) { 
            public void onTick(long millisUntilFinished) { 
                mCounter1TextField.setText("Seconds left: " + formatTime(millisUntilFinished)); 
            } 

            public void onFinish() { 
                mCounter1TextField.setText("Finished!"); 
                // Counter1.start();
            } 
        }; 
    }

    @Override
    public void onClick(View v) {
        if(v == btnstart)
        {
            Counter1.start();
        }

    }
} 
```

我想知道如何让它全球化？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:02:52.463

你可以有一个单身班级持有你的`CountDownTimer`

```
// This is not a real singleton, Google to get a proper Java implementation
public class TimerSingleton {

  // Should not be public, you should of course encapsulate access to that timer.
  // static keyword says that one timer object is shared by all instance of TimerSingleton 
  public static CountDownTimer timer = new CountDownTimer();
}

// Access to the timer from an activity:
TimerSingleton.timer.start(); 
```

第二种选择是将您的计时器作为自定义应用程序类的成员：[将应用程序类用于全局变量](https://stackoverflow.com/questions/1984648/use-application-class-for-global-variables)

第三个选项：创建一个在启动时启动计时器的本地服务。

请记住，在选项 1 和 2 的情况下，如果操作系统决定杀死您的应用程序，计时器将消失（即，当重新创建活动时，CountDownTimer 对象将被重置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:02:07.717

创建一个单例！[http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

单例保证只会有一个对象，并使任何其他对象都可以轻松访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T13:30:08.723

如果您想在应用程序的每个活动中显示它，那么我建议您使用[Fragments](http://developer.android.com/guide/components/fragments.html)。您需要做的就是使用您的 Timer 类创建一个每次都会出现的 Fragment，另一个带有您要显示的其他内容的 Fragment，并仅操纵第二个 Fragment 的生命周期。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T08:42:26.773

我通过在一个活动中创建一个计时器并在我的另一个活动中调用它的受保护函数来解决我的问题。

这是启动定时器的 startTimer 函数：

```
private void startTimer(){ 
    if (mTimer == null) { 
        mTimer = new Timer(); 
    } 
    if (mTimerTask == null) { 
        mTimerTask = new TimerTask() { 
            @Override 
            public void run() { 
                Log.i(TAG, "count: "+String.valueOf(count)); 
                sendMessage(UPDATE_TEXTVIEW); 

                do { 
                    try { 
                        Log.i(TAG, "sleep(1000)..."); 
                        Thread.sleep(1000); 
                    } catch (InterruptedException e) { 
                    }    
                } while (isPause);  
                count ++;   
            } 
        }; 
    } 
    if(mTimer != null && mTimerTask != null ) 
        mTimer.schedule(mTimerTask, delay, period); 
} 
```

这是任何其他活动都可以使用的公共功能：

```
public String valueOfTimer()
{
    return String.valueOf(count);
} 
```

这就是我在其他活动中获得价值的方式：

```
private void updateTime()
{
    TimerActivity tm  = new TimerActivity();

    String time = tm.valueOfTimer();
    t2.setText(time);
    System.out.println("Time::"+time);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-09T05:37:02.440

创建一个单例类并在您的 ui 中注册侦听器。

```
 mTimerCustom = CountdownTimer.getInstance();
 mTimerCustom.registerListener(this);
 mTimerCustom.start(); 
```

在 CountDownTimer 类中

```
 public static CountdownTimer getInstance()
    {
        return INSTANCE;
    }

 public synchronized void start() {

        Calendar cal=Calendar.getInstance();
        int seconds=cal.get(Calendar.SECOND);
       start=60-seconds;
        //Toast.makeText(mParentActivity,""+seconds,Toast.LENGTH_LONG).show();
        if (D) Log.d(TAG, "start");
        switch (state) {
            case STOPPED:
                count = start;
            case PAUSED:
                timer = new Timer(TAG);
                timer.scheduleAtFixedRate(new TimerTask() {
                    @Override
                    public void run() {
                        if (count > 0) {
                            count--;
                            Log.d(TAG, "Tick: " + count);
                            for (TimerListener listener : listeners) {
                                listener.timerUpdate(count);
                            }
                        }
                        else stop();
                    }
                }, 0, DELAY);
                state = COUNTING;
                if (D) Log.d(TAG, "state: counting");
                break;
            case COUNTING:
                break;
            default:
                throw new IllegalStateException(state.toString());
        }
    } 
```

# javascript - 使 localStorage 或 sessionStorage 像 cookie 一样过期

> ID：13011944
> 
> 赞同：16
> 
> 时间：2012-10-22T12:56:17.047
> 
> 标签：javascript, html, local-storage

> **可能重复：**
> [HTML5 本地存储中的项目何时过期？](https://stackoverflow.com/questions/2326943/when-do-items-in-html5-local-storage-expire)

我的 Web 应用程序使用客户端存储（`sessionStorage`和`localStorage`）。但是，我希望这些数据在一段时间后（例如 2 天）过期。[使用cookie的](http://www.quirksmode.org/js/cookies.html)*过期日期*是一项超级简单的任务，但我不知道如何为 HTML5 存储设置过期日期。

任何想法如何解决这个问题？效率和简单性很重要。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-22T13:03:29.963

您可以做的最好的事情是在存储中设置一个时间戳，如果用户在指定的时间后访问您的站点，那么您可以删除存储的数据。

`sessionStorage`应该以相同的方式工作，除非它甚至没有持续足够长的时间以达到您的定时到期。在这种情况下，它会提前到期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:02:26.147

该`Storage`模型旨在成为脚本的缓存；不是一时兴起的数据持有者。一旦协议+域被导航离开，事实上`sessionStorage` **应该清除。**话虽如此，最简单的方法是在每个页面视图中存储和检查“保留直到”值，并根据需要更新/清除存储它

# javascript - the best way to insert an element in the right place

> ID：13011945
> 
> 赞同：3
> 
> 时间：2012-10-22T12:56:28.280
> 
> 标签：javascript, jquery, jquery-selectors

I am implementing a jquery function which is able to insert a div in the right place depending on the existing dom structure

The case of existing dom structure are the following

```
<!-- case 1 -->
<div class='container'>
   <div class='foo'></div>
   <div class='bar'>last bar</div>
   <div class='bar'>some bar</div>
   <div class='bar'>first bar</div>
</div>

<!-- case 2 -->
<div class='container'>
   <div class='bar'>last bar</div>
   <div class='bar'>some bar</div>
   <div class='bar'>first bar</div>
</div>

<!-- case 3 -->
<div class='container'>
</div> 
```

In every 3 cases, it should add a new `<div class='bar'></div>` inside container but before the first `<div class='bar'></div>`

here is the code which works for the case 1 and 2 but not for the 3.

```
var last_bar = $('<div>').addClass('bar').text('last bar');
$($('.container').find('.bar')[0]).prepend(last_bar)​; 
```

​</p>

Any hints how to make this code more general?

here is the demo [http://jsfiddle.net/3wFda/](http://jsfiddle.net/3wFda/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:09:28.920

这只是我，但我喜欢用这样的新函数包装东西......

```
$.fn.addBar = function() {
    $(this).each(function() {
        var $last_bar = $('<div>').addClass('bar').text('last bar');
        if ($(this).find(".bar").length == 0) {
            $(this).append($last_bar);
        } else {
            $(this).find('.bar:first').prepend($last_bar); 
        }
    });
}; 
```

然后你就这样称呼它...

```
​$(".container").addBar();​​​​​ 
```

这是一个更新的 jsfiddle [http://jsfiddle.net/3wFda/2/](http://jsfiddle.net/3wFda/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:03:34.037

尝试这个：

```
var last_bar = $('<div>').addClass('bar').text('last bar');
$($('.container').find('.bar')[0] || $('.container')).prepend(last_bar);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:02:32.460

你可以这样做，

```
var last_bar = $('<div>').addClass('bar').text('last bar');
$('.container .bar:eq(0), .container:empty').prepend(last_bar);​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T12:59:38.170

```
$('.container').find('.bar:first').prepend(...) 
```

**编辑**您的案例 3 需要一些额外的工作。

```
var $c = $('.container');
if($c.contains('.bar').length) {
    $c.find('.bar:first').prepend(...)
} else {
    $c.append(...)
} 
```

# java - 我可以使用 PKCS#11 在 HSM 中创建签名吗？

> ID：13011949
> 
> 赞同：2
> 
> 时间：2012-10-22T12:56:35.840
> 
> 标签：java, pkcs#11, xades4j

我可以将 XAdES4J 配置为使用 PKCS#11 基础架构**将签名创建委托**给硬件安全模块 (HSM) 吗？如果是 - 如何？

这些网站上的信息让我假设，只有使用 PKCS#11 的密钥传输是可能的：

*   [https://code.google.com/p/xades4j/wiki/DefiningKeyingData](https://code.google.com/p/xades4j/wiki/DefiningKeyingData)（术语键控数据，-provider）
*   [http://code.google.com/p/xades4j/wiki/QeA（onur](http://code.google.com/p/xades4j/wiki/QeA)的讨论）
*   [http://xades4j.googlecode.com/svn/release/1.3.0/javadoc/reference/xades4j/providers/impl/KeyStoreKeyingDataProvider.html](http://xades4j.googlecode.com/svn/release/1.3.0/javadoc/reference/xades4j/providers/impl/KeyStoreKeyingDataProvider.html)（第 3 步：“返回条目的私钥”）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T20:50:18.347

如前所述，您可以通过使用 PKCS11KeyingDataProvider 来使用 PKCS#11 键控数据。您只需使用 HSM 的本机 PKCS#11 库对其进行配置。

该`PrivateKey`接口只是用于不透明键表示的标记接口。当您使用 PKCS#11 提供程序时，返回`PrivateKey`的实例只是密钥的句柄（代表），因为密钥材料实际上并没有离开 HSM。将使用延迟的提供者选择来选择签名引擎`PrivateKey`，这取决于提供者，因为该提供者知道如何处理特定`PrivateKey`的 . 在这种情况下，密钥和签名值的计算都完全由 HSM 处理。

XAdES4j`PKCS11KeyingDataProvider`只是`KeyStore`从特定 PKCS#11 提供程序实例创建的 Java 包装器，该提供程序实例配置有提供的本机库路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:06:57.627

简单的浏览将我带到：

[https://code.google.com/p/xades4j/wiki/DefiningKeyingData](https://code.google.com/p/xades4j/wiki/DefiningKeyingData)

那里有一个关于 PKCS#11 的部分。这对你不起作用吗？

# java - 条件 Bean 验证

> ID：13011955
> 
> 赞同：0
> 
> 时间：2012-10-22T12:56:59.163
> 
> 标签：java, jsf, bean-validation

我在我的 JSF 项目中使用 Bean Validation。现在我遇到了一种情况，我想仅在验证前面的方法时才验证方法。

我举个例子：

```
@AssertTrue(message="{invalidCode}")
private boolean isValidActivationCode() { ... }

if(isValidActivationCode()) {
    @AssertTrue(message="{alreadyActivated}")
    private boolean isAlreadyActivated() { ... }
} 
```

由于我将收到每个参数的激活码，我想先验证它。如果无效，则会导致违规。如果是这样，我什至无法检查它是否已经激活（因为代码无效）。那么，是否有可能实现上面提到的任何事情（if 语句的功能，我知道这是行不通的，但它显示了我想要完成的事情）。

提前致谢

**更新**

Ravi K 提到的解决方法：

```
@AssertTrue(message="{invalidCode}")
private boolean isValidActivationCode() { ... }

@AssertTrue(message="{alreadyActivated}")
private boolean isAlreadyActivated() { return isValidActivationCode() ? ... : true; } 
```

虽然我想知道，有没有一种干净的方法来解决这个问题？如果没有人很快提供答案，我会假设没有干净的解决方案，我会接受 Ravi K 的解决方法作为这个问题的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:50:40.437

正如您所说，如果您觉得解决方法不好，那么有两种选择。

1）使用与上述相同的解决方法，但使其更合乎逻辑。将 isAlreadyActivated() 的返回类型更改为布尔值而不是布尔值。在 isAlreadyActivated() 方法中，如果 isValidActivationCode() 为 false，则返回 null。

[http://docs.oracle.com/javaee/6/api/index.html?javax/validation/constraints/package-summary.html](http://docs.oracle.com/javaee/6/api/index.html?javax/validation/constraints/package-summary.html)

根据上述 API，null 被认为是有效的。因此，您的逻辑变得更加清晰。true = 有效，false = 无效，null = 不适用。您也可以在 javadoc 中为该方法添加相同的内容。

```
 @AssertTrue(message="{invalidCode}")
    private boolean isValidActivationCode() { ... }

    @AssertTrue(message="{alreadyActivated}")
    private Boolean isAlreadyActivated() {

         if(isValidActivationCode()) {
               <Logic for isAlreadyActivated>
          } else {
             return null;
           }

    } 
```

2）去自定义约束。@AssertTrue 是内置的约束 & jsf 家伙知道他们还不够。所以他们有特权创造你自己的。所以去吧。请参阅下面的链接。

[http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html/validator-customconstraints.html](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html/validator-customconstraints.html)

[JSR 303 验证，如果一个字段等于“某物”，则这些其他字段不应为空](https://stackoverflow.com/questions/9284450/jsr-303-validation-if-one-field-equals-something-then-these-other-fields-sho)

我想这就是我们所得到的，选择是你的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:22:54.690

好吧，我无法深入了解 JSF 注释方面，但我很好奇你为什么不能简单地在 isAlreadyActivated() 中调用 isValidActivationCode() 也就是类似下面的内容，

```
@AssertTrue(message="{invalidCode}")
private boolean isValidActivationCode() { ... }

@AssertTrue(message="{alreadyActivated}")
private boolean isAlreadyActivated() {

     if(isValidActivationCode()) {
           <Logic for isAlreadyActivated>
      )

} 
```

# jquery - 用jquery一一显示li

> ID：13011957
> 
> 赞同：0
> 
> 时间：2012-10-22T12:57:01.863
> 
> 标签：jquery

我正在尝试构建一个旋转器，它会在每个 li 上遍历，并且延迟会一个一个地显示主题。我将以下 html 结构与 php 片段混合在一起

```
<div class="product_box">
<ul id=products>
<?php foreach ($products as $product):?>
    <li>
        <h3><?php echo $product->name ?></h3>
        <a class= "images" target ="_blank" title="<?php echo $product->name ?>" href ="<?php echo $product->link ?>" >
            <img alt="" src="/img/produkte/<?php echo $product->img ?>">
        </a>
        <a id="button" href = "<?php echo $product->link ?>" target="_blank">Info</a>

    </li>
<?php endforeach;?>
</ul>
</div> 
```

我开始构建看起来像的jquery

```
<script>

jQuery(document).ready(function($) {
    var totalImages = $("#products > li").length;
    setTimeout(function() {
         $('li:first').fadeIn().next() 
         }, 500);

    });

</script> 
```

问题是我真的不知道如何显示下一个 li 并隐藏上一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:05:58.803

您可以通过分离第一个列表项然后将其附加到末尾来轻松解决它。我在这里做了一个简单的例子：[Demo](http://jsfiddle.net/9KgTg/)

```
$(document).ready(function($) {
    setInterval(function() {
        var firstLi = $('#products li').first().detach(); // Remove the first element
        $('#products').append($(firstLi)); // Add it back to the end
    }, 500);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:07:29.103

这是一个工作小提琴：http: [//jsfiddle.net/ranjith19/RgKV9/7/](http://jsfiddle.net/ranjith19/RgKV9/7/)

```
jQuery(document).ready(function($) {
        var totalImages = $("#products > li").length;
        var i = 0
        function li_fader(){
            if (i==totalImages){
                return
            }
            elements = $("#products > li")
            $(elements).fadeOut()
            setTimeout(function() {
                ele = elements[i]
                $(ele).fadeIn()
                i = i + 1
                li_fader()
            }, 500);

        }
        li_fader()​;
    }) 
```

我使用了递归，但使用了全局变量。代码只是调用自身并根据 i 的值停止执行

# c# - '&' 字符中断查询字符串

> ID：13011966
> 
> 赞同：0
> 
> 时间：2012-10-22T12:57:30.190
> 
> 标签：c#, .net, query-string, special-characters

我有一个页面正在根据查询字符串的值执行一些操作。但是我最近注意到，当查询字符串包含“&”字符时，这会中断。

我知道我可以编写一些代码来翻译父页面上的“&”字符，但我必须相信有更好的方法来做到这一点。

这是一个示例：查询字符串：运动科学与体育研究这仅返回“运动科学”

这是我必须获取字符串的代码：

```
string selectedDept = Request.QueryString [ "dept" ]; 
```

我不希望对 URL 进行加密，因为这些页面有时会直接链接到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T13:01:19.083

您不需要加密，您需要在生成 Url 之前对字符串进行编码。

如果您使用的是 MVC，则可以使用：

```
var url = "dept=" + Url.Encode(strDept); 
```

否则，您还可以使用：

```
var url = "dept=" + HttpUtility.UrlEncode(strDept); 
```

**更新**：

不幸的是，这将生成一个丑陋的 URL：

```
dept=Exercise%20Science%20%26%20Sports%20Studies 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:59:44.840

与号( `&`) 字符被*定义*为分隔请求参数，因此除了对其进行编码之外，没有其他方法可以将其放入此类参数中。

您不需要*加密*参数，只需对其*进行编码*。这种情况的常见编码是所谓的[URL 编码](http://de.wikipedia.org/wiki/URL-Encoding)。这种编码的好处是正常的字母和数字保持原样。只有特殊字符用百分号序列编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T13:01:50.190

是的，该`&`字符会破坏查询字符串。它用作分隔参数的元字符。如果需要`&`在查询参数中包含字符，则必须将其编码为`%26`. 在 ASP.Net 上，您可以使用在页面范围内`HttpUtility.UrlEncode`的对象上调用的方法来执行此操作。`Server`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T13:00:04.780

您应该对参数进行编码，例如： HttpUtility.UrlEncode(myUrl);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T13:00:24.763

和号用于分隔参数。

您需要对参数进行 URL 编码。它们应该在 Request.QueryString 中自动为您解码。

# asp.net-mvc - 使用 SpecFlow 进行验收测试 MVC4 网站

> ID：13011972
> 
> 赞同：1
> 
> 时间：2012-10-22T12:57:50.520
> 
> 标签：asp.net-mvc, c#-4.0, bdd, specflow, gherkin

我想用 SpecFlow (Gherkin) 编写验收测试来验证不同的场景。特别是我想验证使用持久 cookie 和会话状态的登录过程。

我对服务做了类似的事情，我在服务主机中以编程方式启动了测试所需的每个服务。这使我能够在服务实例化之前操纵 IoC 容器。

我想要我的 MVC 控制器有类似的东西。有没有人对 MVC 4 中的这种测试有任何经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:16:44.990

查看[Selenium WebDriver](http://seleniumhq.org/docs/03_webdriver.html)

[这是Chrome 驱动程序](http://code.google.com/p/selenium/wiki/ChromeDriver)的示例：

```
using OpenQA.Selenium;
using OpenQA.Selenium.Chrome;
using NUnit.Framework;

namespace Tests.UI
{
    [TestFixture]
    public class TestGoogleSearch
    {
        IWebDriver _driver;

        [SetUp]
        public void Setup()
        {
                                       //path to chrome driver exe
            _driver = new ChromeDriver(@"C:\MyProject\lib\");
        }

        [TearDown]
        public void Teardown()
        {
            _driver.Quit();
        }

        [Test]
        public void TestSearchGoogleForTheAutomatedTester()
        {          
            //Given

            //When
            _driver.Navigate().GoToUrl("http://www.google.com");
            IWebElement queryBox = _driver.FindElement(By.Name("q"));
            queryBox.SendKeys("stack overflow");
            queryBox.SendKeys(Keys.ArrowDown);
            queryBox.Submit();

            //Then
            Assert.True(_driver.Title.Contains("stack overflow"));
        }
    }
} 
```

# jsf - jsf页面代码生成

> ID：13011973
> 
> 赞同：0
> 
> 时间：2012-10-22T12:57:52.513
> 
> 标签：jsf, rad, ibm-jsf

我正在做一些 JSF 开发，我看到生成了一个名为 pagecode 的默认包。我的一位朋友建议我关闭自动页面代码生成。我只是想知道那个页面代码包的优点和缺点是什么，我应该关闭它还是让它打开

# c - 变量中的格式说明符？

> ID：13011977
> 
> 赞同：0
> 
> 时间：2012-10-22T12:58:00.043
> 
> 标签：c

我有这些变量：

```
char* name = "bobsux";    
int score = 100;
char* scoreHash = "f899139df5e1059396431415e770c6dd"; 
```

使用格式说明符和 printf 打印这些，返回：

```
printf("name=%s&score=%d&score_hash=%s", name, score, scoreHash);
=> name=bobsux&score=100&score_hash=f899139df5e1059396431415e770c6dd 
```

如何制作返回相同的变量？尝试失败：

```
char* scoreData = ("name=%s&score=%d&score_hash=%s", name, score, scoreHash);
=> f899139df5e1059396431415e770c6dd 
```

我希望变量类似于 printf 返回，以便我可以将 scoreData 发送到 Web 服务器：

```
curl_easy_setopt(curl, CURLOPT_POSTFIELDS, scoreData); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T12:58:54.187

您用于`snprintf()`将文本格式化为字符数组：

```
char scoreData[128];

snprintf(scoreData, sizeof scoreData, "name=%s&score=%d&score_hash=%s\n",
         name, score, scoreHash); 
```

# php - sql，返回和格式化所有数组数据的正确方法是什么？

> ID：13011982
> 
> 赞同：1
> 
> 时间：2012-10-22T12:58:09.490
> 
> 标签：php, mysql, sql, arrays, loops

我将不胜感激这方面的一些帮助。我已经实现了我想要的，但我不知道这是否是最好的方法。

第一次我查询了数据库。

```
mysql_select_db($database);
    $sql_many_sections =" 
    SELECT sections.subject, sections.section_number, sections.classroom, 
    sections.level_id, sections.course, sections.campus, sections.times, 
    sections.shift
    FROM sections
    LEFT JOIN section_teacher 
    ON sections.section_number = section_teacher.section_number
    LEFT JOIN profile 
    ON profile.teacher_number = section_teacher.teacher_number
    WHERE profile_id ='{$colname_teacher}'
    ORDER BY sections.section_number ASC";

    // bring out the results as an array so I can loop through them later                   
    $result = mysql_query($sql_many_sections);
    confirm_query($result);
    while ($teaching_sections = mysql_fetch_array($result)) {
      $teaches[] = $teaching_sections;
    } 
```

然后我 print_r 的结果是哪个。

```
Array
(
[0] => Array
    (
        [0] => English
        [subject] => English
        [1] => 32346
        [section_number] => 32346
        [2] => G635
        [classroom] => G635
        [3] => 2
        [level_id] => 2
        [4] => 236
        [course] => 236
        [5] => Male Science
        [campus] => Male Science
        [6] => 8 - 9:40 am, 10 - 11:40 am
        [times] => 8 - 9:40 am, 10 - 11:40 am
        [7] => AM
        [shift] => AM
    )

[1] => Array
    (
        [0] => English
        [subject] => English
        [1] => 49493
        [section_number] => 49493
        [2] => 1328
        [classroom] => 1328
        [3] => 2
        [level_id] => 2
        [4] => 236
        [course] => 236
        [5] => Male Humanities
        [campus] => Male Humanities
        [6] => 8 - 9:40 am, 10 - 11:40 am
        [times] => 8 - 9:40 am, 10 - 11:40 am
        [7] => AM
        [shift] => AM
    )

) 
```

当我现在想像这样返回这些数据时

```
•   Section: 32346
•   Subject: English
•   Classroom: G635
•   Level: 2
•   Course: 236
•   Campus: Male Science
•   Shift: AM
•   Shift times: 8 - 9:40 am, 10 - 11:40 am 
```

我可以让它工作的唯一方法是执行以下操作，这是一个意外。实现这些相同结果的正确方法是什么。谢谢

```
<?php 
foreach($teaches as $value)
{ ?>
<ul>
<li>Section: <? echo  $value[1];?></li> 
<li>Subject: <? echo $value[0];?></li> 
<li>Classroom: <? echo $value[2];?></li> 
<li>Level: <? echo $value[3];?></li> 
<li>Course: <? echo $value[4];?></li> 
<li>Campus: <? echo $value[5];?></li> 
<li>Shift: <? echo $value[7];?></li> 
<li>Shift times: <? echo $value[6];?></li> 
</ul>
<?
} 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:06:26.483

你可以这样使用：

```
foreach ($teaches as $teach) {
    echo '<ul>';
    foreach ($teach as $name => $value) {
        $name = str_replace('_', ' ', $name);
        $name = ucfirst($name);
        echo '<li>' . $name . ': ' . $value . '</li>';
    }
    echo '</ul>';
} 
```

显然我建议你使用`mysql_fetch_assoc()`这样你就可以只得到数组键而不是它的索引。

# c++ - 使用 COM 创建的对象会占用堆分配的内存还是堆栈分配的内存？

> ID：13011983
> 
> 赞同：1
> 
> 时间：2012-10-22T12:58:09.820
> 
> 标签：c++

在 C++ 中使用 COM（组件对象模型）创建的对象会占用堆分配的内存还是堆栈分配的内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:02:46.137

堆。对 COM API 的调用产生一个对象，API 为调用者提供一个句柄（这实际上对应于一个指针）。一旦对 COM API 的调用返回，堆栈分配就会使句柄引用已释放的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:31:27.723

实际上分配完全取决于组件。调用CoCreateInstance时，COM加载组件并调用其导出的DllGetClassObject函数得到一个IClassFactory实现来实例化类，然后调用IClassFactory::CreateInstance，这当然是由组件实现的。是的，在 C++ 中它将使用堆。但在 C# 或任何 .NET 语言中，它将使用垃圾收集堆（尽管 CCW（COM 可调用包装器）将使用本机堆）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:38:40.390

堆用于存储动态内存，因此从 DLL 请求的内存将被加载到堆中。但是，我相信对 DLL 中函数的调用仍将使用堆栈空间来执行。

# javascript - 为什么 IE 不使用 $(element).val(''); 取消选择选项？

> ID：13011984
> 
> 赞同：0
> 
> 时间：2012-10-22T12:58:13.483
> 
> 标签：javascript, jquery, internet-explorer

虽然其他浏览器看起来不错，但 IE7 对我的 10 行 javascript 并不友好。

所有（小）代码都可以在这里找到：http: **[//jsfiddle.net/7nGd9/](http://jsfiddle.net/7nGd9/)**

```
$(function() {
    $('#prepareSpecificProgressModal')
        .each(function(index, modal) {
            var
                modal = $(modal),
                form  = $('#myform');

            form.on('change', 'select', function(){
                 var node = $(this);
                    node
                        .closest('form')
                        .find('select').not(this)
                        .each(function(i, element){
                             element.selectedIndex = -1;
                        });
            });
        });
}); 
```

我`$(element).val('');`用来重置选项的选择，但它在 IE7 下不起作用。基本上它允许在 3 个选择中进行多项选择，即使有 JS 应该阻止它。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:07:39.670

尝试

```
.each(function(i, element) {
    element.selectedIndex = -1;
}) 
```

取消选择所有选项（[演示](http://jsfiddle.net/7nGd9/2/)）。`each`或者，您可以`.prop("selectedIndex", -1)`等效地使用而不是循环（也可以使用`.val('')`）。

顺便说一句，根据[文档`.val()`](http://api.jquery.com/val/)，您可以传递一个选项数组来选择（或`null`代替空数组）：

```
.val([]); 
```

（[演示](http://jsfiddle.net/7nGd9/4/)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T13:05:26.083

`select`您可以选择所有选项并将 更改为，`prop`而不是设置 的值`false`：

```
.find('select[id!='+node.attr('id')+'] option').prop('selected', false); 
```

[http://jsfiddle.net/9NPf5/](http://jsfiddle.net/9NPf5/)

..或两者兼而有之：

```
.find('select[id!='+node.attr('id')+'] option').prop('selected', false).parent().val(''); 
```

[http://jsfiddle.net/n3jCs/](http://jsfiddle.net/n3jCs/)

# tridion - CustommetakeyCriteria

> ID：13011992
> 
> 赞同：3
> 
> 时间：2012-10-22T12:58:32.690
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我们正在使用筛选条件从存储数据库 (SQL Server) 中检索值。

为了检索它们的 StartDate 和 EndDate 的各种事件组件库，我们编写了下面提到的代码。

```
ItemSchemaCriteria isEvent= new ItemSchemaCriteria(SchemaID);
Query query= new Query();

Criteria mainCriteria;
mainCriteria = CriteriaFactory.And(isEvent, isEvent);

DateTime lowerDate = DateTime.Now;
DateTime lower;
string lowerDateString=lowerDate.ToString("yyyy-MM-dd HH:mm:ss.000");
lower=Convert.ToDateTime(lowerDateString);

CustomMetaKeyCriteria dateKeyCriteria = new CustomMetaKeyCriteria("EventStartDate",Criteria.GreaterThanOrEqual);
CustomMetaValueCriteria dateValueCriteria = new CustomMetaValueCriteria(dateKeyCriteria,lower);
CustomMetaKeyCriteria dateEndKeyCriteria = new CustomMetaKeyCriteria("EventEndDate",Criteria.GreaterThanOrEqual);
CustomMetaValueCriteria dateEndValueCriteria = new CustomMetaValueCriteria(dateEndKeyCriteria,lowerDate);
Criteria OrCriteria=CriteriaFactory.Or(dateValueCriteria,dateEndValueCriteria);
mainCriteria = CriteriaFactory.And(mainCriteria,OrCriteria); 
```

当我们指定确切的日期和时间（2012-10-30 16:00:00.000）时，上面的代码会给我们一些记录。但是当我们尝试给出 Fromdate 和 ToDate（10 天跨度）时，即使我们在数据库中有一些记录，也不会返回任何记录。我们在指定 dateKeyCriteria 时是否犯了任何错误，它将返回指定 EventStartDate 和 EventEndDate 之间的所有事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T14:00:48.333

您应该知道构建查询的逻辑并不真正正确，但无论如何您还有另一个可以使用的选项（更优化）：CustomMetaDateRangeCriteria。您有一些构造函数允许您指定 beginRange、endRange、格式（如果您的日期不是 DateTime 格式），包括 beginDate/endDate。这是一个例子：

```
CustomMetaDateRangeCriteria dateRangeCriteria = new CustomMetaKeyCriteria("MyMetaDate", myStartDate, myEndDate, true); 
```

如果这个构造函数不适合你，你也可以尝试另一个构造函数：`CustomMetaDateRangeCriteria(string fieldName, string dateformat, string beginRange, string endRange, bool rangeIncluded).`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T08:06:33.707

如果它可以提供帮助，这里有一个关于如何使用 CustomMetaDateRangeCriteria 的完整工作示例，请注意 cbo 是一个列表，用户可以在其中选择格式为“YYYY”的年份。这将创建一个过滤器检索一整年的项目。

...

```
CustomMetaDateRangeCriteria yearCriteria = new CustomMetaDateRangeCriteria("publicationDate", GetFirstDateTimeInYear(cboYear.SelectedValue), GetLastDateTimeInYear(cboYear.SelectedValue)); 
```

...

```
 private DateTime GetFirstDateTimeInYear(string year)
    {
        return new DateTime(int.Parse(year), 1, 1);
    }

    private DateTime GetLastDateTimeInYear(string year)
    {
        return new DateTime(int.Parse(year) + 1, 1, 1).AddDays(-1);
    } 
```

# django - 从 Tastypie 获取所有 URL

> ID：13011996
> 
> 赞同：1
> 
> 时间：2012-10-22T12:58:52.173
> 
> 标签：django, tastypie

我正在将 Tastypie 与 Django 一起使用，并希望获取可通过 api 访问的所有 URL 的列表，是否有我可以调用的方法或 URL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T13:29:21.140

您是否尝试过仅查询 API 的根端点并从那里导航？

可能是这样的：

```
http://127.0.0.1:8000/api/v1/?format=json 
```