# StackOverflow 问答 12687000-12687999

# javascript - 如何在用户退出页面之前验证表单

> ID：12687000
> 
> 赞同：0
> 
> 时间：2012-10-02T08:38:29.923
> 
> 标签：javascript, forms, submit, verify

> **可能重复：**
> [检测用户何时离开网页的最佳方法](https://stackoverflow.com/questions/147636/best-way-to-detect-when-user-leaves-a-web-page)

我正在寻找一种功能，它可以确保在用户离开页面之前表单已经过验证。

实际上，我为必填字段添加了许多必填项，但没有什么可以确保表单将被验证。

在用户离开页面之前，是否有一种方法可以验证表单是否已提交？

其实我用`onclick='return confirm ("Do you really want to go out of the page ?")'`

但是没有什么可以验证表单是否已提交。

接受我最大的尊重。

亲切的问候。

SP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:43:25.250

为什么不在提交表单时返回一个值或设置一个隐藏字段，然后在用户离开时用JS检查这个值？这不会阻止用户只是关闭原因窗口，而是一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:10:27.593

```
There is onsubmit event on the form that accepts either true or false 

You can attach it to a function that return either true or flase

Example :

html form

  <form name="myForm" action="test.html" onsubmit="return validateForm()" method="post">
        name:

        <input type="text" name="fname" />

        <input type="submit" value="Submit" />
    </form>

Java Script Code

    <script type="text/javascript">

        function validateForm() {
            var x = document.forms["myForm"]["fname"].value;
            if (x == null || x == "") {
                alert("First name must be filled out");
                return false;
            }
            else {

                return true;
            }
        }
    </script>

if you leave the name empty : it will alert you

if not it will go to test.html

Hope this is helpful. 
```

# java - 使用 JavaFx GUI 联网的 Nullpointer 异常

> ID：12687001
> 
> 赞同：0
> 
> 时间：2012-10-02T08:38:36.597
> 
> 标签：java, networking, nullpointerexception, chat, javafx

对不起，我很难找到我应该怎么称呼它的标题。

所以这里是交易！我目前正在创建一个聊天应用程序，在其中使用我在 JavaFx 中创建的 Gui（一个带有一些图形的 Gui，但我认为这有点无关紧要）到目前为止我所做的是我已经设置了一个小每个客户端通过程序连接的服务器！主要思想是客户端向服务器发送一条消息，然后服务器将其发送给另一个客户端（这是聊天程序中的整个想法）一个重要的注意事项是我没有使用线程并且不希望然而！

所以要解决真正的问题：

我创建了一个包含连接、接收和发送方法的客户端类。我的 Connect 类与我的 Gui 配合得很好，我可以毫无问题地连接到服务器！

当我尝试发送到服务器或从服务器接收时，问题就开始了。无论我抛出多少异常或尝试 Catch 多少次，我都会收到空指针错误！我已经查看了大约 2 个小时的代码，试图找出问题所在，但没有运气！我的代码如下：

客户端类：

```
private PrintWriter pw;
/**
 * @param args
 * @throws IOException 
 */
public void connect() throws IOException{
    final int portNumber = 6040;

    // du kan vælge at bruge inetadressen til at connecte i socketet.
    InetAddress adr = InetAddress.getByName("localhost");
    Socket socket = new Socket("localhost", portNumber);
    pw = new PrintWriter(socket.getOutputStream());
    // outPut - Programmet sender til serveren

    pw.println("Connected waiting for input");
    pw.flush();
    //input - Serveren sender til programmet;
}
public void Send(String x) throws IOException{
    if (x != null) {
        pw.print(x);
        pw.flush(); 
    }else {
    System.out.println("ingen meddelse");
    }

}
public String getInformation(){

    Scanner informationFromServer = new Scanner(System.in);
    String x = informationFromServer.nextLine();
    if (x== null) {
        return "";
    }
    return x;
} 
```

我的 simpleController 代码（控制我的 GUI 的代码）：

```
public class SimpleController implements Initializable{

public Button btn_Connect;
private Client client;
public Label chatPerson3;
public Label chatPerson1;
public Label lbl_Chatperson1_userName;
public TextField txt_userName;
public TextField textField_chat;
public TextField txt_ChatPerson1;
public Button Send;
public TextField txt_ChatPerson2;
@Override
public void initialize(URL location, ResourceBundle resources) {
    // TODO Auto-generated method stub

    btn_Connect.setOnAction(new EventHandler<ActionEvent>() {   
        @Override
        public void handle(ActionEvent event) {

            chatPerson1.setVisible(true);
            lbl_Chatperson1_userName.setText(txt_userName.getText());
        }
    });

    Send.setOnAction(new EventHandler<ActionEvent>() {

        @Override
        public void handle(ActionEvent event) {

            String x = textField_chat.getText();
            textField_chat.setText("");
            txt_ChatPerson1.setVisible(true);
            txt_ChatPerson1.setText(x);

            System.out.println(x);
            try {
                client.Send(x);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    });

}} 
```

最后但并非最不重要的是我的主要内容：

```
public class Main extends Application{

public static void main(String[] args) throws IOException{
    Application.launch(Main.class, (java.lang.String[]) null);

}

@Override
public void start(Stage primaryStage) throws Exception {
    try {
        Client c = new Client();
        c.connect();
        AnchorPane page = (AnchorPane) FXMLLoader.load(Main.class.getResource("testingBackground.fxml"));
        Scene scene = new Scene(page);
        primaryStage.setScene(scene);
        primaryStage.setTitle("Chatten");
        primaryStage.show();

    } catch (Exception ex) {
        java.util.logging.Logger.getLogger(Main.class.getName()).log(
                java.util.logging.Level.SEVERE, null, ex);

    }

}

} 
```

当我尝试发送时遇到的异常当然是在我的 client.send() 方法中，如果我在发送之前尝试接收，那么它在 client.getInformation() 方法中。

我做错了什么？我错过了什么？

# javascript - 如果文件在本地打开，则滑块 JS 文件不起作用

> ID：12687002
> 
> 赞同：0
> 
> 时间：2012-10-02T08:38:39.547
> 
> 标签：javascript, html, internet-explorer-10

我已经编写了一些 JavaScript 代码并在 IIS 上使用它们，然后一切正常，但是当我在本地打开文件时出现问题。

我已经打开源代码并通过将页面打开为 view-source:xyz.html 来单独检查链接

并且所有链接都很好。我很惊讶为什么这不起作用。Firefox chrome 都出错并且 IE10 对我来说挂起（对此非常惊讶）。

有人知道为什么这段代码不起作用。

代码是

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript">
</script>

<script type="text/javascript">
    window.jQuery || document.write('<script src="js/vendor/jquery-1.8.0.min.js"><script>')
</script>

<script type="text/javascript" src="ui/js/jquery-ui-1.8.23.custom.min.js">
</script> 
```

这是因为 / 和 \ 链接到 js 文件的差异而发生的吗？

```
TypeError: $(...).slider is not a function 
```

如果我在 localhost 中检查文件，那么`jQuery.ui.tabs`它是一个函数，但对于我的本地文件，它是未定义的。

我不确定为什么没有加载该文件！[在此处输入图像描述][1]

请查看图片[http://i.stack.imgur.com/iLIJ0.png](http://i.stack.imgur.com/iLIJ0.png)

它在 localhost 中可以正常工作，但在本地文件中却不行。我检查了查看源代码，如果您在查看源代码时单击它们，它就可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:16:06.847

如果您使用的是本地文件，则用于打开 HTML 文档的方案将是`file://`

由于您使用方案相对 URI 来加载 jQuery...

```
<script src="//ajax... 
```

…您将尝试`file://`在 Google 的服务器上使用 jQuery 而不是`http://`或`https://`. 这不起作用，因为`file://`它适用于本地文件。

你有两个选择：

*   使用绝对 URI 进行开发。
*   使用本地 Web 服务器使您的开发环境更好地反映您的生产环境。

我推荐后一种选择。

# objective-c - 核心数据模型中的预定义名称错误

> ID：12687007
> 
> 赞同：0
> 
> 时间：2012-10-02T08:38:55.083
> 
> 标签：objective-c, json, mapping

我的核心数据模型有问题。在我的实体中，我有一个属性描述。但是当我想设置这个属性时，我得到了以下错误。为了没有收到此错误，我将其名称设置为 genk_description。

> 属性名称与 NSManagedObject 或 NSObject 实现的方法冲突

这个属性的名称应该是描述，因为我从一个以 JSON 格式返回数据的 web 方法获取我的数据。

所以我可能会做一些映射。但不知道我怎么能做到这一点。到目前为止，这就是我在代码中所做的。在这里，我定义了我的属性。

```
#define NEWS_DESCRIPTION @"genk_description" 
```

这里我还需要做一些映射，让 NEWS_DESCRIPTION @"genk_description" 变成 NEWS_DESCRIPTION @"description"

有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:20:46.677

您不能为属性命名`description`，因为它是[NSObject](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intf/NSObject)上的方法。与`NSObject`根对象一样，您不能将名称`description`用于 Objective-C 中的任何实例变量。

只是避免以这种方式命名它。

导入数据时，将从 Web 服务返回的“描述”值存储到核心数据对象中具有其他名称的变量中。

# iphone - 从我的 IOS 应用程序内的嵌入式 html 页面调用本机 (ios) 方法

> ID：12687009
> 
> 赞同：0
> 
> 时间：2012-10-02T08:39:00.200
> 
> 标签：iphone, objective-c, ios, ipad

> **可能重复：**
> [如何从 Javascript 调用 Objective-C？](https://stackoverflow.com/questions/1662473/how-to-call-objective-c-from-javascript)

一位朋友要求我为他制作一个非常简单的应用程序，该应用程序启动然后加载全屏 UIWebview 并显示应用程序内部的一些 html 页面。那里没问题。

他还让我调用一个 url 方案，这将启动另一个已经安装在设备上的应用程序。我之前已经完成了 url 方案来启动应用程序，这没问题。

我不明白的是如何让 html 在我的应用程序中调用方法。

总结一下：所以我的应用程序将具有本机代码，它将：

a) 显示一个 UIWebview，它将显示嵌入到应用程序中的 html 页面。b) 一种执行 URL 方案以启动另一个应用程序的方法。

问题：如何通过 html（html 按钮）页面调用我的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:59:46.583

几乎相同的问题，但您应该在此方法中连接您的方案请求。

[Stackoverflow - 通过单击 UIWebView 中的按钮调用方法](https://stackoverflow.com/questions/2363375/call-a-method-by-clicking-a-button-in-a-uiwebview)

如果您想更高级，可以使用：

[WebViewJavascriptBridge](https://github.com/marcuswestin/WebViewJavascriptBridge)

# django - 如何在 Django 网页中标记未填写的字段？

> ID：12687010
> 
> 赞同：0
> 
> 时间：2012-10-02T08:39:01.717
> 
> 标签：django, django-forms

在基于 django 框架的网页中填写详细信息时，如果用户忘记了任何字段，我想将该字段标记为红色圆圈，表示无法提交，因为圆圈字段为空。早些时候，我只是简单地将它指向错误 html 页面，该页面没有说明发生了什么确切错误。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:42:05.080

每个字段都有一个`field.errors`包含该字段错误的属性（它是一个可迭代的）。此外，表单本身有一个类似的`non_field_errors`属性，其中包含与特定字段无关的错误。

该[文档提供了](https://docs.djangoproject.com/en/dev/topics/forms/#customizing-the-form-template)有关如何指示哪些字段导致错误的示例。

[或者，您可以使用与bootstrap](http://twitter.github.com/bootstrap/)集成的帮助应用程序，例如[django crispy forms](https://github.com/maraujop/django-crispy-forms)。

# objective-c - 如何在 UITableView obj-c/ios/xcode 的底部添加工具栏

> ID：12687014
> 
> 赞同：5
> 
> 时间：2012-10-02T08:39:07.900
> 
> 标签：objective-c, ios, xcode, uitableview, toolbar

如何在表格视图底部以编程方式添加带有 uitextfield 的工具栏？喜欢聊天或短信应用程序..提前谢谢你..

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-11-15T16:56:57.913

我刚刚发现了一个更好的技巧！

1.  确保没有导航栏（来自您的失败尝试）
2.  拖放一个“Bar Button Item”（Xcode 会神奇地将它放置在底部）
3.  **注意**：如果您现在运行应用程序，您将看不到任何东西！（所以请继续阅读）
4.  在 viewDidLoad 下添加以下代码行：

> self.navigationController.toolbarHidden = NO;

完毕！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T09:23:00.887

使用 UIViewController 子类而不是 UITableViewController 子类。

它应该是这样的：

```
@interface ChatViewController : UIViewController
@end

#import "ChatViewController.h"

@interface ChatViewController()  <UITableViewDelegate, UITableViewDataSource, UITextFieldDelegate>
@property (nonatomic, strong) UITableView *tableView;
@property (nonatomic, strong) UIToolbar *toolbar;
@property (nonatomic, strong) UITextField *textField;
@end

@implementation ChatViewController

-(UITableView *)tableView
{
    if (!_tableView) {
        _tableView = [UITableView alloc] init];
        CGRect frame = self.view.bounds;
        frame.size.height = frame.size.height - 44;
        _tableView.frame = frame;
        _tableView.delegate = self;
        _tableView.dataSource = self;
    }
    return _tableView;
}

-(UIToolbar *)toolbar
{
    if (!_toolbar) {
        _toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0,self.tableView.frame.size.height,self.view.frame.size.width, 44)];
    self.textField = [[UITextField alloc] initWithFrame:CGRectMake(0,0,_toolbar.frame.size.width -20)];
    self.textField.delegate = self;
    UIBarButtonItem *textFieldItem = [[UIBarButtonItem alloc] initWithCustomView:self.textField];
    UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace
                                                                                   target:nil
                                                                                   action:nil];
    // You'll need to add a button to send you text
    _toolbar.items = [NSArray arrayWithObjects:flexibleSpace, textFieldItem, flexibleSpace, nil];
    }
    return _toolbar;
}

-(void)viewDidLoad
{
    [super viewDidLoad];
    [self.view addSubview:self.tableView];
    [self.view addSubview:self.toolbar];
    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(keyboardWillHideOrShow:) 
                                                 name:UIKeyboardWillHideNotification 
                                               object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(keyboardWillHideOrShow:) 
                                                 name:UIKeyboardWillShowNotification 
                                               object:nil];
}

- (void)viewDidUnload
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super viewDidUnload];
}

- (void)keyboardWillHideOrShow:(NSNotification *)note
{
    NSDictionary *userInfo = note.userInfo;
    NSTimeInterval duration = [[userInfo objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];
    UIViewAnimationCurve curve = [[userInfo objectForKey:UIKeyboardAnimationCurveUserInfoKey] intValue];

    CGRect keyboardFrame = [[userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];
    CGRect keyboardFrameForToolbar = [self.toolbar.superview convertRect:keyboardFrame fromView:nil];
    CGRect keyboardFrameForTableView = [self.tableView.superview convertRect:keyboardFrame fromView:nil];

    CGRect newToolbarFrame = self.toolbar.frame;
    newToolbarFrame.origin.y = keyboardFrameForToolbar.origin.y - newToolbarFrame.size.height;

    CGRect newTableViewFrame = self.tableView.frame;
    newTableViewFrame.size.height = keyboardFrameForTableView.origin.y - newToolbarFrame.size.height;

    [UIView animateWithDuration:duration 
                          delay:0 
                        options:UIViewAnimationOptionBeginFromCurrentState | curve 
                     animations:^{self.toolbar.frame = newToolbarFrame;
                         self.tableView.frame =newTableViewFrame;} 
                     completion:nil];  
} 
```

这将处理布局视图和动画键盘外观。您需要处理表视图和文本字段的委托和数据源方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T09:09:06.133

首先创建一个视图来容纳整个事物。然后添加一个 UITableview 和 UIToolbar 以编程方式设置框架，使其出现在 tableview 下。将文本字段添加到工具栏

```
 UIView *placeholderView=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 400, 440)];
    UITableView *tv=[[UITableView alloc]initWithFrame:CGRectMake(0, 0, 400, 400)];
    [placeholderView addSubview:tv];
    UIToolbar *toolBar=[[UIToolbar alloc]initWithFrame:CGRectMake(0, 400, 400, 40)];
    [placeholderView addSubview:toolBar]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-07T13:30:46.460

在某些方面它不是很好，但我通过在额外的视图控制器上使用容器视图解决了这个问题。

[![故事板截图](../Images/99b4586eca6beb06df8b2f13d4abcb5f.png)](https://i.stack.imgur.com/IiXy4.png)

Intermediate VC to Table VC segue 是“Embed”

我使用它而不是“导航控制器上的工具栏”解决方案，因为我将它添加到现有的具有约 15 个屏幕的应用程序设计中，并且我不确定如何在不同的屏幕上配置不同的工具栏。

# iphone - 在 NSUserDefaults 中保存最近的搜索

> ID：12687017
> 
> 赞同：0
> 
> 时间：2012-10-02T08:39:23.370
> 
> 标签：iphone, objective-c, ios

我有 UIViewController 有一个 UISearchBar 和 UITableView。表格视图用于显示最近的搜索。

我正在使用 NSUserDefaults 来保存搜索文本。

这是我正在做的事情：

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
    DLog(@"Search")
    NSString *searchText = [self.searchBar text];
    [self.recentSearchesDict setObject:searchText forKey:searchText];

    self.recentSearchesStrings = [[self.recentSearchesDict allValues] mutableCopy];

    [self saveRecentSearches];

    [self.recentSearchList reloadData];
} 
```

我将文本对象保存在 NSMutableDictionary 中，其中的文本与键相同，以避免表视图中出现重复条目​​。

和：

```
- (void)saveRecentSearches
{
    NSUserDefaults *currentDefaults = [NSUserDefaults standardUserDefaults];

    if (self.recentSearchesDict) {
        [currentDefaults setValue:self.recentSearchesDict forKey:@"recentSearchesArray"];
    }

} 
```

将 NSMutableDictionary 保存到 NSUserDefaults。

在 viewDidLoad 我这样称呼：

```
- (void)loadRecentSearches
{
    NSUserDefaults *currentDefaults = [NSUserDefaults standardUserDefaults];
    self.recentSearchesDict = [[currentDefaults objectForKey:@"recentSearchesArray"] mutableCopy];

    if (!self.recentSearchesDict) {
        self.recentSearchesStrings = [[NSMutableArray alloc] init];
        self.recentSearchesDict = [NSMutableDictionary dictionary];

        return;
    }

    self.recentSearchesStrings = [[self.recentSearchesDict allValues] mutableCopy];
} 
```

为了填充表视图，我使用了 NSMutableArray 对象recentSearchesStrings。

问题是当数组从字典中获取所有值时，它们的顺序不是最近的。

我希望最新的显示在列表顶部。

有什么帮助吗？还有其他更好的方法来完成所需的任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:00:07.890

如果要保留顺序，则不应使用字典来保存最近的搜索，因为字典中的键/值对没有定义顺序。

您应该将`recentSearchesStrings`数组本身存储在用户默认值中。要在删除重复项的同时将项目添加到数组中，您可以这样做

```
[self.recentSearchesStrings removeObject:searchText];
[self.recentSearchesStrings insertObject:searchText atIndex:0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:53:28.187

好吧，这`NSDictionary`是一个哈希映射，当您遍历键或值时，它不会保留顺序。保存时用于`NSArray`保持顺序`NSUserDefaults`。

删除重复项与序列化有序列表无关。分开你的顾虑。

# html - 合法的 HTML5 网站结构

> ID：12687018
> 
> 赞同：0
> 
> 时间：2012-10-02T08:39:25.650
> 
> 标签：html, tags

我正在尝试在以下结构中使用 html5 标签，我的问题是它是否是一种合法的方式，如果您检查下面的代码，我仍然有很多 DIV 容器，我需要用于设计和网格目的，但我仍然想实现至少一个section标签，将主页文本标记为文章。现在我在部分内嵌套 div，H1 标题在靠近地址栏的文章之外。你认为这是一种合法的方式吗？或者我真的需要将 h1 放在文章标签内并尽量避免在部分或文章部分内使用 div，它是否有任何负面的 SEO 效果，HTML5 及其错误使用是否可能会产生任何负面的 SEO 效果。

```
<header>
    <div>
        <div>link 1 | link 2</div>             
        <nav>Major header navigation: Link 1 | Link 2</nav>             
    </div>
</header>

<div>       

<div>
<div>           
    <div class="breadcrumbs"></div>         
    <h1>Most important title</h1>                                                                           
</div>
</div>

<div>

<nav>
    Major page navigation:
    <ul>
        <li>Link 1</li>
        <li>Link 2</li>
    </ul>
</nav>     

<div>

<article>
    <h2>title 1</h2>
    <p>main content</p>
    <h2>title 2</h2>
    <p>main content</p>
</article>

<aside>
    <h2>extras</h2>
</aside>

</div>
</div>  

</div>

<footer></footer> 
```

更新：我决定去掉部分并用 div 替换它。更新后的结构正在生成以下看起来更有希望的大纲： 1\. 最重要的标题 1\. 无标题的第 2 节。 无标题的第 3 节。 标题 1 4\. 标题 2 5\. 额外内容

标记为“无标题”的是我的资产净值，我不希望它们有任何标题，这是合法的吗？该文件仍然有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:42:22.223

您的标记创建以下大纲：

 1) 无标题（没有标题`body`）
   1.1) 无标题（第一个没有标题`nav`）
   1.2) 无标题（第二个没有标题`nav`）
   1.3) 你的（空）`section`标题
      1.3.1) 无标题（没有标题`nav`）
      1.3.2) 你的（空）`article`标题
      1.3.3）无标题（没有标题`aside`）

这可能不是你想要的。

你应该：

*   `body`在>中给出标题`header`（= 表示整个站点，例如您的站点名称）
*   删除前两个`nav`元素中的一个（链接可以在`nav`每个分段内容的同一元素中全部出现（但是`nav`，如果您有不同的导航，则可能有多个元素；取决于内容）
*   想一想，如果你找到一个合理的标题，`section`比如“我最近的博客文章”（你`article`会是这些最近的博客文章之一）（如果没有，你可能不应该在`section`这里使用）

请注意，第三个`nav`和`aside`都在`section`此处的范围内。这意味着此导航和辅助内容必须与`section`唯一（而不是整个页面）相关。

# sql - 来自替换的 RTRIM

> ID：12687020
> 
> 赞同：1
> 
> 时间：2012-10-02T08:39:31.327
> 
> 标签：sql, sql-server, string

我`@@@`在客户姓名后 使用了替换语句`MR@BOB@REED@@@@@@@@@@@@@@@@@@@@@@@`

我现在想摆脱`@`after `reed`。

我试过了：

```
select RTRIM(Name2,'@') 
```

但我得到了错误

> rtrim 函数需要 1 个参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:42:41.077

`RTRIM`删除尾随空格。

你可能想要`LEFT`或`SUBSTRING`

例如

```
select left('@mr@bob@reed@@@@@@@', charindex('@@','@mr@bob@reed@@@@@@@')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:32:38.910

```
select substring(Name2,0,charindex('@@',Name2)) from table 
```

在上面的查询中，“Name2”是列的名称，table 是包含该列的“表”的名称。

# ajax - JSON 嵌套表

> ID：12687021
> 
> 赞同：1
> 
> 时间：2012-10-02T08:39:32.777
> 
> 标签：ajax, json, getjson

如何使用 ajax 读取嵌套的 json？

在 sql 请求之后，我有一个由 php 格式化的 json，如下所示：

```
[
 {
 "owner_info":
     {
     "name":"John",
     "address":"4",
     "date":"10/01/2012"
     }
  },
  {
  "telephone":    
      [
          {
             "id":"1",
             "place":"5",
             "number":"+123456"
          },
          {
             "id":"2",
             "place":"5",
             "number":"+789456"
          },
          {
             "id":"3",
             "place":"8",
             "number":"+0011223"
          },
      ]
   }
] 
```

阿贾克斯做经典

```
$.getJSON(script, function (result) {
    $(result).each(function(i){     
        // do something with result     
    });
}); 
```

我试过了 ：

```
result[i].owner_info.name -> error
result[i].telephone[0].id -> error 
```

我一直在互联网上搜索，但找不到任何解决方案...

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:45:14.413

您使用了错误的`each`方法。`$(selector).each()`不一样`$.each()`！

来自 jQuery 文档。

> 该`$.each()`函数与`$(selector).each()`用于独占地迭代 jQuery 对象的函数不同。该`$.each()` 函数可用于迭代任何集合，无论是映射（JavaScript 对象）还是数组。

使用正确`each`功能的解决方案。

```
$.getJSON(script, function (result) {
    $.each(result, function(key, value) {
        // either use
        console.log(value.owner_info.name);
        // or
        console.log(result[key].owner_info.name);
    });
}); 
```

# node.js - Node + mongo-native：如何在集合中查找和更新值？

> ID：12687027
> 
> 赞同：1
> 
> 时间：2012-10-02T08:39:46.313
> 
> 标签：node.js, mongodb, collections, find

我有用户帐户，按时间到期。时间以毫秒为单位存储在 MongoDB 中。用户由_id 标识。这是架构：

```
{
    "_id": {
        "$oid": "506a1438be4f73c11c000002"
    },
    "email": "admin",
    "password": "admin",
    "first_name": "admin",
    "last_name": "admin",
    "country": "USA",
    "group": "admin",
    "expires": 1349129272918
} 
```

要将 +N 天添加到用户帐户，我使用 find() 然后 update() （不知道为什么，但 findAndUpdate 无法获取以前的值）：

```
app.post('/users/add', function(req,res){
    addDays(req.body.id, req.body.days, function(status){
        res.send(200);
    })
});

function addDays(id, days, callback) {
    var obj_id = BSON.ObjectID.createFromHexString(id);
    db.collection("users", function(error, collection) {
        collection.find({_id: obj_id}, function(err, user) {
            var oldexp = user.expires;
            if (oldexp < new Date().getTime() ) {
                var newexp = new Date().getTime() + (86400000*days);
            } else {
                var newexp = oldexp + (86400000*days);
            }
            collection.update({_id: obj_id}, {
                $set: {
                    "expires": parseInt(newexp)
                }
            }, function(err, result) {
                callback('ok');
            });
        });
    });
} 
```

为了启动更新天数功能，我在前端使用 JS：

```
 $(".addDays").live("click", function(){
    var that = $(this);
    var id = that.closest('.row').find('input[name=id]').val();
    alert(id);
    $.post('/users/add', {
        "id": id,
        "days": 10
      }, function(data){
          alert(data);
      });
  }); 
```

Var id 是字符串解码的 ObejctID（如“506a1438be4f73c11c000002”），对于每个用户，它都存储在最近的输入中（name="id"）。

**在我尝试添加天数后，即使我没问题，我的收藏也会损坏。有谁知道为什么？谢谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:44:07.437

既然你说你需要根据当前值是否大于“现在”来进行不同的更新，为什么不使用这两个更新来做：

```
now = new Date().getTime();
db.users.update({_id:obj_id, expires:{$gte:now}, {$inc:{expires:now+{86400000*days}})
db.users.update({_id:obj_id, expires:{$lt:now}, {$set:{expires:now+86400000*days}}) 
```

我认为这比你现在的逻辑更安全。

请注意，此处的更新顺序很重要，以确保两个语句中只有一个有效。

# asp.net - 动态创建元素的服务器控制事件处理

> ID：12687028
> 
> 赞同：3
> 
> 时间：2012-10-02T08:40:12.357
> 
> 标签：asp.net, gridview, servercontrols

我正在创建从 GridVew 继承的服务器控件。我有一些在控件内部动态创建的图像按钮，对于每个按钮我都有假设做某事的事件。一切看起来都不错，但从未触发该事件。这是我的代码的一部分：

```
//Class with dynamically created elements (custom grid pager)
public class GridPager
{
     public event CommandEventHandler PageNumberClick;

     //Element creation inside for scope
     for(....)
     {
        ImageButton img = new ImageButton();
        img.ImageAlign = ImageAlign.AbsMiddle;
        img.ID = "lnkLastPage" + i.ToString();
        img.CommandName = "Page";
        img.CommandArgument = ((totalPages - 1) * maxPageRows).ToString();
        imgBtn.Command += new CommandEventHandler(PageNumberClick);            
        tableCell.Controls.Add(img);
     }
}

public class MyGridControl : GridView  
{
    [Bindable(true)]
    [Category("Appearance")]
    [DefaultValue("")]
    [Localizable(true)]

    GridPager.PageNumberClick += new CommandEventHandler(lnkPage_Click);

    void lnkPage_Click(object sender, CommandEventArgs e)
    {
       PageIndex = Int32.Parse(e.CommandArgument.ToString());
       BindData();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:41:03.070

您需要重新创建动态控件`on every postback`- 请记住，每次回发都会创建一个新的页面类实例，因此您之前创建的任何动态控件都需要重新创建。

看[这篇文章](http://www.singingeels.com/Articles/Dynamically_Created_Controls_in_ASPNET.aspx)

[和这个](https://stackoverflow.com/questions/8323408/dynamically-loaded-web-user-control-hides-on-postback/8323504#8323504)

# json - REST JSON 响应中的本地化数据

> ID：12687031
> 
> 赞同：5
> 
> 时间：2012-10-02T08:40:35.557
> 
> 标签：json, rest

我们目前正在设计一个带有本地化数据的 REST 接口，并且想知道使用哪种方法来编码本地化数据。

我们提出的选项是

l10n 对象子

```
{"id": 1, 
 "l10n": {"en": {"title": "English title"}, 
          "fi": {"title": "Suomalainen otsikko"}} 
```

本地化属性

```
{"id": 1, 
 "title": {"en": "English title", 
           "fi": "Suomalainen otsikko"}} 
```

第一种编码更容易合并，但第二种方法例如与 JSON-LD 的本地化编码兼容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-06T12:39:11.713

我认为最好使用子目录，例如

`http://server/en/users`英语 `> http://server/ru/users`俄语

它比一直以不同的语言向用户提供信息要好

# php - 在 Zend Controllers 下重定向到 HTTPS

> ID：12687033
> 
> 赞同：1
> 
> 时间：2012-10-02T08:40:42.217
> 
> 标签：php, zend-framework

如果我使用某个控制器，我想将我的应用程序从 http 重定向到 https。我该怎么做？我真的不想要 .htaccess 重写，因为我使用了很多 Zend 路由，最好是我想要 Zend 中可以做到的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:23:06.037

如果要对控制器内的所有操作执行此操作，可以`init()`使用控制器的`_redirect()`函数在函数中执行重定向：

```
class MyController extends Zend_Controller_Action
{
    public function init()
    {
        $this->_redirect('https://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
    }
} 
```

# c++ - 将多个字段合并为一个字段

> ID：12687038
> 
> 赞同：0
> 
> 时间：2012-10-02T08:41:04.057
> 
> 标签：c++, string, merge

假设我们有 3 个带有自由文本的字符串，我需要将这些字符串合并为一个字符串，然后能够单独检索 3 个字符串。

我知道这根本不干净，但是在某些情况下您无法更改界面。因此，我正在寻找“伪清洁”解决方案。

我在想两个选项：-选择一个分隔符，在字符串上转义它，然后将它们与中间的 sep 连接起来。-以某种方式选择分隔符和字节码字符串并将它们以字节码连接。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:43:43.387

通常这是使用零分隔符完成的，因为这永远不会出现在 C 字符串中。

所以：

```
string a, b, c = ...;

ostringstream o;
o << a << char(0) << b << char(0) << c;
string s = o.str();

...

auto i = s.find(char(0),0);
a = s.substr(0,i);
auto j = s.find(char(0),i+1);
b = s.substr(i+1, j-i-1);
c = s.substr(j+1); 
```

# android - 如何强制对话框的横向模式？

> ID：12687039
> 
> 赞同：9
> 
> 时间：2012-10-02T08:41:14.993
> 
> 标签：android, android-layout

想象一下您的活动是（强制！）在纵向模式下，您将从那里显示一个对话框，但在横向模式下（因为它包含的视图大于屏幕宽度），您将如何做到这一点？

我认为对话框的屏幕方向取决于它的托管活动/服务。

还有办法吗？（例如，在其布局 xml 文件上强制对话框视图的默认方向？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-25T19:09:22.867

如果您在“`DialogFragment`使用对话框创建 `getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);` ”和“对话框关闭” 下`getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);` ，如果您不想重新创建活动，请添加 `android:configChanges="orientation|screenSize"` 其他方式，您将不得不处理重新创建的活动

# java - 从数据库获取数据时出现 ArrayIndexOutOfBounds 异常问题

> ID：12687043
> 
> 赞同：0
> 
> 时间：2012-10-02T08:41:28.953
> 
> 标签：java, android, database, exception

我正在尝试从响应对象中的数据库获取数据并将其显示在客户端。但是我让这个数组索引超出了界限异常。我确信我做对了，但不能让它运行。我得到的错误是

```
java.lang.ArrayIndexOutOfBoundsException: length=1956; index=1956
at com.pda.kaizen.ConnectionImpl.getCustomers(ConnectionImpl.java:139)
at com.pda.kaizen.activity.MainMenuActivity$1.run(MainMenuActivity.java:123)
at java.lang.Thread.run(Thread.java:856) 
```

这是服务器端代码

```
StringBuilder sb = new StringBuilder();
sb.append("100|OK");
for (Customer customer : customers) {
    sb.append("|").append(customer.getId())
      .append("|").append(customer.getCode())
      .append("|").append(customer.getName())
      .append("|").append(customer.getNameFarsi())
      .append("|").append(customer.getAddress())
      .append("|").append(customer.getType())
      .append("|").append(customer.getPhoneNo())
      .append("|").append(customer.getMobileNo())
      .append("|").append(customer.getFaxNo())
      .append("|").append(customer.getEmail())
      .append("|").append(customer.getRegisterCode())
      .append("|").append(customer.getOrganizationName())
      .append("|").append(customer.getEconomicCode())
      .append("|").append(customer.getMelliCode())
      .append("|").append("-1".equals(customer.getPostCode())?"":customer.getPostCode())
      .append("|").append(customer.getFirstName())
      .append("|").append(customer.getLastName());
}
return sb.toString(); 
```

这是活动代码

```
@Override
public List<Customer> getCustomers() {
    List<NameValuePair> params = new ArrayList<NameValuePair>(1);
    params.add(new BasicNameValuePair("action", "customer"));
    try {
        String response = executeHttpPost(params);
        String[] result = response.split(DELIMITER);
        List<Customer> customers = new ArrayList<Customer>();

        for (int i = 2; i < result.length - 16; i += 17) {
            String id = result[i + 0];
            String code = result[i + 1];
            //String name = result[i + 2]; 
            String name = result[i + 3];
            String address = result[i + 4];
            String type = result[i + 5];
            String phone = result[i + 6];
            String mobile = result[i + 7];
            String fax = result[i+8];
            String email = result[i+9];
            String registerCode = result[i+10];
            String organizationName = result[i+11];
            String economicCode = result[i+12];
            String melliCode = result[i+13];
            String postCode = result[i+14];
            String firstName = result[i+15];
            String lastName = result[i+16];
            Customer customer = new Customer(id, code, name, address, type,phone,mobile,fax,email,registerCode,organizationName,economicCode,melliCode,postCode,firstName,lastName);
            customers.add(customer);
        }
        return customers;
    }
    catch (Exception exc) {
        Log.e("----", exc.getMessage(), exc);
        throw new ConnectionException(exc.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:06:53.630

我可能错了 - 但我相信你的问题在于你`split`的字符串。

如果你这样做：`"a|b|c".split("\\|")`- 你会得到一个由 3 个字符串组成的数组。
如果你这样做： - 你会得到一个包含**1 个**字符串`"a||".split("\\|")`的数组。

 **这是因为`split`修剪了末端。

假设您正在使用`split`- 检查您的数据并查看最后一位客户是否有**姓氏**。如果没有 - 那么我是正确的。

请参阅以下 ideone 代码作为示例： [由于空数据导致代码失败的示例](http://ideone.com/o9wmj)

要解决此问题，您应该在分隔符（或您希望的任何其他值）之间引入空格，以确保`split`将它们考虑在内。

请参阅以下 ideone 代码作为示例： [在分隔符之间使用空格运行的代码示例。](http://ideone.com/o9wmj)

注意：引用[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)

> 围绕给定正则表达式的匹配拆分此字符串。此方法的工作方式就像通过使用给定表达式和零限制参数调用双参数拆分方法一样。**因此，尾随的空字符串不包含**在结果数组中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T08:46:29.950

数组在 java 中的索引为零，因此对于长度 = 1956 的数组，使用的最大索引应该是`myArray[1955]`. 当然，第一个元素是`myArray[0]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T08:49:25.410

你的 for 循环退出条件是错误的，当你得到`result[i+16]`你应该确定`i < result.length - 16`

```
for (int i = 2; i < result.length-16; i += 17) { 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T08:48:29.753

> 我确定我做对了

我很确定你不是……一般来说，如果某些事情的行为不像你期望的那样，你应该从假设你*没有*正确地做所有事情开始。

我强烈怀疑这是问题所在：

```
for (int i = 2; i < result.length; i += 17) 
```

如果故障发生在索引 1956，我怀疑问题在于正好有 1956 个元素，代表*从索引 1 开始的*115 个条目。

所以试试：

```
for (int i = 1; i < result.length; i += 17) 
```

现在给定您的初始值`"100|OK"`，我可以理解*为什么*您希望从索引 2 开始，但似乎情况并非如此。你没有向我们展示你是如何得到的，这并没有帮助`result`——也许这已经“吞噬”了一个价值？

您应该真正查看调试器中的结果以调查可疑偏移量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T08:48:59.093

仔细分析异常。

```
java.lang.ArrayIndexOutOfBoundsException: length=1956; index=1956 
```

它说长度是 1956，索引是 1956。如果数组的长度是 1956，最后一个索引应该是 1955。数组索引从零开始。**

# typescript - TypeScript：为什么这不是类型错误？

> ID：12687045
> 
> 赞同：6
> 
> 时间：2012-10-02T08:41:34.597
> 
> 标签：typescript

我试图了解 TypeScript 中类型推断的程度。在下面的代码示例中，为什么`foo`' 的实现`baz.esplode`有效？我的理解是空方法匹配`void`。

```
interface bar {
    horace: number;
}

interface baz {
    esplode: (string, number) => bool;
}

interface bazzer extends bar, baz { }

var foo: bazzer = {
    horace: 12,
    esplode: function () { }
}

var x = foo.esplode('crackers', 2); 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T17:26:43.953

谢谢参观！

这实际上是一个错误。当函数是上下文类型时，我们应该将它视为存在表示预期返回类型的返回类型注释（根据语言规范的第 4.9 节），所以你是对的，应该有一个错误。

我已经对此进行了修复，但是您能否在 CodePlex 网站上提交错误，以便我们的团队可以跟踪它？今天下午我可以将修复推送到我们的开发分支。

再次感谢！

# android - ping 时休眠的 Android 设备唤醒

> ID：12687046
> 
> 赞同：1
> 
> 时间：2012-10-02T08:41:34.617
> 
> 标签：android, service, android-4.0-ice-cream-sandwich, sleep, wakeup

这是问题所在。我在带有冰淇淋三明治的 Android 设备上工作，当我通过 Wifi 从计算机 ping 设备时，我想唤醒设备。

我正在“尝试”使用以下代码来唤醒设备，但它似乎不起作用。

```
WakeLock lock = ((PowerManager) getSystemService(POWER_SERVICE)).newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK
            | PowerManager.ACQUIRE_CAUSES_WAKEUP, "TAG");
lock.acquire();

KeyguardManager km = (KeyguardManager) getSystemService(KEYGUARD_SERVICE);
  requestWindowFeature(Window.FEATURE_NO_TITLE);

getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN |
            WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD |
            WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED |
            WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON,
            WindowManager.LayoutParams.FLAG_FULLSCREEN |
            WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD |
            WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED |
            WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
lock.release(); 
```

我正在使用服务来唤醒设备，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:51:03.527

您可以使用 android.net.wifi.STATE_CHANGE 广播事件。要实现这一点，您需要在清单文件中注册广播。

这可能对您有所帮助。 [http://www.grokkingandroid.com/android-tutorial-broadcastreceiver/](http://www.grokkingandroid.com/android-tutorial-broadcastreceiver/)

# templates - 在 foreach 循环中绑定不同的 Knockout JS 模板

> ID：12687048
> 
> 赞同：0
> 
> 时间：2012-10-02T08:41:47.083
> 
> 标签：templates, binding, foreach, knockout.js

我正在尝试使用 KO 模板将 JSON 文件（[参见此处](http://pastebin.com/bUdZfn0X)）解析为一些漂亮的网格布局..（类似于砖石/同位素布局）..每个模板部分内部都有不同大小的矩形和正方形，但整体模板符合 5 框宽 3 框高的网格（[例如](http://smg.photobucket.com/albums/v521/haxxxton/?action=view&current=grid.png)）

鉴于此，我一直在尝试做的是检测模板，然后遍历每个项目，如果它在迭代中的某个索引加载单、双或三子模板。

我的问题是我似乎无法让它检查当前在 ViewTestProposal 数组中的哪个键..

下面是我的 WIP 代码..

```
<div data-bind="template: {if: Template == 'basic2', visible: Template == 'basic2', foreach: ViewTestProposal}">
    <div data-bind="template: {if: ViewTestProposal[0], name: 'single'}"></div>
</div>
<script type="text/html" id="single">
    <div class="box single">
        <p data-bind="text: Artist, attr:{title: Artist}"></p>
    </div>
</script> 
```

我尝试将`if: ViewTestProposal[0]`部分更改为`with: ViewTestProposal[0]`，`if: ViewTestProposal() === 0`但`if: ViewTestProposal == 0`无济于事。

提前感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T09:48:25.863

模板名称参数可以是一个函数，它根据数组中的当前项返回名称（[见注 4](http://knockoutjs.com/documentation/template-binding.html)）。有了这个，您可以访问具有模板名称的每个项目的属性：

```
<div data-bind="template: {
        foreach: ViewTestProposal, 
        name: function(item) {return item.boxsize;}
    }"></div> 
```

如果您需要使用数组中项目的索引，可以从 Knockout 版本 2.1 开始通过`$index` [context 属性](http://knockoutjs.com/documentation/binding-context.html)使用。从版本 2.2（尚未发布 [1/Oct/2012]，但[发布候选版本可用](https://github.com/SteveSanderson/knockout/downloads)）开始，name 函数也可以访问上下文对象。然后你可以做这样的事情：

```
<div data-bind="template: {
        foreach: ViewTestProposal, 
        name: function(item, context) {
            switch(context.$index()) {
            case 0:
                return 'single';
            case 1:
                return 'double';
            // etc.
            }
        }
    }"></div> 
```

显然，函数本身可以在您的视图模型中定义。

# ruby - Data-Mapper 在乘客和红宝石 1.8 下

> ID：12687054
> 
> 赞同：0
> 
> 时间：2012-10-02T08:42:13.633
> 
> 标签：ruby, sinatra, ruby-datamapper

使用在乘客和 ruby​​ 1.8 上运行的数据映射器在字段上声明必需时，我的 sinatra 应用程序显示错误

错误：Person:Class 的未定义局部变量或方法“必需”

```
class Person
include DataMapper::Resource
property :id, Serial
property :salutation, String 
property :first_name, String , required => true 
property :last_name, String , required => true 
property :email, String , required => true, :format => :email_address 
property :phone, String , required => true
property :dob, String 
property :no_of_guests, String , required => true
property :attending, String, required => true

property :created_at, DateTime
end 
```

这是 datamapper 和 ruby​​ 1.8 的问题，还是乘客的问题，还是我标记所需属性的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:58:06.287

`required`必须是符号 ( `:required`)：

```
class Person
include DataMapper::Resource
property :id, Serial
property :salutation, String 
property :first_name, String , :required => true 
property :last_name, String , :required => true 
property :email, String , :required => true, :format => :email_address 
property :phone, String , :required => true
property :dob, String 
property :no_of_guests, String , :required => true
property :attending, String, :required => true

property :created_at, DateTime
end 
```

# grails - HQL 按子列表中的最大项目排序

> ID：12687058
> 
> 赞同：0
> 
> 时间：2012-10-02T08:42:23.123
> 
> 标签：grails, hql

我有以下域类

```
class Child{
    def age
}

class Parent{
    static hasMany = [children:Child]
} 
```

我想在 HQL 中执行以下操作

```
Parent.list()
    .sort{ parent -> parent.children.sort{ child -> child.age}[0]}[0..10] 
```

基本上，我想检索按最大孩子的年龄排序的父母列表。并将其限制为仅 10 条记录。我不想从数据库中提取所有父子记录，然后进行必要的排序。我希望 HQL 可以在“数据库层”上执行此操作，并且只返回我需要的结果。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:40:50.330

```
Parent.withCriteria {
        createAlias('children', 'ch', org.hibernate.criterion.CriteriaSpecification.LEFT_JOIN)
        order("ch.age", "desc")
        maxResults(10)

        setResultTransformer(org.hibernate.criterion.CriteriaSpecification.DISTINCT_ROOT_ENTITY)
    } 
```

# xml-documentation - TypeScript 中是否已经支持 XML 文档？

> ID：12687061
> 
> 赞同：8
> 
> 时间：2012-10-02T08:42:34.180
> 
> 标签：xml-documentation, typescript

TypeScript 中是否已经支持 XML 文档？似乎没有，但也许我忽略了一些东西。

我想要这样的东西：

```
export class Point {
   /// <summary>This is a Point class.</summary>

    constructor (public x: number, public y: number) { 
        /// <summary>Creates a new Point object</summary>
        /// <param name="x"></param>
        /// <param name="y"></param>
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T08:53:42.293

语言规范中没有提到这一点，因此目前不支持此功能。

唯一使用的注释语法是创建对源文件的依赖：

```
/// <reference path="..."/> 
```

您可以[在项目页面上建议诸如此类的功能](http://typescript.codeplex.com/discussions)- 如果该想法获得牵引力，将来可以将其添加到语言中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-28T11:58:15.657

显然，现在至少在 Visual Studio Code 中支持 JSDoc，因为我目前在那里使用它，它显示在智能感知弹出窗口中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T04:49:42.167

值得一提的是，来自 Microsoft 的示例确实包含这种评论风格。来自视差样本：

```
 constructor(scrollableContent: HTMLElement, perspective: number) {
        /// <param name="scrollableContent">The container that will be parallaxed.</param>
        /// <param name="perspective">The ratio of how much back content should be 
        /// scrolled relative to forward content.  For example, if this value is 
        /// 0.5, and there are 2 surfaces, the front-most surface would be scrolled 
        /// normally, and the surface behind it would be scrolled half as much.</param>
        this.perspective = perspective;
        this.surface = [];
        this.content = scrollableContent;

        $(scrollableContent).scroll((event: JQueryEventObject) => {
            this.onContainerScroll(event);
        });
    } 
```

# ios - iOS：KVO + 动画 = 没有动画？

> ID：12687062
> 
> 赞同：1
> 
> 时间：2012-10-02T08:42:38.503
> 
> 标签：ios, animation, key-value-observing

我正在像这样的块中为视图设置动画（将其框架移动到屏幕外）：

```
[UIView animateWithDuration:0.3 animations:^{
    view.frame = CGRectOffset(view.frame, .0f, CGRectGetHeight(view.frame));
} completion:^(BOOL finished) {
    // view is removed here
}]; 
```

当按下按钮触发此动画时，效果非常流畅。之后，视图被移除并释放。

现在，如果我将其放入 KVO 观察器（由 UIGestureRecognizer 触发的值更改）：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    // perform animation from above
} 
```

然后视图在 0.3 秒后被简单地移除，但没有向下动画。我确信所有这些都在主线程上运行。

任何想法为什么不播放动画？

**解决方案：**

执行动画的方法被多次调用，使视图向下动画得如此之快，以至于它看起来好像立即消失了。显然，这绝不能发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:48:16.313

`UIGestureRecognizer`的目标动作机制和`UIControl`( `UIButton`)机制之间有一个细微的区别：`UIControl`在检测到触摸事件时立即传递动作，同时`UIGestureRecognizer`为下一次通过运行循环安排动作。

虽然这并不能解释丢失的动画，但它可能仍然有助于理解发生了什么。一般来说，当手势识别器的动作触发时，UIView 动画会起作用。

# delphi - 是否最好对 GUI 元素进行排序而不是对数据进行排序并让 GUI 显示排序后的数据？

> ID：12687064
> 
> 赞同：2
> 
> 时间：2012-10-02T08:42:45.673
> 
> 标签：delphi, user-interface, sorting, virtualtreeview

关于排序的一个相关[问题](https://stackoverflow.com/questions/12671022/implementing-tobjectlists-sort-without-copy-paste-code)可能与回答这个问题有关。我已经意识到 VirtualTreeView 提供了它自己的排序方法，但它似乎比仅对数据本身进行排序并让 GUI 刷新更慢。

操纵 GUI 元素而不是它们显示的数据是否曾经是“良好做法”，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T08:54:37.630

通常，您希望在基础数据和该数据的可视化表示之间保持分离。考虑到这一点，人们通常更愿意在 GUI 级别实现排序，而不是在数据级别更低。

例如，这允许您显示相同数据的多个视图，但排序不同。这就是您从保持模型和视图之间的清晰分离中获得的那种好处。

在您的情况下，您对这两个选项的实现已经显示出性能差异。我从中得到的是，在 GUI 级别实现时可以优化排序。这就是我处理问题的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:28:02.647

我不会对数据进行排序，只是一个索引。您说您在列表中收集数据，然后将这些列表分组到一个组列表中。我不会对数据进行排序，而是将数据保持原样并生成一个包含数据引用的简单列表（或列表）并对其进行排序。使用该列表填充虚拟列表视图。

那将是大卫提到的那种中间层。通过保留多个索引，您可以根据不同的标准进行排序，而无需对基础数据进行排序。

# javascript - jQuery 幻灯片切换和 cookie

> ID：12687065
> 
> 赞同：0
> 
> 时间：2012-10-02T08:42:50.843
> 
> 标签：javascript, jquery, cookies, slidetoggle

我有一个动态生成的页面，`slideToggle`用于打开和关闭分层`div`s 等没问题。唯一的问题是，每次我回发时，我都必须`div`再次生成 s 并且它们失去了打开/关闭状态。它们总是使用相同的唯一`id`s 生成。

我想使用 cookie 插件来记住调用`sltoggle`函数时的状态，然后在页面重新加载时扩展所有相同的 div。这是我到目前为止所得到的......

```
 $(document).ready(function () 
    {
        $(".toggle-hide").hide();
        //something in here about opening the divs in the cookie
    });

    function sltoggle(eID) 
    {
        $("div[id$='" + eID + "']").slideToggle(600);
        //I think the below code is okay - I copied it from a working example ^^
        var divState = ($("div[id$='" + eID + "']").css('display') == 'block') ? 1 : 0;
        $.cookie("divState", state)
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:03:58.883

内联评论解释。

```
function slToggle(eID) {
   var $div = $("div[id$='" + eDI + "']");
   //Get value of cookie or empty string
   //Cookie is list of eIDs that should be visible
   var cooks = $.cookie("divState") || '';

   //Determine whether eID is already in the cookie
   var isin = $.inArray(eID, cooks.split(','));

   //TODO verify that .is("visible") check works during
   //toggle animation.  Otherwise, this code goes in the
   //toggle animation callback function
   if ($div.slideToggle(600).is(":visible")) {
      //Div is visible, but not in cookie
      if (!isin) {
         $.cookie("divState", cooks + (cooks ? ',' : '') + eID);
      }
   }
   else if (isin) {
      //Div not visible, but in cookie
      $.cookie("divState", cooks.replace(/(^|,)eID(,|$)/, ''));
   }
} 
```

# mysql - mysql 效率：自连接与两个表拆分

> ID：12687066
> 
> 赞同：2
> 
> 时间：2012-10-02T08:42:53.217
> 
> 标签：mysql, database, database-design, join, self-join

我只是想从设计、效率和空间的角度来看，什么是更好的选择？自加入或使用两个表然后加入它们？

我有一个存储产品设计细节的 MySQL 数据库，`designer_type`可以是`company_staff`，也可以是某个`customer_type`.

最初我想有两张桌子，一张叫`staff_design`，一张叫`customer_design`。

无论哪种方式，`design`信息都几乎保持不变，除了如果它是客户，还有两个额外的列是 staff_design 不需要的，一个是 a 的 ID 的外键`staff_design`，另一个是`design_name`（用户和不是工作人员可以添加）。这 2 列都可能为 NULL。

因此，如果我设计数据库以使这两个表合并并且只有一个`design`表，那么该表将有 3 个额外的列，这些列可能经常为 NULL：它需要有`design_type`（指定`customer`，或`staff`），然后我上面提到的两个额外的列。（`design_name`和`staff_design`FK）。

哪个设计更好？

我倾向于单表设计，主要是为了减少硬盘处理（获取两个不同的表而不是一个）。然后我将不得不使用大量的自我连接。

什么被认为是专业的更好的方法？预计staff_designers 将保存数千个设计，而只有高级和额外付费的客户才能保存他们自己的定制设计。因此，员工设计肯定会比客户设计多得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:17:36.730

由于记录的数量级只有几千，所以我建议采用单表设计。这将使您的生活更轻松，并且表格的大小并不能证明拆分表格的优化是合理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:05:13.853

如果它使您的生活更轻松，那么如果我很好地理解您的设计，那么将所有内容合并到一张表中没有任何问题。

特别是如果您的 Mysql 数据库使用 Innodb 引擎：NULL 字段[不占用空间](https://stackoverflow.com/questions/229179/null-in-mysql-performance-storage)（或可忽略不计的数量，1 位左右）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:22:55.533

您在这里拥有的本质上是继承（又名类别、子类型、泛化层次结构等......）。

在实现它的[3 种可能方法](https://stackoverflow.com/a/9178524/533120)中，您描述的是“一张表中的所有类”。这没有任何问题 - 每种方式都有自己的优缺点，这在你的情况下似乎是合适的。

# css - 如何在浏览器宽度变化时设置背景图像以保持其位置？

> ID：12687083
> 
> 赞同：2
> 
> 时间：2012-10-02T08:44:11.013
> 
> 标签：css, background-position, browser-width

我想知道如何设置背景图像以保持其在此站点上的位置：[http ://www.jylkkari.fi/wordpress/](http://www.jylkkari.fi/wordpress/)

当您将浏览器拖动到 960 像素以下时，侧边栏的背景开始向中心移动。

我发现[这个 Javascript](https://stackoverflow.com/questions/5809784/move-background-image-based-on-browser-width)可以解决这个问题。

我仍在寻找 CSS 中是否有一种简单的方法可以在浏览器宽度超过 960 像素时保持图像居中并在低于此尺寸时保持固定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:47:32.087

............. 定义你的身体

```
min-width:980px; 
```

* * *

```
body{
min-width:980px;
} 
```

--------------对于即

习惯于像这样设置css

```
 <!--[if lt IE 8]>
    <link rel="stylesheet" type="text/css" href="ie8-and-down.css" />
<![endif]--> 
```

**创建一个css文件**

```
body{width:980px;} 
```

更多关于ie css的信息***[请点击这里](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:48:30.970

通过将背景语句添加`width: 960px;`到元素中来做到这一点（在您的情况下，这将是`body`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T08:58:49.527

您可以使用媒体查询，在达到一定宽度时更改正文的 CSS：

```
@media all and (max-width: 960px) {
  body {
    background-position: left center;
  }
} 
```

# jquery - jQuery：如果单击其他元素，则删除类

> ID：12687085
> 
> 赞同：17
> 
> 时间：2012-10-02T08:44:35.177
> 
> 标签：jquery, addclass, toggleclass

我有一个包含 li 元素的 ul 列表。当用户单击这些 li 元素之一时，应将一个类添加到该元素。

这很容易设置，但是，当单击另一个 li 元素时，我希望从非活动 li 中删除“活动”类。

我已经解决了这个问题：http: [//jsfiddle.net/tGW3D/](http://jsfiddle.net/tGW3D/)

任何时候都应该有一个红色的锂元素。如果单击第二个然后单击第一个，则只有第一个应该是红色的。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-02T08:46:36.253

这将从每个具有活动的 li 中删除活动类，然后将其添加到单击的元素中。

```
$('body').on('click', 'li', function() {
      $('li.active').removeClass('active');
      $(this).addClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-02T08:46:53.087

你可以使用`siblings`和`removeClass`方法。

```
$('li').click(function() {
    $(this).addClass('active').siblings().removeClass('active');
}); 
```

[http://jsfiddle.net/Lb65e/](http://jsfiddle.net/Lb65e/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-02T08:47:16.300

只需删除 first 的所有实例`.active`，然后添加它：

```
$('ul li').on('click', function() {  
    $('ul li.active').removeClass('active');
    $(this).addClass('active');    
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T08:47:27.083

```
$('li').click(function() {
  $(this).siblings().removeClass('active');
  $(this).addClass('active');
}); 
```

检查：http: [//jsfiddle.net/tGW3D/2/](http://jsfiddle.net/tGW3D/2/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-02T08:48:05.413

像这样的东西？

[http://jsfiddle.net/c7ZE4/](http://jsfiddle.net/c7ZE4/)

您可以使用兄弟姐妹功能。[addClass](http://api.jquery.com/addClass/)返回相同的 jquery 对象 $(this)，因此您可以链接[兄弟](http://api.jquery.com/siblings/)方法，该方法返回除 $(this) 之外的所有其他元素。

```
 $('li').click(function() {
  $(this).addClass('active').siblings().removeClass('active');
 }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-02T08:50:31.130

```
 $('li').click(function() {
      $(this).addClass('active'); // add the class to the element that's clicked.
      $(this).siblings().removeClass('active'); // remove the class from siblings. 
}); 
```

如果你知道 jquery，你可以像下面这样链接它。

```
 $('li').click(function() {
      $(this).addClass('active').siblings().removeClass('active'); 
}); 
```

上面的代码将为您解决问题。[试试这个演示](http://jsfiddle.net/Gy39P/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-24T13:17:43.993

```
<script>
    $(function() {
        $('li').click(function() {
            $("li.active").removeClass("active");
                $(this).addClass('active');
            });
        });
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-28T12:49:14.877

```
 $(document).on('click','ul li',function() {
        $(this).addClass('active').siblings().removeClass('active');
    }); 
```

此 jquery 代码可能会有所帮助。不要忘记添加[Jquery CDN](https://code.jquery.com)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-11T23:12:50.483

您可以使用以下代码：

```
$('document').on('click', 'ul li', function() {
    $(this).addClass('active').siblings().removeClass("active") ;
}); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-01-27T14:51:04.907

您可以通过以下代码更改 css 类：

```
$('li').click(function() {
    $(this).addClass('active').siblings().removeClass('active'); 
}); 
```

链接到[jsfiddle](https://jsfiddle.net/salmanaziz/1a7L6tqn/9/)

# java - 在另一个线程中等待 Future 结果

> ID：12687087
> 
> 赞同：4
> 
> 时间：2012-10-02T08:44:40.907
> 
> 标签：java, concurrency

在下面的代码中，要求是向某个 UI 线程发布一条关于`Callable`运行结果的消息。

```
Future<T> aFuture = aExecutorService.submit(aCallable); //suppose in thread A

aExecutorService.execute(new Runnable() { //suppose in thread B
                @Override
                public void run() {
                    try {
                        final T aresult = aFuture.get();
                        sendSuccessMesage(aResult);
                    }catch( . . . . . . e)
                      . . . . . . . 
                      sendExceptionHappenedMessage(e.getMessage());
                      . . . . . . .
                    }
                } 
```

如果线程 A 被中断，线程 B 会一直等待结果吗？这样做的替代/安全方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:51:31.430

如果任务`aCallable`被取消，get() 可能永远不会返回。最安全和最有效的方法是使用一项任务。

```
Future future = aExecutorService.submit(new Runnable() {
    @Override
    public void run() {
        try {
            final T aresult = aCallable.call();
            sendSuccessMesage(aResult);
        } catch(Throwable e)
            sendExceptionHappenedMessage(e.getMessage());
        }
    }
});

// to cancel.
future.cancel(true); 
```

取消它的另一种方法是在设置为 true 时使用 AtomicBoolean 并检查是否已取消。这样，`sendCancelledMessage`如果需要，仍然可以发送 a。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:52:11.703

这取决于您如何处理线程 A 中的中断。例如：

```
Future<T> aFuture = null;
try {
    aFuture = aExecutorService.submit(aCallable);
    Thread.sleep(FOREVER);
} catch (InterruptedException e) {
    if (aFuture != null) {
        aFuture.cancel(true); //true = interrupts
    }
} 
```

在这种情况下，`aFuture.get()`线程 B 中也会抛出一个 InterruptedException，您可以捕获它。

# android - 通过代码更改按钮状态

> ID：12687088
> 
> 赞同：-1
> 
> 时间：2012-10-02T08:44:43.667
> 
> 标签：android, android-layout, android-button

这是我用来根据状态更改应用程序中的按钮图像的 xml 代码：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_pressed="false"
android:drawable="@drawable/button_n" />

<item android:state_pressed="true"
android:drawable="@drawable/button_p" />

</selector> 
```

我怎样才能通过代码做到这一点？我试过这个：

```
StateListDrawable sl = new StateListDrawable();

sl.addState(new int[]{ android.R.attr.state_pressed}, R.drawable.gridcard_button_p); 
```

但是 addState 将一个 int 数组作为第一个参数，将一个 Drawable Object 作为 sedon 一个（不是我的示例中的 int ）。

我怎样才能以正确的方式使用这种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:50:51.940

```
 StateListDrawable states = new StateListDrawable();
 states.addState(new int[] {android.R.attr.state_pressed},
 getResources().getDrawable(R.drawable.pressed));
 states.addState(new int[] {android.R.attr.state_focused},
 getResources().getDrawable(R.drawable.focused));
 states.addState(new int[] { },
 getResources().getDrawable(R.drawable.normal));
 //... like this you can do for remaining
 Button.setImageDrawable(states); 
```

# abap - 用户特定的 ABAP 断点行为怪异

> ID：12687089
> 
> 赞同：7
> 
> 时间：2012-10-02T08:44:45.723
> 
> 标签：abap, breakpoints

为什么声明

```
BREAK-POINT 'my username'. 
```

不仅影响我，还影响其他用户？我疯了吗？也许这是权限问题或任何其他原因？有人可以解释一下吗？

该语句位于实现 BAdI 的类的方法体中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T08:50:03.347

If you want to use break points only for your username, you have to use it like this:

```
BREAK username. 
```

If you use

```
BREAK-POINT. 
```

it is going to affect everyone.

The **actual meaning** of `BREAK-POINT 'my username'.` is completely different (comment from vwegert):

> See [the documentation of BREAK-POINT](https://help.sap.com/doc/abapdocu_753_index_htm/7.53/en-US/index.htm?file=abapbreak-point.htm) - you've been using your user name as a log text

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T07:55:37.807

不是您问题的直接答案，但也许也有帮助：

在事务`SAAB`中，您可以定义一个检查点组（例如`Z_MYbreaks`）。然后您可以使用以下命令：

```
BREAK-POINT ID Z_MYbreaks. 
```

断点将无效，除非您在事务中激活它`SAAB`。优势`break USERID`：

*   无需更改代码即可（取消）激活它（您可以将其传输到生产系统并仅在您想测试某些内容时激活它）。
*   它可以被每个人激活并为每个人激活，而不仅仅是`break`-command 中的一个用户 ID。（当然：你需要授权）

详情可在

*   [http://help.sap.com/abapdocu_70/en/ABAPBREAK-POINT.htm#&ABAP_ADDITION_1@1@](http://help.sap.com/abapdocu_70/en/ABAPBREAK-POINT.htm#&ABAP_ADDITION_1@1@)
*   [http://www.saptechnical.com/Tutorials/ABAP/CheckpointGroup/Index.htm](http://www.saptechnical.com/Tutorials/ABAP/CheckpointGroup/Index.htm)

# java - 在 Spring 表达式中创建地图

> ID：12687098
> 
> 赞同：1
> 
> 时间：2012-10-02T08:45:09.173
> 
> 标签：java, spring

我希望在我的 spring.xml 中创建一个地图。我能得到的最接近的是列表列表

```
<bean id="transformerHelper" class="com.common.TransformerHelper">
    <property name="srcSystemIDList" value="{T(java.util.Arrays).asList({'11','50'},{'41','50'}) }" />
</bean> 
```

但是，我确实需要映射中的这些值，在其中搜索键 11 或 41 时可以返回 50。我需要在 Spring 中定义此元数据，因为它将存储在远离应用程序的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:47:50.557

[请参阅本文档](http://static.springsource.org/spring/docs/2.0.x/reference/xsd-config.html)的 A.2.2.5 部分，并注意此示例：

```
<util:map id="emails">
    <entry key="pechorin" value="pechorin@hero.org"/>
    <entry key="raskolnikov" value="raskolnikov@slums.org"/>
    <entry key="stavrogin" value="stavrogin@gov.org"/>
    <entry key="porfiry" value="porfiry@gov.org"/>
</util:map> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:03:55.950

请参阅链接：[converting-static-2d-string-array-to-hashmap](https://stackoverflow.com/questions/1702565/converting-static-2d-string-array-to-hashmap)并使用 init 方法或在您的 bean 类中实现 InitializingBean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:15:13.310

有一种方法，我建议向您的类添加另一个属性，一个将保存所有映射值（键和值）的字符串，就像您已经拥有的一样：

```
{'11','50'},{'41','50'},{'12','34'} 
```

然后，不是注入映射，而是注入字符串，并在它的 setter 方法（如果您使用 setter 注入）中调用一个小方法（由您创建），它将解析该字符串并填充映射，使用`StringTokenizer`或您喜欢的任何内容。

# javascript - 使用 jQuery 显示和加载 iframe

> ID：12687103
> 
> 赞同：1
> 
> 时间：2012-10-02T08:45:22.713
> 
> 标签：javascript, jquery

我有一个页面，它加载一个 iframe（包含同一域上的表单），该页面在用户单击按钮之前一直隐藏，该按钮调用 jQuery slideToggle() 来显示/隐藏它。
当用户提交表单时，它会在 iframe 中加载一个“谢谢”页面。然后发生的情况是，如果用户再次单击该按钮，jQuery 会检查 iframe 主体元素的 ID 以查看表单是否存在，如果不存在，则加载表单 iframe 并显示它。

我得到的代码在 Chrome 中有效，但在 Firefox 中失败；
控制台中的错误消息 => `TypeError: frames['form-iframe'] is undefined`
（当我测试它时我想象 IE）。

任何关于为什么或如何解决此问题的想法将不胜感激。

HTML 片段

```
<label id="tell-a-friend-button">
    <div class="radio-button radio-button-grey">
        <div class="label-text">YES</div>   
    </div>
    <span>Tell a friend</span>
</label>

<div id="tell-a-friend">
    <iframe src="me.asp?email=foo" frameborder="0" id="form-iframe"></iframe>
</div> 
```

jQuery 片段

```
$("#tell-a-friend-button").click(function(){
    // set iframe content
    $("#form-iframe").ready(function () {
        var frame = $('body', frames['form-iframe'].document).attr('id');
        if (frame == "tell-form") {
            $('#tell-a-friend').slideToggle();
        } else {
            // is the thank you page
            // load the iframe
            $("#form-iframe").attr("src", "me.asp");
        }
    });
}); 
```

# visual-studio - 类模块中断与未处理错误中断（VB6 错误捕获，IDE 中的选项设置）

> ID：12687105
> 
> 赞同：7
> 
> 时间：2012-10-02T08:45:24.337
> 
> 标签：visual-studio, vb6, error-handling, compiler-errors, compiler-options

基本上，我试图了解出现在以下路径下的 Visual Basic 6.0 IDE 中的“Break in Class Module”和“Break on Unhandled Errors”之间的区别：

```
Tools --> Options --> General --> Error Trapping 
```

这三个选项似乎是：

> *   打破所有错误
> *   打破课堂模块
> *   中断未处理的错误

现在，显然，根据 MSDN，第二个选项（Break in Class Module）实际上只是意味着“Break on Unhandled Errors in Class Modules”。此外，此选项似乎是默认设置的（即：我认为它设置为开箱即用）。

我想弄清楚的是，如果我选择了第二个选项，我是否可以免费获得第三个选项（Break on Unhandled Errors）？在那，它是否默认包含在类模块范围之外的所有场景中？建议，我当前活动的项目中没有任何类模块。我有 .bas 模块。另外，Class Mdules 是否也有可能指的是普通的 .bas 模块？（这是我的第二个子问题）。

基本上，我只是希望设置确保一旦发布 exe 就不会出现任何意外。我希望在开发时显示尽可能多的错误，而在发布模式下不显示。通常，我的表单上有两种类型的 On Error Resume Next，其中没有明确的错误处理，它们如下：

错误恢复下一个 ' 需要 错误恢复下一个 ' 不需要

需要的是，检查数组是否有任何长度，如果对其 UBound 的调用出错，这意味着它没有长度，如果它返回值 0 或更大，那么它确实有长度（因此, 存在）。即使在我开发过程中，这些类型的错误语句也需要保持活跃。但是，NOT REQUIRED 不应该在我开发时保持活动状态，因此我将它们全部注释掉以确保我捕获所有存在的错误。

一旦我准备好发布 exe，我会执行 CTRL+H 来查找所有出现的情况：

> 'On Error Resume Next' 不需要

（您可能已经注意到它们被注释掉了）......并将它们替换为：

> On Error Resume Next ' 不需要

... 未注释的版本，因此在发布模式下，如果有任何遗留错误，它们不会显示给用户。

有关 MSDN 对三个选项的描述的更多信息（我已经阅读了两次，但仍然觉得不够），您可以访问以下链接：

[http://webcache.googleusercontent.com/search?q=cache:yUQZZK2n2IYJ:support.microsoft.com/kb/129876&hl=en&lr=lang_en%7Clang_tr&gl=au&tbs=lr:lang_1en%7Clang_1tr&prmd=imvns&strip=1](http://webcache.googleusercontent.com/search?q=cache:yUQZZK2n2IYJ:support.microsoft.com/kb/129876&hl=en&lr=lang_en%7Clang_tr&gl=au&tbs=lr:lang_1en%7Clang_1tr&prmd=imvns&strip=1)

如果您愿意自愿提供他们的想法，我也很想听听您的想法（这将是我的试探性/完全可选的第三个子问题，即您对后备错误处理技术的想法）。

总结一下，前两个问题是，如果我们选择选项 2，我们是否会在所有非类场景中包含选项 3？而且，当他们使用术语“类模块”时，他们是否也可能指的是 .bas 模块？（因为 .bad 模块实际上只是一个在启动期间在后台预先实例化的类模块）。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T00:13:39.210

我将从第一个选项开始。中断所有错误只会禁用您的错误处理程序。当您在放入错误处理程序后尝试调试时，这很有用，因为您可能在处理程序本身中出现错误，或者当错误冒泡容器层次结构时，您可能会忘记错误发生的位置（错误是't 在过程中处理试图在调用过程中找到处理程序，如果您试图找到有问题的代码行，这可能会令人困惑）。

接下来，如果有一行代码导致其中出现错误，那么在未处理的错误上中断实际上并不会在类模块中中断。如果您设置了此选项，并且您在类中调用了一个方法，并且该方法中的代码行中存在错误，那么您将在客户端中具有该方法调用的行上中断。

类模块中的中断转到有错误的类中的代码行。需要注意的是，如果您使用的是 ActiveX EXE，则控制设置在其项目中，而不是在客户端项目中。也就是说，您可以中断客户端项目中设置的所有错误，并中断您的 ActiveX EXE 项目中设置的未处理错误，并且您不会中断类模块，因为您正在使用两个单独的进程。

我个人更喜欢在课堂模块中设置中断，因为它可以让我以最精确的方式深入到错误的位置。不过，这是在我开始执行错误处理程序之前；在那一点上，我通常会在所有三个方面反弹，这取决于我想要稳定的内容。

最后，我不建议永远不要使用 On Error Resume Next，除非是在内联错误处理的上下文中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T09:35:22.617

是的，当您选择“中断类模块”时，它仍然会中断未处理的错误，但它也会中断类模块（不是普通模块）中未在类模块本身中处理的任何错误。

将此与“中断未处理的错误”进行对比，这将导致它在其内部发生错误时退出类/用户控制代码，从而难以追踪确切位置。

最好将其设置为“中断未处理的错误”以进行一般开发，因为当您处理良性错误时，其他人会变得烦人。请注意，最好在它们触发错误之前尝试检测它们。

# jdeveloper - JDeveloper 无法连接到我的数据库

> ID：12687106
> 
> 赞同：1
> 
> 时间：2012-10-02T08:45:25.037
> 
> 标签：jdeveloper, oracle-adf

我正在使用 JDev 11.1.2.3.0（在 OSX 10.8 上）并尝试连接到外部数据库。当我尝试在 SQL Developer 中建立连接时，一切正常，但是当我在 JDeveloper 中使用相同的连接信息时，它就是不想连接。可能是什么问题呢？

编辑：导出和导入连接也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:03:58.787

这两个程序使用不同的连接机制。您可以通过转到工具>首选项>Web浏览器和代理来为每个程序单独定义代理设置。确保 JDev 具有与 SQLDev 相同的设置

# git - gitignore 分支中的某些文件扩展名

> ID：12687107
> 
> 赞同：2
> 
> 时间：2012-10-02T08:45:43.150
> 
> 标签：git

我试图让 gitignore 忽略文件夹`*.gz`下的所有文件`db/`，但不忽略其他文件夹中的所有文件。有没有办法用项目根目录中的 .gitignore 来做到这一点？

**.gitignore**

```
db/*.gz    # ignores db/a.gz, but not db/data/b.gz
db/*/*.gz  # ignores db/data/b.gz, but not db/data/extra/c.gz
db/**/*.gz # ditto, ignores db/data/b.gz, but not db/data/extra/c.gz 
```

我已经阅读了 man gitignore 并在 stackoverflow 上查看了类似的问题，如果这个问题出现得更早，我很抱歉。

* * *

zsh v4.3.17 (x86_64), git v1.7.8.6, gentoo 内核 v3.4.9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:48:54.517

您始终可以在某些目录中使用单行包含 gitignore 文件

```
*.gz 
```

我在我的存储库中使用类似的方法。

# r - 使用 rbind 合并数据帧时包括间隙

> ID：12687110
> 
> 赞同：0
> 
> 时间：2012-10-02T08:45:53.257
> 
> 标签：r, merge, dataframe

我正在将几个`data.frame`s 与`rbind`R 合并。我希望输出在每个之间包含一个中断，`data.frame`例如一个新行，`data.frame`s 之间只有“#”字符。

请让我知道这是否/如何可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-01T06:45:47.667

除了视觉分离之外，我不确定*为什么*有人会想要这样做。如果是这种情况，也许您可​​以使用类似这样的函数（但请注意，输出并不是真正的函数）。

```
hashbind <- function(..., hash = "#") {
  lst <- list(...)
  Nchar <- max(rapply(lst, function(y) nchar(as.character(y)))) + 2
  do.call(
    rbind, 
    lapply(lst, function(x) {
      rbind(x, substr(paste(rep(hash, Nchar), collapse = ""), 1, Nchar))
    }))
} 
```

让我们用一些 s 来尝试一下`data.frame`：

```
d1 <- data.frame(A = 1:2, B = 3:4)
d2 <- data.frame(A = 5:6, B = 7:8)
d3 <- data.frame(A = 1:10, B = 11:20)

hashbind(d1, d2, d3)
#       A    B
# 1     1    3
# 2     2    4
# 3  #### ####
# 4     5    7
# 5     6    8
# 6  #### ####
# 7     1   11
# 8     2   12
# 9     3   13
# 10    4   14
# 11    5   15
# 12    6   16
# 13    7   17
# 14    8   18
# 15    9   19
# 16   10   20
# 17 #### #### 
```

还有一些矩阵：

```
m1 <- matrix(1:4, ncol = 2)
m2 <- matrix(5:8, ncol = 2)
m3 <- matrix(1:20, ncol = 2)

hashbind(m1, m2, m3)
#       [,1]   [,2]  
#  [1,] "1"    "3"   
#  [2,] "2"    "4"   
#  [3,] "####" "####"
#  [4,] "5"    "7"   
#  [5,] "6"    "8"   
#  [6,] "####" "####"
#  [7,] "1"    "11"  
#  [8,] "2"    "12"  
#  [9,] "3"    "13"  
# [10,] "4"    "14"  
# [11,] "5"    "15"  
# [12,] "6"    "16"  
# [13,] "7"    "17"  
# [14,] "8"    "18"  
# [15,] "9"    "19"  
# [16,] "10"   "20"  
# [17,] "####" "####" 
```

可视分隔符可以自定义：

```
hashbind(d1, d2, d3, hash = "-")
#       A    B
# 1     1    3
# 2     2    4
# 3  ---- ----
# 4     5    7
# 5     6    8
# 6  ---- ----
# 7     1   11
# 8     2   12
# 9     3   13
# 10    4   14
# 11    5   15
# 12    6   16
# 13    7   17
# 14    8   18
# 15    9   19
# 16   10   20
# 17 ---- ---- 
```

* * *

当然，仅使用`by`print 方法就可以实现类似（但不相同）的方法。例如，查看以下输出：

```
print.by(list(m1, d2, d3)) 
```

# error-handling - 在 Mathematica 中捕获错误（不是异常）

> ID：12687113
> 
> 赞同：3
> 
> 时间：2012-10-02T08:46:05.680
> 
> 标签：error-handling, return, wolfram-mathematica, curve-fitting

我有一个表，它对 10000 个数据集进行拟合操作，如下所示：

```
ParallelTable[
NonlinearModelFit[data[[i]], func[t,a,b,c,d], {a,b,c,d}, t],
{i,1,10000}]; 
```

如果我的问题需要，我可以将其更改为 for 循环。那没问题。

我希望能够在此语句中发现错误。因此，如果 NonlinearModelFit 返回任何类型的错误（鞍点、达到的最大迭代次数、不收敛），我希望将“i”打印或附加到其他数组，以便知道哪个数据集与拟合不兼容，并且调试它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:22:45.390

只是解释 belisarius 并使其成为答案：

利用

`Check[ mymaincommand, resultexpressioniferror, optionallistofspecificmessages]`

# git - 与符号链接相比，git 子模块有什么优势？

> ID：12687114
> 
> 赞同：4
> 
> 时间：2012-10-02T08:46:05.600
> 
> 标签：git, git-submodules

我有一个 git 存储库 (A)，其中包含我需要在第二个存储库 (B) 中重用的库代码。

我的理解是 git submodule 不允许只导入存储库中的特定路径，需要导入整个存储库。它是否正确？

因此，我看到了解决我的问题的两种方法：

1.  将 A 和 B 作为单独的存储库，并将 B 的符号链接添加到 A 中的库目录。
2.  使用该库添加一个新的 git 存储库 C，并将其作为子模块导入 A 和 B。

第二种方法的优点是什么？在我看来，为小型库添加单独的存储库是一种矫枉过正的做法，会给项目维护增加不必要的负担。有没有更好的方法来解决我的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T08:48:33.023

主要思想是**构建可重复性**：恢复您在特定时间构建的*确切配置（即标签或 SHA1 的确切列表）部分的能力。*

在这种情况下（重现构建的能力），子模块（和解决方案 2）比任何符号链接（它是目录内容的快捷方式，不参考特定版本）更可取。

另一种选择是将*源代码控制系统之外的库**外部*化到像[Nexus](http://www.sonatype.org/nexus/)这样的工件存储库中，并在您的项目中只留下对该库的正确版本的*引用*以获取。

# sql-server - 通过 SSIS 将数据从 SQL 服务器插入 RESTful API

> ID：12687115
> 
> 赞同：1
> 
> 时间：2012-10-02T08:46:16.053
> 
> 标签：sql-server, rest, ssis, etl

我正在研究将数据从 SQL Server 移动到通过 RESTful HTTP API 公开的系统的方法。

如果我要使用 SSIS，我是否必须在转换步骤之后编写自定义连接器来将数据推送到 HTTP API，或者是否有支持推送到 HTTP API 的内置功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:05:23.523

如果您只想移动非常少量的数据，您可以使用[Web 服务任务](http://msdn.microsoft.com/en-us/library/ms140114.aspx) ...但请注意，将数据*推出*SQL Server 并不是此任务的目的...

> Web 服务任务执行一个 Web 服务方法。您可以将 Web 服务任务用于以下目的：
> 
> 将 Web 服务方法返回的值写入变量。例如，您可以从 Web 服务方法获得一天中的最高温度，然后使用该值来更新在设置列值的表达式中使用的变量。
> 
> 将 Web 服务方法返回的值写入文件。例如，可以将潜在客户列表写入文件，然后将该文件用作数据包中的数据源，该数据包在将数据写入数据库之前对其进行清理。

要获得更多控制，您需要查看在数据流中使用脚本组件。更多的灵活性/控制。

# php - 用简单的 HTML DOM 在 PHP 中使用 Preg_replace 替换数组值？

> ID：12687116
> 
> 赞同：0
> 
> 时间：2012-10-02T08:46:22.950
> 
> 标签：php, dom, preg-replace, simple-html-dom

我们正在做一个项目，在这个项目中，我们必须使用 PHP 将 html 数据替换为数组值`preg_replace()`

请看代码

**代码**

```
 $html = new simple_html_dom();
$texts = array('Replace','the', 'asterisks','prefer','it','all','functions','will','replace','computer','strategic','casio','computing','smart');
$html->load("<body><div>Replace the asterisks in a list with numbers in order</div><div>or if you prefer it all condensed down into a single smart</div><li>Both functions will replace placeholder</li><li>smart</li></body>");
$sample = &$html->outertext ;
foreach($texts as $text){
    $fine = trim($text);
    $replace = '<u>'.$fine.'<\u>';
    if(!empty($text)){
if (strpos($sample,$fine)){
 $sample = preg_replace('/$fine/',$replace,$sample);
$html->save(); /// Update all the replaces on $html ;
}
    }
}

echo $sample; 
```

打印相同`$html`，未更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:11:54.097

```
preg_replace('/$fine/',$replace,$sample); 
```

应该：

```
preg_replace("/$fine/",$replace,$sample); 
```

变量只替换在双引号内，而不是单引号内。

`preg_replace`当所有文本都是普通字符串时，为什么要使用？为什么不`str_replace`呢？

您也可以在一个电话中完成所有替换。str_replace 可以采用搜索和替换字符串的数组：

```
$replacements = array_map(function($e) {return "<u>$e</u>";}, $texts);
str_replace($texts, $replacements, $sample); 
```

或者使用正则表达式，您可以使用管道匹配所有单词：

$regex = implode('|', $texts); preg_replace("/$regex/", '$0', $sample);

# sql - 视图中的日期列表

> ID：12687122
> 
> 赞同：0
> 
> 时间：2012-10-02T08:46:41.343
> 
> 标签：sql, oracle, date, views

好的，这是一个与我之前遇到的问题类似的问题，但它要求它需要是一个具有 1 个变量的视图，并且它需要尽可能简单。我需要一个视图来生成给定月份内的日期列表（即变量）。

这是我到目前为止所拥有的：

```
create view monthview(datesetter) as (   
select
to_date(to_date(datesetter),'MM.YYYY')-1 + level as DateRange
from
dual
where
(to_date(to_date(datesetter),'MM.YYYY')-1+level) <= sysdate
connect by level<=31); 
```

并且视图应该被类似的东西调用：

```
select * from monthview where datesetter='02.2008'; 
```

然后生成一个类似的列表

```
01.02.2007
02.02.2007 
```

等等

它要么告诉我由于使用 datesetter 时出现错误而无法编译视图，要么它编译了视图，但随后它告诉我存在一个非数字值，当我需要数字值时使用'datesetter' ....

感谢您的任何想法或帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:22:31.027

尝试流水线功能：

```
create or replace type date_array_type as table of date;

create or replace function monthview (datesetter varchar2) return date_array_type
pipelined as

cursor c is 
select to_date(level || '.' || datesetter , 'dd.mm.yyyy') dt
from dual
connect by level <= to_number(to_char(
  last_day(to_date(datesetter , 'mm.yyyy')), 'dd'));

begin

for r in c loop

  pipe row(r.dt);

end loop;

return;

end; 
```

现在你可以像这样使用它：

```
select * from table( monthview('03.2012')); 
```

[这](http://www.sqlfiddle.com/#!4/fa085/1)是一个小提琴

# ruby-on-rails - Rails/Devise - 强制密码重置

> ID：12687127
> 
> 赞同：4
> 
> 时间：2012-10-02T08:46:58.610
> 
> 标签：ruby-on-rails, ruby, devise

我已经实现了使用 Devise 自动生成用户密码的能力。现在当用户登录系统时，我想强制用户重置密码。似乎 Devise 中没有内置这样的功能（如果我错了，请纠正我）。我可以想出几种方法来实现这一点，但我确信有一种标准的方法可以做到这一点。

任何提示将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-30T13:00:48.627

Devise 处理具有关联视图的密码控制器以更改用户密码。在应用程序控制器中，您可以使用 new_password_route 覆盖一些设计方法，如 after_sign_up_path 、 after_sign_in_path 、 after_confirmation_path 等，我记得这是更改密码的路由器助手，但不确定。我会认为您正在发送一封带有生成密码和确认链接的邮件。如果没有，那么你所做的一切都是毫无意义的。生成密码以便用户必须更改它对于 UX 是不正确的。只需在开始时用愿望通行证提示用户。

祝你好运

# assembly - mov bx,ax 和 mov bh,ah 之间的速度有区别吗？

> ID：12687129
> 
> 赞同：2
> 
> 时间：2012-10-02T08:47:15.803
> 
> 标签：assembly, x86, dos, x86-16, mov

8086 体系结构的 16 位 MS-DOS 应用程序之间`mov bx,ax`的速度是否存在差异？`mov bh,ah`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T09:11:31.383

您没有指定体系结构，但至少在`8086`,中`286`，它们在相同数量的时钟中执行：2 个时钟，对于任一指令，1 个时钟用于任一指令。见[链接](http://web.itu.edu.tr/kesgin/mul06/intel/instr/mov.html)。`386``486``8088/8086``286``386``486`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T08:52:55.970

如有疑问，请提供个人资料。但在这种情况下不太可能。根据我从 Intel 64 和 IA32 架构优化参考手册中收集到的信息，它们的性能似乎相同，但通常比它们的 32 位或 64 位对应物慢。

# c++ - 如何将随机（boost.random）库包装在一个类中？

> ID：12687131
> 
> 赞同：0
> 
> 时间：2012-10-02T08:47:21.933
> 
> 标签：c++, boost, random, wrapper

目前我正在随机使用boost，但有可能我会将它切换到其他库或我自己的代码（在某些部分），所以我想将它包装在一个类中，然后当我需要一些随机数时（或别的东西）我会从这个类中得到它，而不是提升本身。问题是 - 我应该怎么做？我应该将此类设为单例类还是静态类或其他类？
（我想到了一门课，因为我只需要播种一次，但从不同的地方获得功能，我不想在 main.cpp 中播种）

PS如果有一种方法可以在没有课程的情况下做到这一点，它也会这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:22:24.260

我会建议做一个普通班。这样，用户可以创建一个对象，设置一些参数，然后查询值，如本示例用例所示：

```
{
    YourRandomGenerator random;
    random.SetRange(0, 1000);
    for (int i = 0; i < 1000; ++i)
        CallUserFunction(random.Next());
} 
```

这种方法可以为不同的分布创建不同的随机生成器。通过不同的类（YourUniformRandomGenerator，YourGaussDistributedRandomGenerator，...）或通过参数化方法（SetUniform，SetGauss，...）。如果您只想播种一次（为什么要这样做？），所有这些生成器类都可以访问相同的静态增强随机生成器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:01:05.067

> 我应该将此类设为单例类还是静态类或其他类？

有两种规范的方法：

*   具有工厂函数的抽象类。
*   皮普尔成语。

这两种方法都允许避免在头文件中公开实现。

> 如果有一种方法可以在没有类的情况下做到这一点，它也会这样做。

如果在调用之间没有必须保留的状态，则可以使用非内联函数。

# in-app-purchase - iOS 应用内订阅 - “此应用无法提供营销选择加入激励”

> ID：12687134
> 
> 赞同：2
> 
> 时间：2012-10-02T08:47:27.953
> 
> 标签：in-app-purchase, app-store-connect

我们的一个应用程序提供 IAP、一些消耗品和一些自动更新订阅。

当尝试添加（或修改现有的）自动更新订阅时，iTunes Connect 会在“添加持续时间和定价窗口”中显示此标签：

> ***此应用程序无法提供营销选择加入奖励。***

有人知道如何在应用程序或 appId 级别启用选择加入吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:01:48.493

我相信这与报亭和订阅杂志有关。大出版商设法说服苹果将订阅者的详细信息交给他们，但这是“选择加入”。

由于您不是（我假设）大型出版商，因此您无法获得此特权，因此无法提供。

# c++ - 链表，C++ 分段错误

> ID：12687139
> 
> 赞同：1
> 
> 时间：2012-10-02T08:47:42.513
> 
> 标签：c++, list, pointers, linked-list

我一直无法完成我的作业，因为我似乎无法确定这个分段错误的来源。

我正在尝试将节点从文件添加到链表。我已经运行了多个测试并且已经将问题缩小了很多，但是，我不知道实际上是什么造成了问题，因此当我尝试更改其他细节时会产生新的问题。

这是我的第二门课程，所以，希望我的代码没有那么糟糕，以至于无济于事。这是添加方法：

```
 bool OrderedList::add (CustomerNode* newEntry)
{
if (newEntry != 0)
{
    CustomerNode * current;
    CustomerNode * previous = NULL;
    if(!head)
        head = newEntry;
    current = head;
  // initialize "current" & "previous" pointers for list traversal
   while(current && *newEntry < *current) // location not yet found (use short-circuit evaluation)
   {
    // move on to next location to check
    previous = current;
    current = current->getNext();
   }

  // insert node at found location (2 cases: at head or not at head)
  //if previous did not acquire a value, then the newEntry was
  //superior to the first in the list. 
  if(previous = NULL)
    head = newEntry;
  else
  {
    previous->setNext(newEntry); //Previous now needs to point to the newEntry
    newEntry->setNext(current); //and the newEntry points to the value stored in current.
  }
}
    return newEntry != 0;  // success or failure
    } 
```

好的，程序中包含了一个重载的运算符<，外部测试并不表明运算符有问题，但我也会将其包含在内：

```
 bool CustomerNode::operator< (const CustomerNode& op2) const
    {
       bool result = true;
       //Variable to carry & return result
       //Initialize to true, and then:
       if (strcmp(op2.lastName, lastName))
        result = false;

        return result;
       } 
```

这是来自 gdb 的回溯：

```
 #0  0x00401647 in CustomerNode::setNext(CustomerNode*) ()
    #1  0x00401860 in OrderedList::add(CustomerNode*) ()
    #2  0x004012b9 in _fu3___ZSt4cout ()
    #3  0x61007535 in _cygwin_exit_return () from /usr/bin/cygwin1.dll
    #4  0x00000001 in ?? ()
    #5  0x800280e8 in ?? ()
    #6  0x00000000 in ?? () 
```

这是尝试纠正不同段错误的大量工作的结果，而这个更令人惊讶。我不知道我的 setNext 方法是如何导致问题的，这里是：

```
void CustomerNode::setNext (CustomerNode* newNext)
{
    //set next to newNext being passed
    next = newNext;
    return;
} 
```

在此先感谢，如果有必要识别此问题，我将很乐意发布更多代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T08:50:55.180

它是

```
if(previous = NULL) 
```

代替

```
if(previous == NULL) 
```

这设置`previous`为`NULL`然后进入`else`分支：

```
previous->setNext(newEntry); //Previous now needs to point to the newEntry
newEntry->setNext(current); 
```

导致未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:51:14.110

```
if(previous = NULL) 
```

似乎有点可疑，因为它总是评估为`false`.

您可以通过两种主要方式避免此类错误：

*   慷慨大方`const`，几乎可以洒在任何地方，并且

*   与一个值比较时，将该值放在左侧。

例如，写

```
if( NULL = previous ) 
```

并获得编译错误，而不是崩溃或不正确的结果。

就我个人而言，我不做左侧价值，因为我从来没有这个问题。我怀疑部分是因为我对`const`. 但作为初学者，我认为这是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T08:52:41.960

您可以发布所有代码，但我能看到的第一个明显问题是：

```
if(previous = NULL) 
```

当您的意思是 == 时，使用 = 是 C/C++/Java 中一个非常非常常见的错误。

# yii - Yii - 小部件 - 解释

> ID：12687141
> 
> 赞同：0
> 
> 时间：2012-10-02T08:47:47.593
> 
> 标签：yii

我正在尝试使用下拉列表小部件：

```
 $this->widget('ext.multiselect.JMultiSelect',array(
      'model'=>$model,
      'attribute'=>'attribute',
      'data'=>$data,
      // additional javascript options for the MultiSelect plugin
      'options'=>array()
)); 
```

我想知道的是小部件数组中可用的每个选项的详细信息，例如“属性”、“模型”和“数据”代表什么，因为我无法从文档中理解它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:59:26.703

`model`参数是您为其创建多选的模型。

这`attribute`是您为其创建多选的模型属性。

这`data`是要在多选中显示的列表项的键/值对数组。

例如，如果您有一个模型“用户”并且在该模型中您有一个字段“访问权限”并且您希望将该字段作为具有几个值的多选框，您可能会执行以下操作：

在您的控制器中：

```
$model = new User;

$data = array(
    'admin_area'=>'Admin Area Access',
    'product_area'=>'Product Area Access',
    'customer_area'=>'Customer Area Access',
    ... etc
); 
```

在您的视图文件中的表单中：

```
$this->widget('ext.multiselect.JMultiSelect',array(
    'model'=>$model,
    'attribute'=>'access_rights',
    'data'=>$data,
    // additional javascript options for the MultiSelect plugin
    'options'=>array()
)); 
```

编辑：

要将数据添加到来自另一个模型的多选选项，您可以使用[CHtml::listData()](http://www.yiiframework.com/doc/api/1.1/CHtml#listData-detail)方法，这需要一个活动记录结果集并将其转换为键/值对数组，以便您可以在任何其他模型中使用需要键/值对的 CHtml 方法。为此，您只需使用活动记录从数据库中获取您想要的记录，例如；

```
$myData = Data::model->findAll(); 
```

然后，您可以将其放入 listData() 方法中，它将创建您的数组：

```
$this->widget('ext.multiselect.JMultiSelect',array(
    'model'=>$model,
    'attribute'=>'access_rights',
    'data'=>CHtml::listData($myData, 'id', 'name'),
    // additional javascript options for the MultiSelect plugin
    'options'=>array()
)); 
```

（其中 'id' 和 'name' 是模型表中您希望成为数组中的 'key' 和 'value' 的字段）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:06:22.230

```
 echo $form->dropDownList($model, 'category', CHtml::listData(TblCategory::model()->findAll(),
                'id', 'category_name'), array('empty' => '---Select Category---', 
                     'style' => 'width:350px;')), array() ?>

        <?php echo $form->error($model, 'category'); ?> 
```

# ios - 以用户身份将照片发布到 Facebook 粉丝页面。iOS Facebook SDK 3.1

> ID：12687144
> 
> 赞同：0
> 
> 时间：2012-10-02T08:47:50.887
> 
> 标签：ios, facebook-graph-api, facebook-ios-sdk

我正在尝试使用 Facebook SDK 3.1 将用户的照片发布到 Facebook 页面。
当我使用以下代码创建上传图片请求时：

```
FBRequest *uploadPhotoRequest = [FBRequest requestWithGraphPath:@"/${FAN_PAGE_ID}/photos/" parameters:[NSDictionary dictionaryWithObjectsAndKeys:self.imageToShare, @"source", nil] HTTPMethod:@"POST"]; 
```

图片直接进入**用户的时间线**，而不是页面的时间线。

但是当我发布链接时：

```
FBRequest *request = [FBRequest requestWithGraphPath:@"/${FAN_PAGE_ID}/feed/" parameters:[NSDictionary dictionaryWithObjectsAndKeys:@"http://stackoverflow.com", @"link", nil] HTTPMethod:@"POST"]; 
```

将帖子正确链接到 Facebook 页面。

要打开一个会话，我正在使用代码：

```
[FBSession openActiveSessionWithPermissions:[NSArray arrayWithObjects:@"publish_stream", @"photo_upload", nil]
                               allowLoginUI:YES
                          completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
...
                          }]; 
```

*我知道这`openActiveSessionWithPermissions`已被弃用，将其用于 iOS 5 和 6 上的相同 SSO 行为。*

**更新**

或者是否可以上传带有访问令牌替换的照片？使用页面访问令牌而不是用户访问令牌。如果是，如何在不强制用户以页面管理员身份登录的情况下以编程方式获取页面访问令牌？

你会建议我怎么做？
谢谢！

BR。尤金。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T11:18:31.333

[https://developers.facebook.com/docs/reference/api/page/#photos](https://developers.facebook.com/docs/reference/api/page/#photos)说，

> **“您可以通过向具有 publish_stream和 manage_pages 权限**的 PAGE_ID/photos 发出 HTTP POST 请求来将照片发布到 Page's Wall [...]”</p>

听起来“普通”用户不允许通过 API 将图像发布到页面的墙上。

# javascript - jquery beforeunload 消息取决于单击的按钮

> ID：12687145
> 
> 赞同：0
> 
> 时间：2012-10-02T08:47:52.747
> 
> 标签：javascript, jquery

我在更改 jQuerys`beforeunload()`功能时遇到问题，具体取决于用户操作。

```
$(document).ready(function() {
    $(window).bind('beforeunload', function() {
        if (billChanged == false) {
            return false;                    
        }
        else if ( savebutton was clicked ) {
            return false;
        }
        else { 
            return "refreshing page without saving, huh? you're a bad boy!";
        }
    }); 
}); 
```

我遇到的问题是，我无法想出一种方法来检查是否单击了“保存按钮”，如`else if`上面片段中的子句中键入的那样。

表单本身非常复杂，我无法对其进行太多更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:51:28.863

```
$(document).ready(function() {
    var not_saved = true;
    $('#saveButtonId').on('click', function() {
        not_saved = false;
    })

    $(window).on('beforeunload', function() {
        if (not_saved && billChanged)
            return "refreshing page without saving, huh? you're a bad boy!";
        }
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:54:50.150

您可以定义一个全局变量。更改`onclick`按钮的值，然后在您的函数中检查它

```
var clickedButton = false; 
```

然后你的html

```
<input type="button" .... onclick="clickedButton=true;"> 
```

然后在你的函数中

```
else if ( clickedButton ) {
  return false;
} 
```

# c# - 使用 MVVMCross 在哪里收听广播动作

> ID：12687149
> 
> 赞同：1
> 
> 时间：2012-10-02T08:48:18.373
> 
> 标签：c#, mono, xamarin.android, mvvmcross

制作我的蓝牙应用程序时，我需要在我的代码的 Android 端访问一些广播操作。

所有这些都在我的核心中运行，所以我有一个 ViewModel 将通过我的界面调用

```
public interface IConnectionService
{
    //Properties
    string IntentName { get; }

    //Events
    event EventHandler<SearchConnectionItemEventArgs> SearchItemFoundEvent;

    //Methods
    void RunIntent();
    void SearchConnection();
    void Connect(string macAddress);
} 
```

RunIntent 提示用户打开蓝牙（可能是另一种技术），然后我想在蓝牙状态改变时触发事件

```
Android.Bluetooth.BluetoothAdapter.ActionStateChanged 
```

而且当我搜索我需要的新设备时

```
Android.Bluetooth.BluetoothDevice.ActionFound 
```

但是我不能将 [Android.Runtime.Register("ACTION_FOUND")] 和 [Android.Runtime.Register("ACTION_STATE_CHANGED")] 放在我的课堂上，这只有在我尝试将它放在我的视图上时才有效，但是如果我我认为我需要逻辑吗？

是否有可能以某种方式将其放入核心？

我的类实现我的接口

```
using System;
using Android.Bluetooth;
using Android.Content;
using Cirrious.MvvmCross.Android.Platform.Tasks;
using Test.Core.Interfaces;
using Test.Core.Models;

namespace Test.Core.Android
{
    public class AndroidBluetooth : MvxAndroidTask, IConnectionService
    {
    #region Private Fields

    private readonly BluetoothAdapter _bluetoothAdapter;

    #endregion
    #region Public Fields

    #endregion
    #region Properties

    public string IntentName { get { return "Turn on Bluetooth"; }}

    #endregion
    #region Constructor

    public AndroidBluetooth()
    {
        _bluetoothAdapter = BluetoothAdapter.DefaultAdapter;
    }

    #endregion
    #region Events

    public event EventHandler<SearchConnectionItemEventArgs> SearchItemFoundEvent;
    private void ItemFound(SearchConnectionItemEventArgs e)
    {
        if(SearchItemFoundEvent != null)
        {
            SearchItemFoundEvent(this, e);
        }
    }

    #endregion

    #region Methods
    public void RunIntent()
    {
        if (_bluetoothAdapter == null)
        {
            //No bluetooth support on phone
        }
        else if(!_bluetoothAdapter.IsEnabled)
        {
            var intent = new Intent(BluetoothAdapter.ActionRequestEnable);
            StartActivity(intent);
        }
    }

    public void SearchConnection()
    {

        if (_bluetoothAdapter == null)
        {
            //No bluetooth support on phone
        }
        else if (!_bluetoothAdapter.IsEnabled)
        {
            //Bluetooth not turned on
            RunIntent();
        }
        else
        {
            FindBondedDevices();
        }
    }

    private void FindBondedDevices()
    {
        var pairedDevices = _bluetoothAdapter.BondedDevices;

        if (pairedDevices.Count <= 0) return;

        foreach (var item in pairedDevices)
        {
            ItemFound(new SearchConnectionItemEventArgs {Name = item.Name, MacAddress = item.Address});
        }
    }

    private void FindNewDevices()
    {
        if (_bluetoothAdapter == null)
        {

        }
        else if (!_bluetoothAdapter.IsEnabled)
        {

        }
        else
        {
            _bluetoothAdapter.StartDiscovery();
            //Bind event for new devices
        }
    }

    public void Connect(string macAddress)
    {

    }
    #endregion
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:59:35.950

免责声明：我不熟悉 Android 的这一部分——我从未使用过蓝牙堆栈。

从您的描述中，听起来您已经知道答案了——这些属性需要在 Activity/View 中使用方法。

当然，一旦将它们添加到 Activity/View 中，就很容易将这些方法调用路由到 ViewModel - 只需使用`ViewModel`View 中的属性。

* * *

首先尝试将这部分工作作为独立示例可能更容易 - 然后研究如何使其跨平台和/或 mvvm。

# mysql - 如何按每列具有不同优先级的多列排序？

> ID：12687150
> 
> 赞同：2
> 
> 时间：2012-10-02T08:48:19.123
> 
> 标签：mysql, database, sql-order-by, database-performance

让我们假设一个`users`像这样的表：

```
 age  | popularity
------------------
  16  |     2
  23  |     5
  17  |     2
  16  |     3
 ...  |    ...
 ...  |    ... 
```

我想选择年龄较小且受欢迎程度较高的行。但不要选择其中之一。

和：

```
SELECT *
FROM `users`
ORDER BY `age` ASC, `popularity` DESC 
```

我们将年轻用户排在首位，相同的用户`age`将根据他们之间的受欢迎程度进行排序。

与：

```
SELECT *
FROM `users`
ORDER BY `popularity` DESC, `age` ASC 
```

我们将最受欢迎的用户排在最前面，并在他们之间`popularity`排序相同的用户`age`。

但我不想选择一个排序。我想把它们混合起来。

**如何实现基于 60%`popularity`和基于 40% 的排序`age`？**

这种排序有通用解决方案吗？自定义函数是唯一的选择吗？

**更新**：样本期望的结果

```
 age  | popularity
------------------
  16  |     8
  15  |     2
  23  |     5
  29  |    10
  16  |     3
  16  |     2
  17  |     2 
```

因此，如果用户非常年轻，即使人气较低，她也应该更高。如果用户很受欢迎，即使她年龄较大，她也应该更高。

最年轻、最受欢迎的人应该永远在最前面。最古老和最不受欢迎的应该总是在底部。

**我正在寻找一种通用的解决方案，不仅适用于数字，还适用于日期、字符串等。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T08:52:02.680

```
select *, priority*0.6+age*0.4 as sortkey from ... order by sortkey. 
```

# ant - 如何获得蚂蚁正确输出åäö（和类似字符）的任务？

> ID：12687152
> 
> 赞同：1
> 
> 时间：2012-10-02T08:48:20.550
> 
> 标签：ant, character-encoding

我的第一个问题。请多多包涵！

我有一个 Ant 任务，需要在继续之前从用户那里获得一些输入。我使用[输入任务](http://ant.apache.org/manual//Tasks/input.html)来实现这一点。输入消息将包含瑞典语字符（例如 å、ä 和 ö），但我无法让 Ant 正确输出消息。我正在使用运行 Windows 7 Pro English 的机器上的命令行进行测试（但显然使用的是瑞典语键盘）。例子：

```
<input message="åäö"/> 
```

将输出：

```
[input] Õõ÷ 
```

build.xml 以 UTF-8 格式保存。如果我在命令行上执行“chcp”，我会得到“活动代码页：850”。

[执行echo](http://ant.apache.org/manual//Tasks/echo.html)时可以看到相同的结果：

```
<echo message="åäö"/> 
```

将输出：

```
[echo] Õõ÷ 
```

但在回声任务的情况下，我能够做到：

```
<echo encoding="850" message=åäö"> 
```

获得预期的输出：

```
[echo] åäö 
```

但是，输入任务没有编码属性，我非常希望根本不必定义编码，尤其是在每个任务级别上（因为我无法确定 Ant 脚本在哪台机器上将从）运行。

PS如果接收到的输入包含åäö，我会遇到其他问题，并且我将输入设置为稍后在过滤器复制任务中使用的属性，但我想这是另一个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:25:35.490

我可以在我的波兰语 Windows 上观察到这个问题。

```
<script language="javascript">
  java.lang.System.out.println("default charset: "
  + java.nio.charset.Charset.defaultCharset());
</script> 
```

将默认字符集报告为“windows-1250”，而控制台以“iso-8859-2”运行（我猜是这样）。

看起来`<input>`任务使用默认字符集，认为它会匹配控制台输入。如果没有，我**设法以**这种方式覆盖编码：

```
set ANT_OPTS=-Dfile.encoding=iso-8859-2
ant 
```

在您的情况下，我会尝试 force `850`，因为看起来 JRE 默认为其他内容。

[这个问题](https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding)帮助我找到了属性名称。

从哪里`ant`运行也很重要。如果我从我的 ide、[jedit](http://jedit.org)控制台插件运行它，我不需要覆盖编码，因为我将它配置为在`windows-1250`. 所以这似乎是另一种**解决方法，使用 IDE**。

# linqpad - 有没有人可以帮助如何避免在 LinqPad 编辑模式下自动提交已编辑的数据？

> ID：12687153
> 
> 赞同：0
> 
> 时间：2012-10-02T08:48:22.507
> 
> 标签：linqpad

在最新版本 V.4.42.14 中，用户可以直接在网格模式下编辑数据，非常棒。每次我编辑一行数据并将光标移到下一行时，编辑后的数据会自动提交到数据库。如果不单击保存按钮，自动提交是非常危险的。有时我只是为了演示目的而编辑数据，实际上当我将光标移动到下一行时我不希望它提交。有没有人可以帮助如何避免在 LinqPad 编辑模式下自动提交已编辑的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:39:04.657

LINQPad 以这种方式运行以与 SSMS 保持一致，并避免在关闭查询或按 F5（或关闭 LINQPad）而不保存时丢失大量编辑的可能性。

如果有足够的需求，提供表级缓冲选项并不难。但是，它需要对可扩展性模型进行增强，以允许查询向主机发出信号，表明它们有未保存的数据，以便 LINQPad 可以提供“放弃更改”提示以避免上述情况。

# python - ValueError：需要超过 0 个值才能解包

> ID：12687158
> 
> 赞同：2
> 
> 时间：2012-10-02T08:48:43.417
> 
> 标签：python, string, file

我是 python 新手，我正在尝试制作一个读取文件的程序，并将信息放在自己的向量中。该文件是一个 xyz 文件，如下所示：

```
45 

Fe -0.055 0.033 -0.047
N -0.012 -1.496 1.451
N 0.015 -1.462 -1.372
N 0.000 1.386 1.481
N 0.070 1.417 -1.339
C -0.096 -1.304 2.825
C 0.028 -1.241 -2.739
C -0.066 -2.872 1.251
C -0.0159 -2.838 -1.205 
```

从第 3 行开始，我需要将每个放在自己的向量中，到目前为止，我有这个：

```
file=open("Question4.xyz","r+")
A = []
B = []
C = []
D = []
counter=0
for line in file:
    if counter>2: #information on particles start on the 2nd line
        a,b,c,d=line.split()
        A.append(a)
        B.append(float(b))
        C.append(float(c))
        D.append(float(d))
    counter=counter+1 
```

我收到此错误：

```
 File "<pyshell#72>", line 3, in <module>
    a,b,c,d=line.split()
ValueError: need more than 0 values to unpack 
```

关于我哪里出错的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:54:55.250

看起来您的行中实际上并没有导致拆分 4 个项目。为此添加一个条件。

```
for line in file:
    spl = line.strip().split()
    if len(spl) == 4:  # this will take care of both empty lines and 
                       # lines containing greater than or less than four items
        a, b, c, d = spl
        A.append(a)
        B.append(float(b))
        C.append(float(c))
        D.append(float(d)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:52:46.297

您是否会碰巧在某个地方有一条空行（或只有 a `'\n'`）？

你可以强迫

```
if counter >= 2:
    if line.strip():
        (a,b,c,d) = line.strip().split() 
```

**不**检查拆分行的 a 是否为 4的一个优点`len`是，如果它没有正确数量的字段，它不会默默地跳过该行（就像您在文件末尾遇到空行一样） ：你会得到一个异常，这会迫使你仔细检查你的输入（或你的逻辑）。

# wpf - 如何在鼠标左键按下时专注于 wpf 中的组合框？

> ID：12687161
> 
> 赞同：0
> 
> 时间：2012-10-02T08:48:57.157
> 
> 标签：wpf

```
<ComboBox   TextSearch.TextPath="MemberFullName"  IsEditable="True" Height="23" VerticalAlignment="Center" Grid.Row="1" Grid.Column="1" Margin="5,0,0,0" ItemsSource="{Binding MemberCollection}" SelectedItem="{Binding SelectedSearchMember,Mode=TwoWay,ValidatesOnDataErrors=True}">
            <ComboBox.ItemTemplate>
              <DataTemplate>
                   <TextBlock Text="{Binding MemberFullName}" VerticalAlignment="Center"/>
               </DataTemplate>
            </ComboBox.ItemTemplate>
</ComboBox> 
```

在鼠标左键按下时，它变为可编辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:04:44.140

如果您使用 MVVM 模式，请添加到您的 ViewModel 变量中：

```
 private bool _isEditableComboBox = false;
        public bool IsEditableComboBox
        {
            get { return _isEditableComboBox; }
            set { _isEditableComboBox = value; RaisePropertyChanged(() => IsEditableComboBox); }
        } 
```

添加到您的项目程序集中：`System.Windows.Interactivity`

将您的 View 命名空间添加到此程序集：

```
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
```

将您的 ComboBox 更改为：

```
 <ComboBox TextSearch.TextPath="MemberFullName" IsEditable="{Binding IsEditableComboBox, UpdateSourceTrigger=PropertyChanged}" Height="23" VerticalAlignment="Center" Grid.Row="1" Grid.Column="1" Margin="5,0,0,0" ItemsSource="{Binding MemberCollection}" SelectedItem="{Binding SelectedSearchMember,Mode=TwoWay,ValidatesOnDataErrors=True}">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="PreviewMouseDown">
                    <i:InvokeCommandAction Command="{Binding TurnOnEditMode}" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding MemberFullName}" VerticalAlignment="Center"/>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox> 
```

您必须将以下命令添加到您的 ViewModel：

```
public ICommand TurnOnEditMode { get; private set; }
        private void OnTurnoOnEditMode()
        {
            IsEditableComboBox = true;
        } 
```

# c++ - 通过其构造函数将依赖项传递给包装对象

> ID：12687163
> 
> 赞同：0
> 
> 时间：2012-10-02T08:49:04.687
> 
> 标签：c++

我有以下测试：

```
TestGet(): _interface(), _db(_interface)
{
    _interface.get = mockGet;
} 
```

在测试此类时使用：

```
class DB: public IDB
{
public:
   explicit DB(Interface_T& interface):
     _interface(interface)
   {
   }

   ...

private:
   Interface_T _interface;
}; 
```

Interface_T 是在结构中实现并从 C api 传递给我的 C 接口。我希望使用 DB 类作为 C 接口的包装器。

但是请注意，DB 将接口对象复制到其成员 _interface。因此该行：

```
_interface.get = mockGet; 
```

从 DB 对象的角度来看没有影响，尽管这是我编写测试类时的意图。你将如何重写 TestGet() 来纠正这个错误？您将如何向 DB 类的客户端展示它复制传递给它的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:26:57.123

假设您的意图是在使用的对象`TestGet`上设置一个成员，您可以：`Interface_T``DB`

A. 推迟建设`DB`：

```
TestGet(): _interface(), _db(NULL)
{
    _interface.get = mockGet;

    // Using a raw pointer here for minimalism, but in practice
    // you should prefer a smart pointer type.
    _db = new DB(_interface);
} 
```

B. 如果你可以控制`Interface_T`类，你可以添加一个`Interface_T::get`直接初始化的构造函数。然后你可以这样做：

```
TestGet(): _interface(mockGet), _db(_interface)
{
} 
```

C. 如果您可以控制`DB`该类，您可以更改它以共享所提供的所有权`Interface_T`（例如通过`boost::shared_ptr`），添加 B 中的构造函数，或为其内部`Interface_T`成员添加访问器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:43:23.983

因此，在构建 db get 时，您需要正确的接口。嗯，这很容易。只需在函数中创建适当的接口并将结果传递给构造函数：

```
Interface_T makeMockInterface()
{
    Interface_T interface;
    // I presume you will first use the C API to initialize it and than
    interface.get = mockGet;
}

TestGet() : _db(makeMockInterface())
{
} 
```

由 from的`Interface_T`值返回`makeMockInterface`，但是由于底层机器代码实际上是通过将对象复制到调用者提供的空间来返回对象，因此大多数编译器实际上会省略副本并直接在调用者提供的空间中构造对象（标准明确允许）。

TestGet 类不需要有单独的 _interface 成员，因为 _db 包含它并且它们无论如何都不会被共享，所以没有意义。

**编辑：**构造`DB`函数采用非常量引用，即使它所做的只是复制对象并且 const 引用就足够了。修复构造函数会更好，但如果它不是一个选项，我会将它转换为非常量。要么需要*两个*演员表：

```
TestGet() : _db(const_cast<Interface_T &>(static_cast<const Interface_T &>(makeMockInterface()))) 
```

或一个简单的模板助手：

```
template <typename T>
T &lvalue_cast(const T &v) { return const_cast<T &>(v); }

TestGet() : _db(lvalue_cast(makeMockInterface())) 
```

由于临时变量实际上是可变的，只是不绑定到非常量引用作为保护，两者都定义明确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:48:57.773

这是基于上面的 Jan Hudec 评论：

```
class TestGet : public ::testing::Test 
{
protected:
   TestGet() 
      :  _db(interfaceFactory())
   {
   }

   Interface_T interfaceFactory()
   {
      Interface_T interface;
      _interface.get = mockGet;
      return interface;
   }

   DB _db;
}; 
```

我喜欢这种干净的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T10:59:30.257

有几种方法，都包括某种[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)。

我最喜欢的是：

*   使用对接口的引用将对象传递给构造函数
*   使用工厂模式创建对象，并返回某种共享指针（再次使用接口）

像这样的东西（假设你有基本的抽象类）：

```
struct Interface
{
  virtual ~Interface(){}
  virtual void foo() = 0;
};
struct Derived : public Interface
{
  void foo(){}
};

struct A
{
  A ( std::shared_ptr< Interface > obj_ ) : obj( obj_ )
  {}

  std::shared_ptr< Interface > obj;
};

//...
A myA( std::shared_ptr< Interface >( new Derived ) );
// .. 
```

上面的例子是传递给构造函数。

# javascript - IE8 中的 JavaScript 日期未定义/NaN

> ID：12687165
> 
> 赞同：3
> 
> 时间：2012-10-02T08:49:07.950
> 
> 标签：javascript, date

我用它来测试日期输入是否距离今天的日期不到 7 天，它适用于除 < IE9 之外的所有浏览器

```
var today = new Date("<?=date("Y-m-d")?>"); //eg: 02-10-2012
var arrDate = new Date(startYear+"-"+startMonth+"-"+startDay); //eg: 05-10-2012
var diff = new Date(arrDate - today);
var days = diff/1000/60/60/24;
if(days<7) alert("less than 7 days."); 
```

我在 IE 控制台 (F12) 中没有收到错误，但`days`调试为`NaN`，有人知道 IE 有什么问题吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T08:54:48.153

IE 8（及以下）无法识别`y-m-d`格式中的日期字符串。

我建议您使用`y/m/d`，因为所有浏览器都可以识别。

* * *

PS：你的评论是错误的。

```
new Date("<?=date("Y-m-d")?>"); //eg: 02-10-2012 
```

应该读

```
new Date("<?=date("Y-m-d")?>"); //eg: 2012-10-02 
```

一般来说，您永远不应该评论明显的内容，以避免不反映代码的评论。`date("Y-m-d")`很明显，它根本不需要评论。

# node.js - 使用节点在 Backbone 中获取和检索集合

> ID：12687175
> 
> 赞同：0
> 
> 时间：2012-10-02T08:49:57.390
> 
> 标签：node.js, backbone.js

我正在尝试找到一种方法，如何通过 nodeJS 将我的集合的整个状态保存和检索到服务器（MySQL）。因此我重写了集合的获取和保存功能

```
var TrackList = Backbone.Collection.extend({
 model: app.Track,
 fetch: function() {
  var socket = io.connect('http://localhost:9001');
  socket.emit('load', {id: window.id});
  socket.on('success', function(data) {
   var collectionState = JSON.parse(data[0].data);
   //now what to do with the collectionState on fetch
  }
 },
 save: function() {
  var socket = io.connect('http://localhost:9001');
  socket.emit('save', { project: app.Tracks.toJSON(), id: window.id });
 }
});
app.Tracks = new TrackList();
app.Tracks.fetch(); 
```

保存效果很好，并使用 node-mysql 将其写入 MySQL 数据库。尝试“加载”时，我从数据库中获取了正确的数据，但我不知道如何将 colletionState 对象推送到 TrackList 本身。

JSON格式正确（至少我认为）

```
[{"modelAttr1":"attr1","modelAttr2":"attr2"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:14:21.110

您可以调用集合的 add 方法。如果您传递一个对象，它会创建一个新模型并添加到集合中，但是如果您传递一个数组（因为它是您的情况），它会将数组的每个项目转换为集合的模型，因此您只需要发送响应. 像这样的东西：

```
var TrackList = Backbone.Collection.extend({
 model: app.Track,
 initialize : function(){
   //helpful for catch the "this" in the AJAX response to the current Collection
   _.bindAll(this);
 },
 fetch: function() {
  var socket = io.connect('http://localhost:9001');
  socket.emit('load', {id: window.id});
  socket.on('success', this.parse);
 },
 parse: function(data){
   var collectionState = JSON.parse(data[0].data);
   this.add( collectionState );
 },
 save: function() {
  var socket = io.connect('http://localhost:9001');
  socket.emit('save', { project: app.Tracks.toJSON(), id: window.id });
 }
});
app.Tracks = new TrackList();
app.Tracks.fetch(); 
```

# code-first - Entity framework 5 foreign key mapping convention

> ID：12687176
> 
> 赞同：2
> 
> 时间：2012-10-02T08:49:59.503
> 
> 标签：code-first, entity-framework-5

I have 2 entities Role and Permission with association one-to-many accordingly.

```
public class Role
{             
    public int Id { get; set; }

    public bool IsAdmin { get; set; }

    public virtual ICollection<Permission> Permissions { get; set; }
}

public class Permission
{
    public int Id { get; set; }

    public string Code { get; set; }

    public string GroupName { get; set; }

    public virtual Role Role { get; set; }    
} 
```

And created mapping classes for them inherited from `EntityTypeConfiguration` class.

When I run my application EF created database for me and foreign key for these entities above was **Role_Id**.

**How can I change existing or add new convention to get ride of the underscore in foreign key?**

So I want to have **RoleId** as a foreign key for my entities.

I don't want use data annotation attributes and don't want to add extra property to Permission class (`public int RoleId { get; set; }`) in order to use it in mapping like this:
`HasRequired(x => x.Role).WithMany(y => y.Permissions).HasForeignKey(o => o.RoleId);`

Thanks,
Alexey

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T10:27:13.353

实体框架目前不支持自定义全局约定，但您可以覆盖 Fluen API 中的键名：

```
modelBuilder.Entity<Permission>()
            .HasRequired(x => x.Role)
            .WithMany(y => y.Permissions)
            .Map(m => m.MapKey("RoleId")); 
```

# jenkins - BuildHive Jenkins build error

> ID：12687180
> 
> 赞同：1
> 
> 时间：2012-10-02T08:50:13.603
> 
> 标签：jenkins, cloudbees

I'm trying to use Cloudbees' BuildHive service to build my GitHub-hosted project - [bkemu-android](https://github.com/3cky/bkemu-android "bkemu-android project"). This is android-maven-plugin controlled project, so [Jenkins job](https://buildhive.cloudbees.com/job/3cky/job/bkemu-android/) was created using "Maven job" template. But project build is just failing constantly with some obscure log message:

> Parsing POMs [bkemu-android] $ /usr/bin/tenant-isolate /opt/jdk/jdk1.6.latest/bin/java -XX:MaxPermSize=128m -cp /scratch/jenkins/maven3-agent.jar:/opt/maven/latest/boot/plexus-classworlds-2.4.jar org.jvnet.hudson.maven3.agent.Maven3Main /opt/maven/latest /scratch/jenkins/slave.jar /scratch/jenkins/maven3-interceptor.jar 52322
> 
> setup process failed (1): Success
> 
> ERROR: Failed to launch Maven. Exit code = 1

What I should change in my project or BuildHive job settings to successfully build my project?

# java - URL Rewrite IIS and Glassfish from port 8080 to 80

> ID：12687181
> 
> 赞同：0
> 
> 时间：2012-10-02T08:50:18.903
> 
> 标签：java, iis, glassfish

I'm running a glassfish server that handles all jsp and servlets.

Now there is a way to get it working so that you can run IIS on port 80 and glassfish on port 8080, now the problem is:

When i request `http://localhost/myWebApplication` it should rewrite the url and use `http://localhost:8080/myWebApplication`

Basically I make a request to IIS, but the response I get back must be from Glassfish.

When I request the url with port `8080` it works, because its getting it from Glassfish, but i need to go through IIS to Glassfish.

Here is a website that explains it all: [http://jstoup.wordpress.com/2012/04/25/how-to-integrate-glassfish-with-iis/](http://jstoup.wordpress.com/2012/04/25/how-to-integrate-glassfish-with-iis/)

but I still can't get it working.

I have got no idea how my url rewrite rules must be set up.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:20:39.993

这是您引用的博客中的詹姆斯。如果你还没有得到这个工作，你可能必须启用你的服务器场作为代理。如果您选择您的网络农场，那么中央控制台中应该有一个代理配置。您所要做的就是打开它，您应该一切顺利。如果您有任何问题，请告诉我

# facebook - customize friend invite in as3

> ID：12687182
> 
> 赞同：-1
> 
> 时间：2012-10-02T08:50:23.740
> 
> 标签：facebook, actionscript-3, facebook-as3-api

I want to build a customize friend invite inside my flash application. I don't want to use the Facebook ui box.

Any idea what is the best solution for it?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:05:45.920

我认为你必须做一个自定义图形，然后带走所有用户的朋友。
然后你必须使用 as3 来选择朋友并将其保存到一个数组中。
最后，您必须对 Facebook 进行最后一次调用以邀请所有选定的朋友。

# api - Youtube API：上传到开发者账号

> ID：12687185
> 
> 赞同：6
> 
> 时间：2012-10-02T08:50:36.303
> 
> 标签：api, oauth, youtube

这是我想要实现的目标：

用户可以通过一个简单的网络表单将视频上传到我的 youtube 帐户。

这是我不明白的：

这可以使用已弃用的 ClientLogin 身份验证。但它没有使用 OAuth 2.0 身份验证，因为这个人总是将用户登录到他自己的帐户，而不是我的帐户。正确的？如果没有，我如何使用 OAuth 身份验证让用户能够将视频上传到我的 youtube 帐户？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-06T13:44:58.930

OAuth2 服务帐户不适用于 Youtube API： [https ://developers.google.com/youtube/v3/docs/errors](https://developers.google.com/youtube/v3/docs/errors)

> 如果您尝试使用 OAuth 2.0 服务帐户流程，则通常会出现此错误。YouTube 不支持服务帐户，如果您尝试使用服务帐户进行身份验证，则会收到此错误消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-16T20:39:04.743

如果此问题仍然是 [https://code.google.com/p/gdata-issues/issues/detail?id=5370](https://code.google.com/p/gdata-issues/issues/detail?id=5370) UNRESOLVED，则无法将服务帐户与 YouTube v3 数据 API 一起使用。截至 2014 年 3 月，我无法创建/列出新的播放列表或将视频发布到现有的播放列表。谷歌的人真的应该明确这一点，因为我浪费了几个小时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:01:55.220

Google 的 OAuth2 授权服务器支持使用[Service Accounts](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)。它们正是针对这个用例而设计的。这也适用于 Youtube API。

您可以在 Google 的[API 控制台](http://code.google.com/apis/console)中创建一个服务帐户。在那里您会获得一个服务帐户电子邮件地址，您必须将其设置为您用于 Youtube 视频的 Google 帐户的[备用电子邮件地址。](https://www.google.com/accounts/b/0/EditUserInfo)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T15:47:06.373

Jan Gerlinger 的答案有效吗？我还收到错误消息，指出该电子邮件地址已与其他 Google 帐户相关联。我想v3不可能，但是v2可以吗？

# java - Android different styles for different versions android and screens

> ID：12687186
> 
> 赞同：0
> 
> 时间：2012-10-02T08:50:36.317
> 
> 标签：java, android, mobile

Sorry if this question smb asked before me but I couldn't find answer. I wanna support different screens and android versions in one apk. I read reference about support different screens and versions android.

As I understood I can create dir values with postfix -v7(for example). And this style will be chosen for android with version7\. And it works.... But what if I wanna create different styles for different screen in 7th sdk.

I can create values with postfix -large or -small or smth else. But How can I specify this values with values-v7(for android with 7th sdk)? Or android will do it automaticaly?

I need values-v7, cause I specify parent style for my application(for android 2 it's nothing, but for Android 3 or hight it's holo)...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:00:59.630

您应该查看[提供备用资源中的 android 开发资源](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)

例如，您可以拥有一个包含布局文件的目录**layout-large-hdpi-v7**。它说布局文件适用于具有 hdpi 密度的大屏幕并支持版本 7 及更高版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T09:01:53.940

您可以附加任意数量的资源文件夹后缀，用破折号分隔，但您必须按此表[http://developer.android.com/guide/topics/resources/providing-resources.html#指示的顺序列出它们表2](http://developer.android.com/guide/topics/resources/providing-resources.html#table2)

所以你可以做这样的事情，例如

```
style-large-v7 
```

# python - Is there a python-notify module for python3.2?

> ID：12687187
> 
> 赞同：2
> 
> 时间：2012-10-02T08:50:47.747
> 
> 标签：python, ubuntu, python-3.x, notifications, pynotify

I have put together a simple time difference python script with whatever I know and it works fine with Python 2.7.3\. The script finds the time difference and then sends a desktop notification in Ubuntu using `python-notify`.

```
$ cat timediff.py 
import sys
import pynotify
import datetime

now = datetime.datetime.now().replace(microsecond=0)
then = datetime.datetime(2012,11,5,8,0,0)

diff = then - now

hours = (diff.seconds) / 3600
minutes = (diff.seconds - hours * 3600) / 60
seconds = (diff.seconds  - (hours * 3600 + minutes * 60))

def sendmessage(title, message):
    pynotify.init("image")
    notice = pynotify.Notification(title,message,"/usr/share/icons/gnome/48x48/status/important.png").show()
    return notice
sendmessage("Time remaining to exam","%s days, %s hours, %s minutes and %s seconds."% (diff.days,hours,minutes,seconds)) 
```

However, it seems to fail if I run it with Python 3.2.3\. It seems like there is no `python-notify` module for Python 3.2.

```
$ python3.2 timediff.py 
Traceback (most recent call last):
  File "timediff.py", line 2, in <module>
    import pynotify
ImportError: No module named pynotify 
```

Is it possible to use python-notify with Python3 somehow or am I going to have to stick with Python 2.7 until the bindings are ported for Python 3.2?

I found a [mailing list dated April 2010](http://www.gossamer-threads.com/lists/python/python/817836) which suggests that `pynotify` may not be Python3 compatible. Has there been improvements on that regard at least?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:36:54.307

我没试过，但[这里有一个`pynotify`替代品](http://pypi.python.org/pypi/notify2)。

# cordova - new ios6 architecture error: file is universal (3 slices) but does not contain a(n) arm7vs slice

> ID：12687190
> 
> 赞同：11
> 
> 时间：2012-10-02T08:50:52.213
> 
> 标签：cordova, ios6, xcode4.5, armv7

I have a device that was designed in cordova 1.8.1 and xcode 4.4\. I wanted to be able to update it to work on the iPhone 5 and ios 6.However even when I try to just run the app for debugging in xocde 4.5 I receive this error:

```
file is universal (3 slices) but does not contain a(n) armv7s slice: /Users/Shared/Cordova/Frameworks/Cordova.Framework/Cordova for architecture armv7s. 
```

I have googled it, and tried to set the project to target arm7vs but it doesn't work. Can anyone tell me what causes this error?

Do i need to update my version of Cordova/PhoneGap?

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-02T09:44:28.813

iPhone 5 的 SoC 采用了全新架构：armv7s。当您切换到 Xcode 4.5 时，您的项目的“有效架构”设置可能已更新为包括 armv7s。问题是您的库似乎还不支持它（它们不是为 armv7s 构建的）。

您可以通过三个选项来解决此问题：

*   从项目（目标）“构建设置”/“有效架构”中删除 armv7s： ![在此处输入图像描述](../Images/88fc724082e1dcb56baa8476d8383913.png)

*   将“仅构建活动架构”设置为 YES：
    ![在此处输入图像描述](../Images/f549a8c4394f8834cf08f38c8c9e0a7a.png)

*   更新静态库（如果它们有支持 armv7s 的更新版本）

> 编辑：对于那些找不到“仅构建活动架构”选项的人，请确保“构建设置”下的“全部”过滤器按钮处于活动状态：
> 
> ![在此处输入图像描述](../Images/4bb15d5d4843a8d32985d60662af8bbc.png)

# android - android how to support multiple screen

> ID：12687191
> 
> 赞同：1
> 
> 时间：2012-10-02T08:50:53.193
> 
> 标签：android, screen

Thais is what I have done. I try to support this screen sizes:

```
xlarge screens 640dp x 960dp
large screens 480dp x 800dp
normal screens 320dp x 400dp
small screens 240dp x 400dp 
```

So I create etc. background images with that sizes (640dp x 960dp, 480dp x 800dp, 320dp x 400dp and 240 x 400). I put images in folders drawabale-xhdpi, drawabale-hdpi, drawabale-mdpi and drawabale-ldpi. When I have xlarge screen with hdpi density (it use images from hdpi folder), graphic is bad (images are not large enough). So how to use that xlarge image when I have hdpi density. Do I have to create more images and put them in some places? This is a game, I draw all in canvas, don't use layouts for drawing images.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:54:09.807

`drawable-xlarge-hdpi`您可以在文件夹中添加新的可绘制对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:56:08.813

使用此路径保存您的图像

```
res/drawable-xhdpi/my_icon.png       // bitmap for extra high density 
```

检查此[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)以获取有关多屏幕支持的更多说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T08:57:24.903

看看这个链接 -[提供资源](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)

您可以在**drawable-xlarge-hdpi**文件夹中有图像

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T09:13:15.860

始终使用相对布局来支持多个屏幕。看到这里[相同密度不同对角线长度的Android布局](https://stackoverflow.com/questions/12673605/android-layouts-for-same-density-different-diagonal-length/12674393#12674393)

# oracle - Oracle 错误：ORA-00600：内部错误代码，参数：[13009]、[5000]、[1]、[17]、[1]、[]、[]、[]、[]、[]、[] , []::

> ID：12687196
> 
> 赞同：0
> 
> 时间：2012-10-02T08:51:09.643
> 
> 标签：oracle, plsql, oracle11g, oracleinternals

我在运行一个程序时遇到了一个奇怪的问题。

Proc 如下所示：

```
procedure abc 
IS 
CURSOR xyz_cur IS
 SELECT x
       ,y
       ,z 
 from temp 
  where y IN ('abc'.'pqr'.'def','sql','pqw') 
for update nowait;
BEGIN

open xyz_cur ;
:
:

END abc; 
```

现在更早的游标查询没有'sql'，'pqw'。我已经用这两个varchar值扩展了这个IN语句。表temp在y列上有一个检查约束，我也扩展了检查约束。

现在我该如何解决我的问题，如果没有我最近添加的两个值，它可以很好地工作。

我已经尝试过，我已经分析了表格并重建了索引，但仍然没有运气。请帮助我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T09:00:13.787

ORA-600 表示“内部错误”，至少在理论上，您永远不会看到。

在第一种情况下，我建议重新启动您的数据库。

如果之后问题仍然存在，我会联系 Oracle 支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T09:00:34.510

Metalink 提到了与 SELECT.. FOR UPDATE 相关的几个问题，导致 ORA-00600 [13009]，尽管似乎没有一个完全适合您的问题（您不使用 10g 或更早版本，并且您没有树查询） - 我会建议联系 Oracle 支持。

您可以尝试的可能解决方法：

*   在游标定义中使用 UNION ALL（每个 y 值都有一个分支）
*   如果你有一组有限的 y 值：用 y not IN 反转你的逻辑......

# nginx - NGINX rewrite rule to remove leading www for Vanity URL

> ID：12687200
> 
> 赞同：0
> 
> 时间：2012-10-02T08:51:25.963
> 
> 标签：nginx, rewrite

I've searched everywhere and although there are 1000s of examples of how to strip a leading www from a URL using NGINX rewrite rules, I've yet to find an example of how to strip the leading 'www' from a vanity url.

For example, convert '*www.fred.mysite.com*' to '*fred.mysite.com*'

Can you share an example of how this should work in an nginx rewrite rule?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:31:20.287

最简单的方法是使用第二个服务器块，如下所示：

```
server {
  listen [::]:80; listen 80;
  server_name www.fred.mysite.com;
  return 301 $scheme://fred.mysite.com$request_uri;
} 

server {
  listen [::]:80; listen 80;
  server_name fred.mysite.com;

  #your site setup goes here
} 
```

尽管您可能想使用“server_name *.fred.mysite.com;” 在第一个服务器块中只是为了捕获所有可能的额外前缀，包括拼写错误

# proj - PROJ.4: Supported datums in TOWGS84

> ID：12687204
> 
> 赞同：0
> 
> 时间：2012-10-02T08:51:45.690
> 
> 标签：proj

TOWGS84 in PROJ.4 support datums transformation from another datum to WGS84 datum.

Could anyone please give me the list of datums which supported in this method.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T10:25:14.493

该`+towgs84`参数接受 3 或 7 个描述基准转换的双精度值。如果要按名称分配数据，则必须使用`+datum`，即`+datum=clrk80`。完整的基准列表及其名称位于`nad/`Proj4 目录中的 EPSG、world、ESRI 等文件中。

# e-commerce - Recurly 的产品即服务

> ID：12687209
> 
> 赞同：1
> 
> 时间：2012-10-02T08:52:13.223
> 
> 标签：e-commerce, saas, payment-processing, recurly

我很难弄清楚 Recurly 是否支持“产品即服务”类型的业务。

“*产品即服务*”具有以下特点：

1.  无月费
2.  无需预付费用
3.  只需为产品本身充电
4.  每个客户的订阅可以有不同的产品和不同的产品数量
5.  产品或（数量）可以每月更改

例如：客户可以从产品 A、B、C 和 D 中进行选择。他选择订阅我们的服务，并希望每月交付一包包含产品 A 和产品 B 的 2 包。在收到此订阅三个月后，他想要换他的包。他从包装中删除产品 A 并添加产品 C。下一次交付包含这些产品。

据我了解API，我有以下选择：

## 每个“包”为每个用户创建不同的订阅

管理所有订阅似乎太复杂了。将创建和删除许多订阅（设置为非活动，因为无法删除）。它当然不打算以这种方式使用。

## 0,00 欧元的订阅计划，每个产品都有附加组件

在创建订阅计划时，附加组件的定义似乎相当固定。我希望我的产品具有灵活性，可以随意进出订阅。好像不支持。

## 计量计费

也定义为基于使用的计费。文档中建议的用例都有固定的订阅费（我不想要）。他们还添加了定义的线性“产品”（例如 0,1 / 分钟）。似乎也不符合我的需求。

我如何使用 Recurly 最好地处理这种业务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T11:12:05.650

每个产品的附加组件 0.00 欧元将是您前进的最佳途径。附加组件非常灵活，可以根据需要从订阅计划中添加/删除。

# reporting-services - SSRS - 获取物理报告文件

> ID：12687211
> 
> 赞同：2
> 
> 时间：2012-10-02T08:52:18.083
> 
> 标签：reporting-services

基本上我有一个报告服务器，其中包含我需要迁移到新的 SSRS 服务器的大量“我的报告”报告。

**问题：**

他们是获取所有物理.RDL 文件的简单方法，而无需从旧服务器界面逐个导出文件，然后使用新服务器界面上传？

期待你的答复

史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:54:44.747

这里有一个第三方工具可以让你批量下载/上传 rdls。

[http://sqldbtips.com/showarticle.asp?ID=62](http://sqldbatips.com/showarticle.asp?ID=62)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:08:03.880

您可以使用 SSRS Web 服务 API 编写一个小型 .NET 应用程序来检索它们。[GetItemDefinition](http://msdn.microsoft.com/en-us/library/reportservice2010.reportingservice2010.getitemdefinition.aspx)方法的文章有获取单个文件的示例代码，这是一个相关的片段（复制/粘贴警报！）：

```
ReportingService2010 rs = new ReportingService2010();
rs.Url = "http://<Server Name>/_vti_bin/ReportServer/ReportService2010.asmx";
rs.Credentials = System.Net.CredentialCache.DefaultCredentials;

string reportName = "http://<Server Name>/Docs/Documents" 
                    + "/AdventureWorks Sample Reports/Sales Order Detail.rdl";
byte[] reportDefinition = null;
System.Xml.XmlDocument doc = new System.Xml.XmlDocument();

try
{
    reportDefinition = rs.GetItemDefinition(reportName);
    MemoryStream stream = new MemoryStream(reportDefinition);

    string myDocumentsFolder = Environment.GetFolderPath(Environment.SpecialFolder.Personal);

    doc.Load(stream);
    doc.Save(Path.Combine(myDocumentsFolder, "Sales Order Detail.rdl"));
} 
```

如果您围绕（部分）此代码编写一个小循环，您可能能够快速获取所有文件。

# scala - 编译错误重载方法值[应用]

> ID：12687213
> 
> 赞同：1
> 
> 时间：2012-10-02T08:52:35.057
> 
> 标签：scala, playframework-2.0

我正在尝试进行 CRUD 操作。当我试图进行编辑时，我得到了这个编译错误：

`Overloaded method value [apply] cannot be applied to (Product with Serializable)`

这是我的编辑代码：

```
def editEvent(id: Int) = Action {
    Evenement.findById(id).map {
      evenement =>
        Ok(html.user.eventEditForm(id, eventForm.fill(evenement)))
    }.getOrElse(notFound)
  } 
```

有人可以向我解释这个错误，以便我可以尝试修复它吗？

# java - Android Uri 方法 normalizeScheme 导致崩溃

> ID：12687215
> 
> 赞同：0
> 
> 时间：2012-10-02T08:52:40.177
> 
> 标签：java, android, uri

Android Uri.normaliseScheme() 方法总是崩溃。它甚至不会抛出异常。我尝试了以下代码的许多不同版本。我究竟做错了什么？

```
Uri tableUri = Uri.parse("content://fake.company.app/TableName");
Log.d(TAG, "Table URI: "+tableUri);
try
{
    if (tableUri != null)
    {
        tableUri = tableUri.normalizeScheme();
    }
}
catch (Exception ex)
{
    Log.e(TAG, ex.getMessage());
    return false;
}
return true; 
```

基本上我已经确定 normaliseScheme 是罪魁祸首（通过删除代码，一次一行）。当输入 normalizeScheme 时，我的应用程序崩溃。我什至没有在 LogCat 中获得任何信息。

如果我只保留前 2 行，它运行良好，我会收到以下日志消息：
Table URI: content://fake.company.app/TableName

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:27:35.803

唯一似乎成功的事情是自己做这项工作，通过使用 String toLowerCase 方法：

```
String uriStr = "content://fake.company.app/TableName";
Uri tableUri = Uri.parse(uriStr.toLowerCase()); 
```

# sonarqube - 如何在 Sonar 中重用多个 Cobertura xml 报告

> ID：12687228
> 
> 赞同：0
> 
> 时间：2012-10-02T08:53:24.950
> 
> 标签：sonarqube, cobertura

我在 Linux 上使用 Sonar 和使用 Ant 的 Java 项目。我有一个多模块开发项目。我已经能够导入多个源文件夹、测试文件夹和二进制文件夹。单元测试报告也可以很好地导入，因为所有报告都在一个文件夹中。但是，我们的 Cobertura 报告会生成到多个文件夹中，如下所示：

```
./coberturaReports/module1/coverage.xml
./coberturaReports/module2/coverage.xml 
```

像这样定义报告的路径不起作用：./coberturaReports/**/coverage.xml

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-02T09:39:08.853

如果这是一个多模块项目，那么您应该看看我们的 Ant 多模块示例之一：[https ://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/ut/ant /ut-ant-jacoco-modules-runTests](https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/ut/ant/ut-ant-jacoco-modules-runTests)

它使用 JaCoCo 作为覆盖引擎，但原理保持不变。

# mfc - 带有 Outlook 的 MAPISendMail 有时会导致 winmail.dat

> ID：12687230
> 
> 赞同：4
> 
> 时间：2012-10-02T08:53:28.830
> 
> 标签：mfc, mapisendmail, winmail.dat

我在 MFC 应用程序中使用**MAPISendMail()**，并且遇到一个问题，即 webmail 客户端有时会收到 winmail.dat 附件，而不是“真实”附件。

我研究了很多，发现其他人也遇到了这个问题，但没有找到解决方案。

我相信问题可能出在我的**MapiFileDesc**结构中，我让 lpFileType 成员指向 NULL，以便让邮件程序（在我的情况下为 Outlook 2010）自动确定文件类型。 **lpFiletype**是**MapiFileTagExt**结构，文档中这样说： *NULL 值表示未知文件类型或由操作系统确定的文件类型。*

所以我相信这应该适用于常见的类型，比如 JPEG 或 GIF 等。

我读到 winmail.dat 是由 Outlook 发送用微软专有的**ms-tnef编码编码的邮件引起的。**但是，在发送电子邮件时，Outlook 将“HTML”显示为突出显示，而不是 RTF。

有没有人遇到过这个问题并妥善解决？

通过 SMTP 发送等不是一种选择，因为用户应该在他们的已发送邮件文件夹中拥有邮件的副本。使用 Outlook 对象模型不是一种选择，因为这需要用户安装 Outlook，而不是任何 MAPI 兼容的客户端。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:49:40.880

我有类似的问题。

我在“一次性寻址”部分找到了[一篇 KB 文章](http://support.microsoft.com/kb/138053)，其中包含有趣的信息，说当地址以 [SMTP:SMTP 地址] 格式提供时，电子邮件总是以富文本格式发送。

对我来说，解决方法是根本不设置 MapiRecipDesc 对象的“地址”属性。相反，我将地址放在 Name 属性中。然后打开的对话框首先不解析地址，但它在发送之前解析它，然后它不在 RTF 中发送！

我什至将它与收件人的姓名和地址一起使用：

```
MapiRecipDesc.Name = "Firstname Lastname <mail@address.com>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T10:26:08.460

我也将所有附件作为 jclMapi.JclEmail、InternalSendOrSave 例程的 WinMail.Dat 文件获取，该例程由 jclEmail.Send 调用。

我所做的基本上是遵循 jtmnt 的答案并进行了更改：

```
 RealAddresses[I] := FAddress; //do not add the Recipients.AddressesType +     AddressTypeDelimiter 
```

我改变了：

```
lpszName := PAnsiChar('"' + AnsiString(RealNames[I])+'" <' +
            AnsiString(RealAddresses[I]) + '>');
lpszAddress := ''; 
```

这样我就不再将 WinMail.dat 文件作为附件发送，而是发送了预期的 PDF 和 MP3。

我真正想要报告的是，我使用的 OLE 例程在 Windows 7 中运行良好，但在 Windows 8 中停止工作。因此，我开始查看 MAPI 解决方案，但发现附加 Winmail.dat 文件时出现此问题。我找不到任何关于 OLE（使用 Outlook）在 Windows 8 中无法正常工作的提及。

（两个都：

```
OutlookApp := GetActiveOleObject('Outlook.Application') and  
OutlookApp := CreateOleObject('Outlook.Application') 
```

在 Windows 8 中不再工作，但在 Windows 7 中继续正常工作。）

感谢您的解决方案。认为您可能想知道如何将其应用于 jclMapi 代码以及 Win8 中 OLE 的这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-19T12:58:18.137

对 Outlook 的行为感到好奇的是，收件人域名的长度很重要！如果电子邮件地址域是 12 个字符或更多字符（我不知道到底是什么限制），那么我们将面临有问题的 TNEF 编码。
所以：a@hutsfluts.nl 出错了。而 abacadabraandmore@hf.nl 将导致纯文本编码。我想这不是设计使然……

上面提到的解决方法：将收件人的e-mail地址放在MapiRecipDesc的lpszName中，让lpszAddress指向一个空字符串（NOT null！）解决问题。不要问我为什么，因为我不知道为什么这会影响编码。

# matlab - 相机标定MATLAB工具箱

> ID：12687231
> 
> 赞同：7
> 
> 时间：2012-10-02T08:53:38.767
> 
> 标签：matlab, opencv, bundler, camera-calibration, matlab-cvst

我必须重新投影我的 3D 点（我已经有来自 Bundler 的数据）。

我在 MATLAB 中使用相机校准工具箱来获取相机的内在参数。我从 27 张图像中得到了这样的输出（棋盘；图像是从不同角度拍摄的）。

```
Calibration results after optimization (with uncertainties):

Focal Length:     fc = [ 2104.11696  2101.75357 ] ± [ 23.13283  22.92478 ]
Principal point:  cc = [  969.15779   771.30555 ] ± [ 21.98972  15.25166 ]
Skew:        alpha_c = [  0.00000 ] ± [ 0.00000  ]
Distortion:       kc = [  0.11555  -0.55754  -0.00100  -0.00275  0.00000 ] ± 
                       [ >0.05036   0.59076   0.00307   0.00440  0.00000 ]
Pixel error:     err = [  0.71656   0.63306 ] 
```

注：数值误差约为标准偏差的三倍（供参考）。

我想知道数值误差，即焦距误差 +- [23.13283 22.92478] 、主点误差等。这些误差数字实际代表什么以及它们的影响是什么？

像素误差真的很小。

到目前为止，我使用上述数据中的以下矩阵进行重新投影：

`K=[ 2104.11696 0 969.15779; 0 2101.75357 771.30555;0 0 1]`

上面的矩阵“K”对我来说似乎是正确的。如果我做错了什么，请纠正我...

将等待您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-19T12:46:41.467

这里有两种错误。

一是重*投影误差*。校准相机后，您可以使用生成的相机参数将世界坐标中的棋盘点投影到图像中。那么重投影误差是那些投影点和检测棋盘点之间的距离。重投影误差的可接受值取决于您的应用程序，但一个好的经验法则是平均重投影误差应小于 0.5 个像素。

另一种错误是您为每个估计参数获得的 +/- 间隔。这些是基于优化算法产生的[标准误差。](http://en.wikipedia.org/wiki/Standard_error)Bouguet 的相机校准工具箱为您提供的值实际上是标准误差的 3 倍，对应于 99.73% 的置信区间。换句话说，如果相机校准工具箱报告焦距误差为 +- [23.13283 22.92478]，那么实际焦距在您估计的区间内，概率为 99.73%。

重投影误差使您可以快速测量校准的准确性。标准误差——我们称之为*估计误差*——对于更仔细地分析你的结果很有用。例如，您应该尝试排除具有高平均重投影误差的校准图像。另一方面，如果您的估计误差很大，您可以尝试添加更多校准图像。

顺便说一句，计算机视觉系统工具箱现在包括一个[GUI 相机校准器应用程序](http://www.mathworks.com/help/vision/ug/find-camera-parameters-with-the-camera-calibrator.html)，它使相机校准变得更加容易。文档中对重投影错误也有很好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T20:50:33.823

相机校准工具箱从棋盘图像中提取网格点，并将其用于查找校准参数。

像素误差是提取的网格点的平均重投影误差，即实际像素位置和使用计算的K矩阵的位置。因此，尽管您的数字相当，但这些数字大多在 1 以内（1 个像素误差）。焦距误差是计算焦距的方差。

您只需要 3 或 4 张图像即可找到相机的校准（我忘记了实际数字）。如果您提供多张图像，它将为 3-4 张图像的所有组合计算 K 并计算一个 K。误差是所有这些计算出的 K 的方差。

您的数字非常高（与您的 22-23 像素相比，它应该在 3-4 像素内）。原因是用于校准的错误图像和错误的网格点初始估计（您可以通过选择图像中的 4 个角手动执行此操作）。通常 f_x 和 f_y 在现代相机中是相同的，你应该取两者的平均值 (f_x + f_y)/2。

关于您的原则点，您的相机分辨率似乎为 1920 x 1600，您应该使用 [980 800] 而不是工具箱提供的分辨率。现在，通常 ccd 被仔细放置，并且您的原则点正好位于中心。

# php - 浏览器上的刷新按钮

> ID：12687234
> 
> 赞同：2
> 
> 时间：2012-10-02T08:53:44.370
> 
> 标签：php, html

我有一个简单的编码问题。我尝试创建一个带有文本框和共享按钮的页面。

当用户单击共享按钮时，文本框中的文本将作为字符串插入名为“posts”的数据库表中。

我使用以下代码。

```
<?php
    if(isset($_POST['share']))
    {
            $status = $_POST['status'];
            $res = mysql_query("insert into `posts`(postid,username,post,pointscollected) values('','$username','$status','')");
            if($res)
                echo "<script type='text/javascript'>alert('Posted successfully')</script>";
            else
                echo "<script type='text/javascript'>alert('some error')</script>";
    }
    else
    {
        ?>
            <form action="<?php $_SERVER['PHP_SELF']?>" method="post">
            Status : <input type = "text" name ="status">
            <input type = "submit" name ="share">
            </form>
        <?php
    } 
```

此解决方案工作正常，但**用户刷新页面时出现问题**。浏览器将显示一个消息窗口，要求重新发送信息，这会将帖子再次提交到表中。然后**同一个条目在表中出现两次**。

我希望**用户在提交后留在同一页面上**。但是页面刷新不应显示消息窗口或再次发送信息。

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T08:57:59.320

分享后重定向用户，使用redirect

```
header('Location: whatever.php');
exit; 
```

用这个 ：

```
<?php
if(isset($_POST['share'])) {
      $status = $_POST['status'];
      $res = mysql_query("insert into `posts`(postid,username,post,pointscollected) values('','$username','$status','')");
      if($res) {
      ?>
          <script type='text/javascript'>alert('Posted successfully')</script>
      <?php              
          header('Location: whatever.php');
          exit;
        } else {
         ?>
          <script type='text/javascript'>alert('some error')</script>
       <?php
          header('Location: whatever.php');
          exit;
         }
    }
 ?> 
```

顺便说一句，最好不要使用 javascript 提醒用户

**如果其他情况，请使用大括号**

PS：您还可以使用 JavaScript 重定向用户`window.location`

[**标头参考**](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:14:23.683

在您完成插入查询和所有内容后，立即使用以下命令切换到另一个页面：

```
<?php
header('Location: /path/to/yourotherpage.php');
exit();
?> 
```

它的作用是重定向到另一个页面，这会从浏览器的页面“内存”中删除所有 POST 数据。

在该页面上，您写下诸如“您的东西已提交并记录”之类的内容，无论您想要什么，您都可以选择。

如果您的用户在该页面上刷新，则根本不会插入任何内容。

那应该行得通。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:08:23.103

您可以在保存帖子的逻辑完成后尝试进行重定向。

```
 header("location: $my_page");
            exit(); 
```

将变量 $your_page 设置为包含您的代码的页面名称 $my_page = 'yourpage.php';

这应该有效：

```
$my_page = 'your_page.php'
if(isset($_POST['share']))
{
        $status = $_POST['status'];
        $res = mysql_query("insert into `posts`(postid,username,post,pointscollected) values('','$username','$status','')");
        if($res)
        {
            echo "<script type='text/javascript'>alert('Posted successfully')</script>";
            header("location: $my_page");
            exit();
        }
        else
        {
            echo "<script type='text/javascript'>alert('some error')</script>";
            header("location: $my_page");
            exit();
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T08:57:00.000

它被称为“redirect-after-post”：在您收到 post 请求并对其进行了一些有用的操作后，您（通常）将用户重定向回他们自己的帖子，或其他任何内容。

# java - Apache CXF - 在 In 和 Out 拦截器之间共享数据

> ID：12687235
> 
> 赞同：11
> 
> 时间：2012-10-02T08:53:45.050
> 
> 标签：java, cxf

我正在使用 Apache CXF 作为 REST 提供程序。

我想在进入 web 服务时收集数据，在进入响应之前收集数据并在响应中添加一些计算。对于这个问题，为了简单起见，假设我想获取输入的开始时间、发送响应之前的完成时间，并将总时间添加到响应中。

现在，我该怎么做？我创建了单独工作的 In 和 Out 拦截器，但是如何在 Out 拦截器中使用来自 In 拦截器的数据？

谢谢伊多布

# 更新：

我试图将数据设置为上下文参数

```
message.setContextualProperty(key,value); 
```

但我得到 NULL

```
message.getContextualProperty(key); 
```

我也尝试了同样的方法，但只是使用

```
message.put(key,value) and message.get(key) 
```

没用。

有想法吗？

谢谢你，伊多布

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-02T12:50:32.813

您可以将值存储在[`Exchange`](http://cxf.apache.org/javadoc/latest/org/apache/cxf/message/Exchange.html). CXF 为每个请求创建一个`Exchange`对象，作为请求/响应对的输入和输出消息的容器，并使其可以`message.getExchange()`从两者访问。

在拦截器中：

```
public void handleMessage(Message inMessage) throws Fault {
  inMessage.getExchange().put("com.example.myKey", myCustomObject);
} 
```

出拦截器

```
public void handleMessage(Message outMessage) throws Fault {
  MyCustomObject obj = (MyCustomObject)outMessage.getExchange().get("com.example.myKey");
} 
```

（对于客户端拦截器反之亦然，其中 out 将存储值，而 in 将检索它们）。选择一个您知道不会被其他拦截器使用的密钥 - 包限定名称是一个不错的选择。请注意，like `Message`, `Exchange`is a`StringMap`并且具有以 a 为键的通用 put/get 方法，这些方法`Class`为您提供编译时类型安全性并节省您必须转换的时间：

```
theExchange.put(MyCustomObject.class, new MyCustomObject());
MyCustomObject myObj = theExchange.get(MyCustomObject.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:03:13.760

您的拦截器可以访问`javax.xml.ws.handler.MessageContext`. 这 extends `Map<String,Object>`，因此您可以将任何您想要的内容放入上下文并稍后在请求中访问它：

```
public boolean handleMessage(final MessageContext context) {
    context.put("my-key", myCustomObject);
            // do whatever else your interceptor does
} 
```

稍后的：

```
public boolean handleMessage(final MessageContext context) {
    MyCustomObject myCustomObject = context.get("my-key");
            // do whatever else your interceptor does
} 
```

# python - 在一个函数上创建一个循环，该循环使用包装器在新行中打印出它所接收的函数的元素

> ID：12687236
> 
> 赞同：0
> 
> 时间：2012-10-02T08:53:54.067
> 
> 标签：python, python-2.7

我有一个需要两个列表的函数。现在我现在拥有的是该函数将从列表中获取所有参数并将它们打印在新行中。问题是我不能改变函数本身，而是我必须在它上面创建一个包装器或一个循环来做我需要它做的事情。

```
Name = ['one', 'two', 'three']
size = [1, 2, 3]

def createSomething(Name, size = None):
    if size:
         something = loudEchoCmd("something create --size %s --name %s " % ((',')join(size), (',')join(Name)))
    else:
         something = loudEchoCmd("something create --name %s " % (',')join(Name))
    return something 
```

当我运行它时，我得到的是：

```
 Example:
 something create --size 1, 2, 3 --name one, two, three 
```

这就是我想要得到的：

```
 Example:
 something create --size 1 --name one
 something create --size 2 --name two
 something create --size 3 --name three 
```

所以我需要在那个函数上创建一个包装器来做我需要它做的事情。我不知道该怎么做。这就是我通过更改函数来完成它的方式：

```
 def createSomething(Name, size = None):
      if size:
         for(i, (x1, x2)) in enumerate(zip(size,Name)):
             loudEchoCMD("something create --size {0} --name {1}")
      else:
         for x in Name:
             loudEchoCMD("something create --name {0}".format(x)) 
```

但不知道如何在不改变功能的情况下做到这一点:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:58:37.620

这应该做你想要的：

```
def createManySomethings(Names, sizes):
    for (name, number) in zip(Names, sizes):
        createSomething([name], [number]) 
```

# javascript - 强制刷新不适用于 Head JS

> ID：12687239
> 
> 赞同：0
> 
> 时间：2012-10-02T08:54:04.993
> 
> 标签：javascript, browser-cache, head.js

通过[Head JS](http://headjs.com/)加载脚本时，我无法使用 Ctrl+F5（或等效）键盘快捷键强制刷新内容。

脚本缓存正确，浏览器遵循从服务器发送的缓存指令（我使用的是 IIS 7.5）。但与标记中直接包含的脚本标签不同，我无法覆盖缓存并强制刷新通过 Head JS 加载的脚本。

我假设这是动态加载脚本方式的结果。我可以忍受这种行为，因为强制刷新仅在开发期间很方便，而且我知道可以强制从服务器检索内容的其他方法。

我只是想知道是否有人可以解释为什么会这样......

### 更新

这在 Live 中对我们来说从来都不是问题，因为我们的静态内容的缓存指令设置得当。这只是开发和质量检查中的一个问题，留给我的选项是......

*   将所有 Dev 和 QA 浏览器配置为从不缓存内容。
*   为 Dev 和 QA 环境配置不同的静态内容缓存指令 - 本质上将 MaxAge 设置为如此之小以至于内容总是会过期的东西。仅在 Live 中设置正确的 MaxAge 值。

我选择了第二个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:09:55.427

动态脚本加载不是页面加载的一部分。当您强制刷新时，浏览器会重新加载页面以及在其 HTML 和引用的 CSS 文件中引用的所有资源，但您加载的脚本`head.js`不会在页面内容中引用，并且浏览器无法确定`head.js`将要创建的内容对其他资源的引用。在创建这些引用时，浏览器不再刷新页面，因此应用正常的缓存规则。

您可以通过将唯一查询字符串附加到它们的 URL（例如`jquery.js?random=437593486394`）来强制重新加载脚本，但这将禁用对页面所有加载的缓存，而不仅仅是在您强制刷新时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:13:04.617

这也是 require.js 的一个问题。希望这些变通方法之一也适用于 Head.Js

*   如果使用 Chrome，请打开“网络”选项卡上的开发人员工具面板，右键单击并选择“清除浏览器缓存”
*   通过将日期时间戳附加到 js 资源的查询字符串来做一些“缓存破坏”
*   如果您使用 IIS（看起来像您）。转到您网站的 HTTP 响应标头面板，单击 Set Common Headers 并将 Expire Web content 设置为立即。

后者是我开发机器的首选

![IIS HTTP 响应标头面板](../Images/7eeb111110a5ced4f12a389d1d862e77.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:46:29.603

我不会说它是动态还是非动态的问题，当您注入脚本时，它仍然会导致浏览器发出 HTTP 请求并应用它应用的任何缓存逻辑。

如上所述，如果您不希望脚本被缓存..动态或静态，没关系，您通常必须以查询字符串的形式附加时间戳。

如果您只想查看更改是否有效，请在浏览器中强制刷新...通常是 CTRL+F5

# arrays - Matlab计算数组中的元素

> ID：12687241
> 
> 赞同：-1
> 
> 时间：2012-10-02T08:54:09.137
> 
> 标签：arrays, matlab

嘿伙计们，我有一个关于数组中元素计数的快速问题。数组是这样的

```
B = [1 0 1 0 0 -1; 1 1 1 0 -1 -1; 0 1 -1 0 0 1] 
```

从这个数组我想创建一个数组结构，称为列计数和另一个行计数。我真的很想创建一个数组结构，即使它是一个效率较低的过程。

基本上我想遍历每一列的数组和总计，行这些值出现的总次数。例如对于第一行，我想要以下输出。

```
Row Counts
-1 0 1

 1 3 2 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T09:14:57.460

您可以使用[hist](http://www.mathworks.nl/help/matlab/ref/hist.html)函数来执行此操作。

```
fprintf('Row counts\n');
disp([-1 0 1])
fprintf('\n')
for row = 1:3
    disp(hist(m(i,:),3));
end 
```

产量

```
Row counts
-1      0      1

 1      3      2
 2      1      3
 1      3      2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T09:08:07.583

我不完全理解您的问题，但是如果您想计算 Matlab 数组中某个元素的出现次数，您可以执行以下操作：

```
% Find value 3 in array A
A =[ 1 4 5 3 3 1 2 4 2 3 ];
count = sum( A == 3 ) 
```

比较时`A==3`，Matlab 将用 0 和 1 填充一个数组，这意味着给定位置`A`的元素具有您要查找的元素的第二个数组。因此，您可以通过累积数组中的值来计算出现次数`A==3`

编辑：您可以像这样访问不同的维度：

```
A = [ 1 2 3 4; 1 2 3 4; 1 2 3 4  ];  % 3rows x 4columns matrix
count1 = sum( A(:,1) == 2 );         % count occurrences in the first column
count2 = sum( A(:,3) == 2 );         % '                      ' third column
count3 = sum( A(2,:) == 2 );         % '                      ' second row 
```

你总是像这样访问给定的行或列。

# objective-c - Objective-C setHidden 用于一组对象

> ID：12687243
> 
> 赞同：0
> 
> 时间：2012-10-02T08:54:14.867
> 
> 标签：objective-c, object, button, checkbox, textbox

在我的项目中，我现在一次将 setHidden 用于一个对象。现在我处于一种情况，我有几组对象，我想根据情况隐藏或显示。

我正在考虑将对象命名为 checkBox01、checkBox02、checkBox03 等。我想知道是否可以通过一个电话将它们全部隐藏/显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T08:57:15.383

您可以使用`IBOutletCollection`, 并`makeObjectsPerformSelector`在其上使用。

更多信息：http `IBOutletCollection`: [//www.bobmccune.com/2011/01/31/using-ios-4s-iboutletcollection/](http://www.bobmccune.com/2011/01/31/using-ios-4s-iboutletcollection/)

# core-location - Xcode 4.5 // 导入 CoreLocation 显示：预期的 ';' 方法原型之后

> ID：12687248
> 
> 赞同：0
> 
> 时间：2012-10-02T08:54:32.187
> 
> 标签：core-location, xcode4.5

下载完最新版的Xcode 4.5后又遇到了麻烦。

我们使用 CoreLocation 库，但是当我们尝试构建项目时它失败了，因为发现了下一个错误：

解析问题：`"Expected ';' after method prototype" at CLLocationManager.h`

在这种方法中：

```
- (void)allowDeferredLocationUpdatesUntilTraveled:(CLLocationDistance)distance
                      timeout:(NSTimeInterval)timeout __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_6_0); 
```

![在此处输入图像描述](../Images/fe6852a0219711d22e826c5e34c43103.png)

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:32:13.977

我为我找到了解决方案：

我在 Xcode 4.5 上安装了 iOS SDK 5.1。

在这里查看：[如何在 Xcode 4.5 中添加旧版本的 iOS SDK](https://stackoverflow.com/questions/12602392/ios-5-sdk-is-gone-after-upgrade-to-xcode-4-5)

它对我有用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:11:58.450

我评估了项目的配置，使用了一个新的 Xcode 4.5 项目......没有成功......尝试应用相同的编译器条件等等......

下一步是尝试使代码符合 iOS 6 规范（解决已弃用的代码）并将代码转换为 ARC 要求

而且，经过几个小时令人沮丧的工作......我决定取消阻止库目录中的文件 CoreLocation.h 并评论该方法。

我现在这不是解决方案，但我没有找到任何其他解决方案。如果有人发现任何其他可能性，请...让我知道

# java - Java Cron 作业每天停止一小时？（例如：10.30 至 11.30）

> ID：12687259
> 
> 赞同：0
> 
> 时间：2012-10-02T08:55:03.917
> 
> 标签：java, cron, cron-task

我正在开发 java 应用程序，在此我想定期运行一些方法。我已经使用 java schedule 定期运行该方法。这是我的 Cron 表达式。

公共静态字符串 CRON_TIME = "2 0/10 0-9.30,11.30-23 * * ?"; /* 这应该每 10 分钟运行一次，不包括上午 10.30 到上午 11.30（1 小时）*/

这不像我预期的那样工作。我如何编写 Cron Expression 来做到这一点？给我一个想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:56:04.170

您的表达式将不起作用，因为小时范围包括分钟 (0-9.30, 11.30-23)

您将需要设置多个调用相同方法的触发器。

1.  在 0-8 小时内每 10 分钟一次 (2 0/10 0-8 * * ?)
2.  第 9 小时 0/10/20 (2 0,10,20 9 * * ?)
3.  第 11 小时 40/50 (2 40,50 11 * * ?)
4.  在 12-23 小时内每 10 分钟一次 (2 0/10 12-23 * * ?)

# php - 匹配来自 html 的定价 - 正则表达式

> ID：12687261
> 
> 赞同：0
> 
> 时间：2012-10-02T08:55:05.167
> 
> 标签：php, regex, preg-match

> **可能重复：**
> [从 HTML 文本匹配产品价格](https://stackoverflow.com/questions/12686350/matching-product-prices-from-an-html-text)

我有一个字符串，通常但不总是 html 页面源

我想从字符串中提取定价。我知道这不是一门精确的科学，货币符号放置等的组合是无穷无尽的，但总比没有好。

示例字符串：

```
$string = 'the price is <tag>&#163;10.00</tag>'; 
```

所以，我从以下正则表达式开始：

```
$price = preg_match('#(?:\$|\£|\€|\&pound;|\&\#163;)(\d+(?:\.\d+)?)#', $string); 
```

但是当然这只会返回第一个字符。

我的问题是，有没有办法一直遍历 $string 直到找到某个字符？例如 < 或空格？然后返回找到的内容，在这种情况下为：10.00

这是一种可行的方法还是有更好的方法？

这是上面的一个例子：

[http://ideone.com/u8erb](http://ideone.com/u8erb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:38:53.613

阅读文档`preg_match`，它不会返回您的匹配项，只有匹配项才会返回。

尝试这个

```
$string = 'the price is <tag>&#163;10.00</tag>';

$price = preg_match_all('#(?:\$|\£|\€|\&pound;|\&\#163;)(\d+(?:\.\d+)?)#', $string, $matches);

//This will contain your matches 
var_dump($matches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:20:36.690

`preg_match_all`使用with怎么样`(\d+(?:\.\d+)?)(?=<\s*/\s*tag\s*>)`，因为货币可能会改变？任何使用正则表达式的解决方案都将取决于一组假设，所以最好先把它们搞定：

*   您应该在哪里寻找，这些价格是否出现在给定的 div 中？
*   什么是完整的可能值？

尝试使您的正则表达式尽可能广泛，因为将来它会失败的一个常见原因是因为您没有考虑到的一些细微的变化。如果这些价格出现在带有 id 和类的标签中，请考虑使用 XHTML 解析器：

[http://php.net/manual/en/book.dom.php](http://php.net/manual/en/book.dom.php)

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

# maven - 需要有关 Sonar Jasmine 规格失败的帮助

> ID：12687263
> 
> 赞同：1
> 
> 时间：2012-10-02T08:55:19.453
> 
> 标签：maven, sonarqube, jasmine

尝试使用 maven (mvn sonar:sonar) 构建声纳仪表板时出现以下异常

```
Failed to execute goal com.github.searls:jasmine-maven-plugin:1.2.0.0:test (default) on project sample-web: There were Jasmine spec failures. -> [Help 1]
Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli) on project operative-global: Can not execute Sonar: Unable to execute maven plugin: Exception during execution of org.codehaus.mojo:cobertura-maven-plugin:2.5.1:cobertura -> [Help 2] 
```

有人可以帮助我提出解决问题的建议/意见吗？

谢谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-27T18:34:57.937

这与兼容性问题有关。将 jar 升级到最新版本后，该问题得到解决。

# android - 在 Android 上使用 httpclient 获取 logcat 错误

> ID：12687265
> 
> 赞同：0
> 
> 时间：2012-10-02T08:55:31.327
> 
> 标签：android

我一直收到此错误，但似乎找不到解决方案。

```
10-02 06:08:23.928: E/AndroidRuntime(7306): FATAL EXCEPTION: main
10-02 06:08:23.928: E/AndroidRuntime(7306): android.os.NetworkOnMainThreadException
10-02 06:08:23.928: E/AndroidRuntime(7306):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at libcore.io.IoBridge.connect(IoBridge.java:112)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at java.net.Socket.connect(Socket.java:842)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at com.samplefillform.MainActivity$1.onClick(MainActivity.java:53)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at android.view.View.performClick(View.java:3511)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at android.view.View$PerformClick.run(View.java:14105)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at android.os.Handler.handleCallback(Handler.java:605)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at android.os.Looper.loop(Looper.java:137)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at android.app.ActivityThread.main(ActivityThread.java:4424)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at java.lang.reflect.Method.invokeNative(Native Method)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at java.lang.reflect.Method.invoke(Method.java:511)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-02 06:08:23.928: E/AndroidRuntime(7306):     at dalvik.system.NativeStart.main(Native Method) 
```

而且我什至不确定如果删除此错误，此代码是否会起作用，我已经找到了 3 天的方法来做到这一点，但仍然没有运气。

这个应用程序所做的是用户输入一个名称，当按下按钮时，该名称被发送到一个远程服务器表单，这是我使用 xampp 的本地主机。这是我的源代码：

MainActivity.java

```
package com.samplefillform;

import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {
    Button send;
    EditText name;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        name = (EditText) findViewById(R.id.etFName);
        send = (Button) findViewById(R.id.bSend);

        final String sname = name.getText().toString();

        send.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                HttpClient postClient = new DefaultHttpClient();
                String postReq = "http://10.0.2.2/formcode.php";
                HttpPost request = new HttpPost(postReq);
                List<NameValuePair> postParams = new ArrayList<NameValuePair>();
                postParams.add(new BasicNameValuePair("element_8_1", sname));
                UrlEncodedFormEntity postEntity = null;
                try {
                    postEntity = new UrlEncodedFormEntity(postParams);
                } catch (UnsupportedEncodingException e) {
                    e.printStackTrace();
                }

                request.setEntity(postEntity);

                @SuppressWarnings("unused")
                HttpResponse response = null;
                try {
                    response = postClient.execute(request);
                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText 
        android:id="@+id/etFName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

    <Button 
        android:id="@+id/bSend"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/etLName"
        android:text="Send"/>

</RelativeLayout> 
```

和清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.samplefillform"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

最后是处理表单的 php 文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>App Test Form</title>
<link rel="stylesheet" type="text/css" href="./data/form_6/css/view.css" media="all" />
<script type="text/javascript" src="js/view.js"></script>
<script type="text/javascript" src="js/calendar.js"></script>
</head>
<body id="main_body" >

    <img id="top" src="images/top.png" alt="" />
    <div id="form_container">

        <h1><a>App Test Form</a></h1>
        <form id="form_6" class="digitalfuture"  method="post" action="#main_body">
                    <div class="form_description">
            <h2>App Test Form</h2>
            <p></p>
        </div>                      
            <ul >

                    <li id="li_8" >
        <label class="description">Name <span id="required_8" class="required">*</span></label>
        <span>
            <input id="element_8_1" name= "element_8_1" class="element text" maxlength="255" size="8" value="" />
            <label>First</label>
        </span>
        <span>
            <input id="element_8_2" name= "element_8_2" class="element text" maxlength="255" size="14" value="" />
            <label>Last</label>
        </span><p class="guidelines" id="guide_8"><small>Please tell us your name</small></p> 
        </li>       <li id="li_9" >
        <label class="description">Phone Number <span id="required_9" class="required">*</span></label>
        <span>
            <input id="element_9_1" name="element_9_1" class="element text" size="3" maxlength="3" value="" type="text" /> -
            <label for="element_9_1">(###)</label>
        </span>
        <span>
            <input id="element_9_2" name="element_9_2" class="element text" size="3" maxlength="3" value="" type="text" /> -
            <label for="element_9_2">###</label>
        </span>
        <span>
            <input id="element_9_3" name="element_9_3" class="element text" size="4" maxlength="4" value="" type="text" />
            <label for="element_9_3">####</label>
        </span>
        <p class="guidelines" id="guide_9"><small>Please tell us your phone number</small></p> 
        </li>       <li id="li_10" >
        <label class="description">Alternate Phone Number </label>
        <span>
            <input id="element_10_1" name="element_10_1" class="element text" size="3" maxlength="3" value="" type="text" /> -
            <label for="element_10_1">(###)</label>
        </span>
        <span>
            <input id="element_10_2" name="element_10_2" class="element text" size="3" maxlength="3" value="" type="text" /> -
            <label for="element_10_2">###</label>
        </span>
        <span>
            <input id="element_10_3" name="element_10_3" class="element text" size="4" maxlength="4" value="" type="text" />
            <label for="element_10_3">####</label>
        </span>
        <p class="guidelines" id="guide_10"><small>Please tell us an alternate phone number to contact you at</small></p> 
        </li>       <li id="li_11" >
        <label class="description" for="element_11">Email <span id="required_11" class="required">*</span></label>
        <div>
            <input id="element_11" name="element_11" class="element text medium" type="text" maxlength="255" value="your@email.com" /> 
        </div> 
        </li>

    </div>
    <img id="bottom" src="images/bottom.png" alt="" />
    </body>
</html> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:00:15.060

由于您正在从主 Ui 线程中获取 webServices，因此您得到了[android.os.NetworkOnMainThreadException 。](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCMQFjAA&url=http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html&ei=fq1qUP2wBcSzrAeA-oHQAg&usg=AFQjCNEvDLBzaeCg8fLhaGHPBER4o27tuw&sig2=MCqtlSzjaT4z8Dd6hPR2sQ)

为避免这种情况，您必须使用异步任务或线程，

```
 send.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

new Thread(new Runnable()
    {

        @Override
        public void run()
        {

                HttpClient postClient = new DefaultHttpClient();
                String postReq = "http://10.0.2.2/formcode.php";
                HttpPost request = new HttpPost(postReq);
                List<NameValuePair> postParams = new ArrayList<NameValuePair>();
                postParams.add(new BasicNameValuePair("element_8_1", sname));
                UrlEncodedFormEntity postEntity = null;
                try {
                    postEntity = new UrlEncodedFormEntity(postParams);
                } catch (UnsupportedEncodingException e) {
                    e.printStackTrace();
                }

                request.setEntity(postEntity);

                @SuppressWarnings("unused")
                HttpResponse response = null;
                try {
                    response = postClient.execute(request);
                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }).start();

        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:02:51.007

禁止在应用程序主线程上进行联网操作。您应该为此使用[AsyncTask ：](http://developer.android.com/reference/android/os/AsyncTask.html) [Painless Threading](http://android-developers.blogspot.in/2009/05/painless-threading.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:00:11.717

这正是所说的......在 Android 3 及更高版本中，您无法在主/UI 线程上进行网络调用。您需要为其打开新线程。在您的 ClickListener 中输入：

```
new Thread(new Runnable()
        {

            @Override
            public void run()
            {
                // TODO Auto-generated method stub

            }
        }).start(); 
```

将所有网络代码放入`run()`函数中。

# javascript - 如何使用 kartograph.js？

> ID：12687269
> 
> 赞同：1
> 
> 时间：2012-10-02T08:55:56.277
> 
> 标签：javascript, python, svg, kartograph

有没有人使用过图书馆 kartograph.js 和“kartograph.py”？你知道我是否需要'kartograph.py'才能运行吗？如何在不安装python的情况下使用库'kartograph.py'？因为当我在“kartograph.js”中构建“BBOX”时，“kartograph.js”有问题

kartograph.js 中的错误：

```
.... 
if (height === 0) height = width * .5;
        alert(width);
        me.viewport = new kartograph.BBox(0, 0, width, height);
**Uncaught TypeError: undefined is not a function**
        me.paper = me.createSVGLayer();
        me.markers = [];
        me.pathById = {};
        me.container.addClass('kartograph');
    }
.... 
```

感谢您的帮助

HTML 页面。当我构建 $K.map 时出现错误

```
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>GEOFRANCE</title>
    <link href="/Styles/Site.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="/script/js/script.min.js"></script> 
```

```
 $script(['/script/js/jquery.min.js','/script/js/raphael.min.js', '/script/js/kartograph.js', '/script/js/chroma.min.js'], 'kartograph');

  $script(['/script/js/jquery.qtip.min.js'], 'qtip'); 
```

```
</head>
<body>
<div id="main">

<link rel="stylesheet" type="text/css" href="/Styles/jquery.qtip.css">    
<script type="text/javascript">

$script.ready(['kartograph', 'qtip'], function () {

    $(function () {
        var map,
            colorscale,
            dep_data = {},
            w = $('#map').parent().width();
        $.fn.qtip.defaults.style.classes = 'ui-tooltip-bootstrap';
        $.fn.qtip.defaults.style.def = false;

        $.ajax({
            url: 'departments.json',
            dataType: 'json',
            success: function (data) {
                alert("test : " + w);

                $.each(data, function (i, r) {
                    dep_data[r.id] = r;

                })

                map = $K.map('#map', w, w);

                alert("test2 : " +w);
                map.loadMap('france-departments.svg', function () {
                    map.addLayer('departments', {
                        titles: function (d) { return d.id },
                        styles: {
                            stroke: '0.5px'
                        },
                        tooltips: function (d) {
                            return [d.name, dep_data[d.id].density + '/km<sup>2</sup>'];
                        }
                    });
                    updateMap();
                });
            }
        });

        /*
        * update map colors
        */
        function updateMap() {
            var prop = 'density', // $('.measure.btn-custom').data('value'),
                scale = 'quantiles', // $('.scale.btn-custom').data('value'),
                colors = $('#colors').get(0).value;

            colorscale = new chroma.ColorScale({
                colors: chroma.brewer[colors],
                limits: chroma.limits(dep_data, scale, 7, prop)
            });
            map.getLayer('departments').style({
                fill: function (d) {
                    return colorscale.getColor(dep_data[d.id][prop]);
                }
            });

        }

        // init user interface
        $('.btn').click(function (event) {
            var tgt = $(event.target), par = tgt.parent();
            $('.btn', par).removeClass('btn-custom');
            tgt.addClass('btn-custom');
            updateMap();
        });

        $('#colors').change(updateMap);
        $('#colors').keyup(updateMap);

    });

});
</script>

<div id="map">
</div>

</div>
  </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:47:21.453

您需要生成要与 kartograph.py 一起使用的地图，所以这直接回答了您的下一个问题，是的，您需要安装 Python 才能使用它。如果没有 Python 解释器，你就无法运行用 Python 编写的东西。

我不太确定你在哪里读到关于 BBox 方法的信息，但文档说的有些不同： http: [//kartograph.org/docs/kartograph.js/](http://kartograph.org/docs/kartograph.js/)

# jakarta-ee - ejb(2)超时，没有调用ejbRemove，是这样吗？如果是，如何知道 ejb hss 超时

> ID：12687271
> 
> 赞同：0
> 
> 时间：2012-10-02T08:56:26.460
> 
> 标签：jakarta-ee, jboss, timeout, jboss5.x, ejb-2.x

从ejb生命周期来看，我认为当一个ejb超时时，会调用ejbRemove方法。如果我错了，请纠正我。

无论如何，如果不是这样，如何知道 ejb 已超时。

我正在使用 JBOSS 5.1 GA。

但实际上 ejb 超时时没有调用 ejbRemove，所以我无法捕获 ejb 超时事件，请帮助我以某种方式捕获此事件。

顺便说一下与事务超时有关的ejb超时，我认为不是，但不确定。

注意：我可以从 <cache-policy>org.jboss.ejb.plugins.LRUStatefulContextCachePolicy< /缓存策略>标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:14:35.860

根据 EJB 规范，调用者可以通过调用对象上的方法然后捕获生成的异常来确定对象是否超时：

*   java.rmi.NoSuchObjectException - EJBObject/EJBHome，或`@Remote`扩展 java.rmi.Remote 的接口
*   javax.ejb.NoSuchLocalObjectException - EJBLocalObject/EJBLocalHome
*   javax.ejb.NoSuchEJBException -`@Local`或`@Remote`业务接口未扩展 java.rmi.Remote

# java - 在 Japid 中替代 @Html

> ID：12687272
> 
> 赞同：0
> 
> 时间：2012-10-02T08:56:37.583
> 
> 标签：java, playframework-2.0, japid

在播放框架`@Html`中，如果我们不想播放转义 Html 字符，我们会在 scala 视图中使用。在 Japid 中是否有任何替代方案。我尝试导入`play.api.templates.Html` 并尝试过`${Html`，`${Html.get`但它们不起作用。难道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:39:30.890

Japid 默认情况下不会转义表达式的字符串值以使其 html 安全，就像什么玩！做。

参考：[https ://github.com/branaway/Japid/blob/master/documentation/manual/Japid_Generic_Engine.textile](https://github.com/branaway/Japid/blob/master/documentation/manual/Japid_Generic_Engine.textile)

如果您需要显式转义表达式的字符串值，可以使用：

```
${escapeHtml(expr)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:24:05.457

Or simply:

```
~{expr} 
```

~ means escape.

# c - 堆栈和堆内存的大小

> ID：12687274
> 
> 赞同：58
> 
> 时间：2012-10-02T08:56:43.153
> 
> 标签：c, memory-management, heap-memory, stack-memory

> **可能重复：**
> [堆栈和堆是什么以及在哪里？](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)

关于ac程序中内存布局的基本概念，我理解的是：

*   该语言使用两种主要的数据结构**stack**和**heap**。
*   创建堆栈以存储子程序的局部变量和簿记数据
*   堆是用来存放程序动态分配的变量的
*   堆本质上是可变长度的。（在堆栈上不太确定）
*   通常，编译器/语言有责任在执行之前请求操作系统创建这些数据结构。

### 问题

*   创建堆栈/堆的初始大小是多少？谁来决定？
*   它们是在哪里创建的物理内存？我看到一般描述为***“堆栈是在顶级地址中创建的，而堆是在低级地址中创建的”***请详细说明

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-02T10:33:59.360

> “堆栈是在顶级地址创建的，堆是在低级地址创建的”请详细说明

这是一个神话。它可能有历史真相的基础。它有时可能会与您在现实生活中看到的事物产生共鸣。但事实并非如此。

不过，探索起来很容易：

```
#include <stdlib.h>
#include <stdio.h>

void check(int depth) {
    char c;
    char *ptr = malloc(1);
    printf("stack at %p, heap at %p\n", &c, ptr);
    if (depth <= 0) return;
    check(depth-1);
}

int main() {
    check(10);
    return 0;
} 
```

在我的机器上，我看到：

```
stack at 0x22ac3b, heap at 0x20010240
stack at 0x22ac0b, heap at 0x200485b0
stack at 0x22abdb, heap at 0x200485c0
stack at 0x22abab, heap at 0x200485d0
stack at 0x22ab7b, heap at 0x200485e0
stack at 0x22ab4b, heap at 0x200485f0
stack at 0x22ab1b, heap at 0x20048600
stack at 0x22aaeb, heap at 0x20048610
stack at 0x22aabb, heap at 0x20048620
stack at 0x22aa8b, heap at 0x20048630
stack at 0x22aa5b, heap at 0x20048640 
```

因此，堆栈向下，堆向上（正如您根据神话所期望的那样），但堆栈的地址更小，并且它们没有朝着彼此增长（神话破灭）。

顺便说一句，我的`check`函数是尾递归的，在某些带有一些编译器选项的实现中，您可能会看到堆栈根本没有移动。这告诉您为什么该标准不强制要求所有这些工作方式 - 如果这样做可能会无意中禁止有用的优化。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-02T09:08:53.180

如前所述，大小是特定于操作系统的。例如，在使用 Visual Studio 的 Windows 上，默认堆栈大小为 1MB

[微软](http://msdn.microsoft.com/en-us/library/ms686774.aspx)

在 Linux 上，以下命令可以显示您当前的命令。

```
ulimit -s or -a 
```

在我的 Linux mint 64 位上，它显示 8192 KB。

加载到内存中的每个程序都有几个段。在汇编中，可以使用 .data、.code 等前缀 (intelx86) 来指示其中的每一个。

它是具有几个子部分的数据段。除了其他几个之外，堆栈和堆都是它的一部分。

堆栈也可以隐式增长，即当您进行另一个函数调用时，激活记录被推入堆栈，它们通过利用更多的堆栈内存。这就是为什么当程序用完分配的堆栈时无限递归会导致崩溃。

当函数调用返回时，该激活记录被弹出并且堆栈收缩。

相反，堆从相反的方向增长并包含所有动态分配的内存。

这两个段以相反方向增长的原因是为了最大限度地利用它们的组合内存。请注意，正如评论中提到的，这不是交流标准，但大多数常见的操作系统都实现了这一点。

------ 堆栈开始 ----------- 堆栈向下增长

-------- 除非它们相互交叉，否则程序可以运行。

--------堆开始------------堆向上增长

如果您的程序不使用堆，则您的堆栈也可以利用最大内存，包括堆内存。如果程序很少进行递归调用并使用最少的局部变量（即堆栈使用较少的内存），它可以最大限度地利用堆。

数据段的其他部分是 BSS 等，可能包含未初始化的静态变量等字段

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-02T09:04:23.577

> 创建堆栈/堆的初始大小是多少？谁来决定？

这是特定于编译器和操作系统的。

> 它们是在哪里创建的物理内存？我看到一般描述为“堆是在顶层地址中创建的，而堆栈是在低级地址中创建的”。

这是特定于编译器和操作系统的。

真的。语言标准没有规定最小堆栈大小，也没有指定堆栈或堆在内存中的位置。这样做的原因是使 C 程序更少依赖这些细节，因此更容易移植到不同的平台（阅读：不同的操作系统、不同的 CPU、不同的编译器）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-02T09:10:29.080

首先，C 标准对平台如何实现堆栈/堆没有任何要求。

`What is the initial size with which a stack/heap is created? and who decides it?`

通常，特定于平台的操作系统为每个进程分配固定大小的**堆栈。**堆大小没有限制，程序通常拥有所有可用的虚拟地址空间。

`Wherein physical memory are they are created?`

这是特定于平台的。通常堆栈向下增长，堆向上增长。

# jquery - jQuery无效的slideUp、slideDown效果

> ID：12687276
> 
> 赞同：2
> 
> 时间：2012-10-02T08:56:46.867
> 
> 标签：jquery, jquery-selectors, slidedown, slideup

我的小 jQuery 菜单有问题。

这是一个活生生的例子：

[http://jsfiddle.net/jvalousek/NthrX/](http://jsfiddle.net/jvalousek/NthrX/)

如您所见，我需要将代码的特定部分悬停在我的第一个可见菜单上。看起来一切正常，但如果你尝试一下，你会看到一些看起来不太好的效果。它随机生成slideUp，或者slideDown...

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:00:08.053

你把它们都滑了！仅针对可见的：

```
$('.selector').mouseenter(function() {
    var name = this.id + 'Text';
    $('.careerHint:visible').slideUp(function () {
        $("#" + name).slideDown("fast");
    });
}); 
```

​</p>

[**小提琴**](http://jsfiddle.net/NthrX/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:04:01.763

从 .slideUp 中的选择器中删除当前项目

```
$('.careerHint').not($("#" + name)).slideUp(function () {
    $("#" + name).slideDown("fast");
}); 
```

[小提琴](http://jsfiddle.net/NthrX/3/)

# python - Python 深度嵌套工厂函数

> ID：12687277
> 
> 赞同：2
> 
> 时间：2012-10-02T08:56:47.217
> 
> 标签：python, function, factory

通过“Learning Python”工作遇到了工厂函数。这个教科书示例有效：

```
def maker(N):
    def action(X):
        return X ** N
    return action

>>> maker(2)
<function action at 0x7f9087f008c0>
>>> o = maker(2)
>>> o(3)
8
>>> maker(2)
<function action at 0x7f9087f00230>
>>> maker(2)(3)
8 
```

但是，当更深入另一个级别时，我不知道如何称呼它：

```
>>> def superfunc(X):
...     def func(Y):
...             def subfunc(Z):
...                     return X + Y + Z
...     return func
... 
>>> superfunc()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: superfunc() takes exactly 1 argument (0 given)
>>> superfunc(1)
<function func at 0x7f9087f09500>
>>> superfunc(1)(2)
>>> superfunc(1)(2)(3)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'NoneType' object is not callable
>>> superfunc(1)(2)
>>> 
```

为什么不`superfunc(1)(2)(3)`工作，而工作`maker(2)(3)`？

虽然这种嵌套在我看来肯定不是一个好的、可用的代码，但 Python 仍然认为它是有效的，所以我很好奇如何调用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T08:59:05.750

你得到一个`TypeError`因为函数`func`不返回任何东西（因此它的返回是`NoneType`）。它应该返回`subfunc`：

```
>>> def superfunc(X):
...     def func(Y):
...             def subfunc(Z):
...                     return X + Y + Z
...             return subfunc
...     return func
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T09:01:44.593

superfunc 更正，带有调用示例

```
def superfunc(X):
    def func(Y):
        def subfunc(Z):
            return X + Y + Z
        return subfunc
    return func

print superfunc(1)(2)(3) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T08:59:41.927

您的某处缺少返回`superfunc`：您有`return`for `subfunc`，但没有 for `func`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T09:03:18.593

您忘记了第二个函数的返回。这是固定功能

```
def superfunct(x):
  def func(y):
    def subfunc(z):
      return x + y + z
    return subfunc
  return func

print superfunct(1)(2)(3) 
```

# ios - 在 CustomCell 中检测 UIImageView 上的触摸

> ID：12687286
> 
> 赞同：2
> 
> 时间：2012-10-02T08:57:27.860
> 
> 标签：ios, uitableview, uiimageview, uigesturerecognizer

我有自定义 UITableViewCell，我对 UITableViewCell 进行了子类化：

MyCustomCell.h

```
MyCustomCell:UITableViewCell 
```

然后我还有这个自定义单元格的 xib 文件，一切正常，我可以显示所有信息，以及我在单元格上添加的图像，但是我想在用户触摸 uiimageview 时检测到触摸，所以我试过了这样：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"MasterView";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[MasterViewCell alloc] init];
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MasterViewCustomCellImage" owner:self options:nil];
    cell = (MasterViewCell *)[nib objectAtIndex:0];
    //NSLog(@"Nuova Cella");
}

[self configureCell:cell atIndexPath:indexPath];

return cell;
}

 - (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
 {
NSManagedObject *managedObject = [self.fetchedResultsController objectAtIndexPath:indexPath];

UIImageView *thumbnailImage = (UIImageView *)[cell viewWithTag:1007];
[thumbnailImage setImage:[managedObject valueForKey:@"myImage"]];

if (thumbnailImage) {

    UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(detectTouchImage)];
    [longPress setMinimumPressDuration:1.0];
    [thumbnailImage setUserInteractionEnabled:YES];
    [thumbnailImage addGestureRecognizer:longPress];
}

 }

-(void)detectTouchImage
{
 NSLog(@"Image Pressed");
 } 
```

但我不明白为什么不工作，如果它输入thumbnailImage，但没有检测到图像上的任何手势......任何人都可以帮助我吗？我已经在 ios 5 和 ios 6 上尝试过，但不工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:55:28.140

问题很可能是细胞在劫持触摸。您可以检查您的`didSelectCellForRow`方法是否被调用或当您点击它时该行是否突出显示？还尝试将 分配`UILongPressGestureRecognizer`给单元格而不是图像。如果这可行，但您只想在点击拇指图像时调用点击，您可以使用类中`locationInView`实现的方法`UIGestureRecognizer`来查看用户点击的确切位置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T11:01:56.757

刚刚做了测试项目来验证问题出在哪里。
完整的工作示例[在](https://github.com/valeriyvan/UILongPressGestureRecognizer_test)GitHub 上。下载并使用它。TableViewCell 有自定义 UIImageView 与 UILongPressGestureRecognizer 附加到它。一切正常。长按任何图像和 UIIAllertView 弹出。因此，您使用 UILongPressGestureRecognizer 的代码似乎没问题。问题出在您未公开的项目的其他部分。

# java - 读取 .txt 文件并存储在二维字符数组 java 中

> ID：12687292
> 
> 赞同：1
> 
> 时间：2012-10-02T08:57:39.290
> 
> 标签：java, arrays, 2d, text-files

我有点卡住了。我该如何让它工作或有更好的方法？请给出代码示例。

```
public char[][] charmap = new char[SomeInts.amount][SomeInts.amount];
public void loadMap() throws IOException{
    BufferedReader in = new BufferedReader(new FileReader("map1.txt"));
    String line = in.readLine();
    while (line != null){
        int y = 0;
        for (int x = 0; x < line.length(); x++){

            //Error
            charmap[x][y] = line[x];
            //
        }
        y++;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T08:59:14.437

该语法`line[x]`是为数组保留的。字符串不是数组。您可以使用该[`String#charAt`方法](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt%28int%29)并编写：

```
charmap[x][y] = line.charAt(x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:59:51.503

使用[String.charAt(int)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt%28int%29)从字符串中获取字符..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:07:43.200

试试这个。

```
char[][] mapdata = new char[SomeInts.amount][SomeInts.amount];

public void loadMap() throws IOException{
    BufferedReader in = new BufferedReader(new FileReader("map1.txt"));
    String line = in.readLine();
    ArrayList<String> lines = new ArrayList<String>();
    // Load all the lines
    while (line != null){
        lines.add(line);
    }
    // Parse the data
    for (int i = 0; i < lines.size(); i++) {
        for (int j = 0; j < lines.get(i).length(); j++) {
            mapdata[j][i] = lines.get(i).charAt(j);
        }
    }
} 
```

希望这可以帮助。

# java - Android：防止应用程序被杀死

> ID：12687293
> 
> 赞同：0
> 
> 时间：2012-10-02T08:57:44.493
> 
> 标签：java, android

我制作了一个播放无线电流的 Android 应用程序。它运行良好，CPU 和内存消耗低。但如果我打开 Facebook 等其他应用程序，甚至浏览互联网，有时我的广播应用程序就会被杀死。

有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:00:29.970

通常不会，但您很有可能通过使用前台服务来维持生命。这将显示一个持续的通知，让用户知道您的应用正在运行。系统会为这些应用程序提供更高的优先级，如果资源变得稀缺，它们将是最后被杀死的应用程序之一。

# c++ - 使用 Resiprocate SIP 堆栈转发 SIP 请求/响应

> ID：12687299
> 
> 赞同：1
> 
> 时间：2012-10-02T08:57:59.790
> 
> 标签：c++, sip

我需要使用 Resiprocate SIP 堆栈在 C++ 中实现 SIP 代理。代理必须始终位于 UAC 和 UAS 之间，并简单地双向转发传入的 SIP 请求和响应。

根据我对 SIP 协议的阅读/理解，如果 SIP 代理想要位于 UAC 和 UAS 之间，它必须将其 SIP 地址注入它正在接收的 SIP 消息的路由字段中。谁能告诉我如何在代理实现中添加/处理传入 SIP 消息中的路由字段？更准确地说，我需要知道我应该参考哪些头文件/类/句柄函数？我对 SIP 和 resiprocate 有点陌生，并且在其源代码中迷失了方向。提前致谢。

PS：有人会奇怪为什么我不使用 resiprocate 自己的代理实现。这是因为我需要通过使用 SIP 堆栈 API 本身来为特殊需求开发一个轻量级原型。原型应该只是充当 SIP 流量中的转发器，仅此而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:30:59.777

以下在 else 块中完成工作。

```
 void insertRouteField(SipMessage * received)
        {
          ErrLog ( << "***********************************\n");
          NameAddr& to = received->header(h_To);
          ErrLog ( << "To Field: " << to.uri().toString());

          NameAddr& from = received->header(h_From);
          ErrLog ( << "From Field: " << from.uri().toString() );

          ParserContainer<NameAddr>& rRoutes = received->header(h_RecordRoutes);
          if(!rRoutes.empty())
          {
              NameAddr& frontRRoute = rRoutes.front();
              ErrLog ( << "rRoutes: " << frontRRoute.uri().toString());

              ErrLog ( << "***********************************\n");
          }
          else
          {
              NameAddr route;
              route.uri().scheme() = "sip";
              route.uri().user() = "proxy";
              route.uri().host() = SipStack::getHostname();
              route.uri().port() = 5070;
              route.uri().param(p_transport) = Tuple::toData(mTransport);
              rRoutes.push_front(route);

              NameAddr& frontRRoute = rRoutes.front();
              ErrLog ( << "rRoute: " << frontRRoute.uri().toString());
              ErrLog ( << "***********************************");
          } 

        } 
```

您可能想查看的头文件：“resip/stack/Helper.hxx”“resip/stack/SipMessage.hxx”“resip/stack/Uri.hxx”“resip/stack/SipStack.hxx”“rutil/Logger.hxx” " "rutil/ThreadIf.hxx" "resip/stack/ParserContainer.hxx"

# objective-c - 如何在按钮按下时捏视图？

> ID：12687310
> 
> 赞同：0
> 
> 时间：2012-10-02T08:58:49.757
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我有全屏 UIImageView 上的按钮，我想在按下按钮时捏住这个视图。我的意思是，我只想在按下按钮后全屏显示 UIImage 的一部分。我应该使用哪种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:29:04.413

基本上你可以开始一个缩放动画，如果这就是你想要的。

**例子：**

```
[UIView animateWithDuration:1.0 animations:^{
    yourView.transform = CGAffineTransformMakeScale(2.0,2.0);
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:17:57.903

将您的 UIImageView 放在 UIScrollView 中以进行缩放和平移。

请参阅[此 SO 帖子](https://stackoverflow.com/questions/8891356/uiimageview-and-uiscrollview-zooming)。我已经使用过这种技术，这是我知道的唯一方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T09:00:47.160

你会想要使用 pinchGestureRecognizer :)

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPinchGestureRecognizer_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPinchGestureRecognizer_Class/Reference/Reference.html)

# xcode - 在带有 Cordova 2.1.0 的 Xcode 中找不到插件

> ID：12687311
> 
> 赞同：2
> 
> 时间：2012-10-02T08:58:58.913
> 
> 标签：xcode, cordova, phonegap-plugins

我使用与在 Cordova 2.0 Xcode 项目中相同的代码。但是自从我安装了cordova 2.1.0并更新了新的XCode后，我不断在控制台中收到这些消息（不仅适用于ChildBrwoser插件，而且适用于我尝试使用的任何插件）：

> 错误：未找到插件“ChildBrowser”，或者不是 CDVP 插件。检查 Cordova.plist 中的插件映射。

一切都很好 - “`Cordova.plist`插件”部分填充了适当的值。XCode 项目已成功构建。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:14:33.533

我在使用 Janrain Engage for iOS 时遇到了完全相同的问题，我相信这些插件与 Phonegap 2.1 不兼容，但@DmitriyLezhnev 在这里也提出了一个很好的观点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:24:11.197

如果您更新到 phonegap 2.3.0，您可以开始使用 InAppBrowser，这将是构建的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:57:34.227

这是因为显示如何在 plist 中插入插件的[屏幕截图实际上是谎言。](https://raw.github.com/phonegap/phonegap-plugins/master/iOS/ChildBrowser/Cordova.plist.png)您应该添加密钥`ChildBrowser`但不添加`ChildBrowserCommand`！这解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T09:43:16.480

PhoneGap 2.0 的 iOS 插件似乎与 PhoneGap 2.1 不兼容。请参阅“插件签名”下[的文档中的此页面。](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_ios_index.md.html#Developing%20a%20Plugin%20on%20iOS)

我在使用 UrbanAirship PhoneGap 插件时遇到了这个问题。由于我的 Objective-C 技能不存在并且我没有时间弄清楚，我只是降级到 PhoneGap 2.0。

# c# - 找不到数据成员

> ID：12687315
> 
> 赞同：7
> 
> 时间：2012-10-02T08:59:24.560
> 
> 标签：c#, rest, windows-mobile

由于我已经对我的这个问题进行了研究，但我仍然没有运气解决我的错误 1 **​​The type or namespace name 'DataMember' could not be found（您是否缺少 using 指令或程序集引用？）**

我遇到了一个解决方案，指出我应该引用**System.Runtime.Serialization**但即使添加对它的引用，我仍然没有运气。

这是我的代码：

```
using System;
using System.Linq;
using System.Collections.Generic;
using System.Text;
using System.Runtime.Serialization;
using System.Xml.Serialization;

namespace WebServApp
{
    [Serializable]
    public class Employee
    {
        [DataMember]
        public int EmpNo { get; set; }
        [DataMember]
        public string EmpName { get; set; }
        [DataMember]
        public int DeptNo { get; set; }
        [DataMember]
        public int Salary { get; set; }
    }
} 
```

这是我实际上想要遵循的教程： http: [//www.dotnetcurry.com/ShowArticle.aspx?ID=472](http://www.dotnetcurry.com/ShowArticle.aspx?ID=472)

谁能帮我解决这个错误？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-10-31T12:40:48.517

Remove `System.Runtime.Serialization` from code, then add from **menu > Project > Add reference** ..> . Then again add into code. it works.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T03:22:42.403

我已经解决了这个问题。我刚刚在项目资源管理器的引用中删除了 System.Runtime.Serialization 并通过浏览添加它然后它就起作用了。奇怪的。

# java - 有关配置 xml 文件的安全问题

> ID：12687317
> 
> 赞同：0
> 
> 时间：2012-10-02T08:59:32.170
> 
> 标签：java, android

在我的应用程序中，我有一个`config.xml`正在解析的文件。在这个配置文件中，有一些我看不到最终用户以纯文本形式看到的数据。在这种特殊情况下，邮件帐户的密码。该`config.xml`文件保存到具有路径的文件夹中

```
/mnt/sdcard/my_application_folder/config.xml 
```

我查找了一些类提供的方法`File`

*   setReadable（布尔值）
*   setExecutable（布尔值）
*   setWritable（布尔值）

我试图以这种方式应用这些方法：

```
String path = folder.getPathToNode() + "/config.xml";
configFile = new File(path);

if(configFile.exists()) {
    configFile.setReadable(false);
    configFile.setExecutable(true);
    configFile.setWritable(false);
} 
```

我想你们中的一些人会建议我将这些数据存储在 中`SharedPreferences`，但我的应用程序有两个用户组，**最终用户**和**管理员**，他们将`config.xml`在他的计算机上编辑，并将文件传输到手机。

我可以打开`Astro File Manager`并查看`config.xml`纯文本，但我不应该因为文件不可读？

`config.xml`如果我应用上面的值，我可以解析这个吗？有人可以为这个“安全问题”提出另一种解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:03:11.170

不要将敏感数据保存在 SD 卡/外部存储上。任何应用程序都可以读取它，即使没有特殊权限。找到另一种更新设置的方法（通过 UI、服务器推送等），或者至少想办法加密或混淆敏感信息。外部存储通常是 VFAT（或模拟它），因此您无法设置文件权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:15:43.817

除了 Nikolay，以纯文本形式存储密码绝不是一个好主意。我不是 android 专家，但我确信他们提供 api 来 [en/de]crypt 数据。

# three.js - 闪烁着 collada 模型和网格

> ID：12687319
> 
> 赞同：2
> 
> 时间：2012-10-02T08:59:34.857
> 
> 标签：three.js, flicker, collada, doublebuffered

我是three.js 的新手，所以我需要一些帮助。

```
 init();
    animate();

    function init()
    {
         container = document.getElementById( 'container' );

         renderer = new THREE.WebGLRenderer();

         renderer.setClearColorHex(0xc2c2c2, 1.0);
         renderer.clear();
         renderer.setSize( container.clientWidth, container.clientHeight);
         renderer.shadowMapEnabled = true;
         renderer.shadowMapSoft = true;

         scene = new THREE.Scene();

         camera = new THREE.PerspectiveCamera( 70, container.clientWidth /                                       container.clientHeight,0.001, 10000 );
         camera.position.z = 5000;

         controls = new THREE.TrackballControls( camera, renderer.domElement );

         controls.rotateSpeed = 1.0;
         controls.zoomSpeed = 1.2;
         controls.panSpeed = 0.2;

         controls.noZoom = false;
         controls.noPan = false;

         controls.staticMoving = false;
         controls.dynamicDampingFactor = 0.3;

         controls.minDistance = 0.001;
         controls.maxDistance = 10000;

         controls.keys = [ 65, 83, 68 ]; // [ rotateKey, zoomKey, panKey ]

         pointLight = new THREE.PointLight( 0xffffff ,5,10000);

         pointLight.position.set(0,400,-500);

         scene.add(pointLight);

         relief(classes[0].value);
         load_model(classes[0].models[2].name);

         container.appendChild( renderer.domElement );
    }

    function animate() 
         {
            requestAnimationFrame( animate );
            render();

         }

    function render() 
         {
             controls.update();

             renderer.render( scene, camera );
         } 
```

//加载区域

```
 function relief( vertices )
    {   

         var geometry = new THREE.Geometry();
         var array = vertices;

         for(var i=0 ; i <array.length; i += 3)
            {
               geometry.vertices.push (new THREE.Vector3 (array[i],array[i+1],array[i+2]));                
            }

         var h_php = 409 ;
         var w = 409 ;

         var h = h_php;

         for(i = 0;i < (geometry.vertices.length-1)/2 ;i++)
            {  
                if(i != h_php)
                {
                    geometry.faces.push(new THREE.Face4(i*2,i*2+1,i*2+3,i*2+2));
                }
                else
                {
                    h_php += h+1;
                }               
            }

         for(var j=0 ; j < w;j++)
            {  
                for(i=h; i > 0; i--)
                { 
                    geometry.faceVertexUvs[0].push([ new THREE.UV( j/w,   (i)/h ),           
                                                     new THREE.UV((j+1)/w, (i)/h ),
                                                     new THREE.UV((j+1)/w, (i-1)/h ),
                                                     new THREE.UV( j/w,   (i-1)/h ), ]);                              
                }
            }   

         geometry.computeFaceNormals();         
         geometry.computeCentroids()    
         var texture = THREE.ImageUtils.loadTexture('t.jpg');
         texture.needsUpdate = true;

         var mat = new THREE.MeshPhongMaterial( { map:texture, side: THREE.DoubleSide,} );
         mat.transparent = false;
         mesh = new THREE.Mesh( geometry ,mat );
         mesh.dynamic = true;
         mesh.rotation.x = -Math.PI/2;

         mesh.castShadow = true;
         mesh.receiveShadow  = false;

         scene.add(mesh);
    }

    function load_model( name )
    {    
         loader = new THREE.ColladaLoader();
         loader.load( name, function ( collada ) {

         model = collada.scene;
         model.scale.set(10,10,10);
         model.position.set(1000,150,700);
         model.rotation.x = -Math.PI/2;
         scene.add(model);

        } );

    }

      function Rel_vec(name,value)
    {
         this .name = name;
         this .value = value;
         this .models = [];
    }

    function child_vec(name,value)
    {
         this .name = name;
         this .value = value;
    } 
```

classes[0].value --- 它是区域（大约 350K 顶点）
classes[0].models[2].name --- 它是链接到 collada 模型，

three.js 里面有没有做双缓冲的工具？
如何避免闪烁？

这是屏幕截图。浏览器 Chrome v 22.0.1229.79 m ![在此处输入图像描述](../Images/d39bd7f7ad2f88b85d5b2f8f31d50409.png)

# android - ANDROID 将存储在 /res/drawable 中的 jpeg 图像转换为 Bitmap 对象

> ID：12687321
> 
> 赞同：0
> 
> 时间：2012-10-02T08:59:36.283
> 
> 标签：android

> **可能重复：**
> [如何将 Drawable 转换为位图？](https://stackoverflow.com/questions/3035692/how-to-convert-a-drawable-to-a-bitmap)

我刚开始学习android，所以我是新手

我正在尝试为我的项目创建一个用于图像处理的 android 应用程序

我偶然发现了博客条目：

[http://xjaphx.wordpress.com/2011/06/22/image-processing-brightness-over-image/](http://xjaphx.wordpress.com/2011/06/22/image-processing-brightness-over-image/)

我面临以下问题；

我无法为存储为 /res/drawable/pic_1.jpg 的图像创建 Bitmap 对象

我试过使用

```
Bitmap myBitmap = BitmapFactory.decodeFile("/res/drawable/pic_1.jpg"); and called the function;

public static Bitmap doBrightness(myBitmap, int value) {.........} 
```

但这没有用；

然后我尝试了，

```
Bitmap myBitmap = BitmapFactory.decodeFile("/res/drawable/pic_2.jpg");
imageview.setImageBitmap(myBitmap); 
```

不调用该`doBrightness()`函数。然而，它在图像视图中不显示任何内容。

所以我猜`BitmapFactory.decodeFile()`是返回null。

所以我想知道的是，如何为存储在 /res/drawable 中的图像创建 Bitmap 对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T09:16:56.347

您应该通过资源获取图像，而不是通过路径：

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.pic1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T09:11:32.713

用这个

```
Bitmap bitmap = BitmapFactory.decodeResource(ctx.getResources(),
                                R.drawable.icon); 
```

# nhibernate - 如何修复 hibernate.cfg.xml 到 MS SQL 2008 连接？

> ID：12687328
> 
> 赞同：-1
> 
> 时间：2012-10-02T08:59:58.337
> 
> 标签：nhibernate

与 MS SQL 2005 一起工作正常。如何将文件重写为 MS SQL 2008????

```
<?xml version="1.0" encoding="utf-8"?>
    <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
      <session-factory>
        <property name="proxyfactory.factory_class">NHibernate.ByteCode.Castle.ProxyFactoryFactory,NHibernate.ByteCode.Castle</property>
        <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>    
        <property name="connection.driver_class">NHibernate.Driver.SqlClientDriver</property>    
        <property name="connection.connection_string">Data Source=XXX.XXX.XXX.XXX,XXXXX;Initial Catalog=XXXXXXX;MultipleActiveResultSets=True;Persist Security Info=True;User ID=XXX;Password=XXX</property>
        <property name="dialect">NHibernate.Dialect.MsSql2005Dialect</property>

        <property name="show_sql">true</property>
      </session-factory>
    </hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:06:26.600

对于连接字符串部分，没有什么可改变的（部分是指向正确服务器的事实）。您可以将方言更改为`MsSql2008Dialect`，但 2005 年的方言也适用于 2008 年。

# outlook - Outlook 邮件项目未正确关闭

> ID：12687329
> 
> 赞同：2
> 
> 时间：2012-10-02T09:00:03.080
> 
> 标签：outlook, mailitem

我已经成功地使用以下方法从 c# 代码打开了一个新的 Outlook 邮件项：

```
using Outlook = Microsoft.Office.Interop.Outlook;

Outlook.Application oApp;
Outlook.Inspectors oInspects;
Outlook._MailItem  oMailItem;

oApp = new Outlook.Application();
oInspects = oApp.Inspectors;
oMailItem = (Microsoft.Office.Interop.Outlook._MailItem)oApp.CreateItem(Microsoft.Office.Interop.Outlook.OlItemType.olMailItem);

oMailItem.Display(true); 
```

我的问题如下：当我单击 mailitem 窗口角落的 X 以关闭它时，我收到一条消息，询问我是否要保存更改，这没关系。但是在选择“否”选项后，电子邮件窗口关闭，但另一个似乎出现在它的后面（灰色），我必须再次单击角落的 X 以关闭它。

如果我单击发送按钮发送电子邮件，也会发生同样的情况。原始窗口关闭，然后出现另一个完全相同的窗口（包含所有内容），但按钮显示为灰色，我必须单击 X 才能关闭它

我尝试使用以下代码（以下行的任意组合）关闭窗口，但似乎没有任何效果：

```
oMailItem.Close(Microsoft.Office.Interop.Outlook.OlInspectorClose.olDiscard);
oMailItem.Delete();
Marshal.FinalReleaseComObject(oMailItem);
Marshal.ReleaseComObject(oApp); 
```

如果有人知道如何解决这个问题，我将不胜感激。几个小时以来我一直在努力寻找答案

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-08T05:41:44.233

即使这是 4 岁，这就是我解决问题的方法：

```
while (System.Runtime.InteropServices.Marshal.ReleaseComObject(mailItem) != 0) { }
mailItem = null;
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T12:23:24.937

尝试使用`oMailItem.Display(false);`'true'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T12:43:54.747

我已经使用 Outlook 2007 + VS 2010 Express 尝试了您的代码。您所面临的问题不会发生在我的环境中。我尝试在启动代码时运行和不运行 Outlook。

“using”语句是源代码顶部的 using 部分的一部分，而不是例程中的“using”变量引用。

oMailTime.Display(true) 中的“真”必须保持真才能获得模态窗口。

# css - 动态HTML DIV，多于float：left；

> ID：12687333
> 
> 赞同：0
> 
> 时间：2012-10-02T09:00:11.150
> 
> 标签：css, html

我有一些大小不同的 DIV 元素，当页面填充（从左到右）时，我希望 DIV 元素在下一行垂直和水平地折叠起来。

不好的描述，但我有一个演示页面，如果你能提供帮助，你可以看看 :) [http://www.techonline.co.nz/modules/navigator/navto.php?unique_ID=16](http://www.techonline.co.nz/modules/navigator/navto.php?unique_ID=16)

上下 DIV 之间的大间隙看起来很糟糕，特别是如果您在右侧展开 DIV。我想让它看起来整洁紧凑。

我从来没有很好的设计，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:03:29.723

您可能想看看**[Jquery masonry 插件](http://masonry.desandro.com/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T09:09:10.553

在内容所在的位置创建 2 个 div。一个向左浮动，另一个向右浮动。在这些 div 中，您放置内容框。所以在你的情况下。

CSS：

```
 #left {float: left;}
 #right {float: right;} 
```

和你的html：

```
<div id="left">
     <div class="divby2">Title 1 and rest of content</div>
     <div class="divby2">Title 3 and rest of content</div>
</div>

<div id="right">
     <div class="divby2">Title 2 and rest of content</div>
</div> 
```

这样，您的标题 3 div 不会查看 div 2 的位置，但它会查看 div 1。例如，我是如何做到的，请看[这里](http://www.darktiderising.net/newHolo/index.php?p=articles)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:11:48.377

..................................................

嗨，现在习惯了像这样`Even`奇怪地抛出 css`rules`

```
.divby2:nth-child(even) {float:left;}
.divby2:nth-child(odd) {float:right} 
```

# javascript - 使用javascript访问弹出窗口（.aspx页面）中的内容页面控件

> ID：12687338
> 
> 赞同：1
> 
> 时间：2012-10-02T09:00:25.710
> 
> 标签：javascript, asp.net, master-pages

我有一个母版。其中我有一个内容页面。我正在使用 window.open 方法从此内容页面打开一个弹出窗口。我还尝试打开一个模式对话框作为替代选项。

```
 window.open("WebForm2.aspx?name1="+d+"&name2="e+,"MyWindow","height=375,width=350"); 
```

'd' & 'e' 是控件 ID，我已通过并在弹出窗口中访问。

我想从弹出窗口访问内容页面中的控制值（反之亦然）。我正在尝试的所有控件。访问是在一个网格视图中。但是，我不能这样做吗？

为了实现这一点，我将我打算在 url 中访问的特定值传递给弹出窗口。这样可以访问值，但它们看起来很麻烦。

```
 alert(window.opener.document.getElementById(GetQueryStringParams('name1')).value); 
```

```
 function GetQueryStringParams(sParam)
{
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) 
    {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) 
        {
            return sParameterName[1];
        }
    }
} 
```

我找不到将弹出页面的值访问到内容页面的方法。

任何帮助，将不胜感激。

提前致谢

# google-maps - CustomMapType: SetZoom > 30

> ID：12687340
> 
> 赞同：0
> 
> 时间：2012-10-02T09:00:32.807
> 
> 标签：google-maps, google-maps-api-3

我为自定义地图类型设置了 maxZoom:50，但我只能缩放到 30 级。
map.setZoom(50) 缩放到 30 缩放级别。
如何缩放到超过 30 级？

想法：在自定义地图上显示商场。每层 3 个缩放级别。开始缩放级别为 18。如果商场有 5 层，我需要 (18+(5*3)) = 33 缩放级别。

# php - 在根 svg 标记中/之前加载 javascript 文件

> ID：12687345
> 
> 赞同：0
> 
> 时间：2012-10-02T09:00:42.370
> 
> 标签：php, javascript, xml, svg

我在一个 Web 项目上工作，我在其中处理 XML 数据，并在 SVG 中以图形方式将 XSLT 转换为该数据。我遇到的问题是我需要为我的 SVG 图中的一些动画使用一些 JavaScript。我需要根 SVG 标记中/之前的 JavaScript 来处理该`onload`函数。

任何想法或解决方案如何在根 SVG 标记中/之前导入 JavaScript 以处理该`onload`函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:26:23.443

在我的情况下，错误是因为路径有问题。但是将 js 从 php 加载到转换后的输出的干净解决方案如下所述：

在转换文件中：

```
<xsl:variable name="yourJsAsString" select="default"/>
<script>
    <xsl:text disable-output-escaping="yes">
         <![CDATA[
             <xsl:value-of select="$yourJsString"/>
        ]]>
    </xsl:text>
</script> 
```

并在 php 代码中：

```
$xsl = new XSLTProcessor();
$xsl->setParameter('','$yourJsAsString','your javascript as string'); 
```

优点是转换输出中没有解析错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:59:49.797

您是否尝试将指向您的脚本的脚本标记附加到头部 [0]，或者只是将脚本声明为变量然后也附加它？或搜索元素 SVG 位置并将其附加到父元素顶部

# wolfram-mathematica - Mathematica 中的收集排序

> ID：12687360
> 
> 赞同：1
> 
> 时间：2012-10-02T09:01:42.060
> 
> 标签：wolfram-mathematica

我有一些表达式，我想从中收集各种线性项（CxxP、CxyP、CyyP）。目前我正在使用：

```
aaa = Collect[ expr, {CxxP, CxyP, CyyP}] 
```

但结果未按我指定的顺序返回（即我希望 CxxP 首先出现等）：

```
-(1 + a) CxyP (a GC) - CxxP (k^2 l^2 + GC) 
```

想要这种排序的原因是我可以提取我需要的特定术语。如果有更简单的方法可以做到这一点，我很想知道，例如

```
In[] = ExtractTerm[aaa, CxxP]
Out[] = -(k^2 l^2 + GC) 
```

使用 CoefficientList 也不会保留顺序，也不会为不存在的项获取系数，即我想明确告知没有任何 CyyP 项。

谢谢，伊万

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:19:06.363

如果我的理解正确，您可以制作一个有序的系数列表，如下所示：

```
Coefficient[aaa,#]&/@{CxxP, CxyP, CyyP} 
```

# java - RabbitMQ QueueingConsumer 可能存在内存泄漏

> ID：12687368
> 
> 赞同：10
> 
> 时间：2012-10-02T09:02:13.103
> 
> 标签：java, memory-leaks, jms, rabbitmq

我有以下代码来声明一个队列：

```
Connection connection = RabbitConnection.getConnection();
Channel channel = connection.createChannel();
channel.queueDeclare(getQueueName(), false, false, false, null);
consumer = new QueueingConsumer(channel);
channel.basicConsume(getQueueName(), true,consumer); 
```

以及以下内容以获取下一个 Delivery 对象并对其进行处理：

```
 Delivery delivery = null;
    T queue = null;

    //loop over, continuously retrieving messages
    while(true) {

        try {
            delivery = consumer.nextDelivery();
            queue = deserialise(delivery.getBody());

            process(queue);

        } catch (ShutdownSignalException e) {
            logger.warn("Shutodwon signal received.");
            break;
        } catch (ConsumerCancelledException e) {
            logger.warn("Consumer cancelled exception: {}",e.getMessage());
            break;
        } catch (InterruptedException e) {
            logger.warn("Interuption exception: {}", e);
            break;
        }
    } 
```

反序列化代码。如您所见，我正在使用 Kryo：

```
public T deserialise(byte[] body) {
    Kryo kryo= new Kryo();
    Input input = new Input(body);
    T deserialised = kryo.readObject(input, getQueueClass());
    input.close();

    return deserialised;
} 
```

如果我使用包含大量对象的队列运行此程序，则在大约 270 万个对象之后，我会遇到内存不足异常。我最初是通过在夜间运行它来发现这一点的，数据从 JMeter 以大约 90/s 的速度输入，起初它毫无问题地消耗，但早上我注意到 RabbitMQ 中有大量数据并且内存不足异常消费者。我再次运行它并使用 Eclipse Memory Analyzer 来确定该内存的使用位置。从这里我可以看到 com.rabbitmq.client.QueueingConsumer 引用的 java.util.concurrent.LinkedBlockingQueue 正在增长，直到内存不足。

我需要做些什么来告诉 Rabbit 释放资源吗？

我可以增加堆大小，但我担心这只是一个短期修复，我的代码中可能有一些东西可能会在生产部署几个月后出现内存泄漏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T12:04:17.167

我的错误是我将频道设置为自动确认。这意味着来自 Rabbit 的每条消息都得到了确认（确认为已收到）。我已经通过将通道声明为不自动确认来修复（并测试）了这个问题： `channel.basicConsume(getQueueName(), false,consumer);`并且在我处理队列之后，然后我确认消息：`consumer.getChannel().basicAck(delivery.getEnvelope().getDeliveryTag(), false);`。

这就是我的队列声明现在的样子：

```
 Connection connection = RabbitConnection.getConnection();
        Channel channel = connection.createChannel();
        channel.queueDeclare(getQueueName(), false, false, false, null);
        consumer = new QueueingConsumer(channel);
        channel.basicConsume(getQueueName(), false,consumer); 
```

以及处理队列的以下内容：

```
 Delivery delivery = null;
    T queue = null;

    //loop over, continuously retrieving messages
    while(true) {

        try {
            delivery = consumer.nextDelivery();
            queue = deserialise(delivery.getBody());
            process(queue);
            consumer.getChannel().basicAck(delivery.getEnvelope().getDeliveryTag(), false);

        } catch (ShutdownSignalException e) {
            logger.warn("Shutodwon signal received.");
            break;
        } catch (ConsumerCancelledException e) {
            logger.warn("Consumer cancelled exception: {}",e.getMessage());
            break;
        } catch (InterruptedException e) {
            logger.warn("Interuption exception: {}", e);
            break;
        } catch (IOException e) {
            logger.error("Could not ack message: {}",e);
            break;
        }
    } 
```

我现在可以在 RabbitMQ 管理屏幕中看到消息正在以非常高的速率传递，但它们并没有以这种速率被确认。如果我然后杀死我的消费者，在大约 30 秒内，所有那些未确认的消息都将移回就绪队列。我将进行的改进之一是设置 basicQos 值： `channel.basicQos(10);`这样就不会传递太多消息但未确认。这是可取的，因为这意味着我可以在同一个队列中启动另一个消费者并开始处理队列，而不是全部结束在内存中未确认且对其他消费者不可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T10:59:34.600

解决方法是设置 basicQos - `channel.basicQos(2);`。我的频道声明现在看起来像这样：

```
 Connection connection = RabbitConnection.getConnection();
        Channel channel = connection.createChannel();
        channel.queueDeclare(getQueueName(), false, false, false, null);
        consumer = new QueueingConsumer(channel);
        channel.basicConsume(getQueueName(), true,consumer);
        channel.basicQos(2); 
```

将 basicQos 设置为 2 意味着仅在内部存储器中保留 2 条消息。有关使用 CoDel 算法的更多信息和有趣的讨论，请参阅[http://www.rabbitmq.com/blog/2012/05/11/some-queuing-theory-throughput-latency-and-bandwidth/](http://www.rabbitmq.com/blog/2012/05/11/some-queuing-theory-throughput-latency-and-bandwidth/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:06:35.347

问题似乎是您的消费者无法跟上您的生产者，导致您的队列无限制地增长。您需要限制队列的大小并在达到限制时减慢生产者的速度。我还会考虑优化您的消费者，使其跟上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T09:53:59.830

这可能是对象被消耗后没有被销毁的问题。你能显示反序列化的代码吗？我怀疑您正在通过队列发送对象并使用某种对象输入流/字节数组输入流对它们进行反序列化。如果您没有正确关闭可能导致内存泄漏的流。

# sql - 使用 ADF 和 OracleSQL 执行缓慢的视图

> ID：12687371
> 
> 赞同：3
> 
> 时间：2012-10-02T09:02:35.867
> 
> 标签：sql, oracle, execution

尝试在 Oracle 数据库中执行视图对象时遇到一个不寻常的问题。查询本身使用 Toad for Oracle 在 10 秒内执行，而在视图对象中执行相同查询则需要一分钟以上。我正在使用带有 ADF 的 JDeveloper 10.1.3.3.0.4157，并且正在连接到 10g Oracle 数据库。

我发现在执行过程中，数据库服务器不断被 128 字节的数据“ping”（我使用 Wireshark 完成了这项工作）。这反过来又会阻塞连接，这也是数据需要很长时间才能到达应用程序的原因。我已经用会话跟踪测试了这个理论，结果证明查询本身与 Toad 的查询在同一时间范围内执行。

我想问题出在数据库驱动程序的某个地方，但是由于我无法调试它，所以我两手空空。

任何建议将不胜感激！

更多信息：

有问题的查询有点大。它也是在运行时构建的并且是可变的（但是，属性的​​数量、名称和类型是恒定的）。有趣的是，当查询很小（呃）时，执行时间会下降到 Toad 执行中存在的时间。

在属于同一应用程序模块的另一个视图中检测到类似的“ping”效果，但测试表明这不是 AM 配置的问题，因为它与所有其他配置相同，并且工作正常。此外，与所讨论的查询相同的 AM 中的其他视图没有显示任何相同问题的迹象。

我一直在玩视图调整设置，但执行时间没有区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:57:09.527

尝试将您的视图查询创建为数据库视图。然后在该视图上创建视图对象并使用视图标准来塑造数据。只有简单的 select * from complex_view 会在 ViewObject 中。您也可以尝试物化该数据库视图以提高性能。

# element - 读取 word 中的元素 (.doc)

> ID：12687378
> 
> 赞同：1
> 
> 时间：2012-10-02T09:03:11.737
> 
> 标签：element, .doc

我已经构建了一个能够读取 .doc 文件并将它们传递给缓存数据库的程序。我已经完成了传递部分，但问题是，如何区分段落和表格内容？

例如，我将**A 部分**作为标题，并在该部分内设置一个表格。

目前，我只是获取表格内容并将其作为数组发送到缓存数据库。（例如数组（1,2））

我想在数组中包含元素**Section A。**

它可能看起来像这样：

```
array(1)="Section A"
array(2,1,1)="Name: "
array(2,1,2)="Terry"
array(2,2,1)="Age: "
array(3)="Section B" 
```

我喜欢为每个元素设置一个 ID。

# symfony - 在另一个 twig 变量中执行一个 twig 变量

> ID：12687382
> 
> 赞同：0
> 
> 时间：2012-10-02T09:03:18.413
> 
> 标签：symfony, session-variables, twig

我正在做一个 symfony2 项目。在一个文件`html.twig`中，我有以下代码：`{{ app.session.get('menu') | raw }}`它指的是会话中包含的数据库表中的一个字段。该字段的值为：

```
<div class="navbar">
<div class="navbar-inner">
<a class="brand" href="#">Menu1</a>
<ul class="nav">
<li class="active"><a href="#">Home</a></li>
<li><a href="{{ path('graphe') | raw}}">Graphe</a></li>
</ul>
</div>
</div> 
```

现在此时菜单完美显示，但是当我单击“Graphe”时，我得到了错误`No route found for GET /{{ path('graphe') | raw}}`，这意味着代码没有被执行，而是被当作一个字符串。有没有其他方法可以执行。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:34:37.567

你需要的是一个类似 eval 的函数，因为现在，twig 将变量解释为简单的文本。

总而言之，您需要编写自己的过滤器来解释变量。

完整答案在这里：[如何动态调用树枝过滤器](https://stackoverflow.com/questions/12130540/how-to-call-a-twig-filter-dynamically/12140997#12140997)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:06:14.590

在你的树枝模板中嵌入一个控制器，它呈现你的用户菜单。有关更多信息，请参阅：

[http://symfony.com/doc/current/book/templating.html#embedding-controllers](http://symfony.com/doc/current/book/templating.html#embedding-controllers)

# css - 如何仅使用 CSS 制作标题（H1 两侧有线条）

> ID：12687385
> 
> 赞同：1
> 
> 时间：2012-10-02T09:03:44.867
> 
> 标签：css, html-heading

我已经制作了一些我[需要](http://jsfiddle.net/zxzLT/3/)的标题。

CSS：

```
body {
    background:url("http://subtlepatterns.subtlepatterns.netdna-cdn.com/patterns/tiny_grid.png");
}

.main-container {
    width: 600px;
    margin: 0 auto;
    box-shadow:0 0 5px #d00;
}

.headline {
    display: inline-block;
    margin: 40px 0;
    padding: 0 30px;
    font: normal 33px/1.1 Georgia, "Times New Roman", Times, serif;
    color: #3E3E3E;
    height: 1px;
    border-left: 300px solid #aaa;
    border-right: 300px solid #aaa;
    white-space: nowrap;
}

.headline > span {
    display:block;
    margin-top:-17px;
} 
```

HTML：

```
<div class="main-container">
    <h1 class="headline"><span>OUR LATEST WORKS</span></h1>
</div> 
```

这不是完整的解决方案，因为我使用文本周围的边框将文本从父容器中推出。

还有其他方法吗？但没有额外的 div 和 JS。

PS：背景图可能不一样，所以我已经尝试在文字下放同一个bg，但这不是解决办法。

PPS：“div.main-container”不得包含溢出：隐藏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:41:29.297

我想出了类似[http://jsfiddle.net/olgis/qkNfm/](http://jsfiddle.net/olgis/qkNfm/)的东西，类似于@GionaF 解决方案，只是没有固定宽度，但您仍然需要一个容器来在文本下方显示红线。

据我了解，您的解决方案标准是：

*   任何背景
*   没有 JavaScript 或 jQuery
*   css 液体布局（无固定宽度）
*   最小的 HTML
*   跨浏览器解决方案

在这篇文章[http://www.impressivewebs.com/centered-heading-horizo](http://www.impressivewebs.com/centered-heading-horizontal-line/) *​​ntal-line* /中，他们正在讨论“使用 CSS 覆盖水平线的居中标题”许多不同的解决方案以及跨平台问题。

我的猜测是你的目标是像这样[http://result.dabblet.com/gist/1560674](http://result.dabblet.com/gist/1560674) 一个只有一个 H1 的简洁解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T09:17:53.623

没有在 h1 的文本上设置背景很难，所以这是一个棘手的解决方法。

[**检查这个演示**](http://jsfiddle.net/gionaf/gAw3r/)

HTML：

```
<div class="main-container">
    <h1 class="headline">
        <span>&nbsp;</span>
        <span>OUR LATEST WORKS</span>
        <span>&nbsp;</span>
    </h1>
</div> 
```

CSS：

```
.main-container {
    width: 600px;
    margin: 0 auto;
    box-shadow:0 0 5px #d00;
}
.headline {
    font: normal 33px Georgia, "Times New Roman", Times, serif; /* no line-height here */
    color: #3E3E3E;
    display:table;
    text-align:center;
}
.headline > span {
    display:table-cell;
}
.headline > span:nth-child(2) {
    width:50%;
    padding:0 0.2em;
    white-space:nowrap;
    line-height:1.2em;
}
.headline > span:nth-child(1), .headline > span:nth-child(3) {
    border-top:1px solid #CCC;
    width:25%;
    position:relative;
    top:0.6em;
} 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:20:54.773

……………………………………………………………………………………………………………………

您好现在查看这个***[演示](http://jsfiddle.net/zxzLT/22/)*** [http://jsfiddle.net/zxzLT/22/](http://jsfiddle.net/zxzLT/22/)

添加这个CSS

```
.headline {
    display:block;
    margin: 40px 0;
    padding:30px;
    font: normal 33px/1.1 Georgia, "Times New Roman", Times, serif;
    color: #3E3E3E;
text-align:center;
    white-space: nowrap;
    position:relative;
}
.headline:after{
content:'';
    position:absolute;
    border-top: 1px solid #aaa;
    left:0;
    right:0;
    height:1px;
    z-index:-1;
    top:50%;
}

.headline > span {
    display:inline-block;
    background:url("http://subtlepatterns.subtlepatterns.netdna-cdn.com/patterns/tiny_grid.png");
    padding:0 30px;
} 
```

***[现场演示](http://jsfiddle.net/zxzLT/22/)***

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-24T15:24:01.060

一个只有一个元素`h1`（没有`span`内部，没有`div`包装）和没有透明背景的 js（纯 css）的解决方案：

[http://puigcerber.wordpress.com/2013/03/08/centered-heading-overlaying-a-horizo​​ntal-line-with-css/](http://puigcerber.wordpress.com/2013/03/08/centered-heading-overlaying-a-horizontal-line-with-css/)

在行动中看到它：http: [//jsfiddle.net/vLwDf/970/](http://jsfiddle.net/vLwDf/970/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T09:13:21.520

如果你需要的话，你可以使用右边界和左边界。有关其工作原理的更多详细信息，请参阅链接[http://www.quackit.com/css/properties/css_border-right-style.cfm](http://www.quackit.com/css/properties/css_border-right-style.cfm)。

编辑您可以将边框放在 h1 元素上，而不是放在 h1 的容器中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T09:25:39.077

如果您要实现的目标是让包含的 div 将 h1 保持在其范围内，您应该尝试以下操作：

```
.main-container {
    box-shadow: 0 0 5px #DD0000;
    display: table-row; /* i added this line */
    margin: 0 auto;
    width: 600px;
} 
```

或将 .main-container 的宽度增加到 1000 像素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T10:06:40.903

```
.main-container {
    width: 600px;
    height: 80px;
    margin: 0px auto;
    box-shadow: 0px 0px 5px #d00;
}

.headline {
    display: inline-block;    
    margin: 20px 0px 0px 0px;
    font: normal 33px/1.1 Georgia, "Times New Roman", Times, serif;
    color: #3E3E3E;
    white-space: nowrap;
}

.headline span {
    margin: 0px -40px 0px 0px;
    display:inline-block;
    position: relative;
    left: 50%;
    text-align:center;
} 
```

# haskell - 为什么seq不好？

> ID：12687392
> 
> 赞同：61
> 
> 时间：2012-10-02T09:04:18.460
> 
> 标签：haskell, lazy-evaluation

Haskell 有一个名为 的神奇函数`seq`，它接受任何类型的参数并将其简化为*弱头范式*(WHNF)。

我读过一些资料 [不是我记得他们*现在*是谁......] 声称“多态`seq`是坏的”。他们在哪些方面是“坏的”？

类似地，还有一个`rnf`函数，它可以将参数简化为*范式*(NF)。但这是一个类方法*；*它不适用于任意类型。对我来说，似乎“很明显”可以更改语言规范以将其作为内置原语提供，类似于`seq`. 据推测，这将比仅仅拥有`seq`. 这是怎么回事？

最后，有人建议将`seq`, `rnf`,`par`和类似函数赋予与函数相同的类型`id`，而不是`const`现在的函数，这将是一种改进。怎么会这样？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-02T10:50:04.930

据我所知，多态`seq`函数是不好的，因为它削弱了自由定理，或者换句话说，一些在没有时有效的等式`seq`不再有效`seq`。例如，等式

```
map g (f xs) = f (map g xs) 
```

适用于所有函数`g :: tau -> tau'`、所有列表`xs :: [tau]`和所有多态函数`f :: [a] -> [a]`。基本上，这种平等状态`f`只能重新排序其参数列表中的元素或删除或复制元素，但不能发明新元素。

老实说，它可以发明元素，因为它可以将非终止计算/运行时错误“插入”到列表中，因为错误的类型是多态的。也就是说，这种等式已经在像 Haskell 这样没有`seq`. 以下函数定义为该等式提供了一个反例。基本上，在左侧`g`“隐藏”了错误。

```
g _ = True
f _ = [undefined] 
```

为了修正方程，`g`必须严格，即必须将错误映射到错误。在这种情况下，等式再次成立。

如果添加多态`seq`运算符，则等式再次中断，例如，以下实例化是一个反例。

```
g True = True
f (x:y:_) = [seq x y] 
```

如果我们考虑这个列表`xs = [False, True]`，我们有

```
map g (f [False, True]) = map g [True] = [True] 
```

但另一方面

```
f (map g [False, True]) = f [undefined, True] = [undefined] 
```

也就是说，您可以使用`seq`使列表中某个位置的元素依赖于列表中另一个元素的定义。`g`如果是全数，则等式再次成立。如果您对自由定理感兴趣，请查看[自由定理生成器](https://www-ps.informatik.uni-kiel.de/~sad/FreeTheorems/cgi-bin/free-theorems-webui.cgi)，它允许您指定您是否正在考虑一种有错误的语言，甚至是一种有`seq`. 虽然，这似乎不太实际相关，但`seq`会破坏一些用于提高功能程序性能的转换，例如`foldr`/ `build`fusion 在`seq`. 如果您对存在 seq 的自由定理的更多细节感兴趣，`seq`请查看[存在 seq 的自由定理](http://www.janis-voigtlaender.eu/papers/FreeTheoremsInThePresenceOfSeq.pdf).

据我所知，当多态`seq`被添加到语言中时，它会破坏某些转换。然而，替代品也有缺点。如果您添加一个基于类型类的`seq`，您可能必须在程序中添加大量类型类约束，如果您在`seq`某个深处添加了一个。此外，省略也不是一个选择，`seq`因为已经知道存在可以使用`seq`.

最后，我可能会错过一些东西，但我看不出`seq`类型运算符是如何`a -> a`工作的。的线索`seq`是，如果另一个表达式被评估为头范式，它会将一个表达式评估为头范式。如果`seq`具有类型`a -> a`，则无法使一个表达式的评估依赖于另一个表达式的评估。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-11T18:02:37.773

[在这个答案](https://stackoverflow.com/a/12620418/1333025)中给出了另一个反例- monads 不能满足 monad 法则`seq`和`undefined`。并且由于`undefined`在图灵完备的语言中无法避免，因此应该归咎于`seq`.

# postgresql - PSQL 比 PgAdmin III 慢

> ID：12687395
> 
> 赞同：4
> 
> 时间：2012-10-02T09:04:25.403
> 
> 标签：postgresql, postgresql-9.1

我一直在分析我的应用程序的某些部分，我发现 PgAdmin3 在执行完全相同的脚本时比 psql 快得多。我正在使用 unix 套接字、Ubuntu 12.04 和 Postgresql 9.1 和 pgadmin3 v1.14。我有一个简单的脚本，如下所示：

```
BEGIN
INSERT INTO key_value(section,key,value) VALUES('section','key1','value');
....
INSERT INTO key_value(section,key,value) VALUES('section','key10000','value');
COMMIT; 
```

这是表格：

```
CREATE TABLE key_value
(
  key text NOT NULL,
  value text,
  CONSTRAINT key_value_pkey PRIMARY KEY (section , key )
)
WITH (
  OIDS=FALSE
); 
```

此脚本中有 10000 个插入。在 pgadmin3 中执行它大约需要 0.5 秒，在 psql 中执行它需要 2.5~3.5 秒。两者都包含在事务中，因此应该没有区别。在重新创建表、执行完全真空等操作后，结果是一致的。在 Postgresql 服务器中记录显示 postgres 在 psql 中执行时为每个插入语句记录日志，但从 pgadmin3 执行时只有一个日志。

psql 执行通过以下方式完成：

```
psql  -n -t -f p.sql -o/dev/null 
```

并且还测试了

```
psql  -n -t -1 -f p.sql -o/dev/null 
```

我的问题是为什么 psql 这么慢，为什么我们 postgresql 记录一个客户端中的每条语句，但只记录另一个客户端中的整个事务，以及是否有一个简单的 psql 修复。

**编辑**只是为了澄清，我正在记录持续时间而不是声明：

在服务器中，使用 psql 执行时我得到以下信息

```
2012-10-02 12:20:32 CEST LOG:  duration: 0.283 ms
....
2012-10-02 12:20:35 CEST LOG:  duration: 0.285 ms
2012-10-02 12:20:35 CEST LOG:  duration: 0.291 ms
2012-10-02 12:20:35 CEST LOG:  duration: 0.279 ms
2012-10-02 12:20:35 CEST LOG:  duration: 0.284 ms
2012-10-02 12:20:35 CEST LOG:  duration: 0.279 ms
2012-10-02 12:20:35 CEST LOG:  duration: 0.299 ms
....
2012-10-02 12:20:36 CEST LOG:  duration: 5.779 ms 
```

使用 pgadmin3 执行时：

```
2012-10-02 12:23:21 CEST LOG:  duration: 532.695 ms 
```

psql和pgadmin3中的用户和数据库相同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:29:08.730

我的提示：pgAdmin 将脚本作为一个多语句执行 - 因此网络（协议）开销更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:45:42.813

`psql`具有将分号识别为语句分隔符的集成解析器。与 pgadmin 不同，它使用它将 SQL 脚本分解为多个语句，如[Pavel 的回答](https://stackoverflow.com/a/12689473/238814)中所述。

没有选项可以关闭此行为。但是，使用 DO 匿名代码块应该会获得类似的结果，只需很少的更改。如果你这样写脚本：

```
DO $$
BEGIN
INSERT INTO key_value(section,key,value) VALUES('section','key1','value');
....
INSERT INTO key_value(section,key,value) VALUES('section','key10000','value');
END $$; 
```

这将与 pgadmin 一样一次性发送到服务器（尽管它在技术上完全不同），并且可能在相当的时间内执行。

编辑：根据@vseguip 评论，这不是有效的，因为 plpgsql 解释器在那些 10k 语句上花费了时间。

替代想法：将脚本更改为只有一个多行的 INSERT，而不是多个 INSERT，没有 DO 块。

```
BEGIN;
INSERT INTO key_value(section,key,value) VALUES('section','key1','value'),
      ('section','key2','value'),
      ('section','key3','value'),
      ....
      ('section','key10000','value');
END; 
```

# java - 如何在windows上创建jar文件？

> ID：12687399
> 
> 赞同：4
> 
> 时间：2012-10-02T09:04:44.187
> 
> 标签：java, command-line, jar, primefaces

为了创建一个可定制的 primefaces 主题。我想生成一个罐子

我的文件夹结构是：

```
- jar
   - META-INF
     - resources
       - Primefaces-myrtheme
         - theme.css
         - images 
```

我尝试使用以下命令：

```
> Jar-cvf nameOfMyTheme.jar 
```

但它不工作：（

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T09:06:40.813

您没有为您的命令提供任何输入文件..

你需要这样做： -

```
jar cvf nameOfMyTheme.jar YourClass.class 
```

看看这个... [http://docs.oracle.com/javase/tutorial/deployment/jar/build.html](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:07:03.990

您需要告诉 jar 命令在哪里可以找到您的类文件和资源文件以及您希望在 Manifest 文件中包含的任何其他信息。可以在[此处](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/jar.html)找到有关使用 jar 命令的信息。

-cvf 命令采用这种格式。

```
jar c[v0M]f jarfile [-C dir] inputfiles [-Joption] 
```

# c# - EWS 获取所有文件夹中未读电子邮件的计数

> ID：12687401
> 
> 赞同：5
> 
> 时间：2012-10-02T09:04:46.760
> 
> 标签：c#, winforms, .net-3.5, exchangewebservices

我正在尝试从 Exchange 获取特定用户的未读电子邮件数量。

我能够从收件箱中获取电子邮件数量，如下所示：

```
SearchFilter sf = new SearchFilter.SearchFilterCollection(LogicalOperator.And, new SearchFilter.IsEqualTo(EmailMessageSchema.IsRead, false));
ItemView view = new ItemView(int.MaxValue);
FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.Inbox, sf, view);
int unreadCount = 0;
foreach (EmailMessage i in findResults)
    {
        unreadCount++;
    }
label1.Text = unreadCount.ToString(); 
```

这很好用。
我还能够获取所有子文件夹是收件箱：

```
FindFoldersResults findResults1 = service.FindFolders(
    WellKnownFolderName.Inbox,
    new FolderView(int.MaxValue) { Traversal = FolderTraversal.Deep });

foreach (Folder folder in findResults1.Folders)
{
    Console.WriteLine(folder.DisplayName);
} 
```

问题是我无法将这两者结合在一起。
**我知道我可以做嵌套的 foreach 循环，但我想避免这种情况。**

我发现了这些问题：[Exchange Web Services (EWS) FindItems inside All Folders](https://stackoverflow.com/questions/7401080/exchange-web-services-ews-finditems-within-all-folders)，但它至少需要使用 Outlook 2010 才能创建`AllItems`文件夹。

我知道我可以创建`SearchFilterCollection`，但如何为其添加规则，以便它在收件箱和所有子文件夹中搜索未读电子邮件？

**编辑：**

这是我迄今为止尝试做的：

```
private int getEmailCount()
{
    int unreadCount = 0;

    FolderView viewFolders = new FolderView(int.MaxValue) { Traversal = FolderTraversal.Deep, PropertySet = new PropertySet(BasePropertySet.IdOnly) };
    ItemView viewEmails = new ItemView(int.MaxValue) { PropertySet = new PropertySet(BasePropertySet.IdOnly) };
    SearchFilter unreadFilter = new SearchFilter.SearchFilterCollection(LogicalOperator.And, new SearchFilter.IsEqualTo(EmailMessageSchema.IsRead, false));

    FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.Inbox, unreadFilter, viewEmails);
    unreadCount += findResults.Count();

    FindFoldersResults inboxFolders = service.FindFolders(WellKnownFolderName.Inbox, viewFolders);

    foreach (Folder folder in inboxFolders.Folders)
    {
        findResults = service.FindItems(folder.Id, unreadFilter, viewEmails);
        unreadCount += findResults.Count();
    }

    return unreadCount;
    } 
```

基本上这是可行的，但是当我创建了多个子文件夹时，它开始工作得很慢。
**我可以做一个而不是多个查询来获得相同的结果吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:53:45.503

我搜索了一下并创建了这个函数：

```
 public void getEmailCount(Action<int> callback)
    {
        int unreadCount = 0;

        FolderView viewFolders = new FolderView(int.MaxValue) { Traversal = FolderTraversal.Deep, PropertySet = new PropertySet(BasePropertySet.IdOnly) };
        ItemView viewEmails = new ItemView(int.MaxValue) { PropertySet = new PropertySet(BasePropertySet.IdOnly) };
        SearchFilter unreadFilter = new SearchFilter.SearchFilterCollection(LogicalOperator.And, new SearchFilter.IsEqualTo(EmailMessageSchema.IsRead, false));
        SearchFilter folderFilter = new SearchFilter.SearchFilterCollection(LogicalOperator.And, new SearchFilter.IsEqualTo(FolderSchema.DisplayName, "AllItems"));

        FindFoldersResults inboxFolders = service.FindFolders(WellKnownFolderName.Root, folderFilter, viewFolders);

        if (inboxFolders.Count() == 0)//if we don't have AllItems folder
        {
            //search all items in Inbox and subfolders
            FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.Inbox, unreadFilter, viewEmails);
            unreadCount += findResults.Count();

            inboxFolders = service.FindFolders(WellKnownFolderName.Inbox, viewFolders);
            foreach (Folder folder in inboxFolders.Folders)
            {
                findResults = service.FindItems(folder.Id, unreadFilter, viewEmails);
                unreadCount += findResults.Count();
            }
        }
        else //AllItems is avilable
        {
            foreach (Folder folder in inboxFolders.Folders)
            {
                FindItemsResults<Item> findResults = service.FindItems(folder.Id, unreadFilter, viewEmails);
                unreadCount += findResults.Count();
            }
        }

        callback(unreadCount);
    } 
```

基本上它检查我们是否有可用的`AllItems`文件夹。
如果`YES`然后我们执行一个返回所有未读消息的简单查询。
如果`NO`然后我们循环收件箱中的所有文件夹。这比较慢，取决于我们有多少文件夹和级别。

欢迎任何修复和改进:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-18T10:43:33.163

不确定这是您要查找的内容，但是...获取未读电子邮件很重要（*收件箱*/*草稿*等）：

```
int x = Folder.Bind(yourService, WellKnownFolderName.Inbox).UnreadCount;
int y = Folder.Bind(yourService, WellKnownFolderName.Drafts).UnreadCount;
return x + y; 
```

在这种情况下，服务被调用了两次，但调用是按顺序发出的——*不够好*。

*不过，您可以同时*发出两个请求并增加应用程序**的响应时间。**

请参阅[本](http://tech.pro/tutorial/1252/asynchronous-controllers-in-asp-net-mvc)教程或任何解释如何实例化两个*TPL* **任务**、将它们发送到**任务调度程序**、**等待**两者（*WaitAll()*）完成并最终检索它们的结果的教程：）

而且，如果您想在应用一些自定义过滤器（不是简单的“未读”过滤器）后获取电子邮件计数，请确保您的**ItemView**对象是*ItemView(1)*，**而不是** *ItemView(int.MaxValue)*。然后，获取总数：

```
int n = findItemsResults.TotalCount; 
```

请参阅[TotalCount 属性](http://msdn.microsoft.com/en-us/library/dd635348%28v=exchg.80%29.aspx)的文档。

这样，服务响应就*很小*了——它只包含一个项目，但它（响应）也带有总数……这就是你想要的，对吧？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-03T16:03:17.403

这是获取邮箱未读总数的代码。

1.  查找所有深度遍历的文件夹
2.  将每个文件夹的属性集限制为 id、未读计数、显示名称（仅供参考）
3.  某些文件夹（如日历、联系人）没有此属性，因此请处理这种情况

此代码段的限制：

1.  如果邮箱在 Top of information store 下包含超过 1000 个文件夹，那么您将无法获得完整的未读总数
2.  要处理这种情况，请在循环中执行 finditems，直到没有更多具有相同逻辑的项目

这使得只有一个 findfolders 调用并处理结果。

```
public static int GetTotalUnreadCount(ExchangeService ewsConnector)
{
    int pagedView = 1000;
    FolderView fv = new FolderView(pagedView) { Traversal = Microsoft.Exchange.WebServices.Data.FolderTraversal.Deep };
    fv.PropertySet = new PropertySet(BasePropertySet.IdOnly, FolderSchema.UnreadCount, FolderSchema.DisplayName);

    FindFoldersResults findResults = ewsConnector.FindFolders(WellKnownFolderName.MsgFolderRoot, fv);

    int totalUnreadCount = 0;
    foreach (Folder f in findResults.Folders)
    {
        try
        {
            totalUnreadCount += f.UnreadCount;
            Console.WriteLine("Folder [" + f.DisplayName + "] has [" + f.UnreadCount.ToString() + "] unread items.");
        }
        catch(Exception ex)
        {
            Console.WriteLine("Folder [" + f.DisplayName + "] does not have the unread property.");
        }
    }

    Console.WriteLine("Mailbox has [" + totalUnreadCount.ToString() + "] unread items.");

    return totalUnreadCount;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-14T19:36:28.237

获取文件夹及其计数的代码示例。在此示例中，我们列出了所有第一级文件夹，并将它们添加到文件夹的公共类列表中，其中包含一个 NewMessageCount 对象。关键是 Folder.Bind(myService, folder.Id).UnreadCount 部分。

```
public List<Common.MailFolder> ListFolders()
    {
        try
        {
            List<Common.MailFolder> myFolders = new List<Common.MailFolder>();
            Common.MailFolder myFolder;

            List<ExchangeFolder> myExchangeFolders = new List<ExchangeFolder>();

            FolderView myView = new FolderView(10);
            myView.PropertySet = new PropertySet(BasePropertySet.FirstClassProperties, FolderSchema.DisplayName, FolderSchema.Id);
            myView.Traversal = FolderTraversal.Shallow;

            FindFoldersResults myResults = myService.FindFolders(WellKnownFolderName.MsgFolderRoot, myView);

            foreach (Folder folder in myResults)
            {
                myFolder = new Common.ICE.MailFolder();
                myFolder.NewMessageCount = Folder.Bind(myService, folder.Id).UnreadCount;
                myFolder.FolderId = folder.Id.ToString();
                myFolder.FolderName = folder.DisplayName;
                myFolders.Add(myFolder);
            }

            return myFolders;
        }
        catch (Exception ex)
        {
            Logger.Log.Error("Exchange Helper - List Folders", ex, Utility.GetUserId());
            return null;
        }
    } 
```

# javascript - 在 jira 插件中使用静态资源（如 JQuery）

> ID：12687403
> 
> 赞同：2
> 
> 时间：2012-10-02T09:05:19.587
> 
> 标签：javascript, jquery, plugins, resources, jira

如何在 Atlassian Jira 4.4 插件中包含 Web 资源？

atlassian-plugin.xml：

```
 <web-resource key="statistics-resources" name="statistics">
    <resource type="download" name="statistics.js" location="js/statistics/statistics.js"/>
    <dependency>jira.webresources:jira-global</dependency>
    <context>com.cs.jira.plugins.statistics-resources</context>
</web-resource> 
```

统计.js：

```
$("#projects").change(function() {
$(location).attr('href', "/jira/secure/StatisticsModuleAction!project.jspa?project=" + $(this).find("option:selected").text());}); 
```

在 Velocity 模板中包含资源：

```
$webResourceManager.requireResourcesForContext("com.cs.jira.plugins.statistics-resources") 
```

当我尝试从我的 statistics.js 调用 javascript 函数时，我收到此错误：

> 未捕获的类型错误：对象 [object Window] 的属性“$”不是函数

然后我尝试包含外部 jQuery 库：

```
<web-resource key="statistics-resources" name="statistics">
    <resource type="download" name="jquery-1.8.2.js" location="js/lib/jquery-1.8.2.js"/>
    <resource type="download" name="statistics.js" location="js/statistics/statistics.js"/>
    <dependency>jira.webresources:jira-global</dependency>
    <context>com.cs.jira.plugins.statistics-resources</context>
</web-resource> 
```

我在 batch.js 中遇到另一个错误：

> 未捕获的类型错误：对象 [object Object] 没有方法“handleAccessKeys”

我怎样才能正确地包含我的资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-08T11:27:32.503

据我所知，您已正确包含统计资源。您的问题是 Jira 通过与 jquery 标准不同的引用提供对 jquery 的访问。如果您在 javascript 代码中替换`$`为`AJS.$`它应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-10T19:05:34.373

```
AJS.toInit(function () { 
// Your code here for .js file
}); 
```

应该解决您的问题并始终参考 AJS.$ 的 $ 函数，正如 Joe Douglas 所回答的那样。

# javascript - 找出一个字符串前面是否有另一个带有某些字符的字符串

> ID：12687408
> 
> 赞同：0
> 
> 时间：2012-10-02T09:05:43.497
> 
> 标签：javascript, regex

如何检查一个字符串前面是否有另一个字符串。

```
'test@test.com, ,root@boot.com' 
```

会成为：

```
'test@test.com, root@boot.com' 
```

编辑：

我可能不得不解释整个情况..

我用“，”分割了一个字符串，并检查它们是否是有效的电子邮件地址。如果是这样，则将文本删除并存储在另一个 div 中，如果不是……则留下文本。

这就是为什么当有 2 个成功的电子邮件地址和 1 个不成功的电子邮件地址时，您会得到：

'，，测试一下，'

所以我需要删除除了空格之外没有任何东西的逗号，输入或另一个逗号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:09:39.013

如果“其他”是指“除空格之外的任何内容”，那么您可以使用

```
result = subject.replace(/(\s|^),/g, "$1"); 
```

**编辑：**

看起来您实际上想将重复的逗号压缩为单个逗号。在这种情况下，我建议

```
result = subject.replace(/,(?:\s*,)+/g, ","); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:09:42.553

在那种特殊情况下，我只会过滤/​​去除空格。

```
var str = 'test@test.com, ,root@boot.com';

str = str.split(',').filter( removeWhiteSpace );

function removeWhiteSpace( sub ) {
    return !!sub.trim();
} 
```

# linq - 哪个查询具有更好的性能来返回具有特定属性最大值的对象？

> ID：12687410
> 
> 赞同：0
> 
> 时间：2012-10-02T09:05:47.010
> 
> 标签：linq, linq-to-sql

哪个查询具有更好的性能来返回具有特定属性最大值的对象？

```
 var i = from item in listOfItems
         orderby item.Number descending
         select item; 
```

或者：

```
 var i = from item in listOfItems
          where item.Number== (from l in listOfItems select item).Max(l => l.Number)
          select item; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:29:27.833

在 SQL 中，这两个查询被转换为（至少，如果您在生成的 IEnumerables 中执行 .FirstOrDefault() 以选择想要的对象）：

```
SELECT TOP (1) [t0].[Number]
FROM [Item] AS [t0]
ORDER BY [t0].[Number] DESC

SELECT TOP (1) [t0].[Number]
FROM [Item] AS [t0]
WHERE [t0].[Number] = ((
    SELECT MAX([t1].[Number])
    FROM [Item] AS [t1]
    )) 
```

根据任何事实，我不能说哪个会更快，但我会选择第一个顺序解决方案。

-* 编辑地址查询数据库 *-

如果您正在查询内存中的集合，则差异应该非常小。

然而，这是一个完全不科学的测试结果，它以两种不同的方式查询 100.000 个半随机数，每一个查询 10 次：

```
By desc (0): 00:00:00.0173879
By .Max (0): 00:00:00.0132833

By desc (1): 00:00:00.0250781
By .Max (1): 00:00:00.0140374

By desc (2): 00:00:00.0073955
By .Max (2): 00:00:00.0111658

By desc (3): 00:00:00.0066200
By .Max (3): 00:00:00.0115127

By desc (4): 00:00:00.0071220
By .Max (4): 00:00:00.0119572

By desc (5): 00:00:00.0070341
By .Max (5): 00:00:00.0114320

By desc (6): 00:00:00.0066670
By .Max (6): 00:00:00.0111127

By desc (7): 00:00:00.0071905
By .Max (7): 00:00:00.0116715

By desc (8): 00:00:00.0065414
By .Max (8): 00:00:00.0118076

By desc (9): 00:00:00.0071662
By .Max (9): 00:00:00.0131962 
```

这是整个 LINQPad 脚本：

```
void Main()
{
    var listOfItems = new List<Item>();

    // Make 100000 Items with semirandom numbers
    for(int i=0; i<100000; i++)
    {
        listOfItems.Add(new Item { Number = i * DateTime.Now.Ticks });
    }

    for(int i=0; i<10; i++)
    {
        RunTest(i, listOfItems);
    }
}

void RunTest(int count, List<Item> listOfItems)
{
    var timer = new System.Diagnostics.Stopwatch();
    timer.Start();
    // Find by descending
    for(int i=0; i<100000; i++)
    {
        var itemWithLargestNumber = 
            from item in listOfItems
            orderby item.Number descending
            select item;
    }
    timer.Stop();
    string.Format("By desc ({0}): {1}", count, timer.Elapsed).Dump();

    timer = new System.Diagnostics.Stopwatch();
    timer.Start();

    // Find by .Max
    for(int i=0; i<100000; i++)
    {
        var itemWithLargestNumber = 
            from item in listOfItems
            where item.Number== (from l in listOfItems select item).Max(l => l.Number)
            select item;
    }
    timer.Stop();
    string.Format("By .Max ({0}): {1}", count, timer.Elapsed).Dump();

    "".Dump();
}

class Item 
{
    public long Number { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:08:46.840

好吧，这两个都返回*一系列*项目。我会使用：

```
var max = listOfItems.OrderByDescending(item => item.Number).FirstOrDefault(); 
```

然后检查查询的执行计划是什么。在 LINQ to Objects 中效率相对较低，但您确实需要查看生成的 SQL，以及这在数据库端的*真正含义。*

# matlab - 生成高斯和均匀随机变量

> ID：12687413
> 
> 赞同：-8
> 
> 时间：2012-10-02T09:06:01.693
> 
> 标签：matlab

大家好，我有一个问题。感谢您的回答

使用 rand、randn 函数生成高斯和均匀随机变量。绘制概率密度函数并证明这些变量是均匀的和高斯的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:13:14.507

一般来说，我没有回答清楚证明你自己没有尝试过*任何事情*的问题的习惯。今天也不例外，但我会做以下事情：

我将为您提供一些代码，其中包含一些故意的错误。由您决定代码的作用以及问题出在哪里。

在 Matlab 命令提示符中键入`help <command>`或`doc <command>`以获取有关特定命令的更多信息，例如：

```
>> help rand 
```

将为您提供有关该`rand`功能的丰富信息。现在，事不宜迟：

```
%%# normal distribution

nvars = 1e6;

N = randn(nvars,1);

f = @(x) 1/sqrt(2*pi) * exp( -x^2 );

figure(1), clf, hold on

[n, x] = hist(N, 50);    
bar(x, n)

x = -10:10;
plot(x, f(x), 'r')

%%# uniform distribution

nvars = 1e6;

U = rand(nvars,1);

g = @(x) x>=0&x<=1;

figure(2), clf, hold on

[n, x] = hist(U, 2);
bar(x, n)

x = -1.5:1.5;
plot(x, g(x), 'r') 
```

注意：修复错误后，是否考虑此“证明”取决于您。如果我是高中老师，我可能会，但如果我是教授，我肯定不会:)

# sql-server - 在 T-SQL 中创建 server.database.table 的动态路径

> ID：12687419
> 
> 赞同：0
> 
> 时间：2012-10-02T09:06:32.900
> 
> 标签：sql-server, sql-server-2008, tsql, dynamic-sql

我正在尝试动态创建表。来自一个数据库 (@sourcedatabase) 的表用于在另一个 (@targetdatabase) 中创建表。

当我明确命名数据库时，这很好用。但是，我希望它们是动态的，如下例所示。我已经阅读了很多关于这方面的内容，并且我可以很好地使用类似的东西

```
set @sql = 'DROP TABLE ' + @targetdatabase + '.' + @SomeNAME 
execute (@sql) 
```

但是当它变得更复杂时，我不知所措：

```
declare @sourcedatabase as varchar(max) = 'DATABASE1'
declare @targetdatabase as varchar(max) = 'DATABASE2'

declare @HighestID as int = (SELECT  max(Id) FROM @sourcedatabase.system.Organisationtype)
declare @i as int = (SELECT  max(Id) FROM @sourcedatabase.system.Organisationtype)

while @i >= (SELECT  min(Id) FROM @sourcedatabase.system.LaagTypeOrganisatie)
BEGIN
--SOME ACTIONS
set @i = @i + 1 
END 

declare @x as int = (select count(*) from @targetdatabase.sys.tables where name = @SomeNAME)

IF   @x <> 0
BEGIN
set @sql = 'DROP TABLE ' + @targetdatabase + '.' + @SomeNAME 
execute (@sql)
END 
```

如您所见，我想要数据库命名变量。将整个脚本变成一个 exec 语句非常复杂，而且读起来也不是很漂亮。在文本文件中读取此脚本，在 @targetdatabase 和 @sourcedatabase 上进行替换然后执行它是一个想法吗？如果是这样，这将如何完成？

我期待您的想法和贡献！

编辑：脚本作为jobagent执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:47:55.390

目前尚不清楚如何执行脚本，但假设您使用的是 sqlcmd.exe 或 SSMS，您可以使用[sqlcmd 脚本变量](http://msdn.microsoft.com/en-us/library/ms188714.aspx)在运行时替换变量。

# c++ - 如何计算和使用 cvMat 平均值

> ID：12687437
> 
> 赞同：18
> 
> 时间：2012-10-02T09:07:33.700
> 
> 标签：c++, opencv, matrix, mean

在 openCV 备忘单（C++）中，我找到了矩阵运算[`mean()`](https://docs.opencv.org/3.4/d2/de8/group__core__array.html#ga191389f8a0e58180bb13a727782cd461)。当我使用它时：

```
float myMatMean = mean( MyMat ); 
```

我得到错误：

> 不存在从“cv::Scalar”到“float”的合适转换函数

我该怎么做才能使用这些数据？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-02T10:14:10.823

谢谢。

问题是虽然`myMat`是 2D 图像。返回类型仍然是`Scalar`大小为**4**的 a 。

解决方案是

```
cv::Scalar tempVal = cv::mean( myMat );
float myMAtMean = tempVal.val[0]; 
```

# facebook-graph-api - 所有 API 调用都返回“已达到应用程序限制”

> ID：12687438
> 
> 赞同：0
> 
> 时间：2012-10-02T09:07:36.710
> 
> 标签：facebook-graph-api, blocking, limits

无法使用我的应用程序，因为每个 Graph API 调用都会返回：

```
{
   "error": {
      "message": "(#4) Application request limit reached",
      "type": "OAuthException",
      "code": 4
   }
} 
```

统计数据中没有显示特殊的流量峰值，或者不知道是什么原因造成的？我没有看到任何地方提到的任何限制。我的用户变得非常不安，因为这会影响到所有用户。那有什么限制呢？这些如何扩展？

我的应用程序的每个用户都收到此错误。所以我的电子邮件现在充斥着来自愤怒用户的错误消息。

知道我能做什么吗？或者当这个限制被重置时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:34:52.440

因此，似乎有人每天用十亿次调用淹没我的图形 api 调用。

# api - “Drive SDK”和“Drive API”的区别

> ID：12687443
> 
> 赞同：19
> 
> 时间：2012-10-02T09:08:07.453
> 
> 标签：api, sdk, google-drive-api

据我了解，

*   Google Drive API 用于将 Google Drive 与其他应用程序和
*   Google Drive SDK 用于创建要在 Drive 中使用的自定义应用程序。

我是对的还是错的，请告诉我这两者的区别。

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-02T09:22:38.857

[Google Drive SDK是围绕](https://developers.google.com/drive/)[Google Drive API](https://developers.google.com/drive/v2/reference/)的一层；SDK 提供特定于语言的库、示例和指南，以简化使用 API 的应用程序的开发。

请注意，当前有两个版本的 API，v2 是当前版本。您需要确保您选择的库支持您的目标版本以访问正确的功能集。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T01:23:09.110

作为为 SDK 贡献内容的团队的作者，我希望我可以为 DarRay 提供所需的 Google Drive 熟悉度。Ashley 的回答是正确的——我们将 SDK 视为 Drive 的一*组*API，以及客户端库、示例和所有其他内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-15T22:30:19.193

这会在 Google Developer Console 中设置项目时出现 -

![Drive SDK 与 Drive API](../Images/08a58ef2a61b365909e23ae94211d311.png)

# c# - 如何循环来自 TextReader 的行？

> ID：12687453
> 
> 赞同：11
> 
> 时间：2012-10-02T09:08:55.893
> 
> 标签：c#, .net, textreader

如何遍历[TextReader](http://msdn.microsoft.com/en-us/library/system.io.textreader.aspx) `source`中的行？

我试过

```
foreach (var line in source) 
```

但是得到了错误

> foreach 语句无法对“System.IO.TextReader”类型的变量进行操作，因为“System.IO.TextReader”不包含“GetEnumerator”的公共定义

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-02T09:13:47.723

```
string line;
while ((line = myTextReader.ReadLine()) != null)
{
    DoSomethingWith(line);
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-02T09:10:47.703

您可以使用`File.ReadLines`which is *deferred execution*方法，然后通过行循环：

```
foreach (var line in File.ReadLines("test.txt"))
{
} 
```

更多信息：

[http://msdn.microsoft.com/en-us/library/dd383503.aspx](http://msdn.microsoft.com/en-us/library/dd383503.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T09:10:56.973

您可以尝试使用此代码 - 基于`ReadLine method`

```
 string line = null;
        System.IO.TextReader readFile = new StreamReader("...."); //Adjust your path
        while (true)
        {
            line = readFile.ReadLine();
            if (line == null)
            {
                break;    
            }
            MessageBox.Show (line);
        }
        readFile.Close();
        readFile = null; 
```

# android - Android：如何混合 2 个音频文件并使用 soundPool 重现它们

> ID：12687458
> 
> 赞同：3
> 
> 时间：2012-10-02T09:09:15.607
> 
> 标签：android, audio, merge, soundpool, mixing

我正在尝试开发一个 Android 应用程序，它使用一些声音并将它们混合在一起以创建音乐作品。一开始我试图同时重现声音，但是当我这样做时，它们变得不同步，在阅读论坛几个小时后，我意识到在循环模式下同时重现多个声音的最佳方法就是将音频文件合并为一个，然后将它们复制为单个文件。

这是我正在使用的代码：

```
 //Oppening file 1
        InputStream is = getAssets().open("sounds/sound_1.ogg");
        int size = is.available();
        byte[] buffer = new byte[size];
        is.read(buffer);
        is.close();
        //End Oppening file 1

        //Oppening file 2
        InputStream is_2 = getAssets().open("sounds/sound_2.ogg");
        int size_2 = is_2.available();
        byte[] buffer_2 = new byte[size_2];
        is_2.read(buffer_2);
        is_2.close();
        //End Oppening file 2

        //Get Bigger size and Merge Files
        int total_size =0;

        byte[] buffer_final;
        if(buffer.length>buffer_2.length){
            total_size = buffer_2.length;   
        }else{
            total_size = buffer.length-1;
        }

        buffer_final= new byte[total_size];

        for(int i=30; i<total_size-30;i++){

            float a =buffer[i];
            float b =buffer_2[i];
            float c = (a+b)/2;
            buffer_final[i]=(byte) c;      

        }

        FileOutputStream fos = new FileOutputStream(f);        
        fos.write(buffer_final);
        fos.close(); 
```

之后，我使用 soundPool 读取了生成的文件并尝试重现它。

如果我在不合并文件的情况下使用这个公式（所以，只使用一个声音，创建一个新文件，然后读取它，它工作得很好，所以我认为问题出在文件合并中，这可能不像只需将字节相加，然后除以 2。

完成此操作后，日志告诉我：

无法加载样本（空）。

而且，当我尝试重现日志时，说明样本尚未准备好。

请对此有任何帮助吗？我已经用谷歌搜索了几个星期，但我无法解决它......

这是我第一次编写 Android 和音频，所以我有点迷茫。

问题是，我怎样才能混合这些声音？我这样做的方式正确吗？问题出在哪里？

感谢阅读和帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:59:57.577

如果您使用的是原始 PCM 数据，则对样本进行平均可以正常工作。您需要做的是首先将 OGG 文件转换为 PCM 缓冲区。如果您想将输出保留为 OGG，则需要在完成后将其转换回来。

我的经验主要是使用 MP3 库而不是 OGG，但我听说过[JOrbis](http://www.jcraft.com/jorbis/)的好消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T22:24:59.443

这样

```
soundPool = new SoundPool(NUM_SOUNDS, AudioManager.STREAM_MUSIC, 0); 
```

NUM_SOUNDS 是 soundPool 可以播放的声音数量。

# javascript - javascript：为什么这个返回语句会导致语法错误？

> ID：12687464
> 
> 赞同：3
> 
> 时间：2012-10-02T09:09:47.567
> 
> 标签：javascript, aptana3

我正在使用 Apatana 3，我稍微修改了 JS 代码格式化程序让它看起来更清晰，下面是格式化后的代码，它给了我一个错误：

```
 copyOffset : function( index )
    {
        return
        {
            x : index, y : index
        };
    } 
```

萤火虫给我：

```
SyntaxError: invalid label 
```

如果我将其更改为：

```
 copyOffset : function( index )
    {
        return{
            x : index, y : index
        };
    } 
```

会好的，谁能告诉我这两个返回语句之间的区别是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T09:12:09.217

不同之处在于第一个片段实际上被解释为......

```
copyOffset : function( index )
{
    return;
    {
        x : index, y : index
    };
} 
```

它被称为[自动分号插入](http://en.wikipedia.org/wiki/JavaScript_syntax#Whitespace_and_semicolons)：当 JavaScript 解析器看到一个看似完整但缺少分号的语句时，它会尝试“修复”它。

是的，即使有时很有帮助，也可能很烦人。[这篇文章](http://inimino.org/~inimino/blog/javascript_semicolons)详细解释了这个 JavaScript 特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:13:30.500

哈哈，这是经典的；）

Javasript 中断

```
return
{ 
```

因为它被视为`{`一个新块并隐式插入分号：

```
return;
{ 
```

因此返回未定义：-D

问题是当语句有意义时，Javasript 在行尾插入分号。由于`return`可以独立存在，Javascript 将其解释为完整的语句并插入分号，从而破坏您的代码。

实际上，这就是为什么在 Javascript 中你总是应该避免使用这些换行符并编写：

```
copyOffset : function( index ){
    return{
        x : index, y : index
    };
} 
```

# perl - perl 中即将出现/当前的新技术将用于企业应用程序

> ID：12687468
> 
> 赞同：0
> 
> 时间：2012-10-02T09:09:58.810
> 
> 标签：perl

我想不断更新最新的技术并了解和学习在企业应用程序中使用的 perl 中的新技术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:42:41.483

也许@Quentin 是对的，“最新”会改变，但企业行动缓慢。这个问题很容易与 2012-2017 年相关。

如果在面试期间被展示，我想看到什么？

*   访问 CPAN（否则为什么要使用 Perl？）
*   通过 Test::More 和朋友的良好测试套件
*   可能使用詹金斯或类似的一些连续积分
*   使用 local::lib 管理不同版本的库
*   使用perlbrew管理不同版本的perl
*   用于对象的驼鹿（或者可能是 Moo）
*   Try::Tiny 或类似的异常处理
*   也许 Exception::Class 或结构化异常的朋友
*   Log::Any 或其他一些标准化的日志接口
*   关于文档、perltidy、perlcritic 的一些标准

其中很多与程序有关，而不是技术，但是在生成好的、可维护的、可靠的代码和部署它的过程中付出了很多努力。

[不过， Moose](http://search.cpan.org/dist/Moose/)可能与任何语言一样是“最新”的对象系统。上面提到的几乎所有其他内容都可以通过 cpan 找到，除了[jenkins](http://jenkins-ci.org/)这是一个 java 应用程序。

# sql - 表单 isset 不适用于 jquery

> ID：12687469
> 
> 赞同：1
> 
> 时间：2012-10-02T09:10:00.937
> 
> 标签：sql, forms, submit, isset

您好，我正在使用图像浏览器，其中有一个提交按钮以向数据库添加新行。不幸的是，isset 功能不起作用。当我删除这个 if 语句时它工作正常，但是当使用 if(isset($_POST['addImg'])) 时没有任何反应。

图像浏览器具有以下形式：

```
<div id="galleryAdd">
    <form enctype="multipart/form-data" method="post" >     
        <!-- een hidden id meegeven voor de plaatsing -->
        <input type="hidden" name="parentID" value="<? //$_GET['b']?>40">
        <input type="submit" name="addImg" value="Toevoegen" />
    </form> 
</div>
<div id="addExisting"></div> 
```

单击图像项时，javascript正在调用页面加载：

```
$('.imgItem').click(function() {
        $('.imgItem').removeClass("image_select");
        $(this).addClass("image_select");   
        var imgsource = $(this).find('img').attr('src'),
            folderID = $(this).find('img').attr('rel');
        $("#addExisting").load("ajax.addExisting.php", {parentID:folderID, imgsource:imgsource});
        return false;   
    }); 
```

ajax.existing.php ：单击图像时加载的页面

```
/* Algemene Gegevens bestand */
$bestand = $_POST['imgsource'];

/* Meta Gegevens bestand */
$file = substr($bestand, 0,strrpos($bestand,'.'));
$ext = substr(strrchr($bestand,'.'),1);
$base = basename($file);

if(isset($_POST['addImg'])){
/* Parent */
$queryParent = mysql_query("SELECT * FROM `image_folders` WHERE id = ".$_POST['parentID'].""); 
$parent = mysql_fetch_assoc($queryParent);
$bestand_folder = "../../images/".$parent['dirname']."/";

mysql_query("INSERT INTO images (positie, parent, parentID, naam, alt, titel, extensie) VALUES ('99', '".$parent['name']."', '".$parent['id']."', '".$base."', '".$base."',     '".$base."','".$ext."')")or die('kan niet uploaden'.mysql_error());

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:17:19.497

但是您没有发布`addImg`.

您只发送到 ajax 页面`{parentID:folderID, imgsource:imgsource}`

改变

```
$("#addExisting").load("ajax.addExisting.php", {
                              parentID:folderID, 
                              imgsource:imgsource}); 
```

到

```
$("#addExisting").load("ajax.addExisting.php", {
                              parentID:folderID, 
                              imgsource:imgsource,  
                              addImg:'Toevoegen'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:17:49.853

您没有在通话中发送该`addImg`字段。`.load()`您发送的唯一字段是`parentID`和`imgsource`。如果需要`addImg`，请将其添加到`.load()`.

# ios6 - Passbook 通行证图像的尺寸是多少？

> ID：12687470
> 
> 赞同：10
> 
> 时间：2012-10-02T09:10:10.603
> 
> 标签：ios6, passbook

可以包含在 pkpass 包中的通行证图像（例如 background.png、logo.png）的正确尺寸是多少？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-02T09:10:10.603

我无法在任何地方找到此文档，但经过大量实验后，我认为图像的正确尺寸是正确的。请注意，如果您只包含@2x Retina 图像，它将自动缩小以进行常规显示。

## 图标

*   29x29
*   58x58 (@2x)
*   出现在邮件应用程序和有关通行证的通知中，但不在通行证本身上
*   此图像是强制性的，没有它就无法打开包裹

## 标识

*   30x30 至 300x30
*   60x60 到 600x60 (@2x)

## 条

*   StoreCard - 310 x 123 或 620 x 246 (@2x)
*   EventTicket - 310 x 84 或 620 x 168 (@2x)
*   如果太高将被中心裁剪

## 缩略图

*   高达 80x90
*   高达 160x180 (@2x)
*   如果太大，将被缩小，如果小于最大尺寸，则*不会被放大。*因此，一个 80x80 的图标将显示为 80x80。

## 背景

*   312x398
*   624x796 (@2x)
*   这在传球后面看起来很模糊。
*   我不是 100% 确定这些尺寸，因为模糊很难说，但它们似乎有效。

## 页脚

还不确定这个，200x30 似乎效果很好。

* * *

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T09:26:58.127

图像尺寸在[存折编程指南中指定：](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/Creating.html#//apple_ref/doc/uid/TP40012195-CH4-SW1)*图像填充其分配空间*部分下的 Pass Design and Creation

 *编辑：存折已更名为钱包。因此，所有的编程指南也有！[钱包开发者指南：通证设计与创作](https://developer.apple.com/library/prerelease/watchos/documentation/UserExperience/Conceptual/PassKit_PG/Creating.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-03T02:19:45.797

根据 Apple 的[Pass Design and Creation](https://developer.apple.com/library/prerelease/watchos/documentation/UserExperience/Conceptual/PassKit_PG/Creating.html) 2015 年最新规格：

**标志.png**

*   160×50

**图标.png**

请参阅[图标和图像大小](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/IconMatrix.html)中的“小图标” ，尽管该文档没有专门为“小图标”提供一行。我猜“设置图标”适合。

**条带.png**

在 iPhone 6 和 6 Plus 上：

*   375 x 98 的活动门票
*   375 x 144 用于礼品卡和优惠券
*   在所有其他情况下为 375 x 123

在以前的硬件上：

*   活动门票 320 x 84
*   320 x 110 用于其他通行证样式，在 3.5 英寸屏幕的设备上带有方形条码
*   在所有其他情况下为 320 x 123

**背景.png**

*   180 x 220

**缩略图.png**

*   90×90

**页脚.png**

*   286 x 15

版本的所有尺寸加倍`@2x`，分别。三倍的`@3x`版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T08:16:59.437

这取决于您创建的通行证类型和您选择的条形码类型。 [PassKit wiki](http://code.google.com/p/passkit/wiki/PassImages)提供了所有不同组合的所有维度。*

# asp.net - ASP.NET 创建动态表包含 rowspan 属性

> ID：12687480
> 
> 赞同：0
> 
> 时间：2012-10-02T09:10:53.987
> 
> 标签：asp.net

> 我想创建一个动态表。下面你可以看到starsign之间必须是动态的。工厂名称（动态）=DAP1，TUP1，GEP3，PSP2
> 配置名称（动态）= KSROC，100ROC 关键数字名称（动态）= 最大容量，可用容量，加载级别，当然我希望它具有下面代码中提到的行跨度. 感谢您的帮助，我只是卡住了

```
<table class="table1">
         <thead>
             <tr>
                     <th>Config</th>
                     <th>Key Figure</th>
                     <th>*DAP1*</th>
                     <th>*TUP1*</th>
                     <th>*GEP3*</th>
                     <th>*PSP2*</th>
             </tr>
         </thead>        
             <tr>                     
                     <th rowspan="4">*KSROC*</th>                    
                     <tr>
                        <th>*Max Capacity*</th>
                        <td>*will be populated according to DAP1*</td>
                        <td>*will be populated according to TUP1*</td>
                        <td>*will be populated according to GEP3*</td>
                        <td>*will be populated according to PSP2*</td>                   
                     </tr>
                     <tr>
                        <th>*Free Capacity*</th>
                        <td>*will be populated according to DAP1*</td>
                        <td>*will be populated according to TUP1*</td>
                        <td>*will be populated according to GEP3*</td>
                        <td>*will be populated according to PSP2*</td>  
                     </tr>
                     <tr>
                        <th>*Loading Level*</th>
                        <td>*will be populated according to DAP1*</td>
                        <td>*will be populated according to TUP1*</td>
                        <td>*will be populated according to GEP3*</td>
                        <td>*will be populated according to PSP2*</td>  
                     </tr>
             </tr>             

                     <th rowspan="4" >*100ROC*</th>
                     <tr>
                        <th>*Max Capacity*</th>
                        <td>*will be populated according to DAP1*</td>
                        <td>*will be populated according to TUP1*</td>
                        <td>*will be populated according to GEP3*</td>
                        <td>*will be populated according to PSP2*</td>                   
                     </tr>
                     <tr>
                        <th>*Free Capacity*</th>
                        <td>*will be populated according to DAP1*</td>
                        <td>*will be populated according to TUP1*</td>
                        <td>*will be populated according to GEP3*</td>
                        <td>*will be populated according to PSP2*</td>  
                     </tr>
                     <tr>
                        <th>*Loading Level*</th>
                        <td>*will be populated according to DAP1*</td>
                        <td>*will be populated according to TUP1*</td>
                        <td>*will be populated according to GEP3*</td>
                        <td>*will be populated according to PSP2*</td>  
                     </tr>
             </tr>

     </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:42:38.460

您可以使用 asp.net `Repeater`，在本[教程](http://www.netrostar.com/Tutorials-91-ASP.NET%20Tutorial.%20How%20to%20use%20Repeater)中有一个如何使用它的示例。

# .net - 运行应用程序通过 Windows 来宾用户帐户连接到 SQL Server

> ID：12687481
> 
> 赞同：0
> 
> 时间：2012-10-02T09:10:55.007
> 
> 标签：.net, windows, sql-server-2008, clickonce

我有一个连接到 SQL Server 2008 数据库的 .NET Windows 应用程序，我正在通过网络使用单击一次技术将该应用程序部署在客户端机器上。

现在我在不同的用户权限下测试应用程序。

当我在管理员用户和标准用户（Windows XP 中的受限用户）上测试应用程序时。并且应用程序成功运行

当我在 Guest 用户帐户上测试应用程序时，我得到了以下 .NET SQL 异常：

```
The type initializer for 'System.Data.SqlClient.SqlConnection' threw an exception.
 9/26/2012 11:25:33 AM: Stack:    at System.Data.SqlClient.SqlConnection..ctor()
 at    
  System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Initialize
 (IData 
 Services dataServices, Object connection)
 at System.Data.Linq.DataContext.Init(Object connection, MappingSource mapping)
 at System.Data.Linq.DataContext..ctor(String fileOrServerOrConnection, MappingSource 
 mapping) 
```

这是内部异常：

System.TypeInitializationException：“System.Data.SqlClient.SqlConnectionFactory”的类型初始化程序引发了异常。---> System.TypeInitializationException：“System.Data.SqlClient.SqlPerformanceCounters”的类型初始化程序引发了异常。---> System.UnauthorizedAccessException：对路径“Global.net data provider for sqlserver”的访问被拒绝。在 System.IO._ *Error.WinIOError(Int32 errorCode, String maybeFullPath) 在 System.Threading.Mutex.<>c*_DisplayClass3.<.ctor>b__0(Object userData) at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData) at System.Threading.Mutex..ctor(Boolean initialOwned, String name, Boolean& createdNew, MutexSecurity mutexSecurity) 在 System.Diagnostics.SharedUtils.EnterMutexWithoutGlobal(String mutexName, Mutex& mutex) 在 System.Diagnostics.SharedPerformanceCounter.Verify(CategoryEntry* currentCategoryPointer) 在 System.Diagnostics.SharedPerformanceCounter.FindCategory(CategoryEntry** returnCategoryPointerReference) 在 System.Diagnostics。 SharedPerformanceCounter.GetCounter(String counterName, String instanceName, Boolean enableReuse, PerformanceCounterInstanceLifetime life) at System.Diagnostics.SharedPerformanceCounter..System.Diagnostics.PerformanceCounter.Initialize() 的 ctor(String catName, String counterName, String instanceName, PerformanceCounterInstanceLifetime 生命周期) System.Diagnostics.PerformanceCounter.set_RawValue(Int64 value) 在 System.Data.ProviderBase.DbConnectionPoolCounters.Counter..ctor( System.Data.ProviderBase.DbConnectionPoolCounters..ctor(String categoryName, String categoryHelp) 处 System.Data.SqlClient.SqlPerformanceCounters..ctor() 处的 String categoryName、String instanceName、String counterName、PerformanceCounterType counterType)。 SqlPerformanceCounters..cctor() --- 内部异常堆栈跟踪结束 --- 在 System.Data.SqlClient.SqlConnectionFactory..ctor() 在 System.Data.SqlClient.SqlConnectionFactory..cctor() --- 内部结束异常堆栈跟踪 --- 在 System.Data.SqlClient。SqlConnection..cctor()

谁能告诉我如何解决这个问题？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:41:54.557

通过 SSMS 添加来宾（安全登录），然后将该帐户添加到特定数据库中的 Sercurity Accounts。

# android - Android：LibGDX 2D游戏内存消耗

> ID：12687486
> 
> 赞同：8
> 
> 时间：2012-10-02T09:11:26.653
> 
> 标签：android, memory, opengl-es, libgdx

在使用 libGDX 开发 2D 游戏时，我遇到了一些内存消耗问题。

这是一款具有丰富图形内容的 2D 游戏 - 有许多纹理、动画、字体等。由于某些原因，所有图形内容都在游戏开始时加载 - 这是内存问题。我已经在不同的设备上测试了内存分配（本机和堆）并得到了不同的结果：（我已经将所有设备按纹理大小划分为组）

**第 1 组**（~840*480 屏幕采用的纹理）

**HTC Desire (Froyo):** 178Mb(native) - 12Mb(heap) -**应用程序加载成功**

**HTC One V (ICS):** 30Mb(native) - 12Mb(heap) -**应用程序加载成功**

**HTC Desire S (Jelly Bean):** 30Mb(native) - 12Mb(heap) -**应用程序加载成功**

**第 2 组**（~1366*768 屏幕采用的纹理）

**Samsung(Google) Galaxy Nexus** 329Mb(native) - 18Mb(heap) -**完美运行**

**Galaxy TAB (Honeycomb)** 164Mb(native) - 10Mb(heap) -**应用程序崩溃**(Surface.OutOfResouresException)。

我认为所有 android 版本可能存在一些显着的内存管理差异，这给我带来了这些麻烦。

谁能解释在 android 3.x 上加载纹理时到底发生了什么？或者可能发布一些链接以了解解决此问题需要做些什么。

**一些更新**

今天我在 3.x 模拟器上做了一些额外的测试（我知道这不是最好的方法，但是之前在 emu 和 Galaxy Tab 上的日志是相似的）

1.  我运行的游戏采用 1024*600 的纹理 - 应用程序在 80% 的加载资源（158 个本机内存分配）上崩溃
2.  使用 800*480 的纹理 - 应用程序在 100% 加载时崩溃（145Mb 本机内存分配）

最后，我在新的 Google Nexus 平板电脑（Jelly Bean）上运行了应用程序，它使用与 3.x 平板电脑（1280*800px）相同的纹理 - ~30Mb 本机内存和 ~12Mb 虚拟机堆。

现在我完全不理解发生了什么——纹理 800*480 和 1280*800 的内存分配相同......

**最后**

我一直在使用带有一些进度条的按需加载资源来解决这种情况。经过所有尝试，我没有找到另一种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:36:47.493

如果您想知道为什么 Android 3 崩溃超过 2.X，那是因为 ByteBuffer 错误。ByteBuffer 使用 4 倍的内存。所以你必须为 Android 3 使用较低分辨率的图像。这在 Android 4 中得到了解决。

[http://code.google.com/p/android/issues/detail?id=16941](http://code.google.com/p/android/issues/detail?id=16941)

幸运的是 Android 3+ 你有大堆选项（提供大约 128+ 兆），这是我必须为我们的应用程序打开的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:21:22.387

我相信如果位图的格式与显示的格式不匹配，位图的运行时内存使用量可能会膨胀（系统最终将创建一个具有正确格式的副本以进行 blit）。我认为这在较旧的 Android 系统上更多是一个问题，可能不是您在 3.0 上看到的，但可能值得研究。[（请参阅Romain 帖子](http://www.curious-creature.org/2010/12/08/bitmap-quality-banding-and-dithering/)末尾的性能位）

在 3.0 (Honeycomb) 中，位图底层字节数组的内存占位图发生了变化，内存从本机端移动到 Java 堆。但是，这只是转移了内存，并且不应该影响实际限制（本机内存仍然计入相同的限制，它只是对某些工具不可见）。

不同设备上的堆限制也不同。（请参阅[不同手机/设备和操作系统版本上的 Android 堆大小](https://stackoverflow.com/questions/5350465/android-heap-size-on-different-phones-and-os-versions)）

这个 Google I/O 演讲涵盖了一系列可能有用的关于 3.0 中内存管理更改的问题：http: [//dubroy.com/blog/google-io-memory-management-for-android-apps/](http://dubroy.com/blog/google-io-memory-management-for-android-apps/)

您可以在内存较低的设备上[加载位图的缩小版本](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html#load-bitmap)。它可能也值得阅读[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)的其余部分。

您的应用程序有多少磁盘图像数据？您正在加载的其他非图像数据（字体、动画等）有多大？

# css - ASP.NET 中的 CSS 字体

> ID：12687489
> 
> 赞同：0
> 
> 时间：2012-10-02T09:11:33.093
> 
> 标签：css, asp.net-mvc

我在我的 ASP.NET MVC4 应用程序 CSS 中遇到了一个大问题为了加载新字体，我正在使用 @charset "utf-8"; /* CSS 文档 */

```
 @font-face {
  font-family: 'RobotoBoldItalic';
  src: url("../../../Content/KarmaLoopMobileContent/font/Roboto-BoldItalic-webfont.eot");
  src: url("../../../Content/KarmaLoopMobileContent/font/Roboto-BoldItalic-webfont.eot?#iefix") format("embedded-opentype"), url("../../../Content/KarmaLoopMobileContent/font/Roboto-BoldItalic-webfont.woff") format("woff"), url("../../../Content/KarmaLoopMobileContent/font/Roboto-BoldItalic-webfont.ttf") format("truetype"), url("../../../Content/KarmaLoopMobileContent/font/Roboto-BoldItalic-webfont.svg#RobotoBoldItalic") format("svg");
  font-weight: normal;
  font-style: normal;
} 
```

但是字体没有变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:49:09.317

查看 firebug/dev 工具，看看页面加载是否有任何错误。

# xhtml - JBoss 编辑 .WAR 内的文件

> ID：12687490
> 
> 赞同：3
> 
> 时间：2012-10-02T09:11:34.510
> 
> 标签：xhtml, jboss, edit

是否可以像在 Tomcat 中那样在 JBoss 下编辑`.xhtml`或文件 - 即时？ 无需重建 WAR 文件。`.css`

尝试提取文件夹，如下所述：[exploded folder](https://community.jboss.org/wiki/ExplodedDeployment)
没有帮助。

在 Eclipse 下尝试了用于 JBoss 集成的插件。
有`.sar`文件，但 JBoss 无法识别。

JBoss 版本是`7.1.1`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:42:21.180

您必须配置 Web 子系统以启用开发，以便 JBoss 可以查找修改。您需要设置的配置是

```
<subsystem xmlns="urn:jboss:domain:web:1.0" default-virtual-server="default-host">
...
    <configuration>
        <jsp-configuration development="true"/>
    </configuration>
</subsystem> 
```

请参阅[此处](https://community.jboss.org/thread/170748?tstart=0)和[此处](http://docs.jboss.org/jbossweb/7.0.x/config/jsp.html)了解更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T22:42:17.270

我找到了如何编辑资源的方法。
实际上，提取的文件夹位于此处：

```
$your_jboss_project_folder$\standalone\tmp\vfs 
```

这个文件夹可以保存名称，例如，`tempbecfe4f41f983f15`
在那里你可以找到提取`WAR`的文件夹和jar，如果你将它添加到`\deployments`文件夹中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:20:52.537

执行此操作的正确方法是使用展开的文件夹。请提出另一个标题为“Exploded folder doesn't work in JBoss”的问题。

您对“没有帮助”的评价。有点短，可以让我们解决您的问题。

*   您是否使用`myFolder.war`了文件夹名称？
*   是否`myFolder.war`包含目录`WEB-INF`，带有`web.xml`?
*   JBoss server.log 中是否有任何错误？
*   也许您禁用了 JBoss 部署扫描程序？

# extjs - 设置 UUID 策略给我一个错误

> ID：12687494
> 
> 赞同：2
> 
> 时间：2012-10-02T09:11:56.797
> 
> 标签：extjs, sencha-touch, sencha-touch-2, uuid

经过大量的谷歌搜索和调试后，我无法弄清楚为什么在我的模型实例中使用 UUID 策略时会出错。

我正在使用 localStorage 在用户设备上存储远程数据，ST2 建议（他们说“你需要”）在我的模型实例中使用 UUID 标识符来生成唯一 ID。

如果我不这样做，我会得到：

```
[WARN][Anonymous] Your identifier generation strategy for the model does not ensure unique id's. Please use the UUID strategy, or implement your own identifier strategy with the flag isUnique. 
```

如果我这样做，我会得到

```
Uncaught TypeError: Cannot call method 'substring' of undefined 
```

这是我的模型：

```
Ext.define("MyApp.model.News", {
    extend: 'Ext.data.Model',

    config : {
        idProperty: "localId",
        identifier: {
            type: 'uuid'
        },
        fields : [ {
            name: "localId",
            type: "auto"
        },{
            name : "id",
            type : "integer"
        }, {
            name : "title",
            type : "string"
        }[...]],
        proxy: {
            type: 'localstorage',
            id  : 'proxyNews'
        }

    }
}); 
```

和 localStorage 商店：

```
Ext.define('MyApp.store.NewsLocalStorage', {
    extend: "Ext.data.Store",
    config: {
        storeId: 'newsLocalStorage',
        model: "Lmde.model.News",
        autoLoad: true
    }
}); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T11:40:14.280

嗯，我只是将模型添加到应用程序中，它可以工作。（我猜 Lmde = MyApp）

我添加到启动：

```
MyApp.News = Ext.create('MyApp.model.News'); 
```

这里又是模型

```
Ext.define("MyApp.model.News", {
    extend: 'Ext.data.Model',

    config: {
        idProperty: "localId",
        identifier: { type: 'uuid' },
        fields: [
            { name: "localId", type: "auto" },
            { name: "id", type: "integer" },
            { name: "title", type: "string" }
        ],
        proxy: { type: 'localstorage', id: 'myapp.news' }
    }
}); 
```

# iphone - 如何更改 iphone 的 UISearchBar 中的光标颜色？

> ID：12687497
> 
> 赞同：3
> 
> 时间：2012-10-02T09:11:58.377
> 
> 标签：iphone, objective-c, uisearchbar

是否可以更改光标的颜色`UISearchBar`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-18T13:46:06.723

你实际上可以做的是：

```
[[UITextField appearanceWhenContainedIn: [UISearchBar class], nil] setTintColor:YOUR_COLOR_HERE]; 
```

如果您想要搜索栏本身的不同色调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-26T01:24:24.830

我创建了自己的`SearchController`扩展`UISearchController`并使用以下代码为光标和取消按钮使用不同的颜色

```
self.searchBar.barTintColor = UIColor.greyColor()
self.searchBar.tintColor = UIColor.greyColor()
UIBarButtonItem.appearance().tintColor = UIColor.whiteColor() 
```

对于 SWIFT 5

```
self.searchBar.barTintColor = UIColor.gray
self.searchBar.tintColor = UIColor.gray
UIBarButtonItem.appearance().tintColor = UIColor.white 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-13T04:15:22.573

## 斯威夫特 4 示例

```
UITextField.appearance(whenContainedInInstancesOf: [UISearchBar.self]).tintColor = .lightGray 
```

这会将光标调整为`UIColor.lightGray`不更改取消按钮颜色。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T14:31:23.363

不幸的是没有。我还想在 UISearchBar 中使用自定义字体，但这也不可能。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-02T14:58:37.687

尽管有可能以某种方式覆盖整个 UISearchBar 类，但 Apple 不会接受任何更改其类的应用程序。如果确实有必要，那么您可以创建自己的搜索栏。不过，光标颜色似乎需要做很多工作。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-03-19T14:39:16.010

这在 iOS 7 中是可能的。只需设置 UISearchBar 的色调颜色。因此，例如，在您的应用程序委托中：

```
[[UISearchBar appearance] setTintColor:[UIColor redColor]]; 
```

据我所知，这只影响光标颜色。

# javascript - 3 具有可变屏幕宽度的行 ul

> ID：12687500
> 
> 赞同：0
> 
> 时间：2012-10-02T09:12:06.340
> 
> 标签：javascript, html, css, html-lists

从我无权访问的 PHP 文件中，我收到一堆`<li>`带有“liElHtml”类的元素。其中包含的是图像，所以基本上我是通过 AJAX 收到的：

```
<li class="liElHtml"><img src="some_img.png" /></li> 
```

有没有办法将这些整齐/均匀地堆叠成 3 行而没有静态宽度？我知道如何通过将 3 的组合宽度设置`<li>`为`<ul>`. 我用谷歌搜索了一下，似乎静态宽度是我看到的唯一方式。

不幸的是，这必须是 100% 宽度的 3 行才能填满屏幕，因为它是用于手机的。现在只是为了让它工作，我设置了一个静态宽度，所以我有 html：

```
<ul id="mainScreenUL">
</ul> 
```

CSS：

```
#mainScreenUL{
    list-style:none;
    width:150px;
}

#liElHtml{
   display:inline-block;
   width:50px;
   height:50px;
} 
```

和 jQuery/javascript

```
$('#mainScreenUL').html(pic_data[1]); 
```

这`pic_data[1]`只是一长串`<li class="liElHtml"><img src="some_img.png" /></li>`

这给了我一些想要的效果，无论如何我可以将宽度设置为`width:100%`on`#mainScreenUL`并让`<li>`'s 整齐地堆叠成 3 行吗？感谢您花时间阅读本文，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:14:12.090

如果都`li`具有相同的高度，您可以轻松地将它们浮动并以这种方式分配 33.33% 的宽度

```
li {
   float: left;
   width: 33.33%;
} 
```

然后只记得对`ul`元素应用浮动清除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:16:23.827

```
li {
   float: left;
   width: 33.33%;
} 
```

如果您想要 100% 并且可以编辑 HTML，则将第一个和最后一个列表项设置`33%`为`34%`.

```
li {
    float: left;
}

.first, ,last {
    width: 33%;
}

.middle {
    width: 34%;
} 
```

`33.33%`如果您想要边框/边距等，这会发生变化，但会消除使用叶子的微小间隙。

如果您无法触摸 HTML，那么您始终可以使用`:first-child`和`:last-child`选择器，但您可能会遇到一些浏览器对它们的支持。

# iphone - UICollectionView：如何在页脚和页眉之间添加空间？

> ID：12687501
> 
> 赞同：9
> 
> 时间：2012-10-02T09:12:07.280
> 
> 标签：iphone, ios, ios6, uicollectionview

我有一个使用标准 FlowLayout 类的 CollectionView，每个部分都有水平滚动和页眉和页脚。

现在页脚和页眉视图之间（即部分之间）的像素为零。我想在它们之间添加一点间距，但不要在第一部分上方或在最后一部分之后。所以我不能只在页眉和页脚视图本身中添加该空间。

我本来期望像“interSectionSpacing”这样的东西，但显然没有这样的设置。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T16:02:52.980

所以事实证明没有设置。这就是我最终的结果：

我将标题视图的内容设置为与标题视图本身的底部对齐，因此它似乎具有相同的可见高度，即使我使标题视图高于其内容（自动布局使这非常容易）。

然后我根据 UICollectionViewFlowLayout 的这个委托方法中的节索引设置标题的高度：

```
 #define kHeaderHeight 42
#define kInterSectionMargin 8

- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForHeaderInSection:(NSInteger)section
{
    if (section == 0) {
        return CGSizeMake(0, kHeaderHeight);
    }
    return CGSizeMake(0, kHeaderHeight + kInterSectionMargin);
} 
```

现在各部分之间有一点空间，但在第一部分之前没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-18T23:06:35.417

你是对的，没有“interSectionSpacing”这样的东西，但有一些接近的东西。

试试`sectionInset`你的`UICollectionViewFlowLayout`.

```
UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];
[flowLayout setSectionInset:UIEdgeInsetsMake(top, left, bottom, right)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:46:44.303

您可以在 Nib 文件中设置页眉和页脚之间的间距。转到“集合视图”的“大小检查器”并将标题大小高度设置为所需值。

# c++ - 如何使用 WRL 返回内置的 winrt 组件？

> ID：12687502
> 
> 赞同：2
> 
> 时间：2012-10-02T09:12:07.140
> 
> 标签：c++, windows-runtime, wrl

当我使用 WRL 创建 winrt 组件时，问题是我只能使用`ABI::Windows::xxx`命名空间，而不能`Windows::UI::Xaml::Media::Imaging`在 WRL 中使用命名空间。

那么，如何创建一个内置的winrt组件作为返回值呢？

```
// idl
import "inspectable.idl";
import "Windows.Foundation.idl";
import "Windows.UI.Xaml.Media.Imaging.idl";

namespace Decoder
{
    interface IPhotoDecoder;
    runtimeclass PhotoDecoder;

    interface IPhotoDecoder : IInspectable
    {
        HRESULT Decode([in] int width, [in] int height, [out, retval] Windows.UI.Xaml.Media.Imaging.BitmapImage **ppBitmapImage);
    }

    [version(COMPONENT_VERSION), activatable(COMPONENT_VERSION)]
    runtimeclass PhotoDecoder
    {
         [default] interface IPhotoDecoder;
    }
}

// cpp
using namespace Microsoft::WRL;
using namespace Windows::Foundation;
using namespace ABI::Windows::UI::Xaml::Media::Imaging;
namespace ABI
{
    namespace Decoder
    {
        class PhotoDecoder: public RuntimeClass<IPhotoDecoder>
        {
            InspectableClass(L"Decoder.PhotoDecoder", BaseTrust)

            public:
            PhotoDecoder()
            {
            }

            HRESULT __stdcall Decode(_In_ int width, _In_ int height, _Out_ IBitmapImage **ppBitmapImage)
            {
                // How to create Windows.UI.Xaml.Media.Imaging.BitmapImage without using Windows::UI::Xaml::Media::Imaging
            }

        };

        ActivatableClass(PhotoDecoder);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T17:16:16.163

有两组命名空间：

*   那些根植于全局命名空间的（例如`Windows::Foundation`）
*   那些根植于`ABI`命名空间的（例如`ABI::Windows::Foundation`）

每个的内容都是“相同的”。例如，`Windows::Foundation::IUriRuntimeClass`将相同的接口命名为`ABI::Windows::Foundation::IUriRuntimeClass`.

那么，为什么会有两组命名空间呢？以全局命名空间为根的命名空间保留给 C++/CX 使用：它在这些命名空间中生成运行时类的投影。当您使用 WRL 时，您将始终使用以命名空间为根的`ABI`命名空间（它们是“未投影”的名称，也就是说，它们正是存在于 ABI 层的名称）。

运行时类以两种方式之一实例化（“激活”）。如果类型是默认可构造的，则可以通过调用来默认构造[`RoActivateInstance`](http://msdn.microsoft.com/en-us/library/br224646.aspx)。如果一个类型声明了其他构造函数，那么这些构造函数可以通过调用来获取运行时类型的激活工厂来调用[`RoGetActivationFactory`](http://msdn.microsoft.com/en-us/library/br224648.aspx)。例如，您可以`BitmapImage`像这样默认构造：

```
using namespace Microsoft::WRL;
using namespace Microsoft::WRL::Wrappers;

using namespace ABI::Windows::UI::Xaml::Media::Imaging;

HStringReference classId(RuntimeClass_Windows_UI_Xaml_Media_Imaging_BitmapImage);

ComPtr<IInspectable> inspectable;
if (FAILED(RoActivateInstance(classId.Get(), inspectable.GetAddressOf())))
{
    // Handle failure
}

ComPtr<IBitmapImage> bitmapImage;
if (FAILED(inspectable.As(&bitmapImage)))
{
    // Handle failure
} 
```

WRL 也有一个有用的函数模板，[`Windows::Foundation::ActivateInstance`](http://msdn.microsoft.com/en-us/library/br244937.aspx)它调用`RoActivateInstance`和执行`QueryInterface`所需的目标接口：

```
using namespace Windows::Foundation;

ComPtr<IBitmapImage> bitmapImage;
if (FAILED(ActivateInstance(classId.Get(), bitmapImage.GetAddressOf())))
{
    // Handle failure
} 
```

# android - 在 Android 应用中保存大数据的最佳方式

> ID：12687507
> 
> 赞同：0
> 
> 时间：2012-10-02T09:12:22.520
> 
> 标签：android, sqlite

我需要创建一个 Android 应用程序，其中包含一本带有章节和导航的书。

保存所有`SQLite`包含，例如，`id`等的书籍数据的最佳方法是`chapters`什么？

这本书大约有500页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:22:35.410

就像 hardik joshi 所说，数据库的限制在于设备中的空间量，这就是限制。显然您无法访问它，但是您的数据库可以根据需要变大。

如果您必须存储大量数据，您可以将其存储在服务器上的数据库中，然后从您的设备连接到该服务器并按需将内容保存在您的设备数据库中。

您也可以使用文件来存储数据，但我认为这是一种旧方法，比其他方法更复杂。

其他选项是名为 Preferences 的 Android 元素，但这是用于原始数据的键/值对，我不知道这个元素可以帮助你。

这个主题的一个很好的参考：

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:24:54.083

通常，Android 提供了许多选项来保存应用程序数据，但您选择的选项取决于您的确切需求以及您的数据需要多少空间。如果您想将结构化数据存储在私有数据库中，那么 SQLite 是一个很好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:17:10.873

我认为这是一个很好的解决方案。但是你需要告诉更多的细节。数据的格式是什么？只是纯文字？或者每一页都是一个与章节相关的数据库条目行？

# java - Java - 使用 Mac 和 Windows x86 & x64 拍摄的网络摄像头/视频

> ID：12687511
> 
> 赞同：0
> 
> 时间：2012-10-02T09:12:51.640
> 
> 标签：java, video, stream, webcam, capture

我想用 java 访问 Mac 和 Windows（32 位和 64 位）上的内置或 USB 网络摄像头。我如何做到这一点？任何有用的 API 或其他类似的东西？我不想安装东西。它应该在 API 和一些 .dll 中，例如 - 这样我的可运行 .jar 文件是可移植的。

我用谷歌搜索了一切。我尝试了 JavaCV、JMF、JMyron，但对我没有任何帮助 - 太糟糕了 -.-”

我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:21:14.040

您可以使用 JNI 调用并与供应商提供的网络摄像头驱动程序/API 对话。

或者

如果您有幸拥有兼容 TWAIN 的网络摄像头，您可以使用 JTwain API

链接： [`http://www.twainforum.org/`](http://www.twainforum.org/) [`http://www.programmersheaven.com/2/Java-Twain-image-acquisition`](http://www.programmersheaven.com/2/Java-Twain-image-acquisition)

# jquery - 使用 jQuery 选择嵌入的 mp3 文件

> ID：12687512
> 
> 赞同：1
> 
> 时间：2012-10-02T09:12:57.863
> 
> 标签：jquery, audio

我有一个触发声音文件的播放和停止按钮。它适用于 IE 8 及更早版本。我认为 IE 使用 embed 选项。我不知道如何使用 jQuery 与该选项“交谈”。

所以我的问题是如何播放和停止嵌入的声音文件？

（我尝试了类似 $("#embed").trigger('play'); 但它不起作用）

这是现场示例：http: [//jsfiddle.net/64ePq/1/](http://jsfiddle.net/64ePq/1/)

的HTML：

```
<audio id="audio" controls="controls" height="100" width="100">  
  <source src="http://www.w3schools.com/html/horse.mp3" type="audio/mpeg">
  <source src="http://www.w3schools.com/html/horse.ogg" type="audio/ogg">
  <embed height="50" width="100"  src="http://www.w3schools.com/html/horse.mp3">
</audio> 
```

查询：

```
$(function(){

  $("#playBT").click(function() {
    $("#audio").trigger('play');
    });

  $("#pauseBT").click(function() {
    $("#audio").trigger('pause');
  });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:20:04.853

通常`<embed>`标签与`<object>`包含对可以播放 mp3\video 等的 flash 文件 (swf) 的引用的标签一起使用。尝试找到这样的 flash 组件嵌入到您的页面中并在这种情况下隐藏您自己的按钮。您可以尝试`audio`使用 javascript 创建标签以检查浏览器是否支持它。尝试访问，即[video.js](http://videojs.com/) - 他们使用这样的后备机制。

编辑：当 html 是

```
<embed id="tst" height="50" width="100" src="http://www.w3schools.com/html/horse.mp3"> 
```

以下 js 在 IE 9 中运行良好。

```
document.getElementById('tst').play() 
```

# android - 图像上的 Android onTouch 方法

> ID：12687515
> 
> 赞同：0
> 
> 时间：2012-10-02T09:13:07.403
> 
> 标签：android

我是Android新手，所以如果之前有人问过，请原谅。我有一个应用程序，其中有一个图像。我想做的是，当我将手指放在图像的某个部分时，该部分将突出显示，但这对我来说只是可选的，当我触摸该部分时，我将被导航到另一个活动。关于如何做到这一点的任何想法？如果你知道一些教程，请给我链接。谢谢。当您给我一些想法时，请欣赏它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T09:21:59.463

```
YOUR_IMAGE_VIEW.setOnTouchListener(new OnTouchListener()
            {
                @Override
                public boolean onTouch(View v, MotionEvent event)
                {
                    float xCo = event.getX();
                    float yCo = event.getY();
                    if (xCo < 100F && yCo < 100F)
                    {
                        Intent intent = new Intent(YOUR_ACTIVITY.this, NEXT_ACTIVITY.class);
                        startActivity(intent);
                    }

                    return false;
                }
            }); 
```

当然，你需要`if`用你的真实数字来改变我的陈述。

# javascript - 从顶部滑动面板

> ID：12687522
> 
> 赞同：-1
> 
> 时间：2012-10-02T09:13:26.813
> 
> 标签：javascript, jquery, css

我正在尝试创建一个滑动面板，有人给了我这个代码[http://jsfiddle.net/czBJU/3/](http://jsfiddle.net/czBJU/3/) 和这个 [http://jsfiddle.net/Lstmn/1/](http://jsfiddle.net/Lstmn/1/) 但它们都不起作用。

谁能告诉我怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:18:02.237

`$(window).load()`接受一个函数，而不是一个对象：

```
$(window).load(function() {
  // ...
}); 
```

除非您在绑定事件处理程序之前明确等待*所有*资源加载，否则我建议您坚持使用`$(document).ready()`而不是`$(window).load()`.

您还拼错了`id`HTML 元素的属性：

```
<a id="porfolio_button">Slide Open Portfolio</a>
         ^^ 
```

这是您演示的固定版本：http: [//jsfiddle.net/czBJU/7/](http://jsfiddle.net/czBJU/7/)

# api - WorldPay“捕获”的实时 API

> ID：12687524
> 
> 赞同：1
> 
> 时间：2012-10-02T09:13:42.850
> 
> 标签：api, shopify, worldpay

我被引导相信 Shopify 使用“实时”API 从 WorldPay 捕获付款（使用 WorldPays API，这似乎在延迟的基础上工作）。查看[Shopify API 文档](http://api.shopify.com/transactions.html)，这给了我一些图片，但不是全部。

1.  我可以看到我必须调用“创建新事务”（`POST /admin/orders/#{id}/transactions.xml`）。我`#{id}`认为是授权ID。我需要`#`和或`{}`括号吗？

2.  URL 是纯粹`http://lumie.myshopify.com/admin/orders/#{id}/transactions.xml`的还是`/`必须传递的商店 guid 代码？

3.  我可以看到成功的响应消息，但是诸如过期授权码之类的失败呢？你有这些例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:31:36.023

您不需要id 中的`#`or符号，只需要数字。`{}`

URL 中的 ID 是 Shopify 中您尝试为其获取付款的订单的 ID。您可以从[Orders API](http://api.shopify.com/order.html)中检索它。

要调用任何 API 端点，您需要进行身份验证。我们使用 OAuth 2.0 作为我们的身份验证机制，该过程在我们的[Authentication Docs](http://api.shopify.com/authentication.html)中进行了描述。最终，您将获得一个 OAuth 令牌，将其放入`X-Shopify-Access-Token`每个 API 请求的标头中。

交易状态的有效值为`success`和`pending`。其他任何事情都是错误。

# java - 在多个服务之间重用 CXF jaxb 上下文

> ID：12687528
> 
> 赞同：10
> 
> 时间：2012-10-02T09:14:06.530
> 
> 标签：java, web-services, jaxb, jax-ws, cxf

我有多种服务可以从数千个课程中返回结果。
由于每个 CXF 服务都包含一个几乎相同的私有 JAXB 上下文，因此会造成巨大的内存浪费。
有没有办法自己创建 JAXB 上下文并在服务之间共享它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T07:12:38.777

解决它的一种可能方法是将以下内容添加到弹簧配置中：

```
<bean class="org.apache.cxf.jaxb.JAXBDataBinding" >
    <constructor-arg index="0" value="#{GlobalContextBean.context}"/>
</bean> 
```

其中值只是对包含全局（单个）JAXBContext 并具有以下方法的 bean 的引用：

```
public javax.xml.bind.JAXBContext getContext() {...} 
```

您可以在以下线程中查看更多详细信息（包括 CXF 专家 Daniel Kulp 输入）：
[Reuse-JAXB-context-in-jaxws](http://cxf.547215.n5.nabble.com/Reuse-JAXB-context-in-jaxws-td5715356.html)

经过测试，我发现将当前的 JAXBDataBinding 设置为多个服务的全局实例将不起作用，因为它的初始化方法中有一个“if”语句，一旦第一个服务设置了上下文，该语句就会返回。
这就是为什么我最终扩展了该类并收集了所有必需的服务类和模型类。在所有服务初始化结束后，我创建一个包含所有必需类的全局上下文并将其返回给所有服务。
您可以使用以下类。
初始化所有 Web 服务后，调用 compileGlobalJAXBContext 方法来创建全局上下文。您可以在其中添加应用程序需要的其他类并且 init 错过了。
不要忘记配置服务以使用此 bean。

```
public class GlobalJAXBDataBinding extends JAXBDataBinding
{
private Set<Class<?>> globalContextClasses;
private boolean contextBuilt = false;

public GlobalJAXBDataBinding(Set<Class<?>> classes) {
    globalContextClasses = new HashSet<>(classes);
    globalContextClasses.add(CPUUID.class);
}

public GlobalJAXBDataBinding() {
}

}

public synchronized void initialize(Service service) {
    if (contextBuilt)
        return;
    super.initialize(service);
    globalContextClasses.addAll(getContextClasses());
    super.setContext(null);
}

public void compileGlobalJAXBContext() {
    if (contextBuilt) return;
    setContext(JAXBContext.newInstance(globalContextClasses));
    contextBuilt *equals* true; 
} 
```

出于某种奇怪的原因，编辑器不允许我在 compileGlobalJAXBContext 的最后一行添加等号，所以只需将等号替换为相关符号即可。

# excel - 如何获取使用文件对话框打开的文件的选定路径和名称？

> ID：12687536
> 
> 赞同：11
> 
> 时间：2012-10-02T09:14:24.137
> 
> 标签：excel, vba

我需要使用文件对话框打开的文件的路径名和文件名。我想在我的工作表中通过超链接显示此信息。

使用此代码，我有文件路径：

```
Sub GetFilePath()

Set myFile = Application.FileDialog(msoFileDialogOpen)
With myFile
    .Title = "Choose File"
    .AllowMultiSelect = False
    If .Show <> -1 Then
        Exit Sub
    End If
FileSelected = .SelectedItems(1)
End With

ActiveSheet.Range("A1") = FileSelected
End Sub 
```

我仍在寻找一种获取文件名的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-23T17:43:58.673

您可以使用 FileSystemObject 获取文件路径的任何部分。GetFileName(filepath) 给你你想要的。

修改后的代码如下：

```
Sub GetFilePath()
Dim objFSO as New FileSystemObject

Set myFile = Application.FileDialog(msoFileDialogOpen)
With myFile
.Title = "Choose File"
.AllowMultiSelect = False
If .Show <> -1 Then
Exit Sub
End If
FileSelected = .SelectedItems(1)
End With

ActiveSheet.Range("A1") = FileSelected 'The file path
ActiveSheet.Range("A2") = objFSO.GetFileName(FileSelected) 'The file name
End Sub 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-02T09:24:59.513

试试这个

```
Sub Demo()
    Dim lngCount As Long
    Dim cl As Range

    Set cl = ActiveCell
    ' Open the file dialog
    With Application.FileDialog(msoFileDialogOpen)
        .AllowMultiSelect = True
        .Show
        ' Display paths of each file selected
        For lngCount = 1 To .SelectedItems.Count
            ' Add Hyperlinks
            cl.Worksheet.Hyperlinks.Add _
                Anchor:=cl, Address:=.SelectedItems(lngCount), _
                TextToDisplay:=.SelectedItems(lngCount)
            ' Add file name
            'cl.Offset(0, 1) = _
            '    Mid(.SelectedItems(lngCount), InStrRev(.SelectedItems(lngCount), "\") + 1)
            ' Add file as formula
            cl.Offset(0, 1).FormulaR1C1 = _
                 "=TRIM(RIGHT(SUBSTITUTE(RC[-1],""\"",REPT("" "",99)),99))"

            Set cl = cl.Offset(1, 0)
        Next lngCount
    End With
End Sub 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-02T12:22:07.910

要仅从路径中提取文件名，您可以执行以下操作：

```
varFileName = Mid(fDialog.SelectedItems(1), InStrRev(fDialog.SelectedItems(1), "\") + 1, Len(fDialog.SelectedItems(1))) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-02T09:19:14.090

我想你想要这个：

```
Dim filename As String
filename = Application.GetOpenFilename

Dim cell As Range
cell = Application.Range("A1")
cell.Value = filename 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-04T06:16:58.353

我认为这是获得您想要的最简单的方法。

感谢 JMK 对第一部分的回答，超链接部分改编自[http://msdn.microsoft.com/en-us/library/office/ff822490(v=office.15).aspx](http://msdn.microsoft.com/en-us/library/office/ff822490(v=office.15).aspx)

```
'Gets the entire path to the file including the filename using the open file dialog
Dim filename As String
filename = Application.GetOpenFilename

'Adds a hyperlink to cell b5 in the currently active sheet
With ActiveSheet
 .Hyperlinks.Add Anchor:=.Range("b5"), _
 Address:=filename, _
 ScreenTip:="The screenTIP", _
 TextToDisplay:=filename
End With 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-21T08:20:16.977

下面的命令足以从对话框中获取文件的路径 -

```
my_FileName = Application.GetOpenFilename("Excel Files (*.tsv), *.txt") 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-16T14:41:51.987

FileNameOnly = Dir(.SelectedItems(1))

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-08T09:10:09.857

代码从根冒号开始文件搜索，如果我想从特定目录开始搜索，以避免每次都去那个目录，我应该放一个。我做到了

```
Sub GetFilePath()
FileSelected = "G:\Audits\A2010"
Set myFile = Application.FileDialog(msoFileDialogOpen)
With myFile
.Title = "Choose File"
.AllowMultiSelect = False
If .Show <> -1 Then
Exit Sub
End If
FileSelected = .SelectedItems(1)
End With

ActiveSheet.Range("C14") = FileSelected
End Sub 
```

但它无法从“G:\Audits\A2010”开始到达

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-02T08:34:55.710

我认为这会做到：

```
Dim filename As String
filename = Application.GetOpenFilename 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-04-30T07:16:03.837

从 Office 2010 开始，我们将无法使用通用对话框控件，因此最好使用 Application 对象来获得所需的结果。

这里我有一个文本框和命令按钮 - 在命令按钮单击事件下粘贴以下代码，这将打开文件对话框并将文件名添加到文本框中。

```
Dim sFileName  As String

sFileName = Application.GetOpenFilename("MS Excel (*.xlsx), *.xls")

TextBox1.Text = sFileName 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-03-08T04:23:44.880

在搜索了不同的网站以寻找解决方案后，一旦从“打开文件”对话框中获得完整的单件信息，如何将完整路径与文件名分开，并查看给出的解决方案对于 Excel 新手来说是多么“复杂”像我一样，我想知道是否有更简单的解决方案。所以我开始自己研究它，我想到了这种可能性。（我不知道以前是否有人有同样的想法。这么简单，如果有人有，我原谅自己。）

> ```
> Dim fPath As String
> Dim fName As String
> Dim fdString As String
> 
> fdString = (the OpenFileDialog.FileName)
> 
> 'Get just the path by finding the last "\" in the string from the end of it
>  fPath = Left(fdString, InStrRev(fdString, "\"))
> 
> 'Get just the file name by finding the last "\" in the string from the end of it
>  fName = Mid(fdString, InStrRev(fdString, "\") + 1)
> 
> 'Just to check the result
>  Msgbox "File path: " & vbLF & fPath & vbLF & vblF & "File name: " & vbLF & fName 
> ```

就是这样！试一试，告诉我进展如何...

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-12-18T08:33:18.580

```
Sub GetFilePath()

Set myFile = Application.FileDialog(msoFileDialogOpen)

With myFile

.Title = "Choose File"

.AllowMultiSelect = False

If .Show <> -1 Then

Exit Sub

End If

FileSelected = Replace(.SelectedItems(1), .InitialFileName, "")

End With

ActiveSheet.Range("A1") = FileSelected

End Sub 
```

# sql - 用另一个表中的值替换 id

> ID：12687537
> 
> 赞同：2
> 
> 时间：2012-10-02T09:14:25.680
> 
> 标签：sql, select

我有两张桌子：

```
Table Users

UserId     Name
1          John
2          Alice
3          Tom
4          Charles 
```

和

```
Table Clients

Id         Name1          Name2      Name3
1            1              3          4
2            2              1          3 
```

我想在哪里进行 SQL 查询

```
Clients.Id = 1 
```

结果如下：

```
 Id         Name1          Name2       Name3
1          John            Tom       Charles 
```

使用 INNER JOIN 我可以对来自客户的每一列执行此操作，但不能对整个记录（所有三列）执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T09:16:22.753

您需要在 table`users`上三次加入 table `client`。

```
SELECT  a.ID,
        b.name name1,
        c.name name2,
        d.name name3
FROM    clients a
        INNER JOIN users b
            ON a.name1 = b.userID
        INNER JOIN users c
            ON a.name2 = c.userID
        INNER JOIN users d
            ON a.name3 = d.userID
WHERE   a.ID = 1 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/f2f5b/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:08:10.670

还有一种不需要过多连接的选项

```
SELECT c.Id, MAX(CASE WHEN u.UserID = c.Name1 THEN u.Name END) AS Name1,
             MAX(CASE WHEN u.UserID = c.Name2 THEN u.Name END) AS Name2,
             MAX(CASE WHEN u.UserID = c.Name3 THEN u.Name END) AS Name3
FROM dbo.Users u JOIN dbo.Clients c ON u.UserId IN (c.Name1, c.Name2, c.Name3)
WHERE c.Id = 1
GROUP BY c.Id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:23:07.890

您需要为每个名称加入用户表一次。鉴于您有 3 列，很可能有一列或多列可以为空，因此您更可能需要 LEFT JOIN 而非 INNER JOIN。

```
 select c.id, u1.name name1, u2.name name2, u3.name name3
     from Clients c
left join Users u1 on u1.UserId = c.name1
left join Users u2 on u2.UserId = c.name2
left join Users u3 on u3.UserId = c.name3
    where c.Id = 1 
```

# loops - 如何使用 sed 使用循环块？

> ID：12687538
> 
> 赞同：3
> 
> 时间：2012-10-02T09:14:33.743
> 
> 标签：loops, sed, block

我有一些块的文件，如下所示：

```
<start> test var=3333
<g>test=000000000000 tst <s>
<end>
...
<start> var=564735628
<title>somethink<\title>
<end>
... 
```

而且我需要在循环中的和部分之间获得块。然后我需要在当前块中获取一些符号。我尝试这样做：

```
for block in $(cat $file | sed -n '/<start>/,/<end>/p;'); do
         echo $block 
done 
```

结果是：

```
<start> 
```

反而

```
<start> test 1
<g>test=000000000000 tst <s>
<end> 
```

如何获取整个块以进行进一步处理？

* * *

好的，我试着解释一下 Source 是

```
<start> test var=3333
<g>test=000000000000 tst <s>
<end> 
```

您的代码结果不是块。这只是一个刺痛。该字符串是`<end>t> test var=3333tst <s>` 如您所见，它是块的字符串彼此重叠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:12:00.317

一种建议，这里不要使用`sed`。使用类似`perl`or`python`的语言提供解析模块`HTML`和`XML`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:13:50.613

您可以执行以下操作：

```
block=""
cat $file | sed -n '/<start>/,/<end>/p;' | while read -r line; do
     if [ -z "$block" ]; then
         block="$line"
     else
         block=$(printf "%s\\n%s" "$block" "$line")
     fi

     if printf "%s\\n" "$line" | grep "<end>" > /dev/null; then
         echo "$block"
         block=""
     fi
done 
```

正如*choroba*在他的回答中所说，您的 for 循环将使用 IFS 变量将 sed 的输出拆分为单独的字段，而 block 变量将仅包含一个字段。（即，块将包含`<start>`, then `test`, then`var=3333`等）。

一种解决方案是通过将 sed 的输出通过管道传输到循环命令中来强制它逐行读取，并使用该`read`命令读取该行。read 命令的`-r`标志强制它不将反斜杠解释为转义字符。现在我们的行有一个变量`$line`，但块没有。要获取该块，只需将这些行连接在一起，直到我们找到`<end>`字符串。

如果`$block`变量为空，我们可以简单地将 赋值`$line`给它。否则，我们使用该`printf`命令生成一个新字符串，其中包含`$block`与换行符连接的先前值和`$line`. 此换行符可防止该块变成单行。

为了测试我们是否找到了最后一行，我们可以打印块的当前值并查看 grep 是否找到它。我使用 printf 是因为当我们要打印的字符串以变量开头时，它比 echo 更安全（我们不能保证变量不以连字符开头， echo 可以解释为一个选项）。当我们真正找到一个块时，我们还必须记住清除块变量，以便为下一个块做好准备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:28:22.010

分词应用于`sed`命令的输出。您可以将 IFS 设置为空值以防止在`sed`输出上分词，但它会使整个输出`sed`变成一个“块”。我宁愿切换到像 Perl 这样更强大的语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T18:43:49.640

通过更改 IFS 并在块之间插入分隔符，您可以遍历每个块。

例如，`:`用作分隔符

```
OLDIFS=$IFS; IFS=':'
blocks=$(sed -n '/start/,/end/ {/start/ s/^/:/; p}' file)
for block in ${blocks#:}; do
  echo "This is block $((count++))"
  echo "$block"
done
IFS=$OLDIFS 
```

笔记：

1.  `:`通过在之前插入`<start>`并设置`IFS`为来“分隔”块`:`
2.  `${blocks#:}`删除第一个`:`，否则`:block1:block2...`解释为`emptyblock:block1:block2...`，即循环遍历不存在的第一个块（它是空的，并且由于`:`放置方式而存在）
3.  或者，`:`可以放在后面，`<end>`但是块的最后一行会变成`<end>:\n`这样，所以在下一个块的开始之前会有一个额外的换行符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T15:56:13.777

这可能对您有用（GNU sed 和 bash）：

```
OIFS=$IFS; IFS=$'\n'; block=($(sed '/<start>/,/<end>/!d' file)); IFS=$OIFS
for x in "${!block[@]}"; do echo "${block[x]}"; done 
```

将 sed 命令输出插入一个数组`block`并循环遍历该数组。

# android - 传递数据错误

> ID：12687539
> 
> 赞同：0
> 
> 时间：2012-10-02T09:14:38.450
> 
> 标签：android, android-intent, pass-data

我有一个名称列表视图（从数据库导入）。单击列表中的名称时，我想从数据库中获取名称的详细信息，因此我必须将名称传递给下一个要检索详细信息的类.我正在尝试将名称从一个班级传递给另一个班级。我不知道我是否传递错误的字符串或以错误的方式获取字符串的名称。

`contact.java`：

```
public class Contacts extends Activity implements OnClickListener {
    int NewContact_Request_Code = 1;
    Button newcontact;
    ListView listview;
    public static final String LOG_TAG = "Contacts";
    int mInt = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contactview);// Set the content to contactview.xml

        // newcontact = NEW CONTACT button
        // listview = MyList List View
        newcontact = (Button) findViewById(R.id.baddcontact);
        listview = (ListView) findViewById(R.id.mylist);

        // Make a New Database
        DBContact info = new DBContact(this);
        // Open , get Information from database and close it
        info.open();
        String[] data = info.queryAll();
        info.close();
        // listview = getListView();
        listview.setTextFilterEnabled(true);
        // Display the names
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(Contacts.this,
                android.R.layout.simple_list_item_1, data);
        listview.setAdapter(adapter);
        listview.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?>listview, View view,
                    int position, long id) {

                String nameclicked = ((TextView)view).getText().toString();
                Intent viewintent = new Intent(Contacts.this, ViewContact.class);
                viewintent.putExtra("name_clicked", nameclicked);
                startActivity(viewintent);

            }
        });
        newcontact.setOnClickListener(this);

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent newintent = new Intent(Contacts.this, AddNewContact.class);
        // start activity for result - to get the name of the new contact
        startActivityForResult(newintent, 0);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        // pass the value of the string via cursor and update the list
    }

} 
```

`viewcontact.java`：

```
public class ViewContact extends Activity implements OnClickListener {
    Button ViewPPhone, ViewHPhone, ViewOPhone, EditContact;
    TextView ViewName;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.viewcontact);
        savedInstanceState = getIntent().getExtras();
        String name = savedInstanceState.getString("name_clicked");
        Long l = Long.parseLong(name);
        DBContact getdetails = new DBContact(this);
        getdetails.open();
        String returnedname = getdetails.getName(l);
        String returnedpphone = getdetails.getPphone(l);
        String returnedhphone = getdetails.getHphone(l);
        String returnedophone = getdetails.getOphone(l);
        getdetails.close();
        ViewName.setText(returnedname);
        ViewPPhone.setText(returnedpphone);
        ViewHPhone.setText(returnedhphone);
        ViewOPhone.setText(returnedophone);

        EditContact = (Button) findViewById(R.id.bEditContact);
        EditContact.setOnClickListener(this);
        ViewPPhone = (Button) findViewById(R.id.ViewPersonalPhoneNumber);
        ViewPPhone.setOnClickListener(this);
        ViewHPhone = (Button) findViewById(R.id.ViewHomePhoneNumber);
        ViewHPhone.setOnClickListener(this);
        ViewOPhone = (Button) findViewById(R.id.ViewOfficePhoneNumber);
        ViewOPhone.setOnClickListener(this);

    }

    public void onClick(View view) {
        // TODO Auto-generated method stub
        switch (view.getId()) {
        case R.id.ViewPersonalPhoneNumber:
        /*  Intent dialpersonalphone = new
            Intent(android.content.Intent.ACTION_DIAL,
            Uri.parse("returnedpphone"));
            startActivity(dialpersonalphone );*/
            break;

        case R.id.ViewHomePhoneNumber:
            /*Intent dialhome = new
            Intent(android.content.Intent.ACTION_DIAL,
            Uri.parse("returnedhphone"));
            startActivity(dialhome);*/
            break;

        case R.id.ViewOfficePhoneNumber:
            /*Intent dialoffice = new
            Intent(android.content.Intent.ACTION_DIAL,
            Uri.parse("returnedophone"));
            startActivity(dialoffice);*/
            break;

        case R.id.bEditContact:
            startActivity(new Intent("com.example.contactlist.EDITCONTACT"));
            break;
        }
    }

} 
```

LOGCAT

```
10-02 10:30:23.064: E/AndroidRuntime(1045): FATAL EXCEPTION: main
10-02 10:30:23.064: E/AndroidRuntime(1045): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.contactlist/com.example.contactlist.ViewContact}: java.lang.NumberFormatException: Invalid long: "nishanth"
10-02 10:30:23.064: E/AndroidRuntime(1045):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at android.os.Looper.loop(Looper.java:137)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at java.lang.reflect.Method.invokeNative(Native Method)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at java.lang.reflect.Method.invoke(Method.java:511)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at dalvik.system.NativeStart.main(Native Method)
10-02 10:30:23.064: E/AndroidRuntime(1045): Caused by: java.lang.NumberFormatException: Invalid long: "nishanth"
10-02 10:30:23.064: E/AndroidRuntime(1045):     at java.lang.Long.invalidLong(Long.java:125)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at java.lang.Long.parse(Long.java:362)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at java.lang.Long.parseLong(Long.java:353)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at java.lang.Long.parseLong(Long.java:319)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at com.example.contactlist.ViewContact.onCreate(ViewContact.java:23)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at android.app.Activity.performCreate(Activity.java:5008)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-02 10:30:23.064: E/AndroidRuntime(1045):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-02 10:30:23.064: E/AndroidRuntime(1045):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:28:18.877

当我使用捆绑包传递信息时，我发现我需要实例化一个`os.Bundle`对象，然后在将此捆绑包添加到意图之前继续填充我的捆绑包信息。

修改您的`contact.java`代码以读取；

```
 Intent viewintent = new Intent(Contacts.this, ViewContact.class);
    final Bundle bundle = new Bundle();
    bundle.putString("name_clicked", nameclicked);
    viewintent.putExtras(bundle);
    startActivity(viewintent); 
```

并重新运行以查看是否有效。

**编辑**

问题是它`String nameclicked = ((TextView)view).getText().toString();`不返回一个长的 - 它返回联系人姓名，“nishanth”！这在 logcat 日志中很清楚，其中指出；

> 10-02 10:30:23.064: E/AndroidRuntime(1045): 由: java.lang.NumberFormatException: Invalid long: "nishanth"

返回的视图`((TextView)view)`不是电话号码，而是您的键“name_clicked”所暗示的联系人姓名。更改此视图以定位电话号码。请注意，电话号码可以包含“+”和“-”符号，因此这种检索所选电话号码的实现并非万无一失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:32:27.437

看到这个我们有想法使用setter和getter它非常有用这个lisk click

```
 list.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {                      

                Object  ob = (Object) view.getTag();                 
                if(ob != null) 
                {                       
                    Data da = (Data) view.getTag();              
                    String a = da.getSelected();
                    String a1 = da.getfunction();
                    int a2 = da.getImage();

                    Log.i(" val one " ,"_" +a);
                    Log.i(" val two ", "_"  +a1);
                    Log.i(" val three","_" +a2); 

                    Intent intent = new Intent(ListMobileActivity.this, Display.class);                         
                    intent.putExtra("passed", a);
                    intent.putExtra("passed1", a1);     
                    intent.putExtra("passed2" ,a2);                      

                    startActivity(intent);          
                }
            }        
        }); 
```

这第二个活动

```
 TextView text = (TextView)findViewById(R.id.textView);
            TextView text1 = (TextView)findViewById(R.id.textView1);
            ImageView image = (ImageView)findViewById(R.id.imageView);

            message = getIntent().getExtras().getString("passed");
            message1 = getIntent().getExtras().getString("passed1");
            message2 = getIntent().getExtras().getInt("passed2");                          

            text.setText(message);
            text1.setText(message1);
            image.setBackgroundResource(message2); 
```

这是 setter 和 getter 类

```
 public class Data {

    private String first;
    private String value;   
    private int image; 

    public void setSelected(String str) {
        this.first = str;
    }
    public String getSelected() {
        return first;
    }
    public void setfunction(String string) {
        this.value = string;
    }
    public String getfunction() {
        return value;
    }
    public void setImage(int image2) {
        this.image = image2;
    }
    public int getImage() {
        return image;
    }    

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:19:38.953

您正在尝试从`savedInstanceState Bundle`. 您想要做的是`String`从`Intent`开始的`activity`：

```
getIntent().getStringExtra("name_clicked"); 
```

**编辑：**

这可能是因为您试图将 解析`String name`为`Long`. 你确定名字都是数字吗？

如果您提供堆栈跟踪，也更容易查明问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T09:19:52.433

为了通过

```
viewintent.putExtra("name_clicked", nameclicked); 
```

进入 viewcontact.java

```
String name = getIntent().getStringExtra("name_clicked"); 
```

**编辑**----------

您正在向另一个活动发送一个**字符串**，然后在捕获它之后尝试将该**字符串**转换为**long**。

出于这个原因，你得到**NumberFormatException**

请参阅**ViewContact.java**的 23 no line where you are conversion **string** to **long**。

```
Caused by: java.lang.NumberFormatException: Invalid long: "nishanth"

at com.example.contactlist.ViewContact.onCreate(ViewContact.java:23) 
```

# google-apps-script - 在脚本中排序时可以指定标题行吗？

> ID：12687541
> 
> 赞同：8
> 
> 时间：2012-10-02T09:14:39.493
> 
> 标签：google-apps-script, google-sheets

我有一个电子表格，我想在处理文档时多次按多列排序。这是一个使用 GUI 的多步骤过程，而且看起来非常耗时。我必须选中标题行的框，设置第一个排序参数，然后添加另一个。呸！它变老得很快。

排序工作表没问题，但标题行也排序了！我没有找到任何方法来指定我有一个标题行作为 sort() 函数的参数，我也没有看到任何方法来全局定义将由 sort() 自动注意到的标题行。

取而代之的是，我保存了标题行，删除了第一行，对工作表进行了排序，在最顶部插入了一个新行，重新创建了标题行，并格式化了标题行。哇！写的时间不长，而且效果很好，但是非常复杂！

从用户的角度来看，标题行在弹出之前会短暂消失。这还不算太糟糕，但很明显有些事情正在发生。

所以最后我解决了我的问题：我是否忽略了在排序时确认标题行存在的能力？或者是否对脚本中存在标题行的工作表进行排序也会对标题行进行排序，没有追索权？

如果我的方法或类似方法需要避免在排序过程中包含标题行，我是否可以通知 Google Apps 团队以便他们考虑添加此功能？由于在 GUI 中使用一个简单的复选框指定标题行的存在，我希望它存在或可以在脚本中排序时添加。

**编辑**

我的原始代码（删除了文档/评论）：

```
sheet.deleteRow(1);

rows.sort([<1st col>, <2nd col>]);

sheet.insertRowsBefore(1, 1);
for (var j = 0; j <= (numCols - 1); j++) {
  sheet.getRange(1, (j + 1)).setValue(firstRow[j]);
}

sheet.getRange(1, 1, 1, numCols).setFontWeight("bold");
sheet.getRange(1, 1, 2, numCols).setBorder(true, true, true, true, true, true); 
```

感谢Thomas的建议，我尝试代替上面的代码：

```
sheet.setFrozenRows(1);
sheet.sort(<2nd col>);
sheet.sort(<1st col>);
sheet.setFrozenRows(0); 
```

不幸的是，这只是按列排序，而不是按行排序。用第一个代码块中的行替换 2 个`sheet.sort();`调用`rows.short();`不起作用。尝试这样做会导致我在评论中报告的初始问题，其中标题行与其他数据一起排序，即使第一行在排序之前被冻结。

此外，除非在此下方添加另一行代码，否则我会在电子表格顶部收到永久的“正在工作...”通知。然而，它似乎并没有影响任何事情。

在所有情况下，`var sheet = SpreadsheetApp.getActiveSheet();`、`var rows = sheet.getDataRange();`和`firstRow`是标题行数据的数组。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T21:58:35.030

> 在所有情况下，var sheet = SpreadsheetApp.getActiveSheet();，var rows = sheet.getDataRange();，firstRow 是标题行数据的数组。

无需使用 getDataRange()，您只需获取要排序的范围（即排除标题行）：

```
var sheet = SpreadsheetApp.getActiveSheet();
var rows = sheet.getRange(2, 1, sheet.getLastRow() - 1, sheet.getLastColumn()); 
```

* * *

*下一部分只是对“次要”问题的回答/观察：*

> 脚本完成后，尽管第一行被冻结，但标题行与所有其他行一起排序。

我认为这是 GAS 中的一个限制，其中一些“电子表格工具”方法不能很好地相互配合——[这个问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=918&q=hide%20columns&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)与你的不同，但我认为它（某种）相关。

因此，使用“冻结标头”解决方法，我很想看看`SpreadsheetApp.flush();`插入后`sheet.setFrozenRows(1);`是否使其工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T14:51:34.650

你想这样做：

*   创建电子表格
*   放入一些随机数据
*   冻结第一行，[http://support.google.com/docs/bin/answer.py ?hl=en&answer=54813](http://support.google.com/docs/bin/answer.py?hl=en&answer=54813)

然后调用这个脚本：

```
function myFunction() {
  SpreadsheetApp.getActiveSpreadsheet().getActiveSheet().sort(1);
} 
```

你去吧:)

亲切的问候，

托马斯·范拉图姆

# android - Android：在 ImageView 上获取触摸位置点

> ID：12687542
> 
> 赞同：2
> 
> 时间：2012-10-02T09:14:45.307
> 
> 标签：android, android-canvas, android-imageview, touch-event

我正在制作一个应用程序，我想在其中获得 Image 上的接触点。我试过使用这个链接：

[Android：如果图像视图按矩阵缩放，如何检测 ImageView 上的触摸位置？](https://stackoverflow.com/questions/6038867/android-how-to-detect-touch-location-on-imageview-if-the-image-view-is-scaled-b)

但是，我无法获得正确的接触点。

我做错了什么？

任何帮助将不胜感激。

这是我的代码：

```
public boolean onTouch(View v, MotionEvent event) {
                v.onTouchEvent(event);

                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                PointF curr = new PointF(event.getX(), event.getY());

                switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    last.set(event.getX(), event.getY());
                    EventX=event.getX();
                    EventY=event.getY();
                    Log.d("ImageX"+event.getX(), "ImageY"+event.getY());
                    start.set(last);
                    mode = DRAG;
                    PosterActivity.isTouched=false;

                    break;
                case MotionEvent.ACTION_MOVE:
                    // Log.i("onTouch", "origWidth : " + origWidth +
                    // " origHeight : " + origHeight);
                    if (mode == DRAG) {
                        deltaX= curr.x - last.x;
                        Log.d("deltaX",""+deltaX);

                        deltaY = curr.y - last.y;
                        Log.d("deltay",""+deltaY);
                        scaleWidth = Math.round(origWidth * saveScale);
                        scaleHeight = Math.round(origHeight * saveScale);
                        if (scaleWidth < width) {
                            deltaX = 0;
                            if (y + deltaY > 0)
                                deltaY = -y;
                            else if (y + deltaY < -bottom)
                                deltaY = -(y + bottom);
                        } else if (scaleHeight < height) {
                            deltaY = 0;
                            if (x + deltaX > 0)
                                deltaX = -x;
                            else if (x + deltaX < -right)
                                deltaX = -(x + right);
                        } else {
                            if (x + deltaX > 0)
                                deltaX = -x;
                            else if (x + deltaX < -right)
                                deltaX = -(x + right);

                            if (y + deltaY > 0)
                                deltaY = -y;
                            else if (y + deltaY < -bottom)
                                deltaY = -(y + bottom);
                        }
                        matrix.postTranslate(deltaX, deltaY);
                        last.set(curr.x, curr.y);
                        PosterActivity.isTouched=true;

                    }
                    break;

                case MotionEvent.ACTION_UP: {
                    mode = NONE;
                    int xDiff = (int) Math.abs(curr.x - start.x);
                    int yDiff = (int) Math.abs(curr.y - start.y);
                    if (xDiff < CLICK && yDiff < CLICK) {
                        Log.v("ACTION_UP", "ACTION_UP");
                        mPosX = curr.x;
                        mPosY = curr.y;

                        PosterActivity.isTouched=true;
                        performClick();

                    }
                    //setImageMatrix(matrix);
                    //invalidate();
                    break;
                }
                case MotionEvent.ACTION_POINTER_UP:
                    mode = NONE;
                    break;
                }
                setImageMatrix(matrix);
                invalidate();
                return true; // indicate event was handled
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T16:17:34.143

为了明白这一点，我已经成功地使用了您所链接问题的答案。我刚刚用 getRawX() 和 getRawY() 改变了 getX() 和 getY()

尝试使用此代码示例

```
 // calculate inverse matrix
  Matrix inverse = new Matrix();
  matrix.invert(inverse);
  // map touch point from ImageView to image
  float[] touchPoint = new float[] {event.getRawX(), event.getRawY()};
  inverse.mapPoints(touchPoint);
  // touchPoint now contains x and y in image's coordinate system    
  Log.d(TAG, "touch coords="+touchPoint[0] + " - " + touchPoint[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-14T07:13:44.800

在 ImageView 上应用 setOnTouchLinstener 并获取它的 x 和 y 位置。

```
imageView.setOnTouchListener((v, event) -> {
 finalX = event.getX();
 finalY = event.getY();
} 
```

# regex - 通过正则表达式将页面区分为 pdf 流

> ID：12687544
> 
> 赞同：0
> 
> 时间：2012-10-02T09:14:49.460
> 
> 标签：regex, pdf

我需要从 pdf 流中提取一些信息。
提取相关文本非常简单，因为它类似于：

```
BT /Fo0 7.20 Tf 67.81 569.38 Td 0.000 Tc (TOTAL AMOUNT) Tj ET 
```

我可以考虑固定 y 位置，而 x 位置由于 giustification 是可变的。但我的问题是识别页面的开头和结尾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:50:29.730

您不应该确定您使用“信息提取器”遇到的所有 PDF 都表现得很好。或者你可以，因为你*知道*他们是？

否则，很可能您遇到的 PDF 代码如下所示：

```
BT 
  /Fo0 7.20 Tf 
  67.81 569.38 Td 
  0.000 Tc 
  (TO)12(T)13(AL A)11(M)14(OUNT) TJ 
ET 
```

那是， ...

*   ...使用`TJ`而不是`Tj`, 以允许单独的字形定位，
*   ...有更多的换行符，
*   ...也许还有更多的修改。

为了可靠地获取页面的文本内容，您必须解析 PDF 的结构，简而言之：

1.  找到`/Type /Page`;的所有对象
2.  转到这些页面对象中的每一个并检索其各自的信息`/Contents`；
    *   可能指向`/Contents`单个流，或
    *   `/Contents`可能指向一个流数组；
3.  转到此内容对象并提取其流。

实际上，上述步骤中的第一步可能会变得更复杂一些：

*   找到并转到该`trailer <<...>>`部分
*   在预告片中找到有关文档`/Root`对象的信息
*   转到根对象
*   `/Pages`从`/Root`对象中提取有关 的信息
*   转到对象（这是一个带有孩子和父母`/Pages`的中间*页面树节点；*
*   `/Kids`通过检查对象找到此页面树节点的所有后代
*   转到列出的每个相应对象`/Kids`；
    *   它可能是`/Type /Pages`（在这种情况下，它是另一个页面树*节点*，而不是*树叶*，您必须进一步沿着树向下）；
    *   它可能是`/Type Page`（在这种情况下，你到达了一个页面*树叶*，这意味着你*真的*到达了一个页面）。

在这一点上，我应该注意，您在此旅程之后找到的第一页是第 1 页。接下来是第 2 页，依此类推。请注意，没有任何页面有任何元数据说“我是第 N 页”——这完全取决于按照您解析从根对象开始的页面树的顺序。

现在您确实找到了内容流，您还面临两个问题：

1.  您正在查找的内容流可能根本不是明文（如您的代码所示）。内容流经常被一种允许的压缩方案压缩，您必须先扩展它们，然后才能解析文本内容。

    要查看流是否被压缩，请注意相应的**Decode*关键字（经常显示为 `/Filter /FlateDecode`）。

2.  成功解压缩页面的内容流后，您可能会遇到描述文本的完全不直观的字符代码。它可能与您想象的和示例代码中显示的行为良好的 ASCII 类型完全不同。

    您必须查找字体（甚至像 CID 这样的多字节字体）、它们的编码、CMap 等等。

    除非，正如我在第一句话中所质疑的那样，您*知道*在您的特定用例中不会发生这种情况......

# php - $.ajax 不执行

> ID：12687549
> 
> 赞同：0
> 
> 时间：2012-10-02T09:15:29.197
> 
> 标签：php, javascript, ajax, dynamic

我有一个`$.ajax`代码，它在单击某个 Id 时触发，然后，每次单击时，它都会在数据库中查询。我的问题是，我的其他 ajax 函数不起作用。

```
alert("Test");
$.ajax({
   type : 'GET',
   url : 'city.php',
   dataType : 'json',
   data: {
       region : $('#province').val()
   },
   success : function(data_1){
      $("#city").append("<option value=''>Select City</option>");
      for (var i = 0; i < data.province.length; i++) {
         if(data_1.city[i] != null)
         $("#city").append("<option value="+data_1.id[i]+">" + data_1.province[i]+"</option>");
   }
} 
```

这段代码在我的本地主机上运行，​​我没有问题，但是当我将它上传到我的网络主机时，它不再查询并填充我的下拉列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:23:14.770

*   使用 Firebug 或类似工具检查您的 HTTP 流量
*   检查跨域请求
*   在您的 js 中添加错误处理程序以及成功处理程序

*   您的示例代码有一个错误 -`data.province`会抛出一个参考错误，正如您要写的那样`data_1`

# spring - nginx proxy_pass 到 Jboss+Spring/Websphere+Portal 项目

> ID：12687551
> 
> 赞同：2
> 
> 时间：2012-10-02T09:15:38.603
> 
> 标签：spring, jboss, nginx, websphere, websphere-portal

我在前面有一个 nginx 作为两台服务器的代理，一台运行 Websphere Portal Server，另一台在 Jboss 服务器上运行 Spring。

我目前在代理某些请求时遇到问题，例如，我有以下问题：

```
server{
    listen:8080;
    server_name:localhost;

    location /jbossSpring/ {
        proxy_pass http://177.21.1.15:9000/Spring_project/;
    }

    location /webspherePortal/ {
        proxy_pass http://177.21.1.15:9400/Portal_project/;
    }
} 
```

现在，这会正确地执行代理`localhost:8080/jbossSpring/`，`localhost:8080/webpsherePortal/`但是，我得到的页面不断请求位于`localhost:8080/Spring_project/`和的文件`localhost:8080/Portal_project/`。

无论如何我可以在nginx中处理这些吗？还是我必须修改 Spring/Portal 项目才能获得正确的 url？（路径依赖可能？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:05:37.083

您可以通过使用 http 重写模块来实现此结果，记录在 [ngx_http_rewrite_module](http://nginx.org/en/docs/http/ngx_http_rewrite_module.html)

给出一个想法，我猜你的重写应该如下所示（我没有验证这一点）

```
server {
  ...
  rewrite ^/Spring_project/(.*) /jbossSpring/$1 last;
  rewrite ^/Portal_project/(.*) /webspherePortal/$1 last;
  ...
} 
```

# facebook - 以经过身份验证的 API 用户身份简单发布到 Facebook 页面墙上

> ID：12687552
> 
> 赞同：1
> 
> 时间：2012-10-02T09:15:38.823
> 
> 标签：facebook, facebook-graph-api

我们正在制作一个数字广播播放器，听众可以在其中向演播室发送信息。这个想法是，用户将在网站上填写一个文本区域，按下按钮，消息就会发布在工作室的 Facebook 墙上，DJ 正在那里监控它。

这对用户墙非常有效，但是当我尝试发布到页面墙时，我收到此错误：

```
"(#200) The user has not granted the application the permission to automatically publish feed stories" 
```

我是不是忘记了什么？或者这是不可能的？用户是否需要喜欢该页面？或者作为页面管理员是否需要更改设置？

我创建了一个测试页面，我喜欢它，并且一直在用我的帐户进行测试。我还选中了“任何人都可以在 x Page 的时间轴上发帖”框。但没有帮助。

这是简化的代码：

```
function facebookPost(target,content) {
    FB.api('/'+target+'/feed','post',{
        message:message
    },function(res){
        console.log(res);
    }
} 
```

我已经使用 API 有一段时间了，但是这个真的让我头疼。

提前致谢。

**编辑：我发现只有当页面管理员在他自己的页面上发布时才会出现错误。当我将“manage_pages”添加到 perms 时，我没有收到错误消息，但该帖子以页面名称命名，就像状态更新一样。**

**所以它适用于其他用户，但前提是他们在发布之前没有“喜欢”该页面，否则页面管理员不会收到新帖子的通知，他看不到它，只有用户和他的朋友可以。（这是一个问题，因为 DJ 必须看到这些帖子）**

**有没有人经历过这种行为？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T08:58:00.577

对于那些带着同样错误来到这个页面的人，我发现你需要的是 publish_stream 而不是 publish_actions。

尽管 Facebook 文档说 publish_actions 取代了 publish_stream。当我为 publish_actions 做了一个 FB.login 时，它通过了，但帖子得到了与帖子作者相同的错误。

当我请求 publish_stream 时，它向我显示了一个请求新权限的对话框，在我点击确定后，该帖子就成功了。

我使用的代码：

```
params={message: "Your message on the wall."}

FB.login(function(response) { console.log(response) }, {scope:'publish_stream'})
FB.api('/<The Page ID>/feed', 'post', params, function(response) { console.log(response)  }); 
```

# blackberry - 黑莓中是否可以有多个屏幕堆栈？

> ID：12687554
> 
> 赞同：2
> 
> 时间：2012-10-02T09:15:44.970
> 
> 标签：blackberry

我正在尝试在我的应用程序中实现一个选项卡式导航系统（类似于 iOS UITabBarController）。我正在尝试创建的功能是每个选项卡都拥有自己的屏幕堆栈，因此如果切换选项卡，用户将更改为不同的堆栈，并且可以独立于其他选项卡来回导航，同时显示单个选项卡屏幕顶部或底部的栏。

我已经在 Dropbox 等应用程序中看到了这个功能，但我不确定它是否可能有多个堆栈，或者这种行为只是对单个堆栈的巧妙管理。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:21:49.633

不，只有一个屏幕堆栈，RIM OS 不支持多个屏幕堆栈。

你应该遵循一些规则来使用这个单一的堆栈。例如，要显示上一个屏幕，您需要弹出（关闭）最上面的屏幕。

如果您不弹出屏幕，而是创建越来越多的新屏幕，而不关闭旧屏幕，那么您将得到 OutOfMemoryException。

您将需要重新设计您的应用程序，使用自定义 Manager 类实例并编写您自己的界面来实现您需要的外观方式。

编辑：您可以拥有任意数量的屏幕对象内存列表，或者直到它们适合设备内存。但 RIM OS 只允许一叠*可见屏幕*。

# javascript - jQuery根据数据属性更改图像src

> ID：12687555
> 
> 赞同：0
> 
> 时间：2012-10-02T09:15:47.030
> 
> 标签：javascript, jquery, jquery-selectors

我有一个动态生成的 div 列表，其中包含唯一的数据 ID 和几个图像图标。单击图标时，会弹出一个框，允许根据所选操作进行选择。这将通过 ajax 更新数据库。

当 ajax reauest 返回 3 时，我需要更改第一个图标。

```
var ls="<div class='list_body'>
            <div class='lister1'>
                <img src='"+path+stat1+"' data-icon_no='1' data-status='"+split_stats[0]+"' data-job_id='"+split_stats[18]+"' />
                <img src='"+path+stat2+"' data-icon_no='2' data-status='"+split_stats[1]+"' data-job_id='"+split_stats[18]+"' />
                <img src='"+path+stat3+"' data-icon_no='3' data-status='"+split_stats[2]+"' data-job_id='"+split_stats[18]+"' />
                <img src='"+path+stat4+"' data-icon_no='4' data-status='"+split_stats[3]+"' data-job_id='"+split_stats[18]+"' />
                <img src='"+path+stat5+"' data-icon_no='5' data-status='"+split_stats[4]+"' data-job_id='"+split_stats[18]+"' />
                <img src='"+path+stat6+"' data-icon_no='6' data-status='"+split_stats[5]+"' data-job_id='"+split_stats[18]+"' />
            </div>
            <div class='lister'>"+split_stats[6]+" "+split_stats[7]+" "+split_stats[8]+"<br />["+split_stats[13]+"]"+"</div>
            <div class='lister'>"+split_stats[14]+"</div>
            <div class='lister'><a href='javascript:void(0);' class='lister_a'>View Appointment &amp; Actions</a></div>
        </div>"; 
```

（我试图将代码隔开以使其更具可读性，但基本上这只是附加到文档中的许多行中的一行）

到目前为止，我的 jQuery 是...

```
$(document).on('click', '.submit_acc', function(){
        var selected=$('.conf_app').val();
        var agent=$('body').data('agent_id');

        if(selected==0)
        {
            alert("Please make a selection from the available options.");
            return;
        }

        var reason=$('.ag_com').val();
        var data="agent_id="+agent+"&selected="+selected+"&reason="+reason+"&job_id="+gl_job_id;
        alert(data);
        $.ajax({
            type:"POST",
            url:"admin_includes/conf_job.php",
            data:data,
            context:gl_job_id,
            success:function(html){

                if(html=="3")
                {
 //this is where I can't get it to work......
                    $('.lister1[data-job_id="'+gl_job_id+'"'').find('img').eq(0).src("images/icons/start_green.png");

                }
            }
        })//end ajax

}); 
```

我很难确定要更改图像的行。

gl_job_id 是一个全局变量，保存 job_id 用作 data-job_id 中的标识符（这有意义吗？？）..

目前这是在选择器行上引发错误，但显然语法完全错误:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:39:33.310

此处选择器错误：

```
$('.lister1[data-job_id="'+gl_job_id+'"'').find('img').eq(0).src("images/icons/start_green.png"); 
```

你试图选择`div`，`data-job_id`也删除一个`'`并添加`]`

像这样的东西一定是：

```
$('.lister1 [data-job_id="'+gl_job_id+'"]').attr('src', "images/icons/start_green.png"); 
```

此代码选择`div`，然后查找`data-job_id`并设置`src`属性

# javascript - jQuery/JavaScript for-Loop 和 .append

> ID：12687556
> 
> 赞同：1
> 
> 时间：2012-10-02T09:15:51.643
> 
> 标签：javascript, jquery

我昨天开始使用 jQuery 和 JavaScript，但遇到了错误。

我想要的只是在 H1 标记之后随机放置广告（假设页面上有 10 个 H1 被 2 = 5 AdPosition 潜水）现在在随机选择的 H1 之后添加 5 个 AdBlock。

听起来很简单，但我无法做到这一点...：/ 因为 jQuery 或 myCode 只粘贴一个 AdBlock。

JsFiddle： http: [//jsfiddle.net/byt3w4rri0r/eCBCK/](http://jsfiddle.net/byt3w4rri0r/eCBCK/) - 工作！

* * *

我的HTML：

```
<body>
<div id="content-inner">
    <h1 class="headline">Headline</h1>
    <h1 class="headline">Headline</h1>
    <h1 class="headline">Headline</h1>
    <h1 class="headline">Headline</h1>
    <h1 class="headline">Headline</h1>
    <h1 class="headline">Headline</h1>
    <h1 class="headline">Headline</h1>
    <h1 class="headline">Headline</h1>
    <h1 class="headline">Headline</h1>
    <h1 class="headline">Headline</h1>
</div>
</body>​ 
```

* * *

MyJQUERY/JavaScript：

```
//count H1
var countH1 = parseFloat($("#content-inner h1").length)-1; //-1 because 0 is also a number!

//how often the ads should be displayed
var ad_count = Math.round(countH1 / 2);

//random helper
var min = 0;
var max = countH1;

//random position
for (counter = 0; counter < ad_count; counter++){
    var random_position = Math.round((Math.random() * (max - min)) + min);

    console.log("Random_Position:", random_position);

    // paste google-code

    if ($(".headline").hasClass('advertised') == true) {
        random_position++;

        console.log('already advertised!')

        if (random_position > countH1) {
            random_position--;
            }
    } else {
        $('h1:eq('+random_position+')').append('<div class="google_ad1"></div>');
        $('h1.headline').addClass('advertised');
        }
}

console.log("CountH1 -1, because 0=1, 1=2,....", countH1);
console.log(werbung_anzahl);
console.log(zufall_position);
console.log(counter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:28:33.970

有了这条线

```
if ($(".headline").hasClass('advertised') == true) 
```

您正在检查是否有任何（！） .headline 元素已被宣传。在第一步之后，总会有一个 .headline 被宣传，所以这个比较是正确的。

你想做什么：检查当前索引的 .headline 是否已经被广告

```
if ($(".headline").eq(random_position).hasClass('advertised') == true) 
```

最重要的是，您正在将“广告”类添加到所有（！）您的 h1.headline 元素。这就是你想要做的

```
$('h1.headline').eq(random_position).addClass('advertised'); 
```

[编辑：这是来自http://jsfiddle.net/eCBCK/19](http://jsfiddle.net/eCBCK/19)的最新小提琴的完整更改 for 循环

```
for (counter = 0; counter < ad_count; counter++){
    var random_position = Math.round((Math.random() * (max - min)) + min);

    console.log("Random_Position:", random_position);

    // paste google-code

    if ($(".headline").eq(random_position).hasClass('advertised') == true) {
        counter--;

        console.log('already advertised!')

    } else {
        $('h1:eq('+random_position+')').append('<div class="google_ad1"></div>');
        $('h1.headline').eq(random_position).addClass('advertised');
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:28:36.643

如果我错了，有人纠正我，但是您正在向所有 h1 元素添加“广告”类，这意味着在第二个循环中，您正在测试广告是否已经添加到 h1，现在将始终是true 并且不再添加添加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:36:48.923

使用 jQuery 的链接功能：

```
$('h1:eq('+random_position+')').append('<div class="google_ad1"></div>').addClass('advertised'); 
```

这只会将`advertised`类添加到您刚刚附加到的 H1 中。

# javascript - 模块模式和 document.ready

> ID：12687558
> 
> 赞同：2
> 
> 时间：2012-10-02T09:15:58.923
> 
> 标签：javascript, jquery

我已经开始学习 javascript 模块模式，并且我有以下代码：

```
// PersonalInformation.js

var PersonallInformation = (function () { 

   $.validator.addMethod("checkPhoneNumber", function (value, element) {

        if (!value) return true;
        return /^((\+7)|8)(700|701|702|705|707|712|713|717|718,721|725|726|727|777)[0-9]{7}$/.test(value);
    }, "Wrong phone format");

    function updateQTip() {

        $('div.invalid_form').qtip({
            content: function (api) {
                var text = $(this).prev();
                return "<div class='tip_cont'><span class='simple cost'><span class='corner'></span>" + $(text).attr('data-description') + "</span></div>";
            },
            position: {
                target: 'mouse',
                adjust: { x: 5, y: 17 }
            },
            style: {
                tip: { corner: false }
            }
        });
    }

    function updateError() {
        $('.invalid_form').closest('.wrap_input').addClass('error');
        $('#reg_form_pay input').each(function(element) {
            if ($(this).hasClass('invalid_form')) {
                $(this).closest('.wrap_input').addClass('error');
            } else {
                $(this).closest('.wrap_input').removeClass('error');
            }
        });
        updateQTip();
    }

    function validateForm() {
        $("#reg_form_pay").validate({
            rules: {
                Email: { required: true, email: true },
                PhoneNumber: { required: true, checkPhoneNumber: true },
                FirstName: { required: true },
                Surname: { required: true }
            },
            messages: {
                Email: '',
                PhoneNumber: '',
                FirstName: '',
                Surname: ''
            },
            errorClass: "invalid_form",
            errorElement: "div",
            errorPlacement: function (error, element) {
                error.insertAfter(element);
            },
            onkeyup: false,
            showErrors: function (errorMap, errorList) {

                this.defaultShowErrors();
                updateError();
            }
        });
    }

    function privateInit() {
        validateForm();
        console.log('init ok');
    }

    return {
        init: privateInit,
    };
}()); 
```

为了使这段代码工作，我必须调用`init`视图中的方法，如下所示：

```
<script>
    $(document).ready(function() {
        PersonallInformation.init();
    })        
</script> 
```

是否可以避免调用`init`视图？

**更新：** 我用以下方式重写了它：

```
function library(module) {
    $(function() {
        if (module.init) {
            module.init();
        }
    });
    return module;
}

var PersonallInformation = library(function () {
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:24:01.587

最简洁的答案是不

您的 validateForm 方法使用 DOM 来完成它的工作。如果您在 document.ready 之前调用 init 方法，则行为未指定。

您将不得不在 document.ready 中调用一些方法。

您并没有真正使用模块部分，因为您实际上只是将函数封装在另一个函数中，因此如果您将 (function (){...}()) 之间的整个代码移动到文档中，您将拥有相同类型的封装。准备好在这种情况下，您可以将函数的最后一部分更改为

```
validateForm();
console.log('init ok'); 
```

即内联init函数。

**编辑**

重写可能是这样的：

```
 var setupValidate = (function () { 
    return function(options) {
          var defaultOptions = {
               qtipOptions : {
                  content: function (api) {
                      var text = $(this).prev();
                      return "<div class='tip_cont'><span class='simple cost'><span class='corner'></span>" + $(text).attr('data-description') + "</span></div>";
                   },
                   position: {
                     target: 'mouse',
                     adjust: { x: 5, y: 17 }
                   },
                   style: {
                      tip: { corner: false }
                   }
               },
               formSelector : "#reg_form_pay",
               invalidFormSelector : 'div.invalid_form',

         };
         options = $.extend(defaultOptions,options);
         $.validator.addMethod("checkPhoneNumber", function (value, element) {

            if (!value) return true;
            return /^((\+7)|8)(700|701|702|705|707|712|713|717|718,721|725|726|727|777)[0-9]{7}$/.test(value);
         }, "Wrong phone format");

         function updateQTip() {
            $(options.invalidFormSelector).qtip();
         }

    function updateError() {
        $(options.invalidFormSelector).closest('.wrap_input').addClass('error');
        $(options.formSelector).find("input").each(function(element) {
            if ($(this).hasClass('invalid_form')) {
                $(this).closest('.wrap_input').addClass('error');
            } else {
                $(this).closest('.wrap_input').removeClass('error');
            }
        });
        updateQTip();
    }

    function validateForm() {
        $(formSelector).validate({...});
    }

        validateForm();
        console.log('init ok');
  }
}()); 
```

然后你会这样称呼它：

```
$(function(){
    setupValidate (/*with options if you'd like to change the default*/);
}); 
```

# html - CSS选择器应用于不相关的元素？

> ID：12687563
> 
> 赞同：1
> 
> 时间：2012-10-02T09:16:23.020
> 
> 标签：html, css, html-table, selector

我有一个简单的页面，其中有两个名为`table-a`and的表`table-b`：

```
<table id="table-a">
    ...
</table>

<table id="table-b">
    ...
</table> 
```

我使用以下 css 来设置这两个表的外观：

```
#table-a {
    width: 100%;
}

#table-a td, tr, th {
    border: 1px solid #000000;
}

#table-b {
    width: 100%;
}

#table-b td, tr, th {
    border: 1px solid #000000;
    padding-left: 5px;
} 
```

问题是`padding-left: 5px;`of`table-b`也适用于第一个表`table-a`。

这是如何发生的，我该如何防止它发生？

我真的不知道如何解决这个问题:(...

我认为通过使用以下内容，只有那些“在”内的元素受到影响，`table-b`而不是那些在“内”的元素`table-a`：

```
#table-b td, tr, th {
    /* ... */
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:18:38.033

您的第二个选择器`#table-b td, tr, th {...]`选择文档中的所有 td、tr 和 ths。您必须在每个表选择器前面添加：

```
#table-b td, 
#table-b tr, 
#table-b th {...] 
```

还要将 附加`#table-a`到其他选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T09:19:01.823

```
...tr, th {
   border: 1px solid #000000;
   padding-left: 5px;
} 
```

这适用于*所有*表格行和标题。

如果要应用#table-a的规则，则需要在tr和th之前指定表id：

```
#table-a td, #table-a tr, #table-a th {
   border: 1px solid #000000;
   padding-left: 5px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:22:08.223

试试这个：`#table-b td, #table-b tr, #table-b th`而不是 this `#table-b td, tr, th`。您的版本将选择器应用于 #table-b td AND th AND tr

# wpf - WPF：测量数据绑定时间消耗

> ID：12687565
> 
> 赞同：0
> 
> 时间：2012-10-02T09:16:31.440
> 
> 标签：wpf, performance, binding

如何在 WPF 应用程序中单独测量数据绑定时间消耗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:20:42.227

您可以使用`performance profiling tools`以确保

链接：http: [//msdn.microsoft.com/en-us/library/aa969767.aspx](http://msdn.microsoft.com/en-us/library/aa969767.aspx)

# templates - 如何使用打印机从控制器打印 gsp？

> ID：12687570
> 
> 赞同：0
> 
> 时间：2012-10-02T09:16:41.063
> 
> 标签：templates, grails, controller

我需要将一些值传递给模板，然后打印模板。我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:11:38.777

据我了解，您想自动开始打印渲染的 gsp 页面。您不应该尝试从控制器执行此操作，控制器用于将参数传递给呈现为 HTML 的 .gsp 页面。

您可以通过将此 javascript 放入您的 gsp 文件中来自动启动打印机：

```
<script>

$(document).ready(function(){
    window.print();
});

</script> 
```

# php - 如何使用 index.php?something 之后的信息

> ID：12687578
> 
> 赞同：-4
> 
> 时间：2012-10-02T09:17:06.947
> 
> 标签：php

我读过[这个](http://php.net/manual/en/reserved.variables.get.php)，但都是关于`index.php?name=something`。我想在`?`使用它之后使用信息`echo "$_GET";`，但我必须定义`$_get['name'];`. 关键是，我想在没有`?name=`. 这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:20:52.620

你可以从`$_SERVER['QUERY_STRING']`.

你仍然可以得到它的形式`$_GET`，试试`array_keys($_GET)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:19:53.870

为什么不：

```
function getstuffbehindurl() {
  $urlstring = "";
  foreach ($_GET as $key => $value) {
    $urlstring .= "$key" . ($value == "") ? "" : "=$value&";
  }
  $urlstring = substr($urlstring, 0, -1);
  return $urlstring;
} 
```

如果你的网址是`foo.php?something&somethingelse&somethingelse`，这会给你`something&somethingelse&somethingelse`。

然后你可以使用：

```
include(getstuffbehindurl()); 
```

# c# - 在不拉伸图像的情况下调整图像大小

> ID：12687583
> 
> 赞同：-1
> 
> 时间：2012-10-02T09:17:24.730
> 
> 标签：c#, winforms, gdi+

我有一个图像框架：

[1 http://i48.tinypic.com/wugmc2.png](http://i48.tinypic.com/wugmc2.png)

图像分辨率为：533x300

使用 GDI+ 我将图像重新调整为 300x533：

[![2](../Images/437027e197bed8072f70adf4357467bf.png)](https://i.stack.imgur.com/UMcSY.png)

现在你可以看到它扭曲了边框的宽度/高度并缩小了圣诞老人......

有没有办法使用 GDI+ c# 来防止图像帧的这种失真？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:20:07.780

缩放图像总是会导致扭曲的圣诞老人。如果这不是您想要的，请尝试为您的圣诞老人和边框创建单独的图像。

如果边框会像红线一样简单，我几乎可以肯定有一个简单的控件可以在 GDI 中绘制红色边框。如果您要创建一些带有树枝和树木的圣诞边框，则需要更多较小的图像来区分这个问题。

*   创建一个单独的圣诞老人以用作叠加层
*   为角落创建单独的图像
*   为垂直和水平边框创建单独的可耕种图像

然后自己放置图像并将图像平铺在中心，如下所示：

![在此处输入图像描述](../Images/8e94f16cff08f3497b79115cadea14e8.png)

我从未使用过 GDI，但这是缩放边界的通用解决方案。

# css - iframe 元素/样式上的 window.getMatchedCSSRules

> ID：12687584
> 
> 赞同：0
> 
> 时间：2012-10-02T09:17:26.043
> 
> 标签：css, iframe, webkit

是否可以在 iframed 文档中的元素上使用 WebKit 的 window.getMatchedCSSRules 来查找匹配的样式（在 iframed 文档中定义/来源）？当我尝试这个时，我只是得到了父文档的匹配样式。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:02:28.303

而不是使用`window.getMatchedCSSRules`，使用`frame.contentWindow.getMatchedCSSRules`框架元素（例如框架可能是`$('iframe').get(0)`）

# java - Java collections.Shuffle 只洗牌一次

> ID：12687587
> 
> 赞同：4
> 
> 时间：2012-10-02T09:17:33.187
> 
> 标签：java, collections, arraylist

我有一段代码，想法是它接收一个包含 n 个数字的数组列表，并将其随机播放 50 次，每次都将新的随机播放添加到另一个数组列表中。

然而，它似乎做的是洗牌一次，将它添加到数组列表中（就像应该），但接下来的 49 次，它不会洗牌。它只添加相同的。您可能会从我下面的代码中了解更多：

```
int chromeSize;
ArrayList<GeoPoint> geoPoints = new ArrayList<GeoPoint>();      
ArrayList<Integer> addToFirstChrome = new ArrayList<Integer>();
ArrayList<ArrayList<Integer>> populationShuffle = new ArrayList<ArrayList<Integer>>();

for (int i=0; i<geoPoints.size(); i++) {
  addToFirstChrome.add(i);
}
System.out.println("add To First Chrome " + addToFirstChrome);

for (int j =0; j<50; j++) {
  Collections.shuffle(addToFirstChrome);
  populationShuffle.add(addToFirstChrome);
}  

for (int p=0;p<populationShuffle.size();p++) {
  System.out.println("Pop " + p +"=" + populationShuffle.get(p));
} 
```

这是输出示例：

```
10-02 10:10:26.785: I/System.out(19648): add To First Chrome [0, 1, 2, 3, 4]
10-02 10:10:26.790: I/System.out(19648): Pop 0=[2, 1, 3, 4, 0]
10-02 10:10:26.790: I/System.out(19648): Pop 1=[2, 1, 3, 4, 0]
10-02 10:10:26.790: I/System.out(19648): Pop 2=[2, 1, 3, 4, 0]
10-02 10:10:26.790: I/System.out(19648): Pop 3=[2, 1, 3, 4, 0]
10-02 10:10:26.790: I/System.out(19648): Pop 4=[2, 1, 3, 4, 0] 
```

如您所见，它会洗牌第一个，但不再洗牌了。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T09:19:13.443

> 我在这里错过了什么吗？

是的。您错过了在每次迭代中添加相同引用的事实：

```
for(int j =0; j<50; j++) {
    Collections.shuffle(addToFirstChrome);
    populationShuffle.add(addToFirstChrome);
} 
```

这*实际上*与以下内容相同：

```
for (int j =0; j < 50; j++) {
    Collections.shuffle(addToFirstChrome);
}
for (int j = 0; j < 50; j++) {
    populationShuffle.add(addToFirstChrome);
} 
```

的值`addToFirstChrome`只是*一个*参考。

It sounds like you want 50 *separate collections*, in which case you need to create a new collection on each iteration:

```
for (int j = 0; j < 50; j++) {
    List<Integer> copy = new ArrayList<Integer>(addToFirstChrome);
    Collections.shuffle(copy);
    populationShuffle.add(copy);
} 
```

(Note that this requires you to change the type of `populationShuffle` to `List<List<Integer>>` or `ArrayList<List<Integer>>` - prefer programming to interfaces where possible.)

# java - Java：接口是比静态类更好的面向对象设计吗？

> ID：12687589
> 
> 赞同：0
> 
> 时间：2012-10-02T09:17:39.540
> 
> 标签：java, interface, static

我已经读过好几次了，例如在这里 [https://stackoverflow.com/a/589885/1420898](https://stackoverflow.com/a/589885/1420898)，静态成员是一个糟糕的 OO 设计，应该避免。它也发生在我正在从事的项目中；他们已经为在我看来应该是静态类的类使用了接口 + 实现，因为我们只是使用它的函数对其他类执行一些操作。

我的问题是，我们为什么要在静态类上使用接口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:26:25.067

就使用静态类与接口而言，静态类将用作帮助器，即它将是该类的单个实例，而通过接口实例化的类可能有许多不同的实现，并且通常使用对于多个实例类。当您只想让一个类做某事而不存储特定于该调用的状态信息时，您可以使用静态类。接口将更多地用于一般的面向对象编程。

当我们希望在不实例化或创建对象的情况下使用对象时，基本上使用静态类。通常我们会在静态类中放置我们常用的函数或重复使用的此类函数。因为将它们放在简单的类中会产生很多开销，因为每次形成类对象时，它都会为我们在其中的所有对象分配内存。因此，它通过使用静态类来减少开销。

当与接口进行比较时，虽然没有这样的比较，这取决于您的要求，如果要求与上述类似，那么您肯定会选择静态类而不是接口，但是如果我们有这样的要求，即我们有多个类并且我们希望它们应该是遵循这样的模式或在它们的对象形成之前实现这些东西，那么我们会更喜欢接口而不是静态类。

此外，如果我的函数是通用的，但具有对应于不同类的不同实现，那么我将再次使用接口而不是静态类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:00:43.050

首先，我想说， java 中**没有**静态类。好吧，除了静态**内部**类。我认为内部阶级绝对不是你在上面的意思。

您可能想说，一个不允许实例化的类，使用静态方法。像 Util 类。即apache常见的StringUtil ...

Util 类中的静态方法只提供一种实现。更重要的是，它不应该对传入的 Object 了解太多详细的逻辑。

举个例子，你有界面：

```
 interface Animal{
   int totalLegs(); //here you get the animal object has how many legs 
} 
```

那么你就有了 Bird、Horse、Warm、Fly 类，实现 Animal 接口。他们有不同的暗示。总腿数。这些实现与 Animal (Bird, Horse...) 类型的详细逻辑有关，因此它应该转到接口。

并假设每个动物都有一个字段 `Date birthday;`，您希望将日期转换为具有自定义模式的字符串。您可以创建一个类，即 DateUtil 和方法`public static String getDateString(Date d, String pattern){...}`

也许你可以描述一下接口/实现。在你的项目中。然后我们可以看看去Util类是否更好。

# apache - Puppet/Vagrant：损坏的 apache 虚拟主机内容

> ID：12687590
> 
> 赞同：1
> 
> 时间：2012-10-02T09:17:48.320
> 
> 标签：apache, puppet, vagrant

我正在使用 vagrant/puppet 来配置我的测试机，我正在使用它来为 apache 配置虚拟主机，但是在启动 apache 时出现错误，显然是因为奇怪的间距或字符左右：

```
/apache2 start
 * Starting web server apache2                                                                                                                                                                                                                                            
Syntax error on line 4 of /etc/apache2/sites-enabled/my-ssl.localhost.conf:
Invalid command '\xc2\xa0\xc2\xa0ServerName', perhaps misspelled or defined by a module not included in the server configuration
Action 'start' failed. 
```

我为配置虚拟主机而编写的清单文件如下所示

```
file {'hostfile4':
      path    => '/etc/apache2/sites-available/my-ssl.localhost.conf',
      ensure  => present,
      content => "
<VirtualHost *:443>
  DocumentRoot '/coding/mysite/htdocs/'
  ServerName foa-ssl.localhost
  ServerAlias foa-ssl.localhost
  ErrorLog /var/log/apache2/error.log
  CustomLog /var/log/apache2/access.log combined
  RewriteLog /var/log/apache2/rewrite.log
  RewriteLogLevel 0
    <Directory '/coding/mysite/checkout/htdocs'>
        AllowOverride All
        Options All -Indexes
        Order allow,deny
        Allow from all
        php_admin_value short_open_tag Off
        AddType application/x-httpd-php .css .js
    </Directory>
    <Directory '/coding/mysite/app_new/htdocs'>
        AllowOverride All
        Options All -Indexes
        Order allow,deny
        Allow from all
        php_admin_value short_open_tag Off
        AddType application/x-httpd-php .css .js
    </Directory>
  <Directory '/coding/mysite/cgi-bin'>
    Options +ExecCGI
  </Directory>
  SSLEngine on
  SSLCertificateFile    /etc/ssl/certs/ssl-cert-snakeoil.pem
</VirtualHost>",
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:52:47.143

`c2 a0`（在错误消息中）是特殊字符“不间断空格”的 unicode 代码，参见。[在这里](http://www.utf8-chartable.de/)。

看来apache根本不喜欢那样。所以你必须去掉那些不间断的空格并使用正常的空格，即使它在你的编辑器中看起来是一样的。

您可以使用 NotePad++ 并要求它将您的 puppet 文件转换为“ANSI”，这是一种更安全的配置文件编码。

在将内容移动到外部文件时，您必须在不知情的情况下清除它，但使用外部文件不是解决方案，即使它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:44:48.660

用这个解决了它：

```
file { "/etc/apache2/sites-available/my-ssl.localhost.conf":
    mode => 440,
    owner => root,
    group => root,
    source => "/coding/puppetstuff/my-ssl.localhost.conf"
} 
```

/coding/puppetstuff/foa-ssl.localhost.conf 位于共享文件夹中（路径在图像上）

# database-design - 允许空值的外键列

> ID：12687598
> 
> 赞同：1
> 
> 时间：2012-10-02T09:18:06.320
> 
> 标签：database-design, foreign-keys, relational-database

我需要表示一个名为 E-Report 的表单，用户将在其中添加数据。

每个 E-`Report`都会有一个`QAP`，每个 E- 都会`QAP`有两个或更多`Defects`。

这些缺陷将在此表中显示：

![在此处输入图像描述](../Images/f6ac4844deb5334b99de6b5de524585d.png)

第一次，这个表会有两个缺陷，用户可以从 QAP 中添加更多的缺陷，或者如果他/她认为有必要插入新的缺陷。

用户将检查或不检查`CRS`，和列`CRF`，我会将这些数据保存在表格中。`MA``MI``EReportDefect`

顺便说一句，`QAP`数据`Defect`将在**网络服务**中，我需要将其下载到我的 Android 设备上。我无法修改这两个表以添加更多数据。

为了表示我设计了这个 Visio：

![在此处输入图像描述](../Images/4e00d3a9dce58395c696de31f3f6e32f.png)

因为我无法将数据添加到`Defect`表中，所以我创建了`EReportDefect`表来存储`CRS`、、和用户数据，并存储用户创建的新缺陷`CRF`。`MA``MI`

为了表示`Defect`用户添加的新内容，我设置`EReportDefect.defectId`为 NULL 并`EReportDefect.description`存储新的缺陷描述。

这些新缺陷将没有价值`EReportDefect.defectId`和价值`EReportDefect.description`。

它是否正确？我可以有一个带有 NULL 值的外键列吗？你知道更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:25:28.097

可以为空的外键是完全可以接受的。

考虑以下情况，设计用于由用户响应的消息表。

```
CREATE TABLE Messages 
(
  MessageId int,
  MessageText varchar(256),
  AnsweredByUserId int
) 
```

现在，当第一次创建初始未答复消息时，AnsweredByUserId 将为 NULL。这完全没问题。该消息尚未得到答复，因此我们不希望在其中找到值。

当有人确实回答了消息时，我们希望将他们的 UserId 放入 AnsweredByUserId，并且我们希望在发生这种情况时强制执行引用约束（例如，我们希望确保我们插入的 UserId 确实存在于我们的 Users 表中）。

总之，在正确的情况下有一个 NULLABLE 外键很好。

# .htaccess - .htaccess 将带有和不带有 www 和 https://www 的 http:// 重定向到 https:// 非 www

> ID：12687599
> 
> 赞同：5
> 
> 时间：2012-10-02T09:18:06.663
> 
> 标签：.htaccess, mod-rewrite

我正在寻找重定向所有：

```
http://
http://www.
https://www.

to https:// 
```

这可能已经在这里得到了回答，但是在解决了看起来相关的问题之后，它们都不是我所追求的，而且我尝试过的所有事情都会导致重定向循环或无法按预期工作。

例如：

```
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^www.example.com
RewriteRule ^(.*)$ https://example.com/$1 [R=301,L]

RewriteCond %{HTTPS_HOST} ^example.com
RewriteRule ^(.*)$ https://example.com/$1 [R=301,L] 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T09:30:48.453

尝试：

```
RewriteCond %{HTTP_HOST} !^energenie4u\.co\.uk$ [NC,OR]
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://energenie4u.co.uk/$1 [R=301,L] 
```

# spss - 按患者 ID 汇总，我如何汇总每个患者的每种 X 射线类型的总数？

> ID：12687604
> 
> 赞同：0
> 
> 时间：2012-10-02T09:18:23.267
> 
> 标签：spss

我有这样的数据设置；

患者 ID...X 射线类型...体重

1.......................1..................560

1.......................2..................2400

1.......................2..................1629

2..................................5..................................716

2.......................1..................................936

2.......................5..................................1271

3.......................2.......................1823

3.......................2.......................2100

该数据显示，患者 1 进行了一次胸部 X 光检查（1）和两次腹部 X 光检查（2）等。我想知道是否有可能以某种方式将每位患者的每种 X 光检查数量汇总到不同的变量列中？

我试图实现的输出是这样的：

体重范围 - - - - 平均胸部 X 光片（1 型） - - - - - 平均腹部 X 光片（2 型）

< 750 - - - - - - - - - - - 11 - - - - - - - - - - - - - - - - - - - - - - - - - 15 - - - - - - -

我在想可能是一个中间表，例如：体重范围 - - - 胸部 X 光片数 - - - 胸部 X 光片计数

可能会有所帮助，但我不确定。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:49:14.927

您的数据可能会被重组。由于这是一种相当复杂的方法，您可能不得不将其全部投入其中。最后，您可能会出现类似 Patient Chest Adbdomen....Missing 1 1 2.......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:38:31.087

您可以在这里做很多事情，但一种简单的方法就是这样。首先，将权重变量分成四分位数。为此，请使用 Transform > Visual Binning。它有多种创建垃圾箱的方法。

其次，使用分析 > 比较均值 > 均值并选择您想要的任何统计摘要。

使用您的 bin 变量，您还可以使用拆分文件（数据 > 拆分文件），然后运行频率或其他汇总过程，这些过程将为每个拆分单独计算。

# python - 从python脚本调用firefox时我们可以发布到url吗

> ID：12687616
> 
> 赞同：0
> 
> 时间：2012-10-02T09:19:07.453
> 
> 标签：python, firefox

我有一个 python 脚本，我正在尝试登录某个网站。获得会话 ID 后，我想将一些值发布到 url。这里我使用 os.system() 调用 firefox。我希望 firefox 将值发布到 url 并从那里所有会话都应该在 firefox 本身中维护。

当从 python 脚本/命令行调用 firefox 时，我们可以让 firefox 将值发布到 url 吗？

或者有没有其他方法可以达到同样的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:23:28.967

我推荐你另外两种方法。

首先是[请求](http://docs.python-requests.org/en/latest/)模块。它将保持会话。我已经成功地使用这个模块来保持会话、发布表单等。

**编辑**示例请求代码

```
payload = {'param' : 'value'}
session = requests.session()
session.get(url)
response = session.post(form_url, data=payload) 
```

其次，我不确定你到底想做什么，但如果你想从 Python 自动化 Firefox，你可以考虑[Selenium + Python](http://pypi.python.org/pypi/selenium)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:23:08.763

使用[`webbrowser`模块](http://docs.python.org/library/webbrowser.html)。

> 脚本 webbrowser 可用作模块的命令行界面。它接受一个 URL 作为参数。

# java - 在 Spring MVC Web 应用程序中使用 JSTL 显示列表

> ID：12687622
> 
> 赞同：1
> 
> 时间：2012-10-02T09:19:41.817
> 
> 标签：java, spring-mvc, jstl

.jsp

```
 <c:forEach items = "${allContacts}" var="contact">
            <c:out value="${contact.firstName}"/>,
            <c:out value="${contact.lastName}"/>
     </c:forEach> 
```

联系服务.java

```
 public static List listContacts() {
        return toList(contacts);

    }

    private static List toList(Map contacts) {
        List contactList = new ArrayList();
        Iterator iterator = contacts.entrySet().iterator();
        while (iterator.hasNext()) {
            Map.Entry entry = (Map.Entry) iterator.next();
            Contact contact = (Contact) entry.getValue();
            contactList.add(contact);
        }
        return contactList;
    } 
```

ListContactsController.java

```
public class ListContactsController extends AbstractController {

    public ListContactsController() {
    }

    public ModelAndView handleRequestInternal(HttpServletRequest request,
            HttpServletResponse response) throws Exception {

        List allContacts = ContactService.listContacts();

        return new ModelAndView("ListContacts","allContacts", allContacts);
    }
} 
```

我正在尝试列出`allContacts`，但仅显示“，”作为输出。数据显示在 GET 中，但不显示在网页中。问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:23:43.007

您可能没有`allContacts`在控制器中添加对象：

```
session.setAttribute("allContacts", allContactsVariable); 
```

@Ralph 的评论：

由于打印出逗号，这意味着列表中存在对象，但对象的字段中没有值。

您是否尝试在 GET 之后添加值？例如，`contact1.setFirstName("value");`或`contact.setLastName("value")`

# java - 如何在 Java 应用更新期间实现向后兼容？

> ID：12687632
> 
> 赞同：2
> 
> 时间：2012-10-02T09:20:11.593
> 
> 标签：java, design-patterns

我遇到了在应用更新期间保持向后兼容性的问题。我有一个客户端-服务器架构，客户端向服务器发送一些信息，并作为响应接收最新数据。在下一个版本的应用程序中，添加了一些新的字段和方法。如果我使用旧客户端版本，服务器上可能会出现一些错误（如空指针或不正确的工作流程）。我可以检查 null 的新功能，但是当有 3-4 个不同版本的客户端时 - 我们会有意大利面条代码和许多潜在的隐藏错误。

是否有任何设计模式可以帮助解决这个问题？如何对不同的客户端版本做出反应？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:25:59.837

试试这种方法：在每个客户端消息的登录消息中添加一个版本字段。

如果您没有会话，则后者有效。如果缺少版本字段，您就知道它是“版本 0”。

在服务器上，根据版本字段向处理程序发送消息。许多处理程序可以拆分为一个抽象基类，该基类处理常见情况以及每个消息版本的简单扩展。

这使您可以避免意大利面条式代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T09:22:06.593

我想看看[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)。这可以用来使不同的类一起工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:45:52.887

一些技巧：

*   **为消息的新版本**添加版本号。**这会有很大帮助！**
***   **为每个消息版本**创建验证例程。**这有多种用途：您可以根据声明的版本号验证消息是否确实正确，您可以计算出没有版本号的消息的版本，您可以在运行时验证输入，这将有所帮助你与测试。针对 XML 模式进行验证可能对此很有用。*****   **尽早处理消息版本**- 即，一旦您的代码在收到消息后看到消息。越早解决版本问题，处理多个版本所需的代码库就越少。*   **如果可能，将旧版本消息转换为新版本消息**- 这通常很简单（可能添加几个具有默认值的字段），并且意味着您的代码库的其余部分可以假设新版本消息（并且您有验证程序来证明它，对吗？？）*   **仅作为最后的手段：为不同的消息版本编写自定义处理程序**- 如果不同客户端版本之间的业务逻辑发生重大变化，这可能是必要的。****

# c++ - 如何在 C++ 中获得可变的函数参数结构？

> ID：12687634
> 
> 赞同：1
> 
> 时间：2012-10-02T09:20:16.417
> 
> 标签：c++, c

我的问题与 C++ 函数中的参数有关。有时，您可能期望一个函数可以接受不同类型的参数，据我所知，这可以通过两种方式实现。一种是使用C++新特性：函数重载（多态），另一种是使用'C'函数方式，如下例所示：

```
struct type0
{
    int a;
};

struct type1
{
    int a;
    int b;
};

struct type2
{
    int a;
    int b;
    int c;
};

void fun(int type, void *arg_structure)
{
    switch (type)
    {
    case 0:
        {
            struct type0 *mytype = (struct type0 *)(arg_structure);
            cout<<"a = "<<mytype->a<<endl;
            break;
        }

    case 1:
        {
            struct type1 * mytype= (struct type1 *)(arg_structure);
            cout<<"b = "<<mytype->b<<endl;
            break;
        }
    case 2:
        {
            struct type2 *mytype = (struct type2 *)(arg_structure);
            cout<<"c = "<<mytype->c<<endl;
            break;
        }
    default:
        break;
    }
}

int main () 
{
    struct type2 temp;
    temp.a = 1;
    temp.b = 2;
    temp.c = 3;
    fun(2,(void*)(&temp));

    return 0;
} 
```

我的问题是：还有其他方法可以在 C++ 中获得可变的函数参数结构吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T09:24:01.637

当您要求“可变参数结构”而不是“可变参数类型”时，我假设您要求在参数类型和数量方面具有灵活性。

如果是这样，您可以使用[可变参数函数](http://cplus.about.com/od/learningc/ss/clessonsix_5.htm)：

```
void fn ( int cnt_params, ... ) {...} 
```

或者，如果您有支持 C++11 的编译器，[可变参数模板](http://insanecoding.blogspot.com/2010/03/c-201x-variadic-templates.html)：

```
template <typename T, typename ...P>
void fn (T t, P ...p) {....} 
```

否则，您可以使用其他人已经建议的重载或模板。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T10:09:57.920

C++中有几种方法可以将不同类型的参数传递给同一个函数。首先，您必须决定何时确定参数的实际类型——在编译时还是在运行时？根据此决定，您可以使用适当的方法来传递它：

**对于编译时（静态）参数类型**：

*   [函数重载](http://en.wikipedia.org/wiki/Function_overloading)
*   [函数模板](http://en.cppreference.com/w/cpp/language/function_template)

这些方法是类型安全的，必须优先使用。

**对于运行时（动态）参数类型**：

*   [`boost::variant`](http://www.boost.org/doc/html/variant.html)
*   [`boost::any`](http://www.boost.org/doc/html/any.html)
*   [工会](http://en.cppreference.com/w/cpp/language/union)
*   [可变函数](http://en.cppreference.com/w/cpp/utility/variadic)
*   [`dynamic_cast`](http://en.cppreference.com/w/cpp/language/dynamic_cast)（关于多态基类型指针/或引用）
*   [`static_cast`](http://en.cppreference.com/w/cpp/language/static_cast)（在指针上`void`）

我想推荐使用`boost::variant`或`boost::any`他们提供的类型安全。其他方法不是类型安全的，通常被认为是糟糕的设计决策。除非你真的需要，否则不要使用它们——或者更好地改进你的设计以避免它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:32:43.087

你混淆了一些事情。函数重载与多态完全不同。

还有另一种 c 方式是变量参数列表。[在这里](http://publications.gbdirect.co.uk/c_book/chapter9/stdarg.html)举例说明。我相信`printf()`兄弟情谊是使用这种机制实现的。

在`c++`您可以使用几乎任何容器，例如`std::vector`或设置来代替数组，`std::map<string,Type>`对于命名参数也可能很好。

如果您需要一组混合类型，您可以使用 boost [`tuples`](http://www.boost.org/doc/libs/1_51_0/libs/tuple/doc/tuple_users_guide.html)（如果需要，可以重载）。

`c++`模板机制可能有用。

我认为标准容器、元组、模板和重载以及它们的组合涵盖了处理参数的 99% 的用例。

# android - 使用 eclipse 3.7 在 android 应用程序中创建网站需要什么？

> ID：12687637
> 
> 赞同：-2
> 
> 时间：2012-10-02T09:20:24.447
> 
> 标签：android, web

如果我想使用 eclipse 3.7 在 android 应用程序中创建网站，那么我需要什么？

我有 eclipse 3.7.0 和 android 2.2 AVD。

我有一个已经存在的网站，但是当用户使用手机时，他必须显示手机视图，所以我首先要做什么？

是否需要html5和css？如果是，那么我该如何使用它？

像 ![这是我想做的一个例子](../Images/563cc403fa32b1645a73030b0e016449.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:24:41.320

你想拥有原生应用吗？您想要用户可以从 Playstore 下载的应用程序并且该应用程序将显示您的网站吗？如果是这样，您可以创建简单的 android 应用程序并作为视图使用 webview。在此 webview 中，您可以从 url 或本地文件加载网站。

您还可以查看[phonegap](http://phonegap.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:31:05.723

如果你真的想拥有一个原生 Android 应用程序（只能在 Android 设备上运行），[这个](http://developer.android.com/training/index.html)网站将是一个很好的起点。

此外，首先尝试编写一些简单的“示例”应用程序来学习该语言。

# msbuild - MSBuild 错误 - 解决方案是当前不支持的 12.00 版

> ID：12687643
> 
> 赞同：2
> 
> 时间：2012-10-02T09:21:26.630
> 
> 标签：msbuild, visual-studio-2012, .net-4.5

我有一个`TFS 2010`安装了构建服务的构建服务器。我配置了 2 个构建代理和 1 个控制器。我们的一个项目已转换为`Visual Studio 2012`.

我发现它`.NET framework 4.5`带有新版本，`MSBuild`即 4.5 版。

我安装`.NET framework 4.5`了`Build Server`因为在每次构建项目时安装它之前我一直收到以下错误：

**“解决方案是当前不支持的版本‘12.00’”。**

安装后`.NET 4.5`，我仍然遇到同样的问题。

我该如何解决这个问题？

我是否必须配置构建代理以使用新`MSBuild 4.5`的来构建这个特定的项目，或者我是否在项目解决方案文件本身中设置了一些东西？如果有怎么办？

如果有人可以帮助我，我真的很感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:25:43.493

尝试在构建服务器上安装 vs2012，虽然我不认为它是严格需要的，但它是安装所有要求的最简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:04:57.067

我们已经在构建代理上安装了 VS2012。有趣的是，当我 RDC 到构建代理然后从命令行运行 msbuild 时，一切正常。所以这个问题看起来就像在我们到达 MSBuild 之前就已经发生了。

# c# - 为什么没有调用第二个单点触控视图控制器工具栏按钮事件处理程序

> ID：12687646
> 
> 赞同：2
> 
> 时间：2012-10-02T09:21:32.710
> 
> 标签：c#, uiviewcontroller, event-handling, uibarbuttonitem, uitoolbar

我有一个带有 RootViewController 的 monotouch 项目，它初始加载了视图控制器：-

```
this.AddChildViewController( secondViewController );
this.AddChildViewController( firstViewController );
View.AddSubview( firstViewController.View  );
firstViewController.DidMoveToParentViewController( this ); 
```

每个 viewController 都包含一个工具栏，其按钮添加如下：

```
loaderButton  = new MonoTouch.UIKit.UIBarButtonItem( UIBarButtonSystemItem.Action, loaderClickHandler ); 
```

或者

```
closeButton   = new MonoTouch.UIKit.UIBarButtonItem( "Close", UIBarButtonItemStyle.Done, new EventHandler( closeClickHandler ) ); 
```

loaderClickHandler 只是：

```
private void loaderClickHandler( System.Object sender, System.EventArgs e )
{
  System.Console.WriteLine( "loaderClickHandler()" );
} 
```

这一切都很好，（但是如果有更好的方法，请告诉我）问题来自第二个视图控制器（它与第一个基本相同，只是文本不同）。

当它被 RootViewController 切换到时：

```
this.Transition( firstViewController, secondViewController, 0.2, UIViewAnimationOptions.TransitionCrossDissolve, () => {  }, (bool finished) => { secondViewController.DidMoveToParentViewController( this ); } ); 
```

它显示正常，但它的工具栏按钮在单击/触摸时不调用事件处理程序方法？
所有变量（loaderButton）都是类级别的。

有人知道为什么吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:13:30.647

哦！

当您在任何其他项目之后添加工具栏时，它会有所帮助！

# .htaccess - 使用 .htaccess 进行编码

> ID：12687647
> 
> 赞同：0
> 
> 时间：2012-10-02T09:21:40.573
> 
> 标签：.htaccess, mod-rewrite, encoding, iis-7, rewrite

要访问我网站中的页面，我使用此规则

```
^/map/(.+)\-([0-9]{1,5})/map-.+\-street\-([a-z])\.html$ 
```

我使用的链接是`www.mydomain.com/map/neus%e4%df-86/map-neus%e4%df-street-a.html`. 当我检查 IIS7 重写日志时，链接将转换为
`/map/neusä߆/map-neusäß-street-a.html`，当然我得到了 404 错误。

所以，我的问题是，为什么要`neus%e4%df-86`转换为`neusä߆` 而不是`neustäß`
（PS page-s 编码是 charset=iso-8859-1）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:51:16.120

所以，我找到了解决方案。[NE] 标志未在规则末尾设置。与 Helicon 的文档相关，`"NE: Don't escape output. By default ISAPI_Rewrite will encode all non-ANSI characters as %xx hex codes in output."`这种方式链接保持未编码。

# c# - C#解析以下XML，不知道如何

> ID：12687648
> 
> 赞同：1
> 
> 时间：2012-10-02T09:21:43.637
> 
> 标签：c#, xml, parsing, xmlreader

我有以下 XML 示例：

```
string xml =
@"<plist version='1.0'>
    <dict>
        <key>DataType</key>
        <string>Employee</string>
        <key>8000</key>
        <dict>
            <key>Id</key>
            <string>8000</string>
            <key>Prename</key>
            <string>Walter</string>
            <key>Name</key>
            <string>Walter Lohner Stans</string>
            <key>Initials</key>
            <string>MAL</string>
        </dict>
        <key>8001</key>
        <dict>
            <key>Id</key>
            <string>8001</string>
            <key>Prename</key>
            <string>Motorrad</string>
            <key>Name</key>
            <string> Meierskappel</string>
            <key>Initials</key>
            <string>MAM</string>
        </dict>
        <key>8004</key>
        <dict>
            <key>Id</key>
            <string>8004</string>
            <key>Prename</key>
            <string>Hanspeter</string>
            <key>Name</key>
            <string>Altenbürger AG  Horgen</string>
            <key>Initials</key>
            <string>FH</string>
        </dict>
    </dict>
</plist>"; 
```

我想将这 3 名员工列为列表...

Class Employee 也被定义：

```
//Class
public class Employee
{
    //Properties    
    public string Id { get; set; }
    public string Prename { get; set; }
    public string Name { get; set; }
    public string Initials { get; set; }
} 
```

如果我现在想将 xml 传递给一个方法并希望有一个包含这 3 个员工的列表（类型为员工），那么解析现在是如何工作的？

我开始做这样的事情：

```
public List<Employee> GetEmployees(string xml)
{
    using (XmlReader reader = XmlReader.Create(new StringReader(xml)))
    {

    }
} 
```

但实际上我不知道如何遍历所有这些描述一名员工以及一般如何处理的“dicts”。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:32:48.160

[`XmlSerializer`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)这听起来有点像您可以通过使用该[`Deserialize()`](http://msdn.microsoft.com/en-us/library/dk9cbaf1.aspx)方法受益。

以下是一些显示示例的链接：

[C# - 如何 xml 反序列化对象本身？](https://stackoverflow.com/questions/1081325/c-sharp-how-to-xml-deserialize-object-itself)

[C# 将 XML 反序列化为对象](https://stackoverflow.com/questions/4085529/c-sharp-deserialize-xml-to-object)

我认为这是一种可能的方式，否则您可以将其解析为[`XDocument`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)或[`XmlDocument`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)使用 XPath 浏览文档。顺便说一下，你可以使用[`Load()`](http://msdn.microsoft.com/en-us/library/875kz807.aspx)on 方法`XmlDocument`来加载一串 XML

```
 string xmlString = "<root><sub></sub></root>";
    XmlDocument doc = new XmlDocument();
    doc.Load(xmlString); 
```

或将一串 XML 加载到对象中的[`Parse()`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.parse.aspx)方法。`XDocument`

```
string str =
    @"<Root>
        <Child>Content</Child>
    </Root>";
    XDocument doc = XDocument.Parse(str); 
```

不确定要使用哪种技术，请看这里：

[XDocument 或 XmlDocument](https://stackoverflow.com/questions/1542073/xdocument-or-xmldocument)

我什至设法从 Google 中找到一个可以帮助您入门的示例：http: [//www.codeproject.com/Articles/169598/Parse-XML-Documents-by-XMLDocument-and-XDocument](http://www.codeproject.com/Articles/169598/Parse-XML-Documents-by-XMLDocument-and-XDocument)

另一种方法是使用 Linq2Xml 技术，这里还有另一个问题，它将向您展示它是如何实现的：

[在 C# 中使用 XmlReader 读取 Xml](https://stackoverflow.com/questions/2441673/reading-xml-with-xmlreader-in-c-sharp)

这是答案所基于的博客文章：

[http://blogs.msdn.com/b/xmlteam/archive/2007/03/24/streaming-with-linq-to-xml-part-2.aspx](http://blogs.msdn.com/b/xmlteam/archive/2007/03/24/streaming-with-linq-to-xml-part-2.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:33:37.970

我建议你这样的东西对你有用。

```
string xmlpath = "D:\new\test.xml";   

XmlDocument doc = new XmlDocument();
doc.Load(xmlpath);
XmlElement root = doc.DocumentElement;
XmlNodeList employ = root.GetElementsByTagName("Employee");
list<employee> employees=new <employee>();

foreach (XmlElement emp in employ)
{
    string id = emp.GetAttribute("id");
    string name = emp.GetAttribute("name");
    string desc = emp.GetAttribute("Prename");

    Employee e=new employee();
    e.id=id;
    e.Prename =desc;
    e.Name=name;
   employees.add(e);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:38:48.073

使用 LINQ2XML ..**很酷**

```
XElement doc=XElement.Parse(".......");

var yourList=doc.Descendants("dict").Descendants("dict").Select(
x=>new Employee
{
Id=x.Elements("string").ElementAt(0).Value,
Prename=x.Elements("string").ElementAt(1).Value,
Name=x.Elements("string").ElementAt(2).Value,
Initials=x.Elements("string").ElementAt(3).Value
}
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T09:38:19.993

尝试使用这样的东西：

```
XmlDocument x=new XmlDocument();
x.LoadXml(xml);

foreach (XmlNode x1 in x.SelectNodes("//dict"))
{
    string Id=x1.SelectSingleNode("dict[key[text()='Id']]/string").InnerText;
} 
```

# c# - 如何识别 TIFF 图像文件中特定图标文本的字符

> ID：12687653
> 
> 赞同：0
> 
> 时间：2012-10-02T09:21:56.613
> 
> 标签：c#, ocr, tiff

在识别 TIFF 图像中的字符时，可以使用 OCR 方法读取字符，MODI 但在读取特定文本格式时，它不会读取确切的字符并显示一些未知字符。

假设这是 TIFF 图像文件中的文本格式，我怎样才能清楚地阅读下图中的字符？

有什么方法可以再次识别和显示确切的字符？![样本.tif](../Images/deb7f4cc025d7d479e436e4ea64b925f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:56:52.577

图像分析和 OCR 始终是一门软科学，因为它可能在一个实例上工作而在另一个实例上失败。

您可以在执行 OCR 之前应用一些过滤器吗？您可以尝试预先模糊图像以柔化虚线背景的影响，然后对图像执行 OCR。

# algorithm - 网络流算法

> ID：12687664
> 
> 赞同：2
> 
> 时间：2012-10-02T09:22:41.867
> 
> 标签：algorithm

我有这样的问题：

我们得到一个二分图。例如

```
A1 B1
A2 B2
A3 B3
A4 
```

这是邻接表表示（假设图是双向的）

```
B1 -> A2, A3
B2 -> A2, A3, A4
B3 -> A1 
```

最终结果应该是左侧 (As) 中的所有节点恰好有 1 个传入边，同时 - 我们需要最小化需要从单个 Bs 节点出来的最大边数。在这种情况下，答案将是：

```
B3 can connect to A1
B2 can connect to A2, A4
B1 can connect to A3 
```

所以这里需要从单个 Bs 节点出来的最大边数是 2。我们不能覆盖所有 As，同时有一个 B 节点没有 2 个边从它出来覆盖 As。

另一个例子：

```
A1 B1
A2 B2
A3 B3
A4 B4

B1 -> A1, A2, A3
B2 -> A1, A2, A3, A4
B3 -> A1, A2, A3
B4 -> A1, A2, A3 
```

在这种情况下，答案将是：

```
B1 can connect to A1
B2 can connect to A4
B3 can connect to A3
B2 can connect to A2 
```

这样，我们将只覆盖所有 A 一次，同时我们最小化了需要从单个 B 中取出的最大边数。所以这里需要从单个 Bs 节点出来的最大边数是 1。

另一个例子：

```
A1 B1
A2 B2
A3 B3
A4
A5
A6

B1 -> A6
B2 -> A1, A2, A3, A4, A5
B3 -> 
```

在这种情况下，答案将是 5，即需要从单个 B 中取出的最大边数是 5。不能少于这个数。

我已经实现了基本的福特富尔克森算法，我知道这也是网络流，但不知道如何与之相关。

如果有人可以对图表提供一些提示，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:31:57.413

找到一个最佳解决方案 - 所有 B 最多有一个出边（如果存在的话）很简单：

*   向图中添加源和汇。源对于 B 的列表中的所有顶点将具有容量为 1 的出边。
*   所有`(B,A)`边的容量都为 1。
*   所有 A 将有一个外边，其容量为 1 到水槽。
*   现在，运行流算法将产生 A 中的最大顶点数，每个 B 只有一条出边可以覆盖这些顶点（最优解，如果存在）

* * *

**编辑：**

现在，基于上述想法，并且由于您试图最小化从单个 B 到 A 的**最大边数**（而不是它们的总数，正如我之前认为的那样），最佳解决方案很简单：

```
while there is no coverage:
   set capacity(source,b_k) = increase_size() (for each b_k in B)
   run max flow algorithm on the graph suggested above
return last flow found 
```

复杂性是`O(E*V*#iterations)`（在这个问题`f <= V`中，如果福特-富尔克森是复杂性`O(EV)`），`#iterations`可以在您寻求的最小最大数中线性完成，或者使用指数增加，然后在范围上进行二进制搜索（如 Evkeny Kluev 所建议的），在这个号码的日志中。
由于`E=O(V)`在二部图中，我们得到总数`O(V^2*log(V))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T09:39:41.147

将所有 A 连接到一个具有容量 1 边的公共汇节点。将所有 B 连接到一个具有可变容量边的公共源节点`C`。

在这个图中找到最大的网络流量，`C`当不是每个 A 都被覆盖时增加，否则减少它。这意味着找到`C`使用二进制搜索的最佳值。

# jquery - 从外部页面刷新 div

> ID：12687665
> 
> 赞同：0
> 
> 时间：2012-10-02T09:22:41.877
> 
> 标签：jquery, html, refresh, external

我试图用一些示例代码来解释我想如何实现这一点，但我无法使其易于理解，因此我有一张描述问题的图像。

我不需要任何代码来实现这一点，我想要关于如何解决这个问题的方法的建议，如果它甚至可以这样做的话。否则，也许还有另一种方法可以做同样的事情。我已经用谷歌搜索了好几天，但没有找到任何示例代码。我只会找到如何从主页刷新 div1 和 div2 的示例。

下面是解释问题的图像。加载主页时，两个 div 将另外两个文件加载到自身中。是否可以从另一个 div 中加载的另一个页面刷新其中一个 div？

谢谢！

图片：http: [//i.stack.imgur.com/Cav7P.jpg](http://i.stack.imgur.com/Cav7P.jpg)

更新：我试图从 div1.php 调用这个放在 main.php 中的函数

```
function updateGroupMembers(id,groupId,action) {
// forming the queryString var data = 'id='+ id + '&groupId='+ groupId + '&action='+ action;
// if searchString is not empty if(id) {
// ajax call $.ajax({
type: "POST",
url: "div2.php",
data: data,
success: function (html) {
$('#div2').html(html);
$('#div2').fadeIn(2000);
},
}); 
}
 return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:30:14.427

是的，这是可能的...只需使用您在加载页面时使用的相同方法..这取决于您将使用什么事件..

只是一个示例代码

```
$('#div1').click(function(){  
   $('#div2').html('new content') 
}); 
```

# c# - 透明表格上的透明背景图像

> ID：12687669
> 
> 赞同：0
> 
> 时间：2012-10-02T09:22:51.013
> 
> 标签：c#, winforms, background-image, transparent

好吧，我正在将 TransparencyKey 设置为与 BackColor 相同，但不会完全透明，这里有一张图片：

![在此处输入图像描述](../Images/85ec261a4a9f37ca78813338de352ff6.png)

如何使表单完全透明以将 BackgroundImage 设置为透明的 Back-Colored .png？希望有人可以帮助我（我一直有这个疑问）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:53:01.657

应该是背景图像上的`TransparencyKey`颜色，而不是表单本身的颜色。因此，您不能将 设置`TransparencyKey`为表单，`BackColor`因为表单不是它自己的背景图像。
我已经阅读了很长时间，但我会发布一个参考链接，因为我找到了它。我相信它在 MSDN 上。

# gradle - gradle war：如何强制包含传递提供的 dep？

> ID：12687672
> 
> 赞同：1
> 
> 时间：2012-10-02T09:23:03.477
> 
> 标签：gradle

有这个`build.gradle`：

```
apply plugin: 'war'

repositories {
    mavenCentral()
    maven { url "http://repository.jboss.org/nexus/content/groups/public" }
}

configurations {
    providedCompile {
        exclude module: 'commons-httpclient' // here it doesn't work
    }
}

dependencies {
    compile 'commons-httpclient:commons-httpclient:3.1'

    providedCompile ('org.jboss.resteasy:resteasy-jaxrs:2.3.3.Final') {
        //exclude module: 'commons-httpclient' // here it works
    }
} 
```

我希望有这场战争：

```
WEB-INF/
WEB-INF/lib/
WEB-INF/lib/commons-httpclient-3.1.jar 
```

但只有这个：

```
WEB-INF/ 
```

如果我取消评论 2nd`exclude`并评论 1st `exclude`，它会根据需要工作。

如果这是预期的行为，我如何才能从提供的库中全局排除特定的传递？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T10:08:00.800

事实证明，这是发生的“正确”事情，`compile`实际上从`providedCompile`：

```
apply plugin: 'war'

configurations.compile.extendsFrom.each {
    println "$it"
} 
```

所以，我的解决方案如下：

```
apply plugin: 'war'

repositories {
    mavenCentral()
    maven { url "http://repository.jboss.org/nexus/content/groups/public" }
}

configurations {
    forceInclude {}
}

dependencies {
    providedCompile 'org.jboss.resteasy:resteasy-jaxrs:2.3.3.Final'

    forceInclude 'commons-httpclient:commons-httpclient:3.1'
}

war {
    classpath += configurations.forceInclude
} 
```

# c# - 进度条没有使用后台工作程序进行

> ID：12687675
> 
> 赞同：1
> 
> 时间：2012-10-02T09:23:07.087
> 
> 标签：c#, multithreading, backgroundworker

我正在使用后台工作人员更新 sqlserver 中的一些表。进度条最大值被设置为正确的值，进度条的值正在递增，backgroundworker progresschanged 正在以正确的值正确调用，但进度条没有进展。

这是 background_dowork 方法中表单的代码，有一个循环调用 updateProgressBarValue，它使用正确的值。

```
public InterfaceConvertLonLat()
{
    InitializeComponent();
    Shown += new EventHandler(Form1_Shown);
    backgroundWorker1.WorkerReportsProgress = true;
    backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
    backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
}

public void ConvertLonLat_Load(object sender, EventArgs e)
{ 
}

public void updateProgressBarValue()
{
    progressBar1.Value++;
    backgroundWorker1.ReportProgress(progressBar1.Value);
}

public void setProgressBarMax(int max)
{
    progressBar1.Maximum = max;
    MessageBox.Show("setprogressbarmax " + max);
}

public void Form1_Shown(object sender, EventArgs e)
{     
    backgroundWorker1.RunWorkerAsync();
}

public void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    convert.OSGB36ToWGS84("paf");
}

public void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    progressBar1.Value = e.ProgressPercentage;
} 
```

这是另一个调用 updateprogressbarvalue 的类中包含的循环，它正在被触发，并且如前所述 backgroundworker1_progressChanged 正在被触发，但条没有移动。

```
con.setProgressBarMax(address.Tables[0].Rows.Count); 

foreach (DataRow LonLat in address.Tables[0].Rows)
{
    con.updateProgressBarValue();
    Double lon = 0;
    Double lat = 0;
    lat = Convert.ToDouble(LonLat["LTO"]);
    lon = Convert.ToDouble(LonLat["LGO"]);
    LocalToWGS84(ref lat, ref lon, OGB_M);

    cmd1.Parameters["@LTW"].Value = lat;
    cmd1.Parameters["@LGW"].Value = lon;

    string dbQuery1 = "update " + tableName + " set LTW = @LTW, LGW = @LGW";

    cmd1.CommandText = (dbQuery1);
    cmd1.CommandType = CommandType.Text;
    cmd1.Connection = conn;
    cmd1.ExecuteNonQuery();
}
}
catch (Exception e)
{
    MessageBox.Show("error converting: " + e.Message);
}
finally
{
    conn.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:00:29.400

报告进度时，您需要从后台工作人员触发一个事件来告诉进度条它需要更新。这可以使用以下方法完成：

```
backgroundWorker1.ReportProgress(10); 
```

将值更改为您需要的值，以证明您的代码取得了更大的进步。进度更改事件将主要在与您的 GUI 相同的线程上运行，因此您应该没有跨线程问题。一个例外是，如果您的表单是通过插件从 Excel 调用的，在这种情况下 Excel 将位于主线程上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:19:17.487

你有很多问题——你`UpdateprogressBarValue()`只是增加了进度条的值，但没有跟踪它被调用的次数/当前值是多少——所以如果你调用它 101 次（假设范围为0-100)，你会得到一个`OutOfRangeException`

您的`DoWork()`方法似乎根本没有调用更新（直接或通过引发事件）。

您*可以*使用事件来执行此操作，但最好使用委托或匿名函数。就像是...

```
public void setProgress(int value) {
    progressBar1.invoke(delegate{ progressBar1.Value = value; }
} 
```

然后只需`setProgress(0)`从`setProgress(progressBar1.MaxValue)`您的`DoWork()`方法中调用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T11:48:45.203

以下是严重错误的：

```
public void updateProgressBarValue()
{
    progressBar1.Value++;   // not thread-safe
    backgroundWorker1.ReportProgress(progressBar1.Value);

} 
```

`ReportProgress()`旨在被称为表单 DoWork，它甚至不应该读取 Control 属性。
您应该在 foreach 循环中维护一个计数器并将其提供给进度机制。

现在这并不能直接表明它为什么不移动，但您没有 Completed 处理程序。你确定这个过程已经完成了吗？

如果您的 DoWork 出现异常，您将永远不知道发生了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T09:00:22.083

```
private void Form1_Load(object sender, System.EventArgs e)
{
    // Start the BackgroundWorker.
    backgroundWorker1.RunWorkerAsync();
}

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    for (int i = 1; i <= 100; i++)
    {
    // Wait 100 milliseconds.
    Thread.Sleep(100);
    // Report progress.
    backgroundWorker1.ReportProgress(i);
    }
}

private void backgroundWorker1_ProgressChanged(object sender, progress e)
{
    // Change the value of the ProgressBar to the BackgroundWorker progress.
    progressBar1.Value = e.ProgressPercentage;
    // Set the text.
    this.Text = e.ProgressPercentage.ToString();
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-02T09:29:18.330

我认为这可能是由于 Windows 窗体中的 UI 在其自己的线程/上下文中运行的事实引起的。在这种情况下，您可能需要使用`Invoke`来对 UI 进行调整。

像这样的东西：

```
public void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    Invoke(new ProgressDelegate(UpdateProgress), e.ProgressPercentage);
}

delegate void ProgressDelegate(decimal value);

private void UpdateProgress(decimal value)
{
    progressBar1.Value = value;
} 
```

# c# - 删除重复的所有行（不同于不同的行选择）

> ID：12687681
> 
> 赞同：-1
> 
> 时间：2012-10-02T09:23:25.647
> 
> 标签：c#, datatable, duplicates

如何根据重复的两列的值删除 DataTable 中的每个重复行。不幸的是，我找不到等效的 LINQ 查询。（我什至不想要不同的值）。下表将解释我的问题

我想根据 Column_A 和 Column_B 删除重复的每一行

COLUMN_A COLUMN_B COLUMN_C COLUMN_D.....
A B
C D
E F
G H
A B
E F

预期输出：

COLUMN_A COLUMN_B COLUMN_C COLUMN_D.....
C D
G H

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T09:35:57.320

```
var rowsToDelete = dataTable.AsEnumerable()
    .GroupBy(r => new{A=r["COLUMN_A"],B=r["COLUMN_B"]})
    .Where(g => g.Count() > 1)
    .SelectMany(g=>g)
    .ToList();

foreach (var row in rowsToDelete)
{
    dataTable.Rows.Remove(row);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:30:34.657

您可以尝试使用此示例

链接： http: [//geekswithblogs.net/ajohns/archive/2004/06/24/7191.aspx](http://geekswithblogs.net/ajohns/archive/2004/06/24/7191.aspx)

编码

```
private static void RemoveDuplicates(DataTable tbl,
                                             DataColumn[] keyColumns)
        {
              int rowNdx = 0;
              while(rowNdx < tbl.Rows.Count-1)
              {
                    DataRow[] dups = FindDups(tbl, rowNdx, keyColumns);
                    if(dups.Length>0)
                    {
                          foreach(DataRow dup in dups)
                          {
                                tbl.Rows.Remove(dup);
                          }
                    }
                    else
                    {
                          rowNdx++;
                    }
              }
        }

        private static DataRow[] FindDups(DataTable tbl,
                                          int sourceNdx,
                                          DataColumn[] keyColumns)
        {
              ArrayList retVal = new ArrayList();

              DataRow sourceRow = tbl.Rows[sourceNdx];
              for(int i=sourceNdx + 1; i<tbl.Rows.Count; i++)
              {
                    DataRow targetRow = tbl.Rows[i];
                    if(IsDup(sourceRow, targetRow, keyColumns))
                    {
                          retVal.Add(targetRow);
                    }
              }
              return (DataRow[]) retVal.ToArray(typeof(DataRow));
        }

        private static bool IsDup(DataRow sourceRow,
                                  DataRow targetRow,
                                  DataColumn[] keyColumns)
        {
              bool retVal = true;
              foreach(DataColumn column in keyColumns)
              {
                    retVal = retVal && sourceRow[column].Equals(targetRow[column]);
                    if(!retVal) break;
              }
              return retVal;
        } 
```

测试

```
 // create an example datatable with duplicate rows
              DataTable tbl = new DataTable();

              tbl.Columns.Add("ColumnA");
              tbl.Columns.Add("ColumnB");
              tbl.Columns.Add("ColumnC");
              for(int i = 0; i<10; i++)
              {
                    DataRow nr = tbl.NewRow();
                    nr["ColumnA"] = "A" + i.ToString();
                    nr["ColumnB"] = "B" + i.ToString();
                    nr["ColumnC"] = "C" + i.ToString();
                    tbl.Rows.Add(nr);
                    // duplicate
                    nr = tbl.NewRow();
                    nr["ColumnA"] = "A" + i.ToString();
                    nr["ColumnB"] = "B" + i.ToString();
                    nr["ColumnC"] = "C" + i.ToString();
                    tbl.Rows.Add(nr);
              }

              PrintRows(tbl); // show table with duplicates

              //Create an array of DataColumns to compare
              //If these columns all match we consider the
              //rows duplicate.
              DataColumn[] keyColumns =
                          new DataColumn[]{tbl.Columns["ColumnA"],
                                           tbl.Columns["ColumnA"]};

              //remove the duplicates
              RemoveDuplicates(tbl, keyColumns); 
```

# c# - 如何将表驱动方法与委托和字典一起使用？

> ID：12687683
> 
> 赞同：0
> 
> 时间：2012-10-02T09:23:30.810
> 
> 标签：c#, design-patterns, delegates, table-driven

嗨，如果比较，我已经筋疲力尽了。和切换案例方法。我已阅读以下问题：

[最佳表/枚举驱动方法调用系统](https://stackoverflow.com/questions/214017/best-table-enum-driven-method-calling-system)

这个用法很好。看看维维克的回应。

我的用法如下，但我不能这样。

```
 namespace DelegateKavrami
{
    class Program
    {
        static void Main(string[] args)
        {

            new MyTest().Run();
            Console.Read();
        }

    }

    public class MyTest
    {
        public void Run()
        {
            MyMessageProcessor myProcessor = new MyMessageProcessor();
            myProcessor.Register(0, Sms);
            myProcessor.Register(1, Mms);
            myProcessor.ProcessMessage(1, Message.Sms);

        }
        public void Sms(Message message)
        {
            Console.WriteLine("Sms olarak gönderilen mesaj");
        }
        void Mms(Message message)
        {
            Console.WriteLine("Mms olarak gönderilen mesaj:");
        }

    }

    public class MyMessageProcessor
    {
        public delegate void ProcessMessageDelegate(Message message);

        Dictionary methods;

        public void Register(int messageType,
                              ProcessMessageDelegate processMessage)
        {
            methods[messageType] = processMessage;
        }

        public void ProcessMessage(int messageType, Message message)
        {
            if (methods.ContainsKey(messageType))
            {
                methods[messageType](message);
            }
        }
    }

    public enum Message
    {
        Sms,Mms
    }

} 
```

但我的梦想

### myProcessor.ProcessMessage(1)

我怎么能用这个？上述代码运行后出错：对象引用未设置为对象的实例。ON 方法[messageType] = processMessage;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:51:14.660

稍微重构你的代码，而不是使用委托，*模板模式*应该更好：

```
public enum messageType
{
    Sms, Mms
}

public class Message
{
    public MessageType MessageType { get; get; }
    public string Data { get; set; } // assume data to be processed
}

interface IHandler
{
    void Process(Message message);
}

class SmsHander : IHandler
{
    void Process(Message message)
    {}
}

class MmsHander : IHandler
{
    void Process(Message message)
    {}
}

class MessageProcessor
{
    private Dictionary<MessageType, IHandler> 
                   handlers = new Dictionary<MessageType, IHandler>()
    {
        { MessageType.Sms, new SmsHander() },
        { MessageType.Mms, new MmsHander() },
    };

    public void Process(Message message)
    {
        handlers[message.MessageType].Process(message);
    }
} 
```

因此，您可以致电：

```
var processor = new Processor();
processor.Process(message); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:36:54.283

您的字典未实例化：

更改`Dictionary methods;`为：

```
Dictionary methods = new Dictionary(); 
```

您也可以通过调试轻松看到这一点

# c++ - 如何找出导致“cv::Exception at memory location”的原因？

> ID：12687684
> 
> 赞同：16
> 
> 时间：2012-10-02T09:23:39.683
> 
> 标签：c++, visual-studio-2010, visual-c++

我目前遇到一些奇怪的异常，这很可能是由于我在与 opencv 交互时做错了一些事情：

`First-chance exception at 0x7580b9bc in xxx.exe: Microsoft C++ exception: cv::Exception at memory location 0x00c1c624..`

我已经`Thrown`在菜单中启用了该字段`Debug -> Exceptions`，但是我真的不知道在我的代码中哪里抛出了异常。

我该如何调试呢？

**编辑** 堆栈帧如下所示（我的应用程序甚至不会出现在列表中！）：

*   KernelBase.dll!7580b8bc()
*   [以下框架可能不正确或缺失]
*   KernelBase.dll!7580b8bc()
*   opencv_core242d.dll!54eb60cc()

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-02T09:59:17.277

您可以将整个 main 包装在一个 try catch 块中，该块会打印出异常详细信息。如果开放的 CV API 可以抛出异常，您将需要考虑将它们作为设计的一部分进行处理：

```
try
{
  // ... Contents of your main
}
catch ( cv::Exception & e )
{
 cerr << e.msg << endl; // output exception message
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-12T12:45:39.883

OpenCV 有一个方便的函数叫做[cv::setBreakOnError](http://docs.opencv.org/master/db/de0/group__core__utils.html#gae4904ef072dede53cf161d9a6869083f&gsc.tab=0)

如果在任何 opencv 调用之前将以下内容放入 main 中：

```
cv::setBreakOnError(true); 
```

那么你的程序将崩溃，因为 OpenCV 将在正常抛出 cv::Exception 之前执行无效操作（取消引用空指针）。如果您在调试器中运行您的代码，它将在这个非法操作处停止，并且您可以在错误发生时看到包含所有代码和变量的整个调用堆栈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-11T02:12:38.373

我通过使用带有 WebCam 的 OpenCV 遇到了这个问题。在我的情况下，问题是程序正在尝试在 Cam 尚未初始化时读取图像。

我的错误代码：

```
 // open camera
capture.open(0);
while (1){
    //store image to matrix // here is the bug
    capture.read(cameraFeed); 
```

解决方案

```
 // open camera
capture.open(0);
while (1){

     //this line makes the program wait for an image 
     while (!capture.read(cameraFeed));

    //store image to matrix 
    capture.read(cameraFeed); 
```

（对不起我的英语）谢谢

# c# - 从扩展方法中获取调用者方法

> ID：12687685
> 
> 赞同：5
> 
> 时间：2012-10-02T09:23:39.877
> 
> 标签：c#, .net

我在为我的扩展方法获取调用者方面遇到了一点问题。

在互联网上搜索，但找不到与我的问题类似的任何东西。 [这个问题](https://stackoverflow.com/questions/7839691/gettype-in-static-method)是千钧一发...

我有一个扩展方法：

```
public static void TabToNextField(this FrameworkElement i, FrameworkElement nextField)
{
   i.KeyPress(Keys.Tab);
   var isNextFieldFocused = nextField.GetProperty<bool>("IsFocused");

   if (!isNextFieldFocused)
   {
       //Taborder is incorrect. Next field wasn't focused!
       //This wont work since 'this' can't be used in a static context.
       var currentProcedure = this.GetType().Name;   
       var fromField = i.AutomationId;
       var toField = nextField.AutomationId;
       //Log to file..
   }
} 
```

这用于一些自动化测试，以验证下一个字段是否具有焦点以及选项卡顺序是否正确。但是对于应该记录的错误，我想获取调用者的类名以获得准确的报告，我们可以直接看到错误在我们的应用程序中的位置。

由于所有控件都使用 AutomationId，因此控件很容易识别..

所以问题是：**如何从这个扩展方法中获取调用者方法？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T09:23:39.877

我的解决方案是使用 .Net 4.5 中的[CallerMemberName](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callermembernameattribute.aspx)。所以最终的解决方案如下：

```
public static void TabToNextField(this FrameworkElement i
    , FrameworkElement nextField
    , [CallerMemberName] string memberName = "")
{
    i.KeyPress(Keys.Tab);
    var isNextFieldFocused = nextField.GetProperty<bool>("IsFocused");

    if (!isNextFieldFocused)
    {
        //Taborder is incorrect. Next field wasn't active!
        var currentProcedure = memberName;
        var fromField = i.AutomationId;
        var toField = nextField.AutomationId;
    }
} 
```

我希望这可以帮助有类似问题的人。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T09:34:30.570

虽然`CallerMemberName`确实很方便，但您也可以使用[`StackTrace`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx)在所有框架版本中都可用的类。

* * *

**LINQPad 示例：**

```
void Main()
{
    "Test".Test();
}

static class Extensions
{
    public static void Test(this string s)
    {
        var method = new StackTrace().GetFrame(1).GetMethod();
        Console.WriteLine(String.Format("I was called from '{0}' of class '{1}'", method.Name, method.DeclaringType));
    }
} 
```

**输出：**

> 我是从“UserQuery”类的“Main”中调用的

# c# - C# 将 1 位 BMP 转换为 3.0 版

> ID：12687689
> 
> 赞同：0
> 
> 时间：2012-10-02T09:23:51.140
> 
> 标签：c#, bitmap, image-conversion

我目前有一个 C# 项目，需要将任何图像转换为 1 位位图图像。

到目前为止，一切都很好。代码运行良好。

当隐藏的文件被发送给另一个需要它的同事时，我只能猜测它是在方舟上编码的程序，它会抛出这个错误：

```
resource file res\icon3.bmp is not in 3.00 format 
```

如何让我的应用程序以 3.00 格式保存？这有点让人头疼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:21:07.410

小学生错误！虽然转换代码很好并且工作完美，但错误在于 image.save！即使我有一个位图文件 - 在分析标题时它是一个 PNG。很奇怪。代码是这样的：

```
 image.Save(newfilename); 
```

经过一番摸索后，这解决了问题：

```
 n.Save(newfilename,ImageFormat.Bmp); 
```

我希望这可以帮助别人。

# scripting - 以编程方式组合 SVG 图像

> ID：12687701
> 
> 赞同：14
> 
> 时间：2012-10-02T09:24:41.447
> 
> 标签：scripting, svg, batch-processing

我有一个程序可以批量生成多个 SVG 文件，然后我需要能够将它们组合（平铺）到一个文件中，并设置一个空白区域，并以厘米（或毫米）为单位设置宽度。

我需要一个现有的脚本或一个指向我可以用来完成此任务的库和语言的指针。有什么建议从哪里开始？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-05T16:32:29.023

*这里有一些工具可以帮助您从svg*文件创建*SVG*精灵表：

 ***[SVG 堆栈](https://github.com/astraw/svg_stack)**

**[SVG 实用程序](https://github.com/btel/svg_utils)**

然后你可以用一个工具清理你的svg

**[冲刷](http://codedread.com/scour/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-17T10:56:35.070

是的，正如[@victor-henriquez](https://stackoverflow.com/a/12687803/1240387)指出的那样，您可以使用`montage`它，但它有点棘手，我通过激活`-verbose`输出进入它，并看到它创建了一个`inkscape`命令并分析它为我解决了这个问题。

```
montage -version
# Version: ImageMagick 7.0.7-31 Q16 x86_64 20180506 
```

我想要……</p>

*   ...标记桌面图标：使用`-label`and `-pointsize`（通过 pointsize 获得正确的字体大小但取决于密度）
*   …增加`-density`（很难找到适合输出的数字）
*   ... 有序地堆叠和平铺：使用`-tile 15x30`（此处为 15 列 x 30 行）
*   ...在每个子图像上添加边距：使用`-geometry '+40+0'`（水平添加 40 像素，垂直添加 0 像素）

生成的命令是（添加`-verbose`以获取详细的处理信息）：

```
montage -label '%f' -pointsize 2 -density 300 *.svg \
  -tile 15x30 \
  -geometry '+40+0' \
 ./papirus-icons-mimetypes.png 
```

如果您另外指定所需的输出像素大小几何，例如。96 像素乘 96 像素，要理解什么在起作用`-geometry '96x96+40+0'`变得更加复杂。`-density`我没能深入了解;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-06T13:00:57.983

我使用了 Victor gem [https://github.com/DannyBen/victor](https://github.com/DannyBen/victor)

```
first_svg = File.open("first.svg").read
second_svg = File.open("second.svg").read

first_content = first_svg.split("\n")[1..-2].join(", ")
second_content = second_svg.split("\n")[1..-2].join(", ")

svg = Victor::SVG.new width: "100%", height: "100%"
svg << first_content
svg << second_content

svg.save 'final.svg' 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-02T09:30:30.980

您可以从 ImageMagick 中查看蒙太奇：[http ://www.imagemagick.org/Usage/montage/](http://www.imagemagick.org/Usage/montage/)

您可以围绕它构建脚本。*

# android - 在 Android 中使用 3G 和 Wifi 检查互联网连接

> ID：12687703
> 
> 赞同：3
> 
> 时间：2012-10-02T09:24:51.043
> 
> 标签：android, networking

有时，我必须在我的 android 应用程序中检查互联网连接：

```
private boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager= (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
    return activeNetworkInfo != null;
} 
```

上面的代码仅在可用时才`Network`有效！但是，我的设备有`wifi`和，当我同时使用上面两种类型的网络连接时，`3G`上面的代码总是返回！（当它返回时`false`我仍然可以使用）！我错过了什么？谢谢！`google.com``false`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:42:52.357

这段代码呢？

```
 ConnectivityManager connectivityManager = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);

    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();

    // Check the current state of the Network Information
    if (networkInfo == null)
        return false;
    if (networkInfo.isConnected() == false)
        return false;
    if (networkInfo.isAvailable() == false)
        return false;
    return true; 
```

记得在你的应用程序清单文件中添加这个：

`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T09:26:09.073

尝试这个

```
private boolean haveNetworkConnection() 
{
    boolean haveConnectedWifi = false;
    boolean haveConnectedMobile = false;

    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) 
    {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isConnected())
                haveConnectedWifi = true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isConnected())
                haveConnectedMobile = true;
    }
    return haveConnectedWifi || haveConnectedMobile;
} 
```

# ruby-on-rails-3 - 如何将书架集成到社交网络应用程序中

> ID：12687707
> 
> 赞同：0
> 
> 时间：2012-10-02T09:24:59.747
> 
> 标签：ruby-on-rails-3, social-networking

我决定基本上创建一个应用程序（在 RoR 中），该应用程序将基于 Insoshi 或 Lovdbyless 等预制社交网络框架之一构建（除非有人可以给我其他建议）。

所以我希望这个应用程序具有所有社交网络功能，但我想为其添加一个关键功能......人们可以将书籍添加到数据库中，然后浏览数据库并查看其他已放入的书籍其他人在那里，并将它们添加到自己的个人书架中。

我正在寻找一些关于如何实施这一点的方向。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:29:46.070

1.  探索现有的模型、视图和控制器。
2.  规划您的用户界面，并了解用户将如何与您的服务进行交互。决定您将更改或从新创建哪些视图。
3.  规划你的数据结构。创建模型、迁移、验证、关联等。考虑用户访问限制。
4.  规划和创建您的 RESTful 资源
5.  创建您的视图和控制器

# fluent-nhibernate - 在流利的 NHHibernate 中覆盖布尔属性约定

> ID：12687709
> 
> 赞同：1
> 
> 时间：2012-10-02T09:25:06.190
> 
> 标签：fluent-nhibernate, automapper, convention

我正在试验 Fluent Nhibernate 的自动映射功能。

我看到了一个具有默认字符串约定[的示例，](http://fnhsamples.codeplex.com/)[如下所示](http://fnhsamples.codeplex.com/SourceControl/changeset/view/69709#443726)：

```
namespace Vuscode.Framework.NHibernate.Conventions
{
    using FluentNHibernate.Conventions;
    using FluentNHibernate.Conventions.Instances;

    public class DefaultStringPropertyConvention : IPropertyConvention
    {
        public void Apply(IPropertyInstance instance)
        {
            instance.Length(100);
            instance.Nullable();
        }
    }
} 
```

在这里，我看不到任何检查是否`instance`为字符串类型的东西。它只是使长度为 100 并且可以为空。Automapper 如何知道仅将此约定应用于字符串？

此外，我想让我的所有布尔值都不可为空，并将默认值设置为 0.. 所以按照上面的例子，我会有这个：

```
namespace Vuscode.Framework.NHibernate.Conventions
{
    using FluentNHibernate.Conventions;
    using FluentNHibernate.Conventions.Instances;

    public class DefaultBoolPropertyConvention : IPropertyConvention
    {
        public void Apply(IPropertyInstance instance)
        {
            instance.Not.Nullable();
            instance.Default("0");
        }
    }
} 
```

但是如果我这样做并且在我的项目中也有默认字符串约定..那么自动映射器如何知道约定适用于哪些属性类型？

我尝试阅读[有关约定的流利维基，](https://github.com/jagregory/fluent-nhibernate/wiki/Conventions)但没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:12:13.100

stringconvention 应用于所有属性，但由于 NHibernate 忽略了非字符串属性的长度，并且可为 null 是默认值，它只是没有效果。您有两个选项来过滤非布尔属性

```
public void Apply(IPropertyInstance instance)
{
    if (instance.Type == typeof(bool))
    {
        instance.Not.Nullable();
        instance.Default("0");
    }
}

// or

public class DefaultBoolPropertyConvention : IPropertyConvention, IPropertyConventionAcceptance
{
    public void Accept(IAcceptanceCriteria<IPropertyInspector> criteria)
    {
        criteria.Expect(i => i.Type == typeof(bool));
    }

    public void Apply(IPropertyInstance instance)
    {
        instance.Not.Nullable();
        instance.Default("0");

    }
} 
```

# zimbra - zimlet 将它们的 UserProperties 存储在哪里？

> ID：12687711
> 
> 赞同：0
> 
> 时间：2012-10-02T09:25:09.293
> 
> 标签：zimbra

因此，您已经在您的 zimlet 中定义了一些属性，无论是在 XML 文件中还是通过 .properties 文件。但是假设你改变主意并决定删除一些属性，你会怎么做？从文件中删除它们，甚至删除完整的文件也不会从属性编辑器中删除属性，它在某处是持久的。有没有办法重置 zimlet ？

我还检查了它们既没有存储在 cookie 中，也没有存储在 mysql 数据库中。

任何想法 ？也许是 LDAP？如果是这样，你能建议一种搜索它们的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:41:59.080

它们存储在 LDAP 目录中，您可以通过 zmprov 命令列出它们

```
zmprov ga yassine@myhost.tld | grep zimbraZimletUserProperties | grep com_feeder_sugarbee
zimbraZimletUserProperties: com_feeder_sugarbee:username:
zimbraZimletUserProperties: com_feeder_sugarbee:user:
zimbraZimletUserProperties: com_feeder_sugarbee:passwd:
zimbraZimletUserProperties: com_feeder_sugarbee:password: 
```

我不知道这是否是 Zimlets 框架设计中的缺陷，但该框架应该为开发人员提供适当的工具来定义和取消定义属性，而不是强迫他要求管理员为他删除属性:(

[http://wiki.zimbra.com/wiki/Zmrov](http://wiki.zimbra.com/wiki/Zmprov)给出了一个关于如何定义和删除属性的例子（还没有尝试过）：

```
zmprov ma user1 +zimbraZimletUserProperties "com_company_testing:favoriteColor:blue" 
```

（删除部分实际上应该只是 - 而不是 +）

# java - 无法运行 ActionBarCompat 示例

> ID：12687712
> 
> 赞同：0
> 
> 时间：2012-10-02T09:25:09.777
> 
> 标签：java, android, eclipse, android-actionbar-compat

我在编译和运行 Android 16 的 ActionBarCompat 示例时遇到问题。我选择了 API 级别 16 作为构建目标，这似乎构建得很好，但是当我尝试调试时弹出这些错误。当然，我可以更改清单中的最低 API 级别，但这样做有什么意义呢？我没有对示例进行任何更改，为什么它不能正常工作？

```
Class requires API level 14 (current min is 3): android.view.ActionProvider SimpleMenuItem.java /ActionBarCompat/src/com/example/android/actionbarcompat    line 129    Android Lint Problem

Class requires API level 14 (current min is 3): android.view.ActionProvider SimpleMenuItem.java /ActionBarCompat/src/com/example/android/actionbarcompat    line 134    Android Lint Problem

Class requires API level 14 (current min is 3): android.view.MenuItem.OnActionExpandListener    SimpleMenuItem.java /ActionBarCompat/src/com/example/android/actionbarcompat    line 155    Android Lint Problem 
```

我很困惑，任何帮助将不胜感激。

更新：我添加了 @TargetApi(14) 注释，然后将 Lint suppres newApi 添加到其中一种方法中，现在它似乎运行良好。我更加困惑。任何人都可以对发生的事情有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:37:38.880

在您的清单中，您定义`android:minSdkVersion="3"`了 ，但您正在调用 API 级别 14 类/方法。

Lint 将检查这些类型的 API 调用并向您发出警告。

显然，在`ActionBarCompat`当前 API 级别进行检查以确保调用是安全的。

要删除警告，只需`@TargetApi(14)`在您进行调用的方法之前添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:45:27.463

遗憾的是，这些示例并未针对每个 SDK 迭代保持最新。
- 首先，您设置了`sdkversion = 3`? 这对我来说似乎有点低。7（eclair）是我认为大多数项目应该关注的最低版本。较低级别的版本具有荒谬的市场份额，并且会不断下降。

- 这些是 Lint 警告。Lint 对 Android 来说有点新，这就是为什么这个示例没有考虑它。它告诉您代码中的潜在问题。此警告意味着您正在调用可以在 3 级终端上运行的代码中的 14 级类。您应该尝试使用`@TargetApi(14)`注释删除它们。这个注解告诉 Lint 你知道你在做什么，并且这段代码至少只会在 sdk version=14 的情况下运行。

-另外，如果你想在任何版本的 Android 上使用 actionbar，你真正想要使用的是开源的 ActionBar Sherlock 库。不过一次一步:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:29:01.993

您需要将项目构建目标更改为 API 级别 14..in (project->properties->Android)

这些是他们的要求：

由于在 Ice Cream Sandwich 上使用了本机操作栏及其相关类，因此该库要求它和您的项目***都****使用 Android 4.0 或更高版本进行编译*。该项目还要求您在您的编辑器和您可能使用的任何构建系统中都使用 JDK 1.6 进行编译。

# spring - Spring Batch Job 执行后变量值保留在内存中

> ID：12687714
> 
> 赞同：1
> 
> 时间：2012-10-02T09:25:17.910
> 
> 标签：spring, variables, memory, execution

我的项目有几个每天都会执行的流程。我发现的问题是，在作业执行之后，当我再次执行相同的流程（当然，使用不同的作业参数）时，我看到 Spring 批处理生成了一个新的 Job 实例，但是变量值保留在内存中以供新的执行。

这怎么可能？新实例不会创建新的 Java 实例？问题配置？

我的 JobLoader 配置：

```
<bean id="jobLoader" class="org.springframework.batch.core.configuration.support.AutomaticJobRegistrar">
    <property name="applicationContextFactories">
        <bean class="org.springframework.batch.core.configuration.support.ClasspathXmlApplicationContextsFactoryBean">
            <property name="resources" value="classpath*:/META-INF/spring/batch/jobs/*.xml" />
        </bean>
    </property>
    <property name="jobLoader">
        <bean class="org.springframework.batch.core.configuration.support.DefaultJobLoader">
            <property name="jobRegistry" ref="jobRegistry" />
        </bean>
    </property>
</bean> 
```

谢谢，

# php - 如何使用播放按钮显示视频，单击播放时预览屏幕从小到大

> ID：12687718
> 
> 赞同：-2
> 
> 时间：2012-10-02T09:25:22.087
> 
> 标签：php, javascript, jquery, html, css

我想使用弹出一个窗口的点击播放按钮来显示视频。[如此处所见](http://edition.cnn.com/2012/10/01/sport/motorsport/motorsport-schumacher-sauber-hamilton/index.html?hpt=hp_t3)。目前我正在使用 iframe 来显示视频。如何使用 html、css 做到这一点？

目前这是显示视频的代码

```
<div class="player">
    <iframe src="http://player.vimeo.com/video/<?= $vimeo;?>?title=0&amp;byline=0&amp;portrait=0&amp;color=abcc16&amp;autoplay=0" width="250" height="250" frameborder="0" webkitAllowFullScreen allowFullScreen></iframe>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:27:33.853

尝试：

```
<script type="text/javascript">
function openmovie() {
  window.open("yourmovieaddress", "movieclicked", "width=yourwidth,height=yourheight,toolbars=no,status=no,resize=no");
}
</script>
<input type="button" onclick="openmovie();" value="Click to Play" /> 
```

根据自己的需要自定义样式和参数。

既然你想要一个动画，看看jQuery。这会有所帮助。

# c# - 嵌套条件运算符？

> ID：12687726
> 
> 赞同：1
> 
> 时间：2012-10-02T09:25:45.860
> 
> 标签：c#

这似乎很愚蠢——一定是我！

假设我有一个字符串`filter["size]" = "g1g"`，实际上是“greater”“1”“gb”

所以

我做了一个测试，看看“第一个”字符是否是一个字符，并计算出它更大

first 和 last 都是布尔值。

然后我将 x （因为我变得越来越笨拙）设置为 filter["size"] 的长度，它是一个字符串。

但是，我来复制中间的最终数字。

```
Int64.Parse(filter["size"].Substring(first?1:0,last?(first?x-2:x-1):x)); 
```

而且它不喜欢嵌套的内联 ifs ..

`Substring(first?1:0,last?(first?x-2:x-1));`抱怨它缺少:，这是正确的，但是当你添加它时它就会抱怨

```
Error   1   The best overloaded method match for 'string.Substring(int, int)' has some invalid arguments 
```

我开始认为我应该用正则表达式解析它，但现在我很好奇为什么这不起作用。

因此，与可能有很多更好的方法无关，谁能告诉我为什么这些嵌套的内联 if 不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T09:30:30.233

> **而且它不喜欢嵌套的内联 ifs ..**

条件运算符 ?: 在您的子字符串中不完整

我会为你分解

```
Substring(
           first
               ? 1
               : 0,
           last 
               ? (first ? x-2 : x-1 )
               : [something]  // this is the bit you're missing
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T12:07:25.113

*如您所描述的那样，*您的代码完全可以编译，如果可读性极强的话。填写你的空白，我试过这个：

```
int x = 6;
bool first = false;
bool last = false;
var filter = new Dictionary<string, string>();
filter.Add("size", "12345697");
var result = Int64.Parse(filter["size"].Substring(first?1:0,last?(first?x-2:x-1):x)); 
```

此代码导致`result`设置为`123456`. 没有错误，没有问题。

你周围的代码有问题；你的三元表达式很好。

# ajax - 使用 ajax 将搜索数据加载到现有数据网格

> ID：12687727
> 
> 赞同：0
> 
> 时间：2012-10-02T09:25:47.530
> 
> 标签：ajax, asp.net-mvc-3, jquery, webgrid

这是我的行动方法

```
 public ViewResult Index(string firstName)
        {
            // get the list of employees according to the user name
            if (firstName == null)
            {
                return View((from e in db.Employees
                             where e.IsActive == true
                             select e).ToList());
            }
            else
            {
                return View((from e in db.Employees
                             where e.IsActive == true && e.FirstName.Contains(firstName )
                             select e).ToList());
            }
        } 
```

这是我的看法

```
@{         

   var grid = new WebGrid(source: Model,
                defaultSort: "UserName",
                rowsPerPage: 15, ajaxUpdateContainerId: "grid"); 
}
@using (Html.BeginForm())
{
   <div class="btn_align">
        @if (Request.IsAuthenticated && HttpContext.Current.User.IsInRole("Administrator"))
        {
            <h2>@Html.ActionLink("Create New", "Create")</h2>
        }
   </div>

   <div class="btn_align">
        <p>
            Find by name:<input class="inputStyle_S" id="firstName" name="firstName" type="text" value="" data-autocomplete= "@Url.Action("QuickSearchFirstName", "ApplyLeave")" />  
            <input type="submit"  id="txtSearch" value="Search"  class="btn"/>
        </p>
   </div>

    <div id="grid">
        @grid.GetHtml(
                tableStyle: "grid",
                headerStyle: "head",
                alternatingRowStyle: "alt",
                columns: grid.Columns(
                 grid.Column("User Name", format: (item) => item.FirstName + ' ' + item.LastName),     
                        grid.Column("EmployeeType.Type", "Employee Type"),
                        grid.Column(header: "Action", format: (item) =>
                             Html.ActionLink("Details", "Details", new { id = item.id}))
            )
        ) 
    </div>
}
</div>
<div class="leaveChart_bottom"></div> 
```

我使用网络网格来表示数据，我希望在提交搜索按钮（按名称搜索）后，在不刷新页面的情况下将搜索结果放到现有网格中

这是我使用的 ajax 方法，但它不起作用。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:42:04.500

您应该使用 @Ajax.BeginForm 它将更新您的网格而不刷新页面。为 Grid 创建一个部分类，以便在服务器端获得它的**RenderHtmlString**。

在 Parttail 类中

//GridParttail.cshtml @model SomeModel

```
@{         

   var grid = new WebGrid(source: SomeModel,
                defaultSort: "UserName",
                rowsPerPage: 15, ajaxUpdateContainerId: "grid"); 
}
<div id="grid">
        @grid.GetHtml(
                tableStyle: "grid",
                headerStyle: "head",
                alternatingRowStyle: "alt",
                columns: grid.Columns(
                 grid.Column("User Name", format: (item) => item.FirstName + ' ' + item.LastName),     
                        grid.Column("EmployeeType.Type", "Employee Type"),
                        grid.Column(header: "Action", format: (item) =>
                             Html.ActionLink("Details", "Details", new { id = item.id}))
            )
        ) 
    </div> 
```

现在修改了您的视图

```
@using (@Ajax.BeginForm("Index", new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "gridResult" }))
{

<div class="btn_align">
        @if (Request.IsAuthenticated && HttpContext.Current.User.IsInRole("Administrator"))
        {
            <h2>@Html.ActionLink("Create New", "Create")</h2>
        }
   </div>

   <div class="btn_align">
        <p>
            Find by name:<input class="inputStyle_S" id="firstName" name="firstName" type="text" value="" data-autocomplete= "@Url.Action("QuickSearchFirstName", "ApplyLeave")" />  
            <input type="submit"  id="txtSearch" value="Search"  class="btn"/>
        </p>
   </div>

   <div id="gridResult">
      @html.Partail("GridPartail",Model)
   </div>

} 
```

注意：而不是使用 Html.BeginForm 使用 Ajax.BeginForm. 在您的情况下，您没有将文本框绑定到模型，以便您将在**formCollection中获得它的值**

在控制器中

```
[HttpPost]
public ActionResult Index(formCollection coll)
        {
            string firstName = coll["firstName"];
            // get the list of employees according to the user name
            if (firstName == null)
            {
               var result = from e in db.Employees
                             where e.IsActive == true
                             select e).ToList();

                return PartailView("GridPartail",result );
            }
            else
            {
                //"GridPartail.cshtml" is partial viewName
                var result = (from e in db.Employees
                             where e.IsActive == true && e.FirstName.Contains(firstName )
                             select e).ToList();
                return View("GridPartail",result );
            }

        } 
```

就像在 AjaxOption 中一样，我提到了操作方法**POST**并且您必须通过**UpdateTargetId**来指定您的结果将出现在视图上的位置。

# asp.net-mvc - 如何使用 selenium 进行 ASP.NET MVC 集成测试

> ID：12687733
> 
> 赞同：6
> 
> 时间：2012-10-02T09:26:13.520
> 
> 标签：asp.net-mvc, selenium, integration-testing

我需要知道是否可以使用 selenium 对 ASP.NET MVC 应用程序执行集成测试。如果是，那么有什么要求以及如何去做。它是从 UI 测试的外部应用程序还是我应该使用视图。真的很迷茫。请指导

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T09:51:08.583

如果您打算使用 C# 编写 Selenium 测试，我建议您使用任何类型的测试记录器，那么这将是一个单独的项目。

您将运行它，它将测试您的应用程序的已部署版本，最好是在专用测试环境中。有[大量](http://seleniumhq.org/docs/)可用的文档。

就我个人而言，我和[其他人](https://stackoverflow.com/questions/417380/watin-or-selenium)更喜欢[WatiN](http://watin.org/)使用 C# 编写测试来测试 Web 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:55:17.977

Selenium 可用于测试任何 Web 应用程序，包括 ASP.NET MVC。通常，您将测试项目添加到解决方案并在其中编写测试。Selenium 打开浏览器并执行测试中描述的命令。您可以用 c# 编写测试，也可以使用记录器并将记录保存为 c# 测试。

# blackberry - 运行波纹模拟器（Chrome 扩展）进行应用测试时遇到错误？

> ID：12687734
> 
> 赞同：0
> 
> 时间：2012-10-02T09:26:14.850
> 
> 标签：blackberry, google-chrome-extension, ripple

当我只是从我的电脑启用一个 html 文件来模拟时。它只显示：--

“看起来我们在这里所拥有的是未能......效仿

你看到这个窗口是因为它看起来像僵尸启示录已经开始了。

“它说击中或开火”“”

[http://i.stack.imgur.com/1ABj4.png](http://i.stack.imgur.com/1ABj4.png)

它对我来说已经工作了几天......但现在我开始打开它我遇到了一个错误。我的 Ram 是 2Gb，支持全部要求。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:31:04.510

该消息意味着 Ripple 正在等待*某些事情*完成，并决定显示警告而不是挂起。您可以 CTRL+I 打开 Web 检查器，查看是否有任何控制台消息可以帮助解释失败的原因。

您可以点击 FIRE 按钮清除所有缓存的设置。这会将 Ripple 重置为其初始状态（Ripple 将所有用户设置存储在 localStorage - 点击 FIRE 按钮会清除此 localStorage 数据）。如果缓存设置是“红屏死机”的原因，那么您将在按下 FIRE 按钮后看到黑色的“欢迎使用 Ripple”屏幕。

否则，我建议禁用并重新启用 Ripple。

最后，作为最后的手段，确保使用此处提供的 *.crx 文件更新到最新版本的 Ripple：[https ://developer.blackberry.com/html5/download/](https://developer.blackberry.com/html5/download/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:55:52.363

如果您尝试访问本地文件系统中的某些内容，我发现了问题

[https://github.com/blackberry/Ripple-UI/issues/565](https://github.com/blackberry/Ripple-UI/issues/565)

> 由于您在 file:/// 方案中运行，因此您需要稍微绕过浏览器的安全性。请执行下列操作：
> 
> 在 chrome://chrome/extensions/ 中确保选中了 Ripple 的“允许访问文件 URL”（可能必须进入开发者模式才能做到这一点，页面右上角的复选框）
> 
> 退出 chrome 并使用 --allow-file-access-from-files 标志重新启动它

这样做为我解决了这个问题。您可以查看此页面[github.com/blackberry/WebWorks-Samples/tree/master/HelloWorld](http://github.com/blackberry/WebWorks-Samples/tree/master/HelloWorld)

# google-app-engine - App Engine 开发服务器无法检测到登录用户

> ID：12687735
> 
> 赞同：2
> 
> 时间：2012-10-02T09:26:16.003
> 
> 标签：google-app-engine, gwt, service

我正在尝试在本地开发服务器上使用 App Engine 的 UserService，但它的行为不像我预期的那样。我在论坛上搜索了我的问题的答案，但找不到任何专门解决我的问题的答案。

我做的第一件事是从 UserService 获取登录 URL，如下所示：

```
UserService userService = UserServiceFactory.getUserService();
if(userService.isUserLoggedIn())
  String loginURL = userService.createLoginURL("/mycallbackservlet");
else
  ... do something else 
```

假设用户最初没有登录，我提供了一个“mycallbackservlet”作为目标 URL，以便在（成功）登录后重定向到。要启动登录过程，我在客户端打开一个 GWT 窗口，如下所示：

```
Window.open(loginURL, "Bla", props); 
```

loginURL 是上面创建的。我看到了本地开发服务器的模拟登录屏幕，您可以在其中输入任何用户。我只需单击确定。现在我的回调 servlet 被调用（如预期的那样）但是当我再次检索 UserService 对象时，它没有给我一个登录用户，即

```
UserServiceFactory.getUserService().isUserLoggedIn() 
```

返回“假”。怎么会这样？这是典型的开发服务器行为还是我做错了什么？我是否应该以不同的方式打开初始 URL，即不使用 Window.open() 而是使用其他东西？

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:16:52.870

当用户已经登录时，您似乎正在创建登录 url？不应该反过来吗：

```
if(!userService.isUserLoggedIn())
  String loginURL = userService.createLoginURL("/mycallbackservlet"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:21:31.947

HttpServletRequest 有方法有方法

*   获取远程用户（）
*   获取用户主体（）
*   isUserInRole（字符串角色）

这在您的情况下可能很有用。

# jquery - Srobbin 页面幻灯片编辑失败。请

> ID：12687737
> 
> 赞同：0
> 
> 时间：2012-10-02T09:26:23.790
> 
> 标签：jquery, html, css

好的，这是这个非常好的 jquery 滑块。

[http://srobbin.com/jquery-plugins/pageslide](http://srobbin.com/jquery-plugins/pageslide)

而我所做的是

[http://mbu.mn/test](http://mbu.mn/test)

所以这就是问题所在。认为这是一个 iPad 屏幕，所以我点击它滑入的链接。当我点击主页按钮时，它返回主页。如果我在 FF15 上看到它，它看起来正是我想要的方式，但在 Safari 和 Chrome 上，它看起来向左溢出。如果无论如何要修复它，它真的对我有很大帮助。多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:13:25.903

似乎如果要加载的内容是动态的，那么它会扰乱页面样式，另一方面，附加到现有元素的模式或程序加载似乎可以避免类似的问题。顺便说一句，该插件似乎有点过时了，目前已经超过 6 个月没有更新。基于触摸的设备和单击文档以关闭也存在一些问题。

# javascript - 将 $.get 包装在另一个 deferred 中

> ID：12687739
> 
> 赞同：0
> 
> 时间：2012-10-02T09:26:28.183
> 
> 标签：javascript, jquery, ajax, jquery-deferred

我只是想了解延迟的细节。
为什么以下内容不使两个调用同步？

[http://jsfiddle.net/JSw5y/889/](http://jsfiddle.net/JSw5y/889/)

**控制台输出：**
运行 ajax get
Fading in
Fading in done
完成运行 ajax get

**期望的输出：**
Running ajax get
Finished running ajax get
Fading in
Fading in done

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:30:44.320

它不起作用，因为在这一行中：

```
.then(showDiv()) 
```

您`showDiv`立即调用，而不是将其作为回调传递给`.then()`. 它应该是：

```
.then(showDiv) 
```

# ios - ARCGIS iOS - 地图图层内存问题

> ID：12687740
> 
> 赞同：1
> 
> 时间：2012-10-02T09:26:44.680
> 
> 标签：ios, memory, memory-management, memory-leaks, arcgis

在我的应用程序中，我使用了 arcgis sdk。我有 3 个不同的地图，所以我使用了 3 个平铺地图服务图层。而且我还有一个图形层来显示地图上选定特定区域的符号。我的应用程序；首先使用凭证连接服务，然后将图层添加到地图视图。到目前为止没有问题。加载完所有图层后，我开始使用 AGSQueryTask 和 AGSIdentify 任务进行一些查询操作。问题从这里开始。调试器给了我“收到内存警告。Level=1”。我继续做缩放/平移和额外的查询操作。过了一会儿，我的应用程序崩溃了，没有错误。我查看了我的代码，搜索了我的问题，在 arcgis 论坛中四处查看，但是我没有找到解决方案和好的解释。我用 1 个地图而不是 3 个地图尝试了我的应用程序，但警告和崩溃并没有消失。

毕竟，有没有人知道我的记忆问题的解决方案、解释或假设？

PS由于stackoverflow，我还使用nszombienabled和guard malloc调试了我的代码:)在这个过程中我遇到了“：CGBitmapContextInfoCreate：无法为位图数据分配..字节”。我的内存问题与此错误有关吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:52:39.590

这听起来真的像一些内存泄漏或不释放您的应用程序不再使用的内存。

没有通用的解决方案可以给出，因为这些问题的原因可能在任何地方并且是任何东西。

你可以做的是：

1.  确保您`didReceiveMemoryWarning`在类中定义了方法，并尝试在那里释放未使用的内存；

2.  在泄漏和内存分配分析工具下运行您的应用程序，并查看您可以了解他们向您报告的内容；

3.  如果您没有内存泄漏，请尝试使用[快照分析](http://useyourloaf.com/blog/2011/03/08/using-heapshots-to-find-abandoned-memory.html)来查找废弃内存。

> 在这个过程中，我遇到了“：CGBitmapContextInfoCreate：无法为位图数据分配..字节”。我的内存问题与此错误有关吗？

如果你填满内存，分配调用可能会失败......这是一个结果，而不是一个原因。

# python - 在两个 pandas-timeseries 中查找具有相同值的日期

> ID：12687742
> 
> 赞同：2
> 
> 时间：2012-10-02T09:26:49.557
> 
> 标签：python, time-series, pandas

我有两个以日期时间列作为索引的时间序列：

```
2012-08-10 1.1       2012-08-10 1.1
2012-08-11 1.2       2012-08-11 1.2
2012-08-12 1.8       2012-08-13 1.1
2012-08-14 1.4       2012-08-15 1.3
2012-08-15 1.7       2012-08-16 1.1
2012-08-17 1.6       2012-08-17 1.2
2012-08-18 1.1       2012-08-18 1.1 
```

如何比较它们并获得两个带有日期的时间序列，它们都存在于它们中：

```
2012-08-10 1.1       2012-08-10 1.1
2012-08-11 1.2       2012-08-11 1.2
2012-08-15 1.7       2012-08-15 1.3
2012-08-17 1.6       2012-08-17 1.2
2012-08-18 1.1       2012-08-18 1.1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T10:13:08.560

```
In [52]: s1.align(s2, join='inner')
Out[52]:
(2012-08-10    1.1
2012-08-11    1.2
2012-08-15    1.7
2012-08-17    1.6
2012-08-18    1.1,
 2012-08-10    1.1
2012-08-11    1.2
2012-08-15    1.3
2012-08-17    1.2
2012-08-18    1.1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:32:04.373

使用[`join`](https://www.gnu.org/software/coreutils/manual/html_node/join-invocation.html#join-invocation)：

```
$ cat in1
2012-08-10 1.1
2012-08-11 1.2
2012-08-12 1.8
2012-08-14 1.4
2012-08-15 1.7
2012-08-17 1.6
2012-08-18 1.1
$ cat in2
2012-08-10 1.1
2012-08-11 1.2
2012-08-13 1.1
2012-08-15 1.3
2012-08-16 1.1
2012-08-17 1.2
2012-08-18 1.1
$ join in1 in2
2012-08-10 1.1 1.1
2012-08-11 1.2 1.2
2012-08-15 1.7 1.3
2012-08-17 1.6 1.2
2012-08-18 1.1 1.1 
```

**编辑：**如果要再次拆分两个文件，请执行以下操作：

```
$ join in1 in2 | awk '{print $1, $2}' > out1
$ join in1 in2 | awk '{print $1, $3}' > out2
$ cat out1
2012-08-10 1.1
2012-08-11 1.2
2012-08-15 1.7
2012-08-17 1.6
2012-08-18 1.1
$ cat out2
2012-08-10 1.1
2012-08-11 1.2
2012-08-15 1.3
2012-08-17 1.2
2012-08-18 1.1 
```

我*喜欢*小工具:)

# maven - Maven 在“测试”阶段开始时运行“依赖：树”

> ID：12687743
> 
> 赞同：9
> 
> 时间：2012-10-02T09:26:55.453
> 
> 标签：maven, phase

我需要在“测试”阶段开始时从 Maven 获取“依赖：树”目标输出，以帮助调试我需要知道正在使用的所有版本的问题。

在 Ant 中这很容易，我在这里查看了 Maven 文档和许多答案，但仍然无法弄清楚，肯定不是那么难吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-01-01T10:36:14.643

这将输出测试依赖树：

```
mvn test dependency:tree -DskipTests=true 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T09:57:59.913

如果您想确保在阶段*开始*时`dependency:tree`正在运行，那么您必须将原始目标移至在阶段开始*之后*进行。为此，您必须按照它们应该运行的顺序放置插件。*`test``surefire:test`*`dependency:tree`**

 **这是`pom.xml`一个`maven-dependency-plugin`在`maven-surefire-plugin`. 原来`default-test`的被禁用并`custom-test`添加了一个新的，这个将在执行后运行`dependency-tree`。

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow</groupId>
    <artifactId>Q12687743</artifactId>
    <version>1.0-SNAPSHOT</version>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.5.1</version>
                <executions>
                    <execution>
                        <id>dependency-tree</id>
                        <phase>test</phase>
                        <goals>
                            <goal>tree</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.7.2</version>
                <executions>
                    <execution>
                        <id>default-test</id>
                        <!-- Using phase none will disable the original default-test execution -->
                        <phase>none</phase>
                    </execution>
                    <execution>
                        <id>custom-test</id>
                        <phase>test</phase>
                        <goals>
                            <goal>test</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

这有点尴尬，但这是禁用执行的方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T09:37:13.660

在你的项目 POM 中声明：

```
 <plugin>
   <artifactId>maven-dependency-plugin</artifactId>
   <version>2.5.1</version>
   <executions>
     <execution>
       <phase>test-compile</phase>
       <goals>
         <goal>tree</goal>
       </goals>
     </execution>
   </executions>
 </plugin> 
```

您可以采用此模式在特定构建阶段触发任何插件。请参阅[http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Plugins](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Plugins)。

另请参阅[http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)以获取构建阶段的列表。正如 maba 指出的那样，您需要仔细选择阶段以确保`tree`在正确的时间执行目标。**

# svn - 恢复中断的 SVN 结帐...再次

> ID：12687748
> 
> 赞同：6
> 
> 时间：2012-10-02T09:27:19.087
> 
> 标签：svn, tortoisesvn, resume, svn-checkout

首先，我知道这个问题已经被问过很多次了，例如[这里](https://stackoverflow.com/questions/4031845/svn-resuming-aborted-checkout)。但是，那里接受的答案似乎不适用于我的情况。

```
> svn --version
svn, version 1.7.6 (r1370777)

> svn co https://netmf.svn.codeplex.com/svn netmf 
```

在它开始添加文件后（~ 1 分钟后），中断结帐（ctrl-c）。无论如何它不会一次尝试通过。

```
svn: E200015: Caught signal

> cd netmf

> svn cleanup 

> svn up
Updating '.':
At revision 25495.

> svn st
!      bin 
```

因此，它看到文件夹不完整。但是，它认为它已经是最新版本，并且不会继续下载。

有解决此问题的方法吗？

请注意，虽然我在这个测试用例中故意中断了 checkout，但同样的问题稍后会自动出现，因为存储库非常大，并且稍后由于其他情况而中断了 checkout。

Tortoise GUI 和另一台机器上的相同问题。

**更新**

OS X 10.8.2 上的 svn 也有同样的问题

**更新**

似乎还有另一个[问题](https://stackoverflow.com/questions/801950/codeplex-svn-how-good-is-svn-bridge)似乎与我有类似的问题。可能是服务器问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-18T12:24:19.447

首先尝试 SVN 清理然后 SVN 更新.. 它会工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:33:28.723

我看到你可以在这里尝试两件事：

```
svn update --force 
```

或者，如果它不起作用

```
svn revert . -R 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:39:47.450

再次执行 SVN 切换到存储库

```
cd netmf
svn switch https://netmf.svn.codeplex.com/svn 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-10-02T10:24:59.340

您可以尝试使用 git-svn 下载存储库。

```
git svn clone -s -r1 https://netmf.svn.codeplex.com/svn 
```

然后你要么在你的 svn checkout 上复制 checkout，要么开始使用 git。`-rN`开关决定了它应该检查的最后一个版本的数量（在上面的例子中，只有最新的版本是从服务器下载的）。如果这仍然不起作用，您可能必须签出包含所有增量更改的存储库：

```
git svn clone -s https://netmf.svn.codeplex.com/svn 
```

# testing - MonkeyTalk 布尔逻辑

> ID：12687749
> 
> 赞同：1
> 
> 时间：2012-10-02T09:27:27.020
> 
> 标签：testing, automated-tests, ui-testing

我正在尝试用 JavaScript 编写脚本来使用 MonkeyTalk 测试 iPhone 应用程序的 UI。我如何使用逻辑和条件？现在我有一个块：

```
if (this.app.button("name").verify())
      do this if button exists 
```

问题是验证不返回布尔值，如果按钮不存在，它只会在测试中引发错误。有没有办法捕捉错误并相应地运行脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:54:42.793

这似乎有效：

```
function verifiedViewOrNull (view)
{
var exists = false;
try
{
    view.verify();
    exists = true;
}
catch (e)
{

}

return exists ? view : null;
} 
```

你可以这样称呼它：

```
if (verifiedViewOrNull(this.app.view("name")) != null
{
      // It exists
} else
      //doesn't exist, not gonna throw exception 
```

# javascript - 使用正则表达式查找字符串

> ID：12687751
> 
> 赞同：0
> 
> 时间：2012-10-02T09:27:30.217
> 
> 标签：javascript

如何在 JavaScript 中查找字符串是否以开头`[`和结尾？`]`

```
var str = '[["a" , "b"]]'; 
```

有什么方法可以识别上面的字符串是否是数组的 typeof 数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:31:44.800

```
var str = '[["a" , "b"]]';

str.match(/^\[.*\]$/); 
```

匹配以 a 开头 ( `^`) 并以 a`[`结尾`$`的字符串`]`。由于方括号是控制字符，因此您必须对其进行转义。在两者之间，可以有任意数量的字符`.*`

对于您想要做的事情，正则表达式不适合。取而代之的是，解析字符串：

```
try{
    var obj = JSON.parse(str);
    alert(typeof obj);
} catch (e) {
   alert("No valid JSON!");
} 
```

Now`obj`是一个真正的 JavaScript 对象，您可以在其中调用`typeof`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:40:37.957

要确定您的对象是否为数组，您可以尝试以下操作：

```
if (str.match(/^\[.*\]$/)) {
    var test = JSON.parse(str);
    // Note, that you COULD use 'eval' here, but JSON.parse is the better solution.
    // Check out this post: http://24ways.org/2005/dont-be-eval

    if (test.constructor == Array) {
        alert("I'm an array!");
    }
} 
```

# android - 从应用程序缓存加载时 ListView 滞后

> ID：12687757
> 
> 赞同：2
> 
> 时间：2012-10-02T09:27:57.120
> 
> 标签：android, multithreading, listview, drawable

我写了一小段代码，从互联网上下载图像并将它们缓存到缓存目录中。 **它在辅助线程中运行。**

```
{

    String hash = md5(urlString);
    File f = new File(m_cacheDir, hash);

    if (f.exists())
    {
        Drawable d = Drawable.createFromPath(f.getAbsolutePath());
        return d;
    }

    try {
        InputStream is = download(urlString);
        Drawable drawable = Drawable.createFromStream(is, "src");

        if (drawable != null)
        {
            FileOutputStream out = new FileOutputStream(f);
            Bitmap bitmap = ((BitmapDrawable)drawable).getBitmap();
            bitmap.compress(CompressFormat.JPEG, 90, out);
        }

        return drawable;
    } catch (Throwable e) { }

    return null;
} 
```

我使用此代码在 ListView 项中加载图片，它工作正常。如果我删除第一个 if（我从磁盘加载图像）它运行顺利（并且每次都下载图片！）。如果我保留它，当您滚动列表视图时，您会在从磁盘加载图片时感觉有些滞后，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T15:10:28.303

为了回答“为什么”这个问题，我在我的 logcat 中遇到了很多 gc() 消息。Android 在从磁盘解码文件之前分配内存，这可能会导致垃圾收集，这对所有线程的性能来说都是痛苦的。当您对 jpeg 进行编码时，可能也会发生同样的情况。

对于解码部分，如果您有一个让 Android 就地解码图像的位图，您可以尝试重用现有位图。请查看以下代码段：

```
final BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = inSampleSize;
options.inJustDecodeBounds = false;
options.inMutable = true;
if (oldBitmap != null) {
    options.inBitmap = oldBitmap;
}
return BitmapFactory.decodeFile(f.getAbsolutePath(), options); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T09:38:04.133

[http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)

在后台执行。（使用 AsyncTask 加载图像。）

# wcf - 如何在 .NET 3.5 的 UserNamePasswordValidator 中获取端点地址？

> ID：12687769
> 
> 赞同：6
> 
> 时间：2012-10-02T09:28:34.413
> 
> 标签：wcf, .net-3.5

我需要在 .NET 3.5 的自定义 UserNamePasswordValidator 中访问端点地址。

我正在设置

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" /> 
```

和

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)] 
```

但 HttpContext.Current 在 UserNamePasswordValidator 中为空。我在 IIS 7.5 中托管服务。我也尝试了 .NET 4.0，它可以工作，但我需要在 3.5 中找到解决方案。

有什么解决方法吗？

# php - 如何在php中检查字符串中的数据库值

> ID：12687774
> 
> 赞同：-3
> 
> 时间：2012-10-02T09:28:49.217
> 
> 标签：php, string

这是我的代码..

```
 <?php
$SupportingMaterialTaskSql = "select task_name,section_name,ref_student_id from scores where ref_student_id = '".$studentid."' and section_name = 'sm1' GROUP BY task_name ORDER BY cast( SUBSTRING( task_name, 5, 2 ) AS unsigned ) ASC";

            $SupportingMaterialTaskResults = $obj->selectQuery($SupportingMaterialTaskSql);

            if($SupportingMaterialTaskResults > 0)
            {
                foreach($SupportingMaterialTaskResults as $Key => $SupportingMaterialTaskRow)
                {
                    $Task = $SupportingMaterialTaskRow['task_name'];

                    $str = "Task";
                    $TaskName = str_replace($str, "Task ", $Task);
?>
                <tr>
                  <td width="30%"  class="f13_blue cellbg"><?php echo $TaskName; ?></td>
                </tr> 
                <?php 
                } 

            } 
            ?> 
```

这是此代码上方的输出..

```
Task2 Task3 Task5 Task6 Task7 Task8 Task9 Task10 
```

所以我只想得到这样的结果。如果数据库具有像 Task1 这样的值，则打印 Task1，否则打印 Task1“N/A”。

那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:39:00.033

像下面这样的东西可以工作：

```
<?php

function check_not_null($var){
  if(trim($var) == ""){
    $var = "N/A";
  }
  return($var);
}

// some query info here...

while($fetch = mysqli_fetch_array($query)) {
  $task1 = check_not_null($fetch['task1']);
  $task2 = check_not_null($fetch['task2']);
  $task3 = check_not_null($fetch['task3']);
  // now echo or use the vars.. each loop they will be rechecked..
}

?> 
```

# html - 由于 h5，按钮 Apply Now 的字符之一被隐藏

> ID：12687776
> 
> 赞同：0
> 
> 时间：2012-10-02T09:28:59.960
> 
> 标签：html, css

按钮 Apply Now 的最后一个字符被隐藏。如何让它显示？

出现问题是因为我将它们与标题的 h5 一起包含在内。

[jsfiddle在这里](http://jsfiddle.net/nNw62/13/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:33:00.317

您可以将宽度增加到 110px：

```
input.buttonApply {
    background: url(button.png) 0 30 no-repeat;
    width: 110px; height: 30px;
    color: white;
    border: 0;
    font-weight: bold;
    cursor: pointer;
} 
```

# typescript - 如何从现有的 JavaScript 库生成 .d.ts “类型”定义文件？

> ID：12687779
> 
> 赞同：216
> 
> 时间：2012-10-02T09:29:02.867
> 
> 标签：typescript, tsc

我正在使用我自己和第三方的很多库。我看到“typings”目录包含一些用于 Jquery 和 WinRT...但它们是如何创建的？

* * *

## 回答 #1

> 赞同：257
> 
> 时间：2012-10-02T17:11:37.150

有几个选项可供您使用，具体取决于相关库、编写方式以及您正在寻找的准确度。让我们按照可取性的大致降序来回顾这些选项。

## 也许它已经存在

始终首先检查 DefinitelyTyped ( [https://github.com/DefinitelyTyped/DefinitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped) )。这是一个包含数以千计的 .d.ts 文件的社区存储库，很可能您正在使用的东西已经存在。您还应该检查 TypeSearch ( [https://microsoft.github.io/TypeSearch/](https://microsoft.github.io/TypeSearch/) )，它是 NPM 发布的 .d.ts 文件的搜索引擎；这将比DefiniteTyped 有更多的定义。一些模块也将它们自己的定义作为其 NPM 分发的一部分发布，因此在尝试编写自己的模块之前还要看看是否是这种情况。

## 也许你不需要一个

TypeScript 现在支持该`--allowJs`标志，并将在 .js 文件中进行更多基于 JS 的推理。您可以尝试将 .js 文件与`--allowJs`设置一起包含在编译中，以查看这是否为您提供了足够好的类型信息。TypeScript 将识别这些文件中的 ES5 样式类和 JSDoc 注释等内容，但如果库以奇怪的方式初始化自身，则可能会出错。

## 开始使用`--allowJs`

如果`--allowJs`给了你不错的结果并且你想自己编写一个更好的定义文件，你可以结合`--allowJs`使用`--declaration`来查看 TypeScript 对库类型的“最佳猜测”。这将为您提供一个不错的起点，如果 JSDoc 注释写得很好并且编译器能够找到它们，它可能与手写文件一样好。

## 开始使用 dts-gen

如果`--allowJs`不起作用，您可能需要使用 dts-gen ( [https://github.com/Microsoft/dts-gen](https://github.com/Microsoft/dts-gen) ) 作为起点。此工具使用对象的运行时形状来准确枚举所有可用属性。从好的方面来说，这往往非常准确，但该工具尚不支持抓取 JSDoc 注释以填充其他类型。你这样运行：

```
npm install -g dts-gen
dts-gen -m <your-module> 
```

这将`your-module.d.ts`在当前文件夹中生成。

## 点击贪睡按钮

如果你只是想稍后再做，暂时不用类型，现在可以在 TypeScript 2.0 中编写

```
declare module "foo"; 
```

这将让您使用 type`import`的模块。如果你有一个你想稍后处理的全局，只需写`"foo"``any`

```
declare const foo: any; 
```

这会给你一个`foo`变量。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2016-08-04T00:54:52.223

您可以`tsc --declaration fileName.ts`像 Ryan 所描述的那样使用，或者您可以在假设您已经拥有一个under 您的项目的情况下指定`declaration: true`under 。`compilerOptions``tsconfig.json``tsconfig.json`

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-10-19T09:08:04.660

[处理这个问题的最好方法（如果声明文件在definitelyTyped](https://github.com/borisyankov/DefinitelyTyped)上不可用）是只为您使用的东西而不是整个库编写声明。这大大减少了工作量 - 此外，编译器可以通过抱怨缺少方法来提供帮助。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-10-02T23:02:56.600

正如 Ryan 所说，tsc 编译器有一个从文件`--declaration`生成文件的开关。另请注意（排除错误）TypeScript 应该能够编译 Javascript，因此您可以将现有的 javascript 代码传递给 tsc 编译器。`.d.ts``.ts`

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2019-09-23T16:24:12.360

创建自己的库时，您可以`*.d.ts`使用 `tsc`（TypeScript Compiler）命令创建文件，如下所示：（假设您正在将库构建到`dist/lib`文件夹中）

```
tsc -d --declarationDir dist/lib --declarationMap --emitDeclarationOnly 
```

*   `-d`( `--declaration`): 生成`*.d.ts`文件
*   `--declarationDir dist/lib`：生成的声明文件的输出目录。
*   `--declarationMap`：为每个对应的“.d.ts”文件生成一个源映射。
*   `--emitDeclarationOnly`: 只发出 '.d.ts' 声明文件。（没有编译的 JS）

（有关所有命令行编译器选项，请参阅[文档）](https://www.typescriptlang.org/docs/handbook/compiler-options.html)

或者例如在你的`package.json`：

```
"scripts": {
    "build:types": "tsc -d --declarationDir dist/lib --declarationMap --emitDeclarationOnly",
} 
```

然后运行：（`yarn build:types`或`npm run build:types`）

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-10-02T20:24:27.097

如[http://channel9.msdn.com/posts/Anders-Hejlsberg-Steve-Lucco-and-Luke-Hoban-Inside-TypeScript](http://channel9.msdn.com/posts/Anders-Hejlsberg-Steve-Lucco-and-Luke-Hoban-Inside-TypeScript)在 00:33:52 中所述，他们构建了一个工具来将 WebIDL 和 WinRT 元数据转换为TypeScript d.ts

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-08-19T22:44:31.403

这是一些 PowerShell，它创建了一个单一的 TypeScript 定义文件，一个包含多个`*.js`现代 JavaScript 文件的库。

首先，将所有扩展名更改为`.ts`.

```
Get-ChildItem | foreach { Rename-Item $_ $_.Name.Replace(".js", ".ts") } 
```

其次，使用 TypeScript 编译器生成定义文件。会有一堆编译器错误，但我们可以忽略它们。

```
Get-ChildItem | foreach { tsc $_.Name  } 
```

最后，将所有`*.d.ts`文件合并为一个`index.d.ts`，删除`import`语句并`default`从每个导出语句中删除。

```
Remove-Item index.d.ts; 

Get-ChildItem -Path *.d.ts -Exclude "Index.d.ts" | `
  foreach { Get-Content $_ } | `
  where { !$_.ToString().StartsWith("import") } | `
  foreach { $_.Replace("export default", "export") } | `
  foreach { Add-Content index.d.ts $_ } 
```

`index.d.ts`这以包含许多定义的单个可用文件结束。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-04T17:37:44.883

我会寻找支持 Script# 或 SharpKit 的 3rd 方 JS 库的现有映射。这些 C# 到 .js 交叉编译器的用户将面临您现在面临的问题，并且可能已经发布了一个开源程序来扫描您的 3rd 方库并转换为骨架 C# 类。如果是这样，请破解扫描程序以生成 TypeScript 代替 C#。

如果做不到这一点，将 3rd 方库的 C# 公共接口转换为 TypeScript 定义可能比通过阅读源 JavaScript 来做同样的事情更简单。

我特别感兴趣的是 Sencha 的 ExtJS RIA 框架，我知道已经发布了一些项目来为 Script# 或 SharpKit 生成 C# 解释

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-08-05T23:17:03.580

此答案显示了如何使用 typescript 编译器 API 在独立函数中执行此操作：

```
import ts from 'typescript';
function createDTsTextsFromJsFilePaths(
  jsFileNames: string[]
): Record<string, string> {
  const options = {
    allowJs: true,
    declaration: true,
    emitDeclarationOnly: true,
  };
  // Create a Program with an in-memory emit
  const createdFiles: Record<string, string> = {};
  const host = ts.createCompilerHost(options);
  host.writeFile = (fileName: string, contents: string): void => {
    const dtsName = fileName.replace('.js', '.d.ts');
    createdFiles[dtsName] = contents;
  };
  // Prepare and emit the d.ts files
  const program = ts.createProgram(jsFileNames, options, host);
  program.emit();
  return createdFiles;
}
////////////// test code below here ///////////////////////////////////
import fs from 'fs'
const jsTest = 
`
"use strict"
function x(){
  return {
    a: 1, 
    b: ()=>'hello'
  }
}
`;
const jsPath = '/tmp/jstest.js';
fs.writeFileSync(jsPath, jsTest);
const createdFiles = createDTsTextsFromJsFilePaths([jsPath]);
for (const dtsName in createdFiles) {
  console.log('================');
  console.log(dtsName);
  console.log('----------------');
  console.log(createdFiles[dtsName]);
} 
```

执行测试给出结果

```
================
/tmp/jstest.d.ts
----------------
declare function x(): {
    a: number;
    b: () => string;
}; 
```

该函数源自[类型脚本编译器 API 指南中的文档](https://github.com/microsoft/TypeScript-wiki/blob/main/Using-the-Compiler-API.md#getting-the-dts-from-a-javascript-file)

# css - How to make a parent --> node relationship in css?

> ID：12687787
> 
> 赞同：0
> 
> 时间：2012-10-02T09:29:34.880
> 
> 标签：css, cross-browser, logic

Can someone help me to fix this `parent -> node` relationship in css.
To make it clear, let's see some example:

[Css: Parent and child relationship](http://jsfiddle.net/MyNameIsCode/KyQNY/)

Rules:

1.  All first Parent should be colored in Blue
2.  All sub parent should be colored in Orange
3.  All child should be colored in Green

It is considered as a parent if it has 1 or more sub node/child.
It is considered as a child if it has no sub node/child.

It means:

```
Parent1-child2-Subparent1-child1 
```

and

```
Parent1-child2-Subparent1-child2 
```

should be colored in green.
No script is allowed. Only css, and as much as possible, should be cross browser compatible. Please help, I can't figure out the logic of it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:57:48.053

@Chowlett

As I always believe, code is not the law, but the logic.
Here is the [Solution](http://jsfiddle.net/MyNameIsCode/JzRVt/)

I just added:

```
a + .jqtree-title 
```

here:

```
#tree1 .jqtree-tree > .jqtree-folder .jqtree-folder div  a + .jqtree-title
{
    color:orange;
} 
```

And everything works fine even on a deep tree hierarchy.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:58:20.203

There's no selector for this in the current [CSS Selectors Level 3](http://www.w3.org/TR/2011/REC-css3-selectors-20110929/) module. However, the [Selectors Level 4](http://dev.w3.org/csswg/selectors4/#subject) module offers a method to determine *"the subject of a selector"*.

That being said, there's no browser that implements that behaviour, as CSS4:Selectors are still a working draft. You'll have to use JavaScript.

# algorithm - 用于在任何 alpha 透明图像周围绘制轮廓或描边的算法

> ID：12687788
> 
> 赞同：9
> 
> 时间：2012-10-02T09:29:36.970
> 
> 标签：algorithm, image-processing

不确定我目前正在开发的这个算法是否有任何名称——“生长邻域算法”听起来像是一个合适的名称。那么我的问题是什么？

我想在 alpha 透明图像周围画一个笔触来勾勒它的轮廓。笔划的大小应该是用户可定义的。

我有一个由 0 和 1 填充的数组，将数组的每个项目视为一个单元格，就像在 Game of Life 中一样。值为 0 的项为空（透明像素），值为 1 的项为第一代单元格（非透明像素），代数由周围笔划的大小定义。

此示例描绘了一个由 alpha 值包围的矩形：

```
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 1 1 1 1 0 0 0
0 0 0 1 1 1 1 0 0 0
0 0 0 1 1 1 1 0 0 0
0 0 0 1 1 1 1 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 
```

然后我想让他们通过围绕每一个0代摩尔邻居来成长新一代。这是第二代（笔划为 1px） - 因此数组看起来如下增长：

```
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 2 2 2 2 2 2 0 0
0 0 2 1 1 1 1 2 0 0
0 0 2 1 1 1 1 2 0 0
0 0 2 1 1 1 1 2 0 0
0 0 2 1 1 1 1 2 0 0
0 0 2 2 2 2 2 2 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 
```

第 3 代和第 4 代（3px 笔划）：

```
4 4 4 4 4 4 4 4 4 4
4 3 3 3 3 3 3 3 3 4
4 3 2 2 2 2 2 2 3 4
4 3 2 1 1 1 1 2 3 4
4 3 2 1 1 1 1 2 3 4
4 3 2 1 1 1 1 2 3 4
4 3 2 1 1 1 1 2 3 4
4 3 2 2 2 2 2 2 3 4
4 3 3 3 3 3 3 3 3 4
4 4 4 4 4 4 4 4 4 4 
```

到现在为止还挺好。我通过以下代码片段完成了这个简单的任务：

```
for (int gen = 1; gen <= 4; gen++)
{
    for (int x = 1; x < arrayWidth - 1; x++)
    {
        for (int y = 1; y < arrayHeight - 1; y++)
        {
            // See if this cell is in the current generation.
            if (_generation[x + arrayWidth * y] == gen)
            {
                // Generate next generation.
                for (int i = x - 1; i <= x + 1; i++)
                {
                    for (int j = y - 1; j <= y + 1; j++)
                    {
                        if (_generation[i + arrayWidth * j] == 0 || _generation[i + arrayWidth * j] > gen)
                        {
                            _generation[i + arrayWidth * j] = gen + 1;
                        }
                    }
                }
            }
        }
    }
} 
```

这种方法非常适用于简单的形状，例如矩形。但是我怎样才能为椭圆做到这一点？一旦我们在单元格中有一种楼梯模式，我就会得到混乱的结果：

```
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 1 1 1 1 0 0 0 0 0
0 0 0 0 1 1 1 1 1 1 0 0 0 0
0 0 0 1 1 1 1 1 1 1 1 0 0 0
0 0 1 1 1 1 1 1 1 1 1 1 0 0
0 0 1 1 1 1 1 1 1 1 1 1 0 0
0 0 1 1 1 1 1 1 1 1 1 1 0 0
0 0 1 1 1 1 1 1 1 1 1 1 0 0
0 0 1 1 1 1 1 1 1 1 1 1 0 0
0 0 0 1 1 1 1 1 1 1 1 0 0 0
0 0 0 0 1 1 1 1 1 1 0 0 0 0
0 0 0 0 0 1 1 1 1 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0

0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 2 2 2 2 2 2 0 0 0 0
0 0 0 2 2 1 1 1 1 2 2 0 0 0
0 0 2 2 1 1 1 1 1 1 2 2 0 0
0 2 2 1 1 1 1 1 1 1 1 2 2 0
0 2 1 1 1 1 1 1 1 1 1 1 2 0
0 2 1 1 1 1 1 1 1 1 1 1 2 0
0 2 1 1 1 1 1 1 1 1 1 1 2 0
0 2 1 1 1 1 1 1 1 1 1 1 2 0
0 2 1 1 1 1 1 1 1 1 1 1 2 0
0 2 2 1 1 1 1 1 1 1 1 2 0 0
0 0 2 2 1 1 1 1 1 1 2 2 0 0
0 0 0 2 2 1 1 1 1 2 2 0 0 0
0 0 0 0 2 2 2 2 2 2 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0

0 0 0 3 3 3 3 3 3 3 3 0 0 0
0 0 3 3 2 2 2 2 2 2 3 3 0 0
0 3 3 2 2 1 1 1 1 2 2 3 3 0
3 3 2 2 1 1 1 1 1 1 2 2 3 3
3 2 2 1 1 1 1 1 1 1 1 2 2 3
3 2 1 1 1 1 1 1 1 1 1 1 2 3
3 2 1 1 1 1 1 1 1 1 1 1 2 3
3 2 1 1 1 1 1 1 1 1 1 1 2 3
3 2 1 1 1 1 1 1 1 1 1 1 2 3
3 2 1 1 1 1 1 1 1 1 1 1 2 3
3 2 2 1 1 1 1 1 1 1 1 2 2 3
3 3 2 2 1 1 1 1 1 1 2 2 3 3
0 3 3 2 2 1 1 1 1 2 2 3 3 0
0 0 3 3 2 2 2 2 2 2 3 3 0 0
0 0 0 3 3 3 3 3 3 3 3 0 0 0 
```

当将此算法应用于椭圆时，由于这个问题，轮廓看起来有点奇怪（左：算法结果，右：请求的结果）：

![算法结果（左）、请求结果（右）](../Images/806ed751f95e51b6f38b94347a7dfdfc.png)

这里的问题是我不希望每次我有这个“楼梯”模式时都会出现那些 2 2 和 3 3 重复块：

```
1 0 0 0 0 0 0 1
0 1 0 0 0 0 1 0
0 0 1 0 0 1 0 0
0 0 0 1 1 0 0 0 
```

我希望上面的第 2 代和第 3 代计算看起来像这样：

```
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 2 2 2 2 0 0 0 0 0
0 0 0 0 2 1 1 1 1 2 0 0 0 0
0 0 0 2 1 1 1 1 1 1 2 0 0 0
0 0 2 1 1 1 1 1 1 1 1 2 0 0
0 2 1 1 1 1 1 1 1 1 1 1 2 0
0 2 1 1 1 1 1 1 1 1 1 1 2 0
0 2 1 1 1 1 1 1 1 1 1 1 2 0
0 2 1 1 1 1 1 1 1 1 1 1 2 0
0 2 1 1 1 1 1 1 1 1 1 1 2 0
0 0 2 1 1 1 1 1 1 1 1 2 0 0
0 0 0 2 1 1 1 1 1 1 2 0 0 0
0 0 0 0 2 1 1 1 1 2 0 0 0 0
0 0 0 0 0 2 2 2 2 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0

0 0 0 0 0 3 3 3 3 0 0 0 0 0
0 0 0 0 3 2 2 2 2 2 3 0 0 0
0 0 0 3 2 1 1 1 1 2 3 0 0 0
0 0 3 2 1 1 1 1 1 1 2 3 0 0
0 3 2 1 1 1 1 1 1 1 1 2 3 0
3 2 1 1 1 1 1 1 1 1 1 1 2 3
3 2 1 1 1 1 1 1 1 1 1 1 2 3
3 2 1 1 1 1 1 1 1 1 1 1 2 3
3 2 1 1 1 1 1 1 1 1 1 1 2 3
3 2 1 1 1 1 1 1 1 1 1 1 2 3
0 3 2 1 1 1 1 1 1 1 1 2 3 0
0 0 3 2 1 1 1 1 1 1 2 3 0 0
0 0 0 3 2 1 1 1 1 2 3 0 0 0
0 0 0 3 2 2 2 2 2 2 3 0 0 0
0 0 0 0 3 3 3 3 3 3 0 0 0 0 
```

我尝试了许多方法来过滤掉那些重复的单元格块，但我找不到一个简单而通用的解决方案来解决这个问题。

任何想法如何获得像我从 Photoshop 或 Paint.NET 中获得的笔触/轮廓？

谢谢！

干杯P

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T09:39:18.190

正确的名称是`dilation`，检查形态学操作。您应该尝试使用圆形元素进行膨胀，这将为您提供所需的结果。

这是一个 Matlab 代码，它显示了它是如何完成的：

```
im = imcircle(70);
im = padarray(im,[20,20]);
figure;imshow(im);
im2 = imdilate(im,strel('disk',8));
figure;imshow(im2); 
```

![在此处输入图像描述](../Images/405d4940765afc4903fc6b591dd42657.png)

# jquery - JQuery：选择器意外选择器更改

> ID：12687789
> 
> 赞同：1
> 
> 时间：2012-10-02T09:29:41.480
> 
> 标签：jquery, ruby-on-rails, dynamic

你好我有一个很奇怪的问题我正在编写一个 Rails 应用程序，我正在尝试这样做：

```
if ($('.btnModal').exists()) {
  $('.btnModal').bind('click', function() {
    var $modal, fadeTime, modalCustomClass;

    $modal = $('#myModal');
    fadeTime = 1000;
    modalCustomClass = $(this).data('modal_content_selector').substring(1);
    $modal.removeClass(modalCustomClass).addClass(modalCustomClass);

    alert(modalCustomClass);
    alert($($(this).data('modal_content_selector')).html());
    alert($(this).data('modal_content_selector'));

    return $('.modal-body').html($($(this).data('modal_content_selector')).html());
  });
} 
```

此行`$modal.removeClass(modalCustomClass).addClass(modalCustomClass)`导致这种情况：

第二个警报显示 selctor .modal-body 的 html，但如果没有这一行，情况是正确的，提到的选择器显示页面中表单的 html。我已经阅读了有关 live 和 delagate 方法的内容，但我不知道如何在这里使用它们

编辑：它是：这是目录显示：

```
- provide(:title, "#{ current_catalog.name }")
= render 'shared/desktop'
= render 'shared/file_upload' 
```

这是模态部分：

```
 .modal.hide#myModal{ overflow: 'hidden', tabindex: '-1', role: 'dialog', 'aria-        hidden' => 'true' }
        .modal-body
           TEST 
```

以及带有特定按钮的侧边栏的一部分：

```
 %li
            %a.btn.btnModal{ href: "#myModal", role: 'button', data: { toggle: 'modal',   'modal_content_selector' => '.file_upload' }, remote: 'true'}
              %i.icon-file
              New 
```

另一个编辑：

这是整个渲染页面的html：

[整页](http://pastebin.com/irqwNAkg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:10:31.140

我刚刚得到启发并意识到我做这个 removeClass.addClass 的东西我在一个页面上有两个具有相同类的元素这就是为什么第二个警报显示第一个我需要的那个是在页面的最后一个位置所以像这样的东西：alert($($(this).data('modal_content_selector') + ':last').html()); 应该做的伎俩：D

# php - 权威的 PHP url 解析器

> ID：12687790
> 
> 赞同：9
> 
> 时间：2012-10-02T09:29:43.103
> 
> 标签：php, validation, url

在您告诉我使用之前`parse_url`，它还不够好，并且有太多错误。关于解析 URL 的主题有很多问题可以在这里找到，但几乎所有问题都只解析某些特定类别的 URL，或者是不完整的。

我在 PHP 中寻找一个明确的符合 RFC 标准的 URL 解析器，它能够可靠地处理浏览器可能遇到的任何 URL。在这我包括：

*   页面内部链接`#`，`#title`
*   页面相关 URL`blah/thing.php`
*   站点相关 URL`/blah/thing.php`
*   匿名协议 URL`//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js`
*   调用 URL`callto:+442079460123`
*   文件网址`file:///Users/me/thisfile.txt`
*   邮件地址`mailto:user@example.com?subject=hello`，`mailto:?subject=hello`

并支持所有常用的方案/身份验证/域/路径/查询/片段等，并将所有这些元素分解成一个数组，并为相对/无模式 URL 提供额外的标志。理想情况下，它会附带一个支持相同元素的 URL 重构器（如 http_build_url），并且我还希望应用验证（即，如果 URL 无效，它应该能够对 URL 做出最佳猜测解释，但标记它因此，就像浏览器一样）。

[这个答案](https://stackoverflow.com/a/2841977/333340)包含对这种野兽的诱人的费马式参考，但它实际上并没有去任何地方。

我查看了所有主要框架，但它们似乎只提供了围绕 parse_url 的薄包装器，这通常是一个不好的起点，因为它会犯很多错误。

那么，这样的事情存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:34:39.207

不确定`parse_url()`有多少错误，但这可能会有所帮助：

> 由于“first-match-wins”算法与 POSIX 正则表达式使用的“贪婪”消歧方法相同，因此使用正则表达式来解析 URI 引用的潜在五个组件是很自然和常见的。

> 以下行是将格式良好的 URI 引用分解为其组件的正则表达式。

```
^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?
 12            3  4          5       6  7        8 9 
```

来源：[https ://www.rfc-editor.org/rfc/rfc3986#page-51](https://www.rfc-editor.org/rfc/rfc3986#page-51)

它将位置分解为：

```
$2 - scheme
$4 - host
$5 - path
$6 - query string
$8 - fragment 
```

要重建，您可以使用：

```
$1 . $3 . $5 . $6 . $8 
```

# android - 如何在Android上的特定时间停止服务？

> ID：12687791
> 
> 赞同：1
> 
> 时间：2012-10-02T09:29:43.413
> 
> 标签：android, android-service

早上 8 点开始我的服务。我不知道如何在特定时间停止服务。

```
AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
Intent intent = new Intent(this, MyService.class);
PendingIntent pi = PendingIntent.getService(this,
(int) System.currentTimeMillis(), intent, 0);
Calendar calendar = Calendar.getInstance();
calendar.set(Calendar.HOUR_OF_DAY, 8);
calendar.set(Calendar.MINUTE, 0);
calendar.set(Calendar.SECOND, 0);
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 24*60*60*1000, pi); 
```

我希望 Myservice 每天早上 8 点开始，下午 6 点停止。

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:42:41.233

您可以在 myService.class 中使用 AlarmManager, .cancel(PendingIntent intent)，检查是否是下午 6 点，如果存在则取消警报。

检查 API： [警报管理器 API](http://developer.android.com/reference/android/app/AlarmManager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:42:53.953

This might be an old question but I came across this issue myself today and figured a way to do it: You can use a new service which stops your service, and start that service in the desired time on a daily basis using alarm manager, like this:

Define the service which will stop your service:

```
package com.youractivity;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;

public class MyServiceTerminator extends Service {

  @Override
public int onStartCommand(Intent intent, int flags, int startId) {
      return Service.START_NOT_STICKY;
  }

public void onCreate()
  {
     Intent service = new Intent(this, MyService.class);
    stopService(service);   //stop MyService
    stopSelf();     //stop MyServiceTerminator so that it doesn't keep running uselessly
  }

  @Override
  public IBinder onBind(Intent intent) {
  //TODO for communication return IBinder implementation
    return null;
  }
} 
```

add the following code after the one you posted, and run the method inside your activity:

```
private void stopRecurringAlarm(Context context) {
    Calendar updateTime = Calendar.getInstance();
    updateTime.setTimeZone(TimeZone.getTimeZone("GMT+3"));
    updateTime.set(Calendar.HOUR_OF_DAY, 18);
    updateTime.set(Calendar.MINUTE, 0);
    Intent intent = new Intent(this, MyServiceTerminator.class);
    PendingIntent pintent = PendingIntent.getService(context, 1, intent,    PendingIntent.FLAG_UPDATE_CURRENT);
    AlarmManager alarms = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    alarms.setRepeating(AlarmManager.RTC_WAKEUP,updateTime.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pintent);
} 
```

this way the service will be scheduled to start as you posted above, and scheduled to stop at 6 as shown in the code I posted.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-19T22:49:27.560

您可以使用 AlarmManager 进行调度和取消方法来停止。

```
alarmMgr.cancel(alarmIntent); 
```

您可以在这里找到所有必要的信息 [https://developer.android.com/training/scheduling/alarms.html](https://developer.android.com/training/scheduling/alarms.html)

# javascript - Twitter Bootstrap 下拉事件未在触摸设备上触发

> ID：12687792
> 
> 赞同：4
> 
> 时间：2012-10-02T09:29:45.833
> 
> 标签：javascript, jquery, twitter-bootstrap, touch-event

下拉菜单可以正常打开和关闭，但未触发单击事件/或触摸事件。我整理了一个小型测试用例[演示，但运行](http://jsfiddle.net/ashanova/p5AkF/4/)[twitter bootsrap 文档](http://twitter.github.com/bootstrap/javascript.html#dropdowns)同样容易。我已经在 Android 和 iOS 设备上尝试过。

我希望通过包含 jQueryMobile 或 Hammer.js 之类的事件库来进行纠正，但我不确定这是否会有所帮助，因为 Twitter Bootstap（我认为）包含它自己的触摸处理程序。

还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:37:48.880

作为解决此问题的方法，我使用了 Jquery Mobile 触摸事件并在下拉列表中监听了 Tapevents。这是一个简单的实现：

```
 $(".dropdown-menu").on("tap", "li a", function(e, ui){
                e.preventDefault();

                if ($(this).attr("data-toggle") === "modal")
                {
                     $($(this).attr('href')).modal("show");
                }

                return false;
            }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:06:48.240

似乎是一个已知问题，已在 bootstrap 2.1.2 - [https://github.com/twitter/bootstrap/pull/5054](https://github.com/twitter/bootstrap/pull/5054)中解决。

编辑：尝试应用票证中的更改，但也无法使其正常工作。

@CrimsonChin - 你能详细说明你的实现吗？我尝试了你的代码，但是使用 JQM 和引导程序我得到了各种奇怪的行为。

# enums - 如何在 TypeScript 中创建类似类型的枚举？

> ID：12687793
> 
> 赞同：148
> 
> 时间：2012-10-02T09:29:47.830
> 
> 标签：enums, typescript

我正在为 TypeScript 的 Google 地图 API 编写定义文件。

我需要定义一个枚举类型，例如。`google.maps.Animation`其中包含两个属性：`BOUNCE`和`DROP`。

这应该如何在 TypeScript 中完成？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-10-02T09:45:07.597

TypeScript 0.9+ 有一个枚举规范：

```
enum AnimationType {
    BOUNCE,
    DROP,
} 
```

最后的逗号是可选的。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-10-02T09:40:53.763

从 TypeScript 0.9（目前是 alpha 版本）开始，您可以像这样使用枚举定义：

```
enum TShirtSize {
  Small,
  Medium,
  Large
}

var mySize = TShirtSize.Large; 
```

默认情况下，这些枚举将分别分配 0、1 和 2。如果要显式设置这些数字，可以将其作为枚举声明的一部分。

清单 6.2 具有显式成员的枚举

```
enum TShirtSize {
  Small = 3,
  Medium = 5,
  Large = 8
}

var mySize = TShirtSize.Large; 
```

这两个示例都是直接从[TypeScript for JavaScript Programmers](https://leanpub.com/typescriptbook)中提取出来的。

**请注意，这与 0.8 规范不同。**0.8 规范看起来像这样 - 但它被标记为实验性的并且可能会更改，因此您必须更新任何旧代码：

**免责声明**- 这个 0.8 示例将在较新版本的 TypeScript 编译器中被破坏。

```
enum TShirtSize {
  Small: 3,
  Medium: 5,
  Large: 8
}

var mySize = TShirtSize.Large; 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-08-17T13:23:02.910

这现在是语言的一部分。有关这方面的文档，请参阅[TypeScriptLang.org > Basic Types > enum](http://www.typescriptlang.org/Handbook#basic-types-enum)。有关如何使用这些枚举的文档摘录：

```
enum Color {Red, Green, Blue};
var c: Color = Color.Green; 
```

或使用手动支持号码：

```
enum Color {Red = 1, Green = 2, Blue = 4};
var c: Color = Color.Green; 
```

您还可以使用例如返回枚举名称`Color[2]`。

这是一个如何将这一切结合在一起的示例：

```
module myModule {
    export enum Color {Red, Green, Blue};

    export class MyClass {
        myColor: Color;

        constructor() {
            console.log(this.myColor);
            this.myColor = Color.Blue;
            console.log(this.myColor);
            console.log(Color[this.myColor]);
        }
    }
}

var foo = new myModule.MyClass(); 
```

这将记录：

> ```
> undefined  
> 2  
> Blue 
> ```

因为，在撰写本文时，Typescript Playground 将生成以下代码：

```
var myModule;
(function (myModule) {
    (function (Color) {
        Color[Color["Red"] = 0] = "Red";
        Color[Color["Green"] = 1] = "Green";
        Color[Color["Blue"] = 2] = "Blue";
    })(myModule.Color || (myModule.Color = {}));
    var Color = myModule.Color;
    ;
    var MyClass = (function () {
        function MyClass() {
            console.log(this.myColor);
            this.myColor = Color.Blue;
            console.log(this.myColor);
            console.log(Color[this.myColor]);
        }
        return MyClass;
    })();
    myModule.MyClass = MyClass;
})(myModule || (myModule = {}));
var foo = new myModule.MyClass(); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-10-04T23:29:02.673

请注意，您可以使用以下内容进行 id/string 枚举：

```
class EnumyObjects{
    public static BOUNCE={str:"Bounce",id:1};
    public static DROP={str:"Drop",id:2};
    public static FALL={str:"Fall",id:3};

} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-11-22T11:30:45.480

**更新**：

正如@iX3 所指出的，**Typescript 2.4**支持枚举字符串。

请参阅：[在 Typescript 中使用字符串值创建枚举](https://stackoverflow.com/questions/15490560/create-an-enum-with-string-values-in-typescript#answer-15491832)

* * *

**原答案：**

对于 String 成员值，TypeScript 只允许将数字作为枚举成员值。但是您可以实施一些解决方案/技巧；

**解决方案1：**

复制自：[https ://blog.rsuter.com/how-to-implement-an-enum-with-string-values-in-typescript/](https://blog.rsuter.com/how-to-implement-an-enum-with-string-values-in-typescript/)

有一个简单的解决方案：在分配之前将字符串文字转换为任何：

```
export enum Language {
    English = <any>"English",
    German = <any>"German",
    French = <any>"French",
    Italian = <any>"Italian"
} 
```

**解决方案2：**

复制自：[https ://basarat.gitbooks.io/typescript/content/docs/types/literal-types.html](https://basarat.gitbooks.io/typescript/content/docs/types/literal-types.html)

您可以使用字符串文字作为类型。例如：

```
let foo: 'Hello'; 
```

在这里，我们创建了一个名为 foo 的变量，它只允许将文字值 'Hello' 分配给它。如下所示：

```
let foo: 'Hello';
foo = 'Bar'; // Error: "Bar" is not assignable to type "Hello" 
```

它们本身并不是很有用，但可以在类型联合中组合以创建强大（且有用）的抽象，例如：

```
type CardinalDirection =
    "North"
    | "East"
    | "South"
    | "West";

function move(distance: number, direction: CardinalDirection) {
    // ...
}

move(1,"North"); // Okay
move(1,"Nurth"); // Error! 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-11-15T21:00:58.337

## 打字稿中的枚举：

枚举被放入打字稿语言中以定义一组命名常量。使用枚举可以让我们的生活更轻松。原因是这些常量通常比枚举所代表的值更容易阅读。

## 创建一个枚举：

```
enum Direction {
    Up = 1,
    Down,
    Left,
    Right,
} 
```

来自 typescript 文档的这个例子很好地解释了枚举是如何工作的。请注意，我们的第一个枚举值 (Up) 初始化为 1。然后，数字枚举的所有以下成员都从该值**自动递增**（即 Down = 2，Left = 3，Right = 4）。如果我们没有用 1 初始化第一个值，枚举将从 0 开始，然后自动递增（即 Down = 1，Left = 2，Right = 3）。

## 使用枚举：

我们可以通过以下方式访问枚举的值：

```
Direction.Up;     // first the enum name, then the dot operator followed by the enum value
Direction.Down; 
```

请注意，这样我们编写代码的方式更具**描述性。**枚举基本上阻止我们使用**幻数**（代表某些实体的数字，因为程序员在特定上下文中赋予了它们含义）。由于以下原因，幻数不好：

1.  我们需要更努力地思考，我们首先需要将数字转换为实体，然后才能对代码进行推理。
2.  如果我们在很长一段时间后审查我们的代码，或者其他程序员审查我们的代码，他们不一定知道这些数字的含义。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-13T10:02:46.560

对我来说可以输入这样的枚举（这也允许您将其作为对象循环）：

```
enum: { [x: string]: string } 
```

地图示例：

```
export const yourFunction = (
  enum: { [x: string]: string },
 ) => { 
  const iHaveBeenMapped = Object.keys(enum).map((key) => {
   const enumValue = enum[key];
  }); 
 } 
```

# silverlight - 实体框架 - 找不到类

> ID：12687795
> 
> 赞同：0
> 
> 时间：2012-10-02T09:29:59.133
> 
> 标签：silverlight, class, frameworks, entity, auto-generate

我对使用 ADO Entity Framework 4.0 的 Silverlight 应用程序有疑问。应用程序找不到一个由实体框架自动生成的类，而其他类是它自动生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:37:19.110

我解决了错误。问题在于代码的编译。该类以前从未使用过，因此它不是在 *. G.cs（自动生成的文件）。编译我在解决方案的web部分中使用的类，并编译它。填写后我在文件中找到 *. G.cs Silverlight 的一部分。

# android - Android - XML Accessbility Service 不会构建

> ID：12687796
> 
> 赞同：0
> 
> 时间：2012-10-02T09:29:59.187
> 
> 标签：android, xml, service, compatibility

我编写了一个非常简单的可访问性服务，代码可以在没有为元数据定义的 xml 文件的情况下正常工作，但我想添加 xml 文件以实现兼容性。

```
<?xml version="1.0" encoding="utf-8"?>
<accessibility-service
    xmlns:android="http://schemas.android.com/apk/res/android" 
     android:accessibilityEventTypes="typeNotificationStateChanged"
     android:notificationTimeout="100"
     android:description=""
/> 
```

但是我得到的错误是没有定义'android：'资源，而且我也不允许这种描述。尽管无论我输入什么或我证明什么字符串资产都会发生描述。

有人有想法么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:38:23.250

Thanks for the suggested solutions. Turns out that you need to have your target build at 14 for eclipse to accept that xml file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:02:01.257

它需要 xmlns 部分....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:47:00.160

[这里](http://developer.android.com/training/accessibility/service.html#configure)它说 android 4.0 可以选择使用 xml 配置无障碍服务。您使用的是 4.0+ 吗？

它还提到了某些配置选项，例如`canRetrieveWindowContent`仅在使用 XML 配置时可用。你在使用这样的选项吗？如果没有，我认为你真的不需要 XML 配置。

# maven - 如何使用 Maven 阴影插件修复“ZLIB 输入流的意外结束”？

> ID：12687797
> 
> 赞同：1
> 
> 时间：2012-10-02T09:30:09.327
> 
> 标签：maven

运行 Maven Shade 插件时，出现以下错误。我该如何调试呢？

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-shade-plugin:2.0:shade (make-shade) on project csprocessor-client: Error creating shaded jar: Unexpected end of ZLIB input stream -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-shade-plugin:2.0:shade (make-shade) on project csprocessor-client: Error creating shaded jar: Unexpected end of ZLIB input stream
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:534)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: Error creating shaded jar: Unexpected end of ZLIB input stream
    at org.apache.maven.plugins.shade.mojo.ShadeMojo.execute(ShadeMojo.java:551)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:107)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
Caused by: java.io.EOFException: Unexpected end of ZLIB input stream
    at java.util.zip.ZipFile$ZipFileInflaterInputStream.fill(ZipFile.java:411)
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:158)
    at java.io.FilterInputStream.read(FilterInputStream.java:107)
    at org.codehaus.plexus.util.IOUtil.copy(IOUtil.java:188)
    at org.codehaus.plexus.util.IOUtil.copy(IOUtil.java:174)
    at org.apache.maven.plugins.shade.DefaultShader.addRemappedClass(DefaultShader.java:259)
    at org.apache.maven.plugins.shade.DefaultShader.shade(DefaultShader.java:151)
    at org.apache.maven.plugins.shade.mojo.ShadeMojo.execute(ShadeMojo.java:484)
    ... 21 more
[ERROR] 
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:30:09.327

事实证明，使用 m2eclipse 插件，您实际上可以在执行 maven 插件时对其进行调试。为此，您需要选择要单步执行的代码，您可以通过在 Maven 运行配置中设置**调试输出选项来实现。**您还需要设置**Resolve Workspace artifacts**选项。

![在此处输入图像描述](../Images/efc8b463b5d5c78887fb8a1cea18a744.png)

使用这两个选项，我可以单击错误中列出的文件位置（在本例中为 ZipFile.java:411），设置断点，然后使用**Debug As > Maven Build**在调试模式下运行 Maven 构建。一旦断点被​​命中，我就可以知道哪个文件导致了错误，并使用[JAR 命令](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)重新打包它。即使有问题的 JAR 文件可以使用 GUI 存档工具打开，一旦使用 JAR 命令重新打包，我也可以成功运行 Maven Shade plgin。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-23T13:30:39.013

仅供参考，如果这是由下载期间损坏的 JAR 引起的，强制重新下载的快速方法是[`mvn dependency:purge-local-repository`](http://maven.apache.org/plugins/maven-dependency-plugin/purge-local-repository-mojo.html)在*着色*项目中运行。这将从本地 Maven 存储库[中删除项目的所有依赖](http://maven.apache.org/plugins/maven-dependency-plugin/examples/purging-local-repository.html)项（直接和传递）并重新下载它们。

# java - JDO - 使用注释的 1-N 单向关系 - 列名？

> ID：12687808
> 
> 赞同：0
> 
> 时间：2012-10-02T09:30:52.947
> 
> 标签：java, jdo, datanucleus

我第一次将 JDO（使用 Datanucleus 实现）用于一个新项目，并且在使用 JDO 注释定义 1-N 单向拥有关系时遇到了麻烦。我需要的是在 a 中有一个集合`Subitems`，`Item`这样 a`Subitem`就没有对所有者的引用：

```
@PersistenceCapable(detachable = "true")
public class Item {
    ...
    @Persistent(defaultFetchGroup = "true")
    Collection<Subitem> subitems;
    ...
} 
```

一切都很好，但是我如何定义关系映射到哪个现有的 RDBMS 列？AFAIK 通过在子表中创建不可为空的**表列**在数据库中实现拥有的 1-N，但我没有（也不想要）父引用**类字段**，`Subitem`然后我可以用`@Column(name="...")`注释装饰.

以及如何`@ForeignKey`在 JDO3 中正确使用注解？注释接受 FK 约束的*名称*，但不接受相应的 FK 表和列规范。根据定义，FK 是参考。*基于公共键的两个*表之间的约束，但我似乎无法指定另一个表和一个公共键（[@ForeginKey at Datanucleus JDO docs](http://www.datanucleus.org/products/datanucleus/jdo/annotations.html#ForeignKey)）。

编辑： `@Element(column="...")`应该使用注释：

```
@PersistenceCapable(detachable = "true")
public class Item {
    ...
    @Persistent(defaultFetchGroup = "true")
    @Element(column="itemId")
    Collection<Subitem> subitems;
    ...
} 
```

正如答案中的文档链接中明确指出的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:05:23.487

JDO（或JPA）没有“拥有”关系，只有关系（这是我只听说过与GAE数据存储相关的术语，你没有使用它）。

恕我直言，DataNucleus 文档充分定义了所有此类关系，因此只需从您到达的位置导航菜单，例如 [http://www.datanucleus.org/products/accessplatform_3_1/jdo/orm/one_to_many_collection.html#fk_uni](http://www.datanucleus.org/products/accessplatform_3_1/jdo/orm/one_to_many_collection.html#fk_uni)

[http://www.datanucleus.org/products/accessplatform_3_1/jdo/orm/constraints.html#fk](http://www.datanucleus.org/products/accessplatform_3_1/jdo/orm/constraints.html#fk)

# c# - XNA 体素引擎中的深度渲染问题

> ID：12687812
> 
> 赞同：0
> 
> 时间：2012-10-02T09:31:14.480
> 
> 标签：c#, xna, depth, voxel

过去几天我们研究了体素引擎。如果我们绘制立方体，我们会遇到一些深度渲染问题。请参阅以下 Youtube 视频：http: [//youtu.be/lNDAqO7yHBQ](http://youtu.be/lNDAqO7yHBQ)

我们已经沿着这个问题搜索并找到了不同的方法，但它们都没有解决我们的问题。

*   GraphicsDevice.Clear(ClearOptions.DepthBuffer | ClearOptions.Target, Color.CornflowerBlue, 1.0f, 0);
*   GraphicsDevice.BlendState = BlendState.Opaque;
*   GraphicsDevice.DepthStencilState = DepthStencilState.Default;
*   GraphicsDevice.SamplerStates[0] = SamplerState.LinearWrap；

我们的`LoadContent()`方法：

```
protected override void LoadContent()
{
    // Create a new SpriteBatch, which can be used to draw textures.
    _spriteBatch = new SpriteBatch(GraphicsDevice);

    // TODO: use this.Content to load your game content here
    _effect = new BasicEffect(GraphicsDevice);

    _vertexBuffer = new VertexBuffer(GraphicsDevice, Node.VertexPositionColorNormal.VertexDeclaration, _chunkManager.Vertices.Length, BufferUsage.WriteOnly);
    _vertexBuffer.SetData(_chunkManager.Vertices); // copies the data from our local vertices array into the memory on our graphics card

    _indexBuffer = new IndexBuffer(GraphicsDevice, typeof(int), _chunkManager.Indices.Length, BufferUsage.WriteOnly);
    _indexBuffer.SetData(_chunkManager.Indices);
} 
```

我们的`Draw()`方法：

```
protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.CornflowerBlue);

    GraphicsDevice.BlendState = BlendState.Opaque;
    GraphicsDevice.DepthStencilState = DepthStencilState.Default;
    GraphicsDevice.RasterizerState = RasterizerState.CullClockwise;

    // Set object and camera info
    //_effect.World = Matrix.Identity;
    _effect.View = _camera.View;
    _effect.Projection = _camera.Projection;
    _effect.VertexColorEnabled = true;
    _effect.EnableDefaultLighting();

    // Begin effect and draw for each pass
    foreach (var pass in _effect.CurrentTechnique.Passes)
    {
        pass.Apply();

        GraphicsDevice.SetVertexBuffer(_vertexBuffer);
        GraphicsDevice.Indices = _indexBuffer;

        GraphicsDevice.DrawIndexedPrimitives(PrimitiveType.TriangleList, 0, 0, _chunkManager.Vertices.Count(), 0, _chunkManager.Indices.Count() / 3);
    }

    base.Draw(gameTime);
} 
```

我们的视图和投影设置：

```
Projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4, (float)Game.Window.ClientBounds.Width / Game.Window.ClientBounds.Height, 1, 500);
View = Matrix.CreateLookAt(CameraPosition, CameraPosition + _cameraDirection, _cameraUp); 
```

我们使用Aaron Reed 的书 ( [http://shop.oreilly.com/product/0636920013709.do](http://shop.oreilly.com/product/0636920013709.do) )中的相机 ( [http://www.filedropper.com/camera_1](http://www.filedropper.com/camera_1 "下载 Camera.cs") )。

你看到我们遗漏的东西了吗？或者你有解决这个问题的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-12T16:03:42.290

是的，这是游戏中的一个众所周知的问题，尤其是大型世界模拟，例如飞行和太空模拟。本质上，当相机离原点太远时，会出现浮点不准确性，这会造成严重破坏，尤其是在旋转过程中。

解决方案是一种称为[浮动起源的方法，在这种方法中，您实际上是](http://wiki.unity3d.com/index.php?title=Floating_Origin)*在移动宇宙*，而不是移动眼睛。本文适用于 Unity3D，但由于它是 .net，您可以将其转换为 XNA。*[你可以在这篇优秀的文章](http://www.gamasutra.com/view/feature/131393/a_realtime_procedural_universe_.php?print=1)*中阅读更多关于它的信息

此外，您只能在 z 缓冲区中挤入有限数量的位，同时查看非常近和非常远的位置。为此，您需要使用对数 z 缓冲区而不是 1:1。*[想知道更多？](http://outerra.blogspot.com.au/2012/11/maximizing-depth-buffer-range-and.html)*

[前段时间我在这里](http://mickyd.wordpress.com/2012/11/07/autonomous-steering-update-for-space-simulator/)研究我的太空模拟时，我在[博客](http://mickyd.wordpress.com/2012/11/07/autonomous-steering-update-for-space-simulator/)上写过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:08:24.790

今天我们研究了这个话题。我们原始代码中体素的坐标是 arround (X:600'000, Y:750, Z:196'000)。在我们将所有体素重新定位到更接近零点（X:0、Y:0、Z:0）之后，所描述的问题就消失了。我们假设这与 XNA 使用的数据类型浮点数有关。根据 MSDN (http://msdn.microsoft.com/en-us/library/b1e65aza.aspx)，浮点数的精度只有 7 位。我们得出的结论是，如果您将体素放在精度为 7 位的坐标上，并且因为 XNA 的 DepthBuffer 与浮点数一起使用，您将获得我们上面描述的效果。

也许有人可以证实我们的假设？

谢谢！

# javascript - Win8底部滚动条

> ID：12687813
> 
> 赞同：0
> 
> 时间：2012-10-02T09:31:15.243
> 
> 标签：javascript, html, css, windows-8

嘿伙计们，我正在开发一个 win8 应用程序，但找不到解决方案，我如何在 win8 中获得页面底部的水平滚动条

顺便说一句，我正在使用

```
#container{display:-ms-grid;}

.col1{-ms-grid-column:1;}
.col2{-ms-grid-column:2;}
.col3{-ms-grid-column:3;} 
```

任何人都有解决方案，也许是滚动条遵循内容高度的原因？而不是窗口高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:15:24.767

我找到了解决方案，我必须将所有输出 div 设置为 100% 的高度，然后将每个页面的部分标签设置为 88% 的高度，然后将标题设置为 12%。

最后但并非最不重要的是将我的部分标签设置为溢出-x：滚动；

代码的简短版本：

```
body{height:100%;}
header{height:12%;}
section{
  height:88%;
  overflow-x:scroll;
  display:block;
}
#contenthost{height:100%;}
.pagediv{height:100%;} 
```

这解决了我的问题

最好的问候 SP

# translation - 如何通过浏览器首选项在 ZF2 中设置语言环境？

> ID：12687821
> 
> 赞同：5
> 
> 时间：2012-10-02T09:31:47.140
> 
> 标签：translation, zend-framework2

在 Zend 框架 1 中我可以做到

```
try {
    $locale = new Zend_Locale('browser'); 
} catch (Zend_Locale_Exception $e) {
    $locale = new Zend_Locale('en');   
}
$registry = Zend_Registry::getInstance();
$registry->set('Zend_Locale', $locale); 
```

但是它如何与 Zend Framework 2 一起工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T11:05:55.203

我最近写了一篇关于 Zend Framework 2 以及所有 i18n、l10n 和语言环境设置如何工作的博客。这对您来说可能也很有趣，因为可以通过多种方式设置使用的语言环境。

阅读：[Zend Framework 2 - translate, i18n, locale](http://samminds.com/2012/09/zend-framework-2-translate-i18n-locale/)

我个人采用以下方法，然后 - 根据您的结构 - 您可以从数据库、会话或 cookie 或其他任何地方添加语言环境；）

```
<?php
namespace FileManager;

use Zend\Mvc\ModuleRouteListener;

class Module
{
    public function onBootstrap($e)
    {
        $translator = $e->getApplication()->getServiceManager()->get('translator');
        $translator
          ->setLocale(\Locale::acceptFromHttp($_SERVER['HTTP_ACCEPT_LANGUAGE']))
          ->setFallbackLocale('en_US');
    }

    //...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T10:23:01.487

从这个[RFC](http://framework.zend.com/wiki/display/ZFDEV2/RFC+-+i18n+layer)来看，决定将 Zend_Locale 排除在 Zend Framework 2 之外并依赖于核心[PHP I18n 类](http://us.php.net/intl)。

我建议从[介绍](http://us.php.net/manual/en/intro.intl.php)开始阅读手册，以更好地理解这些类，然后重构代码以使用它们。

# performance - 如何在使用 Spring EntityManager Hibernate 持久化大型集合时提高性能

> ID：12687836
> 
> 赞同：2
> 
> 时间：2012-10-02T09:32:45.610
> 
> 标签：performance, spring, hibernate, jdbc, persistence.xml

我正在使用 Spring/Hibernate 完成 JPA 方式，`org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean`并使用 spring xml、persistence.xml 和 JPA 2 注释进行配置。

从功能上讲，它很好并且可以正确地持久化。但是，我需要尽快存储具有双向 OneToMany 和大量 B 集合的实体 A。

我正在使用 persistence.xml 中的各种选项来尝试加快插入速度并减少内存使用（应用程序的写入量与读取量差不多）

```
<property name="hibernate.id.new_generator_mappings" value="true" />
<property name="hibernate.jdbc.batch_size" value="50" />
<property name="hibernate.order_inserts" value="true" />
<property name="hibernate.order_updates" value="true" />
<property name="hibernate.cache.use_query_cache" value="false" />
<property name="hibernate.cache.use_second_level_cache" value="false" /> 
```

并坚持使用

```
entityManager.persist(instanceOfA) 
```

编辑附加信息：

每个实体都有一个生成的 id，如下所示：

```
@Id
    @Column(name="ID")
    @GeneratedValue(strategy=GenerationType.AUTO, generator="SEQUENCE_GENERATOR")
    @SequenceGenerator(name="SEQUENCE_GENERATOR", sequenceName="MY_SEQUENCE", allocationSize=50)
    private Long id; 
```

这与 Oracle 序列有关

```
CREATE SEQUENCE MY_SEQUENCE MINVALUE 1 MAXVALUE 999999999999999999999999999 START WITH 1 INCREMENT BY 50 NOCYCLE NOCACHE NOORDER; 
```

当我使用 show sql 运行代码时，我可以看到很多插入语句需要很长时间。

我读过我需要`entityManager.flush(); entityManager.clear();`每插入 50 行调用一次。

[http://abramsm.wordpress.com/2008/04/23/hibernate-batch-processing-why-you-may-not-be-using-it-even-if-you-think-you-are/](http://abramsm.wordpress.com/2008/04/23/hibernate-batch-processing-why-you-may-not-be-using-it-even-if-you-think-you-are/)

这是否意味着我需要将坚持分解为

```
entityManager.persist(instanceOfA);
instanceOfA.addB(instanceOfB);
entityManager.persist(instanceofB); 
```

每 50 次调用添加一次刷新清除`persist()`?

有更清洁的方法吗？（我的实际对象层次结构有大约 7 层关系，如 A 和 B）

我正在考虑使用 JDBC 进行插入，但我讨厌编写行映射器 :)

我听说过，`org.hibernate.StatelessSession`但没有任何方法可以从 JPA 实体管理器中获取它，而无需在某些时候强制转换为 SessionFactory - 再次不是很干净。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T10:00:30.203

我在我的一个项目中遇到了同样的问题。我正在使用带有`identity`ID 生成器的 MySQL 后端的 Hibernate。问题在于，Hibernate 需要为每个保存的实体访问数据库一次才能实际获取它的 ID。我切换到`increment`生成器并看到了立竿见影的好处（所有插入都已批量处理）。

```
@Id
@GeneratedValue(generator = "increment")
@GenericGenerator(name = "increment", strategy = "increment")
@Column(name = "id", nullable = false)
private long id; 
```

生成器在内存中`increment`生成 ID，不需要访问数据库。我猜`sequence`生成器还需要访问数据库，因为它是在数据库中定义的。使用的缺点`increment`是，Hibernate 应该具有对数据库的独占插入访问权限，并且它可能在集群设置中失败。

我使用的另一个技巧是附加`rewriteBatchedStatements=true`到 JDBC URL。这是 MySQL 特有的，但我认为 Oracle 可能有类似的指令。

并且“在每 n 次插入后调用刷新”技巧也有效。这是一个示例代码（使用 google-guava 类）：

```
public List<T> saveInBatches(final Iterable<? extends T> entities, final int batchSize) {
    return ImmutableList.copyOf(
        Iterables.concat(
            Iterables.transform(
                Iterables.partition(entities, batchSize),
                new Function<List<? extends T>, Iterable<? extends T>>() {
                    @Override
                    public Iterable<? extends T> apply(final List<? extends T> input) {
                        List<T> saved = save(input); flush(); return saved;
                    }})));
}

public List<T> save(Iterable<? extends T> entities) {
    List<T> result = new ArrayList<T>();
    for (T entity : entities) {
        entityManager.persist(entity);
        result.add(entity);
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T04:29:28.333

使用纯 JDBC 进行批量/大型插入。不要为此使用任何 ORM 框架。

# solr - solr dismax 识别短语匹配

> ID：12687843
> 
> 赞同：2
> 
> 时间：2012-10-02T09:33:06.540
> 
> 标签：solr, lucene, edismax

我正在使用 edismax 查询处理程序在文本字段中搜索“我想要本田自行车”。

我的目的是找出其中包含“本田自行车”的文档。

现在结果包含“honda”、“bike”和“honda bike”。基本上我对“本田”和“自行车”不感兴趣。我实际上对“本田自行车”感兴趣。

有什么方法可以确定字段中的短语是否与用户查询匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:11:04.137

我会调查这些参数——pf、pf2 和 pf3。

pf——短语字段。这将让您提升您的 q 值非常接近的文档。

pf2 和 pf3 - 将输入切分为二元组（或三元组）。

还有一些 slop 设置可以在匹配中留出一些余地。

[http://wiki.apache.org/solr/ExtendedDisMax#pf_.28Phrase_Fields.29](http://wiki.apache.org/solr/ExtendedDisMax#pf_.28Phrase_Fields.29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:40:14.977

问题是 IDF 扰乱了得分，因此我不能完全依靠得分来自信地说出完美匹配的内容。所以我禁用了 IDF 计算。

看一眼

[http://lucene.472066.n3.nabble.com/Identify-exact-search-in-edismax-td4011859.html#a4011976](http://lucene.472066.n3.nabble.com/Identify-exact-search-in-edismax-td4011859.html#a4011976)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T07:56:10.763

可以在此处使用 edismax 的 mm（最小“应该”匹配）功能

[http://wiki.apache.org/solr/ExtendedDisMax](http://wiki.apache.org/solr/ExtendedDisMax)

# c# - 强制引用程序集

> ID：12687850
> 
> 赞同：1
> 
> 时间：2012-10-02T09:33:55.337
> 
> 标签：c#

有没有办法告诉编译器不要在不编写虚拟代码的情况下删除目标程序集未使用的一些引用程序集？

例如，我有 2 个参考：

```
MyAssembly
    -> MyLoggingAbstraction
    -> MyLoggingAbstraction.NLog 
```

但是，我的程序集仅使用`MyLoggingAbstraction`扫描当前`AppDomain`程序集及其引用并尝试查找实现的类型。这听起来可能过于复杂，但我真的想确保从 nuget 下载包就足够了，而不是编写任何额外的代码来使用该包。

# .net - 如何在安装 Windows .net 应用程序期间将文件复制到给定路径

> ID：12687851
> 
> 赞同：0
> 
> 时间：2012-10-02T09:34:00.900
> 
> 标签：.net, windows, installation

我正在创建一个安装程序来安装一个窗口 .net 应用程序。我设法将所有应用程序程序集安装到给定位置（[ProgramFilesFolder][Manufacturer][ProductName]）。无论如何，我需要将一个单独的 xml 文件复制到另一个位置。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:31:41.683

您必须创建一个安装程序类并覆盖[Commit](http://msdn.microsoft.com/en-us/library/system.configuration.install.installer.commit.aspx)方法，在那里您可以编写复制文件的代码。在[自定义操作](http://msdn.microsoft.com/en-us/library/d9k65z2d%28v=vs.80%29.aspx)编辑器上的 MSI 项目中，添加安装程序类 Commit 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:28:00.727

MSDN 提供了有关如何执行此操作的出色文档。
您需要按照此处所述添加自定义文件夹：
[如何：在文件系统编辑器中添加和删除文件夹](http://msdn.microsoft.com/en-US/library/x56s4w8x%28v=vs.80%29.aspx)

> 添加自定义文件夹
> 
> 在文件系统编辑器的文件夹列表中，选择目标机器上的文件系统节点。
> 
> 在操作菜单上，指向添加特殊文件夹，然后单击自定义文件夹或 Web 自定义文件夹。
> 
> 新文件夹在文件夹列表中突出显示。
> 
> 键入自定义文件夹的名称。

然后，您可以按照此处所述添加文件：
[如何：将项目添加到部署项目](http://msdn.microsoft.com/en-US/library/z11b431t%28v=vs.80%29.aspx)

> 将项目输出或文件添加到部署项目
> 
> 打开文件系统编辑器。有关更多信息，请参阅如何：打开部署编辑器。
> 
> 在目标计算机上选择要安装该项目的文件夹。

# javascript - 使 Javascript 呈现的可点击

> ID：12687852
> 
> 赞同：1
> 
> 时间：2012-10-02T09:34:03.747
> 
> 标签：javascript, jquery, html, ajax

我对 web 开发和 AJAX 很陌生，我在那里遇到了一个小问题。基本上，我的网页上有一个表格。当我提交此表单时，它会向我的控制器发出 AJAX 调用，将我想要的数据发送给我，并更改页面的 html 内容。

JS代码：

```
$(document).ready(function() {

    $("#mydiv table tbody td").click(function() {
        alert("You clicked my <td>!" + $(this).html() + 
              "My TR is:" + $(this).parent("tr").html());
    });

    $('#myform').submit(function()
    {
        try {
            var host = $("#host").val();
            var port = $("#port").val();
            var username = $("#username").val();
            var password = $("#password").val();
            var database = $("#database").val();

            $.ajax({
                type: "POST",
                url: "/management/connectDatabase",
                dataType: "JSON",
                data: "host="+host+"&port="+port+"&username="+username+"&password="+password+"&database="+database,
                cache: false,
                success: 
                    function(data){
                        $('#mydiv').html(show_tables(data));
                    },
            });
            return false;
        }

        catch(e){
            console.debug(e);
        }
    });
});

function show_tables(data)
{
    var html = '<div id="mydiv">';

    html += '<table class="display" id="example">';
    html += '<thead><tr><th>Tables</th></tr></thead><tbody>';
    for (var tablesCount = 0; tablesCount < data.tables.length; tablesCount++){
        html += '<tr class=gradeA id="trtest">';
        html += '<td id="tdtest">' + data.tables[tablesCount] + '</td>';
        html += '</tr>';
    }
    html += '</tbody></table>';

    html += '</div>';
    return html;
} 
```

当我提交表单时，HTML 生成正确，我可以看到我的内容。但是，我无法单击`<table>`. 此外，当我想查看我的页面的源代码时，它不会向我显示表格，但仍然是我的表单，即使它仍然经过验证。

有人可以解释一下我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:37:12.277

根据您使用的 jQuery 版本，您需要使用`jQuery.delegate`或绑定 click 事件`jQuery.on`，以便使用动态添加的 DOM 元素。

编辑：正如 Geert Jaminon 所指出的，你必须使用函数的`selector`参数`on`。这对我有用。

```
$("#mydiv table tbody").on('click', 'td', function() {
    alert("You clicked my <td>!" + $(this).html() + 
          "My TR is:" + $(this).parent("tr").html());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:55:14.067

```
$("#mydiv table tbody").on('click', 'td', function() {
    alert("You clicked my <td>!" + $(this).html() + "My TR is:" + $(this).parent("tr").html());
}); 
```

.live() 在较新的 jQuery 版本中被 .on() 取代。

[http://jsfiddle.net/ZqYgv/](http://jsfiddle.net/ZqYgv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:40:48.333

如果动态插入数据，则需要在插入数据后添加点击事件。

[http://codepen.io/thomassnielsen/pen/FEKDg](http://codepen.io/thomassnielsen/pen/FEKDg)

```
$.post('ajax/test.html', function(data) {
  $('.result').html(data);
  // Add .click code here
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T09:42:11.953

您需要在渲染元素后绑定 click 事件处理程序，因为在您进行绑定时它们还没有到位。

# r - 使用 R 比较来自 2 个不同文件的列

> ID：12687856
> 
> 赞同：0
> 
> 时间：2012-10-02T09:34:16.113
> 
> 标签：r, compare

我有2个文件如下

文件 1：

```
Locus   S1  S2  S3
loc1    87  56  77
loc2    34  55  75
loc3    12  09  78
loc4    34  67  89
loc5    78  65  46 
```

文件 2：

```
Locus   S1  S2  S3
loc3    13  43  34
loc5    43  56  90
loc7    89  56  33
loc1    56  88  00
loc4    66  77  98
loc2    34  44  66 
```

我想比较/匹配两个文件中的“轨迹”列，这样，在“new_output 文件”中，我应该有来自 File1 的“轨迹”列的序列和来自 File2 的相应轨迹的值。

所以我的“new_output 文件”应该是这样的，

```
Locus   S1  S2  S3
loc1    56  88  00
loc2    34  44  66
loc3    13  43  34
loc4    66  77  98
loc5    43  56  90 
```

我尝试过类似的东西，

```
file1 <-read.delim(file="file1.txt",header=TRUE,sep="\t")
file2 <-read.delim(file="file2.txt",header=TRUE,sep="\t")
new_output <- file1[file1$Locus %in% file2$Locus,]
write.table(new_output,file="new_output.txt",sep="\t") 
```

但这并没有真正按照我想要的方式给我结果。谁能帮我这个？告诉我，我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:33:03.843

您可以使用该功能`merge`：

```
merge(file1["Locus"], file2, by = "Locus")

#  Locus S1 S2 S3
#1  loc1 56 88  0
#2  loc2 34 44 66
#3  loc3 13 43 34
#4  loc4 66 77 98
#5  loc5 43 56 90 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:33:05.337

你很亲密。而不是`%in%`，使用`match`：

```
new_output <- file2[match(file1$Locus, file2$Locus), ] 
```

您还可以做的是`Locus`用作行名：

```
file1 <-read.delim(file = "file1.txt", header = TRUE, sep = "\t", row.names = 1)
file2 <-read.delim(file = "file2.txt", header = TRUE, sep = "\t", row.names = 1)
new_output <- file2[rownames(file1$Locus), ] 
```

# datamapper - Mule 3 数据映射器（映射列表到 pojo 列表）返回空结果

> ID：12687859
> 
> 赞同：1
> 
> 时间：2012-10-02T09:34:34.600
> 
> 标签：datamapper, mule, pojo

我在使用 Mule 3.3 数据映射器时遇到问题，将地图列表转换为 POJO 列表。源数据是通过从数据库读取（带有 SQL 查询的 JDBC 出站端点）创建的，我的记录器在数据映射器之前显示 2 个条目。控制台日志显示数据映射器正在处理 2 条记录，其中包括由 POJO 编写器创建的 2 条 POJO。但是，在数据映射器之后，我有一个记录器，它显示集合大小为零。

我尝试转换为 xml 和 csv 格式，而不是 pojos，这两种格式都可以正常工作。

有谁知道可能出了什么问题？

这是配置片段...

```
<jdbc-ee:outbound-endpoint connector-ref="jdbcConnector" queryKey="selectActuals" exchange-pattern="request-response" queryTimeout="-1" doc:name="Get actuals from DB"></jdbc-ee:outbound-endpoint>
<logger level="INFO" doc:name="logger 1" message="logger 1 - list size:  #[message.payload.size()]  "/>
<data-mapper:transform config-ref="map_list_to_pojo_list" doc:name="DataMapper"/>
<logger level="INFO" doc:name="logger 2" message="logger 2 - list size:  #[message.payload.size()]  "/> 
```

# git - Git合并2个新文件，删除内容并添加内容

> ID：12687866
> 
> 赞同：1
> 
> 时间：2012-10-02T09:35:06.677
> 
> 标签：git, git-merge

因此，我们正在使用 2 个不同的存储库，并且两位设计师都修改了同一个文件。

问题很简单，但我不知道如何解决它。这两个文件都被标记为新文件，因为它们除了那个文件之外几乎没有任何共同之处。

当我尝试从分支 A 合并到 B 时，它会将在 A 中添加的部分标记为在 B 中删除，另一方面，在 B 中添加的部分似乎在 A 中已删除。

当我知道我需要几乎所有更改并且不应该将任何内容标记为删除时，git 似乎试图比我聪明。

在这 2 个分支之后，我还有 2 个其他分支应该毫无问题地合并。我还不能合并它们，因为最近的一些更改可能也不能很好地合并。

我必须合并 A 和 B => E 然后 C 和 D => F 然后希望 E 和 F

所以这里最大的问题是如何进行完全手动的合并，将所有更改标记为冲突，删除任何内容，添加任何内容都应该标记为冲突，我可以使用编辑器自己解决。

Git 试图比我聪明，但在这方面失败了。

# spring - 如何通过 XML 配置 Spring Social

> ID：12687871
> 
> 赞同：8
> 
> 时间：2012-10-02T09:35:46.593
> 
> 标签：spring, aop, spring-aop, spring-social, xml-configuration

我花了几个小时尝试使用 XML 配置方法让 Twitter 集成与 Spring Social 一起工作。我在网上（和 stackoverflow 上）可以找到的所有示例始终使用[示例](https://github.com/SpringSource/spring-social-samples/tree/master/spring-social-showcase)`@Config`中所示的方法

无论出于何种原因，获取 twitter API 实例的 bean 定义都会引发 AOP 异常：

```
Caused by: java.lang.IllegalStateException: Cannot create scoped proxy for bean 'scopedTarget.twitter': Target type could not be determined at the time of proxy creation. 
```

这是我拥有的完整配置文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:jaxrs="http://cxf.apache.org/jaxrs"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:util="http://www.springframework.org/schema/util" 
    xmlns:cxf="http://cxf.apache.org/core"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xmlns:mvc="http://www.springframework.org/schema/mvc" 
    xmlns:jdbc="http://www.springframework.org/schema/jdbc"  
    xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd 
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd
       http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
       http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
       http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
       http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd">

    <import resource="classpath:META-INF/cxf/cxf.xml" />
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />

    <jee:jndi-lookup id="dataSource" jndi-name="java:comp/env/jdbc/DefaultDB" />

    <!-- initialize DB required to store user auth tokens -->
    <jdbc:initialize-database data-source="dataSource" ignore-failures="ALL">
      <jdbc:script location="classpath:/org/springframework/social/connect/jdbc/JdbcUsersConnectionRepository.sql"/>
    </jdbc:initialize-database>

    <bean id="connectionFactoryLocator"
        class="org.springframework.social.connect.support.ConnectionFactoryRegistry">
        <property name="connectionFactories">
            <list>
                <ref bean="twitterConnectFactory" />
            </list>
        </property>
    </bean>

    <bean id="twitterConnectFactory" class="org.springframework.social.twitter.connect.TwitterConnectionFactory">
        <constructor-arg value="xyz" />
        <constructor-arg value="xzy" />
    </bean>

    <bean id="usersConnectionRepository"
        class="org.springframework.social.connect.jdbc.JdbcUsersConnectionRepository">
        <constructor-arg ref="dataSource" />
        <constructor-arg ref="connectionFactoryLocator" />
        <constructor-arg ref="textEncryptor" />
    </bean>

    <bean id="connectionRepository" factory-method="createConnectionRepository"
        factory-bean="usersConnectionRepository" scope="request">
        <constructor-arg value="#{request.userPrincipal.name}" />
        <aop:scoped-proxy proxy-target-class="false" />
    </bean>

    <bean id="twitter" factory-method="ﬁndPrimaryConnection"
        factory-bean="connectionRepository" scope="request" depends-on="connectionRepository">
        <constructor-arg value="org.springframework.social.twitter.api.Twitter" />
        <aop:scoped-proxy proxy-target-class="false" />
    </bean>

    <bean id="textEncryptor" class="org.springframework.security.crypto.encrypt.Encryptors"
        factory-method="noOpText" />

    <bean id="connectController" class="org.springframework.social.connect.web.ConnectController">
        <constructor-arg ref="connectionFactoryLocator"/>
        <constructor-arg ref="connectionRepository"/>
        <property name="applicationUrl" value="https://socialscn.int.netweaver.ondemand.com/socialspringdemo" />
    </bean>

    <bean id="signInAdapter" class="com.sap.netweaver.cloud.demo.social.SimpleSignInAdapter" />

</beans> 
```

令我困惑的是，`connectionRepository`实例化工作得非常好（我注释掉了 twitter bean 并测试了代码！）？！？它使用相同的功能：请求范围和接口 AOP 代理和工作，但`twitter`bean 实例化失败？！？

春季社交配置代码如下所示（我看不出有什么不同，你能吗？）：

```
@Configuration
public class SocialConfig {

    @Inject
    private Environment environment;

    @Inject
    private DataSource dataSource;

    @Bean
    @Scope(value="singleton", proxyMode=ScopedProxyMode.INTERFACES) 
    public ConnectionFactoryLocator connectionFactoryLocator() {
        ConnectionFactoryRegistry registry = new ConnectionFactoryRegistry();
        registry.addConnectionFactory(new TwitterConnectionFactory(environment.getProperty("twitter.consumerKey"),
                environment.getProperty("twitter.consumerSecret")));
        return registry;
    }

    @Bean
    @Scope(value="singleton", proxyMode=ScopedProxyMode.INTERFACES) 
    public UsersConnectionRepository usersConnectionRepository() {
        return new JdbcUsersConnectionRepository(dataSource, connectionFactoryLocator(), Encryptors.noOpText());
    }

    @Bean
    @Scope(value="request", proxyMode=ScopedProxyMode.INTERFACES)   
    public ConnectionRepository connectionRepository() {
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        if (authentication == null) {
            throw new IllegalStateException("Unable to get a ConnectionRepository: no user signed in");
        }
        return usersConnectionRepository().createConnectionRepository(authentication.getName());
    }

    @Bean
    @Scope(value="request", proxyMode=ScopedProxyMode.INTERFACES)   
    public Twitter twitter() {
        Connection<Twitter> twitter = connectionRepository().findPrimaryConnection(Twitter.class);
        return twitter != null ? twitter.getApi() : new TwitterTemplate();
    }

    @Bean
    public ConnectController connectController() {
        ConnectController connectController = new ConnectController(connectionFactoryLocator(), connectionRepository());
        connectController.addInterceptor(new PostToWallAfterConnectInterceptor());
        connectController.addInterceptor(new TweetAfterConnectInterceptor());
        return connectController;
    }

    @Bean
    public ProviderSignInController providerSignInController(RequestCache requestCache) {
        return new ProviderSignInController(connectionFactoryLocator(), usersConnectionRepository(), new SimpleSignInAdapter(requestCache));
    }
} 
```

任何帮助/指针将不胜感激！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:11:39.160

我有一个适用于 Spring Social Facebook 集成的配置。（我有推特配置，但我没有测试推特部分）

```
<bean class="org.springframework.social.connect.web.ProviderSignInController">
<!-- relies on by-type autowiring for the constructor-args -->    
<constructor-arg ref="signInAdapter" /> 
</bean>

<bean id="connectionFactoryLocator" 
  class="org.springframework.social.connect.support.ConnectionFactoryRegistry">
<property name="connectionFactories">
    <list>
        <bean class="org.springframework.social.twitter.connect.TwitterConnectionFactory">
            <constructor-arg value="${twitter.consumerKey}" />
            <constructor-arg value="${twitter.consumerSecret}" />               
        </bean>
        <bean class="org.springframework.social.facebook.connect.FacebookConnectionFactory">
            <constructor-arg value="${facebook.clientId}" />
            <constructor-arg value="${facebook.clientSecret}" />                
        </bean>
    </list>
</property>
</bean>

<bean id="connectionRepository" factory-method="createConnectionRepository" 
  factory-bean="usersConnectionRepository" scope="request">
<constructor-arg value="#{request.userPrincipal.name}" />
<aop:scoped-proxy proxy-target-class="false" />
</bean>

<bean id="signInAdapter" class="com.test.social.SimpleSignInAdapter"/>

<bean id="usersConnectionRepository" 
  class="org.springframework.social.connect.jdbc.JdbcUsersConnectionRepository">
<constructor-arg ref="dataSource" />
<constructor-arg ref="connectionFactoryLocator" />
<constructor-arg ref="textEncryptor" />
</bean>

<bean id="textEncryptor" class="org.springframework.security.crypto.encrypt.Encryptors" 
        factory-method="noOpText" /> 
```

我主要参考了小到足以阅读的[文档](http://static.springsource.org/spring-social/docs/1.0.x/reference/html/index.html)和与 Spring Security 集成更多相关的[教程。](http://harmonicdevelopment.tumblr.com/post/13626880413/adding-spring-social-to-a-spring-mvc-and-spring)我希望这在某种程度上有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-11T21:03:54.467

[在我发布的这个问题](https://stackoverflow.com/questions/34727911/how-to-allow-anonymous-twitter-connections-in-an-mvc-configuration)中，我有一个适用于 tomcat7 的工作 xml spring-mvc/spring-social 配置 。

这个问题是很久以前发布的，但也许我帖子中的配置会为一些人节省一些时间。我花了一些时间来设置 XML 配置和最新的 spring 4.2.4 MVC，包括 spring-social(1.1.4) 和 spring-social-twitter(1.1.2) twitter 连接。我在这里写版本，因为 spring 版本之间有很多不同的地方。

# http - 使用 asp/http 缓存图片

> ID：12687873
> 
> 赞同：0
> 
> 时间：2012-10-02T09:35:49.603
> 
> 标签：http, asp-classic, browser-cache

我想缓存我网站上的所有图像，所以我使用了以下代码：

```
<%Response.AddHeader "Expires","Tue, 2 October 2013 00:00:00 GMT"%> 
```

问题是谷歌说图像没有被缓存，每当我去这个网站时：

```
https://developers.google.com/speed/pagespeed 
```

同样在 chrome 中，我可以看到它为所有图像提供了 Get 响应。

为什么会这样，我如何缓存明年的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:14:00.300

您已经缓存了页面本身（尽管这也可能是一件好事），而不是其中的图像。为了缓存图像，您应该在 IIS 或 .config 文件中设置适当的设置。

看看这些：

*   [http://www.iis.net/configreference/system.webserver/staticcontent/clientcache](http://www.iis.net/configreference/system.webserver/staticcontent/clientcache)
*   [http://www.galcho.com/Blog/post/2008/02/27/IIS7-How-to-set-cache-control-for-static-content.aspx](http://www.galcho.com/Blog/post/2008/02/27/IIS7-How-to-set-cache-control-for-static-content.aspx)

# windows-runtime - WINRT 如何为没有扩展名的文件声明文件类型关联

> ID：12687877
> 
> 赞同：1
> 
> 时间：2012-10-02T09:36:05.193
> 
> 标签：windows-runtime

如何在 Metro 应用程序中访问“没有”扩展名的文件？

通常，您需要声明应用程序的功能，包括。如果文件位于文档库中，则声明您要访问的文件类型/扩展名。问题是我要访问的文件没有扩展名。

我试图访问 git 目录中的一些文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:53:04.160

Windows 一直使用文件扩展名与程序关联。没有扩展名的文件不能与程序关联。

# c++ - C++ 代码崩溃

> ID：12687880
> 
> 赞同：0
> 
> 时间：2012-10-02T09:36:21.643
> 
> 标签：c++, crash

我正在尝试以递归方式列出目录中的所有文件。但是我的代码崩溃而没有给出任何错误。当给定文件是目录时，我递归调用该函数或打印其名称。

我正在使用dirent.h

```
int list_file(string path)
{
    DIR *dir;
    struct dirent *ent;
    char  *c_style_path;
    c_style_path = new char[path.length()];
    c_style_path = (char *)path.c_str();
    dir = opendir (c_style_path);
    if (dir != NULL) {

        /* print all the files and directories within directory */
        while ((ent = readdir (dir)) != NULL) {
            if(ent->d_type == DT_DIR && (strcmp(ent->d_name,".")!=0) && (strcmp(ent->d_name,"..")!=0))
            {
                string tmp = path + "\\" + ent->d_name;
                list_file(tmp);
            }
            else
            {
                cout<<ent->d_name<<endl;
            }
        }
        closedir (dir);
    } else {
        /* could not open directory */
        perror ("");
        return EXIT_FAILURE;
    }
    delete [] c_style_path;
    return 0;
} 
```

我不知道我在这里做错了什么。有什么线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T09:37:47.663

这是原因：

```
c_style_path = (char *)path.c_str();
//...
delete[] c_style_path; 
```

因为它是`delete[]`内存，它不应该并且可能在`path`函数结束时超出范围时导致双重释放。

只需`path.c_str()`在需要时使用`const char*`：

```
dir = opendir (path.c_str()); 
```

请注意，存储由返回的指针是非常危险的，因为如果实例超出范围`std::string::c_str()`，它很容易导致悬空指针。`std::string`

# asp.net - 比较来自 2 个表的数据并使用 LINQ 在下拉列表中显示结果

> ID：12687889
> 
> 赞同：1
> 
> 时间：2012-10-02T09:37:02.547
> 
> 标签：asp.net, linq

我有以下 2 个表格：**Country**和**Postal** 我检索 DropDownAddCountry 中的所有国家/地区，我不想通过这样做来在另一个下拉列表 (DropDownAddPostals) 中显示属于该国家/地区的所有邮政。country 表有一个 coulm **CountryID**，而 postal 也有一个 coulm **CountryID**。所以我不希望结果基于 CountryID 和 CountryID 之间的匹配（来自两个表）：

我的代码现在看起来像这样（它不正确）：

```
using (DB_Entities tt = new DB_Entities())
{
    var sql = from q1 in tt.Country
    join q2 in tt.Postal on q1.CountryID equals q2.CountryID
    select new { q2.Postal1 };
    if(sql != null)
    {
        DropDownAddPostal= sql.Postal1;
    }
} 
```

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:42:45.400

不要使用匿名类型（特别是如果它们不是必需的）。`DropDownList`您可以使用`DataSource`-Property将集合设置为您的。

```
using (var tt = new DB_Entities())
{
    var sql =
        from q1 in tt.Country
        join q2 in tt.Postal on q1.CountryID equals q2.CountryID
        select q2.Postal1

    DropDownAddPostal.DataSource = sql.ToList();
    DropDownAddPostal.DataBind();
} 
```

# c++ - 工作 MSVC 代码的 Clang 中的“使用不同类型的 Typedef 重新定义”错误

> ID：12687890
> 
> 赞同：1
> 
> 时间：2012-10-02T09:37:09.917
> 
> 标签：c++, xcode4, scope, clang, typedef

我得到了一些在 MSVC 上编译良好的代码，我正试图让它在 Xcode 中的 Clang 上编译。我目前遇到使用以下 typedef 重新定义类的问题：

```
typedef std::map<MyNS::istring, EntityState> Entity; 
```

查看预处理后的输出，我可以看到`class Entity`在这个 typedef 之前有两个前向声明。但是， 的实际定义`class Entity`不在预处理输出中，而是在与新实体映射相同的命名空间中（`MyNS`虽然不是......）。是导致此错误的前向声明吗？有没有什么方法可以使这在 MSVC 中有效并且由于 Clang 的迂腐而无法工作？

编辑：我手头没有 MSVC，但我整理了一个片段来演示我遇到的错误类型（我已经简化了定义，以便它们都适合一个小空间）。当我尝试使用 Clang 编译它时，这会导致相同的错误。这会在 MSVC 中工作吗？

```
namespace TheNS {

    class Entity;

    struct EntityState
    {
        std::string aString, anotherString;
        int anInt;

        EntityState() {}

        EntityState(std::string a, std::string b, int i)
        {
            // constructor
        }
    };

    typedef std::map<std::string, EntityState> Entity;

    class Entity
    {
    public:
        void SomeFunction();

    private:
        int m_aVar;

    };

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:10:16.390

是的，这是不正确的。永远不应该编译，如果它在 MSVC 上编译 - 可能是编译器的错误。前向声明告诉编译器，这`TheNS::Entity`将是类，而不是其他（不是枚举、联合或 typedef）。真的，你的代码是一样的

```
class Entity;   
typedef int Entity; 
```

当然是不正确的。

n3337 9.1/2

> 仅由类键标识符组成的声明；要么是当前范围内名称的重新声明，要么是标识符作为类名的前向声明。它将类名引入当前范围。

所以，在这之后

```
class Entity; 
```

编译知道，这`Entity`将用作类名。该名称可以重新声明为函数（在同一范围内），在这种情况下`class Entity`，当您想使用`Entity`class 时，您应该使用 , （或`Entity`通过 typedef 重新声明名称，如注释中所述）。

7.1.3/6

> 在给定的范围内，不应使用 typedef 说明符来重新定义在该范围内声明的任何类型的名称以引用不同的类型。[ 例子：
> 
> ```
> class complex { /∗ ... ∗/ };
> typedef int complex; // error: redifinition 
> ```
> 
> —结束示例]

# uitableview - 绘制自定义 UITableViewCell

> ID：12687896
> 
> 赞同：0
> 
> 时间：2012-10-02T09:37:39.787
> 
> 标签：uitableview, drawing

我必须在一个单元格中绘制两条水平线，一条在顶部边缘附近，另一条在按钮附近。这两条线应该是非常淡的黄色，即与背景视图相同的颜色。我必须创建 UIView 的子类或 UITableViewCell 的子类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:21:05.730

您可以子类化 UIView，在其中创建自定义 DrawRect 代码并将其加载为单元格背景视图。[这](http://www.raywenderlich.com/2033/core-graphics-101-lines-rectangles-and-gradients)是一个关于如何做到这一点的优秀教程。

# spring - jsp spring标签库问题

> ID：12687897
> 
> 赞同：0
> 
> 时间：2012-10-02T09:37:44.450
> 
> 标签：spring, jsp, jsp-tags

我的jsp中有以下标记：

```
<form:select id="ddlSkillLevelCoreFrom1" path="aarKpis" multiple="false" class="notSelectable skillsFrom qar_dd war_skill5 validate[required]">
                                <option value="">Please select a Skill Level From</option>
                                <c:forEach var="skillLevel" items="${skillLevels}">
                                    <c:if test="${selectedSoftSkill.skillLevelId == skillLevel.skillLevelId}">
                                        <option selected="selected" value="${skillLevel.skillLevelId}">
                                            <c:set scope="request" var="skillLevelFromSelected">${skillLevel.skillLevelId}</c:set>
                                            <c:out value="${skillLevel.name}" />
                                        </option>
                                    </c:if>
                                    <c:if test="${selectedSoftSkill.skillLevelId != skillLevel.skillLevelId}">
                                        <option value="${skillLevel.skillLevelId}">
                                            <c:out value="${skillLevel.name}" />
                                        </option>
                                    </c:if>
                                </c:forEach> 
                            </form:select>
                            <form:select id="ddlSkillLevelCoreTo1" path="aarKpis" multiple="false" class="notSelectable skillsTo qar_dd war_skill5 validate[required]">
                                <option value="">Please select a Skill Level To</option>
                                <c:forEach var="skillLevel" items="${skillLevels}">
                                    <c:if test="${skillLevel > skillLevelFromSelected}">                                        
                                        <option value="${skillLevel.skillLevelId}">
                                            <c:out value="${skillLevel.name}" />
                                        </option>
                                    </c:if>
                                </c:forEach>
                            </form:select> 
```

正如您在第一种形式中看到的那样：根据先前选择的值选择我使用 c:set 在变量中设置相同的值。然后我想使用该值来过滤并显示所有具有比第二种形式中的值更大的 Id 的元素：select。出于某种奇怪的原因，它以第二种形式显示所有未过滤的元素：select。你能发现我错过了什么。

感谢您花时间回答我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:04:14.133

这里：`<c:if test="${skillLevel > skillLevelFromSelected}">`

`SkillLevelFromSelected`是一个id，所以你不应该只`skillLevel.skillLevelId`取而代之`skillLevel`吗？

# haskell - Haskell 猜牌游戏

> ID：12687898
> 
> 赞同：1
> 
> 时间：2012-10-02T09:37:45.423
> 
> 标签：haskell

我正在写一个 Cardguess 游戏，用户设置答案并让 PC 猜测。对于我的项目，输入卡号是 2。

然后，我需要编写cardguess算法。我已经创建了卡片模块。

```
data Suit = Club | Diamond | Heart | Spade
      deriving (Eq, Ord, Bounded, Enum)

suitchars = "CDHS"

data Rank =
    R2 | R3 | R4 | R5 | R6 | R7 | R8 | R9 | R10 |
    Jack | Queen | King | Ace
         deriving (Eq, Ord, Bounded, Enum)

rankchars = "23456789TJQKA"

data Card = Card {suit::Suit, rank::Rank}
      deriving (Eq, Bounded)

instance Ord Card where
    compare (Card s1 r1) (Card s2 r2) =
        let suitorder = compare s1 s2
            in  if suitorder == EQ then compare r1 r2 else suitorder

instance Enum Card where
    fromEnum (Card s r) = (fromEnum s)*13 + (fromEnum r)
    toEnum n = (Card s r)
     where s = toEnum (n `div` 13)
           r = toEnum (n `mod` 13) 
```

而我的策略是将 Suit 和 Rank 分成两部分。最初的猜测可能`Card Club R5` 是`Card Heart Jack`

然后我会得到反馈，根据它，我会尝试`nextGuess`，直到得到正确的答案。

我已经写了`initialGuess`函数。

我把剩下的卡放在`GameState`.

```
initialGuess :: Int -> ([Card], GameState)
initialGuess card_number 
     | card_number == 2   = ((Card Club R5):(Card Heart J),cardDeck) 
```

现在，我需要编写`nextGuess`代码。

```
nextGuess :: ([Card],GameState) -> (Int,Int,Int,Int,Int) ->([Card],GameState) 
```

`(Int,Int,Int,Int,Int)`是反馈值。我如何表示第一个参数`([Card],GameState)`，这意味着以前的猜测卡和以前的`GameState`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:34:14.500

在这里很难读懂你的想法，但也许你想要这样的东西：

```
startGuessing guesses state = do
  feedBack <- readFeedback
  let (newGuess, newState) = nextGuess (guesses, state) feedback
  startGuessing (guesses ++ newGuess) newState

main = do
  let (guesses, state) = initialGuess 2      
  startGuessing guesses state 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:18:32.110

由于我不明白您的问题，而且您是初学者，因此我将对您帖子的其他一些领域进行吹毛求疵。

1.  你有

    ```
    initialGuess card_number 
         | card_number == 2   = ((Card Club R5):(Card Heart J),cardDeck) 
    ```

    接受您`initialGuess 2`现在只需要工作，您的列表语法错误。你的意思是要么

    ```
    initialGuess card_number 
         | card_number == 2   = (Card Club R5 : Card Heart J : [], cardDeck) 
    ```

    或者

    ```
    initialGuess card_number 
         | card_number == 2   = ([Card Club R5, Card Heart J], cardDeck) 
    ```

    它们的意思相同，但后者更清楚。

2.  你有

    ```
    instance Ord Card where
        compare (Card s1 r1) (Card s2 r2) =
            let suitorder = compare s1 s2
                in  if suitorder == EQ then compare r1 r2 else suitorder 
    ```

    如果你`import Data.Monoid`，你可以更简单地写成

    ```
    instance Ord Card where
        compare (Card s1 r1) (Card s2 r2) = compare s1 s2 `mappend` compare r1 r2 
    ```

    但更好的做法是将其排除在外，而是让编译器为您编写它：

    ```
    data Card = Card {suit::Suit, rank::Rank}
          deriving (Eq, Ord, Bounded) 
    ```

    生成的`Ord`实例根据您的需要使用字典顺序。

# filezilla - 连接尝试失败并显示“ECONNREFUSED - 连接被服务器拒绝”

> ID：12687900
> 
> 赞同：63
> 
> 时间：2012-10-02T09:37:53.747
> 
> 标签：filezilla

我正在尝试连接到联网机器的 FileZilla 服务器，但我的 FileZilla 客户端在连接时出现以下错误。错误是：

> “连接尝试失败，ECONNREFUSED - 服务器拒绝连接”

该机器上的 Windows 防火墙已关闭，我已在我的 FTP 客户端中提供了有效凭据。

提前致谢

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-11-25T04:46:44.980

FTP 协议可能被您的 ISP 防火墙阻止，请尝试通过 SFTP 连接（即使用 22 作为端口号，而不是简单的 FTP 的 21）。

有关更多信息，请尝试[此链接](http://wiki.filezilla-project.org/Network_Configuration)。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-07-02T01:57:13.047

使用端口号 22（用于 sftp）而不是 21（普通 ftp）。为我解决了这个问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-02T04:42:01.033

我解决了这个错误

```
A connection attempt failed with "ECONNREFUSED - Connection refused by server" 
```

通过将我的端口更改为成功的 22

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-15T22:05:12.767

对我来说，在连接到我已将 FileZilla 配置为绑定并保存配置的新 IP 地址时收到此错误。在尝试所有其他答案均未成功后，我决定连接到旧 IP 地址以查看出现了什么；瞧，它回应了。

我重新启动了 FileZilla Windows 服务，它立即返回侦听正确的 IP。相当初级，但今天我花了一些时间作为 FZ 的菜鸟。

希望这可以帮助处于同样困境的人。

# c# - 比较两个数据网格视图

> ID：12687902
> 
> 赞同：0
> 
> 时间：2012-10-02T09:38:01.587
> 
> 标签：c#, winforms, datagridview

我在一种形式中有两个数据网格视图。第一个，`datagridview1`有列和数据：

```
name   IC              EMAIL             TELEPHONE  
------------------------------------------------------
rOO    898989096677    AB@YAHOO.COM      018-9097878 
```

`datagridview2`有

```
name   IC              EMAIL           TELEPHONE      ID 
-----------------------------------------------------------
rOO    898989096677    AB@YAHOO.COM    018-9097878    8787 
```

我想就如何比较两个 datagridviews 寻求帮助，如图所示，我想比较一个 datagridview 和另一个 datagridview 的四列，看看是否有任何结果匹配。例如，`roo`名称是否与另一个 datagridview 匹配，我希望将 id (8787) 中的值发送到另一个 datagridview。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-17T09:32:43.800

有一个非常简单的解决方案可以比较两个 datagridview 并在第三个中显示它们的结果。

```
 for (int i = 0; i < dtView1.Rows.Count; i++)
        {
            for (int j = 1; j < dtView1.Columns.Count; j++)
            {

                if ((dtView1.Rows[i][j]) == (dtView2.Rows[i][j]))
                {
                   // here you can add your own logic
                }
                else
                {
              // here you can add your own logic
            }
        } 
```

|

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:25:03.400

假设您使用包含示例中的这 4 个属性的相同对象填充两个数据网格。如果在第二个数据网格中有匹配的对象，则必须根据您的过滤器检查第一个数据网格中的选定行。使用 Linq。如果是这样，则将所选项目中的数据从第一个数据网格复制到秒的匹配元素中。我担心您需要手动完成所有这些步骤，因为没有可以比较两个数据网格的方法，您只需设置一些过滤器即可完成工作。你会有一些工作要做，但这并不难。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-27T18:26:42.690

史蒂夫的答案不能正常工作，不会编译。

这是我的解决方案：

```
 int x = 0;
        int y = 0;
        int i = -1;
        int z = 0;
            foreach (DataGridViewRow row in dataGridView1.Rows)
            {
                    i++;

                if ((dataGridView1.Rows[i].Cells[i].Value) == (dataGridView2.Rows[z].Cells[i].Value))
                {
                    x++;
                }
                else
                {
                    y++;
                }
            if (z < dataGridView2.Rows.Count)
            {
                z++;
            }
            if(z == dataGridView2.Rows.Count)
            {
                z--; //subtract 1 from the total count because the datagrid is 0 index based.
            }

     MessageBox.Show("Matched: " + x.ToString() + "\r\n" + "Not Matched: " + y.ToString()); 
```

数据网格上的 foreach 循环将循环遍历每一行，然后您可以选择一个单元格甚至单元格进行比较。这段代码有点长，我相信它可以被简化，但它确实可以完成工作。

目前，这将检查 datagrid 2 中的每一行是否与 datagrid 2 中的匹配，仅在单个列上。

记住数据网格的导入是基于 0 索引的。数据网格的 Count 属性给出了一个基于 [1] 索引的计数，因此我们需要减去数据网格 2 上的最后一次迭代。

# c# - 在 ItemUpdated 事件后触发 Databind

> ID：12687904
> 
> 赞同：0
> 
> 时间：2012-10-02T09:38:04.393
> 
> 标签：c#, asp.net

我在 VS2008 中使用了一个 asp.net 4 网站项目（C#），并且我有一个带有 ItemUpdated 事件的 FormView：

```
<asp:FormView ID="FormView1" runat="server" DataSourceID="ds1" OnItemUpdated="FormView1_ItemUpdated">
    <EditItemTemplate>
        <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("col1") %>' />
    </EditItemTemplate>
</asp:FormView>

protected void FormView1_ItemUpdated(object sender, EventArgs e)
{
    FormView1.DataBind();  // adding this line even doesn't help
    TextBox box = FormView1.FindControl("TextBox1") as TextBox;
    box.Enabled = false;
} 
```

但我不明白，为什么在 ItemUpdated 事件之后会发生额外的“FormView1.DataBind()”或 Render(?)。结果是我在 ItemUpdated 事件中的代码变得像“覆盖”并且 TextBox1 没有被禁用。

当我在最后一行设置断点时“box.Enabled = false;” 然后我看到在 ItemUpdated 事件之后它再次跳转到 aspx 页面并逐步浏览 TextBoxes。

从另一个 GridView1_SelectedIndexChanged 禁用此 TextBox1 工作正常。

有什么方法可以查看调试中的“当前生命周期进度”？

**编辑：**

为了澄清推理...我有一个 GridView1，其中选择项目会填充上述 FormView1。关键是我需要禁用 FormView1 中的一些文本框，例如，用户访问级别。从 GridView1 中选择项目可以很好地禁用 TextBox1，但是当我单击 FormView1 上的更新按钮时，所有 TextBoxes 都会启用，即使我在通过 GridView1_SelectedIndexChanged() 函数运行的调试器代码中看到。在我重新选择 gridview 项目后，正确的 TextBoxes 再次被禁用。甚至使用此代码：

```
<asp:FormView ID="FormView1" runat="server" DataSourceID="ds1" DefaultMode="Edit" OnItemUpdated="FormView1_ItemUpdated">
    <EditItemTemplate>
        <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("col1") %>' />
        <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("col2") %>' />
        <asp:Button ID="Btn1" runat="server" CommandName="Update" Text="Update" />
    </EditItemTemplate>
</asp:FormView>

protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (UserAccess() == false) {
        TextBox box2 = FormView1.FindControl("TextBox2") as TextBox;
        box2.Enabled = false;
    }
}
protected void FormView1_ItemUpdated(object sender, EventArgs e)
{
    GridView1_SelectedIndexChanged(sender, e);
} 
```

也许我应该通过另一个事件禁用我的文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:49:05.777

这没有意义，请详细说明您为什么要禁用 TextBox，您是否刚刚在您的问题中关闭了 ItemTemplate？还是它实际上丢失了？如果它丢失了，为什么？

TextBox 在 FormView 的 EditItemTemplate 中，因此只有在 FormView 处于编辑模式时才可见。单击更新或取消后，将不再呈现 TextBox，而是呈现 ItemTemplate。所以应该没有必要将 TextBox 设置为禁用。

**编辑**

好的，因为您编辑了您的问题。您需要使用在`OnDataBound`绑定结束时发生的 FormView 事件，并在此时禁用您的 TextBoxes。

aspx

```
<asp:FormView ID="FormView1" runat="server" DataSourceID="ds1" 
    OnDataBound="FormView1_DataBound">
    <EditItemTemplate>
        <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("col1") %>' />
    </EditItemTemplate>
</asp:FormView> 
```

aspx.cs

```
protected void FormView1_DataBound(object sender, EventARgs e)
{
    if (UserAccess() == false) {
        TextBox box2 = FormView1.FindControl("TextBox2") as TextBox;
        box2.Enabled = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:45:04.593

而不是使用gridview选择的索引更改，您可以`DataBound`在formview上使用事件，因此每次重新绑定formview时都会触发您的逻辑。

# hibernate - 告诉 hibernate 使用与 sql 语句的类字段相同的大小写

> ID：12687906
> 
> 赞同：1
> 
> 时间：2012-10-02T09:38:10.910
> 
> 标签：hibernate, jpa, glassfish-3

如何配置persistence.xml，这样我就不需要将所有这些@Column 注释放入我的实体中，让实体管理器使用与字段名完全相同的大小写。默认情况下，当我查看日志文件时，所有字段名都是大写的。

```
 @Entity
  @Table(name="INDICATE", schema="inet")
  public class Indicate implements Serializable {

      private static final long serialVersionUID = 1L;
      @Id 
      @GeneratedValue(strategy=GenerationType.IDENTITY)
      @Column(name="indID", insertable = false, nullable=false, unique=true) private Long indID;
      @Column(name="prditmNO") private String prditmNO;
      @Column(name="indREASON") private Integer indREASON;
      @Column(name="indIP") private String indTCPIP; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:49:24.193

你可以在 Hibernate 中实现你自己`org.hibernate.cfg.NamingStrategy`的需求。最简单的方法是覆盖`org.hibernate.cfg.ImprovedNamingStrategy`并实现影响表和列命名规则的所有方法。

```
public class CaseSensitiveNamingStrategy extends ImprovedNamingStrategy {

    @Override
    public String tableName(String name){
        return name;
    }

    @Override
    public String columnName(String name){
        return name;
    }

} 
```

请记住，您可能要覆盖更多方法。有关此类的[更多文档](http://docs.jboss.org/hibernate/orm/4.0/javadocs/org/hibernate/cfg/NamingStrategy.html)，请参阅 JavaDocs 。

`NamingStrategy`请记住在 Hibernate中注册您的自定义实现。这可以在创建`SessionFactory`.

```
Configuration config = new AnnotationConfiguration().configure();
config.setNamingStrategy(new CaseSensitiveNamingStrategy());
SessionFactory sessionFactory = config.buildSessionFactory(); 
```

或者，您可以使用声明性方式将自定义`NamingStrategy`设置属性注册`hibernate.ejb.naming_strategy`为实现的完整限定类名称，`NamingStrategy`如下所示：

```
<property name="hibernate.ejb.naming_strategy"
          value="stackoverflow.CaseSensitiveNamingStrategy"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T15:04:36.897

如果您使用的是 JPA 2.0，则规范说：

`<delimited-identifiers/>`通过指定对象/关系 xml 映射文件的 persistence-unit-defaults 元素中的元素，可以指定将用于持久性单元的所有数据库标识符视为分隔标识符。如果 `<delimited-identifiers/>`指定了元素，则不能覆盖它。

# google-apps-script - 项目中GS文件的执行顺序

> ID：12687907
> 
> 赞同：22
> 
> 时间：2012-10-02T09:38:19.193
> 
> 标签：google-apps-script

我在哪里可以阅读有关 GS 文件的执行顺序规则的文档？

为了确定问题的大小，我创建了两个微不足道的对象，每个对象都在自己的文件中。

1_文件.gs

```
var ObjB = new Object();
ObjB.sayName = "[" + ObjA.sayName + "]"; 
```

0_文件.gs

```
var ObjA = new Object();
ObjA.sayName = " I'm A "; 
```

一个电话如...

```
Logger.log(ObjA.sayName + " : " + ObjB.sayName); 
```

...得到错误...

```
TypeError: Cannot read property "sayName" from undefined. 
```

如果我将代码从 1_File.gs 移动到 0_File.gs，反之亦然，则没有错误，并且日志显示正确...

> 我是A：[我是A]

将 0_File.gs 重命名为 2_File.gs 也不会影响执行顺序，因此我假设该顺序取决于首先创建哪个文件。

是否没有“包含”或“导入”的概念可以让我明确执行顺序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T17:25:59.727

> 我在哪里可以阅读有关 GS 文件的执行顺序规则的文档？

没有这样的文档，我认为不会在任何时候发布。同样，C++ 中静态变量的初始化顺序也是未定义的，取决于编译器/链接器。

> 是否没有“包含”或“导入”的概念可以让我明确执行顺序？

是的，没有“包含”、“导入”甚至“模块”，但有[库](https://developers.google.com/apps-script/guide_libraries)。

还有一个解决方法是使用闭包。贝娄是一个示例代码。通过执行测试功能，日志包含`c.d`. 这个想法是在所有`gs`文件中都有一个以`init`. 在这些函数中，所有全局变量都被实例化。匿名闭包在`Code.gs`文件实例化期间执行并调用所有文件的所有“init”函数`gs`。

**代码.gs**

```
var c;

function callAllInits_() {
  var keys = Object.keys(this);
  for (var i = 0; i < keys.length; i++) {
    var funcName = keys[i];
    if (funcName.indexOf("init") == 0) {
      this[funcName].call(this);
    }
  }
}

(function() {
  callAllInits_();
  c = { value : 'c.' + d.value };
})();

function test() {
  Logger.log(c.value);
} 
```

**d.gs**

```
var d;

function initD() {
  d = { value : 'd' };
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-03T19:55:51.463

我通过在每个文件中创建一个类并确保每个类都在原始文件中实例化`Code.gs`（我将其重命名为`_init.gs`）来解决这个问题。实例化每个类作为一种形式，`include`并确保在执行任何操作之前一切都到位。

`_init.gs`：

```
// These instances can now be referred to in all other files
var Abc  = new _Abc();
var Menu = new _Menu();
var Xyz  = new _Xyz();
var Etc  = new _Etc();

// We need the global context (this) in order to dynamically add functions to it
Menu.createGlobalFunctions(this);

function onInstall(e) {
  onOpen(e);
}

function onOpen(e) {
  Menu.build();
} 
```

类通常如下所示：

`menu.gs`：

```
function _Menu() {
  this.build = function() {
    ...
  }

  ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-26T06:56:52.193

如果您有多个继承级别，则需要为 init 函数命名，如`init000Foo`、`init010Bar`和`init020Baz`，然后在执行之前按名称对 init 函数进行排序。这将确保`init000Foo`首先被评估，然后`Bar`是 ，然后是`Baz`。

```
function callAllInits() {
  var keys = Object.keys(this);
  var inits = new Array();
  for (var i = 0; i < keys.length; i += 1) {
    var funcName = keys[i];
    if (funcName.indexOf("init") == 0) {
      inits.push(funcName);
    }
  }

  inits.sort();
  for (var i = 0; i < inits.length; i += 1) {
    // To see init order:
    // Logger.log("Initializing " + inits[i]);
    this[inits[i]].call(this);
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-03T02:40:51.570

其他答案（即不要编写任何引用其他文件中的对象的顶级代码）描述了避免此问题的理想方法。但是，如果您已经编写了很多代码并且重写它是不可行的，那么有一个解决方法：

Google App Script 似乎按照它们的创建顺序加载代码文件。首先是最旧的文件，然后是下一个，最后是最近创建的文件。这是未选中“按字母顺序排列文件”时在编辑器中显示的顺序。

因此，如果您按此顺序保存文件：

*   代码.gs
*   1_File.gs（取决于 0_File.gs）
*   0_文件.gs

一个简单的解决方法是制作 1_File.gs 的副本，然后删除原始文件，从而有效地将其移动到列表的末尾。

1.  单击 1_File.gs 旁边的三角形并选择“制作副本”
    *   代码.gs
    *   1_文件.gs
    *   0_文件.gs
    *   1_文件复制.gs
2.  单击 1_File.gs 旁边的三角形并选择“删除”
    *   代码.gs
    *   0_文件.gs
    *   1_文件复制.gs
3.  单击 1_File copy.gs 旁边的三角形并选择“重命名”，然后从末尾删除“副本”。
    *   代码.gs
    *   0_文件.gs
    *   1_文件.gs

现在 0_File.gs 在 1_File.gs 之前加载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-06T07:48:07.703

*截至 2021 年 12 月，这对我有用。很可能，其他答案已经过时了。*

您可以轻松解决此问题。当您查看 Web 编辑器的“文件”部分中的脚本时，您会看到它们有一个顺序。文件按照它们在那里出现的顺序进行评估。单击文件名右侧的三个点会弹出一个菜单，允许您向上或向下移动文件。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-02T16:19:27.280

Google Apps 脚本中没有这样的顺序。这完全取决于您在哪里声明这些对象以及如何调用您的函数。您能否解释一下如何以及何时调用 Logger.log() 代码。另外，你什么时候声明你的对象 objA 和 objB ？这些将帮助我们提供更好的答案

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-02-06T21:35:41.393

这就是我将如何做到这一点...

### 主要的

```
function include(filename) {
  return ContentService.createTextOutput(filename);
}

function main() {
  include('Obj A');
  include('Obj B');
  Logger.log(ObjA.sayName + " : " + ObjB.sayName);
} 
```

### 对象 A

```
var ObjA = new Object();
ObjA.sayName = " I'm A "; 
```

### 对象 B

```
var ObjB = new Object();
ObjB.sayName = "[" + ObjA.sayName + "]"; 
```

# objective-c - iOS截图部分画面

> ID：12687909
> 
> 赞同：12
> 
> 时间：2012-10-02T09:38:27.357
> 
> 标签：objective-c, ios, xcode

我有一个应用程序，它使用以下代码截取 UIImageView 的屏幕截图：

```
-(IBAction) screenShot: (id) sender{

 UIGraphicsBeginImageContext(sshot.frame.size);
 [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
 UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
 UIGraphicsEndImageContext();
 UIImageWriteToSavedPhotosAlbum(viewImage,nil, nil, nil);

} 
```

这很好用，但我需要能够定位我截取屏幕截图的位置，基本上我只需要对屏幕的三分之一（中心部分）进行分级。我尝试使用

```
UIGraphicsBeginImageContext(CGSize 150,150); 
```

但是发现每件事都取自 0,0 坐标，有人知道如何正确定位它。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-02T09:45:07.583

好吧，屏幕截图是从您绘制的画布上截取的。因此，不是在整个上下文中绘制图层，而是参考左上角，而是将其绘制在要截屏的位置......

```
//first we will make an UIImage from your view
UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *sourceImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

//now we will position the image, X/Y away from top left corner to get the portion we want
UIGraphicsBeginImageContext(sshot.frame.size);
[sourceImage drawAtPoint:CGPointMake(-50, -100)];
UIImage *croppedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(croppedImage,nil, nil, nil); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-02T09:45:33.057

从此[_](https://stackoverflow.com/questions/4194388/uigraphicsbeginimagecontext-help)

```
UIGraphicsBeginImageContext(sshot.frame.size);
CGContextRef c = UIGraphicsGetCurrentContext();
CGContextTranslateCTM(c, 150, 150);    // <-- shift everything up to required position when drawing.
[self.view.layer renderInContext:c];
UIImage* viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-02T09:57:16.180

如果您有带有特定矩形的图像要裁剪，请使用此方法进行裁剪：

```
-(UIImage *)cropImage:(UIImage *)image rect:(CGRect)cropRect
{
   CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], cropRect);
   UIImage *img = [UIImage imageWithCGImage:imageRef]; 
   CGImageRelease(imageRef);
   return img;
} 
```

像这样使用：

```
UIImage *img = [self cropImage:viewImage rect:CGRectMake(150,150,100,100)]; //example 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T11:25:19.773

如果您愿意，可以参考[此](https://github.com/AalokParikh/SSPhotoCropperViewController)代码。

在此示例中，您可以从任何位置和任何缩放比例获取矩形覆盖的图像。

快乐编码:)

一些提取的代码供参考如下

用于裁剪照片的主要功能或代码

```
- (UIImage *) croppedPhoto
{
    CGFloat ox = self.scrollView.contentOffset.x;
    CGFloat oy = self.scrollView.contentOffset.y;
    CGFloat zoomScale = self.scrollView.zoomScale;
    CGFloat cx = (ox + self.cropRectangleButton.frame.origin.x + 15.0f) * 2.0f / zoomScale;
    CGFloat cy = (oy + self.cropRectangleButton.frame.origin.y + 15.0f) * 2.0f / zoomScale;
    CGFloat cw = 300.0f / zoomScale;
    CGFloat ch = 300.0f / zoomScale;
    CGRect cropRect = CGRectMake(cx, cy, cw, ch);

    NSLog(@"---------- cropRect: %@", NSStringFromCGRect(cropRect));
    NSLog(@"--- self.photo.size: %@", NSStringFromCGSize(self.photo.size));

    CGImageRef imageRef = CGImageCreateWithImageInRect([self.photo CGImage], cropRect);
    UIImage *result = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);

    NSLog(@"------- result.size: %@", NSStringFromCGSize(result.size));

    return result;
} 
```

[此处](http://www.ardalahmet.com/2011/10/17/ssphotocropperviewcontroller-a-custom-viewcontroller-that-provides-ui-for-cropping-photos-in-ios-apps/)给出了如何使用该示例的详细信息。

享受编码:)

# xml - XSD 中的“具有非模式命名空间的任何属性”

> ID：12687910
> 
> 赞同：2
> 
> 时间：2012-10-02T09:38:32.577
> 
> 标签：xml, xsd

根据 W3C 规范，模式是有效的。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified"
xmlns:my="http://my.name.space">
    <xsd:element name="test" my:attr="something"/>
</xsd:schema> 
```

我想知道在元素的定义中使用这些“具有非模式命名空间的属性”的用例是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T01:16:17.840

我使用它们从模式生成代码。它们是向元素添加额外信息的一种方式。

# bash - 在 bash 中，如何将所有常规文件的名称放在数组中的文件夹中？

> ID：12687911
> 
> 赞同：0
> 
> 时间：2012-10-02T09:38:34.533
> 
> 标签：bash, unix

据我所知，`find . -maxdepth 1 -type f`这是获取文件夹中文件列表的唯一可靠方法。但是，如果某些文件的名称中有空格，那么天真地将这个命令的输出放入 bash 数组 ( `($(find . -maxdepth 1 -type f)`) 将会失败。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T09:44:52.143

最安全的方法是使用`find`with `-print0`which 也将正确处理带有换行符的文件名。循环文件并将它们存储在一个数组中：

```
declare -a arr=()
while IFS= read -r -d $'\0' f
do
    arr+=("$f")
done < <(find . -maxdepth 1 -type f -print0) 
```

测试：

```
for i in "${arr[@]}"
do
    echo "[$i]"
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T09:53:33.780

这就是我上次需要允许空格时的做法：

```
IFS=$'\n' #Setting the Internal field separator to \n instead of \t\n
array=($(find . -maxdepth 1 -type f)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:48:41.813

您可以在一个循环中执行此操作：

```
ARR=()
find . -maxdepth 1 -type f | while read filename; do
    ARR+=("$filename")
done 
```

**更新**：不幸的是，**while**版本不起作用，因为 while 在子进程中运行，无法导出结果。

所以显然这必须在**for**循环中完成，无法避免操纵 IFS。

正确答案是dogbane的。上述不正确的方法保留为警告:-(

# actionscript-3 - AS3 在内部使用 googleMap 组件加载外部 SWF，为什么编译器会向空对象指针提出错误？

> ID：12687917
> 
> 赞同：0
> 
> 时间：2012-10-02T09:38:54.840
> 
> 标签：actionscript-3, flash, google-maps

我会尽量简短，因为我猜这个问题与在 Flash IDE 中使用 googleMap 组件有关。

我有一个用 googleMap 组件编译的 swf 文件，它本身就很好用。

当我尝试将其加载到另一个 Swf 文件中时出现问题，并将其添加为 Movieclip 的子项。

如果使用相同的加载器代码我尝试加载另一个简单的 swf，我没有问题。所以我很确定这个问题与这个使用 googleMap 组件的特定 swf 有关。

作为解决此问题的第一个想法，我尝试添加 googleMapsLibraryComponent，将其拖入 MovieClip 应该加载这个外部 ggMap swf 文件。但是仍然没有消息错误 #1009 tryin to access a property or method of an null object, inside the base class of the child external swf.

子问题#2：另外，如何调试这种情况？因为我正在处理已编译的 swf？没有机会，只能单独调试它们？

提前谢谢了...

# ruby-on-rails - 如何在更新操作中更改对象属性？

> ID：12687918
> 
> 赞同：0
> 
> 时间：2012-10-02T09:38:56.850
> 
> 标签：ruby-on-rails, ruby, actioncontroller

我需要使用仅在控制器中有效的方法，但我无法实现更改属性。

这是我的更新操作：

```
def update
@website = Website.find(params[:id])
respond_to do |format|
 if @website.update_attributes(params[:website]) 
  if params[:website][:language] == "Auto"
    @website.[:website][:language] =  full_language("request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first")
  end

    format.html { redirect_to @website, notice: 'website was successfully updated.' }
    format.js
  else
    format.html { render action: "edit" }
    format.js { render action: "edit" }
  end
end 
```

结尾

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:46:44.043

```
@website.update_attributes(params[:website]) 
```

已经执行保存到数据库。

```
@website.[:website][:language] =  full_language("request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first") 
```

没有任何意义。

```
@website.language = full_language(request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first) 
```

做。还要注意删除之前的引号`request.env`。请注意，您需要再次保存更改，因此在更新属性之前移动所有内容并使用单个保存调用是有意义的。

```
def update
  @website = Website.find(params[:id])
  @website.attributes = params[:website]

  if params[:website][:language] == "Auto"
    @website.language = full_language(request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first)
  end

  respond_to do |format|
   if @website.save
    format.html { redirect_to @website, notice: 'website was successfully updated.' }
    format.js
  else
    format.html { render action: "edit" }
    format.js { render action: "edit" }
  end
end 
```

最后但并非最不重要的一点是，在继续下一个编码会话之前，您可能想停下来学习一点 Ruby 语法和 ActiveRecord。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:48:37.970

```
def update
  @website = Website.find(params[:id])
  if params[:website][:language] == "Auto"
    params[:website][:language] = full_language("request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first")
  respond_to do |format|
  if @website.update_attributes(params[:website]) 
    format.html { redirect_to @website, notice: 'website was successfully updated.' }
    format.js
  else
    format.html { render action: "edit" }
    format.js { render action: "edit" }
  end
end 
```

结尾

# c# - 如何确保正在加载正确的 app.config？

> ID：12687921
> 
> 赞同：0
> 
> 时间：2012-10-02T09:39:00.860
> 
> 标签：c#, app-config

我有一个控制台应用程序，我们称之为`Test.Console`. 这个应用程序使用一个名为`Test.Code`.

`Test.Code`是访问数据库的包装器，应该有一个`app.config`包含连接字符串的文件。

`Test.Console`然后应该访问其中的类`Test.Code`以访问数据库中的内容。

但是，当我把连接字符串放在Code项目的app.config中时，似乎无法访问，但是当我把它放在Console项目的app.config中时，Code项目中的代码似乎可以访问它。

有什么方法可以将连接字符串放在代码项目而不是控制台项目中？

**编辑：**

应用程序配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <connectionStrings>
        <clear />
        <add name="ACE" connectionString="data source=servername;database=ACE;userid=username;password=password"/>
    </connectionStrings>
</configuration> 
```

在我的课堂上：

```
string connection = ConfigurationManager.ConnectionStrings["ACE"].ConnectionString; 
```

目前就是这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:43:10.813

app.config 就是正在运行的应用程序的配置。

正在运行的应用程序应该负责它连接到的数据库等，因此配置在那里的原因。

# javascript - 为什么单击“添加另一个字段”输入按钮时此代码不添加另一个字段？

> ID：12687929
> 
> 赞同：1
> 
> 时间：2012-10-02T09:39:33.763
> 
> 标签：javascript, html, dom

为什么单击输入按钮时[，以下代码没有添加另一个文本输入字段？](http://jsfiddle.net/fbzvX/)`add another field`

```
<html>
<head>
<script>
function add_field() 
{
var elem = document.createElement("input");
elem.setAttribute('type','text');
elem.setAttribute('name','user');
document.body.insertBefore(elem, document.getElementById('su'));
}
</script>
</head>
<body>
<form name="input" method="get">
Put input here:<br> 
<input type="text" name="user">
<input type="button" onclick="add_field()" value="Add another field"><br>
<input id="su" type="submit" value="Submit"><br>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T09:45:38.503

根据[MDN 参考页面](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)，您需要调用`parent.insertBefore(newElem, referenceElem)`。在您的示例中，我认为那`<form>`是父母，而不是`<body>`. 将函数的最后一行更改为：

```
var target = document.getElementById('su');
target.parentNode.insertBefore(elem, target); 
```

会让它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:52:33.440

[jQuery解决方案在这里](http://jsfiddle.net/fbzvX/3/)

```
<form name="input" method="get">
  Put input here:<br> 
  <input id='ap' type="text" name="user">
  <input id="addField" type="button" value="Add another field"><br>
  <input id="su" type="submit" value="Submit"><br>
</form> 
```

JavaScript

```
$('#addField').click(function(e)
{
    $('<input type="text" />').insertBefore('#su')
});​​ 
```

# jquery - 如何使用 jQuery 更改 A 元素内的 DIV 的类？

> ID：12687930
> 
> 赞同：0
> 
> 时间：2012-10-02T09:39:35.327
> 
> 标签：jquery

我有以下内容：

```
<a id="menuPrev">
<div class="sprite-contol-double-180"></div>
</a> 
```

有没有办法可以使用 jQuery 将类更改为“sprite-blank”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:41:17.887

你可以这样做：

```
$('#menuPrev > div').removeClass('sprite-contol-double-180').addClass('sprite-blank'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:41:18.270

你需要这个代码：

```
$("#menuPrev > div").attr("class","sprite-blank"); 
```

# javascript - 窗口对象模型？

> ID：12687931
> 
> 赞同：1
> 
> 时间：2012-10-02T09:39:37.590
> 
> 标签：javascript, jquery, dom

我知道 javascript 中有一种叫做 DOM 的东西。但是为什么没有像窗口对象模型这样的东西呢？DOM 树不是这样的吗？：

```
window <- document <- html <- head //etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:42:40.627

因为文档对象模型描述了文档是如何构建的，而您是定义它的人。

“窗口”纯粹是一个演示问题，与文档本身无关。您没有定义窗口或关于窗口的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:44:41.457

`window`对象实际上是表示层的浏览器相关部分。

`document`对象是根据浏览器读取的文件（网页）的内容构建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:55:47.010

Window 对象是 DOM 的一部分。我建议你以下文章：

*   [文档对象模型](http://eloquentjavascript.net/chapter12.html)，来自 Eloquent Javascript 的第 12 章。
*   来自 MDN[的 Gecko DOM 参考。](https://developer.mozilla.org/en-US/docs/Gecko_DOM_Reference)
*   [W3C DOM 模型核心](http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#ID-1590626202)（非常技术性的东西..）。

# c# - 覆盖默认连接字符串

> ID：12687939
> 
> 赞同：1
> 
> 时间：2012-10-02T09:40:31.813
> 
> 标签：c#, connection-string

在 MVC Web 应用程序中，我想根据我正在使用的开发机器覆盖连接字符串。我可以使用 Web.config 转换，但我还需要覆盖各种非 Web 配置文件中的连接字符串。我可以使用[SlowCheetah 扩展](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)，但我最终将为每个访问数据库的项目创建相同的转换。当项目变得更大并且拥有更多开发人员时，维护起来很麻烦。

我想做的是修改 Entity Framework 或 ASP.NET 查找连接字符串的方式，添加我自己的查找连接字符串的类，并且只实现一次转换逻辑。我希望仅在相关时使用 Ninject 注入它。

是否有这样的“IConnectionStringProvider”接口我可以实现和注册，并自动让 ASP.NET 和 EF 使用它？

编辑。我找到[了这个](http://williablog.net/williablog/post/2010/03/29/Override-Configuration-Manager.aspx)，但它看起来真的很讨厌。如果没有更简洁的方法，我将使用多个相同的配置翻译，也许让源代码控制系统正确复制它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:57:32.717

您可以告诉 Entity Framework 使用不同的连接字符串 - 它不必使用 web.config 中的默认连接字符串。

这是一个例子： http: [//www.codeproject.com/Tips/234677/Set-the-connection-string-for-Entity-Framework-at](http://www.codeproject.com/Tips/234677/Set-the-connection-string-for-Entity-Framework-at)

这是另一个：http: [//msdn.microsoft.com/en-us/library/bb738533.aspx](http://msdn.microsoft.com/en-us/library/bb738533.aspx)

如何构建其余部分取决于您。

我个人使用 web.config 中的应用程序设置来告诉我的代码哪个连接字符串用于系统的特定部分，例如

```
var connectionStringNameForMyFeature = ConfigurationManager.AppSettings["connectionStringNameForMyFeature"];

myFeature.ConnectionString = ConfigurationManager.ConnectionStrings[connectionStringName]; 
```

# c# - 请提出 ASPX 源文件格式化程序/美化器

> ID：12687941
> 
> 赞同：-1
> 
> 时间：2012-10-02T09:40:36.193
> 
> 标签：c#, asp.net

我有这样的文件的网络项目：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="XXX" Inherits="XXX" ValidateRequest="false"%>
<%@ Import Namespace="System.IO" %>
<%@ Import Namespace="System.Net" %>
<%   
string XXX = Request.Form["XXX"];
string XXX = Request.Form["XXX"];
etc... 
```

我想格式化它。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:49:43.850

在 Visual Studio 中有一个选项来格式化整个文档。

使用以下键盘快捷键：`Ctrl + E`,`D`

或从菜单：*编辑->高级->格式化文档*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:43:46.600

在 Visual Studio 中，转到编辑/高级/格式化文档

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:44:38.193

您可以使用 Visual Studio 的快捷键：（`CTRL + A`全选），`CTRL + K` `F`

`Ctrl-K`,`Ctrl-D`也可以格式化当前文件而不需要全选。

# c# - WPF 绑定到其他类的非简单属性的属性

> ID：12687947
> 
> 赞同：0
> 
> 时间：2012-10-02T09:40:59.103
> 
> 标签：c#, wpf, binding

在这种情况下，有点想不通如何使用 WPF 绑定：

假设，我们有一个 CarInfo 类型的非简单属性的对象 Car：

```
public class CarInfo : DependencyObject
{
    public static readonly DependencyProperty MaxSpeedProperty =
        DependencyProperty.Register("MaxSpeed", typeof (double), typeof (CarInfo), new PropertyMetadata(0.0));

    public double MaxSpeed
    {
        get { return (double) GetValue(MaxSpeedProperty); }
        set { SetValue(MaxSpeedProperty, value); }
    }
}

public class Car : DependencyObject
{

    public static readonly DependencyProperty InfoProperty =
        DependencyProperty.Register("Info", typeof (CarInfo), typeof (Car), new PropertyMetadata(null));

    public CarInfo Info
    {
        get { return (CarInfo) GetValue(InfoProperty); }
        set { SetValue(InfoProperty, value); }
    }

} 
```

还假设 Car 是一个 ui 元素并且它具有 Car.xaml，这很简单：

```
<Style TargetType="assembly:Car">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="assembly:Car">
                <Grid >
    !-->            <TextBlock Text="{Binding Path=MaxSpeed}" />
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

所以，我希望我的 Car.xaml 中的这个 TextBlock 代表我的 CarInfo 类的属性**“MaxSpeed”**，它实际上是我的 Car 类的属性。我怎样才能做到这一点？

提前感谢您，感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:47:05.037

这取决于分配给表示 Car 的 UI 元素的 DataCONtext 的内容 - 您需要指定相对于它的绑定路径。在这种情况下，我建议你从这个开始：

```
<TextBlock Text="{Binding Path=Info.MaxSpeed}" /> 
```

这是假设 Car 对象已分配给 Car UI 元素的 DataContext。

请注意，您的属性不必是依赖属性 - 您也可以绑定到普通属性（取决于您在做什么）。

## 编辑

您似乎正在寻找使用元素绑定，因此您应该能够通过使用 TemplatedParent 或祖先作为您的相对源来实现您想要的。有关示例，请参[见此以前的 SO 答案。](https://stackoverflow.com/a/84317/109702)您的绑定应如下所示：

```
<TextBlock Text="{Binding Path=Info.MaxSpeed, RelativeSource={RelativeSource TemplatedParent}}" /> 
```

这将带您回到模板化父控件（Car），然后沿着 UI 元素的 Info 属性向下移动到其内容的 MaxSpeed 属性。

正如我在评论中所说，通过让您的 UI 元素与您的数据元素非常匹配，然后将您的数据对象分配给 UI 元素上相对非标准的属性，您会变得非常混乱。您可能有自己的理由，但 XAML 和 WPF 不需要那么复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:43:15.903

```
<TextBlock Text="{Binding Path=Info.MaxSpeed}" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:15:46.357

该代码对我很有效：

```
<TextBlock Text="{Binding Path=Info.MaxSpeed, RelativeSource={RelativeSource Mode=TemplatedParent}}" /> 
```

和用法：

```
Car.Info = new CarInfo { MaxSpeed = 100.0 }; 
```

# javascript - 将图像大小调整为其父级的高度并在窗口调整大小时调整其大小

> ID：12687948
> 
> 赞同：0
> 
> 时间：2012-10-02T09:41:12.020
> 
> 标签：javascript, jquery, html, css

我的代码需要帮助

这是我的例子 - [http://jsfiddle.net/urK7t/](http://jsfiddle.net/urK7t/)

和全尺寸页面 - [http://dev.fama.net.pl/tides/](http://dev.fama.net.pl/tides/)

概念： ![在此处输入图像描述](../Images/b8bf8c6df2fac7a87759596231412973.png)

我想要 100% 的宽度和 100% 的高度，溢出：隐藏的 DIV 里面有宽的图像，我可以左右移动，这个图像应该在窗口调整大小时调整大小，现在你在我的例子中看到只是拉伸图像高度我想调整整个图像的大小，但我不想显示整个图像，它需要左右移动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:47:16.273

你可以说如果你有这个图像作为背景被包含或覆盖，甚至是 100% 100% 等等，取决于你是想要它缩放还是全屏等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:48:10.040

您想要的图像样式如下：

```
#bg-image {
    width: 100%;
    height: auto;
} 
```

将来，您真正想要的 CSS 属性是：http `object-fit`: [//www.netmagazine.com/tutorials/control-image-aspect-ratios-css3](http://www.netmagazine.com/tutorials/control-image-aspect-ratios-css3)

# java - java中基于时间的水库采样？

> ID：12687955
> 
> 赞同：0
> 
> 时间：2012-10-02T09:41:37.973
> 
> 标签：java, time, do-while

我设计了一种在 java 中进行水库采样的方法，我使用的代码[在这里](https://stackoverflow.com/a/12679544/1075247)。

我现在放入了一个要读取的大文件，在将结果显示在屏幕上之前大约需要 40 秒才能读取该批次，然后再次读取该批次。该文件太大而无法存储在内存中，只能从中选择一个随机样本。

我希望我可以在那里写一个额外的while循环，让它`reservoirList`在设定的时间段内输出，而不是在它完成扫描文件之后。

就像是：

```
long startTime = System.nanoTime();
timeElapsed = 0;
while(sc.hasNext()) //avoid end of file
    do{
       long currentTime = System.nanoTime();
       timeElapsed = (int)  TimeUnit.MILLISECONDS.convert(startTime-currentTime,
               TimeUnit.NANOSECONDS);
       //sampling code goes here
    }while(timeElapsed%5000!=0)
    return reservoirList;
} return reservoirList; 
```

但这会输出一堆（不是我的 ReservoirList 的全长）行，然后是同一行的整个流（几百个？）。

有没有更优雅的方法来做到这一点？如果可能的话，一个可能有效的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:44:41.320

我出轨了。现在我正在输出从文件中读取的每 X 行，其中 X 足够大，可以在每个样本之间给我一个很好的时间延迟。我使用采样程序中的计数来计算出这种情况。

```
do {
    //sampling which includes a count++
}while(count%5000!=0) 
```

最后一点，我将计数初始化为 1 以阻止它输出前十行作为样本。

如果有人有更好的、基于时间的解决方案，请告诉我。

# typescript - TypeScriptCompile 构建操作似乎没有做任何事情

> ID：12687956
> 
> 赞同：14
> 
> 时间：2012-10-02T09:41:41.577
> 
> 标签：typescript

当我将一个新的 TypeScript 文件添加到我的解决方案中时，系统很好地为我提供了一个（预填充的）.ts 文件，下面是 .js 文件。这个配置让我觉得从 TypeScript 到 JavaScript 的转换是自动的。.ts 文件具有构建操作“TypeScriptCompile”这一事实加强了这一假设。但是，无论我做什么（保存更改的 ts，编译项目......），都没有真正发生。

我知道我可以将预构建步骤添加到项目中，但我真的希望 TypeScriptCompile 构建操作能够自动启动，这样我只需要保存文件即可重新生成 .js 文件。我需要做什么才能使“TypeScriptCompile”按预期/期望工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T14:10:26.197

我在 MVC4 项目中尝试使用 TypeScript 时遇到了同样的问题，但问题解决了！

使用您喜欢的文本编辑器将以下行放入您的项目文件中。`BeforeBuild`proj 文件的末尾通常已经有一个注释掉的部分，您可以用这些行替换它。重新加载项目，您就可以开始了。现在将在编译期间生成 .js 文件。

```
<Target Name="BeforeBuild">
  <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
</Target> 
```

仔细看看确切的路径，它可能会有所不同（例如，如果您有不同版本的 Typescript SDK）。同样，如果`tsc.exe`已经在您的`PATH`环境变量中，您可以使用与版本无关的命令：

```
<Target Name="BeforeBuild">
  <Exec Command="&quot;tsc&quot; @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
</Target> 
```

最后，如注释中所述，您可能需要添加 -c 以将注释保留到命令行。这允许诸如盒式磁带和 asp.net 的资源捆绑之类的工具检索引用并以正确的顺序呈现事物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T16:37:10.227

如果您在[编译 typescript 文件](http://onthefly.codeplex.com/)时仍然遇到问题，您可能需要查看我刚刚发布的应用程序。您只需单击一个按钮即可编译文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T09:44:26.793

Ok, I have reinstalled everything, including the vsix file. Apparently when I "run" my project now, the .ts file is automatically converted into a .js file (without custom build actions). That's ok for now. It would have been better if these files follow other code generators in that they compile when the source file gets saved. I would write my own SingleFileGenerator implementation for it but I do not yet know how to call the .js from c#.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T19:38:28.560

有几个人遇到过这个问题，包括我自己。修复方法是[手动安装 typescript visual studio extension](https://stackoverflow.com/questions/12684987/create-a-new-typescript-project-in-visual-studio)。

安装程序在这里：

> “C:\Program Files (x86)\Microsoft SDKs\TypeScript\0.8.0.0\TypeScriptLanguageService.vsix”

或在 x86 机器上：

> “C:\Program Files\Microsoft SDKs\TypeScript\0.8.0.0\TypeScriptLanguageService.vsix”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-28T11:19:53.353

如果您将 Visual Studio 2013 与最新的 TypeScript 1.5 一起使用，您可能需要[为 Visual Studio 安装 TypeScript 工具](https://visualstudiogallery.msdn.microsoft.com/b1fff87e-d68b-4266-8bba-46fad76bbf22)。我还建议安装[Web Essentials](https://visualstudiogallery.msdn.microsoft.com/56633663-6799-41d7-9df7-0f2a504ca361)，它将在保存时调用 .ts 脚本文件编译（除了许多其他有用的功能）。

然后按照 Visual Studio 为 .csproj 文件中的新 Web 项目创建的步骤进行操作。

1) 通过在根元素下添加以下元素来导入 MSBuild TypeScript 属性`Project`：

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.Default.props" Condition="Exists('$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.Default.props')" /> 
```

2) 导入 MSBuild TypeScript 构建目标

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.targets" Condition="Exists('$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.targets')" /> 
```

`Project/PropertyGroup`3）在元素下配置目标TypeScript版本

```
<TypeScriptToolsVersion>1.5</TypeScriptToolsVersion> 
```

# html - 使用中性 作为单词边界？

> ID：12687957
> 
> 赞同：1
> 
> 时间：2012-10-02T09:41:44.137
> 
> 标签：html, css

我有一个 .html 文件，其中包含如下文本内容：

```
<div> The study concludes that 1+1 = 2\. (Author in Journal..., Page ...) Another study finds...</div> 
```

现在，在 Firefox 中查看此内容时，我希望能够方便地复制 () 括号中的文本。但是鼠标左键2次只标记了一个像“Journal”这样的词，3次单击标记了整个div的内容。所以我的想法是将括号放在另一个 div 中，例如：

```
<div> The study concludes that 1+1 = 2\. <div>(Author in Journal..., Page ...)</div> Another study finds...</div> 
```

但这会导致 () 文本被推入新行，但文本流根本不应该改变，我只想实现复制+粘贴行为。有没有办法做到这一点？我想过将 div 类应用于 () 并取消 .css 文件中的属性，但不知何故它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:44:32.967

本质上，三次单击将标记一个段落。因此，即使您能够使您的内部 div 内联（这很简单，您可以使用`style="display:inline"`），浏览器文本分析引擎仍会将其读取为一个段落（或一个块）并使用标准行为：标记该段落。

所以基本上：不，如果你只使用 CSS 就不行。您必须使用 JavaScript 来识别元素上的三次单击并标记它。

# c - 将指针的值分配给静态变量

> ID：12687958
> 
> 赞同：1
> 
> 时间：2012-10-02T09:41:49.470
> 
> 标签：c, matlab

我一直在 c 中为 matlab 开发 S-Function。但是下面的代码崩溃了。我的 c 基础很差 :)

```
//
static double a=0;
//

static void mdlOutputs(SimStruct *S, int_T tid)
{   
    const real_T    *u    = ssGetInputPortRealSignal(S,0);
    a=*u;   //this line creates the problem

}
// 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:57:42.330

[文档](http://www.mathworks.se/help/simulink/sfg/ssgetinputportrealsignal.html)没有说返回可以是指针以外的任何东西，但正如评论者指出的那样，您应该在取消引用之前检查它是否存在`NULL`。

# path - 遗传算法 - 路径的交叉和变异算子

> ID：12687963
> 
> 赞同：3
> 
> 时间：2012-10-02T09:42:10.563
> 
> 标签：path, genetic-algorithm, mutation

我想知道是否有人知道图中路径的任何直观交叉和变异算子？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-13T11:58:12.777

问题有点老了，但问题似乎并没有过时或解决，所以我认为我的研究仍然可能对某人有所帮助。

就 TSP 问题中的变异和交叉而言，每个变异都是有效的（这是因为染色体代表访问固定节点的顺序 - 交换顺序总是可以产生有效的结果），在最短路径或最优的情况下路径，其中染色体是精确的路径表示，这不适用并且不是那么明显。所以这就是我如何使用 GA 解决最优路径的问题。

对于**crossover**，有几个选项：

1.  对于**至少有一个公共**点的路线（除了开始和结束节点） - 找到所有公共点并在交叉点交换子路线

    家长 1：`51 33 41 7 12 91 60`

    家长 2：`51 9 33 25 12 43 15 60`

    潜在的交叉点是**33**和**12**。我们可以得到以下孩子：这是使用这两个交叉点交叉的结果`51 9 33 41 7 12 43 15 60`。`51 33 25 12 91 60`

2.  当两条路线**没有共同点时**，从每个父节点中随机选择两个点并将它们连接起来（您可以使用随机遍历、回溯或启发式搜索，如 A* 或束搜索）。现在这条路径可以被视为交叉路径。为了更好地理解，请参见下图两种交叉方法：

    > 见[http://i.imgur.com/0gDTNAq.png](https://i.imgur.com/0gDTNAq.png) ![图像](../Images/0785124ad256df09bf95a0358f95afe6.png)
    > 
    > 黑色和灰色的路径是父母，粉红色和橙色的路径是孩子，绿色点是交叉点，红色点是起点和终点节点。第一张图显示了第一种类型的交叉，第二张图是另一个示例。

对于**mutation**，也有很少的选择。通常，像交换节点顺序或添加随机节点这样的虚拟突变对于平均密度的图实际上是无效的。因此，以下是保证有效突变的方法：

1.  从路径中随机抽取两个点，并将它们替换为这两个节点之间的随机路径。

    染色体：`51 33 41 7 12 91 60`，随机点：**33**和**12**，然后之间的随机/最短路径：`33 29 71 12`，突变染色体：`51 33 29 71 12 91 60`

2.  从路径中找到随机点，将其移除并连接其邻居（与第一个非常相似）

3.  从路径中找到随机点并找到到其邻居的随机路径

4.  尝试从某个随机选择的点开始遍历路径，直到到达初始路线上的任何点（对第一种方法稍作修改）。

    > 见[http://i.imgur.com/19mWPes.png](https://i.imgur.com/19mWPes.png) ![在此处输入图像描述](../Images/b46e6c0f20af40e55982389fe682297b.png)
    > 
    > 每个图以适当的顺序对应于每个变异方法。在上一个示例中，橙色路径将替换突变点（绿色节点）之间的原始路径。

**注意：**这种方法显然在这种情况下可能存在性能缺陷，当寻找替代子路径（使用随机或启发式方法）时会卡在某个地方或找到非常长且无用的子路径，因此请考虑限制突变执行时间或试验次数。

对于我的情况，即在最大化顶点权重总和同时保持节点权重总和小于给定界限的情况下找到最佳路径，这些方法非常有效并且给出了良好的结果。如果您有任何问题，请随时提问。另外，对不起我的 MS Paint 技能；）

**更新**

一个重要提示：我在实现中基本上使用了这种方法，但是使用随机路径生成有一个很大的缺点。我决定使用遍历随机选取点的最短路径切换到半随机路由生成——它更有效（但显然可能不适用于所有问题）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T09:46:51.063

嗯..这是一个非常困难的问题，人们为此写论文，但仍然没有正确的答案。

一般规则是“这一切都取决于您的域”。

有一些通用的 GA 库可以为您做一些工作，但为了获得最佳结果，建议您自己实施您的 GA 操作，特别是针对您的域。

[您可能在Theoretical CS](https://cstheory.stackexchange.com/)上获得更多答案，但您需要更多地扩展您的问题并添加有关您的任务和领域的更多详细信息。

**更新：** 所以你有一个图表。在 GA 术语中，通过图的路径代表一个个体，路径中的节点将是染色体。在那种情况下，我会说突变可以表示为路径与原始路径的偏差——其中一个节点被移动到某处，并且路径被调整，因此路径中的起始值和结束值保持不变。

突变可导致无效个体。在这种情况下，您需要做出决定：允许无效的，并希望它们会收敛到一些未经探索的解决方案。或者当场杀死他们。当我与 GA 合作时，我确实允许无效的解决方案，将“不适合”值与适合度一起添加。一些研究人员认为这有助于广泛探索解决方案空间。

交叉只能发生在相互交叉的路径上：在交叉点上，将路径的剩余部分与父母交换。

请记住，有多种交叉方式：个人可以在多个点或仅在一个点交叉。在图表的情况下，您可以有多个交叉点，这自然会导致多个子图。

正如我之前所说，这样做没有正确或错误的方法，但只有通过尝试才能找到最好的方法。

# python - Python中字符串的变量名

> ID：12687965
> 
> 赞同：5
> 
> 时间：2012-10-02T09:42:24.140
> 
> 标签：python, variables, filenames

我已经用 Python 编写了一些代码，我想将一些变量保存到具有变量名称的文件中。

以下代码：

```
variableName1 = 3.14
variableName2 = 1.09
save_variable_to_file(variableName1) # function to be defined
save_variable_to_file(variableName1) 
```

应该创建 2 个文件，一个名为 variableName1.txt，另一个名为 variableName2.txt，每个文件都应包含调用函数时相应变量的值。

这个变量名在代码中应该是唯一的。

谢谢！

HM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:48:55.897

不，这行不通。当你在那里写变量名时，它会给出变量的值，`3.14`依此类推，到`save_variable_to_file()`. 尝试以下变体之一：

```
d = dict(my_variable_name=3.14)
save_variable_to_file('my_variable_name', d['my_variable_name']) 
```

或者：

```
var_name = 'my_variable_name'
d = {var_name: 3.14}
save_variable_to_file(var_name, d[var_name]) 
```

这是一个[很好的教程](http://docs.python.org/tutorial/)，如果你认真学习 Python，你绝对应该阅读它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:20:36.690

可以找到变量的名称，被调用函数可以使用以下方法获取其调用者的变量：

```
import sys

def save_variable_to_file(var):

     names = sys._getframe(1).f_globals
     names.update(sys._getframe(1).f_locals)
     for key in names.keys():
         if names[key] == var: 
             break

     if key:
         open(key+".txt","w").write(str(var))
     else:
         print(key,"not found")

thing = 42
save_variable_to_file(thing) 
```

但这可能是一个非常糟糕的主意。请注意，我已将值转换为字符串，您希望如何保存字典和列表？稍后您将如何重建变量？

```
import glob

for fname in glob.iglob("*.txt"):
    vname = fname.rstrip(".txt")
    value = open(fname).read()
    exec(vname + "=" + value)

print(locals()) 
```

使用类似的东西`exec`可能会带来安全风险，使用 pickle、JSON 或 YAML 之类的东西可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:49:16.557

不幸的是，不可能找出变量的名称。要么扩展你的函数以允许字符串作为参数，要么你必须使用另一种解决方案：

```
save_variable_to_file("variableName1", variableName1) 
```

另一种解决方案是将变量存储在`dict`允许检索的 a 中`keys`：

```
myVariables = {}
myVariables["variableName1"] = 3.14

for key, value in myVariables.items():
    save_variable_to_file(key, value) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T10:05:49.753

变量没有名称。当您的脚本运行时，它会为一些与通常称为变量交互的对象创建一个或多个标识符，但这些都是临时的，并且在程序结束时不再存在。即使您保存它们，您也会面临相反的问题，即如何将它们转回具有与保存值相关联的保存名称的标识符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T09:51:22.400

如何使用字典：

```
var_dict = {'variable1': 3.14, 'variable2':1.09}
for key, value in var_dict.items():
    with open('path\%s'%key, "w") as file:
        file.write(value) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T09:54:17.613

```
for key, value in locals().items():
    with open(key + '.txt', 'w') as f:
        f.write(value) 
```

应该做你的伎俩 - 只要要考虑*所有本地定义的变量。*

然而，一个更好的解决方案是将你需要的所有东西放入一个字典中，并按照其他人已经提出的那样行事。

你甚至可以这样做：

```
def save_files(**files):
    for key, value in files.items():
        with open(key + '.txt', 'w') as f:
            f.write(value) 
```

接着

```
save_files(**my_previously_defined_dict)
save_files(**locals()) # as example above
save_files(filename='content') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-17T01:43:15.057

如果要将变量的名称作为字符串获取，请使用 python-varname 包（python3）：

```
from varname import nameof

s = 'Hey!'

print (nameof(s)) 
```

输出：

```
s 
```

在这里获取包：

[https://github.com/pwwang/python-varname](https://github.com/pwwang/python-varname)

# c# - 数据库类中的连接泄漏

> ID：12687973
> 
> 赞同：0
> 
> 时间：2012-10-02T09:42:41.127
> 
> 标签：c#, .net, mysql, database, database-connection

我有一个简单的 C# MySQL 连接类：

```
using System;
using System.Data;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Text;
using System.Diagnostics;
using System.IO;
using MySql.Data.MySqlClient;

namespace FSB
{
    public class DBConnect
    {
        private MySqlConnection connection;
        private string server;
        public string port;
        private string database;
        private string uid;
        private string password;

        //Constructor
        public DBConnect()
        {
            Initialize();
        }

        ~DBConnect()
        {
            //close connection
            this.CloseConnection();

        }

        //Initialize values
        private void Initialize()
        {

           // Local Database
            server = "localhost";
            database = "mydatabase";
            uid = "user";
            password = "pass";

            string connectionString;
            connectionString = "SERVER=" + server + ";Port=" + port + ";" + "DATABASE=" + database + ";" + "UID=" + uid + ";" + "PASSWORD=" + password + ";";

            connection = new MySqlConnection(connectionString);
        }

        //open connection to database
        private bool OpenConnection()
        {
            try
            {
                connection.Open();
                return true;
            }
            catch (MySqlException ex)
            {
                //When handling errors, you can your application's response based on the error number.
                //The two most common error numbers when connecting are as follows:
                //0: Cannot connect to server.
                //1045: Invalid user name and/or password.
                switch (ex.Number)
                {
                    case 0:
                        Console.WriteLine("Cannot connect to server.  Contact administrator");
                        break;

                    case 1045:
                        Console.WriteLine("Invalid username/password, please try again");
                        break;
                }
                return false;
            }
        }

        //Close connection
        public bool CloseConnection()
        {
            try
            {
                if (connection.State == System.Data.ConnectionState.Open)
                {
                    connection.Close();
                    connection.Dispose();
                }
            }
            catch (MySqlException ex)
            {
                Console.WriteLine(ex.Message);
                return false;
            }
            return true;
        }

        //Insert statement
        public void Insert(String query)
        {

            //open connection
            if (this.OpenConnection() == true)
            {
                //create command and assign the query and connection from the constructor
                MySqlCommand cmd = new MySqlCommand(query, connection);

                //Execute command
                cmd.ExecuteNonQuery();

                //close connection
                this.CloseConnection();
            }
        }

        //Update statement
        public void Update(string query)
        {

            //Open connection
            if (this.OpenConnection() == true)
            {
                //create mysql command
                MySqlCommand cmd = new MySqlCommand();
                //Assign the query using CommandText
                cmd.CommandText = query;
                //Assign the connection using Connection
                cmd.Connection = connection;

                //Execute query
                cmd.ExecuteNonQuery();

                //close connection
                this.CloseConnection();
            }
        }

        //Delete statement
        public void Delete(string query)
        {

            if (this.OpenConnection() == true)
            {
                MySqlCommand cmd = new MySqlCommand(query, connection);
                cmd.ExecuteNonQuery();
                this.CloseConnection();
            }
        }

        public MySqlDataReader getRecord(string query)
        {

            if (this.OpenConnection() == true)
            {
                //create mysql command
                MySqlCommand cmd = new MySqlCommand();
                MySqlDataReader reader;

                //Assign the query using CommandText
                cmd.CommandText = query;
                //Assign the connection using Connection
                cmd.Connection = connection;

                //Execute query
                reader = cmd.ExecuteReader();
                return reader;
            }

            return null;

        }

        //Check Duplicate statement  return true if not found
        public bool checkDuplicate(string tableName ,String fieldName,String checkValue)
        {

            //Open connection
            if (this.OpenConnection() == true)
            {
                //create mysql command
                MySqlCommand cmd = new MySqlCommand();
                MySqlDataReader reader;
                int rowCount = 0;

                //Assign the query using CommandText
                String query = "Select * from `" + tableName + "` Where  `"+fieldName + "` = '"+ checkValue +"'";
                cmd.CommandText = query;
                //Assign the connection using Connection
                cmd.Connection = connection;

                //Execute query
                reader =  cmd.ExecuteReader();
                while (reader.Read())
                {
                    //get rows
                    rowCount++;
                }
                //close connection
                this.CloseConnection();

                if (rowCount > 0)
                {
                    return false;
                }

            }
            return true;
        }

    }
} 
```

任何人都可以请我失去连接的地方，因为即使在每次我用来执行任何操作时对象超出范围后，连接仍保持打开状态，创建新连接并且未关闭先前的连接。所以我**的mysql连接限制用完了**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:45:21.107

我建议你使用`using blok`为了清理你的非托管对象，你在这个示例中的连接

```
using (var connection = new MySqlConnection("..."))
{
   ....
} 
```

注意：在roder的治疗结束时使用blok执行dispose来清洁

```
public void Insert(String query)
 {
        using(var connection = new MySqlConnection("..."))
        {
            connection.Open();
            using(var  cmd = new MySqlCommand(query, connection))
            {
                cmd.ExecuteNonQuery();
            }
        }
  } 
```

# objective-c - 如何在 iOS 6 中使用 NSLayoutConstraint？

> ID：12687979
> 
> 赞同：1
> 
> 时间：2012-10-02T09:42:55.760
> 
> 标签：objective-c, layout, ios6, nslayoutconstraint

我的应用程序应该支持使用 iOS 5 和 iOS 6 的 iPhone 分辨率（5 和更早版本）。当我在 IB 中使用自动布局时，iOS 5 应用程序崩溃如下：[link](https://stackoverflow.com/questions/11198981/presentviewcontroller-crash)

所以，我试图在代码中使用 NSLayoutConstraint，但还没有成功。

子问题：

1.  我在 viewDidLoad 方法中添加约束，但它正确吗？
2.  updateViewConstraints 是否由框架调用？我从未见过它被调用过。
3.  我尝试使用苹果文档中的示例，但无法查看。

有人知道该怎么做吗？

PS：我知道可以通过设置框架手动完成，但我想使用 NSLayoutConstraints。

UDP：是的，我知道，这就是我在代码中使用 NSLayoutConstraint 的原因。我可以为确定iOS版本创造条件。问题是关于iOS6。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T12:04:39.860

AutoLayout 功能仅与 iOS6 兼容，在 iOS5 中不支持。因此崩溃

如果您希望您的应用程序与 iOS5 兼容，则不能在您的 XIB 文件中使用 AutoLayout。

您只能使用较旧的方法，[`AutoResizingMask`](http://developer.apple.com/library/ios/documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW5)例如示例（无论如何，这对于大多数情况来说通常就足够了）。

# php - 如何在循环之间更改值

> ID：12687987
> 
> 赞同：0
> 
> 时间：2012-10-02T09:43:31.330
> 
> 标签：php

我在 foreach 循环中提取了数组的值，但是当它检索到某个`'br_title'`更改的 href 链接时，我想要`<a href="http://noorresults.moe.sa`..如何用简单的代码做到这一点？..

```
 <ul class="riMenu">
            <?php foreach ($last_branches as $last) { ?>
          <li><a href="<?= base_url(); ?>branches/show/<?php if (!empty($last['br_id'])) echo $last['br_id'] ?>"> <?php if (!empty($last['br_title'])) echo $last['br_title'] ?></a></li>

    <?php }; ?>
        </ul>

    </div>
</div><!-- Menu E 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:52:35.213

您可以如下更改您的代码

```
<?php 

$total_to_show = 5; // take offset
$count = 1; //counter until it reach to offset

foreach ($last_branches as $last) { if($count > $total_to_show){?>

                <li><a href="http://noorresults.moe.sa/MarksInquiry/StudentMark.aspx"> <?php  if(!empty($last['br_title'])) echo $last['br_title'] ?></a></li>
                <? }else{?>
                <li><a href="<?= base_url(); ?>branches/show/<?php  if(!empty($last['br_id'])) echo $last['br_id'] ?>"> <?php  if(!empty($last['br_title'])) echo $last['br_title'] ?></a></li>
                <?php } 
$count++;
} ?> 
```

# c# - .CSV 文件逐行写入，检查错误

> ID：12687989
> 
> 赞同：1
> 
> 时间：2012-10-02T09:43:41.250
> 
> 标签：c#, file, csv

第一个问题，所以希望它会是相关的。虽然对编码不是很陌生......我对“好”编码很陌生，所以如果我完全不知道明显的最佳实践，我深表歉意。

我目前正在逐行写入 CSV 文件（使用 c#）。

这一切都很好，直到今天早上我被告知，我正在编写代码的部门实际上想要一个文件中的所有行（我每批做一个文件，并在批处理 lvl 上进行错误检查，所以如果批次有任何问题 没有批次出口）

他们仍然需要它在批处理 lvl 上是全有或全无（我在尝试将它们写入文件之前检查“单元格”值，因此该阶段应该工作）但我敏锐地意识到我的一部分在开始文件写入之前我目前无法检查的代码是行自己写的。我想知道个别行写入失败的可能性有多大？假设文件被正确创建/第一行正确访问？其次，我想如果这可能是一个问题，是否有任何我应该注意的“最佳实践”来简化（或消除）问题。

下面的代码我为需要编写的批处理中的每一行调用。

```
public void WriteRow(CsvRow row)
    {
        StringBuilder builder = new StringBuilder();
        bool firstColumn = true;
        foreach (string value in row)
        {
            // Add separator if this isn't the first value
            if (!firstColumn)
                builder.Append(',');
            // Implement special handling for values that contain comma or quote
            // Enclose in quotes and double up any double quotes
            if (value.IndexOfAny(new char[] { '"', ',' }) != -1)
                builder.AppendFormat("\"{0}\"", value.Replace("\"", "\"\""));
            else
                builder.Append(value);
            firstColumn = false;
        }
        row.LineText = builder.ToString();
        WriteLine(row.LineText);
    } 
```

# ios - 我如何解析这个 JSON 数据？

> ID：12687990
> 
> 赞同：1
> 
> 时间：2012-10-02T09:43:42.860
> 
> 标签：ios, json

```
 ["api",["API","Apiales","Apiaceae","Apicomplexa lifecycle stages","Apia","Apicomplexa","Apidae","APIA Leichhardt Tigers","Apical consonant","Apical membrane"]] 
```

我如何使用 SBJson Parser for iOS 解析这个 JSON。我需要它是一个只有这些值的数组：

```
 "API","Apiales","Apiaceae","Apicomplexa   lifecyclestages","Apia","Apicomplexa","Apidae","APIA Leichhardt Tigers","Apical consonant","Apical membrane" 
```

我当前的代码：

```
SBJsonParser *parser = [[SBJsonParser alloc] init];

// Prepare URL request to download statuses from Twitter
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://en.wikipedia.org/w/api.php?action=opensearch&search=dj&limit=100&namespace=0&format=json"]];

// Perform request and get JSON back as a NSData object
NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

// Get JSON as a NSString from NSData response
NSString *json_string = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];

NSDictionary *results = [json_string JSONValue];

NSArray *statuses = [parser objectWithString:json_string error:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:06:43.380

尝试，

```
NSArray *results = [json_string JSONValue];

NSArray *statuses = [results objectAtIndex:1]; 
```

# android - 将 alertdialog 中的 EditTexts 返回到 MainActivity

> ID：12687995
> 
> 赞同：0
> 
> 时间：2012-10-02T09:44:17.550
> 
> 标签：android, android-edittext, android-alertdialog

我设计了一个alertdialog，当用户按下save按钮时，希望它能够将用户在alert dialog中输入的editTexts（球员的分数）返回给activity，以便进一步处理。

这怎么能做成？会有样品吗？非常感谢！！

我已经执行了以下操作，但现在的输出是它无法识别正在输入的内容并要求用户输入非空白的 editText（通过底部的 else 路由）：

```
public OnClickListener NewRowButtonListener = new OnClickListener()  
   {  
      @Override  
      public void onClick(View v)   
      {       
           AlertDialog.Builder dialog = new AlertDialog.Builder(MainActivity.this);  

           dialog.setTitle("Add Scores"); //set title  
           View view = getLayoutInflater().inflate(R.layout.custom_dialog_add, null);  
           dialog.setView(view); 
           dialog.create();             
           final AlertDialog test = dialog.create();            
           SlotAlert_add_EditText = (EditText) view.findViewById(R.id.Slot_Alert_add_EditText); 
           P1Alert_add_ScoreEditText = (EditText) view.findViewById(R.id.P1_Alert_add_ScoreEditText); 
           P2Alert_add_ScoreEditText = (EditText) view.findViewById(R.id.P2_Alert_add_ScoreEditText); 
           P3Alert_add_ScoreEditText = (EditText) view.findViewById(R.id.P3_Alert_add_ScoreEditText); 
           P4Alert_add_ScoreEditText = (EditText) view.findViewById(R.id.P4_Alert_add_ScoreEditText);           

           Button alert_add_save = (Button) view.findViewById(R.id.Alert_add_SaveButton);  //find the Button object within the inflated view                                    
           alert_add_save.setOnClickListener(addButtonListener);        //set the onClickListener    
           test.show();     //show the dialog  
      } 
   }; 
```

进而

```
public OnClickListener addButtonListener = new OnClickListener() 
   // create a new Button and add it to the ScrollView    
   { 
      private String SlotAppend0EditText; 
      @Override 
      public void onClick(View v)  
      {            
            SlotEditText.setText(""+SlotAlert_add_EditText); //try to set EditText in MainActivity using the one in the alert dialog above 
            P1ScoreEditText.setText(""+P1Alert_add_ScoreEditText);  
            P2ScoreEditText.setText(""+P2Alert_add_ScoreEditText); 
            P3ScoreEditText.setText(""+P3Alert_add_ScoreEditText);  
            P4ScoreEditText.setText(""+P4Alert_add_ScoreEditText); 

         if (SlotEditText.getText().length() <4 && 
             SlotEditText.getText().length() > 0 && 
             P1ScoreEditText.getText().length() > 0 &&  
             P2ScoreEditText.getText().length() > 0 && 
             P3ScoreEditText.getText().length() > 0 &&  
             P4ScoreEditText.getText().length() > 0 )             
         { 
            SaveScoresToFile(SlotAppend0EditText, 
                    P1ScoreEditText.getText().toString(),  
                    P2ScoreEditText.getText().toString(),  
                    P3ScoreEditText.getText().toString(),  
                    P4ScoreEditText.getText().toString()); 
                         } // end if 
         else  (another alert message saying please enter valid input) //NOW THE RESULT IS SHOWING THIS! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:55:26.293

看到这个

```
 Button b = (Button) findViewById(R.id.LeftMenu);
    b.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
             CreateAlertDialog ();
        }
    }); 
```

警报对话框

```
 private void CreateAlertDialog () {         

    AlertDialog.Builder alert = new AlertDialog.Builder(getActivity());

    alert.setTitle("Title");
    alert.setMessage("Message");

    // Set an EditText view to get user input 
    final EditText input = new EditText(getActivity());
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {

        }
    });

    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {

        }
    });
    alert.show();       
} 
```