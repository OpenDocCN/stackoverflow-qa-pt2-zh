# StackOverflow 问答 14233000-14233999

# iphone - 警报视图中 UiPicker 上的小尺寸问题（警报视图高度问题）

> ID：14233002
> 
> 赞同：1
> 
> 时间：2013-01-09T10:22:03.097
> 
> 标签：iphone, objective-c, datepicker, uipickerview, uialertview

在我的应用程序中，我需要**在 UIAlert 视图上有一个日期选择器**

我通过[在警报视图中关注日期选择器来实现这一点](http://code.thewebanalyzers.com/2011/12/showing-datepicker-in-alert-view-without-using-interface/)

但是，当我在警报视图中使用此日期选择器时，警报视图中存在**一些高度问题，**我尝试为警报视图设置框架，但它没有设置要做什么？

![在此处输入图像描述](../Images/bf6ecca3bdecfd047e96003ac2147c16.png)

我的代码：

```
-(void)SetDate
{
      dobPicker = [[UIDatePicker alloc] init];
      dobPicker.frame=CGRectMake(20, 25.0, 240.0, 150.0);
      dobPicker.datePickerMode = UIDatePickerModeDateAndTime;

      [dobPicker setDate:[NSDate date]];

            UIAlertView *dAlert = [[UIAlertView alloc] initWithTitle:@"Set Date" message:@"nnnnnnn" delegate:self cancelButtonTitle:@"Set Current Date" otherButtonTitles:@"Set New Date", nil];
   dAlert.frame=CGRectMake(10, 10.0, 300.0, 400.0);
  dAlert.delegate = self;
  [dAlert addSubview:dobPicker];
  [dAlert show];
  [dAlert release];
}

- (void) alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
      NSDate *date = [dobPicker date];
      NSDateFormatter* dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
      [dateFormatter setDateFormat:(NSString*) @"yyyy-MM-dd"];

      NSLog(@"-------------------------- %@", [dateFormatter stringFromDate:date]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:36:25.107

简单：... [UIAlertView..

> 消息：@"\n\n\n\n\n\n\n\n\n\n\n"

...

也..查看UIAlertView的标题..尝试将“y”从25修改为40..（测试）

> dobPicker.frame=CGRectMake(20, 40.0, ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:34:15.417

`Transform` `Scale`你`UIAlertView`是这样的：

```
 dAlert.transform = CGAffineTransformScale(dAlert.transform,xScaleHere, yScaleHere); //provide your scaling points sx and sy according to your requirement. 
```

# google-drive-api - 购买额外存储空间的用户的 Google 云端硬盘总配额信息存在问题

> ID：14233005
> 
> 赞同：0
> 
> 时间：2013-01-09T10:22:06.827
> 
> 标签：google-drive-api

对于我的应用程序，我需要计算每个用户的可用存储空间。我使用关于 API（https://developers.google.com/drive/v2/reference/about/get）和以下公式：

```
Free storage = (quotaBytesTotal - quotaBytesUsed) 
```

它运行良好，除了没有额外存储的用户。对于此类用户，quotaBytesUsed 大于quotaBytesTotal：

```
 {"kind"=>"drive#user", "displayName"=>"D B", "isAuthenticatedUser"=>true},
 "quotaBytesTotal"=>"5368709120",
 "quotaBytesUsed"=>"26843545600",
 "quotaBytesUsedAggregate"=>"26843545600",
 "quotaBytesUsedInTrash"=>"0",
 "largestChangeId"=>"363004", 
```

这是 API 错误吗？如何计算此类用户的免费存储空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:32:40.477

我找到了问题的原因。我们的用户购买了 +20GB 的额外存储空间。他有 25GB 的配额，几乎所有的 25GB 都用完了。上个月的付费订阅（用于额外存储）被取消，该用户的配额减少到 5GB。

这就是为什么`quotaBytesUsed > quotaBytesTotal`

# javascript - 切换具有给定 CSS 类的所有元素

> ID：14233010
> 
> 赞同：1
> 
> 时间：2013-01-09T10:22:18.240
> 
> 标签：javascript, toggle, prototype, each, scriptaculous

我正在尝试使用一个复选框同时切换具有给定 css 类的多个元素。这看起来像这样：

HTML：

```
<input type="checkbox" onclick="toggle_class('.subdivision_wraps');" /> 
```

JS：

```
function toggle_class(cssClass) {
  $$(cssClass).each(function(s){
    new Effect.toggle(s, 'blind', { duration: 0.3 });
  });
} 
```

应该工作吧？错误..只有第一个 div 被切换。奇怪的是，如果我使用 BlindDown 一切都按我想要的方式工作（所有 div 同时被蒙蔽）。

难道我做错了什么？我知道我可以使用 BlindDown 和 BlindUp，但我宁愿解决这个切换问题。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:33:05.790

这似乎是一个奇怪的问题`Effect.toggle`。如果你给`div`元素`id`值，你的代码可以工作：http: [//jsbin.com/ifeqek/1](http://jsbin.com/ifeqek/1)如果你不这样做，你会得到你所看到的效果：http: [//jsbin.com/ifeqek/3](http://jsbin.com/ifeqek/3)

所以我可能会更新`toggle_class`为：

```
function toggle_class(cssClass) {
  $$(cssClass).each(function(s){
    s.identify(); // <======== The new bit, assign an id if there isn't already one
    new Effect.toggle(s, 'blind', { duration: 0.3 });
  });
} 
```

[实例](http://jsbin.com/ifeqek/4)| [来源](http://jsbin.com/ifeqek/4/edit)

# facebook-javascript-sdk - 使用 *.net 域作为站点 URL 或应用程序域

> ID：14233011
> 
> 赞同：0
> 
> 时间：2013-01-09T10:22:17.917
> 
> 标签：facebook-javascript-sdk, facebook-login

我正在尝试注册一个应用程序，以便我可以在我的网站上使用 facebook 登录。问题是我的域以 .net 结尾，因此出现错误 App Domains: ***** ***** .net is not a valid domain。站点 URL 不是有效的 URL。

可能是什么问题，因为当我使用 .com 时一切正常。

# ios - presentViewController 和 UINavigationController 的区别？

> ID：14233017
> 
> 赞同：36
> 
> 时间：2013-01-09T10:22:33.083
> 
> 标签：ios, objective-c, cocoa-touch, uiviewcontroller

`presentViewController`请说出和的区别`UiNavigationController`？我可以使用`presentViewController`而不是`UINavigationController`在应用程序中导航不同的视图吗？使用的场景是什么？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-01-09T10:33:12.943

`presentViewController`提供一种机制来显示所谓的模态视图控制器；即，视图控制器将通过叠加在呈现控制器之上来完全控制您的 UI。

`UINavigationController`提供了一种更灵活的机制，您可以在其中推送一个新控制器，然后将其弹出，以便以有序的方式返回到前一个控制器。想象一下，导航控制器中的控制器只会构建一个从左到右的序列。

我认为这`presentViewController`最适合一次只呈现*一个*视图控制器的情况。你当然可以用它来堆叠更多的视图控制器（因此有点“模仿”穷人的导航控制器），但我敢打赌，你会很快发现某些东西没有按预期工作。

具体来说，这种限制的一个示例如下：当您关闭模态视图控制器（为了“关闭”它）时，所有模态呈现的视图控制器（来自同一个呈现控制器）也将立即被解散。因此，您根本无法实现类似“返回”/导航的功能。

所以，这取决于你想要做什么。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-09T10:29:48.823

A`UINavigationController`是`UIViewController`管理视图控制器堆栈并添加后退按钮等的子类。

`presentViewController`是`UIViewController`您用来呈现模态视图控制器的类的方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-09T10:29:53.927

为`UINavigationController`您维护一个导航堆栈。然后，您可以浏览分层内容。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

如果您使用`UIViewControllers` `presentViewController`方法，您基本上只是替换视图控制器。没有为您维护导航堆栈。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-09T10:26:08.967

UINavigationController 是一个类，presentViewController 是 UIViewController (iOS 5+) 的一个实例方法，其中 UINavigationController 是一个子类。

pushViewController 是与 presentViewController 类似的方法。它是 UINavigationController 的实例方法，适用于 iOS 2 +

# android - 如何在 Android 的 webView 中加载 img 标签？

> ID：14233021
> 
> 赞同：2
> 
> 时间：2013-01-09T10:22:40.790
> 
> 标签：android, html, webview, android-webview, android-websettings

我想在 Android webview 中加载以下 HTML 代码。

```
<!DOCTYPE html>
<html>
<body style = "text-align:center">

<img src="http://XXXXXXXX.com/books_snaps/UR335/1.jpg" alt="pageNo" 

height="100%" width="100%"> 

</body>
</html> 
```

`http://XXXXXXXX.com/books_snaps/UR335/1.jpg`图片链接在哪里。我想将此图像加载到`<img>`上述 HTML 的标记中。如何在 Android 的 webview 中嵌入 HTML 代码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T10:29:36.420

```
String htmlString = "<!DOCTYPE html><html><body style = \"text-align:center\"><img src=\"http://shiaislamicbooks.com/books_snaps/UR335/1.jpg\" alt=\"pageNo\" height=\"100%\" width=\"100%\"></body></html>";
webview.loadDataWithBaseURL(null,htmlString,"text/html","UTF-8","about:blank"); 
```

另外，您需要添加互联网权限，

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:33:08.683

您可以先将 html 文件保存在 assets 文件夹中说

```
assets\html\index.html 
```

然后只需将页面加载到 webview 作为

```
 webView.loadUrl("file:///android_asset/html/index.html"); 
```

或者你可以试试这个

```
String content = 
       "<?xml version=\"1.0\" encoding=\"UTF-8\" ?>"+
       "<html><head>"+
       "<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\" />"+
       "<head><body>";

content += myContent + "</body></html>";

WebView WebView1 = (WebView) findViewById(R.id.webView1);
WebView1.loadData(content, "text/html; charset=utf-8", "UTF-8"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-27T07:11:45.183

按照 Sanket Kachhela 的回答，如果您在 Android 9.0 设备上运行您的应用程序，但仍然看不到图像，请考虑`android:usesCleartextTraffic="true"`在清单文件中添加应用程序标签。

```
 <application
    android:allowBackup="true"
    android:icon="@mipmap/ic_launcher"
    android:label="@string/app_name"
    android:roundIcon="@mipmap/ic_launcher_round"
    android:supportsRtl="true"
    android:theme="@style/AppTheme"
    android:usesCleartextTraffic="true">
    ... 
```

对我来说，它完成了这项工作。

[看到这个线程](https://stackoverflow.com/a/50834600/2826184)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T10:32:41.523

您可以从链接下载该图像，然后您需要在您的 android 应用程序资产文件夹中创建一个名为“Images”的文件夹。

然后在您可以将图像链接的路径更改为`../images/1.jpg`html 文件之后。

试试这个方法。我相信它会起作用。

谢谢。

# android - GPS跟踪另一个没有互联网连接的设备

> ID：14233024
> 
> 赞同：1
> 
> 时间：2013-01-09T10:22:44.580
> 
> 标签：android, gps, tracking

我知道Android中有很多关于GPS的线程，但我没有找到答案。是否可以跟踪另一个 android 设备的位置，并仅通过 GPS（没有 Internet 连接）在这两个设备之间发送一些信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T10:26:47.657

GPS 是一种从卫星到想要知道自己位置的设备的单向信息通道。您绝对无法通过 GPS 发送信息。

如果您正在寻找 android 设备之间的直接通信，您最好的选择是[蓝牙](http://developer.android.com/guide/topics/connectivity/bluetooth.html)和[Wi-Fi Direct](http://developer.android.com/guide/topics/connectivity/wifip2p.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T10:26:36.987

抱歉，这简直是不可能的。没有互联网连接=没有通信。

# php - 如何使用 spawn-fcgi 从命令行测试 php 文件

> ID：14233028
> 
> 赞同：0
> 
> 时间：2013-01-09T10:23:03.747
> 
> 标签：php, nginx, spawn-fcgi

我有一个 php 脚本。我正在使用 nginx 和 spawn-fcgi。

```
spawn-fcgi -n -s /tmp/nginx9010.socket -u www-data -g www-data -f /usr/bin/php5-cgi -C 6 
```

如何从`spawn-fcgi`使用脚本的命令行进行测试？

例如，我在 /home/ubuntu/test.php 中有一个脚本

我在使用 nginx 并执行 php 脚本时遇到问题。它提示下载。

我`#!/usr/bin/php`在文件中也做了一个`chmod a+x`。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:44:49.867

*   要测试 FastCGI 后端，您可以尝试创建 CGI 环境并使用 cgi-fcgi 连接到后端
*   您可以附加 strace 以查看后端的功能（例如，它是否甚至接收到来自 Web 服务器的请求）；使用 -ff 附加到主进程以查看所有工作人员的系统调用
*   FastCGI 模式下的 php5-cgi 不需要 shebang 行或文件上的 +x - 它不使用内核来执行它们，它只是将它们作为简单文件加载
*   Firefox（可能还有其他浏览器）通常会缓存 mime 类型，因此即使您解决了问题，您也会看到下载提示。**使用 curl 进行测试！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:36:34.913

nginx 不会提供它传递给 php 的文件，nginx 只提供静态文件，所以如果它正在下载 php 文件，您可能需要检查您是否将 php 文件发送到正确的位置，您是否使用 IP 和 PORT在配置文件的 php 位置块中？

在回家的火车上，我只能猜测我的头顶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:10:57.120

FWIW，像 nginx 提供要下载的文件这样的问题是由于 Nginx 自己提供文件而不将它们发送到 fastcgi 后端，通常是因为与 uri 匹配`try_files`或错误的块匹配。`location {}`

# java - 按金额删除购物车中的产品

> ID：14233029
> 
> 赞同：0
> 
> 时间：2013-01-09T10:23:06.030
> 
> 标签：java, swing, nullpointerexception, jframe

我有这个注册应用程序，我必须在篮子中创建删除选项。 ![篮子](../Images/ba477a9d3384fdad020ba19ab6742079.png)

现在我将按钮设置在一个循环中，以便为每个产品创建一个按钮。这一切都很好，但是每当我在篮子中放入多个相同的物品时，它也会将其删除，而不是减少数量。基本上我希望它像：cars aantal：3，当我单击该产品的删除按钮时，aantal 为 2，直到它为 1，然后删除该项目。我知道这是通过设置标签的文本来完成的，但标签数量与产品数量相关联。这是我的代码：

**支付等级：**

```
for (int i = 0; i < products.size(); i++) {
            Product product = products.get(i);
            productdelete = product;

lblamount = new JLabel(String.valueOf(WinkelApplication.getBasket().getProductAmount(productdelete)));
            lblamount.setBounds(410, verticalPosition + i * productOffset, 70, 20);
            lblamount.setFont(WinkelApplication.FONT_10_PLAIN);
            add(lblamount);

DeleteProduct deleteproduct = new DeleteProduct();

            JButton btnDeleteproduct = new JButton("X");
            btnDeleteproduct.setBounds(380, verticalPosition + i * productOffset, 20, 20);
            btnDeleteproduct.setFont(WinkelApplication.FONT_10_BOLD);
            btnDeleteproduct.setName("" + i);
            btnDeleteproduct.addActionListener(deleteproduct);
            add(btnDeleteproduct);
} 
```

**删除产品类：**

```
public void productlist(){
    List<Product> products = WinkelApplication.getBasket().getProducts();

    for(int i = 0; i < products.size(); i++){
        deleteproduct = products.get(i);
    }
    }

    public void actionPerformed(ActionEvent event){
        productlist();

        productamount = WinkelApplication.getBasket().getProductAmount(deleteproduct);

        if(productamount == 1){
            WinkelApplication.getBasket().deleteProduct(deleteproduct);
        }else if (productamount > 1){
            productamount--;
            WinkelApplication.getBasket().setProductAmount(productamount);
            WinkelApplication.getInstance().showPanel(new view.Payment());
        }

    } 
```

每当我将此代码放在其他地方加载时：

```
productamount = WinkelApplication.getBasket().getProductAmount(deleteproduct); 
```

它给了我一个错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at model.Basket.getProductAmount(Basket.java:62)
    at view.DeleteProduct.productlist(DeleteProduct.java:27)
    at view.DeleteProduct.actionPerformed(DeleteProduct.java:34)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6382)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3275)
    at java.awt.Component.processEvent(Component.java:6147)
    at java.awt.Container.processEvent(Container.java:2083)
    at java.awt.Component.dispatchEventImpl(Component.java:4744)
    at java.awt.Container.dispatchEventImpl(Container.java:2141)
    at java.awt.Component.dispatchEvent(Component.java:4572)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4619)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4280)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4210)
    at java.awt.Container.dispatchEventImpl(Container.java:2127)
    at java.awt.Window.dispatchEventImpl(Window.java:2489)
    at java.awt.Component.dispatchEvent(Component.java:4572)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:704)
    at java.awt.EventQueue.access$400(EventQueue.java:82)
    at java.awt.EventQueue$2.run(EventQueue.java:663)
    at java.awt.EventQueue$2.run(EventQueue.java:661)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$3.run(EventQueue.java:677)
    at java.awt.EventQueue$3.run(EventQueue.java:675)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:674)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:31:05.477

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException 
```

清楚地表明您要获取的对象为 null 尝试放置 null 检查 if(WinkelApplication.getBasket()!=null)

# java - ScheduledExecutorService，以不同的时间间隔调度不同的任务

> ID：14233032
> 
> 赞同：2
> 
> 时间：2013-01-09T10:23:09.413
> 
> 标签：java, threadpool, scheduledexecutorservice

我想要两个任务 - HandlerA 和 HandlerB 分别每 10 秒和每 20 秒执行一次。如果此解决方案是错误的，那么实现此目标的最佳方法是什么？

```
ScheduledExecutorService stp = Executors.newScheduledThreadPool(8);
stp.scheduleAtFixedRate(new HandlerA(), 0, 10, TimeUnit.SECONDS);
stp.scheduleAtFixedRate(new HandlerB(), 0, 20, TimeUnit.SECONDS); 
```

当我安排另一个任务时，是否会覆盖计划任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T10:37:28.947

你的解决方案是正确的。您正在安排 2 个单独的任务。您的 ScheduledThreadPoolExecutor 的核心池大小 = 8，这足以并行执行 2 个计划任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:26:08.137

你为什么要问？那个解决方案很好。每次调用都会`scheduleAtFixedRate`启动一个单独的调度程序，即添加`HandlerA`两次使用两个独立的调度程序运行它。

# c# - 如何处理 DataGrid 复选框中的选中事件

> ID：14233036
> 
> 赞同：0
> 
> 时间：2013-01-09T10:23:18.193
> 
> 标签：c#, asp.net, pocketpc, handheld

我需要用 DataTable 对象作为 DataSource 填充 DataGrid。它很完美，我可以做到这一点，但是我坚持每行中的 CheckBox 要求。我知道 DataGridView 提供 DataGridViewCheckBoxColumn 但是，我希望 DataGrid 也一样。

我有一个解决方案，像这样 -

```
 DataTable dt = new DataTable("Books");

        DataColumn dc1 = new DataColumn("Name", typeof(System.String));
        DataColumn dc2 = new DataColumn("ISBN", typeof(System.String));
        DataColumn dc3 = new DataColumn("Price", typeof(System.Int32));
        DataColumn dc4 = new DataColumn("Author", typeof(System.String));

        DataColumn dcSelectToDelete = new DataColumn("Select");
        dcSelectToDelete.DataType = System.Type.GetType("System.Boolean");
        dcSelectToDelete.DefaultValue = false;

        dt.Columns.Add(dc1);
        dt.Columns.Add(dc2);
        dt.Columns.Add(dc3);
        dt.Columns.Add(dc4);
        dt.Columns.Add(dcSelectToDelete);

        drd.DataSource = dt; 
```

但我不确定这段代码的正确性。如果它有效，我不知道如何处理复选框的 Checked 事件。

请为 DataGrid（不是 DataGridView）建议正确的解决方案。

如果我将按某个列表填充数据表。如何在每列中动态添加 CheckBox？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:16:31.410

您如何使用 DataGridTemplateColumn（如在 WPF DataGrid 中）并在其中放置一个带有 Checked 和 UnChecked 事件或任何事件的复选框，然后在后面的代码中处理它。例如在 WPF 中添加 DataGrid.Columns

```
<DataGridTemplateColumn  >
     <DataGridTemplateColumn.CellTemplate>
           <DataTemplate>
                <CheckBox x:Name="chkSelect" Checked="chkSelect_Checked" Unchecked="chkSelect_Unchecked" />
           </DataTemplate>
     </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

此外，您还没有将技术指定为 WPF、ASP 或其他。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:58:56.697

你有什么理由使用`DataGrid`哪个`GridView`更好，更有能力的控制？

无论如何，要在 DataGrid 中显示 Check Box，您需要使用[TemplateColumn](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatecolumn.aspx)。如果您正在使用自动生成列，那么您需要关闭是否关闭，而是手动指定所有列。例如，

```
<asp:DataGrid id="MyDataGrid" runat="server" AutoGenerateColumns="false" ... >
   <Columns>
       <asp:BoundColumn HeaderText="Name" DataField="Name"/>
       <asp:BoundColumn HeaderText="ISBN" DataField="ISBN"/>
       ...
       <asp:TemplateColumn>
          <ItemTemplate>
             <asp:CheckBox ID="SelectRow" runat="server" 
                Checked='<%# DataBinder.Eval(Container.DataItem, "Select") %>' />
          </ItemTemplate>
   </Columns>
</asp:DataGrid> 
```

数据表代码将保持与您发布的相同 - 复选框的选中属性根据选择列中的值设置。

# java - IntelliJ 和 Scala

> ID：14233038
> 
> 赞同：-5
> 
> 时间：2013-01-09T10:23:20.073
> 
> 标签：java, scala, intellij-idea

我正在使用 Intellij 进行一些 scala 开发。我通常使用 Eclipse，但被朋友说服尝试使用 IntelliJ。发现缺乏“问题”观点是一种真正的痛苦。但是还有一个问题。

我在测试中有以下代码片段：

```
import org.junit.Test
import org.mockito.{Mockito, Mock}
import java.util
...

util.ArrayList aList = Mockito.mock(classOf[util.ArrayList])
aList.add("") 
```

因此，首先我在编辑器屏幕的右侧看到一个红色条（遗憾的是没有“问题视图”），当我将鼠标悬停在它上面时，它会显示`Can not resolve symbol aList`。

谁能帮我理解这一点？

如果我将 ArrayList 导入更改为`import java.util.ArrayList`并删除代码中的前缀，则会收到 3 条错误消息：

```
Can not resolve symbol aList
Reference must be prefixed
Use of postfix method call 
```

这一切都在线：

```
 ArrayList aList = Mockito.mock(classOf[ArrayList]) 
```

那么任何人都可以帮助我理解这些错误集合吗？IntelliJ 没有提供任何有用的帮助，谷歌搜索也没有发现任何问题。

最后，如果有人使用 IntelliJ 和 Eclipse 进行 scala+java 开发，你能给我一个意见吗？在我看来，IntelliJ 有点 s**t。或者，也许我只是不明白...

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:51:54.140

关于前缀：with

```
import java.util 
```

您导入 util 命名空间，即访问 util 中的类，您必须编写 util.ArrayList。如果要在 util 中导入所有内容，则需要编写

```
import java.util._ 
```

专门导入 ArrayList

```
import java.util.ArrayList 
```

# sql - Rails postgres 按自定义顺序

> ID：14233039
> 
> 赞同：1
> 
> 时间：2013-01-09T10:23:20.090
> 
> 标签：sql, ruby-on-rails, ruby, postgresql

我正在使用 IN 查询搜索记录，如下所示：

```
Event.where("events.id IN (#{events.nil? ? '' : events.collect(&:id).join(',')})") 
```

产生如下输出：

```
SELECT "events".* FROM "events" WHERE (events.id IN (143,169,139,48,172,146,145,124,111,49,108,18,113,144)) AND (status = 'live') LIMIT 10 
```

但是，默认情况下会按 update_at 排序。我希望它按查询的 IN 部分排序。我的意思是，我希望这是它返回的顺序：

```
143,169,139,48,172,146,145,124,111,49,108,18,113,144 
```

这有可能吗？

我还必须注意，我不能在表格中添加优先级列或类似的列，因为“事件”部分将动态生成。

我刚刚在这里发现了一个非常相似的问题：

[使用 Rails Active Record 在 IN 列表中的 Postgres ORDER BY 值](https://stackoverflow.com/questions/12012574/postgres-order-by-values-in-in-list-using-rails-active-record)

随意将我的这个标记为重复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:32:57.310

这是 Rails，所以使用 Rails 的方法进行数据库查询。我相信：

```
Event.where(:id => events.map(&:id)).order(:id) 
```

就是你要找的。

如果`events`已经是数据库记录的集合，那么`.where(:id => events)`也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:28:07.310

你试过订购吗？

```
SELECT "events".* FROM "events" 
WHERE (events.id IN (143,169,139,48,172,146,145,124,111,49,108,18,113,144)) 
AND (status = 'live') 
ORDER BY events.id asc
LIMIT 10 
```

# xslt - 以多对多关系组合节点

> ID：14233042
> 
> 赞同：1
> 
> 时间：2013-01-09T10:23:25.540
> 
> 标签：xslt

我有一个通过 id 属性具有多对多关系的 xml 片段，示例如下：

```
<root>
  <foolist name="firstlist">
    <foo barid="1" someval="some"/>
    <foo barid="1" someval="other"/>
    <foo barid="2" someval="third"/>
  </foolist>
  <foolist name="secondlist">
  <!-- there might be more foo's here that reference the same
       bars, so foo can't be a child of bar -->
  </foolist>
  <bar id="1" baz="baz" qux="qux"/>
  <bar id="2" bax="baz2" qux="qux2"/>
</root> 
```

说我想得到以下内容：

```
baz-some-qux
baz-other-qux
baz2-third-qux2 
```

（即在引用项的 baz 和 qux 的值之间插入 someval 的值），我该怎么做？如果我想使用 bar 模板，我需要两个不同的模板。我可能在这里遗漏了一些非常基本的东西，所以我提前道歉。

（编辑：扩展示例）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:39:38.643

**一个有效的解决方案，使用 keys**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kFooById" match="foo" use="@barid"/>

 <xsl:template match="bar">
  <xsl:apply-templates select="key('kFooById', @id)" mode="refer">
    <xsl:with-param name="pReferent" select="."/>
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="foo" mode="refer">
  <xsl:param name="pReferent" select="/.."/>

  <xsl:value-of select=
   "concat($pReferent/@baz,'-',@someval,'-',$pReferent/@qux,'&#xA;')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当对提供的 XML 文档应用此转换时**（针对格式正确进行了更正）：

```
<root>
  <foolist name="firstlist">
    <foo barid="1" someval="some"/>
    <foo barid="1" someval="other"/>
    <foo barid="2" someval="third"/>
  </foolist>
  <foolist name="secondlist">
  <!-- there might be more foo's here that reference the same
       bars, so foo can't be a child of bar -->
  </foolist>
  <bar id="1" baz="baz" qux="qux"/>
  <bar id="2" baz="baz2" qux="qux2"/>
</root> 
```

**产生了想要的正确结果：**

```
baz-some-qux
baz-other-qux
baz2-third-qux2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:39:40.727

这应该可以解决问题：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
>
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="foo">
      <xsl:variable name="matchingBar" select="../../bar[@id = current()/@barid]" />
      <xsl:value-of select="concat($matchingBar/@baz, '-', ./@someval, '-', $matchingBar/@qux, '&#xA0;')" />
    </xsl:template>
</xsl:stylesheet> 
```

# android - Ksoap 对象序列化错误..无法序列化：[com.example.inventory.InventoryFilter@4138a178]

> ID：14233045
> 
> 赞同：2
> 
> 时间：2013-01-09T10:23:28.933
> 
> 标签：android, webservice-client, android-ksoap2

是否可以将复杂对象数组发送到服务器，我尝试了 kvmSerializable 接口，在运行时仍然无法序列化错误。logcat中的详细信息和错误如下。

我试图访问的 wsdl 文件的部分如下

```
<xs:complexType name="filterIPResources">
<xs:sequence>
<xs:element minOccurs="0" name="arg0" type="tns:resourcePageDetails"/>
</xs:sequence>
</xs:complexType>
<xs:complexType name="resourcePageDetails">
<xs:complexContent><xs:extension base="tns:pageDetails">
<xs:sequence><xs:element maxOccurs="unbounded" minOccurs="0"   name="inventoryFilterList" nillable="true" type="tns:inventoryFilter"/>
</xs:sequence>
</xs:extension>
</xs:complexContent>
</xs:complexType>
<xs:complexType name="inventoryFilter">
<xs:sequence><xs:element minOccurs="0" name="filterType" type="tns:filterType"/>  
<xs:element maxOccurs="unbounded" minOccurs="0" name="filterValue" nillable="true" type="xs:anyType"/>
</xs:sequence>
</xs:complexType>
<xs:complexType name="filterIPResourcesResponse">
<xs:sequence><xs:element minOccurs="0" name="return" type="tns:pageResult"/>
</xs:sequence>
</xs:complexType>
<xs:complexType name="pageDetails">
<xs:sequence>
<xs:element name="blockSize" type="xs:int"/>
 <xs:element name="currentStartIndex" type="xs:int"/>
</xs:sequence>
</xs:complexType> 
```

logcat中的错误如下

```
01-09 15:19:23.561: E/AndroidRuntime(1945): FATAL EXCEPTION: AsyncTask #2
01-09 15:19:23.561: E/AndroidRuntime(1945): java.lang.RuntimeException: An error  occured while executing doInBackground()
01-09 15:19:23.561: E/AndroidRuntime(1945):     at   android.os.AsyncTask$3.done(AsyncTask.java:278)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at   java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at java.lang.Thread.run(Thread.java:856)
01-09 15:19:23.561: E/AndroidRuntime(1945): Caused by: java.lang.RuntimeException: Cannot serialize: [com.example.inventory.InventoryFilter@4138a178]
01-09 15:19:23.561: E/AndroidRuntime(1945):     at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:687)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at org.ksoap2.serialization.SoapSerializationEnvelope.writeProperty(SoapSerializationEnvelope.java:671)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:640)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:683)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at org.ksoap2.serialization.SoapSerializationEnvelope.writeProperty(SoapSerializationEnvelope.java:671)
 01-09 15:19:23.561: E/AndroidRuntime(1945):    at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:640)
 01-09 15:19:23.561: E/AndroidRuntime(1945):    at  org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:624)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:681)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at org.ksoap2.serialization.SoapSerializationEnvelope.writeBody(SoapSerializationEnvelope.java:597)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at org.ksoap2.SoapEnvelope.write(SoapEnvelope.java:192)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at org.ksoap2.transport.Transport.createRequestData(Transport.java:101)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:114)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:90)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at com.example.inventory.Search$ShowDialogAsyncTask2.doInBackground(Search.java:89)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at com.example.inventory.Search$ShowDialogAsyncTask2.doInBackground(Search.java:1)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
01-09 15:19:23.561: E/AndroidRuntime(1945):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-09 15:19:23.561: E/AndroidRuntime(1945):     ... 5 more 
```

用于消费webservice的Asynctask如下

```
private class ShowDialogAsyncTask2 extends AsyncTask<String, Void, SoapObject> {

@Override
protected SoapObject doInBackground(String... urls) {

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME3);
   inventoryFilters = new ArrayList<InventoryFilter>();
    filter = new InventoryFilter();
    rpd = new ResourcePageDetails();
    Object[] deviceTypes = { DeviceType.HOST };
    filter.setProperty(0, FilterType.DEVICE_TYPE);
    filter.setProperty(1, deviceTypes);

    inventoryFilters.add(0, filter);
    rpd.setProperty(0, 1);
    rpd.setProperty(1, 15);
    rpd.setProperty(2, inventoryFilters);

    request.addProperty("arg0",rpd);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.addMapping(NAMESPACE, "resourcePageDetails", ResourcePageDetails.class);
    envelope.addMapping(NAMESPACE, "InventoryFilter", InventoryFilter.class);
    envelope.addMapping(NAMESPACE, "Devicetype.HOST", DeviceType.class);
    envelope.addMapping(NAMESPACE, "FilterType.DEVICE_TYPE", FilterType.class);
    envelope.setOutputSoapObject(request);

    androidTransport = new HttpTransportSE(URL1);
     androidTransport.debug = true;

    try {
    androidTransport.call(SOAP_ACTION3, envelope);
    } catch (XmlPullParserException e) {
    // TODO Auto-generated catch block
    Log.d("xml", e.toString());
    e.printStackTrace();
    } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }
    Log.d("MyAPP", "----------------- " + androidTransport.requestDump + "\n\n"
        + androidTransport.responseDump);

    return soap;
}

@Override
protected void onPostExecute(SoapObject resultt) {
    super.onPostExecute(resultt);

}
} 
```

在过去的 3 天里，我一直在尝试解决这个问题……但根本没有成功。如果有人知道如何解决这个问题，请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T19:50:52.953

您有 2 个对象： **filter = new InventoryFilter();** 和**rpd = new ResourcePageDetails();** ，则需要从 ksoap 实现 KvmSerializable 接口。您可以使用以下文章为您提供帮助： [java.lang.RuntimeException：无法序列化：MyClass](https://stackoverflow.com/questions/17148600/java-lang-runtimeexception-cannot-serialize-myclass) 和 [http://www.sgoliver.net/blog/?p=2594](http://www.sgoliver.net/blog/?p=2594)

# c# - DataContext的连接字符串没有被修改

> ID：14233051
> 
> 赞同：0
> 
> 时间：2013-01-09T10:23:51.907
> 
> 标签：c#, entity-framework

我有数据上下文

```
public class KOATUUContext : DbContext
{
    static KOATUUContext()
    {
        Database.SetInitializer<KOATUUContext>(null);
    }

    public KOATUUContext()
        : base("KOATUU")
    {
    }

    public DbSet<KOATUU> KOATUUs { get; set; }
    public DbSet<Region> Regions { get; set; }
    public DbSet<TerType> TerTypes { get; set; }
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new KOATUUMap());
        modelBuilder.Configurations.Add(new RegionMap());
        modelBuilder.Configurations.Add(new TerTypeMap());
        base.OnModelCreating(modelBuilder);

    }
} 
```

我希望我的上下文加载正确的连接字符串，所以我在 root web.config 中指定了以下内容

```
<?xml version="1.0"?>
<configuration>

<connectionStrings>
<add name="RealEstateAgency"
         connectionString="data source=DIMIAS-PC\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
<add name="KOATUU" connectionString="Data Source=streamer2005\tc;Initial Catalog=KOATUU;Persist Security Info=True;User ID=*****;Password=*****;MultipleActiveResultSets=True"
        providerName="System.Data.SqlClient" /> 
```

你能告诉我可能是什么问题吗？执行结果 - SQL Express 的默认连接字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:35:20.350

我只首先使用了数据库，并且在生成 DbContext 时未指定连接名称，如下所示：

```
 public KOATUUContext()
            : base("KOATUU")
        {
        } 
```

但像这样：

```
 public KOATUUContext()
            : base("name=KOATUU")
        {
        } 
```

也许这就是问题所在。

# shell - 如何从另一个 shell 脚本调用 shell 脚本？

> ID：14233060
> 
> 赞同：0
> 
> 时间：2013-01-09T10:24:20.097
> 
> 标签：shell

我已经编写了 2 个脚本来打开 2 个主机的 vncviewer。我还有另外 1 个脚本调用了这两个脚本。但是当我调用主脚本时，第一个 vncviewer 打开，关闭窗口后，第二个 vncviewer 正在打开..但是我想同时运行这两个脚本..如何做到这一点？

以下是涉及的脚本：

22.sh

```
#!/bin/sh 
# 
host='192.168.2.22' 
vncviewer $host --viewonly 
```

25.sh

```
#!/bin/sh 
# 
host='192.168.2.25' 
vncviewer $host --viewonly 
```

调用 2 个脚本的主脚本

```
#!/bin/sh 
# 
./22.sh 
./25.sh 
sh -x 22.sh & 
sh -x 25.sh & 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T10:25:39.903

您需要在第一次调用`vncviewer`. `&`在此命令之后使用。

# asp.net - AJAX HoverMenuExtender 在页面加载时展开/显示

> ID：14233061
> 
> 赞同：1
> 
> 时间：2013-01-09T10:24:22.487
> 
> 标签：asp.net

有人帮我解决这个问题吗？我使用 AJAX hovermenu 扩展器在链接按钮悬停时显示一个网格。但是，当页面第一次加载或回发时，该网格正在显示。

下面是代码：

```
<asp:LinkButton ID="lnkItm" runat="server" Text="Click"></asp:LinkButton>
<AjaxToolKit:HoverMenuExtender ID="hme2" runat="Server" TargetControlID="lnkItm"
PopupControlID="PopupMenu" HoverCssClass="popupHover" PopupPosition="Right" OffsetX="0"
OffsetY="0" PopDelay="50" />
<asp:Panel CssClass="PopupMenu" ID="PopupMenu" runat="server">
<asp:GridView ID="grd" runat="server" Width="100px" AutoGenerateColumns="False">
<Columns>
...
</Columns>
</asp:GridView>
</asp:Panel> 
```

请让我知道如何解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:35:08.150

添加这个。它将在页面加载时隐藏弹出窗口。

```
<style type="text/css">

    .PopupMenu

    {
        display: none;
    }
</style> 
```

# android - Imagebutton 以编程方式更改？

> ID：14233062
> 
> 赞同：66
> 
> 时间：2013-01-09T10:24:23.187
> 
> 标签：android, imagebutton

我正在尝试以编程方式更改 ImageButton 的图像。

我正在尝试复制此代码，但 setBackgroundDrawable 已被弃用。

```
public void giveClue(View view) {
    Drawable replacer = getResources().getDrawable(R.drawable.icon2);
    ((ImageButton) view).setEnabled(false);
    ((ImageButton) view).setBackgroundDrawable(replacer);
    gameAdapter.giveClue(game);
} 
```

我的按钮是使用 xml 创建的，如下所示：

```
 <ImageButton
        android:id="@+id/ImageButton2"
        android:layout_width="24dp"
        android:layout_height="22dp"
        android:layout_alignTop="@+id/imageButton1"
        android:layout_toLeftOf="@+id/ImageButton3"
        android:src="@drawable/icon" 
        android:onClick="giveClue"/> 
```

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-01-09T10:41:11.463

您的代码正在尝试更改按钮的背景。不是它的形象。这是两个不同的东西

```
 ((ImageButton) view).setImageResource(R.drawable.icon2); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-09T10:46:27.463

试试这个对我有用，以编程方式更改背景图像，

```
 image.setBackgroundResource(R.drawable.ico); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-08T01:08:03.587

您好，您可以使用以下代码

```
if ( Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN ) 
{
    ((ImageButton) view).setImageResource(getResources().getIdentifier("icon2", "drawable", getPackageName()));
}
else 
{
    ((ImageButton) view).setImageDrawable(getDrawable(getResources().getIdentifier("icon2", "drawable", getPackageName())));
} 
```

希望这会帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T10:27:14.580

试试这种方式：

> ((ImageButton) 视图).setImageDrawable(replacer);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-20T10:20:28.730

使用 Kotlin，您可以这样做：

```
val myImageButton = ImageButton(context).apply({
    background = null
    setImageDrawable(ContextCompat.getDrawable(context, 
                         R.drawable.ic_save_black_24px))
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-16T15:01:30.843

对于科特林，这对我有用

```
yourimagebuttonID.setImageResource(R.drawable.ic_check_black_24dp) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-24T13:51:11.263

在 Kotlin 中，您可以使用以下代码：

```
val myImageButton = findViewById<ImageButton>(R.id.myImageButton)  

myImageButton.setOnClickListener {

     (myImageButton as ImageButton).setImageResource(R.drawable.myIcon) 

} 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2013-01-09T10:26:56.590

尝试`((ImageButton) view).setImageDrawable(replacer);`

# c++ - 删除 std::string 中的空格

> ID：14233065
> 
> 赞同：22
> 
> 时间：2013-01-09T10:24:29.307
> 
> 标签：c++, string, c++11, removing-whitespace

在 C++ 中，有什么简单的方法可以转：

这个 std::string

```
\t\tHELLO WORLD\r\nHELLO\t\nWORLD     \t 
```

进入：

```
HELLOWORLDHELLOWORLD 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-09T10:26:57.980

[`std::remove_if`](http://en.cppreference.com/w/cpp/algorithm/remove)和的简单组合[`std::string::erase`](http://en.cppreference.com/w/cpp/string/basic_string/erase)。

不完全安全的版本

```
s.erase( std::remove_if( s.begin(), s.end(), ::isspace ), s.end() ); 
```

为了更安全的版本替换`::isspace`为

```
std::bind( std::isspace<char>, _1, std::locale::classic() ) 
```

（包括所有相关的标题）

对于与替代字符类型一起使用的版本，请替换`<char>`为`<ElementType>`或任何您的模板字符类型。当然，您也可以将语言环境替换为不同的语言环境。如果您这样做，请注意避免多次重新创建语言环境方面的低效率。

在 C++11 中，您可以使用以下命令将更安全的版本制作成 lambda：

```
[]( char ch ) { return std::isspace<char>( ch, std::locale::classic() ); } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-09T10:34:03.840

如果 C++03

```
struct RemoveDelimiter
{
  bool operator()(char c)
  {
    return (c =='\r' || c =='\t' || c == ' ' || c == '\n');
  }
};

std::string s("\t\tHELLO WORLD\r\nHELLO\t\nWORLD     \t");
s.erase( std::remove_if( s.begin(), s.end(), RemoveDelimiter()), s.end()); 
```

或者使用 C++11 lambda

```
s.erase(std::remove_if( s.begin(), s.end(), 
     [](char c){ return (c =='\r' || c =='\t' || c == ' ' || c == '\n');}), s.end() ); 
```

PS。使用[擦除删除习语](http://en.wikipedia.org/wiki/Erase-remove_idiom)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-10T23:11:33.413

c++11

```
std::string input = "\t\tHELLO WORLD\r\nHELLO\t\nWORLD     \t";

auto rs = std::regex_replace(input,std::regex("\\s+"), "");

std::cout << rs << std::endl; 
```

> /tmp ❮❮❮ ./播放

```
HELLOWORLDHELLOWORLD 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-10T20:06:30.960

在 C++11 中，您可以使用 lambda 而不是 std::bind：

```
str.erase(
    std::remove_if(str.begin(), str.end(), 
        [](char c) -> bool
        { 
            return std::isspace<char>(c, std::locale::classic()); 
        }), 
    str.end()); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-09T10:32:37.497

你可以使用[Boost.Algorithm](http://www.boost.org/doc/libs/1_34_0/doc/html/boost/algorithm/erase_all.html)的`erase_all`

```
#include <boost/algorithm/string/erase.hpp>
#include <iostream>
#include <string>

int main()
{
    std::string s = "Hello World!";
    // or the more expensive one-liner in case your string is const
    // std::cout << boost::algorithm::erase_all_copy(s, " ") << "\n";
    boost::algorithm::erase_all(s, " "); 
    std::cout << s << "\n";
} 
```

注意：正如评论中提到的：（`trim_copy`或其表亲`trim_copy_left`和`trim_copy_right`）仅从字符串的开头和结尾删除空格。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-09T10:36:02.790

逐个字符地遍历它并使用[`string::erase()`](http://www.cplusplus.com/reference/string/string/erase/)应该可以正常工作。

```
void removeWhitespace(std::string& str) {
    for (size_t i = 0; i < str.length(); i++) {
        if (str[i] == ' ' || str[i] == '\n' || str[i] == '\t') {
            str.erase(i, 1);
            i--;
        }
    }
} 
```

# android - 当我关闭应用程序时，android服务停止并再次创建

> ID：14233068
> 
> 赞同：1
> 
> 时间：2013-01-09T10:24:34.397
> 
> 标签：android, service, oncreate

我正在开发一个应用程序，我在其中实现了服务。但是当我退出我的应用程序时，服务停止（但从`onDestroy()`未被调用）然后再次启动（`OnCreate()`被调用）。

实际上，无论应用程序的状态如何，我都不想在创建服务后停止服务。随着服务`onCreate()`再次被调用，服务丢失了先前处理的数据。我试过`START_STICKY`但没有运气。

那么，我怎样才能保持我的服务运行？

这是我的服务代码，

```
public class ddservice extends Service{

public void onCreate() {
    super.onCreate();
    Log.e("dservice", "onCreate");
                  /*here i am processing some important data in
                background thread*/  
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.e("ddservice", "onDestroy");

    }

    @Override
    public void onStart(Intent intent, int startid) {
        super.onStart(intent, startid);
        Log.e("ddservice", "onStart");

    }

    public int onStartCommand(Intent intent, int flags, int startId) {
        super.onStartCommand(intent, flags, startId);
        Log.e("ddservice", "onStartCommand");

        return START_STICKY;
    }   

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }   

}//service class ends here 
```

我从 mainActivity 开始这项服务，

```
startService(new Intent(this, ddservice.class)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:29:11.603

您应该将服务作为前台启动`Service.startForeground(int, Notification)`

# performance - 优化在 PostgreSQL 中排除特定用户的触发器

> ID：14233074
> 
> 赞同：0
> 
> 时间：2013-01-09T10:24:53.140
> 
> 标签：performance, postgresql, triggers

我想改进当特定用户进行修改时禁用 PostgreSQL 中的触发器的方式。

例如：触发器应该忽略“应用”用户所做的更改，并从任何其他用户的每次修改开始。

我目前正在使用以下代码：

```
IF (CURRENT_USER = 'app') THEN 
    RETURN NULL; 
END IF; 
```

如：

```
CREATE OR REPLACE FUNCTION update_flag() RETURNS trigger AS $BODY$
BEGIN
    IF (CURRENT_USER = 'app') THEN 
        RETURN NULL; 
    END IF;

    IF (TG_OP = 'INSERT') THEN
        ...
    ELSIF (TG_OP = 'UPDATE') THEN
        ...
    ELSIF (TG_OP = 'DELETE') THEN
        ...
    END IF;

    RETURN NULL;

END;$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER trigger_categories AFTER INSERT OR UPDATE OR DELETE
    ON "categories"
    FOR EACH ROW
    EXECUTE PROCEDURE update_flag(); 
```

您认为这里有改进的空间吗？`CREATE TRIGGER`我想在调用之前将条件嵌入到零件中`update_flag()`，但我不知道如何。会有什么不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:29:16.143

正如 a_horse_with_no_name 所指出的，在较新的版本中，触发器可以根据文档使用to[子句](http://www.postgresql.org/docs/current/static/sql-createtrigger.html)`WHEN`以表达式为条件。`CREATE TRIGGER`[`CREATE TRIGGER`](http://www.postgresql.org/docs/current/static/sql-createtrigger.html)

这在 8.4 中不可用，因此您已经在使用最佳可用选项，`current_user`在触发器内部进行测试并返回。

（请注意，`current_user`它受 影响`SECURITY DEFINER`。您可能更喜欢使用它`session_user`。）

通常，运行立即退出的触发器对性能的影响相当小，尤其是与索引和表插入/更新的成本相比。我不会太担心；可能有较低的悬挂性能水果。

# android - 如何拉伸图标以填充Android标签栏中的按钮？

> ID：14233077
> 
> 赞同：0
> 
> 时间：2013-01-09T10:25:12.570
> 
> 标签：android, tabs

当我使用标签栏时，我将图像添加为标签上的图标。但它是如此之小。我希望它伸展以填充整个按钮。有没有办法做到这一点？这是我的应用程序的快照：我的应用程序的 [快照](https://www.dropbox.com/s/4sev2hyv1xo83up/Snapshot_2013-01-09_171805.png)

（对不起，我是新手，所以没有足够的声誉来发布图片，您可以使用此链接！）任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:35:17.450

我建议您好好阅读操作栏设计指南。它显示了要使用的正确图标大小：

[http://developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:39:32.973

使用以下链接并学习有关操作栏 [https://developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html](https://developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html)

# scala - 在 Scala 中将 TXT 文件作为停用词列表传递

> ID：14233080
> 
> 赞同：0
> 
> 时间：2013-01-09T10:25:23.303
> 
> 标签：scala, stop-words

我正在使用斯坦福主题建模工具箱 (TMT) [http://nlp.stanford.edu/software/tmt/tmt-0.4/](http://nlp.stanford.edu/software/tmt/tmt-0.4/)，我想准备我的文本数据集。我有一个停用词的 txt 文件。

然而，

```
TermStopListFilter() 
```

从我的 CSV 数据集中过滤掉停用词，只接受脚本中的列表，例如：

```
TermStopListFilter(List("positively","scrumptious")) 
```

如何导入我的 stopwords.txt 文件并将其用作我的停用词列表？

我使用的代码的完整片段：

```
val source = CSVFile("filtered.csv"); 

val text = {
  source ~>                              
  Column(1) ~>                           
  TokenizeWith(tokenizer) ~>             
  TermCounter() ~>                       
  TermMinimumDocumentCountFilter(100) ~>   
  TermStopListFilter(TXTFile("stopwords.txt"))  
  TermDynamicStopListFilter(10) ~>       
  DocumentMinimumLengthFilter(5)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:36:14.390

好吧，如果你的停用词是“，”分隔，你可以试试这个：

```
 . 
 .
      TermStopListFilter(Source("stopwords.txt").getLines().map(_.split(",")).toList) 
 .
 . 
```

如果您在 stopwords.txt 中的停用词由其他字符分隔， `split(",")`请相应地更改它，并且很可能您应该删除以下行：`TermStopListFilter(List("positively","scrumptious"))`

# jquery - jquery mouseleave：输入提示时不触发

> ID：14233081
> 
> 赞同：2
> 
> 时间：2013-01-09T10:25:23.097
> 
> 标签：jquery, mouseleave, tipsy

你好，我的开发人员，

我在完善我的 UI 时遇到了一些麻烦。

我制作了一个弹出面板，当我将鼠标悬停在按钮/链接上时会打开。

无论我离开那个按钮/链接还是离开面板本身，这个面板都应该关闭。很直接。

[HERE](http://jsfiddle.net/hk5ka/5/) (jsFiddle) 我做了一个简单的演示，效果和预期的一样好。

我的 JS 代码：

```
$('[data-tip]').tipsy({fade: true, gravity: 's'});

$('#btn').mouseenter(function(e){
  $('#panel').show();
}).mouseleave(function(e){
  var $panel = $('#panel')[0];  
  var $out_el = $(e.relatedTarget)[0];

  if($out_el != $panel){
    $('#panel').hide();
  }
});

$('#panel').mouseleave(function(e){
  var $btn = $('#btn')[0];  
  var $out_el = $(e.relatedTarget)[0];
  var $tipsy = $('.tipsy')[0];

  if($out_el != $btn && $out_el != $tipsy){
    $('#panel').hide();
  }
}); 
```

和 HTML 标记

```
<a href="#" id="btn">BUTTON</a>

<div id="panel">
  <a href="#" title="1" data-tip="test 1">Test anchor 1</a>
  <a href="#" title="2" data-tip="test 2">Test anchor 2</a>
</div> 
```

问题是提示。（确切地说是 jquery Tipsy 插件）。在我提供的示例中，我在弹出的面板中放置了 2 个链接。两者都有醉意。所以在悬停时会显示一个提示。一切安好。

问题是，如果我触摸尖端，面板就会关闭。我不想要那个。所以我对我的 onmouseleave 事件添加了另一个检查...以检查“离开元素”是否醉了...

但问题（我猜）是醉酒在我的活动之前被破坏，所以我无法检查“离开元素”是否醉酒。（对于 $('.tipsy') 我变空了，当然 $('.tipsy')[0] 是未定义的。

请指教！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:49:59.277

请参阅此演示： http: [//jsfiddle.net/hk5ka/8/](http://jsfiddle.net/hk5ka/8/)或包含在 JS 窗格中的相同代码（对于 IE）[http://jsfiddle.net/hk5ka/9/](http://jsfiddle.net/hk5ka/9/)

这是鼠标离开的更新条件：

```
$('#panel').mouseleave(function(e){
  var $btn = $('#btn')[0];  
  var $out_el = $(e.relatedTarget)[0];  

  if($out_el != $btn && (!$(e.toElement).hasClass("tipsy") && $(e.toElement).closest(".tipsy").length == 0)){
    $('#panel').hide();
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T10:51:04.463

[工作演示](http://jsfiddle.net/hk5ka/10/)

你的 mouseleave 的条件是让它隐藏起来。试试这个。

```
$('#panel').mouseleave(function(e){
  if (e.target==this) $(this).hide();
}); 
```

# ios - 当我拖动它时，如何停止 Interface Builder 在 UIView 中嵌入控件？

> ID：14233084
> 
> 赞同：6
> 
> 时间：2013-01-09T10:25:29.823
> 
> 标签：ios, xcode, interface-builder

当我在 Interface Builder 中移动控件并传递 UIView 时。无论如何阻止 IB 将控件嵌入 UIView 并使其成为树层次结构中 UIView 的子级。

```
BEFORE
+UIView
+UIButton
+UIView 
```

如果我用鼠标移动 UIButton 并将其放在 UIView IB 上方，它将使其成为 UIView 的子项

```
AFTER
+UIView
  +UIButton
+UIView 
```

无论如何要锁定底部视图。我经常将它们用作背景并为它们着色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-14T11:04:08.570

`Cmd`您可以在不嵌入的情况下重新定位，方法是在拖动元素时按住不放。

编辑：这仅被确认适用于 Xcode 7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:36:45.007

我放弃并决定所有控件组都应该有一个父 UIView。可以不可见（clearColor的backgroundColor）

选择所有控件，然后选择编辑器菜单 > 嵌入视图。

之后，我们可以在它们自己的分组视图中安全地移动它们，而无需它们在层次结构中跳转。

Embed in View 的一个问题是当您使用标记和 viewWithTag 时：

如果您使用多个 VC 控制器和标签子视图构建视图，请确保标签 ID 在整个视图层次结构中是唯一的。

这是因为 viewWithTag: 只会返回与 id 匹配的第一个控件，并且似乎在向下移动一个级别以继续搜索之前搜索 ACROSS 视图层次结构。

因此，如果您选择 Editor menu > Embed in View，您将控件在层次结构中向下移动了一个步骤。因此，对 viewWithTag:999 的调用之前可能已经获取了您的控件，但现在可能会返回一个完全不同的控件。

它也可能崩溃！将结果从 UIView 转换为控件是很常见的，例如 UIImageView 然后调用控件上的方法。如果 viewWithTag 找到与预期不同的控件，它甚至可能不是 UIImageView，因此调用缺少的方法会引发异常。

基本上从不使用标签，因为您必须在 XIB 和代码中进行调试，并且不检查重复的 id。从 XIB 拖到 .h 并改为创建网点。

# java - Java 正则表达式抛出错误

> ID：14233085
> 
> 赞同：2
> 
> 时间：2013-01-09T10:25:38.550
> 
> 标签：java, regex, perl

我正在尝试从文本中捕获某个数字块。假设**凯恩的文字是 12345 英尺高**。我想捕捉`12345`。我正在尝试使用这个：

```
import java.util.regex.Pattern; 
import java.util.regex.Matcher; 
String text = "Kane is 12345 feet high";
Pattern p = Pattern.compile("Kane is (\\d+) feet high");
Matcher m = p.matcher(text);
String s0 = m.group(0); 
```

但是我收到一个`Match not found`错误。我在这里做错了什么？我的意思是，在 Perl 中，这完美地打印出来`12345`：

```
$foo = "Kane is 12345 feet high";
$foo =~ /Kane is (\d+) feet high/;
print $1; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T10:26:59.797

仅实例化`Matcher`是不够的：您必须调用`m.matches()`，标准做法是将其放入 if 中：

```
if (m.matches()) s0 = m.group(1); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T10:26:32.637

你必须在调用 Matcher.group() 之前调用 Matcher.find()

```
String text = "Kane is 12345 feet high";
Pattern p = Pattern.compile("Kane is (\\d+) feet high");
Matcher m = p.matcher(text);
if(m.find()){
String s0 = m.group(0);

} 
```

> 假设文字是凯恩是 12345 英尺高。我要抓12345

我认为，您的正则表达式应该如下所示，以便仅捕获文本中的数字。

```
 Pattern p = Pattern.compile("\\d+"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T10:38:01.250

尝试这个：

```
public static String stripNonDigits(final String input){
  final StringBuilder sb = new StringBuilder();
  for(int i = 0; i < input.length(); i++){
    final char c = input.charAt(i);
    if(c > 47 && c < 58){
        sb.append(c);
    }
}
return sb.toString(); 
```

测试代码：

```
public static void main(final String[] args){
final String input = "0-123-abc-456-xyz-789";
final String result = stripNonDigits(input);
System.out.println(result);
 } 
```

输出：

0123456789

可能会有所帮助 谢谢

# javascript - 需要转义的元素的 jquery 选择器

> ID：14233091
> 
> 赞同：1
> 
> 时间：2013-01-09T10:25:58.430
> 
> 标签：javascript, jquery, jquery-selectors, escaping

我有以下由一些我无法更改的 struts 代码生成的元素。

`<input type="hidden" name="versions[0].elements[0].description">`

我通常会使用类似的东西`$('input[name=XXX]');`

但是，由于我的名字有特殊字符，我需要能够逃脱它。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:32:39.240

您只需将 name 变量用引号括起来，如下所示：

```
$('input[name="versions[0].elements[0].description"]'); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/RezXW/)

在这种情况下，您不需要转义属性值在 jQuery 内部被视为字符串文字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:32:19.780

从[jQuery API 文档](http://api.jquery.com/category/selectors/)：

> 要使用任何元字符（例如 !"#$%&'()*+,./:;<=>?@[]^`{|}~ ）作为名称的文字部分，它必须用两个反斜杠转义：\

所以在你的情况下：

```
$('input[name="versions\\[0\\].elements\\[0\\].description"]'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T10:32:07.320

如果输入名称中有模式，则可以使用`^=`选择以某事物开头的名称或`$=`选择结尾或`*=`选择包含某事物的输入。例如：

```
 $('input[name$="description"]') 
```

选择名称以描述结尾的输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T10:33:55.663

想法1：为你的输入元素添加一个css类，例如：

```
<input type="hidden" name="versions[0].elements[0].description" class="version-desc"> 
```

然后，得到它：

```
var $inputs = $("input.version-desc"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T10:34:48.913

在每个特殊字符前使用两个反斜杠。

例如

```
$('input[name=\\XXX\\]') 
```

# javascript - 使用 javascript 的 smarty 下拉菜单

> ID：14233098
> 
> 赞同：0
> 
> 时间：2013-01-09T10:26:15.907
> 
> 标签：javascript, if-statement, smarty

我正在尝试创建一个朋友列表，您可以在其中单击顶部的按钮以获取下拉菜单。

```
 <script>
var dropAll = false;    

function changeAllFriendsDrop()
{
   if (dropAll == false)
       {
               dropAll = true;
        }
        else
            {
                dropAll = false;
            }
}
</script> 
```

我的功能很简单，但是当我尝试调用它时，它似乎不起作用。

```
<li role="heading" data-role="list-divider" style="color:#F25A97">

                    <a >      
                        <button onclick="changeAllFriendsDrop()">All Friends </button>
                    </a>
                        </li>

       {$friend = array("Josh","Phil","Paul","Sean")} 

                {if !empty($friend)}
                    {foreach $friend as $person}
                      <script> if (dropAll == true){ </script>
                        <li data-theme="a" style="color:#F25A97">
                               <a href="">
                            {$person}
                               </a>
                               <a align="left" style="size: 10px">
                               Last Seen: {$lastLocation}
                               </a>
                        </li>
                        <script> } </script>
                    {/foreach}
                {/if} 
```

它似乎没有调用该函数，因此无法检查 if 语句，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:12:48.547

您的回调函数`dropAll`实际上并没有导致页面上的任何更改，它只是设置一个变量。该行`if (dropAll == true)`只会被评估一次，即使那样也不会做任何有用的事情 -`if`像这样的 JavaScript 不会告诉浏览器隐藏内容，这不是它的工作方式。（事实上​​，由于每个`<script>`标签都是单独评估的，您可能会遇到 JavaScript 错误，因为`}`第一个`<script>`标签中没有。）

您需要做的是编写一个 JavaScript 函数来实际切换页面这些部分的可见性。我强烈建议使用[jQuery](http://jquery.com/)之类的 JavaScript 库，而不是在“普通”JavaScript 中执行此操作。

例如，如果你给了你想要切换的每个元素`class="togglableFriendItem"`，你可以像这样使用 jQuery[`.toggle()`](http://api.jquery.com/toggle/)函数：

```
function toggleAllFriendsDrop()
{
    $('.togglableFriendItem').toggle();
} 
```

# performance - JMeter - 在 http POST 请求中模拟重音 UTF8 字符

> ID：14233099
> 
> 赞同：1
> 
> 时间：2013-01-09T10:26:27.293
> 
> 标签：performance, post, utf-8, request, jmeter

我正在使用 Apache JMeter 2.8 对一个基于 Web 的信息系统进行一些性能测试。

在不同的请求中使用了几个重音字母 - 例如“ä”、“ö”、“ü”或“õ”。

在运行测试脚本和执行请求时，例如某些参数中的“ä”值会变成“Ã¤”。（'Ã¤' - 这是 jmeter 将此类字符保存到 *.jmx 文件中的方式）这些 http 请求的内容编码设置为 UTF-8。当我查看项目的内容时，所有字符都正确显示。当我运行测试脚本时，使用了错误的值。

稍后添加：我可以使用 utf8 字符成功模拟 GET 请求，但我的 POST 请求中的重音字符仍然看起来像“Ã¤”。可能是什么原因，为什么 jmeter 的 GET 请求的数据具有正确的 utf8 编码和 POST Windows-1252/ISO-8859-1/cp1252/"ANSI" 代替？

任何想法为什么会发生这种情况？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T11:41:47.533

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T14:04:52.123

JMeter saves character correctly in JMX, ensure that you opened them with the right encoding (UTF-8).

In JMeter there is this property:

*   sampleresult.default.encoding=ISO-8859-1

which you can change if this is not the default encoding. But I am not sure it's the issue you are facing.

Check the "Encode?"

Solution is:

*   set content encoding to UTF-8

*   Check **Encode?** in parameters table as your parameters are non ascii ones

if this does not work, it reveals an issue on tested application:

```
request.setCharacterEncoding("UTF-8") must be called before using parameters if it's a Java Application. 
```

Same concepts exist for PHP and ASP.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T09:53:20.443

The thing got fixed by switching HTTP request implementation field from HttpClient4 to HttpClient3.1 + leaving HTTP Request Content encoding value empty :)

There might be some JMeter bug regarding using HttpClient4.

# javascript - Javascript 中的 For 循环优化

> ID：14233101
> 
> 赞同：3
> 
> 时间：2013-01-09T10:26:29.377
> 
> 标签：javascript, performance, memory, optimization, for-loop

所以我一直在学习使用 C+ 来教授编程概念的计算机科学课程。今天我学到了一个我不确定是否适用于 JS 的新概念，其中每次计算 string.length 都会消耗系统资源。这似乎是一件小事，但它让我想到了巨大的阵列以及如何将它们加起来。看看这个例子，让我知道循环 #2 是否确实比第一个更有效，谢谢：

```
var weekDay = ["Monday", "Tuesday", "Wednesday"];

//for loop #1
for(i=0; i<weekDay.length; i++){
 //code code code
;}

//for loop #2
for(i=0; var n=weekDay.length; i<n; i++){
 //code code code
;} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T10:29:03.787

第二种方法更快，但不是很多。此外，还有一个小的语法错误

```
for( var i = 0, n = weekDay.length; i < n; i++ ){ ... } 
```

这在 javascript 代码中很常见。请注意声明所有变量的重要性，`var`以免它们踩到错误的范围。

你可以在这里看到这个 js 性能测试：http: [//jsperf.com/forloopiterator](http://jsperf.com/forloopiterator)，它显示使用第二种方法时结果快了 24%。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T10:34:54.860

首先，[**过早优化是万恶之源**](http://c2.com/cgi/wiki?PrematureOptimization)。

第二; 你完全正确，循环＃2更有效。

循环#1 会`weekDay`为循环的*每次*迭代计算长度。这意味着它将在 10,000 长度的数组中计算长度 10,000 次。

循环 #2 将计算的长度`weekDay`并将变量设置`n`为结果，因此我们将长度保存在变量中，而不是为每次迭代重新计算它。

[**阅读更多关于为什么过早优化不好的信息**](https://softwareengineering.stackexchange.com/questions/80084/is-premature-optimization-really-the-root-of-all-evil)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T00:05:50.560

我总是会明确地预先缓存长度，即

```
var n = weekDay.length;
var i;
for(i=0;i<n; i++){ 
do_something;
} 
```

一种更清晰的方法，因为无论如何所有变量定义都被“提升”到函数的顶部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T10:32:45.577

这个问题已经被问过几次了…… [优化 JavaScript for 循环真的有必要吗？](https://stackoverflow.com/questions/6973942/is-optimizing-javascript-for-loops-really-necessary)

我发现以下链接非常有帮助。基本上它取决于浏览器版本和供应商。

在某些情况下，例如 IE yes #2 更快

[http://jsperf.com/loop-iteration-length-comparison-variations](http://jsperf.com/loop-iteration-length-comparison-variations)

# r - 在 if 条件中应用“>”，向量大于 R 中的长度 1

> ID：14233103
> 
> 赞同：3
> 
> 时间：2013-01-09T10:26:32.403
> 
> 标签：r

我有一个大小为 5 的向量，例如：

```
 a<-c(1,4,6,3,2) 
```

我还有另一个大小为 1 的向量：

```
 b<-9 
```

我想写以下 if 条件：

```
if (a>b) { 1
}
else 0
} 
```

我收到以下警告：

```
 Warning message:
In if (fitness_neighbours > user_fitness) { :
  the condition has length > 1 and only the first element will be used 
```

我真正想做的是检查“a”中的任何元素是否满足条件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T10:30:58.287

使用`any()`和比较：

```
if(any(a > b)) {
  # Executes if any value in a > b.
} else {
  # No a is greater than b.
} 
```

另一种使用方法`pmax()`：

```
if (any(pmax(a, b) == a)) {

} else {

} 
```

这就是说，如果 ( `a`, `b`) 的任何最大值等于 中的值`a`，则`a`必须更大。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T10:29:54.777

只需使用简单的比较：

```
a <- c(1,4,6,3,20)
b <- 9
a > b

[1] FALSE FALSE FALSE FALSE  TRUE 
```

这是因为 R 本质上是一种基于向量的语言。

您可以轻松地将逻辑结果转换为数字：

```
as.numeric(a > b)
[1] 0 0 0 0 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:16:28.870

如果问题是任何值是否满足条件：

```
any(a>b)  # no need for `if` 
```

如果这需要为 1/0，那么这些中的任何一个都可以工作：

```
as.numeric( any(a>b) )
c(0,1)[1+any(a>b)] # because indexing has origin at 1 rather than 0-based indexing 
```

如果目标是选择满意的，请使用逻辑索引

```
a[ a>b ] 
```

如果您想根据逐个元素的决定以“平行”方式选择其他两个向量中的两个元素中的哪一个，那么使用`ifelse`而不是`if (){ }else{ }`

```
ifelse( a>b, 1:5, seq(2,10, by=2) )
# returns 2 4 6 8 10 
```

# javascript - 如何在画布元素上呈现图标字体字形？

> ID：14233106
> 
> 赞同：4
> 
> 时间：2013-01-09T10:26:41.507
> 
> 标签：javascript, canvas

我在一个项目中使用来自[http://icomoon.io/](http://icomoon.io/)的字体，需要将其绘制到带有`fillText`.

```
var charCode = 0xe00e;
context.font = "20px icomoon";
context.fillText(String.fromCharCode(charCode)); 
```

该字体包含在 CSS 中（并且也在本地安装），但不是我想看到的房子的图片，而是呈现“2”。

我能做些什么来调试这个问题？

更清楚一点：我试图通过字符代码而不是简单的字符串来呈现特定的字形。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:38:28.910

试试**[这个](http://jsfiddle.net/wsU3m/)**

```
@font-face {
    font-family: 'KulminoituvaRegular';
    src: url('http://www.miketaylr.com/f/kulminoituva.ttf');
} 
```

```
var ctx = document.getElementById('c').getContext('2d');
ctx.font = '36px KulminoituvaRegular';
ctx.textBaseline = 'top';
ctx.fillStyle = 'black';
ctx.fillText  ('Kulminoituva Regular', 10, 10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-31T00:36:50.230

一种解决方法是只使用 ico moon 提供的 SVG 字体。这就是看起来像这样的行：

```
url('../fonts/icomoon.svg#icomoon') 格式('svg')
```

我相信画布需要 SVG 数据来呈现图标，如果您使用其他各种字体格式（eot、woff、ttf）中的一种，画布不知道如何解释 unicode 转换。

好消息是，所有与 html 画布相同的浏览器都支持 svg。

更新：为了澄清，您的字体嵌入应该在所有其他 src 行之后有 SVG 行，如下所示：

```
@font-face {
font-family: 'icomoon';
src:url('../fonts/icomoon.eot');
src:url('../fonts/icomoon.eot?#iefix') format('embedded-opentype'),
    url('../fonts/icomoon.ttf') format('truetype'),
    url('../fonts/icomoon.woff') format('woff'), 
    url('../fonts/icomoon.svg#icomoon') format('svg');
font-weight: normal;
font-style: normal; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-25T05:36:32.007

尝试在所需的字符代码之前插入 \u，例如如果字符代码是 '0xe00e'，请使用 '\u0xe00e'

```
 context.font = '20px icomoon';
 context.fillText('\u0xe00e', 20, 20); 
```

# sharepoint - 如何动态自动调整共享点模式对话框的大小？

> ID：14233107
> 
> 赞同：4
> 
> 时间：2013-01-09T10:26:43.893
> 
> 标签：sharepoint

我在 sharepoint 中创建了一个 Web 应用程序，它有一个登录链接，单击时会在模式窗口中加载登录 webpart。我没有设置模式弹出选项的高度，但我只设置了它的宽度。

IE 7、8 和 9 根据我的需要加载 web 部件，并在加载时自动调整其高度。但是 Firefox（不在 Chrome 中测试）会加载 webpart，但不会自动调整高度以适应登录 WP。

我尝试使用 SP.UI.ModalDialog.get_childDialog().autoSize() 明确如下

```
ExecuteOrDelayUntilScriptLoaded(function () {
SP.UI.ModalDialog.get_childDialog().autoSize();
}, "sp.ui.dialog.js"); 
```

但这也不适用于 Firefox。当我在登录屏幕上显示错误时，在 IE 中调用 autoSize 效果很好，但在 FF 上它返回的高度小于 20 像素，并且模式弹出窗口似乎有一个宽度，但它的高度小于 20。

我该如何解决这个问题？

请帮忙。

对不起，如果我看起来像个菜鸟。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-11-16T18:44:54.527

我只是想自己解决一个类似的问题。我想覆盖宽度，因为我的内容包含在不受欢迎的行为中。我发现以下允许我在显示对话框后调整宽度。

```
ExecuteOrDelayUntilScriptLoaded(function () {
  var dialog = SP.UI.ModalDialog.get_childDialog();
  dialog.$2_0.autoSizeStartWidth = 1100;
  dialog.autoSize();
}, "sp.ui.dialog.js"); 
```

我刚刚将它作为显示表单部分的一部分添加到脚本编辑器 web 部件中，它就像一个梦一样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:07:11.853

我认为您需要在创建对话框**之前设置属性 autoSize：**

```
var options = SP.UI.$create_DialogOptions();
options.autoSize = true;
...
SP.UI.ModalDialog.showModalDialog(options); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-29T16:00:40.393

我有类似的问题，但由于某种原因 autoSize() 对我不起作用，所以我开始挖掘，并使用 jQuery 编写了在显示模态窗口高度后调整模态窗口高度的解决方法。

```
var dlg = SP.UI.ModalDialog.get_childDialog();
var header = $(dlg.$I_0)
var userRoot = $(dlg.$L_0);
var frameContainer = $(dlg.$1Z_0);

var headerContentHeight = header.height();
var headerMargin = header.cssUnit("margin")[0] * 2;
var headerPadding = header.cssUnit("padding")[0] * 2;
var headerHeight = headerContentHeight + headerMargin + headerPadding;
var frameContainerPadding = Math.ceil(($(dlg.$7_0).height() - userRoot.height() - headerHeight) / 2);

//frame container
$(dlg.$1Z_0).height(height - headerHeight - frameContainerPadding);

//background white space
$(dlg.$4_0).height(height);

//border
$(dlg.$1H_0).height(height);

//root of user html
userRoot.height(height - headerHeight - frameContainerPadding);

//frame
$(dlg.$7_0).height(height);

//center the window
$('.ms-dlgContent').css('top', $(window).scrollTop() + ((($(window).height() - $('.ms-dlgContent').height()) / 2) - 30) + "px"); 
```

请记住，窗口的实际高度大于对话框选项中的高度。此函数将设置对话窗口的实际高度以匹配新高度。

也许这个解决方案可以帮助遇到这个问题的其他人。这都是在修改样式，所以这应该不是问题，但它是一种“黑客”，所以它可能是错误的。

# android - 位置源设置意图仅适用于 < 4.0 的所有设备

> ID：14233109
> 
> 赞同：0
> 
> 时间：2013-01-09T10:26:55.730
> 
> 标签：android, android-intent, android-maps, android-location, android-cursor

嗨，下面是我用于检查 gps 设置的代码，它在所有具有 android 2.3.6 及更低版本的设备上都能完美运行，但不适用于 ICS 和 Jellybean。当我检查设备上是否启用 GPS 设置并启动位置设置意图并启用 GPS 并返回我的应用程序时，当我再次检查 GPS 时它仍然显示禁用并强制关闭应用程序

```
 public GPSTracker(Context context) {
        this.mContext = context;
        getLocation();
    }

        public Location getLocation() {
                try {

                    locationManager = (LocationManager) mContext
                            .getSystemService(LOCATION_SERVICE);

                    // getting GPS status
                    isGPSEnabled = locationManager
                            .isProviderEnabled(LocationManager.GPS_PROVIDER);

                    // getting network status
                    isNetworkEnabled = locationManager
                            .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

                   // if (!isGPSEnabled && !isNetworkEnabled) 
                    if (!isGPSEnabled && !isNetworkEnabled)
                    {
                        // no network provider is enabled
                    } else {
                        this.canGetLocation = true;
                        // First get location from Network Provider
                        if (isNetworkEnabled) {
                            locationManager.requestLocationUpdates(
                                    LocationManager.NETWORK_PROVIDER,
                                    MIN_TIME_BW_UPDATES,
                                    MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                            Log.d("Network", "Network");
                            if (locationManager != null) {
                             location = locationManager

                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 
                                if (location != null) {
                                    latitude = location.getLatitude();
                                    longitude = location.getLongitude();
                                }
                            }
                        }
                        // if GPS Enabled get lat/long using GPS Services
                        if (isGPSEnabled) {
                            if (location == null) {
                                locationManager.requestLocationUpdates(
                                        LocationManager.GPS_PROVIDER,
                                        MIN_TIME_BW_UPDATES,
                                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                                Log.d("GPS Enabled", "GPS Enabled");
                                if (locationManager != null) {
                                    location = locationManager
                                            .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                                    if (location != null) {
                                        latitude = location.getLatitude();
                                        longitude = location.getLongitude();

                                    }
                                }
                            }
                        }
                    }

                } catch (Exception e) {
                    e.printStackTrace();
                }

                return location;
            }

        /**
         * Function to get latitude
         * */
        public double getLatitude(){
            if(location != null){
                latitude = location.getLatitude();
            }

            // return latitude
            return latitude;
        }

        /**
         * Function to get longitude
         * */
        public double getLongitude(){
            if(location != null){
                longitude = location.getLongitude();
            }

            // return longitude
            return longitude;
        }

        public boolean canGetLocation() {
            return this.canGetLocation;
        }

        /**
         * Function to show settings alert dialog
         * */
        public void showSettingsAlert(){
            AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

            // Setting Dialog Title
            alertDialog.setTitle("GPS is settings");

            // Setting Dialog Message
            alertDialog.setMessage("GPS is not enabled. Do you want to go to
                settings menu?");

            // Setting Icon to Dialog
            //alertDialog.setIcon(R.drawable.delete);

            // On pressing Settings button
            alertDialog.setPositiveButton("Settings", new 

                       DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int which) {
                    Intent intent = new 
                            Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    mContext.startActivity(intent);
                }
            });

            // on pressing cancel button
            alertDialog.setNegativeButton("Cancel", new 
             DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                dialog.cancel();
                }
            });

            // Showing Alert Message
            alertDialog.show();
        } 
```

这就是我在 logcat 中得到的

```
 01-09 14:53:14.190: E/StrictMode(555): class com.android.settings.Settings$LocationSettingsActivity; instances=2; limit=1
01-09 14:53:14.190: E/StrictMode(555): android.os.StrictMode$InstanceCountViolation: class com.android.settings.Settings$LocationSettingsActivity; instances=2; limit=1
01-09 14:53:14.190: E/StrictMode(555):  at android.os.StrictMode.setClassInstanceLimit(StrictMode.java:1)
01-09 14:53:14.637: E/StrictMode(555): A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks.
01-09 14:53:14.637: E/StrictMode(555): java.lang.Throwable: Explicit termination method 'close' not called
01-09 14:53:14.637: E/StrictMode(555):  at dalvik.system.CloseGuard.open(CloseGuard.java:184)
01-09 14:53:14.637: E/StrictMode(555):  at android.content.ContentResolver$CursorWrapperInner.<init>(ContentResolver.java:1581)
01-09 14:53:14.637: E/StrictMode(555):  at android.content.ContentResolver.query(ContentResolver.java:320)
01-09 14:53:14.637: E/StrictMode(555):  at com.android.settings.LocationSettings.onStart(LocationSettings.java:62)
01-09 14:53:14.637: E/StrictMode(555):  at android.app.Fragment.performStart(Fragment.java:1493)
01-09 14:53:14.637: E/StrictMode(555):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:829)
01-09 14:53:14.637: E/StrictMode(555):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:998)
01-09 14:53:14.637: E/StrictMode(555):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:981)
01-09 14:53:14.637: E/StrictMode(555):  at android.app.FragmentManagerImpl.dispatchStart(FragmentManager.java:1700)
01-09 14:53:14.637: E/StrictMode(555):  at android.app.Activity.performStart(Activity.java:4481)
01-09 14:53:14.637: E/StrictMode(555):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1928)
01-09 14:53:14.637: E/StrictMode(555):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
01-09 14:53:14.637: E/StrictMode(555):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
01-09 14:53:14.637: E/StrictMode(555):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
01-09 14:53:14.637: E/StrictMode(555):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 14:53:14.637: E/StrictMode(555):  at android.os.Looper.loop(Looper.java:137)
01-09 14:53:14.637: E/StrictMode(555):  at android.app.ActivityThread.main(ActivityThread.java:4340)
01-09 14:53:14.637: E/StrictMode(555):  at java.lang.reflect.Method.invokeNative(Native Method)
01-09 14:53:14.637: E/StrictMode(555):  at java.lang.reflect.Method.invoke(Method.java:511)
01-09 14:53:14.637: E/StrictMode(555):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-09 14:53:14.637: E/StrictMode(555):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-09 14:53:14.637: E/StrictMode(555):  at dalvik.system.NativeStart.main(Native Method)
01-09 14:53:14.647: W/CursorWrapperInner(555): Cursor finalized without prior close()
01-09 14:53:14.677: E/System(555): Uncaught exception thrown by finalizer
01-09 14:53:14.877: E/System(555): java.lang.IllegalStateException: Binder has been finalized!
01-09 14:53:14.877: E/System(555):  at android.os.BinderProxy.transact(Native Method)
01-09 14:53:14.877: E/System(555):  at android.database.BulkCursorProxy.close(BulkCursorNative.java:288)
01-09 14:53:14.877: E/System(555):  at android.database.BulkCursorToCursorAdaptor.close(BulkCursorToCursorAdaptor.java:133)
01-09 14:53:14.877: E/System(555):  at android.database.CursorWrapper.close(CursorWrapper.java:45)
01-09 14:53:14.877: E/System(555):  at android.content.ContentResolver$CursorWrapperInner.close(ContentResolver.java:1586)
01-09 14:53:14.877: E/System(555):  at android.content.ContentQueryMap.close(ContentQueryMap.java:173)
01-09 14:53:14.877: E/System(555):  at android.content.ContentQueryMap.finalize(ContentQueryMap.java:179)
01-09 14:53:14.877: E/System(555):  at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
01-09 14:53:14.877: E/System(555):  at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
01-09 14:53:14.877: E/System(555):  at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:23:28.260

首先确保您没有在错误的设置库中导入。您应该使用`android.provider.Settings`和`android support library`。它正在我的 GS3 上找到，它是 v4.2。

还查看 LogCat，您似乎有两个 LocalSettings 实例正在运行。确保您没有在访问手机设置的同时实例化两个相同的 Activity。严格模式似乎不喜欢您在期望 1 时打开两个实例，因此它会杀死您的程序。我知道这可能无法回答您的问题，但它可能会为您指明正确的方向。

`StrictMode$InstanceCountViolation: class LocationSettingsActivity; instances=2; limit=1`

也可以看看：

[Android 活动生命周期](http://developer.android.com/training/basics/activity-lifecycle/index.html)

[Android 严格模式](http://developer.android.com/reference/android/os/StrictMode.html)

[StrictMode 实例计数违规](https://stackoverflow.com/questions/5956132/android-strictmode-instancecountviolation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:21:49.467

解决了，

我遇到了这个问题，因为我试图在版本 < 2.3.6 的主线程上访问互联网，但更高版本不支持，因为它们在主线程异常上生成网络。为此，始终建议在您的应用程序中使用 Internet 时使用 Asynctask。现在它对我很好。

# c# - 如何将点数组（x，y）传递给 Web 服务？

> ID：14233125
> 
> 赞同：0
> 
> 时间：2013-01-09T10:27:31.433
> 
> 标签：c#, javascript, jquery, web-services

我正在创建一个`Point(x,y)`使用 Javascript 的数组，`MyAreas`其中包含`MyAreas[0].x`和`MyAreas[0].y`. 现在我想将此数组传递给 WebServices。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:49:40.837

如果您使用 AJAX 发布您的项目：

```
$.post("myUrl", {points: MyAreas}, function() {
    // callback
}); 
```

在 C# 中：

```
public void SavePoints(Points[] points) {
    // your implementation
}

public class Point {
    public int x {get;set;}
    public int y {get;set;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:43:57.437

试试看。像这样：

```
var points=[point1, point2,..., pointn];
var postData="";
points.each(function(i,p){
    postData+="&points["+i+"].x="+p.x;
    postData+="&points["+i+"].y="+p.y;
});
// postData="points[0].x=12&points[0].y=2&points[1].x=2.....";

$.ajax({
  url:"web service url...",
  contentType:"application/x-www-form-urlencoded; charset=UTF-8",
  type:"post",
  data:postData
  success:function(){
    //todo
  }
}); 
```

如果你使用asp.net MVC，默认模型binder cab 会解析这样一个postData 字符串。

```
Public ActionResult SavePoints(List<Point> points)
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T10:32:50.673

您是否使用 Ajax 来调用您的 Web 服务？

假设你是，这很容易，就像这样：

```
$.ajax({
        type: "POST",
        url: myUrl,
        data: MyAreas,
        success: function(result){
            // success function here
        }
 }); 
```

# iphone - 如何判断 UserLocation 是否在 MKPolygonview 或 iOS MKMapView 的特定区域内？

> ID：14233143
> 
> 赞同：2
> 
> 时间：2013-01-09T10:28:38.353
> 
> 标签：iphone, ios, objective-c, mkmapview, cllocationmanager

我需要检查当前用户位置是否在特定区域内，这里我使用了一个`MKPolygonView`。我在我添加了一条路线，`MKMapView`我想检查用户是否在该特定路线中。我尝试了以下代码，但它始终显示我在错误的路径中，即使在该区域也是如此。知道我哪里出错了吗？任何帮助将不胜感激。谢谢。

```
 BOOL exist = NO;
    CLLocationCoordinate2D mapCoordinate = newLocation.coordinate;//user location or annot coord
    MKMapPoint mapPoint = MKMapPointForCoordinate(mapCoordinate);
    for(MKPolyline *routeLine in overlays)
    {

        NSLog(@"Overlays array count = %d",overlays.count);
        MKPolygonView *polygonView =(MKPolygonView *)[mapView viewForOverlay:routeLine];
        CGPoint polygonViewPoint = [polygonView pointForMapPoint:mapPoint];
        BOOL mapCoordinateIsInPolygon = CGPathContainsPoint(polygonView.path, NULL, polygonViewPoint, NO);
        NSLog(@"mapcoordinate %c",mapCoordinateIsInPolygon);
        if(mapCoordinateIsInPolygon)
        {
            exist = YES;
        }
        else
        {
            exist = NO;

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T11:41:12.940

您正在将 MKPolygons 与 MKPolylines 混合。一个 MKPolyline 有一个对应的 MKPolylineView - 而不是一个 MKPolygonView - 即你的演员是无效的。您应该能够通过在您的 polygonView 上使用 isKindOfClass 来验证它是什么类型。

据我所知，MKPolyline 不是封闭路径，它不能包含任何内容。有几个选项，但我认为在你的情况下最简单的一个是从 MKPolyline 中的点创建你自己的封闭 CGPath 并对其进行测试。

# jquery - jQueryMobile 向前导航有效，但向后导航无效

> ID：14233145
> 
> 赞同：0
> 
> 时间：2013-01-09T10:28:38.493
> 
> 标签：jquery, ajax, mobile, navigation

我有以下 javascript 代码：

```
 var baseName;

$('#fleetList').live('pagebeforeshow',function(event){
    $('#fleet').children().remove('li');

    $.getJSON('ajax/api.php', { "request" : "listFleet", "hash" : baseAuth, "stuId" : $.urlParam('stuId') }, function (data) {
            if (data.fleet.length>0) {
                $('#fleetBaseName').html(baseName + ' ' + data.baseLocation);
                $.each(data.fleet, function(i,item) {
                    $("#fleet").append('*   ' + item.typ + '');
                });
                $('#fleet').listview('refresh');
            } else {
                alert("Sorry, you have no Fleet listed in that base.");
                $.mobile.changePage("baseList.php");
            }
    });
}); 
```

该代码有效，当我很好地打开来自“baseList.php”的“fleetList.php”时。然后用 baseName + data.baseLocation 填充 id="fleetBaseName" 的 h3-tag。

当我继续“bookingList.php”并返回“fleetList.php”时，只显示车队，但带有“fleetBaseName”的标题消失了。我没有删除它，并且 id="fleetBaseName" 的 h3 标记仍在 DOM 中。但它已经不可见了。

它有什么问题？

PS：我使用的是jqm 1.2.0

# litespeed - 406错误不可接受，图像选择时openwysiwyg_v1.4.7

> ID：14233146
> 
> 赞同：0
> 
> 时间：2013-01-09T10:28:37.937
> 
> 标签：litespeed

我已经使用 openwysiwyg v1.4.7 作为我的动态网站来拥有我们所见即所得的内容。好吧，我没有使用任何开源 CMS 或任何工具来制作网站。我正在用核心 php 构建自己的网站。

一切都在离线时工作正常（openwysiwyg_v1.4.7 编辑器图像选择），除了之前上传的 WYSIWYG 图像选择部分或可以上传以供选择外，一切都在网上正常工作。

它给出了这个错误：

> 406 不可接受 此请求不可接受 由 LiteSpeed Web 服务器提供支持 LiteSpeed Technologies 不对本网站的管理和内容负责！

我尝试浏览了许多论坛，发现我们需要使用 .htaccess 文件：

```
<IfModule mod_security.c>
SecFilterEngine Off
SecFilterScanPOST Off
</IfModule> 
```

但这并没有解决我的问题。

究竟是什么导致了这个问题。此问题不允许 openwysiwyg_v1.4.7 编辑器选择图像，openwysiwyg_v1.4.7 编辑器的所有其他部分工作正常。

# java - Java：带有 SimpleCursorAdapter 的 ORMLite：StaleDataException

> ID：14233148
> 
> 赞同：4
> 
> 时间：2013-01-09T10:28:41.087
> 
> 标签：java, simplecursoradapter, ormlite, staledataexception

这是我第一次测试 SimpleCursorAdapter。我想将它与 ORMLite 一起使用。

不幸的是，我总是得到 StaleDataException :(

编辑： **不知道adapter.swapCursor(c) 是否是问题所在。**跨过那个没有问题。问题似乎出在其他地方/END EDIT

该错误似乎发生在 adapter.swapCursor(c) 中。c 已关闭，这似乎是问题所在，我该如何解决这个问题，为什么它到底是关闭的？注意：仅当 Einsatz1 sqllite 表包含数据时才会发生错误。如果桌子是空的，一切都会完美运行。

这是我的活动：

```
public class UebersichtEinsaetze extends FragmentActivity implements LoaderManager.LoaderCallbacks<Cursor>
{
...

  public DatabaseHelper helper = null;

  @Override
  protected void onDestroy()
  {
    super.onDestroy();
    ((SimpleCursorAdapter) einsatzListView.getAdapter()).getCursor().close();
    helper.close();
    if (helper != null)
    {
      OpenHelperManager.releaseHelper();
      helper = null;
    }

  }

  private DatabaseHelper getHelper()
  {
    if (helper == null)
    {
      helper = OpenHelperManager.getHelper(this, DatabaseHelper.class);
    }
    return helper;
  }

  @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_ubersicht_einsaetze);
    einsatzListView = (ListView) findViewById(android.R.id.list);
    einsatzDatumTextView = (TextView) findViewById(R.id.tv_uebersicht_abdatum);
    fillData();
    getHelper();
  }

  private void fillData()
  {
    String[] from = new String[] { "_id" };
    int[] to = new int[] { R.id.view_list_einsatz_text_projnr };

    adapter = new SimpleCursorAdapter(this, R.layout.view_list_eintrag_einsatz, null, from, to, 0);
    getSupportLoaderManager().initLoader(0, null, this);
    einsatzListView.setAdapter(adapter);
  }

  @Override
  public Loader<Cursor> onCreateLoader(int id, Bundle args)
  {
    String[] projection = { "_id" };
    CursorLoader cursorLoader = new CursorLoader(this, test.CONTENT_URI, projection, null, null, null);
    return cursorLoader;
  }

  @Override
  public void onLoadFinished(Loader<Cursor> loader, Cursor c)
  {
    adapter.swapCursor(c);
  }

  @Override
  public void onLoaderReset(Loader<Cursor> loader)
  {
    adapter.swapCursor(null);
  }
} 
```

这是我的内容提供者：

```
 private DatabaseHelper database;
  private RuntimeExceptionDao<Einsatz1, String> dao;

  // Used for the UriMacher
  private static final int EINSAETZE = 10;
  private static final int EINSATZ_ID = 20;

  private static final String AUTHORITY = "de.myapp.android";

  private static String BASE_PATH = "einsaetze";
  public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY + "/" + BASE_PATH);

  public static final String CONTENT_TYPE = ContentResolver.CURSOR_DIR_BASE_TYPE + "/einsaetze";
  public static final String CONTENT_ITEM_TYPE = ContentResolver.CURSOR_ITEM_BASE_TYPE + "/einsatz";

  private static final UriMatcher sURIMatcher = new UriMatcher(UriMatcher.NO_MATCH);
  static
  {
    sURIMatcher.addURI(AUTHORITY, BASE_PATH, EINSAETZE);
    sURIMatcher.addURI(AUTHORITY, BASE_PATH + "/#", EINSATZ_ID);
  }

@Override
  public boolean onCreate()
  {
    database = new DatabaseHelper(getContext());
    this.dao = (RuntimeExceptionDao<Einsatz1, String>) database.getRTE(Einsatz1.class);
    return false;
  }

@Override
  public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder)
  {
    // ignore method parameters for now just to get it basically working

    QueryBuilder<Einsatz1, String> queryBuilder = this.dao.queryBuilder();

    Cursor cursor = null;
    CloseableIterator<Einsatz1> iterator = null;
    try
    {
      iterator = dao.iterator(queryBuilder.prepare());
      AndroidDatabaseResults results = (AndroidDatabaseResults) iterator.getRawResults();
      cursor = results.getRawCursor();
    }
    catch (SQLException e)
    {
      Log.e(getClass().getName(), "get cursor", e);
    }
    finally
    {
      iterator.closeQuietly();
    }

    // Make sure that potential listeners are getting notified
    cursor.setNotificationUri(getContext().getContentResolver(), uri);

    return cursor;
  } 
```

日志猫：

```
01-09 10:01:29.591: E/AndroidRuntime(3767): FATAL EXCEPTION: main
01-09 10:01:29.591: E/AndroidRuntime(3767): android.database.StaleDataException: Attempting to access a closed CursorWindow.Most probable cause: cursor is deactivated prior to calling this method.
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:139)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.database.CursorWrapper.getString(CursorWrapper.java:114)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.support.v4.widget.SimpleCursorAdapter.bindView(SimpleCursorAdapter.java:135)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.support.v4.widget.CursorAdapter.getView(CursorAdapter.java:256)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.widget.AbsListView.obtainView(AbsListView.java:2267)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.widget.ListView.onMeasure(ListView.java:1156)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.View.measure(View.java:15172)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.widget.RelativeLayout.measureChild(RelativeLayout.java:602)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:415)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.View.measure(View.java:15172)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.View.measure(View.java:15172)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.View.measure(View.java:15172)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.View.measure(View.java:15172)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1848)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1100)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1273)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.Choreographer.doFrame(Choreographer.java:525)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.os.Handler.handleCallback(Handler.java:615)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.os.Looper.loop(Looper.java:137)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at java.lang.reflect.Method.invokeNative(Native Method)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at java.lang.reflect.Method.invoke(Method.java:511)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-09 10:01:29.591: E/AndroidRuntime(3767):     at dalvik.system.NativeStart.main(Native Method) 
```

小提示（不重要，但如果有人有信息...）：当我在 adapter.swapCursor(c) 之前设置断点时，它不会在抛出错误之前停止。我必须设置一个断点来在该语句之前插入一个虚拟的“int bla = 123”。类似地，在 public Cursor query(...) 方法中的任何位置设置断点可以使一切执行都没有错误（到底是什么...），但又不会在断点处停止。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:43:53.053

***解决了***

注释掉

```
iterator.closeQuietly(); 
```

即使我找到了来自这里的代码：

[在 CursorAdapter 中使用带有 ORMLite 的 Android 游标](https://stackoverflow.com/questions/7159816/android-cursor-with-ormlite-to-use-in-cursoradapter)

...你不应该依赖它。

我将不得不看看注释掉会有什么潜在的负面后果（如果有人知道请告诉我），但现在一切似乎都在起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-22T12:36:17.083

是的，它看起来是由于 iterator.closeQuietly() 造成的，尽管注释掉的影响是您现在可能会在打开许多迭代器的情况下发生泄漏（实际上应该关闭）。

相反，在您的 onQuery() 方法中，尝试使用以下内容，这将为您提供对 Cursor 的引用，当您的 ContentProvider 关闭时，它应该关闭。

```
Cursor cursor = getHelper().getReadableDatabase().query(tableName, projection, selection, selectionArgs, groupBy, having, sortOrder) 
```

# php - 在 PHP 中上传 Dropbox 文件时通知

> ID：14233149
> 
> 赞同：0
> 
> 时间：2013-01-09T10:28:42.020
> 
> 标签：php, dropbox

我有一个 Dropbox 上传脚本，它工作正常，但是，我需要让邮件收件人知道文件已经/尚未上传到 Dropbox。下面是我正在使用的代码...

```
<?
 if( ($_SESSION['security_code']==$_POST['security_code']) &&   (!empty($_POST['security_code'])) ) { 
 mail("test@email.co.uk","Website Print Shop Enquiry","Form data:

 Contact Name: " . $_POST['field_1'] . " 
 Company (if applicable): " . $_POST['field_2'] . " 
 Address (optional): " . $_POST['field_3'] . " 
 Postcode: " . $_POST['field_4'] . " 
 Phone: " . $_POST['field_5'] . " 
 Email: " . $_POST['field_6'] . " 
 Dropbox File Uploaded?: " . >>RESULT HERE<< . " 
 Details of enquiry: " . $_POST['field_7'] . " ",$headers);

 if ($_POST) {
   require 'DropboxUploader.php';

    try {
      // Rename uploaded file to reflect original name
       if ($_FILES['file']['error'] !== UPLOAD_ERR_OK)
         throw new Exception('File was not successfully uploaded from your computer.');

         $tmpDir = uniqid('/tmp/DropboxUploader-');
       if (!mkdir($tmpDir))
         throw new Exception('Cannot create temporary directory!');

       if ($_FILES['file']['name'] === "")
         throw new Exception('File name not supplied by the browser.');

       $tmpFile = $tmpDir.'/'.str_replace("/\0", '_', $_FILES['file']['name']);
       if (!move_uploaded_file($_FILES['file']['tmp_name'], $tmpFile))
         throw new Exception('Cannot rename uploaded file!');

       // Enter your Dropbox account credentials here
        $uploader = new DropboxUploader('username is here', 'password is here');
        $uploader->upload($tmpFile, $_POST['dest']);

      } catch(Exception $e) {
       }

// Clean up
     if (isset($tmpFile) && file_exists($tmpFile))
         unlink($tmpFile);

     if (isset($tmpDir) && file_exists($tmpDir))
         rmdir($tmpDir);
      }

  include("confirm-print.htm");
 }
else {
  echo "Invalid Captcha String. Please use the back button in your browser and try again, thank you.";
 }

?> 
```

试图找到我需要访问的变量以显示文件是否已上传。相关的 DropboxUploader.php 文件位于[https://github.com/jakajancar/DropboxUploader/blob/master/DropboxUploader.php](https://github.com/jakajancar/DropboxUploader/blob/master/DropboxUploader.php)感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:37:10.643

查看[DropboxUploader.php](https://github.com/jakajancar/DropboxUploader/blob/master/DropboxUploader.php#L92)中的第 92 行如果上传不成功，则会引发异常并显示消息“上传失败！”。

我建议修改此文件并将 Exception 类更改为更具体的内容，例如 DropboxUploadException（当然首先定义此异常子类）。然后像这样修改你的代码：

```
try
{
    // Your old code until "$uploader->upload($tmpFile, $_POST['dest']);"
    try
    {
        $uploader->upload($tmpFile, $_POST['dest']);

        $upload_success = true;
    }
    catch(DropboxUploadException $e)
    {
        $upload_success = true;
    }

    // At the very end move your mail() function call and you can use $upload_success
    // variable to display file upload success or failure
}
catch(Exception $e)
{
    // Generic exception handling
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:30:35.147

整理好了！在 PHP 文件的顶部使用了 if 语句...

```
if($_FILES['file']['name']==""){
        $result = "None"; //no file was uploaded
    }
    else
    {
        $result = "Yes";
    } 
```

# javascript - 单击时更改 DIV 高度

> ID：14233151
> 
> 赞同：0
> 
> 时间：2013-01-09T10:28:47.217
> 
> 标签：javascript, jquery

我一直在研究我的页面的功能，易用性是我一直关注的一件事。为了改进我的布局，我决定创建可折叠的部分。但是，我有两个问题。1）我可以将DIV设置为扩大，但不能再次缩小。所以我决定创建一些东西来告诉它是否大于最小尺寸，扩展内容，但是现在它也没有扩展。这是我的代码：

```
$(".contentBox").click(function(){
    var boxHeight = $(this).height();
    var minBoxHeight = 40;

    if (boxHeight < minBoxHeight)(function() {
        $(this).css({
            height: 'auto',
            transition: 'height 800ms, background 800ms, box-shadow 800ms'
        });
    )};
}); 
```

2）因为我正在使用自动高度，这是一种做事方式，所以我牺牲了我的滑动动画，当它展开和折叠时。但是，如果有人知道一种方法来保持高度变化为内容大小以及保持我想要的动画，那就太棒了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T10:57:45.100

你打错了：

```
$(".contentBox").click(function(){
        var boxHeight = $(this).height();
        var minBoxHeight = 40;

        if (boxHeight <= minBoxHeight) {
            $(this).css('height', 'auto');
            var tmp_height = $(this).height();
            $(this).css('height', boxHeight+'px');
            $(this).css({
                height : tmp_height+'px',
                transition: 'height 800ms, background 800ms, box-shadow 800ms'
            });
        } else {
            $(this).css({
                height: '40px',
                transition: 'height 800ms, background 800ms, box-shadow 800ms'
            });
        }
    }); 
```

那会让它膨胀和崩溃

我相信这会解决所有问题。您可以将包含内容的 div 的高度计算为变量。将其重置为原始位置。然后进行过渡。

这是一个jsfiddle。我无法让它与过渡一起使用，但让它与动画一起使用：

[http://jsfiddle.net/uLabL/](http://jsfiddle.net/uLabL/)

# javascript - Javascript中的意外标识符

> ID：14233152
> 
> 赞同：0
> 
> 时间：2013-01-09T10:28:53.347
> 
> 标签：javascript, jquery

我正在动态地将内容添加到列表中，并且我希望能够防止添加重复项。因此，在添加内容之前，我选择了所有列表，创建一个数组并检查我添加的数据是否已包含在列表中。但是，我的代码中出现了意外的标识符。这是我的代码：

```
$(".autocomp_centers").autocomplete({
    var ids = new Array();
    $("#sister-centers-list > li").each(function(index, value){
        ids.push($(value).attr('class'));
        console.log($(value).attr('class'));
    });

    serviceUrl:'/suggest_centers',
        maxHeight:400,
        width:252,
        params: {country: $("#country").val() },
        minChars:2,
        onSelect: function(value, data){
            if ($.inArray(data, ids) == -1){
                alert("Sister center has already been added.");
            }else{
                $("#hidden-ids").append('<input type="hidden" name="center_ids[]" value="' + data +'" class="center-' + data + '"/>');
                $('#sister-centers-list').append('<li class="center-' + data + '">' + value + ' <a href="#sister-center" class="remove-center-before-save" id="' + data + '">Remove</a></li>');
            }               
            $("#sister-search").val("");
        }
}); 
```

当此人开始输入并调用此方法时，我会获取列表值并将它们存储在一个数组中。当他们选择一个值时，我检查该值是否已经在数组中。这是导致错误的行：`var ids = new Array();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:30:39.290

当您打算启动一个函数时，您已经启动了一个对象字面量。

```
{
    var ids = new Array(); 
```

你可能想要：

```
function () {
    var ids = new Array(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:48:59.130

自动完成命令 ( [http://api.jqueryui.com/autocomplete/](http://api.jqueryui.com/autocomplete/) ) 需要一个*对象*作为参数——您不能直接在对象属性之间编写代码。

尝试这样的事情：

```
var ids = new Array();
$("#sister-centers-list > li").each(function(index, value){
    ids.push($(value).attr('class'));
    console.log($(value).attr('class'));
});

$(".autocomp_centers").autocomplete({
    serviceUrl:'/suggest_centers',
    maxHeight:400,
    width:252,
    params: {country: $("#country").val() },
    minChars:2,
    onSelect: function(value, data){
        if ($.inArray(data, ids) == -1){
            alert("Sister center has already been added.");
        }else{
            $("#hidden-ids").append('<input type="hidden" name="center_ids[]" value="' + data +'" class="center-' + data + '"/>');
            $('#sister-centers-list').append('<li class="center-' + data + '">' + value + ' <a href="#sister-center" class="remove-center-before-save" id="' + data + '">Remove</a></li>');
        }               
        $("#sister-search").val("");
    }
}); 
```

当然，根据您的应用程序的功能，您可能需要进行更多更改。例如，如果您在同一页面上有多个“自动完成”内容，您可能希望为每个内容使用单独的 ID 数组。等等。

# iphone - NSDateFormatter stringFromDate, dateFromString 都返回 nil

> ID：14233153
> 
> 赞同：0
> 
> 时间：2013-01-09T10:28:57.123
> 
> 标签：iphone, ios, nsstring, nsdate, nsdateformatter

嗨，我正在尝试格式化我的`NSString`. 但它不起作用。我尝试了在**stackoverflow**中得到的所有答案，但对我没有任何作用。

```
NSLog(@"log 1: %@ %@", [dealDetailsDict objectForKey:@"DealDateViewed"], [[dealDetailsDict objectForKey:@"DealDateViewed"] class]);
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSLog(@"log 2: %@ %@", [df stringFromDate:[dealDetailsDict objectForKey:@"DealDateViewed"]], [df dateFromString:[dealDetailsDict objectForKey:@"DealDateViewed"]]); 
```

我不知道这里有什么问题，无论`stringFromDate`是`dateFromString`返回`nil`。这是我的`NSLog`。

```
log 1: 2013-01-09 10:02:45 +0000 __NSCFString
log 2: (null) (null) 
```

我想显示日期，如`31-12-2010`. 所以我设置，

```
[df setDateFormat:@"dd-MM-yyyy"]; 
```

我的问题从这里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:33:14.120

您已设置日期格式`yyyy-MM-dd HH:mm:ss`，`2013-01-09 10:02:45`但您的日期字符串是`2013-01-09 10:02:45 +0000`

从日期字符串中删除区域`+0000`或在日期格式字符串中包含区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T10:41:52.173

使用这个：

```
[df setDateFormat:@"yyyy-MM-dd HH:mm:ss z"]; 
```

然后再次将您需要的格式设置为：

```
[df setDateFormat:@"yyyy-MM-dd"]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T10:42:08.700

将以下功能用于日期格式...

```
-(NSString*) Dateformate:(NSString*)str
{    
    NSDateFormatter *dfrt =[[NSDateFormatter alloc] init];
    [dfrt setDateFormat:@"yyyy-MM-dd h:mm:ss"];
    NSDate *presentdate = [dfrt dateFromString:str];
    [dfrt setDateFormat:@"MMMM"];
    NSString *fullMonth = [dfrt stringFromDate:presentdate];

    [dfrt setDateFormat:@"yyyy"];
    NSString *yearStr = [dfrt stringFromDate:presentdate];
   // NSLog(@"month %@",presentdate);

    [dfrt setFormatterBehavior:NSDateFormatterBehavior10_4];
    [dfrt setDateFormat:@"d"];
    int date_day = [[dfrt stringFromDate:presentdate] intValue];
    NSString *suffix_string = @"|st|nd|rd|th|th|th|th|th|th|th|th|th|th|th|th|th|th|th|th|th|st|nd|rd|th|th|th|th|th|th|th|st";
    NSArray *suffixes = [suffix_string componentsSeparatedByString: @"|"];
    NSString *suffix = [suffixes objectAtIndex:date_day];

    NSString *fullDateFormat = [NSString stringWithFormat:@"%@ %d%@ %@",fullMonth,date_day,suffix,yearStr];

   // NSLog(@"fullDateFormat %@",fullDateFormat);

    return fullDateFormat;

} 
```

# development-environment - 远程开发环境

> ID：14233155
> 
> 赞同：1
> 
> 时间：2013-01-09T10:29:04.950
> 
> 标签：development-environment

我想做的是从任何有互联网连接的地方开发一个网站。显而易见的答案是注册一个网络主机并选择一个域（例如 project1.shoreline-development.com 或其他）。但是，理想情况下，我不希望其他人能够看到该站点的内容，因为我需要查看错误消息等，因此需要一个身份验证层才能让我查看我的网站，并且其中它可能需要特定于网站软件的自己的身份验证方法。

这样的事情存在吗？

谢谢。

编辑：2013 年 9 月 11 日 11:22

我相信我需要澄清以下几点：我想在任何机器上使用 Web 浏览器和 winscp 或等效工具（最好只是 Web 浏览器）等工具进行开发工作。例如，我希望能够在坐在火车上时使用手机进行开发，或者在我拜访父母时使用我的旧笔记本电脑，或者我从别人那里借来的电脑，或者网吧，或者我的工作电脑. 发布的解决方案适用于 localhost 开发环境（这是可以理解的，因为我之前没有指定这部分）并且只有在我在那台计算机上设置了 apache 服务器后才能工作。

对造成的误解深表歉意，感谢您迄今为止的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:32:21.647

`.htaccess`提供了一种简单的方法来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:38:39.857

这就是您想要的（认为您正在浏览`http://localhost/test-dir1/`并且您希望其他人看不到此页面）

```
.htaccess File Creation: 

$ cd  /var/www/html/test-dir1

$ vi  .htaccess 
```

将以下行写入此文件：

```
AuthName "Authorized Users Only."

AuthType Basic

AuthUserFile /etc/httpd/conf/.htpasswd

require user testusr 
```

你也可以放入`VirtualHost`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T10:39:24.000

我正在使用 apache2 的 http 身份验证和授权，以限制每个 IP 或每个用户/密码的访问：

如果您设置虚拟主机，解决方案将如下所示：

```
<VirtualHost *:80>
    DocumentRoot "/path/to/document/root"
    ServerName subdomain.domain.tld        
    <Directory "/path/to/document/root">
            #Uncomment the following if you want restrict access per IP
            #Order Deny,Allow
            #Deny from all
            #Allow from A.B.C.D
            AuthName "Authorized Personel Only"
            AuthType Basic
            AuthUserFile "/Path/to/your/httpasswd/file"
            require valid-user

            allow from all
            Options +Indexes
    </Directory>
    ErrorLog        /var/log/apache2/domain.error.log
    CustomLog       /var/log/apache2/domain.access.log combined  
</VirtualHost> 
```

# html - 当手风琴关闭和打开时，我必须重新调整 div 的大小

> ID：14233158
> 
> 赞同：0
> 
> 时间：2013-01-09T10:29:17.447
> 
> 标签：html, jquery-ui, jquery

我有一个放置在手风琴下方的 div。当手风琴关闭时，div 的大小应该增加，当手风琴打开时，div 的大小应该减小。请在这个问题上提供帮助....在此先感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:33:03.840

我们可以看到一些代码吗？没有那个很难说..

也许你可以加入手风琴关闭脚本并添加如下内容：

```
document.getElementById("YOUR-DIV").style.height = 100; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:33:44.907

您可以利用手风琴的`activate`活动。创建手风琴时，指定触发激活事件时要执行的函数。在打开面板时执行激活事件。

```
$( ".selector" ).accordion({
   activate: function( event, ui ) {
     //Adjust div size.
   }
}); 
```

# objective-c - 如果查找器打开某个文件夹，如何获得通知

> ID：14233159
> 
> 赞同：0
> 
> 时间：2013-01-09T10:29:18.970
> 
> 标签：objective-c, macos, cocoa, notifications, finder

我正在研究混合“Dropbox”和版本控制的项目。我的应用程序是与服务器通信（检索有关文件更新的信息）并注入 Finder 代码的守护程序（响应注入的代码请求，关于每个文件显示哪种图像）。

我在finder中覆盖了文件图标，所以当用户打开它时，我需要“刷新”某个文件夹中的文件（检查服务器上的更新）。但是我只需要在用户打开某个文件夹时检查服务器更新（用户在 finder 中打开“folder1”，如果“folder1”中的文件有一些更改，我需要检查服务器）。如果用户在 finder 中打开某个文件夹，是否可以收到某种通知？我在 FSEvent 中没有发现任何这种情况（显然，因为文件夹中没有任何变化）。

我的应用程序没有任何 UI，仅在 Finder 中覆盖自定义图标（如 Dropbox）。

# javascript - setInterval 不同间隔之间的性能影响

> ID：14233160
> 
> 赞同：1
> 
> 时间：2013-01-09T10:29:23.580
> 
> 标签：javascript, performance, cpu, setinterval

众所周知，`setInterval`以较高的间隔运行具有更好的性能。

我的问题是好多少？

我的网站上有一个计时器，目前每 15 秒显示一次当前时间，使用`setInterval`. 我想将时间间隔更改为一秒（1000 毫秒）。

*   它将在多大程度上影响我的网站性能？
*   它会干扰我的用户界面吗？
*   这是我什至需要考虑的事情吗？

为简单起见，假设我发送给的函数`setInterval`只有一行：

```
document.getElementById("time").innerText = Date.now(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:34:08.580

对于只做很少工作的大约 1 秒左右的间隔，您不需要太担心。

只有长时间运行的回调会干扰 UI。当您每秒多次运行代码或代码很昂贵（大量计算或大型 DOM 修改）时，性能会受到影响。

如果你想变得非常好，你可以使用[Page Visibility API](https://developer.mozilla.org/en-US/docs/DOM/Using_the_Page_Visibility_API)来禁用页面不活动时的间隔。

# extjs - 将分页工具栏动态添加到网格 Ext-JS 4 时分页不起作用

> ID：14233164
> 
> 赞同：0
> 
> 时间：2013-01-09T10:29:47.270
> 
> 标签：extjs, extjs4

在我的应用程序中，一切都应该是动态的。我正在创建这样的视图：

```
this.store = Ext.create('Test.store.Users');
this.model = Ext.ModelManager.getModel(this.store.model);
this.view = Ext.create('Test.view.Users.Index');
this.view.init(); 
```

Ext.create 视图创建一个网格，init 函数创建一个分页工具栏：

```
init: function(){

var pToolbar =  new Ext.PagingToolbar({
        dock: 'bottom',
        store: this.store,
        displayInfo: true
});

this.addDocked([pToolbar]);

} 
```

`this.store`有正确的参考（检查过）并且刷新效果很好，但**分页没有**！我总是得到所有结果，而不是分页。我在 init() 中尝试过这样的事情：

```
//bind a store to a toolbar
pToolbar.bindStore(this.store);
//reconfigure grid
this.reconfigure(this.store);
//load just the first page
this.store.loadPage(1); 
```

一样。我得到所有 240 条记录而不是 25 条。有什么想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:47:39.380

您必须在加载商店时传递`start`和参数。在商店配置或设置中`limit`也提到是动态的。`pageSize`您可以像加载商店一样 -

```
store.load({
    params:{
        start:0,
        limit: itemsPerPage
    }
}); 
```

如果您正在接收来自服务器的响应数据，那么在服务器端您必须`select`根据`start`和`limit`参数构建查询。

# c# - 更新和插入同时同步微软同步？

> ID：14233166
> 
> 赞同：0
> 
> 时间：2013-01-09T10:29:49.160
> 
> 标签：c#, synchronization, microsoft-sync-framework

微软同步实现如下：

1.  我有一个带有“产品”表的 Sql 服务器数据库，该表当前仅包含一条记录，如图所示。 ![在此处输入图像描述](../Images/18b09735246e8b98e9bfd5c789affc1f.png)
2.  然后我将它与我的客户端同步，它是一个 Sql 精简版 (CE)，所以在我与客户端同步后，客户端中的表也将包含与上面相同的内容，我使用 LocalProvider-Sql 精简版和 RemoteProvider-Sql 服务器数据库。 ![在此处输入图像描述](../Images/9fdb15d15d93b53ff5c33588aa4a2e8a.png)

3.  现在，我将服务器“产品”表列条目“名称”-“PC”更改为“UBUNTUPC”，因此我的服务器数据库表看起来像这样，然后产品表上有更新。 ![在此处输入图像描述](../Images/3005187459f3f98f18c063d4a79842c8.png)

4.  现在，客户端 sdf 文件中的“Products”表也发生了更改，该 Products 表包含添加到其中的两条新记录 Client SDF Prodcuts 表如下所示。 ![在此处输入图像描述](../Images/a7c72f316f7b40bc49d652d389b70e62.png)
5.  现在，如果我将数据库与 LocalProvider 同步为 SDF 文件（CE），将 RemoteProvider 同步为 Sql Server，同步方向为 UploadAndDownload，则客户端中的表将使用下面显示的这些值进行更新，其他两条记录将丢失。 ![在此处输入图像描述](../Images/3a217ca8246bc6d35f9c2ff8edb99fb1.png)

我想在服务器产品表中添加“笔记本电脑”、“Frantest”的同时，如何在客户端 sdf 中从“PC”更新为“UBANTUPC”值？

更新：我已经编写了手动设置 LocalProvider 和 RemoteProvider 的代码。以下是提供者代码

```
syncOrchestrator.LocalProvider = new SqlCeSyncProvider("OfflineDataScope", clientConn); 
syncOrchestrator.RemoteProvider = new SqlSyncProvider("OfflineDataScope", serverConn); 
```

# mysql - 如何计算当前和以前的日期？

> ID：14233174
> 
> 赞同：1
> 
> 时间：2013-01-09T10:30:11.430
> 
> 标签：mysql

例如 MySQL`NOW()`返回`2013-01-09 12:20:06`，所以我需要计算所有行，如下所示。

**当前的：**

*   时间：2013-01-09 12:00:00 至`NOW()`
*   日期：2013-01-08 00:00:00 至`NOW()`
*   月份：从 2013-01-01 00:00:00 到`NOW()`

**以前的**

*   时间：2013-01-09 11:00:00 - 2013-01-09 12:00:00
*   日期：2013-01-08 00:00:00 - 2013-01-08 23:59:59
*   月份：2012-12-01 00:00:00 - 2013-01-01 00:00:00

我试过类似的东西：

```
WHERE
    `date` >= DATE_FORMAT(NOW(), '%Y-%m-%d %h:00:00')
AND `date` >= DATE_SUB(
    DATE_FORMAT(NOW(), '%Y-%m-%d %h:00:00'),
    INTERVAL 10 MONTH
) 
```

但是可能有更方便的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:51:21.217

试试这个：

**对于当前：**

```
SELECT DATE_FORMAT(NOW(), '%Y-%m-%d %H:00:00');
SELECT DATE_FORMAT(NOW(), '%Y-%m-%d 00:00:00');
SELECT DATE_FORMAT(NOW(), '%Y-%m-01 00:00:00'); 
```

**对于以前的：**

```
SELECT DATE_FORMAT(NOW(), '%Y-%m-%d %H:00:00'), DATE_SUB(DATE_FORMAT(NOW(), '%Y-%m-%d %H:00:00'), INTERVAL 1 HOUR);
SELECT DATE_FORMAT(NOW(), '%Y-%m-%d 00:00:00'), DATE_SUB(DATE_FORMAT(NOW(), '%Y-%m-%d 00:00:00'), INTERVAL 1 DAY);
SELECT DATE_FORMAT(NOW(), '%Y-%m-01 00:00:00'), DATE_SUB(DATE_FORMAT(NOW(), '%Y-%m-01 00:00:00'), INTERVAL 1 MONTH); 
```

检查此链接[**SQL FIDDLE DEMO**](http://sqlfiddle.com/#!2/c2c333/1)

# iphone - 获取使用 AT&T 语音 api 的 OAuth 访问令牌

> ID：14233177
> 
> 赞同：1
> 
> 时间：2013-01-09T10:30:19.617
> 
> 标签：iphone, ios6, speech-to-text

我在我的 iphone 应用程序中使用 AT&T Speech API 将语音转换为文本。我需要将音频转换为文本。我的问题是：如何获取 OAuth 访问令牌？因为我需要它来进行 API 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-31T05:10:34.137

![管理我的帐户](../Images/282ac17c9d843358d26f83feca4ac4b4.png)

*   登录到您的 ATT 开发者帐户并点击“管理我的帐户”

![沙盒](../Images/7044b012b2320e30af9a743d655ad11b.png)

*   创建新应用或进入现有应用的沙箱

![appkey 和 appsecret](../Images/f43f180fda299eac4779da03abcfbd9e.png)

*   App Key 和 App Secret 用于您的 OAuth 令牌

![oauth 令牌](../Images/59fa9de5cd069130608c5c4585ecaecb.png)

# sql-server - 将查询结果包装在行中

> ID：14233199
> 
> 赞同：0
> 
> 时间：2013-01-09T10:31:06.390
> 
> 标签：sql-server

扩展[写入 sql 查询以包装行数据的问题](https://stackoverflow.com/questions/14217867/write-sql-query-to-wrap-row-data)

```
 DEPARTMENT  |   SUB_DEPT    |   EMPLOYEE    |   SALARY
    DEPT1       |   SUB_DEPT1   |   ABC         |   20000
    DEPT1       |   SUB_DEPT1   |   DEF         |   30000
    DEPT1       |   SUB_DEPT2   |   GHI         |   25000
    DEPT1       |   SUB_DEPT2   |   JKL         |   42000
    DEPT2       |   SUB_DEPT3   |   MNO         |   42500
    DEPT2       |   SUB_DEPT3   |   PQR         |   35000
    DEPT3       |   SUB_DEPT4   |   STU         |   36000
    DEPT3       |   SUB_DEPT5   |   VWX         |   36040 
```

检索喜欢

```
 DEPARTMENT  |   SUB_DEPT    |   EMPLOYEE    |   SALARY
    DEPT1       |   SUB_DEPT1   |   ABC         |   20000
                |               |   DEF         |   30000
                |   SUB_DEPT2   |   GHI         |   25000
                |               |   JKL         |   42000
    DEPT2       |   SUB_DEPT3   |   MNO         |   42500
                |               |   PQR         |   35000
    DEPT3       |   SUB_DEPT4   |   STU         |   36000
                |   SUB_DEPT5   |   VWX         |   36040 
```

这意味着1）包装必须适用于两列。2) 换行文本必须用于第一行，即 DEPT1 必须仅出现在第一行，DEPT2 必须出现在第 5 行。

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:34:58.887

您可以遵循与原始帖子相同的过程。为每个唯一部门创建一个`row_number()`，然后对每个唯一部门*和*sub_dept 分区执行相同的操作：

```
select 
  case when deptrn = 1 then department else '' end department,
  case when SubDeptRn = 1 then sub_dept else '' end sub_dept,
  employee,
  salary
from
(
  select department, sub_dept, employee, salary,
    row_number() over(partition by department order by department, employee) DeptRn,
    row_number() over(partition by department, sub_dept order by department, sub_dept, employee) SubDeptRn
  from yourtable
) src 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5d45c/5)

结果：

```
| DEPARTMENT |  SUB_DEPT | EMPLOYEE | SALARY |
----------------------------------------------
|      DEPT1 | SUB_DEPT1 |      ABC |  20000 |
|            |           |      DEF |  30000 |
|            | SUB_DEPT2 |      GHI |  25000 |
|            |           |      JKL |  42000 |
|      DEPT2 | SUB_DEPT3 |      MNO |  42500 |
|            |           |      PQR |  35000 |
|      DEPT3 | SUB_DEPT4 |      STU |  36000 |
|            | SUB_DEPT5 |      VWX |  36040 | 
```

# forms - 表单提交适用于 Windows 开发机器，但不适用于 linux 生产服务器

> ID：14233201
> 
> 赞同：1
> 
> 时间：2013-01-09T10:31:16.577
> 
> 标签：forms, atk4

所以我发生了一些复杂的生成表单，它在我的 Windows xampp 服务器上运行良好，但是在我的 linux 生产服务器上提交后，下拉字段值没有被检索到 - 有什么想法吗？

```
 $f=$block->add('Form');

    if($dropdown) {
        $f->addField('Dropdown',$dropdown['value'],$dropdown['label'])
            ->setModel($dropdown['model']);

    }

    // Button
    $b=$f->add('Button')->setLabel($label);

    if($dropdown) {
        $b->js('click', $f->js()->atk4_form('submitForm'));
    }
    else {
        $b->js('click')->univ()
            ->newWindow($this->api->getDestinationURL(
                                './details',
                                array('model'=>$model,'type'=>$type)
                                )
                        )
                        ->execute();    
    }

    $block->add('HR');

if($f->isSubmitted()){
    $f->js()->univ()
            ->newWindow($this->api->getDestinationURL(
                                './details',
                                array(
                                        'model'=>$model,
                                        'type'=>$type,
                                        'field'=>'home_'.$dayShort,
                                        'value'=>$f->get($dropdown['value'])
                                        )
                                )
                        )
                        ->execute();    

    }

} 
```

在 Windows 中有效但在 linux 中无效的部分已`'value'=>$f->get($dropdown['value'])`接近尾声

任何帮助将不胜感激！

谢谢格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:48:02.210

When whatever thing works in Windows and don't work in Linux first thing to check out is upper / lower case letters in classnames and filenames.

In this particular case I guess your mistake is because you have addField('Dropdown'), but should have addField('Drop**D**own') with uppercase D in "down".

# internet-explorer - 在 Internet Explorer 中查看时出现空白页

> ID：14233204
> 
> 赞同：0
> 
> 时间：2013-01-09T10:31:28.000
> 
> 标签：internet-explorer, visual-studio-2012

我似乎无法在 Internet Explorer 中查看我的 Web 应用程序，该页面一直在加载，只显示一个空白页面。它是旧的 Web 应用程序还是我创建一个新的应用程序都没有关系。它在谷歌浏览器中显示良好。

昨天我从VS2010升级到VS2012。当我使用 VS2010 时，我在查看我的 Web 应用程序时没有遇到任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:04:14.333

恢复 Internet Explorer 后，它开始工作。

# android - 复杂的 Listview 就像 google currents

> ID：14233207
> 
> 赞同：1
> 
> 时间：2013-01-09T10:31:31.973
> 
> 标签：android, listview

我想创建一个复杂的列表视图，就像在 google currents 中可以看到的那样：

[![](../Images/9ae19c5f75a2ac8a851c87a6f2d2f82a.png)](https://i.stack.imgur.com/FLIKa.png)
[（来源：[mshcdn.com](http://rack.0.mshcdn.com/media/ZgkyMDEyLzEyLzEyLzBhL2dvb2dsZWN1cnJlLmtNSS5wbmc/a3d1eaa2/8ea/google-currents-headsup2.png)）]

我最初认为 webview 可以解决问题，但由于插入的每个元素都有一个动画，它可能真的是一个列表视图。所以我的问题是如何实现这一点（即使用不同的布局渲染每一行（没有用于防止布局膨胀的视图？）并在一个非常大的平滑垂直列表中管理大图像的异步加载和调整大小）？

# php - 如何在弹出窗口中显示可选文本？Javascript & PHP

> ID：14233209
> 
> 赞同：0
> 
> 时间：2013-01-09T10:31:36.297
> 
> 标签：php, yourls

我正在使用 URL 缩短脚本 Yourls。在得到你们的帮助后，工作进展顺利。谢谢你。按下每个按钮以缩短 URL，会出现一个弹出窗口，显示该页面的短 URL。这种简单的方法适用于 Firefox，但我无法在 Internet Explorer 的弹出窗口中选择文本/缩短 URL。有什么建议如何在弹出窗口中显示可选文本？

这是页面的代码：

```
<?php 
// Start YOURLS engine
require_once( dirname(__FILE__).'/includes/load-yourls.php' );

function selfURL() { $s = empty($_SERVER["HTTPS"]) ? '' : ($_SERVER["HTTPS"] == "on") ? "s" : ""; $protocol = strleft(strtolower($_SERVER["SERVER_PROTOCOL"]), "/").$s; $port = ($_SERVER["SERVER_PORT"] == "80") ? "" : (":".$_SERVER["SERVER_PORT"]); return $protocol."://".$_SERVER['SERVER_NAME'].$port.$_SERVER['REQUEST_URI']; } function strleft($s1, $s2) { return substr($s1, 0, strpos($s1, $s2)); }

?>
<!DOCTYPE html>
<html>
<head>

</head>

<body>

<div id="container">
    <?php
    // Part to be executed if FORM has been submitted
    if ( isset($_REQUEST['url']) ) {
        $url     = yourls_sanitize_url( $_REQUEST['url'] );
        $return  = yourls_add_new_link( $url );     
        $shorturl = isset( $return['shorturl'] ) ? $return['shorturl'] : '';

        echo <<<RESULT
        "<script type='text/javascript'>alert('$shorturl');</script>"
RESULT;

    // Part to be executed when no form has been submitted
    } else {

        $site = YOURLS_SITE;
        $var = selfURL();
        echo <<<HTML
        <form method="post" action="">      
        <p><input type="hidden" name="url" value="$var" /></p>
        <p><input type="submit" value="Shorten" /></p>
        </form> 
HTML;
    }
    ?>
</div>
</body>
</html> 
```

我想编辑它所说的代码

```
"<script type='text/javascript'>alert('$shorturl');</script>" 
```

如何使文本可选择复制？

谁能告诉我为什么当我们按下按钮时页面[http://taimoorsultan.com/y/会重定向到另一个页面？](http://taimoorsultan.com/y/)是否可以在同一页面上显示弹出窗口而不转到下一页？我已经粘贴了上面的完整代码。！谢谢！

**这是当前代码::**

```
<?php 
// Start YOURLS engine
require_once( dirname(__FILE__).'/includes/load-yourls.php' );

function selfURL() { $s = empty($_SERVER["HTTPS"]) ? '' : ($_SERVER["HTTPS"] == "on") ? "s" : ""; $protocol = strleft(strtolower($_SERVER["SERVER_PROTOCOL"]), "/").$s; $port = ($_SERVER["SERVER_PORT"] == "80") ? "" : (":".$_SERVER["SERVER_PORT"]); return $protocol."://".$_SERVER['SERVER_NAME'].$port.$_SERVER['REQUEST_URI']; } function strleft($s1, $s2) { return substr($s1, 0, strpos($s1, $s2)); }

?>
<!DOCTYPE html>
<html>
<head>
<!--Testing-->
   <?php if(isset($_REQUEST['url']): // <-- only include jQuery if url set ?>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
  <script>
  $(function() {
    $( "#dialog-modal" ).dialog({
      height: 140,
      modal: true
    });
  });
  </script>
  <?php endif; ?>
<!--Testing-->
</head>

<body>

<div id="container">
    <?php
    // Part to be executed if FORM has been submitted
    if ( isset($_REQUEST['url']) ) {
        $url     = yourls_sanitize_url( $_REQUEST['url'] );
        $return  = yourls_add_new_link( $url );     
        $shorturl = isset( $return['shorturl'] ) ? $return['shorturl'] : '';

        echo <<<RESULT

RESULT;

    // Part to be executed when no form has been submitted
    } else {

        $site = YOURLS_SITE;
        $var = selfURL();
        echo <<<HTML
        <form method="post" action="">      
        <p><input type="hidden" name="url" value="$var" /></p>
        <p><input type="submit" value="Shorten" /></p>
        </form> 
HTML;
    }

    ?>

</div>

<?php if(isset($_REQUEST['url']): // <-- only include the div if url set ?>
<div id="dialog-modal" title="Basic modal dialog">
  <p><?php echo htmlspecialchars($shorturl); ?></p>
</div>
<?php endif; ?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:41:35.950

无法更改 Internet Explorer 中文本的选择能力。`alert()`'s 是显示消息的非常基本的方式，除了消息之外没有可配置的选项。

如果您想要更多控制权，您将不得不在页面上显示消息，或者创建自己的对话框或使用类似[jQuery UI Dialog](http://jqueryui.com/dialog/)的东西。

例如在页面上：

```
echo '<p>' . htmlspecialchars($shorturl) . '</p>'; 
```

或在`<input>`：

```
 echo '<input type="text" value="' . htmlspecialchars($shorturl) . '" />'; 
```

要将 jQuery 对话框添加到您的页面，您的`<head>`部分需要看起来像（使用 jQuery CDN）：

```
<head>
  <?php if(isset($_REQUEST['url'])): // <-- only include jQuery if url set ?>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
  <script>
  $(function() {
    $( "#dialog-modal" ).dialog({
      height: 140,
      modal: true
    });
  });
  </script>
  <?php endif; ?>
</head> 
```

`div`将将成为对话框的添加到您的`<body>`元素中：

```
<?php if(isset($_REQUEST['url'])): // <-- only include the div if url set ?>
<div id="dialog-modal" title="Basic modal dialog">
  <p><?php echo htmlspecialchars($shorturl); ?></p>
</div>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:42:35.360

这是从浏览器到浏览器的不同行为。你不能用`alert`. 而是使用自定义对话窗口。您可以使用[jQuery UI Dialog 插件](http://jqueryui.com/dialog/#modal "jQuery UI 对话框扩展")或[Twitter Bootstrap Modal 插件](http://twitter.github.com/bootstrap/javascript.html#modals)。

# iphone - 如何使用自定义键盘在浏览器中搜索？

> ID：14233212
> 
> 赞同：1
> 
> 时间：2013-01-09T10:31:45.770
> 
> 标签：iphone, xcode, browser, custom-keyword

我最近开发了一个[应用](https://itunes.apple.com/us/app/urdu-keyboard-pro/id573253443?mt=8)程序。现在我想在这个应用程序中集成谷歌和 Youtube，就像[这个](https://itunes.apple.com/us/app/arabic-keyboard-pro-arabic/id385020052?mt=8)应用程序一样。经过大量搜索后，我认为有两种方法可以将谷歌和 youtube 集成到自定义键盘。

1.  第一种方法（这是完美的解决方案，但看起来非常困难）是，如果我们在 Webview 中打开 google url，然后这里是当我们在 Google SearchBar 中单击时显示 customkeyboard 的方法。因为当我们在应用程序中使用 customkeyboard 时，我们通过 ( textView.inputView =Customkeyboard;) 但是对于谷歌搜索栏来说，如何使用这个方法看起来很困难，如果有人指导我这个方法我会很高兴的。

2.  第二种方法不完美但看起来不错的是，如果我们使用自定义键盘在 UITextField 和 UITextView 中输入文本，然后像我为默认键盘所做的那样将此文本附加到 Google 搜索 url

    ```
     -(IBAction)openBrowser {
       NSString *parameter = @"NewYork";
       NSString *url = @"https://www.google.com/search?q=";
       NSString *searchingurl = [NSString stringWithFormat:@"%@%@", url, parameter];
       UIApplication *app = [UIApplication sharedApplication];
       [app openURL:[NSURL URLWithString:searchingurl]];
       } 
    ```

    上面的 url 为我打开了一个想要的页面。所以使用这种方法我尝试了自定义键盘作为我的下面的代码显示

    ```
    -(void)openBrowser {
     NSString *parameter = @"انڈیا";
     NSString *url = @"https://www.google.com.pk/search?hl=ur&tbo=d&noj=1&q=";
     NSString *searchingurl = [NSString stringWithFormat:@"%@%@", url, parameter];
     NSLog(@"searchingurl result:%@",searchingurl);
     UIApplication *app = [UIApplication sharedApplication];
     [app openURL:[NSURL URLWithString:searchingurl]];
     } 
    ```

    但是这次它没有打开所需的页面因为谷歌直接无法识别自定义键盘单词是（انڈیا），现在当我结合整个网址时（https://www.google.com.pk/search ?hl=ur&tbo=d&noj=1&q=انڈیا) 并在我的计算机浏览器中打开它我得到结果 (https://www.google.com.pk/search?hl=ur&tbo=d&noj=1&site=webhp&source=hp&q=% D8%A7%D9%86%DA%88%DB%8C%D8%A7&oq=%D8%A7%D9%86%DA%88&gs_l=hp.1.0.0l10.10727.35473.0.37372.5.4.1.0.0.0.304.1162 .2-3j1.4.0...0.0...1c.3j4j1.PBbmxkMVaqc) 现在在这个 url 中，单词 (انڈیا) 消失了，浏览器将其翻译成某种类型的代码。最后，当我使用下面的代码时

    ```
    -(void)openBrowser {
    // NSString *parameter = @"انڈیا";
     NSString *searchingurl = @"https://www.google.com.pk/search?hl=ur&tbo=d&noj=1&site=webhp&source=hp&q=%D8%A7%D9%86%DA%88%DB%8C%D8%A7&oq=%D8%A7%D9%86%DA%88&gs_l=hp.1.0.0l10.10727.35473.0.37372.5.4.1.0.0.0.304.1162.2-3j1.4.0...0.0...1c.3j4j1.PBbmxkMVaqc";
     //NSString *searchingurl = [NSString stringWithFormat:@"%@%@", url, parameter];
     NSLog(@"searchingurl result:%@",searchingurl);
     UIApplication *app = [UIApplication sharedApplication];
     [app openURL:[NSURL URLWithString:searchingurl]];
     } 
    ```

    它在 iphone 中运行良好并打开所需页面。现在我希望如果我使用第二种方法，那么有些人可以指导我如何在附加自定义键盘文本后直接打开 url，例如这个 url（https://www.google [。](https://www.google.com.pk/search?hl=ur&tbo=d&noj=1&site=webhp&source=hp&q=%D8%A7%D9%86%DA%88%DB%8C%D8%A7&oq=%D8%A7%D9%86%DA%88&gs_l=hp.1.0.0l10.10727.35473.0.37372.5.4.1.0.0.0.304.1162.2-3j1.4.0...0.0...1c.3j4j1.PBbmxkMVaqc) _ [hl=ur&tbo=d&noj=1&site=webhp&source=hp&q=%D8%A7%D9%86%DA%88%DB%8C%D8%A7&oq=%D8%A7%D9%86%DA%88&gs_l=hp.1.0。 0l10.10727.35473.0.37372.5.4.1.0.0.0.304.1162.2-3j1.4.0...0.0...1c.3j4j1.PBbmxkMVaqc](https://www.google.com.pk/search?hl=ur&tbo=d&noj=1&site=webhp&source=hp&q=%D8%A7%D9%86%DA%88%DB%8C%D8%A7&oq=%D8%A7%D9%86%DA%88&gs_l=hp.1.0.0l10.10727.35473.0.37372.5.4.1.0.0.0.304.1162.2-3j1.4.0...0.0...1c.3j4j1.PBbmxkMVaqc) ) 然后在 Google 中打开此 url。任何帮助或建议都将得到高度评价。谢谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:17:15.803

浏览器用 UTF8 编码 انڈیا，然后是 %D8%A7%D9%86%DA%88%DB%8C%D8%A7。

尝试这个：

```
 NSString *parameter = @"انڈیا";  
        NSString *url = @"https://www.google.com.pk/search?hl=ur&tbo=d&noj=1&q=";
        NSString *searchingurl = [NSString stringWithFormat:@"%@%@", url, parameter];
        NSString *encodedSearchingurl = [searchingurl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        NSLog(@"searchingurl result:%@",encodedSearchingurl);
        UIApplication *app = [UIApplication sharedApplication];
        [app openURL:[NSURL URLWithString:encodedSearchingurl]]; 
```

# mysql - MySql - 在一个查询中从两个不同的表中选择用户名

> ID：14233220
> 
> 赞同：0
> 
> 时间：2013-01-09T10:32:17.407
> 
> 标签：mysql, duplicates

我有 3 张桌子

*   带有用户名和用户 ID 的 users 表，
*   具有用户 ID 和分数的用户排行榜
*   具有用户 ID 和 numOfLikes 的点赞排行榜

我想选择点赞最多的用户名，以及得分最高的用户名。但我的问题是，当我编写查询时，我在`name`那里复制了字段。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:42:24.790

使用别名可能会对您有所帮助

```
SELECT a.id as id_a,
  b.id as id_b,
  c.id as id_c
from a
inner join b
  on a.id = b.a_id
inner join c
  on a.id = c.a_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:42:54.490

您可能正在使用`SELECT *`. 您应该指定字段名称：

```
SELECT u.user_id, u.name, li.numOfLikes FROM users u INNER JOIN likes li ON (u.user_id=li.user_id) ORDER BY li.numOfLikes

SELECT u.user_id, u.name, s.score FROM users INNER JOIN scores s ON (u.user_id=s.user_id) ORDER BY s.score 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T10:59:20.937

我在查询中使用以下三个表

1.  usertable - 包含用户名和用户 ID
2.  table2 - 包含用户 ID 和分数
3.  table3 - 包含用户 ID 和 numOfLikes

要获取具有最高分数的用户的详细信息，请使用以下

```
select usrtbl.username,usrtbl.userid,tbl2.score from  usertable usrtbl inner join table2 tbl2 on usrtbl.userid=tbl2.userid order by tbl2.score
desc limit 1 
```

要获取最大喜欢数的用户的详细信息，请使用以下内容

```
select usrtbl.username,usrtbl.userid,tbl3.numOfLikes from  usertable usrtbl inner join table3 tbl3 on usrtbl.userid=tbl3.userid order by tbl3.numOfLikes
desc limit 1 
```

要在一个查询中获取所有内容，请使用以下查询

```
select usrtbl.username as 'user_with_max_score',usrtbl.userid as 'userid_of_user_with_max_score',
tbl2.score as 'max_score',usrtbl2.username as 'user_with_max_likes',usrtbl2.userid as 'userid_of_user_with_max_score' ,
tbl3.numOfLikes as 'max_likes' from  usertable usrtbl2 inner join table3 tbl3 inner join  usertable usrtbl inner join table2 tbl2 
on usrtbl.userid=tbl2.userid  and usrtbl2.userid=tbl3.userid order by tbl2.score desc,tbl3.numOfLikes desc
 limit 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T10:41:42.800

您可以使用**tablename** .name进行选择

# operator-overloading - 使用 ifstream 对象读取文件 - 二进制“>>”：未找到采用“int *”类型的右侧操作数的运算符

> ID：14233221
> 
> 赞同：0
> 
> 时间：2013-01-09T10:32:17.513
> 
> 标签：operator-overloading, iostream, ifstream, file-handling

我正在读取包含以下信息的原始网络文件： 1\. Arc ID 2\. 尾节点 3\. 头节点

为此，我写出了以下类型 - 弧（具有项目 1,2 和 3）和网络（具有弧元素以及总节点和总弧的详细信息）。这是定义：

```
typedef struct {
    int arcno;
    int tail;
    int head;
} arc_data;

typedef struct {
    arc_data *arcs;
    int numNodes;
    int numArcs;
}  network_data; 
```

现在在代码中我声明了`ifstream`目标文件并且我正在读取数据。这里 network 是`network_data`上面声明的类型的对象。我将弧声明为指针，因为在读取文件之前我不确定弧的总数是多少 - 因此需要动态更改弧的大小。

```
for(i = 1; i <= network.numArcs; i++) {
    file >> &network.arcs[i].arcno;
    file >> &network.arcs[i].tail; 
```

但是，现在代码没有构建。我正在使用 Visual Studio 2012。编译器显示以下错误：

```
Error   1   error C2679: binary '>>' : no operator found which takes a right-hand operand of type 'int *' (or there is no acceptable conversion) 
51 file >> &network.arcs[i].head; 
```

这里有什么问题？`ifstream`除了读取文件还有其他方法吗？

编辑：查看 msdn 库表明重载`>>`运算符可以解决问题。（参考：http://msdn.microsoft.com/en-us/library/h1925w4w%28v=vs.110%29.aspx）。任何人都可以帮我编写重载函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:19:49.083

您不应该将指向 int 的指针传递给流的提取运算符，而是传递一个引用：

诠释我; 辛 >> 我;

还有一些注意事项：

*   “二进制”适用于运算符，因为它需要两个操作数。这与原始/打包二进制表示**无关**，而不是文本表示。
*   C++ IOstreams 是为文本 IO 制作的。他们也有读取/写入原始字节的方法，但是你必须自己处理格式。这很复杂，这就是为什么存在各种所谓的序列化库的原因。我会尽量避免自己做。
*   `typedef struct { ... } name;`创建一个匿名结构，然后使用 typedef 为其命名。这曾经在 C 中很有用，在那里您可以将结构称为`name`while 与您必须使用的普通结构`struct name`，但在 C++ 中则不行。放弃它，它只是丑陋和不必要的。
*   是的，您可以并且可能应该为您的结构重载插入和提取运算符。
*   我会考虑使用 std::vector 或类似的容器，而不是使用指针/大小组合滚动我自己的容器。

# mercurial - 在 mercurial 的多个分支中移动文件

> ID：14233227
> 
> 赞同：0
> 
> 时间：2013-01-09T10:32:38.060
> 
> 标签：mercurial

我试图找出如何一次将 mercurial 中的多个文件从一个目录移动到所有分支中的另一个目录。这个想法是我在一个目录中有一些文件

一个/一些文件

应该移到

b/a/some_file

但在分支结构中执行此操作

```
 10   9
 |    |
 |    8
 |    |
 |____/
 7
 |
 ... 
```

要记住的是节点 9 中的一些文件已经更改，但也应该向上移动一个目录。另外我想在节点 7 处添加一些文件，以便它们存在于两个分支中。但重要的是移动文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:07:38.253

重命名会在合并中传播，因此如果您检查变更集 7 处的文件，在*那里*重命名它们，然后将重命名更改合并到其余分支，Mercurial 应该做正确的事情。

例如，请参阅以下命令跟踪中发生的情况。我首先创建一个测试存储库：

```
saturn:/tmp$ hg init test
saturn:/tmp$ cd test 
```

然后，我确保一个名为“foo.txt”的文件存在于一个名为的分支的顶层目录中`br.7`：

```
saturn:/tmp/test$ echo foo > foo.txt
saturn:/tmp/test$ hg commit -Am 'add foo'
adding foo.txt
saturn:/tmp/test$ hg branch br.7
marked working directory as branch br.7
(branches are permanent and global, did you want a bookmark?)
saturn:/tmp/test$ hg commit -m 'br.7 opened' 
```

然后我 fork 其他两个分支，`br.8`并`br.9`从 `br.7' 分支的最新变更集中：

```
saturn:/tmp/test$ hg up -C br.7
0 files updated, 0 files merged, 0 files removed, 0 files unresolved
saturn:/tmp/test$ hg branch br.8
marked working directory as branch br.8
(branches are permanent and global, did you want a bookmark?)

saturn:/tmp/test$ hg commit -m 'br.8 opened'
saturn:/tmp/test$ hg up -C br.7
0 files updated, 0 files merged, 0 files removed, 0 files unresolved
saturn:/tmp/test$ hg branch br.9
marked working directory as branch br.9
(branches are permanent and global, did you want a bookmark?)
saturn:/tmp/test$ hg commit -m 'br.9 opened' 
```

现在变更集图如下所示：

```
saturn:/tmp/test$ hg log --graph --style=compact
@  3[tip]:1   f3f155b61aa8   2013-01-09 23:48 +0100   gkeramidas
|    br.9 opened
|
| o  2   ad3b03105da7   2013-01-09 23:48 +0100   gkeramidas
|/     br.8 opened
|
o  1   9cfed898c77b   2013-01-09 23:48 +0100   gkeramidas
|    br.7 opened
|
o  0   9a6f15da68d7   2013-01-09 23:47 +0100   gkeramidas
     add foo 
```

因此，如果我尝试先重命名分支中的文件，`br.7`然后向上合并重命名，则会发生以下情况：

```
saturn:/tmp/test$ hg up -C br.7
0 files updated, 0 files merged, 0 files removed, 0 files unresolved
saturn:/tmp/test$ mkdir subdir
saturn:/tmp/test$ hg rename foo.txt subdir/foo.txt
saturn:/tmp/test$ hg commit -m 'Rename foo.txt'

saturn:/tmp/test$ hg branches
br.7                           4:d57b57b98f19
br.9                           3:f3f155b61aa8
br.8                           2:ad3b03105da7
default                        0:9a6f15da68d7 (inactive) 
```

然后，最后，我将重命名变更集从分支合并`br.7`到*更高*的分支：

```
saturn:/tmp/test$ hg up -C br.8
1 files updated, 0 files merged, 1 files removed, 0 files unresolved
saturn:/tmp/test$ hg merge br.7
1 files updated, 0 files merged, 1 files removed, 0 files unresolved
(branch merge, don't forget to commit) 
```

合并的结果在 git 风格的 diff 输出中如下所示：

```
saturn:/tmp/test$ hg diff --git
diff --git a/foo.txt b/foo.txt
deleted file mode 100644
--- a/foo.txt
+++ /dev/null
@@ -1,1 +0,0 @@
-foo
diff --git a/subdir/foo.txt b/subdir/foo.txt
--- /dev/null
+++ b/subdir/foo.txt
@@ -0,0 +1,1 @@
+foo 
```

如果我提交此更改，则历史现在如下所示：

```
saturn:/tmp/test$ hg log --graph --style=compact
@    5[tip]:2,4   22b095e35b43   2013-01-10 00:02 +0100   gkeramidas
|\     Merge rename of foo.txt
| |
| o  4:1   d57b57b98f19   2013-01-09 23:49 +0100   gkeramidas
| |    Rename foo.txt
| |
| | o  3:1   f3f155b61aa8   2013-01-09 23:48 +0100   gkeramidas
| |/     br.9 opened
| |
o |  2   ad3b03105da7   2013-01-09 23:48 +0100   gkeramidas
|/     br.8 opened
|
o  1   9cfed898c77b   2013-01-09 23:48 +0100   gkeramidas
|    br.7 opened
|
o  0   9a6f15da68d7   2013-01-09 23:47 +0100   gkeramidas
     add foo 
```

注意重命名现在看起来像一个真正的“合并”操作，并查看 log --copies 如何通过重命名操作返回到`foo.txt`在此输出中添加的原始更改：

```
saturn:/tmp/test$ hg log --copies --style=compact foo.txt subdir/foo.txt
4:1   d57b57b98f19   2013-01-09 23:49 +0100   gkeramidas
  Rename foo.txt

0   9a6f15da68d7   2013-01-09 23:47 +0100   gkeramidas
  add foo 
```

这样，您可以拥有一个变更集（本示例中的变更集 d57b57b98f19）在最旧的可能位置执行重命名操作，并且您也可以将此变更集合并到所有*上层*分支。您仍然需要单独执行每个分支，但我喜欢能够跟踪所有内容的想法：重命名的内容，重命名的人，发生的时间*以及*合并到派生分支的时间。

# cloud-foundry - vmc 目标错误 ETIMEDOUT 在防火墙后面

> ID：14233234
> 
> 赞同：0
> 
> 时间：2013-01-09T10:32:45.967
> 
> 标签：cloud-foundry, vmc

配置：Windows 7 64 位 Ruby19.3 vmc 0.4.7

从管理员命令提示符中，我发出了

```
$ set http_proxy=http://j.bosman:XXXXXX@10.1.1.2:8080
$ set https_proxy=https://j.bosman:XXXXXX@10.1.1.2:8080
$ vmc target https://api.cloudfoundry.com -t 
```

这就是我得到的：

> Setting target to [https://api.cloudfoundry.com](https://api.cloudfoundry.com) ... FAILED Errno::ETIMEDOUT: 连接尝试失败，因为连接方在一段时间后没有正确响应，或者建立连接失败，因为连接的主机没有响应. - connect(2) 有关详细信息，请参阅 ~/.vmc/crash

以及崩溃文件的内容：

> 崩溃时间：2013-01-09 10:24:53 +0000
> 
> Errno::ETIMEDOUT：连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。- 连接（2）
> 
> C:/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `initialize' C:/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in`open' C:/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `block in connect' C:/Ruby193/lib/ruby/1.9.1/timeout.rb:54:in`timeout' C: /Ruby193/lib/ruby/1.9.1/timeout.rb:99:in `timeout' C:/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in`connect' C:/Ruby193/lib/ruby/1.9.1/net/http.rb:755:in `do_start' C:/Ruby193/lib/ruby/1.9.1/net/http.rb:744:in`start' cfoundry-0.4.18/ lib/cfoundry/baseclient.rb:124:in `request_uri' cfoundry-0.4.18/lib/cfoundry/baseclient.rb:45:in`request' cfoundry-0.4.18/lib/cfoundry/baseclient.rb:41:in `request_path' cfoundry-0.4.18/lib/cfoundry/baseclient.rb:190:in`request_with_options' cfoundry-0.4.18/lib/cfoundry/baseclient.rb:194:in `get' cfoundry-0.4.18/lib/cfoundry/client.rb:44:in`info ' cfoundry-0.4.18/lib/cfoundry/client.rb:35:in `new' vmc-0.4.7/lib/vmc/cli.rb:354:in`client' vmc-0.4.7/lib/vmc/cli/start/target.rb:53:in `block in target' interact-0.5.1/lib/interact/progress.rb:98:in`with_progress' vmc-0.4.7/lib /vmc/cli/start/target.rb:52:in run'mothership `target' mothership-0.3.5/lib/mothership/base.rb:61:in`-0.3.5/lib/mothership/command.rb:68:in `block in invoke' mothership-0.3.5/lib/mothership/command.rb:82:in`instance_exec'mothership-0.3.5/lib/mothership/command.rb:82：在`invoke' mothership-0.3.5/lib/mothership/base.rb:50:in`执行'vmc-0.4.7/lib/vmc/cli.rb:106:in start'vmc `execute' mothership-0.3.5/lib/mothership.rb:45:in`-0.4.7/bin/vmc:11:in `<top (required)>' C:/Ruby193/bin/vmc:23:in`load'C:/Ruby193/bin/vmc:23:in `'

你能帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:55:26.180

使用最新的 vmc 应该不需要代理设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:05:52.423

杰罗姆，我正准备报告同样的问题。此外，根据知识库文章，我在系统环境级别（windows xp）设置代理值。没运气。另外，正如一些人建议的那样，我将代理设置为[http://proxy.vmware.com:3128](http://proxy.vmware.com:3128)。再次，没有运气。希望这是云铸造的暂时性而非致命性问题。

# yii - 与 Yii 框架中的验证规则混淆

> ID：14233235
> 
> 赞同：0
> 
> 时间：2013-01-09T10:32:48.387
> 
> 标签：yii

我是 Yii 框架的新手，对模型内部编写的验证规则有些困惑。例如：
array('email','safe'),
array('username, password', 'required', 'on'=>'login, register'),

1-**安全**验证器的用途是什么以及在哪里使用它？
2-**在**场景中有什么用以及如何使用它？假设我已经写**了 'on'=>'register'**，那么 'register' 是动作名称还是其他任何东西。

即使经过大量的文件，我仍然不是很清楚。有人可以举个例子来解释一下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T10:42:09.833

> 安全验证器的用途是什么以及在哪里使用它？

`safe`验证器可用于指示“此字段可以接受*任何内容*，并且不应执行验证”。它在批量分配期间是相关的：

```
$model->attributes = $_POST['Model']; 
```

如果该字段没有设置规则，则在此分配后其值将*不会更新。*如果一个字段不需要任何验证，但在这种情况下仍应更新，您可以使用`safe`规则来指示这一点（但要小心，验证是一件好事）。

* * *

> 在场景中有什么用途以及如何使用它？假设我写了'on'=>'register'，那么'register' 是动作名称还是其他任何东西。

在这种情况下，`register`是一个*场景*（您选择的任意字符串，描述模型正在发生的事情）。在执行批量分配和其他工作之前，您可以在控制器中分配模型的场景。当验证模型时，Yii 将查看模型的`scenario`属性并基于该属性运行验证器。（在一个合理大小的项目中，您将希望使用类常量而不是任意字符串来保持一致性。）

示例：用户密码更改。您可以设置以下验证器以`password`仅在这种情况下将字段标记为必填，否则不能：

```
// validator in the model class
array('password', 'required', 'on' => 'change-password'),

// code in the right controller's action
$user->scenario = 'change-password'; // set the scenario
$user->attributes = $_POST['User'];
$user->validate(); // if the password is not set, this will result in a validation error 
```

Look at [this answer](https://stackoverflow.com/questions/14169814/how-to-use-one-model-for-two-different-forms/14169907#14169907) for some more information and links to further reading.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:41:03.090

你读过以下文章吗？

[http://www.yiiframework.com/wiki/56/](http://www.yiiframework.com/wiki/56/)

[http://www.yiiframework.com/wiki/161/understanding-safe-validation-rules/](http://www.yiiframework.com/wiki/161/understanding-safe-validation-rules/)

**Safe**将关联的属性标记为对大量任务是安全的。 **On**关键字指定登录、注册等场景

# android - 在 2.2 中将 RGB 图像转换为 Bitmap 错误

> ID：14233237
> 
> 赞同：-1
> 
> 时间：2013-01-09T10:32:48.697
> 
> 标签：android

将 RGB 图像转换为位图

```
public static Bitmap rgbToBitmap(int[] rgb, int width, int height) {
    if (rgb == null) throw new NullPointerException();

    Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);
    bitmap.setPixels(rgb, 0, width, 0, 0, width, height);
    return bitmap;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:43:09.727

试试这种方式：

> ```
>  Bitmap bmp = Bitmap.createBitmap(frameWidth, frameHeight, Bitmap.Config.ARGB_8888); 
> ```

**编辑：**

您可以`out of memory`使用以下方法解决问题：

> ```
>  public static Bitmap shrinkBitmap(String p_file, int p_width, int p_height)
> {
>     BitmapFactory.Options m_bmpFactoryOptions = new BitmapFactory.Options();
>     m_bmpFactoryOptions.inJustDecodeBounds = true;
>     Bitmap m_bitmap = BitmapFactory.decodeFile(p_file, m_bmpFactoryOptions);        
>     int m_heightRatio =
>             (int) Math.ceil(m_bmpFactoryOptions.outHeight / (float) p_height);
>     int m_widthRatio =
>             (int) Math.ceil(m_bmpFactoryOptions.outWidth / (float) p_width);        
>     if (m_heightRatio > 1 || m_widthRatio > 1)
>     {
>         if (m_heightRatio > m_widthRatio)
>         {
>             m_bmpFactoryOptions.inSampleSize = m_heightRatio;
>         }
>         else
>         {
>             m_bmpFactoryOptions.inSampleSize = m_widthRatio;
>         }
>     }       
>     m_bmpFactoryOptions.inJustDecodeBounds = false;
>     m_bitmap = BitmapFactory.decodeFile(p_file, m_bmpFactoryOptions);
>     return m_bitmap;
> } 
> ```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:00:03.653

尝试将 Bitmap.createScaledBitmap() 与设备宽度和高度一起使用，图像超出了内存预算

# python - 将 blobstore blob 作为文件处理 (python)

> ID：14233238
> 
> 赞同：2
> 
> 时间：2013-01-09T10:32:49.603
> 
> 标签：python, google-app-engine, blobstore

我想使用 GAE 创建一个进程，通过它，给定一个 url，一个文件被下载并作为 blob 存储在 blobstore 中。完成此操作后，我想将此 blob 作为 POST 数据传递到第二个 url。但是，要使第二部分工作，我需要能够将 blob 作为文件实例打开。

我已经想出了如何做第一部分

```
from __future__ import with_statement
from google.appengine.api import files

imagefile = urllib2.urlopen('fileurl')
# Create the file
file_name = files.blobstore.create(mime_type=imagefile.headers['Content-Type'])
# Open the file and write to it
with files.open(file_name, 'ab') as f:
    f.write(imagefile.read())
# Finalize the file. Do this before attempting to read it.
files.finalize(file_name)
# Get the file's blob key
blob_key = files.blobstore.get_blob_key(file_name) 
```

但我不知道如何做第二部分。到目前为止我已经尝试过

1.  `ffile = files.open(files.blobstore.get_file_name(blob_key), 'r')`

2.  `from google.appengine.ext import blobstore`

    ```
    ffile = blobstore.BlobReader(blob_key) 
    ```

3.  `from google.appengine.ext import blobstore`

    ```
    ffile = blobstore.BlobInfo.open(blobstore.BlobInfo(blob_key)) 
    ```

所有这些都`False`为`isinstance(ffile, file)`.

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:43:33.987

`ffile = blobstore.BlobReader(blob_key)`作品。但是，返回的对象只有一个*类似文件的*接口；它不扩展文件类。因此，isinstance 测试不起作用。尝试类似的东西`if ffile and "read" in dir( ffile )`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:23:15.527

从 blobstore 读取 file_data ：

```
blob_key = .....                                        # is what you have
file_name = blobstore.BlobInfo.get(blob_key).filename   # the name of the file (image) to send 
blob_reader = blobstore.BlobReader(blob_key)
file_data = blob_reader.read()                          # and the file data with the image 
```

但是您也可以使用 blob_key 发送一个 url 并提供该 url。对于图像，您不必自己提供图像，因为您可以发布 get_serving_url，利用具有动态缩放功能的 Google 高性能图像服务 API。以这种方式提供图像也非常便宜。

以下是此类 url 的示例：

[https://lh6.ggpht.com/lOghqU2JrYk8M-Aoio8WjMM6mstgZcTP0VzJk79HteVLhnwZy0kqbgVGQZYP8YsoqVNzsu0EBysX16qMJe7H2BsOAr4j=s70](https://lh6.ggpht.com/lOghqU2JrYk8M-Aoio8WjMM6mstgZcTP0VzJk79HteVLhnwZy0kqbgVGQZYP8YsoqVNzsu0EBysX16qMJe7H2BsOAr4j=s70)

# java - 如何从Java中的逗号分隔字符串中获取数组

> ID：14233241
> 
> 赞同：-1
> 
> 时间：2013-01-09T10:32:52.953
> 
> 标签：java

我有一个字符串：

```
String accounts = "Account 1, Account 2, Account 3" 
```

我想转换成一个数组，即类似于 ["Account 1"、"Account 2"、"Account 3"] 的东西。

在 Java 中执行此操作的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T10:33:58.573

使用[String.split(regex)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)：

```
String accounts = "Account 1, Account 2, Account 3"
String[] arr = accounts.split(","); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T10:36:52.250

```
String accounts = "Account 1, Account 2, Account 3";
String[] parts = accounts.split(", ");
String part1 = parts[0]; // Account 1
String part2 = parts[1]; // Account 2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T10:34:03.363

使用拆分：`accounts.split(",")`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T10:34:02.843

使用`String#split`-

```
String accounts = "Account 1, Account 2, Account 3";
String[] accs = accounts.split(","); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T10:35:35.927

您可以使用内置的 String 方法：

```
String[] result = accounts.split(","); 
```

要摆脱空格，请在拆分参数中添加空格：

```
String[] result = accounts.split(", "); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-09T10:35:53.877

这将删除标记之间的前导空白。

```
String accounts = "Account 1, Account 2, Account 3";
String[] tokens = accounts.split(", "); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-09T10:34:23.067

干得好

编辑：

```
String str = "st1-st2-st3";
String delimiter = "-";
String[] temp;
temp = str.split(delimiter); 
```

欲了解更多信息： http: [//www.wikihow.com/Split-String-in-Java](http://www.wikihow.com/Split-String-in-Java)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-09T10:34:57.043

你可以这样做：

```
String accounts = "Account 1, Account 2, Account 3";
String[] array = accounts.split(","); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-09T10:36:57.103

```
accounts.split("\\,"); 
```

您可以在[此页面上找到的任何示例](http://www.rgagnon.com/javadetails/java-0438.html)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-09T10:50:37.300

这将处理（即删除）逗号之前或之后的任意数量的空格，因此结果数组中每个元素的文本之前或之后将没有空格。

```
accounts.split(" *, *"); 
```

# google-chrome - 防止用户在chrome中退出全屏模式

> ID：14233249
> 
> 赞同：3
> 
> 时间：2013-01-09T10:33:06.967
> 
> 标签：google-chrome

我在为触摸屏开发交互式网站时遇到了这个问题。屏幕将放置在公共区域。所以它需要限制用户在chrome中退出全屏模式并转到计算机的其他应用程序。如何限制人们在 chrome 中退出全屏模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:37:00.780

我设法使用 -kiosk 模式解决了这个问题。幸运的是，就我而言，计算机上没有连接任何鼠标或键盘。

# android - 所有活动已关闭，剩余 5 个线程

> ID：14233250
> 
> 赞同：1
> 
> 时间：2013-01-09T10:33:07.950
> 
> 标签：android, multithreading

尽管知道我不应该有关闭应用程序按钮，但我仍然这样做。完成所有活动后，我调用 finish() 方法，它们调用析构函数和所有内容。用户的行为也是正确的。但我想知道为什么还有 5 个开放线程：

```
Thread [<1> main] (Running) 
Thread [<12> Binder_3] (Running)    
Thread [<11> android.hardware.SystemSensorManager$SensorThread] (Running)   
Thread [<10> Binder_2] (Running)    
Thread [<9> Binder_1] (Running) 
```

它是由泄漏引起的还是正常的 Android 行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:40:08.470

**main**和**Binder_n**线程是标准的 android 应用程序线程，它们会被系统杀死。这不是你的问题（实际上这根本不是问题）。

我想你创建**了 SensorThread** - 你应该停止它。如果您在`onCreate`活动中启动它 - 您应该在`onDestroy`.

# javascript - 为什么我不能在打开开发者工具的情况下直接在 IE9 上绑定 console.log？

> ID：14233258
> 
> 赞同：7
> 
> 时间：2013-01-09T10:33:22.160
> 
> 标签：javascript, internet-explorer, console, function-binding

在 IE9 中打开开发人员工具后，此代码有效：

```
var log = Function.prototype.bind(console.log, console); 
```

但是如果我输入

```
console.log(console, console.log);
var log = console.log.bind(console); 
```

然后我得到这个：

![SCRIPT438：对象不支持属性或方法“绑定”](../Images/6d65e01aa7211a0584796f9764f90e56.png)

为什么 ？

这是已知的 IE 错误还是正常行为？

它会影响其他功能吗（我对它`window.alert`也是原生的没有问题）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T10:55:27.687

正如相关答案所说，这仅仅是因为 IE 中对象的`log`函数`console`不继承自`Function`. 它是一个宿主对象，它使用 IE 认为合适的任何规则。

但它是一个函数式的。这就是为什么使用`Function.prototype.bind`作品，就像`Array.prototype.forEach`在类数组对象上使用作品一样。（提示：NodeLists 和 HTMLCollections。）

这本身不是一个错误，因为没有关于该`console`对象的规范。[DOM 生活标准](http://dom.spec.whatwg.org/)甚至没有提到它。所以每个浏览器都以它想要的方式实现这个对象。

这确实意味着该`window.alert`功能会遇到同样的问题。我们很幸运，它在浏览器中运行良好。

那就是IE。处理它。尽管 IE9 比 IE8 好得多，但它仍然比其他现代浏览器差很多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T10:59:11.957

console 是 DOM 的扩展，它不是 ECMAScript 的一部分。由于它是一个宿主对象，因此不需要从“对象”继承。在 IE (9 & 8) 中，控制台仅在开发人员工具栏打开时才会显示。

```
var log = Function.prototype.bind.call(console.log, console); 
log(60+90);//150 
```

# jakarta-ee - Struts2 JasperReport 插件使用多个表格导出到 XLS

> ID：14233259
> 
> 赞同：0
> 
> 时间：2013-01-09T10:33:25.407
> 
> 标签：jakarta-ee, web, struts2, jasper-reports, xls

我正在使用 struts2 jasperreports 插件，它运行良好。问题是我想传递 exportParameters 而我不知道如何通过插件来做到这一点。我做的：

```
@Result(
   name = "XLS", value = "/<package>/Informe.jasper", 
   type = JasperReportsResult.class, 
   params = {
      "dataSource", "listaResultados", 
      "format", "XLS",      
      "contentDisposition", "attachment;filename=\"Informe.xls\"", 
      "exportParameters", "exportParametersJR" 
   }
)

@SuppressWarnings("unchecked")
    public Map<String, String> getExportParametersJR(){
        JRXlsExporter jrXlsExporter = new JRXlsExporter();
        JrXlsExporter.setParameter(
               JRXlsExporterParameter.IS_ONE_PAGE_PER_SHEET,Boolean.TRUE);
        return jrXlsExporter.getParameters();       
    } 
```

我试过了，我得到了正确的数据源，但是当我添加这一行时

```
"exportParameters", "exportParametersJR" 
```

它向我展示了这个例外：

> java.lang.NullPointerException 在 org.apache.struts2.views.jasperreports.JasperReportsResult.doExecute(JasperReportsResult.java:229) 在 org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:178) 在 com.opensymphony。 xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:348) at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:253) at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50) at org .apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:504) 在 org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:419) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain .java:202) 在 org.apache.catalina.core。ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178) at org .apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve .java:107) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869) 在 org.apache.coyote。 http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664) 在 org.apache.tomcat.util.net。PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527) 在 org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80) 在 org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool. java:684) 在 java.lang.Thread.run(Unknown Source)

谁能帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:55:27.843

感谢[Andrea Ligios](https://stackoverflow.com/users/1654265/andrea-ligios)评论的帖子（[将参数传递给 jaspereport](https://stackoverflow.com/questions/8254394/struts2-jasperreports-passing-export-parameters)），我看到我的项目使用的是不支持此功能的旧版本。

项目使用struts2-jasperreports-plugin-2.0.11.1.jar，所以解决方案是使用iReport 3来定义属性，这样：

1.  添加`net.sf.jasperreports.export.xls.*`导入（编辑/报告导入指令/新导入）
    ![在此处输入图像描述](../Images/053a0b6a5a32407f01c93e1dc2e45999.png)

2.  添加 net.sf.jasperreports.export.xls.one.page.per.sheet 属性并在报表自定义属性中将 ir 设置为 true（编辑/自定义属性/新建） ![在此处输入图像描述](../Images/5c8b14c7c38582ffe64aa1f6ce197813.png)

3.  节省
4.  编译
5.  将 .jasper 文件替换为项目

通过这种方式，我得到了项目按我想要的方式工作。

# java - 从托管 bean 更改呈现的属性

> ID：14233260
> 
> 赞同：0
> 
> 时间：2013-01-09T10:33:36.937
> 
> 标签：java, jsf-2, managed-bean

我正在尝试使用 JSF，场景如下：

我有一个会话范围的托管 bean

```
@ManagedBean(name = "rand")
@SessionScoped 
```

我已经声明了以下内容（除其他外）：

```
private UIOutput uiOutput;(plus getter and setter) 
```

在我的 facelets 页面中，我有

```
<h:outputLabel for="userGuess"  binding="#{rand.uiOutput}" 
value="#{rand.listSize}" rendered="false"/> 
```

页面上有一个按钮，以及按钮的操作方法以及我拥有的其他内容

```
this.uiOutput.setRendered(true); 
```

但它似乎不起作用，元素不会被渲染。

如果以渲染方式启动它并更改属性（将其设置为 true 或 false），则它可以工作。我怀疑这与以未渲染开始的元素未绑定到我在托管 bean 中的 uiOutput 对象这一事实有关。我怎样才能让它在这种情况下工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:24:44.353

我改变了一件事，现在它正在工作，我改变了按下按钮时运行的方法的返回类型，它返回一个字符串值，导航到同一页面，它现在返回 null 并且 JSF 不会生成新的view ，而是呈现相同的视图，并且一切正常。

我猜因为每次我将渲染值设置为 true 或 false 时都会渲染一个新视图，因为每次在新视图上将组件设置为 render="false" 都无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:01:28.327

如果您使用按钮进行 ajax 调用，则 javascript 无法在 dom 树中找到您的元素来呈现它，因为它首先不存在。

这里有一个类似的问题，可以更好地解释这种情况。

[在jsf中使用ajax渲染组件](https://stackoverflow.com/questions/8487422/render-component-with-ajax-in-jsf)

# windows-phone-7 - 在 Windows Phone 中调整图像大小而不会丢失其质量

> ID：14233261
> 
> 赞同：3
> 
> 时间：2013-01-09T10:33:41.217
> 
> 标签：windows-phone-7, windows-phone-8

如何在 Windows Phone 中调整图像大小而不损失其质量。我尝试了以下给定的方法，但图像的质量下降了相当大的幅度。任何人都可以更新更好的方法来调整我的图像大小。

```
 btmMap = new WriteableBitmap(biInput);
            var source = WriteableBitmapContextExtensions.GetBitmapContext(btmMap);
            btmMap = WriteableBitmapExtensions.Resize(btmMap, (int)imgWidth, (int)imgHeight,     WriteableBitmapExtensions.Interpolation.Bilinear); 
```

我也试过这个方法，但结果是一样的：

```
 var wbOutput = PictureDecoder.DecodeJpeg(biInput, (int)imgWidth, (int)imgHeight);
                wbOutput.SaveJpeg(ms, wbOutput.PixelWidth, wbOutput.PixelHeight, 0, 100);
                ms.Seek(0, SeekOrigin.Begin);
                bmp.SetSource(ms);
                ms.FlushAsync(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T21:16:31.540

从这里下载、参考和使用[6.5 KB DLL](http://bicubic.codeplex.com/)进行双三次调整。它比 WriteableBitmapExtensions 中的双线性方法产生更好的结果。

PS 好问题！我刚刚更新了我的应用程序以使用更好的调整大小方法为我的动态磁贴生成图像。

# iphone - 为 iPad 构建应用程序，存在于 iPhone 中

> ID：14233263
> 
> 赞同：-2
> 
> 时间：2013-01-09T10:33:53.887
> 
> 标签：iphone, ipad, class, screen, core-plot

我用 iPhone 的 CorePlot 框架构建了一个应用程序。我用 3 个不同的图表实现了 3 个类，每个类都有自己的屏幕。现在我想为 iPad 构建相同的应用程序，这是我在此设备上的第一个应用程序。

在 iPad 上，我想在同一个屏幕上显示所有 3 个图表，但我想保持模块化。我该怎么做呢？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:52:48.910

所以，基本上你在 iPhone 的标签栏控制器中显示了三个独立的控制器。

在视图中一起显示 3 个图表并保持设计模块化的方法是：

1.  创建一个包含控制器；

2.  在中`viewDidLoad`，创建您的 3 个图形控制器，然后执行以下操作：

    ```
    [self.view addSubview:graphController1.view];
    [self.view addSubview:graphController2.view];
    [self.view addSubview:graphController2.view]; 
    ```

3.  将这些消息传递给 3 个子控制器`viewWillAppear`；`viewDidAppear`

4.  对于自转方法，执行与 3\. 中相同的操作。

这种方法适用于所有 iOS 版本。

如果您的目标是 iOS>5，则可以使用[UIViewController Containment](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)，您可以在其中将 3 个控制器定义为主控制器的子控制器并随意添加/删除它们。

# qt - 使用 Qt 和 QtCreator 开发多显示器应用程序

> ID：14233273
> 
> 赞同：1
> 
> 时间：2013-01-09T10:34:18.423
> 
> 标签：qt, user-interface, qt-creator, multiple-monitors

我正在使用 QtCreator 开发一个 Qt 应用程序。该应用程序需要在多个监视器上显示（如果可用）。

对显示的 GUI 要求本质上是：

1.  如果有多个监视器，请使用它们 - 即显示/记住跨监视器的窗口位置
2.  如果只有一台显示器，只需在该显示器上显示所有内容

我的假设是机器的显卡将把多台显示器表示成一个“虚拟”桌面，然后我的应用程序可以以不可知的方式“写入”该桌面。

我的问题本质上是这样的：

在开发可以使用多个窗口的应用程序时，我需要做些什么特别的事情（例如，在设计我的小部件等时使用特殊类等）

*   或者 -

我是按常规开发，把所有的显示器管理交给显卡吗？

是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:39:00.210

我认为 QDesktopWidget 具有您需要的所有功能。

来自 Qt 文档：

> Qt 提供的小部件使用此类将工具提示、菜单和对话框放置在其父或应用小部件的正确屏幕上。应用程序可以使用此类来获取可用于保存窗口位置的信息，或将子窗口小部件和对话框放置在一个特定的屏幕上。

# java - 修改 JTable 以适应屏幕

> ID：14233282
> 
> 赞同：3
> 
> 时间：2013-01-09T10:34:28.553
> 
> 标签：java, swing, jtable, layout-manager

我创建了一个仅用于锻炼目的的应用程序，其中包含一个`JTable`显示来自我的数据库的数据。

我的问题是表格显示在屏幕上的一半面板中。我已经尝试了一切来扩展列，但没有成功。谁能告诉我如何修改表格？

这是创建表的代码：

```
 public void createTable() {
    JTable table = new JTable();
    DefaultTableModel tableModel = new DefaultTableModel(new Object[][]{},new String[]{"To do","Date added"});
    table.setSize(450, 600);
    table.setModel(tableModel);
    for(int i = 0; i < model.getId().size(); i++) {
        tableModel.addRow(new Object[]{model.getItem().get(i), model.getDate().get(i)});
    }
    add(table.getTableHeader());
    add(table);
} 
```

这是它现在的样子：

![在此处输入图像描述](../Images/8701c4c5801e5dcb82b003f11e515e41.png)

另外我想问一下 table.getTableHeader() 因为如果我不添加它就不会显示，因为它是表格的一部分。这正常吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T10:48:57.920

*   `JPanel`已经`FlowLayout`在 API 中实现，然后你的`JPanel`布局`JComponents`正确，你的逻辑（添加`JTableHeader`，添加`JTable`）

*   将其更改为and`BorderLayout`放入/和`JTableHeader``NORTH``SOUTH``JTable``CENTER`

*   使用`JScrollPane`for `JTables view`，其他一切都在为非常丑陋的方式 而烦恼`LayoutManager`和计算，`PreferredSize`

# c# - 如何创建自定义控件工厂方法

> ID：14233283
> 
> 赞同：1
> 
> 时间：2013-01-09T10:34:30.180
> 
> 标签：c#, factory

我有一个可换肤的控件库，它从外部 xml 文件加载控件设置/属性。这些`Xml`类在一个单独的项目中，因为它们将在皮肤编辑器应用程序中使用，现在的问题是，控件在构造函数中接受一个 xml 对象来构建，`Control`但我需要找到一种创建每个控件的好方法。

xml类示例：

```
[Serializable]
[XmlInclude(typeof(XmlButton))]
[XmlInclude(typeof(XmlGroup))]
[XmlType(TypeName="Control")]
public class XmlControl
{
    [DefaultValue(0)]
    public int Width { get; set; }

    [DefaultValue(0)]
    public int Height { get; set; }
 ... 
```

和每个控件类型的派生类型

```
[Serializable]
[XmlType(TypeName = "Button")]
public class XmlButton : XmlControl
{
    public string Label { get; set; }
} 
```

控制类

```
public class GUIControl : GUI3DBase
{
    public GUIControl(XmlControl skinXml)
    {
        SkinXml = skinXml;
...

public class GUIButton : GUIControl, IActionControl
{
    public GUIButton(XmlControl skinXml) : base(skinXml)
    {
    }
... 
```

现在这是我需要帮助的地方，目前我有一个方法可以根据传入的 xml 对象创建控件。

```
 public static GUIControl CreateControl<T>(T skinXml) where T : XmlControl
    {
        if (skinXml is XmlButton)
        {
            return new GUIButton(skinXml);
        }
        else if  (skinXml is XmlGroup)
        {
            return new GUIGroup(skinXml);
        }
        .... 
```

我有大约 30 个控件，并且“if 阶梯”正在快速增长，我觉得我缺少一种创建这些控件的简单方法，而无需检查 xml 对象类型然后创建相应的控件类型。

我不能`Type`在 Xml 对象中添加属性，因为这会创建循环依赖。

任何对良好工厂方法或新结构布局的帮助都会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:46:47.140

也许`IDictionary<Type, Func<XmlControl, GUIControl>>`会有所帮助。像这样的东西：

```
private static Dictionary<Type, Func<XmlControl, GUIControl>> _dictionary = new Dictionary<Type, Func<XmlControl, GUIControl>>()
                                                                                    {
                                                                                        {typeof (XmlControlImpl), x => new GUIControl(x)},
                                                                                        {typeof (XmlGroup), x => new GUIGroup(x)},
                                                                                    }; 

public static GUIControl CreateControl<T>(T skinXml) where T : XmlControl
{
    Func<XmlControl, GUIControl> builder;
    if (!_dictionary.TryGetValue(typeof(T), out builder))
        throw new KeyNotFoundException("");

    return builder(skinXml);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:08:03.733

好的，我已经找到了一种方法，可以通过您的所有想法和一点反思来做到这一点，不确定它是否是最好的方法，但它工作得很好，并且添加一个新的可换肤控件只需要一个新的 xml 对象和控件类上的一个属性。

属性类

```
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false, Inherited = false)]
public class XmlControlTypeAttribute : Attribute
{
    protected Type xmlType;

    public XmlControlTypeAttribute(Type xmlType)
    {
        this.xmlType = xmlType;
    }

    public Type XmlType
    {
        get { return this.xmlType; }
    }
} 
```

控制：

```
[XmlControlType(typeof(XmlButton))]
public class GUIButton : GUIControl, IActionControl
{
    public GUIButton(XmlControl skinXml) : base(skinXml)
    {
    }
    ....
} 
```

工厂方法：

```
public static GUIControl CreateControl2<T>(T skinXml) where T : XmlControl
{
    var controlType = Assembly.GetExecutingAssembly().DefinedTypes
        .Where(t => t.BaseType == typeof(GUIControl) && t.GetCustomAttribute<XmlControlTypeAttribute>().XmlType.Equals(typeof(T)))
        .FirstOrDefault();

    return (GUIControl)Activator.CreateInstance(controlType, new[] { skinXml }, null);
} 
```

感谢帮助堆的所有想法，我将把这个问题留得更久一些，因为有些人有比这更好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T10:49:05.373

我很想将抽象方法添加到`XmlControl`：

```
public abstract class XmlControl
{
    [DefaultValue(0)]
    public int Width { get; set; }

    [DefaultValue(0)]
    public int Height { get; set; }

    public abstract Type ControlType(); 
```

在每个实现中覆盖它，例如：

```
public class XmlButton : XmlControl
{
    public string Label { get; set; } 

    public override Type ControlType(){ return typeof(GUIButton); }
} 
```

然后在Factory方法中使用反射构造正确的类：

```
public static GUIControl CreateControl<T>(T skinXml) where T : XmlControl
{
    return (GUIControl)Activator.CreateInstance(skinXml.ControlType(),
                                     new[]{skinXml},null);
} 
```

# c++ - cmake 获取源列表

> ID：14233285
> 
> 赞同：9
> 
> 时间：2013-01-09T10:34:40.723
> 
> 标签：c++, dependencies, cmake

我已经在 cmake 下构建了一个大项目。我正在寻找一种方法来获取源文件列表及其依赖的头文件以创建新目标（例如 Emacs 的 etags）。我试图自己找到答案，但似乎并不那么容易。

理想的灵魂应该是这样的：

```
add_executable(my_project <some list of source files and libraries defined in different directories>)
add_custom_target(tags
  COMMAND etags <list of all *.cpp and *.h files used in 'my_project' target>
  DEPENDS <list of all *.cpp and *h used in 'my_project' target>
  COMMENT "Creates source code tags for Emacs") 
```

您是否知道如何让 'tags' 目标从 'my_project' 目标导入所有依赖项，而无需重写所有目录中的所有 cmake 配置文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T10:52:57.350

使用命令`get_target_property`和属性 SOURCES 并最终使用 PUBLIC_HEADER 或 PRIVATE_HEADER？

```
get_target_property(MY_PROJECT_SOURCES my_project SOURCES) 
```

# solr - Solr：如何对以逗号分隔的键：值对的字段进行多重排序

> ID：14233288
> 
> 赞同：0
> 
> 时间：2013-01-09T10:34:47.477
> 
> 标签：solr

假设我们需要在某个整数字段（比如优先级）上按降序显示 solr 结果，我们可以轻松地应用“按优先级降序排序”。但是，如果此优先级字段是各种此类逗号分隔的 int 优先级的集合，例如 search_priority、tag_priority、xyz_priority 等。假设 solr 中每个 id 的优先级字段包含。"search_priority:100,tag_priority:200,xyz_priority:50" 那么我将如何按 tag_priority 的降序获取所有 id。

请注意，一个简单的解决方案是我们可以将 search_priority、tag_priority 和 xyz 优先级作为单独的 solr int 字段，然后我们采用 tag_priority desc。但我不希望这样，因为优先级的数量可能会增加，我们最终将手动添加这么多 solr 字段。

是否有任何有助于在逗号分隔的文本字段上排序的 solr 命令（如 multisort）？或 solr 中任何其他形式的概念都会受到高度重视

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:43:24.957

我建议使用动态字段。

例如`<dynamicField name="*_priority" type="integer" indexed="true" stored="true"/>`

*   通过这种方式，您可以处理任意数量的优先级字段。
*   这些字段将动态创建，无需定义。
*   您始终可以使用动态字段进行排序。

# zend-framework - 可以在整个应用程序中使用的 Zend_Filter_StripTags 的通用对象 zend 框架？

> ID：14233291
> 
> 赞同：0
> 
> 时间：2013-01-09T10:34:55.933
> 
> 标签：zend-framework

我正在尝试在引导程序中创建一个函数来启动 Zend_Filter_StripTags 的对象，以便我可以在整个应用程序中使用它的对象。

```
protected function _initHtmlFilter() {  
 $allowedTags = array('p','b','br','strong'); // Allowed tags 
 $allowedAttributes = array('href'); // Allowed attributes  
 $stripTags = new Zend_Filter_StripTags($allowedTags,$allowedAttributes); 
} 
```

但我无法在任何控制器中使用这个对象（$stripTags）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:47:58.633

我会为此创建一个控制器动作助手：

```
class My_Controller_Action_Helper_StripTags extends
    Zend_Controller_Action_Helper_Abstract
{
    /**
     * StripTags
     *
     * @param string $input String to strip tags from
     *
     * @return string String without tags
     */
    public function stripTags($input) 
    {
        $allowedTags = array('p','b','br','strong'); // Allowed tags 
        $allowedAttributes = array('href'); // Allowed attributes  
        $stripTags = new Zend_Filter_StripTags($allowedTags,$allowedAttributes);

        // return input without tags
        return $stripTags->filter($input);

    }
}

// example in indexAction
$noTags = $this->_helper->stripTags('<h2>TEST</h2>'); 
```

您必须在 application.ini 中添加助手的路径：

```
resources.frontController.actionhelperpaths.My_Controller_Action_Helper_ = "My/Controller/Action/Helper" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:52:31.920

您可以为此使用 zend 注册表：

```
 protected function _initHtmlFilter() {
    $allowedTags = array('p','b','br','strong'); // Allowed tags
    $allowedAttributes = array('href'); // Allowed attributes
    $stripTags = new Zend_Filter_StripTags($allowedTags,$allowedAttributes);
    Zend_Registry::set('zend_strip_tags', $stripTags);
} 
```

并且可以在任何地方访问它：

```
Zend_Registry::get('zend_strip_tags'); 
```

# mysql - cloudfountry mysql服务配置可以修改吗？

> ID：14233300
> 
> 赞同：-1
> 
> 时间：2013-01-09T10:35:11.037
> 
> 标签：mysql, cloud-foundry

我将我的应用程序（使用 mysql 服务）推送到 cloudfoundry 成功。并使用“vmc 隧道”访问 mysql 服务，并执行我的 sql 文件。但我有一个问题，mysql变量“ower_case_table_names”是默认值0。我想设置“ower_case_table_names=1”。我怎样才能做到这一点？cloudfoundry提供的mysql服务不能修改设置？

需要帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:38:47.807

“lower_case_table_names”是一个只读变量，因此不能用“SET”命令设置。它是一个服务器系统变量，在启动 mysqld 时设置。CF 用户无权更改这些系统变量。

# python - 带有python的椭圆内的偏斜高斯分布

> ID：14233301
> 
> 赞同：0
> 
> 时间：2013-01-09T10:35:12.693
> 
> 标签：python, distribution, gaussian

好的，所以过去几天我一直在努力解决这个问题，但没有取得太大进展。我想在椭圆域上生成*类似*高斯分布的二维数组（网格） 。为什么我说类似高斯？，好吧，我想要一个不对称的高斯，也就是倾斜的高斯，其中类似高斯的表面的峰值在椭圆内的某个点 x0,y0 处，椭圆周长上的值为零（或接近零……）。附图可能更好地描述了我的意思。

![椭圆域上的倾斜高斯曲面：](../Images/6123247227e936cbe0f69da2e10d8e74.png)

# android - 在android中开发以kiosk模式运行的应用程序

> ID：14233304
> 
> 赞同：11
> 
> 时间：2013-01-09T10:35:16.967
> 
> 标签：android, development-environment, kiosk-mode

如何制作我们的应用程序，它就像信息亭模式 app( `SureLock lockdown app`)。我有 LG E400 植根 android 手机 Android 2.3.6。我想开发像[Surelock](https://play.google.com/store/apps/details?id=com.gears42.surelock)这样的应用程序，我需要开发这样的应用程序。

谁能帮我自己开发这样的应用程序。

我的要求：Android 设备使用我的应用程序启动。对于这个应用程序，所有硬件按钮都被禁用（主页、返回、菜单），类似于 SureLock 应用程序。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-10-11T07:56:51.527

好的......经过几个小时的努力，我的自我并在净资产上一无所获......（不需要手机生根）

主页按钮 ::::

```
<category android:name="android.intent.category.HOME" /> 
```

处理家底...

返回键 ：：：：

```
@Override
public void onBackPressed() {
    // We doing this too stop user from exiting app, normally.
    // super.onBackPressed();
} 
```

对于长按主页按钮（最近的应用程序活动或谷歌现在）或最近的应用程序按钮...

```
@Override
protected void onPause() {
    super.onPause();

    ActivityManager activityManager = (ActivityManager) getApplicationContext()
            .getSystemService(Context.ACTIVITY_SERVICE);

    activityManager.moveTaskToFront(getTaskId(), 0);
} 
```

将需要许可...

```
<uses-permission android:name="android.permission.REORDER_TASKS" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-09T13:14:38.267

如果您的应用程序就像一个主屏幕并且您没有安装其他主屏幕（或默认检查您的应用程序），它将在启动时启动并且您将无法退出它。除非你以某种方式终止任务，但这是不可预防的。

您的应用必须使用

```
android.intent.category.HOME 
```

意图成为启动时第一个可见的应用程序。

如果你想要一些资源，你可以查看 Anderweb 的 ADW Launcher [https://github.com/AnderWeb/android_packages_apps_Launcher](https://github.com/AnderWeb/android_packages_apps_Launcher)

# c++ - POD的零初始化

> ID：14233305
> 
> 赞同：6
> 
> 时间：2013-01-09T10:35:19.653
> 
> 标签：c++, visual-c++, initialization, compiler-bug

```
struct Line
{
    Bounds          bounds_;
    Vector          origin_;
    uint32_t        begin_; 
    uint32_t        end_;   
    dist            ascent_;
    dist            descent_;
}; 
```

使用如下：

```
Line line = {};
while (!parser.done()) {
    line = Line(); // zero-initialize
    ...
} 
```

`Bounds`并且`Vector`是非 POD 类，`dist`是`int64_t`.

但是，经过优化的 VC++11 32 位发布版本似乎至少`line`在 while 循环中留下了未初始化的部分。为什么？根据[类型名称后的括号是否与新的有所不同？](https://stackoverflow.com/questions/620137/do-the-parentheses-after-the-type-name-make-a-difference-with-new/620402#620402)，它应该对它进行零初始化，对吧？

我将结构成员的值记录到文件中：

*   after `Line line = {};`: 非 POD 类型默认初始化，其他为 0。
*   after `line = Line();`：POD 类型仍然默认初始化，其他包含随机值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T11:00:34.510

您可能已经发现了一个编译器错误，尽管我似乎记得在 C++98 中初始化 POD 结构的要求并没有像描述的那样清楚。

根据 C++03，表达式`Line()`必须产生一个*值初始化的*Line 对象，在这种情况下，这意味着所有成员必须*为零初始化*（因为所有成员都是标量）。

请注意，成员之间的最终填充不必设置为任何确定的值，因此当您将 Line 对象视为内存块时，这可能会导致误报。

解决方法是为`Line`显式初始化所有成员提供默认构造函数。

# android - 滚动视图内的画廊视图不起作用。

> ID：14233310
> 
> 赞同：1
> 
> 时间：2013-01-09T10:35:46.360
> 
> 标签：android, android-gallery, android-scrollview

我在 scoll 视图中使用图库视图，但图库视图无法正常工作。

**我的自定义 GalleryView**

```
<com.divum.Adapter.CustomGallery
android:id="@+id/gallery"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:fadingEdge="none"
android:spacing="10dp" /> 
```

**适配器布局**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/top_layout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_margin="2dp"
android:orientation="vertical"
android:weightSum="100">
<TextView 
android:id="@+id/txt_title1"
android:layout_width="fill_parent"
android:layout_height="100dp"
android:padding="5dp"
android:textColor="@color/black"
android:textSize="14dp" />      
<ImageView 
android:id="@+id/image1"
android:layout_width="fill_parent"
android:layout_height="65dp"
android:layout_marginTop="2dp"
android:adjustViewBounds="true"
android:scaleType="centerCrop" 
android:layout_marginLeft="2dp" />
<ScrollView 
android:scrollHorizontally="false"
android:fadingEdge="none"
android:scrollbars="none"
android:layout_width="fill_parent"
android:layout_height="wrap_content">
<TextView 
android:id="@+id/txt_details"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_gravity="left"
android:padding="5dp"
android:textColor="@color/black"
android:textSize="14dp" />      
</ScrollView>
</LinearLayout> 
```

**我的问题**是滚动视图（垂直）工作正常。画廊视图（水平）滑动不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:41:26.977

这是众所周知的错误：`ScrollView`拦截水平和垂直触摸事件。您可以使用此自定义滚动视图而不是标准滚动视图。此拦截仅垂直触及：

```
public class VerticalScrollView extends ScrollView {

private float xDistance, yDistance, lastX, lastY;

public VerticalScrollView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    switch (ev.getAction()) {
    case MotionEvent.ACTION_DOWN:
        xDistance = yDistance = 0f;
        lastX = ev.getX();
        lastY = ev.getY();
        break;
    case MotionEvent.ACTION_MOVE:
        final float curX = ev.getX();
        final float curY = ev.getY();
        xDistance += Math.abs(curX - lastX);
        yDistance += Math.abs(curY - lastY);
        lastX = curX;
        lastY = curY;
        if (xDistance > yDistance)
            return false;
    }

    return super.onInterceptTouchEvent(ev);
}

} 
```

# java - JBoss 仅从 EJB 容器开始

> ID：14233311
> 
> 赞同：0
> 
> 时间：2013-01-09T10:35:48.793
> 
> 标签：java, jakarta-ee, ejb, jboss7.x

我目前正在编写一个使用 JBoss6.x 作为应用程序服务器的 Web 应用程序，为了负载共享，我决定编写一些 EJB，它们可以在与 Jboss 上的 Web 应用程序相同的机器上本地运行，也可以在单独的机器上运行将远程连接的机器将在其上运行 Jboss。

现在这里的问题是，我只需要 1 个 JBoss 服务器来为 Web 应用程序提供服务，所有其他有问题的 Jboss 应该只使用 EJB 容器运行。是否可以只运行 EJB 容器和命名服务，以便我可以远程连接到它们？非常感谢有关如何执行此操作的指针或特定链接。

# javascript - “this”和对象名的区别

> ID：14233313
> 
> 赞同：1
> 
> 时间：2013-01-09T10:35:55.190
> 
> 标签：javascript, this

2个代码片段之间有区别吗？

由于`foo`是 的成员函数`obj`，`this`因此将引用`obj`自身（方法调用模式）。

**1.**

```
var obj = {};
obj.prop = some_property;
obj.foo = function() {
  do_something_with(obj.prop);
}; 
```

**2.**

```
var obj = {};
obj.prop = some_property;
obj.foo = function() {
  do_something_with(this.prop);
}; 
```

我正在处理的一个应用程序在我使用方法**2**时不断崩溃。

代码类似于：

```
obj = {};
obj.listener = {
  eventprocess : function(param) {
    //some code
  }
};
obj.init = function() {
  this.a = library_func();
  this.a.add_listener(this.listener);
}; 
```

当我使用方法**1**时它起作用了。

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:44:00.620

由于`obj`and的解析`this`被推迟到函数的执行，它的结果可能会根据定义和调用之间的`this`or/and是否发生变化而有所不同。`obj`

例如，给定两个相同的对象，除了一个用途`this`和另一个用途`obj`在函数中`foo`：

```
var objA = {};
objA.prop = "test";
objA.foo = function() {
  alert(this.prop);
};

var objB = {};
objB.prop = "test";
objB.foo = function() {
  alert(objB.prop);
}; 
```

...我们将在这里看到不同的行为：

```
var anotherObject = {
  objAFoo: objA.foo,
  objBFoo: objB.foo
};

anotherObject.objAFoo(); // "undefined";
anotherObject.objBFoo(); // "test"; 
```

[http://jsfiddle.net/3D6xY/](http://jsfiddle.net/3D6xY/)

请注意，您可以通过设置`this`using `call()`or的值来规范此行为`apply()`，如注释中所指出的：

```
anotherObject.objAFoo.call(objA); // "test"; 
```

[http://jsfiddle.net/3D6xY/1/](http://jsfiddle.net/3D6xY/1/)

但是，还请注意，在此处`this`已绑定使用[`bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)或[`jQuery.proxy()`](http://api.jquery.com/jQuery.proxy)可能会伤害您的情况。

# android - 如何移动放置在 android 中其他图像视图上的图像视图？

> ID：14233316
> 
> 赞同：1
> 
> 时间：2013-01-09T10:36:09.287
> 
> 标签：android

我有 1 个图像视图作为背景，它是从小缩略图库中选择的，我在运行时在其上放置了第二个图像视图，如何将它移动到现有图像视图的任何位置并将其保存在一起？

# frameworks - 对我找不到好的库、框架或引擎感到沮丧——除了 SDL 之外还有什么建议吗？

> ID：14233317
> 
> 赞同：1
> 
> 时间：2013-01-09T10:36:10.807
> 
> 标签：frameworks, 2d, libraries

在过去的几年里，我一直在开发一款 2D 视频游戏，它很可能属于单人角色扮演游戏的范畴，其发布后的目标是添加多人游戏。我的目标一直很现实，试图在任何太严肃的事情之前取得小部分进展。

我的 2D 游戏需要大量资产（艺术品；主要是图像，有些非常大）。虽然过去几年的大部分时间都在从事美术工作，但在过去的一年里，我一直在提高我的编程技能，学习游戏工程，并用各种语言和框架/引擎构建小游戏。在使用不同的框架/引擎进行了大量工作之后，我意识到我需要（或至少想要）尽可能地压缩最后一点性能。我的游戏很可能最多占用 1-2GB 的内存，至少需要 4-6GB 的硬盘空间。随着内容的扩展，我希望它会变得相当大，至少在 HDD 上是这样。这就是为什么我非常遗憾地不相信 HTML5 已经为我的游戏做好了准备。否则我会选择它，购买特定（高度评价）的书籍，然后立即开始工作。

我从 XNA Game Studio 开始我的项目主要有两个原因：XNA GPA 教程中的大量教程让我更容易开始，以及除了我的主要目标 Windows（移植到 XBOX）之外，还能够移植到辅助平台。经过一些开发后不久，我遇到了一些关于框架、内容管道及其（糟糕）压缩成 XNA（糟糕）.xnb 格式的问题，以及对 XBOX Live Arcade 游戏的严重限制及其大小限制的理解。XNA GPA 教程很好，但我意识到它们并没有什么特别之处，我需要使用另一个框架来构建我的游戏。

SDL 的表现令人惊叹，因此我开始着手开发我的游戏。进展非常好，我没有遇到任何问题。但是，对于 SDL 的宣传（谈论）方式，我假设它默认使用 OPEN GL，而不是软件渲染。我实现了一些 OPENGL，但在网上看到它的 open GL 实现有点粗糙，对于那些不介意它更高级别的人来说，SFML 是一个更好的引擎。

我去了SFML！几天后，它直接进入了垃圾箱。阅读有关渲染的英特尔图形问题，由于无法修复的 ATI 故障而不得不丢弃 1.6，然后通过谷歌搜索找到适用于 mingw 4.7.1 的 2.0 的自定义夜间构建，并了解到我不是唯一持怀疑态度的人SFML 的整体质量，以及从 1.6 到 2.0 的直观代码的一些不合理变化，我只是沮丧地想放弃。

所以我回到了 SDL，开发的很少。不是我想用SDL，而是我找不到比SDL更好的适合我的游戏的框架。我爱上了 HTML5，然后对 Isogenic Engine (HTML5) 非常感兴趣，但我严重怀疑 HTML5 是否能够处理我的大型（和众多）精灵表和重资产 2D 游戏。

可移植性对我来说很重要，但不是必需的。我想我不妨开始为 Windows 编写我的游戏，然后如果我愿意，一旦完成，然后将其移植到其他地方。我收到的最好的建议是，“你使用什么并不重要。只要开始，然后去做。拥有一个完整的游戏比拥有一个不完整的高性能软件更重要。”

但是，我听说很多人说，如果我要选择一个比我必须实现的更高级别处理网络的库/框架/引擎，它将解决很多令人头疼的问题和一些额外的繁重工作使用 SDL。

我已经研究游戏引擎多年了，所以我真的在寻找令人信服的理由来选择[你的建议]，而不是简单的“我没用过，但是......”

我想被说服远离 SDL 并进入更高的水平，但我很难找到选择不同的理由。维基百科的列表中有数百个游戏引擎，还有更多没有列出——但是整理谷壳很累，尤其是当我已经尝试了这么多并且对结果感到非常失望的时候。

将我的游戏想象为 Baldurs Gate 2、Sanitarium、Diablo 2 或 Ultima Online 的高分辨率图像版本。不是在游戏玩法中，但事实上它完全是 2D 图像，这导致了艺术风格、大量内存使用、大量 HDD 空间以及许多非常小的精灵中的一些相当大的精灵表/图像序列（例如龙）工作表（8 个方向的 15 个动画中的人类角色的总 HDD 空间为 7MB，工作表的内存使用量低于 30MB）。

另外，感谢您在我征求详细建议时让我发泄。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:22:07.593

我和你有同样的问题。我真的很想找到合适的框架。我尝试了很多，我想我找到了。它是 Polycode [http://polycode.org/](http://polycode.org/) [http://polycode.tumblr.com/](http://polycode.tumblr.com/)

但这还没有完成（IDE，库可用），开发人员说要到一月底。但我开始开发自己的，以防 Polycode 让我失望。

# linux - 来自 ISO 映像的 Linux 内核版本

> ID：14233320
> 
> 赞同：4
> 
> 时间：2013-01-09T10:36:33.740
> 
> 标签：linux, linux-kernel

使用`uname`命令和不同的选项，我可以在机器上安装内核版本。

假设我想从 ISO 映像中找出内核版本，只需挂载它（无需安装）。如何在不安装的情况下从 ISO 中找到完整的内核版本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T10:41:02.247

你可以使用命令`file`。

```
file /mnt/boot/vmlinuz-x.y.z 
```

这将生成这样的输出

```
/boot/vmlinuz-3.6.10-2.fc17.x86_64: Linux kernel x86 boot executable bzImage, version 3.6.10-2.fc17.x86_64 (mockbuild@) #1 SMP Tue Dec 11 18:07:34 UT, RO-rootFS, swap_dev 0x4, Normal VGA 
```

注意：Ubuntu 内核 =`casper/vmlinuz`

# model-view-controller - 模型视图控制器，每个词代表什么

> ID：14233321
> 
> 赞同：3
> 
> 时间：2013-01-09T10:36:41.177
> 
> 标签：model-view-controller

我已经搜索过那个答案，但看起来每个人对此都有不同的理解：（与 3 层/3 层相比）

> "
> 
> 模型 - 业务逻辑
> 
> 视图 - 表示逻辑
> 
> 控制器 - 改变模型和视图的状态（基于使用输入）
> 
> "

其他人写道：

> " 视图 = 前端（表示逻辑）
> 
> 模型 = 后端（数据访问层？）
> 
> 控制器 = 前端和后端之间的粘合（中间层？业务逻辑）“

如果我理解正确的话：

模型——是业务逻辑层吗？

视图 - 是表示层\层吗？

控制器 - ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:28:24.430

答案并不像看起来那么简单，因为 MVC 在不同的上下文中意味着不同的东西。

**经典 MVC（Smalltalk、C++、Java）**

![经典 MVC](../Images/d94a3f63c591d0c1254dba7c1f376eb6.png)

*   模型包含数据
*   查看显示数据
*   控制器更新数据并处理用户交互

**Web 应用程序中的 MVC**

![Web 应用程序中的 MVC](../Images/21fe9947a22b742d7276f46699530ae4.png)

*   View 是渲染的 HTML
*   控制器是渲染器/请求处理器
*   模型保存数据并由渲染器/请求处理器使用

**ASP.Net MVC 中的 MVC**

![ASP.Net MVC 中的 MVC](../Images/e305bfd9a0a84ed55579a8e4478d2ace.png)

*   View 是渲染的 HTML
*   ASP.Net 堆栈和 MVC 堆栈处理请求和呈现
*   ASP.Net MVC View 是渲染 HTML 的渲染指令
*   ASP.Net MVC 控制器是从堆栈接收请求并使用 ASP.Net MVC 视图生成呈现的 HTML 页面的软件组件。
*   模型保存数据并由 ASP.Net MVC 控制器（也负责创建它，例如通过使用服务或实体框架）和 ASP.Net MVC 视图使用。

有关 MVC (3) 管道的完整视图，请参阅[此文档](https://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CCoQFjAB&url=http://www.simple-talk.com/content/file.ashx?file=6068&ei=92HtUKvNMsbGtAbIg4H4DQ&usg=AFQjCNHeK8ZRa6raRBaPw4tL7qYvtEpVfg&sig2=mBcKaJ4XaaU6bd6FkvNFfQ&bvm=bv.1357316858,d.Yms)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T11:06:14.600

**查看**= 仅输出和输出逻辑

**模型**= 数据 任何相关的数据都应该来自模型

**Controller** = 连接 View 和 Model 并且可以做应用程序逻辑的东西

业务逻辑 = 进一步的业务逻辑，通常打包成类。

用户说给我 acme.com/home 控制器说，我知道如何处理 /home 哦，是的，我有一个 homeController homeController 说嘿，我会从模型中获取一些东西，或者从类中调用一些业务逻辑然后放它在某个视图可以访问它的地方（viewbag） 这个位有时被称为 applicationLogic homeController 然后说好的 我已经完成了所有这些现在我很可能会给你一个视图 View 在那里打招呼，并且可以从 viewbag 输出任何东西控制器刚刚为我们准备

请记住，控制器控制着一切，视图与任何东西都没有对话，这是一个简单的正确图表，许多图表是不同的，您可以说它可以解释，但视图与模型对话的图表不是 MVC imo。

MVC![一个简单的 MVC 图](../Images/4080e04a2c491d096db081f75f31fead.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T10:42:53.173

我不确定另一种意见是否会有所帮助，因为您听起来好像已经很困惑。

但我认为 MVC 实际上是一个*旧*概念，可以追溯到 Smalltalk 时代，需要一些修改。

更现代的方法是考虑层次：

```
View --> Controller --> Service --> Persistence 
```

该`View`层是向最终用户显示的 HTML 或移动视图页面。

`Controllers`紧密耦合到`View`. 如果您更改`View`，很可能您也必须更改`Controller`。它负责侦听来自`View`、验证和绑定输入参数的请求，将它们传递给`Services`用例，确定适当的 next `View`，并将响应序列化回最终用户。

映射到用`Service`例并完成工作单元。它负责交易。它独立于`View`; 即使`Views`发生变化，它也可能会继续存在。它是面向服务架构的基础。它应该从一个接口开始，它允许您使用您喜欢的任何技术部署它：EJB、SOAP 或 REST Web 服务、XML-RPC 等。

`Persistence`对其他人隐藏数据库。它处理所有 CRUD 操作。

`Model`在所有层之间浮动。这些是描述您正在解决的问题的对象（例如，银行业务的帐户、客户等）。

“图表”中的箭头是有意义的。它模仿了对象在这种安排中的包依赖关系。 `Persistence`不知道`Service`；`Service`不知道`Controller`。

这些应该是基于接口的，因此您可以在不影响客户端的情况下更改实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T10:41:58.503

我倾向于这样看待它：

模型：蓝图，主要是我的对象类

视图：用户将如何看到它，我如何呈现它

管制员：任何需要进行的计算、更改……。它充当视图和模型之间的一个步骤。它操纵数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T10:51:00.100

它们是分层依赖的：

模型 - 原始数据模型，带有控制器的对象提取

控制器 - 控制来自模型的数据为视图转换的方式

View - 表示层，从 Controller 中提取数据使其非常漂亮。

对于 XML，这是：

XML -> XSLT -> HTML

# android - android：如何在相对布局中居中块？

> ID：14233322
> 
> 赞同：2
> 
> 时间：2013-01-09T10:36:44.253
> 
> 标签：android, android-layout

我有一个布局，其中红色块位于黑色区域的中心，蓝色矩形需要位于白色和红色块之间。有人知道如何制作这种布局的框架吗？

![在此处输入图像描述](../Images/2560d868a0cee2097356db2396f3f9ca.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:59:17.403

您必须使用与视图相关的一些属性来实现您的目标，您必须执行以下操作：

![在此处输入图像描述](../Images/f625c5116d672d24d4b0cd8cec61744d.png)

将提到的属性应用于您的视图，您将获得结果。

有关更多信息，请参阅以下链接

[相对布局](http://android-pro.blogspot.in/2010/03/relative-layout.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:14:57.977

其他答案都没有真正回答问题，问题清楚地表明，红色框位于中心，蓝色框位于红色上方。

为了实现这一点，您需要将相对布局中的参数与 BlueBox 的参数混合，这是一个使用 TextViews 的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@id/textView2"
    android:layout_below="@id/textView1"
    android:layout_centerHorizontal="true"
    android:gravity="center_vertical"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

textView2 在 textView1 和 parentTop 之上，因此它将占据所有空间。然后你使用它自己的内部重力使 Vertical 居中，使其内容居中。

# c# - ASP.NET Html.ListBoxFor 在页面加载时始终选择所有选项

> ID：14233324
> 
> 赞同：3
> 
> 时间：2013-01-09T10:36:47.570
> 
> 标签：c#, asp.net, asp.net-mvc, razor, asp.net-mvc-4

我正在构建一个非常简单的表单来编辑对象的属性。其中一个属性是与之关联的其他对象的列表，因此我使用的是两个列表系统：左侧是当前关联对象的列表，右侧是可用对象的列表添加; 下面的添加和删除按钮将相关操作应用于相关列表中突出显示的项目。很简单。

一切正常，除了一件事：当页面加载时，两个列表中的所有项目都被选中，即使我`Selected = false`在创建用于填充列表的项目时特别设置。这意味着如果用户提交表单时没有触及列表，“当前”列表中的所有内容都会被删除，而“可用”列表中的所有内容都会被添加。由于它们是多选列表框，因此没有可供用户选择的虚拟选项，因此这个问题迫使他们始终删除至少一个当前项目并添加至少一个可用项目。即使有一个虚拟项目，它也会迫使用户去选择它，如果他们忘记了，他们的列表就会变得一团糟。

[编辑添加：]

控制器方法正在执行的操作的示例：

```
[HttpGet]
public ActionResult EditForm(int objectId)
{
    MyObject objectToEdit = _objectStore.GetObject(objectId);

    ObjectEditViewModel viewModel = new ObjectEditViewModel();
    viewModel.Object = objectToEdit;
    viewModel.AssociatedItemSelectList = objectToEdit.AssociatedItems.Select(o => new SelectListItem { Text = o.Name, Value = o.Id, Selected = false });
    viewModel.AvailableItemSelectList = _itemStore.GetAllItems().Where(o => !objectToEdit.AssociatedItems.Contains(o))
                                            .Select(o => new SelectListItem { Text = o.Name, Value = o.Id, Selected = false });

    return View(viewModel);
} 
```

...而视图只是

```
@Html.ListBoxFor(m => m.ItemsToAdd, Model.AvailableItemSelectList) 
```

和

```
@Html.ListBoxFor(m => m.ItemsToRemove, Model.AssociatedItemSelectList) 
```

在相关的地方。当页面加载时，选择列表框中的每个选项都具有以下形式：

```
<option selected="selected" value="281">Example Item</option> 
```

在创建列表和呈现页面之间如何选择项目？我该如何阻止它？~~或者，如果做不到这一点，我如何在页面加载时立即取消选择它们，以便用户看起来好像它们开始未选择？~~我有一个修复程序可以使页面看起来像它应该的那样，但我想找到这个问题的根源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T15:36:41.023

这可能是一个迟到的答复，但我认为原因与列表框与其引用的对象的绑定有关。例如，如果您要使用 ListBox 而不是 ListBoxFor 并给 ListBox 一个名称以便它不会绑定到任何东西，那么最初不会选择列表框中的项目。但是，如果您要给它起一个会导致它被绑定的名称，则将选择这些项目。我遇到了和你一样的麻烦，只是碰巧通过反复试验遇到了这个问题:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-05T18:57:47.850

我遇到了同样的问题，并意识到在我的模型属性中我将所选项目设置为全部。如果没有看到您的模型就很难知道发生了什么，但请检查您对**ItemsToAdd**和**AvailableItemSelectList**的定义，并分别检查另一个列表，并确保您没有在那里执行任何 .Select...ToList() 。

```
public List<SelectListItem> AvailableItemSelectList{
get
{
    var items = //get your items from repository
    return items;
}
}

public List<string> ItemsToAdd{
get{ //make sure you are not setting anything here}
set{} 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T10:46:29.027

您也可以这样做以取消选择页面加载时的所有列表框项目：

```
$(document).ready(function () {        

   $("#listbox").find("option").attr("selected", false);

}); 
```

# .net - .NET IO：我可以强制 BinaryWriter（或 FileStream）始终刷新到磁盘吗？

> ID：14233325
> 
> 赞同：1
> 
> 时间：2013-01-09T10:36:48.543
> 
> 标签：.net, io

我需要类似于 Java[`RandomAccessFile(path, "rws")`](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#mode)方法的行为，即将数据写入文件后立即将其刷新到磁盘。

我倾向于将[`BinaryWriter`](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.IO.BINARYWRITER%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)其用于我的目的，但它没有办法指定冲洗行为。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:40:36.420

`BinaryWriter`不是`sealed`，所有的`Write`方法都是`virtual`。您可以覆盖它们并添加对 的调用`Flush`，例如：

```
public override void Write(byte value)
{
    base.Write(value);
    Flush(); // which is just: this.OutStream.Flush();
} 
```

然而！在大多数情况下，这对性能***非常不利***。我不推荐它。

如果您使用的是 a`StreamWriter`或类似的，则只需设置`AutoFlush`为`true`; 任务完成; 但同样——这真的会损害性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:39:58.833

我建议编写一个扩展方法作为包装器：

```
public static class MyBinaryWriterExtensions {
  public static void WriteAndFlush(this BinaryWriter writer, byte[] data) {
     writer.Write(data);
     // Slow! Disk access is at least 10 ms! (for a fast disk)
     writer.Flush();
  }
} 
```

这将被称为：

```
BinaryWriter bw = ... // Getting your writer somehow
byte[] data = ... // your data
bw.WriteAndFlush(data); // Will write and flush! 
```

还是您需要某种原子性？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T10:40:06.420

您可以将每个作家都放入“使用”中，最后将 Dispose() 它

```
using (BinaryWriter writer = new BinaryWriter(File.Open(fileName, FileMode.Create)))
        {
            writer.Write(1.250F);
            writer.Write(@"c:\Temp");
            writer.Write(10);
            writer.Write(true);
        } 
```

对于文本，您可以使用`File.WriteAllText`根本不需要刷新的功能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-09T23:02:31.403

另请参阅 WriteThrough 选项，您可以在创建文件流时提供该选项。它会导致您的流跳过所有操作系统级别的缓冲。然而，我*认为*，在流的构造函数中指定的大小（如果未指定，则为 4k）在流中仍然存在缓冲。所以我*认为*使用 WriteThrough 流对象本身会缓冲，直到指定的缓冲区大小已满，然后立即写入底层存储。

Ayende 在这里有一篇文章：[https ://ayende.com/blog/163073/file-io-flush-or-writethrough](https://ayende.com/blog/163073/file-i-o-flush-or-writethrough)

# r - 将未知变量分配给新变量名

> ID：14233326
> 
> 赞同：1
> 
> 时间：2013-01-09T10:36:50.223
> 
> 标签：r, environments

我必须加载许多文件并转换它们的数据。每个文件只包含一个`data.table`，但表有不同的名称。

我想对所有文件运行一个脚本——为此，我必须将未知数分配`data.table`给一个通用名称……比如说`blob`。

这样做的`R`方法是什么？目前，我最好的猜测（这似乎是一个 hack，但有效）是将 加载`data.table`到新环境中，然后：`assign('blob', get(objects(envir=newEnv)[1], env=newEnv)`.

在可重现的上下文中，这是：

```
newEnv <- new.env()
assign('a', 1:10, envir = newEnv)
assign('blob', get(objects(envir=newEnv)[1], env=newEnv)) 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T10:53:02.827

R 方式是创建单个对象，即单个数据表列表。

这是一些包含三个步骤的伪代码：

*   用于`list.files()`创建文件夹中所有文件的列表。
*   使用`lapply()`和`read.csv()`读取文件并创建数据框列表。替换`read.csv()`为`read.table()`或适合您的数据的任何内容。
*   再次使用`lapply()`，这次`as.data.table()`将数据框转换为数据表。

伪代码：

```
filenames <- list.files("path/to/files")
dat <- lapply(files, read.csv)
dat <- lapply(dat, as.data.table) 
```

您的结果应该是一个名为 的列表`dat`，其中包含每个原始文件的数据表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:10:52.550

我假设您使用以下方式保存了 data.tables `save()`：

```
d1 <- data.table(value=1:10)
save(d1, file="data1.rdata") 
```

您的问题是，当您加载文件时，您不知道保存文件时使用的名称（此处为：d1）。正确的？

我建议您改用`saveRDS()`and`readRDS()`来保存/加载单个对象：

```
d1 <- data.table(value=1:10)
saveRDS(d1, file="data1.rds")
blob <- readRDS("data1.rds") 
```

# c - （C 编程）逐字符读取文本文件并删除点和逗号前面的空格和连字符

> ID：14233329
> 
> 赞同：2
> 
> 时间：2013-01-09T10:36:56.157
> 
> 标签：c, file, char

逐字符读取文本文件并删除点和逗号前面的空格和连字符。**禁止**使用 string.h 函数！ 我试图编写一个删除单个连字符/空格的程序，以为我需要删除所有这些，例如点前的一个、两个或多个空格。作为新手，我不清楚，我想我不完全了解如何使用 while 循环。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    FILE *f1;
    FILE *f2;
    char ch1;
    char ch2;
    char space=0;

    if(argc==1)
    {
        printf("Unknown file\n");
        return 1;
    }

    f1=fopen(argv[1], "r");

    if(!f1)
    {
        printf("Error opening input file\n");
        return 2;
    }

    f2=fopen(argv[2], "w");

    if(!f2)
    {
        printf("Error creating output file\n");
        return 3;
    }

    while((ch1=getc(f1))!=EOF)
    {
        if((ch1==' ')||(ch1=='\n'))
        {
            if((ch2 = getc(f1))=='.')
            {
                putc('.', f2);
            }

            else 
            {
                putc(ch1, f2);
                putc(ch2, f2);
            }
        } 
        else putc(ch1, f2);
    }

    return 0;
} 
```

请给我解释一下！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:23:53.443

剧透：

```
#include <stdio.h>

int main(void)
{
int ch;
size_t count;

count = 0; 
while (1)  {
        ch = getc(stdin);
        switch (ch) {
        case '.':
        case ',': count = 0; break;
        case ' ': count++; continue;
        default: for ( ; count; count--) putc(' ', stdout); break;
                }
        if (ch == EOF) break;
        putc(ch, stdout);
        }
return 0;
} 
```

# android - 替换 Google Now 手势

> ID：14233330
> 
> 赞同：25
> 
> 时间：2013-01-09T10:36:59.560
> 
> 标签：android, google-now

如果您想在 Nexus 设备上启动 Google Now，您只需从导航栏中用一个简单的手势向上滑动即可。我想用我自己的应用程序替换此功能。如果您轻扫，应用选择器会出现并询问您要启动哪个应用：我的应用或 Google Now。我该如何实施？

我找到了一个无需root即可运行[的示例。](https://play.google.com/store/apps/details?id=com.simon.LaunchNow)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-09T12:19:11.773

将以下内容添加`<intent-filter>`到要从手势启动的 Activity 中：

```
<intent-filter>
    <action android:name="android.intent.action.ASSIST" />

    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

现在，当您进行滑动时，您将看到您的应用程序的一个选项，并且必须通过选择始终将其选为默认处理程序，如下所示。

![在此处输入图像描述](../Images/aa347f5b9daf1f5fa697f53b859e4687.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-09T11:07:49.973

这只是设置[正确的意图过滤器](http://developer.android.com/reference/android/content/Intent.html#ACTION_ASSIST)的问题：

```
<intent-filter>
    <action android:name="android.intent.action.ASSIST"/>
    <category android:name="android.intent.category.DEFAULT"/>
</intent-filter> 
```

# python - 我可以在托管节点上不安装 python 的情况下使用 ansible 吗？

> ID：14233331
> 
> 赞同：0
> 
> 时间：2013-01-09T10:37:01.610
> 
> 标签：python, ansible

我想使用 ansible ，我可以使用 ansible 而不在托管节点上安装 python 吗？例如，我只想在受管节点上执行一些 shell 命令。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T13:18:43.493

是的，你可以，但你必须使用**原始模块**：

[http://docs.ansible.com/ansible/raw_module.html](http://docs.ansible.com/ansible/raw_module.html)

# android - 软件按钮高度

> ID：14233336
> 
> 赞同：5
> 
> 时间：2013-01-09T10:37:38.193
> 
> 标签：android

我如何计算软件按钮的高度（例如在 Galaxy nexus 或 razr motorola hd 中）？

就个人而言，我认为该`DisplayMetrics.heightPixels`属性是所有屏幕的高度，没有软件按钮的高度和状态栏的高度。

因此，**软件按钮高度**=**规格高度**- **DisplayMetrics.heightPixels**。

关系 7 的示例：

`75(soft button height) = 1280(spec height) - 1205(DisplayMetrics.heightPixels)`

我是正确的 ？请确认。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T13:28:21.897

我的假设是正确的。

为了概括问题并证明它，这里手动测量我在手机和平​​板电脑上所做的截图：

# 软件按钮高度

*   **三星银河系**

纵向：48 dp
1280 - 1184 == 96 像素 == 48dp xhdpi

横向：42 dp
1280 - 1196 == 84 像素 == 42dp xhdpi

（注意！：在横向，这不是高度，而是放置在屏幕右侧的软件按钮的宽度）

*   **在关系 7**

肖像：56dp
...

横向：48dp
...

# spring - 无法将 dispatcherServlet 映射到上下文根

> ID：14233337
> 
> 赞同：6
> 
> 时间：2013-01-09T10:37:44.363
> 
> 标签：spring, jsp, spring-mvc

这是我用于 spring mvc 的当前配置：

**1- web.xml：**

```
<servlet>  
    <servlet-name>spring</servlet-name>  
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>    
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:spring/config/dispatcherServlet.xml</param-value>
   </init-param>
<load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>  
    <servlet-name>spring</servlet-name>  
    <url-pattern>/</url-pattern>  
</servlet-mapping> 
```

**2- dispatcherServlet.xml：**

```
<context:component-scan base-package="com.app" />
 <context:annotation-config />
<mvc:annotation-driven />   
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/"/>
    <property name="suffix" value=".jsp"/>
</bean> 
```

**3-控制器：我的网页直接在 webapp 文件夹下**

```
@Controller
public class SearchController {

private Log log = LogFactory.getLog(getClass());

@RequestMapping("/search.jsp")
public String search(Model model, HttpServletRequest request,
        HttpSession session) {
          log.debug("Search Controller");
          return "search";
 } 
```

ISSUE：尝试访问搜索页面时，如下所示：

```
http://localhost:8080/MyAPP/search.jsp 
```

控制器没有被调用，但是当我将调度程序 servlet 映射到`/mapping/*`并访问搜索页面时，如下所示：

```
http://localhost:8080/MyAPP/mapping/search.jsp 
```

控制器被正确调用，我正在使用**spring 3.0.5.RELEASE**。

请指教，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:22:27.243

我认为您忘记了在 Web 服务器/servlet 容器中配置的内置默认 servlet。例如在 Tomcat7/conf/web.xml 中存在：

```
<servlet>
    <servlet-name>jsp</servlet-name>
    <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
    <init-param>
        <param-name>fork</param-name>
        <param-value>false</param-value>
    </init-param>
    <init-param>
        <param-name>xpoweredBy</param-name>
        <param-value>false</param-value>
    </init-param>
    <load-on-startup>3</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<!-- The mappings for the JSP servlet -->
<servlet-mapping>
    <servlet-name>jsp</servlet-name>
    <url-pattern>*.jsp</url-pattern>
    <url-pattern>*.jspx</url-pattern>
</servlet-mapping> 
```

这是赶上`*.jsp`春天之前。我通过删除所有 Spring 配置在本地对此进行了测试，*仍然*可以获得`search.jsp`.

[DefaultAnnotationHandlerMapping 的工作原理](https://stackoverflow.com/questions/5740958/how-defaultannotationhandlermapping-works)应该有助于解释为什么它会以它们的方式工作。

当您`<url-pattern>/mapping/*</url-pattern>`创建一个比简单匹配更具体的匹配`/`时，默认（即 Tomcat）servlet 会忽略请求并路由到您正确配置的控制器。

解决此问题的一种方法是通过使用强制所有内容通过您的 servlet，`<url-pattern>/*</url-pattern>`但您还需要进行一些其他更改以避免映射解析问题。

我将 *.jsp 文件移动到（标准？）子目录`/WEB-INF`并添加

```
<servlet-mapping>
    <servlet-name>jsp</servlet-name>
    <url-pattern>/WEB-INF/*</url-pattern>
</servlet-mapping> 
```

到**web.xml**并更改**dispatcherServlet.xml**以匹配如下：

```
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/"/>
    <property name="suffix" value=".jsp"/>
</bean> 
```

如果您不进行这些更改，则请求`/search.jsp`将由您配置的 InternalResourceViewResolver 解析，以`/search.jsp`将 Tomcat 发送到无限转发循环！

[未找到带有 URI [/WEB-INF/pages/apiForm.jsp] 的 HTTP 请求的映射在](https://stackoverflow.com/questions/1266303/no-mapping-found-for-http-request-with-uri-web-inf-pages-apiform-jsp)这里可能有用。

*旁白：对于我的大多数 Spring XML 配置项目，我使用`/WEB-INF/views`将视图层与 /WEB-INF 根目录中的任何配置分开。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:48:31.453

以下映射将导致调度程序 servlet 处理未由 web.xml 中的其他 url 映射显式映射的 url。只要 url 没有被其他映射处理，就可以把它想象成一个包罗万象的映射。

```
<servlet-mapping>  
    <servlet-name>spring</servlet-name>  
    <url-pattern>/</url-pattern>  
</servlet-mapping> 
```

当您按如下方式配置 ViewResolver 时：

```
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/"/>
    <property name="suffix" value=".jsp"/>
</bean> 
```

ViewMapping 必须指向项目中的 JSP，否则为调度程序提供的捕获所有映射将尝试处理转发/重定向到适当的视图。您必须确保视图解析器的结果存在于您的项目中，即`/search.jsp`. 这意味着您的项目 Web 内容文件夹的根目录中必须有一个 search.jsp。更常见的是，这些视图放置在 WEB-INF 文件夹和以下映射中：

```
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/"/>
    <property name="suffix" value=".jsp"/>
</bean> 
```

# php - 它没有显示 anantalkeermenu。有人知道为什么吗？

> ID：14233338
> 
> 赞同：0
> 
> 时间：2013-01-09T10:37:44.330
> 
> 标签：php, mysql

我的问题是为什么它不显示 $aantalkeermenu。但它显示查询中的另一个变量可以帮助我吗？

这是我的查询：

```
$sql = "SELECT res.reserveringsnr, res.datum, menr.reserveringsnr, menr.menunr, SUM(menr.aantalkeermenu), men.menunr, men.menunaam, men.voorgerecht, men.hoofdgerecht, men.nagerecht  FROM reserveringen AS res
                INNER JOIN menus_regel as menr
                ON res.reserveringsnr = menr.reserveringsnr
                INNER JOIN menus AS men
                ON menr.menunr = men.menunr
                WHERE res.datum = '".$invoerdatum."'
                GROUP BY menr.menunr 
                "; 
```

这是在我的网页上显示的：

```
 $result = mysql_query($sql);

        echo "<table>";
        echo "<th>Aantal</th> <th> Menunaam </th><th> Voorgerecht </th> <th> Hoofdgerecht </th> <th> Nagerecht </th>";

        while($row = mysql_fetch_assoc($result)) {
            $datum = $row['datum'];
            $aantalkeermenu = $row['aantalkeermenu'];
            $menunr = $row['menunr'];
            $menunaam = $row['menunaam'];
            $voorgerecht = $row['voorgerecht'];
            $hoofdgerecht = $row['hoofdgerecht'];
            $nagerecht = $row['nagerecht'];
            $aantalkeermenu = $row['aantalkeermenu'];

        // open tr
        echo "<tr id='$menunr' class='edit_tr'>";
        echo "<td><span>$menunr</span></td>";           
        echo "<td><span>$aantalkeermenu</span></td>"; 
        echo "<td><span>$menunaam</span></td>"; 
        echo "<td><span>$voorgerecht</span></td>"; 
        echo "<td><span>$hoofdgerecht</span></td>"; 
        echo "<td><span>$nagerecht</span></td>"; 

        echo "</tr>"; 
        // close tr
        }           
        echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:41:53.637

当你

```
select ... SUM(menr.aantalkeermenu) 
```

结果列将不会被调用`aantalkeermenu`。您需要明确命名该列，如下所示

```
select ... SUM(menr.aantalkeermenu) as aantalkeermenu 
```

然后它将出现在结果行中的该名称下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:42:17.467

你需要别名，`SUM(menr.aantalkeermenu)`否则我相信它会返回为`SUM(menr.aantalkeermenu)`

以下 SQL 应该会有所帮助。

```
$sql = "
SELECT res.reserveringsnr, res.datum, menr.reserveringsnr, menr.menunr,
SUM(menr.aantalkeermenu) AS aantalkeermenu, men.menunr, men.menunaam, men.voorgerecht,
men.hoofdgerecht, men.nagerecht 
FROM reserveringen AS res
INNER JOIN menus_regel as menr
ON res.reserveringsnr = menr.reserveringsnr
INNER JOIN menus AS men
ON menr.menunr = men.menunr
WHERE res.datum = '".$invoerdatum."'
GROUP BY menr.menunr"; 
```

# html - 如何旋转一个 90度？

> ID：14233341
> 
> 赞同：273
> 
> 时间：2013-01-09T10:38:02.450
> 
> 标签：html, css

我有一个`<div>`我想旋转 90 度：

```
<div id="container_2"></div> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：505
> 
> 时间：2013-01-09T10:41:04.427

您需要 CSS 来实现这一点，例如：

```
#container_2 {
    -webkit-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
    transform: rotate(90deg);
} 
```

演示：

```
#container_2 {
  width: 100px;
  height: 100px;
  border: 1px solid red;
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
  -o-transform: rotate(45deg);
  -ms-transform: rotate(45deg);
  transform: rotate(45deg);
}
```

```
<div id="container_2"></div>
```

（demo中有45度旋转，可以看到效果）

**注意：**和`-o-`前缀`-moz-`不再[相关，可能不需要](http://caniuse.com/#feat=transforms2d)。IE9 需要`-ms-`，Safari 和 Android 浏览器需要`-webkit-`

* * *

**2018 年更新：**不再需要供应商前缀。只有`transform`就足够了。（感谢@rinogo）

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-01-09T10:50:19.523

在您的 CSS 中使用以下内容

```
div {
    -webkit-transform: rotate(90deg); /* Safari and Chrome */
    -moz-transform: rotate(90deg);   /* Firefox */
    -ms-transform: rotate(90deg);   /* IE 9 */
    -o-transform: rotate(90deg);   /* Opera */
    transform: rotate(90deg);
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-04-26T22:19:04.300

使用`transform: rotate(90deg)`：

```
#container_2 {
    border: 1px solid;
    padding: .5em;
    width: 5em;
    height: 5em;
    transition: .3s all;  /* rotate gradually instead of instantly */
}

#container_2:hover {
    -webkit-transform: rotate(90deg);  /* to support Safari and Android browser */
    -ms-transform: rotate(90deg);      /* to support IE 9 */
    transform: rotate(90deg);
}
```

```
<div id="container_2">This box should be rotated 90&deg; on hover.</div>
```

单击“运行代码片段”，然后将鼠标悬停在该框上以查看转换的效果。

实际上，不需要其他前缀条目。请参阅*[我可以使用 CSS3 变换吗？](http://caniuse.com/#feat=transforms2d)*

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-19T02:29:42.703

you can use css3 property **writing-mode** writing-mode: tb-rl

[css-tricks](https://css-tricks.com/almanac/properties/w/writing-mode/)

[mozilla](https://developer.mozilla.org/en/docs/Web/CSS/writing-mode)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-10-15T06:37:03.813

使用 css "rotate()" 方法：

```
div {
  width: 100px;
  height: 100px;
  background-color: yellow;
  border: 1px solid black;
}

div#rotate{
  transform: rotate(90deg);
}
```

```
<div>
normal div
</div>
<br>

<div id="rotate">
This div is rotated 90 degrees
</div>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-17T12:18:01.863

我们可以将以下内容添加到 CSS 中的特定标签中：

```
-webkit-transform: rotate(90deg);
-moz-transform: rotate(90deg);
-o-transform: rotate(90deg);
-ms-transform: rotate(90deg);
transform: rotate(90deg); 
```

在半旋转的情况下更改`90`为`45`。

# jquery - 对于 asp 文本框，它的工作。必须在gridview模板字段文本框上工作

> ID：14233342
> 
> 赞同：0
> 
> 时间：2013-01-09T10:38:12.950
> 
> 标签：jquery, asp.net, gridview, textbox

请参阅此链接： [用逗号格式化数字](https://stackoverflow.com/questions/14229938/jquery-ready-function-doesnt-work-after-button-click)

它适用于 asp 文本框。

我必须在 gridview 模板字段文本框上工作。第一次在gridview文本框上工作正常。但是在postbak之后它失败了。

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:43:19.227

尝试使用 if 条件编写代码

```
if (IsPostBack) 
{
    // Is a postback, do something
} 
else 
{
    // Is not a postback, do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:44:30.300

**这是我的脚本：**

```
<script type="text/javascript">

 function gridviewDispAddonkeyupmethod() {
         $(".**DispAdd**").val(addCommasOnKeyPress($(".**DispAdd**").val()));
 }

function addCommasOnKeyPress(nStr) {
    nStr = nStr.replace(/\,/g, '')
    nStr += '';
    var x = nStr.split('.');
    var x1 = x[0];
    var x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    return x1 + x2;
}

</script> 
```

**这是我的gridview文本框：**

```
 <asp:TextBox ID="txtDispAdd" **CssClass="DispAdd"** runat="server"></asp:TextBox> 
```

**这是我的gridview行数据绑定：**

```
Dim txtDispAdd As TextBox = DirectCast(e.Row.FindControl("txtDispAdd"), TextBox)
txtDispAdd.Attributes.Add("onKeyUp", "javascript:gridviewDispAddonkeyupmethod()") 
```

Alhamdulillah，效果很好。谢谢大家。

# windows-phone-7 - 如何在 Windows Phone 7 Localdb 中映射一对一关系？

> ID：14233343
> 
> 赞同：2
> 
> 时间：2013-01-09T10:38:13.620
> 
> 标签：windows-phone-7, mapping, one-to-one, localdb

我的 Windows Phone 7 localdb 中有两个表，我想映射它们之间的一对一关系。假设有一个这些类：

```
[Table]
public class HouseOwner
{
  [Column]
  public string Name { get; set; }

  [Column]
  public string Surname { get; set; }
}

[Table]
public class Home
{
  [Column]
  public string Address { get; set; }

  [Column]
  public string EnergyClass { get; set; }
} 
```

我怎样才能做到这一点？

我找到了很多关于如何映射一对多关系的例子，但没有关于这个案例。

# html - 使用xslt在html中保留下拉列表值？

> ID：14233344
> 
> 赞同：0
> 
> 时间：2013-01-09T10:38:16.550
> 
> 标签：html, xslt, if-statement, tibco, businessworks

不确定我是否正确回答了这个问题，但我会尝试：-

我有一个包含 10 个值的下拉列表的 html 页面（xml+xslt）。当我选择一个值时，例如。ABC，我可以执行添加或删除或搜索。现在在所有其他页面上（添加、删除、搜索），我都有一个主页按钮。当我单击它时，它会回到主页，但下拉列表的值会被重置。

如何保留用户选择的值？

我有以下代码，但不知道为什么。

我在 TIBCO BusinessWorks 上工作。

```
 <tr > <td>
 <select name= "GetRelationCombo">
        <xsl:for-each select="resultSet/Record">
             <xsl:sort select="REL_NAME" />

                  <option> 
                    <xsl:attribute name="value">
            <xsl:value-of select="REL_NAME" />
               </xsl:attribute>
                   <xsl:value-of select="REL_NAME" />
    <xsl:if test="REL_NAME = 'resultSet/RelationshipName'">
    <xsl:attribute name="selected">true</xsl:attribute>
    </xsl:if>

                 </option>            
      </xsl:for-each>
 </select>
</td></tr> 
```

这是输入 XML：

```
<?xml version = "1.0" encoding = "UTF-8"?>
<resultSet>
  <Record>
    <REL_NAME>ShapeID</REL_NAME>
  </Record>
  <Record>
    <REL_NAME>eMPSQPType</REL_NAME>
  </Record>
  <Record>
    <REL_NAME>GERSGLAccount</REL_NAME>
  </Record>
  <Record>
    <REL_NAME>WageType</REL_NAME>
  </Record>
  <RelationshipName>PLANT</RelationshipName>
</resultSet> 
```

请帮忙！！我正忙于一件大事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:03:35.273

首先，您使用的任何属性都需要出现在元素内部的任何内容之前，因此：

```
<xsl:if test="REL_NAME = 'resultSet/RelationshipName'">
    <xsl:attribute name="selected">true</xsl:attribute>
</xsl:if> 
```

应该在这个之上：

```
<xsl:value-of select="REL_NAME" /> 
```

这是不正确的，因为只有当 REL_NAME 实际具有值“resultSet/RelationshipName”时它才会为真：

```
REL_NAME = 'resultSet/RelationshipName' 
```

这是您需要的实际条件：

```
REL_NAME = ../RelationshipName 
```

修改后的 XSL：

```
 <option>
    <xsl:attribute name="value">
      <xsl:value-of select="REL_NAME" />
    </xsl:attribute>
    <xsl:if test="REL_NAME = ../RelationshipName">
      <xsl:attribute name="selected">true</xsl:attribute>
    </xsl:if>
    <xsl:value-of select="REL_NAME" />
  </option> 
```

作为旁注，我认为 selected 属性的正确值是“selected”，而不是“true”，即使“true”可能仍然有效。

```
<xsl:attribute name="selected">selected</xsl:attribute> 
```

[http://reference.sitepoint.com/html/option/selected](http://reference.sitepoint.com/html/option/selected)

# html - XSLT - 将一个模板应用于孩子，将另一个模板应用于孩子的孩子

> ID：14233349
> 
> 赞同：0
> 
> 时间：2013-01-09T10:38:29.563
> 
> 标签：html, xml, templates, xslt, children

我有以下xml文件的结构：

```
<root-element>
    <child1>
        Some text
    </child1>
    <child2>
        <grandchild>
            Some text
        </grandchild>
    </child2>
</root-element> 
```

我的目标是借助 xslt 文件生成 html 输出。在这样做时，我想将模板应用于根元素的直接子元素，它将标签的名称输出为标题 1，并将其内容包含在 <p></p> 中。至于孙子，我想使用几乎相同的模板，但将他们的名字输出为标题 2。

为了更容易理解我想要的内容是 HTML 输出的示例：

```
<html>
    <head>
        <title>Sample</title>
    </head>
    <body>
        <h1>Child1</h1>
        <p>Some text</p>

        <h1>Child2</h1>
        <h2>Grandchild</h2>
        <p>Some text</p>
    </body>
</html> 
```

现在我的尝试看起来像这样： http: [//pastebin.com/wKgSLbcE](http://pastebin.com/wKgSLbcE)

但它不适用于 <xsl:for-each select="./*"> 和 <xsl:for-each select="././*"> 所以我想请你帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:10:22.700

使用模板匹配来实现您的目标可能会更好，因为这更符合 XSLT 的精神。

例如，要匹配你的“子”元素，我猜它可以命名为任何东西，你可以做这样的事情来匹配顶级元素的子元素

```
<xsl:template match="/*/*">
   <h1>
      <!-- Output name here -->
   </h1>
   <xsl:apply-templates />
</xsl:template> 
```

类似地匹配孙元素，使用这个

```
<xsl:template match="/*/*/*"> 
```

至于段落，您将有一个与文本节点匹配的模板

```
<xsl:template match="text()">
   <p>
      <xsl:value-of select="normalize-space(.)" />
   </p>
</xsl:template> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output version="4.0" method="html" indent="no" encoding="UTF-8" use-character-maps="spaces" doctype-public="-//W3C//DTD HTML 4.01 Transitional//EN" doctype-system="http://www.w3.org/TR/html4/loose.dtd"/>

   <xsl:template match="/*">
      <html>
         <head>
            <title>Abschlussarbeit</title>
         </head>
         <body>
            <xsl:apply-templates />
         </body>
      </html>
   </xsl:template>

   <xsl:template match="/*/*">
      <h1>
         <xsl:value-of select="concat(translate(substring(name(), 1, 1), abcdefghijklmnopqrstuvwxyz, ABCDEFGHIJKLMNOPQRSTUVWXYZ), substring(name(), 2))"/>
      </h1>
      <xsl:apply-templates />
   </xsl:template>

   <xsl:template match="/*/*/*">
      <h2>
         <xsl:value-of select="concat(translate(substring(name(), 1, 1), abcdefghijklmnopqrstuvwxyz, ABCDEFGHIJKLMNOPQRSTUVWXYZ), substring(name(), 2))"/>
      </h2>
      <xsl:apply-templates />
   </xsl:template>

   <xsl:template match="text()">
      <p>
         <xsl:value-of select="normalize-space(.)" />
      </p>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
   <head>
      <META http-equiv="Content-Type" content="text/html">
      <title>Abschlussarbeit</title>
   </head>
   <body>
      <h1>child1</h1>
      <p>Some text</p>
      <h1>child2</h1>
      <h2>grandchild1</h2>
      <p>Some text</p>
   </body>
</html> 
```

请注意，如果您使用的是 XSLT 2.0，则可以使用 xpath 函数“大写字母”将元素名称的第一个字符转换为大写字母，而不是使用 XSLT 1.0 中使用的“翻译”方法

# google-maps-api-3 - Firefox 上的无限负载：从 maps.googleapis.com 传输数据

> ID：14233350
> 
> 赞同：9
> 
> 时间：2013-01-09T10:38:32.137
> 
> 标签：google-maps-api-3

当我加载我正在处理的网站时，除了 Firefox 之外的所有浏览器都很好，它会挂起`Transferring data from maps.googleapis.com...`

谷歌地图完美呈现，但 FF 并没有停止加载。

这对我来说是个大问题，因为我的`jQuery(window).load`功能正在运行。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T12:47:43.620

而不是使用 jQuery：

```
$(document).ready(function(){
    initialize();
}); 
```

做这个：

```
<body onload="initialize();"> 
```

正如谷歌说明告诉你的那样！这为我解决了。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-08-19T12:18:10.497

您只需要更新 Firefox。

# html - 3 个 div 中间居中边可缩放全部在一个垂直居中的 div 中

> ID：14233352
> 
> 赞同：0
> 
> 时间：2013-01-09T10:38:35.187
> 
> 标签：html, css

我花了将近 2 天，不知道该怎么做。这是一些代码：

```
<div id='wrapper'>
  <div id='left'>
  </div
  <div id='middle'>
      <div id='centeredinmiddle'>
      </div>
  </div>
  <div id='right'>
  </div>
</div> 
```

我需要的是：包装器垂直居中，左右可缩放让我们说每个窗口宽度的20％，中间静态宽度：700px，centeredinmiddle - 在中间水平居中。

我不确定它是否可行，但我希望它是可行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:02:09.803

[http://jsfiddle.net/cJqAu/](http://jsfiddle.net/cJqAu/)

更改浮动 div 的顺序 -->

```
<div id='wrapper'>
  <div id='left'>
      foo bar
  </div>
    <div id='right'>
    bar foo
  </div>
  <div id='middle'>
     <div id='centeredinmiddle'>
        lorem ipsum dolor sit amet and so on...
     </div>
  </div>
</div> 
```

并在左右 div 中添加一些小的样式规则：

```
#wrapper
{
  width: 70%;
  margin-left: 15%;
  /*this is not a beautiful and nice attempt, but it works*/
}
#left
{
  float: left;
  width: 10%;
}
#right
{
 float: right;
 width: 10%;
}
#centeredinmiddle
{
  /*no need for further style rules if you nicely adjust the others ;)*/
} 
```

只需调整包装器的宽度即可

# jquery - jQuery 的 mouseenter/mouseleave 导致延迟

> ID：14233354
> 
> 赞同：0
> 
> 时间：2013-01-09T10:38:44.073
> 
> 标签：jquery

我对 jQuery`mouseenter`和`mouseout`(and `mouseleave`) 有疑问。我的代码如下：

```
$('nav#mainMenu ul li:not(:first), nav#mainMenu ul li ul:not(li a)').each(function() {
    $(this).mouseenter(function() {
        $(this).children('a').addClass('active');
        var left = $(this).outerWidth(true),
            width = 0;
        if($(this).hasClass('help')) { // IF HELP
            $(this).prevAll('li').each(function() {
                width += $(this).outerWidth(true);
            });
        } else { // ELSE
            $(this).nextAll('li').each(function() {
                width += $(this).outerWidth(true);
            });
        }

        var width = width + 1;

        if($(this).hasClass('help')) {
            $(this).children('ul').css({ 'right':left, 'width':width });
            $(this).children('ul').stop().show('slide', { direction: 'right' }, 250);
        } else {
            $(this).children('ul').css({ 'left':left, 'width':width });
            $(this).children('ul').stop().show('slide', { direction: 'left' }, 250);
        }
    });
        $(this).mouseout(function() {
        if($(this).hasClass('help')) {
            $(this).children('ul').stop().hide('slide', { direction: 'right' }, 250, function() {
                $(this).parent('li').children('a').removeClass('active');
            });
        } else {
            $(this).children('ul').stop().hide('slide', { direction: 'left' }, 250, function() {
                $(this).parent('li').children('a').removeClass('active');
            });
        }
    });
}); 
```

当我在动画结束时停留在光标上时，效果很好，但如果我离开中间，`mouseout`不会被触发并且`children('ul')`仍然可见。有任何想法吗？

编辑：问题显然是由使用 jQueryUI 引起的`slide`，而不是“基本”jQuery 方法。唯一的问题是 - 它可以以某种方式修复吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-09T10:50:57.493

将鼠标放在一个功能上，然后将鼠标移出，例如....

```
$('nav#mainMenu ul li:not(:first), nav#mainMenu ul li ul:not(li a)').each(function() {
    $(this).hover(function() {
        $(this).children('a').addClass('active');
        var left = $(this).outerWidth(true),
            width = 0;
        if($(this).hasClass('help')) { // IF HELP
            $(this).prevAll('li').each(function() {
                width += $(this).outerWidth(true);
            });
        } else { // ELSE
            $(this).nextAll('li').each(function() {
                width += $(this).outerWidth(true);
            });
        }

        var width = width + 1;

        if($(this).hasClass('help')) {
            $(this).children('ul').css({ 'right':left, 'width':width });
            $(this).children('ul').stop().show('slide', { direction: 'right' }, 250);
        } else {
            $(this).children('ul').css({ 'left':left, 'width':width });
            $(this).children('ul').stop().show('slide', { direction: 'left' }, 250);
        }

        ,function() {
        if($(this).hasClass('help')) {
            $(this).children('ul').stop().hide('slide', { direction: 'right' }, 250, function() {
                $(this).parent('li').children('a').removeClass('active');
            });
        } else {
            $(this).children('ul').stop().hide('slide', { direction: 'left' }, 250, function() {
                $(this).parent('li').children('a').removeClass('active');
            });
        }
    });
}); 
```

# iphone - 知道当 UILabel 的多行属性打开时，它在哪里拆分字符串

> ID：14233356
> 
> 赞同：2
> 
> 时间：2013-01-09T10:38:52.590
> 
> 标签：iphone, ios, uibutton, uilabel

有问题，需要为 UIButton 的标题分配一些文本。已将按钮换行模式设置为 NSLineBreakByCharWrapping，以便字符串仅由每行末尾的字符分隔。但我需要在行尾插入一个连字符以显示单词的连续性。这是我尝试过的 -

```
 // Initialize the button

    titleButton.titleLabel.lineBreakMode = NSLineBreakByCharWrapping;
    titleButton.titleLabel.backgroundColor = [UIColor yellowColor];
    [titleButton.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:15]];

    // Make the string here
    NSMutableString *titleString = [[NSMutableString alloc] initWithString:@"abcdefghijklmnopqrs tuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz"];
        // Insert hyphens 
        int titleLength = [titleString length];
        int hyphenIndex = 19;
        while (hyphenIndex<titleLength) { 
            UniChar charatIndex = [titleString characterAtIndex:hyphenIndex];
            if ((charatIndex - ' ') != 0) { // Check if its not a break bw two words
                [titleString insertString:@"-" atIndex:hyphenIndex]; // else insert an hyphen to  indicate word continuity
            }
            hyphenIndex += 19; //Since exactly 20 char are shown in single line of the button's label. 
        }
        //Set the hyphenated title for the button
        [titleButton setTitle:titleString forState:UIControlStateNormal];
        [titleString release]; 
```

这是我能得到的最接近的。

![在此处输入图像描述](../Images/27ce5557206944f94c0f3ab6971f333a.png)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T11:21:56.683

尝试[`NSAttributedString`](https://developer.apple.com/library/mac/#documentation/cocoa/reference/ApplicationKit/Classes/NSAttributedString_AppKitAdditions/Reference/Reference.html)

它为使用字符串提供了很大的可能性。

[WWDC 2012-230](https://developer.apple.com/videos/wwdc/2012/?id=230)

例如：

```
- (NSUInteger)lineBreakBeforeIndex:(NSUInteger)index withinRange:(NSRange)aRange
//Returns the appropriate line break when the character at the index won’t fit on the same line as the character at the beginning of the range. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T21:58:40.093

请参阅我的答案，了解如何使用 NSParagraphStyle 和 NSAttributedString 来获得一个以连字符中断的 UILabel：[https ://stackoverflow.com/a/19414663/196358](https://stackoverflow.com/a/19414663/196358)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T10:45:15.453

您的第二个单词的长度比行的长度（按钮的宽度）更多，这就是发生这种情况的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T10:57:51.007

粘贴连字符不是一个好主意。您应该在大小适合按钮宽度的部分上拆分字符串，如果需要，请使用而不是添加连字符

```
[String sizeWithFont:font constrainedToSize:Size lineBreakMode:LineBreakMode] 
```

主要思想是获取初始字符串的一部分（如果单词中断，则添加连字符），检查其宽度是否适合按钮的宽度。如果宽度较小，请尝试较大的部分，否则如果适合 - 处理更多部分

# c# - 将Javascript变量传递给MVC3中的路由值

> ID：14233361
> 
> 赞同：5
> 
> 时间：2013-01-09T10:39:02.357
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-routing

我想在 @Url.Action 方法中传递一个 javascript 变量作为路由参数。

我喜欢将 screenmode javascript 变量作为路由参数传递给我的操作方法。

> 我有一个具有 ScreenMode 枚举属性的视图模型，基于它我应该在 Ajax 中调用一个动作。我还需要传递一个 javascript 变量作为路由的参数。

这是我尝试并得到编译错误的方法。

**当前上下文中不存在名称“screenMode”**

```
 $("#role-detail-form").submit(function (e) {

    if ($(this).valid()) {
    var screenMode = 0;
    @{
     if (Model.ScreenMode == UI.ViewModel.ScreenMode.New)
     {
       <text> 
       screenMode =2; 
       </text>
     }
    }
    $.post('@Url.Action("SaveRoleDetail", new { mode=screenMode})', 
            $(this).serialize(), function (data) {
                $("#role-detail").html(data);
                $.validator.unobtrusive.parse($("#role-detail"));
            });
        }
        e.preventDefault();
    }); 
```

我的行动是

```
 public ActionResult SaveRoleDetail(RoleModel viewModel, ScreenMode screenMode)
    {
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T10:48:35.027

您必须将其拆分并自己构建查询字符串，以便合并 Javascript 变量。

你需要这样的东西：

```
$.post('@(Url.Action("SaveRoleDetail"))?screenMode=' + screenMode) 
```

**编辑：**虽然可能是最佳实践，但您应该将 ScreenMode 变量存储在您的模型中，然后在您的视图中放置一个 HiddenFor 。然后，每当您更改 Javascript 中的值时，只需更新隐藏输入的值，这样您的操作方法只需要将视图模型作为参数。如果您使用 JavaScript 发布表单，并且您可以调用`$("#form").serialize()`以在您的发布调用中将所有数据发送回。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-30T06:34:27.003

也可以创建一个占位符然后替换它：

```
var url = '@Url.Action("GetOrderDetails", "Home", new { id = "js-id" })'
          .replace("js-id", encodeURIComponent(rowId)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:56:41.457

如果您使用 T4MVC 和 jQuery，您可以调用 ActionResult 执行以下操作：

在控制器中：

```
public ActionResult SaveRoleDetail(RoleModel viewModel, ScreenMode screenMode)
{
} 
```

在视图中：

```
 $.post("@Url.Action(MVC.Home.SaveRoleDetail())", { viewModel: param1, screenMode: param2) }, function (data) {

        //Do Work

    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-11T08:34:31.433

访问您的路线值（可能在 中`html.HiddenFor`）。来自 JavaScript 的值并在没有`@Url.Action`. 使用 URL 发布。

# boost-graph - 仅通过给定顶点连接的顶点的提升图上的拓扑排序

> ID：14233388
> 
> 赞同：2
> 
> 时间：2013-01-09T10:40:29.177
> 
> 标签：boost-graph

我有一个代表一组依赖关系的大图。

*   A --> B
*   A --> C
*   B --> F
*   C --> G
*   D --> E
*   E --> L
*   F --> H
*   F --> 我
*   H --> K
*   J --> K

给定 B 作为起始节点，结果需要是：BFIHK

我不需要任何其他节点，因为它们无法从 B 到达。

用户可以指定一个节点，我需要收集所有路径和这些路径中的节点并打印这些节点的拓扑排序。

目前我正在通过

1.  创建一个新图表

2.  从给定节点中提取所有出边。

3.  在图中添加这些边。从这些边中获取节点并将它们添加到新图中。

4.  对于步骤 3 中的每个节点，重复 (2) 和 (3)

5.  在该新图上，执行拓扑排序并获取节点的顺序

    有没有其他更好的方法或已知算法来查找节点子集的拓扑类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T15:53:25.523

我会研究 depth_first_visit() 函数和 boost 提供的访问者模式。访问者模式允许您在搜索树时检查顶点和边。depth_first_visit() 函数允许您从特定顶点开始 DFS 搜索。

# javascript - jQuery Cycle 2：点击时暂停幻灯片

> ID：14233389
> 
> 赞同：0
> 
> 时间：2013-01-09T10:40:33.133
> 
> 标签：javascript, jquery, dom, jquery-cycle

我似乎找不到在导航单击状态下暂停 jQuery Cycle 2 (http://jquery.malsup.com/cycle2) 脚本的方法。我想要做的是让幻灯片运行，直到用户单击上一个或下一个按钮，滑动到该特定幻灯片然后暂停它。

试过这个但没有帮助：

```
$('.previous').on('click', function() {
    $('.slideshow').cycle('pause');
});

$('.next').on('click', function() {
    $('.slideshow').cycle('pause');
}); 
```

不确定上面的引用循环是否真的重新启动了脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:06:52.733

我创建了一个可以帮助你的 JSBin。我使用 .toggle() 和 .click() 来提供效果：

每次单击下一张/上一张幻灯片时，幻灯片会转到下一张/上一张幻灯片并暂停，然后再次单击后它会恢复。

[http://jsbin.com/inuvav/3](http://jsbin.com/inuvav/3)

[http://jsbin.com/inuvav/3/edit](http://jsbin.com/inuvav/3/edit)

# c# - 如何获取 Ninject 中每个作用域线程的实例

> ID：14233392
> 
> 赞同：0
> 
> 时间：2013-01-09T10:40:38.537
> 
> 标签：c#, ninject

假设我们有一个接口`IService`及其实现类`ServiceIpmlementation`。

```
public interface IService
{
    int ThreadId { get; set; }

    DateTime CreationDateTime { get; set; }
}

public class ServiceIpmlementation : IService
{
    public int ThreadId { get; set; }

    public DateTime CreationDateTime { get; set; }

    public ServiceIpmlementation()
    {
        this.ThreadId = Thread.CurrentThread.ManagedThreadId;
        this.CreationDateTime = DateTime.Now;
    }
} 
```

Ninject 用于`IService`在线程范围内将接口绑定到其实现，如下所示：

```
...
Kernel.Bind<IService>().To<ServiceIpmlementation>().InThreadScope();
... 
```

当我尝试通过`Get`方法获取实例时它工作正常：

```
...
return DI.Kernel.Get<IService>();
... 
```

但是，我还需要为每个线程创建所有实例（用于运行某些作业）。

是否可以通过 Ninject 检索这些实例？

据我所知，在 Ninject 库`GetAll<>()`的类中声明的方法`ResolutionExtensions`不适用于这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:25:55.200

如果您需要一个线程范围的实例，那么您必须分别在每个线程上获取该实例。您只能访问当前线程实例。获取另一个线程的实例完全违背了线程作用域的想法。

# javascript - 不寻常的 javascript 语法

> ID：14233393
> 
> 赞同：28
> 
> 时间：2013-01-09T10:40:40.777
> 
> 标签：javascript

有人可以向我解释一下这里第二行发生了什么吗？：

```
var foo = function(){alert("hello?")};
(0,foo)(); 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-09T10:43:38.663

臭名昭著的逗号表达式`a,b`计算两个参数并返回右侧表达式的值。

因此，在这种情况下，它与`foo();`.

[这是一个更好的示例](http://ideone.com/XlMvtU)，可以帮助您了解正在发生的事情：

```
function foo() {
    print("foo called");
    return 123;
}
function bar() {
    print("bar called");
    return 456;
}
var result = (foo(), bar());
print("result:", result); 
```

输出：

```
foo called
bar called
result: 456 
```

此外，逗号表达式可能会与逗号分隔函数参数混淆。不一样！注意区别：

```
print("result:", foo(), bar() ); // 3 arguments, no comma operator
print("result:", (foo(), bar()) ); // 2 arguments, comma operator 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-09T10:44:43.300

它评估第一个括号中的两个表达式并执行第二个（在本例中是一个函数）。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T10:46:32.393

由于 javascript 中的逗号运算符计算多个操作数并返回最后一个。医疗器械网络：

> 逗号运算符计算其两个操作数（从左到右）并返回第二个操作数的值。

你的表情`(0,foo)`

返回`foo`然后由括号调用，放在它后面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T11:29:24.783

逗号将评估操作数并返回最后一个

第二行将返回**foo**

# matlab - 如何通过Matlab正确读取串口数据

> ID：14233394
> 
> 赞同：4
> 
> 时间：2013-01-09T10:40:56.353
> 
> 标签：matlab, serial-port

我正在使用 Matlab 从通过微处理器的串行端口读取数据。数据为十六进制格式，每个样本为 4 字节（32 位）。当我读取这些数据时，我得到一些与传输数据不匹配的随机数字序列。下面是我的代码

```
s = serial('COM16'); %assigns the object s to serial port

set(s, 'InputBufferSize', 128); %number of bytes in inout buffer
set(s, 'FlowControl', 'none');
set(s, 'BaudRate', 921600);
set(s, 'Parity', 'none');
set(s, 'DataBits', 8);
set(s, 'StopBit', 1);
set(s, 'Timeout',100);
%clc;

disp(get(s,'Name'));
prop(1)=(get(s,'BaudRate'));
prop(2)=(get(s,'DataBits'));
prop(3)=(get(s, 'StopBit'));
prop(4)=(get(s, 'InputBufferSize'));

disp([num2str(prop)]);

fopen(s);           %opens the serial port

data = fscanf(s);

fclose(s); %close the serial port 
```

请告诉我我做错了什么才能获得正确的心音。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:01:18.073

您可以将波特率降低到更标准的值，例如 115200。

您也可以尝试使用终端程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T20:56:29.740

```
serialOne=serial('COM1', 'BaudRate', 9600);

fopen(serialOne);

fprintf(serialOne,'textFile.txt'); <<<---this is for write  (for read, use fscanf)

fclose(serialOne); 
```

# linux - 查看应用程序使用的 tty

> ID：14233400
> 
> 赞同：1
> 
> 时间：2013-01-09T10:41:08.440
> 
> 标签：linux, tty

我想控制我电脑上的应用程序使用的 TTY（串行端口）。有一个应用程序通过指示正在使用的进程来显示每个端口的状态？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T10:45:24.943

尝试使用命令`lsof`。

`lsof /dev/ttyX`

要直接获取 PID，请使用：

`lsof -Fp /dev/ttyX`

# ios - 如何将图像发布到朋友的 Facebook 墙上

> ID：14233403
> 
> 赞同：0
> 
> 时间：2013-01-09T10:41:15.493
> 
> 标签：ios, facebook-ios-sdk

```
NSData* imageData = UIImageJPEGRepresentation(self.qqqimage, 90);
NSMutableDictionary * params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                self.messegeSend.text, @"message",
                                imageData, @"source",
                                nil];

postPath = [postPath stringByAppendingFormat:@"%@/feed",[friendList objectAtIndex:i]] ;

[FBRequestConnection startWithGraphPath:postPath
                             parameters:params
                             HTTPMethod:@"POST"
                      completionHandler:^(FBRequestConnection *connection, id result, NSError *error)
 { 
```

这是我的代码，但出现错误`http 200`

我也尝试`postPath`使用`@"%@/photos",friendID`，但再次使用 http 200

# android - 不幸的是，androiddemo（项目名称）已经停止

> ID：14233406
> 
> 赞同：3
> 
> 时间：2013-01-09T10:41:26.237
> 
> 标签：android

我是 android 新手，这是我的第一个演示应用程序。我正在尝试从一页导航到另一页。但我无法导航到另一个页面，我在可能的主 xml 文件中有一个按钮，并且在舔它时它正在移动到另一个 xml 下一页。我有 2 个 java 类：第一个 MianAcitvity，nextpagejava。2 xml：activity_main，下一页

我的代码：清单

```
 <activity
      android:name="com.example.androiddemo.MainActivity"
      android:label="@string/app_name" >
      <intent-filter>
          <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
         </intent-filter>
     </activity>
        <activity android:name="nextpagejava" ></activity> 
```

MainActivity.java

```
package com.example.androiddemo;
  import android.os.Bundle; 
   import android.app.Activity; 
   import android.content.Intent; 
   import android.drm.DrmStore.Action;
  import android.view.Menu; 
   import android.view.View; 
  import android.view.View.OnClickListener; 
    import android.widget.Button;

    public class MainActivity extends Activity implements OnClickListener {

      @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
          setContentView(R.layout.activity_main);

          Button bt = (Button)findViewById(R.id.bnt);
           bt.setOnClickListener(new View.OnClickListener() {

           @Override
           public void onClick(View v) {
                / / TODO Auto-generated method stub

             }
            }); 
            }

             @Override
            public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
              getMenuInflater().inflate(R.menu.activity_main, menu);
             return true;
            }

             @Override
            public void onClick(View v) {
              // TODO Auto-generated method stub
            switch(v.getId()){
              case R.id.bnt:
                     Intent in = new Intent(this, nextpagejava.class);
                     startActivity(in);
               break;

              }
           }
          } 
```

活动主文件.xml

```
 <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
           xmlns:tools="http://schemas.android.com/tools"
           android:layout_width="match_parent"
           android:layout_height="match_parent"
            tools:context=".MainActivity" >

               <TextView 
           android:id="@+id/clicktxt"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="Click"        
         />

           <Button
           android:id="@+id/bnt"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
           android:text="Click Me"
          /> 
```

下一页.xml

```
 <TextView 
             android:layout_width="match_parent"
              android:layout_height="wrap_content"
               android:text="I am i a next page..."
             />

            <Button 
              android:id="@+id/btn1"
               android:layout_width="match_parent"
                android:layout_height="wrap_content"
              android:text="Back"
             /> 
```

下一页java.java

```
 package com.example.androiddemo;

          import android.app.Activity;
          import android.os.Bundle;
          import android.view.View;
          import android.view.View.OnClickListener;
            import android.widget.Button;

           public class nextpagejava extends Activity implements OnClickListener{

       @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
              setContentView(R.layout.activity_main);

            Button bt = (Button)findViewById(R.id.btn1);
            bt.setOnClickListener(this);
            }

          @Override
           public void onClick(View v) {
            // TODO Auto-generated method stub

        }
         } 
```

我收到消息“不幸的是，androiddemo 已停止”此消息作为弹出窗口。

谁能告诉我为什么会出现这个错误，请告诉我从哪里可以找到逐行调试日志。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T10:52:13.467

```
<activity android:name="nextpagejava" ></activity> 
```

在活动名称前需要一个“.”..

```
<activity android:name=".nextpagejava" ></activity> 
```

还将您的 MainActivity 名称更改为

```
<activity android:name=".MainActivity" ></activity> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T10:54:48.463

只需从您的`MainActivity.java`文件中删除它：

> ```
>  bt.setOnClickListener(new View.OnClickListener() {   
>        @Override   
>        public void onClick(View v) {
>             / / TODO Auto-generated method stub
>          }
>         }); 
> ```

而不是这样写：

> ```
> bt.setOnClickListener(this); 
> ```

还要对`Manifest`文件进行如下更改：

> ```
> <activity android:name=".nextpagejava" ></activity> 
> ```

然后退房。我认为它现在应该可以工作了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T10:45:46.053

你有两个 onClick() 函数。删除第二个并在按钮的侦听器内添加以下两行

```
 Intent in = new Intent(this, nextpagejava.class);
  startActivity(in); 
```

那应该让你继续前进。如果错误仍然存​​在，请发布您的 logcat

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T10:46:00.140

从堆栈跟踪中你会得到很多信息，所以把它放在这里。

但我会说这很可能与一些缺少的声明有关（例如尝试单击尚未初始化的按钮）；很常见的问题。

编辑：可能使用 Intent 应该可以解决您的问题。

# sql - 报告“按日期查询”APEX

> ID：14233414
> 
> 赞同：1
> 
> 时间：2013-01-09T10:41:39.247
> 
> 标签：sql, oracle, oracle11g, oracle-apex

我在 Oracle APEX 工作。我想从两个表（即患者和历史）中报告上个月接受医生治疗的患者。![在此处输入图像描述](../Images/8fe1ad0c20c441e5f010cb90674f381e.png)

Pat_id 是 Patient 表中的主键和 History 表中的外键。

我想要报告应该向我显示 `Pat_Name ,Pat_Age ,Treated_By`以及 `Date`我还可以从`LOV`（值列表）中选择月份的位置，并根据该月份向我显示报告。

请帮助我谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:48:04.183

```
SELECT p.pat_name, p.pat_age, h.treated_by, h.date
  FROM patient p
  JOIN history h
    ON p.pat_id = h.pat_id
 WHERE EXTRACT(MONTH FROM h.date) = TO_NUMBER(:P1_MONTH) 
```

（真的是一个非常基本的连接条件）
如果你想要排序，你可以在 sql 中包含这个，或者在经典报表的报表定义中定义它，或者在交互式报表中作为默认值。

`P1_MONTH`: 一个选择列表。至于它的值列表，您可以静态定义月份（12 个条目，月份编号作为返回值，月份名称作为显示），或者使用查询：

```
SELECT to_char(add_months(to_date('01/01/2012','DD/MM/YYYY'),LEVEL-1),'Month') display_value, LEVEL return_value
FROM dual
CONNECT BY LEVEL <= 12 
```

将选择列表设置为提交更改。

作为一个额外的说明：在你的模式中将你的列名设置为大写。除非在创建时以其他方式定义列，否则列始终为大写。还要小心使用保留关键字来表示列名：`DATE`可能不是列的最佳名称...给它一个有用的名称，例如`TREATED_ON`

# linqpad - 有没有办法查看在 LinqPad 中扩展的网格结果？

> ID：14233417
> 
> 赞同：1
> 
> 时间：2013-01-09T10:41:42.723
> 
> 标签：linqpad

LINQPad 非常适合通过其出色的“转储”方法快速查找结果。

但是，当我查看包含数组（或对象）的字典时，我会这样看：

![在此处输入图像描述](../Images/36b26e87d18458b42dc835ed951cc1e6.png)

要实际查看每一行中的值，我必须单击“值”，这会打开一个新选项卡。我真的很想用一种方法来查看在一个视图中扩展的所有值。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:47:58.817

是的，但它需要您进行一些编码。

您必须为 LINQPad 实现一个扩展，并在该扩展中实现`ICustomMemberProvider`接口。您可以将此代码直接放入您的程序集中。如果它在`LINQPad`命名空间中，LINQPad 将拾取并使用它。

有关详细信息，请参阅[http://www.linqpad.net/FAQ.aspx上的 LINQPad 常见问题解答](http://www.linqpad.net/FAQ.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:59:12.897

我找到了我要找的东西。我不得不切换到“结果为富文本”（CTRL+SHIFT+T）。但是，在那个视图中，我仍然无法正确看到这些值：

![在此处输入图像描述](../Images/804140c24580f02883258d4772161f11.png)

然而，事实证明这是因为我做了`.Dump(0)`而不是仅仅`.Dump()`. 有了这个问题，我就可以展开字典并查看全貌：

![在此处输入图像描述](../Images/f552764165daff2ab13a1d62dcd3ab58.png)

# javascript - 打开另一个过滤面板时如何关闭过滤面板？

> ID：14233423
> 
> 赞同：0
> 
> 时间：2013-01-09T10:42:01.690
> 
> 标签：javascript, css, filtering

我目前正在使用我的一个网站的漂亮 Filtrify 脚本与同位素集成 (http://luis-almeida.github.com/filtrify/)。

在我的网站上，我有 4 个“类别”/面板用于搜索我的字段。当我打开第一个类别/面板并将鼠标悬停到下一个并打开它时，第一个仍然打开。当悬停到下一个类别/按钮以打开另一个 Filtrify 面板时，是否可以使用 CSS 或 Javascript 关闭打开的 Filtrify 面板？现在，如果我将它们全部打开，它就会保持打开状态。例如，在这里打开“流派”、“主要演员”和“导演”：http: [//luis-almeida.github.com/filtrify/movies.html](http://luis-almeida.github.com/filtrify/movies.html)

非常感谢您的帮助！谢谢指教！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:42:05.007

我不深入了解库，但您可以尝试在打开另一个面板之前关闭面板的兄弟姐妹。

该方法的第一个近似值可以是：

```
Filtrify.prototype.closeSiblingsPanel = function ( f ) {
    for(var item in this._menu){
        if(item !== f && this._menu[item].panel){
            this._menu[item].panel.addClass("ft-hidden");
            this._menu[item].label.removeClass("ft-opened");
        }
    }
}; 
```

您还必须修改单击事件处理程序：

```
Filtrify.prototype.events = function ( f ) {
    //...
    this._menu[f].label.on("click", this._bind(function(event){
        this.openPanel( f );
        this.closeSiblingsPanel( f );
        this.bringToFront( f );
        event.stopPropagation();
    }, this) );
    //...
}; 
```

# java - 哪一个最有效率 - HQL

> ID：14233425
> 
> 赞同：0
> 
> 时间：2013-01-09T10:42:08.377
> 
> 标签：java, hibernate, orm, hibernate-mapping

在休眠中，例如我有两个有关系的对象。对象是这样的

第一个对象：客户

```
@Entity
@Table(name = "customer", catalog = "test")
public class Customer implements java.io.Serializable {
    private static final long serialVersionUID = 1L;
    private Integer id;
    private String name;
    private Set<CustomerController> customerControllers = new HashSet<CustomerController>(0);
    public Customer() {
    }
    //getter & setter
} 
```

第二个对象：客户控制器

```
@Entity
@Table(name = "customer_controller", catalog = "test")
public class CustomerController implements java.io.Serializable {
    private static final long serialVersionUID = 1L;
    private Integer id;
    private Customer customer;
    //constructor, getter & setter
} 
```

我想选择某个客户的 customer_controller。我通过两种方式得到它。第一种方式：

```
@Override
public List<CustomerController> customerController(int customerId){
    Customer customer = (Customer) sessionFactory.getCurrentSession().get(Customer.class, customerId);
    return customer.getCustomerControllers()
} 
```

第二种方式：

```
 return (List<CustomerController>)sessionFactory.getCurrentSession().createQuery("SELECT O FROM CustomerController O WHERE O.customerId=:CONDITION")
.setParameter("CONDITION", customerId)
.list(); 
```

哪种方式最有效？为什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:28:51.330

确保更容易“打开”显示 SQL 参数并对其进行监控。

我想在**第一个**休眠中能够生成两个带有实体映射的 SQL 查询。在**第二种**情况下，应该只生成一个*选择*查询。

如果我们使用 FetchType.EAGER 认为 Hibernate 将映射*Customer*和*CustomerController*实体。希望 Hibernate 仅使用 HQL获取*CustomerController 。*以确保您应该监视 Hibernate 行为。

# php - 按键值对 PHP 数组进行分组

> ID：14233428
> 
> 赞同：0
> 
> 时间：2013-01-09T10:42:09.867
> 
> 标签：php, object, grouping

基本上我正在尝试像这样对我的数组进行分组：

```
Shopping
   Amazon
Social
   Amoeblo
   American express 
```

通过使用以下 PHP 代码：

```
<?php

echo '<ul id="list"><h2 class="searchresults"></h2>';
foreach($records as $catval) {
  $sitechar = $catval->site_category; 
  echo '<h3 id="disappear">'. strtoupper($sitechar) .'</h3>';       
  echo '<li class="siteli"><a href="#" class="add">'; 
  echo '<p id="text-site">'.$catval->site_name. '</p></a>';
  echo '</li>'; 
}
echo '</ul>';
?> 
```

但我只得到如下值。

```
Shopping
       Amazon
Social
       Amoeblo
Social
       American express 
```

我没有得到用于此的确切 PHP 排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:55:13.597

我将创建一个新数组，其中类别作为站点数组的键。

```
<?php
$arr = array();

// First create multidimensional array with categories as keys for site arrays
foreach($records as $catval) {
    $sitechar = $catval->site_category;
    if (!array_key_exists($sitechar, $arr)) {
        // Set new array for a category if it does not exist
        $arr[$sitechar] = array();
    }

    // Add site to category
    $arr[$sitechar][] = array(
        "name"=>$catval->site_name,
        "image"=>$catval->site_img
    );
}

// Then iterate the new array of categories
echo ("<ul>");
foreach($arr as $category => $sites) {
    echo("<h3>" . $site_category "</h3>");

    // Iterate array of sites
    foreach($sites as $site) {
        echo("<li>" . $site["name"] . "-" ,  $site["image"] . "</li>");
    }
}
echo("</ul>");
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:53:18.587

您可以使用 foreach 和 ksort

让 $your_array 成为你上面提到的数组

```
$res_array    = array();
foreach($your_array as $val){
   $res_array[$val->site_category][] = $val->site_name;
}
ksort($res_array);

print_r($res_array); 
```

或者在 php 中搜索 multisort 来解决你的问题:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:12:44.870

```
$tmp = null;

   echo '<ul id="list"><h2 class="searchresults"></h2>';
     foreach($records as $catval) {
       $myHtml = makeHtml($catval,$tmp);
       echo  $myHtml;
      $tmp = $catval->site_category;
     }
   echo '</ul>';

 function makeHtml($catval,$tmp){
       if($tmp != $catval->site_category){ $html .= '<h3 id="disappear">'. strtoupper($catval->site_category) .'</h3>';}
       $html .='<li class="siteli"><a href="#" class="add"><p id="text-site">'.$catval->site_name. '</p></a></li>'; 
       return $html;
 } 
```

# windows-phone-7 - 处理 Toast 和原始推送通知

> ID：14233429
> 
> 赞同：0
> 
> 时间：2013-01-09T10:42:15.920
> 
> 标签：windows-phone-7, push-notification, mpns

我的 WP7 应用需要处理不同类型的推送通知。其中一些仅在应用程序运行时相关，但一种类型用作提示用户启动应用程序以及需要在应用程序运行时进行处理。因此，当打开推送通道时，我的代码会调用 BindToShellToast 并注册事件处理程序，以便收到原始通知和 toast 通知：

```
if (!_pushChannel.IsShellToastBound)
{
    _pushChannel.BindToShellToast();
}

_pushChannel.HttpNotificationReceived += new EventHandler<HttpNotificationEventArgs>(pushChannel_HttpNotificationReceived);
_pushChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(pushChannel_ShellToastNotificationReceived); 
```

查看认证要求，似乎我必须提供一个用户设置，以允许他们不仅启用/禁用一般推送通知，而且还专门启用/禁用 toast 通知。请参阅[Windows Phone 特定应用类型的附加要求](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184838%28v=vs.105%29.aspx)（要求 6.2.1）

由于用户可能会启用常规推送通知但禁用 toast 通知，因此在我看来，我的服务器需要针对应用未运行时需要处理的类型发送原始通知和 toast 通知。这将使注册 ShellToastNotificationReceived 事件变得毫无意义。我的想法在这里正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:35:52.303

您应该在服务器上为每个注册设备存储一个设置，命名用户允许的通知类型。

# express - 使用 mongoose-sessions 和 express 时出现“未定义不是函数”错误

> ID：14233431
> 
> 赞同：0
> 
> 时间：2013-01-09T10:42:17.910
> 
> 标签：express, mongoose, runtime-error

当我初始化应用程序时，一切都很好，但是当我进入像“localhost/”这样的任何页面时，我得到这个（双：一次用于 index.html，一次用于请求的 javascript，见下文）错误：

```
TypeError: undefined is not a function
    at hash (myapp\node_modules\express\node_modules\connect\lib\middleware\session.js:341:10)
    at myapp\node_modules\express\node_modules\connect\lib\middleware\session.js:324:24
    at Promise.module.exports.SessionStore.get (myapp\node_modules\session-mongoose\index.js:85:22)
    at Promise.addBack (myapp\node_modules\session-mongoose\node_modules\mongoose\lib\promise.js:128:8)
    at Promise.EventEmitter.emit (events.js:96:17)
    at Promise.emit (myapp\node_modules\session-mongoose\node_modules\mongoose\lib\promise.js:66:38)
    at Promise.complete (myapp\node_modules\session-mongoose\node_modules\mongoose\lib\promise.js:77:20)
    at Query.findOne (myapp\node_modules\session-mongoose\node_modules\mongoose\lib\query.js:1607:15)
    at model.Document.init (myapp\node_modules\session-mongoose\node_modules\mongoose\lib\document.js:229:11)
    at model.init (myapp\node_modules\session-mongoose\node_modules\mongoose\lib\model.js:196:36)
TypeError: undefined is not a function
    at hash (myapp\node_modules\express\node_modules\connect\lib\middleware\session.js:341:10)
    at myapp\node_modules\express\node_modules\connect\lib\middleware\session.js:324:24
    at Promise.module.exports.SessionStore.get (myapp\node_modules\session-mongoose\index.js:85:22)
    at Promise.addBack (myapp\node_modules\session-mongoose\node_modules\mongoose\lib\promise.js:128:8)
    at Promise.EventEmitter.emit (events.js:96:17)
    at Promise.emit (myapp\node_modules\session-mongoose\node_modules\mongoose\lib\promise.js:66:38)
    at Promise.complete (myapp\node_modules\session-mongoose\node_modules\mongoose\lib\promise.js:77:20)
    at Query.findOne (myapp\node_modules\session-mongoose\node_modules\mongoose\lib\query.js:1607:15)
    at model.Document.init (myapp\node_modules\session-mongoose\node_modules\mongoose\lib\document.js:229:11)
    at model.init (myapp\node_modules\session-mongoose\node_modules\mongoose\lib\model.js:196:36) 
```

这是我正在使用的代码：

```
var express = require('express');
var app = this.__app = express();
app.use(express.bodyParser());
app.use(express.cookieParser());
app.use(express.session({
     store: this.__getSessionStore()
    ,secret: this.__secretSession
}));

app.post('/rpc', this.__manageRequest.bind(this)); // <-- this method is not even called
app.use("/client", express.static('./client/')); // 
// gets the index.html, but files in subfolders (which exists) throws the second error in the double error 
app.use("/", express.static('./client/production/build')); 

app.listen(this.__appPort, this.__appIp); 
```

我如何获得会话存储：

```
__getSessionStore: function(){
    var express = require('express');
    var app = this.__app;
    var SessionMongoose = require("session-mongoose")(express);
    var mongooseSessionStore = new SessionMongoose({
         url: this.__mongodbUrl
        ,interval: 120000
    });
    return mongooseSessionStore;
} 
```

Express 版本：3.0.0 Mongoose-sessions 版本：0.2.0

哈希方法中未定义的方法是“crc16”：在调试中也是未定义的

```
function hash(sess) {
  return crc16(JSON.stringify(sess, function(key, val){
    if ('cookie' != key) return val;
  }));
} 
```

在 crc 模块中，有一个 if(window) 并定义了窗口，问题是我看不到它的定义位置！因为这个窗口，它不会导出任何模块，因此函数是未定义的！我只是非常巧妙地删除了 if(window) 以始终导出到它的模块。好吧，那是 crc@0.2.0 模块 (https://github.com/alexgorbatchev/node-crc/pull/10) 中的一个错误，并且 express 需要该确切版本。

究竟是什么问题以及如何解决？多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:42:02.757

也许编辑 ./node_modules/express/package.json 告诉它使用更新的 CRC 库。

换行：

```
"crc": "0.2.0", 
```

至

```
"crc": ">= 0.2.0", 
```

然后运行

```
npm install -d 
```

如果这没有安装更新的 crc 库，请手动删除文件夹 ./node_modules/express/node_modules/crc 并重试。

我不保证这会奏效，但值得一试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:48:34.817

**这只是第一次工作，然后BUM，再次出现同样的错误......**

由于 session-mongoose 中的依赖项是这样的（松散的）：

```
"dependencies": {
  "mongoose": ">= 3.0"
}, 
```

它下载了猫鼬3.5.4！npm应该只下载了3.0，但是不知道怎么回事。

现在我删除了它并将猫鼬放在与我的应用程序相同的版本中：3.4.0。

我仍然不知道 3.5.4 版本有什么问题，或者问题是否不相等，但这里是修复。

因为这个而浪费了很多时间......：S

# salesforce - 在 Force.com 上上传 java/php/python.. 应用程序

> ID：14233435
> 
> 赞同：2
> 
> 时间：2013-01-09T10:42:32.113
> 
> 标签：salesforce, force.com

我正在做一个关于云平台的调查，我有以下问题：

是否可以像使用 Google App Engine、Heroku、Openshift 等一样在 Force.com 上上传 Java/PHP/Python/etc 应用程序？

我查看了 Salesforce 网站，但无法得出某个结论。如果我理解正确，您可以将代码上传到 Heroku，然后将应用程序与 Force.com 或类似的功能集成。

有人可以在这里阐明一下吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:01:43.867

Force.com 有自己的语言**在服务器上运行自定义代码**。这种语言称为**APEX**。

> Apex 是一种强类型、面向对象的编程语言，可让您结合对 Force.com API 的应用程序调用在 Force.com 平台上集中和执行流和事务控制语句。Apex 使用类似于 Java 且行为类似于数据库存储过程的语法，让您可以将强大的自定义业务逻辑添加到大多数系统事件，包括按钮单击、相关记录更新和 Visualforce 页面。对象上的 Web 服务请求和数据库触发器也可以启动 Apex 代码的执行。

[官方 apex 文档](http://wiki.developerforce.com/page/Apex)中的更多信息

但是您**不能将**任何类型的标准代码（如 php/python）上传到 Salesforce 服务器。如果您需要使用 php/python/java + salesforce-api 开发自己的应用程序，则必须在自己的服务器上上传/运行此代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:34:17.293

Heroku 和[database.com](http://database.com)更接近您的需求。Heroku 将让您上传 Python/Java 等应用程序，然后您可以轻松地将其连接到 Salesforce 风格的数据库。

通过“样式”，我的意思是您仍然可以在触发器中使用这种 Apex 语言，或者公开要通过 Web 服务调用的 Apex 片段。此类 Web 服务可以像经典解决方案中的“存储过程”一样使用 - 如果您希望将部分逻辑保留在 Force.com 端而不是在您的应用程序中。

马丁的回答很好。如果不是很明显，那就是“供应商锁定”。您不能在其他任何地方运行此 Apex 代码，只能在 SF 服务器上运行。没有像 PHP 的 LAMP 堆栈、Java 的 Tomcat 等开源等价物。

我认为从“相关”侧边栏中阅读这两个问题对您来说是有意义的：[Force.com 平台的缺点](https://stackoverflow.com/questions/1664503/disadvantages-of-the-force-com-platform)和 [https://stackoverflow.com/questions/3363333/anyone-moved-off-force-com](https://stackoverflow.com/questions/3363333/anyone-moved-off-force-com)。它们有点负面，但对于您的优缺点类型的比较应该会给您一些亮点。

# window - 如何将普通 256 颜色转换为视频模式 13h 颜色编码？

> ID：14233437
> 
> 赞同：2
> 
> 时间：2013-01-09T10:42:35.343
> 
> 标签：window, dos, converter, bmp

我想知道如何转换正常的 256 色（由 windows 油漆创建）

至

dos vga 256 颜色。（由模式 13h 使用）

例如，VGA 256（模式 13h）中的纯白色是十六进制的 0x0f。

但是windowspaint制作的纯白色不是0x0f，而是0xff。

失去质量是可以的。

手动创建我想使用的每个图像文件到 13h 模式版本太费力了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T10:51:32.907

您应该重新编程 VGA 调色板以匹配 .bmp 中的颜色表（这不会导致质量损失），或者您可以使用 Photoshop 之类的工具将 .bmp 文件重新映射到标准 VGA 调色板（其中可能会导致质量损失，具体取决于 .bmp 中使用的调色板）。

这是我在 Google 上找到的一些示例代码：[http ://www.brackeen.com/vga/bitmaps.html#2](http://www.brackeen.com/vga/bitmaps.html#2)

# nhibernate - 流畅的 nhibernate 映射查找表作为枚举

> ID：14233439
> 
> 赞同：0
> 
> 时间：2013-01-09T10:42:37.627
> 
> 标签：nhibernate, fluent-nhibernate-mapping

我正在尝试使用以下方法将查找表映射到枚举：FluentNhibernate 1.3.0.733 NHibernate 3.3.1.4000

我无法加载对象。如果我删除枚举映射，我可以加载对象。

代码：

```
Order order = session.Get<Order>(id); 
```

错误：提供了错误类型的 id。预期：Order+OrderStatus，得到 System.Int32

目的：

```
public class Order
{
    public enum OrderStatus
    {
        PaymentPending = 0
    }

    public virtual int Id { get; set; }
    public virtual Customer Customer { get; set; }
    public virtual Address Address { get; set; }
    public virtual IList<OrderLine> OrderLines { get; set; }
    public virtual OrderStatus Status { get; set; }
    public virtual DateTime Created { get; set; }

    public Order()
    {
        OrderLines = new List<OrderLine>();
    }
} 
```

映射：（我已将映射缩减到这些字段以进行测试）

```
public OrderMapping()
{
    Table("orders");
    Id(x => x.Id);
    Id(x => x.Status, "state_id").CustomType<Order.OrderStatus>().Not.Nullable();
    References(x => x.Address).Cascade.All().Column("address_id");
    References(x => x.Customer).Cascade.All().Column("customer_id");
} 
```

表：

```
CREATE TABLE [order_states] (
    [id] INTEGER  NOT NULL PRIMARY KEY,
    [state] NVARCHAR(50)  NOT NULL
);

CREATE TABLE [orders] (
    [id] INTEGER  NOT NULL PRIMARY KEY,
    [customer_id] INTEGER  NOT NULL,
    [address_id] INTEGER  NOT NULL,
    [state_id] INTEGER  NOT NULL,
    [created] DATE,

    FOREIGN KEY(customer_id) REFERENCES customers(id),
    FOREIGN KEY(address_id) REFERENCES addresses(id),
    FOREIGN KEY(state_id) REFERENCES order_states(id)
); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:29:24.303

由一个愚蠢的错误引起。我将状态映射为 id 而不是属性。

正确映射：

```
public OrderMapping()
        {
            Table("orders");
            Id(x => x.Id);
            Map(x => x.Status, "state_id").CustomType<Order.OrderStatus>().Not.Nullable();
            References(x => x.Address).Cascade.All().Column("address_id");
            References(x => x.Customer).Cascade.All().Column("customer_id");
        } 
```

# ios6 - 需要解决与 MonoTouch 中的方向相关的问题

> ID：14233441
> 
> 赞同：2
> 
> 时间：2013-01-09T10:42:43.707
> 
> 标签：ios6, xamarin.ios, c#-3.0, ios-simulator

我想获取设备的当前方向。我在 AppDelegate 类中编写了这段代码：我的代码：

```
if (UIInterfaceOrientation.LandscapeLeft == (UIInterfaceOrientation)UIDevice.CurrentDevice.Orientation &&
            UIInterfaceOrientation.LandscapeRight == (UIInterfaceOrientation)UIDevice.CurrentDevice.Orientation) {
            //code
        } else {
            //code
        } 
```

**UIDevice.CurrentDevice.Orientation 给出未知数？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:57:14.910

你可以使用你的`InterfaceOrientation`财产`UIViewController`吗？

这可能是一个更好的检查值，因为它是您的应用当前旋转并“允许”旋转到的状态。检查`UIDevice`可能与 UI 的旋转不匹配。

# python - 开始 Python 一些问题

> ID：14233442
> 
> 赞同：-1
> 
> 时间：2013-01-09T10:42:43.947
> 
> 标签：python

到目前为止，我已经编程了大约一年，我所做的只是 Java 和 C。我会称自己为这些语言的中级，但我决定尝试学习 python。

我下载了网站的python 3.3，有点困惑。我在 Python Shell 中测试了一些程序，它似乎更像是一种计算器而不是一种语言。例如，只要我单击输入，它就会编译并运行我在那里的任何代码。我应该用什么来编写带有类和函数的更大程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T10:45:11.723

Python 是一种[解释型](http://en.wikipedia.org/wiki/Interpreted_language#Historical_background_of_interpreted.2Fcompiled)语言，而不是一种[编译](http://en.wikipedia.org/wiki/Compiled_language)型语言。

您可能习惯于编写程序然后调用编译器以生成可在您的机器上执行的“二进制”文件的语言。在 Python 中，您只需告诉 Python 直接执行代码文件，跳过编译步骤。

您可能应该找到[一个体面的教程来解释基础知识](http://www.greenteapress.com/thinkpython/)。有很多方法可以找到一个：[这是一个 SO question](https://stackoverflow.com/questions/17988/how-to-learn-python)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:43:22.813

将您的程序写在`.py`文件中，然后像这样执行它们

```
python myfile.py 
```

通过 cmdline，（在 Windows 上，您可能需要将 C:\Python33 添加到系统路径变量中）

# android - 发布的应用程序显示调试字符串？

> ID：14233443
> 
> 赞同：-1
> 
> 时间：2013-01-09T10:42:50.740
> 
> 标签：android, eclipse, debugging

> **可能重复：**
> [在发布之前删除所有调试日志记录调用：是否有工具可以做到这一点？](https://stackoverflow.com/questions/2446248/remove-all-debug-logging-calls-before-publishing-are-there-tools-to-do-this)

也许我误解了这个概念，但调试日志消息不应该只显示在未发布的应用程序中吗？

我已经用“文件”-“导出”编译了我的应用程序，它应该删除由代码的“Log.d(..)”转储的所有消息。但是，当我在运行 Eclipse 的同时运行通过 USB 连接的这个版本时，我看到各种调试消息在 LogCat 中公开显示。

我现在有点担心 - 据我记得，ProGuard 应该在创建发布版本时自动调用，但它似乎在应用程序中留下了调试注释（但其他方面似乎可以工作，因为函数名称已被混淆，我可以另见 Logcat）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:52:39.533

发布版本不会自动删除日志。而且您不应该（*推荐*）手动删除它们，因为您需要在为下一个版本等开发时将它们添加回来......，

最推荐的方法是使用**Proguard**。

**它的作用是：**将删除字节码中的日志，使它们在源代码中可用。

实现或使用：

[在发布之前删除所有调试日志记录调用：是否有工具可以做到这一点？](https://stackoverflow.com/questions/2446248/remove-all-debug-logging-calls-before-publishing-are-there-tools-to-do-this/2466662#2466662)

除了删除日志之外，proguard 还可以通过多种方式帮助优化您的应用程序。

[http://proguard.sourceforge.net/](http://proguard.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:46:51.840

我想我找到了问题的原因 - 我有

```
-assumenosideeffects class android.util.Log {
   public static *** d(...);
   public static *** i(...);
   public static *** v(...);
} 
```

在我当地的 proguard-project.txt 中，但尽管有这条线

```
proguard.config=${sdk.dir}\\tools\\proguard\\proguard-android-optimize.txt:proguard-project.txt 
```

在我的 project.properties 文件中，proguard-project.txt 似乎从未因任何原因被使用过。我已将日志删除参数添加到我的 proguard-android-optimize.txt 中，现在它可以工作了，导出应用程序时会删除日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T10:58:03.177

它不会删除日志语句！！！您可以手动删除它们，并将其作为更新提交，以防您发布应用程序。

更好的方法是，创建一个类，如 Globals，并在其中放置一个标志，上面写着 isDevelopement

```
public class Globals
{
    static boolean isDevelopment = 1;

    public static void log(String tag, String message)
    {
      if(isDevelopment==1)
         Log.d(tag,message);
    }
} 
```

在每个有日志语句的地方，都可以这样称呼它

```
Globals.log("TAG", "MESSAGE"); 
```

所以这样，当你发布时，你只需要将 isDevelopment 更改为 0。日志就会消失。在处理它时，只需将其更改为 1。

希望这可以帮助

# android - GPS 在建筑物内不工作

> ID：14233449
> 
> 赞同：1
> 
> 时间：2013-01-09T10:43:03.860
> 
> 标签：android, gps, android-location

在屋外进行了几个小时的测试后，当我回到家时，我发现 GPS 已启用，但未在建筑物内进行定位`onLocationChanged`。因此无法调用其方法。

**问题：** 如何知道 GPS 没有得到任何位置修复，因为设备继续在“尝试模式”下感知您的位置。通过尝试模式，我的意思是即使在 20 到 30 分钟后它仍然没有得到任何结果的情况，它仍然宣布它自己启用（在状态栏中闪烁）。

如何知道 GPS 无法获取位置，因此切换到另一个提供商，例如 Network_Provider。

简而言之，我想让我的设备得出结论，GPS 可以肯定地找到位置修复，或者您必须通过其他方式获取位置。

我希望至少有人可以告诉我如何处理这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T10:51:00.000

下面的链接有一个很棒的教程，关于如何从 GPS 和/或网络获取位置。

它使用一个计时器任务，它分析在特定时间段内是否有 GPS 位置，假设为 20 秒。如果不是，它将从网络返回位置作为当前位置。如果有来自 GPS 的位置，那么它将比较哪个更新是新的（最新的），然后返回。

[在 Android 上获取用户当前位置的最简单、最可靠的方法是什么？](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a/3145655#3145655)

# sql-server - 摘要 树问题 SQL

> ID：14233453
> 
> 赞同：0
> 
> 时间：2013-01-09T10:43:13.220
> 
> 标签：sql-server, tree, treeview, hierarchy

> 这是我的代码的结果，但我将总结示例 nodid 1.1 和 1.2 报告：发票附录

1.  > InvoiceNo 8027944
    > ExtRef: 1600056051
    > 订购金额 3 395 300,00 kr
    > Ordername Registrering i Fenix E
    > Rest: 3 395 300,00 kr
    > 发票日期 2012-11-06

2.  这是我的输出，但这不对

    > ```
    >  Our reference   Nod_id     In nodid   amount
    > 1960110000       1.1        1              0,00    
    > 1960110001       1.1.1      1.1        29000,00       
    > 1960120000       1.1.2      1.1         5000,00
    > 1960130000       1.2        1              0,00
    > 1960130001       1.2.1      1.2         1920,00 
    > ```

1.  我有这个输出

    > ```
    >  Our reference   Nod_id     In nodid   amount
    > 1960110000       1.1        1          34000,00<br>
    > 1960130000       1.2        1           1920,00</li> 
    > ```

我的问题是我将总结例如 Nod_id 1.1 和 1.2 的行，但我将有我们的参考 1960110000 和描述位置 1 ......我的代码

```
sql, 1 DBSELECT 
t.project,
t.work_order as projakt,
t1.orderram,
t2.flag ,
t2.ext_inv_ref,
t2.work_order,
t2.used_hrs,
t2.cur_amount as belopp,
t4.description, 
t5.nod_id_2 as ing_nodid,
t5.nod_id_1 as nodid,
t5.ingar_pakt as namn,
t2.work_order,
SUM(t2.used_hrs) as used_hrs,
SUM(t2.cur_amount) as belopp
from  atsworkorder t
left join  afx01projact4  t5 on t.client =t5.client and t.work_order = t5.dim_value and t5.attribute_id = 'BF' 
left join afx01projact2  t1 on t.client=t1.client and t.work_order = t1.dim_value
left join atsinvhistr t2 on t.client=t2.client and t.work_order  = t2.work_order and '<datum>' >= t2.voucher_date
left join agldescription t4 on t.client =t4.client and t4.dim_value = t.work_order
where  t.project ='<proj>'  and t.client = '<client>'  
group by
t.project,
t.work_order,
t2.work_order,
t5.nod_id_1,
t5.dim_value,
t5.nod_id_2 ,
t5.ingar_pakt ,
t1.orderram,
t2.flag,
t2.ext_inv_ref,
t2.used_hrs,
t2.cur_amount,
t4.description
order by nodid 
```

# java - 这个简单算法的计算复杂度

> ID：14233454
> 
> 赞同：1
> 
> 时间：2013-01-09T10:43:15.453
> 
> 标签：java, algorithm, complexity-theory

我在java中计算了这个算法的最佳情况复杂度、平均值和最差，我认为如果好在`O (1)`最坏的情况下是`O (n)`，但我不知道是否平均！你能帮我计算一下吗？谢谢你！

```
public boolean searchFalse(boolean[] b){ 
 boolean trovato=false; 
  for(int i=0;i<b.length;i++){
   if(b[i]==false){
 trovato=true;
 break;
   }
  }return trovato;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T10:49:13.053

忍不住重写

```
public boolean searchFalse(boolean[] bs){
    for (boolean b : bs) if(!b) return true;
    return false;
} 
```

这在第一个元素可能 O(1) 之后停止。

如果所有布尔值都是随机的，则平均搜索时间为 O(1)，因为您平均执行 2 次搜索，或者如果在随机位置通常有一个错误值，则平均值为 O(N)

如果一定要一路搜索，最坏的情况是O(N)

简而言之 O(N/2) = O(N)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:27:40.383

算法的复杂度是**O(N)**。

如果您需要平均迭代次数，则如果数组带有随机布尔值，则预期为 (1/1 + 1/2 + 1/4 +.. + 1/N) = ( **2 - 1/N ) 次迭代。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T10:45:14.633

平均情况也是 O(n)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T10:46:20.913

平均情况将是 O(n) 作为最坏情况，因为它的数组迭代。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T10:50:46.227

因为这是 BOOLEAN 数组，所以平均复杂度是常数 O(1.5)，最差的 O(n)。

# c - 处理完信号后，C 程序能否继续执行？

> ID：14233464
> 
> 赞同：15
> 
> 时间：2013-01-09T10:44:03.437
> 
> 标签：c, signals

我是通过 C 在 Unix 中处理信号的新手，我一直在看一些关于它的教程（出于纯粹的兴趣）。

我的问题是，是否可以在处理信号的点之后继续执行程序？

我知道信号处理函数会进行清理，但是本着异常处理的精神（例如在 C++ 中），是否可以以相同的方式处理该信号并使程序继续正常运行？

目前`catch`进入无限循环（可能退出的一种方法是调用`exit(1)`）。

我的意图是`b`被分配 1 并让程序优雅地完成（当然，如果可能的话）。

这是我的代码：

```
#include <signal.h>
#include <stdio.h>

int a = 5;
int b = 0;

void catch(int sig)
{
    printf("Caught the signal, will handle it now\n");
    b = 1;
}

int main(void)
{
    signal(SIGFPE, catch);

    int c = a / b;

    return 0;
} 
```

此外，由于 C 是程序性的，在违规语句之前声明的信号处理程序如何在后者执行后实际调用？

最后，为了让处理函数正确地进行清理，所有在发生异常时需要清理的变量都需要在函数之前声明，对吧？

如果上述某些内容非常明显，请提前感谢您的回答和道歉。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T11:10:10.073

是的，这就是信号处理程序的用途。但是有些信号需要特别处理才能让程序继续运行（例如 SIGSEGV、SIGFPE、……）。

请参阅手册页`sigaction`：

> 根据 POSIX，进程在忽略不是由 kill(2) 或 raise(3) 生成的 SIGFPE、SIGILL 或 SIGSEGV 信号后，其行为是不确定的。整数除以零有未定义的结果。在某些架构上，它会生成一个 SIGFPE 信号。（同样将最大负整数除以 -1 可能会生成 SIGFPE。）忽略此信号可能会导致无限循环。

现在，你*忽略*了这个信号，没有做任何事情来阻止它（再次）发生。您需要信号处理程序中的执行上下文并手动修复它，这涉及覆盖一些寄存器。

> 如果在 sa_flags 中指定了 SA_SIGINFO，则 sa_sigaction（而不是 sa_handler）指定 signum 的信号处理函数。这个函数接收信号编号作为它的第一个参数，一个指向 siginfo_t 的指针作为它的第二个参数，一个指向 ucontext_t（转换为 void *）的指针作为它的第三个参数。（通常，处理函数不使用第三个参数。有关 ucontext_t 的更多信息，请参见 getcontext(2)。）

上下文允许在发生故障时访问寄存器，并且需要更改以允许您的程序继续。请参阅此[lkml 帖子](https://lkml.org/lkml/1996/4/27/27)。如那里所述，`siglongjmp`也可能是一种选择。该帖子还提供了一个相当可重用的解决方案来处理错误，而不必将变量设为全局等：

> 而且因为您自己处理它，所以您可以灵活地处理错误。例如，您可以使故障处理程序跳转到函数中的某个指定点，如下所示：

```
 __label__ error_handler;   
 __asm__("divl %2"      
         :"=a" (low), "=d" (high)       
         :"g" (divisor), "c" (&&error_handler))     
 ... do normal cases ...

 error_handler:     
     ... check against zero division or overflow, so  whatever you want to .. 
```

> 然后，您的 SIGFPE 处理程序只需要执行类似的操作
> 
> 上下文.eip = 上下文.ecx;

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-11T13:51:37.330

如果您知道自己在做什么，则可以将指令指针设置为指向有问题的指令之后。下面是我的 x86（32 位和 64 位）示例。不要在家里或在实际产品中尝试！！！

```
#define _GNU_SOURCE /* Bring REG_XXX names from /usr/include/sys/ucontext.h */

#include <stdio.h>
#include <string.h>
#include <signal.h>
#include <ucontext.h>

static void sigaction_segv(int signal, siginfo_t *si, void *arg)
{
    ucontext_t *ctx = (ucontext_t *)arg;

    /* We are on linux x86, the returning IP is stored in RIP (64bit) or EIP (32bit).
       In this example, the length of the offending instruction is 6 bytes.
       So we skip the offender ! */
    #if __WORDSIZE == 64
        printf("Caught SIGSEGV, addr %p, RIP 0x%lx\n", si->si_addr, ctx->uc_mcontext.gregs[REG_RIP]);
        ctx->uc_mcontext.gregs[REG_RIP] += 6;
    #else
        printf("Caught SIGSEGV, addr %p, EIP 0x%x\n", si->si_addr, ctx->uc_mcontext.gregs[REG_EIP]);
        ctx->uc_mcontext.gregs[REG_EIP] += 6;
    #endif
}

int main(void)
{
    struct sigaction sa;

    memset(&sa, 0, sizeof(sa));
    sigemptyset(&sa.sa_mask);
    sa.sa_sigaction = sigaction_segv;
    sa.sa_flags = SA_SIGINFO;
    sigaction(SIGSEGV, &sa, NULL);

    /* Generate a seg fault */
    *(int *)NULL = 0;

    printf("Back to normal execution.\n");

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-09T10:50:56.460

一般来说，是的，处理程序返回后继续执行。但是，如果信号是*由*硬件错误（例如浮点异常或分段错误）引起的，则您无法撤消该错误，因此无论如何都会终止您的程序。

换句话说，你必须区分信号和引起信号的事物。信号本身是非常好的和可处理的，但它们并不总是让你修复*导致信号的错误*。

（有些信号是特殊的，比如 ABRT 和 STOP，从某种意义上说，即使你只是用 手动发出这样的信号`kill`，你仍然不能“阻止它的影响”。当然，甚至根本无法处理 KILL。）

# javascript - 有什么简单的方法可以有效地在未知的短字符串中找到特定的术语或短语？

> ID：14233470
> 
> 赞同：0
> 
> 时间：2013-01-09T10:44:25.500
> 
> 标签：javascript, algorithm, nlp

致力于推特可视化。我有一个大数据集。我只想使用包含特定字符串的推文消息。

我现在有这一行：

* * *

data = data.filter(function(d, i) { return d.text.indexOf('new year')!=-1 ? true : false;});

* * *

它返回 twitterfeed 中包含字符串**'new year' 的**所有推文。工作正常！:)

但是如何选择多个字符串？

实际上，我希望这篇文章还返回包含**“新年”**和/或**“新年快乐”**和/或“2013 年快乐”和/或拼写错误等变体的推文。

希望可以有人帮帮我..

2013 年快乐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:20:33.557

将您的搜索词放在它们自己的数组中，然后在运行检查时循环遍历它。

```
var searchTerms = ['new year', 'christmas', 'boxing day'];

data = data.filter(function(d, i) { 
   var termFound = false;
   for (x in searchTerms) {
      if (d.text.indexOf(searchTerms[x]) != -1) {
          termFound = true;
      }
   }
   return termFound;
   }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:10:43.917

这是一个非常经典的字符串搜索/字符串匹配问题。首先，一些术语：字符串匹配算法通常将搜索空间称为“文本”——在这种情况下，是您的一条或多条推文；和“模式” - 您的搜索词。

大多数字符串匹配算法的复杂性是根据文本的长度、模式的长度和匹配的数量来衡量的。

天真的方法当然是嵌套循环和线性搜索。伪代码：

```
foreach text (tweet)
    foreach pattern (search term)
        linear search the text for the pattern 
```

这是 O(t * p)，其中 t 是所有文本的总长度，p 是所有模式的总长度。您可能会在这方面有很大的改进，特别是如果文本或模式在多次运行中是固定的，允许您进行一些预处理以进行有效搜索。查看[Wikipedia 对字符串搜索算法的描述，](http://en.wikipedia.org/wiki/String_searching_algorithm)了解一些可能性。

您对特定算法的选择可能取决于您的内存限制以及预处理时间和运行时复杂性之间的权衡。但我会抛出一些东西来看看。听起来您的模式可能是固定的，并且您的文本可能会有所不同（搜索不同的 twitter 提要？），因此您可能需要查看[Aho-Corasick 算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)。您可能会发现[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)也是一种有用的数据结构。来自这些 Wikipedia 页面的链接以及对这些术语的 Google 搜索应该可以帮助您入门（您甚至可能会找到已实现的代码来提供帮助，尽管我不使用 JavaScript，所以我不知道在那里推荐什么）。

# python - 正则表达式与评论不匹配

> ID：14233471
> 
> 赞同：0
> 
> 时间：2013-01-09T10:44:27.913
> 
> 标签：python, regex

我尝试了各种正则表达式，包括提到的 @Python [3 正则表达式来查找多行注释](https://stackoverflow.com/questions/7081882/python-3-regular-expression-to-find-multiline-comment)以匹配下面给出的输入文件，完整的代码也在下面。以下是正则表达式正在使用 currenlty 匹配输入文件[@http://pastie。 org/5653293](http://pastie.org/5653293)

```
pattern = re.compile(r'/\*.*?'+ needle + '.*?\*/', re.DOTALL) 
```

有人可以就正则表达式不匹配的原因提供输入吗？

```
import os
import sys
import re
import fnmatch

def find_and_remove(haystack, needle):
    re.escape(needle)
    pattern = re.compile(r'/\*.*?'+ needle + '.*?\*/', re.DOTALL)
    return re.sub(pattern, "", haystack)

for path,dirs,files in os.walk(sys.argv[1]):
    for fname in files:
        for pat in ['*.cpp','*.c','*.h','*.txt']:
            if fnmatch.fnmatch(fname,pat):
                fullname = os.path.join(path,fname)
                # put all the text into f and read and replace...
                f = open(fullname).read()
                result = find_and_remove(f, r"Copyright (c) 2012, The Linux Foundation. All rights reserved") 
```

输入：- [http://pastie.org/5653293](http://pastie.org/5653293)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:39:42.140

使用“Copyright \(c\) 2012, The Linux Foundation。保留所有权利”。您需要转义括号，因为它们在正则表达式中已经具有含义（捕获）。

搜索有关如何转义正则表达式的更多信息。

# regex - 使用正则表达式匹配字符串中的小数

> ID：14233472
> 
> 赞同：0
> 
> 时间：2013-01-09T10:44:27.870
> 
> 标签：regex, gwt

我想使用正则表达式从字符串中获取两位小数，但我只得到第一个。

`getGroupCount`是正确的，但我总是得到`{1}`，我不知道为什么。我正在使用 GWT 2.5。这是我的代码：

```
private void readOffset(){
    RegExp regExp = RegExp.compile("(\\{\\d\\})");

    MatchResult matcher = regExp.exec("(cast({1} as float)/{24})");

    String val1 = matcher.getGroup(0);
    String val2 = matcher.getGroup(1);
} 
```

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:46:42.020

运算符`\d`只会产生 1 位数字。如果要获得两个，则需要使用`\d{2}`. 如果您需要匹配更多，则需要使用`\d+`，其中`+`表示 1 次或多次重复。

像这样的东西对我有用（虽然Java，不完全是GWT）：

```
 String str = "(cast({1} as float)/{24})";
        Pattern p = Pattern.compile("(\\{\\d+\\})");
        Matcher m = p.matcher(str);         
        while(m.find())
        {
            System.out.println(m.group(1));
        } 
```

产量：`{1}`和`{24}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:20:57.237

要了解如何在 GWT 客户端使用 Regex，请查看 GWT for Regex 中的单元测试用例。参考 -[正则表达式的 GWT 单元测试](http://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/user/test/com/google/gwt/regexp/shared%253Fstate%253Dclosed)

此外，您应该使用**com.google.gwt.regexp.shared**的 RegExp 和 MatchResult 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:53:21.013

我对正则表达式很愚蠢，所以我快速而肮脏地解决了它：

```
private void readOffset(){
    String offset = manager.get("offset");

    String v1 = offset.substring(offset.indexOf("{")+1, offset.indexOf("}"));
    String v2 = offset.substring(offset.lastIndexOf("{")+1, offset.lastIndexOf("}"));

    multiplikator.setValue(v1);
    divisor.setValue(v2);

    /*
    RegExp regExp = RegExp.compile(".*({\\d+}).*", "g");
    MatchResult matcher = regExp.exec(offset);
    boolean matchFound = (matcher != null);

    if(matchFound == true && matcher.getGroupCount() == 2){
        String val1 = matcher.getGroup(0);
        String val2 = matcher.getGroup(1);

        multiplikator.setValue(matcher.getGroup(0));
        divisor.setValue(matcher.getGroup(1));
    }else{
        multiplikator.setValue("1");
        divisor.setValue("1");
    }
    */
} 
```

欢迎更好的解决方案:(

# php - 通过 Kentico API PHP 认证用户

> ID：14233473
> 
> 赞同：2
> 
> 时间：2013-01-09T10:44:31.503
> 
> 标签：php, api, authentication, kentico

我需要根据存储在 Kentico CMS (v6.0.21) 上运行的用户数据库中的用户名和密码来允许访问 Wordpress 博客

我了解如何覆盖 Wordpress 会员系统，但不确定如何从外部源访问 Kentico API（如果有 php 示例可用，但任何事情都可以）。

有没有人有任何例子说明如何实现这一目标？在 Kentico 方面需要做什么才能允许访问 API？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:42:49.010

您是否已尝试按照[此处](http://devnet.kentico.com/docs/devguide/using_api_and_cms_controls_outside_cms_project.htm "这里")所述添加对 Kentico DLL 的引用？

# facebook - 使用应用程序访问令牌，为什么我需要 publish_stream 权限而不仅仅是 publish_actions

> ID：14233489
> 
> 赞同：0
> 
> 时间：2013-01-09T10:45:14.227
> 
> 标签：facebook, facebook-graph-api, permissions

我正在使用应用程序访问令牌写入 facebook 用户的墙（使用 asp.net 中的 facebook 图形工具包）。我发现如果我有 publish_stream 权限，该过程可以正常工作，但如果我只有 publish_actions 则失败。我宁愿只使用 publish_actions 以避免第二个屏幕权限请求。

这个问题似乎违背了 fb 文档，其中声明“向前迈进，我们建议应用程序只请求发布操作，因为此权限包含其他两个，我们希望简化模型。” （[https://developers.facebook.com/docs/concepts/login/permissions-login-dialog/](https://developers.facebook.com/docs/concepts/login/permissions-login-dialog/)）

我想知道是否有其他人经历过并克服了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:23:28.817

你需要看看[这个](https://developers.facebook.com/blog/post/2012/04/25/streamlining-publish_stream-and-publish_actions-permissions/)。

它说-

> publish_actions 现在将包括基本的 publish_stream 权限（包括在用户的时间轴上发布、发布照片/视频、评论和喜欢内容），这些权限将出现在第一个 Auth Dialog 屏幕上。通过此更改，之前授予 publish_stream 的应用程序不需要请求 publish_actions。

正如你所说，但是-

> 如果您需要特定功能，例如发布到朋友的时间线或群组，您仍然需要请求 publish_stream，它会出现在用户也可以选择退出的第二个屏幕上。

# ruby - Datamapper：报告为什么我不能销毁记录

> ID：14233496
> 
> 赞同：5
> 
> 时间：2013-01-09T10:45:48.837
> 
> 标签：ruby, datamapper, ruby-datamapper

我正在使用 datamapper 和 dm-constraints 设置我的数据库模型。我有两个具有多对多关系的模型，但是当我尝试破坏一个模型时，我得到的唯一消息是`false`.

是否有可能让 datamapper 给我更多的反馈，到底是哪种关系导致了问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-01T12:13:04.540

使用数据映射器 1.2.1：

```
def why_you_no_destroy? model
  preventing = []
  model.send(:relationships).each do |relationship|
    next unless relationship.respond_to?(:enforce_destroy_constraint)
    preventing << relationship.name unless relationship.enforce_destroy_constraint(model)
  end
  preventing
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-26T13:04:51.160

不幸的是，DM 没有提供报告销毁失败原因的方法。

大多数时候，破坏失败是因为它的关联。DM 有一种机制来避免孤立记录。

为了避免这种破坏失败，可以使用 dm-constraints( [https://github.com/datamapper/dm-constraints](https://github.com/datamapper/dm-constraints) ) 设置真正的数据库级外键引用，默认为保护，但可以设置为级联而是删除。

```
class List
  has n, :todos, :constraint => :destroy (or :destroy!)
end 
```

遗憾的是，目前 dm-constraints 仅支持 PostgreSQL 和 MySQL。

对于其他数据库，可以手动检查所有关联，先删除，再删除模型。</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T00:11:01.873

您可以从以下位置获取有关 DataMapper 错误的信息

```
model.destroy
if model
  model.errors.each do |error|
    p error
  end
end 
```

有时这并不能告诉您任何事情，在这种情况下，您可以将代码放在开始/救援块中，例如

```
begin
  model.destroy
rescue Exception => exc
  p exc
end 
```

# vim - 如何替换光标下的单个单词？

> ID：14233498
> 
> 赞同：177
> 
> 时间：2013-01-09T10:45:54.947
> 
> 标签：vim, replace

如何在 Vim 中替换光标下的单词。

因此，不是使用`dw`then `i`then 单词 then `Esc`，而是有一个更简单的组合来替换光标下的单词？

* * *

## 回答 #1

> 赞同：301
> 
> 时间：2013-01-09T10:48:40.730

```
ciw 
```

（更改内词）将更改光标下的*整个单词。*与之比较

```
cw 
```

这只会从*当前光标位置*更改单词。有关更多信息，请参阅[此 SO](https://stackoverflow.com/questions/1379198/in-vim-how-do-i-delete-a-word-and-go-into-insert-mode)问题/答案。

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2013-11-08T14:26:28.213

我经常发现自己想用我从别处抽出的另一个词来替换一个词。其他解决方案的问题是，如果您尝试更改一个单词，那么您的下一个粘贴将*是*您删除的那个单词`cw`。

尝试以下操作：

```
1 "This first word should overwrite the second"

yiw     yank inner word (copy word under cursor, say "first").
...     Move the cursor to another word (say "second").
viwp    select "second", then replace it with "first". 
```

希望这就是你要找的。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-01-09T10:48:46.200

`c``i``w`

```
c   change
iw  inner word 
```

这将删除光标下的单词（即使光标位于单词中间的某个位置）并进入插入模式。

* * *

另请参阅 Vim 的文档以供参考：

```
:help c
:help text-objects 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2018-06-26T17:34:43.980

如果你想用之前拉过的词来改变一个词，还有另一种解决方案`viwp`（一旦你拉了第一个词）。

`ciw`删除前一个单词并将您置于插入模式。但随后您可以使用`ctrl+r, 0`插入寄存器 0 的内容（其中包含先前抽出的单词）。

所以：

```
yiw
[move to next word]
ciw
ctrl+r
0 
```

这比`viwp`因为在第一次使用后您可以重复使用`.`. 它也不会切换到可视模式并短暂突出显示。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T10:51:45.123

尝试`cw`- 如“更改单词”。

使用[http://linuxmoz.com/vi-commands-cheat-sheet/](http://linuxmoz.com/vi-commands-cheat-sheet/)或任何其他备忘单作为参考。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-01T19:05:56.223

要复制光标下的单词，请按：`b``v``e``y`

要替换光标下的单词，请按：`b``v``e``p`

# php - cakephp通过get函数解析数据

> ID：14233503
> 
> 赞同：0
> 
> 时间：2013-01-09T10:46:15.447
> 
> 标签：php, cakephp

每当我从数据库中获取一个用户时，我想说“如果这个用户的这个字段是空的......”

这适用于当前用户和从数据库中检索到的每个用户。我会把这个 if 语句放在哪里？它会进入模型还是有一个通用函数可以在呈现任何用户之前在用户控制器中使用？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:54:17.433

您可以`afterFind`在模型中使用来执行此类检查，这将适用于为查找操作返回的数据，例如：

```
//like for User model's some field
public function afterFind($results, $primary = false) {
    foreach ($results as $key => $val) {
        if (empty($val['User']['some_field'])) {
            $results[$key]['User']['some_field'] = "Empty Field"; 
        }
    }
    return $results;
} 
```

注意：- 您也可以在模型类或 AppModel 中定义此类函数。

# php - 在下一个链接分页中传递查询 - php

> ID：14233509
> 
> 赞同：1
> 
> 时间：2013-01-09T10:46:28.133
> 
> 标签：php, mysql, pagination

我创建了一个下一个和上一个按钮，以便每页过滤 15 个结果，它工作得非常好，直到我添加了一个过滤结果的 sql 查询。我注意到在 url 中没有附加查询字符串，所以我试图操纵下一个链接，以便在单击时显示结果，但仍然没有（只是一个空白页）......这是我对下一个链接所做的事情：

```
$gap = $numRows - $startrow;

if ($gap >=15)

//now this is the next link..
echo '<a href="'.$_SERVER['PHP_SELF'].'?startrow='.($startrow+15).'?category='.$category.'" style="float:right">Next</a>'.'  '; 
```

我添加了类别部分，它从用户选择的类别中获取其值，当我单击下一步时它显示正确的 url，但显示结果的空白页。

有没有办法做到这一点？

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:49:14.927

你打错了; 第二 ？应该 ＆

```
echo '<a href="'.$_SERVER['PHP_SELF'].'?startrow='.$startrow+15).'&category='.$category.'" style="float:right">Next</a>'.'  '; 
```

这应该工作

# validation - 处理 Scalaz6 验证列表

> ID：14233511
> 
> 赞同：8
> 
> 时间：2013-01-09T10:46:36.557
> 
> 标签：validation, scala, scalaz

有没有一种惯用的方式来处理 Scalaz6 中的验证集合？

```
val results:Seq[Validation[A,B]]
val exceptions = results.collect{case Failure(exception)=>exception}
exceptions.foreach{logger.error("Error when starting up ccxy gottware",_)}
val success = results.collect{case Success(data)=>data}
success.foreach {data => data.push}
if (exceptions.isEmpty)
   containers.foreach( _.start()) 
```

我可以考虑在循环结果时使用折叠，但最终测试呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T11:55:13.407

使用验证列表的常用方法是`sequence`将列表转换为 a ，如果在此过程中出现任何错误`Validation[A, List[B]]`，它将为空（即 a ）。`Failure`

排序 a会在左侧类型的半群中`Validation`累积错误（与 相反，后者会立即失败）。`Either`这就是为什么您经常看到使用`ValidationNEL`（`NEL`代表`NonEmptyList`）而不是简单地使用`Validation`。因此，例如，如果您有这种结果类型：

```
import scalaz._, Scalaz._

type ExceptionsOr[A] = ValidationNEL[Exception, A] 
```

还有一些结果：

```
val results: Seq[ExceptionsOr[Int]] = Seq(
  "13".parseInt.liftFailNel, "42".parseInt.liftFailNel
) 
```

测序将为您提供以下信息：

```
scala> results.sequence
res0: ExceptionsOr[Seq[Int]] = Success(List(13, 42)) 
```

另一方面，如果我们遇到这样的错误：

```
val results: Seq[ExceptionsOr[Int]] = Seq(
  "13".parseInt.liftFailNel, "a".parseInt.liftFailNel, "b".parseInt.liftFailNel
) 
```

我们最终会得到一个`Failure`（请注意，我已重新格式化输出以使其在此处清晰可见）：

```
scala> results.sequence
res1: ExceptionsOr[Seq[Int]] = Failure(
  NonEmptyList(
    java.lang.NumberFormatException: For input string: "a",
    java.lang.NumberFormatException: For input string: "b"
  )
) 
```

所以在你的情况下，你会写这样的东西：

```
val results: Seq[ValidationNEL[A, B]]

results.sequence match {
  case Success(xs) => xs.foreach(_.push); containers.foreach(_.start())
  case Failure(exceptions) => exceptions.foreach(
    logger.error("Error when starting up ccxy gottware", _)
  )
} 
```

请参阅我的答案[here](https://stackoverflow.com/a/12358892/334519)和[here](https://stackoverflow.com/a/12309023/334519)`sequence` ，了解更多关于`Validation`更一般性的详细信息。

# java - 关于 Eclipse 中没有出现的属性和方法的建议

> ID：14233515
> 
> 赞同：12
> 
> 时间：2013-01-09T10:46:45.740
> 
> 标签：java, android, eclipse

我正在eclipse中开发android应用程序。我是新手。但是当在类实例之后按点（。）时，没有弹出菜单出现，显示建议和属性。我附上截图。![在此处输入图像描述](../Images/af9c692f42cf14b50a56646abc6ea516.png)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-09T10:49:16.460

尝试在“Windows > Preferences > Java > Editor > Content Assist > Advanced”中恢复默认选项。

[你可以在这里](https://stackoverflow.com/a/908930/1298796)找到你的答案。

# javascript - 在按下 Enter 键时它移动到其他页面而不是调用 Java 脚本（附加代码）

> ID：14233517
> 
> 赞同：0
> 
> 时间：2013-01-09T10:46:50.170
> 
> 标签：javascript, asp.net, events, textbox

当我在 txtZip 文本框上按 enter 键时它移动到其他页面而不是调用 JS 我想将另一个文本框值 eqaul 设置为 txtZip

```
<asp:TextBox Style="text-align: center" ID="Txt_Zip" runat="server" Width="120px"
                    Text="Zip" onkeypress="return runScript(event)"></asp:TextBox>
<asp:TextBox Style="text-align: center" ID="Txt_Second" runat="server" Width="120px"
                    Text="Zip"></asp:TextBox>

function runScript(e)
{
if (e.which == 13 || e.keyCode == 13)
{
   var zip =document.getElementById("txtZip").value;
   document.getElementById("txt_Second").value=zip;
}

} 
```

因为我有一个按钮也可以在单击时重定向到另一个页面如何限制在文本框中按下回车键时只需调用 JS 吗？

希望您的建议

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T10:11:53.597

尝试这个：

```
<script> 
$(document).ready(function() {
         $("input[id$='Txt_Zip']").on('keypress', function(e) {
           var code = (e.keyCode ? e.keyCode : e.which);
             if(code == 13) { 
              $("input[id$='Txt_Second').val($(this).val());
              return false;
           }
         });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:49:37.517

只需`e.preventDefault();`在 if 语句大括号内添加即可。这告诉事件不执行默认操作（提交表单）。

```
function runScript(e)
{
if (e.which == 13 || e.keyCode == 13)
{
   var zip =document.getElementById("txtZip").value;
   document.getElementById("txt_Second").value=zip;
   if (e.preventDefault) {
       e.preventDefault();
   }
   return false;
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T10:49:44.837

尝试这个：

```
function runScript(e)
{
if (e.which == 13 || e.keyCode == 13)
{
   var zip =document.getElementById("txtZip").value;
   document.getElementById("txt_Second").value=zip;
   return false;
}

} 
```

# jquery - 是否可以使用 jQuery 使用另一个网站的内容？

> ID：14233528
> 
> 赞同：-7
> 
> 时间：2013-01-09T10:47:24.203
> 
> 标签：jquery, google-chrome-extension

我正在尝试创建一个 Google chrome 扩展，我需要在其中获取其他网站的内容。我使用 jQuery 是因为很多人建议我将它用于 Google 扩展。是否可以使用 jQuery 获取另一个网站的内容？如果是这样，请告诉我如何做到这一点。

如果没有，我已经看到很多 Google 扩展都这样做了。谁能告诉我如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:56:49.280

这在 HTTP 中是不允许的，这是某种跨端脚本 :-D 您只能访问您自己域中的内容！例如：您的网站想要显示来自另一个网站的一些数据是：www.yourdomain.com/mypage.html

表单 myside.html 您只能从 www.yourdomain.com 访问资源（图像、其他 html 等）...

有两种方法可以“显示”来自另一个网站的内容：

1.  在 mypage.html 中使用 iframe
2.  让您的网络服务器检索其他网站，解析该数据并生成 mypage.html 的 html，其中包含已集成的其他网站的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:52:12.157

查找`iframes`原生 HTML 解决方案 - [https://developer.mozilla.org/en-US/docs/HTML/Element/iframe](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe)

或者，使用 jQuery`.load()`函数进行研究 - [http://api.jquery.com/load/](http://api.jquery.com/load/)。但是，它的功能受到[同源策略的限制](http://en.wikipedia.org/wiki/Same_origin_policy)

# javascript - Requirejs，杏仁，骨干，车把

> ID：14233529
> 
> 赞同：4
> 
> 时间：2013-01-09T10:47:28.110
> 
> 标签：javascript, backbone.js, requirejs, almond

这是我的情况，将 Backbone 和 Handlebars 与 Requirejs 一起使用。

我遵循 CommonJS 模块定义风格，因为我发现自己更适应它：

```
define(function(require) {
  var Backbone = require('Backbone')
  var Item = require('model/item')
  // ...
}) 
```

这是我的requirejs配置：

```
require.config({
  baseUrl: "/javascripts/",
  paths: {
    jquery: 'components/jquery/jquery',
    underscore: 'components/underscore/underscore',
    backbone: 'components/backbone/backbone',
    handlebars: 'components/handlebars/handlebars',
    text: 'components/text/text'
  },
  shim: {
    underscore: {
      exports: "_"
    },
    handlebars : {
        exports: "Handlebars"
    },
    backbone: {
      deps: ['underscore', 'jquery'],
      exports: 'Backbone'
    }
  }
}); 
```

优化前一切运行顺利，没有出现任何问题。

但是，在使用 r.js 优化之后，依赖项似乎中断了。我想在生产中使用 Almond js，所以这是我的构建文件：

```
({
    baseUrl: ".",

    paths: {
        jquery: "components/jquery/jquery",
        underscore: "components/underscore/underscore",
        handlebars: "components/handlebars/handlebars",
        backbone: "components/backbone/backbone",
        text: "components/text/text"
    },

    // we use almond minimal amd module loader
    name: "components/almond/almond",

    // the application entry point
    include: ['app/init'],

    // we need to teel almond to require app/init
    insertRequire: ['app/init'],

    out: "main.js",

    cjsTranslate: true,

    wrap: true,

    optimize: "none"
}) 
```

现在，当我在浏览器中运行优化的 javascript 时，我得到的只是错误消息，告诉我 jQuery 和 Handlebars 是未定义`Backbone.$`的（当然也不是）。

一个简单的解决方法是强制加载 jQuery，并将其分配给 Backbone，如下所示：

```
var $ = require('jQuery')
var Backbone = require('Backbone')
Backbone.$ = $ 
```

但这对我来说听起来很愚蠢和多余。我觉得我做错了什么，但不知道是什么。

优化后，Handlebars 也无法加载为依赖项。如果我强制加载它（就像我对 jQuery 所做的那样），我会在构建过程中收到一条错误消息，告诉我`fs`找不到模块（一个 npm 包）。

我用谷歌搜索，但在谷歌群组（[https://groups.google.com/forum/?fromgroups=#!topic/requirejs/lYwXS-3qjXg](https://groups.google.com/forum/?fromgroups=#!topic/requirejs/lYwXS-3qjXg)）上只发现了这个似乎与我的问题有关的主题，即使建议的解决方案是根本不工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:31:37.587

我认为您也应该在构建文件中添加 Shim 的配置。

# ios5 - 滚动 UITableView 时 UITableView 中使用的自定义分隔符图像消失

> ID：14233533
> 
> 赞同：0
> 
> 时间：2013-01-09T10:47:36.680
> 
> 标签：ios5, uitableview

我正在使用一个简单的 UITableView 并使用分隔符作为图像。最初加载表格时，它看起来不错，但是当用户向上滚动并离开时，分隔符图像会消失。当用户向下滚动并离开时，再次出现线条。

请让我知道如何解决这个问题。

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath
{
   static NSString *CellID=@"Cell"
   MyTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SwitchCellIdentifier];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    UIImageview *aSwitch = [[UIImageview alloc] initWithImage:[UIImage imageNamed:@"divider.png"]];
    separator.frame = CGRectMake(0,50,320,1);
    [cell.contentView addSubview:seperator];

}
.......... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T01:18:02.140

您是否尝试对`separator`表中的所有分隔符使用一个实例？那是行不通的，因为视图只能添加到单个超级视图中。您应该为重用池中的每个单元格初始化一个新的分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T00:51:54.423

目前尚不清楚您在哪里声明“分隔符”，但您需要确保将其初始化并分配为每个单元格的单独实例。

```
UIView *separator = [[UIView alloc] initWithFrame:CGRectMake(0, 50, 320, 1)];
[cell.contentView addSubView:separator]; 
```

# jquery - 在 jQuery 克隆中创建微型 MCE 的克隆

> ID：14233535
> 
> 赞同：0
> 
> 时间：2013-01-09T10:47:40.057
> 
> 标签：jquery, tinymce

我必须创建一个表格的克隆，我已经像下面这样制作了。

```
 <div id="form-field" class="form">
            <input type="text" name="coursename" id="firstname" value="coursename" />
            <input type="text" name="institutename" id="institutename" value="institutename" />
            <input type="text" name="startdate" id="startdate" value="startdate" />
            <input type="text" name="enddate" id="enddate" value="enddate" />
            <textarea name="content" style="width:100%"></textarea>
            <label for="education-info">Educational Information</label>              
        </div>      
        <!-- clearfix -->
        <div class="clear"></div>
        <!-- /clearfix -->
        <input class="submit" type="submit" name="submit_second" id="submit_second" value="" /> 
```

现在我使用下面编写的 jquery 来创建上述表单的克隆。但我无法获得微型 MCE 编辑器。我怎样才能获得完整的微型 MCE 编辑器。

我的 jQuery 用于表单的克隆。

```
 jQuery('.addeducation-sym').click( function(){
    jQuery('#form-field').clone().appendTo('#form-field');
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T17:12:42.140

如果基本元素（例如 textarea）上有一个 ID，并且它也被克隆，那么您有两个具有相同 ID 的元素。在 HTML 中不允许，并且由于 tinymce 默认情况下从元素 ID 中获取其实例 ID，因此克隆实际上并不能正常工作。

诀窍是首先删除编辑器

```
tinymce.remove(); 
```

然后用 jquery 克隆你的元素。

在将克隆元素写入 DOM 之前，您需要重命名任何克隆元素的 ID 以具有唯一 ID。

然后将克隆写入DOM，然后调用

```
tinymce.init(TINYMCE_SETTINGS); 
```

其中 TINYMCE_SETTINGS 是您所有设置的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:38:19.520

如果您尝试使用已初始化的 tinymce 复制表单，您将失败。

如果您在复制表单后初始化 tinymce，您需要确保获得编辑器的 html 元素具有唯一的 id。此 id 将用作编辑器 id，如果您尝试使用相同的 id 初始化两个编辑器，则会出现错误。

# javascript - 在谷歌地图apv v3的另一个函数中调用一个带有setinterval的函数

> ID：14233536
> 
> 赞同：2
> 
> 时间：2013-01-09T10:47:40.677
> 
> 标签：javascript, google-maps-api-3, setinterval

我正在编写这段代码以在一段时间间隔后调用一个函数，但该函数没有执行它的功能。当我通常调用函数 pus() 它正在运行但使用 setInterval 它不起作用。请给我它的解决方案。

```
 var ltnlg = null;
 var flightPlanCoordinates = [];
 var nl2 = 10.9646;
 var ng2 = 72.8787;
 var lt2, ln2;
 var ltnlg = null;

 function lin() {
           flightPlanCoordinates = [
     new google.maps.LatLng(29.0167, 77.3833),
     new google.maps.LatLng(21.7679, 78.8718),
     new google.maps.LatLng(18.9647, 72.8258)
     ];

          var flightPath = new google.maps.Polyline({
               path: flightPlanCoordinates,
               strokeColor: "#FF0000",
               strokeOpacity: 1.0,
               strokeWeight: 2
               });

           flightPath.setMap(map);
           pl = new google.maps.Polyline();
           //  window.setInterval("pus()", 10000);
          pus();

           }
       }

       function pus() {

           ltnlg = new google.maps.LatLng(nl2, ng2);
           flightPlanCoordinates.push(ltnlg);
           lt2 = nl2;
            n12 = lt2 + 0.0660;
          ln2 = ng2;
          ng2 = ln2 + 0.0660;

       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:11:29.757

永远不要将回调作为字符串传递。

```
window.setInterval(pus, 10000); 
```

或者如果你想传递一些参数

```
window.setInterval(function() {
    pus(a, b, c);
}, 10000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:39:05.010

这里的问题不应该是“*为什么这对 setInterval 不起作用*”，而应该是“*为什么它在函数内部起作用*”，因为它不应该。

我猜多边形的绘制是一个异步过程，当你`pus()`从函数内部调用时它还没有完成，这就是为什么所做的更改`flightPlanCoordinates`仍然会有效果。

但是将修改后的路径应用于折线的正确方法是调用`pus()`：

```
flightPath.setPath(flightPlanCoordinates); 
```

（注意：您必须使`flightPath`全局能够从外部访问它`lin()`）

# sql-server-2008 - 如何根据另一个更新表

> ID：14233546
> 
> 赞同：0
> 
> 时间：2013-01-09T10:48:09.410
> 
> 标签：sql-server-2008

我有 2 个表`payment_scroll`，`virtual`
`virtual`表包含 4 个字段...

```
ID  self_id    net_amount   date  
1    101         600        1-1-2012  
2    102         700        5-8-2012  
3    103         900        13-11-2012  
4    104         1100       16-9-2012 
```

`payment_scroll`表格中的`net_amount`字段是从前端的 gridview 更新的。`net_amount`在同一张桌子上更新后

```
ID  self_id    net_amount   date  
1    101         950        3-4-2012  
2    102         1100       11-6-2012  
3    103         900        13-11-2012  
4    104         1100       16-9-2012 
```

我希望通过如下方式 `payment_scroll`通过表格更新第二个表格。`virtual`

```
ID  self_id  total_amount  p1   d1      p2  d2    p3 d3 p4 d4..........upto p100   d100  
1    101      5000        600 (1-1-2012) 950  (3-4-2012)  
2    102      9650        700 (5-8-2012) 1100 (11-6-2012)  
3    103      8000        900 (13-11-2012)  
4    104      1100        1100 (16-9-2012) 
```

请建议我正确的查询来做到这一点？

# php - Codeigniter 邮件无法正常工作

> ID：14233548
> 
> 赞同：0
> 
> 时间：2013-01-09T10:48:12.473
> 
> 标签：php, codeigniter

我正在使用以下代码发送电子邮件。但它在我的电子邮件中显示为来自“me@gmail.com”，当我按下回复它想要发送到“me@gmail.com”的电子邮件时也不知道我做错了什么？

```
$this->email->from($this->input->post('email'), $this->input->post('thename'));
$this->email->reply_to($this->input->post('email'), $this->input->post('thename'));
$this->email->to('me@gmail.com');
$this->email->subject('New Feedback');
$this->email->message($this->input->post('message'));
$this->email->send(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:58:10.760

我在 CodeIgniter v 2.1.2 中设置了一个简单的电子邮件测试，如下所示：

```
 $this->email->from('malcom@awdoffice.com','Malcom');
    $this->email->reply_to('awd@awdoffice.com','AWD');

    $this->email->to('marc@awdoffice.com');

    $this->email->subject('Subject Mailer-Test');
    $this->email->message('Lorem est email.');

    $this->email->send();

    $rc_email = $this->email->print_debugger(); 
```

我建议您通过以下调试过程。

(1) 在 from 和 reply_to 设置器中硬编码所有电子邮件地址和姓名。测试看看问题是否仍然存在。

(2) 如果步骤 (1) 解决了问题，那么您的输入变量可能有问题，因此请尝试打印出变量（附加到电子邮件正文）。

(3) 打印出 print_debugger 返回的文本

(4) 我在 Mozilla Thunderbird 中测试了电子邮件，并且 from、reply_to 和 to 字段按预期工作。您使用的是什么电子邮件客户端？什么电子邮件服务器（如果在本地测试）？

请随时向我们发布您的进展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:26:30.497

我想到了。我已将该站点上传到我的“真实”服务器，但忘记更改站点的 baseurl。我仍然将它作为 localhost。因此，每当我发送电子邮件时，它都会使用我的本地主机和我在 phpmailer 中设置的发件人电子邮件。

我知道一个非常愚蠢的错误，但是熬夜 20 多个小时会对某人造成这种影响。

感谢所有的帮助。

# c# - 有限制地访问类库中的方法和属性

> ID：14233550
> 
> 赞同：1
> 
> 时间：2013-01-09T10:48:32.700
> 
> 标签：c#, visual-studio, oop

我有两个类库项目：`DataAccessLibrary`和`ServiceLayerLibrary`. `ServiceLayerLibrary`需要访问`DataAccessLibrary`的方法和属性，但其他项目不能访问`DataAccessLibrary`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T10:56:24.640

首先，您可能想知道是否真的需要通过编译时或运行时检查来确保正确访问 DataAccessLibrary。也许在编码指南和标准中规定其正确使用就足够了——然后相信开发人员会遵循这些指南。再说一次，我不知道你的情况:-)

其次，您可能想知道是否真的有必要创建单独的项目。您可能只是将 DataAccessLibrary 实现为 ServiceLayerLibrary 中的内部类，然后它们就不会暴露给外界。

如果您不想这样做，那么您可以制作 DataAccessLibrary 的`public`方法`internal`，然后像这样声明可见性：

```
[assembly: InternalsVisibleTo("ServiceLayerLibrary")] 
```

这是否干净取决于您。就我个人而言，我不喜欢这种结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T10:52:04.347

让您的成员在 DataAcceessLibrary 中`internal`并使用[朋友程序集](http://geekswithblogs.net/devdevin/archive/2006/11/22/97891.aspx)，以便 ServiceLibrary 可以访问它们。

> internal 关键字（在 C# 中）允许访问同一程序集中的其他类。Friend 是 VB.Net 中的等效关键字。但是，如果您希望另一个程序集可以访问另一个程序集的“内部”内容（在 C# 中），那么您可以使用下面名为“Friend Assemblies”的 Web 链接中的方法，它将一个程序集的“内部”内容公开给另一个程序集. 在此过程中，您实际上没有在 C# 中使用关键字friend 或friendly。这就是他们所说的这种关系，你说的是 [assembly:InternalsVisibleTo("MyAssembly")]。这在您有一个程序集利用您不想公开的另一个程序集的功能的情况下很有用。您还可以将此技术与强命名程序集一起使用，例如 [assembly: InternalsVisibleTo("MyAssembly,

例子：

```
using System.Runtime.CompilerServices;
using System;

[assembly: InternalsVisibleTo("ServiceLibrary")]

// The class is internal by default. 
class FriendClass
{
    public void Test()
    {
        Console.WriteLine("Sample Class");
    }
}

// Public class that has an internal method. 
public class ClassWithFriendMethod
{
    internal void Test()
    {
        Console.WriteLine("Sample Method");
    }
} 
```

如果您需要 DataAccessLibrary 中的公共成员，您也可以使用[另一种签名方法，这可能会更好。](http://www.codeproject.com/Articles/339909/Limiting-the-accessibility-Another-way-of-Friend-A)它可以通过使用带有 StrongNameIdentityPermission 的 LinkCommand 来实现（参见[http://www.codeproject.com/Articles/339909/Limiting-the-accessibility-Another-way-of-Friend-A](http://www.codeproject.com/Articles/339909/Limiting-the-accessibility-Another-way-of-Friend-A)）。

# jquery - 单击 jQuery Mobile 可折叠集？

> ID：14233551
> 
> 赞同：0
> 
> 时间：2013-01-09T10:48:32.903
> 
> 标签：jquery, jquery-mobile, click

如何绑定单击可折叠集的一个元素？

```
<div data-role="content">
   <div data-role="collapsible-set" data-theme="d" data-content-theme="d">
       <div data-role="collapsible" id="expand">
        <h3>header</h3>
       </div>
   </div>
</div> 
```

尝试这个：

```
$(document).on('click', '#expand', function (e) {
        e.stopImmediatePropagation();
        e.preventDefault();
        console.log('ekb'); // my stuff
    }); 
```

演示：http: [//jsfiddle.net/pExFF/3/](http://jsfiddle.net/pExFF/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:15:10.597

似乎由于 jQuery Mobile 增强功能，当您单击标题时，不会触发您绑定到 click 事件的操作。一个选项（我承认不是很漂亮）可能是在进行 JQM 增强之后将事件绑定到正确的 DOM 元素。如果您确实打算阻止默认行为（这将阻止可折叠的展开！），您可以使用这样的代码：

```
$(document).on('pageinit',function (f) {
  //pageinit event is triggered after the page is initialized

    $("#expand").find("*").click(function (e) {
      //apply to all descendant of your element "#expand a" selector would be sufficient to cover the header
         e.stopImmediatePropagation();
         e.preventDefault();
     console.log('ekb');
    });
}); 
```

结果[在这里可见](http://jsfiddle.net/xmwGj/)

# javascript - 无法使用 javascript 将自定义属性添加到窗口对象

> ID：14233562
> 
> 赞同：0
> 
> 时间：2013-01-09T10:48:58.420
> 
> 标签：javascript, window, custom-attributes

如何`window`使用 javascript 向对象添加自定义属性。我这样做是这样的：

```
var mypopupWindow = window.open(url);
mypopupWindow.myProperty = window; 
```

但是当我尝试从 mypopupWindow 访问它时，myProperty 仍然存在`undefined`，我使用的是 IE.9。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:50:22.643

好吧，这在 Chrome 中对我有用

```
var originWindow = this;
var popupWindow = window.open()
popupWindow.a = "b"
originWindow.a = "c"
  popupWindow.setTimeout(function () {
    alert(this.a) //b

  },500); 
```

如果我在 JSBin 上运行此代码，警报会显示“b”。

所以`window.open`'return `window`' 的属性分配得很好。

*您当然可以在 chrome 的新窗口中打开控制台，并且具有值`Window`的属性`a``"b"`*

这是一个[JSBin](http://jsbin.com/omafod/1/edit)

![截屏](../Images/df32e6f9c7ca308007a4413361f5f762.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:53:22.240

我认为您不能在窗口对象本身上可靠地设置这些属性，但您可以在 windows 文档对象上设置它们。

# c - 一个共享库中的函数调用另一个共享库中的函数

> ID：14233567
> 
> 赞同：3
> 
> 时间：2013-01-09T10:49:12.107
> 
> 标签：c, shared-libraries

我有一个共享库说**libfile2.so**（其中包含*print2()*函数定义）。现在我创建了一个**libfile1.so**（其中包含*print1()*函数定义，该定义又调用libfile2.so 中的*print2()*函数）。现在我创建一个包含*main()函数的***main.c**文件，该函数通过动态链接 libfile1.so调用*print1() 。*

 **但我收到以下错误：

```
./libfile1.so: undefined reference to `print2'** 
```

以下是我正在使用的命令：

```
gcc -c -fpic file1.c
gcc -shared -o libfile1.so file1.o
gcc -c -fpic file2.c
gcc -shared -o libfile2.so file2.o
export LD_LIBRARY_PATH=.:$LD_LIBRARY_PATH
gcc -I. -L. -o main main.c -lfile1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:09:07.710

如果您只`print1`在您的`main.c`. `libfile2.so`然后在中设置路径`LD_LIBRARY_PATH`。因为它会尝试查找`libfile1.so`while 与 链接时的依赖关系`main.c`。

```
gcc -o file1.o -c file.c
gcc -o file2.o -c file.c
gcc -o libfile2.so file2.o -shared
gcc -o libfile1.so file1.o -L. -lfile2 -shared
gcc -o main.o -c main.c
export LD_LIBRARY_PATH=.:$LD_LIBRARY_PATH
gcc -o main.exe main.o -L. -lfile1 
```

如果您同时调用了两者`print1`，然后链接两者，如下所示`print2`。`main.c``libfile1.so``libfile2.so`

```
gcc -o main.o -c main.c
gcc -o main.exe main.o -L$YOUR_LIB_PATH -lfile1 -lfile2 
```

因为 main.c 中使用的所有符号都需要在生成可执行文件时解析。**

# iphone - NSJSONSerialization 中没有返回

> ID：14233571
> 
> 赞同：2
> 
> 时间：2013-01-09T10:49:17.093
> 
> 标签：iphone, ios, ios5, nsjsonserialization

你能原谅我最终犯的错误吗？我可以问这个问题，这是我的第一个问题。

在阅读了这个网站上的几个主题之后，[首先](https://stackoverflow.com/questions/12255290/using-nsjsonserialization-to-parse-json)我会尝试使用 describe 方法，但它仍然不起作用@all :-(

我的 .json 文件看起来像这样

```
{ "speakers" : 
  [
    {
    "name":"Value",
    "picture": "URL VALUE",
    "business":"VALUE",
    "desc":"VALUE",
    "twitter": "URL VALUE"
    }                   
    {
           ...

    }
  ]
} 
```

所以这是我的推理：

我首先有一个包含*扬声器*属性的**字典** 这个包含一个**数组，由***“名称”，“业务”*，... attr中的一些**字典组成。** 所以，这是我的 obj-C 代码：

 ******```
NSString *URLStr = @"URLofMyJsonFile";

NSURLRequest *JSONRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithString:URLStr ]]];

NSData *JSONData = [NSURLConnection sendSynchronousRequest:JSONRequest returningResponse:nil error:nil];

NSError *parsingError = nil;

NSDictionary *speakerDictionnary = [NSJSONSerialization JSONObjectWithData:JSONData options:0 error:&parsingError];

NSArray *speakersArray = [speakerDictionnary objectForKey:@"news"];

for (NSDictionary *oneSpeaker in speakersArray) {
    NSLog(@"The speakers's name is %@", [oneSpeaker objectForKey:@"name"]);
    NSLog(@"The speakers's business is %@", [oneSpeaker objectForKey:@"business"]);
    NSLog(@"The speakers's desc is %@", [oneSpeaker objectForKey:@"desc"]);
} 
```

编辑：我用 Dummy 替换了我的脚本的正确 URL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T10:58:17.710

您的 JSON 无效，各个演讲者词典之间需要有逗号。

```
{ "speakers" : 
  [
    {
        "name":"Value",
        "picture": "URL VALUE",
        "business":"VALUE",
        "desc":"VALUE",
        "twitter": "URL VALUE"
    } <=== MISSING COMMA HERE       
    {
       ...
    }
  ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:03:46.617

正如 omz 提到的，json 是错误的。你可以试试下面的代码：

```
[NSURLConnection sendAsynchronousRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.appios.fr/client/takeoff/app/script/jsonSpeaker.json"]] queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *reponse,NSData *data,NSError *error){
        if (!error) {
            NSError *jsonError;
            id json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&jsonError];
            NSArray *speakersList = [json objectForKey:@"speakers"];
            [speakersList enumerateObjectsUsingBlock:^(NSDictionary *dict,NSUInteger idx,BOOL *Stop){
                NSLog(@"Name : %@",[dict objectForKey:@"name"]);
            }];
        }

    } ]; 
```******

# java - GWT 中的还原（撤消）实现

> ID：14233574
> 
> 赞同：3
> 
> 时间：2013-01-09T10:49:30.497
> 
> 标签：java, gwt, gwt2, gwt-2.5

我们正在尝试使用 GWT 构建一个 GUI 框架。我们发现很难在框架中实现取消功能。

所需的功能是：

我们有 CRUD 屏幕，其中包含弹出窗口、网格等。当用户更改 GUI 中的任何内容然后单击 cancel() 时，他应该会收到一条通知消息，说明某些内容已更改。

我们尝试过的方法：

目前，我们正在尝试保留整个 pojo 对象的键与值的哈希图，并尝试将其与随着用户更改某些内容而更新的模型进行比较。但这会在每个 pojo 中添加大量不需要的代码，并且当用户直接从后端添加数据时无法按预期工作。

有没有什么优雅的方法可以实现这个功能？请注意****我们没有***在我们的应用程序中使用 GWT 的编辑器框架 * (https://developers.google.com/web-toolkit/doc/latest/DevGuideUiEditors)。

示例：假设我有一个像这样的 pojo：

```
public class Person {

    List<Address> address;
    PhoneNumber phoneData;

    // and so on along with getters and setters

} 
```

我将如何为此编写通用克隆方法？即使我设法以某种方式做到这一点，也会导致每个 pojo 中出现大量代码（我们的应用程序有数百个），这看起来并不正确。

请注意，只要在 GUI 中更改某些内容以实现实时绑定，我们的 pojo 就会立即更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:03:24.890

所以你的表单中有“保存”和“取消”按钮？

我建议你改变这个概念。当用户在 OnChange 事件处理程序中编辑对象属性时（如在 GMail、JIRA 和许多其他现代应用程序中），立即更新您的对象属性。

将会话堆栈的所有更新保存为 UpdateAction 对象，并让用户调用 UpdateAction.undo() 方法撤消每个属性修改。

好处是：

1.  这种设计比“点击“编辑”-更新-点击“保存”的场景更加人性化。

2.  您不需要单独的查看/编辑表单/弹出对话框 - 只需一个表单即可查看和编辑。

# java - 将 Activity 更改为 Fragment，更改最少

> ID：14233575
> 
> 赞同：2
> 
> 时间：2013-01-09T10:49:32.130
> 
> 标签：java, android, zxing

我有这个活动：

```
public final class CaptureActivity extends Activity implements
        SurfaceHolder.Callback {
} 
```

此活动捕获 QR 码（来自 zxing lib）。我需要将其更改为片段。扫描二维码时需要查看标签和状态栏。我想要这样的东西：

```
public final class CaptureActivity extends SherlockFragment implements
            SurfaceHolder.Callback {
    } 
```

如何以最小的变化做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:01:52.363

它可以很容易地使用`LocalActivityManger`. 它允许您在片段中嵌入活动。[在这里](https://stackoverflow.com/questions/12873213/android-access-mapview-inside-fragment-with-viewpager/12873281#12873281)您可以找到如何执行此操作的示例代码。

# php - 带有复选框的列表框在php中

> ID：14233576
> 
> 赞同：-2
> 
> 时间：2013-01-09T10:49:31.940
> 
> 标签：php, mysql

我想在使用 PHP 和 MYSQL 的列表框选项中有复选框。选项来自带有 id 和 name 的数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:52:24.483

网页中的列表框是具有多个属性集的选择元素的常用表达式。

选择选项中不能有复选框。

您可以使用常规列表来伪造它……</p>

```
<ul>
    <li> <label> <input type="checkbox" name="foo[]" value="1"> One </label> </li>
    <li> <label> <input type="checkbox" name="foo[]" value="2"> Two </label> </li>
</ul> 
```

…然后将其设置为看起来像一个列表框（确保您`display: block`的标签，以便点击目标覆盖框的宽度）。

# ios - 如何在 Facebook 上的 iPhone 应用程序中分享我的页面内容？

> ID：14233579
> 
> 赞同：0
> 
> 时间：2013-01-09T10:49:36.780
> 
> 标签：ios, objective-c, facebook, facebook-graph-api, facebook-ios-sdk

我在我的 iPhone 应用程序屏幕上提供了一个 facebook 共享选项，并且需要在用户的 facebook 个人资料上共享一些图像和 URL。我知道有几个第三方框架，如 ShareKit 和其他功能，如适用于 iOS 的 facebook sdk，但这是我能做到的最好方法，我需要获取共享按钮，直到现在，如图所示以下

![在此处输入图像描述](../Images/a4926d000539c5380653a98d61d2d201.png)

并单击应重定向到身份验证。并且应该兼容iOS5及以上，希望我的问题很清楚。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:21:07.910

通过研究自己解决了这个问题

我使用 Facebook`Graph API`是因为我的应用程序需要`iOS4`+ 的支持，如果它是 iOS6 和`iOS6`Facebook 集成一样简单，并且只需要几行代码来实现它。导入`Graph APi`文件并添加以下代码：

```
@synthesize facebook;

//login with facebook
- (IBAction) facebookButtonPressed {
    if (!facebook || ![facebook isSessionValid]) {
        self.facebook = [[[Facebook alloc] init] autorelease];
        NSArray *perms = [NSArray arrayWithObjects: @"read_stream", @"create_note", nil];
        [facebook authorize:FACEBOOK_API_KEY permissions:perms delegate:self];
    }
    else {
        [self fbDidLogin];
    }
}

//upload image once you're logged in
-(void) fbDidLogin {
    [self fbUploadImage];
}

- (void) fbUploadImage
{
    NSMutableDictionary * params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                    resultImage, @"picture",
                                    nil];
    [facebook requestWithMethodName: @"photos.upload" 
                          andParams: params
                      andHttpMethod: @"POST" 
                        andDelegate: self]; 

    self.currentAlertView = [[[UIAlertView alloc]
                             initWithTitle:NSLocalizedString(@"Facebook", @"")  
                             message:NSLocalizedString(@"Uploading to Facebook.", @"")  
                             delegate:self 
                             cancelButtonTitle:nil
                             otherButtonTitles: nil] autorelease];

    [self.currentAlertView show];
}

//facebook error
- (void)request:(FBRequest*)request didFailWithError:(NSError*)error
{

    [self.currentAlertView dismissWithClickedButtonIndex:0 animated:YES];
    self.currentAlertView = nil;

    UIAlertView *myAlert = [[UIAlertView alloc]
                            initWithTitle:NSLocalizedString(@"Error", @"")  
                            message:NSLocalizedString(@"Facebook error message", @"")
                            delegate:self 
                            cancelButtonTitle:nil
                            otherButtonTitles:@"OK", nil];
    [myAlert show];
    [myAlert release];
}

//facebook success
- (void)request:(FBRequest*)request didLoad:(id)result
{
    [self.currentAlertView dismissWithClickedButtonIndex:0 animated:YES];
    self.currentAlertView = nil;

    UIAlertView *myAlert = [[UIAlertView alloc]
                            initWithTitle:NSLocalizedString(@"Facebook", @"") 
                            message:NSLocalizedString(@"Uploaded to Facebook message", @"")
                            delegate:self 
                            cancelButtonTitle:nil
                            otherButtonTitles:@"OK", nil];
    [myAlert show];
    [myAlert release];
} 
```

并在 facebook 中获取特定 URL 的共享计数，使用

```
http://graph.facebook.com/?id=url 
```

但这会返回所有喜欢、分享和帖子的总数，因此最好找到一些替代方法。

希望这有帮助 谢谢

# python - Python“字符串反转”程序

> ID：14233585
> 
> 赞同：3
> 
> 时间：2013-01-09T10:50:03.060
> 
> 标签：python, string

这是一个反转字符串的简单程序：当我输入一个字符串时，说“你好”，我得到的输出是“olle”。最后一个字符没有显示。

```
 word=raw_input('Enter any word:')
    l=len(word)
    n=l-1
    reverse=""
    while True:
          n-=1
          if n>=1 or n==0:
             get=word[n]
             reverse=str(reverse)
             reverse=reverse+get
             continue
          elif n!=0:
             print('\n The word:',reverse)
             break 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T10:51:02.613

**这**是一个反转字符串的**简单**程序：

```
print word[::-1] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T10:53:55.173

在我看来，您的问题是您正在这样做：

```
n=l-1
reverse=""
while True:
      n-=1 
```

这意味着`n`在你做任何事情之前你要减去两次，这意味着你的单词的第一个字母在你反转它之前被删除。

尝试删除这些行中的第一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T10:52:06.200

```
>>> ''.join(reversed('hello'))
'olleh' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T10:54:28.997

你的问题是你在循环开始而不是结束时递减 n 。也就是说，有更短、更 Pythonic 的方法来做到这一点。也许试试

`word[::-1]`

# sql-server - 使用架构和表更改将数据从 MS Access 导出到 MS SQL

> ID：14233593
> 
> 赞同：2
> 
> 时间：2013-01-09T10:50:20.910
> 
> 标签：sql-server, tsql, ms-access, foreign-keys

我正在处理旧的 C++ MFC 项目（> 10 岁）。数据库应用程序适用于从 MS Access (2007) 迁移到 MS SQL Server (2008 R2)，我在此过程中遇到了一些障碍。对于导出数据，我使用了 MS SQL Management Studio（菜单中的“导入”选项）众所周知，Access 和 MS SQL 之间的数据类型存在一些差异。这变成了一些麻烦。

1.  Access 中的“ID”列（**Autonumber**，不是 NULL，主键）成为 SQL Server 中的普通列（**int**，不是 NULL 并且没有任何自动增量）。所以我在向表中插入新行时遇到了很多错误。

2.  **Access 中的Yes/No**类型（-1/0；不允许 NULL）变为位（1/0/NULL），工作逻辑不应被破坏，因为在大多数情况下它是不等于的比较0：

    query.Select() .Buff("ID", &code) .FromS("%Table_Name%", NULL) .Where().Str("Aktiv <> 0") .Execute();

在寻找解决方案时，我看到了[使用 SSMA](https://stackoverflow.com/questions/2368340/importing-data-from-access-to-sql-server-with-minor-table-changes)（SQL Server 迁移助手）进行访问的建议。它更好，更智能，因为它重新创建了主键/外键，创建了 CHECK，索引。但不幸的是，许多 FOREIGN KEYs 的操作 Update/Delete 操作不是**Cascade**而是**No Action**。架构导入后的警告消息：

> MS Access 表 %Table1% 上的 FOREIGN KEY 约束“Reference77”可能会导致循环或多个级联路径。*从表%Table2%*到表*%Table1%*的级联选项在 SQL Server 中设置为无选项。

这并不奇怪应用程序在删除对象时会出现一些错误，尽管在 Access 中一切正常。为了测试，我选择了一个出现错误的删除操作（在应用程序中）。我查看了错误消息并通过 SSMS（SQL Server Management Studio）更改了所涉及的外键的**无操作**->**级联**。之后应用程序中的删除操作成功。

我的问题是：

1.  我对吗？我只需要更改**No Action** -> **Cascade** for the FOREIGN KEYs 即可让数据库应用程序完全正常工作？还是会出现其他我不知道的问题？
2.  如何实现？我希望它是在客户的 SQL Server 上应用它的一个很好的解决方案。

感谢您的帮助，我真的很感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:46:58.717

感谢您的回答。我的问题的解决方案是......将数据直接从 Access (2010) 导出到 SQL Server。我试过：

1.  “SQL Server 导入和导出数据”，结果 - 仅复制 Access 数据库中的数据，没有任何主 oк 外键，没有将自动编号转换为具有 IDENTITY 和自动增量的列。

2.  用于 Access 的 SQL Server 迁移助手，结果 - 很多外键丢失了更新/删除操作的 CASCADE 属性。但其他一切都还好。

3.  访问 2010！数据库工具-> SQL Server-> ...使用向导-> 架构和数据一切正常。应用程序适用于从 Access 导入的 SQL Server 数据库。

所以**直接从 Access 导出到 SQL Server**给出了所需的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T10:36:03.210

1.  可能，但你仍然需要测试。

2.  对于可重用的解决方案，我将为 SSMA 创建的数据库编写脚本（检查所有类型和外键是否正确）。有了这个脚本，您可以在任意数量的服务器上创建一个空的 SQL Server 数据库。要填充这些数据库，我将使用集成服务包。使用导入向导很容易创建：完成所有步骤，但保存包而不是立即运行它。然后您可以打开此包并对其进行编辑（如有必要，添加数据转换或任何其他逻辑）。

# php - Codeigniter 未设置会话

> ID：14233595
> 
> 赞同：24
> 
> 时间：2013-01-09T10:50:24.477
> 
> 标签：php, codeigniter, session

嗨，我有一个在 CodeIgniter 中开发的网站。

在我的一个页面中，我在搜索表单后使用 CodeIgniter 的分页。

在这种情况下，我将传递的搜索值存储到我的会话中，`$_POST`因为如果我有更多结果单击下一页，则搜索会保留搜索值。

但是，例如，当我更改页面时，我想返回索引，并且在返回我的搜索表单页面后，会话已经创建并使用会话的值进行查询。更改页面时如何销毁或取消设置会话的值？这可能吗？

在我的模型函数中，我检查会话值是否不同于 0 并且存在，如果为真，我使用会话值进行查询。

这是我的控制器（国家是存储到会话中的值）

```
public function region_list(){
        $this->load->model('backend/Nation_model');
        $this->load->library("pagination");

        if($_POST)
        {
            if (isset($_POST['ricerca'])){

                $nation = $this->input->post('nation');
                if(strlen($nation) > 0){
                   $this->session->set_userdata('nation',$nation);
                }

                $config = array();
                $config["base_url"] = base_url() . "index.php/backend/region/region_list";
                $config["total_rows"] = $this->Region_model->countRegionSearch();
                $config["per_page"] = 10;
                $config["uri_segment"] = 4;

                $this->pagination->initialize($config);

                $page = ($this->uri->segment(4)) ? $this->uri->segment(4) : 0;
                $data["regionlist"] = $this->Region_model->regionSearch($config["per_page"], $page);
                $data["links"] = $this->pagination->create_links();
                $data["nationlist"] = $this->Nation_model->nationList();

                $this->load->view('backend/region_list_view',$data);
            }
        }
        else
        {
            $config = array();
            $config["base_url"] = base_url() . "index.php/backend/region/region_list";
            $config["total_rows"] = $this->Region_model->countRegion();
            $config["per_page"] = 10;
            $config["uri_segment"] = 4;

            $this->pagination->initialize($config);

            $page = ($this->uri->segment(4)) ? $this->uri->segment(4) : 0;
            $data["links"] = $this->pagination->create_links();
            $data["regionlist"] = $this->Region_model->regionList($config["per_page"], $page);
            $data["nationlist"] = $this->Nation_model->nationList();

            $this->load->view('backend/region_list_view',$data);
        }
    } 
```

这是我要搜索的模型：

```
function regionList($limit=null, $start=null) {
        $nation_id = $this->session->userdata('nation');
        if ($this->session->userdata('language')=="it")
            $this->db->select('region.id, region.name_it as name,nation.id as nation_id, nation.name_it as nation_name');
        if ($this->session->userdata('language')=="en")
            $this->db->select('region.id, region.name_en as name,nation.id as nation_id, nation.name_en as nation_name');
        $this->db->from('region');
        $this->db->join('nation', 'region.nation_id = nation.id','left');
        if((isset($nation_id))&&($nation_id!=0))
            $this->db->where('region.nation_id', $nation_id);
        $this->db->order_by("name", "asc");
        $this->db->limit($limit, $start);
        $query = $this->db->get();
        $region = array();
        foreach ($query->result() as $row)
            array_push($region, $row);

        return $region;     
    }

    function countRegion() {
        $nation_id = $this->session->userdata('nation');
        if ($this->session->userdata('language')=="it")
            $this->db->select('region.id, region.name_it as name,nation.id as nation_id, nation.name_it as nation_name');
        if ($this->session->userdata('language')=="en")
            $this->db->select('region.id, region.name_en as name,nation.id as nation_id, nation.name_en as nation_name');
        $this->db->from('region');
        $this->db->join('nation', 'region.nation_id = nation.id','left');
        if((isset($nation_id))&&($nation_id!=0))
            $this->db->where('region.nation_id', $nation_id);
        $this->db->order_by("name", "asc");
        $query = $this->db->get();
        return $query->num_rows();  
    }

    public function regionSearch($limit=null, $start=null){
        $nation_id = $this->session->userdata('nation');
        if ($this->session->userdata('language')=="it"){
            $this->db->select('*,region.id, region.name_it as name,nation.id as nation_id, nation.name_it as nation_name');
            if($this->input->post('name')!="")
                $this->db->where('region.name_it LIKE "%'.$this->input->post('name').'%"');
        }

        if ($this->session->userdata('language')=="en"){
            $this->db->select('*,region.id, region.name_en as name,nation.id as nation_id, nation.name_en as nation_name');
            if($this->input->post('name')!="")
                $this->db->where('region.name_en LIKE "%'.$this->input->post('name').'%"');
        }
        $this->db->from('region');
        $this->db->join('nation', 'region.nation_id = nation.id','left');
        if((isset($nation_id))&&($nation_id!=0))
            $this->db->where('region.nation_id', $nation_id);
        $this->db->order_by("name", "asc");
        $this->db->limit($limit, $start);
        $query = $this->db->get();
        $region = array();
        foreach ($query->result() as $row)
            array_push($region, $row);

        return $region; 
     }

     public function countRegionSearch(){
        $nation_id = $this->session->userdata('nation');
        if ($this->session->userdata('language')=="it"){
            $this->db->select('*,region.id, region.name_it as name,nation.id as nation_id, nation.name_it as nation_name');
            if($this->input->post('name')!="")
                $this->db->where('region.name_it LIKE "%'.$this->input->post('name').'%"');
        }

        if ($this->session->userdata('language')=="en"){
            $this->db->select('*,region.id, region.name_en as name,nation.id as nation_id, nation.name_en as nation_name');
            if($this->input->post('name')!="")
                $this->db->where('region.name_en LIKE "%'.$this->input->post('name').'%"');
        }
        $this->db->from('region');
        $this->db->join('nation', 'region.nation_id = nation.id','left');
        if((isset($nation_id))&&($nation_id!=0))
            $this->db->where('region.nation_id', $nation_id);
        $this->db->order_by("name", "asc");

        $query = $this->db->get();
        return $query->num_rows();      
     } 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-11T03:17:32.647

回答你的问题：

> 如何销毁或取消设置会话的值？

我可以帮助你：

```
$this->session->unset_userdata('some_name'); 
```

对于多个数据，您可以：

```
$array_items = array('username' => '', 'email' => '');

$this->session->unset_userdata($array_items); 
```

并销毁会话：

```
$this->session->sess_destroy(); 
```

现在对于页面更改部分 **（在我的脑海中）**：

> 您可以将分页器的*配置***“anchor_class”**设置为您想要的**类**名。

 ***之后，只需使用**jquery onclick 检查该类，该类**将向控制器函数发送一个提示，该控制器函数将取消设置用户会话。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-11T01:42:36.217

您应该使用 set_flashdata，而不是使用 set_userdata。

根据 CI 用户指南：

> CodeIgniter 支持“flashdata”，即仅可用于下一个服务器请求的会话数据，然后会自动清除。这些非常有用，通常用于信息或状态消息（例如：“记录 2 已删除”）。

[http://ellislab.com/codeigniter/user-guide/libraries/sessions.html](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-19T11:39:02.383

```
$session_data = array('username' =>"shashikant");
$this->session->set_userdata('logged_in', $session_data);

$this->session->unset_userdata('logged_in'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-18T12:06:01.180

```
$this->session->unset_userdata('session_value'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-18T11:17:34.643

我使用旧的 PHP 方式..它取消设置所有会话变量，并且不需要在数组中指定它们中的每一个。在取消设置变量后，我们销毁会话。

```
session_unset();
session_destroy(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-10-04T13:39:28.857

我使用旧的 PHP 方式..它取消设置所有会话变量，并且不需要在数组中指定它们中的每一个。在取消设置变量后，我们销毁会话***

# forms - 当表单向用户抛出验证消息时，站点上的下拉导航中断

> ID：14233596
> 
> 赞同：0
> 
> 时间：2013-01-09T10:50:31.317
> 
> 标签：forms, codeigniter, drop-down-menu, controller, responsive-design

已解决：在联系控制器中，我拥有`function index`页面位置，然后是一个单独的名为`function send_mail`. 我删除了 send_mail 函数并将代码移至 index 函数，当发送电子邮件或返回错误消息时，它将 url 保留为 /contact 而不是 /contact/send_mail，现在下拉菜单现在可以工作了！当然，在我的联系人视图中，我更改 `echo form_open('contact/send_email');`为 echo`form_open('contact');`

* * *

我使用 Codeigniter 框架构建了一个响应式网站。

当屏幕尺寸缩小到手机/平板电脑的宽度时，导航将从按钮变为下拉选择菜单。

我的控制器中有一个名为 send_mail 的函数，当用户单击表单时，如果他们填写的表单不正确或成功消息，他们将收到一条错误消息，并且在单击此按钮时在 URL 中添加 send_mail 最后其中。

表单确实提交并且所有工作，但在测试时；只有当响应式站点更改为下拉选择菜单并将 send_mail 添加到 url 的末尾时，您才能导航到另一个页面 - 它只是停留在同一页面上。

目前我正在测试并且我已经在本地主机上构建了该站点，所以不确定它是否只是这个或可能的解决方案？

在这篇文章中，我没有添加任何代码（但如果有帮助的话可以），因为我作为指导或建议询问为什么这不起作用？这是否与我的媒体查询或下拉菜单有关，因为即使 send_mail 在最后，当它是其他宽度作为按钮时它仍然有效？

代码如下：

提交表单时，是否有一种可能的方法将 send_email 函数隐藏在路由文件夹中的 url 中，因此它只是显示`http:///www.websitename/contact`而不是`http:///www.websitename/contact/email_send`当用户被发送回表单时，这与“if 语句”有关吗？

同样，当使用标准导航样式在其他宽度下调整站点大小时，一切都可以正常工作，只是隐藏的下拉列表，直到它显示在媒体查询中。

选择菜单的 HTML（除非移动版本，否则它是隐藏的）

```
 <option value="" selected="selected">MENU</option>  

                <option value="Home">Home</option> 
                <option value="about">About</option> 
                <option value="testimonials">Testimonials</option> 
                <option value="blog">Blog</option> 
                <option value="contact">Contact</option> 
            </select> 
```

CSS媒体查询（移动）

```
nav ul     { display: none; }
nav select { display: inline-block; } 
```

用于响应式导航的 Jquery

联系人控制器中的 send_email 函数

```
public function send_email (){

        $this->load->library('form_validation');

        $this->form_validation->set_rules('name','Name','trim|required|htmlspecialchars|max_length[30]|xss_clean');
        $this->form_validation->set_rules('email','Email Address','trim|valid_email|required|htmlspecialchars|max_length[100]|xss_clean');
        $this->form_validation->set_rules('message','Message','trim|required|htmlspecialchars|xss_clean');

        $this->form_validation->set_error_delimiters('<div id="errors">&bull;&nbsp;','</div>');

        if ($this->form_validation->run() == FALSE) {
            $data['success'] = '';
            $data['page_title'] = 'Contact';
            $data['content'] = 'contact';
            $this->load->view('template', $data);

        }else{

            $data['success'] = 'The email has successfully been sent';
            $data['name'] = $this->input->post('name');
            $data['email'] = $this->input->post('email');
            $data['message'] = $this->input->post('message');

            $html_email = $this->load->view('html_email', $data, true);

            //load the email class
            $this->load->library('email');

            $this->email->from(set_value('email'), set_value('name'));
            $this->email->to('emailaddressusuallyhere');
            $this->email->subject('Message from Website');
            $this->email->message($html_email);

            $this->email->send();

            $data['success'] = 'The email has successfully been sent';
            $data['page_title'] = 'Contact';
            $data['content'] = 'contact';   
            $this->load->view('template', $data);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:24:27.703

已解决：在联系控制器中，我有一个带有页面位置的函数索引，然后是一个单独的函数，称为函数 send_mail。我删除了 send_mail 函数并将代码移至 index 函数，当发送电子邮件或返回错误消息时，它将 url 保留为 /contact 而不是 /contact/send_mail，现在下拉菜单现在可以工作了！当然，在我的联系人视图中，我更改了 echo form_open('contact/send_email'); 回显 form_open('contact');

# iphone - 在我将免费应用程序更改为应用程序商店中的付费应用程序后，待定合同状态

> ID：14233597
> 
> 赞同：13
> 
> 时间：2013-01-09T10:50:35.873
> 
> 标签：iphone, ios, app-store, appstore-approval

我有一个免费的应用程序，它已发布并准备在几天前在应用程序商店销售。现在我通过设置 0.99 美元将其设为付费应用程序。现在我的状态更改为待定合同。这个状态是什么意思？。什么是之后的程序以及再次获得批准需要多长时间？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-09T10:56:24.610

1.  登录到 iTunes 连接。
2.  转到合同，税务和银行，在那里你可以看到“iOS付费应用程序”合同。
3.  在此处添加必要的信息，然后您的应用将自动获得批准。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T10:53:15.307

从这个苹果[常见问题解答](https://developer.apple.com/support/ios/program-renewals.html)：

如果我不续订 iOS 开发者计划会员资格会怎样？

> 一旦您的会员资格到期，您的应用程序将不再在 App Store 上可用，并且您将失去提交新应用程序的能力。您将无法访问预发布软件、Apple 开发者论坛、开发者技术支持和证书实用程序。此外，您现有的 iOS 分发证书将被撤销和失效。最后，如果您作为公司注册该计划，您将失去管理开发团队的能力。
> 
> 但是，您将保留您作为注册 Apple 开发者的身份，并且可以访问免费的开发资源。
> 
> 为了在 AppStore 上保存您的应用程序，您必须更新您的 iOS 开发人员计划。

希望对你有帮助。。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-09T11:56:26.943

您需要登录iTunesConnect在“Contracts,Tax and Banking”部分填写信息。这样，一旦您填写了银行信息，您的应用程序就会转换为付费应用程序。

干杯!

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T08:30:36.950

对于付费应用程序，您必须先填写付费合同，然后才能在商店中允许付费应用程序。

如果您的付费应用合同已经完成，更改价格等级后没有其他程序 在商店更改不需要太多时间，有时需要半天或 1 天。

希望这可以帮助。

# svg - 如何检测客户端浏览器中的 Raphael.js 兼容性？

> ID：14233600
> 
> 赞同：2
> 
> 时间：2013-01-09T10:50:48.487
> 
> 标签：svg, cross-browser, raphael, feature-detection, vml

[测试浏览器/用户代理/客户端是否支持Raphael.js 库](http://raphaeljs.com/)的最简单、最可靠的方法是什么？Raphael 使用 Javascript 来创建和控制 SVG 矢量图形，或者，如果 SVG 不可用但 VML 可用（例如，在 Internet Explorer 版本 6 到 8 中），它会使用 VML 创建和控制等效图形。

一种方法是对 SVG 进行特征检测，然后，如果它不可用，则对 VML 进行特征检测。有一个[2009 年的老问题，](https://stackoverflow.com/questions/654112/how-do-you-detect-support-for-vml-or-svg-in-a-browser)其答案包括一些用于特征检测 VML 和 SVG 的代码。然而，评论表明它可能并非在所有情况下都有效，而且我确信自 2009 年以来发生了很多变化。此外，可能还有一种更简单的特定于 Raphael 的方法。

一个更简单的替代方法可能是使用一些 Raphael 内部标志或函数。它已经设置了是否在 SVG 模式或 VML 模式下运行的变量。这可以用来可靠地检测“两者都不是”的情况吗？

或者也许有一种基于创建空 Raphael 对象并测试其属性或功能的可靠方法？

* * *

对于一般背景，据我所知，唯一与 Raphael 不兼容的常见浏览器是版本 1.x 和 2.x 中的 Android 库存浏览器，但是，我更喜欢使用功能检测而不是浏览器版本检测，如果可能的（除非有充分的理由说明在这种情况下这实际上是一个更好的解决方案）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T12:03:39.467

查看官方文档：[http ://raphaeljs.com/reference.html#Raphael.type](http://raphaeljs.com/reference.html#Raphael.type)

```
if (!Raphael.type) alert('Your browser does not support vector graphics!'); 
```

# css - 字体系列在实时服务器上无法正常工作

> ID：14233601
> 
> 赞同：0
> 
> 时间：2013-01-09T10:50:49.407
> 
> 标签：css, browser, font-face

我正在使用**font-family "angelina"**。它在本地服务器上正常工作。但它不适用于实时服务器。它也仅在我的计算机上在实时服务器上工作。但它不适用于任何其他计算机。我在其他计算机上的所有浏览器中检查它，但它不起作用。我正在使用这样的 CSS 代码

```
@font-face {
font-family: MyCustomFont;
src: url("ANGELINA.eot") /* EOT file for IE */
}
@font-face {
 font-family: MyCustomFont;
 src: url("ANGELINA.TTF") /* TTF file for CSS3 browsers */
}
.test_font{
    font-family: angelina;
    font-size: 36px;
    font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:00:20.057

您需要在服务器上拥有各种字体扩展来支持所有浏览器。

@font-face { font-family: MyCustomFont;

```
src: url('ANGELINA.eot');
src: url('ANGELINA.eot?') format('&#9786;'),
     url('ANGELINA.woff') format('woff'),
     url('ANGELINA.ttf') format('truetype'),
     url('ANGELINA.svg#webfontssbCkuz5') format('svg'); 
```

}

您可以在此站点[http://www.google.com/webfonts上找到所有字体扩展](http://www.google.com/webfonts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:56:43.513

它应该是：

```
@font-face {
font-family: angelina;
src: url("ANGELINA.eot") /* EOT file for IE */
}
@font-face {
 font-family: angelina;
 src: url("ANGELINA.TTF") /* TTF file for CSS3 browsers */
} 
```

如果你想打电话`font-family: angelina;`

# r - 函数中的向量参数

> ID：14233603
> 
> 赞同：0
> 
> 时间：2013-01-09T10:50:53.743
> 
> 标签：r, function, vector, parameters

我需要将 t 定义为依赖于用户输入 m 的重复元素的 3d 向量，即 t=c(m, m, m) 然后使用它的函数：

```
b <- c(0.5,0.2,1)  
fn <- function(m) { sum(t-b) } 
```

有没有办法告诉 R t 是一个包含元素 m 的 3d 重复向量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:55:56.570

使用该`rep()`功能，一种选择：

```
b <- c(0.5,0.2,1)

fn <- function(m, b) {
  t <- rep(m , 3)
  sum(t-b)
}

> fn(2, b)
[1] 4.3 
```

在这种情况下，您可以依靠回收：

```
fn2 <- function(m, b) {
  sum(m-b)
}

> fn2(2, b)
[1] 4.3 
```

其中 R 自动延伸`m`到正确的长度。但这很危险，特别是如果您不检查长度是否`m`匹配`b`。

更好的使用版本`rep()`是不对`t`需要的长度进行硬编码，而是从 中获取`b`，如下所示：

```
fn3 <- function(m, b) {
  t <- rep(m , length(b))
  sum(t - b)
}

> fn3(2, b)
[1] 4.3
> b <- c(b, b) ## make `b` longer
> length(b)
[1] 6
> fn3(2, b)    ## fn3() still works
[1] 8.6 
```

给你的便条`fn()`；`b` *您在函数内部*引用但不`b`作为参数传入。因此，您依靠 R`b`在全局工作区中找到正确的方法。这不是好的做法。相反，通过参数传入函数中所需的所有对象，就像我在示例中所做的那样。如果你这样做，你会发现更容易追踪错误等。

# javascript - ExtJS 控制器问题。未捕获的类型错误：对象 [object Object] 没有方法“setSortState”

> ID：14233604
> 
> 赞同：2
> 
> 时间：2013-01-09T10:50:53.690
> 
> 标签：javascript, ajax, json, extjs4

T 编写代码使用 ExtJS4.0.1，MVC 架构。当我开发主表单时，我遇到了网站搜索扩展的问题。

当我试图在控制器中创建新的小部件时，我需要在子面板中渲染结果。因此，当我编写示例代码时，我遇到了以下问题：

```
**Uncaught TypeError: Object [object Object] has no method 'setSortState'** 
```

我不明白为什么它会给出该错误消息。我需要一些帮助来解决这个问题。

下面我想显示我的代码：

```
//Panel which is showing to user

    Ext.define('Semantics.view.main.menuView', {
        extend: 'Ext.panel.Panel',
        layout: 'fit',
        alias: 'widget.Menu',
        title: "",
        tbar: [
            {
//search field
                        name:'mainSearchText',
                        id:'mainSearchText',
                        xtype: 'textfield',
                        defaultValue: 'Search',
                        height: 20
            },
            {
                name:'mainSearchButton',
                id:'mainSearchButton',
                xtype: 'button',
                text: 'Find',
                height: 20
            }
        ]
    });

//controller for search request
    Ext.define('Semantics.controller.main.mainController', {
        extend: 'Ext.app.Controller',
        views: ['main.menuView','mainSearch.MainSearchResultForm'],
        refs: [
            { ref: 'menuPanel', selector: 'Menu' },
            { ref:'mainSearchText',selector:'#mainSearchText'},
            {ref: 'mainSearchForm',selector:'#mainSearchForm'},
            {ref:'MainSearchGrid',selector:'#MainSearchGrid'}
        ],

        init: function () {
            this.control({
                'Menu': {
                    render: this.onPanelRendered
                },
                'Menu button[name="mainSearchButton"]': {
                    click: this.onButtonClick
                }
            });
        },
        onButtonClick: function (button) {
            var me = this;
            if(button.name=="mainSearchButton") {

                        var mtextFiled = me.getMainSearchText().getValue();

                        console.log(mtextFiled);
                        Ext.Ajax.request({
                            scope: this,
                            url: 'app/mainSearchT/findText/',
                            method: 'POST',
                            params: {
                                text: me.getMainSearchText().getValue()
                            },
                            success: function (result) {
                                mainPanel = me.getMenuPanel();
                                mainPanel.removeAll(true);
                                loadingMask = new Ext.LoadMask(mainPanel, { msg: "Loading" });
                                loadingMask.show();
                                var mname = 'MainSearchResultForm';
                                var start_info_panel = Ext.widget(mname);
                                mainPanel.items.add(start_info_panel);
                                loadingMask.hide();
                                mainPanel.doLayout(); //that line gives that error
                            },
                            failure: function (result) {
                                console.log(result);
                            }
                        });

            }
        },

        onPanelRendered: function () {
        }
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T09:55:10.757

当我在 Ext.grid.Panel 列中包含不受支持的 xtype 时，我遇到了同样的错误。我不得不删除 xtype，这解决了问题。

# c# - Visual Studio 2010 添加 Outlook 2003 项目模板

> ID：14233611
> 
> 赞同：1
> 
> 时间：2013-01-09T10:51:02.493
> 
> 标签：c#, visual-studio-2010, office-2003, visual-studio-templates

我已经安装了 Visual Studio 2010，我想创建 Outlook 2003 插件程序，它在导航菜单上添加了几个按钮。我想使用 VS2010 提供的一些模板（至少在 Office 2007 和 2010 提供的情况下），但是 2003 版本没有模板。有没有办法添加它，或者以某种方式下载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:53:40.097

不支持`Office 2003`插件`Visual Studio 2010`。只有您可以使用 Office 2007 或 Office 2010 插件。

# sql - 比较 SQL Server 中的 VARBINARY 值/参数

> ID：14233617
> 
> 赞同：2
> 
> 时间：2013-01-09T10:51:20.453
> 
> 标签：sql, sql-server-2008, varbinary

在我的一个解决方案中，我正在使用 SQL Server 的更改跟踪功能。为了区分实际应用程序所做的更改和同步应用程序所做的更改，我们使用了更改上下文。现在，据我所知，此更改上下文的类型为 varbinary(128)。

在应用程序逻辑中，我们创建一个字节数组，其中包含一些随机字节用作更改上下文，当同步应用程序进行任何更改时，它会使用此更改上下文。然后，当我们尝试获取实际应用程序所做的更改集时，没有任何更改上下文，我们在查询中使用以下代码片段

```
SELECT .... from .... WHERE (SYS_CHANGE_CONTEXT != @context OR SYS_CHANGE_CONTEXT IS NULL) 
```

这里，@context 是类型为 VARBINARY(128) 的命令参数，它被添加到 sqlcommand 以获取更改集。无论传递给命令的更改上下文如何，它仍然会获得所有更改。

是否有任何特殊方法可以比较 VARBINARY 值或将它们作为参数发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-16T18:49:39.757

从字面上回答你的问题，我确信有*特殊*的方法来比较 Varbinary（尤其是大型方法，例如预先计算哈希以用作预比较），但是常规的“=”运算符工作得很好：

```
declare @a varbinary(max) = 0x12345678;
declare @b varbinary(max) = 0x12345678;
declare @c varbinary(max) = 0x12345679;
declare @d varbinary(max) = null;
declare @e varbinary(max) = null;

select iif(@a = @b, 1, 0) as AreEqual -- 1
union all
select iif(@a = @c, 1, 0) as AreEqual -- 0
union all
select iif(@a = @d or @a is null and @d is null, 1, 0) as AreEqual -- 0
union all
select iif(@d = @e or @d is null and @e is null, 1, 0) as AreEqual -- 1 
```

在 C# Entity 框架中，它们显示为 byte[]。我不知道作为参数传递的任何特殊要求 besdies 内存占用。对于较大的（比您的示例）可以使用流（例如[1](https://stackoverflow.com/questions/7324190/how-to-store-images-to-a-varbinarymax-column%201)、[2](https://stackoverflow.com/questions/7324190/how-to-store-images-to-a-varbinarymax-column "2")）

# c - 在linux中合 并两个文件不重复

> ID：14233619
> 
> 赞同：6
> 
> 时间：2013-01-09T10:51:21.090
> 
> 标签：c, linux, shell, awk

我有两个文件 file1 和 file2

file1 的内容是

```
Hello
  how
are you
when can i meet you
film?? 
```

file2 的内容是

```
Hello 
how 
are you
darling
when can i meet you 
```

我想生成一个文件，它是两个文件的组合，例如

```
Hello
how
are you
darling
when can i meet you
film?? 
```

注意：最终文件中第二行的空格`file1`应忽略 C 或 Linux 中是否有任何内置函数可以执行上述以下工作，或者可以编写脚本来执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:01:55.117

轻松的工作`awk`：

```
$ awk '{$1=$1}!u[$0]++' file2 file1
Hello
how
are you
darling
when can i meet you
film?? 
```

* * *

或者，如果您不关心输出的顺序：

```
$ sed 's/^\s*//' file1 file2 | sort -u 
are you
darling
film??
Hello
how
when can i meet you 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:08:42.960

这是一种使用方法`awk`：

```
awk '{ gsub(/^[ \t]+|[ \t]+$/,"") } !a[$0]++' file2 file1 
```

结果：

```
Hello
how
are you
darling
when can i meet you
film?? 
```

* * *

*编辑：*

问题在于：

```
awk '{ $1=$1 } !a[$0]++' file2 file1 
```

就是这样，虽然它在这个简单的例子中效果很好，但它会将相似的行视为相同的东西，因为它不仅删除了前导和滞后的空格，而且还会删除字段*之间的额外空格。*例如，如果`file1`包含：

```
Hello
  how
are you
when  can i meet you
film?? 
```

这俩：

```
when can i meet you 
```

和：

```
when  can i meet you 
```

行将被视为同一件事。这可能是期望的结果，但根据您的问题，我认为最好按照第一个命令简单地去除前导和滞后空格。HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:04:36.687

您可以应用多个标准过滤器：

```
cat file1 file2 | perl -pe 's/^\s+//' | sort | uniq 
```

*   `cat`用于连接所有需要的文件，
*   `perl`是 udes 删除所有初始空白空间，
*   `sort`对所有行进行排序，
*   并`uniq`删除重复的行。

# c# - 单击按钮时通知主线程

> ID：14233621
> 
> 赞同：0
> 
> 时间：2013-01-09T10:51:33.743
> 
> 标签：c#, windows-runtime, .net-4.5

我正在尝试创建这样的弹出窗口

```
// Create a Popup
var Pop = new Popup() { IsOpen = true };

// Create a StackPanel for the Buttons
var SPanel = new StackPanel() { Background = MainGrid.Background };

// Set the comment
var TxtBlockComment = new TextBlock { Margin = new Thickness(20, 5, 20, 5), Text = Obj.Comment };

// Set the value
var TxtBoxValue = new TextBox { Name = "MeasureValue" };
TxtBoxValue.KeyUp += (sender, e) => { VerifyKeyUp(sender, Measure); };

// Create the button
var ButtonFill = new Button { Content = Loader.GetString("ButtonAccept"), Margin = new Thickness(20, 5, 20, 5), Style = (Style)App.Current.Resources["TextButtonStyle"] };
ButtonFill.Click += (sender, e) => { Obj.Value = TxtBoxValue.Text; };

// Add the items to the StackPanel
SPanel.Children.Add(TxtBlockComment);
SPanel.Children.Add(TxtBoxValue);
SPanel.Children.Add(ButtonFill);

// Set the child on the popup
Pop.Child = SPanel; 
```

我想在`ButtonFill.Click`事件执行后通知主线程，这样我就可以继续该线程

但我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T06:00:29.540

我将假设您正在询问如何实现类似对话的行为，类似于`FileOpenPicker.PickSingleFileAsync`. 您可以使用`TaskCompletionSource`创建等待任务：

```
private Task<string> OpenPopupAsync()
{
    var taskSource = new TaskCompletionSource<string>();

    // Create a Popup
    var Pop = new Popup() { IsOpen = true };

    // Create a StackPanel for the Buttons
    var SPanel = new StackPanel() { Background = MainGrid.Background };

    // Set the comment
    var TxtBlockComment = new TextBlock { Margin = new Thickness(20, 5, 20, 5), Text = Obj.Comment };

    // Set the value
    var TxtBoxValue = new TextBox { Name = "MeasureValue" };
    TxtBoxValue.KeyUp += (sender, e) => { VerifyKeyUp(sender, Measure); };

    // Create the button
    var ButtonFill = new Button { Content = Loader.GetString("ButtonAccept"), Margin = new Thickness(20, 5, 20, 5), Style = (Style)App.Current.Resources["TextButtonStyle"] };
    ButtonFill.Click += (sender, e) => { Pop.IsOpen = false; taskSource.SetResult(TxtBoxValue.Text); };

    // Add the items to the StackPanel
    SPanel.Children.Add(TxtBlockComment);
    SPanel.Children.Add(TxtBoxValue);
    SPanel.Children.Add(ButtonFill);

    // Set the child on the popup
    Pop.Child = SPanel;

    return taskSource.Task;
} 
```

简而言之：

*   你创建一个实例`TaskCompletionSource`
*   您将其`Task`属性作为等待任务返回
*   当您希望调用方法继续时，您调用`SetResult`

在调用方法中，您只需`await`让方法在继续执行之前返回：

```
string result = await OpenPopupAsync();
// continue execution after the method returns 
```

我还建议您查看[Callisto 的 Flyout](https://github.com/timheuer/Callisto)控件，以更简单的方式实现弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:09:32.533

在类和事件的开头放置一个布尔属性，将该布尔属性设置为true。

```
ButtonFill.Click += (sender, e) => { ButtonClicked = true; Obj.Value = TxtBoxValue.Text; }; 
```

# ruby-on-rails - 如何为 mongoDB 测试中的嵌入式数据创建 FactoryGirl？

> ID：14233623
> 
> 赞同：0
> 
> 时间：2013-01-09T10:51:41.337
> 
> 标签：ruby-on-rails, mongodb, rspec, factory-bot

我有一个团队模型文件：

```
class Team
  include Mongoid::Document
  field :short_name, type: String
  field :sdi_team_id, type: Integer
  embeds_many :history, :class_name => "History"
end

class History
  include Mongoid::Document
  field :short_name, type: String
  field :sdi_team_id, type: Integer
  embedded_in :teams, :class_name => "Team"
end 
```

为此，我必须在单个规范文件中编写为团队和历史创建 factorygirl 的测试，如 team_spec.rb

在那个文件中，我写道：

```
team = FactoryGirl.create(:team, sdi_team_id:team_d['sdi_team_id']) 
```

它创建了团队，但我尝试了相同的历史，但它没有......

在我的 factory.rb 中，我将其写为：

```
factory :team do
  history { FactoryGirl.build(:history)}
end 

factory :history do

end 
```

我想在同一个规范文件上创建历史记录，任何人都可以帮忙。我是 Rails 新手。我使用 mongodb 作为我的后端。我从 XML 获取数据的地方...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:48:42.647

最后我得到了

只需将我的 factory.rb 文件修改为

```
factory :team do
  # team data
  factory :history do
    #history data
  end

end 
```

# node.js - 节点.js。找不到模块“缓存”

> ID：14233628
> 
> 赞同：-1
> 
> 时间：2013-01-09T10:51:48.420
> 
> 标签：node.js, module

我的 index.js 文件需要模块缓存。我已经使用 npm 安装了它，但错误并没有消失。

```
var cache = require('cache')({
backend: 'memory'
}); 
```

在这不起作用之后，我也使用 -g 选项安装了它，但错误仍然存​​在。有什么想法吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2018-01-22T13:36:03.347

您可以阅读此网页：[https](https://www.npmjs.com/package/memory-cache) ://www.npmjs.com/package/npm-cache 您需要安装许多软件包，例如现金模块：`npm install -g npm-cache`

# javascript - 将内容添加到 WebView 的 HTML

> ID：14233629
> 
> 赞同：1
> 
> 时间：2013-01-09T10:51:50.297
> 
> 标签：javascript, cocoa, webkit

我想将 HTML 内容添加到文档的末尾。它通过本地或远程 URL 加载到 WebKit：

```
[[myWebView mainFrame] loadRequest:[NSURLRequest requestWithURL:url]]; 
```

如何在那里添加文字？方便的 document.write() 确实有效，但会删除所有先前加载的 HTML 内容：

```
[myWebView stringByEvaluatingJavaScriptFromString:@"document.write('Hello!')"]; 
```

有趣的是：它只擦除一次。以下 document.write() 可以正常工作，不会删除现有的 Hello。

另外，我尝试了另一个 JS：`document.getElementById('end_div').innerHTML += something`- 它完成了这项工作，但重新加载了 div 内容。如果 div 有 Youtube `<iframe>s`，它们都会重新加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:18:42.710

通过 jQuery 做到的：

```
jQuery('<div/>', {
    html: my_text
}).appendTo('body'); 
```

但我仍然希望有一种方法可以`document.write()`按预期工作......

# three.js - 如何检测纹理图像何时在 THREE.Mesh 中加载完成？

> ID：14233633
> 
> 赞同：1
> 
> 时间：2013-01-09T10:52:04.723
> 
> 标签：three.js, webgl, mipmaps

我使用 ColladaLoader 在 Three.js 中加载 3D 场景。我尝试从网格对象纹理图像创建 mipmaps 图像。问题是当我访问图像宽度和高度时，图像没有完全加载。在完全加载之前，宽度和高度都为零。

加载 dae 文件时，ColladaLoader 会触发“完成”功能。然后我在场景中搜索各个场景对象。具有图像纹理的网格对象之一需要创建 mipmap。问题是当我访问图像时，它的属性没有设置。渲染场景时，包括图像纹理在内的所有对象都被完美渲染（尽管没有 mipmap）。有没有办法让我将事件处理程序添加到图像加载完成时触发的纹理/图像？如果有这样的事件（在 Three.js 对象中），我可以在场景/对象可能已经渲染时添加 mipmaps 吗？我必须采取什么措施来提醒渲染管道 mipmap 已更改？

示例代码有人吗？我可以在 Blender 中预先计算 mipmap 并将它们保存到 dae 文件中吗？我怎么做？我要搜索 Blender 文档...不过欢迎提示...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:50:28.117

您可以覆盖 THREE.ImageLoader.prototype.load 以进入纹理加载过程，并在加载图像和渲染器使用图像之间进行任何修改。

把它放在三个.js 脚本标签之后。此函数中的代码是three.js 原始代码的精确副本，除了我的注释标记了您可以放置​​mipmap 生成的位置或任何您想要的位置。

```
THREE.ImageLoader.prototype.load = function ( url, image ) {
    var scope = this;
    if ( image === undefined ) image = new Image();
    image.addEventListener( 'load', function () {
                    // DO WHATEVER WITH THE IMAGE HERE
        scope.dispatchEvent( { type: 'load', content: image } );
    }, false );
    image.addEventListener( 'error', function () {
        scope.dispatchEvent( { type: 'error', message: 'Couldn\'t load URL [' + url + ']' } );
    }, false );
    if ( scope.crossOrigin ) image.crossOrigin = scope.crossOrigin;
    image.src = url;
} 
```

# c# - 从数据库中检索数据并计算第二行并将其显示在标签中

> ID：14233640
> 
> 赞同：0
> 
> 时间：2013-01-09T10:52:30.087
> 
> 标签：c#, asp.net, sql, sql-server, ado.net

```
conn.Open();
int a, b, c;
SqlCommand cmd = new SqlCommand("select top 3 pnrnumber from pnrstatus1 where Status='waiting'", conn);
DataColumn dc;
DataTable dt = new DataTable();
SqlDataAdapter da = new SqlDataAdapter(cmd);
DataSet ds = new DataSet();
da.Fill(ds);

for (int i = 0; i <= ds.Tables[0].Columns.Count; i++)
{
    dc = ds.Tables[0].Columns[i];
    for (int j = 0; ; j++)
    { 
    }
} 
```

从 pnrstatus1 中选择前 3 个 pnrnumber，其中 Status='regret'

我要秀秀

*   label1 中的第一行编号
*   label2 中的第二行值
*   label3 中的第三行值

例如：

```
label1==21
label2==22
label3==23 
```

如果它有值，即表中的 pnr 编号

```
sno    pnrnumber
1       21
2       22
3       23 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:00:59.220

您需要通过`ds.Tables[0].Rows`此修改访问行：

```
 label1.Text = ds.Tables[0].Rows[0][0].ToString();
            label2.Text = ds.Tables[0].Rows[1][0].ToString();
            label3.Text = ds.Tables[0].Rows[2][0].ToString(); 
```

在这句话中，我不明白您为什么要尝试从 for 到列：

```
select top 3 pnrnumber 
```

您只得到 pnrnumber 列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:00:33.830

试试这个而不是列。并使用对象`using`上的语句`IDisposable`。

```
conn.Open();
int a, b, c;
using(SqlCommand cmd = new SqlCommand("select top 3 pnrnumber 
from pnrstatus1 where
 Status='waiting'", conn))
{

using(SqlDataAdapter da = new SqlDataAdapter(cmd)){
    DataSet ds = new DataSet();
    da.Fill(ds);

    if(ds.Tables.Count > 0 AND ds.Tables[0].Rows.Count = 3)
    {
      Label1.Text = ds.Tables[0].Rows[0]["pnrnumber"].ToString();
      Label2.Text = ds.Tables[0].Rows[1]["pnrnumber"].ToString(); 
      Label3.Text = ds.Tables[0].Rows[2]["pnrnumber"].ToString();  
    }
  }
} 
```

# c# - DataGrid 行添加事件

> ID：14233647
> 
> 赞同：0
> 
> 时间：2013-01-09T10:52:46.950
> 
> 标签：c#, wpf, mvvm, view, datagrid

我知道......这个问题被问了很多......但总是有相同的答案“将你的逻辑放在视图模型中”。

但在这个例子中，我必须将逻辑放在视图中，因为每次其中一个的行数发生变化时，我都必须测量视图中每个数据网格的大小。问题是......在我的视图模型中，我无法访问数据网格，所以我无法测量任何东西。在我看来，我无法得到行数已更改的响应。

有人知道我如何在视图中知道在数据网格中添加或删除了一行？它是一个带有自定义模板的自定义数据网格。也许这会有所帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:07:41.157

你有一个`ObservableCollection`绑定到的`DataGrid`，对吧？你有一个`ViewModel`（包含那个`ObservableCollection`）`DataContext`作为`View`. 您可以订阅视图中的`CollectionChanged`事件`ObservableCollection`（您可以从视图访问您的 ViewModel，因为它是`View.DataContext`）。

例如

```
(this.DataContext as ViewModel).YourCollection
    .CollectionChanged += (s, e) => { /* logic */ }; 
```

它略微违反了 MVVM。如果这是一个绝对自定义的控件，那么您已经从`ObservableCollection`（因为您需要更新 UI）接收到事件，因此您可以在那里处理它。

我能想到的另一种方法是使用某种`Mediator`模式，例如`Messenger`在 MVVMLight 中。

# jquery - 如何使用ajax导航到多个文件

> ID：14233653
> 
> 赞同：0
> 
> 时间：2013-01-09T10:53:05.043
> 
> 标签：jquery, ajax

```
function disableHandler() {
    if (confirm("Are you sure you wish to Disable Penalty Marks?" + "\n" + "(You cannot change your option once you have confirmed)" + "\n")) {
        $.when($.ajax({
            url: "sessioncomplete.php",
            async: false,
            type: "POST"
        })).then(window.location = "complete.php");
        return true;
    }
} 
```

在上面的代码中，我使用 ajax 导航到页面，然后在 ajax 完成导航到该页面后，它会重新定位到`complete.php`会话。

但我以前从未这样做过，但我意识到在重新定位到该页面之前，我需要通过 ajax 导航第二个`complete.php`页面。所以我希望 ajax 导航到 2 页`penaltyinsert.php first then sessioncomplete.php`，然后重新定位到`sessioncomplete.php`.

我的问题是我在哪里以及什么是正确的方法，我把第二个 ajax 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:07:18.600

使用`ajax` `success`函数代替`$.when`and`then`

```
$.ajax({
        url: "penaltyinsert.php",
        async: false,
        type: "POST",
        success:function(result){
            $.ajax({
                 url: "sessioncomplete.php",
                 async: false,
                 type: "POST",
                 success:function(response){
                      window.location = "complete.php"
                  };
               })
        };
    }) 
```

# voip - 为什么星号服务器会在一分钟后更新客户端的状态

> ID：14233655
> 
> 赞同：0
> 
> 时间：2013-01-09T10:53:15.073
> 
> 标签：voip, asterisk, pbx

任何人都可以告诉我，当我取消注册我的软电话（xlite）客户端时，我在星号服务器上执行“sip show peers”命令，然后为什么它显示其状态（OK）。当我在一分钟后执行相同的命令时，它会显示（未知）状态。它实际上在一分钟后更新状态？为什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:00:52.647

您 xlite 工作不正常，并且没有执行任何注销操作。当 xlite 在下一个重新注册间隔内不进行重新注册时，状态变为未知。

您可以通过从 xlite（非常错误的软件）移出到其他软件电话或将注册时间减少到 20-30 秒来减少时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:06:44.523

在 sip.conf 中创建 sip 帐户时添加以下属性。

```
[211]
.
.
.
qualify=yes
qualifyfreq=3 (time in seconds in which sip status will be updated) 
```

[http://www.voip-info.org/wiki/view/Asterisk%20sip%20qualify](http://www.voip-info.org/wiki/view/Asterisk%20sip%20qualify)

# ubuntu - 执行 sudo apt-get install -f 后如何修复 Ubuntu

> ID：14233657
> 
> 赞同：-1
> 
> 时间：2013-01-09T10:53:19.383
> 
> 标签：ubuntu, ubuntu-12.04

首先，对不起我的英语。

可能在执行此命令后：

```
sudo apt-get install -f 
```

我从系统中卸载了大多数应用程序。登录后我只看到壁纸，顶部和底部工具栏消失了。我有 Ubuntu 12.04 请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:02:01.060

“sudo apt-get install -f” 仅修复缺少的依赖项，它可能不是导致您的问题的原因。

您可能需要重新安装 UI。

# powershell - 从快捷方式打开特定目录中的 Powershell

> ID：14233659
> 
> 赞同：79
> 
> 时间：2013-01-09T10:53:27.637
> 
> 标签：powershell, windows-7, shortcuts

这听起来应该很简单……我一定很笨。

我想要的只是制作一个 Windows 快捷方式，将 Powershell 打开到特定目录：

我正在使用目标：

```
%SystemRoot%\system32\WindowsPowerShell\v1.0\powershell.exe 
    -noexit -command {cd c:/path/to/open} 
```

把它作为文本吐出命令。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-01-09T11:00:50.317

使用此命令。

```
powershell.exe -noexit -command "cd c:\temp" 
```

`-NoExit`: 运行启动命令后不要退出。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-01-09T12:21:35.987

您还可以将“开始于”快捷方式字段设置为您想要的位置。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-09T10:58:39.787

好的 - 您需要使用`&`参数来指定它是一个 powershell 命令，语法略有不同：

```
%SystemRoot%\system32\WindowsPowerShell\v1.0\powershell.exe 
-noexit -command "& {cd c:\path\to\open}" 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-03-25T18:35:32.287

为Powershell定义一个快捷方式，并打开它的属性，最后在“开始”中键入触发Powershell快捷方式时要打开的文件夹目标 [![](../Images/7aba703eb2ea3c34b43b6f67bfaeddf2.png)](https://i.stack.imgur.com/nwt5t.png)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-09T11:01:07.247

尝试：

```
%SystemRoot%\system32\WindowsPowerShell\v1.0\powershell.exe 
-noexit -command "cd c:/path/to/open" 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-08-28T13:54:29.407

如果您希望 powershell 以管理员身份启动并在特定目录中运行，即使在不同的驱动器上，最好使用该`Set-Location`命令。按着这些次序

1.  创建一个 ShortCutLink，目标是 powershellcommand exe。
2.  留空`Start in:`。（*通常这在空白时从当前工作目录开始；但我们不在乎。*）
3.  使用您的 powershell 和位置目标更改`Target`为：

    `C:\Windows\...\v1.0\powershell.exe -noexit -command "Set-Location D:\_DCode\Main"`

4.  单击`Advanced...`并选择`Run as administrator`。
5.  点击`OK`退出。

* * *

不要忘记从`Colors`选项卡更改快捷方式颜色的便捷技巧。这样，如果您有两个或多个打开 powershell 窗口的链接，看到不同的颜色可以直观地让您知道哪个 shell 正在工作。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-11-10T06:12:25.407

如果需要资源管理器右键单击选项，请运行此脚本：

```
New-PSDrive -Name HKCR -PSProvider Registry -Root HKEY_CLASSES_ROOT
if(-not (Test-Path -Path "HKCR:\Directory\shell\$KeyName"))
{
    Try
    {
        New-Item -itemType String "HKCR:\Directory\shell\$KeyName" -value "Open PowerShell in this Folder" -ErrorAction Stop
        New-Item -itemType String "HKCR:\Directory\shell\$KeyName\command" -value "$env:SystemRoot\system32\WindowsPowerShell\v1.0\powershell.exe -noexit -command Set-Location '%V'" -ErrorAction Stop
        Write-Host "Successfully!"
     }
     Catch
     {
         Write-Error $_.Exception.Message
     }
}
else
{
    Write-Warning "The specified key name already exists. Type another name and try again."
} 
```

这是现在显示的内容：

[![在此处输入图像描述](../Images/ef3e9c0e79a58dd3e9e638e3a60cd64a.png)](https://i.stack.imgur.com/24t8X.png)

* * *

请注意，您可以从[如何从 Windows Explorer 启动 PowerShell](https://gallery.technet.microsoft.com/How-to-start-PowerShell-4953b7ba)下载详细的脚本。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-11-07T05:43:37.623

将此代码复制到记事本中并使用 reg 扩展名保存。双击生成的文件。如果您收到有关导入注册表的消息，请单击是，然后确定。导航到资源管理器中的任何文件夹并调出上下文菜单。这通常通过单击鼠标右键来完成。

* * *

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\Directory\Background\shell\PShell]
"MUIVerb"="Open in Powershell Window"

[HKEY_CLASSES_ROOT\Directory\Background\shell\PShell\command]
@="c:\\windows\\system32\\WindowsPowerShell\\v1.0\\powershell.exe -NoExit -Command Set-Location -LiteralPath '%V'" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-06T12:57:34.030

我只是想添加我的 Developer Powershell 链接……作为记录。

```
C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe -noe -c "&{Import-Module """C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\Common7\Tools\Microsoft.VisualStudio.DevShell.dll"""; Enter-VsDevShell d998f19b; cd c:\dev\}" 
```

这将在`c:\dev\`.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-20T11:38:01.790

如果您正在使用`Powershell 7 (pwsh)`，只需使用如下`-WorkingDirectory`标志：

```
pwsh -WorkingDirectory "C:\path\to\your\directory" 
```

# vb.net - 尝试在实体模型的 PropertyChanging 事件中使用存储过程时未处理 NullreferenceException

> ID：14233660
> 
> 赞同：1
> 
> 时间：2013-01-09T10:53:28.557
> 
> 标签：vb.net, entity-framework

我意识到我几乎可以肯定是密集的，但这开始让我烦恼，如果你能原谅双关语的话。

在我的实体数据模型中，我有一个实体的部分类，并且在其中我已将代码添加到 PropertyChanging 事件以（我希望）基于对导入模型的存储过程的调用将值分配给另一个实体的值并将在其属性更改事件中用作参数的属性的值。

调用的基本语法（我应该在 vb 中添加）是；

```
 Private Sub OnVesselIdChanging(value As Integer)
    PortOfLanding = tp.GetDefaultVesselLandingPort(value).SingleOrDefault
End Sub 
```

按原样使用会导致“用户代码未处理 NullReferenceException”。因此，为了解决这个问题，我尝试将它包装在 try catch 块和各种其他构造中以捕获 null。显然我错过了 null 引用的确切含义，我知道将正确值的参数传递给函数，并且我知道底层数据库中有数据可以返回一个值，所以为什么会发生这种情况。

我想正确使用实体数据模型，因此积极了解其原因将有很大帮助。

非常感谢您对此事的看法。

# javascript - 如何在严格模式下覆盖 Function.length 以返回数组的长度

> ID：14233661
> 
> 赞同：5
> 
> 时间：2013-01-09T10:53:33.810
> 
> 标签：javascript, arrays, function, overriding

我正在寻找一种方法来覆盖 JavaScript 中 Object 的 .length 属性。

我目前在 parent.properties.objects 数组上有一个包装器

（父用于使代码在上下文中更具可读性）

这是基本结构：

（父变量在命名空间中定义并初始化）

```
var parent = function () {
  this.properties = {
    objects: [];
  };
}; 
```

# 包装

```
(function () {
  "use strict";

  objects = function () { 
```

如果没有传递参数，则假设 get

```
 if (arguments.length === 0) {
    var _objects = parent.properties.objects;
    return _objects; 
```

修改或过滤对象

```
 } else if (arguments.length > 0) {
      ...
    }
  }; 
```

这会创建一个 object.prototype (not [prototype]) 变量并添加方法 length()

```
 objects.prototype.length = function () {
    var length = parent.properties.objects.length;
    return length;
  } 
```

错误

```
 objects.prototype.__proto__.length = function () {    
    var length = parent.properties.objects.length;
    return length;
  }

  parent.objects = objects;
})(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-16T00:40:27.867

假设我正确理解了您的问题，以下代码可能会对您有所帮助：

```
function MyObject() {
  this.myActualData = [];
}

Object.defineProperty(MyObject.prototype, 'length', {get: function() {
   return this.myActualData.length;
}}); 
```

这是一个使用中的例子：

```
var x = new MyObject();
x.myActualData.push("Hello");
x.myActualData.push("World");
x.length; // is 2 
```

注意：这仅适用于 ecmascript 5 及更高版本的浏览器。

# wordpress - Wordpress 插件添加新页面

> ID：14233662
> 
> 赞同：0
> 
> 时间：2013-01-09T10:53:36.187
> 
> 标签：wordpress

我创建了一个需要动态创建页面的 wordpress 插件。

当插件被激活时，会创建一个页面 COOKIE_POLICY。

从我的阅读中我发现插入数据库是最好的方法。下面是做到这一点的方法。但是，当我激活插件时，没有创建页面或帖子。

我来自： [http ://codex.wordpress.org/Function_Reference/wp_insert_post](http://codex.wordpress.org/Function_Reference/wp_insert_post)

```
function create_policy() {

  $my_post = array(
  'post_title'    => wp_strip_all_tags( $_POST['COOKIE_POLICY'] ),
  'post_content'  => $_POST['Here is all our cookie policy info'],
  'post_status'   => 'publish',
  'post_author'   => 1,
  'post_category' => array( 8,30 )
  );

  // Insert the post into the database
  wp_insert_post( $my_post );
}

register_activation_hook( __FILE__, 'create_policy' ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:02:29.917

这段代码几乎是正确的。下面是固定代码

```
 function create_policy() {

 $my_post = array(
  'post_title'    => 'cookiepolicy',
  'post_content'  => 'this is my content',
  'post_type'     => 'page',
  'post_status'   => 'publish',
  'post_author'   => 1,
  'post_category' => array( 3,4 )
  );

  // Insert the post into the database
  wp_insert_post( $my_post );
}

register_activation_hook( __FILE__, 'create_policy' ); 
```

# xpages - 附件的临时文件夹

> ID：14233667
> 
> 赞同：0
> 
> 时间：2013-01-09T10:54:08.747
> 
> 标签：xpages

放置一些稍后将成为附件的临时文件的最佳位置是什么（通过 embedObject）？是否有任何可用于此目的的 xpages 临时文件夹？

或者有没有一种方法可以在不使用中间文件的情况下从流中创建附件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:20:58.200

您可以使用 MIMEEntity 执行类似的操作。然后，您将能够将附件直接流式传输到您的笔记文档中。您将必须获得notesdocument 的句柄和带有文件内容的输出流。然后你可以尝试做一些我在代码片段中所做的事情。

```
 MIMEEntity m = newDoc.createMIMEEntity( fieldNameForFiles );
        MIMEHeader header = m.createHeader("content-disposition");
        header.setHeaderVal("attachment;filename=\"" + this.getFileName() + "\"");
        Stream oStream = session.createStream();
        InputStream is = new ByteArrayInputStream( ((ByteArrayOutputStream)outStream).toByteArray() );
        oStream.setContents(is);
        m.setContentFromBytes(oStream, "application/pdf", MIMEEntity.ENC_IDENTITY_BINARY); 
        m.decodeContent();
        newDoc.save(true, true); 
```

# jsp - jstl库是否需要在tomcat web.xml上配置？

> ID：14233670
> 
> 赞同：3
> 
> 时间：2013-01-09T10:54:18.773
> 
> 标签：jsp, tomcat, configuration, jstl, web.xml

我正在为课程做一个 java web 应用程序，它需要使用 JSTL 库；
所以我的问题是：
JSTL 是否需要在 tomcat web.xml 上配置？如果是这样，我该如何配置它？
我已经下载了jar文件；我必须把它放在哪里？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T10:58:30.907

不，您不必在 web.xml 中定义它。

您应该将 jar 放入您的 WEB-INF/lib 并在您的 jsp 中声明它。就像是：

```
<%@ taglib prefix="c"       uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt"     uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="fn"      uri="http://java.sun.com/jsp/jstl/functions" %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:35:00.357

不，您无需在 web.xml 中配置任何内容。

**对于 Java EE 5 容器 >** 您不必在 WEB-INF/lib 中捆绑 jstl jar

**其他** 你必须在 WEB-INF/lib 中捆绑 jstl

并通过像这样定义 taglib 指令在 JSP 中使用 JSTL 标记：

核心标签

```
<%@ taglib prefix="c" 
           uri="http://java.sun.com/jsp/jstl/core" %> 
```

格式化标签

```
<%@ taglib prefix="fmt" 
           uri="http://java.sun.com/jsp/jstl/fmt" %> 
```

SQL 标记

```
<%@ taglib prefix="sql" 
           uri="http://java.sun.com/jsp/jstl/sql" %> 
```

XML 标签

```
<%@ taglib prefix="x" 
           uri="http://java.sun.com/jsp/jstl/xml" %> 
```

功能标签

```
<%@ taglib prefix="fn" 
           uri="http://java.sun.com/jsp/jstl/functions" %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-19T22:57:04.357

JSTL 的使用不需要在 web.xml 中配置，但如果你有 jstl-1.x.jar 进入`/WEB-INF/lib`，可以这样做：

在`/WEB-INF/web.xml`添加下`<\welcome-file-list>`：

```
 <jsp-config>
    <jsp-property-group>
      <url-pattern>*.jsp</url-pattern>
      <include-prelude>/WEB-INF/taglibs.jsp</include-prelude>
    </jsp-property-group>
  </jsp-config> 
```

然后在使用以下参考`/WEB-INF/`创建`taglibs.jsp`

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %> 
```

使用此解决方案，您不必在每个 JSP 文件中添加 taglib 指令。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-20T16:24:08.953

您需要确保 thw wen-inf/lib 目录中的 jstl-api 1.2 和 jstl-impl 1.2。不需要对 web.xml 进行其他更改。这应该可以。

# javascript - ExtJS3.4：几秒钟后自动关闭窗口

> ID：14233671
> 
> 赞同：0
> 
> 时间：2013-01-09T10:54:28.060
> 
> 标签：javascript, extjs, settimeout

我已经阅读了很多关于此的帖子，但 settimeout 仍然不起作用。我怀疑这是因为代码中的“this”，可能是因为局部/全局变量范围。如何正确设置 settimeout 以在 3 秒后关闭 ext.window？，谢谢，请帮助

```
action = new Ext.Action({
    handler: function(){
        if (this.pressed){
            if (!this.panelWin){
                this.panelWin = new Ext.Window({
                    border: false,
                    resizable: false,
                    draggable: false,
                    closable: false,
                    layout: 'fit',
                    autoWidth: true,
                    autoHeight: true,
                    items: [newPanel],
                    listeners:{
                        show: function() {
                            setTimeout("this.panelWin.destroy()", 3000);
                        }
                    }
                });
            }
            this.panelWin.show();
            }
            else
            {
            this.panelWin.hide();
            }
       }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T10:59:10.177

尝试这个：

```
this.panelWin = new Ext.Window({
                    border: false,
                    resizable: false,
                    draggable: false,
                    closable: false,
                    layout: 'fit',
                    autoWidth: true,
                    autoHeight: true,
                    items: [newPanel],
                    listeners:{
                        show: function() {
                            var self = this;
                            setTimeout(function() {
                                self.destroy()
                            },3000);
                        },
                        scope: this
                    }
                }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:57:47.243

和你需要这样的东西`setTimeout`：`this`

```
var self = this;
setTimeout(function () { self.panelWin.destroy(); }, 3000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:34:32.857

除了`setTimeout()`，您可以使用`Ext.TaskMgr`或在特定时间间隔后`Ext.util.TaskRunner`执行。根据您的需要`task`使用`Start`和方法。`Stop`

[Ext.util.TaskRunner](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.util.TaskRunner)

[分机任务管理器](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.TaskMgr)

# jquery - jQuery slideDown 将宽度更改为 1px

> ID：14233674
> 
> 赞同：1
> 
> 时间：2013-01-09T10:54:32.440
> 
> 标签：jquery

我已经花了几天时间，我不再有任何想法，如何解决我的问题。我会用截图展示：

![在此处输入图像描述](../Images/7578c950c8dcf39dd6b32112d85e4b0e.png) ![在此处输入图像描述](../Images/a1613e6cfa90f738c225fe40267d20df.png) 这个想法是，当鼠标不在元素上时，它只显示顶部和底部，当鼠标悬停时，中间元素向下滑动。如您所见，在第一张图片的中间部分（facebook 和 google+ 图标在哪里），背景是重复的图案，比右边的图片薄 1px。在不同的屏幕分辨率上捕获的相同元素。我们的内容随屏幕分辨率缩放。奇怪的是，所有图像的宽度都相同，但看起来却不同。

CSS代码：

```
.ribbon .vintage .nolog {
width: 92px;
}

.ribbon .vintage .nolog .top {
width: 92px;
height: 59px;
background: url("/img/ribbon/vintage/n/vintage_nolog_top.png");
}
.ribbon .vintage .nolog .center {
width: 92px;
display: none;
background: url("/img/ribbon/vintage/n/vintage_nolog_repeat.png") repeat-y;
}
.ribbon .vintage .nolog .bottom {
width: 92px;
height: 69px;   
background: url("/img/ribbon/vintage/n/vintage_nolog_bottom.png");
} 
```

我通过 jquery 生成的 html ：

```
(....).append($('<div/>', {'class': 'vintage'}).hover(slideDown, slideUp).(....)
//and here those animating functions
    var slideUp = function() {
        $(this).find('.center').stop(true, false).slideUp(options.duration);
    }
    var slideDown = function() {
        $(this).find('.center').stop(true, true).slideDown(options.duration);
    } 
```

代码很简单。哦，这个错误只出现在 Chrome 上：x

jsfiddle： http: [//jsfiddle.net/QbX9f/](http://jsfiddle.net/QbX9f/) 有一些鼠标悬停故障，但我在实际应用中没有它们。另外 - 结果如我所料 - 在这里你看不到故障，它是由适用于所有元素的 css3 scale() 引起的。但最奇怪的是 - 仅在 chrome 上。

更新：/我现在发现，当我不重复中间部分（将其高度设置为背景图像高度）时，它不会缩小！这么奇怪。

# asynchronous - ActiveMQ 异步发送等待所有消息发送

> ID：14233675
> 
> 赞同：1
> 
> 时间：2013-01-09T10:54:35.347
> 
> 标签：asynchronous, activemq

我正在使用 activemq 发送消息。由于发送的消息数量和应用程序发送的其他工作量。我启用了异步发送。

当应用程序结束时，我想确保实际传递了剩余的消息，因为我们有时会错过连接上的最后一条消息。

谷歌搜索我发现只有警告说你可能会错过一些消息，这是可以接受的，但是我们错过了大约 40% 的时间。我希望改善这种情况。

*问：有什么方法可以检查 activemq 生产者/发送者是否发送了所有的异步消息？*

```
 ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory( brokerUrl );
    connectionFactory.setUseAsyncSend( true );
    RedeliveryPolicy policy = connectionFactory.getRedeliveryPolicy();
    policy.setInitialRedeliveryDelay( 500 );
    policy.setBackOffMultiplier((short)2);
    policy.setUseExponentialBackOff(true);
    policy.setMaximumRedeliveries(10); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:16:33.617

您可以将最后一条消息的异步发送模式设置回关闭，这将导致客户端等待发送，直到代理确认已收到消息。Connection 对象需要转换为 ActiveMQConnection 然后您可以调用 setUseAsyncSend(false)

# hibernate - Hibernate 双向多对一

> ID：14233678
> 
> 赞同：2
> 
> 时间：2013-01-09T10:55:08.663
> 
> 标签：hibernate, hibernate-mapping

我遇到以下错误的问题：

```
Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/library.xml]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: A Foreign key refering tv.mirada.connect.cashless.parking.model.PaymentInterface from tv.mirada.connect.cashless.parking.model.Merchant has the wrong number of column. should be 0 
```

我花了大约一天的时间寻找答案和尝试，但没有运气。我实际上不需要双向访问，我只需要能够从 payment_interface 获取商家表行，但仅包含双向似乎比尝试从一个到多个的单向更简单。

我使用的表是商家表和支付接口表。我意识到我可以让商家表直接引用节点表，但是商家表在支付接口中有一个信息扩展，所以这样映射更有意义。

```
@Entity
@Cache(usage = CacheConcurrencyStrategy.READ_ONLY)
@Table(name = "park_merchant")
public class Merchant implements java.io.Serializable {

    @Id
    @GeneratedValue
    @Column(name="id", unique=true, nullable=false)
    private Integer id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name="payment_interface_node_id", nullable = false)
    private PaymentInterface paymentInterface;

@Entity
@Table(name = "park_payment_interface", uniqueConstraints = @UniqueConstraint(columnNames = "name"))
public class PaymentInterface implements java.io.Serializable {

    @Id
    @OneToOne(fetch=FetchType.LAZY, cascade=CascadeType.ALL)
    @JoinColumn(name = "node_id", unique = true, nullable = false)
    private Node node;

    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "paymentInterface")
    private Set<Merchant> merchants = new HashSet<Merchant>(0); 
```

希望我只是缺少一些简单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:03:28.643

啊，找到了解决办法。我需要将 @ManyToOne 和 @JoinColumn 放在 getter 上的 Merchant 表中，而不是放在变量声明上。我仍然不确定为什么，但至少我现在知道了。

# android - 选取框在 Android 4.1.1 中无法正常工作

> ID：14233679
> 
> 赞同：1
> 
> 时间：2013-01-09T10:55:11.243
> 
> 标签：android, android-layout

我开发了一个应用程序，我使用了在 android 2.3.6 和 4.0.1 中工作的字幕文本，但在 android 4.1.1 中它在末尾显示点。当焦点改变时选取框停止。我的代码如下。提前致谢 。`

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     android:orientation="vertical" 
    android:background="@color/bodybg"
    android:fillViewport="true">
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     android:orientation="vertical" 
    android:background="@color/bodybg"
    >  
    <TextView       
      android:id="@+id/MarqueeText" 
      android:layout_width="match_parent"
      android:layout_height="wrap_content" 
      android:singleLine="true"
      android:scrollHorizontally="true"
      android:scrollbars="horizontal"
      android:ellipsize="marquee"  android:paddingLeft="15dip" android:paddingRight="15dip" android:focusable="true" android:focusableInTouchMode="true" 
      android:background="@color/scroll_text"
      android:paddingTop="8dp"
      android:paddingBottom="8dp"
      ></TextView>
    <View
                android:layout_width="match_parent"
                android:layout_height="4dp"
                android:background="@drawable/zigzag" 
                />
    <LinearLayout  android:layout_width="match_parent"
    android:layout_height="match_parent"
     android:orientation="vertical"

    android:layout_weight="1"
    android:gravity="center"
    >
   <TextView
       android:gravity="center"
        android:id="@+id/home_body_title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/home_title"
        android:textSize="32dp" 
        android:textColor="@color/theme" 
        android:layout_gravity="center_horizontal"
        />
    <TextView
        android:gravity="center"
        android:id="@+id/home_body_sub_title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/home_sub_title"
        android:textColor="@android:color/black"
        android:textSize="13dp"
        android:layout_gravity="center_horizontal"
        />
     </LinearLayout>
  <LinearLayout android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical"
      android:layout_marginTop="8dp"
    android:paddingLeft="10dp"
    android:paddingRight="10dp"
    android:weightSum="7"
      >  
   <LinearLayout android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:orientation="horizontal"
      android:layout_marginTop="30dp"
      android:layout_marginBottom="8dp"
      android:layout_weight="2">
     <TextView
        android:drawableTop="@drawable/tax_table_home"
        android:id="@+id/tax_calc"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/tax_table_home_screen_message"
        android:layout_marginRight="15dp"
        android:background="@drawable/navigator_bg"
        android:layout_weight="1"
        android:paddingTop="5dp"
        android:textSize="8dp"
        android:textColor="@android:color/black"
        android:gravity="center"
        android:paddingBottom="3dp"
        android:drawablePadding="5dp"

        />
     <TextView
        android:drawableTop="@drawable/tax_calc_home"
        android:id="@+id/tax_table"
        android:layout_marginLeft="8dp"
        android:layout_marginRight="8dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/tax_calc_home_screen_message"
        android:background="@drawable/navigator_bg"
        android:layout_weight="1"
        android:paddingTop="5dp"
        android:textSize="8dp"
        android:textColor="@android:color/black"
        android:gravity="center"
        android:paddingBottom="3dp"
        android:drawablePadding="5dp"
        />
     <TextView
        android:drawableTop="@drawable/tax_calender_home"
        android:id="@+id/calender"
        android:layout_marginLeft="15dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/calender_home_screen_message"
        android:background="@drawable/navigator_bg"
        android:layout_weight="1"
        android:paddingTop="5dp"
        android:textSize="8dp"
        android:textColor="@android:color/black"
        android:gravity="center"
        android:paddingBottom="3dp"
        android:drawablePadding="5dp"
        />

     </LinearLayout>
     <LinearLayout android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:orientation="horizontal"
      android:layout_weight="1" >
     <View
                android:layout_width="0dp"
                android:layout_height="1dp"
                android:layout_marginTop="5dp"
                android:background="@color/theme" 
                android:layout_weight="1"/>
     </LinearLayout>
     </LinearLayout> 
     <LinearLayout android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:paddingLeft="10dp"
    android:paddingRight="10dp">
     <android.support.v4.view.ViewPager
    android:id="@+android:id/viewpager"
    android:layout_weight="1"
    android:layout_marginTop="3dp"
    android:layout_marginBottom="3dp"
    android:layout_width="0dp"
    android:layout_height="150dp"
    android:layout_gravity="center_vertical"
    android:background="@drawable/navigator_bg"
    />
     </LinearLayout>

</LinearLayout>
</ScrollView> 
```

`

# prestashop - Prestashop 1.5 上每个制造商的子域

> ID：14233680
> 
> 赞同：0
> 
> 时间：2013-01-09T10:55:11.423
> 
> 标签：prestashop

在 Prestashop 1.5 上，每个制造商都有一个子域。

我有兴趣使用子域（例如）*manufacturerX.domainshop.com显示（例如） domainshop.com/?id_manufacturer=45*

我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:44:36.047

如果您的制造商很少，您可以轻松修改.htaccess。

为每个制造商添加这些行（将“2”和“manufac”替换为您的制造商的 ID 和名称）：

```
# redirect to manufacturer subdomain
RewriteCond %{HTTP_HOST} ^manufacturerX.domainshop.com$
RewriteRule ^(.*)$ http://www.domainshop.com/2_manufacturerX [R=301,L,QSA] 
```

# windows-phone-7 - Windows phone7.1中PNG图片转base64

> ID：14233683
> 
> 赞同：0
> 
> 时间：2013-01-09T10:55:26.983
> 
> 标签：windows-phone-7, windows-phone-7.1

我想将在 Windows phone7.1 中的 html 页面路径中找到的 PNG 图像转换为 base64。如何完成？

```
 Stream imgStream;
        imgStream =   Assembly.GetExecutingAssembly().GetManifestResourceStream("NewUIChanges.Htmlfile.round1.png");
        byte[] data = new byte[(int)imgStream.Length];
        int offset = 0;
        while (offset < data.Length)
        {
            int bytesRead = imgStream.Read(data, offset, data.Length - offset);
            if (bytesRead <= 0)
            {
                throw new EndOfStreamException("Stream wasn't as long as it claimed");
            }
            offset += bytesRead;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:58:48.187

它是 PNG 图像的事实实际上是无关紧要的 - 您只需要知道您有一些*字节*需要转换为 base64。

将流中的数据读入字节数组，然后使用[`Convert.ToBase64String`](http://msdn.microsoft.com/en-us/library/system.convert.tobase64string.aspx). 从流中读取字节数组可能会有些繁琐，具体取决于流是否通告其长度。如果是这样，您可以使用：

```
byte[] data = new byte[(int) stream.Length];
int offset = 0;
while (offset < data.Length)
{
    int bytesRead = stream.Read(data, offset, data.Length - offset);
    if (bytesRead <= 0)
    {
        throw new EndOfStreamException("Stream wasn't as long as it claimed");
    }
    offset += bytesRead;
} 
```

如果没有，最简单的方法可能是将其复制到`MemoryStream`：

```
using (MemoryStream ms = new MemoryStream())
{
    byte[] buffer = new byte[8 * 1024];
    int bytesRead;
    while ((bytesRead = stream.Read(buffer, 0, buffer.Length)) > 0)
    {
        ms.Write(buffer, 0, bytesRead);
    }
    return ms.ToByteArray();
} 
```

因此，一旦您使用*了*这些代码中的任何一个（或任何其他合适的代码）来获取字节数组，只需使用即可`Convert.ToBase64String`。

可能有一些流式解决方案可以避免将整个字节数组放在内存中——例如，建立一个`StringBuilder`base64数据——但它们会更复杂。除非你要处理非常大的文件，否则我会坚持上面的。

# jquery - Jquery Image rotate和toggle在IE8和IE9中一次不起作用

> ID：14233686
> 
> 赞同：0
> 
> 时间：2013-01-09T10:55:41.183
> 
> 标签：jquery

要求是当我们点击图片时，图片应该是旋转的，下面的相应数据应该被隐藏，当我们再次点击图片时，图片应该是旋转的，相应的隐藏数据应该被显示。

就像在 Visual Studio 2010 解决方案资源管理器中一样，当我们单击图像按钮时，图像正在旋转并且下面的相应数据被隐藏。

我的代码在 Google cromo 和 Mozilla 上运行良好。但在 IE8 和 IE9 中它不能正常工作。

**我的插件**

```
<script src="@Url.Content("~/Scripts/jQueryRotate.2.2.js")" type="text/javascript">   </script> 
```

**我的 IE8 代码：**

```
<!--[if IE 8]>
<script type="text/javascript">
    var deg = 0;
    $(document).ready(function () {
        $('#imgId').click(function () {
            deg = deg ? 0 : -90;
            rotationDeg = 0;
            switch (deg % 360) {
                case 0:
                    rotationDeg=0;
                    break;
                case -90:
                    rotationDeg=3;
                    break;
            }
            $('#divId').slideToggle("slow");           
            $("#imgId").css('filter', 'progid:DXImageTransform.Microsoft.BasicImage(rotation=' + rotationDeg + ')');
            $('#divId').Toggle("slow");
        });
    });
</script>
<![endif]--> 
```

上面的代码工作正常，但它显示了下面的 javaScript 错误。

> 对象不支持属性或方法“切换”

然后我把它改成

```
$('#divId').toggle("slow"); 
```

现在javaScript错误已解决，但图像旋转并`toggle`不能正常工作。同样的问题也发生在 IE9 上。任何人都可以帮助解决这个问题 - 我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:16:14.340

尝试这个：

```
<!--[if IE 8]>
<script type="text/javascript">
var deg = 0;
 $(document).ready(function () {
 $('#imgId').click(function () {
               deg = deg ? 0 : -90;
               rotationDeg=0;
               switch(deg%360){
               case 0:
               rotationDeg=0;
               break;
               case -90:
               rotationDeg=3;
               break;
               //<---------removed the '}' here
  $('#divId').slideToggle("slow");           
$("#imgId").css('filter','progid:DXImageTransform.Microsoft.BasicImage(rotation='+rotationDeg+')');
 $('#divId').toggle("slow");

       });
});
       </script>
<![endif]--> 
```

# javascript - 在 Angular 中，如何有效地将输入项拆分为数组

> ID：14233689
> 
> 赞同：7
> 
> 时间：2013-01-09T10:55:55.840
> 
> 标签：javascript, model-view-controller, angularjs

像这样将输入值绑定到 ng-model 时：

```
<input type="text" ng-model="array"> 
```

如何将输入文本绑定为数组？因此，如果我输入`one, two, three`，生成的模型将是`[ "one","two","three ]`.

现在这就是我实现这一目标的方式：

```
<input type="text" ng-model="string" ng-change="convertToArray()"> 
```

在我的控制器中：

```
$scope.convertToArray = function(){
    $scope.array = $scope.string.split(',');
} 
```

它工作正常，但我认为这不是最佳做法，因为我正在创建一个`$scope.string`变量，然后对目标数组进行硬编码。

是否可以将输入的模型设置为数组，然后让输入在绑定到范围之前通过函数？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-09T15:56:23.770

[ngList](https://docs.angularjs.org/api/ng/directive/ngList)将完全按照您的意愿行事。

> 将逗号分隔的字符串转换为字符串数组的文本输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:07:48.403

不可以。由于您的输入将是来自用户的字符串，因此您需要手动将其转换为数组或任何其他格式。

类似的讨论和其他方法在这里讨论。可能这可能会有所帮助。（请参阅此处接受的答案）

[如何在 AngularJS 的 ng-options 中设置 value 属性？](https://stackoverflow.com/questions/12139152/how-to-set-value-property-in-angularjs-ng-options)

# jquery - 实现 Ajax 文件上传的最佳方法？

> ID：14233691
> 
> 赞同：1
> 
> 时间：2013-01-09T10:55:59.740
> 
> 标签：jquery, web-applications, file-upload

如何为某个表单图像实现“ajax”文件上传（这个名称是否存在，或者这只是一个处理文件上传的 iframe？）？让我们假设用户配置文件的图片，这意味着用户可以上传图片，但在他按下“保存”之前，不会保存任何内容。另一个问题是：如何在上传结束后，但在提交个人资料表单之前看到用户图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:16:11.600

如果您真的想实现 ajax 上传您自己阅读有关[XMLHttpRequest 2](http://caniuse.com/#feat=xhr2)和 formData（单击链接以查看您想要的浏览器是否支持它）。

但是如果你想让它在不支持 ajax 文件上传的浏览器中工作，你需要实现某种抽象，它会降级并为你提供替代 iFrame 版本（[阅读这里](http://cmlenz.github.com/jquery-iframe-transport/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:59:35.093

看看[Zurb 的 Ajax Upload](http://zurb.com/playground/ajax_upload)。它现在已经很老了，您可能想检查它是否仍在使用 jQuery 的实际版本。

# hibernate - Maven 依赖冲突（Wicket + Spring + Hibernate / ASM）

> ID：14233692
> 
> 赞同：1
> 
> 时间：2013-01-09T10:56:03.127
> 
> 标签：hibernate, maven, dependencies, wicket

我目前正在将 Wicket 项目从 wicket 版本 1.4.2 升级到 6.4.0。wicket 组件/页面的迁移进展顺利，但我遇到了 projet 依赖项的问题。

这是一个老项目，依赖老技术和私有框架。我的公司框架（目前）无法升级，所以我必须处理它的特殊性。

当我将我的 web 应用程序部署到 Glassfish 时，我收到以下错误：

```
ERROR - ContextLoader              - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in URL  [jar:file:/home/company/glassfish/domains/domain1/applications/j2ee-modules/mainProject-3.0.0-SNAPSHOT/WEB-INF/lib/daoProject-3.0.0-SNAPSHOT.jar!/dataContext.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(I)V 
```

这似乎是由于 ASM 导致的，Wicket 和 Spring 中都包含使用不同版本的 ASM。

`<dependencies>`我的 poms中有部分内容：

主要项目：

```
<dependency>
    <groupId>my.company</groupId>
    <artifactId>privateFramework</artifactId>
    <version>1.1.6</version>
</dependency>
<dependency>
    <groupId>my.company</groupId>
    <artifactId>daoProject</artifactId>
    <version>3.0.0-SNAPSHOT</version>
</dependency>
<dependency>
    <groupId>org.apach.wicket</groupId>
    <artifactId>wicket-spring</artifactId>
    <version>6.4.0</version>
</dependency> 
```

DAO项目：

```
<dependency>
    <groupId>my.company</groupId>
    <artifactId>privateFramework</artifactId>
    <version>1.1.6</version>
</dependency> 
```

私有框架：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-hibernate3</artifactId>
    <version>2.0.8</version>
</dependency> 
```

有`$ mvn dependency:tree -Dverbose -Dincludes=asm`输出：

```
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ immatriculation ---
[INFO] my.company:mainProject:war:3.0.0-SNAPSHOT
[INFO] +- my.company:privateFramework:jar:1.1.6:compile
[INFO] |  \- org.springframework:spring-hibernate3:jar:2.0.8:compile
[INFO] |     \- org.hibernate:hibernate:jar:3.2.5.ga:compile
[INFO] |        +- asm:asm-attrs:jar:1.5.3:compile
[INFO] |        \- asm:asm:jar:1.5.3:compile
[INFO] \- org.apache.wicket:wicket-spring:jar:6.4.0:compile
[INFO]    \- org.apache.wicket:wicket-ioc:jar:6.4.0:compile
[INFO]       \- cglib:cglib:jar:2.2.2:compile
[INFO]          \- (asm:asm:jar:3.3.1:compile - omitted for conflict with 1.5.3) 
```

是否有解决此类依赖冲突的“最佳实践”？我尝试了几件事（不包括`asm`，`privateFramework`强制 asm 到 3.3.1 使用`dependencyManagement`，...），但我无法让它工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:34:39.843

您可以尝试将范围设置为`cglib:cglib`to `provided`（这样它就不会添加到 WAR 文件中），并`cglib:cglib-nodep`改为使用。此 cglib 发行版具有嵌入的 asm 的“阴影”版本（基本包已更改），从而避免了冲突。

将此添加到您的 POM：

```
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>2.2.2</version>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib-nodep</artifactId>
    <version>2.2.2</version>
</dependency> 
```

# java - 通过建筑物中的多个 WiFi 点进行定位

> ID：14233696
> 
> 赞同：2
> 
> 时间：2013-01-09T10:56:08.523
> 
> 标签：java, android, wifi

有谁知道是否可以为android实现移动应用程序，其主要目的是提供电话在建筑物中的确切位置。我有多个具有相同 SSID 的 WiFi 热点。它有多精确（如果可能）？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:15:32.830

看看这些，它们可能会有所帮助：

[如何使用 Wi-Fi 获取距离](https://stackoverflow.com/questions/684781/how-to-get-distance-using-wi-fi)

[在android中使用Wifi计算位置和距离](https://stackoverflow.com/questions/8921157/location-and-distance-calculation-using-wifi-in-android)

如果没有，请尝试提供更多信息。但是使用这个：[http](http://en.wikipedia.org/wiki/Received_signal_strength_indication) ://en.wikipedia.org/wiki/Received_signal_strength_indication应该可以。

# php - PHPMailer SMTP 错误：无法使用 gmail 作为 smtp 服务器进行身份验证

> ID：14233702
> 
> 赞同：2
> 
> 时间：2013-01-09T10:56:32.887
> 
> 标签：php, smtp, gmail, phpmailer, appfog

我无法在托管在[appfog](http://appfog.com)上的应用程序中发送电子邮件 我正在使用以下代码，该代码在 localhost 上运行良好，但在 appfog 上失败。JPhpMailer 扩展类.PhpMailer.php

```
 $mailer = new JPhpMailer(true);
                    $mailer->IsSMTP();
                    $mailer->Mailer = "smtp";
                    //$mailer->SMTPSecure == 'tls'; 
                    $mailer->Host = 'ssl://smtp.gmail.com';
                    $mailer->Port = '465';
                    $mailer->SMTPAuth = true;
                    //$mailer->SMTPSecure = true; 
                    $mailer->Username = 'me@gmail.com';
                    $mailer->Password = 'zzzzzzz';
                    $mailer->SetFrom($to['from'], $to['from_name']); 
                    $mailer->AddAddress($to['to'],$to['to_name'] ); 
                    $mailer->Subject = $to['subject'];
                    $mailer->Body = $to['body'];
                    $mailer->Send(); 
```

这是 phpMailer 中执行失败的行`if ($tls) { if (!$this->smtp->StartTLS()) { throw new phpmailerException($this->Lang('tls')); }

```
 //We must resend HELO after tls negotiation
        $this->smtp->Hello($hello);
      }

       $connection = true;
      if ($this->SMTPAuth) {
         if (!$this->smtp->Authenticate($this->Username, $this->Password)) {
         **strong text throw new phpmailerException($this->Lang('authenticate')); **            }
      }
     }
   $index++;
    if (!$connection) {
       throw new phpmailerException($this->Lang('connect_host'));
     } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T10:22:45.910

The code below is working for me :

```
require("phpmailer/class.phpmailer.php");

$mail = new PHPMailer();

$mail->IsSMTP();                                      // set mailer to use SMTP
$mail->SMTPAuth = true;     // turn on SMTP authentication
$mail->SMTPSecure = "tls";
$mail->Host = "smtp.gmail.com";  // specify main and backup server
$mail->Port = 587;
$mail->Username = "myemail@gmail.com";  // SMTP username
$mail->Password = "mypass"; // SMTP password

$mail->From = "myemail@gmail.com";
$mail->FromName = "myname";
$mail->AddAddress("myaddress@gmail.com", "myname");

$mail->WordWrap = 50;                                 // set word wrap to 50 characters
$mail->IsHTML(true);                                  // set email format to HTML

$mail->Subject = "Here is the subject";
$mail->Body    = "This is the HTML message body <b>in bold!</b>";
$mail->AltBody = "This is the body in plain text for non-HTML mail clients";

if(!$mail->Send())
{
   echo "Message could not be sent. <p>";
   echo "Mailer Error: " . $mail->ErrorInfo;
   exit;
}

echo "Message has been sent"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-23T15:46:02.560

我遇到了同样的问题。为了让它工作，我必须去[myaccount.google.com](https://myaccount.google.com/) ->“连接的应用程序和网站”，然后将“允许不太安全的应用程序”设置为“开启”（靠近页面底部）。

希望它可以帮助某人

[![在此处输入图像描述](../Images/ae98f5c992f04209a393b6151bad130f.png)](https://i.stack.imgur.com/RnpJb.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T09:20:31.033

注册 appfog 后，我可以让 PHPMailer 使用以下内容。

我无法找到 JPHPMailer，尽管我怀疑这不是您的问题的原因，而是您将 ssl://smtp.gmail.com 作为主机的事实。

```
ini_set('display_errors', 1);
error_reporting(E_ALL);

include('class.phpmailer.php');
$mailer = new PHPMailer(true);
$mailer->IsSMTP();
$mailer->SMTPSecure = 'ssl';
$mailer->Host = 'smtp.gmail.com';
$mailer->Port = 465;
$mailer->SMTPAuth = true;
$mailer->Username = 'me@gmail.com';
$mailer->Password = 'password';
$mailer->SetFrom('me@gmail.com', 'Name'); 
$mailer->AddAddress('you@gmail.com'); 
$mailer->Subject = 'This is a test';
$mailer->Body = 'Test body';
$mailer->Send(); 
```

希望这可以帮助？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-30T04:26:35.660

打印您的`PHPMailer`对象并检查`PORT`对象和您给出的`PORT`

```
echo "<pre>", print_r($mailer, true);
exit; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-12T14:26:09.343

第 1 步：- 转到[https://myaccount.google.com/security#signin](https://myaccount.google.com/security#signin)然后**应用密码**生成**应用密码**。

第 2 步：- 粘贴 16 位密码**$mailer->Password**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-03T10:37:32.897

在大多数情况下，您需要创建两步验证并使用应用密码登录。

小提示：你应该仔细阅读 phpmailer 的调试信息。问题的答案可能有适当的链接。

我有这个：[https ://support.google.com/mail/answer/7126229?visit_id=1-636190350518295662-3485238940&rd=2#cantsignin](https://support.google.com/mail/answer/7126229?visit_id=1-636190350518295662-3485238940&rd=2#cantsignin)

# android - 在 Playstore 中的已发布应用中搜索问题

> ID：14233703
> 
> 赞同：0
> 
> 时间：2013-01-09T10:56:37.447
> 
> 标签：android

我在 Playstore“ABC Jungle”中新发布了一个免费应用程序。但是如果用 ABC 搜索我就找不到它。只有在“ABC丛林”搜索关键字的情况下，我才能找到该应用程序。

如果用户使用“ABC”搜索，有什么方法可以列出我的应用程序。

以及如何获取搜索结果第一页中列出的应用程序。像谷歌用来让应用程序显示在第一页的所有参数是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:03:11.020

即将进入第一页然后取决于谷歌。但是您可以在完成的描述中添加关键字，并且当该词与搜索文本匹配时，谷歌使用该关键字来列出您的应用程序

你的描述

关键字：ABC、abc、ABC Jungle、丛林 abc...等

# core-bluetooth - 您可以在 CoreBluetooth 后台委托调用中做什么？

> ID：14233705
> 
> 赞同：0
> 
> 时间：2013-01-09T10:56:40.277
> 
> 标签：core-bluetooth

我在我的项目中使用核心蓝牙。我已经包含了 Session Backgrounding 以利用其后台模式功能。我观察到外围设备断开的代表，

```
- (void)centralManager:(CBCentralManager *)central didDisconnectPeripheral:(CBPeripheral *)peripheral error:(NSError *)error; 
```

在后台模式下被调用。但是，我在此方法中编写的任何代码都不会执行，除了 NSLogs。有人能准确解释一下这里可以执行什么样的代码吗？

我的目标是将此断开连接通知发送到我的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:24:18.710

好吧，这似乎是我最后的一些问题。根据文档，当您的应用程序收到与蓝牙相关的委托调用时，它会被唤醒（在后台）大约 10 秒。

您可以利用这段时间来执行任何非视图更新任务，甚至使用`beginBackgroundTaskWithExpirationHandler`.

我的代码看起来像这样。

```
if ([UIApplication sharedApplication].applicationState == UIApplicationStateBackground) {
    [self sendEmailInBackground:peripheral]; //Code to send a server request
    return;
} 
```

并且它在后台模式下工作。这在手机处于锁定状态时也有效。

# objective-c - presentViewController 在方向更改为 Portraitupsidedown 后无法正常工作

> ID：14233710
> 
> 赞同：0
> 
> 时间：2013-01-09T10:56:48.770
> 
> 标签：objective-c, ipad, ios5

代码是：

```
OptionsTableViewController *optionsTableVc = [[OptionsTableViewController alloc] initWithItems:itemNames andSelectedItem:-1 andOrigin:-1];

UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:optionsTableVc];
optionsTableVc.delegate = self;
[self presentViewController:nav animated:YES completion:nil]; 
```

`OptionsTableViewController`是一个自定义视图控制器，它继承自`UITableViewController`一个简单的对象

此代码在纵向、向右旋转一次或向左旋转一次时运行良好 - 但是当我在方向更改为 UpsideDown 后尝试执行此代码时 - 它停止工作 - 当我尝试执行它时，当前视图变为“翻转”（即从倒置到倒置，或从横向到横向）并立即消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:07:19.127

您要更改为的视图控制器可能不会为 upsideDown 的以下函数返回“是”

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{

} 
```

如果您的目标视图控制器中还没有此功能，您需要添加它并为您想要支持的所有方向返回 yes（听起来可能全部）。如果你确实想支持所有方向，你可以从这个函数中返回 yes，这应该可以解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:11:45.277

添加此行修复了奇怪的行为：

```
nav.modalPresentationStyle = UIModalPresentationPageSheet; 
```

# php - 类内foreach中的数组

> ID：14233712
> 
> 赞同：0
> 
> 时间：2013-01-09T10:56:53.630
> 
> 标签：php

我在类的 foreach 中使用数组时遇到问题。我收到警告..

> PHP 警告：为 foreach() 提供的参数无效

在线的

```
foreach($this->recordOfDiscounts as $key => $discount) 
```

有问题的功能如下，

```
public function modify_price( $price, $product_id ) {
    foreach($this->recordOfDiscounts as $key => $discount) {
        foreach($discount['get_one_free'] as $id) {
            if($id == $product_id){
                if( $discount['valid'] > 0 ) {
                    $price -= $discount['cost'];
                    $this->recordOfDiscounts[$key]['valid'] -= 1;
                }
            }
        }
    }
    return $price;
} 
```

我是 PHP 新手，但我收集到的是类作用域 ( `$this->`) 需要在类中添加一个 var 前缀。

```
error_log(print_r($this->recordOfDiscounts),0); 
```

输出正确的数组信息，所以我知道它的定义。

```
Array
(
    [0] => Array
        (
            [valid] => 1
            [buy_one] => 2351
            [cost] => 20
            [old_cost] => 20
            [get_one_free] => Array
                (
                    [0] => 2471
                    [1] => 2470
                    [2] => 2472
                    [3] => 2473
                    [4] => 2474
                    [5] => 2475
                    [6] => 2476
                    [7] => 2477
                )

        )

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:00:07.073

其中一个 foreach 语句具有不可迭代的内容作为语句的第一部分。

要么`$this->recordOfDiscounts`不是数组，要么在外部 foreach 的一次迭代中`$discount['get_one_free']`不可迭代。

# java - 如何将消息上下文标头添加到 apache 轴 2 Java

> ID：14233714
> 
> 赞同：3
> 
> 时间：2013-01-09T10:57:01.520
> 
> 标签：java, web-services, jax-ws, axis2, webservice-client

我正在研究网络服务。我想知道我们如何在 JAX-WS 类型的 Web 服务中向 SOAP 请求添加标头。

像这样考虑我的标题。

```
 Map<String, List<String>> headers = new HashMap<String, List<String>>();
    headers.put("Username", Collections.singletonList("aaaa"));
    headers.put("Password", Collections.singletonList("aaaa")); 
```

我的客户端类中有存根对象。我正在使用 Apache Axis 2。所有的类都是自动生成的。

```
SimpleSTub stub = new Simplestub(); 
```

我想在客户端中添加此标头信息。

```
MessageContext.HTTP_REQUEST_HEADERS, headers 
```

**编辑**

普通类中的实际实现为

私有静态最终字符串 WS_URL = "http://localhost:9999/ws/hello?wsdl";

公共静态 void main(String[] args) 抛出异常 {

URL url = 新 URL(WS_URL); QName qname = new QName("http://ws.mkyong.com/", "HelloWorldImplService");

```
Service service = Service.create(url, qname);
HelloWorld hello = service.getPort(HelloWorld.class);

/*******************UserName & Password ******************************/
Map<String, Object> req_ctx = ((BindingProvider)hello).getRequestContext();
req_ctx.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, WS_URL);

Map<String, List<String>> headers = new HashMap<String, List<String>>();
headers.put("Username", Collections.singletonList("mkyong"));
headers.put("Password", Collections.singletonList("password"));
req_ctx.put(MessageContext.HTTP_REQUEST_HEADERS, headers);
/**********************************************************************/

System.out.println(hello.getHelloWorldAsString()); 
```

任何人都可以告诉如何实现这一目标。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T17:21:06.007

你正在用你已经拥有的东西找到解决方案。实现这一点的最基本方法是

1.  在您的客户端代码中，`MessageContext`通过`BindingProvider`您的`SimpleStub`

    ```
    Map<String,Object> context = ((BindingProvder)stub).getRequestContext()
    Map<String,List> headers = context.get(MessageContext.HTTP_REQUEST_HEADERS) 
    ```

2.  更新地图并将其填回到请求上下文对象中

    ```
    context.put(MessageContext.HTTP_REQUEST_HEADERS,headers) 
    ```

    以上一切都很好。但是，如果您尝试执行我认为添加身份验证参数的操作，则推荐的方法是

    ```
    context.put(BindingProvder.USERNAME_PROPERTY,"username");
    context.put(BindingProvder.PASSWORD_PROPERTY,"password"); 
    ```

# c - 在有符号字符上按位与

> ID：14233716
> 
> 赞同：4
> 
> 时间：2013-01-09T10:57:08.290
> 
> 标签：c, bit-manipulation

我有一个已读入数据类型数组的文件`signed char`。我无法改变这个事实。

我现在想这样做：签名字符之一在`!((c[i] & 0xc0) & 0x80)`哪里。`c[i]`

现在，我从[C99 标准](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf)的第 6.5.10 节知道“[按位与] 的每个操作数都应具有整数类型。”

C99 规范的第 6.5 节告诉我：

> 一些运算符（一元运算符 ~ 和二元运算符 << 、 >> 、 & 、 ^ 和 | 统称为按位运算符）应具有整数类型的操作数。这些运算符返回的值取决于整数的内部表示，因此具有符号类型**的实现定义方面**。

我的问题有两个：

*   由于我想使用文件中的原始位模式，如何转换/转换`signed char`为以`unsigned char`使位模式保持不变？

*   在任何地方（比如 MVSC 和 GCC）是否有这些“实现定义的方面”的列表？

或者你可以采取不同的方式，并争辩说对于任何值的有符号和无符号字符，这都会产生相同的结果`c[i]`。

当然，我会奖励参考相关标准或权威文本，并劝阻“知情”的猜测。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T11:42:23.587

正如其他人指出的那样，您的实现很可能是基于二进制补码的，并且会给出您期望的结果。

但是，如果您担心涉及有符号值的操作的结果，并且您只关心位模式，只需直接转换为等效的无符号类型。结果在标准下定义：

* * *

## 6.3.1.3 有符号和无符号整数

1.  ...

2.  否则，如果新类型是无符号的，则通过在新类型中可以表示的最大值的基础上反复加减一，直到该值在新类型的范围内。

* * *

这实质上是指定结果将是值的二进制补码表示。

其基本原理是，在二进制补码数学中，计算结果是以 2 的某个幂为模（即类型中的位数），这反过来又完全等同于屏蔽相关的位数。数字的补码是从 2 的幂中减去的数字。

因此，添加负值与添加任何与该值相差 2 的幂的倍数的值相同。

IE：

```
 (0 + signed_value) mod (2^N)
==
      (2^N + signed_value) mod (2^N)
==
  (7 * 2^N + signed_value) mod (2^N) 
```

等等（如果你知道模数，那应该是不言而喻的）

因此，如果您有一个负数，加上 2 的幂将使其为正数 (-5 + 256 = 251)，但底部的“N”位将完全相同 (0b11111011)，并且不会影响结果数学运算。由于值随后被截断以适合类型，因此即使结果“溢出”，结果也正是您期望的二进制值（即，如果数字一开始是正数，您可能会认为会发生什么 - 这种包装也是明确定义的行为）。

所以在 8 位二进制补码中：

*   -5 与 251 相同（即 256 - 5） - 0b11111011
*   如果将 30 和 251 相加，则得到 281。但这大于 256，并且 281 mod 256 等于 25。与 30 - 5 完全相同。
*   251 * 2 = 502\. 502 mod 256 = 246\. 246 和 -10 都是 0b11110110。

同样，如果您有：

```
unsigned int a;
int b;

a - b == a + (unsigned int) -b; 
```

在幕后，这种转换不太可能用算术实现，并且肯定是从一个寄存器/值到另一个寄存器/值的直接分配，或者只是完全优化，因为数学没有区分有符号和无符号（CPU标志的解释是另一回事，但这是一个实现细节）。该标准的存在是为了确保实现不会自己做一些奇怪的事情，或者我想，对于一些不使用二进制补码的奇怪架构......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:08:35.827

`unsigned char UC = *(unsigned char*)&C`- 这就是您如何将有符号转换`C`为无符号并保持“位模式”。因此，您可以将代码更改为以下内容：

```
!(( (*(unsigned char*)(c+i)) & 0xc0) & 0x80) 
```

说明（附参考文献）：

[761](http://c0x.coding-guidelines.com/6.3.2.3.html) *当指向对象的指针转换为指向字符类型的指针时，结果指向对象的最低寻址字节*。

[1124](http://c0x.coding-guidelines.com/6.5.3.4.html) *当应用于具有 char、unsigned char 或 signed char 类型（或其限定版本）的操作数时，结果为 1*。

这两个意味着`unsigned char`指针指向与原始指针相同的字节`signed char`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:39:00.030

> “由于我想使用文件中的原始位模式，我怎样才能将我的有符号字符转换/转换为无符号字符，以便位模式保持不变？”

`int`正如有人在之前对同一主题的问题的回答中已经解释的那样，任何小整数类型，无论是有符号的还是无符号的，只要在表达式中使用，都会被提升为该类型。

C11 6.3.1.1

> “如果 int 可以表示原始类型的所有值（受宽度限制，对于位域），则该值将转换为 int；否则，将其转换为无符号 int。这些称为整数提升。”

此外，正如在同一个答案中所解释的，整数文字始终是 type `int`。

因此，您的表达式将归结为伪代码`(int) & (int) & (int)`。这些操作将在三个临时 int 变量上执行，结果将是 int 类型。

现在，如果原始数据包含可能被解释为特定符号表示的符号位的位（实际上这将是所有系统的二进制补码），您将遇到问题。因为这些位将在从signed char 提升到int 时保留。

然后按位 & 运算符对每个位执行 AND，无论其整数操作数 (C11 6.5.10/3) 的内容如何，​​无论是否有符号。如果您在原始签名字符的签名位中有数据，那么它现在将丢失。因为整数文字（0xC0 或 0x80）将没有设置对应于符号位的位。

解决方案是防止符号位被传输到“临时 int”。一种解决方案是将 c[i] 强制转换为 unsigned char，这是完全明确的 (C11 6.3.1.3)。这将告诉编译器“这个变量的全部内容是一个整数，没有需要关注的符号位”。

更好的是，养成在各种形式的位操作中始终使用无符号数据的习惯。重写表达式的纯粹、100% 安全、符合 MISRA-C 的方法是：

```
if ( ((uint8_t)c[i] & 0xc0u) & 0x80u) > 0u) 
```

u 后缀实际上强制表达式为 unsigned int，但最好始终强制转换为*预期类型*。它告诉代码的读者“我实际上知道我在做什么，而且我也理解 C 中所有奇怪的隐式提升规则”。

然后，如果我们知道我们的十六进制，`(0xc0 & 0x80)`那是没有意义的，它总是正确的。并且`x & 0xC0 & 0x80`始终与 相同`x & 0x80`。因此将表达式简化为：

```
if ( ((uint8_t)c[i] & 0x80u) > 0u) 
```

* * *

> “在任何地方都有这些“实现定义的方面”的列表吗？

是的，C 标准在附录 J.3 中方便地列出了它们。但是，在这种情况下，您遇到的唯一实现定义的方面是整数的符号实现。在实践中，这始终是二进制补码。

编辑：问题中引用的文本与各种按位运算符将产生实现定义的结果有关。即使在没有确切参考的附录中，这也只是简单地提到了实现定义。实际的第 6.5 章对 & | 的 impl.defined 行为没有多说。等等。唯一明确提到它的运算符是 << 和 >>，其中左移负数甚至是未定义的行为，但右移是实现定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T12:23:27.440

你似乎有类似的东西：

```
signed char c[] = "\x7F\x80\xBF\xC0\xC1\xFF";

for (int i = 0; c[i] != '\0'; i++)
{
    if (!((c[i] & 0xC0) & 0x80))
        ...
} 
```

您（正确地）关心`signed char`类型的符号扩展。然而，在实践中，`(c[i] & 0xC0)`会将带符号的字符转换为 (signed) `int`，但`& 0xC0`会丢弃更高有效字节中的任何设置位；表达式的结果将在 0x00 .. 0xFF 范围内。我相信，无论您使用符号和幅度、一个补码还是二进制补码二进制值，这都将适用。您获得的特定有符号字符值的详细位模式因底层表示而异；但总体结论是结果将在 0x00 .. 0xFF 范围内是有效的。

有一个简单的解决方案来解决这个问题——在使用它之前将它的值`c[i]`转换为`unsigned char`：

```
if (!(((unsigned char)c[i] & 0xC0) & 0x80)) 
```

在将值提升为 an 之前将值`c[i]`转换为an （或者，编译器可能会提升为，然后强制转换为，然后提升回为），并且在操作中使用无符号值。`unsigned char``int``int``unsigned char``unsigned char``int``&`

当然，现在的代码只是多余的。使用`& 0xC0`follow by`& 0x80`完全等同于 just `& 0x80`。

如果您正在处理 UTF-8 数据并查找连续字节，则正确的测试是：

```
if (((unsigned char)c[i] & 0xC0) == 0x80) 
```

# jsf-2 - 多个 cc:renderFacet 中 Primefaces 中的 widgetVar 名称冲突

> ID：14233719
> 
> 赞同：0
> 
> 时间：2013-01-09T10:57:24.060
> 
> 标签：jsf-2, primefaces

我有复合组件，其中有**工具栏**和**数据表**。我还定义了**facet**，其中包含一个用于从数据表中操作数据的表单。用户为不同类型的数据定义该方面。现在，我遇到了问题，因为我**多次渲染该构面**，现在我**对 Primefaces components 的 widgetVar 名称有冲突**。无法使用**insertChildren**多次，所以我认为这是唯一可能的解决方案。此外，我不想强​​迫组件的用户定义 10 个方面并编写 ui:include 10 次。有没有其他方法可以在复合组件中插入一些 facelet 代码，或者有没有办法将参数传递给 facet，并使用该参数动态创建 widgetVar？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:17:36.173

好的，一段时间后，我只是没有成功地做我想做的事。首先，我有一些这样的复合组件：

```
<cc:interface>
  <!-- Attributes definition -->
  <cc:facet name="form"/>
</cc:interface>

<cc:implementation>
  <p:dialog><f:subview id="detailSubview1"><cc:renderFacet name="form"/></f:subview></p:dialog>
  <p:dialog><f:subview id="detailSubview2"><cc:renderFacet name="form"/></f:subview></p:dialog>
  <!-- There is some more renderFacets but this is enough -->
</cc:implementation> 
```

例如，如果我`p:selectOneMenu`在表单中没有任何`widgetVar`定义，则所有名称都将具有相同的名称`widgetVar`，这是一个问题。

所以，我完全改变了这一点，我将把这个复合组件转换为`ui:composition`并在我的页面中装饰它。在这种情况下，小部件变量会根据我的需要生成，具有不同的名称，因为它们位于不同的命名容器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:21:13.703

A`widgetVar`实际上在 JavaScript 中用于标识组件。因此 a`widgetVar`在页面中必须是唯一的。你必须自己声明。

如果你想创建一个自定义组件，我认为可能比`ui:define`/更适合你`ui:include`，你可能想做这样的事情：

假设我们想要创建一个渲染 a`p:commandButton`和 a`h:outputText`具有相同值的组件（无论出于何种原因）。在目录中创建一个 XHTML 页面`[deployed-root]/resources/example`，命名为`customComponent.xhtm`：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsf/composite">
    <c:interface>
        <c:attribute name="text" required="true" />
    </c:interface>
    <c:implementation>
        <h:outputText value="#{cc.attrs.text}" />
        <p:commandButton value="#{cc.attrs.text}" />
    </c:implementation>
</html> 
```

然后要在另一个页面中使用它，您必须定义 namespace `xmlns:e="http://java.sun.com/jsf/composite/example"`，然后您可以像这样引用自定义组件`<e:customComponent text="some text here"/>`：

还应该注意的是，在自定义组件中声明表单是不好的做法。这会极大地影响使用的灵活性，因为表单不能嵌套。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T06:56:41.157

PrimeFaces 可以生成`wigetVar`s，因此您不必这样做。

从 3.4 用户指南：

```
<p:dialog id="dlg">
    <!-- contents -->
</p:dialog>
<p:commandButton type="button" value="Show" onclick="#{p:widgetVar('dlg')}.show();"/> 
```

这是为命名容器而设计的，所以它应该在复合组件中工作得很好`<ui:repeat/>`，`<h:dataTable/>`, 等。

# php - 使用动态键将值分配给关联数组

> ID：14233722
> 
> 赞同：0
> 
> 时间：2013-01-09T10:57:42.593
> 
> 标签：php

我有`$options`一个关联数组，每个值都是混合的（可以是字符串，也可以是其他数组）。我不会在那里有任何物品。
`$keys`是一个数字数组，键的数量是在运行时确定的。

我想要一个类似于这个表达式的结果
`$options[$keys[0]][$keys[1]].......[$keys[count($keys)-1]] = $value;`

例如，如果`$keys = array('key1')`，我想做
`$options['key1'] = $value;`
& 如果`$keys = array('key1', 'key2')`，我想做
`$options['key1']['key2'] = $value;` & 等等

array_replace_recursive 的问题在于 $value 本身可能是一个数组。以某种方式限制 array_replace_recursive 可以去的深度？或者其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:27:46.643

我做了类似的事情：

```
$options = array('key1' => array('key2' => array('key3' => 'value')));
$keys = array('key1', 'key2', 'key3');

$search = &$options;
foreach ($keys as $key) {
    $search = &$search[$key];
}
$search = 'changed value';

var_dump($options); 
```

您始终可以创建对下一个键的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:00:30.570

我认为这是不可能的，因为数组是一种数据结构，您不能在其中放入代码或循环。让我谷歌，一旦我得到一些解决方案，我会更新你:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:16:32.540

我终于让它工作了。感谢@Benjamin Paap。他的回答有助于找到确切的解决方案

```
$options = array('key1' => array('key2' => array('key3' => 'value')));
$keys = array('key1', 'key2', 'key3');

$length = count($keys);
$search = &$options;
foreach ($keys as $key => $value) {
    // key doesn't exist or value is not an array
    if(!isset($search[$value]) || !is_array($search)) {
        $search = (array) $search;
        $search[$value] = array();
    }

    $search = &$search[$value];

    // last iteration
    if($length - 1 === $key) {
        $search = 'new value';
    }
}
unset($search);
var_dump($options); 
```

# c++ - c ++浮点数组作为默认参数

> ID：14233733
> 
> 赞同：0
> 
> 时间：2013-01-09T10:58:23.337
> 
> 标签：c++, arrays, pointers, default-parameters

我对 c++ 很陌生，但我无法使它正常工作。抱歉，但我一直使用的语言不能帮助我从内存指针的角度思考，所以也许这是一个愚蠢的问题。

我想将浮点数组作为默认参数传递。像这样：

```
void getHistogram(const Mat& src, MatND& hist, float range[]=NULL) {

    if(range==NULL) {
        double maxPixel=0;
        minMaxLoc(src, 0, &maxPixel, 0, 0);
        range = { 0, maxPixel +1 };
    }

    // now calculate histogram with the right range
    // something something
} 
```

我尝试过一些不同的语法，但我总是在一些错误的前面，比如

```
histogram.cpp:21: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x
histogram.cpp:21: error: cannot convert ‘&lt;brace-enclosed initializer list>’ to ‘float*’ in assignment 
```

## 编辑（但有内存泄漏）：

好的，这就是我以这种方式解决的[这个答案：](https://stackoverflow.com/a/14233835/433685)

```
void imHist(const Mat& src, MatND& hist, float range[]=NULL) {

    if(range==NULL) {
        double maxPixel=0;
        minMaxLoc(src, 0, &maxPixel, 0, 0);

        range = new float[2];
        range[0] = 0;
        range[1] = maxPixel +1;
    }

} 
```

一些优点或缺点？

## 编辑 2

查看接受的答案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T11:05:59.853

替换您当前的代码……

```
void getHistogram(const Mat& src, MatND& hist, float range[]=NULL) {

    if(range==NULL) {
        double maxPixel=0;
        minMaxLoc(src, 0, &maxPixel, 0, 0);
        range = { 0, maxPixel +1 };
    }

    // now calculate histogram with the right range
    // something something
} 
```

有了这个：

```
void getHistogram(const Mat& src, MatND& hist, float range[] ) {
    assert( range != 0 );
    // now calculate histogram with the right range
    // something something
}

void getHistogram(const Mat& src, MatND& hist ) {
    double maxPixel=0;
    minMaxLoc(src, 0, &maxPixel, 0, 0);
    float range[] = { 0, maxPixel +1 };
    getHistogram( src, hist, range );
} 
```

也就是说，你为什么使用`float`而不是`double`？

* * *

**编辑**：OP解释说`float`OpenCV需要数组。

他在回答中进一步解释说，他已通过以下方式解决了该问题：

```
void imHist(const Mat& src, MatND& hist, float range[]=NULL) {

    if(range==NULL) {
        double maxPixel=0;
        minMaxLoc(src, 0, &maxPixel, 0, 0);

        range = new float[2];
        range[0] = 0;
        range[1] = maxPixel +1;
    }
} 
```

这会泄漏内存，*并且*不必要地低效。

**编辑2**：上述代码泄漏内存的原因是因为有一个`new`（分配内存），但没有相应`delete`的表达式（释放内存），并且没有指示内存是由调用者分配*还是*`new`由调用者提供.

它效率低下的原因是动态内存分配通常比基本分配或堆栈分配慢几个数量级，因为它必须搜索合适的小块空闲内存。

堆栈分配（C++“自动内存”）通过总是以相反的分配顺序来避免这种低效率，因此它总是可以使用空闲堆栈内存区域的开始进行下一次分配（模方向：实际上堆栈向下增长在我所知道的所有机器上的内存中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:05:16.453

当你传递一个数组时，你传递一个指向第一个元素的指针，而不是整个数组。为了给你一个回应，你可以在调用函数时编辑你的帖子并添加代码吗？

# asp.net - asp.net + 测试时区

> ID：14233736
> 
> 赞同：0
> 
> 时间：2013-01-09T10:58:30.787
> 
> 标签：asp.net, timezone

我正在尝试将我的日期值以 UTC 格式存储到我的 SQL Server 数据库中，然后将它们转换为本地时间进行显示，似乎工作正常，我可以看到我存储的数据库日期值不同（我认为它已经转换为 UTC） ，检索它并显示也是准确的，直到我尝试通过在日期和时间选项（任务栏中 Windows 时间设置的右下角）中更改它来测试不同的时区，以便“迁移”自己。显然，尽管我更改为的时区有 3 小时的差异，但日期仍然与我在自己的国家一样。

可以以某种方式就在不同时区测试日期显示的方法提供建议吗？

谢谢。

将日期值存储到 SQL Server：

```
DateTime dateFrom = DateTime.Parse(startDateTime).ToUniversalTime();
DateTime dateTo = DateTime.Parse(endDateTime).ToUniversalTime();
parameters.Add(new SqlParameter("@StartDateTime", dateFrom));
parameters.Add(new SqlParameter("@EndDateTime", dateTo)); 
```

从数据库和显示中检索：

```
DateTime date = DateTime.UtcNow.ToLocalTime();
date = DateTime.Parse(dr["StartDateTime"].ToString()).ToLocalTime();
                      litDateTimeFrom.Text = date.ToString("dd MMM yy hh:mm tt");
date = DateTime.Parse(dr["EndDateTime"].ToString()).ToLocalTime();
                      litDateTimeTo.Text = date.ToString("dd MMM yy hh:mm tt"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:15:59.930

首先，我假设您已经更改了服务器机器上的时区信息（因为这将在`ToLocalTime`方法中使用）。如果没有，那么这就是您首先需要做的测试。

其次，您是否尝试在更改系统时区后重新启动 IIS（或您的 Web 应用程序）？这是必要的，因为时区信息可能已缓存在 .NET 框架中（在`TimeZoneInfo`类中）。

说了这么多，对我来说，这没有意义。通常，时区信息需要从用户（客户端）机器流出，因为您想显示用户本地时间（与他的时区相关）。因此，这意味着您需要根据 a) 来自浏览器的文化信息或 b) 存储在他的个人资料数据中的内容（可能是国家或实际时区）c) 类似的方案来确定当前用户的时区。一旦知道用户时区，您可以使用 `TimeZoneInfo`类将 UTC 时间转换为相应的本地时间。

# ios - 在 uiview、uitextfield 中显示控制台

> ID：14233738
> 
> 赞同：0
> 
> 时间：2013-01-09T10:58:34.443
> 
> 标签：ios, objective-c, xcode, uiview

是否可以将我的控制台输出（在 xcode 中）显示到 iphone ？例如：如果在我的代码中我写了 NSLog(@"hello\n"); 我将能够在设备中看到它，就像在控制台中看到它一样。（当然下一次 nslog 不应该删除前一个）某种重定向控制台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:18:03.583

创建一个将继续附加日志的文件。

在文本字段或文本视图中显示此文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:11:36.917

使用这个宏

```
 #define  YourLog(PR)               {NSLog(@"%@",PR); yourTextFld.text=[NSString stringWithFormat:@"%@%@",yourTextFld.text,PR] ; } 
```

请记住，如果这个宏剂量工作使用这个想法并匆忙写了一些调整，你必须更改你的 txt 字段名称

# json - 使用 Titanium 中的合金制作模型检索外部 JSON 提要

> ID：14233742
> 
> 赞同：1
> 
> 时间：2013-01-09T10:58:50.657
> 
> 标签：json, collections, model, external, appcelerator-mobile

我在网上搜索了有关使用钛合金框架从外部 JSON 提要获取数据的示例和教程。

我需要做的只是从 JSON 提要中收集字符串和图像并将它们显示在 TableView 中。

如果我正确理解 Alloy 和 Backbone 的结构，我需要做的是设置一个从 JSON 提要中检索数据的模型，例如：[http ://www.domain.com/api.php?function=getproducts](http://www.domain.com/api.php?function=getproducts)

以及一个用于填充应用程序 TableView 的集合。

我对 Backbone 不是很感兴趣，我已经阅读了介绍并查看了文档，但我真的没有足够的知识来自己制作这个解决方案。希望有一些关于合金导向示例的方向，以及我需要的类似解决方案，或者一个可以帮助我解决这个问题的好人。

提前致谢

# javascript - 在我的工作场所使用 WebDriver 无法打开 Firefox 在 PATH 中找不到 Firefox 二进制文件

> ID：14233744
> 
> 赞同：0
> 
> 时间：2013-01-09T10:58:55.717
> 
> 标签：javascript, firefox, selenium, webdriver

您好我正在尝试打开 Firefox 来运行 Webdriver java 脚本。

```
public static WebDriver dr =null;
public static EventFiringWebDriver driver=null;

dr = new FirefoxDriver();

driver = new EventFiringWebDriver(dr);
driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS); 
```

如果我运行此代码，我会收到类似 **Can not Fine firefox binary PATH 之类的错误**

目前我已经编写了这样的代码来打开 Firefox。它在我自己的笔记本电脑上运行良好。如果我尝试在公司笔记本电脑上运行此代码。

它不起作用，因为我的技术支持团队已安装了 fire fox。

如果我右键单击 Firefox 图标属性->

目标是这样显示的

```
C:\Windows\System32\CCM\VAppLauncher.exe /launch "Firefox 15.0.1 15.0.1.4631" 
```

那么如何从我的 java 脚本中打开 Firefox。

你能帮我么

如果您需要更多信息，请告诉我。

**错误：** org.openqa.selenium.WebDriverException：在 PATH 中找不到 firefox 二进制文件。确保已安装 Firefox。操作系统似乎是：VISTA 构建信息：版本：'2.25.0'，修订：'17482'，时间：'2012-07-18 21:09:54' 系统信息：os.name：'Windows 7'，操作系统.arch: 'x86', os.version: '6.1', java.version: '1.6.0_20' 驱动信息: driver.version: FirefoxDriver

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:25:12.560

好吧，有办法初始化 FirefoxDriver：

```
driver = new FirefoxDriver(FirefoxBinary binary, FirefoxProfile profile); 
```

更具体地说，您可以这样做：

```
File ffpath = new File("path/to/firefox.exe");
FirefoxBinary ffbinary = new FirefoxBinary(ffpath);
FirefoxProfile ffprofile = new FirefoxProfile();
driver = new FirefoxDriver(ffbinary,ffprofile); 
```

神奇的是由文件 ffpath 发生的，它必须正确显示到 firefox.exe 二进制文件。询问您的技术支持二进制文件在您计算机上的存储位置。我现在对您的设置有不好的感觉：您的工作 PC 似乎没有在本地安装 Firefox...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:17:08.993

当你得到 FF 路径时，你可以指定一个`FirexoxBinary(new File("/path/to/FF"))`传递给`FirefoxDriver(FirefoxBinary binary, FirefoxProfile profile)`

查看[文档](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/firefox/FirefoxDriver.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T05:46:02.417

您也可以通过将 firefox.exe 的路径设置为 PATH 变量来执行此操作

如果 firefox 目录是`C:\Users\Tester\Applicaion\Firefox`,

将此附加到`ENVIRONMENT`变量`PATH`

并重新运行测试

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-05-06T15:30:12.750

1.  尝试按照以下步骤在外部浏览器列表中设置 Firefox。
    `Eclipse > Window > General > Web Browser`

2.  在右侧，您可以看到带有内部和外部浏览器选项的 Web 浏览器。选择`Use External web browser`并单击`New`。

3.  请提供名称`Firefox`并添加与您的本地计算机中保存的 Firefox 浏览器完全相同的位置（例如：C:\Program Files (x86)\Mozilla Firefox\firefox.exe）。

4.  点击`OK`。Firefox 选项应显示在外部网络浏览器列表下。

5.  通过选中复选框并应用更改来选择 Firefox 浏览器选项。

希望这将适用于Firefox浏览器

# html - 用于 Web 应用程序的 iPhone 闪屏

> ID：14233745
> 
> 赞同：0
> 
> 时间：2013-01-09T10:58:59.780
> 
> 标签：html, jquery-mobile, iphone, iphone-web-app

我知道iphone（网络应用程序）不支持网络应用程序中启动画面的横向模式。但是我必须强制启动画面进入横向模式，因为当应用程序打开时横向模式启动画面显示不好。我该怎么做？

# linux - 如何从受密码保护的 PDF 文件中删除打印保护？

> ID：14233756
> 
> 赞同：7
> 
> 时间：2013-01-09T10:59:31.847
> 
> 标签：linux, pdf, password-protection

如何从受密码保护的 PDF 文件中删除打印保护？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-09T10:59:31.847

当 PDF 文档可见但不可打印时，使用 GNU/Linux 时有一个简单的解决方法。

为此，您必须使用两步程序：

1.  将pdf打印到postscript
2.  恢复正常的pdf文件

    ```
    $ pdftops [your_protected_pdf_document.pdf] out.ps

    $ pstopdf [out.ps] broken_protection_pdf_document.pdf 
    ```

它已经完成了。您的 pdf 文档不再有密码保护。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-19T12:21:04.043

请参阅 pdftk 和 qpdf 中的答案[以重置 PDF 评论安全性](https://stackoverflow.com/questions/10772686/pdftk-and-qpdf-to-reset-pdf-commenting-security)：

复制自另一个答案（由 Kurt Pfeifle 撰写）

```
The command qpdf --decrypt input.pdf output.pdf removes 
the 'owner' password. But it does only work, if there is 
no 'user' password set.

Once the owner password is removed, the output.pdf should 
already have unset all security protection and have allowed 
commenting. Needless to run your extra pdftk ... command then... 
BTW, your allow parameter in your pdftk call will not work the 
way you quoted your command. The allow permissions will only be
applied if you also...

    ...either specify an encryption strength
    ...or give a user or an owner password

Try the following to find out the detailed security settings of the file(s):

qpdf --show-encryption input.pdf
qpdf --show-encryption output.pdf 
```

例子：

```
qpdf --decrypt crypted.pdf --password=myP@sswor!D uncrypted.pdf 
```

# ios - iOS 添加顶栏作为子视图

> ID：14233760
> 
> 赞同：0
> 
> 时间：2013-01-09T10:59:37.600
> 
> 标签：ios, button, view, imageview, subview

我目前正在开发一个适用于 iPhone 的应用程序，其中我有一个 Imageview 展示一些图像，并且通过滑动我可以更改图像。

但我目前正在尝试添加一个将成为顶栏的子视图，当触摸图像时，它会使这个顶栏从顶部向下滑动。

我尝试使用的当前代码是：

```
CGRect frame = CGRectMake(0.0f, 0.0f, self.view.frame.size.width, 60.0f);
UIView *topBar = [[UIView alloc] initWithFrame:frame];
[self.view addSubview:topBar];
[self.view bringSubviewToFront:topBar]; 
```

但是顶栏不会出现，我有日志显示触摸被识别。

我该如何做到这一点，以及如何使用按钮正确填充子视图？

最好的祝福。

自由宁静

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:08:15.160

你的 topBar 里面什么都没有，你怎么知道它已经被添加了呢？

```
CGRect frame = CGRectMake(0.0f, 0.0f, self.view.frame.size.width, 60.0f);
UIView *topBar = [[UIView alloc] initWithFrame:frame];
topBar.backgroundColor = [UIColor redColor];
[self.view addSubview:topBar]; 
```

此外，您不需要使用 BringSubViewToFront，因为添加为子视图的视图始终是视图层次结构中的 topMost！

# asp.net - ASP.NET ajaxcontroltoolkit 自动完成 ul 覆盖问题

> ID：14233762
> 
> 赞同：0
> 
> 时间：2013-01-09T10:59:48.603
> 
> 标签：asp.net, autocomplete, html-lists, overlay, ajaxcontroltoolkit

我的 ASP.NET 应用程序中有以下代码片段（简化）：

```
<asp:Panel ID="Panel7" runat="server">

<asp:TextBox ID="RecTextBox" runat="server" autocomplete="off" Height="18px" Width="800px"/>

    <ajaxToolkit:AutoCompleteExtender ID="AutoCompleteExtender1" runat="server" 
                                            CompletionListCssClass="autocomplete_completionListElements" 
                                            CompletionListHighlightedItemCssClass="autocomplete_highlightedListItem" 
                                            CompletionListItemCssClass="autocomplete_listItem" 
                                            CompletionSetCount="20" 
                                            DelimiterCharacters=";, :" 
                                            Enabled="True"
                                            MinimumPrefixLength="2" 
                                            ServiceMethod="GetCompletionList" 
                                            ServicePath="Rec.asmx" 
                                            ShowOnlyCurrentWordInCompletionListItem="True" 
                                            TargetControlID="RecTextBox" />                                

            <br />                             
        <asp:Button ID="Button3" runat="server"  Text="Add" OnClick="Button3_Click"  /> 
        <asp:Button ID="Button11" runat="server" Text="Remove" OnClick="Button11_Click" /> 

        <br />
        <asp:Panel ID="Panel8" runat="server" Height="150">
            <asp:ListBox ID="ListBox1" runat="server" Width="800" Height="150"></asp:ListBox>
        </asp:Panel>
    </asp:Panel> 
```

除了 CSS 类：

```
.autocomplete_completionListElements
{ 
    overflow : auto;
    height : 130px;
    list-style-type : none;
}

/* AutoComplete highlighted item */
.autocomplete_highlightedListItem
{
    background-color: #ffff99;
    color: black;
    padding: 1px;
}

/*  AutoComplete item */
.autocomplete_listItem 
{
    background-color : window;
    color : windowtext;
    padding : 1px;
    left :0px
} 
```

问题是自动完成插件呈现一个无序列表。如果自动完成列表可见或不可见，它包含在文档中：

```
<ul id="ContentPlaceHolder2_TabContainer1_TabPanel2_AutoCompleteExtender1_completionListElem" class="autocomplete_completionListElements" style="position: absolute;"></ul> 
```

当自动完成列表可见时，没有问题，因为用户能够选择所需的自动完成元素。反过来，自动完成列表被隐藏，无序列表不可见，但覆盖了多选 HTML 控件（因为 ul 具有*高度 : 130px;*），并且在多选内选择元素时存在问题：

问题出现在 FF 和 Opera 中，但不在 IE 和 Chrome 中。

请帮忙，

最好的问候， WP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:52:08.117

我找到了一种基于 Javascript 的可能解决方案：

1) 修改`autocomplete_completionListElements`CSS 类 - 删除`height : 130px`；财产。

```
.autocomplete_completionListElementy
{ 
    overflow : auto;
    list-style-type : none;
} 
```

2) 将 Javascript 处理程序分配给以下`AutoCompleteExtender`属性：`OnClientShown, OnClientHidden`

```
<ajaxToolkit:AutoCompleteExtender ID="AutoCompleteExtender1" runat="server" 
                                                      CompletionListCssClass="autocomplete_completionListElements" 
                                                        CompletionListHighlightedItemCssClass="autocomplete_highlightedListItem" 
                                                        CompletionListItemCssClass="autocomplete_listItem" 
                                                        CompletionSetCount="20" 
                                                        DelimiterCharacters=";, :" 
                                                        Enabled="True"
                                                        MinimumPrefixLength="2" 
                                                        ServiceMethod="GetCompletionList" 
                                                        ServicePath="Rec.asmx" 
                                                        ShowOnlyCurrentWordInCompletionListItem="True" 
                                                        TargetControlID="RecTextBox" 
                                                        OnClientShown="autocompleteClientShown"
                                                        OnClientHidden="autocompleteClientHidden" /> 
```

3）Javascript处理程序代码：

```
function autocompleteClientShown(source, args) {

    source._popupBehavior._element.style.height = "130px";
}

function autocompleteClientHidden(source, args) {

    source._popupBehavior._element.style.height = "0px";

} 
```

# python - 将 unicode 保存到数据库

> ID：14233764
> 
> 赞同：0
> 
> 时间：2013-01-09T11:00:06.527
> 
> 标签：python, mysql, django, unicode

我正在尝试使用 django 将以下字符串保存到 mysql 数据库（我从其他地方得到了字符串）

```
m.cr1 = u"\U0001F3C9" # cr1 is models.CharField(max_length=50)
m.save() 
```

我得到错误

```
Warning: Incorrect string value: '\xF0\x9F\x8F\x89' for column 'cr1' at row 1 
```

我在这里查看了其他相关问题，并将 mysql 更改为 utf8_unicode_ci，但这无济于事。一般来说，我的代码适用于 unicode，但不适用于这种特定情况。

我想这与这是 32 位 unicode 的事实有关。

我实际上只是想检测这种情况，并且可能忽略坏字符。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:57:56.283

MySQL`utf8`不是真正的 UTF-8，而是一种修改后的，仅支持最高`0xFFFF`. 您正在尝试使用未包含在 MySQL 中的代码点 ( `0x1F3C9`> ) 。`0xFFFF``utf8`

您需要有相对较新版本的 MySQL，并更改`utf8`为`utf8mb4`. 到处。

连接需要是`utf8mb4`、排序规则、表/列等。你`utf8`在 MySQL 上下文中的任何地方都是错误的，需要`utf8mb4`.

# r - 寻找R的rank函数的来源

> ID：14233768
> 
> 赞同：3
> 
> 时间：2013-01-09T11:00:30.293
> 
> 标签：r

> **可能重复：**
> [如何查看 R .Internal 或 .Primitive 函数的源代码？](https://stackoverflow.com/questions/14035506/how-to-see-the-source-code-of-r-internal-or-primitive-function)

我正在寻找用于计算 R`rank`函数的 C 源代码

我查看了[`R/src/main/`](http://fossies.org/dox/R-2.15.2/cov_8c_source.html)目录，但找不到。当我使用 R 的内部 rank 函数时，有谁知道我在哪里可以找到 R 调用的源代码？例如，当一个人做的时候叫什么`.Internal(rank(x,"average"))`。

或者，我想确保获得与浮点向量相对应的秩向量的有效方法是首先对它们进行排序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T11:06:22.137

它在`/src/main/sort.c`文件中大约 90% 的位置：

```
/* FUNCTION: rank(x, length, ties.method) */
SEXP attribute_hidden do_rank(SEXP call, SEXP op, SEXP args, SEXP rho)
{ 
```

`find`将来，您可以使用类似或`grep`随您的操作系统提供的工具搜索源以找到这些东西（或可能查找的位置）。

另请参阅 Uwe Ligge 在 R News 中关于如何在 R 的资源中搜索内容的文章：Uwe Ligges。R 帮助台：[访问源代码](http://cran.r-project.org/doc/Rnews/Rnews_2006-4.pdf)。R 新闻，6(4):43-45，2006 年 10 月

# xslt - 使用属性的 XSL 分组

> ID：14233776
> 
> 赞同：0
> 
> 时间：2013-01-09T11:00:58.937
> 
> 标签：xslt, xslt-1.0

我有一些看起来像这样的 XML：

```
<Options>
  <Option OptionGroup="Safety">Driver Airbag</Option>
  <Option OptionGroup="Comfort and Convenience">Front Electric Windows</Option>
  <Option OptionGroup="Comfort and Convenience">Height Adjustable Drivers Seat</Option>
  <Option OptionGroup="Comfort and Convenience">Pollen Filter</Option>
  <Option OptionGroup="Comfort and Convenience">Privacy Glass</Option>
  <Option OptionGroup="Comfort and Convenience">Remote Boot Release</Option>
  <Option OptionGroup="Comfort and Convenience">Split Rear Seats</Option>
  <Option>Something else</Option>
  <Option>Yet another thing</Option>
  <Option OptionGroup="Paint or Trim and Upholstery">Metallic Paint</Option>
  <Option OptionGroup="Exterior Equipment">Power Assisted Steering (PAS)</Option>
  <Option OptionGroup="Interior Equipment">Leather Steering Wheel</Option>
  <Option OptionGroup="In Car Entertainment">CD Radio</Option>
  <Option OptionGroup="Security">Central Locking</Option>
</Options> 
```

我想使用 XSL 1.0 将输出组合在一起，基于他们的 OptionGroup 属性，最后列出没有属性的任何选项。就像是：

```
<table>
<tr><th>Safety</th></tr>
  <tr><td>Drivers Airbag</td></tr>
<tr><th>Comfort and Convenience</th></tr>
  <tr><td>Front Electric Windows, Height Adjustable Drivers Seat, Pollen Filter, Privacy Glass, Remote Boot Release, Split Rear Seats</td></tr>
<tr><th>Paint or Trim and Upholstery</th></tr>
  <tr><td>Metallic Paint</td></tr>
<tr><th>Exterior Equipment</th></tr>
  <tr><td>Power Assisted Steering (PAS)</td></tr>
<tr><th>Interior Equipment</th></tr>
  <tr><td>CD Radio</td></tr>
<tr><th>Security</th></tr>
  <tr><td>Central Locking</td></tr>
<tr><th>Other</th></tr>
  <tr><td>Something else, Yet another thing</td></tr>
</table> 
```

我猜这一切皆有可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:44:40.220

这是一个[分组示例](http://www.jenitennison.com/xslt/grouping/muenchian.xml)：

```
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:param name="default" select="'Other'"/>

<xsl:output method="html" indent="yes"/>

<xsl:key name="ogroup" match="Option" use="string(@OptionGroup)"/>

<xsl:template match="Options">
  <table>
    <xsl:apply-templates select="Option[@OptionGroup][generate-id() = generate-id(key('ogroup', string(@OptionGroup))[1])]" mode="term"/>
    <xsl:apply-templates select="key('ogroup', '')[1]" mode="term"/>
  </table>
</xsl:template>

<xsl:template match="Option" mode="term">
  <tr>
    <th>
      <xsl:choose>
        <xsl:when test="@OptionGroup">
          <xsl:value-of select="@OptionGroup"/>
        </xsl:when>
        <xsl:otherwise><xsl:value-of select="$default"/></xsl:otherwise>
      </xsl:choose>
     </th>
     <td>
      <xsl:apply-templates select="key('ogroup', string(@OptionGroup))"/>
     </td>
   </tr>
</xsl:template>

<xsl:template match="Option">
  <xsl:if test="position() &gt; 1">, </xsl:if>
  <xsl:value-of select="."/>
</xsl:template>

</xsl:stylesheet> 
```

它转变

```
<Options>
  <Option OptionGroup="Safety">Driver Airbag</Option>
  <Option OptionGroup="Comfort and Convenience">Front Electric Windows</Option>
  <Option OptionGroup="Comfort and Convenience">Height Adjustable Drivers Seat</Option>
  <Option OptionGroup="Comfort and Convenience">Pollen Filter</Option>
  <Option OptionGroup="Comfort and Convenience">Privacy Glass</Option>
  <Option OptionGroup="Comfort and Convenience">Remote Boot Release</Option>
  <Option OptionGroup="Comfort and Convenience">Split Rear Seats</Option>
  <Option>Something else</Option>
  <Option>Yet another thing</Option>
  <Option OptionGroup="Paint or Trim and Upholstery">Metallic Paint</Option>
  <Option OptionGroup="Exterior Equipment">Power Assisted Steering (PAS)</Option>
  <Option OptionGroup="Interior Equipment">Leather Steering Wheel</Option>
  <Option OptionGroup="In Car Entertainment">CD Radio</Option>
  <Option OptionGroup="Security">Central Locking</Option>
</Options> 
```

进入

```
<table>
   <tr>
      <th>Safety</th>
      <td>Driver Airbag</td>
   </tr>
   <tr>
      <th>Comfort and Convenience</th>
      <td>Front Electric Windows, Height Adjustable Drivers Seat, Pollen Filter, Privacy Glass, Remote Boot Release, Split Rear Seats</td>
   </tr>
   <tr>
      <th>Paint or Trim and Upholstery</th>
      <td>Metallic Paint</td>
   </tr>
   <tr>
      <th>Exterior Equipment</th>
      <td>Power Assisted Steering (PAS)</td>
   </tr>
   <tr>
      <th>Interior Equipment</th>
      <td>Leather Steering Wheel</td>
   </tr>
   <tr>
      <th>In Car Entertainment</th>
      <td>CD Radio</td>
   </tr>
   <tr>
      <th>Security</th>
      <td>Central Locking</td>
   </tr>
   <tr>
      <th>Other</th>
      <td>Something else, Yet another thing</td>
   </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:59:39.263

这应该有效：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/">
    <table>
      <xsl:for-each select="Options/Option/@OptionGroup[not(. = preceding::Option/@OptionGroup)]">
        <xsl:call-template name="OutputGroup">
          <xsl:with-param name="title" select="." />
          <xsl:with-param name="items" select="../../Option[@OptionGroup = current()]" />
        </xsl:call-template>
      </xsl:for-each>

      <xsl:if test="Options/Option[not(@OptionGroup)]">
        <xsl:call-template name="OutputGroup">
          <xsl:with-param name="title" select="'Other'" />
          <xsl:with-param name="items" select="Options/Option[not(@OptionGroup)]" />
        </xsl:call-template>
      </xsl:if>
    </table>
  </xsl:template>
  <xsl:template name="OutputGroup">
    <xsl:param name="title" />
    <xsl:param name="items" />

    <tr>
      <th>
        <xsl:value-of select="$title"/>
      </th>
    </tr>
    <tr>
      <td>
        <xsl:apply-templates select="$items" />
      </td>
    </tr>

  </xsl:template>

  <xsl:template match="Option">
    <xsl:if test="position() > 1">
      <xsl:text>, </xsl:text>
    </xsl:if>
    <xsl:value-of select="."/>
  </xsl:template> 
```

# html - 如何在 html 中显示 html？

> ID：14233777
> 
> 赞同：2
> 
> 时间：2013-01-09T11:00:58.613
> 
> 标签：html, clojure, escaping

假设我有一个 html 文档：

```
<html>test<html> 
```

我想在浏览器中显示该代码。然后我会创建类似的东西：

```
<html><body>
<pre>&lt;html&gt;test&lt;html&gt;</pre>
</body></html> 
```

为了制作中间的gubbins，我有一个功能：

```
(defn html-escape [string] 
  (str "<pre>" (clojure.string/escape string {\< "&lt;", \> "&gt;"}) "</pre>")) 
```

它为我做了上述转换：

```
user> (html-escape "<html>test<html>")
"<pre>&lt;html&gt;test&lt;html&gt;</pre>" 
```

我的问题是：这是否足够好，还是我会遇到 html 会使转换中断？

第二个问题可能是：clojure 是否内置了这个？我找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:15:37.883

有几个选项：

1.  自己滚。
2.  使用公共 StringEscapeUtils
3.  如果您正在使用打嗝，它带有一个功能。

对于#3，只需使用[hiccup.core](https://github.com/weavejester/hiccup/blob/master/src/hiccup/core.clj)`h`中的函数。

对于＃2，添加`[org.apache.commons/commons-lang3 "3.1"]`到您的依赖项，然后您可以使用

```
(org.apache.commons.lang3.StringEscapeUtils/escapeHtml4 "your string") 
```

对于＃1，您可以使用打嗝使用的功能。它非常小：

```
(defn escape-html
  "Change special characters into HTML character entities."
  [text]
  (.. ^String (as-str text)
    (replace "&"  "&amp;")
    (replace "<"  "&lt;")
    (replace ">"  "&gt;")
    (replace "\"" "&quot;"))) 
```

这些解决方案中的任何一个都可以。

# java - 在嵌入式 PhoneGap 应用中保存和恢复 WebView

> ID：14233784
> 
> 赞同：6
> 
> 时间：2013-01-09T11:01:43.120
> 
> 标签：java, android, cordova, android-webview

我有一个 Android 应用程序，它使用嵌入式`PhoneGap WebView`. 我已经成功地实施`CordovaInterface`了我的活动，并且应用程序启动并按其应有的方式运行。

当我暂停应用程序（切换到其他应用程序或按选项卡 Home）时，我`WebView`使用该方法保存 's 状态，`saveState`当应用程序再次启动时应恢复该状态（此方法适用于没有 的应用程序`PhoneGap`）。

但是，当应用程序再次启动时，我尝试恢复状态（使用`restoreState`方法）而不先加载 url（因为我想使用最后一个状态）。这会导致错误，因为 PhoneGap 期望加载一个 url（至少这是我从异常中收集到的）。

**我的问题是：如何在嵌入式 PhoneGap WebView 中正确保存和恢复 WebView 的状态？**

**我的`onCreate`方法：**

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    webView = (CordovaWebView) findViewById(R.id.webView);

    if (savedInstanceState == null) {
        savedInstanceState = restoreFromPreferences();
    }
    if (savedInstanceState == null) {
        webView.loadUrl("file:///android_asset/www/index.html");
    } else {
        webView.restoreState(savedInstanceState);
        webView.loadUrlIntoView(savedInstanceState.getString("url"));
    }
} 
```

**我的`onPause`方法（类似的逻辑`onSaveInstanceState`）：**

```
@Override
protected void onPause() {
    super.onPause();

    Bundle out = new Bundle();
    webView.saveState(out);

    saveToPreferences(out);
} 
```

**关闭/暂停应用程序时出错（已解决 - 请参阅更新 1）：**

关闭应用程序时出现错误。这可能是相关的，但我不明白如何：

```
01-09 11:44:50.181: E/ActivityThread(2068): Activity my.package.MainActivity has leaked IntentReceiver org.apache.cordova.NetworkManager$1@a6bc4020 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-09 11:44:50.181: E/ActivityThread(2068): android.app.IntentReceiverLeaked: Activity my.package.MainActivity has leaked IntentReceiver org.apache.cordova.NetworkManager$1@a6bc4020 that was originally registered here. Are you missing a call to unregisterReceiver()?
... 
```

**再次启动应用程序时出错（已解决 - 请参阅更新 1）：**

这会导致错误，因为 WebView 尝试加载为空的 url：

```
01-09 11:38:22.813: E/AndroidRuntime(1979): FATAL EXCEPTION: main
01-09 11:38:22.813: E/AndroidRuntime(1979): java.lang.NullPointerException
01-09 11:38:22.813: E/AndroidRuntime(1979):     at java.lang.String.indexOf(String.java:994)
01-09 11:38:22.813: E/AndroidRuntime(1979):     at org.apache.cordova.CordovaWebView.loadUrlNow(CordovaWebView.java:499)
01-09 11:38:22.813: E/AndroidRuntime(1979):     at org.apache.cordova.CordovaWebView.loadUrl(CordovaWebView.java:384)
01-09 11:38:22.813: E/AndroidRuntime(1979):     at org.apache.cordova.CordovaWebViewClient.onPageFinished(CordovaWebViewClient.java:298)
01-09 11:38:22.813: E/AndroidRuntime(1979):     at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:327)
01-09 11:38:22.813: E/AndroidRuntime(1979):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 11:38:22.813: E/AndroidRuntime(1979):     at android.os.Looper.loop(Looper.java:137)
01-09 11:38:22.813: E/AndroidRuntime(1979):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-09 11:38:22.813: E/AndroidRuntime(1979):     at java.lang.reflect.Method.invokeNative(Native Method)
01-09 11:38:22.813: E/AndroidRuntime(1979):     at java.lang.reflect.Method.invoke(Method.java:511)
01-09 11:38:22.813: E/AndroidRuntime(1979):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-09 11:38:22.813: E/AndroidRuntime(1979):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-09 11:38:22.813: E/AndroidRuntime(1979):     at dalvik.system.NativeStart.main(Native Method) 
```

**更新 1：**

这两个错误都已解决，但被一个新错误所取代。

第一个错误是因为`webView.handleDestroy()`in`onDestroy()`没有被调用。

第二个错误是由于未设置的字段`baseUrl`。`CordovaWebView`目前我正在尝试通过将上次访问的 url 保存到发生时来解决这个`SharedPreferences`问题`onPause() / onSaveInstanceState()`：

```
 String url = webView.peekAtUrlStack();
        out.putString("url", url);
        webView.handlePause(true); 
```

在`onResume()`中，我将网址加载到`SharedPreferences`：

```
 if (savedInstanceState != null) {
        webView.restoreState(savedInstanceState);           
        webView.loadUrlIntoView(savedInstanceState.getString("url"));
    } 
```

现在我得到另一个（讨厌的）错误。奇怪的是应用程序立即崩溃（没有通知）。几次尝试后，它还是开始了。这是错误：

```
01-09 15:11:19.869: A/libc(3392): Fatal signal 11 (SIGSEGV) at 0x00000008 (code=1), thread 3404 (WebViewCoreThre)
01-09 15:11:19.925: I/ActivityManager(281): Displayed my.package/.MainActivity: +197ms
01-09 15:11:19.973: I/DEBUG(86): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
01-09 15:11:19.973: I/DEBUG(86): Build fingerprint: 'generic/vbox86tp/vbox86tp:4.1.1/JRO03L/eng.dan.20121106.232935:userdebug/test-keys'
01-09 15:11:19.973: I/DEBUG(86): pid: 3392, tid: 3404, name: WebViewCoreThre  >>> my.package <<<
01-09 15:11:19.973: I/DEBUG(86): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000008
01-09 15:11:20.249: I/DEBUG(86):     eax 00000000  ebx b6b61c98  ecx 00000000  edx 00000001
... 
```

**更新 2：**

恢复 WebView 状态发生了两次，导致出现问题。所以将其从`onResume`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T19:38:50.300

恢复嵌入的问题`CordovaWebView`是因为与`CordovaWebView`in `onPause()`、`onResume()`和`onCreate()`的交互`onDestroy()`没有正确发生。开始修复时，restoreState() 发生了两次，这导致了进一步的问题。

**创建：**

在恢复状态之后，需要使用以下方法设置 CordovaWebView 基本 url `loadUrlIntoView()`：

```
webView.restoreState(savedInstanceState);
webView.loadUrlIntoView(savedInstanceState.getString("url")); 
```

**销毁：**

我们需要执行`handleDestroy()`以清理所有与 PhoneGap 相关的东西，例如 PluginManager、广播接收器……：

```
@Override
public void onDestroy() {
    super.onDestroy();

    webView.handleDestroy();
} 
```

**暂停：**

在`onPause()`中，我们存储`CordovaWebView`的状态。我们查找最后注册的 url 并将其存储在`SharedPreferences`. 另外，`handlePause()`需要调用。

```
@Override
protected void onPause() {
    super.onPause();

    String url = webView.peekAtUrlStack();
    webView.handlePause(true);

    Bundle out = new Bundle();
    webView.saveState(out);
    out.putString("url", url);

    saveToPreferences(out);
} 
```

**简历：**

在`onResume()`我们需要调用`CordovaWebView`'s `handleResume()`：

```
webView.handleResume(true, false); 
```

**结论：**

**嵌入 a`CordovaWebView`并保存和恢复其状态是可能的，但因为您必须从`DroidGap`&了解很多内部信息`CordovaWebView`，所以不建议这样做。**

我希望我的回答对某人有所帮助。

# java - 是否可以使用 org.codehaus.mojo:build-helper-maven-plugin 将本机 dll 捆绑到 war 文件中？

> ID：14233787
> 
> 赞同：0
> 
> 时间：2013-01-09T11:01:53.707
> 
> 标签：java, maven, package, bundle, native

我有一组用 maven 构建的 java 项目。

现在其中一个依赖于本机 DLL，而后者又依赖于其他几个，我也构建了所有这些。构建的最终产品是一个战争文件。我需要将这些 dll 放在该 war 文件中。

我知道一种方法是将这些 dll 作为相应 java 项目的资源包含在内。这样做意味着我必须在构建该项目之前将这些 dll 复制到相应 java 项目的资源目录中。

但我正在尝试另一种方式，不确定是我做错了还是根本不可能。我说的是`attach-artifact`目标`org.codehaus.mojo:build-helper-maven-plugin`。

这是我尝试的方法：

根级 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                      http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.shunra</groupId>
  <name>VCat-build</name>
  <version>1.0.0.SNAPSHOT</version>
  <artifactId>VCat-build</artifactId>
  <packaging>pom</packaging>
  <modules>
    <module>../../../../DriverProxy</module>
    <module>../../../VCat</module>
    <!-- More modules follow -->
  </modules>
  <build>
    <plugins>
    </plugins>
  </build>
</project> 
```

本机 DLL 的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.shunra.localDriverProxy</groupId>
  <version>0.0.1</version>
  <artifactId>local-driver-proxy</artifactId>
  <packaging>pom</packaging>
  <name>Local Driver Proxy</name>
  <properties>
    <msbuild.exe>C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe</msbuild.exe>
    <msbuild.configuration>StratusRelease</msbuild.configuration>
  </properties>
  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>1.2.1</version>
        <configuration>
          <executable>${msbuild.exe}</executable>
          <workingDirectory>${basedir}</workingDirectory>
        </configuration>
        <executions>
          <execution>
            <id>clean-with-msbuild</id>
            <phase>clean</phase>
            <goals>
              <goal>exec</goal>
            </goals>
            <configuration>
              <arguments>
                <argument>/t:Clean</argument>
                <argument>/p:Configuration=${msbuild.configuration}</argument>
                <argument>LocalDriverProxy.sln</argument>
              </arguments>
            </configuration>
          </execution>
          <execution>
            <id>build-with-msbuild</id>
            <phase>compile</phase>
            <goals>
              <goal>exec</goal>
            </goals>
            <configuration>
              <arguments>
                <argument>/t:Build</argument>
                <argument>/p:Configuration=${msbuild.configuration}</argument>
                <argument>LocalDriverProxy.sln</argument>
              </arguments>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.7</version>
        <executions>
          <execution>
            <id>attach-local-driver-proxy</id>
            <phase>package</phase>
            <goals>
              <goal>attach-artifact</goal>
            </goals>
            <configuration>
              <artifacts>
                <artifact>
                  <file>${basedir}/../Distribution/DataStruct.dll</file>
                  <classifier>DataStruct</classifier>
                  <type>dll</type>
                </artifact>
                <artifact>
                  <file>${basedir}/../Distribution/GraphSetup.dll</file>
                  <classifier>GraphSetup</classifier>
                  <type>dll</type>
                </artifact>
                <!-- more artifacts follow -->
              </artifacts>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

Java 项目的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.shunra</groupId>
  <artifactId>vcat</artifactId>
  <version>0.0.1</version>
  <packaging>war</packaging>

  <properties>
    <java-version>1.6</java-version>
    <org.springframework-version>3.1.0.RELEASE</org.springframework-version>
    <org.aspectj-version>1.6.9</org.aspectj-version>
    <org.slf4j-version>1.5.10</org.slf4j-version>
  </properties>
  <dependencies>
    <!-- Quite a few dependencies follow -->
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source/>
          <target/>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.0.1</version>
        <configuration>
          <webappDirectory>target/exploded</webappDirectory>
          <archive>
            <!-- <manifest>
               <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
               <addClasspath>true</addClasspath>
           </manifest> -->
          </archive>
        </configuration>

        <executions>
          <execution>
            <id>prepare-war</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>exploded</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

运行`mvn package`成功，war 文件已创建，但它不包含任何本机 DLL。这些 DLL 构建得很好，但它们永远不会被复制到任何地方。

我跑了`mvn -X`。以下是我认为相关的行：

```
Apache Maven 3.0.4 (r1232337; 2012-01-17 03:44:56-0500)
Maven home: o:\java\apache-maven-3.0.4
Java version: 1.6.0_27, vendor: Sun Microsystems Inc.
Java home: c:\Program Files\Java\jdk1.6.0_27\jre
.
.
.
[DEBUG] -----------------------------------------------------------------------
[DEBUG] Goal:          org.codehaus.mojo:build-helper-maven-plugin:1.7:attach-artifact (attach-local-driver-proxy)
[DEBUG] Style:         Regular
[DEBUG] Configuration: <?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <artifacts>
    <artifact>
      <file>C:\dev\shunra\DriverProxy/../Distribution/DataStruct.dll</file>
      <classifier>DataStruct</classifier>
      <type>dll</type>
    </artifact>
    <artifact>
      <file>C:\dev\shunra\DriverProxy/../Distribution/GraphSetup.dll</file>
      <classifier>GraphSetup</classifier>
      <type>dll</type>
    </artifact>
    .
    .
    .
  </artifacts>
  <basedir>${basedir}</basedir>
  <mavenSession>${session}</mavenSession>
  <project>${project}</project>
  <runOnlyAtExecutionRoot default-value="false">${buildhelper.runOnlyAtExecutionRoot}</runOnlyAtExecutionRoot>
  <skipAttach default-value="false">${buildhelper.skipAttach}</skipAttach>
</configuration>
[DEBUG] =======================================================================
[DEBUG] com.shunra.localDriverProxy:local-driver-proxy:pom:0.0.1
.
.
.
[INFO] --- build-helper-maven-plugin:1.7:attach-artifact (attach-local-driver-proxy) @ local-driver-proxy ---
[DEBUG] org.codehaus.mojo:build-helper-maven-plugin:jar:1.7:
.
.
.
[DEBUG]    org.codehaus.plexus:plexus-utils:jar:1.5.8:compile
[DEBUG] Created new class realm plugin>org.codehaus.mojo:build-helper-maven-plugin:1.7
[DEBUG] Importing foreign packages into class realm plugin>org.codehaus.mojo:build-helper-maven-plugin:1.7
[DEBUG]   Imported:  < maven.api
[DEBUG] Populating class realm plugin>org.codehaus.mojo:build-helper-maven-plugin:1.7
[DEBUG]   Included: org.codehaus.mojo:build-helper-maven-plugin:jar:1.7
.
.
.
[DEBUG]   Excluded: org.apache.maven:maven-artifact:jar:2.0.6
[DEBUG] Configuring mojo org.codehaus.mojo:build-helper-maven-plugin:1.7:attach-artifact from plugin realm ClassRealm[plugin>org.codehaus.mojo:build-helper-maven-plugin:1.7, parent: sun.misc.Launcher$AppClassLoader@3326b249]
[DEBUG] Configuring mojo 'org.codehaus.mojo:build-helper-maven-plugin:1.7:attach-artifact' with basic configurator -->
[DEBUG]   (s) file = C:\dev\shunra\DriverProxy\..\Distribution\DataStruct.dll
[DEBUG]   (s) classifier = DataStruct
[DEBUG]   (s) type = dll
[DEBUG]   (s) file = C:\dev\shunra\DriverProxy\..\Distribution\GraphSetup.dll
[DEBUG]   (s) classifier = GraphSetup
[DEBUG]   (s) type = dll
.
.
.
[DEBUG]   (f) artifacts = [org.codehaus.mojo.buildhelper.Artifact@7e79b177, ...]
[DEBUG]   (f) basedir = C:\dev\shunra\DriverProxy
[DEBUG]   (f) mavenSession = org.apache.maven.execution.MavenSession@37567e6c
[DEBUG]   (f) project = MavenProject: com.shunra.localDriverProxy:local-driver-proxy:0.0.1 @ C:\dev\shunra\DriverProxy\pom.xml
[DEBUG]   (f) runOnlyAtExecutionRoot = false
[DEBUG]   (f) skipAttach = false
[DEBUG] -- end configuration -- 
```

我对 maven 不是很熟悉，所以我可能从日志中省略了重要部分。完整的日志在这里 - [http://pastebin.com/raw.php?i=fhZCmGxB](http://pastebin.com/raw.php?i=fhZCmGxB)（我删除了其他几个 java 项目的构建日志，它们看起来都一样，但占用大量空间）

所以我的问题是 - 我可以使用`org.codehaus.mojo:build-helper-maven-plugin`来做我需要的 - 将本机 DLL 捆绑到战争中吗？

**编辑**

我已经尝试了 SpaceTrucker 建议的方法，没有产生错误，但产生的战争保持不变 - 没有打包 DLL。maven 日志包含以下条目：

```
[DEBUG] =======================================================================
[DEBUG] com.shunra:vcat:war:0.0.1
.
.
.
[DEBUG]    com.shunra.localDriverProxy:local-driver-proxy:dll:DataStruct:0.0.1:compile
.
.
.
[INFO] Exploding webapp...
[INFO] Copy webapp webResources to C:\dev\shunra\Application\VCat\target\exploded
[INFO] Assembling webapp vcat in C:\dev\shunra\Application\VCat\target\exploded
[DEBUG] Processing: spring-context-3.1.0.RELEASE.jar
.
.
.
[DEBUG] Processing: local-driver-proxy-0.0.1.dll
[DEBUG] Skipping artifact of type dll for WEB-INF/lib
[INFO] 
[INFO] --- maven-war-plugin:2.0.1:war (default-war) @ vcat ---
[DEBUG] Configuring mojo org.apache.maven.plugins:maven-war-plugin:2.0.1:war from plugin realm ClassRealm[plugin>org.apache.maven.plugins:maven-war-plugin:2.0.1, parent: sun.misc.Launcher$AppClassLoader@3326b249]
.
.
.
[DEBUG] -- end configuration --
[INFO] Exploding webapp...
[INFO] Copy webapp webResources to C:\dev\shunra\Application\VCat\target\exploded
[INFO] Assembling webapp vcat in C:\dev\shunra\Application\VCat\target\exploded
[DEBUG] Processing: spring-context-3.1.0.RELEASE.jar
.
.
.
[DEBUG] Processing: local-driver-proxy-0.0.1.dll
[DEBUG] Skipping artifact of type dll for WEB-INF/lib
[INFO] Generating war C:\dev\shunra\Application\VCat\target\vcat-0.0.1.war 
```

日志提到`local-driver-proxy-0.0.1.dll`，但这个文件不存在！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:01:05.487

从我在你的 pom 中看到的是，没有从构建战争的 Java 项目声明的依赖项到包含本机 dll 的项目。声明此依赖项时应该没问题。

编辑：
将此添加到`dependencies`您的战争文件 pom 的部分：

```
<dependency>
  <groupId>com.shunra.localDriverProxy</groupId>
  <version>0.0.1</version>
  <artifactId>local-driver-proxy</artifactId>
  <classifier>DataStruct</classifier>
  <type>dll</type>
</dependency> 
```

# javascript - 再次设置源会刷新 iFrame？

> ID：14233791
> 
> 赞同：0
> 
> 时间：2013-01-09T11:02:02.560
> 
> 标签：javascript, caching, iframe

我正在使用以下内容来设置我的 iFrames 内容，但是否会再次设置相同的 url 来刷新所有浏览器中的内容？还是我需要使用[http://targeturl.com/targetpage?random=](http://targeturl.com/targetpage?random=) *currenttime*来防止缓存并导致重新加载？

```
function setIframeSource(Iframe, targetUrl){
var Elem = document.getElementById(Iframe);
Elem.src = targetUrl; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:04:23.320

它肯定会重新加载页面，但缓存的处理方式可能会有所不同，具体取决于浏览器/版本/服务器甚至用户设置，因此如果您想正确刷新它 - 请使用 cachebuster（时间）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:04:23.947

您不需要像这样在网页上强制刷新缓存，除非您知道该特定网页需要强制刷新缓存。

如果您需要将缓存刷新查询字符串附加到 中的每个网页`iframe`，那么这对于访问浏览器中的任何网页都是正确的，显然情况并非如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:09:45.673

我相信如果 URL 相同或只有片段标识符（# 部分）发生更改，它不应该刷新 iFrame，但您可能需要在一些浏览器上进行测试（尤其是 IE，它似乎从不遵循规范）

如果你用 Javascript 设置 URL，为什么不调用 iframe 的 reload() 方法呢？从本质上讲，该 iframe 是一个窗口，并且包含与普通窗口对象相同的方法。

# magento - 产品视图上的 Magento 自定义菜单

> ID：14233793
> 
> 赞同：0
> 
> 时间：2013-01-09T11:02:12.647
> 
> 标签：magento

我正在创建自定义菜单而不是 top.menu。在`new-top-menu.phtml`我显示所有产品类别。在一个 StaticBlock 我添加这个 phtml 模板文件

```
{{block type="catalog/product_list" template="catalog/new-top-menu.phtml"}} 
```

在`page.xml`文件中的部分

```
<block type="page/html_header" name="header" as="header"> 
```

我添加了这个新行

```
<block type="cms/block" name="top-menu">
    <action method="setBlockId">
        <block_id>top-menu</block_id>
    </action>
</block> 
```

在`header.phtml`我替换这个

```
<?php echo $this->getChildHtml('topMenu') ?> 
```

有了这个

```
<?php echo $this->getChildHtml('top-menu')  ?> 
```

菜单工作正常，但是当我进入产品视图时。我得到错误

```
SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1

Trace:
#0 /lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#1 /lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 /lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 /lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT `catalog...', Array)
#4 /lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('SELECT `catalog...', Array)
#5 /lib/Zend/Db/Adapter/Abstract.php(753): Varien_Db_Adapter_Pdo_Mysql->query(Object(Varien_Db_Select), Array)
#6 /app/code/core/Mage/Eav/Model/Entity/Abstract.php(943): Zend_Db_Adapter_Abstract->fetchRow(Object(Varien_Db_Select))
#7 /app/code/core/Mage/Catalog/Model/Resource/Abstract.php(698): Mage_Eav_Model_Entity_Abstract->load(Object(Mage_Catalog_Model_Category), Object(Mage_Catalog_Model_Category), NULL)
#8 /app/code/core/Mage/Core/Model/Abstract.php(225): Mage_Catalog_Model_Resource_Abstract->load(Object(Mage_Catalog_Model_Category), Object(Mage_Catalog_Model_Category), NULL)
#9 /app/code/core/Mage/Catalog/Block/Product/List.php(80): Mage_Core_Model_Abstract->load(Object(Mage_Catalog_Model_Category))
#10 /app/code/core/Mage/Catalog/Block/Product/List.php(141): Mage_Catalog_Block_Product_List->_getProductCollection()
#11 /app/code/core/Mage/Core/Block/Abstract.php(862): Mage_Catalog_Block_Product_List->_beforeToHtml()
#12 /app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#13 /app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('top-menu', true)
#14 /app/design/frontend/default/przewody/template/page/html/header.phtml(51): Mage_Core_Block_Abstract->getChildHtml('top-menu')
#15 /app/code/core/Mage/Core/Block/Template.php(241): include('/var/www/sites/...')
#16 /app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/defaul...')
#17 /app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#18 /app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#19 /app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#20 /app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('header', true)
#21 /app/design/frontend/default/przewody/template/page/2columns-right.phtml(42): Mage_Core_Block_Abstract->getChildHtml('header')
#22 /app/code/core/Mage/Core/Block/Template.php(241): include('/var/www/sites/...')
#23 /app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/defaul...')
#24 /app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#25 /app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#26 /app/code/core/Mage/Core/Model/Layout.php(555): Mage_Core_Block_Abstract->toHtml()
#27 /app/code/core/Mage/Core/Controller/Varien/Action.php(390): Mage_Core_Model_Layout->getOutput()
#28 /app/code/core/Mage/Cms/Helper/Page.php(137): Mage_Core_Controller_Varien_Action->renderLayout()
#29 /app/code/core/Mage/Cms/Helper/Page.php(52): Mage_Cms_Helper_Page->_renderPage(Object(Mage_Cms_IndexController), 'no-route')
#30 /app/code/core/Mage/Cms/controllers/IndexController.php(75): Mage_Cms_Helper_Page->renderPage(Object(Mage_Cms_IndexController), 'no-route')
#31 /app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Cms_IndexController->noRouteAction()
#32 /app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('noRoute')
#33 /app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#34 /app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#35 /app/Mage.php(683): Mage_Core_Model_App->run(Array)
#36 /index.php(90): Mage::run('', 'store')
#37 {main} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:57:14.643

据我了解，您制作了一个需要在所有页面上显示的自定义菜单。

您可以通过在布局文件的正确位置添加块来做到这一点。为此，您不需要使用静态块。

在您自己的主题中，您必须将以下内容添加到您的`local.xml`布局文件中：

```
<default>
  <reference name="header">
     <block type="catalog/product_list" name="top-menu" 
            template="catalog/new-top-menu.phtml" />
  </reference>
</default> 
```

确保将`catalog/new-top-menu.phtml`其添加到您的主题中。并且您的主题中的副本`header.phtml`应按照您的问题中的描述进行更新。

这将在所有页面的标题中显示您的自定义菜单。如您所见，您不需要静态块来完成此操作。除非，您使用静态块还有另一个原因？

# asp.net - 注销使用表单身份验证从不同浏览器/机器登录的用户

> ID：14233795
> 
> 赞同：2
> 
> 时间：2013-01-09T11:02:20.500
> 
> 标签：asp.net, wcf-data-services, asp.net-authentication

考虑使用持久 cookie 进行表单身份验证的情况。

如果同一用户使用两个不同的浏览器或两台不同的机器登录，当用户从其中一个浏览器/机器注销时，他仍然不能从另一台浏览器/机器登录吗？

通常，Web 应用程序如何处理这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-07T05:42:30.337

在很大程度上，我必须同意斯里尼瓦斯的观点。这是我对这个问题的看法

1.  在登录时创建一个仅 HTTP cookie，并在登录时生成一个 guid，这将是您的浏览器/计算机密钥。关闭浏览器将删除 cookie
2.  获取用户id
3.  保留用户表中的对 ex: user:a, key:12345
4.  用户通过身份验证后的后续请求身份验证算法
5.  使用当前用户 ID 获取数据库中最后使用的密钥
6.  检查 cookie 是否存在，如果不存在则完全取消身份验证
7.  检查cookie值是否与数据库中的相同，如果不是则完全取消身份验证

使用此方法，任何后续登录都将导致所需的重新身份验证并使任何其他身份验证无效。实际上强制用户仅使用 1 个浏览器/计算机

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:29:16.920

我通常这样做：我的用户表中有一个会话列（在数据库中）当用户登录时，我将值**Y**存储在其中。当他注销时，我将其更改为**N。**每次用户尝试登录时在，我检查相应会话列中的值，如果是**Y**，我告诉用户他已经登录，如果是**N**，那么我允许用户登录。但是我们必须小心并设置值当用户注销或关闭浏览器时变为**N。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:25:24.510

带有 cookie 的表单身份验证（无论它们是否持久）是基于浏览器会话的（持久 cookie 当然可以跨同一浏览器的多个会话（在同一台机器上的同一用户帐户上）工作。所以两个浏览器会话（或两个不同的浏览器或两台机器上的浏览器等）就表单身份验证而言将被视为不同的范围。

因此用户可以从不同的浏览器会话进行多次登录，并且其中一个注销不会影响另一个。是否允许同一用户的多个并发登录取决于 Web 应用程序。例如，在线银行网站将限制为只有一个用户会话 - 因此，如果用户从不同的会话登录，则之前的会话无效（即用户已注销）。必须在 ASP.NET 中编写自定义实现才能做到这一点 - 典型的实现会使每个用户会话条目进入数据库（通常无论如何都需要用于审计目的） - 所以每当添加新条目时，都会检查是否有任何同一用户的活动会话，如果是，则该会话被标记为非活动。每个请求都会检查当前用户会话是否处于活动状态，如果没有，则会将此类消息标记给用户。

# c++ - 在 C++ 中从文件中读取字符

> ID：14233796
> 
> 赞同：1
> 
> 时间：2013-01-09T11:02:39.370
> 
> 标签：c++

我创建了一个文件 hangman_word_collection.txt 并将文件的所有内容存储到字符串行中。

现在我想在我的程序中使用行字符串，但`line[0]`它没有任何价值，或者我不知道它是否有东西。

我是新手，请帮忙。

这是代码：

```
#include <iostream>
#include <fstream>

using namespace std;

int main() {
string line;

ifstream myfile ("hangman_word_collection.txt");
if (myfile.is_open()) {
    while (myfile.good()) {
        getline (myfile,line);
        cout << line << endl;
    }
}
for(int i=0; i <= 79; i++) {
    cout << "\n" << i;
    cout << ":" << line[i];
}
return 0;
} 
```

和输出：

```
actingraringbackupcampusdacoiteasilyfabricgardenhackediceboxprimeralwaysupload.

0:
1:c
2:t
3:i
4:n
5:g
6:r
7:a
8:r
9:i
10:n
11:g
12:b
13:a
14:c
15:k
Press <RETURN> to close this window... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T11:09:08.810

当`getline`写入目标失败时，您`line`假设它不会修改该字符串中的内容，而是将字符串置空，该字符串在内部将字符 0 替换为空字符。

其余的是未定义的行为，因为您正在读取逻辑字符串末尾的字符。

要解决此问题，请将您的代码更改为；

```
string line;

ifstream myfile ("hangman_word_collection.txt");
if (myfile.is_open())
{
    while (myfile.good())
    {
       std::string temp;
       if( getline( myfile, temp ) )
       {
           temp.swap( line );
           cout <<line<<endl;
       }
    }
} 
```

请注意，用 79 这样的幻数进行硬编码是不好的做法。如果你`line.size()`改用了，你会看到字符串的实际大小，并且不会有未定义的行为。如果您担心性能，您可以将其存储在循环外的变量中，尽管它可能没什么区别。

# facebook - Facebook登录响应不返回电子邮件地址

> ID：14233797
> 
> 赞同：0
> 
> 时间：2013-01-09T11:02:46.667
> 
> 标签：facebook, asp.net-mvc-3, facebook-graph-api, facebook-login

我在 mvc3 项目中使用 facebook 登录。我正在尝试获取用户电子邮件地址。这是我的代码：-

```
function getFaceBook() {
    FB.init({
        appId: 'xxxx', // App ID
        channelUrl: '//' + window.location.hostname + '/channel', // Path to your Channel File
        status: true, // check login status
        cookie: true, // enable cookies to allow the server to access the session
        xfbml: true,

    });
    FB.login(function (response) {

        FB.api('/me', function (response) {
            alert(JSON.stringify(response));
            alert(response.email)
            var Profile = "http://graph.facebook.com/" + response.id + "/picture";
            });
    }); 
```

一切正常。但是响应总是返回未定义的电子邮件。上周之前它工作正常。谁能告诉我我想念什么。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:44:06.927

试试这样：

```
FB.login(function (response) {
    if(response.authResponse)
    {
      FB.api('/me', function (response) {
        alert(JSON.stringify(response));
        alert(response.email)
        var Profile = "http://graph.facebook.com/" + response.id + "/picture";
        });
    }
    else
    {
        // not authorize
    }
},{scope: 'email'}); 
```

# jquery - 从 CakePHP 处理 PhoneGap 应用程序的身份验证

> ID：14233798
> 
> 赞同：10
> 
> 时间：2013-01-09T11:02:55.240
> 
> 标签：jquery, api, cakephp, cordova

我正在构建一个内置在 PhoneGap 中的简单应用程序，它使用 REST API 从服务器上的我的网站加载数据（因为您不能在 PhoneGap 中运行 PHP）。

列出一些数据的示例可能是：

```
$.ajax({
    url: 'http://myserver.com/posts/index.json',
    dataType: 'jsonp',
    success: function(data) {
        for (var i=0,total=data.length; i<total; i++)
        { 
            console.log(data.Post.title[i]);
        }
    }
}); 
```

这很好，返回的数据可以在我的 PhoneGap 应用程序中使用。但是，假设帖子列表要求您登录...

我将如何处理？因为与重定向到登录表单的正常身份验证请求不同，在我的 JSON 世界中，这不会发生。事实上，**实际的 HTML 登录表单被返回，这会导致错误，因为我的 JavaScript 需要 JSON 而不是 HTML。**

是否有处理此问题的最佳实践，例如如果请求身份验证然后在 PhoneGap 应用程序中加载登录表单视图，而不是像当前那样从应用程序返回 HTML 登录表单？也许通过 JSON 发送身份验证请求？

例如，一个简单的 JSON 化方法如下所示：

```
public function index() {
    $this->set('posts', $this->paginate());
    $this->set('_serialize', array('posts'));
} 
```

如前所述，我可以`beforeFilter`通过**不**将方法名称传递到`$this->Auth->allow()`. 所以我假设我需要在 beforeFilter 中做一些聪明的事情来知道请求是否是 JSON，如果是，那么检查该方法是否需要授权，然后如果需要，要么发回错误（而不是像 Cake 通常的 HTML 表单在 JSON 中通过 AuthComponent) 或允许访问。

**更新：2012 年 1 月 13 日**

在对该主题进行了更多研究之后，我查看了 Forrst API，因为它们似乎已经有效地构建了我想要构建的 RESTful API。

例如，他们有这样的电话：[https](https://forrst.com/api/v2/post/comments?tiny_id=HUD) ://forrst.com/api/v2/post/comments?tiny_id= HUD 这基本上是说显示带有 HUD 小 id 的帖子的评论。如果您未通过身份验证，您将获得以下内容：

```
{"resp":{"error":"this method requires authentication"},"stat":"fail","in":0.0903,"authed":false,"authed_as":false,"env":"prod"} 
```

现在有趣的部分是即使我登录到 Forrst，我仍然会收到该错误消息，因为它没有查看我的会话，而是期待某种令牌来验证实际请求。例如`?access_token=550e8400-e29b-41d4-a716-446655440000`

**所以我想这里的主要问题是如何将它构建到我的 Cake App 中？计划如下：**

在我的应用程序中，无论您是通过 AJAX 还是在浏览器中请求它，它都会将您重定向到登录页面。**Forrst 处理两者，并且在调用它的 API 时总是返回 JSON 错误，并且永远不会返回 HTML！**这就是我想要在我的实现中实现的目标。我在我的用户表中添加了一个 access_token 列（出于安全原因，每当有人更新密码时，该列都会更改）。下一步是 A) 检查受保护方法的访问令牌，如果正确则允许或拒绝，然后 B) 当不存在令牌或不正确时，我需要某种方式进行处理，并发送正确的错误状态而不是 HTML 登录形式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T16:28:53.217

我们的应用程序也存在同样的问题，该应用程序也内置在 Phonegap（现在称为 Cordova）中。让身份验证工作真的很痛苦，但最终我们设法通过使用 Facebook API 让它工作，但我假设你不想使用 Facebook。

因此，您可以通过运行以下代码来检查它是否是 XMLHttpRequest：

**PostsController - 索引（）**

```
if ($this->RequestHandler->isAjax() == 1){
    // This is an Ajax call
    $this->layout = 'json';
    $this->set('data', array('data', 'to', 'parse'));
} else {
    // This is the normal request
    # do the stuff you want to do here as usual
} 
```

但是由于这会要求您登录，因为它不在`$this->Auth->allow()`列表中，除非您登录，否则它甚至不会到达那里。所以您需要做的是创建一个新的`AjaxController`来处理第一个请求。只需将上面发布的代码放在上面，`beforeFilter`然后从那里做你的魔法。从那里您可以简单地检查是否有人登录以及用户的当前状态。如果他已登录并且您要返回数据。您可以调用您需要的模型或调用控制器函数，`requestAction('/path/to/what/i/need')`其中您需要的路径可以在您在 Ajax 调用中发送的 post 变量中声明。

在 中，`ajax layout`您可以告诉which`json_encode`将`$data`被正确解析。

**应用程序**

现在在您的 JavaScript 中，您将获得一些数据。假设您使用以下键构造返回的 JSON 字符串：`status`和`data`.

假设`status`已`auth`在返回的 JSON 中设置为，您知道您需要进行身份验证，因此您可以显示一个登录表单，然后处理所有这些内容。只需在应用程序中制作一个漂亮的登录视图，这样您就可以控制它的各个方面，并希望它更安全。

如果`status`设置为`success`您可以相应地显示所有帖子。

我有另一个主题的答案，我展示了我们如何创建自己的 API，也许这可以在某种程度上帮助你：[https ://stackoverflow.com/a/11422866/1110760](https://stackoverflow.com/a/11422866/1110760)

**警告**JavaScript 在 Phonegap 应用程序中似乎是安全的，但事实并非如此！任何人都可以从其 Android 设备上下载 .apk 文件并在`Android emulator`能够查看所有 JavaScript 和 HTML 代码的人中打开它。因此，要非常小心您将直接编码到 JavaScript 中的数据以及您的 API 是如何访问的。

* * *

*我知道我的答案有点含糊，所以如果您需要有关此答案的更多信息，请询问！*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:46:42.973

据我所知，如果用户未登录，您需要某种方式来返回一些错误消息，例如需要以 json 格式登录。您可以做的是构建如下函数：

```
 public function index ($token=NULL)
{
  if($token != NULL)
  {
   // call some method to check if token is valid
   // do required processing 
  }
  else
{
  $response=array('response'=>'failure','message'=>'Login required');
  echo json_encode($response);
} 
```

在ajax调用中：

```
 url: 'http://myserver.com/posts/index.json/'+token; 
```

在用户表中，在用户注册时，简单地生成一些访问令牌并将其存储在“访问令牌”列中。

用户登录时返回此令牌。

因此，您可以在发送请求时将其添加到您的 ajax 调用中。

然后 在您的 ajax 调用[http://yourdomain.com/posts/showPosts](http://yourdomain.com/posts/showPosts)中的帖子控制器中说 showPosts 方法

```
$method=$this->action; //this fetches the name of the method called                                                   
$Mmethods =array('showPosts','test2'); // methods requiring login                                                               
if(in_array($method,$Mmethods)) {                                  
$this->params array will give you all the parameters passed in URL.
//Fetch the access token from this array if it is set in 'url' index //of this array.                          
//if token is found, run sql query whether it exists in database or //not, else return response with errors and exit;} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T22:33:23.343

出于澄清原因：您的用户是否需要“登录”才能在每种情况下查看返回的帖子，或者只有一些帖子需要用户登录？您是否可以控制另一端的脚本`(index.json)`？

根据我现在的理解，我会使用 PhoneGap 应用程序中的一个页面来“登录”，然后将信息与请求一起存储并发送到服务器`index.json`，或者更好的是可以处理和返回适当`json`字符串的 php 脚本。基本上会话 Cookie 在典型浏览器中的工作方式。

另一种选择是您可以修改`index.json`返回一个`json`字符串，其中包含您可以在 PhoneGap 中捕获、阅读和处理的消息，然后如果需要在您的应用程序中向用户显示登录表单，然后执行与上述段落相同的操作。

我愿意为代码和示例提供帮助，但是您当前的帖子对您​​当前的代码以及从服务器返回的内容含糊不清。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T16:41:42.033

希望这可以解决问题：

代码片段使用命名参数 with`is('ajax')`来确定 json 请求，并检查用户是否尚未登录。然后，如果请求的操作需要身份验证，则仅发送 json 错误：

首先，把它放在你的`beforeFilter()`in 中`AppController`：

```
//see if request is json (json is sent by adding a named param e.g. posts/index/json:1
//if so also check that user not already logged in
if (!empty($this->params['named']['json']) && $this->request->is('ajax') &&  !$this->Auth->user())
{
    //see if the action needs authentication
    $requiresAuth = !in_array($this->params['action'], $this->Auth->allowedActions);
    if ($requiresAuth)
    {
        //send json response
        $response = array('error' => 
            array(
                'code' => 123,
                'message' => 'authError',
            )
        );
        echo json_encode($response);
        exit;
    }
} 
```

要发出请求 json，请添加`/json:1`到您的路径（例如`http://myserver.com/posts/index/json:1`，作为命名的 $_GET 参数）。在每个控制器`beforeFilter()`中，确保在调用`$this->Auth->allow` *之前*`parent::beforeFilter()`首先添加允许的操作。

如果您使用访问控制列表 (ACL) 进行更高级的身份验证，请参阅[http://book.cakephp.org/2.0/en/core-libraries/components/access-control-lists.html](http://book.cakephp.org/2.0/en/core-libraries/components/access-control-lists.html)，您还需要了解如果 ACL 中允许该操作：

```
//the group_id to check permission for (must exist)
$group_id = 8; //your group_id
$group = array(
    'model' => 'Group',
    'foreign_key' => $group_id
);
$actionPath = $this->name . '/' . $this->params['action'];
$requiresAclAuth = $this->Acl->check($group, $actionPath); 
```

查看 ACL 是否需要身份验证：

```
if ($requiresAclAuth && $requiresAuth)
{
    //send json response
    //...
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T11:35:43.213

jQuery ajax() 函数使您能够使用用户名：和密码：(http://api.jquery.com/jQuery.ajax/) 将登录信息与请求一起传递，使用这些并处理身份验证失败错误：

# sql - 插入多个选择

> ID：14233801
> 
> 赞同：14
> 
> 时间：2013-01-09T11:03:16.890
> 
> 标签：sql, sql-server, insert

我需要将这些选择的值插入到表中。它们返回许多行，对于每一行，我需要在新表中插入一列。

前任：

```
select (select id from X where name=Contacts.Company) as IDClient, 
FirstName + right(' '+ cast(LastName as varchar(20)), 20) as NewName, 
(select id from Y where newid=8 and description=Contacts.JobTitle) as IDRole, 
Initials
from Contacts 
```

我需要为这个选择的每一行做这样的事情：

```
insert into TableX (IDClient,NewName,IDRole,'0','0','0',Initials,'XXX',GETDATE(),NULL,NULL) 
```

泰

**已编辑**

```
insert into TableX (IDClient,NewName,IDRole,'0','0','0',Initials,'XXX',GETDATE(),NULL,NULL)
select 
(select id from X where nAme=Contacts.Company) as IDClient, 
FirstName + right(' '+ cast(LastName as varchar(20)), 20) as NewName, 
(select id from Y where newid=8 and description=Contacts.JobTitle) as IDRole,
Initials
from Contacts 
```

当我执行此操作时，我收到此错误：

“'0' 附近的语法不正确。”

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-09T11:06:22.843

除非我遗漏了什么，否则您应该能够做到这一点：

```
insert into Table (IDclient,NewName,IDRole,Initials)
select (select id from X where name=Contacts.Company) as IDClient, 
  FirstName + right(' '+ cast(LastName as varchar(20)), 20) as NewName, 
  (select id from Y where newid=8 and description=Contacts.JobTitle) as IDRole, 
  Initials
from Contacts 
```

您将只使用`INSERT INTO...SELECT...FROM..`语法。

现在，如果您没有表，那么您可以`SELECT..INTO`创建一个新的临时表：

```
select (select id from X where name=Contacts.Company) as IDClient, 
  FirstName + right(' '+ cast(LastName as varchar(20)), 20) as NewName, 
  (select id from Y where newid=8 and description=Contacts.JobTitle) as IDRole, 
  Initials
into #table
from Contacts 
```

或者，如果您想为此使用联接，则：

```
insert into Table (IDclient,NewName,IDRole,Initials)
select x.id as IDClient, 
  c.FirstName + right(' '+ cast(c.LastName as varchar(20)), 20) as NewName, 
  y.id as IDRole, 
  c.Initials
from Contacts c
inner join x
  on x.name=c.Company
inner join y
  on y.description=c.JobTitle
  and y.newid=8 
```

现在您的原始帖子显示了以下内容：

```
 insert into Table (IDclient,NewName,'',IDRole,Initials,NULL) 
```

您有两个没有名称的字段，这是不正确的语法。在您的插入语句中，要么必须命名任何列并插入全部，要么命名要插入值的列。您不能使用空字符串`''`或`null`作为列名。如果要插入这些值，则必须为它们提供名称：

```
insert into Table (IDclient,NewName,col3,IDRole,Initials,col5)
select x.id as IDClient, 
  c.FirstName + right(' '+ cast(c.LastName as varchar(20)), 20) as NewName, 
  '' as col3
  y.id as IDRole, 
  c.Initials,
  null as col5
from Contacts c
inner join x
  on x.name=c.Company
inner join y
  on y.description=c.JobTitle
  and y.newid=8 
```

根据您的编辑，您需要使用以下内容：

```
-- this insert line should state column names not '0', '0', etc
-- replace these with the names of your columns you are inserting into like the others,
-- then place these values that you want to insert in the select list
insert into TableX (IDClient,NewName,IDRole,'0','0','0',Initials,'XXX',GETDATE(),NULL,NULL)
select 
  (select id from X where nAme=Contacts.Company) as IDClient, 
  FirstName + right(' '+ cast(LastName as varchar(20)), 20) as NewName, 
  (select id from Y where newid=8 and description=Contacts.JobTitle) as IDRole,
  '0',
  '0',
  '0',
  Initials,
  'XXX',
  getdate(),
  null,
  null
from Contacts 
```

# python - 是否有任何分布式机器学习库可用于将 Python 与 Hadoop 结合使用？

> ID：14233802
> 
> 赞同：10
> 
> 时间：2013-01-09T11:03:17.653
> 
> 标签：python, hadoop, mapreduce, hadoop-streaming, elastic-map-reduce

我已经为自己设置了 Amazon Elastic MapReduce，以便执行各种标准机器学习任务。过去我曾广泛使用 Python 进行本地机器学习，但我不懂 Java。

据我所知，没有用于分布式机器学习的开发良好的 Python 库。另一方面，Java 有[Apache Mahout](http://mahout.apache.org/)和来自 Cloudera的较新的[Oryx 。](https://github.com/cloudera/oryx)

从本质上讲，我似乎必须在两个选项之间做出选择。通过并行化我自己的算法以与[Hadoop 流](http://hadoop.apache.org/docs/stable1/streaming.html)或 Hadoop 的[Python 包装器](http://blog.cloudera.com/blog/2013/01/a-guide-to-python-frameworks-for-hadoop/)之一一起使用，直到存在体面的库或跳转到 Java，以便我可以使用 Mahout/Oryx。编写自己的 MapReduce 字数统计代码和编写自己的 MapReduce SVM 之间有天壤之别！[即使在像这样](http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/)的优秀教程的帮助下。

我不知道哪个是更明智的选择，所以我的问题是：

A）我错过了一些有用的 Python 库吗？如果没有，您知道是否有任何在不久的将来有用的开发中？

B）如果上述问题的答案是否定的，那么我的时间是否会更好地花在跳槽到 Java 上？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T19:10:47.133

I do not know of any library that could be used natively in Python for machine learning on Hadoop, but an easy solution would be to use the `jpype` module, which basically allows you to interact with Java from within your Python code.

You can for example start a JVM like this:

```
from jpype import *

jvm = None

def start_jpype():
    global jvm
    if (jvm is None):
        cpopt="-Djava.class.path={cp}".format(cp=classpath)
        startJVM(jvmlib,"-ea",cpopt)
        jvm="started" 
```

There is a [very good tutorial](https://cwiki.apache.org/confluence/display/MAHOUT/Using+Mahout+with+Python+via+JPype) on the topic here, which explains you how to use KMeans clustering from your Python code using Mahout.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T19:27:53.643

Answer to the questions:

1.  To my knowledge, no, python has an extensive collection of machine learning and map-reduce modules but not ML+MR

2.  I would say yes, since you are a heavy programmer you should be able to catch with Java fairly fast if you are not involved with those nasty(sorry no offense) J2EE frameworks

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-23T00:22:11.420

当您使用 EMR 时，我建议您使用 Java。

首先，很简单，它的设计工作方式。如果你要在 Windows 上玩，你用 C# 编写，如果你用 apache 做一个 web 服务，你用 PHP。在 EMR 中运行 MapReduce Hadoop 时，您使用的是 Java。

其次，Java 中的所有工具都适合您，例如 AWS 开发工具包。在 Netbeans、Cygwin（在 Windows 上）和 s3cmd（在 cygwin 中）的帮助下，我定期在 EMR 中快速开发 MapReduce 作业。我使用 netbeans 构建我的 MR jar，并使用 cygwin + s3cmd 将其复制到我的 s3 目录以运行 emr。然后，我还使用 AWS SDK 编写了一个程序，以使用我的配置启动我的 EMR 集群并运行我的 jar。

第三，有很多适用于 Java 的 Hadoop 调试工具（通常需要 mac 或 linux 操作系统才能工作）

请参阅[此处](https://stackoverflow.com/questions/11345923/how-to-import-org-apache-java-dependencies)以使用 Maven 为 hadoop 创建一个新的 Netbeans 项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-23T07:58:11.343

这篇博文对使用 hadoop 的 python 框架进行了相当全面的回顾：

[http://blog.cloudera.com/blog/2013/01/a-guide-to-python-frameworks-for-hadoop/](http://blog.cloudera.com/blog/2013/01/a-guide-to-python-frameworks-for-hadoop/)

> 包含：
> 
> Hadoop 流式传输
> 
> 先生工作
> 
> 小飞象
> 
> hadoopy
> 
> pydoop

这个例子提供了一个使用 python 和 hadoop 并行化 ML 的工作示例：

[http://atbrox.com/2010/02/08/parallel-machine-learning-for-hadoopmapreduce-a-python-example/](http://atbrox.com/2010/02/08/parallel-machine-learning-for-hadoopmapreduce-a-python-example/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-01-23T10:25:21.797

A) 没有

B) 没有

你**真正**想做的是跳船到**Scala**，如果你想做任何核心机器学习，那么你也想忘记使用 Hadoop 并跳船到**Spark**。Hadoop 是一个 MapReduce 框架，但 ML 算法不一定映射到这种数据流结构，因为它们通常是迭代的。这意味着许多 ML 算法将导致大量 MapReduce 阶段——每个阶段都有巨大的读写磁盘开销。

Spark 是一个内存分布式框架，它允许数据保持在内存中，速度提高了几个数量级。

现在 Scala 是世界上最好的语言，尤其是对于大数据和机器学习。它不是动态类型的，但具有类型推断和隐式转换，并且比 Java 和 Python 简洁得多。这意味着您可以在 Scala 中非常快速地编写代码，而且该代码是可读且可维护的。

最后，Scala 是函数式的，并且很自然地适用于数学和并行化。这就是为什么所有重要的大数据和机器学习前沿工作都在 Scala 中完成；例如 Scalding、Scoobi、Scunch 和 Spark。粗鲁的 Python 和 R 代码将成为过去。

# ios - 如何使用 FacebookSDK 解决方法？

> ID：14233803
> 
> 赞同：0
> 
> 时间：2013-01-09T11:03:17.513
> 
> 标签：ios, facebook, json, jsonkit

在一些重复的 JSON 错误之后，我发现了以下 Facebook SDK 解决方法。楼主删除了SBJSON，改用JSKit。

有人知道如何使用这种解决方法吗？它不是常规的 FacebookSDK 框架，因此我无法将解决方法实现为框架。

查看解决方法：[https ://github.com/acani/facebook-ios-sdk](https://github.com/acani/facebook-ios-sdk)

我可以将 src 文件夹拖到 Xcode 中，然后导入“facebook.h”文件吗？或者我应该以某种方式构建一个 .framework 文件？

# c# - C# FileStream 行为文件结束

> ID：14233806
> 
> 赞同：-3
> 
> 时间：2013-01-09T11:03:27.487
> 
> 标签：c#, filestream

`Filestream`我不明白C# 的一种行为。我有一个文件。该文件包含一个长度为 3 的字符串。当我打开一个文件流并用长度为六个字符的字符串覆盖它时，它包含新字符串但只有前三个字符。它被截断为之前的长度。

```
using (FileStream fs = File.open(rootPath + filePath, FileMode.Truncate, FileAccess.Write, FileShare.None))
{
   bool write = fs.CanWrite;
   bool canSeek = fs.CanSeek;

   byte[] data = Encoding.ASCII.GetBytes(sixchars);

   fs.Write(data, 0, data.Length);
   fs.Flush();               
} 
```

那么为什么会这样，我该如何解决？

我也试过`FileMode.Create`了。`CanWrite`并且`CanSeek`是`true`；

**编辑**

好的，这里有一个可以编译的代码示例。我在 Windows 资源管理器中创建了该文件，之前将“123”写入其中。

```
 string  path = @"C:\1\test.txt";

 using (FileStream fs = File.Open(path , FileMode.Truncate, FileAccess.Write, FileShare.None))
        {
            byte[] data = Encoding.ASCII.GetBytes("666666");

            fs.Write(data, 0, data.Length);
            fs.Flush();
        } 
```

我也试过

```
 File.WriteAllText(path , "666666"); 
```

和

```
 byte[] datas = Encoding.ASCII.GetBytes("666666");
            File.WriteAllBytes(path , datas); 
```

毕竟结果仍然是 666 而不是 666666。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:33:21.483

尝试使用

```
File.WriteAllText(Path.Combine(rootPath, filePath), sixchars, Encoding.ASCII); 
```

的

```
File.WriteAllBytes(Path.Combine(rootPath, filePath), Encoding.ASCII.GetBytes(sixchars)); 
```

# android - 在 ACTION_VIEW 中禁用视频控件

> ID：14233807
> 
> 赞同：0
> 
> 时间：2013-01-09T11:03:29.403
> 
> 标签：android, android-intent

嗨，我的问题是如果我对任何视频使用 ACTION_VIEW，我想禁用或不显示视频控件。我是否需要为 Intent 指定任何额外内容，或者是否有任何适当的方法来实现这一点

以下是供参考的代码

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse(appnamesArray[arg2])); 
```

任何示例链接或代码对我有很大帮助

提前致谢

编辑：

据我了解，action_view 启动默认播放器或用户选择的播放器，因此控件转到播放器，并且意图无法控制隐藏它，因为我使用 videoview 显示来自 url 的视频

```
VideoView videoView = (VideoView) new VideoView(getApplicationContext());
            MediaController mediaController = new MediaController(MainActivity.this);
            mediaController.setAnchorView(videoView);

            Uri video = Uri.parse(appnamesArray[arg2]);
            videoView.setMediaController(null);
            videoView.setVideoURI(video);

            videoView.start();
            setContentView(videoView); 
```

如果有人可以通过执行 ACTION_VIEW 本身来成功，请更新我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:09:37.407

如果您使用该视图`intent`，它将可以选择`video`在所有支持它的播放器中打开。因此，即使某些玩家支持隐藏控件，其他玩家也可能不支持。

最好的解决方案是拥有自己的[视频视图](http://androidfromstart.blogspot.in/2010/05/android-play-video-without-controls.html)。

# javascript - 使用 jquery 获取所有文本节点

> ID：14233808
> 
> 赞同：2
> 
> 时间：2013-01-09T11:03:30.660
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何使用 jQuery 选择文本节点？](https://stackoverflow.com/questions/298750/how-do-i-select-text-nodes-with-jquery)

在 jquery 中，我们可以使用以下方法选择一个元素：

```
$(#elem).get(); 
```

他们是一种使用 jquery 选择元素的所有文本节点的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T11:06:38.770

尝试这个，

```
$('#elem *').contents().filter(function() { 
    return (this.nodeType == 3); 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T11:04:49.760

[这](https://stackoverflow.com/questions/298750/how-do-i-select-text-nodes-with-jquery)是同一个问题

尝试这个：

```
$(elem)
  .contents()
  .filter(function() {
    return this.nodeType === 3; //Node.TEXT_NODE
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T11:06:42.147

您可以使用 .text() 来获取元素的文本，但我不知道这是否会完全符合您的要求。您的问题尚不清楚，但是您是否正在寻找与 XSLT 中相同的方式仅匹配文本节点的内容？例如，像这样的片段：

```
<p>This is <strong>a typical</strong> line of <em>text</em> 
```

将在 XSLT 中产生 4 个匹配的文本节点。这是你的意思吗？

# c# - 发布asp.net网站返回解决方案

> ID：14233809
> 
> 赞同：0
> 
> 时间：2013-01-09T11:03:33.190
> 
> 标签：c#, asp.net-mvc

我在服务器上有一个已发布的 asp.net 网站，我需要将其恢复为编辑等解决方案。是否有任何工具可以让我恢复解决方案？

[Ilspy](http://ilspy.net/)没有为我这样做，

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:05:59.610

您应该寻找 .Net Decompiler 工具。

[.NET Framework 的反编译器工具](http://blogs.msdn.com/b/amb/archive/2011/05/24/decompiling-tools-for-net-framework.aspx)

一些流行的工具是：

*   [.NET 反射器](http://www.reflector.net/)
*   [JustDecompile](http://www.telerik.com/products/decompiler.aspx)（免费）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:16:43.827

假设您只有页面的编译版本，这可能会变得非常棘手。

您将需要对每个程序集使用反编译器。像 Habib 已经建议的那样，易于使用的反编译器是 .NET Reflector 和 JustDecompile。如果您已经在使用**ReSharper**，则当前版本具有内置的反编译器 ( **dotPeek )，您也可以在**[http://www.jetbrains.com/decompiler](http://www.jetbrains.com/decompiler)单独免费下载。

问题是反编译器并没有真正重建你的代码，就像它最初一样，你可能仍然需要手动修改。如果代码是在“优化代码”设置设置为 的情况下编译的，则尤其如此`true`。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T11:20:39.943

我对[dotPeek有很好的体验](http://www.jetbrains.com/decompiler/)

# mod-rewrite - 创建通配符子域不起作用

> ID：14233811
> 
> 赞同：1
> 
> 时间：2013-01-09T11:03:42.877
> 
> 标签：mod-rewrite, subdomain, wildcard

我想为 mysql 数据库中的每个用户创建一个通配符子域。子域有效，但页面加载时没有相关文件（css、js）。

用户页面列表：

```
website.com/user/index.php 
```

用户页面：

```
website.com/user/userpage/user.php?username=john 
```

这是我的重写代码：

```
Options +FollowSymLinks

RewriteEngine On

RewriteCond %{HTTP_HOST} !^www.website.com/user/user.php$ 
RewriteCond %{HTTP_HOST} ^(.*?).website.com$ 
RewriteRule (.*)    user.php?username=%1 
```

我的重写代码有什么问题吗？. 感谢：D

**编辑**

忘了一件事，这是我的通配符 *.website.com 目录：

```
public_html/user 
```

感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:03:40.260

这一行看起来不对：

```
RewriteCond %{HTTP_HOST} !^www.website.com/user/user.php$ 
```

该`%{HTTP_HOST}`变量仅用于匹配主机名，而不是路径 ( `/user/user.php`)；此外，您应该转义点（它们是正则表达式中的保留字符），因此您应该将其更改为：

```
RewriteCond %{HTTP_HOST} !^www\.website\.com 
```

您可能对Apache 文档[的这个页面感兴趣。](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html#ToC1)

# c# - 我应该如何使用来自 RavenDB 查询的异构文档？

> ID：14233813
> 
> 赞同：1
> 
> 时间：2013-01-09T11:03:46.220
> 
> 标签：c#, .net, linq, ravendb

在查询返回异构文档的索引时，处理结果集的最佳™/最广泛使用/最广泛接受的方式是什么？

一个明显的答案是将它们作为通用的基本类型加载，然后向上转换为更具体的类型，但这似乎不可扩展。

我可以看到这是相关的一个常见场景是在搜索中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:04:32.163

如果仔细观察，您会发现结果*已经*是POCO。raven 客户端根据其`Raven-Entity-Name`元数据对它们进行补充。

当然，您可以使用通用的基本类型或接口。如果你有很多不相关的数据，你可以使用`object`. 然后稍后在您的应用程序中，您可以过滤它们并适当地投射它们，或者按原样使用它们。

试试这个作为一个实验。存储三个独立的不相关实体类型的一些文档并将它们多映射回来。或者反对返回多种不同文档类型的任何索引。哎呀，即使`Raven/DocumentsByEntityName`是工作室建造也应该这样做。像这样查询这个索引：

```
var results = session.Query<object>("Raven/DocumentsByEntityName"); 
```

*（与往常一样，等待非陈旧的结果，ToList 等）*

设置断点并查看返回的结果。它们确实都是正确的类型，它们只是不同的类型，具体取决于返回的文档。对他们做你想做的事。

# php - 带有 MySQL 查询的 Wordpress 中的 PHP/HTML 表单

> ID：14233816
> 
> 赞同：0
> 
> 时间：2013-01-09T11:04:04.903
> 
> 标签：php, html, wordpress, plugins

我正在尝试检索我使用[此插件](http://wordpress.org/extend/plugins/groups/)设置的 Wordpress 用户组列表，并让用户能够使用[此插件](http://wordpress.org/extend/plugins/email-users/)单独向每个组发送电子邮件。这基本上复制了一个列表服务。

在安装这两个插件并设置组列表后，电子邮件插件显示的是 Wordpress 角色，即编辑/订阅者等，而不是我的自定义组。所以，我打开了发送群发邮件的表格，这[是原来的主干](http://subversion.assembla.com/svn/rotarywebproject/trunk/wp-content/plugins/email-users-rwp/email_users_group_mail_form.php)。

现在从第 97 行修改到第 119 行后，我得到了这样的结果：

```
<select id="send_roles" name="send_roles[]" multiple="multiple"
        size="8" style="width: 654px; height: 250px;">
            <?php
                $roles = mailusers_get_roles($user_ID, MAILUSERS_ACCEPT_MASS_EMAIL_USER_META);
                foreach ($roles as $key => $value) {
            ?>

<?php
$data = mysql_query("SELECT * FROM wp_groups_group") 
or die(mysql_error()); 
while($info = mysql_fetch_array( $data )) 
{ ?>
<option value="<?php echo $key; ?>" <?php
                    echo (in_array($key, $send_roles) ? ' selected="yes"' : '');?>>
                    <?php
                        printf('%s - %s', __('Group', MAILUSERS_I18N_DOMAIN), $info['name']);
 } 
 ?>
        </option>
            <?php
                }
            ?>
</select> 
```

这很棒，它显示了电子邮件表单。现在有了我的用户组列表，唯一的问题是，无论我选择哪个电子邮件组，它总是将电子邮件发送给所有组中的所有用户。提交表单后，组显示为全部被选中，而不仅仅是我选择的组。

如果有人可以提供帮助，我将不胜感激！

我在 Wordpress 3.5 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:43:48.413

这是一个精简的（非 Wordpress）HTML 演示，可帮助您揭示代码的问题：

```
<html>
<body>

    <?php if ($_POST): ?>
        <?php print_r($_POST); ?>
    <?php endif; ?>

    <form method="post">

        <select id="send_roles"
                name="send_roles[]"
                multiple="multiple"
                size="8"
                style="width: 654px; height: 250px;"
        >
            <option value="registered">Group - Registered</option>
            <option value="mens">Group - Mens group</option>
            <option value="monday">Group - Monday night</option>
            <option value="tueday">Group - Tuesday Night</option>
            <option value="unaffiliated">Group - Unaffiliated</option>
            <option value="alumni">Group - Alumni</option>
        </select>

        <input type="submit" value="Submit" />

    </form>
</body>
</html> 
```

您有两个问题（在示例中均已解决）：

*   您的选项值都相同，这些需要不同
*   每个选项值都没有关闭，除了最后一个

因此，看起来来自的值`mailusers_get_roles()`有问题 - 不要让它们中的每一个都成为“订阅者”。此外，将to 移到`</option>`前面的大括号之前，根据需要打开/关闭 PHP 标记。

# iphone - 与之前版本的 xcode 相比，ios 6 有哪些变化？

> ID：14233818
> 
> 赞同：-1
> 
> 时间：2013-01-09T11:04:20.977
> 
> 标签：iphone, objective-c, ipad

我在 ios 4.1 中构建了一个应用程序，但现在我使用 ios 6 来构建它，但是 pushviewcontroller 和方向方法存在问题。那么谁能告诉我 ios 6 带来了哪些变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:11:01.683

我认为最好的解决方案是坚持苹果官方文档。因此，据我所知，我使用以下方法，并且在 iOS 5 和 6 上一切都运行良好。在您的所有 ViewControllers 中覆盖以下方法。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return UIInterfaceOrientationIsPortrait(interfaceOrientation);
} 
```

iOS 6 的方法，第一个方法返回支持的方向掩码（如其名称所示），您可以将其更改为横向或最适合您的套件。

```
-(NSInteger)supportedInterfaceOrientations{

    return UIInterfaceOrientationMaskPortrait; //UIInterfaceOrientationMaskPortrait or LandscapeLeft ... 
} 
```

第二个就是告诉您的 VC，当 VC 将要显示时，哪个是首选界面方向。

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait; //tells your VC in which orientation it should be presented, if you set Porttrait it would be in Portrait or otherwise ...
} 
```

此解决方案有效

# css - ZURB 基金会：“清除”图像不会改变

> ID：14233826
> 
> 赞同：0
> 
> 时间：2013-01-09T11:04:48.653
> 
> 标签：css, zurb-foundation

我刚刚复制了示例代码，但无法正常工作。

示例：http: [//goo.gl/wrw2v](http://goo.gl/wrw2v)

当我点击缩略图时，缩略图有不同的大小，大图像不会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:12:58.413

它不是相同的html结构。第二张图片未包含在`<a></a>`.

# android - TabPageIndicator ：想要自定义高度，而不是 wrap_content。选项卡标题未显示全文

> ID：14233831
> 
> 赞同：0
> 
> 时间：2013-01-09T11:04:52.537
> 
> 标签：android, android-fragments, android-fragmentactivity, viewpagerindicator, viewpage

我正在使用`TabPageIndicator`with ，从[这里](https://github.com/JakeWharton/Android-ViewPagerIndicator)`ViewPager`引用。我的布局 XML 如下：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

     <com.viewpagerindicator.TabPageIndicator
        android:id="@+id/indicator"
        android:layout_height="35dp"
        android:layout_gravity="center_vertical"
        android:layout_width="fill_parent"
        android:paddingTop="0dp"
        android:paddingBottom="0dp"
        android:layout_margin="0dp"
        android:background="#69cbd8"
        />

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        />

</LinearLayout> 
```

在 中`Manifest`，活动定义如下：

```
 <activity
            android:name=".modules.results.ResultsLauncher"
            android:configChanges="orientation|screenSize"
            android:theme="@style/StyledIndicators">
            >
            <!-- android:label="Titles/With Listener" -->
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="com.jakewharton.android.viewpagerindicator.sample.SAMPLE" />
            </intent-filter>
        </activity> 
```

如您所见，我使用了自定义样式，`StyledIndicators`. 我参考了从 GITHUB 下载的示例，并从[这里](https://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/library/res/values/vpi__styles.xml)参考了自定义样式。

现在一切正常。但是标签标题的底部被覆盖了。并在上面留下不必要的空间。我无法显示选项卡的整个标题。我附上了我的屏幕截图。

我希望将标题“按日期”和“按测试”放在上部。但找不到解决办法。

![在此处输入图像描述](../Images/602fd30db621a064a4b67ba01c66a308.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:45:33.210

为了完全控制您的`tabPageIndicator`：

`tabPageIndicator`创建 XML 文件并在组件中扩展该 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <include
        android:id="@+id/tab_inbox"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        layout="@layout/tab_inbox" />

    <include
        android:id="@+id/tab_dialer"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        layout="@layout/tab_dialer" />
</LinearLayout> 
```

并从代码中膨胀该布局

# jquery - 获取每个跨度高度，如果超过 40px，则更改 css

> ID：14233832
> 
> 赞同：0
> 
> 时间：2013-01-09T11:05:00.067
> 
> 标签：jquery

谁能帮帮我，我不明白错误在哪里。

这是我的 jQuery：

```
function altezzadotgrey(){
    $('.views-field-title').each(function(){
        var aaltezzadotgrey = $(this).outerHeight();
        if ($(this).outerHeight() > 40) {
            $(this).css("margin-top", "-45px");
        }
    });
} 
```

这是我的 HTML：

```
<div class="views-row">
    <div class="views-field-title">
        <span class="field-content"><a href="">a</a></span>
    </div>
</div>
<div class="views-row">
    <div class="views-field-title">
        <span class="field-content"><a href="">b</a></span>
    </div>
</div>
<div class="views-row">
    <div class="views-field-title">
        <span class="field-content"><a href="">c</a></span>
    </div>
</div>
<div class="views-row">
    <div class="views-field-title">
        <span class="field-content"><a href="">d</a></span>
    </div>
</div> 
```

我认为可能有问题`each()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:29:06.437

jQuery.css 使用“DOM 样式”属性而不是 CSS 样式，所以你这样：

```
$(this).css("marginTop", -45); 
```

见这里：http: [//jsfiddle.net/4upSX/1/](http://jsfiddle.net/4upSX/1/)

实际上它也适用于“margin-top”......所以你确定你的'.views-field-title'实际上高于40px吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:10:51.313

```
function altezzadotgrey(){

  $('.field-content').each(function(){

        var h= $(this).css('height');
        if (parseInt(h)  > 40) {
            $(this).css("margin-top","-45px"); 
        }
    });
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:46:50.767

你只需要在身体负荷上调用你的函数

```
$( function() {    
    altezzadotgrey();    
});

function altezzadotgrey(){
    $('.views-field-title').each(function(){
        var aaltezzadotgrey = $(this).outerHeight();
        if ($(this).outerHeight() > 40) {
            $(this).css("margin-top", "-45px");
        }
    });
} 
```

其他一切都是正确的

# php - 如何检查请求是否带有正确的 ssl 证书

> ID：14233834
> 
> 赞同：0
> 
> 时间：2013-01-09T11:05:12.700
> 
> 标签：php, ssl

我在服务器上有一个 php 文件。某些服务会向该文件发送请求，我想检查变量：`SSL_CLIENT_VERIFY, SSL_CLIENT_S_DN_O, SSL_CLIENT_S_DN_L, SSL_CLIENT_S_DN_CN, SSL_CLIENT_S_DN_C, SSL_CLIENT_I_DN_O, SSL_CLIENT_I_DN_CN, SSL_CLIENT_I_DN_C` 是否具有正确的值。

如何在 PHP 中检查它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:49:41.590

假设您使用的是 Apache Httpd，您应该能够使用（例如）访问[SSL 环境变量](http://httpd.apache.org/docs/2.2/mod/mod_ssl.html#envvars)。[`$_SERVER`](http://php.net/manual/en/reserved.variables.server.php)`$_SERVER['SSL_CLIENT_S_DN_CN']`

您还需要确保[`SSLOptions`](http://httpd.apache.org/docs/2.2/mod/mod_ssl.html#ssloptions)为要使用的这些变量相应地配置了指令。

# python - scikit-learn：分类时间正确吗？

> ID：14233836
> 
> 赞同：0
> 
> 时间：2013-01-09T11:05:22.663
> 
> 标签：python, numpy, scipy, scikit-learn

嗨，我将推文分为 7 类。我有大约 250.000 条训练推文和另外 250.000 条不同的测试推文。我的代码可以在下面找到。training.pkl 是训练推文， testing.pkl 是测试推文。如您所见，我也有相应的标签。

当我执行我的代码时，我发现将测试集（原始）转换为特征空间需要 14.9649999142 秒。我还测量了对测试集中的所有推文进行分类所需的时间，即 0.131999969482 秒。

尽管在我看来，这个框架不太可能在 0.131999969482 秒内对大约 250.000 条推文进行分类。我现在的问题是，这是正确的吗？

```
file = open("training.pkl", 'rb')
training = cPickle.load(file)
file.close()

file = open("testing.pkl", 'rb')
testing = cPickle.load(file)
file.close()

file = open("ground_truth_testing.pkl", 'rb')
ground_truth_testing = cPickle.load(file)
file.close()

file = open("ground_truth_training.pkl", 'rb')
ground_truth_training = cPickle.load(file)
file.close()

print 'data loaded'
tweetsTestArray = np.array(testing)
tweetsTrainingArray = np.array(training)
y_train = np.array(ground_truth_training)

# Transform dataset to a design matrix with TFIDF and 1,2 gram
vectorizer = TfidfVectorizer(sublinear_tf=True, max_df=0.5,  ngram_range=(1, 2))

X_train = vectorizer.fit_transform(tweetsTrainingArray)
print "n_samples: %d, n_features: %d" % X_train.shape

print 'COUNT'
_t0 = time.time()
X_test = vectorizer.transform(tweetsTestArray)
print "n_samples: %d, n_features: %d" % X_test.shape
_t1 =  time.time()

print  _t1 - _t0
print 'STOP'

# TRAINING & TESTING

print 'SUPERVISED'
print '----------------------------------------------------------'
print 

print 'SGD'

#Initialize Stochastic Gradient Decent
sgd = linear_model.SGDClassifier(loss='modified_huber',alpha = 0.00003, n_iter = 25)

#Train
sgd.fit(X_train, ground_truth_training)

#Predict

print "START COUNT"
_t2 = time.time()
target_sgd = sgd.predict(X_test)
_t3 = time.time()

print _t3 -_t2
print "END COUNT"

# Print report
report_sgd = classification_report(ground_truth_testing, target_sgd)
print report_sgd
print 
```

X_train 打印

```
 <248892x213162 sparse matrix of type '<type 'numpy.float64'>'
    with 4346880 stored elements in Compressed Sparse Row format> 
```

X_train 打印

```
 <249993x213162 sparse matrix of type '<type 'numpy.float64'>'
    with 4205309 stored elements in Compressed Sparse Row format> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:51:53.700

`X_train`提取和`X_test`稀疏矩阵中非零特征的形状和数量是多少？它们是否与您的语料库中的单词数量大致相关？

分类预计比线性模型的特征提取快得多。它只是计算一个点积，因此与非零的数量直接线性（即近似于测试集中的单词数）。

**编辑**：获取稀疏矩阵内容的统计信息，`X_train`然后`X_test`执行以下操作：

```
>>> print repr(X_train)
>>> print repr(X_test) 
```

**编辑2**：你的数字看起来不错。对数值特征的线性模型预测确实比特征提取快得多：

```
>>> from sklearn.datasets import fetch_20newsgroups
>>> from sklearn.feature_extraction.text import TfidfVectorizer
>>> twenty = fetch_20newsgroups()
>>> %time X = TfidfVectorizer().fit_transform(twenty.data)
CPU times: user 10.74 s, sys: 0.32 s, total: 11.06 s
Wall time: 11.04 s

>>> X
<11314x56436 sparse matrix of type '<type 'numpy.float64'>'
    with 1713894 stored elements in Compressed Sparse Row format>
>>> from sklearn.linear_model import SGDClassifier

>>> %time clf = SGDClassifier().fit(X, twenty.target)
CPU times: user 0.50 s, sys: 0.01 s, total: 0.51 s
Wall time: 0.51 s

>>> %time clf.predict(X)
CPU times: user 0.10 s, sys: 0.00 s, total: 0.11 s
Wall time: 0.11 s
array([7, 4, 4, ..., 3, 1, 8]) 
```

# winapi - 由系统页面文件备份的内存映射文件

> ID：14233840
> 
> 赞同：1
> 
> 时间：2013-01-09T11:05:40.460
> 
> 标签：winapi, memory-management, memory-mapped-files, win32-process, pagefile

我有一个使用由系统页面文件备份的 MMF 的软件。该应用程序使用 MMF 来缓存大图像。写入和读取操作以非常高的频率发生。

虽然我可以清楚地看到使用 MMF 的性能提升，但我仍然想知道什么是更好的方法，将 MMF 映射到常规文件，或映射到系统页面文件。

我想知道这里是否有人可以对此提供一些见解，将其映射到系统页面文件或仅映射到另一个文件会更好吗？

注意：我的问题一般**不是**关于 MMF，我不知道是否使用 MMF，我只是想知道应该将 MMF 映射到哪里。

对此有何见解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:08:10.587

底层机制和性能是相同的，主要区别在于您与系统中的所有其他进程共享页面文件，因此如果您有大量数据，您可能会遇到页面文件的大小限制。

# java - Java hashmap键值迭代器

> ID：14233849
> 
> 赞同：1
> 
> 时间：2013-01-09T11:06:25.920
> 
> 标签：java, hashmap

当我打印这个哈希图时，我有一个哈希图，输出是这样的

```
{KEY_CH_UP=KEY_CH_UP, KEY_PANEL_CH_UP=KEY_PANEL_CH_UP, KEY_7=KEY_7, KEY_6=KEY_6, KEY_5=null} 
```

现在我想得到所有的钥匙

```
values == null ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:08:16.930

遍历下面的类似内容并检查该值是否为 null ：

```
Map<String, String> map = new HashMap<String, String>();
        for(Map.Entry<String, String> en: map.entrySet()){
            if(en.getValue()==null){
                System.out.println(en.getKey());
            }
        } 
```

# php - 如何防止来自 Internet Download Manager IDM 的文件 HotLink

> ID：14233850
> 
> 赞同：11
> 
> 时间：2013-01-09T11:06:25.483
> 
> 标签：php, .htaccess, streaming, hotlinking

在修复媒体文件热链接或使用 IDM 下载时遇到一些问题，正在使用 PHP 提供视频文件并且工作正常，但我注意到安装在我的计算机上的 IDM 能够将下载框添加到我正在使用 jwplayer 播放的视频中. 我改变了代码的结构并添加了htaccess来重写链接，这样直接访问文件就不会显示了。

`mysite.com/file.php?myvideo.flv -> mysite.com/api/file/JU78vhx5uh`

我能够在 JWPlayer 中实现这一点，它在使用 PHP 服务时可以工作，但是相同的 IDM 获取我的视频文件，我搜索其他方法，即 htaccess，它在下面

```
RewriteEngine on

RewriteCond %{HTTP_REFERER} !^http://(.+\.)?mysite\.com/ [NC]

RewriteCond %{HTTP_REFERER} !^$

RewriteRule .*\.(mp4|flv|mp4|mp3)$ /video/thieve.flv [L] 
```

这仅适用于网络浏览器并且不会停止 IDM 软件，我找到了另一个 PHP 引用验证器，它检查引用链接。

```
if (strpos($_SERVER['HTTP_REFERER'],'mysite.com')===0)

 {
    header("Location: whatever.php"};
 }else{
    header("Location: index.php");
 } 
```

**注意：**我发现 IDM 将此信息发送到我的脚本

1.  用户代理：`Mozilla/4.0%20(compatible;%20MSIE%208.0;%20Windows%20NT%206.0;%20Trident/4.0)`

2.  Http_referer：（`mysite.com/api/file/JU78vhx5uh`与播放我视频的页面相同）。

请问我还有什么方法可以防止这个软件的热链接，因为这个网站提供免费的视频流，我不想下载我的视频。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T15:14:50.743

一般来说，阻止用户下载您的视频的唯一方法是真正通过服务器流式传输它们。通过显示已预加载的视频帧的“模拟流”将始终以一种或另一种方式“破解”，因为最终您需要播放器软件知道地址 - 这当然是完整的 .avi/.mp4/。任何。

有相当多的流媒体服务器，也有一些开源的。一个好的起点可能是[这个列表](http://en.wikipedia.org/wiki/List_of_streaming_media_systems#Servers)。对于 Linux，Darwin 可能是最好的选择之一。

一旦您真正流式传输您的内容，只有非常高级的用户才能使用流式抓取器抓取您的内容（我认为甚至有些服务器无法使用，例如 Adob​​e 的流式传输解决方案）。

# orbeon - Orbeon：表单生成器中的表单验证

> ID：14233851
> 
> 赞同：0
> 
> 时间：2013-01-09T11:06:26.283
> 
> 标签：orbeon

1.  我使用了电子邮件地址控件，但如何使用 xforms:email 数据类型在源代码中使用：

    ```
    <xsd:simpleType name="email">
      <xsd:restriction base="xsd:string">
        <xsd:pattern value="[A-Za-z0-9!#-'\*\+\-/=\?\^_`\{-~]+(\.[A-Za-z0-9!#-'\*\+\-/=\?\^_`\{-~]+)*@[A-Za-z0-9!#-'\*\+\-/=\?\^_`\{-~]+(\.[A-Za-z0-9!#-'\*\+\-/=\?\^_`\{-~]+)*"/>
      </xsd:restriction>
    </xsd:simpleType> 
    ```

    XForms 支持这一点，但是如何在 orbeon 表单生成器生成的源代码中使用呢？

2.  假设一个候选名称，如果用户不提供它应该显示错误消息丢失或不正确的值，这很好。但如果用户输入超过 30 个字符，则应显示错误消息“超出最大长度”。

    但是我们无法清楚地知道该怎么做。您可以通过编辑我现在发送的源代码来做到这一点，以便我们可以在我们的应用程序中使用它并且我们可以了解它是如何工作的。

    您能否通过发送这两件事的示例代码来帮助我们，以便我们可以通过编辑从 Form Builder 生成的源代码来使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:51:11.853

1.  如果您在构建器的验证属性中使用“电子邮件地址”类型，表单构建器会将该`xforms:email`类型放置在`xforms:bind`与控件关联的元素上，如下所示：

    ```
    <xforms:bind id="my-email-bind" name="my-email" ref="my-email" type="xforms:email"/> 
    ```

    您可以通过使用“编辑源”检查表单的源来查看这一点。因此，您不必`xforms:email`自己明确输入类型。

2.  目前，您无法轻松地为构建器中的控件提供多个错误消息。你当然可以：

    1.  使控件成为必需：“验证属性”→“是”
    2.  检查其长度：`string-length() le 30`在“验证属性”→“约束”下

# c++ - 条件运算符可以返回引用吗？

> ID：14233852
> 
> 赞同：5
> 
> 时间：2013-01-09T11:06:35.927
> 
> 标签：c++, conditional-operator

我遇到了一行代码，从没想过它会很好用。我认为条件运算符返回值并且不适用于参考。

一些伪代码：

```
#include <iostream>

using namespace std;

class A {
public:
  A(int input) : v(input) {};
  void print() const { cout << "print: " << v  << " @ " << this << endl; }
  int v;
private:
  //A A(const A&);
  //A operator=(const A&);
};

class C {
public:
  C(int in1, int in2): a(in1), b(in2) {}
  const A& getA() { return a;}
  const A& getB() { return b;}
  A a;
  A b;
};

int main() {
  bool test = false;
  C c(1,2);
  cout << "A @ " << &(c.getA()) << endl;
  cout << "B @ " << &(c.getB()) << endl;

  (test ? c.getA() : c.getB()).print();  // its working
} 
```

有人可以解释吗？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T11:10:52.360

您对条件运算符的假设是错误的。表达式的类型是表达式`c.getA()`和`c.getB()`​​具有的任何类型，如果它们具有相同的类型，并且如果它们表示左值，那么整个表达式也是如此。（确切的规则在 C++ 标准的 §5.16 中。）

你甚至可以这样做：

```
(condition? a: b) = value; 
```

有条件地设置`a`或`b`为`value`。请注意，这是特定于 C++ 的；在 C 中，条件运算符不表示左值。

# c++ - C++ 单元测试和存根第三方 C 库

> ID：14233853
> 
> 赞同：4
> 
> 时间：2013-01-09T11:06:36.217
> 
> 标签：c++, c, unit-testing, googlemock

我需要对一些我编写的使用 3rd 方 C 库的 C++ 对象进行单元测试。由于超出此问题范围的原因，我不能直接调用第 3 方 C 库，需要将其存根用于测试套件。

对于我们使用的单元测试套件的其他部分`googlemock`，但我认为它不能用于`C`库。我可以手动存根库，但不喜欢（部分是由于懒惰（它相当大），但主要是因为它只是一个原则问题）。

所以这是我的问题：是否有一个工具可以根据`C`库头文件生成存根代码？一旦我有了 stubbed-out 代码，我将对它做一些小的修改，然后我将链接它以进行单元测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:14:08.883

[stubgen](http://www.radwin.org/michael/2011/05/10/stubgen/)可以从头文件生成存根成员，除非你有特殊要求，它应该能够做你正在寻找的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T11:29:14.083

您不能将这些调用包装在[http://code.google.com/p/googlemock/wiki/CookBook#Mocking_Free_Functions中描述的类中](http://code.google.com/p/googlemock/wiki/CookBook#Mocking_Free_Functions)

然后您可以注入（以动态或静态方式）该类并对其设置期望。

# iphone - 如何管理添加到 UIView 中的子视图？

> ID：14233859
> 
> 赞同：0
> 
> 时间：2013-01-09T11:06:54.187
> 
> 标签：iphone, ios, cocoa-touch, uiview, uilabel

我在清除视图时遇到问题，对于特定情况，我一直在将用户名作为标签添加到视图中，根据情况我可能有多个用户，现在我的问题是，对于一种情况，我想清除视图而不弹出它，我不知道如何删除那些添加的标签，我有一个想法，我可以为每个标签设置标签，我可以稍后使用它来清除。在这种特殊情况下，还有任何其他有效的方法。

希望我的问题很清楚谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:11:06.343

采用

```
for (UIView* view in self.view.subviews) {
    if(view isKindOfClass:[UILabel class]) {
        //do whatever you want to do
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:10:36.927

您可以像这样删除所有子视图：

```
for (UIView *subView in [view subviews])
    [subView removeFromSuperview]; 
```

或者，如果您想访问标签值为 n 的特定视图，

```
UIView *subview = [view viewWithTag:n] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:11:23.093

您可以通过以下方式进行

```
for (UIView *view in [self.view subviews])
{
    if ([view isKindOfClass:[UILabel class]])
    {
        [view removeFromSuperview];
    }
} 
```

希望你问这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T11:11:41.110

```
[labelName removeFromSuperview]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T11:13:30.880

用这个 ：

```
for(id viewSub in self.view.subviews)
    {
        [viewSub removeFromSuperview];
    } 
```

这将删除 View 的所有子视图

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T11:15:00.273

试试这个：

```
for (UIView *v in [self.relatedView subviews])
{
    [v removeFromSuperview];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-09T11:21:43.690

调用以下方法并将“UIWebView”对象作为参数传递：

```
+(void)removeAllSubViews:(id)pObj
{
    NSArray *Array = [pObj subviews];
    for(int index = 0; index < [Array count]; index++)
    {
        [[Array objectAtIndex:index] removeFromSuperview];
    }
} 
```

如果您想要任何特定对象，也可以像这样检查对象：

```
if(view isKindOfClass:[UILabel class]) {
    //do whatever you want to do
} 
```

干杯!

# php - 防止强制下载

> ID：14233862
> 
> 赞同：0
> 
> 时间：2013-01-09T11:07:03.923
> 
> 标签：php

我正在使用下面提到的代码 (get_data.php) 将 JSON 数据发送到 AJAX 调用。我想包含相同的 PHP 文件来获取 count($ret)。当我包含此文件时，无法获取 count($ret) 但文件会被强制下载。如果我删除“header（”Content-type：text/json“）；” 它可以工作，但我需要它来发送 JSON 响应。包含此文件时，任何人都可以帮助我避免强制下载吗？

获取数据.php：

```
<?php
    header("Content-type: text/json");
    include('connect.php');
    global $conn;
    $site_id = $_GET['site_id'];
    $dbh = $conn->prepare('SELECT UNIX_TIMESTAMP(current_ts), response_time FROM site_response WHERE current_ts >= DATE_SUB( NOW( ) , INTERVAL 30 MINUTE ) AND site_id ='.$site_id.'');
    $dbh->bindParam(':site_id', $site_id);
    $dbh->execute();
    $graph_data = $dbh->fetchAll();
    $ret = array();
        foreach($graph_data as $data)
        {
            $current_time = $data['UNIX_TIMESTAMP(current_ts)']*1000;
            $response_time = $data['response_time']*1;  
            $ret[] = array($current_time, $response_time);                  
        } 
        echo json_encode($ret);

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:08:15.620

正确的 mime 类型是`application/json`

# postgresql - PostgreSQL JOIN，在后台

> ID：14233863
> 
> 赞同：0
> 
> 时间：2013-01-09T11:07:09.633
> 
> 标签：postgresql, disk, disk-access

我对 PostgreSQL 加入有疑问。PostgreSQL 是否为 JOINed 表创建临时表，或者它使所有内容都
没有任何临时表？

我的问题的原因是：当我使用许多 JOIN 发出 SELECT 请求时，我看到写操作中的 IO 峰值。这个问题的原因是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:11:47.927

如果结果集足够大，PostgreSQL 将暂时将结果集溢出到磁盘。除非您的数据库小于 RAM，否则它没有太多选择。

但是，如果这是自数据页创建以来您第一次读取数据页，您也可能会看到意外写入。每个页面上都设置了“提示位”以优化可见性检查。这些在清理等或访问页面时设置。如果您在进行表扫描之后执行大型导入，您可能会得到很多意外的 IO，因为所有提示位都被设置并写出。

# svn - PHPStorm SSH服务器指纹不匹配

> ID：14233866
> 
> 赞同：3
> 
> 时间：2013-01-09T11:07:26.663
> 
> 标签：svn, ssh, phpstorm, fingerprint, rsa-key-fingerprint

我在 PHPStorm 中使用 subversion，当我尝试连接到 SVN 服务器时出现以下错误...

> 无法建立主机svn+ssh://svn.example.com:22的真实性。ssh-rsa 密钥指纹是
> 
> xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx
> 
> 确定要继续连接吗？

问题是指纹与服务器的指纹不匹配。如果我从 ~/.ssh/known_hosts 文件中删除服务器，然后 ssh 到它会显示一个完全不同的指纹 - 这是该服务器的正确指纹。

我刚刚将 SVN 存储库移动到新服务器，并将 DNS 更改为指向新服务器，所以我期待 PHPStorm 抱怨指纹不匹配，但我很惊讶它没有显示新服务器的正确指纹. 指纹也不匹配旧服务器，或者 PHPStorm 曾经连接到的任何其他服务器。在我了解发生了什么之前，我很担心让它连接起来。

PHPStorm 正确连接到新服务器，所以我看不出它是如何获得错误的指纹的，而且我似乎不太可能在中间攻击中看到一个真正的人，因为每当我从命令行 ssh 时它看到正确的指纹。

我不确定 PHPStorm 在哪里缓存服务器指纹。我尝试过使缓存无效，看看这是否会使其忘记任何过时的指纹数据，但鉴于报告的指纹与旧服务器或新服务器不匹配，这似乎不太可能。

我得出的结论是这是 PHPStorm 中的一个错误，但任何其他想法都会非常受欢迎。

编辑：

PHPStorm 显示一个 20 字节的指纹。在服务器上运行它（debian）

ssh-keygen -l -f /etc/ssh/ssh_host_rsa_key

显示一个 16 字节的指纹，因此它们不可能匹配。有没有办法从服务器的公钥中获取 20 字节的指纹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:29:58.287

所以事实证明 PHPStorm 显示的 160 位（20 字节）哈希是 SHA1 哈希，而 ssh-keygen 显示的是 128 位（16 字节）MD5 哈希。

两者都不是很明确，所以我刚刚编写了一个快速脚本来显示公钥的各种散列（假设你的公钥在 /etc/ssh/ssh_host_rsa_key.pub

```
#!/usr/bin/python

import binascii
import hashlib

keyfile = "/etc/ssh/ssh_host_rsa_key.pub"

def showHash(type, hash, data):
    hash.update(data)
    hex=hash.hexdigest()
    hexbytes=[hex[i:i+2] for i in range(0, len(hex), 2)]
    hexstring=":".join(hexbytes)
    print type+" "+hexstring

f = open(keyfile)
words = f.readline().split()
data=words[1]
bindata=binascii.a2b_base64(data)

showHash("md5", hashlib.md5(), bindata)
showHash("sha1", hashlib.sha1(), bindata)
showHash("sha256", hashlib.sha256(), bindata) 
```

事实证明 PHPStorm 使用的是 SHA1 哈希，并且非常正确。但是，如果您可以选择在 ssh-keygen（我相信您可以在 sh-keygen-g3 中）或 PHPStorm 中使用哪个散列函数，那将会很有帮助。

# python - Pylint 忽略特定名称

> ID：14233867
> 
> 赞同：7
> 
> 时间：2013-01-09T11:07:33.543
> 
> 标签：python, pylint

我对 pylint 有疑问，即有时它会为某些变量/类/模块等重复相同的消息，而我找不到解决方法。我想说的是 pylint “不要在 [this module|module "ZZZ"] 中检查 [message XXX|any message] 中的变量 YYY”，并带有一些选项或 rcfile 指令。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-31T14:37:07.950

有[`good-names=YYY`](http://pylint.pycqa.org/en/latest/technical_reference/features.html#basic-checker-options)这个，或者对于一些高级的东西，你可以通过修改正则表达式`variable-rgx`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T11:19:58.457

根据[文档](http://www.logilab.org/card/pylint_manual)，您可以使用以下行启用和禁用消息：

```
# pylint: disable=W0631 
```

在python代码中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T13:13:14.960

当前版本的 Pylint 不支持您要求的内容。

您可能想与维护者取得联系并向他们提出功能请求和实现。

# java - 一个 Servlets 线程访问控制

> ID：14233869
> 
> 赞同：0
> 
> 时间：2013-01-09T11:07:45.337
> 
> 标签：java, multithreading, servlets

由dopost / doget调用的servlet方法中的朋友我有一个代码

```
synchronized (this) 
{
String filePath="E:\\FSPATH1\\2KL06CS048\\";
System.out.println("Directory Created   ????????????"+new File(filePath).mkdir());
} 
```

那么上述servlet的多个线程是否可以一次进入上述代码块？

但是 Servlet LifeCycle Concept 说只有一个 Servlet 实例，并且对于该 servlet 的每个请求，都会在该实例上创建一个线程。

其实我的要求是

1.  发出请求（servlet 调用和此 servlet 的工作正在服务器中创建目录）
2.  从 servlet 调用返回后，我将重命名创建的目录。
3.  重命名时，另一个线程不能创建相同的目录并修改目录的内容，因为我想在 servlet 中同步一些代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:13:05.897

[`synchronized`](http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html)确保一次只有一个线程可以执行封闭的块。

还有几点：

1.  synchronized 关键字可以应用于方法或语句块，并为一次只能由一个线程执行的关键部分提供保护。

2.  synchronized 关键字可防止代码的关键部分一次被多个线程执行。

3.  当应用于静态方法时，整个类被锁定，而该方法一次由一个线程执行。

4.  当应用于实例方法时，实例在被一个线程访问时被锁定。

5.  当应用于对象或数组时，对象或数组被锁定，而相关代码块一次由一个线程执行。

请注意，每条语句一次都以**一个线程**结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:47:26.443

**问**：在由 dopost/doget 调用的 servlet 方法中，我有一个代码：`synchronized (this) {}`

**--->** Servlet Container(tomcat) 将为每个请求创建一个线程，因此每次您在`doGet() and doPost()`方法中拥有的内容都将是各个线程的本地内容。所以你不需要再次同步`this`。所以你的想法是完全错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:42:25.640

是的，您的代码将确保只有一个线程可以进入该块。

# mysql - SQL：从一行的一组列中至少获取第三大值

> ID：14233871
> 
> 赞同：6
> 
> 时间：2013-01-09T11:07:48.457
> 
> 标签：mysql, sql, database

我需要一个 SQL 查询来从一行的一组列中获取第二大值。例如，如果这些是我的表的行：

```
id | col1 | col2 | col3 | col4 | coln |
1  |   5  |   7  |   9  |  3   |  10  |
2  |   13 |   14 |   2  |  54  |  11  | 
```

对于 rowid 1 - 我需要值 9， rowid 2 - 我需要值 14

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T11:21:38.363

我担心，如果没有公用表表达式和/或窗口函数，也没有编写程序，这在 MySQL 中会变得非常冗长

```
SELECT t.id, t.val second_largest
-- unpivot your columns into a table
FROM (
  SELECT id, col1 val FROM my_table UNION ALL
  SELECT id, col2     FROM my_table UNION ALL
  SELECT id, col3     FROM my_table UNION ALL
  SELECT id, col4     FROM my_table UNION ALL
  SELECT id, coln     FROM my_table
) t

-- retain only those records, where there exists exactly one record with a
-- column value greater than any other column value with the same id
WHERE 1 = (
  SELECT COUNT(*) 
  -- Here, use unions to be sure that every value appears exactly once
  FROM (
    SELECT id, col1 val FROM my_table UNION
    SELECT id, col2     FROM my_table UNION
    SELECT id, col3     FROM my_table UNION
    SELECT id, col4     FROM my_table UNION
    SELECT id, coln     FROM my_table
  ) u
  WHERE t.id = u.id
  AND t.val < u.val
) 
```

这是用于检查它的[SQLFiddle](http://sqlfiddle.com/#!2/68260/1)（感谢 bluefeet 对模式的提示！）。上述解决方案将在每一行中找到第二大的列值，即使最大的列值出现不止一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T11:21:18.100

您可以通过*取消透视*数据然后将行号应用于`id`组中的每条记录来做到这一点。unpivot 从列布局中获取数据并将其放入行中，以便更容易确定第二高的值：

```
select id, col, value
from
(
  -- assign a group row number to each record 
  select *, 
    @row:=(case when @prev=id and @prevvalue<>value then @row else 0 end) + 1 as rownum,
    @prevvalue:=value,
    @prev:=id pid
  from
  (
    -- unpivot the multi columns into row values
    select id, 'col1' col, col1 value
    from yourtable
    union all
    select id, 'col2' col, col2 value
    from yourtable
    union all
    select id, 'col3' col, col3 value
    from yourtable
    union all
    select id, 'col4' col, col4 value
    from yourtable
    union all
    select id, 'coln' col, coln value
    from yourtable
  ) src
  order by id, value desc
) src
-- apply filter looking for the rownumber = 2 which is the second highest based on order
where rownum = 2 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/16139/21)

结果将显示：

```
| ID |  COL | VALUE |
---------------------
|  1 | col3 |     9 |
|  2 | col2 |    14 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:18:25.737

```
SELECT MAX(col) FROM table WHERE col NOT IN (SELECT MAX(col) FROM table); 
```

这为您提供了特定列中的第二大整数值。

编辑：然后在执行此操作之前将行与列交换。但如果这些列是动态的，那可能会非常棘手。

最好/最简单的方法是直接使用客户端语言而不是 SQL 来执行此特定操作。如果不可能，请检查：[Transpose rows and columns without aggregate](https://stackoverflow.com/questions/12140768/transpose-rows-and-columns-without-aggregate)

# jvm - JVM 运行时如何保持向后兼容性？

> ID：14233872
> 
> 赞同：0
> 
> 时间：2013-01-09T11:07:48.867
> 
> 标签：jvm, backwards-compatibility

我有一个简单的 Java 类，它使用 enum 保留关键字作为变量名。我能够在 Java 1.4 中编译此代码并在 Java 1.6 中执行它：

```
public class Main {

    public static void main(String[] args) {
        String enum = "ENUM String";
        System.out.println(enum);
    }

} 
```

但是，Java 1.6 编译器不会编译此代码，因为 enum 是保留关键字。为什么 Java 1.6 运行时仍然执行这段代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:10:20.877

因为当你编译你的源代码时，它会被转换成 Java 字节码。因此，一旦编译，字符串的名称就真的无关紧要了。

# c# - Reduce 不能在分组中包含 Average() 方法

> ID：14233875
> 
> 赞同：4
> 
> 时间：2013-01-09T11:07:57.677
> 
> 标签：c#, .net, ravendb

刚刚升级到 v2，这不再有效；如果我尝试使用 Count()，我会收到类似的错误

```
public class Deck_Ratings : AbstractIndexCreationTask<DeckRating, Deck_Ratings.ReduceResult>
{
    public class ReduceResult
    {
        public string DeckId { get; set; }
        public int Rating { get; set; }
    }

    public Deck_Ratings()
    {
        Map = deckRatings => deckRatings.Select(deckRating => new 
                             { 
                                 deckRating.DeckId, 
                                 deckRating.Rating 
                             });
        Reduce = reduceResults => reduceResults
                                      .GroupBy(reduceResult => reduceResult.DeckId)
                                      .Select(grouping => new 
                                              {
                                                  DeckId = grouping.Key, 
                                                  Rating = grouping.Average(reduceResult => reduceResult.Rating)
                                               });
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T13:48:16.520

禁止可能受减少批次大小（例如计数和平均）影响的聚合，因为它们会产生错误的结果。您可能已经能够在 1.0 下使用它，但您的平均值可能是错误的，除非您的项目太少以至于它们都在一个减少批次中完成。要了解有关减少批次的更多信息，请阅读[Map / Reduce - A Visual Explanation](http://ayende.com/blog/4435/map-reduce-a-visual-explanation)

您必须通过对每个项目加 1 来计算项目。您必须通过将值的总和作为总和，将 1 的总和作为计数，然后除以它们来平均项目。

```
public class Deck_Ratings : AbstractIndexCreationTask<DeckRating, Deck_Ratings.ReduceResult>
{
    public class ReduceResult
    {
        public string DeckId { get; set; }
        public int TotalRating { get; set; }
        public int CountRating { get; set; }
        public double AverageRating { get; set; }
    }

    public Deck_Ratings()
    {
        Map = deckRatings => deckRatings.Select(deckRating => new 
                             { 
                                 deckRating.DeckId,
                                 TotalRating = deckRating.Rating,
                                 CountRating = 1,
                                 AverageRating = 0
                             });
        Reduce = reduceResults => reduceResults
                                      .GroupBy(reduceResult => reduceResult.DeckId)
                                      .Select(grouping => new 
                                              {
                                                  DeckId = grouping.Key, 
                                                  TotalRating = grouping.Sum(reduceResult => reduceResult.TotalRating)
                                                  CountRating = grouping.Sum(reduceResult => reduceResult.CountRating)
                                               })
                                      .Select(x => new
                                               {
                                                  x.DeckId,
                                                  x.TotalRating,
                                                  x.CountRating,
                                                  AverageRating = x.TotalRating / x.CountRating
                                               });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:16:12.920

[这是问题 RavenDB-783](http://issues.hibernatingrhinos.com/issue/RavenDB-783)。这是自 v2.0 以来的预期行为。

不过，不确定他推荐什么作为替代方案。

# php - 检查是否比当前日期更早或更晚（按月）

> ID：14233883
> 
> 赞同：2
> 
> 时间：2013-01-09T11:08:20.613
> 
> 标签：php, date, if-statement

我想检查给定日期（如 2012-12 年）是否比当前日期旧或新。

我知道如何检查大月份

```
if(strtotime('2012-12')<strtotime('-1 Months')){
   echo "true"; // got TRUE ... correct!
} else {
    echo "false";
} 
```

但是较新的呢？

```
if(strtotime('2013-02')>strtotime('1 Months')){
   echo "true";
} else {
    echo "false"; // got FALSE ... incorrect !
} 
```

检查较新日期时，我得到了不正确的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T11:10:30.223

您忘记将 + 添加到您的 strtotime 函数。

```
if(strtotime('2013-02')>strtotime('+1 Months')){
   echo "true";
} else {
    echo "false";
} 
```

**更新：** 你的问题有些奇怪。例如，2013-02 不是日期，而是对月份的引用。如果您想检查这是否是该月的第一天，请使用完整的日期表示法：2012-02-01。如果要检查当前日期是否为月份，请检查当前月份`date("n")`（返回 1-12）；并将其与给定的月份进行比较，例如：

```
$date = "2012/02/01";

if(date("n", strtotime($date)) != date("n")) {
 echo 'not current month';
} 
```

如果您想检查这是否不是当前日期，请执行以下操作：

```
$date = "2012/02/01";

if(date('d-m-Y', strtotime($date)) != date('d-m-Y')) {
 echo 'not current day';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T11:16:53.580

如果您想将日期与当前时间进行比较，以查看它是过去还是将来，您可以使用

```
$date = '2013-02';
$now = time();

if ( strtotime($date) > $now ) {
    echo 'Date is in the future';
} else {
    echo 'Date is in the past';
} 
```

但是请注意，如果您提供像`$date = '2013-01'`ie 这样没有一天的日期，它将像过去一样返回，即使我们仍在 1 月。如果这是您想要的行为，请务必查看

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T11:18:29.140

比较字符串呢？如果您可以直接比较字符串，使用 ISO 8601 格式 yyyy-mm-dd 它们总是按字典顺序排列。

2012-01 < 2012-12 < **2013-01** < 2013-02 < 2014-01 （粗体为当前）

# android - 为Android应用开发导入滑动菜单库

> ID：14233884
> 
> 赞同：0
> 
> 时间：2013-01-09T11:08:30.383
> 
> 标签：android, menubar, sliding

我是 Android 开发的新手，我想构建一个滑动菜单……我找到了以下库：

[https://github.com/johnkil/SideNavigation](https://github.com/johnkil/SideNavigation)

他们有非常详细的指南......例如，在布局和菜单中添加代码的位置和东西......

我已经添加了他们提到的所有代码..但滑动菜单仍然不起作用......

我想我必须将他们的库导入我的项目？我该怎么做？

从他们的网站 /library/src/com/devspark/sidenavigation/ 下载文件并导入到我的项目的 libs 文件中？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:47:17.433

我没有使用那个特定的库，但一般来说，要导入它，一旦你下载文件并将它解压缩到给定的目的地，你所要做的（如果你使用的是 Eclipse）就是文件>导入>Android>将现有 Android 放入 Workspace，然后选择该库位置。就是这样，要在您的项目中使用它，请转到属性> Android 并添加新库。我希望这有帮助！

# zeromq - C++ 示例的 ZMQ 编译问题

> ID：14233887
> 
> 赞同：9
> 
> 时间：2013-01-09T11:08:37.927
> 
> 标签：zeromq

我正在尝试编译 zmq.org（即 github.com/imatix/zguide.git）提供的 ZMQ C++ 源代码示例。我的操作系统是 xubuntu，我正确安装了 ZMQ 先决条件，即 libtool、autoconf、automake 和 uuid-dev 包。我也安装了 czmq。ZMQ 本身的编译和链接很好，并且库位于 /usr/local/bin 下。尽管如此，我还是遇到了编译错误。谷歌搜索没有多大帮助，我想知道是否有人知道这些错误的快速解决方案，它源于缺少的头文件 zmq.hpp。提前致谢。

```
 $./build all
   hwclient.cpp
   hwclient.cpp:6:19: fatal error: zmq.hpp: No such file or directory
   compilation terminated.
   hwserver.cpp
   hwserver.cpp:6:19: fatal error: zmq.hpp: No such file or directory
   compilation terminated.
   identity.cpp
   identity.cpp:7:19: fatal error: zmq.hpp: No such file or directory
   compilation terminated.
   lbbroker.cpp
   In file included from lbbroker.cpp:7:0:
   zhelpers.hpp:29:19: fatal error: zmq.hpp: No such file or directory
   compilation terminated.
   lpclient.cpp
   In file included from lpclient.cpp:6:0:
   zhelpers.hpp:29:19: fatal error: zmq.hpp: No such file or directory
   compilation terminated.
   lpserver.cpp
   In file included from lpserver.cpp:8:0:
   zhelpers.hpp:29:19: fatal error: zmq.hpp: No such file or directory
   compilation terminated.
   mdbroker.cpp
   In file included from zmsg.hpp:35:0,
             from mdbroker.cpp:7:
   zhelpers.hpp:29:19: fatal error: zmq.hpp: No such file or directory
   compilation terminated.
   mdclient.cpp 
```

……

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T12:20:40.933

看起来 zmq.hpp 已从 ZMQ 3.2 开始移动到另一个 git 存储库，该存储库可在[https://github.com/zeromq/cppzmq](https://github.com/zeromq/cppzmq)获得。我已将其克隆到先前提取 ZMQ 的 tar 球的相同位置。然后我从示例的 C++ 目录创建了一个指向 zmq.hpp 的符号链接。然后示例编译得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T01:37:56.223

```
prem@~/Code/zeromq>ls
cppzmq-master.zip  zguide  zmqpp-develop  zmqpp-develop.zip
prem@~/Code/zeromq>unzip cppzmq-master.zip 
Archive:  cppzmq-master.zip
235803740753312576495301ebf5b8ed76407173
   creating: cppzmq-master/
  inflating: cppzmq-master/LICENSE   
  inflating: cppzmq-master/README    
  inflating: cppzmq-master/zmq.hpp   
prem@~/Code/zeromq>ls
cppzmq-master  cppzmq-master.zip  zguide  zmqpp-develop  zmqpp-develop.zip
prem@~/Code/zeromq>cd cppzmq-master/
prem@~/Code/zeromq/cppzmq-master>ls
prem@~/Code/zeromq/cppzmq-master>sudo cp zmq.hpp /usr/include/
prem@~/Code/zeromq/cppzmq-master>cd ~/Code/zeromq/zguide/examples/C++
prem@~/Code/zeromq/zguide/examples/C++>./build all
Building C++ examples...
hwclient.cpp
hwserver.cpp
identity.cpp
interrupt.cpp
...
prem@~/Code/zeromq/zguide/examples/C++> 
```

# entity-framework-5 - 实体框架5在上下文关闭后获取对象的子对象

> ID：14233891
> 
> 赞同：0
> 
> 时间：2013-01-09T11:09:05.963
> 
> 标签：entity-framework-5

假设我通过 DbContext 获取一个对象，然后关闭该上下文。后来我想得到这个对象的一些孩子，我打开一个新的上下文。将对象重新附加到我应该注意的新上下文是否有任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:08:45.137

如果在处置对象之前将对象从第一个上下文中分离出来，则应该没有问题。如果您不这样做，在某些情况下，您可能会收到错误，即对象已被另一个上下文跟踪，在这种情况下，不可能将对象附加到新上下文或将其从旧上下文中分离（因为它已经被释放）。

请注意，分离会破坏所有关系。如果您想完全避免分离，请不要使用 EF 创建的动态代理（延迟加载和动态更改跟踪）。

# php - 动态变量是否有理由不是私有的？

> ID：14233894
> 
> 赞同：1
> 
> 时间：2013-01-09T11:09:10.390
> 
> 标签：php, oop, class, dynamic

在运行时扩展类是可能的，我一直在玩它，但后来我偶然发现了这个，这对我来说很奇怪。如果我在私有函数中定义一个新变量，它将成为一个公共变量。至少不应该受到保护吗？

这是我用来测试的代码：

```
class FooBar {

public function FooBar() {
    $this->t();
}

public function createVariable() {
    $this->NewVar();
}

private function NewVar() {
    $this->iam = "Hello you!";
}

private function t() {
    $this->T = "ballad";
    return $this->T;
}

}

$fb = new FooBar();
echo $fb->T;
echo "<br/>";
var_dump($fb);
$fb->createVariable();
echo $fb->iam;
echo "<br/>";
var_dump($fb);
echo "<br/>";
$fb->outer = "okay";
echo $fb->outer; 
```

另外，既然可以在运行时扩展一个类，为什么这不可能：

```
function foo() {
    private $this->anewvar = 0; //private is illegal.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:36:33.093

PHP 允许在任何时候实例化变量而无需显式定义它们。

但是由于您没有明确定义变量，PHP 不知道您希望它的作用域如何，您也无法告诉它，所以它只是使用最安全的选项并将其公开。

如果您希望它是私有的，请将其定义为类定义中的私有变量。

# sql - 表连接方式的区别

> ID：14233895
> 
> 赞同：0
> 
> 时间：2013-01-09T11:09:11.127
> 
> 标签：sql, query-optimization

> **可能重复：**
> [SQL 连接：where 子句与 on 子句](https://stackoverflow.com/questions/354070/sql-join-where-clause-vs-on-clause)

下面的表连接方式有什么区别，哪一种更适合查询优化。

```
 SELECT SP.*, S.SNAME, S.STATUS, S.CITY
 FROM S INNER JOIN SP 
 ON S.SNO = SP.SNO; 
```

和

```
 SELECT SP.*, S.SNAME, S.STATUS, S.CITY
 FROM S, SP 
 WHERE S.SNO = SP.SNO; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:12:51.677

查询优化器会将它们视为等效的 - 所有主要数据库引擎的性能没有差异。

从可读性和风格的角度来看，使用显式连接语法通常是首选 - 无论您做什么，都要遵守约定并坚持下去！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:55:32.627

这里有一点要记住

定义索引的列应该是 on 子句中的第一个

# string - Matlab中的多行字符串文字？

> ID：14233896
> 
> 赞同：20
> 
> 时间：2013-01-09T11:09:13.907
> 
> 标签：string, matlab, multiline, literals

Matlab中是否有多行字符串文字语法或者是否需要连接多行？

我找到了[verbatim](http://www.mathworks.co.uk/matlabcentral/fileexchange/23194-verbatim-get-the-text-of-a-block-comment)包，但它只能在 m 文件或函数中工作，而不是在编辑器单元格中交互。

编辑：我特别喜欢修改代码中文字的可读性和易用性（想象它包含不同级别的缩进块） - 制作多行字符串很容易，但我正在寻找最方便的语法来做到这一点。

到目前为止我有

```
t = {...
'abc'...
'def'};
t = cellfun(@(x) [x sprintf('\n')],t,'Unif',false);
t = horzcat(t{:}); 
```

这给出了 size(t) = 1 8，但显然有点乱。

编辑 2：基本上`verbatim`做我想要的，除了它在编辑器单元格中不起作用，但也许我最好的选择是更新它。我认为应该可以从 java 接口获取当前打开的文件和光标位置到编辑器。问题是如果在同一个单元格中有多个逐字调用，您将如何区分它们。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T11:34:14.450

我会去：

```
multiline = sprintf([ ... 
'Line 1\n'... 
'Line 2\n'... 
]); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T09:22:15.327

Matlab 很奇怪，因为字符串中的转义处理是函数`printf`族的函数，而不是字符串文字语法。并且没有多行文字。那好吧。

我最终做了两件事。首先，分别只返回已处理的 \r 和 \n 的 make`CR()`和`LF()`函数，因此您可以在代码中将它们用作伪文字。我更喜欢这样做而不是通过 sprintf() 发送整个字符串，因为其中可能有其他反斜杠，您不希望将其作为转义序列处理（例如，如果您的某些字符串来自函数参数或从其他地方读取的输入）。

```
function out = CR()
out = char(13); % # sprintf('\r')

function out = LF()
out = char(10); % # sprintf('\n'); 
```

其次，`join(glue, strs)`在您的示例中创建一个类似于 Perl 的 join 或 cellfun/horzcat 代码的函数，但没有最后的尾随分隔符。

```
function out = join(glue, strs)
strs = strs(:)';
strs(2,:) = {glue};
strs = strs(:)';
strs(end) = [];
out = cat(2, strs{:}); 
```

然后像你一样将它与单元格文字一起使用。

```
str = join(LF, {
    'abc'
    'defghi'
    'jklm'
    }); 
```

您不需要像这样的单元格文字中的“...”省略号；省略它们会进行垂直向量构造，如果行具有不同长度的 char 字符串，那很好，因为它们每个都卡在一个单元格内。仅此一项就可以为您节省一些打字时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-07-02T17:47:02.353

有点旧的线程，但我明白了

```
multiline = join([
"Line 1"
"Line 2"
], newline) 
```

我认为如果让事情变得很容易，但显然这取决于一个人在寻找什么:)

# mysql - 等效于 mysql 中来自 sql server 的查询

> ID：14233897
> 
> 赞同：1
> 
> 时间：2013-01-09T11:09:13.310
> 
> 标签：mysql, sql, equivalent

我在 SQL Server 中有查询，但我不知道它在 mysql 中的等价物。sql代码是：

```
select username as t ,*from users 
```

此代码在 sql 中运行，但此代码不在 mysql 中运行。有办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:33:32.450

你可以做

```
select *, username as t from users 
```

或者

```
select username as t, users.* from users 
```

出于某种原因，在 MySQL 中，如果您首先指定特定列，则必须限定 *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:28:19.340

您可以使用此代码：

```
select *,username as t from users 
```

# oracle - 在 Oracle 中搜索具有逗号分隔值的列

> ID：14233899
> 
> 赞同：1
> 
> 时间：2013-01-09T11:09:25.310
> 
> 标签：oracle, oracle-text

我正在使用 Oracle 11g 和 Oracle Text 作为 Web 搜索引擎。

我现在已经创建了一个`Keywords`包含空格分隔的单词的 CLOB 列并对其进行了文本索引。这允许我扩展搜索，因为 Oracle Text 将返回在该列中存储了一个或多个关键字的行。该列的内容对用户隐藏，仅用于“扩展”搜索。这是按预期工作的。

但是现在我需要支持多个单词甚至完整的句子。在当前配置下，Oracle Text 将仅搜索单个关键字。我如何需要存储短语并配置 Oracle Text 以便它搜索整个短语（精确匹配是首选，但模糊匹配也可以）？

两行的列内容示例（分号分隔值）：

```
"hello, hello; is there anybody out there?; nope;"
"just the; basic facts;" 
```

我发现了一个类似的问题：[Searching a column with comma separator values](https://stackoverflow.com/questions/8679376/searching-a-column-with-comma-seperated-values)，但我需要一个具有自由文本搜索功能的 Oracle 11g 解决方案。

**可能的解决方案：**

第一个解决方案：我正在考虑重新设计数据库，如下所示。我会做一张新桌子`Keywords(pkID NUMBER, nonUniqueID NUMBER, singlePhrase VARCHAR2(100 BYTE))`。我会将上一列更改`Keyword`为`KeywordNonUniqueID`，它将保存 ID（而不是值列表）。在搜索时，我会与新`Keyword`表进行 INNER JOIN。这个解决方案的问题是我会得到多行，其中包含除了短语之外的相同数据。我认为这会破坏排名？

第二种解决方案：是否可以将短语作为 XML 存储在原始`Keyword`列中，并以某种方式告诉 Oracle Text 在 XML 中搜索？

第三种解决方案：？

请注意，通常不会有很多短语（少于 100 个），也不会很长（单个短语最多有 5 个单词）。

另请注意，我目前正在使用`CONTAINS`及其一些运算符来满足我的全文搜索需求。

编辑：这个[https://forums.oracle.com/forums/thread.jspa?messageID=10791361](https://forums.oracle.com/forums/thread.jspa?messageID=10791361)讨​​论几乎解决了我的问题，但它也匹配单个单词，而不是整个短语（精确匹配）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:17:39.823

Oracle supports searching of phrases by default. In [docs](http://docs.oracle.com/cd/E11882_01/text.112/e24435/query.htm) we can see this

> 4.1.4.1 CONTAINS Phrase Queries
> 
> If multiple words are contained in a query expression, separated only by blank spaces (no operators), the string of words is considered a phrase and Oracle Text searches for the entire string during a query.
> 
> For example, to find all documents that contain the phrase international law, enter your query with the phrase international law.

Did I answer your question or misunderstand you?

P.S. It seems to me that the solution is convert

> "hello, hello; is there anybody out there?; nope;" "just the; basic facts;"

to

> "hello, hello aa is there anybody out there? aa nope aa" "just the aa basic facts aa"

and search with CONTAINS for the phrase "is there anybody out there? aa"

# visual-studio-2008 - “您的计算机中缺少 cutil64D.dll”错误

> ID：14233900
> 
> 赞同：0
> 
> 时间：2013-01-09T11:09:27.263
> 
> 标签：visual-studio-2008, configuration, cuda

> **可能重复：**
> [缺少 cutil 调试库：无法打开文件 cutil32D.lib](https://stackoverflow.com/questions/6944362/missing-cutil-debug-library-cannot-open-file-cutil32d-lib)

我安装了**CUDA Toolkit 4.0.17 (64-bit)**和**CUDA SDK 4.0.19 (64-bit)**并使用**Visual Studio 2008**。当我创建一个新的`CUDA Project in VS`并在其中运行时，调试/发布/Win32/x64（任何配置），我得到了同样的错误。我正在使用具有 Windows 7（64 位）并安装了 3 个显卡的远程桌面上的工作站：

```
 1\. NVIDIA Quadro FX 3800 and 
 2\. NVIDIA Tesla C2050/2070
 3\. NVIDIA Tesla C2050/2070. 
```

**我的 C:\Windows\System32 有以下内容：**

```
1\. cublas64_31_9.dll
2\. cudart64_31_9.dll 
```

在我的 VS 项目中，我有以下“所有配置”配置：

```
 1\. Additional Library Directories - "$(CUDA_LIB_PATH)";"$(NVSDKCOMPUTE_ROOT)\C\common\lib\x64"
 2\. Additional Dependencies - cudart.lib cutil64D.lib 
```

在 VS“工具->选项->项目和解决方案->VC++ 目录”中，我有以下设置：

```
1\. Exec files - C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.0\bin
 2\. Include files - C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.0\include
 3\. Lib files - C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.0\lib\x64 
```

你能告诉我我做错了什么，或者我需要纠正什么吗？

从以前的帖子来看，特斯拉似乎应该在 RDP 上工作，但 bandwidthTest.exe 显示没有支持 CUDA 的设备......

# javascript - 如何检测浏览器是否支持弹出窗口？

> ID：14233902
> 
> 赞同：0
> 
> 时间：2013-01-09T11:09:36.040
> 
> 标签：javascript, ipad, mobile, browser

我需要在桌面设备上打开 2 个弹出窗口，在移动设备上只需要打开 1 个单独的窗口/选项卡，或者更具体地说是没有分离窗口概念的设备。

这可能吗？

# vb.net - 检查蒙版文本框是否为空 VB.NET

> ID：14233905
> 
> 赞同：1
> 
> 时间：2013-01-09T11:09:42.967
> 
> 标签：vb.net, maskedtextbox

我的表单中有蒙面文本框。一个是工资，PF&ESI，其他是电话号码。我尝试使用以下代码检查蒙面文本框是否为空。

```
Dim mtxt As Control
Dim flag3 As Boolean
flag3 = False
For Each mtxt In EMPGBDATA.Controls
    If TypeOf mtxt Is MaskedTextBox  Then
        If mtxt.Text = "" Then
            mtxt.BackColor = Color.Red
            flag3 = True
        End If
    End If
Next 
```

只有我的工资，PF&ESI 蒙面文本框以红色显示，但电话号码蒙面文本框不显示红色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:27:37.647

我认为你有以下情况：（可能是物业设计师定义的）

```
 maskedTextBoxPhoneNumber.Mask = "000000 00000"  'Or something similar'
 maskedTextBoxPhoneNumber.TextMaskFormat = MaskFormat.IncludeLiterals 
```

在这种情况下，您的测试

```
 if mtxt.Text = "" then 
```

将失败，因为 mask 属性中包含的文字在属性中返回`Text`

您应该将属性更改`TextMaskFormat`为

```
 maskedTextBoxPhoneNumber.TextMaskFormat = MaskFormat.ExcludePromptAndLiterals 
```

[有关 MaskFormat 枚举，请参阅 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskformat%28v=vs.80%29.aspx)

# android - 将样式添加到自定义选项卡

> ID：14233908
> 
> 赞同：0
> 
> 时间：2013-01-09T11:09:46.153
> 
> 标签：android, xml

我已经更改了我的应用程序，因此用户可以对整个应用程序有 2 种不同的样式。我已经更新了我创建的自定义选项卡，因此它们链接到一个样式，该样式反过来（取决于所选样式）链接到可绘制的 Selector xml（即显示选择或未选择的内容）。

运行它会给我以下错误

```
01-09 10:46:28.701: E/AndroidRuntime(375): FATAL EXCEPTION: main
01-09 10:46:28.701: E/AndroidRuntime(375): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myappname/com.myappname.RoundSelect}: android.view.InflateException: Binary XML file line #11: Error inflating class <unknown>
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.os.Looper.loop(Looper.java:123)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-09 10:46:28.701: E/AndroidRuntime(375):  at java.lang.reflect.Method.invokeNative(Native Method)
01-09 10:46:28.701: E/AndroidRuntime(375):  at java.lang.reflect.Method.invoke(Method.java:507)
01-09 10:46:28.701: E/AndroidRuntime(375):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-09 10:46:28.701: E/AndroidRuntime(375):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-09 10:46:28.701: E/AndroidRuntime(375):  at dalvik.system.NativeStart.main(Native Method)
01-09 10:46:28.701: E/AndroidRuntime(375): Caused by: android.view.InflateException: Binary XML file line #11: Error inflating class <unknown>
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.view.LayoutInflater.createView(LayoutInflater.java:518)
01-09 10:46:28.701: E/AndroidRuntime(375):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
01-09 10:46:28.701: E/AndroidRuntime(375):  at com.myappname.RoundSelect.createTabView(RoundSelect.java:234)
01-09 10:46:28.701: E/AndroidRuntime(375):  at com.myappname.RoundSelect.setupTab(RoundSelect.java:223)
01-09 10:46:28.701: E/AndroidRuntime(375):  at com.myappname.RoundSelect.setupCustomTabs(RoundSelect.java:215)
01-09 10:46:28.701: E/AndroidRuntime(375):  at com.myappname.RoundSelect.onCreate(RoundSelect.java:90)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-09 10:46:28.701: E/AndroidRuntime(375):  ... 11 more
01-09 10:46:28.701: E/AndroidRuntime(375): Caused by: java.lang.reflect.InvocationTargetException
01-09 10:46:28.701: E/AndroidRuntime(375):  at java.lang.reflect.Constructor.constructNative(Native Method)
01-09 10:46:28.701: E/AndroidRuntime(375):  at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.view.LayoutInflater.createView(LayoutInflater.java:505)
01-09 10:46:28.701: E/AndroidRuntime(375):  ... 23 more
01-09 10:46:28.701: E/AndroidRuntime(375): Caused by: android.content.res.Resources$NotFoundException: File res/drawable/custom_tab_text_selector_black.xml from drawable resource ID #0x7f020023
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.content.res.Resources.loadDrawable(Resources.java:1697)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.view.View.<init>(View.java:1951)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.widget.TextView.<init>(TextView.java:344)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.widget.TextView.<init>(TextView.java:337)
01-09 10:46:28.701: E/AndroidRuntime(375):  ... 26 more
01-09 10:46:28.701: E/AndroidRuntime(375): Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #7: <item> tag requires a 'drawable' attribute or child tag defining a drawable
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:167)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
01-09 10:46:28.701: E/AndroidRuntime(375):  at android.content.res.Resources.loadDrawable(Resources.java:1694)
01-09 10:46:28.701: E/AndroidRuntime(375):  ... 30 more 
```

自定义背景代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabsLayout" 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    style="?custom_tab_background_selector">

    <TextView 
        android:id="@+id/customTabsText" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        style="?custom_tab_text_selector">
    </TextView>

</LinearLayout> 
```

调用这个的方法

```
private static View createTabView(Context pContext, String pTabTitleText) {

        View view = LayoutInflater.from(pContext).inflate(R.layout.custom_tabs_background, null);

        TextView tv = (TextView) view.findViewById(R.id.customTabsText);

        tv.setText(pTabTitleText);

        return view;

    } 
```

剩下的只是一个 xml 主题，它指向一个 Selector XML，后者又指向一些可绘制的 xml 文件。这是选择器 XML

```
<?xml version="1.0" encoding="utf-8"?>
<selector 
    xmlns:android="http://schemas.android.com/apk/res/android">
    <!--  Active tab -->
    <item 
        android:state_selected="true" 
        android:state_focused="false"
        android:state_pressed="false"
        android:drawable="@drawable/custom_tab_background_selected_black" />
    <!--  Inactive tab -->
    <item 
        android:state_selected="false" 
        android:state_focused="false"
        android:state_pressed="false" 
        android:drawable="@drawable/custom_tab_background_unselected_black" />
    <!--  Pressed tab -->
    <item 
        android:state_pressed="true" 
        android:drawable="@android:color/transparent" />
    <!--  Selected tab (using d-pad) -->
    <item 
        android:state_focused="true" 
        android:state_selected="true"
        android:state_pressed="false" 
        android:drawable="@android:color/transparent" />
</selector> 
```

关于我为什么会收到此错误的任何想法都会很棒。谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:49:18.080

It appears I tracked it down.

the background of the tab I was using android:background=.... but was also using the same for the colour of the text and it should have been android:textColour=....

all works now. Sorry for the confusion

# bonecp - 使用 maven 构建 BoneCP 的问题

> ID：14233915
> 
> 赞同：0
> 
> 时间：2013-01-09T11:10:21.500
> 
> 标签：bonecp

我从以下 Github URL 下载了最新的 BoneCP 源代码：

[https://github.com/wwadge/bonecp/archive/master.zip](https://github.com/wwadge/bonecp/archive/master.zip)

当我尝试使用 maven 构建此源代码时，在编译 bonecp-hbnprovider 模块时会出现一些问题。最初我收到以下错误：

*不可解析的父 POM：找不到工件 com.jolbox:bonecp-parent:pom:0.8.0-rc1-SNAPSHOT 和 'parent.relativePath' 指向错误的本地 POM @ 第 19 行，第 13 列 -> [帮助 2]*

在 bonecp-hbnprovider 的 pom.xml 中将*0.8.0-rc1-SNAPSHOT 更改为 0.8.0-rc2-SNAPSHOT*后，我收到以下错误：

*[错误] 无法在项目 bonecp-provider 上执行目标：无法解析项目 com.jolbox:bonecp-provider:bundle:0.8.0-rc2-SNAPSHOT 的依赖项：找不到工件 com.jolbox:bonecp:jar:0.8 spring-milestone 中的 .0-rc2-SNAPSHOT (http://s3.amazonaws.com/maven.springframework.org/milestone) -> [帮助 1]*

请让我知道如何解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:12:24.023

你用的是什么命令？尝试： mvn clean install

# perl - 将带有 add_to_$rel 的对象插入到与 DBIx::Class 的多对多关系中

> ID：14233917
> 
> 赞同：3
> 
> 时间：2013-01-09T11:10:23.633
> 
> 标签：perl, dbix-class

## 问题

我正在尝试构建一个最小的示例，在其中创建多对多关系[`DBIx::Class`](https://metacpan.org/module/DBIx%3a%3aClass)并将一些行插入数据库。

在我的数据库中，我有两个表**A**和**C**，它们由表**AC**链接。我尝试使用以下脚本插入值：

```
#! /usr/bin/perl
use strict;
use warnings;
use DB::Main;

my $s = DB::Main->connect("dbi:SQLite:example.db");
my $a1 = $s->resultset('A')->create({a_value => 'a1'});
my $a2 = $s->resultset('A')->create({a_value => 'a2'});
my $a3 = $s->resultset('A')->create({a_value => 'a3'});

$s->resultset('C')->create({c_value => 'c1'});
$s->resultset('C')->create({c_value => 'c2'});

my $c1 = $s->resultset('C')->find(1);
$c1->add_to_as($a1); 
```

a1 到 a3 和 c1,c2 的值创建得很好。当我尝试将 a1 和 c1 之间的关系添加到表**AC**中时。我收到以下错误消息：

```
Can't use an undefined value as a HASH reference at /Library/Perl/5.12/DBIx/Class/Relationship/ManyToMany.pm line 88. 
```

我想我正在关注add_to_$rel的[文档。](http://search.cpan.org/dist/DBIx-Class/lib/DBIx/Class/Relationship/Base.pm#add_to_%24rel)我在这里做错了什么？

## 模式定义

我正在使用以下数据库架构，将其部署[`DBIx::Class::DeploymentHandler`](https://metacpan.org/module/DBIx%3a%3aClass%3a%3aDeploymentHandler)到 SQLite 数据库中。

文件`db/Main.pm`

```
package DB::Main;
use base qw/DBIx::Class::Schema/;

our $VERSION = 1;
__PACKAGE__->load_namespaces;
1; 
```

文件`db/Main/Result/A.pm`

```
package DB::Main::Result::A;
use base qw/DBIx::Class::Core/;
__PACKAGE__->table('a');
__PACKAGE__->add_columns(
  a_id => {
    data_type => 'Integer',
    size      => 8
  },
  a_value => {
    data_type => 'Varchar',
    size      => 50
  },
);
__PACKAGE__->set_primary_key('a_id');
__PACKAGE__->has_many('acs' => 'DB::Main::Result::AC', 'f_a_id');
__PACKAGE__->many_to_many('cs' => 'DB::Main::Result::C', 'acs');
1; 
```

文件`db/Main/Result/C.pm`

```
package DB::Main::Result::C;
use base qw/DBIx::Class::Core/;
__PACKAGE__->table('c');
__PACKAGE__->add_columns(
  c_id => {
    data_type => 'Integer',
    size      => 8
  },
  c_value => {
    data_type => 'Varchar',
    size      => 50
  },
);
__PACKAGE__->set_primary_key('c_id');
__PACKAGE__->has_many('acs' => 'DB::Main::Result::AC', 'f_c_id');
__PACKAGE__->many_to_many('as' => 'DB::Main::Result::A', 'acs');
1; 
```

文件`db/Main/Result/AC.pm`

```
package DB::Main::Result::AC;
use base qw/DBIx::Class::Core/;
__PACKAGE__->table('ac');
__PACKAGE__->add_columns(
  f_a_id => {
    data_type => 'Integer',
    size      => 8
  },
  f_c_id => {
    data_type => 'Integer',
    size      => 8
  },
);
__PACKAGE__->set_primary_key('f_a_id', 'f_c_id');
__PACKAGE__->belongs_to('a' => 'DB::Main::Result::A', 'f_a_id');
__PACKAGE__->belongs_to('c' => 'DB::Main::Result::C', 'f_c_id');
1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:03:13.173

您对 many_to_many 的调用中的参数是错误的。请查阅 many_to_many 的文档并尝试以下操作：

```
__PACKAGE__->many_to_many('cs' => 'acs', 'c');
__PACKAGE__->many_to_many('as' => 'acs', 'a'); 
```

# php - PHP 的“使用”关键字未正确包括

> ID：14233918
> 
> 赞同：2
> 
> 时间：2013-01-09T11:10:26.933
> 
> 标签：php, yii

我目前正在重构一个半心半意地移植到 Yii 的项目。components 文件夹中有一些类包含在带有 PHP“use”-keyword 的控制器中。这给了我一个“include(protected/components/classes/SClass.php): failed to open stream: No such file or directory”错误。

真正奇怪的是，将名称（由“use”使用）更改为不存在的文件会给我一个致命错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T12:06:34.153

PHP 中的`use`关键字本身不包含其他文件。它只是告诉 PHP 语句中定义的名称空间`use`可能被当前 PHP 文件中更下方的代码引用。

但是，这里可能发生的是您的系统`autoload`定义了一个函数。如果有一个`autoload`函数，PHP 将在遇到无法识别的类名时调用该函数。该`autoload`函数搜索要加载的类文件，如果可以找到，则将其包含在内。这可能是您发生错误的地方。

在第一种情况下，这是事件的顺序：

*   该`use`语句引用了一个有效的命名空间，但在代码中引用了该命名空间中的一个类之前，它会被忽略。
*   当类被引用时，PHP 会说“我还不知道这个类，让我们自动加载它吧”。
*   自动加载器功能运行，并构建一个包含路径。这通常来自类的命名空间和类名，但可以是编写的自动加载函数所期望的任何内容。
*   在这种情况下，听起来自动加载器正在构建路径并`include()`在该路径上运行，但是该类不存在于自动加载器期望的位置。因此出现“找不到文件”错误。

在第二种情况下，您更改`use`语句：

*   该`use`语句现在引用了一个不同的命名空间，但您稍后可能没有更改实际引用该类的程序中的代码。
*   程序到达调用该类的代码，但它无法识别命名空间，因为它不再匹配该`use`语句，因此立即出现致命错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:30:31.920

您可能想要检查文件所有权和权限，并检查[此处提到的 PHP 安全性](http://www.karakas-online.de/forum/viewtopic.php?t=2235)

# matlab - Matlab fileread 命令在-nodesktop 模式下有什么限制？

> ID：14233921
> 
> 赞同：6
> 
> 时间：2013-01-09T11:10:37.450
> 
> 标签：matlab, file-io

假设一个包含 7718 个字符的文本文件（例如从[这里](http://chem.tufts.edu/answersinscience/relativityofwrong.htm)剪切和粘贴的内容）

`fileread('myfile.txt')`当我启动 matlab`matlab -nodesktop`但在桌面模式下工作时，该命令失败。

有谁知道为什么？

如果文本文件中的字符数减少到 1981，它将在`-nodesktop`模式下工作。

*注意*：我不知道它停止工作的确切字符数。

最后，我在 Windows7 上使用 Matlab 7.8.0 (R2009a)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:56:24.570

我无法重现这种奇怪的行为（Matlab 2010b 和 2012b，都在 Linux 上）。

您至少可以尝试通过限制问题来“调试”此类行为。“fileread”例程对文件名（ischar，isempty）进行一些检查，然后打开文件（fopen），读取它（fread）并关闭它（fclose）——相当简单的基本内容。作为参考，请在 matlab 桌面的命令行中键入“edit fileread”，然后尝试逐步运行该例程。

如果“fread”导致整个事情崩溃，并且如果您绑定到这个版本的 Matlab，请尝试实施“修复”。"fread" 接受的参数比 "fileread" 中使用的参数多（仅文件 ID 和精度 "char"）：FREAD(FID,SIZE,PRECISION,SKIP,MACHINEFORMAT)。指定更多参数可能会有所帮助（疯狂猜测但值得一试）。

# events - 使用 jQuery 获取当前处理的事件

> ID：14233925
> 
> 赞同：0
> 
> 时间：2013-01-09T11:10:49.020
> 
> 标签：events, event-handling, jquery

有没有办法获取当前处理的所有事件？这意味着不是绑定到元素的事件。我的意思是一种获取当前触发的所有事件的方法。

所以为了更好的解释，像这样（但没有声明每个事件）：

```
var Records = {};
(function loop() {
  $(document).bind('click mousemove change', function(e) {
    Records[+new Date()] = {type: e.type};
  });
  setTimeout(loop, 10);
})(); 
```

我知道这一点：`$._data($('*').andSelf().get(0), 'events');`但这只给了我当前处理/附加的事件。

# mysql - MySQL查询多表内连接

> ID：14233932
> 
> 赞同：0
> 
> 时间：2013-01-09T11:11:02.767
> 
> 标签：mysql, sql

我有这个 MySQL 查询，但在我尝试运行它时似乎出现错误。由于我是新手，我想就我应该做些什么来纠正它提出一些建议。我只想显示有 1 个或多个待处理产品的订单的名称、数量和订单日期。非常感谢！

```
select product.name, order_details.quantity, order.date from product,order_details,order 
inner join order on order_details.order_id=order.id 
inner join product on order_details.product_id=product.id 
inner join customer on order.cust_id=costumer.id WHERE order.pending=>1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:14:47.527

您有一个名为**order**的表。这个词在 SQL 中具有特殊的意义。您的选择是重命名表，或者在您想从中查询时引用它。

最简单的解决办法是改变。

```
inner join order .... 
```

到

```
inner join `order` 
```

确保在表名周围使用反引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:14:56.073

您有一个名为“order”的表，它是 SQL 中的保留字。

一种解决方案是在表名前加上数据库名称，如[Craic Computing 博客](http://craiccomputing.blogspot.com.es/2011/02/tables-named-with-reserved-words-in.html)中所述 另一种方法是用 ` 字符包装表名，如您[在此 StackOverflow 问题中所读](https://stackoverflow.com/questions/2889871/how-do-i-escape-reserved-words-used-as-column-names-mysql-create-table)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:19:39.990

您可以尝试以下方法：

```
SELECT product.name, order_details.quantity, `order`.date
FROM product
INNER JOIN order_details ON product.id = order_detail.product_id
INNER JOIN `order` ON `order`.id = order_detail.order_id
WHERE `order`.pending >= 1 
```

正如在其他答案中所说，`order`是 SQL 中的保留关键字，用反引号括起来。

也许您应该将`pending`信息存储在`order_detail`表中（1 表示挂起，0 表示没有），以便跟踪哪个产品仍处于挂起状态，而不是增加/减少`order.pending`字段。

在这种情况下，您可以进行以下查询：

```
SELECT product.name, order_details.quantity, `order`.date
FROM product
INNER JOIN order_details ON product.id = order_detail.product_id
INNER JOIN `order` ON `order`.id = order_detail.order_id
WHERE `order_detail`.pending = 1 
```

这将返回您的订单中仍待处理的所有产品，而不是返回可能只有一个待处理的订单中的所有产品。

# ios - Reskit 对象映射返回具有 nil 属性的模型对象

> ID：14233934
> 
> 赞同：2
> 
> 时间：2013-01-09T11:11:16.290
> 
> 标签：ios, restkit

我正在尝试映射 RSS 提要的项目。RKObjectRequestOperation 返回对象的确切数量，但属性值为 nil。以下是我的代码

```
 NSURL *requestURL = [NSURL URLWithString:@"http://sports.espn.go.com/espn/rss/nfl/news"];
 [RKMIMETypeSerialization registerClass:[RKXMLReaderSerialization class] forMIMEType:@"application/rss+xml"];
RKObjectMapping *rssFeedObjectMapping = [RKObjectMapping mappingForClass:[SBRssFeed class]];
    [rssFeedObjectMapping addAttributeMappingsFromDictionary:@{
     @"title" : @"title",
     @"link" : @"link"
}];

RKResponseDescriptor *rssFeedResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:rssFeedObjectMapping
                                                                                              pathPattern:nil
                                                                                                  keyPath:@"rss.channel.item"
                                                                                              statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];

 RKObjectRequestOperation *requestOperation = [[RKObjectRequestOperation alloc]initWithRequest:[NSURLRequest requestWithURL:requestURL]
                                                                              responseDescriptors:@[rssFeedResponseDescriptor]];
    [requestOperation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
        _datasourceArray = mappingResult.array;
        NSLog(@"Count %d", _datasourceArray.count);
        [self.tableView reloadData];
    }
                                            failure:^(RKObjectRequestOperation *operation, NSError *error) {
                                                NSLog(@"Error %@", error);
                                            }];
    [requestOperation start]; 
```

有什么我错过的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:40:08.793

我解决了这个问题。问题`XMLReader`与与`RKXMLReaderSerialization`. 该类`RKObjectMapping`未能将字典的键映射到对象的属性。原因是`XMLReader`.

```
{
    rss =     {
        channel =         {
            "atom:link" =             {
                href = "http://www.nytimes.com/services/xml/rss/nyt/Baseball.xml";
                rel = self;
                type = "application/rss+xml";
            };
            copyright =             {
                text = "Copyright 2013 The New York Times Company";
            };
            description =             {
                text = Baseball;
            };
            image =             {
                link =                 {
                    text = "http://www.nytimes.com/pages/sports/baseball/index.html?partner=rss&emc=rss";
                };
                title =                 {
                    text = "NYT > Baseball";
                };
                url =                 {
                    text = "http://graphics8.nytimes.com/images/misc/NYT_logo_rss_250x40.png";
                };
            };
            item =             (
                                {
                                    "atom:link" =                     {
                                        href = "http://www.nytimes.com/2013/01/23/sports/baseball/rays-add-right-hander-with-a-new-name.html?partner=rss&emc=rss";
                                        rel = standout;
                                    };
                                    category =                     (
                                                                    {
                                                                        domain = "http://www.nytimes.com/namespaces/keywords/nyt_org_all";
                                                                        text = "Tampa Bay Rays";
                                                                    },
                                                                    {
                                                                        domain = "http://www.nytimes.com/namespaces/keywords/des";
                                                                        text = Baseball;
                                                                    }
                                                                    );
                                    "dc:creator" =                     {
                                        text = "By THE ASSOCIATED PRESS";
                                    };
                                    description =                     {
                                        text = "The Rays agreed on a minor league contract with the right-hander Juan Carlos Oviedo, who played under the fake name Leo Nunez before an eight-week suspension by Major League Baseball last year.<img width='1' height='1' src='http://rss.nytimes.com/c/34625/f/640313/s/27cc926a/mf.gif' border='0'/><br/><br/><a href=\"http://da.feedsportal.com/r/151884969355/u/82/f/640313/c/34625/s/27cc926a/a2.htm\"><img src=\"http://da.feedsportal.com/r/151884969355/u/82/f/640313/c/34625/s/27cc926a/a2.img\" border=\"0\"/></a><img width=\"1\" height=\"1\" src=\"http://pi.feedsportal.com/r/151884969355/u/82/f/640313/c/34625/s/27cc926a/a2t.img\" border=\"0\"/>";
                                    };
                                    guid =                     {
                                        isPermaLink = false;
                                        text = "http://www.nytimes.com/2013/01/23/sports/baseball/rays-add-right-hander-with-a-new-name.html";
                                    };
                                    link =                     {
                                        text = "http://www.nytimes.com/2013/01/23/sports/baseball/rays-add-right-hander-with-a-new-name.html?partner=rss&emc=rss";
                                    };
                                    pubDate =                     {
                                        text = "Wed, 23 Jan 2013 04:01:23 GMT";
                                    };
                                    title =                     {
                                        text = "Rays Add Right-Hander With a New Name";
                                    };
                                });
            language =             {
                text = "en-us";
            };
            lastBuildDate =             {
                text = "Wed, 23 Jan 2013 04:20:27 GMT";
            };
            link =             {
                text = "http://www.nytimes.com/pages/sports/baseball/index.html?partner=rss&emc=rss";
            };
            pubDate =             {
                text = "Wed, 23 Jan 2013 04:20:27 GMT";
            };
            title =             {
                text = "NYT > Baseball";
            };
            ttl =             {
                text = 2;
            };
        };
        version = "2.0";
        "xmlns:atom" = "http://www.w3.org/2005/Atom";
        "xmlns:dc" = "http://purl.org/dc/elements/1.1/";
        "xmlns:itunes" = "http://www.itunes.com/dtds/podcast-1.0.dtd";
        "xmlns:media" = "http://search.yahoo.com/mrss/";
        "xmlns:rdf" = "http://www.w3.org/1999/02/22-rdf-syntax-ns#";
        "xmlns:taxo" = "http://purl.org/rss/1.0/modules/taxonomy/";
    };
} 
```

正如上面的响应，每个标签都与一个字典相关联，而字典又以“文本”作为键。

所以我将对象映射更改为

```
 RKObjectMapping *rssFeedObjectMapping = [RKObjectMapping mappingForClass:[SBRssFeed class]];
    [rssFeedObjectMapping addAttributeMappingsFromDictionary:@{
     @"title.text" : @"title",
     @"link.text" : @"link"
}]; 
```

这解决了我的问题。

# android - Android，总是弹出完整的动作使用

> ID：14233935
> 
> 赞同：0
> 
> 时间：2013-01-09T11:11:19.413
> 
> 标签：android, android-intent

我写了一个按钮来启动媒体播放器，如果用户有 2 个媒体播放器，它会弹出“使用完成操作”对话框，但是当我默认单击此操作的使用并选择媒体播放器时，下次我启动我的应用程序和单击它会再次询问的按钮。请帮我解决问题

当用户单击按钮时，它会跟随

```
try
{
    musicIntent = Intent.makeMainSelectorActivity(Intent.ACTION_MAIN, intent.CATEGORY_APP_MUSIC);
startActivity(musicIntent);
}
catch (Exception e)
{
    e.printStackTrace();
} 
```

非常感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:50:17.340

我用的时候发现

```
musicIntent = new Intent(Intent.ACTION_MAIN);
musicIntent.addCategory(Intent.CATEGORY_APP_MUSIC);
startActivityForResult(musicIntent, PLAY_MUSIC); 
```

这个问题会解决，但我不知道为什么......

感谢大家

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T11:21:32.483

如果您使用 CATEGORY_APP_MUSIC 操作将由系统处理。如果你想使用特定的东西，那么你需要自己用它的类名来指定它。

# mod-rewrite - mod_rewrite 转发缩短的 URL

> ID：14233937
> 
> 赞同：0
> 
> 时间：2013-01-09T11:11:23.250
> 
> 标签：mod-rewrite

我正在寻找一种在我的页面上为较长 URL 创建短 URL 路径的方法

长网址是：domain.com/tagcloud/user.html?t=1234ABCD

我想提供一个简短版本的 URL 以便于访问它：

domain.com/t/1234ABCD

我尝试了一些示例，但我只是不明白如何转发这些规则。

```
RewriteRule ^(.*)/t/$ /tagcloud/user.html?t=$1 [L] 
```

我也在使用 MODX，所以他们已经使用了规则。

另外我的 htaccess 文件

```
RewriteEngine On
RewriteBase /

# Always use www
RewriteCond %{HTTP_HOST} .
RewriteCond %{HTTP_HOST} !^www\.domain\.com [NC]
RewriteRule (.*) http://www.domain.com/$1 [R=301,L]

# The Friendly URLs part
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

我必须将上面的代码片段保存在我的 htaccess 文件中。第一个只是将[http://domain.com](http://domain.com)请求转发到 www.domain.com

**需要友好的 URL 部分**来使用 URL 的别名翻译我的 CMS 的内部 ID。必须保留此功能，因为我尝试在 htaccess 中进行的更改不会影响整个站点...

我只是想添加一个侦听器，仅当 URL 匹配 www.domain.com/t/abcd1234

因此我需要一些标识 www.domain.com/t/ URL的东西

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:42:55.267

尝试这个：

```
RewriteCond %{REQUEST_URI} ^/t/.*
RewriteRule ^t/(.*)$ /tagcloud/user.html?t=$1 [R=301,L] 
```

# git - git子模块提交/推/拉

> ID：14233939
> 
> 赞同：14
> 
> 时间：2013-01-09T11:11:28.827
> 
> 标签：git, git-submodules

我想使用 git 子模块。

我需要采取的步骤来将我的更改推送到我的项目是

> 1.  从子模块目录添加/提交/推送
> 2.  从父目录添加/提交/推送

我需要采取的步骤来拉动我的项目的更改。

> 1.  git从父目录拉取
> 2.  从父目录更新 git 子模块

从原始仓库更新子模块的步骤

> 1.  git pull 从子模块目录

让我担心的是[http://git-scm.com/book/en/Git-Tools-Submodules的以下摘录](http://git-scm.com/book/en/Git-Tools-Submodules)

> 问题是您通常不想在分离的 HEAD 环境中工作，因为很容易丢失更改。如果您进行初始子模块更新，则在该子模块目录中提交而不创建要在其中工作的分支，然后从超级项目再次运行 git submodule update 而不同时提交，（**？？更新/提交/更新将丢失更改？**） Git 会在不通知您的情况下覆盖您的更改。从技术上讲，您不会丢失工作，但不会有指向它的分支，因此检索起来会有些困难。
> 
> 为避免此问题，请在子模块目录中使用 git checkout -b work 或类似的东西创建一个分支。当你第二次更新子模块时，它仍然会恢复你的工作，但至少你有一个指针可以返回。

我要修改子模块并且不想搞砸，上面的文档简要提到了丢失更改的可能性，我不明白可能导致丢失的原因。

> 我想知道除了上面列出的之外，我还需要采取哪些额外的步骤来防止损失。尤其是几个团队成员修改子模块，他们需要做什么才不会乱七八糟？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-10T13:39:39.177

作为在 Visual Studio 解决方案中使用外部项目尝试解决类似问题的人，我想与您分享我的经验。我对 git 比较陌生，所以如果有人有任何建设性的批评，我将不胜感激。

如果您使用 Visual Studio，Git Source Control Provider 扩展是免费的（[http://visualstudiogallery.msdn.microsoft.com/63a7e40d-4d71-4fbb-a23b-d262124b8f4c](http://visualstudiogallery.msdn.microsoft.com/63a7e40d-4d71-4fbb-a23b-d262124b8f4c)），并且在我测试时似乎递归提交子模块出去。

但是我在家里使用 VS Web Developer Express 进行开发，所以我不想依赖扩展（我也认为了解幕后发生的事情是件好事）。因此，我被迫弄清楚命令，并在下面添加了一些注释。

**笔记**

如果您还没有完成，请彻底阅读[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)。有很多警告，我将返回此页面。如果你试图在不阅读本文的情况下使用子模块，你很快就会让自己头疼。

我的方法遵循本教程，并添加了一些附加功能：[http ://blog.endpoint.com/2010/04/git-submodule-workflow.html](http://blog.endpoint.com/2010/04/git-submodule-workflow.html)

一旦你初始化了你的超级项目（例如`git init`&& `git remote add origin ...`），开始添加你的子模块，如下所示：

```
git submodule add git://github.com/you/extension1.git extension
git submodule init
git submodule update 
```

检查您的 .gitmodules 文件是否反映了此添加，例如

```
[submodule "extension1"]
        path = extension
        url = git://github.com/you/extension1.git 
```

切换到您的子模块目录（即`cd extension`）。跑：

```
git fetch #I use fetch here - maybe you can use pull?
git checkout -b somebranchname #See the Git-Tools-Submodules link above for an explanation of why you need to branch 
```

我在此处对 README.txt 进行了更改，以便可以提交它（也因此我将记录我在此提交中所做的事情），然后提交模块以应用分支（仍在子模块目录中）：

```
git add .
git commit -a -m "Branching for extension submodule" 
```

现在进入超级项目（即`cd ..`）。您还需要在这里提交（如果您查看我提到的 git 子模块页面，它解释了为什么这是必要的）：

```
git status #will show you that your submodule has been modified
git commit -a -m "Commiting submodule changes from superproject" 
```

现在，如果需要，我们可以像这样递归地推送我们的项目：

```
git push --recurse-submodules=on-demand 
```

您需要为所有子模块运行一次上述步骤。

一旦您为所有子模块完成此操作并开始进行您想要提交和推送的更改，您可以使用：

```
git submodule foreach 'git add .' #recursively add files in submodules 
```

不幸的是，我还没有找到一种不使用（任何人？）之类的东西来递归提交的方法`git-slave`，因此您需要进入每个子模块目录并为您刚刚添加的文件运行定期提交。在超级项目中：

```
git status #tells you that `extension` submodule has been modified
cd extension
git commit -a -m "Commiting extension changes in superproject edit session" 
```

提交子模块后，您还需要（再次）提交超级项目，因此：

```
cd ..
git add .
git commit -a -m "Altered extension submodule"
git status #should now show 'working directory clean', otherwise commit other submodules in the same manner 
```

这可能会有点烦人（因为你最终会提交两次），但是一旦你意识到它实际上并没有那么糟糕（因为它会迫使你检查你在每个项目中提交的内容）。只是我的意见——如果你已经将你的超级项目的一些功能隔离到子模块中，它应该与你的其他项目隔离工作（所以在不同的时间提交它们而烦人并不是世界末日）。

现在我们可以再推一次……

```
git push --recurse-submodules=on-demand 
```

如果您随后进入您的子模块并尝试再次推送，您会发现它不会做任何事情，因为最新的提交已经被推送。

超级项目的克隆（或使用远程源）也可能非常令人困惑 - 例如需要`git submodule update`在`git submodule init`. [阅读http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)的“使用子模块克隆项目”部分。

克隆我的超级项目时让我感到震惊的是获得子模块的最新更改。请参阅[Easy way pull 最新的所有子模块](https://stackoverflow.com/questions/1030169/git-easy-way-pull-latest-of-all-submodules)

我的变体是为签出的子模块使用“开发”分支（但您可以随意调用它），然后在超级项目中使用它：

```
git submodule foreach git pull origin development 
```

当我设置它时，我还交换到我想要将更改推送到已签出子模块的分支，如下所示：

```
cd extension
git checkout -b development #This will tell you this is a new branch, but I believe this means a new branch of the local git repository - this will get pushed to the 'development' branch
#Make your changes, commit etc. 
```

我可以确认，当我按照上述步骤操作时，对克隆/远程源项目中子模块的更改（推送时）显示在同一项目的其他克隆/远程源中（不要忘记最后一个子模块拉取命令）。

我希望这对你有用。

# php - PHP中的重复事件

> ID：14233941
> 
> 赞同：1
> 
> 时间：2013-01-09T11:11:29.457
> 
> 标签：php, codeigniter, calendar, recurring-billing, recurring

您好，我想根据日历制作一个定期活动。我想问的是：如何触发事件？如果客户端没有登录或打开 webapp 以触发构造函数中的事件，我该如何让代码运行。

我知道 cron 作业可能是解决方案，但还有其他解决方案吗？（我想避免 cron 作业）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:19:33.087

您必须运行某些东西才能使其正常工作；一个 cron 是理想的，因为它可以定期运行脚本来检查诸如事件之类的事情。

没有它，您会被用户操作触发，但就像您说的那样，该用户可能并不总是登录来触发它。

您可以修改代码以对所有用户进行任何用户触发操作。它有点复杂，因为您需要允许多个用户同时登录，而您只希望其中一个用户触发东西。我会在您的数据库中设置一个表来跟踪上次触发事件的时间，然后如果从那时起和现在的差距在用户登录时足够大，请在表中添加一个新条目以及现在的时间防止其他用户触发此操作，并触发您需要运行的位。

就像我说的那样，这不是一个完美的解决方案，我真的会推荐使用 cron。有什么理由要避免使用 cron 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:17:09.803

如果应触发该作业以使服务器保持良好状态，则应使用 cron 作业运行它，如果您在用户登录之前不这样做，它可以是工作负载安全的。您也可以手动登录以触发事件，也许是管理页面。

# ruby-on-rails - Rails 生产预编译资产

> ID：14233942
> 
> 赞同：0
> 
> 时间：2013-01-09T11:11:30.690
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当我尝试为生产预编译资产时，它会出现以下错误，请帮助我解决这个问题，我需要发布..，

```
RAILS_ENV=production bundle exec rake assets:precompile --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/home/ubuntu/.rvm/rubies/ruby-1.9.3-p327/bin/ruby /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
rake aborted!
Command failed with status (): [/home/ubuntu/.rvm/rubies/ruby-1.9.3-p327/b...]
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/file_utils.rb:45:in `call'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/file_utils.rb:45:in `sh'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/file_utils_ext.rb:40:in `sh'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/file_utils.rb:80:in `ruby'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/file_utils_ext.rb:40:in `ruby'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:227:in `call'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:227:in `block in execute'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:222:in `each'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:222:in `execute'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/home/ubuntu/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:159:in `invoke_with_call_chain'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:152:in `invoke'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:141:in `invoke_task'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:99:in `block (2 levels) in top_level'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:99:in `each'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:99:in `block in top_level'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:108:in `run_with_threads'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:93:in `top_level'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:71:in `block in run'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:158:in `standard_exception_handling'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:68:in `run'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/bin/rake:37:in `<top (required)>'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327/bin/rake:19:in `load'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327/bin/rake:19:in `<main>'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `eval'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => assets:precompile 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:35:51.393

解决了这个问题，这是我的 CPU 的问题，CPU 处于最高 100% 并且预编译过程超时。

我已经停止了所有剩余的正在运行的进程并进行了编译，资产得到了完美的编译。，

谢谢@phoet

# java - 如何让batik在后台启动GVT Rendering？

> ID：14233943
> 
> 赞同：1
> 
> 时间：2013-01-09T11:11:32.703
> 
> 标签：java, swing, svg, batik

我试图让我的应用程序在应用程序启动时呈现所有 SVG 图像，然后显示主框架。当我启动我的应用程序时，它会加载几个 SVG 图像。不幸的是，目前它显示空白帧，然后渲染图像。

我想替换：

```
MyCustomFrameWithSVG frame = new MyCustomFrameWithSVG();
frame.setVisible(true); 
```

像这样：

```
MyCustomFrameWithSVG frame = new MyCustomFrameWithSVG();
Renderer renderer = new Renderer(30, frame);

public class Renderer extends GVTTreeRendererAdapter {

    int svgCanvasToLoad;
    MyCustomFrameWithSVG frame;

    public Renderer(int svgCanvasToLoad, MyCustomFrameWithSVG frame) {
        this.svgCanvasToLoad = svgCanvasToLoad;
        this.frame = frame;
    }

    @Override
    public void gvtRenderingCompleted(GVTTreeRendererEvent e) {
        --svgCanvasToLoad;

        if (svgCanvasToLoad == 0) {
            frame.setVisible(true);
        }
    }
} 
```

如果我这样做，后面的代码可以工作：

```
frame.setVisible(true);
frame.setVisible(false); 
```

但我不想这样做。如果我不显示帧，SVG 组件将不会开始渲染。

任何想法如何“正确”地做到这一点？

# php - 如何从循环中获取所有日期

> ID：14233950
> 
> 赞同：0
> 
> 时间：2013-01-09T11:11:41.253
> 
> 标签：php, datetime, foreach, while-loop

我正在准备一个节日网站。我有一张带有节日日期日期时间字段的表格。音乐节将在“2013 年 3 月 6 日”和“2013 年 4 月 7 日”之间举行。所以我在这些答案中创建了循环：

```
Schema::create('dates',function($table)
        {
            $table->increments('id');
            $table->date('date');
            $table->timestamps();
        });
        $starting_date = new DateTime('2013-03-06');
        $ending_date = new DateTime('2013-04-06');

        $interval = DateInterval::createFromDateString('1 day');
        $period = new  DatePeriod($starting_date , $interval, $ending_date);

        foreach($period as $dt)
        {

        DB::table('dates')->insert(array(
        'date' => $dt
        ));

        } 
```

数据库填满到 4 月 4 日，循环不超过 30 天。你能帮我找到丢失日子的解决办法吗？

ps：我使用了替代的while循环，结果相同：

```
 $starting_date = new DateTime('2013-03-06');        
            $ending_date = new DateTime('2013-04-07');

            while($starting_date <= $ending_date){
                DB::table('dates')->insert(array(
                    'date' => $starting_date
                ));

            }
    $starting_date->add(new DateInterval('P1D'));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:26:15.370

我想出的一个非常快速而肮脏的解决方案是：

```
$starting_date = strtotime('2013-03-06');
$ending_date = strtotime('2013-04-06');

while($starting_date <= $ending_date)
{
    echo date('d/m/y', $starting_date) . '<br />';
    $starting_date = strtotime('1 day', $starting_date);
} 
```

哪个输出：

```
06/03/13
07/03/13
08/03/13
09/03/13
10/03/13
11/03/13
12/03/13
13/03/13
14/03/13
15/03/13
16/03/13
17/03/13
18/03/13
19/03/13
20/03/13
21/03/13
22/03/13
23/03/13
24/03/13
25/03/13
26/03/13
27/03/13
28/03/13
29/03/13
30/03/13
31/03/13
01/04/13
02/04/13
03/04/13
04/04/13
05/04/13
06/04/13 
```

您可以简单地用您的查询替换回声。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:12:19.830

```
just add 23:59:59 to the end of the $ending_date
$starting_date = new DateTime('2013-03-06 00:00');
$ending_date = new DateTime('2013-04-06 23:59:59');

$interval = new DateInterval('P1D');
$period = new  DatePeriod($starting_date , $interval, $ending_date);
foreach ($period as $date) {
    echo $date->format('Y-m-d')."<br/>";
}
print_r($period);exit; 
```

哪个输出

2013-03-06
2013-03-07
2013-03-08
2013-03-09
2013-03-10
2013-03-11
2013-03-12
2013-03-13
2013-03-14
2013-03-15
2013-03-16
2013-03-17
2013-03-18
2013-03-19
2013-03-20
2013-03-21
2013-03-22
2013-03-23
2013-03-24
2013-03-25
2013-03-26
2013-03-27
2013-03-28
2013-03-29
2013-03-30
2013-03-31
2013-04-01
2013-04-02
2013-04-03
2013-04-04
2013-04-05
2013-04-06

# php - 用户 phpseclib0.3.1 - sftp get - 当我将本地文件留空时，我没有得到正确的文件内容

> ID：14233953
> 
> 赞同：0
> 
> 时间：2013-01-09T11:11:47.250
> 
> 标签：php, get, sftp, phpseclib

如果我使用本地文件名，则文件名会被正确复制，但是，如果您将本地文件名留空，您应该会收到文件的内容。

示例代码：

> $stat = $sftp->get('xmlfile.cml','xmlfile.xml'); 打印“$stat
> ”；

*（这工作正常）*

> $xmlcontent = $sftp->get('cp1301080801_status.xml'); print "文件内容 = $xmlcontent<>";

*（这打印看起来更像文件的统计信息而不是内容。它以日期开头（这是文件的 modofoed 时间戳，后跟一些数字，Web 服务器的名称重复了大约 10 次，并带有一个数字在它之后每次都会增加 - 比如可能是端口号或字节偏移量）*

如果我不必在传输后打开本地文件，事情就会变得更容易。有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:30:31.537

# ruby-on-rails - 如何在数组中指定条件

> ID：14233955
> 
> 赞同：0
> 
> 时间：2013-01-09T11:11:56.103
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3, each

如何在 Rails 中的每个函数中指定条件。

```
@page = 1
@allRecords = #This result will come from API.. It have 500 records.

resultArray = []
@allRecords.each do |t| #need to specify condition here based on @page value
   #processes...
   resultArray << t
end

render :json => resultArray 
```

我会将**@page** number 发送给控制器。然后**resultArray**将发送最终值

```
Input : @page = 1
Output : resultArray = Records 1 - 50

Input : @page = 2
Output : resultArray = Records 51 - 100

Input : @page = 3
Output : resultArray = Records 101 - 150 

like wise... 
```

我怎样才能做到这一点。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:23:09.580

```
@page = 1
@allRecords = #This result will come from API.. It have 500 records.
per_page = 50
resultArray = @allRecords.slice(@page + (@page - 1) * per_page, per_page)
# if result is not Array (Enumerable)
#resultArray = @allRecords.to_a.slice(@page + (@page - 1) * per_page, per_page) 
```

# ruby-on-rails - link_to 语法？想要超链接（variable.id + "string"）在一起

> ID：14233961
> 
> 赞同：1
> 
> 时间：2013-01-09T11:12:22.033
> 
> 标签：ruby-on-rails, string, concatenation, link-to

```
link_to feed_item.votes_for + "Into it!", into_it_micropost_path(feed_item.id) 
```

我基本上希望超链接是字符串“进入它！”旁边的那个变量。

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T11:29:36.037

实际上，在我看来，您的版本应该可以正常工作。

也许试着用另一种方式说：

```
link_to "#{feed_item.votes_for} Into it!", into_it_micropost_path(feed_item.id) 
```

不要忘记要显示链接，您必须将其放入`<%= %>`

# java - Hire Spring MVC 数据绑定器

> ID：14233967
> 
> 赞同：3
> 
> 时间：2013-01-09T11:13:03.363
> 
> 标签：java, spring, spring-mvc, model-view-controller

我在这里阅读了对 spring 数据绑定器的全面解释：[https ://stackoverflow.com/a/3705855/1828986](https://stackoverflow.com/a/3705855/1828986)

我的问题需要更多的知识，让我强调一下：

我有具有复杂字段的 Person 对象 - 例如与街道和数字字段的联系。所以我们可以这样描述：

```
public class Contact {
    private String street;
    private int number;
// setters & getters
};
public class Person {
    private String name;
    private int age;
    private Contact contact;
// setters & getters
}; 
```

我认识到 spring 将其表示为 html 表单作为以下输入字段：
姓名、年龄、contact.street、contact.number

我假设，它可以在取回时将其放回 Person 对象。

我想“雇用”弹簧活页夹来为我提供的文本数据创建对象（不是 HttpRequest 对象）。例如我有文件：

```
name       age        street       number
John       22         MHDrive      2187
Will       32         MHDrive      3212 
```

我可以提供上面的任何结构并想要获取 Person 对象:)

例如

```
Person p = springBinderSomething({{"name","John"},{"age","22"},{"street","MHDrive"},{"number","2187"}}, Person.class); 
```

任何帮助表示感谢
Thx
Saram

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T04:57:53.737

在这种情况下，听起来您想直接使用[DataBinder](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/validation/DataBinder.html)类。您应该能够实例化 DataBinder 的实例，传递要绑定到的对象的实例，然后调用[bind(PropertyValues)](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/validation/DataBinder.html#bind%28org.springframework.beans.PropertyValues%29)方法进行绑定。Spring MVC 通常会为您实例化您的类的新实例，但如果您直接调用 DataBinder，则需要将实例化实例传递给它。 [ServletRequestDataBinder](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/ServletRequestDataBinder.html)在后台创建一个[MutablePropertyValues](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/MutablePropertyValues.html)实例，它使用请求中的参数值填充该实例，然后将其传递给`#bind(PropertyValues)`方法。在您的情况下，您可能希望自己创建一个新实例并直接使用您的数据而不是从请求中填充它。如果您在现有对象中有可用的数据，则 MutablePropertyValues 有许多构造函数，否则您可以`#add(String, Object)`使用您的名称和值调用该方法。

```
Person person = new Person();
DataBinder dataBinder = new DataBinder(person);
MutablePropertyValues mpv = new MutablePropertyValues();
mpv.add("name", "John Doe");
mpv.add("age", 25);
mpv.add("contact.street", "1st Street");
mpv.add("contact.number", 12345);
dataBinder.bind(mpv); 
```

# javascript - 在 javascript 中使用 Twitter Bootstrap 字形图标

> ID：14233971
> 
> 赞同：1
> 
> 时间：2013-01-09T11:13:10.280
> 
> 标签：javascript, image, twitter-bootstrap, glyphicons

有谁知道我如何使用 Twitter Bootstrap glyphicons 在我的 javascript (.js) 文件中替换以下示例中涵盖的图像：

```
var $img = $('<img class="child-opener-image" src="../img/sample.png" title="text here" />'); 
```

在 HTML 中，我将仅使用以下内容作为示例：

```
<i class="icon-search icon-white"></i> 
```

虽然不确定如何在上面的 javascript 示例中包含它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:40:01.573

采用：

```
$('<i class="child-opener-image icon-search icon-white"></i>'); 
```

该图像实际上是一个精灵表，因此在其他情况下使用它有点繁琐-您需要设置正确的背景位置等，所以为什么不使用已经具有该信息的类！

# c# - 克隆编码但关闭 BOM

> ID：14233973
> 
> 赞同：2
> 
> 时间：2013-01-09T11:13:19.470
> 
> 标签：c#, character-encoding, streamwriter, byte-order-mark

假设我有一个编码：

```
Encoding enc; 
```

当这个编码传递给我时，它会被设置为发出一个 BOM。我对 BOM 不感兴趣。我系统中的编码由标头处理。

假设编码是不可变的......我想创建一个与现有编码完全匹配的新编码，但不再发出 BOM。

这样我就可以避免以下不匹配：

```
var data = "áéíóúñ";
var enc = Encoding.UTF8;
long count1 = (long) enc.GetByteCount(data);
long count2;
using(var ms = new MemoryStream())
using(var sw = new StreamWriter(ms, enc))
{
    sw.Write(data);
    sw.Flush();
    count2 = ms.Length;
}
count1.Dump(); //12
count2.Dump(); //15 , oops... BOM was also written 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:19:18.587

```
var enc = UTF8Encoding(false); // UTF-8 without BOM 
```

如果您事先不知道编码，那么您需要一些额外的逻辑，例如

```
switch(enc.CodePage) {
case 65001:
    enc = UTF8Encoding(false);
    break;
case 1200:
    enc = UnicodeEncoding(false, false);
    break;
case 1201:
    enc = UnicodeEncoding(true, false);
    break;
case 12000:
    enc = UTF32Encoding(false, false);
    break;
case 12001:
    enc = UTF32Encoding(true, false);
    break;
default:
    // pass through the original enc unchanged
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:13:55.417

根据@leppie 的评论，R# 帮助我编写了一个抑制 BOM 的包装器......在这里转载以防有人认为这是一个好主意......鉴于@ChristianHayter 显然已经产生了一个更简单（并且显然）完整的答案，改用它可能是个好主意。

```
public class EncodingWrapper : Encoding
{
    private readonly Encoding innerEncoding;
    private readonly bool suppressPreamble;
    private static readonly byte[] EmptyBuffer = new byte[0];

    public EncodingWrapper(Encoding innerEncoding, bool suppressPreamble)
    {
        this.innerEncoding = innerEncoding;
        this.suppressPreamble = suppressPreamble;
    }

    public override byte[] GetPreamble()
    {
        return suppressPreamble ? EmptyBuffer : innerEncoding.GetPreamble();
    }

    public override int CodePage
    {
        get { return innerEncoding.CodePage; }
    }
    public override bool IsSingleByte
    {
        get { return innerEncoding.IsSingleByte; }
    }

    public override bool IsMailNewsSave
    {
        get { return innerEncoding.IsMailNewsSave; }
    }

    public override bool IsMailNewsDisplay
    {
        get { return innerEncoding.IsMailNewsDisplay; }
    }

    public override bool IsBrowserSave
    {
        get { return innerEncoding.IsBrowserSave; }
    }

    public override bool IsBrowserDisplay
    {
        get { return innerEncoding.IsBrowserDisplay; }
    }

    public override int WindowsCodePage
    {
        get { return innerEncoding.WindowsCodePage; }
    }

    public override string WebName
    {
        get { return innerEncoding.WebName; }
    }

    public override string HeaderName
    {
        get { return innerEncoding.HeaderName; }
    }

    public override string EncodingName
    {
        get { return innerEncoding.EncodingName; }
    }

    public override string BodyName
    {
        get { return innerEncoding.BodyName; }
    }

    public override string GetString(byte[] bytes, int index, int count)
    {
        return innerEncoding.GetString(bytes, index, count);
    }

    public override string GetString(byte[] bytes)
    {
        return innerEncoding.GetString(bytes);
    }

    public override int GetMaxCharCount(int byteCount)
    {
        return innerEncoding.GetMaxCharCount(byteCount);
    }

    public override int GetMaxByteCount(int charCount)
    {
        return innerEncoding.GetMaxByteCount(charCount);
    }

    public override Encoder GetEncoder()
    {
        return innerEncoding.GetEncoder();
    }

    public override Decoder GetDecoder()
    {
        return innerEncoding.GetDecoder();
    }

    public override bool IsAlwaysNormalized(NormalizationForm form)
    {
        return innerEncoding.IsAlwaysNormalized(form);
    }

    //public unsafe override int GetChars(byte* bytes, int byteCount, char* chars, int charCount)
    //{
    //    return innerEncoding.GetChars(bytes, byteCount, chars, charCount);
    //}

    public override int GetChars(byte[] bytes, int byteIndex, int byteCount, char[] chars, int charIndex)
    {
        return innerEncoding.GetChars(bytes, byteIndex, byteCount, chars, charIndex);
    }

    public override char[] GetChars(byte[] bytes, int index, int count)
    {
        return innerEncoding.GetChars(bytes, index, count);
    }

    public override char[] GetChars(byte[] bytes)
    {
        return innerEncoding.GetChars(bytes);
    }

    //public override int GetCharCount(byte* bytes, int count)
    //{
    //    return innerEncoding.GetCharCount(bytes, count);
    //}

    public override object Clone()
    {
        return new EncodingWrapper((Encoding)innerEncoding.Clone(), suppressPreamble);
    }

    public override int GetByteCount(string s)
    {
        return innerEncoding.GetByteCount(s);
    }

    public override int GetByteCount(char[] chars)
    {
        return innerEncoding.GetByteCount(chars);
    }

    public override int GetByteCount(char[] chars, int index, int count)
    {
        return innerEncoding.GetByteCount(chars, index, count);
    }

    //public override int GetByteCount(char* chars, int count)
    //{
    //    return innerEncoding.GetByteCount(chars, count);
    //}

    public override byte[] GetBytes(char[] chars)
    {
        return innerEncoding.GetBytes(chars);
    }

    public override byte[] GetBytes(char[] chars, int index, int count)
    {
        return innerEncoding.GetBytes(chars, index, count);
    }

    public override int GetBytes(char[] chars, int charIndex, int charCount, byte[] bytes, int byteIndex)
    {
        return innerEncoding.GetBytes(chars, charIndex, charCount, bytes, byteIndex);
    }

    public override byte[] GetBytes(string s)
    {
        return innerEncoding.GetBytes(s);
    }

    public override int GetBytes(string s, int charIndex, int charCount, byte[] bytes, int byteIndex)
    {
        return innerEncoding.GetBytes(s, charIndex, charCount, bytes, byteIndex);
    }

    //public override int GetBytes(char* chars, int charCount, byte* bytes, int byteCount)
    //{
    //    return innerEncoding.GetBytes(chars, charCount, bytes, byteCount);
    //}

    public override int GetCharCount(byte[] bytes)
    {
        return innerEncoding.GetCharCount(bytes);
    }

    public override int GetCharCount(byte[] bytes, int index, int count)
    {
        return innerEncoding.GetCharCount(bytes, index, count);
    }
} 
```

# javascript - JS图像杂耍中的重置间隔

> ID：14233974
> 
> 赞同：0
> 
> 时间：2013-01-09T11:13:21.403
> 
> 标签：javascript

如何在 JavaScript 中重置间隔 onclick。我有以下教程，一切正常，我可以让杂耍在点击时重新开始。

```
var myImage = document.getElementById("mainImage");

var imageArray = ["_images/overlook.jpg","_images/winery_sign.jpg","_images/lunch.jpg",
             _images/bigSur.jpg","_images/flag_photo.jpg","_images/mission_look.jpg"];
                 var imageIndex = 0;

function changeImage (){
    myImage.setAttribute("src",imageArray [imageIndex]);
    imageIndex++;

if (imageIndex >= imageArray.length){
    imageIndex = 0;
}
 }

 var intervalHandler = setInterval(changeImage, 5000);
myImage.onclick = function (){
    clearInterval(intervalHandler);
}

**// The code below doesn’t work**

 var intervalReset = clearInterval;
myImage.onclick = function (){
    setInterval(intervalReset);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:19:02.873

您设置`onclick`了两次，它**替换**了处理程序，因此只有后面的定义才会计算在内。改用`addEventListener`：

```
myImage.addEventListener("click", function() {
    //first set of stuff
});

myImage.addEventListener("click", function() {
    //more stuff
}); 
```

只有你的第一个功能才有意义。您可能还想重置`imageIndex`为 0。

总而言之，您的代码应如下所示：

```
var intervalHandler = setInterval(changeImage, 5000);
myImage.addEventListener("click", function() {
    clearInterval(intervalHandler);
    imageIndex = 0;
    intervalHandler = setInterval(changeImage, 5000); //restart again
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:21:04.277

setInterval 返回一个用于清除间隔的间隔 ID：

```
var intervalDuration = 5000;
myImage.onclick = function (){
    clearInterval(intervalHandler);
    // Assumes intervalDuration is defined
    intervalHandler = setInterval(changeImage, intervalDuration);
}; 
```

# php - 取消设置后ajax php

> ID：14233976
> 
> 赞同：0
> 
> 时间：2013-01-09T11:13:25.953
> 
> 标签：php, javascript, ajax

我正在使用 js ajax 和 php 制作一个像购物车一样的脚本。

此代码行用于在保存项目时打印删除：

```
if($_POST['button-statut']=='save'){        
    echo "remove";
    unset($_POST['button-statut']);
}

if($_POST['button-statut']=='remove'){
    echo "save";
    $_POST['button-statut']='save';
} 
```

当我单击保存按钮时，设置了值“保存”，如果我单击删除按钮，看起来该值仍然是“保存”而不是“删除”。我能做些什么 ？

保存功能：

```
$.post(host+"button.php", {"button": key, "button-statut":'save'});

    $('#button'+key+'').load(host +'button.php', {"button": key, "button-statut":'save'}); 
```

删除功能：

```
 $.post(host+"button.php", {"button": key, "button-statut":'remove'});

    $('#button'+key+'').load(host +'button.php', {"button": key, "button-statut":'remove'}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:42:34.313

这些变量是超全局的：

```
$GLOBALS
$_SERVER
$_GET
$_POST
$_FILES
$_COOKIE
$_SESSION
$_REQUEST
$_ENV 
```

我们不能取消设置或清除输入数组。然而，我们所做的是用一个对象替换它们（或清空它的值）

# java - 在 Liferay 6.1 中更改主题页面的标题

> ID：14233979
> 
> 赞同：3
> 
> 时间：2013-01-09T11:13:32.153
> 
> 标签：java, javascript, liferay, liferay-6, page-title

我在 liferay 6.1 中创建了一个主题。现在我的问题是如何更改主题页面的标题。例如：关于我们页面的标题为“**关于我们 -liferay** ”，我想将其更改为“**关于我们**”。

我已经尝试使用 javascript 来做这个： **document.title="aboutus";**

但在页面加载之前，它会显示默认标题（Aboutus-liferay），然后在页面加载后出现这个“aboutus”标题。

我想要自定义标题。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:49:49.067

我刚刚补充说：

```
**<head>
    <title>$the_title</title>
 </head>** 
```

在我的 portal_normal.vm 文件中，这解决了我的问题。**现在，无论我在Manage Pages --> pages 页面**的 html 标题中添加什么标题，都会显示在标题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:27:43.270

编辑主题内的标题`portal_normal.vm`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:36:47.690

在`portal_normal.vm`速度文件中，将您的标题添加到以下代码片段：

```
<head>
    <title>your_title</title>
</head> 
```

**编辑**

如果您在谈论 JSP 页面，您可以使用：

```
com.liferay.portal.util.PortalUtil.setPageTitle(String, title, HttpServletRequest request); 
```

在相应的页面正文中。

# cross-browser - RWD-navigation off canvas-pattern：如何滚动弹出区域 - 仅？

> ID：14233980
> 
> 赞同：1
> 
> 时间：2013-01-09T11:13:35.610
> 
> 标签：cross-browser, navigation, cross-platform, responsive-design, smartphone

我正在使用很棒的 Brad Frosts 左导航弹出按钮进行响应式设计导航。(http://codepen.io/bradfrost/pen/IEBrz)。

我需要一些关于弹出的建议。我需要单独滚动弹出区域，而不影响主要内容区域——比如 facebook 应用程序。

到目前为止，当涉及到智能手机的固定、可滚动区域（内部包含复杂元素）以及相对高度和度量（该站点是响应式的）的交叉支持时，我的经验非常糟糕。到目前为止，我已经尝试过 iScroll 和 jQuery mobile。

是否有可能仅在没有大量 javascript 插件、客户端嗅探和 CSS 供应商特定的黑客攻击的情况下完成滚动弹出窗口？

我的客户真的很喜欢弹出模式。性能、跨设备支持和非 hacky 代码是“必备”。原生的外观和感觉是“可以拥有的”。我没有问题推荐另一种解决导航的方法，我只需要确定我的决定。当然，一切都可以完成——但要付出什么代价？

在我切断绳索之前，你有什么建议或建议:)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T13:34:27.823

您发布的预览看起来非常有希望！

我建议您使用一点 JavaScript 来检测窗口高度。然后，您可以将弹出面板的高度设置为与页面相同的高度并使用`display: block; overflow: auto`. （它可能已经设置了块显示）。

这将迫使面板在自身内部滚动而不是进一步流动。

有几点需要牢记：

*   您需要重新计算窗口更改或方向更改的高度；
*   触摸屏设备往往不显示滚动条，这是一把双刃剑，因为这意味着当您向上/向下滑动时，您会获得一种非常棒的类似应用程序的感觉。然而，这也意味着用户可能需要更多的视觉提示，以便滚动查看！

# c# - 在 WebKit WebBrowser 控件中实现 InvokeMember 方法

> ID：14233981
> 
> 赞同：3
> 
> 时间：2013-01-09T11:13:42.033
> 
> 标签：c#, visual-studio-2010, webkit, bots

我正在制作一个机器人（用于基因组研究目的），它将访问特定的网站并在网页上插入一些输入。

我正在使用 Webkit.Net WebBrowser 控件，我看不到任何以编程方式单击按钮的方法，因为没有像 InvokeMember 这样的方法。有没有办法实现点击按钮？

注意：我在stackoverflow上搜索了这个问题并找到了一些技术，但我认为它不能在这里完成，因为 在我的情况下[，搜索到的解决方案](https://stackoverflow.com/questions/5548702/invoke-button-submit-using-webkitbrowser) 信息的链接没有通过查询字符串等传递。

# c - 使用 offsetof 并在 android ndk 中包含 termios.h 时，存储大小不是恒定的

> ID：14233983
> 
> 赞同：1
> 
> 时间：2013-01-09T11:13:52.540
> 
> 标签：c, android-ndk, compiler-errors

编译时遇到一个奇怪的错误

```
#include <termios.h>
#include <stddef.h>
struct Test {
    int a;
    int b;
};
void test() {
    static int test_array[(offsetof(struct Test,a)) > 0 ? 2 : 1];
} 
```

使用 arm-linux-androideabi-gcc -c：

```
test.c:8:13: error: storage size of 'test_array' isn't constant 
```

奇怪的是，当我删除

```
#include <termios.h> 
```

整个事情编译没有错误。此外，当我使用安装在我的 ubuntu 系统上的 gcc 时，它不会抱怨独立于包含 termios.h。Ayone任何想法为什么？

背景：我正在尝试编译 ghc（glasgow haskell 编译器）android 交叉编译器，而 hs2hsc 在这种情况下失败。

# c# - WPF内部用户控件上的键盘命令绑定

> ID：14233985
> 
> 赞同：0
> 
> 时间：2013-01-09T11:13:58.180
> 
> 标签：c#, wpf, events

我正在尝试使用以下代码在 WPF 窗口上进行键盘命令绑定：

```
 RoutedCommand cmndSettings = new RoutedCommand();
  cmndSettings.InputGestures.Add(new KeyGesture(Key.S, ModifierKeys.Alt));
  CommandBindings.Add(new CommandBinding(cmndSettings, mnuSettings_Click));

  private void mnuSettings_Click(object sender, ExecutedRoutedEventArgs e)
  {
      MessageBox.Show("key pressed");
  } 
```

如果我将此代码放在 xaml Window 的 cs 文件中，**这**将正常工作。但是，如果我将它放在用户控件的 cs 文件中，该文件在父窗口中动态加载，**则键盘事件根本不会**在那里触发。**我需要做什么才能让它在用户控件中工作？**谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:36:00.643

要在用户控件下使用控件，容器/用户控件能够正确聚焦非常重要。否则，可能无法正常工作。

# php - 如何在 ext js4 中选择选项卡时呈现不同的视图？

> ID：14233986
> 
> 赞同：0
> 
> 时间：2013-01-09T11:13:59.040
> 
> 标签：php, extjs, extjs4

1）我有一个想要显示在视图中的 json 文件。

```
{           
    "contents": [
                {
                    "title":'JWorld',
                    "image":'image/e-learning/elearning.png',

                    "subtitle":[
                    {
                        "categories":'Aus',
                    },
                    {
                        "categories":'England',
                    }                
                    ]
                },
                {
                    "title":'JIndia',
                    "image":'image/Content/History_of_India.jpg',
                    "subtitle":[
                    {
                        "categories":'History',
                    },
                    {
                        "categories":'India palace',
                    }                
                    ]
                },
                {
                    "title":'JMaharastra',
                    "image":'image/Content/Geography.jpg',
                    "subtitle":[
                    {
                        "categories":'History Maharastra',
                    },
                    {
                        "categories":'Maharastra Heros',
                    }                
                    ]
                }
              ]
} 
```

2）我的视图文件：--

```
Ext.define('Balaee.view.kp.dnycontentcategories.ContentcategoriesView',
{
    extend:'Ext.view.View',
    id:'contentcategoriesViewId',
    alias:'widget.ContentcategoriesView',
    store:'kp.DnycontentcategoriesStore',
    config:
    {
        tpl:'<tpl for="0">'+
                '<div class="main">'+
                '</br>'+
                '<b>{title}</b></br>'+
                '<img src={image} hight="50" width="100"></br>'+
                '</div>'+
                '</tpl>',
        itemSelector:'div.main',
    }
});// End of class 
```

3）我正在使用选项卡面板并使用 json 文件在其中动态添加选项卡。

```
Ext.define('Balaee.view.kp.dnycontentcategories.Contentcategories',{
    extend:'Ext.tab.Panel',
    requires:[
              'Balaee.view.kp.dnycontentcategories.ContentcategoriesView','Balaee.view.kp.dnycontentcategories.ContentcategoriesView1'
             ],
    id:'contentcategoriesId',
    alias:'widget.Contentcategories',
    height:500,
    items:[

    ],//end of items square
});// End of login class 
```

4）我的商店文件：--

```
Ext.define('Balaee.store.kp.DnycontentcategoriesStore',{
    extend: 'Ext.data.Store',
    model: 'Balaee.model.kp.DnycontentcategoriesModel',
    autoLoad:true,
//    filters: [{
//        property: 'title',
//    }],
    proxy:
    {
        type:'ajax',
        api:
        {
            read:'data/content.json',
            //create: ,
            //update: ,
            //destroy: ,
        },//End of api 
        reader:
        {
            type:'json',
            root:'contents',
            //successProperty: ,
        }//End of reader
    }//End of proxy
});//End 
```

5）我的控制器文件一些代码在这里我从json文件中动态添加一些选项卡。并选择特定的选项卡我想要从json文件中获得不同的特定值。但我对第一个选项卡有相同的看法。我怎么解决这个问题。

```
init: function(){
    console.log("inside content controller");
    this.control({
        'Contentcategories':
        {
            render:this.renderFunction,
        }
    });//End of control
},//End of init() function
renderFunction:function(){
    console.log("Inside render function");
    var tabPanel = Ext.getCmp('contentcategoriesId');       // tabpanel  
    var tabPanelView = Ext.getCmp('contentcategoriesViewId');   // tabpanel view

    var storeObject= this.getStore('kp.DnycontentcategoriesStore'); // store
    storeObject.on('load',function(){
        storeObject.each(function(model){
            //tabPanelView.store().filter('title',model.get('title')),
            console.log(model.get('title'));
            console.log(model.get('categories'));
            tabPanel.add({title:model.get('title'),
                            id:model.get('title'),
                            //html:"<image src=model.get('image')>",
                            xtype:'ContentcategoriesView',              
                        }); //End of add function 
        });// End of storeObject function
        tabPanel.setActiveTab(0);
    });
},// End of render function 
```

请给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:56:21.587

您的代码存在一些问题。

您定义`ContentcategoriesView`- 它是您扩展的组件；但是您给它一个 id ( `contentcategoriesId`) 但您正在创建多个这些组件 - 这是没有意义的，因为每个组件实例的 id 必须是唯一的。

然后，您将商店附加到此视图，这意味着所有组件都将呈现相同的内容。

如果我理解正确，您希望 json 中的每个条目都成为不同的选项卡。

我会采取这个方向（代码未经测试，但应该给你一个方向）：

```
Ext.define('Balaee.view.kp.dnycontentcategories.ContentcategoriesView',
{
    extend:'Ext.panel.Panel', // Notice it's a panel.
    alias:'widget.ContentcategoriesView',

    config:
    {
        tpl: '<div class="main">' +
             '</br>' +
             '<b>{title}</b></br>' +
             '<img src={image} hight="50" width="100"></br>' +
             '</div>'
        itemSelector:'div.main',
    }
}); 
```

接着：

```
storeObject.on( 'load',function() {
    storeObject.each( function( model ) {
        tabPanel.add({
            xtype: 'ContentcategoriesView',
            title: model.get( 'title' ),
            id:    model.get( 'title' ),
            data:  model
        }); 
    });
    tabPanel.setActiveTab(0);
}); 
```

# zend-framework2 - 如何在 zend 框架 2 的控制器中使用翻译助手

> ID：14233988
> 
> 赞同：4
> 
> 时间：2013-01-09T11:14:05.153
> 
> 标签：zend-framework2, zend-translate

有没有可能的方法来翻译控制器中的字符串而不是视图？

现在，在我的控制器中，如果我传递如下字符串：

```
public function indexAction() {
    return array('message' => 'example message');
} 
```

它将在 index.phtml 中翻译

```
<?php print $this->translate($message);?> 
```

它运行良好，但 poeditor 无法从控制器文件中找到字符串

猜猜如果我可以使用类似的东西会很酷：

```
public function indexAction() {
    return array('message' => $view->translate('example message'));
} 
```

在控制器中

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-09T11:23:36.647

要在控制器中使用视图助手，您可以使用“getServiceLocator”

```
$helper = $this->getServiceLocator()->get('ViewHelperManager')->get('helperName'); 
```

您可以使用 php getText 函数 ___('my custom message') 并在 poedit 中添加“_”作为源关键字（在目录属性中），以便 poedit 过滤来自控制器的字符串。例如：

```
array('message' => _('my custom message')); 
```

根据您的代码，您可以像这样直接使用帮助程序

```
$translate = $this->getServiceLocator()->get('ViewHelperManager')->get('translate');

array('message' => $translate('my custom message')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T18:14:13.020

您不应该使用视图的插件管理器来访问翻译助手。抓住[我已经解释过的翻译这里](https://stackoverflow.com/questions/14261115/zf2-use-translator-in-controller)。

该帖子的副本/粘贴：

翻译是通过`Translator`. 翻译器是一个对象，例如注入到视图助手中，因此如果您调用该视图助手，它会使用翻译器来翻译您的字符串。对于这个答案，我假设您已将翻译器配置[为与骨架应用程序相同](https://github.com/zendframework/ZendSkeletonApplication/blob/master/module/Application/config/module.config.php#L55-L69)。

最好的方法是使用工厂将其作为依赖项注入到您的控制器中。控制器配置：

```
'controllers' => array(
  'factories' => array(
    'my-controller' => function($sm) {
      $translator = $sm->getServiceLocator()->get('translator');
      $controller = new MyModule\Controller\FooController($translator);
    }
  )
) 
```

和控制器本身：

```
namespace MyModule;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\I18n\Translator\Translator;

class FooController extends AbstractActionController
{
  protected $translator;

  public function __construct(Translator $translator)
  {
    $this->translator = $translator;
  }
} 
```

另一种方法是在您的操作中从服务管理器中拉出翻译器，但这不太灵活、可测试性较差且难以维护：

```
public function fooAction()
{
  $translator = $this->getServiceManager()->get('translator');
} 
```

在这两种情况下，您都可以使用`$translator->translate('foo bar baz')`来翻译您的字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T13:29:41.303

为此，我使用了一个简单的插件。然后在控制器中你可以做 $this->translate('example message');

```
class Translate extends AbstractPlugin {

    private $translator;

    public function __construct(PluginManager $pm) {
        $this->translator = $pm->getServiceLocator()->get('Translator');        
    }

    public function __invoke($message, $textDomain = 'default', $locale = null) {
        return $this->translator->translate($message, $textDomain, $locale);
    }

} 
```

# ruby-on-rails - 这是安装最新 Rails 安全补丁的正确方法吗？

> ID：14233992
> 
> 赞同：1
> 
> 时间：2013-01-09T11:14:39.540
> 
> 标签：ruby-on-rails, patch

我需要安装更新站点以保护它免受最近发现的（12 年 1 月）Rails 漏洞的影响：

[https://groups.google.com/forum/#!topic/rubyonrails-security/61bkgvnSGTQ/discussion](https://groups.google.com/forum/#!topic/rubyonrails-security/61bkgvnSGTQ/discussion)

我正在安装它的站点运行的是稍旧版本的 rails，因此我不想仅更新 gem 来修补它。我刚刚和朋友一起经历过这件事，但也想检查一下人群的智慧。

**这是正确的修补方法吗？**

1.  将我当前使用的 Rails 版本分叉到我自己的 Github 帐户上的存储库中
2.  在本地克隆存储库
3.  `cd`通过进入 Rails 项目并键入来应用补丁`patch -p1 < patch_filename`
4.  将更新推送回 Github
5.  更改我的 gemfile 以指向我的分叉版本的 rails`gem "rails" , :git => "https://github.com/petenixey/newrailsversion"`
6.  部署（在我的情况下到 Heroku）

这是正确的还是有什么会出错的？

# php - 我的查询哪里出错了？

> ID：14233994
> 
> 赞同：0
> 
> 时间：2013-01-09T11:14:43.707
> 
> 标签：php, mysql, join

我在 PHP/MySQL 方面是个菜鸟，到目前为止我已经成功了，但是，现在我需要从两个相关的表中获取信息。我对我需要做的事情做了很多研究，但似乎无法弄清楚我哪里出错了。

**问题：如何从 shortlinks 表中获取与 shortlink_analytics 中的短链接相关的链接？**

我收到错误：**警告：mysql_fetch_array() 期望参数 1 是资源，给定的布尔值**

我的表格如下：

**短链接表**

ID

短链接

关联

创建时间

由...制作

**shortlink_analytics 表**

短链接

推荐人

命中时间

用户IP

用户代理

到目前为止我尝试过的代码是：

```
$linecount = 1;
//$mostPop is where I think I have gone wrong and this is where the warning refers to
$mostPop = "SELECT shortlink, COUNT(shortlink) FROM shortlink_analytics JOIN shortlinks ON shortlink_analytics.shortlink = shortlinks.shortlink GROUP BY shortlink ORDER BY COUNT(shortlink) DESC LIMIT 10";
            $loadPop = mysql_query($mostPop);
            echo '<table id="middleIndex">';
            echo '<tr><td class = "overFlow"><h2>Most Popular Shortlink</h2></td></tr>';
            echo '<tr>';
            while($row = mysql_fetch_array($loadPop))
            {
                    echo '<td class = "overFlow">'.$row[1].' visits - <a href = "info.php?link='. $row['shortlink'] .'">hud.ac/' . $row['shortlink'] . '</a></td>';
                    echo '</tr>';
                    $linecount++;
            }
            echo '<tr id="indexMiddle"><td id="hand" class = "overFlow"><a onclick="indexMostPopular()">View More</a></td></tr>';
                echo '</table>'; 
```

我相信我对如何使用**JOIN**或形成成功连接所需的参数没有足够的了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:21:14.210

你`shortlink`在这两个表中都会产生模棱两可的情况。试试这个**sql 语句**：

```
$mostPop = "SELECT shortlink_analytics.shortlink AS short, 
COUNT(shortlink_analytics.shortlink) AS shortcount,
(SELECT link FROM shortlinks 
WHERE shortlinks.shortlink = shortlink_analytics.shortlink) AS shLink
FROM shortlink_analytics 
JOIN shortlinks ON shortlink_analytics.shortlink = shortlinks.shortlink 
GROUP BY shortlink_analytics.shortlink 
ORDER BY COUNT(shortlink_analytics.shortlink) DESC LIMIT 10"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:18:00.243

试试这个（在 mysql 中运行此查询，如果它正在工作，请将其添加到 php 脚本中）

```
SELECT 
    shortlink_analytics.shortlink, COUNT(shortlink_analytics.shortlink)
FROM
    shortlink_analytics
INNER JOIN
    shortlinks ON shortlink_analytics.shortlink = shortlinks.shortlink
GROUP BY shortlink_analytics.shortlink
ORDER BY COUNT(shortlink_analytics.shortlink) DESC
LIMIT 10 
```

并检查`mysql_effected_rows()`函数以检查查询是否会返回某些行

# python - 使用变量动态地将新项目添加到字典

> ID：14233996
> 
> 赞同：1
> 
> 时间：2013-01-09T11:14:46.807
> 
> 标签：python, dictionary

我目前正在从文件中读取值并将它们拆分为参数和值，例如 @id=7 变为 param = @id, value = 7。我想使用 param 变量作为字典中的新键。但是，它没有按预期工作。我正在使用以下代码。

```
list1 = {}

with open('C:/Temp/file1.txt') as f:
    lines = f.read().splitlines()

for line in lines:
    middle = line.find("=")
    param = line[:middle]
    value = line[middle+1:]
    list1[param] = value 
```

在此代码中，字典键和值变为 7。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:18:29.117

你必须定义你的字典（`d`是一个好名字）。你可以这样做：

```
with open('C:/Temp/file1.txt') as f:#
    d = dict(line.strip().split('=', 1) for line in f)

for k,v in d.iteritems():
    print("param = {0}, value = {1}".format(k,v)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T11:24:51.480

如果您将 list1 定义为 dict`list1 = {}`那么您的打印语句不正确。

```
print("param = " + list1[param] + ", value = " + value) 
```

两者都是7\. 因为会给你它的内容的价值，而不是它的关键`list1[param]`。`value``list1[param]`

之后尝试通过打印来查看字典。

```
print(list1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:14:43.037

I know this wasn't what you were asking for, but I would suggest to look at [ConfigParser](http://docs.python.org/2/library/configparser.html#configparser-objects). This is a standard way to use configuration files.

# ios - 确保 AM / PM（期间）不出现在 NSDateFormat stringFromDate

> ID：14233997
> 
> 赞同：8
> 
> 时间：2013-01-09T11:14:49.590
> 
> 标签：ios, objective-c

Unicode 日期格式模式指南（[此处](http://www.unicode.org/reports/tr35/tr35-19.html#Date_Format_Patterns)）指出，将“a”附加到格式将获得句点（例如 AM 或 PM），例如，

```
[formatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss a"]; 
```

但是，我希望确保不出现期间信息，但我找不到执行此操作的格式字符串。我使用的格式字符串如下：

```
[formatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"]; 
```

不幸的是，当我使用 stringFromDate 时，我得到以下信息：

**2013-01-09T11:11:00 AM**

我不希望简单地从结果字符串中删除 AM 或 PM，因为不同日历等中的句点语法可能不同，我只想停止出现句点信息。

----8<------

考虑以下代码

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setLocale:[NSLocale currentLocale]];
[formatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];
[formatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"];
NSString *stringDate = [formatter stringFromDate:[NSDate date]];

self.labelOutput.text = stringDate;

[formatter release]; 
```

此代码将生成我想要的格式的字符串 - 但是出于内存管理原因我不能使用它。我正在开发的应用程序受到 NSDateFormatter 内存泄漏的困扰。所以我们使用一个单例类来为应用程序提供一个固定数量的 NSDateFormatters，这些 NSDateFormatters 永远不会被释放，因此我们最大限度地减少了泄漏的内存量。不幸的是，即使我这样应用日期格式字符串，这些静态 NSDateFormatter 也会附加 AM / PM：

```
NSDateFormatter *formatter = [MyDateFormatter dateFormat:kFormatDateMediumStyleTimeShortStyle];

[formatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];
[formatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T19:38:10.557

根据[日期格式化程序在运行相同 iOS 版本的不同设备上的不同输出](https://stackoverflow.com/questions/7885742/date-formatter-different-output-on-different-devices-running-same-ios-version#comment14113662_7890224)，将您的本地设置`NSDateFormatter`为`en_US_POSIX`将解决此问题。

附加设置 Local 您可能希望避免时区设置问题，例如：
[formatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T11:33:24.610

这实际上取决于用户的设置。

请参阅数据格式化指南的[固定格式](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW13)部分。注意这句话：

> 在 iOS 中，**用户可以覆盖**默认的 AM/PM 与 24 小时时间设置。这可能会导致 NSDateFormatter 重写您设置的格式字符串。

在段落的最后：

> 时间的表示可以是 13:00。但是，在 iOS 中，**如果用户将 24-Hour Time 切换为 Off**，则时间可能是下午 1:00。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-24T12:45:48.037

您需要在此处使用 POSIX 示例代码

```
 NSDateFormatter *rfc3339DateFormatter = [[NSDateFormatter alloc] init];
      NSLocale *enUSPOSIXLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];

      [rfc3339DateFormatter setLocale:enUSPOSIXLocale];
      [rfc3339DateFormatter setDateFormat:@"yyyy'-'MM'-'dd'T'HH':'mm':'ss'Z'"];
      [rfc3339DateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

      // Convert the RFC 3339 date time string to an NSDate.
      NSDate *date = [rfc3339DateFormatter dateFromString:rfc3339DateTimeString]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T13:18:04.410

这是我已经确定的答案。这有点简单，但它可以完成工作。

```
@interface NSDateFormatter (Utils)

- (NSString *)stringWithNoPeriodInformationFromDate:(NSDate*)date;

@end

@implementation NSDateFormatter (Utils)

- (NSString *)stringWithNoPeriodInformationFromDate:(NSDate*)date
{
    NSString *stringWithPotentialPeriodInformation = [self stringFromDate:date];
    NSString *stringWithNoAMInformation = [stringWithPotentialPeriodInformation stringByReplacingOccurrencesOfString:[self AMSymbol] withString:@""];
    NSString *stringWithNoPeriodInformation = [stringWithNoAMInformation stringByReplacingOccurrencesOfString:[self PMSymbol] withString:@""];

    return stringWithNoPeriodInformation;
}

@end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T21:32:26.547

一种选择是创建自己的 NSFormatter。当我无法让 Xcode 的 Interface Builder 中的格式化程序来执行我想要的操作时，我在我的代码上这样做了。当然，我只是在寻找小时、分钟和秒，而不是完整的日期。

至于内存泄漏：如果可以，请使用 ARC。如果不能，请使用 Xcode 的静态分析器尝试追踪不正确的保留计数。