# StackOverflow 问答 15158000-15158999

# android - 从线程更新 UI

> ID：15158000
> 
> 赞同：-3
> 
> 时间：2013-03-01T12:39:24.910
> 
> 标签：android, android-ui

我在尝试自动更新我的 android 活动中的视图时遇到了一些麻烦。该应用程序显示一些消息，如聊天。我使用 ListView 将消息与 ArrayAdapter 一起放置。

我用这个方法来更新 ListView

```
public void loadMessages() {
ArrayList<String> messages = this.dbHelper.getMessages();
conversationArrayAdapter.clear();
conversationArrayAdapter.addAll(messages);
conversationArrayAdapter.notifyDataSetChanged();
} 
```

我的想法是放置一个调用该方法的线程，但是当我尝试这样做时，出现以下错误。

> 只有创建视图层次结构的原始线程才能接触其视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:43:54.077

因为您正在尝试从 Thread 访问或更新 UI 元素。为避免此错误，您将使用 [runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)从 Thread 更新 UI：

```
Your_Current_Activity.this.runOnUiThread(new Runnable() {

  @Override
    public void run() {

        // Update UI here    
        loadMessages();                             
    }
}); 
```

第二个解决方案是使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)而不是线程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:46:35.280

使用此代码。

```
public class MainActivity extends Activity
{
    private Timer autoUpdate;

    @Override
     public void onResume()
     {
        super.onResume();
        autoUpdate = new Timer();
        autoUpdate.schedule(new TimerTask()
        {
            @Override
            public void run()
            {
                runOnUiThread(new Runnable()
                {
                    public void run()
                    {
                        updateScore();
                    }
                });
            }
        }, 0, 5000); // updates each 5 seconds
     }

     @Override
     public void onPause()
     {
         autoUpdate.cancel();
         super.onPause();
     }

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        // initialize view layout
        super.onCreate(savedInstanceState);
        setContentView(R.layout.cleanermain);
        super.onResume();
    }

        private void updateScore()
        {
            // decide output
            // update cricket score
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:46:56.927

UI 应该只从 UI（主）线程更新。这是使用 AsyncTask 的解决方案。

```
public void asyncCallWithSchedule() {
        final Handler handler = new Handler();
        Timer timer = new Timer();
        TimerTask doAsynchronousTask = new TimerTask() {
            @Override
            public void run() {
                handler.post(new Runnable() {
                        public void run() {
                            try {
                                new SearchAsync().execute(txtSearch.getText().toString());
                            }
                        });
                }
            };
            timer.schedule(doAsynchronousTask, 0, 2000);
        }
} 
```

异步任务类：

```
private class SearchAsync extends
AsyncTask < String, Object, List < Users >> {

    @Override
    protected List < Users > doInBackground(String...params) {
        // Call DB here   
        return null;
    }

    @Override
    protected void onPostExecute(List < Users > result) {
        super.onPostExecute(result);
        // Update UI here
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:47:15.390

简单的：

```
public void loadMessages() {
    ArrayList<String> messages = this.dbHelper.getMessages();
    conversationArrayAdapter.clear();
    conversationArrayAdapter.addAll(messages);

    new Handler(Looper.getMainLooper()).post(new Runnable() {
        public void run() {
            conversationArrayAdapter.notifyDataSetChanged();
        }
    });
} 
```

# three.js - 如何检查截锥体剔除在 Three.js 中是否按预期工作？

> ID：15158011
> 
> 赞同：1
> 
> 时间：2013-03-01T12:39:56.243
> 
> 标签：three.js

我正在尝试调试复杂的 Three.js 场景的一些性能问题，我很想知道如何确定截锥体剔除是否按预期工作。

就目前而言，即使我放大并且只有几个物体可见，我的 FPS 也很差。我试图弄清楚为什么会这样，因为如果不考虑视野之外的对象，它应该是 60fps。

我想我正在寻找的是一种找出每帧渲染的对象数量（以及任何其他有用的指标）的方法，这样我就可以看到当我放大/强制对象离开视野时它是如何变化的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:56:55.750

尝试绘图`renderer.info.render`。

# sql-server - 将本地数据库用作链接服务器时出现“无法完成延迟准备”错误

> ID：15158017
> 
> 赞同：25
> 
> 时间：2013-03-01T12:40:07.340
> 
> 标签：sql-server, sql-server-2008, stored-procedures, linked-server

我从本地 Sql Server 创建了一个链接服务器，如

[http://sqlserverplanet.com/dba/local-linked-server](http://sqlserverplanet.com/dba/local-linked-server)

但是，当我尝试在链接服务器中执行存储过程时，它会抛出：

```
Deferred prepare could not be completed 
```

错误和无效的对象名称“表名”

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-08T04:14:15.377

您是否遗漏了对象名称中的某些内容。它应该总是像 Database.User.ObjectName（例如 Northwind.dbo.Customers）

通过链接服务器运行查询时提供完整的对象名称。

在链接服务器上执行时，查询存储过程可能是这样的：

```
Select  *
From    OPENQUERY([COM2\SQLEXPRESS], 'Exec Northwind.dbo.CustOrderHist ''CUST1''') as TB1 
```

执行存储过程时检查 SET FMTONLY OFF 等选项。

按照此链接进行 OPENQUERY：http: [//msdn.microsoft.com/en-us/library/ms188427.aspx](http://msdn.microsoft.com/en-us/library/ms188427.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-11T17:16:32.557

即使您在查询中错误地命名了列，您也会看到此错误。例子：

```
select *
from openquery(
     lnksrv
    ,'select top 10 * from db.schema.table where colunm = 10'
) 
```

并且列名是`column`，不是`colunm`。

底线是首先检查要发送到远程服务器的实际查询的正确性，然后将其包装`openquery`并重新测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-06T16:13:20.860

我在尝试通过链接服务器查询时遇到了同样的错误。但是，我查询的是目标服务器上的视图，而不是存储过程。

目标服务器的视图是这样创建的：

```
CREATE VIEW vABC AS
    SELECT ... FROM Table1
    UNION ALL
    SELECT ... FROM Table2 
```

为了解决这个问题，我做了一个改变视图，并将两个 UNION 语句包装在一个子查询中，如下所示：

```
CREATE VIEW vABC AS
    SELECT * FROM (
        SELECT ... FROM Table1
        UNION ALL
        SELECT ... FROM Table2
    ) T 
```

必须是原始视图的一些元数据问题。

希望这对你有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-28T12:14:22.153

对我来说同样的问题：我解决了它只是修复了未正确命名的“目标”对象。

就我而言，我正在搜索`[testDb].[Business.Customer]`表格，但正确的名称是`[testDb].[Business].[Customer]`......与您的错误相同：

> Il provider OLE DB "SQLNCLI10" per il server collegato "RIBOWEB10\SQLEXPRESS" ha restituito il messaggio "Deferred prepare could not be completed."。

*我认为 SQL Server 尝试动态解析与真实对象不直接匹配的名称，但不确定。*

很简单，我希望这会有所帮助:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-19T15:22:38.457

我有同样的问题，我遇到的问题是链接服务器连接中指定的用户无权访问我试图访问的数据库。

# javascript - p:dataTable livescroll 覆盖 js 函数

> ID：15158021
> 
> 赞同：1
> 
> 时间：2013-03-01T12:40:34.773
> 
> 标签：javascript, jquery, jsf, jsf-2, primefaces

*JSF-2.0、Mojarra 2.1.19、PrimeFaces 3.4.1*

从我的上一篇可以看出。我正在使用的问题`p:dataTable`能够显示某种状态/评论模块。还有一个 JS/jQuery 函数可以编辑 dataTable 行的 CSS；

```
jQuery(document).ready(function() {
    var rowSize = '#{statusBean.size}';
    for (var i = 0; i &lt; rowSize; i++) {
        var rowIndex = i;
        var inputTextStr = 'dataTableForm' + ':dataTable:' + rowIndex + ':commentInput';
        var inputText = $(document.getElementById(inputTextStr));
        inputText.css({'box-shadow':'0 0 5px #EB2F28'});
    }
}); 
```

并且`p:dataTable`是常规的`liveScrolling=true`，假设它有一个并且只有`p:inputText`一个具有通过上述功能修改的 CSS。

**当`p:dataTable`有很多行时**会出现问题。**假设用户向下滚动，`live scroll`表的事件被触发（ajax 请求）并且表加载更多行，但它加载`p:inputText`具有常规 CSS 的组件。函数不能将 css 应用到最近加载的行中。**

 **因此，需要捕获该`liveScroll`事件或保证 JS 函数在每次更新时工作`p:dataTable`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:03:37.030

没有内置的 AJAX 事件可以处理这种情况，因此您必须自己完成。我会尽力给你一些建议。

首先通过为此创建函数重新组织您的 JavaScript，并在加载页面中调用该函数：

```
function applyMyCSS() {
    var rowSize = '#{statusBean.size}';
    for (var i = 0; i &lt; rowSize; i++) {
        var rowIndex = i;
        var inputTextStr = 'dataTableForm' + ':dataTable:' + rowIndex + ':commentInput';
        var inputText = $(document.getElementById(inputTextStr));
        inputText.css({'box-shadow':'0 0 5px #EB2F28'});
    }
}

jQuery(document).ready(function() {
    applyMyCSS();
}); 
```

现在，您应该以某种方式在您的支持 bean 中处理这个 AJAX 请求。我调查了一下，发现当滚动发生时，会发送特定的参数`yourDataTableId_scrolling`，例如`myForm:myTable_scrolling`，这个参数的名称是`true`。

在页面中的某个地方添加这个，最好在顶部的某个地方：

```
<f:metadata>
  <f:event type="preRenderView" listener="#{myBean.onPageLoad('clientIdOfComponent')}"/>
</f:metadata> 
```

支持从页面中放置确切的客户 ID。您可以为此使用一些实用程序 PrimeFaces 函数，例如`#{p:component('id')}`获取客户端 ID。此事件将`onPageLoad()`在视图渲染之前和针对每个请求（AJAX 或非 AJAX）调用您的函数。在该函数中，您将过滤您的`liveScroll`事件并处理它：

```
public void onPageLoad(String datatableId) {
  FacesContext fc = FacesContext.getCurrentInstance();
  if (RequestContext.getCurrentInstance().isAjaxRequest() && 
          "true".equals(fc.getExternalContext().getRequestParameterMap().get(datatableId + "_scrolling")) {

    RequestContext.getCurrentInstance().execute("applyMyCSS()");
  }
} 
```

请注意，这不是记录在案的行为，可以在未来的版本中更改（但我不希望这样）。我还创建[了一个添加此功能的问题](http://code.google.com/p/primefaces/issues/detail?id=5295&q=livescroll&colspec=ID%20Stars%20Type%20Status%20Priority%20TargetVersion%20Reporter%20Owner%20Summary)，也许很快就会添加。**

# asp.net-mvc - DbContext 中的动态表列表

> ID：15158033
> 
> 赞同：2
> 
> 时间：2013-03-01T12:40:55.150
> 
> 标签：asp.net-mvc, entity-framework, razor

我是 MVC 新手，遇到以下问题：

在我的应用程序中，客户将能够使用他需要的列/字段自己创建表。

所以我的第一个问题是，如果我不知道表格的外观，我应该如何设计模型类。这是通过将所有字段放在一个列表中来解决的，因此它是动态的。

```
 public class DynamicData
    {
        public List<decimal> fields { get; set; }

        public DynamicData(String tableName)
        {

        }
    } 
```

我还有一个静态表，它将包含有关创建表的信息：

```
 public class Table 
    {
        public int ID { get; set; }

        [Required]
        public string Title { get; set; }

        public string TableName { set; }

        [DataType(DataType.Date)]
        public DateTime ReleaseDate { get;}
    } 
```

接下来是将它们放在 DbContext 中，这对于静态表来说很简单，但对于我创建的表的动态列表来说却不是这样：

```
 public class MyDBContext : DbContext
    {
        public DbSet<Table> Tables { get; set; }
        public List<DbSet<DynamicData>> DynamicTables { get; set; }

        public MyDBContext() : base()
        {
            //how do I get my tables now?
        }
    } 
```

现在我正处于不知道如何进行的地步。我不确定这是否是最好的方法，但这是我的第一个想法。

2 个问题： 1\. 这是最好的方法吗？是否有针对该问题的标准解决方案（动态表数量 + 动态表） 2\. 如何在 DbContext 的列表中获取表以及如何获取模型中的字段？

# backbone.js - 从数据库中删除模型时的主干.js 从视图中删除它

> ID：15158034
> 
> 赞同：0
> 
> 时间：2013-03-01T12:40:59.153
> 
> 标签：backbone.js, view, destroy

我有一个问题 - 我已经为每个模型创建了一个删除链接并将它从数据库中删除......但我没有设法正确设置删除事件的回调，因为它是正确的视觉显示。

```
class Notes.Views.ArticlesIndex extends Backbone.View.     
  render: ->  
    $(@el).html(@template())  
    @collection.each(@appendEntry)  
    this  

  appendEntry: (article)->  
    view = new Notes.Views.Article(model: article)  
    $('ul#article_list').append(view.render().el)  

class Notes.Views.Article extends Backbone.View   
  template: JST['articles/menu']    
  events:  
    'click a.delete': 'deleteEntry'   
  initialize: ->  
    # putting @model.on('destroy',@render,this) didn't help    
  deleteEntry: (event)->  
    event.preventDefault()  
    @model.destroy() 
```

**更新 ！**
除了@nEEbz 答案，添加`@model.on('destroy',@remove,this)`回调也有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:45:30.750

试试这个：

```
deleteEntry: (event)->
    event.preventDefault()
    @model.destroy()
    @$el.remove() 
```

# http - 尝试设置 HTTP 过期标头会使我的网站崩溃。我究竟做错了什么？

> ID：15158035
> 
> 赞同：1
> 
> 时间：2013-03-01T12:41:03.540
> 
> 标签：http, header

我正在尝试在 Apache2 Web 服务器上设置过期 HTTP 加热器，但我所做的每一次尝试都没有效果或使网站崩溃。我尝试将 expires 标头设置添加到我`VirtualHost`的，如下所示，但这会使网站崩溃。我不明白这是为什么？

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot /home/mydirectory
    <Directory /home/mydirectory/>
            ExpiresActive On
            ExpiresByType text/html "access plus 1 months"
            ExpiresByType image/gif "access plus 1 months"
            ExpiresByType image/jpg "access plus 1 months"
            ExpiresByType image/jpeg "access plus 1 months"
            ExpiresByType image/png "access plus 1 months"
            ExpiresByType image/vnd.microsoft.icon "access plus 1 months"
            ExpiresByType image/x-icon "access plus 1 months"
            ExpiresByType image/ico "access plus 1 months"
            ExpiresByType application/javascript .now plus 1 months.
            ExpiresByType application/x-javascript .now plus 1 months.
            ExpiresByType text/javascript .now plus 1 months.
            ExpiresByType text/css .now plus 1 months.
            ExpiresDefault "access plus 1 days
    </Directory>
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
            AllowOverride None
            Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
            Order allow,deny
            Allow from all
    </Directory>

     ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /doc/ "/usr/share/doc/"
     <Directory "/usr/share/doc/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
    Allow from 127.0.0.0/255.0.0.0 ::1/128
</Directory>

</VirtualHost> 
```

我已经为我的 httpd.conf 文件尝试了以下两种配置：

```
LoadModule expires_module /usr/lib/apache2/modules/mod_expires.so

ExpiresActive On
ExpiresDefault "access plus 7 days"

<Directory "/home/mydirectory">
    Options FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    Allow from all
    ExpiresByType text/html "access plus 1 day"
    ExpiresByType text/css "access plus 1 day"
    ExpiresByType text/javascript "access plus 1 day"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType application/x-shockwave-flash "access plus 1 day"
</Directory> 
```

和

```
 LoadModule expires_module /usr/lib/apache2/modules/mod_expires.so 
```

我无法获得任何适合我的配置组合。我检查了 mod_expires.so 是否在正确的位置。我哪里错了？

我已将文档根目录从 更改`/var/www`为`/home/mydirectory`. 在我尝试修改 HTTP 标头之前，这并没有造成任何问题，所以我认为这与问题没有任何关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T12:11:33.053

```
ExpiresDefault "access plus 1 days 
```

on the 19th line is missing an `"` which maybe make your configuration corrupt?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T20:11:32.240

I had a similar problem that was solved by changing the word "one" with the numeral "1". "one" had worked on another site of mine. Perhaps it would work to change the numeral into a word.

# javascript - 样式复选框没有图像并且仍然有标签？

> ID：15158037
> 
> 赞同：0
> 
> 时间：2013-03-01T12:41:10.683
> 
> 标签：javascript, html, css, checkbox

我正在尝试设置复选框的样式，而不使用图像。我不喜欢使用 javascript 和事件，但我认为这是最后的手段。是的，我知道很多人在这里询问复选框样式，但我没有找到任何人提出过这个特定问题，或者似乎可以解决问题的答案。

我看过

[http://www.inserthtml.com/2012/06/custom-form-radio-checkbox/](http://www.inserthtml.com/2012/06/custom-form-radio-checkbox/)

这是一个非常好的教程，仅通过 css 完成自定义复选框。然而，在那个例子中，设计师面临着一个权衡：

要么该解决方案基本上仅适用于 chrome，要么无法添加用作可点击区域扩展的标签。这样做的原因是为了获得跨浏览器兼容性，每个复选框都被赋予一个空标签，并且所有样式都应用于复选框+标签。结果是，如果我向标签添加文本，它会在复选框内结束。

有谁知道同时获得跨浏览器功能和功能标签的方法？我能想出的最佳解决方案是手动将 onclick-event 添加到标签？我真的很喜欢功能性标签，因为我认为它对触摸更友好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:57:26.143

使用[额外的标签](http://jsfiddle.net/barney/TkQnF/)！

```
<label for="checkbox-1-1">Label!</label>
<input type="checkbox" id="checkbox-1-1" class="regular-checkbox" />
<label for="checkbox-1-1"></label> 
```

我的演示将它们放在之前，但您可以将它们放在之后（或其他任何地方）并相应地设置它们的样式。您提到的文章中的CSS非常好，因为它非常具体地只在复选框*后立即*设置样式的标签，所以只要您的“真正”标签不是那个标签，您就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:00:38.083

`<label>`您可以简单地在页面上的任何其他位置向 HTML添加额外内容。

例如：

```
<input type="checkbox" id="checkbox-2-4" class="regular-checkbox big-checkbox">
<label for="checkbox-2-4"></label>
<label for="checkbox-2-4">Your Label Text Here</label> 
```

然后，您可以单击其中一个，将看到所需的效果。

# php - 根据数组检查发布的值 - PHP

> ID：15158038
> 
> 赞同：0
> 
> 时间：2013-03-01T12:41:10.313
> 
> 标签：php, arrays, codeigniter

我正在使用 MVC 框架（CodeIgniter）。在我看来，我有两个数组，一个用于常规报告，一个用于管理报告：

```
 <div id="queries">

        <center><strong>Report Generator</strong></center>
<br />

<?php 
    $performance = array(
        '' => 'Click Here',
        '1' => 'Student Total Wait',
        '2' => 'Counselor Performance Per Session',
        '3' => 'Average Counselor Performance',
    );

    $admin = array(
        '' => 'Click Here',
        '4' => 'Reasons For Visit',
        '5' => 'Aid Years',
    );

    echo form_open('reports_controller/generate');
    echo "<p><strong>Performance Reports</strong></p>";
    echo form_dropdown('performance', $performance); 
    echo "<p><strong>Administrative Reports</strong></p>";
    echo form_dropdown('admin', $admin);

    echo "<br>";
    echo "<br>";
    echo "<br>";
    echo "<br>";
    echo form_submit('submit', 'Generate Report');
?>

</div> 
```

所有这两个数组都填充了下拉列表。

现在，当它实际发布到控制器时，我的问题就来了。在我的控制器中，我有一个 foreach 循环来检查发布的值是否存在，如果存在，那么我希望它根据用户选择的内容动态拉取模型（sql 查询）。

控制器 ：

```
class Reports_controller extends MY_logincontroller {

function generate() {
    $this -> load -> model('reports_model');
    $reportsfunction = array('1' => 'studenttotalwait()', '2' => 'counselorperformance()', '3' => 'avgperformance()', '4' => 'reasons()', '5' => 'aidyears()', );
    foreach ($reportsfunction as $model_function) {
        $data['returns'] = $this -> reports_model -> $model_function;
        $data['main_content'] = 'reports/generate';
        $this -> load -> view('includes/js/js_template', $data);
    }
} 
```

我现在的问题是我如何实际动态加载与模型中正在查询的字段集相对应的视图？我对我的控制器阵列的工作方式充满信心。我还没有参加 Comp。科学 1 所以我一直在以错误的方式学习 php。

我希望这是一个适当的问题。

编辑 ：

我可以硬编码以查看 1 是否是发布的值，然后使用此模型数据输出这样那样的视图，但我想节省工作并在做项目时学到很多东西。- 自私 - 对不起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T00:42:51.203

```
function generate() {
        $this -> load -> model('reports_model');
        $performance = $this -> input -> post('performance');
        $admin = $this -> input -> post('admin');
        if (!empty($performance) || !empty($admin)) {

            if ($this -> input -> post('performance') == '1') {
                $data['totalwait'] = $this -> reports_model -> studenttotalwait();
                $data['main_content'] = 'reports/tables/1';
                $this -> load -> view('includes/js/js_template', $data);
            }

            if ($this -> input -> post('performance') == '2') {
                $data['performance'] = $this -> reports_model -> counselorperformance();
                $data['main_content'] = 'reports/tables/2';
                $this -> load -> view('includes/js/js_template', $data);
            }

            if ($this -> input -> post('performance') == '3') {
                $data['avgperformance'] = $this -> reports_model -> avgperformance();
                $data['main_content'] = 'reports/tables/3';
                $this -> load -> view('includes/js/js_template', $data);
            }

            if ($this -> input -> post('admin') == '4') {
                $data['reasons'] = $this -> reports_model -> reasons();
                $data['main_content'] = 'reports/tables/4';
                $this -> load -> view('includes/js/js_template', $data);
            }

            if ($this -> input -> post('admin') == '5') {
                $data['avgperformance'] = $this -> reports_model -> aidyears();
                $data['main_content'] = 'reports/tables/5';
                $this -> load -> view('includes/js/js_template', $data);
            }

        } else {
            $this -> session -> set_flashdata('reports', 'Please choose a report');
            redirect('staff_controller/reports', 'location');
        }
    } 
```

我最终使用了 if else 语句，我使用了 Switch Case，但我研究了速度，并且在使用 switch case 和 if else elseif 之间存在很多争论......我坚持使用旧的可靠 if else。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:17:15.567

这是一个较短的版本。而是在一个函数中完成所有工作，做一个细分：

```
function generate()
{
    $this -> load -> model('reports_model');
    $performance = $this -> input -> post('performance');
    $admin = $this -> input -> post('admin');

    if (!empty($performance) || !empty($admin))
    {
        $data = $this->_data($performance);
        $data['main_content'] = 'reports/tables/'.$performance;
        $this -> load -> view('includes/js/js_template', $data);
    } 
    else
    {
        $this -> session -> set_flashdata('reports', 'Please choose a report');
        redirect('staff_controller/reports', 'location');
    }

}

// saves the day
function _data($performance = 0)
{
    $this -> load -> model('reports_model');

    if(!isset($data[$performance]))
    {
        return FALSE;
    };

    $data = array(
        1 => array(
                 'totalwait' => $this -> reports_model -> studenttotalwait()
             ),
        2 => array(
                 'performance' => $this -> reports_model -> counselorperformance()
             ),
        3 => array(
                 'avgperformance' => $this -> reports_model -> avgperformance()
             ),
        4 => array(
                 'reasons' => $this -> reports_model -> reasons()
             ),
        5 => array(
                 'avgperformance' => $this -> reports_model -> aidyears()
             )
    );
    return $data[$performance];
} 
```

这种方法打破了代码冗余，同时提供了代码可重用性

# c - 使用 alsalib 时出现奇怪的 C 行为

> ID：15158040
> 
> 赞同：3
> 
> 时间：2013-03-01T12:41:22.307
> 
> 标签：c, alsa

当我尝试使用 ALSA 库时，我的 C 代码出现了一个奇怪的行为。我使用此代码生成设备的 sid

```
snd_mixer_selem_id_t*
getSid(){
  snd_mixer_selem_id_t *sid;
  snd_mixer_selem_id_alloca(&sid);
  snd_mixer_selem_id_set_index(sid,0);
  snd_mixer_selem_id_set_name(sid, selem_name);

  return sid;
} 
```

然后我尝试通过

```
snd_mixer_t *handle = getHandle();
snd_mixer_selem_id_t *sid = getSid();

snd_mixer_elem_t *elem = snd_mixer_find_selem(handle,sid); 
```

`getHandle()`是获取卡处理程序的等效函数，但这个函数正在工作。奇怪的是，如果我在使用函数之前直接使用函数的代码，`snd_mixer_find_selem`它就可以工作。我不得不说我是 C 新手，这是我的第一个项目之一，所以这可能是初学者对指针的错误。

错误信息是`simple.c:282: snd_mixer_selem_get_playback_volume_range: Assertion 'elem' failed.`

那么有人知道问题是什么吗？

这是我使用的代码的最小示例：

```
#include <alsa/asoundlib.h>

static const char *selem_name = "Master";
static const char *card = "default";

snd_mixer_t*
getHandle(){
  snd_mixer_t *handle;

  snd_mixer_open(&handle, 0);
  snd_mixer_attach(handle, card);
  snd_mixer_selem_register(handle, NULL, NULL);
  snd_mixer_load(handle);

  return handle;
}

snd_mixer_selem_id_t*
getSid(){
  snd_mixer_selem_id_t *sid;
  snd_mixer_selem_id_alloca(&sid);
  snd_mixer_selem_id_set_index(sid,0);
  snd_mixer_selem_id_set_name(sid, selem_name);

  return sid;
}

void
incMasterVol(long step){ // Step is a value in [-100,100]
  long min,max,curr;

  snd_mixer_t *handle = getHandle();

/*snd_mixer_open(&handle, 0);
  snd_mixer_attach(handle, card);
  snd_mixer_selem_register(handle, NULL, NULL);
  snd_mixer_load(handle);*/

  snd_mixer_selem_id_t *sid;
  snd_mixer_selem_id_alloca(&sid);
  snd_mixer_selem_id_set_index(sid,0);
  snd_mixer_selem_id_set_name(sid, selem_name);

  snd_mixer_elem_t *elem = snd_mixer_find_selem(handle,sid);

  snd_mixer_selem_get_playback_volume_range(elem, &min, &max);
  snd_mixer_selem_get_playback_volume(elem, SND_MIXER_SCHN_SIDE_LEFT, &curr);
  curr = curr * 100/max;
  if(curr + step > 100)
    curr = 100;
  else if(curr + step < 0)
    curr = 0;
  else
    curr += step;
  snd_mixer_selem_set_playback_volume_all(elem, curr * max / 100);

  snd_mixer_close(handle);
}

void
toggleMasterVol(){
 int swiVal;
 snd_mixer_t *handle = getHandle();
 snd_mixer_elem_t *elem = snd_mixer_find_selem(handle,getSid());

 snd_mixer_selem_get_playback_switch(elem, SND_MIXER_SCHN_SIDE_LEFT, &swiVal);
 snd_mixer_selem_set_playback_switch_all(elem, !swiVal);

 snd_mixer_close(handle);
}

int
main(int argc, char *argv[]){
  incMasterVol(5);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T13:16:40.083

我认为这源于`alloca()`系统调用

`alloca`在堆栈帧中分配，因此当`getSid()`返回时释放分配的变量并最终得到一个摇晃指针......（当你将它放在主函数中时它会起作用，因为分配`alloca`主激活记录上的空间）

这只是一个建议，但我认为您应该使用`malloc`（在堆上分配空间，因此在您调用`free()`它之前分配动态内存）

试试吧`snd_mixer_selem_id_malloc()`:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-06T23:29:25.273

在遇到同样的问题并进行了一些搜索之后，我给你一个提示：更改 的值`selem_name`，如有必要，更改`card`! 通过发出以下系统命令找出正确的卡名：

```
cat /proc/asound/cards 
```

然后，使用`alsamixer`确定所需音量控制的名称。就我而言，这是`Digital`，但请自己尝试。

# mootools - 对象不支持 mootools 中的此属性或方法

> ID：15158042
> 
> 赞同：0
> 
> 时间：2013-03-01T12:41:23.650
> 
> 标签：mootools

谁能告诉我以下行在 mootools 中是否正确？：

```
document.getElementById("step-1").getElements('.saved strong.savTitle').set('html', "Billing"); 
```

当我将此行添加到我的 jsp 时，“对象不支持此属性或方法”js 错误即将到来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:11:45.600

一些小问题：

`document.getElementById('step-1')`在 mootools 中应该是`document.id('step-1')`- 两者都返回一个元素，但 mootools 还在旧 IE 中安装原型方法，该方法不继承自元素原型，并且它设置了一个元素 uid 和存储。

如果在 IE6、7 和 8 中不这样做，这将产生您发布的错误。

## 第二

当您收到此错误时，您确实需要分解您所做的调用，以查看它在链中的哪个位置无法进行调试。我建议将引用保存到 var 中并在之后应用该方法。

## 第三

您将获得多个元素并调用一个集合 - MooTools 将通过循环`.set()`自动应用于每个成员。`each`如果你必须在一个集合上使用链接并且它不止一个动作，你应该`.each`自己做以避免多次重复。

## 最后

您可以将其锚定在一个选择器中：

```
document.getElements('#step-1 .saved strong.savTitle').set('html', 'hai'); 
$$('#step-1 .saved strong.savTitle').set('html', 'hai'); // also same. 
```

这将在带有 QSA 的浏览器中运行得最快。

# linux-kernel - linux 在成功调用 start_kernel() 之前采取了哪些操作？

> ID：15158045
> 
> 赞同：1
> 
> 时间：2013-03-01T12:41:59.677
> 
> 标签：linux-kernel, boot, bootstrapping

我正在学习 linux 内核内部结构，我知道第一个调用的 C 函数是 start_kernel()。但我认为系统必须为能够运行 c 函数做好准备，例如安装中断服务程序。

那么，linux运行的完整步骤顺序是什么？我在哪里可以找到它的代码？（我正在使用带有内核 3.2.0.37-generic 的 ubuntu 12.04 LTS）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:57:45.380

在调用`start_kernel()`整个过程之前要经过完整的引导[过程](http://my.safaribooksonline.com/book/operating-systems-and-server-administration/linux/9780132396554/a-peek-inside-the-kernel/ch02lev1sec1)。

同样在[“Essential Linux Device Drivers”](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CEAQFjAC&url=http://wusewj-linux-books.googlecode.com/files/Essential%2520Linux%2520Device%2520Drivers%255B2008,851p%255D.pdf&ei=KLIwUcuDIoWHrAea5IGAAg&usg=AFQjCNGW_o5jLL6mYCVhHWnC0XZxujGQwg&bvm=bv.43148975,d.d2k)一书中，请参阅“A Peek Inside the Kernel”一章。它的作者的[网站。](http://www.elinuxdd.com/)

你也可以通过这个[链接](http://en.wikipedia.org/wiki/Linux_startup_process)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T18:36:13.117

在运行 start_kernel (init/main.c) 之前，有一些汇编代码（例如 head.S）运行并准备系统运行 c 函数。

中断服务程序稍后完成。

# java - 如何以编程方式在 Spring ApplicationContext 中启用“annotation-config”

> ID：15158046
> 
> 赞同：1
> 
> 时间：2013-03-01T12:41:59.940
> 
> 标签：java, spring, annotations, applicationcontext

通常在 spring 中启用注解（如 @Autowired）是通过将其包含在 spring XML 中来完成的。

```
 <context:annotation-config/> 
```

有没有办法在初始化之前在 ApplicationContext （或实现）上以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:51:56.210

只需在 @Configuration 类中使用 AnnotationConfigApplicationContext 类就足够了。基于 java 的容器配置不依赖于以任何方式进行组件扫描。它只是基于 XML 的组件配置的不同方法。

浏览这些链接：

[代码牧场](http://www.coderanch.com/t/496531/Spring/AnnotationDrivenConfig-Spring-Configuration)

[Spring annotations - @Configuration 调用 spring bean 自动构建](https://stackoverflow.com/questions/13583524/spring-annotations-configuration-to-invoke-spring-bean-auto-building)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-11T12:38:47.147

我为此做了很多努力，作为一种解决方法，我创建了一个简单的 spring-aspect-config.xml 文件，其中包含以下内容

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:context="http://www.springframework.org/schema/context"
 xsi:schemaLocation="http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans.xsd
     http://www.springframework.org/schema/context
     http://www.springframework.org/schema/context/spring-context.xsd">

    <context:spring-configured/> 
```

并将其作为导入添加到我的应用程序上下文类

```
@ImportResource("classpath:spring-aspect-config.xml") 
```

以编程方式，您可以通过指定

```
@EnableSpringConfigured 
```

在您的应用程序上下文类上。

参考 - [https://jira.springsource.org/browse/SPR-7888](https://jira.springsource.org/browse/SPR-7888)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:59:26.133

如果你真的需要这个 hack，你可以`AnnotationConfigBeanDefinitionParser.parse()`检查它如何操作上下文以及它注册了什么样的 bean 定义，然后尝试使用 ApplicationContext 实现以编程方式重现它以达到相同的效果。

[这篇文章](https://stackoverflow.com/q/4540713/1276804)可能有助于如何将新的 bean 定义添加到 bean 注册表中。

# django - Django：{{form.comment}} 区域大小

> ID：15158050
> 
> 赞同：0
> 
> 时间：2013-03-01T12:42:08.077
> 
> 标签：django, forms, comments, size, textfield

我使用标准的 django 评论框架。

模板：

```
<h2>Add comment</h2> {%  get_comment_form for post as form %} 
<form  action="{% comment_form_target %}" method="post" > {% csrf_token %}   
{{form.content_type}}{{form.object_pk}}{{form.timestamp}}{{form.security_hash}}
Comment:<br />
{{form.comment}}

<input type="hidden" name="next" value="{{ request.get_full_path }}#comment" /> 

<button class="btn btn-large btn-primary" type="submit">Post</button>

</form> 
```

如何更改`{{form.comment}}`字段大小？我试图把它包起来，`<p>`或者`<div>`它没有用。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:19:18.600

有几种选择：

1）您可以使用[django-widget-tweaks](https://pypi.python.org/pypi/django-widget-tweaks)。在这种情况下，你写`{{form.comment|attr:"cols:10"|attr:"rows:10"}}`，这将导致：

```
<textarea id="id_comment" rows="10" cols="10"></textarea> 
```

2）您还可以注意到 textarea 的 id 将是`id_comment`. 因此，您可以使用 css 控制宽度：

```
textarea#id_comment {width:100px;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T13:07:02.277

我添加了这样的东西

```
#id_comment {
width: 95% !important; 
height: 200px !important; 
resize: none !important; 
} 
```

到我的 CSS 文件。它正在工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T12:55:26.417

我刚刚检查了`contrib.comments`应用程序，我看不出有任何方法可以在不创建自己的评论应用程序的情况下自定义小部件。最简单的解决方案是创建一个常规的 HTML 文本输入或 textarea`name="comment" and id="id_comment"`

# java - 生成 UUID 需要很长时间

> ID：15158052
> 
> 赞同：0
> 
> 时间：2013-03-01T12:42:19.107
> 
> 标签：java, hibernate, uuid

当我的应用程序第一次设置`UserTransaction`for`Hibernate`时，需要十分钟。我已经浏览了堆栈，它挂在`UUID.generateRandom()`.

# r - 更改列值？

> ID：15158053
> 
> 赞同：0
> 
> 时间：2013-03-01T12:42:20.223
> 
> 标签：r

我有一个有 5 列的表。第 3 列包含 1-5 的数字。我想用 1=A、2=D、3=X 和 4=U 和 5=K 的字母替换数字。我怎么能在 R 中这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:50:08.983

我会使用查找表，即`list`名称是数字 1-5，列表的内容是字母 AE：

```
lut = list('A', 'B', 'C', 'D', 'E')
names(lut) = 1:5
sample_data = sample(1:5, 10, replace = TRUE)
as.character(lut[as.character(sample_data)])

> lut
$`1`
[1] "A"

$`2`
[1] "B"

$`3`
[1] "C"

$`4`
[1] "D"

$`5`
[1] "E"

> sample_data
 [1] 3 5 2 5 1 4 2 2 3 3
> as.character(lut[as.character(sample_data)])
 [1] "C" "E" "B" "E" "A" "D" "B" "B" "C" "C" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:59:02.283

这可能比保罗的回答更容易理解（恕我直言，这是一种更好的方法）。

创建一个小数据框，它本质上是一个查找表。然后，我让`bar`你的数组中感兴趣的列，

```
Rgames> foo
$lets
[1] "A" "D" "X" "U" "K"

$nums
[1] 1 2 3 4 5

Rgames> rab<-foo$lets[bar]
Rgames> rab
[1] "A" "A" "X" "D" "K"
Rgames> foo
$lets
[1] "A" "D" "X" "U" "K"

$nums
[1] 1 2 3 4 5

Rgames> bar
[1] 1 1 3 2 5
Rgames> foo$lets[bar]
[1] "A" "A" "X" "D" "K" 
```

用最后一行的输出替换列值，一切就绪。

# javascript - 按下美元键时如何找出在 keyup 或 keypress 事件上按下的键

> ID：15158061
> 
> 赞同：3
> 
> 时间：2013-03-01T12:42:44.203
> 
> 标签：javascript, jquery, keypress, onkeyup

下面的方法从 AZ 和 0-9 返回任何键，当我按下 shift 键 + 4 时，它返回相同的代码 52。

```
function keyUpEvent(e)//onkeyup event
{
    var chr = String.fromCharCode(e.keyCode);//converts the keycode into a character
    alert(chr);//alerts the character
} 
```

但是当按下带有 shift 键组合的相应键时，我需要显示**$ 或 % 。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T12:48:06.000

我会用这样的东西：

```
$(function () {
    $(document).on('keyup keydown keypress', function (event) {
        if (event.keyCode == 52 && event.shiftKey) {
            alert('foo');
        }
    });
}); 
```

[jsfiddle](http://jsfiddle.net/C7PZB/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:46:13.830

键码仅与键有关。`$`是一个字符，通过 Shift 和 4 两个键实现。`$` *使用时没有明确的键码`onkeydown`*

编辑：爱德华指出，它`onkeypress`使用组合键，并且确实有组合键码。每天学些新东西 ：）

[这是一些代码](http://jsfiddle.net/eprES/)，从 MDN 提供的示例中编辑`onkeydown`，用于检测按键键码。

[这是使用此 SO post 的](https://stackoverflow.com/a/4496986/1222420)帮助更新为对 Firefox 友好[的小提琴](http://jsfiddle.net/tHW9x/)。如果您采用这种方式，JQuery 解决方案也可以工作。

$ 等于`36`。

[JavaScript 事件 KeyCode 测试页](http://www.asquare.net/javascript/tests/KeyCode.html)

这是相同的[SO线程](https://stackoverflow.com/questions/11868643/what-is-the-keycode-for/11868743#11868743)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T12:52:15.410

您不能同时检查两个关键事件。您可以尝试 e.shiftKey ，它会告诉您在事件发生时是否按下了 shift 键。尝试检查：

```
if(e.keyCode === 53 && e.shiftKey){} 
```

另外，如果您有一个文本字段，则可以在键输入时附加事件并检查“％”。

[https://developer.mozilla.org/en-US/docs/DOM/event.shiftKey](https://developer.mozilla.org/en-US/docs/DOM/event.shiftKey)

感谢马塞尔·科佩尔

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T12:49:37.597

在`KeyDown`的情况下`TextBox`，使用：

```
if (e.Shift && e.KeyCode == Keys.4) {
  //Your code here
} 
```

# sql-server-2008 - 合并多个结果集

> ID：15158066
> 
> 赞同：0
> 
> 时间：2013-03-01T12:43:01.517
> 
> 标签：sql-server-2008, tsql

我有多个条件明智的存储过程，我想将结果集组合成单个过程......

```
ALTER PROCEDURE [dbo].[usp_TotalReceivedUnits_Country]
@ContractCode NVARCHAR (20), 
@CountryCode NVARCHAR (10),
@Years NVARCHAR(1000)
AS
BEGIN
        SELECT ISNULL(SUM(S.NettoWeight), 0) TotalNettoWeight, COUNT(S.ShipmentID) Loads, ReceivalDateYear = YEAR(S.ReceivalDate)
        FROM   Shipment S
        WHERE S.ContractCode = @ContractCode AND 
              S.[OrigCountryCode] = @CountryCode AND
              S.ClosedYN = 0 AND 
              S.Shipped = 1 AND
              S.DeletedYN = 0 AND
              S.OutInbound = 2 AND
              YEAR(S.ReceivalDate) IN (SELECT Data FROM dbo.fnSplitString(@Years, ','))
        GROUP BY YEAR(S.ReceivalDate)
END
GO

ALTER PROCEDURE [dbo].[usp_TotalProcessedUnits_Country]
@ContractCode NVARCHAR (20), 
@CountryCode NVARCHAR (10),
@Years NVARCHAR(1000)
AS
BEGIN
    SELECT ISNULL(SUM(S.NettoWeight), 0) TotalNettoWeight, COUNT(S.ShipmentID) Loads, ReceivalDateYear = YEAR(S.ReceivalDate)
    FROM   Shipment S with (nolock)
    WHERE S.ContractCode = @ContractCode AND 
          S.OrigCountryCode = @CountryCode AND
          S.ClosedYN = 1 AND 
          S.Shipped = 1 AND
          S.FinanceDetailsYN = 0 AND
          S.DeletedYN = 0 AND
          S.OutInbound = 2 AND
          YEAR(S.ReceivalDate) IN (SELECT Data FROM dbo.fnSplitString(@Years, ','))
    GROUP BY YEAR(S.ReceivalDate)
END
GO 
```

以上两个过程通过处理和接收的摘要具有相同的结果计数，但是如何将它们组合到一个具有多个条件的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:15:31.827

如果我正确理解您的问题，您应该能够将输出加载到临时表中，然后选择：

```
CREATE TABLE #out1(TotalNettoWeight INT, Loads INT, ReceivalDateYear DATETIME2);
CREATE TABLE #out2(TotalNettoWeight INT, Loads INT, ReceivalDateYear DATETIME2);
GO

INSERT #out1
EXEC [dbo].[usp_TotalReceivedUnits_Country] 123,6,10;

INSERT #out2
EXEC [dbo].[usp_TotalProcessedUnits_Country] 123,6,10;
GO

SELECT * FROM #out1
UNION
SELECT * FROM #out2
GO

DROP TABLE #out1;
DROP TABLE #out2;
GO 
```

# xml - 将 xml 更改为类似树的东西

> ID：15158068
> 
> 赞同：1
> 
> 时间：2013-03-01T12:43:10.560
> 
> 标签：xml, xslt

这是我的 xml o/p:-

```
<products>
    <region_timezone>1</region_timezone>
    <registrationstatus>2</registrationstatus>
    <eventstatus>2</eventstatus>
    <dist_activity>5,10068,10070</dist_activity>
    <dist_region>5069,5069,5069</dist_region>
    <dist_value>55,342,86</dist_value>
    <dist_unit>1,1,1</dist_unit>
    <dist_map>5</dist_map>
    <entryfee_currency>USD</entryfee_currency>
    <reg_str_dt>2013-01-14 20:35:00</reg_str_dt>
    <reg_end_dt>2013-01-14 20:35:00</reg_end_dt>
    <individual_label>19+++</individual_label>
    <individual_born_from>1980-08-21</individual_born_from>
    <individual_born_to>2010-08-18</individual_born_to>
    <individual_sex>3</individual_sex>
    <individual_strdt>2013-01-14 20:35:00</individual_strdt>
    <individual_start>2013-01-14 20:35:00</individual_start>
    <elite_sex>1</elite_sex>
    <tab_id>351</tab_id>
    <product_id>1</product_id>
    <tab_name>test1</tab_name>
    <region_timezone>1</region_timezone>
    <registrationstatus>2</registrationstatus>
    <eventstatus>2</eventstatus>
    <dist_activity>5,10069,10070</dist_activity>
    <dist_region>4457,7140,5069</dist_region>
    <dist_value>55,213,86</dist_value>
    <dist_unit>1,1,1</dist_unit>
    <dist_map>5</dist_map>
    <entryfee_currency>USD</entryfee_currency>
    <reg_str_dt>2013-02-14 20:39:00</reg_str_dt>
    <reg_end_dt>2013-02-14 20:39:00</reg_end_dt>
    <individual_label>19+++</individual_label>
    <individual_born_from>1980-08-21</individual_born_from>
    <individual_born_to>2010-08-18</individual_born_to>
    <individual_sex>3</individual_sex>
    <individual_strdt>2013-02-14 20:39:00</individual_strdt>
    <individual_start>2013-02-14 20:39:00</individual_start>
    <elite_sex>1</elite_sex>
    <tab_id>352</tab_id>
    <product_id>2</product_id>
    <tab_name>test2</tab_name>
</products> 
```

这是我的代码（test.xsl）：-

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" 
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:strip-space elements="*"/>

 <xsl:template match="*">
  <xsl:copy>
   <xsl:apply-templates select="*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="node">
  <xsl:apply-templates/>
 </xsl:template>

 <xsl:template match="/">
    <xsl:apply-templates />
 </xsl:template>

 <!-- from dimitre\'s xsl.thanks -->
 <xsl:template match="node[position()>1]/text()">
   <xsl:text>,</xsl:text>
   <xsl:value-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

这是我的 php 文件：-

```
$sourcedoc = new DOMDocument();
$sourcedoc->load('test.xml');

$stylesheet = new DOMDocument();
$stylesheet->load('test.xsl');

// create a new XSLT processor and load the stylesheet
$xsltprocessor = new XSLTProcessor();
$xsltprocessor->importStylesheet($stylesheet);

// save the new xml file
file_put_contents('test-translated.xml', $xsltprocessor->transformToXML($sourcedoc)); 
```

我想对它们进行一些更改，如下所示：-

```
<product>
  <product_id value="1">
     <tab_id value="351">
         <tab_name value="test1"></tab_name> 
         <region_id>1</region_id>
         <region_time>27,02,2013</region_time>
     </tab_id>
  </product_id>
</product> 
```

我想要这种类型的输出......

如果它可能使用 Xslt 那么很好......

其他明智的解决它们的任何方法都可以帮助我
谢谢..
如果我对它们应用此代码，我确实有多个标签，没有生成完美的o / ...我需要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:49:07.990

这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="product">
    <xsl:copy>
      <xsl:apply-templates select="product_id" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="product_id">
    <xsl:copy>
      <xsl:apply-templates select="@*" />
      <xsl:apply-templates select="../tab_id" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="tab_id">
    <xsl:copy>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="../tab_name" />
      <xsl:apply-templates select="../region_id | ../region_time" />
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，会产生以下输出：

```
<product>
  <product_id value="1">
    <tab_id value="351">
      <tab_name value="test1" />
      <region_id>1</region_id>
      <region_time>27,02,2013</region_time>
    </tab_id>
  </product_id>
</product> 
```

这是你想要的那种东西，还是你在寻找更通用的东西？如果您需要更通用的东西，请解释如何使您的场景更通用？

# jquery - jQuery - 为什么 IE8 不喜欢这个功能？

> ID：15158069
> 
> 赞同：0
> 
> 时间：2013-03-01T12:43:14.630
> 
> 标签：jquery

我的网站结构的简要概述：

主索引 php 通过 ajax 提供本地存储的 php 文件。（如果听起来很乱，那是因为它是）

我在主索引文件中有一个函数，我从 ajax 加载的脚本调用它，它在除 IE 之外的任何地方都可以正常工作。

我无法收到有意义的错误消息：

```
Invalid argument.  jquery-1.4.2.min.js, line 144 character 219 
```

注意这个问题与我之前的问题直接相关：[jQuery $el.position(...) is undefined](https://stackoverflow.com/questions/15113145/jquery-el-position-is-undefined)

**jQuery 函数 (index.php)**

```
// nav
var $el;
var leftPos;
var newWidth;
var $mainNav = $("#navbar ul");

$mainNav.prepend("<li id='magic-line'></li>");
var $magicLine = $("#magic-line");

function navBar() {

    // console.log('navBar start');
    function checkActive() {
        // console.log('check active');
        // Hide magic line if nav bar has no active element
        if($('#navbar ul').children('.active').length < 1) {
            $magicLine.hide();
            //console.log($('#navbar ul').children('.active').length < 1);
            //console.log($('#magic-line'));
            //console.log('hide');
        }
        else {
            $magicLine.stop().animate({
                left: $magicLine.css('left', $(".active a").css('left')),
                width: $magicLine.width($(".active a").width())
            });
        }
    }
    checkActive();
    $magicLine
        .width($(".active a").width())
        .css("left", $(".active a").position().left)
        .data("origLeft", $magicLine.position().left)
        .data("origWidth", $(".active a").width());

    // $("#navbar ul li a").hover(function() {
    // apply hover function to li instead and just just el to it's child
    $("#navbar ul li").hover(function() {
        // $el = $(this);
        $el = $(this).children('a');
        // leftPos = $el.position().left;
        leftPos = $el.parent().position().left;
        newWidth = $el.width();
        $magicLine.stop().animate({
            left: leftPos,
            width: newWidth
        }, 600);
    }, function() {
        if($('#navbar ul').children('.active').length < 1) {
            $magicLine.stop();
            checkActive();
        } else {
            $magicLine.stop().animate({
                left: $magicLine.data("origLeft"),
                //width: $magicLine.data("origWidth")
                width: $magicLine.width($(".active a").width())
            }, 600);
        }
    });
} 
```

在我的所有脚本中只需执行以下操作即可调用它：

```
navBar(); 
```

但由于某种原因，它在 IE 中引起了问题，我看不出任何原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:15:01.170

我只是在这里尝试一下，但我会回顾一下：

```
width: $magicLine.width($(".active a").width()) 
```

那是在一个被传递到的对象中`.animate()`。那条线正在做的是使用jQuery的函数`$magicLine`将宽度设置为宽度。该函数返回的是对您开始使用的 jQuery 元素的引用，. 这种技术允许您一个接一个地链接 jQuery 函数。`.active a``.width()``$magicLine`

因此，上面的行将有效地解决为：

```
width: $magicLine 
```

我相信你想要的是：

```
width: $(".active a").width() 
```

试一试，希望是这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:50:37.793

明白了，似乎是这一行：

```
$magicLine
        .width($(".active a").width())
        .css("left", $(".active a").position().left); 
```

将其更改为

```
$magicLine.stop().animate({
        left: $(".active a").parent().position().left,
        //width: $magicLine.width($(".active a").width())
        width: $(".active a").width()
}); 
```

但`checkActive`无论如何，这是在此行之前调用的函数中完成的，所以我只是删除了它....

谢谢你的帮助。

# css - 是否允许使用 css 使对象居中？

> ID：15158072
> 
> 赞同：1
> 
> 时间：2013-03-01T12:43:31.297
> 
> 标签：css, css-position

这是使物体居中的方法吗？这种方法也可以创建准确的中心位置，是否有另一种方法可以做到这一点？

```
.content {
    width:1200px;
    height:800px;
    position:absolute;
    left:50%;
    margin-left:-600px;
    top:50%;
    margin-top:-400px;
} 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-18T11:39:30.957

```
(function() {
  var toggle = true;
  setInterval(function() {
    if (toggle) {
      $("#content").html("Line 1");
    } else {
      $("#content").html("<div>Line 1</div><div>Line 2</div>");
    }
    toggle = !toggle;
  }, 1300);
}());
```

```
body {
  font: 36px Arial, sans-serif;
}

#container {
  color: white;
  background: #ffbd17;
  width: 400px;
  height: 260px;
}

#content {
  background: #06c;
  width: 120px;
  margin-left: auto;
  margin-right: auto;
  position: relative;
  top: 50%;
  transform: translateY(-50%);
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

Centering example:
<div id="container">
  <div id="content">
    Line 1
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:45:20.317

尝试简单：

```
content{
   margin:50% auto;
   text-align:center;/* if content has text then*/
   /*Your other properties like:width,height,etc*/
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:49:19.210

是的，如果您想将任何 div 水平和垂直居中，这就是确切的方式。

负边距正好是高度和宽度的一半，它将元素拉回到完美的中心。仅适用于固定高度/宽度的元素。

或者你可以使用

```
.content{
    width:400px;
    height:200px;
    text-align:center;
    line-height:200px;
} 
```

或者如果您没有特定的度量，您可以在内联编码中使用它

```
<div style="display:table;height:300px;text-align:center;">
<div style="display:table-cell;vertical-align:middle;">
<!–content–&gt;
</div>
</div> 
```

如需进一步帮助，请参阅本[教程](http://www.noobcube.com/tutorials/html-css/horizontal-and-vertical-centering-using-css-a-beginners-guide-/)，它非常有助于理解水平和垂直居中的元素。

问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:53:50.137

我会像这样使用`display: table-cell;`. 这样它就会垂直和水平居中，并且*不*依赖于您要显示的元素的高度。

**HTML**

```
<div class="wrapper">
    <div class="content">
        I'm centered.
    </div>
</div> 
```

**CSSS**

```
html {
    width: 100%;
    height: 100%;
}
body {
    display: table;
    width: 100%;
    height: 100%;
}
.wrapper{
    display: table-cell;
    vertical-align: middle;
}

.content {
    width: 200px;
    height: 200px;
    border: 1px solid red;
    margin: 0 auto;
} 
```

**演示**

[http://jsfiddle.net/Gyq4t/](http://jsfiddle.net/Gyq4t/)

**笔记**

这在每个现代浏览器中都可以正常工作。我不在 IE7 中工作。

# c# - 如何设置 WNetAddConnection2 的 CONNECT_PROMPT？

> ID：15158078
> 
> 赞同：1
> 
> 时间：2013-03-01T12:43:48.490
> 
> 标签：c#, windows, networking, directory, shared

我有 C# .Net windows 应用程序并`WNetAddConnection2`用于连接网络共享文件夹。我想使用具有访问权限的用户名/密码验证 SharedFolder。[请参阅http://msdn.microsoft.com/en-us/library/windows/desktop/aa385413(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385413%28v=vs.85%29.aspx)上的课程详细说明

对于`CONNECT_PROMPT`，msdn 中的指令是“除非同时设置了 CONNECT_INTERACTIVE，否则忽略此标志。” 我的代码喜欢

> ```
>  var result = WNetAddConnection2(netResource,credentials.Password,userName,0x00000010//CONNECT_PROMPT]); 
> ```

所以**问题是如何设置`CONNECT_INTERACTIVE` 和`CONNECT_PROMPT`类来提示共享文件夹的用户名和密码？**

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:57:42.013

您应该`OR`使用`|`运算符将​​这些值放在一起，例如：

```
var both = CONNECT_INTERACTIVE | CONNECT_PROMPT; 
```

# ios - 更改 NSDate 格式

> ID：15158080
> 
> 赞同：0
> 
> 时间：2013-03-01T12:43:56.383
> 
> 标签：ios, objective-c

我有一个格式为“yyyy-MM-dd 00:00:00”的 NSDate 对象，我想将此 NSDate 更改为格式“dd/MM/yyyy”。我发现了很多使用 NSDateformater 将格式从字符串更改为 NSDate 的示例，但如果您有 NSDate 并且需要更改它，则不会。

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T12:46:56.110

试试这个代码：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd/MM/yyyy"];

NSString *resultString = [formatter stringFromDate:[NSDate date]];
[formatter release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:42:36.037

**请试试这个**

```
NSDateFormatter *outputFormatter = [[NSDateFormatter alloc] init];

[outputFormatter setDateFormat:@"dd/MM/yyyy"];

NSString *dateStr = [outputFormatter stringFromDate:[NSDate date]]; 
```

# jquery-mobile - jQuery 移动事件处理

> ID：15158082
> 
> 赞同：0
> 
> 时间：2013-03-01T12:43:57.677
> 
> 标签：jquery-mobile, jquery

最近开始使用 jQuery Mobile 进行开发，我对事件检测的行为有点迷惑。在标准 jQuery 中，我总是可以使用

```
$("#someId").on("click",doSomething()); 
```

这会奏效。但是，我发现使用 jQuery mobile 我必须通过以下方式将事件处理程序绑定到整个文档：

```
$(document).on("click","#someId",doSomething()); 
```

有谁知道为什么会这样？jQuery mobile 是否以与 jQuery 不同的方式处理事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:46:36.233

jQuery mobile 多次使用 ajax 进行导航，因此元素并不总是存在于 DOM 中。

这就是人们使用*委托事件*绑定的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:51:13.167

标准 jQuery 绑定在您调用它们时起作用 - 即，当您使用`$("#someId").on("click",doSomething());`代码加载页面时，它将查找带有`someId`标识符的元素并将`doSomething()`回调绑定到它。但是使用 jQuery Mobile，加载页面时某些元素不存在。相反，这些元素是使用 AJAX 下载的，因此，您在页面加载时所做的绑定没有捕获这些元素。这就是为什么使用 jQuery Mobile 您通常会使用委托事件绑定（在旧版本的 jQuery 上，它们被称为*实时*绑定），即使是稍后添加到 DOM 的元素也可以使用。[参考](http://api.jquery.com/delegate/)。

# powershell - 如何将输出添加/组合到 PowerShell 中的现有数组？

> ID：15158083
> 
> 赞同：3
> 
> 时间：2013-03-01T12:43:59.660
> 
> 标签：powershell

我的`$file`包含两列。使用 中的用户名`.`，我想分别添加`name`和`givenname`作为第三列和第四列。到目前为止，我有：

```
$file = Import-Csv H:\computers2userswoSP1.csv
$out = foreach ($o in $file.name) {
    Get-ADUser $o | select name, givenname
} 
```

我尝试将下面的代码添加到第一个`foreach`中，但这不起作用：

```
foreach ($r in $out) {
    New-Object PSObject -prop @{
        name = $file.fullname
        givenname = $file.Firstname
    }
} 
```

并在循环之前添加：

```
Add-Member -InputObject $file -TypeName fullname
Add-Member -InputObject $file -TypeName Firstname 
```

在循环中：

```
$out.givenname += $file.FirstName
$out.name += $file. 
```

正如你所看到的，我在黑暗中拍摄了一点。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:11:32.577

导入文件，选择管道，选择其所有属性并再添加两个。这将创建空白属性，您可以在循环内对其进行更新。

导入命令 ( [Import-Csv](https://technet.microsoft.com/en-us/library/hh849891.aspx) ) 在括号中，因此您可以更新文件。没有它，文件将被使用并且更新将失败。

不过有一件事。看起来您的文件中已经有一个名称列，因此我将新属性命名为“全名”。

```
(Import-Csv H:\computers2userswoSP1.csv | select *, Name, GivenName) | ForEach-Object{
    $user = Get-ADUser $_.name | select fullname, givenname
    $_.fullname = $user.name
    $_.givenname = $user.firstname
    $_
} | Export-Csv H:\computers2userswoSP1.csv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:47:04.363

如果我正确地阅读了您的意图，您希望[`Import-Csv`](https://technet.microsoft.com/en-us/library/hh849891.aspx)根据来自[AD](http://en.wikipedia.org/wiki/Active_Directory)的数据为每个生成的对象添加两个属性。如果是这种情况，您可以执行以下操作（此处`Import-Csv`由 模拟[`ConvertFrom-Csv`](https://technet.microsoft.com/en-us/library/hh849890.aspx)）：

```
@'
username,fullname
bielawb,"Bartek Bielawki"
fasolaj,"Jas Fasola"
'@ | ConvertFrom-Csv | foreach {
    $AD = Get-ADUser -Identity $_.username
    New-Object PSObject -Property @{
        UserName = $_.username
        FullName = $_.fullname
        Name = $AD.Name
        GivenName = $AD.GivenName
    }
} 
```

CSV 中的数据无关紧要；如果字段与 CSV 中的字段不匹配，只需更新[`New-Object`](http://technet.microsoft.com/en-us/library/hh849885.aspx)语法中的值。

# java - 使用 AES/ECB 解密时出现“BadPaddingException：垫块损坏”

> ID：15158089
> 
> 赞同：5
> 
> 时间：2013-03-01T12:44:12.903
> 
> 标签：java, android, aes, badpaddingexception

在 Android/java 应用程序中，

```
byte[] data = ":Êº$jhk¨ë‹òºÃ"; // fetched from php server..
Cipher cipher = Cipher.getInstance("AES");
cipher.init(Cipher.DECRYPT_MODE, mKeyspec);
return new String(cipher.doFinal(data)); 
```

上面的代码总是抛出`BadPaddingException: pad block corrupted`以下 16 字节加密数据

> data = ":Êº$jhk¨ë‹òºÃ"（数据为 16 个字符）

密钥长度为 16 个字节。

当数据已经是块大小时，为什么会抛出这个异常。？并且不需要填充。

注意：加密数据是从 php 服务器获取的。

## 编辑：

更改为
`Cipher cipher = Cipher.getInstance("AES/ECB/NoPadding");`
从后
`Cipher cipher = Cipher.getInstance("AES");`

解密方法成功，但给出了这个输出 ![在此处输入图像描述](../Images/28f22cc9c6221b3ba4b768463942740b.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T13:11:29.703

在大多数情况下，我一直在处理的`BadPaddingException`是当我试图解密在服务器端使用不同填充加密的东西时，或者在某些情况下它甚至没有被解密。所以首先我建议你看看方法，并确保服务器返回你的字符串不仅`Base64`编码，而且加密`AES`。要注意的另一件事是，服务器端的加密是否使用某种填充，例如`AES/CBC/NoPadding`:`AES/CBC/PKCS5Padding`或`AES/CBC/PKCS7Padding`. 在这种情况下，您必须在 Android 中使用相同的填充，以便您可以解密字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:12:49.857

要加密固定长度的只有 16 字节的数据，使用不需要初始化向量的方法，更改`AES`为`AES/ECB/NoPadding`.

# ruby-on-rails - 如何在带有后备的 globalize3 中获取对象的翻译

> ID：15158090
> 
> 赞同：1
> 
> 时间：2013-03-01T12:44:13.857
> 
> 标签：ruby-on-rails, translation, globalize3

我想获得带有后备的翻译。我的方法不适合：

1) 更改语言环境(I18n.locale = :de)

2) 获取翻译(Place.find(:id))

3) ...

4）没有利润！

**更新：** 我找到了解决方案！

```
 before_filter :set_locale

  def set_locale
    locale = params[:locale]
    if locale.present?
      I18n.locale = locale
    end
  end 
```

# html - 在文本后面制作可点击的 img

> ID：15158091
> 
> 赞同：0
> 
> 时间：2013-03-01T12:44:19.037
> 
> 标签：html

我有一个带有指向某个 URL 的圆形区域的图像（圆形图像），在该图像上我有一些文本（一个简单的“< p >”标签），但现在的问题是你有单击该图像而不是文本以转到 URL，当您单击文本时，您只是选择文本，没有别的。

请问我该如何解决？

```
<p>this is the text<br />
that is not clickable, only selectable :( </p>
<img src="circle.png" alt="" usemap="#hitzone" />
<map name="hitzone">
    <area shape="circle" coords="0,0,100" href="#">
</map> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:20:29.307

你可以试试：

```
<p>
    <a href="your url here" style="text-decoration: none; color: black">Click me</a>
</p>
<img src="circle.png" alt="" usemap="#hitzone" />
<map name="hitzone">
    <area shape="circle" coords="0,0,100" href="#">
</map> 
```

# ios - 如何在应用商店中隐藏我的应用商店批准的应用？

> ID：15158092
> 
> 赞同：0
> 
> 时间：2013-03-01T12:44:21.137
> 
> 标签：ios, iphone, itunes

如何在应用商店中隐藏我的应用商店批准的应用。这可能与否。我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-25T12:37:23.283

您可以在 iTC 中转到您的应用程序，移至“定价和可用性”（左）并在“可用性”>“从销售中删除”下选择。您的应用程序不会从 iTunes Connect 中删除。您可以通过在上面的选项中选择某些（或所有）国家/地区来选择使其可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:47:41.290

您可以禁用除圣卢西亚以外的所有国家/地区。

# ruby-on-rails - CanCan 停止设计重定向

> ID：15158093
> 
> 赞同：0
> 
> 时间：2013-03-01T12:44:21.760
> 
> 标签：ruby-on-rails, devise, cancan

我正在为我的应用程序使用 Devise & CanCan。当用户登录时，他们会被带到他们的帐户页面 - 我为此设置了自定义重定向：

```
def after_sign_in_path_for(resource)
    url_for :controller => '/users', :id => current_user.id, :action => 'myaccount'
end 
```

但是，当我尝试在用户注册时执行相同操作时 - 即使用 after_sign_up_path_for(resource)，然后我收到此错误：

```
 NoMethodError in UsersController#show

undefined method `user' for #<User:0x25d15e8> 
```

它指的是我为CanCan设置的ability.rb文件，如下：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user

    can :manage, :all do |all|
        all.try(:user) == user
    end 
```

它说的是问题是 all.try(:user) == user。我不明白为什么这会导致问题？似乎无论我为重定向做什么，它总是会把我带到例如 {app}/users/22 并给出这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:06:14.937

按照[SO 帖子](https://stackoverflow.com/questions/6208679/cancan-undefined-method-user-problems)告诉您正在尝试执行`user.try(:user) == user`这是所有问题的根源。

所以你可以用它`can :manage, :all, :id => user.id`来解决问题。

# serialization - JSON.NET 序列化失败

> ID：15158096
> 
> 赞同：3
> 
> 时间：2013-03-01T12:44:27.633
> 
> 标签：serialization, asp.net-web-api, json.net

我有一个 LINQ-to-SQL 对象，可以毫无问题地序列化为 XML。我可以调用 Newtonsoft.Json.JsonConvert.SerializeObject() 并得到 JSON 结果。当我在 WebAPI 中传递与对象相同的结果时，我得到一个错误（见下文）。我构建了一个跟踪编写器来捕获 null 内部异常路径，如果路径是 '' ，我不确定如何找出导致错误的项目？

```
20130301122959: Started serializing AnvilDB.Partner. Path ''.
20130301122959: Error serializing AnvilDB.Partner. An item with the same key has already been added. Path ''.
Error: An item with the same key has already been added.
   at System.ThrowHelper.ThrowArgumentException(ExceptionResource resource)
   at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   at System.Collections.Generic.Dictionary`2.Add(TKey key, TValue value)
   at System.Web.Http.Metadata.Providers.AssociatedMetadataProvider`1.CreateTypeInformation(Type type)
   at System.Web.Http.Metadata.Providers.AssociatedMetadataProvider`1.GetTypeInformation(Type type)
   at System.Web.Http.Metadata.Providers.AssociatedMetadataProvider`1.GetMetadataForProperty(Func`1 modelAccessor, Type containerType, String propertyName)
   at System.Web.Http.Validation.ModelValidationRequiredMemberSelector.IsRequiredMember(MemberInfo member)
   at System.Net.Http.Formatting.JsonContractResolver.ConfigureProperty(MemberInfo member, JsonProperty property)
   at System.Net.Http.Formatting.JsonContractResolver.CreateProperty(MemberInfo member, MemberSerialization memberSerialization)
   at Newtonsoft.Json.Serialization.DefaultContractResolver.CreateProperties(Type type, MemberSerialization memberSerialization)
   at Newtonsoft.Json.Serialization.DefaultContractResolver.CreateObjectContract(Type objectType)
   at Newtonsoft.Json.Serialization.DefaultContractResolver.CreateContract(Type objectType)
   at Newtonsoft.Json.Serialization.DefaultContractResolver.ResolveContract(Type type)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
20130301123002: Started serializing System.Web.Http.HttpError. Path ''.
20130301123002: Started serializing System.Web.Http.HttpError. Path 'InnerException'.
20130301123002: Finished serializing System.Web.Http.HttpError. Path 'InnerException'.
20130301123002: Finished serializing System.Web.Http.HttpError. Path ''. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T14:50:37.943

四处挖掘我发现我可以为序列化程序设置一个错误处理程序，然后检查 ErrorContext.Member 值。这指向 XElement 类型的属性。进一步搜索发现这是一个已知/报告的错误，但尚未修复；见[https://github.com/JamesNK/Newtonsoft.Json/issues/53](https://github.com/JamesNK/Newtonsoft.Json/issues/53)

摘要：如果您有一个具有空值的 XElement 属性，JSON.NET 将失败。

这是我为诊断根本原因而添加的内容：

```
 base.Configuration.Formatters.JsonFormatter.SerializerSettings.Error = (sender, args) =>
    {
        string e = string.Format("{0}: {1}", args.ErrorContext.Member, args.ErrorContext.Path, args.ErrorContext.Error.Message);
        myTracer.Trace(System.Diagnostics.TraceLevel.Error, e, args.ErrorContext.Error);
    }; 
```

myTracer 是一个简单的文件跟踪编写器。

* * *

**更新**

我现在找到了解决此错误的方法。

WebAPI 用来序列化 JSON 对象的类不是直接来自 JSON.NET，而是设置为 JsonContractResolver 的一个实例，该实例位于 System.Net.Http.Formatting 中。幸运的是这是开源的，所以你可以在这里看到当前版本：

[http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/4764b0111b91#src/System.Net.Http.Formatting/Formatting/JsonContractResolver.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/4764b0111b91#src/System.Net.Http.Formatting/Formatting/JsonContractResolver.cs)

我将这个确切的代码复制到我自己的类中，并用我自己的类替换了 JSON.NET 中的 Contract Resolver，使用此代码（未更改）并修复了错误。由此我得出结论，当前发布的 WebAPI 版本（System.Net.Http.Formatting 版本 4.0.20710.0）存在 bug，下一个版本大概会修复这个问题。

如果您像我一样需要立即修复它，请执行以下步骤：

1.  使用 JsonContractResolver.cs 代码创建您自己的合约解析器类
2.  更改您的启动配置以覆盖 ContractResolver 设置：

样本：

```
var settings = System.Web.Http.GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings; 
// create formatter 
var formatter = new System.Net.Http.Formatting.JsonMediaTypeFormatter(); 
settings.ContractResolver = new MyJsonContractResolver(formatter); 
```

这应该会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:12:52.500

这看起来像 Web API 中的错误。我建议在这里提交一个关于它的错误：

[http://aspnetwebstack.codeplex.com/workitem/list/basic](http://aspnetwebstack.codeplex.com/workitem/list/basic)

同时，我认为您可以通过如下设置配置来解决此问题：

```
config.Formatters.JsonFormatter.SerializerSettings.ContractResolver = new DefaultContractResolver(); 
```

# python - matplotlib 中的颜色

> ID：15158102
> 
> 赞同：1
> 
> 时间：2013-03-01T12:44:36.600
> 
> 标签：python, matplotlib

我可以在 matplotlib 中使用红色期望的颜色-->r 绿色-->g 有没有我们必须如何输入颜色的列表？

例子：

```
plt.axvspan(73, 104, facecolor='r', alpha=0.2) 
```

它需要红色，另一种面部颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:45:45.190

您可以将任何 RGB 值作为三个浮点数的元组传递。或者，您也可以使用 HTML 样式，例如红色可以写为 '#FF0000'。有关详细信息，请参阅[matplotlib 颜色文档](http://matplotlib.org/api/colors_api.html)

一个例子可以读

```
import matplotlib.pyplot as plt

plt.axvspan(76, 77, edgecolor='#cc33ff', facecolor=(1.0, 0.5, 0.5), alpha=1)
plt.xlim(50, 80)
plt.show() 
```

注意指定边缘颜色和面颜色的不同版本。

# android - 将一个表格行拉伸到另一行的大小

> ID：15158104
> 
> 赞同：0
> 
> 时间：2013-03-01T12:44:39.183
> 
> 标签：android, layout, dialog

我正在开发一个 yatzy 游戏，玩家可以从对话框中选择将其分数放在哪里。但是，我在使布局按照我的意愿行事时遇到了一些麻烦。我已经拆分了常规记分卡以避免在较小的屏幕上滚动，并将这两个部分放在单独的表格布局中。

这两个表格布局包含不同数量的行并且具有不同的高度。谁能告诉我如何拉伸正确的表格布局行以使它们具有相同的高度？

这是一张照片：

![我也要稍微调整一下行内容。](../Images/84006d41988d4cf4414b2a30abef525d.png)

这是布局xml：

```
<LinearLayout
        android:id="@+id/tableLayoutHolder"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvTitle"
        android:layout_centerHorizontal="true"
        android:baselineAligned="false" >

        <TableLayout
            android:id="@+id/tableLayoutLeft"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TableRow
                android:id="@+id/tableRow0"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/dice_border_gray"
                    android:src="@drawable/d1" />

                <TextView
                    android:id="@+id/tv0"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <ImageView
                    android:id="@+id/imageView2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/dice_border_gray"
                    android:src="@drawable/d2" />

                <TextView
                    android:id="@+id/tv1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <ImageView
                    android:id="@+id/imageView3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/dice_border_gray"
                    android:src="@drawable/d3" />

                <TextView
                    android:id="@+id/tv2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <ImageView
                    android:id="@+id/imageView4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/dice_border_gray"
                    android:src="@drawable/d4" />

                <TextView
                    android:id="@+id/tv3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <ImageView
                    android:id="@+id/imageView5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/dice_border_gray"
                    android:src="@drawable/d5" />

                <TextView
                    android:id="@+id/tv4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <ImageView
                    android:id="@+id/imageView6"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/dice_border_gray"
                    android:src="@drawable/d6" />

                <TextView
                    android:id="@+id/tv5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <TextView
                    android:id="@+id/tvScUpperSum"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/tv_black_right_border"
                    android:text="@string/sum" />

                <TextView
                    android:id="@+id/tv6"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <TextView
                    android:id="@+id/tvScBonus"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/tv_black_right_border"
                    android:text="@string/bonus" />

                <TextView
                    android:id="@+id/tv7"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>
        </TableLayout>

        <TableLayout
            android:id="@+id/tableLayoutRight"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TableRow
                android:id="@+id/tableRow8"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <TextView
                    android:id="@+id/tvSc1Pair"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/tv_black_right_border"
                    android:text="@string/OnePair" />

                <TextView
                    android:id="@+id/tv8"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white"
                    android:duplicateParentState="true"
                    android:text="" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow9"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <TextView
                    android:id="@+id/tvSc2Pairs"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/tv_black_right_border"
                    android:text="@string/TwoPairs" />

                <TextView
                    android:id="@+id/tv9"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow10"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <TextView
                    android:id="@+id/tvSc3ofaKind"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/tv_black_right_border"
                    android:text="@string/ThreeOfAKind" />

                <TextView
                    android:id="@+id/tv10"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <TextView
                    android:id="@+id/tvSc4ofaKind"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/tv_black_right_border"
                    android:text="@string/FourOfAKind" />

                <TextView
                    android:id="@+id/tv11"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow12"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <TextView
                    android:id="@+id/tvFullHouse"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/tv_black_right_border"
                    android:text="@string/fullHouse" />

                <TextView
                    android:id="@+id/tv12"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow13"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <TextView
                    android:id="@+id/tvScSmallStr"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/tv_black_right_border"
                    android:text="@string/smallStr" />

                <TextView
                    android:id="@+id/tv13"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow14"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <TextView
                    android:id="@+id/tvScLargeStr"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/tv_black_right_border"
                    android:text="@string/largeStr" />

                <TextView
                    android:id="@+id/tv14"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow15"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <TextView
                    android:id="@+id/tvScChance"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/tv_black_right_border"
                    android:text="@string/chance" />

                <TextView
                    android:id="@+id/tv15"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow16"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <TextView
                    android:id="@+id/tvScYatzy"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/tv_black_right_border"
                    android:text="@string/yatzy" />

                <TextView
                    android:id="@+id/tv16"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow17"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/table_row_padding" >

                <TextView
                    android:id="@+id/tvScSum"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/tv_black_right_border"
                    android:text="@string/sum" />

                <TextView
                    android:id="@+id/tv17"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/white" />
            </TableRow>
        </TableLayout>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:51:00.510

我通过为正确的表格布局提供高度“match_parent”然后在其中的表格行上添加权重来解决这个问题。

# c# - PDFSharp 不工作

> ID：15158107
> 
> 赞同：1
> 
> 时间：2013-03-01T12:44:42.680
> 
> 标签：c#, winforms

我正在尝试将我的位图保存在`.pdf`文件中。它不起作用。我没有收到错误消息，但它没有打开保存`.pdf`文件的对话框。

这是我的代码：

```
PdfDocument doc = new PdfDocument();

for (int iCnt = 0; iCnt < nPaginasPDF; iCnt++)
{
    doc.Pages.Add(new PdfPage());
    XGraphics xgr = XGraphics.FromPdfPage(doc.Pages[iCnt]);
    XImage img = XImage.FromFile("C:\\" + (iCnt+1) + ".bmp"); (In this directory have these image files)

    xgr.DrawImage(img, panel1.ClientRectangle);
}

using (var Stream = saveFileDialog1.OpenFile())
{
    doc.Save(Stream);
}

doc.Close(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T12:50:21.583

`SaveFileDialog`'s`OpenFile`方法`SaveFileDialog.Filename`以读/写权限打开属性文件返回的文件。

要在保存前选择文件，必须先使用该`ShowDialog`方法。您是否`Stream`使用断点调试并检查了 的值？

# sql-server - SQL Azure 迁移向导的问题

> ID：15158109
> 
> 赞同：1
> 
> 时间：2013-03-01T12:44:48.517
> 
> 标签：sql-server, database, azure, azure-sql-database, bcp

我正在尝试将我的 SQL Server 2008 R2 数据库迁移到 Windows Azure。我为此使用 SQLAzureMW。但是在插入几行后我得到了以下错误。

```
BCP Command: bcp.exe "mydatabase.dbo.tableTest" in "c:\SQLAzureMW\BCPData\dbo.tableTest.dat" -E -w -b 10000 -a 16384 -q -S SERVER.database.windows.net -U "Test@vSERVER" -P "password"
*****
01/03/2013 10:18:08--> Error  

Starting copy...
SQLState = 22003, NativeError = 0
Error = [Microsoft][SQL Server Native Client 10.0]Numeric value out of range
SQLState = 22005, NativeError = 0
Error = [Microsoft][SQL Server Native Client 10.0]Invalid character value for cast specification
SQLState = 22001, NativeError = 0
Error = [Microsoft][SQL Server Native Client 10.0]String data, right truncation
SQLState = 22005, NativeError = 0
Error = [Microsoft][SQL Server Native Client 10.0]Invalid character value for cast specification
10000 rows sent to SQL Server. Total sent: 10000
SQLState = 22001, NativeError = 0
Error = [Microsoft][SQL Server Native Client 10.0]String data, right truncation
SQLState = 22008, NativeError = 0
Error = [Microsoft][SQL Server Native Client 10.0]Invalid date format 
```

我确保生成的表脚本与我在 SQL Server 中的数据库表完全匹配，并且双方的数据库排序规则也相同。

你能告诉我如何解决这些问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:26:06.863

尽量确保源数据库和目标数据库上的排序规则相同，否则您可能会遇到这些错误。

从 SQLAzure MW 创建新的目标数据库时要小心，因为它可能默认为另一个排序规则。

# javascript - 在脚本 Ajax 加载页面中传递值/参数

> ID：15158112
> 
> 赞同：0
> 
> 时间：2013-03-01T12:45:12.693
> 
> 标签：javascript, jquery, ajax, parameters

我使用 jQuery Ajax 加载另一个包含脚本标记的页面。如何将变量/参数从原始页面传递到加载页面的脚本标签？

脚本：

第 1 页

```
 <script>
    $(function(){

      $('#button').click(function(){
          $.ajax({
              type:"POST",
              url: "test.html",
              success: function(retour){
                $("#content").html(retour);
              }
          });
          return false;
      });

    });
  </script> 
```

第 2 页（加载者）：

```
 <script>
    $(function(){

      var Data = 'Data from origin page !';

    });
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:49:07.247

都是静态页面吗？那么你应该这样做：

```
window.DataFor2ndPage = {}; 
```

第 2 页：

```
<script>
$(function(){

  var Data = DataFor2ndPage;

});
</script> 
```

# ios - 我们可以使用自定义 wifi 热点在 ipod 中欺骗位置吗？

> ID：15158115
> 
> 赞同：0
> 
> 时间：2013-03-01T12:45:23.230
> 
> 标签：ios, objective-c, geolocation, wifi, ipod-touch

Ipod 使用 wifi 获取位置。我的问题是我们可以创建一个自定义 wifi 热点并做一些 hack 让 ipod 相信它的位置是我们想要的地方吗？这非常重要，因为在我的项目中，我必须根据美国的位置展示物品，但我住在印度。那么有什么方法可以欺骗美国的位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:15:04.920

您可以在项目方案中设置要模拟的自定义位置。然后，该模拟将为您的模拟器和直接从设备上的 Xcode 运行时“伪造”。

项目 -> 编辑方案 -> 启用位置，然后从预定义列表中选择或添加您自己的自定义 .gpx 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:49:23.343

没有 GPS 的地理定位有两种方式：

1.  Apple 拥有自己的 WiFi 网络及其位置数据库。如果您设置一个新的 WiFi 热点并连接到它，Apple 很可能无法单独从中获取位置，因为他们还不知道。
2.  您的外部 IP 地址可以追溯到您居住的国家，有时甚至是城市。这可以使用代理服务器进行欺骗。

您是在尝试将您的位置欺骗到 Web 服务器还是使用地理位置 API？正确的方法将取决于您要欺骗的内容。

# visual-studio-2010 - 从 TeamCity 的构建中排除项目

> ID：15158116
> 
> 赞同：9
> 
> 时间：2013-03-01T12:45:27.797
> 
> 标签：visual-studio-2010, teamcity

在工作中，我们已将 SQL 数据库项目添加到我们的 VS 2010 项目中，以此来控制存储过程中的更改和架构更改。不幸的是，它现在正在破坏我们 TeamCity CI 服务器上的构建。

有没有办法告诉 TeamCity 不要构建这些项目，或者我必须接受失败并在 TeamCity CI 服务器上安装 Visual Studio 2010？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-01T14:39:07.273

## 选项1

复制您当前的 .sln 并删除 SQL 数据库项目；然后将 TeamCity 指向此 sln。

## 选项 2

制作一个新的构建配置（您有 Debug、Release 并且您可以添加 DebugCI 作为示例）并勾选您要在此配置中编译的项目。然后在构建步骤设置中将 DebugCI 输入`Configuration`框中：（在此屏幕截图中是 Debug，但您明白了）

![在此处输入图像描述](../Images/fc20302c8d1251e1627231894901aea8.png)

# sql - 参数 SQL 上的 UNION

> ID：15158120
> 
> 赞同：1
> 
> 时间：2013-03-01T12:45:34.320
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的存储过程中有三个参数。在其中两个上，我执行 SELECT 语句来检索特定值。我想使用第三个参数对前两个参数进行 UNION。基本上这就是它的样子。

```
DECLARE @MaxDate1
DECLARE @MaxDate2
DECLARE @AllDate
SELECT @MaxDate1 = MAX(Date) FROM Table1
SELECT @MaxDate2 = MAX(Date) FROM Table2 
```

这就是我想要的，但是在这种情况下我不知道如何编写查询。

```
SET @AllDate = @MaxDate1 UNION @MaxDate2 
```

感谢您的帮助或建议。

好吧，因为我收到了很多缺点，所以我将尝试解释我是如何尝试做整件事的。我有一个存储过程，首先我从两个不同的表中查找最新日期。查找日期后，我创建了一个 IF ELSE 语句，说明如果用户选择的日期大于数据库中的日期，则它应该返回错误，但是如果日期小于 MaxDate，则所有列和行应返回到所选日期。但是日期是动态的，因此查询每次都会查找它们。因此检查 MaxDate 并据此查找字段也需要很长时间......连接超时。所以我试图在两个字段的 MaxDate 上建立一个联合，并使用 @AllDate 作为参数来检查所选日期。希望它更清楚:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:49:10.053

联合用于“联合”到数据集。

您可以执行以下操作：

```
select @maxdate1 as Maxdate
union 
select @maxdate2 
```

虽然你不需要这一切，因为你可以做类似的事情

```
select max(Date) as Maxdate from Table1
union
select max(Date) as Maxdate from Table2 
```

在标量上，您不能使用联合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:55:38.473

如果您的 PRC 需要表结构中的两个日期，那么为什么不使用表，如下所示：

```
DECLARE @DateTable TABLE(
MaxDate datetime)

INSERT INTO @DateTable (MaxDate)
select max(Date) as Maxdate from Table1
union
select max(Date) as Maxdate from Table2 
```

如果您需要返回两个日期以供其他程序或以后使用，我建议您使用 a [`TABLE-VALUED FUNCTION`](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)，因为这样您就可以返回一个表格，供您`SELECT`以后使用。

```
CREATE FUNCTION dbo.GetMaxDates()
RETURNS @MaxDates TABLE
(
MaxDate datetime
)
AS
BEGIN

INSERT INTO @DateTable (MaxDate)
select max(Date) as Maxdate from Table1
union
select max(Date) as Maxdate from Table2

RETURN

END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T12:49:21.580

你不能写这个吗：

```
SELECT @MaxDate1 AS MaxDate1, @MaxDate2 AS MaxDate2 
```

# java - 在最终修饰符中接收错误

> ID：15158126
> 
> 赞同：-2
> 
> 时间：2013-03-01T12:45:48.897
> 
> 标签：java, final, modifier

在我的 android 应用程序中，这里有一些代码。

```
final String line;
while ((line = rd.readLine()) != null) {
 // Print the response output...
 offer.this.runOnUiThread(new Runnable() {
 public void run() {
    Toast.makeText(getBaseContext(), ""+line.toString(), Toast.LENGTH_LONG).show();
    //Toast.makeText(getBaseContext(),"data inserted",Toast.LENGTH_SHORT).show();
    }
  });
} 
```

在上面的代码中，我将 line 声明为“final”，它显示错误为

> 最终的局部变量行可能已经被赋值

在线

```
while ((line = rd.readLine()) != null) 
```

所以，我删除了 final 修饰符。现在它显示错误为

> 无法引用以不同方法定义的内部类中的非最终变量行

在线

```
Toast.makeText(getBaseContext(), ""+line.toString(), Toast.LENGTH_LONG).show(); 
```

我在 while 循环中声明了一个局部字符串变量，并为其分配了行值。代码是

```
while ((line = rd.readLine()) != null) {
    final String e=line.toString();
    offer.this.runOnUiThread(new Runnable() {
    public void run() {
        Toast.makeText(getBaseContext(), ""+e.toString(), Toast.LENGTH_LONG).show();
        }
    });
 } 
```

它也显示错误。我无法理解这一点。有人可以说如何在我的代码中避免这个错误。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:48:08.200

```
String line;
while ((line = rd.readLine ()) != null) {
    final String l = line;
    offer.this.runOnUiThread (
        new Runnable () {
            public void run () {
                Toast.makeText (getBaseContext(), l, Toast.LENGTH_LONG).show ();
            }
        }
    );
} 
```

# java - 将带有样式范围的 SWT StyledText 内容转换为图像

> ID：15158138
> 
> 赞同：1
> 
> 时间：2013-03-01T12:46:25.000
> 
> 标签：java, swt, styledtext

我想将 Styledtext （使用 StyleRanges ）的内容打印/转换为图像。不知道怎么处理。。

任何人请指导我这样做..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:10:21.627

干得好：

```
public static void main(String[] args)
{
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setText("Widget");
    shell.setLayout(new GridLayout(1, false));

    final StyledText text = new StyledText(shell, SWT.BORDER);
    text.setText("Text to capture");
    text.setStyleRange(new StyleRange(0, text.getText().length(), display.getSystemColor(SWT.COLOR_RED), display.getSystemColor(SWT.COLOR_BLACK)));
    text.setLayoutData(new GridData(SWT.FILL, SWT.BEGINNING, true, false));

    Button button = new Button(shell, SWT.PUSH);
    button.setText("Capture");
    button.addListener(SWT.Selection, new Listener()
    {
        public void handleEvent(Event event)
        {
            Point tableSize = text.getSize();
            GC gc = new GC(text);
            final Image image = new Image(display, tableSize.x, tableSize.y);
            gc.copyArea(image, 0, 0);
            gc.dispose();

            ImageLoader loader = new ImageLoader();
            loader.data = new ImageData[] {image.getImageData()};
            loader.save("swt.png", SWT.IMAGE_PNG);

            image.dispose();
        }
    });

    shell.pack();
    shell.open();
    while (!shell.isDisposed())
    {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

这是看起来的`Shell`样子：

![在此处输入图像描述](../Images/576a36a10841ce70f8554005902b8056.png)

这就是捕获的图像的样子：

![在此处输入图像描述](../Images/cab6ef244a97f2d429916777fefd5aec.png)

# laravel - Laravel Eloquent AS 关键字

> ID：15158139
> 
> 赞同：3
> 
> 时间：2013-03-01T12:46:27.300
> 
> 标签：laravel, eloquent

我正在尝试使用关键字 AS 来组合两列，以便我可以对该列进行排序。

这是目前的完整查询。

```
$quotes = Quote::where('created_at', '>=', $date)
        ->where('created_at', '<=', date('Y-m-d').' 23:59:59')
        ->order_by('upvotes', 'desc')
        ->paginate(5); 
```

我想要做

```
->order_by('(downvotes - upvotes) as votes', 'desc') 
```

谢谢你。

# 解决方案

似乎使用 DB::raw() 是唯一的方法，Laravel/Eloquent 只是不理解 AS。

工作解决方案是

```
 $quotes = Quote::select(array('id', DB::raw('(downvotes - upvotes) as votes'), 'upvotes', 'downvotes', 'etc')) // Rest of column needed.
        ->where('created_at', '>=', $date)
        ->where('created_at', '<=', date('Y-m-d').' 23:59:59')
        ->order_by('votes', 'asc')
        ->paginate(5); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:31:54.340

尝试这个：

```
Quote::where('created_at', '>=', $date)
        ->select(array('id',DB::raw('(downvotes - upvotes) as votes'))) //and what you need
        ->where('created_at', '<=', date('Y-m-d').' 23:59:59')
        ->order_by('upvotes', 'desc')
        ->order_by('votes', 'desc')
        ->paginate(5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T04:48:36.680

```
$selectdata = DB::table('TableDetails')
            ->leftJoin('TableStatus', 'TableDetails.TableID', '=', 'TableStatus.TableID')
            ->leftJoin('LoginUser', 'TableStatus.WaiterLoginID', '=', 'LoginUser.LoginID')
            ->leftJoin('UserRole', 'LoginUser.UserRoleID', '=', 'UserRole.UserRoleID')
            ->select('LoginUser.UserName','UserRole.UserRoleName','TableStatus.TableStatus','TableStatus.TableTimeStatus','TableStatus.WaiterLoginID','TableDetails.TableSeatCount - TableStatus.TableSeatOccupied AS TableRemainingCount')
            ->get(); 
```

只需在减号之前和之后生活一个“空间”，它对我有用。

# java - 使用spring处理请求/响应中的非表单字段的正确方法？

> ID：15158145
> 
> 赞同：0
> 
> 时间：2013-03-01T12:46:45.683
> 
> 标签：java, spring, hibernate, spring-mvc

我有一个基于 Hibernate 的模型对象，例如，有十个字段。我需要将其中六个传递给 Spring 表单并将它们取回，但其他四个不需要往返表单。但是，当 Hibernate 对象保存在数据库中时，它们确实需要坚持更新/创建。如果不需要，我宁愿不要将它们作为隐藏字段放在表单上，​​其中一些具有潜在的敏感数据。

最好的方法是什么？我在网上寻找解决方案，但信息/示例相当稀疏。

我一直在尝试将 Hibernate POJO 的实例创建为请求范围的 Spring bean，但我似乎无法获得正确的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:30:58.573

我的方法将是一个单独的表单支持对象。类似的东西

```
public class ModelForm {
    //required fields

    public ModelForm(Model model){
        //set the values from model
    }

    //getters and setters

    public void update(Model model){
        //set values back to the model
    }
}

public class ModelController {
    public <return-type> submit(@ModelAttribute ModelForm form) {
        Model model = loadModel(form);//Load the model object from DB using a id or some other property
        form.update(model);
        //other logic
        save(model);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:34:56.137

仅使用六个字段创建基本 DTO，然后使用返回的反序列化数据更新实体。

或者简单地将整个休眠实体序列化，然后反序列化并合并。

由你决定，因为四个领域使回合 truip 真的不会有太大的不同。更可能的安全将是一个问题。

在我的应用程序中，我设置了许多转换服务来自动反序列化实体。

当以一种形式呈现来自多个不同实体的数据时，DTO 很有用。

不要创建请求范围的 bean，那是矫枉过正。四个未使用的字段将保留，它们被持久化在数据库中/存储在任何休眠缓存中。

在优化之前担心你的 api 设计

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:10:31.363

如果模型的所有属性都没有发送到弹簧前端（表单为隐藏），您将丢失数据，除非您将其保存在某处（会话、静态映射、数据库），这可能是一项代价高昂的操作。如果不想两次访问数据库，请放入一个以 Key 为用户和对象 id 的 staticMap 并为旧对象赋值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T13:18:22.937

如何在 Hibernate 中为该实体设置[二级缓存](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch20.html#performance-cache)，以便在使用从 UI 接收的属性更新实例时不必从 DB 重新加载实例。

# c - 在 ubuntu linux 端使用套接字的客户端 C 程序未运行

> ID：15158147
> 
> 赞同：0
> 
> 时间：2013-03-01T12:46:55.723
> 
> 标签：c, linux, sockets

我是套接字编程的新手。我今天尝试执行一个程序。我的目的是检查服务器是否可用。期待输出“失败！” 但我的程序似乎不起作用。代码在编译过程中没有显示错误，这让我想知道我是否正确使用了 Linux API。以下是我的代码...

```
#include<stdio.h>
#include<string.h>
#include<sys/socket.h>
#include<netinet/in.h>
#include<arpa/inet.h>

int main()
    {
    char servIP[]="127.0.0.1";
    char check[]="check";
    int SrvConnect,ret;
    struct sockaddr_in servAdr;
    //printf("Test");
    SrvConnect=socket(AF_INET,SOCK_STREAM,0);
    servAdr.sin_addr.s_addr=inet_addr(servIP);
    servAdr.sin_port=htons(1000);
    ret=sendto(SrvConnect,&check,sizeof(check),0,(struct sockaddr *)&servAdr,sizeof(servAdr));
    if(ret==-1)
        printf("\nFailed!\n");
    //printf("Test");
    close(SrvConnect);
    } 
```

我尝试在代码本身的开头和结尾放置几个输出语句（现在已注释）。但即使是那些行也不会执行。请不要介意这是一个愚蠢的错误。A 对此真的很陌生，我没有人可以指导我。谢谢你的阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:50:34.260

问题是您已经创建了一个 TCP 套接字。TCP 套接字需要先*连接*到服务器，然后才能发送任何内容。尝试[`connect`](http://linux.die.net/man/3/connect)先调用连接服务器，然后使用[`write`](http://linux.die.net/man/2/write)或[`send`](http://linux.die.net/man/3/send)发送数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:02:11.050

您还需要`servAdr.sin_family = AF_INET`在连接之前进行设置。如果连接失败，最好使用`perror()`打印错误。

# javascript - 拦截 javascript 对象的属性/方法的获取

> ID：15158154
> 
> 赞同：2
> 
> 时间：2013-03-01T12:47:12.793
> 
> 标签：javascript

如何/我可以拦截请求以获取 javascript 对象的方法/属性并返回自定义值。

例如，

```
var obj = {
    // This "get" method is where I want to replace the call to get a property of an object.
    get : function(propertyName) {
        if (propertyName == 'somePropertyThatDoesntExist') { return 1; }
        else { return 0; } // Something like this?
};

// Either this method of access,
var myValue1 = obj.somePropertyThatDoesntExist
var myValue2 = obj.someOtherPropertyThatDoesntExist

// Alternatively, 
var myValue3 = obj['somePropertyThatDoesntExist']
var myValue4 = obj['someOtherPropertyThatDoesntExist'] 
```

所以 myValue1 和 myValue3 的值为 1，而 myValue2 和 myValue4 的值为 0。

目前， myValue1, 2, 3, 4 都将是“未定义的”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:02:49.630

我认为没有办法拦截对未定义属性的访问。您可以随时执行以下操作

```
if(obj.someProperty != undefined)
    obj.someProperty // access the property 
```

或者，您可以编写一个 get 方法

```
var obj = {
    someProperty : "val",
    get : function(propertyName) {

        if (this[propertyName] == undefined) { return 0; }
        else { return this[propertyName]; } 
    }
}; 
```

并像使用它一样

```
obj.get("someProperty") // returns 0 if property is not defined. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-09T18:00:54.283

这在 JavaScript ES6 中使用[Proxy](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy)对象是可能的

```
var obj = {}

// Wrap the object using Proxy
obj = new Proxy(obj, {
  get : function (target, propertyName) {
    if (propertyName === 'somePropertyThatDoesntExist') { return 1; }
    else { return 0; }
  }
})

var myValue1 = obj.somePropertyThatDoesntExist       // 1
var myValue2 = obj.someOtherPropertyThatDoesntExist  // 0 
```

# django - 如何在 django 中执行迁移

> ID：15158167
> 
> 赞同：1
> 
> 时间：2013-03-01T12:47:51.803
> 
> 标签：django, django-models, database-migration

我的 model.py 文件是

```
from django.db import models

class Book(models.Model):
    book_id=models.AutoField(primary_key=True,unique=True)
    book_name=models.CharField(max_length=30)
    author_name=models.CharField(max_length=30)
    publisher_name=models.CharField(max_length=40)
    def __unicode__(self):
        return "%d %s %s %s" % (self.book_id,self.book_name, self.author_name,self.publisher_name)

class Author(models.Model):
    author_id=models.AutoField(primary_key=True)
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email = models.EmailField()
    book=models.ForeignKey(Book)

    def __unicode__(self):
        return u'%d %s %s' % (self.author_id,self.first_name, self.last_name) 
```

对于“类书”，我已经在 MySQL 中使用`manage.py syncdb`. 但是我正在使用名为“Author”的新表更新数据库，我需要执行相同操作的过程。因为我试图以相同的方式执行后者，但未在数据库中创建表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:51:02.037

`syncdb`应该创建新指定的表；如果`Author`没有被创建，那是因为它没有以有效的方式编码。请注意，该行

```
age=int 
```

导致语法错误；你应该这样指定一个[整数字段](https://docs.djangoproject.com/en/dev/ref/models/fields/#integerfield)：

```
age=models.IntegerField() 
```

但是，最好让[Django South](http://south.aeracode.org/)处理与数据库迁移相关的任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:50:13.793

```
`python syncdb` should not create any changes in the existing table 
```

使用南迁移概念。运行以下命令

```
python manage.py migrate 
```

将在模型中进行更改。

# javascript - 在跨度悬停时在鼠标光标处显示 DIV

> ID：15158180
> 
> 赞同：15
> 
> 时间：2013-03-01T12:48:33.710
> 
> 标签：javascript, jquery, html

当用户将鼠标悬停在 SPAN 或 DIV 上时，我希望 DIV 取消隐藏并出现在鼠标光标处。

我做了这个功能，但它不起作用（加载了jquery）。

```
function ShowHoverDiv(divid){

    function(e){
        var left  = clientX  + "px";
        var top  = clientY  + "px";
        $("#"+divid).toggle(150).css("top",top).css("left",left).css("position","fixed");
        return false;
    }

}

<div id="divtoshow" style="display:none">test</div>
<br><br>
<span onmouseover="ShowHoverDIV('divtoshow')">Mouse over this</span> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-01T14:05:20.993

你几乎在那里：

```
function hoverdiv(e,divid){

    var left  = e.clientX  + "px";
    var top  = e.clientY  + "px";

    var div = document.getElementById(divid);

    div.style.left = left;
    div.style.top = top;

    $("#"+divid).toggle();
    return false;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="divtoshow" style="position: fixed;display:none;">test</div>
    <br><br>
    <span onmouseover="hoverdiv(event,'divtoshow')" onmouseout="hoverdiv(event,'divtoshow')">Mouse over this</span>
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-01T13:05:32.980

我快速设置了这个例子，从 Dušan Radojević 代码开始：

```
$("#spanhovering").hover(function(event) {
    $("#divtoshow").css({top: event.clientY, left: event.clientX}).show();
}, function() {
    $("#divtoshow").hide();
}); 
```

[jsfiddle](http://jsfiddle.net/yhRRe/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T14:25:12.460

实际上，我更喜欢 Imperative 的答案。我没有权限在他的帖子中添加评论，所以这是他的代码，经过调整使其更具适应性：

```
$(".spanhover").hover(function(event) {
    var divid = "#popup" + $(this).attr("id")
    $(divid).css({top: event.clientY, left: event.clientX}).show();
}, function() {
    var divid = "#popup" + $(this).attr("id")
    $(divid).hide();
}); 
```

[http://jsfiddle.net/SiCurious/syaSa/](http://jsfiddle.net/SiCurious/syaSa/)

你需要对你的 div 和 span id 命名约定有点聪明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T14:54:37.887

```
$('#divToShow,#span').hover(function(e){
 var top = e.pageY+'px';
 var left = e.pageX+'px'   
 $('#divToShow').css({position:'absolute',top:top,left:left}).show();
},
function(){
    $('#divToShow').hide();
});
<div id="divToShow" style="display:none">test</div>
<br/><br/>
<span id="span" >Mouse over this</span> 
```

我认为这段代码对您的情况很有用。

# asp.net-mvc-3 - 如何在 webgrid 列中格式化 html 助手

> ID：15158183
> 
> 赞同：0
> 
> 时间：2013-03-01T12:48:40.747
> 
> 标签：asp.net-mvc-3

```
var grid = new WebGrid(Model, rowsPerPage: 10, canPage: true);

 @grid.GetHtml(
       columns: new[]
       {
       grid.Column("CompanyName",
                    style: "col1",
                    format:@Html.TextBoxFor(modelItem => modelItem.CompanyName,new{@class="edit-mode"})
    )
}) 
```

在格式上它的显示是这样的

`cannot convert from html string to function <dynamic object>`

我也试过

```
format: item => Html.TextBox(
        (string)item.CompanyName
    ) 
```

如何在 webgrid 中格式化 html 助手？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:53:09.240

试试这样：

```
grid.Column(
    "CompanyName",
    style: "col1",
    format: item => Html.TextBoxFor(
        modelItem => modelItem.CompanyName, 
        new { @class="edit-mode" }
    )
) 
```

但我猜这不是您想要的，因为我猜您的视图绑定到不同的模型。

您需要的是以下内容：

```
grid.Column(
    "CompanyName",
    style: "col1",
    format: 
        @<text>
            @{ var index = Guid.NewGuid().ToString(); }
            @Html.Hidden("HeaderItems.Index", index)
            Html.TextBox(
                "[" + index + "].CompanyName", 
                item.CompanyName, 
                new { @class="edit-mode" }
            )
        </text>
) 
```

现在您将发布到的视图可以强类型化到您的视图模型的集合中：

```
[HttpPost]
public ActionResult SomeAction(IEnumerable<CompanyViewModel> model)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:52:26.363

一种方法是：

```
Format: m => Html.TextBoxFor(mdelItem => modelItem.CompanyName, new {@class="edit-mode"}) 
```

# jquery - jquery，焦点（）中的回调函数

> ID：15158187
> 
> 赞同：1
> 
> 时间：2013-03-01T12:48:52.190
> 
> 标签：jquery, callback, focus

我在 focus() 中有一个回调函数，但只要我的元素有焦点，该函数就会继续播放，这是只播放一次函数的一种方式吗？

例如，在此代码中，alert('ok') 将出现，直到 textearea 失去焦点。这是一种只播放一次警报的方法吗？

```
<textarea></textarea>

<script src="jquery.js"></script>
<script>

$(function () {

    $('textarea').focus(function(){
        alert('ok');
    }); 

});
</script> 
```

[http://jsfiddle.net/manguo_manguo/9utcy/](http://jsfiddle.net/manguo_manguo/9utcy/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:51:02.797

不是函数一直在播放，而是你自动从控件中取出焦点以便点击警报，然后焦点回到控件，再次触发焦点事件，尝试测试除了警报之外的任何其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:52:26.533

更新您的 jQuery 以使用该`one()`功能。

这是代码：

```
$(function () {

    $('textarea').one('focus', function(){
        alert('ok');
    }); 

}); 
```

这是你的小提琴：http: [//jsfiddle.net/9utcy/1/](http://jsfiddle.net/9utcy/1/)

# php - 开发一个模块 joomla

> ID：15158188
> 
> 赞同：0
> 
> 时间：2013-03-01T12:48:52.860
> 
> 标签：php, jquery, joomla, mootools

我正在尝试使用 jquery 开发一个简单的模块，但我想禁用 mootools。我尝试在 default.php 文件中使用此代码

```
 $user =& JFactory::getUser();
    if ($user->get('guest') == 1) {
    $headerstuff = $this->getHeadData();
    $headerstuff['scripts'] = array();
    $this->setHeadData($headerstuff); }

    <jdoc:include type="head" /> 
```

但我收到此错误：不在对象上下文中使用 $this....

我等你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:59:15.360

我不认为你在做什么是一个好主意。如果要使用 jQuery，则将其包含在 noconflict 模式中，并使用`jQuery`而不是`$`引用它。

但是，无论如何，这是您想要的代码。`$this`应该是一个`JDocument`对象，所以你需要先得到它。

```
 $user = JFactory::getUser();
if ($user->get('guest') == 1) {
    $doc = JFactory::getDocument();
    $headerstuff = $doc->getHeadData();
    $headerstuff['scripts'] = array();
    $doc->setHeadData($headerstuff);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:58:32.067

我猜你想编辑 html 文档属性。你会得到错误，因为 setHeadData() 是一些 Joomla 类的方法。您不能在课堂外使用 $this 。

尝试获取文档对象并像这样调用 setHeadData：

```
 $doc =& JFactory::getDocument();
    $doc->setHeadData($headerstuff); 
```

无论如何，您可以同时使用 jQuery 和 mootools。只需按照这篇文章：[http ://davidwalsh.name/jquery-mootools](http://davidwalsh.name/jquery-mootools)

# python - 如何在对象管理页面中使内联字段可点击？（姜戈）

> ID：15158196
> 
> 赞同：5
> 
> 时间：2013-03-01T12:49:13.000
> 
> 标签：python, django, django-admin

我正在使用 Django 1.4。我有两种类型的对象：零件和章节。零件通过外键有许多章节。在 Part 对象的管理页面中，我想查看“属于”该部分的章节列表。所以我这样做了：

```
from django.contrib import admin
from americano.apps.courses.models import Part, Chapter

class ChapterInline(admin.TabularInline):
    model = Chapter
    exclude = ['body', 'pub_date']
    readonly_fields = ('name', 'name_extension', 'number', 'lang')
    extra = 0

class PartAdmin(admin.ModelAdmin):
    list_display = ('name', 'number')
    search_fields = ['name']
    ordering = ['number']
    inlines = [ChapterInline]

class ChapterAdmin(admin.ModelAdmin):
    list_display = ('name', 'number', 'part', 'pub_date')
    list_display_links = ('name', 'part')
    ordering = ['number']
    search_fields = ['name']

admin.site.register(Part, PartAdmin)
admin.site.register(Chapter, ChapterAdmin) 
```

**我现在想要的是使 Part admin 页面中列出的章节可点击。我希望他们链接到章节页面。**我尝试`list_display_links = ('name',)`在 ChapterInline 类中使用，但它不起作用。有人有想法吗？谢谢。

# cocoa-touch - Cocoa touch Core Plot 散点图未显示 iOS

> ID：15158197
> 
> 赞同：-1
> 
> 时间：2013-03-01T12:49:13.440
> 
> 标签：cocoa-touch, core-plot, scatter-plot

我想在我的 iphone 应用程序中显示折线图。有人建议我 core plot 是一个很好的开源库。所以我尝试用它显示非常基本的图形，但图形根本没有显示，只有黑屏出现。以下是我正在使用的代码

**ChartViewController.h**

```
#import <UIKit/UIKit.h>
#import "CorePlot-CocoaTouch.h"

@interface ChartViewController : UIViewController<CPTPlotDataSource>

@end 
```

**ChartViewController.m**

```
#import "ChartViewController.h"

CPTXYGraph *graph;
CPTGraphHostingView *graphHost;
CPTScatterPlot *dataSourceLinePlot;
NSMutableArray *xdata;
NSMutableArray *ydata;

@implementation ChartViewController

- (id)init{
    self = [super initWithNibName:nil bundle:nil];
    return self;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self initializeData];
    NSLog(@"viewdidloaded with number of records= %i",xdata.count);
    graph = [[CPTXYGraph alloc]initWithFrame:self.view.bounds];

    graphHost = [[CPTGraphHostingView alloc]initWithFrame:self.view.bounds];

    dataSourceLinePlot = [[CPTScatterPlot alloc] initWithFrame:graph.bounds];
    dataSourceLinePlot.identifier     = @"Data Source Plot";
    dataSourceLinePlot.dataSource   = self;

    [graph addPlot:dataSourceLinePlot];
    graphHost.hostedGraph = graph;

    self.view = graphHost;
}

- (void)initializeData{
    xdata = [[NSMutableArray alloc]init];
    ydata = [[NSMutableArray alloc]init];
    for(int i=0;i<4;i++){
        [xdata addObject:[NSNumber numberWithInt:i]];
        [ydata addObject:[NSNumber numberWithInt:i*5]];
    }
}

- (NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot {
    NSUInteger count = (NSUInteger)[xdata count];
    NSLog(@"inside number of recordsfor plot");
    return count;
}

- (NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index {
    NSDecimalNumber *num = nil;
    num = (NSDecimalNumber *)[NSNumber numberWithInteger:index];
    NSLog(@"inside number for plot");
    return num;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

如果有人可以帮助我解决这个问题，我将非常感激，因为我是这个环境的新手。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:31:31.860

使托管视图 ( `graphHost`) 成为子视图，`self.view`而不是替换它。

# c++ - async_read_some 模拟同步超时接收

> ID：15158198
> 
> 赞同：2
> 
> 时间：2013-03-01T12:49:13.907
> 
> 标签：c++, boost, asynchronous, boost-asio

我的程序总是使用平台相关的同步接收，它会阻塞执行直到超时或接收事件，例如：

`recv(buf, size, timeout);`

现在我想用 boost 替换这段代码以使其跨平台。我找到了解决方案，但我认为它非常难看（与单个函数调用相比）。我写了这个：

```
void IPV4_HOST::recv_timer_handler(const boost::system::error_code & e)
{
    if (e.value() == boost::system::errc::success) {
        f_recv_timeout = true;
        asio_socket.cancel();
    }
}

void IPV4_HOST::recv_handler(const boost::system::error_code & , size_t bytes)
{
    recv_timer.cancel();
    bytes_received = bytes;
}

int IPV4_HOST::receive(void * buf, size_t buf_size, TIME::INTERVAL timeout)
{
    f_recv_timeout = false;
    bytes_received = 0;

    recv_timer.expires_from_now(timeout.get_boost_milli());
    recv_timer.async_wait(boost::bind(&IPV4_HOST::recv_timer_handler, this, boost::asio::placeholders::error));

    asio_socket.async_read_some(boost::asio::buffer(buf, buf_size),
                                boost::bind(&IPV4_HOST::recv_handler, this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));

    io_service.run();

    if (f_recv_timeout)
        throw IO::TimeoutReceiveException();

    return bytes_received;
} 
```

你能告诉我，我做对了吗？有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T13:55:32.250

这是正确的方向，但有一些微妙的问题需要考虑：

*   如果任何其他作品发布到`io_service`中，`IPV4_HOST::receive()`则将开始处理该作品。
*   在[`io_service::run()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service/run/overload1.html)正常情况下返回时，暗示`io_service`已停止。除非 io_service 是 ，否则对、`run()`或的后续调用将立即返回。`run_one()``poll()``poll_one()`[`reset()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service/reset.html)
*   两个异步操作可以同时完成，使两个完成处理程序准备好成功运行。这种行为在 ; 的备注部分得到了强调[`deadline_timer::cancel()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_deadline_timer/cancel/overload1.html)。但是，所有异步操作都表现出这种[行为](https://stackoverflow.com/a/14116082/1053968)。在现有代码中，这可能导致在大于零时`IO::TimeoutReceiveException`被抛出。`bytes_received`

一种处理`io_service`细节的解决方案，以及使用完成处理程序的不确定执行顺序，可能看起来像：

```
void IPV4_HOST::recv_timer_handler(const boost::system::error_code & e)
{
  timer_handled = true;
  if (!e) {
    f_recv_timeout = true;
    asio_socket.cancel();
  }
}

void IPV4_HOST::recv_handler(const boost::system::error_code &,
                             size_t bytes)
{
  recv_handled = true;
  recv_timer.cancel();
  bytes_received = bytes;
}

int IPV4_HOST::receive(void * buf, size_t buf_size, TIME::INTERVAL timeout)
{
  timer_handled  = false;
  recv_handled   = false;
  f_recv_timeout = false;
  bytes_received = 0;

  recv_timer.expires_from_now(timeout.get_boost_milli());
  recv_timer.async_wait(
    boost::bind(&IPV4_HOST::recv_timer_handler, this,
                boost::asio::placeholders::error));

  asio_socket.async_read_some(
    boost::asio::buffer(buf, buf_size),
    boost::bind(&IPV4_HOST::recv_handler, this, 
                boost::asio::placeholders::error,
                boost::asio::placeholders::bytes_transferred));

  // If a handler has not ran, then keep processing work on the io_service.
  // We need to consume both handlers so that old handlers are not in the
  // io_service the next time receive is called.
  while (!timer_handled || !recv_handled)
  {
    io_service.run_one();
  }

  // If the io_service has stopped (due to running out of work), then reset
  // it so that it can be run on next call to receive.
  if (io_service.stopped())
    io_service.reset();

  // If no bytes were received and the timeout occurred, then throw.  This
  // handles the case where both a timeout and receive occurred at the 
  // same time.
  if (!bytes_received && f_recv_timeout)
    throw IO::TimeoutReceiveException();

  return bytes_received;
} 
```

另外，当您尝试获得跨平台行为时，请阅读[`basic_stream_socket::cancel()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_stream_socket/cancel/overload1.html). 有一些特定于平台的行为需要注意。

# php - 如何在实时服务器中执行 json decode？

> ID：15158202
> 
> 赞同：1
> 
> 时间：2013-03-01T12:49:21.460
> 
> 标签：php, javascript, google-maps, json

我目前正在使用谷歌地图 API。在谷歌地图 API 中，我正在从特定地址获取经度和纬度。

这是代码：

```
$geocode=file_get_contents('http://maps.google.com/maps/api/geocode/json?address=1746+Esterbrook+Dr&sensor=false');

$output= json_decode($geocode);

$lat = $output->results[0]->geometry->location->lat;
$long = $output->results[0]->geometry->location->lng; 
```

在这个纬度和经度中，值在我的实时服务器中显示为空（null）。在我的本地主机机器中，它工作得很好。显示谷歌地图有什么要包括的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:48:00.060

我个人更喜欢返回数组，因为它不那么模棱两可。您可以通过在 json 解码上将第二个参数设置为 true 来做到这一点。另外我建议假设它并不总是会返回结果，这就是为什么我添加了额外的 if 语句。Follow this URL..

[PHP.net 函数 json-decode](http://php.net/manual/en/function.json-decode.php)

```
$geocode=file_get_contents('http://maps.google.com/maps/api/geocode/json?address=1746+Esterbrook+Dr&sensor=false');

if(strlen($geocode)>0){

  $output= json_decode($geocode, true);

  if(is_array($output) && count($output)>0)
  {
    $output[0]['location']['lat']  ;
    print_r($output); // the printr will give you a clue for the exact nesting to use above
  }

} 
```

# javascript - 图像作为按钮

> ID：15158203
> 
> 赞同：0
> 
> 时间：2013-03-01T12:49:22.503
> 
> 标签：javascript, image, html, canvas

我想要添加到画布中的图像用作按钮。当我单击图像时，必须显示警报。还必须禁止单击画布的其余部分。我怎样才能做到这一点？谢谢。

```
<script>
window.onload = function(){
    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");
    var quizbg = new Image();
    quizbg.src = "basla.png";
    context.drawImage(quizbg,0,0);
}

<script>

<body>
<div id="ccontainer">
<canvas id="myCanvas" width="600" height="400"></canvas>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:00:06.507

这样做，

```
<script>
    window.onload = function(){
            var canvas = document.getElementById("myCanvas");
        var context = canvas.getContext("2d");
        var quizbg = new Image();
        quizbg.src = "basla.png";
        quizbg.onload = function() {
            context.drawImage(quizbg,0,0);
        }
        canvas.onclick= function() { 
            alert('Bike');
            canvas.onclick = false;
        }  
    }
    </script>

    <body>
    <div id="ccontainer">
    <canvas id="myCanvas" width="600" height="400"></canvas>
    </div>
    </body> 
```

工作示例，[http://jsfiddle.net/wcxc2/](http://jsfiddle.net/wcxc2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:52:50.490

看一下[kineticjs](http://www.html5canvastutorials.com/kineticjs/html5-canvas-events-tutorials-introduction-with-kineticjs/)教程（你想要的更容易）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:20:25.387

您必须自己编写所有逻辑。

1) 使用

```
canvas.addEventListener("click", function(e) {
  e.pageX, e.pageY;
}); 
```

绑定鼠标

2）检查点击是否在按钮的矩形内

```
if(inRect(e.pageX, e.pageY, buttonX, buttonY, buttonWidth, buttonHeight)) {
  alert("the button has been clicked");
} 
```

当然你必须写 inRect 函数:)

另一件事是，如果您的画布不在 [0, 0] 处，您将不得不从事件的位置减去它的偏移量。

这是使用 canvasquery [http://cssdeck.com/labs/svleh8dq的逻辑](http://cssdeck.com/labs/svleh8dq)

# php - php ajax 下拉列表问题

> ID：15158208
> 
> 赞同：0
> 
> 时间：2013-03-01T12:49:31.683
> 
> 标签：php, mysql, ajax, drop-down-menu, dreamweaver

我正在创建 2 个下拉列表，第二个是基于第一个下拉列表的选择。数据是从mysql数据库中检索的

# 国家.sql

```
-- phpMyAdmin SQL Dump
-- version 3.5.1
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Mar 01, 2013 at 12:44 PM
-- Server version: 5.5.24-log
-- PHP Version: 5.4.3

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `lam_el_chamel_db`
--

-- --------------------------------------------------------

--
-- Table structure for table `country`
--

CREATE TABLE IF NOT EXISTS `country` (
  `country_id` int(11) NOT NULL,
  `country_name` varchar(45) NOT NULL,
  PRIMARY KEY (`country_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `country`
--

INSERT INTO `country` (`country_id`, `country_name`) VALUES
(1, 'Lebanon'),
(2, 'Afghanistan'),
(3, 'Albania'),
(4, 'Algeria'),
(5, 'Andorra'),
(6, 'Angola'),
(7, 'Antigua and Barbuda'),
(8, 'Argentina'),
(9, 'Armenia'),
(10, 'Australia'),
(11, 'Austria'),
(12, 'Azerbaijan'),
(13, 'Bahamas'),
(14, 'Bahrain'),
(15, 'Bangladesh'),
(16, 'Barbados'),
(17, 'Belarus'),
(18, 'Belgium'),
(19, 'Belize'),
(20, 'Benin '),
(21, 'Bhutan'),
(22, 'Bolivia'),
(23, 'Bosnia and Herzegovina'),
(24, 'Botswana'),
(25, 'Brazil'),
(26, 'Brunei '),
(27, 'Bulgaria'),
(28, 'Burkina Faso'),
(29, 'Burma'),
(30, 'Burundi'),
(31, 'Cambodia'),
(32, 'Cameroon'),
(33, 'Canada'),
(34, 'Cape Verde'),
(35, 'Central African Republic'),
(36, 'Chad'),
(37, 'Chile'),
(38, 'China'),
(39, 'Colombia'),
(40, 'Comoros '),
(41, 'Congo'),
(42, 'Costa Rica'),
(43, 'Cote d''Ivoire'),
(44, 'Croatia'),
(45, 'Cuba'),
(46, 'Cyprus'),
(47, 'Czech Republic'),
(48, 'Denmark'),
(49, 'Djibouti'),
(50, 'Dominica'),
(51, 'Ecuador'),
(52, 'Egypt'),
(53, 'Estonia'),
(54, 'Ethiopia'),
(55, 'Fiji'),
(56, 'Finland'),
(57, 'France'),
(58, 'Georgia'),
(59, 'Germany'),
(60, 'Ghana'),
(61, 'Greece'),
(62, 'Guatemala'),
(63, 'Guinea'),
(64, 'Haiti'),
(65, 'Hong Kong'),
(66, 'Hungary'),
(67, 'Iceland'),
(68, 'India'),
(69, 'Indonesia'),
(70, 'Iran'),
(71, 'Iraq'),
(72, 'Ireland'),
(73, 'Italy'),
(74, 'Jamaica'),
(75, 'Japan'),
(76, 'Jordan '),
(77, 'Kazakhstan'),
(78, 'Korea, North'),
(79, 'Korea, South'),
(80, 'Kosovo'),
(81, 'Kuwait'),
(82, 'Laos'),
(83, 'Latvia'),
(84, 'Libya'),
(85, 'Luxembourg'),
(86, 'Madagascar'),
(87, 'Malaysia'),
(88, 'Maldives'),
(89, 'Mali'),
(90, 'Malta'),
(91, 'Mauritania'),
(92, 'Mexico'),
(93, 'Moldova'),
(94, 'Monaco'),
(95, 'Montenegro'),
(96, 'Morocco'),
(97, 'Mozambique'),
(98, 'Nepal'),
(99, 'Netherlands'),
(100, 'New Zealand'),
(101, 'Nicaragua'),
(102, 'Nigeria'),
(103, 'Norway'),
(104, 'Oman'),
(105, 'Pakistan'),
(106, 'Palestinian'),
(107, 'Panama'),
(108, 'Paraguay'),
(109, 'Peru'),
(110, 'Philippines'),
(111, 'Poland'),
(112, 'Portugal'),
(113, 'Qatar'),
(114, 'Romania'),
(115, 'Russia'),
(116, 'Saudi Arabia'),
(117, 'Senegal'),
(118, 'Serbia'),
(119, 'Singapore'),
(120, 'Slovakia'),
(121, 'Slovenia'),
(122, 'Spain '),
(123, 'Sri Lanka'),
(124, 'Sudan'),
(125, 'Swaziland '),
(126, 'Sweden'),
(127, 'Syria'),
(128, 'Taiwan'),
(129, 'Tanzania'),
(130, 'Thailand '),
(131, 'Tunisia'),
(132, 'Turkey'),
(133, 'Ukraine'),
(134, 'United Arab Emirates'),
(135, 'United Kingdom'),
(136, 'Uruguay'),
(137, 'Uzbekistan'),
(138, 'Venezuela'),
(139, 'Vietnam'),
(140, 'Yemen'),
(141, 'Zambia'),
(142, 'Zimbabwe ');

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

# 省级.sql

```
-- phpMyAdmin SQL Dump
-- version 3.5.1
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Mar 01, 2013 at 12:45 PM
-- Server version: 5.5.24-log
-- PHP Version: 5.4.3

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `lam_el_chamel_db`
--

-- --------------------------------------------------------

--
-- Table structure for table `governorate`
--

CREATE TABLE IF NOT EXISTS `governorate` (
  `governorate_id` int(11) NOT NULL,
  `governorate_name` varchar(60) NOT NULL,
  `country_id` int(11) NOT NULL,
  PRIMARY KEY (`governorate_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `governorate`
--

INSERT INTO `governorate` (`governorate_id`, `governorate_name`, `country_id`) VALUES
(1, 'Beirut', 1),
(2, 'Mount Lebanon', 1),
(3, 'North', 1),
(4, 'Beqaa ', 1),
(5, 'Nabatiye', 1),
(6, 'South', 1);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

# 索引.php

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <title>Playing With Select list</title>
        <link rel="stylesheet" type="text/css" href="css/demo.css" />
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,700' rel='stylesheet' type='text/css' />
        <!--[if lte IE 8]><style>.main{display:none;} .support-note .note-ie{display:block;}</style><![endif]-->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function()
        {
        $(".country").change(function()
        {
        var id=$(this).val();
        var dataString = 'id='+ id;

        $.ajax
        ({
        type: "POST",
        url: "ajax_category.php",
        data: dataString,
        cache: false,
        success: function(html)
        {
        $(".governorate").html(html);
        } 
        });

        });
        });
    </script>

    </head>
    <body>
        <div class="container">
            <header>
                <h1><strong>Playing With Select List</strong></h1>
                <h2>Select One List To see Output On Other</h2>
            </header>
        </div>
    <span style="margin-left:22%">
            <label>country :</label> <select name="country" class="category">
<option selected="selected">--Select Country--</option>
<?php
include('db.php');
$sql=mysql_query("select country_id,country_name from country");
while($row=mysql_fetch_array($sql))
{
$id=$row['country_id'];
$data=$row['country_name'];
echo '<option value="'.$id.'">'.$data.'</option>';
 } ?>
</select> &nbsp;&nbsp;&nbsp;
<div class="governorate">

<label>Governorate :</label> <select name="governorate" class="subcategory">
<option selected="selected">--Select governorate--</option>

</select>
</div>
</span>
<br><br><br>
                <h1><center><strong>Go To-:<a href="www.tricktodesign.com">TrickToDesign</a></strong></center></h1>
    </body>
</html> 
```

# ajax_category.php

```
 <?php
include('db.php');
if($_POST['governorate_id'])
{
$id=$_POST['governorate_id'];
$sql=mysql_query("select b.governorate_id,b.governorate_name from governorate a,contry_id b where b.country_id=a.country_id and parent='$id'");

while($row=mysql_fetch_array($sql))
{
//$id=$row['governorate_id'];
//$data=$row['governorate_name'];

echo"<select name='governorate'>";
echo '<option value="'.$id.'">'.$data.'</option>';
echo "</select>";
}
}

?> 
```

如何使第二个下拉列表出现其中的数据，这是我面临的错误

PS：**我编辑索引 .php 和 ajax_category.php**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:53:26.600

你的代码：

```
success: function(html)
        {
        $(".governorate").html(html);
        } 
```

`governorate`但是你的 html 中没有类

像这样更改您的代码：（注意包装的 div）

```
<div class="governorate">
<select name="governorate" class="subcategory">
<option selected="selected">--Select governorate--</option>

</select>
<div> 
```

在 php 页面中：

```
echo "<select name=....>";
echo '<option value="'.$id.'">'.$data.'</option>';
echo "</select>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:57:45.577

您正在访问`(".governorate")`Jquery 中的下拉列表。但是您的下拉列表中没有任何课程。只需在其中添加一个类。将代码更改为，

```
 $("select[name='governorate']").html(html); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:20:17.033

**index.php**

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <title>Playing With Select list</title>
        <link rel="stylesheet" type="text/css" href="css/demo.css" />
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,700' rel='stylesheet' type='text/css' />
        <!--[if lte IE 8]><style>.main{display:none;} .support-note .note-ie{display:block;}</style><![endif]-->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function()
        {
        $(".country").change(function()
        {
          var id = $(this).val();

        $.getJSON('new_category.php?id='+id+'', function(data) {
            $('.governorate').html("");
            $('.governorate').append('<option value=0>--Select governorate--</option>');
            $(data).each(function(){
                $('.governorate').append('<option value='+this.governorate_id+'>'+this.governorate_name+'</option>');
                });
            });

            });
        });
    </script>

    </head>
    <body>
        <div class="container">
            <header>
                <h1><strong>Playing With Select List</strong></h1>
                <h2>Select One List To see Output On Other</h2>
            </header>
        </div>
    <span style="margin-left:22%">
            <label>country :</label> <select class="country" >
<option selected="selected">--Select Country--</option>
<?php
include('connect.php');
$sql=mysql_query("select country_id,country_name from test1.country");
while($row=mysql_fetch_array($sql))
{
$id=$row['country_id'];
$data=$row['country_name'];
echo '<option value="'.$id.'">'.$data.'</option>';
 } ?>
</select> &nbsp;&nbsp;&nbsp;
<label>Governorate :</label> <select class="governorate" >
<option selected="selected">--Select governorate--</option>

</select>
</span>
<br><br><br>
                <h1><center><strong>Go To-:<a href="www.tricktodesign.com">TrickToDesign</a></strong></center></h1>
    </body>
</html> 
```

**new_category.php**

```
<?php
include('connect.php');
header("Content-type: text/javascript");
$id=$_GET['id'];

$sql=mysql_query("SELECT governorate_id, governorate_name FROM test1.governorate WHERE country_id=$id");

while($row=mysql_fetch_array($sql))
{
    $gArray['governorate_id'] =  $row['governorate_id'];
    $gArray['governorate_name'] = $row['governorate_name'];
    $g[] = $gArray;
}
echo json_encode($g);

?> 
```

brief explanation:

Sending the selected country id, in the get parameter, getJson method will retrieve a json list, which contains governorate details according to id. then each function in jquery will append your details..

# android - 如何在幻灯片菜单面板中使用滚动视图

> ID：15158209
> 
> 赞同：1
> 
> 时间：2013-03-01T12:49:34.420
> 
> 标签：android, scrollview, android-framelayout

我正在使用下面的布局文件，它在纵向模式下工作正常。它包含菜单面板和滑动面板。我也想在我的应用程序中启用横向模式，但在横向模式下数据没有出现。所以我想在下面的布局中放置一个滚动视图，我该如何实现这一点。如果我试图在滑动面板内放置一个滚动视图，则列表视图不会滑动，并且屏幕也会从底部缩小。

**布局文件**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent" 
    android:layout_weight="1"
    android:background="@drawable/blue_bg"

    >

    <!-- Menu Panel -->
    <RelativeLayout
           android:id="@+id/menuPanel"
           android:layout_height="match_parent"
           android:layout_width="wrap_content"
           android:gravity="right"
           android:background="@drawable/gray_bg"
           android:orientation="vertical" >

            <TextView
                android:id="@+id/menu_title_1"
                android:layout_width="fill_parent"
                android:layout_height="50dp"
                android:layout_alignParentTop="true"
                android:layout_marginLeft="0dp" 
                android:paddingLeft="15dp"             
                android:gravity="center_vertical"
                android:background="#353535"
                android:textColor="@android:color/white"
                android:text="@string/menu_title">     
            </TextView>

            <View
                android:id="@+id/menu_item_divider_1"
                android:layout_width="fill_parent"
                android:layout_height="0.5dp"
                android:layout_marginLeft="0dp"
                android:layout_marginRight="0dp"
                android:layout_below="@+id/menu_title_1"
                android:background="#b5b5b5"/>

             <ListView 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/menu_item_divider_1"
                android:dividerHeight="1dp"
               android:id="@+id/list"
                ></ListView>
            </RelativeLayout>

       <!-- Sliding Panel -->  

        <LinearLayout
                android:id="@+id/slidingPanel"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:gravity="left"
                android:orientation="vertical"
                android:background="@android:color/white" >

                <RelativeLayout
                    android:id="@+id/header"
                    android:layout_width="match_parent"
                    android:layout_height="30dp"
                    android:background="@drawable/file"
                    android:padding="3dp"
                    >

                    <View
                        android:id="@+id/header_vertical_divider_1"
                        android:layout_width="1dp"
                        android:layout_height="fill_parent"
                        android:layout_alignParentTop="true"
                        android:layout_marginLeft="1dp"
                        android:layout_toRightOf="@+id/menuViewButton"
                        android:background="#4d4d4d" />

                     <ImageView
                    android:id="@+id/menuViewButton"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_centerVertical="true"
                    android:layout_marginLeft="5dp"
                    android:clickable="true"
                    android:contentDescription="@string/description"
                    android:onClick="slidewindow"
                    android:src="@drawable/icon_menu"
                    android:visibility="visible" />

                         <ImageView
                             android:id="@+id/logo"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:layout_centerHorizontal="true"
                             android:layout_centerVertical="true"
                             android:src="@drawable/sislogo"
                             />

                </RelativeLayout>

                <View
                    android:id="@+id/dividerHeaderBottom"
                    android:layout_width="fill_parent"
                    android:layout_height="1dp"
                     />

                <RelativeLayout
                    android:id="@+id/fragment"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="15dp"
                    android:layout_marginRight="15dp"
                    android:layout_marginTop="10dp"
                    android:paddingBottom="10dp"
                    android:background="@drawable/container" 

                    >

                    <ImageView
                        android:id="@+id/imageView1"
                        android:layout_width="fill_parent"
                        android:layout_height="30dp"
                        android:layout_alignParentLeft="true"
                        android:layout_alignParentTop="true"
                        android:src="@drawable/containerheader" />

                    <TextView
                        android:id="@+id/textView1"
                        style="@style/lblstyle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_below="@+id/imageView1"
                        android:layout_marginLeft="20dp"
                        android:layout_marginTop="10dp"
                        android:text="Name      :" 

                        />
                     <TextView
                        android:id="@+id/textView2"
                        style="@style/lblstyle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_below="@+id/textView1"
                        android:layout_marginLeft="20dp"
                        android:layout_marginTop="7dp"
                        android:text="Student   :"

                         />
                      <TextView
                        android:id="@+id/textView3"
                        style="@style/lblstyle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_below="@+id/textView2"
                        android:layout_marginLeft="20dp"
                        android:layout_marginTop="7dp"
                        android:text="Grade      :"

                         />
                      <TextView
                        android:id="@+id/textView4"
                        style="@style/lblstyle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_below="@+id/textView3"
                        android:layout_marginLeft="20dp"
                        android:layout_marginTop="7dp"
                        android:text="Term       :" 
                        />
                       <TextView
                        android:id="@+id/textView5"
                        style="@style/lblstyle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_below="@+id/textView4"
                        android:layout_marginLeft="20dp"
                        android:layout_marginTop="7dp"
                        android:text="School     :"   
                        />
                        <TextView
                        android:id="@+id/name"
                        style="@style/lblstyle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dp"
                        android:layout_below="@+id/imageView1"
                        android:layout_toRightOf="@+id/textView1"
                        android:layout_marginTop="10dp"
                        android:text="name" 
                         />
                          <TextView
                        android:id="@+id/student"
                        style="@style/lblstyle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dp"
                        android:layout_below="@+id/name"
                        android:layout_toRightOf="@+id/textView2"
                        android:layout_marginTop="7dp"
                        android:text="name" 
                        />
                           <TextView
                        android:id="@+id/grade"
                        style="@style/lblstyle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dp"
                        android:layout_below="@+id/student"
                        android:layout_toRightOf="@+id/textView3"
                        android:layout_marginTop="7dp"
                        android:text="name"   
                        />
                            <TextView
                        android:id="@+id/term"
                        style="@style/lblstyle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dp"
                        android:layout_below="@+id/grade"
                        android:layout_toRightOf="@+id/textView4"
                        android:layout_marginTop="7dp"
                        android:text="name"
                         />
                             <TextView
                        android:id="@+id/school"
                        style="@style/lblstyle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dp"
                        android:layout_below="@+id/term"
                        android:layout_toRightOf="@+id/textView5"
                        android:layout_marginTop="7dp"
                        android:text="name" 
                        />

                             <ImageView
                                android:id="@+id/childimage"
                                android:layout_width="40dp"
                                android:layout_height="40dp"
                                android:layout_alignParentRight="true"
                                android:layout_marginRight="15dp"
                                android:layout_below="@+id/imageView1"
                                android:layout_marginTop="15dp"
                                android:src="@drawable/ic_launcher" 
                                android:background="#847474"

                                />

                             <TextView
                                 android:id="@+id/textView6"
                                 android:layout_width="wrap_content"
                                 android:layout_height="wrap_content"
                                 android:layout_alignParentTop="true"
                                 android:layout_alignParentLeft="true"
                                 android:layout_marginTop="5dp"
                                 android:layout_marginLeft="10dp"
                                 android:text="TextView" 
                                  android:textColor="#ffffff"  />

                </RelativeLayout>

                <RelativeLayout
                    android:id="@+id/newscontainer"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="40"
                    android:layout_marginLeft="15dp"
                    android:layout_marginRight="15dp"
                     android:layout_marginBottom="10dp"
                    android:background="@drawable/rounded_edittext">

                    <ImageView
                        android:id="@+id/imageView3"
                        android:layout_width="match_parent"
                        android:layout_height="25dp"
                        android:layout_alignParentLeft="true"
                        android:layout_alignParentTop="true"
                       android:background="@drawable/gray_bg" />
                    <ListView
                        android:id="@+id/listView1news"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_below="@+id/imageView3"
                        android:layout_marginBottom="5dp" >
                    </ListView>
                    <TextView
                        android:id="@+id/textView7"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBottom="@+id/imageView3"
                        android:layout_alignParentLeft="true"
                        android:text="School News"
                        android:layout_marginLeft="10dp"
                        android:layout_marginBottom="5dp"
                        android:textColor="#ffffff" />

                </RelativeLayout>

                 <LinearLayout
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:orientation="vertical" 
          android:layout_weight="1"
          android:gravity="bottom"

          >

          <RelativeLayout
          android:layout_width="match_parent"
          android:layout_height="30dp" 
          android:gravity="bottom"
          android:background="@drawable/bottom_bar">

          <ImageView
           android:id="@+id/imageView3"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_alignParentLeft="true"
           android:layout_marginBottom="3dp"
           android:layout_marginLeft="10dp"
           android:src="@drawable/hom" 
           android:onClick="HOME"
           />

          <ImageView
           android:id="@+id/imageView4"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_alignParentRight="true"
           android:layout_alignTop="@+id/imageView3"
           android:layout_marginRight="5dp"
           android:layout_marginBottom="3dp"
           android:src="@drawable/logout" 
           android:onClick="Logout"
           />
         </RelativeLayout>
        </LinearLayout>

        </LinearLayout>

</FrameLayout> 
```

如何将滚动视图放在下面的布局文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:00:51.940

嗨，首先创建一个文件夹布局，然后将您的布局文件复制到其中，然后将 Scrollview 例如检查下面的代码

```
 <?xml version="1.0" encoding="utf-8"?>
   <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content">
     <LinearLayout android:orientation="vertical"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent">
    <!-- The Other Elements -->
   </LinearLayout>
  </ScrollView> 
```

# spotify - Spotify Preview API 中没有滚动条

> ID：15158212
> 
> 赞同：0
> 
> 时间：2013-03-01T12:49:44.377
> 
> 标签：spotify

我目前正在将我的 spotify 应用程序迁移到新的预览 api。我遇到的许多问题之一是无法滚动。当视口的内容太长时，不会出现滚动条。

任何人有同样的问题和可能的解决方案？;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T14:06:37.243

```
html, body {
    overflow: visible;
} 
```

是解决方案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:39:10.313

您可能有一个防止滚动条出现的 CSS 规则。请求作为 Spotify 视图一部分的 CSS 后，确保将元素的`overflow`属性设置为：`html``auto`

`html { overflow: auto; }`

# sql - PostGis插入矩形

> ID：15158214
> 
> 赞同：3
> 
> 时间：2013-03-01T12:50:03.680
> 
> 标签：sql, geospatial, postgis, spatial-index, spatial-query

大家好，我有一个问题：我如何在 postgis 数据库中插入一个带有 Ne_latitude、NE_longitude、SW_latitude、SW_longitude 的框（矩形），并在顶部构建一个 INDEX 以检索不同框之间的交集？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T09:04:06.130

使用[ST_MakeEnvelope](http://postgis.net/docs/manual-2.0/ST_MakeEnvelope.html)构建矩形几何体。它可用于使用[重叠运算符](http://postgis.net/docs/manual-2.0/geometry_overlaps.html)`some_table`从（与几何列`geom`）检索边界框的交集：[`&&`](http://postgis.net/docs/manual-2.0/geometry_overlaps.html)

```
SELECT *
FROM some_table
WHERE geom && ST_MakeEnvelope(SW_longitude, SW_latitude, NE_longitude, NE_latitude, 4326); 
```

* * *

要将矩形插入`some_table`：

```
INSERT INTO some_table (geom)
VALUES (ST_MakeEnvelope(SW_longitude, SW_latitude, NE_longitude, NE_latitude, 4326)); 
```

如果列`some_table`上还没有空间索引，请[创建它](http://postgis.net/docs/using_postgis_dbmanagement.html#gist_indexes)：`geom`

```
CREATE INDEX ON some_table USING gist (geog); 
```

# android - 不幸的是，android模拟器显示消息，“应用程序名称”已停止

> ID：15158219
> 
> 赞同：0
> 
> 时间：2013-03-01T12:50:08.750
> 
> 标签：android, android-emulator

代码显示 eclipse 中没有错误，但是在 android 模拟器中运行它时不幸显示消息，“应用程序名称”已停止。我和我也试图在按钮上链接一个 xml 另一个页面点击我怎么能这样做任何人都可以帮助我，因为我是 android 开发的新手。

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.nikesh.theater"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="9" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.nikesh.theater.Main"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

main.java

```
package com.nikesh.theater;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class main extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/ticket"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".Main" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button2"
        android:layout_alignParentRight="true"
        android:gravity="fill_vertical|center"
        android:text="@string/cam" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignRight="@+id/button1"
        android:gravity="fill_vertical|center"
        android:text="@string/list" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:52:22.370

改变：

```
<activity
        android:name="com.nikesh.theater.Main"
        android:label="@string/app_name" > 
```

至：

```
<activity
        android:name="com.nikesh.theater.main"
        android:label="@string/app_name" > 
```

当您在清单中`main`使用时，您的 Java 文件称为。`Main`Android（Java，更准确地说是区分大小写的。

此外，您应该更改`super.setContentView(R.layout.activity_main);`为 just `setContentView(R.layout.activity_main);`。

您应该做的另一个更改是更改`tools:context=".Main"`为`tools:context=".main"`与清单中的更改相同的原因

# jquery - jQuery - 对象在 IE8 中不支持此属性或方法

> ID：15158220
> 
> 赞同：2
> 
> 时间：2013-03-01T12:50:08.917
> 
> 标签：jquery, internet-explorer-8

我在我的一个项目中实现了便签功能，并且发现了与浏览器兼容性相关的问题。我的代码在 IE8 中无法运行，但在其他浏览器中运行良好。

我得到的错误是：

```
Message: Object doesn't support this property or method
Line: 45
Char: 3
Code: 0
URI: http://dev.mesocial.co/orange_theme/js/sticky_note_func.js 
```

这些是 40 到 50 之间的行：

```
var moved = function(note) {

    // added by rupesh 
    // alert(JSON.stringify(lastCreatedNoteId)); 
    var passId = note.id
    if(lastCreatedNoteIdForJs.indexOf(note.id) != -1)
         passId = lastCreatedNoteId[note.id];
    // till here ///////
    $.post(SITE_URL+'/dashboard/create-sticky-note/act/moved/sticky_note_id/'+passId+'/pos_x/'+note.pos_x+'/pos_y/'+note.pos_y,
    function(data) {
        //alert(data);
    }); 
```

任何有关问题可能的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T12:52:57.527

IE8 不支持[`.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)。在 Internet Explorer 中，它首先由 IE9 引入。

由于您使用的是 jQuery，因此您可以改用该[`$.inArray()`](http://api.jquery.com/jQuery.inArray/)方法。

像这样，在你的情况下：

```
if($.inArray(note.id, lastCreatedNoteIdForJs) != -1) 
```

**支持没有 jQuery 的旧浏览器：**

如果您也想`.indexOf()`在旧版浏览器中使用，您可以在需要时使用自己的数组原型。原型看起来像这样：

```
if (!Array.prototype.indexOf) {
  Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {
    "use strict";
    if (this == null) {
      throw new TypeError();
    }
    var t = Object(this);
    var len = t.length >>> 0;

    if (len === 0) {
      return -1;
    }
    var n = 0;
    if (arguments.length > 1) {
      n = Number(arguments[1]);
      if (n != n) { // shortcut for verifying if it's NaN
        n = 0;
      } else if (n != 0 && n != Infinity && n != -Infinity) {
        n = (n > 0 || -1) * Math.floor(Math.abs(n));
      }
    }
    if (n >= len) {
      return -1;
    }
    var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);
    for (; k < len; k++) {
      if (k in t && t[k] === searchElement) {
        return k;
      }
    }
    return -1;
  }
} 
```

*上面的例子取自[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)上的文章`Array.prototype.indexOf`。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:54:47.707

检查此链接它可能会对您有所帮助... IndexOf 将仅在某些浏览器中工作..

[如何在 Internet Explorer 浏览器的 JavaScript 中修复数组 indexOf()](https://stackoverflow.com/questions/1744310/how-to-fix-array-indexof-in-javascript-for-ie-browsers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:00:20.157

IE < 9 不支持数组的 .indexOf 方法。

jQuery 有一个方法可以让你检查元素是否在数组中。

```
if($.inArray(note.id, lastCreatedNoteIdForJs) !== -1) {
    passId = lastCreatedNoteId[note.id];   
} 
```

您还可以将方法添加到 Array 对象：[How to fix Array indexOf() in JavaScript for Internet Explorer browsers](https://stackoverflow.com/questions/1744310/how-to-fix-array-indexof-in-javascript-for-ie-browsers)

```
if (!Array.prototype.indexOf) {
    Array.prototype.indexOf = function(obj, start) {
        for (var i = (start || 0), j = this.length; i < j; i++) {
            if (this[i] === obj) { return i; }
        }
        return -1;
    }
} 
```

# android - 带有更改着色器的 Android“聚光灯”

> ID：15158226
> 
> 赞同：1
> 
> 时间：2013-03-01T12:50:25.497
> 
> 标签：android, performance, android-layout

我使用以下示例创建聚光灯着色器：[http ://www.curious-creature.org/2012/12/13/android-recipe-2-fun-with-shaders/](http://www.curious-creature.org/2012/12/13/android-recipe-2-fun-with-shaders/)

它工作得很好，我使用聚光灯，`HorizontalScrollView`现在我必须`HorizontalScrollView`在移动遮罩的同时滚动，我不知道如何让它以良好的性能工作。具有`HorizontalScrollView`大约 5 倍屏幕宽度的内容，而`Shader`位图只有一个屏幕宽度。当滚动操作过于繁重并最终导致内存崩溃时，再次设置它。

谢谢。

下图是为了演示我的设置。我有 A 和 B 堆叠在`FrameLayout`. A 移动聚光灯 B 滚动内容。那么A能否以某种方式将聚光灯作为其背景中的“透明洞”来吸引眼球？A 是`Fragment`同时移动聚光灯和滚动 B 的寻呼机`ScrollView`。

![在此处输入图像描述](../Images/001182e5c086d92a9fec7cfc6daaad2f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:05:41.780

由于您没有发布任何正在使用的代码，因此很难帮助您提高性能，但我有两个建议：

你写*“当滚动操作太繁重并最终导致内存崩溃时再次设置它”*。我假设您`Bitmap`有时正在重新加载。这不是一个好主意，因为它会导致您描述的问题。而是只创建一次并使用各种位图方法进行转换。

其次，如果你在 中没有非常高级的内容`ScrollView`，可以考虑将滚动内容与聚光灯效果结合在 a 中`SurfaceView`，并在 Canvas 上手动绘制所有内容。

最后一点，您还写道，您正在使用 a`FragmentPager`来移动聚光灯。这似乎不是最优化的方式，请考虑是否必须以这种方式达到您想要的结果。

# perl - 在 perl 中打开文件时使用 try/catch 或 eval 处理错误

> ID：15158229
> 
> 赞同：1
> 
> 时间：2013-03-01T12:50:41.920
> 
> 标签：perl, eval, perl-module, cpan

我编写了简单的代码片段，以处理在受限（我们需要 root 权限）中打开文件时发生的错误，以下代码工作正常并给出错误为 o/p

```
#!/usr/bin/perl

use strict;
use warnings;
use Try::Tiny;

my $file_name = "/var/log/test.txt"; # needs root permission to create file

if(open(HAN, ">$file_name")){
    print "sucuessfully opened file \n ";
} else {
    print "Error with if/else while openning file : $! \n";
} 
```

o/p：

打开文件时 if/else 出错：权限被拒绝

当我使用相同代码的 try/catch 或 eval 并打开文件时

```
try {
    open(HAN, ">$file_name");
} catch {
    print "Error with try/catch while opening file : $_ \n";
}; 
```

或者

```
eval {
    open(HAN, ">$file_name");
};
print " Error with eval while opening file : $@ \n"; 
```

它在 $_ 或 $@ 中没有显示输出，为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T13:03:31.523

[如果失败， open](http://perldoc.perl.org/functions/open.html)不会抛出异常，它返回一个 false 值并将错误存储在`$!`. 因此，典型用法是

```
open my $fh, '>', $filename or die "Couldn't open '$filename' for writing: $!"; 
```

如果您有很多 I/O 代码或其他可能引发异常的东西，您可能更喜欢`open`（和其他 I/O 函数）在失败时*自动*抛出错误。你可以用[autodie](http://search.cpan.org/perldoc?autodie)做到这一点：

```
use autodie qw(:io); 
```

正如@sputnick 提到的，你应该`use warnings;`除了`use strict;`

最后，这是一个仅捕获 I/O 异常的示例：

```
use warnings;
use strict;
use autodie qw(:io);
use Try::Tiny;

try {
    open my $fh, '>', $filename;
    ... more code ...
}
catch {
    if ($_->isa('autodie::exception') && $_->matches(':io')) {
         print "Error doing something with '$filename': $_\n";
    }
    else {
         die $_;  # rethrow
    }
}; 
```

在 Perl 5.10+ 上，您可以使用`given`and`when`代替这个冗长的代码；有关更多信息，请参阅[autodie 文档](http://search.cpan.org/perldoc?autodie)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:12:38.063

操作失败和错误之间是有区别的。

当您尝试打开一个不存在的文件（或其他文件）时，该`open`函数无法成功打开该文件。但这并不意味着`open`. `open`行为完全符合预期：当文件无法打开时返回错误值。

`eval BLOCK`并且`try...catch`用于捕获*错误*——代码无法按预期执行的情况。

无法打开文件可能是您的代码错误——如果您无法打开某个文件，*您的*代码可能无法按预期执行。在这种情况下，您可以处理此问题并输出错误。

# r - 并排有 2 个变量的条形图

> ID：15158230
> 
> 赞同：14
> 
> 时间：2013-03-01T12:50:46.007
> 
> 标签：r, plot, ggplot2

我正在尝试获得一个相当常见的条形图，但是尽管阅读了大量关于在 R 中绘图的文档，以及 ggplot 及其所有层的文档，但我无法按照我想要的方式得到这个图。

我的数据相当简单。

```
aov.data
   Block    RTreg    RTrnd
1 Block1   0.0000 862.0707 
2 Block2 667.2081 770.4315 
3 Block3 645.4730 696.0200
4 Block4 674.5200 659.4765
5 Block5 651.4295 633.7333 
```

我想要得到的是一个带有`Block`x 轴列的条形图，用作分类变量。在 y 轴上，我想要绘制`RTreg`和`RTrnd`列的值。这是我无法正确处理的部分。我想要的是在 x 轴上每个刻度线有两个条。一根代表该`RTreg`块中的值，一根代表该`RTrnd`块中的值。像这样的东西：

![有效的 XHTML](../Images/e6ce36afcd86085fa45c4348548c3fda.png).

但用 5 组两根而不是两根。

到目前为止，我使用了以下代码：

```
ggplot(aov.data,aes(x=Block)) + 
          geom_bar(aes(y=RTreg),stat="identity",position="dodge",col="blue") +
          geom_bar(position="dodge") +   
          geom_bar(aes(y=RTrnd),stat="identity",position="dodge",col="red") 
```

我以为我在做的是首先创建带有包含块的分类 x 轴的基础图。然后，`geom_bar`我认为我首先添加的是`RTreg`列，然后是第二个`geom_bar`，我正在添加`RTrnd`列。选项`position`等于`dodge`我，但我打算并排获得两个酒吧。但是，我得到的情节是：

[![有效的 XHTML](../Images/41a1806d0d1578712e5baa3dc2300e59.png)](https://i.stack.imgur.com/8gxzi.png) .

关于如何将两个条并排放置的任何想法，并希望每个条都有不同的颜色和图例？我真的很感激这里的一些指导。

提前致谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-01T12:55:50.587

您必须将数据框从宽改成长，然后您不需要分别为每个条件设置条形。

假设数据框名为`df`.

```
library(reshape2)
df.long<-melt(df)
ggplot(df.long,aes(Block,value,fill=variable))+
     geom_bar(stat="identity",position="dodge") 
```

![在此处输入图像描述](../Images/6522be35cc9cd488765fb2b87a409b81.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-22T14:19:31.233

使用原生 R 函数的另一种方法：

```
#Taking the Dataset mentioned in the question
df = data.frame(Block = c("Block 1", "Block 2", "Block 3", "Block 4", "Block 5"), RTreg = c(0.0,667.208,645.47,674.52,651.42), RTrnd = c(862.07,770.43,696.02,659.476,633.733))

#Create a Matrix which will help in creating the plot
value_matrix = matrix(, nrow = 2, ncol = 5)
#An empty matrix is a necessary requirement prior to copying data
value_matrix[1,] = df$RTreg 
value_matrix[2,] = df$RTrnd

#Note that the "beside" argument has to be kept "TRUE" in order to place the bars side by side
barplot(value_matrix, names.arg = df$Block, beside = TRUE, col = c("peachpuff", "skyblue"), legend.text = c("RTreg", "RTrnd")) 
```

上面会发生什么？

为了回答这个问题，我首先想请您注意`barplot()`ie 'height' 的第一个参数。现在，在这里，如果您提供一个向量作为输入，那么该函数将生成一个常规条形图，就像您期望的那样。但是，为了绘制聚集条形图，您必须提供矩阵格式的数据。现在，魔法来了。对于聚集条形图，您的变量需要出现在矩阵的行中，而不是常规列中。我的意思是，而不是沿列存储数据：

```
 RTreg     RTrnd
1  0.0000    862.0707 
2  667.2081  770.4315 
3  645.4730  696.0200 
```

跨行存储数据：

```
 1        2        3
RTreg  0.0000   667.2081 645.4730
RTrnd  862.0707 770.4315 696.0200 
```

这是`barplot()`识别 2 个不同变量“RTreg”和“RTrnd”的方式。如果您希望将*m*其他变量放入集群中，则只需将它们设置`matrix()`为*m*的 'nrow' 参数后将它们复制到矩阵的行中。现在，为了实现上述结构，我简单地创建了一个空矩阵，并分别在第 1 行和第 2 行复制了“RTreg”和“RTrnd”。创建矩阵后，您就可以开始了。只需将该`barplot()`函数与您的矩阵一起作为高度参数调用，并且不要忘记将 'beside' 参数设置为*TRUE*。

上述代码的结果：

[![在此处输入图像描述](../Images/afca91d305ee6921efe5ba4f1c27fdc0.png)](https://i.stack.imgur.com/NyOtT.png)

# backbone.js - 向 backgrid.js 公开关系模型

> ID：15158235
> 
> 赞同：0
> 
> 时间：2013-03-01T12:51:00.710
> 
> 标签：backbone.js, backbone-relational, backgrid

我想将一些属性从关系模型（通过骨干关系构建）公开到我的 backgrid（通过 backgrid.js 构建）。据我了解，backgrid 接收集合和映射模型作为列对象。所以我需要在模型初始化时更改模型，例如：

```
initialize: function() {
  this.fetchRelated('myRelatedModel');
  this.set({relatedName:this.get('myRelatedModel').get('name')});
} 
```

问题是当我这样做时，我的模型会收到“更改”状态。但我不想改变模型，我只想将相关模型的属性暴露给我的背景。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:30:08.370

**JavaScript**

```
this.set({relatedName:this.get('myRelatedModel').get('name')}, {silent: true}); 
```

# awk - awk：查找单个文件中的乱序数据

> ID：15158239
> 
> 赞同：0
> 
> 时间：2013-03-01T12:51:06.450
> 
> 标签：awk

对于下面的示例文件内容

```
00000001.00000001
00000001.00000002
00000001.00000003
00000001.00000004
00000001.00000006
00000001.00000010
00000002.00000001
00000002.00000002
00000002.00000003
00000002.00000004
0000000b.00000001 
```

需要查找乱序数据。这里的乱序含义是在 00000001.00000004 之后，下一个应该是 00000001.00000005 而不是 00000001.00000006 如上所述。00000001.00000010 也是一个错误的输入，因为在 00000001.00000006 之后，下一个 00000001.00000007 应该出现。

使用 awk 我们可以从上面的文件中打印奇怪的喜欢 00000001.00000006 和 00000001.00000010。

请注意，这里所有的都被认为是十六进制的数字。EG 0000001a.0000000b 是十六进制数字，表示 8digithexadecimal.8digithexadecimal。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:14:41.217

我希望我能正确理解你的问题。

你可以试试这个：

```
awk -F. 'NR>1 && $1-a==0 && $2-b!=1{print}{a=$1;b=$2}' file 
```

给定您的示例数据，这条短线输出：

```
00000001.00000006
00000001.00000010 
```

您可以使用真实数据进行测试，并报告结果。我希望这是你正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:14:43.323

```
awk '{print (NR>1&&!(($1-a)=="1e-08"||($1-a)=="1"))?$1" < OutOfOrder":$1;a=$1}'
00000001.00000001
00000001.00000002
00000001.00000003
00000001.00000004
00000001.00000006 < OutOfOrder
00000001.00000010 < OutOfOrder
00000002.00000001
00000002.00000002
00000002.00000003
00000002.00000004
0000000b.00000001 < OutOfOrder 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T13:21:51.580

这是一种使用方法`awk`：

```
awk -F. 'NR > 1 && $1==a && $2 + 0 != b + 1; { a=$1; b=$2 + 0 }' file 
```

结果：

```
00000001.00000006
00000001.00000010 
```

* * *

***编辑1：***

```
awk -F. 'NR > 1 && strtonum("0x" $1) == a && strtonum("0x" $2) != b + 1; { a=strtonum("0x" $1); b=strtonum("0x" $2) }' file 
```

结果：

```
00000001.00000006
00000001.00000010 
```

* * *

***编辑2：***

字符串比较：

```
awk -F. '$1 != x; { x = $1 }' file 
```

十六进制比较：

```
awk -F. 'strtonum("0x" $1) != x; { x = strtonum("0x" $1) }' file 
```

结果：

```
00000001.00000001
00000002.00000001
0000000b.00000001 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T13:53:52.747

多一个：

```
awk -F. 'p!=$1{p=$1; v=$2; next} v+1!=v=$2' file 
```

# groovy - 许可 Gradle 插件

> ID：15158240
> 
> 赞同：2
> 
> 时间：2013-03-01T12:51:08.807
> 
> 标签：groovy, gradle

我们如何使用 gradle 脚本在 src 目录中存在的 .groovy、.java、.jsp、.txt 文件中搜索、跳过和写入所需的标头（许可证）。

我们如何安装许可证插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:54:08.913

你的意思是[这个许可证插件](https://github.com/hierynomus/license-gradle-plugin)？

说明看起来很清楚（从上面的链接复制到这里）：

> 在您的 build.gradle 文件中添加：
> 
> ```
> buildscript {
>     repositories {
>         mavenCentral()
>     }
> 
>     dependencies {
>         classpath 'nl.javadude.gradle.plugins:license-gradle-plugin:0.5.0'
>     }
> }
> 
> apply plugin: 'license' 
> ```

# php - 保存现有可配置项时出现完整性约束违规错误

> ID：15158241
> 
> 赞同：3
> 
> 时间：2013-03-01T12:51:09.417
> 
> 标签：php, magento, magento-1.7

我将项目作为可配置项目导入 Magento。当我创建库存项目时，一切都很好，但是当项目被更新时，它会产生这个错误：

```
SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '315-315' for key 'UNQ_TEST1_CATALOG_PRODUCT_SUPER_LINK_PRODUCT_ID_PARENT_ID' 
```

我正在使用的代码块是这样的：

```
//Try and open for edit.
$product = Mage::getModel('catalog/product')->loadByAttribute('sku', $stockCode);            

//Fetch data from XML and update stock item.
$productData = $this->getProductDataArray($stockItem, $stockCategoryList);
$this->saveStockItem($stockItem, $product, 'configurable', $setId, $productData);

//Reopen the stock item to get any changes.
$product = Mage::getModel('catalog/product')->loadByAttribute('sku', $stockCode);

//Build a list of existing attributes for this config product so we can check existing attributes etc.
$existingConfigAttributes = $this->getExistingConfigurableAttributes($product);
$configurableProductsData = $this->getConfigurableProductData($product, $existingConfigAttributes);
$configurableAttributesData = $this->getConfigurableAttributeProductData($product, $existingConfigAttributes);

//Set the configurable attribute information
if ($configurableProductsData != null)
    $product->setConfigurableProductsData($configurableProductsData);
if ($configurableAttributesData != null)
    $product->setConfigurableAttributesData($configurableAttributesData);
$product->setCanSaveConfigurableAttributes(1);
$product->save(); 
```

第一次一切正常，我的可配置项目按预期工作。但是，如果我再次运行它，它会落在`$product->save();`. 我假设它试图将其视为新项目而不是现有项目，因此试图插入不应插入的位置。

`$this->saveStockItem()`包含：

```
$stockCode = (string)$stockItem->STOCK_CODE;
if ($product)
{
    $productId = $product->getId();
}

$mc = new Mage_Catalog_Model_Product_Api();
if ($this->validId($productId))
{
    $mc->update($productId, $productData);
    return $productId;
}
else
{
    return $mc->create($type, $setId, $stockCode, $productData);
} 
```

我知道我可以更新这样的项目，但这不会更新我需要添加到可配置项目的额外属性。

更新此信息的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T01:27:25.560

对不起，不能评论（？），所以我必须填写答案字段。

1.  我不认为 Magento 试图将产品视为新产品。通过 sku 加载然后保存是一个正常的过程，在很多情况下都对我有用。

我猜，错误消息想说的是，您正在尝试将一个项目添加为具有任何已存在的可配置属性中的值的子项；例如，将具有超属性“size”和“size=S”的衬衫添加到已应用“S”的可配置产品。因此，也许 Magento 将孩子视为新产品 - 而不是可配置产品。

1.  您的错误消息中的键看起来“很奇怪”。从您的其他功能之一看，您觉得它很熟悉吗？我从任何 magento 表中都认不出它。

2.  是什么让您无法使用超级简单且速度极快的 magmi 导入器？;) [http://sourceforge.net/projects/magmi/](http://sourceforge.net/projects/magmi/)

问候西蒙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-19T09:00:45.447

根据我们的经验，我们必须使用`product_id`和初始化库存项目`stock_id`，否则我会`Integrity constraint violation`在尝试保存产品时得到 。

```
$stockItem = Mage::getModel('cataloginventory/stock_item')->loadByProduct($productId);
if($stockItem && !$stockItem->getProductId()) { // CHECK STOCK ITEM IS INITIALISED
    $stockItem->setData('product_id', $productId);
    $stockItem->setData('stock_id', 1);
}

$stockItem->setData('use_config_manage_stock', 0);
$stockItem->setData('manage_stock', 1);
$stockItem->setData('is_in_stock', 1);
$stockItem->setData('qty', 5);
$stockItem->save(); 
```

# jquery - 鼠标单击时 jQuery 动画 div

> ID：15158249
> 
> 赞同：0
> 
> 时间：2013-03-01T12:51:24.953
> 
> 标签：jquery, css

情况，我有 3 个块元素。为了：

-> 图像

-> 隐藏文本块 (.hidden)

-> 页脚块（.blockimage）

加载时，图像覆盖在 .hidden （基本上是更多信息）上，然后是标题的小块。在鼠标单击 .blockimage 时，我希望 .hidden 在图像上方滑动。

注意：我已经将 .hidden 元素设置为 position:absolute，它还有一个内联样式 display:none。如果我检查 .hidden 并取消选中 display:none。它看起来很完美，但是我似乎无法在点击调用时对其进行动画处理。

这是我到目前为止所做的......

```
$('.blockimage').click(function() {
  $('.blockimage .hidden').slideUp('fast', function() {
    // remove display:none; of inline css on .hidden and slide content up. (Class already has a)
  });
}); 
```

排除旋转，它会像这样向上滑动 = [http://css-tricks.com/examples/SlideupBoxes/](http://css-tricks.com/examples/SlideupBoxes/)

任何帮助都会很棒:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:06:44.200

有一个包含`div`图像和信息的内容，使用`overflow: hidden`，然后在单击时设置动画位置。这是一个**[演示](http://jsbin.com/odiyeb/1)**。

## html

```
<div class="container">
    <img src="{yourimage}" />
    <div class="info-block">
     {information}
    </div>
</div> 
```

## CSS

这只是使其工作所需的 CSS。

```
.container {

  position: relative;
  overflow: hidden;

}

.info-block {

  position: absolute;
  bottom: -xx; // element height, or more

} 
```

## Javascript

```
jQuery(document).ready(function(){

  $('img').click(function(){

    $(this).siblings('.info-block').animate({
      bottom: '0'}, 'fast');

  });

}); 
```

## 更新：返回初始状态（只是 jQuery 或 CSS3 转换）

如果您希望它返回初始状态，您可以通过让您的 javascript 检查`bottom`属性来扩展我给您的代码，如下所示：

```
if( $(this).siblings('.info-block').css('bottom') !== '0px' )
    $(this).siblings('.info-block').animate({bottom: 0}, 'fast');
else
    $(this).siblings('.info-block').animate({bottom: '-{some-other-height}'}, 'fast'); 
```

您可以查看工作[**演示**](http://jsbin.com/odiyeb/4)。

然而，在这种情况下，我可能会使用**CSS3 transition**，只是为了有一个更简洁的代码。当然，即使在您不希望它返回的情况下，您也可以使用转换，但在这种情况下，我发现了一个更快的快速 jQuery。

### 解决方案 2：CSS3 过渡

如果要使用 CSS3 过渡，请定义另一个类，如下所示：

```
.info-block.shown {

    bottom: 0;

} 
```

然后在单击时使用 jQuery 切换类：

```
$('img').click(function(){

      $(this).siblings('.info-block').toggleClass('shown');

}); 
```

工作[**演示在这里**](http://jsbin.com/odiyeb/5)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:53:50.147

尝试`$('.hidden').slideUp`，您当前的选择器正在尝试将所有元素与这两个类匹配。

此外，`slideUp` [隐藏](http://api.jquery.com/slideUp/)选定的元素，尝试使用`show`。

# javascript - 从一组坐标中，我如何决定地图的中心位置？

> ID：15158252
> 
> 赞同：1
> 
> 时间：2013-03-01T12:51:38.297
> 
> 标签：javascript, google-maps-api-3

假设我正在使用以下 JSON 位置：

```
var beaches = [
  ['Bondi Beach', -33.890542, 151.274856, 4],
  ['Coogee Beach', -33.923036, 151.259052, 5],
  ['Cronulla Beach', -34.028249, 151.157507, 3],
  ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
  ['Maroubra Beach', -33.950198, 151.259302, 1]
]; 
```

我在谷歌地图上绘制这些，我想大致集中在中间的那个上。

谷歌地图 api 中是否有执行此操作的功能？还是我必须自己计算平均值？

我编写了一个函数，可以将 JSON 和缩放级别传递给：

```
function initialize_map(places, zoom) {

    // use first coordinates in the json to initiate the map
    var place_lat_lng = new google.maps.LatLng(places[0][1],places[0][2]);

    var mapOptions = {
          zoom: zoom,
          center: place_lat_lng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

    var map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);

    var marker, i; 

    // loop through all the places to get markers
    for (var i=0;i<places.length;i++)
    { 
        var place = places[i];

         marker = new google.maps.Marker({
            position: new google.maps.LatLng(place[1], place[2]),
            map: map,
            animation: google.maps.Animation.DROP
        });
        // add the marker
        marker.setMap(map);            
    }   
} 
```

此功能有效，但不居中，标记将不在视线范围内。

您将如何将视图居中并使其所有标记都可见？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T13:45:45.350

[Google Maps API v3 包含一种显示一组标记的](https://developers.google.com/maps/documentation/javascript/reference#Map)方法：

> fitBounds(bounds:LatLngBounds) - 无 - 将视口设置为包含给定的边界。

将所有标记添加到 google.maps.LatLngBounds 对象，然后在地图对象上调用该方法。像这样：

```
function initialize_map(places, zoom) {
     var bounds = new google.maps.LatLngBounds(); // empty bounds object

    // use first coordinates in the json to initiate the map
    var place_lat_lng = new google.maps.LatLng(places[0][1],places[0][2]);

    var mapOptions = {
          zoom: zoom,
          center: place_lat_lng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

    var map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);

    var marker, i; 

    // loop through all the places to get markers
    for (var i=0;i<places.length;i++)
    { 
        var place = places[i];

         marker = new google.maps.Marker({
            position: new google.maps.LatLng(place[1], place[2]),
            map: map,
            animation: google.maps.Animation.DROP
        });
        // add the marker
        marker.setMap(map);            
        bounds.extend(marker.getPosition()); // add the marker to the bounds

    }   

    map.fitBounds(bounds); // show all the markers.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T13:43:33.753

[这是](http://jsfiddle.net/b9qud/2/)将标记添加到 LatLngBounds 并抓住框中心的快速方法。这至少会向您显示您拥有的所有标记。矩形和“C”标记用于向您展示边界框和中心的样子。

```
var bounds = new google.maps.LatLngBounds();
for (x in beaches) {

    var data = beaches[x];       
    var lat = beaches[x][1];
    var lng = beaches[x][2]
    var latLng = new google.maps.LatLng(lat, lng);
    var marker = new google.maps.Marker({
        map: map,
        position: latLng
    });
    markers.push(marker);
    bounds.extend(latLng);
}

map.fitBounds(bounds)

new google.maps.Rectangle({
    bounds: bounds,
    fillColor: '#000000',
    map: map
})

var centerBounds = new google.maps.Marker({
    map: map,
    position: bounds.getCenter(),
    icon: 'http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=C|FF0000|000000'
}); 
```

# jquery - 谷歌应用引擎中的无限滚动

> ID：15158257
> 
> 赞同：-1
> 
> 时间：2013-03-01T12:52:06.900
> 
> 标签：jquery, python, google-app-engine, twitter-bootstrap, infinite-scroll

我正在使用[Infinite-scroll Jquery](http://www.infinite-scroll.com/infinite-scroll-jquery-plugin/)向下滚动网页。我正在使用[引导程序](http://twitter.github.com/bootstrap/)进行设计。它非常适合普通的 html 代码。但是当我使用[引导程序](http://twitter.github.com/bootstrap/)时。它没有显示任何引导组件。

当我将普通的 HTML 代码放在 temp.html 文件中时，它工作得很好。但是，当我将引导类及其代码插入 temp.html 无限滚动时，它不起作用。

**这是我的 Handeller 代码**

```
class Demo(webapp2.RequestHandler):
def get(self):
    conn = get_connection()
    data = conn.cursor()

    data.execute("""

    select * from table1

    """)
    alldata=data.fetchall()

    conn.commit()
    template=jinja_environment.get_template('demo.html')
    template_values={
                    'alldata':alldata

                     }
    self.response.out.write(template.render(template_values)) 

    conn.close() 
```

**这是demo.html**

```
<div id="content>
    <div class="accordion" id="accordion2">
      <div class="accordion-group">
        <div class="accordion-heading">
          <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
            {{alldata[0]}}
          </a>
        </div>
        <div id="collapseOne" class="accordion-body collapse in">
          <div class="accordion-inner">
            Anim pariatur cliche...
          </div>
        </div>
      </div>
      <div class="accordion-group">
        <div class="accordion-heading">
          <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
             {{alldata[0]}}
          </a>
        </div>
        <div id="collapseTwo" class="accordion-body collapse">
          <div class="accordion-inner">
            Anim pariatur cliche...
          </div>
        </div>
      </div>
    </div>
</div>
<a id="next" href="#">next page?</a>
<script>
$('#content').infinitescroll({
        navSelector     : "#next:last",
        nextSelector    : "a#next:last",
        itemSelector    : "#content p",
        debug           : true,
        dataType        : 'html',
        maxPage         : 200,
        path: function(index) { 
        return "/ScrollBarDemo/" + index

        }
    }, function(newElements, data, url){ 

    });
    </script> 
```

**这是滚动类**

```
class ScrollBarDemo(BaseHandler):
    def get(self,index):
       template=jinja_environment.get_template('temp.html')
       self.response.out.write(template.render() 
```

**temp.html [工作中]**

```
<div id="content">
    <p>

    <input type="text">

    </p>
</div> 
```

**temp.html [不工作]**

```
 <div class="accordion" id="accordion2">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
        Collapsible Group Item #1
      </a>
    </div>
    <div id="collapseOne" class="accordion-body collapse in">
      <div class="accordion-inner">
        Anim pariatur cliche...
      </div>
    </div>
  </div>
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
        Collapsible Group Item #2
      </a>
    </div>
    <div id="collapseTwo" class="accordion-body collapse">
      <div class="accordion-inner">
        Anim pariatur cliche...
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:08:46.857

尝试比较您的工作文件和非工作文件。还可以尝试在 Chrome 中使用调试器。

很难说哪里出了问题。

一方面，您从类 ScrollBarDemo() 中的摘录缺少右括号和分号。此外，您在不工作的 temp.html 中也没有 #content 元素。

一般来说，这是一个调试练习。您应该通过一些基本的调试步骤来确定问题所在。如果您可以缩小问题范围并提出更具体的问题，那将是一个更好的问题。

此外，这个问题与应用程序引擎或 python 没有太大关系。您的 javascript/html 中似乎有问题。

# java - 如何计算用户在JAVA中输入的时间

> ID：15158258
> 
> 赞同：-1
> 
> 时间：2013-03-01T12:52:07.900
> 
> 标签：java, date, datetime, time, duration

嘿伙计们，我需要帮助来弄清楚如何计算两个特定时间之间的时间差（由用户输入）。但是输出必须以小时、分钟和秒为单位作为它们自己的变量进行拆分。

例子：

## 起始时间：

小时：15 分钟：50 秒：00

## 结束时间：

小时：17 分钟：14 秒：23

结果：1小时24分23秒

编辑：这是我到目前为止所得到的，这是我的问题的计算

```
public static void main(String[] args) 
{
    Scanner in = new Scanner(System.in);
    System.out.println("Starttime:");
    System.out.println("---------");

    System.out.print("Hour: ");
    int HourS = in.nextInt();
    System.out.print("Minute: ");
    int minuteS = in.nextInt();
    System.out.print("Second: ");
    int secondS = in.nextInt();

    System.out.println("\t");

    System.out.println("Finishtime:");
    System.out.println("------------");

    System.out.print("Hour: ");
    int hourF = in.nextInt();
    System.out.print("Minute: ");
    int minuteF = in.nextInt();
    System.out.print("Second: ");
    int secondM = in.nextInt(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:00:34.090

使用 JodaTime - 它做得很好。

*   [http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

这个简单的示例计算两个时间戳之间的差异并打印出人类可读的：

```
 String a = "00:01:09:340";
    String b = "00:02:03:430";

    DateTimeFormatter format = DateTimeFormat.forPattern("HH:mm:ss:SSS");
    DateTime oldTime = DateTime.parse(a, format);
    DateTime newTime = DateTime.parse(b, format);
    Interval interval = new Interval(oldTime, newTime);

    System.out.println(new StringBuffer("hours: ").append(interval.toDuration().getStandardHours())
            .append(" minutes: ").append(interval.toDuration().getStandardMinutes()).append(" seconds: ")
            .append(interval.toDuration().getStandardSeconds()).append(" milliseconds: ")
            .append(interval.toPeriod().getMillis()).toString()); 
```

该示例将为您提供以下输出：

```
hours: 0 minutes: 0 seconds: 54 milliseconds: 90 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:59:45.903

```
public static void main (String [] args) throws Exception
{
    SimpleDateFormat format = new SimpleDateFormat ("'Hour: 'HH' Minute: 'mm' Second: 'ss");

    BufferedReader reader = 
        new BufferedReader (
            new InputStreamReader (System.in));

    System.out.print ("Starting time: ");
    long startingTime = format.parse (reader.readLine ()).getTime ();
    System.out.print ("Finish time: ");
    long finishTime = format.parse (reader.readLine ()).getTime ();

    long delta = finishTime - startingTime;

    long seconds = delta / 1000 % 60;
    long minutes = delta / 60000 % 60;
    long hours = delta / 3600000;

    System.out.println (
        "Result: " + hours + " hour(s) " + minutes + 
        " minute(s) " + seconds + " second(s)");
} 
```

对我来说输出是：

```
Starting time: Hour: 15 Minute: 50 Second: 00
Finish time: Hour: 17 Minute: 14 Second: 23
Result: 1 hour(s) 24 minute(s) 23 second(s) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T12:55:15.830

这是以毫秒为单位的差异：

```
SimpleDateFormat format = new SimpleDateFormat("HH:mm:ss");
Date date = format.parse(time);
Date dateB = format.parse(timeB);
long difference = dateB.getTime() - date.getTime(); 
```

您可以将其转换为您想要的格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:56:06.360

您可能想考虑使用 JODA-time，它支持更复杂的日期计算方法。

# jquery - CRM 2011：无法读取 RetrieveMultipleRecords 成功返回的 [Object Object]

> ID：15158263
> 
> 赞同：1
> 
> 时间：2013-03-01T12:52:22.857
> 
> 标签：jquery, json, dynamics-crm-2011, odata

我正在使用 jQuery 1.4.1、JSON 2 和 SDK.JQuery.js（它是 CRM SDK 中提供的 REST DataOperation 的包装器）。虽然使用 SDK.JQquery.RetrieveMultipleRecords 函数，但我无法读取成功响应。为了详细说明，我在下面通过警报功能进行解释。

顺便说一句，代码执行正确并给出了 3 条记录，这也是正确的。

代码如下：-

```
SDK.JQuery.retrieveMultipleRecords(    
   "Contact",    
   "$select=FullName,ContactId&$filter=zk_cdn eq 'zk007'",    
   function(results) {    
   ////TODO: How to read results?    
   //If I use alert(results) it give the output as [object Object],[object Object],[object Object]    
   //If I use alert(results[0]) it give the output as [object Object]    
   //If I use alert(results[0].FullName) it give the output as unidentified    
   },    
   errorHandler,    
   function() {//OnComplete handler }    
   );

function errorHandler(error) {    
   alert(error.message);    
} 
```

期待着听到您的意见。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T22:06:55.213

*您可以通过attributes*访问该对象的所有可用属性集。或者，你可以去：

```
var info = "";
for(attribute in myObject)
  info += "\n" + attribute; 
```

或类似的东西。现在不在电脑前。

# jquery - 如何知道哪个元素调用 ajax 请求

> ID：15158264
> 
> 赞同：0
> 
> 时间：2013-03-01T12:52:22.383
> 
> 标签：jquery, asp.net-mvc-4

我只想获取调用 ajax 请求的 html 元素的 id，所以我可以在控制器函数上使用这些数据。

这是视图：

```
 @model CmsSite.Models.SideBarData

@{
    ViewBag.Title = "Home Page";
}
@section featured {
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>@ViewBag.Title.</h1>
                <h2>@ViewBag.Message</h2>
            </hgroup>
        </div>
    </section>
}
<h3>We suggest the following:</h3>

<aside id="sidebar">
 @using (Html.BeginForm("ShowContent", "SideBar"))
 {  
         <input id="side_bar_manage_categoty" name="side_bar_manage_categoty" class="post-transaction" type="submit" value="Manage Categorys" />
         <input name="side_bar_manage_products" class="post-transaction" type="submit" value="Manage Products" />
         <input name="side_bar_manage_users" class="post-transaction" type="submit" value="Manage Users" />
         <input name="side_bar_Watch_sales" class="post-transaction" type="submit" value="Watch Sales" />
         <input name="side_bar_change_site_appearance" class="post-transaction" type="submit" value="Change Site Appearance" />
 }
        </aside>  
<div ><p class="content"></p></div>

  <script id="ajax-request-result" type="application/html-template">             
        <div class="content">{{request_result}}</div>
     </script>

@section Scripts {
    <script type="text/javascript">
        $(function () {
            $('.post-transaction').on("click", function () {

                var form = $(this).parent("form");

                $.ajax({
                    type: "POST",
                    url: form.attr('action'),
                    data: form.serialize()
                })
                    .success(function (data) {
                        var template = $("#ajax-request-result").clone().html();

                        var html =
                            template
                                    .replace("{{request_result}}", data.request_result);
                       $(".content").replaceWith(html);

                    })
                    .error(function () {
                        alert("Your bid has been rejected");
                    });

                return false;
            });
        });
    </script>
} 
```

这是具有获取 ajax 请求的方法的控制器：

```
[HttpPost]
        public ActionResult ShowContent(string side_bar_manage_categoty)
        {

            string a = side_bar_manage_categoty;
            return Json(new
            {
                request_result = "Transaction Failed!"
            });
        } 
```

![在此处输入图像描述](../Images/cd9d3afb979adb79e875c3e9620a429b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:03:42.687

表单元素需要`name`属性。因此，如果您执行以下操作：

```
<input id="side_bar_manage_categoty" name="side_bar_manage_categoty" class="post-transaction" type="submit" value="Manage Categorys" />
<input id="side_bar_manage_products" name="side_bar_manage_products" class="post-transaction" type="submit" value="Manage Products" /> 
```

然后这些名称（`id`在这种情况下我只是从属性中复制的）将携带值到`FormCollection`服务器上。因此，如果您的操作如下所示：

```
public ActionResult ShowContent(FormCollection collection) 
```

然后，您可以检查`collection`操作方法中的对象，以查看它是否具有页面上任何特定按钮的键/值。你甚至可以更进一步，使用 MVC 的表单绑定来创建强类型的操作方法参数：

```
public ActionResult ShowContent(string side_bar_manage_categoty, string side_bar_manage_products) 
```

在这种情况下，如果您单击按钮`side_bar_manage_products`then`string`将包含值`"Manage Categorys"`（因为这是 中的`value`属性`input`），而另一个字符串将是`null`. 如果单击另一个按钮，则相反。因此，您只需测试非空字符串（`string.IsNullOrWhiteSpace()`这是一种很好的测试方法），这将是被调用的按钮。

# javascript - 如何设置动态生成的复选框的值

> ID：15158265
> 
> 赞同：0
> 
> 时间：2013-03-01T12:52:22.670
> 
> 标签：javascript, jquery, servlets

早上好，我在表格中有一个表格，表格是从数组列表动态填充的，对于该表格中的每一行，我都有一个复选框，表格中的第一列，表格中的第二列是 id，我想要在选中该复选框时使用其后面的单元格中的文本（id 列）设置复选框的 value 属性，因为我将在`request.getParameterValues`提交这些表单时使用 servlet 中的这些复选框获取所有值，这里是我填充我的桌子：

```
<form name="Main-Form" action="DeleteServlet" method="GET">
    <table BORDER=2 BORDERCOLOR=YELLOW width="120px" id="product_table">
        <tr>
            <td></td>
            <td><b>CarId</b></td>
            <td><b>Description</b></td>
            <td><b>Quantity</b></td>
            <td><b>Price</b></td>
            <td><b>CC.No</b></td>
            <td><b>Engine</b></td>
            <td><b>Cylinder.No</b></td>
            <td><b>MaxSpeed</b></td>
            <td><b>PetrolType</b></td>
            <td><b>PetrolCapacity</b></td>
        </tr>
        <c:forEach items="${product_list}" var="car">
            <tr id="data-row">
                <td><INPUT type="checkbox" name="chk" /></td> // how to get these checkbox in the for loop
                <td><c:out value="${car.carId}" /></td>
                <td><c:out value="${car.carDesc}" /></td>
                <td><c:out value="${car.quantity}" /></td>
                <td><c:out value="${car.price}" /></td>
                <td><c:out value="${car.enginCc}" /></td>
                <td><c:out value="${car.trans}" /></td>
                <td><c:out value="${car.noOfCylinder}" /></td>
                <td><c:out value="${car.topSpeed}" /></td>
                <td><c:out value="${car.fuelType}" /></td>
                <td><c:out value="${car.fuelCapacity}" /></td>
            </tr>
        </c:forEach>
    </table>
            <td colspan="3"><input type="submit" class="btn1" value="Delete"/>

    </form> 
```

注意：DeleteCar 是将从请求中获取 chk_group 中的值的 servlet

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:57:24.120

试试看是否有效

```
$("#myForm > table > tr").each(function(){
     var checkbox = $(this).find("input [type=checkbox]");
     var id = $(this).find("td:eq(1)").text();
     $(this).find("checkbox").val(id);
}) 
```

# c++ - 如何使用 QString 和 '\'

> ID：15158268
> 
> 赞同：-1
> 
> 时间：2013-03-01T12:52:29.680
> 
> 标签：c++, qt

我有一个使用的程序，我使用 getOpenFileName 如下：

```
QString fileName = QFileDialog::getOpenFileName(this,
                    tr("Select video"), "d:\\", tr("Video files (*.avi)"));
strcpy(thePath, fileName.toStdString().c_str()); // static char thePath[66];
scilab.setPathloc(thePath); 
```

`scilab`是一个将作业发送到程序 SCILAB 的类的对象。它的工作方式如下：

```
char std_dev[99];
char direc[60];
sprintf(direc,"direc=\'d:/BMDvideos/%s/%s/\'",getSessionName(),getVideoname());
sprintf(std_dev,"fn=\'d:/BMDvideos/%s/%s/%s.avi\'",
        getSessionName(),getVideoname(),getVideoname());
SendScilabJob(direc);
SendScilabJob(std_dev);
//SendScilabJob("fn=\'d:/BMDvideos/Aufnahme0.avi\'");
SendScilabJob("exec('U:/scilab/done/std_dev.sce');"); 
```

好吧，这很好用，但是当我使用`QString`类似的东西时：

```
 char text1 [70]    ;
 sprintf(text1,"disp(fn=\'%s\');",getPathloc());
 SendScilabJob("exec('U:/scilab/done/std_dev.sce');"); 
```

没有任何效果，我认为这是因为`//`我必须在`sprintf`. 知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:08:57.380

@borisbn 几乎肯定发现了问题。`sprintf`是一个 C 函数，而不是 C++，而且它根本不是类型安全的。它假定您知道要传递哪些类型。而对于`%s`，那就是`const char*`。

简单的解决方案：不要使用`sprintf`. 你有一个合适的 C++ 类，`QString`. 例如 `QString text = QString("disp(fn=\'%1\');").arg(getPathloc())`。请注意，您不要使用`%s`. 因为它是 C++，所以它是类型安全的，编译器会判断你传递的是整数还是字符串。

# c# - 计时器事件处理程序不在控制台上写入

> ID：15158270
> 
> 赞同：4
> 
> 时间：2013-03-01T12:52:36.243
> 
> 标签：c#, timer

我知道这可能很奇怪，但是我有一个计时器，并且我有一个在控制台上写入的 Elapsed 事件的事件处理程序，但是当我启动应用程序时，计时器正确启动，事件也正确触发。但是，结果不会显示在控制台中，除非我按下一个按钮，这让我放了两个按钮，`Console.ReadKey()`所以应用程序不会终止。

这是中的代码`Program.cs`：

```
 static void Main(string[] args)
    {
        Timer timer = new Timer(100);
        timer.Elapsed += new ElapsedEventHandler(WriteOnConsole);
        timer.Start();
        Console.ReadKey();
        Console.ReadKey();
    }

    static void WriteOnConsole(object source, ElapsedEventArgs e)
    {
        Console.WriteLine("A B C D");
    } 
```

如果我没有提到足够的信息，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T12:55:12.350

`ReadKey()`块`WriteLine()`。_ 在您按下一个键后，第一个键`ReadKey`完成并刷新对控制台的挂起写入。

由于这显然只是证明问题的一个小样本，因此很难提出更好的替代方案。

一种可能是仅在满足特定条件时才使用某种等待句柄来退出应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T12:58:39.533

尝试从第一个线程写入一个空字符串，然后再进行其他操作，从而初始化控制台：

```
static void Main(string[] args)
{
    Console.Write(string.Empty);
    Timer timer = new Timer(100);
    timer.Elapsed += new ElapsedEventHandler(WriteOnConsole);
    timer.Start();
    Console.ReadKey();
    Console.ReadKey();
}

static void WriteOnConsole(object source, ElapsedEventArgs e)
{
    Console.WriteLine("A B C D");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T12:58:04.950

我在另一个问题中看到了这一点-您甚至不需要计时器，只需要一个线程从控制台读取而另一个线程正在写入的*任何两个线程。*

看起来 for 的初始化`Console`有些损坏——第*一次*调用它会有效地取出一个锁，直到它完成，阻止任何其他控制台访问。

如果你写：

```
Console.WriteLine("Starting"); 
```

例如，在您的代码开始时，一切都会好起来的。它不像（或任何其他读取操作）*一般*`ReadKey`会阻止所有控制台输出- 它只是在第一次调用中。

# php - num_rows 通过 mysql 查询中的 2 个表？

> ID：15158271
> 
> 赞同：0
> 
> 时间：2013-03-01T12:52:39.560
> 
> 标签：php, mysql

我想知道是否可以进行查询，其中将检查两个不同的表，结果行数将返回，甚至是真/假。

原因是我有一个功能：

```
function exists($email){
    global $db;
    $query = $db->query("SELECT Email FROM table1, table2 WHERE Email= '$email' ");
    $check = $query->num_rows;
    return ($check == 1) ? true : false;
} 
```

我知道这仅在表具有相同结构的情况下才有效。就我而言，情况并非如此。

这两个表只有共同的“电子邮件”字段，但没有别的。

表 1 是这样的：

字段_1 | 字段_2 | 字段_3 | 字段_4 | 字段_5 | **field_6（电子邮件）** | 字段_7 | 字段_8 | 字段_9

表2就像：

字段_1 | 字段_2 | 字段_3 | 字段_4 |.... | **field_17（电子邮件）** | field_18 | field_19 | field_20

所以我想知道这是否可能？我查看了 JOIN 但不知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:55:14.407

试试下面：

```
SELECT SUM(cnt) as total_count
(
SELECT COUNT(*) as cnt FROM table1  WHERE Email= '$email' 
UNION 
SELECT COUNT(*) as cnt FROM table1  WHERE Email= '$email' 
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:55:29.233

您需要使用 UNION：

```
SELECT email
FROM   table1
UNION
SELECT email
FROM   table2 
```

[http://dev.mysql.com/doc/refman/5.0/en/union.html](http://dev.mysql.com/doc/refman/5.0/en/union.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:55:32.270

您可以使用联合，例如`SELECT email FROM table1 where Email = '$email' union SELECT email FROM table2 where Email = '$email'`.

您必须记住，两个查询的选定列数必须相同。

此外，当您实际上不需要它们时获取行是一种资源浪费 - 只需直接从数据库中获取匹配行的计数。

# javascript - FB.XFBML.parse 未捕获 [object Object]

> ID：15158280
> 
> 赞同：3
> 
> 时间：2013-03-01T12:53:18.253
> 
> 标签：javascript, jquery, facebook

为什么这不起作用？

```
$('.fb-like-button').each (function(){
    if ($(this).html() == "" || !$(this).html() || $(this).html() == "undefined")
        {
            $(this).html('<fb:like href="'+$(this).attr("data-url")+'" layout="button_count" send="false" show_faces="false" width="100" action="like" font="verdana" colorscheme="light" />');
            FB.XFBML.parse($(this));
            $(this).attr("class", "done");
        }
}); 
```

错误：未捕获 [object Object]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:40:53.963

好的，我找到了解决方案。我不知道为什么，但这有效：

```
FB.XFBML.parse($(this).get(0)); 
```

# mysql - 如果字段值为 2，mysql 返回 2 行

> ID：15158288
> 
> 赞同：0
> 
> 时间：2013-03-01T12:53:36.723
> 
> 标签：mysql, select

我有一个简单的标签打印网页，但遇到了一个障碍，如果有人订购 2 本书。

sql

```
SELECT 
    contacts.name,contacts.address,contacts_extra.amount_books
FROM contact 
INNER JOIN contacts_extra ON contacts.id = contacts_extra.cid
WHERE 
    contacts_extra.amount_books >= '1' 
```

现在如果 contacts_extra amount_books = 2 那么它必须返回 2 行，因为我们需要 2 个标签。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:58:33.807

使用`Group By`，见下文：

```
SELECT contacts.name,contacts.address,contacts_extra.amount_books
FROM contact 
INNER JOIN contacts_extra on contacts.id = contacts_extra.cid
WHERE contacts_extra.amount_books >= '1'
GROUP BY contacts.id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:32:35.653

让我们简单化

```
select id,name,total_copier from contacts. 
```

这就是选择语句。因为它可以带回来

```
1,john,1
2,peter,3
3,sara,2 
```

我需要它

```
1,john,1
2,peter,2
2,peter,2
2,peter,2
3,sara,2
3,sara,2 
```

第三列决定返回该行的次数。

# cuda - CUDA 的 beta pdf 函数

> ID：15158297
> 
> 赞同：2
> 
> 时间：2013-03-01T12:54:10.997
> 
> 标签：cuda, statistics

我需要CUDA中的`betapdf(x,a,b)`（[**Beta概率密度函数）函数吗？**](http://en.wikipedia.org/wiki/Beta_distribution)CUDA 有这个功能还是我应该自己实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:21:24.440

好吧，我不知道 beta 函数，但是 CUDA 中有两个 gamma 函数变体，请参阅：[CUDA Math API](http://docs.nvidia.com/cuda/cuda-math-api/index.html)了解更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T15:56:38.090

这是您可以在主机和设备上使用的功能。在主机上，您需要包含 math.h。

```
__host__ __device__ 
double betapdf(double x, double a, double b)
{
   //if (x < 0 || x > 1) return 0;
   double tmp = pow((1 - x), (b - 1)) * pow(x, (a - 1));
   double iB = tgamma(a + b) / (tgamma(a) * tgamma(b));  // 1/B
   return tmp * iB;
} 
```

**如果您不知道**x 将位于 [0 1] 中，请取消注释第一行。

**编辑**：如果您使用浮点数，请使用`powf`and`tgammaf`代替。

**编辑 2**就像评论中提到的@njuffa 一样，这个特定的代码可能会遇到中间溢出问题。在这种情况下，以下方法可能会更好。

```
__host__ __device__ 
double betapdf2(double x, double a, double b)
{
   //if (x < 0 || x > 1) return 0;
   double tmp = pow((1 - x), (b - 1)) * pow(x, (a - 1));
   double iB = exp(lgamma(a + b) - lgamma(a) - lgamma(b)); // 1/B
   return tmp * iB;
} 
```

# python - Python：从列表中打开 csv 文件并将它们转换为 xls

> ID：15158298
> 
> 赞同：1
> 
> 时间：2013-03-01T12:54:12.733
> 
> 标签：python, csv, xls

我想从列表中打开多个 csv 文件，然后将它们转换为 xls 文件。

我做了那个代码：

```
import sys, csv, xlwt

files = ['/home/julien/excel/csv/ABORD2.csv']

for i in files:
    f=open(i, 'rb')
    g = csv.reader ((f), delimiter=";")
    workbook=xlwt.Workbook()
    sheet= xlwt.Workbook()
    sheet = workbook.add_sheet("Sheet 1")

    for rowi, row in enumerate(g):
        for coli, value in enumerate(row):
            sheet.write(rowi,coli,value)
        workbook.save(i + ".xls") 
```

我的 xls 文件已创建。但在这两个文件中，我只有 xls 的路径。例如，对于文件 ABORD.xls，仅写入以下表达式：

```
'/home/julien/excel/csv/ABORD2.xls' 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T13:05:27.360

先生，您不必要地创建了两个工作簿，并且您正在以错误的身份保存工作簿

```
import csv, xlwt

files = ['test.csv']

for i in files:
    f=open(i, 'rb')
    g = csv.reader ((f), delimiter=";")
    wbk= xlwt.Workbook()
    sheet = wbk.add_sheet("Sheet 1")

    for rowi, row in enumerate(g):
        for coli, value in enumerate(row):
            sheet.write(rowi,coli,value)

    wbk.save(i + '.xls') 
```

# jsp - 编辑liferay停靠栏jsp页面错误

> ID：15158299
> 
> 赞同：0
> 
> 时间：2013-03-01T12:54:12.510
> 
> 标签：jsp, liferay-6

我想自定义 liferay 停靠栏 view.jsp 页面并想添加一个来自 bean java 文件的文本（项目版本）。但问题是我想初始化java类时出错。我对liferay很陌生，也不知道是否可以在liferay jsp页面中创建外部类对象。这是我的代码::

```
 <%@page import="net.simplyfiIT.bean.UserManagementBean"%>

        <%
        String version;     
        UserManagementBean bean=new UserManagementBean();
        version=bean.getVersion();
        %> 
```

错误信息：

```
 Only a type can be imported. net.simplyfiIT.bean.UserManagementBean resolves to a package

An error occurred at line: 342 in the jsp file: /html/portlet/dockbar/view.jsp
 UserManagementBean cannot be resolved to a type
 339:               
 340:               <%
341:                String version;
342:                UserManagementBean bean=new UserManagementBean();
 343:               version=bean.getVersion();
 344:                   
  345: 

  Stacktrace:
at org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:102)
at org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:331)
at org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:469)
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:378)
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593) 
```

注意： Bean 类编译在 tomcat 目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:52:57.030

我想你想使用：

```
<jsp:useBean id="someID" class="net.simplyfiIT.bean.UserManagementBean"> 
```

代替

```
<%@page import="net.simplyfiIT.bean.UserManagementBean"%> 
```

Bean 应该放在类路径中。

（我自己也是菜鸟）

# java - 如何从Java文件中读取数字？

> ID：15158301
> 
> 赞同：0
> 
> 时间：2013-03-01T12:54:29.223
> 
> 标签：java, file, java.util.scanner

我正在尝试读入一个文件，并且我设法读入了名称，但没有读入名称后面的数字。我需要将这些数字不是字符串，而是浮点数或双精度数。更糟糕的是，我必须读入两个数字。请帮忙？（顺便说一句，在代码中我已经导入了必要的东西）

我必须阅读的一个例子：

麦当劳农场 , 118.8 45670

```
public class Popcorn{ 

public static void main (String [] args) throws IOException { 

             System.out.println("Enter the name of the file");
           Scanner in = new Scanner(System.in);
           String filename = in.next(); 
            Scanner infile = new Scanner(new FileReader( filename)); // 
            String line = "" ; 

           //to get stuff from the file reader

            while (infile.hasNextLine())
            {  line= infile.nextLine(); 

             // int endingIndex =line.indexOf(','); 
           // String fromName = line.substring(0, endingIndex); //this is to get the name of the farm 
           // if (fromName.length()>0){
           //   System.out.println (fromName);
          //  }
           // else if (fromName.length()<= 0)
            //  System.out.println(""); some of the durdling that goes on 
           // }
          while (infile.hasNextLine())
            {  
             line= infile.nextLine().trim();  // added the call to trim to remove whitespace
               if(line.length() > 0)    // test to verify the line isn't blank
               { 
                int endingIndex =line.indexOf(','); 
              String fromName = line.substring(0, endingIndex);
                 String rest = line.substring(endingIndex + 1);
               //   float numbers = Float.valueOf(rest.trim()).floatValue();
    Scanner inLine = new Scanner(rest);

               System.out.println(fromName);
              }
 }
  }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:59:19.327

我不知道您传入的文件是什么样的，但以“McDonlad's Farm , 118.8 45670”为例，您可以执行以下操作：

```
...
String rest = line.substring(endingIndex + 1);
String[] sValues = rest.split("[ \t]"); // split on all spaces and tabs
double[] dValues = new double[sValues.length];
for(int i = 0; i < sValues.length; i++) {
    try {
        dValues[i] = Double.parseDouble(sValues[i]);
    } catch (NumberFormatException e) {
        // some optional exceptionhandling if it's not 
        // guaranteed that all last fields contain doubles
    }
}
... 
```

-Array`dValues`应包含所有所需的双精度（或浮点）值。

一些额外的注意事项：除了 jlordo 已经说过的，如果你使用正确的缩进，你的代码会变得更容易阅读......

# sql - 移至 64 位 Win7 桌面，使用 32 位 SSMS，某些 XML 字段无法一致返回

> ID：15158302
> 
> 赞同：1
> 
> 时间：2013-03-01T12:54:35.473
> 
> 标签：sql, sql-server, sql-server-2005, ssms

刚搬到新的 Win7 64 位桌面。我正在针对 SQL Server 2005 DB 服务器运行 32 位版本的 SQL Server Management Studio（不是我的选择，这是安装的）。

如果我查询某个表的前 10 行，其中一个字段是 XML，大约 50-90% 的返回记录似乎没有填充其 XML 字段。

它变得更奇怪了——一些 XML 字段根本不会造成这个问题。我怀疑这与字段中数据的长度有关。我已经在 Tools => Options 中使用了“XML Data”大小，但它没有解决问题。

这不是我的 WinXP 32 位桌面上的 Management Studio 的问题。

有没有其他人看过这个？有人知道解决方案/补丁吗？运行 64 位版本的 SSMS 会解决问题吗？

# html - 验证上传的载波大小

> ID：15158304
> 
> 赞同：0
> 
> 时间：2013-03-01T12:54:36.500
> 
> 标签：html, ruby-on-rails-3, file-upload, carrierwave

我正在验证 Carrierwave 上传的大小。它在本地主机上运行良好，但在服务器（Amazon EC2）上，当我尝试上传大于 1MB 的文件时出现以下错误（这是限制）：

```
POST http://mysubdomain.mysite.com/authors/484.js  /authors/484.js:1
Unsafe JavaScript attempt to access frame with URL data:text/html,chromewebdata from frame with URL http://mysubdomain.mysite.com/. The frame requesting access has a protocol of 'http', the frame being accessed has a protocol of ''. Protocols must match.
 default.js:17

484.js /authors POST (failed) Pending Other 13 B 0 B 1.0 min
data:image/png;base… GET Success image/png  data:text/html,chromewebdata:159 Parser 0 B 2.3 KB 0 ms 0 0 ms 
```

在发生错误的行 default.js:17 中，我看到 JQuery 代码（缩小）

这就是我验证图像的方式：

```
 mount_uploader :image_one, AuthorPixUploader
  validates :image_one, 
    :file_size => { 
      :maximum => 1.megabytes.to_i 
    } 
```

有什么帮助吗？我认为它在失败到达服务器之前失败了。我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:22:18.140

答案是在服务器上的 nginx.conf 中设置 client_max_body_size。

我将此行添加到服务器块：

```
client_max_body_size 10M; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T21:58:26.507

我知道您已经找到了解决问题的方法，但是我最近遇到了类似的问题，并且遇到了有关如何在服务器端正确验证文件大小的官方 CarrierWave 教程...

[https://github.com/carrierwaveuploader/carrierwave/wiki/How-to%3A-Validate-attachment-file-size](https://github.com/carrierwaveuploader/carrierwave/wiki/How-to%3A-Validate-attachment-file-size)

# javascript - Webview 中的 iOS 应用程序 - 欺骗应用程序进入思考页面已重新加载

> ID：15158305
> 
> 赞同：0
> 
> 时间：2013-03-01T12:54:40.370
> 
> 标签：javascript, ios, dom, ios6

好的，

我有一个具有 webview 的生产 iOS 应用程序。
它监听 webview 的 URL 变化并抛出一个微调器。然后监听 webview 以完成加载并隐藏微调器。

问题是 webview 已更改为具有哈希更改以修复后退按钮。这会触发上面的 URL 更改微调器，但微调器永远不会消失，因为哈希更改不会重新加载页面，并且永远不会触发加载事件来删除。

无论如何，webview中的javascript是否可以欺骗应用程序，可能是通过影响document.readyState ...

欺骗页面加载/重新加载的应用程序并且应用程序删除微调器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T15:37:28.743

我们尝试了一些东西；

1.  我们在页面中写入了一张图片（1x1 gif），这并没有欺骗页面加载事件......

2.  但是后来我们发现在页面中写入了一个 iframe，当 iframe 加载（一个空的 html 文件）时，页面加载事件再次被触发，并且原生加载覆盖被移除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:57:21.410

UIWebView 有一种委托方法

*   (void)webViewDidFinishLoad:(UIWebView *)webView;

当您的 URL 停止加载时将调用它。

# powershell - 使用 Powershell 对 CSV 文件进行排序

> ID：15158306
> 
> 赞同：4
> 
> 时间：2013-03-01T12:54:44.003
> 
> 标签：powershell, csv

我正在尝试对大型 CSV 文件进行排序。问题在于在名为 Combined 的 coloum 上使用 sort-oject。它不像我期望的那样排序！为了测试，我删除了所有未排序的数据，并减少了行数。

原始 CSV：

```
Combined
1A THE BIG
7
3A SPRING
19
LUZREN
21
23
25
29
1 HONEY
5
3 THE GOOD
11
ARVALA
BRASAID
13
MEADOWCLAW 
```

电源外壳：

```
Import-Csv orginal.csv -delimiter ',' | Sort-Object -Unique Combined 

Combined
--------
1 HONEY
11
13
19
1A THE BIG
21
23
25
29
3 THE GOOD
3A SPRING
5
7
ARVALA
BRASAID
LUZREN
MEADOWCLAW 
```

我的预期是这样的：

```
Combined
1A THE BIG
5
7
11
13
19
21
23
25
29
1 HONEY
3 THE GOOD
3A SPRING
ARVALA
BRASAID
LUZREN
MEADOWCLAW 
```

在一个完美的世界里，我想要这样：

```
Combined
1A THE BIG
1 HONEY
3 THE GOOD
3A SPRING
5
7
11
13
19
21
23
25
29
ARVALA
BRASAID
LUZREN
MEADOWCLAW 
```

请有人向我解释为什么会发生这种情况，我已经把头撞到显示器上一个星期了。另外，我怎样才能得到我想要的输出？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:13:17.023

不确定我是否理解排序逻辑，但试试这个：

```
$StartsWithNumber = { if ($_.Combined -match '^\d*\D' ) { $_.Combined } }
$IsNumber = { if ($_.Combined -match '^\d*$') { [int]$_.Combined } }
$OnlyLetters = { if ($_.Combined -imatch '^[a-z ]*$') { $_.Combined } }

Import-Csv original.csv | 
Sort-Object $OnlyLetters, $IsNumber, $StartsWithNumber -Unique

Combined
--------
1 HONEY
1A THE BIG
3 THE GOOD
3A SPRING
5
7
11
13
19
21
23
25
29
ARVALA
BRASAID
LUZREN
MEADOWCLAW 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:22:19.387

试试这个：（不是在完美的世界）

```
Import-Csv original.csv -delimiter ',' | 
Sort-Object { [int]([regex]::Replace( $_.combined , "\D" , "" )) } ,  `
{ [regex]::Replace( $_.combined , "\d" , "" ) } -unique

Combined
--------
ARVALA
BRASAID
LUZREN
MEADOWCLAW
1 HONEY
1A THE BIG
3 THE GOOD
3A SPRING
5
7
11
13
19
21
23
25
29 
```

遵循@Aryadev 的好答案，此代码排序也值以多于一位数字开头：

```
$allToNumbers = { [int]([regex]::Replace( $_.combined , "\D" , "" )) }
$StartsWithNumber = { if ($_.Combined -match '^\d+\D') { $_.Combined } }
$IsNumber = { if ($_.Combined -match '^\d*$') { [int]$_.Combined } }
$OnlyLetters = { if ($_.Combined -imatch '^[a-z ]*$') { $_.Combined } }

Import-Csv original.csv | 
Sort-Object  $OnlyLetters, $allnumbers, $IsNumber,  $StartsWithNumber -Unique 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:16:18.687

`Import-CSV`默认情况下导入所有值`string`。这就是为什么你会得到你看到的结果。它是按字母顺序排序的。字母数字中的“优先级”是：空格、数字、字母。

我认为如果没有一些严肃的代码，您将无法获得所需的输出。我唯一的建议是将纯数字解析为 int so ex。数字 30 将出现在 5 之后。这可以通过以下方式完成：

```
$intvalue = 10000
import-csv .\test.csv | % {
    if ([int]::TryParse($_.Combined, [ref]$intvalue)) {
        $_.Combined = $intvalue
    }
    $_
} | Sort-Object -Unique Combined

Combined
--------
1 HONEY
5
7
11
13
19
1A THE BIG
21
23
25
29
3 THE GOOD
3A SPRING
ARVALA
BRASAID
LUZREN 
MEADOWCLAW 
```

# iphone - iOS 应用程序 - 原生应用程序与混合应用程序

> ID：15158311
> 
> 赞同：-2
> 
> 时间：2013-03-01T12:54:56.333
> 
> 标签：iphone, ios, ipad

适用于 iPhone、iPad 和 iPad Mini 的 iOS 应用程序 - 原生应用程序与混合应用程序

从最终用户的角度来看，适用于 iPhone、iPad 和 iPad Mini 的 iOS 应用程序的原生应用程序和混合应用程序之间的主要区别是什么？

最终用户可以检测到应用程序是原生应用程序还是混合应用程序？

Native Apps 和 Hybrid Apps 之间是否存在性能或功能差异或限制？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:00:29.910

**本机应用程序**是为特定平台构建的，具有通常由平台供应商提供的平台 SDK、工具和语言（例如，适用于 iOS 的 xCode/Objective-C、适用于 Android 的 Eclipse/Java、适用于 Windows Phone 的 Visual Studio/C#）。

**移动 Web 应用程序**是服务器端应用程序，使用任何服务器端技术（PHP、Node.js、ASP.NET）构建，这些技术可以呈现经过样式化的 HTML，以便在设备外形尺寸上很好地呈现。

**混合应用程序，**如原生应用程序，在设备上运行，并使用 Web 技术（HTML5、CSS 和 JavaScript）编写。混合应用程序在本机容器内运行，并利用设备的浏览器引擎（但不是浏览器）来呈现 HTML 并在本地处理 JavaScript。Web-to-native 抽象层允许访问在移动 Web 应用程序中无法访问的设备功能，例如加速度计、相机和本地存储。

Get From [This site](http://icenium.com/community/blog/icenium-team-blog/2012/06/14/what-is-a-hybrid-mobile-app-)阅读它。

# .net - 在 asp.net mvc3 和 .net4.0 中解压缩文件的最佳库

> ID：15158312
> 
> 赞同：0
> 
> 时间：2013-03-01T12:55:02.360
> 
> 标签：.net, asp.net-mvc-3, unzip

我运行 .NET 4.0 并且无法切换到 .NET4.5，因此无法使用以下行：

```
 Decompress.CopyTo(destinationDirectoryName); 
```

我可以考虑任何好的第三方库？？我需要在 .zip 中解压缩多个文件

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:48:43.793

[DotNetZip](http://dotnetzip.codeplex.com/)非常好用且易于使用。

# php - php xpath基于多个属性和父属性检索属性值

> ID：15158314
> 
> 赞同：1
> 
> 时间：2013-03-01T12:55:06.157
> 
> 标签：php, xpath, simplexml

我需要从 xml 中选择节点，条件见下文。我使用的是 simplexml，所以 xpath 必须是 1.0。

XML 片段：

```
<scales>
    <scale id="1" gender="*" age="*">
        <d scid="hi" raw="10" t="76" />
        <d scid="pn" raw="12" t="80" />
    </scale>
    <scale id="2" gender="m" age="*">
        <d scid="hi" raw="8" t="79" />
        <d scid="pn" raw="2" t="50" />
    </scale>
    <scale id="3" gender="*" age="19-39">
        <d scid="hi" raw="0" t="48" />
        <d scid="pn" raw="10" t="49" />
    </scale>
</scales> 
```

现在，我想选择具有...的节点的`t`-Attribute`<d>`

```
 raw="10" AND scid="hi"

 $result=$xml->xpath('//d[@scid="hi"][@raw="10"]/@t'); 
```

它的父节点`<scale>`有...

```
(gender="*" OR gender="m") AND (age="*" OR age="39-59")

$result=$xml->xpath('//scale[@gender="*" or @gender="m"][@age="*" or @age="39-59"]'); 
```

我想从我的 simplexml-object 获得 1 个 xpath-statement `$xml`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T04:24:26.360

只需结合您的两个 XPath 查询...

[现场演示](http://3v4l.org/Fo9iW)

```
$str=<<<XML
<scales>
    <scale id="1" gender="*" age="*">
        <d scid="hi" raw="10" t="76" />
        <d scid="pn" raw="12" t="80" />
    </scale>
    <scale id="2" gender="m" age="*">
        <d scid="hi" raw="8" t="79" />
        <d scid="pn" raw="2" t="50" />
    </scale>
    <scale id="3" gender="*" age="19-39">
        <d scid="hi" raw="0" t="48" />
        <d scid="pn" raw="10" t="49" />
    </scale>
</scales>
XML;
$xml=simplexml_load_string($str);
foreach($xml->xpath('//scale[@gender="*" or @gender="m"][@age="*" or @age="39-59"]/d[@scid="hi"][@raw="10"]/@t') as $t)
{
    echo $t;
} 
```

输出`76`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:35:32.373

好的快速读入xpath似乎你可以做属性匹配这样的事情

```
 $path = "(scale[@gender=\"*\"]|scale[@gender=\"m\"]) & (scale[@age=\"*\"]|scale[@age=\"39-59\"])";
 $scale= $xml->xpath($path); 
```

这应该会返回您想要的实际比例标签。然后，您可以通过返回的 $scale 中的标签进行 foreach 循环，并使用类似这样的方法提取标准属性（注意不准确，但概念正确）

```
foreach($scale->d[0]->attributes() as $a => $b => $c) {
    echo "t=$c\"\n";
} 
```

# android - 在包 android 中找不到属性“方向”的资源标识符

> ID：15158318
> 
> 赞同：0
> 
> 时间：2013-03-01T12:55:15.363
> 
> 标签：android

android错误：在包中找不到属性“动画位图格式”的资源标识符

```
<com.aphidmobile.flip.FlipViewController
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:flip="http://schemas.android.com/apk/res/com.bhavik.mainStory"
        android:id="@+id/flipView"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        flip:orientation="horizontal"
        flip:animationBitmapFormat="RGB_565"
        /> 
```

错误：在此行找到多个注释：-错误：在包'com.bhavik.mainstory'中找不到属性'orientation'的资源标识符-错误：在包'com.bhavik.mainstory'中找不到属性'animationBitmapFormat'的资源标识符'

所以，任何人都告诉我该怎么做才能解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T18:03:24.120

写在 AndroidManifiest android:screenOrientation="landscape"

# ios - 创建一个块并将其命名为输入块？

> ID：15158320
> 
> 赞同：0
> 
> 时间：2013-03-01T12:55:17.153
> 
> 标签：ios, objective-c, automatic-ref-counting

我最近被“分配”到一段代码，其中以下标记为`#warning memory leak`

```
- (void)aMethodWithCallback:(BlockType)completedBlock {
        /* Do stuff */
        completedBlock = ^(Class1 *obj, NSError *error) {
            /* Do stuff */
#warning memory leak
            if (completedBlock) {
                completedBlock(obj, error);
            }
         };

         [self callAnotherMethodWithCallback::completedBlock];
    } 
```

我不确定如何处理它，创建一个名称为输入块的块看起来很奇怪，但它似乎有效。**为什么上面的代码很危险？**

*编辑* ARC 已启用。

将代码更改为此，它似乎不再泄漏：

```
- (void)aMethodWithCallback:(BlockType)completedBlock {
    /* Do stuff */
    BlockType completedBlock2 = ^(Class1 *obj, NSError *error) {
         /* Do stuff */
         if (completedBlock) {
            completedBlock(obj, error);
         }
    };

    [self callAnotherMethodWithCallback::completedBlock2];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:12:40.767

```
 - (void)aMethodWithCallback:(BlockType)completedBlock {
     id obj = nil;
     NSError error = nil;
/* make your stuff with obj and error*/

     if (completedBlock)
        completedBlock(obj, error);

     [self callAnotherMethodWithCallback::completedBlock];
 } 
```

或者，您将在每次调用该方法时重写该变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:44:27.197

据我所知，您提供的小代码片段中没有泄漏。如果存在内存泄漏，则它不在您提供的代码片段中，因为以下程序在使用 ARC 编译时，在仪器下运行没有问题：

```
void func2(void (^block)(void));

void func1(void (^block)(void))
{
    block = ^() {
        if (block)
            block();
    };

    func2(block);
}

void func2(void (^block)(void)) {
    if (block)
        block();
}

int main()
{
    func1(^{
        NSLog(@"Callback");
    });
} 
```

要么我遗漏了一些东西，要么你被“分配”的那段代码是假的。

注意：我会确保所引用的场景启用了 ARC。如果没有启用 ARC，那么该代码中肯定*存在*泄漏。

# c# - 在静态方法中使用隐藏字段值更新标志值

> ID：15158328
> 
> 赞同：-2
> 
> 时间：2013-03-01T12:55:31.837
> 
> 标签：c#, javascript, asp.net, ajaxcontroltoolkit

**Javascript**

```
function btnNewPatientClick()
        {
            hidFlag.value = "false";}
function btnExistingPatient_Click()
        {
            hidFlag.value = "true";} 
```

**ASPX..**

```
 <asp:TextBox ID="txtPatientID" AutoCompleteType="Disabled" CssClass="csstextbox"
                                    runat="server"></asp:TextBox><span class="csstexterror">*</span>
                                <asp:AutoCompleteExtender ID="txtPatientID_AutoCompleteExtender" runat="server" ServiceMethod="GetPatientID"
                                    MinimumPrefixLength="1" CompletionSetCount="1" TargetControlID="txtPatientID"
                                    UseContextKey="True" DelimiterCharacters="" Enabled="True">
                                </asp:AutoCompleteExtender> 
```

**C＃**

```
 static string flag = "";
 protected void Page_Load(object sender, EventArgs e)
 {
    flag = hidFlag.Value;
 }

 [System.Web.Services.WebMethodAttribute(), System.Web.Script.Services.ScriptMethodAttribute()]
 public static string[] GetPatientID(string prefixText, int count, string contextKey)
 {
     if(flag == "true"){
        ///code to get patientID
     }
 } 
```

我有两个按钮 NEW Patinet，Existing Patinet 和一个文本框用于选择 Patinet 名称使用 ajax 工具包的 autocompleteExtender。如果我点击新学生按钮，那么我不允许在文本框中填充学生，如果点击现有学生，则允许在文本框中填充学生。我设置了标志但失败了解决方案是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:47:56.103

跟着这些步骤：

1）在更新面板中获取按钮。

```
<asp:UpdatePanel ID="updatePanel" runat="server">
        <ContentTemplate>
            <asp:Button ID="btnUpdatePanel" runat="server" OnClick="btnUpdatePanel_Click" Style="display: none;" />
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnUpdatePanel" EventName="Click" />
        </Triggers>
    </asp:UpdatePanel> 
```

2）从javascript调用更新面板按钮单击。

```
function btnNewPatientClick()
        {hidFlag.value = "false";
            btnUpdatePanel.click();
//rest of ur code...} 
```

3）在服务器端按钮单击更改标志值与 hiddenFiled 值。

```
protected void btnUpdatePanel_Click(object sender, EventArgs e)
    {
        flag = hidFlag.Value;
    } 
```

它应该工作测试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:02:48.180

您无法访问 Ajax 调用中的控件。有关更多信息，请阅读此

1.  [Ajax 和页面控件](http://encosia.com/why-do-aspnet-ajax-page-methods-have-to-be-static/)

# java - Android，无法让方法 setOnLongClickListener 工作

> ID：15158330
> 
> 赞同：4
> 
> 时间：2013-03-01T12:55:36.660
> 
> 标签：java, android

我正在尝试检测长按并获得：

> 类型视图中的方法“setOnLongClickListener”不适用于参数“new OnLongClickListener()”

代码如下：

```
t.setOnLongClickListener(new OnLongClickListener() {
    @Override
    public boolean onLongClick(View v) {
        //Offer additional options when the view is held.
            MakeRingtune( strLastSound);
        return true;
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T13:00:07.397

`OnLongClickListener`在 android API 中有多个内部类：`View.OnLongClickListener`和`AdapterView.OnLongClickListener`.

因此，请检查您的导入语句并确保使用正确的语句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T13:05:22.860

试试下面：

> ```
>  t1.setOnLongClickListener(new View.OnLongClickListener() { <--- check here.
>     @Override
>     public boolean onLongClick(View v) {
>         // TODO Auto-generated method stub
>         Toast.makeText(getBaseContext(), "Long Clicked", Toast.LENGTH_SHORT).show();
>         return true;
>     }
> }); 
> ```

# java - 如果目标类方法同步，spring代理调用是否也同步？

> ID：15158333
> 
> 赞同：2
> 
> 时间：2013-03-01T12:55:48.773
> 
> 标签：java, spring, synchronization

我正在使用 spring 事务，我的服务类方法之一需要像下面一样同步。

```
package com.xyz.service;
class  XYZService{
  public  synchronized void methodA{
   }

  public  synchronized void methodB{
   }
} 
```

我将spring txns应用于我的服务类，如下所示

```
<aop:config>
        <aop:advisor id="serviceTx" advice-ref="txAdvice" pointcut="execution(* *..service.*Manager.*(..)) order="0"/>
    </aop:config>

<tx:advice id="txAdvice" transaction-manager="transactionManager">
        <tx:attributes>
            <tx:method name="*"/>
        </tx:attributes>
    </tx:advice>

<bean id="xyzManager" class="com.xyz.service.XYZService">
           </bean> 
```

那么当我在spring bean（xyzManager）上调用methodA或methodB时，它仍然是同步调用吗？请帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:03:56.463

快速回答是“是”。Spring创建“容器”并且不触及方法的原始签名。

# uiview - 当点击操作按钮时，在 viewController 中加载 UIView

> ID：15158334
> 
> 赞同：0
> 
> 时间：2013-03-01T12:55:50.540
> 
> 标签：uiview

在视图控制器中，我获取了对象视图并通过情节提要放置了 2 个文本字段和 2 个 uibutton。我只想在用户点击 UIbutton 时添加相同的视图，而不会丢失第一个视图的文本字段中的数据。

我如何访问所有视图的数据。

大批

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:11:15.403

您需要`IBOutlets`通过控制从情节提要中的视图拖动到视图控制器`@interface`部分来创建。然后您可以使用它们访问视图的数据。

如果您想在用户点击按钮时执行某些操作，您需要`IBAction`通过控制从情节提要中的按钮拖动到视图控制器`@implementation`代码中的部分来创建一个。然后您可以在创建的方法中以编程方式添加另一个视图。

# python - 如何在 Python 中将整数转换为其英文表示？

> ID：15158336
> 
> 赞同：1
> 
> 时间：2013-03-01T12:55:57.750
> 
> 标签：python, string, integer

我需要在 python 中将整数转换为它们的英文（字符串）表示。例子：

```
5 = five
20 = twenty
etc. 
```

我知道，我可以使用条件，但是我需要转换很多整数，所以我需要最快的方法来实现它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T13:01:32.047

[`pynum2word`](http://pynum2word.sourceforge.net/)可以为您执行此操作：

```
>>> import num2word
>>> dir(num2word)
['__builtins__', '__doc__', '__file__', '__name__', '__package__',
'_lang', '_loc', '_locale', '_locdict', '_module', '_modules',
'n2w', 'n2wmod', 'to_card', 'to_ord', 'to_ordnum', 'to_year']
>>> num2word.to_card(1111)
'one thousand, one hundred and eleven' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:59:22.967

问题是可能没有提供这种功能的库

这样做的方法是分析数字，将其分成小数并使用本文可以帮助您的已定义单词的 [静态](http://www.blog.pythonlibrary.org/2010/10/21/python-converting-numbers-to-words/)列表

但是，如果你想使用不同于英语的东西，它可能会变得很棘手，你需要修改上面的函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:03:02.280

如果我是你，我会尝试在网上查找数字列表及其相应的英文翻译。文本文件可能是最好的。然后，您将该文件转换为 python 中的字典（或将其保存到数据库）。示例{'1'：'一个'，'2'：'两个'...}。从那里开始，很容易。我认为找到现有列表是耗时的部分，但必须有一个。

# django - Django 管理员通过 ImageField 链接到图像

> ID：15158337
> 
> 赞同：3
> 
> 时间：2013-03-01T12:56:02.450
> 
> 标签：django, image

我已经建立了一个活动的 Django 模型，其中包含以下字段：

```
class Activity(models.Model):
    ...
    thumbnail = models.ImageField(upload_to="thumbs/", blank=True, null=True) 
```

通过管理界面，我可以上传正确放置在主目录的 thumbs 文件夹中的图像。当我尝试编辑我创建的活动时，界面显示：`Currently: thumbs/image.png`这是一个指向`http://localhost:8000/media/thumbs/image.png`. 当我点击这个链接时，我得到一个 404 page not found 错误。如何让链接正确指向我上传的图片？如果可能的话，我怎样才能直接在管理界面中显示图像？

编辑：

媒体根 = `'/Users/.../mysite/media/'`; 媒体网址 = `'http://localhost:8000/media/'`;

urls.py 的内容：

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),
) 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T13:09:11.830

**设置.py**

```
from django.conf.urls import patterns, include, url
from django.conf.urls.static import static
from django.contrib import admin
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

admin.autodiscover()

urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),
)+ static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

urlpatterns += staticfiles_urlpatterns() 
```

**模型.py**

```
class Activity(models.Model):
    ...
    thumbnail = models.ImageField(upload_to="thumbs/", blank=True, null=True)

    def image_(self):
        return '<a href="/media/{0}"><img src="/media/{0}"></a>'.format(self.thumbnail)
    image_.allow_tags = True

class AdminName(admin.ModelAdmin):
    .........
    list_display = ('image_',) 
```

# android - HLS 流，音频/视频不同步

> ID：15158342
> 
> 赞同：0
> 
> 时间：2013-03-01T12:56:13.733
> 
> 标签：android, synchronization, video-streaming, http-live-streaming

我正在开发一个应该通过 HLS 流式传输视频的应用程序。
我正在使用摩托罗拉 XT311，Android 版本：2.3.4。
我使用 Vitamio 库。

问题是视频在音频后大约 15-30 秒开始播放。

我的互联网连接稳定，所以我认为问题可能是由于硬件或解码，我不知道。
有什么办法可以同步播放吗？

这是我的代码：

```
 ...
    mVideoView = (VideoView) findViewById(R.id.surface_view);
    mVideoView.setVideoPath(path);
    mVideoView.setVideoQuality(MediaPlayer.VIDEOQUALITY_LOW);
    mVideoView.setMediaController(new MediaController(this));
    mVideoView.start();
            .... 
```

# python - 龙卷风中的 self.finish() 错误

> ID：15158343
> 
> 赞同：0
> 
> 时间：2013-03-01T12:56:27.040
> 
> 标签：python, handler, tornado, self

我有个问题。

我有这部分代码：

```
 if command in ['ON', 'OFF', 'TOGGLE']:
        ret['success'] = "The %s command has been succesfully sent!" % (command.upper())
        self.write(tornado.escape.json_encode(ret))
        self.finish()
    elif command == 'HOWMANY':
        opcodegroupr = "A0"
        opcoder = "85"
    elif command == 'IDENTIFY':
        opcodegroupr = "A0"
        opcoder = "81" 
```

我想完成命令打开、关闭、切换的处理程序。相反，对于命令 howmany 和 identify 我将为其他详细说明创建新变量。

但是，当我发送例如 on 命令时，我收到此错误：

```
File "./wsn.py", line 1024, in get
'&opcode_group=', opcodegroupr,
UnboundLocalError: local variable 'opcodegroupr' referenced before assignment 
```

就像 self.finish() 不会关闭处理程序。

哪里有问题？

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:29:56.233

只有这个部分代码我假设你错过了回报。 `self.finish()`关闭请求，但不从函数返回。

```
if command in ['ON', 'OFF', 'TOGGLE']:
    ret['success'] = "The %s command has been succesfully sent!" % (command.upper())
    self.write(tornado.escape.json_encode(ret))
    self.finish()
    return           # self.finish() finishes the request - doesn't return
else ... 
```

# ruby-on-rails - Using the basic heroku database plan with multiple apps

> ID：15158344
> 
> 赞同：0
> 
> 时间：2013-03-01T12:56:27.527
> 
> 标签：ruby-on-rails, heroku

This should be easy, but I have not been able to find a straightforward answer.

If I subscribe to Heroku's starter database basic plan (the $9/mo option, as of this writing) will I be able to deploy multiple Rails applications, each with its own db, and still pay $9/mo as long as the grand sum of rows across all dbs stays below 1M?

Thanks, Giuseppe

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:06:39.993

If you look at Heroku's Postgresql page and choose the Basic plan ([https://addons.heroku.com/heroku-postgresql](https://addons.heroku.com/heroku-postgresql)), you are prompted to select an app. The button next to it says "Add Basic for $9/mo". I've worked with paid database plans on Heroku before and it's always been "(monthly fee) per database per app" in my experience.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:08:38.753

If you have multiple apps and want each of those apps to have access to a basic database plan, you have to add a $9 basic plan add-on to each of those apps, even if the aggregate row count is lower than 1M.

# vbscript - 如何检查代码是否成功取消链接？

> ID：15158347
> 
> 赞同：0
> 
> 时间：2013-03-01T12:56:52.323
> 
> 标签：vbscript

oActiveWordDoc.Fields.Unlink

如何检查是否成功取消链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:08:29.013

来自 MSDN

> 将 Fields 集合中的所有字段替换为其最新结果。
> 
> 取消链接字段时，当前结果将转换为文本或图形，并且无法再自动更新。请注意，某些字段（例如 XE（索引条目）字段和 SEQ（序列）字段）无法取消链接。

所以

```
With ActiveDocument.Sections(1).Range.Fields 
 .Unlink
End With

ActiveDocument.Sections(1).Range.Fields(1) = "whatever"
ActiveDocument.Sections(1).Range.Fields(1).update 
```

应该给出错误

# javascript - 是否有可能只有具有价值的对象？

> ID：15158349
> 
> 赞同：0
> 
> 时间：2013-03-01T12:56:57.183
> 
> 标签：javascript, node.js, node-mongodb-native

我有这段代码：

```
db.collection('coders', function(err, collection) {
        collection.find(toFind).toArray(function(err, items) {
            res.send(items);
        }); 
```

where `toFind`is something like `{"position":2,"$or":[{"position":{"$lt":20}},{"name":"whatever"}]}` It is a String，所以前面的代码不会执行，因为它需要一个对象。我已经知道，我可以从 String 创建对象

```
var obj={}
obj[key] = {value} 
```

但是我怎样才能创建一个没有 key 的对象呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:27:56.053

要将`toFind`字符串转换为可以传入的对象，请`find`使用[`JSON.parse`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)：

```
toFind = JSON.parse(toFind); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:58:50.703

JavaScript 中的一切都是对象。但是，您显然想要的是一个简单的变量：

```
obj[key] = value; 
```

您在上面发布的对象将完全像这样定义：

```
var obj = {
    "position": 2,
    "$or": [{
        "position": {
            "$lt": 20
        }
    }, {
        "name": "whatever"
    }]
}; 
```

# ruby - Sublime Text 2 Build System 自定义 rake 任务

> ID：15158352
> 
> 赞同：1
> 
> 时间：2013-03-01T12:57:07.613
> 
> 标签：ruby, github, rake, sublimetext2, build-script

我正在使用 rake 和 git_repositoy gem 将我的 rails 应用程序部署到 github。我使用的 rake 任务如下所示：

```
task :test_deploy, :message do | t, args|
    @git = GitRepository.new
    Rake::Task[:test].invoke
    commit(args.message,@git)
    Rake::Task[:push_to_origin].invoke
    Rake::Task[:deploy_to_heroku].invoke
end

task :push_to_origin do
    @git.push
end

def commit(message,git_repository)
        if(git_repository.has_untracked?)
                git_repository.add
        end
        if(git_repository.has_changes?)
                git_repository.commit(:message => message, :options => "-a")
        end
end 
```

因此，当我调用 rake 时，我会按照以下方式进行操作`rake test_deploy['my commit message']`。我希望能够通过一个崇高的构建任务来做到这一点，该任务会提示我输入一条消息并执行它。有谁知道要升华给我一个构建任务的消息框提示？

谢谢，

本

# google-app-engine - 谷歌应用引擎：将模型名称作为参数传递给函数

> ID：15158355
> 
> 赞同：0
> 
> 时间：2013-03-01T12:57:16.937
> 
> 标签：google-app-engine, memcached

为了减少数据存储区的读写，人们建议使用 memcache：

写：

```
entity.put()
memcache.set(entity.key.id(), entity) 
```

读：

```
# id known:
entity = memcache.get(id)
if entity is None:
    entity = Model.get_by_id(id)
    memcache.set(id, entity) 
```

我想将上述实现为两个功能：

```
def memPut(entity):
    entity.put()
    memcache.set(entity.key.id(), entity)

def memGet(Model, id):
    entity = memcache.get(id)
    if entity is None:
        entity = Model.get_by_id(id)
        memcache.set(id, entity) 
```

`memGet`只是假设。我的问题：1）如何将模型的名称作为参数传递给函数？2) 如果创建实体时没有指定 id，GAE 将使用整数作为其 id。如果有两个实体（当然来自不同的模型）具有相同的 id 怎么办？memcache.get(id) 会起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:21:47.483

如果您希望所有实体类型都可以使用相同的功能，一个简单的选择是从父模型继承所有模型，该模型实现以下类方法：

```
class ParentClass(db.Model):
    @classmethod
    def memPut(cls, entity):
        entity.put()
        memcache.set(entity.key().id(), entity)

    @classmethod
    def memGet(cls, id):
        entity = memcache.get(id)
        if entity is None:
             entity = cls.get_by_id(id)
             memcache.set(id, entity)
        return entity 
```

然后，在您的处理程序中：

```
 MyModel.memPut(entity)
 entity = MyModel.memGet(id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T13:24:25.720

为什么不使用 ndb.Model 而不是 db.Model？

[https://developers.google.com/appengine/docs/python/ndb/](https://developers.google.com/appengine/docs/python/ndb/)

NDB API 在无模式对象数据存储中提供持久存储。它支持自动缓存、复杂查询和原子事务。NDB 非常适合存储结构化数据记录。它提供了 App Engine Datastore API 的替代方案。NDB 有一些 Datastore API 缺乏的特性：

StructuredProperty 类，允许实体具有嵌套结构 集成自动缓存，通常通过上下文缓存和 Memcache 异步 API 提供快速（且廉价）读取，允许并发操作（如果您不需要，还可以使用“同步”API那）

# php - 立即显示 cookie

> ID：15158356
> 
> 赞同：0
> 
> 时间：2013-03-01T12:57:19.193
> 
> 标签：php, cookies

我正在创建一个 php 网站，我想在其中创建一个可更改的背景颜色 .. 所以我创建了一个`$_GET['color']`变量 .. 如果用户单击红色，则 url 将`http://localhost/?color=red`设置一个具有所选颜色的 cookie，如果用户单击例如黄色浏览器需要刷新一次以获取新`$_COOKIE['color']`的以更改背景颜色.. 我希望在用户单击黄色链接时立即获取 $_COOKIE 变量以更改背景颜色而无需任何刷新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:00:49.287

您可以使用`css`动态更改页面的背景颜色。实际上，您甚至不需要为此联系服务器，cookie 是可以使用 javascript 设置的客户端功能。

编辑：这是一个小提琴证明：http: [//jsfiddle.net/JvrVA/](http://jsfiddle.net/JvrVA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:03:03.237

您想在不刷新页面的情况下更改背景？我建议为此使用 jQuery（或 javascript）。

只需确保在单击链接以更改背景时触发单击事件。如果您使用 jQuery，您可以尝试以下操作：

```
$('a.yellow').click(function(){
  $('body').css('background-color','yellow');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:04:14.527

使用 javascript 获取 cookie 值

```
 function getCookie(name)
   {
   var re = new RegExp(name + "=([^;]+)");
    var value = re.exec(document.cookie);
    return (value != null) ? unescape(value[1]) : null;
   }
   var color=getCookie("color");
  </script> 
```

# android - 大页面中的 jQuery Mobile

> ID：15158359
> 
> 赞同：-1
> 
> 时间：2013-03-01T12:57:24.933
> 
> 标签：android, jquery, iphone, jquery-mobile

我正在将旧版应用程序转换为对移动设备友好并使用 jQuery Mobile。到目前为止一切顺利，直到我发现浏览器在加载时挂起的这个大页面（2MB）。如果我从页面中删除 jQuery Mobile 引用，它会毫无问题地加载。

所以我猜当它用 jQuery Mobile 样式重写 DOM 时它会挂起。但大多数控件 (80%) 是“display:none;” 在页面加载时；有没有办法让 jQuery Mobilize 仅在页面加载时可见的控件？

无论如何，这是一个设计糟糕的页面，现在不能重写为更小的页面；因为它会影响很多其他地方，而且截止日期太激进了。

请就如何处理这个问题提出您的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:59:50.377

利用：

```
data-role="none" 
```

**[在我的其他ANSWER](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**中找到更多相关信息，只需搜索**“标记增强预防方法”**一章即可。您还将找到活生生**`jsFiddle`**的例子。

# c# - 从网页解析国际电话号码

> ID：15158364
> 
> 赞同：1
> 
> 时间：2013-03-01T12:57:39.850
> 
> 标签：c#, regex, html-agility-pack, phone-number

我正在使用 HtmlAgilityPack 来解析网页。加载文档后，我想从 HTML 中提取可能的电话号码。目前，我为此目的使用了一些正则表达式。我有以下代码检查网页中电话号码的匹配

```
 private static string phoneReg =
                @"[\+]{0,1}(\d{10,13}|[\(][\+]{0,1}\d{2,}[\13)]*\d{5,13}|\d{2,6}[\-]{1}\d{2,13}[\-]*\d{3,13})";
            private static Regex phoneRegex = new Regex(phoneReg, RegexOptions.IgnoreCase);
var phoneMatches = phoneRegex.Matches(doci.DocumentNode.InnerText); 
```

`doci`html 敏捷包的`HtmlDocument`抽象在哪里。问题是它无法匹配某些电话号码，例如`08450 211 211`和`+44 (0) 1246 733 000`。

是否有一个通用的正则表达式最适合抓取网站并且允许匹配大多数形式的国际电话号码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:10:38.100

您无法匹配这些电话号码（`08450 211 211`和`+44 (0) 1246 733 000`），因为您的正则表达式根本不匹配它们。

编写正则表达式时要做的第一件事就是**确定要匹配的模式**。

所以，我的建议是写下**不同电话号码格式的列表**，**更新您的问题**，然后我们将能够为您提供帮助。否则，我将始终创建一个您的正则表达式可能不匹配的新电话号码，或者它只会比您想要的更多匹配。

这是一个匹配上述电话号码的正则表达式：

```
(?:\+\d+\s+\(\d+\)\s+)?\d{4,5}\s+\d{3}\s+\d{3} 
```

**编辑：**

根据您的评论，我会使用这个正则表达式，然后删除那些不是电话号码的：

```
(?:\+\d+\s+\(\d+\)\s+)?[\d -]+ 
```

# perl - 无法创建 netlink 套接字 — 不支持协议

> ID：15158369
> 
> 赞同：1
> 
> 时间：2013-03-01T12:58:02.260
> 
> 标签：perl

我正在运行一个名为 INetSim ( [http://www.inetsim.org/](http://www.inetsim.org/) ) 的软件产品。它需要已经安装在我的 Ubuntu 12.04 系统上的各种 Perl 模块（包括[IPTables::IPv4::IPQueue ）。](http://search.cpan.org/perldoc?IPTables%3a%3aIPv4%3a%3aIPQueue)但是，我在运行它时遇到错误。我对 Perl 不熟悉，但我尝试过尽可能多的研究。

配置后运行应用程序时，出现以下错误。

```
redirect - failed! Error: Unable to create netlink socket: Protocol not supported
at lib/INetSim/Redirect.pm line 1229. 
```

/INetSim/Redirect.pm 的第 1229 行是：

```
$ipq = new IPTables::IPv4::IPQueue(copy_mode => IPQ_COPY_PACKET, copy_range => 1500)
       or die IPTables::IPv4::IPQueue->errstr; 
```

我假设 iptables 存在某种类型的问题并且此函数正在运行，但我对 Perl 或 iptables 还不够熟悉，甚至无法开始如何解决这个问题。我已经向开发人员发送了电子邮件，但正在等待回复。关于我可以做些什么来解决它的任何想法？

根据我正在写的一本关于 INetSim 的书，“当你启用重定向时，INetSim 会创建所有必要的 iptables 规则，并在适当的服务上重定向通过控制器（我的 Linux 机器）的所有连接”。运行程序后我已经完成`sudo iptables -L`了，它是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T14:25:39.043

我有同样的问题。经过一番挖掘，我发现 iNetSim 不适用于 Ubuntu 12.04 新内核。切换到旧的 3.2 内核后，iNetSim 工作正常。

```
Linux test 3.2.0-53-generic #81-Ubuntu SMP Thu Aug 22 21:01:03 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux 
```

# visual-studio-2010 - 我是否需要向导来重命名 Visual Studio 多项目模板中的命名空间和项目名称？

> ID：15158371
> 
> 赞同：1
> 
> 时间：2013-03-01T12:58:04.390
> 
> 标签：visual-studio-2010, templates, vsix, project-template, visual-studio-templates

我正在使用 VS 2010，我需要使用 VSIX 做一些多项目模板示例，不一定是向导，但它可以很好地满足我们的需要。

我的项目名称应该是：

*CompanyName.SolutionName.Accounting
CompanyName.SolutionName.Banking*

他们是

*CompanyName.App.Accounting
CompanyName.App.Banking*

我是否需要更改 .vstemplate 并放入

```
<Name>CompanyName.$safeprojectname$</Name> 
```

还是我需要在 .csproj 上进行一些更改？或两者？或者是其他东西？

我不想使用向导来做，我只想常用 VSIX。

提前谢谢，伙计们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:37:21.583

您必须修改项目的 .cproj 文件。

代替

```
<RootNamespace>$safeprojectname$</RootNamespace> 
```

和

```
<RootNamespace>CompanyName.$safeprojectname$.Banking</RootNamespace> 
```

# ios - @synchronized 指令的使用 - Objective-C 互斥锁 iOS

> ID：15158375
> 
> 赞同：3
> 
> 时间：2013-03-01T12:58:15.827
> 
> 标签：ios, objective-c, multithreading

在方法体上使用 @synchronized 指令

```
-(void)testSynchronizeMethod:(int)value
{
    @synchronized(value)
    {
        int value1 = 100; //sample line 1
        int value2 = 120; //sample line 2
        [self calledMethod];
    }
}

//case 1
-(void)calledMethod
{
    NSLog(@"is @synchronized directive applied to this method");
    NSLog(@"what happens if I enclose this method with @synchronized directive");
}

**or**
//case 2
-(void)calledMethod
{
    @synchronized(value){
        NSLog(@"is @synchronized directive applied to this method");
        NSLog(@"what happens if I enclose this method with @synchronized directive");
    }
} 
```

**问：**案例 2 是否围绕 '-(void) calledMethod' 创建了两个互斥锁？

**编辑**当我使用这种互斥锁时，我在主线程上收到一个信号 SIGINT。如果有人可以建议我出了什么问题，我将附上屏幕截图？![在此处输入图像描述](../Images/76bfca7be524f4a443f229248d1b94fe.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T13:04:12.880

是的，同时没有。`@synchronized`根据[docs](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html)是递归锁，这意味着创建了两个互斥锁，但*它们*不会导致死锁并且都被正确销毁。

然而，需要注意的一点是，这种令人敬畏的“递归”锁定非常昂贵，如果情况支持，可能应该使用另一种形式的互斥锁（NSLock、NSConditionLock 等）。

`@synchronized`是一个了不起的关键字，不要误会我的意思，但不要随便把它扔到不需要它的地方。

# php - 如何在 htaccess 中使用子目录 php 文件请求值

> ID：15158376
> 
> 赞同：-2
> 
> 时间：2013-03-01T12:58:19.477
> 
> 标签：php, .htaccess

我有类似 www.example.com/coupon/searchresult.php?txtCity=Chennai&txtArea=Annanagar 的路径。对于上述子文件夹的路径文件，htaccess 不起作用。这是我第一次使用 htaccess。所以请提供你的答案。提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:01:44.230

```
RewriteRule ^([a-zA-Z0-9_-]+)/coupon/([a-zA-Z0-9_-]+)/$  searchresult.php?txtcity=$1&txtarea=$2 
```

或者

```
RewriteRule ^([a-zA-Z0-9_-]+)/coupon/$  searchresult.php?txtcity=$1&txtarea=$2 
```

请使用这个并根据您的需要进行修改，它会帮助您确定！

# function - Matlab二阶导数

> ID：15158378
> 
> 赞同：0
> 
> 时间：2013-03-01T12:58:21.323
> 
> 标签：function, matlab, derivative

我按照[http://www.mit.edu/people/abbe/matlab/ode.html](http://www.mit.edu/people/abbe/matlab/ode.html)上的教程，准备了一个函数如下：

```
function dxy = diffxy(xy)
%
%split xy into variables in our equations
%
x = xy(1);
xdot = xy(2);
y = xy(3);
%
% define the derivatives of these variables from equations
%
xdot = xdot;
ydot = 3*x + 2*y + 5;
xdoubledot = 3 - ydot + 2*xdot;
%
%return the derivatives in dxy in the right order
%
dxy = [xdot; xdoubledot; ydot]
end 
```

当我使用它调用它时

```
[T, XY] = ode45('diffxy',0,10,[0 1 0]) 
```

我收到一个错误

```
??? Error using ==> diffxy
Too many input arguments. 
```

我也试过

> > XY= ode45(@diffxy,[0 10],[0;1;0])

有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:11:27.903

还没有阅读整个教程，但你不应该将你的函数定义为

```
function dxy = diffxy(t, xy) 
```

`t`时间向量在哪里

# asp.net-mvc - 如何获取授权用户的 Active Directory 组 ID

> ID：15158386
> 
> 赞同：1
> 
> 时间：2013-03-01T12:58:49.853
> 
> 标签：asp.net-mvc, c#-4.0, active-directory

我有一个 Web 应用程序，它使用`Authorize`具有指定角色的属性来限制对某些页面的访问：

```
[Authorize(Roles = "AD_group1, AD_group2")] 
```

`groupId`问题是 - 有什么方法可以为授权用户（无论是 int 还是 string）获得某种 Active Directory ？

**upd：** 基本思想是在数据库中存储一些表，其中包含每个组应该分开的模板。例如，用户`group1`可以有一些模板来快速回答典型问题，`group2`但没有任何模板，或者有一些其他模板

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:21:55.973

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
{
   // find a user
   UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");
   // or if you want the currently logged in user - you can also use:
   // UserPrincipal user = UserPrincipal.Current;

   if(user != null)
   {
       // get all groups the user is a member of
       foreach(GroupPrincipal group in user.GetAuthorizationGroups())
       {
           string distinguishedName = group.DistinguishedName;
           Guid groupGuid = group.Guid;
       }
   }
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

# jquery - microsoft jscript 运行时错误：函数未定义

> ID：15158391
> 
> 赞同：0
> 
> 时间：2013-03-01T12:59:12.063
> 
> 标签：jquery, asp.net, ajax

嗨，这里又是同样的问题 js 错误函数未定义（onForgotPasswordClick 未定义），我不知道它现在在简单的普通页面上（没有母版页），请帮助

```
 <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.js">     </script>

    <link href="Scripts/Style.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript">
            $("#main-page").on('pageinit', function (event) {
                function onForgotPasswordClick() {
                      WebApplication.Services.ForgetPassword.HelloWorld(onMethodSucceeded, onMethodFailed);
                }

                function onMethodSucceeded(results, args) {
                    alert(results);
                }

                function onMethodFailed(error) {
                }
            });

     </script>
</head>
<body>

    <form id="Form1"  runat="server">

    <asp:ScriptManager ID="ScriptManager" runat="server">

        <Services>
          <asp:ServiceReference Path="~/ForgetPassword.asmx" />
        </Services>
      </asp:ScriptManager>

    <div data-role="page" id="main-page">
        <div data-role="header" data-theme="b">
        <a href="/" class="ui-btn-right">Cancel</a>    <h1>
              Forgot Password</h1>
        </div>
        <div data-role="content" >

            <fieldset data-role="fieldcontain" class="ui-hide-label" >

                      <legend>   
Username:</legend>
       <input type="text" name="txtUsername" id="txtUsername"   value=""       placeholder="Username" />

                        <legend>
                            Email:</legend>
                        <input type="email" name="txtemail" id="txtemail" value="" placeholder="Email" />

                        <button type="submit"  id="btnLogin" data-theme="b" onclick="onForgotPasswordClick()">
                            Submit</button>
                   <hr />

            </fieldset>
               <div style="display:none" id="msg">

            </div>
        </div>

        <div data-role="footer" data-theme="b">
       <h4>&copy; 2013  All rights reserved.</h4>
        </div>
    </div>

    </form>

</body>
</html> 
```

这是类似的帖子... [microsoft jscript runtime error:test is undefined](https://stackoverflow.com/questions/15115364/microsoft-jscript-runtime-errortest-is-undefined/15118727#15118727) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:05:39.793

这是一个范围问题：

`onForgotPasswordClick`在运行的匿名函数内部定义`$("#main-page").on('pageinit')`，但在该函数外部调用（在 HTML 中）。这是不可能的。但是，没有什么能阻止您在该范围内调用它。在页面顶部的脚本元素中添加以下行：

```
$(document).on('click', '#btnLogin', onForgotPasswordClick); 
```

...然后从按钮中删除 onclick 处理程序：

```
<button type="submit"  id="btnLogin" data-theme="b">
    Submit</button> 
```

# google-api - 使用 JSONP 访问 Google 电子表格

> ID：15158393
> 
> 赞同：1
> 
> 时间：2013-03-01T12:59:15.323
> 
> 标签：google-api, jsonp

这个[要求](http://spreadsheets.google.com/feeds/cells/0AhySzEddwIC1dEtpWF9hQUhCWURZNEViUmpUeVgwdGc/1/public/basic?alt=json-in-script)。返回一个以此开头的文件：

```
gdata.io.handleScriptLoaded({"v... 
```

但是，当我提出这个[请求](http://spreadsheets.google.com/feeds/cells/0AhySzEddwIC1dEtpWF9hQUhCWURZNEViUmpUeVgwdGc/1/public/basic?alt=json-in-script&callback=processJSON)时。它返回一个以此开头的文件：

```
// API callbackprocessJSON({"version":"1.0"... 
```

文件开头的“//API回调”表示我的程序没有正确处理JSONP。

任何想法我做错了什么或为什么谷歌会按原样返回文件。

# c# - 如何为以编程方式添加的菜单占用垂直空间？

> ID：15158397
> 
> 赞同：5
> 
> 时间：2013-03-01T12:59:23.123
> 
> 标签：c#, winforms, layout

我在我的表单中添加了一个[MenuStrip](http://msdn.microsoft.com/library/system.windows.forms.menustrip.aspx)，我想在它下面添加其他控件，就像通常的 Point(0, 0) 是空白表单空间的左上角一样。在我将菜单添加到我的表单并添加更多控件后，它们会相互重叠。所以我想为菜单去掉一些客户端矩形的高度，并且一个按钮`Location = (0,0)`必须在*菜单*下方。

**我怎么做 ？**

如果我将 MainMenu 分配给表单的 Menu 属性，它会自动执行此操作，但我真的想要并且需要使用 MenuStrip。

* * *

**编辑：**这不起作用：

```
MenuStrip menu = new MenuStrip();
menu.Items.Add("File");
menu.AutoSize = false;
menu.Height = 50;
menu.Dock = DockStyle.Top;
MainMenuStrip = menu;
Controls.Add(menu);

Button b = new Button();
b.Text = "hello world";
b.SetBounds(0, 25, 128, 50);
Controls.Add(b); 
```

虽然这就像我希望它与 MenuStrip 一样工作：

```
Menu = new MainMenu();
Menu.MenuItems.Add("File");

Button b = new Button();
b.Text = "hello world";
b.SetBounds(0, 0, 128, 50);
Controls.Add(b); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:24:46.467

当 you 时`SetBounds(0, 25, 128, 50)`，您实际上设置`b.Top`为`25`（第二个参数）。为了设置相对于`menu`控件的上界，请使用：

```
b.SetBounds(0, menu.Bottom, 128, 50); 
```

**[更新]**

或者，您可以使用：

```
public partial class Form1 : Form
{
    private int menuStripHeight = 50;

    public Form1()
    {
        InitializeComponent();
        this.ControlAdded += Form1_ControlAdded;

    }

    private void Form1_Load(object sender, EventArgs e)
    {
        MenuStrip menu = new MenuStrip();
        menu.Items.Add("File");
        menu.AutoSize = false;
        menu.Height = menuStripHeight; ;
        menu.Dock = DockStyle.Top;
        MainMenuStrip = menu;
        Controls.Add(menu);

        Button b = new Button();
        b.Text = "hello world";

        // note that the position used is 0,0
        b.SetBounds(0, 0, 128, 50);

        Controls.Add(b);
    }

    void Form1_ControlAdded(object sender, ControlEventArgs e)
    {
        if (e.Control.GetType().FullName != "System.Windows.Forms.MenuStrip")
            e.Control.Top += menuStripHeight;
    }
} 
```

**[更新 2]**

或者你可以只使用一个`Panel`：

```
MenuStrip menu = new MenuStrip();
menu.Items.Add("File");
menu.AutoSize = false;
menu.Height = menuStripHeight; ;
menu.Dock = DockStyle.Top;
MainMenuStrip = menu;
Controls.Add(menu);

Panel p = new Panel();
p.SetBounds(0, menuStripHeight, this.Width, this.Height);
Controls.Add(p);

Button b = new Button();
b.Text = "hello world";
p.Controls.Add(b);
b.SetBounds(0, 0, 128, 50); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-10T18:37:06.237

在 MenuStrip 和 Panel 中使用 DockStyle.Top，但以相反的顺序添加它们。添加带有 Dock=Top 的控件会将最后一个控件放置在最靠近边框的位置，即位于所有其他控件的顶部。因此，无需求助于私有常量和事件处理程序：

```
MenuStrip menu = new MenuStrip() {
  AutoSize = false,
  Dock = DockStyle.Top
};
menu.Items.Add("File");

Panel p = new Panel(){
   Dock = DockStyle.Top
};

Controls.Add(p);
Controls.Add(menu);
MainMenuStrip = menu;

Button b = new Button(){
  Text = "hello world"
};
p.Controls.Add(b);
b.SetBounds(0, 0, 128, 50); 
```

# google-maps - 在地理上分配权力（人）的想法或工具

> ID：15158399
> 
> 赞同：1
> 
> 时间：2013-03-01T12:59:34.063
> 
> 标签：google-maps, geolocation, maps, geocoding, geospatial

我有很多有坐标的地方，当出现问题时，我会有人维护这些地方。我正在寻找一种方法来放置现场人员，以便他们尽可能接近大量站点。

这个想法类似于：我有 3000 个带有 lat&long 的站点。我想选择我有多少可用的人，并通过这些信息获得最佳坐标来分配他们。

我不是在寻找现有的工具（但如果存在，我可以寻找它），但我不知道如何从这样的东西开始（我可以使用 mysql、php、Gmaps，如果有的话，我会学习另一种语言/工具帮我）。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:50:54.797

在给定的一组位置上分布任意数量的人的问题是一个[优化](https://www.google.hr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCsQFjAA&url=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FDynamic_programming&ei=stcxUabfF8iG4gSI24FA&usg=AFQjCNHkBaimkGt6WXZrWjUdW_EtduGEZQ&sig2=B6F4Q4vHHKAptffEnz1aSA&bvm=bv.43148975,d.bGE)问题。更具体地说，它可以解释为[聚类](http://en.wikipedia.org/wiki/Cluster_analysis)问题。可以在[A Curious Animal](http://acuriousanimal.com/code/animatedCluster/)博客中找到一个用 JS 实现的漂亮集群示例。

正如您在上面的示例中所看到的，*聚类*意味着对相邻位置进行分组。换句话说，它是一种计算，可以在给定的一组位置上产生位置组（集群）的最佳分布。如果我们声明*一个集群*是*一个人*而不是*一个位置组*，我们就会得到您的问题陈述。

由于人数是您的输入，我建议使用 k-means 聚类算法（[简短说明](http://www.improvedoutcomes.com/docs/WebSiteDocs/Clustering/K-Means_Clustering_Overview.htm)，[可用软件列表 @wikipedia](http://en.wikipedia.org/wiki/K-means_algorithm#Software)）。

编辑：

通常在使用优化算法时有两个注意事项：

*   所选算法旨在解决您的（类别）问题
*   某些输入参数组合可能会导致奇怪的、不可接受的结果

第一点需要一些算法知识，而第二点是试错的问题，正如您所注意到的那样。此外，输入的细微差异会导致输出的巨大差异。

上面的链接指出，k-means 算法“不适用于[非球状集群](http://www.improvedoutcomes.com/docs/WebSiteDocs/Glossary/Glossary_of_Terms_Acronym_List.htm#N_Index)”。

从他的对立面开始会更容易——一个[球状星团](http://www.improvedoutcomes.com/docs/WebSiteDocs/Glossary/Glossary_of_Terms_Acronym_List.htm#G_Index)，它被定义为：“更精确的数学术语是[凸](http://en.wikipedia.org/wiki/Convex_set)的，这大致意味着你可以在两个星团成员之间画的任何线都停留在星团的边界内。”：

![凸集](../Images/de975431fbd0a4300c397d26cd38078f.png)

非球状簇（非凸点集）如下所示：

![非凸集](../Images/14a69ab62332aa847834d620e53fc191.png)

可能您的“薄卵形簇”是非凸的？

另一个重要特征（也在上面的链接中说明）是 k-means 是一种[非确定性](http://en.wikipedia.org/wiki/Nondeterministic_algorithm)算法，这意味着它可能（并且很可能会）在多次运行时为相同的输入产生不同的输出。

发生这种情况是因为该算法随机对集群进行初始分区 - 并且最终输出对该初始分区高度敏感。根据使用的实现，您可能在此处有一些修改空间。

如果这不能带来令人满意的结果，那么剩下的唯一一件事就是尝试另一种算法（因为已经给出了位置）。我会建议我在商业产品中使用的[QT 聚类算法。](https://sites.google.com/site/dataclusteringalgorithms/quality-threshold-clustering-algorithm-1)它是一种确定性聚类算法，将最小聚类大小和阈值距离 - 点到聚类中心的距离作为输入。

但是，使用这种方法，您将需要修改算法本身。当“不能再形成具有最小集群大小的集群”时，该算法通常会停止。您需要修改算法以在达到所需的集群数量时停止。最小集群大小值应该可以为 1，但您可能希望尝试不同的阈值距离值。

这是我偶然发现的一些[C# 代码示例。](https://rtmath.net/help/html/1f8505a3-3f68-4b17-9fe8-201208d753fc.htm)希望对您有所帮助。

# macos - 无法为 Mac OS X 加载本机 hadoop 库

> ID：15158405
> 
> 赞同：14
> 
> 时间：2013-03-01T12:59:52.513
> 
> 标签：macos, hadoop, static-libraries

我在 Mac OS X 中使用 Hadoop。我想我正确安装了 Hadoop。当我尝试运行示例 WordCount 问题时，出现此错误：

> INFO util.NativeCodeLoader - 无法为您的平台加载 native-hadoop 库...在适用的情况下使用内置 java 类

通过谷歌搜索这个错误，我了解到 Mac OS 不支持 Hadoop Native Libraries。

有没有办法使用一些第三方软件为 Mac 加载 Native Hadoop Library？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T07:19:18.927

使用这样的参数运行示例**-Djava.library.path** ={YOUR_HADOOP_HOME}/lib/native/Linux-amd64-64/ 可能会在 Mac 在本机目录下具有本机内容的情况下解决问题

# extjs - Extjs分页工具栏：无法设置开始

> ID：15158406
> 
> 赞同：0
> 
> 时间：2013-03-01T12:59:59.067
> 
> 标签：extjs

我在使用分页工具栏时遇到问题。我想为用户提供设置每页结果数（限制）的选项。我有一个下拉菜单。我已将页面大小初始化为 20。当我从下拉列表中设置限制（例如 50）时，假设我得到 90 个结果，因此在第一页上它从 1-50 个结果中正确显示，但在下一页上显示结果从 21-70 而不是 51-90。所以我无法根据下拉设置的限制重置我的页面大小。开始总是拿起初始化的页面大小。有什么建议么？我附上我的代码...

```
linkCheckerUI = {

pageSize: 20,
    test:null,

    getPanel: function(config) {

        var fields = ["path","jcrObject","type","URL","response"];
        var rootpath = null;
        var term= null;
        var end=null;
        var internal_links=null;
        var external_links=null;
        var smart_links=null;
        var videoid_links=null;
        this.store = new CQ.Ext.data.Store({

            proxy: new CQ.Ext.data.HttpProxy({

                            url: '/bin/linkchecker',
                            method: 'GET'
                            }),
               reader: new CQ.Ext.data.JsonReader({
                                "root": "data",
                                "fields": fields,
                                "idProperty":'jcrObject',
                                 totalProperty: 'results'

                            }), 
                 baseParams: { searchterm: term,startpath: rootpath, endpath: end,
                      internal: internal_links,external: external_links,smart: smart_links,videoid: videoid_links}

            });
        test=this.store;

        this.store.on('beforeload',function(store, operation,eOpts){

        limit= CQ.Ext.getCmp('limit').getRawValue();
        limit = (limit=="") ? 15 : limit;
        pageSize = limit;
        start=operation.params.start;
        start = (start==null) ? 0 : start;
        searchterm = CQ.Ext.getCmp('searchterm').getValue();
        startpath = CQ.Ext.getCmp('startpath').getValue();
        endpath = CQ.Ext.getCmp('endpath').getValue();
        internal = CQ.Ext.getCmp('internal').getValue();
        external = CQ.Ext.getCmp('external').getValue();
        smart = CQ.Ext.getCmp('smart').getValue();
        videoid = CQ.Ext.getCmp('videoid').getValue();
        ebroken = CQ.Ext.getCmp('excludebroken').getValue();
        ehealthy= CQ.Ext.getCmp('excludehealthy').getValue();
        alert(start);
              operation.params={
                      searchterm: searchterm ,startpath: startpath , endpath: endpath ,
                      internal: internal ,external: external,smart: smart,videoid: videoid,start:start,
                      limit:limit,ebroken: ebroken,ehealthy: ehealthy
            };},this);

        this.loadGrid();
        this.loadForm();

        // create main panel
        this.panel = new CQ.Ext.Panel({
            region: 'center',
            layout: 'border',
            margins: '5 5 5 5',
           height:'100%',
            border: false,
            items: [this.form,this.grid]
        });

        // load grid data
        this.reload();

        // return outer panel
        return this.panel;
    },

    /**
     * Load form
     */
    loadForm: function() {
        var searchterm = null;

        this.form = new CQ.Ext.form.FormPanel({
            region: "north",

            title: "Link Control Center",
            width: 220,
            top: 50,
            height:350,
            collapsible: false,
            split: true,
            parent: this,
            padding:'10px',

            items: [
                    {
                        xtype: 'textfield',
                        name: 'searchterm',
                        id: 'searchterm',
                        fieldLabel:'Search Term',
                        emptyText:'Please enter a search term',
                        width: 583
                    },
                    {
                        xtype: 'pathfield',
                        name: 'startpath',
                        id: 'startpath',
                        fieldLabel: 'Start Path',
                        allowBlank: false,
                        width: 600
                    },
                    {
                        xtype: 'pathfield',
                        name: 'endpath',
                        id: 'endpath',
                        fieldLabel: 'End Path',
                        width: 600

                    },
                    {
                        xtype: 'combo',
                        name: 'limit',
                        id:'limit',
                        fieldLabel: 'Result Display',
                        emptyText:'Select # results per page',
                        typeAhead: true,
                        mode: 'local',
                        triggerAction: 'all',
                        store: [['val1','15'],['val2','100'],['val3','500'],['val4','1000'],['val5','All']]

                    },
                    {
                        fieldLabel: 'Link Type',
                        xtype: 'checkbox',
                        boxLabel: 'Internal',
                        checked   : true,
                        name: 'internal',
                        id:'internal'

                    },
                    {
                        xtype: 'checkbox',
                        boxLabel: 'External',
                        checked   : true,
                        name: 'external',
                        id:'external'

                    },
                    {
                        xtype: 'checkbox',
                        boxLabel: 'SMART',
                        checked   : true,
                        name: 'smart',    
                        id:'smart'

                    },
                    {
                        xtype: 'checkbox',
                        boxLabel: 'Video (Asset ID)',
                        checked   : true,
                        name: 'videoid',                        
                        id: 'videoid'
                    },
                    {
                        fieldLabel: 'Exclude',
                        xtype: 'checkbox',
                        boxLabel: 'Exclude broken links',
                        name: 'excludebroken',
                        id:'excludebroken'
                    },
                    {
                        xtype: 'checkbox',
                        boxLabel: 'Exclude healthy links',
                        name: 'excludehealthy',
                        id: 'excludehealthy'

                    }

                ],

                buttons:[{
                    text: 'Submit',
                    handler: function() {
                    searchterm = CQ.Ext.getCmp('searchterm').getValue();
                    startpath = CQ.Ext.getCmp('startpath').getValue();
                    endpath = CQ.Ext.getCmp('endpath').getValue();
                    internal = CQ.Ext.getCmp('internal').getValue();
                    external = CQ.Ext.getCmp('external').getValue();
                    smart = CQ.Ext.getCmp('smart').getValue();
                    videoid = CQ.Ext.getCmp('videoid').getValue();
                    limit = CQ.Ext.getCmp('limit').getRawValue();
                    pageSize=15; 
                    alert("2");
                   test.clearFilter(false);
                   if(startpath){

                       if (endpath.substring(0, startpath.length) == startpath || endpath=="")
                       {
                           test.load();
                       } 
                       else
                       {
                           alert('Specified End Path is not within Start Path node!\nSelect an End Path within and below Start Path hierarchy node');

                       }
                   }

                   else{
                       alert('Fill in all required fields before submitting the query');
                   }           

                }  
                        }

                ]

        });         
    },

    /**
     * Load grid
     */
    loadGrid: function() {

    // export to CSV button
    this.exportCSVButton = new CQ.Ext.Button({iconCls: 'icon-csv', text: 'Export as CSV'});
    this.exportCSVButton.setHandler(function() {
                    searchterm = CQ.Ext.getCmp('searchterm').getValue();
                    startpath = CQ.Ext.getCmp('startpath').getValue();
                    endpath = CQ.Ext.getCmp('endpath').getValue();
                    internal = CQ.Ext.getCmp('internal').getValue();
                    external = CQ.Ext.getCmp('external').getValue();
                    smart = CQ.Ext.getCmp('smart').getValue();
                    videoid = CQ.Ext.getCmp('videoid').getValue();
                    ebroken = CQ.Ext.getCmp('excludebroken').getValue();
                    ehealthy= CQ.Ext.getCmp('excludehealthy').getValue();

                   var url = "/bin/linkchecker.csv?searchterm="+searchterm +"&startpath="+startpath +"&endpath="+endpath+ "&internal="+internal +"&external="+external+
                   "&smart="+smart+"&videoid"+videoid+"&ebroken="+ebroken +"&ehealthy="+ehealthy+"&start=0&limit=-1" ;

                    window.location=(url);
    }, this);

    var body = CQ.Ext.getBody();
     this.grid = new CQ.Ext.grid.GridPanel({
        region: "center",
        border:false,
        store: this.store,
        //parent:this,
        loadMask: new CQ.Ext.LoadMask(body, {msg: 'Loading please wait...'}),
        tbar: ['Result List',
               '->', this.exportCSVButton 
           ],

           columns: [
                     {header: "Path", width: 80,dataIndex: 'path', sortable: true},                                 
                     {header: "JCR Object Node", width: 80,dataIndex: 'jcrObject', sortable: true},
                     {header: "Type", width: 15, dataIndex: 'type', sortable: true},
                     {header: "URL", width: 70, dataIndex: 'URL', sortable: true},
                     {header: "Error Type", width:15, dataIndex: 'response', sortable: true, 
                                            renderer: function(value){ if (value =='200')return '<span style="color:green;">'+value+'</span>'; else return '<span style="color:red;">'+value+'</span>';}}
                     ],
                     renderTo:this.grid,
           stripeRows: true,         
        viewConfig: {
            forceFit: true
        },
        bbar: new CQ.Ext.PagingToolbar({
            store: this.store,
            pageSize:this.pageSize,
            displayInfo: true

        }),
        sm: new CQ.Ext.grid.RowSelectionModel({singleSelect:true}),
        iconCls:'icon-grid'
    });
     alert("3");
        this.grid.loadMask.show();

    },

    /**
     * Reload grid data (reset to first page)
     */
    reload: function() {
        alert("4");
       this.store.load({ baseParams: {start: 0, limit: this.pageSize}});
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:10:50.047

尝试在商店中使用 extraParams。

```
this.store.getProxy().extraParams = { start: 0, limit: this.pageSize};
this.store.load(); 
```

# java - 如何将 MySQL 持久性管理器与 Jackrabbit 独立使用

> ID：15158414
> 
> 赞同：0
> 
> 时间：2013-03-01T13:00:19.423
> 
> 标签：java, jackrabbit

我已经使用默认配置成功使用了 Apache Jackrabbit 2.4.3 和现在的 2.6.0（两种情况下的独立服务器），因此存储库存储在文件系统上。

我怎样才能让它连接到 MySQL 后端呢？我不需要担心迁移，只需将其设置为全新安装即可。

尝试以下步骤后，Jackrabbit 无法正确启动或填充数据库中的 DATASTORE 表，我在日志中发现此错误：

```
ERROR [main] RepositoryImpl.java:366           failed to start Repository: Cannot instantiate persistence manager org.apache.jackrabbit.core.persistence.pool.MySqlPersistenceManager
    javax.jcr.RepositoryException: Cannot instantiate persistence manager org.apache.jackrabbit.core.persistence.pool.MySqlPersistenceManager
    [... oodles of backtrace cut ...] 
```

[编辑：这是完整的回溯]

```
2013-03-04 10:59:27.526 WARN  [main] Slf4jLog.java:89                  unavailable
javax.jcr.RepositoryException: Cannot instantiate persistence manager org.apache.jackrabbit.core.persistence.pool.MySqlPersistenceManager
        at org.apache.jackrabbit.core.RepositoryImpl.createPersistenceManager(RepositoryImpl.java:1353) ~[jackrabbit-standalone-2.6.0.jar:na]
        at org.apache.jackrabbit.core.RepositoryImpl.createVersionManager(RepositoryImpl.java:486) ~[jackrabbit-standalone-2.6.0.jar:na]
        at org.apache.jackrabbit.core.RepositoryImpl.<init>(RepositoryImpl.java:311) ~[jackrabbit-standalone-2.6.0.jar:na]
        at org.apache.jackrabbit.core.RepositoryImpl.create(RepositoryImpl.java:589) ~[jackrabbit-standalone-2.6.0.jar:na]
        at org.apache.jackrabbit.core.RepositoryContext.create(RepositoryContext.java:149) ~[jackrabbit-standalone-2.6.0.jar:na]
        at org.apache.jackrabbit.servlet.jackrabbit.JackrabbitRepositoryServlet.init(JackrabbitRepositoryServlet.java:109) ~[jackrabbit-standalone-2.6.0.jar:na]
        at javax.servlet.GenericServlet.init(GenericServlet.java:241) ~[jackrabbit-standalone-2.6.0.jar:na]
        at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440) [jackrabbit-standalone-2.6.0.jar:na]
        at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263) [jackrabbit-standalone-2.6.0.jar:na]
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) [jackrabbit-standalone-2.6.0.jar:na]
        at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685) [jackrabbit-standalone-2.6.0.jar:na]
        at org.mortbay.jetty.servlet.Context.startContext(Context.java:140) [jackrabbit-standalone-2.6.0.jar:na]
        at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250) [jackrabbit-standalone-2.6.0.jar:na]
        at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517) [jackrabbit-standalone-2.6.0.jar:na]
        at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467) [jackrabbit-standalone-2.6.0.jar:na]
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) [jackrabbit-standalone-2.6.0.jar:na]
        at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) [jackrabbit-standalone-2.6.0.jar:na]
        at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115) [jackrabbit-standalone-2.6.0.jar:na]
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) [jackrabbit-standalone-2.6.0.jar:na]
        at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) [jackrabbit-standalone-2.6.0.jar:na]
        at org.mortbay.jetty.Server.doStart(Server.java:224) [jackrabbit-standalone-2.6.0.jar:na]
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) [jackrabbit-standalone-2.6.0.jar:na]
        at org.apache.jackrabbit.standalone.Main.run(Main.java:173) [jackrabbit-standalone-2.6.0.jar:na]
        at org.apache.jackrabbit.standalone.Main.main(Main.java:60) [jackrabbit-standalone-2.6.0.jar:na]
Caused by: javax.jcr.RepositoryException: Could not load JDBC driver class org.gjt.mm.mysql.Driver
        at org.apache.jackrabbit.core.util.db.ConnectionFactory.getDriverClass(ConnectionFactory.java:265) ~[jackrabbit-standalone-2.6.0.jar:na]
        at org.apache.jackrabbit.core.util.db.ConnectionFactory.createDataSource(ConnectionFactory.java:233) ~[jackrabbit-standalone-2.6.0.jar:na]
        at org.apache.jackrabbit.core.util.db.ConnectionFactory.getDataSource(ConnectionFactory.java:169) ~[jackrabbit-standalone-2.6.0.jar:na]
        at org.apache.jackrabbit.core.persistence.pool.BundleDbPersistenceManager.getDataSource(BundleDbPersistenceManager.java:569) ~[jackrabbit-standalone-2.6.0.jar:na]
        at org.apache.jackrabbit.core.persistence.pool.BundleDbPersistenceManager.init(BundleDbPersistenceManager.java:537) ~[jackrabbit-standalone-2.6.0.jar:na]
        at org.apache.jackrabbit.core.persistence.pool.MySqlPersistenceManager.init(MySqlPersistenceManager.java:51) ~[jackrabbit-standalone-2.6.0.jar:na]
        at org.apache.jackrabbit.core.RepositoryImpl.createPersistenceManager(RepositoryImpl.java:1349) ~[jackrabbit-standalone-2.6.0.jar:na]
        ... 23 common frames omitted
Caused by: java.lang.ClassNotFoundException: org.gjt.mm.mysql.Driver
        at java.net.URLClassLoader$1.run(URLClassLoader.java:217) ~[na:1.6.0_27]
        at java.security.AccessController.doPrivileged(Native Method) ~[na:1.6.0_27]
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205) ~[na:1.6.0_27]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:321) ~[na:1.6.0_27]
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294) ~[na:1.6.0_27]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:266) ~[na:1.6.0_27]
        at java.lang.Class.forName0(Native Method) ~[na:1.6.0_27]
        at java.lang.Class.forName(Class.java:188) ~[na:1.6.0_27]
        at org.apache.jackrabbit.core.util.db.ConnectionFactory.getDriverClass(ConnectionFactory.java:260) ~[jackrabbit-standalone-2.6.0.jar:na]
        ... 29 common frames omitted 
```

到目前为止我所做的：

我已经创建了 Jackrabbit 数据库/用户，我可以毫无问题地连接：

```
mysql -D jackrabbit -u jackrabbit -h localhost -pjackrabbit 
```

我从一个干净的石板开始（空 /var/jackrabbit 目录），除了配置文件来自这里：[https ://raw.github.com/wiki/jackalope/jackalope/files/repository.xml](https://raw.github.com/wiki/jackalope/jackalope/files/repository.xml)

这是我正在使用的启动脚本：[https ://github.com/sixty-nine/Jackrabbit-startup-script](https://github.com/sixty-nine/Jackrabbit-startup-script)

这是运行的java进程：

```
java -XX:MaxPermSize=128m -Xmx512M -Xms128M -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=1111 -Dcom.sun.management.jmxremote.authenticate=true -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=/opt/jackrabbit/startup/jmx.user -Dcom.sun.management.jmxremote.access.file=/opt/jackrabbit/startup/jmx.role -jar /opt/jackrabbit/jackrabbit-standalone-2.6.0.jar -h 127.0.0.1 -p 8080 
```

我认为我还不够重要，但我使用的是 MySQL 5.5.28-1。

我在 2.4.3 和 2.6.0 中都遇到了上述问题。

还：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.5) (6b24-1.11.5-1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

另外，我随后在 Debian 上安装了 MySQL JDBC 库：

```
apt-get install libmysql-java 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:52:14.167

`MySqlPersistenceManager`尝试加载`org.gjt.mm.mysql.Driver`非常旧的驱动程序类。尝试使用更新的驱动程序类，`com.mysql.jdbc.Driver`而不是类。为此，您需要在`repository.xml`和所有`workspace.xml`文件中配置持久性管理器，如下所示：

```
<PersistenceManager ...>
    ...
    <param name="driver" value="com.mysql.jdbc.Driver"/>
</PersistenceManager> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T15:38:51.840

为了使用 Apache Jackrabbit-standalone 加载 MySQL 驱动程序。您将需要更新`jackrabbit-stabndalone-x.x.x.jar`MANIFEST.MF 中的内容。

只需在文件底部添加一个 Class-Path 语句，例如：

> 类路径：lib/mysql-connector-java-5.1.25-bin.jar

我和你有同样的问题，这是我可以让 MySQL 驱动程序类被识别的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:42:49.357

回答我自己的问题，虽然它没有*直接*回答：

我没有尝试使用jackrabbit-standalone版本，而是按照此处的说明成功地让它在Tomcat下运行：

[https://github.com/jackalope/jackalope/wiki/Running-jackrabbit-in-tomcat-with-mysql](https://github.com/jackalope/jackalope/wiki/Running-jackrabbit-in-tomcat-with-mysql)

这给了我我需要的东西；一个连接到 MySQL 数据存储的工作 Jackrabbit 实例。尽管这对遇到此问题且特别需要独立使用 Jackrabbit 的任何人都没有帮助，但我想说在 Tomcat 下设置它对我来说更容易，因此值得考虑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-07T14:40:50.850

请进行以下活动。

1.  解压独立服务器 jar（在我的例子中是：jackrabbit-standalone-2.8.3）。你会看到很多文件夹。其中你会发现两个文件夹。1.com 2.组织。

2.  解压 mysql-connector-java-5.1.30-bin。再次你会发现上面提到的两个文件夹。进入两个文件夹并复制 git(org) 和 mysql(com)

3.  分别粘贴到步骤 1 的文件夹中。并重新启动独立服务器。

问候， Nitesh

# scala - Scala Map += 操作

> ID：15158423
> 
> 赞同：1
> 
> 时间：2013-03-01T13:00:57.180
> 
> 标签：scala

假设我有下一张地图：

```
import scala.collection.mutable._
val countries = Map[String, String](
    ("Paris", "France"), 
    ("Washington", "USA"),
    ("London", "England")
) 
```

然后我尝试向该映射添加一些值（我从命令行参数获取值）：

```
countries += (args(0), args(1)) 
```

但是上面的代码没有编译说

```
found   : String
required: (String, String) 
```

当我将其更改为

```
countries += ((args(0), args(1))) 
```

或者

```
countries += (args(0) -> args(1)) 
```

然后它编译成功。为什么编译器在第一种情况下无法识别元组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T13:05:46.877

从[Scaladoc](http://www.scala-lang.org/api/current/index.html#scala.collection.mutable.Map)：

> def +=(elem1: (A, B), elem2: (A, B), elems: (A, B)*): Map.this.type 向这个可收缩集合添加两个或更多元素。

换句话说，有一个重载版本`+=`可以让您一次添加多个元素。您的示例看起来像是在尝试这样做（对多个参数使用常规约定），但它随后（正确地）抱怨每个参数都是错误的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:05:03.827

编译器认为您传递了两个参数，并将您的第一个括号解释为参数列表的分隔符。

# c++ - 使用 tr2::direct_bases 获取结果的第 n 个元素

> ID：15158458
> 
> 赞同：2
> 
> 时间：2013-03-01T13:03:00.300
> 
> 标签：c++, c++11, c++-tr2

```
struct T1 {};
struct T2: T1 {};

typedef tr2::direct_bases<T2>::type NEW_TYPE ; 
```

应该将我的*东西*返回到基本类型。如何获取此 __reflection_typelist<...> 的第 n 个元素。我为反射列表搜索类似 tuple_element 的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:17:06.463

您可以使用这个简单的元函数将类型列表转换为`std::tuple`：

```
#include <tr2/type_traits>
#include <tuple>

template<typename T>
struct dbc_as_tuple { };

template<typename... Ts>
struct dbc_as_tuple<std::tr2::__reflection_typelist<Ts...>>
{
    typedef std::tuple<Ts...> type;
}; 
```

此时，您可以像通常使用元组一样使用它。例如，您可以通过以下方式检索类型列表的元素：

```
struct A {};
struct B {};
struct C : A, B {};

int main()
{
    using namespace std;

    using direct_base_classes = dbc_as_tuple<tr2::direct_bases<C>::type>::type;

    using first = tuple_element<0, direct_base_classes>::type;
    using second = tuple_element<1, direct_base_classes>::type;

    static_assert(is_same<first, A>::value, "Error!");   // Will not fire
    static_assert(is_same<second, B>::value, "Error!");  // Will not fire
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:08:59.740

自己写？

```
template <typename R, unsigned int N> struct get;

template <typename T, typename ...Args, unsigned int N>
struct get<std::tr2::__reflection_typelist<T, Args...>, N>
{
    typedef typename get<std::tr2::__reflection_typelist<Args...>, N - 1>::type type;
};

template <typename T, typename ...Args>
struct get<std::tr2::__reflection_typelist<T, Args...>, 0>
{
    typedef T type;
}; 
```

甚至使用`first`/ `next`：

```
template <typename R, unsigned int N>
struct get
{
    typedef typename get<typename R::next::type, N - 1>::type type;
};

template <typename R>
struct get<R, 0>
{
    typedef typename R::first::type type;
}; 
```

在这一点上，我想说[源代码](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/libstdc++/api/a01526_source.html)是最好的文档。

# jquery - Jquery .click(function() { }); 不适用于 IE9

> ID：15158462
> 
> 赞同：0
> 
> 时间：2013-03-01T13:03:20.910
> 
> 标签：jquery, internet-explorer, click

```
$(".down").click(function() { 
    $("#sideRight")
       .animate({top: "305"}, 350);
    }); 
```

不能在 IE9（和更早版本的 IE）上工作 如何修复？

[http://goo.gl/5b82w](http://goo.gl/5b82w)（顶部菜单上有 div class="down"。单击此 div 必须为右栏设置动画）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:06:01.033

请测试此代码

```
$(function(){
   $('.down').on("click", function (e) { 
     $("#sideRight")
       .animate({top: "305"}, 350);
   });
}); 
```

# entity-framework - 实体框架。具有匿名类型和投影的 SelectMany

> ID：15158465
> 
> 赞同：0
> 
> 时间：2013-03-01T13:03:26.753
> 
> 标签：entity-framework

我有一个带有多个包的横幅。每个包有多个文件。

我有以下查询：

```
 List<BannerModel> models = context.Banners
    .Select(x => x.Packs
      .SelectMany(p => p.Files, (p, f) => new {
        Id = p.Id,
        Flag = p.Flag,
        File = new { Id = f.Id, Flag = f.Flag, Key = f.Key, Mime = f.Mime }
      })
      .Where(a => a.File.Flag == "Img_200")
      .Select(a => new BannerModel { PackId = a.Id, ImageKey = a.File.Key })
    ).ToList(); 
```

1) 我在“ToList()”上得到错误。无法将类型“System.Collections.Generic.List>”隐式转换为“System.Collections.Generic.List”

2）然后我删除了 ToList 并添加了“var models = ...”

我知道有 10 条记录，其中 5 条满足条件：

```
.Where(a => a.File.Flag == "Img_200") 
```

奇怪的是我得到了 10 个项目，5 个有数据，5 个没有数据。

我应该只得到一个包含 5 个项目的列表。满足条件的那个。

有人可以帮我解决这个问题吗？

谢谢你，米格尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:05:12.077

这应该是：

```
List<BannerModel> models = context.Banners
    .SelectMany(x => x.Packs
        .SelectMany(p => p.Files, (p, f) => new {
            Id = p.Id,
            Flag = p.Flag,
            File = new { Id = f.Id, Flag = f.Flag, Key = f.Key, Mime = f.Mime }
        })
    .Where(a => a.File.Flag == "Img_200")
    .Select(a => new BannerModel { PackId = a.Id, ImageKey = a.File.Key })
    ).ToList(); 
```

# javascript - Javascript 功能在 IE 浏览器中不起作用

> ID：15158468
> 
> 赞同：0
> 
> 时间：2013-03-01T13:03:36.330
> 
> 标签：javascript, html, internet-explorer, css, browser

我正在处理 javascript onclick 事件，当我在按钮单击上调用函数时，它不适用于 IE 浏览器（IE-9 和 IE-8）

代码如下

```
<input type='image' src="mybutton.jpeg" name="submit" id="button" onclick="return myfunction();" /> 
```

我在页面顶部定义了函数，

```
<script type="text/javascript">
function myfunction()
{
  alert("This is testing");
}
</script> 
```

在所有其他浏览器上工作，如 chrome 和 firefox，但不在 IE 中。

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:05:52.493

将您的 onclick 更改为：

```
onclick="return myfunction();" 
```

至

```
onsubmit="return myfunction();" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:35:32.503

我不喜欢放置“听众”属性。这对我有用：

HTML：

```
<input type='image' src="" name="submit" id="button" /> 
```

JS：

```
function myfunction() {
    alert("This is testing");
}

document.getElementById('button').addEventListener('click', function() { 
    return myfunction() 
} , false); 
```

# android - R.java 是手动修改的？

> ID：15158470
> 
> 赞同：-1
> 
> 时间：2013-03-01T13:03:41.330
> 
> 标签：android, r.java-file

更新代码时出现此错误？

> R.java 是手动修改的！恢复到生成的版本！

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:11:49.340

嘿，不要担心，在更新您修改了 R.java 的代码时，它会显示类似的错误，请清理您的项目并重新启动 eclipse 一次，它可能会解决问题。

# vb.net - 加载太多数据时，我可以阻止我的文本框崩溃吗？

> ID：15158471
> 
> 赞同：2
> 
> 时间：2013-03-01T13:03:41.093
> 
> 标签：vb.net, textbox

不确定这是否是我没有注意到的非常简单的事情。或者只是一个简单的尝试/捕获（我猜最有可能）。

我在表单上有一个文本框。它从另一个非常大的文本文件（假设为 1Mb）中获取数据，并且在很多情况下它可以获取它，但在某些情况下，程序在加载文件时会崩溃。

我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:27:58.300

在将文本文件加载到文本框中之前，您可以尝试读取文本文件的文件大小。如果文件的长度大于文本框的容量，您可以防止文本框被填充。

您可以使用[File.ReadAllLines](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)之类的函数来确定文本文件的大小。

```
 Dim AppDataLocation As String = "C:\Files\TestFiles\" 

    Dim sourceDirectoryInfo As New System.IO.DirectoryInfo(AppDataLocation) 

    For Each fileSystemInfo As System.IO.FileSystemInfo In _
                      SourceDirectoryInfo.GetFileSystemInfos 
        Dim FileText As String = System.IO.File.ReadAllText _
                      (AppDataLocation & fileSystemInfo.Name)         
    Next 
```

或者，您可以使用[此处](https://stackoverflow.com/questions/10175630/determine-file-size-vb-net)示例中所示的[FileInfo.Length](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.length.aspx)。

```
Dim file As New FileInfo("file.txt")
Dim sizeInBytes As Long = file.Length 
```

# javascript - 有没有办法知道按钮是否在确定的时间没有被点击？

> ID：15158476
> 
> 赞同：0
> 
> 时间：2013-03-01T13:03:55.453
> 
> 标签：javascript, jquery

有没有办法知道按钮是否在确定的时间没有被点击？我有两个递增和递减按钮（加号和减号）来通过 Ajax 请求控制温度。该值使用下一个函数一对一递增：

```
Plugin_increment.prototype.startPluginTempe = function (selector, dataAux, dataAux2, varAux, varAux2) {
    var valueElement = $(selector);
    function incrementValue(e){
        if((valueElement.text() < 40) && (valueElement.text() > 10)){ //max and min
            valueElement.text(Math.max(parseInt(valueElement.text()) + e.data.increment)); 
        }

        if(valueElement.text() == 40){//max
            if(e.data.increment == -1){
                valueElement.text(Math.max(parseInt(valueElement.text()) + e.data.increment));
            }
        }
        if(valueElement.text() == 10){//min
            if(e.data.increment == 1){
                    valueElement.text(Math.max(parseInt(valueElement.text()) + e.data.increment));                  
                }   
        }
        //Ajax request??????
        return false;
    }
    $(varAux).button({
              icons: {
                 primary: "ui-icon-plusthick"
              },
              text: false
        }).bind('click', {increment: 1}, incrementValue);       
    $(varAux2).button({
              icons: {
                 primary: "ui-icon-minusthick"
              },
              text: false
        }).bind('click', {increment: -1}, incrementValue);

}; 
```

“选择器”是显示值的跨度选择器。“varAux”和“varAux2”是加号和减号按钮的选择器。

如果我为每个增量发送一个 Ajax 请求，客户端就会超载。我认为一个选项可能是知道一个按钮是否在确定的时间没有被点击。另一种方式？

我使用 jquery-ui 来加减按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:17:10.567

您可以在 AJAX 请求之间施加最小间隔。如果在该时间间隔内点击了两次按钮，则只会执行一次请求，如下所示：

```
function incrementValue(e) {
    //your existing code here
    scheduleAjaxRequest();
}

var minimumTimeBetweenAjaxRequests = 500; // in milliseconds
var ajaxRequestIsScheduled;

function scheduleAjaxRequest() {
    if (ajaxRequestIsScheduled) {  
        // two or more clicks within specified interval, 
        // the data will be sent in request that's already sceheduled
        return;
    }
    ajaxRequestIsScheduled = setTimeout(doAjaxRequest, minimumTimeBetweenAjaxRequests);
}

function doAjaxRequest() {
    //Ajax request
    ajaxRequestIsScheduled = null; // clear timeout ID to allow next request to be scheduled
} 
```

# jquery - jQuery & Backbone 点击事件没有触发

> ID：15158489
> 
> 赞同：12
> 
> 时间：2013-03-01T13:04:48.340
> 
> 标签：jquery, events, backbone.js

我知道这个问题出现了一百万次，但我已经通过了答案，但没有一个有帮助。

JS 小提琴：http: [//jsfiddle.net/ZrYYy/](http://jsfiddle.net/ZrYYy/)

```
var LoginView = Backbone.View.extend({

    initialize: function () {

        console.log('Login View Intialized');
        this.el = $('#login-container');

    },

    // Setup the events (mainly the login)
    events: {

        // Login - function
        "click #login-btn" : "checkLogin"

    },

    // Actually authorization function
    checkLogin: function() {

        console.log("Authorizing login details with server...");

    }

});

// Get it all up and going
var newLogin = new Login();
var loginView = new LoginView({model: newLogin}); 
```

在小提琴中，当我绑定一个普通的 $('#login-btn').click(); 事件它工作正常，虽然它不在我自己的设置中（使用 chrome）。骨干点击事件无论如何都不起作用。

这是我自己的代码上的标题

```
<link href="assets/admin/css/bootstrap.css" rel="stylesheet" type="text/css">
<link href="assets/admin/css/bootstrap-responsive.css" rel="stylesheet" type="text/css">
<link href="assets/admin/css/style.css" rel="stylesheet" type="text/css">
<script src="assets/admin/js/jquery-1.9.1.min.js"></script>
<script src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
<script src="http://documentcloud.github.com/backbone/backbone-min.js"></script>
<script src="assets/admin/backbone/login.js"></script>
<script src="assets/admin/js/bootstrap.min.js"></script> 
```

我知道将这些内容包含在页脚中的最佳做法，但现在虽然存在这个问题，但这并不重要（？）。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-01T13:15:02.253

您正在像这样设置 View 元素：

```
var LoginView = Backbone.View.extend({
  initialize: function() {
    this.el = $('#login-container');
  }
}); 
```

每个 Backbone 视图`el`在创建时都会获得一个分离的 DOM 节点。当您`this.el`这样设置时，Backbone 不会意识到您已更改元素，并且仍在侦听原始分离节点上的事件。

尝试`el`在视图上声明一个属性。这是将视图绑定到预先存在的元素的正确方法：

```
var LoginView = Backbone.View.extend({
  el: "#login-container",
}); 
```

如果您需要`el`在视图的生命周期内动态设置视图，您应该使用`view.setElement`，它使 Backbone 能够将 绑定`events`到新元素：

```
var LoginView = Backbone.View.extend({
  initialize: function() {
    this.setElement($('#login-container'));
  }
}); 
```

**根据评论进行编辑：**听起来您正在尝试在页面完全加载之前初始化视图。Backbone 没有找到`#login-container`元素，ergo 没有绑定事件。你也可以用你的小提琴来验证这一点：将`onLoad`设置更改`No wrap <in head>`为小提琴设置，你瞧，没有处理任何事件。

你应该只在 DOM 准备好后初始化你的应用程序：

```
$(document).on('ready', function() {
  var newLogin = new Login();
  var loginView = new LoginView({model: newLogin});      
}); 
```

或相同的快捷方式：

```
$(function() {
  var newLogin = new Login();
  var loginView = new LoginView({model: newLogin});      
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-08T16:08:53.060

我必须在没有 jQuery 的情况下设置**el**才能在 JSFiddle 中工作... **el: 'body'**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-10T12:45:45.937

正如其他答案所解释的，`events`要工作，您需要使用`el`属性。`el`属性对于通过引用属性中的元素来注册事件是必要的`el`。但在某些情况下，尚未生成 html。在这些情况下，您可以使用`tagName`而不是`el`. `tagName`对于动态生成元素很有用，就像`document.createElement`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-11-23T07:55:20.360

Backbones el Node 定义了视图控制器的工作区。只有 el 内部的节点会受到 Backbones 渲染方法的影响、监听或更改。

将 el 设置为尽可能靠近您希望与 View Controller 一起维护的区域，以避免与其他 View Controller 发生交叉或不必要的父子关系。

想象一下 View1 包括 View2 的区域并在其节点上进行渲染。如果 View2 持有节点的引用，它将不再工作，因为它们可能会被 View1 的渲染破坏。

因此，请注意查看交叉路口及其风险。Backbone 是一个库，而不是一个框架，它不会保护你免于做愚蠢的事情。

# asp.net - 如何通过 eBay API 获取 PayPal TransactionID

> ID：15158506
> 
> 赞同：4
> 
> 时间：2013-03-01T13:05:43.167
> 
> 标签：asp.net, paypal, ebay-api

我需要通过 API 在 eBay 上获取已付款订单的 PayPal TransactionID。

我使用如下所述的 ExternalTransaction：[https ://ebay.custhelp.com/app/answers/detail/a_id/1550/~/linking-ebay-and-paypal-transactions](https://ebay.custhelp.com/app/answers/detail/a_id/1550/~/linking-ebay-and-paypal-transactions)

```
 ExternalTransactionType[] externalTransactionTypeArr = transactionType.ExternalTransaction; 
```

但 eBay API 总是返回 null 作为 transactionType.ExternalTransaction

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T07:56:42.503

您需要将属性“DetailLevel”设置为值“RETURN_ALL”。

# jquery - jQuery按顺序淡入/淡出

> ID：15158514
> 
> 赞同：0
> 
> 时间：2013-03-01T13:06:13.203
> 
> 标签：jquery, jquery-animate, opacity, fade

我正在尝试使一组方形 div（“.block”）在单击时淡出，以替换为更大的 div（“#container”），一旦它们淡出就会淡入。这工作正常：

```
$('.block').animate({opacity:0},400,'swing',function(){ $('#container").fadeIn();}); 
```

我在这里使用“动画”，因为我不希望块所占据的空间在它们淡出时崩溃（如果我使用淡出会发生这种情况）。

'#container' div 有一个关闭按钮，单击该按钮时应该淡出容器并再次淡入块。问题来了：当点击关闭按钮时，容器淡出没问题，但是新块出现的非常突然，好像它们没有等待容器先关闭一样。代码：

```
$('#container').fadeOut(400,function(){ $('.block').animate({opacity:100},400,'swing');}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:11:07.820

`$('#container')`没有正确关闭..

```
$('.block').animate({opacity:0},400,'swing',function(){ $('#container').fadeIn();}); 
```

# c# - Add program to firewall exceptions list

> ID：15158518
> 
> 赞同：2
> 
> 时间：2013-03-01T13:06:33.790
> 
> 标签：c#, windows, windows-firewall-api

I have a WCF Service running on port 8000, but I have also a firewall enabled. I am using this code to try to add my program to the firewall exceptions list, so I can use the service without disabling the firewall. Also, I want to do that automatically. Thats why in my previous researches, I found this link: [Automating Windows Firewall with](https://stackoverflow.com/questions/8889587/automating-windows-firewall-with) (I was using a modified version of the `clsFirewall` to just add the program to the white list, no ports.)

To allow in/out traffic, I used `netsh advfirewall firewall ad rule` command to add a rule for my port.

Even though the port are indeed added to the rules list, aswell as my application, it doesnt seem to work with the firewall enabled. I am using [http://www.canyouseeme.org/](http://www.canyouseeme.org/) to check the port. It only works when I disable my firewall.

What might be going wrong?

I am using Windows 7.

# php - 在预先存在的 Wordpress 插件中运行自定义 SQL

> ID：15158523
> 
> 赞同：1
> 
> 时间：2013-03-01T13:06:44.747
> 
> 标签：php, sql, wordpress, plugins, metadata

好的，所以我在 PHP 方面有点新手，但这就是我想要实现的目标。

我想将 Wordpress 网站的主题从使用插件对帖子（WP-Ratings）进行评级的主题更改为内置评级的新主题。新主题将评级存储为元数据，我已经设法编写一个查询，从 wp_ratings 表中获取评级并将其转换为必要的元数据。我想做的是将此查询存储在当前评级插件中，以便在对帖子进行评级时存储我们迁移到新主题时所需的元数据。就像我说的那样，我是 PHP 的新手，但可以使用 SQL，所以有人可以告诉我如何对 Wordpress 数据库运行以下查询。

谢谢！

```
SET @post_id = 1110;
SET SESSION group_concat_max_len = 1000000;

insert into wp_postmeta (post_id,meta_key,meta_value)
  SELECT
    rating_postid
    ,'like'
    ,CONCAT
      ('a:', COUNT(rating_id), ':{',
        (SELECT CONCAT( GROUP_CONCAT(meta_data_vote SEPARATOR ''), '}') 
         FROM
          (SELECT CONCAT
            ('i:',
             @curRow := @curRow + 1,
             ';a:2:{s:7:"',
             'user_id',
             '";s:1:"0";s:2:"ip";s:16:"',
             '-127-000-000-001',
             '";}'
            ) AS meta_data_vote
           FROM wp_ratings JOIN
             (SELECT @curRow := -1 AS j) r
              WHERE rating_postid = @post_id
                and rating_rating > 0
             )AS meta_data_votes
          )
      ) AS new_ratings_meta_data
  FROM wp_ratings l
  WHERE rating_postid = @post_id
    and rating_rating > 0 
```

请注意，帖子 ID 变量应该等于被评分的帖子 ID，我相信它是 PHP for Wordpress 中的 $post_id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:00:49.757

您想使用[`wpdb`](http://codex.wordpress.org/Class_Reference/wpdb). 它是 PHP 的`mysql`（是的，[`mysql`](http://codex.wordpress.org/Class_Reference/wpdb)）函数的一个非常简单的包装器。

```
$results = $wpdb->query($your_complicated query); // Congrats on actually knowing how to write SQL :) 
```

您可以将任何有效的 SQL 提供给该方法，它应该像任何查询一样工作，但您不能“堆叠”查询。[`mysql`](http://php.net/manual/en/mysqli.multi-query.php)并且[`PDO`](https://stackoverflow.com/questions/6346674/pdo-support-for-multiple-queries-pdo-mysql-pdo-mysqlnd)确实允许堆叠查询（尽管我不是他们的粉丝，偏执和所有），但是，如前所述，`wpdb`仍然使用`mysql`函数。

您还应该将硬编码的 WordPress 表名替换为`$wpdb`等效项。例如，而不是`wp_posts`使用`$wpdb->posts`. 原因是`wp_`前缀是可变的。这是默认设置，非常常见，但可以更改，并且很容易更改。这只是对`wp-config.php`.

# javascript - 提交按钮没有做任何事情

> ID：15158535
> 
> 赞同：0
> 
> 时间：2013-03-01T13:07:21.563
> 
> 标签：javascript, jquery

我正在努力使用提交按钮，单击该按钮时没有任何反应。我相信问题是没有`editvalidation()`被触发，但我不确定。如果是这种情况，如何触发？我希望验证显示在它自己的提交按钮上方。我的问题只是如何让提交按钮做某事？

我没有收到任何错误：

代码：

```
<script type="text/javascript">

            function editvalidation()
    {
        if ($("#coursesDrop").val()==""){
            $("#courseAlert").html("Please Select a Course from the Course Drop Down Menu");
        }
        if ($("#coursesDrop").val()!="" && $("#courseadd").children().length==0){
            $("#courseAlert").html("You have not Selected any Students you wish to Add into Course");
        }
        if ($("#coursesDrop").val()!="" && $("#courseadd").children().length!=0){
            return true;
        }
        return false;
    }

            </script>

    <div id='lt-container'>
    <form action='addstudentcourse.php' method='post' id='courseForm'>
    <p id='warnings'></p>
    <p><strong>Courses:</strong> <select name="course" id="coursesDrop">
    <option value="">Please Select</option>
    <option value='19'>BIO234 - Biology</option>
    <option value='1'>INFO101 - Bsc Information Communication Technology</option>
    <option value='2'>INFO102 - Bsc Computing</option>

    </select> </p>   
    </form>
    <form id='updateForm'>

        <p><strong>Course Chosen:</strong></p>
        <table>
        <tr>
        <th></th>
        <td><input type='hidden' id='currentCourseId' name='CourseIdcurrent' value='' /> </td>
        </tr>
        <tr>
        <th>Course ID:</th>
        <td><input type='text' id='currentCourse' name='Coursecurrent' readonly='readonly' value='' /> </td>
        </tr>
        <tr>
        <th>Course Name:</th>
        <td><input type='text' id='currentCourseName' name='CourseNamecurrent' readonly='readonly' value='' /> </td>
        </tr>
        <tr>
        <th>Duration (Years):</th>
        <td><input type='text' id='currentDuration' name='Durationcurrent' readonly='readonly' value=''/> </td>
        </tr>
        </table>
        </form>

    <form id='studentExistForm'>
    <p><strong>Current Students in Chosen Course:</strong></p>
    <p><select name="studenttextarea" id="studentselect" size="10"></select></p>
    </form> 

    </div>

    <div id='rt-container'>
    <form id='studentRemainForm'>
    <p><strong>Available Students to Enrol:</strong></p>
    <p><select multiple="multiple" name="remaintextarea" id="studentremain" size="10"></select></p>
    <table id='addtbl'>
    <tr>
    </table>
    </form>

    <form id='studentAddForm'>
    <p><strong>Students to Add to Course:</strong></p>
    <p><select multiple="multiple" name="addtextarea" id="studentadd" size="10"></select></p>
    <table id='removetbl'>
    <tr>
    </table>

    <div id='studentAlert'></div>
    </form>

    <p><button id='submitstudents'>Submit Students</button></p>

    </div>

        <script type="text/javascript">    

                 function showConfirm(){

                  var courseNoInput = document.getElementById('currentCourse').value;
                  var courseNameInput = document.getElementById('currentCourseName').value;

                  if (editvalidation()) {

                 var confirmMsg=confirm("Are you sure you want to add your selected Students to this Course:" + "\n" + "Course: " + courseNoInput + " - " + courseNameInput);

                 if (confirmMsg==true)
                 {
                 submitform();   
             }
          }
        } 

         $('body').on('click', '#submitstudents', showConfirm);     

        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:20:18.960

```
 if (editvalidation()  === true) {
       //your code
     }
 compare function true or false like this ..

$( '#studentAddForm' ).submit(); 
```

最好提交这样的表格..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:26:30.270

脚本开始在带有 jquery 1.8.1 的 Google Chrome 中运行。一个问题是，没有定义 ID 为 courseAlert 的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:26:39.817

我格式化了您的代码并对其进行了修复，以便提交按钮正常工作。

我还在每个函数的开头添加了警报，以便您可以看到它们被调用。

### 如果您希望脚本完全正常工作，您还需要更正其他代码。

**链接到工作示例：** [http ://simplestudio.rs/yard/submit_button/form.html](http://simplestudio.rs/yard/submit_button/form.html)

**代码：**

```
<html>
<head>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script>

$(document).ready(function() {

    $("#submitstudents").click(function() { 
        showConfirm();
    }); 

}); 

function showConfirm() {

    alert("function showConfirm is called");
    var courseNoInput = document.getElementById('currentCourse').value;
    var courseNameInput = document.getElementById('currentCourseName').value;

    if (editvalidation()) {

        var confirmMsg=confirm("Are you sure you want to add your selected Students to this Course:" + "\n" + "Course: " + courseNoInput + " - " + courseNameInput);

        if (confirmMsg==true) {

            submitform();   

        }

    }

} 

function editvalidation() {

    alert("function editvalidation is called");
    if ($("#coursesDrop").val()==""){

        $("#courseAlert").html("Please Select a Course from the Course Drop Down Menu");

    }
    if ($("#coursesDrop").val()!="" && $("#courseadd").children().length==0){

        $("#courseAlert").html("You have not Selected any Students you wish to Add into Course");

    }
    if ($("#coursesDrop").val()!="" && $("#courseadd").children().length!=0){

        return true;

    }

    return false;

}

</script>

<style>

    span {
        cursor: pointer;
        position: absolute;
    }

    #divtoshow {
        position: absolute;
        display: none;
    }

</style>

</head>

<body>

    <div id='lt-container'>

        <form action='addstudentcourse.php' method='post' id='courseForm'>

            <p id='warnings'></p>
            <p>

                <strong>Courses:</strong> 

                <select name="course" id="coursesDrop">
                    <option value="">Please Select</option>
                    <option value='19'>BIO234 - Biology</option>
                    <option value='1'>INFO101 - Bsc Information Communication Technology</option>
                    <option value='2'>INFO102 - Bsc Computing</option>
                </select> 

            </p>   

        </form>

        <form id='updateForm'>

            <p>
                <strong>Course Chosen:</strong>
            </p>

            <table>
                <tr>

                    <th></th>
                    <td>
                        <input type='hidden' id='currentCourseId' name='CourseIdcurrent' value='' /> 
                    </td>

                </tr>

                <tr>

                    <th>
                        Course ID:
                    </th>
                    <td>
                        <input type='text' id='currentCourse' name='Coursecurrent' readonly='readonly' value='' /> 
                    </td>

                </tr>

                <tr>

                    <th>
                        Course Name:
                    </th>

                    <td>
                        <input type='text' id='currentCourseName' name='CourseNamecurrent' readonly='readonly' value='' /> 
                    </td>

                </tr>

                <tr>

                    <th>
                        Duration (Years):
                    </th>

                    <td>
                        <input type='text' id='currentDuration' name='Durationcurrent' readonly='readonly' value=''/> 
                    </td>

                </tr>

            </table>

        </form>

        <form id='studentExistForm'>

            <p>
                <strong>Current Students in Chosen Course:</strong>
            </p>

            <p>
                <select name="studenttextarea" id="studentselect" size="10"></select>
            </p>

        </form> 

    </div>

    <div id='rt-container'>

        <form id='studentRemainForm'>

            <p>
                <strong>Available Students to Enrol:</strong>
            </p>

            <p>
                <select multiple="multiple" name="remaintextarea" id="studentremain" size="10"></select>
            </p>

            <table id='addtbl'>
                <tr>
            </table>

        </form>

        <form id='studentAddForm'>

            <p>
                <strong>Students to Add to Course:</strong></p>
            </p>

            <p>
                <select multiple="multiple" name="addtextarea" id="studentadd" size="10"></select>
            </p>

            <table id='removetbl'>
                <tr>
            </table>

            <div id='studentAlert'></div>

        </form>

        <p>
            <button id='submitstudents'>Submit Students</button>
        </p>

    </div>

</body>
</html> 
```

# php - Converting type numeric value from string to integer without changing its value

> ID：15158536
> 
> 赞同：2
> 
> 时间：2013-03-01T13:07:24.383
> 
> 标签：php

I am reading a csv file and my code is reading the numeric value as a string. But i need the value as integer.

e.g. string `'5782492380'` as int `'5782492380'`

Is there any best way to change the type of value from string to int in php code?

I have tried as

```
(int) 5782492380 
```

but it is changing the original value to `2147483647`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:09:12.283

尝试使用浮点数，因为 int 在您的值下有一个限制：

```
 $v = (float) 5782492380; 
```

在[PHP: integers](http://www.php.net/manual/en/language.types.integer.php)中，您可以找到以下注释：

*整数的大小取决于平台，尽管通常值约为 20 亿的最大值（即 32 位有符号）。64位平台通常最大值约为9E18*

所以整数范围值为（-2147483648, 2147483647）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T13:11:24.820

值`5782492380`不适合整数类型。整数值应在 -2147483648 .. 2147483647 范围内。要存储超出此范围的值，您可以使用浮点数或[GMP 数](http://www.php.net/manual/en/ref.gmp.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:12:23.877

```
$v = intval( $your_string) 
```

范围高达 2 ^(32)

# iphone - 删除推送视图上的标签栏

> ID：15158537
> 
> 赞同：0
> 
> 时间：2013-03-01T13:07:26.510
> 
> 标签：iphone, ios, ios5, ios6

我在应用程序委托中添加了标签栏。当我从我的一个视图中推送视图时，标签栏被删除了。我也想要推送视图上的标签栏。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
    AudioViewController * audioViewController = [[AudioViewController alloc] initWithNibName:@"AudioViewController" bundle:nil];
    audioViewController.title = @"audio";
    audioViewController.tabBarItem.image=[UIImage imageNamed:@"audio 30x30.png"];

    ViewController *videoViewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    videoViewController.title = @"video";
    videoViewController.tabBarItem.image=[UIImage imageNamed:@"video 30x30.png"];   

    ViewController *aboutViewController = [[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
    aboutViewController.title = @"about";
    aboutViewController.tabBarItem.image=[UIImage imageNamed:@"about1_iPhone.png"];

    ViewController *infoViewController = [[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
    infoViewController.title = @"info";
    infoViewController.tabBarItem.image=[UIImage imageNamed:@"info 30x30.png"];

    PlaylistViewController *PlaylistViewControllerObj = [[PlaylistViewController alloc]initWithNibName:@"PlaylistViewController" bundle:nil];
    PlaylistViewControllerObj.title = @"Playlist";
    PlaylistViewControllerObj.tabBarItem.image=[UIImage imageNamed:@"ko.png"];

    NSArray *viewControllerArray = [NSArray arrayWithObjects:audioViewController,videoViewController,aboutViewController,infoViewController,PlaylistViewControllerObj,nil];

    UITabBarController * myTabbarController = [[UITabBarController alloc] init];
    [myTabbarController setViewControllers:viewControllerArray];
    navigationControllerObj = [[UINavigationController alloc] initWithRootViewController:myTabbarController];
    [navigationControllerObj setNavigationBarHidden:YES animated:NO];
    self.window.rootViewController =navigationControllerObj;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:15:32.377

UIViewController *viewController1，*viewController2，*viewController3，*viewController4，*viewController5；

```
viewController1 = [[Homeviewcontroller alloc] initWithNibName:nil bundle:nil];
viewController2 = [[NearbyViewController alloc] initWithNibName:nil bundle:nil];
viewController3 = [[SearchViewController alloc] initWithNibName:nil bundle:nil];
viewController4 = [[FavoritiesViewController alloc] initWithNibName:nil bundle:nil];
viewController5 = [[MoreViewController alloc] initWithNibName:nil bundle:nil];

 UINavigationController *homeNavi=[[UINavigationController alloc]initWithRootViewController:viewController1];

 UINavigationController *SearchNavi=[[UINavigationController alloc]initWithRootViewController:viewController3];

 UINavigationController *NearbyNavi=[[UINavigationController alloc]initWithRootViewController:viewController2];

 UINavigationController *FavNavi=[[UINavigationController alloc]initWithRootViewController:viewController4];

 UINavigationController *MoreNavi=[[UINavigationController alloc]initWithRootViewController:viewController5];

 TabbarController = [[UITabBarController alloc] init];

 TabbarController.viewControllers = [NSArray arrayWithObjects:homeNavi,SearchNavi,NearbyNavi,FavNavi,MoreNavi, nil];

[self presentModalViewController:TabbarController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:23:29.793

试试这个示例代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

AudioViewController * audioViewController = [[AudioViewController alloc] initWithNibName:@"AudioViewController" bundle:nil];
audioViewController.title = @"audio";
audioViewController.tabBarItem.image=[UIImage imageNamed:@"audio 30x30.png"];

UINavigationController *navaudioViewController = [[UINavigationController alloc] initWithRootViewController:audioViewController];

PlaylistViewController *PlaylistViewControllerObj = [[PlaylistViewController alloc]initWithNibName:@"PlaylistViewController" bundle:nil];
PlaylistViewControllerObj.title = @"Playlist";
PlaylistViewControllerObj.tabBarItem.image=[UIImage imageNamed:@"ko.png"];

UINavigationController *navPlaylistView = [[UINavigationController alloc] initWithRootViewController:PlaylistViewControllerObj];

UITabBarController * myTabbarController = [[UITabBarController alloc] init];
myTabbarController.viewControllers = @[navHomeController,navPlaylistView];
self.window.rootViewController = myTabbarController;
[self.window makeKeyAndVisible];
return YES;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:23:42.207

`UIViewController`检查您正在推送的此属性的值

```
@property(nonatomic) BOOL hidesBottomBarWhenPushed 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T11:37:09.250

使用此代码

调用这个方法，在哪里呈现 UITabBar

在.h中，

@property (strong, nonatomic) UINavigationController *navigation; @property(nonatomic, strong) UITabBarController *tabbarcontroller;

米，

-(void)loadtabview {

```
self.tabbarcontroller = [[UITabBarController alloc] init];
NSMutableArray *localControllersArray = [[NSMutableArray alloc] initWithCapacity:4];
self.firstViewController = [[FirstViewController alloc]initWithNibName:@"firstViewController" bundle:nil];
navigation = [[UINavigationController alloc] initWithRootViewController:self.firstViewController];
self.viewController.navigationItem.title=@"First";
[localControllersArray addObject:navigation];

self.secondViewController = [[secondViewController alloc] initWithNibName:@"secondViewController" bundle:nil];
navigation = [[UINavigationController alloc] initWithRootViewController:secondViewController];
self.secondViewController.navigationItem.title=@"second";
[localControllersArray addObject:navigation];

self.ThirdViewController = [[Third ViewController alloc]initWithNibName:@"Third ViewController" bundle:nil];
navigation = [[UINavigationController alloc] initWithRootViewController:ThirdViewController];
self.secondViewController.navigationItem.title=@"Third";
[localControllersArray addObject:navigation];

tabbarcontroller.viewControllers = localControllersArray;
self.tabbarcontroller.delegate = self;
[self.tabbarcontroller setSelectedIndex:0];
[self.window addSubview:tabbarcontroller.view]; 
```

}

# orchardcms - 如何在 Orchard 中正确保留导出/导入内容项之间的关系？

> ID：15158540
> 
> 赞同：2
> 
> 时间：2013-03-01T13:07:34.510
> 
> 标签：orchardcms

我已经阅读了[有关创建 1:N 和 M:N 关系的官方文档，](https://github.com/OrchardCMS/OrchardDoc/blob/master/Documentation/Creating-1-n-and-n-n-relations.markdown)其中没有涵盖一个特定方面：支持导入和导出关系。由于关系是使用主键（自动递增整数）隐式定义的，因此在导出数据以在另一个环境中导入时（如在备份/恢复场景中）是否会出现问题？例如，项目的顺序在导入过程中应该很重要。此外，在导入新的 Orchard 安装后，内部 id 值不一定相同（因为它们是自动递增的）。

实现支持导入和导出的关系的首选方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:48:33.270

这可以通过使用作为导入/导出 api 的一部分提供的身份功能来解决。它不是引用一个几乎可以保证在目标实例上无效的主键值，而是生成一个确定性和唯一的 id，以支持正确传输项目，包括在关系的情况下。有两个开箱即用的身份提供者。一个使用项目的别名（如果存在），另一个存储 GUID（这是标识部分，例如由小部件使用）。

# d3.js - 更新多线图 D3.js

> ID：15158546
> 
> 赞同：1
> 
> 时间：2013-03-01T13:07:47.667
> 
> 标签：d3.js

我正在尝试通过使用 PHP 以 5 秒的间隔从 mySQL 数据库中提取数据来更新 d3 多线图。目前图表正在显示但没有更新 - 我知道我的 updateData 函数有问题，但已经尝试了所有能想到的东西，但似乎没有任何效果。有人可以帮忙吗？

[https://gist.github.com/Majella/ab32fe0151fd487da3f6](https://gist.github.com/Majella/ab32fe0151fd487da3f6)

**更新**：

如您所见，x 轴线只是零星地显示，并且有些线没有与 y 轴对齐。

更新要点：

[https://gist.github.com/Majella/ab32fe0151fd487da3f6](https://gist.github.com/Majella/ab32fe0151fd487da3f6)

![在此处输入图像描述](../Images/550f7796f4366d90a4daa6af36e0f23c.png) **更新 2**：由于某些奇怪的原因，线条正在改变颜色 - 或者完全不确定。因此，虽然在图表上方的线条是从顶部开始的 - 蓝色，橙色然后是白色 - 当图表更新时蓝色可能会移动到底部，橙色在顶部，白色在中间等 - 但随机发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:31:11.960

在图表的原始绘图中，您正确使用：

```
var parameter = svg.selectAll(".parameter")
.data(data, function(d) { return d.key; })
    .enter().append("g")
    .attr("class", "parameter"); 
```

它将数据（数据）连接到元素（g.parameter）

在更新功能期间，您将需要再次加入数据以执行更新、删除和添加元素。[3 个小圆圈教程](http://mbostock.github.com/d3/tutorial/circle.html)是了解更多信息的好地方。

无论如何，在你的更新功能中，你可能想要这样的东西（未经测试）：

```
// re-acquire joined data
var containers = svg.selectAll("g.parameter")
    .data( data );

// update existing elements for this data
containers
    .select( "path.line" ) 
    .attr( "d", function(d) { return line(d.values); }) 
```

# java - RequestWrapper objects must extend ServletRequestWrapper or HttpServletRequestWrapper

> ID：15158549
> 
> 赞同：1
> 
> 时间：2013-03-01T13:08:00.700
> 
> 标签：java, websphere, runtime-error

I am using encoded forms from "EAR A" to "EAR B".

When I try to process the request:

```
 accion = "/decimprenta";
    pagina = "/procesardeclaracion.do";
    this.getServlet().getServletContext().getContext(accion).getRequestDispatcher(pagina).forward(request, response); 
```

the "EAR A" throws the following exception:

```
 java.lang.RuntimeException: SRV.8.2: RequestWrapper objects must extend ServletRequestWrapper or HttpServletRequestWrapper
    at com.ibm.wsspi.webcontainer.util.ServletUtil.unwrapRequest(ServletUtil.java:91)
    at com.ibm.wsspi.webcontainer.util.ServletUtil.unwrapRequest(ServletUtil.java:63)
    at com.ibm.wsspi.webcontainer.util.ServletUtil.unwrapRequest(ServletUtil.java:58)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.dispatch(WebAppRequestDispatcher.java:1127)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:191) 
```

Browsing, I found this link with the same error, but the patches are version 6 of WAS. I am using WAS 8: [http://www-01.ibm.com/support/docview.wss?uid=swg1PM10357](http://www-01.ibm.com/support/docview.wss?uid=swg1PM10357)

Any idea?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:58:20.213

您使用的是哪个版本的 Struts？如果您使用的是 1.2.7 或更高版本，那么您将看到此错误。
我在使用的时候遇到了这个问题

```
<form enctype="multipart/form-data"> 
```

这是因为当您使用 MultipartRequestWrapper 时。在 1.2.* 版本中，[MultipartRequestWrapper](http://struts.apache.org/release/1.2.x/api/org/apache/struts/upload/MultipartRequestWrapper.html)扩展了 java.lang.Object

在 1.3.* 中，[MultiPartRequestWrapper](http://javasourcecode.org/html/open-source/struts/struts-1.3.10/org/apache/struts/upload/MultipartRequestWrapper.java.html)扩展了 HttpServletRequestWrapper

我在 WAS 8.5 中发现了同样的问题，但更新 struts 解决了这个问题。

希望这可以帮助

# php - PHP: Print special value from decoded JSON Object

> ID：15158550
> 
> 赞同：0
> 
> 时间：2013-03-01T13:08:01.933
> 
> 标签：php, javascript, json, email

I have a JSON object, which i decoded with the php function json_decode. No i want to print a special value from the object:

```
echo $user[0]['mail'][0]; 
```

My problem is that i get such a return:

```
string(19) "example@hotmail.com" 
```

I've filled up the json object with my ldap_search results. When i parse the JSON with js and print out the email, it looks fine, but with PHP not.

Edit:

```
array(2) { 
    ["count"]=>  int(1)  [0]=>  array(10) {   
        ["mail"]=>    array(2) {
            ["count"]=>      int(1)      [0]=>      string(23) "example@hotmail.com"
        } [0]=>    string(4) "mail"
        ["givenname"]=>    array(2) { 
            ["count"]=>      int(1)      [0]=>      string(5) "sylnois"
        } [1]=>    string(9) "givenname"
        ["sn"]=>    array(2) {
            ["count"]=>      int(1)      [0]=>      string(7) "bla"
        }    [2]=>    string(2) "sn"
        ["ou"]=>    array(2) {
            ["count"]=>      int(1)      [0]=>      string(4) "ZH"
        }    [3]=>    string(2) "ou"
        ["count"]=>    int(4)    ["dn"]=>    string(24) "SOME_DN"  }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:37:58.053

```
$json = '{"user_name":"admin","0":{"email":{"0":"admin@gmail.com"}},"count":5}';

$user = json_decode($json,true);

echo $user[0]['email'][0];

 Rusult : admin@gmail.com 
```

# java - BASIC authentication in jersey JAX-RS service and Tomcat 6.0 getting failed

> ID：15158554
> 
> 赞同：2
> 
> 时间：2013-03-01T13:08:14.397
> 
> 标签：java, web-services, rest, tomcat, jersey

I am trying to do a BASIC Authentication in my service using Tomcat 6.0 and JAX-RS jersey implementation.

Below are the implementation steps I followed:

1) Added the Realm in **server.xml** like this:

```
<Realm className="org.apache.catalina.realm.JDBCRealm" connectionName="XXX" connectionPassword="YYY" connectionURL="jdbc:oracle:thin:@localhost:1521/orcl" driverName="oracle.jdbc.OracleDriver" roleNameCol="role_name" userCredCol="user_pass" userNameCol="user_name" userRoleTable="user_roles" userTable="users"/> 
```

The same realm I am using in other JSP application, it is working fine over there.

2) Below is the **web.xml**

```
<servlet>
    <servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.infy.security</param-value>
    </init-param>       
    <init-param>
        <param-name>com.sun.jersey.spi.container.ResourceFilters</param-name>
        <param-value>com.sun.jersey.api.container.filter.RolesAllowedResourceFilterFactory</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>

<security-constraint>      
  <web-resource-collection>
      <web-resource-name>BasicDemo</web-resource-name>
      <url-pattern>/*</url-pattern>
  </web-resource-collection>
  <auth-constraint>
      <role-name>*</role-name>
  </auth-constraint>
  <!-- <user-data-constraint>
      <transport-guarantee>CONFIDENTIAL</transport-guarantee>
  </user-data-constraint> -->
</security-constraint>
<login-config>
  <auth-method>BASIC</auth-method>
  <!-- The realm name is typically displayed by the browser in the login dialog box. -->
  <realm-name>Login</realm-name>      
</login-config> 
```

Below is the service:

```
@Path("/authenticate")
@RolesAllowed({"Admin","Guest"})
public class BasicAuthenticationSecurity {

@GET
@Path("/wbiPing")
@Produces(MediaType.TEXT_PLAIN) 
@RolesAllowed("Admin")
public Response wbiPing(){

    System.out.println("Pinged!!!");
    return Response.ok("Pinged!!!").build();
}

} 
```

After implementation, whatever is the input in the login authentication popup (even if the user is "Admin") I am getting the unauthentication error page. Below is the URL:

```
http://localhost:8002/BASICAuthentication/rest/authenticate/wbiping 
```

Please let me know if I am misisng something.

thanks,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:00:08.807

我遇到了同样的问题，我无法使用 server.xml 中的领域定义运行它。

我一搬家就开始工作了

```
<Realm
    className="org.apache.catalina.realm.JDBCRealm"
    driverName="oracle.jdbc.driver.OracleDriver"
    connectionURL="jdbc:oracle:thin:@//10.21.105.185:1552/CRODODEV.DE.MADM.NET"
    connectionName="1234556"
    connectionPassword="*****"
    userTable="cpim_users"
    userNameCol="user_name"
    userCredCol="password"
    userRoleTable="cpim_user_roles"
    roleNameCol="role_name"
    digest="sha-256" /> 
```

进入 context.xml。TomCat 的日志记录告诉我服务器没有使用 JDBC 领域。

# iphone - 我的应用程序无法在我的设备中启动？

> ID：15158556
> 
> 赞同：2
> 
> 时间：2013-03-01T13:08:22.837
> 
> 标签：iphone, crash, provisioning-profile

我第一次遇到这个问题。我正在使用分发 + Ad-Hoc 配置文件将我的应用程序运行到设备，但我无法在设备中第一次启动应用程序，因为我不断收到此错误：

```
3 月 1 日 18:07:58 My-iPhon 内核[0]：launchd[276] 内置配置文件：容器（沙盒）
3 月 1 日 18:07:58 My-iPhon 内核[0]：launchd[276] 容器：/private/var/mobile/Applications/E142C3CE-F6E0-4C77-ABE8-1B764DA216FE（沙盒）
3 月 1 日 18:07:58 My-iPhon com.apple.debugserver-189[261] : 1 +0.000000 秒 [0105/0303]: 错误: ::task_for_pid (target_tport = 0x0103, pid = 276, &task) => err = 0x00000005 ((os/kern) 失败) err = ::task_for_pid (target_tport = 0x0103, pid = 276, &task) => err = 0x00000005 ((os/kern) 失败) (0x00000005)
3 月 1 日 18:07:58 My-iPhon mobile_house_arrest[280]：最大打开文件数：125
3 月 1 日 18:07:59 My-iPhon com.apple.debugserver-189[261] : 2 +0.417620 sec [0105/0303]: error: ::task_for_pid (target_tport = 0x0103, pid = 276, &task) => err = 0x00000005 ((os/kern) 失败) err = ::task_for_pid (target_tport = 0x0103, pid = 276, &task) => err = 0x00000005 ((os/kern) 失败) (0x00000005)
3 月 1 日 18:07:59 My-iPhon mobile_house_arrest[281]：最大打开文件数：125
3 月 1 日 18:07:59 My-iPhon mobile_house_arrest[282]：最大打开文件数：125

```

启动后，应用程序崩溃了，在设备控制台中我收到了这个错误：

```
3 月 1 日 18:11:44 My-iPhon backboardd[52]：BKSendGSEvent 错误发送事件类型 50：（ipc/send）无效的目标端口（0x10000003）
3 月 1 日 18:11:44 My-iPhon com.apple.launchd[1] (UIKitApplication:com.xxx.myApp[0x3077][276]) : (UIKitApplication:com.xxxx.myapp[0x3077]) 退出：杀死： 9
3 月 1 日 18:11:44 My-iPhon com.apple.debugserver-189[261] : 21 +216.166834 sec [0105/0303]: RNBRunLoopLaunchInferior DNBProcessLaunch() 返回错误：'未能获取进程 276 的任务'
3 月 1 日 18:11:44 My-iPhon com.apple.debugserver-189[261]：错误：无法启动进程（空）：无法获取进程 276 的任务
3 月 1 日 18:11:44 My-iPhon backboardd[52]：应用程序 'UIKitApplication:com.xxxxx.myApp[0x3077]' 退出，信号 9：被杀死：9

```

但是，第三次运行正常！

我已经尝试了很多方法，比如

1.  重新创建了我的配置文件，并为 Ad-Hoc 分发提供了 entitlement.plist
2.  我将方案的构建配置设置为调试，所以我如何在我的设备上第一次运行我的应用程序时解决这个错误
3.  我重述了我的设备

无论我尝试什么，我都会收到此错误！你们中的任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T14:15:27.920

您可以尝试使用开发证书。如果您在设备中安装 IPA 文件，它将正常工作。

当您要将应用上传到应用商店时，请使用 Ad-hoc 和分发配置文件。

# asp.net - MVC 需要为外部应用程序生成一个 URL

> ID：15158557
> 
> 赞同：-1
> 
> 时间：2013-03-01T13:08:31.403
> 
> 标签：asp.net, asp.net-mvc, url-routing

我希望生成一个绝对 URL/MENU 作为扩展方法，它重定向到其他应用程序，如“www.yahoo.com”/“www.google.com”。

谢谢巴杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:33:15.317

使用[此](https://stackoverflow.com/questions/10300833/generate-full-url-in-mvc)代码

```
@Html.ActionLink("Link Title", "Action", "Controller", "http", "www.mysampledomain.com", 
                 "_blank", new {id = paramValue}, new { @class="someClass" }) 
```

# asp.net - 使用正则表达式查找段落结尾

> ID：15158559
> 
> 赞同：2
> 
> 时间：2013-03-01T13:08:36.497
> 
> 标签：asp.net, regex, vb.net

如何找到段落的结尾（TextBox 中的用户键入 ENTER）？什么是正确的正则表达式？我正在使用这段代码：

```
 Protected Function MakeParagraph(ByVal txt As String) As String
    Dim regx As New Regex("/n", RegexOptions.IgnoreCase)        
    Dim matches As MatchCollection = regx.Matches(txt)

    For Each Match As Match In matches
        txt = txt.Replace(Match.Value, "<br/>")
    Next        
    Return txt
End Function

Protected Sub Button1_Click(sender As Object, e As EventArgs)
    Label1.Text = MakeParagraph(TextBox1.Text)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:08:08.773

这里绝对不需要使用正则表达式：只需将所有换行符替换为`<br/>`：

```
Protected Function MakeParagraph(ByVal txt As String) As String
    Return txt.Replace(vbCrLf, "<br/>")
End Function 
```

而且，顺便说一句，如果你想创建 HTML（看起来你想这样做），不要忘记在替换换行符之前对文本进行[HTMLEncode 。](http://msdn.microsoft.com/en-us/library/73z22y6h.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:05:28.960

为什么需要使用正则表达式？你不能做类似的事情：

```
Protected Sub Button1_Click(sender As Object, e As EventArgs)
    Label1.Text = TextBox1.Text.Replace(vbNewLine, "</br>")
End Sub 
```

此外，您可以拆分每个段落并以这种方式处理它们：

```
Protected Sub Button1_Click(sender As Object, e As EventArgs)
    Dim Paragraphs() as String = TextBox1.Text.Split(vbNewLine)
    For Each Paragraph in Paragraphs
        'Do something with the paragraph ex:
        'Label1.Text &= Paragraph & "</br>"
    Next        
End Sub 
```

# php - 如何使用 PHP 检测字符串中的名称、数字和注释（可选）？

> ID：15158564
> 
> 赞同：1
> 
> 时间：2013-03-01T13:09:11.737
> 
> 标签：php, regex

我在泡菜中，有以下几行：

```
John Smith
John Smith +1
John Smith (drink)
John Smith              (    drink      )         
John Smith, drink
John Smith   ,    drink
John Smith   +1   ,    drink
John Smith +1 (drink)
John Smith +1, drink
John Smith +1 drink 
```

我需要做的是将它们放入一个数组中

```
'array' => 
    'name' => 'John Smith',
    'plus' => '',
    'comment' => ''
,
'array' =>
    'name' => 'John Smith',
    'plus' => '+1',
    'comment' => ''
,
'array' => 
    'name' => 'John Smith',
    'plus' => '',
    'comment' => 'drink' 
```

等等......这似乎我需要一些谷歌级别的正则表达式。到目前为止，我用`\n`和`foreach`行分解了整个 .txt 文件，然后爆炸了`space`，但后来我发现自己陷入了混乱之中。因此，如果有人对如何做到这一点有任何更好的想法，我会为这些知识而杀人。任何帮助表示赞赏。我的意思是任何一种。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:58:23.043

让我向您介绍一个适用于您的示例字符串的非常脆弱的解决方案：

```
^ *+([A-Za-z ]*[A-Za-z]) *+(\+\d+)?+ *+(?|,?+ *+\( *+(.*\S) *\) *|,?+ *+(.*\S) *)?$ 
```

名称将在捕获组 1 中。编号（包括符号）将在捕获组 2 中。评论将在捕获组 3 中。

目前，假设名称只能包含空格和英文字母。

另一个假设是只有空格（ASCII 32）被识别为空格字符。

[**演示**](http://www.regex101.com/r/cN9bT4)（请忽略标志，它们仅用于演示目的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:19:55.113

适用于您的示例的道路的另一个脆弱的正则表达式

```
$lines = array
(
"John Smith",
"John Smith +1",
"John Smith (drink)",
"John Smith              (    drink      )",
"John Smith, drink",
"John Smith   ,    drink",
"John Smith   +1   ,    drink",
"John Smith +1 (drink)",
"John Smith +1, drink",
"John Smith +1 drink"
);

foreach($lines as $line)
{
    preg_match('/^(?<name>\w+(?:\s+\w+)?)(?:[\s,]+(?<plus>\+\d+))?(?:[\s,\(]+(?<comment>\w+)[\s\)]*)?$/', $line, $matches);
    var_dump($matches);
} 
```

# android - 如何构建一个包含许多活动的应用程序？

> ID：15158568
> 
> 赞同：0
> 
> 时间：2013-03-01T13:09:22.593
> 
> 标签：android, structure

我正在制作一个展示陈列室的应用程序，此时我创建了太多的类。

主视图是一个 GridView，包含了所有的汽车系列。（每个 GridView 项打开一个新类，所以有 9 个类，代码非常相似）

我该如何构建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T21:50:09.587

为了让@g00dy 更加充实，首先创建一个类

```
class BMW {
    // Reference codes for every series
    public final static int SERIES_1 = 0;
    public final static int SERIES_2 = 1;
    // etc
    public final static int NUMBER_SERIES = 9;

    // All the code needed for every car

    // eg.
    public String giveManufacturuer() {
        return "BMW"; // But see @g00dy - use string resources
    }

    public String giveSeries() {
        return XXXXX;  // Depends on which approach you choose, see below
    }

    public String giveModelName() {
        return XXXXX;  // Depends on which approach you choose, see below 
    }
} 
```

您可以将所有变体加载到此类中（为每辆车添加参考代码并设置一些表以简化索引）。

或者您可以使用每个类的继承来扩展该类：

```
class Series1 extends BMW {
    @Override
    public String giveSeries {
        return "Series 1";
    }
}

class Series1M3Door extends Series1 {
    @Override
    public String giveModelName {
        return "3 Door";
    }
} 
```

然后，当您实例化最终类时，它将使所有三个函数都正常工作。

这种方法很简洁，但仍然会给你很多课程。我怀疑对于您正在做的事情，一些经过深思熟虑的信息表（通过系列和模型代码访问）在隐藏类中可能会更好地工作。

另一种可能更好的方法可能是使用您作为核心类返回的信息来构造代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:27:35.747

我实际上没有时间把所有这些都写下来，意思是一个统一的类，但这里给你一些提示。使用一个标志来指示汽车的型号（例如 Z4、M6），然后在类中使用它来确定代码应该在哪个树上运行。将硬编码的值替换为字符串资源（只需执行此操作，无需其他说明）。在实例化类并使用它的函数时，请考虑标志并将其放在`if()`条件或`switch`. 如果某些模型需要比其他模型更多的代码，您始终可以将其封装在负责模型的代码部分中。但是避免嵌套过多的 if，因为它会变得混乱，就像定义了 100 个类，它们做 99% 的事情与其他类一样。始终尝试尽可能多地重用您的代码。它将减少写入（复制/粘贴）重复的东西，以及应用程序的大小，它将需要的内存等。结论：尝试将类的公共部分组合成一个类（统统统统 :-)）和使用标志，让程序知道在那里做什么。

# web-applications - mvc网站到第一个字节的时间很慢

> ID：15158569
> 
> 赞同：1
> 
> 时间：2013-03-01T13:09:27.370
> 
> 标签：web-applications, asp.net-mvc-4, iis-7.5

任何人都知道为什么 mvc 网站在第一个字节的时间上会如此缓慢。主页没有数据库连接，我刚刚上传了一个 mvc 主页，加载大约需要 15 秒，复制 url 并粘贴到另一个浏览器窗口中，也需要同样长的时间。

但是把 index.html 放在最后，它会瞬间加载。

网址已移除

如果我复制源代码并粘贴到记事本并创建 html 页面，非常快

站点在 Windows IIS 7.5 上运行

在尝试查找问题时，我无法真正上传完整的网站

谢谢乔治

---------首页代码-------------

```
using DevTrends.MvcDonutCaching;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.SessionState;
using Web.UI.ModelHelpers.Validation;

namespace Web.UI.Controllers
    {
    //[SessionState(SessionStateBehavior.Disabled)]
    public class HomeController : Controller
        {
       // [DonutOutputCache(CacheProfile = "Cache1Hour")]
        public ActionResult Index()
            {
            ViewBag.Title = "Active Tourist Search Engine";
            return View();
            }

        public PartialViewResult pvSearchForm(string Option, string Page)
            {
            if (string.IsNullOrEmpty(Option) || string.IsNullOrEmpty(Page))
                {
                var model = new SearchEngineValidation
                {
                    Option = "Web",
                    Page = "1",
                    ISB = "1",
                };
                ViewBag.SearchButtonText = "Web";
                return PartialView("~/Views/Shared/pvSearchForm.cshtml", model);
                }
            else
                {
                var model = new SearchEngineValidation
                {
                    Option = Request.QueryString["Option"],
                    Page = Request.QueryString["Page"],
                    ISB = "0",
                };
                ViewBag.SearchButtonText = model.Option;
                return PartialView("~/Views/Shared/pvSearchForm.cshtml", model);
                }
            }
        }
    } 
```

你会注意到我已经注释掉了缓存，缓存加载速度很快，但我试图找到潜在的问题

提琴手的输出

```
Request Count:   1
Bytes Sent:      323        (headers:323; body:0)
Bytes Received:  6,325      (headers:270; body:6,055)

ACTUAL PERFORMANCE
--------------
ClientConnected:    13:30:39.611
ClientBeginRequest: 13:30:39.611
GotRequestHeaders:  13:30:39.611
ClientDoneRequest:  13:30:39.611
Determine Gateway:  0ms
DNS Lookup:         1ms
TCP/IP Connect: 38ms
HTTPS Handshake:    0ms
ServerConnected:    13:30:39.651
FiddlerBeginRequest:    13:30:39.651
ServerGotRequest:   13:30:39.652
ServerBeginResponse:    13:30:54.102
GotResponseHeaders: 13:30:54.102
ServerDoneResponse: 13:30:54.102
ClientBeginResponse:    13:30:54.154
ClientDoneResponse: 13:30:54.154

    Overall Elapsed:    00:00:14.5428318 
```

# c# - 如何使用读取（获取/使用）内部站点核 心标志图标？

> ID：15158570
> 
> 赞同：1
> 
> 时间：2013-03-01T13:09:33.913
> 
> 标签：c#, c#-4.0, sitecore, sitecore6

有谁知道如何读取内部站点核​​心标志？(\sitecore\shell\Themes\Standard\flags.zip) sitecore 是否有一些用于此操作的 API？我想根据这个标志创建我的国家选择器。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T13:37:41.217

**您可以使用LanguageManager.GetLanguages**方法获取 Sitecore 中的所有语言。然后在任何语言上使用**GetIcon**方法来获取语言的标志：

```
LanguageCollection languages = LanguageManager.GetLanguages(Sitecore.Context.Database);
languages[0].GetIcon(Sitecore.Context.Database); 
```

这将导致**/Flags/16x16/flag_usa.png**并且您需要在开头添加**/~/icon**，例如**/~/icon/Flags/16x16/flag_usa.png**

您可以使用以下代码**获取 flags.zip**中所有文件的列表：

```
string[] files = Sitecore.Resources.ZippedIcon.GetFiles("flags", "/sitecore/shell/themes/standard/flags.zip"); 
```

**还要检查ZippedIcon**类中的其他方法（例如**GetStream**）。

# c++ - 头文件与源/实现文件中包含关键字的 C++“规则”

> ID：15158582
> 
> 赞同：1
> 
> 时间：2013-03-01T13:10:25.517
> 
> 标签：c++, inheritance, polymorphism, header-files

老实说，我对头文件中函数（有时是数据成员）声明中的关键字与实现文件中的关键字感到困惑。

要遵循的规则是什么？例如

（根据评论更新）

*   头文件不包含实现，除非函数被声明为“内联”
*   数据成员不包含默认值，除非类型为 static、const、int/enum（C++11 除外）
*   public/private/protected 通常出现在头文件中
*   “静态”通常出现在头文件中，而不是实现文件中。

你还有其他我可以遵循的规则吗？常数？

继承权呢？我认为“虚拟”只出现在头文件中？如果我从A类继承虚函数到B类，B类的头文件是否必须声明它覆盖的虚函数？A类中的纯虚函数怎么样，当我在B类中重写时，我是否必须在派生类的头文件中包含纯虚函数定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:30:22.170

看起来你正在尝试制定一些正式的规则，但不了解它是如何工作的。但这真的很简单，当预处理器看到#include 指令时，它只是用该文件的内容替换它（就像命令复制整个文件并将其粘贴到这里）。因此，与其制定正式规则，不如问自己问题：该语句是否应该出现在每个使用此标头的 .cpp 文件中？他们还会编译吗？我真的到处都需要它，还是只能在一个提供实现的 .cpp 文件中？如果答案是肯定的，那么这个语句应该去头，如果任何一个都不是，然后把它放到.cpp 实现文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:36:32.597

C 和 C++ 中的`#include`语句比您认为的要简单得多：它获取`include`'d 文件的内容，并将其直接转储到您的包含文件中。这可以是任何东西（我在我的工作中看到很多新手开发人员。如果它是磁盘上的文件，在某些时候有人尝试过`include`）：甚至是 .cpp 文件。如果您想向自己证明这一点，您可以复制并粘贴包含文件的内容来代替`include`- 一切都应该像以前一样工作。

为了完整性：一旦预处理器将所有包含的文件转储到要求它们的位置，编译器就会分别编译每个文件。这通常会给您留下一堆没有实现的声明和一堆没有声明的实现：链接器会整理出这些引用。因此，如果您遇到链接器错误，则意味着您在某处不匹配某些内容：也许您声明了两次，或者从未实现过。

我们实际上拥有的是一系列关于我们想要在头文件中什么以及我们想要在源文件中什么的最佳实践。通常，我们喜欢在头文件中声明。**换句话说，头文件应该告诉我（程序员）我希望在实现中找到什么**。通常，这些是声明：因此您通常只能在标题中看到访问修饰符（公共、私有、受保护）。一些程序员会做一些“奇怪”的事情，比如在头文件中编写构造函数：这是有效的，但通常不是预期的——你希望你的头文件告诉我我可以从你的代码中使用什么，而不是你的代码是如何工作的。

# ruby-on-rails-3 - 如何在所选目录中使用 .sh 脚本启动 Rails 服务器

> ID：15158584
> 
> 赞同：0
> 
> 时间：2013-03-01T13:10:31.847
> 
> 标签：ruby-on-rails-3, bash, scripting

我已经用 Rails 开发一年了，虽然 Rails 的自动化程度很高，但我想更进一步。

每次我开始处理项目时，我打开终端，cd 到项目文件夹，而不是终端中的新选项卡，然后使用“rails s”启动服务器，然后返回第一个选项卡运行“sublime”。这样我就可以在我的文本编辑器 Sublime Text 中加载该文件夹。

我想要的是创建一个 .sh 脚本来为我做所有这些，但到目前为止我还不能让它启动服务器。

那么，如何在所选目录中使用 .sh 脚本启动 Rails 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:46:19.227

@Manolo 给了我一个想法，所以我想出了这个：

我修改了我的 .bashrc，如以下答案所示：

[https://superuser.com/a/198022](https://superuser.com/a/198022)

基本上我加了

```
eval "$BASH_POST_RC" 
```

在我的 .bashrc 结束时，我可以在执行后运行任意命令。

接下来，我制作了以下脚本：

```
#launch_project.sh
#/bin/bash

cd <PROJECT DIR GOES HERE>;
firefox -P "development";
sublime . &;
gnome-terminal \
  --tab --title="Server" -e 'bash -c "export BASH_POST_RC=\"rails s\";exec bash"' \
  --tab -e 'bash -c "export BASH_POST_RC=\"git s\"; exec bash"'; 
```

这会启动我在 Firefox 上的开发配置文件、带有项目根目录的编辑器和带有两个选项卡的终端窗口——一个运行 WEBrick 服务器，另一个运行 git status。

我为脚本创建了一个桌面快捷方式，所以我有自己的自定义 IDE :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:34:43.033

试试这个：

```
#!/bin/sh
cd your_project_folder
nohup rails s > /tmp/rails_server.log 2>&1 &
sublime . 
```

`/tmp/rails_server.log`你可以在文件中看到你的 Rails 服务器的输出

# wpf - WPF：保存图像以访问？如何？

> ID：15158588
> 
> 赞同：0
> 
> 时间：2013-03-01T13:10:41.177
> 
> 标签：wpf, vb.net, image, ms-access, adodb

我的浏览按钮有这样的代码。

```
'将 dlg 作为新的 Microsoft.Win32.OpenFileDialog()
            ………………………………………………………………………………

            结果暗淡？作为布尔 = dlg.ShowDialog()
            如果结果 = True 那么
                暗淡文件名 As String = dlg.FileName
                brand_img.Source = 新位图图像（新 Uri（文件名））
                tpath.Text = 文件名
            万一

```

然后我想将该图像保存在我的数据库中。怎么可能？感谢他的帮助。我有一个像这样的保存按钮...

```
cn.ConnectionString = "Provider=Microsoft.Ace.Oledb.12.0; 数据源=" & My.Application.Info.DirectoryPath.ToString() & "\mvdata.accdb;"
            cn.Open()

            如果 rs.State = True 则 rs.Close()
            rs.Open("Select * from company", cn, ADODB.CursorTypeEnum.adOpenDynamic, ADODB.LockTypeEnum.adLockOptimistic)

            如果 textbrname.Text = "" 或 textbrdesc.Text = "" 那么
                terr.Foreground = Brushes.Red
                terr.Text = "请确保字段不为空。"
            别的
                rs.AddNew()
                rs("comp_imp").Value = ???????
                rs("comp").Value = textbrname.Text
                rs("comp_desc").Value = textbrdesc.Text
                rs.Update()
            万一
            rs.Close()
            cn.Close()

```

再次感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:05:52.510

[http://www.sourcecodester.com/visual-basic-net/5090/phone-book-using-vbnet-ms-access-2003.html](http://www.sourcecodester.com/visual-basic-net/5090/phone-book-using-vbnet-ms-access-2003.html)

this is a simple program which store image in database ..may be this is helpful to you,

# css - 分组 Css 选择器（即子 OR 选择器）

> ID：15158593
> 
> 赞同：3
> 
> 时间：2013-03-01T13:10:50.627
> 
> 标签：css, css-selectors

是否可以将选择器嵌套或组合在一起？例如，我有以下 CSS：

```
.feature > *:hover > .info,
.feature > .select > .info   {bottom:0;}
.feature > *:hover > .img,
.feature > .select > .img,
.feature > *:hover > .link,
.feature > .select > .link   {top:-25px;bottom:51px;} 
```

是否可以以类似于以下伪 CSS 的方式对许多选择器进行分组（我正在使用方括号，但我意识到这不起作用）：

```
.feature > (*:hover,.select) > .info         {bottom:0;}
.feature > (*:hover,.select) > (.img,.link)  {top:-25px;bottom:51px;} 
```

我注意到 CSS3 有 :not() 选择器，但我找不到 :or() 选择器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T13:39:51.000

**`:any()`**在 Fx 4+ as 中实现`:-moz-any()`（以及 Saf 5.1 和 Chr 12+ as `:-webkit-any()`，尽管我从未在 WebKit 上测试过），请参阅[https://developer.mozilla.org/en-US/docs/CSS/:any](https://developer.mozilla.org/en-US/docs/CSS/:any)

> 注意：这个伪类正在以**:matches()**的名称在 CSS 选择器级别 4 中进行标准化。:-vendor-any() 的语法和名称很可能会在不久的将来更改以反映它。

This is quite OK in a media query @-rule (except for recent IE) and otherwise you should **add an HTML class to the element you want to style** and use this class in your CSS selector. Or use a preprocessor where nesting will save you a few repeats.

See @Christoph answer for the near future and `:matches()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T13:23:25.007

可以使用在[Selectors Level 4](http://dev.w3.org/csswg/selectors4/#matches)`:matches()`中定义的伪类（当前处于编辑器草稿状态，因此可能会发生变化），目前在任何浏览器中都没有实现:-D

在那之前，你注定要像以前那样写它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T13:17:09.663

不，很遗憾，在正常情况下这是不可能的。您必须使用**CSS 预处理器**，例如：

1.  [较少的](http://lesscss.org/)
2.  [SASS](http://sass-lang.com/)

一个例子：

```
.feature {
    > *:hover, > .select {
        .info {
            bottom: 0;
        }
    } 
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T13:16:06.403

不，CSS 无法将许多 CSS 选择器组合成一行。他们必须用自己的线路分开。

# python - 根据值从字典中删除条目

> ID：15158599
> 
> 赞同：36
> 
> 时间：2013-03-01T13:11:10.193
> 
> 标签：python

我有一个带有字符整数键值对的字典。我想删除所有值为 0 的键值对。

例如：

```
>>> hand
{'a': 0, 'i': 0, 'm': 1, 'l': 1, 'q': 0, 'u': 0} 
```

我想将同一个字典简化为：

```
>>> hand
{'m': 1, 'l': 1} 
```

有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-01T13:13:03.513

您可以使用[字典理解](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)：

```
>>> { k:v for k, v in hand.items() if v }
{'m': 1, 'l': 1} 
```

或者，在 2.7 之前的 Python 中，[`dict`](http://docs.python.org/2/library/stdtypes.html#dict)构造函数与[生成器表达式](http://docs.python.org/2/reference/expressions.html#grammar-token-generator_expression)相结合：

```
>>> dict((k, v) for k, v in hand.iteritems() if v)
{'m': 1, 'l': 1} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-01T13:13:05.980

```
hand = {k: v for k, v in hand.iteritems() if v != 0} 
```

对于 Python 2.7 之前的版本：

```
hand = dict((k, v) for k, v in hand.iteritems() if v != 0) 
```

在这两种情况下，您都会过滤掉值为 的键`0`，并分配`hand`给新字典。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-01T13:20:05.537

如果您不想创建新字典，可以使用以下命令：

```
>>> hand = {'a': 0, 'i': 0, 'm': 1, 'l': 1, 'q': 0, 'u': 0}
>>> for key in list(hand.keys()):  ## creates a list of all keys
...     if hand[key] == 0:
...             del hand[key]
... 
>>> hand
{'m': 1, 'l': 1}
>>> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-01T13:12:54.787

听写理解？

```
{k: v for k, v in hand.items() if v != 0} 
```

在 python 2.6 及更早版本中：

```
dict((k, v) for k, v in hand.items() if v != 0) 
```

# filesystems - EXT2文件系统结构细节是什么？

> ID：15158600
> 
> 赞同：1
> 
> 时间：2013-03-01T13:11:14.957
> 
> 标签：filesystems, ext2

我正试图围绕 EXT2 文件系统展开思考，但我找不到一个可以*详细显示 EXT2 文件系统的*地方。

最后我自己画了一张图。所以我走到了这一步。现在我试图弄清楚以下内容（我已经找到了一些信息）：

*   每个扇区的字节数：0.5kB - 4kB
*   每个块的字节数：4kB - 64kB
*   每块扇区数：1 - 128
*   每个块组的块数：？
*   每个分区的块组数：？

对我来说很疯狂，我找不到一个有这些信息的地方。

编辑：也刚刚发现这个，这意味着我每个块号的字节数可能是错误的：

```
#define EXT2_MIN_BLOCK_SIZE     1024
#define EXT2_MAX_BLOCK_SIZE     4096 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-25T21:39:03.170

[我通常在osdev wiki](http://wiki.osdev.org/Ext2)上找到关于 ext2 的信息，该wiki又链接[到这里](http://www.nongnu.org/ext2-doc/)。

每个块的字节数在超级块`1024<<n`中`n`给出，是一个 32 位整数。所以理论上，一个块可能在 1024 到……很多字节之间。通常，使用 1、2、4 或 8 kB 的块大小，但这取决于几个因素，例如分区大小和预期的平均文件大小。

每个块组包含一个空闲块的块位图。这限制`8*block size`了每个块组的块数。每个块组的 inode 也是如此。实际值在超级块中找到。

这反过来又给出了填充分区所需的块组数量的下限。

# flash - Flex：邮政编码验证器无法正常工作

> ID：15158614
> 
> 赞同：0
> 
> 时间：2013-03-01T13:11:50.520
> 
> 标签：flash, apache-flex, flex3, flash-builder

我只想使用 Flex 的 ZipCode 验证器验证加拿大邮政编码。我是这样做的：

```
<mx:ZipCodeValidator
        id="zipCodeTextInputFieldValidator"
        domain="{ZipCodeValidatorDomainType.CANADA_ONLY}"
        source="{this.zipCodeTextInputField}" 
        property="text" 
        triggerEvent=""
        wrongCAFormatError="The Canadian postal code must be formatted 'A1B 2C3'."
    /> 
```

发布它也验证美国邮政编码。如果我给出`923 424`了邮政编码，它会抛出验证错误说`The ZIP code must be 5 digits or 5+4 digits.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:31:50.967

编辑：在源代码 ZipCode 验证器检查字符串长度：

```
// do an initial check on the length
if ((len < 5 || len > 10) || (len == 8) || 
    (!containsLetters && (len == 6 || len == 7)))
{
    // it's the wrong length for either a US or Canadian zip
    results.push(new ValidationResult(
        true, baseField, "wrongLength",
        validator.wrongLengthError));
    return results;
} 
```

你可以使用数字验证器吗？加拿大的邮政编码如何？

# php - 在大数组中增加值的巧妙方法

> ID：15158616
> 
> 赞同：0
> 
> 时间：2013-03-01T13:11:54.797
> 
> 标签：php, arrays

嘿嘿！

我正在建立一个统计数据概览，说明在给定日期的任何给定 5 分钟间隔内应该有多少人在工作。比如说，我们有 6 个人在 10.50 工作，同样在 10.55，然后一个人回家，我们有 5 个人在 11.00 工作

现在，我想跟踪这一点的方式是拥有一个包含 5x12x24 元素的数组（每 5 分钟 1 个元素，间隔 24 小时），其中我遍历每个员工轮班时间并在给定的 5 分钟间隔内增加元素他们的转变接管了他们。（假设一个人从 9.00 工作到 10.00，那么我会将值从 9.00、9.05、9.10 增加到 10.00 加一）

稍后我需要数据来制作图表，这就是我将其存储在数组中的原因。

现在我的问题是，哪种方式最快？

我应该从一个包含所有时间元素的数组开始，然后在我完成员工的轮班时间时递增它（$arr['9.05']++），还是应该从创建一个空数组开始，然后检查时间值是否存在，如果不存在，则创建该元素，如果存在，则增加它？

还是一般有更聪明的方法来做到这一点？

我问，如果你有 50 多名员工必须运行此功能，我可以看到这将成为一项非常繁重的操作，所以它可以做得越聪明越好 :)

PS。班次时间来自我无法访问的数据库，所以我只有大便开始和结束的时间戳。

# php - onFlush 事件处理程序中的大量更新和删除

> ID：15158617
> 
> 赞同：1
> 
> 时间：2013-03-01T13:11:56.040
> 
> 标签：php, mysql, doctrine-orm

我想在我的学说模型中添加一个安全层。为了能够在 SQL 级别的学说过滤器中添加权限检查，我必须维护一些数据库表，其中包含为每个实体计算的访问控制令牌的缓存。

现在我必须更新这些表，在某些情况下我必须完全重建这些缓存表之一。这必须在侦听 onFlush 事件的事件侦听器中完成。存档此文件的最佳（最高效和最可靠）方式是什么？

它记录了如何持久化新实体以及如何更改已持久化实体的关联和原始属性。这是通过调用工作单元对象的 computeChangeSet() 或 recomputeSingleEntityChangeSet() 并将每个单个实体传递给这些方法之一来完成的。在这些更新期间必须锁定整个系统，尽管它们很少见，但应尽快完成。此外，我不知道如何删除实体甚至截断整个表，而不必先读出所有实体。

*   如何删除 onFlush 事件中的实体？
*   如何在 onFlush 事件中进行大规模更新（表截断和插入数十万条记录）？我想我可以在这种情况下使用 $EntityManager->getConnection()->executeUpdate() ，对吗？
*   如何在 onFlush 事件中锁定表（读取）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T14:09:51.300

首先，`onFlush`是非常强大的，所以你在此可能是多虑了。

要删除 中的实体`onFlush`，只需将它们安排在您的侦听器中删除：

```
public function onFlush(OnFlushEventArgs $eventArgs) {
    $em  = $eventArgs->getEntityManager();
    $uow = $em->getUnitOfWork();

    foreach ($uow->getScheduledEntityUpdates() as $updated) {
        $em->remove($updated);
    }

    $uow->computeChangeSet();
} 
```

要处理大量更新，您可以：

*   使用 DQL 查询来更新您要处理的实体
*   使用数据夹具库中的[ORMPurger](https://github.com/doctrine/data-fixtures/blob/v1.0.0-ALPHA3/lib/Doctrine/Common/DataFixtures/Purger/ORMPurger.php)来处理诸如截断表之类的操作（重现其逻辑或使用具有可用元数据子集和相同连接的第二个实体管理器）
*   如您所说，直接处理连接：您正在进行交易，因此非常安全

请记住，在不更新应用程序级对象的情况下更改数据库状态（大量更新/删除）是有风险的，因此请考虑在此类操作后清除实体管理器。

在 ORM 中有一个关于[事务、并发和锁定](http://docs.doctrine-project.org/en/latest/reference/transactions-and-concurrency.html)的完整文档章节。据我所知，所有这些操作在`onFlush`.

# netbeans - JSF 2 模板本身显示样式，但模板客户端显示没有样式的纯文本

> ID：15158620
> 
> 赞同：0
> 
> 时间：2013-03-01T13:12:06.193
> 
> 标签：netbeans, jsf-2

我第一次尝试使用 JSF Facelet 模板/Facelet 模板客户端。我正在使用 Netbeans 7.2.1 创建模板和模板客户端。当我运行创建的 JSF 项目并调用`http://localhost:8080/jpaweb/template.xhtml`时，我可以看到模板样式，但是当我调用客户端模板时，`http://localhost:8080/jpaweb/client.xhtml`我看到没有样式的纯文本。这两个文件位于同一目录中，由 Netbeans 向导创建。请帮我解决这个问题。

模板.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link href="./resources/css/default.css" rel="stylesheet" type="text/css" />
        <link href="./resources/css/cssLayout.css" rel="stylesheet" type="text/css" />
        <title>Facelets Template</title>
    </h:head>

    <h:body>

        <div id="top" class="top">
            <ui:insert name="top">Top</ui:insert>
        </div>
        <div>
            <div id="left">
                <ui:insert name="left">Left</ui:insert>
            </div>
            <div id="content" class="left_content">
                <ui:insert name="content">Content</ui:insert>
            </div>
        </div>
    </h:body>

</html> 
```

客户端.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <body>

        <ui:composition template="./template.xhtml">

            <ui:define name="top">
                Welcome, to my website
            </ui:define>

            <ui:define name="left">
                My links
            </ui:define>

            <ui:define name="content">
                This page is created for testing
            </ui:define>

        </ui:composition>

    </body>
</html> 
```

如果您让 Netbeans 创建 JSF 项目并且 JSF 模板和模板客户端将为您提供此结果。我也在 Netbeans 1.7.0 中尝试过。同样的问题。

编辑：我运行页面不喜欢`http://localhost:8080/jpaweb/client.xhtml`但喜欢`http://localhost:8080/jpaweb/faces/client.xhtml`它。我的项目中没有“faces”目录。我们是否必须向所有 JSF 链接添加“面孔”？

编辑2：我认为netbeans自动配置所有jsf文件都保存在faces目录中，即使我的项目中没有这样的目录。在项目属性 -> 框架 -> JavaServer Faces -> 配置中有字段 JSF Servlet URL 模式，其值为 /faces/*。我认为这意味着必须像在 faces 目录中一样调用 jsf 文件。试图强迫它在我的项目中出现是一个错误:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T18:51:45.157

解决了。`Project properties -> Frameworks -> JavaServer Faces -> Configuration -> JSF Servlet URL Pattern`将from的值更改`/faces/*`为`*.xhtml`，并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:02:36.740

您的**client.xhtml**内容文件未正确组合。不要包含 html 标签，因为 JSF 不会从`ui:composition`这里的标签中解析出任何内容。

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
template="./template.xhtml">
        <ui:define name="top">
            Welcome, to my website
        </ui:define>

        <ui:define name="left">
            My links
        </ui:define>

        <ui:define name="content">
            This page is created for testing
        </ui:define>
</ui:composition> 
```

我用你的模板进行了测试，它可以工作。

# delphi - Delphi 2009 之前如何处理 UTF-8 和 ANSI 转换？

> ID：15158621
> 
> 赞同：3
> 
> 时间：2013-03-01T13:12:06.390
> 
> 标签：delphi, unicode, utf-8, delphi-2009, delphi-2006

在 Delphi 2009 中，我们有：

```
RichEdit1.Lines.LoadFromFile(OpenDialog1.FileName,TEncoding.UTF8);
RichEdit1.Lines.SaveToFile(OpenDialog2.FileName,TEncoding.Unicode); 
```

如果我还没有，我该如何在 Delphi 2006 上执行此操作`TEconding`？

有什么办法可以把那个较新的图书馆运回那里吗？或者是否有隐藏在网络中的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T13:20:11.337

我相信这一点`UTF8Encode`，`UTF8Decode`甚至在 Delphi 2009 之前就已经存在。因此您可以手动解码/编码字节字符串。（我自己也做过。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T19:16:06.787

这是我的一个 Delphi 7 项目的片段：

```
function LoadFile(const fn: string): WideString;
var
  f:TFileStream;
  src:AnsiString;
  wx:word;
  i,j:integer;
begin
  if FileExists(fn) then
   begin
    f:=TFileStream.Create(fn,fmOpenRead or fmShareDenyNone);
    try
      f.Read(wx,2);
      if wx=$FEFF then
       begin
        //UTF16
        i:=(f.Size div 2)-1;
        SetLength(Result,i);
        f.Read(Result[1],i*2);
        //detect NULL's
        for j:=1 to i do if Result[j]=#0 then Result[j]:=' ';//?
       end
      else
       begin
        i:=0;
        if wx=$BBEF then f.Read(i,1);
        if (wx=$BBEF) and (i=$BF) then
         begin
          //UTF-8
          i:=f.Size-3;
          SetLength(src,i);
          f.Read(src[1],i);
          //detect NULL's
          for j:=1 to i do if src[j]=#0 then src[j]:=' ';//?
          Result:=UTF8Decode(src);
         end
        else
         begin
          //assume current encoding
          f.Position:=0;
          i:=f.Size;
          SetLength(src,i);
          f.Read(src[1],i);
          //detect NULL's
          for j:=1 to i do if src[j]=#0 then src[j]:=' ';//?
          Result:=src;
         end;
       end;
    finally
      f.Free;
    end;
   end
  else
    Result:='';
end; 
```

# java - Android openGL 渲染器返回空指针异常

> ID：15158627
> 
> 赞同：0
> 
> 时间：2013-03-01T13:12:36.573
> 
> 标签：java, android, opengl-es, nullpointerexception

我正在创建一个使用 GL10 的应用程序，它由三个类组成，

A 类扩展了 Activity。B 类实现渲染器。C 类扩展了 Activity。

C 类包含 3D 立方体的数据，B 类是渲染器，A 类显示它。

为了显示它，我在 A 类中使用以下方法，

```
GLCubeRenderer ourSurface = new GLCubeRenderer();

public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    GLSurfaceView glSurfaceView =
        (GLSurfaceView) findViewById(R.id.ourCube);
    glSurfaceView.setRenderer(ourSurface);
    setContentView(R.layout.cubelayout);

} 
```

XML是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<com.mastermind.GLCubeRenderer
    android:id="@+id/ourCube"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    />

</RelativeLayout> 
```

问题在于，在 A 类的 Java 代码中，“glSurfaceView.setRenderer(ourSurface);”行 返回空指针异常。

B 类（渲染器）代码：

```
 private GLCube cube = new GLCube();
static Context context;
public static float xAngle;

public static float yAngle;

final float[] ambient = { 0.1f, 1, 1, 1 };
final float[] position = { 45, 20, 0, 1 };
final float[] direction = { 0, -1, 0 };

public GLCubeRenderer() {
    cube = new GLCube();

}

@Override
public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    // TODO Auto-generated method stub
    gl.glDisable(GL10.GL_DITHER);
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);
    gl.glEnable(GL10.GL_LIGHT1);
    gl.glLightfv(GL10.GL_LIGHT1, GL10.GL_DIFFUSE, ambient, 0);
    gl.glLightfv(GL10.GL_LIGHT1, GL10.GL_POSITION, position, 0);
    gl.glLightfv(GL10.GL_LIGHT1, GL10.GL_SPOT_DIRECTION, direction, 0);
    gl.glLightf(GL10.GL_LIGHT1, GL10.GL_SPOT_CUTOFF, 30.0f);
    gl.glClearColor(.0f, 0, .0f, 0);
    gl.glClearDepthf(1f);

}

@Override
public void onDrawFrame(GL10 gl) {
    // TODO Auto-generated method stub
    gl.glDisable(GL10.GL_DITHER);
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
    GLU.gluLookAt(gl, 0, 0, -5, 0, 0, 0, 0, 2, 0);

    gl.glRotatef(xAngle, 0, xAngle, 0);
    // gl.glRotatef(yAngle, yAngle, 0, yAngle);

    gl.glActiveTexture(GL10.GL_TEXTURE0);
    gl.glTexEnvx(GL10.GL_TEXTURE_ENV, GL10.GL_TEXTURE_ENV_MODE,     GL10.GL_MODULATE);
    gl.glTexParameterx(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_REPEAT);
    gl.glTexParameterx(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);

    cube.draw(gl);
}

@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {
    // TODO Auto-generated method stub
    gl.glViewport(0, 0, width, height);
    float ratio = (float) width / height;
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    gl.glFrustumf(-ratio, ratio, -1, 1f, 1, 25);

} 
```

C类代码：

```
private float vertices[] = {
        1, 1, -1, // p0-top front right
        1, -1, -1, // p1-bottom front right
        -1, -1, -1, // p2-bottom front left
        -1, 1, -1, // p3-front top left
        1, 1, 1, // p4-top back right
        1, -1, 1, // p5-bottom back right
        -1, -1, 1, // p6-bottom back left
        -1, 1, 1 // p7-front back left

};

// Buffer for our vertices
private FloatBuffer vertBuff;

// Index for our points e.g. p0 = 0f, 1f, in vert Index
private short[] pIndex = { 
        3, 4, 0,
        0, 4, 1,
        3, 0, 1,
        3, 7, 4,
        7, 6, 4,
        7, 3, 6,
        3, 1, 2,
        1, 6, 2,
        6, 3, 2,
        1, 4, 5,
        5, 6, 1,
        6, 5, 4 
        };

// Buffer for points index
private ShortBuffer pBuff;

// Triangle constructor
public GLCube() {

    // Construction of vertices
    // byte buffer for vertices
    ByteBuffer bBuff = ByteBuffer.allocateDirect(vertices.length * 4);
    bBuff.order(ByteOrder.nativeOrder());
    vertBuff = bBuff.asFloatBuffer();
    vertBuff.put(vertices);
    vertBuff.position(0);

    // Construction of points
    // point byte buffer
    ByteBuffer pointByteBuff = ByteBuffer.allocateDirect(pIndex.length * 2);
    pointByteBuff.order(ByteOrder.nativeOrder());
    pBuff = pointByteBuff.asShortBuffer();
    pBuff.put(pIndex);
    pBuff.position(0);
}

public void draw(GL10 gl) {

    gl.glFrontFace(GL10.GL_CW);
    gl.glEnable(GL10.GL_CULL_FACE);
    gl.glCullFace(GL10.GL_BACK);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertBuff);
    gl.glDrawElements(GL10.GL_TRIANGLES, pIndex.length,   GL10.GL_UNSIGNED_SHORT, pBuff);
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisable(GL10.GL_CULL_FACE);
} 
```

请原谅问题的长度，但有人有任何解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:17:55.763

我不明白，你在你的XML中将ourCube定义为GLCubeRenderer，它和ourSurface是同一个类。

```
GLSurfaceView glSurfaceView =
    (GLSurfaceView) findViewById(R.id.ourCube); 
```

和

```
<com.mastermind.GLCubeRenderer
     android:id="@+id/ourCube"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     /> 
```

然后再次在获取ourCube 的引用时将其转换为GLSurfaceView。

GLCubeRenderer 是否扩展了 GLSurfaceView？在这种情况下，您是否尝试将此表面视图的渲染器设置为同一类的实例？

我想你可能在这里混淆了课程。

# css - div 的高度与它旁边的内容不符

> ID：15158629
> 
> 赞同：0
> 
> 时间：2013-03-01T13:12:39.217
> 
> 标签：css, html, height

我将解释我的问题：

我有一个内容 div，里面有 3 个其他 div：

```
 #content
#menu            #text          #sidebar
..          text...........      ------
..          text...........      ------
..          text...........      ------
            text...........      ------
            text...........
            text........... 
```

这就是它的样子，#sidebar 中的条纹显示其中的内容。侧边栏有一个绿色背景，该颜色贯穿整个网站。

但我想要的是#sidebar 的长度与#text 的长度相同。然后它应该看起来像这样：

```
 #content
#menu            #text          #sidebar
..          text...........      ------
..          text...........      ------
..          text...........      ------
            text...........      ------
            text...........      ------     
            text...........      ------ 
```

我不是专业的程序员，所以希望有人能帮助我。我已经尝试了一些“合乎逻辑”的事情，例如： - 将 #sidebar 的高度设置为自动 - 将 #sidebar 的高度设置为 100%（这只让它更长一点）

希望有人可以帮助我！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:14:34.107

如果您在内容 div 上定义了一个高度，并为每个树提供了应该这样做的 style="height:inherit" :)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T13:22:24.957

尝试以下更改：

```
#content {
    position: relative;
}

#balk {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
}
#balkgroen {
    height: 100%;
} 
```

然后，您可以删除`float`on`#balk`和on 。`#balkgroen``margin``#balk`

# regex - 正则表达式匹配特定的 URI

> ID：15158639
> 
> 赞同：5
> 
> 时间：2013-03-01T13:13:13.837
> 
> 标签：regex, rest, uri

需要从请求的 URI 中捕获 3 个元素。

URI 的有效格式如下：

```
/users/{id}.{size}.{type} 
```

而 id 和 size 可以是数字。并且类型只能是“jpg”或“png”。

扭曲的是尺寸是可选的。因此 URI 的另一种格式是：

```
/users/{id}.{type} 
```

有效示例如下：

```
/users/123.100.jpg
/users/123.100.png
/users/123.jpg
/users/123.png 
```

无效示例如下：

```
/users/asd.jpg
/users/123.tiff
/users/123..jpg
/users/123..100..jpg
/users/123..100.jpg
/users/123.100 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:25:53.543

试试这个正则表达式。它提取`id, size and type`

首先，此正则表达式验证 url 是否与您的有效模式匹配。

```
\/users\/(\d+)(?:\.(\d+))?\.(jpg|png) 
```

*   ID：`(?<=/)\d+`
*   尺寸：`(?<=\.)\d+(?=\.)`. 假设 url 是以有效的方式构造的。
*   类型：`.*(jpg|png)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:26:22.887

这个正则表达式应该为你做验证：

```
/users/(\d+\.){1,2}(jpg|png) 
```

例子见这里：[http ://regexr.com?33vba](http://regexr.com?33vba)

# perl - Perl - 哈希错误 - 未定义的值作为符号错误

> ID：15158641
> 
> 赞同：-2
> 
> 时间：2013-03-01T13:13:15.293
> 
> 标签：perl, parsing, hash

我正在用 XML::TWIG 解析一个巨大的文本 XML 文件。我必须将数据转换为标准 CSV，以便以后可以将其输入 SQL 数据库。XML 输入文件包含几个客户的数据。一些客户将拥有比其他客户更多的数据（更多标签）。所以我一直将所有数据放入哈希中，以便我可以区分哈希中的标签。

我为每个客户重置哈希。现在，由于任何客户都可以有额外的标签，当我尝试打印未定义的键的哈希时，它会给出错误：

```
Can't use an undefined value as a symbol reference at xml.pl at line 129 
```

示例代码是

```
print $hash(aKeyWhichWasNotDefined); 
```

如果哈希键在哈希中不存在，是否有打印出一个空字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T13:16:13.360

首先，正确的语法是：

```
$hash{aKeyWhichWasNotDefined}; 
```

您可以使用定义或运算符作为快速解决方案：

```
print $hash{aKeyWhichWasNotDefined} // ''; 
```

`exists`还`defined`可以让您检查哈希键。

```
if (exists $hash{key}) { print "key exists but the value could be undefined" }
if (defined $hash{key}) { print "key exists and has a defined value" } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T13:15:54.277

获取哈希值的正确方法是

```
print $hash{aKeyWhichWasNotDefined}; 
```

也就是说，使用`{`（大括号）而不是`(`（括号）。

如果您打印未初始化的值，您仍然会收到警告。在 Perl 5.10+ 上，您可以使用定义或运算符：

```
print $hash{'non-existent-key'} // ''; 
```

在较早的 Perls 上，很难做到：

```
print defined $hash{'non-existent-key'} ? $hash{'non-existent-key'} : ''; 
```

# icalendar - Office365可以叠加日历吗（升级前版）

> ID：15158642
> 
> 赞同：-1
> 
> 时间：2013-03-01T13:13:16.160
> 
> 标签：icalendar, office365

如何在 Office 365 中叠加日历。

我知道如何在 Outlook 中执行此操作，但在 Office 365 中找不到如何执行此操作。当我打开另一个日历时，无论是工作同事还是我导入的 iCal，它都会与我自己的并排显示日历但不在它上面让我看到一个统一的视图。

**编辑**：这是我正在谈论的 Office 365 - 它似乎是升级前的版本： ![我的 owa 电子邮件客户端的屏幕截图](../Images/215b53050ebc4f04346bcc2432c6e829.png)

这就是日历的外观： ![我的 owa 日历的屏幕截图](../Images/52cd50f1e0520a845f8b558a8d0bd4e7.png)

我想要实现的是`ics`日历覆盖主日历。因此，当 ics 日历包含时间表信息、讲座、研讨会等时，您可以轻松查看所有内容。也有可能添加其他 ics 日历，最喜欢的足球队，体育社团活动等。如果它们必须彼此并排显示（如我的第二个屏幕截图所示），这将很难理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:28:22.463

您是在谈论 Office 365 预升级还是新的 Office 365？
使用新的 Office 365，我认为默认情况下日历会重叠，您可以在日历视图的右上角进行更改。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-21T23:16:05.287

您可以通过打开 1 个日历开始覆盖日历，然后打开第二个日历，然后单击第二个日历，然后单击视图选项卡并单击覆盖。使用此过程，您可以叠加多个日历。如果您在没有新日历时单击覆盖，它将取消覆盖您添加的最后一个日历。

# jquery - jQuery + - 按钮没有像我预期的那样输入值

> ID：15158644
> 
> 赞同：1
> 
> 时间：2013-03-01T13:13:22.213
> 
> 标签：jquery, increment

我有一个 ajax 模块，可以在客户更改数量或选择他们需要的属性时更新网站上的价格。只要在输入框中输入值，价格就会更新。我决定添加一些漂亮的 jQuery 按钮来增加值，而不是用户必须单击框然后输入数量。问题是我用来创建按钮的脚本不会触发价格变化，即使它确实改变了输入字段中的值。

我的脚本是：

```
<script language="javascript">
jQuery.noConflict();
jQuery(document).ready(function() {
jQuery("#cartAdd").prepend('<div class="dec button">-</div>');
jQuery("#cartAdd").append('<div class="inc button">+</div>');
jQuery(".button").click(function() {
var $button = jQuery(this);
var oldValue = $button.parent().find("input").val();

if ($button.text() == "+") {
var newVal = parseFloat(oldValue) + 1;
} else {
if (oldValue >= 1) {
var newVal = parseFloat(oldValue) - 1;
}
}
$button.parent().find("input").val(newVal);
});
});
</script> 
```

有什么方法可以让价格更新器识别输入字段中的新值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:15:51.440

您需要对页面加载后加载的元素使用委托函数

```
jQuery(document).on('click','.button',function(){
 //Code here
}); 
```

[.on()](http://api.jquery.com/on/)的文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:15:57.103

```
try this 1...

    jQuery(".button").on('click',(function() {
    var $button = jQuery(this);
    var oldValue = $button.parent().find("input").val();

    if ($button.text() == "+") {
    var newVal = parseFloat(oldValue) + 1;
    } else {
    if (oldValue >= 1) {
    var newVal = parseFloat(oldValue) - 1;
    }
    }
    $button.parent().find("input").val(newVal);
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T13:46:07.097

您可能想要使用事件委托，这样您就不必担心“实时”，如果您正在寻找要触发的更改事件，您必须像 Tetaxa 所说的那样手动完成。像这样的东西：

```
<script language="javascript">
  jQuery.noConflict();
  jQuery(document).ready(function() {
    var $cartAdd = jQuery('#cartAdd')
      , $quantity = $cartAdd.find('input')
      , $price = jQuery('#price');

    $cartAdd.prepend('<div class="dec button">-</div>');
    $cartAdd.append('<div class="inc button">+</div>');

    $cartAdd.click(function(evt) {
      var $incrementor = jQuery(evt.target)
        , quantity = parseInt($quantity.val(), 10);

      if($incrementor.hasClass('inc')) {
        quantity += 1;
      } else if($incrementor.hasClass('dec')) {
        quantity += -1;
      }

      if(quantity > 0) {
        $quantity.val(quantity).change();
      }
    });

    $quantity.change(updatePrice);

    function updatePrice() {
      var price = 15.50
        , quantity = parseInt($quantity.val(), 10);
      $price.text(quantity * price);
    }
  });

</script> 
```

这是一个带有工作代码的[jsFiddle 。](http://jsfiddle.net/H3dfJ/)

编辑：我添加了一些处理数量输入上的更改事件的代码。

编辑2：我知道现在的问题是什么。查看源代码后，您似乎只是在文本输入上寻找 onkeyup，因此触发更改不会产生任何影响。为了解决您当前的问题，我将替换上述内容：

```
 if(quantity > 0) {
        $quantity.val(quantity).change();
      } 
```

而是把

```
 if(quantity > 0) {
        $quantity.val(quantity);
        xhr.getPrice();
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T13:25:22.320

如果我理解正确，输入字段中的值已更改，但您有一些事件处理程序附加到未触发的更改事件，这是正确的吗？如果是这样，请将您的代码更改为此以手动触发事件：

```
$button.parent().find("input").val(newVal).change(); 
```

# caching - 哪个版本的 Infinispan 在 Jboss AS 5.1.0 GA 上运行？

> ID：15158650
> 
> 赞同：1
> 
> 时间：2013-03-01T13:13:48.990
> 
> 标签：caching, jboss, jboss5.x, infinispan

根据[这篇文章，](https://docs.jboss.org/author/display/ISPN/Infinispan+as+Hibernate+2nd-Level+Cache+in+JBoss+AS+5.x) Infinispan 4.x 可以在 Jboss AS 5.1.0 GA 上运行。

`1.`那么，是这样吗？我们不能在 Jboss AS 5.1.0 GA 上运行更高版本的 Infinispan 吗？

`2.`一些错误修复将在 Infinispan 4.x 上完成并升级到更高版本。那么，如果我使用 Infinispan 4.x，我可能会遇到哪些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T18:50:05.730

1.  您可以运行您喜欢的任何版本，但您必须隔离类以避免与 AS 中包含的类发生冲突。当然，您不能用它来代替 AS5 中的集群技术：您可以将它专门用于您自己的应用程序。如果您打算将它与 Hibernate 一起使用，请确保选择与您选择的 Infinispan 版本兼容的 Hibernate 版本：因此，您可能还需要捆绑自定义 Hibernate 版本，并与 AS5 中提供的旧版本隔离。一般来说，Infinispan 团队不认为支持 AS5 是一个目标，我们也没有为此积极测试。
2.  很难说哪些问题会影响你，不知道你打算用它做什么。所有问题都会公开跟踪，因此请随时查看：[Infinispan 更改日志或在](https://issues.jboss.org/browse/ISPN#selectedTab=com.atlassian.jira.plugin.system.project%3achangelog-panel&allVersions=true)[Infinispan 论坛](https://community.jboss.org/en/infinispan?view=discussions)上寻求更多建议。

# java - 从 Android 位图对象生成 md5 和

> ID：15158651
> 
> 赞同：4
> 
> 时间：2013-03-01T13:13:54.340
> 
> 标签：java, android, bitmap, md5

我花了几个小时试图弄清楚如何做到这一点。我已经在 stackoverflow 和文档上阅读了一个又一个的帖子。

我有一个 android.graphics.Bitmap 对象，我需要得到它的 md5 总和。在我想验证它尚未保存到文件系统的总和时。我已经看到了几种对 java.io.File 对象执行此操作的方法。我只需要一个接收位图对象并将十六进制 md5 和作为字符串返回的函数。

这可能已经在某处得到解决，但如果是这样，我就无法理解它或从中推断出如何做到这一点。

当然，该方法的资源越少越好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T13:27:22.157

获取位图的字节以计算 md5。

```
Bitmap bm = ... // your bitmap
ByteArrayOutputStream baos = new ByteArrayOutputStream();  
bm.compress(Bitmap.CompressFormat.PNG, 100, baos); //bm is the bitmap object   
byte[] bitmapBytes = baos.toByteArray(); 
```

所以你现在有字节数组。[您可以在此处](http://www.mail-archive.com/android-beginners@googlegroups.com/msg18680.html)找到如何在 android 中获取字节数组的 md5 哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:24:09.480

我不是 Android 开发人员，但我在 API 参考 ( [http://developer.android.com/reference/android/graphics/Bitmap.html](http://developer.android.com/reference/android/graphics/Bitmap.html) ) 中看到有以下方法：

*   获取位图的大小：getWidth、getHeight
*   将像素作为整数数组获取：getPixels

因此，您可以创建一个所需大小的数组，然后读取所有像素，并将该数组转换为 byte[]。

那么从中计算md5 sum应该不是问题。

# java - 如何在 JTable/JXTable 中设置列 宽？

> ID：15158653
> 
> 赞同：5
> 
> 时间：2013-03-01T13:13:55.380
> 
> 标签：java, swing, jtable, column-width, jxtable

我的应用程序由几个 JTable 组成。JXT 表。目标是存储列宽并在启动时重新加载它们。

但是下面的代码对表格的列宽没有任何改变：

```
tblTasks.getColumn(1).setWidth(36); 
```

而且这个什么也不做：

```
tblTasks.getColumn(1).setPreferredWidth(36); 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-01T13:19:03.020

> 但是下面的代码对表格的列宽没有任何改变：
> 
> ```
> tblTasks.getColumn(1).setWidth(36); 
> ```
> 
> 而且这个什么也不做：
> 
> ```
> tblTasks.getColumn(1).setPreferredWidth(36); 
> ```
> 
> 有任何想法吗 ？

.

正确的构造函数是`JTable.getColumnModel().getColumn(0).setPreferredWidth(36);`

例如

![在此处输入图像描述](../Images/fb75b155d95ce2ea3afa83b1e51dc32c.png)

![在此处输入图像描述](../Images/fd40c9edd5c1370522d0723cdf33a383.png)

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Stack;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.WindowConstants;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumn;
import javax.swing.table.TableColumnModel;

public class TableRowHeight {

    private static final long serialVersionUID = 1L;
    private JFrame frame = new JFrame("p*s*s*s*s*t*t");
    private String[] columnNames = {"one", "two", "Playing with", "four", "five",};
    private String[][] data = {
        {"aaaaaa", "bbbbbb", "cccccc", "dddddd", "eeeeeee",},
        {"bbbbbb", "cccccc", "dddddd", "eeeeeee", "aaaaaa",},
        {"cccccc", "dddddd", "eeeeeee", "aaaaaa", "bbbbbb",},
        {"dddddd", "eeeeeee", "aaaaaa", "bbbbbb", "cccccc",},
        {"eeeeeee", "aaaaaa", "bbbbbb", "cccccc", "dddddd",}};
    private JTable table = new JTable(new DefaultTableModel(data, columnNames));
    private TableColumnModel tcm = table.getColumnModel();
    private Stack<TableColumn> colDeleted = new Stack<TableColumn>();
    private JButton restoreButton = new JButton("Restore Column Size");
    private JButton hideButton = new JButton("Set Column Size to Zero");
    private JButton deleteButton = new JButton("Delete Column");
    private JButton addButton = new JButton("Restore Column");

    public TableRowHeight() {
        table.setRowMargin(4);
        table.setRowHeight(30);
        table.setFont(new Font("SansSerif", Font.BOLD + Font.PLAIN, 20));
        JScrollPane scrollPane = new JScrollPane(table);
        for (int i = 0; i < (tcm.getColumnCount()); i++) {
            tcm.getColumn(i).setPreferredWidth(150);
        }
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        restoreButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                tcm.getColumn(2).setPreferredWidth(100);
            }
        });
        hideButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                tcm.getColumn(2).setPreferredWidth(000);
            }
        });
        deleteButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                if (table.getColumnCount() > 0) {
                    TableColumn colToDelete = table.getColumnModel().getColumn(table.getColumnCount() - 1);
                    table.removeColumn(colToDelete);
                    table.validate();
                    colDeleted.push(colToDelete);
                    addButton.setEnabled(true);
                } else {
                    deleteButton.setEnabled(false);
                }
            }
        });
        addButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                if (colDeleted.size() > 0) {
                    table.addColumn(colDeleted.pop());
                    table.validate();
                    deleteButton.setEnabled(true);
                } else {
                    addButton.setEnabled(false);
                }
            }
        });
        JPanel btnPanel = new JPanel();
        btnPanel.add(hideButton);
        btnPanel.add(restoreButton);
        btnPanel.add(deleteButton);
        btnPanel.add(addButton);
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.add(scrollPane, BorderLayout.CENTER);
        frame.add(btnPanel, BorderLayout.SOUTH);
        frame.pack();
        frame.setLocation(150, 150);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                TableRowHeight frame = new TableRowHeight();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-09T14:04:14.497

```
table.getColumn("Column Name").setMaxWidth(36); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-10T19:31:53.497

我所做的是将最小宽度设置为每列的值。对于最后一列的首选宽度，我选择 Integer.MAX_VALUE 这会将所有其他列推到它们的最小大小。

这是我项目的一个片段：

```
ruleTable.setAutoResizeMode(JTable.AUTO_RESIZE_LAST_COLUMN);
ruleTable.getColumnModel().getColumn(0).setMinWidth(25);
ruleTable.getColumnModel().getColumn(1).setMinWidth(125);
ruleTable.getColumnModel().getColumn(2).setMinWidth(175);
ruleTable.getColumnModel().getColumn(2).setMaxWidth(Integer.MAX_VALUE); 
```

希望它会帮助你，也许其他人......对你来说可能有点晚了;-P

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-09T10:13:35.643

```
table.getColumn("Column Name").setMinWidth(36); 
```

# nsis - 是否可以有条件地将文件/文件夹添加到 NSIS 安装程序

> ID：15158655
> 
> 赞同：0
> 
> 时间：2013-03-01T13:14:04.840
> 
> 标签：nsis

是否可以有条件地向 NSIS 安装程序添加文件/文件夹和安装选项？我的想法是，*如果*文件夹*Foo*存在于给定位置，则应将其添加到安装程序中，并且安装*Foo*的选项也应添加到安装程序中。但是如果文件夹*Foo*不存在，NSIS 脚本应该只创建安装程序，但保留*Foo*和从中选择*Foo*的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:41:38.163

You can try to include a file with [/NONFATAL](http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.1.5). If it exists, it will be included by the compiler. In runtime, you can check if installer was able to extract it.

```
File /NONFATAL "file.zip"
${If} ${FileExists}  "$OUTDIR\file.zip"
...
${EndIf} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-26T12:08:21.327

替换文件的示例，该文件取决于正在运行的服务并且在目标位置是否存在

```
 IfFileExists "$SYSDIR\my_file.dll" exist notexist

exist:
ExecWait 'net stop desired_service'

SetOutPath $SYSDIR
SetOverwrite on

File "/oname=$SYSDIR\my_file.dll" "Path to my file\my_file.dll"

ExecWait 'net start desired_service'

notexist:
.....what you want to do if doesn't exists 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T19:41:53.043

在 NSIS 2`File /NONFATAL /R "c:\foo"`中，你可以在没有外部工具的情况下做到最好，当没有文件时，你需要一些技巧来隐藏该部分：

```
!include LogicLib.nsh
Page Components
Page InstFiles

Section "Main"
SetOutPath $InstDir
# File "C:\myfiles\myapp.exe"
SectionEnd

Section "Install Foo" SID_FOO
SetOutPath $InstDir
File /NONFATAL /r "C:\myfiles\foo\*.*"
SectionEnd

Function .onInit
SectionGetSize ${SID_FOO} $0
StrCmp $0 0 "" +3
SectionSetFlags ${SID_FOO} 0 ; Force all flags off including the checkmark
SectionSetText ${SID_FOO} "" ; Hide the section because its size is 0
FunctionEnd 
```

如果这是不可接受的，您可以使用`!system`并从 cmd.exe 获得一些帮助来检查是否存在某些东西：

```
!tempfile INCEXIST
!system 'if exist "C:\myfiles\foo\*.*" echo !define HAVE_FOO > "${INCEXIST}"'
!include "${INCEXIST}"
!delfile "${INCEXIST}"
!ifdef HAVE_FOO
Section "Install Foo"
SetOutPath $InstDir
File /r "C:\myfiles\foo\*.*"
SectionEnd
!endif 
```

在 NSIS 3`!if`中支持 /FileExists 开关：

```
!if /FileExists "C:\myfiles\foo\*.*"
Section "Install Foo"
SetOutPath $InstDir
File /r "C:\myfiles\foo\*.*"
SectionEnd
!endif 
```

# django - “custom_filters”不是有效的标签库

> ID：15158656
> 
> 赞同：1
> 
> 时间：2013-03-01T13:14:05.863
> 
> 标签：django, filter, django-templates

我正在尝试创建自定义过滤器，并且我已按照 Django 文档中的步骤进行操作。但是，当我加载加载过滤器的模板时，会引发以下错误：

```
'custom_filters' is not a valid tag library 
```

...这是指模板中的以下行：

```
1   {% extends 'shared/base.html' %}
2   {% load custom_filters %} <--- the error
3   
4   {% block title %}
5       Showing project {{project}}
6   {% endblock %} 
```

**文件结构：**

```
project/
    ...
    ...
    models.py
    views.py
    templates/
    templatetags/
        __init__.py
        custom_filters.py 
```

**custom_filters.py：**

```
from django import template
register = template.Library()

@register.filter(name='ownership')
def ownership(project, user):
    return project.added_by_user == user 
```

因此，由于某种原因，Django 无法找到看起来的 custom_filters 文件，即使我已经完成了所有应该做的事情（据我所知）。

我究竟做错了什么？

*注意：当然我已经尝试重新启动服务器。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:18:40.870

模板标签文件夹必须在模板文件夹、views.py、models.py、...旁边

```
 //Don't forget also to put __init__.py outside the templatetags,

 @register.simple_tag
 def ownership(project, user):
     return project.added_by_user == user 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-29T20:06:24.163

如果您的应用程序名称是`MyApp`并且您的标签文件夹名称是`templatetags`，那么`settings.py`您应该有：

```
INSTALLED_APPS = [
'MyApp',
'MyApp.templatetags' 
```

]

那里需要您的`app`和您`tag folder`的应用程序包 Django Project 下的。

```
-> MyApp
    ---> models.py
    ---> views.py
    ---> templatetags
      -----> __init__.py
      -----> app_filters.py 
```

# jquery - 使用 css 或 jquery 的响应式宽度和高度布局

> ID：15158659
> 
> 赞同：-4
> 
> 时间：2013-03-01T13:14:14.117
> 
> 标签：jquery, html, css, height, responsive-design

我正在尝试创建一页响应式 html 布局。

这是我的虚拟图像 ![图片](../Images/68ecaced69ee340cb4027198a82fd3b2.png)

第一个布局是我想要实现的，但如果真的很难，那么第二个布局对我来说也可以。

我正在尝试使主着陆区或幻灯片完全适合屏幕（**全屏**）

我找到了一个类似于 layout2的[wordpress 模板，但我不知道他们是如何做到的。](http://bookofpixels.com/immersion/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:20:21.567

您只需要确保您的内容适合 100% 的高度和宽度。你的 body 和 HTML 标签也需要 100% 的高度和宽度。

CSS：

```
body,html,.content,.contact,header{
  width:100%;
  height:100%;
  margin:0px;
  padding:0px;
}
.content{
  background:yellow;
}
header{
  background:red;
}
.contact{
  background:blue;
} 
```

HTML：

```
<body>
<header>

</header>
<div class='content'>

</div>
<div class='contact'>

</div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:54:30.283

尝试查看此内容并尝试更新 [http://jsfiddle.net/H2RyR/](http://jsfiddle.net/H2RyR/)

```
<div id="header"></div>
<div id="content"></div>
<div id="footer"></div>

html, body, #header,#content,#footer{width:100%;height:100%;}
#header{ background-color:blue;}
#content{ background:red;}
#footer{ background:green;} 
```

# charts - HIGHSTOCK 更新标志

> ID：15158660
> 
> 赞同：0
> 
> 时间：2013-03-01T13:14:16.323
> 
> 标签：charts, highcharts, flags, highstock

嘿嘿！

我想创建一个图表，当我设置新的极端值时它会自动更新他的标志，但它不会更新标志。
json 调用没有任何问题 -> 更改极端后，它返回正确的 json 数据。

```
$.getJSON('/myproject/index.php?r=chart/events&id='+itemId+'&start='+ Math.round(e.min) +
    '&end='+ Math.round(e.max), function(data) {
         chart.series[1].setData(data);
         chart.hideLoading();
     } 
```

这是[jsFiddle 链接](http://jsfiddle.net/DJpvw/)

干杯

# php - php找出什么类型的哈希是字符串

> ID：15158670
> 
> 赞同：1
> 
> 时间：2013-03-01T13:14:56.000
> 
> 标签：php, hash

我有一个哈希，我怎样才能找出那个哈希 sha1、md2、md5 或 other() 的类型？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T13:17:23.810

我能想到的唯一方法是检查哈希长度 - SHA1 是 160 位，MD5 是 128 位，就像 MD2 一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:18:08.040

无法确定使用哪种算法生成哈希值。如果您可以限制散列函数集，您可能会幸运地检查散列值的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:33:06.477

没有办法确定，也很难解决。因为这些是一种方法，所以从本质上讲，它们应该很难破解/解决所使用的方法。

我的建议是查看源代码，如果您可以访问它或联系代码的所有者。另一种选择是，如果您拥有原始字符串（在被使用之前），您可以通过散列函数运行它，直到找到匹配项，但听起来这是不可能的。

# javascript - 生成表，存储 json 数组中的值

> ID：15158671
> 
> 赞同：0
> 
> 时间：2013-03-01T13:14:56.857
> 
> 标签：javascript, jquery, html

我需要为给定数组中的每个索引创建表，还需要存储这些值，以便我的 for 循环将它们发送到创建的表。

JavaScript： `for (c=0; c < components_count.length; c++) { console.log(components_count[c]); }`

如何才能做到这一点？

这是完整的JS：

```
var index;
var data;
var parsed;

    $(document).ready(function() {
     $.get('policy.json', function(data){
  index = data;

 },"json");

 });

function search(){

var movement_select = $("#movements").val();

var id = $("#idSubmit").val();

var refnr = index.refnr;

var index_movements = index.movements;

//console.log(movement_select);

//for loop to test which movement from dropdown list! Done!

for (m=0; m < index_movements.length; m++)
{

    if (index_movements[m].date == movement_select)
    {
        movement_select = index_movements[m];

    }

}

var movements = index.movements;
var movements_description = movement_select.description;    
var movements_premium = movement_select.premium;

var movements_payer = movement_select.payer;
var movements_payer_id = movement_select.payer.personid;
var movements_payer_name = movement_select.payer.name;
var movements_payer_surname = movement_select.payer.surname;
var movements_payer_fullname = movements_payer_name + " " + movements_payer_surname;

var movements_owner = movement_select.owner;
var movements_owner_id = movement_select.owner.personid;
var movements_owner_name = movement_select.owner.name;
var movements_owner_surname = movement_select.owner.surname;
var movements_owner_fullname = movements_owner_name + " " + movements_owner_surname;

var components_count = movement_select.components;

for (c=0; c < components_count.length; c++)
{
    console.log(components_count[c]);
}

var components = movement_select.components[0];
var components_description = movement_select.components[0].description;
var components_premium = movement_select.components[0].premium;
var components_cover = movement_select.components[0].cover;
var components_commencementdate = movement_select.components[0].commencementdate;

// table 1 --------------------------------------------------

$("#id").html(id);
$("#refnr").html(refnr);
$("#movements_payer_fullname").html(movements_payer_fullname);
$("#movements_owner_fullname").html(movements_owner_fullname);
$("#refnr").html(refnr);

// table 2 --------------------------------------------------

} 
```

这是JSON：

```
{
"policyid":"1000",
"refnr":"gcsa000923",
"movements":
[
    {
        "date":"2012/06/01",
        "description":"Accept",
        "premium":"R30.00",
        "payer":{"personid":"928374","name":"Hansie","surname":"slim"},
        "owner":{"personid":"928374","name":"Hansie","surname":"slim"},
        "components":
        [
            {
                "description":"Basic cover",
                "premium":"R10.00",
                "cover":"R0.00",
                "commencementdate":"2012/06/01"
            },
            {
                "description":"Cancer",
                "premium":"R10.00",
                "cover":"R20 000.00",
                "commencementdate":"2012/06/01"
            }
        ]
    },
    {
        "date":"2012/08/01",
        "description":"Policy Alteration",
        "premium":"R30.00",
        "payer":{"personid":"928374","name":"Hansie","surname":"slim"},
        "owner":{"personid":"928374","name":"Hansie","surname":"slim"},
        "components":
        [
            {
                "description":"Basic cover",
                "premium":"R10.00",
                "cover":"R0.00",
                "commencementdate":"2012/06/01"
            },
            {
                "description":"Cancer",
                "premium":"R10.00",
                "cover":"R20 000.00",
                "commencementdate":"2012/06/01"
            },
            {
                "description":"Disability cover",
                "premium":"R20.00",
                "cover":"R40 000.00",
                "commencementdate":"2012/09/01"
            }

        ]
    }
] 
```

}

解决了： `for (c=0; c < components_count.length; c++) { $('#append').append("Description: " + components_count[c].description + " " + '<br>'); $('#append').append("Premium: " + components_count[c].premium + " " + '<br>'); $('#append').append("Cover: " + components_count[c].cover + " " + '<br>'); $('#append').append("Commencement Date: " + components_count[c].commencementdate + " " + '<br>' + '<br>'); }`

我忘了.append ^^

# c# - 在镜像模式 Windows 7 中以编程方式更改屏幕方向

> ID：15158679
> 
> 赞同：2
> 
> 时间：2013-03-01T13:15:13.160
> 
> 标签：c#, c++, intel, screen-orientation

如何从 C++ 或 C# 单独更改每个屏幕的屏幕方向？在镜像模式下具有双屏显示配置。机器上安装了 Intel 显卡。我尝试了 EnumDisplaySettings 函数和 DeviceMode 结构。但是，它仅适用于扩展模式。如果我尝试在镜像模式下通过此功能更改方向，则两个屏幕都设置为相同的方向。也许有办法通过英特尔驱动程序 SDK 或任何其他本机 Windows 7 功能更改此设置？

**更新 1：**

这是我尝试使用 CCD API 的代码。它仍然旋转两个显示器=（

```
UINT32 PathArraySize = 0;
UINT32 ModeArraySize = 0;
DISPLAYCONFIG_PATH_INFO* PathArray;
DISPLAYCONFIG_MODE_INFO* ModeArray;
DISPLAYCONFIG_TOPOLOGY_ID CurrentTopology;  

SetDisplayConfig(0,NULL,0,NULL,SDC_TOPOLOGY_CLONE|SDC_APPLY); //set to clone mode
GetDisplayConfigBufferSizes(QDC_ALL_PATHS, &PathArraySize, &ModeArraySize);

PathArray =   (DISPLAYCONFIG_PATH_INFO*)malloc(PathArraySize * sizeof(DISPLAYCONFIG_PATH_INFO));
memset(PathArray, 0, PathArraySize * sizeof(DISPLAYCONFIG_PATH_INFO));
ModeArray =   (DISPLAYCONFIG_MODE_INFO*)malloc(ModeArraySize * sizeof(DISPLAYCONFIG_MODE_INFO));
memset(ModeArray, 0, ModeArraySize * sizeof(DISPLAYCONFIG_MODE_INFO));
LONG ret = QueryDisplayConfig(QDC_DATABASE_CURRENT,&PathArraySize, PathArray, &ModeArraySize, ModeArray, &CurrentTopology);

PathArray++;
PathArray->targetInfo.rotation =  DISPLAYCONFIG_ROTATION_ROTATE180; //set Second display rotated 180
PathArray--;

SetDisplayConfig(PathArraySize,PathArray,ModeArraySize,ModeArray, SDC_APPLY | SDC_SAVE_TO_DATABASE | SDC_ALLOW_CHANGES | SDC_USE_SUPPLIED_DISPLAY_CONFIG); //apply rotation

free(PathArray);
free(ModeArray); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:29:55.220

您可以尝试使用[CCD API](http://msdn.microsoft.com/en-us/library/windows/hardware/ff539365%28v=vs.85%29.aspx)。这些函数允许您为当前会话操作[VidPN拓扑。](http://msdn.microsoft.com/en-us/library/windows/hardware/ff568500%28v=vs.85%29.aspx)不过，它们并不是最容易调用的函数。

* * *

编辑：

`SDC_ALLOW_CHANGES`除了标志之外，我认为您的代码没有任何问题。我在具有 Nvidia 卡的系统上尝试了您的代码。它做两件事之一取决于我旋转的目标。如果我旋转两个目标中的第二个，它会忽略更改。在 Nvidia 控制面板中，我可以看到第二台显示器已旋转，但其设置显示为灰色。这向我表明 Nvidia 驱动程序不支持您想要执行的操作。如果我旋转第一个目标，它会导致两个目标旋转。我还尝试将目标缩放更改为`DISPLAYCONFIG_SCALING_STRETCHED`. 那也没什么区别。SetDisplayConfig 返回 0。Windows 至少似乎对更改感到满意。

您是否尝试过使用 Intel 显示实用程序做您想做的事情？如果您无法使用 Intel 工具执行此操作，则可能是 Intel 驱动程序不支持它。您可能想询问英特尔是否支持它。

# android - Android traceview 不工作或只记录 900 毫秒？

> ID：15158680
> 
> 赞同：0
> 
> 时间：2013-03-01T13:15:13.987
> 
> 标签：android, trace

在我的默认视图中，我有：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Debug.startMethodTracing(Environment.getExternalStorageDirectory()+"/PosLogistics.trace", 1000000000); 
```

并在这里停下来：

```
protected void onStop()
    {
        super.onStop();
        Debug.stopMethodTracing();
    } 
```

安卓目标是2.2。在 Motorolla 2.3 上运行时，我可以跟踪 900 毫秒。在 Samsung Galaxy (4.0) 和 Sony Xperia (4.0) 上运行时，应用程序在启动时会立即关闭。logcat 的最后一个条目是

02-15 05:25:19.940: I/dalvikvm(8740): TRACE STARTED: '/mnt/sdcard/PosLogistics.trace' 976562KB

根据这个线程：[Traceview 最大记录时间？](https://stackoverflow.com/questions/5518393/traceview-maximum-record-time)跟踪受设备 RAM 限制。可以解释摩托罗拉 900 毫秒，但 Galaxy 和 Xperia 有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:26:37.253

[您正在尝试`1000000000`](http://developer.android.com/reference/android/os/Debug.html#startMethodTracing%28java.lang.String,%20int%29)为跟踪缓冲区分配[字节~ 1GB。](http://developer.android.com/reference/android/os/Debug.html#startMethodTracing%28java.lang.String,%20int%29)我认为任何系统都不会允许您这样做。它适用于内存缓冲区大小，而不适用于磁盘。

请参见[vm/Profile.cpp](https://android.googlesource.com/platform/dalvik/+/master/vm/Profile.cpp)第 383 行。

```
state->buf = (u1*) malloc(bufferSize); 
```

跳过给出缓冲区大小。这将默认为 8MB，应该足以满足您的需求。

# javascript - AngularJS 配置持久层交互

> ID：15158684
> 
> 赞同：1
> 
> 时间：2013-03-01T13:15:28.557
> 
> 标签：javascript, html, angularjs

我目前有一个非常简单的应用程序，它最初调用一个 php 文件来获取数据，然后遍历数据集并创建一个表。在表中，我有一个“启用/禁用”按钮，单击该按钮将更新模型，然后将其推送到持久层。我遇到的问题是，虽然我能够更新模型来很好地更新视图，但我无法弄清楚如何让它的持久层部分工作。我为服务“启用/禁用”添加了两个自定义函数以反映按钮单击事件，但我不确定我是否朝着正确的方向前进，但我的代码如下。

视图部分：

```
<table class="table table-hover">
            <thead><tr><th>Name</th><th>Username</th><th>Details</th><th>Facility</th><th>Last Login</th><th>Days from last login</th></tr></thead>
            <tbody>
                <tr ng-class="{'error':user._accountDisabled,'success':user._accountDisabled==false}" ng-repeat="user in users | filter:query | orderBy:orderProp">
                    <td>{{user._firstName}} {{user._lastName}}</td>
                    <td>{{user._userName}}</td>
                    <td><a class="btn btn-primary" href="#/userExceptions/{{user._userName}}">Details</a></td>
                    <td>{{user._facilityName}}</td>
                    <td>{{user._hrLastLogon}}</td>
                    <td>{{user._daysLastLogon}}</td>
                    <td>
            <ng-switch on="user._accountDisabled">
                <button ng-switch-when=true class="btn btn-primary" ng-click="enable(user)">Enable</button>
                <button ng-switch-when=false class="btn btn-danger" ng-click="disable(user)">Disable</button>
            </ng-switch>
            </td>
            </tr>
            </tbody>
        </table> 
```

持久化的自定义服务：

```
angular.module('userServices', ['ngResource']).
    factory('User', function($resource) {
return $resource('userActions.php', {}, {
    query: {method: 'GET', params: {userName: 'userName'}, isArray: true},
    enable: {method: 'GET',params: {action: 'enable', userName: 'userName'}}},
    disable: {method: 'GET', params: {action: 'disable', userName: 'userName'}}
});
}); 
```

最后是控制器：

```
function UserExceptionsCtrl($scope, User) {
$scope.users = User.query();
$scope.orderProp = '_firstName';

$scope.enable = function(user) {
    $scope.user = user;
    $scope.user._accountDisabled = false;
    $scope.user.$save();
    User.enable({userName:user._userName});
};
$scope.disable = function(user) {
    $scope.user = user;
    $scope.user._accountDisabled = true;
    $scope.user.$save();
    User.disable({action: 'disable', userName: self._userName});
};
} 
```

*编辑*按要求的服务器端代码：

useractions 文件处理请求并创建映射器以检索用户对象。它从用户对象更新必要的属性并将其保存在持久层中。

用户操作.php

```
$username = (isset($_REQUEST['userName']) ? $_REQUEST['userName'] : '');
$action = (isset($_REQUEST['action']) ? $_REQUEST['action'] : '');
require 'library/autoloader/src/autoload.php';
 try {
 $ADUserMapper = new UserMapper(new LDAPAdapter());
 switch ($action) {
case 'enable':
        $ADUserEditMapper = new UserMapper(new LDAPAdapter());
        $user = $ADUserEditMapper->findByUsername($username);
        if ($user) {
            $user->enableADAccount();
            $ADUserEditMapper->updateUAC($user);
        }
        break;
    case 'disable':
        $ADUserEditMapper = new UserMapper(new LDAPAdapter());
        $user = $ADUserEditMapper->findByUsername($username);
        if ($user) {
            $user->disableADAccount();
            $ADUserEditMapper->updateUAC($user);
        }
        break;
    default:
        $adapter = new PdoAdapter();
        $employeeDBMapper = new EmployeeMapper($adapter);
        $ADUsers = $ADUserMapper->findMultipleUsers(array('objectClass' => 'user'), "OU=Users,DC=domain,DC=com", TRUE);
        $exceptions = array();
        foreach ($ADUsers as $user) {
            $employee = $employeeDBMapper->findByUserName($user->userName);
            if (!$employee) {
                array_push($exceptions, $user);
            }
        }
        $result = array();
        foreach ($exceptions as $user) {
            array_push($result, $user->getExceptionData());
        }
        echo json_encode($result);
        break;
}
} catch (Exception $e) {
echo json_encode(array('error' => true, 'errorMessage' => $e->getMessage()));
} 
```

# javascript - 乘法表线交叉

> ID：15158688
> 
> 赞同：-1
> 
> 时间：2013-03-01T13:15:48.090
> 
> 标签：javascript, html

```
<script type="text/javascript">
    document.write("<table border='1' align='center' cellpadding='20'>");
    for (j = 1; j <= 10; j++) {
        var n;
        document.write('<tr>');
        for (i = 1; i <= 10; i++) {
            if (i == j) {
                document.write('<td align="right" bgcolor="green">', i * j, '</td>');
            } else if (i * j == n + 1) {
                document.write('<td align="right" bgcolor="blue">', i * j, '</td>');
            }
            else {
                document.write('<td align="right">', i * j, '</td>');
            }
        }
        document.write("</tr>");
    }
    document.write("</table>");
</script> 
```

我的科学计算机课老师要求全班制作乘法表，并找出制作交叉线所需的等式并绘制它们。在我们这样做之后，他要求我们在交叉线之后绘制将留在乘法表中的三角形（每种颜色不同）。我得到了从左到右的交叉线，如果 i==j，另一个我想我也得到了，如果 i*j==n+1。但我真的不知道如何添加这个 n。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:29:33.630

我不知道问题是什么，通常我不只是提供代码，但这是它吗？

我冒昧地重命名您的变量并提升它们。这样，在我的意见之后，代码更加不言自明

```
var start = 1,
    end = 10,
    x, y;

document.write("<table border='1' align='center' cellpadding='0' cellspacing='0'>");
for (x = start; x <= end; x++) {
    document.write('<tr>');
    for (y = start; y <= end; y++) {

      if (x === y) {
        document.write('<td>&nbsp;</td>');
      }
      else if (start+end - x == y) {
        document.write('<td>&nbsp;</td>');
      }
      else if ( start+end - x > y ) {
        if ( x < y )
          document.write('<td>1</td>');
        else
          document.write("<td>2</td>");
      }
      else {
        if ( x < y )
          document.write('<td>3</td>');
        else
          document.write("<td>4</td>");
      }

    }
    document.write("</tr>");
}
document.write("</table>"); 
```

[http://jsbin.com/usesoz/5/edit](http://jsbin.com/usesoz/5/edit)

# .net - 禁用时设置自定义按钮的不透明度

> ID：15158697
> 
> 赞同：0
> 
> 时间：2013-03-01T13:16:03.533
> 
> 标签：.net, silverlight, silverlight-5.0

我需要一个带有图像和一些文本的按钮，让我们称之为`MyButton`。每次`MyButton`显示时，按钮颜色、图像位置、文本位置、图像大小和字体大小保持不变。但是，图像源和文本每次都会有所不同。最后，按钮的不透明度需要在禁用时设置为 0.2，在启用时设置回 1。

到目前为止，我的方法（如果有更好的方法，请纠正我）是创建一个 XAML 文件，其中包含继承`Button`该类的代码。我的 XAML 类似于：

```
<Button x:Class="MyButton"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300" d:DesignWidth="400">

    <!--Blank template for a flat borderless button-->
    <Button.Template>
        <ControlTemplate TargetType="Button"/>
    </Button.Template>

    <Grid Background="#F2F2F2">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Image Name="ImgControl" Width="32" Height="32" Grid.Column="0"/>

        <TextBlock Name="Label" VerticalAlignment="Center" Grid.Column="1"/>

    </Grid>
</Button> 
```

和后面的代码：

```
Partial Public Class MyButton
Inherits Button

Private _imgSrc As String
Public Property ImageSource As String
    Get
        Return _imgSrc
    End Get
    Set(value As String)
        _imgSrc = value
        Dim imgUri As New Uri(_imgSrc, UriKind.RelativeOrAbsolute)
        ImgControl.Source = New BitmapImage(imgUri)
    End Set
End Property

Public Property ButtonText As String
    Get
        Return Label.Text
    End Get
    Set(value As String)
        Label.Text = value
    End Set
End Property
End Class 
```

所以每当我在 XAML 中使用它时，我只需要声明按钮、ImageSource 和 ButtonText 属性。

到目前为止这工作正常，但我在启用/禁用按钮时设置不透明度时遇到问题。我试过转换器，但运气不佳。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:13:03.197

在您的 MyButton 类中创建一个依赖项：

```
public double myOpacity
    {
        get { return (double)GetValue(myOpacityProperty); }
        set { SetValue(myOpacityProperty, value); }
    }

    public static readonly DependencyProperty myOpacityProperty =
        DependencyProperty.Register("myOpacity", typeof(double), typeof(MyButton), new PropertyMetadata(0.2)); 
```

在你的 XAML 设置 Opacity 像这样

```
Opacity="{Binding BindsDirectlyToSource=True, Path= myOpacity}" 
```

然后在你的代码后面改变你设置它的不透明度 mybutton.myOpacity=1;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:03:27.800

或者像这个例子一样使用**Visual State Manager ：**

```
<Button Width="150" IsEnabled="True" Height="100">
        <Button.Template>
            <ControlTemplate TargetType="Button">
                <Grid Background="#F2F2F2" x:Name="BtnBg">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="Common">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BtnBg" Storyboard.TargetProperty="Opacity">
                                        <SplineDoubleKeyFrame KeyTime="0" Value=".2"/>
                                    </DoubleAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Image Name="ImgControl" Width="32" Height="32" Grid.Column="0"/>

                    <TextBlock Name="Label" VerticalAlignment="Center" Grid.Column="1"/>

                </Grid>
            </ControlTemplate>
        </Button.Template>
    </Button> 
```

更改字段“IsEnabled”，您将看到更改。

# c++ - 嵌套枚举类是否有接口机制？

> ID：15158698
> 
> 赞同：2
> 
> 时间：2013-03-01T13:16:05.623
> 
> 标签：c++, oop, class, inheritance

在 C++ 中，纯虚函数提供接口的功能。也就是说，任何子类都**必须**实现基类中的所有纯虚函数：

```
class myClass {
    virtual bool implementme() = 0; // MUST be implemented
};

class mySubClass : public myClass {
    bool implementme() {} // REQUIRED
}; 
```

`enum`嵌套 ( ) `class`es是否有类似的机制？也就是说，我正在寻找类似的东西

```
class myClass {
    virtual enum class myEnum = 0; // MUST be implemented
};

class mySubClass : public myClass {
    enum class myEnum {}; // REQUIRED
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:09:15.987

由于您说实现者不是您的代码库的一部分（因此不会产生编译错误），我必须假设您正在编写一个库，并且使用此枚举的代码在库的使用者中。

我建议您按以下方式使用[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)：

```
class myClass {
};

template<typename T> class myClassImpl : public myClass {
  static_assert(std::is_enum<typename T::myEnum>::value, "Subclasses of myClassImpl must provide the myEnum enum class");
};

class mySubClass : public myClassImpl<mySubClass> {
    enum class myEnum {};
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:21:46.597

这没有多大意义。有人只能对基类（而不是派生类）有可见性，并`myEnum`从某个虚函数的返回中取回 a，其中`myEnum`是一个不完整的类型。没有任何类型的虚拟类型的机制，包括枚举。你真的想要一个虚拟表来查找你的类型吗？

# php - 使用 PHP 时如何配置 HTML5Boilerplate 以正确输出引号？

> ID：15158700
> 
> 赞同：2
> 
> 时间：2013-03-01T13:16:06.320
> 
> 标签：php, html, html5boilerplate, build-script

好的，所以我正在使用 HTML5 Boilerplate 来缩小放置在我的 PHP 文件中的 css、js 和 html。

使用构建脚本，我可以成功创建发布文件夹以及 css 和 js，甚至 php 代码都被缩小了。目前很好。

但是，我的链接标签中的输出特别是单引号和双引号是否存在差异？出于某种原因，它可以很好地处理第一个链接标签，然后处理第二个链接标签。正如您所想象的，这在浏览器中呈现时会导致严重的问题。

这是预构建的代码：

```
<link rel="stylesheet" href="<?php echo base_url('styles/normalize.css');?>">
<link rel="stylesheet" href="<?php echo base_url('styles/main.css');?>">
<script src="<?php echo base_url('js/vendor/modernizr-2.6.2.min.js');?>"></script> 
```

然后在使用构建脚本之后。注意。在第二个链接标签 href 中插入的单引号。

```
<link rel="stylesheet" href="http://localhost/styles/normalize.css">
<link rel="stylesheet" href='http://localhost/styles/be5c719.css">
<script src="http://localhost/js/vendor/modernizr-2.6.2.min.js"></script> 
```

可以说我不需要 php base_url() 函数从而保持它的相对性，但是这不应该有所作为吗？我错过了配置文件中的某些内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:03:36.987

如果您想要匹配的引号并且乐于删除该`echo base_url`部分，只需确保这些行中替换中的引号是双引号而不是单引号。我们在那里只是不一致，这是第一次被指出。

[https://github.com/h5bp/ant-build-script/blob/master/build.xml#L692-L696](https://github.com/h5bp/ant-build-script/blob/master/build.xml#L692-L696)

然后请提交一个拉取请求，这样每个人的生活都可以保持一致。:)

我不确定您的第一个示例中发生了什么。替换（如您所见）仅使用单引号。如果我们对每个人都不匹配它们，那么它周围就会有更多的噪音。我得测试一下。随时在 repo 上打开一个问题，以便我可以跟踪。

# iphone - 有没有办法以编程方式在 ios 上安排事件？

> ID：15158703
> 
> 赞同：1
> 
> 时间：2013-03-01T13:16:17.253
> 
> 标签：iphone, ios, objective-c, xcode

我正在创建一个提醒应用程序，允许用户提醒用户发送短信或电子邮件。在未来的任何一天。例如，用户希望应用程序在未来朋友的生日时提醒它。因此应用程序会在当天提醒用户并向用户显示一些预存的文本以作为短信或电子邮件发送。您能否建议一种为我的应用安排这些提醒的好方法？我想出的一种方法是每天安排本地通知，但我不知道这是否可行。

# c# - 列表 ，如何从中获取物品？

> ID：15158707
> 
> 赞同：1
> 
> 时间：2013-03-01T13:16:40.767
> 
> 标签：c#, xna

我有这样的代码：

```
List<Vector3> list = fillTheList(); 
```

如何在指定位置从中获取元素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T13:17:56.777

您可以使用它的索引器来获取它。

```
var item = list[index]; 
```

列表也有像数组一样的索引器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T13:18:37.807

例如，如果您想在列表中包含第二项，您可以编写：

```
var vectorFromList = list[1] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T13:20:14.787

`List`有一个索引器，它接受`integer`List 中元素的索引

```
ls[0]  // gets the first element
ls[1]  // gets the second element 
```

# slidetoggle - jQuery - 滑动内容选项卡，单击时打开/关闭幻灯片

> ID：15158711
> 
> 赞同：1
> 
> 时间：2013-03-01T13:16:49.693
> 
> 标签：slidetoggle, jquery, jquery-click-event

感谢下面的帮助者修复，在这里查看它的实际效果：http: [//bit.ly/15npgSC](http://bit.ly/15npgSC)

我正在学习 jQuery，遇到了一个我无法解决的问题。我有一个内容滑块，当单击按钮时，它会滑动打开，当再次单击按钮时，它会关闭。这一切都很好，我遇到的问题是页面加载时滑块会自动打开，而不仅仅是单击时。如何在页面加载时保持关闭状态并仅在单击时打开？之后它工作正常，只是在页面加载时它会打开。我尝试`$(document).click(function() {`在开始时放置哪种工作，但是当点击它时它会打开，然后在打开后立即关闭而没有点击。我改回下面的 jQuery 代码，但现在页面再次加载时出现打开问题。

```
$(document).ready(function() {
   $('.pull-me').click(function() {
       $('.panel').slideToggle('slow');
   });
   $('a').toggle(function() {
       $(this).html("Click to close!");},
       function() { $(this).html("Click to open!");
   }).click();
}); 
```

如果您能够解决此问题，您能否解释一下为什么我当前的代码会发生这种情况以及为什么修复会阻止这种情况发生？谢谢，拉法。

很抱歉之前没有发布 HTML 代码，但就是这样：

```
<div class="panel">
<br />
<br />
   <p>Now you see me!</p>
</div>
<div>
    <p class="slide"><a href="#" class="pull-me">Click to open!</a></p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:23:12.310

试试这个：

**// HTML**

```
<div class="pull-me">
    Click here!
    </div>

<div class="panel">
    show/hide
</div> 
```

**// jQuery**

```
$(document).ready(function() {
   $('.pull-me').click(function() {
       $('.panel').slideToggle('slow');
   });
       $('a').toggle(function() {
       $(this).html("Click to open!");},
       function() { $(this).html("Click to close!");
   });
}); 
```

在这个 JsFiddle 中检查这里 -> [http://jsfiddle.net/GXCuz/1/](http://jsfiddle.net/GXCuz/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:24:52.590

因为您没有发布任何 HTML，所以我猜 '.pull-me' 是一个 'a' 元素。

请尝试以下代码（**删除 .click()**）：

```
$(document).ready(function() {
   $('.pull-me').click(function() {
       $('.panel').slideToggle('slow');
   });

   $('a').toggle(function() {
       $(this).html("Click to close!");},
       function() { $(this).html("Click to open!");
   }); // modified here
}); 
```

您在页面首次加载时触发点击事件。

# php - 页面发布到服务器后如何去锚点

> ID：15158712
> 
> 赞同：2
> 
> 时间：2013-03-01T13:16:59.023
> 
> 标签：php

我想在我的页面网址中添加类似“#coupon”的内容。谁能帮我？

`http://www.myhost.com/design-brief.php#coupon`

```
<?php
    if(isset($_POST['TryCoupon'])) 
    {
        // I need something here
        // I dont want to use Location to direct as I am on the same page and want to preserve field values
    } 
?> 
```

我的页面上有一个锚点，我希望用户在用户提交表单时转到该锚点。

```
<td id="coupon"></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:13:31.083

更改表单的操作以包含锚点：

```
<form method="post" action="/some/index.php#coupon"> 
```

这将发布到 /some/index.php 并且当页面显示时，它也会转到锚点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:20:46.513

```
<?php

if(isset($_POST['TryCoupon'])) 
{
  header("Location:place/your/url/here");
}
?> 
```

# java - 在 Eclipse 中调试时重新加载 java 类

> ID：15158722
> 
> 赞同：2
> 
> 时间：2013-03-01T13:17:37.420
> 
> 标签：java, eclipse, debugging

在调试 Eclipse 应用程序时，我有消息属性（资源包）文件来存储对话框、进度消息和其他 UI 元素的消息，如果添加任何新的键值对这些元素不会更新。

> Messages.getString("MSG_SOME_KEY", new String[]{param});

是否有任何方法可以在不重新启动调试会话的情况下重新加载消息文件。

除此之外，还有什么方法可以动态更新方法签名。

我一直在寻找像[JRebel](http://zeroturnaround.com/software/jrebel/)这样适用于服务器以外的其他环境的工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-03T08:56:40.267

答案很晚，但我认为您需要做的就是确保在您的项目菜单下选中“自动构建”。

# json - 如何从 NodeJS 中的 JSON 对象解析数组？

> ID：15158724
> 
> 赞同：0
> 
> 时间：2013-03-01T13:17:53.233
> 
> 标签：json, node.js

我有一个 JSON 数据，例如：

```
'1': 
  { code: '1',
    type: 'car',
  },
 '2': 
  { code: '2',
    type: 'bike'
  },
  ... 
```

我不想在父级中解析 1 和 2。只有我需要拥有

```
 [{code: '1',
    type: 'car',
  }, 
  { code: '2',
    type: 'bike'
  },
  ...] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:23:00.367

```
jsonArray = [];
for (var i in JsonData) {
  jsonArray.push(jsonData[i]);
} 
```

# c# - Python 的 OrderedDict 的类似物？

> ID：15158725
> 
> 赞同：7
> 
> 时间：2013-03-01T13:17:54.667
> 
> 标签：c#, python, .net

是否有 Python 的[OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)的 .net 类似物？

> OrderedDict 是一个字典，它记住第一次插入键的顺序。如果新条目覆盖现有条目，则原始插入位置保持不变。删除条目并重新插入会将其移至末尾。

我想要这种精确的行为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T13:26:08.103

我相信[`System.Collections.Specialized.OrderedDictionary`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)行为是这样的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T13:25:09.087

在“vanilla”.NET 中没有 OrderedDictionary 集合的通用实现，但是，您仍然可以编写自己的或使用现有的解决方案：

[OrderedDictionary：IOrderedDictionary 的通用实现](http://www.codeproject.com/Articles/18615/OrderedDictionary-T-A-generic-implementation-of-IO/)

# java - 在循环外使用字符串变量

> ID：15158733
> 
> 赞同：1
> 
> 时间：2013-03-01T13:18:28.537
> 
> 标签：java, string, stax

在 StAX 解析示例中，我正在设置一个`String dataread = se.getElementText();`. 我立即成功打印了该字符串（数据读取）。

但是，在我的代码中的其他任何地方，它都不起作用，它报告它找不到符号`dataread`。您将看到它正在尝试 5 个其他点进入代码 - 所有报告都相同。if 语句中的第一行有效。

如何在程序的其他地方使用字符串“dataread”？

谢谢

```
public static void main(String[] args) throws FileNotFoundException, XMLStreamException
{
    // TODO code application logic here
    //System.out.println("Here");
    //String filename = null;
    String filename = "BookCatalog2.xml";
    XMLInputFactory factory = XMLInputFactory.newInstance();
    XMLEventReader reader = factory.createXMLEventReader(new FileReader(filename));
    while(reader.hasNext())
            {
                XMLEvent event = reader.nextEvent();
                XMLEvent nextEvent = reader.peek();
                switch (event.getEventType())
                        {
                    case XMLEvent.START_ELEMENT:

                        StartElement se = event.asStartElement();
                        //System.out.println("Here");
                        //System.out.print("<" + se.getName());

                        //System.out.print(" " + se.getName());
                        //System.out.printf("\n");
                        String elem = se.getName().toString();
                        //String elem = "1";
                        //System.out.printf("elem = %s\n",elem);
                        //String ele = event.getAttributeName();

                        System.out.printf("event = %s\n",se.getName());

                        //if( se.getName().toString() == "{http://www.publishing.org}Date")
                       if( se.getName().toString().equals("Date"))
                       //if( elem == "1")
                        {
                            System.out.println("Here !!!!!!!!!!!!!!!!!");
                            String dataread = reader.getElementText();
                            //System.out.printf("data = %s\n",reader.getElementText());
                            System.out.printf("data = %s\n",dataread);
                        }
                        Iterator attributes = se.getNamespaces();
                        System.out.printf("DATA READ = %s\n",dataread);
                        while(attributes.hasNext())
                        {
                            Attribute attr= (Attribute)attributes.next();
                            System.out.print(" " + attr.getName() + "=\"" +attr.getValue() +"\"");
                            System.out.printf("\n");
                        }//end while loop
                    System.out.print(">");
                        if(nextEvent.isCharacters())
                        {
                            Characters c = reader.nextEvent().asCharacters();
                            if(!c.isWhiteSpace())
                            System.out.print(c.getData());
                            System.out.printf("\n");

                        }// end if
                        System.out.printf("DATA READ = %s\n",dataread);
                    /*case XMLEvent.END_ELEMENT>
                        EndElement ee = event.asEndElement();
                        System.out.print("</"+ee.getName()+">");
                        break;
                        * */
                        System.out.printf("DATA READ = %s\n",dataread);
                        }// end witch
                System.out.printf("DATA READ = %s\n",dataread);
            }// end while
    System.out.printf("DATA READ = %s\n",dataread);
    reader.close();
}//end Main
}// public claSS 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:26:32.267

您的字符串在您的第一个 IF 范围内，您必须在方法的开头声明它。

尝试后声明`String filename = "BookCatalog2.xml";`

前任：

```
String filename = "BookCatalog2.xml";
String dataread = ""; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T13:27:26.557

您的 String 变量`dataread`是一个局部变量，仅在 if 子句中具有作用域。

因此，您将无法在 if 块之外访问此变量。要在打印时允许访问该变量，必须在 if 语句之前声明它。例如：

```
String dataread = null;
if (test) {
    dataread = ...;
}

System.out.println(dataread); // etc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T13:26:24.080

您需要做的是在每个方法都处于同一级别或低于该级别的级别上声明局部变量。就像现在您在 if 子句中声明变量一样，那么您将只能从该 if 子句中访问它。

# c# - 我应该在 ServiceController 上调用 Close() 吗？

> ID：15158734
> 
> 赞同：4
> 
> 时间：2013-03-01T13:18:29.910
> 
> 标签：c#, .net

目前我有这样的方法：

```
 private bool IsMyServiceRunning(string serviceName)
    {
        if (String.IsNullOrEmpty(serviceName))
            throw new InvalidOperationException("ServiceName cannot be null or empty");

        using (var service = new ServiceController(serviceName))
        {
            if (service.Status == ServiceControllerStatus.Running)
                return true;
            else
                return false;
        }
    } 
```

这是使用 ServiceController 类的正确方法吗？

我问的原因是，我看到的所有示例在使用完**Close()**方法后都没有调用它。是那些不好的例子还是我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T13:20:59.870

您正在使用`ServiceController`with`using`语句。这将调用`Dispose`ServiceController，这与显式调用 Close() 相同。

因此，在您的情况下，无需再次致电 Close。

如果没有 using 语句，则必须在 ServiceController 上调用 Close() 或 Dispose()，因为它使用了需要释放的非托管资源。否则你有内存泄漏。

```
ServiceController service = null;

try {
  service = new ServiceController(serviceName);

  if (service.Status == ServiceControllerStatus.Running) {
    return true;
  }
  else {
    return false;
  }
}
finally{
  if (service != null) {
    service.Close(); // or service.Dispose();
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T13:22:07.223

您的示例将 包装`ServiceController`在 using 语句中，该语句将调用`Dispose`，这将清理对象。相当于调用`Close`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T13:23:19.213

`Close()`没有被调用，因为`using`这里使用了语法糖。

```
using (var resource = new Resource())
{
} 
```

相当于：

```
{
    var resource = new Resource();
    try
    {
    }
    finally
    {
        if (resource != null)
        {
            resource.Dispose();
        }
    }
} 
```

自动调用`Dispose()`清理资源。

有关更多信息，请参阅[此博客](http://blogs.msdn.com/b/nicgrave/archive/2010/12/28/using-idisposable-objects.aspx)文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T13:23:32.787

我一次又一次地使用了**close()**方法，但我不能再次使用**dispose()**。Dispose() 已使用数据库中的连接...

# google-apps-script - Google Apps 脚本自动生成的库文档

> ID：15158745
> 
> 赞同：6
> 
> 时间：2013-03-01T13:18:58.090
> 
> 标签：google-apps-script, shared-libraries, documentation, code-documentation, intellisense-documentati

我目前正在为 Google Apps 脚本开发一个库，它基本上将电子表格视为数据库对象。

目前，该库有两个相同的功能，如

```
`/**
* Opens and creates a query object for a spreadsheet with the given url.
*
* @param {String} the url of the spreadsheet
* @return {SpreadsheetQuery_} a spreadsheet query object for the given spreadsheet
*/
function openByUrl(url) {
    return new SpreadsheetQuery_(SpreadsheetApp.openByUrl(url));
}` 
```

`现在，对于这两个公共函数，生成的文档只显示返回类型，而不是参数或附加说明。我假设这是一个谷歌问题，并没有真正打扰。`

 `但我的主要问题是，由于函数正在从私有函数实例化一个对象，我怎样才能获得自动文档以显示该对象上存在的方法。所有功能都将由对象提供，如果 GAS 可以在其上显示方法，那就太好了。

笔记

* * *

方法都放在函数的原型上。例如。

```
SpreadsheetQuery_.prototype.from = function (sheet) {
    if (_.isNumeric(sheet)) {
        ……
}

```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T15:31:53.777

Google Apps 脚本中的库支持的 jsdoc 变体不支持您要查找的级别的文档，仅支持一级函数。有一个[相关的开放错误报告](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1389&thanks=1389&ts=1338940848)，但谷歌没有回应。

您仍然可以编写 jsdoc 标签，并在 Google 基础架构之外生成文档。查看[如何在 google doc 脚本中预览 jsdoc 评论，以](https://stackoverflow.com/questions/12461752/how-to-preview-jsdoc-comments-in-google-doc-scripts)获取有关如何预览 jsdoc 评论的一些指导。您可以获取输出`jsdoc3`并将其发布在站点上，以将您的文档提供给您的社区。

其他相关/可能重复的帖子：

*   [在 Google Apps 脚本库中创建类似命名空间的组织](https://stackoverflow.com/questions/10890177/creating-a-namespace-like-organization-in-a-google-apps-script-library)
*   [为类中的方法编写 jsdoc 文档](https://stackoverflow.com/questions/14893927/writing-jsdoc-documentation-on-methods-inside-a-class)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-16T10:18:31.077

如果你正在使用 TypeScript，我们已经构建了一个包来帮助解决这个问题：

[https://github.com/maelcaldas/clasp-types](https://github.com/maelcaldas/clasp-types)

您可以使用它为我们的面向对象库和使用 Typescript 编写的客户端 API 生成自动完成功能。`

# java - 通过 Java 提交多个 hadoop 作业

> ID：15158747
> 
> 赞同：1
> 
> 时间：2013-03-01T13:19:02.500
> 
> 标签：java, concurrency, hadoop, mapreduce

我需要向 Hadoop 提交几个作业，这些作业都是相关的（这就是它们由同一个驱动程序类启动的原因）但彼此完全独立。现在我开始这样的工作：

```
int res = ToolRunner.run(new Configuration(), new MapReduceClass(params), args); 
```

它运行一个作业，获取返回码，然后继续。

我想做的是提交几个这样的作业以并行运行，检索每个作业的返回码。

（对我而言）显而易见的想法是启动多个线程，每个线程负责一个 hadoop 作业，但我想知道 hadoop 是否有更好的方法来完成此任务？我没有任何编写并发代码的经验，所以我宁愿不花很多时间学习它的复杂性，除非这里有必要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:06:25.947

这可能是一个建议，但暗示了代码，所以我将其作为答案。

在这段代码（个人代码）中，我只是迭代了一些变量，并多次提交一个作业（同一个作业）。

使用 job.waitForCompletion(false) 将帮助您提交多个作业。

```
while (processedInputPaths < inputPaths.length) {

    if (processedInputPaths + inputPathsLimit < inputPaths.length) {
        end = processedInputPaths + inputPathsLimit - 1;
    } else {
        end = inputPaths.length - 1;
    }
    start = processedInputPaths;

    Job job = this.createJob(configuration, inputPaths, cycle, start, end, outputPath + "/" + cycle);

    boolean success = job.waitForCompletion(true);

    if (success) {
        cycle++;
        processedInputPaths = end + 1;
    } else {
        LOG.info("Cycle did not end successfully :" + cycle);
        return -1;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:39:26.253

psabbate 的回答让我找到了一些我遗漏的 API。这就是我解决它的方法：

在驱动程序类中，使用如下代码启动作业：

```
List<RunningJob> runningJobs = new ArrayList<RunningJob>();
for (String jobSpec: jobSpecs) {
    // Configure, for example, a params map that gets passed into the MR class's constructor
    ToolRunner.run(new Configuration(), new MapReduceClass(params, runningJobs), null);
}

for (RunningJob rj: runningJobs) {
    System.err.println("Waiting on job "+rj.getID());
    rj.waitForCompletion();
} 
```

然后，在 MapReduceClass 中，定义一个私有变量`List<RunningJob> runningJobs`，定义一个构造函数，如下所示：

```
public MergeAndScore(Map<String, String> p, List<RunningJob> rj) throws IOException {
    params = Collections.unmodifiableMap(p);
    runningJobs = rj;
} 
```

在调用的`run()`方法中，定义你的并提交作业`ToolRunner``JobConf`

```
JobClient jc = new JobClient();
jc.init(conf);
jc.setConf(conf);
runningJobs.add(jc.submitJob(conf)); 
```

这样，`run()`立即返回，并且可以通过`runningJobs`驱动程序类中的对象访问作业。

请注意，我正在使用旧版本的 Hadoop，因此`jc.init(conf)`和/或`jc.setConf(conf)`可能需要也可能不需要，具体取决于您的设置，尽管可能至少需要其中一个。

# algorithm - 使用散列在数据库中存储密码的替代方法

> ID：15158751
> 
> 赞同：1
> 
> 时间：2013-03-01T13:19:06.377
> 
> 标签：algorithm, security, postgresql, hash, passwords

我需要一些使用逆算法在数据库中安全存储密码的机制（这就是为什么哈希不幸不适合的原因）。有谁知道这样的算法以及如何在 PostgreSQL 中实现其中之一？可能是任何密钥密码术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:28:39.053

虽然我强烈建议你对你在这里想要完成的事情要非常谨慎；是的，密钥密码术将是解决您问题的好方法。

幸运的是，PostgreSQL 提供了对加密的支持，并且可以像这样简单地实现：

```
Select encrypt (info_to_encrypted, key, algorithm_name); 
```

该主题可能很长，因此我会指导您查看这些出色的幻灯片：
[加密的 PostgreSQL](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&ved=0CFUQFjAD&url=http://www.hagander.net/talks/Encrypted%2520PostgreSQL.pdf&ei=qaswUcGAA8z04QTGz4BY&usg=AFQjCNHgxnf_1lxTNhGjhhdfKsZtnf1KnA&sig2=L5dt4anEtGKD0FDSPSbL-w&bvm=bv.43148975,d.bGE&cad=rja)

在继续您尝试做的事情之前，请阅读[这个非常好的 stackexchange 问题。](https://dba.stackexchange.com/questions/24370/how-to-use-aes-encryption-in-postgresql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:28:28.430

我认为没有办法使用可逆算法安全地存储密码，因为这些算法的想法是它们加密的所有内容都可以解密，因此它们总是不安全的。

# android - 在文本视图上设置印度卢比符号

> ID：15158754
> 
> 赞同：99
> 
> 时间：2013-03-01T13:19:08.397
> 
> 标签：android, android-fonts

我正在开发一个应用程序。我需要在文本视图上设置印度卢比的符号，该符号以文本为金额。

象征：

![在此处输入图像描述](../Images/2b533f4e3d18e05d216b6039022f39b9.png)

我在 Assets/fonts 文件夹中有这个字体或 .TTF 文件。

我尝试将其用作：

```
Typeface typeFace_Rupee = Typeface.createFromAsset(getAssets(),fonts/Rupee_Foradian.ttf");
TextView tvRupee = (TextView) findViewById(R.id.textview_rupee_mlsaa);
tvRupee.setTypeface(typeFace_Rupee);

// Tried to set symbol on text view as follows.
tvRupee.setText("`"); 
```

如上设置字体我得到空指针错误。

在选择字体并输入**`**后的word文件中，我们得到了符号。但它不适用于android。

那么我应该遵循什么步骤来做到这一点......

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2013-03-02T05:21:20.563

![在此处输入图像描述](../Images/b846b45682c4c90ccd33228dccc4e7a8.png)

嗨，在字符串中使用它

对于打印**卢比符号**： `<string name="Rs">\u20B9</string>`

对于打印**Rs**文本： `<string name="rs">\u20A8</string>`

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-05-05T10:52:22.403

`\u20B9`如果要打印则`Rupee Symbol`
使用，如果要打印则
使用`\u20A8``"Rs"`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-02-12T09:33:48.670

在适配器上使用

```
Viewholder.price.setText("Price: \u20B9"+dataAdapterOBJ.getPrice()); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-01T13:31:00.590

试试这个，而不是`Rupee_Foradian.ttf`使用`Rupee.ttf` 它会工作。正在获取货币符号。

```
Typeface tf = Typeface.createFromAsset(getAssets(), "font/Rupee.ttf");
textView1.setTypeface(tf);
textView1.setText("`"); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-03T10:29:04.330

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-08-15T12:00:21.070

您只需按`Alt`+ `Ctrl`+`4`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-06-21T06:51:54.353

```
 public static String getIndianRupee(String value) {
    Format format = NumberFormat.getCurrencyInstance(new Locale("en", "in"));
    return format.format(new BigDecimal(value));
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-08-10T12:19:18.823

试试这个代码片段，它工作正常`Xamarin.Forms`

```
 CultureInfo india = new CultureInfo("hi-IN");

 var rupeeSymbol = india.NumberFormat.CurrencySymbol; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-10-26T08:12:48.637

您可以使用以下 Flutter 代码行

```
child: Text('\u20B9 ${tx.amount}', 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-24T14:29:14.510

2022年，用货币符号将数字设置为印度货币示例：

```
double rupee = list.getAmount();
String x = NumberFormat.getCurrencyInstance(new Locale("en","in")).format(rupee); 
```

不需要任何文件等，印度格式的货币，从右起三位数后是逗号，带有卢比符号

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-06-02T07:32:05.003

只需简单地编写以下代码：

```
Text(
  '\u{20B9}${2880.0}',
  textAlign: TextAlign.start,
  style: TextStyle(
      color: const Color(0xFF000000),
      fontSize: 15.0,
      fontWeight: FontWeight.w300),
) 
```

# c# - 默认情况下，如何生成类型为“文本”而不 是“常规”的 Excel 文件

> ID：15158755
> 
> 赞同：1
> 
> 时间：2013-03-01T13:19:08.310
> 
> 标签：c#, asp.net, excel, gridview

我正在处理 c# 项目，我正在从我的 gridview 生成动态 excel 文件。

当我成功生成文件时，它会将所有数据转换为`Genaral`类型，但我需要将所有 excel 文件数据转换为`Text`格式，

我怎样才能做到这一点？因为我需要进一步将此文件用于报告目的并需要`Text`作为类型

以下是我的excel文件生成c#代码：

```
private void ExportGridView()
        {
            System.IO.StringWriter sw = new System.IO.StringWriter();
            System.Web.UI.HtmlTextWriter htw = new System.Web.UI.HtmlTextWriter(sw);

            // Render grid view control.
            gvFiles.RenderControl(htw);

            // Write the rendered content to a file.
            string renderedGridView = sw.ToString();
            File.WriteAllText(@"C:\test\ExportedFile.xls", renderedGridView);
        } 
```

![在此处输入图像描述](../Images/27a2939e58c3d60e8c0b1fe0ae5b9157.png)

我想我需要使用`Microsoft.Office.Interop.Excel`并且我可以指定类型也喜欢生成在`Text`

我也搜索过，我们可以将它生成为一个类似的 html 包含并使它成为类似的东西。

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:06:12.797

您可以使用`Microsoft.Office.Interop.Excel`. 添加对它的引用并在其他 using 语句旁边添加以下`using`语句。

```
using Microsoft.Office.Interop.Excel; 
```

修改`ExportGridView`方法：

```
private void ExportGridView()
{
    var path = @"C:\test\ExportedFile.xls";
    System.IO.StringWriter sw = new System.IO.StringWriter();
    System.Web.UI.HtmlTextWriter htw = new System.Web.UI.HtmlTextWriter(sw);

    // Render grid view control.
    gvFiles.RenderControl(htw);

    // Write the rendered content to a file.
    string renderedGridView = sw.ToString();
    File.WriteAllText(path, renderedGridView);
    UpdateFormat(path);
} 
```

添加以下方法：

```
private void UpdateFormat(string path)
{
    var application = new Microsoft.Office.Interop.Excel.Application();
    var doc = application.Workbooks.Open(path);
    for (int i = 1; i <= doc.Worksheets.Count; i++)
    {
        Worksheet sheet = doc.Worksheets[i];
        for (int j = 1; j <= sheet.Columns.Count; j++)
        {
            Range column = sheet.Columns[j];
            column.NumberFormat = "@";
        }
    }
    doc.Save();
    doc.Close();
    application.Quit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:28:26.353

只是一个猜测，但它是因为你正在编写 gridview html？您可以创建一个 CSV 文件并使用 .xls 保存它，这将是一个 excel 文档

# javascript - OpenLayers 复选框以删除标签

> ID：15158759
> 
> 赞同：0
> 
> 时间：2013-03-01T13:19:25.693
> 
> 标签：javascript, openlayers

我有一个问题理解，我有一个带有矢量的点，上面有一个标签，它告诉它`$name`。

我现在需要的是一个复选框，取消选中它时会隐藏标签。

```
toggleLabel: function(element) {
            if(element.value == "showLabel"){
                this.viewModel.label.setVisibility(false);
            }
            else {

            }
        }, 
```

然后在我的html中，我得到了以下复选框

```
<input type='checkbox' name='overlay' value='showLabel' id='showLabels' onclick='toggleLabel(this);' autocomplete='off' checked></input> 
```

我错过了什么？

编辑：我不想删除整个图层，因为我仍然希望矢量保留（地图上的点）但只是隐藏标签集。setvisibility 对标签不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:41:28.490

我以前没见过 viewModel 的东西，但是：要隐藏标签，你可以将样式的标签设置为空字符串；并将其恢复为再次显示标签。

```
// hide label
haloLayer.styleMap.styles.default.defaultStyle.label = '';
haloLayerLayer.redraw();    

// show label
haloLayer.styleMap.styles.default.defaultStyle.label = "${" + ... + "}";
haloLayerLayer.redraw(); 
```

# php - Amazon EC2 服务器显示错误

> ID：15158764
> 
> 赞同：0
> 
> 时间：2013-03-01T13:19:45.053
> 
> 标签：php, amazon-web-services, amazon-ec2, smarty

我已经配置了`Amazon EC2`服务器并安装了`PHP and MySQL`. 我已经上传了我的网站。它在`smarty`.

问题是当我更新任何`.tpl`文件时，服务器会`white page`在 Firefox 和 Chrome 中作为输出返回`500 Internal Server Error`。我在互联网上到处冲浪，但一无所获。

当我更新任何`.php`文件时，代码运行良好。问题仅在于`.tpl`文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:51:06.077

我敢打赌，你的 templates_c 目录不是 Apache 可写的（标识为 apache 或 httpd，你可以检查你的 httpd.conf 文件），或者它在 Smarty 初始化期间没有正确配置。

您可以尝试暂时将您的 templates_c 目录设置为 777 权限来测试这个假设。

如果最终出现这种情况，那么您需要将 templates_c 的组所有权分配给 apache，并将文件夹权限设置为 775。（[他们在文档中对此进行了解释。](http://www.smarty.net/quick_install)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:36:41.890

HTTP 状态为 500，没有页面内容（Chrome 只是很好，并为您呈现默认错误消息）意味着 PHP 遇到了致命错误。

您将需要找出 PHP 被配置为登录到的位置（通常是一个名为 的文件`php_errors.log`）并查看错误是什么。

或者，您可以使用[error_reporting](http://uk1.php.net/manual/en/function.error-reporting.php)设置*暂时*允许 PHP 将错误输出到屏幕。

# java - 从列表对象中获取值

> ID：15158765
> 
> 赞同：1
> 
> 时间：2013-03-01T13:19:55.073
> 
> 标签：java, list, jpa

我有这样的代码......

```
Query query = em.createQuery("select CM.salesAreaId, SM.salesAreaDesc, count(CM.salesAreaId), sum(CM.openBal), " +
                    "sum(CM.netSales) from CustomerMaster CM, SalesAreaMaster SM where CM.salesAreaId=SM.salesAreaCode and CM.companyId=SM.companyId" +
                    " and CM.companyId=:companyId group by CM.salesAreaId, SM.salesAreaDesc");
query.setParameter("companyId", companyId);
List list = query.getResultList(); 
```

从上面的代码我怎样才能得到列表值？（list.get() 值打印对象）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:26:17.637

尝试这个

```
Query query = em.createQuery("select CM.salesAreaId, SM.salesAreaDesc, count(CM.salesAreaId), sum(CM.openBal), " +
                    "sum(CM.netSales) from CustomerMaster CM, SalesAreaMaster SM where CM.salesAreaId=SM.salesAreaCode and CM.companyId=SM.companyId" +
                    " and CM.companyId=:companyId group by CM.salesAreaId, SM.salesAreaDesc");
query.setParameter("companyId", companyId);
List list = query.getResultList();
for(Object o : list) {
    Object[] obj = (Object[])o;

} 
```

的值`CM.salesAreaId`应该在`obj[0]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:35:21.390

由于 JPA 是 ORM 规范，因此查询结果必须是一组对象。如果您将最后一个用作 JPA 实现，则休眠有一个解决方法（请参阅[如何将休眠查询结果作为列表或哈希映射的关联数组获取](https://stackoverflow.com/questions/925363/how-to-fetch-hibernate-query-result-as-associative-array-of-list-or-hashmap)），但您的代码将与休眠严重耦合。
如果要将结果作为结果集（原始值集）检索，则应直接使用 jdbc。

如果您的问题只是以人类可读的方式打印结果，您应该覆盖所有 JPA 实体的 toString() 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T13:26:51.703

您可以使用 for 循环进行迭代，每次都提供索引。

```
for (int i = 0; i < list.size(); i++)
{
    Object x = list.get(i);
    ...
} 
```

[http://docs.oracle.com/javase/6/docs/api/java/util/List.html#get(int)](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#get(int))

# drag-and-drop - kineticjs 拖放 - 没有发布不一致

> ID：15158768
> 
> 赞同：0
> 
> 时间：2013-03-01T13:20:09.123
> 
> 标签：drag-and-drop, kineticjs

首先，拖放在我的 4.3.0 版本中可以正常工作，所以我只想了解为什么我在 4.3.3 中遇到以下问题。

我有三个阶段。一个位于 iframe 文档中的容器中。其他的放在 iframe 父文档中的容器中，一个显示复杂的形状布局，另一个显示单个简单的形状用于测试。控制所有动作的 iframe 中的文档有一个可以正确拖放的取景器叠加层。然而，布局和测试阶段的形状不会在 mouseup 上释放。

任何关于正在发生的事情的想法将不胜感激......我喜欢尝试保持最新状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:07:38.897

让我通过首先修改结构来解释我是如何找到答案的。有一个包含共享文件和两个 iframe 的保存文件——一个用于类似机器的索引，一个用于显示，每个都有自己的脚本。主要的共享文件是 nameset.json，它列出了所有对象及其键/值对。这些被发送以“填写”机器和显示框架。我想我可以对 Kinetic Global 对象做同样的事情，指的是 Global.stages 数组。现在似乎很明显，每个 iframe 都需要自己的 Kinetic 链接（而不是指针），并且这些链接需要用于结合机器/显示交互，如此处显示的地图。无论如何，所有的拖放操作都可以顺利进行。感谢那！

将标记为已回答，但如果有人有任何意见，将很高兴阅读它们。

![名称集地图设备](../Images/6566cac954142b9d45c2f63cd327907e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:20:17.090

好吧，由于我看不到您的任何代码，我只能提供这么多帮助，请尝试执行以下操作。

对于您拥有的每个形状，添加以下属性：

```
 dragOnTop: false 
```

例子：

```
 Kinetic.Rect({
      fill: 'blue',
      dragOnTop: false
  }); 
```

# android - 安卓加速方向

> ID：15158769
> 
> 赞同：0
> 
> 时间：2013-03-01T13:20:10.397
> 
> 标签：android, accelerometer, android-sensors, device-orientation

搜索了一段时间后，我没有找到任何方法将平移加速度方向与旋转隔离。

我正在寻找一种方法来获得与手机旋转方式无关的加速度方向（当然也与手机的旋转方式无关）。

基本上，这将使我能够在加速、减速和方向改变之间做出区分。

我试图用从中获得的角度来补偿加速度传感器角度，`getOrientation`但我试验`getOrientation`了当设备具有平移运动（加速度）时角度（方位角、俯仰和滚动）是不一样的。

我需要两者之一：无论设备如何旋转，加速度方向或方向值，无论设备如何加速。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T15:15:48.360

终于我们找到了！

通过[Android文档](http://developer.android.com/reference/android/hardware/SensorManager.html#getRotationMatrix%28float%5B%5D,%20float%5B%5D,%20float%5B%5D,%20float%5B%5D%29)我们可以得到旋转矩阵（getRotationMatrix）来改变手机的坐标系：旋转矩阵R将一个向量从设备坐标系转换到世界坐标系。

但是在参数文档中说（这里是测验）：

> 重力 - 是一个包含 3 个浮点数的数组，其中包含以设备坐标表示的重力矢量。您可以简单地使用 TYPE_ACCELEROMETER 类型的 Sensor 的 SensorEvent 返回的值。

那么，如果您使用文档中的加速度计值作为旋转矩阵的参数，那么加速度当然会受到影响，而移动平移和矩阵将毫无用处。

而不是使用加速度计传感器值，您必须使用重力传感器值（类型为 TYPE_GRAVITY 的传感器

由于此传感器不受移动平移的影响，因此可以在平移移动时使用旋转矩阵。

最后，适用于我们的代码是：

```
float[] trueacceleration = new float[4];
float[] R = new float[16];
float[] RINV = new float[16];    

SensorManager.getRotationMatrix(R, I, GRAVITY, geomagnetic);
Matrix.invertM(RINV, 0, R, 0);          
Matrix.multiplyMV(trueAcceleration, 0, RINV, 0, linearAcceleration, 0); 
```

在哪里

*   GRAVITY 是具有来自 TYPE_GRAVITY 传感器的值的向量，
*   geomangetic 是一个向量，其值来自 TYPE_MAGNETIC_FIELD 传感器，并且
*   linearAcceleration 是一个向量，其值来自 TYPE_LINEAR_ACCELERATION 传感器

然后在 trueAcceleration 向量中，无论移动设备如何移动其方向，我们都会在移动平移中获得加速度。

# java - java / scala和'as中的原始对象大小 Buffer() 方法调用

> ID：15158777
> 
> 赞同：1
> 
> 时间：2013-03-01T13:20:24.190
> 
> 标签：java, scala, dynamic, reflection, primitive-types

我的目标是在此处概括从 Android OpenGL ES 教程创建形状：http: [//developer.android.com/training/graphics/opengl/shapes.html](http://developer.android.com/training/graphics/opengl/shapes.html) 现在看起来像这样：

```
val squareCoords = Array( -0.5f,  0.5f, 0.0f,   // top left
  -0.5f, -0.5f, 0.0f,   // bottom left
  0.5f, -0.5f, 0.0f,   // bottom right
  0.5f,  0.5f, 0.0f ) // top right

val vertexBuffer = ByteBuffer.allocateDirect(
  // (# of coordinate values * 4 bytes per float)
  squareCoords.length * 4)
  .order(ByteOrder.nativeOrder())
  .asFloatBuffer()
  .put(squareCoords)
  .position(0) 
```

因此，浮点大小是硬编码的。但我也有一些短数组：

```
val drawOrder = Array[Short] ( 0, 1, 2, 0, 2, 3 ) 
val drawListBuffer = ByteBuffer.allocateDirect(
  // (# of coordinate values * 2 bytes per short)
  drawOrder.length * 2)
.order(ByteOrder.nativeOrder())
.asShortBuffer()
drawListBuffer.put(drawOrder)
drawListBuffer.position(0) 
```

代码看起来很相似，但挑战部分是在这种情况下选择正确的方法 asFloatBuffer()/asShortBuffer() 并使用正确的原始值。

我写了这段代码来解决这个问题：

```
import scala.reflect.runtime.universe._

implicit class SByteBuffer[T <: AnyVal : TypeTag] (coords: Array[T]) {
  private val length = coords.length
  def buffer(): Buffer = {

    def allocateBb(mod: Int) = {
      ByteBuffer.allocateDirect(length * mod)
      .order(ByteOrder.nativeOrder())
    }
    val buffer = typeOf[T] match {
      case t if t =:= typeOf[Float] => allocateBb(4).asFloatBuffer().put(coords.asInstanceOf[Array[Float]])
      case t if t =:= typeOf[Short] => allocateBb(2).asShortBuffer().put(coords.asInstanceOf[Array[Short]])
    }
    buffer.position(0) 
  }
} 

val squareCoords = Array( -0.5f,  0.5f, 0.0f,   // top left
  -0.5f, -0.5f, 0.0f,   // bottom left
  0.5f, -0.5f, 0.0f,   // bottom right
  0.5f,  0.5f, 0.0f ) // top right

val vertexBuffer = squareCoords.buffer() 
```

但这似乎太复杂了，并且有代码重复。您能否建议如何重构此代码以使其看起来更简洁并可能摆脱运行时类型检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:55:18.323

您最好为要支持的每种原始类型创建单独的隐式类：

```
abstract class ArrayOpsBase[T <: AnyVal] ( val coords: Array[T] ) {
  protected val length = coords.length
  protected def allocateBb(mod: Int) = {
    ByteBuffer.allocateDirect(length * mod)
    .order(ByteOrder.nativeOrder())
  }
  def buffer(): Buffer
}

implicit class FloatArrayBufferOps( coords: Array[Float] ) extends ArrayOpsBase[Float]( coords ) {
  def buffer = allocateBb(4).asFloatBuffer.put( coords ).position( 0 )
}
implicit class ShortArrayBufferOps( coords: Array[Short] ) extends ArrayOpsBase[Short]( coords ) {
  def buffer = allocateBb(2).asShortBuffer.put( coords ).position( 0 )
} 
```

# delphi - Delphi - 有没有办法在设计模式下隐藏/组织组件

> ID：15158779
> 
> 赞同：4
> 
> 时间：2013-03-01T13:20:25.533
> 
> 标签：delphi, components

在 Delphi 2010 中......我正在构建一个相当复杂的应用程序。有各种基于 VCL 的非可视组件，例如 TTable、TQuery 等。我知道我可以将面向数据的组件放入数据模块中，因此在设计时，它们不会出现在我的主窗体上。我正在寻找一种“隐藏”其他非可视组件的方法。我知道我可以用 GExperts 隐藏它们，但只要你点击表格，它们就会再次出现。我似乎记得有一个“组件存储库”类型的组件。你把它放在你的表单上，然后把你所有的其他组件都放进去……虽然找不到。

有人知道实现这一目标的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T14:43:18.020

只需将您的其他非可视组件也放在 DataModule 上。所有非视觉控件都可以放置在那里；只有视觉（TControl / TWinControl）组件不能（出于显而易见的原因 - 数据模块在运行时没有视觉方面）。

请注意，即使在不访问任何类型数据库的应用程序中，这也很有用。您仍然可以创建一个`TDataModule`来保存所有非可视组件，例如图像列表、文件打开/保存对话框等。

# c++ - 如何在 Awesomium 中设置监听器？（“字段类型'Listener'是一个抽象类”错误）

> ID：15158780
> 
> 赞同：0
> 
> 时间：2013-03-01T13:20:31.747
> 
> 标签：c++, abstract-class, awesomium

我一直试图让 Awesomium::WebViewListener 工作，但是每当我尝试分配 Listener 对象时，我都会收到“字段类型'Listener'是一个抽象类”错误。

这是我的代码：

```
class Listener : public Awesomium::WebViewListener
{
public:
    void onCallback(Awesomium::WebView* caller,
                    const std::wstring& objectName,
                    const std::wstring& callbackName,
                    const Awesomium::JSArguments& args)
    {
        std::cout << "Hello!" << std::endl;
    }
};

// In the GUI class
Listener listener; // Field type 'Listener' is an abstract class
view->setListener(&listener); 
```

如果我无法分配监听器对象，我应该如何设置监听器？我试过使用 boost::shared_ptr ，它不会产生任何错误，但永远不会调用 onCallback() 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:02:16.423

它可能有两种变体：

1.  `Awesomium::WebViewListener`包含多个抽象方法。如果是这样-您应该全部实现它们以创建派生类“侦听器”的实例（bash.d 说过）
2.  `Awesomium::WebViewListener::onCallback`参数列表应该完全等于你的。如果不是这样，那么您将此方法**添加**`Listener`到，但未实现基本抽象`onCallback`

# php - URL后面的用户名

> ID：15158782
> 
> 赞同：1
> 
> 时间：2013-03-01T13:20:47.510
> 
> 标签：php, html, mysql

你好堆栈溢出目前我有点卡在我的 user_profile/username_here 上。问题是你可以填写你想要的每个用户名，如果你把它放在'/'后面，它仍然会显示编造的用户名是在 URL 后面登录的吗？我也在使用 URL 重写。htaccess：

```
RewriteEngine on
RewriteBase /

RewriteRule ^profile/([a-zA-Z0-9-\._]+)(\/)?                    /profile.php?username=$1 [L,QSA] 
```

这是我用于 user_profile.php 的代码：

```
<?php
    require_once('db.php');
    session_start();

    if(!isset($_SESSION['id'])) {
        header("location: access_denied.php");
    } else {    

    $username = $_SESSION['username'];
    $firstname = $_SESSION['firstname'];
    $lastname = $_SESSION['lastname'];
    $result3 = mysql_query("SELECT * FROM tab where username='$username' AND firstname='$firstname' AND lastname='$lastname'");

    if($row3 = mysql_fetch_array($result3)) {
        $username = $row3['username'];
        $firstname = $row3['firstname'];
        $lastname = $row3['lastname'];
    }

?>
<html>
    <body>
        <table width="398" border="0" align ="center" cellpadding="0">
            <tr>
            <td height ="26" colspan="2">Profile info</td>
                <td><div align="right"><a href="log_out.php">Logout</a></div></td>
            </tr>
            <tr>
                <td width="129" rowspan="5"><img src="<?php echo $picture?>" width="129" height="129" alt="no image found"/></td>
                <td width="82" valign="top"><div align="left">Username:</div></td>
                <td width="165" valign="top"><?php echo $username ?></td>
            </tr>
            <tr>
                <td width="82" valign="top"><div align="left">Firstname:</div></td>
                <td width="165" valign="top"><?php echo $firstname ?></td>
            </tr>
            <tr>
                <td width="82" valign="top"><div align="left">lastname:</div></td>
                <td width="165" valign="top"><?php echo $lastname ?></td>
            </tr>
        </table>
        <p align="center"><a href="index.php"></a></p>
    </body>
</html>
<?php
    }
?> 
```

我需要将代码放在哪里，以便当前登录的用户名在 url 后面？欢迎解释，因为我对 PHP 还很陌生。另外，如果您看到任何错误，请说出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:36:04.530

**不要使用 MySQL_*** ——它在 PHP 5.5 中已被弃用。使用`MySQLi`或`PDO`代替。

您可以将代码放置在您想要的任何地方。既然你已经设置了变量，你所要做的就是建立你的链接。

```
<a href="profile/<?php echo $username; ?>"> 
```

这将建立这样的链接：`http://domain.tld/profile/username`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T13:26:37.183

试试这个：

```
<p align="center"><a href="index.php?name=<?php echo $username; ?>"></a></p> 
```

但是您需要设置您的 htacces 以将其视为 index.php ，而无需额外的参数

# mysql - 在 JBoss 上部署时出现 C3P0ConnectionProvider 错误

> ID：15158783
> 
> 赞同：1
> 
> 时间：2013-03-01T13:20:48.180
> 
> 标签：mysql, hibernate, jpa, jboss, c3p0

我正在尝试通过 JBoss 服务器上的 JPA 连接到 MySQL 数据库。

部署项目时出现以下异常。

```
13:04:41,035 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.persistenceunit."dryrun.war#dbname": org.jboss.msc.service.StartException in service jboss.persistenceunit."dryrun.war#dbname": Failed to start service
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1767) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_15]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_15]
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_15]

Caused by: javax.persistence.PersistenceException: [PersistenceUnit: dbname] Unable to build EntityManagerFactory
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:914)
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889)
at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73)
at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162)
at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85)
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
... 3 more

Caused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.service.jdbc.connections.spi.ConnectionProvider]
at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:187)
at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:150)
at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.buildJdbcConnectionAccess(JdbcServicesImpl.java:234)
at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:91)
at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)
at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)
at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:71)
at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2270)
at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2266)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1735)
at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:84)
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904)
... 9 more

Caused by: org.hibernate.HibernateException: Could not instantiate connection provider [org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider]
at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.instantiateExplicitConnectionProvider(ConnectionProviderInitiator.java:190)
at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.initiateService(ConnectionProviderInitiator.java:112)
at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.initiateService(ConnectionProviderInitiator.java:54)
at org.hibernate.service.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:69)
at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:177)
... 22 more

Caused by: org.hibernate.service.classloading.spi.ClassLoadingException: Unable to load class [org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider]
at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:141)
at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.instantiateExplicitConnectionProvider(ConnectionProviderInitiator.java:187)
... 26 more

Caused by: java.lang.ClassNotFoundException: Could not load requested class : org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider
at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl$1.findClass(ClassLoaderServiceImpl.java:99)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423) [rt.jar:1.7.0_15]
at java.lang.ClassLoader.loadClass(ClassLoader.java:356) [rt.jar:1.7.0_15]
at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:138)
... 27 more 
```

我的 persistence.xml 文件是：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<persistence-unit name="dbname" transaction-type="RESOURCE_LOCAL">
    <properties>
        <property name="hibernate.show_sql" value="false" />
        <property name="hibernate.format_sql" value="false" />
        <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver" />
        <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/dbname" />
        <property name="hibernate.connection.username" value="root" />
        <property name="hibernate.connection.password" value="" />
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
        <property name="hibernate.connection.provider_class" value="org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider" />
        <property name="hibernate.c3p0.minPoolSize" value="0" />
        <property name="hibernate.c3p0.maxPoolSize" value="25" />
        <property name="hibernate.c3p0.maxConnectionAge" value="14400" />
        <property name="hibernate.c3p0.maxIdleTime" value="100" />
    </properties>
</persistence-unit> 
```

我的 pom.xml 文件是：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>projectname</groupId>
<artifactId>projectname</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>war</packaging>
<properties>
    <version.jboss.bom>1.0.4.Final</version.jboss.bom>
</properties>
<build><!-- Maven will append the version to the finalName (which is the 
        name given to the generated war, and hence the context root) -->
    <finalName>${project.artifactId}</finalName>
    <plugins><!-- Compiler plugin enforces Java 1.6 compatibility and activates 
            annotation processors -->
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>
            <configuration><!-- Java EE 6 doesn't require web.xml, Maven needs to 
                    catch up! -->
                <failOnMissingWebXml>false</failOnMissingWebXml>
            </configuration>
        </plugin><!-- The JBoss AS plugin deploys your war to a local JBoss AS 
            container --><!-- To use, run: mvn package jboss-as:deploy -->
        <plugin>
            <groupId>org.jboss.as.plugins</groupId>
            <artifactId>jboss-as-maven-plugin</artifactId>
            <version>7.1.1.Final</version>
        </plugin>
    </plugins>
</build>
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.6.3.Final</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.15</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.as</groupId>
        <artifactId>jboss-as-jpa-hibernate3</artifactId>
        <version>7.1.3.Final</version>
    </dependency>
    <dependency>
        <groupId>jexcelapi</groupId>
        <artifactId>jxl</artifactId>
        <version>2.6</version>
    </dependency>
    <dependency>
        <groupId>javax.ws.rs</groupId>
        <artifactId>javax.ws.rs-api</artifactId>
        <version>2.0-rc1</version>
    </dependency>
    <dependency>
        <groupId>javax.enterprise</groupId>
        <artifactId>cdi-api</artifactId>
        <version>1.1-20130222</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.6.0</version>
    </dependency>
    <dependency>
        <groupId>com.mchange</groupId>
        <artifactId>c3p0</artifactId>
        <version>0.9.2-pre8</version>
    </dependency>
</dependencies> 
```

我已经从 Hibernate 和我能找到的其他依赖项中尝试了许多不同的与 c3p0 相关的依赖项，但似乎没有任何东西可以使项目正常工作。有人可以指出我正确的方向。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T23:12:17.040

您缺少的特定依赖项是

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-c3p0</artifactId>
    <version>3.6.3.Final</version>
</dependency> 
```

您缺少的类曾经在 hibernate-core 中，但它可能在 3.3 版左右移到了这里

[http://mvnrepository.com/artifact/org.hibernate/hibernate-c3p0](http://mvnrepository.com/artifact/org.hibernate/hibernate-c3p0)

[http://gazelle.ihe.net/content/how-use-c3p0-jdbc-connection-pool-your-maven-project](http://gazelle.ihe.net/content/how-use-c3p0-jdbc-connection-pool-your-maven-project)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:13:39.613

好吧，我通过将我可以在 Maven 上找到的所有 c3p0 依赖项同时捆绑到项目中来解决了这个问题。我不确定哪个依赖项解决了这个问题，但其中一个解决了。因此，这个问题似乎是由于缺少 jar，这是我从 ClassNotFoundException 中怀疑的。

# r - 将数据点添加到现有散点图

> ID：15158784
> 
> 赞同：1
> 
> 时间：2013-03-01T13:20:54.960
> 
> 标签：r, ggplot2

我有一个现有的 ggplot2 散点图，它显示了来自普通数据库的参数的结果。然后我想在这个图中添加两个额外的点，我将把它们作为命令行参数传递给我的脚本`script age value1 value2`。我想将这些点显示为红色，每个点上方都有一个 r 和 l geom_text。到目前为止我有以下代码，但不知道如何添加收尾工作

```
pkgLoad <- function(x)
  {
    if (!require(x,character.only = TRUE))
    {
      install.packages(x,dep=TRUE, repos='http://star-www.st-andrews.ac.uk/cran/')
      if(!require(x,character.only = TRUE)) stop("Package not found")
    }

  }

pkgLoad("ggplot2")
#load current normals database
df<-data.frame(read.csv("dat_normals.txt", sep='\t', header=T))

args<-commandArgs(TRUE)

#specify what each argument is
age <- args[1]
rSBR <- args[2]
lSBR <- args[3]

# RUN REGRESSION AND APPEND PREDICTION INTERVALS
lm_fit = lm(SBR ~ Age, data = df)
sbr_with_pred = data.frame(df, predict(lm_fit, interval='prediction'))

p <- ggplot(sbr_with_pred, aes(x=Age, y=SBR)) + 
          geom_point(shape=19, alpha=1/4) +
          geom_smooth(method = 'lm', aes(fill = 'confidence'), alpha = 0.5) +
          geom_ribbon(aes(y = fit, ymin = lwr, ymax = upr, 
                         fill = 'prediction'), alpha = 0.2) + 
          scale_fill_manual('Interval', values = c('green', 'blue')) +
          theme_bw() + 
          theme(legend.position = "none") 

ggsave(filename=paste("/home/data/wolf/FV_DAT/dat_results.png",sep=""))
browseURL(paste("/home/data/wolf/FV_DAT/dat_results.png",sep"")) 
```

本质上，我想看看这 2 个新点是否在正常数据库的 95% 置信区间内（蓝丝带）![在此处输入图像描述](../Images/976b1d1a7c2f3898c706abcb75514012.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:38:50.707

您的示例不可重现。创建数据和可重复的示例确实具有建设性。这不是浪费时间。对于解决方案，我写下评论中所说的内容。您添加一个包含新数据的新层。

```
 newdata <- data.frame(Age = args[1],
                        SBR = c(args[2],args[3]))
  p + geom_point(data=newdata,colour="red",size=10) 
```

例如：

sbr_with_pred <- data.frame(Age = sample(15:36,50,rep=T), SBR = rnorm(50))

```
p <- ggplot(sbr_with_pred, aes(x=Age, y=SBR)) + 
  geom_point(shape=19, alpha=1/4) +
  geom_smooth(method = 'lm', aes(fill = 'confidence'), alpha = 0.5) 

  args <- c(20,rnorm(1),rnorm(2))
  newdata <- data.frame(Age = args[1],
                        SBR = c(args[2],args[3]))
  p + geom_point(data=newdata,colour="red",size=10) 
```

![在此处输入图像描述](../Images/ca8718ce3c8a73c5bc2efc12793ba4f6.png)

# java - 具有相同基类的泛型

> ID：15158786
> 
> 赞同：2
> 
> 时间：2013-03-01T13:20:56.673
> 
> 标签：java, generics

我有一个 TreeNode 类定义如下：

```
class TreeNode<T extends MyClass> {
    public T element;
    public TreeNode<? extends MyClass> parent;
    public ArrayList<TreeNode<? extends MyClass>> children;
} 
```

我想知道是否有更简单的方法将所有 TreeNodes 限制为扩展的泛型类型变量`MyClass`？必须写出来`ArrayList<TreeNode<? extends MyClass>>`是非常乏味的。我不能这样做`ArrayList<TreeNode<T>>`，因为树不能包含具有不同 MyClass 继承的节点。

我试图做这样的事情： `public static const Class NODE_CLASS = TreeNode<? extends TreeNode>.class;`但我认为您不能将泛型用作类对象的一部分。

我猜想是 C++ 的同义词`typedef`，即 `typedef TreeNode<? extends MyClass> NodeClass;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T13:30:42.383

由于我的评论似乎对您有所帮助，因此我将其发布为答案：

`T`如果树中的节点之间不匹配，我看不到使用泛型的意义。鉴于此，`element`应该只是`MyClass`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T13:31:10.847

如果你想保留泛型，你可以缩短

```
ArrayList<TreeNode<? extends MyClass>> children; 
```

至

```
List<TreeNode<?>> children; 
```

因为`extends MyClass`在类定义中声明了，编译器仍然能够推断出只允许具有扩展`MyClass`（或`MyClass`自身）参数的树节点。

请记住，`MyClass`在访问元素时仍然必须使用，因为这是唯一已知的通用超类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T13:30:18.197

FWIW 将类型参数 ( `T extends MyClass`) 的边界重复为通配符 ( `? extends MyClass`) 的边界，完全没有任何作用。只需使用无界通配符`?`（如`TreeNode<?>`）。

# ruby - 如何在 Ruby 中使用正则表达式或其他方式检测这个不可打印的字符？

> ID：15158787
> 
> 赞同：2
> 
> 时间：2013-03-01T13:20:57.310
> 
> 标签：ruby, regex, character-encoding

我遇到了一个奇怪的角色（使用 Nokogiri）。

```
irb(main):081:0> sss.dump
=> "\"\\u{a0}\""
irb(main):082:0> puts sss 

=> nil 
irb(main):083:0> sss 
=> " " 
irb(main):084:0> sss =~ /\s/
=> nil 
irb(main):085:0> sss =~ /[[:print:]]/
=> 0
irb(main):087:0> sss == ' ' 
=> false
irb(main):088:0> sss.length
=> 1 
```

知道这个奇怪的角色是什么吗？

当它显示在网页中时，它是一个空格，但它与使用正则表达式的空格 \s 不匹配。Ruby 甚至认为这是一个可打印的字符！

如何检测这样的字符并将它们排除或将它们标记为空格（如果可能）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:29:28.650

这是非破坏空间。在 HTML 中，它被非常频繁地使用并且通常写成  。找出类似字符身份的一种方法`"\u{a0}"`是在网上搜索`U+00A0`（使用四个或更多十六进制数字），因为 Unicode 规范就是这样标记 Unicode 代码点的。

不间断空格和其他类似的内容包含在 regex 中`/[[:space:]]/`。

# ruby-on-rails - 子资源数组字段上的多复选框创建新项目

> ID：15158790
> 
> 赞同：0
> 
> 时间：2013-03-01T13:21:17.247
> 
> 标签：ruby-on-rails, mongoid, nested-forms, nested-attributes

我正在尝试为二级嵌入文档创建多个复选框标签。但是，现在它只是创建新对象。我有模型

```
class Paprasa
  include Mongoid::Document

  attr_accessible :id, :bkompetencijas, :bkompetencijas_attributes

  accepts_nested_attributes_for :etapa
  accepts_nested_attributes_for :bkompetencijas, :allow_destroy => true
  embeds_many :bkompetencijas , class_name: 'Kompetencija', inverse_of: :paprasabk,  :cascade_callbacks => true
end
#-----------------------------------------------
class Kompetencija
  include Mongoid::Document

  attr_accessible :id, :paprasabk, :paprasabk_attributes, :siekinys, :siekinys_attributes  

  accepts_nested_attributes_for :paprasa, :allow_destroy => true
  accepts_nested_attributes_for :siekinys, :allow_destroy => true

  embedded_in :paprasabk, class_name: 'Paprasa', inverse_of: :bkompetencijas
  embeds_many :siekinys, class_name: 'Siekiny'  , inverse_of: :kompetencija, :cascade_callbacks => true
end
#-----------------------------------------------
class Siekiny
  include Mongoid::Document
  field :matricos_ids, :type => Array, :default => []

  attr_accessible :id, :kompetencija, :kompetencija_attributes, :matricos_ids

  accepts_nested_attributes_for :kompetencija

  embedded_in :kompetencija  , class_name: 'Kompetencija', inverse_of: :siekinys
end 
```

表单

```
<%= form_for  [@paprasa],:html => { :multipart => true} do |f| %>
    <%= f.fields_for :dkompetencijas do |form_inner| %>
         <%= form_inner.fields_for :siekinys do |form_inner_inner| %>
          <% @some_other_object.each_with_index do |d,indexx| %>
              <%= check_box_tag "#{field_name_for_js(form_inner_inner, "matricos_ids")}[]", d.id, form_inner_inner.object.matricos_ids.include?(d.id), :id => "#{field_id_for_js(form_inner_inner, "matricos_id_") << d.id.to_s}" ).to_s %>  
          <% end %>
         <% end %> 
    <% end %>
<% end %> 
```

在哪里

```
def field_id_for_js(builder, attribute)
      "#{builder.object_name}[#{attribute.to_s.sub(/\?$/,"")}]".gsub(/\]\[|[^-a-zA-Z0-9:.]/, "_").sub(/_$/, "")
  end

  def field_name_for_js(builder, attribute)
      "#{builder.object_name}[#{attribute.to_s.sub(/\?$/,"")}]"
  end 
```

它给了我这样的输出

```
<input id="paprasa_dkompetencijas_attributes_0_siekinys_attributes_0_matricos_id_506567916226f718e50000cb" name="paprasa[dkompetencijas_attributes][0][siekinys_attributes][0][matricos_ids][]" type="checkbox" value="506567916226f718e50000cb" />
<input id="paprasa_dkompetencijas_attributes_0_siekinys_attributes_1_matricos_id_506567916226f718e50000cb" name="paprasa[dkompetencijas_attributes][0][siekinys_attributes][1][matricos_ids][]" type="checkbox" value="506567916226f718e50000cb" /> 
```

和参数

```
{"paprasa"=>{"dkompetencijas_attributes"=>{"0"=>{"siekinys_attributes"=>{"0"=>{"id"=>"505adfd26226f7555a000191", "matricos_ids"=>["506567916226f718e50000cb"]}, "1"=>{"id"=>"507558176226f75fa5000033"}, "2"=>{"id"=>"512f19626226f765c7000071"}, "3"=>{"id"=>"512f36456226f765c70000c8"}}, "id"=>"505adfd26226f7555a000190"}}}, "user_id"=>"5058514b6226f73ae4000064", "etapa_id"=>"505851516226f73ae4000065"} 
```

这只是创建新的“siekiny”对象，而不是更新现有的对象。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:27:31.197

我最近实际上遇到了这个问题。Accepts_nested_attributes_for 不能（还）用新的父对象形式破译是创建新的子对象还是查找和更新现有的子对象。如果您不希望在创建新的父对象时复制您的子对象，那么您将必须创建一个自定义 setter 方法来为您处理 find_or_create 。

查看[这个](https://stackoverflow.com/questions/3579924/accepts-nested-attributes-for-with-find-or-create)问题，它通过覆盖自动保存关联来解决问题。

或者，查看[这个](https://stackoverflow.com/questions/4164185/accepts-nested-attributes-for-to-link-to-existing-record-not-create-a-new-one)问题，它通过使用 reject_if 和自定义方法来解决问题。

解决这个问题的另一个选择是在控制器中分解散列并在那里而不是在模型中创建所有对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:12:27.950

但是，这对我不起作用。对于某些动作，它工作了几次，然后又坏了。我什至尝试从`@some_other_object side` （这个对象被引用`paprasa`，它只是不断创建新对象。我得到这个的唯一方法是在控制器中放入一些“hackish”的东西，我真的不喜欢。我拿了父对象，遍历了子对象使用参数上的索引来查找指定的数组字段并分配给子属性，然后使用 .save 方法。现在一切正常，但我不喜欢它...

# .net - 使用模拟器进行条码扫描的 Windows Mobile 应用程序

> ID：15158792
> 
> 赞同：3
> 
> 时间：2013-03-01T13:21:45.043
> 
> 标签：.net, windows-mobile

我想为 Motorolo MC 9190 G 手机开发简单的应用程序，它具有内置的条形码扫描仪，我想扫描条形码并将它们显示在消息框中。我没有手机，所以我必须在模拟器中测试它。当我在模拟器中部署代码时，它会给出空异常错误。我的代码是我添加 sample.barcode dll

```
Private barcodeReader As Symbol.Barcode.Reader // error occurs here itself 
barcodeReader = New Symbol.Barcode.Reader()
barcodeReader.Actions.Enable()
Dim nextReaderData As Symbol.Barcode.ReaderData = barcodeReader.GetNextReaderData()
MessageBox.Show(nextReaderData.Text) 
```

我是初学者。请帮忙。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:31:14.537

您需要创建一个接口和一个模拟，类似于以下内容：

```
interface IBarcodeReader
{
    string ReadBarcode();
}

public class SymbolReader : IBarcodeReader
{
    private Reader m_reader;

    public SymbolReader()
    {
        m_reader = new SymbolReader.Barcode.Reader;
        m_reader.Actions.Enable();
    }

    public string ReadBarcode()
    {
        return m_reader.GetNextReaderData().Text;
    }
}

public class MockReader : IBarcodeReader
{
    public string ReadBarcode()
    {
        return "MOCK ABCDE";
    }
} 
```

然后在运行时，使用一些逻辑来确定您所在的平台并创建适当的实例：

```
public class Foo
{
    IBarcodeReader Reader { get; set; }

    public Foo()
    {
        if (ThisIsASymbolDevice)
        {
            Reader = new SymbolReader();
        }
        else
        {
            Reader = new MockReader();
        }

        var barcode = Reader.ReadBarcode();
    }
} 
```

# php - OAuth2 令牌，当我尝试使用 OAuth（服务帐户）更新 Google 日历时返回消息：'{"error":"access_denied"}'

> ID：15158796
> 
> 赞同：4
> 
> 时间：2013-03-01T13:21:54.937
> 
> 标签：php, google-api, oauth-2.0, google-calendar-api, service-accounts

我正在使用适用于 PHP 的 Google 标准库来使用日历服务，并且我已经通过 Google API 控制台为 OAuth 2.0 身份验证设置了服务帐户类型。

**我的主要目标是通过批量更新用户的谷歌日历（例如：user@organisationname.com）（当用户不在线时）。例如。更新用户日历中的事件。**

当用户登录应用程序（使用 OAuth2.0）时，他/她将为应用程序提供“管理您的日历”、“查看您的日历”和“在我不使用应用程序时执行这些操作”的权限

以下代码用于使用 OAuth2.0 登录

```
<?php
require_once '../../src/Google_Client.php';
require_once '../../src/contrib/Google_CalendarService.php';
session_start();

$client = new Google_Client();
$client->setApplicationName("Google Calendar PHP Starter Application");

$client->setClientId('XXXXX-flue2a9o5ll602ovrhaejlpm9otgjh1r.apps.googleusercontent.com');
$client->setClientSecret('XXXXXXXXXX');
$client->setRedirectUri('http://localhost/testAPI/google-api-php-client/examples/calendar/simple.php');
$client->setDeveloperKey('AIzaSyCGvXRXGMo58ZDswyb4zBkJgRMLcHBRIrI');
$cal = new Google_CalendarService($client);
if (isset($_GET['logout'])) {
  unset($_SESSION['token']);
}

if (isset($_GET['code'])) {
  $client->authenticate($_GET['code']);

  $_SESSION['code']=$_GET['code'];

  $_SESSION['token'] = $client->getAccessToken();
  header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
}

if (isset($_SESSION['token'])) {
  $client->setAccessToken($_SESSION['token']);
}

if ($client->getAccessToken()) {
  $calList = $cal->calendarList->listCalendarList();
  print "<h1>Calendar List</h1><pre>" . print_r($calList, true) . "</pre>";

  echo $_SESSION['code'];

$_SESSION['token'] = $client->getAccessToken();
} else {
  $authUrl = $client->createAuthUrl();
  print "<a class='login' href='$authUrl'>Connect Me!</a>";
}

?> 
```

**Once I get permissions do I have to save something to use these permissions in future when the user is not logged in?**

Following code works fine when user is logged in. But returns **Error refreshing the OAuth2 token, message: '{ "error" : "access_denied" }'** when user is logged out

```
<?php 

require_once '../src/Google_Client.php';
require_once '../src/contrib/Google_CalendarService.php';

session_start();

const CLIENT_ID = 'XXXXXX.apps.googleusercontent.com';
const SERVICE_ACCOUNT_NAME = 'XXXX@developer.gserviceaccount.com';

const KEY_FILE = 'f183b8caXXXXXXXXatekey.p12';

$client = new Google_Client();
$client->setApplicationName("XXXXXXXX Calendar Service");

if (isset($_SESSION['token'])) {
 $client->setAccessToken($_SESSION['token']);
}

$key = file_get_contents(KEY_FILE);
$client->setClientId(CLIENT_ID);

$client->setAssertionCredentials(new Google_AssertionCredentials(
        SERVICE_ACCOUNT_NAME,
        array('https://www.googleapis.com/auth/calendar'),
        $key,
        'notasecret',
        'http://oauth.net/grant_type/jwt/1.0/bearer',
        '363183053@developer.gserviceaccount.com')
);

$client->setClientId(CLIENT_ID);

$cal = new Google_CalendarService($client);

    try{
$cal->events->quickAdd("info@organisationname.com", "SERVICE TEST ");
}catch(Exception $e){

    print_r($e->getMessage());
}

// We're not done yet. Remember to update the cached access token.
// Remember to replace $_SESSION with a real database or memcached.
if ($client->getAccessToken()) {
    echo $_SESSION['token'] = $client->getAccessToken();
} 
```

What should I do in order to update calendar **when user is not logged in** (provided user has given permission). Should I save the Access Code when user is logged in and use it later when I want to run the batch?

BTW What is association handle?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:01:30.463

In fact you do not need to share the calendar with the service account. What needs to happen is to Delegate domain-wide authority to your service account.

The service account that you created now needs to be granted access to the Google Apps domain’s user data that you want to access.

The following tasks have to be performed by an administrator of the Google Apps domain: 1\. Go to your Google Apps domain’s control panel. The URL should look like: [https://www.google.com/a/cpanel/mydomain.com](https://www.google.com/a/cpanel/mydomain.com)

1.  Go to Advanced tools... > Manage third party OAuth Client access.

2.  In the Client name field enter the service account's Client ID.

3.  In the One or More API Scopes field enter the list of scopes that your application should be granted access to. For example if you need domain-wide readonly access to the Google Calendar API enter: [https://www.googleapis.com/auth/calendar.readonly](https://www.googleapis.com/auth/calendar.readonly)

4.  Click the Authorize button.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:31:13.053

You Getting the Error because of your Scopes not mentioned properly. In Google OAuth 2.0 Scope defined :

> **Indicates the Google API access your application is requesting**. The values passed in this parameter inform the consent page shown to the user. There is an inverse relationship between the number of permissions requested and the likelihood of obtaining user consent.
> 
> space delimited set of permissions the application requests

*   To Resolve the issue you have to first Change the Scope Parameters

*   Include Calender Scope in it

*   Then Get the Access Token and then try to change the things

*   Then do changes accordingly to requirements and steps provided in API Documentation

# performance - 针对各种数据库表验证数据的性能

> ID：15158802
> 
> 赞同：-1
> 
> 时间：2013-03-01T13:22:07.580
> 
> 标签：performance, abap, opensql

我的问题：

我将一个表“循环”到一个名为 ls_eban.. 的本地结构中。

有了这些信息，我必须遵循以下说明：

1.  ls_eban-matnr**必须**在表 zmd_scmi_st01 中（1.控制表（全局））
2.  ls_eban-werks**必须**在表 zmd_scmi_st05 中（2.控制表（全局））
3.  ls_eban-knttp**必须**在表 zmd_scmi_st06 中（3.控制表（全局））

我需要一个清晰且高效的选择。我实际上有一个，但它根本没有性能。

我的解决方案：

```
SELECT st01~matnr st05~werks st06~knttp
  FROM       zmd_scmi_st01 AS st01
  INNER JOIN zmd_scmi_st05 AS st05
  ON         st05~werks = ls_eban-werks
  INNER JOIN zmd_scmi_st06 AS st06
  ON         knttp = ls_eban-knttp
INTO TABLE   lt_control
WHERE        st01~matnr = ls_eban-matnr AND st01~bedarf = 'X'
  AND        st05~bedarf = 'X'. 
```

我还不得不说，控制表之间没有任何关系（没有主键和辅助键）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:13:41.207

您不应该做的第一件事是在循环内进行选择。代替

```
loop at lt_eban into ls_eban.
      Select ....
endloop. 
```

你应该做一个单一的选择。

```
if lt_eban[] is not initial.
   select ...
     into table ...
     from ...
      for all entries in lt_eban
    where ...
endif. 
```

如果我们有更多信息（如 vwegert 的评论中所述。例如，控制表上真的没有键？），可能会有更多的低效率需要纠正，但循环中的选择是第一件事。

# java - JavaFX 应用程序在调用其他场景时返回 NullPointerException（有时）

> ID：15158803
> 
> 赞同：0
> 
> 时间：2013-03-01T13:22:10.913
> 
> 标签：java, javafx-2, javafx

我的应用程序有一个登录场景和一个主视图场景，发生的事情是当我登录时调用 MainView 有时我得到这个异常：

```
java.lang.NullPointerException
    at javafx.scene.Scene.focusInitial(Scene.java:1879)
    at javafx.scene.Scene.access$3600(Scene.java:170)
    at javafx.scene.Scene$ScenePulseListener.focusCleanup(Scene.java:2181)
    at javafx.scene.Scene$ScenePulseListener.pulse(Scene.java:2221)
    at com.sun.javafx.tk.Toolkit.firePulse(Toolkit.java:363)
    at com.sun.javafx.tk.quantum.QuantumToolkit.pulse(QuantumToolkit.java:460)
    at com.sun.javafx.tk.quantum.QuantumToolkit$9.run(QuantumToolkit.java:329)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
    at java.lang.Thread.run(Thread.java:722) 
```

奇怪的是它并不总是发生，**只是有时。**

我的课：

```
public class TargetAppDesktop extends Application {

    @Override
    public void start(Stage primaryStage) throws IOException {

        Scene scene = new Scene(new AnchorPane());

        LoginManager loginManager = new LoginManager(scene);
        loginManager.showLoginScreen();
        primaryStage.setResizable(false);
        primaryStage.setScene(scene);
        primaryStage.show();

        primaryStage.setOnCloseRequest(new EventHandler<WindowEvent>() {
            @Override
            public void handle(WindowEvent t) {
                MainViewController.deleteTempFiles();
                Platform.exit();
                System.exit(0);
            }
        });

    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

我的登录管理器课程

```
public class LoginManager {

    private Scene scene;

    LoginManager(Scene scene) {
        this.scene = scene;
    }

    public void logout() {
        showLoginScreen();
    }

    void showLoginScreen() {
        try {
            FXMLLoader loader = new FXMLLoader(
                    getClass().getResource("Login.fxml"));
            //         scene.getStylesheets().add(this.getClass().getResource("Login.css").toExternalForm());

            scene.setRoot((Parent) loader.load());
            LoginController controller =
                    loader.<LoginController>getController();
            controller.initManager(this);
        } catch (IOException ex) {
            Logger.getLogger(LoginManager.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    void showMainViewScreen(Login loginTargetApp, Login loginGateway, Gateway gateway, File file, ArrayList<Integer> anoList) {

            try {

                FXMLLoader loader = new FXMLLoader(getClass().getResource("MainView.fxml"));

                scene.setRoot((Parent) loader.load());

                MainViewController controller = loader.<MainViewController>getController();

                controller.initSessionID(this, scene, loginTargetApp, loginGateway, gateway, file, anoList);

            } catch (Exception ex) {
                Logger.getLogger(LoginManager.class.getName()).log(Level.SEVERE, null, ex);
            }

    }

    void autheticated(Login loginTargetApp, Login loginGateway, Gateway gateway, File file, ArrayList<Integer> anoList) {
        showMainViewScreen(loginTargetApp, loginGateway, gateway, file, anoList);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T16:51:35.733

之所以出现这个问题，是因为我试图在另一个线程中更改我的场景，但必须在 Javafx 主线程中进行更改，所以一个简单的 Platform.runLater 解决了我的问题。

您可以在[此处找到更多详细信息。（JIRA 链接）](https://javafx-jira.kenai.com/browse/RT-28954?focusedCommentId=347986&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-347986)

# java - 在java android中创建一个JSON对象数组

> ID：15158804
> 
> 赞同：1
> 
> 时间：2013-03-01T13:22:14.887
> 
> 标签：java, android, json, arraylist

我创建了一个看起来像这样的类游戏：

```
public class Game{
private String name;
private String location;
private int participants;

public Game(String name, String location, int participants){
     this.name = name;
     this.location = location;
     this. participants = participatns;
}

//getters and setters of all properties 
```

我有一个看起来像这样的 ArrayList：

```
 ArrayList<Game>gameList = new ArrayList<Game>(); 
```

这个 ArrayList 包含 5 个游戏。我想将这些游戏发送到一个 php 脚本，所以我认为最聪明的方法是创建一个 JSON 对象数组并将它们发送到 php 脚本，因为这些游戏在某些时候也可能是 100 个或更多。

我的问题是，如何创建 Game 对象的 JSON 数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:42:59.970

使用 Gson：[https ://sites.google.com/site/gson/gson-user-guide#TOC-Using-Gson](https://sites.google.com/site/gson/gson-user-guide#TOC-Using-Gson)

```
Game game = new Game();
Gson gson = new Gson();
String json = gson.toJson(game); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:43:08.220

最好的办法是进入 GSON。[GSON 网站](http://code.google.com/p/google-gson/)，

```
public class ExampleObject {
    public static final String API_KEY = "get_response";
    private static final String OFFSETS = "offsets";

    @SerializedName(OFFSETS)
    private List<Integer> mOffsets;

    public ExampleObject() {
        super();
    }

    public String getAPIKey() {
        return API_KEY;
    }

    public List<Integer> getOffsets() {
        return mOffsets;
    }
} 
```

# iphone - 使用 iOS 创建的 sqlite 文件路径 - UIWebView

> ID：15158807
> 
> 赞同：0
> 
> 时间：2013-03-01T13:22:23.057
> 
> 标签：iphone, ios, sqlite

在我的应用程序中，我们目前使用 sqlite from`UIWebView`来存储用户偏好和详细信息。现在我们正在本机 Objective-C 代码中移动此功能，并希望在更新应用程序时保留这些默认值。

我正在考虑从 Objective-C 代码访问 .sqlite 文件并将这些首选项传输到`NSUserDefaults`. 我在哪里可以找到由创建的 .sqlite 文件`UIWebView`，默认位置是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:05:01.870

如果你在模拟器上，数据库文件在这里：

```
/Users/<your-user>/Library/Application\ Support/iPhone\ Simulator/User/Applications/<your-app-id>/Library/WebKit/Databases/file__0/<database-name> 
```

在设备上，尝试：

```
/var/mobile/Applications/<your-app-id>/Library/WebKit/Databases/file__0/<database-name> 
```

# asp.net - 发布网站后如何更改任何应用程序代码类？

> ID：15158810
> 
> 赞同：0
> 
> 时间：2013-03-01T13:22:27.100
> 
> 标签：asp.net, web, publish

我在发布网站后上传了网站，现在我想更改位于 app_code 文件夹中的类中的一行代码。更改后，我再次发布网站并上传新的 app_code.dll 以替换旧的，但它不起作用。app_code 的全部功能不起作用。有没有人可以解决我的问题？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:27:04.957

该`App_Code`文件夹将解析您放入其中的任何源文件，例如 MyClass.vb 或 MyClass.cs。如果要将类编译为 DLL，则希望将 DLL 文件放入`bin`文件夹中。

如果这些类包含在您的项目中并且将其构建操作设置为编译，则它们将在您运行构建时自动编译到 Web 应用程序的 DLL 中，并且每次发布站点时都应该更新，因为发布会自动构建项目/解决方案。

# sql - 在 SQL 查询中使用 1=2

> ID：15158811
> 
> 赞同：7
> 
> 时间：2013-03-01T13:22:27.530
> 
> 标签：sql

有人请在下面的 SQL 查询中解释***'1=2'的含义。***

```
SELECT E.EmpID,
       E.EmpName,
       Country = CASE
                   WHEN T.Active = 'N'
                        AND 1 = 2 THEN 'Not Working Anymore'
                   ELSE C.Country_Name
                 END,
       T.Contract_No
FROM   Employees E (nolock)
       INNER JOIN Contract T
         ON T.Contract_No = E.Contract_No
       LEFT JOIN Country C (nolock)
         ON E.Country_ID = C.Country_ID 
```

谢谢

编辑：-纠正了我给出的示例 SQL 查询中存在的小错误。@ ALL :- 这里提到的查询是一个大型工作查询的示例版本，我必须解决一些问题。为了简单起见，我创建了一个 SQL 查询的示例场景。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-09-03T20:50:56.907

如果您从另一个表创建表，但您不想复制任何行，则`1=2`该子句的这一部分很有用。`WHERE`例如：

```
CREATE TABLE ABC_TEMP AS
    SELECT * FROM ABC WHERE 1=2; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-01T13:28:08.570

```
when T.Active = 'N' and 1=2 then 'Not Working Anymore' 
```

很简单，上面的条件永远不会变成`true`。所以结果永远是`C.Country_Name`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-01T13:26:56.527

这是动态构造 SQL 过滤子句的常用技巧。这允许自动构造“T.Active = 'N' and”，而无需检查后续子句，因为始终会附加“1=2”。

**更新：** 是否使用 1=1 或 1=2 取决于在构建自动子句时是否应该使用合取或析取范式。在这种情况下，设计和实现似乎不匹配。

**更新 2** 我相信大多数开发人员更喜欢合取范式，主要术语由 AND 连接，但析取范式在表达能力和代码大小方面是相等的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-01T13:25:37.607

它对应于一个 FALSE 参数。

例如 ;

```
select * from TABLE where 1=2 
```

返回零行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-01T13:26:28.493

`WHERE 1=2` 如果您**不想**检索任何行，请使用，

一如既往。`1=2`_`false`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-01T13:26:49.977

添加 and 1=2 将导致这种情况总是返回 false。要找出它为什么在那里，请询问将它放在那里的人。

我怀疑它是放在那里的，所以作者可以强制第一个条件为假，然后他忘了删除它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-01T13:27:14.903

我猜这是一个调试脚本。它总是在那里返回案件的负面部分。可能在发布时，该部分被取出。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-04T23:30:18.230

1 = 2 意味着我们给出的条件总是错误的；因此，您的行不会显示 ('NULL') 记录...

即创建表empt_tgt AS 选择empno、ename、job、mgr、sal WHERE 1=2；

然后假设当我们执行以下语句时 empt_tgt 具有所有这些列的记录： SELECT * FROM empt_tgt

EMPT_TGT 将为空；这意味着我们只会看到列名 empno、ename、job、mgr、sal 没有数据...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-19T14:06:17.237

我在公司的几段代码中发现了这一点。在我们的例子中，它通常会被错误地保留为 DEBUG 代码。开发人员可以将其用作占位符，就像您的示例中的情况一样。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-02-03T16:20:53.213

人们使用 1=2 来检查他们的代码在语法上是否正确，而无需代码执行任何操作。例如，如果您有一个复杂的 UPDATE 语句，并且您想检查代码是否正确而不更新任何内容。

# css - CSS 变换不会增加父 div 的高度

> ID：15158812
> 
> 赞同：0
> 
> 时间：2013-03-01T13:22:29.633
> 
> 标签：css, html, webkit

我添加了 2 个 div 一个是父级，另一个是子级。

```
<div class="parent_div">
     <div class="child_div_with_transform">
     </div>
</div> 
```

我已将 webkit-transform 添加到子 div。现在我想将父 div 的高度设置为与变换后的子 div 相同。我也想删除滚动条。

你可以参考。以下代码。

[http://jsfiddle.net/Sab2t/](http://jsfiddle.net/Sab2t/)

我喜欢尝试任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:55:20.677

试试这个

添加

```
.Parent 
{
display:table;  // add this to your parent
width:400px;    // as per requirement
}

.child
{
display:table-row; // add this to child
} 
```

它会解决你的问题。看看[JsFiddle](http://jsfiddle.net/Sab2t/3/)

# oracle-apex - 验证以检测数字字段中的文本

> ID：15158813
> 
> 赞同：1
> 
> 时间：2013-03-01T13:22:38.313
> 
> 标签：oracle-apex

我试图防止用户崩溃创建新产品顶点页面。在创建页面上，我有一个文本字段：product_name 和一个数字字段：product_quantity。

目前，当他们在 product_quantity 字段中输入文本并单击“保存”时，他们会收到以下错误：

错误处理验证。

ORA-01722: 无效号码

我已经调查了这个错误，但是我认为在 Apex 中，如果您选择了一个数字字段，它会检测用户输入的是文本还是数字字符？

如果用户输入了文本，是否有显示验证消息的方法，它会大喊大叫，否则它可以让用户保存新条目？

***更新***

我知道它为什么会发生，但不知道如何解决它。

我重新创建了我的页面并且它有效。然后我在我的页面处理中添加了两个验证，然后当我尝试它时，我在我的初始帖子中得到了错误。如果我禁用它们，它会再次起作用。验证使用 NOT EXISTS 来查找输入的值在添加之前是否已存在于表中。

如果只有在查看是否输入了数值后才开始验证。我停止了查看相关项目的验证，并关闭了“按下按钮时”，但仍然没有乐趣。

```
select 1 from MY_TABLE where column_name = :P6_TEXT_FIELD 
```

有没有办法在我在页面处理中创建的验证之前运行文本框验证（检查其文本是否输入）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:16:21.253

验证就是这样：它们都被执行并且不会短路。当您调试页面时，您实际上可以清楚地看到这种情况。
对于数字字段，您会看到它没有通过数字验证。但这并不会停止验证。因此，您的第二次验证将使用提交的值运行，但是当您输入文本时显然会失败。

* * *

有一些解决方法。例如，您可以将 NOT-EXISTS 验证更改为返回错误消息的 PLSQL 函数并执行类似这样的操作（示例）：

```
DECLARE
  v_test_nbr NUMBER;
  v_check_exists NUMBER;
BEGIN
  BEGIN
    v_test_nbr := to_number(:P6_TEXT_FIELD);
  EXCEPTION
  WHEN OTHERS THEN
    -- or catch 1722 (invalid number) and 6502 (char to number conversion error)
    v_test_nbr := NULL;
  END;

  IF v_test_nbr IS NOT NULL
  THEN
  -- if v_test_nbr is not null then the field should be numerically valid
  -- if it isn't then this code would be skipped and this validation
  -- will not throw an error.
  -- However, the previous validation will still fail when text is entered, 
  -- so this shouldn't matter.
    BEGIN
      SELECT 1
      INTO v_check_exists
      FROM my_table
      WHERE column_name = :P6_TEXT_FIELD;
    EXCEPTION 
    WHEN no_data_found THEN
      v_check_exists := 0;
    END;

    IF v_check_exists = 1 
    THEN
      RETURN 'A record with this key already exists';      
    END IF;
  END IF;

  RETURN NULL;
END; 
```

* * *

但是 - 在这种情况下，如果您至少在 4.1 版上，您想要检查重复条目，则可能存在更好的选择。如果您的表定义了正确的约束，那么您将在执行不存在的字段上定义一个唯一键。这意味着如果您没有在该字段上进行此验证，您将收到 ora-00001`DUP_VAL_ON_INDEX`错误。
然后，您可以使用 apex 提供的错误处理来捕获此错误，并生成用户友好的消息。
您可以在 apex 开发团队的 Patrick Wolf 的博客上找到如何使用和实现此功能的示例：
[apex-4-1-error-handling-improvements-part-1/](http://www.inside-oracle-apex.com/apex-4-1-error-handling-improvements-part-1/)
[apex-4-1-error-handling-改进-第 2 部分/](http://www.inside-oracle-apex.com/apex-4-1-error-handling-improvements-part-2/)

# apache - 文件上传在服务器中不起作用，但在本地工作

> ID：15158817
> 
> 赞同：1
> 
> 时间：2013-03-01T13:23:07.323
> 
> 标签：apache, file, file-upload, php

我看到了我的 phpinfo 文件，它没有设置 tmp 值，所以我将它设置为 /tmp

```
upload_tmp_dir = "/tmp" 
```

但它仍然无法正常工作。我的服务器在 Amazon ec2 中。

我尝试将 upload_tmp_dir 设置为“/var/www”（没有尾部斜杠），但这也不起作用。我需要设置对 tmp 目录的权限吗？

```
print_r($_FILES); 
```

正在给

```
enter code here
Array ( [upload_file] => Array ( [name] => ps.jpg [type] => image/jpeg [tmp_name] => /tmp/phpBcpdfP [error] => 0 [size] => 193728 ) ) 
```

和

```
 is_uploaded_file($_FILES['upload_file']['tmp_name']) 
```

给出结果 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:44:57.870

这可能是目标文件夹的权限问题。

做`sudo chmod -R 777 /destination/folder`，然后再试一次。然后它应该工作。如果您仍然无法上传文件，则权限问题可能出在父目录上。

之后，找到哪个用户（及其组）是您上传文件的所有者。

然后重新设置权限，并更改目录的所有者：`sudo chown -R owner_user.group /destination/folder`。

# r - 在 R 中使用 tryCatch

> ID：15158818
> 
> 赞同：1
> 
> 时间：2013-03-01T13:23:08.500
> 
> 标签：r, svm

使用 e1071，可以调整 SVM 模型的参数

```
svmmodels <- lapply(trainingtemp, function(data)
                    {
                      svm.tune <- tune.svm(label~., data=data,
                                           gamma=10^(-3:0), cost=10^(-3:3));
                      svm(label~., data=data,
                          method="C-classification",
                          kernel="radial", cost=svm.tune$best.parameters$cost, 
                               gamma=svm.tune$best.parameters$gamma)
                    }) 
```

但是对于某些数据，tune.svm 返回一个空模型（可能有几个原因）。在这种情况下如何使用 tryCatch，如果 tune.svm 返回以下错误消息，那么可以使用 svm 函数中的默认参数。

```
Error in predict.svm(ret, xhold, decision.values = TRUE) : 
 Model is empty!
Calls: lapply ... svm.formula -> svm.default -> na.action -> predict -> predict.svm
Execution halted 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:02:07.540

这应该有效：

```
tryCatch(
     svm.tune <- tune.svm(label~., data=data,
                            gamma=10^(-3:0), cost=10^(-3:3))
     svm(label~., data=data,
                      method="C-classification",
                      kernel="radial", cost=svm.tune$best.parameters$cost, 
                           gamma=svm.tune$best.parameters$gamma)
}, error = function(err) {
  ## here you can your svm with defualt parameter 
   svm(label~., data=data,
                      method="C-classification",
                      kernel="radial")
}) 
```

# c - 使用 avr-gcc 在 AVR XMEGA 上的时序循环中未满足内联汇编器约束

> ID：15158823
> 
> 赞同：2
> 
> 时间：2013-03-01T13:23:20.227
> 
> 标签：c, embedded, inline-assembly, avr

我在针对 AVR 的 C 中的毫秒延迟循环有问题。我`avr-gcc 4.7.0`在从 Ubuntu 存储库获得的 Linux 上使用，并且我还尝试了新编译的 4.7.2。目标硬件是 XMEGA128A1，目前时钟频率为 2 MHz。

以下函数经常（但并非总是如此——在遇到麻烦之前我曾多次调用此函数）抱怨约束：

```
../common/spin_delay.h:64:9: warning: asm operand 3 probably doesn’t match constraints [enabled by default]
../common/spin_delay.h:64:9: error: impossible constraint in ‘asm’ 
```

如果我删除因此错误停止编译的特定调用，它也会抱怨操作数 0、1 和 2。

```
#define LOOPS_PER_MS ((CPU_CLK_HZ/1000)/4)

static inline void ms_spin(unsigned short ms) {
    if (ms) {
        __asm__ __volatile__ (
            "   ldi r24, %1     \n"
            "   ldi r25, %0     \n"
            "1: ldi r26, %3     \n"
            "    ldi r27, %2    \n"
            "2: sbiw r26, 1     \n"
            "    brne 2b        \n"
            "    sbiw r24, 1    \n"
            "    brne 1b        \n"
            : 
            : "M" (ms >> 8), 
              "M" (ms & 0xff),
              "M" (LOOPS_PER_MS >> 8), 
              "M" (LOOPS_PER_MS & 0xff)
            : "r24", "r25", "r26", "r27"
        );
    }
} 
```

然而，相同的代码在 Windows 上使用 WinAVR 编译得很好`avr-gcc 4.3.3`，这让我认为这是从那时起内联汇编器的一些变化。

在我看来，这一切看起来都是正确的，因为 16 位 short 被分解为高字节和低字节并受“M”（8 位常量）约束，而它工作了几次这一事实排除了与硬定义的`CPU_CLK_HZ`派生常量。问题操作数是 0-3 中的任何一个这一事实意味着它不是失败的特定 asm 操作数。

我也尝试使用[这里](http://www.avrfreaks.net/index.php?name=PNphpBB2&file=printview&t=124432&start=0)`n`推荐的约束，但错误仍然存​​在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:47:34.447

* * *

编辑：

最近的 gcc 版本支持内置的循环精确延迟：

[`void __builtin_avr_delay_cycles (unsigned long ticks)`](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/AVR-Built_002din-Functions.html)

（但请注意：“ticks 必须是编译时间整数常量；不支持具有可变周期数的延迟。”）

* * *

我认为问题在于您将`ms`变量声明为汇编程序的*常量*输入。我相信，这甚至不应该首先编译。

如果并且当它编译时，可能只是因为编译器优化使 gcc “识别”，声明为变量 ( `ms`) 的内容实际上是常量并且在编译时是已知的。然而，不能依赖这些优化总是以相同的方式发生。

因此，我的建议是*不要*使用`"M"`约束 for `ms`，因为它在这里基本上是不合适的。

通过使用“正确”约束，您可能会获得更健壮和正确的代码，甚至可能更高性能，如下所示：

```
#define LOOPS_PER_MS (((CPU_CLK_HZ/1000)-(1+1+2+2))/(2+2)) // accounting for the overhead of 6 (1+1+2+2) cycles per ms and the 4 (2+2) cycles per inner loop iteration

static inline void ms_spin(unsigned short ms) {
    if (ms) {
        unsigned short dummy;
        __asm__ __volatile__ (
            "ms_spin_outer_loop_%=:                \n"

            "    ldi %A[loopcnt], lo8(%[loops])    \n"
            "    ldi %B[loopcnt], hi8(%[loops])    \n"

            "ms_spin_inner_loop_%=:                \n"

            "    sbiw %A[loopcnt], 1               \n"
            "    brne ms_spin_inner_loop_%=        \n"

            "    sbiw %A[ms], 1                    \n"
            "    brne ms_spin_outer_loop_%=        \n"

            :  [ms] "+w" (ms),
               [loopcnt] "=&w" (dummy)
            :  [loops] "i" (LOOPS_PER_MS)
            :  // none.
        );
    }
} 
```

使用“正确”约束也会将要使用的特定寄存器集的选择留给 gcc，这可能会导致对内联汇编程序语句进行更好的优化。

为了使事情更加可预测，您可能需要考虑强制 gcc*始终*`__attribute__((always_inline))`通过装饰内联函数。

有关 avr-gcc 中的内联汇编器约束的更多详细信息，请参见例如[avr-libc 文档](http://www.nongnu.org/avr-libc/user-manual/inline_asm.html#io_ops)。此列表并不详尽，因此查看一般[gcc 文档](http://gcc.gnu.org/onlinedocs/gcc/Constraints.html)可能会不时提供帮助。

# android - 如何从android中的表中删除一行？

> ID：15158826
> 
> 赞同：0
> 
> 时间：2013-03-01T13:23:24.393
> 
> 标签：android, database

这是 Handler 类中使用的删除方法 m：

```
 public void deleteRow(long rowId){
    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(TABLE_CONTACTS, KEY_ID + "=" + rowId, null);
  } 
```

1.  我想从列表视图中删除选定的行。这是我的 ListView 代码，它在 logcat 中没有显示任何错误，但没有删除该行。！可能是什么问题？：

    ```
    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                final int position, long id) {
            TextView textView = (TextView) view
                    .findViewById(android.R.id.text1);
            String s = textView.getText().toString();

            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                    context);
            alertDialogBuilder.setTitle("Delete?");
            alertDialogBuilder
                    .setMessage("Click yes to delete")
                    .setCancelable(false)

                    .setNegativeButton("No",
                            new DialogInterface.OnClickListener() {

                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    // TODO Auto-generated method stub
                                    dialog.cancel();// close the dialog and
                                                    // do nothing..
                                }
                            })
                    .setPositiveButton("Yes",
                            new DialogInterface.OnClickListener() {

                                public void onClick(DialogInterface dialog,
                                        int which) {

                                    // TODO Auto-generated method stub

                                    db = new SQLiteHandler(context);
                                    db.open();
                                    db.deleteRow(position);
                                    db.close();

                                }
                            });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();
        }
    }); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:29:08.333

```
 Try this:

    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(TABLE_CONTACTS, KEY_ID + "= ?"  , new String[] { ""+rowId }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:30:16.483

```
db.delete(TABLE_CONTACTS, KEY_ID + "=?", new String[] {String.valueOf(rowId)}); 
```

# angularjs - AngularJS 监视服务值变化而不是作用域继承

> ID：15158827
> 
> 赞同：3
> 
> 时间：2013-03-01T13:23:24.033
> 
> 标签：angularjs

我只是尝试一下AngularJS。我尝试做一些非常简单的事情，但我想以好的方式去做。

我在表格中得到了一个项目列表，其中显示了每个项目的名称和数量。我在桌子下面有一张表格。

当我单击表格中的项目名称时，我希望给定的项目可以通过表单进行更新。

[我实现了在小提琴http://jsfiddle.net/5cRte/1/](http://jsfiddle.net/5cRte/1/)中使用范围继承做事

看法 ：

```
<tr ng-repeat="item in items">
  <td><a href="#" ng-click="selectCurrentItem(item)">{{item.name}}</a></td>
  <td>{{item.quantity}}</td>
</tr> 
```

控制器：

```
function ItemListController($scope){
    $scope.items = [{name:'item1', quantity:10}, {name:'item2', quantity:5}];

    $scope.selectCurrentItem = function(currentItem) {
        $scope.currentItem = currentItem;
    }
}

function ItemFormController($scope){
    $scope.$watch('currentItem', function() {
        $scope.item = $scope.currentItem; 
    });
} 
```

但是我是否阅读过一些主题，以这种方式耦合控制器范围并不是一个好习惯，而且我最好不要使用服务来存储控制器之间共享的变量。

我能够将静态变量放在服务中并在另一个控制器中检索它，但是在单击表中的项目时我无法更新它，因为手表无法处理服务变量。你有提示吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:56:45.417

我不知道这是否是最佳的，但这是我能想出的

```
angular.module('myApp', []);

angular.module('myApp').factory('myService', function(){
    var items = [{name:'item1', quantity:10}, {name:'item2', quantity:5}, {name:'item3', quantity:50}];
    var current = {};
    return {
        getItems: function(){
            return items;
        },

        setCurrentItem: function(item){
            current.item = item;
        },

        removeCurrentItem: function(){
            delete current.item;
        },

        getCurrent: function(){
            return current;
        }
    }
});

function ItemListController($scope, myService){
    $scope.items = myService.getItems();

    $scope.selectCurrentItem = function(currentItem) {
        myService.setCurrentItem(currentItem);
    }
}

function ItemFormController($scope, myService){
    $scope.current = myService.getCurrent();
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/5cRte/3/)

# javascript - 多个标记，针对地址 API V3 的 InfoWindow

> ID：15158831
> 
> 赞同：-2
> 
> 时间：2013-03-01T13:23:30.837
> 
> 标签：javascript, google-maps, google-maps-api-3

**目标：**我想针对地址显示多个标记和信息窗口。

搜索让我找到了这段代码，显示了针对 Lang 和 Lat 的 Multiple Markers 和 InfoWindow，但在我的情况下，我将拥有地址数组... google 提供的将地址转换为 lat 、 lang 的功能

```
 var markers = [
                      { lat: -33.85, lng: 151.05, name: "marker 1" },
                      { lat: -33.90, lng: 151.10, name: "marker 2" },
                      { lat: -33.95, lng: 151.15, name: "marker 3" },
                      { lat: -33.85, lng: 151.15, name: "marker 4" }
                    ];
               //this puts lat and lng.. but i have array of Address's
               // Create the markers
                for (index in markers) addMarker(markers[index]);
                function addMarker(data) {
                    var marker = new google.maps.Marker({
                        position: new google.maps.LatLng(data.lat, data.lng),
                        map: map,
                        icon: '/images/shorticon_13.png',
                        title: data.name

                    });
                    google.maps.event.addListener(marker, "click", function () {
                        openInfoWindow(marker);
                    });
                } 
```

我是谷歌地图 API v3 的新手...在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:55:24.627

[地理编码](https://developers.google.com/maps/documentation/javascript/geocoding)是将地址（如“1600 Amphitheatre Parkway, Mountain View, CA”）转换为地理坐标（如纬度 37.423021 和经度 -122.083739）的过程，您可以使用它来放置标记或定位地图。

如果您有超过 10 个地址，您将遇到速率限制/配额。对于已知地址，最好离线对其进行地理编码并使用坐标在页面加载时显示它们（如您的示例）。

# php - 如何将此元素保留在此数组中？

> ID：15158833
> 
> 赞同：0
> 
> 时间：2013-03-01T13:23:33.247
> 
> 标签：php, arrays, multidimensional-array

我有以下数组。

```
array(
[PM-AAA] => Array
    (
        [codePm] => PM-32249
        [codeArt] => Array
            (
                [0] => 32249
            )

        [codeArtInFlux] => Array
            (
                [0] => 123456
            )

    )

[PM-BBB] => Array
    (
        [codePm] => PM-32249
        [codeArt] => Array
            (
                [0] => 33270 
            )

        [codeArtInFlux] => Array
            (
                [0] => 484946
            )

    )

[PM-CCC] => Array
    (
        [codePm] => PM-82242
        [codeArt] => Array
            (
                [0] => 82242
                [1] => 82245
                [2] => 82246
            )

        [codeArtInFlux] => Array
            (
                [0] => 5191
                [1] => 51949
                [2] => 26486
            )

    )
) 
```

我想保留“codePm”值唯一的数组。例如，在上面的数组中，“PM-CCC”数组将被保留，因为“codePm”是唯一的，与“PM-AAA”和“PM-BBB”相反，它们共享相同的“codePm”' s 值。

有可能用一个功能来做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:35:27.793

据我所知，没有任何功能可以直接执行此操作，您可以试试这个：

```
function insert_unique_key($key_name,$elem,&$array) {
    //Get all elements with the key
    $values=array()
    foreach ($array as $ii) {
        $values[]=$ii[$key_name];
    }

    //Check if the value exists
    if (in_array($elem[$key_name], $values)===FALSE) {
        $array[]=$elem;
    }   
} 
```

在您的代码中：

```
insert_unique_key('codePm',$elem_to_insert,$array_of_elements); 
```

而且您必须将数组的每个元素都放入一个新数组中

--

**编辑**：对不起，这是为了在数组中插入新的唯一值，而不是获取唯一值。

查看评论，我认为您只需要**唯一**值试试这个功能：

```
function get_uniques_by_subkey($key_name,$array) {
    //Get all elements with the key
    $values=array();
    foreach ($array as $ii) {
        $values[]=$ii[$key_name];
    }

    //Get the elements that only appeared one time
    $count=array_count_values($values);
    unset($values);$values=array();
    foreach ($count as $key => $n) {
        if ($n==1)
            $values[]=$key;
    }

    //Get the values
    $out=array();
    foreach ($array as $key => $value) {
        if (in_array($value[$key_name],$values))
            $out[$key]=$value;
    }

    return $out;
} 
```

你可以在这里查看结果：http: [//codepad.org/QmuoYxsk](http://codepad.org/QmuoYxsk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:36:06.117

像这样的东西？

```
 <?

    function removeDuplicatesByKey($a, $k) {
    $r = array();
    $tmp = array();
    foreach ($a as $ind => $arr) {
        $elem_found = array_search($arr[$k], $tmp);

        if ($elem_found === false) {
            $tmp[] = $arr[$k];
            $r[$ind] = $arr;
        } else {
            // ok, element found, need to remove both .. 
            foreach ($r as $index => $r_arr) {
                if ($r_arr[$k] ==  $arr[$k]) {
                    unset($r[$index]);
                }
            }
        }
     }

    return $r;
}
$full_arr = array(
'PM-AAA' => array
    (
        'codePm' => 'PM-32249',
        'codeArt' => array(
                '0' => 32249
            ),
        'codeArtInFlux' => array(
                '0' => 123456
            )
 )
,
'PM-BBB' => array
    (
        'codePm' => 'PM-32249',
        'codeArt' => array
            (
                '0' => 33270 
            ),

        'codeArtInFlux' => array
            (
                '0' => 484946
            )

    )
,
'PM-CCC' => array
    (
        'codePm' => 'PM-82242',
        'codeArt' => array
            (
                '0' => 82242,
                '1' => 82245,
                '2' => 82246
            ),

        'codeArtInFlux' => array
            (
                '0' => 5191,
                '1' => 51949,
                '2' => 26486
            )

    )
);

print_r(removeDuplicatesByKey($full_arr, 'codePm'));

?> 
```

**输出**

```
Array
(
    [1] => Array
        (
            [codePm] => PM-82242
            [codeArt] => Array
                (
                    [0] => 82242
                    [1] => 82245
                    [2] => 82246
                )

            [codeArtInFlux] => Array
                (
                    [0] => 5191
                    [1] => 51949
                    [2] => 26486
                )

        )

) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:20:44.057

I made this....on speed mode in my work....you can improve it ;)

```
 $array = array( 

        'PM-AAA' => array(
        'codePm' => 'PM-32249',
        'codeArt' => array(32249),
        'codeArtInFlux' => array(123456)

    ),

        'PM-BBB' => array(
        'codePm' => 'PM-32249',
        'codeArt' => array(33270 ),
        'codeArtInFlux' => array(484946)
         ),

        'PM-CCC' => array(
        'codePm' => 'PM-82242',
        'codeArt' => array(82242,82245,82246),
        'codeArtInFlux' => array(5191,51949,26486)

    )
);

$code_count = array(); 
$arr2 = array();
foreach($array as $counter) {  

        $key = $counter['codePm']; 
        $code_count[] = $key;

}
$arr2 = (array_count_values($code_count));
print_r($arr2); //now i know how many times my code is repeated

while ($code_name = current($arr2)) {
    if ($code_name == 1) {
        $unique_code = key($arr2);
    }
    next($arr2);
}

echo $unique_code."</br>"; //i have my unique code

foreach ($array as $key) {
  var_dump($key);
  if($key['codePm']==$unique_code)
  $arr_aux = $key;  
}

echo "I have mi array ready with the unique val ;) </br>";

var_dump($arr_aux); 
```

Saludos ;)

# jquery - 如何通过 mvc 制作通知和在线直播

> ID：15158842
> 
> 赞同：3
> 
> 时间：2013-03-01T13:24:01.703
> 
> 标签：jquery, asp.net-mvc

如何通过 mvc 进行通知和在线直播？我正在使用 jquery 的 $.ajax() 。例子：

```
window.setInterval(function () {
   $.ajax({
       url: "",
       type: "GET",
       data: {},
       success: function (data) {

       }
   })
},1000); 
```

你是否通过 $ 向服务器发送请求的过程。Timer频繁使用的Ajax对服务器或数据库有影响吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:29:22.040

我认为使用[SignalR](http://signalr.net/)更好。

> ASP.NET SignalR 是一个面向 ASP.NET 开发人员的新库，它可以非常简单地将实时 Web 功能添加到您的应用程序中。什么是“实时网络”功能？它是让您的服务器端代码实时将内容推送到连接的客户端的能力。
> 
> 您可能听说过 WebSockets，这是一种新的 HTML5 API，可以在浏览器和服务器之间实现双向通信。SignalR 将在 WebSockets 可用时在后台使用它，并在它不可用时优雅地回退到其他技术和技术，而您的应用程序代码保持不变。
> 
> SignalR 还提供了一个非常简单的高级 API，用于在 ASP.NET 应用程序中执行服务器到客户端 RPC（从服务器端 .NET 代码调用客户端浏览器中的 JavaScript 函数），以及为连接管理添加有用的钩子，例如连接/断开事件、分组连接、授权。

# ms-access - 如何选择多条记录并一次更改它们的值

> ID：15158843
> 
> 赞同：0
> 
> 时间：2013-03-01T13:24:02.730
> 
> 标签：ms-access, ms-access-2010

这是我的问题，我不知道从哪里以及如何开始搜索。

在 MS Access 数据库中，用户将拥有从查询返回的记录列表。假设是活跃（受雇）的员工。该表有一个相关表，比如说部门（通过两个表中的部门 ID 相关）。

我想要做的是制作表格（或其他可以做同样工作的东西），用户将在其中选择一些记录（可能带有与每条记录关联的复选框），并且会有一个带有部门名称的组合框。当用户选择部门名称时，其部门ID 应保存到这些记录的部门ID 字段中。

我创建了一个查询在职员工的表单（包含多个项目的表单）。并在带有复选框的详细信息部分中放置一个额外的字段。在表单页脚中，我有一个包含部门名称和 ID（未向用户显示）的组合框，以及一个用于保存值的按钮。

我现在必须弄清楚，如何使用选中的复选框选择所有行/记录并更新它们。顺便说一下，我熟悉 VB 和 SQL。

我将不胜感激有关如何解决此问题的任何想法/知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:02:27.200

如果您不将“详细信息”部分中的额外字段与显示的表格中的数据字段链接，那么它对您没有帮助。如果你能做到这一点，那么你只需创建一个 VBA 函数来更新所有选定的行，并刷新记录集。

如果您无法修改您的表，您将不得不创建一个仅包含主表的键列的新表，并通过 VBA 对其进行管理。如果可以的话，最好使用第一个选项，它会污染您的架构，但在大多数情况下，这对于 Access 数据库来说不是问题。

# ruby - 通过命令行传递多条数据以使用 ARGV 单独评估

> ID：15158849
> 
> 赞同：0
> 
> 时间：2013-03-01T13:24:13.910
> 
> 标签：ruby

我有一个相当简单的脚本，我需要能够接收从命令行或文件传入的数据，然后取决于第一个命令（如果数据来自命令行，则为 ARGV[0]）在我的脚本中实例化唯一类的新实例或更改该类的现有实例的属性，然后输出我完成对输入数据的迭代后发生的情况的摘要。

我想我知道当它是一个文件时我在做什么，但是当数据通过命令行传递时我有点坚持如何做到这一点。

我知道只有一个数据我会做：

```
ruby filename.rb command1 command2 command3 
```

在我的脚本中，我会有类似的东西

```
instance = ClassName.new(ARGV[0], ARGV[1], ARGV[2]) 
```

..但是在这种情况下，我希望能够对这三个命令中的几组执行此操作。所以像：

```
ruby filename.rb command1 command2 command3
ruby filename.rb anothercommand1 anothercommand2 anothercommand3 
```

..并重复直到所有数据都在，然后调用summary方法。任何有关如何实现这一点的建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:55:38.510

如果我正确理解您想要做什么：

```
ARGV.each_slice(3) { |a1, a2, a3|
  # NB: a2 and/or a3 may be nil here if ARGV.size % 3 ≠ 0
  puts "#{a1}×#{a2}×#{a3}"
}
puts "Init NOW" 
```

产量：

```
~ ruby a.rb arg1 arg2 arg3 arg4 arg5 arg6 arg7
# arg1×arg2×arg3
# arg4×arg5×arg6
# arg7××
# Init NOW 
```

**UPD** 澄清任务后：

```
class Operator
  attr_accessor :a1, :a2, :a3, :a4 
  def initialize attrs
    @a1, @a2, @a3, @a4 = attrs
  end 
  def begin
    puts "[BEGIN] ⇒ 1: #{@a1}, 2: #{@a2}, 3: #{@a3}"
  end 
  def add 
    puts "[ADD]   ⇒ 1: #{@a1}, 2: #{@a2}, 3: #{@a3}, 4: #{@a4}"
  end 
  def subtract
    puts "[SUBTR] ⇒ 1: #{@a1}, 2: #{@a2}, 3: #{@a3}, 4: #{@a4}"
  end 
end

meth, *args = ARGV

Operator.new(args).send (meth.to_sym) 
```

这使：

```
~ ruby a.rb add arg1 arg2 arg3 arg4
# [ADD]   ⇒ 1: arg1, 2: arg2, 3: arg3, 4: arg4
~ ruby a.rb begin arg1 arg2 arg3
# [BEGIN] ⇒ 1: arg1, 2: arg2, 3: arg3 
```

# html - IE9 中的文本渲染非常糟糕

> ID：15158850
> 
> 赞同：1
> 
> 时间：2013-03-01T13:24:16.417
> 
> 标签：html, internet-explorer, text, internet-explorer-9, typekit

见附上的截图... 这个文本渲染在 IE9 上非常不清楚。您可能希望放大到全尺寸。

![IE9文本渲染](../Images/3d06c1578fa4029acae35bf4ecb19046.png)

字体来自 Typekit，根据客户的要求（和视觉需求），需要在其下方放置阴影。这是通过 CSS3 完成的。这是一个已知问题，还是有任何解决方法？

这与 ClearType 等有关吗？如果是这样，需要更改哪些设置来解决此问题？

谢谢你的建议！文本上的 CSS 如下所示：

```
font-family: "proxima-nova", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-weight: 700;
color: rgba(255, 255, 255, 0.5);
text-shadow: 0px 5px 10px #000;
display: inline;
margin-right: 30px;
font-size: 30px;
cursor: pointer; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:39:17.707

我不是 100% 确定你的问题是什么，但我知道`text-shadow`默认 IE9 不支持。使用您在 IE9 中的示例代码，[此小提琴](http://jsfiddle.net/YpEvP/)中的文本将完全显示为白色。除非您使用一些 shiv 开始`text-shadow`工作，否则您可以使用 DirectX 过滤器 -`DXImageTransform.Microsoft.Shadow`在 IE9 中应用阴影：

```
filter: progid:DXImageTransform.Microsoft.Shadow(color=#000000,direction=45); 
```

但是请注意，这不会像`text-shadow`您当前应用的那样暗。

如果此问题与 IE9 中未显示的字体有关（对我来说它看起来像 Arial），那么请参阅[@font-face 在 IE8 中有效，但在 IE9 中无效](https://stackoverflow.com/questions/4607560/font-face-works-in-ie8-but-not-ie9)

# json - 使用 JSON.parse 解析 Json

> ID：15158855
> 
> 赞同：0
> 
> 时间：2013-03-01T13:24:27.083
> 
> 标签：json

我想解析以下 json 字符串。我正在尝试使用 JSON.parse(jsonstring) 但它反复给出以下错误。

SyntaxError: Unexpected token 。

我的 Json 字符串是：

```
"SolutionData":"
Ch3LU3Ex1/Ch3LU3Ex1/Program.cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{/*
     Write a program by using Regular Expression to check that the name of the user contains only alphabets. 

    If not, display the message "Invalid User Name".
*/
    class Program
    {
        static void Main(string[] args)
        {
        }
    }
}

"

and 

"SolutionData":"
Ch3LU3Ex1/Ch3LU3Ex1/Properties/AssemblyInfo.cs
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

// General Information about an assembly is controlled through the following 
// set of attributes. Change these attribute values to modify the information
// associated with an assembly.
[assembly: AssemblyTitle("ConsoleApplication1")]
[assembly: AssemblyDescription("")]
[assembly: AssemblyConfiguration("")]
[assembly: AssemblyCompany("")]
[assembly: AssemblyProduct("ConsoleApplication1")]
[assembly: AssemblyCopyright("Copyright ©  2012")]
[assembly: AssemblyTrademark("")]
[assembly: AssemblyCulture("")]

// Setting ComVisible to false makes the types in this assembly not visible 
// to COM components.  If you need to access a type in this assembly from 
// COM, set the ComVisible attribute to true on that type.
[assembly: ComVisible(false)]

// The following GUID is for the ID of the typelib if this project is exposed to COM
[assembly: Guid("bc2356b7-7c1e-467a-8bd7-8c6909e80623")]

// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version 
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Build and Revision Numbers 
// by using the '*' as shown below:
// [assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")]

" 
```

请帮我怎么做。我正在努力，但没有运气。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:29:48.430

您可以使用以下站点来验证您的 json：http: [//jsonlint.com/](http://jsonlint.com/)

因为您有一个属性列表，所以您需要用 { 开头和 } 结尾来包装您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:30:49.760

新行不是 JSON 字符串中的有效字符。我建议您使用[在线验证器](http://jsonformatter.curiousconcept.com/)来获取正确的 JSON - 在它们无效之前，您将无法解析它们。

json 中的新行是用`\n`. 见[这里](https://stackoverflow.com/a/42073/1108032)。

# javascript - 如何在不刷新的情况下定期检查页面状态？

> ID：15158856
> 
> 赞同：0
> 
> 时间：2013-03-01T13:24:28.183
> 
> 标签：javascript, timer, greasemonkey

我对（javascript）编程很陌生，我正在尝试实现自动化。

有一个包含倒数计时器的页面，如果满足条件，我希望我的greasemonkey 脚本自动执行一些操作。

我现在有这个：

```
var timer = document.getElementById('timer_4975');

if (timer.innerHTML < "00:00:20"){
//Some actions
} 
```

但这只会在脚本加载时检查一次条件，当计时器低于 00:00:20 时，它不会检测到条件满足并且不会采取行动。

有人可以指导我正确的方向吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:27:27.457

您将不得不使用[setInterval()](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)多次执行您的代码：

```
setInterval(function() {
    if(timer.innerHTML < "00:00:20") {
        //Some actions
    }
}, 5000); //Execute this function each 5 seconds. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:28:08.260

您可以使用[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)或[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)函数来执行此任务。

`setInterval`会定期执行一项任务，这可能更适合您想要实现的目标。

就像是：

```
var timer = document.getElementById('timer_4975');

var intervalHandle = setInterval(function() {
  if (timer.innerHTML < "00:00:20"){
  //Some actions
  clearInterval(intervalHandle);
  }
},1000); 
```

会每秒检查一次（1000 毫秒）。更改该`1000`值以增加或减少检查频率...每秒一次可能就足够了。

# java - 货币格式问题

> ID：15158859
> 
> 赞同：1
> 
> 时间：2013-03-01T13:24:32.723
> 
> 标签：java, currency

我正在尝试将输入字符串转换为欧元/保加利亚货币，我有两种情况。

首先，当输入为 10,000 时，保加利亚语格式应为 10,000，欧元格式应为 10.000

其次，如果输入是 10.23，那么欧洲和保加利亚格式都应该是 10,23。我正在尝试使用 Big Decimal，例如，

```
String s = "+000000055511.00";
         BigDecimal b = new BigDecimal(s.replace(",", "."));
         b.setScale(2, RoundingMode.HALF_UP);
         System.out.println(b.toPlainString()); 
```

但是我无法将其作为一种通用实用程序来转换为欧元或保加利亚货币。是否有相同的实用程序？有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:45:00.717

您可以`java.text.NumberFormat.getCurrencyInstance(Locale)`与适当的当地人一起使用。如果没有符合您要求的本地人，则`java.text.DecimalFormat`使用模式`##' '##0.00`resp 构建您自己的十进制格式化程序。 `##,##0.00`加上适当的货币符号。格式化程序可应用于`BigDecimal`：

```
String s = "+000000027511.00";
BigDecimal B = new BigDecimal(s);
// don't replace "." by ",": english number format expected here
b.setScale(2, RoundingMode.HALF_UP);

NumberFormat f = new DecimalFormat(...); //initialize as requested see docs
System.out.println(f.format(b)); 
```

另一个问题是，如果你的数字是 10,000，为什么你不想要小数位？如果确实是这种情况，您必须再定义两个格式化程序，并且必须根据您的条件选择它们。

希望这可以帮助。

# c++ - 时间与 gettimeofday c ++

> ID：15158863
> 
> 赞同：5
> 
> 时间：2013-03-01T13:24:45.353
> 
> 标签：c++, time, gettimeofday

time 命令返回执行命令所经过的时间。

如果我在命令调用的开头（使用 system() ）放置一个“gettimeofday()”，在调用结束时放置一个，并有所不同，结果就不一样了。（这也不是很小的差异）

任何人都可以解释这两种用法之间的确切区别是什么，以及哪种方法是计时执行呼叫的最佳方式？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T13:30:01.267

Unix`time`命令测量整个程序的执行时间，包括系统加载二进制文件及其所有库所需的时间，以及程序完成后清理所有内容所需的时间。

另一方面，`gettimeofday`只能在程序内部工作，即在它完成加载之后（用于初始测量），并且在它被清理之前（用于最终测量）。

哪个最好？取决于您要测量的内容... ;)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T13:30:08.717

`time()`返回自纪元以来的时间（以**秒**为单位）。

`gettimeofday():`返回：

```
struct timeval {
       time_t      tv_sec;     /* seconds */
       suseconds_t tv_usec;    /* microseconds */
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-01T13:29:17.077

这完全取决于您的时间安排。如果您想在*几秒钟内*计时，那么`time()`可能是您最好的选择。如果您需要比这更高的分辨率，那么我会考虑`gettimeofday()`，它放弃了*微秒*分辨率（1 / 1000000 秒）。

如果您需要比这更高的分辨率，请考虑使用`clock()`and `CLOCKS_PER_SECOND`，请注意，这`clock()`很少能准确描述所花费的时间，而是使用的 CPU 周期数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T13:29:22.607

每个时间函数都有不同的精度。在 C++11 中，您将使用 std::chrono：

```
using namespace std::chrono;

auto start = high_resolution_clock::now();
/* do stuff*/
auto end = high_resolution_clock::now();

float elapsedSeconds = duration_cast<duration<float>>(end-start).count(); 
```

# php - 将用户输入的日期与数据库中存储的日期字段进行比较

> ID：15158867
> 
> 赞同：0
> 
> 时间：2013-03-01T13:24:52.693
> 
> 标签：php, mysql

我正在创建一个网站，用户可以在其中创建特定场地的娱乐节目。我需要检查用户输入的开始时间和结束时间是否有任何节目固定在该特定场地上。

我在名为 'endtime' 的数据库中有 2 个列名，`starttime`其中包含`yyyy-mm-dd hh:mm:ss`. 我想我需要将存储在数据库中两个字段中的值转换为时间戳。但是如何编写查询。

例如：

```
SELECT *
FROM table_name
WHERE
  timestamp(starttime)>='user entered value'
  AND timestamp(endtime)<='user entered value ' 
```

这个查询可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:33:42.043

如果“用户输入的值”是 unix 时间戳，您可以使用[UNIX_TIMESTAMP](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp) (field) 函数将该字段转换为时间戳。如果不是，您必须先使用[strtotime](http://php.net/strtotime)或类似函数将其转换为时间戳。或者您可以采用另一种方式，通过使用[STR_TO_DATE](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date) (date, format) MySQL 函数将字符串转换为日期时间，在查询中使用日期时间值。

例如，如果用户以`YYYY-mm-dd hh:mm`格式输入日期，请​​使用以下查询：

> SELECT * FROM table_name WHERE starttime >= STR_TO_DATE('2012-02-01 12:00', '%Y-%m-%d %H:%i') AND endtime <= STR_TO_DATE('2013-01-01 00 :00', '%Y-%m-%d %H:%i')

我个人喜欢在查询中使用 UNIX 时间戳，但这只是我的怪癖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:35:15.053

为什么不使用unix时间？它使处理日期变得更加简单。

```
$current_time=time(); 
```

这将创建一个整数。

您的查询：

```
SELECT * FROM table 
WHERE starttime
BETWEEN starttime AND endtime 
```

# couchdb - CouchDB“虚拟”数据库，将 2 个数据库合并为 1 个

> ID：15158869
> 
> 赞同：0
> 
> 时间：2013-03-01T13:25:07.763
> 
> 标签：couchdb

CouchDB 中是否有将 2 个（或更多）数据库视为 1 个的功能。

例如，当在这个“虚拟”数据库中查询所有文档时，它会显示来自两个“真实”数据库的所有文档。

对于不同数据库中存在具有相同_id的文档的情况，可以进行2种逻辑解析：

*   从第一个数据库中获取（指定数据库顺序）
*   获取具有更大修订号的文件

两种分辨率都可以。我只需要它是可预测的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:00:51.483

没有这样的功能，所以你必须自己编码。

# c# - 为什么 SQL 查询中没有 WHERE 子句？

> ID：15158871
> 
> 赞同：2
> 
> 时间：2013-03-01T13:25:18.560
> 
> 标签：c#, sql, nhibernate, fluent-nhibernate, fluent

我有一个奇怪的问题。我注意到下面定义的代码：

```
var query= unitOfWork.Session.CreateCriteria(typeof (SomeEntity)).Future<SomeEntity>().AsQueryable();
var queryWithWhere= query.Where(x => x.SomeProperty.ToLower().Contains("Xxx".ToLower()));
var result= queryWithWhere.ToList(); 
```

给出正确的结果，但我在 NHibernateProfiler 中观看的 SQL 查询不包含 where 子句，它只是

```
SELECT ... 
FROM SomeEntity 
```

并且似乎`WHERE`我的代码中的 this 在 SQL 查询运行后被使用，就像 Linq-to-Objects 而不是 Linq-to-SQL。

当然，在执行第三行之后开始 SQL 查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:56:36.777

如果您想使用 Linq，并且 NHibernate 能够*理解它*，那么使用`CreateQuery<T>`扩展名（NHibernate 的一部分，在`NHibernate.Linq`命名空间中）直接创建一个`IQueryable<T>`，而不是使用`CreateCriteria<T>`- 正如您所注意到的那样，它只允许您编写您的 NHibernate 将作为限制处理的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:34:59.133

如果你想在第一个查询中使用 WHERE，我认为你需要添加一个限制：

```
 unitOfWork.Session.CreateCriteria<SomeEntity>()
    .Add(Restrictions.Eq("SomeProperty", "Some Value")) 
```

干杯

**编辑**

或者更适合你

```
 unitOfWork.Session.CreateCriteria<SomeEntity>()
    .Add(Restrictions.InsensitiveLike("SomeProperty", "Some Value")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:13:09.290

我会进入`QueryOver<T>`你的位置并添加`NHibernate.Criterion`你的使用。代码如下所示：

```
 using NHibernate.Criterion;
    //...
    var result = session.QueryOver<SomeEntity>()
        .Where(e => e.SomeProperty
            .IsLike("xyz", MatchMode.Anywhere)).List().ToList(); 
```

它将根据需要生成查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:08:23.947

NHibernate is materializing the results set due to the `AsQueryable()` which causes the collection to be loaded and cast as IQueryable. See [this question](https://stackoverflow.com/questions/9191094/does-asqueryable-on-icollection-really-makes-lazy-execution) for similar behavior in Entity Framework.

I would re-write your query to use NHibernate's LINQ provider:

```
var result = session.Query<SomeEntity>()
                    .Where(x => x.SomeProperty.ToLower().Contains("Xxx".ToLower))); 
```

# asp.net - ASP.NET MVC4 和 MySQL

> ID：15158875
> 
> 赞同：-2
> 
> 时间：2013-03-01T13:25:44.430
> 
> 标签：asp.net, mysql, vb.net, asp.net-mvc-4

我正在使用 asp.net mvc4 (vb) 开始一个项目，我将使用 mysql 作为数据库。我读过我也可以使用 EF，但目前我不在乎。

如何将 mvc4 asp.net 连接到 mysql？我在网络中找不到有趣的 nullad。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:30:33.047

您可以使用由 MySQL 支持的[NHibernate 。](http://nhforge.org/ "休眠")我不会说用法类似于 EF，但它们都是 ORM，而且 MVC4 被设计为可插入模型。

但是，我对您的问题投了反对票，因为您显然没有搜索过该问题是否已被回答。

# forms - nuBuilder，无法通过表单添加项目

> ID：15158878
> 
> 赞同：-1
> 
> 时间：2013-03-01T13:25:59.363
> 
> 标签：forms, add

我已经搜索并搜索了这个。我使用 nubuilder 来制作后台。当我尝试通过表单添加内容时，它只会刷新页面但不添加任何数据。

对解决方案有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:52:52.417

不是最好的解决方案，但这就是我为你做的。我的表单有另一个表的外键，我认为这是正确的解决方案，但删除外键并添加查找提供了相同的基本解决方案。

此外，我在字段名称和 nubuilder 名称之间存在一些差异。

# r - 无法标记点图中的点

> ID：15158880
> 
> 赞同：2
> 
> 时间：2013-03-01T13:26:05.177
> 
> 标签：r, lattice

我有一些多元数据。

我想为这个数据画一个点图，所以我写了下面的代码：

```
a.data <- read.table("C:/Users/OGR001/Documents/veri2.csv", sep=",", header=TRUE)
library(lattice)
library(latticeExtra)

useOuterStrips(dotplot(reliability ~ factor(madde.sayisi) |  
                                    as.factor(orneklem)*as.factor(yontem),
                       groups=as.factor(formul),  
                       data=a.data, as.table=TRUE, 
                       horizontal=FALSE, 
                       jitter.x=TRUE)) 
```

点图没问题，但我想在这里命名这些点。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:53:52.957

没有可重现的例子，真的很难帮你！我回答只是因为格子图的自定义面板有点挑战。基本上你需要添加这一行：

```
 panel=function(x,y,...){
                 panel.dotplot(x,y,...)
                 labs <- dat[list(...)$subscripts,]$labs ## labs is your factor column!
                 panel.text(x,y,labs,adj=c(1.2,0.5))
               })) 
```

例如，这里使用`barley`来自 lattice 包。

```
dat <- barley
dat$labs <- sample(c('SB','R','F'),nrow(dat),rep=T)

useOuterStrips(dotplot(variety ~ yield | site*year, 
                       data = dat,
                       groups = year,
                       horizontal=TRUE, 
                       jitter.x=TRUE,  ylab=NULL,
               panel=function(x,y,...){
                 panel.dotplot(x,y,...)
                 labs <- dat[list(...)$subscripts,]$labs
                 panel.text(x,y,labs,adj=c(1.2,0.5))
               })) 
```

![在此处输入图像描述](../Images/00614496b91f0ec21a548f960744a410.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:19:17.930

car 包允许在散点图中轻松标记点。我们可以使用 iris 数据集进行说明。

```
library(car)
scatterplot(Sepal.Length ~ Sepal.Width, data=iris,labels=iris$Species,id.method=T) 
```

![在此处输入图像描述](../Images/b613762ffcb13960afde2b7a5dc61749.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:51:43.020

编辑：agstudy 是正确的，您不能在格子窗口上使用基本图形。幸运的是，有一个`ltext`命令可以完成基本相同的操作，因此`ltext`请按照下面描述的方式使用基本图形' `text`.

不知道什么是最简单的，但`base::text`肯定可以做到这一点。我将假设您可以使用数据框中的因子或列来分别选择`sb`、`r`和`f`坐标集。所以：

```
text(sb_x_coords, sb_y_coords, labels='sb',...) 
```

您可以在其中修改字体大小、颜色等。对其他两个类别重复此操作。

# git - 如何将文件目录添加到已推送的一组提交中？

> ID：15158882
> 
> 赞同：3
> 
> 时间：2013-03-01T13:26:10.227
> 
> 标签：git

我们有一个问题，几周前我们忘记将依赖于构建的文件的目录添加到版本控制中，现在我们想要添加它们，以便我们在检查旧版本时可以构建。

我知道我们可以用它`git rebase -i`来编辑一系列提交，但是这不应该对已经推送的历史进行，因为这会给团队的其他成员带来合并问题。

我也知道 using`filter-branch`将允许我们从已经推送的旧提交中删除文件，并且强行推送这些更改不会给其他人带来问题（我已经成功地做到了）。

我的观点是，有时编辑推送的历史似乎还可以，有时又不行，所以我希望我们的问题可以解决。

**是否可以将这些文件添加到已共享的历史记录中？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:19:46.173

是的，但它会改变那段历史。任何提取了这些数据的人都必须处理它。请参阅**Recovering from Upstream Rebase部分的**[rebase 手册页](https://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)中的部分，了解需要完成的操作。在继续之前让受影响的任何人知道是个好主意，这样他们就可以提交任何更改

 **如果您对此感到满意，请检查应该丢失文件的第一个提交，创建一个分支，添加文件并修改提交。

```
git checkout <commit hash>
git branch new_branch
<add the missing files>
git add .
git commit --amend               <-- a text editor will open, just keep the message and continue 
```

此时，树将如下所示，`B`为修改前的提交和`B'`修改后的提交。 `C - D - E`是从那时起的提交。

```
- A - B - C - D - E
   \
    - B' 
```

现在重新定位`C - D - E`到`B'`“修复”历史。

```
<`B` should still be checked out>
git rebase -i E 
```

编辑器将打开列出要移动的提交，`B`可能是列表中的第一个——如果是删除它，只留下`C`,`D`和`E`文件。关闭并保存文件以开始变基。

如果文件从未在以后的提交中添加，则不应该有任何冲突——但如果有，则需要解决它们。

树现在看起来像这样

```
- A - B - C - D - E
   \
    - B' - C' - D' - E'          <-- E' will be checked out. 
```

如果提交`B - C - D - E`不再被分支引用，它们将不会出现，`git log`并将在稍后被垃圾收集器删除。这给你留下了`A - B' - C' - D' - E'`.**

# curl - 对 Google Reader 的 POST 请求（标记为已读）

> ID：15158883
> 
> 赞同：1
> 
> 时间：2013-03-01T13:26:10.070
> 
> 标签：curl, oauth-2.0, google-reader

我正在尝试使用 cURL 和 PHP 在 Google Reader 上将项目标记为已读。我正在使用 OAuth 2.0 为我的应用程序请求 Google 阅读器权限。当我尝试将项目标记为已读时，收到“400 Bad Request”HTTP 错误，我的请求如下所示：

网址：[https ://www.google.com/reader/api/0/edit-tag](https://www.google.com/reader/api/0/edit-tag)

网址参数：

```
[client] => scroll 
```

发布参数：

```
[i] => tag:google.com,2005:reader/item/b25079e56615b397
[s] => feed/http://christophertimberlake.com/rss
[async] => true
[T] => <Access token got on OAuth2 sign-in>
[a] => user/<user-id>/state/com.google/read 
```

请求标头：

```
[Host] => www.google.com
[Accept] => */*
[Authorization] => Bearer <OAuth2 access token>
[Referer] => http://www.google.com/reader/view/
[User-Agent] => Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:19.0) Gecko/20100101 Firefox/19.0
[Content-Length] => 247
[Content-Type] => application/x-www-form-urlencoded 
```

另外，我注意到来自 Google 的一个奇怪的响应标头：`X-reader-google-bad-token: true`. 此标头是否与 POST 发送的令牌相关，我必须使用 OAuth2 令牌作为 POST 参数还是需要另一个令牌？

请注意，我成功执行了只读请求，例如获取订阅、项目列表或阅读计数信息。

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:07:33.667

我解决了我的问题，使用 OAuth2 我还需要一个操作令牌来执行非只读操作。

看更多

[https://groups.google.com/forum/?fromgroups=#!topic/fougrapi/U_8eT4yyLsY](https://groups.google.com/forum/?fromgroups=#!topic/fougrapi/U_8eT4yyLsY)

# windows - 来自服务和用户安全问题的 CreateProcessAsUser

> ID：15158888
> 
> 赞同：1
> 
> 时间：2013-03-01T13:26:25.257
> 
> 标签：windows, security, delphi, service

我有一个启动我的应用程序的 Windows 服务。该服务是一个调度程序，用于执行最终用户定义的一些自定义操作。

它以 LocalSystem 帐户运行，并将启动我的应用程序（具有窗口）。

为此，我使用函数[LogongUser](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184%28v=vs.85%29.aspx)、[LoadUserProfile](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762281%28v=vs.85%29.aspx)、[CreateProcessAsUser](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429%28v=vs.85%29.aspx)。这非常有效，**但前提是要****登录**的用户是管理员组的成员。

我不能让用户成为管理员，他需要成为默认用户（用户组的成员）。

作为管理员，它可以从服务中正常运行。但是当进程以默认用户身份启动时，它会异常终止：

```
ExitCode: 0xC0000142 STATUS_DLL_INIT_FAILED
Message: {DLL Initialization Failed} Initialization of the dynamic link library %hs failed. The process is terminating abnormally. 
```

如果我使用该用户（用户组的成员）登录并手动启动应用程序，一切正常。

我还没有弄清楚导致问题的库是什么。我检查了系统事件日志，但没有日志。我已经尝试过[ImporsonateLoggedOnUser](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378612%28v=vs.85%29.aspx)但没有成功。

这是代码：

```
type 
    TProcessRec = record
        Token: Cardinal;
        ProfileInfo: TProfileInfo;
        Job: Cardinal;
        Environment: Pointer;
        ProcessInfo: TProcessInformation;
        WinStat: HWINSTA;
      end;

      TProcess = class
      private
        fProcess: TProcessRec;
      public
        constructor Create(aUser, aDomain, aPassword, aCommand, aWorkingDir: string; aUtil: TJJWServiceUtil);
        destructor Destroy; override;

        procedure Terminate(aExitCode: Cardinal);

        function getExitCode: Cardinal;
      end;

    constructor TProcess.Create(aUser, aDomain, aPassword, aCommand, aWorkingDir: string; aUtil: TJJWServiceUtil);
    type
      TCreateProcessFuncType = (cpAsUser, cpWithLogon);
    const
      DES_CREATION_TYPE: array [TCreateProcessFuncType] of string =
        ('CreateProcessAsUser', 'CreateProcessWithLogon');
    var
      sa: TSecurityAttributes;
      si: TStartupInfo;
      limits : TJobObjectExtendedLimitInformation;
      wUser, wDomain, wPassword, wCommand, wWorkingDir: WideString;
      creationType: TCreateProcessFuncType;
    begin

        // se estiver rodando com a conta LocalSystem (em serviço de windows)
        if
          IsPrivilegeEnabled(SE_TCB_NAME) or IsPrivilegeEnabled(SE_INCREASE_QUOTA_NAME)
        then
          creationType := cpAsUser
        else
          creationType := cpWithLogon;

      aUtil.debug('ENV: ' + AnsiReplaceStr(GetEnvironmentVariable('PATH'), '%', '%%'));
      aUtil.debug('Criando novo processo em modo: ' + DES_CREATION_TYPE[creationType]);

      FillChar(fProcess, SizeOf(fProcess), 0);

      FillChar(sa, SizeOf(sa), 0);
      sa.nLength := SizeOf(sa);

      FillChar(si, SizeOf(si), 0);
      si.cb := SizeOf(si);

      case creationType of

        cpAsUser:
          begin
            aUtil.debug('Efetuando o login do usuário %s', [aUser]);
            // login
            if not LogonUser(PChar(aUser), PChar(aDomain), PChar(aPassword), LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, fProcess.Token) then
              RaiseLastOSError;

            try
              aUtil.debug('Carrengado o profile do usuário %s', [aUser]);

              // carrega o profile do usuário
              fProcess.ProfileInfo.dwSize := SizeOf(fProcess.ProfileInfo);
              fProcess.ProfileInfo.dwFlags := PI_NOUI;
              fProcess.ProfileInfo.lpUserName := PChar(aUser);
              if not LoadUserProfile(fProcess.Token, fProcess.ProfileInfo) then
                RaiseLastOSError;

              try
                aUtil.debug('Criando o bloco de variáveis de ambiente do usuário %s', [aUser]);
                // variaveis de ambiente
                if not CreateEnvironmentBlock(fProcess.Environment, fProcess.Token, false) then
                  RaiseLastOSError;

                aUtil.debug('Criando o JOB para associar o processo filho ao processo pai');
                // job para associar
                fProcess.Job := CreateJobObject(@sa, nil);
                if fProcess.Job = 0 then
                  RaiseLastOSError;

                try
                  // limita o job para matar o seu processo caso o processo pai termine antes
                  FillChar(Limits,SizeOf(Limits),0);
                  with Limits,BasicLimitInformation do
                    LimitFlags := JOB_OBJECT_LIMIT_KILL_ON_JOB_CLOSE or JOB_OBJECT_LIMIT_BREAKAWAY_OK;

                  if not SetInformationJobObject(fProcess.Job, JobObjectExtendedLimitInformation, @limits, SizeOf(limits)) then
                    RaiseLastOSError;

                  try
                    fProcess.WinStat := CreateWindowStation(SCHEDULER_WINSTAT, 0, 0, nil);
                    if fProcess.WinStat = 0 then
                      RaiseLastOSError;
                    si.lpDesktop := PChar(SCHEDULER_WINSTAT);

                    aUtil.debug('Criando o processo: %s', [aCommand]);

                    // processo!
                    if not CreateProcessAsUser(
                      fProcess.Token,
                      nil,
                      PChar(aCommand),
                      @sa,
                      nil,
                      false,
                      CREATE_SUSPENDED or CREATE_BREAKAWAY_FROM_JOB or NORMAL_PRIORITY_CLASS or CREATE_NEW_CONSOLE or CREATE_NEW_PROCESS_GROUP or CREATE_UNICODE_ENVIRONMENT,
                      fProcess.Environment,
                      PChar(aWorkingDir),
                      si,
                      fProcess.ProcessInfo)
                    then
                      RaiseLastOSError;

                    try
                      aUtil.debug('Associando o JOB ao processo filho');
                      // associa ao processo do plugin o JOB (gruda nele!)
                      if not AssignProcessToJobObject(fProcess.Job, fProcess.ProcessInfo.hProcess) then
                        RaiseLastOSError;

                      // VOA PROCESSO, VOA!
                      if ResumeThread(fProcess.ProcessInfo.hThread) = $FFFFFFFF then
                        RaiseLastOSError;

                      aUtil.debug('Processo disparado');
                    except
                      TerminateProcess(fProcess.ProcessInfo.hProcess, Cardinal(-1));

                      CloseHandle(fProcess.ProcessInfo.hThread);
                      CloseHandle(fProcess.ProcessInfo.hProcess);

                      FillChar(fProcess.ProcessInfo, SizeOf(fProcess.ProcessInfo), 0);

                      raise;
                    end;

                  except
                    DestroyEnvironmentBlock(fProcess.Environment);
                    fProcess.Environment := nil;
                    raise;
                  end;

                except
                  CloseHandle(fProcess.Job);
                  fProcess.Job := 0;
                  raise;
                end;

              except
                UnloadUserProfile(fProcess.Token, fProcess.ProfileInfo.hProfile);
                FillChar(fProcess.ProfileInfo, SizeOf(fProcess.ProfileInfo), 0);
                raise;
              end;

            except
              CloseHandle(fProcess.Token);
              fProcess.Token := 0;
              raise;
            end;
          end;

        //////////////////////////////////////////////////////////////////////////////

        cpWithLogon:
          begin
            wUser := aUser;
            wDomain := aDomain;
            wPassword := aPassword;
            wCommand := aCommand;
            wWorkingDir := aWorkingDir;

            aUtil.debug('Disparando o processo: %s', [aCommand]);

            // o CreateProcessWithLogon já cria um JOB para evitar
            // que o processo fique órfão no limbo
            if not CreateProcessWithLogon(
               PWideChar(wUser),
               PWideChar(wDomain),
               PWideChar(wPassword),
               LOGON_WITH_PROFILE,
               nil,
               PWideChar(wCommand),
               NORMAL_PRIORITY_CLASS or CREATE_NEW_CONSOLE or CREATE_NEW_PROCESS_GROUP,
               nil,
               PWideChar(wWorkingDir),
               si,
               fProcess.ProcessInfo
             )
            then
              RaiseLastOSError;
          end;

          end;
    end;

    destructor TProcess.Destroy;
    begin
      if fProcess.ProcessInfo.hProcess > 0 then
      begin
        if getExitCode = STILL_ACTIVE then
          TerminateProcess(fProcess.ProcessInfo.hProcess, Cardinal(-1));

        CloseHandle(fProcess.ProcessInfo.hThread);
        CloseHandle(fProcess.ProcessInfo.hProcess);
      end;

      if fProcess.Environment <> nil then
        DestroyEnvironmentBlock(fProcess.Environment);

      if fProcess.Job > 0 then
        CloseHandle(fProcess.Job);

      if fProcess.ProfileInfo.hProfile > 0 then
        UnloadUserProfile(fProcess.Token, fProcess.ProfileInfo.hProfile);

      if fProcess.Token > 0 then
        CloseHandle(fProcess.Token);

      if fProcess.WinStat > 0 then
        CloseWindowStation(fProcess.WinStat);

      FillChar(fProcess, SizeOf(fProcess), 0);

      inherited;
    end;

    function TProcess.getExitCode: Cardinal;
    begin
      if not GetExitCodeProcess(fProcess.ProcessInfo.hProcess, Result) then
        RaiseLastOSError;
    end; 
```

* * *

这可能很有用

> [在 C++ 中启动交互式客户端进程](http://msdn.microsoft.com/en-us/library/aa379608%28VS.85%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:59:10.607

据此：[在 C++ 中启动交互式客户端进程](http://msdn.microsoft.com/en-us/library/aa379608%28VS.85%29.aspx)

还有这个：[CreateProcessAsUser() windowsstations and desktops](http://support.microsoft.com/Default.aspx?id=165194)

我解决了创建新 WindowStation 和 Deskyop 以启动进程的问题：

```
myWinStat := CreateWindowStation('myWinStat', 0, GENERIC_READ or GENERIC_WRITE, nil);
myDesk := CreateDesktop('myDesktop', nil, nil, 0, GENERIC_READ or GENERIC_WRITE, nil);
startupInfo.lpDesktop := 'myDesktop';
try
   // createProcessAsUser...
   // Wait for process termination...
finally
   CloseDesktop(myDesk);
   CloseWindowStation(myWinStat);
end; 
```

# extjs - 通过 id 或 itemId 获取 TabPanel 的 Tab

> ID：15158911
> 
> 赞同：3
> 
> 时间：2013-03-01T13:27:08.930
> 
> 标签：extjs, extjs4

我的 View with Tabs 中有一个 TabPanel。如何在此面板中获取选项卡的实例以及应设置哪个属性 id 或 itemId？

谢谢

```
openProjectMetaTab: function(project) {
    var tabPanel = this.getTab();
    console.log(tabPanel);
    var mpItemId = 'project-metaTab-' + project.get('id')
    console.log('#'+mpItemId);
    var metaPanel = tabPanel.getComponent(mpItemId);
    console.log(metaPanel);
    if(!metaPanel) {
        tabPanel.add({
            title: project.get('title'),
            closable: true,
            items: [
                {
                    xtype: 'projectMetaForm',
                    itemId: mpItemId,
                },
            ],
        }).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:12:33.957

我建议使用`itemId`，因为这样您就不必担心全局 id 属性冲突。根据文档：

“由于 itemId 是容器内部 MixedCollection 的索引，因此 itemId 的范围仅限于容器”

然后，您可以使用`Ext.container.Container.getComponent`来获取您的标签。

这是海报更新问题的示例：

```
openProjectMetaTab: function(project) {
    var tabPanel = this.getTab();
    console.log(tabPanel);
    var mpItemId = 'project-metaTab-' + project.get('id')
    console.log('#'+mpItemId);
    var metaPanel = tabPanel.getComponent(mpItemId);
    console.log(metaPanel);
    if(!metaPanel) {
        tabPanel.add({
            title: project.get('title'),
            closable: true,
            xtype: 'projectMetaForm',
            itemId: mpItemId
        }).show();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-06T15:01:57.397

**简短的回答：**

```
myTabPanel.getComponent('someItemId'); 
```

# regex - 正则表达式高尔夫：切断最后一个“/”之后的所有内容

> ID：15158913
> 
> 赞同：2
> 
> 时间：2013-03-01T13:27:20.070
> 
> 标签：regex, perl

这个问题纯粹是装饰性的：

我想删除给定字符串的最后一个“/”之后的所有文本。所以如果输入是

```
mkdir -p $DEST/Users/Peter/Dropbox/Public/Vacation/P1000891.jpg 
```

输出应该是

```
mkdir -p $DEST/Users/Peter/Dropbox/Public/Vacation/ 
```

（准确地说，最后一个“/”是否包含在输出中并不重要。）

我找到了各种方法，例如：

```
my @templist = split "/", 'mkdir -p $DEST/Users/Peter/Dropbox/Public/Vacation/P1000891.jpg';
print join "/", splice(@templist, 0, -1); 
```

或者：

```
my ($a) = 'mkdir -p $DEST/Users/Peter/Dropbox/Public/Vacation/P1000891.jpg' =~ /(.*\/)+(?:[^\/]+)/;
print $a; 
```

但我认为这应该只使用正则表达式就可以实现，也许使用搜索和替换？也许与前瞻？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T13:29:32.280

只需去掉字符串末尾的所有非斜线字符：

```
s|[^/]+$||; 
```

顺便说一句，前瞻是一种检查模式中稍后发生的事情的方法，而无需实际向前移动匹配位置。简单的匹配任务很少需要它，但它似乎被不太清楚它是什么的人过度使用了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T13:48:32.583

```
use File::Basename qw( dirname );
dirname($path) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T13:36:36.783

```
s/(.*\/).*$/$1/g 
```

测试如下：

```
> echo "a/b/c/d/e/f/remove this"|perl -pe 's/(.*\/).*$/$1/g'
a/b/c/d/e/f/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T13:55:23.547

您提到了*正则表达式*和*perl*作为标签。问题（正如您所发现的）是正则表达式是贪婪的。有两种方法可以处理此问题：

*   **旧方法**：在旧版本的`grep`and`sed`中，您只有一组有限的正则表达式。您所做的是利用您不希望在要删除的内容中出现任何斜线的事实。

因此：

```
$directory =~ s(/[^/]+$)(); 
```

（我使用括号作为正则表达式分隔符，所以我没有像这样的山丘和山谷影响：）`s/\/[^\/]//`。这就是说从最后匹配所有现在以正斜杠开头的正斜杠字符，然后什么都不替换。

但是，看起来您只是想从目录中删除文件名。Perl 有一个内置的方法来处理这个问题。它被称为`dirname`函数：

```
use File::Basename;

[...];

print "mkdir -p " . dirname $directory . "\n"; 
```

这使您非常非常清楚您在做什么。此外，它还可以在不使用标准正斜杠进行目录分隔的*替代*操作系统上运行（*咳咳*！*咳咳*）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T15:46:12.413

以前的解决方案比我的好，但我想与您分享：

```
perl -e 'my $str = "mkdir -p \$DEST/Users/Peter/Dropbox/Public/Vacation/P1000891.jpg"; my ($res)=$str=~m|(.+/)|; print $res;' 
```

印刷：

> mkdir -p $DEST/Users/Peter/Dropbox/Public/Vacation/

所以，`m|(.+/)|`贪婪地吞噬一切，直到最后一个“/”。然后我们说我们关心的部分应该有一个“/”。

# java - 将 json 数组转换为 java 列表对象

> ID：15158916
> 
> 赞同：11
> 
> 时间：2013-03-01T13:27:27.010
> 
> 标签：java, json

我从服务器得到一个**json 数组**`response`：

```
[{"id":1, "name":"John", "age": 20},{"id":3, "name":"Tomas", "age": 29}, {"id":12, "name":"Kate", "age": 32}, ...] 
```

我想使用[gson](http://code.google.com/p/google-gson/)将上述 json 数据转换为 Java`List<Person>`对象。我尝试了以下方法：

首先，我创建了一个**Person.java**类：

```
public class Person{
  private long id;
  private String name;
  private int age;

  public long getId(){
     return id;
  }

  public String getName(){
     return name;
  }

  public int getAge(){
     return age;
  }
} 
```

然后，在我的服务课上，我做了以下事情：

```
//'response' is the above json array 
List<Person> personList = gson.fromJson(response, List.class); 

for(int i=0; i<personList.size(); i++){
   Person p = personList.get(i); //java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to Person
} 
```

我得到 Exception **java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to Person**。如何摆脱我的问题？我只想将 json 数组转换为`List<Person>`对象。有什么帮助吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-01T13:32:21.220

您需要使用超类型标记进行解组，以便 Gson 知道列表中的泛型类型是什么。试试这个：

```
TypeToken<List<Person>> token = new TypeToken<List<Person>>(){};
List<Person> personList = gson.fromJson(response, token.getType()); 
```

并像这样遍历结果：

```
for(Person person : personList) {
    // some code here
} 
```

# coffeescript - 从在实例函数中运行的同一类中的另一个方法调用类中的方法

> ID：15158917
> 
> 赞同：4
> 
> 时间：2013-03-01T13:27:29.077
> 
> 标签：coffeescript

我试图从 调用该方法`clean`，`getUser`但它返回`undefined`。如果我打电话`u.test()`，它会完美运行。

我该如何解决这个问题？

```
class User
    constructor: () ->
        @db = # connect to db...

    clean: (user, callback) ->
        delete user.password
        callback user

   getUser: (id) ->
       @db.get id, (err, user) ->
            @clean user, (u) -> console.log u

   test: () ->
           @clean {name: "test", password: "hello"}, (u) ->
                console.log u

u = new User
u.getUser() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:38:19.463

你想要`=>`的内部功能。

在您的内部函数中，使用 ->，它是`undefined`默认绑定的普通函数。使用 =>，您将其绑定到`this`函数实例化上下文的值。

# android - 如何根据android中的seekbar位置更改imageview宽度

> ID：15158922
> 
> 赞同：0
> 
> 时间：2013-03-01T13:27:53.760
> 
> 标签：android, android-intent

我正在做一个需要根据搜索栏位置更改图像视图宽度的应用程序，我尝试使用下面的代码，但是当我移动搜索栏时，图像视图的宽度和高度都在变化，但我只想将宽度更改为改变，高度应该是恒定的。如果我在 xml 中为 imageview 设置背景只有宽度改变，但在我的应用程序中我必须动态设置背景，所以请任何人都可以帮助我....

```
public class MainActivity extends Activity implements OnSeekBarChangeListener {

   float screenHeight,screenWidth,screendensity;
   private SeekBar mSeekBar;
   ImageView i1;

   int width2;
   RelativeLayout.LayoutParams parms,parms1;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setNoTitle();
      getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,               WindowManager.LayoutParams.FLAG_FULLSCREEN);
      DisplayMetrics displaymetrics = new DisplayMetrics();
      getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
      screenHeight = displaymetrics.heightPixels;
      screenWidth = displaymetrics.widthPixels;
      setContentView(R.layout.activity_main);
      mSeekBar = (SeekBar) findViewById(R.id.seek_bar);
      mSeekBar.setOnSeekBarChangeListener(this);

      Globalclass.widthnew=(int)(212*(screenWidth/320));
      Globalclass.hightnew=(int)(360*(screenHeight/480));  

      mSeekBar.setMax(Globalclass.widthnew);
      mSeekBar.setProgress(Globalclass.widthnew);

     }

@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {

    width2=progress;
    Toast.makeText(MainActivity.this, "Seekbar Value : " + width2, Toast.LENGTH_SHORT).show();

    i1=(ImageView)findViewById(R.id.image);
    i1.setImageResource(R.drawable.frame_one1);
    parms = new RelativeLayout.LayoutParams(width2+50,Globalclass.hightnew);
    parms.topMargin=(int)(200*(screenHeight/480));
     i1.setLayoutParams(parms);

}

@Override
public void onStartTrackingTouch(SeekBar seekBar) {
    Toast.makeText(MainActivity.this, "Started Tracking Seekbar", Toast.LENGTH_SHORT).show();

}

@Override
public void onStopTrackingTouch(SeekBar seekBar) {
    mSeekBar.setSecondaryProgress(seekBar.getProgress());
    Toast.makeText(MainActivity.this, "Stopped Tracking Seekbar", Toast.LENGTH_SHORT).show();
}
private void setNoTitle() {
    // TODO Auto-generated method stub
    requestWindowFeature(Window.FEATURE_NO_TITLE);
}
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:38:11.640

当您调整 的宽度时`ImageView`，Android 会自动缩放其中的图像以保持纵横比。如果您选择不同的背景颜色，您会注意到您`ImageView`会根据或您的要求更改宽度和高度，但里面的图像保持其原始纵横比。

为了达到你想要的，你必须改变`scaleType`你的形象。您可以通过添加`android:scaleType="fitXY"`到您`ImageView`的`xml`文件中来做到这一点。`fitXY`独立缩放 X 和 Y。

有关更多详细信息，请查看[ImageView.ScaleType](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)以及这篇文章[如何在 ImageView 中缩放图像以保持纵横比](https://stackoverflow.com/q/2521959/935627)

# iphone - UIApplication beginIgnoringInteractionEvents] 溢出。忽略

> ID：15158929
> 
> 赞同：0
> 
> 时间：2013-03-01T13:28:02.703
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我正在尝试`UITextField`动态创建，然后单击 textField 试图显示选择器视图，但有些如何得到上述错误。并且它在循环中运行错误不会停止，除非并且直到我停止应用程序。

**代码**

```
-(void)textFieldDidBeginEditing:(UITextField *)textField
{

    CGRect textFieldRect =
    [self.view.window convertRect:textField.bounds fromView:textField];
    CGRect viewRect =
    [self.view.window convertRect:self.view.bounds fromView:self.view];
    CGFloat midline = textFieldRect.origin.y + 0.5 * textFieldRect.size.height;
    CGFloat numerator =
    midline - viewRect.origin.y
    - MINIMUM_SCROLL_FRACTION * viewRect.size.height;
    CGFloat denominator =
    (MAXIMUM_SCROLL_FRACTION - MINIMUM_SCROLL_FRACTION)
    * viewRect.size.height;
    CGFloat heightFraction = numerator / denominator;

    if (heightFraction < 0.0)
    {
        heightFraction = 0.0;
    }
    else if (heightFraction > 1.0)
    {
        heightFraction = 1.0;
    }

    UIInterfaceOrientation orientation =
    [[UIApplication sharedApplication] statusBarOrientation];
    if (orientation == UIInterfaceOrientationPortrait ||
        orientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        animatedDistance = floor(PORTRAIT_KEYBOARD_HEIGHT * heightFraction);
    }
    else
    {
        animatedDistance = floor(LANDSCAPE_KEYBOARD_HEIGHT * heightFraction);
    }

    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y -= animatedDistance;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

    [self.view setFrame:viewFrame];

    [UIView commitAnimations];

    if (textField.tag < 10) {

        if ([[datatypeArray objectAtIndex:textField.tag] isEqualToString:@"Currency"])
        {

            [self showpicker:textField];

        }
        else if([[datatypeArray objectAtIndex:textField.tag ] isEqualToString:@"Date" ])
        {

            [self showpicker:textField];

        }
        else if([[datatypeArray objectAtIndex:textField.tag] isEqualToString:@"Text"])
        {

        }

    }
    else
    {

        [self showpicker:textField];

    }

}

-(void)showpicker:(UITextField *)textfield
{
      [textfield resignFirstResponder];

        if (textfield.tag >= 10 ) {

            currentTextField=textfield;
            pickerArray=arraycurrency;

            actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

            [actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];
            CGRect pickerFrame = CGRectMake(0, 40, 0, 0);

            pickerView = [[UIPickerView alloc] initWithFrame:pickerFrame];
            pickerView.showsSelectionIndicator = YES;
            pickerView.dataSource = self;
            pickerView.delegate = self;
            [actionSheet addSubview:pickerView];

            UIToolbar *pickerToolbar;

            pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
            pickerToolbar.barStyle = UIBarStyleBlackOpaque;
            [pickerToolbar sizeToFit];

            NSMutableArray *barItems = [[NSMutableArray alloc] init];

            UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
            [barItems addObject:flexSpace];

            UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)];
            [barItems addObject:doneBtn];

            UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancelButtonPressed:)];
            [barItems addObject:cancelBtn];

            [pickerToolbar setItems:barItems animated:YES];

            [actionSheet addSubview:pickerToolbar];

            [actionSheet addSubview:pickerView];

            [actionSheet showInView:self.view];
            [actionSheet showInView:[UIApplication sharedApplication].keyWindow];

            [actionSheet setBounds:CGRectMake(0, 0, 320, 485)];

        }
        else if ([[datatypeArray objectAtIndex:textfield.tag ] isEqualToString:@"Date" ])
        {

            [textfield resignFirstResponder];

            currentTextField=textfield;

            actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

            pickerDateView = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 44, 0, 0)];
            pickerDateView.datePickerMode = UIDatePickerModeDate;
            pickerDateView.hidden = NO;
            pickerDateView.date = [NSDate date];
            pickerDateView.userInteractionEnabled=YES;
            pickerDateView.timeZone=[NSTimeZone localTimeZone];

            UIToolbar *pickerToolbar;

            pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
            pickerToolbar.barStyle = UIBarStyleBlackOpaque;
            [pickerToolbar sizeToFit];

            NSMutableArray *barItems = [[NSMutableArray alloc] init];

            UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
            [barItems addObject:flexSpace];

            UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)];
            [barItems addObject:doneBtn];

            UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancelButtonPressed:)];
            [barItems addObject:cancelBtn];

            [pickerToolbar setItems:barItems animated:YES];

            [actionSheet addSubview:pickerToolbar];
            [actionSheet addSubview:pickerDateView];

            [actionSheet showInView:[UIApplication sharedApplication].keyWindow];

            [actionSheet setBounds:CGRectMake(0,0,320, 464)];

        }
        else if ( [[datatypeArray objectAtIndex:textfield.tag] isEqualToString:@"Text"])
        {

            [textfield becomeFirstResponder];

        }
        else if((textfield.tag==0 || textfield.tag==1 || textfield.tag==2 || textfield.tag==3 || textfield.tag==4) &&
            [[datatypeArray objectAtIndex:textfield.tag] isEqualToString:@"Currency"]);
        {

            [textfield becomeFirstResponder];

        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:38:45.633

以下描述了`UIPickerView`点击时显示的简单代码`UItextField`

```
-(void)textFieldDidBeginEditing:(UITextField *)sender
    {
      [self willDisplayPickerView];
    } 
```

// `willDisplayPickerView`方法代码：

```
 - (void)willDisplayPickerView
      {

        // Init the picker view.
 pickerView = [[UIPickerView alloc] init];

 // Set the delegate and datasource. Don't expect picker view to work
 // correctly if you don't set it.
 [pickerView setDataSource: self];
 [pickerView setDelegate: self];

 // Set the picker's frame. We set the y coordinate to 50px.
 [pickerView setFrame: CGRectMake(xPoint, 50.0f, pickerWidth, 200.0f)];

 // Before we add the picker view to our view, let's do a couple more
 // things. First, let the selection indicator (that line inside the
 // picker view that highlights your selection) to be shown.
 pickerView.showsSelectionIndicator = YES;

 // Allow us to pre-select the third option in the pickerView.
 [pickerView selectRow:2 inComponent:0 animated:YES];

 // OK, we are ready. Add the picker in our view.
 [self.view addSubview: pickerView];
    } 
```

# django-celery - Django Celery 应用程序 - 没有名为 celery 的模块错误

> ID：15158932
> 
> 赞同：11
> 
> 时间：2013-03-01T13:28:12.847
> 
> 标签：django-celery

我在教程中创建了一个 django-celery 应用程序：

[http://docs.celeryproject.org/en/master/django/first-steps-with-django.html](http://docs.celeryproject.org/en/master/django/first-steps-with-django.html)

当我在没有应用程序参数的情况下运行它时一切正常，如下所示：

```
$ python manage.py celery worker -l info 
```

但我根本无法使用 application 参数启动它，如：

```
$ python manage.py celery worker -A myapp -l info 
```

其中 myapp 是我创建项目时赋予应用程序的名称：

```
$ python manage.py startapp myapp 
```

我得到的错误是：

```
ImportError: No module named celery 
```

有谁知道为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-10T00:05:46.450

**2014 年 4 月编辑：**

Celery 文档已更新为 3.1；以下解决方案现已过时，请参阅：

[http://docs.celeryproject.org/en/master/django/first-steps-with-django.html](http://docs.celeryproject.org/en/master/django/first-steps-with-django.html)

* * *

默认情况下，celery 会搜索一个名为的模块`celery.py`来查找其配置。您可以让 celery 使用不同的名称，而不是[在 app 参数](http://docs.celeryproject.org/en/latest/getting-started/next-steps.html#about-the-app-argument)`celery.py`中指定它- 在本例中，我们将在以下位置查找 celery 配置：`settings.py`

```
python manage.py celery worker --app=myapp.settings 
```

使用时，`django-celery`您可以使用上面的调用来启动 celery，或者像我最初做的那样`celery.py`在我的应用程序包中创建一个`myapp`：

```
from settings import celery 
```

我的 Django`settings.py`包含正常的 celery 配置：

```
from celery import Celery

celery = Celery(broker="amqp://guest:guest@127.0.0.1:5672//")

celery.conf.update(
    CELERY_DEFAULT_QUEUE = "myapp",
    CELERY_DEFAULT_EXCHANGE = "myapp",
    CELERY_DEFAULT_EXCHANGE_TYPE = "direct",
    CELERY_DEFAULT_ROUTING_KEY = "myapp",
) 
```

然后像这样运行 celery worker：

```
python manage.py celery worker --app=myapp 
```

为了清楚起见，这是我的完整应用程序结构：

```
myproject/
    manage.py
    myapp/
        __init__.py
        settings.py
        celery.py 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-14T02:26:56.050

确保您尝试从可以访问 celery 模块的目录启动 celery worker。就我而言，我试图从应用程序目录而不是项目启动工作人员。

# javascript - jQuery 从按钮 onclick 跳转或滚动到页面上的某个位置、div 或目标

> ID：15158937
> 
> 赞同：41
> 
> 时间：2013-03-01T13:28:29.410
> 
> 标签：javascript, jquery, html, css, scroll

当我单击一个按钮时，我希望能够向下跳转或滚动到页面上的特定 div 或目标。

```
$('#clickMe').click(function() {
    //jump to certain position or div or #target on the page
}); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-01T13:53:46.793

我会将链接设置为看起来像一个按钮，因为这样就没有 js 后备。

* * *

所以这就是你如何使用 jquery 为跳转设置动画。No-js fallback 是没有动画的正常跳转。

**原始示例：**

`**[jsfiddle](http://jsfiddle.net/lollero/ZVdRt/)**`

```
$(document).ready(function() {
  $(".jumper").on("click", function( e ) {

    e.preventDefault();

    $("body, html").animate({ 
      scrollTop: $( $(this).attr('href') ).offset().top 
    }, 600);

  });
});
```

```
#long {
  height: 500px;
  background-color: blue;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<!-- Links that trigger the jumping -->
<a class="jumper" href="#pliip">Pliip</a>
<a class="jumper" href="#ploop">Ploop</a>
<div id="long">...</div>
<!-- Landing elements -->
<div id="pliip">pliip</div>
<div id="ploop">ploop</div>
```

* * *

**链接的实际按钮样式的新示例**，只是为了证明一点。

一切都基本相同，除了我将类更改`.jumper`为`.button`并添加了 css 样式以使链接看起来像按钮。

`**[Button styles example](http://jsfiddle.net/lollero/ZVdRt/262/)**`

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-03-01T13:29:44.127

```
$("html, body").scrollTop($(element).offset().top); // <-- Also integer can be used 
```

# php - .htaccess 将所有扩展重定向到 php

> ID：15158940
> 
> 赞同：1
> 
> 时间：2013-03-01T13:28:42.050
> 
> 标签：php, html, apache, .htaccess, redirect

我最近更新了我的**.htaccess**文件以隐藏*.php*的 url 扩展名。它很好用，当我尝试访问*domain.com/index*时，它会显示 php 文件。

当我输入*domain.com/index.php*时，它会将我重定向到*domain.com/index* url 并同时显示 .php 文件。

出于安全原因，我想将所有其他扩展名重定向到无扩展名 url 以显示 .php 文件。我的问题是，我无法将**.htaccess**配置为重定向众所周知的扩展名，如*.html .asp。aspx .shtml*等添加到非扩展 url，并获取显示为内容的 .php 文件。

我的 .htaccess 文件如下所示：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

# php extension to no extension url
RewriteCond %{THE_REQUEST} ^[A-Z]+\s.+\.php\sHTTP/.+
RewriteRule ^(.+)\.php $1 [R=301,L]

# no extension to the .php file
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !/$
RewriteRule (.*) $1\.php [L]

# this is for the index
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:26:20.493

你可以尝试这样的事情：

```
# php extension to no extension url
RewriteCond %{THE_REQUEST} ^[A-Z]+\s.+\.php\sHTTP/.+
RewriteRule ^(.+)\.[a-zA-Z0-9]+$ $1 [R=301,L] 
```

然后它不仅会重定向`.php`扩展名，还会重定向任何人。要使用它，请确保您的 URL 末尾没有带点和字母数字字符串。

# svm - 如何使用 mfcc 功能训练 svm 分类器进行语音识别？

> ID：15158942
> 
> 赞同：4
> 
> 时间：2013-03-01T13:28:49.477
> 
> 标签：svm, voice-recognition, mfcc

我目前处于语音识别的讨论阶段项目，我使用 MFCC 特征提取，但从函数返回的 MFCC 特征是一个矩阵，例如 每个语音文件（wav）的（20,38）特征矩阵。但是我怎样才能将此功能传递给 SVM 分类器。对于 SVM（和其他分类器），每个样本都由一个向量表示，对吧？但是每个样本的 MFCC 特征是一个矩阵。假设 Xi 是样本 i 的 MFCC 特征，那么样本 i 传递给 SVM 的特征是：1）一个 20*38 的向量，例如。Xi(:) 的 matlab 形式。2) 均值 (Xi)。3) Xi中的列或行之一。哪种方式是正确的？任何有用的代码，纸？

谢谢！闪耀

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T07:26:15.167

对于语音识别等序列标记任务，您需要结合使用 SVM 和 HMM，而不仅仅是 SVM

1.  使用 GMM-HMM 将特征矩阵与状态对齐，得到每个 HMM 状态对应的特征
2.  在属于每个状态的特征上训练 SVM
3.  用 SVM-HMM 代替 GMM-HMM

要了解更多信息，请阅读

[http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.27.442](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.27.442)

为了加快速度，请使用现有的工具包，例如：

[http://www.cs.cornell.edu/people/tj/svm_light/svm_hmm.html](http://www.cs.cornell.edu/people/tj/svm_light/svm_hmm.html)

# jquery - jquery 不工作共享点子站点

> ID：15158947
> 
> 赞同：1
> 
> 时间：2013-03-01T13:29:03.777
> 
> 标签：jquery, sharepoint-2010

```
$("div.s4-ctx").bind('click', function () {
    var T = setTimeout(showAlert, 400);
});
$("div.ms-vh-div").bind('click', function () {
    var T = setTimeout(showAlert, 400);
});

function showAlert() {
    $('div.ms-MenuUIPopupBody').css('left', '+=120px');
} 
```

`jquery`在sharepoint主页上工作正常。但它不适用于 sharepoint 子站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:35:43.183

几种可能性：

*   您在主页上插入引用 jQuery 库的 SCRIPT 标记，但不在子站点页面上。
*   您正在插入引用所有页面上的 jQuery 库的 SCRIPT 标记，但 SRC 属性是相对的，并且仅在主页上正确。

# delphi - 如果“资源和图像”为空，如何使用资源

> ID：15158949
> 
> 赞同：2
> 
> 时间：2013-03-01T13:29:06.853
> 
> 标签：delphi, delphi-xe2, embedded-resource

我打开了一个旧项目，我使用 XE2 IDE/项目/“资源和图像...”功能放置资源。

我在那里放了 4 张 png 图像，并创建了相应的 .red 和 .dres 文件。

现在，如果我再次打开“资源和图像...”，我什么也看不到，但应用程序表现良好并且能够提取 4 个文件。

如何恢复“资源和图像...”以便我可以查看和替换文件？

谢谢

注意：这就是我所说的“我什么都看不见”： ![ide 屏幕截图](../Images/49b6815ad3631ccbd9a3de5815d4b4ba.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T13:54:13.217

使用该对话框添加资源会导致对 .dproj 文件的修改。那是主要来源。你的 .dproj 文件应该有这样的项目：

```
<RcItem Include="Chrysanthemum.jpg">
    <ResourceType>RCDATA</ResourceType>
    <ResourceId>JpgImage_1</ResourceId>
</RcItem> 
```

编译器将使用 .dproj 文件中的信息来创建和编译 .rc 文件并将输出命名为 .dres。然后将该 .dres 文件链接到您的应用程序。

如果这些项目存在于 .dproj 文件中，则项目将出现在该对话框中。如果您的 .dproj 文件已丢失并重新创建，则这些项目将不会出现在该对话框中。这是您观察到的最可能的解释。您需要再次添加文件，并确保您照顾好您的 .dproj 文件。我相信它在您的修订控制系统中？

您仍然可以在运行时获取图像的原因是 .dres 文件仍然存在，并且在您重新构建应用程序时仍然链接。但由于 .dproj 文件中的设置已丢失，因此不会重新创建 .dres 文件。

# c# - 派生类的对象实例化

> ID：15158951
> 
> 赞同：-3
> 
> 时间：2013-03-01T13:29:12.443
> 
> 标签：c#, oop, inheritance

```
public class Base
{
    public virtual void SomeOtherMethod()
    {
    }
}

public class Derived : Base
{
    public new void SomeOtherMethod1()
    {
    }
}

**Base b = new Derived();

Derived d = new Derived();

Derived d=new Base();** 
```

我无法理解上面这三行的对象实例化？在派生类的情况下，我对如何实例化对象的概念有些困惑。有人可以帮助我了解这些概念吗？

混淆了等号的左右部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:55:10.880

改变这个：

```
public new void SomeOtherMethod1() 
```

...和：

```
public override void SomeOtherMethod1() 
```

那就是如果您想要实际的多态性（更改基成员的实现）。

## 关于其他线路

这被称为*upcast*。由于`Derived`is 类型`Base`因为它继承`Base`，所以可以将更具体的实例*向上*转换为不太具体的引用：

```
Base b = new Derived() 
```

另一条线是*垂头丧气*的。*出于与upcast*相同的原因，您可以*向下转换*实例并将其存储在更具体的类型化引用中，如果更具体派生出更具体的引用。

问题是，在你的情况下，`Base`永远不会是 type `Derived`，因为`Base`不继承`Derived`。但你可以做下一个*沮丧*：

```
Base base = new Derived(); // This is an upcast again
Derived derived = (Derived)base; // Using an explicit downcast to Derived! 
```

# api - Youtube 播放列表 ID

> ID：15158953
> 
> 赞同：0
> 
> 时间：2013-03-01T13:29:20.227
> 
> 标签：api, youtube, youtube-api, playlist

我在 youtube 上创建了一个播放列表。该网址效果很好，但我无法从中获取 ID。它似乎不起作用。

我的播放列表是：

[http://www.youtube.com/playlist?list=PLE_-2rZv8j2ro-QgxzK9nvi9O61dgE-Hx](http://www.youtube.com/playlist?list=PLE_-2rZv8j2ro-QgxzK9nvi9O61dgE-Hx)

当我将“E_-2rZv8j2ro-QgxzK9nvi9O61dgE-Hx”插入 youtube 播放器演示时，它不起作用：[https ://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo)

我需要该 ID 来制作 API Iframe。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:11:12.130

播放器演示有一个带有新 ID 的错误。试试[JSFiddle](http://jsfiddle.net/)

`<iframe id="ytplayer" type="text/html" width="640" height="360" src="https://www.youtube.com/embed/?listType=playlist&list=PLE_-2rZv8j2ro-QgxzK9nvi9O61dgE-Hx" frameborder="0" allowfullscreen>`

# java - Java：scanner.next() 和 .equals() 比较失败的字符串

> ID：15158956
> 
> 赞同：1
> 
> 时间：2013-03-01T13:29:25.190
> 
> 标签：java, string, input, comparison, java.util.scanner

我从扫描仪读取了一个输入，然后将其与硬编码字符串变量进行比较

```
String MOVE = input.next();  // I type in "MOVE N"
MOVE = MOVE.trim();
System.out.print(MOVE.equals("MOVE N")); 
```

这返回了错误。我添加了修剪（）

```
String MOVE = input.next(); // I type in "MOVE N"
System.out.print(MOVE.equals("MOVE N")); 
```

还是假的。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T13:31:13.557

你可能想要`nextLine()`. 该`next()`方法将只返回下一个*标记*，默认情况下它将是下一个单词（即它在空格处中断）。

下一次，你应该添加一个调用来`System.out.println(MOVE);`帮助你诊断这个 - 这样你就可以看到结果只是`"MOVE"`而不是`"MOVE N"`. （然后您会查阅文档以获取[`Scanner.next()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)...）

此外，我强烈建议您开始为变量遵循 Java 命名约定 - 所以`move`而不是`MOVE`例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:32:18.060

```
String MOVE = input.nextLine ();  // I type in "MOVE N"
MOVE = MOVE.trim ();
System.out.print (MOVE.equals ("MOVE N")); 
```

# jenkins - 在 jenkins 中为 liferay portlet 创建构建作业

> ID：15158957
> 
> 赞同：1
> 
> 时间：2013-03-01T13:29:26.150
> 
> 标签：jenkins, continuous-integration, liferay, liferay-6, liferay-ide

我想开发一个简单的 liferay portlet，使用 maven 部署它并在 CI (Jenkins) 中构建作业。但我知道 Liferay 不支持 Maven，他们仍在努力。谁能建议我如何在詹金斯为我的 liferay portlet 创建构建工作。有没有人在这之前工作过。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:35:22.823

Liferay[确实为最新版本提供了 Maven 工件](https://www.liferay.com/web/mika.koivisto/blog/-/blogs/15470275)。Larry 在他的回答中给出的 wiki 文章似乎已经过时 - 除非您运行的是旧版本的 Liferay。但是，即便如此，如果它在与当前版本相同的位置（但版本号不同）下不可用，您也可能想尝试一下（请参阅 Mika 的博客）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:49:00.137

Jenkins 也能很好地处理[Ant 。](https://wiki.jenkins-ci.org/display/JENKINS/Ant+Plugin)请参阅 Ant 页面的插件。

我看到[了这个](http://www.liferay.com/community/wiki/-/wiki/Main/Maven+SDK)，你可以试试 Maven。

# avfoundation - 如何通过在 iOS 5 和 iOS 6 中应用 CIFilters 来保持 30 FPS [每秒帧数] 来进行实时视频编辑？

> ID：15158965
> 
> 赞同：0
> 
> 时间：2013-03-01T13:29:47.513
> 
> 标签：avfoundation, core-image, core-video, cifilter, core-media

我是 iPhone 实时视频编辑的新手。我的目标是在使用 GPU 进行视频编辑时达到最高帧速率。我想通过可用的 CIFilter 支持 iOS 5 及更高版本。

请引导我正确的方向。

提前致谢。

# html - 用 CSS 隐藏 ul 中的第一个 li

> ID：15158972
> 
> 赞同：10
> 
> 时间：2013-03-01T13:30:16.727
> 
> 标签：html, css

我有一个导航菜单，我想隐藏其中的第一项。例如

```
<ul>
   <li>Home</li>
   <li>About</li>
   <li>
      <ul>
         <li>Item 1</li>
         <li>Item 2</li>
         <li>Item 3</li>
      </ul>
   </li>
</ul> 
```

然后我在 CSS 中隐藏第一个这样的元素：

```
li:first-child{
   visibility: hidden;
} 
```

但是随后发生的情况是导航中的所有第一个 li 项目都消失了，例如导航菜单中的“项目 1”。我如何**只**选择“home”li 项目并隐藏它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-01T13:35:22.913

给你的第一个 ul 一个类“yourclass”，然后`.yourclass > li:first-child { visibility: hidden; }`

隐藏第二个 ul 使用的第一个孩子`.yourclass > li > ul > li:first-child`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T13:33:00.507

为第一个 ul 分配一个 id，然后仅将 css 样式应用于该 id？

```
<ul id="someid">
   <li>Home</li>
   <li>About</li>
   <li>
      <ul>
         <li>Item 1</li>
         <li>Item 2</li>
         <li>Item 3</li>
      </ul>
   </li>
</ul>

#someid > li:first-child{
   visibility: hidden;
} 
```

另见[http://www.w3.org/TR/CSS2/selector.html](http://www.w3.org/TR/CSS2/selector.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T13:43:50.350

```
ul > li:first-child { (note you can do :last-child to target the last item)
display: none;
} 
```

另一种选择是使用 :nth-child()，特别是如果您出于其他原因需要针对其他孩子。在括号内输入一个数字[http://www.w3schools.com/cssref/sel_nth-child.asp](http://www.w3schools.com/cssref/sel_nth-child.asp)

使用 nth-child 模仿上面的相同。

```
ul > li:nth-child(1) {
display: none;
} 
```

请注意，如果没有像 modernizr 这样的 jquery 库来帮助它，IE 不支持 nth-child。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T13:39:20.173

```
<ul id="abc">
  <li>Home</li>
  <li>About</li>
  <li>
  <ul>
     <li>Item 1</li>
     <li>Item 2</li>
     <li>Item 3</li>
  </ul>
</li>
</ul>
  #abc > li:first-child{
   display: none;
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T13:37:46.737

我会考虑使用：

```
body> ul>:first-child {
    display: none;
} 
```

而不是：

```
ul li:first-child{
    visibility: hidden;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T13:41:52.107

您需要第一个 ul 之上的元素或类，然后指定

css 解决方案：{parent-selector} > ul > li。

jQuery 解决方案：$("ul > li");

# rtmp - Flowplayer RTMP 搜索

> ID：15158980
> 
> 赞同：1
> 
> 时间：2013-03-01T13:30:45.933
> 
> 标签：rtmp, flowplayer, seek

有没有办法从某个搜索点（例如第 15 秒）在 flowplayer 上启动流文件？

我都试过了`$f("stream",...).seek(15);`，`streams: [{ url: ..., start: 15}]`但似乎没有任何效果。

# java - 集合和 jax-rs

> ID：15158981
> 
> 赞同：1
> 
> 时间：2013-03-01T13:30:47.217
> 
> 标签：java, jackson, jax-rs

假设我有一个集合 /cars，它支持通常的操作，并且我还支持 /cars/{id}。

当我获得 /cars 的 GET 时，仅返回有限的集合元素“视图”的最佳实践是什么？也就是说，列出可能的 id、name 就足够了，客户需要更多信息，他可以通过 /cars/{id} 查询更详细的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T06:04:19.407

这可能是 Jackon`@JsonView`注释的一个很好的候选者。我通常在一个通用包中定义一些标记接口（可以在一个应用程序中重复使用）：

```
public interface View {
    public interface Partial { }
    public interface Full extends Partial { }
} 
```

然后你可以像这样在汽车类中使用它们：

```
public class Car {
    private int id;
    private String name;
    //Supresses serialization of this property when another view is active
    @JsonView(View.Full.class)
    private String description;

    ......
} 
```

最后激活资源中的适当视图：

```
@Path("/")
@JsonView(View.Partial.class)
public Collection<Car> getAll();

@Path("/{id}")
@JsonView(View.Full.class)
public Car getById(@PathParam("id") int id); 
```

需要注意的是，`@JsonView(View.Partial.class)`从`getAll()`方法中省略将导致所有属性都被序列化（在这种情况下，人们可能希望`description`不会被序列化）。这是因为 Jackson 禁用视图处理并忽略所有视图注释，除非有明确的视图指定用于渲染。我为此写了一个解决方法（这样当没有指定视图时，只有属于默认视图的属性被序列化）。我只能让它用于序列化而不是反序列化，如果你有兴趣我可以尝试挖掘它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:34:20.103

假设您在后端使用一些 ORM 库，定义两个不同的类：一个映射该实体的所有详细信息，另一个仅映射与概览相关的少数属性。然后只需在您的两种方法中将它们返回到不同的类型。

我认为这是一种非常标准的模式，至少我在我一直从事的项目中遇到了这种技术。

# java - 使用“包含”查询而不是“精确匹配”查询来搜索 oracle 数据库

> ID：15158983
> 
> 赞同：2
> 
> 时间：2013-03-01T13:30:56.430
> 
> 标签：java, sql, oracle, jdbc

我需要搜索包含用户信息表的数据库。我知道通过使用如下查询搜索来获得结果

```
String query;
StringBuilder sb=new StringBuilder(1024);
sb.append("select * from userinfo where uname=").append(key);
query=sb.toString(); 
```

但我需要做的是。

*   如果钥匙是`abc`
*   然后我需要在数据库中搜索所有具有值的数据`abc`
*   例如
*   我的数据库包含数据`abc`, `aba`, `gjabc`, `abcxyz`,`hjjabcxyz`
*   然后我需要检索值`abc`, `gjabc`, `abcxyz`,`hjjabcxyz`
*   因为上述所有值都包含`abc`共同点。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T13:37:37.527

如果你使用的是纯 SQL，你应该使用用“%”包围的 like。然后，您的查询将返回 uname 包含“abc”的所有行。您的查询需要如下所示：

```
select * from userinfo where uname like '%key%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T13:46:02.057

正确的实现将使用 PreparedStatement。

```
PreparedStatement ps = conn.prepareStatement("select * from userinfo where uname like ?");
ps.setString(1, key);
ResultSet rs = ps.executeQuery(); 
```

当然这会错过所有错误检查和管道代码:)

# objective-c - UIImage 到 CCSprite cocos2d v 2.0

> ID：15158993
> 
> 赞同：0
> 
> 时间：2013-03-01T13:31:31.747
> 
> 标签：objective-c, cocos2d-iphone, uiimage, cctexturecache

已移至 2.0 版，`Cocos2D`但我正在尝试找到一种解决方法来转换`UIImage`为`CCSprite`，以前的解决方案如下：

```
 CCTexture2D *texture = [[[CCTexture2D alloc] initWithImage:tempImage] autorelease];
        self.spriteImage = [CCSprite spriteWithTexture:texture]; 
```

笔记：

**tempImage 是一个`UIImage`对象**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:03:30.303

试试这个：

```
self.spriteImage = [[CCSprite alloc] initWithCGImage:tempImage.CGImage 
                                                 key:@"unique image name"]; 
```

或者，`initWithCGImage`如果您更喜欢使用 CCTexture2D 中的方法，也可以使用它。

# mysql - zend格式的mysql查询

> ID：15158994
> 
> 赞同：1
> 
> 时间：2013-03-01T13:31:35.573
> 
> 标签：mysql, zend-framework

我有以下sql语句

```
SELECT a.* FROM accounts a 
JOIN account_friends f 
ON f.friend_id = a.id 
WHERE f.account_id = 12; 
```

这会导致类似

```
id    username    password    email
14      test        test       ..
15      test2       test       .. 
```

我不能做的就是将其转换为 zend 语句。我试过这个

```
 $accFriendTable = new Default_Model_DbTable_AccountFriends();
    $query = $accFriendTable->select()->setIntegrityCheck(false);
    $query->from(array('a' => 'accounts'), array('a.*'));
    $query->join(array('f' => 'account_friends'), 'f.friend_id = a.id');
    $query->where('f.account_id = ?', $this->_id);
    $friendsList = $accFriendTable->fetchAll($query); 
```

这导致从 accounts 表和 account_friends 表中选择这两个列，就像这样

```
id    username    password    email    account_id    friend_id
1      test        test        ..         12             14
2      test2       test        ..         12             15 
```

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:49:50.720

您需要从连接表中提供所需的列数组，因为默认情况下它将从它们中获取所有列。

如果您不希望任何列`NULL`像下面一样通过，

```
$query->join(array('f' => 'account_friends'), 'f.friend_id = a.id',NULL); 
```

# hibernate - 如何使用标准编码可变数量的“或”子句？

> ID：15158995
> 
> 赞同：1
> 
> 时间：2013-03-01T13:31:38.437
> 
> 标签：hibernate, criteria, hibernate-criteria, detachedcriteria

我有以下条件查询：

```
 Criteria criteria = session.createCriteria(Parts.class);
        Iterator<String> iterator = searchList.iterator();
        Disjunction or =  Restrictions.disjunction();
        while (iterator.hasNext()){
            or.add(Restrictions.like("partName", "%"+iterator.next()+"%"));
        }
        criteria.add(or);
        criteria.add(Restrictions.in("partType", partType));
        criteria.addOrder(Order.asc("partDesc")); 
```

这会产生以下 where 子句：

```
from PartsDb..Parts this_ where (this_.PartName like ? or this_.PartName like ? or this_.PartName like ?) and this_.PartType in (?, ?) order by this_.PartDesc asc 
```

整个 'OR' 子句都在大括号中，它没有给出正确的结果。我希望查询是这样的（在 OR 子句周围没有大括号）：

```
from PartsDb..Parts this_ where this_.PartName like ? or this_.PartName like ? and this_.PartType in (?, ?) order by this_.PartDesc asc 
```

所以我想写这个：

```
Select * from dbo.Parts 
where 
PartName like '%ABC%'
or PartName like '%XYZ%'
or PartName like '%PQR%'
....
...

and PartType in ('a','b')
... 
```

“searchList”中的对象数量将根据用户输入的内容而有所不同。任何有关如何从大括号中获取可变数量的“OR”子句的帮助将不胜感激！

谢谢

# android - Arraylist 多次存储同一个对象？

> ID：15158996
> 
> 赞同：0
> 
> 时间：2013-03-01T13:31:48.270
> 
> 标签：android, object, arraylist, cursor

我不知道为什么 Arraylist 会存储类似的对象。请帮助我。先感谢您。我知道循环游标或存储在 Arraylist 中的逻辑有问题。数组列表是通过这种方式定义的，

```
public ArrayList<Object> results=new ArrayList<Object>();

public ArrayList<String> arrTemp=new ArrayList<String>(); 
```

以下是我的代码：

```
db = getReadableDatabase();// /////--->Here database is opened
        cursor = db.rawQuery("Select symbol,date,open,high,Low,close from testTBL;", null);

        if (cursor.getCount() != 0) {

            while (cursor.moveToNext()) {

                arrTemp.clear();

                    arrTemp.add(cursor.getString(cursor.getColumnIndex("symbol")));
                    arrTemp.add(cursor.getString(cursor.getColumnIndex("date")));
                    arrTemp.add(cursor.getString(cursor.getColumnIndex("open")));
                    arrTemp.add(cursor.getString(cursor.getColumnIndex("high")));
                    arrTemp.add(cursor.getString(cursor.getColumnIndex("Low")));
                    arrTemp.add(cursor.getString(cursor.getColumnIndex("close")));

                Log.v("arrayTemp inside while loop", ""+arrTemp);

                results.add(arrTemp);
                Log.v("Results stored", ""+results);
            }

                Log.v("Final Results", ""+results);

            cursor.close();
        }

            db.close(); 
```

以下是 Logcat 输出：

```
03-03 02:35:38.614: V/arrayTemp inside while loop(337): [ACC, 25-Feb-13, 1,302.00, 1,321.00, 1,293.05, 1,305.60]
03-03 02:35:38.614: V/Results stored(337): [[ACC, 25-Feb-13, 1,302.00, 1,321.00, 1,293.05, 1,305.60]]
03-03 02:35:38.624: V/arrayTemp inside while loop(337): [ACC, 22-Feb-13, 1,300.05, 1,308.05, 1,295.00, 1,300.95]
03-03 02:35:38.624: V/Results stored(337): [[ACC, 22-Feb-13, 1,300.05, 1,308.05, 1,295.00, 1,300.95], [ACC, 22-Feb-13, 1,300.05, 1,308.05, 1,295.00, 1,300.95]]
03-03 02:35:38.649: V/arrayTemp inside while loop(337): [WIPRO, 25-Feb-13, 416.2, 425.8, 416.2, 419.1]
03-03 02:35:38.649: V/Results stored(337): [[WIPRO, 25-Feb-13, 416.2, 425.8, 416.2, 419.1], [WIPRO, 25-Feb-13, 416.2, 425.8, 416.2, 419.1], [WIPRO, 25-Feb-13, 416.2, 425.8, 416.2, 419.1]]
03-03 02:35:38.649: V/arrayTemp inside while loop(337): [WIPRO, 22-Feb-13, 404.5, 418.45, 403.15, 415.95]
03-03 02:35:38.654: V/Results stored(337): [[WIPRO, 22-Feb-13, 404.5, 418.45, 403.15, 415.95], [WIPRO, 22-Feb-13, 404.5, 418.45, 403.15, 415.95], [WIPRO, 22-Feb-13, 404.5, 418.45, 403.15, 415.95], [WIPRO, 22-Feb-13, 404.5, 418.45, 403.15, 415.95]]
03-03 02:35:38.654: V/arrayTemp inside while loop(337): [ICICI, 25-Feb-13, 1,099.00, 1,101.85, 1,081.20, 1,093.90]
03-03 02:35:38.654: V/Results stored(337): [[ICICI, 25-Feb-13, 1,099.00, 1,101.85, 1,081.20, 1,093.90], [ICICI, 25-Feb-13, 1,099.00, 1,101.85, 1,081.20, 1,093.90], [ICICI, 25-Feb-13, 1,099.00, 1,101.85, 1,081.20, 1,093.90], [ICICI, 25-Feb-13, 1,099.00, 1,101.85, 1,081.20, 1,093.90], [ICICI, 25-Feb-13, 1,099.00, 1,101.85, 1,081.20, 1,093.90]]
03-03 02:35:38.654: V/arrayTemp inside while loop(337): [ICICI, 22-Feb-13, 1,077.05, 1,099.00, 1,077.05, 1,092.55]
03-03 02:35:38.654: V/Results stored(337): [[ICICI, 22-Feb-13, 1,077.05, 1,099.00, 1,077.05, 1,092.55], [ICICI, 22-Feb-13, 1,077.05, 1,099.00, 1,077.05, 1,092.55], [ICICI, 22-Feb-13, 1,077.05, 1,099.00, 1,077.05, 1,092.55], [ICICI, 22-Feb-13, 1,077.05, 1,099.00, 1,077.05, 1,092.55], [ICICI, 22-Feb-13, 1,077.05, 1,099.00, 1,077.05, 1,092.55], [ICICI, 22-Feb-13, 1,077.05, 1,099.00, 1,077.05, 1,092.55]]
03-03 02:35:38.666: V/arrayTemp inside while loop(337): [TATA MOTORS, 25-Feb-13, 296.8, 301.25, 295.1, 299.15]
03-03 02:35:38.666: V/Results stored(337): [[TATA MOTORS, 25-Feb-13, 296.8, 301.25, 295.1, 299.15], [TATA MOTORS, 25-Feb-13, 296.8, 301.25, 295.1, 299.15], [TATA MOTORS, 25-Feb-13, 296.8, 301.25, 295.1, 299.15], [TATA MOTORS, 25-Feb-13, 296.8, 301.25, 295.1, 299.15], [TATA MOTORS, 25-Feb-13, 296.8, 301.25, 295.1, 299.15], [TATA MOTORS, 25-Feb-13, 296.8, 301.25, 295.1, 299.15], [TATA MOTORS, 25-Feb-13, 296.8, 301.25, 295.1, 299.15]]
03-03 02:35:38.666: V/arrayTemp inside while loop(337): [TATA MOTORS, 22-Feb-13, 294.95, 297.55, 289.85, 292.9]
03-03 02:35:38.666: V/Results stored(337): [[TATA MOTORS, 22-Feb-13, 294.95, 297.55, 289.85, 292.9], [TATA MOTORS, 22-Feb-13, 294.95, 297.55, 289.85, 292.9], [TATA MOTORS, 22-Feb-13, 294.95, 297.55, 289.85, 292.9], [TATA MOTORS, 22-Feb-13, 294.95, 297.55, 289.85, 292.9], [TATA MOTORS, 22-Feb-13, 294.95, 297.55, 289.85, 292.9], [TATA MOTORS, 22-Feb-13, 294.95, 297.55, 289.85, 292.9], [TATA MOTORS, 22-Feb-13, 294.95, 297.55, 289.85, 292.9], [TATA MOTORS, 22-Feb-13, 294.95, 297.55, 289.85, 292.9]]
03-03 02:35:38.674: V/arrayTemp inside while loop(337): [NESTLE, 25-Feb-13, 4,606.40, 4,689.90, 4,600.00, 4,654.55]
03-03 02:35:38.674: V/Results stored(337): [[NESTLE, 25-Feb-13, 4,606.40, 4,689.90, 4,600.00, 4,654.55], [NESTLE, 25-Feb-13, 4,606.40, 4,689.90, 4,600.00, 4,654.55], [NESTLE, 25-Feb-13, 4,606.40, 4,689.90, 4,600.00, 4,654.55], [NESTLE, 25-Feb-13, 4,606.40, 4,689.90, 4,600.00, 4,654.55], [NESTLE, 25-Feb-13, 4,606.40, 4,689.90, 4,600.00, 4,654.55], [NESTLE, 25-Feb-13, 4,606.40, 4,689.90, 4,600.00, 4,654.55], [NESTLE, 25-Feb-13, 4,606.40, 4,689.90, 4,600.00, 4,654.55], [NESTLE, 25-Feb-13, 4,606.40, 4,689.90, 4,600.00, 4,654.55], [NESTLE, 25-Feb-13, 4,606.40, 4,689.90, 4,600.00, 4,654.55]]
03-03 02:35:38.674: V/arrayTemp inside while loop(337): [NESTLE, 22-Feb-13, 4,644.65, 4,747.70, 4,608.00, 4,629.10]
03-03 02:35:38.684: V/Results stored(337): [[NESTLE, 22-Feb-13, 4,644.65, 4,747.70, 4,608.00, 4,629.10], [NESTLE, 22-Feb-13, 4,644.65, 4,747.70, 4,608.00, 4,629.10], [NESTLE, 22-Feb-13, 4,644.65, 4,747.70, 4,608.00, 4,629.10], [NESTLE, 22-Feb-13, 4,644.65, 4,747.70, 4,608.00, 4,629.10], [NESTLE, 22-Feb-13, 4,644.65, 4,747.70, 4,608.00, 4,629.10], [NESTLE, 22-Feb-13, 4,644.65, 4,747.70, 4,608.00, 4,629.10], [NESTLE, 22-Feb-13, 4,644.65, 4,747.70, 4,608.00, 4,629.10], [NESTLE, 22-Feb-13, 4,644.65, 4,747.70, 4,608.00, 4,629.10], [NESTLE, 22-Feb-13, 4,644.65, 4,747.70, 4,608.00, 4,629.10], [NESTLE, 22-Feb-13, 4,644.65, 4,747.70, 4,608.00, 4,629.10]]
03-03 02:35:38.684: V/arrayTemp inside while loop(337): [RANBAXY, 25-Feb-13, 422, 435, 422, 433.85]
03-03 02:35:38.684: V/Results stored(337): [[RANBAXY, 25-Feb-13, 422, 435, 422, 433.85], [RANBAXY, 25-Feb-13, 422, 435, 422, 433.85], [RANBAXY, 25-Feb-13, 422, 435, 422, 433.85], [RANBAXY, 25-Feb-13, 422, 435, 422, 433.85], [RANBAXY, 25-Feb-13, 422, 435, 422, 433.85], [RANBAXY, 25-Feb-13, 422, 435, 422, 433.85], [RANBAXY, 25-Feb-13, 422, 435, 422, 433.85], [RANBAXY, 25-Feb-13, 422, 435, 422, 433.85], [RANBAXY, 25-Feb-13, 422, 435, 422, 433.85], [RANBAXY, 25-Feb-13, 422, 435, 422, 433.85], [RANBAXY, 25-Feb-13, 422, 435, 422, 433.85]]
03-03 02:35:38.694: V/arrayTemp inside while loop(337): [RANBAXY, 22-Feb-13, 412.5, 417, 411.1, 413.55]
03-03 02:35:38.704: V/Results stored(337): [[RANBAXY, 22-Feb-13, 412.5, 417, 411.1, 413.55], [RANBAXY, 22-Feb-13, 412.5, 417, 411.1, 413.55], [RANBAXY, 22-Feb-13, 412.5, 417, 411.1, 413.55], [RANBAXY, 22-Feb-13, 412.5, 417, 411.1, 413.55], [RANBAXY, 22-Feb-13, 412.5, 417, 411.1, 413.55], [RANBAXY, 22-Feb-13, 412.5, 417, 411.1, 413.55], [RANBAXY, 22-Feb-13, 412.5, 417, 411.1, 413.55], [RANBAXY, 22-Feb-13, 412.5, 417, 411.1, 413.55], [RANBAXY, 22-Feb-13, 412.5, 417, 411.1, 413.55], [RANBAXY, 22-Feb-13, 412.5, 417, 411.1, 413.55], [RANBAXY, 22-Feb-13, 412.5, 417, 411.1, 413.55], [RANBAXY, 22-Feb-13, 412.5, 417, 411.1, 413.55]]
03-03 02:35:38.704: V/arrayTemp inside while loop(337): [REDDY, 25-Feb-13, 1,805.00, 1,814.00, 1,791.55, 1,804.35]
03-03 02:35:38.704: V/Results stored(337): [[REDDY, 25-Feb-13, 1,805.00, 1,814.00, 1,791.55, 1,804.35], [REDDY, 25-Feb-13, 1,805.00, 1,814.00, 1,791.55, 1,804.35], [REDDY, 25-Feb-13, 1,805.00, 1,814.00, 1,791.55, 1,804.35], [REDDY, 25-Feb-13, 1,805.00, 1,814.00, 1,791.55, 1,804.35], [REDDY, 25-Feb-13, 1,805.00, 1,814.00, 1,791.55, 1,804.35], [REDDY, 25-Feb-13, 1,805.00, 1,814.00, 1,791.55, 1,804.35], [REDDY, 25-Feb-13, 1,805.00, 1,814.00, 1,791.55, 1,804.35], [REDDY, 25-Feb-13, 1,805.00, 1,814.00, 1,791.55, 1,804.35], [REDDY, 25-Feb-13, 1,805.00, 1,814.00, 1,791.55, 1,804.35], [REDDY, 25-Feb-13, 1,805.00, 1,814.00, 1,791.55, 1,804.35], [REDDY, 25-Feb-13, 1,805.00, 1,814.00, 1,791.55, 1,804.35], [REDDY, 25-Feb-13, 1,805.00, 1,814.00, 1,791.55, 1,804.35], [REDDY, 25-Feb-13, 1,805.00, 1,814.00, 1,791.55, 1,804.35]]
03-03 02:35:38.714: V/arrayTemp inside while loop(337): [REDDY, 22-Feb-13, 1,815.00, 1,824.95, 1,790.10, 1,816.20]
03-03 02:35:38.724: V/Results stored(337): [[REDDY, 22-Feb-13, 1,815.00, 1,824.95, 1,790.10, 1,816.20], [REDDY, 22-Feb-13, 1,815.00, 1,824.95, 1,790.10, 1,816.20], [REDDY, 22-Feb-13, 1,815.00, 1,824.95, 1,790.10, 1,816.20], [REDDY, 22-Feb-13, 1,815.00, 1,824.95, 1,790.10, 1,816.20], [REDDY, 22-Feb-13, 1,815.00, 1,824.95, 1,790.10, 1,816.20], [REDDY, 22-Feb-13, 1,815.00, 1,824.95, 1,790.10, 1,816.20], [REDDY, 22-Feb-13, 1,815.00, 1,824.95, 1,790.10, 1,816.20], [REDDY, 22-Feb-13, 1,815.00, 1,824.95, 1,790.10, 1,816.20], [REDDY, 22-Feb-13, 1,815.00, 1,824.95, 1,790.10, 1,816.20], [REDDY, 22-Feb-13, 1,815.00, 1,824.95, 1,790.10, 1,816.20], [REDDY, 22-Feb-13, 1,815.00, 1,824.95, 1,790.10, 1,816.20], [REDDY, 22-Feb-13, 1,815.00, 1,824.95, 1,790.10, 1,816.20], [REDDY, 22-Feb-13, 1,815.00, 1,824.95, 1,790.10, 1,816.20], [REDDY, 22-Feb-13, 1,815.00, 1,824.95, 1,790.10, 1,816.20]]
03-03 02:35:38.724: V/arrayTemp inside while loop(337): [HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45]
03-03 02:35:38.735: V/Results stored(337): [[HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45], [HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45], [HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45], [HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45], [HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45], [HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45], [HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45], [HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45], [HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45], [HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45], [HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45], [HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45], [HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45], [HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45], [HDFC, 25-Feb-13, 663.25, 665.2, 654.1, 656.45]]
03-03 02:35:38.735: V/arrayTemp inside while loop(337): [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3]
03-03 02:35:38.744: V/Results stored(337): [[HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3], [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3], [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3], [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3], [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3], [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3], [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3], [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3], [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3], [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3], [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3], [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3], [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3], [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3], [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3], [HDFC, 22-Feb-13, 662.2, 666.4, 657.55, 659.3]]
03-03 02:35:38.744: V/arrayTemp inside while loop(337): [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10]
03-03 02:35:38.754: V/Results stored(337): [[MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10], [MARUTI, 25-Feb-13, 1,442.00, 1,459.90, 1,438.25, 1,444.10]]
03-03 02:35:38.764: V/arrayTemp inside while loop(337): [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40]
03-03 02:35:38.774: V/Results stored(337): [[MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40], [MARUTI, 22-Feb-13, 1,463.40, 1,467.00, 1,430.10, 1,438.40]]
03-03 02:35:38.774: V/arrayTemp inside while loop(337): [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7]
03-03 02:35:38.785: V/Results stored(337): [[HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7], [HUL, 25-Feb-13, 456.05, 457.8, 450, 451.7]]
03-03 02:35:38.785: V/arrayTemp inside while loop(337): [HUL, 22-Feb-13, 467, 467.15, 454, 455.4]
03-03 02:35:38.804: V/Results stored(337): [[HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4]]
03-03 02:35:38.814: V/Final Results(337): [[HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4], [HUL, 22-Feb-13, 467, 467.15, 454, 455.4]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:59:19.847

为什么不创建具有表结构的 POJO 类？喜欢

```
Class TestClass{
private String symbol;
private String date;
//etc
} 
```

现在创建一个数组列表来包含这种类型的对象，如下所示

```
public ArrayList<TestClass> results=new ArrayList<TestClass>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:12:55.013

发生此行为是因为您没有存储`arrTemp`in的副本`results`，而只是存储了一个引用。您总是在同一个对象上操作，而不是单独的列表。现在每次`arrTemp.clear()`在 while 循环中调用时，您实际上是在清除存储在`results`. 然后向 中添加新值`arrTemp`，然后再次向 中添加另一个引用`arrTemp`，`results`从而导致两个（三个、四个...）对`results`.

一个简单的解决方案是不声明`arrTemp`为成员变量，而是在 while 循环中声明，如下所示：

```
while (cursor.moveToNext()) 
{
    ArrayList<String> arrTemp = new ArrayList<String>();

    //...
    // fill arrTemp
    //...

    results.add(arrTemp);
} 
```