# StackOverflow 问答 16018000-16018999

# python - 如何实现 urllib2.urlopen 的超时控制

> ID：16018007
> 
> 赞同：5
> 
> 时间：2013-04-15T14:39:13.010
> 
> 标签：python, timer, timeout, urllib2

如何在 Python 中实现对 urllib2.urlopen 的控制？我只是想监控，如果 5 秒内没有 xml 数据返回，切断此连接并再次连接？我应该使用一些计时器吗？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-15T14:47:08.647

```
urllib2.urlopen("http://www.example.com", timeout=5) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-15T14:40:26.457

从[`urllib2`文档](http://docs.python.org/2/library/urllib2.html)...

> 可选的 timeout 参数以秒为单位指定连接尝试等阻塞操作的超时时间（如果未指定，将使用全局默认超时设置）。这实际上只适用于 HTTP、HTTPS 和 FTP 连接。

# c# - MemoryCache.Set 返回已移除的缓存项

> ID：16018009
> 
> 赞同：3
> 
> 时间：2013-04-15T14:39:15.857
> 
> 标签：c#, .net, caching

我正在使用 .NET 4.0[`MemoryCache`](http://msdn.microsoft.com/en-us/library/dd780634%28v=vs.100%29.aspx)类，我想以线程安全的方式添加或替换缓存中的现有项目，但我也想知道我是替换了现有项目还是添加了新项目。

据我所知，该[`Set`](http://msdn.microsoft.com/en-us/library/ee395903%28v=vs.100%29.aspx)方法旨在以原子方式替换缓存中的项目（如果存在），而该[`AddOrGetExisting`](http://msdn.microsoft.com/en-us/library/ee395901%28v=vs.100%29.aspx)方法将以原子方式获取现有项目而不替换它。

但是，Set 方法不会返回被替换的项目，它只是替换它。可以将已删除的事件与 for 项目挂钩[`CacheItemPolicy`](http://msdn.microsoft.com/en-us/library/system.runtime.caching.cacheitempolicy%28v=vs.100%29.aspx)，但很难将其与替换它的新项目匹配。

我可以用下面的方法来近似它，但它似乎有点重（因为要求缓存基本上添加一个项目两次），我想问是否有人知道更简单的方法来做到这一点。

```
public object SetAndGetExisting(string key, object value, CacheItemPolicy policy, string regionName = null)
{
    lock (_cacheLock)
    {
        var existing = _cache.AddOrGetExisting(key, value, policy, regionName);

        if (existing != null)
        {
            _cache.Set(key, value, policy, regionName);
            return existing;
        }

        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:15:46.867

在考虑之后，在您的示例中，无论如何您都在更新它，所以`AddOrGetExisting`这不是最好的，正如您所提到的，无论如何您都在稍后设置它。下面是一个简单的实现，我**认为**它符合您的要求。如果我错了，请告诉我！

```
public class MemoryCacheWithEvents
{
    private static MemoryCache _cache = new MemoryCache("myCache");
    private static object _syncLock = new object();

    public EventHandler<CacheChangeEventArgs> AddingCacheItem;
    public EventHandler<CacheChangeEventArgs> UpdatingCacheItem;

    public object GetAndSetExisting(string key, object value, CacheItemPolicy policy, string regionName = null)
    {
        lock (_syncLock)
        {
            var cacheItem = new CacheItem(key, value, regionName);

            var existing = _cache.GetCacheItem(key, null);

            if (existing == null)
            {
                OnAddingCacheItem(new CacheChangeEventArgs(null, cacheItem));
            }
            else
            {
                OnUpdatingCacheItem(new CacheChangeEventArgs(existing, cacheItem));   
            }

            _cache.Set(cacheItem, policy);

            return existing;
        }
    }

    public virtual void OnAddingCacheItem(CacheChangeEventArgs eventArgs){
        var handler = AddingCacheItem;

        if (handler != null)
        {
            handler(this, eventArgs);
        }
    }

    public virtual void OnUpdatingCacheItem(CacheChangeEventArgs eventArgs){
        var handler = UpdatingCacheItem;

        if (handler != null)
        {
            handler(this, eventArgs);
        }
    }
}

public class CacheChangeEventArgs : EventArgs
{
    public object OldCacheItem { get; set; }
    public object NewCacheItem { get; set; }

    public CacheChangeEventArgs(object oldCacheItem, object newCacheItem)
    {
        this.OldCacheItem = oldCacheItem;
        this.NewCacheItem = newCacheItem;
    }
} 
```

# c - 为什么当我不使用 getch() 时输出只是闪烁？

> ID：16018011
> 
> 赞同：1
> 
> 时间：2013-04-15T14:39:17.947
> 
> 标签：c, windows, dev-c++, getch

当我在 Dev C++ 中编译并运行以下代码时，

```
#include <stdio.h>
main()
{
     printf("Hello world!");
} 
```

输出只是闪烁。当我添加`getch`时，它会保留。

```
#include <stdio.h>
main()
{
     printf("Hello world!");
     getch();
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:44:58.253

`getch()`导致您的程序在终止之前等待用户输入。Win32 控制台应用程序的一个恼人的事情是，一旦程序终止，控制台就会关闭（因此它只是闪烁）。

Win9x 下的旧 DOS 程序并非如此（控制台默认保持打开状态，除非在 DOS 快捷方式属性中选择了复选框）。

如果您在命令提示符中运行程序的两个版本，您将看到第二个版本仅在您按下一个键后才返回到提示符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:43:54.647

您的控制台正在消失，因为它已完成并且程序正在退出。正如您所见，使用`getch()`等待输入会阻止程序退出，但它不是可移植的，作为替代方案，您可以使用`std::cin.get()`，这略有不同，因为您需要按回车键。

# php - 如何在 codeigniter 中添加一个类？

> ID：16018015
> 
> 赞同：1
> 
> 时间：2013-04-15T14:39:19.477
> 
> 标签：php, codeigniter

我正在使用 Enom API，这个 API 使用它自己的接口（不是 Codeigniters），如下所示：

```
<?php
require_once( dirname(__FILE__) . '/class.EnomInterface.php' );

Class EnomService extends EnomInterface{

function checkDomain($sld, $tld, $spinner = false, $allowDash = true, $word1 = '', $word2 = '', $word3 = ''){
$this->_setCommand('Check');

$this->addParam('SLD', $sld);
if( strstr($tld, ',') )
{
  $this->addParam('TLDList', $tld);
}
else
{
  $this->addParam('TLD', $tld);
}

if( $spinner && !strstr($tld, ',') )
{
    $this->addParam('DomainSpinner', '1');
    $this->addParam('AllowDash', $allowDash ? '1' : '0');
    if('' != $word1)
        $this->addParam('Word1', $word1);
    if('' != $word2)
        $this->addParam('Word2', $word2);
    if('' != $word3)
        $this->addParam('Word3', $word3);
}

if( !$this->process() || '0' != $this->response['ErrCount'] )
{
  return $this->_returnError();
}

$result = array();

if($spinner)
{
    $i = 1;
    while( isset($this->response['SuggestedName' . $i]) )
    {
        $result[$this->response['SuggestedName' . $i]] = true;
        $i++;
    }
}

if( !isset($this->response['DomainCount']) || '1' == $this->response['DomainCount'] )
{
  $result["$sld.$tld"] = ('210' == $this->response['RRPCode']) ? true : false;
  return $result;
}

for($i=1; $i<=$this->response['DomainCount']; $i++)
{
  $result[ $this->response[('Domain'.$i)] ] = ('210' == $this->response[('RRPCode'.$i)]) ? true : false;
}

return $result;
}
} 
```

这有更多的功能，但我想你们明白了。

无论如何，我正在尝试像这样加载它：

```
$this->load->library('Enom/class.EnomService'); 
```

课程在：

```
libraries/Enom/class.EnomService.php
libraries/Enom/class.EnomInterface.php 
```

它告诉我它有一个内部服务器错误。

有人可以帮我实现这个吗？

PS：我是 Codeigniter 的新手.. :)

谢谢！

**编辑：**

总而言之，ENOM 和其他 API 使用了许多接口和它们之间的变量，这可能会导致与 codeigniter 的加载器类发生冲突。

我设法解决这个问题不是通过加载器类而是直接通过 require 和 include 变量来实现。

结果是这样的：

```
require_once('application/libraries/enom/class.EnomService.php');
$enom = new EnomService($registrar_username, $registrar_password, false, true);
$enom->debug = true; 
```

代替：

```
$this->load->library('Enom/class.EnomService'); 
```

如果有人需要任何进一步的解释，我会非常乐意提供帮助。

感谢一路上提供帮助的所有人，特别是 Phill。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:50:03.717

只需包含类文件，就像 EnomService 获取 EnomInterface 一样，您应该能够将其`EnomService`用作[Enom 文档](http://www.phpkode.com/source/s/enom-api/enom-api/example.checkDomain.php)。

```
include APPPATH.'libraries/Enom/class.EnomService.php';

$enom = new EnomService('username', '********', false, true);
$enom->debug = true;

$result = $enom->checkDomain('systurn', 'com', true);

var_dump($result); 
```

* * *

[`APPPATH`](http://ellislab.com/forums/viewthread/189755/)指`application`CodeIgniter 中的目录。

# java - 什么是正确的正则表达式？

> ID：16018016
> 
> 赞同：0
> 
> 时间：2013-04-15T14:39:20.853
> 
> 标签：java, regex

我尝试找到一个正则表达式以提取文件名。我的字符串是`path/string.mystring`

举个例子

```
totot/tototo/tatata.tititi/./com.myString 
```

我试着得到`myString`.

我试过了 `String[] test = foo.split("[*.//./.]");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:40:53.683

[此处](https://stackoverflow.com/questions/1011287/get-file-name-from-a-file-location-in-java)已回答了类似的问题。我会说使用正则表达式来获取文件名是错误的方式（例如，如果您的代码曾经尝试针对 Windows 文件路径运行，那么您的正则表达式中的斜杠将是错误的方式） - 为什么不只是利用：

```
new File(fileName).getName(); 
```

获取文件名，然后使用更简单的拆分提取您想要的文件名部分：

```
String[] fileNameParts = foo.split("\\.");
String partThatYouWant = fileNameParts [fileNameParts.length - 1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:41:39.510

你可以用这个得到最后一句话：`\w+$`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:43:36.513

> 我的字符串是 path/string.mystring

如果您的字符串模式按照上述规则固定，那么如何：

```
string.replaceAll(".*\\.","") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T14:41:37.770

如果你想分割句点或斜线，正则表达式应该是

```
foo.split("[/\\.]") 
```

或者，您可以这样做：

```
String name = foo.substring(foo.lastIndexOf('.') + 1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T15:05:21.363

试试这个代码：

```
import java.util.regex.Pattern;
import java.util.regex.Matcher;

public class Regexp
{
    public static void main(String args[]) 
    {
    String x = "totot/tototo/tatata.tititi/./com.myString";
    Pattern pattern = Pattern.compile( "[a-z0-9A-Z]+$");
    Matcher matcher = pattern.matcher(x);

    while (matcher.find()) 
        {
        System.out.format("Text found in x: => \"%s\"\n",
                  matcher.group(0));
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T14:44:32.070

使用&的**非正则表达式解决方案**将是。`String#subString``String#lastIndexOf`

```
String path="totot/tototo/tatata.tititi/./com.myString";
String name = path.substring(path.lastIndexOf(".")+1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-15T14:46:02.373

也许您应该只使用 String API。像这样的东西：

```
public static void main(String[] args){
    String path = "totot/tototo/tatata.tititi/./com.myString";
    System.out.println(path.substring(path.lastIndexOf(".") + 1));
} 
```

它适合你的情况吗？使用索引有很多问题。但是，如果您始终确定会有一个`.`，您可以毫无问题地使用它。

# sublimetext2 - 崇高文本在每一行中首先选择

> ID：16018020
> 
> 赞同：20
> 
> 时间：2013-04-15T14:39:32.110
> 
> 标签：sublimetext2

在 Vim 中，有一个非常好的功能可以查找/替换每行中的第一个匹配项。这实际上是默认行为。如何在崇高文本中获得相同的行为？

我需要能够在每一行中标记/找到第一个（也是唯一的！）字符，例如“=”，以便我可以轻松地标记/复制/剪切该特定字符之前和之后的内容。请注意，每一行中可能有很多这个特定的字符。

具体例子：

我有一个长长的 java 属性列表，格式如下：

```
my.property.link1=<a href="asdfs">Link 1</a>
my.property.link22=<a href="asdfs">Link 22</a>
my.property.link333=<a href="asdfs">Link 333</a>
my.property.link4444=<a href="asdfs">Link 4444</a> 
```

我想在每行中标记第一个“=”，以便能够选择所有前面的文本（与“=”之前的文本数量无关）来剪切或复制文本。这种行动的粘贴结果将是：

```
my.property.link1
my.property.link22
my.property.link333
my.property.link4444 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-02-19T07:31:50.243

我实际上写了一个名为 SelectUntil 的崇高插件来解决这个确切的问题：[https ://github.com/xavi-/sublime-selectuntil](https://github.com/xavi-/sublime-selectuntil)

安装后，您可以执行以下操作

*   选择您要编辑或部分复制的所有行
*   按`Cmd/Ctrl`+ `Shift`+ `L`-- 这会给每一行它自己的光标。
*   如果您使用的是 OSX ，请按`Home`或`Ctrl`+将每个光标移至行首`A`
*   按`Ctrl/Alt`+ `Shift`+`S`激活 SelectUntil
*   `=`通过键入+告诉 SelectUntil 选择直到等号`Enter`
*   点击`shift`+`←</kbd> to deselect the equals sign`
*   此时应选择所有属性的名称，以便您可以随意复制/粘贴

体验应该是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/nD6DP.gif)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-16T19:04:17.890

假设您有以下文本：

```
my.property.link1=<a href="asdfs">Link 1</a>
my.property.link22=<a href="asdfs">Link 22</a>
my.property.link333=<a href="asdfs">Link 333</a>
my.property.link4444=<a href="asdfs">Link 4444</a> 
```

按`Ctrl`+ `F`（或单击查找->查找）

启用正则表达式

在搜索字段中输入：`^.*?(?==)`

按`Alt`+ `Enter`（或单击查找全部）

现在之前的所有文本`=`都被选中了，你只需要复制它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-20T19:48:11.040

[CTRL + A]; [CTRL + Shift + L] ; [家]

制作一个 AutoItInputMacro.exe 映射到 [Home] 1 按按钮 GG 没有重新匹配。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-15T14:47:56.857

试过这个，它似乎工作：

使用 ^(.*)(STRING_TO_MATCH) 查找正则表达式

\1 会在你的比赛之前给出所有的东西，\2 会给出比赛本身。

您也可以使用 ^(.*)(STRING_TO_MATCH)(.*) 然后 \3 将是之后的一切。

编辑 - 如果你想选择和复制，我试过这个：`^[^CHAR]*`

这将找到从队列开头到不包括您的角色的所有内容。从那里您可以右键单击以复制。由于查找面板有焦点，我还没有找到一个按键序列来完成它，也许你可以弄清楚。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-15T17:34:45.883

假设您有以下文本：

```
AAAABBBCCCC
ABC
BBBAAACCC
ABCABCABC 
```

..并且您想用 X 替换每行中第一次出现的 A：

按`Ctrl`+ `H`（或单击查找->替换）

找什么：`A(.*)`

用。。。来代替：`X\1`

然后点击全部替换。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-27T17:27:54.187

全选，`Ctrl + A`然后按`Ctrl + Shift + L`，最后转到“选择-> 反转选择”，如图所示！ [![反转选择](https://i.stack.imgur.com/yCGyX.png)](https://i.stack.imgur.com/yCGyX.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-15T10:00:13.907

对于这个问题，您可以使用`cc.gbc 1/=/`ConyEdit（一个插件）的命令行来获取 regex 匹配的第一列之前的文本。

# python - Python 请求库将 PDF 传递给 Django 服务器

> ID：16018025
> 
> 赞同：2
> 
> 时间：2013-04-15T14:39:42.203
> 
> 标签：python, django, http, flask, python-requests

因此，我知道服务器代码有效，因为该站点目前正在生产中并且运行良好。另一方面，我已经开发了一个测试脚本来对 API 进行单元测试。我正在尝试使用 HTTP POST 方法将 PDF 文件发送到服务器的 nginx -> gunicorn -> flask 应用程序环境。

服务器通过以下方式获取附件：

```
@app.route('<ObjectId:_id>/attachments', methods=['POST'])
@csrf.exempt
@opportunity_owner_required
@auth.login_required
@nocache
def upload_attachment(_id):
    upload = request.files.get('file')
    if not upload:
        abort(400, "Missing attached file.") 
```

我尝试将pdf文件传递给服务器：

```
def test_add_opportunity_attachment(self):
    files = {'file': ("mozilla.pdf", open('%s/mozilla.pdf' % PATHTOFILE, 'rb'))}
    headers = {'Content-Type': 'application/pdf', "enctype": "multipart/form-data", "Content-Disposition":"attachment;filename=mozilla.pdf"}
    r=self.session.post(self.formatURL('/attachments'), headers=headers, files=files)
    assert r.status_code == 200 
```

但我总是得到状态 400。

当使用 ngrep 跟踪输出时，我确实看到了似乎是通过网络传递的 PDF 的编码形式，但服务器看不到它。

**请注意**：由于其专有性质，某些信息丢失。但是测试功能中使用的所有功能都可以正常工作。formatURL 按预期对其进行格式化，并且 url 匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:16:09.243

所以这个问题比我想象的要模糊一些。服务器上的一些后端逻辑，将文件保存到目录中，然后继续使用@app.route() 获取 URL 位置。我的本地副本缺少一些权限，因此当它尝试保存 PDF 文件时，上传会失败。

另一个问题，如 sigmavirus24 所述，自定义标头设置不正确，因此有效的最终版本如下所示：

```
def test_add_opportunity_attachment(self):
    payload = {"title": "Testing upload title", "description": "Testing upload description"}
    file_contents = open('%s/mozilla.pdf' % PATHTOFILE, 'rb')
    files = {'file': ('mozilla.pdf', file_contents)}
    r=self.session.post(self.formatURL('/attachments'), files=files, data=payload)
    if r.status_code != 200:
        assert r.status_code == 409 #Successful, but no duplicates allowed. 
```

# asp.net-mvc - 带参数的 Lambda 表达式编译

> ID：16018027
> 
> 赞同：2
> 
> 时间：2013-04-15T14:39:53.910
> 
> 标签：asp.net-mvc, lambda, extension-methods, func

我想用助手扩展 MVC。假设我想构建一个扩展方法，该方法从模型中获取一个属性并呈现一个段落。

我已经写了这段代码，但它不会编译。我不知道该怎么做：

```
public static class PExtension
{
    public static string PFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression) where TModel: class 
    {
        var f = expression.Compile();
        // won't compile the line below:
        string propretyValue = f();
        return "<p>" + propretyValue + "</p>";
    }
} 
```

作为记录，我的观点应该使用类似的东西：

```
@Html.PFor(m => m.Description); 
```

谢谢。

## 编辑

错误描述：`*Delegate 'Func' does not take 0 arguments*`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:23:22.877

最后，代码如下所示：

```
 public static class PExtension
    {
        public static MvcHtmlString PFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression) where TModel : class
        {
            ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);

            return MvcHtmlString.Create(string.Format("<p>{0}</p>", metadata.Model != null ? metadata.Model.ToString() : string.Empty));
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:34:01.320

表达式参数指定表达式的返回值为 TValue，但您试图将编译后的表达式的返回值分配给字符串。我猜编译错误是关于“无法将 TValue 转换为字符串”的？

试试这个：

```
object propertyValue = f();
return string.Format( "<p>{0}</p>", propertyValue != null ? propertyValue.ToString() : string.Empty ); 
```

更新：

您发布的错误表明您需要将模型对象传递给表达式才能对其进行评估。在查看[ASP.NET MVC 源代码](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/18cb600a3f7f60b621d7d04d024b440fd6f185b3#src/System.Web.Mvc/Html/TemplateHelpers.cs "ASP.NET MVC 源代码")以了解他们如何执行扩展方法时，他们从 ViewData 获取模型，如下所示：

```
ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData); 
```

所以试试这个：

```
ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
object propertyValue = f((TModel)metadata.Model);
return string.Format( "<p>{0}</p>", propertyValue != null ? propertyValue.ToString() : string.Empty ); 
```

# xml - 通过设置 XmlRoot 从 Stream 序列化 Xml 仍然抛出异常

> ID：16018029
> 
> 赞同：1
> 
> 时间：2013-04-15T14:40:01.370
> 
> 标签：xml, xml-serialization, datacontractserializer

我有一个定义如下的类：

```
[XmlRoot(ElementName="state_territories")]
public class Location
{
    ...
} 
```

我正在检索的 XML（从流中提取并使用写入器写入调试器）是：

```
<?xml version='1.0' encoding='utf-8' ?><state_territories>...</state_territories> 
```

但是，当我尝试序列化我的 XML 响应时，例如：

```
var serializer = new DataContractSerializer(typeof(Location));
Locations = serializer.ReadObject(response.GetResponseStream()) as Location; 
```

我收到以下异常：

> “来自命名空间‘ [http://schemas.datacontract.org/2004/07/App.Data.Territories](http://schemas.datacontract.org/2004/07/App.Data.Territories) ’的预期元素‘位置’。遇到名为‘state_territories’、命名空间‘’的‘元素’。”

我可能遗漏了一些简单的东西，但我认为如果我定义 XmlRoot，这将覆盖推断的根元素位置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:02:38.493

`[XmlRoot(...)]`仅由以下人员处理`XmlSerializer`：

```
var serializer = new XmlSerializer(typeof(Location));
Locations = (Location) serializer.Deserialize(response.GetResponseStream()); 
```

如果您正在处理常规 xml 并且需要控制名称/属性等，那么`XmlSerializer`是最佳选择；`DataContractSerializer`仅提供对 xml 映射的最小控制。

# asp.net - 联系表格 ASP.NET MVC 4

> ID：16018033
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:40:05.123
> 
> 标签：asp.net, email, send, contact

我的视图中有这个

个人资料*   标题*   名字*   姓*   电子邮件*   电话*   移动的*   信息提交

有人可以帮助我使用控制器功能吗？我有这种方法，用于联系页面，我不知道在控制器页面中发布什么。如果有人可以告诉我如何处理第一个标签或解释我在cs页面中做什么。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T14:54:24.837

有一个与您的价值观联系的模型，例如：

联系人型号

```
string title { get; set; }
string firstName  { get; set; }
string lastName { get; set; }
string email { get; set; }
string phone { get; set; }
string mobile { get; set; }
string message { get; set; } 
```

在您的控制器中，您可以创建一个方法（与您的视图相同的名称）

联系人控制器

```
public ActionResult Contact(ContactModel newModel)
{
    //Do what you need to do
    return View();
} 
```

在您看来，这样做：

接触

```
@model YourProjectName.Models.ContactModel

@using (Html.BeginForm("Contact", "Contact")) //send data to controller (Method name, Controller name)
{
    <fieldset>

        <div class="editor-label">
            @Html.LabelFor(model => model.title)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.title)
        </div>

        // Do the same to all other values

        <input type="submit" value="Send" />
    </fieldset>
} 
```

# java - Android：同步线程和处理程序

> ID：16018040
> 
> 赞同：4
> 
> 时间：2013-04-15T14:40:18.637
> 
> 标签：java, android, synchronization, handler, seekbar

我的应用程序遇到了一些问题。我对 Android 开发非常陌生，所以我希望这是一个简单的错误。所以我正在尝试编写一个应用程序，通过 Wifi（第一个线程）获取一些原始数据，进行一些计算（第二个线程），从计算的数据（第三个线程）中创建一个位图并更新显示（处理程序）。一些参数由 SeekBars 调整。一切正常。但有时当我更改 seekBarValues 时，图片不再更新。线程和处理程序仍在运行，所以我没有收到错误。

这里有一些代码：

主要活动：

```
public class MainActivity extends Activity implements OnClickListener {
    private Handler outputHandler = new Handler();
    private SeekBar  seekBarBrightness,
    seekBarContrast,
    seekBarGamma;

    public static volatile double gamma = 1;
    public static volatile double brightness = 500;
    public static volatile double contrast = 500; 
    public static volatile double min = 0;
    public static volatile double max = 0;

    public static volatile boolean isRunning = false;

    public static volatile int r = 0;
    public static volatile int g = 0;
    public static volatile int b = 0;
    public static volatile int width = 400;
    public static volatile int height = 250;

    public volatile double inputExchangeFrame[][ ]= new double[400][250], outputExchangeFrame[][]= new double[400][250];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        seekBarBrightness = (SeekBar) findViewById(R.id.seekBarBrightness); 
        seekBarContrast = (SeekBar) findViewById(R.id.seekBarContrast);
        SeekBarGamma = (SeekBar) findViewById(R.id.seekBarGamma);

        newImage = Bitmap.createBitmap(width, height, BitmapConfig.ARGB_8888);              
        picture.setImageBitmap(newImage);

    }    

    @Override   
    public void onClick(View v) { 
        if(v==toggleButtonStartStop){
            if(toggleButtonStartStop.isChecked()==true){ 
                isRunning=true; 
                getFrame();
                calculateFrame();
                showFrame();
            }
            else{ 
                isRunning = false;
            }
        }
    }            
} 
```

MainACtivity 中还声明了其他方法：getFrame()：

```
private synchronized void getFrame(){
     inputThread = new Runnable(){
          public void run(){
               while(isRunning == true){

                   //inputFrame fron WIFI

                    inputExchangeFrameLock.lock();
                    //synchronized(inputExchangeFrame){
                         for(int x_1=0 ; x_1<width ; x_1++){
                              for(int y_1=0 ; y_1<height ; y_1++){
                                   inputExchangeFrame[x_1][y_1]=inputFrame[x_1][y_1];
                              }
                         }
                    //}
                   inputExchangeFrameLock.unlock();

                   try {                        
                        Thread.sleep(120);
                   } 
                   catch (InterruptedException e) {
                        e.printStackTrace();
                   }
              }
         }
     };new Thread(inputThread).start();
}; 
```

计算帧：

```
private synchronized void calculateFrame(){
     calculationThread = new Runnable(){
          public void run(){
               while(isRunning == true){    
               //get Data from InputThread to applicate several Filter
               inputExchangeFrameLock.lock();
               //synchronized(inputExchangeFrame){
                    for(int x_2=0 ; x_2<width ; x_2++){
                         for(int y_2=0 ; y_2<height ; y_2++){
                              calculationFrame[x_2][y_2]=inputExchangeFrame[x_2][y_2];
                         }
                    }
               //}
               inputExchangeFrameLock.unlock();

                 //Do some calculations on calculationFrame  

               outputExchangeFrameLock.lock();
               //synchronized(outputExchangeFrame){ 
                    for(int x_3=0 ; x_3<width ; x_3++){
                         for(int y_3=0 ; y_3<height ; y_3++){
                              outputExchangeFrame[x_3][y_3] = calculationFrame[x_3][y_3];
                         }
                    }
               //}
               outputExchangeFrameLock.unlock();
               }
          }
     }; new Thread(calculationThread).start();
}; 
```

显示帧（）：

```
private synchronized void showFrame(){
     outputThread = new Runnable(){
          public void 
               while(isRunning == true){
                    contrast =  seekBarContrast.getProgress() +1;
                    brightness = seekBarBrightness.getProgress() + 1;
                    gamma = seekBarGamma.getProgress() + 1;

                    outputExchangeFrameLock.lock();
                    //synchronized(outputExchangeFrame){
                    for(int x_4=0 ; x_4<width ; x_4++){
                         for(int y_4=0 ; y_4<height ; y_4++){
                              outputFrame[x_4][y_4] = outputExchangeFrame[x_4][y_4];
                          }
                     }  
                     //}
                     outputExchangeFrameLock.unlock();

                     for (int x_14=0 ; x_14<width ; x_14++){
                          for(int y_14=0; y_14<height; y_14++){

                             //Calculation of r,g,b  using gamma, brightness and contrast
                          }
                          synchronized(newImage){
                               newImage.setPixel(x_14, y_14, Color.rgb(r,g,b));
                          }
                     }

                     outputHandler.removeCallbacks(pictureUpdate);
                     outputHandler.post(pictureUpdate);

                     try {
                          Thread.sleep(50);
                     } 
                     catch (InterruptedException e) {
                          e.printStackTrace();
                     }
                }
           }
     }; new Thread(outputThread).start();   
}; 
```

和处理程序：

> private Runnable pictureUpdate = new Runnable(){
> public void run(){ synchronized(newImage){ picture.setImageBitmap(newImage);
> } }
> };

我知道那是很多文本。但我真的不知道从哪里开始搜索以及我可以做些什么来找到错误。

任何建议都会很棒！

谢谢

迈克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T15:10:07.237

您正在实现几个线程，并且您尝试执行的操作的顺序不是确定性的。

例如，可以在 getFrame.Runable().run() 之前执行“showFrame.Runable().run()”。

1.  “同步”关键字没有帮助，因为当工作在单独的线程中停止时。同步函数调用将返回，锁将被释放。
2.  “锁”也无助于确保正确的顺序。

我的建议是使用 AsyncTask，[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。你可以这样做：

```
private class ProcessFrameTask extends AsyncTask {

 protected void doInBackground(Object... objs) {
     getFrame(); // Copy the frame
     calculateFrame(); // Do your magic
 }

 protected void onPostExecute(Long result) {
     showFrame(); // Post the result back to main thread
 } 
```

}

没有多线程和协作，只有一个 Worker 线程完成所有工作，并将结果发布回主线程。

# dojo - 无法在分页 dojo 增强网格上调用函数

> ID：16018041
> 
> 赞同：2
> 
> 时间：2013-04-15T14:40:19.760
> 
> 标签：dojo, pagination, dojox.grid.datagrid, dojox.grid

我尝试了所有可能的方法，但它不起作用。当我移动到 dojo dataGrid 中的另一个页面时（在分页期间），我想调用一个函数。我尝试了下面的代码，但它不工作......

方法一：

```
nextPage = function(src) {
    alert("going");
};

grid.startup(); 
```

方法二：

```
 grid.on("nextPage", function(evt){

 alert("next");
  }, true); 
```

方法你：

```
 grid.pagination.plugin.nextPage = function(src) {
                 alert("here");
            }; 
```

这些方法都不起作用。请提供将通过单击任何页码移动到另一页来调用的示例代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:39:26.150

这是一个带有工作jsfiddle的肮脏解决方案：

[http://jsfiddle.net/KbZSC/](http://jsfiddle.net/KbZSC/)

主要代码：

```
 grid.startup();

    var paginatorElements = dojo.query(".dojoxGridInactiveSwitch");
    paginatorElements.push(dojo.query(".dojoxGridInactived"));
    paginatorElements.push(dojo.query(".dojoxGridWardButton"));

    dojo.forEach(paginatorElements, function(element, i){
       dojo.on(element,"click",function(e){
       grid.selection.deselectAll();
       });
}); 
```

我正在获取分页过程中涉及的所有元素，并为每个元素添加一个 onclick 事件，该事件使用取消选择网格中的所有元素

```
grid.selection.deselectAll(); 
```

从我为您发布的另一个答案中。

**请谨慎使用此代码，因为如果他们更改分页器 html 元素的类，它将中断**！

你真的很执着！

# jquery - 制作 $(window).scroll()，滚动特定元素

> ID：16018042
> 
> 赞同：0
> 
> 时间：2013-04-15T14:40:22.450
> 
> 标签：jquery, html, dom

我有一个文档，所有元素位置：固定，html 和正文有溢出：隐藏。

在页面的中心，我有一个具有指定高度的元素，也带有溢出：隐藏。但是，这个元素的内容确实有溢出，但我需要隐藏讨厌的滚动条。这个容器有一个内部包装器，它当然可以让我获得内容的实际高度。

我尝试过制作一个具有完整窗口大小的覆盖元素，其内部元素的高度与我的内部内容包装器的高度相同，但我似乎无法按预期工作。

有没有办法实现我想要的？...隐藏所有滚动条但仍允许鼠标滚轮滚动该特定元素的内容，无论光标放在哪里？

我在想的一个例子：

```
<!DOCTYPE html>
<head>
    <script src="jquerylib-bla-bla.js" />
    <style>
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        #element {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 500px;
            height: 500px;
            margin: -250px 0 0 -250px;
            overflow: hidden;
        }
    </style>
    <script>
        $(document).ready(function() {
            $(window).mousewheel(function() {
                $('#element').trigger('scroll'); // However, this is not possible :)
            });
        });
    </script>
</head>
<body>
    <div id="element">
        <div id="element-inner">
            Some content that exceeds the height #element.
        </div>
    </div>
</body>
</html> 
```

# quartz.net-2.0 - Quartz.Net 文件存储

> ID：16018048
> 
> 赞同：3
> 
> 时间：2013-04-15T14:40:28.943
> 
> 标签：quartz.net-2.0

Quartz.Net 提供 RAMJobStore 和 AdoJobStore 来分别将内部状态存储在易失性内存和数据库中。

它还有效地允许通过观察 XML 文件将某些状态保存在文件中。

但是没有 FileJobStore，它会存储与 AdoJobStore 相同的信息，以防系统重新启动。这是对小规模计划进行保护以防止系统重新启动的明显解决方案。为什么？

我可以考虑效率方面的考虑。但优点是建立一个没有任何依赖关系的 Quartz.Net 的持久性实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T00:57:33.237

我有同样的问题并投票给你，但我找不到任何答案，最后转向[VistaDB](http://www.vistadb.net/)。这是一个基于文件的嵌入式数据库，解决了我的要求。如果您仍然需要它，您可以尝试一下。

# zeromq - ZeroMQ 在同一个更新中打包多条消息

> ID：16018056
> 
> 赞同：1
> 
> 时间：2013-04-15T14:40:46.200
> 
> 标签：zeromq

当使用 pgm 和 epgm 协议时，ZeroMQ 似乎会在服务器端聚合数据，并在同一个多播数据包中发送多个更新。例如，如果我调用 zmq_msg_send 10,000 次并查看我在 tcpdump 中发送的数据，我可以看到我发送的不同消息少于 10,000 条。这是预期的吗？有没有办法配置 ZeroMQ 不这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:17:34.703

是的，这是预期的行为。[ZeroMQ FAQ ( http://www.zeromq.org/area:faq](http://www.zeromq.org/area:faq) )的引用：

> ØMQ 以机会主义的方式对消息进行批处理。它不是等待预定义数量的消息和/或预定义的时间间隔，而是一次性发送当前可用的所有消息。想象一下网络接口卡正忙于发送数据。一旦准备好发送更多数据，它就会向 ØMQ 请求新消息。ØMQ 发送当前所有可用的消息。它是否会损害批处理中第一条消息的延迟？不会。反正不会提前发送消息，因为网卡正忙。相反，后续消息的延迟将得到改善，因为将单个批次发送到卡上比发送大量小消息要快。另一方面，如果网卡不忙，则直接发送消息，无需等待后续消息。因此，它将具有最佳的延迟。

没有办法配置这个。而且没有理由这样做，因为 ZeroMQ 批处理不会增加延迟。

# php - 如何在 htaccess 中编写重写规则以允许访问项目中的另一个文件夹？

> ID：16018057
> 
> 赞同：1
> 
> 时间：2013-04-15T14:40:47.303
> 
> 标签：php, .htaccess, zend-framework

我有这个项目结构 ![在此处输入图像描述](https://i.stack.imgur.com/ergU6.png)

我将图像保存在文件夹数据/图像中。我想允许通过直接链接访问此文件夹。我的 .htaccess 是

```
RewriteEngine On
# The following rule tells Apache that if the requested filename
# exists, simply serve it.
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
# The following rewrites all other queries to index.php. The 
# condition ensures that if you are using Apache aliases to do
# mass virtual hosting, the base path will be prepended to 
# allow proper resolution of the index.php file; it will work
# in non-aliased environments as well, providing a safe, one-size 
# fits all solution.
RewriteCond %{REQUEST_URI}::$1 ^(/.+)(.+)::$
RewriteRule ^(.*)$ - [E=BASE:%1]
RewriteRule ^(.*)$ %{ENV:BASE}index.php [NC,L] 
```

怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:20:16.810

正如评论中所暗示的，您不能简单地通过修改 htaccess 文件来做到这一点，因为您的 images 文件夹位于文档根目录之上。您需要将`data/images`文件夹移动到，或从到`public/images`创建符号链接。然后您的图像应该可以在没有任何 htaccess 更改的情况下工作。`public/images``data/images`

# wordpress - Wordpress 神秘的链接错误，疯狂的重定向

> ID：16018069
> 
> 赞同：1
> 
> 时间：2013-04-15T14:41:17.500
> 
> 标签：wordpress, redirect

我的 wordpress 上有一个奇怪的错误。我在子域上安装了 wordpress。一开始一切正常，但现在如果我尝试访问我的页面 cn.adep.ro，我会被重定向到[http://www.cn.adep.ro/cn/cn/cn/cn/cn/cn/cn/ cn/cn/cn/cn/](http://www.cn.adep.ro/cn/cn/cn/cn/cn/cn/cn/cn/cn/cn/cn/) . 我在不同的子域上有另一个 wordpress 并且可以工作（en.adep.ro）。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:44:50.823

您在站点的某处有一个重定向循环。查看主题或插件文件。

# c# - C# 应用程序的 ClickOnce 和配置

> ID：16018075
> 
> 赞同：1
> 
> 时间：2013-04-15T14:41:31.480
> 
> 标签：c#, clickonce, app-config, machine.config

我应该将什么以及如何放入`app.config`文件中。

场景是这样的，我创建了一个 C# Windows Forms 应用程序（[.NET](http://en.wikipedia.org/wiki/.NET_Framework) 4.0），它在开发计算机上运行良好。当我在其他计算机上使用 ClickOnce 部署它时，我收到该`machine.config`文件的权限错误。这是一个公司域，因此我无权更改`machine.config`目标计算机上文件中的权限。从我一直在阅读的内容来看，我相信文件中正在访问的任何内容都`machine.config`可以交替放入`app.config`文件中。问题是我确实了解需要将什么放入`app.config`文件中，并且我不了解配置的某些方面，例如“键”等。

我怎样才能`machine.config`完全避免使用该文件，以及究竟需要配置什么？

完整的错误详情：

### 平台版本信息

```
Windows                  : 5.1.2600.196608 (Win32NT)
Common Language Runtime  : 4.0.30319.296
System.Deployment.dll    : 4.0.30319.1 (RTMRel.030319-0100)
clr.dll                  : 4.0.30319.296 (RTMGDR.030319-2900)
dfdll.dll                : 4.0.30319.1 (RTMRel.030319-0100)
dfshim.dll               : 4.0.31106.0 (Main.031106-0000)

SOURCES

Deployment URL: file:///P:/Eastops/Region%20C/Conie/HHC/HHC.application

ERROR SUMMARY

Below is a summary of the errors, details of these errors are listed later in the log.

* Activation of P:\Eastops\Region C\Conie\HHC\HHC.application resulted in an exception. The following
  failure messages were detected:

    + Configuration system failed to initialize

    + An error occurred loading a configuration file: Access to the
      path 'C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Config\machine.config' is
      denied. (C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Config\machine.config)

    + Access to the path 'C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Config\machine.config'
      is denied.

COMPONENT STORE TRANSACTION FAILURE SUMMARY

No transaction error was detected.

WARNINGS

There were no warnings during this operation.

OPERATION PROGRESS STATUS

* [4/17/2013 8:29:25 AM] : Activation of P:\Eastops\Region C\Conie\HHC\HHC.application has started.

ERROR DETAILS

Following errors were detected during this operation.

* [4/17/2013 8:29:27 AM] System.Configuration.ConfigurationErrorsException

- Configuration system failed to initialize
- Source: System.Configuration
- Stack trace:
          at System.Configuration.ClientConfigurationSystem.EnsureInit(String configKey)
          at System.Configuration.ClientConfigurationSystem.PrepareClientConfigSystem(String sectionName)
          at System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection(String sectionName)
          at System.Configuration.ConfigurationManager.GetSection(String sectionName)
          at System.Configuration.PrivilegedConfigurationManager.GetSection(String sectionName)
          at System.Diagnostics.DiagnosticsConfiguration.GetConfigSection()
          at System.Diagnostics.DiagnosticsConfiguration.Initialize()
          at System.Diagnostics.DiagnosticsConfiguration.get_Sources()
          at System.Diagnostics.TraceSource.Initialize()
          at System.Net.Logging.InitializeLogging()
          at System.Net.Logging.get_On()
          at System.Net.WebRequest.Create(Uri requestUri, Boolean useUriBase)
          at System.Net.WebRequest.Create(Uri requestUri)
          at System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next)
          at System.Deployment.Application.SystemNetDownloader.DownloadAllFiles()
          at System.Deployment.Application.FileDownloader.Download(SubscriptionState subState)
          at System.Deployment.Application.DownloadManager.DownloadManifestAsRawFile(Uri& sourceUri, String targetPath, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
          at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestDirectBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
          at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options)
          at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
          at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)

--- Inner Exception ---

System.Configuration.ConfigurationErrorsException

- An error occurred loading a configuration file: Access to the
  path 'C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Config\machine.config' is
  denied. (C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Config\machine.config)

- Source: System.Configuration

- Stack trace:
          at System.Configuration.ConfigurationSchemaErrors.ThrowIfErrors(Boolean ignoreLocal)
          at System.Configuration.BaseConfigurationRecord.ThrowIfParseErrors(ConfigurationSchemaErrors schemaErrors)
          at System.Configuration.BaseConfigurationRecord.ThrowIfInitErrors()
          at System.Configuration.ClientConfigurationSystem.EnsureInit(String configKey)

--- Inner Exception ---

System.UnauthorizedAccessException

- Access to the path 'C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Config\machine.config' is denied.
- Source: mscorlib
- Stack trace:

          at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
          at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
          at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
          at System.Configuration.Internal.InternalConfigHost.StaticOpenStreamForRead(String streamName)
          at System.Configuration.Internal.InternalConfigHost.System.Configuration.Internal.IInternalConfigHost.OpenStreamForRead(String streamName, Boolean assertPermissions)
          at System.Configuration.Internal.InternalConfigHost.System.Configuration.Internal.IInternalConfigHost.OpenStreamForRead(String streamName)
          at System.Configuration.ClientConfigurationHost.OpenStreamForRead(String streamName)
          at System.Configuration.BaseConfigurationRecord.InitConfigFromFile()

COMPONENT STORE TRANSACTION DETAILS

No transaction information is available. 
```

# android - OnClickListener 在自定义 ScrollView 内的视图上

> ID：16018084
> 
> 赞同：9
> 
> 时间：2013-04-15T14:41:51.280
> 
> 标签：android

我在 ViewPager 中有一个水平 ScrollView。为了防止在到达 ScrollView 末尾时滚动 ViewPager，我按照 SO 上的提示使用此类：

```
public class CustomScrollView extends HorizontalScrollView {

public CustomScrollView(Context p_context, AttributeSet p_attrs) {
    super(p_context, p_attrs);
}

@Override
public boolean onInterceptTouchEvent(MotionEvent p_event) {

    return true;
}

@Override
public boolean onTouchEvent(MotionEvent p_event) {

    if (p_event.getAction() == MotionEvent.ACTION_MOVE
            && getParent() != null) {
        getParent().requestDisallowInterceptTouchEvent(true);
    }

    return super.onTouchEvent(p_event);
}
} 
```

`onInterCeptTouchEvent`似乎消耗了对该视图及其内部所有内容的任何点击。当我投入`Views`其中`ScrollView`时，他们的`OnClickListener`的 s 不会被调用。

当我让`onInterceptTouchEvent`return false 时，`OnClickListener`s 被调用，但`ScrollView`不能滚动。

我怎样才能把可点击的视图放在里面`ScrollView`？

编辑：在实现 Rotem 的答案后，`onClickListener`工作正常，但它不仅会触发点击事件，还会触发其他事件，比如投掷。如何防止这种情况？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T14:48:20.243

尝试调用`onTouchEvent`里面的执行`onInterceptTouchEvent`然后返回false。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T11:32:32.793

好吧，在开始赏金几分钟后，我发现了它是如何工作的：

在`onInterceptTouchEvent`我

```
return super.onInterceptTouchEvent(p_event); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-15T07:55:01.547

这是使用此问题的答案的完整解决方案。

```
public class CustomHorizontalScrollView extends HorizontalScrollView {

        public CustomHorizontalScrollView(Context context) {
                super(context);

        }
        public CustomHorizontalScrollView(Context context, AttributeSet attrs) {
                super(context, attrs);
        }

        @Override
        public boolean onInterceptTouchEvent(MotionEvent ev) {
                boolean result = super.onInterceptTouchEvent(ev);
                if(onTouchEvent(ev)) {
                        return result;
                } else {
                        return false;
                }
        }

        @Override
        public boolean onTouchEvent(MotionEvent ev) {
            if (ev.getAction() == MotionEvent.ACTION_MOVE
                    && getParent() != null) {
                getParent().requestDisallowInterceptTouchEvent(true);
            }
                return super.onTouchEvent(ev);
        }

} 
```

# slider - 使用缩略图更改 Nivo 幻灯片

> ID：16018088
> 
> 赞同：0
> 
> 时间：2013-04-15T14:42:06.287
> 
> 标签：slider, gallery, thumbnails, nivo-slider

我正在尝试用 Nivo Slider 和缩略图做一些不同的事情。我不想使用缩略图跳转到特定幻灯片，而是想使用缩略图来完全更改幻灯片中的所有图像。让我试着解释一下。在页面顶部，我有 Nivo 滑块。下面是 3 个缩略图，我们将它们称为“thumb1.jpg”、“thumb2.jpg”和“thumb3.jpg”。

当我单击 thumb1.jpg 时，幻灯片应循环播放图像 1a.jpg、1b.jpg、1c.jpg 等。当我单击 thumb2.jpg 时，幻灯片应循环播放图像 2a.jpg、2b.jpg、 2c.jpg 等。当我单击 thumb3.jpg 时，幻灯片应该循环播放图像 3a.jpg、3b.jpg、3c.jpg 等。

所有这些都需要在一张幻灯片的页面上进行，而不是在 3 个单独的页面和 3 张单独的幻灯片中进行。该解决方案可以使用 jQuery、PHP 或其他任何可行的方法。有没有办法做到这一点？

很抱歉，之前是否有人问过这个问题，但我所有的搜索都只是使用缩略图跳转到特定幻灯片。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:29:56.380

啊……我用一些非常简单的 PHP 解决了这个问题。缩略图是带有查询字符串的链接，用于指示从哪个目录中提取图片。例如 red/pic1.jpg、red/pic2.jpg 或 green/pic1.jpg、green/pic2.jpg 或 blue/pic1.jpg、blue/pic2.jpg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:47:41.090

你可以把它们放在那些小幻灯片的css中，我想，虽然我不是很熟悉，但你可以试一试。

所以替换图像的球并编辑它的CSS

# c# - c# treeview 只允许选择最后一个子元素

> ID：16018092
> 
> 赞同：0
> 
> 时间：2013-04-15T14:42:20.337
> 
> 标签：c#, treeview, treenode

我有一个树视图，我希望用户能够只选择最后一个孩子，以避免在没有选择项目而是选择文件夹时出现问题。

有人知道树视图是否存在这样的功能吗？我还没有找到它。

如果没有，像检查最后一个孩子是否被选中或一个目录这样的解决方案，我可以自己尝试。目前我只知道可以设置任何树视图功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:53:50.073

它不是一个`treeview`功能。但是您可以使用[Tag](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.tag.aspx)属性，该属性允许节点与它一起保存对象。（在您的情况下，这是了解它是什么类型的好方法）。

如评论中所述，也许您应该审查您的设计（尽管我不知道为什么需要这样的限制）在我看来，阻止用户单击某些`nodes`内容是一种不好的方法。

您可以通过许多方法以编程方式测试它是否是最后一个元素，例如：

*   宣布`Treeview Before_Select Event`
*   测试是否`EventArgs e`有子节点
*   允许或取消节点选择

就像我说的，这是众多选择之一。

# jpa - Hazelcast 是否为 EclipseLink 提供 L2（二级）分布式缓存？

> ID：16018099
> 
> 赞同：2
> 
> 时间：2013-04-15T14:42:37.920
> 
> 标签：jpa, eclipselink, hazelcast

Hazelcast 为 Hibernate 提供了 L2 缓存，如其手册中所述：http: [//hazelcast.com/docs/2.1/manual/single_html/#HibernateSecondLevelCache](http://hazelcast.com/docs/2.1/manual/single_html/#HibernateSecondLevelCache)。

我的问题是 EclipseLink 是否也一样？（我不这么认为，但也许有人知道是否有计划等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:20:51.370

答案是否定的，但由于它是开源的，因此[他们对贡献](https://groups.google.com/forum/#!topic/hazelcast/p8bajSH5URM)持开放态度。

# grails - Grails 重命名的控制器没有记录

> ID：16018105
> 
> 赞同：0
> 
> 时间：2013-04-15T14:42:44.257
> 
> 标签：grails, logging, controller, rename

我使用 DOS 命令重命名了我的一个控制器，它停止了记录。使用 grails create-controller 创建的所有其他控制器仍在记录。是否有任何文件在其中 grails 保留对控制器名称的引用？

我在 config.groovy 中设置了调试“grails.app”

我正在使用 grails 2.2.1，jdk7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:32:06.083

1.grails clean解决了问题

# javascript - 谷歌地图路线 API 重定向到 map.google.com

> ID：16018108
> 
> 赞同：7
> 
> 时间：2013-04-15T14:43:02.710
> 
> 标签：javascript, google-maps, cordova, google-maps-api-3

我使用了一些 JavaScript 在我的 Google 地图上获取路线，但由于某种原因，我不断被重定向到 Google 地图页面。

问题是当我主要尝试获取步行路线时，尽管公共交通选项也会发生这种情况。

这是一个在PhoneGap 中运行的应用程序，尽管我不确定这是PhoneGap 的问题。

以前有没有人见过这个问题，或者任何人都可以看到我的实施有问题吗？

```
 // get drections
directions: function (method) {

    // set directions method
    method = google.maps.DirectionsTravelMode.WALKING;
    if (method === 'public')
        method = google.maps.DirectionsTravelMode.TRANSIT;

    // current position
    var currentPos = new google.maps.LatLng(app.positionCords.latitude, app.positionCords.longitude);

    // set the directions options
    var request = {
        origin: currentPos,
        destination: app.venueCords,
        travelMode: method
    };

    // get the directions
    app.directionsService.route(request, function (response, status) {

        if (status == google.maps.DirectionsStatus.OK) {

            // set up directions on the map
            app.directionsDisplay.setMap(document.getElementById('map'));
            app.directionsDisplay.setPanel(document.getElementById('directionsPanel'));
            app.directionsDisplay.setDirections(response);

        } else {
            app.messageBox.alert(app.alertTitle, app.noDirectionsMsg, function(button) { console.warn('alert', [this, arguments]); });
        }

    });

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T06:31:32.797

我无法完全理解，但您可能使用了错误的方法“app.directionDisplay.setMap”。

正如我已经完成了代码。

我无法找到您**初始化**MAP 的位置，然后您可以为 MAP 分配方向

```
 function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),//put your initial position values
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map"),
            mapOptions);
      } 
```

然后使用不同的功能，您可以初始化路线/方向。

请参阅更多详细信息和示例[GOOGLE 文档](https://developers.google.com/maps/documentation/javascript/directions)

我对你的代码有疑问

```
 // set up directions on the map
    app.directionsDisplay.setMap(document.getElementById('map')); 
```

请纠正那个..

我希望这会做

# visual-studio-2010 - 如何在 VS2010 中更改“构建顺序”

> ID：16018113
> 
> 赞同：2
> 
> 时间：2013-04-15T14:43:23.913
> 
> 标签：visual-studio-2010

我的解决方案有以下项目：

```
project1
project2
project3
project4
testproject 
```

`testproject`与解决方案中的所有其他项目无关。每当我开始调试时`testproject`，VS 总是尝试编译/构建所有其他`projectX`. 这是我的发现：

在**Project Dependencies**下，我没有选择任何`projectX`. 但是，根据**构建顺序**下，VS 列出了所有 projectX+testproject 那里。

有没有一种方法可以告诉 VS 在调试 testproject 时不编译/构建 projectX？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T18:16:58.263

如果您在 Visual Studio 中右键单击您的解决方案并选择属性，则会弹出一个对话框，允许您设置不同的解决方案配置行为。您可以创建测试或调试配置并选择要构建或不构建的项目。

![解决方案属性页](https://i.stack.imgur.com/0ERRh.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:10:58.753

处理此问题的最简单方法：

右键单击您不想构建的任何项目，然后选择“ `Unload project`”。它将“变灰”并处于非活动状态。当想要它回来时，右键单击并选择“ `Reload project`”。

# javascript - 从子对象（如 Iframe）收集的 iPad 方向信息

> ID：16018114
> 
> 赞同：2
> 
> 时间：2013-04-15T14:43:24.270
> 
> 标签：javascript, ipad, event-handling, dom-events, cross-domain

我正在制作一个全屏广告，通过我无法直接访问的发布商网站投放。广告利用来自 iPad 的倾斜信息来更改广告上的颜色。一切都可以独立运行，因为它是自己的网页，但是当通过我们的广告引擎提供服务时，html 会显示为子窗口对象，并且`deviceorientation`不会在广告中更新。

我对此感到非常惊讶，因为倾斜信息确实会传递到广告，但是当我尝试查找父窗口方向时，我收到了 js 跨域警告。

我可以做些什么来将设备方向传递给子窗口？或任何明智的解决方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:56:34.290

答案取决于域的结构。

**他们有相同的根域**

好的。如果您的父窗口托管在“company.com”上，而您的子窗口托管在“hifi.company.com”（反之亦然），那么通过为两个窗口设置以下属性，它们将能够进行通信。

```
document.domain = 'company.com'; 
```

执行此操作时，您将不再遇到跨站点脚本违规

```
parent.onorientationchange = function () {
     console.log(parent.orientation);
}; 
```

**他们有不同的根域**

然后很遗憾没有。您将无法通过子窗口访问父窗口的方向信息。您可以获得的最接近的方法是监听子窗口本身的调整大小事件。但这取决于 iframe 的大小以及视口的配置方式。

# javascript - jquery 仅在 IE 中工作，而不是在 chrome 上的 firefox

> ID：16018122
> 
> 赞同：1
> 
> 时间：2013-04-15T14:43:34.983
> 
> 标签：javascript, jquery, css

我正在使用 jQuery 设计一个可扩展的列表（我是 jQuery 的新手）。可扩展列表在 IE 上运行良好，但在 Firefox/Chrome 上运行良好。

在调试时，我发现对于 firefox/chrome，我可以得到`alert('hiiii prepare ORIGINAL')`，但在那之后什么也没有。更多的调试表明`function(event)`没有被执行。

代码哪里出错了？这不是完全由我准备的代码，而是从网上获得并为我的目的进行了修改。原始代码的功劳归于其作者。

我正在使用 Firefox 版本 20.0.1 和 IE 版本 9，jQuery 版本 1.4.2。

js代码：

```
function prepareList() {
    alert('hiiii prepare ORIGINAL');
    $('#expList').find('li:has(ul)').click(function (event) {
        alert('inside');
        if(this == event.target) {
            $(this).toggleClass('expanded');
            $(this).children('ul').toggle('medium');
        }
        //return false;
    }).addClass('collapsed').children('ul').hide();

    //Create the button functionality
    $('#expandList').unbind('click').click(function () {
        $('.collapsed').addClass('expanded');
        $('.collapsed').children().show('medium');
    })
    $('#collapseList').unbind('click').click(function () {
        $('.collapsed').removeClass('expanded');
        $('.collapsed').children().hide('medium');
    })
    // alert('END prepare ORIGINAL');  
};

$(document).ready(function () {
    prepareList();
}); 
```

CSS：

```
#expList ul, li {
    list-style: none;
    margin:0;
    padding:0;
    cursor: pointer;
}
#expList p {
    margin:0;
    display:block;
}
#expList p:hover {
    background-color:#121212;
}
#expList li {
    line-height:140%;
    text-indent:0px;
    background-position: 1px 8px;
    padding-left: 20px;
    background-repeat: no-repeat;
}

/* Collapsed state for list element */
#expList .collapsed {
    background-image: url(../../tree/img/collapsed.png);
}
/* Expanded state for list element
/* NOTE: This class must be located UNDER the collapsed one */
#expList .expanded {
    background-image: url(../../tree/img/expanded.png);
}
#expList {
    clear: both;
} 
```

**编辑 1：**
我在这里发布了一个小提琴（感谢 Rocket Hazmat 的创建）[http://jsfiddle.net/vrnqA/2/](http://jsfiddle.net/vrnqA/2/)。在这个小提琴中，当我们单击图像时，列表会展开和折叠。它在 IE 中以同样的方式发生，但在 Firefox 中则不然。这是与 jQuery 版本有关的问题吗？（因为我是 jQuery 的新手，我正在谷歌上搜索如何更新版本，但如果有人遇到过任何此类问题，请告诉我，因为它会很有帮助）

**编辑 2：**
升级 jQuery 到1.9.1 没有帮助。问题仍然存在。

**编辑 3：** “事件”似乎是导致 FireFox 问题的原因。当我发出警报时`alert('event: '+event)`在 js 中，我能够在 IE 中正确看到警报，但在 FirerFox 中，没有出现此警报。因此，FireFox 似乎无法识别该事件。

**编辑4：**
刚刚在我朋友的建议下下载了firebug，它显示错误：

> ReferenceError：未定义事件

任何指针？

**编辑 5**
Hi Friends，非常感谢所有的支持。问题不在于 jQuery，而在于使用我的代码的 UI 开发团队......不得不分析他们的 UI 以发现错误......真的感谢所有的支持......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:51:09.097

我不知道你是否已经修复了它，但我对 JSFiddle 做了一些更改，这是我的版本：http: [//jsfiddle.net/vrnqA/3/](http://jsfiddle.net/vrnqA/3/)

我删除了“事件”的使用，因为这似乎导致了你的问题。

这是修改后的 prepareList 函数：

```
$('#expList').find('li:has(ul)').click(function() {
        $(this).toggleClass('expanded');
        $(this).children('ul').toggle('medium');
}).addClass('collapsed').children('ul').hide();

$('#expandList').click(function() {
    $('.collapsed').addClass('expanded').children().show('medium');
});
$('#collapseList').click(function() {
    $('.collapsed').removeClass('expanded').children().hide('medium');
}); 
```

它在 Firefox、Chrome 和 Safari（都在 Mac 上）对我来说运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:13:16.803

真的感谢大家的支持。问题不在于 jQuery，而在于使用我的代码的 UI 开发团队......必须分析他们的 UI 以发现错误......查询搜索 li 有 ul。对标签形成有很大的依赖性（请参阅讨论评论中的小提琴以了解有关此 jQuery 中标签依赖性的更多信息）。分析了他们的代码并最终修复了它....感谢您的支持，很抱歉通知大家晚了，如果我无意中浪费了某人的时间，我深表遗憾。以后会更及时。

**说明：**
为了形成树，UI 开发人员不小心形成了这样的代码

```
<ul id="expList">
    <li>test</li>
        <ul>
            <li>one</li>
            <li>two</li>
        </ul>    
</ul> 
```

代替

```
<ul id="expList">
    <li>test
        <ul>
            <li>one</li>
            <li>two</li>
        </ul>
    </li>
</ul> 
```

刚刚更正了这个！！看起来太天真了，但 HTML 代码实际上是通过许多 jsp 提供输入动态生成的，所以我花了一些时间才找到解决方案。
他们首先告诉我代码在 IE 中运行正常，但当我检查时却没有！然后他们告诉我他们的 IE 在兼容模式下运行。是的，在兼容模式下，IE避免了这些错误，但在普通模式下没有避免。修改后，它在所有浏览器中都能正常运行！

# php - Zend 框架控制器包含 HTML 接口和 REST 接口

> ID：16018126
> 
> 赞同：1
> 
> 时间：2013-04-15T14:43:37.053
> 
> 标签：php, zend-framework, rest, web-applications

我正在使用 Zend 框架开发一个 Web 应用程序。我正在寻找一种智能解决方案，将 RESTful 接口和非 RESTful 接口实现到单个控制器中。

假设我们正在开发一个管理大量纸质杂志信息的 Web 应用程序。首先，我希望我的网站通过访问以下路径显示所有已注册的杂志，格式为 HTML。

```
GET /magazine/ 
```

另外，我想要一个 HTML 表单来修改新的/现有的杂志信息

```
GET /magazine/modify/new
GET /magazine/modify/3  (HTML form filled with magazine information where ID=3) 
```

并通过按“提交”按钮添加|更新，该按钮隐式调用以下路径

```
POST /magazine/modify 
```

...并重定向到 /magazine/。最后，我想要一个支持 JSON 格式的 HEAD/GET/POST/PUT/DELETE 杂志信息的 RESTful 接口，如下图所示。

```
HEAD /magazine/rest
GET /magazine/rest    (All magazine information in list)
GET /magazine/rest/3  (One single magazine information where ID=3)
POST /magazine/rest
PUT /magazine/rest/new
PUT /magazine/rest/3
DELETE /magazine/rest/3 
```

我唯一的想法是在派生 Zend_Controller_Action 的单个控制器类中准备所有操作。

```
class SlipController extends Zend_Controller_Action{
    public function init(){}

    public function indexAction(){
        /* Load all magazine information from model and show. */
        $magazine_mapper = new Application_Model_MagazineMapper();
        $this->view->magazines = $magazine_mapper->fetchAll();
    }

    public function modifyAction(){
        $request = $this->getRequest();
        $form = new Application_Form_Magazine();
        if($request->isPost()){
            if($form->isValid($request->getPost())){
                /* Modify magazine information. */
                $modified_magazine = new Application_Model_Magazine($form->getValues());
                $magazine_mapper = new Application_Model_MagazineMapper();
                $magazine_mapper->save($modified_magazine);
                return $this->_helper->redirector('index');
            }
        }else{
            /* Load and prepare form values from Application_Model_Magazine. */
        }
        $this->view->form = $form;
    }

    public function restAction(){
        switch($this->getRequest()->getMethod()){
            case 'HEAD':   /* Do for method HEAD   */ break;
            case 'GET':    /* Do for method GET    */ break;
            case 'POST':   /* Do for method POST   */ break;
            case 'PUT':    /* Do for method PUT    */ break;
            case 'DELETE': /* Do for method DELETE */ break;
        }
    } 
```

问题是这个解决方案让我可以实现每个 REST 操作。我还听说过一个名为 Zend_Rest_Controller 的好类，它（我听说它）使实现 RESTful 接口变得更容易，但是这个类似乎与 Zend_Rest_Route 一起使用，所以我不知道在哪里放置非 RESTful 动作这样。

我想知道这种情况的最佳做法。如果通过使用路由器黑客或其他一些解决方案使某些事情变得更好，我想知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:03:08.433

为什么坚持将所有东西都放在同一个控制器中？

`GET /magazine/rest/3`对我来说似乎相当落后。URL 路径应具有递减范围，即从最不具体到最具体。我会这样做`GET /rest/magazine/3`。这将允许您使用[`modules`](http://framework.zend.com/manual/1.12/en/zend.controller.modular.html)，一个用于 Web 应用程序，一个用于 REST：

```
/application/modules/app/controllers
    MagazineController.php
        indexAction()
        editAction()
        newAction()

/application/modules/rest/controllers
    MagazineController.php
        getAction()
        putAction()
        postAction()
        headAction() 
```

# sql-server-2005 - 存储过程 - 数据透视表转换拼图

> ID：16018127
> 
> 赞同：2
> 
> 时间：2013-04-15T14:43:37.417
> 
> 标签：sql-server-2005, stored-procedures, pivot

有人可以就如何将**分配**表转换为**目标**表给我一些帮助：

**分配**：

```
SA    Project         From            TO        Allocation      Comment
-------------------------------------------------------------------------------
Bin     p1          2008-11-01     2008-11-30       0.3            a
Bin     p1          2008-12-01     2008-12-31       0.3            a
Bin     p1          2009-01-01     2009-01-31       0.3            a
Bin     p1          2012-09-01     2012-09-30       0.5            b
Bin     p1          2012-10-01     2012-10-31       0.5            b
Bin     p1          2012-11-01     2012-11-30       0.5            b
Bin     p1          2012-12-01     2012-12-31       0.5            b
Mike    p2          2011-09-01     2011-09-30       0.3            c
Mike    p2          2011-10-01     2011-10-31       0.3            c
Mike    p2          2011-11-01     2011-11-30       0.3            c
Mike    p2          2011-12-01     2011-12-31       0.3            c
Mike    p2          2012-01-01     2012-01-31       0.3            c
Mike    p2          2012-05-01     2012-05-31       0.6            c
Mike    p2          2012-06-01     2012-06-30       0.6            c
Mike    p2          2012-07-01     2012-07-31       0.6            c
Mike    p1          2011-10-01     2011-10-31       0.45           d
Mike    p1          2011-11-01     2011-11-30       0.45           d
Mike    p1          2011-12-01     2011-12-31       0.45           d
Mike    p1          2012-10-01     2012-10-31       0.32           d
Mike    p1          2012-11-01     2012-11-30       0.32           d
Mike    p1          2012-12-01     2012-12-31       0.32           d 
```

==================================================== ===============================

**目标**：

**请注意，11 月 12 月是上一年的 1 月 2 月 ... 10 月。**

```
SA  Project Year  Nov  Dec  Jan Feb Mar Apr May  Jun  Jul  Aug  Sep  Oct Comment Total  
---------------------------------------------------------------------------------------
Bin   p1    2008  0.3  0.3  0.3  0   0   0   0    0    0    0    0    0     a     0.9
Bin   p1    2011   0    0    0   0   0   0   0    0    0    0   0.5  0.5    b      1
Bin   p1    2012  0.5  0.5   0   0   0   0   0    0    0    0    0    0     b      1

Total             0.8  0.8  0.3  0   0   0   0    0    0    0   0.5  0.5          2.9

Mike  p1    2010   0    0    0   0   0   0   0    0    0    0    0   0.45   d     0.45
Mike  p1    2011  0.45 0.45  0   0   0   0   0    0    0    0    0   0.32   d     1.22
Mike  p1    2012  0.32 0.32  0   0   0   0   0    0    0    0    0    0     d     0.64
Mike  p2    2010   0    0    0   0   0   0   0    0    0    0   0.3  0.3    c     0.6
Mike  p2    2011  0.3  0.3  0.3  0   0   0  0.6  0.6  0.6   0    0    0     c     2.7

Total             1.07 1.07 0.3  0   0   0  0.6  0.6  0.6   0   0.3  1.07         5.61 
```

现在我可以得到**当前**表：

**当前**：

**我只能在同一年制作一月二月...十二月。从去年11月开始，连续两年不知道怎么做。**

```
SA  Project Year   Jan Feb Mar Apr  May  Jun  Jul   Aug  Sep   Oct    Nov  Dec  Comment
----------------------------------------------------------------------------------------
Bin   p1    2008    0   0   0   0    0    0    0     0    0     0    0.30  0.30   a
Bin   p1    2009  0.30  0   0   0    0    0    0     0    0     0      0    0     a
Bin   p1    2012    0   0   0   0    0    0    0     0   0.50  0.50  0.50  0.50   b
Mike  p1    2011    0   0   0   0    0    0    0     0    0    0.45  0.45  0.45   d
Mike  p1    2012    0   0   0   0    0    0    0     0    0    0.32  0.32  0.32   d
Mike  p2    2011    0   0   0   0    0    0    0     0   0.30  0.30  0.30  0.30   c
Mike  p2    2012  0.30  0   0   0  0.60  0.60  0.60  0    0     0     0     0     c 
```

关键问题是如何将**当前**表转换为**目标**表。在**Target**表中，例如 2008 Nov Dec 和 2009 Jan Feb Mar Apr May Jun Jul Aug Sep Oct 应显示在同一行中。此外，每列之和和每行之和也应相加。

欢迎任何建议。

如果有人可以帮助我实现这一目标，将不胜感激。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:10:38.007

这是完整的解决方案，您可以查看代码并在 SQLFiddle Demo 上查看，我将在代码下方进行简要说明。

**[SQLFiddle 演示](http://sqlfiddle.com/#!6/2cd00/1)**

```
;WITH 
CTE_Pivot AS 
(
    SELECT 
         SA
        ,Project
        ,CASE WHEN MONTH([FROM]) <11 THEN YEAR([FROM])-1 ELSE YEAR([From]) END AS YEAR
        ,CASE WHEN MONTH([FROM]) = 11 THEN Allocation ELSE 0 END AS Nov
        ,CASE WHEN MONTH([FROM]) = 12 THEN Allocation ELSE 0 END AS [Dec]
        ,CASE WHEN MONTH([FROM]) = 1 THEN Allocation ELSE 0 END AS Jan
        ,CASE WHEN MONTH([FROM]) = 2 THEN Allocation ELSE 0 END AS Feb
        ,CASE WHEN MONTH([FROM]) = 3 THEN Allocation ELSE 0 END AS Mar
        ,CASE WHEN MONTH([FROM]) = 4 THEN Allocation ELSE 0 END AS Apr
        ,CASE WHEN MONTH([FROM]) = 5 THEN Allocation ELSE 0 END AS May
        ,CASE WHEN MONTH([FROM]) = 6 THEN Allocation ELSE 0 END AS Jun
        ,CASE WHEN MONTH([FROM]) = 7 THEN Allocation ELSE 0 END AS Jul
        ,CASE WHEN MONTH([FROM]) = 8 THEN Allocation ELSE 0 END AS Aug
        ,CASE WHEN MONTH([FROM]) = 9 THEN Allocation ELSE 0 END AS Sep
        ,CASE WHEN MONTH([FROM]) = 10 THEN Allocation ELSE 0 END AS Oct
        ,Allocation
        ,Comment
    FROM dbo.Allocation
)
,CTE_Rollup AS 
(
    SELECT SA, Project, YEAR 
        ,SUM(Nov) AS Nov
        ,SUM(Dec) AS Dec
        ,SUM(Jan) AS Jan
        ,SUM(Feb) AS Feb
        ,SUM(Mar) AS Mar
        ,SUM(Apr) AS Apr
        ,SUM(May) AS May
        ,SUM(Jun) AS Jun
        ,SUM(Jul) AS Jul
        ,SUM(Aug) AS Aug
        ,SUM(Sep) AS Sep
        ,SUM(Oct) AS Oct
        ,MAX(Comment) AS Comment
        ,SUM(Allocation) AS Total
    FROM CTE_Pivot 
    GROUP BY SA, Project, YEAR WITH ROLLUP
)
SELECT  
     CASE WHEN YEAR IS NULL THEN 'Total' ELSE SA END AS SA
    ,CASE WHEN YEAR IS NULL THEN NULL ELSE Project END AS Project
    ,YEAR 
    ,Nov,Dec,Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct
    ,CASE WHEN YEAR IS NULL THEN NULL ELSE Comment END AS Comment
    ,Total 
FROM CTE_Rollup
WHERE SA IS NOT NULL AND (YEAR IS NOT NULL OR YEAR IS NULL AND Project IS NULL) 
```

首先 CTE 是对数据进行透视并创建列 Nov、Dec 等。此处的数据仍未分组。每个原始行都有一个单独的行，其中只有一个月的值和其他月的零。使用简单的 CASE 语句（当月<11 时，年 + 1）实现将 1 月至 10 月置于明年。

第二个 CTE 是对数据进行分组并使用 WITH ROLLUP 提示创建小计。它几乎可以返回您想要的内容，只有几行额外的行（每个 SA、项目组合、每个 SA 和总计的小计）。

最终查询只是消除这些行并格式化少数行和列以匹配您的目标表。

*请注意，我手头没有 SQL Server 2005 来测试它，但我几乎肯定它应该可以正常工作*

**编辑：[SQLFiddle 用于更新版本，总计前后有空白行](http://sqlfiddle.com/#!6/2cd00/2)**

# android - 使用 Intent 播放音频文件

> ID：16018130
> 
> 赞同：1
> 
> 时间：2013-04-15T14:43:41.077
> 
> 标签：android, android-intent

我正在尝试创建一个仅播放 .mp3 文件的媒体播放器。我在我的应用程序上创建并显示了列表，但我无法让它播放歌曲。有人建议我使用意图，但我不知道该怎么做。

这是代码；

```
ListView list;
Cursor cursor;
int columnIndex;
int count;
private ArrayAdapter arrayAdapter;
private Button dropbox;

public MainActivity()
{

}

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    dropbox = (Button) findViewById(R.id.dropbox);
    list = (ListView) findViewById(android.R.id.list);

    dropbox.setOnClickListener(new View.OnClickListener() 
    {

        @Override
        public void onClick(View v) 
        {
            Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.dropbox.com"));
            startActivity(i);
        }
    });

    String[] displayMusic = {MediaStore.Audio.Media._ID, MediaStore.Audio.Media.DISPLAY_NAME};

    cursor = getContentResolver().query(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, displayMusic, null, null, null);

    //0 is the id for a mp3 file on the sd card
    //1 is the file name of the mp3 file on the sd card
    final ArrayList<String> listOfMp3s = new ArrayList<String>();
    final ArrayList<String> listOfIds = new ArrayList<String>();
    while (cursor.moveToNext())
    {
        if(cursor.getString(1).endsWith("mp3"))
        {
            listOfMp3s.add(cursor.getString(1));
            listOfIds.add(cursor.getString(0));
        }
    }

    arrayAdapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, listOfMp3s);
    list.setAdapter(arrayAdapter);
    list.setOnItemClickListener(new OnItemClickListener()
    {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) 
        {
            Intent songPageIntent = new Intent(getApplicationContext(), SongPage.class);
                            startActivity(songPageIntent);
        }
    });
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-12T13:59:50.900

像这样试试

```
String name = "http://dl.dropboxusercontent.com/sh/t0in0j8jgsr9wft/abc.mp2";
Uri a = Uri.parse(name);

Intent viewMediaIntent = new Intent();   
viewMediaIntent.setAction(android.content.Intent.ACTION_VIEW);   
viewMediaIntent.setDataAndType(a, "audio/*");           
viewMediaIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
startActivity(viewMediaIntent); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T06:51:17.090

尝试这个：

```
 public void audioPlayer(String path, String fileName){
    //set up MediaPlayer    
    MediaPlayer mp = new MediaPlayer();

    try {
        mp.setDataSource(path+"/"+fileName);
        mp.prepare();
        mp.start();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

# mysql - MySQL；LEFT OUTER 在 DATEDIFF 上加入索引需要 300 多秒（但只是第一次）

> ID：16018131
> 
> 赞同：0
> 
> 时间：2013-04-15T14:43:41.670
> 
> 标签：mysql, database-performance, datediff

MySQL 的内置缓存确实让这个问题在一天的大部分时间里都没有实际意义，但是第一次运行以下查询时，性能很*糟糕*：第一次需要超过 300 秒，而后续查询可以在几毫秒内完成。使用 SQL_NO_CACHE 运行它需要 2-4 秒（！），这在这种情况下是可以接受的——但初始运行时间不是。

```
SELECT DATEDIFF( bt.`datetime`, st.`datetime`) AS 'day_separation'
FROM `smallerTable` AS st
LEFT OUTER JOIN `bigTable` AS bt ON bt.item_id = st.item_id
  AND bt.code = 'X'
  AND bt.`datetime` > st.`datetime`
  AND DATEDIFF ( bt.datetime, st.datetime) < 11
  AND st.`datetime` > '2012-07-01' AND st.`datetime` < 'yesterdays-date 23:59:59' 
```

我已经引入了多列索引（[感谢这个问题](https://stackoverflow.com/questions/13051246/in-mysql-how-to-build-index-to-speed-up-this-query)），但它仍然无法解决这个特定问题。[这个解决方案](https://stackoverflow.com/questions/5442420/trying-to-optimize-mysql-query-with-left-outer-join)看起来很有灵感，但我认为它不适用，因为我不确定如何合并这些结果。

较小的表有约 8000 条记录，我现在想计算/包括所有记录。它最终会变大并包含 2012-07-01 之前的项目。

bigTable 有 1000 万条记录，我只想将这些记录的“配对”与较小的表匹配。部分麻烦是他们不能共享直接键或将它们链接在一起的引用，所以我只剩下一个`LEFT OUTER JOIN`并猜测如果两个事件的时间戳相隔 < 11 天（并共享其他条件），它们必须是有关的。

排除测试`DATEDIFF ( bt.datetime, st.datetime) < 11`创建了 14k 个“结果”，说明“*需要*发生”的`DATEDIFF`计算数量为 14k-8k（又名 6k）。

 ***INDEXES**：`datetime`每个表的字段，the`code`和`item_id`s。

我在两个表上都有复合索引，顺序为`(item_id, datetime)`. 据我了解，这是必要的顺序，因为我们在 select 语句中以`DATEDIFF( bt.datetime, st.datetime)`.

**组合索引会`(code, item_id, datetime)`彻底改变这个查询吗？**（是的，它确实！）

解释对我未经训练的眼睛几乎没有透露，只是它使用了一个临时表，我知道这可能很耗时。

```
id * select_type * table * type  * possible_keys * key                * key_len * ref           * rows * extra
1  * SIMPLE      * st    * index * NULL          * items_for_datetime * 59      * NULL          * 8295 * using index; using temporary; using filesort
1  * SIMPLE      * BT    * ref   * [many]        * items_for_datetime * 51      * master.st.item_id * 3    * 
```

根据 MySQL 的突发奇想，bigTable*有时会*显示它更喜欢`item_id`key 而不是`items_for_datetime`. 我应该鼓励使用我的联合指数，相信我知道得更好吗？

一些额外的信息：

*   每天对这些表进行一次插入（BT 中有 1~5k 条记录）
*   没有更新或删除发生
*   我可能会运行两个查询——将这个更改为 INNER JOIN，然后运行第二个查询以从总记录中减去结果数，以找到在 BT 中没有相应结果的数字
*   我们已经在 BT 上执行了 phpmyadmin 的`Check Table`, `Defragmentation`, 和`Optimize Table`

[旁白] 这可能是使用 NoSQL 数据库（如 Mongo）的好场景吗？

为什么第一次和第二次会有这么大的差距？更重要的是：**可以做些什么来改善第一次运行的时机？**

**更新：**新的尝试需要新的一天才能发现它们的功效。`BETWEEN`明天我将使用and尝试 Barmar 的建议`DATE_ADD`。我还在`(code, item_id, datetime)`. 我将在明天报告结果，但欢迎任何其他想法。

**更新：**成功！查询的第一次运行现在只用了 6 秒，考虑到它的来源，这真是太棒了。随后的查询只用了 0.035 秒！多么梦想。毫无疑问，综合指数`(code, item_id, datetime)`促成了这一成功。这是新的查询：谢谢大家！

```
SELECT DATEDIFF( bt.`datetime`, st.`datetime` ) AS  'day_separation'
FROM  `smallerTable` AS st
LEFT OUTER JOIN bigTable AS bt USE INDEX (  `cmd_item_time` ) 
ON bt.item_id = st.item_id
  AND bt.code =  'X'
  AND bt.`datetime` BETWEEN st.`datetime` AND DATE_ADD( st.`datetime`, INTERVAL 10 DAY ) 
  AND st.datetime BETWEEN '2012-07-01' AND  'yesterdays-date 23:59:59' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:58:43.270

尝试改变：

```
AND bt.`datetime` > st.`datetime`
AND DATEDIFF ( bt.datetime, st.datetime) < 11 
```

至：

```
AND bt.`datetime` BETWEEN st.`datetime` AND date_add(st.`datetime`, interval 11 day) 
```

这可能允许使用索引`bt.datetime`。

如果`code = 'X'`过滤掉 的大部分`bigTable`，一个复合索引`(code, item_id)`应该会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:46:18.250

您查询的问题很可能是那一行：AND st。`datetime`> '2012-07-01' 和圣。`datetime`< '昨天-日期 23:59:59'

通过将日期时间转换为字符串（以便比较），您将失去索引的优势......*

# entity-framework - 实体框架 - 导航属性不加载

> ID：16018132
> 
> 赞同：5
> 
> 时间：2013-04-15T14:43:48.630
> 
> 标签：entity-framework, entity-framework-4, foreign-keys, eager-loading

我有以下关系

![在此处输入图像描述](https://i.stack.imgur.com/gpUK1.png)

```
public partial class SharedResource : DomainEntity
{
    public System.Guid Id { get; set; }
    public System.Guid VersionId { get; set; }

    public virtual PackageVersion PackageVersion { get; set; } // tried it noth with and without virtual
} 
```

现在，我使用加载 SharedResource

```
SharedResource sharedResource = Get(shareKey) 
```

和

```
sharedResource.PackageVersion == null. 
```

虽然 VersionId 不为 null 并且

```
context.Configuration.LazyLoadingEnabled = false; 
```

我必须做什么才能加载它

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T18:49:15.733

`LazyLoadingEnabled`必须`true`，不是`false`：

```
context.Configuration.LazyLoadingEnabled = true; 
```

`true`如果您根本不设置，则为默认值`LazyLoadingEnabled`。

并且该`PackageVersion`属性必须是`virtual`启用此属性的延迟加载。

或者您可以直接在查询中包含该属性：

```
SharedResource sharedResource = context.SharedResource
    .Include("PackageVersion")
    .SingleOrDefault(s => s.Id == shareKey); 
```

# html - 网站视口和屏幕方向、设备

> ID：16018137
> 
> 赞同：1
> 
> 时间：2013-04-15T14:43:56.817
> 
> 标签：html, css, viewport

我有一个宽度为 980 像素的网站。我需要让它适应 ipad、iphone、android chrome 屏幕。对于 ipad (1024x768) 垂直屏幕，我做了一个这样的：

```
<meta name="viewport" content="width=980, initial-scale=0.78, user-scalable=no"> 
```

但我需要为水平方向和手机做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:17:08.333

我认为这是一个不好的做法。它会放大或缩小您的视口，无助于在不同的视口上保持相同的布局。只有为不同的视口定义不同的药物才有可能。而且您还应该像这样维护您的元标记

```
<meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" /> 
```

否则，您将在 Android 或 iOS 小型设备中遇到一些可怕的错误。

# iphone - CoreData - 关系的一侧总是零

> ID：16018139
> 
> 赞同：0
> 
> 时间：2013-04-15T14:44:06.257
> 
> 标签：iphone, ios, core-data, nsmanagedobject, nsmanagedobjectcontext

我有一个 CoreData 项目，其中有两个相关实体（用户和研究），这些实体与另一个实体（UserStudy）具有一对多的关系，而另一个实体与前两个实体中的每一个都具有一对一的关系，和一些额外的属性。

我遇到了一个非常奇怪的问题。我可以将 UserStudy 添加到用户和研究的集合中，但关系的另一端永远不会起作用。每次我设置它时，我都没有错误，而且关系只是空的。

1.  我已经使用相同的代码创建了一个测试项目，它出于某种原因在那里工作，但在我一年前的项目中没有（大型代码库我不能简单地丢弃）
2.  我已经打扫过了
3.  我已经删除了派生数据
4.  我尝试使用点访问器、便利设置器和 setValue:ForKey 设置关系。
5.  我已验证所有反向关系均已正确设置。
6.  我已经验证了这种关系在 User 和 Study 方面是一对多的，而在 UserStudy 方面是一对一的。

我尝试设置关系的代码如下所示：

```
CRMUser *aUser = [NSEntityDescription insertNewObjectForEntityForName:@"CRMUser"
                                               inManagedObjectContext:self.ctx];
CRMStudy *aStudy = [NSEntityDescription insertNewObjectForEntityForName:@"CRMStudy"
                                                 inManagedObjectContext:self.ctx];
CRMUserStudy *aUserStudy = [NSEntityDescription insertNewObjectForEntityForName:@"CRMUserStudy"
                                                         inManagedObjectContext:self.ctx];
aUserStudy.study = aStudy;
aUserStudy.user = aUser;

STAssertTrue([aUserStudy.user isEqual:aUser], @"newUserStudyWithUser:study:token failed to set user");
STAssertTrue([aUserStudy.study isEqual:aStudy], @"newUserStudyWithUser:study:token failed to set study");

NSLog(@"aUserStudy: %@",aUserStudy); 
```

总是失败，并给了我这个日志：

```
aUserStudy: <CRMUserStudy: 0xa6db8e0> (entity: CRMUserStudy; id: 0xa6dc580 <x-coredata:///CRMUserStudy/t1BDB3E8A-F5F0-4462-AB88-C5186AC4D8C671> ; data: {
    study = nil;
    token = nil;
    user = nil;
}) 
```

但如果我这样做：

```
CRMUser *aUser = [NSEntityDescription insertNewObjectForEntityForName:@"CRMUser"
                                               inManagedObjectContext:self.ctx];
CRMStudy *aStudy = [NSEntityDescription insertNewObjectForEntityForName:@"CRMStudy"
                                                 inManagedObjectContext:self.ctx];
CRMUserStudy *aUserStudy = [NSEntityDescription insertNewObjectForEntityForName:@"CRMUserStudy"
                                                         inManagedObjectContext:self.ctx];
[aUser addUserStudyObject:aUserStudy];
[aStudy addUserStudyObject:aUserStudy]; 
```

关系已经确定，但在另一边仍然为零。

就像我说的，我可以将我的模型代码复制粘贴到一个新项目中，一切正常。有没有人经历过这个？也许它与测试目标有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:46:36.263

我仍然不知道这个问题的具体原因是什么，我假设我的 .xcdatamodeld 文件不知何故损坏了。

我已经尝试删除 UserStudy 实体并重新创建它，但没有成功。

*然后我创建了一个新的模型版本。*
我没有将此新版本设置为当前默认值。这并没有解决问题。

*然后我再次删除并重新创建了 UserStudy 实体。*
突然间，一切都开始起作用了。

所以我假设创建新模型版本导致 XCode 重新生成我的模型文件，并修复导致问题的任何损坏。请注意，我对旧模型文件与新模型文件进行了比较，似乎没有什么不同，所以除了模型一定以某种方式损坏之外，我不知道实际问题是什么。

# joomla2.5 - Joomla 2.5 mod_login 不工作

> ID：16018141
> 
> 赞同：0
> 
> 时间：2013-04-15T14:44:13.827
> 
> 标签：joomla2.5

实际上，当我输入用户名和密码后，我在 mod_login 中插入了“通过 facebook 按钮登录”，页面简单地刷新，没有任何反应。我已经检查了很多次代码，但徒劳无功是否存在技术问题。？请记住，我在我的网站中使用 JoMsocial。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:17:43.447

首先，删除您的浏览器缓存并尝试，如果没有，则转到全局配置并清理 cookie 域字段，仍然有同样的问题，然后通过 ftp index.php 从安装 joomla 的主文件夹下载并用记事本打开，然后按从菜单另存为并以 ANSI 类型保存并上传，这可能会有所帮助。给我们您网站的网址

# angularjs - 角货币过滤器 - 添加符号

> ID：16018142
> 
> 赞同：22
> 
> 时间：2013-04-15T14:44:16.850
> 
> 标签：angularjs, currency

我正在使用 angular 的货币过滤器，它似乎输出了一个额外的符号：Â。

的HTML：

```
{{totals.subtotal | currency}}
{{totals.tax | currency}}
{{totals.total | currency}} 
```

对象总计：

```
var totals = {subtotal: 500, tax: 65, total: 565}; 
```

输出：

```
Â$500.00
Â$65.00
Â$565.00 
```

有没有人遇到过这个？我正在使用最新的 Angular 1.0.6

**更新：**事实证明，角度的缩小导致了这一点。当我包含非缩小角度时，它修复了它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-21T05:55:57.460

是的，确认这是丑陋的。

如果您使用该`ascii_only=true`选项构建它，那么它似乎可以解决问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-15T14:49:57.703

确保你有这个元标记。

```
<meta charset="utf-8"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-07T17:48:35.210

似乎当您使用 Uglify.js 自己缩小 Angular 时，或者当您将其与其他脚本组合成一个连接文件然后缩小时，就会出现这个问题。要解决这个问题，您应该在项目中包含预先缩小的 Angular 版本，而不是开发版本。我不确定问题是由 Uglify.js 还是 Angular 引起的，但这就是我修复它的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-03T17:31:14.630

更新 Uglify 似乎可以解决问题

```
uglify({ 'ascii-only': true }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-08T08:09:31.053

如果您使用**ascii_only=true**选项构建它，那么它似乎可以解决问题。

这是 Gruntfile.js 中的样子：

```
uglify:{ 
     options: { 
         output: {'ascii_only': true } 
     }
} 
```

# javascript - ajax 图像上的 CSS 过渡

> ID：16018144
> 
> 赞同：0
> 
> 时间：2013-04-15T14:44:20.947
> 
> 标签：javascript, css, jquery, css-transitions

因此，我尝试使用淡入/淡出过渡和加载了 ajax 的图像来构建一个 CSS 滑块。问题是当 ajax 图像出现并且 fade 的 css 过渡效果应该起作用时，它不起作用。但是在第一次加载图像后过渡效果很好（因为我正在检查图像是否存在）。

这是一个[小提琴](http://jsfiddle.net/luismatute/wRqrs/1/)作为例子

这是代码：

```
<style>
    body{ margin:0px; }
    #wrapper{
        position:relative;
        width:1024px;
        height:768px;
    }
    #wrapper img{
        position:absolute;
        width:;
        top:0px;
        left:0px;
        opacity: 0;
        -webkit-transition: all 0.5s;
         -moz-transition: all 0.5s;
           -o-transition: all 0.5s;
              transition: all 0.5s;
    }
</style>

<div id="wrapper">
    <img class="selected" src="img/photo01.jpg" />
</div>
<script>
    var images = [
            {image:'img/photo01.jpg', loaded:true},
            {image:'img/photo02.jpg', loaded:false},
            {image:'img/photo03.jpg', loaded:false},
            {image:'img/photo04.jpg', loaded:false},
            {image:'img/photo05.jpg', loaded:false}
        ],
        arrIndex = 0,
        zIndex = 1,
        timer = 1500,
        fadeInTime = 500,
        timerID,
        isLoading = false,
        container,
        imgPrefix = 'slideImage_',
        curSelected = $('#'+imgPrefix+arrIndex);

    $(document).ready(function(){
        container = $('#wrapper');
        timerID = setTimeout(nextImage,timer);
        $('img',container).attr('id',imgPrefix + arrIndex);
    });

    function nextImage(){
        if(!isLoading){
            arrIndex++;
            arrIndex = arrIndex >= images.length ? 0 : arrIndex;
            loadImage();
        }
    }

    function prevImage(){
        if(!isLoading){
            arrIndex--;
            arrIndex = arrIndex < 0 ? images.length-1 : arrIndex;
            loadImage();
        }
    }

    function loadImage(){
        var imgObj = images[arrIndex];

        isLoading = true;
        zIndex++;
        $('img:visible').css('opacity',0);

        if(imgObj.loaded){
            // $('#'+imgPrefix + arrIndex).hide().css('z-index',zIndex).fadeIn(fadeInTime);
            $('#'+imgPrefix + arrIndex).css({'opacity': 1})
            setTimer();
        } else {
            $('<img />')
            .load(function(){
                // $(this).hide();
                container.append(this);
                //$(this).fadeIn(fadeInTime);
                imgObj.loaded = true;
                setTimer();
            })
            .attr('id', imgPrefix + arrIndex)
            .attr('src',imgObj.image)
            .css({'opacity': 1});;
        }
    }

    function setTimer(){
        isLoading = false;
        timerID = setTimeout(nextImage,timer);
    }

</script> 
```

希望你能理解

# facebook - 从公共聊天中向 twitter 和 Facebbok 发布消息

> ID：16018145
> 
> 赞同：0
> 
> 时间：2013-04-15T14:44:21.590
> 
> 标签：facebook, twitter, redis, amazon, nodes

我在我的网站上有一个开放的聊天。这意味着所有用户都可以写入公共聊天。这个聊天是在 nodej+redis 中创建的。因此，我需要每个用户的每条消息都将发布到该用户的 twitter 和该用户的 Facebook 墙上。例如。用户 A 发布聊天消息，该消息也发布到用户 A twitter 和用户 A Facebook 墙上。请帮忙 - 我怎么能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:17:34.587

You need the exact code? I can help you to find resources. For Facebook I'll explain step by step:

1.  You must create a new application on Facebook.
2.  You must chose the: Web page with facebook login
3.  Each of your users who visits your web page must authorize (login via Facebook) the application
4.  They must also give you and extanded permission publish stream and or publish action.
5.  Only after that you can publish on users behalf on his/her wal. This was the good news. The bad news is if you want to publish every single word the user types in your chat you will receive a negative user feedback from facebook and besides that facebook limits number of posts per day.(if I'm not mistaken the number is 12)

Here are some links to relevant documentation:

[https://developers.facebook.com/docs/guides/web/](https://developers.facebook.com/docs/guides/web/)

[https://www.facebook.com/blog/blog.php?post=41735647130](https://www.facebook.com/blog/blog.php?post=41735647130)

[https://developers.facebook.com/docs/howtos/login/getting-started/](https://developers.facebook.com/docs/howtos/login/getting-started/)

# c# - 我如何声明二维按钮数组

> ID：16018154
> 
> 赞同：-8
> 
> 时间：2013-04-15T14:44:47.060
> 
> 标签：c#, visual-studio-2010

在 C# 中，如何声明一个二维按钮数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T14:45:53.293

是的 - 在第一个版本中，变量没有被明确分配。第二种*是*肯定赋值的，默认值（0）。所以：

```
int a;
Console.WriteLine(a); // Error!

int a = new int();
Console.WriteLine(a); // Prints 0 
```

然而，我认为我从来没有真正刻意写过`new int()`。你通常会写：

```
int a = 0; 
```

作为一种更具可读性的方法。对于泛型方法，您可以使用`default(T)`或者`new T()`但是，如果`T`被限制为不可为空的值类型。

数组是一个完全独立的问题，应该单独提出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T14:46:13.863

后者 ( `int a = new int();`) 赋值 - 它与`int a = 0;`or基本相同`int a = default(int);`。这意味着，如果它是一个***局部变量***，则明确赋值的规则*是满意的*。对于第一个 ( `int a;`)，在分配之前您不能使用它。例如，`Console.WriteLine(a);`如果您没有明确给出`a`值，则会失败。

请注意，***字段***（又名实例变量和类型级变量）本质上被视为“分配”了它们的默认值（`0`在这种情况下），因此在字段的情况下，它只是冗余代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T14:45:33.543

第一个只是声明一个整数变量而不初始化它的值：

```
int a; 
```

因为它还没有被初始化，所以在你给它赋值之前你不能使用它。

第二个声明整数变量*并将*其初始化为默认值。

```
int a = new int(); 
```

* * *

要回答第二个问题，您可以声明一个任意类型的二维数组，如下所示：

```
Button[,] buttons; 
```

要将数组初始化为特定大小，请使用

```
Button[,] buttons = new Button[4, 5]; 
```

虽然，数组中的元素 item 将被初始化为其类型的默认值。

# maven - 詹金斯 + sonar-maven-plugin

> ID：16018155
> 
> 赞同：0
> 
> 时间：2013-04-15T14:44:49.133
> 
> 标签：maven, plugins, jenkins, sonarqube

有人知道如何更改/定义 sonar-maven-plugin 的源目录吗？我试图定义参数 -Dsonar.source=/src/main/scala -Dsonar.test=/src/test/scala 但是当插件在jenkins上启动时这些不应用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:19:33.877

您必须在 POM 本身中更改这些参数。在使用 Maven 运行声纳分析时，尝试使用“sonar.*”属性“覆盖”这些参数将不起作用。

# qt - 仅在全局菜单栏中显示时如何提供菜单栏？

> ID：16018161
> 
> 赞同：1
> 
> 时间：2013-04-15T14:45:03.550
> 
> 标签：qt, kde

我正在编写一个使用 KDE 和 QML 的应用程序。主窗口将是纯 QML，具有非常自定义的外观，所以我根本不需要菜单栏。我将有一个类似海豚“控制”按钮的东西，但在 QML 中实现。但是，如果用户有一个全局菜单栏，比如 Unity 或 KDE 全局菜单栏，我想显示一个菜单栏，以便它适合其他应用程序。

我注意到这是 KDE 文件管理器 Dolphin 的工作方式。默认情况下，有一个“控制”按钮，其中包含一组有限的菜单。但是，如果存在全局菜单栏，则将导出常规菜单栏，即使它仍设置为不显示菜单栏。

![带有全局菜单栏的 Dolphin](https://i.stack.imgur.com/AUFOQ.png)

**如何将菜单栏设置为仅在全局菜单栏中显示时才显示？可以在纯 Qt 中完成还是必须使用 KDE？如果这是通过不显示菜单栏自动提供的，我该如何隐藏菜单栏？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:17:44.057

查看 Dolphin 的源代码后，这似乎是由 KDE（或者可能由 Qt）自动处理的。如果菜单栏被隐藏，它不会显示在窗口框架中，但如果它正在导出到全局菜单栏，则无论菜单栏是否隐藏都会显示。

要使菜单栏不再显示在窗口中，但仍显示在全局菜单栏中，只需执行以下操作：

```
menuBar()->setHidden(false); 
```

如果您使用的是 KDE，并且想要一种标准化的方式来隐藏/显示菜单栏，您可以使用`KStandardAction`：

```
KStandardAction::showMenubar(this, SLOT(toggleShowMenuBar()),
        actionCollection()); 
```

如果你修改工具栏，比如显示一个控制按钮，你可能需要特别做（代码取自 Dolphin）：

```
KToggleAction* showMenuBar = KStandardAction::showMenubar(0, 0, 
        actionCollection());
connect(showMenuBar, SIGNAL(triggered(bool)),                   // Fixes #286822
        this, SLOT(toggleShowMenuBar()), Qt::QueuedConnection); 
```

显然，需要特殊连接，因为插槽会修改工具栏（请参阅[KDE 错误 #286822](https://bugs.kde.org/show_bug.cgi?id=286822)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:24:06.937

从 Qt 内部很容易知道您的应用程序是最小化、最大化、刚刚显示还是全屏显示（请参阅 参考资料[`QWidget::windowState()`](http://qt-project.org/doc/qt-4.8/qwidget.html#windowState)）。正式检测操作系统或其他附近窗口的状态是操作系统特定的。

一种“hacky”的方法是检查桌面的大小（请参阅 参考资料[`QDesktopWidget`](http://qt-project.org/doc/qt-4.8/qdesktopwidget.html#details)）并检查最大化窗口的大小，看看它们在单个方向上是否相差 x 量。如果是，则使用全局菜单栏/任务栏模式，否则进入隐藏菜单栏模式。但是您可能需要定期检查，以防任务栏自动隐藏。

希望有帮助。

# javascript - 画布无法读取未定义的属性

> ID：16018167
> 
> 赞同：0
> 
> 时间：2013-04-15T14:45:14.403
> 
> 标签：javascript, jquery

```
function getMousePos(canvas, evt) {
    var rect = canvas.getBoundingClientRect();
    return {
        x: evt.clientX - rect.left,
        y: evt.clientY - rect.top
    };
}

setInterval(function (evt) {
    if (frame < 4) {
        frame += 1;
    } else {
        frame = 0;
    }
    var mousePos = getMousePos(canvas, evt);
    // ...
}, 500); 
```

您好，我是 jQuery/JavaScript 的新手，为什么会`evt.clientX`抛出异常

> 无法读取未定义的属性

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:06:21.223

我认为这将捕获 evt 论点：

```
var test;
function getMousePos(canvas, evt) {
    test = evt;
    var rect = canvas.getBoundingClientRect();
    return {
        x: evt.clientX - rect.left,
        y: evt.clientY - rect.top
    };
}

setInterval(function (test) {
    if (frame < 4) {
        frame += 1;
    } else {
        frame = 0;
    }
    var mousePos = getMousePos(canvas, test);
    // ...
}, 500); 
```

****编辑**** 此代码完全不正确，请尝试阅读：[如何确定鼠标位置](http://docs.jquery.com/Tutorials%3aMouse_Position)

# network-programming - Windows 2008 服务器上 IP_ADD_SOURCE_MEMBERSHIP 的限制

> ID：16018172
> 
> 赞同：0
> 
> 时间：2013-04-15T14:45:23.870
> 
> 标签：network-programming, windows-server-2008-r2, multicast, ipv4

我想构建一个想要从多个多播组（最多 1.000 个！）接收数据的应用程序，这可以使用 setsockopt 函数（IP_ADD_SOURCE_MEMBERSHIP）吗？还是有系统限制？

还有另一种方法吗？还是我必须使用多个插座？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:56:54.167

我在这个[Microsoft 网站上找到了一些东西：INFO: Header and Library Requirement When Set/Get Socket Options at the IPPROTO_IP Level](http://support.microsoft.com/kb/257460/en)

存在一个定义

`#define IP_MAX_MEMBERSHIPS 20 /* per socket; must fit in one mbuf */`

mbuf 结构的最大大小为 108 字节。

[TCP/IP 图解：卷。2：实施](http://books.google.de/books?id=ESM3CWY5xRYC&pg=PA267&lpg=PA267&dq=ip%20mbuf%20header&source=bl#v=onepage&q=ip%20mbuf%20header&f=false)

# plaintext - 重置忘记的用户密码的最佳实践

> ID：16018180
> 
> 赞同：15
> 
> 时间：2013-04-15T14:45:48.673
> 
> 标签：plaintext, password-recovery, forgot-password

据我所知，有两种合理的方法可以重置用户忘记的密码。

1.  让用户输入他们的电子邮件地址，并将新的明文密码发送到他们的电子邮件地址。

2.  一个链接会发送到他们的电子邮件地址，该地址在 URL 中有一个 UID 号。单击此按钮会将用户带到网站上的表单，他们可以在其中选择自己的新密码。

哪种方法更可取，为什么？

如果使用方法一，也许第三方可以阅读电子邮件并获得新密码。如果使用方法 2，如何阻止有人有条不紊地通过 UID 代码尝试访问表单以更改用户密码？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-15T14:55:12.437

最好的模式是：

1.  用户请求密码重置。最好是通过用户名来做，不要指出用户名是否存在（以避免可能的用户通过脚本列出）

2.  您在新的数据库表中生成一条记录，其中包含用户 ID、请求的日期时间（= 当前日期时间）和刚生成的 GUID

3.  您向用户发送一封邮件，指向以 GUID（而不是用户 ID）作为参数的密码重置页面

4.  在此页面上，您应该检查 GUID 是否存在，最终您可以设置一些到期日期（例如，用户有 1 天的时间重置）

5.  当用户重置密码时，不要忘记将记录标记为“已使用”（表中有一个额外的字段），以便您可以停止最终的第二次尝试......

它可能更安全，但我认为这已经很好了......

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-22T19:03:07.017

OWASP 有一个很好的清单[https://www.owasp.org/index.php/Forgot_Password_Cheat_Sheet](https://www.owasp.org/index.php/Forgot_Password_Cheat_Sheet)

以下是步骤的快速摘要：

1.  收集身份数据或安全问题
2.  验证安全问题
3.  通过侧通道发送令牌
4.  允许用户更改密码

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2018-03-06T06:20:12.743

通过询问验证问题来验证发件人是否是真实用户。

不要在不在平面员工列表中的个人电子邮件上发送密码。

不要在电子邮件的标题或正文中添加“密码”一词。

确保分别发送用户名和密码。

对于 Office 365 用户，将他们引导至忘记密码区域或发送此链接[https://passwordreset.microsoftonline.com](https://passwordreset.microsoftonline.com)

不要被用户吓倒，如果需要，请上报给 IT 经理。

# three.js - 你能在three.js中为宝石/钻石建模吗

> ID：16018181
> 
> 赞同：3
> 
> 时间：2013-04-15T14:45:49.777
> 
> 标签：three.js

我一直在使用 Vray 等高级渲染器来渲染宝石（离线）。我正在开发一个使用three.js实时渲染它们的项目

我不是 3D 专家，我想知道是否可以实现一些更高级的折射、反射着色器来模拟闪亮/多面宝石，​​如果可以，我在哪里可以找到实现它的代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-08T00:58:20.343

对于在 中使用立方体贴图着色器模拟折射和反射`Three.js`，我将查看此演示中的源代码：http: [//stemkoski.github.io/Three.js/Bubble.html](http://stemkoski.github.io/Three.js/Bubble.html)

![在此处输入图像描述](https://i.stack.imgur.com/I5Nf7.png)

使用 Javascript 进行准确的光线追踪（类似于 VRay 或其他光子照明技术）：http: [//29a.ch/2010/6/2/realtime-raytracing-in-javascript](http://29a.ch/2010/6/2/realtime-raytracing-in-javascript)

![在此处输入图像描述](https://i.stack.imgur.com/7DcZ8.jpg)

# c - 如何将包含通配符的路径转换为 C 程序中的相应文件条目？

> ID：16018183
> 
> 赞同：3
> 
> 时间：2013-04-15T14:45:56.670
> 
> 标签：c, unix, system-calls

我正在尝试`ls`使用通配符实现命令，`*`. 我刚刚了解到，大多数 shell在执行命令`*`时会将包含的 ls-argument 转换为相应的条目。 例如，目录由、和 目录组成。 然后，该目录有、和。 并假设当前目录是目录。`ls`
`foo``a.file``b.file``bar`
`bar``c.file``d.file``e.file`
`foo`

参数`*/*`被转换为以下条目。

```
"bar/c.file", "bar/d.file", "bar/e.file" 
```

程序如何执行此操作？我不知道从哪里开始。并且
有很多可能的情况。

`*/../*`, `../../*`,`*/*/*`等

任何建议都会很棒。谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:49:03.143

你当然可以[`glob()`](http://linux.die.net/man/7/glob)用来做很多这样的工作。

这种模式被称为[glob](http://en.wikipedia.org/wiki/Glob_%28programming%29)，出于某种原因，我现在不会挖掘。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:49:06.207

POSIX 提供[`glob(3)`](http://linux.die.net/man/3/glob)编程通配符路径扩展。

# java - 消息甚至没有出现在 RabbitMQ 服务器上

> ID：16018184
> 
> 赞同：1
> 
> 时间：2013-04-15T14:45:57.407
> 
> 标签：java, rabbitmq, producer-consumer

在我的 RabbitMQ 应用程序中，生产者发送消息，但消费者只接收其中的一部分（不是最大的）。当我`rabbitmqctl list_queues`在终端执行时，它显示：

```
~$ sudo rabbitmqctl list_queues
Listing queues ...    
MdnaMessagesQueue   0
...done. 
```

这意味着消息会丢失到队列中，或者它们很快就会从队列中取出。所以我不明白为什么会这样。我没有其他可以从该队列获取消息的应用程序。这是我的生产者代码：

```
public class Sender {
    private static final String QUEUE_NAME = "MdnaMessagesQueue";

    public void send(byte[] message) throws IOException {

        AMQP.BasicProperties.Builder bob = new AMQP.BasicProperties.Builder();
        AMQP.BasicProperties minBasic = bob.build();
        AMQP.BasicProperties minPersistentBasic = bob.deliveryMode(2).build();

        ExecutorService service = Executors.newFixedThreadPool(10);
        ConnectionFactory factory = new ConnectionFactory();
        factory.setHost("localhost");
        Connection connection = factory.newConnection(service);
        Channel channel = connection.createChannel();
        channel.queueDeclare(QUEUE_NAME, true, false, false, null);
        channel.basicPublish("", QUEUE_NAME, MessageProperties.PERSISTENT_TEXT_PLAIN, message);
        channel.close();
        connection.close();
    }
} 
```

# javascript - 如何在 SignalR 中获取用户？

> ID：16018186
> 
> 赞同：0
> 
> 时间：2013-04-15T14:46:03.803
> 
> 标签：javascript, asp.net, asp.net-mvc, signalr, signalr.client

我想在我的社交网络中编写 PM 消息，我需要使用长池请求。asp.net 的最佳解决方案是使用 SignalR，但这里有一些问题。这就是执行的方式：用户写一条消息，asp.net控制器保存它，然后我们需要调用对话者客户端方法并显示该消息。但是我可以选择对话者客户端，因为我不知道他生成的ClientId，而且从SignalR 1.0版本开始，我无法实现自己的ConnectionIdFactory。在这种情况下我能做什么？

# c++ - 在 QGLWidget 中绘制一个 cv::Mat？

> ID：16018191
> 
> 赞同：1
> 
> 时间：2013-04-15T14:46:11.430
> 
> 标签：c++, qt, opengl, opencv

我想知道如何将 cv::Mat 绘制到 QGLWidget 中。[我在这里](http://rafaelpalomar.net/blog/2013/01/3/displaying-webcam-output-using-opencv-opengl-and-qt/)找到了一种方法并尝试实现它。但我的小部件是黑色的。

这是我的小部件的代码：

h 文件

```
#ifndef GLVIEWER_H
#define GLVIEWER_H
#include <QtOpenGL/QGLWidget>
#include <QtOpenGL/QtOpenGL>
#include <opencv2/core/core.hpp>

class GLViewer : public QGLWidget {
    Q_OBJECT
public:
    GLViewer(QWidget *parent = NULL);
    void setNewFrame(cv::Mat newframe);
protected:
    void initializeGL();
    void resizeGL(int w, int h);
    void paintGL();
    void mousePressEvent(QMouseEvent *event);
    void mouseMoveEvent(QMouseEvent *event);
    void keyPressEvent(QKeyEvent *event);
    cv::Mat frame;
};
#endif // GLVIEWER_H 
```

.cpp 文件

```
#include "glviewer.h"
#include <iostream>
#include <QtGui/QMouseEvent>

GLViewer::GLViewer(QWidget *parent) : QGLWidget(parent) {
    setMouseTracking(true);
    frame = cv::Mat::ones(25, 50, CV_8UC3) * 255;
}

void GLViewer::setNewFrame(cv::Mat newframe) {
    frame = newframe;
    paintGL();
}

void GLViewer::initializeGL() {
    std::cout << "initializeGL" << std::endl;
    glViewport(0,0,this->width(), this->height());
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-this->width()/2, this->width()/2, this->height()/2, -this->height()/2, -1, 1);
}

void GLViewer::resizeGL(int w, int h) {
glViewport(0, 0, w, h);
//    glMatrixMode(GL_PROJECTION);
//    glLoadIdentity();
//    gluOrtho2D(0, w, 0, h); // set origin to bottom left corner
//    glMatrixMode(GL_MODELVIEW);
//    glLoadIdentity();
}

void GLViewer::paintGL() {

    //std::cout << "paint" << std::endl;

    glClear(GL_COLOR_BUFFER_BIT);
    glClearColor(1.0f, 0, 0, 1.0f);

    glDrawPixels(frame.rows, frame.cols,
                 GL_RGB,
                 GL_UNSIGNED_BYTE,
                 frame.data);

    } 
```

因为我已经用 'cv::Mat::ones(25, 50, CV_8UC3) * 255;' 初始化了 cv::Mat，所以我希望看到一个蓝色的小矩形，但是.. 什么都没有发生，全黑的小部件。

任何人都可以指出我的解决方案吗？

## 编辑

我试图将背景更改为红色，现在一切都是红色的。这是输出： ![在此处输入图像描述](https://i.stack.imgur.com/Wdg42.png)

背景是正确的，但是蓝色的矩形..不是蓝色的，即使它看起来是一个矩形..发生了什么？我试图反转 frame.cols 和 frame.cols，以及 GL_BGR 而不是 GL_RGB 以及一些数据类型的随机试验（GL_UNSIGNED_SHORT 等），但没有什么能得到更好的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:33:35.830

您`resizeGL()`正在清除您正在执行的矩阵设置`initializeGL()`，`glOrtho()`尤其是调用。

尝试将矩阵设置移动到`paintGL()`：

```
...

void GLViewer::initializeGL() 
{
    std::cout << "initializeGL" << std::endl;
    glViewport(0,0,width(), height());
}

void GLViewer::resizeGL(int w, int h) 
{
    glViewport(0, 0, w, h);
}

void GLViewer::paintGL() {
    std::cout << "paint" << std::endl;    
    glClear(GL_COLOR_BUFFER_BIT);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-width()/2.0, width()/2.0, height()/2.0, -height()/2.0, -1, 1);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glRasterPos2i(width()/2.0,-height()/2.0);
    // also try glRasterPos2i(0,0)
    glPixelZoom(-1.0f,-1.0f);
    glDrawPixels
        (
        frame.rows, frame.cols,
        GL_RGB,
        GL_UNSIGNED_BYTE,
        frame.data
        );
}

... 
```

**编辑：**`glPixelStore( GL_UNPACK_ALIGNMENT, 1 )`尝试在通话前发出 a `glDrawPixels()`。或切换到`GL_RGBA`四分量`cv::Mat`格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T15:38:44.137

`glDrawPixels`不是明智的选择。OpenGL 中的 2D 像素绘制速度非常慢。您真正想要做的是将矩阵加载到纹理中，然后在其上绘制带有纹理的图元。

**但是对于您的简单用例：**

我建议你使用 QGLWidget，但仍然使用 QPainter 来绘制东西。它将完全加速，但您不必处理所有这些转换等！

代码相当简单。看看： [https](https://sourceforge.net/p/gerbil/svn/HEAD/tree/trunk/gerbil-gui/scaledview.cpp) ://sourceforge.net/p/gerbil/svn/HEAD/tree/trunk/gerbil-gui/scaledview.cpp （自动缩放内容的小部件示例）

要将 Mat 转换为 QImage，请参阅： [https ://sourceforge.net/p/gerbil/svn/HEAD/tree/trunk/common/qtopencv.cpp](https://sourceforge.net/p/gerbil/svn/HEAD/tree/trunk/common/qtopencv.cpp)

转换 QImage <-> QPixmap 可以通过从另一个构造一个来隐式地完成。请注意，它本质上只会将图形卡上的图像数据作为纹理存储。

cv::Mat 到 QImage 的转换是“冗余”数据副本。不过真的可以忽略不计，试试吧！

# git - Lion OS - brew update 返回“执行时失败...”

> ID：16018196
> 
> 赞同：5
> 
> 时间：2013-04-15T14:46:19.967
> 
> 标签：git, osx-lion, homebrew, osx-mountain-lion

当我设置时，我正在尝试更新我的 brew

> 酿造更新

我收到此错误：

```
error: Your local changes to the following files would be overwritten by merge:
    Library/Formula/imagemagick.rb
Please, commit your changes or stash them before you can merge.
Aborting
Error: Failure while executing: git pull -q origin refs/heads/master:refs/remotes/origin/master 
```

或者

```
error: The requested URL returned error: 403 while accessing https://github.com/mxcl/homebrew/info/refs
fatal: HTTP request failed
Error: Failure while executing: git pull -q origin refs/heads/master:refs/remotes/origin/master 
```

Git有什么问题？如果这种方式不起作用，如何更新 brew？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-14T03:58:48.683

这是由`update`很久以前修复的代码中的旧错误引起的。但是，该错误的性质要求您执行以下操作：

```
cd $(brew --repository)
git reset --hard FETCH_HEAD 
```

如果`brew doctor`仍然抱怨未提交的修改，请运行以下命令：

```
cd $(brew --repository)    
git clean -fd 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-19T23:20:19.140

尝试在“常见问题”页面上[`brew update`抱怨未跟踪的工作树文件](https://github.com/mxcl/homebrew/wiki/Common-Issues#brew-update-complains-about-untracked-working-tree-files "brew update 抱怨未跟踪的工作树文件")下建议的解决方案。我有一个类似的问题，这为我解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:10:00.183

您收到的第一个错误表明以下内容：您`Library/Formula/imagemagick.rb`在工作目录中有一个已修改的文件，并且这些修改尚未提交。当您进行拉动时，您不能有未提交的更改，这`brew update`是隐式的。您必须遵守错误文本中给出的说明：在进行 brew update 之前，[提交](http://gitref.org/basic/#commit)所有修改过的文件，包括`imagemagick.rb`.

# r - 无法将数据框插入现有的 oracle 表

> ID：16018200
> 
> 赞同：1
> 
> 时间：2013-04-15T14:46:36.367
> 
> 标签：r, oracle

输入（头（数据，10））

```
structure(list(DATE = c("14-04-2013 00:02:30", "14-04-2013 00:03:00", 
"14-04-2013 00:03:30", "14-04-2013 00:04:00", "14-04-2013 00:04:30", 
"14-04-2013 00:05:00", "14-04-2013 00:05:30", "14-04-2013 00:06:00", 
"14-04-2013 00:06:30", "14-04-2013 00:07:00"), LPAR = c("server1", 
"server1", "server1", "server1", "server1", 
"server1", "server1", "server1", "server1", 
"server1"), ENT = c("0.50", "0.50", "0.50", "0.50", "0.50", 
"0.50", "0.50", "0.50", "0.50", "0.50"), USR_SYS_CPU_PCT = c(73L, 
74L, 75L, 75L, 72L, 73L, 74L, 75L, 75L, 74L), ENT_PCT = c(345.6, 
397.7, 394.2, 418.6, 349.2, 358.9, 585.7, 443.8, 464.9, 483.1
), PHYSICAL_CPU_USED = c(1.73, 1.99, 1.97, 2.09, 1.75, 1.79, 
2.93, 2.22, 2.32, 2.42)), .Names = c("DATE", "LPAR", "ENT", "USR_SYS_CPU_PCT", 
"ENT_PCT", "PHYSICAL_CPU_USED"), row.names = c(NA, 10L), class = "data.frame") 
```

我正在尝试将 dat 数据框插入到名为 VMSTAT 的现有 oracle 表中。我正在做这个插入：

```
library(RODBC)
ch=odbcConnect("<dsn name>",pwd = "<password>")
sqlSave(ch,dat, tablename="VMSTAT",append=T)
odbcClose(ch) 
```

不工作。我的 R 会话崩溃了。VMSTAT 表具有与数据框相同的列名。有没有人尝试将数据帧插入到 Oracle 表中，非常感谢任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:03:47.210

我发现了问题所在。我在 oracle 表上的 DATE 字段是 DATE 但在数据框中是一个字符。我不得不使用：

```
dat$DATE<-as.POSIXct(dat$DATE, format="%d-%m-%Y %H:%M:%S") 
```

它奏效了。

# mysql - 将 MySQL 根密码重置为“默认” - MAMP

> ID：16018201
> 
> 赞同：5
> 
> 时间：2013-04-15T14:46:42.917
> 
> 标签：mysql, phpmyadmin, terminal, mamp

我在 phpMyAdmin 上更改了我的根级密码。我不确定在哪里输入密码本身，因为它没有给我选项（登录表单）。我想知道它是否是 php.ini 文件，但是如果我将密码放在那里，具有读取权限的用户可以读取它。

现在，mysql 无法运行，因为我尝试了各种在线资源来解决问题。如果需要，我会删除 mamp 并重新安装，但我不想丢失我的数据库文件。理想情况下，我会将密码恢复为默认值，我认为这没什么，除了现在我无法连接到 phpmyadmin 或 mamp 起始页：

```
Error: Could not connect to MySQL server! 
```

任何帮助都会很棒。

更新 -

来自 mamp 的错误消息：

```
/Applications/MAMP/Library/bin/mysqlcheck: Got error: 1045: Access denied for user 'root'@'localhost' (using password: YES) when trying to connect 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-15T15:52:37.120

使用终端重置密码时，这似乎已经解决了：

```
/Applications/MAMP/Library/bin/mysqladmin -u root -p password newpassword 
```

在[mamp 常见问题解答](http://www.mamp.info/en/documentation/faq.html#q9)上找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-01T12:54:20.137

查看文件：

*   检查Mysql.sh
*   quickCheckMysqlUpgrade.sh
*   修复Mysql.sh
*   停止Mysql.sh

在这种情况下，重要的是“quickCheckMysqlUpgrade.sh”。所有文件都位于**/Applications/MAMP/bin/**目录中。

在这些文件中，您会发现类似

```
# /bin/sh
/Applications/MAMP/Library/bin/mysqlcheck --quick --check-upgrade -u root -proot --socket=/Applications/MAMP/tmp/mysql/mysql.sock mysql 
```

当您看到**-proot**是 MAMP 将尝试使用的密码时，-p{password}。

-p 表示“密码”，后面是密码。所以将“-proot”更改为例如。“-pmysecret”或任何您的密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-27T14:02:21.183

尽管我能够使用 phpMyAdmin 或其他 SQL 工具访问我的站点，但 MAMP 会显示启动“拒绝访问”错误，这让我很恼火。我什至在 checkMysql.sh、repairMysql.sh 和 upgradeMysql.sh 中找到/更新了密码。我没有注意到名为 quickCheckMysqlUpgrade.sh 的脚本并更正了密码，它为我修复了启动错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-24T05:36:01.377

我刚刚在我的 MBP 上解决了这个问题！在 MAMP Pro (v352) 中，转到 MySQL 选项卡并按“更改密码”。

# java - 动态增加editText中的行数

> ID：16018202
> 
> 赞同：0
> 
> 时间：2013-04-15T14:46:44.903
> 
> 标签：java, android

我有一个带有editText字段的布局。默认情况下，我必须在最初加载文本框时将大量数据放入文本框中。由于我在创建时动态拟合数据，因此我最初不知道数据的大小。有人可以告诉我如何动态增加editText字段的高度（在大数据上包括多行）？

```
 <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/textView5"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="About me :"
                    android:textAppearance="?android:attr/textAppearanceMedium"
                    android:textColor="@color/dboard_classwall_txt_color" />

                <EditText
                    android:id="@+id/text_about_me"
                    android:layout_width="match_parent"
                    android:layout_height="34dp"
                    android:background="@drawable/editbox_profile_bg"
                    android:gravity="center_vertical"
                    android:imeOptions="actionNext"
                    android:inputType="textPostalAddress"
                    android:maxLength="@integer/roster_max_contact_details_length"
                    android:minHeight="50dp"
                    android:paddingLeft="10dp"
                    android:paddingRight="10dp"
                    android:paddingTop="10dp"
                    android:singleLine="true"
                    android:textColor="@android:color/black"
                    android:textColorHint="@color/edit_prof_editbox_txt_color"
                    android:textCursorDrawable="@null" >

                    <requestFocus />
                </EditText>
            </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:54:45.167

我认为你应该使用

```
<EditText
                    android:id="@+id/text_about_me"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@drawable/editbox_profile_bg"
                    android:gravity="center_vertical"
                    android:imeOptions="actionNext"
                    android:inputType="textPostalAddress"
                    android:minHeight="50dp"
                    android:paddingLeft="10dp"
                    android:paddingRight="10dp"
                    android:paddingTop="10dp"
                    android:singleLine="false"
                    android:textColor="@android:color/black"
                    android:textColorHint="@color/edit_prof_editbox_txt_color"
                    android:textCursorDrawable="@null" > 
```

相反希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:00:07.833

只需这样做：

`android:layout_height="34dp"`=> `android:layout_height="wrap_content"`
`android:singleLine="true"`=>`android:singleLine="false"`

问候

# python - numpy 维度

> ID：16018203
> 
> 赞同：7
> 
> 时间：2013-04-15T14:46:48.230
> 
> 标签：python, numpy

我是 Numpy 的新手，并试图理解什么是维度的基本问题，

我尝试了以下命令并试图了解为什么最后 2 个数组的 ndim 相同？

```
>>> a= array([1,2,3])
>>> a.ndim
1
>>> a= array([[1,2,3],[4,5,6]])
>>> a
array([[1, 2, 3],
       [4, 5, 6]])
>>> a.ndim
2
>>> a=arange(15).reshape(3,5)
>>> a.ndim
2

>>> a
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14]]) 
```

我的理解..

```
Case 1:
    array([[1, 2, 3],
           [4, 5, 6]])

2 elements are present in main lists, so ndim is-2

Case 2:
    array([[ 0,  1,  2,  3,  4],
           [ 5,  6,  7,  8,  9],
           [10, 11, 12, 13, 14]]) 
```

主列表中存在 3 个元素，执行 ndim is-3

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-15T14:56:13.767

`shape`数组的 是其维度的元组。一维数组的形状为 (n,)。二维数组的形状为 (n,m) （如您的情况 2 和 3），三维数组的形状为 (n,m,k) 等等。

因此，虽然您的第二个和第三个示例的形状不同，但没有。两种情况下的尺寸都是二：

```
>>> a= np.array([[1,2,3],[4,5,6]])
>>> a.shape
(2, 3)

>>> b=np.arange(15).reshape(3,5)
>>> b.shape
(3, 5) 
```

如果您想为示例添加另一个维度，则必须执行以下操作：

```
a= np.array([[[1,2,3]],[[4,5,6]]]) 
```

或者

```
np.arange(15).reshape(3,5,1) 
```

您可以通过这种方式继续添加尺寸：

一维：

```
>>> a = np.zeros((2))
array([ 0.,  0.])
>>> a.shape
(2,)
>>> a.ndim
1 
```

两个维度：

```
>>> b = np.zeros((2,2))
array([[ 0.,  0.],
       [ 0.,  0.]])
>>> b.shape
(2,2)
>>> b.ndim
2 
```

三个维度：

```
>>> c = np.zeros((2,2,2))
array([[[ 0.,  0.],
        [ 0.,  0.]],

       [[ 0.,  0.],
        [ 0.,  0.]]])
>>> c.shape
(2,2,2)
>>> c.ndim
3 
```

四个维度：

```
>>> d = np.zeros((2,2,2,2))
array([[[[ 0.,  0.],
         [ 0.,  0.]],

        [[ 0.,  0.],
         [ 0.,  0.]]],

       [[[ 0.,  0.],
         [ 0.,  0.]],

        [[ 0.,  0.],
         [ 0.,  0.]]]])
>>> d.shape
(2,2,2,2)
>>> d.ndim
4 
```

# c# - c# wpf 使用 kinect 传感器在画布上绘制多线

> ID：16018210
> 
> 赞同：0
> 
> 时间：2013-04-15T14:47:20.527
> 
> 标签：c#, wpf, draw, kinect, lines

因此，首先让我向您展示我想要完成的任务：

[http://www.youtube.com/watch?NR=1&feature=endscreen&v=FdwZEepJxJ4](http://www.youtube.com/watch?NR=1&feature=endscreen&v=FdwZEepJxJ4)

那里的家伙正在使用 kinect 绘制一条长曲线。我需要做类似的东西。我有几个想法，只是简单的代码，比如

layoutGrid.Children.Add(myLine)

这有效，但不是我想要的方式。

我在想我可以使用drawingContext来画线：

drawingContext.DrawLine(drawPen, pointprev, point1);

问题是通过使用这种绘图方法，我绘制的线条不会保留在屏幕上。就像这条线总是被重画。我如何保持我的台词？

顺便说一句，我也不明白为什么用同样的方法绘制的骨架会更新，我们不需要清除图像中的前几行？

```
private void WindowLoaded(object sender, RoutedEventArgs e)
        {
            // Create the drawing group we'll use for drawing
            this.drawingGroup = new DrawingGroup();

            // Create an image source that we can use in our image control
            this.imageSource = new DrawingImage(this.drawingGroup);

            // Display the drawing using our image control
            Image2.Source = this.imageSource;

            ************Some other code here*******
         }

 private void SensorSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
        {
            *****************Some code to get skeleton data here********

            using (DrawingContext dc = this.drawingGroup.Open())
            {

                if (skeletons.Length != 0)
                {
                    foreach (Skeleton skel in skeletons)
                    {

                        if (skel.TrackingState == SkeletonTrackingState.Tracked)
                        {

                            this.DrawBonesAndJoints(skel, dc);                            
                        }

                    }
                }
            }           
        }

private void DrawBonesAndJoints(Skeleton skeleton, DrawingContext drawingContext)
        {
            ***********************Some code to draw skeleton***************

            Joint righthand = skeleton.Joints[JointType.HandRight];

            if (init == true)
            {
                pointprev = SkeletonPointToScreen(righthand.Position);
                init = false;
                return;
            }

            Point point1 = SkeletonPointToScreen(righthand.Position);

            Pen drawPen = this.trackedBonePen;

            drawingContext.DrawLine(drawPen, pointprev, point1);

            pointprev = point1;

        }

private Point SkeletonPointToScreen(SkeletonPoint skelpoint)
        {
            // Convert point to depth space.  
            // We are not using depth directly, but we do want the points in our 640x480 output resolution.
            DepthImagePoint depthPoint = this.sensor.CoordinateMapper.MapSkeletonPointToDepthPoint(skelpoint, DepthImageFormat.Resolution640x480Fps30);
            return new Point(depthPoint.X, depthPoint.Y);
        }

        private void DrawBone(Skeleton skeleton, DrawingContext drawingContext, JointType jointType0, JointType jointType1)
        {
            Joint joint0 = skeleton.Joints[jointType0];
            Joint joint1 = skeleton.Joints[jointType1];          

            Pen drawPen = this.trackedBonePen;   

            drawingContext.DrawLine(drawPen, this.SkeletonPointToScreen(joint0.Position),       this.SkeletonPointToScreen(joint1.Position));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:32:36.130

> 我如何保持我的台词？

您必须使用[Polyline](http://msdn.microsoft.com/en-us/library/system.windows.shapes.polyline.aspx)或通过[DrawGeometry](http://msdn.microsoft.com/en-us/library/system.windows.media.pathgeometry.aspx)将 PathGeometry或[StreamGeometry 绘制](http://msdn.microsoft.com/en-us/library/system.windows.media.streamgeometry.aspx)到 DrawingContext[中](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingcontext.drawgeometry.aspx)。几何图形必须包含一个或多个折线段。

# c# - containskey 和 gethashcode 的问题

> ID：16018215
> 
> 赞同：0
> 
> 时间：2013-04-15T14:47:39.543
> 
> 标签：c#, dictionary, gethashcode

我目前正在尝试使用 containskey 方法来检查我拥有的字典是否包含某个自定义类型的键。为此，我应该覆盖我拥有的 gethashcode 函数，但是 containskey 方法仍然不起作用。一定有什么我做的不对，但我还没有弄清楚在过去的 5 个小时里我到底在尝试什么：

```
public class Parameter : IEquatable<Parameter>
{
    public string Field { get; set; }
    public string Content { get; set; }

    public bool Equals(Parameter other)
    {
        if (other == null)
        {
            return false;
        }

        return Field.Equals(other.Field) && Content.Equals(other.Content);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            int hash = 17;
            hash = hash * 23 + Field.GetHashCode();
            hash = hash * 23 + Content.GetHashCode();
            return hash;
        }
    }
}

public class Trigger : IEquatable<Trigger>
{
    public Dictionary<int, Parameter> Parameters { get; private set; }
    private string Event { get; set; }

    public bool Equals(Trigger item)
    {
        if (item == null)
        {
            return false;
        }

        return Event.Equals(item.Event) && Parameters.Equals(item.Parameters);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            var hash = 17;
            hash = hash * 23 + Parameters.GetHashCode();
            hash = hash * 23 + Event.GetHashCode();
            return hash;
        }
    }
} 
```

为了更加清楚：我有一个字典（触发器，状态），我想检查它的键，所以我假设如果我确保我的所有子类都是平等的，我可以只使用 containskey 方法，但显然它没有。

编辑：我现在所做的是实现 Jon Skeet 的 Dictionary 类并使用它来检查：

```
public override bool Equals(object o)
{
    var item = o as Trigger;
    if (item == null)
    {
        return false;
    }

return Event.Equals(item.Event) && Dictionaries.Equals(Parameters, item.Parameters);
}

public override int GetHashCode()
{
    var hash = 17;
    hash = hash * 23 + Dictionaries.GetHashCode(Parameters);
    hash = hash * 23 + Event.GetHashCode();
    return hash;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:49:32.680

`Dictionary<,>`本身不会覆盖`Equals`-`GetHashCode`所以你的`Trigger`实现被破坏了。您需要弄清楚您想要什么平等并自己实施。

我[在 protobuf-csharp-port](https://code.google.com/p/protobuf-csharp-port/source/browse/src/ProtocolBuffers/Collections/Dictionaries.cs)中有一个示例实现，您可能想查看它。

编辑：您的更改仍然不太正确。你应该像这样实现平等：

```
return Event.Equals(item.Event) && 
       Dictionaries.Equals(Parameters, item.Parameters); 
```

并实现`GetHashCode`为：

```
var hash = 17;
hash = hash * 23 + Dictionaries.GetHashCode(Parameters);
hash = hash * 23 + Event.GetHashCode();
return hash; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:53:41.527

您应该使用重载的构造函数：

```
Dictionary<TKey, TValue>(IDictionary<TKey, TValue>, IEqualityComparer<TKey>) 
```

而不是使用自动属性，而是使用备份字段。

# php - Facebook 登录 (JavaScript) 突然停止工作

> ID：16018223
> 
> 赞同：1
> 
> 时间：2013-04-15T14:47:58.653
> 
> 标签：php, javascript, facebook, login

我一直在使用以下 JavaScript 通过 Facebook 登录我的用户。它已经工作了几个星期，但突然停止工作了。

当我单击登录按钮时，常规的 Facebook 连接窗口正在打开，但是当我登录时，会话似乎仍未设置。

```
<div id="fb-root"></div>
<script type="text/javascript">
window.fbAsyncInit = function() {
FB.init({appId: 'MY_APP_ID',cookie: true,xfbml: true,channelUrl: 'http://MYURL.com/channel.php',oauth: true});};
(function() {var e = document.createElement('script');
e.async = true;e.src = document.location.protocol +'//connect.facebook.net/en_US/all.js';
document.getElementById('fb-root').appendChild(e);}());

function CallAfterLogin(){
        FB.login(function(response) {       
        if (response.status === "connected") 
        {
            LodingAnimate(); //Animate login
            FB.api('/me', function(data) {

                window.location = 'http://MYURL.com/<?=$_SESSION['lang']; ?>';

          });
         }
    });
}

</script> 
```

**channel.php**中的代码：

```
<?php
$cache_expire = 60*60*24*365;
header("Pragma: public");
header("Cache-Control: max-age=".$cache_expire);
header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$cache_expire) . ' GMT');
?><script src="//connect.facebook.net/en_US/all.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:35:39.513

这是您应该如何处理用户状态：

```
<div id="fb-root"></div>
<script type="text/javascript">
window.fbAsyncInit = function() {
            FB.init({
              appId      : 'MY_APP_ID', // App ID
              channelUrl : 'http://MYURL.com/channel.php', // Channel File
              status     : true, // check login status
              cookie     : true, // enable cookies to allow the server to access the session
              xfbml      : true  // parse XFBML
            });

            // Additional initialization code here
            FB.getLoginStatus(function (response) {
            if (response.status === 'connected') {
               FB.api('/me', function(data) {

                window.location = 'http://MYURL.com/<?=$_SESSION['lang']; ?>';

               });
            } else if (response.status === 'not_authorized') {
                //you must ask permissions to the user
            } else {
                //user is not logged, just change the scope for the ones you want or remove
                //it if you don't need any additional permissions
                FB.login(function(response) { }, {scope:'email,user_likes'}); 
            }
        });
        };

        // Load the SDK Asynchronously
        (function(d){
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) {return;}
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/pt_PT/all.js";
            ref.parentNode.insertBefore(js, ref);
        }(document));
</script> 
```

**编辑**

这是您页面的当前代码

```
<body>

<div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" scrolling="no" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tab-index="-1" style="border: none;" src="http://static.ak.facebook.com/connect/xd_arbiter.php?version=21#channel=f2c633f99&amp;origin=http%3A%2F%2Ftictam.com&amp;channel_path=%2Fse%3Ffb_xd_fragment%23xd_sig%3Dfd496acc4%26"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tab-index="-1" style="border: none;" src="https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=21#channel=f2c633f99&amp;origin=http%3A%2F%2Ftictam.com&amp;channel_path=%2Fse%3Ffb_xd_fragment%23xd_sig%3Dfd496acc4%26"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="f68921bbc" frameborder="0" allowtransparency="true" scrolling="no" style="display: none;" src="https://www.facebook.com/dialog/oauth?client_id=APP_ID&amp;response_type=token%2Csigned_request%2Ccode&amp;display=none&amp;domain=tictam.com&amp;origin=1&amp;redirect_uri=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D21%23cb%3Df1f63150cc%26origin%3Dhttp%253A%252F%252Ftictam.com%252Ff2c633f99%26domain%3Dtictam.com%26relation%3Dparent&amp;sdk=joey"></iframe></div></div></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/sv_SE/all.js#xfbml=1&appId=APP_ID";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div id="intro_form" style="margin-top: -2px; top: 0px; position: fixed; z-index: 100; min-height: 50px;">

    <a href="/se"><img src="/logo3.png" style="margin-bottom: -19px;" border="0"></a>

<form method="post" action="/se/find" style="margin: 0px; padding: 0px; clear: none; display: inline;" id="search_form">
   <input type="text" name="what" placeholder="Vad?" value=""> <input type="text" name="where" placeholder="Var?" value=""> <input type="submit" name="search" id="intro_submit" value="Sök!" style="width: 224px !important; cursor: pointer; margin-right: 4px;"> 
   </form>

   <form method="post" action="/se/find" style="margin: 0px; padding: 0px; clear: none; display: none; margin-top: 20px;" id="search_form_2">
   <input type="text" name="what" placeholder="Vad?" value=""> <input type="text" name="where" placeholder="Var?" value=""> <input type="submit" name="search" id="intro_submit" value="Sök!" style="width: 224px !important; cursor: pointer; margin-right: 4px;"> 
   </form>

   <img src="/search-icon.png" width="35" height="35" id="search_icon" style="display: none; margin-top: 11px; margin-right: 11px; float: right; clear: both;">

    </div>

    <script type="text/javascript">

    $(document).ready(function()
    {
        if ( $(window).width() < 900) 
        {
            $("#search_form").hide();
            $("#search_icon").show();
        }
    });

    $("#search_icon").click(function()
    {
        $("#search_form_2").toggle("slow");
    });

    </script>

    <div style="height: 50px;"></div>

<div id="fb-root"></div>
<script type="text/javascript">
window.fbAsyncInit = function() {
            FB.init({
              appId      : '360183997416092', // App ID
              channelUrl : 'http://tictam.com/channel.php', // Channel File
              status     : true, // check login status
              cookie     : true, // enable cookies to allow the server to access the session
              xfbml      : true  // parse XFBML
            });

            // Additional initialization code here
            FB.getLoginStatus(function (response) {
            if (response.status === 'connected') {
               FB.api('/me', function(data) {

                window.location = 'http://tictam.com/se';

               });
            } else if (response.status === 'not_authorized') {
                //you must ask permissions to the user
            } else {
                //user is not logged, just change the scope for the ones you want or remove
                //it if you don't need any additional permissions
                FB.login(function(response) { }, {scope:'email, user_work_history, user_education_history'}); 
            }
        });
        };

        // Load the SDK Asynchronously
        (function(d){
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) {return;}
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/pt_PT/all.js";
            ref.parentNode.insertBefore(js, ref);
        }(document));
</script> 
```

正如您在标签旁边看到的那样，`<body>`您正在加载一个 javascript sdk，然后在底部您再次使用我的代码加载，删除第一个并将我的代码移动到`<body>`标签旁边

# java - 有没有一种快速的方法来将函数应用于一组变量？

> ID：16018224
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:47:58.817
> 
> 标签：java, eclipse

假设我有很多变量

```
String not_id, not_section, not_steet, not_sqTotal, not_sqLiving, not_sqKitchen, not_flat, not_floor, not_floors, not_text, user_phone1, user_phone2, user_contact, not_region, not_district, not_settle, not_price, not_photo, not_date, not_date_till, not_up, not_premium, not_status;

not_id= not_section= not_steet= not_sqTotal= not_sqLiving=
                not_sqKitchen= not_flat= not_floor= not_floors= not_text=
                user_phone1= user_phone2= user_contact= not_region= not_district=
                not_settle= not_price= not_photo= not_date= not_date_till= not_up=
                not_premium= not_status=region_title=district_title=settle_title=section_title=""; 
```

我需要使用 someFunction 更改它们的值

```
not_id = someFunction(not_id); 
```

我怎样才能对所有变量执行这样的操作？

如果假设将变量名称更改为某个统一名称，请不要建议使用数组、列表和其他类型的集合。

我想知道在 java 本身、eclipse ide 或 eclipse 插件中是否存在这种可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:57:09.277

这将导致代码有些难以维护，但您可以通过在第二条语句上使用正则表达式搜索和替换来轻松完成，将“var_name =”替换为“var_name = someFunction(var_name);”。

查找：([^=])+=

替换为：\1 = someFunction(\1);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:03:44.270

是`someFunction`java方法吗？还是一些简单的变压器正在从`not_([a-z])(\w*)`变为`not[A-Z]\2`？如果您只更改变量名称，请使用 eclipse 的出色重构重命名绑定到`Ctrl+Shift+R`它可以更改所有出现考虑范围规则

# doctrine-orm - Zend Framwork 2 中的一对多映射与学说

> ID：16018226
> 
> 赞同：0
> 
> 时间：2013-04-15T14:47:59.820
> 
> 标签：doctrine-orm, zend-framework2

我正在尝试制作一个页面来处理我的发票。我在一个表中有发票数据，在另一个表中有发票行。表格如下所示：

```
CREATE TABLE IF NOT EXISTS `Invoices` (
  `I_Id` int(10) NOT NULL AUTO_INCREMENT,
  `I_Number` int(4) NOT NULL,
  `I_ClientId` int(10) NOT NULL,
  `I_ExtraText` text NOT NULL,
  PRIMARY KEY (`I_Id`)
) ENGINE=InnoDB

CREATE TABLE IF NOT EXISTS `InvoiceRows` (
  `IR_Id` int(10) NOT NULL AUTO_INCREMENT,
  `IR_InvoiceId` int(10) NOT NULL,
  `IR_Price` int(10) NOT NULL,
  `IR_Vat` smallint(2) unsigned NOT NULL,
  `IR_Quantity` int(10) NOT NULL,
  `IR_Text` varchar(255) NOT NULL,
  PRIMARY KEY (`IR_Id`),
  KEY `IR_InvoiceId` (`IR_InvoiceId`)
) ENGINE=InnoDB 
```

这是我的映射：

```
class Invoice {
    /**
     * @ORM\OneToMany(targetEntity="Row", mappedBy="invoice" ,cascade={"persist"})
     */
    protected $rows;
}

class Row {
    /**
     * @ORM\ManyToOne(targetEntity="Invoice", inversedBy="rows", cascade={"persist"})
     * @ORM\JoinColumn(name="IR_InvoiceId", referencedColumnName="I_Id")
     **/
    private $invoice;
} 
```

我一直在尝试遵循关于如何设置一对多、双向映射的[教义文档中的示例。](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#one-to-many-bidirectional)然后将其与 Zend Framework 2 连接并[形成集合](http://framework.zend.com/manual/2.1/en/modules/zend.form.collections.html)。拉取数据效果很好。我得到每张发票的所有行。

我的问题是当我想写回数据库并保存我的更改时。当我尝试保存时，出现以下错误：

```
An exception occurred while executing 'INSERT INTO
MVIT_ADM__InvoiceRows (IR_InvoiceId, IR_Price, IR_Vat, IR_Quantity,
IR_Text) VALUES (?, ?, ?, ?, ?)' with params
{"1":null,"2":320,"3":0,"4":1,"5":"Learning your dog to sit"}:

SQLSTATE[23000]: Integrity constraint violation: 1048 Column
'IR_InvoiceId' cannot be null 
```

我做错了什么？从 post 中检查数据时值不为空。

编辑：可以在[Github找到完整的源代码](https://github.com/riceri/MvitInvoice)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:24:25.707

似乎 IR_InvoiceId 为空，它需要发票的 Id (I_Id) 值，因此请确保在 InvoiceRows 表中插入数据时，在您提到表关系时将 Invoices (I_Id) 值作为 IR_InvoiceId 传递。

祝你好运！萨兰 ﻿</p>

# c# - C#：对数组列表进行排序

> ID：16018231
> 
> 赞同：-5
> 
> 时间：2013-04-15T14:48:17.473
> 
> 标签：c#, .net, arrays, linq

如何按元素的第一列对以下列表进行排序？元素是 type `string[]`。

```
List<string[]> list = new List<string[]>(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T14:49:32.100

这可能会有所帮助

```
list.OrderBy(input=>input[columnIndex]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:53:55.210

使用[`Enumerable.OrderBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderby.aspx)列索引的方法；

> 按升序对序列的元素进行排序。

```
string[] i = new string[] { "one", "two", "three" };
string[] j = new string[] { "four", "five", "six" };

List<string[]> list = new List<string[]>() {i, j};
var newlist = list.OrderBy(n => n[1]); 
```

这将返回一个新的排序列表。

# java - Apache commons StringEscapeUtils.unescapeJava("\\") 返回 ""

> ID：16018235
> 
> 赞同：1
> 
> 时间：2013-04-15T14:48:25.900
> 
> 标签：java, stringescapeutils

以下代码：

```
final String INVALID_ESCAPE="\\";
System.out.println(String.format("'%s' -> '%s'", INVALID_ESCAPE, 
    StringEscapeUtils.unescapeJava(INVALID_ESCAPE))); 
```

...产生：

```
'\' -> '' 
```

在控制台上。由于`'\'`不是有效的转义，我希望在运行时出现异常。我错过了什么吗？

[更新：在Apache jira](https://issues.apache.org/jira/browse/LANG-885)中填写了一个错误（？）报告

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:14:44.023

从[来源](http://svn.apache.org/viewvc/commons/proper/lang/trunk/src/main/java/org/apache/commons/lang3/StringEscapeUtils.java?revision=1467206&view=markup)：

```
// TODO: throw "illegal character: \92" as an Exception if a \ on the end of the Java (as per the compiler)? 
```

发送补丁 ;-)

# sql - 将查询中的单个列与许多列聚合

> ID：16018237
> 
> 赞同：4
> 
> 时间：2013-04-15T14:48:35.820
> 
> 标签：sql, postgresql, aggregate-functions

当查询中有许多其他列时，是否有适当的方法来聚合单个列？

我已经尝试过[这个有效的答案](https://stackoverflow.com/a/43944/1331430)，但我的查询变得更加冗长。

我当前的查询如下所示：

```
SELECT t1.foo1, t1.foo2, t2.foo3, t2.foo4, string_agg(t3.aggregated_field, ', ')
FROM tbl1 t1
LEFT JOIN tbl2 t2 ON t1.id = t2.fkeyid
LEFT JOIN tbl3 t3 ON t2.id = t3.fkeyid
GROUP BY t1.foo1, t1.foo2, t2.foo3, t2.foo4, t2.foo5, t2.foo6
ORDER BY t2.foo5, t2.foo6 
```

查询有更多的字段和`LEFT JOIN`s，重要的部分是所有这些字段都具有 1 到 1 或 1 到 0 的关系，除了我要聚合的 1 到 n 的一个字段，`t3.aggregated_field`在上面的伪查询中表示。

由于我使用的是聚合函数，`SELECT`and中列出的所有字段都`ORDER BY`必须是聚合的或`GROUP BY`子句的一部分。这使我的查询方式比现在更详细。

也就是说，假设`foo1`是一个主键，当这个字段重复时，除此之外`aggregated_field`的所有其他字段也相等。我希望这些重复的行作为带有聚合字段值的单行结果。（基本上是`select distinct`一个聚合列）

有没有更好的方法来做到这一点（不必将所有其他字段放在 中`GROUP BY`）或者我应该只在后端对结果集进行迭代，为获取这种 1 到 n 关系的每一行执行查询？

* * *

服务器正在运行 PostgreSQL 9.1.9，更具体地说：

> x86_64-unknown-linux-gnu 上的 PostgreSQL 9.1.9，由 gcc (GCC) 4.1.2 20080704 (Red Hat 4.1.2-54) 编译，64 位

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T19:32:47.483

### 简单查询

使用 PostgreSQL **9.1 或更高版本**，这会**简单得多**。正如这个密切相关的答案中所解释的：

 ***   [PGError：错误：对象及其 has_many 对象的 AR 查询的 WHERE 子句中不允许聚合](https://stackoverflow.com/questions/8684486/rails-3-getting-a-pgerror-error-aggregates-not-allowed-in-where-clause-on-a-a/8684512#8684512)

一个表`GROUP BY`的*主键*就足够了。自从：

> foo1 是主键

..您可以将示例简化为：

```
SELECT foo1, foo2, foo3, foo4, foo5, foo6, string_agg(aggregated_field, ', ')
FROM   tbl1
GROUP  BY 1
ORDER  BY foo7, foo8;  -- have to be spelled out, since not in select list! 
```

### 多表查询

但是，既然你有：

> 更多字段和 LEFT JOIN，重要的部分是所有这些字段都具有 1 到 1 或 1 到 0 的关系，除了我要聚合的 1 到 n 的一个字段

**..首先聚合**应该更快更简单，稍后加入：

```
SELECT t1.foo1, t1.foo2, ...
     , t2.bar1, t2.bar2, ...
     , a.aggregated_col 
FROM   tbl1 t1
LEFT   JOIN tbl2 t2 ON ...
...
LEFT   JOIN (
   SELECT some_id, string_agg(agg_col, ', ') AS aggregated_col
   FROM   agg_tbl a ON ...
   GROUP  BY some_id
   ) a ON a.some_id = ?.some_id
ORDER  BY ... 
```

这样，您的大部分查询根本不需要聚合。

我最近在 SQL Fiddle 中提供了一个测试用例来证明这个相关答案中的观点：

*   [PostgreSQL - 按数组排序](https://stackoverflow.com/questions/15664373/postgresql-order-by-an-array/15674585#15674585)

由于您指的是[这个相关的答案](https://stackoverflow.com/a/1777448/1331430)：不，`DISTINCT`在这种情况下根本没有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:08:23.803

如果主要问题是计算字段（foox），那么这会有所帮助：

```
SELECT foo1, foo2, foo3, foo4, foo5, foo6, string_agg(aggregated_field, ', ')
FROM tbl1
GROUP BY 1, 2, 3, 4, 5, 6
ORDER BY 5, 6 
```

这些`1, 2...`字段按照它们在选择列表中出现的顺序排列。**

# assembly - 为什么在 ASM 中使用十六进制？

> ID：16018241
> 
> 赞同：2
> 
> 时间：2013-04-15T14:48:39.303
> 
> 标签：assembly, hex

我似乎找不到这个问题的答案，这真的开始困扰我了。这仅仅是因为十六进制值由 4 位组成吗？（假设第二个操作数是整数，否则请指出我是否不正确）

```
mov   ebx,0x00   ; why not ebx,0?
mov   eax,0x01   ; why not ebx,1? 
```

在对 进行系统调用时，上述内容似乎适用于两者`sys_exit(0)`，因此我对为什么使用十六进制感到困惑，如果以另一种方式更容易做到的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:53:21.883

使用对给定上下文有意义的任何基础都是很好的做法。您在 ASM 中所做的大部分工作都是处理寄存器、内存地址等，这些通常以十六进制表示。花更多时间在组装上，看看你是否仍然认为 base 10 “更容易”。

# clojure - 将映射键和值转换为字符串数组

> ID：16018242
> 
> 赞同：7
> 
> 时间：2013-04-15T14:48:41.790
> 
> 标签：clojure

如何将一个clojure map转换成字符串，几乎是键值对，如下图：

Clojure 数据：

```
(def data { :starks "Winter is coming" :Lannisters "Hear me roar" }) 
```

我想将以上内容转换为

```
"starks" "winter is coming" "Lannisters" "hear me roar" 
```

我不想要任何标识符/分隔符，但显然`"starks"`应该始终跟随`"winter is coming"`

我试过这个：

```
(str (keys data) (vals data)) 
```

哪个输出：

```
"(:starks :Lannisters)(\"Winter is coming\" \"Hear me roar\")" 
```

这根本不是我想要的……

*   地图数据键和值并不总是相同，因此需要通用
*   总是只有一个级别，例如，该值将不包含嵌套映射等。

* * *

**编辑**

我实际上正在尝试做的事情：

我正在尝试用 clojure索引几千个[Neo4j节点。](http://www.neo4j.org/)为了帮助我完成这项任务，我正在使用[Neocons Clojure neo4j](https://github.com/michaelklishin/neocons)库。

根据[文档](http://clojureneo4j.info/articles/populating.html#gist3042745)，`add-to-index`接受属性和值如下：

```
(nn/add-to-index (:id node) (:name idx) "username" "joe"))) 
```

也就是说，在我上面的例子中，看起来像

```
(nn/add-to-index (:id node) (:name idx) "starks" "winter is coming" "Lannisters" "Hear me roar"))) 
```

现在，我有了我的节点，我可以使用它访问节点属性，`(:data node)`这给了我一个 clojure 映射。

该属性因节点而异，因此我试图弄清楚如何以它理解的方式将该映射传递给库。

[Marius Danila](https://stackoverflow.com/a/16018544/435867)的回答让我几乎到了那里。

正在做

```
(map name (apply concat data)) 
```

仍然抱怨第三个参数，因为它在结果周围有大括号。

那么，我该如何实现呢？我是否只需要编写很多`if-not`块来自己构建属性？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T15:03:15.793

这应该可以解决问题：

```
(map name (apply concat data)) 
```

可以将映射视为一系列键值对，而这些键值对又表示为 2 个元素的数组。我们将这些对连接起来，然后从关键字和字符串中提取名称（对于字符串，它什么都不做，对于关键字，它返回不带':'的位）。

从您发布的代码中，我猜您会像这样使用它：

```
(apply nn/add-to-index (list* (:id node) (:name idx) (map name (apply concat data)))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T16:09:31.140

您可以使用向量来获得像随机访问这样的数组：

```
=> (def v (vec (map name (apply concat data))))
=> (v 0)
;"starks"
=> (v 1)
;"Winter is coming" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T06:08:33.570

您可以尝试以下方法：

```
=> (interleave (map name (keys data)) (vals data))

;; which returns ("starks" "Winter is coming" "Lannisters" "Hear me roar") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T18:19:07.983

该`(nn/add-to-index ...)`函数只接受四个参数。节点、索引和一个键/值对。因此，您也可以像这样循环遍历数据。

```
(doseq [[k v] data]
  (nn/add-to-index (:id node) (:name idx) (name k) (clojure.string/lower-case v)))) 
```

与`str`Clojure 中的函数不同，该`add-to-index`函数受到更多限制，根本不接受可变参数列表。

# matplotlib - Pylab 等高线图使用 Mollweide 投影创建人工制品

> ID：16018243
> 
> 赞同：2
> 
> 时间：2013-04-15T14:48:43.407
> 
> 标签：matplotlib, map-projections

该脚本的目的是使用 pylab 在 Mollweide 投影中绘制一些数据的等高线图。有一个奇怪的行为`contourf`。这是代码

```
import numpy as np
import pylab as plt

ra = np.linspace(-np.pi, np.pi, 40)
dec= np.linspace(-np.pi/2, np.pi/2, 20)
X,Y = np.meshgrid(ra,dec)
Z = np.sin(X) * np.cos(X) * np.sin(Y) * np.cos(Y)

plt.figure()
ax = plt.subplot(111, projection = 'mollweide')
ax.contourf(X,Y,Z,100)
ax.contour(X,Y,Z,10,colors='k')

plt.show() 
```

有些点似乎画错了（见下图）。

![摩尔韦德](https://i.stack.imgur.com/Vpqsm.png)

没有投影使用的相同代码输出完美的法线贴图： ![在此处输入图像描述](https://i.stack.imgur.com/yBDml.png)

您可能已经注意到，轮廓线在两个图像中都能完美地工作。文物似乎总是在同一个地方。

有没有办法纠正这种人工制品的产生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:08:11.313

由于[Mollweide 投影](http://en.wikipedia.org/wiki/Mollweide_projection)在 +/- 90° 的纬度上具有奇点，因此似乎存在一些潜在问题。@pelson 在[github](http://github.com/matplotlib/matplotlib/issues/1910)上建议的解决方案是使用 Basemap：

```
from mpl_toolkits.basemap import Basemap
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.cm as cm

ra = np.linspace(-np.pi, np.pi, 40)
dec= np.linspace(-np.pi/2, np.pi/2, 20)
X,Y = np.meshgrid(ra,dec)
Z = np.sin(X) * np.cos(X) * np.sin(Y) * np.cos(Y)
RAD = 180/np.pi

m = Basemap(projection='moll',lon_0=0,resolution='c')
m.contour(X*RAD, Y*RAD, Z, 10, colors='k',latlon=True)
m.contourf(X*RAD, Y*RAD, Z, 100, cmap=plt.cm.jet,latlon=True)

plt.show() 
```

此代码的工作原理如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/pdUSQ.png)

# android - 测试期间无法在应用内购买 SKU

> ID：16018245
> 
> 赞同：1
> 
> 时间：2013-04-15T14:48:48.143
> 
> 标签：android, in-app-billing

我正在将应用内计费添加到我现有的应用之一。为了测试这一点，我在 google play 中创建了一个草稿应用程序，上传了带有应用内计费的新版本的 apk 并添加了一个产品。我激活了这个产品，但我没有发布这个新的测试应用程序。

但是在测试时，在查询新创建的 SKU 时，代码找不到它。我必须发布我的应用程序才能正常工作吗？我在这里做错了吗？

编辑：我正在使用 IABv3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T02:39:47.573

我发现了问题。我正在使用 TrivialDrive 示例。我的印象是代码会自动查找并加载所有 SKU。但是在再次浏览文档后，我发现我需要将 SKU 作为参数传递。

```
 ArrayList skuList = new ArrayList();
  skuList.add(Product.SKU);             

  Log.d(TAG, "Setup successful. Querying inventory.");
  //mHelper.queryInventoryAsync(mGotInventoryListener);
  mHelper.queryInventoryAsync(true, skuList, mGotInventoryListener); 
```

# javascript - 从 Javascript 中的 Google Analytics API 获取综合浏览量

> ID：16018247
> 
> 赞同：4
> 
> 时间：2013-04-15T14:48:50.223
> 
> 标签：javascript, web, google-analytics

我无法使用 javascript 从 Google Analytics API 获取数据。我似乎无法获取任何东西，但可以说它是一些基本的东西，比如网页浏览量。

我正在使用[Analytics.js](https://developers.google.com/analytics/devguides/collection/analyticsjs/)

这是我用来连接到 GA API 的代码：

```
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'XXX', 'example.com');
    ga('send', 'pageview'); 
```

那么我现在如何获得综合浏览量？我尝试使用此代码，但它返回未定义：

```
ga(function() {
      var tracker = ga.getByName('t0');
      alert(tracker.get('page'));
    }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T15:08:19.903

Analytics.js 是一个跟踪 API。它只是跟踪/发送数据到谷歌分析。

为了从 Google Analytics 中检索数据，您需要使用不同的 API。查找报告 API。

[https://developers.google.com/analytics/devguides/reporting/](https://developers.google.com/analytics/devguides/reporting/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T07:32:47.283

您可以使用跟踪器对象获取作为有效负载发送的变量。

例如：

```
ga(function(tracker) {
  var defaultPage = tracker.get('location');console.log(defaultPage);
}); 
```

（有关更多信息，请参阅 analytics_debug.js）

# google-chrome - CDN 库在 Chrome 中被阻止

> ID：16018250
> 
> 赞同：6
> 
> 时间：2013-04-15T14:48:56.633
> 
> 标签：google-chrome, leaflet, openstreetmap

我正在将传单/OSM 用于站点上的小地图。该站点本身可通过 HTTPS 访问，而传单库只能通过 HTTP 连接检索（afaik）。现在 Chrome 不包含该库，并在控制台中给我以下消息：

> ```
> [blocked] The page at https://example.com/foo/bar ran insecure content from http://cdn.leafletjs.com/leaflet-0.5/leaflet.css_ 
> ```

知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-05-28T04:07:11.897

[http://cdnjs.com/libraries/leaflet/](http://cdnjs.com/libraries/leaflet/)有传单。他们也有 HTTPS 版本。

```
//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css
//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js 
```

在您的代码中使用上述 URL。用于加载当前页面的相同协议也将用于获取 Leaflet 资产。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-16T12:46:36.627

您可以自己提供必要的 javascript 和 css 文件，而不是使用托管版本的传单：只需在[http://leafletjs.com/download.html](http://leafletjs.com/download.html)获取最新版本的传单并将目录“dist”复制到您的项目目录. 之后，您可以将链接从“ [http://cdn.leafletjs.com/leaflet-0.5/](http://cdn.leafletjs.com/leaflet-0.5/) *”更改为“./dist/* ”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-19T06:21:04.530

从您的参考资料中删除“http：”。尝试“//cdn.leafletjs.com/leaflet-0.5/leaflet.css”。它将使用当前页面的协议来发送请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-30T09:29:52.593

Tiles 是通过 HTTP 下载到 CDN 上的，因此将 js/css 放入 SSL 几乎没有帮助

# javascript - 简化 JQuery 代码

> ID：16018256
> 
> 赞同：-3
> 
> 时间：2013-04-15T14:49:06.223
> 
> 标签：javascript, jquery, if-statement, simplify

再会！

我想问一件事。有没有这样一种方法可以缩短我在 jquery 中的这些行？我的意思是特别在 if-else 部分。谢谢！

* * *

```
$("#banner a").bind("click",function(event){//2 

event.preventDefault();

target = $(this).attr("href");

    if(target=="#home"){
               $("#prevID").attr("class","");
               $("#nextID").attr("class","next");
               $("#nextID").attr("href","#home");
               $("#prevID").attr("href","#home");

           }else if(target=="#newsletter"){
                $("#prevID").attr("class","prev");
               $("#nextID").attr("href","#newsletter");
               $("#prevID").attr("href","#newsletter");

           }else if(target=="#directions"){
               $("#prevID").attr("class","prev");
               $("#nextID").attr("href","#directions");
               $("#prevID").attr("href","#directions");

           }else if(target=="#contact"){
               $("#prevID").attr("class","prev");
               $("#nextID").attr("class","");
               $("#nextID").attr("href","#contact");
               $("#prevID").attr("href","#contact");

           }else{}

           $("html, body").stop().animate({
               scrollLeft: $(target).offset().left,
               scrollTop: $(target).offset().top
           }, 1200);
       });//closing 2

       $(".next").bind("click",function(event){//3
           event.preventDefault();
            target = $(this).attr("href");
            if(target=='#home'){
               a='#newsletter';
               $(".next").attr("href","#newsletter");
               $("#prevID").attr("class","prev");
               $("#prevID").attr("href","#newsletter");
           }else if(target=='#newsletter'){
                 a='#directions';
                 $(".next").attr("href","#directions");
                  $("#prevID").attr("href","#directions");
           }else if(target=='#directions'){
                a='#contact';
                 $(".next").attr("href","#contact");
                  $("#prevID").attr("href","#contact");
                $(".next").attr("class","");
           }else{}

           $("html, body").stop().animate({
               scrollLeft: $(a).offset().left,
               scrollTop: $(a).offset().top
           }, 1200);

         // $(".next").attr("href","#");
       });//closing 3

       $("#prevID").bind("click",function(event){//3
           event.preventDefault();
            target = $(this).attr("href");

            if(target=='#newsletter'){
               a='#home';
               $("#prevID").attr("href","#home");
               $(".next").attr("href","#home");
                $("#prevID").attr("class","");
           }else if(target=='#directions'){
                a='#newsletter';
               $("#prevID").attr("href","#newsletter");
               $(".next").attr("href","#newsletter");

           }else if(target=='#contact'){
                a='#directions';
               $("#prevID").attr("href","#directions");
              $("#nextID").attr("class","next");
              $("#nextID").attr("href","#directions");

           }else{}

           $("html, body").stop().animate({
               scrollLeft: $(a).offset().left,
               scrollTop: $(a).offset().top
           }, 1200);

         // $(".next").attr("href","#");
       });//closing 3

    }); 
```

* * *

看起来有点匆忙。另外，我还在学习 jquery，所以我为非常规的语法道歉。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:34:54.073

您可能会在[http://codereview.stackexchange.com](http://codereview.stackexchange.com)中获得对此请求的更多响应，但这里有一个关于如何使用查找表而不是多个`if/else if`语句来简化第一个代码块并避免重复大量代码的想法：

```
$("#banner a").click(function(event){//2 
    event.preventDefault();
    target = $(this).attr("href");
    var data = {
        // target: [prevID class, nextID class]
        "#home": ["", "next"],
        "#newsletter": ["prev", null],
        "#directions": ["prev", null],
        "#contact": ["prev", ""]
    };
    var item = data[target];
    if (item) {
        $("#nextID").attr("href", target);
        $("#prevID").attr("href", target).attr("class", item[0]);
        if (item[1] !== null) {
            $("#nextID").attr("class", item[1]);
        }
    }

   $("html, body").stop().animate({
       scrollLeft: $(target).offset().left,
       scrollTop: $(target).offset().top
   }, 1200);
});//closing 2 
```

# c# - 页面上的大量表格

> ID：16018257
> 
> 赞同：0
> 
> 时间：2013-04-15T14:49:13.770
> 
> 标签：c#, asp.net-mvc, forms

我正在使用 ASP.NET MVC 创建一个 Web 应用程序，并且偶然发现了一种情况，我不确定最佳解决方案是什么。

我有一个用户页面，我只是将用户列表及其角色加载到表中。角色是复选框，例如 Manager 和 Administrator 是两个单独的角色，在该行上为用户表示为复选框。

最右列是一个带有 3 个按钮的操作字段：保存、更改密码和删除。

更改密码的工作原理是打开一个对话框并在控制器上点击一个名为 ChangePassword 的操作，这是一个 Post 请求，因为表单位于不同的区域，并且使用 JavaScript 将一些值设置为隐藏字段。

Delete 通过调用一个名为 Delete 的操作来工作，该操作是一个 Get 请求，其中在视图中，操作参数是使用模型中的值显式设置的。由于这些值不会改变，我可以安全地做这样的事情：

```
@Url.Action("Delete", new { loginName = Model.Users[i].LoginName, username = Model.Users[i].Username }) 
```

但是，保存操作是不同的，因为保存操作旨在用于更新用户角色，用户可以通过选择不同的复选框来更改角色。我最初的计划是让 Save 操作成为 Get 请求，并传递类似于我使用 Delete 执行此操作的值，但我需要使用 JavaScript 设置某种隐藏字段，以便我知道哪些字段已更新。

另一种解决方案是让每个表格行成为一个表单并进行保存发布操作，并将复选框中的值绑定到操作上的模型。我不确定是否会建议这样做，因为这可能意味着页面上有 50 多个表单，具体取决于我拥有的用户数量。

我很感激关于这个问题的一些建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:20:05.017

1.  [**GET**请求不应该**改变**您的应用程序的状态，](https://softwareengineering.stackexchange.com/questions/188860/why-shouldnt-a-get-request-change-data-on-the-server)即它不应该删除或修改用户。

2.  我将使用**ASP.Net Membership Provider**并在控制器操作中调用其各自的方法。

# c# - C# Interop Word - 从字符串中读取 RTF 数据

> ID：16018258
> 
> 赞同：0
> 
> 时间：2013-04-15T14:49:18.117
> 
> 标签：c#, ms-word, load, interop, word-2003

我有一个字符串中的 RTF 数据，`str`我希望将该数据加载到 MS word 对象中。我见过`Documents.Open()`方法，但它需要一个物理文件路径来读取特定文件，而我没有这样的文件。

如何打开 Word 的新实例并在其中加载我的 RTF 数据？

```
Microsoft.Office.Interop.Word.ApplicationClass wordapp = new ApplicationClass();
wordapp.Visible = false;

string str = @"{\rtf1\ansi\ansicpg1252\uc1\deff0{\fonttbl{\f0\fnil\fcharset0\fprq2 Arial;}{\f1\fswiss\fcharset0\fprq2 Arial;}{\f2\froman\fcharset2\fprq2 Symbol;}}
{\colortbl;}{\stylesheet{\s0\itap0\nowidctlpar\f0\fs24 [Normal];}{\*\cs10\additive Default Paragraph Font;}}{\*\generator TX_RTF32 17.0.540.502;}
\paperw12240\paperh15840\margl1138\margt1138\margr1138\margb1138\deftab1134\widowctrl\formshade\sectd\headery720\footery720\pgwsxn12240\pghsxn15840\marglsxn1138\margtsxn1138\margrsxn1138\margbsxn1138\pgbrdropt32\pard\itap0\nowidctlpar\plain\f1\fs20 test1\par }"; 
```

我将在 word 中进行一些格式化，但 applicationClass 应该是`wordapp.Visible = false;`

**更新：**我不希望将文件保存在系统上。无论如何都没有在物理内存上保存它来阅读和工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:12:04.000

我认为与其尝试将 RTF 文本加载到 Word 中，不如将其加载到文本文件中（因为 RTF 文件无论如何都是纯文本），然后将该原始 RTF 文本文件作为新的 Word 文档打开。这会导致 Word 处理 RTF 文本并将其格式化为 Word 文档（带有字体/边距/等），我认为这是您要查找的内容，而不是逐字查看 RTF 文本。一旦它是一个新的 Word 文档，您可以进行操作，然后保存到一个 Word 文档文件：

```
 string filePath = @"c:\rawRtfText.rtf";

        //write the raw RTF string to a text file.
        System.IO.StreamWriter rawTextFile = new System.IO.StreamWriter(filePath, false);
        string str = @"{\rtf1\ansi\ansicpg1252\uc1\deff0{\fonttbl{\f0\fnil\fcharset0\fprq2 Arial;}{\f1\fswiss\fcharset0\fprq2 Arial;}{\f2\froman\fcharset2\fprq2 Symbol;}}{\colortbl;}{\stylesheet{\s0\itap0\nowidctlpar\f0\fs24 [Normal];}{\*\cs10\additive Default Paragraph Font;}}{\*\generator TX_RTF32 17.0.540.502;}\paperw12240\paperh15840\margl1138\margt1138\margr1138\margb1138\deftab1134\widowctrl\formshade\sectd\headery720\footery720\pgwsxn12240\pghsxn15840\marglsxn1138\margtsxn1138\margrsxn1138\margbsxn1138\pgbrdropt32\pard\itap0\nowidctlpar\plain\f1\fs20 test1\par }";
        rawTextFile.Write(str);
        rawTextFile.Close();

        //now open the RTF file using word.
        Microsoft.Office.Interop.Word.Application msWord = new Microsoft.Office.Interop.Word.Application();
        msWord.Visible = false;
        Microsoft.Office.Interop.Word.Document wordDoc = msWord.Documents.Open(filePath);

        //after manipulating the word doc, save it as a word doc.
        object oMissing = System.Reflection.Missing.Value;
        wordDoc.SaveAs(@"c:\RtfConvertedToWord.doc", ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing); 
```

# bind - chroot 和 bindfs 的问题

> ID：16018259
> 
> 赞同：1
> 
> 时间：2013-04-15T14:49:18.740
> 
> 标签：bind, sandbox, mount, permission-denied, chroot

我在使用**Bindfs**和**chroot**时遇到了一个特殊问题（可能是一个错误） 。我创建了一个示例*沙箱*目录，其中包含**nodejs**及其所有依赖项，以便能够在 chroot 监狱中运行。

好吧，我所做的是创建一个*临时*目录，在其中我从示例沙箱中挂载以下目录

*   垃圾桶
*   开发者
*   ETC
*   包括
*   库
*   库64
*   执行程序
*   用户

要挂载我的目录，我使用**bindfs**，使用以下命令模板

```
bindfs -u nobody -g nobody -p a-w:a+rx --chown-ignore --chgrp--ignore --chmod-ignore :sample-sandbox/:dir :new-sandbox/:dir 
```

所以，我通过执行以下命令进入上述目录`cd :new-sandbox`（65534是nobody的uid）

```
chroot --userspec=65534 . node 
```

我收到以下错误响应

```
chroot: failed to run command `node': Permission denied 
```

当我运行时`chroot . node`，我应该得到节点控制台。有趣的是，当我`ls`在目录中运行时，我得到以下响应，表明文件和文件夹归用户所有`nobody`（正如我在 bindfs 命令中声明的那样）。

```
total 32
dr-xr-xr-x 4 nobody nobody 4096 Apr 15 12:46 bin
dr-xr-xr-x 2 nobody nobody 4096 Apr 10 14:56 dev
dr-xr-xr-x 2 nobody nobody 4096 Apr 15 16:33 etc
dr-xr-xr-x 5 nobody nobody 4096 Apr 12 02:21 include
dr-xr-xr-x 9 nobody nobody 4096 Apr 12 02:21 lib
dr-xr-xr-x 4 nobody nobody 4096 Apr 12 02:22 lib64
dr-xr-xr-x 3 nobody nobody 4096 Apr 12 02:22 libexec
dr-xr-xr-x 6 nobody nobody 4096 Apr 12 02:22 usr 
```

当我尝试在*原型沙箱*中执行相同的操作时，该沙箱具有原始文件夹而不是安装了 bindfs 的文件夹，一切正常，即使以用户 nobody 执行也是如此。

您知道为什么会发生这种情况以及如何解决吗？非常感谢。

PS 请不要提示我使用 Linux 容器或虚拟机或我想使用的任何其他*替代*技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:20:08.720

我发现`:new-sandbox`只有它的创建者才有权限（这就是 Python 在使用时所做的`tempfile.mkdtemp`）。

因此，允许其他人和组在该目录中读取和执行解决了这个问题。

# java - 使用java将文本文件修剪到第一列

> ID：16018264
> 
> 赞同：0
> 
> 时间：2013-04-15T14:49:39.677
> 
> 标签：java, string, char, substring, trim

嗯，我有这个IP列表。

```
193.137.150.5              368 ms                DANIEL-PC             
193.137.150.7              95 ms                 N/A                   
193.137.150.13             37 ms                 N/A                   
193.137.150.17             33 ms                 N/A                   
193.137.150.24             238 ms                N/A                   
193.137.150.38             74 ms                 DUARTE-PC             
193.137.150.41             26 ms                 N/A                   
193.137.150.52             176 ms                N/A 
```

我想使用 java 从列表中仅删除 IP。

这是我的代码：

```
import java.io.*;
import java.util.*;

class trim{

    public static void main(String[] args) throws Exception{
        String s;
        char c;
        int i = 0;
        Scanner in = new Scanner(System.in);

        while (in.hasNextLine()){
            s = in.nextLine();
            c = s.charAt(i);
            while (c != ' '){
                System.out.print(c);
                i++;
                c = s.charAt(i);
            }
            System.out.println();
        }
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:52:55.083

在您的循环中，您永远不会归零`i`。这意味着您的偏移量对于第一行之后的每一行都是错误的。

```
 while (in.hasNextLine()){
        s = in.nextLine();
        c = s.charAt(i);
        while (c != ' '){
            System.out.print(c);
            i++;
            c = s.charAt(i);
        }
        System.out.println();
        i = 0; // Finished with this line
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:54:55.593

```
while (in.hasNextLine()){
    s = in.nextLine();
    String[] arr = s.split(" "); // if delimeter is whitespace use s.split("\\s+")  
    System.out.println(arr[0]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T14:53:17.510

您可以简单地将字符串拆分一次并打印第二部分

```
while (in.hasNextLine()){
    s = in.nextLine();
    System.out.println(s.split(" ", 1)[1]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T14:53:30.883

你没有重新初始化 i，

```
 while (in.hasNextLine()){
        s = in.nextLine();
        // reset i so you start reading at line begin
        i = 0;
        c = s.charAt(i);
        while (c != ' '){
            System.out.print(c);
            i++;
            c = s.charAt(i);
        }
        System.out.println();
    } 
```

话虽如此，有更简单的方法，例如使用`String.split()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T14:54:08.367

您需要重新初始化 i = 0。您可以在 nextLine 调用之后执行此操作

```
 s = in.nextLine();
    i = 0; 
```

# vb6 - 添加 Microsoft 富文本框控件 6.0 (SP6) 时出现“未注册对象库”

> ID：16018271
> 
> 赞同：33
> 
> 时间：2013-04-15T14:50:09.253
> 
> 标签：vb6, ide, richtextbox, ocx

我尝试在 VB6 IDE 中通过*Project -> Components...*`Microsoft Rich Textbox Control 6.0 (SP6)`添加控件。该控件出现在控件列表中。当我勾选它并单击确定/应用时，我收到错误：*`Object library not registered`*

 *![VB6 IDE 对象库未注册错误](https://i.stack.imgur.com/8DeIX.png)

环境是带有最新更新的 Windows 7 SP1 x64，VB6 SP6 + KB957924。`richtx32.Ocx`存在于`C:\Windows\SysWOW64\`.

我尝试通过在提升的命令提示符下运行它来重新注册 .ocx：

```
cd c:\windows\SysWOW64
regsvr32 /u richtx32.Ocx
regsvr32 richtx32.Ocx 
```

注册成功完成，但未解决问题。

[当我使用API Monitor](http://www.rohitab.com/apimonitor)查看幕后发生的事情时，最近的可疑调用是`LoadRegTypeLib ({7c0ffab0-cd84-11d0-949a-00a0c91110ed}, 0x0001, 0x0000, LOCALE_NEUTRAL, 0x0018e82c)`返回`TYPE_E_LIBNOTREGISTERED`。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-15T14:51:26.087

该问题已通过在提升的命令提示符下运行以下命令得到解决：

```
cd C:\Windows\SysWOW64\
regtlib msdatsrc.tlb 
```

这也有助于其他较旧的 .ocx 文件，例如 Graph32.ocx 和 Threed32.ocx*

# file - 将文件放在根目录之外和给予 400 文件权限之间的区别？

> ID：16018272
> 
> 赞同：0
> 
> 时间：2013-04-15T14:50:10.090
> 
> 标签：file, ftp, security

我的所有密钥文件都在根目录之外，公众无法访问它，但是，这种方法如何优于在 ftp 中简单地授予这些密钥文件 400 文件权限？（Group 和 Public 没有读、写、执行权限，只有 Owner 的读权限。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:58:08.587

通过将它们放在一个完全独立的目录中，意外地将权限更改为不安全的东西变得更加困难。

例如，上传其他内容并更改其权限时；如果密钥文件位于同一目录中，则您也可能会错误地选择它们。

# javascript - 更改背景图像并使其保留在每个页面上

> ID：16018281
> 
> 赞同：0
> 
> 时间：2013-04-15T14:50:43.933
> 
> 标签：javascript

我创建了一个站点，用户可以在其中更改 4 个可用图像的页面图像（效果很好），但是当您转到另一个页面时，图像会变回默认值。

我是 Javascript 的新手，并试图创建一个 if else 语句，但我似乎无法让它工作。

这是我所追求的：

```
if (currentpage == body.style.backgroundImage="url('image1.png')")
 {
   allotherpages == body.style.backgroundImage="url('image1.png')";
 }
else if (currentpage == body.style.backgroundImage="url('image2.png')")
 {
   allotherpages == body.style.backgroundImage="url('image2.png')";
 } 
```

我将不胜感激任何帮助或正确方向的观点。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:38:22.177

1.  设置背景
2.  保存
3.  当您更改页面时，加载保存的背景

例如，将背景名称保存在 cookie 中：

```
$.cookie("currentBackground", "image1.png"); 
```

当您加载页面时：

```
$(document).ready(function(){
    var currentBackground = $.cookie("currentBackground");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:55:55.440

您想在当前用户更改页面时保存当前用户的背景吗？

使用 cookie 保存当前背景或将其存储在数据库中

# gstreamer - 计算 TS 文件持续时间

> ID：16018291
> 
> 赞同：0
> 
> 时间：2013-04-15T14:51:25.713
> 
> 标签：gstreamer, duration, mpeg, transport-stream

我正在开发一个媒体播放器应用程序：播放 ISDB-T 音频和视频。我正在使用 GStreamer 进行解码和渲染。

为了让 AV Sync 完美运行，我应该规范文件读取：这样数据就不会太快或太慢地推送到 Gstreamer。

```
If I know the duration of TS file before hand, then I can regulate my reads. But how to calculate the TS file duration ? 
```

因为，我需要使用多个 TS 文件验证应用程序，无法使用某些实用程序计算持续时间并不断更改文件读取 - 如何在程序中实现？

谢谢，

克兰蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T07:50:47.453

如果你对传输流内部的编码和PES层有足够的了解，那么你可以读取TS中的时间戳并自己计算。它需要查找到文件末尾，查找最后一个时间戳，并在文件开头减去同一程序的第一个时间戳。

**编辑：**除了上述方法之外，您还需要包括最后一帧持续时间。
`((last_pts - first_pts) + frame_duration) / pts_resolution`

假设您有一个持续时间为 6.006 秒的 30 fps 片段
`((1081080 - 543543) + 3003) / 90000 = 6.006`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-22T11:53:15.380

in most cases, each PES header contains a PTS and/or DTS, which is measured in 90kHz frequency. so the steps may include:

1.  find the program you need to demux from MPEG TS.
2.  find the PID of stream.
3.  find the first TS packet with PID found, and payload_start_indicator set to 1; that will be the starting of a PES frame, which will contain a PES header.
4.  Parse the PES header to find the starting PTS of the stream.
5.  parse the file backwards from end, to find a packet with same PID and payload_start_indicator set, which will contain the last PTS. find thier difference, divide it by 90000 will give duration in Seconds

# c++ - 两个数组的 STL 兼容迭代器

> ID：16018292
> 
> 赞同：2
> 
> 时间：2013-04-15T14:51:25.890
> 
> 标签：c++, stl, iterator

我想按以下方式对两个大小相同的数组 a 和 b 进行排序：数组 b 的排序方式与数组 a 的排序方式相同。示例输入：

```
a = {3, 1, 5}
b = {2, 6, 4} 
```

示例输出

```
a = {1, 3, 5}
b = {6, 2, 4} 
```

这样 b 的值与它们的重新排序无关，而是遵循数组 a 的重新排序。

我想使用 stl::sort 来做到这一点，我需要尽可能高效地做到这一点。因此，我不想将所有元素复制到结构中或使用索引对数组进行排序，然后我可以使用该索引对数组 a 和 b 进行排序。我认为开销最小的应该是 RandomAccessIterator （因为排序需要随机访问）。现在我的问题是，我真的不太擅长 C++。如果有人可以在菜鸟可以理解的水平上给我提示，我会很高兴。我找到了一些解决方案：

[对两个对应的数组进行排序](https://stackoverflow.com/questions/3909272/sorting-two-corresponding-arrays)，但两个提议的解决方案似乎都不够高效，

[http://www.stanford.edu/~dgleich/notebook/2006/03/sorting_two_arrays_simultaneou.html](http://www.stanford.edu/~dgleich/notebook/2006/03/sorting_two_arrays_simultaneou.html)它使用了我认为违反 stl 的 boost 东西（老实说，我不明白那里使用的所有模板东西，我有一个 double 和一个 int 数组以及两者的大小 n，所以我认为我不需要模板），最后这个

[http://www.c-plusplus.de/forum/313698-full](http://www.c-plusplus.de/forum/313698-full)解决方案我被困在我不知道如何实现 operator-> 和 operator* 因为我不知道我是否可以返回只有一个值（数组 a 中的值），即如果该值仅用于比较或也用于赋值。该线程中的解决方案还比较了比较运算符的指针值，我不确定这是否正确（不应该是指针后面的值吗？）。

这是我到目前为止所拥有的，如果你看到可怕的菜鸟错误，请告诉我我哪里出错了:)

```
#include "DoubleArrayRAccIterator.h"

DoubleArrayRAccIterator::~DoubleArrayRAccIterator() {
    // TODO Auto-generated destructor stub
}
struct doubleValue{
    double* a_val;
    int* b_val;
};

double::DoubleArrayRAccIterator::DoubleArrayRAccIterator(double& a_arr,int& b_arr, int size) {
    a_begin = &a_arr;
    b_begin = &b_arr;
    a = &a_arr;
    b = & b_arr;
    n = size;
}

DoubleArrayRAccIterator::DoubleArrayRAccIterator() {
    a = 0;
    b = 0;
    n = 0;
}

DoubleArrayRAccIterator::DoubleArrayRAccIterator(const DoubleArrayRAccIterator& it) {
    a = it.a;
    b = it.b;
    n = it.n;
}

DoubleArrayRAccIterator& DoubleArrayRAccIterator::operator=(const DoubleArrayRAccIterator& it) {
    a = it.a;
    b = it.b;
    n = it.n;
    return *this;
}

DoubleArrayRAccIterator& DoubleArrayRAccIterator::operator++() {
    ++a;
    ++b;
    return *this;
}

DoubleArrayRAccIterator& DoubleArrayRAccIterator::operator--() {
    --a;
    --b;
    return *this;
}

DoubleArrayRAccIterator DoubleArrayRAccIterator::operator++(int) {
    DoubleArrayRAccIterator it(*this);
    ++a;
    ++b;
    return it;
}

DoubleArrayRAccIterator DoubleArrayRAccIterator::operator--(int) {
    --a;
    --b;
    return *this;
}

DoubleArrayRAccIterator& DoubleArrayRAccIterator::operator+=(diff_type x) {
    a += x;
    b += x;
    return *this;
}

DoubleArrayRAccIterator& DoubleArrayRAccIterator::operator-=(diff_type x) {
    a += x;
    b += x;
    return *this;
}

DoubleArrayRAccIterator DoubleArrayRAccIterator::operator+(diff_type x) const {
    a += x;
    b += x;
    return *this;
}

typename DoubleArrayRAccIterator DoubleArrayRAccIterator::operator-(diff_type x) const {
    a -= x;
    b -= x;
    return *this;
}

DoubleArrayRAccIterator DoubleArrayRAccIterator::operator+(const DoubleArrayRAccIterator& it) const {
    a += it.a;
    b += it.b;
    return *this;
}

DoubleArrayRAccIterator DoubleArrayRAccIterator::operator-(const DoubleArrayRAccIterator& it) const {
    a -= it.a;
    b -= it.b;
    return *this;
}

DoubleArrayRAccIterator::reference DoubleArrayRAccIterator::operator*() const {
    // this MUST be wrong, only return value of array a?
    doubleValue result;
    result.a_val=a;
    result.b_val=b;
    return *result;
}

DoubleArrayRAccIterator::pointer DoubleArrayRAccIterator::operator->() const {
    // this MUST be wrong, only return value of array a?
    doubleValue result;
    result.a_val=a;
    result.b_val=b;
    return &result;
}

DoubleArrayRAccIterator::reference DoubleArrayRAccIterator::operator[](diff_type x) const {
    // this MUST be wrong, only return value of array a?
    doubleValue result;
    result.a_val=a_begin+x;
    result.b_val=b_begin+x;
    return *result;
}

bool DoubleArrayRAccIterator::operator==(const DoubleArrayRAccIterator& it) const {
    return a == it.a;
    //compare indices or values here?
}

bool DoubleArrayRAccIterator::operator!=(const DoubleArrayRAccIterator& it) const {
    return a != it.a;
    //compare indices or values here?
}

bool DoubleArrayRAccIterator::operator<(const DoubleArrayRAccIterator& it) const {
    //compare indices or values here?
}

bool DoubleArrayRAccIterator::operator>(const DoubleArrayRAccIterator& it) const {
    //compare indices or values here?
}

bool DoubleArrayRAccIterator::operator<=(const DoubleArrayRAccIterator& it) const {
    //compare indices or values here?
}

bool DoubleArrayRAccIterator::operator>=(const DoubleArrayRAccIterator& it) const {
    //compare indices or values here?
}

DoubleArrayRAccIterator begin() {
    return DoubleArrayRAccIterator(a_begin, b_begin, n);
}

DoubleArrayRAccIterator end() {
    return DoubleArrayRAccIterator(a_begin + n, b_begin + n, n);
} 
```

如果有人还没有停止阅读并且仍然有耐心，我对我刚刚从这里复制的“diff_type”、“reference”和“pointer”类型感到困惑[http://www.c-plusplus.de/forum /313698-full](http://www.c-plusplus.de/forum/313698-full)，它们应该是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T16:08:28.650

如果我对您的理解正确，您会遇到这种情况：

```
[a1][a2][a3]....[an]
[b1][b2][b3]....[bn] 
```

您想按数组 a 排序，这两个数组都以相同的方式，所以结果是：

```
[ax1][ax2][ax3]....[axn]
[bx1][bx2][bx3]....[bxn] 
```

两个数组的索引在哪里`xi`相同。

考虑这个例子：

```
class SIter {
public:

   SIter(int* aIter, double* bIter) : aIter(aIter), bIter(bIter) {}

  // we move to next position is just moving both:
  SIter& operator ++() {
     ++aIter; ++bIter;
     return *this;
  }
  SIter operator ++(int) {
     SIter rv = *this;
     ++aIter; ++bIter;
     return rv;
  }
  SIter& operator --() {
     --aIter; --bIter;
     return *this;
  }
  SIter operator --(int) {
     SIter rv = *this;
     --aIter; --bIter;
     return rv;
  }
  SIter operator + (std::ptrdiff_t cc) const
  {
      SIter rv = *this;
      rv.aIter += cc;
      rv.bIter += cc;
      return rv;
  }
  SIter operator - (std::ptrdiff_t cc) const
  {
      SIter rv = *this;
      rv.aIter -= cc;
      rv.bIter -= cc;
      return rv;
  }
  std::ptrdiff_t operator - (SIter other) const
  {
      return aIter - other.aIter;
  }
   struct value_type {
      int a; double b;
      bool operator < (const value_type& other) const {
          return a < other.a; // this is the place where way of sorting is defined!!!!
      }
   };
  struct reference {
     int* a;
     double* b;
     reference& operator = (const value_type& o) 
     {
       *a = o.a;
       *b = o.b;
       return *this;
     }
     operator value_type() const {
         value_type rv = { *a, *b };
         return rv;
     }
     reference& operator = (const reference& other)
     {
        *a = *other.a;
        *b = *other.b;
        return *this;
     }
     bool operator < (const reference& other) const {
        return *a < *other.a; 
     }
     bool operator < (const value_type& other) const {
        return *a < other.a; 
     }
  };

  reference operator * () {
     reference rv = { aIter, bIter };
     return rv;
  }
  bool operator == (const SIter& other) const
  {
      return aIter == other.aIter; // don't need to compare bIter - shall be in sync
  }
  bool operator != (const SIter& other) const
  {
      return aIter != other.aIter; // don't need to compare bIter - shall be in sync
  }
  bool operator < (const SIter& other) const
  {
      return aIter < other.aIter; // don't need to compare bIter - shall be in sync
  }
  // I bet you don't need pointer operator -> ()
   typedef std::random_access_iterator_tag iterator_category;
   typedef std::ptrdiff_t difference_type;
   typedef reference pointer;

private:
  int* aIter; 
  double* bIter;
}; 
```

然后像这样使用：

```
int main() {
   int a[100] = {};
   double b[100] = {};

   SIter beginIter(a, b);
   SIter endIter(a + 100, b + 100);

   std::sort(beginIter, endIter);

} 
```

我没有尝试这个，可能它有一些缺点，但你应该朝这个方向走。您的迭代器应包含两个指向您的数组的指针（以更一般的方式 - 指向您的容器的迭代器），并且您的引用类型应具有`operator =`并且`operator <`能够分配两个数组的元素并仅比较一个数组的元素。

**[更新]**

好消息：我做了一个工作示例：[ideone](http://ideone.com/rbC8Vd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:11:33.653

我对你的问题有点困惑，但是由于你链接到[这个](https://stackoverflow.com/questions/3909272/sorting-two-corresponding-arrays)问题，我假设你正在尝试解决相同的问题，即你想要对数组进行排序`a`并且你希望数组的索引`b`以与它们相同的方式重新排列是为了`a`。

在我看来，这可能是一个[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。如果可能的话，重新设计你的代码，这样你就没有[并行数组](https://stackoverflow.com/questions/8434272/how-do-i-sort-two-parallel-arrays)了。取而代之的是，将每个元素`a`与其对应的元素`b`放在一个类中或`std::pair`，将*它们*放在一个集合中，例如数组或向量，然后对其进行排序（如果需要，可能会重载比较运算符）。

# java - Java 套接字：打开从服务器到客户端的连接

> ID：16018296
> 
> 赞同：0
> 
> 时间：2013-04-15T14:51:29.407
> 
> 标签：java, sockets, tcp, netty, nio

我有一个具有以下独特要求的客户端服务器问题： 1\. 服务器必须打开到已知客户端的 N 个连接，并且客户端只能使用这些连接从服务器请求数据。

到目前为止，我尝试执行以下操作，但遇到了一些问题：

1.  在客户端上有一个套接字侦听器，并将接收到的每个连接排入 ArrayBlockingQueue。

2.  客户端应用程序将使用上面队列中可用的连接从服务器请求数据

3.  我在服务器上为每个套接字创建一个线程（工作线程），并通过 N 个工作线程监听数据请求。

4.  当我在工作线程中等待传入请求时（在服务器上），我使用 InputStream.isAvailable() 检查是否有东西等待读取。

问题：服务器端的工作线程不知道套接字连接是否仍然有效？即使在客户端应用程序上的套接字关闭后，它们也会继续侦听请求。

如果套接字连接仍然有效，我怎样才能让我的服务器有意义？

我在这里采取了正确的方法吗？

是否有一个框架可以使实施更容易和更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:54:51.880

你已经用 netty 标记了这个问题。您是否尝试过使用 Netty？无论哪种情况，我都会推荐它。

*   您的客户端应该使用 ServerBootstrap/ServerSocketFactory 和适当的通道管道。Netty 已经有一个可以用来代替 BlockingQueue 的 ChannelGroup 概念。您的客户端代码可以通过遍历组并删除空闲频道（完成后将其放回）来找到空闲频道。通道组还会自动检测关闭的通道并将其从自身中删除。
*   您的服务器将使用 ClientBootstrap/ClientSocketFactory 和适当的通道管道以及响应客户端请求的处理程序。
*   将检测到正常的 TCP 关闭操作并关闭通道。如果您担心客户端“崩溃”并让另一端陷入困境，Netty 有一个 IdleStateHandler 可以在一段时间不活动后关闭通道

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:09:25.377

你为什么不直接反转协议？

*   您的客户将启动连接
*   您的服务器将授权它们（仅允许已知客户端）
*   然后您的服务器可以接收/推送数据到客户端，并接收确认
*   如果连接丢失，客户端可以重新发起（服务器可以跟踪每个客户端发送了哪些数据，并在重新连接时重新发送丢失的数据）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:07:02.330

> 当我在工作线程中等待传入请求时（在服务器上），我使用 InputStream.isAvailable() 检查是否有东西等待读取。

`InputStream.isAvailable()`从不知道连接是否已被对等方关闭。您必须调用`read()`以检查连接是否已关闭。

如果您必须使用`InputStream.isAvailable()`，您必须至少定期向 写入一些`OutputStream`内容，然后您将得到一个`IOException`指示连接已关闭的信息（`connection reset by peer`例如）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T22:48:51.623

> 问题：服务器端的工作线程不知道套接字连接是否仍然有效？

是的，他们这样做。当客户端关闭连接时，它们将读取 EOS。那里没有问题。

> 即使在客户端应用程序上的套接字关闭后，它们也会继续侦听请求。

仅当您忽略了 EOS 条件时。

> 如果套接字连接仍然有效，我怎样才能让我的服务器有意义？

如果读取时得到 EOS，请关闭套接字并停止读取循环。

> 我在这里采取了正确的方法吗？

您的问题描述是从前到后的。是客户端创建与服务器的连接，而不是相反。

# sql - SQL 查询的改进 - 复杂的连接/输入/存在

> ID：16018297
> 
> 赞同：0
> 
> 时间：2013-04-15T14:51:31.253
> 
> 标签：sql, performance, ms-access, vba

寻找有关加快此查询的建议。Access 2007。内部查询需要几分钟，完整查询需要很长时间（40-80分钟）。结果如预期。一切都被索引。

```
SELECT qtdetails.F5, qtdetails.F16, ExpectedResult.DLID, ExpectedResult.NumRows
FROM qtdetails 
INNER JOIN (INVDL 
            INNER JOIN ExpectedResult 
                    ON INVDL.DLID = ExpectedResult.DLID) 
        ON (qtdetails.F1 = INVDL.RegionCode) 
           AND (qtdetails.RoundTotal = ExpectedResult.RoundTotal)
WHERE 
      (qtdetails.F5 IN (SELECT qtdetails.F5 
                            FROM (ExpectedResult 
                                  INNER JOIN INVDL 
                                          ON ExpectedResult.DLID = INVDL.DLID)
                            INNER JOIN qtdetails 
                                    ON (INVDL.RegionCode = qtdetails.F1) 
                                       AND (ExpectedResult.RoundTotal = qtdetails.RoundTotal)

                            GROUP BY qtdetails.F5 
                            HAVING (((COUNT(ExpectedResult.DLID)) < 2));
                            )
          ); 
```

INVDL - 80,000 条记录

ExpectedResult - 一千万条记录

qtDetails - 12,000 条记录

内部查询将产生大约 5000 - 8000 条记录。尝试将内部查询的结果保存在表中。然后使用 Select F5 from qTempTable 代替。但是还是要花很多时间。

任何帮助将不胜感激。

数据类型 ：

```
qtdetails.F5 = Number
qtdetails.F16 = Text
ExpectedResult.NumRows = Number
INVDL.DLID = Number
ExpectedResult.DLID = Number
INVDL.RegionCode = Text
qtdetails.F1 = Text 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:14:00.683

在查询中涉及的所有表上重建索引。再次运行查询并检查时间。它将减少执行时间。如果可以的话，我会尽快用优化的查询更新你。

继续查询！

# c# - 将文本框输入添加到现有 StartInfo.Arguments

> ID：16018300
> 
> 赞同：1
> 
> 时间：2013-04-15T14:51:40.800
> 
> 标签：c#, arguments

我有一段要修复的代码：

```
System.Diagnostics.Process p = new System.Diagnostics.Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
//p.StartInfo.RedirectStandardInput = true;
p.StartInfo.RedirectStandardError = true;
p.StartInfo.CreateNoWindow = false; // This line will not create any new window for command prompt.
p.StartInfo.FileName = @"C:\Program Files (x86)\Citrix\System32\dscheck.exe";
p.StartInfo.Arguments = "/full groups /clean";
p.StartInfo.Arguments = argTextBox.Text;
p.Start();
System.Threading.Thread.Sleep(50);
System.Windows.Forms.SendKeys.Send("y");
System.Threading.Thread.Sleep(50);
string s = p.StandardOutput.ReadToEnd();
MessageBox.Show(s); //Shows a Popup of the output from Dscheck
//String s = p.StandardOutput.ReadToEnd(); 
```

这是我的问题：

```
p.StartInfo.Arguments = "/full groups /clean";
p.StartInfo.Arguments = argTextBox.Text; 
```

我正在尝试通过`tscheck.exe /full /groups /clean {UID}`- *UID*已输入到 中`argTextBox`，但它不起作用。上面写着：`p.StartInfo.Arguments = "/full groups /clean"`; 并接受 argTextBox 并且不放置任何东西。

任何想法如何将文本框输入添加到现有参数中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:53:31.240

```
p.StartInfo.Arguments = "/full groups /clean " + argTextBox.Text; 
```

不要从文本框中分配文本，而是将其附加到现有参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:53:15.307

只需在当前参数参数的末尾附加（当然有空格分隔符）

```
 p.StartInfo.Arguments = "/full groups /clean " + argTextBox.Text;
    p.Start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:54:14.857

在您要替换之前分配的值的第二个作业中，替换这些行：

```
p.StartInfo.Arguments = "/full groups /clean";
p.StartInfo.Arguments = argTextBox.Text; 
```

和：

```
p.StartInfo.Arguments = String.Format("/full groups /clean {0}", argTextBox.Text); 
```

# javascript - 用 $() 附加元素的问题

> ID：16018301
> 
> 赞同：0
> 
> 时间：2013-04-15T14:51:49.197
> 
> 标签：javascript, jquery, asp.net, html, css

我正在尝试通过以下方式附加元素但不工作... ed[0].UserName 确实有价值.. :)

```
 success: function(e){
       console.log(e);
       console.log(e.d[0].UserName);
       var position2= $("#searchtextbox").position();
       $('<div/>',
       {
         id:'generatedsearchdiv1', 
         css:{
              position:absolute,
              left:position2.left, 
              top:position2.top+20
              },
         text:e.d[0].UserName
         }).appendTo('#searchArea');

       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:57:54.627

您没有在 'absolute' ( ) 周围加上引号，`position:'absolute'`因此脚本正在尝试查找名为 'absolute' 的变量。

# facebook-fql - Facebook Scribe OAuth 正在返回“消息”：“（＃601）解析器错误：查询意外结束

> ID：16018307
> 
> 赞同：0
> 
> 时间：2013-04-15T14:52:04.843
> 
> 标签：facebook-fql, scribe

这是我的 java 代码，以及我作为参数传递的 URL 字符串。如果我将 URL 复制粘贴到浏览器上，它可以工作。

```
String strURL="SELECT post_id, actor_id, permalink, message, impressions, type, likes, comment_info, share_count, created_time , updated_time FROM stream WHERE source_id='<srcid>'";

    OAuthRequest authRequest = new OAuthRequest(Verb.GET, "https://graph.facebook.com/fql");
    authRequest.addBodyParameter("q", strURL);
    service.signRequest(accessToken, authRequest);
    Response authResponse = authRequest.send();
    System.out.println(authResponse.getBody()); 
```

错误消息 - 20:12:58,986 INFO [stdout] (http-localhost-127.0.0.1-8080-2) {"error":{"message":"(#601) Parser error: unexpected end of query.", “类型”：“OAuthException”，“代码”：601}}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:36:25.070

谢谢cpilko。实际上这是我对 scribe OAuth 的误解。我应该使用 authRequest.addQuerystringParameter 而不是 authRequest.addBodyParameter。

该代码现在有效，我能够收到响应。

# wso2 - 使用所有人选项创建 wso2 数据服务（允许的用户角色）

> ID：16018310
> 
> 赞同：0
> 
> 时间：2013-04-15T14:52:19.207
> 
> 标签：wso2, wso2esb, wso2dss

我正在使用 wso2 esb 4.0.3。在 wso2 esb 4.0.3 中创建数据服务后。使用存储过程，它工作得很好，但是当我选择允许的用户角色作为每个人并作为每个人提供安全性时，它会给出错误。

错误：

```
<soapenv:Fault xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
   <soapenv:Code>
      <soapenv:Value>axis2ns6:UNKNOWN_ERROR</soapenv:Value>
   </soapenv:Code>
   <soapenv:Reason>
      <soapenv:Textxml:lang="en-US">                                                        DS Fault Message: Error setting user roles DS Code:   
UNKNOWN_ERROR Nested Exception:- java.lang.NullPointerException </soapenv:Text>
   </soapenv:Reason>
   <soapenv:Detail>
      <axis2ns5:DataServiceFault xmlns:axis2ns5="http://ws.wso2.org/dataservice">DS Fault Message: Error setting user roles DS Code: UNKNOWN_ERROR Nested Exception:- java.lang.NullPointerException </axis2ns5:DataServiceFault>
   </soapenv:Detail>
</soapenv:Fault> 
```

请帮助我。

谢谢，索拉布·苏曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T07:32:36.630

听起来很奇怪，但无论如何，如果您试图让每个人都可以使用您创建的数据服务，那么只要您不选中“每个人”或“管理员”复选框，它就会很好地工作。像这样试一试。

# c - 静态变量 - C

> ID：16018312
> 
> 赞同：0
> 
> 时间：2013-04-15T14:52:19.970
> 
> 标签：c, pointers, memory, static, scope

我正在编写一个程序，该程序共享一个全局声明的指向缓冲区的指针，程序中的所有函数都可以使用该缓冲区。但是在某些情况下缓冲区不是必需的，因此指针保留为 NULL，直到通过评估它的 NULL 状态来初始分配它。我还需要一个全局声明的整数来防止缓冲区溢出并在必要时重新分配。仅仅因为我编写这个程序是为了练习，我希望在分配缓冲区时静态声明缓冲区大小整数。例如，此代码段将为缓冲区分配初始内存大小。

```
static char *buffer //(Globaly Declared) I know that the static part is implied I just want to put emphasis on it.

while(program has arguments to do)//Not actual code. I put this here to give an idea of where the statement is located
{
   //None relavant code here..

    if(buffer is necessary)//Not actual code. I put this here to give an idea of where the statement is located
    {
          if(buffer == NULL)
          {
             static unsigned int initial_value = 64;
             static unsigned int *buffer_size = &inital_value;

              if( (buffer = malloc(sizeof(char)*inital_value+1)) == NULL)
              {
                 perror("MALLOC ERROR");
                 return 1;
               }
           }
      }
 } 
```

我有几个关于它是如何工作的（如果是的话）以及一般静态内存是如何工作的问题。

*   我知道静态变量具有整个程序执行时间的生命周期，但除非它们是全局声明的，否则它们的范围也有限。所以我的假设是需要一个指针来跟踪静态内存位置，但指针也需要是静态的吗？

*   什么时候会静态分配内存？当 if 语句为真或程序启动时将简单地分配变量（如全局变量）

*   是否为我处理了变量的释放？如果指针只是静态声明但它指向的内存实际上是动态分配的（例如我的缓冲区（静态字符 * 缓冲区）），我该怎么办。

*   此外，这些可能听起来像一个愚蠢的问题，但整数指针声明的无符号部分是否必要，我需要写 (initial_value+1) 还是我可以只写 inital_value+1（我认为这不重要，因为 sizeof(char)是一个，因此分配大小可以重写为 1*64+1) 并且终止 NULL 字节需要与数组的其余部分具有相同的类型（大小）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:55:20.340

指针是静态分配的，但它指向的内存是动态分配的，只有当你的 if 条件成立时。

“变量”（指针）的释放是为您处理的，但它指向的内存的释放不是为您处理的。您将需要`free`任何东西`malloc`。

没错，您可以写 (initial_value+1) 或 initial_value + 1。终止的 NULL 字节确实需要与数组的其余部分具有相同的大小（字节/字符）。在 C 中，所有数组元素的大小相同。您可能会发现 (initial_value+1) 更好地反映了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:55:35.597

```
static unsigned int initial_value = 64;
static unsigned int *buffer_size = &inital_value; 
```

两者都只会在第一次执行时初始化一次，并且它们位于全局内存中，在`{}`.

# android - Android - Parse.com 检索查询的整个对象并显示在 ArrayList 中

> ID：16018315
> 
> 赞同：3
> 
> 时间：2013-04-15T14:52:33.237
> 
> 标签：android, parse-platform

在以下代码中，我在 HighScore 类中搜索按升序排序的最佳时间结果。所以我得到了最好的结果列表。我遇到的困难是将每次结果的名称和学校名称添加到列表中。（请参阅附图）

```
private class RemoteDataTask extends AsyncTask<Void, Void, Void> {
    // Override this method to do custom remote calls
    protected Void doInBackground(Void... params) {
        // Gets the current list of bestTime in sorted order
        ParseQuery query = new ParseQuery("TestsTopRecords");
        query.orderByAscending("bestTime");

        try {
            results = query.find();
        } catch (ParseException e) {

        }
        return null;
    }

    @Override
    protected void onPreExecute() {
        HighScoreTable.this.progressDialog = ProgressDialog.show(HighScoreTable.this, "",
                "Loading...", true);
        super.onPreExecute();
    }

    @Override
    protected void onProgressUpdate(Void... values) {

        super.onProgressUpdate(values);
    }

    @Override
    protected void onPostExecute(Void result) {
        // Put the list of results into the list view
        ArrayAdapter<Double> adapter = new ArrayAdapter<Double>(HighScoreTable.this,R.layout.todo_row);
        for (ParseObject object : results) {
            adapter.add((Double) object.get("bestTime"));
        }
        setListAdapter(adapter);
        HighScoreTable.this.progressDialog.dismiss();
        TextView empty = (TextView) findViewById(android.R.id.empty);
        empty.setVisibility(View.VISIBLE);
    }
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_high_score_table);

    TextView empty = (TextView) findViewById(android.R.id.empty);
    empty.setVisibility(View.INVISIBLE);

    new RemoteDataTask().execute();
    registerForContextMenu(getListView());
} 
```

![我希望它看起来如何](https://i.stack.imgur.com/pzZEX.png)

![Prase.com 数据库的屏幕截图](https://i.stack.imgur.com/vpJxC.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T05:38:46.997

这可能是最简单的方法。

使用`String`代替`Double`并执行此操作

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(HighScoreTable.this,R.layout.todo_row);
for (ParseObject object : results) {
    adapter.add((Double) object.get("bestTime") + " " + object.getString("Name") + " " + object.getString("SchoolAndCity"));
} 
```

# c++ - 使用指针动态分配数组

> ID：16018316
> 
> 赞同：0
> 
> 时间：2013-04-15T14:52:34.367
> 
> 标签：c++, pointers, dynamic-allocation

我正在尝试在井字游戏中使用指针动态分配数组。我对指针的工作原理有点困惑。我们使用 cplusplus.com 网站作为我们的教科书，我认为关于指针的部分对我来说有点混乱。是否有可能得到它的解释并可能有助于我的井字游戏？这是我的代码：

```
//Sophia Ali
// TicTacToe (CS-509 Assignment 5)

#include<iostream>
#include<cstdlib>
using namespace std;

enum Status { WIN, DRAW, CONTINUE, QUIT };

void showBoard( const char board[], int boardSize );
// show current state of board
Status checkGameState( const char board[] );
// returns WIN or CONTINUE
int getHumanSquare( const char board[] );
int getComputerSquare( const char board[] );
bool checkBadSquare( const char board[], int squareNum );
// checks to see if a chosen square is already taken; returns true if
// already taken; used by get*Square functions above.
int getrandint( int min, int max );

int main()
{
    char board[] = "123456789";   // 10 element char board
    const int boardSize = 10;
    Status gameState = CONTINUE;
    int gametype, squareChoice, turnNum = 0;
    char currentSymbol;           // 'o' or 'x'

    cout << "\n This is a Tic Tac Toe program. Choose the type of game: "
         << "\n (1) human o vs. human x    (2) human o vs. dumb computer x"
         << "\n\n -> ";
    cin  >> gametype;

    /* Show the current state of Tic Tac Toe board. */
    showBoard( board, boardSize );

    /*
       Main game loop
     */
    while ( gameState == CONTINUE )
    {
        /* Increment turnNum by 1\. */
        turnNum++;

        /* If turnNum equal to 10
              Set gameState to DRAW.
              Break out of while loop. */
        if ( turnNum == 10 )
        {
            gameState = DRAW;
            break;
        }

        /* If we are on an odd-numbered turn
              Print "It's o's turn."
              Set currentSymbol to 'o'.
              Call getHumanSquare function to get squareChoice.
           Else (we are on an even-numbered turn)
              Print "It's x's turn."
              Set currentSymbol to 'x'.
              If the gametype is 1 (human vs. human)
                 Call getHumanSquare function to get squareChoice.
              Else (gametype is 2 (human vs. computer))
                 Call getComputerSquare function to get squareChoice.*/

        // Get current player's square choice and insert into board
        if ( turnNum%2 != 0)
        {
            cout << "\n It's o's turn.";
            currentSymbol = 'o';
            squareChoice = getHumanSquare( board );
        }
        else
        {
            cout << "\n It's x's turn.";
            currentSymbol = 'x';
            if ( gametype == 1 )
                squareChoice = getHumanSquare( board );
            else
                squareChoice = getComputerSquare( board );
        }
        /* If squareChoice is -1 (human player quit)
              Set gameState to QUIT.
           Else
              Insert currentSymbol into board at (squareChoice - 1).
              Show the current state of the Tic Tac Toe board.
              Call checkGameState function to determine the gameState. */
        if ( squareChoice == -1 )
            gameState = QUIT;
        else
        {
            board[ squareChoice - 1 ] = currentSymbol;
            showBoard( board, boardSize );
            gameState = checkGameState( board );
        }

    }     // end while

    /* If gameState is WIN
              print "Player " currentSymbol " is the winner." */
    /* If gameState is DRAW
              print "It's a draw." */
    if ( gameState == WIN )
        cout << "Player " <<currentSymbol << " is the winner.";
    if ( gameState == DRAW )
        cout << "It's a draw.";

    return 0;

} // end main

/////////////////////////////////////////////////////////////////////

void showBoard( const char board [], int size )
{
    cout << endl;

    for ( int i = 0; i < size ; i++ )
    {
        cout << board[ i ] << " ";
        if ( ( i + 1 ) % 3 == 0 )
            cout << endl;
    }

    cout << endl;
}

/////////////////////////////////////////////////////////////////////

Status checkGameState( const char board[] )
{
    // Board       Array
    //
    // 1 2 3       0 1 2
    // 4 5 6  -->  3 4 5
    // 7 8 9       6 7 8
    //
    // Diagonal winners
    if ( board[ 0 ] == board[ 4 ] && board[ 0 ] == board[ 8 ] )
        return WIN;
    else if ( board[ 2 ] == board[ 4 ] && board[ 4 ] == board[ 6 ] )
        return WIN;
    // Horizontal winners
    else if ( board[ 0 ] == board[ 1 ] && board[ 1 ] == board[ 2 ] )
        return WIN;
    else if ( board[ 3 ] == board[ 4 ] && board[ 4 ] == board[ 5 ] )
        return WIN;
    else if ( board[ 6 ] == board[ 7 ] && board[ 7 ] == board[ 8 ] )
        return WIN;
    // Vertical winners
    else if ( board[ 0 ] == board[ 3 ] && board[ 3 ] == board[ 6 ] )
        return WIN;
    else if ( board[ 1 ] == board[ 4 ] && board[ 4 ] == board[ 7 ] )
        return WIN;
    else if ( board[ 2 ] == board[ 5 ] && board[ 5 ] == board[ 8 ] )
        return WIN;
    else
        return CONTINUE;
}

/////////////////////////////////////////////////////////////////////

int getHumanSquare( const char board[] )
{
    int squareNum;

    cout << "\n Input the number of an empty square: (-1 to quit) ";
    cin  >> squareNum;

    while ( checkBadSquare( board, squareNum ) == true )
    {
        cout << "\n Bad input. Choose another square: ";
        cin >> squareNum;
    }

    return squareNum;
}

/////////////////////////////////////////////////////////////////////

int getComputerSquare( const char board[] )
{
    int squareNum;

    squareNum = getrandint( 1, 9 );

    while ( checkBadSquare( board, squareNum ) == true )
    {
        squareNum = getrandint( 1, 9 );
    }

    return squareNum;
}

/////////////////////////////////////////////////////////////////////

bool checkBadSquare( const char board[], int squareNum )
{
    int realSquareNum = squareNum - 1; // count from 0

    if ( squareNum == -1 )
        return false;  // Let quit code pass as a valid square
    else if ( squareNum > 9 )
        return true;   // Square numbers out of range are invalid
    else if ( board[ realSquareNum ] == 'o' || board[ realSquareNum ] == 'x' )
        return true;   // Occupied squares are invalid
    else
        return false;  // Valid square number
}

/////////////////////////////////////////////////////////////////////

int getrandint( int min, int max )
{
    int scale, shift;
    scale = max - min + 1;
    shift = min;
    return rand() % scale + shift;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:55:12.103

这是一个静态分配的数组，编译器从“123456789”初始值设定项中知道大小。数组的大小为 10，因为编译器将为 C 字符串具有的 '\0' 终止符添加额外的空间。

```
char board[] = "123456789"; 
```

这与动态分配做同样的事情

```
char* board = new char[10];
strcpy(board, "123456789"); 
```

通过动态分配，您可以决定程序运行时数组应该有多大（这就是它是*动态*的原因）。但是在这个程序中，大小总是十。下一行 (strcpy) 将相同的字符串复制到旧代码中的动态分配数组中。

这样做有什么好处？绝对**没有**。事实上，动态分配的版本更差，如果我给你的作品打分，我会给你打低分。但是你被告知要这样做，所以我想你必须这样做。

# asp.net - 没有任何 javascript 或 JQuery 的移动网络应用程序？

> ID：16018320
> 
> 赞同：2
> 
> 时间：2013-04-15T14:52:52.537
> 
> 标签：asp.net, asp.net-mvc-4

我想知道是否有一个框架来开发不使用 javascript 或 jquery 的移动 Web 应用程序。我们的客户不想在项目中使用任何 javascript 或 jquery。但是当我四处寻找移动网络解决方案时，我看到了很多 jquery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:13:04.263

“移动”网站不需要任何特殊框架。您只需设计网站 (HTML+CSS)，使其在较小的屏幕上看起来很棒。除此之外，它与 10 年前的旧 HTML 表单相同（除了您可以使用新奇特的 HTML5 输入类型，如开箱即用的日历）。

但是你应该更深入地挖掘“没有 JavaScript”的原因，因为没有它你将不得不诉诸整个页面刷新，即使是非常小的事情（比如“当你在地址中选择美国时隐藏字段 X”），这将非常消极影响性能，尤其是在网络速度较慢的移动设备上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:13:37.440

如果您使用移动 MVC 视图，为什么要使用框架？为什么不创建自己的简约设计，它不包含很多这些功能，但具有定义用户界面的基本核心 HTML，并且只允许应用程序回发到服务器？这会很好用，并且在移动设备中很有效。

# c# - 我的第二个集线器上的信号器空连接数据

> ID：16018321
> 
> 赞同：0
> 
> 时间：2013-04-15T14:52:54.490
> 
> 标签：c#, signalr, signalr-hub

在过去的一年里，我有一个信号器中心工作没有问题。今天尝试添加第二个集线器时，它只是无法正常工作。我已按照与第一个相同的步骤进行操作，但无济于事。

这是我的 ~/signalr/hubs 的输出

```
 // Create hub signalR instance
$.extend(signalR, {
    errorPageHub: {
        _: {
            hubName: 'Web.Infrastructure.Logging.Broadcasting.ErrorPageHub',
            ignoreMembers: ['error', 'event', 'warning', 'success', 'namespace', 'ignoreMembers', 'callbacks'],
            connection: function () { return signalR.hub; }
        },

        error: function (error, callback) {
            return serverCall(this, "Error", $.makeArray(arguments));
        },

        event: function (eventDescription, callback) {
            return serverCall(this, "Event", $.makeArray(arguments));
        },

        warning: function (warning, callback) {
            return serverCall(this, "Warning", $.makeArray(arguments));
        },

        success: function (success, callback) {
            return serverCall(this, "Success", $.makeArray(arguments));
        }
    },
    pulsePageHub: {
        _: {
            hubName: 'Web.Infrastructure.Logging.Broadcasting.PulsePageHub',
            ignoreMembers: ['tenderAdded', 'tenderUpdated', 'projectAdded', 'projectUpdated', 'namespace', 'ignoreMembers', 'callbacks'],
            connection: function () { return signalR.hub; }
        },

        tenderAdded: function (message, callback) {
            return serverCall(this, "TenderAdded", $.makeArray(arguments));
        },

        tenderUpdated: function (message, callback) {
            return serverCall(this, "TenderUpdated", $.makeArray(arguments));
        },

        projectAdded: function (message, callback) {
            return serverCall(this, "ProjectAdded", $.makeArray(arguments));
        },

        projectUpdated: function (message, callback) {
            return serverCall(this, "ProjectUpdated", $.makeArray(arguments));
        }
    }
}); 
```

当我打电话时在我的页面上使用“errorPageHub”

```
$.connection.hub.start({ transport: 'longPolling' }, function () {
        console.log('connection started!');
    }); 
```

以下是输出到萤火虫 ::

```
connectionData  [{"name":"Web.Infrastructure.Logging.Broadcasting.ErrorPageHub","methods":["addError","addSuccess","addWarning","addEvent"]}]
connectionId    1806c3f7-e2e0-4ec7-9eb1-670a43fac912
transport   longPolling 
```

connectiondata 对应于我在页面上初始化的集线器。现在在我尝试使用pulsePageHub的页面上，当使用相同的connection.hub.start调用时，以下是firebug的输出（请注意这些在不同的页面上，我只有一个调用connection.start的页面）

```
connectionData  []
connectionId    05b2354d-63ac-469a-bf0b-bd4e06e56426
transport   longPolling 
```

我正在以与执行 errorPageHub 完全相同的方式初始化 pulseHub，但连接数据始终为空，因此它从不接收任何广播。如果我将 errorPageHub 初始化添加到此页面，则发送的唯一连接数据是 errorPageHub。

我如何初始化第二个集线器以接收广播？[这个问题与此处](https://stackoverflow.com/questions/12859861/signalr-connectiondata-empty-and-wont-connect)提出的问题非常相似，但从未解决

我的集线器像这样在客户端声明::

```
 var error = $.connection.errorPageHub;

    error.addError = function (message) {
        appendMessage(message, "error");

    };

    error.addSuccess = function (message) {
        appendMessage(message, "info");
    };

    error.addWarning = function (message) {
        appendMessage(message, "warning");
    };

    error.addEvent = function (message) {
        appendMessage(message, "info");
    };
} 
```

我的脉搏页面集线器是这样的：

```
 var pulse = $.connection.pulsePageHub;

    pulse.tenderAdded = function (message) {
        appendMessage(message, "info");
        alert("hi");
    };

    pulse.tenderUpdated = function (message) {
        appendMessage(message, "warning");
        alert("hi");
    };

    pulse.projectAdded = function (message) {
        appendMessage(message, "info");
        alert("hi");
    };

    pulse.projectUpdated = function (message) {
        appendMessage(message, "warning");
        alert("hi");
    }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T14:56:56.603

您使用的是什么版本的 SignalR？

在开始连接之前，您需要为您感兴趣的集线器连接事件处理程序。那是：

hub.client.something = function() { };

否则它将无法正常工作。

# wicket - Apache Wicket：从 UI 上的表中获取选定的下拉值

> ID：16018323
> 
> 赞同：2
> 
> 时间：2013-04-15T14:52:59.273
> 
> 标签：wicket, wicket-1.5, wicketstuff

我有一个类似的对象

```
public class Table {
    private String id;
    private String name;
    private List<Field> fieldsList;
}

public class Field {
    private List<Column> columnList;
}

public class Column{
    String id;
} 
```

所以，这里我的工作流程是一个表由多个字段组成，一个字段将有多个列。因此，在 webUI 上，我需要将名称和字段下拉列表显示为行。当用户选择一个字段时，我需要动态获取所选字段并呈现属于所选字段的列。在这里，如何从 Web UI 获取选定的字段。我尝试使用 AjaxFormComponentUpdatingBehavior("onchange")。但我得到了该下拉列表的所有字段。

我的下拉选择如下：

```
IChoiceRenderer choiceRenderer = new ChoiceRenderer("Name", "id");
DropDownChoice dropDownChoice = new DropDownChoice("ddc");
dropDownChoice.setChoiceRenderer(choiceRenderer);
dropDownChoice.setChoices(table.getFieldsList());
dropDownChoice.setModel(new CompoundPropertyModel(new Field()));

dropDownChoice.add(new AjaxFormComponentUpdatingBehavior("onchange") {

@Override
protected void onUpdate(AjaxRequestTarget target) {
   //Following is returning all the List of Fields.
   Object defaultModelObject = getModelObject();
 }
}); 
```

如何处理这种情况。请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:17:24.213

请参阅下面的完整示例。主要部分是 ViewModel(VM) 和 ViewModelLoader(VML)。VM 是您希望在 UI 中显示的内容。VML 用来自数据库的数据填充 VM。使用 PropertyModel 我绑定下拉项和选定的值。为了更新 doropdown，我正在更新 VM 并将组件添加到 AjaxRequestTarget。

```
 public class PlayingWithDropDownPage extends WebPage {

        public PlayingWithDropDownPage() {
            final ViewModelLoader viewModelLoader = new ViewModelLoader();
            final ViewModel viewModel = viewModelLoader.load();

            IChoiceRenderer choiceRenderer = new ChoiceRenderer("name", "id");
            final DropDownChoice dropDownChoice = new DropDownChoice("dropDown");
            dropDownChoice.setChoiceRenderer(choiceRenderer);
            dropDownChoice.setChoices(viewModel.getItemsModel());
            dropDownChoice.setModel(viewModel.getSelectedModel());

            dropDownChoice.add(new AjaxFormComponentUpdatingBehavior("onchange") {
                @Override
                protected void onUpdate(AjaxRequestTarget target) {
                    viewModelLoader.load(viewModel);

                    target.add(dropDownChoice);
                }
            });
            add(dropDownChoice);
        }

        public static class ViewModel implements Serializable {
            private WhatToShow whatToShow;
            private List<Item> items = new ArrayList<>();
            private Item selected;

            public IModel<List<Item>> getItemsModel() {
                return new PropertyModel<>(this, "items");
            }

            public IModel<Item> getSelectedModel() {
                return new PropertyModel<>(this, "selected");
            }
        }

        public static class ViewModelLoader extends LoadableDetachableModel<ViewModel> {

            @Override
            protected ViewModel load() {
                return load(new ViewModel());
            }

            protected ViewModel load(ViewModel vm) {
                vm.items.clear();

                if (vm.whatToShow == WhatToShow.City) {
                    vm.whatToShow = WhatToShow.Person;
                    vm.items.add(new Person("1", "John", "Smith"));
                    vm.items.add(new Person("2", "Robert", "Evans"));
                    vm.items.add(new Person("3", "Jeff", "Jones"));
                } else {
                    vm.whatToShow = WhatToShow.City;
                    vm.items.add(new City("1", "London"));
                    vm.items.add(new City("2", "Moscow"));
                    vm.items.add(new City("3", "Kiev"));
                }

                return vm;
            }
        }

        public static interface Item {
            public String getId();

            public String getName();
        }

        private enum WhatToShow {
            Person,
            City
        }

        public static class City implements Item {

            public String id;
            public String name;

            public City(String id, String name) {
                this.id = id;
                this.name = name;
            }

            @Override
            public String getId() {
                return id;
            }

            @Override
            public String getName() {
                return name;
            }
        }

        public static class Person implements Item {
            public String id;
            public String fname;
            public String lname;

            public Person(String id, String fname, String lname) {
                this.id = id;
                this.fname = fname;
                this.lname = lname;
            }

            @Override
            public String getId() {
                return id;
            }

            @Override
            public String getName() {
                return String.format("%s %s", fname, lname);
            }
        }
    } 
```

# multithreading - 在我的应用程序添加多线程后，VS2010 停止调试后不会删除文件句柄

> ID：16018325
> 
> 赞同：0
> 
> 时间：2013-04-15T14:53:03.883
> 
> 标签：multithreading, winforms, visual-studio-2010

今天我在 Windows 窗体应用程序中添加了多线程。在我的 UI 线程上，我正在通过 new Thread() {...}).Start(); 它本身将调用一个使用 ThreadPool.QueueUserWorkItem() 的方法。调用方法后，线程将在队列中等待，直到返回特定项目并退出线程：

```
new Thread(o =>
        {
            s.SimulateChanges();

            Boolean run = true;

            while (run)
            {
                SimulationResult sr = queue.WaitDequeue();

                //EOF is a static property which will be returned 
                //if the queue is at its end so I can break the while loop
                if (SimulationResult.EOF.Equals(sr))
                {
                    run = false;
                    continue;
                }

                this.simulationProgressBar.BeginInvoke((Action)delegate()
                {
                    if (sr.IsDummy && this.simulationProgressBar.Value < this.simulationProgressBar.Maximum)
                    {
                        /*...*/
                    }
                    else
                    {
                        this.resultListView.AddObject(sr);
                    }
                });
            }

            this.simulationProgressBar.BeginInvoke((Action)delegate()
            {
                this.ToggleSimulationControls(true);
            });
        }).Start(); 
```

这就是调用方法的代码：

```
public void SimulateChanges()
{
    ThreadPool.QueueUserWorkItem(o =>
        {
            foreach (IColElem elem in collection.AsEnumerable())
            {

                /*lot of code*/

                queue.Enqueue(new SimulationResult() { IsDummy = true });

            }
            log.Debug("Finished!");

            queue.Enqueue(SimulationResult.EOF);

        });
} 
```

我的队列是一个自写的类，它允许线程等待出队，直到一个对象入队。

一切正常，除了如果我停止调试（使用停止调试或简单地关闭应用程序）我无法重建我的应用程序，因为 VS2010 不会删除文件句柄。我相信这与我的线程没有正确退出有关。他们有什么办法我可以保证吗？

感谢您的任何建议:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:16:55.347

很难解释问题的所有方面。但是你犯了一个很常见的错误，通常是程序员第一次开始使用线程时犯的。当用户关闭主窗口时，您不能确保线程停止运行。这是一个容易犯的错误，UI 线程处理了很多繁重的工作。包括在用户关闭应用程序的主窗口时自动终止。所以至少你的部分问题是你确实设法关闭了主窗口。但实际上并没有终止该过程。无法构建，您的程序的 EXE 仍在使用中。

正确关闭线程可能*非常*困难，因为无论线程在做什么，用户都会关闭窗口。它可能是紧张的，深埋在操作系统调用中并等待它完成。当它不执行代码时很难要求它退出。

有一个非常简单的解决方案，至少足以让您的项目继续进行或解决您遇到的一半问题。您可以将线程标记为“程序终止时自动终止”，CLR 会处理它。使用 IsBackground 属性，如下所示：

```
var t = new Thread(o =>
        {
           // Lotsa code
        });
t.IsBackground = true;
t.Start(); 
```

但请记住，这种杀戮没有什么优雅的。如果您正在编写文件或与服务器通信，那么这将导致部分写入的文件或非常混乱的服务器。否则与使用任务管理器杀死程序没有什么不同。

# hadoop - 在 PigLatin 中重新组合

> ID：16018326
> 
> 赞同：2
> 
> 时间：2013-04-15T14:53:04.493
> 
> 标签：hadoop, group-by, apache-pig

在 PigLatin 中，我想按 2 次分组，以便选择具有 2 个不同规律的行。

我很难解释这个问题，所以这里有一个例子。假设我想获取与我年龄最近（$my_age）并且有很多钱的人的规格。

```
Relation A is four columns, (name, address, zipcode, age, money)

B = GROUP A BY (address, zipcode); # group by the address

-- generate the address, the person's age ...

C = FOREACH B GENERATE group, MIN($my_age - age) AS min_age, FLATTEN(A);

D = FILTER C BY min_age == age

--Then group by as to select the richest, group by fails :

E = GROUP D BY group; or E = GROUP D BY (address, zipcode);

-- The end would work
D = FOREACH E GENERATE group, MAX(money) AS max_money, FLATTEN(A);

F = FILTER C BY max_money == money; 
```

我试图同时过滤最近和最富有的人，但它不起作用，因为你可以拥有最富有的人和我最年长的人。

* * *

另一个更现实的例子是：

您有类似的需求文件：iddem、idodem、datedem

您有如下操作文件：idope、labelope、dateope、idoftheday、infope

我想返回符合以下要求的操作：

dateope 必须与 datedem 最接近。

如果 datedem - date_ope > 0，那么我必须选择带有 max(idoftheday) 的操作，否则我必须选择带有 min(idoftheday) 的操作。

```
Relation A is 5 columns (idope,labelope,dateope,idoftheday,infope)
Relation B is 3 columns (iddem, idopedem, datedem)

C = JOIN A BY idope, B BY idopedem;

D = FOREACH E GENERATE iddem, idope, datedem, dateope, ABS(datedem - dateope) AS datedelta, idoftheday, infope;

E = GROUP C BY iddem;

F = FOREACH D GENERATE group, MIN(C.datedelta) AS deltamin, FLATTEN(D);

G = FILTER F BY deltamin == datedelta;

--Then I must group by another time as to select the min or max idoftheday
H = GROUP G BY group; --Does not work when dump
H = GROUP G BY iddem; --Does not work when dump

I = FOREACH H GENERATE group, (datedem - dateope >= 0 ? max(idoftheday) as idofdaysel : min(idoftheday) as idofdaysel), FLATTEN(D);

J = FILTER F BY idofdaysel == idoftheday;

DUMP J; 
```

第二个示例中的数据（注意日期已经是 Unix 格式）：您有如下需求文件：

```
1, 'ctr1', 1359460800000
2, 'ctr2', 1354363200000 
```

您有如下操作文件：idope、labelope、dateope、idoftheday、infope

```
'ctr0','toto',1359460800000,1,'blabla0'
'ctr0','tata',1359460800000,2,'blabla1'
'ctr1','toto',1359460800000,1,'blabla2'
'ctr1','tata',1359460800000,2,'blabla3'
'ctr2','toto',1359460800000,1,'blabla4'
'ctr2','tata',1359460800000,2,'blabla5'
'ctr3','toto',1359460800000,1,'blabla6'
'ctr3','tata',1359460800000,2,'blabla7' 
```

结果必须是这样的：

```
1, 'ctr1', 'tata',1359460800000,2,'blabla3'
2, 'ctr2', 'toto',1359460800000,1,'blabla4' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:41:37.880

示例输入和输出将有很大帮助，但从您发布的内容来看，在我看来，问题不在于编写 Pig 脚本，而在于指定您希望完成的具体内容。我不清楚你为什么要分组。例如，按地址分组的目的是什么？

以下是我将如何解决您的问题：

首先，设计一个优化函数，该函数将在您的数据集上产生一个反映您自己的金钱与年龄优先级的排序。例如，要严厉惩罚较大的年龄差异，但更喜欢用小的钱，您可以尝试：

```
scored = FOREACH A GENERATE *, money / POW(1+ABS($my_age-age)/10, 2) AS score;
ordered = ORDER scored BY score DESC;
top10 = LIMIT ordered 10; 
```

这会根据您的优化功能为您提供 10 个最佳人选。

那么唯一的工作就是设计一个符合自己判断的函数。例如，在我选择的函数中，与你年龄相近的 100,000 美元的人将优于 10 岁（或更年轻）的 350,000 美元的人。但是，比你这个年龄只有 50,000 美元的人更喜欢 20 岁或更年轻的 500,000 美元的人。如果其中任何一个不符合您的直觉，请修改公式。可能一个简单的二次因素是不够的。但是通过一些实验，您可以找到适合您的东西。

# sql - 访问 SQL 查询以添加或更新值

> ID：16018332
> 
> 赞同：0
> 
> 时间：2013-04-15T14:53:15.913
> 
> 标签：sql, ms-access, vba

我有一个 Access 数据库，我需要根据固定长度的文本文件每周更新

该文件包含一些新记录和一些更新。

目前，我正在使用 ADODB 连接将文件视为记录集，循环通过其记录并在需要时添加或更新我的记录。

问题是这个过程非常缓慢、复杂并且会产生一些错误。

有没有办法使用 Access SQL 实现相同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:57:40.883

由于我不相信 Access 具有任何类型的“upsert”功能，我的第一个倾向是创建两个查询——一个插入查询和一个更新查询——并`WHERE`为每个查询添加一个子句以将插入和更新限制为适当的记录。然后您可以在单个事务下合并，如下所示：

```
With conn 'Assuming you keep using the ADO recordset; you could use DAO instead
  .BeginTrans
  .Execute "UpdateQuery"
  .Execute "InsertQuery"
  .CommitTrans
End With 
```

也许不理想，但比循环更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:16:51.373

我做了很多从 Excel 导入的工作，发现最简单的方法是将文件导入表并从中运行所有更新/插入，因为一旦您在本地表中拥有数据，它实际上会更快。

您可以即时创建表，但我更喜欢设置表结构并使用 TransferText 导入，您可以在其中使用导入规范。

松散地设置它：

1.  使用适当的字段名称和数据类型创建表
2.  从文本文件中手动导入数据并保存导入规范
3.  使用 VBA 导入未来的文本文件并触发更新/插入查询

代码可能如下所示：

```
' Folder where files to be imported are saved
strFilePath = "C:\myFolder\"

' Look for a .txt file in that folder

strFileName = Dir(strFilePath & "*.txt")

' Loop through all .txt files until each is imported
Do Until strFileName = ""

 strFile = strFilePath & strFileName

' Import the file to a temporary table where "myImportSpec" is what you saved
    ' the import spec as when you did the manual import and "tbl_IMPORT_Temp"
    ' is the table you created to run your queries from
    'NOTE: This is what i use for .csv files and haven't tested on .txt but
    ' I think it should work
DoCmd.TransferText acImportDelim, "myImportSpec", "tbl_IMPORT_Temp", strFile

DoCmd.OpenQuery "qryUpdateQuery", acViewNormal
DoCmd.OpenQuery "qryAppendQuery", acViewNormal

' Copy the .txt file to a new folder
FileCopy strFile, strFilePath & "Successful\" & strFileName
' Delete the original file so it isn't imported again
Kill strFile

NextFile:
    ' Clear your temp import table
    DoCmd.RunSQL "DELETE * FROM tbl_IMPORT_Temp"
    ' Get the next file to be imported
    strFileName = Dir(strFilePath & "*.txt")
Loop 
```

希望这可以帮助。西蒙

# javascript - YQL 天气声明未显示某些对象，例如日出、日落和风寒

> ID：16018339
> 
> 赞同：1
> 
> 时间：2013-04-15T14:53:35.523
> 
> 标签：javascript, xml, yql

您好，我正在使用该语句

```
 SELECT * FROM rss WHERE url="http://xml.weather.yahoo.com/forecastrss/SPXX0239_c.xml" 
```

我得到了 5 天预测的数据，包括日期、图标、温度和文本，这很棒。但是我想提取额外的信息，比如风寒、日出/日落，感觉像温度。我在请求中看不到它们？？

这是我的数据回调

```
 window['wCallback_2'] = function(data) {
// Get todays weather forecast
     var info = data.query.results.item.forecast[0];
     var code = info.code;
$('#wData_current .wDate_d').append('<TD>' + info.date) + '</TD>';
    $('#wData_current .wDay_d').append('<TD>' + info.day) + '</TD>';
    $('#wData_current .wIcon_d').append('<TD> <img src="http://l.yimg.com/a/i/us/we/52/' + code + '.gif" width="80" height="80" title="' + info.text + '" /> </TD>');
$('#wData_current .wText_d').append('<TD>' + info.text + '</TD>');
    $('#wData_current .wHigh').append('<TD>' + info.high + '&deg;' + u + '</TD>');
    $('#wData_current .wLow').append('<TD>' + info.low + '&deg;' + u + '</TD>'); 
```

};

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:38:37.993

该`rss`表只为您提供`<item>`元素内部的内容。由于 RSS 是普通的旧 XML，因此`xml`可以使用该表。

```
SELECT * FROM xml
WHERE url="http://xml.weather.yahoo.com/forecastrss/SPXX0239_c.xml"
AND itemPath="rss.channel.*" 
```

会给你一个`data`结构如下的对象：

```
{
 "query": {
  …
  "results": {
   "title": "Yahoo! Weather - Lanzarote, SP",
   …
   "location": { … },
   "units": { … },
   "wind": {
    "chill": "19",
    "direction": "20",
    "speed": "32.19"
   },
   "atmosphere": { … },
   "astronomy": {
    "sunrise": "7:29 am",
    "sunset": "8:19 pm"
   },
   "image": { … },
   "item": {
    "title": "Conditions for Lanzarote, SP at 8:59 pm WEST",
    "lat": "28.95",
    "long": "-13.6",
    "link": … ,
    "pubDate": "Mon, 15 Apr 2013 8:59 pm WEST",
    "condition": { … },
    "description": … ,
    "forecast": [ … ],
    "guid": { … }
   }
  }
 }
} 
```

要访问日出时间，您可以使用`data.query.results.astronomy.sunrise`.

# perl - 自动化 cassandra 的恢复过程

> ID：16018341
> 
> 赞同：1
> 
> 时间：2013-04-15T14:53:45.010
> 
> 标签：perl, shell, unix, cassandra

我在 1 个键空间中有 100 个列族，并且我有它们的备份（快照），我想从备份恢复到新的 cassandra 集群。下面的链接说我需要删除每个列族的文件并复制它们。有没有更简单的自动化方法，例如在文件名中查找列族名称并在键空间中搜索文件夹并将文件复制到该文件夹​​中，如 unix shell 脚本。有大量的文件。请你告诉我。谢谢

[http://www.datastax.com/docs/1.2/operations/backup_restore#snapshot-loc](http://www.datastax.com/docs/1.2/operations/backup_restore#snapshot-loc)

```
keyspace1-column_family1-ia-1362-Data.db
keyspace1-column_family1-ia-1362-compressionInfo.db
keyspace1-column_family2-ia-1362-Data.db 
```

# ios - UITableView 不显示在 UIScrollView

> ID：16018346
> 
> 赞同：0
> 
> 时间：2013-04-15T14:53:54.150
> 
> 标签：ios, uitableview, uiscrollview

我创建了一个带有 的视图`UIScrollView`，它的高度为 1000px。我`UITableView`在视图中添加了一个，以及其他标签和按钮。当我启动它时，除了桌子，一切都在它的位置。谁能解决我的问题？

我试过了：

```
table.hidden = NO; 
```

和

```
[scrollView addSubview:table]; 
```

但什么也没发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:55:03.757

的文档`UIScrollView`明确表示不要这样做：

> **重要提示**：您不应该在对象中嵌入`UIWebView`或对象。如果这样做，可能会导致意外行为，因为两个对象的触摸事件可能会混淆并错误处理。`UITableView``UIScrollView`

我建议将您打算放入滚动视图的其他视图作为 、 或自定义单元格添加到表格`tableHeaderView`中`tableFooterView`。

# requirejs - 在页面和 r.js 优化器之间使用相同的 require-config 文件？

> ID：16018350
> 
> 赞同：4
> 
> 时间：2013-04-15T14:53:57.183
> 
> 标签：requirejs

有没有办法让页面和 r.js 使用相同的 build.js？

r.js 的配置文件的格式仅包含

```
({
  //..
}) 
```

要不就`{ /*...*/}`

但该格式不能用作要求配置。如果我`require.config`在开头添加 a `build.js`then`r.js`不再接受它作为参数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T15:38:06.810

您可以将您`build.js`指向一个包含以下`require.config()`值的文件：

```
mainConfigFile: '../some/path/to/main.js' 
```

在这里解释 - [https://github.com/jrburke/r.js/blob/master/build/example.build.js#L27](https://github.com/jrburke/r.js/blob/master/build/example.build.js#L27)

# javascript - jQuery 在内容和外部内容加载完成时执行

> ID：16018351
> 
> 赞同：-3
> 
> 时间：2013-04-15T14:54:02.837
> 
> 标签：javascript, jquery

我的网站从一些外部来源（iframe、Youtube 等中的照片和电影）加载

下面的代码在我的页面加载时执行，并且在外部源仍在加载时执行。

```
$(function() {
    //some code
}); 
```

如果我想在加载所有源代码时执行脚本，我应该使用哪个代码？（包括外部来源）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:55:25.673

尝试纯javascript：

```
window.onload = function(){
    //do stuff here
}; 
```

# excel - 检查单元格是否有两个相同的数字

> ID：16018352
> 
> 赞同：0
> 
> 时间：2013-04-15T14:54:03.540
> 
> 标签：excel, vba

有人可以告诉我如何检查一个单元格，A1 包含 2 个相同的数字吗？示例单元格 A1 = 1124。我的意思是包含 2 个相同的数字，如果是这样，B1 将是“是”非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:25:58.500

如果您使用的是 Excel 2010（未在 Excel 2007 中测试），那么您不需要 VBA。您可以使用此公式`B1`并将其复制下来。

```
=IF(LOWER(A1)<>SUBSTITUTE(LOWER(A1),LOWER(1),"",2),"Yes",
 IF(LOWER(A1)<>SUBSTITUTE(LOWER(A1),LOWER(2),"",2),"Yes",
 IF(LOWER(A1)<>SUBSTITUTE(LOWER(A1),LOWER(3),"",2),"Yes",
 IF(LOWER(A1)<>SUBSTITUTE(LOWER(A1),LOWER(4),"",2),"Yes",
 IF(LOWER(A1)<>SUBSTITUTE(LOWER(A1),LOWER(5),"",2),"Yes",
 IF(LOWER(A1)<>SUBSTITUTE(LOWER(A1),LOWER(6),"",2),"Yes",
 IF(LOWER(A1)<>SUBSTITUTE(LOWER(A1),LOWER(7),"",2),"Yes",
 IF(LOWER(A1)<>SUBSTITUTE(LOWER(A1),LOWER(8),"",2),"Yes",
 IF(LOWER(A1)<>SUBSTITUTE(LOWER(A1),LOWER(9),"",2),"Yes",
 IF(LOWER(A1)<>SUBSTITUTE(LOWER(A1),LOWER(0),"",2),"Yes",
 "No")))))))))) 
```

**解释**

该公式从`0 - 9`excel 单元格中检查该特定数字是否重复出现。

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/8dbAG.png)

**VBA 版本**：

```
Sub Sample()
    Debug.Print Does2NumbersMatch(Range("A1"))
End Sub

Function Does2NumbersMatch(rng As Range)
    Dim i As Long

    Does2NumbersMatch = "No"

    For i = 0 To 9
        isMatch = Application.Evaluate("=IF(LOWER(" & rng.Address & ")<>SUBSTITUTE(LOWER(" & _
                  rng.Address & "),LOWER(" & i & "),"""",2),""Yes"",""No"")")
        If isMatch = "Yes" Then
            Does2NumbersMatch = "Yes"
            Exit Function
        End If
    Next i
End Function 
```

# php - Zend_Router 路由 url 到特定模块

> ID：16018356
> 
> 赞同：1
> 
> 时间：2013-04-15T14:54:14.917
> 
> 标签：php, zend-framework, zend-route

我正在使用 Zend，这是我的问题，我有两个不同的 url，我真的很想保持原样。

我希望 url ：“www.urlA.com”被定向到 application/moduleA/indexController/indexAction 和“www.urlB.com”到 application/index/index。

换句话说，我希望 Zend_Router 确保当我键入 www.urlA.com/index/login 时，我使用 application/ **moduleA** /Index 控制器和 loginAction()。

我想保留经典的 Zend 路由，只需添加我的模块已经在 url 中指定的事实。

我在引导程序中有以下代码：

```
protected function _initRouter()
{
    $router = Zend_Controller_Front::getInstance()->getRouter();
    $route = new Zend_Controller_Router_Route_Hostname(
        'www.urlA.com',
        array(
            'module'=>'moduleA'
        )
    );
    $routeURI = new Zend_Controller_Router_Route();
    $router->addRoute('modulea', $route->chain($routeURI));
} 
```

这种方式与“urlA”我正确地去 moduleA/index/index 但
“urlA/index/login”不起作用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T16:02:53.400

我曾经遇到过类似的问题，我写了这个：

```
//ADMIN page
$admin = array('module' => 'admin', 'controller' => 'index', 'action' => 'index');
$hostRoute_admin = new Zend_Controller_Router_Route_Hostname('admin.mysite.com', $admin);

//special environement Website
$env = array('module' => 'env', 'controller' => 'index', 'action' => 'index');
$hostRoute_env = new Zend_Controller_Router_Route_Hostname('env.mysite.com', $env);

//Zend classic routing
$plainPathRoute = new Zend_Controller_Router_Route(':controller/:action/*',
        array('controller' => 'index', 'action' => 'index'));

//add specific routing
Zend_Controller_Front::getInstance()->getRouter()->addRoute('admin', $hostRoute_admin->chain($plainPathRoute));
Zend_Controller_Front::getInstance()->getRouter()->addRoute('env', $hostRoute_env->chain($plainPathRoute)); 
```

# iphone - pickerview 没有响应右侧的点击

> ID：16018359
> 
> 赞同：0
> 
> 时间：2013-04-15T14:54:34.227
> 
> 标签：iphone, uipickerview

我有一个选择器视图，它在文本字段中，开始编辑方法不在 viewdidload 中。如果我在右侧单击或滚动，则不会调用行方法的选择器视图。

```
 - (void)textFieldDidBeginEditing:(UITextField *)textField {
       viewForValueForPicker = [[UIView alloc]initWithFrame:CGRectMake(60, txtvisitReason.frame.origin.y+txtvisitReason.frame.size.height, 180, 160)];
        UIToolbar *toolBar = [[UIToolbar alloc]initWithFrame:CGRectMake(60, 0, 180, 30)];
        toolBar.barStyle = UIBarStyleBlackOpaque;
        UIBarButtonItem *btn = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneBtnPressToGetValue)]autorelease];
        [toolBar setItems:[NSArray arrayWithObject:btn]];
        [viewForValueForPicker addSubview:toolBar];
                   pickerView = [[UIPickerView alloc] init];
        pickerView.frame=CGRectMake(60, 30, 180, 140);
        pickerView.delegate=self;
        pickerView.dataSource=self;
        pickerView.showsSelectionIndicator=YES;
        [viewForValueForPicker addSubview:pickerView];
        [testscroll addSubview:viewForValueForPicker];

        [txtvisitReason resignFirstResponder];
        } 
```

要知道我的问题，我已经实现了像这样的手势识别器方法

```
 - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
 {
if(touch.view==testscroll)//just checking my touch here
{

}
} 
```

现在，如果单击左侧，我的触摸是“表格视图单元格内容视图”，右侧是“uiscrollview”而不是“表格视图单元格内容视图”。如果我在该点滚动，我的总视图滚动而不是选择器视图元素。我没有得到任何想法。我的应用程序中的每一个地方都在发生。请给我一个想法。提前致谢。

# javascript - JSDuck - 创建的文档不显示任何函数参数

> ID：16018362
> 
> 赞同：1
> 
> 时间：2013-04-15T14:54:41.230
> 
> 标签：javascript, jsduck

示例：有几个 .js 文件具有几个功能，例如：

```
/**
 * TestFunction - doing something.
 * @param {String} strTest Test string.
 * @return {Boolean} bRes Returned value.
 */
function TestFunction(strTest) {
   //code ...
   return bRes;
} 
```

JsDuck.exe 创建帮助文件后 - 函数描述中不存在函数参数，仅返回值 bRes 和描述。版本：SDuck 5.0.0.beta2 也尝试过早期版本，结果相同。

有没有人将 JSduck 用于功能框架并获得成功。还是有任何解决方法可以正常工作？

相同的 .js 文件可以与 JSDoc 工具包一起正常工作，并显示所有数据，但 JSDuck 仍然更适合使其工作。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:47:08.997

在 bug-tracker 中回答了您的问题：[https ://github.com/senchalabs/jsduck/issues/358](https://github.com/senchalabs/jsduck/issues/358)

# php - PHP 解析错误：“在意外的 T_ENCAPSED 和空白处收到解析错误。”

> ID：16018364
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:54:44.353
> 
> 标签：php, mysql, parsing, whitespace

我收到一个 PHP 错误：

```
Parse Error received on unexpected T_ENCAPSED AND WHITESPACE. 
```

该行：`($insert .= "($POST...)`是产生错误的行。

```
(string)$insert;
if(is_array($_POST['Year']))
{
    foreach($_POST['Year'] as $k=>$v)
    {
        //the following line returns the error
        $insert .= "($_POST['Name'][$k], $_POST['One'][$k], $_POST['Two'][$k], $_POST['Four'][$k], $_POST['Eight'][$k], $_POST['Fifteen'][$k], $_POST['LJump'][$k], $_POST['HJump'][$k], $_POST['Shotputt'][$k], $_POST['Discuss'][$k], $_POST['Javelin'][$k], $_POST['Date'][$k], $_POST['Year'][$k]),";
    }
    $insert = substr_replace($insert ,0,-1);
}
else
{
    $insert .= "($_POST['Name'], $_POST['One'], $_POST['Two'], $_POST['Four'], $_POST['Eight'], $_POST['Fifteen'], $_POST['LJump'], $_POST['HJump'], $_POST['Shotputt'], $_POST['Discuss'], $_POST['Javelin'], $_POST['Date'], $_POST['Year'])";
}

$sql="INSERT INTO results_main 
(Name, One, Two, Four, Eight, Fifteen, LJump, HJump, Shotputt, Discuss, Javelin, Date, Year)
VALUES 
".$insert;

$result = mysql_query($sql) or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T14:57:20.103

基本 PHP 语法：不能在双引号字符串中使用带引号的数组键：

```
$x = "$array['key']";
             ^---^--- wrong 
```

它应该是：

```
$x = "{$array['key']}";
      ^--           ^--- note the braces
or
$x = "$array[key]";
             ^--^-- note lack of ' quotes 
```

你也敞开心扉，乞求[SQL 注入攻击](http://bobby-tables.com)。因此，在进行任何其他编码之前，请先了解这一点。

# css - 开发者工具：如何快速检查正常状态和 :focus 的样式差异？

> ID：16018371
> 
> 赞同：1
> 
> 时间：2013-04-15T14:55:02.267
> 
> 标签：css, debugging, google-chrome-devtools, developer-tools

我试图在大量 CSS 文件中找到 CSS 规则，该规则负责在输入元素聚焦时将框阴影（或类似的东西）应用于输入元素。

我的问题是这个。当元素变得聚焦时，我如何才能准确地看到哪些样式正在*发生变化*，而不是它的正常状态？

我知道如何在元素上设置焦点状态，这样我就可以绝对检查应用于两种状态的所有计算样式：

![在此处输入图像描述](https://i.stack.imgur.com/i5eod.png)

但问题是在这两种状态的元素上设置了太多样式，以至于我无法轻松跟踪发生了什么变化。它可以是一个盒子阴影、一个边框、一个轮廓……有很多规则和很多可能性。

我知道我可以使用右侧边栏来查看所有适用的样式规则 - 但同样，有太多以至于很难跟踪其中的不同之处。

目前我有三个选择：

1.  在正常状态下写下所有计算的样式，然后在 :focus 状态下写下所有样式，然后进行手动比较
2.  为两种状态写下所有匹配的 CSS 规则，并进行手动比较
3.  找到一种方法来做一个实际的差异！

所以我的问题是：（3）可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:01:14.783

在样式部分（在计算样式下方）下的 Chrome 开发人员工具中，有一个按钮（切换元素状态）来模拟状态。如果您想查看在不同状态下哪些样式处于活动状态，这将非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T17:43:44.607

你可以试试我的[CSSDiff](https://chrome.google.com/webstore/detail/css-diff/pefnhibkhcfooofgmgoipfpcojnhhljm?hl=en)扩展。它显示了最后两个检查元素之间的差异。这并不是您想要实现的目标，但是，您应该能够通过检查两个相同类型的输入来使用它（这样您将看到焦点元素和非焦点元素之间的实际差异） .

# php - Symfony2 - 嵌入式表单擦除子数据

> ID：16018374
> 
> 赞同：1
> 
> 时间：2013-04-15T14:55:17.987
> 
> 标签：php, forms, symfony, doctrine

[这](https://stackoverflow.com/q/15977529/399584)又是这个的另一个延续，也是[这个](https://stackoverflow.com/q/16016482/399584)：

因此，我最初能够显示一个包含 BlogPost 及其相关评论的表单。问题是，如果我编辑一些 BlogPost 信息并保存，它会清除我的*所有*评论，无论它们是否与*该*BlogPost 相关。不好。

我的大部分相关代码都在上面的第二个链接中，这里不再赘述。但是，我将添加控制器和视图中的内容。

控制器：

```
public function EditBlogAction($id)
{
    $request = $this->get('request');
    $em = $this->get('doctrine')->getManager();
    $blogPost = $em->getRepository('Acme\SiteBundle\Entity\BlogPost')->find($id);

    $comments = $blogPost->getComments();

    $form = $this->createForm(new BlogPostType(), $blogPost);

    if ($request->getMethod() == 'POST') {
        $form->bind($request);

        foreach ($comments as $comment) {
            $em->persist($comment);
        }
        $em->persist($blogPost);

        $em->flush();
        $em->clear();
    }

    return $this->render('SiteBundle:Site:editblog.html.twig',array('blogpost' => $blogPost, 'form' => $form->createView()));
} 
```

编辑博客.html.twig：

```
<form action='{{ path('_admin_blog_edit', { 'id':blogpost.getId }) }}' method='post' enctype="multipart/form-data">
    {{ form_widget(form.title) }}

    {# other blog post fields #}

    {% for comment in form.comments %}
        {{ comment.commentBody }}
    {% endfor %}
<input type="submit" /> 
```

我不明白为什么保存 BlogPost 信息会清除任何评论，更不用说不属于该特定帖子的评论了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:19:07.883

您正在使用和之间`cascade={"all"}`的`OneToMany`关系。`Comment``BlogPost`

您不需要手动`persist`发布随博客文章发布的评论，因此您可以从控制器中删除以下代码（在 中`EditBlogAction()`）：

```
foreach ($comments as $comment) {
  $em->persist($comment);
} 
```

关于该主题的教义文档：[https ://doctrine-orm.readthedocs.org/en/latest/reference/working-with-associations.html?highlight=Transitive%20Persistence#transitive-persistence-cascade-operations](https://doctrine-orm.readthedocs.org/en/latest/reference/working-with-associations.html?highlight=Transitive%20Persistence#transitive-persistence-cascade-operations)

# javascript - 从 jQuery/javascript 执行控制器操作

> ID：16018381
> 
> 赞同：0
> 
> 时间：2013-04-15T14:55:29.623
> 
> 标签：javascript, jquery, asp.net-mvc

我的视图中有一个 ListBox - 当我从列表框中选择一个项目时，我想调用一个控制器方法，对该值执行查找，然后用这些值重新绘制页面。

我的列表框代码和我的 jQuery 代码如下所示：

```
@using (Html.BeginForm())
{
  ...
  <h3>Environments</h3>
  @Html.ListBox("Environment",
                 new SelectList(Model.Environments), 
                 new {@id="environmentsListbox"})           
  ...
}

<script>
    $(document).ready(function () {
        $('#environmentsListbox').click(function () {
            var selected = $('#environmentsListbox').find(":selected").text();
            $.ajax({
               url: '@Url.Action("Index")',
               data: { selectedEnvironment: selected },                
               success: function(data) {
                   ---- What to do here?
               }
           });
        });
   });   
</script> 
```

控制器方法如下所示：

```
 public ActionResult Index(string selectedEnvironment)
 {
     // code omitted for brevity...
     var frameworkConfig = GetInfo(selectedEnvironment);

     return View(frameworkConfig);
 } 
```

调用正常工作，所选文本确实进入控制器方法....但是我该怎么处理结果？我正在寻找与`@Html.Action("Index", selectedEnvironment)`您在普通 MVC 上下文（非 js）中使用的类似的东西。我在`data`变量中有返回的视图代码，有没有办法用该值重新加载页面？

我在这篇文章中看到了答案：[How to call URL action in MVC with javascript function?](https://stackoverflow.com/questions/8992721/how-to-call-url-action-in-mvc-with-javascript-function) 并且非常接近我需要做的事情，但是来自该控制器方法的结果视图代码被推送到包含的 div 标记中，而不是当前视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:08:26.887

您可以使用 jQuery 的 .html() 函数。在您的成功回调中，执行以下操作：

```
<script>
    $(document).ready(function () {
        $('#environmentsListbox').click(function () {
            var selected = $('#environmentsListbox').find(":selected").text();
            $.ajax({
               url: '@Url.Action("Index")',
               data: { selectedEnvironment: selected },                
               success: function(data) {
                   $('#container').html(data);
               }
           });
        });
   });   
</script> 
```

您要确保从控制器返回的视图具有您需要的标记（没有任何布局代码等）。直接在浏览器中访问该 url 以查看它返回的内容。

# java - 将 void** 指针转换为等效的 Java 类型

> ID：16018387
> 
> 赞同：7
> 
> 时间：2013-04-15T14:55:42.363
> 
> 标签：java, pointers, dll, types

我正在从用 Java 编写的程序加载 C DLL。我希望能够使用此声明从 DLL 调用其中一种方法：

```
dll_function(const char* foo1, const char* foo2, const char* foo3, void** bar, size_t* bar2); 
```

**如何在 Java 中使用正确类型的参数调用此方法？**我知道（理论上）如何调用它，但我想知道如何从我的 Java 程序中传递“void**”和“size_t*”？基本上，**我想知道 void**和 size_t*****在 Java 中**的“等效类型”是什么......

我找到了 Pointer 类但没有设法让它工作？非常感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:40:34.063

几年前我从事过一个 Java/JNI/C 项目，我们不得不在 Java 对象中维护不透明的 C 指针。我们`long`在 Java 端使用值来保存 C 指针，这些指针在 JNI 端从`jlong`to`void*`或我们需要的任何指针类型转换。

由于 Java`long`类型是 64 位宽，而 JNI/C 指针通常是 32 位或 64 位宽，我们在它们之间进行转换没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:26:33.533

是一个整数，`size_t`用于表示内存中变量的大小；因此，您应该`unsigned long`在 Java 中安全使用。

`void*`很可能是一个指向未知类型对象的指针。[这个问题](https://stackoverflow.com/questions/1043034/what-does-void-mean-in-c-c-and-c)，在这件事上很有趣。在这种情况下通常使用 Java `Object`，但我不知道您将如何在它们之间进行转换，尽管[这个问题](https://stackoverflow.com/questions/6152747/jni-not-support-types-as-void-unsigned-int-what-to-do)可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:01:59.303

我尝试了你的解决方案，但我想我并没有真正理解正确...... **但我用这个解决了我的问题：**

```
import com.sun.jna.ptr.IntByReference; 
```

我在我的 Java 程序中这样调用 C 函数：

```
IntByReference myVoidPointerPointer = new IntByReference();
myCLibrary.myCFunction(myVoidPointerPointer); 
```

C 函数“myCFunction”如下所示：

```
void myCFunction(void** parameter); 
```

这样做可以吗？它正在工作，但我想知道这是否是正确的方法。

# sql-server - 是否需要直接修改 XML 来为不同的环境准备 SSIS 包？

> ID：16018390
> 
> 赞同：2
> 
> 时间：2013-04-15T14:55:47.470
> 
> 标签：sql-server, sql-server-2008, ssis

我正在维护一些我没有构建的 SSIS 包，它会创建一个输出文件 ( `.txt`)，然后将其通过电子邮件发送给一个组。但是，该包实际上是为 PROD 完全配置的。我需要修改的一些组件是：连接管理器、文本文件的取放位置、邮件服务器等。

**我是否必须直接修改 XML 才能将其部署到其他环境？**

请注意，我无权在这些其他环境中进行部署 - 我只需将其交给另一个团队即可。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T15:32:49.827

我几乎会把它作为评论发布，但如果你不熟悉 SSIS，值得注意的是，大约有 3 种方法可以将包链接到配置文件。

您当然可以修改配置文件。但是，我认为为环境设置配置文件是操作人员应该拥有的东西。如果您需要为您的开发环境设置连接，您会遇到一个稍微复杂的问题。

包可能会从环境变量中获取位置，在这种情况下，您只需为您的开发环境设置配置文件并将环境变量配置为指向它即可。不过，您需要确保 BIDS 使用环境变量集运行。

如果配置是通过切换到 DTExec 提供的，则最好直接在包中设置连接。在这种情况下，包不会使用配置文件，除非你指定一个路径`DTExec /Config`

如果路径被硬编码到包中（即指定路径而不是环境变量），那么您可以调整该路径。但是，作为部署过程的一部分，运维人员必须对其进行编辑。或者，您可以编写一个小的 .Net 应用程序来进行更新并将其用作部署的一部分。这样做的缺点是它在部署包时引入了人为错误的范围。

如果您需要手动维护配置文件，我建议您不要缩进，这样它就更具可读性。默认情况下，SSIS 不会在文件中放置空格，但它不介意你这样做。

# linux - Linux 镜像 开发环境的一些文件

> ID：16018391
> 
> 赞同：1
> 
> 时间：2013-04-15T14:55:49.223
> 
> 标签：linux, development-environment

为开发人员镜像生产环境数据的好方法是什么？我们有一台生产服务器，可以挂载许多 smb 共享，几个脚本会定期运行这些共享。

我们现在有一个单独的服务器用于开发，我们希望保持单独的测试。如何从所有这些 smb 共享中获取示例数据而不复制它们？开发服务器无法保存所有这些数据，所以我正在寻找可以常规运行的东西，只需将第一个 X 文件从每个目录中复制出来。

目标是让开发服务器“安全”并且在测试期间不挂载那些相同的共享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:11:29.877

对于我喜欢的开发环境：

*   已知的好数据
*   已知（构建的）不良数据
*   实时数据的随机样本

我所说的“构建”是指我以某种方式组合在一起的数据，所以我确切地知道它有多糟糕。

在您的情况下，我将拥有我的好数据和坏数据，然后编写一个小 Bash 脚本将数据从 SMB 共享复制到本地开发机器。也许`ls -t`在每个共享上运行 a 以便您可以获取最新文件，将该输出保存到文件并使用`head`或其他一些实用程序来读取前 N 行 - 并将这些文件复制到您的开发机器。

伪代码

```
clear data directory
copy known good data from some local directory
copy known bad data from some local directory
begin loop: for every SMB share
   run `ls -t` and output the results to a file
   run `head` or some other utility to get the first N lines (ie file names)
   copy those files from the SMB share to my local data directory
end loop 
```

你可以设置 cron 来执行这个小脚本，无论你想要什么。

# jquery - jQuery showAllComments 切换 - 带有真/假变量

> ID：16018392
> 
> 赞同：0
> 
> 时间：2013-04-15T14:55:50.300
> 
> 标签：jquery, ajax, variables

**您好，我有一个评论系统，最多可以加载 10 条评论。我使用 JQuery AJAX post 发送输入的数据，然后获取结果。**

现在我添加了一个按钮来加载所有消息，该按钮将发送另一个 POST 并且该帖子将导致 PHP 中的一个函数加载所有结果而没有**LIMIT 10。**

*一切都很好，但我有一个小问题。*

如果我单击加载所有消息按钮，**它将添加所有消息+而不是删除其他 10 个。**

这是一个*简单的修复*，我只是在处理时删除另一个。但是当我单击加载所有消息按钮时，它不会显示所有消息，它会再次显示 10。

**那是因为 javascript 一遍又一遍地执行加载消息过程。**

**因此我需要做这样的事情：**

```
if (loadAll == false) {
     load10 messages
} else {
     load all messages
} 
```

**但我的问题是：**

我怎样才能做到这一点？我必须将函数 loadAll 定义为 false（这是默认值），然后我可以这样做：

```
$("#loadall").click(function() {
     loadAll = true;
}); 
```

在它之前我可以添加：

```
var loadAll = true; 
```

要不就

```
 loadAll = true; 
```

但是当javascript将处理时， loadAll = false 的定义将在您单击该链接后覆盖 true ，因此不会加载所有评论..

**问题**

如何使它不会在单击 $("#loadall").click() 时用 TRUE 覆盖 FALSE？所以它会删除 10 条评论，然后加载所有评论？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:39:23.063

你可以使用另一个变量说

```
var loadingData = false; 
```

并在您执行 ajax 请求时将变量修改为 true。请求完成后将其移回 false。在执行 ajax 请求之前开始获取数据时检查这两个变量。

编辑：

```
var loadingData = false;
var loadAll = false;

function loadMessageFunc{
    if(!loadAll && !loadingData) {
        loadingData = true;
        //Get Data Here
        //On Result
        ...
        loadingData = false;
    }
}

function loadAllFunc{
    if(!loadingData) {
         loadAll = true;
         loadingData = true;
         //Get All Data Here
         //On Result
         ...
         loadAll = true; //If you want to stop load message calls after one load all call
         loadingData = false;
    }
} 
```

这将确保两者不会同时被调用。您可以相应地清除/加载数据。

# java - Android SQLite 尝试解锁读锁，而不是被当前线程锁定

> ID：16018395
> 
> 赞同：0
> 
> 时间：2013-04-15T14:56:01.030
> 
> 标签：java, android, database, sqlite, java.lang.class

我的应用程序运行良好，直到我偶然发现这个 SQLite 错误：

```
java.lang.IllegalMoniterStateException: attempt to unlock read lock, not locked by current thread 
```

我已经尝试过 StackOverflow 上的所有其他答案，但它们似乎没有帮助。他们都说我有多个线程创建我的 SQLiteDBAdpdter 实例，但我只有 Activity，但它是一个 SherlockFragmentActivity。每个类都创建了一个新的 SQliteDBAdapter 实例，所以我不确定这是否是我收到此错误的原因。

我已经坚持了几个小时，非常**感谢**任何帮助。

片段 1：

```
public final class NotesFragment extends SherlockListFragment {
NotesDbAdapter db;
private static final int ACTIVITY_EDIT = 1;

private static final int DELETE_ID = Menu.FIRST + 1;

public static NotesFragment newInstance(String content) {
    NotesFragment fragment = new NotesFragment();

    return fragment;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    db = new NotesDbAdapter(getActivity());

    db.open();
    if (db.fetchAllNotes().getCount() == 0) {
        doWelcomeMessage();
    }
    db.close();

}

private void doWelcomeMessage() {
    // Show welcome dialog
    startActivity(new Intent(getActivity(), NotesWelcome.class));

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if (container == null) {
        return null;
    }

    db = new NotesDbAdapter(getActivity());

    db.open();
    if (db.fetchAllNotes().getCount() == 0) {
        doWelcomeMessage();
    }
    db.close();

    return ll;

} 
```

}

错误指向方法`db.open();`中`onCreate()`。我的`open()`方法`SQLiteDBAdapter (NotesDBAdapter)`如下：

```
public NotesDbAdapter open() throws SQLException {
    mDbHelper = new DatabaseHelper(mCtx);
    mDb = mDbHelper.getWritableDatabase();
    return this;
} 
```

在`onCreate()`我的 NotesDBAdapter 中是：

```
@Override
    public void onCreate(SQLiteDatabase db) {

        SQLiteDatabase checkDB = null;

        String myPath = "data/data/com.xxx.xxx/databases/data.db";
        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);
        if (checkDB != null) {
            // exists; do nothing
        } else {
            // create DB

            db.execSQL(DATABASE_CREATE);

        } 

    } 
```

**再次感谢！**

**编辑** 另一个片段

> 创建一个新实例

*数据库的代码称为片段 2，但我*没有显示它的代码，因为它与片段 1 完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:00:00.630

你写：

> 每个类都创建了一个新的 SQliteDBAdapter 实例，所以我不确定这是否是我收到此错误的原因。

我不确定您指的是哪些类，因为在您的示例中我只看到两个部分类 -`NotesFragment`和`NotesDbAdapter`. 但是，如果您的活动依赖于每个打开和关闭数据库的其他类，那么您必须确保没有任何递归尝试打开数据库。（即，A 类打开数据库，然后调用 B 类，它尝试使用自己的 DBHelper 实例打开数据库。此时，B 试图打开数据库，而 A 已打开它。）

正如[dongshengcn](https://stackoverflow.com/a/16018815/71034)之前指出的那样，这可能是错误。`NotesFragment.onCreate`在 中打开数据库并在中关闭数据库并将对象从`NotesFragment.onDestroy`传递到这些其他类可能更合适。`db``NotesFragment`

下一个问题是，你的`NotesDbAdapter`班级有合适的`close`方法吗？它应该看起来像这样，并且（如上所述）从`NotesFragment.onDestroy`.

```
 @Override
    public synchronized void close() {

        if (mDbHelper != null) {
            mDbHelper.close();
            mDbHelper = null;
        }

        super.close();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:16:27.043

我不确定这是否是问题所在，但似乎您打开同一个数据库两次进行写入。请打开一个并在您的应用程序中共享它。

另请在此处阅读：[Android 线程和数据库锁定](https://stackoverflow.com/questions/2647542/android-threading-and-database-locking)

# jquery - 将事件添加到创建的元素

> ID：16018400
> 
> 赞同：3
> 
> 时间：2013-04-15T14:56:13.750
> 
> 标签：jquery

我正在更新我的代码......大多数事情都解决了。一个问题仍然存在：

当我在元素（1 和 2）之间更快地移动鼠标时，工具提示不会显示。

我认为发生这种情况是因为我对元素鼠标离开有延迟：

```
$this.mouseleave(function (e) {
  tooltip.timer = setTimeout(function () {
    $("." + options.class).detach();
  }, !options.mouse || options.static ? options.delay || 0 : 0);
}), // Mouse leave 
```

当其中有链接时，我有它允许鼠标在工具提示上移动。

这个想法是在鼠标移过另一个元素时取消隐藏延迟。

该插件可以在[http://jsfiddle.net/mdmoura/RPUX6/中测试](http://jsfiddle.net/mdmoura/RPUX6/)

整个代码如下：

```
(function ($) {

  $.fn.Tooltip = function (options) {

    var defaults = {
      class: 'Tooltip',
      content: '',      
      delay: 120,
      mouse: false,
      offset: [0, -20],
      static: true,
      effect: function ($element, $tooltip) {
        $tooltip.fadeIn(200);
      }      
    };

    options = $.extend({}, defaults, options);

    $(this).each(function (e) {
      var $this = $(this);
      var tooltip = { timer: null, title: $this.attr('title') };

      $this.mouseenter(function (e) {

        var $tooltip =
          $("<div>")
          .attr("class", options.class)
          .html(options.content !== '' ? (typeof options.content === 'string' ? options.content : options.content($this, $tooltip)) : tooltip.title)
          .appendTo('body');

        $this.attr('title', '');

        var position = [0, 0];

        if (options.mouse) {
          position = [e.clientX + options.offset[0] + $(window).scrollLeft(), e.clientY + options.offset[1] + $(window).scrollTop()];
        } else {
          var coordinates = $this[0].getBoundingClientRect();       
          position = [
            (function () {
              if (options.offset[0] < 0)
                return coordinates.left - Math.abs(options.offset[0]) - $tooltip.outerWidth() + $(window).scrollLeft();
              else if (options.offset[0] === 0)
                return coordinates.left - (($tooltip.outerWidth() - $this.outerWidth()) / 2) + $(window).scrollLeft();
              else
                return coordinates.left + $this.outerWidth() + options.offset[0] + $(window).scrollLeft();

            })(),
            (function () {
              if (options.offset[1] < 0)
                return coordinates.top - Math.abs(options.offset[1]) - $tooltip.outerHeight() + $(window).scrollTop();
              else if (options.offset[1] === 0)
                return coordinates.top - (($tooltip.outerHeight() - $this.outerHeight()) / 2) + $(window).scrollTop();
              else
                return coordinates.top + $this.outerHeight() + options.offset[1] + $(window).scrollTop();

            })()
          ];
        }

        $tooltip.css({ left: position[0] + 'px', top: position[1] + 'px' });

        options.effect($this, $tooltip.stop(true, true));

        $tooltip.mouseenter(function () {
          window.clearTimeout(tooltip.timer);
          tooltip.timer = null;
        }); // Tooltip enter

        $tooltip.mouseleave(function () {
          tooltip.timer = setTimeout(function () {
            $tooltip.remove();
          }, !options.mouse || options.static ? options.delay || 0 : 0);
        });

      }), // Mouse enter

      $this.mouseleave(function (e) {
        tooltip.timer = setTimeout(function () {
          $("." + options.class).remove();
        }, !options.mouse || options.static ? options.delay || 0 : 0);
      }), // Mouse leave  

      $this.mousemove(function (e) {
        if (options.mouse && !options.static) {
          $("." + options.class).css({ left: e.clientX + options.offset[0] + $(window).scrollLeft() + 'px', top: e.clientY + options.offset[1] + $(window).scrollTop() + 'px' });
        }
      }); // Mouse move
    }); // Each
  }; // Tooltip
})(jQuery); // JQuery 
```

我正在使用超时来允许鼠标在工具提示上移动。

有谁知道如何解决当前的问题？

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:30:27.103

你可能想试试这个插件 - [jQuery Powertip](http://stevenbenner.github.io/jquery-powertip/)

`mouseOnToPopup`您可以使用该选项与工具提示进行交互。

```
$('#mouseon-examples div').powerTip({
    placement: 'e',
    mouseOnToPopup: true // <-- Important bit
}); 
```

“您也可以在官方[jsFiddle 演示](http://jsfiddle.net/stevenbenner/2baqv/)中使用 PowerTip ”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:20:47.690

创建工具提示后：

```
 $('#Tooltip').mouseenter(function(){
      $(this).addClass('active');
    });
     $('#Tooltip').mouseleave(function(){
        setTimeout(function(){
          $("#Tooltip").remove();
        }, 1000);  
    }); 
```

当您离开工具提示区域时，请检查“活动”类是否存在。

```
 $(this).mouseout(function (e) {
    if($('#Tooltip').hasClass('active'))
    {
      setTimeout(function(){
        $("#Tooltip").remove();
      }, 1000);
    }
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:27:58.897

你想做什么。

在要触发工具提示的区域上侦听鼠标悬停/单击事件。你做的那部分。

在工具提示显示上绑定一个全局事件监听器。监听 mousemove，然后检查您是否在工具提示或触发元素内。

如果不是，则隐藏工具提示并删除全局偶数侦听器。

一点伪代码

```
onShow: function(){
  $('body').off('mousemove');
  //might want to do _.debounce to make sure you dont trigger it to often
  $('body').on('mousemove', function(e){
     if(!$tooltip.has(e.target) && !$this.has(e.target)) {
       $tooltip.hide(); 
     }
  });
}

onHide: function(){
  //naturally you should be more careful with this 
  //and not just blindly remove all mousemose on the body
  //easy fixed by giving the event a unique id
  $('body').off('mousemove')
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T17:00:07.067

```
 $this.mouseleave(function (e) {
    setTimeout(function(){ ... 
```

也许您在帖子中忘记了一些代码，但是超时的 id 没有存储在任何地方，因此无法清除。您可以编写`timer = setTimeout(...`，其中计时器定义如下

```
 $(this).each(function () {     
   var $this = $(this),
       timer; 
```

然后你可以很容易地用

```
 $tooltip.mouseenter(function (e) {
   clearTimeout(timer);
 }); 
```

你的 mouseleave 处理程序应该是

```
 $tooltip.mouseleave(function (e) {
  $(this).remove(); //or $tooltip.remove();
 }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T15:03:04.723

将您的 mouseleave 函数替换为：

```
 $(this).mouseout(function (e) {
       setTimeout(function(){
       $("#Tooltip").remove();
       }, 1000);
    }), 
```

但是1s之后，问题还是一样：tooltip会消失。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T13:50:07.147

正如我所说，我支持[apaul34208](https://stackoverflow.com/a/16108202/86072)建议“使用已经存在的插件，人们已经遇到并考虑过极端情况”。也许这个特定的插件不会做，但考虑到工具提示插件的数量，你应该找到你的需要。

话虽如此 ：

你的问题是你的函数系统地调用`.remove()`，当它应该做类似的事情时`check if I should remove the tooltip, if yes do so`。

```
function incrVisCounter($tooltip){
    var cnt = 1 + $tootltip.data('visCounter');
    $tootltip.data('visCounter', cnt);
}

function decrVisCounter($tooltip){
    setTimeout(function(){
        var cnt = $tootltip.data('visCounter') - 1;
        $tootltip.data('visCounter', cnt);
        if (cnt <= 0) {
            $tooltip.remove();
        }
    }, 300);
}

    $this.mouseenter(function (e) {
        displayTooltipIfNotShownAlready($this); //<- you will need to write some code here ...

        incrVisCounter( $('#tooltip') );
    });

    $this.mouseleave(function (e) {
        decrVisCounter( $('#tooltip') );
    });

    $tooltip.mouseenter(function (e) {
        incrVisCounter( $(this) );
    });

    $tooltip.mouseleave(function (e) {
        decrVisCounter( $(this) );
    }); 
```

* * *

`$('.'+options.class).remove()`将删除您页面上的*任何工具提示。*您必须只针对特定的一个。

一个建议：

[编辑] 不要忘记`var`关键字...

```
 $this.mouseenter(function(){
     var $tooltip = ...

     $this.data('tooltip', $tooltip);
 });

 $this.mouseleave(function(){
     var $tooltip = $this.data('tooltip');
     setTimeout(function(){ $tooltip.remove() }, delay);
 }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T07:10:08.363

[http://jsfiddle.net/RPUX6/76/](http://jsfiddle.net/RPUX6/76/)

```
 $this.mouseleave(function (e) {
      $("." + options.class).fadeOut(500, function() {
          this.remove();
      });
 }), // Mouse leave 
```

我证实这确实删除了工具提示。我不知道你为什么说它没有。奇怪的。

# javascript - Splitting array based on values

> ID：16018407
> 
> 赞同：6
> 
> 时间：2013-04-15T14:56:25.303
> 
> 标签：javascript, arrays, json, split

It's been a long time since I had to work on some javascript code and I'm a lot rusty.

I need to split an array like this:

```
Object (
    [0] => 2013-04-12
    [1] => text
    [2] => text
    [3] => text
    [4] => text
    [5] => 2013-04-11
    [6] => text
    [7] => text
    [8] => text
    [9] => text
    [10] => text
    [11] => text
    [12] => 2013-04-10
    [13] => text
    [14] => text
    [15] => text
    [16] => text
    [17] => 2013-04-09
    [18] => text
    [19] => text
    [20] => text
)

```

into json objects or arrays where index 0 is always the date:

```
Object0 (
    [0] => 2013-04-12
    [1] => text
    [2] => text
    [3] => text
    [4] => text
)
Object1 (
    [0] => 2013-04-11
    [1] => text
    [2] => text
    [3] => text
    [4] => text
    [5] => text
    [6] => text
)

Object2 (
    [0] => 2013-04-10
    [1] => text
    [2] => text
    [3] => text
    [4] => text
)

Object3 (
    [0] => 2013-04-09
    [1] => text
    [2] => text
    [3] => text
)

```

So as you can see, I can only use the value to figure out each new array, which can be of different sizes.

Thanks for any help.

**UPDATE** Sorry I didn't publish my code in the initial question because what I had written was way too crap (and I was very ashamed). Here the code I used in the end thanks to the solution from Bangerang. Thanks everyone for your help and contributions.

```
var events = [];
var result = [];
var j = 0;
for (var i = 0; i < tableData.length; i++){
    if (/^(\d{4})-(\d{2})-(\d{2})$/.test(tableData[i])){ //Returning true if it's just numbers
        j = j + 1;
        events[j] = [];
        events[j].push(tableData[i]);
        result.push(events[j]);
    } else {
        events[j].push(tableData[i]);
    }
}

// Then I write the json message which will be eval to use with FullCalendar.
var json_events = '[';
for (var i = 1; i <= events.length; i++){
    if (typeof events[i] !== 'undefined' && events[i].length > 0) {
        for (var j = 0; j < events[i].length; j++){
            if(/@/.test(events[i][j])){

                json_events += '{"start":"' + events[i][0] + '",';
                json_events += '"textColor":"black",';

                var tmp = events[i][j].split("@");
                json_events += '"backgroundColor":"' + tmp[0] + '",';

                var text_pattern = new RegExp(/<b>([a-z_]+)<\/b>(.+)/);
                var title_desc = text_pattern.exec(tmp[1]);                            
                json_events += '"title":"' + title_desc[1] + '",';
                json_events += '"description":"' + title_desc[0] + '"';
                json_events += '},';
            }
        }
    }
}
json_events += ']';
json_events = json_events.replace("},]","}]"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T15:23:07.177

Assuming that the date's is the only ones with just numbers in it you can try this:

```
var object = [];
var result = [];
for (var i = 0; i < objects.length; i++){
    if (/^\d+$/.test(objects[i])){ //Returning true if it's just numbers
        object = []
        object.push(objects[i]);
        result.push(object);
    }else {
        object.push(objects[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T15:05:53.123

basically,

```
result = []

sourceArray.forEach(function(element) {
    if(element looks like a date)
        result.push([])
    result[result.length - 1].push(element)
}) 
```

post your actual code if you want more ;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T15:13:44.000

Currently, the work is not really complicated. You just have to go through your array, and create a new one when you encounter a date formatted cell. Until then, you fill the previous created array with the non-date encountered values. I suppose that all of the array content are string, so we will determine here the date format using a simple regex `^[0-9]{8}$`

```
var result = new Array();
var date_format = /^[0-9]{8}$/;

for (var k in big_array) {
    // if date format, add a new array
    if (date_format.test(result[k])) {
        result.push(new Array());
    }
    // finally, push the value in the last array
    result[result.length-1].push(big_array[k]);
} 
```

This is a really simple algorithm exercise, so i would recommend to practice more the code's writing and avoid asking next time, or at least show what you tried.

Best regards.

# ios - xcode tableview 弄乱文本字段数据

> ID：16018408
> 
> 赞同：0
> 
> 时间：2013-04-15T14:56:31.330
> 
> 标签：ios, objective-c, uitableview

我得到了一个带有自定义单元格的原型表，在这个单元格内有一个 textField。

我的单元格数组很大，所以当我滚动表格时，需要重新创建单元格。

测试时，当我将 1 个单元格的 txt 字段中的文本滚动到另一个单元格时，键盘类型发生了变化，一切都变得一团糟！

代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"customTableCell";

    customTableViewCell *cell = (customTableViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil)
    {
        cell = [[customTableViewCell alloc]
                initWithStyle:UITableViewCellStyleDefault
                reuseIdentifier:nil];
    }

    // Configuration
    cell.lblName.text = [self.pfFields objectAtIndex: [indexPath row]];

    cell.txtType = [self.pfTypes objectAtIndex: [indexPath row]];

    cell.mySql = [self.pfSql objectAtIndex: [indexPath row]];

    //cell.txtField.delegate = self;

    if ([[self.pfTypes objectAtIndex:[indexPath row]] isEqualToString: @"n"]) {
        [cell.txtField setKeyboardType:UIKeyboardTypeNumberPad];
    } else if ([[self.pfTypes objectAtIndex:[indexPath row]] isEqualToString: @"m"]) {
        [cell.txtField setKeyboardType:UIKeyboardTypeEmailAddress];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:45:13.723

您需要确保在 中设置单元格的所有属性`tableView:cellForRowAtIndexPath:`，因为控制器可以随时重用给定单元格。

为防止文本跳来跳去，您需要设置为从单元格的支持对象加载`cell.txtField.text`的适当内容。`NSString`同样，您应该始终设置`keyboardType`每次（我假设除了和之外还有其他情况`n`）`m`。每次设置属性可确保您获得正确的显示，无论之前如何配置重用单元格。

# xslt - 具有属性的 xsl 计数节点

> ID：16018411
> 
> 赞同：1
> 
> 时间：2013-04-15T14:56:41.927
> 
> 标签：xslt

我有以下 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<chapter num="A">
    <title>
        <content-style font-style="bold">PART 1 GENERAL PRINCIPLES</content-style>
    </title>
    <section level="sect1">
        <title>
            <content-style font-style="bold">Chapter 1: THE NEW ARBITRATION ORDINANCE</content-style>
        </title>
        <section level="sect2">
            <title>INTRODUCTION</title>
        </section>
        <section level="sect2" num="1.">
            <title>INTRODUCTION</title>
        </section>
        <section level="sect2"  num="2.">
            <title>INTRODUCTION 1</title>
        </section>
        <section level="sect2"  num="3.">
            <title>INTRODUCTION 2</title>
        </section>
    </section>
</chapter> 
```

当我使用下面的 xslt

```
<xsl:number count="section"/> 
```

数字从 2 开始，但我想从 1 开始，因为第一个 sec2 没有 num 属性，请告诉我该怎么做，我也只需要使用数字计数功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:10:22.973

在您的代码中，您要求计算所有部分节点的数量：

```
<xsl:number count="section"/> 
```

尝试更改您的`count`xpath 字符串以仅指定具有`num`属性的那些节点：

```
<xsl:number count="section[@num]"/> 
```

# weblogic - Weblogic 12c 部署 xml 错误

> ID：16018412
> 
> 赞同：0
> 
> 时间：2013-04-15T14:56:47.680
> 
> 标签：weblogic, web-deployment, weblogic12c

我是 weblogic 的新手。我尝试部署应用程序，但出现以下错误：

```
Unable to access the selected application.
Exception in AppMerge flows' progression
Exception in AppMerge flows' progression
VALIDATION PROBLEMS WERE FOUND problem: cvc-complex-type.2.4a: Expected elements         
'filter-class@http://java.sun.com/xml/ns/javaee async-supported
@http://java.sun.com/xml/ns/javaee init-param
@http://java.sun.com/xml/ns/javaee' 
instead of 'description@http://java.sun.com/xml/ns/javaee' here in element     
filter
@http://java.sun.com/xml/ns/javaee:<null> 
problem: cvc-complex-type.2.4b: Element not allowed: 
description@http://java.sun.com/xml/ns/javaee in element init-param
@http://java.sun.com/xml/ns/javaee:<null> 
problem: cvc-complex-type.2.4b: Element not allowed: description
@http://java.sun.com/xml/ns/javaee in element init-param
@http://java.sun.com/xml/ns/javaee:<null> 
problem: cvc-complex-type.2.4a: Expected elements 'servlet-class
@http://java.sun.com/xml/ns/javaee jsp-file
@http://java.sun.com/xml/ns/javaee init-param
@http://java.sun.com/xml/ns/javaee load-on-startup
@http://java.sun.com/xml/ns/javaee enabled
@http://java.sun.com/xml/ns/javaee async-supported
@http://java.sun.com/xml/ns/javaee run-as
@http://java.sun.com/xml/ns/javaee security-role-ref
@http://java.sun.com/xml/ns/javaee multipart-config
@http://java.sun.com/xml/ns/javaee' instead of 'display-name
@http://java.sun.com/xml/ns/javaee' here in element servlet
@http://java.sun.com/xml/ns/javaee:<null> 
problem: cvc-complex-type.2.4a: Expected elements 'servlet-class
@http://java.sun.com/xml/ns/javaee jsp-file
@http://java.sun.com/xml/ns/javaee init-param
@http://java.sun.com/xml/ns/javaee load-on-startup
@http://java.sun.com/xml/ns/javaee enabled
@http://java.sun.com/xml/ns/javaee async-supported
@http://java.sun.com/xml/ns/javaee run-as
@http://java.sun.com/xml/ns/javaee security-role-ref
@http://java.sun.com/xml/ns/javaee multipart-config
@http://java.sun.com/xml/ns/javaee' instead of 'display-name
@http://java.sun.com/xml/ns/javaee' here in element servlet
@http://java.sun.com/xml/ns/javaee:<null> 
problem: cvc-complex-type.2.4a: Expected elements 'servlet-class
@http://java.sun.com/xml/ns/javaee jsp-file
@http://java.sun.com/xml/ns/javaee init-param
@http://java.sun.com/xml/ns/javaee load-on-startup
@http://java.sun.com/xml/ns/javaee enabled
@http://java.sun.com/xml/ns/javaee async-supported
@http://java.sun.com/xml/ns/javaee run-as
@http://java.sun.com/xml/ns/javaee security-role-ref
@http://java.sun.com/xml/ns/javaee multipart-config
@http://java.sun.com/xml/ns/javaee' instead of 'display-name
@http://java.sun.com/xml/ns/javaee' here in element servlet
@http://java.sun.com/xml/ns/javaee:<null> 
```

我试图找到weblogic.xml 和web.xml，但只有一个war 文件。如何修改战争中的 xmls？

感谢您的任何回复。艾伦

# ruby-on-rails - AngularJS 过滤器 - Ruby on Rails 资产：预编译问题

> ID：16018413
> 
> 赞同：0
> 
> 时间：2013-04-15T14:56:47.783
> 
> 标签：ruby-on-rails, filter, angularjs

我在 Ruby on Rails 中使用了 AngularJS。我使用了带有自定义符号的货币过滤器。

```
<span>{{value|currency:'¥'}}<span> 
```

该过滤器在开发环境中工作正常。

```
¥1,000.00 
```

但是，在生产模式下运行时，货币符号会转换为特殊字符。

```
�1,000.00 
```

PS：我在所有文件中都使用了 UTF-8 编码。在production.rb中尝试了以下

```
config.assets.js_compressor = Sprockets::LazyCompressor.new { Uglifier.new(:mangle => false) } 
```

知道如何解决这个问题吗？谢谢各位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:32:20.460

在你的`production.rb`环境文件中包含这样的东西怎么样？ `config.assets.precompile += %w( angular.js )`

或者可以使用这个 gem [https://github.com/hiravgandhi/angularjs-rails](https://github.com/hiravgandhi/angularjs-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:37:04.680

我通过覆盖货币过滤器并添加来解决问题`.replace(/\uFFFD/g, currencySymbol);`

以下原始代码摘自[https://github.com/angular/angular.js/blob/1c1cd4fdf6b6d7511c7b8dc61b8042011dc54830/src/ng/filter/filters.js](https://github.com/angular/angular.js/blob/1c1cd4fdf6b6d7511c7b8dc61b8042011dc54830/src/ng/filter/filters.js)

```
currencyFilter.$inject = ['$locale'];
function currencyFilter($locale) {
  var formats = $locale.NUMBER_FORMATS;
  return function(amount, currencySymbol){
    if (isUndefined(currencySymbol)) currencySymbol = formats.CURRENCY_SYM;
    return formatNumber(amount, formats.PATTERNS[1], formats.GROUP_SEP, formats.DECIMAL_SEP, 2)
           .replace(/\u00A4/g, currencySymbol);
  };
} 
```

最终代码将如下所示

```
return formatNumber(amount,currencyFormat , ',', '.', fractionSize).
        replace(/\u00A4/g, currencySymbol).replace(/\uFFFD/g, currencySymbol); 
```

# c# - Microsoft Dynamic GP 扩展程序集

> ID：16018415
> 
> 赞同：0
> 
> 时间：2013-04-15T14:57:04.377
> 
> 标签：c#, dynamics-gp, econnect

我创建了一个动态 GP 扩展方法来规范遵循 MSDN 指南[动态 GP 扩展程序集](http://msdn.microsoft.com/en-us/library/cc508769.aspx)

这是我的自定义扩展程序集的代码：

```
namespace MyGPService
{
  public static class GPExtensions
  {
    public static void OnRecordCreated(object sender, BusinessObjectEventArgs e)
    {
      try
      {      
        Customer customer;
        Extension CustomerEmailExtension = new Extension();
        //get current cust connection
        //connection = Connection.GetInstance();
        if (e.BusinessObject.GetType() == typeof(Customer))
        {
          customer = (Customer)e.BusinessObject;
          // Look at the Extension list passed along
          foreach (Extension ext in customer.Extensions)
          {
            Logger.LogExtention(ext);
          }
        }
        else
        {
          Logger.LogExtentionType(e.GetType().ToString());
        }
      }
      catch (Exception ex)
      {
        Logger.LogException(ex.Message);
      }
    }
  }
} 
```

此代码包含一些日志记录机制，可将任何传入数据记录到本地驱动器（让我进一步了解测试期间通过的内容）。

下面是我的 BusinessObjectsFile.config 文件条目（进一步解释了[业务对象配置文件](http://msdn.microsoft.com/en-us/library/cc508789.aspx)

```
<DictionaryEntry>
 <Key xsi:type="xsd:string">Microsoft.Dynamics.GP.Customer</Key>
    <Value xsi:type="BusinessObjectConfiguration">
            <Event>
                <EventName>Created</EventName>
                <EventHandlerType>
                    <Type>Microsoft.Dynamics.Common.BusinessObjectEventHandler</Type>
                    <Assembly>Microsoft.Dynamics.Common</Assembly>
                </EventHandlerType>
                    EventHandler>
                        <SoftwareVendor>XYZ</SoftwareVendor>
                        <Type>MyGPService.GPExtentions</Type>
                        <StaticMethod>OnRecordCreated</StaticMethod>
                        <Assembly>MyGPExtensionMethods</Assembly>
                        <Execute>true</Execute>
                    </EventHandler>
            </Event>
    </Value>
</DictionaryEntry> 
```

在我配置了适当的更改后（将新的扩展程序集放在 C:\Program Files\Microsoft Dynamics\GPWebServices 中，配置了 BusinessObjectFile.config，然后重新启动[Microsoft Dynamics GP Service Host](http://msdn.microsoft.com/en-us/library/cc508780.aspx)。然后我创建了一个新客户，创建了一个 PO 和所以对于那个客户，什么都没有记录？？？

记录方法：

```
public static void LogException(string error)
{
  try
  {
    string path = Path.Combine(Utilities.SystemDirectory, "GPExtentionMethod\\Errors\\ExtErrorLog.txt");
    if(!Directory.Exists(Path.GetDirectoryName(path)))
      Directory.CreateDirectory(Path.GetDirectoryName(path));
    if (!File.Exists(path))
    {
      // Create a file to write to. 
      using (StreamWriter sw = File.CreateText(path))
      {
        sw.WriteLine("GP Extention Error Log");
        sw.WriteLine("");
      }
    }
    using (StreamWriter sw = File.AppendText(path))
    {
      sw.WriteLine(Environment.NewLine);
      sw.WriteLine("Error");
      sw.WriteLine(DateTime.Now.ToString() + ": " + error);
    }
  }
  catch { }
} 
```

我已经跟进了所有部署，但我无法弄清楚为什么这个扩展方法永远不会从 GP 调用？我错过了（或者我应该说微软）这个难题的一部分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:02:09.227

我假设这种方法会在直接通过 Dynamics GP 应用程序更改数据后触发，我错了。这种方法被击中的唯一方法是使用 GP Web 服务 SDK 中的方法，显然微软不认为 Dynamics GP 软件的后端应该有这个强大的功能......

由于这不符合我们的要求，我最终使用了与 MSMQ 一起工作的 eConnect 的传入和传出服务。我现在可以通过 eConnect 的请求者设置工具添加我需要监控的表。最后，我创建了一个小型客户端服务，用于监控我的自定义 MSMQ 路径并在发生事务时立即从 GP 获取事务。

网络上的 GP 开发仅限于没有（如果我确实发现任何由于 GP 版本不同而无关紧要的东西）......归结为大量阅读 MSDN 将这些放在一起...... GP 论坛也是对于这种特殊情况没有帮助。

# android - Android将UTC日期时间字符串格式化为本地格式会引发空错误

> ID：16018418
> 
> 赞同：0
> 
> 时间：2013-04-15T14:57:18.667
> 
> 标签：android, datetime

嗨，我有下面的方法，它采用 UTC 日期时间字符串的值，将其格式化为本地显示并返回：

```
public static String convertDateStringUTCToLocal(String sourceUtcDateTimeString)
{
    SimpleDateFormat simpleDataFormat = new SimpleDateFormat();
    simpleDataFormat.setTimeZone(getCurrentTimeZone());
    String outputUTCDateTimeString = simpleDataFormat.parse(sourceUtcDateTimeString, new ParsePosition(0)).toString();

    return outputUTCDateTimeString;
}

public static TimeZone getCurrentTimeZone()
{
    Calendar calendar = Calendar.getInstance();
    TimeZone outputTimeZone = calendar.getTimeZone();

    return outputTimeZone;
} 
```

我使用 getCurrentTimeZone() 因为用户可以随时更改他们的本地设置，我不想硬编码格式。

调试时，参数 sourceUtcDateTimeString 的值为 'Mon Apr 15 13:54:00 GMT 2013'，我发现 'simpleDataFormat.parse(sourceUtcDateTimeString, new ParsePosition(0))' 给我 'null' 和 'simpleDataFormat.parse (sourceUtcDateTimeString, new ParsePosition(0)).toString()' 抛出错误“java.lang.NullPointerException at toString()”。

看起来 ParsePosition(0) 没有任何内容，但我对 Android 开发人员真的很陌生，不知道为什么会发生这种情况以及如何解决它，有人可以帮忙解决吗？我在这个问题上停留了几个小时。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:26:22.107

看起来您尝试解析的字符串来自 a`Date`的`toString()`方法，该方法提供了格式`dow mon dd hh:mm:ss zzz yyyy`（请参阅[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#toString%28%29)）。要将其解析回 a`Date`您可以使用`Date parsed = new Date(Date.parse())`已弃用的 ，或使用`SimpleDateFormat`带有格式的 a `EEE MMM dd HH:mm:ss zzz yyyy`（请参阅[SimpleDateFormat 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)）。

例如，这段代码对我有用：

```
public static String convertDateStringUTCToLocal(String sourceUtcDateTimeString)
{
    SimpleDateFormat simpleDataFormat = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy");
    // SimpleDateFormat already uses the default time zone, no need to set it again
    String outputUTCDateTimeString = simpleDataFormat.parse(sourceUtcDateTimeString, new ParsePosition(0)).toString();

    return outputUTCDateTimeString;
} 
```

根据您应用程序的其余部分，您应该考虑将任何日期作为`Date`实例传递，而不是使用`String`. 然后，您可以在需要向用户显示日期的任何时候简单地应用正确的格式。

# centering - 如何使我的导航居中

> ID：16018425
> 
> 赞同：0
> 
> 时间：2013-04-15T14:57:31.210
> 
> 标签：centering, nav

我在导航居中时遇到问题。尝试了所有可能的方法。无法居中。想知道可能会影响什么？我只需要定位 .nav 吗？还是容器也是？[我的网站](http://smart.lt.melisa.serveriai.lt/kontaktai.html)：
HTML

```
 <div id="navcontainer">
    <a class="toggleMenu" href="#">Menu</a>
    <ul class="nav">
    <li  class="test">
    <li><a href="index.html" id="current">PRADŽIA</a></li>
    <li><a href="apie.html">APIE MUS</a></li>
    <li><a href="kainos.html">KAINOS</a></li>
    <li><a href="asmenines.html">ASMENINĖS</a>
    <ul>
    <li><a href="#">Asmeninė fotosesija</a></li>
    <li><a href="#">Poros fotosesija</a></li>
    <li><a href="#">Šeimos fotosesija</a></li>
    <li><a href="#">Nėščiosios fotosesija</a></li>
    <li><a href="#">Vaikų fotosesija</a></li>
    <li><a href="#">Draugų fotosesija</a></li>
    <li><a href="#">Erotinė fotosesija</a></li>
    <li><a href="#">Švencių fotosesija</a></li>
    <li><a href="#">Modelio testas</a></li>
    </ul>
    </li>
    <li><a href="kurybines.html">KŪRYBINĖS</a></li>
    <li><a href="atsiliepimai.html">ATSILIEPIMAI</a></li>
    <li><a href="kontaktai.html">KONTAKTAI</a></li>
    </li>   
    </ul>
    </div>
    </div><!--/navcontainer-->

    CSS
    /*---- NAVIGATION -------*/
    #navcontainer{
    float: left;
    width:100%;
    padding: 10px 0 10px 0;
    font-size:1.2em;
    background: #ccc;
    }

    .toggleMenu {
    display:  none;
    padding: 10px 15px;
    color: #fff;
    background:#383636;
    }
    .nav {
    list-style: none;
    *zoom: 1;
    background: blue;
    margin: 0 auto;
    }

    .nav:before,
    .nav:after {
    content: " "; 
    display: table; 
    }

    .nav:after {
    clear: both;
    }
    .nav ul {
    display: inline-block;
    list-style-type: none;
    width: 9em;
    }

   .nav a {
    display: inline-block;
    padding: 10px 15px;
    color:#383636;
    text-decoration:none;
    }

    .nav li {
    position: relative;
    display: inline;
    }

    .nav > li {
    float: left;
    }

    .nav > li > .parent {
    background-repeat: no-repeat;
    background-position: right;
    }

    .nav > li > a {
    display: block;
    }

    .nav li  ul {
    position: absolute;
    left: -9999px;
    }

    .nav > li.hover > ul {
    left: 0;
    }

    .nav li li.hover ul {
    left: 100%;
    top: 0;
    }

    .nav li li a {
    display: block;
    background: #efefef;
    position: relative;
    z-index:100;
    border-top: 1px solid #ccc;
    }

    #navcontainer ul li a:hover{
    color: #fff;
    background: #ccc;
    }

    #navcontainer ul li a#current{
    color: #fff;
    background: #ccc;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:02:13.500

尝试将此添加到您的 NAV-CONTAINER：`margin:0px auto;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-07T21:28:46.437

尝试这个 ：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <style>
        /*---- NAVIGATION -------*/
        #navcontainer{
        width:100%;
        padding: 10px 0 10px 0;
        font-size:1.2em;
        background: #ccc;
        margin: 0 auto;
            text-align: center;
        }

        .toggleMenu {
        display:  none;
        padding: 10px 15px;
        color: #fff;
        background:#383636;
        }
        .nav {
        display: inline-block;
        list-style: none;
        background: #AE4532;
        }

        ul {
        display: inline-block;
        list-style-type: none;
        width: auto;
        }

       .nav a {
        display: inline-block;
        padding: 10px 15px;
        color:#3EBD36;
        text-decoration:none;
        margin: 10px
        }

        li {
            position: relative;
/*            display: inline;*/
            float: left;
        }

        .nav li  ul {
        position: absolute;
        width: 100%;
        left: -9999px;
        }

        </style>
    </head>
    <body>
        <div id="navcontainer">
            <a class="toggleMenu" href="#">Menu</a>
            <ul class="nav">
                <li><a href="index.html" id="current">PRADŽIA</a></li>
                <li><a href="apie.html">APIE MUS</a></li>
                <li><a href="kainos.html">KAINOS</a></li>
                <li><a href="asmenines.html">ASMENINĖS</a>
                <ul>
                    <li><a href="#">Asmeninė fotosesija</a></li>
                    <li><a href="#">Poros fotosesija</a></li>
                    <li><a href="#">Šeimos fotosesija</a></li>
                    <li><a href="#">Nėščiosios fotosesija</a></li>
                    <li><a href="#">Vaikų fotosesija</a></li>
                    <li><a href="#">Draugų fotosesija</a></li>
                    <li><a href="#">Erotinė fotosesija</a></li>
                    <li><a href="#">Švencių fotosesija</a></li>
                    <li><a href="#">Modelio testas</a></li>
                </ul>
                </li>
                <li><a href="kurybines.html">KŪRYBINĖS</a></li>
                <li><a href="atsiliepimai.html">ATSILIEPIMAI</a></li>
                <li><a href="kontaktai.html">KONTAKTAI</a></li>
            </ul>
        </div>
    </body>
</html> 
```

# winapi - WM_PAINT 经过一些重绘后它吓坏了

> ID：16018426
> 
> 赞同：0
> 
> 时间：2013-04-15T14:57:31.793
> 
> 标签：winapi, visual-c++

我正在尝试win32 api所以我决定尝试在windows上画一个棋盘，只是为了测试

碰巧我可以绘制棋盘，并尝试在其上实现一些交互性。为此，我将鼠标点击存储在一个静态对象上，并在 WM_PAINT 上使用它在点击的房子周围绘制一个红色边框。

问题是，点击几下窗口后，屏幕变白了，没有刷子填充，我可以找到窗口标题，一团糟。

这是我的代码

```
#include <windows.h>
#include "WindowsX.h"
#include "stdafx.h"
#include <vector>
#include <stdlib.h>

//const char g_szClassName[] = "myWindowClass";
POINT p;
void TabuleiroCasas(std::vector<RECT>* rc, RECT rcClient)
{
        for(int i = 0; i < 8; i++)
        {
                for(int j = 0; j < 8; j++)
                {
                        int width = (rcClient.right-200 - rcClient.left) / 8;
                        int height = (rcClient.bottom - rcClient.top) / 8;

                        RECT r;
                        r.left = width*j;
                        r.top = rcClient.bottom - (height * i);
                        r.right = width*(j+1);
                        r.bottom = rcClient.bottom - height * (i+1);

                        rc->push_back(r);
                }
        }
}

// Step 4: the Window Procedure
LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
        HPEN hPen = CreatePen(PS_SOLID, 1, RGB(255,255,255));
        HPEN hPenSel = CreatePen(PS_SOLID, 3, RGB(255,0,0));
        HBRUSH hBrushgrey =CreateSolidBrush(RGB(200,200,200));
        HBRUSH hBrushblack =CreateSolidBrush(RGB(255,255,255));
        HBRUSH hBrushwhite = CreateSolidBrush(RGB(0,0,0));
        PAINTSTRUCT Ps;
        std::vector<RECT> casas;
        int xPos;
        int yPos;
    switch(msg)
    {
                case WM_LBUTTONDOWN:
                GetCursorPos(&p);
                InvalidateRect(hwnd, NULL, true);

                break;
                case WM_PAINT:
                        try
                        {
                        RECT rcClient;
                        GetClientRect(hwnd, &rcClient);
                        HDC hdc;

                        //DESENHA TABULEIRO
                        hdc = BeginPaint(hwnd, &Ps);
                        SelectObject(hdc, hBrushgrey);
                        Rectangle(hdc, rcClient.left, rcClient.top, rcClient.right, rcClient.bottom);
                        Rectangle(hdc, rcClient.left, rcClient.top, rcClient.right-200, rcClient.bottom);
                        TabuleiroCasas(&casas, rcClient);

                        for(int i = 0; i < casas.size(); i++)
                        {
                                if ( ((i + (i / 8)) % 2) == 1)
                                {

                                                SelectObject(hdc, hBrushwhite);
                                                Rectangle(hdc, casas[i].left ,casas[i].bottom, casas[i].right, casas[i].top);
                                }
                                else
                                {
                                                SelectObject(hdc, hBrushblack);
                                                Rectangle(hdc, casas[i].left ,casas[i].bottom, casas[i].right, casas[i].top);
                                }

                        }
                        for(int i = 0; i < casas.size(); i++)
                        {
                                if((p.x > casas[i].left) && (p.x < casas[i].right) && (p.y < casas[i].top) && (p.y > casas[i].bottom))
                                {

                                        SelectObject(hdc, hPenSel);
                                        Rectangle(hdc, casas[i].left ,casas[i].bottom, casas[i].right, casas[i].top);
                                }
                        }
                        EndPaint(hwnd, &Ps);
                        }
                        catch(int e)
                        {
                        }
                break;
                case WM_SIZE:
                        //InvalidateRect(hwnd, NULL, false);
                        break;
        case WM_CLOSE:
            DestroyWindow(hwnd);
        break;
        case WM_DESTROY:
            PostQuitMessage(0);
        break;
        default:
            return DefWindowProc(hwnd, msg, wParam, lParam);
    }
    return 0;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
    LPSTR lpCmdLine, int nCmdShow)
{
    WNDCLASSEX wc;
    HWND hwnd;
    MSG Msg;

    //Step 1: Registering the Window Class
    wc.cbSize        = sizeof(WNDCLASSEX);
    wc.style         = 0;
    wc.lpfnWndProc   = WndProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = hInstance;
    wc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
    wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wc.lpszMenuName  = NULL;
    wc.lpszClassName = L"Damas";
    wc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);

    if(!RegisterClassEx(&wc))
    {
        MessageBox(NULL, L"Window Registration Failed!", L"Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    // Step 2: Creating the Window
    hwnd = CreateWindowEx(
        3,
        L"Damas",
        L"The title of my window",
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT, CW_USEDEFAULT, 800, 600,
        NULL, NULL, hInstance, NULL);

    if(hwnd == NULL)
    {
        MessageBox(NULL, L"Window Creation Failed!", L"Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    ShowWindow(hwnd, nCmdShow);
    UpdateWindow(hwnd);

    // Step 3: The Message Loop
    while(GetMessage(&Msg, NULL, 0, 0) > 0)
    {
        TranslateMessage(&Msg);
        DispatchMessage(&Msg);
    }
    return Msg.wParam;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T15:04:17.710

问题可以在窗口过程的顶部找到。每次调用您时，您都在创建一堆 GDI 对象`WndProc`：

```
LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    HPEN hPen = CreatePen(PS_SOLID, 1, RGB(255,255,255));
    HPEN hPenSel = CreatePen(PS_SOLID, 3, RGB(255,0,0));
    HBRUSH hBrushgrey =CreateSolidBrush(RGB(200,200,200));
    HBRUSH hBrushblack =CreateSolidBrush(RGB(255,255,255));
    HBRUSH hBrushwhite = CreateSolidBrush(RGB(0,0,0));
    .....
} 
```

您永远不会将这些返回给系统，因此最终您会耗尽可用的 GDI 资源。仅在应用程序初始化时创建一次这些对象。

对我来说，这个电话`DeleteDC`看起来很可疑。你当然不需要它。去掉它。

您遇到的另一个问题是检索鼠标位置的代码。您永远不会使用`GetCursorPos`它，因为自从发布消息以来鼠标可能已经移动。你可以从`lParam`. 像这样：

```
p.x = GET_X_LPARAM(lParam);
p.y = GET_Y_LPARAM(lParam); 
```

您需要正确包含 Windowsx 标头。它是这样完成的：

```
#include <WindowsX.h> 
```

请注意问题中与您的代码的区别。

# apache-flex - 自定义 Adob e 文件

> ID：16018427
> 
> 赞同：0
> 
> 时间：2013-04-15T14:57:36.197
> 
> 标签：apache-flex, flexbuilder

我的 Flex Builder 插件有问题。

我在我的 Flex 应用程序（在 Eclipse 中）中使用了 Flex Builder 3 插件。

现在我想自定义插件中的 MessageResponder.as 文件。我发现 ActionScript 文件没有任何问题，但关键是，我的更改不会导致任何问题，因为该文件已经编译。（这是我的猜测）

现在我的问题：

编辑后如何编译文件？有没有可能？

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:54:47.300

您要做的就是所谓的“[猴子补丁](http://www.youtube.com/watch?v=ryAhC1vw8Os)”。您需要做的是在相同的包位置创建您自己的文件版本，您的版本将优先于 swc 中的版本使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:20:57.387

MessageResponder.as 类是 Flex 框架中的一个文件。如果需要，您可以对其进行修改，并且本质上是创建您自己的 Flex SDK 版本。但是，您很可能必须重新构建整个框架才能使其正常工作。最好的办法是获取最新的[Apache Flex SDK](http://flex.apache.org/dev-sourcecode.html)的源代码；修改你的类，然后从头开始构建框架。之后，您可以使用 Flash Builder 的“多 SDK 功能”在 Flex 项目中使用修改后的 SDK。

我不确定 Flex Builder 3.x 是否支持多个 SDK。

这可能是一个耗时的过程。另一种方法是扩展 MessageResponder 并添加您的更改。然后，您必须确保使用新的 MessageResponder 类而不是旧的 MessageResponder 类。由于 Flex 框架中使用了许多私有方法，这可能很困难。

# java - 如何从用逗号分隔的String中获取元素Java

> ID：16018433
> 
> 赞同：1
> 
> 时间：2013-04-15T14:57:49.073
> 
> 标签：java, string, parsing

我正在尝试获取以逗号分隔的字符串的值。

像这样：`String str = "item1, item2,0 item3, item4, 0 item5 ...."` 这个奇怪的字符串是因为我有一个 KML，我用一个多边形的坐标来解析 kml。例子： `<coordinates> 2.18954459419779,41.40492402705473,0 2.189651379989959,41.40491712193686,0 2.189993453581252,41.40464878075789, ....`

我做了什么来分开它，是：

```
 List<String> items = Arrays.asList(str.split("\\s*,\\s*")); 
```

但我不知道如何使这个 0 消失或在 0 和下一个数字之间加一个逗号。

我该怎么做？

* * *

**编辑：解决方案**

测试答案，它对我的​​问题完美的是这个解决方案：

```
String[] str_solution = str.split("\\s*,0?\\s*"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T15:00:37.677

只需将可选零添加到拆分模式

```
"\\s*,0?\\s*" 
```

如果它在那里，它将与其余部分分开，否则将被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:24:30.133

```
public class Test {
    public static void main(String[] args) {
        String data= "2.18954459419779,41.40492402705473,0 2.189651379989959,41.40491712193686,0 2.189993453581252,41.40464878075789,43.9919";
        String[] dtx = data.split(",");
        for (int j = 0; j < dtx.length; j++) {
            if(dtx[j].indexOf(' ')>=0) dtx[j] = dtx[j].split(" ")[1];   
            System.out.println("data["+j+"]="+dtx[j]);
        }
    }

} 
```

结果

```
data[0]=2.18954459419779
data[1]=41.40492402705473
data[2]=2.189651379989959
data[3]=41.40491712193686
data[4]=2.189993453581252
data[5]=41.40464878075789
data[6]=43.9919 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T15:08:29.053

请使用以下代码

```
String a = "item1, item2,0 item3, item4, 0 item5";
String[] arr = a.split(",|,0|, 0|, 0 |") 
```

这将匹配 ',0' ', 0' 和 ' , 0 ' 并将相应地拆分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T15:10:07.880

使用从字符串中拆分出来的方法

我测试过的一个例子：

```
 String contenido = "item1,item2,item3";
    String[] palabras;

    palabras = contenido.split(",");

    for(int i = 0; i < palabras.length; i++){
        System.out.println(palabras[i]+ " ");
    } 
```

# c# - 使用 xmlns 属性（命名空间）查询 XDocument

> ID：16018434
> 
> 赞同：18
> 
> 时间：2013-04-15T14:57:50.060
> 
> 标签：c#, xml, linq-to-xml

我尝试从 Visual Studio *.csproj 文件中查询元素。我创建了一个简短的示例来说明问题：

```
 // Working
    string xml1 = @"<Project ToolsVersion='4.0'>
                      <ItemGroup Label='Usings'>
                        <Reference Include='System' />
                        <Reference Include='System.Xml' />
                      </ItemGroup>
                    </Project>"; 
    // Not working
    string xml2 = @"<Project ToolsVersion='4.0' xmlns='http://schemas.microsoft.com/developer/msbuild/2003'>
                      <ItemGroup Label='Usings'>
                        <Reference Include='System' />
                        <Reference Include='System.Xml' />
                      </ItemGroup>
                    </Project>";

    XDocument doc = XDocument.Parse(xml2);

    foreach (XElement element in doc.Descendants("ItemGroup"))
    {
        Console.WriteLine(element);
    } 
```

字符串 xml1 工作正常， xml2 不返回任何内容。这些字符串之间的唯一区别是文档根目录中的 xmlns 属性。

如何查询包含 xmlns 属性的文档？为什么当 xml 文档包含 xmlns 属性时会出现问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-15T14:59:15.153

> 为什么当 xml 文档包含 xmlns 属性时会出现问题？

不是，如果您理解它的含义 :) 基本上，您已将“ [http://schemas.microsoft.com/developer/msbuild/2003 ”的](http://schemas.microsoft.com/developer/msbuild/2003)*默认*命名空间 URI应用于所有元素。因此，在查询时，您也需要指定该命名空间。幸运的是，LINQ to XML 让这变得非常简单：

```
XNamespace ns = "http://schemas.microsoft.com/developer/msbuild/2003";
XDocument doc = XDocument.Parse(xml2);
foreach (XElement element in doc.Descendants(ns + "ItemGroup"))
{
    Console.WriteLine(element);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-09-14T21:52:42.520

不必事先知道命名空间。您可以编写适用于这两种 Xml 的代码，因为您可以从 XElement 获取默认命名空间。

```
XDocument doc = XDocument.Parse(xml2);
XNamespace ns = doc.Root.GetDefaultNamespace();
foreach (XElement element in doc.Descendants(ns + "ItemGroup"))
{
    Console.WriteLine(element);
} 
```

我还编写了一个扩展方法来从任何 XObject（XElement、XDocument 等）解析 XName。

使用扩展方法而不是 GetDefaultNamespace 的好处是您不必检查是否已经提供了另一个命名空间。

```
public static XName ResolveName(this XObject xObj, XName name)
{
    //If no namespace has been added, use default namespace anyway
    if (string.IsNullOrEmpty(name.NamespaceName))
    {
        name = xObj.Document.Root.GetDefaultNamespace() + name.LocalName;
    }
    return name;
} 
```

你可以像这样使用它

```
XDocument doc = XDocument.Parse(xml2);
foreach (XElement element in doc.Descendants(doc.ResolveName("ItemGroup")))
{
    Console.WriteLine(element);
} 
```

我认为 LINQ to XML 是一个很棒的 AP​​I。但我认为很清楚，如果我不提供命名空间，我总是指默认命名空间。我看不出 LINQ to XML 不这样做的任何原因。这是一个让我非常恼火的小缺点。第一次作为 LINQ to XML 的初学者，当我忘记提供默认命名空间时，我好几个小时都不知道自己做错了什么。

# performance - OO 适合这个吗？

> ID：16018435
> 
> 赞同：2
> 
> 时间：2013-04-15T14:57:50.590
> 
> 标签：performance, oracle, hibernate, jpa, plsql

我有这个过程，在一个表中，我们有一系列项目移动，这些移动将应用于包含项目和库存的另一个表。基本上，项目移动表由以下实体映射：

```
public class ItemMovement {
    enum ItemMovementStatus { NEW, APPLIED }
    private Long movementId;
    private String itemName;
    private String itemCategory;
    private String arbitraryQualifier;
    private Date movementDate;
    private ItemMovementStatus status;  
    // getters & setters
} 
```

库存项目实体是这样的：

```
public class InventoryItem {
    private String itemName;
    private Double itemStock;
    private String arbitraryQualifier;
    // getters & setters
} 
```

在一个月的过程中会产生变动，在月末所有变动都必须“应用”到库存表中。“应用”移动基本上意味着从存在完全匹配的库存表的 STOCK 值中减去每个给定移动的 ITEM_MOVEMENT_QTY。如果存在至少与所需移动数量完全匹配的情况，则工作完成。如果没有，我们只取我们能取的，然后继续从另一个属于同一 ITEM_CATEGORY 的项目中取。如果最后一个库存项目没有足够的数量来完成请求的移动数量，我们必须从与移动项目共享相同 ARBITRARY_QUALIFIER 的库存项目中获取。最后一个问题是，这个 ARBITRARY_QUALIFIER 的匹配可以来自数百甚至数千个“匹配” 每个运动项目，因为，顾名思义，这个限定词可以关联两个“完全”不相关的项目。在最坏的情况下（非常糟糕），尽管距离很远，但所有库存物品都应该与给定的物品移动相匹配。

最初我想检索所有匹配项（以块的形式，即查询是“分页的”），如下所示：

```
select m,i from ItemMovement m, InventoryItem i where 
    m.itemname=i.itemname 
    or m.itemCategory=i.itemCategory 
    or m.arbitraryQualifier=i.arbitraryQualifier 
```

然后以非常面向 OO 的方法处理每个动作及其所有匹配项，但是当有超过 20K 的动作和 20K 库存物品时，这会花费太多时间。我实际上可以看到检索数据的查询（即使分页）花费了太多时间（每页超过一分钟）。花费太多时间本身不是问题，而是禁止我持有交易超过 10 分钟的约束。我知道我可以增加这个值，但我想知道我采用的方法是否正确。我当然希望保持一个非常OO的方法，以便完全控制项目移动的过渡并保持算法非常清晰。我相信这里的“真正”问题是：

¿ OO 是执行这种“类型”过程的正确“方法”吗？如果是这样，是否有一种设计模式可以更好地解决我在性能、代码可维护性方面的问题？¿ 这是一个我应该寻找的过程，例如，PL/SQL 存储过程吗？

我正在使用 EJB、JPA（休眠）。数据库是甲骨文。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:20:42.687

hibernate 不是为批处理操作而设计的。与使用 hibernate 相比，使用 PL/SQL 过程可以获得更好的性能。

在决定是使用 java 还是使用 PL/SQL 时，您必须考虑整个系统架构。在大多数情况下，使用休眠可以为批处理作业获得足够的性能。

无论您选择什么，通常都有一些方法可以提高给定架构内的性能。

使用 hibernate 需要考虑的一件非常重要的事情是您如何访问您的对象。您希望使用少量`SELECT`操作从数据库加载对象。`SELECT`如果您使用 2 （每个对象类型一个）加载所有对象，您的工作很可能会比使用 20000（每个移动一个）更快。

# python - 如何显示许多错误django

> ID：16018439
> 
> 赞同：0
> 
> 时间：2013-04-15T14:58:07.237
> 
> 标签：python, django

我有以下型号

```
class tags(models.Model):
    tag = models.CharField(max_length=15) # Tag name
    tagDescription = models.TextField()   # Tag Description
    tagSlug = models.TextField()          # Extra info can be added to the existing tag using this field

class stores(models.Model):
    storeName = models.CharField(max_length=15)                                          # Store Name
    storeDescription = models.TextField()                                                # Store Description
    storeURL = models.URLField()                                                         # Store URL
    storePopularityNumber = models.IntegerField(max_length=1)                            # Store Popularity Number
    storeImage = models.ImageField(upload_to=storeImageDir)                              # Store Image 
    storeSlug = models.TextField()                                                       # This is the text you see in the URL
    createdAt = models.DateTimeField()                                                   # Time at which store is created
    updatedAt = models.DateTimeField()                                                   # Time at which store is updated
    storeTags = models.ManyToManyField(tags)

class tagsAdmin(admin.ModelAdmin):
    list_display = ('tag', 'tagDescription', 'tagSlug')

class storesAdmin(admin.ModelAdmin):
    list_display = ('storeName','storeDescription','storeURL',
                    'storePopularityNumber','storeImage',
                    'storeSlug','createdAt','createdAt','storeTags'
                    )

admin.site.register(tags,tagsAdmin)
admin.site.register(stores,storesAdmin) 
```

每当我尝试运行命令时：`python manage.py syncdb` 我收到错误：`django.core.exceptions.ImproperlyConfigured: 'storesAdmin.list_display[8]', 'storeTags' is a ManyToManyField which is not supported.`

我不明白我在这里做错了什么。我想简单地显示 django 管理站点中的所有模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:04:19.223

你不能像那样引用 Many2ManyField，你必须在类中使用一个方法`stores`，看起来像这样

```
def get_tags(): 
    return self.storeTags.all() 
```

并在你的`list_display(...'get_tags')`

这样做是因为 M2M 字段会导致大量 SQL 查询，这会使整个事情变慢，因此选择必须来自开发人员而不是框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:39:51.117

请检查：

[ModelAdmin.list_display](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)

“不支持 ManyToManyField 字段，因为这需要为表中的每一行执行单独的 SQL 语句。如果您仍然想这样做，请为您的模型提供自定义方法，并将该方法的名称添加到 list_display。（见下文有关 list_display 中自定义方法的更多信息。）”

您可以使用自定义方法来显示 ManyToManyField 的值或简单地`storeTags`从`list_display`

# wordpress - “保存媒体附件时出错。” 在媒体库中

> ID：16018445
> 
> 赞同：1
> 
> 时间：2013-04-15T14:58:12.447
> 
> 标签：wordpress, apache

将普通的 jpg 或 png（任何东西）上传到媒体库后，我们会收到上述错误。

我已经看过很多关于这个主题的帖子并尝试了一切但仍然卡住了。

我不是普通用户，但是我看到已经上传了几十张其他图片，突然我们收到了这个错误。

我检查了服务器，有磁盘空间，上传和图像文件夹的权限是可写的（777），我已经确认我可以通过 Plex 控制面板上传。我还尝试停用所有插件。

有几件事我也很好奇，但我不确定它们是否相关：

1）有人说要确保选中“始终使用 HTTPS”，但我没有这里讨论的选项：http: [//en.support.wordpress.com/https/](http://en.support.wordpress.com/https/)

2) 如果我转到 wp-admin/network/settings.php，我会收到 WordPress 消息“您没有足够的权限访问此页面”，即使我有一个具有管理员角色的用户。

是否有另一个具有更大权限的隐藏用户？仍然不确定这是否会有所帮助，因为直到最近一切都很好。

**编辑：**

我找到了原因，但我不知道它为什么会发生或如何防止它在未来发生。2013 文件夹的用户和仅本月的子目录设置为 Apache，而不是像所有其他文件夹一样设置为我们的用户名。我不知道为什么会发生这种情况或如何防止它发生。我复制了文件夹，默认情况下用户设置为我们的用户名，这暂时阻止了这个问题，但仍然想知道如何避免再次出现这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T13:14:53.510

要克服此上传图像错误，您必须确保正确设置此文件夹 wp-content 的权限。

回答：IUSR 帐户应该具有读写权限。（适用于 Plesk IIS 和其他）不要在 WordPress 区域中自己创建文件夹！

# sharepoint-2010 - SPWebConfigModification - 覆盖彼此修改的功能

> ID：16018447
> 
> 赞同：1
> 
> 时间：2013-04-15T14:58:16.933
> 
> 标签：sharepoint-2010

我正在使用带有共享点 2010 的 log4Net。我有一个功能，当我的灵魂使用以下代码以错误模式部署时，它会自动添加 log4net 配置

```
SPWebService service = SPWebService.ContentService;

            service.WebConfigModifications.Clear();
  //ADD log4Net config section
            service.WebConfigModifications.Add(new SPWebConfigModification()
            {
                Path = "configuration/configSections",
                Name = "section[@name='log4net']",
                Sequence = 0,
                Owner = CREATE_NAME,
                Type = SPWebConfigModification.SPWebConfigModificationType.EnsureChildNode,
                Value = string.Format(@"<section name='log4net' type='log4net.Config.Log4NetConfigurationSectionHandler, log4net, Version={0}, Culture=neutral, PublicKeyToken={1}' />", LOG4NET_VERSION, LOG4NET_PUBLIC_KEY_TOKEN)
            });

            string log4netConfig = @"<log4net>
                                        <appender name='RollingFileAppender' type='log4net.Appender.RollingFileAppender'>
                                            <file value='C:\\logs\\Logger.log' />
                                            <appendToFile value='true' />
                                            <rollingStyle value='Composite' />
                                            <datePattern value='yyyyMMdd' />
                                            <maxSizeRollBackups value='200' />
                                            <maximumFileSize value='50MB' />
                                            <layout type='log4net.Layout.PatternLayout'>
                                                <conversionPattern value='%d [%t] %-5p %c [%x] &lt;%X{auth}&gt; - %m%n' />
                                            </layout>
                                        </appender>
                                        <root>
                                          <level value='ERROR' />
                                          <appender-ref ref='RollingFileAppender' />
                                        </root>
                                    </log4net>";
            //add error default config
            service.WebConfigModifications.Add(new SPWebConfigModification()
            {
                Path = "configuration",
                Name = "log4net",
                Sequence = 0,
                Owner = CREATE_NAME,
                Type = SPWebConfigModification.SPWebConfigModificationType.EnsureChildNode,
                Value = log4netConfig
            });

service.Update();
            service.ApplyWebConfigModifications(); 
```

我想创建另一个功能来覆盖 log4net 的错误模式并将其更改为调试，以便最终用户不必手动修改 web 配置。问题是当第二个功能被激活时，它会删除第一个功能添加的所有内容。

这是标准行为吗？？任何将激活的功能都会删除其他功能的更改。

**编辑 2**

*复制步骤*

创建 2 个特征。他们都应该在 web config 中添加一些不同的条目。

1.  激活功能 1 - 功能 1 更改在 Web 配置中
2.  激活功能 2 - 功能 2 更改在 Web 配置中，但功能 1 更改已消失

停用这两个功能

1.  激活功能 2 - 功能 2 更改在 Web 配置中
2.  激活功能 1 - 功能 1 更改在 Web 配置中，但功能 2 更改消失了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:04:20.017

之所以去掉第一个web配置，是因为代码块：

```
service.WebConfigModifications.Clear(); 
```

基本上，您是说在将项目添加到功能中之前，您将清除 Web 配置中设置的所有其他配置。删除上述代码块应该可以解决您的问题。

如果您在激活或停用功能时需要做一些其他事情，请尝试使用功能接收器。可以在[此处](http://weblogs.asp.net/wesleybakker/archive/2009/01/21/web.config-modifications-with-a-sharepoint-feature.aspx)找到从 Web 配置和功能接收器开始的一个很好的示例。

[另外，为了让您对上面的代码块有更多了解，您可以在此处](http://www.tonytestasworld.com/post/2009/05/21/Be-cautious-when-using-e2809cSPWebApplicationWebConfigModificationsClear%28%29e2809d-method-because-it-can-clear-out-ALL-webconfig-modifications-not-just-your-own.aspx)查看另一个有类似问题的人的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:12:00.910

如果我理解正确的话，发生的事情是你添加了一个 webconfigmodification，这在技术上还没有“添加”，因为它还没有实现。当您创建第二个修改时，它会覆盖您创建的第一个修改，这反过来会删除所做的第一个修改，这就是应用的修改。

# database - 处理 Cassandra 写入失败的常见做法是什么？

> ID：16018448
> 
> 赞同：3
> 
> 时间：2013-04-15T14:58:21.363
> 
> 标签：database, cassandra, consistency, eventual-consistency

在文档 [1] 中，据说

```
if using a write consistency level of QUORUM with a replication factor
of 3, Cassandra will send the write to 2 replicas. If the write fails on
one of the replicas but succeeds on the other, Cassandra will report a 
write failure to the client. 
```

所以假设只有 2 个副本收到更新，写入失败。但由于最终一致性，所有节点最终都会收到更新。

那么，我应该重试吗？还是就这样吧？

有什么策略吗？

[1] [http://www.datastax.com/docs/1.0/dml/about_writes](http://www.datastax.com/docs/1.0/dml/about_writes)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T15:32:18.937

这些文档并不完全正确。无论一致性级别（CL）如何，写入都会发送到所有可用的副本。如果副本不可用，Cassandra 不会向宕机节点发送请求。如果从一开始就没有足够的可用资源来满足 CL，则会抛出 UnavailableException 并且不会尝试写入任何节点。

但是，在某些节​​点上写入仍然可以成功，并向客户端返回错误。在 [1] 的示例中，如果一个副本在尝试写入之前已关闭，则写入的内容为 true。

> 所以假设只有 2 个副本收到更新，写入失败。但由于最终一致性，所有节点最终都会收到更新。

不过要小心：失败的写入不会告诉您写入了多少个节点。它可能没有，因此写入可能最终不会传播。

> 那么，我应该重试吗？还是就这样吧？

一般来说，你应该重试，因为它可能根本没有写。只有当您从写入成功返回时，您才应该将您的写入视为已写入。

如果您使用计数器，但您应该小心重试。因为您不知道是否进行了写入，所以您可能会得到重复计数。对于计数器，您可能不想重试（因为通常至少要对一个节点进行写入，至少对于更高的一致性级别而言）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:32:36.450

重试不会有太大变化。问题是您实际上根本不知道数据是否被持久化，因为 Cassandra 总是抛出相同的异常。

你有几个选择：

*   启用提示并使用 cl=any 重试请求 - 成功响应意味着至少创建了提示。所以你知道数据在那里但还不能访问。
*   禁用提示并重试一次 - 成功的响应意味着至少节点可以接收数据。如果出错执行删除。
*   使用 astyanax 和他们的重试策略
*   更新到 Cassandra 1.2 并使用预写日志

# visual-c++ - 奇怪的链接错误

> ID：16018449
> 
> 赞同：1
> 
> 时间：2013-04-15T14:58:23.140
> 
> 标签：visual-c++, linker, visual-studio-2005

当我尝试构建它时，我的应用程序给了我一个链接错误。

```
Error   5   error LNK2001: unresolved external symbol "int __cdecl _AfxInitManaged(void)" (?_AfxInitManaged@@YAHXZ) mfcs80ud.lib 
```

我正在使用 Visual Studio 2005 构建应用程序。如果有帮助，我还将链接 WINDDK for Server 2003 和 Windows 6.1 SDK。

我搜索了一下，发现有人说这是一个预编译头问题，应该通过在Create/Use Precompiled 头属性中设置`/Yc`开关来修复它。`stdafx.cpp`但这并没有为我解决这个问题，我不知道如何解决这个问题。

有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-03T13:41:16.187

我在使用 Visual Studio 2010 时遇到了同样的问题。
`error LNK2001: unresolved external symbol "int __cdecl _AfxInitManaged`
事实证明，这是我在其他项目中包含另一个 stdafx.cpp 的错误。
包含多个 stdafx.cpp 将产生此症状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:59:39.567

似乎它在我重新启动机器后自行解决了..首先不确定是什么原因造成的，即使重新启动 VS 并清理解决方案无数次也没有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-15T18:48:52.353

使用 Visual Studio 2005 构建 .NET 2003 解决方案，我遇到了描述的 LNK2001 错误。该项目没有 stdafx.cpp 文件。我将 stdafx.cpp 的副本添加到项目中并成功构建。

# c# - 编辑后获取gridview列标题

> ID：16018451
> 
> 赞同：1
> 
> 时间：2013-04-15T14:58:29.867
> 
> 标签：c#, asp.net, sql, gridview

我正在处理一个 ASP.net 项目，并且有一个 gridview，它有一个来自 sql 数据库的数据集作为数据源。

当我更改 gridview 中的值时，我想更新数据集，以便我可以使用该数据集再次更新数据库。

我到目前为止的声明。

这是我遇到麻烦的部分。我可以获取选定的行，但不能获取用于更新数据集的选定列名。

```
 myDataSet.Tables[0].Rows[e.RowIndex][?] = ""; 
```

RowUpdating 事件的完整代码。

```
protected void grdViewDetails_RowUpdating(object sender, GridViewUpdateEventArgs e)
        {
               //Just get the dataset populated from my database (sql)
                DataSet dsOriginal = dbConn.returnSqlDataset(query);

                //update the dataset here so that you can update the database again.
                foreach (TableCell cell in grdViewDetails.Rows[e.RowIndex].Cells)
                {
                    //set the employeeid so you can update the dataset
                    if (cell.Controls[0] is TextBox)
                    {
                        TextBox textbox = (TextBox)cell.Controls[0];
                        string value = textbox.Text; //This is just a tester to see if the value is correct
                     //   dsOriginal.Tables[0].Rows[e.RowIndex][?] = value; //Here is the problem, how to get the selected column name

                    }
                    else
                    {
                        if (cell.Controls[0] is CheckBox)
                        {
                            CheckBox chkBoxWeek = (CheckBox)cell.Controls[0];
                            Boolean checkStatus = chkBoxWeek.Checked;  //This is just a tester to see if the value is correct
                          //dsOriginal.Tables[0].Rows[e.RowIndex][?] = checkStatus; //Here is the problem, how to get the selected column name
                        }
                    }
                }

                //Use the updated dataset to update the database with.
                dbConn.udpatCourse(dsOriginal );

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:44:16.973

您可以遍历[`GridViewUpdateEventArgs.NewValues`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewupdateeventargs.aspx)集合以找出已更新的内容。

这略微改编自链接的 MSDN 文档：

```
foreach (DictionaryEntry entry in e.NewValues)
{
    string columName = entry.Key;
    string userInput = e.NewValues[entry.Key];
    // Now you can do stuff with this info that meets your logic needs
} 
```

如果我正确阅读了您的问题，您应该能够从这里获得所需的内容。

# jquery - 两次单击以获取 jQuery 中 LI 项的值 - 应为 1

> ID：16018453
> 
> 赞同：1
> 
> 时间：2013-04-15T14:58:39.683
> 
> 标签：jquery

我有一个 jQuery 问题。

我有一个 HTML 列表设置如下：

```
<ul class="areas">
 <li title="Volunteering">Volunteering</li>
 <li title="Partnership &amp; Support">Partnership &amp; Support</li>
 <li title="Business Services">Business Services</li>
</ul> 
```

当用户单击外部 div 样式的选择时，我会过滤这些项目并将标题添加到跨度。

我遇到的问题是，“志愿服务”需要单击两次才能出现在跨度中。

我已经模拟了一个[jsFiddle](http://jsfiddle.net/355Qk/)

我的 jQuery 看起来像这样：

```
$('ul.areas').css('display', 'none');

$('.styled-select').click(function()
{
    var cur = $('.areas li.current');
    next = cur.next('li');

    var value = cur.attr('title');

    if (next.length === 0) {  // wrap if necessary
        next = $('.areas li:first');
    }

    cur.removeClass('current');  // move the current class
    next.addClass('current');

    $('.service-area').html(value);
}) 
```

我怎样才能让它一键工作而不是两次？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T15:03:23.580

我更改了您的标记，以便该类中有一个`li`元素，`current`并且它似乎工作正常：

[http://jsfiddle.net/355Qk/1/](http://jsfiddle.net/355Qk/1/)

```
<ul class="areas">
    <li class="current" title="Volunteering">Volunteering</li>
    <li title="Partnership &amp; Support">Partnership &amp; Support</li>
    <li title="Business Services">Business Services</li>
</ul> 
```

如果这不是您想要做的，那么您可以动态地将`current`类添加到第一个类（`li`如果它尚不存在）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T15:06:53.570

您可以从 Next Element 获得标题，当您第一次单击时，curr 什么都不是。

这是小提琴

[http://jsfiddle.net/355Qk/3/](http://jsfiddle.net/355Qk/3/)

```
if (next.length === 0) {  // wrap if necessary
                next = $('.areas li:first');

            }

            var value = next.attr('title'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T15:19:52.627

你也可以试试这个：

```
var li = $('.areas li.current');
var cur = li.length ? li : $('.areas li:first').addClass('current');
next = cur.next('li'); 
```

[**在这里演示**](http://jsfiddle.net/355Qk/5/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T15:20:01.690

简化一点：

```
$('.styled-select').click(function () {
    var cur = $('.areas li.current').length === 0 ? $('.areas li').eq(0) : $('.areas li.current').eq(0).removeClass('current');
    var next = cur.next('li').length ? cur.next('li').addClass('current') : cur.next('li').eq(0).addClass('current');
    var value = cur.attr('title');

    $('.service-area').html(value);
}); 
```

# java - Eclipse 中持久的 groovy 编译

> ID：16018456
> 
> 赞同：1
> 
> 时间：2013-04-15T14:58:52.377
> 
> 标签：java, eclipse, groovy, eclipse-plugin, compilation

我在 Eclipse 中编译 groovy 项目时遇到问题。大约需要15-20分钟。编译 13 个 groovy 文件。似乎有某种循环或什么。当我运行 maven build 时，我什至没有注意到 - 它花了几秒钟，但是在 eclipse 中构建工作区时它太可怕了。我正在使用 eclipse indigo（但同样的问题出现在 juno 中），groovy 编译器版本。2.6.0-01 和 groovy 版本。1.8.6。

有什么建议么？谢谢。

# python - 将字符串拆分为列表，然后将列表拆分为列表列表

> ID：16018458
> 
> 赞同：0
> 
> 时间：2013-04-15T14:58:54.157
> 
> 标签：python, list, split

我有一个字符串，它的示例如下所示：

[http://pastebin.com/2FFNa3Qx](http://pastebin.com/2FFNa3Qx)

有模式，一般在“Sequence:”之后，接下来的 22 个元素重复，这些是我要隔离的数据。

所以我在想，如果我将字符串 at 拆分`Sequence:`为一个元素列表，然后将这个生成的列表拆分为一个列表列表 via `\n`，那么每个长度为 22 个元素的列表都是我想要的数据。所以我用这段代码试过了：

```
 proc = subprocess.Popen(cmd_rancli, stdin=subprocess.PIPE, stdout=subprocess.PIPE)
    //proc_stdout is the string
    proc_stdout  = proc.communicate(ran_opt_get_access_data)[0]

    parse = proc_stdout.split('Sequence:')
    print parse
    time.sleep(5)
    parse2 = [i.split('\n')[0] for i in parse] 
    print parse2
    time.sleep(5) 
```

然而，其中的第二个并没有给我我的期望，我做错了什么？

实际输出：

```
 parse2 = ['RAN> get ap 108352 attr=4192', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' 
', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '] 
```

拆分和返回一个空间？

这是第一次解析的一些结果：http: [//i.imgur.com/zhN3i3j.png](http://i.imgur.com/zhN3i3j.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:16:31.370

使用您在 pastebin 上提供的字符串（作为变量的内容`a`）：

```
>>> result = [i.strip().split('\n') for i in a.split('Sequence')]
>>> [len(i) for i in result]
[10, 1, 3, 1, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 3, 1, 23, 23, 23] 
```

例如这里：

```
 Sequence:
     Value(int):     1
  Value(string):     2013-02-26T15:01:11Z
       Sequence: 
```

所以让我们只过滤那些有 23 个元素的元素（注意第一个元素是`:`）：

```
>>> result = [i[1:] for i in result if len(i) == 23]
>>> [len(i) for i in result]
[22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22] 
```

现在你有一个看起来像这样的数组：

```
>>> print( '\n'.join(result[0]))
     Value(int):       10564
     Value(int):       13
     Value(int):       388
     Value(int):       0
     Value(int):       -321
     Value(int):       83
  Value(string):       272
  Value(string):       05
     Value(int):       67
     Value(int):       67
     Value(int):       708
     Value(int):       896
     Value(int):       31
     Value(int):       128
     Value(int):       -12
     Value(int):       -109
     Value(int):       0
     Value(int):       -20
     Value(int):       -111
     Value(int):       -1
     Value(int):       -1
     Value(int):       0 
```

因此，您提供的数据所需的整个代码是：

```
proc_stdout = proc.communicate(ran_opt_get_access_data)[0].decode('utf-8')
result = [i.strip().split('\n') for i in proc_stdout.split('Sequence')]
result = [i[1:] for i in result if len(i) == 23]
# Or at least [i[1:] for i in result if len(i) > 1] 
```

* * *

### 编辑 - 删除值

我们将使用简单的 hack，因此总是只有一个`:`and[`string.find()`](http://docs.python.org/3.2/library/stdtypes.html#string-methods)来[`string.strip()`](http://docs.python.org/3.2/library/stdtypes.html#str.strip)删除空格：

```
def filter_value(text):
    index = text.find( ':')
    # Not found :
    if index < 0:
        return text.strip()

    return text[index+1:].strip() 
```

并通过替换这一行来实现它：

```
result = [i[1:] for i in result if len(i) == 23] 
```

有了这个单行：

```
result = [[filter_value(j) for j in i[1:]] for i in result if len(i) == 23] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:46:59.677

您没有得到预期结果的原因是每个`Sequence:`换行符和下一个换行符之间都有空格。`[i.split('\n')[0] for i in parse]`在换行符上拆分后将获得第一个项目，这将是那个空格。

我建议您不要修复这种方法，而是做一些更复杂的事情并创建一个模拟您的输出的字典：

```
def add_data(key, value, data):
    if key.startswith('Value('):
        if key.endswith('(int)'):
            value = int(value)
        data['Sequences'][-1].append(value)
    elif key == 'Sequence':
        data['Sequences'].append([])
    else:
        data[key] = value

def parse_lines(lineseq):
    data = {'Sequences':[]}
    for line in lineseq:
        try:
            key, value = [part.strip() for part in line.split(':', 1)]
        except ValueError:
            continue
        add_data(key, value, data)
    return data

lines = proc_stdout.split('\n')
data = parse_lines(lines) 
```

这会产生一个像这样的数据结构：

```
{'AttributeId': '4192',
 'AttributeList': '',
 'ClassId': '1014 (AP)',
 'InstanceId': '0',
 'MessageType': '81 (GetAttributesResponse)',
 'ObjectInstance': '',
 'Protocol': 'BSMIS Rx',
 'RDN': '',
 'TransactionId': '66',
 'Sequences': [[],
               [1,'2013-02-26T15:01:11Z'],
               [],
               [10564,13,388,0,-321,83,'272','05',67,67,708,896,31,128,-12,-109,0,-20,-111,-1,-1,0],
               [10564,13,108,0,-11,83,'272','05',67,67,708,1796,31,128,-12,-109,0,-20,-111,-1,-1,0],
               [10589,16,388,0,-15,79,'272','05',67,67,708,8680,31,125,-16,-110,0,-20,-111,-1,-1,0],
               [10589,15,108,0,-16,81,'272','05',67,67,708,8105,31,126,-14,-109,0,-20,-111,-1,-1,0],
               [10637,40,233,0,-11,89,'272','03',30052,1,5,54013,33,103,-6,-76,1,-20,-111,-1,-1,0],
               [10662,46,234,0,-15,85,'272','03',30052,1,5,54016,33,97,-10,-74,1,-20,-111,-1,-1,0],
               [10712,51,12,0,-24,91,'272','01',4013,254,200,2973,3,62,-4,-63,0,-20,-111,-1,-1,0],
               [10737,15,224,0,-16,82,'272','01',3020,21,21,40770,33,128,-13,-108,0,-20,-111,-1,-1,0],
               [10762,14,450,0,-7,78,'272','01',3020,21,21,53215,29,125,-17,-113,0,-20,-111,-1,-1,0],
               [10762,15,224,0,-7,85,'272','01',3020,21,21,50770,33,128,-10,-105,0,-20,-111,-1,-1,0],
               [10762,14,124,0,-7,78,'272','01',3020,10,10,56880,32,128,-17,-113,0,-20,-111,-1,-1,0],
               [10812,11,135,0,-14,81,'272','02',36002,1,11,43159,31,130,-14,-113,1,-20,-111,-1,-1,0],
               [10837,42,23,0,-9,89,'272','02',36002,1,11,53529,31,99,-6,-74,1,-20,-111,-1,-1,0,54],
               [13,'2013-02-26T15:02:09Z'],
               [],
               [2,12,7,0,9,70,'272','02',20003,0,0,15535,0,0,0,0,1,100,100,-1,-1,0],
               [5,15,44,0,-205,77,'272','02',20003,0,0,15632,0,0,0,0,1,100,100,-1,-1,0],
               [7,25,9,0,0,84,'272','02',20002,0,0,50883,0,0,0,0,1,100,100,-1,-1,0]]
} 
```

如果您只想要长度为 22 的序列，则很容易得到：

```
len22seqs = [s for s in data['Sequences'] if len(s)==22]
# alternatively:
len22seqs = filter(lambda s: len(s)==22, data['Sequences']) 
```

# sharepoint - 在 spgridview 中设置 boundfield 的宽度

> ID：16018459
> 
> 赞同：1
> 
> 时间：2013-04-15T14:58:56.383
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

我尝试了不同的方法来设置我的 gridview clumns 的宽度，但对我来说没有任何效果。有人可以指导我如何实现这一目标。我在下面包括我的代码...

谢谢。

```
<SharePoint:SPGridView ID="gvSearchResults" EnableViewState="true" runat="server"
                        AlternatingRowStyle-BackColor="#f4f8fd" AllowSorting="true" DataKeyNames="ID"
                        AutoGenerateColumns="false" OnSorting="gvxxxResults_Sorting" OnPageIndexChanging="gvxxxResults_PageIndexChanging">
                        <Columns>
                        <asp:HyperLinkField HeaderText="Name" DataTextField="FileLeafRef"
                                DataNavigateUrlFields="FileLeafRef" Target="_parent" DataNavigateUrlFormatString="/pp/ll/lp/llDocs/{0}"
                                ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left" HeaderStyle-Wrap="false"
                                SortExpression="Name" ItemStyle-Width="50px" />
                            <asp:BoundField DataField="Home_x0020_Number" HeaderText="Home Number" NullDisplayText=" " SortExpression="Home_x0020_Number">
                                <HeaderStyle Width="150px" Wrap="false" HorizontalAlign="Left" />
                               <ItemStyle Width="150px" Wrap="false" HorizontalAlign="Left" />
                             </asp:BoundField>
                             <asp:BoundField DataField="Phone_x0020_Number" HeaderText="Phone Number" NullDisplayText=" " SortExpression="Phone_x0020_Number">
                               <HeaderStyle Width="150px" Wrap="false" HorizontalAlign="Left" />
                               <ItemStyle Width="150px" Wrap="false" HorizontalAlign="Left" />
                             </asp:BoundField>

                        </Columns>

                    </SharePoint:SPGridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:43:39.820

您是否尝试过使用[SPBoundField](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webcontrols.spboundfield.aspx)控件？尝试设置`SPBoundField.ControlStyle.Width`属性。

# makefile - “make install”和“make altinstall”在细节上的区别

> ID：16018463
> 
> 赞同：91
> 
> 时间：2013-04-15T14:59:04.570
> 
> 标签：makefile, installation

这是我的情况：

我正在使用[Ubuntu 10.04](https://en.wikipedia.org/wiki/Ubuntu_version_history#Ubuntu_10.04_LTS_.28Lucid_Lynx.29) (Lucid Lynx)。系统默认的Python是v2.6.5，但是我需要Python v2.7。所以我从 python.org 下载了源代码并尝试安装它。

我第一次安装它时，我跑了：

```
cd Python2.7.4
./configure --prefix=/usr
make
su root
make install 
```

这会将 Python 2.7 安装到我的系统中。它将在链接中创建一个链接“python”，`/usr/bin`也`python2.7`可以在`/usr/bin`. 因此，当我键入时`>python`，系统将为我启动 Python 2.7.4，就像我键入时一样`>python2.7`。

但是当我以这种方式安装时：

```
cd Python2.7.4
./configure --prefix=/usr
make
su root
make altinstall 
```

中的“python”链接`/usr/bin`仍然存在，并且链接到`python2.6`的是默认系统版本。当然，我可以删除它并创建一个新的软链接链接到`python2.7`.

命令“make install”和“make altinstall”有什么区别，除了 中的链接`/usr/bin`？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-04-15T15:16:27.643

我们来看看生成的Makefile！

一、安装目标：

```
install:         altinstall bininstall maninstall 
```

它做所有事情`altinstall`，`bininstall`以及`maninstall`

这是`bininstall`; 它只是创建`python`和其他符号链接。

```
# Install the interpreter by creating a symlink chain:
#  $(PYTHON) -> python2 -> python$(VERSION))
# Also create equivalent chains for other installed files
bininstall:     altbininstall
        -if test -f $(DESTDIR)$(BINDIR)/$(PYTHON) -o -h $(DESTDIR)$(BINDIR)/$(PYTHON); \
        then rm -f $(DESTDIR)$(BINDIR)/$(PYTHON); \
        else true; \
        fi
        (cd $(DESTDIR)$(BINDIR); $(LN) -s python2$(EXE) $(PYTHON))
        -rm -f $(DESTDIR)$(BINDIR)/python2$(EXE)
        (cd $(DESTDIR)$(BINDIR); $(LN) -s python$(VERSION)$(EXE) python2$(EXE))
        ... (More links created) 
```

在这里`maninstall`，它只是创建了指向 Python 手册页的“未版本化”链接。

```
# Install the unversioned manual pages
maninstall:     altmaninstall
        -rm -f $(DESTDIR)$(MANDIR)/man1/python2.1
        (cd $(DESTDIR)$(MANDIR)/man1; $(LN) -s python$(VERSION).1 python2.1)
        -rm -f $(DESTDIR)$(MANDIR)/man1/python.1
        (cd $(DESTDIR)$(MANDIR)/man1; $(LN) -s python2.1 python.1) 
```

TLDR：`altinstall`跳过创建`python`链接和手册页链接，`install`将隐藏系统二进制文件和手册页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-28T23:54:18.483

Altinstall 将确保您机器上的默认 python 未被触及。

# c# - 动态创建的 Winform 组合框都选择相同的值

> ID：16018464
> 
> 赞同：2
> 
> 时间：2013-04-15T14:59:06.283
> 
> 标签：c#, combobox, dynamically-generated, bindinglist

我正在使用 C# 和 VS 2010 Ultimate 创建一个 winform 应用程序。我正在使用动态创建的组合框填充一个 flowlayoutpanel，所有数据绑定到同一个绑定列表。当我运行应用程序时，它会正确添加组合框，但是当我在一个组合框中选择一个项目时，所有其他组合框都会使用相同的选择进行更新。我究竟做错了什么？非常感谢您收到的任何帮助。J。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.IO;

namespace TestCompleteForm
{
public partial class Form1 : Form
{
    private int comboBoxIndex = 0;
    List<string> Existingfiles;
    BindingList<string> ExistingSystemsList;
    List<string> Selectedfiles;
    BindingList<string> SelectedSystemsList;
    BindingList<string> ListOfLanguages = new BindingList<string>();
    BindingList<string> ListOfSQLServers = new BindingList<string>();

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        DirectoryInfo dinfo = new DirectoryInfo(@"C:\Hosts");
        FileInfo[] Files = dinfo.GetFiles("*.txt");
        Existingfiles = new List<string>();

        foreach (FileInfo file in Files)
        {
            Existingfiles.Add(Path.GetFileNameWithoutExtension(file.Name));
        }
        ExistingSystemsList = new BindingList<string>(Existingfiles);
        lbAvailableSystems.DataSource = ExistingSystemsList;

        Selectedfiles = new List<string>();
        SelectedSystemsList = new BindingList<string>(Selectedfiles);
        lbSelectedSystems.DataSource = SelectedSystemsList;

        //Creat list of languages
        var txtLanguages = File.ReadAllLines(@"C:\Languages\Languages.txt");
        foreach (var s in txtLanguages) ListOfLanguages.Add(s);

        //Creat list of sql servers
        var txtSqlServers = File.ReadAllLines(@"C:\SQL Servers\sql-servers.txt");
        foreach (var s in txtSqlServers) ListOfSQLServers.Add(s);
    }

    private void TabControl1_Click(object sender, EventArgs e)
    {
        if (tabControl1.SelectedTab.Name.ToString() == "page2")
        {
            while (flowLayoutPanel1.Controls.Count > 0)
            {
                var ControlToRemove = flowLayoutPanel1.Controls[0];
                flowLayoutPanel1.Controls.Remove(ControlToRemove);
                ControlToRemove.Dispose();
            }
            //flowLayoutPanel1.Controls.Clear();
            foreach (string StrSystem in SelectedSystemsList)
            {
                Label lNewSystem = new Label();
                lNewSystem.Text = StrSystem;
                flowLayoutPanel1.Controls.Add(lNewSystem);
                //Add combobox for languages
                ComboBox cbLanguages = new ComboBox();
                cbLanguages.Name = "cbLanguages" + comboBoxIndex.ToString();
                cbLanguages.DataSource = ListOfLanguages;
                flowLayoutPanel1.Controls.Add(cbLanguages);
                //Add combobox for database servers
                ComboBox cbSqlServers = new ComboBox();
                cbSqlServers.Name = "cbSqlServers" + comboBoxIndex.ToString();
                cbSqlServers.DataSource = ListOfSQLServers;
                flowLayoutPanel1.Controls.Add(cbSqlServers);
                comboBoxIndex++;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T16:03:47.617

忽略绑定列表并改用 ComboBox.Items.Add() 将项目添加到控件。

# java - 想要使用 Web 服务但“无法解析为类型”

> ID：16018469
> 
> 赞同：2
> 
> 时间：2013-04-15T14:59:34.577
> 
> 标签：java, web-services, apache, http

我有以下进口

```
import java.awt.List;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.commons.httpclient.*;
import org.apache.commons.httpclient.methods.*;
import org.apache.commons.httpclient.params.HttpMethodParams;

import com.sshtools.j2ssh.net.HttpResponse; 
```

* * *

* * *

在我的主要方法中，以下代码

```
HttpClient client = new HttpClient();
HttpPost post = new HttpPost("http://vogellac2dm.appspot.com/register");
try {
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
    nameValuePairs.add(new BasicNameValuePair("registrationid", "123456789"));
    post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    HttpResponse response = client.execute(post);
    BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
    String line = "";
    while ((line = rd.readLine()) != null) {
        System.out.println(line);
    }

} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

* * *

为了让 httpclient 导入来定位包，我必须从[这里的 java2s.com 链接下载 JAR 文件](http://www.java2s.com/Code/Jar/o/Downloadorgapachecommonshttpclientjar.htm)

但我仍然有多个错误

> HttpPost 无法解析为类型
> 
> BasicNameValuePair 无法解析为类型
> 
> UrlEncodedFormEntity 无法解析为类型

* * *

* * *

它是一个 Ruby on Rails Web 服务，我需要能够：

1.  创建在 WSDL 中定义的特定类型的对象。

2.  调用服务，并将类型接收回我新定义的对象中。

不幸的是，我在 Java 开发方面不是很老练。所以请记住这一点:)

非常感谢示例和方向。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T15:08:39.953

`X cannot be resolved to a type`当您缺少 import 语句并且编译器在类路径上找不到类型时会发生错误。这意味着您的类路径中缺少许多类文件。

类`HttpPost`, `BasicNameValuePair`,`UrlEncodedFormEntity`都是[`Apache HttpComponents`](http://hc.apache.org/downloads.cgi).

下载二进制文件/源代码。在 zip 中，您会找到需要添加到类路径中的 jar。使用 Eclipse，您可以通过将 jars（作为外部 jars）添加到项目构建路径中来完成此操作。

# entity-framework - 创建特定列的实体

> ID：16018470
> 
> 赞同：0
> 
> 时间：2013-04-15T14:59:36.253
> 
> 标签：entity-framework, breeze

我正在使用 Breeze ( [http://www.breezejs.com/](http://www.breezejs.com/) ) 并使用我想要的功能，它需要映射到一个完整的实体及其所有字段。我有一个“人”实体，但它包含一个社会安全号码字段。我想将此 SSN# 字段保持私有，因此我想创建一个名为 SubSetPerson 的实体，该实体可更新、具有导航属性并且仅包含我想要的列（例如 ID、FirstName、LastName、myNavigationProperty）并且不包含 SSN# . 我首先使用数据库/模型。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:02:35.817

如果您首先使用数据库，那么您可以为该表创建一个视图，该视图只选择您想要的列。然后更新 EF 模型浏览器以包含该视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:31:39.730

尝试为您的人员使用主从类型结构。主表将包含此人的公共信息；即姓名、出生日期等... 详细信息表将仅包含更敏感的信息（SSN 等...）。然后根据您的需要，您可以加载或不加载详细信息。

# jquery - 如何获得复选框相对于其组的位置？

> ID：16018473
> 
> 赞同：0
> 
> 时间：2013-04-15T14:59:52.300
> 
> 标签：jquery

如何获得复选框相对于其组的位置？

我尝试创建 for 循环，但无法使其正常工作。经过一天的研究，我想通过添加，

```
 var indexValue = ($(this).attr('tabindex')); 
```

我可以得到复选框的位置，然后使用该值来选择正确的项目。你能告诉我我在这里做错了什么吗？

```
 <script type="text/javascript">

         var $checkboxes = $('input[type="checkbox"]');

         $(document).ready(function () {
             var nl = 4;
             var nos = $('#listTable #searchString').length;
             // alert(nos);
             $.each($checkboxes, function () {
                 if ($(this).is(':checked')) {
                     //  alert('checked');
                     var indexValue = ($(this).attr('tabindex'));

                     $('#listTable .daylists').eq(indexValue).css('border', '2px dashed blue').val($('option:first', this).val());
                     $('#listTable .teacherlists').eq(indexValue).css('border', '2px dashed blue').val($('option:first', this).val());

                 }

             });

         });

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:04:43.413

```
$.each($checkboxes, function(index, element) {
    // index is the position you are at within this loop, starts at 0
}); 
```

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:06:42.670

没有看过您的 HTML，您可能想使用[index](http://api.jquery.com/index/)：

```
var i = $checkboxes.index(); 
```

或依赖传递给的索引参数`each`：

```
$.each($checkboxes, function (i) {
     // i is your index
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:19:09.717

如果复选框都是父元素下的兄弟，您可以使用：

```
$(this).index() 
```

# sql - 在 SQL Server 上使用用户定义的表类型的操作数类型冲突

> ID：16018474
> 
> 赞同：2
> 
> 时间：2013-04-15T14:59:53.427
> 
> 标签：sql, sql-server, indexing, user-defined-functions, user-defined-types

我创建了一个用户定义的类型（使用脚本创建），如下所示：

```
CREATE TYPE [dbo].[udt_ProductID_SellingPrice] AS TABLE(
    [Product_Id] [int] NOT NULL,
    [Selling_Price] [money] NULL,
    PRIMARY KEY CLUSTERED 
(
    [Product_Id] ASC
)WITH (IGNORE_DUP_KEY = OFF)
) 
```

在同一个数据库上，我创建了一个使用这种类型的函数：

```
CREATE FUNCTION [dbo].[fn_NetGP_tbl](@InputSKUs udt_ProductID_SellingPrice READONLY, @Currency VARCHAR(3), @SiteName VARCHAR(255), @CatalogueSite VARCHAR(5), @SiteGroup VARCHAR(255))
RETURNS @Results TABLE
(
   Product_Id INT NOT NULL,
   Selling_Price MONEY NULL,
   Net_GP MONEY NULL
)
AS
BEGIN 
```

我将输入 SKU 声明为内存表，如下所示，并调用函数如下：

```
DECLARE @InputSKUs dbo.udt_ProductId_SellingPrice

INSERT INTO @InputSKUs VALUES(10352316, 500.00)

SELECT * FROM Sensu_Staging.dbo.fn_NetGP_tbl(@InputSKUs, 'GBP', 'Site_Name', 'SITE', 'Site_Group') 
```

并得到（我发现，相当混乱）错误消息：

> 操作数类型冲突：udt_ProductID_SellingPrice 与 udt_ProductID_SellingPrice 不兼容

我真的无法弄清楚我做错了什么 - 这在以前的数据库上有效，我所做的唯一更改是向 ProductID_SellingPrice 类型添加主键/聚集索引，这似乎已经把所有事情都扔掉了。

我需要更改功能吗？还是不能在内存中的自定义表类型上创建索引？我们希望通过索引该表来加快进程，但如果不可能，那么我想我们将不得不寻找其他方法。

干杯，

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:45:26.183

我之前在不同的数据库中定义了用户数据类型，并在我调用的函数中明确引用了它（本例中为 Net GP 函数）。

然后我更改了数据类型以包含一个主键（两者都具有相同的名称），但仍在我的函数主体中引用以前的数据类型，因此出现了令人困惑但完全准确的错误消息。

简而言之，确保您要么更改函数中所有点的所有引用，要么更明智地调用您的数据类型不同的东西，以便能够更好地解决这个问题！

# jquery - FadeOut/FadeOut 不起作用，但 show() 和 hide() 可以

> ID：16018476
> 
> 赞同：0
> 
> 时间：2013-04-15T15:00:00.800
> 
> 标签：jquery, tabs, fadein, fadeout

我有这个简单的代码来在两个 div 上创建选项卡，但是当单击选项卡时，元素不会淡入或淡出，但是如果我将淡入和淡出更改为显示和隐藏，它工作正常，我看不出有什么问题：

```
 $("ul.tabs li").click(function(event)
                   {
                     event.preventDefault();
                    $("ul.tabs li").removeClass("active");
                    $(this).addClass("active");
                    $(".tab_content").fadeOut();

                    var activeTab = $(this).find("a").attr("href");
                    console.log(activeTab)
                    $(activeTab).fadeIn();
        });
    <ul class="tabs">
               <li class="page_item  active">
                                        <a href="#doss" class="option-doss">Doss</a>
                                    </li>
                <li class="page_item competitors-page">
                                        <a href="#competitors" class="option-competitors">Competitors</a>
                                    </li>
</ul>
    <div id="doss" class="tab_content clearfix"> 
                        <div class="men">
                             <a href="?cat=28"></a>
                         </div>
                        <div class="women">
                            <a href="?cat=37"></a>
                        </div>
                         <div class="kids">
                            <a href="?cat=44"></a>
                         </div>
                </div>
                <div id="competitors" class="tab_content clearfix">
                    competitors
                </div> 
```

**解决**

我删除了 easing.js 文件，它似乎工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:50:50.817

你用的是哪个版本的jquery？

如果您有一个古老的 jquery 版本，您可能需要添加对 jquery easing 插件的额外引用...

看：

1.  [http://matthewlein.com/experiments/easing.html](http://matthewlein.com/experiments/easing.html)
2.  [http://archive.plugins.jquery.com/project/Easing](http://archive.plugins.jquery.com/project/Easing)
3.  [https://github.com/danro/jquery-easing](https://github.com/danro/jquery-easing)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T15:04:47.130

您的 activeTab 变量是一个 URL，它应该是对 DOM 元素的引用。

代替

```
$(activeTab).fadeIn(); //Which evaluates to $('?cat=n').fadeIn(); 
```

执行以下操作：

```
$(".tab_content").fadeIn(); 
```

# c++ - 如何访问作为指针存储在 std::vector 中的接口实现对象

> ID：16018478
> 
> 赞同：0
> 
> 时间：2013-04-15T15:00:01.677
> 
> 标签：c++, interface, iterator, stdvector

所以我有这个：

```
std::vector<EnemyInterface*> _activeEnemies; 
```

EnemyInterface 看起来像这样：

```
#include "Ogre.h"

class EnemyInterface{
public:
  virtual void update(const Ogre::Real deltaTime) = 0;
  virtual void takeDamage(const int amountOfDamage, const int typeOfDamage) = 0;
  virtual Ogre::Sphere getWorldBoundingSphere() const = 0;
  virtual ~EnemyInterface(){} 
}; 
```

我创造了一个新的敌人：

```
// Spikey implements EnemyInterface
activeEnemies.push_back( (EnemyInterface*) &Spikey(_sceneManager, Ogre::Vector3(8,0,0)) ); 
```

我想对每个敌人调用更新函数，但它崩溃了：

```
// update enemies
for (std::vector<EnemyInterface*>::iterator it=_activeEnemies.begin(); it!=_activeEnemies.end(); ++it){
        (**it).update(timeSinceLastFrame); // Option 1: access violation reading location 0xcccccccc
        (*it)->update(timeSinceLastFrame); // Option 2: access violation reading location0xcccccccc
    } 
```

我可以在屏幕上看到敌人，但我无法访问它。任何帮助，将不胜感激。

Spikey.h 看起来像这样：

```
#include "EnemyInterface.h"

class Spikey: virtual public EnemyInterface{
private:
int thisID;
static int ID;

Ogre::SceneNode* _node;
Ogre::Entity* _entity;
public:
Spikey(Ogre::SceneManager* sceneManager, const Ogre::Vector3 spawnPos);

// interface implementation
virtual void update(const Ogre::Real deltaTime);
virtual void takeDamage(const int amountOfDamage, const int typeOfDamage);
virtual Ogre::Sphere getWorldBoundingSphere() const;
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T15:02:18.780

这是因为您在调用中创建了一个*临时*对象。`push_back`一旦`push_back`函数返回，该对象就不再存在，并给您留下一个悬空指针。

您必须使用以下方法创建一个新对象`new`：

```
activeEnemies.push_back(new Spikey(_sceneManager, Ogre::Vector3(8,0,0))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T15:03:41.003

改变

```
activeEnemies.push_back( (EnemyInterface*) &Spikey(_sceneManager, Ogre::Vector3(8,0,0)) ); 
```

至

```
activeEnemies.push_back( new Spikey(_sceneManager, Ogre::Vector3(8,0,0)) ); 
```

这是正确的电话

```
(*it)->update(timeSinceLastFrame); 
```

您的`vector`包含`EnemyInterface*`.

所以`*it`给你`EnemyInterface*`- 即指向 EnemyInterface 的指针。您可以使用指向对象的指针调用方法`->`

# ios - iPhone5 中的 self.view.frame.height = 460

> ID：16018491
> 
> 赞同：0
> 
> 时间：2013-04-15T15:00:41.040
> 
> 标签：ios, view, height, frame, iphone-5

我正在为 iPhone5 的 4 英寸屏幕更新我的应用程序。

但是，我发现，只有在我的根视图（我的 rootViewController 的视图，一个导航控制器）中，self.view.frame.height 的值是 548（显示状态栏），这正是我想要的。

一旦我在导航堆栈中推送任何viewController，推送的viewController中的self.view.frame.height的值变为460，似乎viewController不知道它在iPhone5上运行。

需要明确的是，我几乎不使用 xib 文件。事实上，我刚刚创建了 void xib 文件，如下图所示。所有的按钮、表格和其他子视图都是在每个 viewController 的 viewDidLoad 方法中手动添加的。

![我的空笔尖文件](https://i.stack.imgur.com/q6BtS.jpg)

我已将 default-568h@2x.png 添加到项目中以调整 iPhone5，但我没有对我的项目或 xib 文件的设置进行任何其他更改。

self.view.frame.height 的 460 的值会错误地影响某些 subView 在 4 英寸屏幕上 viewController 的视图中的位置，但我还没有找到方法让它意识到该值实际上应该是 548。

我应该怎么做？调整 4 英寸屏幕有没有漏掉的步骤？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:09:53.767

在“Simulated Metrics”选项卡中选择下拉框“Size”。

![尺寸下拉菜单](https://i.stack.imgur.com/8EcFd.png)

然后将选择更改为“Retina 4 Full Screen”并完成。

# java - 如何禁用记录调用路径

> ID：16018496
> 
> 赞同：4
> 
> 时间：2013-04-15T15:00:58.687
> 
> 标签：java, log4j

我想禁用 log4j 记录所有被调用的类/方法路径的部分。例如...

```
Apr 15, 2013 10:50:52 AM com.production.tasks.ImportNewOrders checkForOrders
INFO: ------- Order #295510
Hibernate: select asset0_.id as id0_, asset0_.AssetID as AssetID0_, asset0_.barcode as barcode0_, asset0_.filename as filename0_, asset0_.orderID as orderID0_, asset0_.Priority as Priority0_, asset0_.qty as qty0_, asset0_.Status as Status0_, asset0_.TimeStamp_Received as TimeStamp9_0_, asset0_.type as type0_, asset0_.URL_Thumb as URL11_0_, asset0_.vendor as vendor0_ from production_queue.3D_Mgmt_v1_Assets asset0_ where asset0_.AssetID=?
Apr 15, 2013 10:51:04 AM com.production.utility.File download
INFO:     - DecoFile downloaded from https://secure-url/165054548?user[id]=xxxxx&key=xxxx to th_1107461838.png
Apr 15, 2013 10:51:17 AM com.production.utility.File download
INFO:     - DecoFile downloaded from https://secure-url/165054548?user[id]=xxxxx&key=xxxx to 1107461838.png
Hibernate: insert into production_queue.3D_Mgmt_v1_Assets (AssetID, barcode, filename, orderID, Priority, qty, Status, TimeStamp_Received, type, URL_Thumb, vendor) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Apr 15, 2013 10:51:17 AM com.production.tasks.ImportNewOrders checkForOrders 
```

我想成为...

```
INFO: ------- Order #295510
Hibernate: select asset0_.id as id0_, asset0_.AssetID as AssetID0_, asset0_.barcode as barcode0_, asset0_.filename as filename0_, asset0_.orderID as orderID0_, asset0_.Priority as Priority0_, asset0_.qty as qty0_, asset0_.Status as Status0_, asset0_.TimeStamp_Received as TimeStamp9_0_, asset0_.type as type0_, asset0_.URL_Thumb as URL11_0_, asset0_.vendor as vendor0_ from production_queue.3D_Mgmt_v1_Assets asset0_ where asset0_.AssetID=?
INFO:     - DecoFile downloaded from https://secure-url/165054548?user[id]=xxxxx&key=xxxx to th_1107461838.png
INFO:     - DecoFile downloaded from https://secure-url/165054548?user[id]=xxxxx&key=xxxx to 1107461838.png
Hibernate: insert into production_queue.3D_Mgmt_v1_Assets (AssetID, barcode, filename, orderID, Priority, qty, Status, TimeStamp_Received, type, URL_Thumb, vendor) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
```

目前我还没有配置 log4j 属性文件。我想保持`stdout`原样发送 INFO，但只是避免这些方法调用日志。

**更新**

我已经创建了一个`log4j.properties`文件，但我找不到任何设置来禁用方法调用的日志记录。

笔记; 我不是想改变日志消息的“格式”，而是完全禁用方法调用的记录。

```
log4j.rootLogger=INFO, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %t %c:%L - %m%n

#prevent "no appenders" warning despite having appenders - http://stackoverflow.com/a/15912258/197606
log4j.category.org.jboss.logging=INFO, stdout

#log4j.category.org.springframework=DEBUG,stdout
log4j.category.com.model.entity =DEBUG,stdout 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:53:08.163

这些不是 log4j 调用。您看到的是默认的 java.util.logging 模式（到 stderr）。所以你需要适当地配置 java.util.logging。请参阅[http://tutorials.jenkov.com/java-logging/configuration.html](http://tutorials.jenkov.com/java-logging/configuration.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T20:53:14.603

如果您使用[PatternLayout](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)来配置 Appender，您应该删除`%l`输出具有完全限定名称的调用方法的 。您的布局应如下所示：

```
PatternLayout layout = new PatternLayout("%-5p %m");//Level and Message 
```

但我建议使用以下内容添加某种时间戳：

`%d{dd MMM yyyy HH:mm:ss,SSS}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T09:57:32.693

如果您没有在外部设置 log4j 属性文件，那么您的应用程序中的某些组件正在以编程方式对其进行配置。在任何情况下，您都需要用您真正想要的内容覆盖您现在拥有的任何当前配置。最简单和最易于管理的方法是创建一个有效的属性文件并将其放置在您的类路径中。这样做不仅可以覆盖现有记录器的配置，还可以定义新记录器。

如果需要，您还可以通过编程方式修改 Log4J 配置。通过启动类中的静态初始化程序最容易完成。简单的例子：

```
public class LogTest {
    private static final Logger logger = Logger.getLogger(LogTest.class);
    static {
        Logger.getRootLogger().getLoggerRepository().resetConfiguration();
        ConsoleAppender console = new ConsoleAppender();
        console.setLayout(new PatternLayout("%-5p %m%n"));
        console.setThreshold(Level.TRACE);
        console.activateOptions();
        Logger.getRootLogger().addAppender(console);
    }

    @Test
    public void testLogging() throws Exception {
        logger.info("I am a simplistic info log message");
        logger.error("I am a simplistic error log message",
                new IllegalArgumentException());
    }
} 
```

# django - Django 按字典过滤模型

> ID：16018497
> 
> 赞同：14
> 
> 时间：2013-04-15T15:01:01.340
> 
> 标签：django, django-models

如何使用字典而不是方法参数对 Django 模型进行过滤？这就是我在这里所拥有的：

```
class StoreView(TemplateView):

    def get(self, request):

        # A bunch of gets
        sort = request.GET.get('sort')
        sort_price = request.GET.get('sort_price')
        sort_mfr_method = request.GET.get('mfr_method')

        # The params tpsort by
        sort_params = {}

        if sort is not None:
            sort_params['sort'] = sort

        if sort_price is not None:
            sort_params['sort_price'] = sort_price

        if sort_mfr_method is not None:
            sort_params['sort_mfr_method'] = sort_mfr_method

        # The Model Query
        design_list = models.Design.objects.filter(sort_params)

        # etc... 
```

*附带问题，有没有比我上面做的更好的方法来设置字典值？例如三元，但如果它不存在，它会使值不存在？*

```
sort_params['sort'] = sort if not None else '' 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-15T15:02:58.417

您使用字典来传递关键字参数，如下所示：

```
models.Design.objects.filter(**sort_params) 
```

没有内置方法可以有条件地设置 dict 键，但如果你经常这样做，你可以编写自己的：

```
def set_if_not_none(mapping, key, value):
    if value is not None:
        mapping[key] = value

class StoreView(TemplateView):

    def get(self, request):

        # A bunch of gets
        sort = request.GET.get('sort')
        sort_price = request.GET.get('sort_price')
        sort_mfr_method = request.GET.get('mfr_method')

        # The params tpsort by
        sort_params = {}

        set_if_not_none(sort_params, 'sort', sort)
        set_if_not_none(sort_params, 'sort_price', sort_price)
        set_if_not_none(sort_params, 'sort_mfr_method', sort_mfr_method)

        # The Model Query
        design_list = models.Design.objects.filter(**sort_params) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-16T06:14:44.263

上面的答案是正确的，我建议一些更有效的答案。

这`request.GET`是 QueryDict 只需将其转换为这样的字典

`kwargs = dict(request.GET)`

现在过滤它

`models.Design.objects.filter(**kwargs)`

# maven-3 - Archiva 搜索不显示任何内容

> ID：16018498
> 
> 赞同：2
> 
> 时间：2013-04-15T15:01:01.277
> 
> 标签：maven-3, archiva

我只是想试试 Archiva，但很快就被一些行为绊倒了。

所以，我在我的 Kubuntu 机器上下载了当前版本（1.3.6），解压它，通过 启动它`./archiva console`，将存档存储库放入`mirrors`mavens 部分`settings.xml`并进行 maven 构建。

到目前为止一切似乎都很好，我能够浏览 Archiva 存储库并看到我构建的所有工件。

但是当我在搜索框中输入任何内容时，我没有得到结果。例如，我看到带有 id 的工件`junit`，但是当我输入`junit`搜索时，它告诉我没有找到任何结果。

该文档指出文件在下载后被索引，那么我还做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:20:48.680

junit 是您构建的工件吗？它可能已经在您的存储库中，因此无需下载 tru Archiva，这就是它不在这里的原因。注意最新版本 1.4* 从中央存储库下载索引并显示搜索结果。1.4-M4（尚未发布，但我希望很快）也将下载工件以显示更多细节。

# angularjs - angular.js：如何加载远程 html 文件，并使用模型数据填充其中一个元素？

> ID：16018501
> 
> 赞同：0
> 
> 时间：2013-04-15T15:01:08.407
> 
> 标签：angularjs

我在 HTML 标记级别声明了全局 ng-app。有一个静态元素，由特定的 ng-controller 处理。现在，在页面使用流程的某个时刻，一个小部件被加载到 DOM 中。小部件位于 ng-controller 元素之外。问题：如何使用 Angular 模型中的数据填充该小部件并使其保持同步？

使用这个简单的代码不起作用：

```
<select ng-model="files" ng-options="f.name for f in files">
    <option value="">Select File</option>
</select> 
```

值得一提的是，小部件只是动态加载的大量内容（即页面）的一部分，这就是为什么我试图避免为每个“页面”声明一个控制器，因为它看起来有点矫枉过正.

# javascript - 当两条线在Highcharts中交叉时绘制垂直线

> ID：16018504
> 
> 赞同：1
> 
> 时间：2013-04-15T15:01:17.730
> 
> 标签：javascript, jquery, highcharts

我有一个温度线图，当两个温度（表面温度和露点）交叉时，我想画一条红色的垂直线。到目前为止，我所做的是在我计算它交叉的地方在我的图表顶部绘制一个垂直矩形。

它工作正常，但有一些缺点：

*   线条从图表中脱颖而出……我们可以看出我是稍后添加的，而不是在图表本身中；
*   像素是硬编码的，如果我改变图形宽度可能不好（我可能会解决这个问题，但仍然如此）
*   当我突出显示一条线时，我想要一个小工具提示，但由于它是一个简单的矩形，它就坐在那里，根本不是动态的。

将这条线更好地整合到我的图表中，我最好的选择是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:53:56.643

plotLines 是画线的最佳方式 - [http://api.highcharts.com/highcharts#xAxis.plotLines](http://api.highcharts.com/highcharts#xAxis.plotLines)

两件事情：

1）困难的部分将是计算线交叉的位置。如果它们没有在数据点交叉（很可能不会交叉），则需要进行一些猜测，因为您无法从图表中检索到值来告诉您它们交叉的轴值。

2）如果您为这两个系列使用单独的 y 轴，我假设您必须这样做，因为它们是完全不同的单位和比例，那么线条交叉的点将是完全任意且毫无意义的，因为它们交叉的位置将是严格的关于如何设置每个轴的缩放比例的问题，并且这些值彼此之间没有实际的相关性。

# c# - 如何将文本框中的文本重定向到谷歌搜索

> ID：16018507
> 
> 赞同：0
> 
> 时间：2013-04-15T15:01:34.787
> 
> 标签：c#, wpf, google-search

我正在 wpf 中创建一个 Web 浏览器应用程序。我想从 url 文本框中获取文本并使用 Web 浏览器控件执行 google 搜索。它应该与 google chrome 一样。如何实现？让我用我编写的代码更新它。

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
        string toBeSearched = textBox1.Text;
        string GS = "http://google.com/search?q=";
        if ((e.Key == Key.Enter) && (e.KeyboardDevice.Modifiers == ModifierKeys.Control))
        {
            MessageBox.Show(toBeSearched);
            string[] parts = toBeSearched.Split(' ');
            foreach (string part in parts)
            {
                GS = GS + part+"+";

            }
            GS=GS.Remove(GS.Length - 1);
            MessageBox.Show(GS);
        }
    } 
```

这里我只是创建一个查询字符串。有没有其他更简单的方法来代替创建查询字符串？

# mysql - Mysql复杂查询

> ID：16018509
> 
> 赞同：2
> 
> 时间：2013-04-15T15:01:42.527
> 
> 标签：mysql, sql

嗨，我有两张这样的桌子-

```
Event
id   title
1    'Test 1'
2    'Test 2'
3    'Test 3'

and Schedule
id  event_id   price   event_date
1      1         100    2013-04-15
2      1         150    2013-04-20
3      2         80     2013-04-18
4      3         120    2013-04-26
5      3         140    2013-04-22
6      2         100    2013-04-22 
```

我想要以下事件 - 由 event_date ASC 排序的唯一事件

```
e.id   e.title   s.price   s.event_date
1       Test 1    100       2013-04-15
2       Test 2    80        2013-04-18
3       Test 3    140       2013-04-22 
```

我试过这样查询 -

```
SELECT e.id, 
       e.title, 
       s.price, 
       Min(s.event_date) AS min_start 
FROM   events AS e 
       JOIN schedules AS s 
         ON ( e.id = s.event_id ) 
GROUP  BY s.event_id; 
```

然后通过迭代先前查询的结果集再次查询事件。但这是太多的查询。我也没有得到正确的价格。实现上述结果的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:03:40.027

可以有许多可能的解决方案来解决您的问题。我曾经这样做的一个方法是使用一个单独的子查询，它`event_date`为每个`event_ID`. 然后将结果连接回另一个表以获取其他列。

```
SELECT  a.ID, a.Title,
        b.Price, b.Event_date
FROM    `Event` a
        INNER JOIN `Schedule` b
            ON a.ID = b.event_ID
        INNER JOIN
        (
            SELECT  event_ID, MIN(event_date) min_date
            FROM    `Schedule`
            GROUP   BY event_ID
        ) c ON b.event_ID = c.event_ID AND
                b.event_date = c.min_date 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!9/148ee/3)

输出

```
╔════╦════════╦═══════╦══════════════════════════════╗
║ ID ║ TITLE  ║ PRICE ║          EVENT_DATE          ║
╠════╬════════╬═══════╬══════════════════════════════╣
║  1 ║ Test 1 ║   100 ║ April, 15 2013 00:00:00+0000 ║
║  2 ║ Test 2 ║    80 ║ April, 18 2013 00:00:00+0000 ║
║  3 ║ Test 3 ║   140 ║ April, 22 2013 00:00:00+0000 ║
╚════╩════════╩═══════╩══════════════════════════════╝ 
```

如果您只对这两列感兴趣，最简单的方法是

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T10:16:05.070

```
SELECT   s.title, a.event_id, a.price, a.event_date
  FROM schedule a JOIN event s ON a.event_id = s.ID
 WHERE a.event_date = (SELECT MIN (b.event_date)
                         FROM schedule  as b
                        WHERE b.event_id = a.event_id)
 ORDER BY a.event_id ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T10:11:36.493

您可以创建一个视图并从中选择：

```
CREATE VIEW scheduleview AS select * from schedule group by event_date,event_id;
select * from scheduleview group by event_id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-11T06:05:35.643

它看起来很复杂，但也更简单

```
select * from 

    (select 
           event.id,
           event.title,
           schedule.event_date,
           schedule.price,
           event_id 
    from schedule 
    left join event on event.id=schedule.event_id 
    group by event_date,event_id
    )s

group by s.event_id; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-24T05:18:05.730

select a.id, a.title, b.price, b.event_date from `event`a inner join `schedule`b ON a.id = b.event_id order by b.event_id desc ;

# arrays - 排序数组并找到复杂度 O(n) 的总和

> ID：16018518
> 
> 赞同：0
> 
> 时间：2013-04-15T15:02:16.470
> 
> 标签：arrays, algorithm, complexity-theory, sorted

我们已经排序了数组`arr[]={2,4,5,7,8,12,16,18,20}`。

我们需要找出相加的元素对`12`，复杂度`O(n)`。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:29:27.343

不幸的是，没有适合您的解决方案，只需考虑一些事情就会引导您朝着正确的方向前进：

请记住，数组已排序，以下哪项是正确的？

```
 arr[x+1] + arr[y] < arr[x] + arr[y]
or arr[x+1] + arr[y] > arr[x] + arr[y]

   arr[x] + arr[y-1] < arr[x] + arr[y]
or arr[x] + arr[y-1] > arr[x] + arr[y] 
```

如果您对这些问题的答案思考得足够长（并且可能会画出答案），那么应该有一个解决方案。

提示如何开始：

设 x = 0，y = n-1。
...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T16:07:30.717

尝试这个：

由于数组已排序，因此取第一个元素 (arr[0]) 和最后一个元素 (arr[8]) 的总和。如果总和大于 12，那么我们需要降低总和，因此我们将最大的数字替换为下一个最大的数字（在本例中为 arr[7]）；如果总和小于 12，我们需要增加总和，因此我们将最小的数字替换为下一个最小的数字，（在这种情况下，将 arr[0] 替换为 arr[1]）。不断重复这个过程，直到你得到你想要的总和，或者你求和的两个数字来自数组中的同一个索引。

# css - 应用 position: fixed 时是否可以保持父元素的宽度？

> ID：16018520
> 
> 赞同：66
> 
> 时间：2013-04-15T15:02:28.107
> 
> 标签：css, position, css-position

当我们应用于`position:fixed`一个元素时，它会[脱离文档的正常流程](http://quirksmode.org/css/css2/position.html#link7)，因此它不尊重它的父元素宽度。**如果将其声明为百分比，**有没有办法让它继承它的父宽度？（下面的工作用例）

```
let widthis = $('.box').width();
$('.dimensions').text(`width is ${widthis}`);

$('button').on('click', function() {
  $('.box').toggleClass('fixed');
  let widthis = $('.box').width();
  $('.dimensions').text(`width is ${widthis}`);
});
```

```
.container {
  max-width: 500px;
  height: 1000px;
}

.box {
  background-color: lightgreen;
}

.fixed {
  position: fixed;
}

.col-1 {
  border: 1px solid red;
  float: left;
  width: 29%;
}

.col-2 {
  border: 1px solid pink;
  float: left;
  width: 69%;
}
```

```
<link href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<button>Click this to toggle position fixed for the left column</button>
<div class="container">
  <div class="col-1">
    <div class="box">
      fixed content<br>
      <span class="dimensions"></span>
    </div>
    </div>

  <div class="col-2">
    some other content
    </div>
  </div>
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2017-03-19T08:52:25.663

这是一个有趣的挑战。要解决这个问题，我们应该首先了解`fixed`实际做了什么。

### 了解固定

与`absolute`,不同，`fixed` **它不会将自己定位于其最近的相对**父级。相反，`fixed` **相对于 viewport 定位自身**。视口将始终保持固定，这就是您获得效果的原因。

话虽如此，**只要您“继承”任何宽度，它将与 viewport 相关**。因此，当我们尝试将目标元素的宽度设置为其父元素的宽度时，这对我们没有好处。

*详细了解[职位](https://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)的不同行为。*

## 快速解决方案

有两种方法可以解决此问题。

### 纯 CSS

我们可以使用**纯 CSS**来解决这个问题，但**我们需要提前知道宽度**。假设它的父元素是`300px;`

```
.parent{
    width: 300px;
}

.parent .fixed_child{
    position: fixed;
    width: 300px;
} 
```

### JS

现在有了**移动****设备**，我们真的**没有****设置宽度**的奢侈，尤其是任何超过的东西。使用百分比也不起作用，因为它是相对于视口而不是父元素。**我们可以使用 JS**，在本例**中使用 jQuery 来实现这一点**。让我们看一个在给定时刻**总是设置父元素宽度的****函数**：****`300px`****

 ******```
 function toggleFixed () {
      var parentwidth = $(".parent").width();      
      $(".child").toggleClass("fixed").width(parentwidth);        
  } 
```

CSS：

```
.fixed{
    position:fixed;
} 
```

*在[CodePen中查看](http://codepen.io/Philll_t/pen/XMVYEa)*

### 动态宽度

这很好，很花哨，但是**如果窗口的宽度**在用户仍在页面上时发生了变化，从而改变了父元素，会发生什么？虽然父级可以调整其宽度，但子级将保持函数设置的宽度。**[我们可以使用jQuery 的](https://api.jquery.com/resize/)**事件监听**器来解决这个问题。 `resize()`**首先，我们需要将我们创建的函数拆分为两个：

```
function toggleFixed() {
   adjustWidth();
   $(".child").toggleClass("fixed");
 }

 function adjustWidth() {
   var parentwidth = $(".parent").width();
   $(".child").width(parentwidth);
 } 
```

现在我们已经分离了每个部分，我们可以单独调用它们，我们将包括我们原始的按钮方法来切换固定和宽度：

```
$("#fixer").click(
     function() {
       toggleFixed();
     }); 
```

现在我们还将 resize 事件监听器添加到窗口：

```
 $(window).resize(
     function() {
       adjustWidth();
     }) 
```

*在[CodePen中查看](http://codepen.io/Philll_t/pen/dvJKqQ)*

那里！现在我们有一个固定元素，当窗口调整大小时，它的大小将被调整。

## 结论

我们通过了解`fixed`位置及其局限性来应对这一挑战。与 Absolute 不同，`fixed`仅与视口相关，因此不能继承其父级的宽度。

为了解决这个问题，我们需要使用一些 JS 魔法来实现这一点，这在 jQuery 中并不需要太多。

在某些情况下，我们需要一种动态方法，使用不同宽度的缩放设备。同样，我们采用了 JS 方法。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-02T19:44:11.287

您可以使用`width:inherit`. 这将使它听父母的。我对其进行了测试，它可以在 Firefox 中运行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-15T15:12:14.203

宽度正在发生变化，因为静态时的对象从其父对象接收其百分比宽度。将对象设置为固定后，它不再处于流动状态并调整大小。

您必须自己设置导航菜单的大小，而不是期望元素从父级获取其宽度。

```
.nav {
    position: fixed;
    width: 20%;
    border: 1px solid green;
    padding: 0px;
    list-style-type:none;
    background:lightblue;
} 
```

[http://tinker.io/3458e/5](http://tinker.io/3458e/5)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-09T10:12:23.307

嗨，你也可以使用 jquery 来保持宽度。例如：

```
jQuery(function($) {
    function fixDiv() {
        var $cache = $('#your-element');
        var $width = $('#your-element').parent().width();
        if ($(window).scrollTop() > 100) {
            $cache.css({
                'position': 'fixed',
                'top': '10px',
                'width': $width
            });
        } else {
            $cache.css({
                'position': 'relative',
                'top': 'auto'
            });
        }
    }
    $(window).scroll(fixDiv);
    fixDiv();
 }); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-02-26T02:07:52.720

正如有人已经建议的那样，使用普通的javascript（没有jquery）：

```
const parentElement = document.querySelector('.parent-element');
const fixedElement = document.querySelector('.fixed-element');

window.addEventListener('load', changeFixedElementWidth);
window.addEventListener('resize', changeFixedElementWidth);

function changeFixedElementWidth() {
  const parentElementWidth = parentElement.getBoundingClientRect().width;
  fixedElement.style.width = parentElementWidth + 'px';
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-03T01:58:03.587

`<html>`这可能是因为or`<body>`元素上的一些默认边距或填充。当它是静态的时，它的大小基于当时`<body>`的宽度，但是当它改变时，`position:fixed`它的大小是相对于视口的。

因此，删除默认边距/填充应该可以解决问题（根据我的经验`body { margin:0; }`可以解决），就像在固定大小时更改大小一样（如`width:calc(n% - 5px);`）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-15T15:26:47.503

一种解决方法可能是：`left:8px; right:0; width:18%;`在导航的 CSS 中。虽然不是最好的解决方案。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2016-01-15T10:59:51.830

添加`width:auto;`到元素`position:fixed;`以使其宽度等于其父元素的宽度。******

# gnuplot - Gnuplot：数据中的围栏图

> ID：16018524
> 
> 赞同：0
> 
> 时间：2013-04-15T15:02:33.707
> 
> 标签：gnuplot, fence-plots

我试图弄清楚如何在 gnuplot 中绘制围栏图，但我很难理解我在互联网上找到的示例中发生了什么。

在我的模拟中，我有来自不同时间点的（不同）数量的数据集，在一个数据文件中，该数据文件组织为值矩阵¹：

```
t1    x11    y11   // indices here indicate that (x1,y1) are a data point which
t1    x21    y21   // I'd plot on a regular 2D plot for this timestep, with the
...                // additional index noting which time step the values are for.
t1    xN1    yN1   
[blank line]
t2    x12    y12
t2    x22    y22
...
t2    xN2    yN2
[etc...]
tM    xNM    yNM 
```

我想为每个时间值绘制一个围栏。我可以简单地绘制`splot 'data.txt'`并得到与我想要的非常相似的东西 -`+`沿着栅栏的“顶部边缘”的标记，x 轴上的时间，y 轴上的 x 数据和 z 轴上的 y 数据。`w lines`但是，如果我在命令中添加类似的东西，`splot`我只会得到一个连接了所有数据系列的表面。

我试图调整[演示脚本集合](http://gnuplot.sourceforge.net/demo_4.4/surface1.html)中的示例（大约一半），但它们都依赖于一个虚拟变量，我不知道如何将它与我的数据系列结合起来。我也找到了一些其他的例子，但它们都非常复杂，我根本不明白它们在做什么。

使用 gnuplot 从数据创建围栏图的好方法是什么？

* * *

^(¹如果有必要，可以改变它——我控制着生成数据的代码。虽然很麻烦...)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:09:16.037

不幸的是，这确实需要对数据进行一些更改。虽然变化很小，但可能可以用一个简单的`awk`^(1,2)脚本来处理：

这是我的交互式 gnuplot 会话的复制/粘贴：

```
gnuplot> !cat test.dat
1 2 3
1 2 0

1 3 4
1 3 0

1 4 5
1 4 0

2 2 3
2 2 0

2 3 4
2 3 0

2 4 5
2 4 0

3 2 3
3 2 0

3 3 4
3 3 0

3 4 5
3 4 0
!
gnuplot> splot 'test.dat' u 1:2:3 w lines 
```

这里要注意的是，“栅栏”之间有 2 个空行，每个 x,y 数据点出现两次，之后有一个空行。第二次出现时，z 坐标为 0。

要使每个栅栏具有不同的颜色：

```
gnuplot> splot for [i=0:3] 'test.dat' index i u 1:2:3 w lines 
```

awk 脚本甚至可以内联完成：

```
splot "< awk {...} datafile" 
```

但这可能会在引用时变得有点棘手（要在单引号字符串中包含单引号，请将其加倍）......

```
AWKCMD='awk ''{if(!NF){print ""}else if(index($0,"#")!=1){printf "%s %s %s\n%s %s 0\n\n", $1,$2,$3,$1,$2}}'' '
splot '<'.AWKCMD.'datafile.dat' u 1:2:3 w lines 
```

就效率而言，我相信我上面使用的迭代每次迭代都会调用 awk 命令。这里的解决方法是从索引号中提取颜色：

```
splot '<'.AWKCMD.' test.dat' u 1:2:3:(column(-2)) w l lc variable 
```

我相信这只会`awk`根据需要执行一次命令，因此只有一百万个条目，它仍然应该相对快速地响应。

* * *

^(¹`awk '{if(!NF){print ""}else{printf "%s %s %s\n%s %s 0\n\n", $1,$2,$3,$1,$2}}' test.dat`)

^(²`awk '{if(!NF){print ""}else if(index($0,"#")!=1){printf "%s %s %s\n%s %s 0\n\n", $1,$2,$3,$1,$2}}' test.dat`（忽略评论的版本）)

# java - 大写枚举和小写枚举的区别

> ID：16018528
> 
> 赞同：4
> 
> 时间：2013-04-15T15:02:41.780
> 
> 标签：java, enums

*使用小写关键字enum*和大写类名*Enum*定义一个类有什么区别？

```
public enum Apple {
    RedDelicious, GrannySmith;
}

public Enum Pony {
    Earth, Pegasus, Unicorn
} 
```

无论如何，第二个版本都不正确，因为我不熟悉创建枚举的方法的正确语法，但显然，类似的东西是可能的。

如果这个问题似乎缺乏研究努力，我深表歉意，但事实并非如此；由于大小写问题，这些信息*不*容易通过谷歌找到，恕我直言。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T15:04:35.867

`enum`关键字是 Java 语言的一部分。`Enum`是`Class`表示 的对象的名称`enum`；也就是说，它是所有`enum`值的公共基类。它定义了所有枚举对象继承的方法：`name()`、`ordinal()`等。把它想象成旧 SAT 的一个类比问题：`enum`is to `Enum`as `class`is to `Object`。

始终`enum`在代码中用于声明枚举。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T15:04:49.273

`enum`是用于定义新枚举的保留字。

`Enum`是 JDK 附带的一个抽象类。

如果要定义新的枚举，请使用`enum`

如果您需要进一步说明，可以参考[此处](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html)`Enum`的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T15:06:22.847

你没有显式地创建子类`Enum`：你使用`enum`关键字让编译器为你构建这个类。

该类`Enum`仅存在于 javadoc 中，因此您可以阅读所有枚举都将具有的标准非静态方法的文档（并非此处未描述某些特殊的静态方法，例如`values`）。

这种机制在这里描述：http: [//docs.oracle.com/javase/tutorial/java/javaOO/enum.html](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

# javascript - Javascript MVC 控制器和点击事件

> ID：16018531
> 
> 赞同：0
> 
> 时间：2013-04-15T15:02:46.237
> 
> 标签：javascript, javascriptmvc

我遇到了点击事件无法使用 Javascript MVC 控制器的问题。

```
TEST.Assignments.AssignmentsController = function (element) {

var elements = {
    activeAssignmentsPanel: $('#lpn-activeAssignments_Cont'),
    assignmentViewLink: $("#lpn-activeAssignments_Cont table tr th a")
};

var _this = this;
var model = new TEST.Assignments.AssignmentModel();

this.buildAssignmentsList = function () {
    var assignments = model.getActiveAssignmentsList({
        assignmentMode: "active",
        mock: true,
        success: function (data) {
                dust.render("ActiveAssignmentsPanel", data, function(err, out) {
                elements.activeAssignmentsPanel.append(out);
            });
        }
    });
};

this.getAssignmentDetails = function(assignmentId) {
    console.log(assignmentId);
};

//bind all events
elements.assignmentViewLink.click(function (e) {
    console.log("blah");
    console.log($(this).data("assignmentKey"));
});

};//end assignments controller

$(function () {
    var assignmentsController = new TEST.Assignments.AssignmentsController();
    assignmentsController.buildAssignmentsList();
}); 
```

如果你看一下`//bind events`，我有一个应该可以工作的点击功能。但事实并非如此。构造函数被调用并且元素被正确追踪。知道为什么单击事件不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:23:08.593

我假设 assignmentViewLink 元素已创建并附加在成功回调中。如果是这样，它看起来像一个序列问题。绑定点击事件时，assignmentViewLink 元素尚未创建，因此未附加点击事件处理程序。

```
//bind all events
// assignmentViewLink is empty []
elements.assignmentViewLink.click(function (e) {
  console.log("blah");
  console.log($(this).data("assignmentKey"));
}); 
```

要验证这一点，请将 elements.assignmentViewLink(...) 移动到成功回调中。

# postgresql - 在 Postgres 字符串数组上创建不区分大小写的索引

> ID：16018533
> 
> 赞同：4
> 
> 时间：2013-04-15T15:02:48.093
> 
> 标签：postgresql, postgresql-9.2, database-indexes

我`varchar[]`在 Postgres 9.2 中使用列（varchar 数组）来存储一些标签。在按标签检索行时，我希望查询不区分大小写。但是，我想保留案例以在 UI 中显示（因此我不能将所有内容都存储为小写）。

所以，我的问题是如何在 Postgres 中通过 varchar 数组创建不区分大小写的索引？一种可能的方法是在列上创建一个功能性 GIN 索引。如何做到这一点？还有其他方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T15:56:06.890

@Saurabh Nanda：与您发布的内容类似，您还可以创建一个简单的函数将 varchar 数组转换为小写，如下所示：

```
CREATE OR REPLACE FUNCTION array_lowercase(varchar[]) RETURNS varchar[] AS
$BODY$
  SELECT array_agg(q.tag) FROM (
    SELECT btrim(lower(unnest($1)))::varchar AS tag
  ) AS q;
$BODY$
  language sql IMMUTABLE; 
```

请注意，我还修剪了空格的标签。这对您来说可能不是必需的，但我通常这样做是为了保持一致性。

测试：

```
SELECT array_lowercase(array['Hello','WOrLD']);
 array_lowercase 
-----------------
 {hello,world}
(1 row) 
```

正如 Saurabh 所说，您可以创建一个 GIN 索引：

```
CREATE INDEX ix_tags ON tagtable USING GIN(array_lowercase(tags)); 
```

并查询：

```
SELECT * FROM tagtable WHERE ARRAY['mytag'::varchar] && array_lowercase(tags); 
```

**更新：**`WHILE` vs array_agg/unnest的性能

我创建了 100K 10 个元素`text[]`数组（12 个字符随机混合大小写字符串）的表并测试了每个函数。

array_agg/unnest 函数返回：

```
EXPLAIN ANALYZE VERBOSE SELECT array_lowercase(data) FROM test;
                                                       QUERY PLAN                                                       
------------------------------------------------------------------------------------------------------------------------
 Seq Scan on public.test  (cost=0.00..28703.00 rows=100000 width=184) (actual time=0.320..3041.292 rows=100000 loops=1)
   Output: array_lowercase((data)::character varying[])
 Total runtime: 3174.690 ms
(3 rows) 
```

WHILE 函数返回：

```
EXPLAIN ANALYZE VERBOSE SELECT array_lowercase_while(data) FROM test;
                                                       QUERY PLAN                                                       
------------------------------------------------------------------------------------------------------------------------
 Seq Scan on public.test  (cost=0.00..28703.00 rows=100000 width=184) (actual time=5.128..4356.647 rows=100000 loops=1)
   Output: array_lowercase_while((data)::character varying[])
 Total runtime: 4485.226 ms
(3 rows) 
```

**更新 2：** `FOREACH`与`WHILE` 作为最后的实验，我将 WHILE 函数更改为使用 FOREACH：

```
CREATE OR REPLACE FUNCTION array_lowercase_foreach(p_input varchar[]) RETURNS varchar[] AS $BODY$
DECLARE
    el text;
    r varchar[];
BEGIN
    FOREACH el IN ARRAY p_input LOOP
        r := r || btrim(lower(el))::varchar;
    END LOOP;
    RETURN r;
END;
$BODY$
  language 'plpgsql' 
```

结果似乎类似于`WHILE`：

```
EXPLAIN ANALYZE VERBOSE SELECT array_lowercase_foreach(data) FROM test;
                                                       QUERY PLAN                                                       
------------------------------------------------------------------------------------------------------------------------
 Seq Scan on public.test  (cost=0.00..28703.00 rows=100000 width=184) (actual time=0.707..4106.867 rows=100000 loops=1)
   Output: array_lowercase_foreach((data)::character varying[])
 Total runtime: 4239.958 ms
(3 rows) 
```

虽然我的测试并不严格，但我确实多次运行每个版本，发现数字具有代表性，这表明 SQL 方法（array_agg/unnest）是最快的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:24:43.897

使用自定义 pgplsql 函数找到了一种可能的方法：

首先声明一个自定义函数，该函数将 varchar[] 数组作为输入，并返回一个所有元素都转换为小写的新数组。（这是我第一次编写 PL/SQL，所以这可能是非常低效的代码）。

```
CREATE OR REPLACE FUNCTION array_lowercase(varchar[]) RETURNS varchar[] AS $$
DECLARE
    i INTEGER;
    l INTEGER;
    r VARCHAR[];
    inp ALIAS FOR $1;
BEGIN
    i := 1;
    l := array_length($1, 1);
    WHILE i <= l LOOP
        r[i] = lower(inp[i]);
        i := i + 1;
    END LOOP;
    RETURN r;
END;
$$ LANGUAGE plpgsql IMMUTABLE; 
```

`array_lowercase`接下来，使用新定义的函数在表达式上创建 GIN 索引：

```
create index hotel_bookings_tags on hotel_bookings using gin(array_lowercase(tags)); 
```

现在在查询中使用它（使用 EXPLAIN 验证它是否使用索引）：

```
select * from posts where array[(varchar 'some_tag')] && array_lowercase(tags); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T13:59:52.567

不确定它是否有帮助，但我正在搜索类似的东西`text[]`，并使用了类型转换：

```
select id from product where lower(tags::text)::text[] && array['tat']; 
```

# python - 如何将非线性数据重新格式化为线性数据？

> ID：16018534
> 
> 赞同：1
> 
> 时间：2013-04-15T15:02:48.980
> 
> 标签：python, format, record, nonlinear-functions

让我详细说明：

我有一个非线性时间轴，比如说`[2.0,5.8,8.18,16.0,32.1]`（可能是任何东西）

我在上述时间记录了一个波形，比如说`[1,1,1,1,1,etc]`

我需要将波形转换为线性`range(start,end,x)`, `[2,3,4,5,6,7,8,9,10,etc]`, 哪里`x`是允许我保留所有数据而不会丢失一些数据的数字

所以它最终成为`[1,0,1,0,0,0,1,etc]`. 无插值

```
waveform [1,1,1,1,1,etc]
nonlin   [2.0,5.8,8.18,16.0,32.1]
lin  [0,0.01,0.02,0.03,etc]
new_wave = ... 
```

我最初的尝试是

（伪类）：

```
make array of intervals between points # i.e. [3.8,2.38, etc]
find smallest interval
lin = np.arange(start,end,smallest_interval)
new_wave = np.zeros([ len(lin) ]) # empty array of same size as lin
for index, i in enumerate(lin):
    if i is in nonlin:
        find nonlin index, call it nonlin_index
        new_wave[index] = waveform[nonlin_index] 
```

但是，如果我这样做，这将需要很长时间！

有没有更简单的技术？

# asp.net - 如何在 asp.net 中防止/停止页面加载时的事件冒泡/传播

> ID：16018536
> 
> 赞同：0
> 
> 时间：2013-04-15T15:02:54.317
> 
> 标签：asp.net, events, page-lifecycle, event-bubbling, stoppropagation

我想知道我是否可以根据以下条件防止页面加载时的事件冒泡/传播：

```
protected override void OnLoad(EventArgs e)
{
    // If the user press F5 from the browser
    if (IsRefresh)
    {
        // Here I want to stop propagation/bubbling the events like OnClick of a submit button but without using the button object (I want it generic)
    }
    else
    {
        base.OnLoad(e);
    }
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T15:13:35.707

*防止事件冒泡*有两个困难 - 检测 F5 并停止事件 - 我只需使用`Post/Redirect/Get`-pattern：

```
protected void Button1_Click(object sender, System.EventArgs e)
{
    // do what you need to do
    // now redirect to the same page, 
    // then a browser-refresh via F5 won't trigger this event again
    Response.Redirect(Request.Url.PathAndQuery);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T05:48:56.580

关于你的问题的细节，如何反转它？可能仅在不满足条件时才添加 Load 事件侦听器（例如，在页面 Init 中）。

另一种选择可能是做类似的事情：

```
this.Load -= MyPageLoadMethod; 
```

您可能正在查看事件本身，而不是 OnLoad 方法。不管怎样，我认为这是可能的，在这里查看一些选项[如何从控件中删除所有事件处理程序](https://stackoverflow.com/questions/91778/how-to-remove-all-event-handlers-from-a-control)

虽然有一个很大的“但是”......

* * *

像这里的大多数人一样，我认为你没有解决正确的问题。很抱歉，我认为这同样适用于 Emad 的解决方案。

蒂姆做到了。这个答案将尝试更多地解释这个选项。

Post-Get-redirect 模式非常流行且非常标准。在我们的大多数应用程序中，通过在页面加载之前重新单击提交按钮或刷新浏览器导致另一个 POST 调用多次提交相同的表单是错误的，因此，在非 AJAX 表单提交后重定向的做法已成为这么标准。

您可能尝试的所有其他方法都将不再是一种肮脏的解决方法，而是一种适当的解决方案。

--

现在，出现了向用户提供反馈的问题。Ruby On Rails 为此提供了一个漂亮的助手，称为 Flash 助手。这是您可以在重定向之前设置的消息（如果没有重定向，甚至可以在同一页面中设置），下次显示它时，它会自行销毁，下次调用它时，您什么也得不到。所以，你什么都不显示。

ASP.NET MVC 有这样的东西，即 TempData。TempData 可以存储在很多地方，默认情况下在 Session 中，因此，如果您从 MVC 操作重定向，您可以设置类似`TempData['Message']`，并在下一个 Controller 中读取它。ASP.NET MVC 将在重定向后处理删除它。

那么，Webforms 怎么样？也没有什么可以阻止你这样做。这真的不是火箭科学

*   您可以检查 URL Referrer 是否为编辑页面，并据此显示消息。

*   您可以在重定向之前将消息存储在 Session 中，并在每次页面加载时检查它，如果找到，则将其显示并从 Session 中删除

*   如果会话被禁用，您可以使用 cookie。您可以在发送之前检查 cookie 的日期，这样如果重定向从未发生（使用网络丢失或其他），并且在他没有看到过时消息时使用稍后到达页面。

*   您也可以存储在缓存中（当然还有一些与用户相关的密钥，因为缓存是应用程序范围的），然后您可以将缓存过期设置为某个较短的时间段以避免在 cookie 选项中解释的问题

您还可以在 Google 上搜索 Rails Flash-like for ASP.NET Webforms，看看其他人想出了哪些可重用组件。例如，这个结果出现在我的搜索中：http:
[//highoncoding.com/Articles/542_Creating_Rails_Like_Flash_Feature_in__NET_The_Flash_Control.aspx](http://highoncoding.com/Articles/542_Creating_Rails_Like_Flash_Feature_in__NET_The_Flash_Control.aspx)
检查 NuGet 也可能有一些东西。同样，无论如何构建自己的并不难。

* * *

**更新：**

另一种简单的方法可能是只重定向到相同的 URL，这将导致 GET 请求并且不会运行任何处理程序，非常接近 Post-Get-Redirect 的原始实现（您的可能是 Post-Post-Redirect，开玩笑），也很安全。

就像是：

```
Response.Redirect(Request.RawUrl); 
```

**更新 2**

就像上面提到的，如果你在页面初始化之后运行，比如在页面加载中，你总是可以以类似于以下的方式删除事件：

```
this.SubmitButton.Click -= SubmitButton_Click; 
```

你明白了……

如果您想要停止特定事件，这很有用，而前面的答案假设您正在尝试停止大多数事件。

> [http://gurustop.net](http://gurustop.net)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T09:25:51.917

我在 ASP.NET WebForms 项目中做过一次，当用户按下 F5 时，它会执行刷新以外的操作，我通过使用 jQuery keypress 甚至对页面调用 e.preventDefault(); 来完成此操作。检查[这个](https://stackoverflow.com/questions/2482059/disable-f5-and-browser-refresh-using-javascript)

更新：

```
$(document).ready(){function(){
        this.keydown(e){
          if (e.which == 116){
                  e.preventDefault();
             window.location.href = "http://foo.com/?IsReferesh=1";     
           }
        };    
)}; 
```

您可以使用 QueryString 来检查用户是否按 F5 以及 Code Behind 中的反射。如果我错过了什么，那么我没有完全理解你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:12:55.163

```
protected override void OnLoad(EventArgs e)
{
        if (!IsPostBack)
        {
            if (Request.UrlReferrer != null)
                if (Request.UrlReferrer.PathAndQuery == Request.RawUrl)
                {
                    // Show Message
                }
        }
}

protected void Button1_Click(object sender, System.EventArgs e)
{   
     Response.Redirect(Request.Url.PathAndQuery);
} 
```

笔记：

`if (Request.UrlReferrer.PathAndQuery == Request.RawUrl)`// 不适用于 chrome，因此您可以将其替换为 `if (Request.UrlReferrer.AbsolutePath == Request.Url.AbsolutePath)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-22T16:38:21.147

```
 static string REFRESH_CHECK_GUID = "REFRESH_CHECK_GUID";

    protected void Page_Load(object sender, EventArgs e)
    {
        if (ViewState[REFRESH_CHECK_GUID] != null && !ViewState[REFRESH_CHECK_GUID].ToString().Equals(Session[REFRESH_CHECK_GUID].ToString()))
        {
            Response.Redirect("Login.Aspx");
        }

        Session[REFRESH_CHECK_GUID] = System.Guid.NewGuid().ToString();
        ViewState[REFRESH_CHECK_GUID] = Session[REFRESH_CHECK_GUID]; 
```

# javascript - Popcorn.js 淡入/淡出字幕

> ID：16018538
> 
> 赞同：2
> 
> 时间：2013-04-15T15:03:03.947
> 
> 标签：javascript, html5-video, popcornjs

我正在寻找一种使用 Popcorn.js 对视频的字幕进行很好的淡入淡出的方法。

就目前而言，它似乎只是使字幕内联或不显示之间的硬切。

```
 start: function( event, options ){
    options.innerContainer.style.display = "inline";
    options.showSubtitle( options, options.text );
  },

  end: function( event, options ) {
    options.innerContainer.style.display = "none";
    options.innerContainer.innerHTML = "";
  }, 
```

我怎么能管理这个？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T15:54:29.717

您可以使用fadeIn() 和fadeOut jquery 方法。把字幕放到一个div里面就完成了。

```
// Start
$('#mysubtitleDIV').fadeIn('slow');

// End
$('#imagediv').fadeOut('slow'); 
```

# rotation - Microsoft PixelSense ScatterviewItem 旋转事件

> ID：16018543
> 
> 赞同：0
> 
> 时间：2013-04-15T15:03:13.150
> 
> 标签：rotation, pixelsense, scatterview

由于 ScatterView 提供内置的旋转、调整大小和移动操作，因此对于形状的标准操作非常方便。为了提供重做/撤消，如果需要，我想保存形状的设置以恢复到以前的状态。因此，如果有像“OrientationChanged”、“Moved”等事件可以连接，那就太好了。我知道有 OnManipulationStarted-event 但我需要弄清楚它的操作是旋转、移动还是调整大小。

有没有比在每个 OnManipulationStarted-event 中存储所有属性更优雅的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:30:47.447

方向是一个“依赖属性”，WPF 有一种机制可以让您从任何依赖属性中获取“更改”事件。请参阅[http://blogs.msdn.com/b/llobo/archive/2007/03/05/listening-to-dependencyproperty-changes.aspx](http://blogs.msdn.com/b/llobo/archive/2007/03/05/listening-to-dependencyproperty-changes.aspx)以获得一个不错的起点。

# ios - 切换视图控制器时uiview重复

> ID：16018547
> 
> 赞同：0
> 
> 时间：2013-04-15T15:03:23.033
> 
> 标签：ios, ipad, uiview, uiviewcontroller, isgl3d

我有 2 个 ViewController，我使用 App 委托根据用户交互来切换它们。

在 AppDelegate.m 我有：

```
 - (void) switchViews
{
    if (_viewController.view.superview == nil) {
        [_window addSubview:_viewController.view];
        [_window bringSubviewToFront:_viewController.view];
        [viewController2.view removeFromSuperview];
    } else
    {
        [_window addSubview:_viewController2.view];
        [_window bringSubviewToFront:_viewController2.view];

        [_viewController.view removeFromSuperview];
    } 
} 
```

_viewController 用于主视图，_viewController2 用于 glview（我正在使用 isgl3d）。该开关有效，但每次我切换回 glview 时，我都会在顶部看到重复的视图，我怀疑即使是主视图也是重复的。

知道如何完全删除视图，以免出现此问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:19:52.150

您不应该像这样添加和删除视图，只需更改哪个控制器是窗口的根视图控制器。这样做会使新控制器的视图成为窗口的子视图，并删除旧控制器的视图。

```
if ([self.window.rootViewController isEqual: _viewController]) {
    self.window.rootViewController = viewController2;
}else{
    self.window.rootViewController = viewController; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:27:04.963

在观看了 Stanford Coding Together:IOS 之后，我发现了如何做到这一点。

我不知道的 VC 的一些关键信息：每次 VC 实例化时，`viewDidLoad`都会调用一次以设置所有重要的东西，如插座等。然后`viewWillAppear`和`viewWillDisappear`将在视图交换之间被调用。因为它在视图显示给用户之前被调用，所以所有的几何设置，如视图方向和大小都在这里设置。

所以我要做的是：我`addSubview`在 中，在和`viewDidLoad`中进行所有运行设置。`viewWillappear``viewWillDisappear`

还有一点需要注意：只要应用程序仍在运行，视图就会一直存在。

无论如何感谢 rdelmar 的帮助。

# ruby - 为什么我会收到 Net::HTTP“请求路径为空”错误？

> ID：16018552
> 
> 赞同：5
> 
> 时间：2013-04-15T15:03:35.237
> 
> 标签：ruby, net-http

我正在使用 Net::HTTP 发出 HTTP 请求。我收到错误“HTTP 请求路径为空”，但我强烈认为不是。代码如下：

```
REQUEST_IP = "localhost"
REQUEST_PORT = "8081"
REQUEST_PATH = "myweb/rest"

def customServiceMailAndMessageRequest user_id, message

  url = 'http://' + REQUEST_IP + ":" + REQUEST_PORT + "/" + REQUEST_PATH + '/users/' + user_id + '/messages/sendMailAndMessage?message=' + message
  uri = URI(url)

  request = Net::HTTP::Get.new(uri.path)
  request['Content-Type'] = 'application/json'
  request['Accept'] = 'application/json'

  response = Net::HTTP.new(uri.host,uri.port) do |http|
    http.request(request)
  end

  puts response

end 
```

错误是：

```
/usr/lib/ruby/1.8/net/http.rb:1478:in `initialize': HTTP request path is empty (ArgumentError)
    from /usr/lib/ruby/1.8/net/http.rb:1596:in `initialize' 
```

谁能指出我的错误？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-17T19:53:59.507

当我没有包含尾随时，我收到了类似的错误`/`。一旦我这样做，一切都很好。

根据您共享的信息，我只能假设您的`message`变量没有。

# java - Java Smack 文件传输

> ID：16018554
> 
> 赞同：0
> 
> 时间：2013-04-15T15:03:40.763
> 
> 标签：java, macos, smack

好的，我从网上得到了以下代码，它**确实**有效：

```
@Override
public void fileTransferRequest(FileTransferRequest request) {
    // Check to see if the request should be accepted

    final IncomingFileTransfer transfer = request.accept();
    runnningFileTransfer = transfer;
    try
    {
       final File file = new File("/Users/Akku/Downloads/in2" + request.getFileName());
       transfer.recieveFile(file);
       t = new Thread(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            try {
                transfer.recieveFile(file);
                System.out.println("DONE?");
            } catch (XMPPException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
       });
       t.run(); 
```

此代码运行，对于我的 10MB 测试文件，它需要相当多的时间。可悲的是，我需要知道转移是否完成或进展如何。有趣的是，我还从网上得到了这部分（它只是休眠并检查进度），当我附加它时，文件传输不再起作用：

```
 while(!transfer.isDone()) 
       {
            if(transfer.getStatus().equals(Status.error))
            {
                 System.out.println("ERROR"+transfer.getError() + " EX: " + transfer.getException());
            } 
            else 
            {
                 System.out.println("Written: "+transfer.getAmountWritten());
                 System.out.println("STATUS"+transfer.getStatus());
                 System.out.println("PROGRESS"+transfer.getProgress());
            }
        try
        {
                Thread.sleep(10000);
                System.out.println("Waiting...");
           }
           catch (Exception e)
           {
            e.printStackTrace();
           }
       } 
```

任何提示为什么会发生这种情况？我猜这是Java，因为上面的代码片段完美无缺。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:42:24.560

有效的情况应该是抛出异常。您在传输对象上调用了两次接收。第二次调用应在尝试再次创建文件时产生异常。在这种情况下，第二次调用以及线程创建不是必需的，因为 transfer() 方法是异步的并且具有自己的内部线程。

很难说为什么它不适用于您的状态检查，因为您没有显示您在哪里进行此检查。我的怀疑是您在读取线程上调用它，从而阻止读取新数据包。您对传输状态的循环检查应该在其自己的线程中运行。

# xml - AnyMaps 图例项目未使用正确的图标颜色

> ID：16018563
> 
> 赞同：0
> 
> 时间：2013-04-15T15:04:07.577
> 
> 标签：xml, apache-flex, icons

我使用 AnyChart/AnyMap 系统为我的站点呈现自定义地图，当前版本为 6.0.11。我们正在显示一张美国地图，该地图分为多个区域，每个区域都根据调色板分配了一种颜色。所有这些都很好，但是，我们在图表底部还有一个图例，它应该使用与系列数据相同的颜色。由于某种原因，这些`<item>`元素似乎忽略了我手动分配的任何颜色，也不尊重`<icon color="%Color"...>`标签。以下是特别与图例相关的 XML 片段，基于[http://anychart.com/products/anychart/docs/xmlReference/index.html](http://anychart.com/products/anychart/docs/xmlReference/index.html)中指定的 API ：

```
<anychart>
    <charts>
        <chart name="United States" plot_type="Map" template="state_template">
        <data_plot_settings>
            <map_series id_column="REGION_NAME" source="usa/country/states.amap">
            ...
            <chart_settings>
                <legend align="Center" align_by="DataPlot" enabled="True" ignore_auto_item="True" inside_dataplot="False" padding="5" position="Bottom">
                    <rows_padding><![CDATA[1]]></rows_padding>
                <format><![CDATA[{%Icon} {%Name} - 420{numDecimals:0,trailingZeros:0,decimalSeparator:,thousandsSeparator:}]]></format>
                <title enabled="False" />
                <icon color="%Color" series_type="Marker" type="SeriesIcon" />
                <items>
                    <item series="New England" source="Series">
                        <icon color="#E5E5E5" />
                    </item>
                    <item series="Middle Atlantic" source="Series">
                        <icon color="#E2D4D4" />
                    </item>
                    <item series="West South Central" source="Series">
                        <icon color="#DEE2D4" />
                    </item>
                    <item series="Mountain" source="Series">
                        <icon color="#DED4E2" />
                    </item>
                    <item series="Pacific" source="Series">
                        <icon color="#E2DBD4" />
                    </item>
                    <item series="East North Central" source="Series">
                        <icon color="#F4E0C3" />
                    </item>
                    <item series="West North Central" source="Series">
                        <icon color="#F2F1CE" />
                    </item>
                    <item series="South Atlantic" source="Series">
                        <icon color="#D4DCE2" />
                    </item>
                    <item series="East South Central" source="Series">
                        <icon color="#C6E5E1" />
                    </item>
                </items>
            </legend>
            </chart_settings>
        </chart>
    </charts>
</anychart> 
```

似乎我在图标中放什么颜色或什么格式都没有关系（它应该接受像“red”这样的字符串和像 RGB(255, 0 ,0) 和 #FF0000 这样的格式），它总是呈现同一组颜色。我可以完全省略该部分，但它仍然不起作用。在相关的说明中，如果我将`ignore_auto_item`参数更改为 False，或者完全删除它，整个应用程序就会崩溃。

这是最后的手段，因为 AnyCharts 的傻瓜没有响应技术支持请求，他们的销售人员将我重定向到他的一个朋友，他想向我收取 150 美元/小时的费用。他们声称我的 XML 中的某些内容已损坏，但根据他们的 API 文档，我的 XML 非常好。任何建议将不胜感激。

我应该注意，我正在使用他们系统附带的 AnyChartsFlex SWC，通过自定义 Flex 应用程序运行。这个应用程序所做的只是提供一个包装器，其中包含我网站的用户需要的附加功能，并且不会以任何有意义的方式与实际图表本身混淆（只是添加几个事件侦听器），也不会在获取 XML 之前触及它到他们的图书馆进行渲染，并且完美地工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:57:26.353

我已经确认这是 AnyMaps 软件包中的一个错误。一个临时解决方案是为数据中的每个系列项目添加您想要的确切颜色，即：

```
<series name="New England" palette="divisionColorPaletteNE" type="MapRegions" color="#E5E5E5"> 
```

当我这样做时，图例最终使用了正确的颜色。因此，虽然这解决了我的直接问题，但为特定图例项设置图标颜色根本不起作用，使用 %Color 关键字为图例中的所有图标设置全局颜色也不起作用。图例项目不尊重来自调色板的颜色。

我希望其他处理这个问题的人能从我的痛苦中得到利用。

# c# - Javascript RegEx 对象双转义特殊字符

> ID：16018564
> 
> 赞同：0
> 
> 时间：2013-04-15T15:04:12.927
> 
> 标签：c#, javascript, regex

我已经检查了[http://www.w3schools.com/jsref/jsref_obj_regexp.asp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)（不是我太有希望了）和这里的各种问题都没有运气。

我需要的是一种在javascript中双重转义c#特殊字符的方法：

包含`"\b"`（退格字符）的字符串

需要更改为`"\\\\b"`（又名文字`"\\b"`）。

例如 `"foo_bar_\b"`需要成为`@"foo_bar_\\\\b"`

我的主要困难只是捕捉特殊字符， `mystring.replace(/(\[|\])/g, '\\\\$1');`这是我发现的最接近的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:18:00.367

没关系，我明白了：

`mystring.replace(/(\\)/g, '\\\\')`

（花了我足够长的时间）

# css - 使用浏览器的“缩小到页面宽度”打印

> ID：16018569
> 
> 赞同：1
> 
> 时间：2013-04-15T15:04:23.103
> 
> 标签：css, printing

这是发生了什么：
- 我的 Firefox 浏览器的“**页面设置**”设置启用了“**缩小以适应页面宽度**”选项（我认为这是默认设置）。
- 如果我进行**打印预览**并打印，**页面输出正常**（文本大小在我的打印 css 中以点为单位指定）。
- 如果我使用**javascript:self.print()**（不显示打印预览）使用 JavaScript 打印页面，打印页面的文本会**非常小**。

JavaScript 调用是否有可能绕过浏览器的 print.css？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T12:04:23.630

（正如所指出的，我以答案的形式发布解决方案，而不是评论）

我刚刚解决了这个问题。在我的内容中，有一个带有浮点数的 DIV：对。尽管在 print.css 中我将该 div 设置为 display:none，但 float:right 将其强制到打印页面的右侧，使其更宽，从而缩小整个页面以适应 - 包括文本。我将浮动设置为无，问题已解决。

# java - CSRFGuard 中的 NPE

> ID：16018574
> 
> 赞同：4
> 
> 时间：2013-04-15T15:04:40.643
> 
> 标签：java, csrf, owasp

我想保护我的应用程序免受 csrf 的影响，所以我添加 owasp.csrf.jar 并按照[此处](https://github.com/esheri3/OWASP-CSRFGuard)所述配置我的应用程序然后我将隐藏字段添加到我的带有 csrf 令牌标签的表单之一，如下所示：

```
<input type="hidden" name="<csrf:token-name/>" value="<csrf:token-value/>" /> 
```

但是当我的页面呈现时，我在**TokenNameTag.java中得到 NPE**

我错过了什么？

**更新**

堆栈跟踪：

```
2013-04-15 10:46:49,985 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/myapp].[jsp]]  Servlet.service() for servlet jsp threw exception
java.lang.NullPointerException
    at org.owasp.csrfguard.tag.TokenNameTag.doStartTag(TokenNameTag.java:45)
    at org.apache.jsp.struts.config.configurationMain_jsp._jspx_meth_csrf_005ftoken_002dname_005f0(configurationMain_jsp.java:7405)
    at org.apache.jsp.struts.config.configurationMain_jsp._jspx_meth_html_005fform_005f7(configurationMain_jsp.java:6812)
    at org.apache.jsp.struts.config.configurationMain_jsp._jspx_meth_logic_005fmatch_005f3(configurationMain_jsp.java:6695)
    at org.apache.jsp.struts.config.configurationMain_jsp._jspService(configurationMain_jsp.java:1712)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:387)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:687)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:469)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:403)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:301)
    at org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1069)
    at org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:455)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:279)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:507)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:687)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:469)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:403)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:301)
    at org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1069)
    at org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:455)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:279)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:507)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:179)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:241)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:580)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-24T12:16:59.667

我在第 45 行遇到了类似的问题`TokenNameTag.java`。这是我的堆栈跟踪

```
Stacktrace:] with root cause                                                                                                                                                                                
java.lang.NullPointerException
at java.io.Writer.write(Writer.java:157)                                                                                                                                                            
at org.owasp.csrfguard.tag.TokenNameTag.doStartTag(TokenNameTag.java:45)                                                                                                                            
at org.apache.jsp.position_005fdetails_jsp._jspx_meth_csrf_005ftokenname_005f0(position_005fdetails_jsp.java:4768) org.apache.jsp.position_005fdetails_jsp._jspService(position_005fdetails_jsp.java:1255) at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)                                                                                                                               at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)` 
```

我的问题是我没有将以下内容复制到`web.xml`文件中

```
<listener>
            <listener-class>org.owasp.csrfguard.CsrfGuardServletContextListener</listener-class>
       </listener>
       <listener>
            <listener-class>org.owasp.csrfguard.CsrfGuardHttpSessionListener</listener-class>
       </listener>
       <context-param>
             <param-name>Owasp.CsrfGuard.Config</param-name>
             <param-value>Owasp.CsrfGuard.properties</param-value>
       </context-param>

<servlet> 
     <servlet-name>JavaScriptServlet</servlet-name> 
     <servlet-class>org.owasp.csrfguard.servlet.JavaScriptServlet</servlet-class> 

    </servlet>
    <servlet-mapping>
     <servlet-name>JavaScriptServlet</servlet-name>
     <url-pattern>/JavaScriptServlet</url-pattern>
</servlet-mapping>

<filter>
        <filter-name>CSRFGuard</filter-name>
        <filter-class>org.owasp.csrfguard.CsrfGuardFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>CSRFGuard</filter-name> 
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

在我这样做之后，它对我有用。

（为了完整起见，我将补充一点，`owasp.csrfguard-3.1.0.jar`必须在`lib`目录中，并且`Owasp.CsrfGuard.properties`必须在正确的目录中，其中一种可能性是应用程序类路径 - 请参阅[https://www.owasp.org/index.php/ CSRFGuard_3_安装](https://www.owasp.org/index.php/CSRFGuard_3_Installation)）

# php - Mysql查询中的条件不起作用

> ID：16018576
> 
> 赞同：0
> 
> 时间：2013-04-15T15:04:43.713
> 
> 标签：php, mysql

我在为我的实时搜索引擎创建查询时遇到问题。

表的结构如下：

```
 street   | zipcode | city

col1.:  streetname  | 12345   | london
col1.:  otherstreet | 12345   | london 
```

我的问题如下：

当我要搜索时，`12345 london streetname`我会得到非常简单的查询的错误结果。当我回显查询时，我得到以下结果：

```
`zipcode` LIKE '12345%' AND `city` LIKE 'london%' OR `street` LIKE 'london%' AND `city` LIKE 'streetname%' OR `street` LIKE 'streetname%' 
```

我使用以下方法获取结果：

```
$where = ...

$query = $db->query("SELECT * FROM table WHERE $where");
$result = $query->num_rows;
    if ($result !== 0 ){
        echo $result;

        while ($row = $query->fetch_assoc()) {

            echo 
                $row["zipcode"], 
                ' ', 
                $row["city"]';

        }

    } 
```

对此感到好奇的是，当我将输入顺序更改为：

`streetname 12345 london`

然后我得到：

```
`city` LIKE 'streetname%' OR `street` LIKE 'streetname%' AND `city` LIKE 'london%' OR `street` LIKE 'london%' AND `zipcode` LIKE '12345%' 
```

似乎最后一个`AND`条件也有问题。当我将在该示例中更改邮政编码时：

`streetname london 12345`

没关系，即使邮政编码错误，我也会得到这个结果。

因此，如果有人可以给我提示来解决这个问题，我真的很感激。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:10:09.640

`AND`具有比 更严格的绑定优先级`OR`，因此您的第一个表达式被视为：

```
(`zipcode` LIKE '12345%' AND `city` LIKE 'london%')
OR (`street` LIKE 'london%' AND `city` LIKE 'streetname%')
OR (`street` LIKE 'streetname%') 
```

第二个被解析为：

```
(`city` LIKE 'streetname%')
OR (`Strasse` LIKE 'streetname%' AND `city` LIKE 'london%')
OR (`street` LIKE 'london%' AND `zipcode` LIKE '12345%') 
```

您需要使用显式括号来指定您实际希望组合条件的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:12:12.040

使用 parentesis 对条件进行分组，如下所示：

```
(`zipcode` LIKE '12345%' AND `city` LIKE 'london%') OR (`street` LIKE 'london%' AND `city` LIKE 'streetname%') OR `street` LIKE 'streetname%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:10:46.203

您必须在选择中隔离他们的问题...

尝试

( `zipcode`LIKE '12345%' AND `city`LIKE 'london%') OR ( `street`LIKE 'london%' AND `city`LIKE 'streetname%') OR ( `street`LIKE 'streetname%')

# java - 如何在 th:if 标记中使用 thymeleaf 有多个条件

> ID：16018577
> 
> 赞同：54
> 
> 时间：2013-04-15T15:04:44.803
> 
> 标签：java, html, spring, jstl, thymeleaf

我有一个文本可以使用**thymeleaf**以三种不同的可能颜色呈现。

所以到目前为止我为测试该值所做的代码是：

```
th:if="${evaluation} &gt; 50"
th:if="${evaluation} &lt; 30" 
```

这很好用。

但是第三个测试是针对这两者之间的值。所以我尝试了：

```
th:if="(${evaluation} &lt; 49) &and; (${evaluation} &gt; 29)" 
```

但它不起作用，我在解析时遇到了这个错误：

```
org.thymeleaf.exceptions.TemplateProcessingException: Could not parse as expression: "(${evaluation} < 49) &and; (${evaluation} > 29)" (/property.html:41) 
```

当然，这些行是在标签之间，因为前两个工作正常。

也许 and 操作数不正确，但是 thymeleaf 的文档在这些操作数上并不是很明确。

欢迎所有想法！

**更新：**我从百里香论坛得到了答案。这样做的方法是：

```
th:if="${evaluation &lt; 49 and evaluation &gt; 29}" 
```

问题解决了！

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-05-08T09:30:21.223

我从百里香论坛得到了答案。这样做的方法是：

```
th:if="${evaluation &lt; 49 and evaluation &gt; 29}" 
```

问题解决了 ！

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-10-09T13:00:11.433

这对我有用：

```
th:if="${evaluation lt 49 and evaluation gt 29}" 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-11-02T15:22:51.680

在我看来，更好和更易于维护的解决方案可能是在适当的类中编写评估代码。

```
class Evaluator{

private int value;
....

public boolean isBounded() {
    return value < 49 && value > 29;
} 
```

然后在百里香中，调用函数：

```
<p th:if="${evaluator.isBounded()} ... 
```

一些好处：

1.  更清洁的模板。
2.  java代码中的控制。
3.  隔离。可以在不更改模板的情况下编写更复杂的评估。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-07-20T15:26:09.933

我这样做是为了`th:if`在百里香中有多种条件

```
<div 
     th:if="${object.getStatus()} == 'active' and ${object.getActiveDate()}"
     th:text="${#dates.format(object.getActiveDate(), 'yyyy-MM-dd')}"
</div> 
```

我在条件之间添加了**and**运算符。如果需要，您也可以添加**或。**

# ios - 使用 CFStringGetHyphenationLocationBeforeIndex 添加连字符

> ID：16018581
> 
> 赞同：4
> 
> 时间：2013-04-15T15:04:57.733
> 
> 标签：ios, objective-c, core-text

我正在用 Core Text 制作杂志，并尝试自动在文本中添加连字符。我想我可以用这个功能做到这一点

```
CFStringGetHyphenationLocationBeforeIndex 
```

但它不起作用，我在网上找不到任何例子。

我要做的是设置文本，如果我发现任何连字符位置，我会在此处放置一个“-”并通过访问器替换文本，以便它调用 setNeedsDisplay 并从头开始重新绘制。

```
- (void) setTexto:(NSAttributedString *)texto {

    _texto = texto;

    if (self.ctFrame != NULL) {
        CFRelease(self.ctFrame);
        self.ctFrame = NULL;
    }

    [self setNeedsDisplay];
}

-(void)drawRect:(CGRect)rect {

    CGContextRef context = UIGraphicsGetCurrentContext();   
    CGContextSetTextMatrix(context, CGAffineTransformIdentity);
    CGContextScaleCTM(context, 1.0, -1.0);

    CGMutablePathRef path = CGPathCreateMutable();
    CGPathAddRect(path, NULL, self.bounds);
    CTFramesetterRef ctFrameSetterRef = CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef)(_texto));
    self.ctFrame = CTFramesetterCreateFrame(ctFrameSetterRef, CFRangeMake(0, [_texto length]), path, NULL);

    NSArray *lines = (__bridge NSArray *)(CTFrameGetLines(self.ctFrame));

    CFIndex lineCount = [lines count];
    NSLog(@"lines: %d", lines.count);

    for(CFIndex idx = 0; idx < lineCount; idx++) {

        CTLineRef line = CFArrayGetValueAtIndex((CFArrayRef)lines, idx);

        CFRange lineStringRange = CTLineGetStringRange(line);
        NSRange lineRange = NSMakeRange(lineStringRange.location, lineStringRange.length);

        NSString* lineString = [self.texto.string substringWithRange:lineRange];

        CFStringRef localeIdent = CFSTR("es_ES");
        CFLocaleRef localeRef = CFLocaleCreate(kCFAllocatorDefault, localeIdent);

        NSUInteger breakAt = CFStringGetHyphenationLocationBeforeIndex((__bridge CFStringRef)lineString, lineRange.length, CFRangeMake(0, lineRange.length), 0, localeRef, NULL);

        if(breakAt!=-1) {
            NSRange replaceRange = NSMakeRange(lineRange.location+breakAt, 0);
            NSMutableAttributedString* attributedString = self.texto.mutableCopy;
            [attributedString replaceCharactersInRange:replaceRange withAttributedString:[[NSAttributedString alloc] initWithString:@"-"]];
            self.texto = attributedString.copy;
            break;
        } else {
            CGFloat ascent;
            CGFloat descent;
            CTLineGetTypographicBounds(line, &ascent, &descent, nil);
            CGContextSetTextPosition(context, 0.0, idx*-(ascent - 1 + descent)-ascent);
            CTLineDraw(line, context);
        }
    }
} 
```

问题是它第二次进入drawRect（带有新文本）lines.count log 为0。而且我不确定这是正确的方法。

也许还有另一种修改 CTLines 的方法（在上一行的“-”之后添加剩余的字符）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-08T11:58:38.877

在创建属性字符串之前，您可以添加软连字符。那你就可以画图了。

我编写了一个类别，用于向任何字符串添加“软连字符”。这些是“-”，在渲染时不可见，而只是排队等待 CoreText 或 UITextKit 知道如何分解单词。

```
NSString *string = @"accessibility tests and frameworks checking";
NSLocale *locale = [NSLocale localeWithLocaleIdentifier:@"en_US"];
NSString *hyphenatedString = [string softHyphenatedStringWithLocale:locale error:nil];
NSLog(@"%@", hyphenatedString); 
```

输出`ac-ces-si-bil-i-ty tests and frame-works check-ing`

* * *

### NSString+SoftHyphenation.h

```
typedef enum {
    NSStringSoftHyphenationErrorNotAvailableForLocale
} NSStringSoftHyphenationError;

extern NSString * const NSStringSoftHyphenationErrorDomain;
extern NSString * const NSStringSoftHyphenationToken;

@interface NSString (SoftHyphenation)

- (BOOL)canSoftHyphenateStringWithLocale:(NSLocale *)locale;
- (NSString *)softHyphenatedStringWithLocale:(NSLocale *)locale error:(out NSError **)error;

@end 
```

### NSString+SoftHyphenation.m

```
#import "NSString+SoftHyphenation.h"

NSString * const NSStringSoftHyphenationErrorDomain = @"NSStringSoftHyphenationErrorDomain";
NSString * const NSStringSoftHyphenationToken = @"­"; // NOTE: UTF-8 soft hyphen!

@implementation NSString (SoftHyphenation)

- (BOOL)canSoftHyphenateStringWithLocale:(NSLocale *)locale
{
    CFLocaleRef localeRef = (__bridge CFLocaleRef)(locale);
    return CFStringIsHyphenationAvailableForLocale(localeRef);
}

- (NSString *)softHyphenatedStringWithLocale:(NSLocale *)locale error:(out NSError **)error
{
    if(![self canSoftHyphenateStringWithLocale:locale])
    {
        if(error != NULL)
        {
            *error = [self hyphen_createOnlyError];
        }
        return [self copy];
    }
    else
    {
        NSMutableString *string = [self mutableCopy];
        unsigned char hyphenationLocations[string.length];
        memset(hyphenationLocations, 0, string.length);
        CFRange range = CFRangeMake(0, string.length);
        CFLocaleRef localeRef = (__bridge CFLocaleRef)(locale);

        for(int i = 0; i < string.length; i++)
        {
            CFIndex location = CFStringGetHyphenationLocationBeforeIndex((CFStringRef)string, i, range, 0, localeRef, NULL);

            if(location >= 0 && location < string.length)
            {
                hyphenationLocations[location] = 1;
            }
        }

        for(int i = string.length - 1; i > 0; i--)
        {
            if(hyphenationLocations[i])
            {

                [string insertString:NSStringSoftHyphenationToken atIndex:i];
            }
        }

        if(error != NULL) { *error = nil; }

        // Left here in case you want to test with visible results
        // return [string stringByReplacingOccurrencesOfString:NSStringSoftHyphenationToken withString:@"-"];
        return string;
    }
}

- (NSError *)hyphen_createOnlyError
{
    NSDictionary *userInfo = @{
                               NSLocalizedDescriptionKey: @"Hyphenation is not available for given locale",
                               NSLocalizedFailureReasonErrorKey: @"Hyphenation is not available for given locale",
                               NSLocalizedRecoverySuggestionErrorKey: @"You could try using a different locale even though it might not be 100% correct"
                               };
    return [NSError errorWithDomain:NSStringSoftHyphenationErrorDomain code:NSStringSoftHyphenationErrorNotAvailableForLocale userInfo:userInfo];
}

@end 
```

希望这可以帮助 ：）

# gwt - GWT - 如何部署语言环境属性文件？

> ID：16018583
> 
> 赞同：0
> 
> 时间：2013-04-15T15:05:06.750
> 
> 标签：gwt, tomcat, deployment, ant, internationalization

请帮助...这是我第一次部署国际化 GWT 应用程序。我在“共享”源文件夹中有 3 个语言环境属性文件：

*   com.blabla.shared
    *   字符串常量.java
    *   StringConstants.properties
    *   StringConstants_fr.properties
    *   StringConstants_es.properties

在开发模式下运行时，使用 '&locale=fr' 语法更改区域设置没有问题。但是，一旦我使用 Ant 构建并在 Tomcat 上部署，尝试执行相同操作时会出现 404 错误。

似乎属性文件没有正确插入到war文件中。谁能解释一下这些文件应该放在哪里以及是否需要做其他事情来链接它们？

非常感谢，黎明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:07:59.110

您是否尝试指定

```
<meta name="gwt:property" content="locale=fr"> 
```

在您的主机页面中（如此[处](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale#LocaleSpecifying)所述）？至少它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T20:04:17.360

正如 Boris 所说，这些本地化的属性文件（例如 StringConstants_fr.properties）实际上并没有部署到服务器本身。相反，GWT 使用这些文件（仅在 GWT 编译时）以 46903BA33EA6F7A2F0D44EC84020A45D.cache.html (MD5+.cache.html) 的形式编译特定的浏览器/区域设置排列。这些文件包含您的所有应用程序代码，以及嵌入其中的本地化字符串。对于要编译的每个浏览器/语言环境，您都将拥有这些排列文件之一。

例如：

```
<set-property name="user.agent" value="opera,safari,ie9,ie8,ie6,gecko1_8"/>
<extend-property name="locale" values="en"/>
<extend-property name="locale" values="es"/> 
```

将为您提供 12 种排列（6 个浏览器，每个浏览器有 2 个语言环境）。您的战争文件中将有 12 个这样的 MD5+.cache.html 文件。您可以对本地化字符串文字执行快速文件搜索，以查看它确实嵌入在其中一个文件中。

此外，您在 WEB-INF/classes 目录中看到您的 StringConstants_fr.properties 文件这一事实是您的 Ant 构建和/或 eclipse 输出指令的产物。那些不应该在那里。它们不会伤害任何东西，但会在您的战争文件中增加不必要的体积。修改您的 Ant 构建以将它们保留在源目录中。

希望有帮助...

# python - 使用正则表达式提取字符串

> ID：16018588
> 
> 赞同：0
> 
> 时间：2013-04-15T15:05:20.507
> 
> 标签：python, regex, string, parsing

我有以下输入字符串

```
input= """href="http://www.sciencedirect.com/science/article/pii/S0167923609002097" onmousedown="return scife_clk(this.href,'','res','2')">Using <b>text mining </b>and sentiment analysis for online forums hotspot detection and forecast</a></h3><div class="gs_a">N Li, <a href="/citations?
    href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3309177/" onmousedown="return scife_clk(this.href,'ggp','res','1')">How to link ontologies and protein–protein interactions to literature: <b>text</b>-<b>mining </b>approaches and the BioCreative experience</a></h3><div class="gs_a"><a href="/citations?
    href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3309177/" onmousedown="return scife_clk(this.href,'gga','gga','1')"><span class="gs_ggsL"><span class=gs_ctg2>[HTML]</span> from nih.gov</span><span class="gs_ggsS">nih.gov <span """ 
```

我想从中提取以下输出：

```
>> Using <b>text mining </b>and sentiment analysis for online forums hotspot detection and forecast
>> How to link ontologies and protein–protein interactions to literature: <b>text</b>-<b>mining </b>approaches and the BioCreative experience 
```

我正在尝试在 python 中使用 re 包，但我不清楚要使用什么正则表达式，因为有几种模式，例如：

```
(this.href,'','res','2')"> or (this.href,'ggp','res','2')"> or (this.href,'gga','gga','2')"> 
```

我正在使用这个正则表达式：

```
=re.search(r"(this.href,'ggp.?','res','.?/D')" 
```

但这对我不起作用。谁能告诉我要使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:02:38.043

这适用于您的示例：

```
input= """\
href="http://www.sciencedirect.com/science/article/pii/S0167923609002097" onmousedown="return scife_clk(this.href,'','res','2')">Using <b>text mining </b>and sentiment analysis for online forums hotspot detection and forecast</a></h3><div class="gs_a">N Li, <a href="/citations?
href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3309177/" onmousedown="return scife_clk(this.href,'ggp','res','1')">How to link ontologies and protein–protein interactions to literature: <b>text</b>-<b>mining </b>approaches and the BioCreative experience</a></h3><div class="gs_a"><a href="/citations?
href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3309177/" onmousedown="return scife_clk(this.href,'gga','gga','1')"><span class="gs_ggsL"><span class=gs_ctg2>[HTML]</span> from nih.gov</span><span class="gs_ggsS">nih.gov <span """

import re

for line in input.splitlines():
    m=re.search(r'onmousedown=.*?">(.*)</a>',line)
    if m:
        print(m.group(1)) 
```

印刷：

```
Using <b>text mining </b>and sentiment analysis for online forums hotspot detection and forecast
How to link ontologies and protein–protein interactions to literature: <b>text</b>-<b>mining </b>approaches and the BioCreative experience 
```

请记住，将正则表达式与 HTML 一起使用可能是一个雷区（或思维场！），通常建议使用解析器。但是使用片段，你可以让它工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T16:03:44.487

使用一个像样的 HTML 解析器会好得多。[以 BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)为例：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(input)

for link in soup.find_all('a', onmousedown=True):
    print link.text 
```

它查找`<a>`具有`onmousedown`属性的所有元素。

# unit-testing - 如何测试文件是否保持不变？

> ID：16018590
> 
> 赞同：1
> 
> 时间：2013-04-15T15:05:22.490
> 
> 标签：unit-testing, language-agnostic

我正在测试一个*可能*修改文件的函数。在我想要的情况下，我如何测试它是否保持不变？

*   我不想检查内容，因为文件可能已经被相同的内容覆盖，改变了修改时间。
*   我也无法真正检查修改时间。由于我喜欢独立的测试，原始文件将在（非）修改测试之前编写，从而使修改时间不可靠。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T15:13:15.723

您可以使用 DI 来模拟您的文件编写器。这样你根本不需要文件，只检查是否调用了 write 函数并且你知道文件是否被修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:16:01.400

我会将函数拆分为两个单独的函数；第一个决定是否应该进行修改，第二个发出通知。第二个仅在必要时调用。假装语言：

```
function bool IsModificationRequired()
{
    // return true or false based on your actual code
}

function void WriteFile()
{
    new File().Write("file");
}

function void WriteIfModified()
{
    if (IsModificationRequired())
        WriteFile();

} 
```

并测试

```
Assert.IsTrue(IsModificationRequired()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:52:05.293

假设您使用的是文本文件且大小合理。只需对文件内容进行哈希处理，如果修改之前和修改后的哈希码相同，则表示文件内容未更改。

这是 Algorithim 设计手册的链接 - Steve Skiena（Google 图书结果）第 3.8 节 [我如何说服您文件未更改？](http://books.google.com/books?id=7XUSn0IKQEgC&lpg=PA92&ots=z7bIKTIM2f&dq=skiena%20compare%20the%20few%20documents%20sharing%20the%20exact%20hash%20code%20with%20little&pg=PA93#v=onepage&q=skiena%20compare%20the%20few%20documents%20sharing%20the%20exact%20hash%20code%20with%20little&f=false)

# c# - 在 ASP.NET 中使用任务

> ID：16018595
> 
> 赞同：2
> 
> 时间：2013-04-15T15:05:43.977
> 
> 标签：c#, multithreading, task-parallel-library, task

我正在尝试在`System.Threading.Tasks.Task`课堂上完成一些异步工作。场景很简单。我有一个网络应用程序，在一个按钮单击事件中，我启动了一个任务，该任务必须运行几分钟来检查一些外部服务。这不是一项繁重的任务。它所要做的就是每 5 秒发送一次请求并获得响应。但它必须至少持续几分钟。所以，我不希望用户等到这个任务完成。在我开始任务后，我立即回复用户说任务已开始，完成后会通知他/她。我想知道我创建的这个任务是否会导致任何问题，因为我返回并结束了 HTTP 响应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T15:47:35.650

这种类型的“异步工作”是不可能通过使用`Task`类型来实现的。正如我在博客中提到的，[`async`不会更改 HTTP 协议](http://blog.stephencleary.com/2012/08/async-doesnt-change-http-protocol.html)；每个请求您仍然会得到一个响应，就是这样！

理想的 ASP.NET 应用程序不会在请求/响应对之外执行任何工作。有一些方法可以使它工作[（也在我的博客中描述）](http://blog.stephencleary.com/2012/12/returning-early-from-aspnet-requests.html)，但几乎从不推荐。

正确的解决方案是拆分处理。网站（或服务）应通过将请求放入持久存储（例如，Azure 队列）来*开始*处理，单独的工作服务（例如，Azure 工作角色/Win32 服务）将进行轮询并将结果放入持久存储（例如，Azure 表），并且网站/服务可以轮询它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:09:26.760

您可以考虑使用基于消息的服务总线，关于 MSDN[使用 NHibernate 和 Rhino 服务总线构建分布式应用程序](http://msdn.microsoft.com/en-us/magazine/ff796225.aspx)的一个很好的教程将非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:12:22.483

如果您只是从标准的 asp.net 请求返回，那么您不会期望 HttpResponse 结束吗？启动任务本身不会保持 HttpResponse 打开，您需要流式传输响应并在服务器上阻塞，直到您的任务完成，这可能不是您想要做的？

也许您应该查看客户端上的一些 ajax，这些 ajax 会定期 ping 服务器以查看任务是否已完成，或者如果您知道您的浏览器将支持它，请查看 HTML 5 推送通知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T15:12:49.763

您可以使用此[http://www.asp.net/web-forms/tutorials/aspnet-45/using-asynchronous-methods-in-aspnet-45](http://www.asp.net/web-forms/tutorials/aspnet-45/using-asynchronous-methods-in-aspnet-45)但恕我直言 ajax 与 Web 服务要好得多

# angularjs - AngularJS：端到端测试问题

> ID：16018597
> 
> 赞同：0
> 
> 时间：2013-04-15T15:05:46.610
> 
> 标签：angularjs, karma-runner

我正在尝试为我的应用程序创建端到端测试。我刚刚进行了一个基本测试，它工作正常。

```
it('should not show any criterias when the application loads initially', 
    function() {
        expect(repeater('.new-criteria').count()).toBe(0);
}); 
```

上述测试工作正常。

现在，我正在`ng-repeat`对元素使用指令。每次单击按钮时，此重复的数组都会增加 1 个计数。因此，我编写了以下测试：

```
it('should show one criteria when the user adds a criteria', function() {
    element('.add-criteria').click();
    expect(repeater('.new-criteria').count()).toBe(1);
}); 
```

我正在使用 runner.html（可以在 AngularJS 端到端教程中找到）。当我加载页面时，第一次测试是成功的。但是，第二次测试导致以下错误：

```
Selector .add-criteria did not match any elements. 
```

我确实有一个带有类的按钮，`add-criteria`如下所示：

```
 <button type="button" class="btn btn-inverse add-criteria" ng-click="addNewCriteria()">
        <i class="icon-plus-sign icon-white"></i> 
        Add a new criteria
    </button> 
```

然而，测试失败了。如果我删除`.add-criteria`并用 替换它`.new-criteria`，即使这样我也会得到同样的错误。不知何故，`repeater()`能够获得正确的元素，但`element()`报告找不到匹配选择器的元素。

知道出了什么问题吗？

**编辑：**我想在这里补充一下，我正在使用 AngularJS 和 Node / Express。[我的目录结构与angular-express-seed](https://github.com/btford/angular-express-seed)中的目录结构相同。我发现问题的发生是因为 CSS 和 JS 文件位于 public 文件夹中，而 HTML 页面位于 views 文件夹中。**将 CSS 和 JS 文件复制到 views 文件夹解决了我的问题**如何在不复制到 views 文件夹的情况下实现此目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:57:57.923

[Angular Express Seed](https://github.com/btford/angular-express-seed)已经有一段时间没有更新了。它没有当前版本的[angular-seed](https://github.com/angular/angular-seed)中的任何测试功能，如Github 页面上的[issue #9所示。](https://github.com/btford/angular-express-seed/issues/9)因此，我不知道您尝试运行的测试来自哪里。

我建议将项目的客户端 AngularJS 部分与服务器端 Node.js/Express 部分分离。在开发过程中使用官方的[angular-seed](https://github.com/angular/angular-seed)项目。它包括一个简单的 Node.js 服务器，该服务器已经为本地开发和测试进行了预配置。它大大简化了事情。

当您想将 AngularJS 投入生产时，只使用您方便的选项提供您需要的文件：Apache、nginx、Express Node.js 服务器。你的选择。如果您决定仍然使用 Express 解决方案，那么快速的 google/SO 搜索将提供大量关于提供静态文件和重定向到 index.html 的资源。之前已经讨论过，解决方案并不复杂。

这个答案显然不能解决您似乎遇到的问题，但我们需要比您提供的更多信息。如果您阐明了如何构建开发环境（当 angular-express-seed 不包含测试时，您如何运行测试？），那么我们可能会为您似乎遇到的路由问题提供解决方案。目录结构、`app.js`代码等会有所帮助。

# javascript - 如何在从父窗口创建的 iframe 加载处理程序中获取对 iframe 窗口对象的引用

> ID：16018598
> 
> 赞同：62
> 
> 时间：2013-04-15T15:05:47.690
> 
> 标签：javascript, html, dom, iframe

## 在我粘贴任何代码之前，这是场景：

1.  我有一个使用 JavaScript 创建一个空 iframe 的 HTML 文档
2.  JavaScript 创建一个函数并将对该函数的引用附加到 iframe 的文档对象（`doc.open()`用于获取对文档的引用）
3.  `onload`然后将该函数作为iframe 文档的处理程序附加（通过写入`<body onload="...">`iframe.

现在让我感到困惑的是，onload 处理程序中的全局（窗口）和文档对象（在它运行时）与通过脚本节点添加的 JavaScript 运行的相同对象不同。

## 这是HTML：

```
<!doctype html>
<html>
<head>
<script>
(function(){
  var dom,doc,where,iframe;

  iframe = document.createElement('iframe');
  iframe.src="javascript:false";

  where = document.getElementsByTagName('script')[0];
  where.parentNode.insertBefore(iframe, where);

  doc = iframe.contentWindow.document;

  var _doc = document;

  doc.open()._l=function() {
    // the window object should be the one that doc is inside
    window.vanishing_global=new Date().getTime();

    var js = this.createElement("script");
    js.src = 'test-vanishing-global.js?' + window.vanishing_global;

    window.name="foobar";
    this.foobar="foobar:" + Math.random();
    document.foobar="barfoo:" + Math.random();

    // `this` should be the document object, but it's not
    console.log("this == document: %s", this == document);
    console.log("this == doc:      %s", this == doc);

    // the next two lines added based on @Ian's comment below
    console.log("_doc == document: %s", _doc == document);
    console.log("_doc == doc:      %s", _doc == doc);

    console.log("name: " + window.name + "\n" + "window.vanishing_global: " + window.vanishing_global + "\ntypeof window.vanishing_global: " + typeof window.vanishing_global + "\ndocument.foobar: " + document.foobar);
    this.body.appendChild(js);
  };
  doc.write('<body onload="document._l();"></body>');
  doc.close();
})();
</script>
</head>
<body>
</body>
</html> 
```

## 这是`test-vanishing-global.js`：

```
console.log("name: " + window.name + "\n" + "window.vanishing_global: " + window.vanishing_global + "\ntypeof window.vanishing_global: " + typeof window.vanishing_global + "\ndocument.foobar: " + document.foobar); 
```

## 指示：

将这两个文件放入一个目录，然后在浏览器中打开 HTML（在最新的 Chrome 和 Firefox 中测试，两者结果相同）。

## 这是我得到的输出：

```
this == document: false
this == doc:      true
_doc == document: true
_doc == doc:      false

name: foobar
window.vanishing_global: 1366037771608
typeof window.vanishing_global: number
document.foobar: barfoo:0.9013048021588475

name: 
window.vanishing_global: undefined
typeof window.vanishing_global: undefined
document.foobar: foobar:0.5015988759696484 
```

处理程序内的`this`对象应该是文档对象。它*是*一个文档对象，但与它在其中运行的文档不同（它也与父文档不同）。处理程序中的 window 对象也与页面中加载的 JavaScript 中运行的 window 对象不同。

## 所以最后我的问题：

有谁知道发生了什么，以及如何获得对实际窗口对象的引用，或者至少从同一个全局上下文中声明和引用全局变量？

## 脚注：

此 iframe 不存在跨域问题，因为它们位于同一域中。如果有人设置 会出现问题`document.domain`，但在此示例代码中没有这样做。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-04-15T15:56:18.500

您在父页面中声明所有内容。所以对父页面的引用`window`和`document`是对父页面的引用。如果您想对`iframe`'s 做一些事情，请使用`iframe || iframe.contentWindow`访问其`window`，并`iframe.contentDocument || iframe.contentWindow.document`访问其`document`.

有一个词表示正在发生的事情，可能是“词法范围”：[什么是词法范围？](https://stackoverflow.com/questions/1047454/what-is-lexical-scope)

范围的唯一上下文是 this。在您的示例中，该方法的所有者是`doc`，即`iframe`'s `document`。除此之外，在此函数中使用已知对象访问的任何内容都是父对象（如果未在函数中声明）。如果函数是在不同的地方声明的，但它是在父页面中声明的，那将是另一回事。

我会这样写：

```
(function () {
  var dom, win, doc, where, iframe;

  iframe = document.createElement('iframe');
  iframe.src = "javascript:false";

  where = document.getElementsByTagName('script')[0];
  where.parentNode.insertBefore(iframe, where);

  win = iframe.contentWindow || iframe;
  doc = iframe.contentDocument || iframe.contentWindow.document;

  doc.open();
  doc._l = (function (w, d) {
    return function () {
      w.vanishing_global = new Date().getTime();

      var js = d.createElement("script");
      js.src = 'test-vanishing-global.js?' + w.vanishing_global;

      w.name = "foobar";
      d.foobar = "foobar:" + Math.random();
      d.foobar = "barfoo:" + Math.random();
      d.body.appendChild(js);
    };
  })(win, doc);
  doc.write('<body onload="document._l();"></body>');
  doc.close();
})(); 
```

`win`和`doc`as`w`和as的别名`d`不是必需的，它可能会因为对范围的误解而减少混淆。这样，它们是参数，您必须引用它们才能访问`iframe`'s 的东西。如果你想访问父母的，你仍然使用`window`and `document`。

我不确定将方法添加到 a `document`(在这种情况下) 的含义是什么，但将方法设置为 on`doc`可能更有意义。这样，事情可以在没有前缀的情况下运行......例如`_l``win``<body onload="_l();"></body>`

# autocomplete - 哈哈，我可以用两个字母来自动完成

> ID：16018600
> 
> 赞同：0
> 
> 时间：2013-04-15T15:05:54.017
> 
> 标签：autocomplete

我想问你关于自动完成的问题，我可以做些什么来让自动完成接受小号和大号字母，因为在我的情况下，当我按“a”时，这个结果不是“阿尔卡特”，而是这个“阿尔卡莱特”可以

```
public List<String> complete(String query) {  
        List<String> results = new ArrayList<String>();  

        for (int i = 0; i<list.size(); i++) {  

            if(list.get(i).getNomFabricant().contains(query))
            results.add(list.get(i).getNomFabricant());  
        }  

        return results;  
    }  

     <h:outputLabel value="Nom Fabricant :" for="nom" />  
     <p:autoComplete id="nom" value="#{fabricantbean.selcetitem.nomFabricant}" completeMethod="#{fabricantbean.complete}"/> 
```

# javascript - MongoDB：按日期排序将空字段视为较早的日期

> ID：16018601
> 
> 赞同：2
> 
> 时间：2013-04-15T15:05:55.813
> 
> 标签：javascript, node.js, mongodb, sorting, mongoose

Mongoose 架构包括：

```
{
  dueDate: { type: Date, required: false }
} 
```

我的目标是获取按dueDate 排序的文档，其中最早的日期在顶部，然后是其他没有dueDate 的文档。我的问题是不需要截止日期，因此没有截止日期的文档会排在具有有效日期的文档之上。

这就是我对其进行排序的方式（node.js 和 mongoose.js）：

```
query.sort({ dueDate: 'asc' }); 
```

我主要是在寻找一种内置的方法来做到这一点；我已经通过组合查询实现了一个 hack。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-03T06:11:24.997

这是日期类型的解决方法，每个此类日期字段需要 1 个附加字段进行排序（此解决方案也可用于数字）

1.  在这个新字段中存储非空日期（或数字的 -ve）的**负纪元**。

2.  按日期升序排序意味着**按此 -ve epoch 降序排序**。Nulls 将在最后，因为这是 MongoDB 按降序对数据进行排序的方式。实际日期（或数字）字段将按升序显示，最后为空。

3.  如果在按降序对日期（或数字）进行排序时需要空值，请按原始日期（或数字）字段而不是 -ve epoch 进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T02:46:06.800

没有内置的方法可以做到这一点。[有一张票可以让助手可以做定制的排序功能，这是计划但没有计划： https](https://jira.mongodb.org/browse/SERVER-153) ://jira.mongodb.org/browse/SERVER-153

检查这个线程：[有没有办法在使用 mongodb/mongoid 排序时将所有 nil 值放在最后？](https://stackoverflow.com/questions/9201981/is-there-a-way-to-put-all-the-nil-value-at-the-end-when-sorting-with-mongodb-mon)

问候， 莫西

# hadoop - Hadoop 安装 - Datanode 正在运行，但未在 JPS 中显示

> ID：16018604
> 
> 赞同：1
> 
> 时间：2013-04-15T15:06:03.200
> 
> 标签：hadoop, cloudera

我已经在 2 节点集群上安装了 CDH3U5。一切似乎都运行良好，例如所有服务、Web UI、MR 作业、HDFS shell 命令。然而，有趣的是，当我启动 datanode 服务时，它给了我一条 OK 消息，表明 datanode 正在作为进程运行，比如 X。但是当我运行 JPS 时，我没有看到进程的标签“Datanode”。所以输出看起来像 -

```
17153 TaskTracker
18908 Jps
16267 
```

进程 ID - 16267 是 Datanode 进程。其他所有检查点均已通过。所以这看起来很奇怪。同样的事情发生在集群中的另一个节点上。对此行为的任何见解以及是否需要修复都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:34:12.813

```
您可以检查以下内容并回复吗？
- namenode 的 Web 界面以及它在 livenode 上显示的内容
- 数据节点的日志文件以查看是否有任何异常
- 如果 datanode 可以从 namenode ping/ssh，反之亦然

如果以上所有内容都正常，我不确定问题是什么，但可以解决
- 停止所有 hadoop 守护进程
- 删除 conf/core-site.xml 中指向 NN 和 DN 的临时目录
- 格式化名称节点
- 启动守护进程

```

# neo4j - Cypher UNION 查询

> ID：16018607
> 
> 赞同：2
> 
> 时间：2013-04-15T15:06:10.067
> 
> 标签：neo4j, union, cypher

我有一个简单的下图：
[http ://console.neo4j.org/?id=v0cvwn](http://console.neo4j.org/?id=v0cvwn)

我想知道为什么下面的查询：

```
 START n=node(2) 
 match n-[:KNOWS]-node 
 return node.name as name 
 UNION 
 START n=node(2) 
 match n-[:ACTS_IN]-node 
 return node.name as name 
```

抛出异常：

```
java.lang.AssertionError: assertion failed: Can't profile the same pipe twice
at scala.Predef$.assert(Predef.scala:179)
at org.neo4j.cypher.internal.profiler.Profiler.decorate(Profiler.scala:47)
at org.neo4j.cypher.internal.pipes.Pipe$class.createResults(Pipe.scala:35)
at org.neo4j.cypher.internal.pipes.NullPipe$.createResults(Pipe.scala:47)
at org.neo4j.cypher.internal.pipes.PipeWithSource.createResults(Pipe.scala:61)
at org.neo4j.cypher.internal.pipes.PipeWithSource.createResults(Pipe.scala:61)
at org.neo4j.cypher.internal.pipes.PipeWithSource.createResults(Pipe.scala:61)
at org.neo4j.cypher.internal.pipes.UnionIterator.loadNextIterator$1(UnionIterator.scala:60)
at org.neo4j.cypher.internal.pipes.UnionIterator.step$1(UnionIterator.scala:68)
at org.neo4j.cypher.internal.pipes.UnionIterator.stepIfNeccessary(UnionIterato 
```

**关于 UNION 的几个问题：**

作为先前子查询中 UNION 的结果，是否可以对结果集中累积的所有数据执行另一个最终匹配子句？

是否可以根据该数据执行订单？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:26:35.520

根据这些 github 评论，`UNION`仅支持 2.0 或更高版本。

[https://github.com/neo4j/neo4j/issues/125](https://github.com/neo4j/neo4j/issues/125)

# c# - CredentialPickerResults 调用后跳过的代码

> ID：16018610
> 
> 赞同：1
> 
> 时间：2013-04-15T15:06:20.877
> 
> 标签：c#, windows, windows-store-apps

在进行 CredentialPickerResults 调用后，我的代码被跳过。登录界面不显示，代码跳转到下一个函数，没有完成当前函数中的代码。

它完全跳过 Global.strUsername = credResults.CredentialUserName 和密码，直接进入 GetData() 函数。

```
public MainPage()
{
        this.InitializeComponent();
        GetCredentials();
        GetData();
}

private async void GetCredentials()
{
    CredentialPickerOptions credOptions = new CredentialPickerOptions()
    {
         AuthenticationProtocol = AuthenticationProtocol.Basic,
         CredentialSaveOption = CredentialSaveOption.Selected,
         CallerSavesCredential = true,
         Caption = "Login",
         Message = "Please enter your credentials",
         TargetName = ".",
    };

    CredentialPickerResults credResults = await CredentialPicker.PickAsync(credOptions);

    Global.strUsername = credResults.CredentialUserName;
    Global.strPassword = credResults.CredentialPassword;
}

private async void GetData() 
{
    //get data
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:58:26.820

您需要返回`await`。`GetCredentials`使用您当前的代码，您只需以“即发即弃”的方式异步启动它，然后转到`GetData`. 这就是为什么在完成`GetData`之前执行`GetCredentials`。

您应该首先更改两者的签名`GetCredentials`并`GetData`返回`Task`˙以便您可以等待它们。

```
private async Task GetCredentials()
{
    // get credentials
}

private async void GetData() 
{
    // get data
} 
```

由于您不能在构造函数中等待异步调用，因此您可以使用一个辅助函数来解决这个问题，您将在“即发即弃”模式下调用该函数，但在其中等待其他调用：

```
public MainPage()
{
    this.InitializeComponent();
    Init();
}

public async void Init()
{
    await GetCredentials();
    await GetData();
} 
```

这样，您应该能够实现所需的行为。

# ios - 在情节提要中创建自定义 UIBarButtomItem

> ID：16018623
> 
> 赞同：1
> 
> 时间：2013-04-15T15:06:55.930
> 
> 标签：ios, storyboard, uibarbuttonitem

我需要在导航栏中自定义“设置”按钮。但是，不幸的是，我无法正确进入情节提要编辑器。我只需要查看我的图片，没有按钮矩形。

![在此处输入图像描述](https://i.stack.imgur.com/dkSUB.png)

有没有办法正确地使用某种按钮？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:10:19.863

`-viewDidLoad`您可以在 ViewController方法中添加此代码：

对于左栏按钮：

```
UIButton *leftButton = [UIButton buttonWithType:UIButtonTypeCustom];
UIImage *buttonImage = [UIImage imageNamed:@"NavBarMapBtn.png"];
[leftButton setImage:buttonImage forState:UIControlStateNormal];
leftButton.frame = CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height);
[leftButton addTarget:self action:@selector(changeView) forControlEvents:UIControlEventTouchUpInside];
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:leftButton]; 
```

或右栏按钮：

```
UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeCustom];
UIImage *buttonImage = [UIImage imageNamed:@"NavBarMapBtn.png"];
[rightButton setImage:buttonImage forState:UIControlStateNormal];
rightButton.frame = CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height);
[rightButton addTarget:self action:@selector(changeView) forControlEvents:UIControlEventTouchUpInside];
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:rightButton]; 
```

无需在 xib 或情节提要中将 BarButtonItem 添加到您的视图中。

这是它的样子：

![在此处输入图像描述](https://i.stack.imgur.com/majoB.png)

# ruby-on-rails - 可以处理多个表和列名的 Rails 方法

> ID：16018624
> 
> 赞同：0
> 
> 时间：2013-04-15T15:07:07.917
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, ruby-2.0

希望你们一切都好！

我有一个一般性的询问，我想知道是否有善良的灵魂可以提供帮助？目前这确实是一个好奇的问题，但我觉得它可能是未来非常有用的信息片段。

是否可以编写一个可以传递表名和属性（列）名称并对其执行操作的方法？我想这种方法的主要用途是在对表进行重复操作时保持代码干燥。

作为一个例子（虽然完全是一个玩具例子）假设我有一个方法：

```
def switch(table_name, column_name)
    #do some operation on table_name.column_name
end 
```

我已经弄清楚如何通过执行以下操作来访问表：

```
def model_for_table(table_name) 
    table_name.to_s.classify.constantize 
end 
```

这将采用 underscored_lowercase_string 并返回表名，这样`model_for_table("registered_user").find(1)`虽然在表名可以被硬编码的情况下这是不必要的

但它不像`model_for_table("registered_user").column_name`上面例子中使用的那样。是否有类似于`model_for_table`上面提供的将字符串转换为属性名称的方法？

有谁知道我怎么能实现这个？有可能吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:19:11.150

问题是您需要一个正在处理的模型的实例才能访问列。如果您有 RegisteredUser 模型，请尝试（在 Rails 控制台中）`RegisteredUser.id`（或任何属性名称）。它行不通。但是，如果您这样做了`RegisteredUser.first.id`（假设您保存了一个），它将起作用。

所以这取决于你想要完成什么。如果您的`switch`方法旨在对您的模型实例做一些事情，那么这仍然可以工作。

```
def switch(table_name, column_name)
  model = model_for_table(table_name)
  model.all.each do |model_instance|
    puts "model_instance #{column_name} is #{model_instance.send(column_name)}"
  end
end 
```

注意：该`send`方法接受一个符号或一个字符串，并在调用它的实例上执行具有该名称的方法。这是一个普通的 Ruby 事情，而不是 Rails 事情。

请记住，您的`model_for_table`方法返回的是类，而不是实例。

# ruby-on-rails-3 - 设计注销被拦截

> ID：16018625
> 
> 赞同：0
> 
> 时间：2013-04-15T15:07:08.137
> 
> 标签：ruby-on-rails-3, devise

我正在使用 Devise 测试我的网站，我发现如果我在 Devise 注销后拦截重定向，同时调用“销毁”方法，我仍然可以使用后退按钮并重新登录系统.

更多细节：

1）我正在使用带有以下选项的设计：：database_authenticable，：recoverable，：trackable，：validatable，：lockable，：timeoutable，：password_archivable，：maximum_attempts => 4，：unlock_strategy =>：none。另外，我使用了 sign_out_all_scopes 的默认设置（true）。

2) 我正在使用 Burp Proxy 拦截从服务器返回到浏览器的调用。

3）我的Session Controller Destroy方法如下：

```
def destroy
  Rails.logger.info "RESETTING SESSION"
  reset_session

  Rails.logger.info "DESTROYING DEVISE SESSION"
  super
  Rails.logger.info "DONE WITH DEVISE"    
end 
```

日志调用仅适用于我，我也尝试过使用和不使用 reset_session。

4）我以用户身份登录，然后单击我的注销调用，我看到在 Web 服务器上调用了 Destroy 方法（查看日志），但我拦截了对浏览器的调用。

5) 单击后退按钮，我可以返回站点，并且可以像从未退出过一样导航它。

在我看来，尽管在幕后调用了 Warden 的注销，但它实际上会做任何事情，除非 cookie 在浏览器上被销毁。再仔细看看，似乎 Devise 或 Warden 在注销时对数据库没有做任何事情，这意味着注销但不破坏 cookie 无论如何都不会产生任何影响。

我对 Rails 比较陌生，对 Devise 也很陌生，所以我只是错过了什么吗？

编辑：所以在与 Billy Chen 进行了简短的交谈之后，我似乎没有做错任何事，这就是 Devise/Warden 的工作方式。

我很好奇有人如何为他们希望确保注销真的注销用户的网站解决这个问题？在登录/注销时更新的用户对象上添加状态会很容易，但我很好奇为什么在当前设计中没有这样做的选项（即使它只是可选的）。

编辑2：

解决了这个问题。尽管在 User 模型中没有打开 :rememberable，但 devise.rb 文件有“config.use_salt_as_remember_token = true”，删除它可以解决问题。如果模型不允许记忆，不完全确定为什么应该使用该配置，但至少问题得到了解决。

编辑 3：

显然我是个骗子，我刚刚错过了拦截 burp 代理中的响应，这不是固定的。重新测试表明这仍然是一个问题。通过使用密钥标记用户并在注销时将其删除来修复它。一个黑客，但它应该解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:53:16.310

“销毁”是销毁会话，而不是用户。那么为什么要在这个“破坏”动作中进行数据库操作呢？

当用户登录时，他在登录页面中填写电子邮件和密码，也就是“Session#new”。

当他点击“登录”按钮时，请求被发送到“Session#create”。如果登录信息正确，则会话建立。服务器发送一个包含会话 id 的 cookie，该 cookie 是包含用户 id 的散列。

此后，对于该用户的每个请求，他的浏览器都会连同该 cookie 一起发送请求。服务器解码此哈希并从数据库加载用户 ID。

如果他想注销，他将点击“注销”按钮，该按钮将向“Session#destroy”发送“DELETE”请求，然后服务器将要求他的浏览器从该 cookie 中删除密钥/ID。

现在会话被破坏了。该用户不能再访问登录用户的受保护资源，因为他此后发送的请求将不包含他的有效用户信息。

这基本上就是它的工作原理。您可以在此处查看详细信息：http: [//guides.rubyonrails.org/security.html](http://guides.rubyonrails.org/security.html)

# regex - .htaccess 不带查询参数的重定向

> ID：16018626
> 
> 赞同：1
> 
> 时间：2013-04-15T15:07:13.493
> 
> 标签：regex, .htaccess, seo

我更改了一个网站，现在 Google 网站管理员正在加载数百个“未找到”网址：

```
http://www.domain.com/images/picture.php?idphotos=720,404,,4/1/13,Not found 
```

picture.php 不再存在，所以我创建了一个 .htaccess 条目来重定向站点的根目录：

```
Redirect 301 /images/picture.php. / 
```

现在的问题是任何查询参数也会在重定向中发送：

```
http://www.domain.com/?idphotos=720 
```

如何创建不包含查询参数的重定向，例如：

```
http://www.domain.com/ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T15:21:40.060

试试这个（注意尾随`?`）：

```
RewriteCond %{QUERY_STRING} !=""
RewriteRule . http://www.domain.com/? 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-19T14:28:07.377

或者使用 Apache 2.4.0 中的 QSD 标志

```
RewriteCond %{QUERY_STRING} !=""    
RewriteRule . http://www.domain.com/ [L,R=301,QSD] 
```

[http://httpd.apache.org/docs/current/en/rewrite/flags.html#flag_qsd](http://httpd.apache.org/docs/current/en/rewrite/flags.html#flag_qsd)

# php - PHP - 添加 1 天日期格式 mm-dd-yyyy

> ID：16018629
> 
> 赞同：57
> 
> 时间：2013-04-15T15:07:28.950
> 
> 标签：php, date

```
<?php
    $date = "04-15-2013";
    $date = strtotime($date);
    $date = strtotime("+1 day", $date);
    echo date('m-d-Y', $date);
?> 
```

这让我发疯，看起来很简单。我对 PHP 很陌生，但我无法弄清楚这一点。回声返回`01-01-1970`。

$date 将来自`POST`格式中的a `m-d-Y`，我需要添加一天并将其作为新变量以供以后使用。

我是否必须将 $date 转换为`Y-m-d`，添加 1 天，然后转换回`m-d-Y`？学习如何使用会更好`DateTime`吗？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-04-15T15:08:17.543

你去吧

```
$date = "04-15-2013";
$date1 = str_replace('-', '/', $date);
$tomorrow = date('m-d-Y',strtotime($date1 . "+1 days"));

echo $tomorrow; 
```

这将输出

```
04-16-2013 
```

**两个函数**
[date](http://php.net/manual/it/function.date.php)
[strtotime的文档](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-04-15T15:10:40.647

```
$date = DateTime::createFromFormat('m-d-Y', '04-15-2013');
$date->modify('+1 day');
echo $date->format('m-d-Y'); 
```

[看到它在行动](http://codepad.viper-7.com/bYVNGB)

或 PHP 5.4+

```
echo (DateTime::createFromFormat('m-d-Y', '04-15-2013'))->modify('+1 day')->format('m-d-Y'); 
```

**参考**

*   [`DateTime::createFromFormat()`](http://www.php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-12-12T14:33:12.227

```
$date = strtotime("+1 day");
echo date('m-d-y',$date); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-15T15:11:56.650

使用[http://www.php.net/manual/en/datetime.add.php 之](http://www.php.net/manual/en/datetime.add.php)类的

```
$date = date_create('2000-01-01');
date_add($date, date_interval_create_from_date_string('1 days'));
echo date_format($date, 'Y-m-d'); 
```

输出

```
2000-01-2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-29T16:17:49.617

实际上，我想要同样的事情，在给定的日期获得一年的回溯日期！:-)

借助@mohammad mohsenipur 的上述答案提示，我通过他给定的链接访问了以下[链接](http://php.net/manual/en/book.datetime.php)！

幸运的是，有一个与 date_add 方法相同的方法，名为 date_sub 方法！:-) 我做了以下事情来完成我想要的！

```
$date = date_create('2000-01-01');
date_sub($date, date_interval_create_from_date_string('1 years'));
echo date_format($date, 'Y-m-d'); 
```

希望这个答案也能帮助别人！:-)

祝大家好运！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-15T15:10:31.897

strtotime() 无法识别您使用的格式。代替

```
$date = "04-15-2013"; 
```

经过

```
$date = "04/15/2013"; 
```

或者，如果您想使用，`-`则使用下面的行，前面的年份：

```
$date = "2013-04-15"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-05T11:25:28.503

试试下面的代码：

```
<?php
   $date = "2022-01-05";
   $to_date = date('Y-m-d', strtotime($date.' +1 day')); 
   echo $to_date;
?>

Output:

2022-01-06 
```

# dart - 如何解析 XMI（或 XML）文件

> ID：16018630
> 
> 赞同：6
> 
> 时间：2013-04-15T15:07:32.963
> 
> 标签：dart

如何在 dart 中解析 XML 文件？

我找到了[https://github.com/prujohn/dart-xml](https://github.com/prujohn/dart-xml)但在完整文件上使用它没有成功（在删除标题并仅包含 uml:Model 元素后，PI 存在问题）。

我需要解析从包含 UML 的 Altova UModel 导出的 XMI 文件。如果目前不包含此特定电池 - 包含它的时间框架是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T16:14:24.447

好吧，你可以在这里使用一个包：

[http://pub.dartlang.org/packages/xml](http://pub.dartlang.org/packages/xml)

# c - Right header organization

> ID：16018631
> 
> 赞同：2
> 
> 时间：2013-04-15T15:07:34.820
> 
> 标签：c, header

I have several C source files and headers. Some headers are for public use and some for internal use by library. I would like to separate them logically into folders so that headers for internal use do not mix with headers for public use.

Are there any commonly used patterns for that simple task?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:30:01.003

here is a typical pattern, and it may depend on your compiler what is available to you... you have 2 types of include path during compilation:

1.  User Header search path, denoted by double quoted `#include "header.h"` header names, these are typically just for the project that you are working on; as in you wouldn't address library headers this way typically.
2.  System Header search path, denoted by angle braces `#include <mylib/header.h>`, this can also be used for your libraries...

lets imagine the following simple scenario...

Project A depends on Lib A.

in lib_a we have one c file and 2 headers...

`lib_a.c`, `lib_a.h`, and `lib_a_internal.h`

when you build lib_a.c you use the following includes:

```
#include "lib_a.h"
#include "lib_a_internal.h" 
```

in your build script you will copy `lib_a.h` to `include/lib_a/lib_a.h` somewhere in your system headers path (maybe not in your real system headers, but a build specific one, depending on how atomic and sophisticated you want to be.)
You would also likely copy your `lib_a.a` (or `.so` or `.dyld`, or `.dll`) to `lib/lib_a.a` where `lib` is typically a peer of `include` above.

then when you build Project A you use the following:

```
#include <lib_a/lib_a.h> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:11:27.683

Why not put them into separate directories and use the flags to fetch the appropriate ones during the build?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:24:09.663

Leave the internal headers with the lib's sources and place the headers prototyping the lib's external API to `/usr/include/<your lib's name without the prefix "lib">`.

* * *

Alternativly put the external headers to `/usr/lib/<your lib's name without the prefix "lib">/include` and link `/usr/include/<your lib's name without the prefix "lib">` to the latter.

This allows you to place additional files to you lib under `/usr/lib/<your lib's name without the prefix "lib">/include`. For example config settings in `etc` which then can be linked from `/etc/<your lib's name without the prefix "lib">`.

# ipad - iPad 3 在网页上设置自动宽度

> ID：16018632
> 
> 赞同：1
> 
> 时间：2013-04-15T15:07:34.933
> 
> 标签：ipad, width, scale, viewport

我正在创建一个网站。我的页面宽度太宽，这意味着我必须滚动到一边。页面上没有固定宽度的元素，为什么还要横向滚动呢？我认为下面的元标记可以解决这个问题。

标记：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" /> 
```

# c++ - 不完整类型模板构造函数声明的无效使用

> ID：16018633
> 
> 赞同：0
> 
> 时间：2013-04-15T15:07:37.557
> 
> 标签：c++, templates, c++11, syntax-error

下面是我的模板类。为什么会发生错误？

```
template <typename Key_T, typename Mapped_T, size_t MaxLevel = 5>
class SkipList
{
    typedef std::pair<Key_T, Mapped_T> ValueType;
public:

    SkipList();
    SkipList(const SkipList &);
    SkipList &operator=(const SkipList &);

    size_t size() const;
    Iterator<Key_T,Mapped_T> begin();
    Iterator<Key_T,Mapped_T> end();
    //ConstIterator begin() const;
    //ConstIterator end() const;
    virtual void clear();

    std::pair<Iterator<Key_T,Mapped_T>, bool> insert(const ValueType &);
    template <typename IT_T>
    void insert(IT_T range_beg, IT_T range_end);

    virtual void erase(Iterator<Key_T,Mapped_T> pos);
    virtual void erase(Iterator<Key_T,Mapped_T> range_beg, Iterator<Key_T,Mapped_T> range_end);

private:
    Iterator<Key_T,Mapped_T>* head;
    Iterator<Key_T,Mapped_T>* tail;
    float probability;
    size_t maxHeight;
    size_t curHeight;
    RandomHeight* randGen;
};

template <typename Key_T1,typename Mapped_T1,typename Key_T2,typename Mapped_T2>
bool operator==(const SkipList<Key_T1,Mapped_T1> &a, const SkipList<Key_T2,Mapped_T2> &b);
template <typename Key_T1,typename Mapped_T1,typename Key_T2,typename Mapped_T2>
bool operator!=(const SkipList<Key_T1,Mapped_T1> &a, const SkipList<Key_T2,Mapped_T2> &b);
template <typename Key_T1,typename Mapped_T1,typename Key_T2,typename Mapped_T2>
bool operator<(const SkipList<Key_T1,Mapped_T1> &a, const SkipList<Key_T2,Mapped_T2> &b);

template <typename Key_T, typename Mapped_T>
SkipList<Key_T,Mapped_T>::SkipList() : curHeight (1), maxHeight(MaxLevel) , probability (1.0/MaxLevel)
{
  randGen = new RandomHeight(MaxLevel,probability);

  // Create head and tail and attach them
  head = new Iterator<Key_T,Mapped_T> (maxHeight);
  tail = new Iterator<Key_T,Mapped_T> (maxHeight);
  head->fwdNodes = tail;
} 
```

错误：

```
SkipList.cpp:134:36: error: invalid use of incomplete type ‘class SkipList<Key_T, Mapped_T>’
SkipList.cpp:93:7: error: declaration of ‘class SkipList<Key_T, Mapped_T>’ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:15:58.010

您的类`SkipList`具有**三个**模板参数。

```
template <typename Key_T, typename Mapped_T, size_t MaxLevel = 5>
class SkipList 
```

您必须在此处说明这一点。

```
// I've added "size_t MaxLevel"
template <typename Key_T, typename Mapped_T, size_t MaxLevel>
SkipList<Key_T,Mapped_T,MaxLevel>::SkipList() : curHeight (1), maxHeight(MaxLevel) , probability (1.0/MaxLevel) 
```

顺便说一句，如果（且仅当）您需要在其他编译单元中访问此模板化构造函数，[您应该在 header 中定义它](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T15:16:18.510

你缺少一个参数，你只有两个，但你需要三个，这行得通：

```
template <typename Key_T, typename Mapped_T, size_t MaxLevel>
SkipList<Key_T,Mapped_T,MaxLevel>::SkipList() : curHeight (1), maxHeight(MaxLevel) , probability (1.0/MaxLevel) 
```

# android - 使用带有 Android API <11 的 ViewPager 和 PageTransformer 时出现问题

> ID：16018634
> 
> 赞同：5
> 
> 时间：2013-04-15T15:07:39.347
> 
> 标签：android, android-viewpager

我需要在应用程序上为 ViewPager 编写自定义转换`android:minSdkVersion="9"`。

我正在尝试运行`ZoomOutPageTransformer`给定的[here](http://developer.android.com/training/animation/screen-slide.html#zoom-out)。

我没有编译错误，在运行 Android 2.3.3 (API 10) 的三星 Galaxy S 上，这条线

```
pager.setPageTransformer(true, new ZoomOutPageTransformer()); 
```

没有给出任何错误，但 ZoomOutPageTransformer 中的代码`transformPage`永远不会执行。

如果我设置`android:minSdkVersion="11"`和使用我的 Nexus 4 (API 17)，代码可以完美运行。

这些 PageTransformer 可以与 API 9 和 10 一起使用吗？否则，我该如何创建自定义转换`ViewPager`？

**编辑**

这是我使用的代码：

```
public class HomeFragment extends Fragment{ 

    ViewPager mNewsTitlePager;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        return inflater.inflate(R.layout.home_content, container, false);
    }

    @Override
    public void onActivityCreated (Bundle savedInstanceState){

        super.onActivityCreated(savedInstanceState); 

        mNewsTitlePager = (ViewPager) getView().findViewById(R.id.news_title_pager);
        mNewsTitlePager.setPageTransformer(true, new ZoomOutPageTransformer());

        mNewsTitlePager.setAdapter(new NewsPagerAdapter(news_item_list));

    }

    private class NewsPagerAdapter extends PagerAdapter {

        private List<News> news_item_list;
        private LayoutInflater inflater;

        NewsPagerAdapter(List<News> news_item_list) {
            this.news_item_list = news_item_list;
            inflater = getActivity().getLayoutInflater();
        }

        @Override
        public void destroyItem(ViewGroup container, int position, Object object) {
            ((ViewPager) container).removeView((View) object);
        }

        @Override
        public void finishUpdate(View container) {
        }

        @Override
        public int getCount() {
            return this.news_item_list.size();
        }

        @Override
        public Object instantiateItem(ViewGroup view, int position) {
            TextView news_title = (TextView) inflater.inflate(R.layout.news_title_item, view, false);

            news_title.setText(news_item_list.get(position).title);

            ((ViewPager) view).addView(news_title, 0);
            return news_title;
        }

        @Override
        public boolean isViewFromObject(View view, Object object) {
            return view.equals(object);
        }

        @Override
        public void restoreState(Parcelable state, ClassLoader loader) {
        }

        @Override
        public Parcelable saveState() {
            return null;
        }

        @Override
        public void startUpdate(View container) {
        }

    }

    public class ZoomOutPageTransformer implements ViewPager.PageTransformer {
        private float MIN_SCALE = 0.85f;
        private float MIN_ALPHA = 0.5f;

        public void transformPage(View view, float position) {
            int pageWidth = view.getWidth();
            int pageHeight = view.getHeight();

            if (position < -1) { // [-Infinity,-1)
                // This page is way off-screen to the left.
                view.setAlpha(0);

            } else if (position <= 1) { // [-1,1]
                // Modify the default slide transition to shrink the page as well
                float scaleFactor = Math.max(MIN_SCALE, 1 - Math.abs(position));
                float vertMargin = pageHeight * (1 - scaleFactor) / 2;
                float horzMargin = pageWidth * (1 - scaleFactor) / 2;
                if (position < 0) {
                    view.setTranslationX(horzMargin - vertMargin / 2);
                } else {
                    view.setTranslationX(-horzMargin + vertMargin / 2);
                }

                // Scale the page down (between MIN_SCALE and 1)
                view.setScaleX(scaleFactor);
                view.setScaleY(scaleFactor);

                // Fade the page relative to its size.
                view.setAlpha(MIN_ALPHA +
                        (scaleFactor - MIN_SCALE) /
                        (1 - MIN_SCALE) * (1 - MIN_ALPHA));

            } else { // (1,+Infinity]
                // This page is way off-screen to the right.
                view.setAlpha(0);
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-11T13:23:41.473

[我从这里](https://raw.github.com/android/platform_frameworks_support/master/v4/java/android/support/v4/view/ViewPager.java)复制了 ViewPager 类并删除了该版本的 if 语句并将其命名为 TransformableViewPager

```
public void setPageTransformer(boolean reverseDrawingOrder, PageTransformer transformer) {
    if (Build.VERSION.SDK_INT >= 11) {
        final boolean hasTransformer = transformer != null;
        final boolean needsPopulate = hasTransformer != (mPageTransformer != null);
        mPageTransformer = transformer;
        setChildrenDrawingOrderEnabledCompat(hasTransformer);
        if (hasTransformer) {
            mDrawingOrder = reverseDrawingOrder ? DRAW_ORDER_REVERSE : DRAW_ORDER_FORWARD;
        } else {
            mDrawingOrder = DRAW_ORDER_DEFAULT;
        }
        if (needsPopulate) populate();
    }
} 
```

我还必须将所有 PageTransformer 更改为 ViewPager.PageTransformer。然后像这样在 ZoomOutPageTransformer 中进行转换，

```
if(Build.VERSION.SDK_INT>=Build.VERSION_CODES.HONEYCOMB){
    // > 11 version
    view.setAlpha(0);
}
else
{
    // Nine Old Androids version
    ViewHelper.setAlpha(view, 0);
 } 
```

这甚至适用于 2.2

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-01T09:29:37.667

None of the answers above are the correct answer even if they work, Here is mine, do not forget to add nineoldandroids.jar to your libs folder:

```
 public class ZoomOutPageTransformer implements ViewPager.PageTransformer {
    private static final float MIN_SCALE = 0.85f;
    private static final float MIN_ALPHA = 0.5f;

    public void transformPage(View view, float position) {
        int pageWidth = view.getWidth();
        int pageHeight = view.getHeight();

        if (position < -1) {
            ViewHelper.setAlpha(view, 0);
        } else if (position <= 1) { // [-1,1]
            float scaleFactor = Math.max(MIN_SCALE, 1 - Math.abs(position));
            float vertMargin = pageHeight * (1 - scaleFactor) / 2;
            float horzMargin = pageWidth * (1 - scaleFactor) / 2;
            if (position < 0) {
                ViewHelper.setTranslationX(view,horzMargin - vertMargin / 2);
            } else {
                ViewHelper.setTranslationX(view,-horzMargin + vertMargin / 2);
            }
            ViewHelper.setScaleX(view,scaleFactor);
            ViewHelper.setScaleY(view, scaleFactor);
            ViewHelper.setAlpha(view, MIN_ALPHA + (scaleFactor - MIN_SCALE) / (1 - MIN_SCALE) * (1 - MIN_ALPHA));
        } else {
            ViewHelper.setAlpha(view,0);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T16:24:27.303

[好的：我在文档](http://developer.android.com/reference/android/support/v4/view/ViewPager.PageTransformer.html)的开头得到了答案：

```
As property animation is only supported as of Android 3.0 and forward, setting a PageTransformer on a ViewPager on earlier platform versions will be ignored. 
```

我会`ViewFlipper`改用。

# jquery - 使元素可动态调整大小

> ID：16018638
> 
> 赞同：0
> 
> 时间：2013-04-15T15:07:59.520
> 
> 标签：jquery, jquery-ui, jquery-ui-resizable

我试图在将元素`jQuery UI Resizable`添加到 dom 后动态地赋予它以下内容：

```
 insert.click(function(e) {
        var selectedImage = $(this).parent().find('.gallery-item.active');
        var htmlImage = selectedImage.find('img');

        var selectedDiv = $('.zone.selected .drag-image');
        //selectedDiv.clone().append(htmlImage);

        var insertedImage = htmlImage.clone();
        var resized = insertedImage.resizable();
        console.log(selectedDiv);
        console.log(resized);
        resized.appendTo(selectedDiv);

      });

    }); 
```

这是做什么的，它会找到一个已被点击并给出`active`类的图像。单击（a href 按钮）时`insert-image`，复制图像并将其附加到 DOM。

这工作正常。尝试为图像提供`resizeable`.

运行上述代码时，`img`插入到 DOM 中的 HTML 如下；

它似乎不包括任何显示可调整大小的箭头图像的 UI 代码，即

```
<div class="ui-resizable-handle ui-resizable-e" style=""></div>
<div class="ui-resizable-handle ui-resizable-s" style=""></div>
<div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se" style="z-index: 1001;"></div> 
```

有没有办法可以添加所有使元素可调整大小的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:18:13.253

我刚刚重新生成了你的代码，它似乎工作正常，看看这个 jsFiddle：http: [//jsfiddle.net/gYdMV/](http://jsfiddle.net/gYdMV/)

更新点击事件：http: [//jsfiddle.net/gYdMV/1/](http://jsfiddle.net/gYdMV/1/)

代码：

```
var insertedImage = $('#htmlImage').clone();
var resized = insertedImage.resizable();
insertedImage.appendTo($('#content'));

<div id="content">
<div id="htmlImage">
    hi
</div>
</div> 
```

# java - 使用 JList 时避免“未经检查的调用”警告

> ID：16018639
> 
> 赞同：1
> 
> 时间：2013-04-15T15:08:04.290
> 
> 标签：java, swing, warnings, actionlistener, jlist

我正在制作一个提供 GUI 的简单文件搜索程序。`ActionListener`它运行良好，但是，当我更新输出时，我在搜索按钮中收到编译时间警告`JList`。有没有办法避免这个警告？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T15:11:21.460

从 Java 7 开始，该类[`JList`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html)就支持泛型。当它们丢失时，编译器会抱怨。您可以使用

```
JList<String> resultList = new JList<>(); 
```

# c# - 如何在detailview asp.net中添加下拉列表

> ID：16018642
> 
> 赞同：0
> 
> 时间：2013-04-15T15:08:08.057
> 
> 标签：c#, asp.net, dropbox

我试图从后面的代码中访问下拉列表中的值，但我收到此错误：“ddl_Ext 在当前上下文中不存在”。我不确定我在这里做错了什么..有人可以帮忙吗？这是我在 aspx 文件中的下拉列表。谢谢。

```
 <asp:TemplateField HeaderText="Is this external?">
       <ItemTemplate>
       <asp:Label ID="lblExt" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.Ext") %>'></asp:Label>
          </ItemTemplate>
           <EditItemTemplate>
           <asp:DropDownList ID="ddl_Ext" runat="server"
                AutoPostBack="false" AppendDataBoundItems="true">
          <asp:ListItem Text="Please select ..." Value="Please Select ..."></asp:ListItem>
          <asp:ListItem Text="Yes" Value="Yes"></asp:ListItem>
          <asp:ListItem Text="No" Value="No"></asp:ListItem>

          </asp:DropDownList>
          </EditItemTemplate>
   </asp:TemplateField> 
```

这是我试图使用的代码：

```
protected void DV_WScript_ItemInserting(object sender, DetailsViewInsertEventArgs e)
    {
      string Ext = ddl_Ext.SelectedValue;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:22:58.907

**试试这个：**

```
protected void DV_WScript_ItemInserting(object sender, DetailsViewInsertEventArgs e)
{
        //Put here if you want to find control of your Insert Mode
           DropDownList dropDown = (DropDownList)DetailsView1.FindControl("ddl_Ext");
           string Ext = dropDown.selectedValue;

} 
```

# spring - 将 Confluence 部署到 OpenShift？

> ID：16018643
> 
> 赞同：0
> 
> 时间：2013-04-15T15:08:10.293
> 
> 标签：spring, tomcat6, confluence, openshift, chown

我将 Confluence 5.1 作为 WAR 部署到 OpenShift Tomcat 6 Cartridge。

使用我的网络浏览器访问该实例，我得到：

> 模板渲染期间发生错误：Velocimacro：使用 VM 库时出错：template/includes/macros-deprecated.vm。请联系您的管理员寻求帮助。

服务器日志的相关部分说：

```
2013-04-14 05:32:03,322 FATAL [ContainerBackgroundProcessor[StandardEngine[Catalina]]] [atlassian.spring.container.SpringContainerContext] getComponent Spring Application  context has not been set
2013-04-14 05:32:03,323 ERROR [ContainerBackgroundProcessor[StandardEngine[Catalina]]] [confluence.user.listeners.UserSessionExpiryListener] sessionDestroyed Application server does not give us access to expired sessions. Listeners that depend on receiving LogoutEvent will not be reliable.  This web server is probably unsupported.
java.lang.IllegalStateException: Spring Application context has not been set 
```

Atlassian 支持告诉我 chown Tomcat 目录；但 OpenShift 似乎不允许这样做。

如何在 OpenShift 上成功安装 Confluence 5.1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:05:43.977

您可以使用 DIY 墨盒并自己部署 tomcat。如果仍然需要，您还可以使用操作挂钩（例如*部署挂钩）调整权限。*

# css - 用于 css 视网膜图像测试的插件/书签

> ID：16018645
> 
> 赞同：0
> 
> 时间：2013-04-15T15:08:19.560
> 
> 标签：css, plugins, retina-display, bookmarklet

有谁知道是否有任何插件或书签可以在常规桌面上测试 css 中的视网膜图像？我的意思是它应该做一些事情，比如从页面的所有 css 中获取与视网膜 css 图像相关的查询，并将它们应用（添加）到这个页面，即使它不是视网膜。

我试着用谷歌搜索它，但什么也没找到。

PS我现在手动做：在我的css文件中评论视网膜媒体查询，但使用这样的插件会更方便。

# python - 使用 python 进行主成分分析 (PCA)

> ID：16018657
> 
> 赞同：4
> 
> 时间：2013-04-15T15:08:58.343
> 
> 标签：python, arrays, matrix, numpy, face-recognition

我正在尝试使用 python 通过主成分分析 (PCA) 实现人脸识别。我正在按照本教程中的步骤操作：http: [//onionesquereality.wordpress.com/2009/02/11/face-recognition-using-eigenfaces-and-distance-classifiers-a-tutorial/](http://onionesquereality.wordpress.com/2009/02/11/face-recognition-using-eigenfaces-and-distance-classifiers-a-tutorial/)

这是我的代码：

```
import os
from PIL import Image
import numpy as np
import glob
import numpy.linalg as linalg

#Step1: put database images into a 2D array
filenames = glob.glob('C:\\Users\\Karim\\Downloads\\att_faces\\New folder/*.pgm')
filenames.sort()
img = [Image.open(fn).convert('L').resize((90, 90)) for fn in filenames]
images = np.asarray([np.array(im).flatten() for im in img])

#Step 2: find the mean image and the mean-shifted input images
mean_image = images.mean(axis=0)
shifted_images = images - mean_image

#Step 3: Covariance
c = np.cov(shifted_images)

#Step 4: Sorted eigenvalues and eigenvectors
eigenvalues,eigenvectors = linalg.eig(c)
idx = np.argsort(-eigenvalues)
eigenvalues = eigenvalues[idx]
eigenvectors = eigenvectors[:, idx]

#Step 5: Only keep the top 'num_eigenfaces' eigenvectors
num_components = 20
eigenvalues = eigenvalues[0:num_components].copy()
eigenvectors = eigenvectors[:, 0:num_components].copy()

#Step 6: Finding weights
w = eigenvectors.T * np.asmatrix(shifted_images)

#Step 7: Input image
input_image = Image.open('C:\\Users\\Karim\\Downloads\\att_faces\\1.pgm').convert('L').resize((90, 90))
input_image = np.asarray(input_image)

#Step 8: get the normalized image, covariance, eigenvalues and eigenvectors for input image
shifted_in = input_image - mean_image
cov = np.cov(shifted_in)
eigenvalues_in, eigenvectors_in = linalg.eig(cov) 
```

我收到一个错误： `Traceback (most recent call last): File "C:/Users/Karim/Desktop/Bachelor 2/New folder/new3.py", line 47, in <module> shifted_in = input_image - mean_image ValueError: operands could not be broadcast together with shapes (90,90) (8100)`

我试图`.flatten()`从步骤 1 中删除，但这在计算特征值和特征向量时产生了另一个错误： `Traceback (most recent call last): File "C:/Users/Karim/Desktop/Bachelor 2/New folder/new3.py", line 25, in <module> eigenvalues,eigenvectors = linalg.eig(c) File "C:\Python27\lib\site-packages\numpy\linalg\linalg.py", line 1016, in eig _assertRank2(a) File "C:\Python27\lib\site-packages\numpy\linalg\linalg.py", line 155, in _assertRank2 'two-dimensional' % len(a.shape)) LinAlgError: 4-dimensional array given. Array must be two-dimensional`

我还尝试添加`.flatten()`到第 7 步，但在计算输入图像的特征值和特征向量时也产生了另一个错误： `Traceback (most recent call last): File "C:/Users/Karim/Desktop/Bachelor 2/New folder/new3.py", line 49, in <module> eigenvalues_in, eigenvectors_in = linalg.eig(cov) File "C:\Python27\lib\site-packages\numpy\linalg\linalg.py", line 1016, in eig _assertRank2(a) File "C:\Python27\lib\site-packages\numpy\linalg\linalg.py", line 155, in _assertRank2 'two-dimensional' % len(a.shape)) LinAlgError: 0-dimensional array given. Array must be two-dimensional`

有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T17:11:09.417

我终于看了您提供的教程，似乎作者建议您将图像展平。您现在最好继续使用扁平数组，因为它与该教程更匹配。

我相信修复它的地方是在第 7 步，在那里你有输入图像的协方差。但是，输入图像的协方差矩阵将是一个标量，您无法找到它的特征值和特征向量。您可以将其投影为大小为 的 2d 矩阵`(1,1)`，但您的特征值将只是协方差，而特征向量将是`[[1]]`。

也就是说，例如，

```
In [563]: input_image = np.random.rand(90,90).flatten()

In [564]: c = np.cov(input_image)

In [565]: c
Out[565]: array(0.08280644230318886)

In [566]: c.shape
Out[566]: ()

In [567]: c.ndim
Out[567]: 0 
```

所以我们重塑`c`为 2d：

```
In [568]: cmat = c.reshape(1,1) # equivalent to cmat = c[...,np.newaxis,np.newaxis]

In [569]: cmat
Out[569]: array([[ 0.08280644]])

In [570]: cmat.shape
Out[570]: (1, 1)

In [571]: cmat.ndim
Out[571]: 2 
```

所以现在我们可以找到特征：

```
In [572]: ceigval, ceigvec = linalg.eig(cmat) 
```

但是对于一元矩阵，只有一个特征值和一个特征向量，而特征值是矩阵的元素，特征向量是长度为1的单位向量/单位，所以我不确定这真的是什么你想为你的人脸识别做些什么。

```
In [573]: ceigval
Out[573]: array([ 0.08280644])

In [574]: ceigvec
Out[574]: array([[ 1.]])

In [576]: np.isclose(c, ceigval)
Out[576]: True 
```

顺便说一句，这就是我们必须制作`c`2d 的原因：

```
In [577]: linalg.eig(c)
---------------------------------------------------------------------------
LinAlgError: 0-dimensional array given. Array must be two-dimensional 
```

* * *

另一方面，您可以获得未展平的 input_image 的协方差，然后您将获得`N`特征值和`N`特征向量：

```
In [582]: input_image = np.random.rand(90,90)

In [583]: c = np.cov(input_image)

In [584]: c.shape
Out[584]: (90, 90)

In [585]: ceigval, ceigvec = linalg.eig(c)

In [586]: ceigval.shape
Out[586]: (90,)

In [587]: ceigvec.shape
Out[587]: (90, 90) 
```

# java - JSlider 限制拇指移动

> ID：16018659
> 
> 赞同：0
> 
> 时间：2013-04-15T15:09:01.180
> 
> 标签：java, swing, user-interface, jslider

是否可以限制 JSlider 拇指的移动？用户应该不可能将滑块拇指移动超过下限值和上限值。

编辑：

我设置了滑块的最小值和最大值（例如从 1..100 开始）。但是我有另一个控件来限制滑块的值范围，比如从 30..60 开始。现在用户应该不能将滑块滑块移动到 30 以下和 60 以上，但最小值和最大值仍应为 1 和 100。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:58:48.470

由于您有另一个设置滑块范围的控件，您可能需要查看一个 RangeSlider 可以在单个滑块上提供上限和下限（它有 2 个拇指）

以下是一些来自网络的不同方法：

*   [创建 Java Swing 范围滑块](http://ernienotes.wordpress.com/2010/12/27/creating-a-java-swing-range-slider/)
*   [多拇指滑块](http://www.java2s.com/Code/Java/Swing-Components/ThumbSliderExample2.htm)

# google-drive-api - Google Drive API order of drive.files.list call

> ID：16018661
> 
> 赞同：1
> 
> 时间：2013-04-15T15:09:11.877
> 
> 标签：google-drive-api

*   Will the same call always return the results in the same order?

*   If I have the `pageToken` X, how long is it valid? Will I be able to navigate in all the files, like they were (ex: without added files) at the time I got this token?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:36:58.347

Results are ordered by modifiedDate by default, the call will not return the results in the same order.

I would not rely on `pageToken` more than a few minutes. You should be able to navigate from the previous state.

# c# - 从存在于另一个列表中的列表中删除结果

> ID：16018662
> 
> 赞同：2
> 
> 时间：2013-04-15T15:09:12.837
> 
> 标签：c#, asp.net, asp.net-mvc-3

在我的应用程序中，您可以将用户链接到他们存储在列表“userList”中的组织：

```
List<OrganizationUserViewModel> userList = new List<OrganizationUserViewModel>();

foreach (var ou in org.Users.OrderBy(x => x.User.UserName).ToList())
{
    var user = Gateway.Instance.Map<User, OrganizationUserViewModel>(ou.User);
    user.Organization_UserId = ou.Organization_UserId;
    userList.Add(user);
} 
```

可以在一个菜单中选择这些用户，该菜单显示连接到其他可以链接的组织的所有用户。

此代码片段填充了组织列表，其中包含所有附加到它们的用户：

```
foreach (var childOrg in viewModel.ChildOrganizations)
{
    childOrg.Users = new List<OrganizationUserViewModel>();
    var users = this._organizationManager.GetOrganizationUsers(childOrg.OrganizationId);
    foreach (var user in users)
    {
        var u = Gateway.Instance.Map<User, OrganizationUserViewModel>(user.User);
        u.Organization_UserId = user.Organization_UserId;
        childOrg.Users.Add(u);
    }
} 
```

我的问题是，我需要在没有任何已选择的用户的情况下显示这个可选列表。例如，如果一个名为“Apple”的用户已被链接，则他们不应出现在可选择列表中。

解决这个问题的最有效方法是什么？提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T15:11:00.353

假设两个列表具有相同的数据类型，Linq 来救援：

```
var allowedSelectionsList = selectableList.Except(selectedList).ToList(); 
```

?

# java - parameter.method() 方法如何工作？

> ID：16018670
> 
> 赞同：1
> 
> 时间：2013-04-15T15:09:37.047
> 
> 标签：java, string

嗯，我正在考虑那种方法。他们不接收参数，但他们与他们一起工作。

一个例子：`.replace(Char, Char)` 对于 String API，它使用一个字符串后跟一个点。

像：

```
String test = "= Text = without = equals";
String output = test.replace("=",""); 
```

没有收到参数测试它是如何工作的？我只是好奇，想做这样的方法。

对不起，我的英语不好！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:12:49.113

这些是[实例方法](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)，这意味着它们需要实例化的类对象才能操作。因此，字符串类知道`test`您示例中的值，因为它可以访问实例化数据。

要创建这些类型的方法，只需在您的类中定义它们并且不要将它们标记为静态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:12:51.313

字符串是一个对象。类定义是 Java 标准库的一部分。该定义包括`replace`方法。

由于 String 是一个`final`类，因此您不能将其子类化以添加其他方法。所以你不能做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:13:01.513

假设您构建了一种新类型的字符串，它只会替换东西（为什么不呢？！）：

```
public class MyString {
    private final String s;
    public MyString(String s) {
        this.s = s;
    }
    public String replace(String search, String replace) {
        return s.replace(search, replace);
    }
} 
```

现在你可以这样称呼它：

```
MyString myString = new MyString("= Text = without = equals");
String output = myString.replace("=", ""); 
```

瞧，你做了同样的“把戏”！你可以看到它是如何工作的：你的`MyString`对象在内部保存了一些数据（`s`变量），并且可以从它的方法中访问这些数据。

# ios - 在 applicaitonWillEnterForeground 中更改 rootViewController

> ID：16018674
> 
> 赞同：1
> 
> 时间：2013-04-15T15:09:44.097
> 
> 标签：ios, uiview, storyboard, application-lifecycle

长话短说，我正在尝试更改我的 iOS 应用的`rootViewController`on `applicationWillEnterForeground:`，如下所示：

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    MyViewController *controller = [[MyViewController alloc] init];
    self.window.rootViewController = controller;
} 
```

但是，当 iOS 执行当应用程序从后台移动到前台时执行的“放大”动画时，它仍然显示先前`rootViewController`的视图。然后，一旦动画完成，应用程序就会将新`rootViewController`的视图爆炸到屏幕上。

解决此问题的一种方法是简单地将代码移至`- (void)applicationDidEnterBackground:`，但此解决方案的问题是，在我的应用程序中，无法判断是否`rootViewController`会分配新的直到`- (void)applicationWillEnterForeground:(UIApplication *)application`（它基于离开应用程序后经过的时间）。

在iOS执行将应用程序从后台带到前台的动画之前，如何强制应用程序重绘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:11:41.187

我相信这是不可能的。当你的应用程序进入前台时，iOS 显示的屏幕实际上是应用程序进入后台时系统截取的屏幕截图。当应用程序回到前台时，无法操作或替换该图像。

此行为部分记录在iOS 应用程序编程指南的“[移至后台”部分中：](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW1)

> 应用程序可以使用他们的`applicationDidEnterBackground:`方法来准备移动到后台状态。移至后台时，所有应用程序都应执行以下操作：
> 
> *   准备为他们拍照。当该`applicationDidEnterBackground:`方法返回时，系统会为您的应用程序的用户界面拍照，并将生成的图像用于过渡动画。如果界面中的任何视图包含敏感信息，则应在`applicationDidEnterBackground:`方法返回之前隐藏或修改这些视图。

Apple 没有明确记录您以后不能修改或替换此屏幕截图，但他们也没有在我所知道的任何地方说相反的说法。

# c# - 以编程方式编辑 secpol.msc？

> ID：16018676
> 
> 赞同：0
> 
> 时间：2013-04-15T15:09:58.283
> 
> 标签：c#, windows-server-2008, local-security-policy

有没有办法以编程方式从 secpol.msc 编辑设置？

我正在寻找类似的东西：

```
 ManagementScope scope = new ManagementScope("root\\rsop\\user\\" + user.User.Value.Replace('-', '_'));
        ObjectQuery query = new ObjectQuery("Select * from RSOP_PolicySetting");
        ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query); 
```

root\secpol\... 是一个选项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:08:25.537

我找到了解决方案。从 secedit 导出读取是完美的：[https ://gist.github.com/jkingry/421802](https://gist.github.com/jkingry/421802)

# java - 如何使用 ndk-build？

> ID：16018677
> 
> 赞同：0
> 
> 时间：2013-04-15T15:09:59.253
> 
> 标签：java, android, android-ndk

所以我下载了这个应用程序[https://github.com/Teaonly/android-eye](https://github.com/Teaonly/android-eye)，这是一个使用一些库的 IP 摄像头简单应用程序，不幸的是，我对 android 的了解不包括使用库。我的问题是，我最终如何构建这些库？里面有一个带有 Android.mk 的 jni 文件夹，其中包含这些库的其余代码。

我该如何编译它们？我试过了

```
ndk-build C:\Downloads\EyeMaster\jni\ 
```

但它说“错误的目录”。

# java - 如何在 Java 中将 DWORD / QWORD 从 C 转换为 Double

> ID：16018678
> 
> 赞同：-1
> 
> 时间：2013-04-15T15:09:59.253
> 
> 标签：java, bytearray, primitive

我有存储为字节的无符号 32 位、64 位原语。我需要在 Java 中使用它们。所以我想把它们从字节重新组合在一起。首先，我正在玩随机字节以确保所有内容都正确计算。但是我遇到了一些问题：

```
// input: array of 4 bytes (unsigned int 0 to 4,294,967,295)
// output: double 0.0 to 1.0 (0 -> 0.0, 2,147,483,647 ~> 0.5, 4,294,967,295 -> 1.0)

byte[] bytes = new byte[100];
(new Random()).nextBytes(bytes); // randomize bytes

long a = (bytes[3] << 24) | (bytes[2] << 16) | (bytes[1] << 8) | bytes[0];
double b = 1.0 * (a & 0xffffffffL) / 0xffffffffL;

System.out.println(bytes[3] + "," + bytes[2] + "," + bytes[1] + "," + bytes[0]);
System.out.println(a);
System.out.println(b); 
```

输出 b 大部分时间接近 1.0 和接近最大无符号整数。我究竟做错了什么 ？我如何获得想要的行为？以及如何使用 8 个字节为 QWORD 做同样的事情（正确计算）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:16:47.030

要将字节数组转换为双精度，请使用[ByteBuffer](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html)，请参阅[此问题](https://stackoverflow.com/questions/6471177/converting-8-bytes-of-little-endian-binary-into-a-double-precision-float)以获取示例代码。正如您将在示例代码中注意到的那样，如果输出和输入平台不匹配，您可能需要更改字节数组的字节序。

# ruby-on-rails-3 - 无法为 Users::OmniauthCallbacksController 找到操作“google_oauth2”

> ID：16018692
> 
> 赞同：3
> 
> 时间：2013-04-15T15:10:26.360
> 
> 标签：ruby-on-rails-3, devise, omniauth

我正在使用“omniauth-google-oauth2”登录谷歌并仔细按照此处的所有说明进行操作

```
 https://github.com/plataformatec/devise/wiki/OmniAuth%3A-Overview 
```

但我上面有错误。

我的路线

```
 devise_for :users, :controllers => {
      :omniauth_callbacks => "users/omniauth_callbacks"

    } 
```

设计.rb代码

```
 config.omniauth :google_oauth2, "863625299460- 420n6c7lvad91dfvko60uamtvtr6huhf.apps.googleusercontent.com", "dcvA2aZRZi27KCQjWTYP30pw", {  access_type: "offline", approval_prompt: "" } 
```

omn​​iauth 回调控制器代码

```
 def google_oauth2
       #@user = User.find_for_google_oauth2(request.env["omniauth.auth"], current_user)
       binding.pry #control not coming here
     end 
```

回调后我在下面有错误。看截图

```
 https://github.com/zquestz/omniauth-google-oauth2/issues/52 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:55:49.633

This looks like a route issue. If you do "rake routes | grep auth" what do you see?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T15:14:25.747

我遇到了与您描述的完全相同的问题。确保您需要 config/initializers/deviser.rb 中的 omniauth-google-oauth2 gem

```
# ==> OmniAuth
# Add a new OmniAuth provider. Check the wiki for more information on setting
# up on your models and hooks.
require "omniauth-google-oauth2"
config.omniauth :google_oauth2, ENV["GOOGLE_KEY"], ENV["GOOGLE_SECRET"],
                                { access_type: "offline", approval_prompt: "force" } 
```

我添加了 devise.rb 文件的整个部分来提供上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-15T17:47:21.043

已经很晚了，但这个答案可能对其他人有用

如果您`devise`用于身份验证，则默认情况下设计会在路由文件中生成路由，`devise_for :users`并且您的`omniouth_callback`路由应高于默认`devise`路由，以便覆盖默认设计路由。

```
 devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks"}
  devise_for :users 
```

# string - 从 Int 到特定字符串的列表

> ID：16018696
> 
> 赞同：1
> 
> 时间：2013-04-15T15:10:38.243
> 
> 标签：string, list, haskell, map

如果我想将`Int`s 的列表转换为`[1,2,3]`to `["∧","∨","→"]`（因此，如果有 '1' 将其转换为 '∧' 等...），我会怎么做

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T15:13:14.423

我可能会分两步完成：

```
conv :: Int -> String
conv 1 = "∧"
conv 2 = "∨"
conv 3 = "→" 
```

然后只是映射：

```
change :: [Int] -> [String]
change = map conv

change [1,2,3] -- returns ["∧","∨","→"] 
```

你甚至可以嵌入：

```
change = map conv
  where
    conv 1 = "∧"
    ... 
```

# java - Tomcat7 Maven 插件和 JaCoCo

> ID：16018698
> 
> 赞同：17
> 
> 时间：2013-04-15T15:10:43.190
> 
> 标签：java, maven, tomcat, jacoco

有没有办法使用带有[tomcat7](http://www.eclemma.org/jacoco/trunk/index.html) [-maven-plugin](http://tomcat.apache.org/maven-plugin-2.1/tomcat7-maven-plugin/)嵌入式实例的 JaCoCo 来获得代码覆盖率？

jacoco-maven-plugin 在我的 WAR 的 POM 中配置以检测我的单元测试，但我不确定如何将 jacoco 代理附加到嵌入式 Tomcat 实例以检测针对 Tomcat 运行的集成测试。鉴于 Tomcat 实例是嵌入式的，我不确定这种方法是否可行。有没有其他方法可以做到这一点？我可能可以从使用 Tomcat Maven 插件切换到使用 Cargo 来获得覆盖，但如果可能的话，我更愿意坚持使用 Tomcat 插件。

以下是我的 POM 中的一些相关片段：

```
<plugin>
    <groupId>org.jacoco</groupId>
    <artifactId>jacoco-maven-plugin</artifactId>
    <version>0.6.2.201302030002</version>
    <executions>
        <execution>
            <goals>
                <goal>prepare-agent</goal>
            </goals>
        </execution>
    </executions>
</plugin>
<plugin>
    <artifactId>maven-failsafe-plugin</artifactId>
    <version>2.14</version>
    <executions>
        <execution>
            <id>integration-tests</id>
            <goals>
                <goal>integration-test</goal>
                <goal>verify</goal>
            </goals>
        </execution>
    </executions>
</plugin>
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <version>2.1</version>
    <configuration>
        <systemProperties>
            <!-- as expected, this system property doesn't work since Tomcat is embedded, but this is the type of config I'm looking for -->
            <JAVA_OPTS>-javaagent:${project.build.directory}/${jacoco.jar}=destfile=${project.build.directory}/jacoco.exec,append=true</JAVA_OPTS>
        </systemProperties>
    </configuration>
    <executions>
        <execution>
            <id>tomcat-startup</id>
            <goals>
                <goal>run-war-only</goal>
            </goals>
            <phase>pre-integration-test</phase>
            <configuration>
                <fork>true</fork>
            </configuration>
        </execution>
        <execution>
            <id>tomcat-shutdown</id>
            <goals>
                <goal>shutdown</goal>
            </goals>
            <phase>post-integration-test</phase>
        </execution>
    </executions>
</plugin> 
```

版本：Maven 3.0.4、Tomcat Maven 插件 2.1、Jacoco 0.6.2.201302030002、Java 7

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-27T18:48:11.523

我知道问题发布已经有一段时间了，但我觉得答案并没有真正解决问题的根源。如果您在这些插件中运行测试，代码覆盖率可能适用于故障安全或万无一失。但是，如果您只想使用 jacoco 监视 tomcat 以获得覆盖率报告，则当前信息无法提供。我发现tomcat7-maven-plugin 不允许您通过简单地提供JAVA_OPTS 来为jacoco 注入-javaagent。切换到货物我能够这样做。

```
<plugin>
    <groupId>org.jacoco</groupId>
    <artifactId>jacoco-maven-plugin</artifactId>
    <version>0.7.2.201409121644</version>
    <configuration>
        <destFile>${sonar.jacoco.reportPath}</destFile>
        <dataFile>${sonar.jacoco.reportPath}</dataFile>
        <outputDirectory>${project.reporting.outputDirectory}/jacoco-it</outputDirectory>
        <classDumpDir>${project.reporting.outputDirectory}/jacoco-it/classes</classDumpDir>
        <skip>${skipITs}</skip>
    </configuration>
    <executions>
        <execution>
            <id>jacoco-agent</id>
            <phase>pre-integration-test</phase>
            <goals>
                <goal>prepare-agent</goal>
            </goals>
            <configuration>
                <destFile>${sonar.jacoco.reportPath}</destFile>
                <propertyName>jacoco.agent.itArgLine</propertyName>
            </configuration>
        </execution>
        <execution>
            <id>jacoco-report</id>
            <phase>post-integration-test</phase>
            <goals>
                <goal>dump</goal>
                <goal>report</goal>
            </goals>
        </execution>
    </executions>
</plugin>
    <plugin>
    <groupId>org.codehaus.cargo</groupId>
    <artifactId>cargo-maven2-plugin</artifactId>
    <version>1.4.11</version>
    <configuration>
        <skip>${skipITs}</skip>
        <container>
            <containerId>tomcat7x</containerId>
            <zipUrlInstaller>
                <url>http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.16/bin/apache-tomcat-7.0.16.zip
                </url>
                <downloadDir>${project.build.directory}/downloads</downloadDir>
                <extractDir>${project.build.directory}/extracts</extractDir>
            </zipUrlInstaller>
            <dependencies>
                <dependency>
                    <groupId>ojdbc</groupId>
                    <artifactId>ojdbc6</artifactId>
                </dependency>
            </dependencies>
        </container>
        <configuration>
            <home>${project.build.directory}/catalina-base</home>
            <properties>
                <cargo.jvmargs>${jacoco.agent.itArgLine},output=tcpserver,port=6300 -Drunmode=TEST</cargo.jvmargs>
                <cargo.servlet.port>9090</cargo.servlet.port>
            </properties>
            <configfiles>
                <configfile>
                    <file>${basedir}/src/test/conf/context.xml</file>
                    <todir>conf/Catalina/localhost/</todir>
                    <tofile>context.xml.default</tofile>
                </configfile>
            </configfiles>
        </configuration>
    </configuration>
    <executions>
        <execution>
            <id>start-tomcat</id>
            <phase>pre-integration-test</phase>
            <goals>
                <goal>start</goal>
            </goals>
        </execution>
        <execution>
            <id>stop-tomcat</id>
            <phase>post-integration-test</phase>
            <goals>
                <goal>stop</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

重要的部分是：

1.  `<plugin><groupId>org.jacoco</groupId> ...<propertyName>jacoco.agent.itArgLine</propertyName>`
2.  `<cargo.jvmargs>${jacoco.agent.itArgLine},output=tcpserver,port=6300 </cargo.jvmargs>`

当在 jacoco 插件上运行报告目标时，它将在 ${projectbase}/target/site/jacoco-it/index.html 中创建一个包含您的覆盖率报告的目录。我将它与soapui-maven-plugin 一起使用，但它也可以与selenium-maven-plugin 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:25:28.237

如果您使用**maven-failsafe-plugin**（或 maven-surefire-plugin）运行您的集成测试，则不需要将**JAVA_OPTS**传递给**嵌入的 tomcat 。**这是因为tomcat嵌入式运行在maven-failsafe-plugin的同一个进程中。

 **因此，当**jacoco-maven-plugin**执行**prepare-agent**时，它会设置[maven-failsafe-plugin 也使用](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#argLine)的**[argLine](http://www.eclemma.org/jacoco/trunk/doc/prepare-agent-mojo.html)**。

我创建了一个项目来测试它，在 pom 的下面部分：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.jacoco</groupId>
            <artifactId>jacoco-maven-plugin</artifactId>
            <version>0.6.2.201302030002</version>
            <executions>
                <execution>
                    <goals>
                        <goal>prepare-agent</goal>
                    </goals>
                    <configuration>
                        <includes>
                            <include>my.project.package.only.*</include>
                        </includes>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <version>2.1</version>
            <executions>
                <execution>
                    <id>tomcat-startup</id>
                    <goals>
                        <goal>run-war-only</goal>
                    </goals>
                    <phase>pre-integration-test</phase>
                    <configuration>
                        <fork>true</fork>
                    </configuration>
                </execution>
                <execution>
                    <id>tomcat-shutdown</id>
                    <goals>
                        <goal>shutdown</goal>
                    </goals>
                    <phase>post-integration-test</phase>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-failsafe-plugin</artifactId>
            <executions>
                <execution>
                    <id>integration-tests</id>
                    <phase>integration-test</phase>
                    <goals>
                        <goal>integration-test</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>selenium-maven-plugin</artifactId>
            <version>2.3</version>
            <executions>
                <execution>
                    <id>start</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>start-server</goal>
                    </goals>
                    <configuration>
                        <background>true</background>
                        <logOutput>true</logOutput>
                        <multiWindow>true</multiWindow>
                    </configuration>
                </execution>
                <execution>
                    <id>stop</id>
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>stop-server</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T12:23:41.063

您可以尝试在这篇文章中查看解决方法：http: [//dougonjava.blogspot.co.il/2013/07/integration-testing-using-maven-tomcat.html](http://dougonjava.blogspot.co.il/2013/07/integration-testing-using-maven-tomcat.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-26T15:55:48.157

我解决了在使用嵌入式 Tomcat 设置 JaCoCo 代理时的问题，方法是离线检测类，然后将 JaCoCo 代理放在 Tomcat 类路径（插件依赖项）上并添加文件 jacoco-agent.properties。

我把工作配置放在我的博客上：

[http://burkond.blogspot.de/2014/05/selenium-in-sonar-code-coverage-metrics.html](http://burkond.blogspot.de/2014/05/selenium-in-sonar-code-coverage-metrics.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-12T07:38:38.463

我遇到了完全相同的问题，我发现的唯一解决方案是将`MAVEN_OPTS`先前设置为 Maven 构建（例如在命令行或 Jenkins 作业的配置中）：

```
export MAVEN_OPTS=-javaagent:~/.m2/repository/org/jacoco/org.jacoco.agent/0.7.4.201502262128/org.jacoco.agent-0.7.4.201502262128-runtime.jar=destfile=./target/jacoco.exec,append=true 
```

这会将 jacoco 代理附加到嵌入的 tomcat 实例，该实例会将覆盖结果报告回给定的`destfile`.

首先，重要的是 jacoco 运行时 JAR 的路径正确。您可以手动下载并引用它或使用另一个 Maven 命令将其下载到本地 .m2 存储库中：

```
mvn org.apache.maven.plugins:maven-dependency-plugin:2.8:get -Dartifact=org.jacoco:org.jacoco.agent:0.7.4.201502262128:jar:runtime 
```

其次，确保`jacoco.exec`文件的路径正确。就我而言，我已经在目标文件夹中有一个现有的 jacoco.exec 文件，其中包含单元测试结果。`append=true`确保单元测试和集成测试相结合。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-15T14:28:34.143

我设法做到了，它涉及一些挑剔的东西：

*   服务器/容器需要位于可以接收参数的单独 jvm 上（jacoco-agent）。使用嵌入式容器的货物似乎不起作用，调试起来很痛苦......
*   带有 jacoco-it 的 jvm 需要在 jacoco 分析之前停止（duh！）但是在 post-integration-test 上注册 container-stop 和 jacoco-report 并不能保证这一点......（先前答案中的 tcpdump 等选项有这个问题）
*   为服务器/容器定义随机端口使其易于与持续集成集成
*   phantomjs 是额外的 ;)
*   jacoco 应该用作集成测试的准备代理集成和报告集成（并没有真正的区别）

应该作为“mvn clean verify”运行

绒球：

```
<plugin>
    <groupId>org.jacoco</groupId>
    <artifactId>jacoco-maven-plugin</artifactId>
    <version>0.7.4.201502262128</version>
    <executions>
        <!-- unit test coverage -->
        <execution>
            <id>jacoco-pre-unit-test</id>
            <goals>
                <goal>prepare-agent</goal>
            </goals>
            <configuration>
                <destFile>${project.build.directory}/coverage-reports/jacoco-ut.exec</destFile>
                <propertyName>jacoco.ut.argLine</propertyName>
            </configuration>
        </execution>
        <execution>
            <id>jacoco-post-unit-test</id>
            <phase>test</phase>
            <goals>
                <goal>report</goal>
            </goals>
            <configuration>
                <dataFile>${project.build.directory}/coverage-reports/jacoco-ut.exec</dataFile>
                <outputDirectory>${project.reporting.outputDirectory}/jacoco-ut</outputDirectory>
            </configuration>
        </execution>

        <!-- integration test coverage -->
        <execution>
            <id>jacoco-pre-integration-test</id>
            <phase>pre-integration-test</phase>
            <goals>
                <goal>prepare-agent-integration</goal>
            </goals>
            <configuration>
                <destFile>${project.build.directory}/coverage-reports/jacoco-it.exec</destFile>
                <propertyName>jacoco.it.argLine</propertyName>
            </configuration>  
        </execution>
        <execution>
            <id>jacoco-post-integration-test</id>
            <phase>post-integration-test</phase>
             <goals>
                <goal>report-integration</goal>
            </goals>
            <configuration>
                <dataFile>${project.build.directory}/coverage-reports/jacoco-it.exec</dataFile>
                <outputDirectory>${project.reporting.outputDirectory}/jacoco-it</outputDirectory>
            </configuration>
        </execution>
    </executions>
</plugin>
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>sonar-maven-plugin</artifactId>
    <version>2.6</version>
</plugin>

<!-- Installs PhantomJS so it doesn't have to be pre-installed -->
<plugin>
    <groupId>com.github.klieber</groupId>
    <artifactId>phantomjs-maven-plugin</artifactId>
    <version>0.4</version>
    <executions>
        <execution>
            <!-- should be post-integration-test ? -->
            <phase>test</phase>
            <goals>
                <goal>install</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <version>1.9.7</version>
    </configuration>
</plugin>

<!-- Get two free ports for our test server to use -->
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <version>1.6</version>
    <configuration>
        <portNames>
            <portName>jetty.port</portName>
            <portName>jetty.port.stop</portName>
        </portNames>
    </configuration>
    <executions>
        <execution>
            <id>reserve-port</id>
            <phase>test</phase>
            <goals>
                <goal>reserve-network-port</goal>
            </goals>
        </execution>
    </executions>
</plugin>

<!-- Run tests (UT) -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.18.1</version>
    <configuration>
        <argLine>${jacoco.ut.argLine}</argLine>
        <skipTests>${skip.unit.tests}</skipTests>
        <testFailureIgnore>true</testFailureIgnore>
        <excludes>
            <!-- no UT execution, to test only IT
            <exclude>**/<remove this>*Test.java</exclude> -->
        </excludes>
    </configuration>
</plugin>

<!-- Use failsafe to run our integration tests -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    <version>2.17</version>
    <configuration>
        <systemPropertyVariables>
            <!-- pass these values to the test classes -->
            <phantomjs.binary>${phantomjs.binary}</phantomjs.binary>
            <jetty.port>${jetty.port}</jetty.port>
        </systemPropertyVariables>
    </configuration>
    <executions>
        <execution>
            <id>integration-test</id>
            <goals>
                <goal>integration-test</goal>
                <goal>verify</goal>
            </goals>
        </execution>
    </executions>
</plugin>

<plugin>
    <groupId>org.codehaus.cargo</groupId>
    <artifactId>cargo-maven2-plugin</artifactId>
    <version>1.4.16</version>
    <configuration>
        <skip>${skipITs}</skip>
        <container>
            <containerId>tomcat8x</containerId>
            <zipUrlInstaller>
                <!-- did not work with 'https'. Certificate problem? -->
                <url>http://archive.apache.org/dist/tomcat/tomcat-8/v8.0.26/bin/apache-tomcat-8.0.26.zip</url>
                <downloadDir>${project.build.directory}/downloads</downloadDir>
                <extractDir>${project.build.directory}/extracts</extractDir>
            </zipUrlInstaller>
        </container>
        <configuration>
            <home>${project.build.directory}/catalina-base</home>
            <properties>
                <cargo.jvmargs>${jacoco.it.argLine}</cargo.jvmargs>
                <cargo.servlet.port>${jetty.port}</cargo.servlet.port>
                <!-- <cargo.logging>high</cargo.logging>  -->
            </properties>
        </configuration>
    </configuration>
    <executions>
        <execution>
            <id>cargo-start-tomcat</id>
            <phase>pre-integration-test</phase>
            <goals>
                <goal>start</goal>
            </goals>
        </execution>
        <execution>
            <id>cargo-stop-tomcat</id>
            <phase>integration-test</phase>
            <goals>
                <goal>stop</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```**

# ios - dispatch_once 与静态

> ID：16018699
> 
> 赞同：2
> 
> 时间：2013-04-15T15:10:43.440
> 
> 标签：ios, objective-c

我目前正在为我的应用程序编写一个助手类。助手类将返回全局可访问的变量。我创建了一个简单的助手，如下所示：

```
@interface MyHelper : NSObject
{

}

+(id) sharedHelper;

+(NSMutableArray *) employers;

+(id) sharedHelper
{
    static MyHelper *sharedHelper = nil;
    static dispatch_once_t onceToken;

    dispatch_once(&onceToken,^{

        sharedHelper = [[self alloc] init];
    });

    return sharedHelper;
}

+(NSMutableArray *) employers
{
    return _employers; 
} 
```

现在我可以像这样访问雇主：

`[MyHelper employers]`我也可以像这样访问它`[[MyHelper sharedHelper] employers]`每种方法的好处是什么，或者它们都相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:22:59.477

我想雇主数组是您的 MyHelper 类的属性。

如果您在不调用 [MyHelper sharedHelper] 的情况下调用 [MyHelper 雇主]，您可能会得到不正确的结果（雇主数组的值是垃圾）。

也许这里的最佳实践是在 +(NSMutableArray *) 雇主中使用延迟加载并从 +(id) sharedHelper 中获取静态变量：

```
static MyHelper *sharedHelper = nil;
static dispatch_once_t onceToken;

+(id) sharedHelper
{
    dispatch_once(&onceToken,^{

        sharedHelper = [[self alloc] init];
    });

    return sharedHelper;
}

+(NSMutableArray *) employers
{
    if(!sharedHelper)
        [MyHelper sharedHelper]; 

    return _employers; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:40:58.303

您`employers`的类方法正在引用`_employers`，这可能是您的类的实例变量。你不能这样做。此外，即使你做了一些草率的解决方法，比如全局变量，你也不能保证`_employers`已经实例化，除非`employers`类方法也确保`sharedHelper`调用了。

所以，有几个想法：

1.  你真的应该有一些类属性`employers`（我假设你有，但为简洁起见省略了它，但让我们在此处包含它以消除歧义）：

    ```
    @interface MyHelper : NSObject

    @property (nonatomic, strong) NSMutableArray *employers;

    @end 
    ```

2.  我想你的`init`方法会初始化这个`employers`对象

    ```
    - (id)init
    {
        self = [super init];
        if (self) {
            _employers = [[NSMutableArray alloc] init];
        }
        return self;
    } 
    ```

3.  您现有的`sharedHelper`方法非常好。

4.  但是，如果您要使用`employers`类方法，则应访问`employers`实例方法：

    ```
    + (NSMutableArray *)employers
    {
        return [[MyHelper sharedHelper] employers];
    } 
    ```

完成所有这些后，您的课程将如下所示：

```
@interface MyHelper : NSObject

@property (nonatomic, strong) NSMutableArray *employers;

+ (id)sharedHelper;
+ (NSMutableArray *)employers;

@end

@implementation MyHelper

+ (id)sharedHelper
{
    static MyHelper *sharedHelper = nil;
    static dispatch_once_t onceToken;

    dispatch_once(&onceToken,^{
        sharedHelper = [[self alloc] init];
    });

    return sharedHelper;
}

- (id)init
{
    self = [super init];
    if (self) {
        _employers = [[NSMutableArray alloc] init];
    }
    return self;
}

+ (NSMutableArray *)employers
{
    return [[MyHelper sharedHelper] employers];
}

@end 
```

这行得通，但话虽如此，但就风格而言，我个人不推荐使用类方法，`employers`如果您有一个用于同名属性的 getter 方法。似乎有点混乱。我将删除`employers`该类方法，并坚持使用将为您合成的标准 getter 方法，从而得到：

```
@interface MyHelper : NSObject

@property (nonatomic, strong) NSMutableArray *employers;

+ (id)sharedHelper;

@end

@implementation MyHelper

+ (id)sharedHelper
{
    static MyHelper *sharedHelper = nil;
    static dispatch_once_t onceToken;

    dispatch_once(&onceToken,^{
        sharedHelper = [[self alloc] init];
    });

    return sharedHelper;
}

- (id)init
{
    self = [super init];
    if (self) {
        _employers = [[NSMutableArray alloc] init];
    }
    return self;
}

@end 
```

然后使用这个类的其他代码`MyHelper`可以简单地引用`[[MyHelper sharedHelper] employers]`自己。

# mysql - MySQL 第二个连接看不到第一个连接的已提交更改

> ID：16018702
> 
> 赞同：0
> 
> 时间：2013-04-15T15:10:48.420
> 
> 标签：mysql, concurrency, transactions, commit

我有一个连接到 MySQL 的基于 Grails 的应用程序的问题，其中有一个更新记录作为更大事务的一部分的进程。此过程还通过 Quartz 作业启动第二个线程，该作业将执行一些额外的更改。Quartz 作业通常在第一个线程提交事务之前开始，因此作业循环长达一分钟，检查记录是否更改为预期状态。奇怪的是，它在某些环境中始终如一地工作，在一个环境中始终失败，而在另一个环境中却很少。

我的问题与 MySQL 如何识别两个并发连接之间的事务提交有关。人们会期望，当连接 A 执行提交时，来自连接 B 的后续查询将识别提交的更改。在我的情况下，连接 B 将在连接 A 提交之前进行一次或多次相同的查询。似乎 mySQL 正在缓存连接的查询结果。奇怪的是，当连接 B 反复查询并获取旧值时，我可以通过 mysql 客户端发出相同的查询并查看新值。有人知道缓存问题或并发问题吗？

对于上述观察，我启用了 MySQL 日志，以便查看发生的单个更新、提交和查询。

各种环境使用不同版本的 MySQL，如下所示。我正在将我的环境升级到最新的 MySQL 以查看是否可以解决问题。

5.0.51a - 两个环境非常稳定，很少发生，但是一个环境在周末开始出现增加，流量适中。

5.1.55 - 一个环境始终失败

谢谢，

约翰

# r - 在 R 中，如何加入和子集 SpatialPolygonsDataFrame？

> ID：16018704
> 
> 赞同：4
> 
> 时间：2013-04-15T15:10:59.223
> 
> 标签：r, spatial

我试图弄清楚如何在 R 中执行（在 GIS 中如此简单）操作。

`spdep`让我们以包中的一些示例多边形数据集为例

```
library("spdep")
c <- readShapePoly(system.file("etc/shapes/columbus.shp", package="spdep")[1])
plot(c) 
```

我设法弄清楚我可以使用`subset`. 例如：

> cc <- 子集（c，c@data$POLYID<5） 图（cc）

现在，假设我有另一个数据框要加入我的空间数据：

```
POLYID=1:9
TO.LINK =101:109
link.data <- data.frame(POLYID=POLYID, TO.LINK=TO.LINK) 
```

使用这两个数据集，我怎样才能得到两个空间数据框：

1.  首先，由在第二个数据框中具有其 ID 的多边形组成
2.  其次，由相反的集合组成——第二个数据框中不存在的多边形。

我怎么会走到这一步？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T15:44:18.950

这可能会奏效。首先，您需要相关的 ID。

```
myIDs <- link.data$POLYID 
```

然后，`subset`按照您指出的那样使用：

```
subset(c, POLYID %in% myIDs)
subset(c, !(POLYID %in% myIDs)) 
```

请注意，这假设您的第一个数据框 ，`c`也有一个名为 的相关列`POLYID`。

# jquery - 扩展搜索文本字段，但按钮在第一次单击时不起作用

> ID：16018706
> 
> 赞同：0
> 
> 时间：2013-04-15T15:11:03.457
> 
> 标签：jquery, textbox, uisearchbar

好的，所以我得到了这些花哨的搜索框之一来展开（即：apple.com）模糊文本字段，然后再次单击。

我不想要第二次点击，我的想法是 jquery 创建一个函数，如：

```
$('.menu a').mouseover(function() {
     $('mysearch').blur();
    }); 
```

但我觉得这是错误的，所以有更好的方法来写这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:13:35.570

（更新）在对其进行更多研究并在 css 技巧上找到此内容后，帮助我了解了发生了什么：[http ://css-tricks.com/video-screencasts/123-if-it-moves-when-you-click-做东西棒/](http://css-tricks.com/video-screencasts/123-if-it-moves-when-you-click-make-something-stick/)

事实证明，一旦我将速度从“快”减至“慢”，问题就解决了：

```
$('#search-txt').focus(function () {
     $('.menu a').animate({
         'padding-right': 23,
         'padding-left': 23,
     }, 'slow');
     $(this).animate({
         width: 300
     }, 'fast');
     $('#nav-search').animate({
         width: 408
     }, 'slow');
     }).blur(function () {
          $(this).animate({
          width: 200
     }, 'slow');
     $('#nav-search').animate({
          width: 335
     }, 'slow');
     $('.menu a').animate({
         'padding-right': 30,
         'padding-left': 30,
     }, 'slow');
}); 
```

# jboss7.x - Jboss EAP 6 或 JBOSS AS 7.1.2 中的负载平衡与 Mod 集群

> ID：16018708
> 
> 赞同：0
> 
> 时间：2013-04-15T15:11:10.113
> 
> 标签：jboss7.x, load-balancing

我们在每台主机上的两台服务器上部署了两个具有相同上下文根的 war 文件。保持相同上下文根的原因是它是一场开源战争，并且更改上下文根需要一些调整，因此我们尝试使用相同的上下文根（但是，如果必须，我们愿意更改上下文根）。

**以下是主机名和端口名**

```
drhapp05:8085 - 具有上下文根 /openam 的 IDP
drhapp05:8086 - 具有上下文根 /openam 的 IDPProxy

drhapp06:8085 - 具有上下文根 /openam 的 IDP
drhapp06:8086 - 具有上下文根 /openam 的 IDPProxy

```

我们的目标是，当我们访问 url
**idpdev.devs1.int** ==> 请求应该转发到 IDP 上运行

```

  drhapp05:8085/openam 或 drhapp06:8085/openam

```

**idpproxydev.devs1.int** ==>请求应该转发到运行在

```
  drhapp05:8086/openam 或 drhapp06:8086/openam 

```

因此，我们根据 [https://community.jboss.org/wiki/VirtualHostsWithJBossAS7上的文档进行了以下更改](https://community.jboss.org/wiki/VirtualHostsWithJBossAS7)

**在 domain.xml 中（因为我们使用域模式）**

```
 <virtual-server name="devidpvs" default-web-module="OAM-IDP-1.0">
            <alias name="idpdev.devs1.int"/>
            <alias name="drhapp05"/>
            <alias name="drhapp06"/>
       </virtual-server>
       <virtual-server name="devproxyvs" default-web-module="OAM-IDPPROXY-1.0">
            <alias name="idpproxydev.devs1.int"/>
            <alias name="drhapp05"/>
            <alias name="drhapp06"/>
       </virtual-server> 
```

**在每次战争中的 jboss-web.xml**

在 jboss-web.xml 中的 idp 版本的 openam war (OAM-IDP-1.0.war) 我们

```
 <jboss-web>
           <context-root>openam</context-root>
           <virtual-host>devidpvs</virtual-host>
         </jboss-web> 
```

在 jboss-web.xml 中的 openam war (OAM-IDPPROXY-1.0) 的 idpproxy 版本中，我们有

```
 <jboss-web>
           <context-root>openam</context-root>
           <virtual-host>devproxyvs</virtual-host>
         </jboss-web> 
```

最后**在 httpd.conf**文件中的 modcluster 上，我们将以下内容添加到网络服务器上的 httpd.conf 文件中：

```
 <VirtualHost *:80>
                ServerName idpdev.devs1.int
              </VirtualHost>
              <VirtualHost *:80>
                ServerName idpproxydev.devs1.int
              </VirtualHost> 
```

此配置不允许同时访问两个 url。

```
如果我们关闭说
drhapp05:8086 - IDPProxy
drhapp06:8086 - IDPProxy
然后我们可以使用转发请求的 url idpdev.devs1.int/openam 访问 IDP
到 drhapp05:8085/openam 或 drhapp06:8085/openam
反之亦然。

```

我们尝试了 ProxyPass On 指令，但这会重定向请求而不是转发我们不想要的请求。
有什么想法我们的配置有什么问题吗？
我们还想知道是否有办法在 domain.xml 中的 alias 标记下指定端口名称。

-内存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:44:45.943

1.  我们创建了新的 dns 名称以避免重复并更新了 domain.xml（或standalone.xml）。

    ```
     <virtual-server name="devidpvs" default-web-module="OAM-IDP-1.0">
      <alias name="idpdev.devs1.int"/>
        <alias name="drhapp05_internal"/>
        <alias name="drhapp06_internal"/>
     </virtual-server>
     <virtual-server name="devproxyvs" default-web-module="OAM-IDPPROXY-1.0">
        <alias name="idpproxydev.devs1.int"/>
        <alias name="drhapp05_external"/>
        <alias name="drhapp06_external"/>
     </virtual-server> 
    ```

使得 drhapp05_external 和 drhapp05_internal的 ip 地址
匹配 drhapp05
drhapp06_external 和 drhapp06_internal 匹配 drhapp06

1.  在 httpd.conf 我们添加了附加属性 UseAlias

    ```
     <VirtualHost *:80>
            ServerName idpdev.devs1.int
            UseAlias 1   
          </VirtualHost>
          <VirtualHost *:80>
            ServerName idpproxydev.devs1.int
            UseAlias 1 
          </VirtualHost> 
    ```

我们想知道是否有办法在 domain.xml 中指定端口号，以确保在.......下 domain.xml 中的唯一性。奇怪的是，主机名在整个 domain.xml 中只能使用一次。
但无论如何，现在我们正在使用上述解决方案并且它有效。

# android - 自定义视图和 ActionBarSherlock

> ID：16018714
> 
> 赞同：1
> 
> 时间：2013-04-15T15:11:18.630
> 
> 标签：android, tabs, android-actionbar, actionbarsherlock, custom-view

我创建了一个自定义视图（我的应用程序的标题）以应用字体 ttf。问题是当设备进入横向模式并且标签进入操作栏时，我的标题正在缩小。

有人知道解决方案吗？

截图：

**普通的**

![](https://lh5.googleusercontent.com/-5hEPMAGbQoY/UWwQARU-PyI/AAAAAAAAAds/qvIZ1drVgQ0/s506/Screenshot_2013-04-15-11-21-40.png)

**景观** ![](https://lh3.googleusercontent.com/-lwmQdUWnYpw/UWwQDwnjtAI/AAAAAAAAAd0/Ae7MPiNDK7I/s800/Screenshot_2013-04-15-11-21-46.png)

# c# - SignalR 自托管：Windows 防火墙设置？

> ID：16018720
> 
> 赞同：2
> 
> 时间：2013-04-15T15:11:29.857
> 
> 标签：c#, signalr, windows-firewall, owin

我有一个 SignalR 自托管服务器应用程序。无论是作为控制台应用程序还是作为 Windows 服务运行，它都接受我们环境中所需的所有常用防火墙规则下的流量，但只有在设置了防火墙入站规则中的“程序和服务”分配时才能访问 SignalR 服务改为“所有满足指定条件的程序”而不是“本程序”。但是，对于生产环境中的操作，将需要此规则。

我猜想可能需要为“此程序”而不是自托管服务器应用程序可执行文件选择 SignalR 或 OWIN 的 DLL 之一。它是其中之一，还是完全不同的东西？入站规则属性中的“此程序：”字段应设置为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:07:44.633

经过进一步调查，事实证明实际的网络监听是由系统进程托管的。正如对[另一个问题](https://stackoverflow.com/questions/9884181/why-is-wcf-service-listening-as-pid-4-system-and-not-as-the-pid-of-the-process)的回答中所解释的那样，显然所有 HTTP 侦听都会通过系统进程结束。

将规则中的应用程序设置为“系统”可以解决此问题。

# python - Python ftplib 损坏文件？

> ID：16018721
> 
> 赞同：5
> 
> 时间：2013-04-15T15:11:34.820
> 
> 标签：python, ftp, corruption

我正在使用 ftplib 在 Python 中下载文件，直到最近一切似乎都运行良好。我正在下载这样的文件：

```
ftpSession = ftplib.FTP(host,username,password)
ftpSession.cwd('rlmfiles')
ftpFileList = filter(lambda x: 'PEDI' in x, ftpSession.nlst())
ftpFileList.sort() 
for f in ftpFileList:
    tempFile = open(os.path.join(localDirectory,f),'wb')
    ftpSession.retrbinary('RETR '+f,tempFile.write)
    tempFile.close()
ftpSession.quit()
sys.exit(0) 
```

直到最近，它还在下载我需要的文件，正如预期的那样。但是，现在，我正在下载的文件已损坏，并且仅包含一长串垃圾 ASCII。我知道我要从中提取它们的不是发布到 FTP 上的文件，因为我还有一个 Perl 脚本可以从同一个 FTP 成功执行此操作。

如果是任何附加信息，以下是调试器在下载文件时在命令提示符中显示的内容：

![在此处输入图像描述](https://i.stack.imgur.com/3BTk4.png)

`retrbinary()`有没有人在使用Python 的 ftplib时遇到过文件内容损坏的问题？

我真的很困惑/沮丧，没有遇到任何与这里可能存在的腐败有关的事情。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-22T21:51:57.460

我昨天在尝试下载文本文件时遇到了这个问题。不确定这是否是您正在做的事情，但既然您说它里面有 ASCII 垃圾，我假设您在文本编辑器中打开它，因为它应该是文本。

如果是这种情况，则问题在于该文件是一个文本文件，而您正试图以二进制模式下载它。

您要做的是以 ASCII 传输模式检索文件。

```
tempFile = open(os.path.join(localDirectory,f),'w')  # Changed 'wb' to 'w'
ftpSession.retrlines('RETR '+f,tempFile.write)       # Changed retrbinary to retrlines 
```

不幸的是，这会从文件中删除所有换行符。呸！

因此，您需要再次添加剥离的换行符：

```
tempFile = open(os.path.join(localDirectory,f),'w')
textLines = []
ftpSession.retrlines('RETR '+f,textLines.append)
tempFile.write('\n'.join(textLines)) 
```

这应该可行，但它看起来并不像它可以的那样好。所以一点清理工作会让我们：

```
temporaryFile   = open(os.path.join(localDirectory, currentFile), 'w')
textLines       = []
retrieveCommand = 'RETR '

ftpSession.retrlines(retrieveCommand + currentFile, textLines.append)
temporaryFile.write('\n'.join(textLines)) 
```

# asp.net-mvc - 不能使用以“名称”结尾的数据属性？

> ID：16018722
> 
> 赞同：6
> 
> 时间：2013-04-15T15:11:40.730
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我很清楚您对带有连字符的数据属性使用下划线（对象中的“data_bind”而不是“data-bind”），它们会自动被连字符替换。但是我遇到了一个问题，如果属性以“name”结尾，你不能这样做下划线“hack”。所以我已经尝试了这两种方法，但都没有工作：

```
@Html.TextBoxFor(model => model.Street, new { data_encrypted_name = "street" })

@Html.TextBoxFor(model => model.Street, new { @data_encrypted_name = "street" }) 
```

当我查看生成的 HTML 时，对于上述两种情况，它都会生成：

```
<input data-encrypted- id="ViewModel_Street" name="ViewModel.Street" type="text" value="" /> 
```

起初，我认为这可能与多个下划线/连字符有关，但我又尝试了两个测试用例，看看会发生什么，它们都工作得很好：

```
@Html.TextBoxFor(model => model.Street, new { data_encrypted_namme = "street" })

@Html.TextBoxFor(model => model.Street, new { data_name_encrypted = "street" }) 
```

所以这个问题肯定与属性末尾有“名称”有关。

我做错了什么或遗漏了什么，或者这是.NET如何转换属性的错误？

（为了澄清，我们使用 Braintree Payments，它们要求在某些输入上使用“数据加密名称”属性，因此我们不能只选择另一个属性名称。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:00:47.570

感谢 Tommy 对我描述的行为进行了测试，并发现这对每个人来说都不是一个错误。

在 Tommy 写完这篇文章后，我查看了我们正在使用的 Helper。我意识到我们实际上使用了一个名为“NameLessTextBoxFor”的扩展方法（我们在这里找到：[如何扩展 html.textboxfor 以删除名称属性？](https://stackoverflow.com/questions/12311364/how-to-extend-html-textboxfor-to-remove-the-name-attribute)），它`name=""`在显示之前从输入中删除属性。我应该在发布之前确认这一点，但没有意识到它会影响传递给它的 HTML 属性。

你瞧，正如您可能预期的那样，此方法的功能还切断*了*包含`name=""`. 它对该文本进行了非常简单的搜索和替换，然后将其删除。这就是这里的问题。

感谢您对这个问题的时间和关注，并很抱歉我自己没有发现这个问题。

# iphone - 使用可变语法打开 url

> ID：16018723
> 
> 赞同：0
> 
> 时间：2013-04-15T15:11:41.073
> 
> 标签：iphone, ios, objective-c

我有一个变量`agencyWebsite`和一个标签，使用此方法单击时应该打开网站：

```
- (void)website1LblTapped {
    NSURL *url = [NSURL URLWithString:self.agencyWebsite];
    [[UIApplication sharedApplication] openURL:url];
} 
```

我在编译器中收到警告说：

```
Incompatible pointer types sending UILabel* to parameter of type NSString* 
```

单击链接时应用程序崩溃。有什么建议么？

编辑：这是我正在做的使标签可点击的操作

```
UITapGestureRecognizer* website1LblGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(website1LblTapped)];
    // if labelView is not set userInteractionEnabled, you must do so
    [self.agencyWebsite setUserInteractionEnabled:YES];
    [self.agencyWebsite addGestureRecognizer:website1LblGesture]; 
```

我用来让它工作的东西

```
 NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://%@", self.agencyWebsite.text]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:14:14.767

如果`agencyWebsite`是类型`UILabel*`，则需要访问其`text`属性而不是将对象本身传递给`URLWithString:`.

```
- (void)website1LblTapped {

    NSURL *url = [NSURL URLWithString:self.agencyWebsite.text];
    [[UIApplication sharedApplication] openURL:url];
} 
```

调用`self.agencyWebsite`将返回您的`UILabel*`对象，而`self.agencyWebsite.text`将返回一个`NSString*`包含标签文本的对象。

# synchronization - GStreamer 外部时钟

> ID：16018724
> 
> 赞同：0
> 
> 时间：2013-04-15T15:11:41.637
> 
> 标签：synchronization, gstreamer, clock

我在我的媒体播放器应用程序中使用 GStreamer 来播放 TS 文件。虽然我可以播放音频和视频，但无法使用 PCR 进行同步。

谷歌搜索时，找到了[gst_pipeline_use_clock()](https://developer.gnome.org/gstreamer/stable/GstPipeline.html)的文档并在我的代码中使用了相同的文档。但是，它没有设置时钟并给出一些随机值[当使用以下方法检索时钟时间时：gst_clock_get_time()]

这就是我正在设置 PCR 时钟的方法：有什么我遗漏的吗？

```
GstClock stPCRClock = {0};
stPCRClock.last_time = (GstClockTime)pcrInfo; //pcrInfo is the PCR value: 32-bit
gst_pipeline_use_clock(pipeline, &stPCRClock); 
```

任何帮助，将不胜感激。

谢谢，

克兰蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:29:01.033

您的代码片段根本没有任何意义（您创建了一个不会滴答作响的静态时钟）。请阅读时钟的作用。如果您在特定文件的 A/V 同步方面遇到问题，请在 #gstreamer irc 频道上讨论此问题或提交错误。理想情况下，将此类有问题的视频文件提供给开发人员。

# lwuit - LWUIT 容器捕获事件

> ID：16018727
> 
> 赞同：0
> 
> 时间：2013-04-15T15:11:46.320
> 
> 标签：lwuit, nokia-s40, lwuit-container

我有一个里面加`Container`了这么多。`Labels`当我尝试`pointerReleased`在 this 中捕获事件时`Container`，我发现了一些问题。该事件仅在我在 的空闲区域发布时捕获`Container`，而不是在我在`Labels`. 有没有办法封装这个事件？我的意思是，当我对主要内容`Container`（而不是在标签上）进行重新处理时，必须启动该事件。

在这里你可以看看我的`Container`

![容器图像](https://i.stack.imgur.com/KKUFA.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:45:49.250

您应该查看 LWUIT 1.5 中添加的主要组件功能，它允许您定义一个组件来管理容器/组件的整个层次结构，并将层次结构中每个组件的所有事件发送给它。

这增加了处理所有不同元素之间的样式同步的另一个好处（例如，如果您使用一个按钮，所有组件将同时按下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:35:33.323

我没有找到任何很酷的解决方案，所以最后我将 pointerReleased 从 传播`Labels`到`Container`.

# python - 覆盖 Python 库依赖项

> ID：16018728
> 
> 赞同：1
> 
> 时间：2013-04-15T15:11:53.337
> 
> 标签：python

我有一个模块可以导入一些我想覆盖的库。例子：

*模块.py*

```
import md5

def test():
    print(md5.new("LOL").hexdigest()) 
```

*新文件.py*

```
class fake:
    def __init__(self, text):
        self.text = text
    def hexdigest(self):
        return self.text
import sys
module = sys.argv[1] # It contains "module.py"
# I need some magic code to use my class and not the new libraries!
__import__(module) 
```

**编辑 1**

我想*避免*/*skip* 导入，而不是执行它然后进行替换。

**编辑 2**

代码已修复（这只是一个示例）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:50:42.413

好吧，您的示例没有多大意义，因为您似乎将`a`and`b`视为 中的类`newfile.py`，但将其视为模块`module.py`-您实际上无法做到这一点。我想你正在寻找这样的东西......

*模块.py*

```
from some_other_module import a, b
ainst = a("Wow")
binst = b("Hello")
ainst.speak()
binst.speak() 
```

*新文件.py*

```
class a:
     def __init__(self, text):
         self.text = text
     def speak(self):
         print(self.text+"!")
class b:
     def __init__(self, text):
         self.text = text
     def speak(self):
         print(self.text+" world!")

# Fake up 'some_other_module'
import sys, imp
fake_module = imp.new_module('some_other_module')
fake_module.a = a
fake_module.b = b
sys.modules['some_other_module'] = fake_module

# Now you can just import module.py, and it'll bind to the fake module
import module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:20:38.790

传递一个空的 dicts as`globals`和`locals`to `__import__`。从他们那里删除你想要的任何东西，然后更新你的`globals`and `locals`.

```
tmpg, tmpl = {}, {}
__import__(module, tmpg, tmpl)
# remove undesired stuff from this dicts
globals.update(tmpg)
locals.update(tmpl) 
```

# xml - 使用 xsl:analyze-string 更改可能重复的多个单词

> ID：16018730
> 
> 赞同：0
> 
> 时间：2013-04-15T15:11:56.817
> 
> 标签：xml, xslt, xslt-2.0

我希望将首字母大写中的标题更改为正确的标题大小写，即文章、连词和选择介词都是小写的。最初我希望使用“停用词”列表的 xml 文档来实现这一点，但我最接近成功的是通过分析字符串中的正则表达式。问题是，作为 xslt 的新手，我不知道在不无限循环的情况下使其递归。此外，理想情况下，这将是一个函数而不是模板。我感谢那里的专家提供的任何帮助。

输入：

```
<element>
    <title>The String Is In First Letter Caps And May Have A Word Or Words Such As A, An, Or The And And, But, For, As, At, In, Or When.</title>
</element> 
```

xslt：

```
<xsl:template name="proper-case" match="/element/title">
<xsl:param name="title" select="."/> 
    <xsl:analyze-string select="$title" regex="\WA\W|\WAn\W|\WThe\W|\WAnd\W|\WBut\W|\WFor\W|\WNor\W|\WOr\W|\WFSo\W|\WYet\W|\WAs\W|\WAt\W|\WBy\W|\WIf\W|\WIn\W|\WOf\W|\WOn\W|\WTo\W|\WWith\W" flags="i">
    <xsl:matching-substring>
        <xsl:value-of select="lower-case(.)"/>                               
    </xsl:matching-substring>
    <xsl:non-matching-substring>
        <xsl:value-of select="."/>               
    </xsl:non-matching-substring>
    </xsl:analyze-string>
</xsl:template> 
```

电流输出：

```
<element>
    <title>The String Is in First Letter Caps and May Have a Word or Words Such as A, an, or The and And, but, for, as, at, in, or When.</title>
</element> 
```

期望的输出：

```
<element>
    <title>The String Is in First Letter Caps and May Have a Word or Words Such as a, an, or the and and, but, for, as, at, in, or when.</title>
</element> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:44:36.613

我认为更好的选择是为您的“停用词”列表使用一个序列。

例子..

**XML 输入**

```
<element>
    <title>The String Is In First Letter Caps And May Have A Word Or Words Such As A, An, Or The And And, But, For, As, At, In, Or When.</title>
</element> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <!--Sequence of lower case words.-->
    <xsl:param name="lcw" select="('A','An','The','And','But','For','Nor','Or',
        'So','Yet','As','At','By','If','In','Of','On','To','With','When')"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="title">
        <xsl:copy>
            <xsl:analyze-string select="." regex="\w+">
                <xsl:matching-substring>
                    <xsl:choose>
                        <xsl:when test=".=$lcw and not(position()=1)">
                            <xsl:value-of select="lower-case(.)"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:value-of select="."/>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:matching-substring>
                <xsl:non-matching-substring>
                    <xsl:value-of select="."/>
                </xsl:non-matching-substring>
            </xsl:analyze-string>           
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<element>
   <title>The String Is in First Letter Caps and May Have a Word or Words Such as a, an, or the and and, but, for, as, at, in, or when.</title>
</element> 
```

# windows - 无法在 PowerShell 上导入 MSOnline（Connect-MsolService 错误）

> ID：16018732
> 
> 赞同：20
> 
> 时间：2013-04-15T15:12:03.890
> 
> 标签：windows, powershell, azure, 64-bit, cmdlets

我遇到了这个问题，找不到任何答案。问题是我试图使用 Azure cdmlets 通过 c# 代码连接到 O365，但我无法获得`connect-msolservice`.

> “当您尝试在 Office 365 中运行管理 Windows PowerShell cmdlet 时出现“无法识别术语”错误”

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-08-22T15:33:37.503

在查看了 Microsoft 的 TechNet 文章[“Azure Active Directory Cmdlets”->“安装 Azure AD 模块”部分](https://technet.microsoft.com/en-us/library/jj151815.aspx#sectionSection1)后，似乎这个过程已经大大简化，谢天谢地。

自 2016/06/30 起，为了成功执行 PowerShell 命令`Import-Module MSOnline`和`Connect-MsolService`，您需要安装以下应用程序（仅限 64 位）：

1.  适用操作系统：Windows 7 至 10
    名称：“Microsoft Online Services Sign-in Assistant for IT Professionals RTW”
    版本：（`7.250.4556.0`最新）
    安装程序 URL：[https ://www.microsoft.com/en-us/download/details.aspx ?id=41950](https://www.microsoft.com/en-us/download/details.aspx?id=41950)
    安装程序文件名：`msoidcli_64.msi`
2.  适用操作系统：Windows 7 到 10
    名称：“Windows Azure Active Directory Module for Windows PowerShell”
    版本：未知，但最新安装程序文件的 SHA-256 哈希为`D077CF49077EE133523C1D3AE9A4BF437D220B16D651005BBC12F7BDAD1BF313`
    Installer URL：[https ://technet.microsoft.com/en-us/ library/dn975125.aspx](https://technet.microsoft.com/en-us/library/dn975125.aspx)
    安装程序文件名：`AdministrationConfig-en.msi`
3.  适用操作系统：**仅限**
    Windows 7 名称：“Windows PowerShell 3.0”
    版本：（`3.0`以后的版本可能也可以使用）
    安装程序 URL：[https](https://www.microsoft.com/en-us/download/details.aspx?id=34595)
    ://www.microsoft.com/en-us/download/details.aspx?id=34595 安装程序文件名：`Windows6.1-KB2506143-x64.msu`

[![在此处输入图像描述](https://i.stack.imgur.com/GzkHY.png)](https://i.stack.imgur.com/GzkHY.png) [![在此处输入图像描述](https://i.stack.imgur.com/86oTd.png)](https://i.stack.imgur.com/86oTd.png) [![在此处输入图像描述](https://i.stack.imgur.com/0YgOT.png)](https://i.stack.imgur.com/0YgOT.png)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-15T15:12:03.890

经过几个小时的搜索和尝试，我发现在 x64 服务器上必须为 x64 安装 MSOnline 模块，并且一些需要运行它们的程序使用的是 x86 PS 版本，所以他们永远找不到它。

**[解决方案]** 我为解决这个问题所做的是：

从源复制调用的文件`MSOnline`夹`MSOnline Extended`

> C:\Windows\System32\WindowsPowerShell\v1.0\Modules\

到文件夹

> C:\Windows\SysWOW64\WindowsPowerShell\v1.0\Modules\

然后在 PS 中运行`Import-Module MSOnline`，它会自动获取模块：D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-29T18:54:03.717

我正在使用更新版本的 SPO 命令行管理程序。为了让错误消失，我将 Import-Module 语句更改为使用：

`Import-Module Microsoft.Online.SharePoint.PowerShell -DisableNameChecking;`

我还使用较新的命令：

`Connect-SPOService`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-10T18:09:25.103

将 32 位库复制到 64 位的解决方案对我不起作用。有效的是取消选中项目属性中的 Target Platform Prefer 32-bit 复选标记。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-10T19:22:38.180

在一个易于使用的脚本中连接到 Office 365 和 Exchange Online。

提醒：您必须安装以下内容才能通过 PowerShell 管理 Office 365。

Microsoft 在线服务登录助手： http: [//go.microsoft.com/fwlink/ ?LinkId=286152](http://go.microsoft.com/fwlink/?LinkId=286152)

适用于 Windows PowerShell 32 位的 Azure AD 模块 - [http://go.microsoft.com/fwlink/p/?linkid=236298](http://go.microsoft.com/fwlink/p/?linkid=236298) 64 位 - [http://go.microsoft.com/fwlink/p/?linkid=236297](http://go.microsoft.com/fwlink/p/?linkid=236297)

更多信息在这里： [http ://technet.microsoft.com/en-us/library/hh974317.aspx](http://technet.microsoft.com/en-us/library/hh974317.aspx)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-10-20T04:09:04.417

需要以下内容：

*   需要下载并安装 MS 在线服务助手。
*   需要下载并安装适用于 PowerShell 的 MS 在线模块
*   在 PowerShell 中连接到 Microsoft Online

资料来源：[http ://www.msdigest.net/2012/03/how-to-connect-to-office-365-with-powershell/](http://www.msdigest.net/2012/03/how-to-connect-to-office-365-with-powershell/)

如果您正在运行 64 位计算机，请按照此操作：我目前正在运行 x64 操作系统（Win8 Pro）。

从 (1) –> (2) 复制文件夹 MSOnline，如下所示

1) C:\Windows\System32\WindowsPowerShell\v1.0\Modules(MSOnline)

2) C:\Windows\SysWOW64\WindowsPowerShell\v1.0\Modules(MSOnline)

资料来源： http: [//blog.clauskonrad.net/2013/06/powershell-and-c-cant-load-msonline.html](http://blog.clauskonrad.net/2013/06/powershell-and-c-cant-load-msonline.html)

希望这会更好，可以节省一些人的时间

# php - 如何重定向到另一个页面

> ID：16018734
> 
> 赞同：-5
> 
> 时间：2013-04-15T15:12:10.887
> 
> 标签：php

想要从数据库中获取一个号码并使用该号码指向一个新页面

```
$sql4="SELECT `level_crossed` FROM $tbl_name WHERE username='$myuser' and password='$mypass'";
$result4=mysql_query($sql4);
$disp4=mysql_fetch_assoc($result4);

header('Location: quiz".$disp4.".php'); 
```

水平交叉是整数类型。我想根据存储在`level_crossed`属性中的值将当前页面重定向到 quiz1 或 quiz2 或 quiz 3 页面。

但它无法重定向。网址为[http://treasurehunt.faltutalk.com/quiz%22](http://treasurehunt.faltutalk.com/quiz%22) .$result.%22.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:15:39.933

您在标头函数调用中使用的字符串有混合引号，因此它是错误的。您可以选择以下选项之一：

首先，得到一个普通的字符串：

```
$str = $disp4['level_crossing']; 
```

然后选择：

```
header('Location: quiz'.$str.'.php'); 
```

或者

```
header("Location: quiz$disp4.php"); 
```

甚至

```
header("Location: quiz".$str.".php"); 
```

下次，请仔细检查您的报价。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:16:36.193

将其更改为`header("Location: quiz{$disp4['level_crossed']}.php");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:17:03.070

将双引号换成单引号

# google-app-engine - 如何在 Go 中获取应用程序版本？

> ID：16018738
> 
> 赞同：-1
> 
> 时间：2013-04-15T15:12:18.700
> 
> 标签：google-app-engine, go, version

我想使用我在 app.yaml 中设置的版本作为我的 css 和 js 文件的查询字符串变量，这样当我更新我的应用程序时，如果它已被缓存，我的用户的浏览器将获取最新版本。我找不到“appengine”包的良好参考，我假设它具有我正在寻找的变量。谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:48:41.593

请参阅以下 appengine/context 方法：

[https://developers.google.com/appengine/docs/go/reference#VersionID](https://developers.google.com/appengine/docs/go/reference#VersionID)

# javascript - Highcharts：在一个系列中更改气泡的颜色

> ID：16018739
> 
> 赞同：3
> 
> 时间：2013-04-15T15:12:21.993
> 
> 标签：javascript, highcharts, bubble-chart

我可以在气泡图中为系列设置不同的颜色吗？我尝试设置属性“颜色”但不起作用。

```
 data: [{
            x: 23,
            y: 22,
            z: 200,
            name:"point1",
            color: 'red'
        }, {
            x: 43,
            y: 12,
            z: 100,
            name:"point2",
            color:'yellow'
        }] 
```

也许我可以在意甲中使用标签，但我更喜欢更改气泡，这可能吗？

```
dataLabels: {
      enabled: true,
      color: 'red'
} 
```

这是我的 jsfiddle：http: [//jsfiddle.net/tqVF8/2/](http://jsfiddle.net/tqVF8/2/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-13T15:13:58.537

在您的情况下，您可以添加属性“fillColor”

```
 data: [{
            x: 23,
            y: 22,
            z: 200,
            name:"point1",
            color: 'red',
            fillColor : 'red'
        }, {
            x: 43,
            y: 12,
            z: 100,
            name:"point2",
            color:'yellow',
            fillColor : 'yellow'
        }] 
```

示例：http: [//jsfiddle.net/tqVF8/17/](http://jsfiddle.net/tqVF8/17/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-15T15:27:37.720

每个需要唯一颜色的点都需要自己的系列对象。这有点奇怪，但这有效：

```
 series: [{
        data: [{
            x: 23,
            y: 22,
            z: 200,
            name:"point1"
        }, {
            x: 43,
            y: 12,
            z: 100,
            name:"point2",
        }],
        color: "yellow"
    },{
        data: [{
            x: 50,
            y: 22,
            z: 150,
            name:"point3"
        }, {
            x: 43,
            y: -30,
            z: 100,
            name:"point4",
        }],
        color: "blue"
    }] 
```

从网站上查看这个演示：[http ://www.highcharts.com/demo/bubble-3d](http://www.highcharts.com/demo/bubble-3d)

这是一个 js fiddle 与您的示例：http: [//jsfiddle.net/Robodude/tqVF8/7/](http://jsfiddle.net/Robodude/tqVF8/7/)

# facebook - Facebook PHP SDK - 必须使用活动访问令牌来查询有关当前用户的信息

> ID：16018741
> 
> 赞同：0
> 
> 时间：2013-04-15T15:12:23.220
> 
> 标签：facebook, facebook-graph-api, oauth, facebook-php-sdk

我对 Facebook PHP SDK 有疑问。它总是抛出那个异常。我尝试了此处列出的许多解决方案，但对我没有任何帮助。

Facebook 似乎返回给我有效的访问令牌，因为我在我的应用程序仪表板中使用调试工具对其进行了测试。

我的情况是什么？

我想通过调用静态函数将简单的内容发布到用户的墙上：

```
function social_publish($network, $title, $message, $link = '', $image = '') {

    global $_config;

    // Initialize Facebook SDK
    $facebook = new Facebook(array(
                'appId' => $_config['fb_app']['app_id'],
                'secret' => $_config['fb_app']['app_security_key']
            ));

    // Set data
    $attachment = array(
        'name' => $title,
        'caption' => $title,
        'message' => $message,
        'link' => $link,
        'picture' => $image,
        'actions' => array('name' => 'Test', 'link' => 'Link')
    );

    try {

        $access_token = $facebook->getAccessToken(); // returns valid access token

        $uid = $facebook->getUser(); // always return 0

        $result = $facebook->api( '/' . $_config['fb_profile'] . '/feed/', 'post', $attachment); // $_config['fb_profile'] procudes 'me' in this case

    } catch (FacebookApiException $e) {

        echo $e->getMessage();
    }
} 
```

请注意：我不在本地环境中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:23:34.577

当我决定使用 JavaScript SDK 时，按照范围请求向 Facebook 提出的身份验证问题解决它，然后，这是解决方案：

```
FB.getLoginStatus(function(response) {
    if ( ! response.authResponse ) {
        FB.login(function(response) {
            // handle the response if needed
        }, {scope: 'publish_actions, publish_stream'});
    }
}); 
```

谢谢！:-)

# django - 编写 django 信号钩子来检查用户是否已经存在

> ID：16018743
> 
> 赞同：0
> 
> 时间：2013-04-15T15:12:37.377
> 
> 标签：django, django-signals, django-users

我们最近从一个 LDAP 系统切换到另一个。不幸的是，不仅 LDAP 服务器发生了变化，而且所有用户名也发生了变化。

我设法配置`django_auth_ldap`处理两个 LDAP 服务器，但是我无法阻止在我的数据库中创建新用户。

我试图连接一个监听器，`django_auth_ldap.backend.populate_user.connect`但该信号被评估`after`为一个用户已经创建。

那么最好的方法是什么：

*   验证用户
*   检查用户名是否在数据库中
*   检查数据库中的替代用户名
*   必要时更新用户名（找到新旧用户映射）
*   如果在任何地方都找不到，则创建新用户

**编辑**我知道信号处理程序，但我不知道如何（以及在​​代码中的何处）解决防止重复用户创建的任务。我应该在哪里连接我的代码来检查旧用户名和新用户名？

**编辑2：**

我已尝试关注，但仍在`new_name`创建用户。

```
# touple of old user and new user names
username_list = [('old_name', 'new_name') ]

@receiver(pre_save, sender=User)
def check_if_user_exists(sender, **kwargs):
    try:
        print "check_if_user_exists:"
        user_instance = kwargs['instance']
        print user_instance
        if any([x[1] == user_instance.username for x in username_list]):
            print "new user name found!"
            # get old username
            user = User.objects.get(username = x[0])
            user.username = user_instance.username
            return user
        else:
            print "user not found :("
    except ObjectDoesNotExist:
        print ('user not found')
        pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:23:21.823

这就是您在 a`signal_handler`上实现 a 的方式`pre_save`。这些应该存在于您的`models.py`.

```
@receiver(pre_save, sender=MyModel)
def check_if_user_exists_based_on_whatever(sender, **kwargs):
    try:
        user = MyModel.objects.get(kwargs['instance'].<field_to_get_on_model>)
        user.username = "new_username"
        user.save()
    except ObjectDoesNotExist:
        user = MyModel.create(name="mymyself", lastname="andI") 
```

这只是一个基本示例，我并不真正了解您的所有验证逻辑。^_^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:45:50.167

我最终编写了自己的身份验证后端，覆盖`get_or_create_user`.

# c# - 如何在 C# 中从 PowerPoint 幻灯片中读取复杂的方程式

> ID：16018744
> 
> 赞同：2
> 
> 时间：2013-04-15T15:12:37.423
> 
> 标签：c#, .net, ms-office, powerpoint, office-interop

我正在尝试阅读 PowerPoint 幻灯片。但是当我的程序遇到像 " **Vo = Σ CF/(1+t)** " 这样的文本时**，shape.TextFrame.TextRange.Paragraphs(paraindex,1).Text**属性无法正确读取（特别是 Σ 符号和下标 0 （零）与 V）。所以最终的结果是乱码。

[编辑]：我发现 ppt 的创建者使用**Insert->Equation** of powerpoint 来编写 "Σ CF" 。所以它变成了一个特殊的文本。

[注意]：在不使用 Insert->Equation 工具、[按 Alt+228 和下标选项] 的情况下在文本/等式上方编写我的代码会产生预期的结果。

请建议是否有办法处理使用 Insert->Equation 工具编写的文本/方程。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:55:55.520

这不是答案，但注释太短并且不允许代码格式化。
无论如何，这并不完全正确，但可能会让您指向正确的方向。

```
Dim oSh As Shape
Dim x As Long
Dim y As Long
Dim lMathStart As Long
Dim lMathEnd As Long
Dim oTempShape As Shape

Set oSh = ActiveWindow.Selection.ShapeRange(1)
With oSh.TextFrame2.TextRange

    For x = 1 To .MathZones.Count
        With .MathZones(x)
            lMathEnd = .Characters.Count
            lMathStart = InStr(oSh.TextFrame.TextRange.Text, .Characters)

            Set oTempShape = oSh.Duplicate(1)
            With oTempShape.TextFrame.TextRange
                '.Characters(lMathStart, lMathEnd).Delete
                .Characters(1, lMathStart).Delete
                .Characters(lMathEnd).Delete
            End With

        End With
    Next
End With 
```

逻辑实际上更像是：对于每个数学区域，复制原始形状，然后对于复制形状中的每个数学区域，删除数学区域之前和之后的所有字符，只留下方程式以导出为形状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:34:16.410

如果您的 SWF 中出现乱码，可能是因为 Flash 不支持 Unicode，或者因为将错误的字符传递到 SWF 中。例如，这将使您了解所选方程式中的内容。请注意，如果您使用 Asc() 而不是 AscW()，则会得到不正确的结果。

```
Sub WhatsInTheEquation()
    Dim oSh As Shape
    Dim oRng As TextRange2
    Dim sTemp As String
    Dim x As Long

    Set oSh = ActiveWindow.Selection.ShapeRange(1)
    For Each oRng In oSh.TextFrame2.TextRange.Runs
        Debug.Print oRng.Text
        Debug.Print oRng.Font.Name
        Debug.Print "Size: " & oRng.Font.Size
        sTemp = ""
        For x = 1 To Len(oRng.Text)
            sTemp = sTemp & " " & AscW(Mid$(oRng.Text, x, 1))
        Next
        Debug.Print sTemp
    Next

End Sub 
```

# android - 在android中向画布添加两个以上的图像

> ID：16018745
> 
> 赞同：1
> 
> 时间：2013-04-15T15:12:37.823
> 
> 标签：android

我是 android 新手，并试图将三个图像合并到画布中。正如你将在我的代码中看到的那样，使用三个图像。但在画布中只有两个图像显示第一个和最后一个，看起来像中间图像（沙漠）在画布中绘制时丢失。这是代码

代码：-

```
package com.example.combineimage;

import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;

import android.os.Bundle;
import android.os.IInterface;
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.BlurMaskFilter;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.graphics.Rect;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;

public class CombineActivity extends Activity {

    private Bitmap image1,image2,image3,combo_image,image1newsize,image2newsize,image3newsize,merge_image;
    Context mcontext;
    private InputStream inputis1,inputis2,inputis3;
    private Button click_to_combine;
    private final int fixedimage_size=100;
    private ImageView final_imageview;
    int blurValue = 5;
    ArrayList<Bitmap> myimage_list;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_combine);
        mcontext=CombineActivity.this;

        click_to_combine=(Button) findViewById(R.id.button_click);

        final_imageview=(ImageView) findViewById(R.id.imageView1);

        myimage_list=new ArrayList<Bitmap>();

        try{
            inputis1=mcontext.getResources().openRawResource(R.drawable.koala);
        image1=BitmapFactory.decodeStream(inputis1);
        image1newsize=resize_image(image1);
        inputis2=mcontext.getResources().openRawResource(R.drawable.desert);
         image2 = BitmapFactory.decodeStream(inputis2);
         image2newsize=resize_image(image2);
         inputis3 =mcontext.getResources().openRawResource(R.drawable.jellyfish);
         image3=BitmapFactory.decodeStream(inputis3);
         image3newsize=resize_image(image3);

         myimage_list.add(image1newsize);
         myimage_list.add(image2newsize);
         myimage_list.add(image3newsize);
        }
        finally
        {
            try {
                inputis2.close();
                inputis2.close();
                inputis3.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        click_to_combine.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                merge_image=merge_given_image(myimage_list);

                final_imageview.setImageBitmap(merge_image);
            }
        });

    }

    protected Bitmap merge_given_image(ArrayList<Bitmap> myimage_list2) {
        // TODO Auto-generated method stub
        Rect srcrect,destrect;
        Bitmap combobitmap;
        int total_width=0,total_height=0;
        int total_image=myimage_list2.size();
        int count=0;
        Canvas mcanvas;
        Bitmap temp_bitmap=null;
        for(int i=0;i<total_image;i++)
        {
             temp_bitmap=myimage_list2.get(i);
            total_width=total_width+temp_bitmap.getWidth();
            Log.e("Total size", ".."+total_width+total_image);

        }
        total_height=temp_bitmap.getHeight();
        Log.e("Total size", ".."+total_height);
        combobitmap=Bitmap.createBitmap(total_width, total_height, Bitmap.Config.ARGB_8888);
        mcanvas=new Canvas(combobitmap);

        for(int i=0;i<total_image;i++)
        {
            srcrect=new Rect(0, 0, myimage_list2.get(i).getWidth(), myimage_list2.get(i).getHeight());
            destrect=new Rect(srcrect);
            if(i!=0)
            {
                destrect.offset(myimage_list2.get(i-1).getWidth(), 0);

                count=count+1;
                Log.e("COUNT", ".."+count);
            }

            mcanvas.drawBitmap(myimage_list2.get(i), srcrect, destrect, null);

        }

        return combobitmap;
    }

    private Bitmap resize_image(Bitmap image_org) {

        int org_width=image_org.getWidth();
        int org_height=image_org.getHeight();

        int newheight=fixedimage_size;
        int newwidth=fixedimage_size;

        float scalewidth=((float)newwidth)/org_width;
        float scaleheight=((float)newheight)/org_height;

        Matrix matrix=new Matrix();

        matrix.postScale(scalewidth, scaleheight);

        Bitmap newsizeimage=Bitmap.createBitmap(image_org, 0, 0, org_width, org_height, matrix, true);

        return newsizeimage;
        // TODO Auto-generated method stub

    }

    protected Bitmap merge_given_image(Bitmap image_first, Bitmap image_second,
            Bitmap image_third) {
        // TODO Auto-generated method stub

        Bitmap combobitmap;
        //BlurMaskFilter blurfilter;
        //Paint paintblur=new Paint();

        int total_width,total_height;

        total_width=image_first.getWidth()+image_second.getWidth()+image_third.getWidth();
        total_height=image_first.getHeight();

        combobitmap=Bitmap.createBitmap(total_width, total_height, Bitmap.Config.ARGB_8888);
        Canvas combocanvas=new Canvas(combobitmap);

//      //Create background in White
//       Bitmap alpha = combobitmap.extractAlpha();
//       paintblur.setColor(Color.WHITE);
//       combocanvas.drawBitmap(combobitmap, 0, 0, paintblur);

//      //Create outer blur, in White
//       blurfilter = new BlurMaskFilter(blurValue, BlurMaskFilter.Blur.OUTER);
//       paintblur.setMaskFilter(blurfilter);
//       combocanvas.drawBitmap(combobitmap, 0, 0, paintblur);

//      //Create inner blur
//       blurfilter = new BlurMaskFilter(blurValue, BlurMaskFilter.Blur.INNER);
//       paintblur.setMaskFilter(blurfilter);
//       combocanvas.drawBitmap(combobitmap, 0, 0, paintblur);

        combocanvas.drawBitmap(image_first,0f, 0f, null);
        combocanvas.drawBitmap(image_second, (image_first.getWidth()/2), 0f, null);
        combocanvas.drawBitmap(image_third, image_second.getWidth(), 0f, null);

        return combobitmap;

    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        image1.recycle();
        image1newsize.recycle();
        image2.recycle();
        image2newsize.recycle();
        image3.recycle();
        image3newsize.recycle();
        super.onPause();
    }

} 
```

在上面的代码中，你会发现两种方法，一种具有三个位图，一种方法具有这三个图像的数组列表。所以在具有三个图像的方法中显示前两个图像的一半并进行一些修改，即`combocanvas.drawBitmap(image_second, (image_first.getWidth()/2), 0f, null);`但具有数组列表的方法仅显示两个图像.这里也是输出的快照![输出快照](https://i.stack.imgur.com/u3kUP.png)。我关注并通过他的链接是 1：[将图像与 rect draw](https://stackoverflow.com/questions/12151727/create-alpha-gradient-on-image-to-create-fade-effect)合并 2：[在画布中合并图像](https://stackoverflow.com/questions/2416456/how-to-add-3-images-in-a-canvas-in-android)

但没有得到所需的输出，所以任何人都可以告诉我我在哪里做错了。任何帮助都会非常有帮助。谢谢

# python - 在 Python 中将股票报价拆分为代币

> ID：16018746
> 
> 赞同：0
> 
> 时间：2013-04-15T15:12:40.730
> 
> 标签：python, regex, string

我需要阅读股票报价的文本文件并对每个股票数据（即文件中的一行）进行一些处理。

股票数据如下所示：

```
[class,'STOCK'],[symbol,'AAII'],[open,2.60],[high,2.70],[low,2.53],[close,2.60],[volume,458500],[date,'21-Dec-04'],[openClosePDiff,0.0],[highLowPDiff,0.067],[closeEqualsLow,'false'],[closeEqualsHigh,'false'] 
```

如何将行拆分为标记，其中每个标记都包含在方括号中，.ie 对于上面的行，标记应该是`"class, 'STOCK'"`，`"symbol, 'AAII'"`等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T15:25:28.027

`print(re.findall("\[(.*?)\]", inputline))`

或者也许没有正则表达式：

`print(inputline[1:-1].split("],["))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:27:28.173

试试这个代码：

```
#!/usr/bin/env python3

import re

str="[class,'STOCK'],[symbol,'AAII'],[open,2.60],[high,2.70],[low,2.53],[close,2.60],[volume,458500],[date,'21-Dec-04'],[openClosePDiff,0.0],[highLowPDiff,0.067],[closeEqualsLow,'false'],[closeEqualsHigh,'false']"
str = re.sub('^\[','',str)
str = re.sub('\]$','',str)
array = str.split("],[")
for line in array:
    print(line) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T15:28:24.510

从...开始：

```
re.findall("[^,]+,[^,]+", a) 
```

这将为您提供以下列表：

`[class,'STOCK']`，`[symbol,'AAII']`等等，然后你可以剪掉括号。

如果您想要一个功能性的衬里，请使用：

`map(lambda x: x[1:-1], re.findall("[^,]+,[^,]+", a))`

第一部分每秒拆分一次`,`，地图（对于列表中的每个项目，使用`lambda`函数..）切割括号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T15:33:57.430

```
import re

s = "[class,'STOCK'],[symbol,'AAII'],[open,2.60],[high,2.70],[low,2.53],[close,2.60],[volume,458500],[date,'21-Dec-04'],[openClosePDiff,0.0],[highLowPDiff,0.067],[closeEqualsLow,'false'],[closeEqualsHigh,'false']"

m = re.findall(r"([a-zA-Z0-9]+),([a-zA-Z0-9']+)", s)
d= { x[0]:x[1] for x in m }

print d 
```

您可以在此处运行代码段：`http://liveworkspace.org/code/EZGav$35`

# git - 如何重新启动 git/GitHub 项目？

> ID：16018747
> 
> 赞同：4
> 
> 时间：2013-04-15T15:12:47.277
> 
> 标签：git, github

我已经在 GitHub 上托管的一个项目上工作了一段时间。但是，我现在决定以不同的方式重写我的应用程序，并从头开始。我重命名了旧的本地存储库并创建了一个新存储库。

如何使用新的存储库来替换托管在 GitHub 上的存储库？我真的不在乎我的旧历史和问题是否存在。最好的方法是删除 GitHub 存储库并创建一个新存储库吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T15:19:57.237

重命名现有的 GitHub 存储库并使用旧名称创建一个新存储库。您将拥有旧版本的历史记录以及指向新版本的链接。它会让一些人感到困惑，但它会产生预期的效果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T15:15:35.070

只需创建新文件并强制将它们提交到您的主分支：

`git push -f origin master`

如果您没有在当前目录中创建存储库，只需启动存储库清理：

```
git init
git remote add origin <repository git URL>
git push -f origin master 
```

正如@meagar 在下面的评论中指出的那样；如果您关心您的分叉、历史或以前的代码库，请不要这样做。

# spring - 是否可以将 OSGi 与 Spring Data 集成？

> ID：16018755
> 
> 赞同：15
> 
> 时间：2013-04-15T15:12:53.273
> 
> 标签：spring, osgi, spring-data

我目前正在开发一个在使用 JPA 和 QueryDSL 的 apache Karaf 下运行的 OSGi 应用程序。

我想知道是否可以将 Spring Data 与 QueryDSL 一起使用，而不是当前的方法。

这样做的原因是我发现 Spring 存储库非常有用，并且拥有用于 NoSQL 数据库访问的模板在将来可能会很有用。

我尝试使用 OSGi 启动一个没有 Web 上下文的普通 Spring 应用程序，但是当它尝试加载 applicationContext.xml 或 ApplicationContext.class 时出现 ClassNoutFoundException。

我不想使用 Spring DM，因为它已停产。

基本上，想要尝试这种集成的唯一原因是为了 Spring Repositories，但如果你认为这没有必要，请告诉我。任何有关如何实现这一目标或是否可以说服的信息都将受到欢迎。

谢谢

**更新**

我已经设法通过使用`org.eclipse.gemini.blueprint.context.support.OsgiBundleXmlApplicationContext`. applicationContext 在 OSGi 中作为服务导出，我可以通过调用它来获取我需要的所有 bean。

我现在遇到的问题是，当我声明时`<jpa:repositories base-package="x.y.z" />`出现以下异常：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0' defined in URL [bundle://251.13:0/META-INF/spring/applicationContext.xml]: Initialization of bean failed; nested exception is java.lang.IllegalStateException: No persistence exception translators found in bean factory. Cannot perform exception translation.
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)[185:org.springframework.beans:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)[185:org.springframework.beans:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)[185:org.springframework.beans:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)[185:org.springframework.beans:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)[185:org.springframework.beans:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)[185:org.springframework.beans:3.1.4.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1109)[187:org.springframework.context:3.1.4.RELEASE]
    at org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext.registerBeanPostProcessors(AbstractDelegatedExecutionApplicationContext.java:502)[193:org.eclipse.gemini.blueprint.core:1.0.0.RELEASE]
    at org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext.registerBeanPostProcessors(AbstractDelegatedExecutionApplicationContext.java:451)[193:org.eclipse.gemini.blueprint.core:1.0.0.RELEASE]
    at org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext$4.run(AbstractDelegatedExecutionApplicationContext.java:306)[193:org.eclipse.gemini.blueprint.core:1.0.0.RELEASE]
    at org.eclipse.gemini.blueprint.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85)[193:org.eclipse.gemini.blueprint.core:1.0.0.RELEASE]
    at org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java:290)[193:org.eclipse.gemini.blueprint.core:1.0.0.RELEASE]
    at org.eclipse.gemini.blueprint.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:137)[194:org.eclipse.gemini.blueprint.extender:1.0.0.RELEASE]
    at java.lang.Thread.run(Thread.java:662)[:1.6.0_37]
Caused by: java.lang.IllegalStateException: No persistence exception translators found in bean factory. Cannot perform exception translation.
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:142)[195:org.springframework.transaction:3.1.4.RELEASE]
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:79)[195:org.springframework.transaction:3.1.4.RELEASE]
    at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70)[195:org.springframework.transaction:3.1.4.RELEASE]
    at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:103)[195:org.springframework.transaction:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1475)[185:org.springframework.beans:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1443)[185:org.springframework.beans:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)[185:org.springframework.beans:3.1.4.RELEASE] 
```

作为 JPA 提供者，我正在使用 OpenJPA。entityManagerFactory 是我可以通过使用蓝图获得的服务。我想我需要在 中引用它`<jpa:repositories base-package="x.y.z" />`，但是由于 applicationContext.xml 是由 spring 而不是蓝图读取的，我该怎么做？

我真的很感激任何正确方向的提示。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-19T22:35:57.203

直接在您的代码中使用 Querydsl-SQL 和

*   它将在 OSGi 中很好地工作，因为它不使用类加载、编织、增强、缓存和其他听起来非常好但会导致混乱的技巧
*   您的代码将比任何“缓存增强”JPA 引擎运行得更快
*   其他人将能够理解您的代码（不像 JPA Criteria API 查询）
*   您将准确了解数据库服务器上运行的哪些 SQL 命令可以最大限度地缩短解决问题的时间
*   您的代码将与任何 ORM 工具一样独立于数据库

不要将 Spring、spring-data、JPA 和其他整体技术与 OSGi 一起使用作为

*   它们被设计为在一个整体系统中工作，其中一切都在一个应用程序上下文中，而不是在单独的包中
*   通过将这些技术与 OSGi 一起使用，您将花费大部分时间来修复此类错误并寻找解决方法

对此争论不休的人，已经花了很多时间寻找这样的解决方法。他们设法实现了一些业务逻辑。他们希望他们现在真正为每个概念问题找到了解决方法，并且他们下次不必花费相同的工作量。他们[在进行竞价拍卖](http://en.wikipedia.org/wiki/Bidding_fee_auction)。诚实的家伙！在某个地方，你知道我是对的；-)。

我是根据我的经验这么说的

*   尝试了基于 Hibernate 的完美堆栈，并且[不要重复](http://www.ibm.com/developerworks/library/j-genericdao/)IBM 的 DAO 文章（早在 Spring-Data 炒作开始之前）。两次
*   为 Hibernate 4.1.x编写了[hibernate-osgi-adapter](https://github.com/everit-org-archive/osgi-hibernate)
*   [重新实现](https://github.com/everit-org-archive/osgi-jpa-container)了 OSGi Enterprise 规范的完整 JPA 章节

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T06:34:50.197

好吧，您在这里有几个选择，尝试让它与蓝图一起运行（可能是最难的 - 因为您需要调用 spring bean，但我认为仍然可以完成），使用 Karaf 3.0.0.RC1 它也支持蓝图Geminin 确实对 Spring 有更严格的支持，最后但并非最不重要的是使用 Spring-DM，即使它已停产，您也可以使用并且可能最好的方法是将 spring-dm 用于某些 Spring 特定部件和 std。其余的蓝图。因为您只是通过这两个框架使用服务，所以一切都会正常工作，只是不要将 spring 和 blueprint 描述符混合在一个包中。

# android - 使用 setRotation 后设置宽度/高度

> ID：16018756
> 
> 赞同：2
> 
> 时间：2013-04-15T15:12:55.737
> 
> 标签：android, resize, android-relativelayout, dimensions

我正在构建一个 Android 应用程序，它将在由 Android 驱动的 Mini PC / Cyclone 设备上使用，我的一个要求是强制应用程序切换到纵向。我的第一个想法是以编程方式设置方向，如下所示：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

它适用于平板电脑/手机，但不适用于 Mini / Cyclone PC - 方向仍然是横向。我的下一个想法是使用 RelativeLayout （这是我的根容器）的 setRotation() 方法将其旋转 90 度 - 效果很好，但宽度/高度不适应屏幕的大小。我最终得到的是相对布局旋转了 90 度，但宽度和高度仍然是横向的。我尝试通过设置它的 LayoutParams 来手动设置 RelativeLayout 控件的宽度/高度，虽然它整理了宽度，但高度不正确，因为它只占用了屏幕的一半。这就是我目前正在做的事情：

```
m_container.setRotation(-90);

RelativeLayout.LayoutParams portraitParams = new RelativeLayout.LayoutParams(Util.getDisplayHeight(MainActivity.this), Util.getDisplayWidth(MainActivity.this));

m_container.setLayoutParams(portraitParams); 
```

getDisplayHeight/Width 方法正确返回屏幕的宽度/高度。

谁能指出我做错了什么/有任何建议如何正确设置我的 RelativeLayout m_container 的宽度/高度？

非常感谢，

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:00:19.253

您是否尝试在相关活动的 AndroidManifest.xml 中设置 android:screenOrientation="portrait" ？

# ruby-on-rails - link_url 没有响应 config.action_controller.relative_url_root

> ID：16018757
> 
> 赞同：1
> 
> 时间：2013-04-15T15:12:55.930
> 
> 标签：ruby-on-rails, apache, passenger, mod-proxy

我在端口 3000 上运行我的 Rails 应用程序，mod_proxy 将请求转发到 /rails，到`http://localhost:3000`.

我正在尝试`link_to`考虑子目录。（例如，`/rails/user/login`代替`/user/login`）

但是通过 Apache 代理访问时，不会发生这种情况。但是，它在`http://mysite.com:3000`直接访问时确实有效。

有任何想法吗？我要扯头发了！

# single-sign-on - 来自 IDP 的 Google Apps SAML SSO 响应缩水

> ID：16018759
> 
> 赞同：0
> 
> 时间：2013-04-15T15:13:01.690
> 
> 标签：single-sign-on, google-apps, saml, saml-2.0

Google Apps - 单点登录 (SSO) 是否支持 * *DEFLATE 编码 **？我正在使用一个 IDP，它在放气后对 SAML 响应进行编码。当此响应提交给 Google-Apps 时，它不允许登录并显示错误“无法解析登录请求”。当放气被禁用时，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:23:58.623

根据 SAML 2.0 Web SSO 配置文件，使用 POST 绑定的 SAML 响应不支持 HTTP Deflate。虽然您可能会通过使用 HTTP Deflate 的重定向绑定收到 AuthnRequest，但您不会返回具有该编码的响应。您应该对 POST 数据的响应进行 Base 64 编码然后 URL 编码。

# java - solr java.lang.NoClassDefFoundError: org/apache/solr/common/ResourceLoader

> ID：16018765
> 
> 赞同：0
> 
> 时间：2013-04-15T15:13:24.257
> 
> 标签：java, solr, solrj

出于测试原因，我尝试在本地使用 EmbeddedSolrSolver（我知道它已被弃用，它仅用于测试）。我正在放弃这个例子

[http://balabtech.wordpress.com/2011/10/13/embedded-solr-server-using-java/](http://balabtech.wordpress.com/2011/10/13/embedded-solr-server-using-java/)

以及官方wiki

[http://wiki.apache.org/solr/Solrj](http://wiki.apache.org/solr/Solrj)

我仍然收到错误

```
java.lang.NoClassDefFoundError: org/apache/solr/common/ResourceLoader
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:787)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:447)
at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:111)
at pl.psnc.dl.wf4ever.searchserver.solr.SolrSearchConfigTest.testCos(SolrSearchConfigTest.java:23)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.ClassNotFoundException: org.apache.solr.common.ResourceLoader
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 37 more 
```

有人熟悉这个例外吗？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:33:55.117

已解决，似乎版本 > 4 中的 solrj 与 solr-core 版本 < 4 不兼容。非常感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:29:50.377

`ResourceLoader`从此[链接](http://mvnrepository.com/artifact/org.apache.solr/solr-core)下载包含该类的 jar ，选择适合您的版本。

`NoClassDefFoundError`并`ClassNotFoundException`在类路径中找不到所需的类时抛出。在类路径中添加您下载的 jar。

# redis - Redis 集合操作

> ID：16018766
> 
> 赞同：0
> 
> 时间：2013-04-15T15:13:27.610
> 
> 标签：redis

Redis 集合操作：

SADD key1 "value1 包含 key1"

SADD key1 "value2 包含 key1"

SADD key1 "value3 包含 key1"

SMEMBERS 结果：1）“value2 包含 key1”2）“value3 包含 key1”3）“value1 包含 key1”

SREM key1 "value2 contains key1" --> 有效

现在我想从集合中删除“value2 contains key1”，而不传递整个值，例如“value2 contains key1”。只想发送“value2”

SREM 键 1“值 2”

有什么办法吗？还是有什么其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:36:41.787

无需将完整值（“value1：verylongmessage”）插入到 SET 中，您只需将值（“value1”）插入到集合“key1”中即可。

但是您应该使用另一种数据结构 Hash 来存储 value1 的全部内容：

```
hash['value1'] = "value1 : verylongmessage" (in Redis, you can use HSET?) 
```

因此，如果要从 SET 中删除 value1，只需从 SET 和 HASH 中删除即可。

希望对你有帮助~~~

# lua - 如何从代码中退出应用程序

> ID：16018770
> 
> 赞同：2
> 
> 时间：2013-04-15T15:13:45.643
> 
> 标签：lua, coronasdk, quit

我正在使用 corona sdk 构建游戏。在游戏内部，在菜单中，我有一个退出按钮。我想知道如何退出应用程序并进入移动主屏幕或移动菜单？换句话说，我应该在`onExitButtonClicked(event)`方法里面写什么？

*应用程序/游戏无法恢复。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T17:31:40.687

你可以（但不应该）打电话`os.exit()`或在 Android 上打电话`native.requestExit()`。

普通应用程序不会退出，用户只是切换应用程序或终止应用程序。

您可以在此处找到更多文档：http: [//docs.coronalabs.com/api/library/os/exit.html](http://docs.coronalabs.com/api/library/os/exit.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-03T06:26:21.297

有效。非常感谢。最好以这种方式编码。

```
function quit() 
 os.exit() 
end 
timer.performWithDelay(1000,quit) 
```

所以，现在它看起来不会像崩溃一样。

# cordova - 是否可以使用 phonegap 保存 blob？

> ID：16018771
> 
> 赞同：3
> 
> 时间：2013-04-15T15:13:45.657
> 
> 标签：cordova, extjs, download, blob

我正在使用 Sencha Touch 2.1.1。当我的应用程序请求 pdf 时，服务器会生成 pdf 的二进制数据，将其保存在缓冲区中，最后将其吐出到浏览器

```
header('Content-Length: '.strlen($this->buffer));
header('Content-disposition: attachment; filename="'.$name.'"'); 
```

当使用网络浏览器正常冲浪时，会导致浏览器显示“保存或打开方式”对话框之一。使用 Sencha Touch，我可以从服务器获取 blob，如下所示：

```
 var xhr = new XMLHttpRequest();
            console.log('new XMLHttpRequest');
            var url = 'http://bladhdeblah.com/ws/Download/';
            var params = "loginId=" + loginId +  "&sId=" + surveyId;
            xhr.open('POST', url, true);
            xhr.responseType = 'blob';
            xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xhr.onload = function (e) {
                if (this.status == 200) {
                    Ext.Viewport.setMasked(false);
                    blob = new Blob([this.response], {type: 'application/pdf'});
                    console.log('new Blob');
                    var cd = (this.getResponseHeader("Content-disposition"));
                    var filenameStart = cd.indexOf("\"") + 1;
                    var filename = cd.substring(filenameStart, cd.length - 1);
                    console.log('pdf filename is ' + filename);
                    if (Ext.os.is.Android) {
                        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
                    }
                }
                else {
                    LRS.util.common.displayAjaxFailure(this.response, 1);
                }

            };
            xhr.send(params)
; 
```

我的问题是phonegap显然不理解'new Blob'（Android上的logcat显示'Uncaught TypeError：Illegal constructor'），据我所知，无论如何不可能使用phonegap的文件写入器来写任何东西除了纯文本（我在其他地方已经成功完成）。

我用谷歌搜索了很多，但找不到解决方案。使用 WinJS，我已经能够使用 Windows.Storage.Streams.RandomAccessStream.copyAsync 获取 blob 并保存它，但在 phonegap 中找不到任何类似的功能。

我原以为一定有很多人希望他们的应用程序下载和保存图像、mp3 或其他任何东西，所以我希望那里的一些 phonegap 大师能够为我指明解决方案。

我知道 phonegap 的 FileTransfer，但是，如果我理解正确，我需要向它提供保存在服务器上的文件的 url。我可以更改服务器代码以保存 pdf，但不希望进行此类更改。

顺便说一句，我的应用程序使用的是 SQLlite 数据库，所以也许一个解决方案是将二进制数据粘贴到某个地方并从那里显示它？问题是我不知道如何显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T21:43:24.540

不要使用 Blob，而是使用 WebKitBlobBuilder。可以在[此处](https://developer.mozilla.org/en-US/docs/Web/API/BlobBuilder)找到 BlobBuilder 的一些示例。该链接显示 BlobBuilder 已过时，但 Android（至少 4.1.2）尚未迁移到 Blob。

# email - 通过 ssh 查找和替换 - 通过邮件发送结果

> ID：16018774
> 
> 赞同：1
> 
> 时间：2013-04-15T15:14:01.950
> 
> 标签：email, replace, cron

我有一个小问题，我每 5 分钟运行一次 cron 任务，它正在查看文本链并将其替换为任何内容。为了优化某些内容，我想在我的 cronstrask 中添加一个新功能：给我发送如果它替换了某些东西，请发送电子邮件.. 如果 crontask 没有找到链，则无需发送邮件。我不知道该怎么做，也许你可以帮助我。这是我当前的 cron 任务：

```
find /home -type f | xargs sed -i 's$chain if would like to era$ $g' 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T12:27:38.677

这是我在其他人的帮助下做的一个例子。它可能会帮助其他一些人

```
#!/bin/bash
grep -r -q 'stringtoreplace' /home/     #Find the string in all files on my home
if [ $? == 0 ] #if the  last result fit  then
then
        echo "At the following time : " $(date +%H:%M:%S) | mail -s "[Serveur Leaked] Bad iframe has been found " my@mail #we send a mail with the date
        find /home -type f | xargs sed -i 's$stringtoreplace$ $g' #we replace the string with a whitespace
else
        exit 1
fi
exit 0 
```

# unity3d - Unity 3D - 具有 Alpha 中断景深的着色器

> ID：16018776
> 
> 赞同：2
> 
> 时间：2013-04-15T15:14:07.197
> 
> 标签：unity3d, shader

我有一个场景，我真的需要景深。

显然，Unity 的景深不适用于处理 alpha 的任何着色器，无论是内置的还是自定义的。

例如，透明/漫反射着色器会发生这种情况。透明/抠图可以代替。

这是我制作的触发此行为的最简单的自定义着色器：

```
Shader "Custom/SimpleAlpha" {
    Properties {
        _MainTex ("Base (RGBA)", 2D) = "white" {}
    }
    SubShader {
        Tags { "RenderType"="Transparent" "Queue"="Transparent" }
        //Tags { "RenderType"="Opaque" }
        LOD 300

        ZWrite Off

        CGPROGRAM
        #pragma surface surf Lambert alpha
        #include "UnityCG.cginc"

        sampler2D _MainTex;

        struct Input {
            float2 uv_MainTex;
        };

        void surf (Input IN, inout SurfaceOutput o) {
            half4 c = tex2D (_MainTex, IN.uv_MainTex);
            o.Albedo = c.rgb;
            o.Alpha = c.a;
        }
        ENDCG
    } 
    FallBack "Diffuse"
} 
```

如果您在项目中尝试代码，您会注意到每个*佩戴*着色器的对象都以相同的量进行模糊，而不是基于 Z 进行模糊。

![景深问题。 抠图与自定义 Alpha 着色器。](https://i.stack.imgur.com/OpXxN.png)

任何帮助深表感谢。提前致谢。

我在 Unity Answers 上发布了同样的问题：http: [//answers.unity3d.com/questions/438556/my-shader-brakes-depth-of-field.html](http://answers.unity3d.com/questions/438556/my-shader-brakes-depth-of-field.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T13:11:21.990

由于景深是使用存储在 Z 缓冲区中的值的后处理效果，因此以下行是罪魁祸首：

```
ZWrite Off 
```

对于透明对象，通常禁用 Z 缓冲区写入，因为*透明*渲染队列不需要 Z 缓冲区。

因此，如果您删除该线，您应该会看到正确应用于透明对象的景深。但是，位于完全透明区域后面的对象现在将使用错误的 Z 值进行模糊处理。作为快速修复，您可以尝试使用 alpha 测试，例如`AlphaTest Greater 0.1`.

# java - 代理的 java 系统属性在 ubuntu 上失败

> ID：16018777
> 
> 赞同：-1
> 
> 时间：2013-04-15T15:14:12.350
> 
> 标签：java, ubuntu, proxy

我在我的 java 代码中使用 system.properties。它在 Windows 7 操作系统上完美运行，但在 ubuntu12.04 上失败。

我在这两个地方都使用了tomcat。在这方面的任何帮助都会有所帮助。

```
System.setProperty("http.proxyHost", proxyhost);
System.setProperty("http.proxyPort", proxyport);        
String encoded = new String(encoder.encode(new String(username+":"+password).getBytes()));
uc.setRequestProperty("Proxy-Authorization", "Basic " + encoded); 
```

异常：java.io.IOException：服务器返回 HTTP 响应代码：401 用于 URL：http://

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-15T15:45:31.683

401 错误代码表示“未经授权”。你可以试试这个：

```
System.setProperty("http.proxyHost", "yourproxyhost");
System.setProperty("http.proxyPort", "yourproxyport");

String credentials = username + ":" + password;
String encoded  = Base64Converter.encode(credentials.getBytes("UTF-8"));
URLConnection uc = url.openConnection();
uc.setRequestProperty("Proxy-Authorization", String.format("Basic %s", encoded)); 
```

# python - 使用 Python 解码 JSON

> ID：16018780
> 
> 赞同：0
> 
> 时间：2013-04-15T15:14:20.427
> 
> 标签：python, json, python-3.x

为什么我会得到

> ValueError：无法解码任何 JSON 对象

从此代码：

```
import urllib.request,json 

n = urllib.request.urlopen("http://graph.facebook.com/55")
d = json.loads(str(n.readall())) 
```

完整的错误：

```
Traceback (most recent call last):
  File "<pyshell#41>", line 1, in <module>
    d= json.loads(str(n.readall()))
  File "C:\Python33\lib\json\__init__.py", line 309, in loads
    return _default_decoder.decode(s)
  File "C:\Python33\lib\json\decoder.py", line 352, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "C:\Python33\lib\json\decoder.py", line 370, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded 
```

的输出`str(n.readall())`：

```
'b\'{"id":"55","name":"Jillian Copeland","first_name":"Jillian","last_name":"Copeland","username":"JCoMD","gender":"female","locale":"en_US"}\'' 
```

也许`b`正在扔掉它？

如果这是问题所在，我如何将二进制流从 转换`readall`为字符串而不是字符串`b`？

我正在尝试学习一点python，所以请记住这一点。

我在 Windows 中使用 Python 3.3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T15:22:16.950

我相信这是[这个问题](https://stackoverflow.com/questions/10846112/use-byte-like-object-from-urlopen-read-with-json)的完全重复，但遗憾的是没有公认的答案。

就我而言，这有效：

```
import urllib.request,json 

n = urllib.request.urlopen("http://graph.facebook.com/55")
d= json.loads(n.readall().decode('utf-8')) 
```

# winforms - UserControl 不使用窗体自动调整大小

> ID：16018784
> 
> 赞同：3
> 
> 时间：2013-04-15T15:14:34.033
> 
> 标签：winforms, user-controls, windows-forms-designer

我无法将我的用户控件设置为使用创建它的面板自动调整大小。当用户调整包含用户控件的主窗体的大小时，此用户控件的大小根本不会改变，从而导致用户体验不佳。

到目前为止，我尝试了以下操作：

1.  确保用户控件上的**MinimumSize**和**MaximumSize**属性设置为 0。
2.  将(1) 用户控件和 (2) 它所在的面板上的**AutoSize属性设置为****True**
3.  将面板上的**Anchor属性设置为****Top** , **Bottom** , **Left** , **Right**
4.  将用户控件的**Dock**属性设置为**Fill**（我使用以下代码执行此操作）

这些尝试对我的用户控件的行为没有影响：

```
CalcUserControl calcControl = new CalcUserControl(CountryId);
calcControl.Dock = DockStyle.Fill;
panelUserCtrl.Controls.Clear();
panelUserCtrl.Controls.Add(calcControl); 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T16:23:29.347

尝试将`AutoSize`属性设置为 False。

此外，不要调用 ，而是`Controls.Clear();`尝试处理其中的控件，例如：

```
while (panelUserCtrl.Controls.Count > 0) {
  panelUserCtrl.Controls[0].Dispose();
} 
```

否则，您将泄漏内存，因为那些已删除的控件仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T13:06:11.240

您也应该将 AutoSizeMode 设置为 GrowAndShrink。

# c# - 试图以 INT 格式获取 DropDownList 的宽度

> ID：16018786
> 
> 赞同：0
> 
> 时间：2013-04-15T15:14:47.707
> 
> 标签：c#, asp.net, html, .net

我正在尝试获取 DropDownList 的宽度，并且它的末尾不断出现“px”。我所追求的最终结果是确定 DropDownList 中所有项目的宽度，以便我可以以编程方式设置宽度。

这是我所拥有的：

```
 public static int FindTheWidth(object sender)
    {
        DropDownList senderComboBox2 = (DropDownList)sender;
        //            int width = senderComboBox.Width;

        var s = senderComboBox2.Width;
        var CBW = s.SubString(0, s.IndexOf("p"));
        int width2 = Convert.ToInt32(CBW);
        int vertScrollBarWidth = 2;

        int newWidth;
        foreach (string s in ((DropDownList)sender).Items)
        {
            newWidth = width2 + vertScrollBarWidth;
            if (width2 < newWidth)
            {
                width2 = newWidth;
            }
        }
        senderComboBox2.Width = width2;
        return width2;
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:27:44.423

我遇到过的最糟糕的逻辑..为什么要在业务层尝试表示层功能，就像那样...这是您试图在服务器代码中实现的设计问题？您可以尝试在设计结束时设置宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:15:00.853

该代码有很多铸造问题。

类型`WebControl.Width.Value`应该加倍。

类型`((DropDownList)sender).Items`应该是 ListItemCollection。

```
public static int FindTheWidth(object sender)
{
    DropDownList senderComboBox2 = (DropDownList)sender;
    var width = senderComboBox2.Width;

    double doubleValue = width.Value;
    int width2 = (int)doubleValue;
    int vertScrollBarWidth = 2;

    int newWidth;
    foreach (ListItem s in ((DropDownList)sender).Items)
    {
        newWidth = width2 + vertScrollBarWidth;
        if (width2 < newWidth)
        {
            width2 = newWidth;
        }
    }
    senderComboBox2.Width = width2;
    return width2;
} 
```

# objective-c - 为什么我的 UITextField Wrapper 没有显示在 UITableViewCell 中？

> ID：16018787
> 
> 赞同：0
> 
> 时间：2013-04-15T15:14:52.930
> 
> 标签：objective-c, ios5, uitextfield, subclass

问题是我的 UITextField 包装类没有让 UITextField 出现在 UITableViewCell 中（但是，常规的 UITextField 视图可以正常工作）：

![在此处输入图像描述](https://i.stack.imgur.com/19XTS.png)

这是我的自定义 UITextField：

标题：

```
#import <UIKit/UIKit.h>

@protocol TUTextFieldDelegate <NSObject>

- (BOOL)textField:(UITextField *)textField
shouldChangeCharactersInRange:(NSRange)range
replacementString:(NSString *)string;

- (BOOL)textFieldShouldClear:(UITextField *)textField;

- (void)textFieldDidBeginEditing:(UITextField *)textField;

- (void)textFieldDidEndEditing:(UITextField *)textField;

@end

@interface TUTextField : UIControl <UITextFieldDelegate>

@property (nonatomic, assign) BOOL fixedDecimalPoint;
@property (nonatomic, assign) id <TUTextFieldDelegate>delegate;

@property (nonatomic, assign) UIKeyboardType keyboardType;
@property (nonatomic, strong) NSString *placeholder;
@property (nonatomic, assign) UITextBorderStyle borderStyle;
@property (nonatomic, assign) BOOL adjustsFontSizeToFitWidth;
@property (nonatomic, assign) UITextFieldViewMode clearButtonMode;
@property (nonatomic, strong) NSString *text;

- (id)initWithTextField:(UITextField *)textField;
- (id)initWithFrame:(CGRect)frame;

@end 
```

执行：

```
#import "TUTextField.h"

@interface TUTextField ()

@property (nonatomic, strong) UITextField *textField;

@end

@implementation TUTextField

- (id)initWithTextField:(UITextField *)textField
{
    self = [super initWithFrame:textField.frame];
    if (self) {
        self.textField = textField;
        _textField.delegate = self;

        _fixedDecimalPoint = NO;
    }
    return self;
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.textField = [[UITextField alloc] initWithFrame:frame];
        _textField.delegate = self;
        [self addSubview:_textField];

        _fixedDecimalPoint = NO;
    }
    return self;
}

- (void)setKeyboardType:(UIKeyboardType)keyboardType {
    _textField.keyboardType = keyboardType;
}

- (void)setPlaceholder:(NSString *)placeholder {
    _textField.placeholder = placeholder;
}

- (void)setBorderStyle:(UITextBorderStyle)borderStyle {
    _textField.borderStyle = borderStyle;
}

-(void)setAdjustsFontSizeToFitWidth:(BOOL)adjustsFontSizeToFitWidth {
    _textField.adjustsFontSizeToFitWidth = adjustsFontSizeToFitWidth;
}

-(void)setClearButtonMode:(UITextFieldViewMode)clearButtonMode {
    _textField.clearButtonMode = clearButtonMode;
}

-(void)setText:(NSString *)text {
    _textField.text = text;
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    [self addSubview:self.textField];
}
*/

- (void)viewDidLoad {
    [self addSubview:_textField];
}

- (void)viewWillAppear {
    [self addSubview:_textField];
}

- (BOOL)textField:(UITextField *)textField
shouldChangeCharactersInRange:(NSRange)range
replacementString:(NSString *)string
{
    if ([_delegate respondsToSelector:@selector(textField:shouldChangeCharactersInRange:replacementString:)]) {
        return [_delegate textField:textField shouldChangeCharactersInRange:range
                  replacementString:string];
    }
    return YES;
}

- (BOOL)textFieldShouldClear:(UITextField *)textField {
    if ([_delegate respondsToSelector:@selector(textFieldShouldClear:)]) {
        return [_delegate textFieldShouldClear:textField];
    }
    return YES;
}

- (void)textFieldDidBeginEditing:(UITextField *)textField {
    if ([_delegate respondsToSelector:@selector(textFieldDidBeginEditing:)]) {
        [_delegate textFieldDidBeginEditing:textField];
    }
}

- (void)textFieldDidEndEditing:(UITextField *)textField {
    if ([_delegate respondsToSelector:@selector(textFieldDidEndEditing:)]) {
        [_delegate textFieldDidEndEditing:textField];
    }
}

@end 
```

这是将我的自定义包装器添加到表视图的代码：

```
 } else if (indexPath.row == 1) {
            cell.textLabel.text = @"Tax Rate";

            if (!_textField) {
                UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(220.0, 8.0, 60.0, 26.0)];
                textField.clearButtonMode = UITextFieldViewModeWhileEditing;
                textField.adjustsFontSizeToFitWidth = YES;
                textField.borderStyle = UITextBorderStyleRoundedRect;
                textField.keyboardType = UIKeyboardTypeDecimalPad;
                textField.placeholder = kTaxRateDefault;

                _textField = [[TUTextField alloc] initWithTextField:textField];
                _textField.delegate = self;

                // retrieve saved settings
                _taxRate = [[SettingsSingleton sharedManager] taxRate];
                if (![_taxRate isEqualToString:@""])
                    _textField.text = _taxRate;
            }

            UILabel *percentSign = [[UILabel alloc] initWithFrame:CGRectMake(285.0, 6.0, 20.0, 26.0)];
            percentSign.text = @"%";
            percentSign.backgroundColor = [UIColor clearColor];

            [cell addSubview:_textField];
            [cell addSubview:percentSign];
        }
    } 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:01:44.073

我不认为这是扩展 UITextField 的最佳方式。

而不是在它下面创建一个带有 UITextField 的 NSObject 你应该这样说：

界面：

```
@interface UITextField (extendedUITextField) {

    // Variables

}

//Methods

@end 
```

执行：

```
@implementation UITextField (extendedUITextField) 

     // Method implement

@end 
```

希望这可以帮助。

# function - 使用 ADO.Net “System.Data.Odbc” (VB.Net) 从 PostgreSQL 数据库中检索数据

> ID：16018791
> 
> 赞同：1
> 
> 时间：2013-04-15T15:15:08.350
> 
> 标签：function, postgresql, unicode, ado.net, odbc

我被要求对 PostgreSQL 进行一些研究，在运行以下代码后，当我们读取 DBDataReader 对象时，系统返回两个条目**（未命名的门户 1 和未命名的门户 2）**，但是我想从这两个中读取所有记录门户，然后将信息加载到我的业务对象中，因为每个门户在表中都有超过 5 条记录。

在浏览了互联网上的各个页面后，我发现有一个第三方库（“NpgSQL”> NpgsqlDataReader）提供了这个功能并且它是免费的。我已将他们的库插入到我的解决方案中，它可以按预期工作。但是，我不想使用这个第三方软件，只是想知道是否有一种方法可以从这两个门户网站读取记录，那就太好了。

**请注意，您可以在我熟悉的 c# 中为我们提供解决方案。谢谢。**

我目前用于检索数据的代码片段

```
Dim oConnection As DbConnection = DbProviderFactories.GetFactory(CONST_PROVIDER_ODBC).CreateConnection
    oConnection.ConnectionString = "Valid connection string goes here"
    oConnection.Open()

    ' Start a transaction as it is required to work with cursors in PostgreSQL
    Dim tran As DbTransaction = oConnection.BeginTransaction

    ' Define a command to call stored procedure show_cities_multiple
    Dim command As DbCommand = DbProviderFactories.GetFactory("System.Data.Odbc").CreateCommand
    command.CommandText = "SELECT MyTestFunction()"
    command.CommandType = CommandType.StoredProcedure
    command.Connection = oConnection
    command.Transaction = tran

    ' Execute the stored procedure and obtain the first result set
    Dim dr As DbDataReader = command.ExecuteReader()

    ' Output the rows of the first result set
    While dr.Read()

    'This is where system show Unnamed Portal 1 or Unnamed portal 2 at the second time.
        MsgBox(String.Format("{0}", dr(0)))
    End While

    tran.Commit() 
```

-- 检索数据的函数。

```
CREATE OR REPLACE FUNCTION MyTestFunction() RETURNS SETOF refcursor AS $$
DECLARE
  ref1 refcursor;           -- Declare cursor variables
  ref2 refcursor;                             
BEGIN
  OPEN ref1 FOR SELECT * FROM MyTable1;
  RETURN NEXT ref1;                                                                              -- Return the cursor to the caller

  OPEN ref2 FOR SELECT * FROM MyTable2;
  RETURN NEXT ref2;                                                                              -- Return the cursor to the caller
END;
$$ LANGUAGE plpgsql; 
```

我目前工作的环境如下：-

**32位机。
Visual Studio 2010 + SP1
ODBC 提供程序：PostgreSQL Unicode 9.01.02.00
ADO.Net (System.Data.Odbc)** 

当然，我期待听到任何反馈，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:47:37.827

与 nPgSQL 相比，psqlODBC 的使用和维护更少。

两者都是“第三方”，因为它们是在核心 PostgreSQL 代码之外维护的。其他被认为对 Pg 非常重要的工具也是如此，例如 PgBouncer、pgbarman、repmgr、PgAgent-III、Slony-I、Bucardo、Skytools/Londiste 等等。

一般来说，我建议在工作 .NET 时使用 nPgSQL 而不是 psqlODBC。nPgSQL 支持 ADO.NET 和 Entity Framework，因此您无需更改大量内容即可直接使用它。

# sql-server - 如何使用 SQL Server 存储过程（计划每周运行）的结果来随时间推移对数据进行趋势分析？

> ID：16018792
> 
> 赞同：2
> 
> 时间：2013-04-15T15:15:14.603
> 
> 标签：sql-server, sql-server-2008, tsql, stored-procedures, data-warehouse

我在 SQL Server 2008 数据库中有一个存储过程，它返回一组从各种不同表中提取的值，如下所示。我运行存储过程如下所示，没有任何参数。

```
EXEC [Data].[dbo].[sp_Usage] 
```

每行显示产品使用数据，例如

*   上次登录
*   上个月使用的次数
*   过去 3 个月
*   过去 6 个月
*   应用版本

对于每个独特的`AccountId`

我想每个月/周自动运行这个存储过程并将相应的结果存储在数据库中，而不删除上周/月的数据。

我计划随着时间的推移使用这些数据来做数据趋势。

我应该如何执行这个计划？

任何帮助或指导将不胜感激

干杯! 闪亮的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T16:14:46.057

所以你的存储过程大概有一个`SELECT (list of columns) .....`里面，对吧？

为什么不将其更改为：

```
INSERT INTO dbo.YourBigTable(ExecutionDateTime, ...other columns here.....)
   SELECT
       GETDATE(),   -- get current date/time
       (list of other columns)
   FROM ....... 
```

基本上只是让存储过程`INSERT`直接运行到您的目标表中。从我的角度来看，这似乎是最简单的方法。

否则，您需要将从存储过程返回的数据插入到临时表中，然后将该临时表的数据连同执行日期/时间插入到目标表中。

# c# - 在 C# 中加载 C++ dll 时，CLR 是否会自动加载 C++ 文件的依赖项？

> ID：16018794
> 
> 赞同：1
> 
> 时间：2013-04-15T15:15:31.370
> 
> 标签：c#, c++

那是我的问题，我计划实现一个具有许多 C++ 依赖项的 C++ dll，我想在我的 c# 代码中使用它。我想知道的是 CLR 是否会自行加载依赖项，或者我会必须做其他事情。在 C# 中加载 C++ dll 时，CLR 是否会自动加载 C++ 文件的依赖项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T15:18:51.560

如果它是本机 C++ dll，则在加载时加载依赖项，除非该依赖项标记为延迟加载，然后在调用该 dll 中的函数之一时加载该依赖项。

如果它是 .Net C++ dll，则在需要时加载依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T15:40:53.687

从技术上讲，答案是否定的。*CLR*不加载本机 DLL 的依赖项——但这纯粹是技术性问题——它们将自动加载（如果可能且可用）。

实际发生的事情有点复杂。CLR（本身）根本不加载 DLL——DLL 由本机 Windows 加载程序加载。对于 .NET 程序集，您将 CLR 代码存储为基本上是二进制资源。您还有一个调用 CLR 的本机入口点的 DllMain。当从 DllMain 调用 CLR 时，它会初始化程序集。

普通的 Windows 加载器（当然）也会加载原生 DLL。在这种情况下，加载程序（在没有延迟加载标志的情况下）将通过 DLL 依赖项并加载它们。即使初始 DLL 的加载是从 CLR 触发的，CLR 也不会进一步参与，直到 DLL 及其所有隐式依赖项都已加载。只有*在*所有这些 DLL（也可能包括字体、可执行文件等）都被“加载”之后，控制权才会完全返回给 CLR。

请注意，我将“已加载”放在引号中是有原因的——DLL 通常也不会加载到内存中——加载器只会设置页表以将其映射到内存，然后这些页面将按需加载（尽管某些页面，例如那些持有*DLL*的 DllMain 的页面，在调用其 DllMain 时或多或少会立即加载）。

因此，假设您有一个 .NET 程序集，该程序集使用具有本机依赖项的本机 DLL，则顺序为：

1.  负载组件
2.  程序集的 DllMain 调用 CLR
3.  CLR 加载本机 DLL
4.  Loader 加载原生 DLL 的所有依赖项
5.  只有在加载了所有隐式依赖项之后，控制权才返回给 CLR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:17:09.637

是的，但前提是它们在搜索路径中可用（即应用程序路径、Windows 系统路径等）

# backbone.js - 在主干集合中的每个模型上调用 .toJSON() .filter()

> ID：16018796
> 
> 赞同：2
> 
> 时间：2013-04-15T15:15:38.373
> 
> 标签：backbone.js

我有这个代码：

```
 var products = kf.Collections.products.filter(function(product) {
            return product.get("NominalCode") == chargeType
        });

        if (products.length) {
            for (x in products) {
                products[x] = products[x].toJSON();
            }
        }

        return products; 
```

我是否认为可能有更多的 Backbone 方式来执行`for in`循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:26:35.563

您可以使用[Collection.where简化过滤器](http://backbonejs.org/#Collection-where)

> **where** collection.where(attributes)
> 返回集合中与传递的属性匹配的所有模型的数组。对于过滤器的简单情况很有用。

您可以使用[_.invoke删除您的 for 循环](http://underscorejs.org/#invoke)

> **invoke** _.invoke(list, methodName, [*arguments])对列表中的每个值调用由*methodName*
> 命名的方法。传递给调用的任何额外参数都将转发给方法调用。

 *这些修改可能看起来像

```
var products = kf.Collections.products.where({
    NominalCode: chargeType
});

return _.invoke(products, 'toJSON'); 
```

[http://jsfiddle.net/nikoshr/3vVKx/1/](http://jsfiddle.net/nikoshr/3vVKx/1/)

如果您不介意使用[链式方法更改操作顺序](http://underscorejs.org/#chaining)

```
return kf.Collections.products.chain().
    invoke('toJSON').
    where({NominalCode: chargeType}).
    value() 
```

[http://jsfiddle.net/nikoshr/3vVKx/2/](http://jsfiddle.net/nikoshr/3vVKx/2/)

或者正如@kalley 在评论中所建议的那样，一个简单的

```
_.where(kf.Collections.products.toJSON(), { NominalCode: chargeType }) 
```*

# javascript - 使用 Java 脚本更改表单的一部分

> ID：16018800
> 
> 赞同：0
> 
> 时间：2013-04-15T15:15:47.967
> 
> 标签：javascript, forms, simplecart

有没有办法用 Javascript 更改表单的内容？

我有一系列贝宝按钮，但希望用户能够以加元或美元购物。

表单看起来像这样：

```
<form onsubmit="return false;">
<input name="amount" value="6.99" type="hidden" />
<input name="currency_code" value="CAD" type="hidden" />
</form> 
```

我需要将 value="CAD' 更改为 value="USD"

有什么方法可以让我在网站上设置一个按钮或某种“切换”，让用户可以更改货币？它应该发生在每个产品上。

我有人实现了简单的购物车，但它们不再可用

有没有更好的方法来做到这一点？（我虽然这可能是最简单的）但也许应该在结帐时以某种方式完成？我想这会更复杂。

在此先感谢，希望我已经清楚了！如果您需要更多信息，请与我们联系。

我的网站是 www.bodesi.com（如果有帮助的话）

# timer - 用lua构造动态定时器

> ID：16018803
> 
> 赞同：0
> 
> 时间：2013-04-15T15:15:55.493
> 
> 标签：timer, lua

我创建了一个名为“timer”的计时器，但我正在尝试创建一个函数，该函数将在它的参数中指定设置或解除计时器

```
timer = sys.timer.create() 
```

`function MainTimer(timerName, action, time) if action == "arm" then timerName:arm(time) else timerName:disarm() end end`

```
MainTimer("timer", "arm", 30) 
```

但我从 lua 得到一个错误，说 lua:272：尝试调用方法“arm”（一个 nil 值）

你认为我在哪里做错了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:57:09.990

额外报价:-)

```
MainTimer(timer, "arm", 30) 
```

# c++ - sqlite3_prepare 失败并显示“接近“TABLE”：语法错误”

> ID：16018806
> 
> 赞同：0
> 
> 时间：2013-04-15T15:16:00.827
> 
> 标签：c++, sql, sqlite

我正在尝试使用 SQLite 的编译语句将行插入表中：

```
rc = sqlite3_prepare(db, "INSERT INTO TABLE test VALUES (?,?,?,?)", -1, &stmt, 0);
if( rc!=SQLITE_OK )
    printf("%s", sqlite3_errmsg(db)); 
```

`sqlite3_prepare`返回 1，并`sqlite3_errmsg`返回：

> “在“表”附近：语法错误”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T15:17:26.043

您不应该在查询中输入“TABLE”：

```
rc = sqlite3_prepare(db, "INSERT INTO  test VALUES (?,?,?,?)", -1, &stmt, 0);
if( rc!=SQLITE_OK )
    printf("%s", sqlite3_errmsg(db)); 
```

命名您要插入的字段也是一个好习惯。这样，如果您向表中添加字段，您的查询就不会被破坏......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T15:16:49.777

`TABLE`是保留关键字。为避免语法错误，必须使用方括号对其进行转义，

```
INSERT INTO test VALUES (?,?,?,?) 
```

*   [SQLite 保留关键字有四种转义方式](http://www.sqlite.org/lang_keywords.html)

# xml - 空气污染蛋 - 来自 Cosm 的 XML 提要

> ID：16018811
> 
> 赞同：0
> 
> 时间：2013-04-15T15:16:16.143
> 
> 标签：xml, feed, sensors, cosm

我一直在尝试使用 Cosm 的 XML 提要创建一个应用程序，我想知道是否（以及如何）可以在指定的时间限制之间检索 XML（例如，对于 CO 传感器、包含30 天的数据除以天数）。

为了方便起见，我一直在尝试使用的提要是：[https](https://cosm.com/feeds/115590) ://cosm.com/feeds/115590 。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:47:32.447

根据文档，您可以指定开始和结束或持续时间并取回数据样本：

[http://cosm.com/docs/v2/history.html](http://cosm.com/docs/v2/history.html)

例如[https://api.cosm.com/v2/feeds/115590?duration=1hour&interval=0](https://api.cosm.com/v2/feeds/115590?duration=1hour&interval=0)

会给你最后一小时的原始数据

# php - 需要具有将字段更改为可编辑的编辑按钮；在提交它改变数据库

> ID：16018818
> 
> 赞同：3
> 
> 时间：2013-04-15T15:16:32.233
> 
> 标签：php, sql, wordpress, forms

我为你做了一个很好的流程图，因为这有点复杂。

基本上，我想要一个来自数据库列的字段列表，显示在一个表中。它们旁边有一个 EDIT 按钮，当您单击编辑按钮时，您可以编辑该字段。然后单击提交，它会使用新值更改表。

我几乎知道如何做每一件单独的事情，但我无法将所有这些事情合二为一。

流程图：

![在此处输入图像描述](https://i.stack.imgur.com/CqxDw.jpg)

* * *

**代码：**

* * *

**步骤1：**

```
 <table>
            <th>First Name</th>
           <?php 
            // Collects data from "users" table 

             $data = mysql_query("SELECT * FROM users") 
             or die(mysql_error()); 

            // array

             $info = mysql_fetch_array( $data ); 

            // print data

             // Print out the contents of the entry 
             Print "<tr><td>";
             Print "".$info['fname'] . " ";
             Print "</td><td>";
             Print "".$info['lname'] . " "; 
             Print "</td><td>";
             Print "".$info['email'] . " <br>"; 
             Print "</td></tr>";

             // loop for each row in the column

             while($info = mysql_fetch_array( $data )) 
             { 
             Print "".$info['fname'] . " ";
             Print "</td><td>";
             Print "".$info['lname'] . " "; 
             Print "</td><td>";
             Print "".$info['email'] . " <br>"; 
             Print "</td></tr>";
             } 
              ?>
        </table> 
```

**第 2 步和第 3 步：（**不完整或可能也不准确）

```
 <?php
        if(isset($_POST['submit'])){

            $variable = "somethinghere";                
            $variable = "somethinghere";                        
            $variable = "somethinghere";                
            $variable = "somethinghere";                
            $variable = "somethinghere";                

            $query = "UPDATE users
                      SET fname='$variable1'
                      WHERE $variable2='$variable3' AND $variable4='$variable5'
              (fname, lname, email) VALUES ('".$_POST['fname']."', '".$_POST['lname']."', '".$_POST['email']."')";

            mysql_query($query);

        }else{
    ?>

    <div class="content">
        <form method="post">
            <div><strong>First Name:</strong><span class="errortext">*</span></div>
            <div><input name="fname" type="text" /></div>

            <div><strong>Last Name:</strong><span class="errortext">*</span></div>
            <div><input name="lname" type="text" /></div>

            <div><strong>Email:</strong><span class="errortext">*</span></div>
            <div><input name="email" type="text" /></div>

            <div><input id="submit-button" value="submit" name="submit" type="submit" /></div>          
        </form>
    <?php }?>
   </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:21:32.747

使用 JQuery 是改变它的方法。

这是一个插件： http: [//www.appelsiini.net/projects/jeditable/default.html](http://www.appelsiini.net/projects/jeditable/default.html)；[http://www.appelsiini.net/projects/jeditable](http://www.appelsiini.net/projects/jeditable)

# ruby-on-rails-3 - 创建新的 Active Admin 用户时发送 Active Admin 电子邮件

> ID：16018820
> 
> 赞同：0
> 
> 时间：2013-04-15T15:16:37.917
> 
> 标签：ruby-on-rails-3, activeadmin

我在我的 Rails 应用程序中使用 Active Admin。我已经能够设置它并使用默认用户，但我无法添加新用户。当我去添加新管理员用户时，它让我输入用户名，但从不发送电子邮件来设置密码。Active Admin 如何从开发配置中发送默认电子邮件以便能够为我的用户设置密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:21:08.837

默认情况下，Active Admin 使用 Devise 进行身份验证。如果您启用`:confirmable`它，它将向该用户发送电子邮件以验证其帐户的创建。您可以在此处阅读有关启用`:confirmable`现有设置的详细信息：[https ://github.com/plataformatec/devise/wiki/How-To%3a-Add-%3aconfirmable-to-Users](https://github.com/plataformatec/devise/wiki/How-To%3a-Add-%3aconfirmable-to-Users)

# c# - 以线程安全的方式使用 .Dispose

> ID：16018821
> 
> 赞同：1
> 
> 时间：2013-04-15T15:16:38.283
> 
> 标签：c#, event-handling, thread-safety, dispose

在上一个问题中，我得到了一个很棒的解决方案来解决我遇到的内存泄漏问题。但是有一个问题 - 解决方案涉及在事件处理程序中处理不必要的数据，该事件处理程序似乎在其最后一次迭代完成之前被调用。每次从我的网络摄像头中拉出一个新帧时，它都会调用此事件处理程序。

```
 private void Handle_New_Frame(object sender, NewFrameEventArgs eventArgs)
    {
        //textBox1.Text = "Frame #: " + counter;
        //counter++;

        //bitmap = (Bitmap)eventArgs.Frame.Clone();
        if (bitmap != null)
            bitmap.Dispose();
        bitmap = new Bitmap(eventArgs.Frame);

        //bitmap = AForge.Imaging.Image.Clone(eventArgs.Frame);

        if (videoPictureBox1.Image != null)
            videoPictureBox1.Dispose(); //THE CRASH HAPPENS HERE. 
        videoPictureBox1.Image = bitmap;
    } 
```

错误是：跨线程操作无效：控件“videoPictureBox1”从创建它的线程以外的线程访问。

我的问题是我一点也不熟悉 C# 线程，而且一般来说，我对线程并不熟悉。我在 StackOverflow 上发现了类似的问题，但没有一个我能够提取与我自己的问题相关的足够信息来让我走上正确的轨道（或者我可能看对了答案并错过了它！）

我在下面的链接中找到了两个 MSDN 答案，但我仍然很难掌握哪种解决方案最适合我的问题。

[http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28EHInvalidOperation.WinForms.IllegalCrossThreadCall%29;k%28TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5%29;k %28DevLang-csharp%29&rd=true](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28EHInvalidOperation.WinForms.IllegalCrossThreadCall%29;k%28TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5%29;k%28DevLang-csharp%29&rd=true)

[http://msdn.microsoft.com/en-us/library/8843a9ch.aspx](http://msdn.microsoft.com/en-us/library/8843a9ch.aspx)

我很抱歉在这么短的时间内连续问了两个问题，也为他们在同一个话题上道歉。我只是害怕如果没有朝正确的方向轻推，我可能会像谷歌上的一条鱼一样在谷歌上晃来晃去，看着错误的地方。

所以我的问题是：您认为哪种方法最适合避免此错误？如果你碰巧知道可以帮助我解决这个问题的文档、示例代码或教程，那也太棒了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:29:00.963

如果您仍在使用它，则不应丢弃您的 videopicturebox。您应该只处置不再需要的资源。

你的代码应该是这样的

```
private void Handle_New_Frame(object sender, NewFrameEventArgs eventArgs)
{
    var newBitmap = new Bitmap(eventArgs.Frame);
    //This assumes the picture box descends from Control
    if(videoPictureBox1.InvokeRequired)        
    {
        Action action = () => videoPictureBox1.Image = newBitmap;
        //Invoke to make the action happen on the GUI thread
        videoPictureBox1.Invoke(action);
    }
    else
        videoPictureBox1.Image = newBitmap;    
    //Dispose the old bitmap now that it is not assigned to the picturebox anymore   
    if (bitmap != null)
        bitmap.Dispose();
    bitmap = newBitmap;
} 
```

您还可以将逻辑拆分为另一个方法，然后根据是否需要调用来调用该方法。

# html - GWT uibinder 自动更正关闭

> ID：16018822
> 
> 赞同：2
> 
> 时间：2013-04-15T15:16:39.893
> 
> 标签：html, gwt, uibinder, gwt2

我使用 GWT uibinder 方法，我的 html 包含一个文本框

```
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
     xmlns:g="urn:import:com.google.gwt.user.client.ui"
     xmlns:idmw="urn:import:com.testing.wid.impl">
    <g:HTMLPanel>
    <table align="center" valign="center" height="25%">
        <tr><td><g:TextBox ui:field='searchS' /></td></tr>

    </table>
    </g:HTMLPanel> 
```

我如何**关闭此文**本框的自动更正和自动大写？我试过了

```
 <g:TextBox ui:field='searchS' autocapitalize="off" autocorrect="off"/> 
```

但我明白了

```
[ERROR] Class TextBox has no appropriate setAutocorrect()
method Element <g:TextBox autocapitalize='off' autocorrect='off' ui:field='searchS'> 
```

我还有其他方法可以做到吗？？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T16:15:31.380

正如@Boris Brudnoy 已经指出的那样，TextBox 没有内置的方法。Takin 进一步提出他的建议，将其提取到新的自定义组件中会很好（以简化重用和支持）：

1.  添加新包（例如`com.app.shared.customcontrol`）
2.  添加新的自定义文本框：

    ```
    public class CustomTextBox extends TextBox {

        public void setAutocomplete(String value){
            this.getElement().setAttribute("autocomplete", value);
        }

        public void setAutocapitalize(String value){
            this.getElement().setAttribute("autocapitalize", value);
        }
    } 
    ```

3.  使用 UI binder 声明新的命名空间并使用您的组件：

    ```
    <!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
    <ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
        xmlns:g="urn:import:com.google.gwt.user.client.ui"
        xmlns:c="urn:import:com.app.shared.customcontrol">

        <g:HTMLPanel ...>
            <c:CustomTextBox ui:field="..." autocomplete="off" autocapitalize="off"  />
        </g:HTMLPanel>
    </ui:UiBinder> 
    ```

作为替代方法，如果您想在系统范围内应用这些设置，您可以通过构造函数来实现：

```
public class CustomTextBox extends TextBox {

    public CustomTextBox() {
        this.getElement().setAttribute("autocomplete", "off");
        this.getElement().setAttribute("autocapitalize", "off");
    }

    ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:40:32.797

由于 GWT 不会将 UiBinder 属性直接转换为 HTML 元素属性，因此您尝试过的方法将不起作用。相反，正如您的错误消息提示的那样，它会查找表单的小部件设置器方法`set[UiBinder_attribute]`。由于[TextBox 类](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/TextBox.html)`setAutocorrect`中既没有也没有`setAutocapitalize`方法，因此您得到的错误是预期的。

您可以做的是下降到元素级别并编写类似这样的内容，例如在您的小部件的构造函数中：

```
 public MyWidget() {
      initWidget(uiBinder.createAndBindUi(this));
      searchS.getElement().setProperty("autocapitalize", "off");
      searchS.getElement().setProperty("autocorrect", "off");
   } 
```

# php - 使用php在csv文件中的数组内显示一个数组

> ID：16018823
> 
> 赞同：0
> 
> 时间：2013-04-15T15:16:42.253
> 
> 标签：php, csv

我使用创建了一个数组

```
 $processed[$y] = array('source' => $source,
            'check total' => number_format($checkTotal, 2, '.', ''),//($rows['total'], 2, '.', ''),
            'check number' => $num,
            'table' => $invTable,
            'skus' => $skuArray,
            'check amount' => number_format($amount, 2, '.', '')
            );
$y++; 
```

我的 $skuArray 是一个数组，其中包含与特定支票号码关联的所有 sku。我试图让它显示如下：

```
 source  check total check number  table        skus     check amount
    MNC       152.32       649       inv_temp    10198547   152.32
                                                 10195874 
```

所以它会在列出下一个项目之前列出所有附加到特定支票号码的 sku。
这是我将 $processed 转换为 csv 文件的函数：

```
 function to_csv( $array ) {
 $csv = "";

 if (count($array) == 0) return "No Processed checks found";

 ## Grab the first element to build the header
 $arr = array_pop( $array );
 $temp = array();
 foreach( $arr as $key => $data ) {
   $temp[] = $key;
 }
 $csv = implode( ',', $temp ) . "\r\n";

 ## Add the data from the first element
 $csv .= to_csv_line( $arr );

 ## Add the data for the rest
 foreach( $array as $arr ) {
   $csv .= to_csv_line( $arr );
 }

 return $csv;
    }

    function to_csv_line( $array ) {
 $temp = array();
 foreach( $array as $elt ) {
   $temp[] = '"' . addslashes( $elt ) . '"';
 }

 $string = implode( ',', $temp ) . "\r\n";

 return $string;
    } 
```

我怎样才能做到这一点？我曾尝试使用数组（'skus=>$skuArray），但它只是在结果中给了我“数组”。

更新：这是当我执行 var_dump($skuArray) array(1075) { [0]=> string(8) "10182997" [1]=> string(8) "10190313" [2] 时数组的样子=> 字符串（8）“10190314”[3]=> 字符串（8）“10190315”等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:45:44.497

我提供了一个未经测试的解决方案，因此请自行决定使用。

我已经尽力通过代码中的注释来解释一切。

1.  从 sku 数组中删除第一个 sku 值，将其分配给第一行。

2.  根据线路键将其他 sku 添加到临时数组中。

3.  检查临时 sku 数组，并从中创建附加行。

您的最终`to_csv`功能将如下所示：

```
function to_csv( $array ) {
    $csv = "";

    if (count($array) == 0) return "No Processed checks found";

    ## Grab the first element to build the header
    $arr = $array[0];
    $temp = array();
    foreach( $arr as $key => $data ) {
        $temp[] = $key;
    }
    $csv = implode( ',', $temp ) . "\r\n";

    ## Process each line
    foreach( $array as $arr ) {

        ## Check for multiple sku values.  Create a temporary array for them to add them after this line.
        if(isset($arr['skus']) && is_array($arr['skus']))
        {
            //Remove the first value (since we only need it for the actual line item)
            $sku_value = $arr['skus'][0];
            unset($arr['skus'][0]);

            //Create temporary lines for each sku
            $temp_sku_arrays = array();
            foreach($arr['skus'] as $sku)
            {
                $sku_array = array();
                foreach($arr as $key => $value)
                {
                    //Set only the sku key with a value.
                    $sku_array[$key] = ($key == 'skus' ? $sku : '');
                }
                $temp_sku_arrays[] = $sku_array;
            }

            //Set the first line to the first sku value.
            $arr['skus'] = $sku_value;          
        }  

        $csv .= to_csv_line( $arr );

        //Check for additional sku lines, then add them
        if(isset($temp_sku_arrays) && is_array($temp_sku_arrays))
        {
            foreach($temp_sku_arrays as $sku_array)
            {   
                $csv .= to_csv_line( $sku_array );
            }
            unset($temp_sku_arrays);
        }
    }

    return $csv;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:20:22.410

我认为 CSV 不太适合您将要做的事情。我会使用 json 或 xml。但是，您可以选择与 csv 分隔符不同的分隔符来表示数组，如下所示：

```
foo,bar1;bar2;bar3,... 
```

什么将代表以下记录：

```
$record = array (
   'foo',
   array ('bar1', 'bar2', 'bar3')
); 
```

# c# - WPF：如何在 DataGrid 中添加自定义列？

> ID：16018824
> 
> 赞同：1
> 
> 时间：2013-04-15T15:16:43.407
> 
> 标签：c#, wpf, xaml, datagrid

我对这个问题进行了一些搜索，发现有几种主要方法可以在 WPF 中使用 DataGrid。我仍在学习 WPF 和一般的“绑定”数据，因此任何提示都值得赞赏。

此处显示的代码是功能性的，但我觉得我对我的数据没有太多控制权。我在 Windows 窗体和数据网格方面的大部分经验都来自 GridView。

**编辑：**我的问题实际上是什么有些混乱。让我澄清一下：注释掉的表单代码将创建自定义列。如何以编程方式使用 ObservableCollection 中的数据填充这些自定义库。就像我在这里：

```
 foreach (Customer cmr in customerList)
        {
            customerGridView.Rows.Add(cmr.customerID, cmr.customerName, cmr.customerArea);
        } 
```

有没有更简单的方法来处理我不知道的 DataGrid？

这是我的位置：

```
namespace WpfApplication1
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    Customer customer = new Customer();
    ObservableCollection<Customer> customerList = new ObservableCollection<Customer>();

    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded_1(object sender, RoutedEventArgs e)
    {

        //DataGridTextColumn c1 = new DataGridTextColumn(); 
        //c1.Header = "Customer ID"; 
        //c1.Binding = new Binding("CustomerID");
        //customerDg.Columns.Add(c1);

        //DataGridTextColumn c2 = new DataGridTextColumn(); 
        //c2.Header = "Customer Name";
        //c2.Binding = new Binding("CustomerName");
        //customerDg.Columns.Add(c2);

        //DataGridTextColumn c3 = new DataGridTextColumn(); 
        //c3.Header = "Customer Area";
        //c3.Binding = new Binding("CustomerArea");
        //customerDg.Columns.Add(c3); 

        customerList = customer.GetAllCustomers();

        customerDg.ItemsSource = customerList;

        //foreach (Customer cust in customerList)
        //{
        //    customerDg.Items.Add(cust);
        //}
    }
}
}

namespace WpfApplication1.Data_Layer
{
class Customers
{
    static ConnectionStringSettings settings = ConfigurationManager.ConnectionStrings["MSAccess1"];
    // Return a list of all products
    public static ObservableCollection<Customer> GetAllCustomers()
    {

        Customer customer;
        ObservableCollection<Customer> AllCustomers = new ObservableCollection<Customer>();
        string p = "SELECT * FROM customer;";

        using (OleDbConnection dbConn = new OleDbConnection(settings.ConnectionString))
        {
            try
            {
                dbConn.Open();

                using (OleDbCommand cmd = dbConn.CreateCommand())
                {
                    cmd.CommandText = p;
                    using (OleDbDataReader dbReader = cmd.ExecuteReader())
                    {
                        // make sure we have 1 or more rows in the data set
                        while (dbReader.Read())
                        {
                            customer = new Customer();
                            customer.customerID = Convert.ToInt32(dbReader["CustomerID"]);
                            customer.customerName = dbReader["CustomerName"].ToString();
                            customer.customerArea = Convert.ToChar(dbReader["CustomerArea"].ToString());
                            AllCustomers.Add(customer);
                        }

                    }
                }
            }

            catch (Exception ex)
            {
                Console.WriteLine("Something went wrong: " + ex);
            }

            finally
            {
                dbConn.Close();
            }

        }

        return AllCustomers;
    }
}
}

namespace WpfApplication1.Business_Layer
{
class Customer
{
    public int customerID { get; set; }
    public string customerName { get; set; }
    public char customerArea { get; set; }

    public Customer()
    {
        customerID = 0;
        customerName = "";
        customerArea = 'X';
    }

    public Customer(int customerID, string customerName, char customerArea)
    {
        this.customerID = customerID;
        this.customerName = customerName;
        this.customerArea = customerArea;
    }

    public ObservableCollection<Customer> GetAllCustomers()
    {
        return Customers.GetAllCustomers();
    }
}
} 
```

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="305.263" Loaded="Window_Loaded_1">
<Grid Margin="0,0,-8,0">
    <TextBox x:Name="customerNumberTxt" HorizontalAlignment="Left" Height="23" Margin="163,10,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="120"/>
    <TextBox x:Name="customerNameTxt" HorizontalAlignment="Left" Height="23" Margin="163,38,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="120"/>
    <TextBox x:Name="customerAreaTxt" HorizontalAlignment="Left" Height="23" Margin="163,66,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="120"/>
    <Label x:Name="customerNumberLbl" Content="Cutomer number:" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.242,-2.146" Width="130"/>
    <Label x:Name="customerNameLbl" Content="Cutomer name:" HorizontalAlignment="Left" Margin="10,35,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.242,-2.146" Width="130"/>
    <Label x:Name="customerAreaLbl" Content="Cutomer area:" HorizontalAlignment="Left" Margin="10,63,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.242,-2.146" Width="130"/>
    <DataGrid x:Name="customerDg" AutoGenerateColumns="True" HorizontalAlignment="Left" Margin="10,105,0,0" VerticalAlignment="Top" Height="205" Width="273">
        <!--<DataGrid.Columns>
            <DataGridTextColumn Header="Some header" ></DataGridTextColumn>
            <DataGridTextColumn Header="Some header 2"></DataGridTextColumn>
            <DataGridTextColumn Header="Some header 3"></DataGridTextColumn>
        </DataGrid.Columns>-->
    </DataGrid>

</Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T15:26:02.720

不确定，但这可能会对您有所帮助（这会添加类似 CheckBox 的列）：

> 使用**DataGridTemplateColumn**您可以制作自定义列。

```
<DataGrid>
    <DataGrid.Columns>
        <DataGridTemplateColumn>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <CheckBox></CheckBox>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

# javascript - 如何在某些点击时不触发 window.onhashchange？

> ID：16018828
> 
> 赞同：0
> 
> 时间：2013-04-15T15:16:53.327
> 
> 标签：javascript, jquery

我有 2 个按钮，A 和 B。单击 A 时，主题标签会发生变化，我想调用该`window.onhashchange`函数。但是，在单击 B 时，我手动将主题标签附加到 URL。在后一种情况下，我不想`window.onhashchange`被触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:06:12.307

根据您的问题，我假设您已经通过 PHP 生成了 HTML：

```
<ul id='list-of-links'>
    <li id='A'><a href="#posA">Link A</a></li>
    <li id='B'><a href="#posB">Link B</a></li>
</ul> 
```

有了它，您希望 A 做 B 以外的事情。在您的 JavaScript 中，您可以使用散列函数。

```
var targetHash = window.location.hash.slice(1);

if( targetHash != 'posB' ) {
    //do something as it's not 'posB'
}; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:59:48.143

[在这个答案](https://stackoverflow.com/a/210345/1149736)和[这个](https://stackoverflow.com/a/2518441/1149736)答案的帮助下，您可以临时删除事件句柄。这是带有事件[的 jsfiddle.net 的工作示例，](http://jsfiddle.net/JXY5B/)`click`因此假设`jQuery >= 1.8`它会相似，因此是这样的：

```
// Initialization, add some events
$.hashchange(...);

// Store event handles for hashchange
hashchange_handles = [];
$.each( $._data($('#foo').get(0), "events")['hashchange'], function(i,handle){
    // alert(handle.handler);
    hashchange_handles.push(handle.handler);
});

// Remove handles
$.off('hashchange');

// Do your stuff here

// Restore event handler
length = hashchange_handles.length;
for(var i=0; i<length; i++) {
    $.hashchange( hashchange_handles[i]);
} 
```

它工作了`click`所以希望它会工作`hashchange`。

[注意：我知道代码并不完美，您应该对其进行调整。另外，我仅针对`click`.]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:20:09.663

如果没有任何代码，我只能建议检查导致事件的按钮的 ID 并采取相应措施。

# search - Solr - 丰富 TermsComponent 答案

> ID：16018829
> 
> 赞同：0
> 
> 时间：2013-04-15T15:17:00.557
> 
> 标签：search, solr, lucene, websphere-commerce

我正在使用 Solr 3.5.0（带有 WebSphere Commerce）。在执行搜索时，商务部使用建议工具来建议（自动完成）关于已经在搜索框中输入的字母的搜索词。

目前，WebSphere Commerce 正在使用 Solr 的 TermsComponent。但我的新要求之一是能够丰富建议术语列表。

你知道有没有办法通过创建一个纯文本字典，使用其他 solr 组件来做到这一点，......？

感谢阅读，感谢您的帮助。

问候，德克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:50:06.183

我认为纯文本字典可能不是可用的数据源（即使您可以使用它，通过纯文本文件进行线性搜索也可能太慢）。如果您从您的字典创建索引，您可能会将其作为分片合并到 TermsComponent 中（请参阅[TermsComponent 文档](http://wiki.apache.org/solr/TermsComponent)，在“分布式搜索支持”标题下）。

我不相信 TermsComponent 支持搜索多个字段，因此您需要确保您要使用的字典中的术语使用相同的字段名称（也就是说，如果您正在查看“名称”字段在索引中，然后在索引字典中创建一个“名称”字段，而不是“字典条目”字段）

不过，在我看来，我无法理解这将是什么价值。通常，它旨在查看该字段索引中可用的术语。用更多数据“丰富”它，只是提供搜索时实际上无法找到的建议。当然，我并不真正了解您的搜索实现，但在大多数情况下，这肯定是我的想法。

# java - 字符串替换用 $ 符号抛出错误

> ID：16018831
> 
> 赞同：11
> 
> 时间：2013-04-15T15:17:03.463
> 
> 标签：java, regex, string

我在替换java中的字符串时遇到问题...

该行是：

```
subject = subject.replaceAll("\\[calEvent\\]", calSubject); 
```

此行不适用于 $ 登录 calSubject。

主题变量是什么，来自文件的动态主题行变量。例如像这样： Calnot = [calEvent]

我想要做的是用主题变量替换 calEvent 占位符。但是我是如何做到的却不起作用，因为当主题包含 $ 符号时它会崩溃。

知道如何做到这一点，因此如果主题包含 $ 符号或任何字符，它就不会中断？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-15T15:23:06.970

那是因为美元符号是替换字符串中的特殊字符，`Matcher.quoteReplacement()`用于转义这种字符。

```
subject = subject.replaceAll("\\[calEvent\\]", Matcher.quoteReplacement(calSubject)); 
```

来自以下文档`String.replaceAll()`：

> 请注意，替换字符串中的反斜杠 ( `\`) 和美元符号 ( `$`) 可能会导致结果与将其视为文字替换字符串时的结果不同；请参阅 Matcher.replaceAll。如果 `Matcher.quoteReplacement(java.lang.String)`需要，用于抑制这些字符的特殊含义。

请注意，美元符号用于指代正则表达式（ 、 等）中的相应捕获`$0`组`$1`。

**编辑**

`Matcher.quoteReplacement()`已在 Java 1.5 中引入，如果您卡在 Java 1.4 中，则必须`$`通过将其替换`\$`为字符串内部来手动转义。但是因为`String.replaceAll()`也会将`\`and`$`作为特殊字符，所以您必须将它们转义一次，并且您还必须`\`为 Java 运行时再次转义所有字符。

```
("$", "\$") /* what we want */
("\$", "\\\$") /* RegExp engine escape */
("\\$", "\\\\\\$") /* Java runtime escape */ 
```

所以我们得到：

```
calSubject = calSubject.replaceAll("\\$", "\\\\\\$"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T15:22:58.760

如果不需要这个`regex`特性，可以考虑使用String类的这个方法： [replace(CharSequence target,CharSequence replacement)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)

它还可以保存您的“转义”反斜杠。

api文档：

> **用指定的文字替换序列**替换此字符串中与文字目标序列匹配的每个子字符串。替换从字符串的开头到结尾进行，例如，将字符串“aaa”中的“aa”替换为“b”将导致“ba”而不是“ab”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T15:23:26.473

从 replaceAll 的文档中：

> 请注意，替换字符串中的反斜杠 () 和美元符号 ($) 可能会导致结果与将其视为文字替换字符串时的结果不同；请参阅 Matcher.replaceAll。如果需要，使用 java.util.regex.Matcher.quoteReplacement 来抑制这些字符的特殊含义。

在 Matcher.replaceAll

> 如上所述，美元符号可以被视为对捕获的子序列的引用，并且反斜杠用于转义替换字符串中的文字字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T15:24:51.630

请用

```
Matcher.quoteReplacement(calEvent); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T15:24:38.823

不确定我是否真的理解您的问题，但请尝试

```
subject = subject.replaceAll("\\[calEvent\\]", Matcher.quoteReplacement(calSubject)); 
```

# c# - 从非 UI 线程打开 Windows 窗体

> ID：16018835
> 
> 赞同：0
> 
> 时间：2013-04-15T15:17:21.320
> 
> 标签：c#

如何从非 UI 线程正确打开 Windows 窗体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T17:06:26.373

```
var th = new Thread(() =>
{
    var form = new YourForm();  
    form.FormClosing += (s, e) => Application.ExitThread();
    form.Show();
    Application.Run();
});
th.SetApartmentState(ApartmentState.STA);
th.Start(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T15:24:34.113

您可以根据需要使用 ShowDialog() 和 Show() 方法。通过访问以下链接查看示例

[http://msdn.microsoft.com/en-us/library/39wcs2dh(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/39wcs2dh(v=vs.80).aspx)

# django - 在 Django 的 ModelForm 中使用 ModelChoiceField 时，我得到“int() 参数必须是字符串或数字，而不是‘列表’”

> ID：16018838
> 
> 赞同：0
> 
> 时间：2013-04-15T15:17:28.063
> 
> 标签：django, django-forms, django-admin

我希望能够在我的表单中为我的模型在 django admin 中使用 ModelChoiceField。但是，当我自定义和添加时，默认小部件 Select 可以工作

```
class GalleryModelForm(forms.ModelForm):
    image = forms.ModelChoiceField(queryset=models.Photo.objects.all(),
                                   widget=forms.SelectMultiple, empty_label=None)
    class Meta:
        model = models.Gallery 
```

我明白了

```
int() argument must be a string or a number, not 'list' 
```

从追溯：

```
/app/.heroku/python/lib/python2.7/site-packages/django/db/models/fields/__init__.py in get_prep_value

 def get_prep_value(self, value):
    if value is None:
        return None
    return int(value) 
```

有没有办法将字符串或数字传递给`get_prep_value`或覆盖它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:24:49.620

您应该使用[ModelMultipleChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ModelMultipleChoiceField)类，而不是使用 ModelChoiceField 来设置我认为的 SelectMultiple 小部件。

因此，它将为您提供以下信息：

```
class GalleryModelForm(forms.ModelForm):
    image = forms.ModelMultipleChoiceField(queryset=models.Photo.objects.all(), empty_label=None)
    class Meta:
        model = models.Gallery 
```

然后，请注意表单是否为空，Django 1.5 将返回一个空查询集，而旧版本将返回一个空列表（丑陋）。

# mysql - MySQL 中的 SELECT DISTINCT 语句需要 10 分钟

> ID：16018839
> 
> 赞同：7
> 
> 时间：2013-04-15T15:17:30.163
> 
> 标签：mysql, performance

我对 MySQL 相当陌生，我正在尝试使用以下语句选择一组不同的行：

```
SELECT DISTINCT sp.atcoCode, sp.name, sp.longitude, sp.latitude
FROM `transportdata`.stoppoints as sp
INNER JOIN `vehicledata`.gtfsstop_times as st ON sp.atcoCode = st.fk_atco_code
INNER JOIN `vehicledata`.gtfstrips as trip ON st.trip_id = trip.trip_id
INNER JOIN `vehicledata`.gtfsroutes as route ON trip.route_id = route.route_id
INNER JOIN `vehicledata`.gtfsagencys as agency ON route.agency_id = agency.agency_id
WHERE agency.agency_id IN (1,2,3,4); 
```

但是，select 语句大约需要 10 分钟，所以显然有些事情正在进行中。

一个重要的因素是这张桌子`gtfsstop_times`很大。（约 2.5 亿条记录）

索引似乎设置正确；以上所有连接都使用索引列。表大小大致为：

```
gtfsagencys - 4 rows
gtfsroutes - 56,000 rows
gtfstrips - 5,500,000 rows
gtfsstop_times - 250,000,000 rows
`transportdata`.stoppoints - 400,000 rows 
```

服务器有 22Gb 的内存，我将 InnoDB 缓冲池设置为 8G，我使用的是 MySQL 5.6。

任何人都可以看到让这个运行更快的方法吗？或者实际上，根本没有！

stoppoints 表在不同的模式中是否重要？

编辑： EXPLAIN SELECT... 返回：

![在此处输入图像描述](https://i.stack.imgur.com/oErCO.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T15:40:13.033

看起来您正在尝试根据某些标准查找停止点的集合。而且，您正在使用`SELECT DISTINCT`避免重复的停止点。那正确吗？

看起来 atcoCode 是您的停止点表的唯一键。那正确吗？

如果是这样，试试这个：

```
SELECT sp.name, sp.longitude, sp.latitude, sp.atcoCode
  FROM `transportdata`.stoppoints` AS sp
  JOIN ( 
     SELECT DISTINCT st.fk_atco_code AS atcoCode
       FROM `vehicledata`.gtfsroutes AS route
       JOIN `vehicledata`.gtfstrips AS trip ON trip.route_id = route.route_id
       JOIN `vehicledata`.gtfsstop_times AS st  ON trip.trip_id = st.trip_id
       WHERE route.agency_id BETWEEN 1 AND 4
  ) ids ON sp.atcoCode = ids.atcoCode 
```

这做了几件事：它消除了您似乎不需要的表（代理）。它将 Agency_id 上的搜索更改`IN(a,b,c)`为范围搜索，这可能有帮助，也可能没有帮助。最后，它将`DISTINCT`处理从必须处理大量数据的情况重新定位到只需要处理 ID 值的子查询情况。

（`JOIN`并且`INNER JOIN`是相同的。我曾经`JOIN`使查询更易于阅读。）

这应该会加快你的速度。但是，不得不说，四分之一 gigarow 表是一张大表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T15:30:44.757

拥有 250M 条记录，我会将 gtfsstop_times 表分片在一列上。然后可以将每个分片表连接到一个单独的查询中，该查询可以在单独的线程中并行运行，您只需要合并结果集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T15:43:46.237

诀窍是减少**gtfsstop_times** SQL 必须评估的行数。在这种情况下，SQL 首先评估**gtfsstop_times**和 **`transportdata`.stoppoints**的内部连接中的每一行，对吗？`transportdata`.stoppoints 有多少行？然后 SQL 计算 WHERE 子句，然后计算 DISTINCT。它是如何做到 DISTINCT 的？通过多次查看每一行来确定是否还有其他类似的行。那将需要永远，对吧？

然而， GROUP BY 快速将所有匹配的行压缩在一起，而不评估每一行。我通常使用连接来快速减少查询需要评估的行数，然后查看我的分组。

在这种情况下，您想用分组替换 DISTINCT。

尝试这个;

```
SELECT sp.name, sp.longitude, sp.latitude, sp.atcoCode

FROM `transportdata`.stoppoints as sp
    INNER JOIN `vehicledata`.gtfsstop_times as st ON sp.atcoCode = st.fk_atco_code
    INNER JOIN `vehicledata`.gtfstrips as trip ON st.trip_id = trip.trip_id
    INNER JOIN `vehicledata`.gtfsroutes as route ON trip.route_id = route.route_id
    INNER JOIN `vehicledata`.gtfsagencys as agency ON route.agency_id = agency.agency_id

WHERE agency.agency_id IN (1,2,3,4)

GROUP BY sp.name
    , sp.longitude
    , sp.latitude
    , sp.atcoCode 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T18:18:33.020

您的问题还有其他有价值的答案，而我的答案是对它的补充。我假设`sp.atcoCode`并且`st.fk_atco_code`是他们表中的索引列。

如果您可以验证并确保`WHERE`子句中的机构 ID 有效，则可以消除``vehicledata`在 JOINS 中加入 .gtfsagencys`，因为您没有从表中获取任何记录。

```
SELECT DISTINCT sp.atcoCode, sp.name, sp.longitude, sp.latitude
FROM `transportdata`.stoppoints as sp
INNER JOIN `vehicledata`.gtfsstop_times as st ON sp.atcoCode = st.fk_atco_code
INNER JOIN `vehicledata`.gtfstrips as trip ON st.trip_id = trip.trip_id
INNER JOIN `vehicledata`.gtfsroutes as route ON trip.route_id = route.route_id
WHERE route.agency_id IN (1,2,3,4); 
```

# c# - 查询 SQL Server 的百分比

> ID：16018841
> 
> 赞同：2
> 
> 时间：2013-04-15T15:17:38.800
> 
> 标签：c#, sql-server, linq, entity-framework-5

我有三个表：`Customers`,`Origins`和 (映射表) `CustomerOrigins`。请注意，客户可以来自多个（`Origin`例如`Internet`, `Advertisement`）`Newsletter`

现在我想显示一个饼图，说明我的客户来自哪里。

结果应该是`List<string, double>`.

我完全迷失了，即使是如何开始整个查询......任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:19:58.397

你不能做 a`List<string, double>`因为`List<T>`只接受一个类型参数。试试这个：

```
var results =
    (from c in db.Customers
     from o in c.Origins
     group o by o.DisplayName into g
     let total = db.Customers.Count()
     select new
     {
         Origin = g.Key,
         Percent = ((double)g.Count() / (double)total) * 100
     })
    .ToList(); 
```

这有可能多次计算单个客户（每个来源一次），因此您不会想出总计 100% 的列表。

如果你想要一个百分比超过`CustomerOrigin`记录，试试这个

```
var results =
    (from c in db.Customers
     from o in c.Origins
     group o by o.DisplayName into g
     let total = db.Customers.Sum(x => x.Origins.Count())
     select new
     {
         Origin = g.Key,
         Percent = ((double)g.Count() / (double)total) * 100
     })
    .ToList(); 
```

# c# - 如何使用 .NET Facebook SDK 在我的 Facebook 墙上获取链接？

> ID：16018844
> 
> 赞同：0
> 
> 时间：2013-04-15T15:17:50.580
> 
> 标签：c#, asp.net, c#-4.0, facebook-c#-sdk

我正在使用这里找到的 SDK... [http://facebooksdk.net/](http://facebooksdk.net/)

在这一点上，文档似乎严重缺乏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:18:25.567

经过一段时间的搜索和试验，我把它拼凑在一起。

*   首先，您需要在[https://developers.facebook.com/](https://developers.facebook.com/)上设置一个应用程序来检索您的 AppSecret 和 AppId。
*   然后你需要找到你的 UserId。[这是您访问https://graph.facebook.com/](https://graph.facebook.com/) {username}时的 id 字段

事实证明，挑战之一是 AccessToken 过期。因此，您还必须编写在前一个 AccessToken 过期时检索新 AccessToken 的代码。

这就是我想出的……

```
public static class FacebookUpdates
{
    private static string AppId = "00000000";
    private static string AppSecret = "xxxxxxxxx";
    private static string UserID = "0000000000";
    private static string AccessToken;

    public static dynamic GetLinks()
    {
        var fb = new FacebookClient();
        if (string.IsNullOrEmpty(AccessToken)) AccessToken = GetAccessToken(fb); // Cache the result in static variable AccessToken
        fb.AccessToken = AccessToken;

        var query = string.Format("SELECT link_id, title, url FROM link WHERE owner = {0} LIMIT 5", UserID);

        dynamic parameters = new ExpandoObject();
        parameters.q = query;
        dynamic results;

        try
        {
            results = fb.Get("/fql", parameters);
        }
        catch (FacebookOAuthException)
        {                
            AccessToken = GetAccessToken(fb); // Cache the result in static variable AccessToken
            fb.AccessToken = AccessToken;

            // Retry with new AccessToken
            results = fb.Get("/fql", parameters);
        }

        return results;
    }

    private static string GetAccessToken(FacebookClient fb)
    {
        dynamic result = fb.Get("oauth/access_token", new
        {
            client_id = AppId,
            client_secret = AppSecret,
            grant_type = "client_credentials"
        });
        return result.access_token;
    }
} 
```

现在您可以创建一个在代码隐藏中调用的用户控件`GetLinks()`（抱歉，此示例在 VB 中）...

```
Public Shared FacebookLinks As Object = FacebookUpdates.GetLinks().data 
```

然后用户控件可能看起来像这样......

```
<%@ OutputCache Duration="600" VaryByParam="None" %>
<%@ Control Language="vb" AutoEventWireup="false" CodeBehind="FacebookUpdates.ascx.vb" Inherits="FacebookUpdates" %>
<%For Each Link In FacebookLinks%>
    <p><a href="<%= Link.url %>" rel="nofollow" target="_blank"><%= Link.title%></a></p>
<%Next%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:13:22.927

如果您不是在编写 ASP.NET 应用程序等，则不需要编写代码。尝试仅使用 Windows PowerShell 和[http://facebookpsmodule.codeplex.com](http://facebookpsmodule.codeplex.com)。

# c# - C# - SqlDataReader 和序列化

> ID：16018847
> 
> 赞同：2
> 
> 时间：2013-04-15T15:17:56.180
> 
> 标签：c#, sql, serialization

可以将 SqlDataReader 传递给会话或发送给客户端吗？

例如，如果我从数据库中检索了一些行，并希望将此数据发送到另一台客户端计算机。我可以通过在服务器上使用 json 对其进行序列化然后在客户端反序列化来简单地做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T15:20:55.793

不，只能序列化数据（没有方法或功能），因此数据读取器将无用，因为您无法调用方法来推进读取器等。模式是将所有记录从阅读器，关闭它，然后将这些对象序列化回客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T15:21:16.730

不，您必须将阅读器映射到 POCO 并且将被序列化。即使您可以在技术上序列化 SqlDatReader 对象，这也是一个**非常**糟糕的主意。不要这样做。使用微规则将查询映射到 DTO 很简单。不要使你的工作复杂化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T15:20:38.687

不，任何与资源相关的对象都不能“传递”给客户端。

这真的没有意义。您应该“物化”数据读取器并传递结果。

即您可以从您的阅读器创建一个SqlDataAdapter，填充一个DataTable 并传递DataTable。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-20T11:21:07.950

老问题，但技术提供了新的解决方案。

您可以使用[Protocol Buffers DataReader Extensions for .NET](https://github.com/rdingwall/protobuf-net-data)来序列化 SqlDataReader，并且可以传递给会话或发送给客户端

例子：

```
 string connstring1 = "Data Source=server1;Initial Catalog=northwind;user=xxx;password=xxx";

        //Serializing an IDataReader into a ProtoBuf:

        Stream buffer = new MemoryStream();
        using (var c1 = new SqlConnection(connstring1))
        {
           c1.Open();
            // Serialize SQL results to a buffer
            using (var command = new SqlCommand("SELECT * FROM products", c1))
            using (var reader = command.ExecuteReader())
                DataSerializer.Serialize(buffer, reader);

            // Read them back
            buffer.Seek(0, SeekOrigin.Begin);
            using (var reader = DataSerializer.Deserialize(buffer))
            {
                while (reader.Read())
                {
                    Console.WriteLine(reader["ProductName"]);
                }
            }
        }

    } 
```

你应该安装 nuget 包：

```
 Install-Package protobuf-net-data 
```

# caml - 在caml中将字符串转换为char

> ID：16018848
> 
> 赞同：0
> 
> 时间：2013-04-15T15:17:57.130
> 
> 标签：caml

如何将字符串“\n”转换为 caml 中的字符“\n”。我们在 caml (char_of_string) 中没有允许某些类似操作的函数。对于像 "a","b".. "z" 这样的字符串，我们很容易取第一个字符，但是当我们有像 "\" 这样的字符时，我们如何进行这种转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:16:02.677

字符提取工作：

```
let x = "\n" in
print_string "test";
print_char (x.[0]);
print_string "end";;

test
end 
```

或者您可能正在考虑模式匹配？

```
fun x = match x with 
| "\n" -> '\n'
| e -> e.[0] 
```

# css - 选择 4 个交替组

> ID：16018849
> 
> 赞同：0
> 
> 时间：2013-04-15T15:18:00.110
> 
> 标签：css, css-selectors

甚至不确定这是否可以做到。还没有看到任何这样的例子。

我想要 4 行匹配然后 4 行不匹配，等等。

```
 match: 1,2,3,4, 9,10,11,12, 17, etc.
don't match: 5,6,7,8, 13,14,15,16 etc. 
```

这是一个以 15 分钟为增量的 24 小时时间表。这样，每个小时都会突出显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T15:40:57.547

哦，我现在明白了。现在我一直在使用偏移选择器，这非常简单。

:nth-child(8n+1) 将从第一行开始匹配每 8 行。然后我可以添加更多具有其他偏移量的选择器：(8n+2)、(8n+3)、(8n+4)

所以：

```
li{
    background-color: white;
}
li:nth-child(8n+1),
li:nth-child(8n+2),
li:nth-child(8n+3),
li:nth-child(8n+4){
    background-color: #EEE;
} 
```

现在我得到 4 行灰色，然后是 4 行白色，这正是我想要的。

# c# - 更改 XML 文件时收到未经授权的异常

> ID：16018851
> 
> 赞同：0
> 
> 时间：2013-04-15T15:18:03.760
> 
> 标签：c#, exception

我有一个应用程序可以在未经授权的异常中更改 webconfig 中的连接字符串。有没有办法允许访问文件？谢谢你的帮助。

异常消息：System.UnauthorizedAccessExeption：对路径“PATH”的访问被拒绝。//xml文件的文件路径

```
var adminConnectionStringConfig = new FileInfo(e.Data.Details.VSStudio.Solution.FullName).Directory
                                  + @"\Web.Admin\ConnectionStrings.config";

//Method that updates the xml file
private void SetupConnectionStrings(string path, string newDb)
{
    var doc = new XmlDocument();
    doc.Load(path);
    XmlNode node = doc.SelectSingleNode("configuration/connectionStrings");
    for (int i = 0; i < node.ChildNodes.Count; i++)
    {
        if (node.ChildNodes[i].Attributes["name"].Value == "SYS")
        {
            //Get ConnectionString for client project
            var connectionString = node.ChildNodes[i].Attributes["connectionString"].Value;
            // Cut all 
            var dbName = node.ChildNodes[i].Attributes["connectionString"]
                .Value.Substring(connectionString.IndexOf("Catalog="));
            dbName = dbName.Replace("Catalog=", "");
            //Db Name that we will now replace
            dbName = dbName.Substring(0, dbName.IndexOf(";"));
            // System.Diagnostics.Debugger.Launch();
            doc.InnerXml = doc.InnerXml.Replace(dbName, newDb);
            doc.Save(path);
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:22:03.590

您可以采取一些步骤。

首先，我会确保您的 XML 文件不是只读的。

如果这不起作用，那么您可以以管理员身份运行该项目。如果您不是管理员，Windows 不允许您修改某些目录。

如果您右键单击 Visual Studio，然后选择`run as administrator`，它将自动以管理员身份调试您的项目。

# android - AsyncTask onPostExecute 没有做它应该做的一切

> ID：16018852
> 
> 赞同：0
> 
> 时间：2013-04-15T15:18:09.240
> 
> 标签：android, android-asynctask, sharedpreferences

我这里有个问题，onPostExecute() 方法没有做它应该做的一切。

正如您在我的 onPostExecute 中看到的，布尔值决定了发生的情况。但是发生的情况是，如果你通过日志得到 b 你什么都看不到，那么执行的代码就是 b = true

对话框显示 en 说它是成功的，但首选项不会更新，我在这里做错了什么？

```
@Override
protected void onPostExecute(Boolean b) {
    publishProgress(100);
    dialog.dismiss();
    if (b) {
        e.putInt(Constants.pref_updateweek, cal.get(Calendar.WEEK_OF_YEAR));
        e.commit();
        AlertDialog.Builder alert = new AlertDialog.Builder(mContext);

        alert.setTitle("Succes");
        alert.setMessage("Alles is bijgewerkt");

        alert.setPositiveButton("Ok", null);

        alert.show();
        act.commUI();
    } else {
        AlertDialog.Builder alert = new AlertDialog.Builder(mContext);

        alert.setTitle("Error");
        alert.setMessage("Er is een fout opgetreden.");

        alert.setPositiveButton("Ok", null);

        alert.show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:59:04.310

好吧，发现我的问题，现在觉得很愚蠢

```
e.putInt(Constants.pref_updateweek, cal.get(Calendar.WEEK_OF_YEAR));
e.commit(); 
```

在我的应用程序的第一个版本中，我忘记了`e.commit()`，并在更新中修复了它。

在另一个类中，我有相同的 AsyncTask 但有一些不同的东西，所以我将旧代码复制到那个类（没有`e.commit()`）所以问题不在我的问题中的代码中，而是在另一个类中非常相似的代码中，但是谢谢的建议！

# boost - 提高posix时间

> ID：16018858
> 
> 赞同：0
> 
> 时间：2013-04-15T15:18:24.763
> 
> 标签：boost, time, posix

我现在有一个非常奇怪的问题。

```
class Message
{
  Field time;
  void SetTimeStamp()
  {
    time.dataTimeValue = &boost::posix_time::microsec_clock::universal_time();
  }
  void SetOtherFields()
  {
  }
};

class Field
{
  boost::posix::ptime* dateTimeValue;
};

int main()
{
  Message myMessage;
  myMessage.SetTimeStamp();
  myMessage.SetOtherFields();
} 
```

当我打电话时`myMessage.SetTimeStamp()`，我可以正确设置时间戳，我可以看到的地址`dateTimeValue`和值是有意义的。但是在那之后，我调用`myMessage.SetOtherFields()`，`dateTimeValue`指针仍然指向同一个内存，这很好，但是那个内存中的值变成了一个 carzy 数字。我不知道发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:08:05.763

一个体面的编译器应该警告代码正在使用临时地址。该[`microsec_clock::local_time()`](http://www.boost.org/doc/libs/1_53_0/doc/html/date_time/posix_time.html)函数`ptime`按值返回，从而`Message::SetTimeStamp`将临时地址存储到`Field::dateTimeValue`. 尝试访问内存的值将导致未定义的行为。

要解决此问题，请考虑更改`Field`为聚合`boost::posix::ptime`成员变量，而不是指针。

```
class Field
{
public:
  boost::posix_time::ptime dateTimeValue;
};

class Message
{
public:
  Field time;
  void SetTimeStamp()
  {
    time.dataTimeValue = boost::posix_time::microsec_clock::universal_time();
  }
}; 
```

# java - 在 JavaFX 中关闭 Swing 面板

> ID：16018860
> 
> 赞同：2
> 
> 时间：2013-04-15T15:18:27.507
> 
> 标签：java, swing, javafx-2, javafx

我添加了一个 JFXPanel，我通过 FXMLLoader 将它加载到 Swing JFrame 中，到目前为止，所有这些工作正常。问题是我想从 JavaFXControl 类中终止 Swing JFrame

```
@FXML
protected void setCancelButton() {
    abstractOptionsFx.dispose();
} 
```

我尝试了 dispose 以及 WindowEvent.WINDOW_CLOSING，但似乎没有一个主题有效。有人知道解决方法还是不可能？

# php - php“else”代码重定向而不是回显

> ID：16018862
> 
> 赞同：0
> 
> 时间：2013-04-15T15:18:32.527
> 
> 标签：php, mysql

只是想在 php 中创建一个登录页面 .. 这里 if 代码正在工作，但 else 代码不工作.. 如果代码也可以工作.. 而不是打印消息.. 这是代码：

```
session_start();  //session starts
$con=mysql_connect('localhost','root','');// connecting to ..........
mysql_select_db('news_db'); //connectin to db
if(isset($_POST['login'])) //if button login is pressed
{
    $name=$_REQUEST['username'];//getting name
    $password=$_REQUEST['password'];   //getting password
    $qyer=mysql_query("select * from news_tb where username='$name' and password='$password'"); //selecting fields
    $row=mysql_fetch_array($qyer); //fetching values in row
    if($row['username']==$name && $row['password']==$password)// condition to match the fields with database
    {   

        header("location:news1.php");  // on else also this page is opening
    }
    else
    {
        echo "pls enter valid information";    //redirects to if condition and doesnt print the msg
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:43:07.570

这是因为通过按发送或其他方式，您将代码发布到脚本。您所做的只是检查它是否已发布，而不是变量本身是否为空。那么如果你在 mySQL 中有一个空行，你将永远不会使用 else。

# r - 结合data.frames总结R中相同列的值

> ID：16018863
> 
> 赞同：13
> 
> 时间：2013-04-15T15:18:34.853
> 
> 标签：r, merge, dataframe, aggregate

我有 3 个站点内物种丰度的数据框（行：站点，列：物种名称）。行号相同，但列号不同，因为并非所有物种都在所有三个数据框中。我想将它们合并到一个数据框中，总结出丰富的相同物种。例如：

数据.frame1

```
 Sp1  Sp2  Sp3  Sp4
site1   1    2    3    1
site2   0    2    0    1
site3   1    1    1    1 
```

数据.frame2

```
 Sp1  Sp2  Sp4
 site1  0    1    2
 site2  1    2    0
 site3  1    1    1 
```

数据.frame3

```
 Sp1  Sp2  Sp5  Sp6
 site1  0    1    1    1     
 site2  1    1    1    5
 site3  2    0    0    0 
```

我想要的是这样的：

```
 Sp1  Sp2  Sp3  Sp4  Sp5  Sp6
 site1  1    4    3    3    1    1
 site2  2    5    0    1    1    5
 site3  4    2    1    2    0    0 
```

我想我必须使用合并，但到目前为止我的尝试未能得到我想要的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-15T15:35:38.170

我会这样`plyr`使用`rbind.fill`：

```
pp <- cbind(names=c(rownames(df1), rownames(df2), rownames(df3)), 
                        rbind.fill(list(df1, df2, df3)))

#   names Sp1 Sp2 Sp3 Sp4 Sp5 Sp6
# 1 site1   1   2   3   1  NA  NA
# 2 site2   0   2   0   1  NA  NA
# 3 site3   1   1   1   1  NA  NA
# 4 site1   0   1  NA   2  NA  NA
# 5 site2   1   2  NA   0  NA  NA
# 6 site3   1   1  NA   1  NA  NA
# 7 site1   0   1  NA  NA   1   1
# 8 site2   1   1  NA  NA   1   5
# 9 site3   2   0  NA  NA   0   0 
```

然后，聚合`plyr's` `ddply`如下：

```
ddply(pp, .(names), function(x) colSums(x[,-1], na.rm = TRUE))
#   names Sp1 Sp2 Sp3 Sp4 Sp5 Sp6
# 1 site1   1   4   3   3   1   1
# 2 site2   2   5   0   1   1   5
# 3 site3   4   2   1   2   0   0 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-15T15:49:59.743

另一种选择是使用`melt/cast`from `reshape2`。这是一个简单的例子：

```
df1 <- read.table(header=T, text="
    Sp1  Sp2  Sp3  Sp4
    site1   1    2    3    1
    site2   0    2    0    1
    site3   1    1    1    1")

df2 <- read.table(header=T, text="
       Sp1  Sp2  Sp4
 site1  0    1    2
 site2  1    2    0
 site3  1    1    1")

df3 <- read.table(header=T, text="
       Sp1  Sp2  Sp5  Sp6
 site1  0    1    1    1     
 site2  1    1    1    5
 site3  2    0    0    0")

df1$site <- rownames(df1)
df2$site <- rownames(df2)
df3$site <- rownames(df3)

DF <- rbind(melt(df1,id="site"),melt(df2,id="site"),melt(df3,id="site"))
dcast(data=DF,formula=site ~ variable,fun.aggregate=sum)

   site Sp1 Sp2 Sp3 Sp4 Sp5 Sp6
1 site1   1   4   3   3   1   1
2 site2   2   5   0   1   1   5
3 site3   4   2   1   2   0   0 
```

简而言之，我们使用站点名称作为附加变量，并将每个数据帧转换为长格式，然后将它们连接成一个数据帧。后者包含长格式的所有值。随着`dcast`我们创建您需要的数据框，站点位于行中（公式左侧），变量位于列中（公式右侧）。sum 函数用于生成多个单元格的变量。

当然，可以使用循环或 *apply 函数将代码扩展到更一般的情况。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-15T19:11:47.787

除了可用的选项之外，这里还有两个坚持使用基础 R 的选项。

**第一个选项**：*广泛聚合（有点）*

```
temp <- cbind(df1, df2, df3)
temp
#       Sp1 Sp2 Sp3 Sp4 Sp1 Sp2 Sp4 Sp1 Sp2 Sp5 Sp6
# site1   1   2   3   1   0   1   2   0   1   1   1
# site2   0   2   0   1   1   2   0   1   1   1   5
# site3   1   1   1   1   1   1   1   2   0   0   0
sapply(unique(colnames(temp)), 
       function(x) rowSums(temp[, colnames(temp) == x, drop = FALSE]))
#       Sp1 Sp2 Sp3 Sp4 Sp5 Sp6
# site1   1   4   3   3   1   1
# site2   2   5   0   1   1   5
# site3   4   2   1   2   0   0 
```

**第二种选择**：*半宽到长到宽*

从概念上讲，这类似于Maxim。K 的回答：以长格式获取数据，这使得操作变得更加容易：

```
> temp1 <- t(cbind(df1, df2, df3))
> # You'll get a warning in the next step
> # Safe to ignore though...
> temp2 <- data.frame(var = rownames(temp), stack(data.frame(temp)))
Warning message:
In data.row.names(row.names, rowsi, i) :
  some row.names duplicated: 5,6,7,8,9 --> row.names NOT used
> xtabs(values ~ ind + var, temp2)
       var
ind     Sp1 Sp2 Sp3 Sp4 Sp5 Sp6
  site1   1   4   3   3   1   1
  site2   2   5   0   1   1   5
  site3   4   2   1   2   0   0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T15:45:02.377

Arun 的答案的替代方法：创建一个包含您需要的所有列的“模板”数组

```
Rgames> bbar<-data.frame('one'=rep(0,3),'two'=rep(0,3),'three'=rep(0,3))
Rgames> bbar
  one two three
1  0    0    0
2   0    0    0
3   0    0    0 
```

然后，给定您的每个数据框，例如

```
Rgames> bar1<-data.frame('one'=c(1,2,3),'two'=c(4,5,6))
Rgames> bar1
  one two
1   1   4
2   2   5
3   3   6 
```

创建一个扩展的数据框：

```
Rgames> newbar1<-bbar
Rgames> for (jj in names(bar) )  newbar1[[jj]]<-bar[[jj]]
Rgames> newbar1
  one two three
1   1   4    0
2   2   5    0
3   3   6    0 
```

然后将所有此类扩展数据帧相加。笨拙但简单。

# vb.net - DataGridView 列计算

> ID：16018864
> 
> 赞同：0
> 
> 时间：2013-04-15T15:18:39.123
> 
> 标签：vb.net, ms-access

我的 datagridview 中有一个名为“Total”的列，该列需要执行计算。

我在 datagridview 中有这些列：

1.  '工作'：1 或 2 值（1 表示正常时间，2 表示随着时间的推移）
2.  'hoursSpent' : 双精度类型值（例如 5.40）
3.  'normalTimeRate' : 双精度值（例如 $3.50）
4.  'overTimeRate' : 双精度值（例如 $4.50）
5.  “总计”：文本

“...”中的名称是它们在列的数据属性名称中的名称。

问题是我需要“总计”来计算（hoursSpent* normalTimeRate 或 OverTimeRate）（因此，如果“工作”列的值是“1”，它将计算（hoursSpent*normalTimeRate））。

代码： http: [//pastebin.com/u1A1sHU1](http://pastebin.com/u1A1sHU1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:44:46.193

您可以在 SELECT 语句中执行“总计”计算，如下所示：

```
 sSQL = "SELECT B.laborHours_id, " & _
                "A.labor_id, " & _
                "A.first_name + ' ' + A.last_name as name, " & _
                "B.project_id, " & _
                "B.location_id, " & _
                "B.dates, " & _
                "B.worked, " & _
                "B.hoursSpentOnDay, " & _
                "B.normalTimeRate, " & _
                "B.overTimeRate, " & _
                "B.hoursSpentOnDay * IIf(B.worked = 1, B.normalTimeRate, B.overTimeRate) As Total" & _
        "FROM tblLabor A, tblLaborHours B " & _
        "WHERE A.labor_id = B.labor_id " 
```

# gwt - 如何设置 GXT 的 Info.display 的样式？

> ID：16018865
> 
> 赞同：0
> 
> 时间：2013-04-15T15:18:43.843
> 
> 标签：gwt, gxt

我正在使用 GXT 的`Info`类来显示消息/通知。我正在尝试使用以下方法更改我的 Info 类的样式：

```
NotificationInfo info = new NotificationInfo(); // extends Info class
// Configuration
InfoConfig config = new DefaultInfoConfig(title, message);
config.setDisplay(milliseconds);
// Formatting
info.setStyleName("background-color:#f9ff4f;text-align:center;" + "border:0x solid black; padding: 3px; font-size:11px;font-weight: bold;");
info.show(config); 
```

但它不工作！任何指针？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T21:39:17.027

应用样式只是一个快速的解决方案而不是最好的解决方案，因为 GWT`CssResource`与直接应用 CSS 相比没有什么优势，比如缩小、验证。正如另一个答案中提到的，最好的方法是创建一个包含您的样式的外观，并`NotificationInfo`用您的样式替换外观。我之前回答过一个类似的问题。认为它会有所帮助。[https://stackoverflow.com/a/15222404/1293087](https://stackoverflow.com/a/15222404/1293087)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:37:30.120

这应该工作......（对于 GXT3 无论如何它都可以）

```
info.getElement().applyStyles("background-color:#f9ff4f;text-align:center;" + "border:0x solid black; padding: 3px; font-size:11px;font-weight: bold;"); 
```

顺便说一句，如果您需要为 gwt 小部件（您在 GXT 应用程序中使用的）做类似的事情，您可以这样做......

```
info.getElement().<XElement> cast().applyStyles("background-color:#f9ff4f;text-align:center;" + "border:0x solid black; padding: 3px; font-size:11px;font-weight: bold;"); 
```

注意：我不确定像这样将其设置为内联的优点，但是设置 css 样式只是失败（好的样式是在元素上设置的，但是您要更改的实际位置会呈现在 table down 中的 td 中的 div 中该行和 div 会覆盖您从您设置的 css 继承的值）。最佳实践肯定是采用 GXT3 小部件的完整外观路线，但对于一个小改动来说这是很多工作，所以我有时会使用上述方法。

# java - 带文件的 Java 链表

> ID：16018872
> 
> 赞同：0
> 
> 时间：2013-04-15T15:19:16.177
> 
> 标签：java, linked-list

创建一个名为“Words.txt”的文件，其中包含单词列表。编写一个程序来读取文件并将每个单词存储在一个名为 allWords 的链表中。

允许用户输入一个词来确定它是否在链表中。如果不是，则将其添加。将所有单词转换为小写打印最长的单词以相反的顺序打印。

我用数字做了一个类似的项目，但我不知道如何用单词开始。

```
import java. util.*;
import java. io.*;

public class Assignment2{

    public static void main(String args[]){
        File text = new File("frame.ini");
        LinkedList<Integer> list = new LinkedList<Integer>();

        try{
            Scanner f= new Scanner (new File("frame.ini"));

            while (f.hasNext()){
                list.add(f.nextInt());
            }  

            int maxi= 0;
            for (int i= 0; i<list.size(); i++){
                if ( list.get(i)>maxi)
                    maxi=list.get(i);
            }
            System.out.println("Maximum Number : "+maxi);

            int mini= maxi; 
            for (int i= 0; i<list.size(); i++){
                if ( list.get(i)<mini)
                    mini=list.get(i);
            }
            System.out.println("Minimum Number : "+mini);

            int n=0;

            for (int i= 0; i<list.size(); i++){
                n=n + list.get(i);
            } 
            int Total= n; 
            System.out.println("Tally of Numbers: "+Total);

            int sum = 0;
            for (int i= 0; i<list.size(); i++){
                sum = sum + list.get(i);
            } 
            int avg = sum /list.size();
            System.out.println("Average of Numbers: "+avg);
        }     
        catch (IOException e){
        }
    }
} 
```

# this - 忽略某些 TypeScript 编译错误？

> ID：16018873
> 
> 赞同：18
> 
> 时间：2013-04-15T15:19:18.640
> 
> 标签：this, typescript, tsc

我想知道是否有办法在编译时忽略某些 TypeScript 错误？

我基本上遇到了大多数大型项目的人在使用*this*关键字时遇到的相同问题，我不想将所有类方法都放入构造函数中。

所以我有一个这样的例子：

[打字稿示例](https://www.typescriptlang.org/play?#code/MYGwhgzhAEAyYFsBGATMBZApgFwBYHsUIAoAb2IEgAHAJwEsA3MbTaBTKMAc0wC5oI2egDsuAbkqVg+YYJoBXYNnw0AFO049+cuqICUlchQp46EAHQaI3VgF42HazwkUAvpOrykIOsGgARfABlfHZTUWh7VT1IgD5oUmgwEEwabFVTCysbPTFod3diJhpoXUEwYWA7aGFMAHc4RFQMHAIiVQAiABUObA7c4jLsCqrzQJCw3F0uaLEgA)

这似乎创建了完全有效的 JS 并允许我绕过*this*关键字问题，但是正如您在示例中看到的那样，打字稿编译器告诉我，我无法将该代码编译为关键字 this 在该范围内无效。但是我不明白为什么它是一个错误，因为它产生了好的代码。

那么有没有办法告诉它忽略某些错误？我相信只要有时间，就会有一种很好的方法来管理**this**关键字，但目前我觉得它非常可怕。

== 编辑 ==

**（除非你关心这个问题的上下文和部分咆哮，否则不要阅读）**

只是为这一切添加一些背景信息，以表明我不仅仅是一些疯狂的工作（我相信你们中的很多人仍然认为我是）并且我有一些很好的理由让我能够允许这些要经历的错误。

以下是我之前提出的一些问题，这些问题突出了 TypeScript*当前* **此**实现的一些主要问题（imo）。

[使用带有 Typescript 的草坪椅](https://stackoverflow.com/questions/15679838/using-lawnchair-with-typescript)

[Typescript 中 this 的子范围问题](https://stackoverflow.com/questions/15925500/issue-with-child-scoping-of-this-in-typescript)

[https://typescript.codeplex.com/discussions/429350](https://typescript.codeplex.com/discussions/429350)（我在底部做了一些评论）

我遇到的根本问题是我需要保证所有逻辑都在一致的范围内，我需要能够访问淘汰赛、jQuery 等和类的本地实例中的东西。我曾经使用 JavaScript 中的类内声明来执行此操作，`var self = this;`并且效果很好。正如之前的一些问题中提到的，我现在不能这样做，所以我可以保证范围的唯一方法是使用 lambda 方法，而我可以将其中一个定义为类中的方法的唯一方法是在构造函数中，这部分很大程度上取决于个人喜好，但我发现人们似乎认为使用该语法被归类为推荐模式而不仅仅是一种解决方法，这很可怕。

我知道 TypeScript 处于 alpha 阶段，很多事情都会发生变化，我非常希望我们能找到更好的方法来处理**这个**问题，但目前我要么把一切都弄得一团糟，只是为了让 typescript 工作（这是在数百个文件中）我正在迁移到 TypeScript ）或者我只是在这种情况下进行比编译器更了解的调用（我知道非常危险）所以我可以保持我的代码很好，并希望当出现更好的模式来处理这个问题时我然后可以迁移它。

顺便说一句，我知道很多人都喜欢 TypeScript 正在接受并尝试尽可能接近新的 JavaScript 功能和已知语法的事实，这很棒，但 typescript 不是 JavaScript 的下一个版本，所以我认为在语言中添加一些语法糖没有问题，因为想要使用最新最好的官方 JavaScript 实现的人仍然可以这样做。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2018-08-11T06:49:34.577

作者的具体问题`this`似乎已经解决，但问题是关于忽略错误，对于那些最终在这里寻找如何忽略错误的人：

如果从 TypeScript 2.6（2017 年 10 月 31 日发布）开始，无法正确修复错误或使用此处已经建议的更体面的解决方法，现在有一种方法可以使用目标之前的注释[忽略特定行中的所有错误](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-6.html#suppress-errors-in-ts-files-using--ts-ignore-comments)`// @ts-ignore`线。

[修改过的文档](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-6.html#suppress-errors-in-ts-files-using--ts-ignore-comments)足够简洁，但要回顾一下：

```
// @ts-ignore
const s : string = false 
```

禁用此行的错误报告。

`(x as any)`但是，只有在修复错误或使用 hack比丢失所有类型检查更麻烦时，才应将其用作最后的手段。

至于指定某些错误，[这里讨论了当前（2018 年中）状态，在 Design Meeting Notes (2/16/2018) 和进一步评论](https://github.com/Microsoft/TypeScript/issues/22011)中，基本上是

> *“还*没有定论”

并强烈反对引入这种微调。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T19:20:00.633

我认为您提出的问题是[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。您的目标是*如何确保我的某些类方法保证具有正确的`this`上下文？*

对于这个问题，我会提出这个解决方案：

```
class LambdaMethods {
    constructor(private message: string) {
        this.DoSomething = this.DoSomething.bind(this);
    }

    public DoSomething() {
        alert(this.message);
    }
} 
```

这有几个好处。

首先，您要明确说明正在发生的事情。大多数程序员可能不会理解关于代码生成方面成员和方法语法之间差异的微妙语义。

其次，通过查看构造函数，它非常清楚哪些方法将具有保证的`this`上下文。至关重要的是，从性能角度来看，您不想以这种方式编写所有方法，而只是那些绝对需要它的方法。

最后，它保留了类的 OOP 语义。您实际上可以`super.DoSomething`从`DoSomething`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T16:51:57.630

我相信您知道定义没有箭头符号的函数的标准形式。还有另一个 TypeScript 表达式可以生成完全相同的代码，但没有编译错误：

```
class LambdaMethods {
    private message: string;
    public DoSomething: () => void;

    constructor(message: string) {
        this.message = message;
        this.DoSomething = () => { alert(this.message); };
    }
} 
```

那么为什么这个是合法的而另一个不是呢？好吧，根据规范：`an arrow function expression preserves the this of its enclosing context`。所以它保留了`this`它声明的范围的含义。但是在类级别声明一个函数`this`实际上并没有任何意义。

这是一个错误的示例，原因完全相同，可能更清楚：

```
class LambdaMethods {
    private message: string;

    constructor(message: string) {
        this.message = message;
    }

    var a = this.message;  // can't do this
} 
```

初始化器与构造器结合的工作方式是一个不能依赖的实现细节。它可能会改变。

> 我相信只要有时间，就会有一种很好的方法来管理 this 关键字，但目前我觉得它非常可怕。

TypeScript 的高级目标之一（我喜欢）是扩展 JavaScript 语言并使用它，而不是与之抗争。如何`this`操作很棘手，但值得学习。

# google-apps-script - jsPDF服务器端使用

> ID：16018874
> 
> 赞同：0
> 
> 时间：2013-04-15T15:19:23.833
> 
> 标签：google-apps-script, jspdf

我真的很喜欢 jsPDF 的外观，但我似乎找不到任何有关服务器端使用的文档。[此处](http://code.google.com/p/jspdf/)的页面似乎表明这是可能的，但是示例的链接已损坏或不再存在。如果可能的话，我真的很想在 Google Apps 脚本项目中使用这个库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:22:30.030

jsPDF 的新家就[在这里](http://jspdf.com/)。请注意，不再提供“服务器端将在任何地方工作”的承诺。例如，它可能会在 Node.js 上运行，但由于 Apps-Script 是一个不完整的 javascript 实现，因此它可能无法在那里运行。

您已经可以从 Apps-Script 中生成 PDF 文件。如果主题文档在 Google Drive 中，那么您可以使用`getAs("application/pdf")`以 PDF 格式请求文档。（如果不是 Google Drive 文档，请先将其转换为一个。）例如，阅读[4 种使用 Google Apps Script 进行邮件合并](http://googleappsdeveloper.blogspot.ca/2011/10/4-ways-to-do-mail-merge-using-google.html)的方法，方法 3。

# ruby-on-rails-3 - 由于 GIT 包文件，Rails 应用程序文件夹很大

> ID：16018876
> 
> 赞同：4
> 
> 时间：2013-04-15T15:19:41.710
> 
> 标签：ruby-on-rails-3, git, github

所以我注意到我的 Heroku slug 尺寸很大（100mb），并决定检查我的 Rails 项目结构，看看是什么导致了巨大的尺寸。

当我检查项目文件夹时，它说它的大小约为 100mb。但是，在检查了所有（第一级）子文件和文件夹后，我看不到任何罪魁祸首（我的日志每天都会被删除）。

我尝试删除全部内容（代码当然在 github 上！）但是当我检查文件夹时，它仍然说磁盘上有 99.9mb - 很奇怪。

我 sudo 进入终端中的文件夹并运行 ls -al 以查看是否有任何隐藏文件或文件夹，但只得到以下内容：

```
-rw-r--r--  1 <name>  staff  15364 15 Apr 16:03 .DS_Store
drwxr-xr-x   3 <name>  staff    102 17 Apr  2012 .bundle
drwxr-xr-x  18 <name>  staff    612 15 Apr 15:18 .git
-rw-r--r--   1 <name>  staff    487  4 Apr 10:21 .gitignore 
```

我认为那里没有什么不寻常的。

有没有人遇到过类似的情况并可以提出解决方案？

**更新**

所以看起来 .git 文件夹中的 .pack 文件似乎是这里的问题。我做了一些搜索然后跑了

```
git filter-branch --index-filter 'git rm -r --cached --ignore-unmatch unwanted_folder' --prune-empty 
```

和

```
git gc --aggressive --prune 
```

它删除了除一个包文件之外的所有文件。令我困惑的是为什么当所有代码和资产都达到 25mb 时，剩余的包文件是 75mb？我猜它会保留自 repo 初始化以来在本地所做的更改的历史记录或什么？如果是这样，我该如何清除这些？无论如何，我将所有更改都存储在 github 上，因此旧文件/版本是多余的（除非我遗漏了什么？）。

# vb.net - vb.net vs C# lambda 表达式

> ID：16018882
> 
> 赞同：2
> 
> 时间：2013-04-15T15:19:56.490
> 
> 标签：vb.net, lambda

解析一个非常简单的 lambda 表达式时，我遇到了一个奇怪的问题。

在 C# 中，我有这个

```
class Class1
{
}

class Class2 : Class1
{ }

class Invoker
{
    public System.Linq.Expressions.Expression<Func<Class1>> GetExpression()
    {
        return () => new Class2();
    }
} 
```

正如预期的那样，这将返回一个 NodeType = New 的表达式

在 VB.NET 中，我有

```
Public Class Class1

End Class

Public Class Class2
    Inherits Class1

End Class

Public Class Invoker
    Public Function GetExpression() As Expression(Of Func(Of Class1))
        Return Function() New Class2()
    End Function

End Class 
```

这将返回一个带有 NodeType = Convert (?????) 的 lambda 表达式

我想这与从 Expression(Of Func(Of Class2)) 到 Expression(Of Func(Of Class1)) 的转换有关

我尝试使用 Option Strict 之类的项目属性......我无法让它在 VB 中工作。

有没有办法在 VB 中获得正确的 lambda 表达式？我需要这个来实现 EnterpriseLibrary TraceListener。调用 GetExpression() 的基类验证 lambda 并尝试将其强制转换为 System.Linq.Expressions.NewExpression（在 VB 中失败，因为它是 UnaryExpression，因为转换）。

谢谢

雷诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:54:45.860

当我在 Visual Studio（V2008，64 位控制台应用程序，3.5 框架）中运行这两条代码时，它们都返回一个表达式`NodeType == ExpressionType.Lambda`

# android - 如何在 FragmentStatePagerAdapter 的片段中动态设置 textview 的文本

> ID：16018886
> 
> 赞同：1
> 
> 时间：2013-04-15T15:19:58.473
> 
> 标签：android, android-fragments, android-viewpager, settext, fragmentstatepageradapter

我希望在创建（或加载页面）时在 viewPager 中的 FragmentStateAdapter 片段中设置我的 TextView 的 setText。我用 setOnPageChangeListener 进行测试，但它不起作用，所以你知道如何做到这一点。贝娄我的适配器以及我如何尝试使用 setOnPageChangeListener，（如果我可以在创建片段时初始化我的字段，那将非常好）。

测试：

```
.setOnPageChangeListener(new OnPageChangeListener() {
                @Override
                public void onPageScrollStateChanged(int arg0) {}

                @Override
                public void onPageScrolled(int arg0, float arg1, int arg2) {}

                @Override
                public void onPageSelected(int arg0) {
                    pdate=(TextView)myPager.getChildAt(arg0).findViewById(R.id.txtPagerDate);
                    pdate.setText(nextDay.get(arg0).get(KEY_DATE).toString());
                    pmaxmin=(TextView)myPager.getChildAt(arg0).findViewById(R.id.txtPagerMaxMin);
                    pmaxmin.setText("MAX: "+nextDay.get(arg0).get(KEY_HIGH).toString()+"° | Min: "+nextDay.get(arg0).get(KEY_LOW).toString()+"°");
                    pprecip=(TextView)myPager.getChildAt(arg0).findViewById(R.id.txtPagerPrecipitations);
                    pprecip.setText("Précipitation: "+nextDay.get(arg0).get(KEY_PRECIPAMOUNT).toString()+" mm");
                    pvent=(TextView)myPager.getChildAt(arg0).findViewById(R.id.txtPagerVent);
                    pvent.setText("Vent: "+nextDay.get(arg0).get(KEY_WINDSPEED).toString()+" Km/h - "+nextDay.get(arg0).get(KEY_WINDDIRECTION).toString());
                    pneige=(TextView)myPager.getChildAt(arg0).findViewById(R.id.txtPagerNeige);
                    pneige.setText("Neige: "+nextDay.get(arg0).get(KEY_SNOWAMOUNT).toString()+" mm");
                    pweatherIcn=(ImageView)myPager.getChildAt(arg0).findViewById(R.id.imgPagerTemps);
                    pweatherIcn.setImageDrawable(drawable2);
                }
            }); 
```

ViewPagerAdapterBis.java

```
package base.appliMeteo.basemeteo;

import java.util.ArrayList;
import java.util.HashMap;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentStatePagerAdapter;

public class ViewPagerAdapterBis extends FragmentStatePagerAdapter {

    static ArrayList<HashMap<String, String>> nextDay=MainMeteo.nextDay;

    public ViewPagerAdapterBis(FragmentManager fm) {
        super(fm);
        // TODO Auto-generated constructor stub
    }
    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new ViewPagerAdapterObject();
        Bundle args = new Bundle();
        // Our object is just an integer :-P
        args.putInt(ViewPagerAdapterObject.ARG_OBJECT, i + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 7;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return "OBJECT " + (position + 1);
    }

} 
```

ViewPageAdapterObject.java

```
package base.appliMeteo.basemeteo;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class ViewPagerAdapterObject extends Fragment {

    public static final String ARG_OBJECT = "object";

    @Override
    public View onCreateView(LayoutInflater inflater,
            ViewGroup container, Bundle savedInstanceState) {

        View rootView = inflater.inflate(R.layout.meteo_pager, container, false);
        return rootView;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:41:44.040

这是我制定的解决方案，效果很好

ViewPagerAdapterBis.java

```
public class ViewPagerAdapterBis extends FragmentStatePagerAdapter {
    static int x;
    public ViewPagerAdapterBis(FragmentManager fm) {
        super(fm);
        // TODO Auto-generated constructor stub
    }
    @Override
    public Fragment getItem(int i) {
        x=i;
        Fragment fragment = new ViewPagerAdapterObject();
        Bundle args = new Bundle();
        // Our object is just an integer :-P
        args.putInt(ViewPagerAdapterObject.ARG_OBJECT, i + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 7;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        if(object != null){
            return ((Fragment)object).getView() == view;
        }else{
            return false;
        }
    }

} 
```

ViewPagerAdapterObject.java

```
public class ViewPagerAdapterObject extends Fragment {

    public static final String ARG_OBJECT = "object";

    TextView pdate;
    TextView pvent;
    TextView phumidite;
    TextView pmaxmin;
    TextView pprecip;
    TextView pneige;
    ImageView pweatherIcn;

    int x=ViewPagerAdapterBis.x;

    static final String KEY_DAY="day";
    static final String KEY_DAYTIME="daytime";
    static final String KEY_DATE="obsdate";
    static final String KEY_HIGH="hightemperature";
    static final String KEY_LOW="lowtemperature";
    static final String KEY_PRECIPAMOUNT="precipamount";
    static final String KEY_SNOWAMOUNT="snowamount";
    static final String KEY_WINDSPEED="windspeed";
    static final String KEY_WINDDIRECTION="winddirection";

    static ArrayList<HashMap<String, String>> nextDay=MainMeteo.nextDay;
    static ArrayList<HashMap<String, String>> nextDayJourney=MainMeteo.nextDayJourney;
    @Override
    public View onCreateView(LayoutInflater inflater,
            ViewGroup container, Bundle savedInstanceState) {

        View rootView = inflater.inflate(R.layout.meteo_pager, container, false);

        pdate=(TextView)rootView.findViewById(R.id.textPagerDateBis);
        pdate.setText(nextDay.get(x).get(KEY_DATE).toString());
        pmaxmin=(TextView)rootView.findViewById(R.id.txtPagerMaxMin);
        pmaxmin.setText("MAX: "+nextDayJourney.get(x).get(KEY_HIGH).toString()+"° | Min: "+nextDayJourney.get(x).get(KEY_LOW).toString()+"°");
        pprecip=(TextView)rootView.findViewById(R.id.txtPagerPrecipitations);
        pprecip.setText("Précipitation: "+nextDay.get(x).get(KEY_PRECIPAMOUNT).toString()+" mm");
        pvent=(TextView)rootView.findViewById(R.id.txtPagerVent);
        pvent.setText("Vent: "+nextDay.get(x).get(KEY_WINDSPEED).toString()+" Km/h - "+nextDay.get(x).get(KEY_WINDDIRECTION).toString());
        pneige=(TextView)rootView.findViewById(R.id.txtPagerNeige);
        pneige.setText("Neige: "+nextDay.get(x).get(KEY_SNOWAMOUNT).toString()+" mm");

        return rootView;
    }
} 
```

我只是在我的适配器中获取项目编号并将其提供给我的片段以调用匹配值。

# php - 更新数据库条目

> ID：16018888
> 
> 赞同：0
> 
> 时间：2013-04-15T15:20:02.317
> 
> 标签：php, database

也许我在电脑前坐了太久，但我似乎无法解决以下问题。

我正在尝试根据用户 ID 从数据库中进行选择。我已经硬编码了它，它可以工作，例如

```
$q = 'SELECT * FROM users WHERE id = 1 LIMIT 1'; 
```

但是当我使用 $_GET['id'] 我得到一个错误

```
$q = 'SELECT * FROM users WHERE id = $_GET[id] LIMIT 1';
//mysqli_fetch_assoc() expects parameter 1 to be mysqli_result, boolean given... 
```

当我收到此错误时，地址栏会显示

```
update.php?id=1 
```

当我简单地回显 $_GET['id'] 时，它会起作用。那么为什么 $_GET['id'] 在我的查询中不起作用？我还尝试在将其直接输入查询之前将其设置为变量，但这也失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:22:33.843

我会尝试 $q = 'SELECT * FROM users WHERE id = '.$_GET[id].' 限制 1';

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:22:44.797

尝试 `$q = 'SELECT * FROM users WHERE id = '.$_GET[id].' LIMIT 1';`

# eclipse - Eclipse 找不到一些 JUnit 文件

> ID：16018893
> 
> 赞同：0
> 
> 时间：2013-04-15T15:20:20.930
> 
> 标签：eclipse, spring, junit

我有一个春天的 Maven 项目。我们也有很多 JUnit 测试类。我们正在使用 Eclipse。时不时地 - 实际上经常 - eclipse 将一些（不是全部）测试类显示为红色......声称它无法找到导入。查看 Eclipse 错误日志，我可以看到很多这些错误消息（但对于不同的测试类 ofc）。

怎么了？我在同一个项目中工作的同事没有收到此错误。我们正在使用 Eclipse Juno SR2。

```
org.eclipse.core.runtime.CoreException: File not found: C:\xxx\target\test-classes\com\yyy\vet\zzz\service\TradeWashTest.class.
    at org.eclipse.core.internal.filesystem.Policy.error(Policy.java:55)
    at org.eclipse.core.internal.filesystem.local.LocalFile.openInputStream(LocalFile.java:377)
    at org.eclipse.core.internal.localstore.FileSystemResourceManager.read(FileSystemResourceManager.java:797)
    at org.eclipse.core.internal.resources.File.getContents(File.java:289)
    at org.eclipse.jdt.internal.core.util.Util.getResourceContentsAsByteArray(Util.java:1132)
    at org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.writeClassFileCheck(IncrementalImageBuilder.java:888)
    at org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.writeClassFileContents(IncrementalImageBuilder.java:830)
    at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.writeClassFile(AbstractImageBuilder.java:857)
    at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.acceptResult(AbstractImageBuilder.java:188)
    at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:510)
    at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:365)
    at org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.compile(IncrementalImageBuilder.java:329)
    at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:302)
    at org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.build(IncrementalImageBuilder.java:134)
    at org.eclipse.jdt.internal.core.builder.JavaBuilder.buildDeltas(JavaBuilder.java:265)
    at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:193)
    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:726)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:239)
    at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:292)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:295)
    at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:351)
    at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:374)
    at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:143)
    at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:241)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
Caused by: java.io.FileNotFoundException: C:\dev\xxx\target\test-classes\com\yyy\vet\zzz\service\TradeWashTest.class (The system cannot find the path specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(Unknown Source)
    at org.eclipse.core.internal.filesystem.local.LocalFile.openInputStream(LocalFile.java:368)
    ... 26 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:27:20.073

问题可能出在 jars 依赖项中（特别是如果您使用的是模拟）。您需要执行两个步骤来找出问题所在：

1.使用maven运行单元测试（如果它工作你可以去step2）；2\. 在 Eclipse 中查看 jars 顺序（项目设置-> java 构建路径-> 顺序和设置）。

如果您说它适用于您的同事，您需要将您的罐子的顺序与您同事的罐子的顺序进行比较

# java - 深度优先迭代深化算法不返回结果（在java中）

> ID：16018896
> 
> 赞同：0
> 
> 时间：2013-04-15T15:20:36.613
> 
> 标签：java, search, depth-first-search, iterative-deepening

我有一个搜索算法，它应该解析整个树，找到所有可以匹配搜索查询的结果，并将它们全部作为列表返回。我意识到这并不是算法的重点，但我这样做是为了进行广度优先和深度优先搜索的测试，以通过计时来查看最快的搜索结果。其他两个搜索按预期工作，但是当我输入与 DFID 搜索目标相同的搜索信息时，我得到一个空列表。所以我知道我的数据是正确的，只是算法中有问题，我不知道是什么。我是根据 Wikipedia 上的伪代码编写的。这是我所拥有的：

```
boolean maxDepth = false;
List<String> results = new ArrayList<String>();

public List<String> dfid(Tree t, String goal)
{
    int depth = 0;

    while (!maxDepth)
    {
        System.out.println(results);
        maxDepth = true;
        depth += 1;
        dls(t.root, goal, depth);
    }
    return results;
}

public void dls(Node node, String goal, int depth)
{
    System.out.println(depth);
    if (depth == 0 && node.data.contains(goal))
    {
        //set maxDepth to false if the node has children
        if (!node.children.isEmpty())
        {
            maxDepth = false;
        }
        results.add(node.data);
    }
    else if (depth > 0)
    {
        for(Node child : node.children)
        {
            dls(child, goal, depth-1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:54:42.837

交换 zim-zam 建议的行并添加另一个 else （在 else if depth > 0 之后）将 maxDepth 翻转为 false

# php - 如何在 PHP 字符串中查找任何单独的字符并在其末尾添加句点？

> ID：16018897
> 
> 赞同：1
> 
> 时间：2013-04-15T15:20:37.807
> 
> 标签：php, regex, string

这是我正在尝试做的一个例子。

我有一个案例，我得到一个查询字符串，`j-doe`我的函数将它更改为`J Doe`.

然后我怎样才能通过那个字符串，检测一个孤独的字母（一个名字的首字母）并添加一个句点，所以它输出像`J. Doe`？

这将需要检测字符串中任何位置的孤独字母，例如更改`Henry J Doe`为`Henry J. Doe`.

非常感谢您！

编辑：字符串是来自数据库的名称，因此无需担心单字母单词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:25:06.637

像这样使用 preg_replace：

```
$str = 'Henry J Doe';
$repl = preg_replace('/([A-Z])(?=\s|$)/', '\1.', $str); 
```

### 现场演示：http: [//ideone.com/gqVKIG](http://ideone.com/gqVKIG)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:24:51.320

尝试这个...

```
$str = 'Henry J Doe';
$newWords = array();
$words = explode(' ', $str);

foreach ($words as $word) {
    if (strlen($word) == 1) {
        $word .= '.';
    }

    $newWords[] = $word;
}

$str = implode(' ', $newWords);
echo $str; 
```

# python - 使用 Tkinter 绘图

> ID：16018910
> 
> 赞同：0
> 
> 时间：2013-04-15T15:21:07.400
> 
> 标签：python, tkinter

有什么方法可以使用 Tkinter 库来绘制一些简单的形状吗？例如，假设我显示一张地图的图像，我可以让用户在地图上放置起点和终点，并将点之间的距离显示在 Entry() 框中吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T18:14:45.730

是的，tkinter 有一个`Canvas`小部件，可以让您绘制线条、多边形、椭圆、文本以及图像。

这是一个简单的例子：

```
import Tkinter as tk

class Example(tk.Frame):
    def __init__(self, master):
        tk.Frame.__init__(self, master)
        self.canvas = tk.Canvas(self, width=400, height=400)
        self.canvas.pack(side="top", fill="both", expand=True)

        # draw some items
        self.canvas.create_rectangle(50,50,150,150, fill="red")
        self.canvas.create_oval(20,20,65, 75, outline="green")
        self.canvas.create_text(10,200, anchor="nw", text="Hello, world")

if __name__ == "__main__":
    root = tk.Tk()
    Example(root).pack(fill="both", expand=True)
    root.mainloop() 
```

可以在这里找到一个很好的教程：[http ://www.tkdocs.com/tutorial/canvas.html](http://www.tkdocs.com/tutorial/canvas.html)

# php - JMS 序列化 @VirtualProperty 不起作用

> ID：16018913
> 
> 赞同：8
> 
> 时间：2013-04-15T15:21:10.297
> 
> 标签：php, symfony, jmsserializerbundle

我正在尝试添加一种序列化方法，但 JMS Serialize 不显示该字段。

```
use JMS\Serializer\Annotation\Groups;
use JMS\Serializer\Annotation\VirtualProperty;
use JMS\Serializer\Annotation\SerializedName;

class Ads
{   
    /**
     * @VirtualProperty
     * @Type("string")
     * @SerializedName("Foo")
     * @Groups({"manage"})
     */
    public function foo(){
        $foo = 'foo';
        return $foo;
    }
    ...
} 
```

接着：

```
use JMS\Serializer\SerializationContext;
use JMS\Serializer\SerializerBuilder;

...

$context = new SerializationContext();
$context->setGroups(array('manage'));

$serializer = JMS\Serializer\SerializerBuilder::create()->build();
$jsonContent = $serializer->serialize($ad, 'json', $context); 
```

我还没有看到任何有关如何使用 VirtualProperty 的示例。

语法是否正确？怎么了？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:02:51.860

我注意到了这个问题。在对象“$ ad”之前创建。我的错。虚拟财产正常运作。

# java - Hibernate 的 Criteria 查询使 Tomcat 在几次请求服务后变得不响应

> ID：16018916
> 
> 赞同：1
> 
> 时间：2013-04-15T15:21:18.063
> 
> 标签：java, hibernate, criteria-api

我在 Tomcat 7.0.35（Spring 3.1、Hibernate 3.6.1、JPA 2.0）上运行 Spring + Hibernate Web 应用程序。

这个应用程序有一个页面，它通过 Hibernate 的标准从数据库中获取数据（我知道我不必这样做）。服务层只是简单地调用数据层。这是代码：

```
 Criteria criteria = sessionFactory.openSession().createCriteria(Article.class); 
    criteria.addOrder(Order.desc("updatedTime"));
    criteria.add(Restrictions.eq("account", acc));
    criteria.add(Restrictions.eq("draft", true));
    criteria.setMaxResults(1);
    Article s = (Article) criteria.uniqueResult();
    return s; 
```

Tomcat 只能处理来自该页面的几个请求，然后它变得无响应。我可以看到浏览器一直在等待服务器响应（Firefox 状态栏显示“等待主机”。）

我没有看到任何错误消息，例如 OutOfMemory 等。浏览器似乎永远等待。

如果我将其更改为 JPA，如下所示：

```
 @NamedQuery(name = "Article.getMostRecentDraftArticle", query = "select x from Article x where x.account = :account and x.draft = 1 order by x.updatedTime desc"), 
```

......

```
Query q = getSession().getNamedQuery("Article.getMostRecentDraftArticle");
q.setParameter("account", acc);     
q.setMaxResults(1);
List list = q.list();
if (list.size() == 0) 
    return null;
else 
        return (Article) list.get(0); 
```

然后一切正常。

我使用 Hibernate 的 Criteria API 会出现什么问题？

感谢您的任何意见！

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:00:43.443

您还没有关闭会话。看到这个答案：[https ://stackoverflow.com/a/4049758/116509](https://stackoverflow.com/a/4049758/116509)

并阅读以下的 javadoc `org.hibernate.session`：

> 典型的事务应使用以下成语：

```
 Session sess = factory.openSession();
 Transaction tx;
 try {
     tx = sess.beginTransaction();
     //do some work
     ...
     tx.commit();
 }
 catch (Exception e) {
     if (tx!=null) tx.rollback();
     throw e;
 }
 finally {
     sess.close();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:28:16.540

你能看到休眠日志吗？它会生成查询吗？
无论如何，您可以尝试在`sessionFactory.getCurrentSession().flush();`下面放一个`Article s = (Article) criteria.uniqueResult();`

# ruby-on-rails - Rails - 有没有更好的收集方式？

> ID：16018917
> 
> 赞同：1
> 
> 时间：2013-04-15T15:21:27.777
> 
> 标签：ruby-on-rails, ruby

编辑了我的问题以更具体地说明我在问什么..

我在我的数据中有嵌套的关联，我渴望加载这些关联，然后想要使用 collect 进行一些子处理。因此，假设我的帖子中的评论具有所有者属性。所以我愿意

```
Post.includes(:comments).collect(&:owner) 
```

..然后与业主做一些事情。有没有更好的方法来抢业主？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:29:59.017

你在找[`pluck`](http://guides.rubyonrails.org/active_record_querying.html#pluck)吗？

> ```
> Client.where(:active => true).pluck(:id)
> # SELECT id FROM clients WHERE active = 1
> 
> Client.uniq.pluck(:role)
> # SELECT DISTINCT role FROM clients 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:25:24.530

尝试[`Activerecord::Base#select`](http://guides.rubyonrails.org/active_record_querying.html#selecting-specific-fields)：

```
Model.today.select([:attr1, :attr2, :attr3]) # chainable method
# will generate this query
# SELECT attr1, attr2, attr3 FROM models 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T02:21:47.260

如果您添加 has_many_through 关联，Rails 将解决您想要的问题。

```
class Post < ActiveRecord::Base
  has_many :comments
  has_many :commenters, through: :comments, source: :owner
  ...
end

male_gardeners = Post.find_by(slug: 'in_the_garden').commenters.where(gender: 'M') 
```

# jsp - 如何让 jsp 文件在 websphere 8 上作为欢迎文件工作？

> ID：16018921
> 
> 赞同：0
> 
> 时间：2013-04-15T15:21:37.447
> 
> 标签：jsp, jakarta-ee, websphere

我正在尝试在 Websphere8 中一个基本简单的 jsp 应用程序中使用 .jsp 文件作为欢迎文件。目的是使以下工作：

```
(a) http://something.com/base/?a=b&c=d 
```

就像

```
(b) http://something.com/base/thepage.jsp?a=b&c=d 
```

在开发环境中，只需将以下内容添加到 web.xml 即可：

```
<welcome-file-list>
 <welcome-file>thepage.jsp</welcome-file>
</welcome-file-list> 
```

不同之处在于，在 dev 中，在 ibm-web-ext-xmi 我们有

```
fileServingEnabled="true" 
```

而它在生产中设置为 false （Web 服务器处理文件服务，并且它可以工作）。网址 (b) 在生产中有效，但 (a) 无效。

问题是：如何解决这个问题？我需要设置任何属性吗？还有其他想法吗？

谢谢！哈坎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:21:24.467

我认为以下方法可以解决问题：

```
<servlet>
    <servlet-name>welcome</servlet-name>
    <jsp-file>jsp/welcome.jsp</jsp-file> 
</servlet>
<servlet-mapping>
     <servlet-name>welcome</servlet-name>
     <url-pattern>/</url-pattern>
</servlet-mapping> 
```

从根到 jsp 文件的 servlet 映射。

# ruby - Ruby 调度器和暂停器

> ID：16018934
> 
> 赞同：0
> 
> 时间：2013-04-15T15:22:20.513
> 
> 标签：ruby, timer, cron, scheduler, whenever

我正在为一个网站开发一个抓取工具，该网站每晚从晚上 11 点到早上 5 点关闭其网站/数据库。由于我正在做的刮板大约需要 70 个小时才能完成，而且我很着急完成它，所以我必须每天早上 4.30 起床......也许有更好的方法......

使用诸如“无论何时”之类的红宝石宝石，您可以设置启动代码的时间，例如：

`every :day, :at => ['5am'] do`

`and then the code`

但是，这不会暂停代码。你如何让代码在晚上 11 点到第二天早上 5 点暂停，继续到晚上 11 点，暂停到第二天早上 5 点，等等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:01:46.790

如果您提供更多详细信息，例如您正在使用什么框架或方法，它会更容易为您提供帮助。

但是，如果您使用的是基于[EvenMachine](http://eventmachine.rubyforge.org/)的东西，则可以 pause `EventMachine::Connection's`。您可以使用“无论何时”通过所有连接，并暂停所有传出连接，然后再次通过它们并恢复连接。

# c - 如何在 Linux 上使用标准 I/O 函数在多个进程中写入文件？

> ID：16018943
> 
> 赞同：1
> 
> 时间：2013-04-15T15:22:43.610
> 
> 标签：c, linux, unix

我正在开发一个需要在多个进程中编写单个日志文件（由其路径标识）的功能。以前，每个进程都用来调用`printf`终端上的日志流（标准输出）。现在我需要将输出目标更改为文件。所以我尝试使用`freopen`将标准输出重定向到每个进程中的文件。

```
freopen(file_path, "a", stdout); // 
```

但似乎效果不佳。缺少一些日志。实现这一目标的常见做法是什么？

顺便说一句，在我们的要求中，应该允许用户在文件和标准输出之间切换日志记录目标，因此当切换回终端时，第一个参数“file_path”可以是 tty。可以打电话`freopen(tty, "a", stdout)`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:56:39.517

你有很多选择：

1）最简单的方法是让每个进程简单地独立写入同一个日志。当然，问题是如果任何两个进程同时写入不同的消息，文件就会被打乱。

2）您可以改为让进程将消息发送到一个“主记录器”，然后它会按照收到的顺序一次输出一条消息。“主记录器”可能使用套接字。如果所有进程都在同一台主机上，您可能会改用消息队列或命名管道。

3) 更简单的是，您可以拥有一个系统范围的信号量来确保一次只写入一条消息。

4) 另一种方法是使用开源记录器，例如[log4j](http://en.wikipedia.org/wiki/Log4j)或[syslog-ng](http://en.wikipedia.org/wiki/Syslog-ng)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T16:14:12.343

[只要它们小于 PIPE_BUF 字节](https://stackoverflow.com/a/1154599/132382)，在 O_APPEND 模式下的写入就会执行您想要的操作，这通常有足够的空间（大约 4k）。

因此，将新的 freopen()ed 文件设置为行缓冲（下面的[_IOLBF](http://pubs.opengroup.org/onlinepubs/009695299/functions/setvbuf.html)），然后确保您的写入包含换行符以刷新缓冲区：

```
freopen(file_path, "a", stdout);
setvbuf(stdout, (char *)NULL, _IOLBF, 0); // a.k.a. setlinebuf(stdout) under BSD

...

printf("Some log line\n"); // Note the newline! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T16:12:01.857

Pipe your output to a file handle called, say, output using `fprintf`. Since file handle's are just pointers, just set `output = stdout` or `output = yourFile`. Then every `fprintf(output, "sometext")` winds up going wherever that handle is set at the moment. You can even have a function to dynamically redirect the output on the fly based upon user input.

# java - Gottox Socket.io 和节点 js 服务器中的 SocketIOException

> ID：16018950
> 
> 赞同：0
> 
> 时间：2013-04-15T15:23:00.610
> 
> 标签：java, android, node.js, sockets, websocket

我正在尝试创建一个使用 websockets 的 android 应用程序。我使用 Gottox socket.io 作为我的 java socket io 客户端和 node js 作为我的服务器。但是，当我运行我的代码时，我得到一个异常，说**io.Socket.socketIOException：**在我的 android 应用程序上握手时出错。我已经在下面发布了我的代码（java 和 node js）。我究竟做错了什么？

这是我的java代码（客户端）

```
package terrible.game.tiktakterrible;

import org.json.JSONException;
import org.json.JSONObject;

import io.socket.IOAcknowledge;
import io.socket.IOCallback;
import io.socket.SocketIO;
import io.socket.SocketIOException;
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TextView;

public class TikTakTerrible extends Activity {

    TextView textView;
    SocketIO socket;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_tik_tak_terrible);

        textView = (TextView) findViewById(R.id.textView);

        try {
            connect();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void connect() throws Exception
    {
        socket = new SocketIO("http://localhost:5000/");

        socket.connect(new IOCallback() {
            @Override
            public void onMessage(JSONObject json, IOAcknowledge ack) {
                try {
                    setText("Server said:" + json.toString(2));
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }

            @Override
            public void onMessage(String data, IOAcknowledge ack) {
                setText("Server said: " + data);
            }

            @Override
            public void onError(SocketIOException socketIOException) {
                setText(socketIOException.toString());
                socketIOException.printStackTrace();
            }

            @Override
            public void onDisconnect() {
                setText("Connection terminated.");
            }

            @Override
            public void onConnect() {
                setText("Connection established");
            }

            @Override
            public void on(String event, IOAcknowledge ack, Object... args) {
                setText("Server triggered event '" + event + "'");
            }
        });

        socket.send("Hello Server!");
    }

    public void setText(String arg)
    {
        textView.setText(arg);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.tik_tak_terrible, menu);
        return true;
    }
} 
```

这是我的节点 js 服务器

```
var app = require('http').createServer(),
    io = require('socket.io').listen(app),
    fs = require('fs');

app.listen(5000);

function handler(req, res)
{
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello World\n');
}

io.sockets.on('connection', function (socket) {

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:23:29.320

你在哪里运行你的安卓应用程序？尝试改变

`socket = new SocketIO("http://localhost:5000/");`

至

`socket = new SocketIO("http://your_pc_ip:5000/");`

我认为这可能是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T16:37:00.287

```
 public void on(String event, IOAcknowledge ack, Object... args)
            {
             System.out.println( event );
                 if ("sensor".equals(event) && args.length > 0) 
                 {
                    try
                    {
                        JSONObject ob = new JSONObject(args[0].toString());
                        final  String mensaje = "Sensor: " + ob.getString("sensor") + " Valor: "+  ob.getString("valor");

                            new Thread(new Runnable()
                            {
                                public void run() 
                                {

                                    handler.post(new Runnable() {
                                        public void run() 
                                        {
                                            if(mensaje != null) 
                                            {
                                                txt.setText(mensaje);
                                            }
                                        }
                                    });
                                }
                            }).start();

                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            } 
```

# sql-server-2008 - Execute Package 任务可以执行存储在 TFS 中的包吗？

> ID：16018962
> 
> 赞同：0
> 
> 时间：2013-04-15T15:23:55.193
> 
> 标签：sql-server-2008, visual-studio-2008, tfs, ssis

我刚刚从源代码管理向 TFS 服务器添加了一个新文件夹和几个包，从源代码管理检查时它们确实存在。

但是，当我尝试构建父包并在 SQL Server 中找到那些上传的包时，它们都找不到。我的操作如下：

```
 1\. Add "Execute Package Task" component, then double click to edit
  2\. Package Location: SQL Server;  
     Connection: XXXX;   
     Package Name: Here pops up a list of folders and package files but newly uploaded ones are not included. 
```

“连接”填写正确，因为旧的文件夹和包（由其他人上传）在包名称弹出窗口中列出。

那么如何在 TFS 上配置我的包以使其从 SQL Server 包列表中显示呢？

PS 我正在使用 Visual Studio 2008 和 SQL Server 2008

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T17:09:25.093

你不能。正如文档[所说](http://msdn.microsoft.com/en-us/library/ms137609%28v=sql.100%29.aspx)：

> 执行包任务可以运行存储在 SQL Server msdb 数据库中的包和存储在文件系统中的包。该任务使用 OLE DB 连接管理器连接到 SQL Server，并使用文件连接管理器访问文件系统。

执行包任务不知道 TFS 是什么或如何连接到它。如果您真的需要这样做，那么您必须编写自己的[自定义任务](http://msdn.microsoft.com/en-us/library/ms135965%28v=sql.100%29.aspx)，该任务确实知道如何连接到 TFS。

但是我不知道你为什么要直接从 TFS 执行包，它是一个源代码控制系统（除其他外），而不是包存储库。

# asp.net - asp.net 查询字符串

> ID：16018965
> 
> 赞同：1
> 
> 时间：2013-04-15T15:24:02.773
> 
> 标签：asp.net, request.querystring

我有以下页面查询字符串：

```
 register.aspx?id="jSmith" 
```

我有以下代码来检索 ID 的值

```
 string qString = string.IsNullOrEmpty(Request.QueryString["id"]) ? string.Empty : HttpUtility.UrlDecode(Request.QueryString["id"]); 
```

当我查看 qString 的值时，我得到类似

```
 "\"jSmith\"" 
```

所以当我执行以下操作时：

```
 if (qString == "jSmith")
     {
        ........

     } 
```

它不执行 if 条件。如果它没有引号，我需要做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:25:54.467

代码是正确的。问题是您将`"jSmith"`双引号作为字符串的一部分传递到页面。尝试以这种方式调用页面

```
register.aspx?id=jSmith 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:25:24.790

您不需要在查询字符串中的值周围加上引号，根据定义它们都是字符串......

您的查询字符串应如下所示：

```
register.aspx?id=jSmith 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T15:25:33.297

那是因为在这种情况下给出路径的正确方法是`register.aspx?id=jSmith`不带引号。如果您的 ID 中需要空格或其他特殊字符，这些字符应该是 URL 编码的（并且将由您的代码解码），但*不能*用引号括起来。

例如，如果您的 id 是 string `john smith`，则 URL 将变为`register.aspx?id=john+smith`，因为`+`是空格的 URL 编码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T15:25:49.610

您的查询字符串中不需要引号。

它应该读

```
register.aspx?id=jSmith 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-15T15:26:00.737

你应该寻找

```
if (qString == "\"jSmith\"") 
```

正在`\`逃避额外的`"`

或者您可以执行替换以删除额外的`"`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-15T16:00:46.333

采用

```
 Response.Redirect("Qstring.aspx?name= smith"); 
```

并在页面 Qstring.aspx 加载事件

```
 string s=Request.QueryString["name"].ToString(); 
```

在 s 变量中给你“史密斯”

# jquery - 将编辑链接添加到 JQGrid

> ID：16018967
> 
> 赞同：0
> 
> 时间：2013-04-15T15:24:06.910
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-3, jqgrid

我想在每一行中添加编辑链接，`JQGrid`并希望在单击该链接时调用控制器的操作。以下是 VIEW - .cshtml 级别的详细实现：

```
<div>  
 @(Html.Trirand().JQGrid(Model.TestGrid, "TestGrid")         
   )

 @(Html.Trirand().JQAutoComplete(
        new JQAutoComplete 
            {
                DisplayMode = AutoCompleteDisplayMode.ControlEditor,
                DataUrl = Url.Action("AutoCompleteShipName","TestGrid")
            }, "AutoComplete")
 )       
 </div> 
```

以下是`JQGrid`模型级别的详细实现。

```
 public TestModel()
    {
        TestGrid = new JQGrid
        {
            Columns = new List<JQGridColumn>()
                             {
                                  new JQGridColumn { DataField = "ContractNumber", 
                                                    PrimaryKey = false,
                                                    Editable = false,
                                                    Width =250 },
                                 new JQGridColumn { DataField = "Version", 
                                                    PrimaryKey = false,
                                                    Editable = false,
                                                    Width =250 },
                                 new JQGridColumn { DataField = "StartDate", 
                                                    Editable = true,
                                                    Width = 250 },
                                 new JQGridColumn { DataField = "EndDate", 
                                                    Editable = true,
                                                    Width = 350 },
                                 new JQGridColumn { DataField = "Comments", 
                                                    Editable = true,
                                                    Width = 350 },
                                 new JQGridColumn { DataField = "Mfg",
                                                    Editable =  true,  
                                                    Width = 350 },       
                                 new JQGridColumn { DataField = "MfgPart",
                                                    Editable =  true, 
                                                     Width = 250} ,   
                                 new JQGridColumn { DataField = "Vendor",
                                                    Editable =  true, 
                                                    Width = 250} ,  
                                new JQGridColumn { DataField = "CustomerNumber",
                                                    Editable =  true,
                                                     Width = 250} ,  
                             },
            Width = Unit.Pixel(940),
            Height = Unit.Percentage(100)
        };

        TestGrid.ToolBarSettings.ShowRefreshButton = true;
    } 
```

请任何人提供适合上述实施的实施示例/参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T19:29:27.850

```
<a id="add" href="javascript:void(0)" title="Add">Add</a>
<a id="edit" href="javascript:void(0)" title="Edit">Edit</a>

<script type="text/javascript">

    $('#add').click(function (event) {
        window.location.href = '@Url.Action("AddEdit")';
    });
    $('#edit').click(function (event) {
        var selRowId = $('TestGrid').jqGrid('getGridParam', 'selrow');
        if (selRowId === null) {
            alert('Please Select data to edit');
            return false;
        } else {
            window.location.href = '@Url.Action("AddEdit")/' + selRowId;
        }
    });
</script> 
```

# python - Python MVC 实现

> ID：16018970
> 
> 赞同：0
> 
> 时间：2013-04-15T15:24:17.537
> 
> 标签：python, model-view-controller, webapp2

我是否应该使用 webapp2 通过导入所有控制器来调用正确的控制器，然后使用`webapp2.Route()`来调用正确的控制器；还是应该将 URL 拆分为诸如 之类的段`/< class >/< method >/< query array >`，然后让其他类调用正确的类和基于 URL 的方法？

# qt - QTreeView 删除所有项目的装饰/展开按钮

> ID：16018974
> 
> 赞同：11
> 
> 时间：2013-04-15T15:24:24.337
> 
> 标签：qt, qtreeview

我想让我`QTreeView`总是扩展所有的项目。在这种情况下，所有展开按钮/装饰都是不必要的，我想摆脱它们。我怎样才能删除所有这些？`setRootIsDecorated`只会删除第一级的按钮...

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-15T15:41:58.553

这是我过去为这个问题所做的，它有点像黑客，但效果很好。在这种情况下`none.png`不存在。

```
treeView->setStyleSheet( "QTreeView::branch {  border-image: url(none.png); }" ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-04-10T02:53:56.317

见[https://forum.qt.io/topic/4767/how-to-get-rid-of-expande-collapse-qtreewidgetitem-indicator](https://forum.qt.io/topic/4767/how-to-get-rid-of-expande-collapse-qtreewidgetitem-indicator)

这对我来说摆脱了顶级的：`self.setRootIsDecorated(False)`.

我没有尝试提到的项目政策，所以我不确定这个答案是否完整。如果有人可以验证，请随时使用确认编辑此内容。在此之前，请将此答案视为信息共享。

# ios - 如何保留 UIView 控制器 (ARC)

> ID：16018975
> 
> 赞同：1
> 
> 时间：2013-04-15T15:24:27.523
> 
> 标签：ios, objective-c, xcode, memory-management

这 4 个文件与这篇文章相关：

FirstViewController 有一个按钮（不在导航栏上，是一个单独的按钮），当按下它时，页面应该会卷曲呈现 FilterViewController。

第一视图控制器.h

```
- (IBAction)searchOptions:(id)sender; 
```

FirstViewController.m:

```
- (IBAction)searchOptions:(id)sender {
    FilterViewController *ctrl = [[FilterViewController alloc] initWithNibName:@"FilterViewController" bundle:nil];
    [UIView transitionFromView:self.view toView:ctrl.view duration:1 options:UIViewAnimationOptionTransitionCurlUp completion:nil];

    [self.navigationController pushViewController:ctrl animated:NO];
} 
```

在 FilterViewController 上它有一些 UI 内容，您按下一个按钮，它会保存 UI 内容，然后页面向下卷曲以显示 FirstViewController。

过滤器视图控制器.h：

```
- (IBAction)backToMap:(id)sender; 
```

FilterViewController.m:

```
- (IBAction)backToMap:(id)sender {
    FirstViewController *ctrl = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
        [UIView transitionFromView:self.view toView:ctrl.view duration:1 options:UIViewAnimationOptionTransitionCurlDown completion:nil];

        [self.navigationController popViewControllerAnimated:YES];
} 
```

这里的问题是 UIView 的保留。如何保留 UIView？

当我单击 FirstViewController 上的按钮时，动画会起作用并显示页面。但是，在 FilterViewController 上，当我单击按钮时，它会因错误而崩溃到调试器：

**EXC_BAD_ACCESS（代码=2，地址=0x8）**

在输出控制台中它说：`(lldb)`

页面卷曲后，我有一个步进器，当我单击步进器时，我在调试器中得到相同的错误。

更新：我已经跟踪了内存位置错误：http: [//i.imgur.com/dL18H9Z.png](http://i.imgur.com/dL18H9Z.png)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T15:33:07.127

我注意到的一件事是您正在推送一个视图控制器，然后使用语法“返回”推送另一个视图控制器。这可能是问题所在：导航堆栈是堆栈。如果您从视图 0 开始，则推送视图 1，如果您想返回视图 0，则“弹出”视图 1，而不是再次推送视图 0。

所以在：

```
- (IBAction)backToMap:(id)sender {
       FirstViewController *ctrl = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
        [UIView transitionFromView:self.view toView:ctrl.view duration:1 options:UIViewAnimationOptionTransitionCurlDown completion:nil];

        [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:41:50.540

这里的问题是您尝试使用 UIView 的转换方法在视图控制器之间制作动画。

根据文档：

```
fromView
   The starting view for the transition. By default, this view is removed 
from its superview as part of the transition.
toView
   The ending view for the transition. By default, this view is added 
to the superview of fromView as part of the transition. 
```

因此，当您调用此方法时，您的 ViewController 的视图被另一个带有动画的视图替换，然后在堆栈上放置下一个没有动画的 ViewController，所以看起来没问题（但是您的第一个控制器的视图已经被替换）。

但是当您尝试返回一些错误行为时 - 您替换了控制器的视图，它将被删除。

所以，我想说，我必须更加小心，有几种不同的方法可以在 viewControllers 之间进行自定义转换。

例如，您可以观看下一个解决方案（与您的类似） - [http://www.vigorouscoding.com/2011/05/custom-uiviewcontroller-transitions/](http://www.vigorouscoding.com/2011/05/custom-uiviewcontroller-transitions/)

或者

[https://gist.github.com/jeksys/1507490](https://gist.github.com/jeksys/1507490)

# ios - UIAcceleration 值范围

> ID：16018983
> 
> 赞同：1
> 
> 时间：2013-04-15T15:24:34.290
> 
> 标签：ios, accelerometer, gravity, uiaccelerometer

AppleDeveloper指南似乎暗示 UIAccelerationValue 可以介于 -1.0 和 +1.0 的双精度值之间[。](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIAcceleration_Class/Reference/UIAcceleration.html)

我已经记录了来自真实设备的值，同时用疯狂的手势“摇晃”我的 iPod touch，得到的 x 值高于 2.0（例如 +2.1、-2.1）并且没有高于 2.0f 的 y 值。

*   谁能解释一下？
*   有没有人确定 UIAccelerationValue 的 MAX 和 MIN 值？

我对此的看法是，Apple 已经实现了一些近似重力的算法，并采用高于标准速度近似值的 1.0 值（例如，速度值为 9.8 m/s）。

*   还有其他猜测吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T15:31:09.277

您可能误解了文档的一部分。它没有说该值在-1.0之间。和 1.0，据我所知。它说：

> 设备加速度计以 g 力为单位报告每个轴的值，其中 1.0 的值表示沿给定轴的加速度约为 +1 g。当设备在其背面放置在水平表面上时，每个加速度事件大约具有以下值：

“g”在这里用于特定的技术意义；1 g 是一种[标准重力](http://en.wikipedia.org/wiki/Standard_gravity)；比这更快的手机将记录高于 1 的读数。手的剧烈晃动很容易导致加速度和减速度值高于 9.8m/s ²。

# javascript - RegExp：匹配数字的重复序列模式

> ID：16018984
> 
> 赞同：2
> 
> 时间：2013-04-15T15:24:37.417
> 
> 标签：javascript, regex, validation

我正在尝试编写一个匹配类似`01, 03, 05-08, 10`但不匹配的正则表达式`01, 03, 05-08,`（因为序列必须以数字结尾）。

所以基本上我的“字符串”由`/(\-?\d+)\-(\-?\d+)/`（例如 01-05 或 -5-10）组成，这个模式的每个实例都用逗号分隔。

我用 RegExr 尝试了很长时间，但找不到解决我的问题的方法。这是我的尝试：[http ://regexr.com?34hh1](http://regexr.com?34hh1)

使用 RegExp 我想做 SEQUENCE_EXP.test('some string')。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:47:10.597

试试这个模式这是你指定的确切要求

```
^(-?\d+(--?\d+)?,\s?)*-?\d+(--?\d+)?$ 
```

现场演示：[http ://regexr.com?34hhp](http://regexr.com?34hhp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:53:22.440

这个正则表达式应该适合你：

```
^(?:\d+(?:-\d+)?,)*\d+$ 
```

### 现场演示：[http ://www.rubular.com/r/QTnbqncycZ](http://www.rubular.com/r/QTnbqncycZ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:38:10.037

```
function test(r){
    return  "01, 03, 05-08, 10".match(r) && 
            !"01, 03, 05-08,".match(r)
}

test(/^(\d+(-\d+)?,\s*)*\d+$/) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T15:42:30.340

您可以使用`$`运算符来指示字符串必须以表达式结尾。在您的情况下，您可以尝试：

```
/^((-?\d+(-\d+)?)\s*,\s*)+(-?\d+(-\d+)?)$/ 
```

请注意，您不必转义`-`方括号的外部。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T15:46:00.627

所以，你有两个模式，一个有效的数字`\d+`和`\d+-\d+`

所以`NUMBER_PATTERN`必须是`\d+(-\d+)?`

和一个序列`NUMBER_PATTERN[, NUMBER_PATTERN]*`

那这个呢：

```
/\d+(-\d+)?(, \d+(-\d+)?)*$/ 
```

看看[http://regexr.com?34hhj](http://regexr.com?34hhj)

# perforce - P4V - 指向现有数据的重复工作区

> ID：16018988
> 
> 赞同：2
> 
> 时间：2013-04-15T15:24:50.057
> 
> 标签：perforce, p4v

我想知道是否有人对如何在 p4v 中执行以下任务有任何建议（我对 P4V 命令不太熟悉，如果这是我缺少的一些基本命令，请致歉）。

目前我有一个工作区设置和数据同步到我的根目录，例如 C:\Data\

我从两台不同的 Windows 机器访问这个工作区。（数据在两台机器上的 c:\Data

现在，我需要移动数据存储在其中一台机器上的位置，而不是另一台（机器 A：c:\Data，机器 B：D:\Data\

是否可以这样做，而不必再次从服务器同步所有数据（有很多和带宽限制）。

我最初的想法是创建另一个指向另一个根的工作区，但我不知道如何让这个新工作区在这个位置拾取数据文件。

任何帮助将不胜感激提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:09:05.803

我不知道通过 P4V 执行此操作的方法，但可以使用命令行客户端完成。这是程序。

在机器 B 上移动文件并创建新工作区（不执行“全部更新”）后，您可以[将 -k 开关传递给同步命令](http://www.perforce.com/perforce/doc.current/manuals/cmdref/sync.html)，让服务器知道您拥有哪些文件。

从我链接的网页：

> 保留现有的工作空间文件；更新拥有列表而不更新客户端工作区。仅当您需要更新 have 列表以匹配客户端工作区的实际状态时，才使用 p4 sync -k。

命令行帮助有这样的说法：

> -k 标志更新服务器元数据而不同步文件。它旨在使您能够确保服务器正确反映工作空间中文件的状态，同时避免大量数据传输。注意：错误的更新可能会导致服务器错误地反映工作区的状态。

仅供参考：`p4 flush`是别名`p4 sync -k`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:33:31.877

您还可以查看`AltRoots`工作区中的字段。你可以有一个根在`c:\data`，另一个在`d:\data`。正如 raven 提到的，因为数据存在于两个单独的磁盘上，您需要确保数据在两台机器上保持同步，尽管我假设您已经弄清楚了这部分，因为您已经在两台机器上运行.

你有什么理由不能每台机器只有一个工作区？

# python - 我们可以用 openERp 计算净工资吗

> ID：16018995
> 
> 赞同：1
> 
> 时间：2013-04-15T15:25:01.153
> 
> 标签：python, postgresql, openerp, erp

在我们公司，我们决定使用`openERP` 我们现在正在努力定制`openERP`我们的工作......我们可以在仓库部门成功使用它。和sallies部门。

`My question is` 如果员工缺勤或离职或我们决定增加奖金， 如何`openERP` 计算扣除`monthly Net Salary`

`and if we can` 编写新模型并添加它

或者我们如何访问与出勤相关的字段并构建我们自己的计算程序 `Net Salary`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:38:24.797

安装 hr_payroll 模块。流程如下：员工-->合同-->薪酬结构-->薪酬规则

在合同中，您可以使用工资为该员工设置工作时间表。您需要根据需要使用薪酬规则配置薪酬结构。奖金、费用等的薪资规则。在该薪资结构中，您需要添加该规则。现在，进入 Employee Payslip 菜单，选择该员工，相关信息将自动出现。单击计算表按钮。根据您在薪资结构中添加的薪资规则，您将在薪资计算选项卡中获得薪资详细信息。

目前，OpenERP 中的考勤和工资单之间没有您需要自定义的链接。这取决于需要多少时间的要求！希望这会帮助你。

# java - 如何在 BlueJ 中为 ArrayList 输入参数？

> ID：16018998
> 
> 赞同：5
> 
> 时间：2013-04-15T15:25:06.010
> 
> 标签：java, arraylist, bluej

在 BlueJ 中，如果我编写了一个将数组作为参数的方法，那么当我想通过方法调用测试该方法时，我必须使用大括号输入元素，因此：

{1,2,3}

如何对 进行方法调用`ArrayList`？

这是我的代码：

```
import java.util.*;

public class Test2{

    public static int[] toArray(ArrayList<Integer>a){
        int len = a.size();
        int []b = new int[len];
        for(int i = 0; i<len; i++){
            b[i] = a.get(i);
        }
     return b;    

    }
} 
```

现在我想在 BlueJ 中测试它，我应该在下面的对话框中输入什么？

![在此处输入图像描述](https://i.stack.imgur.com/lRisp.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T18:40:27.117

`ArrayList`当您调用它时，您需要创建一个实例以传递给您的方法。在 BlueJ 主窗口中打开您的项目，单击“工具”菜单，然后单击“使用库类...”，然后`java.util.ArrayList`从“类”菜单中进行选择。还要从出现的列表中选择无参数构造函数，然后单击确定。

![BlueJ 调用库类对话框](https://i.stack.imgur.com/pPlYR.png)

然后，BlueJ 将显示另一个对话框，询问您实例的名称和`ArrayList`. 输入名称和`Integer`类型参数。

![BlueJ 创建对象对话框](https://i.stack.imgur.com/ioYAV.png)

单击确定后，新`ArrayList`实例将出现在 BlueJ 主窗口底部的对象工作台区域中。

![BlueJ 对象工作台](https://i.stack.imgur.com/Zegsl.png)

当您右键单击新实例时，BlueJ 将显示一个可以在其上调用的方法菜单。选择该`boolean add(Integer)`方法几次以向实例添加一些值。

![将整数添加到 ArrayList](https://i.stack.imgur.com/r3BWS.png)

最后，当您右键单击您的测试类并调用该`toArray`方法时，您可以输入`ArrayList`实例的名称以将其作为参数传递给您的方法。

![BlueJ 方法调用对话框](https://i.stack.imgur.com/qY47H.png)

方法调用的结果显示在对话框中。

![BlueJ 方法结果对话框](https://i.stack.imgur.com/UQirn.png)

单击 Inspect 按钮查看`int`从您的方法返回的数组的内容，或单击 Get 按钮将其添加到对象工作台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:30:29.740

```
Arrays.asList("1", "2", "3"); 
```

将返回 a`List`而不是 a `ArrayList`。

您的方法的参数应该始终是接口而不是实现。