# StackOverflow 问答 14404000-14404999

# windows - 如何在 Windows 上干净地终止 openRTSP 和/或在 Windows 中发送信号

> ID：14404003
> 
> 赞同：0
> 
> 时间：2013-01-18T17:09:26.070
> 
> 标签：windows, signals, rtsp-client

根据[openRTSP 页面](http://www.live555.com/openRTSP/#quicktime)，您必须“通过使用 SIGHUP 或 SIGUSR1 发出信号，彻底终止它”。那些在 Windows 中不存在，所以是否有一种方法已经为我可以发起的 Windows 编码了 openRTSP，或者有没有办法在 Windows 中发出信号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:15:20.583

我找到的答案是：

*   不，您不能在 Windows 中发出信号。
*   不，在 openRTSP 中没有其他编码方式。Windows 构建简单的#ifdefs 信号代码。

命名的 Mutex 可能是编码相同功能的最简单方法。

# python - 向 SQS 发布消息

> ID：14404007
> 
> 赞同：22
> 
> 时间：2013-01-18T17:09:38.030
> 
> 标签：python, boto, amazon-sqs

我有一些 EC2 服务器从 SQS 队列中提取工作。偶尔，他们会遇到无法完成工作的情况。我有这个条件的过程通过电子邮件发送给我。就目前而言，消息一直处于“飞行状态”，直到超时。我希望该过程在发送电子邮件后立即将其释放回队列。但是，我不确定如何做到这一点。有办法吗？如果是这样，请您指点我的电话或发布代码片段。

我正在使用 Python 2.7.3 和 Boto 2.5.2。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-18T17:55:29.607

如果您阅读了一条消息，并且出于某种原因决定不想处理它，而是希望它立即可供队列的其他读者使用，您可以使用对象的方法将该消息设置`visibility timeout`为零博托。有关详细信息，请参阅[SQS 开发人员指南](http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/AboutVT.html)。`change_visibility``Message`

# c++ - 使用极坐标创建图像（图像变换）

> ID：14404013
> 
> 赞同：1
> 
> 时间：2013-01-18T17:09:58.043
> 
> 标签：c++, image-processing, opencv, distortion

我正在研究图像变形。图像真实坐标的变换版本是 x 和 y，变换后图像的极坐标是 r 和 theta。

（圆柱形变形）。我有转换功能。但我对某些事情感到困惑。我从可以很容易地转换为笛卡尔坐标的变换函数中得到极坐标。但是如何绘制这个转换后的图像呢？因为新尺寸将不同于旧图像尺寸。

**编辑**：我有气缸中显示的图像。如图所示，我具有将其转换为幻觉图像的转换功能。由于此图像的大小与原始图像不同，我如何确保主图像中的所有点都被转换。此外，变换图像中这些点的坐标是极坐标。我可以使用 openCV 使用转换后的极坐标形成新图像吗？

![在此处输入图像描述](../Images/150a97e11b4b32200bd470703ee2efb1.png)

参考：[http ://www.physics.uoguelph.ca/phyjlh/morph/Anamorph.pdf](http://www.physics.uoguelph.ca/phyjlh/morph/Anamorph.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:56:44.803

你这里有两个问题。据我了解，出现更大的问题是因为您将离散积分坐标转换为浮点坐标。另一个问题是生成的图像的大小大于或小于原始图像的大小。此外，生成的图像不必是矩形的，因此必须将其裁剪或沿角落填充黑色像素。

**根据[http://opencv.willowgarage.com/documentation/geometric_image_transformations.html](http://opencv.willowgarage.com/documentation/geometric_image_transformations.html)没有径向变换例程。**

```
I'd suggest you do the following: 
```

> 1.  将原始图像放大为宽*2，高*2。将新图像设置为黑色。(cvResize, cvZero)
> 2.  遍历原始图像中的每个像素。找到像素的新坐标。将其值的 1/9 添加到新坐标的所有 8 个邻居以及新坐标本身。(CV_IMAGE_ELEM(...) += 1.0/9 * ....)
> 3.  将新图像缩小到原始宽度、高度。
> 4.  根据结果​​，您可能需要使用锐化程序。

如果你想保留一些超出范围的像素，那是一个不同的问题。基本上你想找到你收到的坐标的最小值和最大值，例如你的原始图像有 Min,Max = [0,1024] 和你的新 MinNew,MaxNew = [-200,1200] 你做一个函数

```
normalize(int &convertedx,int &convertedy)
{
convertedx = MinNewX + (MaxNewX-MinNewX)/(MaxX-MinX) * convertedx;
convertedy = ...;
} 
```

# c# - 有没有办法在 XAML 上做图像映射？

> ID：14404014
> 
> 赞同：1
> 
> 时间：2013-01-18T17:09:59.197
> 
> 标签：c#, wpf, xaml

我想使用 C# 和 XAML 创建一个 Windows 8 应用程序。

我想要一个图像的不同部分是可点击的，就像你在 HTML 中使用 imagemap 元素一样。

可能有一种方法可以对单个图像执行此操作，但很难正确定位它们。

那么是否可以在 XAML 中使图像可点击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:36:05.533

xaml 中的简单概念示例...

添加了命名空间；）

```
 xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
 xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"

<Grid Height="300" Width="300">
       <Grid.Background>
         <Image/> <!-- Add your image source here, 
                       you dont want to know the picture I was going to put :) -->
       </Grid.Background>

       <Rectangle Height="20" Width="20" Stroke="Red" StrokeThickness="2" Margin="60,120">
         <i:Interaction.Triggers>
           <!-- Couldn't recall if its "Click" event or "MouseLeftButtonDown" -->
             <i:EventTrigger EventName="MouseLeftButtonDown">
                <ei:ChangePropertyAction TargetName="Blah"
                                         PropertyName="Visibility"
                                         Value="Visible" />
             </i:EventTrigger>
         </i:Interaction.Triggers>
       </Rectangle>

       <TextBlock Text="Whoa Dude, Where's my click?" x:Name="Blah" FontSize="50" Visibility="Collapsed"/>

    </Grid> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T17:17:45.877

您当然可以添加事件来跟踪 MouseDown 和 MouseUp 事件并将它们转换为您自己的 Click 事件......但这在 WPF 中听起来不正确，显然有例外。如果您正在制作一个安全系统，该系统依赖于具有用户定义模式的可自定义图像来单击图像 - 当然可以。但是，如果您在 Photoshop 中绘制用户界面并且想要完成这项工作 - 您做错了：您失去了样式、矢量渲染、特定于控件的事件 - 本质上是 WPF 的整个理念。

底线：除非您指定一个任务来证明使用图像是合理的，否则答案只能是：不要这样做。

# list - 如何根据是否在列表中找到元素来指定返回值？

> ID：14404023
> 
> 赞同：0
> 
> 时间：2013-01-18T17:10:30.733
> 
> 标签：list, erlang

我有一个看起来像这样的元组列表：

```
[{apple, fruit},{pear, fruit},{tomato, vegetable}] 
```

我的一个函数应该遍历列表并按键返回一个元素，如下所示：

```
1> db:find(pear, Db).
{ok,fruit} 
```

我的功能是这样做的，看起来像这样：

```
find(Key, DbRef) -> [{ok, Element} || {Key1, Element} <- DbRef, Key =:= Key1]. 
```

但我也希望它返回如下内容：

```
2> db:find(cucumber, Db).
{error,unknown} 
```

当在列表中找不到密钥时。

这可能吗？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T17:15:59.583

使用`lists:keyfind/3`或`proplists:get_value/2,3`。

`lists:keyfind/3`是完成这项任务的***最佳***选择。它是一个 BIF，因此是用 C 编写的。它比`proplists`模块或任何其他纯 erlang 实现要快得多。它还能够处理具有不同位置的键的更复杂的元组（如果你有一个记录列表就是这种情况）。

## 例子

使用`lists`模块：

```
{pear, fruit} = lists:keyfind(pear, 1, Db),
false = lists:keyfind(cucumber, 1, Db). 
```

使用`proplists`模块：

```
fruit = proplists:get_value(pear, Db),
undefined = proplists:get_value(cucumber, Db),
{error, instance} = proplists:get_value(cucumber, Db, {error, instance}). 
```

甚至将两者与`proplists`-style混合`keyfind`：

```
get_value(Key, List) -> get_value(Key, List, undefined).
get_value(Key, List, Default) ->
    case lists:keyfind(Key, 1, List) of
        false -> Default;
        {Key, Value} -> Value
    end. 
```

用法：

```
fruit = get_value(pear, Db),
undefined = get_value(cucumber, Db),
{error, instance} = get_value(cucumber, Db, {error, instance}). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:24:04.537

您必须递归地向下查看每个元素的列表。如果它有正确的键，那么你返回值，否则你递归地调用自己来查看列表的其余部分。如果您到达终点，那么您知道该元素不存在并且您返回`{error,instance}`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T09:30:03.057

这听起来很简单：

```
db:find(Key,Proplist)->
    case proplists:get_value(Key,Proplist) 的
        未定义-> {错误，未知}；
        价值 -> {ok,价值}
    结尾。

```

# r - R用频率替换值

> ID：14404025
> 
> 赞同：4
> 
> 时间：2013-01-18T17:10:37.170
> 
> 标签：r

我正在尝试用频率替换数据框中的值。

这是我的数据：

```
blah<-list(c(1,1,2,2,3,1,3,2,2,5,5), c(7,8,7,8,9,9,7,8,9,7,7))
blah<-as.data.frame(blah)
colnames(blah)<-c("col1","col2") 
```

我创建了一个包含两列的表。

接下来，我使用“表”为两列生成频率：

```
col1Freq<-table(blah[,1])/dim(blah)[1]
col2Freq<-table(blah[,2])/dim(blah)[1] 
```

*我的目标是将blah*中的所有值替换为频率。所以最终表的大小应该与*blah*相同，但我想要频率而不是整数。

对不起，我没有任何照片可显示....谢谢您的帮助！！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:17:46.580

如果我正确理解了您的问题，则基本 R 函数`ave()`（不要注意其误导性名称）将满足您的需求。

```
blah2 <- 
transform(blah,
          col1Freq = ave(col1, col1, FUN=function(X) length(X)/nrow(blah)),
          col2Freq = ave(col2, col2, FUN=function(X) length(X)/nrow(blah)))

blah2[3:4]
#     col1Freq  col2Freq
# 1  0.2727273 0.4545455
# 2  0.2727273 0.2727273
# 3  0.3636364 0.4545455
# 4  0.3636364 0.2727273
# 5  0.1818182 0.2727273
# 6  0.2727273 0.2727273
# 7  0.1818182 0.4545455
# 8  0.3636364 0.2727273
# 9  0.3636364 0.2727273
# 10 0.1818182 0.4545455
# 11 0.1818182 0.4545455 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-15T10:43:27.907

我遇到了同样的问题。就我而言，我需要这种转换来稍后计算每列的频率乘积，这应该会导致多变量（多维）数据的频率（概率）。

我的解决方案适用于任意数量的列：

```
apply(blah,2,function(x){
 t = as.data.frame(table(x))
 t$Freq[match(x,t[,1])]/length(x)
}) 
```

# jquery - 切换后的运行功能在反转时无法正常工作

> ID：14404030
> 
> 赞同：0
> 
> 时间：2013-01-18T17:11:06.717
> 
> 标签：jquery, jquery-animate, slidetoggle

我正在使用以下 jquery 函数来 slideToggle .toggle-box 并在 slideToggle 完成后滚动到顶部。这在向下滑动 .toggle-box 时效果很好，但在向上滑动时，这两个功能似乎同时运行。工作示例：http: [//jsfiddle.net/7udLq/12/](http://jsfiddle.net/7udLq/12/)

```
jQuery(".toggle-box").hide();

jQuery("a.toggle").click(function (e) {

    jQuery(".toggle-box").slideToggle(1500, function () {
        jQuery("html,body").animate({
            scrollTop: jQuery(".toggle").offset().top
        }, {
            duration: 500,
            easing: "easeOutQuint"
        });
    });

    e.preventDefault();

}); 
```

**更新：** 修复实际上非常简单，并且适用于简单的 css。通过添加底部：0；到被切换的框它工作正常

```
.toggle-box {
    background-color:green;
    height:500px;
    bottom:0;
} 
```

[http://jsfiddle.net/7udLq/16/](http://jsfiddle.net/7udLq/16/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:49:32.977

问题是当 box `slideup`， body height 改变浏览器`scroll`到页面顶部时。

看看我在说什么：（我在演示目的上使用 slideDown/slideUp，当 slideDown/scrolltop 完成时插入一个临时 div）

[http://jsfiddle.net/7udLq/13/](http://jsfiddle.net/7udLq/13/)

# sublimetext2 - Sublime Text 中的“查找/替换”面板在全部替换后消失

> ID：14404032
> 
> 赞同：27
> 
> 时间：2013-01-18T16:53:23.133
> 
> 标签：sublimetext2, sublimetext, sublimetext3

在 Sublime 中，在我执行一次“全部替换”后，屏幕底部的查找/替换文本框就会消失。我经常做多个替换所有，所以我希望这些盒子留在那里/一直存在，直到我明确关闭它们。我觉得我过去已经让这个工作了，但找不到恢复它的方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-03-13T14:44:57.123

这仅在 Sublime Text 3 中进行了测试，但也应该在 ST2 中工作：

1.  选择`Preferences > Key Bindings -- Default`。

2.  搜索`ctrl+alt+enter`并复制整个块。

3.  选择`Preferences > Key Bindings -- User`。

4.  将复制的块粘贴到任何地方并`, "args": {"close_panel": true}`从中删除部分。

5.  保存`Key Bindings -- User`并测试它（你不需要重新启动 Sublime Text）。

由于您只修改了键绑定，因此您应该记住，只有在搜索和替换面板中执行`Ctrl`++时，预期的行为才会起作用。`Alt``Enter`

如果您单击`Replace All`按钮，将应用“旧”行为——即面板将被关闭。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-03-23T05:16:12.947

**2021 年 12 月更新：查看用户“初学者”的回答；出于历史目的将其保留，但该答案应该是公认的解决方案；显然，该功能最终被添加到 build 4092 中。**

我也在寻找这个（7年后！）。我还查看了设置并尝试在崇高的论坛和谷歌上搜索......但 trejder 的答案似乎是当前存在的唯一选项。

由于我没有看到任何请求，因此我继续在 sublime 论坛上为此创建了一个[功能请求。](https://forum.sublimetext.com/t/option-to-not-close-the-find-bar-when-the-replace-all-button-is-clicked/50191)

希望它会被接受，或者某些论坛大师会告诉我我是个白痴，并且该功能已经存在。发布链接主要是为了让任何其他从搜索引擎进入的人都可以检查是否有任何更新。

交叉你的手指:-)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-11-22T08:15:47.750

在最新版本的 sublime 上，可以根据您的喜好关闭这些设置。

> // 这决定了当按下“查找全部”或“全部替换”按钮时是否关闭查找面板。请注意，这不会更改 // 键绑定行为。“close_find_after_find_all”：真，“close_find_after_replace_all”：真，

只需`Preferences->Settings`在右侧窗口中添加此行 `"close_find_after_replace_all": false,`

[![在此处输入图像描述](../Images/3aea8d3ede06b7bc914f88f55193dfca.png)](https://i.stack.imgur.com/wuQ4I.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-11T17:52:59.470

**编辑**：查看接受的答案

这是在接受的答案出现之前的一种解决方法：

`command+shift+f`在 Mac 上。（可能`ctrl+shift+f`适用于非 Mac。）

仅将当前文件的“位置”框留空，或将父文件夹的路径留空以在父文件夹和子文件夹中执行所有操作。

点击“查找”。一条警报将询问您是否要替换所有出现的内容。

仅在 Sublime 3 上测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T22:39:02.203

您可以在 Sublime Text 2 中使用两种不同类型的搜索面板。有常规搜索和增量搜索。这两个搜索面板之间的主要区别在于 Enter 键的行为。在常规搜索面板中，回车键移动到下一个实例，在增量搜索面板中，回车键找到第一个实例，然后关闭面板。

Windows 的快捷键如下：

*   Ctrl + F：常规搜索
*   Ctrl + I：增量搜索

如果您有兴趣，此站点有更多关于在 Sublime Text 2 中搜索和替换的信息：

[http://docs.sublimetext.info/en/latest/search_and_replace/search_and_replace.html](http://docs.sublimetext.info/en/latest/search_and_replace/search_and_replace.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-28T10:19:09.083

我将[mscharfs 的](https://stackoverflow.com/a/23019401/8262102)方法用于大型文档，但将此解决方法用于较小的文档。

1.  将光标准确地放在单词边界的左侧或右侧。
2.  按住键盘短`Ctrl`+ `D`（将选择扩展到单词）直到选择不能继续。
3.  开始输入替换。

该文本（或选择）已被替换。

**注意：**将光标放在单词边界处的行为不同，因为它与单词完全匹配。

# loops - 自动将文件从 USB 复制到具有特定扩展名的特定文件夹

> ID：14404037
> 
> 赞同：0
> 
> 时间：2013-01-18T17:11:15.607
> 
> 标签：loops, batch-file, copy, cmd, backup

我有大量闪存驱动器，我需要将文件备份到特定文件夹（例如 C:\Backup）。

有两个问题： 1\. 我只需要备份扩展名为 .doc 和 .docx 的文件。2.插入闪存驱动器时，我希望文件会自动复制。

（如果我记得，这是循环）

是否有任何批处理解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:16:46.777

[试试这个自动播放 USB 的教程](http://visualdesigning.com/autorun-usb/)

然后，我在想，而不是 autoplay.exe，您可以将其设置为运行批处理文件。在该批处理文件中使用[xcopy](http://www.computerhope.com/xcopyhlp.htm)命令。

# nginx - 基于位置的 nginx 代理

> ID：14404038
> 
> 赞同：1
> 
> 时间：2013-01-18T17:11:19.543
> 
> 标签：nginx, reverse-proxy

我想设置一个基于位置而不是侦听端口或 server_name 的 nginx 代理。

```
upstream cluster
{
    server cluster1:8080;
    server cluster2:8080;
}
server
{
    listen 80;
    server_name mydomain.com;
    location /hbase
    {
        proxy_pass http://cluster;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_next_upstream error timeout invalid_header http_500 http_502 http_503;
    }
} 
```

我知道这可能是我想念的非常简单的事情。基本上路由似乎工作，但它实际上最终调用“http://cluster1:8080/hbase”，当它应该只是将流量路由到没有 hbase 部分的服务器时。

重写规则会起作用，但我似乎找不到在 nginx 中重写的方法；我可以让它重定向，但我希望实际端口对外界不可见。

这非常有效，但我只想允许端口 80 上的流量。

```
upstream cluster
{
    server cluster1:8080;
    server cluster2:8080;
}
server
{
    listen 555;
    server_name mydomain.com;
    location /
    {
        proxy_pass http://cluster;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_next_upstream error timeout invalid_header http_500 http_502 http_503;
    }
} 
```

有没有办法使用正则表达式从转发的请求中删除 hbase？

**回答：**

```
location /hbase
{
    rewrite  ^/hbase$|^/hbase/$|^/hbase/(.*)$ /$1  break;
    proxy_pass http://cluster;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:27:18.550

在*nginx*中有一个有效的[重写](http://wiki.nginx.org/HttpRewriteModule)。以下应该有效（没有尝试）

 *```
 location /hbase
  {
     rewrite  ^.*$  /  break;
     proxy_pass http://cluster; 
```*

# windows-8 - 在嵌入式系统上以快照视图启动应用程序

> ID：14404045
> 
> 赞同：2
> 
> 时间：2013-01-18T17:11:39.340
> 
> 标签：windows-8, windows-runtime, windows-store-apps, windows-embedded, windows-embedded-8

最近有同事问了一个类似的问题（[How to start a MetroApp directly in Snapped mode?](https://stackoverflow.com/questions/14396210)），但是这个问题不是重复的……

以编程方式强制 Windows 应用商店应用程序以快照视图打开似乎是不可能的——按设计。**但是您可以在Windows Embedded 8**机器上执行此操作或类似操作吗？类似的事情可能包括：

*   在系统启动时以快照视图自动启动应用程序，或
*   始终在快照视图中启动特定应用程序
*   ？？？

**我们正在努力实现的目标：**

用户登录（在我们预先配置的机器上，由我们组装，可能运行 Windows Embedded 8），启动我们的应用程序，然后一个快照通信应用程序（例如 Skype 或 Lync）会 (A) 自动与我们的应用程序一起出现，或者 (B) 可以通过在我们的应用程序中按下按钮打开。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:48:51.623

开发人员拥有将他们的应用程序从 SnapView 带到 Fill 或 FullView 所需的 API。这通常是一个宣传较少的 API，因为它很容易被滥用。为此，反过来是不可用的。没有 API 可以迁移到 SnapView。

我也可能会提醒您，除非您确定设备分辨率，否则从 SnapView 开始（这是不可能的）将是一个危险的不可靠步骤，因为许多（大多数？）显示器不支持它（太小）。既然你说的是嵌入式，我想这可能被夸大了。由于听起来您可能知道硬件，因此您可以将其作为一般规则，而不是针对您的情况。

# android - AppInventor 的 TinyDB 可能性和限制

> ID：14404046
> 
> 赞同：0
> 
> 时间：2013-01-18T17:11:40.290
> 
> 标签：android, app-inventor

我是一个编程初学者，我对 python、php 和 html 有一点经验。

我需要为我的智能手机实现一个非常简单的应用程序，它允许我每个月为每个客户跟踪一个简单的“是”或“否”。

这很奇怪，但我需要它是这样的。

因此，要求（例如）3 月报告，该应用程序将向我显示所有用户名和一个简单的“是”或“否”，描述该用户名是否向我付款。

我可以使用 xls 文件轻松完成此操作，但我想实现它以获得乐趣和学习。

我的问题是：我能否仅使用 AppInventor 获得类似的结果（我需要一个插入客户的插入页面、一个修改页面和一个报告页面）？TinyDB 足够了吗？

我可以跳过这一切，用 mysql 在 php 中实现一个非常简单的 webapp，但我真的梦想做一些“我的”事情，并看到它在 android 上运行。

我希望能够以一种非常简单和快速的方式实现它：如果 AppInventor 还不够，是否还有另一种“傻瓜”解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:00:40.797

> 我的问题是：我能否仅使用 AppInventor 获得类似的结果（我需要一个插入客户的插入页面、一个修改页面和一个报告页面）？TinyDB 足够了吗？

[是的，这](http://www.appinventorblocks.com/appinventor-tutorials-tips/appinventor-lists) 很容易，从 App [Inventor](https://groups.google.com/forum/#!forum/programming-with-app-inventor)开始，做[教程](http://appinventor.mit.edu/explore/content/tutorials.html)来了解一切

是如何工作的[论坛](https://groups.google.com/forum/#!forum/programming-with-app-inventor)，以防你被卡住

# asp.net - sql创建带有可选参数的存储过程的表

> ID：14404048
> 
> 赞同：1
> 
> 时间：2013-01-18T17:11:45.717
> 
> 标签：asp.net, sql, stored-procedures, parameters, create-table

我正在使用 sql 存储过程编写基于参数的报告。问题是有几个“可选”参数，用户可以在其中选择一个值，或者完全忽略该参数。我需要将存储的过程用作 asp.net 报告中的数据集。我想到的唯一方法是从结果中创建一个表。但我一无所知。

如何将其转换为“创建表”存储过程？非常感谢任何帮助。

辛迪

这是我到目前为止所拥有的 -

```
ALTER PROCEDURE [dbo].[rspSCL]
-- Add the parameters for the stored procedure here
(@year as int,
@RRID as int,
@State as nchar(2),
@Sub as varchar(75),
@app as int,
@sprayed as int,
@subcontracted as int,
@thirdapp as bit)
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

-- Insert statements for procedure here
DECLARE @SQL as varchar(4000)
DECLARE @SUBQ AS varchar(400)

--what fields need to be seen
SET @SQL = 'SELECT C.CRID, C.DOT, C.RR, C.Pref, C.MP, C.Division,  C.Subdivision,C.City, C.Street,
    C.State, C.County, C.RestrictedCounty, C.Remarks, C.SpecialInstructions, C.Route, C.ThirdAppRequired,
    C.MainTrks, C.OtherTrks, C.OnSpur, C.MaxSpeed, C.SubContracted, C.FenceEncroachment, C.Lat, C.Long,
    C.PropertyType, C.WarningDevice,C.Surface, C.ROWNE, C.ROWNW, C.ROWSE, C.ROWSW, C.ROWWidth, C.ExtNE,
    C.ExtNW, C.ExtSE, C.ExtSW, C.TempActive, A.Spray, A.ContractYear' 

   SET @SUBQ =
   CASE WHEN @app = 1 THEN
    'FROM Crossings LEFT OUTER JOIN 
    (select A.CRID, A.spray FROM ApplicationData A 
    WHERE A.ContractYear = '  + CAST( @year AS varchar(4)) + ') as APPS
    ON Crossings.CRID = APPS.CRID' 

  WHEN @app = 2 THEN
     'FROM Crossings inner join
    (SELECT crid, C,OUNT(APPID)as count
    from ApplicationData
    where ContractYear = ' + CAST( @year AS varchar(4)) + '
    group by CRID) as APPS

    ON Crossings.CRID = APPS.CRID
    WHERE Crossings.RR = '+ CAST( @RRID AS varchar(4)) + '
    and crossings.state = '+ @state + '
    and count = 1'

when @app = 3 THEN
   'FROM Crossings inner join
    (SELECT crid, COUNT(APPID)as count
    from ApplicationData
    where ContractYear = ' + CAST( @year AS varchar(4)) + '
    group by CRID) as APPS

    ON Crossings.CRID = APPS.CRID
    WHERE Crossings.RR = '+ CAST( @RRID AS varchar(4)) + '
    and crossings.state = '+ @state + '
    and count = 2'  
ELSE ''
END

--add the FROM to the query
SET @SQL = @SQL + @SUBQ

--add the subdivision to the where statement
If @Sub != 'ALL'
 SET @SQL = @SQL + 'AND (C.Subdivision = ' + @Sub + ')'
ELSE
 SET @SQL = @SQL

--add sprayed to where
DECLARE @S as varchar(100)
SET @S =
CASE WHEN @sprayed = 1 THEN
    'AND (A.sprayed = 1)'
WHEN @sprayed = 0 THEN
    'AND (A.sprayed = 0)'
ELSE
    ''
END

SET @SQL = @SQL + @S

--add subcontracted to where
DECLARE @C as varchar (100)
SET @C = 
CASE WHEN @subcontracted = 0 THEN
    'AND (C.subcontracted = 0)'
WHEN @subcontracted = 1 THEN
    'AND (C.subcontracted = 1)'
ELSE
    ''
END 

SET @SQL = @SQL + @C

IF @thirdapp = 1
SET @SQL = @SQL + 'AND (C.ThirdAppRequired = 1)'
ELSE
SET @SQL = @SQL

END 
```

# r - 在 y 轴上根据小时分钟绘制一条垂直线

> ID：14404049
> 
> 赞同：-1
> 
> 时间：2013-01-18T17:11:52.960
> 
> 标签：r, ggplot2

X

```
structure(list(Date = structure(c(15358, 15359, 15362, 15363, 
15364, 15365), class = "Date"), EndTime1 = structure(list(sec = c(0, 
0, 0, 0, 0, 0), min = c(45L, 25L, 7L, 19L, 5L, 23L), hour = c(5L, 
8L, 3L, 4L, 4L, 3L), mday = c(18L, 18L, 18L, 18L, 18L, 18L), 
    mon = c(0L, 0L, 0L, 0L, 0L, 0L), year = c(113L, 113L, 113L, 
    113L, 113L, 113L), wday = c(5L, 5L, 5L, 5L, 5L, 5L), yday = c(17L, 
    17L, 17L, 17L, 17L, 17L), isdst = c(0L, 0L, 0L, 0L, 0L, 0L
    )), .Names = c("sec", "min", "hour", "mday", "mon", "year", 
"wday", "yday", "isdst"), class = c("POSIXlt", "POSIXt")), EndTime2 = structure(list(
    sec = c(0, 0, 0, 0, 0, 0), min = c(45L, 41L, 11L, 27L, 19L, 
    34L), hour = c(7L, 15L, 5L, 7L, 8L, 5L), mday = c(18L, 18L, 
    18L, 18L, 18L, 18L), mon = c(0L, 0L, 0L, 0L, 0L, 0L), year = c(113L, 
    113L, 113L, 113L, 113L, 113L), wday = c(5L, 5L, 5L, 5L, 5L, 
    5L), yday = c(17L, 17L, 17L, 17L, 17L, 17L), isdst = c(0L, 
    0L, 0L, 0L, 0L, 0L)), .Names = c("sec", "min", "hour", "mday", 
"mon", "year", "wday", "yday", "isdst"), class = c("POSIXlt", 
"POSIXt")), EndTime3 = structure(list(sec = c(0, 0, 0, 0, 0, 
0), min = c(7L, 59L, 30L, 48L, 46L, 58L), hour = c(8L, 15L, 5L, 
7L, 8L, 5L), mday = c(18L, 18L, 18L, 18L, 18L, 18L), mon = c(0L, 
0L, 0L, 0L, 0L, 0L), year = c(113L, 113L, 113L, 113L, 113L, 113L
), wday = c(5L, 5L, 5L, 5L, 5L, 5L), yday = c(17L, 17L, 17L, 
17L, 17L, 17L), isdst = c(0L, 0L, 0L, 0L, 0L, 0L)), .Names = c("sec", 
"min", "hour", "mday", "mon", "year", "wday", "yday", "isdst"
), class = c("POSIXlt", "POSIXt"))), .Names = c("Date", "EndTime1", 
"EndTime2", "EndTime3"), row.names = c(NA, 6L), class = "data.frame") 
```

\n

```
y_limits = as.POSIXct(c(strptime("00:00", "%H:%M"), strptime("23:29", "%H:%M")))
y_breaks = seq(from=strptime("00:00", "%H:%M"), 
to=strptime("23:29", "%H:%M"), by="2 hours")
y_labels = format(y_breaks, "%H:%M")
s<-as.POSIXlt("09:00", format="%H:%M")

ggplot(x, aes(Date, EndTime1, group=1, colour="Team1")) + geom_line() + scale_y_datetime(limits=y_limits, breaks=y_breaks, labels=y_labels) + geom_line(aes(Date, EndTime2, colour="Team2")) + geom_line(aes(Date, EndTime3, colour="Team3")) + geom_hline(yintercept=s, colour="red") 
```

我喜欢在 s 处绘制 geom_line 但不工作。得到错误为：

```
Error : Invalid intercept type: should be a numeric vector, a function, or a name of a function
Error in if (nrow(layer_data) == 0) return() : argument is of length zero 
```

任何想法如何在给定的 s 处绘制垂直线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:13:43.583

```
s<-as.POSIXct(c("09:00"), format="%H:%M")
s<-as.numeric(s) 
```

# c# - BindingExpression路径错误？

> ID：14404050
> 
> 赞同：0
> 
> 时间：2013-01-18T17:11:56.637
> 
> 标签：c#

> **可能重复：**
> [为什么这些选项卡似乎共享同一个文本框？](https://stackoverflow.com/questions/14402821/why-do-these-tabs-seem-to-share-the-same-textbox)

我的 Header 和 Text 属性都在 MyHomeworkModel 类中。我将视图的数据上下文设置为 MyHomeworkViewModel 类。但是，在我看来，我将新添加的选项卡标题和文本框文本绑定到 MyHomeworkModel 中的这两个属性。

然后，每当我尝试**添加第二个选项卡**时，我都会收到 BindingExpression 路径错误，它只抱怨我绑定到 Text，而不抱怨绑定到 Header。

我仍然得到第二个标签，除了我所有的文本框（在不同的标签中）都有相同的文本。

下面是我的xaml：

```
 <TabControl HorizontalAlignment="Left" Height="330" VerticalAlignment="Top" Width="764" Margin="10,10,0,0" ItemsSource="{Binding AllTabs}" SelectedItem="{Binding SelectedTab}">
            <TabControl.ItemContainerStyle>
                <Style TargetType="TabItem">
                    <Setter Property="Header" Value="{Binding Header}"/>
                    <Setter Property="Content">
                        <Setter.Value>
                            <Grid>
                                <TextBox Text="{Binding Text}" FontSize="16" AcceptsReturn="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                </TextBox>
                            </Grid>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="FontSize" Value="20"/>
                </Style>
            </TabControl.ItemContainerStyle>
        </TabControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:13:30.460

精确[替换](https://stackoverflow.com/questions/14402821/why-do-these-tabs-seem-to-share-the-same-textbox/14402994#comment20040322_14402994)请阅读[常见问题解答](https://stackoverflow.com/faq)！

# ios - SQLite 页面缓存不断增长——性能下降

> ID：14404052
> 
> 赞同：0
> 
> 时间：2013-01-18T17:12:04.193
> 
> 标签：ios, performance, sqlite

我们有一个遇到性能问题的 iOS 应用程序——交易时间长。所涉及的一些事务很大——数百次更新，但是当问题发生时，给定事务的持续时间会增加 20 倍左右（因此它可以从 3 秒增加到 60 秒）。而且，观察交易时间（无论是短期交易时间还是长期交易时间），可以看到给定类型交易的时间缓慢而稳定地增长，直到某个点突然上升。这一切似乎都与数据库大小或曾经使用过的事务数量有关。（应用重启后问题依然存在。）

通过定时调用，`sqlite3_status`我发现“PAGECACHE_OVERFLOW”数字似乎随着性能的恶化而增长，直到“飞跃”，此时它似乎“固定”在 2,351,392 左右，在该数字上下可能相差 10,000。

（在这里包含任何代码没有多大意义，因为我不知道可能包含 50,000 行中的哪一行，但如果有人愿意，我可以包含更多数据。）

下面是基本的时间数据，来说明问题：

```
Line 6003: 2013-01-17 17:05:57.296 [640f] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7bd7490> (operation count 50) for TestCase 31 was 0.007225
Line 6006: 2013-01-17 17:05:57.699 [640f] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7bdcc50> (operation count 100) for TestCase 31 was 0.012519
Line 6008: 2013-01-17 17:05:58.130 [640f] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7be3ce0> (operation count 150) for TestCase 31 was 0.012854
Line 6011: 2013-01-17 17:05:58.614 [640f] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7bead70> (operation count 200) for TestCase 31 was 0.012298
Line 6013: 2013-01-17 17:05:59.117 [640f] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7bf1dd0> (operation count 250) for TestCase 31 was 0.008589
Line 10158: 2013-01-17 17:10:59.635 [6e6b] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7b6a370> (operation count 50) for TestCase 20 was 0.019303
Line 10161: 2013-01-17 17:11:00.526 [6e6b] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7b704a0> (operation count 100) for TestCase 20 was 0.090055
Line 10164: 2013-01-17 17:11:01.354 [6e6b] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7ea94b0> (operation count 150) for TestCase 20 was 0.014182
Line 13712: 2013-01-17 17:11:08.467 [1b97] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7e77090> (operation count 50) for TestCase 21 was 0.014494
Line 13714: 2013-01-17 17:11:09.368 [1b97] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7e7dae0> (operation count 100) for TestCase 21 was 0.016176
Line 16852: 2013-01-17 17:11:15.417 [1b97] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7e5da90> (operation count 50) for TestCase 22 was 0.016824
Line 16854: 2013-01-17 17:11:16.469 [1b97] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7e81e50> (operation count 100) for TestCase 22 was 0.018769
Line 18: 2013-01-17 17:11:24.845 [1b97] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7b14fa0> (operation count 50) for TestCase 13 was 0.025399
Line 21: 2013-01-17 17:11:26.447 [1b97] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7bd4cb0> (operation count 100) for TestCase 13 was 0.025167
Line 23: 2013-01-17 17:11:27.886 [1b97] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7e3acf0> (operation count 150) for TestCase 13 was 0.026859
Line 27: 2013-01-17 17:11:29.353 [1b97] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7ee8920> (operation count 200) for TestCase 13 was 0.019391
Line 29: 2013-01-17 17:11:30.601 [1b97] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7eef680> (operation count 250) for TestCase 13 was 0.019822
Line 5742: 2013-01-17 17:11:41.681 [1b97] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x5730970> (operation count 50) for TestCase 23 was 0.081646
Line 5745: 2013-01-17 17:11:43.421 [1b97] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7b263f0> (operation count 100) for TestCase 23 was 0.021661
Line 5747: 2013-01-17 17:11:44.821 [1b97] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7f86ff0> (operation count 150) for TestCase 23 was 0.028541
Line 5750: 2013-01-17 17:11:46.233 [1b97] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7b7fda0> (operation count 200) for TestCase 23 was 0.023087
Line 5752: 2013-01-17 17:11:47.696 [1b97] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7e64400> (operation count 250) for TestCase 23 was 0.030041
Line 10685: 2013-01-17 17:12:04.873 [6473] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x84a0ec0> (operation count 50) for TestCase 24 was 0.030812
Line 10687: 2013-01-17 17:12:06.479 [6473] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x5728a80> (operation count 100) for TestCase 24 was 0.026640
Line 10690: 2013-01-17 17:12:08.147 [6473] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7e5f130> (operation count 150) for TestCase 24 was 0.029734
Line 10692: 2013-01-17 17:12:09.807 [6473] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7b0d280> (operation count 200) for TestCase 24 was 0.039982
Line 15692: 2013-01-17 17:12:20.456 [6473] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x83edb60> (operation count 50) for TestCase 25 was 0.044163
Line 15695: 2013-01-17 17:12:22.265 [6473] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7b8d1c0> (operation count 100) for TestCase 25 was 0.036278
Line 15697: 2013-01-17 17:12:24.092 [6473] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7e4fa90> (operation count 150) for TestCase 25 was 0.039441
Line 15700: 2013-01-17 17:12:25.957 [6473] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7f63ef0> (operation count 200) for TestCase 25 was 0.044993
Line 15702: 2013-01-17 17:12:27.844 [6473] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x84e9d00> (operation count 250) for TestCase 25 was 0.039544
Line 20761: 2013-01-17 17:12:36.498 [9327] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7e7f600> (operation count 50) for TestCase 26 was 0.036249
Line 20763: 2013-01-17 17:12:39.247 [9327] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7b30960> (operation count 100) for TestCase 26 was 0.058809
Line 20767: 2013-01-17 17:12:41.772 [9327] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7ea9a70> (operation count 150) for TestCase 26 was 0.048724
Line 20769: 2013-01-17 17:12:43.768 [9327] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7b287b0> (operation count 200) for TestCase 26 was 0.040958
Line 20772: 2013-01-17 17:12:45.788 [9327] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7b64eb0> (operation count 250) for TestCase 26 was 0.040524
Line 17: 2013-01-17 17:12:58.002 [9327] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7f78130> (operation count 50) for TestCase 27 was 0.049245
Line 20: 2013-01-17 17:13:00.157 [9327] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7eacf20> (operation count 100) for TestCase 27 was 0.042884
Line 22: 2013-01-17 17:13:02.323 [9327] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x83e0de0> (operation count 150) for TestCase 27 was 0.043717
Line 25: 2013-01-17 17:13:04.483 [9327] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7e2f690> (operation count 200) for TestCase 27 was 0.044739
Line 27: 2013-01-17 17:13:06.686 [9327] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7f6c7f0> (operation count 250) for TestCase 27 was 0.044045
Line 5109: 2013-01-17 17:13:33.149 [9613] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x8444de0> (operation count 50) for TestCase 28 was 0.054260
Line 5112: 2013-01-17 17:13:35.969 [9613] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7f6fd50> (operation count 100) for TestCase 28 was 0.065153
Line 5114: 2013-01-17 17:13:38.885 [9613] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7ee9b10> (operation count 150) for TestCase 28 was 0.046428
Line 5117: 2013-01-17 17:13:41.801 [9613] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7bc66a0> (operation count 200) for TestCase 28 was 0.057400
Line 5119: 2013-01-17 17:13:44.749 [9613] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7efadb0> (operation count 250) for TestCase 28 was 0.050737
Line 6553: 2013-01-17 17:13:52.572 [9613] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x85b71d0> (operation count 50) for TestCase 29 was 0.068941
Line 12883: 2013-01-17 17:51:57.413 [ff5f] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x7e5d260> (operation count 50) for TestCase 6 was 0.217507
Line 12886: 2013-01-17 17:52:08.760 [ff5f] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x84a4c60> (operation count 100) for TestCase 6 was 0.224743
Line 12888: 2013-01-17 17:52:20.051 [ff5f] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x84f7110> (operation count 150) for TestCase 6 was 0.220262
Line 12891: 2013-01-17 17:52:31.397 [ff5f] [TestCase insertDependentRows:](1224) <PHI> Time to insert/update MyAppMarker <MyAppMarker: 0x8540ec0> (operation count 200) for TestCase 6 was 0.222045 
```

所以我想问题是：有没有人知道可能的原因，或者进一步诊断它的方法？

**更新：**使用分析器的分配选项进行了一些测试。似乎很多数据库插入/更新都在 B 树（位于 PAGECACHE 中）中分配（堆）空间，并且从不释放它。我想这是有道理的，但存储量似乎很大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:38:33.840

终于想通了。这是*缺少索引的情况*。当我运行测试足够长的时间并每隔一段时间转储 DB 文件大小时，很明显操作时间几乎与 DB 大小呈线性增长。

翻遍数据库（我没有设置），`WHERE`在没有相应索引的大表上发现了几个频繁子句。添加了大约 6 个索引，性能现在接近 O(1)。

我还没有时间弄清楚 PAGECACHE 统计数据可能发生了多大程度的变化，以及明显的 SQLite 堆泄漏是否消失了。在称它为“好”之前，我会先看看那些头发。

**补充：** 一个小小的警示故事——事实证明，我添加的索引之一*应该*已经存在了。只有它被编码为

```
CREATE INDEX IF NOT EXISTS FileIdIndex ON FileMetaData (FileId) 
```

当有一个更早的（在单独的模块中，用于“模块化”）

```
CREATE INDEX IF NOT EXISTS FileIdIndex ON Master (FileId) 
```

因此，当您创建索引名称时，最好将表名称作为索引名称的一部分，如“FileIdToFileMetaDataIndex”，以避免名称冲突。

# javascript - Jquery：如何通过单击相应的div来更改图像

> ID：14404053
> 
> 赞同：-1
> 
> 时间：2013-01-18T17:12:07.713
> 
> 标签：javascript, jquery, onclick, toggle, slidetoggle

基本上，我要做的就是将 4 个内容块包装在 div 中，然后让每个内容块对应一个图像，并在单击 div 时更改图像。我知道这应该很简单，但我对 jquery 的了解有限，主要依赖插件。如果可能的话，我不想将信息 div 更改为链接。谢谢

这是我当前的标记；使用基础网格

```
<div class="feature-one row clearfix">
    <div class="three columns">
        <span class="twelve columns activities-1">
            <p class="marker"> Title of Service</p>
                <p>Longer description of services</p>
        </span>
        <span class="twelve columns activities-2">
            <p class="marker"> Title of Service</p>
                <p>Longer description of services</p>
        </span>
    </div>

        <div class="six columns" >
            <img id="activities-1" src="screenshot.jpg"/>
            <img id="activities-2" src="screenshot.jpg"/>
            <img id="activities-3" src="screenshot.jpg"/>
        </div>

        <div class="three columns">
            <span class="twelve columns activities-3">
                <p class="marker"> Title of Service</p>
                    <p>Longer description of services</p>
            </span>
        </div>
</div> 
```

非常感谢你的帮助！

更新：这是我所拥有的最后一个；我确信它并不完美，可能会更简洁，但我希望它可以帮助任何人。对于任何想要清理它的人，也许可以使用 hoverIntent 我欢迎你的补充

```
 $('.feature-one img').each( function() {
    $(this).hide().filter(":first-child").show();;
});
$('.feature-one span').on('hover click', function() {
    var sName = $(this).attr('id');
    $('img#' + sName).fadeIn(800);
    $('.feature-one img').not($('img#' + sName)).fadeOut(800);
}
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:28:52.903

工作小提琴[链接](http://jsfiddle.net/pMTEf/)。

```
$(document).ready( function() {
    $('img').hide();
    $('span').on('click', function() {
        var sName = $(this).attr('id');
        $('img#' + sName).toggle(800);
    });
}); 
```

`id`正如您在小提琴链接上看到的那样，我已将该属性添加到每个 span 元素。

# windows - Windows PDB 文件包含相同地址的多个符号？

> ID：14404057
> 
> 赞同：0
> 
> 时间：2013-01-18T17:12:22.193
> 
> 标签：windows, pdb, dbghelp

> **可能重复：**
> [为什么两个函数打印相同的地址？](https://stackoverflow.com/questions/9323273/why-two-functions-print-the-same-address)

我正在为处理它们的应用程序使用 PDB 符号文件（通过 DbgHelp API）。我遇到了一个奇怪的问题，即 PDB 文件将包含同一地址的多个不同公共符号条目！

例如，在 Windows 7 (x64) 上使用 kernel32.dll (wow64) 的最新 Microsoft PDB 文件，我们可以转储以下信息并查看相同地址 0x10b1a6e 的 31 个不同条目：

```
C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x86>dbh.exe c:\symbols\wkernel32.pdb\D08F1E131D1F4D97B4AB2F64E00CFC8B2\wkernel32.pdb m 10b1a6e

 index            address     name
    7a            10b1a6e :   MFInitAttributesFromBlob
   179            10b1a6e :   MFCreateSourceReaderFromURL
   2fc            10b1a6e :   MFCreateASFMediaSinkActivate
   5b6            10b1a6e :   MFCreateWMVEncoderActivate
   61d            10b1a6e :   MFAddPeriodicCallback
   64c            10b1a6e :   MFPutWorkItem
   825            10b1a6e :   MFCreateAlignedMemoryBuffer
   c12            10b1a6e :   MFGetAttributesAsBlob
   d26            10b1a6e :   MFCreateMFVideoFormatFromMFMediaType
   f1a            10b1a6e :   MFFrameRateToAverageTimePerFrame
  1129            10b1a6e :   MFCreateProxyLocator
  1277            10b1a6e :   MFSerializeAttributesToStream
  12b3            10b1a6e :   MFEnumDeviceSources
  146d            10b1a6e :   MFCreateWMAEncoderActivate
  164c            10b1a6e :   MFBeginUnregisterWorkQueueWithMMCSS
  1bfc            10b1a6e :   MFCreateSourceReaderFromMediaSource
  1d25            10b1a6e :   MFInitMediaTypeFromWaveFormatEx
  1d72            10b1a6e :   MFGetStrideForBitmapInfoHeader
  1efb            10b1a6e :   CopyPropertyStore
  1f8d            10b1a6e :   MFDeserializePresentationDescriptor
  1fb5            10b1a6e :   MFCreateSampleGrabberSinkActivate
  1fe4            10b1a6e :   MFCreateASFStreamingMediaSinkActivate
  23a3            10b1a6e :   MFDeserializeAttributesFromStream
  24c0            10b1a6e :   MFConvertFromFP16Array
  26f7            10b1a6e :   MFSerializePresentationDescriptor
  2877            10b1a6e :   MFCreatePresentationDescriptor
  2ab7            10b1a6e :   MFCreateSourceReaderFromByteStream
  2b4a            10b1a6e :   MFGetWorkQueueMMCSSClass
  2e08            10b1a6e :   MFInitMediaTypeFromMFVideoFormat
  2ef0            10b1a6e :   MFCreateSinkWriterFromMediaSink
  2eff            10b1a6e :   MFConvertToFP16Array 
```

上面的示例是包含重复的许多地址之一。通常在任何地址都有一个符号条目。对同一个地址 AFAIK 有多个符号条目根本没有意义！

任何人都可以启发我：

*   为什么会这样？

*   这些重复的条目可以解析到唯一的位置吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:27:01.633

同一个地址有多个符号，因为[所有功能都是相同的](http://blogs.msdn.com/b/oldnewthing/archive/2005/03/22/400373.aspx)。就您而言，它们都是可以运行的功能

```
HRESULT MFBlahBlahBlah(...)
{
    return E_NOTIMPL;
} 
```

# php - 在 PHPExcel 中运行循环和格式化

> ID：14404058
> 
> 赞同：0
> 
> 时间：2013-01-18T17:12:24.237
> 
> 标签：php, mysql, phpexcel

我正在尝试使用 PHPExcel 创建一个 excel，并且需要有某种格式化方式。

像这样，

标题1 标题2 标题3 标题4 标题5 标题6

第 1 行 第 1 行

行 2 行 2 行 2 行 2

第 1 行 第 1 行

行 2 行 2 行 2 行 2

行 2 行 2 行 2 行 2

循环的 sql 查询将是这样的

```
loop1 {
$sql1 = mysql_query("SELECT * FROM table1");
$sql1array = mysql_fetch_array($sql1)
$row1 = $sql1array['column1'];

loop2 {
$sql2 = mysql_query("SELECT * FROM table2 WHERE column1 = $row1");
$sql2array = mysql_fetch_array($sql2)
$row2 = $sql2array['column1'];

}
} 
```

我可以很好地提取数据，但我需要更多关于格式化的帮助。

感谢您对此提供任何建议或帮助。

# java - 为 Web 服务生成 Wsdl/客户端存根

> ID：14404059
> 
> 赞同：1
> 
> 时间：2013-01-18T17:12:27.093
> 
> 标签：java, web-services, wsdl, wsimport

我一直在阅读有关使用 Java、Eclipse 等进行 Web 服务编程的内容，并且发现了一个特定的示例，该示例通过执行以下操作创建了 Web 服务和客户端：

1.  定义 Web 服务 java 类（接口 + 实现）
2.  **使用Endpoint.publish**部署*Web 服务*
***   从 Web 服务的 url 中获取*wsdl*（例如，localhost://greeting?wsdl）*   使用*wsimport*生成存根*   使用生成的存根创建客户端类**

 **是否有另一种方法来生成*wsdl*而无需发布 Web 服务并下载它？也许是一个自动生成 wsdl 和客户端存根的 maven 插件？

**更新**：而不是创建一个新问题，我只是要捎带这个问题。

我通过定义一个接口创建了我的 Web 服务：

```
@WebService
public interface HelloWorldWs {
    @WebMethod
    public String sayHello(String name);
} 
```

和一个 impl 类：

```
@WebService(endpointInterface = "com.me.helloworldws.HelloWorldWs")
public class HelloWorldWsImpl implements HelloWorldWs {
    @Override
    @WebMethod
    public String sayHello(String name) {
        return "Hello World Ws, " + name;
    }
} 
```

当我运行*wsgen*时，出现以下错误：

```
The @javax.jws.WebMethod annotation cannot be used in with @javax.jws.WebService.endpointInterface element. 
```

Eclipse 似乎没问题。

知道为什么吗？

请注意，我最初没有注释，但是当我尝试调用我的 web 服务时，出现以下错误：

```
com.me.helloworldws.HelloWorldWsImpl is not an interface 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:41:25.827

[JSR 224](http://www.jcp.org/en/jsr/detail?id=224)在 3.1 部分中说：

> SEI 是满足以下所有标准的 Java 接口：
> 
> *   它的任何方法都可以带有`javax.jws.WebMethod`注释（见 7.11.2）。
> *   `javax.jws.WebMethod`如果使用，不得将`exclude`元素设置为`true`.

如果实现类包括`javax.jws.WebMethod`，那么根据规范，你不能把`@WebMethod(exclude=true)`它放在不可能的地方。

取决于 Eclipse 的自定义版本，对此显示警告。例如 Rational Application Developer for Websphere 显示：

```
JSR-181, 3.1: WebMethod cannot be used with the endpointInterface 
              property of WebService 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:35:45.720

在编程/构建项目（使用一些高级 IDE）时，通常您应该能够在自动生成的东西之间找到它 - IDE 应该生成它。仔细检查一下。**

# mysql - 如何在excel单元格中保存blob文件

> ID：14404064
> 
> 赞同：1
> 
> 时间：2013-01-18T17:12:42.380
> 
> 标签：mysql, sql, vb.net, oracle

我的表格由存储账单的列（“文件为 pdf”）组成。

我的问题是我想将该表导出到 Excel 表。

可能吗？

到目前为止我试过这个..

```
 Dim xapp As New Microsoft.Office.Interop.Excel.Application
    Dim wb As Workbook = xapp.Workbooks.Add
    Dim ws As Worksheet = wb.Worksheets(1)
    ws.Activate()

    'Fill header of the sheet----------------------------------

    For i As Integer = 1 To dgvcustomer.Columns.Count
        ws.Cells(1, i) = dgvcustomer.Columns(i - 1).HeaderText
    Next

    'End header------------------------------------------------

    Dim Dgrow, Dgcell, Dgcol As Integer
    Dgrow = 1
    Dgcell = 1

    'Fill Sheet -----------------------------------------------------------------------

    While (Dgrow <= dgvcustomer.Rows.Count)
        Dgcol = 1
        While (Dgcol <= ws.UsedRange.Columns().Count)
            ws.Cells(Dgrow + 1, Dgcol).value = dgvcustomer.Rows(Dgrow - 1).Cells(ws.Cells(1, Dgcol).value).Value
            Dgcol += 1
        End While
        Dgrow += 1
    End While

    'End fill sheet--------------------------------------------------------------------

    wb.SaveAs(dlgSaveFile.FileName)
    wb.Close()
    xapp.Quit() 
```

此代码适用于非 blob 数据类型列，但对于 blob 会引发异常。

![异常图像](../Images/f6b25bdbdf6c5844bf926df45b246a1f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:20:30.300

不可以。Excel 不支持将数据 blob 存储在工作表的单元格中。

您可能应该将这些 PDF 分别导出到单独的文件中，并在导出的工作表中指定文件名。

# javascript - 将谷歌地图上的单位从公制更改为英制

> ID：14404066
> 
> 赞同：2
> 
> 时间：2013-01-18T17:12:45.090
> 
> 标签：javascript, google-maps-api-3, google-api

我有以下代码：

```
<script>

      var rendererOptions = {
        draggable: false
      };
      var directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);;
      var directionsService = new google.maps.DirectionsService();
      var map;

      var England = new google.maps.LatLng(53.7415, 1.6860);

      function initialize() {

        var mapOptions = {
          zoom: 6,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: England
        };
        map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
        map.setTilt(45);
        directionsDisplay.setMap(map)
        directionsDisplay.setPanel(document.getElementById('directionsPanel'));

        google.maps.event.addListener(directionsDisplay, 'directions_changed', function() {
          computeTotalDistance(directionsDisplay.directions);
        });

        calcRoute();
      }

      function calcRoute() {

        var request = {
          origin: 'postcode',
          destination: 'postcode',
          waypoints:[{location: 'waypoint postcode'}, {location: 'waypoint postcode'}, {location: 'waypoint postcode'}],
          travelMode: google.maps.DirectionsTravelMode.DRIVING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
          }
        });
      }

      function computeTotalDistance(result) {
        var total = 0;
        var myroute = result.routes[0];
        for (i = 0; i < myroute.legs.length; i++) {
          total += myroute.legs[i].distance.value;
        }
        total = total / 1000.
        document.getElementById('total').innerHTML = total + ' km';
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="float:left;width:70%; height:100%"></div>
    <div id="directionsPanel" style="float:right;width:30%;height 100%">
    <p>Total Distance: <span id="total"></span></p>
    </div> 
```

该地图使用 google api 的方向服务显示了起点和终点，以及沿途的某些航路点。方向面板以公制单位显示所有距离。如何更改它，以便所有距离都以英制单位（即英里、英尺）显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:22:33.287

[从文档](https://developers.google.com/maps/documentation/javascript/directions#UnitSystems)

> **单位系统**
> 
> 默认情况下，使用始发地国家或地区的单位系统计算和显示方向。（注意：使用纬度/经度坐标而不是地址表示的起点始终默认为公制单位。）例如，从“芝加哥，IL”到“多伦多，ONT”的路线将以英里为单位显示结果，而反向路线将显示结果以公里为单位。您可以通过使用以下 UnitSystem 值之一在请求中显式设置一个来覆盖此单位系统：
> 
> *   `UnitSystem.METRIC`指定公制的使用。距离以公里表示。
> *   `UnitSystem.IMPERIA`L 指定使用英制（英制）系统。距离以英里表示。
> 
> 注意：此单位系统设置仅影响向用户显示的文本。方向结果还包含距离值，未向用户显示，始终以米表示。

# java - 受保护类的 Javadoc 方法

> ID：14404068
> 
> 赞同：2
> 
> 时间：2013-01-18T17:12:46.773
> 
> 标签：java, documentation, javadoc

我有一个`protected`由一个类扩展的`public`类。该类`protected`包含许多`public`方法。

当为可见性生成 Javadoc 时`public`，继承的方法不会出现在`public`类的文档中。

`public`在为可见性生成 Javadoc 时，我希望继承的方法出现在扩展类的方法摘要中。我的理由是，如果基类没有被记录（由于受保护），那么任何`public`扩展它的类都应该在其方法摘要中包含这些方法。

是否有某种方法可以将这些方法或参数注释到 javadoc 以实现此目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:42:11.823

`@inheritDoc`javadoc 注释应该值得一试。

我没有明确地尝试过，但如果我是你，我会完全阅读 [这个](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javadoc.html#inheritingcomments)页面。

# javascript - jQuery 脚本为每个单选按钮和复选框标签添加类

> ID：14404070
> 
> 赞同：0
> 
> 时间：2013-01-18T17:13:03.337
> 
> 标签：javascript, jquery

为什么此脚本为页面上的每个单选按钮和复选框标签添加一个类，而不仅仅是为每个单独的复选框/单选按钮添加一个类？

例如，我有这些按钮：

```
<input class="required" id="Example31" name="Example3" type="checkbox" />
<label for="Example31">Example Input 3 Option 1</label>

<input class="required" id="Example32" name="Example3" type="checkbox" />
<label for="Example32">Example Input 3 Option 2</label>

<input class="required" id="Example4" name="Example4" type="radio" />
<label for="Example4">Example Input 4</label> 
```

这个脚本：

```
$("input.required").each(function() {
    if ($(this + ":checkbox") || $(this + ":radio")) {
        if (!$(this + ":checked").val()) {
            var inputId = $(this).attr("id");
            $("label[for=" + inputId + "]").addClass("error");
        };
    };
}); 
```

当我单击一个按钮时，脚本会触发。如果没有选中任何框，则每个标签都会添加一个错误，这是正确的。但是，如果选中一个框，则没有任何标签出现错误，这是不正确的。如果我选中第一组中的复选框，但未选中单选按钮，则该单选按钮应标记为错误。

注意：我知道这个脚本还没有考虑到输入名称（所以如果选中了一个具有相同名称的复选框，另一个复选框当前会显示错误），我正在尝试在继续之前解决他的错误.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:18:55.497

这些代码行完全是胡说八道，它们不能做任何有用或理智的事情：

```
if ($(this + ":checkbox") || $(this + ":radio")) {
    if (!$(this + ":checked").val()) { 
```

我怀疑你试图做...

```
if ($(this).is(":checkbox") || $(this).is(":radio")) {
    if (!$(this).is(":checked")) { 
```

通过解释，

1.  `this + ":checkbox"`将*始终*生成一个选择器，如`[object Something]:checkbox`，其中`Something`将根据`this`
2.  这将匹配~~具有属性~~~~和~~`:checkbox`, 的元素~~（请参阅~~~~[Has Attribute selector](http://api.jquery.com/has-attribute-selector/)~~~~）~~，这几乎肯定不是您想要的，并且很可能不匹配任何元素；**实际上我不确定为什么会这样。****是一个有效的选择器，并且****是一个有效的（但可能是无效的 - jQuery 错误？）选择器，但****它是一个无效的选择器并引发错误**~~`object``Something`~~**`[object]``[object Something]:checkbox``[object Something]`**
3.  无论元素是否匹配`$("...)`，都会产生一个包含 0 个或更多元素的 jQuery 对象，这*始终**是*真实的。而不是`if ($(...)) {`，您需要检查`if ($(...).length > 0)`

总而言之，您正在生成一个无效的选择器，它（通过 jQuery 的一些怪癖）不会引发错误，但会返回完全虚假的结果。

# c# - 正则表达式 - 重叠命名捕获组

> ID：14404071
> 
> 赞同：1
> 
> 时间：2013-01-18T17:13:16.777
> 
> 标签：c#, regex

是否可以编写正则表达式将单个数字捕获为 2 个不同的命名捕获组？

例如，如果我正在捕获一对值，但有时只有一个值：

```
5, 5
3
2, 5 
```

我想将单个值存储为第一个和第二个捕获组，这可能吗？例如，如果我的组被命名为 firstValue 和 secondValue：

```
firstValue = 5, secondValue = 5
firstValue = 3, secondValue = 3
firstValue = 2, secondValue = 5 
```

我想这个问题的简化是：是否可以在多个捕获组中包含相同的字符？我目前正在使用 C#，但很想知道这是否也可以在其他语言中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:58:26.430

我不认为在*每种*情况下都有可能，但这里有一些技巧可以用于您的示例：

```
@"(?m)^(?=(?<firstValue>\d+\b))(?:\k<firstValue>, *)?(?<secondValue>\d+)\r?$" 
```

第一个数字在 group 中被捕获`firstValue`，但由于 group 在前瞻内，匹配位置随后返回到字符串的开头。如果有第二个数字，第一个数字将紧跟逗号。`(?:\k<firstValue>, *)?`尝试使用数字、逗号和任何尾随空格，并`(?<secondValue>\d+)`捕获第二个数字。

如果只有一个数字，则不`(?:\k<firstValue>, *)?`消耗任何内容，这没关系，因为它是可选的。这使得匹配位置仍然在字符串的开头，因此`(?<secondValue>\d+)`再次捕获第一个数字，这次是在 group 中`secondValue`。我们还没有尝试在 group 中添加任何其他内容`firstValue`，所以这个数字也仍然存在。

这是另一种不太优雅但可能更容易理解的方法：

```
@"(?m)^(?<secondValue>(?<firstValue>\d+))(?:, *(?<secondValue>\d+))?\r?$" 
```

与其他响应者的解决方案基本相同，但我从捕获两组中的第一个数字*开始*。如果证明有第二个数字，它将被捕获到 group 中`secondValue`，覆盖已经存在的值。组`firstValue`仍然包含第一个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:44:02.093

不，你不能那样做。相反，你可以检查你是否已经捕获了第二个值。

```
var values=Regex.Matches(@"(?<fv>\d+)(,\s*(?<sv>\d+))?")
  .Cast<match>()
  .Select(m=>
    new {
      firstValue=m.Groups["fv"].Value;
      secondValue=m.Groups["sv"].Value==""?m.Groups["fv"].Value:m.Groups["sv"].Value;
    }
  ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:15:13.210

> 是否可以在多个捕获组中包含相同的字符？

直接回答 -**否**（除非您有嵌套的捕获组，否则不会）。一旦一个字符被捕获或匹配，它就不能再次匹配。

但是，如果您的问题有时是单个值，那么您可以通过使用`?`量词使第二个捕获组成为可选。

```
(?<firstValue>\d+)(, (?<secondValue>\d+))? 
```

所以现在我们已经`, secondValue`选择了。所以它会同时匹配`3, 5`和`3`。

# iphone - 是否可以在 iPhone 的状态栏中添加另一个时钟？

> ID：14404072
> 
> 赞同：1
> 
> 时间：2013-01-18T17:13:24.180
> 
> 标签：iphone, ios, api, system-clock

是否可以制作可以在 iPhone 状态栏上显示两次的越狱应用程序/调整或常规应用程序？这样的事情是否可能和/或已经开发出来？

我在另一个国家有一个非常特别的朋友，有时我会忘记那里的时间。必须在时钟应用程序上查看时间很痛苦，尤其是在打电话时。我无法想象一个简单的时钟可以使用许多系统资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:33:16.990

> 是否可以制作可以在 iPhone 状态栏上显示两次的越狱应用程序/调整或常规应用程序？

当然，最有可能使用 MobileSubstrate。我可以想象的解决方案大致是：

1.  你挂钩到 SpringBoard 的初始化方法之一。
2.  您使用该方法创建一个`UILabel`并将其作为子视图添加到状态栏`addSubview:`。
3.  您生成一个计时器（使用`NSTimer`、Grand Central Dispatch 或任何适合您的方式）以每分钟左右更新标签的文本。您可以使用`NSDate`并且也许`NSLocale`（我现在没有文档在我面前）来找出另一个国家的当地时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:33:03.560

![在此处输入图像描述](../Images/c11d3618c613e9d04a654c6e7381de09.png)

这就是为什么苹果还没有这样做的原因。他们有很多图标可以同时出现。添加另一个时间会占用这些其他图标的宝贵空间。当我最大化该栏时，它会撞掉其他图标，就像现在我正在播放音乐但是“播放按钮”图标被“导航器”图标撞掉了。

看看这个网站，它会显示大多数图标，如果它们在 iOS 6 中还没有添加的话。

[https://sites.google.com/site/appleclubfhs/support/advice-and-articles/understanding-ios-menu-symbols](https://sites.google.com/site/appleclubfhs/support/advice-and-articles/understanding-ios-menu-symbols)

您可能不得不进行越狱或硬编程，因为状态栏基本上是 iPhone 屏幕的一部分。

祝你好运！

# ruby-on-rails - Rails 3.x 使用 S3 通过 rest-client 上传文件 :: No such file or dir 错误

> ID：14404079
> 
> 赞同：2
> 
> 时间：2013-01-18T17:13:41.490
> 
> 标签：ruby-on-rails, ruby, amazon-s3, paperclip, rest-client

我有一个存储在 S3 上的图像文件。我想将该文件作为表单数据上传到远程站点。

控制器线：

```
response = RestClient.post("#{BASE_URL}/processImage?language=#{LANGUAGE}&exportFormat=txt", :upload => { :file => File.new(asset.avatar.url) }) 
```

assets.avatar.url 是一个位于 S3 上的回形针存储文件。在那里。它是公开的。

但是我不断收到带有 url 的 Errno::ENOENT (No such file or directory) ......这很有效！

我可能在这里遗漏了一些简单的东西。有人有想法么？

** 编辑：已解决 **

我使用了 open-uri，然后只使用了 open()。它仍然下载到服务器，但至少它可以工作。而且视觉上看起来更简单。=)

这是修复：

```
require 'open-uri'
response = RestClient.post("#{BASE_URL}/processImage?language=#{LANGUAGE}&exportFormat=txt", :upload => { :file => open(asset.avatar.url) }) 
```

Open-uri 是 ruby​​ 的一部分，因此您不需要安装 gem（即：rest-client），只需在您的代码中使用它即可。

我以为我需要一个 .read 在那里的某个地方，但没有它*似乎*可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:58:07.893

在使用 RestClient 发布之前，您需要下载文件/内容。File.new 将文件路径作为参数，而不是 url。

# asp.net - Orchard 是否支持某种形式的配置转换？

> ID：14404080
> 
> 赞同：3
> 
> 时间：2013-01-18T17:13:47.073
> 
> 标签：asp.net, asp.net-mvc, web-config, orchardcms

定义环境特定配置和/或配置转换的“果园方式”是什么？是否可以像在任何其他 ASP.NET Web 应用程序中一样使用常规 Web.config 转换，或者 Orchard 是否有它自己的引擎？

（我在官方文档或野外都找不到关于这个主题的任何有用信息。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:41:01.433

完全有可能将该信息存储在 web.config 中，就像在任何其他 ASP.NET 应用程序中一样。在很多情况下，这是唯一可行的方法（例如，特定于环境的 IIS 设置等）。

您还可以通过编写自定义设置部分并将其附加到“站点”内容类型，将自定义设置存储在 Orchard 数据库中。如果您有一些数据要存储，这是首选方式，不必将其保存在 web.config 文件中（替代创建自定义配置部分）。

# java - hbase 可以嵌入到 java 应用程序中吗？

> ID：14404085
> 
> 赞同：4
> 
> 时间：2013-01-18T17:13:53.237
> 
> 标签：java, hadoop, hbase

我对这个大数据真的很陌生，我需要知道 hbase 是否可以嵌入到 java 应用程序中。

由于它是在 java 中开发的，可以将 hbase 作为库添加并进行操作吗？

如果是这样，任何人都可以提供一个简单的教程或示例代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T14:02:23.637

HBase 不运行嵌入式，它运行在 Hadoop 之上，它针对大数据和大量服务器。

它确实有一个 Java API，您可以使用它，例如 Charles Menguy 的回复

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T23:07:04.887

您绝对可以编写一个 Java 应用程序来使用 Hbase，主 Hbase 发行版中提供了一个 Java API。

您应该从[官方网站](http://hbase.apache.org/)获取最新版本并获取`hbase-0.xx.x.jar`可用于构建应用程序的 jar。如果你想查看 hbase 的类路径依赖关系，一旦你安装了 hbase，你就可以这样做`hbase classpath`，这应该会打印出你需要的 jar 列表。

您可能会在 Google 上找到很多 Java 应用程序执行 Hbase 操作的示例，但这里有一个通常操作的示例：

```
// get the hbase config
Configuration config = HBaseConfiguration.create();

// specify which table you want to use
HTable table = new HTable(config, "mytable");
// add a row to your table
Put p = new Put(Bytes.toBytes("myrow"));    
// specify the column family, column qualifier and column value
p.add(Bytes.toBytes("myfamily"), Bytes.toBytes("myqualifier"), Bytes.toBytes("myvalue"));
// commit to your table
table.put(p);

// define which row you want to get 
Get g = new Get(Bytes.toBytes("myrow"));
// get your row
Result r = table.get(g);
// choose what you want to extract from your row
byte[] value = r.getValue(Bytes.toBytes("myfamily"), Bytes.toBytes("myqualifier"));
// convert to a string
System.out.println("GET: " + Bytes.toString(value)); 

// do a scan operation
Scan s = new Scan();
s.addColumn(Bytes.toBytes("myfamily"), Bytes.toBytes("myqualifier"));
ResultScanner scanner = table.getScanner(s); 
```

# java - Spring Security 区分大小写

> ID：14404086
> 
> 赞同：0
> 
> 时间：2013-01-18T17:13:53.463
> 
> 标签：java, spring, spring-security

我的 MySql 数据库区分大小写，在休眠状态下一切正常，数据库中的表名与我的类相同。但是在 Spring Security 上，默认的身份验证效果不好，用小写而不是大写的表名的第一个字母来构建 SQL。有没有办法让spring security像hibernate一样理解大写？或者我是否需要构建自定义身份验证才能将表名更改为大写字母？

```
<!-- Session Factory Hibernate -->
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">

    <property name="packagesToScan" value="br.com.empresa.domain" />
    <property name="dataSource">
        <ref local="mySQLdataSource" />
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.hbm2ddl.auto">create-drop</prop>
            <!-- Novos geradores de ids recomendados pela documentação do hibernate -->
            <prop key="hibernate.id.new_generator_mappings">false</prop> 
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>

</bean>

<!-- Conexão com o Banco de Dados -->
<bean id="mySQLdataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">

    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/db" />    --> 
    <property name="username" value="root" />
    <property name="password" value="asd123456" />

</bean>

<!-- It is responsible for validating the user's credentials -->
<security:authentication-manager>

    <!-- It is responsible for providing credential validation to the AuthenticationManager -->
    <security:authentication-provider>
        <security:password-encoder ref="passwordEncoder" />
        <security:jdbc-user-service
            data-source-ref="mySQLdataSource" />
    </security:authentication-provider>

</security:authentication-manager>

<bean
    class="org.springframework.security.crypto.password.StandardPasswordEncoder"
    id="passwordEncoder" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:32:27.493

我想你使用**JdbcDaoImpl**（通过**jdbc-user-service**元素）。如果是这样，那么您可以为默认查询提供自己的 SQL。

```
<jdbc-user-service 
    users-by-username-query="select username, password, enabled from Users where username = ?" 
    authorities-by-username-query="select username, authority from Authorities where username = ?" 
/> 
```

# ios - pch 文件中的枚举？

> ID：14404088
> 
> 赞同：2
> 
> 时间：2013-01-18T17:14:03.563
> 
> 标签：ios, objective-c

我有这个代码的 pch 文件：

```
#import "ServerModel.h"

enum {
    SAVE = 1,
    REMOVE = 2,
    REMOVE_ALL = 3
};
typedef NSInteger RequestType; 
```

我正在尝试`RequestType`在 ServerModel.h 中使用，但编译器对我的枚举一无所知。我试图为我的枚举创建头文件并将这个文件导入 pch-file 但没有任何改变。

`#import`所以基本问题是：我不能在这个 pch 文件中编辑的文件中使用 .pch 文件中的枚举。

有没有办法处理这个问题？pch-file 是放枚举的好地方吗？

**升级版：**

我试图将所有这些枚举放在一个头文件中，并将`#import`该文件放在`#import`pch 文件中所有 s 的末尾，但它不起作用。但后来我把

`#import "Enums.h" // my file with enums`

在 pch 文件的开头，在所有其他`#import`s 之前，它正在工作。

如果有人能解释`#import`before 或 after some other的位置差异，我会很高兴`#import`。

**UPD2：**

我会尽量让它更清楚：

我有`Enums.h`枚举：

```
enum {
    SAVE = 1,
    REMOVE = 2,
    REMOVE_ALL = 3
};
typedef NSInteger RequestType; 
```

`MyProject-Prefix.pch`和：

```
#import "ServerModel.h"
#import "Enum.h" 
```

并`ServerModel.h`使用以下代码：

```
- (void)unlinkAccountWithRequestType:(RequestType)requestType; 
```

我收到一个错误：`Expected a type`在这种方法上。我已经清理了我的项目并得到了同样的错误。

当我`#import`像这样切换 s 时：

```
#import "Enums.h"
#import "ServerModel.h" 
```

万事皆安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:16:29.790

**案例1：**如果你这样导入

```
#import "ServerModel.h"
#import "Enums.h" 
```

然后编译器会在遇到语句`ServerModel.h`之前检查文件。在检查您时，它发现一个并说**WTF 是 RequestType??** 并在你的脸上抛出错误。`Enums.h``#import "ServerModel.h"``ServerModel.h``token` `RequestType`

 ****案例2：**如果你写这个

```
#import "Enums.h"
#import "ServerModel.h" 
```

然后编译器编译`Enums.h`成功，然后编译`ServerModel.h`，它再次找到 a`token` `RequestType`并说是的，我知道这是 a`typedef`中`NSInteger`定义的`Enums.h`。最后它愉快地继续前进。**

# facebook - 如何一次获取所有 Facebook 好友的 ID？

> ID：14404089
> 
> 赞同：2
> 
> 时间：2013-01-18T17:14:03.570
> 
> 标签：facebook, facebook-graph-api

早些时候，当我打开 graph.facebook.com 时，我可以在一个地方获得我所有朋友的 ID，但现在我正在重定向到另一个开发人员页面。

![在此处输入图像描述](../Images/139f1450722391136639d31059a4d100.png)

我想知道是否还有任何方法可以让我立即获得朋友的 ID。我知道该`graph.facebook.com/username`功能，但我想一次拥有所有功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:22:18.103

这是一个使用[facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)的示例，它将从您的应用程序中返回您所有朋友的 ID 号：

```
include_once('facebook-php-sdk/src/facebook.php');

$facebook = new Facebook(array(
  'appId'  => '<your_app_id>',
  'secret' => '<your_app_secret>',
));
$result = $facebook->api("/me/friends?limit=0");
$friends = array();
foreach ($result['data'] as $index => $friend) {
   $friends[] = $friend['id'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:31:33.163

路径`graph.facebook.com/[user id]?fields=friends.fields(id)`会得到你想要的。您只需确保发送适当的凭据。

我推荐你使用 Facebook 的 Graph Explorer 工具。选择你想要的东西很方便。

> `http://developers.facebook.com/tools/explorer/?method=GET&path=511552816%3Ffields%3Did%2Cname`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-29T08:56:27.740

路径`graph.facebook.com/[ tools/explorer/]?fields=friends.fields(511552816%3Ffields%3Did%2C)`会得到你想要的。您只需确保发送适当的凭据。

我推荐你使用 Facebook 的 Graph Explorer 工具。选择你想要的东西很方便。

[http://developers.facebook.com/tools/explorer/?method=GET&path=511552816%3Ffields%3Did%2Cname](http://developers.facebook.com/tools/explorer/?method=GET&path=511552816%3Ffields%3Did%2Cname)

# svn - 合并时svn树冲突

> ID：14404091
> 
> 赞同：2
> 
> 时间：2013-01-18T17:14:08.323
> 
> 标签：svn, merge, tree-conflict

> **可能重复：**
> [为什么我在颠覆中遇到树冲突？](https://stackoverflow.com/questions/738367/why-am-i-getting-tree-conflicts-in-subversion)

我正在尝试将位于“main/dir1/dir2/somefile.txt”中的文件从主干合并到分支中。但是分支中不存在文件夹“dir1/dir2”，因此我遇到了树冲突。我该如何解决这个问题，以便在分支上自动创建 dir1/dir2/somefile.txt？

目前我正在使用以下命令合并当前工作目录中的所有更改：

```
svn merge -r 254933:254935 https://svnrepo.de/analytics/trunk my-analytics-dir
 !     C javasource/com/gsi/webstore/platform/component/analytics/dbmigrate/data
 >   local delete, incoming edit upon merge 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:23:18.963

`svn resolve --accept theirs-full -R javasource/com/gsi/webstore/platform/component/analytics/dbmigrate/data`

# sql - 月份分组 - 获取每个月的计数

> ID：14404096
> 
> 赞同：1
> 
> 时间：2013-01-18T17:14:32.610
> 
> 标签：sql, oracle, oracle10g

希望获得每个月的记录数。但是，几个月没有记录，因此不返回任何行。我怎样才能得到那个月的 0 计数？

```
select months, count(rowid) as counter from (
    select  to_char(date_entered, 'MM') as months
    from mydatatable
    where to_char(date_entered, 'yyyy') = '2011'
     )
group by months
order by months 
```

结果：

```
Month    Count
01       32
03       12
04       11
06       10
07       222
08       32 
```

甚至尝试使用 subq`select 1,2,3,4,5,6,7,8,9,10,11,12 from dual`并无法使其正常工作。还没有枢轴功能... ;(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:52:43.223

您最好将 01 到 12 存储在表中，但一般方法是使用左连接：

```
Select
  m.Mo,
  Count(t.dateentered)
From (
    Select '01' As Mo From Dual Union All
    Select '02' From Dual Union All
    Select '03' From Dual Union All
    Select '04' From Dual Union All
    Select '05' From Dual Union All
    Select '06' From Dual Union All
    Select '07' From Dual Union All
    Select '08' From Dual Union All
    Select '09' From Dual Union All
    Select '10' From Dual Union All
    Select '11' From Dual Union All
    Select '12' From Dual
  ) m
    Left Outer Join
  mydatatable t
    On
      m.Mo = to_char(t.dateentered, 'MM') And 
      t.dateentered >= DATE'2011-01-01' And
      t.dateentered < DATE'2012-01-01'
Group By
  m.Mo
Order By
  m.Mo 
```

更新使用了一种对索引更友好的方式来限制年份。

[http://sqlfiddle.com/#!4/68085/10](http://sqlfiddle.com/#!4/68085/10)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:41:07.427

您需要构建自己的 12 行月“表”并执行左外连接。从您的问题中获取查询并使其成为提供数据的内联视图。

```
SELECT m.month "Month", nvl(md.data, 0) "Count"
FROM
(
   select '01' month from dual union all
   select '02' month from dual union all
   select '03' month from dual union all
   select '04' month from dual union all
   select '05' month from dual union all
   select '06' month from dual union all
   select '07' month from dual union all
   select '08' month from dual union all
   select '09' month from dual union all
   select '10' month from dual union all
   select '11' month from dual union all
   select '12' month from dual
) m LEFT OUTER JOIN (
   /* Your Query Here */
) md ON m.month = md.month
ORDER BY m.month; 
```

结果应该是这样的：

```
Month       Count
------ ----------
01             32
02              0
03             12
04             11
05              0
06             10
07            222
08             32
09              0
10              0
11              0
12              0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:45:15.653

[`connect by`您可以使用分层查询](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#SQLRF55330)的语法构建一个包含月份数字的虚拟表，然后左连接到您的数据：

```
with months as (
    select to_char(level, 'FM00') as month
    from dual
    connect by level <= 12
)
select m.month,
    count(mdt.rowid) as counter
from months m
left join mydatatable mdt
    on mdt.date_entered >= to_date('01/' || m.month || '/2011', 'DD/MM/YYYY')
    and mdt.date_entered <
        add_months(to_date('01/' || m.month || '/2011', 'DD/MM/YYYY'), 1)
group by m.month
order by m.month; 
```

使用一些虚构的数据：

```
create table mydatatable (date_entered date, dummy number);
insert into mydatatable values (date '2011-06-02', 0);
insert into mydatatable values (date '2011-07-01', 0);
insert into mydatatable values (date '2011-10-01', 0);
insert into mydatatable values (date '2011-10-31', 0);
insert into mydatatable values (date '2011-11-01', 0); 
```

...这给出了：

```
MONTH COUNTER
----- -------
01          0 
02          0 
03          0 
04          0 
05          0 
06          1 
07          1 
08          0 
09          0 
10          2 
11          1 
12          0 
```

或者[SQL Fiddle](http://sqlfiddle.com/#!4/0b21f/1)，因为这似乎是这些天要做的事情......

* * *

通常最好避免这样的事情，`to_char(date_entered, 'yyyy') = '2011'`因为您将该`to_char()`函数应用于表中的每一行，并且如果该列上有索引，则不会使用它。而是尝试转换您的过滤器以匹配列的数据类型，例如`date_entered > date '2011-01-01' and date_entered < date '2012-01-01'`. 在这种情况下，无论如何都可以在连接条件中处理它 - 我将每个月转换为 2011 年的日期范围，并且只查找该月份范围内的匹配记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T19:21:59.050

这很奇怪......也许我误解了问题或数据......？在您的问题中添加表格和数据总是一个好主意。您应该使用 count 获取所有月份的所有数据。我试过这个：

```
SELECT * FROM stack_test
/
CURR_MONTH  VAL
---------------
01          10
02          15
03          20
04  
05 
```

如您所见，第 4 个月和第 5 个月没有值：

```
 SELECT months, COUNT(rowid) counter 
   FROM
    (
     SELECT curr_month months
       FROM stack_test
    )
 GROUP BY months
 ORDER BY months
 /
 MONTHS COUNTER
 -------------------
 01           1
 02           1
 03           1
 04           1
 05           1 
```

另一个例子：第 2 个月没有任何价值，但我当然仍然得到计数。也许你需要总结你的价值观......：

```
SELECT mth, SUM(val) total_sum, Count(*) total_cnt 
  FROM 
  (
  SELECT mth, (CASE WHEN Mth = '01' THEN '10' ELSE '0' END) val
    FROM
    ( -- Annual table - replace 2 with 12 in Add_Months for the whole year -- 
     SELECT Trunc(SYSDATE,'Y')+Level-1 Curr_Year_By_Date
        , To_char(Trunc(SYSDATE, 'MM') + Rownum-1, 'MM' ) Mth
     FROM dual
    CONNECT BY Level <= Add_Months(Trunc(SYSDATE,'Y'),2)-Trunc(SYSDATE,'Y')
   )
  )
 GROUP BY mth
 ORDER BY 1
 /
 MTH    TOTAL_SUM   TOTAL_CNT
 -------------------------------------
 01         310         31
 02         0           28 
```

# javascript - 将十进制数（作为字符串）截断为固定位数

> ID：14404099
> 
> 赞同：5
> 
> 时间：2013-01-18T17:14:39.367
> 
> 标签：javascript, string-formatting, number-formatting

我想将数字（以字符串形式给出）截断为固定的小数位数。数字可以是负数（带减号）、正数（无符号）。我宁愿正确地对数字进行四舍五入并保持尾随零。我想要相同的小数位数，不管整数有多长。这些数字将作为字符串存储回来。

例如：

```
140.234234234 -> 140.234
1.123123 -> 1.123
-12.789789 -> -12.790 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T17:18:48.483

首先将它们解析为浮点数，然后使用以下格式进行格式化`toFixed`：

```
var nums = [
    "140.234234234", // -> 140.234
    "1.123123", // -> 1.123
    "-12.789789" // -> -12.790
];

nums.forEach(function(n) {
    console.log(parseFloat(n).toFixed(3));
}); 
```

[http://codepen.io/anon/pen/IvxmA](http://codepen.io/anon/pen/IvxmA)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:17:19.730

通过使用，任何数字都可以显示为固定小数位字符串`.toFixed`：

```
var num = 140.234234234;
var fixedDecimalPlace = num.toFixed(3); // is "140.234" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:19:05.770

```
function truncate( numberString, trunk ) {
    var onpoint = numberString.split('.',2);
    var numberStringTruncated = numberString;
    if (onpoint.length > 1) {
        numberStringTruncated = onpoint[0] + '.' + onpoint[1].substring(0,trunk);
    }
    return numberStringTruncated;
} 
```

这不考虑舍入或填充。正如其他答案所建议的那样，您应该使用 parseFloat 后跟 toFixed

# javascript - 在 IE 中打开弹出窗口的脱机 HTML 文件

> ID：14404109
> 
> 赞同：1
> 
> 时间：2013-01-18T17:15:28.880
> 
> 标签：javascript, html, internet-explorer

我一直在制作 HTML 格式的报告。该页面是自包含的（带有来自数据 url 的图像），因为单个文件由技术较少的用户更好地处理（例如通过邮件发送给其他人）。

该报告由一个带有链接的基本页面组成，单击这些链接将打开一个包含一组图像的不同选项卡。

排除一些令人讨厌的细微差异，除了 Internet Explorer（我用 IE 9 测试过）之外，当且仅当从本地文件系统而不是从服务器浏览文件时，所有浏览器都按预期工作。

保存文件时，IE 自动添加了“web 标记”，并启用了 Javascript，但`window.open`会引发错误。

我还注意到页面文档类型已被 IE 在保存的版本中更改；原本是

```
<!DOCTYPE html> 
```

现在是

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0035)http://raksy.dyndns.org/report.html -->
<!DOCTYPE html> 
```

有什么方法可以让本地 HTML 页面在 IE 中打开新标签页？

# c# - 将 TextBlock 的前景设置为 LinearGradientBrush 会导致不需要的行为

> ID：14404113
> 
> 赞同：4
> 
> 时间：2013-01-18T17:15:42.587
> 
> 标签：c#, .net, wpf

我`TextBlock`在我的`DataTemplate`. 似乎`LinearGradientBrush`我用于该`Foreground`属性的不是在字体上一致地绘制包含“descenders”的单词的渐变，例如示例图片中单词 Vampire 中的小写“p”。

我尝试将 设置`LineHeight`为与`FontSize`;相同 不用找了。
我尝试设置`Height`; `TextBlock`颜色没有变化，但在底部增加了高度`TextBlock`。

有没有其他人处理过这个问题并找到了解决方案？我尝试在 Google 和 StackOverflow 上搜索答案，但到目前为止我一无所获。

**编辑：**问题是渐变没有应用于每个文本框，因为下降增加了字体的高度。`Vampire`看看单词和中的小写“a”之间的区别`Brave`，你就会明白我的意思。

![详细的超酷示例图片](../Images/de962d352ea570a1d442b0016111cbb0.png)

# `TextBlock`XAML

```
<TextBlock Text="{Binding Title}" FontWeight="Bold" FontStyle="Italic" 
           FontSize="20" Padding="3" LineHeight="20">
  <TextBlock.Foreground>
    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1" >
      <GradientStopCollection>
        <GradientStop Color="White" Offset="0.2"/>
        <GradientStop Color="AliceBlue" Offset="0.4"/>
        <GradientStop Color="#6AB0EE" Offset="0.6"/>
        <GradientStop Color="DarkOrange" Offset="0.8"/>
      </GradientStopCollection>
    </LinearGradientBrush>
  </TextBlock.Foreground>
</TextBlock> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:26:46.110

尝试`MappingMode`像这样设置属性：

```
<LinearGradientBrush MappingMode="Absolute" StartPoint="0,0" EndPoint="0,1" > 
```

# c - 总线错误：在 c 中扫描地址空间时出现 10

> ID：14404114
> 
> 赞同：0
> 
> 时间：2013-01-18T17:15:42.453
> 
> 标签：c, memory, bus-error

我正在尝试扫描地址空间以查找具有读/写权限的内存块。每个页面都检查一个地址是可以接受的，因为每个页面都具有相同的权限。我知道我应该得到 Segmentation Fault: 11 当我试图写入一块我不应该能够的内存时。当我试图访问更高的地址时会发生这种情况，但是当我在较低的部分时，比如 0x00000100，我得到总线错误：10。

注意：代码使用 -m32 标志编译，因此它模拟 32 位机器。

另请注意：在调用此函数之前，chunk_list 的内存已被分配。

我复制了下面的代码：

```
#include <signal.h>
#include <stdio.h>
#include <unistd.h>
#include "memchunk.h" 

int get_mem_layout (struct memchunk *chunk_list, int size)
{
//grab the page size
long page = sysconf(_SC_PAGESIZE);
printf("The page size for this system is %ld bytes\n", page);

//page size is 4069 bytes

//test printing the number of words on a page
long words = page / 4;  
printf("Which works out to %ld words per page\n", words);

//works out to 1024 words a page
//1024 = 0x400

//create the addy pointer
    //start will be used after bus error: 10 is solved
void *start;
char * currAddy;
currAddy = (char*)0x01000000;

//someplace to store the addy to write to
//char * testWrite;

//looping through the first size pages
int i;
for(i = 0; i < size; i++){

    //chunk start - wrong addy being written just testing
    chunk_list[i].start = currAddy;
    printf("addy is %p\n",currAddy);
    sleep(1);

    //try and write to the current addy
    //testWrite = currAddy;
    //*testWrite = 'a';

    *currAddy = '1';

    //+= 0x400 to get to next page
    currAddy += 0x400;
}

//while loop here for all the addys - not there yet because still dealing with bus error: 10

return 0;

} 
```

任何帮助将不胜感激。我还在代码中注释掉了一些其他尝试，仍然会产生总线错误：10 在内存空间的下部。

编辑：我将使用信号处理段错误。我知道如何处理段错误，那么有没有办法处理总线错误：10 也使用信号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:39:02.687

读取*或*写入未映射的内存应该会导致总线故障。要发现内存是否存在，请为 SEGFAULT 安装一个处理程序以做出相应的反应。

在 Linux SE（安全增强）进程中，程序部分在随机位置加载，以阻止病毒依赖稳定地址。

在大多数虚拟内存系统中，非映射空间通常从地址零开始，因此尝试取消引用 NULL 指针或基于 NULL 指针的结构会导致异常。在 1980 年代，空白空间通常为 64K 到 256K。在现代架构上，16M 是检测基于 NULL 的访问的合理选择。

在许多虚拟内存系统上，有一个系统调用来获取每个进程映射的内存位置。在 Linux 上，检查`/proc/self/maps`.

# sql - SQL SELECT 语句，仅当两者之间的日期在/不在工作日表中时才使用 DATEDIFF

> ID：14404115
> 
> 赞同：0
> 
> 时间：2013-01-18T17:15:46.870
> 
> 标签：sql, select, sql-server-2008-r2

我是 SQL 的新手，马上开始，但慢慢地弄明白了。我搜索但找不到任何对我有意义的东西。就像我说的，我是新人，对不起。如果合适，请使用 SQL Server 2008 R2。

我有一张结构像这样的表

```
AccountNumber  StartDate                EndDate
  123456       2012-05-07 12:55:55.000  2012-05-09 09:53:55.000
  789012       2012-10-17 13:55:55.000  2012-11-02 10:53:55.000
  345678       2012-11-13 14:55:55.000  2012-12-14 11:53:55.000 
```

我还有一个结构如下的工作日表

```
Date        IsWorkday  DayOfWeek
2012-01-01     N          1
2012-01-02     N          2
2012-01-03     Y          3
2012-01-04     Y          4
2012-01-05     Y          5
2012-01-06     Y          6

Etc. through 2020-12-31 
```

我没有设置表格，也无法以任何方式更改它们。我试过了，我不会被允许的。我什至不能直接给数据库管理员发邮件。整洁的。

我需要选择某些我可以处理的列，但我需要在最后一列计算 StartDate 和 EndDate 值之间的天数，但前提是两者之间的天数在工作日表中IsWorkday 的 Y 值。我希望这是有道理的。如果在当前结构下根本无法做到或非常麻烦，那么知道这也很好（所以我可以推动更好的工作日/非工作日表或其他东西）。任何帮助将不胜感激，并且可能会换取我的长子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:29:28.223

尝试这个

```
SELECT X.*, X2.DayCnt 
FROM AccountTable X
INNER JOIN 
(
    SELECT a.accountnumber,a.StartDate, b.EndDate, Count(b.Date) DayCnt 
    FROM AccountTable a
    LEFT OUTER JOIN workdays w 
        ON a.StartDate >= w.date and 
        a.EndDate <= w.date and 
        IsWorkday = 'Y'
    GROUP BY a.accountnumber,a.StartDate, b.EndDate
) X2 
ON X.accountnumber = X2.accountnumber and
X.StartDate = X2.StartDate and X.EndDate = X2.EndDate 
```

# xml - 在 XML 文件中，“标题”行信息的作用是什么

> ID：14404118
> 
> 赞同：1
> 
> 时间：2013-01-18T17:15:52.923
> 
> 标签：xml, xsd, xsi

在我正在研究的 XML 文件的顶部，我在开头看到：

```
<selfModel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:noNamespaceSchemaLocation="../../dtd/selfmodel.xsd"> 
```

然后是 XML 的实际内容：

```
 <plan id = "offer" default="true">
     <description>Automatically generated from ACELandic specification</description>
        <states> .. etc 
```

`xmlns:xsi=`和东西的目的是`xsi:noNamespaceSchemaLocation`什么？编译文件时是否在线搜索/验证？这就是我通过 URL www.w3.org/2001/XMLSchema-instance 假设的，但这似乎非常低效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:39:15.603

那不是标题。它只是文档的根节点。

您在该元素中看到的“xmlns:xsi”属性是命名空间声明。命名空间需要在使用前声明。所以它们经常被声明在文档的顶部。只需要在使用前声明它们。

尽管名称空间名称（名称空间属性中的值）通常采用 URL 的形式，但它们不一定是 Internet 上资源的位置。它们只是唯一的名称。特别是，它们将始终采用 URI 的形式，这种语法是“URL”的超集，但只能用作唯一标识符，而不是 Internet 上资源的位置。

作为“xsi:schemaLocation”和“xsi:noNamespaceSchemaLocation”*的*值给出的 URI是可用于验证文档的模式的位置。它们不是必需的，但很高兴拥有它们。并非所有 XML 解析器都会关注它们。特别是，您可能没有进行 XML 验证，或者可能不希望在验证期间使用 Internet。

# mysql - 如何调试慢的mysql

> ID：14404122
> 
> 赞同：1
> 
> 时间：2013-01-18T17:16:01.173
> 
> 标签：mysql

我有一个 SQL 查询需要 7 秒才能在一台计算机上运行，​​但在另一台计算机上（相同的硬件，数据库已使用 mysqldump 复制，所以是相同的），相同的查询运行超过 2000 秒。

我如何找出这是为什么？我可以在网上找到的关于调试慢 mysql 的所有建议似乎都归结为“查找慢查询”。这对我没有帮助。Show processlist 没有显示任何其他正在运行的查询，那么为什么在一台计算机上执行此查询的时间比另一台计算机长数百倍呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:32:43.193

我的理解是您的 SQL Server 在两种情况下都是相同的。您的意思是，从 client1 执行查询 x 需要几秒钟；而从其他客户端 client2 则需要超过 2000 秒。

我觉得问题是client2和您的数据库服务器之间的网络。尝试在这两个服务器之间 ping 通。它应该给你一些提示。您提到服务器未显示正在执行的查询这一事实也支持了这一理论。

如果在这两种情况下 SQL Server 不同；而索引等是相同的；那么问题是很长时间没有在client2上执行ANALYZE。

# assembly - 如何阅读 PPC 操作码“extrwi”

> ID：14404124
> 
> 赞同：2
> 
> 时间：2013-01-18T17:16:07.727
> 
> 标签：assembly, powerpc

我知道 rlwinm 对其值进行了调整是一种助记符，但我想知道实际字母在阅读时代表什么。例如，rlwinm 表示立即向左旋转单词，然后使用掩码进行 aNd 旋转。如果我知道它代表什么，我就能更容易记住它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:57:58.313

[立即提取并右对齐](http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.aixassem/doc/alangref/fixed_rotate_shift32.htm)。

# python - 更简单的json AttributeError：'unicode'对象没有属性'get'

> ID：14404127
> 
> 赞同：1
> 
> 时间：2013-01-18T17:16:13.867
> 
> 标签：python

很多类似的问题，但我似乎可以让最简单的案例起作用。

代码是：

```
retval = urllib2.Request(callstr)
opener = urllib2.build_opener()
f = opener.open(retval)
json = simplejson.load(f)
for item in json:
    print item.get("ExtActionResponse.info") 
```

json 对象似乎已正确填充。

```
 json
     ExtActionRepsonse  <dict ox7122345...>
        info            u"345167273\n1234:56768"    <----- This is the data I'm expecting
        resultCode      u"0"
        resultStr       u"Success"
        ...etc... 
```

但它在 get item 调用中窒息。

```
 print item.get("ExtActionResponse.info") 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:21:55.807

..... 什么？

```
print json['ExtActionResponse']['info'] 
```

# c# - 同时的前置增量和后置增量或混合前置后置增量

> ID：14404128
> 
> 赞同：3
> 
> 时间：2013-01-18T17:16:20.683
> 
> 标签：c#

> **可能重复：**
> [C# 中的前后递增/递减运算符](https://stackoverflow.com/questions/174153/pre-and-post-increment-decrement-operators-in-c-sharp)

考虑以下简单的片段：

```
int x = 0;
int y = ++x + 1; // forks fine, gives y 2 (no doubt :) )

int x = 0;
int y = ++x++; // Error: The operand of an increment or decrement operator must be a variable, property or indexer. 
```

很明显，在同一个语句中混合前/后增量或减量对于编译器来说不是一个理想的特性。

但

1.  不，事实上，`++x++`一样`++x + 1`吗？即使考虑到 Eric Lippert[在这里](https://stackoverflow.com/questions/3346450/what-is-the-difference-between-i-and-i)发现的所有微妙之处。它们都是关于行为而不是与操作数的关系，以及 CSC 输出的消息。
2.  是不是，事实上，`x`是一个变量？就像，`++x + 1`构建得很好，操作数是相同的`x`。并且它类似地在预增量运算符 ++ 上运行。所以这仍然是一个有用的限制，它的编译器错误似乎有点奇怪。输出诸如“不能同时应用前置增量和后置增量操作符”不是更有意义吗？
3.  你们知道这个限制的任何隐藏的编译器视角原因，而不是代码可用性的原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T17:24:55.560

(x++) 或 (++x) 的结果实际上不是变量。这是一个值，所以：

```
int y = (++x) + 1;
// evaluates to
int y = (1) + 1; 
```

但

```
int y = ++x++;
// is equivalent to 
int y = ++(x++);
// evaluates to
int y = ++(0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T17:19:41.330

考虑一下：

```
foo()++; 
```

where`foo()`返回一个 int。C# 不会喜欢这样，因为它保护您免于做一些您可能不打算做的事情： 的返回值`foo()`会增加，但随后会被丢弃。

这就是这条规则的全部内容：`++`运算符改变一个值，因此您需要能够通过名称访问结果值。所以它必须存储在一个变量中（“绑定”到一个名称）。它不能应用于没有名称的临时值。

C# 编译器有一些额外的魔力，它可以让你在属性上使用 ++：

```
var result = obj.Prop++; 
```

它扩展到：

```
var v = obj.Prop;
var temp = v++;
obj.Prop = v;

var result = temp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T17:18:31.600

1.  不，事实上，`++x++`一样`++x + 1`吗？

不，它们不是，您可以执行后增量的预增量，而不是同时执行两者

阅读本文：[C# 中的前后递增/递减运算符](https://stackoverflow.com/questions/174153/pre-and-post-increment-decrement-operators-in-c-sharp)

# c - 如何创建指针数组？

> ID：14404132
> 
> 赞同：-2
> 
> 时间：2013-01-18T17:16:39.747
> 
> 标签：c

在我的 C 程序中，我使用该`strtok()`命令循环遍历 a 中的所有标记`string`。在每次迭代中，它都会给我一个指向每个标记的指针。

如何将指针存储在数组中，使数组就像`argv`主函数中的参数并且可以在 execvp 命令中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:19:06.253

```
char *array[MAX_POINTERS];
char *str;

array[0] = str; 
```

如果您的 str 指针将丢失它指向的内存或其内容将更改并且您想要获取它的副本，您可以使用`strdup`

```
array[0] = strdup(str); 
```

然后当它`array[0]`变得无用时，你必须释放它

```
free(array[0]); 
```

注意：可以`array`在`execvp`命令中使用；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:38:51.970

如果你知道你会得到多少 tok，你可以通过创建一个指向字符串的指针向量来做到这一点。否则，您将需要使用动态结构。

如果您知道大小，则可以使用以下方法：

```
char **mytokens = malloc(MAXSIZE*sizeof(char*)); /*Allocation of a vector of pointers to strings*/

while(there_are_tokens && counter < MAXSIZE){
 mytokens[counter] = strtok(NULL,mystring);      /*Assuming you did strtok with delims before*/
 counter++;
} 
```

对于动态实现，您应该阅读一些文档/教程（[1](http://www.cs.cf.ac.uk/Dave/C/node11.html) / [2](http://en.wikipedia.org/wiki/Linked_list) / [3](http://en.wikipedia.org/wiki/Struct_%28C_programming_language%29)）

但是像这样的结构将是我这样做的方式：

```
typedef struct _tokens{
  char *token;
  struct _tokens *next;
}tokens; 
```

希望这可以帮助。

# linq - EntityFramework 对子集进行排序

> ID：14404134
> 
> 赞同：2
> 
> 时间：2013-01-18T17:16:44.057
> 
> 标签：linq, entity-framework, linq-to-entities

我有一个消息列表。在每条消息中，都有一个响应类型列表。我需要以这样一种方式提取查询，即消息按 ID 排序，响应类型也按 ID 排序。它们不是按数据库中的 ID 排序的。

```
messageResponse.Messages = (from m in db.Messages.Include("ResponseType")
    .SomeMagicSubSortThing("ResponseType.ID")
    select m).OrderBy(m1 => m1.ID).ToList<Message>(); 
```

这应该导致：

```
Message   ID    Col1    Col2
-- ResponseType  ID    Col1    Col2 
```

...像这样：

```
1     MessageA    MessageB
--  1   ResponseTypeC    ResponseTypeD
--  2   ResponseTypeQ    ResponseTypeR
--  3   ResponseTypeX    ResponseTypeZ
--  4   ResponseTypeL    ResponseTypeM

2     MessageE    MessageF
--  1   ResponseTypeG    ResponseTypeH
--  2   ResponseTypeI    ResponseTypeJ
--  3   ResponseTypeB    ResponseTypeS
--  4   ResponseTypeL    ResponseTypeC 
```

现在，我可以按顺序获取消息，但响应类型的顺序与数据库的顺序无关。如何对响应类型进行子排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:32:34.987

我认为您正在寻找的是 ThenBy()：

```
messageResponse.Messages = (from m in db.Messages.Include("ResponseType")
.SomeMagicSubSortThing("ResponseType.ID")
select m).OrderBy(m1 => m1.ID).ThenBy(n=>n.ResponseType.ID).ToList<Message>() 
```

**更新**

在您的实体中，您可以简单地定义一个计算属性，例如：

```
class Message {
   public ICollection<Response> Responses {get; set;}
   public ICollection<Response> SoretedResponses {
       get { return this.Responses.OrderBy(n=>n.Response); }
   }
} 
```

还是我仍然错过了这个问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:43:01.870

EF 不能很好地做到这一点，但你有两个选择：

* * *

`Select`1)在 Linq to Entities 查询中使用子句：

```
var messages = db.Messages
  .OrderBy( o => o.ID )
  .Select( o => new
    {
      Message = o,
      ResponseTypes = o.ResponseTypes.OrderBy( x => x.ID ),
    }
  )
  .ToList()
; 
```

这是让 EF 对数据库服务器上的子属性进行排序的唯一方法。
您的输出`List`将包含匿名类型的元素`Select`

* * *

2) 在输出上使用 Linq to Objects 对以下`List<Message>`的集合进行排序`ResponseType`：

```
List<Message> messages = db.Messages
  .Include( o => o.ResponseTypes )
  .OrderBy( o => o.ID )
  .ToList()
;

foreach( var message in messages )
{
  message.ResponseTypes = message.ResponseTypes.OrderBy( x => x.ID ).ToList();
} 
```

这会从数据库中获取所有记录，然后在内存中对它们进行排序。
输出列表将包含`Message`填充了导航属性的类型元素。

# c# - 是否可以在不使用 OrderBy 的情况下将 IEnumerable 转换为 IOrderedEnumerable？

> ID：14404139
> 
> 赞同：36
> 
> 时间：2013-01-18T17:16:59.367
> 
> 标签：c#, linq, ienumerable, iorderedenumerable

`SortMethod`假设有一种扩展方法可以根据枚举指定的几种排序类型（即按各种属性排序）对 IQueryable 进行排序。

```
public static IOrderedEnumerable<AClass> OrderByX(this IQueryable<AClass> values,
    SortMethod? sortMethod)
{ 
    IOrderedEnumerable<AClass> queryRes = null;
    switch (sortMethod)
    {
        case SortMethod.Method1:
            queryRes = values.OrderBy(a => a.Property1);
            break;
        case SortMethod.Method2:
            queryRes = values.OrderBy(a => a.Property2);
            break;
        case null:
            queryRes = values.OrderBy(a => a.DefaultProperty);
            break;
        default:
            queryRes = values.OrderBy(a => a.DefaultProperty);
            break;
    }
    return queryRes;
} 
```

在 where `sortMethod`is的情况下`null`（即指定我不关心值的顺序），有没有一种方法可以代替某些默认属性进行排序，而只是将`IEnumerator`值作为“有序”传递而没有必须执行实际排序？

我希望能够调用这个扩展，然后可能执行一些额外`ThenBy`的命令。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-18T17:27:45.750

对于默认情况，您需要做的就是：

```
queryRes = values.OrderBy(a => 1); 
```

这实际上是一个 noop 排序。因为 OrderBy 执行稳定的排序，所以在所选对象相等的情况下将保持原始顺序。请注意，由于这是一个`IQueryable`而不是一个`IEnumerable`，因此查询提供程序可能无法执行稳定的排序。在这种情况下，您需要知道保持顺序是否重要，或者是否适合只说“我不在乎结果是什么顺序，只要我可以调用`ThenBy`结果即可）。

另一个允许您避免实际排序的选项是创建自己的`IOrderedEnumerable`实现：

```
public class NoopOrder<T> : IOrderedEnumerable<T>
{
    private IQueryable<T> source;
    public NoopOrder(IQueryable<T> source)
    {
        this.source = source;
    }

    public IOrderedEnumerable<T> CreateOrderedEnumerable<TKey>(Func<T, TKey> keySelector, IComparer<TKey> comparer, bool descending)
    {
        if (descending)
        {
            return source.OrderByDescending(keySelector, comparer);
        }
        else
        {
            return source.OrderBy(keySelector, comparer);
        }
    }

    public IEnumerator<T> GetEnumerator()
    {
        return source.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return source.GetEnumerator();
    }
} 
```

这样您的查询可以是：

```
queryRes = new NoopOrder<AClass>(values); 
```

请注意，上述类的结果是，如果调用该类`ThenBy`将`ThenBy`有效地进行顶级排序。它实际上是把后续`ThenBy`变成了一个`OrderBy`电话。（这应该不足为奇；`ThenBy`将调用该`CreateOrderedEnumerable`方法，并且在其中此代码正在调用`OrderBy`，基本上将其`ThenBy`转换为`OrderBy`。从概念排序的角度来看，这是一种说法，即“此序列中的所有项目都是在这种人眼中是相等的，但是如果您指定相等的对象应该被其他东西打破，那么就这样做。

“无操作排序”的另一种思考方式是它根据输入序列的索引对项目进行排序。这意味着项目并非全部“相等”，这意味着订单输入序列*将*是输出序列的最终订单，并且由于输入序列中的每个项目总是大于它之前的项目，因此添加了额外的“tiebreaker” " 比较将无济于事，使任何后续`ThenBy`调用都毫无意义。如果需要这种行为，它甚至比前一种更容易实现：

```
public class NoopOrder<T> : IOrderedEnumerable<T>
{
    private IQueryable<T> source;
    public NoopOrder(IQueryable<T> source)
    {
        this.source = source;
    }

    public IOrderedEnumerable<T> CreateOrderedEnumerable<TKey>(Func<T, TKey> keySelector, IComparer<TKey> comparer, bool descending)
    {
        return new NoopOrder<T>(source);
    }

    public IEnumerator<T> GetEnumerator()
    {
        return source.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return source.GetEnumerator();
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T17:26:58.820

如果您始终返回相同的索引值，您将获得一个保留原始列表顺序的 IOrderedEnumerable：

```
case null:
     queryRes = values.OrderBy(a => 1);
     break; 
```

顺便说一句，我认为这不是正确的做法。您将获得一个本应订购但实际上并非如此的集合。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T18:20:12.190

归根结底，IOrderedEnumerable 的存在只是为 OrderBy()/ThenBy() 方法提供语法结构，防止您尝试使用 ThenBy() 启动排序子句。过程。它并非旨在将集合标识为已排序的“标记”，除非它实际上是由 OrderBy() 排序的。所以，答案是，如果排序方法为 null 应该表明可枚举是某种“默认顺序”，那么您应该指定该默认顺序（就像您当前的实现一样）。说可枚举是有序的，而实际上它不是，这是不诚实的，即使通过不指定 SortingMethod，您推断它是“无序的”并且不关心实际的顺序。

尝试使用接口简单地将集合标记为已排序所固有的“问题”是，该过程不仅仅是简单的排序。通过执行排序方法链，例如`myCollection.OrderBy().ThenBy().ThenByDescending()`，您实际上并没有在每次调用时对集合进行排序；反正还没有。相反，您正在定义名为 OrderedEnumerable 的“迭代器”类的行为，它将使用您在链中定义的投影和比较来在您需要实际排序元素时执行排序。

Servy 的回答指出 OrderBy(x=>1) 是一个 noop 并且*应该*从 SQL 提供程序中进行优化忽略了这样一个事实，即针对 Enumerable 进行的这个调用仍然会做很多工作，并且大多数 SQL 提供程序在事实上不要*优化*这种调用；在大多数 Linq 提供程序中，OrderBy(x=>1) 将生成一个带有“ORDER BY 1”子句的查询，这不仅会强制 SQL 提供程序执行自己的排序，实际上还会导致顺序发生变化，因为在 T-SQL 中至少“ORDER BY 1”意味着按选择列表的第一列排序。

# cocoa - 偏移光标 Y 位置 NSTextField 可可

> ID：14404142
> 
> 赞同：1
> 
> 时间：2013-01-18T17:17:08.033
> 
> 标签：cocoa, cursor, offset, nstextfield

我在一个小区域中使用 NSTextField 并且闪烁的光标未定位在我想要的位置，文本在正确的位置但光标太高（见图）。有什么办法可以抵消它，让它看起来更低吗？

在此先感谢，本。

![例子](../Images/73902b069e15b3fb28ec3fb48cb5f3e5.png)

**编辑：** 这是我创建文本字段的代码：

```
text = [[TextField alloc]initWithFrame:NSMakeRect(38, 8, self.frame.size.width-97, self.frame.size.height-8)];
[text setBackgroundColor:[NSColor clearColor]];
[text setTextColor:[NSColor grayColor]];
[text setFocusRingType:1];
[text setFont:[NSFont fontWithName:@"Avenir" size:14]];

[self addSubview:text]; 
```

和子类：

```
#import "TextField.h"

@implementation TextField

- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code here.

    }

    return self;
}

- (void)drawRect:(NSRect)dirtyRect
{
    // Drawing code here.
}

@end 
```

# php - Javascript：验证脚本不起作用

> ID：14404144
> 
> 赞同：0
> 
> 时间：2013-01-18T17:17:16.520
> 
> 标签：php, javascript, validation

好的，是时候请来专家了：谁能告诉我如何让它正常工作？！

**背景**：我们有一个 PHP 网络表单，客户端有一个下拉字段，例如汽车类型，他们单击该下拉列表中的一个值，然后显示特定于该选择的字段集。客户端可能在所有部分都有必填字段，但当然并非所有字段集都始终显示，因此如果该字段没有 WxH，则意味着它当前未显示，因此忽略必填/验证字段标志，但如果 WxH > 0 ，停止进程，显示错误信息。

**以下是假设发生的情况：** json 收集所有标记为必需的字段：

```
[var fieldList = <?php echo "new Array(". trim(json_encode($reqFlds), '[]').")"; ?>;] 
```

用户单击提交按钮，json数组传递给下面的函数，然后应该确定标记为必需的字段的宽度和高度是否> 0 如果> 0，则表示该字段当前正在屏幕上显示，因此在填写必填字段之前不应提交表单，应该出现消息。

使用 FB，我看到它通过循环一次，检查 isVisible()，转到“返回空白字段；” 并停止。 ![在此处输入图像描述](../Images/43d8944d31690d47b5307c887480605e.png)

我将把它归结为星期五，不知道我是如何错过添加实际脚本的。现在我明白为什么没有人回应了：

```
function checkRequired(fieldList) {
    var field = null,
        blankFields = [],
        listText = [], listItem = [], fieldId = [], label = [];

    for (var i = 0; i < fieldList.length; i++) {
        listText = fieldList[i];
        listText = listText.substring(1, listText.length - 1);
        listItem = listText.split("||");
        fieldId = listItem[0];
        label = listItem[1];
        field = document.getElementById(fieldId);

        if (isVisible(field) && isBlank(field)) {
            blankFields.push(label);
        }
    return blankFields;
    }
function isVisible(field) {
    if (field.offsetWidth == 0 || field.offsetHeight == 0) return true;
}

function isBlank(field) {
    if ((field.type == "text" || field.type == "textarea") && field.value == "") return true;
    if (!(field.checked || field.selected || field.selectedIndex > -1)) return true;
    return false;
}

    if (blankFields.lentgh > 0 || blankFields.lentgh == 0) {
        displayError(blankFields);
        return false;
    } else {
        return true;
    }
}

function displayError(blankFields) {
    var Errmsg = "The must fill in the following fields in order to save your request:\n\n";
    for (var i = 0; i < blankFields.length; i++) {
        Errmsg += blankFields[i] + "\n";
                alert(Errmsg);
    }
} 
```

任何帮助是极大的赞赏。

**注意**：它不会回到“blankdFields.push(lable);”的 if 语句 在它执行 isVisible 函数检查之后

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:39:58.463

您的问题似乎是语法问题。

你有：

```
function checkRequired(fieldList) {
    var field = null,
        blankFields = [],
        listText = [], listItem = [], fieldId = [], label = [];

    for (var i = 0; i < fieldList.length; i++) {
        listText = fieldList[i];
        listText = listText.substring(1, listText.length - 1);
        listItem = listText.split("||");
        fieldId = listItem[0];
        label = listItem[1];
        field = document.getElementById(fieldId);

        if (isVisible(field) && isBlank(field)) {
            blankFields.push(label);
        }
    return blankFields;
    } 
```

看起来好像缺少右括号；你有点搞砸了你的范围。`return`在语句之前添加一个右大括号。因为你没有这个大括号，所以函数在第一个循环之后中止，因为它遇到了`return`语句，这导致函数停止执行并返回`blankFields`。

你想要的是这样的：

```
function checkRequired(fieldList) {
    var field = null,
        blankFields = [],
        listText = [], listItem = [], fieldId = [], label = [];

    for (var i = 0; i < fieldList.length; i++) {
        listText = fieldList[i];
        listText = listText.substring(1, listText.length - 1);
        listItem = listText.split("||");
        fieldId = listItem[0];
        label = listItem[1];
        field = document.getElementById(fieldId);

        if (isVisible(field) && isBlank(field)) {
            blankFields.push(label);
        }
    }

    return blankFields;
} 
```

那应该可以解决眼前的问题。希望这可以帮助。

# android - android中的setWidth错误

> ID：14404146
> 
> 赞同：0
> 
> 时间：2013-01-18T17:17:24.163
> 
> 标签：android, textview, width, offsetwidth

我的问题是我想改变我的 TEXTVIEW（输入文本）的宽度。在模拟器中，代码工作成功，但是当我尝试在移动设备中使用我的应用程序时，它会崩溃。

我的回答是：为什么当我尝试更改 .setWidth 时我的应用程序会崩溃？我该如何解决我的问题？

非常感谢。

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.binomial);

    EditText TextVA, TextVB, TextVC, EtiquetaA, EtiquetaB, EtiquetaC;

    TextVA = (EditText)findViewById(R.id.editTextP);
    TextVB = (EditText)findViewById(R.id.editTextK);
    TextVC = (EditText)findViewById(R.id.editText3);

    ArrayList<TextView> listaTexto = new ArrayList<TextView>();
    listaTexto.add(TextVA);
    listaTexto.add(TextVB);
    listaTexto.add(TextVC);

    Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    int y = size.y;
    int x = size.x;

    ResolucionPantalla respant = new ResolucionPantalla(y, x);

    for (int i=0;i<listaTexto.size();i++)
            //ResolInput METHOD return size in px according to the screen size
        listaTexto.get(i).setWidth(respant.ResolInput());

    Button BotonCalcular = (Button)findViewById(R.id.buttonCalcular);
    BotonCalcular.setOnClickListener(this);       
} 
```

编辑：TextView 到 EditText

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:26:06.833

我看到了几个潜在的问题......

对于初学者：

```
TextVA = (TextView)findViewById(R.id.editTextP); 
```

是`R.id.editTextP`一个`EditText`？您将其投射为`TextView`

并且：

在这里调用`setWidth`不会有任何效果。`onLayout`每个视图都有一个在完成后调用的方法`onCreate`。在该调用期间，宽度/高度将设置为 XML 布局中指定的任何内容

您可以扩展和创建自己的方法`EditText`并覆盖该`onLayout`方法，或者您可以弄清楚如何通过 XML 正确调整视图的大小。

# javascript - 用户单击href时如何调用“单击”

> ID：14404148
> 
> 赞同：0
> 
> 时间：2013-01-18T17:17:31.577
> 
> 标签：javascript, jquery

当用户单击锚标记时，我试图触发警报，但没有触发警报。我正在尝试的代码如下。

[http://jsfiddle.net/NLdTJ/](http://jsfiddle.net/NLdTJ/)

```
<a id="collapse"> Collapse</a>

$(function(){
  $('#collapse').click(function(){
      alert('here');
  });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:19:03.203

在标签成为超链接之前，您需要有一个 href。否则他们只是锚。要修复它，您应该执行以下操作：

```
 <a id="collapse" href="#"> Collapse</a>

    $(function(){
       $('#collapse').click(function(){
          alert('here');
       });
    }); 
```

希望有帮助。

（我也假设 jQuery，但你的小提琴是用 mooTools 设置的，不确定它是否是故意的。这是我的修复：http: [//jsfiddle.net/NLdTJ/13/](http://jsfiddle.net/NLdTJ/13/)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T17:19:29.387

确保阻止链接的默认单击行为。

```
$(function(){
  $('#collapse').click(function(e){
      e.preventDefault();
      alert('here');
  });
}); 
```

工作样本：http: [//jsfiddle.net/NLdTJ/15/](http://jsfiddle.net/NLdTJ/15/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T17:21:21.750

您的代码没问题，但是您没有在小提琴中加载 jQuery。

[http://jsfiddle.net/NLdTJ/3/](http://jsfiddle.net/NLdTJ/3/)

```
$(function(){
  $('#collapse').click(function(){
      alert('here');
  });
}); 
```

PS：我再次附加了您的代码，因为SO不允许我仅通过指向jsfiddle的链接而没有代码来发布答案:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T17:23:19.043

```
<a id="collapse" href="#" onclick="alert('here');"> Collapse</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T17:23:34.257

它应该可以正常工作，只需更改 JSFiddle 上的框架以包含 JQuery 并在 DOMReady 上运行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T17:23:44.730

您的代码绝对没有问题。`jQuery`当您从 jsFiddle 左侧的框架选项中选择一个库时，它将起作用。

更新[小提琴](http://jsfiddle.net/uberpudge/NLdTJ/10/)以包含框架。

# image - 360度无拼接视野？

> ID：14404149
> 
> 赞同：0
> 
> 时间：2013-01-18T17:17:32.710
> 
> 标签：image, camera, image-stitching

是否有任何类型的相机只需一次拍摄即可获得 360 度视野，而无需使用任何拼接算法和后期处理步骤？或者，是否有可能拥有一台适当使用镜头和其他光学元件的相机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:27:31.057

我认为最接近一次性全景图的方法是使用[镜像球](http://www.ruffstuffcg.com/journal/making-mirrored-ball-and-panoramic-hdr-images-part-1.html)——网上有很多关于如何使用它们的资源。简短的版本是您设置镜像球并拍摄其反射，然后进行后期处理以展开图像。如果您垂直向下（或向上）击球，您将获得 360 度的场景视图；然而，由于镜子的形状，当你接近球的地平线时，分辨率会下降。

尽管镜像的球图像本身很酷，但您很可能仍需要对图像进行后处理。我以前使用过[panotools](http://wiki.panotools.org/)并且可以为它们担保。它们具有将镜像球图像重新映射到经纬度的内置功能（我们更习惯于将其视为全景图）。

要真正做到正确，您可以构建一个自定义镜像装置并进行数学运算以将镜像图像重新映射到您的全景图。例如，谷歌街景汽车就是这样做的——它们在汽车上有一个看起来像锥形镜子的东西，它们对镜子中的图像进行后处理。当然，这在很大程度上朝着后期处理的方向发展，但它是真正的单镜头一机 360 度全景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:25:55.653

我不知道为这种事情制造的相机。但是您可以将 2 个鱼眼相机安装到一个单元中。我不确定你为什么不想要软件。除非您使用半球屏幕，否则您必须为您的屏幕进行校正。有开源切换器，但我喜欢微软的 ICE

[http://research.microsoft.com/en-us/um/redmond/groups/ivm/ice/](http://research.microsoft.com/en-us/um/redmond/groups/ivm/ice/)

# visual-studio-2010 - Visual Studio 工作项编辑器界面损坏

> ID：14404150
> 
> 赞同：1
> 
> 时间：2013-01-18T17:17:40.683
> 
> 标签：visual-studio-2010, visual-studio, tfs

有没有人在 Visual Studio 2010 工作项编辑器中看到过这样的行为，并找到了解决方案：

![工作项编辑器](../Images/e13c697130b1c0e22c093ae5930c1525.png)

上部控件的奇怪轮廓并不是什么大问题，但下部包含几个完全不可见的选项卡。它们存在，并且可以通过标签浏览，但您根本看不到它们。

这个问题似乎是随机出现的。有时我会打开一个工作项，它会像这样渲染，有时它会正确渲染。有时只需关闭并重新打开工作项即可解决问题，有时则不会。

# xpages - 表单中从 Lotus Notes 到 XPage 的动态表

> ID：14404151
> 
> 赞同：0
> 
> 时间：2013-01-18T17:17:43.250
> 
> 标签：xpages

我正在使用现有的 Lotus Notes 数据库并转换为 Xpages。其中一个表包含 3 个多值字段，以新行作为分隔符，“添加新”、“修改”和“删除”按钮控制数据的输入和删除方式。客户希望 XPage 看起来尽可能类似于 Notes GUI，我想我会使用 dijit 对话框来添加新行并找出删除和修改。但据我所知，对话框只能在客户端使用，输入对话框的数据不能带到Xpage上。这是真的？我在想我会在重复中使用一个可编辑的字段，但我也不能正常工作。

基本上，它的解决方案必须显示过去文档的多值字段，并且还能够允许用户编辑那些旧文档......加上在创建新文档时与过去类似/完全一样的工作方式。

在此先感谢您提供的任何帮助，因为这似乎比我想象的要容易得多。

我只是想在下面的解决方案之后更新，这似乎是解决这个问题的好方法。然而，作为一个公认的 XPages 新手，我真的在为这个概念的应用而苦苦挣扎。这就是我所拥有的，它显然不起作用。

从逻辑上讲，这听起来是一个很好的解决方案。但是，我不是 xpages 专家，即使开始，我也无法正常工作。任何能让我更容易上手的事情都会有很大的帮助。我不是一个通常寻找“答案”的人......我只是很难处理这个多值字段表问题。再次提前感谢...这是我写的内容，出现 500 错误。“A”是多值字段名称。

```
<xp:table>
    <xp:tr>
        <xp:td>
            <xp:repeat id="repeat1" rows="30" var="rowdata">
                <xp:this.value><![CDATA[#{javascript:document1.getItemValue("A")}]]></xp:this.value>
                <xp:tr id="valueRow">
                    <xp:td>
                        <xp:text
                            value="#{javascript: return rowdata[i]}" />
                    </xp:td>
                    <xp:eventHandler event="onclick" submit="false"
                        refreshMode="partial" execMode="partial" execId="valueRow"
                        immediate="true">
                        <xp:this.action>
                            <![CDATA[#{javascript:document1.getItemValue("A")}]]>
                        </xp:this.action>
                    </xp:eventHandler>
                </xp:tr>
            </xp:repeat>
        </xp:td>
    </xp:tr>
</xp:table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:21:10.343

我会说执行以下操作

1.  创建一个重复控件，它将从多值字段中提取数据并以只读方式打印它们。重复控件将生成一个 tr 结构，并在 onclick 事件上绑定一个事件处理程序。像这样的东西：

![在此处输入图像描述](../Images/2a9c9491aeb1575fd0147c126568cd2d.png)

2 在 onclick 事件中更改 tr 客户端的样式（使用 dojo），以便人们知道他们选择了该行并在作用域 var 中设置该行的 id/标识符

3 在重复控件上方添加控件，如添加、删除、更新。添加和更新将打开一个对话框，并从所选行读取数据（如果是添加操作，则读取数据）。删除控件将从多行值字段中删除数据，保存文档并引用重复控件。

这应该有效。

# browser - “装饰”图像的 img alt 属性

> ID：14404152
> 
> 赞同：0
> 
> 时间：2013-01-18T17:17:45.367
> 
> 标签：browser, cross-browser, screen-readers, section508

## 一个真正[学究的问题](http://www.merriam-webster.com/dictionary/pedant)

*我正在浏览 Chrome 的开发者工具的元素选项卡时，一些东西引起了我的注意并提示了这个问题。*

虽然标签上有意义的`alt`属性`img`是可访问性的必要期望（`<img src="/path/to/beauty.png"`**alt="Olivia Culpo 赢得了 2012 年美国小姐比赛"**`/>`），但我经常[看到它](http://www.standardista.com/standards/alternative-text-for-images-the-alt-attribute/#alt_di) [经常](http://www.hhs.gov/web/policies/checklisthtml.html) [建议](http://www.jimthatcher.com/webcourse2.htm)`alt`应该给予“间隔”或其他“装饰”图像的属性空白值：`<img src="/images/spacer.gif" alt`**=""**`/>`

**这些问题仅适用于装饰图像：**

*   如果我声明了 alt 属性但没有*定义*它会发生什么： `<img src="/images/spacer.gif"`**alt**`/>`
*   在这两个选项中，哪个是最佳的（为什么）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:47:59.293

如果您`<img src="..." alt />`通过验证器运行，它会引发错误。该`alt`属性需要一个值，即使它是 null `alt=""`。通常，当图像没有 alt 时，一些辅助技术会宣布图像的路径。

所以`<img src="..." alt />`是一样的`<img src="..." />`。通常使用的词是装饰性的还是琐碎的，但这可能是同一个想法。这些类型的图像应该有一个空 alt。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:27:44.317

两者都将通过 W3C 验证，但根据 WCAG 2.0 中的建议，首选方法是将属性定义为：

```
<img src="" alt="" /> 
```

[请参阅 W3C 的以下工作说明。](http://www.w3.org/TR/WCAG20-TECHS/H67.html)

# html - 使用 Bootstrap 的多行输入表单字段

> ID：14404157
> 
> 赞同：45
> 
> 时间：2013-01-18T17:17:53.133
> 
> 标签：html, twitter-bootstrap

```
<form class="span6">
  <h2>Get In Touch</h2><br>
  <input class="span6" type="text" placeholder="Your first name" required>
  <input class="span6" type="text" placeholder="Your last name" required>
  <input class="span6" type="email" placeholder="Your email" required>
  <input class="span6" type="text" placeholder="Your phone number">
  <input class="span6" type="text" rows="3" placeholder="What's up?" required><br>
  <button type="submit" class="btn btn-primary">Submit</button>
  <button type="clear" class="btn">Clear</button>
</form><!--/.span6--> 
```

这是我在 Bootstrap 中使用的表单。我试图让我的最后一个输入字段跨越 6 列和 3 行，但它只显示为 6 列和 1 行。关于如何使我的输入框更大的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-18T17:36:03.203

我认为问题在于您使用的是 type="text" 而不是 textarea。你想要的是：

```
<textarea class="span6" rows="3" placeholder="What's up?" required></textarea> 
```

澄清一下，type="text" 总是一行，而 textarea 可以是多行。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-08-23T19:18:48.153

Nick Mitchinson 的答案是针对 Bootstrap 版本 2。

如果您使用的是 Bootstrap 版本 3，那么表单会发生一些变化。对于引导程序 3，请改用以下内容：

```
<div class="form-horizontal">
    <div class="form-group">
        <div class="col-md-6">
            <textarea class="form-control" rows="3" placeholder="What's up?" required></textarea>
        </div>
    </div>
</div> 
```

其中，col-md-6 将针对中型设备。您可以添加 col-xs-6 等以针对较小的设备。

# ios - 防止电子邮件编辑器旋转 iOS6

> ID：14404159
> 
> 赞同：2
> 
> 时间：2013-01-18T17:18:00.567
> 
> 标签：ios, cocoa-touch, ios6

在 iOS6 中使用 UIActivityViewController 时，我试图阻止电子邮件编写器旋转到横向。将用于在 iOS5 中工作的 MFMailComposeViewController 子类化，添加防止旋转的方法，但如果我将 UIActivityViewController 子类化并添加，则似乎不起作用：

```
- (BOOL)shouldAutorotate {
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 
```

这些方法确实被调用但不做任何事情。

以前有人做过吗？

# node.js - Mashery IODocs - 它可以支持来自我的 REST API 的 passportjs 身份验证吗？

> ID：14404160
> 
> 赞同：0
> 
> 时间：2013-01-18T17:18:01.353
> 
> 标签：node.js, express, passport.js, iodocs

我正在使用 Mashery 的 iodocs 作为我的 REST API 的开发人员前端。我的 API 是用 Node / Express 编写的，并使用 PassportJS 对用户进行身份验证（本地策略）。我的实现要求用户使用 /login 端点，传入用户名和密码。然后，Passport 将用户序列化到一个 cookie 中，这样后续的请求就不需要登录了。

使用 iodocs 时，Passport 设置的 cookie（“connect.sid”）不会在后续请求中传回。

有没有办法做到这一点？IODocs 是否支持以这种方式工作的身份验证方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:22:20.370

Cookie 将遍历端口。您可能遇到的一个问题是 I/O Docs 也设置了“connect.sid”，因为它使用的是 Express session.js 中间件模块，因此 cookie 值可能会被覆盖。

尝试在会话初始化程序中使用不同的 cookie 名称更新 I/O Docs app.js —— 设置“key”值：

```
app.use(express.session({
    secret: config.sessionSecret,
    key: 'iodocs.connect.sid',
    store:  new RedisStore({
        'host':   config.redis.host,
        'port':   config.redis.port,
        'pass':   config.redis.password,
        'maxAge': 1209600000
    })
})); 
```

# javascript - Web 表单的慢速 jQuery 脚本 - 优化建议

> ID：14404164
> 
> 赞同：0
> 
> 时间：2013-01-18T17:18:20.480
> 
> 标签：javascript, jquery

我有一个非常大的表单，其中有很多字段分布在各个 div 中。根据某个下拉字段#record_type_dd_c 的值，需要隐藏某些 div。

我正在使用一个大型（非常基本的）jQuery 脚本来隐藏必要的面板，但是一些用户报告说在编辑和更改下拉列表时表单“慢”。它在我的电脑上运行良好。

您将在代码中看到基本上有两个主要部分。第一种是用户编辑现有记录时。在这种情况下，用户无法编辑 #record_type_dd_c 下拉列表，因为它被锁定，所以我只需要 jQuery 来查看下拉列表中的当前值并隐藏相应的面板。

第二种情况是当用户使用表单创建新记录时。在这种情况下，他们可以选择下拉列表的值，并且表单必须再次隐藏相应的面板。

该代码有效，但同样，一些用户报告说它相当慢。

我在 jQuery/JS 和 Web 开发方面的经验仍处于初级阶段，我正在尝试找出一种可以优化我的 jQuery 的方法，因为我猜它只是代码太多而且某些用户的计算机不是能够足够快地运行脚本吗？

有没有人可以提供任何建议来优化这一点？任何帮助是极大的赞赏。谢谢！

```
 var recordType = $("#record_type_dd_c").val();                    

  switch (recordType) {

  case "":
      $('#LBL_EDITVIEW_PANEL33').parent().hide();
      $('#LBL_EDITVIEW_PANEL7').parent().hide();
      $('#LBL_EDITVIEW_PANEL6').parent().hide();
      $('#LBL_EDITVIEW_PANEL24').parent().hide();
      $('#LBL_EDITVIEW_PANEL10').parent().hide();
      $('#LBL_EDITVIEW_PANEL16').parent().hide();
      $('#LBL_EDITVIEW_PANEL22').parent().hide();   
      $('#LBL_EDITVIEW_PANEL3').parent().hide();    
      $('#LBL_EDITVIEW_PANEL4').parent().hide();                                        
      $('#LBL_EDITVIEW_PANEL5').parent().hide();    
      $('#LBL_EDITVIEW_PANEL8').parent().hide();    
      $('#LBL_EDITVIEW_PANEL9').parent().hide();    
      $('#LBL_EDITVIEW_PANEL1').parent().hide();
      $('#LBL_EDITVIEW_PANEL11').parent().hide();
      $('#LBL_EDITVIEW_PANEL12').parent().hide();
      $('#LBL_EDITVIEW_PANEL13').parent().hide();
      $('#LBL_EDITVIEW_PANEL14').parent().hide();
      $('#LBL_EDITVIEW_PANEL15').parent().hide();
      $('#LBL_EDITVIEW_PANEL18').parent().hide();   
      $('#LBL_EDITVIEW_PANEL19').parent().hide();   
      $('#LBL_EDITVIEW_PANEL20').parent().hide();   
      $('#LBL_EDITVIEW_PANEL21').parent().hide();   
      $('#LBL_EDITVIEW_PANEL25').parent().hide();   
      $('#LBL_EDITVIEW_PANEL26').parent().hide();   
      $('#LBL_EDITVIEW_PANEL27').parent().hide();   
      $('#LBL_EDITVIEW_PANEL28').parent().hide();   
      $('#LBL_EDITVIEW_PANEL29').parent().hide();   
      $('#LBL_EDITVIEW_PANEL30').parent().hide();   
      $('#LBL_EDITVIEW_PANEL31').parent().hide();
      $('#LBL_EDITVIEW_PANEL23').parent().hide();
      $('#LBL_EDITVIEW_PANEL34').parent().hide();
      $('#LBL_EDITVIEW_PANEL35').parent().hide();
      $('#LBL_EDITVIEW_PANEL36').parent().hide();
      $('#LBL_EDITVIEW_PANEL37').parent().hide();
      break;

case "0124000000014qm":                         
    $('#LBL_EDITVIEW_PANEL7').parent().hide();
    $('#LBL_EDITVIEW_PANEL6').parent().hide();
    $('#LBL_EDITVIEW_PANEL24').parent().hide();
    $('#LBL_EDITVIEW_PANEL10').parent().hide();
    $('#LBL_EDITVIEW_PANEL16').parent().hide();
    $('#LBL_EDITVIEW_PANEL22').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL3').parent().hide();  
    $('#LBL_EDITVIEW_PANEL4').parent().hide();                                      
    $('#LBL_EDITVIEW_PANEL5').parent().hide();  
    $('#LBL_EDITVIEW_PANEL8').parent().hide();  
    $('#LBL_EDITVIEW_PANEL9').parent().hide();  
    $('#LBL_EDITVIEW_PANEL1').parent().hide();
    $('#LBL_EDITVIEW_PANEL11').parent().hide();
    $('#LBL_EDITVIEW_PANEL12').parent().hide();
    $('#LBL_EDITVIEW_PANEL13').parent().hide();
    $('#LBL_EDITVIEW_PANEL14').parent().hide();
    $('#LBL_EDITVIEW_PANEL15').parent().hide();
    $('#LBL_EDITVIEW_PANEL18').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL19').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL20').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL21').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL25').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL27').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL28').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL29').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL30').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL31').parent().hide(); 
    break;

case "01240000000990R":                                     
    $('#LBL_EDITVIEW_PANEL6').parent().hide();  
    $('#LBL_EDITVIEW_PANEL24').parent().hide();
    $('#LBL_EDITVIEW_PANEL37').parent().hide();
    $('#LBL_EDITVIEW_PANEL10').parent().hide();
    $('#LBL_EDITVIEW_PANEL16').parent().hide();
    $('#LBL_EDITVIEW_PANEL22').parent().hide();
    $('#LBL_EDITVIEW_PANEL8').parent().hide();
    $('#LBL_EDITVIEW_PANEL9').parent().hide();
    $('#LBL_EDITVIEW_PANEL11').parent().hide();
    $('#LBL_EDITVIEW_PANEL12').parent().hide();
    $('#LBL_EDITVIEW_PANEL13').parent().hide();
    $('#LBL_EDITVIEW_PANEL14').parent().hide();
    $('#LBL_EDITVIEW_PANEL15').parent().hide();
    $('#LBL_EDITVIEW_PANEL23').parent().hide();
    $('#LBL_EDITVIEW_PANEL18').parent().hide();
    $('#LBL_EDITVIEW_PANEL19').parent().hide();
    $('#LBL_EDITVIEW_PANEL20').parent().hide();
    $('#LBL_EDITVIEW_PANEL21').parent().hide();
    $('#LBL_EDITVIEW_PANEL33').parent().hide();
    $('#LBL_EDITVIEW_PANEL34').parent().hide();
    $('#LBL_EDITVIEW_PANEL35').parent().hide();
    $('#LBL_EDITVIEW_PANEL36').parent().hide();
    $('#LBL_EDITVIEW_PANEL25').parent().hide();
    $('#LBL_EDITVIEW_PANEL26').parent().hide();
    $('#LBL_EDITVIEW_PANEL27').parent().hide();
    $('#LBL_EDITVIEW_PANEL28').parent().hide();
    $('#LBL_EDITVIEW_PANEL29').parent().hide();
    $('#LBL_EDITVIEW_PANEL30').parent().hide();
    $('#LBL_EDITVIEW_PANEL31').parent().hide();
    break;

case "0124000000097fm":                                     
    $('#LBL_EDITVIEW_PANEL7').parent().hide();
    $('#LBL_EDITVIEW_PANEL24').parent().hide();
    $('#LBL_EDITVIEW_PANEL37').parent().hide();
    $('#LBL_EDITVIEW_PANEL10').parent().hide();
    $('#LBL_EDITVIEW_PANEL16').parent().hide();
    $('#LBL_EDITVIEW_PANEL16').hide();
    $('#LBL_EDITVIEW_PANEL22').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL1').parent().hide();  
    $('#LBL_EDITVIEW_PANEL3').parent().hide();  
    $('#LBL_EDITVIEW_PANEL4').parent().hide();  
    $('#LBL_EDITVIEW_PANEL5').parent().hide();  
    $('#LBL_EDITVIEW_PANEL8').parent().hide();
    $('#LBL_EDITVIEW_PANEL9').parent().hide();  
    $('#LBL_EDITVIEW_PANEL11').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL12').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL13').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL14').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL23').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL18').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL19').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL20').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL21').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL34').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL35').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL36').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL25').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL28').parent().hide();         
    $('#LBL_EDITVIEW_PANEL29').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL30').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL31').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL27').parent().hide(); 
    break;

case "0124000000014DL":                                     
    $('#LBL_EDITVIEW_PANEL7').parent().hide();
    $('#LBL_EDITVIEW_PANEL6').parent().hide();
    $('#LBL_EDITVIEW_PANEL24').parent().hide();
    $('#LBL_EDITVIEW_PANEL37').parent().hide();
    $('#LBL_EDITVIEW_PANEL10').parent().hide();
    $('#LBL_EDITVIEW_PANEL16').parent().hide();
    $('#LBL_EDITVIEW_PANEL22').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL1').parent().hide();  
    $('#LBL_EDITVIEW_PANEL3').parent().hide();  
    $('#LBL_EDITVIEW_PANEL4').parent().hide();  
    $('#LBL_EDITVIEW_PANEL5').parent().hide();  
    $('#LBL_EDITVIEW_PANEL11').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL12').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL13').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL14').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL23').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL18').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL19').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL20').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL21').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL34').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL35').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL36').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL25').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL27').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL28').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL29').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL30').parent().hide();     
    $('#LBL_EDITVIEW_PANEL31').parent().hide();
    $('#LBL_EDITVIEW_PANEL33').parent().hide();
    break;

case "01240000000141F":                                     
    $('#LBL_EDITVIEW_PANEL7').parent().hide();  
    $('#LBL_EDITVIEW_PANEL6').parent().hide();  
    $('#LBL_EDITVIEW_PANEL24').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL37').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL16').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL22').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL1').parent().hide();  
    $('#LBL_EDITVIEW_PANEL3').parent().hide();  
    $('#LBL_EDITVIEW_PANEL4').parent().hide();  
    $('#LBL_EDITVIEW_PANEL5').parent().hide();  
    $('#LBL_EDITVIEW_PANEL23').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL18').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL19').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL20').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL21').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL34').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL35').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL36').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL25').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL27').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL28').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL29').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL30').parent().hide();     
    $('#LBL_EDITVIEW_PANEL31').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL8').parent().hide();  
    $('#LBL_EDITVIEW_PANEL9').parent().hide();  
    break;

case "012300000000OQ2":                                     
    $('#LBL_EDITVIEW_PANEL7').parent().hide();  
    $('#LBL_EDITVIEW_PANEL6').parent().hide();  
    $('#LBL_EDITVIEW_PANEL24').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL10').parent().hide();
    $('#LBL_EDITVIEW_PANEL16').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL1').parent().hide();  
    $('#LBL_EDITVIEW_PANEL3').parent().hide();  
    $('#LBL_EDITVIEW_PANEL4').parent().hide();  
    $('#LBL_EDITVIEW_PANEL5').parent().hide();  
    $('#LBL_EDITVIEW_PANEL11').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL12').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL13').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL14').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL23').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL18').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL19').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL20').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL21').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL34').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL35').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL36').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL25').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL27').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL28').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL29').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL30').parent().hide();     
    $('#LBL_EDITVIEW_PANEL31').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL8').parent().hide();  
    $('#LBL_EDITVIEW_PANEL9').parent().hide();
    break;

case "0124000000013eG":                                     
    $('#LBL_EDITVIEW_PANEL7').parent().hide();  
    $('#LBL_EDITVIEW_PANEL6').parent().hide();  
    $('#LBL_EDITVIEW_PANEL24').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL37').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL10').parent().hide();
    $('#LBL_EDITVIEW_PANEL16').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL22').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL1').parent().hide();  
    $('#LBL_EDITVIEW_PANEL3').parent().hide();  
    $('#LBL_EDITVIEW_PANEL4').parent().hide();  
    $('#LBL_EDITVIEW_PANEL5').parent().hide();  
    $('#LBL_EDITVIEW_PANEL11').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL12').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL13').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL14').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL23').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL18').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL19').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL20').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL21').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL34').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL35').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL36').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL25').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL27').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL28').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL29').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL30').parent().hide();     
    $('#LBL_EDITVIEW_PANEL31').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL8').parent().hide();  
    $('#LBL_EDITVIEW_PANEL9').parent().hide();
    break;

case "0124000000015HJ":                                     
    $('#LBL_EDITVIEW_PANEL7').parent().hide();  
    $('#LBL_EDITVIEW_PANEL6').parent().hide();  
    $('#LBL_EDITVIEW_PANEL24').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL37').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL10').parent().hide();
    $('#LBL_EDITVIEW_PANEL16').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL22').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL1').parent().hide();  
    $('#LBL_EDITVIEW_PANEL3').parent().hide();  
    $('#LBL_EDITVIEW_PANEL4').parent().hide();  
    $('#LBL_EDITVIEW_PANEL5').parent().hide();  
    $('#LBL_EDITVIEW_PANEL11').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL12').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL13').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL14').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL23').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL18').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL19').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL20').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL21').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL34').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL35').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL36').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL25').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL27').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL28').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL8').parent().hide();  
    $('#LBL_EDITVIEW_PANEL9').parent().hide();  
    break;
}

$("#record_type_dd_c").change(function () {
   $("[id*=LBL_EDITVIEW]").parent().show();
   var recordType = $("#record_type_dd_c").val();   

switch (recordType) {
case "0124000000014qm":                         
    $('#LBL_EDITVIEW_PANEL7').parent().hide();
    $('#LBL_EDITVIEW_PANEL6').parent().hide();
    $('#LBL_EDITVIEW_PANEL24').parent().hide();
    $('#LBL_EDITVIEW_PANEL10').parent().hide();
    $('#LBL_EDITVIEW_PANEL16').parent().hide();
    $('#LBL_EDITVIEW_PANEL22').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL3').parent().hide();  
    $('#LBL_EDITVIEW_PANEL4').parent().hide();                                      
    $('#LBL_EDITVIEW_PANEL5').parent().hide();  
    $('#LBL_EDITVIEW_PANEL8').parent().hide();  
    $('#LBL_EDITVIEW_PANEL9').parent().hide();  
    $('#LBL_EDITVIEW_PANEL1').parent().hide();
    $('#LBL_EDITVIEW_PANEL11').parent().hide();
    $('#LBL_EDITVIEW_PANEL12').parent().hide();
    $('#LBL_EDITVIEW_PANEL13').parent().hide();
    $('#LBL_EDITVIEW_PANEL14').parent().hide();
    $('#LBL_EDITVIEW_PANEL15').parent().hide();
    $('#LBL_EDITVIEW_PANEL18').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL19').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL20').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL21').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL25').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL27').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL28').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL29').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL30').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL31').parent().hide(); 
    break;

case "01240000000990R":                                     
    $('#LBL_EDITVIEW_PANEL6').parent().hide();  
    $('#LBL_EDITVIEW_PANEL24').parent().hide();
    $('#LBL_EDITVIEW_PANEL37').parent().hide();
    $('#LBL_EDITVIEW_PANEL10').parent().hide();
    $('#LBL_EDITVIEW_PANEL16').parent().hide();
    $('#LBL_EDITVIEW_PANEL22').parent().hide();
    $('#LBL_EDITVIEW_PANEL8').parent().hide();
    $('#LBL_EDITVIEW_PANEL9').parent().hide();
    $('#LBL_EDITVIEW_PANEL11').parent().hide();
    $('#LBL_EDITVIEW_PANEL12').parent().hide();
    $('#LBL_EDITVIEW_PANEL13').parent().hide();
    $('#LBL_EDITVIEW_PANEL14').parent().hide();
    $('#LBL_EDITVIEW_PANEL15').parent().hide();
    $('#LBL_EDITVIEW_PANEL23').parent().hide();
    $('#LBL_EDITVIEW_PANEL18').parent().hide();
    $('#LBL_EDITVIEW_PANEL19').parent().hide();
    $('#LBL_EDITVIEW_PANEL20').parent().hide();
    $('#LBL_EDITVIEW_PANEL21').parent().hide();
    $('#LBL_EDITVIEW_PANEL33').parent().hide();
    $('#LBL_EDITVIEW_PANEL34').parent().hide();
    $('#LBL_EDITVIEW_PANEL35').parent().hide();
    $('#LBL_EDITVIEW_PANEL36').parent().hide();
    $('#LBL_EDITVIEW_PANEL25').parent().hide();
    $('#LBL_EDITVIEW_PANEL26').parent().hide();
    $('#LBL_EDITVIEW_PANEL27').parent().hide();
    $('#LBL_EDITVIEW_PANEL28').parent().hide();
    $('#LBL_EDITVIEW_PANEL29').parent().hide();
    $('#LBL_EDITVIEW_PANEL30').parent().hide();
    $('#LBL_EDITVIEW_PANEL31').parent().hide();
    break;

case "0124000000097fm":                                     
    $('#LBL_EDITVIEW_PANEL7').parent().hide();
    $('#LBL_EDITVIEW_PANEL24').parent().hide();
    $('#LBL_EDITVIEW_PANEL37').parent().hide();
    $('#LBL_EDITVIEW_PANEL10').parent().hide();
    $('#LBL_EDITVIEW_PANEL16').parent().hide();
    $('#LBL_EDITVIEW_PANEL22').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL1').parent().hide();  
    $('#LBL_EDITVIEW_PANEL3').parent().hide();  
    $('#LBL_EDITVIEW_PANEL4').parent().hide();  
    $('#LBL_EDITVIEW_PANEL5').parent().hide();  
    $('#LBL_EDITVIEW_PANEL8').parent().hide();  
    $('#LBL_EDITVIEW_PANEL9').parent().hide();  
    $('#LBL_EDITVIEW_PANEL11').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL12').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL13').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL14').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL23').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL18').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL19').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL20').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL21').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL34').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL35').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL36').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL25').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL28').parent().hide();         
    $('#LBL_EDITVIEW_PANEL29').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL30').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL31').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL27').parent().hide(); 
    break;

case "0124000000014DL":                                     
    $('#LBL_EDITVIEW_PANEL7').parent().hide();
    $('#LBL_EDITVIEW_PANEL6').parent().hide();
    $('#LBL_EDITVIEW_PANEL24').parent().hide();
    $('#LBL_EDITVIEW_PANEL37').parent().hide();
    $('#LBL_EDITVIEW_PANEL10').parent().hide();
    $('#LBL_EDITVIEW_PANEL16').parent().hide();
    $('#LBL_EDITVIEW_PANEL22').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL1').parent().hide();  
    $('#LBL_EDITVIEW_PANEL3').parent().hide();  
    $('#LBL_EDITVIEW_PANEL4').parent().hide();  
    $('#LBL_EDITVIEW_PANEL5').parent().hide();  
    $('#LBL_EDITVIEW_PANEL11').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL12').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL13').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL14').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL23').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL18').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL19').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL20').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL21').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL34').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL33').parent().hide();
    $('#LBL_EDITVIEW_PANEL35').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL36').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL25').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL27').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL28').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL29').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL30').parent().hide();     
    $('#LBL_EDITVIEW_PANEL31').parent().hide();
    break;

case "01240000000141F":                                     
    $('#LBL_EDITVIEW_PANEL7').parent().hide();  
    $('#LBL_EDITVIEW_PANEL6').parent().hide();  
    $('#LBL_EDITVIEW_PANEL24').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL37').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL16').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL22').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL1').parent().hide();  
    $('#LBL_EDITVIEW_PANEL3').parent().hide();  
    $('#LBL_EDITVIEW_PANEL4').parent().hide();  
    $('#LBL_EDITVIEW_PANEL5').parent().hide();  
    $('#LBL_EDITVIEW_PANEL23').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL18').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL19').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL20').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL21').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL34').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL35').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL36').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL25').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL27').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL28').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL29').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL30').parent().hide();     
    $('#LBL_EDITVIEW_PANEL31').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL8').parent().hide();  
    $('#LBL_EDITVIEW_PANEL9').parent().hide();  
    break;

case "012300000000OQ2":                                     
    $('#LBL_EDITVIEW_PANEL7').parent().hide();  
    $('#LBL_EDITVIEW_PANEL6').parent().hide();  
    $('#LBL_EDITVIEW_PANEL24').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL10').parent().hide();
    $('#LBL_EDITVIEW_PANEL16').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL1').parent().hide();  
    $('#LBL_EDITVIEW_PANEL3').parent().hide();  
    $('#LBL_EDITVIEW_PANEL4').parent().hide();  
    $('#LBL_EDITVIEW_PANEL5').parent().hide();  
    $('#LBL_EDITVIEW_PANEL11').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL12').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL13').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL14').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL23').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL18').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL19').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL20').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL21').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL34').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL35').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL36').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL25').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL27').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL28').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL29').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL30').parent().hide();     
    $('#LBL_EDITVIEW_PANEL31').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL8').parent().hide();  
    $('#LBL_EDITVIEW_PANEL9').parent().hide();
    break;

case "0124000000013eG":                                     
    $('#LBL_EDITVIEW_PANEL7').parent().hide();  
    $('#LBL_EDITVIEW_PANEL6').parent().hide();  
    $('#LBL_EDITVIEW_PANEL24').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL37').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL10').parent().hide();
    $('#LBL_EDITVIEW_PANEL16').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL22').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL1').parent().hide();  
    $('#LBL_EDITVIEW_PANEL3').parent().hide();  
    $('#LBL_EDITVIEW_PANEL4').parent().hide();  
    $('#LBL_EDITVIEW_PANEL5').parent().hide();  
    $('#LBL_EDITVIEW_PANEL11').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL12').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL13').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL14').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL23').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL18').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL19').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL20').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL21').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL34').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL35').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL36').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL25').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL27').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL28').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL29').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL30').parent().hide();     
    $('#LBL_EDITVIEW_PANEL31').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL8').parent().hide();  
    $('#LBL_EDITVIEW_PANEL9').parent().hide();
    break;

case "0124000000015HJ":                                     
    $('#LBL_EDITVIEW_PANEL7').parent().hide();  
    $('#LBL_EDITVIEW_PANEL6').parent().hide();  
    $('#LBL_EDITVIEW_PANEL24').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL37').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL10').parent().hide();
    $('#LBL_EDITVIEW_PANEL16').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL22').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL1').parent().hide();  
    $('#LBL_EDITVIEW_PANEL3').parent().hide();  
    $('#LBL_EDITVIEW_PANEL4').parent().hide();  
    $('#LBL_EDITVIEW_PANEL5').parent().hide();  
    $('#LBL_EDITVIEW_PANEL11').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL12').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL13').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL14').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL15').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL23').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL18').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL19').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL20').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL21').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL34').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL35').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL36').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL25').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL26').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL27').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL28').parent().hide(); 
    $('#LBL_EDITVIEW_PANEL8').parent().hide();  
    $('#LBL_EDITVIEW_PANEL9').parent().hide();  
    break;
}
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T17:24:53.540

根据您的 HTML 结构，您可以隐藏要隐藏的所有元素的父级，否则，我建议向要隐藏在一起的元素组添加一个类，即 group1、group2 然后隐藏每个组：

```
case '':
$('.group1').hide();
break; 
```

您执行的每个 dom 查询都是昂贵的，因此最好在每个查询中获取多个元素，而不是为每个元素进行查询。

# php - preg_match PHP版本之间的不同行为

> ID：14404169
> 
> 赞同：0
> 
> 时间：2013-01-18T17:18:31.103
> 
> 标签：php, preg-match

我正在尝试验证法国地址的格式。这是我期望的格式：

```
5 street name
35230 Village 
```

所以我们有一个带有可选号码的道路地址，后面是邮政编码和村庄（公社）的名称。

在我的开发服务器上，我正在运行 PHP v5.2.5。

此代码行正在运行

```
$AdOk = preg_match("/^([0-9a-zA-Z-, '\\n]+)(\\d{5})([, ]+)([0-9a-zA-Z-, '\\n]+)$/iu", $ClientAddress); 
```

但是，当我在生产服务器上运行它时，它失败了。

生产中的 PHP 版本是 v5.3.19

谁能帮我解决这个问题？

顺便说一句，我还需要添加重音字符！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T07:54:08.377

事实上，问题是使用单引号引起的。

这被脚本接收为 \' 并且斜线导致测试失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T12:53:24.273

也许你可以试试这个：`'/^([\da-z\-,\'\s]+)(\d{5})([,\s]+)([\da-z\-,\'\s]+)$/iu'`。这个使用单引号，我使用 \s 而不是空格和换行符。请让我知道两台服务器之间的结果。

# facebook - 允许用户为 facebook like 按钮选择图像

> ID：14404171
> 
> 赞同：4
> 
> 时间：2013-01-18T17:18:32.913
> 
> 标签：facebook

是否可以让用户在网站上使用“赞”按钮时为他们将创建的“赞”帖子选择哪个图像？我指定了多个 og:image 标签，并且 facebook linter 正确显示了所有图像，但是当我单击“like”按钮时，它没有提供选择我想使用的图像的选项。

# javascript - 使用 Javascript 修改复制的 EditorTemplates

> ID：14404174
> 
> 赞同：0
> 
> 时间：2013-01-18T17:18:45.893
> 
> 标签：javascript, ajax, razor, asp.net-mvc-4

我有一个编辑器模板，其中包含一个表格行，其中包含（除其他外）一个下拉/组合框来选择一种货币。此编辑模板在同一个视图上显示多次，用户可以根据需要多次添加这些行。

我希望行的下拉列表中的更改反映在同一行的 EditorFor （货币汇率）中，所以我添加了一个 onchange html 参数：

```
<td>
    @*@Html.LabelFor(model => model.Currency)*@
    @Html.DropDownListFor(model => model.Currency, new SelectList(Model.CurrencyList, "Code", "Code"), new { onchange = "updateCurrency(this)" })
    @Html.ValidationMessageFor(model => model.Currency)
</td> 
```

我的 javascript 函数进行 ajax 调用以检索所选货币​​的汇率：

```
function updateCurrency(elem) {
        alert("Currency changed!")
        $.ajax({
            type: "GET",
            url: "Currency?code=" + elem.value,
            success: function (msg) {
                // The Rate field's Id:
                var RateId = "@Html.ClientIdFor(model=>model.Rate)" //  // Halp, problem is here!
                document.getElementById(RateId).value = msg;

            }
        });
    } 
```

我的问题是

```
var RateId = "@Html.ClientIdFor(model=>model.Rate)" 
```

有那个 Html 助手，它是服务器端代码。因此，当我查看页面的源代码时，会复制 javascript 代码（每行一次），并且所有 var RateId = "@Html.ClientIdFor(model=>model.Rate)" 都指向最近添加的列的 EditorFor。

可能我尝试解决问题的方式是错误的，但是我怎样才能让我的 javascript 代码更新所需的字段（即与更改的下拉列表位于同一行的字段）。

我相信问题之一是我在编辑器模板上有 javasript，但我怎么能访问像 document.getElementById(RateId).value = msg; 这样的东西。如果我那样做？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:16:11.897

弄清楚了。希望它可以帮助某人：

在我看来：

```
@Html.DropDownListFor(model => model.Currency, new SelectList(Model.CurrencyList, "Code", "Code"), new { @onchange = "updateCurrency(this, " + @Html.IdFor(m => m.Rate) + ", " + @Html.IdFor(m => m.Amount) + ", " + @Html.IdFor(m => m.Total) + ")" }) 
```

在单独的 JavaScript 文件中：

```
function updateCurrency(elem, RateId, AmountId, TotalId) {

   var cell = elem.parentNode // to get the <td> where the dropdown was

   var index = rowindex(cell) // get the row number

   // Request the currency's rate:
   $.ajax({

      blah blah blah .........
      (RateId[index - 1]).value = 'retreived value'; // Set the rate field value.

   });

} 
```

到目前为止似乎正在工作。

# ruby-on-rails-3 - 使用 Rails、MySQL 和 Active Record 查询 where date = Date.today

> ID：14404175
> 
> 赞同：18
> 
> 时间：2013-01-18T17:18:47.820
> 
> 标签：ruby-on-rails-3, activerecord

我在 Active Record 文档中看到，您可以使用大于/小于比较来查询日期。但是，如果您想选择 where date = Date.today 或者我必须查询 date 大于昨天且小于明天的地方怎么办？

如您所见，我在以下查询中正是这样做的，并且查询 Date = today 返回一个空集

```
1.9.3p286 :096 > Subscription.where("created_at = ?", Date.today).count
   (0.5ms)  SELECT COUNT(*) FROM `subscriptions` WHERE (created_at = '2013-01-18')
 => 0 
```

对比

```
1.9.3p286 :098 > Subscription.where("expiration_date < ? AND expiration_date > ?", Date.today + 1, Date.today - 1).count
   (0.4ms)  SELECT COUNT(*) FROM `subscriptions` WHERE (expiration_date < '2013-01-19' AND expiration_date > '2013-01-17')
 => 1 
```

这是查询今天日期的正确方法还是我错过了什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-18T17:57:52.007

我认为这是这个问题的 DUP：

[如何从日期时间列中选择日期？](https://stackoverflow.com/questions/1754411/how-to-select-date-from-datetime-column)

```
Subscription.where("DATE(created_at) = ?", Date.today).count 
```

我很确定这适用于 MySQL 和 PostgreSQL，但我不确定它是否是 SQL 标准。

维基百科似乎认为`TO_DATE`这是标准： [http ://en.wikipedia.org/wiki/SQL#Date_and_time](http://en.wikipedia.org/wiki/SQL#Date_and_time)

不过，这对我在 PostgreSQL 中不起作用。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-08-17T06:30:57.450

我相信以下帖子与您更相关 [Rails ActiveRecord Find / Search by Date](https://stackoverflow.com/questions/13211916/rails-activerecord-find-search-by-date)

在您的情况下，当您使用 activerecord 搜索日期时，您可能需要考虑时区转换。

当您使用以下方法时

`Subscription.where("DATE(created_at) = ?", Date.today).count`

它使用 Mysql 的 DATE 函数来解析日期，您将获得由 activerecord 保存在 Mysql 中的 UTC 时间。如果您的 Rails 应用程序使用其他时区，您将得到错误的结果。

使用它的正确方法是避免使用任何 SQL 函数，而是使用范围。

`Subscription.where(created_at: Date.today.beginning_of_day..Date.today.end_of_day)`

这将获取应用时区转换的结果。请让我知道任何人对此有更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-10T17:36:11.750

对我来说就像这样工作：

```
@fisrt_payment_day = Invoice.where("DATE(date_first_payment) >= ?", Date.today - 1.day) 
```

# java - html:radio 动态值

> ID：14404179
> 
> 赞同：0
> 
> 时间：2013-01-18T17:18:58.040
> 
> 标签：java, struts

我正在为我的应用程序使用 Struts 1.2。我需要遍历列表并`<html:radio>`根据列表中存在的项目数进行创建。为了遍历列表，我使用`<logic:iterator>`. 该列表被设置为请求的属性。

这是我正在使用的代码：

```
<logic:iterate name="mediaTypes" id="type">                             
<html:radio name="rentMediaForm" property="mediaType" value="type"></html:radio>
<bean:write name="type"/>
</logic:iterate> 
```

但是每次收音机的值都被分配给“类型”。我希望该值是基于迭代值的动态值。

我在下面的行中正确获取了值：

`<bean:write name="type"/>`

请让我知道如何实现这一目标。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:19:54.300

使用 EL（表达式语言）获取 的值`type`，例如：

```
<html:radio name="rentMediaForm" property="mediaType" value="${type}"></html:radio> 
```

另请注意，您的应用程序至少应为 Servlet 2.4/JSP 2.0 级别，以便能够无缝处理 EL 表达式。否则，您可能需要切换到支持[EL 的 struts-html tags 版本](http://struts.apache.org/1.x/struts-el/tagreference.html#struts-html-el.tld)。

# matlab - 如何处理在 linux 中编写 CUDA+MEX 代码？

> ID：14404189
> 
> 赞同：1
> 
> 时间：2013-01-18T17:19:19.617
> 
> 标签：matlab, coding-style, cuda, mex

我尝试编写集成了 Cuda 的 matlab mex 代码，但它很难编译和调试。有没有更好的编码和测试方法？我在 Matlab 2012b 上。

目前我正在用 sublime 编写代码，然后在 matlab 上编译它，但我也是 CUDA 的新手，因此很难在没有立即看到结果的情况下对其进行编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:04:51.197

Robert Crovella 的评论很有趣。

我只是想提一下我使用 CUDA 指令编译 mex 文件的方式（它也适用于不同版本的 MATLAB）。

1）通过`nvcc`命令将源代码编译并转换为C++代码

```
 system(sprintf('nvcc -I"%s/extern/include" -cuda "mex-fun.cu" -output-file "mexfun.cpp"', matlabroot)); 
```

2）将其链接到Matlab

```
mex -I/opt/cuda/include -L/opt/cuda/lib -lcudart mex-fun.cpp 
```

这最初是在[MATLAB Newsreader 页面上](http://www.mathworks.com/matlabcentral/newsreader/view_thread/261866)建议的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T01:29:54.333

我有一个 matlab 入口点（即一个带有函数“mexFunction”的文件）和一个 C++ 入口点（一个带有“main”的文件），而我的实际 CUDA 代码的其余部分与使用的入口点无关。这样，我可以使用标准的 CUDA 工具集（即 nvprof、cuda-memcheck 等）调试用于 MEX 文件的代码，而无需处理 MEX 文件。然后，一旦我确定我没有错误或内存泄漏，我只需将其编译为 MEX 文件。或者，您总是可以将 cuda-gdb 附加到您的 MEX 文件中，尽管您的里程可能会因此而有所不同。

# html - 使用 HTML5 样板

> ID：14404192
> 
> 赞同：-2
> 
> 时间：2013-01-18T17:19:31.057
> 
> 标签：html, web, html5boilerplate

我已经搜索了有关如何使用 Boilerplate 的指南，但没有发现任何东西可以真正帮助我，所以如果之前有人问过这个问题，我深表歉意。我只是想知道我如何使用样板？我是 WebDev 新手，我什至不确定它是什么。它像记事本++吗？IE 我可以写 HTML 的东西吗？或者...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:31:06.603

样板文件是一组预先配置的文件（HTML、CSS、JS 库、配置文件、图像等），用于设置基本框架，从中开始定制和开发您自己的应用程序（独立或 Web）。

例如[HTML5 Boilerplate](http://html5boilerplate.com/)和[jQuery Boilerplate](http://jqueryboilerplate.com/)

通常这些样板文件必须下载并解压缩到您的开发目录中并进行定制。

一些项目（例如[Yeoman](http://yeoman.io/)）旨在自动化整个过程，为您提供可以定制的开发结构。

可以使用您常用的工具（记事本、TextMate、Sublime Text、Emacs、Dreamweaver 等）进行自定义。

然而，它需要对开发的许多方面有很好的了解才能达到一个好的定制水平（因为你必须在你的起始框架中调整很多东西），所以如果你是一个新手，我建议从一些更简单的开始逐渐接近它。

# objective-c - 删除出现在块级标记之前的 XHTML 换行符的正则表达式

> ID：14404194
> 
> 赞同：0
> 
> 时间：2013-01-18T17:19:37.767
> 
> 标签：objective-c, regex, html-parsing, lookbehind

我需要一个正则表达式来查找`<br />`块标签之前出现的无关标签，而使所有其他`<br />`标签保持不变。

这是我正在搜索的文本：

```
<div>some text<br id="first"/>some more text<br id="second"/></div> 
```

但是，当使用以下 RegEx 时：

```
</? *br.*?>(?=</? *([^(br)]).*?) 
```

它选择第一个`<br />`标签之后的所有内容，如下所示：

```
<br id="first"/>some more text<br id="second"/> 
```

...这不是我想要的。如何修改表达式使其***仅***选择`<br id="second"/>`？

**注意**：***除*** `<br />`标签之外的所有内联标签都在此之前被删除，因此它们不会成为影响因素。另外，我使用的是 Obj-C/Cocoa，所以我不能使用所有那些花哨的 PHP 函数。:)。此外，这将是一个有效的 XHTML 文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:21:28.993

```
<br[^<>]*>(?=\s*<(?!br)) 
```

应该做你想做的。[（看这里）](http://regex101.com/r/hI7aY1)

**正则表达式的解释：**

```
<br     # Match <br
[^<>]*  # followed by any number of non-bracket characters
>       # and a >.
(?=     # Assert that we are right before...
 \s*    # optional whitespace,
 <      # followed by any tag
 (?!br) # except br
)       # (End of lookahead) 
```

**一些评论：**

*   我已经从您的正则表达式中删除了可选的斜杠，因为`</br>`在 HTML 或 XHTML 中不存在。
*   我还删除了标签开头的可选空格，因为`<`标签名称和标签名称之间可能没有空格（和之间也可能没有空格`/`）`>`。
*   顺便说一句：在有效的 XHTML 中，`<br />`是唯一合法的形式；`<br id="foo" />`是无效的。

# android - 我的 C 原生程序如何检测它是否在 Android 平台上运行

> ID：14404195
> 
> 赞同：0
> 
> 时间：2013-01-18T17:19:39.967
> 
> 标签：android, environment-variables, native

我正在我的 Linux 笔记本电脑上编写一些 C 应用程序，但在办公室，偶尔会使用 ndk-build 将其移植到 android 平台。每次切换平台时，我都需要更改一堆特定于我的笔记本电脑或 android 平台的路径。所以我目前将其设置为：

```
#define ANDROID 1

#ifdef ANDROID
  #define ....
  #define ... bunch of stuff specific to android
#else
  #define ... bunch of stuff specific to my laptop. 
#endif 
```

每次我必须记住注释/取消注释 #define ANDROID 行。越来越烦人了。有什么方法可以直接检测我是在 android 环境还是常规 linux 环境中运行，然后相应地设置我的路径？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:45:35.597

把这样的东西放在你的 Android.mk

```
LOCAL_CFLAGS    := -DANDROID 
```

其中 -D 是预定义符号的标志，ANDROID 是要定义的符号

然后您的代码中的#ifdef ANDROID 块将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:27:44.927

这取决于你如何发展。您可以使用 Makefile 的参数，或者如果您使用 Eclipse，那么您可能每个平台都有一个项目。在每个项目中，设置了与目标平台对应的各个变量。

# ruby - Ruby 1.9.3 用 eval 定义 var

> ID：14404198
> 
> 赞同：1
> 
> 时间：2013-01-18T17:19:48.400
> 
> 标签：ruby, variables, eval

我正在用 Ruby 编写类似 REPL 的东西，我需要在运行时定义变量。我发现我应该使用 eval，但这里是 irb session 的摘录来测试它。在 1.9.3 中（这将在 1.8 中工作）

```
> eval 'a = 3'
=> 3
> a
=> NameError: undefined local variable or method `a' for main:Object 
```

他们在 1.9 中将其更改为：

```
> eval 'a = 3'
=> 3 
> eval 'a'
=> 3 
```

所以似乎从 1.9 开始就改变了。如何使用 eval （或类似的东西）在 1.9.3 中定义变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:55:35.240

[IRB 在骗你](https://stackoverflow.com/a/715159/17875)。这是一个*脚本*：

```
eval 'a = 3'
puts a 
```

对我来说，在 1.8.7 和 1.9.3 下以同样的方式失败。

不幸的是，您和该答案中提到的等价物，

```
eval 'a = 3'
eval 'puts a' 
```

在 1.9 中仍然不能作为脚本工作，尽管它在 1.8 中可以工作。

但是，这对我来说在以下两个方面都有效：

```
b = binding
b.eval 'a = 3'
b.eval 'puts a' 
```

使用相同的[绑定](http://www.ruby-doc.org/core-1.9.3/Binding.html)意味着变量赋值都发生在相同的上下文中。您将无法从外部读取它们，因为本地人在编译时绑定，但如果您正在编写 REPL，“编译时”只是“当我得到另一行并评估它时”这很好.

# mysql - MySQL 语法不选择列中的“_”数据

> ID：14404199
> 
> 赞同：2
> 
> 时间：2013-01-18T17:19:54.613
> 
> 标签：mysql, sql

如果有人可以在这里帮助我，我很高兴。

我有一个表 Table1 和列 XXXXXX 的数据如下

```
XXXXXX
---------
1
2
1
2
x_y
A_12
3
12345_abcd 
```

我希望输出为

```
XXXXXX
---------
1
2
3 
```

我尝试了以下查询

```
select DISTINCT XXXXXX from Table1 where XXXXXX NOT LIKE '%_%'; 
```

也试过`SELECT DISTINCT XXXXXX FROM Table1 WHERE CHAR ('_','XXXXXX')=0;`

上面的查询正在从表中获取所有内容。任何人都可以在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T17:23:21.303

尝试：

```
WHERE  XXXXXX NOT LIKE '%\\_%' ESCAPE '\\' 
```

“转义”字符告诉 MySQL 下划线将被解释为文字下划线字符，而不是通配符。（在 LIKE 表达式中，下划线 ( `_`) 是匹配任何单个字符的通配符，就像百分号 ( `%`) 是匹配零个、一个或多个字符的通配符一样。

注意其他字符可以作为转义字符；它不必是反斜杠。反斜杠本身是 MySQL 中的转义字符，因此有一个反斜杠被识别为 LIKE 的转义字符，我们必须使用双反斜杠“ `\\`”。这使得 MySQL 将其识别为单个反斜杠字符。

例如，我们可以使用克拉“ `^`”字符作为转义字符，如下所示：

```
WHERE  XXXXXX NOT LIKE '%^_%' ESCAPE '^' 
```

`%`类似地，转义字符可用于使用 LIKE 运算符搜索文字百分号，如下所示：

```
WHERE foo LIKE '%\\%%' ESCAPE '\\' 
```

（这将搜索 foo 中出现的百分号字符。）

* * *

作为 NOT LIKE 运算符的替代方法，我们可以使用“NOT REGEXP”运算符来排除 foo 包含下划线字符的行，如下所示：

```
WHERE foo NOT REGEXP '_' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:23:00.080

尝试这个

```
 select XXXXXX from Table1 
   where XXXXXX NOT LIKE '%_%'
   GROUP BY XXXXXX 
```

**编辑**。

尝试这个

```
 select XXXXXX from Table1 
   where  XXXXXX NOT LIKE '%\\_%' ESCAPE '\\'
   GROUP BY XXXXXX 
```

[**在这里演示 SQLFIDDLE**](http://sqlfiddle.com/#!2/332b8/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:23:12.640

```
Select Distinct coolColumnName 
from CoolTableName
WHERE coolColumnName not like '%_%' 
```

# c - 在winsock中接收奇怪的字符/符号

> ID：14404202
> 
> 赞同：4
> 
> 时间：2013-01-18T17:20:03.723
> 
> 标签：c, winsock, winsock2, winsockets

我正在了解 Winsock，并且在发送和接收简单字符串时遇到了一个奇怪的问题。这是我的代码（纯 C）：

## 客户：

```
 //...
//Declarations and stuff

//----------- SEND SOME DATA -------------------------------------------------

    char string1[] = "string-1";
    int bytes_sent = 0;

    bytes_sent = send(client_socket, string1, strlen(string1), 0);  

    printf("BYTES SENT: %i\n", bytes_sent);
    printf("\n-----------------------------------------------\n\n");

    system("pause");

//... 
```

## 服务器：

```
 //...
//Declarations and stuff

//----------- START LISTENING FOR REQUESTS ------------------------------------

    SOCKET ClientSocket;

    #define BUFFER_SIZE 256

    int size;
    struct sockaddr_in client_info;
    char client_ip[16];
    char data_received[BUFFER_SIZE];    
    int bytes_received = 0; 

    listen(ListenSocket, SOMAXCONN);

    while(1){           

        ClientSocket = accept(ListenSocket, (struct sockaddr *)&client_info, &size);        
        strcpy(client_ip, inet_ntoa(client_info.sin_addr));     

        do{

            bytes_received = recv(ClientSocket, data_received, BUFFER_SIZE, 0);

            if(bytes_received > 0){
                printf("DATA RECEIVED FROM %s: %s (%i bytes)\n", client_ip, data_received, bytes_received);
            }

        }while(bytes_received > 0);

        printf("\n-----------------------------------------------\n\n");

    }

//... 
```

问题是服务器打印了我的字符串+一些奇怪的符号（见图）。

[奇怪的符号](http://img829.imageshack.us/img829/7877/dibujozjn.jpg)

我使用流套接字。这个例子很简单，所以我不知道有什么问题。如果我随机修改字符串或服务器的缓冲区大小，或两者兼而有之，问题就会消失（服务器打印 OK 字符串）。如果在 send() 调用中我使用 sizeof() 而不是 strlen()，问题就解决了。我有点迷失在这里。如果我遗漏了什么，请多多关照，这是我在这里的第一篇文章。我可以提供整个代码（它基本上是 winsock 启动和套接字定义）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T18:32:48.393

您发送的数据不包含终止空字符：

```
bytes_sent = send(client_socket, string1, strlen(string1), 0); 
```

...因为`strlen`不计算终止的空值。这本身并不完全是问题，而是与接收方的事实相结合：

```
char data_received[BUFFER_SIZE];
// ...
bytes_received = recv(ClientSocket, data_received, BUFFER_SIZE, 0); 
```

`data_received`未初始化，您最多可以接收`BUFFER_SIZE`字节。这意味着由于您发送的数据不是以空值结尾的：

*   如果`bytes_received < BUFFER_SIZE`，其余部分`data_received` *可能*未初始化，因此访问/打印将是未定义的行为。正如文档所说，实际上并不是 100% 清楚：

    > [...] 调用 recv 将返回当前可用的尽可能多的数据——最大为指定的缓冲区大小 [...]

    ...所以这可能意味着缓冲区的其余部分保持不变。

*   如果`bytes_received == BUFFER_SIZE`，则没有空终止符，因此`printf`将通过尝试打印来调用未定义的行为，因为它不知道字符串在哪里停止并且会溢出数组。

解决这些问题的最简单方法是发送空终止符：

```
bytes_sent = send(client_socket, string1, strlen(string1)+1, 0); // +1 here
bytes_sent = send(client_socket, string1, sizeof(string1), 0);   // same as above 
```

...或少接收一个字节并将空终止符放在接收大小上：

```
bytes_received = recv(ClientSocket, data_received, BUFFER_SIZE-1, 0); // -1 here
data_received[bytes_received] = 0; 
```

我个人会选择第一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T18:33:10.987

所以问题是您没有发送终止`NUL`字节，但您似乎将接收到的字符串视为 C 字符串（即您假设它是 NUL 终止的）。修复它，而不是

```
bytes_sent = send(client_socket, string1, strlen(string1), 0); 
```

写

```
bytes_sent = send(client_socket, string1, strlen(string1) + 1, 0); 
```

此外，您提到“没有人使用`strlen(s) + 1`” - 可能是因为他们关注接收方接收到的字节数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T18:21:19.543

尝试设置所有字符串数据的长度，然后像这样终止服务器中的字符串：

```
bzero(data_received, sizeof(data_received));
bytes_received = recv(ClientSocket, data_received, BUFFER_SIZE, 0);
data_received[bytes_received] = '\0'; 
```

如果这不能解决，也许@H2CO3 可以帮助您更好地阅读您的要求：]

# mysql - Symfony2：嵌入多对多实体的表单引发异常

> ID：14404205
> 
> 赞同：0
> 
> 时间：2013-01-18T17:20:13.323
> 
> 标签：mysql, forms, symfony, doctrine-orm

# 问题

我一直在尝试按照教程将表单嵌入到另一个表单中。我在这里尝试做的是添加一个任务，并为其添加多个类别。我正在使用[http://symfony.com/doc/current/book/forms.html#embedding-a-single-object](http://symfony.com/doc/current/book/forms.html#embedding-a-single-object)上的示例，但我添加了一些 ORM 注释以使关系成为多对多。因此，这是我的任务和类别实体的代码：

# 代码

## 任务实体

```
<?php

namespace Acme\TaskBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * Task
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Task
{
    /**
     * @ORM\ManyToMany(targetEntity="Category", inversedBy="tasks")
     * @ORM\JoinTable(name="tasks_categories")
     *
     * @Assert\Type(type="Acme\TaskBundle\Entity\Category")
     */
    protected $categories;

    // ...

    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;

    /**
     * Get id
     *
     * @return integer
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     * @return Task
     */
    public function setName($name)
    {
        $this->name = $name;

        return $this;
    }

    /**
     * Get name
     *
     * @return string
     */
    public function getName()
    {
        return $this->name;
    }
    /**
     * Constructor
     */
    public function __construct()
    {
        $this->categories = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Add categories
     *
     * @param \Acme\TaskBundle\Entity\Category $categories
     * @return Task
     */
    public function addCategorie(\Acme\TaskBundle\Entity\Category $categories)
    {
        $this->categories[] = $categories;

        return $this;
    }

    /**
     * Remove categories
     *
     * @param \Acme\TaskBundle\Entity\Category $categories
     */
    public function removeCategorie(\Acme\TaskBundle\Entity\Category $categories)
    {
        $this->categories->removeElement($categories);
    }

    /**
     * Get categories
     *
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getCategories()
    {
        return $this->categories;
    }
} 
```

## 类别实体

```
<?php

namespace Acme\TaskBundle\Entity;
use Symfony\Component\Validator\Constraints as Assert;

use Doctrine\ORM\Mapping as ORM;

/**
 * Category
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Category
{
    /**
     * @ORM\ManyToMany(targetEntity="Task", mappedBy="categories")
     */
    private $tasks;

    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     * @return Category
     */
    public function setName($name)
    {
        $this->name = $name;

        return $this;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }
    /**
     * Constructor
     */
    public function __construct()
    {
        $this->tasks = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Add tasks
     *
     * @param \Acme\TaskBundle\Entity\Task $tasks
     * @return Category
     */
    public function addTask(\Acme\TaskBundle\Entity\Task $tasks)
    {
        $this->tasks[] = $tasks;

        return $this;
    }

    /**
     * Remove tasks
     *
     * @param \Acme\TaskBundle\Entity\Task $tasks
     */
    public function removeTask(\Acme\TaskBundle\Entity\Task $tasks)
    {
        $this->tasks->removeElement($tasks);
    }

    /**
     * Get tasks
     *
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getTasks()
    {
        return $this->tasks;
    }
} 
```

两种表格都是使用`doctrine:generate:form`命令自动生成的。我更改了 TaskType 表单以包含以下类别：

## 任务类型表单

```
<?php

namespace Acme\TaskBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class TaskType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name')
            ->add('categories', new CategoryType())
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Acme\TaskBundle\Entity\Task',
            'cascade_validation' => true,
        ));
    }

    public function getName()
    {
        return 'task';
    }
} 
```

现在，当我转到任务的创建页面时，出现此错误：

> 表单的视图数据应该是 Acme\TaskBundle\Entity\Category 类的一个实例，但它是 Doctrine\Common\Collections\ArrayCollection 类的一个实例。您可以通过将“data_class”选项设置为 null 或添加将类 Doctrine\Common\Collections\ArrayCollection 的实例转换为 Acme\TaskBundle\Entity\Category 的实例的视图转换器来避免此错误。

老实说，我不知道如何解决它，因为这似乎是一件非常简单的事情，但显然事实并非如此。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:39:20.707

在您`Task Entity`删除类别的验证。
Symfony 尝试将 ArrayCollection 验证为一个类别！（因此出现错误）

```
* @Assert\Type(type="Acme\TaskBundle\Entity\Category")
*/
$categories; 
```

这不是必需的，因为它是一个集合。（验证将基于集合中的对象类型）
如果您创建了 CategoryType 表单，那么该表单应该返回`Acme\TaskBundle\Entity\Category`它的数据类。

```
class CategoryType {
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Acme\TaskBundle\Entity\Category',
        .....
        ));
    }
} 
```

此外，在您的 TaskType

```
$builder
    ->add('name')
    ->add('categories', new CategoryType()) // new CategoryType()
                                            // is not really needed here,
                                            // symfony will automatically detect
                                            // it's relation and create a new 
                                            // CategoryType if necessary. 
```

# android - 第一个活动全屏android

> ID：14404207
> 
> 赞同：0
> 
> 时间：2013-01-18T17:20:23.520
> 
> 标签：android

我想让我的**第一个活动**全屏，而不是所有活动，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:51:51.087

在`Manifest`文件中，仅为要全屏显示的 添加`android:theme="@android:style/Theme.NoTitleBar.Fullscreen"`属性。`activity`

**例如 ：**

```
<activity android:name=".FirstActivity"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
</activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:23:58.603

在您想要全屏显示的您的活动的 oncreate 方法中调用 setcontentView(--) 之前调用下面的方法。

```
public void setFullScreen() {
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:24:14.050

添加：

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                    WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

到你想要全屏模式的 Activity 的 onCreate() 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-29T03:36:24.013

在您想要全屏的活动的 onCreate 方法中，您可以使用以下代码。

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

在 setContentView 之后写这段代码

# razor - 在 Razor 视图中，如何为文本框构建查找？

> ID：14404208
> 
> 赞同：0
> 
> 时间：2013-01-18T17:20:24.923
> 
> 标签：razor, asp.net-mvc-4

我正在使用 razor 视图引擎创建一个 MVC4 应用程序。在编辑页面上，我有一个文本框，其中包含用户将从列表中选择的值（存储在另一个表中）。例如，假设我们有一个客户编辑页面，除了客户表之外，我们还有另一个称为客户类型的表。

我想在客户类型字段旁边的客户编辑页面上添加一个按钮，但会打开一个带有可排序网格的模式窗口，我可以从客户类型表中选择一个特定的客户类型。我将如何做到这一点？

# performance - 为什么我在这个 PostgreSQL 查询上得到一个“哈希连接”和 FTS？

> ID：14404209
> 
> 赞同：3
> 
> 时间：2013-01-18T17:20:25.910
> 
> 标签：performance, postgresql, join, hash, indexing

我正在尝试优化以下场景：

以文字格式：我有 2 个表格，`alerts`并且`user_devices`; 在`user_devices`我们跟踪与 a 耦合的设备是否`user_id`想要获得通知，在`alerts`表中我们跟踪用户到通知者的关系。基本上，任务是选择每个`user_id`具有任何警报并允许向其注册的任何设备发出通知。

表“警报”，大约 90 万条记录：

```
 Table "public.alerts"
   Column    |           Type           | Modifiers 
-------------+--------------------------+-----------
 id          | uuid                     | not null
 user_id     | uuid                     | 
 target_id   | uuid                     | 
 target_type | text                     | 
 added_on    | timestamp with time zone | 
 old_id      | text                     | 
Indexes:
    "alerts_pkey" PRIMARY KEY, btree (id)
    "one_alert_per_business_per_user" UNIQUE CONSTRAINT, btree (user_id, target_id)
    "addedon" btree (added_on)
    "targetid" btree (target_id)
    "userid" btree (user_id)
    "userid_targetid" btree (user_id, target_id)
Foreign-key constraints:
    "alerts_user_id_fkey" FOREIGN KEY (user_id) REFERENCES users(id) 
```

表 'user_devices'，大约 12k 条记录：

```
 Table "public.user_devices"
       Column        |           Type           | Modifiers 
---------------------+--------------------------+-----------
 id                  | uuid                     | not null
 user_id             | uuid                     | 
 device_id           | text                     | 
 device_token        | text                     | 
 push_notify_enabled | boolean                  | 
 device_type         | integer                  | 
 device_name         | text                     | 
 badge_count         | integer                  | 
 added_on            | timestamp with time zone | 
Indexes:
    "user_devices_pkey" PRIMARY KEY, btree (id)
    "push_notification" btree (push_notify_enabled)
    "user_id" btree (user_id)
    "user_id_push_notification" btree (user_id, push_notify_enabled)
Foreign-key constraints:
    "user_devices_user_id_fkey" FOREIGN KEY (user_id) REFERENCES users(id) 
```

以下查询：

```
select COUNT(DISTINCT a.user_id) 
from alerts a 
  inner join user_devices ud on a.user_id = ud.user_id 
WHERE ud.push_notify_enabled = true; 
```

大约需要 3 秒并生成以下计划：

```
explain select COUNT(DISTINCT a.user_id) from alerts a inner join user_devices ud on a.user_id = ud.user_id WHERE ud.push_notify_enabled = true;
                                     QUERY PLAN                                     
------------------------------------------------------------------------------------
 Aggregate  (cost=49777.32..49777.33 rows=1 width=16)
   ->  Hash Join  (cost=34508.97..48239.63 rows=615074 width=16)
         Hash Cond: (ud.user_id = a.user_id)
         ->  Seq Scan on user_devices ud  (cost=0.00..480.75 rows=9202 width=16)
               Filter: push_notify_enabled
         ->  Hash  (cost=20572.32..20572.32 rows=801732 width=16)
               ->  Seq Scan on alerts a  (cost=0.00..20572.32 rows=801732 width=16) 
```

我错过了什么，有没有办法加快速度？

谢谢你。

== 编辑 ==

根据建议，尝试在连接内移动条件，没有区别：

```
=> explain select COUNT(DISTINCT a.user_id) from alerts a inner join user_devices ud on a.user_id = ud.user_id and ud.push_notify_enabled;
                                     QUERY PLAN                                     
------------------------------------------------------------------------------------
 Aggregate  (cost=49777.32..49777.33 rows=1 width=16)
   ->  Hash Join  (cost=34508.97..48239.63 rows=615074 width=16)
         Hash Cond: (ud.user_id = a.user_id)
         ->  Seq Scan on user_devices ud  (cost=0.00..480.75 rows=9202 width=16)
               Filter: push_notify_enabled
         ->  Hash  (cost=20572.32..20572.32 rows=801732 width=16)
               ->  Seq Scan on alerts a  (cost=0.00..20572.32 rows=801732 width=16) 
```

那么，没有办法摆脱 2 FTS 吗？如果我至少可以让它以某种方式使用“警报”表上的索引，那就太好了..

== 编辑 ==

添加`解释分析。

```
=> explain ANALYZE select COUNT(DISTINCT a.user_id) from alerts a inner join user_devices ud on a.user_id = ud.user_id and ud.push_notify_enabled;
                                                             QUERY PLAN                                                              
-------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=49777.32..49777.33 rows=1 width=16) (actual time=5254.355..5254.356 rows=1 loops=1)
   ->  Hash Join  (cost=34508.97..48239.63 rows=615074 width=16) (actual time=1824.607..2863.635 rows=614768 loops=1)
         Hash Cond: (ud.user_id = a.user_id)
         ->  Seq Scan on user_devices ud  (cost=0.00..480.75 rows=9202 width=16) (actual time=0.048..16.784 rows=9186 loops=1)
               Filter: push_notify_enabled
         ->  Hash  (cost=20572.32..20572.32 rows=801732 width=16) (actual time=1824.229..1824.229 rows=801765 loops=1)
               Buckets: 4096  Batches: 32  Memory Usage: 990kB
               ->  Seq Scan on alerts a  (cost=0.00..20572.32 rows=801732 width=16) (actual time=0.047..878.429 rows=801765 loops=1)
 Total runtime: 5255.427 ms
(9 rows) 
```

=== 编辑 ===

添加请求的配置。其中大部分是 Ubuntu PG9.1 默认值：

```
/etc/postgresql/9.1/main# cat postgresql.conf | grep -e "work_mem" -e "effective_cache" -e "shared_buff" -e "random_page_c"
shared_buffers = 24MB           # min 128kB
#work_mem = 1MB             # min 64kB
#maintenance_work_mem = 16MB        # min 1MB
#wal_buffers = -1           # min 32kB, -1 sets based on shared_buffers
#random_page_cost = 4.0         # same scale as above
#effective_cache_size = 128MB 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:57:58.287

正如评论中所说，真正的猪是`alerts`表的完整扫描。从逻辑上讲，对于给定的用户 ID，*任何和所有*记录都`alerts`可能与该用户 ID 匹配。

您有一种情况可能会限制扫描`push_notify_enabled`：你不需要它所在的行`false`。但是您缺少此列的索引，因此全扫描`alerts`仍然是连接两个表的最快方法。

~~`push_notify_enabled`如果您的 Postgres 版本支持，请尝试在 上使用位图索引。（显然，2 值列上的 btree 索引不好。）~~

为了加快查询速度，您必须限制要扫描的行数`alerts`，即在 的某些索引列上添加条件`alerts`。然后，如果索引足够有选择性，则可以进行索引扫描而不是完整扫描。

例如，如果有意义的话，您可以按目标 ID 或某些与日期相关的列进行过滤。

如果您有 900k 的警报全部处于活动状态，并且可以在用户之间任意共享，那么您别无选择；可能添加 RAM 以保持`alerts`表始终缓存可能会有所帮助。（添加硬件通常是最简单且最具成本效益的解决方案。）

AFAICT，您只对与推送通知相关的警报感兴趣。如果有推送通知的用户从不与没有推送通知的用户共享警报，则您可能会`alerts`被此条件有效拆分。

如果您有位图索引，则可以将`push_notify_enabled`列移动到`alerts`. 否则，您可能会尝试使用[partitioning](http://www.postgresql.org/docs/8.2/static/ddl-partitioning.html)在该列上物理拆分它。如果带有推送通知的警报数量明显低于警报总数，`alerts`则将扫描一小部分以进行加入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T15:41:07.490

用部分索引替换索引：

```
DROP INDEX    user_id_push_notification ;
CREATE INDEX    user_id_push_notification ON user_devices (user_id)
 WHERE push_notify_enabled =True
 ; 
```

，并将 random_page_cost 设置为较低的值：

SET random_page_cost = 1.1;

对我造成了`Index Scan using push_notification on user_devices ud`影响（< 300ms）。YMMV。

警报上的 seqscan 似乎或多或少是不可避免的，因为您期望 800K/900K := 88%) 行。仅当行大小非常​​大时，索引扫描才会有效，恕我直言。

更新：将用户表添加到查询中似乎会强制进行三重索引扫描。（但大约在同一时间）

```
explain  ANALYZE
select COUNT(DISTINCT a.user_id)
from alerts a
join user_devices ud on a.user_id = ud.user_id
join users us on a.user_id = us.id
WHERE ud.push_notify_enabled = true; 
```

# jquery - 禁用ajax重试调用

> ID：14404212
> 
> 赞同：3
> 
> 时间：2013-01-18T17:20:29.567
> 
> 标签：jquery, jquery-mobile

我使用 jquery mobile 开发移动应用程序，下一个代码进行 ajax 调用：

```
$.ajax({
timeout:ajaxTimeout,
url: url,
dataType: dataType,
data: {
    ···
},
success: function (response) { 
    ···
},
error: function(e, message){
    ···
},
complete: function(object, message){
    ···
}
}); 
```

从这个调用我收到一个超时，并自动重试。如何禁用此重试呼叫？我尝试使用一些参数，`retryCount: 0, retryLimit: 10,`但它没有用

# android - Phone Gap 还是原生 Android 包装器？

> ID：14404216
> 
> 赞同：1
> 
> 时间：2013-01-18T17:20:41.010
> 
> 标签：android, cordova, web-applications, mobile

我想开发一个可以在普通浏览器和 Android 应用程序中运行的应用程序。两者似乎都合适，但如果我使用 Phone Gap，部署与常规服务器托管网站相同的 html 内容并非易事并且需要修改，我是否正确？此外，Phone Gap 包装器中是否不需要多页应用程序？

有什么我应该考虑的替代方案吗？我很惊讶有人还没有编写一个已经完成所有硬件访问布线的 Android 包装器。还是有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:12:32.727

有几件事你应该知道，

1.  如果您还打算在 iOS 上发布您的应用程序，则不能为您的应用程序使用服务器托管网站。您的所有基本功能都必须基于您的应用程序资产，这是 iOS 准则之一，并且对于最佳 ui 性能（iOS 和 Android）也是有意义的。当您想要获取必须是最新的数据时，请明智地使用服务器端。

2.  未来将提供一些新的移动浏览器功能，允许您的网站使用设备硬件功能： [W3C 上的设备 API](http://www.w3.org/2009/dap/)

祝你好运哥们；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:33:05.273

您可以尝试使用 jquery 移动框架：

[http://www.jquerymobile.com](http://www.jquerymobile.com)

它是基于 jquery 的框架，用于开发适用于标准 Web 和多个移动设备（使用 cordova）的 Web 应用程序

# ruby - ruby... 基于拉的 Web 框架和设计模式

> ID：14404219
> 
> 赞同：1
> 
> 时间：2013-01-18T17:20:49.123
> 
> 标签：ruby, design-patterns, architecture, soa

请原谅这里的冗长，但我需要详细说明。

我最近构建了一个框架，它使用了一种非常规模式。从本质上讲，它是基于视图的拉动。Rails，imo，是一种基于推送的模式。您将模型中的数据通过控制器推送到视图上。

在我的设计中，视图使用自定义 Liquid (liquidmarkup.org) 标签和 drop 请求数据。这会触发对后端 API 的调用（或从 memcache 返回），后者返回 JSON，该 JSON 被转换为 ruby​​ 数组和散列，Liquid 可以迭代并用作视图中的对象。视图中没有业务逻辑。纯粹是拉。

当用户发布内容时，处理程序（又名控制器，但仅用于 PUTS 和 POSTS）处理验证并将数据再次传递给后端服务。根据结果​​，用户可以被重定向、呈现页面等......

这种方法的主要优点是我们的前端人员可以在不互相踩踏的情况下进行设计，并且非常适合我们的 SOA 环境。

我的问题......如果有的话，这类似于什么设计模式或者它是一种组合？有人知道使用类似方法的可比框架吗？我真的很想得到改进这个架构的想法，甚至有一天会构建一个开源版本。到目前为止，它对我们来说非常有效。

我期待你的评论。

# php - PHP PDO 从数组中删除

> ID：14404222
> 
> 赞同：1
> 
> 时间：2013-01-18T17:20:56.220
> 
> 标签：php, sql, pdo

我有一组 GUID：

```
Array
(
    [0] => 1770302746_580821208_2068022554_1652435499
    [1] => 595039408_884272175_1344680100_1997277231
    ...
) 
```

我将其内爆为逗号分隔的字符串*：

```
1770302746_580821208_2068022554_1652435499,595039408_884272175_1344680100_1997277231 
```

然后我将其传递给 sql DELETE 语句：

```
$q=$conn->prepare(" DELETE FROM su_posts_att_sort WHERE FileGUID IN ({$GUIDs}) ");
$q->execute(); 
```

但是，不会删除任何行。放置 try / catch 块以返回任何异常并没有引发任何异常。谁能让我知道我哪里出错了？

*还尝试过用双引号括起来的每个 GUID。

**编辑** 这是提交的sql：

```
DELETE FROM su_posts_att_sort WHERE FileGUID IN ('1770302746_580821208_2068022554_1652435499','595039408_884272175_1344680100_1997277231') 
```

通过控制台工作正常...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:30:02.803

你需要使用单引号，而不是双引号，当然也不能不加引号——它们包含下划线，所以它们肯定是字符串，而不是数字。

但是，不要仅仅添加引号，最好使用该`PDO::quote`方法，因为这将保证他们使用正确的引用，无论您使用什么数据库，也无论数据中可能潜伏着什么奇怪的字符。

您可以`PDO::quote`在一行代码中应用到数组中的所有元素，以及`implode()`使用`array_map()`. 像这样的东西：

```
$guids = implode(',', array_map(array($pdo,'quote'), $guidArray)); 
```

# android - 应用程序在启动时崩溃。

> ID：14404230
> 
> 赞同：-7
> 
> 时间：2013-01-18T17:21:22.320
> 
> 标签：android, button

我正在尝试编写井字游戏/应用程序，但无法正常工作。这段代码有什么问题？它在启动时崩溃。你能帮我么？？？

```
package com.example.tictactoe;

import android.os.Bundle;
import android.app.Activity;
import android.util.DisplayMetrics;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener {

    // Spremenljivke
    int width, height;
    int s1, s2;// score
    int pot;// Poteza
    int round;// Runda
    int i;// for...
    Button b1, b2, b3, b4, b5, b6, b7, b8, b9;
    TextView rez1, rez2, runda;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.activity_main);

        s1 = 0;
        s2 = 0;

        /*DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);

        height = metrics.heightPixels;
        width = metrics.widthPixels;*/

        b1.findViewById(R.id.button1);
        b2.findViewById(R.id.button2);
        b3.findViewById(R.id.button3);
        b4.findViewById(R.id.button4);
        b5.findViewById(R.id.button5);
        b6.findViewById(R.id.button6);
        b7.findViewById(R.id.button7);
        b8.findViewById(R.id.button8);
        b9.findViewById(R.id.button9);

        b1.setOnClickListener(this);
        b2.setOnClickListener(this);
        b3.setOnClickListener(this);
        b4.setOnClickListener(this);
        b5.setOnClickListener(this);
        b6.setOnClickListener(this);
        b7.setOnClickListener(this);
        b8.setOnClickListener(this);
        b9.setOnClickListener(this);

          rez1.findViewById(R.id.textView1); rez2.findViewById(R.id.textView3);
          runda.findViewById(R.id.textView2);
          rez1.setText(""+s1); rez2.setText(""+rez2); runda.setText(""+round);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch(v.getId()){
        case R.id.button1:
            rez1.setText("inside");
            break;
        case R.id.button2:
            rez1.setText("inside");
            break;
        case R.id.button3:
            rez1.setText("inside");
            break;
        case R.id.button4:
            rez1.setText("inside");
            break;
        case R.id.button5:
            rez1.setText("inside");
            break;
        case R.id.button6:
            rez1.setText("inside");
            break;
        case R.id.button7:
            rez1.setText("inside");
            break;
        case R.id.button8:
            rez1.setText("inside");
            break;
        case R.id.button9:
            rez1.setText("inside");
            break;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:28:39.960

你这样声明你的按钮：

```
b1.findViewById(R.id.button1);
        b2.findViewById(R.id.button2);
        b3.findViewById(R.id.button3);
        b4.findViewById(R.id.button4);
        b5.findViewById(R.id.button5);
        b6.findViewById(R.id.button6);
        b7.findViewById(R.id.button7);
        b8.findViewById(R.id.button8);
        b9.findViewById(R.id.button9); 
```

将其替换为：

```
b1=(Button)findViewById(R.id.button1); 
```

和其他类似的观点（b2，b3..，rez1，rez2..）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T17:25:39.150

您错误地分配了所有视图。代替：

```
b1.findViewById(R.id.button1); 
```

利用：

```
b1 = (Button) findViewById(R.id.button1); 
```

对于所有其他视图，依此类推。对于 TextViews 使用：

```
rez1 = (TextView) findViewById(R.id.textView1); 
```

另一方面，你对`setOnClickListener()`and的使用是正确的，所以不要改变它。`setText()`

# ruby-on-rails - 我的控制器找不到我的（操作）邮件程序！

> ID：14404231
> 
> 赞同：0
> 
> 时间：2013-01-18T17:21:31.163
> 
> 标签：ruby-on-rails, actionmailer

问候大家...

我试图找出一个我从未见过的问题，而且不应该在所有帐户中发生......

我正在使用带有简单/标准 ActionMailer 设置的 Rails 3.0.12：

*   我在 app/mailers 中有 HelpRequestMailer
*   我在 app/controllers 中有 HelpRequestsController

第一个问题......当我在我的控制器中调用邮件时......

help_request = HelpRequest.new(params[:help_request]) ... HelpRequestMailer.help_request_email(help_request).deliver

我收到以下错误：NameError（未初始化的常量 HelpRequestsController::HelpRequestMailer）

这本身就很奇怪。

当我添加以下...

需要 File.expand_path('../../mailers/help_request_mailer', **FILE** )

...到控制器的顶部（我希望路径是'../mailers/help_request_mailer'，但这不起作用）-我不应该这样做-控制器似乎找到了邮件但是似乎不知道它是什么/不知道如何处理它。我收到以下错误：

NoMethodError（HelpRequestMailer:Class 的未定义方法“help_request_email”）

这在技术上是正确的...... HelpRequestMailer 中没有 help_request_email 类方法......它是一个实例方法（如文档所指定）。

我的 ActionMailer 配置位于 config/application.rb

任何帮助/建议将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T21:39:30.623

我也遇到了这个问题，结果证明这是一个完全无用的错误消息。就我而言，这只是我的一些动作邮件程序或相关视图代码中的语法错误。

我认为发生的事情是，当 Rails 无法正确解析邮件程序或查看代码时，它只是绕过文件并且从未实例化操作邮件程序对象，从而导致控制器出错。

如果 Rails 因动作邮件程序代码本身的错误而绊倒，我会更喜欢它。

# php - 未完成功能弹窗关闭

> ID：14404232
> 
> 赞同：0
> 
> 时间：2013-01-18T17:21:36.367
> 
> 标签：php, javascript, mysql

我制作了一个带有提交表单的弹出窗口，提交后它必须关闭，但我首先想在不同页面中处理来自弹出窗口的信息而不显示其他页面。我该怎么做？

我的弹出窗口包含此代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <script type="text/javascript">
            function closeSelf(){
                self.close();
                return true;
            }
        </script>
        <title>Add Activity</title>
    </head>
    <body>
        <form action="./addact.php" method="post" onsubmit ="return closeSelf()">
        <table width="500" border="1"><br/>
            <tr>
                <td>Activity Name</td>
                <td>Assigned Person</td>
                <td>Deadline</td>
            </tr>
            <tr>
                <td> <input name="activities" type="text" size="40%"/></td>
                <td><input name="name" type="text" size="40%"/></td>
                <td><input type="date" name="deadline" size="20%"/></td>
            </tr>
        </table>
        <input type="submit" name = "saved" id="saved"/>
        </form>
    </body>
</html> 
```

我的另一个页面包含这个

```
<?php session_start(); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Untitled Document</title>
    </head>

    <?php
        include('config.php');

        $actname= $_POST['activities'];
        $assigned = $_POST['name'];
        $deadline = $_POST ['deadline'];

        $sql = "INSERT INTO ".$_SESSION['pname']."_activities 
                (actname, assigned, deadline) 
            VALUES 
                ('$actname', '$assigned', '$deadline')
        ";
        $query = mysql_query($sql);

        echo $_SESSION['pname'];

    ?>
    <body>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:24:49.760

您应该在返回响应时关闭窗口，而不是在提交页面时。正如@Marc B 指出的那样，您遇到了重大的安全问题！

# r - 在 R 中使用 print.xtable 按行设置数字？

> ID：14404241
> 
> 赞同：10
> 
> 时间：2013-01-18T17:22:08.013
> 
> 标签：r, rounding, knitr, xtable

我得到了一些报告，其中包含一些包含比例和绝对值的表格。现在我想以`digits=2`精确的方式显示包含比例的行，而绝对值仅显示为`digits=0`. `xtable` 我知道使用这样的调用可以开箱即用

```
xtable(tableWith3Cols,digits=c(0,0,2,2)) 
```

但是有没有办法明智地做同样的事情？

编辑：这是一个可重现的例子

```
require(xtable)
df <- data.frame(col1=rnorm(10),col2=runif(10,1,3))
xtable(df,digits=c(0,5,0)) 
```

回声

```
% latex table generated in R 2.15.1 by xtable 1.7-0 package
% Fri Jan 18 18:58:47 2013
\begin{table}[ht]
\begin{center}
\begin{tabular}{rrr}
\hline
& col1 & col2 \\ 
\hline
1 & -0.79222 & 3 \\ 
2 & 0.24845 & 2 \\ 
3 & 0.24217 & 2 \\ 
4 & -0.19935 & 2 \\ 
5 & 0.47873 & 2 \\ 
6 & 1.10494 & 2 \\ 
7 & 1.54076 & 1 \\ 
8 & 0.25272 & 2 \\ 
9 & -0.11308 & 1 \\ 
10 & -1.23875 & 2 \\ 
\hline
\end{tabular}
\end{center}
\end{table} 
```

这是柱状情况的解决方案。我得到 2 个不同的数字列，一个有 5 个数字，一个是完全舍入的。

我想要的是例如：第 2 行和第 10 行 5 位数字，所有其他 0 位数字。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T23:53:37.163

我的矩阵生成技能不是最优雅的，但这就是你要找的吗？

```
require(xtable)
df <- data.frame(col1=rnorm(10),col2=runif(10,1,3))
mdat <- matrix(c(rep(0,3), 0, 5, 0, rep(0, (7*3)), 0, 5, 0), 
                 nrow = 10, ncol=3, byrow=TRUE)
xtable(df,digits=mdat)
% latex table generated in R 2.15.1 by xtable 1.7-0 package
% Fri Jan 18 15:52:41 2013
\begin{table}[ht]
\begin{center}
\begin{tabular}{rrr}
  \hline
 & col1 & col2 \\ 
  \hline
  1  &      -0 & 3 \\ 
  2  & 1.16203 & 1 \\ 
  3  &       1 & 2 \\ 
  4  &       0 & 2 \\ 
  5  &       0 & 2 \\ 
  6  &      -1 & 2 \\ 
  7  &       1 & 2 \\ 
  8  &       1 & 2 \\ 
  9  &      -1 & 2 \\ 
  10 & 0.63731 & 2 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

或整排，

```
require(xtable)
df <- data.frame(col1=rnorm(10),col2=runif(10,1,3))
mdat <- matrix(c(rep(0,3),rep(5,3), rep(0, (7*3)), rep(5,3)),
                 nrow = 10, ncol=3, byrow=TRUE)
xtable(df,digits=mdat)
% latex table generated in R 2.15.1 by xtable 1.7-0 package
% Fri Jan 18 16:00:12 2013
\begin{table}[ht]
\begin{center}
\begin{tabular}{rrr}
  \hline
 & col1 & col2 \\ 
  \hline
  1  &       -0 & 1       \\ 
  2  &  1.36652 & 2.10159 \\ 
  3  &        0 & 2       \\ 
  4  &       -2 & 2       \\ 
  5  &       -1 & 2       \\ 
  6  &        0 & 2       \\ 
  7  &       -0 & 2       \\ 
  8  &       -0 & 1       \\ 
  9  &       -1 & 2       \\ 
  10 & -0.44182 & 2.09663 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

# matlab - 是否可以在 CUDA 内核代码中处理 mxarray ？

> ID：14404245
> 
> 赞同：0
> 
> 时间：2013-01-18T17:22:21.217
> 
> 标签：matlab, cuda, mex

我尝试将所有 mxArray 作为其类型传递给 CUDA 的内核代码。使用 mxArray 类型在内核上处理它或转换为普通的 C 数组是更好的方法吗？简而言之，在 CUDA 内核上处理 matlab 数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:55:00.137

你不能对`mxArray`s 进行操作。最好提取 C 指针并将它们传递给内核。

# jquery - 如何将 nextUntil 与子选择器一起使用？

> ID：14404248
> 
> 赞同：3
> 
> 时间：2013-01-18T17:22:26.613
> 
> 标签：jquery

鉴于此标记：

```
<ul>
    <li><a class="level1 selected">1</a></li>
    <li><a class="level2">2</a></li>
    <li><a class="level2">3</a></li>
    <li><a class="level2">4</a></li>
    <li><a class="level1">1</a></li>
    <li><a class="level2">5</a></li>
    <li><a class="level2">6</a></li>
    <li><a class="level2">7</a></li>
    <li><a class="level1">1</a></li>
</ul> 
```

如何选择其子`LI`项具有类`level2`的标签紧跟在`LI`其子项具有类的标签之后`selected`？

我的初始代码失败，因为我无法正确使用 nextUntil() 函数。

```
// Selects the parent of the select A tag    
var selectedParent = $("ul li a.selected.level1").parents("li");

selectedParent.nextUntil("li a.level1").each(function () {
    $(this).children().addClass("on");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:24:25.093

```
$lvl1 = $('a:not(.level2)').closest('li');
$lvl2 = $('a.selected').closest('li').nextUntil($lvl1); 
```

或单行：

```
$lvl2 = $('a.selected').closest('li').nextUntil($('a:not(.level2)').closest('li')); 
```

[http://jsfiddle.net/mblase75/jKCrH/](http://jsfiddle.net/mblase75/jKCrH/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:29:35.327

您可以为此创建一个自定义函数，而不是使用复杂的选择器（这将遍历 jQuery 中的太多对象）。我认为这会更有效率。在这里尝试[**演示**](http://jsfiddle.net/ZRMp7/)

```
$.fn.nextTillList1 = function () {
    return this.each(function () {
        var $item = $(this).next("li");
        while($item.find(".level1").length <= 0) {
            $item.children().addClass("on");
            $item = $item.next("li");
        }
    });
};

// Selects the parent of the select A tag    
var selectedParent = $("ul li a.selected.level1").parents("li");

// Call custom function
selectedParent.nextTillList1(); 
```

# ruby-on-rails - 验证失败后，CarrierWave 显示用户头像而不是 tmp

> ID：14404253
> 
> 赞同：0
> 
> 时间：2013-01-18T17:22:54.830
> 
> 标签：ruby-on-rails, carrierwave

我有 CarrierWave 和 FileSizeValidator (https://gist.github.com/795665) 工作，但是当验证失败时我遇到了问题。

场景 1：用户尚未上传自定义头像，因此我在其仪表板中显示网站默认头像。用户尝试上传文件太大的新图像。验证按预期失败，但我无法显示站点默认头像，因为`<% if @user.avatar_url(:thumb) %>`CarrierWave 将所有缓存数据都保存在`@user.avatar`.

场景 2：与第一个场景的唯一区别是用户已经有一个自定义头像并正在尝试将其更新为新头像。这里也会发生同样的事情。我无法显示用户的实际头像，因为 CarrierWave 中存储了所有缓存数据。

场景 3： FileSizeValidator 通过，但`avatar_cache`不起作用。

我要完成的工作：

用户拥有站点默认头像或自定义头像，当验证失败时，我希望显示他们当前的头像（站点默认或自定义）（而不是失败的缓存）。我还想保留来自 CarrierWave 的缓存数据，以防表单提交由于另一个验证而失败（假设密码错误），因此用户不必再次选择图像来上传。我想用`:avatar_cache`它。

*几乎当我希望缓存显示（其他验证失败）时它不会显示，而当我不希望它显示时（载波验证失败）它会显示。*

**模型/用户.rb**

```
attr_accessible :username, :email, :password, :password_confirmation, :postcount, :last_activity_at, :role, :avatar, :remove_avatar, :remote_avatar_url, :avatar_cache
require 'file_size_validator'
mount_uploader :avatar, AvatarUploader
validates :avatar, :file_size => { :maximum => 512.kilobytes.to_i } 
```

**意见/用户/edit.html.erb**

```
<% if @user.avatar_url(:thumb) %>
  <%= image_tag(@user.avatar_url(:thumb)) %>
<% else %>
  <%= image_tag('/assets/theme/avatar-blank.png') %>
<% end %>
<table>
  <% if @user.errors.messages[:avatar] %>
  <tr>
    <td colspan="2">
      <span class="error"><%= @user.errors.messages[:avatar].flatten.join %></span>
    </td>
  </tr>
  <% end %>
  <tr>
    <td style="padding-right: 20px;">Upload from your PC: </td>
    <td><input class="file optional" id="user_avatar" name="user[avatar]" type="file" /></td>
  </tr>
  <tr>
    <td>Upload from a URL: </td>
    <td>
      <input class="string url optional" id="user_remote_avatar_url" name="user[remote_avatar_url]" size="50" type="url" />
      <input class="hidden" id="user_avatar_cache" name="user[avatar_cache]" type="hidden" value="" />
    </td>
  </tr>
<% if @user.avatar_url(:thumb) %>
  <tr>
    <td>Or remove your avatar: </td>
    <td>
      <input type="checkbox" id="remove_avatar" name="user[remove_avatar]" />
    </td>
  </tr>
<% end %> 
```

**上传者/avatar_uploader.rb**

```
class AvatarUploader < CarrierWave::Uploader::Base

  include CarrierWave::RMagick

  storage :file

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  version :thumb do
    process :resize_to_limit => [120, 120]
  end
  version :mini_thumb do
    process :resize_to_limit => [50, 50]
  end

  def extension_white_list
    %w(jpg jpeg gif png)
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:51:28.807

当文件大小验证未通过时，我想出了如何摆脱 /tmp 文件。您可以将图像重置为之前的图像。

```
@user.avatar = @user.avatar.retrieve_from_store!(@user.avatar.identifier) 
```

我还没有弄清楚为什么当不同的验证失败时我的 avatar_cache 不起作用，但我暂时搁置了它，稍后会重新访问。

# excel - iis 使用 system.diagnostics.process 打开 excel 宏

> ID：14404254
> 
> 赞同：0
> 
> 时间：2013-01-18T17:22:55.543
> 
> 标签：excel, iis, process.start

我们有一个托管在 iis 6.0 上的 Web 服务，它打开一个指定的 excel 模板文件。并且宏“t.xla”应该在excel打开后从数据库中检索数据，准备好供客户端下载。问题是宏似乎没有运行。代码如下（我现在不在公司，所以我只写伪代码）：

```
System.Diagnostics.ProcessStartInfo pStartInfo = new ProcessStartInfo(excelAppPath, excelTemplatePath);
//nomal window is in debug mode, createNoWindow will be used in product envirionment
pStartInfo.WindowStyle = ProcessWindowStyle.Nomal;

System.Diagnostics.Process process = new Process();
process.Start(pStartInfo);
log.Info("Excel Process was started"); 
```

当我运行此代码时，1）可以看到 excel.exe 是从任务管理器启动的。2）excel.exe在桌面上没有创建窗口，有人说应该是，因为iis有限。3）我确定宏“t.xla”没有运行，因为不存在应该由宏写入的日志。当我双击任何一个excel模板时，都会找到日志。

现在 iis 工作进程在本地 SYSTEM 帐户中运行，并且已经启用 IIS Admin Service 与桌面交互。模板文件和日志文件所在的目录也可以由每个人编写

谁能给我一些建议？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:52:02.570

您可能想要使用本地系统以外的其他帐户 - 这样您就可以使用该帐户登录并尝试相同的操作以查看是否弹出任何可能阻止事情进一步发展的对话框或错误，例如宏安全设定。微软不支持以这种方式运行 Excel，但这并不意味着你不能让它工作。查看这篇文章，它涵盖了更多需要考虑的细节：http: [//support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)

# javascript - 切换两侧按钮 css

> ID：14404256
> 
> 赞同：0
> 
> 时间：2013-01-18T17:23:05.720
> 
> 标签：javascript, jquery, css, button, radio-button

我用一些教程 jsfiddle.net/EC2Eh/12/ 创建了一个 css 按钮，但这是基于 jquery mobile 的。如何仅使用 javascript 创建一个类似于该按钮的类似按钮，以及我可以更改按钮颜色和尺寸的地方。

在这个 jsfiddle.net/EC2Eh/12/ 上，我无法更改任何颜色、尺寸等。所以你能告诉我是否有一些教程来构建这个按钮栏（单选按钮），它可以像那样工作，但我可以改变所有的东西。

非常感谢！抱歉，我的英语不是很好，但我租得很用力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:35:40.677

您只需执行 3 个步骤：

1.  取 2 个 div
2.  调整高度，宽度
3.  给 div 圆角边框
4.  在 MouseHover 事件和 onClick 事件上更改颜色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:31:13.380

下载firefox的firebug，右键单击小提琴中的元素并复制该元素的所有css并将其应用于您的按钮。

# mysql - MySQL 通过 UPDATE / DELETE 合并重复的数据记录

> ID：14404259
> 
> 赞同：4
> 
> 时间：2013-01-18T17:23:16.660
> 
> 标签：mysql, sql, duplicates, union

我有一个看起来像这样的表：

```
mysql> SELECT * FROM Colors;
╔════╦══════════╦════════╦════════╦════════╦════════╦════════╦════════╗
║ ID ║ USERNAME ║  RED   ║ GREEN  ║ YELLOW ║  BLUE  ║ ORANGE ║ PURPLE ║
╠════╬══════════╬════════╬════════╬════════╬════════╬════════╬════════╣
║  1 ║ joe      ║ 1      ║ (null) ║ 1      ║ (null) ║ (null) ║ (null) ║
║  2 ║ joe      ║ 1      ║ (null) ║ (null) ║ (null) ║ 1      ║ (null) ║
║  3 ║ bill     ║ 1      ║ 1      ║ 1      ║ (null) ║ (null) ║ 1      ║
║  4 ║ bill     ║ (null) ║ 1      ║ (null) ║ 1      ║ (null) ║ (null) ║
║  5 ║ bill     ║ (null) ║ 1      ║ (null) ║ (null) ║ (null) ║ (null) ║
║  6 ║ bob      ║ (null) ║ (null) ║ (null) ║ 1      ║ (null) ║ (null) ║
║  7 ║ bob      ║ (null) ║ (null) ║ (null) ║ (null) ║ (null) ║ 1      ║
║  8 ║ bob      ║ 1      ║ (null) ║ (null) ║ (null) ║ (null) ║ (null) ║
╚════╩══════════╩════════╩════════╩════════╩════════╩════════╩════════╝ 
```

我想运行一个`UPDATE`and`DELETE`来查找并删除重复项并合并记录，以便我们以此作为结果结束。

```
mysql> SELECT * FROM Colors;
╔════╦══════════╦═════╦════════╦════════╦════════╦════════╦════════╗
║ ID ║ USERNAME ║ RED ║ GREEN  ║ YELLOW ║  BLUE  ║ ORANGE ║ PURPLE ║
╠════╬══════════╬═════╬════════╬════════╬════════╬════════╬════════╣
║  1 ║ joe      ║   1 ║ (null) ║ 1      ║ (null) ║ 1      ║ (null) ║
║  3 ║ bill     ║   1 ║ 1      ║ 1      ║ 1      ║ (null) ║ 1      ║
║  6 ║ bob      ║   1 ║ (null) ║ (null) ║ 1      ║ (null) ║ 1      ║
╚════╩══════════╩═════╩════════╩════════╩════════╩════════╩════════╝ 
```

我知道我可以使用脚本轻松完成此操作，但为了更好地学习和理解 MySQL，我想学习如何使用 pure 来完成此操作`SQL`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:26:51.303

这只是一个投影。它不会更新表，也不会删除一些数据。

```
SELECT  MIN(ID) ID,
        Username,
        MAX(Red) max_Red,
        MAX(Green) max_Green,
        MAX(Yellow) max_Yellow,
        MAX(Blue) max_Blue,
        MAX(Orange) max_Orange,
        MAX(Purple) max_Purple
FROM    Colors
GROUP   BY Username 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/cdb3b/1)

**更新**

如果你真的想删除这些记录，你需要先运行 UPDATE 语句才能删除记录

```
UPDATE  Colors a
        INNER JOIN
        (
            SELECT  MIN(ID) min_ID,
                    Username,
                    MAX(Red) max_Red,
                    MAX(Green) max_Green ,
                    MAX(Yellow) max_Yellow,
                    MAX(Blue) max_Blue,
                    MAX(Orange) max_Orange,
                    MAX(Purple) max_Purple
            FROM    Colors
            GROUP   BY Username
        ) b ON a.ID = b.Min_ID 
SET     a.Red = b.max_Red,
        a.Green = b.max_Green,
        a.Yellow = b.max_Yellow,
        a.Blue = b.max_Blue,
        a.Orange = b.max_Orange,
        a.Purple = b.max_Purple 
```

然后您现在可以删除记录，

```
DELETE  a
FROM    Colors a
        LEFT JOIN
        (
            SELECT  MIN(ID) min_ID,
                    Username
            FROM    Colors
            GROUP   BY Username
        ) b ON a.ID = b.Min_ID 
WHERE   b.Min_ID  IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c8635/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:26:47.947

你真的需要更新基础表吗？如果没有（并且您只是想要示例中显示的结果集），您可以简单地对表进行分组：

```
SELECT   MIN(ID)     AS ID,
         Username    AS Username,
         MAX(Red)    AS Red,
         MAX(Green)  AS Green,
         MAX(Yellow) AS Yellow,
         MAX(Blue)   AS Blue,
         MAX(Orange) AS Orange,
         MAX(Purple) AS Purple
FROM     Colors
GROUP BY Username 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/4160f/1/0)上查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:34:28.140

```
DELETE FROM Colors c1
WHERE EXISTS (SELECT 1
                FROM Colors c2
               WHERE c1.Username = c2.Username
                 AND ((c1.Red    IS NULL AND c2.Red    IS NULL) OR c1.Red    = c2.Red   )
                 AND ((c1.Green  IS NULL AND c2.Green  IS NULL) OR c1.Green  = c2.Green )
                 AND ((c1.Yellow IS NULL AND c2.Yellow IS NULL) OR c1.Yellow = c2.Yellow)
                 AND ((c1.Blue   IS NULL AND c2.Blue   IS NULL) OR c1.Blue   = c2.Blue  )
                 AND ((c1.Orange IS NULL AND c2.Orange IS NULL) OR c1.Orange = c2.Orange)
                 AND ((c1.Purple IS NULL AND c2.Purple IS NULL) OR c1.Purple = c2.Purple)
                 AND c2.ID < c1.ID
             ) 
```

空值使这更复杂一些，因为 NULL = NULL 不正确，但在 SQL 中是未知的。如果您有 0 和 1，则可以省略颜色条件中 OR 之前的部分。

# java - 从不同包的另一个实例的子类调用受保护的方法

> ID：14404260
> 
> 赞同：6
> 
> 时间：2013-01-18T17:23:18.227
> 
> 标签：java, subclass, packages, protected, access-modifiers

我想从提供此受保护方法的类的子类中调用另一个实例的受保护方法。请参见以下示例：

```
public class Nano {

    protected void computeSize() {
    }

}

public class NanoContainer extends Nano {

    protected ArrayList<Nano> children;

}

public class SomeOtherNode extends NanoContainer {

    // {Nano} Overrides

    protected void computeSize() {
        for (Nano child: children) {
            child.computeSize();            // << computeSize() has protected access in nanolay.Nano
        }
    }

} 
```

`javac`告诉我`computeSize() has protected access in Nano`。我看不出这是什么原因（我以为我已经在其他代码中这样做了）。我想保持这种方法受到保护，我该怎么办？

```
javac version "1.7.0_09" 
```

## 编辑

我想提供一个精简的版本，但我没有考虑到这些类位于不同的包中的事实。

```
nanolay.Node
nanolay.NanoContainer
nanogui.SomeOtherNode 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-18T18:11:14.667

不知道原因，但 JLS 在[6.6.2 中证实了这一点。有关受保护访问的详细信息](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6.2)（强调我的）：

> 对象的受保护成员或构造函数可以从*包外部访问，在该包中，*仅由负责实现该对象的代码声明它。

所以：

```
package P2;
public class P2 {
    protected void foo() {}
}

.........

package P2A;    
class P2A extends P2.P2 {
    void bar(P2.P2 other) {
        this.foo(); // OK
        other.foo();  // ERROR
    }

    void bar2(P2A other) { 
        other.foo(); //OK
    }
} 
```

在`P2A.bar`调用中`this.foo()`是可访问的，因为`this`负责实现`P2`但`other.foo()`不可访问，因为`other`可能不是`P2A`. `bar2`另一方面有一个`P2A`所以这一切都很好。

现在，为什么如果它们都是相同的包，但如果它们是不同的包，则一切都可以？理由是什么？我不知道也想知道。

**元评论**我已经回滚了另一个用户最近的更新，因为它大大改变了答案，并且可能更适合作为顶级答案本身。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-18T17:32:30.353

您可以通过子类化和覆盖来访问受保护的方法；当它们在同一个包中可用时。我会补充一些细节。您可以在此处阅读[详细信息](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)。

您所拥有的示例`protected clone()`位于 java 中 Object 类中可用的方法的行上；您不能直接在任何对象上调用它（尽管所有对象都隐式地从 Object 类扩展）。

# hadoop - Hadoop UniqValueCount Map and Aggregate Reducer for Large Dataset（10 亿条记录）

> ID：14404263
> 
> 赞同：1
> 
> 时间：2013-01-18T17:23:20.320
> 
> 标签：hadoop, mapreduce, hadoop-streaming, elastic-map-reduce

我有一个包含大约 10 亿个数据点的数据集。我想从中提取大约 4600 万个唯一数据点。

我想使用 Hadoop 来提取唯一值，但在 Hadoop 上不断出现“内存不足”和 Java 堆大小错误 - 同时，我可以使用 Python 集（哈希表）在单个盒子上相当轻松地运行它，如果你愿意的话。）

我正在使用一种相当简单的算法来提取这些唯一值：我正在解析地图中的 10 亿行并输出如下所示的行：

```
UniqValueCount:I    a
UniqValueCount:I    a
UniqValueCount:I    b
UniqValueCount:I    c
UniqValueCount:I    c
UniqValueCount:I    d 
```

然后运行“聚合”reducer 得到结果，对于上面的数据集应该是这样的：

```
I   4 
```

这适用于一小组值，但是当我为 10 亿个数据点（如我所提到的有 4600 万个键）运行它时，作业失败了。

我在 Amazon 的 Elastic Map Reduce 上运行它，即使我使用六个 m2.4xlarge 节点（它们的最大内存节点为每个 68.4 GB），作业也会因“内存不足”错误而失败。

但是我可以使用 Python 代码在单个 m1.large（一个小得多的具有 8 GB 内存的盒子）上的 Set 数据结构（哈希表）来提取唯一值。我很困惑 Hadoop 作业失败了，因为 4600 万个唯一值不应该占用那么多内存。

可能出了什么问题？我是否使用了 UniqValueCount 错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:59:35.517

您可能会在 shuffle 中遇到内存错误，请记住 Hadoop 在启动 reducer 之前对键进行排序。大多数应用程序不需要排序本身，但 Hadoop 使用它作为聚合属于键的所有值的一种方式。

对于您的示例，您的映射器最终将多次写入相同的值，而您只关心给定键有多少唯一性。这是您现在正在做的事情：

```
Mapper output:
I -> a
I -> a
I -> a
I -> a
I -> b
I -> a
I -> b

Reducer input:
I -> [a, a, a, a, b, a, b]

Reducer output:
I -> 2 
```

但是在这种情况下你真的不需要写 5*a 或 2*b ，1次就足够了，因为你只关心唯一性。因此，您可以通过确保只发送每个值一次来直接减少大量开销，而不是计算 reducer 中的唯一值：

```
Mapper output:
I -> a
I -> b

Reducer input:
I -> [a, b]

Reducer output:
I -> 2 
```

这将有效地减少网络带宽，并且洗牌会更简单，因为要排序的键会更少。

你可以通过两种方式做到这一点：

*   在您的作业中添加一个组合器，它将在映射器之后但在减速器之前运行，并且只会在发送到减速器之前保留唯一性。
*   修改您的映射器以保留您已发送的映射，如果您之前已经发送过此映射，则不要发送。

# ajax - Backbone.js：为 Backbone.sync 实现定义超时

> ID：14404267
> 
> 赞同：12
> 
> 时间：2013-01-18T17:23:37.077
> 
> 标签：ajax, backbone.js, real-time, polling

我在我的一个项目中使用骨干网，与与外部 API 的通信集成。我想使用记录的实时更新。由于我无法访问此外部应用程序的主后端，并且它们既不提供 websocket 服务器也不提供长轮询端点，因此我基本上可以选择使用 setInterval 和 50 秒的周期进行定期轮询. 它一直运作良好。我的问题是边缘情况。如果由于某种原因 API 请求挂起超过 50 秒，比方说，我将立即触发一个新请求。这意味着，现在有 2 个挂起的请求，最终会加起来。有没有办法为请求设置超时？我知道所有请求都会导致 Backbone.sync，但我正在检查源代码，但我没有 看不到为 XmlHttpRequest 设置超时的任何可行方法。有没有办法干净地做到这一点而不覆盖行为？还是有其他解决方案/解决方法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-18T18:49:15.250

只需将参数`timeout:milliseconds`中的一个选项传递给. 选项直接传递给[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)，它处理低级 XHR 调用：`options``fetch`

```
 collection.fetch({timeout:50000}); 
```

或者，您可以通过在应用程序启动中调用[jQuery.ajaxSetup](http://api.jquery.com/jQuery.ajaxSetup/)为应用程序发出的所有请求设置全局超时：

```
$.ajaxSetup({timeout:50000}); 
```

# java - DBCP Tomcat 连接池 removeAbandoned 不起作用

> ID：14404271
> 
> 赞同：1
> 
> 时间：2013-01-18T17:23:52.607
> 
> 标签：java, apache, tomcat, profiling, connection-pooling

我已将**Tomcat DBCP**配置为：

```
<Resource
name="jdbc/myoracle"
auth="Container"
type="javax.sql.DataSource"
driverClassName="oracle.jdbc.OracleDriver"
url="jdbc:oracle:thin:@127.0.0.1:1521:mysid"
username="abc"
password="abc"
maxActive="20"
maxIdle="4"
minIdle="0"
maxWait="4"
removeAbandoned="true"
logAbandoned="true"
removeAbandonedTimeout="3"
/> 
```

我不知道，我已经将上述设置定义为正确与否。我正在使用struts 2，一个网页有菜单链接，它正在调用动作类，我在其中执行所有数据库操作并打开/关闭来自/到池的连接。问题是，如果我不断地点击菜单链接说 40-50 次，连接正在增加，单击鼠标，然后等待响应，做得很好（即不增加连接）。

只有在不等待单个响应的情况下**连续疯狂点击才会使****连接****突然**上升并且不会恢复到初始状态。如果我的连接在动作类中的某个地方泄漏，那么为什么单击鼠标总是做得很好，等待响应然后再单击鼠标？

（连续单击相同的菜单链接结果：）因为我已将 maxActive 定义为 20，所以连接将持续到 24（我记得）并且在该池用尽之后，即新连接/请求无限期地等待从用尽的池中获取连接。

我的疑问是，为什么**removeAbandoned 没有关闭连接**，因为我指定了 removeAbandonedTimeout=3。如果我**假设我有连接内存泄漏**或者我没有故意关闭任何连接，那么**removeAbandoned 是否会杀死所有打开的连接**？

还是我的 DBCP 设置或以上参数有什么问题？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:58:35.387

我会说`maxWait`参数的值太小了。根据[文档](http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html#Common_Attributes)，它的度量单位是毫秒。分配所有可用连接后，在您的情况下，它将仅等待 4 毫秒并引发异常。

另外，我建议增加`minIdle`参数值的值，以便始终有几个“准备好的”连接可供使用。当然，之后您可能需要额外增加`maxIdle`参数值的值。

至于`removeAbandonedTimeout`参数，请确保其值**大于**运行任何数据库操作所需的秒数。

要记住的另一件事是，设置`logAbandoned`为 true 会增加连接借用过程的一些开销。

# actionbarsherlock - Actionbarsherlock：如何将其“保持”在 1 级

> ID：14404275
> 
> 赞同：0
> 
> 时间：2013-01-18T17:24:06.803
> 
> 标签：actionbarsherlock

我对 Java 和 Android 完全陌生。在使用 actionbarsherlock 时，我遇到了一个我无法解决的问题。我的应用程序总共有大约 8 个活动，每个活动都有相同的操作栏，使用 ABS。

所以我想知道是否有办法将整个 ABS 部分保持在一个类中，然后在需要时在其他活动中调用它。否则，我必须在每个活动中编写相同的代码才能到达相同的操作栏，这看起来确实不正确。

我记得在使用 ABS 之前，我必须在 XML 中使用单独的一行，然后在需要时在其他活动中对其进行扩充。但是对于像我这样的新手来说，整个 ABS 项目似乎太大了，我真的很困惑.. 谁能帮我澄清一下？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:31:21.813

使用设置操作栏的基类。

```
public abstract class BaseActivity extends SherlockFragmentActivity {
  @Override public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ActionBar ab = getSupportActionBar();
    ab.whatever....
  }
} 
```

然后在你的活动中......

```
public class MySweetActivity extends BaseActivity {
  @Override public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.whatever);
  }
} 
```

# java - 如何从文件中创建 Maven 查找属性

> ID：14404276
> 
> 赞同：1
> 
> 时间：2013-01-18T17:24:12.770
> 
> 标签：java, spring, maven, maven-3

我正在尝试让 maven 从 ~/home/user/file.prop 之类的文件中加载我的属性。如果调用本地配置文件，有人可以告诉我如何更改以下 pom 以支持如何从文件中获取它们

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.uftwf</groupId>
    <artifactId>MavenJbossWebDemo</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>Maven and JBoss WebDemo Webapp</name>
    <url>http://maven.apache.org</url>

    <properties>
        <java-version>1.7</java-version>
    </properties>
    <profiles>
        <profile>
            <id>dev</id>
            <properties>
                <deploy.jboss.host>10.52.17.21</deploy.jboss.host>
                <deploy.jboss.user>admin</deploy.jboss.user>
                <deploy.jboss.password>redhat</deploy.jboss.password>
            </properties>
        </profile>

        <profile>
            <id>local</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <properties>
                <deploy.jboss.host>127.0.0.1</deploy.jboss.host>
                <deploy.jboss.user>xxx</deploy.jboss.user>
                <deploy.jboss.password>xxx</deploy.jboss.password>
            </properties>
        </profile>
    </profiles>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <build>
        <finalName>MavenJbossWebDemo</finalName>

        <plugins>
            <plugin>
                <groupId>org.jboss.as.plugins</groupId>
                <artifactId>jboss-as-maven-plugin</artifactId>
                <version>7.2.Final</version>
                <configuration>
                    <hostname>${deploy.jboss.host}</hostname>
                    <port>${deploy.jboss.port}</port>
                    <username>${deploy.jboss.user}</username>
                    <password>${deploy.jboss.password}</password>
                </configuration>
                <executions>
                    <execution>
                        <id>deploy-jar</id>
                        <phase>install</phase>
                        <goals>
                            <goal>deploy</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:35:51.907

我认为 Properties Maven Plugin 可能会有所帮助。查看它的[使用示例](http://www.mojohaus.org/properties-maven-plugin/usage.html)。

# jquery-selectors - 在 div 的 ul/li 中定位文本

> ID：14404279
> 
> 赞同：0
> 
> 时间：2013-01-18T17:24:21.203
> 
> 标签：jquery-selectors

使用 .NET MVC/Razor，我正在使用以下方法手动设置验证摘要客户端，用于一些不会在数据注释中处理的 js 客户端操作：

```
 function RenderError(message) {

    var myDiv = $('[data-valmsg-summary="true"]');

    myDiv.removeClass("validation-summary-valid");
    myDiv.addClass("validation-summary-errors");

    var list = myDiv.find('ul');

    $("<li />").html(message).appendTo(list);
} 
```

这工作正常，但显然重复错误。检查消息是否已输入到列表项中的最简单方法是什么？请记住，我已经掌握了 div 本身？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:27:31.940

如果 data-valmsg-summary 字段为真，您可以检查 if 语句并相应地跳过它，这有意义吗？

# java - 休眠一对多插入

> ID：14404281
> 
> 赞同：3
> 
> 时间：2013-01-18T17:24:24.883
> 
> 标签：java, hibernate, hibernate-mapping

如您所见，我有两个表（优惠，项目）我在插入项目时遇到问题，每次添加优惠时它都不会插入项目列表。Offer 包含一个项目列表。这是我的代码：

提供：

```
@Entity
public class Offer{

@Id
@GeneratedValue
int id;
private String name;
private String description;

@OneToMany(mappedBy="offer")
private List<Item> items;
//getters and setters 
```

项目：

```
@Entity
public class Item{

@Id
@GeneratedValue
int idItem;
private String name;
private double price;

@ManyToOne(cascade=CascadeType.ALL)
@JoinColumn(name="idOffer")
private Offer offer;
 // getters and setters 
```

这是填写表格的代码：

```
 Offer offer=GenerateData.generateOffer();
    List<Item> items=new ArrayList<>();
    for(int i=0;i<3;i++){
        Item item=GenerateData.generateItem();
        items.add(item);
        item.setOffer(offer);
    }
    offer.setItems(items);

    pDB.addOffer(offer);//DAO for adding Offers into DB 
```

优惠已成功添加，但商品未成功添加。映射有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:26:53.937

您是否尝试在 OneToMany 端放置级联选项？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:33:21.627

提供

```
 @OneToMany(cascade = { CascadeType.ALL }, orphanRemoval = true, mappedBy = "offer")
private List<Item> items; 
```

物品：

```
@ManyToOne
@JoinColumn(name="idOffer")
private Offer offer; 
```

# php - PHP 限制用户浏览器类型

> ID：14404283
> 
> 赞同：0
> 
> 时间：2013-01-18T17:24:27.350
> 
> 标签：php, javascript, html

我需要限制用户可以使用哪些浏览器在我的页面上查看。我只想允许 Chrome、FireFox 4+ 和所有基于 WebKit 的浏览器。如果用户使用 ie explorer，PHP 会输出 ie：“You have not supported browser, use Chrome, Firefox 4+ or WebKit based browser！” 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:25:54.873

[PHP 嗅探器](http://eder.us/projects/phpsniffer/)是一个库，用于处理提取有关用户和用户代理（浏览器）的信息。

它使用相同的数据`get_browser()`或`$_SEREVER['HTTP_USER_AGENT']`可以提供给您的数据，但它会将其格式化为您可以在代码中使用的结构良好的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:26:12.010

使用[`$_SERVER\['HTTP_USER_AGENT'\]`](http://php.net/manual/de/reserved.variables.server.php)或[`get_browser()`](http://php.net/manual/de/function.get-browser.php)。

但是你真的应该问自己为什么这是必要的。如果您的网站无法使用所有功能，则可以显示以下消息：

> 请升级您的浏览器以使用所有功能。

您还可以检测是否存在特定的 JS 函数/对象，这样您就不会遇到`Undefined identifier`错误[（[感谢 epascarello](https://stackoverflow.com/users/14104/epascarello)）]。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T17:26:46.713

`$_SERVER['HTTP_USER_AGENT']`将为您提供浏览器详细信息，然后您可以按照自己的方式进行验证，祝您好运

这可能很蹩脚，因为我是 PHP 新手，但是，我会通过这样做来检查是否有人在使用 Mozilla（firefox）：

```
 $browser  = $_SERVER['HTTP_USER_AGENT'];

        if (strpos($browser,'Mozilla') !== false) {
            echo 'You are using Mozilla';
        } else {
              echo 'You are not using Mozilla';
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T17:25:41.433

您可以检查服务器变量：

```
<?php 
 echo $_SERVER['HTTP_USER_AGENT'];
?> 
```

# android - 如何以编程方式创建多个片段？

> ID：14404284
> 
> 赞同：4
> 
> 时间：2013-01-18T17:24:35.170
> 
> 标签：android, android-fragments, android-fragmentactivity

我试图通过以编程方式创建它们在一个屏幕上显示多个片段。通过将每个片段包含到活动布局文件中，我可以毫无问题地做到这一点。但是，当我尝试以编程方式执行此操作时，我感到很困惑。到目前为止，这就是我在屏幕上的两个片段所拥有的。

主类：

```
public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        FragmentOne one = new FragmentOne();
        FragmentTwo two = new FragmentTwo();
        FragmentThree three = new FragmentThree();

        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.add(R.id.imOne, one, "fragmentone");
        ft.add(R.id.imTwo, two, "fragmenttwo");
        ft.add(R.id.imThree, three, "fragmenthree");
        ft.commit();

    }
} 
```

片段一：

```
public class FragmentOne extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        View view = inflater.inflate(R.layout.frag_one, container, false);
        return view;
    }

} 
```

片段二：

```
public class FragmentTwo extends Fragment{

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        View view = inflater.inflate(R.layout.frag_two, container, false);
        return view;
    }

} 
```

我的两个片段类的布局文件只包含一个简单的 TextView。然后是我的主类的 activity_main.xml 布局文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <FrameLayout
        android:id="@+id/imOne"
        android:name="com.david.twofragexample.FragmentOne"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="2" />

    <FrameLayout
        android:id="@+id/imTwo"
        android:name="com.david.twofragexample.FragmentTwo"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="2" />

    <FrameLayout
        android:id="@+id/imThree"
        android:name="com.david.twofragexample.FragmentThree"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="2" />

</LinearLayout> 
```

当我尝试以编程方式执行此操作时，我对我的 activity_main.xml 文件中应该包含什么感到困惑。所以从Android开发者指南（http://developer.android.com/guide/components/fragments.html）它说使用

```
FragmentManager fragmentManager = getFragmentManager()
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
FragmentOne fragment = new FragmentOne();
fragmentTransaction.add(R.id.fragment_container, fragment);
fragmentTransaction.commit(); 
```

因此，当我将此代码添加到我的 onCreate 方法时，我必须对我的 activity_main.xml 文件进行哪些更改才能以编程方式执行此操作？我看不到 R.id.fragment_container 来自哪里。如何确定我的新片段在屏幕上的位置？谢谢

编辑：我正在平板电脑而不是手机上开发它。现在已经解决了，上面的代码将以编程方式添加三个片段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:15:03.583

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <FrameLayout
        android:id="@+id/list"
        android:name="com.david.twofragexample.FragmentOne"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="2" />

    <FrameLayout
        android:id="@+id/viewer"
        android:name="com.david.twofragexample.FragmentTwo"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="2" />

</LinearLayout> 
```

在您的活动中：

```
FragmentOne one = new FragmentOne();
FragmentTwo two = new FragmentTwo();

fm = getSupportFragmentManager();
fm.beginTransaction().replace(R.id.list, one, "fragmentone").commit();
fm.beginTransaction().replace(R.id.viewer, two, "fragmenttwo").commit(); 
```

我建议你研究这个：

[http://developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)

并充分了解片段生命周期等。我展示的方式快速而肮脏，但不一定是最好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-04T16:01:25.877

由于我还没有足够高的代表发表评论，所以我将把信息留在这里——Rafael T 建议的方式确实很有效，尽管我一开始也有疑问。

1）像这样定义你的xml：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/container"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    > 
```

2）将每个片段添加到同一个槽中：

```
View box = v.findViewById(R.id.container);
FragmentTransaction ft = getFragmentManager().beginTransaction();
for (String catalog : mCatalogs) {
    Fragment fragment = HighlightedProductFragment.newInstance(catalog);
    ft.add(R.id.container, fragment, catalog);
}
ft.commit(); 
```

感谢您为这个棘手的要求提供解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:28:37.687

试试这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/fragment_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" > 
```

作为你的 activity_main.xml

你问了自己一个正确的问题：id 在哪里`fragment_container`，答案是：无处。>您还将您的布局设置为水平，这使得添加的视图很可能有点“超出屏幕”

# c# - Oledb 连接和查询仅从 Excel 电子表格中读取一列

> ID：14404289
> 
> 赞同：2
> 
> 时间：2013-01-18T17:25:07.317
> 
> 标签：c#, .net, ado.net, oledb

> **可能重复：**
> [如何从 c# 中的 excel 工作表中选择特定列？](https://stackoverflow.com/questions/7150684/how-can-i-select-specific-columns-from-excel-sheet-in-c)

```
string strConn = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|2.xls;Extended Properties='Excel 8.0;HDR=no;'";

string query = "SELECT * FROM [Sheet1$]";

DataSet excelDataSet = new DataSet();
OleDbDataAdapter da = new OleDbDataAdapter(query, strConn);

da.Fill(excelDataSet);

GridView1.DataSource = excelDataSet;
GridView1.DataBind();
GridView1.HeaderRow.Cells[0].Text = "CheckNumber"; 
```

我有这段代码来读取从网站加载并显示在`gridview`. 我只想简单地阅读电子表格上的 A 列。我想我应该能够改变这一点`string query = "SELECT * FROM [Sheet1$]";`，但我所有的努力都是徒劳的。有人可以指出我正确的方向，还是有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:32:40.157

看起来这样做的方法很简单 string sql = "SELECT F1, F2, F3, F4, F5 FROM [sheet1$]; 感谢大家的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:52:21.647

这是我用来读取 Excel 电子表格并将其作为 DataTable 返回的内容，如果您专注于以下部分，我可以通过循环遍历 dtSchema DataTable 对象来查询电子表格中的所有工作簿以查找名称不同的工作表：

```
public static DataTable GetExcelData(string connectionString)
{
    string sql = string.Empty;
    using (OleDbConnection cn = new OleDbConnection(connectionString))
    {
        using (OleDbDataAdapter adapter = new OleDbDataAdapter())
        {
            DataTable dt = new DataTable();
            using (OleDbCommand command = cn.CreateCommand())
            {
                cn.Open();
                DataTable dtSchema = cn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });

                    foreach (DataRow dr in dtSchema.Rows)
                    {
                        //Will Loop through the name of each Worksheet
                        Console.WriteLine(dr["Table_Name"]);
                    }

                string firstSheetName = dtSchema.Rows[0].Field<string>("TABLE_NAME");

                sql = "SELECT * FROM [" + firstSheetName + "]";
                command.CommandText = sql;
                adapter.SelectCommand = command;
                adapter.Fill(dt);

                if (dt.Rows.Count == 0)
                {
                    OleDbDataReader reader = command.ExecuteReader();
                    dt.Load(reader);
                }
                cn.Close();
                return dt;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:33:53.187

我相信您的问题在于电子表格不是数据库。电子表格没有义务是矩形或具有相同类型的单元格。所以说你想要一个列假设该列存在于所有行并且属于同一类型。因此，在针对它发出 SQL 之前，您需要转换为相同类型的向量。

# javascript - 如何断言 process.stderr 输出？

> ID：14404293
> 
> 赞同：3
> 
> 时间：2013-01-18T17:25:17.647
> 
> 标签：javascript, node.js, testing, io, tdd

我正在构建一个小命令行工具，但遇到了测试问题。

如何测试当前进程在中写入“omg” `stderr`？

```
process.stderr.write("omg") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T19:50:45.240

如果您还没有安装 Mocha：

```
npm install -g mocha 
```

**应该通过.js：**

```
process.stderr.write('omg') 
```

**应该失败.js：**

```
process.stdout.write('not omg on stderr') 
```

**测试.js：**

```
var exec = require('child_process').exec
  , assert = require('assert')

describe('run tests', function(){
  it('should pass', function(done) {
    exec('node ./shouldpass.js', function(err, stdout, stderr) {
      assert.equal(stderr, 'omg')
      done()    
    })
  })

  it('should fail', function(done) {
    exec('node ./shouldfail.js', function(err, stdout, stderr) {
      assert.equal(stderr, 'omg')
      done()    
    })
  })    
}) 
```

跑步：

```
mocha test.js 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-05T09:44:03.143

您可以临时覆盖`process.stdout.write`，缓冲输入并用于`console.error`打印输出（覆盖`console.log`时将不起作用`process.stdout.write`），例如

```
describe('process.stdout', () => {
    let processStdoutWrite,
        processStdoutWriteBuffer,
        overwriteProcessStdoutWrite,
        resetProcessStdoudWrite,
        getProcessStdoutBuffer;

    /**
     * @var {function} Reference to the original process.stdout.write function.
     */
    processStdoutWrite = process.stdout.write;

    /**
     * @returns {undefined}
     */
    overwriteProcessStdoutWrite = () => {
        processStdoutWriteBuffer = '';

        process.stdout.write = (text) => {
            processStdoutWriteBuffer += text;
        };
    };

    /**
     * @returns {string}
     */
    getProcessStdoutBuffer = () => {
        return processStdoutWriteBuffer;
    };

    /**
     * @returns {undefined}
     */
    resetProcessStdoudWrite = () => {
        process.stdout.write = processStdoutWrite;
    };

    beforeEach(() => {
        overwriteProcessStdoutWrite();
    });

    afterEach(() => {
        resetProcessStdoudWrite();
    });

    describe('.write()', () => {
        it('prints "foo"', () => {
            process.stdout.write('foo');
            process.stdout.write('bar');

            console.error(getProcessStdoutBuffer());
        });
    });
}); 
```

# java - Java BufferedWriter 另存为操作

> ID：14404294
> 
> 赞同：0
> 
> 时间：2013-01-18T17:25:19.617
> 
> 标签：java, eclipse

我正在尝试在 Java 中模拟另存为功能。我想为它选择一个文件名，因为我之前所做的代码只保存到

```
myData.dat 
```

这在我的 Main.Class 的菜单中使用，它将查找

```
else if (option.compareTo("8") == 0){
    manualLib.save();} 
```

```
 public void save(){
    String content = "";
    for (int i = 0; i < library.size(); i++){
        for (int bar = 0; bar < library.get(i).size(); bar++){
            content += library.get(i).get(bar).getSerial() + "\n";
            content += library.get(i).get(bar).getTitle() + "\n";
            content += library.get(i).get(bar).getAuthor() + "\n";
            content += library.get(i).get(bar).onLoan() + "\n";
            content += library.get(i).get(bar).getBorrower() + "\n";
        }
    }

    Writer output;
    try {
        output = new BufferedWriter(new FileWriter("myData.dat"));
        try {
              output.write(content);
            }
        finally {
              output.close();
              System.out.println("Successfully saved to myData.dat file.");
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

实现这一目标的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:30:33.267

您可以使用[JFileChooser](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JFileChooser.html)。这将为您提供一个“简单”的 UI，让用户选择文件（或文件名）。然后，您将用 .`myData.dat`返回的值替换您的值`chooser.getSelectedFile().getName()`。

我还没有编译这个，但你的代码最终应该看起来像：

```
public void save(){
    String content = "";
    for (int i = 0; i < library.size(); i++){
        for (int bar = 0; bar < library.get(i).size(); bar++){
            content += library.get(i).get(bar).getSerial() + "\n";
            content += library.get(i).get(bar).getTitle() + "\n";
            content += library.get(i).get(bar).getAuthor() + "\n";
            content += library.get(i).get(bar).onLoan() + "\n";
            content += library.get(i).get(bar).getBorrower() + "\n";
        }
    }

    Writer output;

    JFileChooser chooser = new JFileChooser();
    DatFilter filter = new DatFilter();
    filter.addExtension("dat");
    filter.setDescription(".dat files");
    chooser.setFileFilter(filter);
    int returnVal = chooser.showOpenDialog(null);
    String fileName = new String();
    if(returnVal == JFileChooser.APPROVE_OPTION) {
    fileName=chooser.getSelectedFile().getName();
    }

    try {
        output = new BufferedWriter(new FileWriter(fileName));
        try {
              output.write(content);
            }
        finally {
              output.close();
              System.out.println("Successfully saved to "+fileName+" file.");
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

然后也上课

```
public class DatFilter extends FileFilter {

    //should accept only dirs and .dat files
    public boolean accept(File f) {
        if (f.isDirectory()) {
            return true;
        }

    String extension = null;
        String s = f.getName();
        int i = s.lastIndexOf('.');

        if (i > 0 &&  i < s.length() - 1) {
            extension = s.substring(i+1).toLowerCase();
        }

        if (extension != null) {
            if (extension.equals("dat"){
                    return true;
            } else {
                return false;
            }
        }

        return false;
    }

    //The description of this filter
    public String getDescription() {
        return ".dat Files";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:37:49.320

*   使用 JFileChooser 或您选择的任何 UI 来获取要创建的目标文件的完整路径。
*   向您的方法添加一个参数以`save`获取此路径，并使用它代替`myData.dat`
*   将文件路径存储在 Main.class 的字段中
*   添加一个不带参数的参数，它使用存储在 Main.class 中的路径`save`调用参数。`save`

# mongodb - 如何在分片 mongodb 集群中使用 $in 操作检索每个键的一个（或指定计数）文档

> ID：14404295
> 
> 赞同：1
> 
> 时间：2013-01-18T17:25:23.010
> 
> 标签：mongodb, pymongo

我在 mongodb（pymogno 驱动程序）中的查询遇到了一些问题。

这是我的问题：我必须每天向 mongodb 插入（更新）大约 1 亿（100000000）个文档。我放弃了使用更新必须更新附加的相同关键字段，并修改为使用批量插入（更新性能比批量插入慢）。

这是我的数据库中的草图方案。

```
{_id:xxx, F1:1 , F2:"test1", TS": 2011/01}
{_id:xxx, F1:1 , F2:"test2", TS": 2011/02}
{_id:xxx, F1:2 , F2:"test1", TS": 2011/03}
{_id:xxx, F1:3 , F2:"test1", TS": 2011/04}
{_id:xxx, F1:2 , F2:"test1", TS": 2011/05}
.....
(4 billion up or more) 
```

查询时只想按F1(field1)检索最新的TS组。

我知道“组”聚合框架可以做到这一点，但我已经分片我的数据库和组操作不允许分片数据库。

我也尝试使用 map-reduce 来做到这一点，但它不能提供足够好的查询性能。

我使用的唯一查询是“$in”操作。

```
db.test.find({"F1":{"$in":[1,2,3,....]}}) 
```

它检索目标数组中的所有文档，但我只想获取每个键 F1 的最新文档。

```
{_id:xxx, F1:1 , F2:"test2", TS": 2011/02}
{_id:xxx, F1:2 , F2:"test1", TS": 2011/05}
{_id:xxx, F1:3 , F2:"test2", TS": 2011/03} 
```

我怎么能得到那个？

附言。目标数组可能包含我想要批量查询的一百万个元素。

有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:37:59.857

虽然这个问题没有单步解决方案，因为您不能像您提到的那样在分片中使用聚合框架（即使这样做也可能不会很好地执行），您可能想要探索如下解决方案：

*   创建一个新的文档集合，它将用作您的索引（但不是实际的 MongoDB 索引）。
*   在此集合中，您将为每个唯一的 F1 值存储一个文档。该文档包含对主集合中最新文档的引用。您可以使用条件更新来创建（必要时）索引文档或更新它。仅当时间戳小于（或等于）为该值插入的最新文档时，才使用查询查找文档并匹配。（也许
*   然后，您将使用“索引集合”来获取每个 F1 值的最新文档引用。

# c - 使用 libpcap 简单示例 100% cpu 使用率

> ID：14404299
> 
> 赞同：6
> 
> 时间：2013-01-18T17:25:40.490
> 
> 标签：c, linux, network-programming, libpcap

在运行下面的代码时，其中一个 CPU 内核达到 100% 的使用率。有或没有交通。怎么了？

示例代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <pcap.h>
#include <errno.h>

void my_callback(u_char *args, const struct pcap_pkthdr* pkthdr, const u_char*
packet)
{
    //nothing, nothing at all...
    //printf("+");
}

int main(int argc,char **argv)
{
    int i;
    char *dev;
    char errbuf[PCAP_ERRBUF_SIZE];
    pcap_t* descr;
    const u_char *packet;
    struct bpf_program fp;        /* hold compiled program */
    bpf_u_int32 maskp;            /* subnet mask */
    bpf_u_int32 netp;             /* ip */

    if(argc != 2){
        fprintf(stdout, "Usage: %s \"expression\"\n"
            ,argv[0]);
        return 0;
    }

    /* Now get a device */
    dev = pcap_lookupdev(errbuf);

    if(dev == NULL) {
        fprintf(stderr, "%s\n", errbuf);
        exit(1);
    }
    /* Get the network address and mask */
    pcap_lookupnet(dev, &netp, &maskp, errbuf);
    /* open device for reading in promiscuous mode */
    descr = pcap_open_live(dev, BUFSIZ, 1,-1, errbuf);
    if(descr == NULL) {
        printf("pcap_open_live(): %s\n", errbuf);
        exit(1);
    }

    /* Now we'll compile the filter expression*/
    if(pcap_compile(descr, &fp, argv[1], 0, netp) == -1) {
        fprintf(stderr, "Error calling pcap_compile\n");
        exit(1);
    }

    /* set the filter */
    if(pcap_setfilter(descr, &fp) == -1) {
        fprintf(stderr, "Error setting filter\n");
        exit(1);
    }

    /* loop for callback function */
    pcap_loop(descr, -1, my_callback, NULL);
    return 0;
} 
```

编译：`gcc example.c -o example -lpcap`

运行：`./example "tcp"`或您喜欢的过滤器。

如您所见，这是典型的示例，循环的主函数和回调函数：`pcap_loop(descr, -1, my_callback, NULL);`

回调是空的（无用），但这只是为了表明问题不在回调中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T17:39:28.443

您在此处指定了超时`-1`：

```
descr = pcap_open_live(dev, BUFSIZ, 1,-1, errbuf); 
```

它变成`pcap_loop`了一个繁忙的循环，因为`poll`不断地立即超时。

`1000`如果您没有理由使用其他值，请使用（毫秒）之类的东西。

# object - 当任何父对象在使用 java 脚本的 HTML 页面中不可见时，我如何知道对象不可见？

> ID：14404301
> 
> 赞同：0
> 
> 时间：2013-01-18T17:25:44.783
> 
> 标签：object, parent-child, visible

假设我在 HTML 页面中有一个文本框，如下所示。

```
<DIV style = "display:none;">
   <DIV style = "display:inline;">
      <INPUT type = "text" style = "display:inline;">
   </DIV>
</DIV> 
```

在这种情况下，用户将看不到文本框。如何识别该文本当前对用户不可见。

不要这么说，我应该前往父对象以了解它们是否设置为不可见。我有一堆字段要像这样进行验证，这会降低应用程序的性能。

有没有其他方法可以找出这个对象对用户不可见？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:37:00.490

如果您不需要它是纯 JavaScript，我建议您使用 jQuery。使用 :visible 或 :hidden 选择器将完成您想要的：

```
if ( $('yourElement').is(":hidden") ) {
    // The element is not visible
} 
```

[http://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

[http://api.jquery.com/hidden-selector/](http://api.jquery.com/hidden-selector/)

如果您需要纯 JavaScript 并且不想遍历每个祖先元素，则可以尝试检查元素的 offsetWidth 和 offsetHeight。如果元素因为祖先元素而被隐藏，则它们*都应该*为 0。 注意：我一直使用 jQuery，所以我不知道这有多可靠。

```
var yourElement = document.getElementById('yourElementsId');

if ( yourElement.offsetWidth == 0 && yourElement.offsetHeight == 0) {
    // The element is not visible
} 
```

[https://developer.mozilla.org/en-US/docs/DOM/element.offsetWidth](https://developer.mozilla.org/en-US/docs/DOM/element.offsetWidth)

[https://developer.mozilla.org/en-US/docs/DOM/element.offsetHeight](https://developer.mozilla.org/en-US/docs/DOM/element.offsetHeight)

# html - 为什么此 HTML 中的文本对齐没有动画效果？

> ID：14404304
> 
> 赞同：1
> 
> 时间：2013-01-18T17:25:47.143
> 
> 标签：html, css, css-animations

为什么文本对齐没有改变？这是我的 HTML。

```
<!DOCTYPE html>
<html>
<head>
<title>CSS 3 Animation</title>
<style>
.table
{
width: 400px;
height: 80px;
border: 1px dotted black;
}

.animatedMargin
{
font-size: xx-large;
-webkit-animation: marginAnimation 1s;
}

@-webkit-keyframes marginAnimation
{
from   {text-align: left}
to     {text-align: right}
}
</style>
</head>
<body>
<table class="table">
<tr>
<td class="animatedMargin">
SAMPLE TEXT
</td>
</tr>
</table>
</body>
</html> 
```

我已更改`text-align`以`background`查看它是否有效，并且确实有效。那么它与 有什么关系`text-align`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:35:28.963

text-align 不应该是[一个可转换的属性](http://www.w3.org/TR/css3-transitions/#animatable-css)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:49:01.463

我认为**text-align**根本无法动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-19T07:28:53.753

*   确切地说 text-align 不应该是一个可[转换的属性](http://www.w3.org/TR/css3-transitions/#animatable-css)。

# android - 在两个片段中使用相同的视图两次

> ID：14404322
> 
> 赞同：0
> 
> 时间：2013-01-18T17:27:28.320
> 
> 标签：android, android-layout, android-fragments

我有一个带有两个片段的测验应用程序，用于我在 ViewPager 中拥有的两种测验模式。对于每个片段，除了其他内容之外，我还通过在遍历所有类别的 while 循环中从 XML 膨胀线性布局来动态创建一个列表。包含此列表的布局在两种模式下都是相同的，只是片段的其余部分不同，因此需要两个单独的页面。

因此，问题是我做了两次膨胀布局的代价高昂的过程，每个片段内一次。我只想这样做一次并使用它两次。

我考虑过的两种解决方案：

*   在父活动中使用适配器，通过片段访问它，然后使用 ExpandableListView。

问题：

1.  我使用复选框来选择类别。这两个片段对点击的处理方式不同。以我有限的知识，我不知道如何实现这一目标。我知道我可以扩展自定义布局，但是如何在片段中设置侦听器？
2.  我的一些类别是分组的，其他是独立的项目。如何删除这些项目中的箭头？

.

*   在父活动中使用数组列表。在每个片段中访问它并以这种方式将布局添加到父级。

问题：

1.  不能这样做，因为我添加了两次相同的视图，所以我收到错误，因为指定的孩子已经有一个父母。（非法状态异常）

但是，这确实意味着我可以轻松访问 CheckBoxes 并遍历设置 oncheckedchangedlisteners

提前非常感谢您:)如果您需要更多信息或其他任何信息，请询问！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:24:49.267

> 我通过在遍历所有类别的 while 循环中从 XML 膨胀线性布局来动态创建一个列表。

这表明一个`ListView`.

> 在父活动中使用数组列表。在每个片段中访问它并以这种方式将布局添加到父级。

此解决方案从一开始就不起作用，因为您在 a 中有两个片段，`ViewPager`它们会施加不同的行为。如果片段不在其中，`ViewPager`您可以构建一种机制，将这些视图存储在列表中，然后从片段视图中动态分离//附加它们。但是将视图存储在列表中（并一直将它们保存在内存中）加上管理它们的状态的麻烦是不值得的。

> 在父活动中使用适配器，通过片段访问它，然后使用 ExpandableListView。

为什么只使用一个适配器而不是两个，每个片段一个（所以它们是独立的）？我还将在片段本身中实现适配器。

> 我使用复选框来选择类别。这两个片段对点击的处理方式不同。以我有限的知识，我不知道如何实现这一目标。我知道我可以扩展自定义布局，但是如何在片段中设置侦听器？

不太确定，但是如果您正在谈论`CheckBoxe`从“行”布局访问并基于两个片段对用户操作具有不同的行为，则可以非常轻松地实现基适配器类。该基适配器类将处理通用逻辑，但您还将有一个在`CheckBox`操作上调用的抽象方法（在 中`OnCheckedChangeListener`）。该基本适配器的两个子类（用于两个片段）将各自实现该抽象方法，并具有各自独立的逻辑。

> 我的一些类别是分组的，其他是独立的项目。如何删除这些项目中的箭头？

像上面一样，这可以通过实现一个智能适配器来完成。

# drupal - 每组一个字段 - Drupal 6 视图

> ID：14404325
> 
> 赞同：0
> 
> 时间：2013-01-18T17:27:33.680
> 
> 标签：drupal, drupal-6, drupal-views

我有一个目录内容类型。每个目录都有衬衫和裤子字段、年份字段和目录名称。我必须创建一个视图，列出按年份字段分组的目录。我能够通过在我的样式（HTML 列表）中使用分组字段来实现这一点。我必须每年都有一个 Facebook 评论框（不是每个内容）。有没有办法为每组添加一个字段？

编辑：目前我正在通过 jQuery 附加 Facebook 评论框！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T14:35:06.130

显然，你不可能每组有一个字段。我曾使用脚本来实现这一点。

# css - 适合容器高度的图像

> ID：14404333
> 
> 赞同：0
> 
> 时间：2013-01-18T17:27:57.890
> 
> 标签：css

我正在使用以下代码来构建一个水平滚动画廊。我希望高度超过 600 像素的图像适合它们的容器（展览幻灯片）。如果我在 img 标签中使用 height 属性而不是 max-height ，它可以工作，但是画廊布局停止响应调整大小。

```
<div id="exhibit-slides">
    <div class="exhibit-slide">
    <img src="http://01.jpg" alt="" />
    </div>
    <div class="exhibit-slide">
    <img src="http://02.jpg" alt="" />
    </div>
    <div class="exhibit-slide">
    <img src="http://03.jpg" alt="" />
    </div>
    <div class="exhibit-slide">
    <img src="http://04.jpg" alt="" />
    </div>
</div>

#exhibit-slides {
    overflow:auto; 
    width:10000px;
}

.exhibit-slide {
    float:left;
    margin-right:20px;
    max-height:600px;
}

img {
    width:auto;
    max-height:100%;
} 
```

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:35:23.950

尝试这个：

`.exhibit-slide { float:left; margin-right:20px; height:600px; **overflow-y:hidden** }`

# asp-classic - 复选框布尔值 Classic ASP

> ID：14404335
> 
> 赞同：7
> 
> 时间：2013-01-18T17:28:20.753
> 
> 标签：asp-classic

我有一个复选框

```
<input type="checkbox" name="chkNGI" id="prod_ngi_sn" value="1"> 
```

当它被检查时，我传递了值 1，但是当它没有被检查时，任何值都被传递了。我必须传递值 0。

我试过了

```
<input type="checkbox" name="chkNGI" id="prod_ngi_sn" <%if prod_ngi_sn.checked then value="1" else value="0" end if%>> 
```

但是没有用。

tks

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T01:00:51.220

复选框仅在勾选时传递值。您需要服务器端的逻辑来适应它。

```
Dim chkNGI
chkNGI = Request("chkNGI") & ""
If chkNGI = "" Then
    chkNGI = "0"
End If 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T15:45:42.550

```
<script> 
function calcParam() { 
  var checked = document.getElementById("prod_ngi_sn").checked; 
  if (checked) 
    document.getElementById("hiddenNGI").value = "1"; 
  else 
    document.getElementById("hiddenNGI").value = "0"; } 
</script> 

<input type="hidden" name="chkNGI" id="hiddenNGI"> 
<input type="checkbox" name="checkNGI" id="prod_ngi_sn" onClick="calcParam()"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T17:30:30.893

创建一个名为“chkNGI”的隐藏输入。将您当前的复选框重命名为不同的名称。在复选框上添加处理 onClick 并使用一个小的 javascript 函数，根据复选框的状态，在隐藏的输入中写入 0 或 1。

举个例子，

```
<script> 
    function calcParam() { 
        var checked = document.getElementById("prod_ngi_sn").checked; 
        if (checked) 
            document.getElementById("hiddenNGI").value = "1"; 
        else 
            document.getElementById("hiddenNGI").value = "0"; 
    } 
</script> 

<input type="hidden" name="chkNGI" id="hiddenNGI"> 
<input type="checkbox" name="checkNGI" id="prod_ngi_sn" onClick="calcParam()"> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-20T20:10:57.823

你可以试试这个单行解决方案

信息：RS=记录集对象

```
<input type="checkbox" <%If RS("ColumnName")=True Then Response.Write(" checked='checked' ")%> name="tableColumn" value="1" > 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-18T00:42:16.023

我知道这个问题很老，但我最近不得不在 Classic ASP 中为一家公司重构一些遗留代码，并遇到了这个问题。现有代码使用与复选框同名的隐藏表单字段，并在结果中查找“false”或“false, true”。感觉很笨拙，但代码还根据带有前缀的动态命名复选框字段执行操作，因此从缺少的字段推断“假”会引入不同的复杂性。

如果您希望复选框返回“0”或“1”，则此技术应该可以解决问题。它使用一个未命名的复选框来操作一个命名的隐藏字段。

```
<html>
<body>
<% If isempty(Request("example")) Then %>
<form>
<input type="hidden" name="example" value="0">
<input type="checkbox" onclick="example.value=example.value=='1'?'0':'1'">
<input type="submit" value="Go">
</form>
<% Else %>
<p>example=<%=Request("example")%></p>
<% End If %>
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-20T01:25:36.660

您在保存页面后的解决方案；

**保存.asp**

```
<%
' connection string bla bla
' RS = Recordset Object

If Request.Form("tableColumn")=1 Then 
    RS("ColumnName") = 1
Else
    RS("ColumnName") = 0
End If

' other columns saving process bla bla bla
%> 
```

# ruby - 先决条件检查红宝石

> ID：14404344
> 
> 赞同：1
> 
> 时间：2013-01-18T17:28:57.093
> 
> 标签：ruby

对 ruby​​ 来说非常新，因此在网上找不到很多东西，因此这个问题。`checkNotNull()`ruby中是否有类似java的检查？目前，我只是在做

```
if var_a.nil? || var_b.nil? || var_c.nil?
  raise "var_a, var_b and var_c cannot be nil"
end 
```

我觉得这是检查前置条件的一种非常糟糕的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:46:09.330

您可以将其缩短为：

```
raise "var_a, var_b and var_c cannot be nil" if [var_a, var_b, var_c].any?(&:nil?) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T17:32:56.660

你可以这样写：

```
raise "var_a should not be nil" if var_a.nil? 
```

但是这里的代码简单性实际上并没有多少可以改进的地方。上面的大部分代码仍然是错误消息本身，所以对我来说似乎很好。

# javascript - 使用 D3.js 的极坐标图

> ID：14404345
> 
> 赞同：6
> 
> 时间：2013-01-18T17:29:06.423
> 
> 标签：javascript, matlab, d3.js

有谁知道使用[D3 Javascript 库](http://d3js.org/)生成极坐标图的好例子？

我见过一些像[这样](http://windhistory.com/station.html?CYBV)和[这样](http://bl.ocks.org/3994129)的玫瑰图，但我真的在寻找更类似于 Matlab 极坐标图的东西：

![Matlab 极坐标图](../Images/4b6755050d0ab798593602ddc25c5f4f.png)

任何示例将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-21T05:23:24.833

喏，给你：

[![极坐标图](../Images/33785edbd67205edf989300ea6711f67.png)](http://bl.ocks.org/4583749)

该函数使用[d3.svg.line.radial](https://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-line_radial)绘制。背景径向网格被实现为线、圆和文本元素。一个小烦恼是代码需要弧度（对于 d3.svg.line.radial）和度数（对于 SVG 的[transform 属性](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)）。我使用了旋转的文本标签，因为这很容易使用 SVG，但如果您不介意使用一点三角法来定位文本标签，您可以使用非旋转标签。

仔细注意线的角度的定义：D3 的径向线和区域从 12 点开始顺时针方向进行，而该图从 3 点开始逆时针方向进行！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-10T04:53:30.147

[Plotly](https://plot.ly/api)允许您使用 MATLAB、Python 和 R 制作交互式极坐标图。结果是交互式的，并使用 D3.js 呈现。[您可以在此处](https://plot.ly/matlab/polar-chart/)查看一些 MATLAB 示例（代码 + 交互式图表）。

![在此处输入图像描述](../Images/6dbf2d233032a16a42ebf10c2ba830dd.png)

![在此处输入图像描述](../Images/51a27cd5e0c471a1ed814b6ed953acff.png)

![在此处输入图像描述](../Images/c69b09d07d4c01eb9610fd4260d19c4c.png)

免责声明：我在 Plotly 团队。

# python - 通过将非采样值归零来对 numpy 数组进行采样？

> ID：14404349
> 
> 赞同：2
> 
> 时间：2013-01-18T17:29:27.277
> 
> 标签：python, numpy

假设我有一个填充了随机整数的矩阵“R”

```
import numpy as np
matR = np.random.randint(-10,10,size=(4,6))
>>> matR = [[-4 -4  1 -8 -2  5]
            [ 9  2 -4 -1  4  2]
            [ 7  8 -2 -9  3  8]
            [ 9 -3  3  6  4  3]] 
```

现在我知道我可以这样采样：

```
>>> matR[::2,::2] = [[-4  1 -2]
                     [ 7 -2  3]] 
```

然而，我真正想要的是一种干净的方式：

```
>>> matR.?? = [[-4  0  1  0 -2  0]
               [ 0  0  0  0  0  0]
               [ 7  0 -2  0  3  0]
               [ 0  0  0  0  0  0]] 
```

我想避免 python 循环，使用枚举很容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:36:51.343

你想要这样的东西吗？

```
>>> import numpy as np
>>> m = np.random.randint(-10,10,size=(4,6))
>>> m
array([[  7,   4,   7,   7,   5,   9],
       [  5,  -7,  -2,   4,   2,  -4],
       [ -9,   4,   6,   8,   5, -10],
       [ -6,  -8,   8,  -5,   2,  -3]])
>>> m2 = np.zeros_like(m) # or m2 = m*0
>>> m2[::2, ::2] = m[::2, ::2]
>>> m2
array([[ 7,  0,  7,  0,  5,  0],
       [ 0,  0,  0,  0,  0,  0],
       [-9,  0,  6,  0,  5,  0],
       [ 0,  0,  0,  0,  0,  0]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:09:50.920

随身带着口罩怎么样？

```
>>> import numpy as np
>>> shape = (4,6)
>>> m = np.random.randint(-10,10,size = shape)
>>> mask = np.zeros(shape,dtype = np.int32)
>>> mask[::2,::2] = 1
>>> mask
array([[1, 0, 1, 0, 1, 0],
       [0, 0, 0, 0, 0, 0],
       [1, 0, 1, 0, 1, 0],
       [0, 0, 0, 0, 0, 0]])
>>> m
array([[-7,  0, -4, -8,  0,  0],
       [ 0, -3, -2, -1,  1,  2],
       [ 8, -8,  5,  1,  9,  1],
       [ 1,  0,  2,  7,  4, -8]])
>>> m * mask
array([[-7,  0, -4,  0,  0,  0],
       [ 0,  0,  0,  0,  0,  0],
       [ 8,  0,  5,  0,  9,  0],
       [ 0,  0,  0,  0,  0,  0]]) 
```

# font-face - 带有 TideSDK 的 Google Webfonts

> ID：14404352
> 
> 赞同：1
> 
> 时间：2013-01-18T17:29:47.073
> 
> 标签：font-face, embedded-fonts, google-webfonts, tidesdk

刚刚发现 TideSDK，期待即将到来的 1.4.0 版本。我在 Windows 7 32 位上使用 TideSDK Developer 并启动并运行 HelloWorld 应用程序......现在我很高兴尝试大量 CSS3/HTML5 代码片段来查看当前 beta 版本的工作原理。尝试使用 Google webfonts 似乎不起作用......这是正确的吗？我在带有 appcelerator Titanium 的 Windows 上看到了关于字体使用的（旧）讨论，但不知道当前状态。预计这将包含在即将发布的版本中吗？我对这个项目非常感兴趣（在目前的完成水平上，已经很了不起了！！！）我计划在对 TideSDK 有更好的了解之后开发一个适用于 Windows/Mac 的桌面应用程序。我将使用 jQuery 并使用类似网页的技术设计应用程序的 UI，并且不必与多个 HTML5/CSS3 实现作斗争会很棒！感谢您提供有关（Google）字体使用的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:29:14.133

尽管即将发布的版本可能会解决字体使用问题（包括 Google 字体），但我发现带有 SVG 字体的 @font-face 适用于当前 (1.3.1) TideSDK 版本。例如，从 Font Squirrel 下载 TangerineBold “Font Kit”——只需要 SVG 字体。然后在样式表中包含以下内容：

```
@font-face { 
   font-family: 'TangerineBold'; 
     src: url('Tangerine_Bold-webfont.svg#TangerineBold') format('svg'); 
     font-weight: normal; 
     font-style: normal; 
} 
```

和样式元素：

```
font-family: 'TangerineBold'; 
```

**进一步解释**（ 2013 年*3 月 19 日添加*）：我在我的博客上给出了 TideSDK 1.3.1-beta 中自定义字体使用的更多细节，[这里](http://www.neologotech.com/2013/03/19/custom-fonts-in-windows-desktop-apps-created-with-tidesdk-1-3-1-beta/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T09:58:40.170

TideSDK 当前版本确实包含较旧的 webkit。因此，最新的 html5/css3 支持可能会少一些。随着新的 webkit 即将发布，它会得到解决，所以我们应该在每个平台上获得最新的 webkit 构建，提供最大的标准支持。

# python - 在 IF 语句中使用列表推导

> ID：14404353
> 
> 赞同：0
> 
> 时间：2013-01-18T17:29:47.940
> 
> 标签：python, list-comprehension

> **可能重复：**
> [返回列表中匹配条件的第一项](https://stackoverflow.com/questions/14366511/return-the-first-item-in-a-list-matching-a-condition)

如何使用列表理解轻松获取“匹配”列表元素？例如，我有一个`list`并且我正在寻找一个以某个字符串开头的元素。这很容易做到：

```
>>> lines = ['AHP Buildlife number', 'NIT-Version-Default-v0.16.0', 'E_release v2.3.14.0']
>>> [ x.strip() for x in lines if x.startswith('NIT-Version-Default') ]
['NIT-Version-Default-v0.16.0'] 
```

但是我怎样才能在`if`语句中做同样的事情，以便匹配的列表元素可以用于进一步处理；像这样的东西：

```
>>> if [ x.strip() for x in lines if x.startswith('NSS-Checkin-Default') ]:
...   ver = x.split('-')[-1].strip()
...   print ver 
```

因此，它`v0.16.0`作为版本号返回。这显然是行不通的，但希望你明白我想要做什么。知道怎么做吗？干杯！！

PS。欢迎您改进问题或标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:35:52.543

如果您只寻找一个元素：

```
x = next(x.strip() for x in lines if x.startswith('NSS-Checkin-Default'))
ver = x.split('-')[-1].strip() 
```

请注意，我使用了生成器表达式`(a for b in c if d)`，而不是列表推导`[a for b in c if d]`。这样，迭代`lines`只会在实际需要的时间内完成（在这种情况下，直到找到第一个元素）。

如果没有找到元素，`next`将 raise `StopIteration`。

* * *

如果您还想确保**只有**一个元素（或者对于某个固定的 N 正好有 N 个元素），您可以这样写（分配给一个元组）：

```
(x,) = (x.strip() for x in lines if x.startswith('NSS-Checkin-Default') 
```

在这种情况下，您将有一个`ValueError`if 生成器表达式将产生太少或太多的元素。这称为“元组解包”。

也可以看看：

[从匹配条件的可迭代项中获取第一项的最佳方法是什么？](https://stackoverflow.com/questions/2361426/what-is-the-best-way-to-get-the-first-item-from-an-iterable-matching-a-condition)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:32:54.317

简单：您的列表推导返回一个包含一个元素的列表，因此您只需访问该元素：`thelist[0]`

从您的示例中获取：

```
lines = ['AHP Buildlife number', 'NIT-Version-Default-v0.16.0', 'E_release v2.3.14.0']
results = [ x.strip() for x in lines if x.startswith('NIT-Version-Default') ]
ver = results[0].split('-')[-1].strip()
print ver 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:40:22.517

```
>>> for each in lines:
...     match=re.search("(^NIT-Version-Default).*(v[0-9.]+)",each)
...     if match:
...             print match.group(2)
... 
v0.16.0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T17:44:26.710

查看[地图](http://docs.python.org/2/library/functions.html#map)功能。相反，我没有看到理解的必要性：

```
map(lambda x: x.split('-')[-1].strip(),
        filter(lambda x: x.startswith('NIT'), lines)) 
```

# iphone - 应用程序未运行时的didEnterRegion

> ID：14404355
> 
> 赞同：0
> 
> 时间：2013-01-18T17:30:06.610
> 
> 标签：iphone, ios, location, region

iOS5。我已经正确设置了 CLLocationManager，它会监听区域的进入/退出。一切正常。但是当我杀死我的应用程序并进入一个区域时，我收到了一个本地通知（在 didEnterRegion 方法中定义）并且它再次启动了我的应用程序。这是标准行为还是发生了其他事情？我认为它会在后台启动应用程序，执行 didEnterRegion: 并在一段时间后再次杀死自己。我需要做的就是在 didEnterRegion 中进行 HTTP 调用：

有人处理过类似的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:37:02.100

这是预期的行为。当您的应用程序未运行但已为您的应用程序注册地理围栏边界时，它将启动并触发回调。之后它不会被杀死，除非系统决定，它需要内存。

不用担心，您的应用程序即使已启动也会处于休眠状态，因此没有速度/电池/等损失。

见文档：

> 处理区域的越界事件
> 
> 每次用户的当前位置跨越边界区域时，系统都会为您的应用生成适当的区域事件。如果您的应用程序已经在运行，这些事件将直接发送给任何当前位置管理器对象的委托。如果您的应用程序没有运行，系统会在后台启动它，以便它可以响应。应用程序可以实现以下方法来处理越界：

# jquery - 将 JSON 加载到 HTML 表

> ID：14404357
> 
> 赞同：0
> 
> 时间：2013-01-18T17:30:08.760
> 
> 标签：jquery, json

> **可能重复：**
> [迭代 JSON 对象字符串](https://stackoverflow.com/questions/9316453/iterate-json-object-string)

我尝试从 JSON 制作一个简单的表格。请不要建议使用任何插件。我需要建议在没有一一定义 item.keys 的情况下循环下面的键的简单方法是什么？

```
 $.getJSON('JSON_URL', function(data) {
    var table='';
    $.each( data, function(index,item){
    for (var x=0;x < item.length;x++)
        {table+='<tr><td>'+item[x].app_id+'</td><td>'+item[x].app_desc+'</td><td>'+item[x].cby+'</td><td>'+item[x].con+'</td><td>'+item[x].uby+'</td><td>'+item[x].uon+'</td></tr>';}
    });
    table+='';
    $("#users tbody").html( table );        
    }); 
```

我的 JSON

```
 {"vntret": [{"app_id":"APP0OKSD","app_desc":"Application 1","cby":"amolerc.com","con":"2013-01-18 22:39:33","uby":null,"uon":null},{"app_id":"APP0BWNS","app_desc":"kjkljlkjkl","cby":"padusi.com","con":"2013-01-19 00:53:03","uby":null,"uon":null}]} 
```

谢谢

# sql - 获取 SQL Server 作业状态

> ID：14404358
> 
> 赞同：1
> 
> 时间：2013-01-18T17:30:12.263
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试在 MS SQL Server 中获取我的作业状态，目的是在我们的远程监控软件中创建警报，如果任何已启用的作业出错。

目前我正在使用 sys.xp_sqlagent_enum_jobs 存储过程，但是它似乎同时显示了启用和禁用的作业，所以我尝试使用 msdb.dbo.sp_help_job，这正是我需要的，但没有使用 OPENQUERY 参数（在服务器）由于嵌套错误，我无法查询或捕获结果，我得到了与 sp_get_composite_job_info 相同的结果。

所以我开始没有想法了，有没有人知道一种方法来捕获此信息以供查询或存储在以后查询的能力中。

我将包含我当前的代码，以防它对任何人有用，它可以很好地返回失败的作业数量，但如果你有一个失败的作业被禁用，这也会显示出来。

```
objRecordSet.Open _
"SET  NOCOUNT ON " & _
"DECLARE @MaxLength INT " & _
"SET @MaxLength   = 50 " & _
"DECLARE @xp_results TABLE ( job_id uniqueidentifier NOT NULL, " & _
    "last_run_date nvarchar (20) NOT NULL, " & _
    "last_run_time nvarchar (20) NOT NULL, " & _
    "next_run_date nvarchar (20) NOT NULL, " & _
    "next_run_time nvarchar (20) NOT NULL, " & _
    "next_run_schedule_id INT NOT NULL, " & _
    "requested_to_run INT NOT NULL, " & _
    "request_source INT NOT NULL, " & _
    "request_source_id sysname " & _
    "COLLATE database_default NULL, " & _
    "running INT NOT NULL, " & _
    "current_step INT NOT NULL, " & _
    "current_retry_attempt INT NOT NULL, " & _
    "job_state INT NOT NULL " & _
")" & _
"DECLARE @job_owner sysname " & _
"DECLARE @is_sysadmin INT " & _
"SET @is_sysadmin = isnull (is_srvrolemember ('sysadmin'), 0) " & _
"SET @job_owner = suser_sname () " & _
"INSERT INTO @xp_results EXECUTE sys.xp_sqlagent_enum_jobs @is_sysadmin, @job_owner " & _
"UPDATE @xp_results SET last_run_time = right ('000000' + last_run_time, 6), next_run_time = right ('000000' + next_run_time, 6) " & _
"SELECT count(*) as cnt FROM @xp_results x LEFT JOIN msdb.dbo.sysjobs j ON x.job_id = j.job_id LEFT OUTER JOIN msdb.dbo.syscategories c " & _
"ON j.category_id = c.category_id LEFT OUTER JOIN msdb.dbo.sysjobhistory h ON x.job_id = h.job_id " & _
"AND x.last_run_date = h.run_date AND x.last_run_time = h.run_time AND h.step_id = 0 where h.run_status = 0 ", _
objConnection, adOpenStatic, adLockOptimistic

message = message & "JOBCHECK#" & objRecordSet("cnt") & vbNewLine 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:28:33.810

没那么难。请记住，SQL Server 始终保留有关正在主动对服务器执行的详细信息的元数据信息。我会这样做是为了找到失败，因为您可以创建一个过程或函数，按日期范围调用它。我暂时只举了一个查询的例子：

```
use msdb;

declare
    @Start int =  cast( convert(varchar,  
            dateadd(ww, datediff(ww, 0, getdate())-1,0)  -- last week starting
            , 112) as int)
,   @End int = cast( convert(varchar,
            getdate()  -- current datetime
            , 112) as int)
;

Select 
    j.name
,   j.description
,   cast( cast(jh.run_date as varchar) + ' ' +  left(jh.run_time, 2) + ':' + substring( cast(jh.run_time as varchar), 3, 2) as datetime) as TimeRan
,   jh.message
,   jh.step_id
,   jh.step_name
from sysjobs j (nolock) 
    join sysjobhistory jh (nolock) on j.job_id = jh.job_id
        and jh.run_date between @Start and @End
        and jh.run_status = 0  -- 0 is failure 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:58:17.333

非常感谢使用 djangojazz 的帮助，我能够做我想做的事：

```
use msdb;
Select count(*) as cnt
from sysjobs j (nolock) 
    join sysjobhistory jh (nolock) on j.job_id = jh.job_id
    and instance_id = (
        select MAX(instance_id) 
        from sysjobhistory (nolock)
        where job_id = j.job_id
        )
    and j.enabled = 1
    and jh.run_status = 0 
```

# android - 绘制统计图表的最佳方法是什么？

> ID：14404359
> 
> 赞同：1
> 
> 时间：2013-01-18T17:30:12.750
> 
> 标签：android, charts

我需要绘制关于保存在 SQL 数据库中的信息的统计图表，但我不知道使用 Canvas“手动”绘制它是否是个好主意。我见过像 aChartEngine 和 ChartPlot 这样的包，但这些包不像我想要的那样可定制。我也想过使用OpenGL，但我不确定所有手机都支持它，虽然它是一个简单的操作。

最好的方法是什么？性能对我来说至关重要，我的应用程序也设计用于低端手机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:32:45.267

你看过 JIT 或 D3 吗？我过去曾将它们用于类似的问题，并发现它们在大多数移动浏览器上都非常敏感：

[http://philogb.github.com/jit/](http://philogb.github.com/jit/)

[http://d3js.org/](http://d3js.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T17:33:43.820

JFreeChart 有 android 库。

[http://code.google.com/p/afreechart/](http://code.google.com/p/afreechart/)

[http://afreechart.googlecode.com/svn/doc/screenshot/index.html](http://afreechart.googlecode.com/svn/doc/screenshot/index.html)

我认为这是更好的方法之一。您可以自己绘制所有内容，但这可能会在以后给您带来更多问题。

# javascript - 动态视频标签和淘汰赛 JS

> ID：14404367
> 
> 赞同：4
> 
> 时间：2013-01-18T17:30:56.743
> 
> 标签：javascript, firefox, knockout.js, html5-video

我正在尝试`video`使用 Knockout 动态更改标签的视频源。这是代码：

```
<div data-bind="if: resource().encodingformats() != ''">
    <video style="max-width: 100%;" controls>
        <!-- ko with: resource() -->
        <source data-bind="attr:{ src: webmUrl }" type='video/webm; codecs="vp8, vorbis"'>
        <source data-bind="attr:{ src: oggUrl }" type='video/ogg; codecs="theora, vorbis"'>
        <source data-bind="attr:{ src: mp4Url }" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
        <!-- /ko -->
    </video>
</div> 
```

我正在使用`if`绑定来确保在更改当前资源时呈现全新的视频标签。

这适用于除 Firefox 之外的所有浏览器。Firefox 给了我一个错误（实际上是警告）

```
<source> element has no "src" attribute. Media resource load failed. 
```

我猜这个`source`元素在没有属性集的情况下被渲染了一瞬间`src`，这导致它爆炸？

有没有简单的方法来解决这个问题？我想我可以绑定整个视频的 html，但这似乎过于草率。有没有一种简单的方法可以让 Firefox 使用在 IE9 中正常工作的相同代码？

* * *

**编辑**

我还应该提到，在使用 Firebug 查看生成的 html 之后，我将整个`source`标签处理到我的代码中，并且效果很好。换句话说，我放弃了淘汰赛绑定一分钟，并复制了淘汰赛正在生成的 html，一切正常。

最肯定的问题是 Firefox 对如何生成源标签非常挑剔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:45:03.997

事实证明，上述真正的问题是即使没有错误，Firefox 也会触发“错误”事件。

因此，如果您订阅此事件以便可以为 IE8 用户回退到 Flash 播放器，请务必检查您的“错误”处理程序以确保确实存在错误。

```
$(videoTag).one("error", function(){
    //sometimes Firefox fires this event even though there's no error :-/
    if (!this.error) return; 
```

一旦你这样做了，Firefox 应该很乐意让你绑定视频标签的源，就像我在上面所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:51:33.817

似乎它类似于：[Controlling Flash Plugins with Knockout.js, Conflicting jQuery.tmpl and Knockout-Sortable](https://stackoverflow.com/questions/14051283/controlling-flash-plugins-with-knockout-js-conflicting-jquery-tmpl-and-knockout)。

不是很优雅，但最简单的解决方案是将`html`绑定与包含您的元素的字符串一起使用。这确保了永远不会有`source`不包含`src`属性的标签。

更好的选择可能是创建一个接受 a 的自定义绑定`resource`，创建一个包含所有“源”标签的字符串，然后将`html`绑定应用于容器元素（或使用 jQuery 之类的东西来附加元素）。那将是一个更优雅的解决方案。可能需要生成整个`video`标签，不确定 FF 对此有多挑剔。

# c# - 在覆盖 ProcessCmdKey EventHandler 时跳过 KeyDown

> ID：14404375
> 
> 赞同：0
> 
> 时间：2013-01-18T17:31:23.000
> 
> 标签：c#, winforms, visual-studio

我通过按下向下箭头键在文本框上有一个简单的增量，如下所示。

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{

     if (keyData == Keys.Down)
     {

           int c = int.Parse(textBox1.Text);
           c++;
           textBox1.Text = c.ToString();

     }
 } 
```

以上适用于按双向下箭头键而不是单按向下箭头键。

注意：上面的代码在 UserControl 上。我已经在表单 keydown EventHandler 上的简单 winform 应用程序上尝试过它，并且同样可以正常工作。

怎么克服？。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:50:32.680

您需要处理之前存在的其他命令，并在处理您正在查找的命令时返回。尝试将其更改为此，看看是否有帮助：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
   if (msg.WParam.ToInt32() == (int)Keys.Down)
   {
      int c = int.Parse(textBox1.Text);
      c++;
      textBox1.Text = c.ToString();
      return true;
   }
   return base.ProcessCmdKey(ref msg, keyData);
} 
```

# sockets - 在python中禁用nagle：如何以正确的方式做到这一点？

> ID：14404376
> 
> 赞同：3
> 
> 时间：2013-01-18T17:31:32.217
> 
> 标签：sockets, python-2.6, nagle

我需要在 python2.6 中禁用 nagle 算法。我发现以这种方式在 httplib.py 中修补 HTTPConnection

```
 def connect(self):
        """Connect to the host and port specified in __init__."""
        self.sock = socket.create_connection((self.host,self.port),
                                         self.timeout)
        self.sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_NODELAY, True) # added line 
```

成功了。

显然，如果可能的话，我想避免修补系统库。所以，问题是：做这件事的正确方法是什么？（我对python很陌生，在这里很容易错过一些明显的解决方案）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-13T19:06:16.360

请注意，如果直接使用套接字库，则以下内容就足够了：

```
self.socket.setsockopt(socket.IPPROTO_TCP, socket.TCP_NODELAY, True) 
```

我将此信息附加到已接受的答案中，因为它满足了将我带到这里的信息需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T17:58:21.260

无法更改`httplib`指定的套接字选项，也无法传入您自己的套接字对象。在我看来，这种缺乏灵活性是大多数 Python HTTP 库的最大弱点。例如，在 Python 2.6 之前，甚至无法为连接指定超时（除非全局使用[socket.setdefaulttimeout()](http://docs.python.org/2/library/socket.html#socket.setdefaulttimeout)，这不是很干净）。

如果你不介意外部依赖，看起来[httplib2 已经`TCP_NODELAY`指定](http://code.google.com/p/httplib2/source/browse/python2/httplib2/__init__.py#884)了.

你*可以*给图书馆打猴子补丁。因为 python 是一种动态语言，并且或多或少所有事情都是在运行时作为命名空间查找完成的，所以您可以简单地替换相关类上的适当方法：

```
:::python
import httplib

def patch_httplib():
    orig_connect = httplib.HTTPConnection.connect
    def my_connect(self):
        orig_connect(self)
        self.sock.setsockopt(...) 
```

但是，这非常容易出错，因为这意味着您的代码变得非常特定于特定的 Python 版本，因为这些库函数和类确实发生了变化。例如，在 2.7 中，有一个`_tunnel()`使用套接字的方法，因此您需要在`connect()`方法的中间进行挂钩 - 猴子补丁使这非常棘手。

简而言之，恐怕我认为没有一个简单的答案。

# javascript - 删除 mouseout 事件失败

> ID：14404378
> 
> 赞同：0
> 
> 时间：2013-01-18T17:31:34.963
> 
> 标签：javascript

我在从 div 中分离 mouseout 事件时遇到问题。我从这个论坛（[链接](https://stackoverflow.com/questions/4697758/prevent-onmouseout-when-hovering-child-element-of-the-parent-absolute-div)）中提取了该功能。其目的是防止事件冒泡。它就像一个魅力，但分离失败。每次我附加和分离时，Ik 都会不断增加事件处理程序。经过数小时的尝试......也许其他人有答案:-)

我的 HTML：

```
<div id="dd_301" onclick="dd_show(this,301)">
    <span id="sel_301">selected item</span>
    <div id="sel_A301" style="display:none">
        <div id="sel_B3010" onclick="dd_click(this,1)">option 1</div>
        <div id="sel_B3011" onclick="dd_click(this,2)">option 2</div>
    </div>
</div> 
```

的JavaScript：

```
function dd_show(p, i) {
    getObj('sel_A' + i).style.display = 'block';
    addEvent(p, 'mouseout', makeMouseOutFn(p));
}

function dd_remove(o) {
    removeEvent(o,'mouseout',makeMouseOutFn);
    o.getElementsByTagName('div')[0].style.display = 'none';
}

function dd_click(o,i){
   var p=o.parentNode.parentNode;
   dd_remove(o);
   }

function addEvent(elem, ev, fn) {
    function listenHandler(e) {
        var ret = fn.apply(this, arguments);
        if (ret === false) {
            e.stopPropagation();
            e.preventDefault();
        }
        return (ret);
    }

    function attachHandler() {
        var ret = fn.call(elem, window.ev);
        if (ret === false) {
            window.ev.returnValue = false;
            window.ev.cancelBubble = true;
        }
        return (ret);
    }
    if (elem.addEventListener) {
        elem.addEventListener(ev, listenHandler, false);
    } else {
        elem.attachEvent("on" + ev, attachHandler);
    }
}

function removeEvent(o, ev, fn) {
    if (o.removeEventListener) {
        o.removeEventListener(ev, fn, false);
    } else {
        if (o.detachEvent) {
            o.detachEvent(ev, fn);
        }
    }
}

function makeMouseOutFn(elem) {
    var list = traverseChildren(elem);
    return function onMouseOut(event) {
        var e = event.toElement || event.relatedTarget;
        if ( !! ~list.indexOf(e)) {
            return;
        }
        alert('MouseOut');
    };
}

function traverseChildren(elem) {
    var children = [];
    var q = [];
    q.push(elem);
    while (q.length > 0) {
        var elem = q.pop();
        children.push(elem);
        pushAll(elem.children);
    }

    function pushAll(elemArray) {
        for (var i = 0; i < elemArray.length; i++) {
            q.push(elemArray[i]);
        }
    }
    return children;
} 
```

**[编辑]**最后，冒泡以某种方式阻止了 onclick 的删除。添加

```
if('bubbles' in event){if(event.bubbles){event.stopPropagation();}}else{event.cancelBubble=true;} 
```

成功了

# javascript - 调试间歇性 500 内部服务器错误和 404 未找到

> ID：14404382
> 
> 赞同：3
> 
> 时间：2013-01-18T17:31:46.640
> 
> 标签：javascript, php, apache, http-status-code-404

我遇到了间歇性 500 内部服务器错误的问题。该错误有时会在每第二或第三次页面刷新时出现，有时它不会出现几个小时然后突然弹出。我还注意到我在某些文件上遇到间歇性 404 not found 错误。apache error_log 没有返回错误，我想知道这是否是编码问题。如果这是一个编码问题，为什么它会是间歇性的，为什么我会对确实存在的文件产生随机 404 错误？

SO建议采取哪些步骤来确定和调试这种情况？有人对可能出现的问题有任何想法吗？

此外，我没有达到任何进程限制，并且这些错误是 JS (.php) 文件所独有的。

非常感谢任何帮助/建议！

# osgi - 在中介中使用 OSGi 服务

> ID：14404386
> 
> 赞同：3
> 
> 时间：2013-01-18T17:32:04.800
> 
> 标签：osgi, wso2, wso2esb

有什么方法可以创建访问现有 osgi 服务的自定义中介？

基本上我已经有一些作为 OSGi 服务发布的功能，我希望能够从自定义中介调用，但我找不到任何方法来访问它们。虽然类中介允许创建通过 osgi 公开的类的实例，但它似乎不允许注入其他 osgi 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T05:47:32.080

如果你不能使用类调解器来做到这一点，你可以写一个完整的调解器。它将允许您的中介者像其他中介者一样访问 OSGi 服务。

这三篇博客文章描述了如何为 WSO2 ESB 创建一个功能齐全的中介。

1.  [第1部分](http://maninda.blogspot.com/2012/11/writing-custom-mediator-for-wso2-esb.html)
2.  [第2部分](http://maninda.blogspot.com/2013/01/writing-custom-mediator-for-wso2-esb.html)
3.  [第 3 部分](http://maninda.blogspot.com/2013/01/writing-custom-mediator-for-wso2-esb_7.html)

这[就是](http://achala11.blogspot.com/2012/12/how-to-write-custom-mediator-wso2-esb.html)如何使用 WSO2 Developer Studio 创建这样的中介。

# uitableview - 如何为 UITableView 添加 GestureRecognizer，但只能在空的地方？

> ID：14404387
> 
> 赞同：3
> 
> 时间：2013-01-18T17:32:06.617
> 
> 标签：uitableview, uigesturerecognizer

我想添加点击 - 隐藏表格 + 一些动作 - 命名`cancelTap`

我有一个`UITableView`，我想`cancelTap`为它添加，**但只能在空的地方**。表格高度为 200。单元格仅填充表格的一半，而在另一半（没有单元格的一半）我需要添加 addGestureRecognizer。

如果我将 GestureRecognizer 添加到 Table - 方法`DidSelectCellForRowAtIndexPath`没有响应。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T09:08:07.767

我只是在set 方法`tableView`的委托中添加 tap -`Tap`

```
(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    return _searchDisplayController.contentSize.height <= [touch locationInView:_searchDisplayController].y;
} 
```

在这种方法中，我需要应用水龙头还是忽略它。

# java - 第 23 行出现异常

> ID：14404389
> 
> 赞同：-3
> 
> 时间：2013-01-18T17:32:12.960
> 
> 标签：java, exception

![在此处输入图像描述](../Images/b5507d1e378c382bb4647a2c8c5f5119.png)我正在尝试解决一个程序，一次又一次发生异常我不知道为什么在这里帮助我是我的代码

```
import java.util.*;
public class Fashion
{
    public static void main(String args[])
    {
    int sum=0;
    Scanner in=new Scanner(System.in);
    System.out.println("enter the number of judges");
    int x=in.nextInt();
    int a[]=new int[x];
    if((x<20)&&(x%2==1))
       {
       System.out.println("score given by judges");
       for(int i=0;i<x;i++)
         {
         a[i]=in.nextInt();
         }
       }
    int mid=(1+x)/2;
       for(int k=0;k<mid;k++)
       {
        if(a[mid+k]==a[mid-k])    //exception here why 
         {
         sum=sum+a[mid+k];
         }
       }
    System.out.println("the number get by the contestant is "+sum);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:37:14.883

看起来您可能会收到 Maroun 在他的评论中回答的 ArrayIndexOutOfBoundsException

> 在尝试查看 a 之前，您应该检查您是否没有超出数组维度。（在您的情况下，mid-k 和 mid+k 应该小于零或大于 x）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:39:29.947

在您的示例`x`中是 5.`a`是一个由 5 个元素组成的数组。`mid`是 3。

在你的 for 循环中，当 = 2 时会有一次迭代`k`，所以`mid+k`= 5。你的数组只有元素 0 到 4，所以你得到一个`ArrayIndexOutOfBoundsException`.

# rtc - 创建变更集后，我可以更新变更集中的文件吗？

> ID：14404390
> 
> 赞同：1
> 
> 时间：2013-01-18T17:32:17.163
> 
> 标签：rtc

我更改了一些文件并基于这些更改创建了一个新的更改集。我没有交付这个变更集。我已经更新了原始更改集中包含的文件。这些更改出现在 'Unresolved Changes' 中。是否可以将这些更改签入相同的更改集？当我尝试将“未解决的更改”中的文件移动到现有更改集时，更改集未出现在 Eclipse RTC 客户端的下拉菜单中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:14:46.857

> 是否可以将这些更改签入相同的更改集？

是的你可以。

上下文菜单显示一个

```
check in > new change set
check in > (an existing change set name) 
```

选择第二个条目，您将把您的修改添加到*现有的*变更集中。

此选项不可用的唯一情况是*关闭*更改集（右键单击/关闭）。

来源：[帮助页面](https://jazz.net/help-dev/clm/index.jsp?topic=/com.ibm.team.scm.doc/topics/t_scm_eclipse_modify.html)：

> 展开 Unresolved 文件夹以查看其内容。
> 
> *   要检入对当前更改集的整个未解决更改集，请右键单击该`Unresolved`文件夹并单击`Check-in all`。
> *   要签入 Unresolved 文件夹中的单个项目，请右键单击它，单击`Check-in`，然后单击`an existing change set`以接收更改，或单击`New change set`以创建更改集。
>     （组件中的文件或文件夹不能属于多个活动更改集。
>     当文件或文件夹包含在活动更改集中时，无论更改集是否为当前更改，对它的所有更改都将成为该更改集的一部分，并且在包含它的活动更改集完成之前，对该文件或文件夹的更改无法显式签入新更改集。）

# javascript - 根据下拉选择隐藏输入框

> ID：14404391
> 
> 赞同：2
> 
> 时间：2013-01-18T17:32:21.630
> 
> 标签：javascript, jquery

我想要页面顶部的下拉菜单来确定页面上显示的框数。

如果用户选择 1，则仅显示 1 个表格 如果用户选择 2，则显示 2 个表格

我已经添加了代码，希望它更有意义

```
<body>
    <p>Please select number of puppies:</p>
    <p>
        <select>
            <option value="1">1</option>
            <option value="2">2</option>
        </select>
    </p>
    <form id="form1" name="form1" method="POST" action="<%=MM_editAction%>">
        <p>Puppy 1:  </p>
        <p>&nbsp;</p>
        <table width="330" border="0">
            <tr>
                <td>Name: </td>
                <td><input type="text" name="PuppyName1" /></td>
            </tr>
            <tr>
                <td>Colour: </td>
                <td><input type="text" name="PuppyColour1" /></td>
            </tr>
            <tr>
                <td>Sex:</td>
                <td>
                    <select name="PuppySex1" id="PuppySex1">
                        <option value=" "> </option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Microchip/DNA Profile:</td>
                <td>
                    <select name="PuppyMicrochip1" id="PuppyMicrochip1">
                        <option value="No">No</option>
                        <option value="Microchip">Microchip</option>
                        <option value="DNA Profile">DNA Profile</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td><p>Microchip/DNA Number:</p></td>
                <td>&nbsp;</td>
            </tr>
        </table>
        <p>Puppy 2:</p>
        <table width="330" border="0">
            <tr>
                <td>Name: </td>
                <td><input type="text" name="PuppyName2" /></td>
            </tr>
            <tr>
                <td>Colour: </td>
                <td><input type="text" name="PuppyColour2" /></td>
            </tr>
            <tr>
                <td>Sex:</td>
                <td>
                    <select name="PuppySex2" id="PuppySex2">
                        <option value=" "> </option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Microchip/DNA Profile:</td>
                <td>
                    <select name="PuppyMicrochip2" id="select2">
                        <option value="No">No</option>
                        <option value="Microchip">Microchip</option>
                        <option value="DNA Profile">DNA Profile</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td><p>Microchip/DNA Number:</p></td>
                <td>
                    <input name="PuppyMicrochipNum2" type="text" 
                        id="PuppyMicrochipNum2" />
                </td>
            </tr>
        </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:48:31.730

## jsFiddle：http: [//jsfiddle.net/h3XLP/](http://jsfiddle.net/h3XLP/)

获得 jQuery 答案很常见，但对于独立的 JavaScript 来说真的不是那么全面

注意：将属性添加`style="display:none;"`到第二个表

```
var select = document.getElementsByTagName("select")[0];
select.onchange=function(){
    if(select.value=="2"){
       document.getElementsByTagName("table")[1].style.display="inline";
    }else{
       document.getElementsByTagName("table")[1].style.display="none";
    }

} 
```

但是您应该在下面使用，因为您的文档中可能有更多的选择和表格元素

## [http://jsfiddle.net/h3XLP/1/](http://jsfiddle.net/h3XLP/1/)

```
var select = document.getElementById("selectnopuppies");
select.onchange=function(){
    if(select.value=="2"){
       document.getElementById("secondpuppytable").style.display="inline";
    }else{
       document.getElementById("secondpuppytable").style.display="none";
    }

} 
```

* * *

```
<p>Please select number of puppies:</p>
<p>
    <select id="selectnopuppies">
        <option value="1">1</option>
        <option value="2">2</option>
    </select>
</p>
<form id="form1" name="form1" method="POST" action="<%=MM_editAction%>">
    <p>Puppy 1:</p>
    <p>&nbsp;</p>
    <table width="330" border="0">
        <tr>
            <td>Name:</td>
            <td>
                <input type="text" name="PuppyName1" />
            </td>
        </tr>
        <tr>
            <td>Colour:</td>
            <td>
                <input type="text" name="PuppyColour1" />
            </td>
        </tr>
        <tr>
            <td>Sex:</td>
            <td>
                <select name="PuppySex1" id="PuppySex1">
                    <option value=" "></option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Microchip/DNA Profile:</td>
            <td>
                <select name="PuppyMicrochip1" id="PuppyMicrochip1">
                    <option value="No">No</option>
                    <option value="Microchip">Microchip</option>
                    <option value="DNA Profile">DNA Profile</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <p>Microchip/DNA Number:</p>
            </td>
            <td>&nbsp;</td>
        </tr>
    </table>
    <div id="secondpuppytable"  style="display:none;">
    <p>Puppy 2:</p>
    <table width="330" border="0">
        <tr>
            <td>Name:</td>
            <td>
                <input type="text" name="PuppyName2" />
            </td>
        </tr>
        <tr>
            <td>Colour:</td>
            <td>
                <input type="text" name="PuppyColour2" />
            </td>
        </tr>
        <tr>
            <td>Sex:</td>
            <td>
                <select name="PuppySex2" id="PuppySex2">
                    <option value=" "></option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Microchip/DNA Profile:</td>
            <td>
                <select name="PuppyMicrochip2" id="select2">
                    <option value="No">No</option>
                    <option value="Microchip">Microchip</option>
                    <option value="DNA Profile">DNA Profile</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <p>Microchip/DNA Number:</p>
            </td>
            <td>
                <input name="PuppyMicrochipNum2" type="text" id="PuppyMicrochipNum2" />
            </td>
        </tr>
    </table>
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:43:33.583

你可以这样做：

当您选择第一个选项时，它将向您显示第一个表，而对于第二个选项，它将向您显示两个表。

```
$("table").hide();
$("select option").change(function(){
    Val = $(this).val();
     If(Val ==1) {
        $("table")[0].show();
        $("table")[1].hide();
      } else {
        $("table").show();
     }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:45:59.767

鉴于选项 1 应显示表 1，选项 2 应显示表 1 和 2，依此类推。

试试这个：

```
$('#dropdown').change(function(){

    var dropdown = $(this);

    var tables = $('.tableSelector');

    tables.hide();

    tables.slice(0,dropdown.val()).show();
}); 
```

工作 jsfiddle：http: [//jsfiddle.net/v5TTz/](http://jsfiddle.net/v5TTz/)

我已经用 css 类“tableSelector”标记了所有表，然后每次下拉更改值时，我都会显示与下拉列表的当前值对应的表数。此解决方案要求表格在 DOM 中以正确的顺序放置。

然而，在我看来，这听起来像是模板的一个案例，比如 jQuery 模板或 Hoganjs。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T17:48:21.450

我已经修改了你的代码......它现在正在工作......试试这个......

```
<html>
<head>
<title>Sample</title>
<script type="text/javascript">
function go()
{
var Count = document.getElementById("selCount").options[document.getElementById("selCount").selectedIndex].value;
if(Count==1)
{
document.getElementById("Puppy1").style.display = '';
document.getElementById("Puppy2").style.display = 'none';
}
if(Count==2)
{
    document.getElementById("Puppy1").style.display = '';
    document.getElementById("Puppy2").style.display = '';
}
}
</script>
</head>

 <body>
 <p>Please select number of puppies:</p>
 <p>
 <select onchange = "go()" id="selCount">
 <option value="1">1</option>
 <option value="2">2</option>
 </select>
 </p>
 <form id="form1" name="form1" method="POST" action="<%=MM_editAction%>">
 <p>Puppy 1:  </p>
 <p>&nbsp;</p>
 <table width="330" border="0" id="Puppy1">
 <tr>
<td>Name: </td>
 <td><input type="text" name="PuppyName1" /></td>
</tr>
<tr>
<td>Colour: </td>
 <td><input type="text" name="PuppyColour1" /></td>
 </tr>
 <tr>
 <td>Sex:</td>
 <td><select name="PuppySex1" id="PuppySex1">
 <option value=" "> </option>
 <option value="Male">Male</option>
 <option value="Female">Female</option>
 </select>
 </td>
 </tr>
 <tr>
 <td>Microchip/DNA Profile:</td>
 <td><select name="PuppyMicrochip1" id="PuppyMicrochip1">
 <option value="No">No</option>
 <option value="Microchip">Microchip</option>
 <option value="DNA Profile">DNA Profile</option>
 </select></td>
 </tr>
 <tr>
 <td><p>Microchip/DNA Number:</p></td>
 <td>&nbsp;</td>
 </tr>
 </table>
 <p>Puppy 2:</p>
 <table width="330" border="0"  id="Puppy2">
 <tr>
 <td>Name: </td>
 <td><input type="text" name="PuppyName2" /></td>
 </tr>
 <tr>
 <td>Colour: </td>
 <td><input type="text" name="PuppyColour2" /></td>
 </tr>
 <tr>
 <td>Sex:</td>
 <td><select name="PuppySex2" id="PuppySex2">
 <option value=" "> </option>
 <option value="Male">Male</option>
 <option value="Female">Female</option>
 </select>
 </td>
 </tr>
 <tr>
 <td>Microchip/DNA Profile:</td>
 <td><select name="PuppyMicrochip2" id="select2">
 <option value="No">No</option>
 <option value="Microchip">Microchip</option>
 <option value="DNA Profile">DNA Profile</option>
 </select></td>
 </tr>
 <tr>
 <td><p>Microchip/DNA Number:</p></td>
 <td><input name="PuppyMicrochipNum2" type="text" id="PuppyMicrochipNum2" /></td>
 </tr>
</table>

  </body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T17:49:58.857

一点点javascript：

```
<script>
function showtable(o){
   if(o.value==2){document.getElementById('table2').style.display='block';}
   else{document.getElementById('table2').style.display='none';}
   }
</script>

<p>Please select number of puppies:</p>
<p>
<select onchange="showtable(this)">
   <option selected value="1">1</option>
   <option value="2">2</option>
</select>

<table id='table2' width="330" border="0" style="display:none"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T18:23:02.943

**HTML 更改**

```
<select onchange="showForm(this.options[this.selectedIndex]);"> 
```

为什么需要它？

用于监听选择框值的变化。

```
<table width="330" border="0" class="puppy"> 
```

添加`class=puppy`了可读性属性。因为隐藏`table`元素将是通用的并且容易出错。

**Javascript 更改**

function showForm(option){ //用户选择的选项。var val = parseInt(option.value); //形成文档中的元素。var forms = document.getElementsByClassName("puppy");

```
 for(var i=0,total=forms.length;i<total;i++){
     var form = forms[i];
     var display = form.style.display;
     if(i<val && display == "none"){
        form.style.display = "block";
     }else if(i >= val && display != "none"){
        form.style.display = "none";
     }
   } 
```

}

现场演示[@http://jsfiddle.net/A3eFz/31/](http://jsfiddle.net/A3eFz/31/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-17T16:35:05.363

请尝试以下示例，希望对您有所帮助。

```
<label for ="amount">Please select number of parameter</label><br/>
<select name="amount" id="amount" title="amount">
 <option value="00">0</option>
 <option value="01">1</option>
 <option value="02">2</option>
 <option value="03">3</option>
 <option value="04">4</option>
 <option value="05">5</option>
 <option value="06">6</option>
 <option value="07">7</option>
 <option value="08">8</option>
 <option value="09">9</option>
 <option value="10">10</option>
</select>
<form name = "AddQuery" id = "AddQuery" method = "POST" action = "submit.php">
<div id="groups">
</div>
<div id="other">
</div>
<input type="submit" value="Submit">
</form>

<script type="text/javascript" src="js/jquery-1.4.3.min.js"></script>

 <script type="text/javascript">
$(document).ready(function(){
$('#amount').change(function(){
 $('#groups').empty();
 var group = '';
 var number = parseInt($(this).val());
   for(var i=0;i<number;i++){
       group += '<div id="group">' +
'<label for="name['+i+']">Name'+i+'</label> '+
'<input name="name'+i+'" type="text" id="name'+i+'" value="">' +
'<label for="type['+i+']">Type'+i+'</label> '+
'<input name="type'+i+'" type="text" id="type'+i+'" value="">' +
'</div>';
}
  $('#groups').append(group);

  $('#other').empty();
  var other = '';
  other +='<div id="other"><input type="hidden" name="n" id ="n" value="'+number+'"/></div>';

$('#other').append(other);
});
});
</script> 
```

# javascript - 根据图像在服务器上的存在与 jquery 交换图像

> ID：14404402
> 
> 赞同：-1
> 
> 时间：2013-01-18T17:32:46.670
> 
> 标签：javascript, jquery, ajax

在过去的几天里，我一直试图找出这个半特定的问题，我真的可以用另一双眼睛来解决它。

我的目标是在页面上有一个图像。它以静态 png 开始，当它被点击时，它会换成 .gif 并播放动画。当它再次点击时，它会再次交换并播放第二个 .gif 动画。它第三次做同样的事情。单击第 3 个 .gif 时，它会再次播放第 1 个 gif 动画，并重新开始该过程。

我的问题是页面上加载了多个图像，有些总共有 3 个 gif 动画，有些有 2 个，有些只有一个。

所以我要做的是在加载下一个之前检查 .gifs 是否存在。

这是我的一些符号的摘录...

```
$('#postContainer img').click(function () {            
    imgSrc = $(this).attr('src');    
    if(imgSrc.indexOf('_B.png') != -1){
        imgSrcToUse = imgSrc.replace('_B.png', '_pt1.gif');
        $(this).attr('src', imgSrcToUse);
        return false;
    } 
```

上面的代码在单击图像时运行。它找到图像 src，并用第一个动画 gif 替换静态 png。所有图像都有动画 gif，所以这不是问题。

```
if (imgSrc.indexOf('_pt1.gif') != -1) {
    var POS2 = imgSrc.replace('_pt1.gif', '_pt2.gif');
    $.ajax({
        url: POS2,
        type: 'HEAD',
        error: function() {
            alert('error');
            imgSrcToUse = imgSrc.replace('_pt1.gif', '_pt1.gif');
        },
        success: function() {
            alert('success');
            imgSrcToUse = imgSrc.replace('_pt1.gif', '_pt2.gif');
        }
    });        

    $(this).attr('src', imgSrcToUse);
    return false;
} 
```

加载完成后`_pt1`，下次点击时该函数运行。它应该检查a是否`_pt2`存在，如果存在，则将pt1换成pt2。但是，它似乎只在第二次点击时起作用。如果我单击它一次，它会`_pt1`再次加载，然后第二次将`_pt2`正确加载。这是我的主要问题所在......

如果这很复杂，我很抱歉，但我真的很难过。如果你们太困惑了，我会尽力把事情弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:47:24.600

这是您的问题：

```
 $.ajax({
        url:POS2,
        type:'HEAD',
        error: function()
        {
            alert('error');
            imgSrcToUse = imgSrc.replace('_pt1.gif','_pt1.gif');
        },
        success: function()
        {
            alert('success');
            imgSrcToUse = imgSrc.replace('_pt1.gif','_pt2.gif');
        }
    });     

    $(this).attr('src',imgSrcToUse); 
```

最后一行代码正在尝试使用您的 variable `imgSrcToUse`，它还不包含您的 AJAX 查询的结果。`AJAX`是异步的，因此您的`$.ajax`调用会在调用成功（或错误）回调之前返回并移至下一行。您可以通过使用回调中的数据将代码移动到回调中来解决此问题：

```
var $that = $(this);
$.ajax({
    url: POS2,
    type: 'HEAD',
    error: function () {
        alert('error');
        var imgSrcToUse = imgSrc.replace('_pt1.gif', '_pt1.gif');

        $that.attr('src', imgSrcToUse);
    },
    success: function () {
        alert('success');
        var imgSrcToUse = imgSrc.replace('_pt1.gif', '_pt2.gif');

        $that.attr('src', imgSrcToUse);
    }
}); 
```

您在第二次调用中看到成功，因为您将下一个图像名称分配给全局变量。你应该使用`var`来避免这种情况。

# asp.net - 是否可以在 xsl:key 指令中使用变量？

> ID：14404408
> 
> 赞同：1
> 
> 时间：2013-01-18T17:33:00.900
> 
> 标签：asp.net, xml, xslt, grouping

关于[这个](https://stackoverflow.com/questions/14400515/how-can-i-group-nodes-in-xslt-1-0-by-countable-field)问题，是否可以在 xsl:key 中使用变量？我想做这样的事情：

```
<xsl:key name="ChargesKey" match="$ChargesForDisplay/charge" use="Name"/> 
```

我在 ASP.Net 中使用 XSLT 1.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T22:55:49.653

xsl:key 的 match 属性必须是有效模式，而 $x/y 不是有效模式。所以，答案是否定的。现在告诉我们您想要实现的目标，我们可以帮助您实现它。（JLRishe 做了一些疯狂的猜测，她/他称之为“疯狂的假设”，这很可能是正确的；但我不知道这些猜测来自哪里）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:06:04.513

我相信我可以安全地假设您指的是动态生成的节点集变量（与从源 DOM 中选择的变量相反，这些变量是微不足道的），是的，可以对 a 的内容执行键匹配动态生成的节点集变量（正如我为[这个问题](https://stackoverflow.com/a/14400996/1945651)演示的那样）。

假设你有一个这样的变量：

```
<xsl:variable name="ChargesForDisplay">
<charge>
   <Name>Name1</Name>
</charge>
<charge>
   <Name>Name2</Name>
</charge>
<charge>
   <Name>Name1</Name>
</charge>
<charge>
   <Name>Name3</Name>
</charge>
</xsl:variable> 
```

您将像这样定义密钥：

```
<xsl:key name="ChargesKey" match="charge" use="Name"/> 
```

然后你可以像这样应用它：

```
 <xsl:template match="/">
      <xsl:apply-templates select="msxsl:node-set($ChargesForDisplay)" />
  </xsl:template>

  <xsl:template
   match="charge[generate-id(.)=generate-id(key('ChargesKey',Name)[1])]">
    <xsl:variable name="matchingItems" select="key('ChargesKey', Name)" />
    ...
  </xsl:template> 
```

当然，如果变量包含来自源 XML DOM 的节点选择，那么它只是相同的方法，除了您不需要使用`msxsl:node-set()`.

我怀疑在源 XML 文档或多个动态生成的节点集变量中也存在节点名称上的键可能会导致分组产生意外结果（因为 key() 函数会从变量和源文件）。出于这个原因，我建议在节点上定义只存在于一个特定变量中而不存在于其他任何地方的键。

# ms-access - 以编程方式设置 Combobox.Selected，但我无法显示选择

> ID：14404412
> 
> 赞同：0
> 
> 时间：2013-01-18T17:33:07.757
> 
> 标签：ms-access, combobox, ms-access-2010

因此，在 MS Access 2010 中，我有一个用于查看客户端详细信息的主表单，以及带有子表单的选项卡式子表单导航，该子表单在不同的表中为所述客户端显示信息。在一个页面上，我有一个组合框来选择查看与客户相关的测试会话的日期。我试图在用户转到此选项卡和/或在查看此选项卡时循环通过其他用户时自动选择第一个组合框值。我的简单VB代码如下：

```
Private Sub Form_Current()
    Me.DateOfScreening.Requery
    Me.DateOfScreening.Selected(2) = True
End Sub 
```

requery 命令正在执行（通过不同的客户端分页将更新组合框的值，并且注释该行会停止该行为，因此我知道此代码块正在执行），但 Selected 命令似乎没有选择任何内容。

我希望我只是错过了一些明显的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:38:06.320

出于某种原因，为组合框设置选定的行索引对我来说表现不佳。你能直接设置组合框的值吗，如

```
 Me.DateOfScreening = "yourValue" 
```

此外，在引用控件时，您可以使用

```
 me.dateofScreening.column(0)    'if 0 is your bound col index 
```

或者可能

```
 me.dateofScreening.itemdata(0) 
```

另外，你能不能做一个 debug.print(me.dateofScreening.column(0)) 或 msgbox (me.dateofScreening.column(0)) 并让我知道它是否说明了什么。

# ruby-on-rails - 在 Ruby 中的私有/公共/受保护方法之后使 vim 缩进

> ID：14404413
> 
> 赞同：4
> 
> 时间：2013-01-18T17:33:10.733
> 
> 标签：ruby-on-rails, ruby, vim

我的团队已经同意遵循关于私有/公共/受保护方法缩进的 Rails 约定指南。这是：[http ://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#follow-the-coding-conventions](http://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#follow-the-coding-conventions)

但是我还没有找到任何关于如何使 vim-ruby 以这种方式工作的信息。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-03T20:03:10.960

这已经晚了几个月，但我一直在寻找与 vim-ruby 相同的功能，但它还不存在。我最终提出了这个建议，并在 AndrewRadev 的帮助下实现了这个功能： [https ://github.com/vim-ruby/vim-ruby/pull/177](https://github.com/vim-ruby/vim-ruby/pull/177) [https://github.com/vim-ruby/vim-ruby /拉/179](https://github.com/vim-ruby/vim-ruby/pull/179)

使用最新的 vim-ruby，您可以设置：

```
let g:ruby_indent_access_modifier_style="indent" 
```

在您的 ~/.vimrc 中，缩进将按照 Rails 约定指南中的说明工作。

# php - 如何在我的历史日志中隐藏 OpenSSL 使用的密码？

> ID：14404415
> 
> 赞同：1
> 
> 时间：2013-01-18T17:33:19.360
> 
> 标签：php, linux, security, bash, openssl

我正在使用 OpenSSL 加密服务器上的文件。

我使用的命令类似于这个：

```
 openssl enc -aes-256-cbc -salt -in file.txt \ -out file.enc -pass pass:mySillyPassword 
```

我担心密码会保存在我服务器的日志中。

在不将密码保存在服务器日志上的情况下，使用 OpenSSL 加密我的文件的最佳方法是什么？

**重要**我正在通过 PHP 执行此命令。该命令存储在一个 shell 脚本文件中。PHP 只是执行。

**更新** 我为每个加密的文件生成不同的密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:47:53.850

使用 php-oopenssl.. 代替[http://php.net/manual/en/function.openssl-encrypt.php](http://php.net/manual/en/function.openssl-encrypt.php)。此外，使用 shell 脚本非常容易受到攻击。任何人都可能从 ps -ax 命令或类似命令中看到密码。

假设只有 ROOT 可以看到密码，密码（最好用第二个硬编码密码加密）应该从 root:root 拥有的文件中读取 0600 chmod 选项。Web 服务器以 root 身份启动时，将具有对该文件的访问权限。服务器可以将该文件内容（即密码）设置为 php 文件的环境变量到某个全局变量中。我很久以前就尝试过类似的东西，它奏效了。

-特里洛克。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T17:35:36.943

您可以在 OpenSSL 配置文件中指定密码。

[http://wwwneu.secit.at/web/documentation/openssl/openssl_cnf.html](http://wwwneu.secit.at/web/documentation/openssl/openssl_cnf.html)

# javascript - 为什么在不允许其他特殊字符作为首字母的情况下允许使用 var $importantVar？

> ID：14404416
> 
> 赞同：0
> 
> 时间：2013-01-18T17:33:20.523
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 变量名称的有效字符](https://stackoverflow.com/questions/1661197/valid-characters-for-javascript-variable-names)

开始学习 Javascript，发现可以将变量命名为

`var $importantVar;`

我想知道我们可以用`$`符号命名变量而不允许使用所有其他特殊字符吗？

注意：我知道您也可以在名称前使用 _ ，但这在所有其他语言中也是允许的（至少 C 和 C++）。

# sas - 如何创建一个列，该列将列的内容重复另一列中提到的指定次数？

> ID：14404418
> 
> 赞同：2
> 
> 时间：2013-01-18T17:33:26.053
> 
> 标签：sas

我想使用列“A”和“B”来创建列“结果”，这是 A 重复 B 次的内容

```
A  B  Result
z  3  zzz
az 2  azaz 
```

尝试使用`Result=repeat(A,B)`未成功。使用重复语句时我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:53:31.440

REPEAT 函数返回由第一个参数重复*n*次组成的字符值，因此，第一个参数在结果中出现*n + 1*次。

所以，你必须从 B 中减去 1 才能得到你想要的结果。

尝试

```
Result=repeat(A,int(B)-1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:41:58.793

在 R 中很简单！. 抱歉，我没有寻找标签，但这是 R 的做法

尝试包 Hmisc 中的函数 makeNstr()

```
>require(Hmisc)
>df <- data.frame(A = c("a","az"), B = c(3,2)) 
>Result <- makeNstr(df$A,df$B)
>df <- cbind(df,Result)
>df
 A B Result
1  a 3    aaa
2 az 2   azaz 
```

希望你觉得它有用

# git - 子项目中的 Git 自动签出

> ID：14404420
> 
> 赞同：2
> 
> 时间：2013-01-18T17:33:37.740
> 
> 标签：git, workflow

在我的公司享受从 SVN 到**Git**的过渡，我们正在重新考虑我们的工作流程和开发过程以提高效率。

以下是我们项目之间依赖关系的描述：

```
first_app/
└── first_specific_dep
    └── common_dep

second_app/
└── second_specific_dep
    └── common_dep 
```

*   这两个应用程序是相互依赖的，因此单个用户故事可以涉及两个项目的开发。
*   可以同时实现多个开发，因此*功能分支*似乎是一个好主意。
*   同时，一级应用程序的开发可能涉及一个或两个依赖项的开发。

我们正在寻找更好的方式来表示 Git 内部的依赖关系，尤其是在从一个分支切换到另一个分支时。

为了在整个开发过程中保持舒适，希望根项目中的**git checkout**自动执行子项目中的所有其他检查，这样测试人员就不必担心依赖项的分支是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:58:02.827

不幸的是，在这种情况下没有灵丹妙药。有些人试图使用 Git 子模块来解决这个问题，但据我所知，成功率参差不齐。（但是，我自己没有经验，所以我欢迎其他选择。）

在我现在的公司，我们刚刚从 CVS 过渡到 Git，我们面临着同样的挑战。我们学到了两条实用的指导方针：

*   如果您的功能分支经常涉及多个存储库，您应该考虑合并存储库或重新组织代码。作为粗略的指导方针，您的目标应该是在一个分支上完成 90% 以上的开发。否则，功能要么太大，要么组件（存储库后面）没有很好地分离。

*   实用功能确实是一个问题，因为您无法避免在项目之间共享它们（这就是它们的目的）。但是，大多数时候，它们应该是相对稳定的。当您在功能分支中进行开发时，您需要修改实用功能的情况相对较少。

换句话说，代码的逻辑结构越好，遇到问题的几率就越小。

最后，当不确定是否要拆分存储库时，我建议将其保留在一个存储库中。但是，如果你有一个庞大的代码库，不建议使用一个大的存储库，你的推送通常会因为非快进而被拒绝。

我们还在 Git 上构建了几个脚本，以便更轻松地检查项目及其所有依赖项，但同样，这在很大程度上取决于您的环境。

# php - 将用户上传的文件写入 php 脚本到网络驱动器

> ID：14404421
> 
> 赞同：1
> 
> 时间：2013-01-18T17:33:40.483
> 
> 标签：php, iis, networking, save

我有一个用户将 pdf 上传到的 php 脚本。

该软件位于

```
C:\inetpub\wwwroot\fundDocs 
```

并且 pdf 被保存到

```
/pdf    # C:\inetpub\ 
```

我将如何更改它以便将文件保存到网络驱动器

```
O:\pdf 
```

这是编写pdf的代码

```
copy($_FILES["file"]["tmp_name"], "pdf/".$fullFileName); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:41:16.343

```
copy($_FILES["file"]["tmp_name"], "O:\pdf/".$fullFileName); 
```

只需确保运行 PHP 进程的帐户有权访问网络驱动器，并有权将文件写入该文件夹。

# c# - 使用标签在 Windows 窗体应用程序上保持代码整洁

> ID：14404422
> 
> 赞同：5
> 
> 时间：2013-01-18T17:33:43.313
> 
> 标签：c#, winforms, coding-style

我目前正在用 C# 开发一个 Windows 窗体应用程序，它将利用 GUI 的选项卡。我面临的问题是代码变得不整洁。原因是 GUI 组件的代码（例如按钮单击）驻留在主表单代码中。所以我正在寻找一种方法，以同样的方式处理所有 GUI 交互，但以逻辑方式分离代码（例如不同的文件）。就像让 button1_click() 驻留在另一个文件中一样，但工作方式与以前相同。谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T17:35:07.773

您可以将每个“选项卡”放入其自己的`UserControl`中，并在那里处理事件，而不是在主窗体中处理所有事件。

由于选项卡通常每个都代表“不同”的东西，这通常很容易实现，并有助于清理您的代码。

# entity-framework - Entity Framework 4.1 不同模型中的复杂类型重用

> ID：14404426
> 
> 赞同：2
> 
> 时间：2013-01-18T17:33:46.413
> 
> 标签：entity-framework, model, complextype

这是我找不到任何有用的场景。也许我是第一个考虑这样做的人：

方法：**数据库优先**

数据库：**SQL Server 2008 R2**

项目：DLL（数据访问）

我有一个数据访问库，它封装了对数据库的所有访问以及 biz 功能。数据库有很多表，所有表都有以下 2 列：

*   **last_updated_on** : 小日期时间
*   **last_updated_by** : nvarchar(50)

该项目包含几个模型（或 edmx 文件），其中仅包含映射到它们所代表的表的相关实体。由于每个表都包含 last_updated_* 的列，因此我**在其中一个模型中创建了一个复杂类型，**如下所示：

复杂类型：历史

*   由（字符串：**last_updated_by**）
*   开启（日期时间：**last_updated_on**）

问题是它只能在我定义它的模型中使用。

A）如果我尝试在其他模型中使用它，它不会在设计器中显示 B）如果我在其他模型中定义它，我会得到错误历史已经定义

**是否有任何解决方案可以使在一个模型中定义的 History 复杂类型可以被其他模型重用？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T19:48:25.787

我试图做几乎完全相同的事情（我的数据库字段是“created”、“creatorId”、“modified”和“modifierId”，封装成一个复杂类型 RecordHistory）并在找到答案之前遇到了这个问题。 ..

[http://msdn.microsoft.com/en-us/data/jj680147#Mapping](http://msdn.microsoft.com/en-us/data/jj680147#Mapping)概述了解决方案，但由于它相当简单，我也会在这里介绍基础知识：

1.  首先像你一样创建复杂类型（在.edmx Designer中选择字段，右键，选择“重构为新的复杂类型”）

2.  在 .edmx 设计器（不是模型浏览器）中，右键单击具有相同公共列的另一个表/实体，然后选择添加 -> 复杂属性

3.  新属性将自动分配一个复杂类型。如果您有 1 个以上的复杂类型，请编辑新属性的属性并适当设置类型

4.  再次右键单击表/实体（在模型浏览器或设计器中）并选择表映射

5.  更新每个公共字段的值/属性列（在我的例子中，将它们从“modified：DateTime”更改为“history.modified：DateTime”）

6.  从您的实体中删除旧的公共字段，只保留复杂类型

# maven - 在发布的 POM 中保留属性值

> ID：14404428
> 
> 赞同：2
> 
> 时间：2013-01-18T17:33:51.923
> 
> 标签：maven

我有一个为第三方系统构建插件的 Maven 项目。第三方系统*要求*版本号的格式为：`YYYYMMDDNN`其中`NN`是内部版本号，日期应与项目的发布日期相对应。我们将其称为“外部版本”。在构建时，我们使用`maven.build.timestamp`设置此值，并`maven-release-plugin`适当地将此值过滤到我们的源中。

我们还有一个内部语义版本编号方案，用于`${project.version}`.

当我们进行发布时，maven-release-plugin 会适当地转换`project.version`SNAPSHOT，在 git 中对其进行标记，等等。有没有办法同时“修复”该`YYYYMMDDNN`版本，以便该版本的未来版本相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:24:04.810

您可以使用发布插件`preparationGoals`来编辑`pom.xml`锁定属性，然后使用`completionGoals`它来解锁它。

您在这些目标中所做的更改将被提交，实际上我的目标是在版本 maven 插件上提供一个目标，以锁定范围并再次解锁它们以在上述两个步骤中使用，以便版本范围变得几乎可用... 只是 avent 有时间，但我确实添加了完成目标发布阶段。

# postgresql - Postgres SPI 游标选项：完整列表在哪里？/ 默认选项是什么？

> ID：14404430
> 
> 赞同：0
> 
> 时间：2013-01-18T17:33:57.543
> 
> 标签：postgresql

从 Postgresql 文档中：

```
int cursorOptions
    Integer bit mask of cursor options; zero produces default behavior. 
```

默认行为是什么？光标选项的完整列表在哪里？我已经浏览了一个小时的文档。有人可以提供链接或指出正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:49:03.303

我正在整理一份清单，`cursorOptions`因为我翻阅了文档以帮助其他人省去麻烦。

定义在`<src/include/nodes/parsenodes.h>`：

`CURSOR_OPT_BINARY`(0x0001)

`CURSOR_OPT_SCROLL`多个 SPI 命令需要 (0x0002)。设置此选项将允许通过光标进行更复杂的移动。更多细节在[`SPI_cursor_fetch`](http://www.postgresql.org/docs/current/interactive/spi-spi-cursor-fetch.html), [`SPI_cursor_move`](http://www.postgresql.org/docs/current/interactive/spi-spi-cursor-move.html), [`SPI_scroll_cursor_fetch`](http://www.postgresql.org/docs/current/interactive/spi-spi-scroll-cursor-fetch.html),的文档中解释[`SPI_scroll_cursor_move`](http://www.postgresql.org/docs/current/interactive/spi-spi-scroll-cursor-move.html)

`CURSOR_OPT_NO_SCROLL`(0x0004)

`CURSOR_OPT_INSENSITIVE`(0x0008)

`CURSOR_OPT_HOLD`(0x0010) 被 忽略[`SPI_prepare_cursor`](http://www.postgresql.org/docs/9.2/static/spi-spi-prepare-cursor.html)。但是，它的行为在文档[`SPI_prepare_params`](http://www.postgresql.org/docs/9.2/static/spi-spi-prepare-params.html)中[`SPI_cursor_open_with_args`](http://www.postgresql.org/docs/9.2/static/spi-spi-cursor-open-with-args.html)没有指定。

`CURSOR_OPT_CUSTOM_PLAN`(0x0020)

`CURSOR_OPT_FAST_PLAN`(0x0040)

`CURSOR_OPT_GENERIC_PLAN`(0x0080)

注意：如果任何能够编辑帖子的人希望对此答案做出贡献（其他选项、​​功能或见解），请随时这样做。我将尝试将评论移到答案中。

# php - 将已解析的电子邮件标记为“已解析”的最佳方法是什么……只需删除它们？

> ID：14404434
> 
> 赞同：0
> 
> 时间：2013-01-18T17:34:18.587
> 
> 标签：php, codeigniter, email

我正在为一个网站编写电子邮件解析器，但我不确定最佳实践。具体来说，我不确定如何标记我已经解析过的电子邮件，所以我每次访问邮箱时都不会访问它们。

PS - 我从来没有做过*任何*电子邮件解析。

到目前为止，我正在使用 Flourish 库（以及 Codeigniter），我正在使用 cron 作业调用 cronjobs/parseMail

```
public function parseMail(){
    // Connect to a remote imap server
    $mailbox = new fMailbox('imap', 'mysite.com', 'user', 'password');

    // Retrieve an overview of all messages
    $messages = $mailbox->listMessages();

    foreach ( $messages as $message ){
        $messageBody = $message['text'];
        // parse it
    }
} 
```

所以一旦我“处理”了一封电子邮件..我应该删除它吗？或者有没有更好的方法来确保我不会解析我已经完成的电子邮件？

奖励问题 > 我不需要在某处提供特定的电子邮件帐户吗？如果我有 "admin@mysite.com" 和 "addressForParsing@mysite.com" .. 在哪里指定我只对后者感兴趣？我只是从我解析的信息中提取“To：”还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:43:53.440

1.  Flourish：哇……这比普通的 PHP 函数更有用。您必须在 IMAP 外部存储消息 UID 以跟踪是否已处理某些内容。

2.  PHP/CodeIgniter：CI 似乎没有 IMAP 库，因此您使用的是 PHP 函数。[`imap-setflag-full()`](http://php.net/manual/en/function.imap-setflag-full.php)将允许您`\Flagged`在消息上设置标志，您可以使用该标志来跟踪消息是否已被处理。

3.  自定义套接字代码：您可以使用类似[此代码](https://stackoverflow.com/a/6994157/1064767)的代码来设置/获取自定义 IMAP 标志，但您可能必须阅读一些 IMAP RFC 才能使其他一切正常工作。

# php - 服务器关闭时超时图像以防止集群过载？

> ID：14404439
> 
> 赞同：2
> 
> 时间：2013-01-18T17:34:34.467
> 
> 标签：php, load-balancing, high-availability, haproxy

这是一个有点复杂的情况。我们通过 haproxy 后面的 16 台负载平衡服务器为我们的应用程序提供服务。我们从另一个运行 nginx 的服务器提供与应用程序相关的图像，该服务器也位于 haproxy 负载均衡器后面。我们有一个全局 CDN，可以从该图像服务器中提取图像并缓存它们以供将来使用，因此即使我们处理 3 亿张左右的图像，该服务器上的负载也非常低。

现在，昨天我们不得不将 RAID 阵列中的一个驱动器换成图像服务器。当我们删除它时，我们当然希望我们的一些图像不再加载，但我们遇到了一个更严重的问题。与应用服务器的连接猛增，我们集群中的任何内容都无法提供服务。我的想法是应用程序请求进入负载均衡器，访问应用程序服务器并挂在那里等待提供图像。由于服务器宕机，请求不断涌入，整个系统被锁定。

我显然希望将来避免这种情况。关于我们可能需要在哪里设置合理的 timout 或如何在负载均衡器上处理它的任何建议？如果发生这种情况，我希望我们的应用程序像往常一样加载，只是没有图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T09:21:13.903

你应该看看——

```
 timeout server 50000
    timeout client 50000 
```

将这些设置为低通常是一个坏主意，因为它只是在“超时连接”建立后。但是，降低它们将调整已建立连接的超时值。

你也可以调

```
 timeout http-request 
```

这将调整等待 HTTP 请求的最长时间。

# javascript - 如何在 Uploadify 中添加 cancelImg

> ID：14404440
> 
> 赞同：1
> 
> 时间：2013-01-18T17:34:40.747
> 
> 标签：javascript, uploadify

在 Uploadify 的许多在线示例中，您会看到 JavaScript 插件中使用的一个名为“cancelImg”的属性，您可以在其中指定用于 Flash 控件中“取消按钮”的小 X，以防您想取消上传。这样做对我不起作用（没有出现图像或取消按钮，尽管有一个“不可见的取消按钮”，您可以单击它来取消上传），官方文档实际上甚至没有指定存在这样的一个财产。

有谁知道我在上传文件时如何让取消按钮显示在 Flash 控件中？使用包含的 uploadify-cancel.png 就可以了。

**更新：**这是闪光灯控制的外观。您可以看到右侧没有取消按钮：

![在此处输入图像描述](../Images/33f19bbb42334b9a7ccd349ce5694b12.png)

这是我的代码：

```
 $(document).ready(function () {
                $("#file_upload").uploadify({
                    uploader: '@Url.Action("UploadFile", "Home")',
                    swf: '@Url.Content("~/Scripts/Uploadify/uploadify.swf")',
                    cancelImg: '@Url.Content("~/Scripts/Uploadify/uploadify-cancel.png")',
                    removeCompleted: false
                });
            }); 
```

谢谢，杰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-27T12:01:55.067

嗯...最后一个帖子并没有真正回答你的问题。

我遇到了同样的问题，解决方案只是在uploadify.css中编辑取消图像的文件名/路径（或您的uploadify CSS文件的名称。）我发现那里的路径不正确，所以不管cancelImg: 在您的 jquery 代码中，如果 CSS 文件中的文件名/路径错误，则取消图像（通常是十字）将不会显示。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:02:14.563

你可以像这样让你的uploadify

```
$('#file_upload').uploadify({
        'uploader': ResourceUplodify.Uploader,
        'script': ResourceUplodify.ScriptFile,
        'cancelImg': '../../Content/images/Cancel-img.jpg',,
        'folder': ResourceUplodify.Folder,
        'fileDesc': 'Document Files',
        'formData': { 'uid': userid },
        'buttonImg': '../../Content/images/Attach-File.jpg',
        'fileExt': '*.pdf;*.doc;*.ppt;*.odt;*.rtf;*.txt',
        // 'sizeLimit': 10485760,
        'sizeLimit': sizelimit,
        'height': 29,
        'width': 90,
        'buttonText': 'Attach File',
        'multi': false,
        'auto': false,
        'onSelect': function (a, b, c, d, e) {

        },
        'onComplete': function (a, b, c, d, e) {

            }

            // }
        },
        'onError': function () {
            UploadOnError("File"); //function call
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:52:56.897

确保uploadify-cancel.png 文件与uploadify.swf 位于同一目录中。

我不使用“cancelImg”属性。这是我的初始化代码：

```
function setUploadAttachments() {
    $("#<%=FileUpload1.ClientID %>").uploadify(
    {
        'queueSizeLimit': 1,
        'checkExisting': 'CheckForExistingFileHandler.ashx?ID=<%=this.MRID.Value %>',
        'multi': false,
        'swf': '~/../../../scripts/uploadify.swf',
        'uploader': 'UploadifyHandler.ashx',
        'fileSizeLimit': '50MB',
        'fileTypeExts': '*.gif; *.jpg; *.png; *.tif; *.xls; *.xlsx; *.csv; *.doc;',
        'auto': true,
        'method': 'post',
        'formData': { 'ID': getParameterByName("ID"), 'UID': '<%=this.UID.Value %>' },
        'onUploadComplete': function (file) {
            uploadAttachments();
        },
        'buttonText': 'Select File'
    });
} 
```

# linux - g ++抛出文件无法识别：文件格式无法识别错误

> ID：14404445
> 
> 赞同：7
> 
> 时间：2013-01-18T17:35:13.963
> 
> 标签：linux, g++, libpq

使用命令出现以下错误`g++ -o test -L . -l pq`

```
libpq.so: file not recognized: File format not recognized

#file libpq.so
libpq.so: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), not stripped 
```

gcc 版本 4.1.2 20070115 (SUSE Linux)

如果我尝试使用`-l dbodbc`而不是`-l pq`.

请注意，这`test.c`是一个简单的 hello world 程序。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T23:07:38.577

`file /usr/bin/g++`告诉你它`g++`本身是一个 64 位可执行文件，即它在 64 位机器上运行，它*并没有*告诉你 g++ 可以*编译*64 位代码（这不太可能，但它*可能*是一个完全不同的交叉编译器处理器！）使用`g++ -v`或`g++ -dumpmachine`找出它生成可执行文件的目标。

G++ 实际上并没有使用那个库，它只是将`-l`选项传递给链接器，所以错误来自链接器，`ld`

如果`ld`和`objdump`都说他们无法识别库，但相同的文件在不同的机器上很好，我会尝试更新或重新安装`binutils`包，它同时提供`ld`和`objdump`.

您可能安装了 32 位，`binutils`因此它不会理解 x86_64 库。确保您已安装 64 位（即 x86_64）binutils RPM。`ld``objdump`

# javascript - 选定的元素不会在 d3 中改变

> ID：14404446
> 
> 赞同：0
> 
> 时间：2013-01-18T17:35:15.067
> 
> 标签：javascript, svg, charts, d3.js

该片段是Reingold-Tilford 树的示例[http://bl.ocks.org/4063550](http://bl.ocks.org/4063550)的略微修改版本。一切都是相似的，除了我稍微更改了将文本附加到节点的代码。我想为每个节点文本附加一个 id，以便稍后可以稍微调整文本，使图表更具可读性。

在这里，我添加了 id 并稍微调整了整个图表的旋转。我的更改用 ** 括起来。

```
node.append("text")
  .attr("dy", ".31em")
  **.attr("id", function(d,i) {return "n" + i;})**
  .attr("text-anchor", function(d) { return d.x < 180 ? "start" : "end"; })
  .attr("transform", function(d) { return d.x < 180 ? "**rotate(10)**translate(8)" :"**rotate(199)**translate(-8)"; })
  .text(function(d) { return d.name; });
}); 
```

在上面是唯一更改的示例代码之后，我想将下面的行，例如，放入同一个脚本中。

```
d3.select("#n1").text("test"); 
```

当我加载页面时，它不会更改节点 id = "n1" 处的文本！如果我使用 Firebug 将完全相同的行放入控制台，它会根据需要更改 n1 节点的文本。

在浏览了无数教程等之后，我认为我对这些东西的工作原理并不了解，任何建议都将不胜感激！

编辑：这是所要求的完整 html 文件！这是我上面链接的示例，唯一的例外是我上面描述的示例。

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>

.node circle {
  fill: #fff;
  stroke: steelblue;
  stroke-width: 1.5px;
}

.node {
  font: 12px sans-serif;
}

.link {
  fill: none;
  stroke: #ccc;
  stroke-width: 1.5px;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

var diameter = 960;

var tree = d3.layout.tree()
    .size([360, diameter / 2 - 120])
    .separation(function(a, b) { return (a.parent == b.parent ? 1 : 2) / a.depth; });

var diagonal = d3.svg.diagonal.radial()
    .projection(function(d) { return [d.y, d.x / 180 * Math.PI]; });

var svg = d3.select("body").append("svg")
    .attr("width", diameter)
    .attr("height", diameter)
  .append("g")
    .attr("transform", "translate(" + diameter / 2 + "," + diameter / 2 + ")");

d3.json("thesis.json", function(error, root) {
  var nodes = tree.nodes(root),
      links = tree.links(nodes);

  var link = svg.selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", diagonal);

  var node = svg.selectAll(".node")
  .data(nodes)
    .enter().append("g")
      .attr("class", "node")
      .attr("transform", function(d) { return "rotate(" + (d.x - 90) + ")translate(" + d.y + ")"; });

  node.append("circle")
      .attr("r", 4.5);

  node.append("text")
      .attr("dy", ".25em")
      .attr("id", function(d,i) {return "n" + i;})
      .attr("text-anchor", function(d) { return d.x < 180 ? "start" : "end"; })
      .attr("transform", function(d) { return d.x < 180 ? "rotate(10)translate(8)" : "rotate(199)translate(-8)"; })
      .text(function(d) { return d.name; });
});

d3.select(self.frameElement).style("height", diameter  + "px");

d3.select("#n1").text("test");

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:26:05.450

问题是`d3.json`进行异步调用。也就是说，该块中的代码仅*在*网络调用返回 JSON 数据时执行。*块之后*的代码会立即执行。因此，您正在尝试修改尚不存在的元素。

解决方案是将修改图形的代码移动到`d3.json`块内，或者移动到在该块内调用的函数中。

# image - Symfony2 LiipImagineBundle'无法删除文件'

> ID：14404451
> 
> 赞同：1
> 
> 时间：2013-01-18T17:35:32.347
> 
> 标签：image, caching, symfony, liipimaginebundle

我已经使用这种方法将 LiipImagineBundle 安装到 Symfony 2 -[在 symfony 2.1 中安装和运行 LiipImagineBundle](https://stackoverflow.com/questions/14107488/installing-and-running-liipimaginebundle-in-symfony-2-1)

我已经完成了它要求的一切，它最初创建了缩略图，但是如果我在 config.yml 中更改图像尺寸，图像不会改变！

我尝试使用 app/console cache:clear 清除缓存，但出现以下错误：

```
[Symfony\Component\Filesystem\Exception\IOException]                                                          
Failed to remove file /localhost/path/web//media/cache/my_thumb/media/test.jpg 
```

这是我的树枝模板的样子：

```
<img src="{{ asset(entity.filename) | imagine_filter('my_thumb') }}" /> 
```

看起来好像无法删除图像以生成新图像，有什么想法吗？

更新：

这是我的路由文件：

```
# app/config/routing.yml
_imagine:
resource: .
type:     imagine 
```

这是我的配置文件：

```
# app/config/config.yml
  liip_imagine:
  filter_sets:
     my_thumb:
        quality: 75
        filters:
           thumbnail: { size: [120, 90], mode: outbound } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:07:01.773

尝试对图像目录应用与和文件夹相同的[权限](http://symfony.com/doc/2.0/book/installation.html#configuration-and-setup)。 `app/logs``app/cache`

然后，您应该能够清除缓存而不会出现任何错误。
我还没有使用 LiipImagineBundle，但我认为最好在每次更改尺寸后清除缓存，否则捆绑包必须检查每个请求是否更改了图像（这违背了缓存的目的）！

希望这可以帮助。

# macos - XCode 4.5 继续使用旧代码，尽管有更新

> ID：14404464
> 
> 赞同：4
> 
> 时间：2013-01-18T17:35:55.667
> 
> 标签：macos, debugging, xcode4.5

我有一个几年前的 Mac 项目，我现在正在使用 Xcode 4.5 进行维护。我对代码进行了一些更改，并正在使用调试器测试更改。我所做的每一个更改都是在我看到相关警告时编译的，并且必须在此过程中修复错误。但是当它实际运行时，虽然它显示了最新的代码，但调试器的行为就像之前的代码版本仍然存在一样。它将与注释掉的代码对齐，并在我逐步执行时执行该代码。我所做的更改被完全忽略了，看起来正在调试的编译代码是旧代码，而不是我正在使用的新代码。

但是，当我从我的构建子文件夹运行实际的构建文件时，它确实有变化。只是无法调试它，需要才能找到问题！

我猜调试器使用的派生数据文件夹或文件不知何故不同步或指向错误的位置。我尝试删除那里的所有内容，当然在代码上运行了多个 Clean，但无济于事。我还尝试在 LLVM 和 GCC 以及编辑方案部分中的两个调试器选项之间切换。

有任何想法吗？

# python - 具有多个 Web 应用程序的 Apache mod_rewrite

> ID：14404469
> 
> 赞同：1
> 
> 时间：2013-01-18T17:36:07.973
> 
> 标签：python, apache, mod-rewrite, cherrypy

我已经编写了 2 个独立的 Cherrypy Web 应用程序，需要使用 mod_rewrite 或类似的东西将它们都放在 Apache 后面。需要在[http://domain.com/WebApp1](http://domain.com/WebApp1)和[http://domain.com/WebApp2](http://domain.com/WebApp2)访问它们。到目前为止，我想出了如何做一个虚拟主机，但它只能在[http://domain.com/](http://domain.com/)访问。Apache 的正确配置是什么？我应该使用 mod_rewrite 以外的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:32:30.123

如果这两个应用程序是用cherrypy制作的，你可以避免使用mod_rewrite。

像这样在樱桃树中挂载每个应用程序：

```
import cherrypy

from webapp1 import WebApp1
from webapp2 import WebApp2

cherrypy.tree.mount(WebApp1, '/WebApp1')
cherrypy.tree.mount(WebApp2, '/WebApp2')
cherrypy.engine.start()
cherrypy.engine.block() 
```

例如：

```
 import cherrypy

 class AppOne(object):
     def index(self):
         return 'Hi from app one!'
     index.exposed = True

 class AppTwo(object):
     def index(self):
         return 'Hi from app two!'
     index.exposed = True

 if __name__ == '__main__':
     cherrypy.tree.mount(AppOne(), '/app1')
     cherrypy.tree.mount(AppTwo(), '/app2')
     cherrypy.engine.start()
     cherrypy.engine.block() 
```

或者：

```
 import cherrypy

 class AppOne(object):
     def index(self):
         return 'Hi from app one!'
     index.exposed = True

 class AppTwo(object):
     def index(self):
         return 'Hi from app two!'
     index.exposed = True

 class Root(object):
     app1 = AppOne()
     app2 = AppTwo()

 if __name__ == '__main__':
     cherrypy.tree.mount(Root())
     cherrypy.engine.start()
     cherrypy.engine.block()
     # cherrypy.quickstart(Root()) # is the same 
```

另一种选择是使用[mod_proxy](http://tools.cherrypy.org/wiki/ModProxy)。

# android - Android 上的 Xuggler

> ID：14404470
> 
> 赞同：6
> 
> 时间：2013-01-18T17:36:14.220
> 
> 标签：android, xuggler

我正在尝试在 Android 上使用 Xuggler 将 WAV 文件转换为 M4A。

我在我的 java 构建路径中使用了 xuggle-xuggler-noarch-5.4.jar

并将 libxuggler.so 文件从 xuggle-xuggler-arch-i686-pc-linux-gnu.jar 复制到我的 android 应用程序中的 libs 文件夹中。

在我的主要活动中，我有一个静态初始化程序，它尝试 System.loadlibrary("libxuggler")

但是我只是得到这些信息和错误消息

```
I/dalvikvm(27614): Could not find method com.xuggle.mediatool.ToolFactory.makeReader, referenced from method com.example.quality.MainActivity.convertToMP3
W/dalvikvm(27614): VFY: unable to resolve static method 3376: Lcom/xuggle/mediatool/ToolFactory;.makeReader (Ljava/lang/String;)Lcom/xuggle/mediatool/IMediaReader;
W/dalvikvm(27614): Unable to resolve superclass of Lcom/example/quality/MainActivity$6; (485)
W/dalvikvm(27614): Link of class 'Lcom/example/quality/MainActivity$6;' failed
W/dalvikvm(27614): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Lcom/example/quality/MainActivity;
W/dalvikvm(27614): Class init failed in newInstance call (Lcom/example/quality/MainActivity;)
W/dalvikvm(27614): threadid=1: thread exiting with uncaught exception (group=0x40acf228) 
```

我的 System.loadlibrary 调用失败了

```
UnsatisfiedLinkError: Couldn't load libxuggle: findLibrary returned null 
```

是否可以在 Android 上使用 Xuggler

我做错了什么？

我没做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-13T17:20:06.807

Art Clarke 对 xuggler-users 组有一个解释：

> 我没有尝试将 xuggler 移植到 android，但如果有人感兴趣，所有与 jvm 相关的代码都在“ferry”模块中。内存管理特别复杂和困难，但理论上一个端口是可能的。

# c# - ASP.NET MVC 中的自定义路由

> ID：14404473
> 
> 赞同：0
> 
> 时间：2013-01-18T17:36:41.890
> 
> 标签：c#, asp.net-mvc-4

我正在尝试在 ASP.NET MVC 4 中设置自定义路由。我希望我的路由可以通过

[http://www.mydomain.com/high-school/student/1](http://www.mydomain.com/high-school/student/1)

为了尝试设置此路线，我在 RouteConfig.cs 中添加了以下内容

```
routes.MapRoute(
  name: "HSStudentProfile",
  url: "high-school/student",
  defaults: new { controller = "Students", action = "HSStudentProfile" }
); 
```

**学生控制器.cs**

```
public class StudentsController : Controller
{
  public ActionResult HSStudentProfile()
  {
    return View("~/Views/Shared/Course/Index.cshtml");
  }
} 
```

如果我访问上面提到的 url，我会收到 403.14 错误。如果我更新要使用的路由配置

```
routes.MapRoute(
  name: "HSStudentProfile",
  url: "{controller}/high-school/student",
  defaults: new { controller = "Students", action = "HSStudentProfile" }
); 
```

它有效，但是，我必须将 URL 路径更改为

[http://www.mydomain.com/Students/high-school/student/1](http://www.mydomain.com/Students/high-school/student/1)

有没有办法做到这一点而不必在我的 RouteConfig 中有 {controller}？

# java - MiG 布局、JScrollBar 和 JTabbedPane

> ID：14404474
> 
> 赞同：1
> 
> 时间：2013-01-18T17:36:50.423
> 
> 标签：java, swing, layout, jscrollpane, jtabbedpane

我有一个带有内容窗格的 JFrame。JMenuBar 停靠在窗格的北部，而 JLabel（各种状态栏）停靠在南部。

中间是一个 JTabbedPane。每个选项卡都是一个“文档”。它的视口中包含一个 JScrollBar 和一个 JPanel。

它一直在继续（视口的 JPanel 有更多的 JPanel，可以有更多的 JPanel，等等......），但对于这个例子，让我们说 JPanel（在视口中）可以或不适合窗口空间（因此它不能或可以强制在屏幕上显示滚动条）。

当它适合窗口时，一切都很好，但是一旦我将它的高度设置为太高而无法放入窗口中，JMenuBar 就会在顶部被挤压。

我想防止这种情况发生（不必指定 JMenuBar 的绝对高度，它可能会起作用，但它有点便宜），因为它不应该首先发生。

这里是SCCE（不是很短，但你只需要看第37到117行，我已经用//TODO标记了所有与布局有关的行）。此外，要查看问题何时发生或何时不发生，请在 2000 和 200 之间更改第 88 行的高度值。当然，您还需要一个 MiG 布局库。

这是代码：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.util.ResourceBundle;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTabbedPane;
import javax.swing.KeyStroke;
import javax.swing.ScrollPaneConstants;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;
import javax.swing.UnsupportedLookAndFeelException;

import net.miginfocom.swing.MigLayout;

class Menu extends JMenuBar
{
    private static final long serialVersionUID = 1L;

    public Menu()
    {
        JMenu fileMenu = new JMenu("file"); 
        this.add(fileMenu);
    }
}

class DisplayGUI
{
    JTabbedPane documentSelector;

    void addNewDocument(String name)
    {
        Document newDocument = new Document();
        newDocument.addChapter(new Chapter(), 1);
        documentSelector.add(newDocument, name);
    }

    public DisplayGUI()
    {   
        JFrame masterWindow = new JFrame("name");

        masterWindow.setSize(1100, 800);
        masterWindow.setMinimumSize(new Dimension(400, 400));
        masterWindow.setLocationRelativeTo(null);
        masterWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel rootPanel = new JPanel();
        rootPanel.setLayout(new MigLayout()); //TODO Here is layout set for the content pane of the main JFrame

        Menu menuBar = new Menu();
        rootPanel.add(menuBar, "span, north"); //TODO Here is menu bar added to the JFrame, it's docked north

        JLabel statusBar = new JLabel("Welcome to PLabScript editor! Press File>New to create a new file or go to File>Open to open an existing one.");
        statusBar.setOpaque(true);
        statusBar.setBorder(BorderFactory.createLoweredSoftBevelBorder());
        rootPanel.add(statusBar, "span, south"); //TODO Here is status bar added to the JFrame, it's docked south

        documentSelector = new JTabbedPane(JTabbedPane.NORTH); //TODO JTabbedPane set so the tab chooser is on the top
        rootPanel.add(documentSelector, "grow, push"); //TODO setup so it will take up all the remaining space

        addNewDocument("Brand new document");       

        masterWindow.setContentPane(rootPanel);
        masterWindow.setVisible(true);
    }
}

class Document extends JScrollPane
{
    private static final long serialVersionUID = 1L;
    JPanel basePanel;

    //methods
    void addChapter(Chapter chapter, int index)
    {
        basePanel.add(chapter, "grow, push, h 2000", index-1); //TODO this here adds a chapter to the basePanel of the JScrollPane which is the a representative of a single document
        //TODO it height is set to 2000 (and the problem occurs), but if you reduce it enough so it fits the window, problem will dissaper 
    }

    //constructors
    public Document()
    {
        super(ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED, ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        getVerticalScrollBar().setUnitIncrement(20);

        basePanel = new JPanel();
        basePanel.setBackground(Color.RED);
        basePanel.setLayout(new MigLayout("insets 0")); //TODO "insets 0" is so there is no border thingy around all of the child components

        setViewportView(basePanel);
    }

}

class Chapter extends JPanel
{
    private static final long serialVersionUID = 1L;

    //constructors
    Chapter()
    {
        setLayout(new MigLayout("insets 0")); //TODO "insets 0" is so there is no border thingy around all of the child components
        setBackground(Color.MAGENTA);
    }
}

public class Main
{
    public static ResourceBundle language;

    static boolean setUpLAF()
    {
        for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels())
        {
            if ("Nimbus".equals(info.getName()))
            {
                try
                {
                    UIManager.setLookAndFeel(info.getClassName());
                }
                catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException e)

                {
                    return false;
                }

                break;
            }
        }
        return true;
    }

    public static void main(String[] args)
    {       
        //SetUpLookAndFeel
        setUpLAF(); 

        //Display actual GUI
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new DisplayGUI();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:44:55.110

第 88 行应为：

```
 basePanel.add(chapter, "grow, push", index-1); //TODO this here adds a chapter to the basePanel of the JScrollPane which is the a representative of a single document 
```

第 100 行应为：

```
 basePanel.setLayout(new MigLayout("fill,insets 0")); //TODO "insets 0" is so there is no border thingy around all of the child components 
```

尝试这个。

# foxpro - 如何读取整个文本文件并在 .dbf 中获取输出文件

> ID：14404476
> 
> 赞同：0
> 
> 时间：2013-01-18T17:36:53.450
> 
> 标签：foxpro

R/先生；如何阅读整个文本文件并在 .dbf 中获取输出文件？（将文本文件导入 FoxPro .dbf 文件。）我是 foxpro pl 的新手。详细阐述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:01:42.693

有很多方法可以做到这一点，请您提供更多您正在尝试的示例。它是逗号分隔值列表、固定列长度文本、XLS（较旧的 Excel 文件格式）还是 XML？

您可以像我喜欢的那样创建一个临时游标（或永久表），并在临时游标中进行任何数据清理，然后在一切顺利后追加到最终表。然后，做一个追加，比如

```
create cursor C_MyTempInputDBF ;
   ( SomeColumn c(20),;
     AnotherColumn c(15),;
     etcField c(10) )

append from YourTextFile.txt TYPE SDF 
```

（或输入 XLS、CSV、DELIMITED WITH TAB 等...查看“APPEND FROM”命令的帮助）。

如果您正在处理一个 XML 文件，您可以进行一些类似的导入，只要它只有一层深度的记录，而不是复杂的每个记录有多个条目。该过程将与 XMLTOCURSOR() 函数一起使用。

更多细节和示例文件内容也会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-21T06:19:40.780

** 创建一个名为lines.dbf 的免费表，其中包含一个名为line 的80 个字符的字段。

在此示例中，文本文件来自 Space Track ( [https://www.space-track.org/](https://www.space-track.org/) )，包含 3 行元素。此代码段将文本行作为单独的记录引入。

每个卫星是 3 行，在本例中成为 3 条记录。截至撰写本文时，目录中有 46,392 行（记录），代表 15,464 项。

* * *

使用线条

删除所有

盒

appe from 3le.txt fields line deli

* * *

** 然后可以根据[https://www.mmto.org/obscats/tle.html](https://www.mmto.org/obscats/tle.html)使用 SUBSTR 函数将它们切片，并放置在最终目标表的适当字段中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:23:53.257

如果您正在处理一个简单的文本文件，有一个更简单的解决方案：

```
filetostr("c:file_to_import.txt") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T07:15:42.473

或者您可以使用导入向导。

在 Visual Fox Pro 主窗口中，转到：工具 -> 向导 -> 导入。

从那时起，这很简单。

# iphone - tableView 属性导致循环

> ID：14404486
> 
> 赞同：0
> 
> 时间：2013-01-18T17:37:33.467
> 
> 标签：iphone, objective-c, cocoa, crash

我有一个 UITableViewController 的子类，当我在 viewDidLoad 中调用 self.tableView 时，它会崩溃并继续调用相同的方法。我已经将它从使用故事板（工作正常）转移到只是代码，现在它出现了这个错误。我有一个带有 UITableViewCell 子类的 xib 文件。

```
- (void)viewDidLoad
{
[super viewDidLoad];

UINib *nib = [UINib nibWithNibName:@"AddCell" bundle:nil];

//here
    [self.tableView registerNib:nib forCellReuseIdentifier:@"AddCell"];

self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancel:)];
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(done:)];

// Uncomment the following line to preserve selection between presentations.
// self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for this view controller.
// self.navigationItem.rightBarButtonItem = self.editButtonItem;
} 
```

想知道有没有人遇到同样的问题或者有没有解决办法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:04:22.303

似乎包含上述 -viewDidLoad 实现的类已经拥有 nib。这意味着每次它醒来时，它都会继续自己醒来......

...然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，然后唤醒自己，............ ...

这可能是你的问题吗？

# mysql - 在 MySQL 中保留一个自增 id 块

> ID：14404487
> 
> 赞同：0
> 
> 时间：2013-01-18T17:37:37.817
> 
> 标签：mysql, auto-increment

我收到一批，比如 100 个项目，我需要将它们插入三个相关的 MySQL 表中：比如`current`、`recent`和`historical`。我想在单个插入语句中将每个表中的每个批次作为一个组插入以提高速度。该`current`表有一个自动增量主键`id`，我需要为每个插入的行获取它并用作主键以在`recent`和`historical`表中插入同一行。我的想法是获取当前的 auto_increment 值`current`，使用 将其增加 100 `alter table current AUTO_INCREMENT=`，然后将 100 行插入到`current`我刚刚“保留”的块中以编程方式设置的 id。然后我可以使用相同的 100 个保留 id 值插入到`recent`和`historical`表中，而无需再次从`current`桌子。

我的问题：有什么理由认为这是一个坏主意吗？我在网上什么也没看到。我在堆栈溢出中看到的最接近的是[插入到自动增量字段中](https://stackoverflow.com/questions/5953312/insert-into-an-auto-increment-field)，但这并不完全相同。如果我尝试一次从多个线程执行此操作，我可以看到可能的线程问题。

我也愿意接受有关如何完成此任务的其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:42:35.050

可能存在并发问题：如果另一个连接在您获取当前值和设置新值之间插入值，您将获得重复的键。

但是，我不知道在您的情况下是否会发生这种情况，或者插入是否仅发生在上述批次中，并且永远不会有另一个并行运行的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:51:57.483

我认为您应该将 ID 从 3 个表中分离出来，并且使用 ALTER TABLE 听起来也很可疑。

我能想到的最合适的方法：

*   在`recent`and中`historical`，添加一个引用`current`ID 的列；不要试图强制主 ID 相同。
*   在 上获取 WRITE 表锁`current`。
*   获取的auto_increment值**X。**`current`
*   插入您的 100 条记录；他们的 ID 现在应该从**X** +1 到**X** +100。
*   释放表锁。
*   在额外列中插入记录`recent`并使用已知 ID。`historical`

注意：我不确定 auto_increment 值是指向下一个 ID，还是当前的最高值。如果你使用 MAX(id) 那么你应该使用上面的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-04T21:58:45.690

这[有点]晚了，但如果其他人有同样的问题（就像我一样）：

正如 Ethan 在他的评论中指出的那样，auto_increment 是一个用于生成唯一键的内部 MySQL 实用程序。由于您有能力在 MySQL 外部生成自己的`id`值，我建议从表中删除 auto_increment 开销（但保留`id`为 PK，以便传输到其他表）。然后，您可以将自己的`id`值与数据一起插入。

显然，一旦你这样做了，你就必须编写你自己的递增`id`值。要检索每个批次的“起点”并保持单个批次`INSERT`调用的速度，请创建另一个表（我将调用`management`），其中只有一条记录`last_id`，这相当于但独立于`max(id)`您的三个主要记录表。然后，每次准备处理一个新批次时，`management`使用写锁启动一个事务，批量读取`management.last_id`到`UPDATE` `management.last_id`( `last_id`+1)+number，然后关闭事务。您现在可以`id`插入为该批次保留的顺序值，因为将来`management.last_id`对下一个更大的`id`值集的任何调用。

写锁定事务消除了任何并发问题（如 FrankPI 的回答中所述），因为任何其他尝试读取的进程都必须等待锁被移除，`management`并将*在*`UPDATE`. 这也消除了`id`JvO 回答中的歧义：“...ID现在**应该**从 X+1 运行到 X+100”，这可能是一个危险的假设。

# javascript - 使用javascript构建android可滚动标签设计

> ID：14404488
> 
> 赞同：2
> 
> 时间：2013-01-18T17:37:39.460
> 
> 标签：javascript, android-layout

[http://developer.android.com/design/building-blocks/tabs.html#scrollable](http://developer.android.com/design/building-blocks/tabs.html#scrollable)

有没有人在使用 JavaScript（甚至 jQuery）的 Web 应用程序中实现了这种效果？

让页面滑动得很好（显然这是容易的部分），但是让页面标题正确动画看起来可能很痛苦！

可以只使用固定的选项卡布局，但如果有人有任何提示或示例，我将非常感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T15:09:45.273

有一个 CSS 可以让你的页面看起来像 Android：

*   [https://github.com/proimage/Android-4-ICS-CSS](https://github.com/proimage/Android-4-ICS-CSS)

有一些 JS 的更高级的项目：

*   [http://jaunesarmiento.me/fries/index.html](http://jaunesarmiento.me/fries/index.html)

这是进行页面滑动的方法：

*   [http://stereobit.github.io/dragend/](http://stereobit.github.io/dragend/)（也适用于PC）
*   [http://swipejs.com/](http://swipejs.com/)（仅适用于触摸设备）
*   [http://eightmedia.github.io/hammer.js/](http://eightmedia.github.io/hammer.js/)（只触发事件，不刷页面）

使用这些，您可以在一个 HTML 文件中包含多个页面：

*   [http://handlebarsjs.com/](http://handlebarsjs.com/)
*   [https://github.com/janl/mustache.js](https://github.com/janl/mustache.js)
*   [http://underscorejs.org/](http://underscorejs.org/)
*   [http://embeddedjs.com/](http://embeddedjs.com/)
*   [http://jade-lang.com/](http://jade-lang.com/)
*   [https://github.com/blueimp/JavaScript-Templates](https://github.com/blueimp/JavaScript-Templates)

我正在努力将其中一些库组合成一个可用的应用程序。希望能帮助到你。这也是给我自己的一个注解。

# lucene - Lucene Query 不返回结果，即使它应该

> ID：14404489
> 
> 赞同：1
> 
> 时间：2013-01-18T17:37:44.623
> 
> 标签：lucene

我目前正在尝试从 RamDirectory 中的 Lucene Index (v. 4) 获取所有文档。

在创建索引时，使用以下 addDocument 函数：

```
public void addDocument(int id, String[] values, String[] fields) throws IOException{
    Document doc = new Document();

    doc.add(new IntField("getAll", 1, IntField.TYPE_STORED));    
    doc.add(new IntField("ID", id, IntField.TYPE_STORED));                                              
    for(int i = 0; i < fields.length; i++){
        doc.add(new TextField(fields[i], values[i], Field.Store.NO));
    }

    writer.addDocument(doc);
} 
```

在为所有文档调用此方法后，作者已关闭。正如您从添加到文档的第一个字段中看到的那样，我添加了一个附加字段“getAll”以方便检索所有文档。如果我理解正确，查询“getAll:1”应该返回索引中的所有文档。但事实并非如此。我为此使用以下功能：

```
public List<Integer> getDocIds(int noOfDocs) throws IOException, ParseException{
    List<Integer>   result    = new ArrayList<Integer>(noOfDocs);
    Query           query     = parser.parse("getAll:1");
    ScoreDoc[]      docs      = searcher.search(query, noOfDocs).scoreDocs;

    for(ScoreDoc doc : docs){
        result.add(doc.doc);
    }

    return result;
} 
```

noOfDocs 是被索引的文档数。当然，我在创建 IndexSearcher 时使用了相同的 RamDirectory。将已解析的查询替换为手动创建的 TermQuery 也无济于事。查询不返回任何结果。

希望有人可以帮助找到我的错误。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:31:53.820

例如，我相信您在搜索时遇到了麻烦，因为您使用的是 IntField，而不是 StringField 或 TextField。IntField 和其他数字字段是为数字范围查询而设计的，并且不以其原始形式编制索引。您可以使用[NumericRangeQuery](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/NumericRangeQuery.html)来搜索它们。

但实际上，在我看来， IntField 应该只用于数值，而不是用于一串数字，这就是你所拥有的。ID 通常应该是关键字或文本字段。

至于提取所有记录，您无需添加字段即可。只需使用[MatchAllDocsQuery](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/MatchAllDocsQuery.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:42:56.133

我认为首先你应该运行[Luke](https://github.com/DmitryKey/luke)来验证索引的内容。

此外，如果您允许*****作为带有 的查询的第一个字符`queryParser.setAllowLeadingWildcard(true);`，则类似的查询`ID:*`将检索所有文档，而不必包含**getAll**字段。

# iphone - 检测字体是否为衬线

> ID：14404490
> 
> 赞同：3
> 
> 时间：2013-01-18T17:37:48.010
> 
> 标签：iphone, ios, ios4, fonts, uifont

有没有办法以编程方式检测给定字体是衬线字体还是无衬线字体？

例如，如果用户选择了 Palatino，它就是 serif。如果用户选择 Arial，则它是无衬线字体。

我可以检测到字体名称和姓氏。但我没有看到 UIFont 的 serif 或 san serif 属性。如果没有这个，我想我必须为用户可用的每种字体手动设置和跟踪 isSerif BOOL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:54:43.660

事实上，UIFont 没有任何属性可以提示字体类型。如果您只依赖 OS 字体系列（50+ iOS 6.x），您可以轻松地在 plist 中管理它们，并具有所有（未来）必要的属性。对于使用第三方字体集，如果有（无）衬线字体的属性，您可以阅读[ttf 规范。](https://developer.apple.com/fonts/TTRefMan/)最后的手段是检查其中»serif«的系列或/和字体名称，假设它们已相应命名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:43:18.547

没有任何财产`UIFont`可以明确地为您服务。此时可能值得向 中添加类别`UIFont`，但看起来您必须自己设置映射。

可能是 GitHub 上的一个好项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:50:21.820

您可以使用关键字体名称和布尔值创建一个 plist。这是[iOS中的字体列表](http://iosfonts.com)

# java - JAX-WS 处理程序 - handleMessage 未运行

> ID：14404493
> 
> 赞同：4
> 
> 时间：2013-01-18T17:37:51.157
> 
> 标签：java, web-services, jax-ws, handler

我在 Eclipse 中使用向导将 JAX-WS 处理程序添加到我的项目中。它实现了 SOAPHandler。

然后，在 Project Explorer 中，在**JAX-WS Web Services > Service Endpoint Interfaces > MyServiceSoap**下，我使用了配置处理程序的选项。我指向我的 Handler 类，并在 MyServiceSoap.java 文件所在的同一文件夹中创建了新文件 handler-chain.xml。

我查看了 MyServiceSoap.java 并看到声明 @HandlerChain(file = "handler-chain.xml")

因此，据我所知，所有部件都已到位。但是，当我尝试调用此服务时，handleMessage 永远不会被调用。

这是我的句柄消息代码：

```
@Override
public boolean handleMessage(SOAPMessageContext context) {
        SOAPMessage msg = context.getMessage();
        return true;
} 
```

我在此方法中设置了断点，希望能够看到发送到远程 Web 服务的消息内容。我还必须注意，当我尝试使用此服务时，目前我收到错误“WebServiceException: No Content-type in header”。所以，也许，这个错误发生在 handleMessage 有机会运行之前。

如果有人能为这个主题提供更多的光线，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:34:17.597

我有同样的问题，但我的客户端是由 maven 使用 jaxws:wsimport 生成的。我的处理程序从未被调用，所以解决方案是声明`@HandlerChain(file="MyHandlerFile.xml")`，Xml 文件（在这种情况下）应该在你的类所在的同一个包中，例如：

```
com.my.package.MyClientWS.java
com.my.package.MyHandlerFile.xml 
```

声明注释：

```
@WebService(.....)
@HandlerChain(file="MyHandlerFile.xml")<br>
public class MyClientWS extends Service .... 
```

处理程序链文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<handler-chains xmlns="http://java.sun.com/xml/ns/javaee">
  <handler-chain>
    <handler>
      <handler-name>package.to.my.MyHandler<handler-name>
      <handler-class>package.to.my.MyHandler</handler-class>
    </handler>
  </handler-chain>
</handler-chains> 
```

# wpf - 可观察集合 WPF 绑定显示未更新

> ID：14404495
> 
> 赞同：1
> 
> 时间：2013-01-18T17:38:00.547
> 
> 标签：wpf, user-interface, data-binding

在为 设置数据绑定时`Observable Collection`，在以下上下文中：[Implementing CollectionChanged Handler in XAML with WPF](https://stackoverflow.com/questions/14390368/implementing-collectionchanged-handler-in-xaml-with-wpf/14391171)所有绑定都正常工作，但我发现除了更改 ListBox 中 ItemsSource 定义的属性外，我还必须手动更新UI 的可视化容器，其代码类似于：

XAML：

```
<Grid DataContext="{Binding ElementName=PollPublicStockMainWindow}">
        <ListBox Height="132" HorizontalAlignment="Left" Name="lbFiles" 
                 VerticalAlignment="Top" Width="167" 
                 Margin="{StaticResource ConsistemtMargins}"  
                 ItemsSource="{Binding LbItems}">
            <ListBox.InputBindings>
                <KeyBinding Key="Delete" Command="local:MainWindow.DeleteEntry"/>
            </ListBox.InputBindings>
        </ListBox>
</Grid> 
```

代码隐藏：

```
public partial class MainWindow : Window 
{
    public MainWindow() 
    {
        InitializeComponent();
        LbItems = new ObservableCollection<string>();
        LbItems.CollectionChanged += lbFiles_CollectionChanged;
    }

    private void lbFiles_CollectionChanged(object sender, 
         System.Collections.Specialized.NotifyCollectionChangedEventArgs e) 
    {
        MemoryPersistentStorageBridge memBridge = GetPersistentStorageBridge;
        List<string> newFileList = new List<string>();

        foreach (string str in LbItems) {
            DoSomethingWithNewString(str); //these 2 lines are always paired?  
            lbFiles.Items.Add(str); // this should NOT be needed 
         }
    }
} 
```

我错过了绑定吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:06:57.313

你什么`PropertyChanged`时候开火`LbItems`？它看起来不是那样的。在构造函数中，您`InitializeComponent`首先调用，然后在`LbItems = new ObservableCollection<string>();`. 我认为您的集合初始化“为时已晚”，因为绑定已经被处理。如果您在设置时不触发更改的属性，`LbItems`则绑定将不会更新为实际绑定到集合。

# sql - 如何从 .sql 文件创建多个存储过程

> ID：14404499
> 
> 赞同：4
> 
> 时间：2013-01-18T17:38:24.840
> 
> 标签：sql, sql-server

我有大约 100 个存储过程文件要添加到我创建的新数据库中。有什么方法可以将它们放入文件夹中以导入它们？当我尝试这样做时，就像使用 Windows 资源管理器一样，它只是在查询窗口中将它们全部打开。

我正在使用 SQL Server Management Studio。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T18:03:13.073

现在您没有回复评论中的问题以使您的问题更清楚，但是我有这两个建议

假设您已经有一个使用这些过程的数据库：

1.  右键单击 Management Studio 中的数据库，然后单击任务
2.  点击生成脚本
3.  在出现的对话框中，在指定正确选项时单击下一步
4.  选中“存储过程”复选框
5.  选择所有需要的存储过程
6.  选择选项以将脚本生成到新窗口或文件
7.  你完成了。在另一个数据库上运行你的脚本

如果您有权访问 Visual Studio

1.  创建一个新的 SQL Server 数据库项目
2.  选择新数据库的连接字符串
3.  创建一个存储过程文件夹并将系统中的所有存储过程文件添加到其中
4.  右键单击项目，然后单击部署/发布

希望您有存储过程中引用的表

# ajax - jQuery .find() 不适用于 $.post() 数据

> ID：14404504
> 
> 赞同：2
> 
> 时间：2013-01-18T17:38:43.043
> 
> 标签：ajax, jquery, find, .post

我做了一个简单的例子来说明这个问题：下面的表单使用 jQuery 提交到另一个页面`.post()`。

**形式**

```
$('form').submit(function(){

    $.post(
        $(this).attr('action'),
        $(this).serialize(),
        function(data) {
            var ret = data;
            var final_data = $(ret).find('#holder-1').html();
            alert(final_data);
        }
    )
    return false;

}) 
```

**行动**

```
<div id="holder-1">
    <h1>Content 1</h1>
</div>

<div id="holder-2">
    <h1>Content 2</h1>
</div>

<div id="holder-3">
    <h1>Content 3</h1>
</div> 
```

日志显示内容`data`看起来不错。但是一旦我尝试查找`#holder-1`with `.find()`，它就会返回**undefined**。

这与jQuery api页面中的**最后一个示例**几乎相同：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

这是托管在我的网站上的完整（非）工作示例，其中包含一些`console.log()`代码：

**表格：** [http ://www.peixelaranja.com.br/tmp/post.php](http://www.peixelaranja.com.br/tmp/post.php)

我几乎尝试了任何方法：将 dataType 作为第四个参数传递，使用`$.ajax()`而不是`.post()`，使用`.filter()`而不是`.find()`，不同版本的 jQuery ......似乎没有任何效果。

所有文件都是**UTF-8**。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:47:49.953

我知道你提到你使用`filter`而不是`find`，但是，这应该有效。jQuery 正在剥离`html`, `head`,`body`标记等。一旦完成，`#holder-1`现在就位于层次结构的顶层。

这个小提琴证明`filter`确实有效：

[http://jsfiddle.net/68jEt/](http://jsfiddle.net/68jEt/)

```
var html = '<!doctype html><html dir="ltr" lang="pt-BR"><head>  <meta charset="UTF-8">  <title>Return Test</title></head><body> <div id="holder-1">     <h1>Content 1</h1>  </div>  <div id="holder-2">     <h1>Content 2</h1>  </div>  <div id="holder-3">     <h1>Content 3</h1>  </div></body></html>';

alert($(html).filter("#holder-1").html()); 
```

# r - as.xts 中的错误

> ID：14404508
> 
> 赞同：2
> 
> 时间：2013-01-18T17:38:55.273
> 
> 标签：r, time-series, xts, zoo, quantmod

我有一个 xts 对象`close`（带有`POSIXct`索引）。当我运行*quantmod*命令时，它给出了这个错误`specifyModel(close[,1] ~ close[,2])`：

```
 Error in UseMethod("as.xts") : 
  no applicable method for 'as.xts' applied to an object of class "function".

                     ALBK ANDHRABANK AXISBANK BANKBARODA
2007-01-02 10:01:00 90.89      87.33   468.55     243.95
2007-01-02 10:02:00 90.80      86.92   467.75     243.70
2007-01-02 10:03:00 90.45      86.77   468.65     243.60
2007-01-02 10:04:00 90.31      86.94   468.32     243.95
2007-01-02 10:05:00 90.27      87.05   468.60     244.00
2007-01-02 10:06:00 90.23      87.00   468.00     243.65
2007-01-02 10:07:00 90.24      86.89   467.50     243.60
2007-01-02 10:08:00 89.99      86.77   467.05     243.00
2007-01-02 10:09:00 90.05      86.80   467.40     243.00
2007-01-02 10:10:00 90.20      87.00   467.00     243.00 
```

这个错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:49:31.497

它变得混乱，因为它`close`是基本 R 函数的名称。（可能是一个错误，但我不确定它的使用`specifyModel`范围有多广）

```
> close <- getSymbols("SPY", src="yahoo", auto.assign=FALSE)
> specifyModel(close[, 1] ~ close[, 2])
Error in UseMethod("as.xts") : 
  no applicable method for 'as.xts' applied to an object of class "function" 
```

通过重命名 xts 对象来修复

```
> dat <- close
> specifyModel(dat[, 1] ~ dat[, 2])

quantmod object:        Build date:   

Model Specified: 
     dat[, 1] ~ dat[, 2] 

Model Target:  [ dat 0.1         Product:  dat 
Model Inputs:   

Fitted Model: 

    None Fitted
> 
```

# macos - 更改activationPolicy：从启动

> ID：14404517
> 
> 赞同：2
> 
> 时间：2013-01-18T17:39:29.100
> 
> 标签：macos, cocoa, statusbar, dock

我有以下问题。我有一个带有 UI、nib 等的 Cocoa 应用程序。我需要能够在后台或前台启动应用程序。换句话说，我需要前者中的 NSApplicationActivationPolicyProhibited 和后者中的 NSApplicationActivationPolicyRegular 。现在......如何启动的决定取决于传递给应用程序启动的参数。所以代码看起来或多或少像：

```
 shouldBeBackground = // read this from argument - argv
if (shouldBeBackground) {
    [NSApp setActivationPolicy:NSApplicationActivationPolicyProhibited];
} else {
    [NSApp setActivationPolicy:NSApplicationActivationPolicyRegular];
    [NSApp activateIgnoringOtherApps:YES];
     // later on I do the makeKeyAndOrderFront:
} 
```

现在问题出在 Info.plist 上。如果我将 LSBackgroundOnly 设置为 1，一切都会按预期工作。但是，如果我将它设置为 0（或不设置密钥），当应用程序启动时，它会在 Dock 中显示应用程序的图标几毫秒和一点闪烁。我猜这是因为应用程序是使用默认策略初始化的（开始显示图标），而我将其切换到后台为时已晚。这也在：[可可 - 以编程方式转到前台/后台](https://stackoverflow.com/questions/12948539/cocoa-go-to-foreground-background-programmatically/12981068#12981068)

我知道在哪里读取参数并在我开始可可或应用程序之前执行上一个 IF（例如，我可以挂钩 MyOwnPrincipalClass +initialize），但即使这样（即使我设置了策略）它看起来像启动 Cocoa 将设置默认值。所以它不起作用。

我找到的唯一解决方案是将我的 IF 放在开头（在初始化可可之前），并根据参数，我编写/修改 Info.plist（LSBackgroundOnly 标志）。这可以工作，但它是一个真正的黑客。我想找到一个更清洁的解决方案。

顺便说一句，如果我反其道而行之：始终作为后台启动，然后将其设为前台会产生最差的结果，因为在进入前台时，应用程序的菜单栏不会自动显示：您需要切换到另一个应用程序并返回让它出现....我在互联网上搜索，确实它看起来像一个已知的错误/限制。

BTW2：拥有 2 个不同的二进制文件也不是一种选择。

感谢你给与我的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T15:56:47.080

总是在启动时作为后台应用程序启动。然后，如果在启动时您想成为前台应用程序，您可以以编程方式更改 plist 值，然后以编程方式重新启动您的应用程序（您在终止应用程序之前发送一个 NSTask 来启动您的应用程序）。在应用程序退出时确保您处于后台模式。看起来很简单。

# python - 逐步调试 三元搜索

> ID：14404519
> 
> 赞同：0
> 
> 时间：2013-01-18T17:39:37.477
> 
> 标签：python, search

这是我的代码。

```
def trin_search(A,first,last,target):
    #returns index of target in A, if present
    #returns -1 if target is not present in A
    if first>last:
        return -1
    else:
        one_third=first+(last-first/3)
        two_thirds=first+2*(last-first)/3
        if A[one_third]==target:
            return one_third
        elif A[one_third]>target:
            #search the left-hand third
            return trin_search(A,first, one_third-1],target)
        elif A[two_thirds]==target:
            return two_thirds
        elif A[two_thirds]>target:
            #search the middle third
            return trin_search(A,one_third+1,two_thirds-1,target)
        else:
            #search the right-hand third
            return trin_search(A,two_thirds+1,last,target) 
```

这是一个三元递归搜索。我不断收到此错误：

```
line 24, in trin_search
if A[one_third]==target:IndexError: list index out of range 
```

但我无法想象为什么。这是我在 shell 中运行程序的方式：

```
>>>> A=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]
>>>> trin_search(A,A[0],A[len(A)-1],5) 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:49:36.200

问题出在线路上`one_third=first+(last-first/3)`。在这里，`first == 1`so`first/3 == 0`和表达式变为`first+last`21 和 so 显然超出了范围。你想要的表达式是`first+(last-first)/3`. （您的代码中还有一些其他问题，例如使用列表中的值而不是索引调用函数。）

# jquery - jQuery click(function()) 在第一次点击时不使用变量

> ID：14404520
> 
> 赞同：3
> 
> 时间：2013-01-18T17:39:41.893
> 
> 标签：jquery, variables, click

我有这个小脚本：

```
var $totalHeight;

$(document).ready(function() {
    $totalHeight = $('#sidebar-container').innerHeight();
    $('.sidebar-heading').each(function() {
        $totalHeight = ($totalHeight - $(this).outerHeight());
    });

    $('.sidebar-contents').each(function() { 
        if ($(this).hasClass('active')) {
            $(this).css('height',$totalHeight);
        }
    });

    $('.sidebar-heading').click(function() {
        $('.sidebar-contents').slideUp().removeClass('active').addClass('inactive')/*.css('height','').removeAttr('style')*/;
        $('.sidebar-heading').removeClass('active')/*.next().slideUp()*/;
        $(this).addClass('active').next().addClass('active').removeClass('inactive').css('height',$totalHeight).slideDown();
    });
}); 
```

我很确定它应该做什么是显而易见的。

我的问题是：第一次单击 a`('.sidebar-heading')`不会将期望`$totalHeight`应用于其兄弟。以下点击，确实如此。我究竟做错了什么？

我有[一个包含此代码的草稿 HTML](http://blog-n.de/wordpress-testsite/wp-content/themes/applike/dev-sidebar.html)。我注释掉了上面的那些部分以检查错误在哪里，但无论如何都无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:22:28.933

slideUp() 动画需要一段时间才能运行并在完成后清理所有高度和显示样式。这将删除您在接下来的两行中所做的设置。

尝试等到 slideUp() 完成后再做其他的。

```
 $('.sidebar-heading').click(function() {
        var self = this;
        $('.sidebar-contents').slideUp(undefined, function() {
            $('.sidebar-heading').removeClass('active')/*.next().slideUp()*/;
            $(self).addClass('active')
                .next().addClass('active').removeClass('inactive')
                .css('height',$totalHeight).slideDown();
        }).removeClass('active').addClass('inactive')
        /*.css('height','').removeAttr('style')*/;
    }); 
```

我通过使用调试器在 Chrome 中运行并注意到样式正在以一种奇怪的方式变化来解决这个问题。即使代码正在清除它，第一次单击第二个标题也会留下第一个标题上的高度设置。这意味着某些东西，也许，设置错了。所以我在某人设置的jsFiddle上尝试了上面的代码。瞧……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T20:09:51.867

您还可以让 fx 函数自行设置高度，以避免@LeeMeador 的[答案](https://stackoverflow.com/a/14405192/867480)中提到的冲突。

由于**slideDown()**不接受任何 css 值，我们可以直接使用**animate()**函数来代替。

```
$('.sidebar-heading').click(function () {
    $('.sidebar-heading').removeClass('active');
    $('.sidebar-contents').removeClass('active').addClass('inactive').stop().animate({ height: '0px' });
    $(this).addClass('active').next().addClass('active').removeClass('inactive').stop().animate({ height: $totalHeight + 'px' });
}); 
```

此外，在执行任何动画之前使用**stop()**以防止在上一个动画尚未完成时再次单击标题时出现奇怪的行为。

修改jsfiddle：http: [//jsfiddle.net/z62tr/4/](http://jsfiddle.net/z62tr/4/)

# zend-framework2 - 使用映射器生成实体

> ID：14404524
> 
> 赞同：1
> 
> 时间：2013-01-18T17:40:12.950
> 
> 标签：zend-framework2

我正在尝试找到生成实体的最佳方法，这就是我目前正在做的事情。

我通过映射器和水合器创建了一个实体，如下所示：

```
namespace Event\Model\Mapper;

use ZfcBase\Mapper\AbstractDbMapper;

class Event extends AbstractDbMapper
{
    protected $tableName  = 'events';

    public function findEventById($id)
    {
       $id = (int) $id;

       $select = $this->getSelect($this->tableName)
                      ->where(array('event_index' => $id));

       $eventEntity = $this->select($select)->current();  

     if($eventEntity){

        //Set Location Object
        $locationMapper = $this->getServiceLocator()->get('location_mapper');       
        $locationEntity = $locationMapper->findlocationById($eventEntity->getLocationIndex());          
        $eventEntity->setLocationIndex($locationEntity);

        //Set User Object
        $userMapper = $this->getServiceLocator()->get('user_mapper');
        $userEntity = $userMapper->findUserById($eventEntity->getEnteredBy());
        $eventEntity->setEnteredBy($userEntity);

        //Set Catalog Object
        $catalogMapper = $this->getServiceLocator()->get('catalog_mapper');
        $catalogEntity = $catalogMapper->findCatalogById($eventEntity->getCatalogIndex());
        $eventEntity->setCatalogIndex($catalogEntity);          
    }

    return $eventEntity;
   }
} 
```

现在这种方法的问题是，当我打电话说用户实体时，这个实体有其他实体附加到它上面，所以当我通过插入用户实体生成事件实体时，我的事件实体变得非常大而且笨重，我不希望我只想要“老年学树”的第一层。

所以我正在考虑创建一个 EventEntityFactory ，我可以将 Event 实体的子实体绑定在一起，我正计划为此做一个工厂。

有没有更好的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:24:21.550

一种方法是使用虚拟代理（延迟加载）：

[http://phpmaster.com/intro-to-virtual-proxies-1/](http://phpmaster.com/intro-to-virtual-proxies-1/)

[http://phpmaster.com/intro-to-virtual-proxies-2/](http://phpmaster.com/intro-to-virtual-proxies-2/)

基本上你会生成你的实体，并用一个轻量级的代理对象替换任何相关的实体。此对象只会在需要时通过延迟加载加载相关实体。

我已经多次使用这种方法以及 Datamapper 设计模式，并且效果很好。

# objective-c - NSDate from NSString 从 sqlite 数据库中读取

> ID：14404526
> 
> 赞同：-1
> 
> 时间：2013-01-18T17:40:14.997
> 
> 标签：objective-c, sqlite, nsstring, nsdate

我需要从 a 获取 NSDate 格式`NSString *stringDate`，我会使用以下代码来做到这一点：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"yyyy-MM-dd HH:mm:ss";
NSDate *date = [formatter dateFromString:stringDate]; 
```

如果我手动初始化我的字符串，上面的代码工作正常`NSString *stringDate = @"2013-01-14 17:55:53";`，所以我得到`NSDate`格式正确的日期。

但我正在从 sqlite3 数据库中读取字符串，所以字符串初始化如下：

```
NSString *stringDate = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 0)]; 
```

该字符串是 NSLogged 正确的，但是当我尝试获取 NSDate 格式时，我只得到`(null)`.

关于可能是什么问题的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:42:43.270

您从 sqlite 读取的字符串不是您在 dateformatter 中使用的格式。

编辑：

使用`formatter.dateFormat = @"yyyy-MM-dd HH:mm:ss z";`或修剪时区`(+0000)`将解决您的问题*。- Inder Kr。拉索尔*

# android - 视频作为视图中的背景

> ID：14404527
> 
> 赞同：0
> 
> 时间：2013-01-18T17:40:17.960
> 
> 标签：android, animation, view, background

有没有办法在普通视图上为背景设置动画？

在我们的“开始屏幕”中，我们希望有一个实际上有点动画的背景，所以我们想让光线在文本周围飞行。我可以将其渲染为视频或一组图片或其他内容。它前面应该是正常的按钮，就像现在一样。目前这是一张简单的图片。有没有办法做到这一点？

这是当前的 XML。真的很直接

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/AppTheme"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/porta_aenigma_title_bm"
    android:measureWithLargestChild="false"
    android:layout_gravity="bottom"
    android:orientation="vertical" 
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >

    <helpers.ui.ChangedButton
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="150dp"
        android:layout_marginRight="150dp"
        android:layout_marginTop="150dp"
        android:onClick="startIntro"
        android:text="@string/button1" />

    <helpers.ui.ChangedButton
        android:id="@+id/button2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="150dp"
        android:layout_marginRight="150dp"
        android:layout_marginTop="25dp"
        android:onClick="startSettingMenuButton"
        android:text="@string/button2" />

     <helpers.ui.ChangedButton
        android:id="@+id/button4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="150dp"
        android:layout_marginRight="150dp"
        android:layout_marginTop="25dp"
        android:onClick="startLeadbord"
        android:text="@string/leadbord" />

     <helpers.ui.ChangedButton
        android:id="@+id/button3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="150dp"
        android:layout_marginRight="150dp"
        android:layout_marginTop="25dp"
        android:onClick="startCreditsButton"
        android:text="@string/button3" />

</LinearLayout> 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:46:49.843

我不确定，但您可以实现的另一种方法是使用RelativeLayout 将按钮保存在全宽/高度视频视图的顶部，并将hte 按钮的背景设置为透明，以便视频显示。

# php - yii renderPartial 变量未找到

> ID：14404530
> 
> 赞同：0
> 
> 时间：2013-01-18T17:40:40.860
> 
> 标签：php, yii, renderpartial

> **可能重复：**
> [PHP：“注意：未定义的变量”和“注意：未定义的索引”</a>](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)
> 
> [](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)

 [我正在尝试显示一个表单以在呈现活动或更确切地说是单个活动的视图中创建一个新的捐赠...

它可以很好地显示传递给视图的活动数据，但是当我将代码添加到 renderPartial 时，我不断收到 PHP 通知“未定义的变量：捐赠”。

在 CampaignsController 我使用此代码：

```
 public function actionDisplay($id)
    {
            $campaign=$this->loadModel($id);
            $donations=$this->createDonations($campaign);
            $params = array('User_ID'=>$campaign->campaign_user);
            if(Yii::app()->user->checkAccess('displayCampaigns') || Yii::app()->user->checkAccess('displayOwnCampaigns',$params)){
                    $this->parts=array(
                            'banner'=>Images::model()->getImageUrl($campaign->campaign_banner),
                            'avatar'=>Images::model()->getImageUrl($campaign->campaign_avatar),
                            'copy'=>$campaign->campaign_copy,
                            'campaign_name'=>$campaign->campaign_name,
                    );

                    $parts = $this->parts;
                    $this->layout='//layouts/campaignlayout1';
                    $this->render('display',array(
                            'model'=>$campaign,
                            'parts'=>$parts,
                            'donations'=>$donations,
                    ));

            } else {
                    throw new CHttpException(403,"You can only display your own Campaign");                 
            }       

    } 
```

这是也在 CampaignsController 中的函数 createDonations()，由 $donations=$this->createDonations($campaign) 调用

```
 protected function createDonations($campaign) {
            $newdonation = new Donations; 
            if(isset($_POST['Donations'])) {
                    $newdonation->attributes=$_POST['Donations']; 
                    if($issue->addDonations($newdonation)) {
                            Yii::app()->user->setFlash('donationsSubmitted',"Your Donation has been added." );
                            $this->refresh(); 
                    }

            }
            return $newdonation;
    } 
```

在布局campaignlayout1 中，我首先渲染来自$campaign 和$parts 的数据。效果很好，所以我添加了一个 renderPartial() 来显示来自捐赠的 _form - 这是代码：

```
<?php $this->renderPartial('/donations/_form',array(
            'model'=>$donations, )); ?> 
```

我收到一条 PHP 通知：未定义变量：捐赠

这是堆栈跟踪的一部分：](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index) 

[/protected/controllers/CampaignsController.php(232): CController->render("display", array("model" => Campaigns, "parts" => array("banner" => "](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index) [http://imsgonline.com /yiitest/images/genericbanner.jpg](http://imsgonline.com/yiitest/images/genericbanner.jpg) ", "头像" => " [http://imsgonline.com/yiitest/images/genericmale.jpg](http://imsgonline.com/yiitest/images/genericmale.jpg) ", "复制" => "

寄钱

", "campaign_name" => "Joes Fundraising"), "donations" => Donations))

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:57:30.697

您的问题有点不清楚，但听起来 renderPartial 是导致未定义变量问题的原因。作为参考，完整的错误消息将很有用（即包括行号和文件名部分）。

您通过`render`or传递给视图的任何内容都`renderPartial`将具有与参数数组中的键相同的变量名称。请注意，`renderPartial`它不会继承任何东西，即使它是从视图本身调用的。

例如，您目前拥有：

```
<?php $this->renderPartial('/donations/_form',array(
            'model'=>$donations, )); ?> 
```

在这种情况下，在您看来，您需要使用`$model`来访问您通过数组传递的任何内容（即 $donations）。

如果这`renderPartial`在您的`display`视图中，那么您实际上是在将模型设置为您传递给该视图的任何内容，在本例中为捐赠。请注意，当您传入模型、部件和捐赠时，这非常令人困惑，然后您将调用另一个视图来处理变量名称。

您收到错误是因为您的视图正在尝试使用`$donations`，并且您没有传递任何以“捐赠”作为数组中的键的内容。

# redis - 在 celery 中，如何确保在 worker 崩溃时重试任务

> ID：14404531
> 
> 赞同：12
> 
> 时间：2013-01-18T17:40:50.047
> 
> 标签：redis, scheduled-tasks, celery, django-celery, celery-task

首先，请不要将此问题视为此问题的 [重复](https://stackoverflow.com/questions/5336645/retry-lost-or-failed-tasks-celery-django-and-rabbitmq)

我有一个使用`celery`and `redis`as`broker`和`result_backend`. 我的问题是如何确保当芹菜工人崩溃时，当芹菜工人备份时，所有计划的任务都被重新尝试。

我已经看到有关使用的建议`CELERY_ACKS_LATE = True`，以便代理将重新驱动任务，直到它得到一个 ACK​​，但在我的情况下它不起作用。每当我安排一项任务时，它都会立即转到工作人员，该工作人员将其持续到预定的执行时间。让我举个例子：

我正在安排这样的任务：`res=test_task.apply_async(countdown=600)`，但立即在 celery worker 日志中我可以看到类似 :的内容`Got task from broker: test_task[a137c44e-b08e-4569-8677-f84070873fc0] eta:[2013-01-...]`。现在当我杀死芹菜工人时，这些计划任务就会丢失。我的设置：

```
BROKER_URL = "redis://localhost:6379/0"  
CELERY_ALWAYS_EAGER = False  
CELERY_RESULT_BACKEND = "redis://localhost:6379/0"  
CELERY_ACKS_LATE = True 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-11-15T18:44:55.957

显然这就是芹菜的行为方式。当工人被突然杀死（但调度过程不是）时，即使您有 acks_late=True，该消息也会被视为“失败”

动机（据我所知）是，如果消费者由于内存不足而被操作系统杀死，那么重新交付相同的任务是没有意义的。

您可能会在这里看到确切的问题：[https ://github.com/celery/celery/issues/1628](https://github.com/celery/celery/issues/1628)

我实际上不同意这种行为。IMO 不承认会更有意义。

# c# - 如何保护 dll 方法

> ID：14404532
> 
> 赞同：2
> 
> 时间：2013-01-18T17:40:50.473
> 
> 标签：c#, visual-studio-2010, security, assemblies

我有一个用于加密和解密数据库密码的课程。我在配置中有一个密钥，在我的代码中有一个盐。

如果有人可以访问 dll 和数据库，那么他可以通过将 dll 导入他的应用程序来解密我的数据。

有什么东西可以保护dll之外的调用方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:45:14.587

理想情况下，您不应该在代码中存储密码，因为反编译相当容易。

最好的选择是将此信息存储在安全位置，理想情况下仅存储信息的哈希值。

话虽如此，您可以采取多种选择来帮助保护自己。

一种选择是混淆，但这仍然只会使发现您的信息变得更加困难，但并非不可能。一些混淆器比其他混淆器更好，并且会“破坏”大多数反编译工具。话虽如此，只要电脑能搞定，有才华的人也能搞定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T17:45:43.377

我衷心推荐使用 DPAPI 来加密您的应用程序或 web.config。这将有助于确保解密该配置的唯一方法是在您的环境中这样做，简单的文件访问是不够的。

[http://msdn.microsoft.com/en-us/library/ms995355.aspx](http://msdn.microsoft.com/en-us/library/ms995355.aspx)

# java - 区分多个表模型侦听器

> ID：14404535
> 
> 赞同：0
> 
> 时间：2013-01-18T17:41:10.297
> 
> 标签：java, swing

我有 3 个表具有所有相同的列标识符。我的控制器正在听他们所有的三个模型。除了更改表布局（例如，在其中一个列名中添加表名前缀）之外，是否有更优雅的方法来识别哪个模型触发了事件？

这是我当前的工作实现：

```
/**
 * Enter here with every edit of the 3 tables
 */
public static class TableListener implements TableModelListener {

    @Override
    public void tableChanged(TableModelEvent e) { 
        int row;
        int column;

        if (e.getSource() instanceof TableModel) { 
                TableModel model = (TableModel) e.getSource(); // Cast to known model
                row = e.getFirstRow();
                column = e.getColumn();

                String columnName = model.getColumnName(column);
                Object data = model.getValueAt(row, column);
        }

    }
} 
```

# java - 应用程序死机时在不使用其他库的情况下记录 Java Windows 服务的想法

> ID：14404538
> 
> 赞同：0
> 
> 时间：2013-01-18T17:41:21.083
> 
> 标签：java, windows, windows-services, error-logging

我无法想象我会有很多运气，但我还是会问。

我有一个使用 Apache Daemon 移植到 Windows 服务的应用程序。它从读取几个初始化文件开始，但如果出现任何问题就会终止。由于限制，我无法引入新软件，因此无法通过 Java JNA 等第三方库登录到 Windows Logger。（Windows Logger 会很不错。）

除了写信给我们的文本记录器之外，有没有人知道 Windows 服务通常如何报告异常终止。

Linux 开发人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:23:09.203

Windows 服务会将错误、警告和其他信息记录到[Windows 事件日志](http://en.wikipedia.org/wiki/Event_Viewer)中，通常位于“Windows 日志 > 应用程序”部分。检查那里以查看 Apache Daemon 是否为您留下了任何有用的详细信息。

# jquery - 切换任何按钮后检查多个按钮的切换状态

> ID：14404539
> 
> 赞同：1
> 
> 时间：2013-01-18T17:41:20.707
> 
> 标签：jquery, button, twitter-bootstrap, toggle

我正在使用引导程序和 jQuery 来控制一组切换按钮，以及按下这些按钮后的影响。HTML 按钮切换由 data-toggle="button" 控制：

```
<div class="btn-group" data-toggle="buttons-radio" style="margin-left:5px">
    <button id="fullWidth" class="btn btn-toggle" data-toggle="button">full</button>
    <button id="halfWidth" class="btn btn-toggle" data-toggle="button">half</button>
</div>
<button id="flight" class="btn btn-toggle" data-toggle="button">Flight</button>
<button id="derived" class="btn btn-toggle" data-toggle="button">Derived</button> 
```

我的 js 段（位于网页正文底部的 mo.）如下：

```
 $('.btn-toggle').click(function() {
        if (($('#derived').hasClass('active')) && ($("#flight").hasClass('active'))){
            DO SOME STUFF
        }
        else if ($("#derived").hasClass('active')){
            DO SOME STUFF               
            if ($("#halfWidth").hasClass('active')){
            DO SOME STUFF               
            }
            else {
            DO SOME STUFF               
            }
        }
        else if ($("#flight").hasClass('active')){
            DO SOME STUFF               
            if ($("#halfWidth").hasClass('active')){
            DO SOME STUFF
            }
            else {
            DO SOME STUFF
            }
        }
        else {
        DO SOME STUFF
        }
    }); 
```

我的问题是，JS在切换更改*之前检查切换按钮的状态。*我希望能够先选择要更改的选项，然后让 js 运行它之后的检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:19:31.027

引导切换按钮只是一个常规按钮，单击时会更改其 CSS 类。不幸的是，您的“onclick”回调在调用引导程序以更改类之前运行。您可以制作自己的引导程序“custom-toggle-btn”扩展常规“btn”，然后手动切换“活动”类作为 onclick 函数的第一行。像这样的东西：

```
$('.custom-btn-toggle').click(function() {

    $(this).toggleClass('active'); // Add this line – note the change in class-name above

    if (($('#derived').hasClass('active')) && ($("#flight").hasClass('active'))){
        DO SOME STUFF
    }
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T18:42:59.710

您可以使用自定义`active`类而不是定义自定义按钮。您必须同时使用 jQuery [click](http://api.jquery.com/click/)和[toggleClass](http://api.jquery.com/toggleclass/)函数。首先，添加一个单独的类（例如，`checked`），然后在`click`回调中放入以下内容：

```
callback = function() {
  $(.btn-toggle).toggleClass('checked');
  $(.btn-toggle).hasClass('checked');
  // do your checks and other stuff
}

$(.btn-toggle).click(callback); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T18:15:51.180

您可以尝试使用 jQuery 的 .toggle() 函数而不是 .click() 函数。

你可以在[The jQuery API](http://api.jquery.com/toggle/)中搜索，看看你需要什么！

# php - Joomla 表单方法帖子去掉了变音符号

> ID：14404542
> 
> 赞同：0
> 
> 时间：2013-01-18T17:41:25.680
> 
> 标签：php, joomla, joomla2.5

我有一个带有表单的 Joomla 模块：

```
<form id="ContactForm"  action="<?php echo JRoute::_('index.php?option=com_k2&view=search&layout=search&Itemid=1303');?>" method="post">
<table>
<tr>
<td>
Vyhledat: <input type="text" name="searchKey" value="" style="width: 400px;"/>
</td>
<td>
<input type="submit" value="Vyhledat" /><br />

</td>
</tr>
</table>

</form> 
```

我使用 POST 方法将数据发送到目的地。我“抓住”他们：

```
 $foo = JRequest::getString('searchKey'); 
```

当我搜索没有变音符号的单词（亚当，安迪，任何东西）时，它工作得很好。然而，它是一个捷克网站，它使用变音符号，所以当我尝试搜索 Jiří 时，字母 ř 和 í 被去掉，它只使用 JI。

我的问题是：它为什么这样做以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:02:41.317

Joomla 获取字符串方法将删除特殊字符

阅读这份 Joomla 官方文档

[http://docs.joomla.org/Retrieving_and_Filtering_GET_and_POST_requests_with_JRequest::getVar](http://docs.joomla.org/Retrieving_and_Filtering_GET_and_POST_requests_with_JRequest::getVar)

使用 JREQUEST_ALLOWRAW 将解决您的问题

# autohotkey - 如何在不同的 if 语句中使用相同的热键

> ID：14404546
> 
> 赞同：1
> 
> 时间：2013-01-18T17:41:55.827
> 
> 标签：autohotkey

我的代码在下面。每当我尝试运行它时，我都会收到一条错误消息，说我正在使用重复的热键，而实际上它们永远不会相互干扰。我该如何解决这个问题？

“您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。”。所以我想需要解释我的代码。这非常简单，我有一个通过按箭头键更改的状态变量，然后我有 if 语句来检查状态是什么。如果我在 state = "up" 时按 numpad1，则脚本应键入 "A"，如果 state = "right"，它将打印 I。但是我收到错误，因为我在不同的 if 语句中多次使用了相同的热键.

```
state := "none"
UP::
state := "up"
Right::
state := "right"
DOWN::
state := "down"
LEFT::
state := "left"

if (state = "up"){
Numpad1::
Send A
Return
Numpad2::
Send B
Return
Numpad3::
Send C
Return
Numpad4::
Send D
Return
Numpad6::
Send E
Return
Numpad7::
Send F
Return
Numpad8::
Send G
Return
Numpad9::
Send H
Return
}

if (sate = "right"){
Numpad1::
Send I
Return
Numpad2::
Send J
Return
Numpad3::
Send K
Return
Numpad4::
Send L
Return
Numpad6::
Send M
Return
Numpad7::
Send N
Return
Numpad8::
Send O
Return
Numpad9::
Send P
Return
}

if (state = "down"){
Numpad1::
Send Q
Return
Numpad2::
Send R
Return
Numpad3::
Send S
Return
Numpad4::
Send T
Return
Numpad6::
Send U
Return
Numpad7::
Send V
Return
Numpad8::
Send W
Return
Numpad9::
Send X
Return
}

if (state = "left"){
Numpad1::
Send Y
Return
Numpad2::
Send Z
Return
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:56:34.153

当您使用 AHK_L 时，您可以将 #IF 与同一个热键的多个定义一起使用。警告这不适用于常规 AHK 版本。

这是一个例子。您可以通过键入 none\ right\ 或 left\ 来设置变量。根据变量设置，您的 Tab 键将发送 NORMAL、LEFT 或 RIGHT。

```
#SingleInstance Force

Tab::Send, NORMAL

#if (state = "left")
    Tab::Send, LEFT
#if ; End #if (state = "left")

#if (state = "right")
    Tab::Send, RIGHT
#if ; End #if (state = "right")

:*:right\::
    state := "right"
Return

:*:left\::
    state := "left"
Return

:*:none\::
    state := "none"
Return 
```

或者，使用普通的 AHK，您可以定义 ONE 热键并将 IF 语句放在热键中以根据状态变量更改行为。

# r - 如何使用 str_match(..., regex) 匹配多个捕获组

> ID：14404549
> 
> 赞同：1
> 
> 时间：2013-01-18T17:42:02.357
> 
> 标签：r, regex, string-matching, capture, stringr

我正在使用`str_match`从`stringr`包中捕获括号之间的文本。

```
library(stringr)

strs = c("P5P (abcde) + P5P (fghij)", "Glcext (abcdef)")
str_match(strs, "\\(([a-z]+)\\)") 
```

只给我火柴`"abcde"`和`"abcdef"`. 如何在`"fghij"`仍然对两个字符串使用相同的正则表达式的情况下捕获它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:45:17.687

```
str_extract_all(strs, "\\(([a-z]+)\\)") 
```

或者正如@JoshO'Brien 在他的评论中提到的，

```
str_match_all(strs, "\\(([a-z]+)\\)") 
```

这可以通过基础 R 轻松完成：

```
regmatches(strs, gregexpr("\\(([a-z]+)\\)", strs)) 
```

# sqlite - 为什么 SQLite JOIN 不起作用？

> ID：14404552
> 
> 赞同：1
> 
> 时间：2013-01-18T17:42:17.443
> 
> 标签：sqlite, cordova, web-sql

我对以下功能有疑问。它只是我认为的加入。通过使用 sql 语句“SELECT * FROM pkw”，我得到了结果。两张表都填满了数据。你看到错误了吗？

```
function gotoauftrag(id) {
    db = window.sqlitePlugin.openDatabase(shortName, version, displayName,maxSize);
    var list = '';
    var sql = "SELECT DISTINCT p.name FROM pkw p INNER JOIN ta_pkw tp ON tp.pkw_id = p.pkw_id AND tp.ta_id = ?";
    db.transaction(function (tx) {
                   tx.executeSql(sql, [id], function (tx, results) {
                                 if (results.rows.length > 0) {
                                 document.getElementById('auftrag_pkw').innerHTML = '';
                                 for (i = 0; i < results.rows.length; i++) {
                                    r = results.rows.item(i);
                                    list = '<li>'+r['name']+'<span class="ui-li-count">1</span></li>';
                                 document.getElementById('auftrag_pkw').innerHTML += list;
                                 $('#auftrag_pkw').listview('refresh');
                                 }
                                 }
                                 });
                   });
$('#auftrag_pkw').listview('refresh');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:19:50.797

我不相信你能够绑定到`JOIN`谓词。尝试改用该`WHERE`子句。

```
SELECT DISTINCT 
  p.name 
FROM pkw p 
INNER JOIN ta_pkw tp 
  ON tp.pkw_id = p.pkw_id 
WHERE
  tp.ta_id = ? 
```

此外，您可能应该在`ta_id`加入之前进行选择。上面会做一个自然的连接`pkw_id`，然后它会过滤结果`ta_id`。

# javascript - 从服务器获取数据并显示在编辑表单中

> ID：14404558
> 
> 赞同：0
> 
> 时间：2013-01-18T17:42:53.627
> 
> 标签：javascript, asp.net-mvc, json, jquery-ui, flexigrid

这个问题是以下问题的延续，将[JSON 数据添加到视图](https://stackoverflow.com/questions/14347216/how-to-use-json-data-in-a-view)中，不幸的是尚未解决。

在我的主视图中，它有一个带有 2 个控件和用于 flexigrid 的占位符的表单，我在底部添加了以下内容

```
<div id="add-edit-dialog" style="display: none" title="Add / Edit Client"> 
    @Html.Partial("_ClientForm", Model)
</div> 
```

flexigrid 插件在运行时实例化并添加 3 个按钮：添加、编辑、删除。对于编辑按钮，我需要从服务器获取当前行信息，然后将其显示在表单中。对于添加按钮，我不需要去服务器（我认为）。

这是我当前的编辑按钮代码：

```
function edit(com, grid) {
    $('.trSelected', grid).each(function () {

        var id = $(this).attr('id');
        id = id.substring(id.lastIndexOf('row') + 3);
        currentId = id;
        $('#fntype').val('Edit');
        var ClientName;
        ClientName =$('.trSelected td:eq(2)').text();
        var url = '/Client/Edit/' + id ;

        $.getJSON(url, function (html) {
            // setFormControls(data.Id, data.Role, data.Location, data.JobType,
                // data.Description);
            // alert(data);
            $($dlg).html(html);
        });
        //location.replace(url);
        RunModalDialog("Edit Client: " + ClientName);
    }); 
```

因此，它将编辑控制器操作并返回相同的局部视图 _ClientForm，其中包含作为模型传递的正确信息。如果我查看 FireBug 中返回的响应结果，我可以看到返回的 HTML 是正确的，并且所有文本框的值中都有正确的信息。

但是，打开的对话框看起来与添加按钮的对话框完全相同 - 换句话说，所有表单控件都是空白的。我不知道出了什么问题以及为什么它没有按我想要的方式工作。

这就是我为 RunModalDialog 所拥有的：

```
var validator = $("#add-edit-form").validate();

var $dlg = $("#add-edit-dialog").dialog({
    autoOpen: false,
    show: "blind",
    closeOnEscape: true,
    resizable: true,
    width: 1200,
    height: 750,
    minHeight: 600,
    minWidth: 950,
    buttons: {
        "Save": function () {

            if ($("#add-edit-form").valid()) {
                // jobPost.setVals(txtId.val(), txtRole.val(), 
                    // txtLocation.val(), txtJobType.val(), 
                    // txtDescription.val());

                $.ajax({
                    type: 'POST',
                    //data: JSON.stringify(clientInformation),
                    url: '/Client/Save',
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (result) {
                        // insert new list into grid
                        $('#flexClients').flexAddData(result);
                    }
                });
                $(this).dialog('close');
            } else return false;
        },
        Cancel: function () {
            $(this).dialog("close");
            clearForm();
            if (validator)
                validator.resetForm();
        }
    },
    close: function () {
        clearForm(); 
    },
    open: function () {
        //$("#add-edit-dialog").parent().appendTo($("#add-edit-form"));
    }
});

function RunModalDialog(title, url) {    
    if (title) {
        $dlg.dialog("option", {"title": title });
    }
    if (url) {        
        $dlg.load(url).dialog("option", { "title": title }).dialog("open");

        //$dlg.load(url, function () {
        //    var validator = $("#sform").validate();
        //    if (validator)
        //         validator.resetForm();
        //    $dlg.dialog("option", { "title": title }).dialog("open");
        //});
    } else {
        $dlg.dialog("open");
    }
} 
```

带有负载的代码（和注释代码）是解决此问题的另一种尝试。那种工作（与信息一起显示的表单），但主客户端视图也被重新加载，所以我看到了双网格。

你知道我应该在我的代码中改变什么来让这个东西工作吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:15:56.747

我发布了一篇博客文章，其中包含到目前为止的内容 - 希望它可能会有所帮助

[http://blogs.lessthandot.com/index.php/WebDev/UIDevelopment/AJAX/asp-net-mvc-project-with](http://blogs.lessthandot.com/index.php/WebDev/UIDevelopment/AJAX/asp-net-mvc-project-with)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:51:55.320

在 MS 的 Jazzen Chen 的帮助下，我们解决了这个问题。为了正确显示数据，我需要做的就是将 getJSON 更改为仅获取 jquery 函数。现在我的表单带有正确填充的数据，下一个挑战将是保存数据。

# c - 寻找线程同步性能问题的解释

> ID：14404559
> 
> 赞同：10
> 
> 时间：2013-01-18T17:42:54.187
> 
> 标签：c, multithreading, performance, synchronization, windows-server-2008

当使用内核对象来同步运行在不同 CPU 上的线程时，使用 Windows Server 2008 R2 相对于其他操作系统是否可能会产生一些额外的运行时成本？

*编辑：*正如通过答案发现的那样，问题还应包括“以较低的 CPU 利用率水平运行时”这一短语。我在自己对这个问题的回答中包含了更多信息。

## 背景

我开发的产品使用共享内存和信号量在进程之间进行通信（当两个进程在同一台机器上运行时）。关于 Windows Server 2008 R2（此后我将其缩短为 Win2008R2）性能问题的报告让我发现，与其他操作系统相比，在 Win2008R2 上的两个线程之间共享信号量相对较慢。

## 复制它

我能够通过在两个线程上同时运行以下代码来重现它：

```
for ( i = 0; i < N; i++ )
  {
  WaitForSingleObject( globalSem, INFINITE );
  ReleaseSemaphore( globalSem, 1, NULL );
  } 
```

使用可以双启动到 Windows Server 2003 R2 SP2 和 Windows Server 2008 R2 的机器进行测试，上面的代码片段在 Win2003R2 机器上的运行速度比 Win2008R2 快 7 倍（Win2003R2*为 3 秒，Win2008R2 为 21 秒*）。

## 测试的简单版本

以下是上述测试的完整版：

```
#include <windows.h>
#include <stdio.h>
#include <time.h>

HANDLE gSema4;
int    gIterations = 1000000;

DWORD WINAPI testthread( LPVOID tn )
{
   int count = gIterations;

   while ( count-- )
      {
      WaitForSingleObject( gSema4, INFINITE );
      ReleaseSemaphore( gSema4, 1, NULL );
      }

   return 0;
}

int main( int argc, char* argv[] )
{
   DWORD    threadId;
   clock_t  ct;
   HANDLE   threads[2];

   gSema4 = CreateSemaphore( NULL, 1, 1, NULL );

   ct = clock();
   threads[0] = CreateThread( NULL, 0, testthread, NULL, 0, &threadId );
   threads[1] = CreateThread( NULL, 0, testthread, NULL, 0, &threadId );

   WaitForMultipleObjects( 2, threads, TRUE, INFINITE );

   printf( "Total time = %d\n", clock() - ct );

   CloseHandle( gSema4 );
   return 0;
} 
```

## 更多细节

我更新了测试以强制线程运行一次迭代并在每个循环中强制切换到下一个线程。每个线程都会在每个循环结束时发出下一个要运行的线程的信号（循环方式）。而且我还更新了它以使用自旋锁作为信号量（它是一个内核对象）的替代品。

我测试的所有机器都是 64 位机器。我主要将测试编译为 32 位。如果构建为 64 位，它的整体运行速度会更快一些，并且会改变一些比率，但最终结果是相同的。除了 Win2008R2，我还运行了 Windows 7 Enterprise SP 1、Windows Server 2003 R2 Standard SP 2、Windows Server 2008（不是 R2）和 Windows Server 2012 Standard。

*   在单个 CPU 上运行测试明显更快（通过使用[SetThreadAffinityMask设置线程关联并使用](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686247%28v=vs.85%29.aspx)[GetCurrentProcessorNumber](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683181%28v=vs.85%29.aspx)检查“强制” ）。毫不奇怪，在使用单 CPU 时，在所有操作系统上都更快，但在 Win2008R2 上，内核对象同步的多 CPU 和单 CPU 之间的比率要高得多。除 Win2008R2 之外的所有机器的典型比率为 2 到 4 倍（在多个 CPU 上运行需要 2 到 4 倍的时间）。但是在 Win2008R2 上，这个比率是 9 倍。
*   但是......我无法重现所有 Win2008R2 机器上的减速。我在 4 上进行了测试，它出现在其中的 3 上。所以我不禁想知道是否有某种配置设置或性能调整选项可能会影响这一点。我已经阅读了性能调优指南，查看了各种设置，并更改了各种设置（例如，后台服务与前台应用程序），但行为没有任何区别。
*   它似乎不一定与物理内核之间的切换有关。我最初怀疑它与重复访问不同内核上的全局数据的成本有关。但是当运行一个使用简单自旋锁进行同步的测试版本（不是内核对象）时，在不同的 CPU 上运行各个线程在所有操作系统类型上都相当快。多 CPU 信号量同步测试与多 CPU 自旋锁测试的比率通常为 10 倍到 15 倍。但是对于 Win2008R2 标准版机器，这个比例是 30 倍。

以下是更新测试中的一些实际数字（时间以毫秒为单位）：

```
+----------------+-----------+---------------+----------------+
|       OS       | 2 cpu sem |   1 cpu sem   | 2 cpu spinlock |
+----------------+-----------+---------------+----------------+
| Windows 7      | 7115 ms   | 1960 ms (3.6) | 504 ms (14.1)  |
| Server 2008 R2 | 20640 ms  | 2263 ms (9.1) | 866 ms (23.8)  |
| Server 2003    | 3570 ms   | 1766 ms (2.0) | 452 ms (7.9)   |
+----------------+-----------+---------------+----------------+ 
```

测试中的 2 个线程中的每一个都运行了 100 万次迭代。这些睾丸都在相同的机器上运行。Win Server 2008 和 Server 2003 编号来自双引导计算机。Win 7 机器具有完全相同的规格，但是不同的物理机器。本案例中的机器是一台配备酷睿 i5-2520M 2.5GHz 的联想 T420 笔记本电脑。显然不是服务器类机器，但我在真正的服务器类硬件上得到了类似的结果。括号中的数字是第一列与给定列的比率。

关于为什么这个操作系统似乎会为跨 CPU 的内核级同步引入额外费用的任何解释？或者您是否知道一些可能会影响此的配置/调整参数？

虽然这会使这篇非常冗长且冗长的帖子变得更长，但如果有人想要，我可以发布上述数字来自的测试代码的增强版本。这将显示循环逻辑和测试的自旋锁版本的执行。

## 扩展背景

试图回答一些关于为什么以这种方式完成的不可避免的问题。我也一样……当我读到一个帖子时，我常常想知道我为什么还要问。所以这里有一些尝试澄清：

*   应用程序是什么？它是一个数据库服务器。在某些情况下，客户在与服务器相同的机器上运行客户端应用程序。在这种情况下，使用共享内存进行通信（与套接字相比）更快。这个问题与共享内存通信有关。
*   工作量真的那么依赖于事件吗？嗯......共享内存通信是使用命名信号量实现的。客户端发出信号量，服务器读取数据，服务器在响应准备好时向客户端发出信号量。在其他平台上，它的速度非常快。在 Win2008R2 上，它不是。它也非常依赖于客户的应用程序。如果他们用大量对服务器的小请求编写它，那么两个进程之间就会有很多通信。
*   可以使用轻量级锁吗？可能。我已经在看那个了。但它独立于原始问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T23:46:06.717

从评论中提取答案：

也许服务器没有设置为高性能电源计划？Win2k8 可能有不同的默认值。许多服务器不是默认的，这对性能造成了很大的影响。

OP确认这是根本原因。

这是导致这种行为的一个有趣原因。当我做一些完全不同的事情时，这个想法在我脑海中闪现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:51:10.323

很可能是操作系统安装配置不同。也许慢速系统被配置为不允许同时调度进程中的多个线程。如果其他一些高优先级进程总是（或大部分）准备好运行，唯一的选择是让您的线程按顺序运行，而不是并行运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T00:57:14.470

我在这里添加了这个额外的“答案”信息，而不是把它埋在我过长的 OP 中。@usr 通过电源管理选项建议为我指明了正确的方向。OP 中的人为测试以及原始问题涉及不同线程之间的大量握手。真实世界应用程序中的握手跨越不同的进程，但测试表明，如果是线程或进程进行握手，结果没有差异。在 Windows Server 2008 R2 中，当 CPU使用率**较低（例如，5% 到 10%）**运行时，电源设置似乎极大地影响了 CPU 间信号量（内核同步对象）的共享。我对这一点的理解完全基于测量和计时应用。

[Serverfault 上](https://serverfault.com/questions/94212/does-cpu-power-management-affect-server-performance)的一个相关问题也谈到了这一点。

## 测试设置

**操作系统电源选项设置**Windows Server 2008 R2 的默认电源计划为“平衡”。将其更改为“高性能”选项有助于此测试的性能。特别是，“更改高级电源设置”下的一项指定设置似乎是关键设置。高级设置在处理器电源管理下有一个选项，称为*最低处理器状态*。平衡计划下的默认值似乎是 5%。在我的测试中将其更改为 100% 是关键。

**BIOS 设置**此外，BIOS 设置对本次测试的影响很大。我确信这在硬件上会有很大差异，但我测试的主机有一个名为“CPU 电源管理”的设置。BIOS 设置的描述是*“启用或禁用在没有系统活动时自动停止（原文如此）微处理器时钟的省电功能。”* 我将此选项更改为“已禁用”。

## 实验结果

显示的两个测试用例是：

*   （一个简单的。OP 中包含的修改版本。这个简单的测试在两个 CPU 上的两个线程之间的每次迭代中强制执行循环切换。每个线程运行 100 万次迭代（因此，有 200 万次跨 CPU 的上下文切换）。
*   (b) 现实世界。真实世界的客户端/服务器测试，其中客户端通过共享内存向服务器发出许多“小”请求，并与全局命名信号量同步。

三个测试场景是：

*   (i) 平衡。Windows Server 2008 R2 的默认安装，它使用平衡电源计划。
*   (ii) 高性能。我将电源选项从“平衡”更改为“高性能”。等效地，通过将​​如上所述的“最低处理器状态 CPU”选项设置为 100%（从 5%），会产生相同的结果。
*   (iii) BIOS。如上所述，我禁用了 CPU 电源管理 BIOS 选项，并选择了高性能电源选项。

给出的时间以秒为单位：

```
╔════════════════╦═════════════╦═══════════════╦════════════╗
║                ║ (i)Balanced ║ (ii) HighPerf ║ (iii) BIOS ║
╠════════════════╬═════════════╬═══════════════╬════════════╣
║ (a) Simple     ║ 21.4 s      ║ 9.2 s         ║ 4.0 s      ║
║ (b) Real World ║ 9.3 s       ║ 2.2 s         ║ 1.7 s      ║
╚════════════════╩═════════════╩═══════════════╩════════════╝ 
```

因此，在进行了两项更改（操作系统和 BIOS）之后，实际测试和人为测试的运行速度都比默认安装和默认 BIOS 设置下快了大约*5 倍。*

* * *

在测试这些案例时，我有时会遇到无法解释的结果。当 CPU 很忙时（一些后台进程会启动），测试会运行得更快。我会把它归档在我的脑海里，然后困惑一会儿。但现在它是有道理的。当另一个进程运行时，它会将 CPU 使用率提高到使其保持在高功率状态所需的任何阈值，并且上下文切换会很快。我仍然不知道哪个方面慢（主要成本隐藏在 WaitForSingleObject 调用中），但最终结果现在都有意义。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-20T01:38:03.793

这不是一个合理的基准，您的信号量总是在同一个进程中被 frobbed（因此大概在同一个 CPU/内核上）。在实际情况下，锁定成本的一个重要部分是当不同的 CPU/内核争夺对内存区域的独占访问（在缓存之间来回反弹）时所涉及的内存访问。寻找更多真实世界的基准（对不起，不是我的领域），o（甚至更好）使用（人为但现实的）测试数据测量（一些缩减版本）您的应用程序。

[基准测试的测试数据*永远不*应该是测试或回归测试的数据：后来在（可能很少使用的）极端情况下，您需要“典型”运行进行基准测试。]

# google-maps-api-3 - onClick 和自定义图标的融合表问题

> ID：14404562
> 
> 赞同：0
> 
> 时间：2013-01-18T17:43:03.080
> 
> 标签：google-maps-api-3, google-fusion-tables

我试图通过使用复选框来单击和关闭图层，但由于某种原因，我遗漏了一些东西，无法让它再次单击和关闭。我还想为每一层添加自定义标记，但根本没有成功。

这是我正在使用的代码。我很感激这方面的任何帮助，我对使用这段代码很陌生。

```
var map;
    var layerl0;
    var layerl1;
    function initialize() {
      map = new google.maps.Map(document.getElementById('map-canvas'), {
        center: new google.maps.LatLng(62.683556,-152.314453),
        zoom: 4,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      });
      layerl0 = new google.maps.FusionTablesLayer({
        query: {
          select: "'col0'",
          from: '1suBUHqahw5W9f6A6kEVhh-NWmqSbukYqdtnJLWs'
        },
        map: map,
        styleId: 2,
        templateId: 3
      });
      layerl1 = new google.maps.FusionTablesLayer({
        query: {
              select: "'col0'",
          from: '1ra3TP6cbWmdAOayLgzCugLrhdmDAO6UJIFuty9E'
        },
        map: map,
         styleId: 2,
         templateId: 3
      });
    }
    function changeMapl0() {
       var searchString = document.getElementById('search-string-l0').value.replace(/'/g, "\\'");
       layerl0.setOptions({
          query: {
           select: "'col0'",
           from: '1suBUHqahw5W9f6A6kEVhh-NWmqSbukYqdtnJLWs',
           where: "'category' = '" + searchString + "'"
        }
      });
    }
    function changeMapl1() {
       var searchString = document.getElementById('search-string-l1').value.replace(/'/g, "\\'");
       layerl1.setOptions({
         query: {
          select: "'col0'",
           from: '1ra3TP6cbWmdAOayLgzCugLrhdmDAO6UJIFuty9E',
           where: "'category' = '" + searchString + "'"
        }
      });
   }
    google.maps.event.addDomListener(window, 'load', initialize);
  </script>
  </head>
  <body>
    <div id="map-canvas"></div>
    <div style="margin-top: 10px;">
      <form>
     <input type="checkbox" value="CRCD" checked="checked" id="search-string-l0" onClick="changeMapl0(this.value);">CRCD Learning Centers
       <input type="checkbox" value="Research" checked="checked" id="search-string-l1" onClick="changeMapl1(this.value);">Off-site Research
       </form>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:25:46.553

您的问题是您的 changeMap 函数实际上并没有根据复选框的值做任何事情：

```
function changeMapl0() {
   var searchString = document.getElementById('search-string-l0').value.replace(/'/g, "\\'");
   layerl0.setOptions({
      query: {
       select: "'col0'",
       from: '1suBUHqahw5W9f6A6kEVhh-NWmqSbukYqdtnJLWs',
       where: "'category' = '" + searchString + "'"
    }
  });
} 
```

试试这个：

```
 function changeMapl0() {
       if (document.getElementById('search-string-l0').checked )
       { layerl0.setMap(map); }
       else
       { layerl0.setMap(null); }
    } 
```

[工作示例](http://www.geocodezip.com/v3_simpleMap_FusionTables_2layers_select.html)

# excel - 无法取消保护 Workbook_BeforeSave 中的 Excel 工作表

> ID：14404567
> 
> 赞同：0
> 
> 时间：2013-01-18T17:43:46.073
> 
> 标签：excel, vba

我正在使用 Workbook_BeforeSave 更新 excel 2010 中锁定工作表上的一些单元格。使用 ctrl-s 保存时，子例程按需要工作，但在 vba 中使用 .Save 时不会解锁工作表。

本工作簿（代码）

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
    Dim MyPassword As String
    MyPassword = "password"

    ActiveWorkbook.Worksheets("Sheet1").Unprotect (MyPassword)

    ActiveWorkbook.Worksheets("Sheet1").Range("A1").Value = Now
    ActiveWorkbook.Worksheets("Sheet1").Range("A2").Value = ThisWorkbook.BuiltinDocumentProperties("Author")

    ActiveWorkbook.Worksheets("Sheet1").Protect (MyPassword)
End Sub 
```

模块1（代码）

```
Sub SaveMe()
    ActiveWorkbook.Save
End Sub 
```

我有一个调用 SaveMe() 的按钮。SaveMe() 保存文档，激活 Workbook_BeforeSave。Worsheet 未能取消保护，导致写入 A1 时出错。

错误指出：

```
Run-time error '1004':
Application-defined or object-defined error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:16:18.563

这对我有用，但它不是很优雅。我没有找到用于解除保护和写入工作的单独模块。

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
    UnlockWorksheets
    With ThisWorkbook.Worksheets("Sheet1")
        .Range("A1").Value = Now
        .Range("A2").Value = ThisWorkbook.BuiltinDocumentProperties("Author")
    End With
    LockWorksheets
End Sub

Sub SaveMe()
    UnlockWorksheets
    ThisWorkbook.Save
    LockWorksheets
End Sub

Sub UnlockWorksheets()
    ThisWorkbook.Worksheets("Sheet1").Unprotect Password:="password"
End Sub

Sub LockWorksheets()
    ThisWorkbook.Worksheets("Sheet1").Protect Password:="password"
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:36:48.763

为什么不将“保存前”模块放入一个新的子例程并在关闭前调用

例如。

```
 Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
 Call SomeSub
End Sub

sub someSub()
'Code here
end sub

sub Button()
call SomeCub
activeworkbook.save
end sub 
```

# c++ - 使用正则表达式提取引用和未引用的值

> ID：14404569
> 
> 赞同：0
> 
> 时间：2013-01-18T17:43:57.357
> 
> 标签：c++, regex, boost-regex, non-greedy

我正在尝试`<tag>=<value>`使用正则表达式解析一个类型的字符串，但是遇到了一些添加对引用值的支持的问题。这个想法是任何未引用的值都应该被修剪掉前导/尾随空格，这样`[ Hello ]`就变成`[Hello]`了（请忽略方括号。）

但是，当引用该值时，我希望删除包括双引号在内的任何内容，但不再赘述，因此`[ " Hello World " ]`将变为`[" Hello World "]`

到目前为止，我已经提出了以下带有模式匹配的代码（请注意，某些字符已被转义或双重转义，以避免将它们解释为三字符图或其他 C 格式字符。）

```
void getTagVal( const std::string& tagVal )
{
    boost::smatch what;
    static const boost::regex pp("^\\s*([a-zA-Z0-9_-]+)\\s*=\\s*\"\?\?([%:\\a-zA-Z0-9 /\\._]+?)\"\?\?\\s*$");

    if ( boost::regex_match( tagVal, what, pp ) )
    {
        const string tag = static_cast<const string&>( what[1] );
        const string val = static_cast<const string&>( what[2] );

        cout << "Tag = [" << tag << "] Val = [" << val << "]" << endl;
    }
}

int main( int argc, char* argv[] )
{
    getTagVal("Qs1= \" Hello World \" ");
    getTagVal("Qs2=\" Hello World \" ");
    getTagVal("Qs3= \" Hello World \"");
    getTagVal("Qs4=\" Hello World \"");
    getTagVal("Qs5=\"Hello World \"");
    getTagVal("Qs6=\" Hello World\"");
    getTagVal("Qs7=\"Hello World\"");

    return 0;
} 
```

取出双重转义，这分解为：

*   `^`- 线的开始。
*   `\s*`- 可选数量的空白。
*   `([a-zA-Z0-9_-]+)`- 一个或多个字母数字或破折号或下划线。这被捕获为标签。
*   `\s*`- 可选数量的空白。
*   `=`- 一个“相等”的符号。
*   `\s*`- 可选数量的空白。
*   `"??`- 一个可选的双引号（非贪婪）。
*   `([%:\a-zA-Z0-9 /\._]+?)`- 一个或多个字母数字或空格、下划线、百分比、冒号、句点、正斜杠或反斜杠。这被捕获为值（非贪婪）。
*   `"??`- 一个可选的双引号（非贪婪）。
*   `\s*`- 可选数量的空白。
*   `$`- 行结束

对于中的示例调用`main()`，我希望得到：

```
Tag = [Qs1] Val = [ Hello World ]
Tag = [Qs2] Val = [ Hello World ]
Tag = [Qs3] Val = [ Hello World ]
Tag = [Qs4] Val = [ Hello World ]
Tag = [Qs5] Val = [Hello World ]
Tag = [Qs6] Val = [ Hello World]
Tag = [Qs7] Val = [Hello World] 
```

但我实际得到的是：

```
Tag = [Qs1] Val = [" Hello World ]
Tag = [Qs2] Val = [" Hello World ]
Tag = [Qs3] Val = [" Hello World ]
Tag = [Qs4] Val = [" Hello World ]
Tag = [Qs5] Val = ["Hello World ]
Tag = [Qs6] Val = [" Hello World]
Tag = [Qs7] Val = ["Hello World] 
```

所以它几乎是正确的，但由于某种原因，第一个引号在输出值中徘徊，即使我特别将正则表达式的值部分与它外面的引号括起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:53:52.593

我将从第一个引用开始的部分更改为替代：

```
"([^"]+)"|([%:\a-zA-Z0-9 /\._]+)\s* 
```

然后，您将不得不处理引用或未引用文本的两种可能性，这些文本最终出现在正则表达式周围的主机代码中的第二个或第三个捕获括号对中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:16:02.313

弄清楚问题出在哪里。

使用`\`时必须小心，因为这是在 C 字符串中处理的，因此需要在那里转义，但它也会由正则表达式引擎处理，所以如果你不小心`\\a`，`\a`这绝对不是你想要的。

所以，要告诉它我希望 a`\`出现在我的值中的字符集中（讽刺的是，它们被用作格式字符串中的转义序列），那么你必须对它们进行双重转义

```
static const boost::regex pp("^\\s*([a-zA-Z0-9_-]+)\\s*=\\s*\"\?\?([%:\\a-zA-Z0-9 /\\._]+?)\"\?\?\\s*$"); 
```

变成：

```
static const boost::regex pp("^\\s*([a-zA-Z0-9_-]+)\\s*=\\s*\"\?\?([%:\\\\a-zA-Z0-9 /._]+?)\"\?\?\\s*$"); 
```

（即你需要做到`\\\\`）

# php - 如何获得确切的列数，循环语句

> ID：14404570
> 
> 赞同：2
> 
> 时间：2013-01-18T17:44:00.530
> 
> 标签：php, loops, while-loop, html-table

我正在制作一个显示有 12 列的表格的循环。它以数字 1912 开始，以 2013 结束。问题是，当它循环到 1920 时，它没有余数并开始新的一行。我需要获取代码以在第 12 列之后创建新行。

这是我得到的结果：

![http://imgur.com/AOIQf](../Images/fc6e990be237f1120576db849b916d7c.png)

这是我到目前为止所拥有的：

```
<?php
    $columns = 12;
    $Year = 1912;

    echo "<table width="755" border="1">";
    echo "<tr>";
    while ($Year <= 2013) {
        if (!($Year % $columns)) {
            echo "</tr><tr>";
        }
        echo "<td>$Year</td>";
        ++$Year;
    }
    echo "</tr>";
    echo "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:48:00.247

```
<?php

$columns = 12;
$Year = 1912;
$i=1;
echo "<table width=\"755\" border=\"1\">";
echo "<tr>";
while ($Year <= 2013) 
    {
    if ($i==13)
        {
            echo "</tr><tr>";   
            $i=1;
        }
    echo "<td>$Year</td>";
    $Year++;
    $i++;
    }
echo "</tr>";
echo "</table>";

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:59:58.940

## 解决方案 1

您需要为匹配的年份附加和前置列，如下所示：

![在此处输入图像描述](../Images/ad435577e09a46a20f1cb6ef4075a152.png)

这是这样做的代码：

```
<?php
    $columns = 12;
    $startingYear = 1912;
    $endingYear = 2013;

    $realStartingYear = $startingYear;
    $realEndingYear = $endingYear;

    //Find the real starting year by going back a year until we hit the right one
    while ($realStartingYear % $columns) {
        $realStartingYear--;
    }

    //Find the real ending year by going forward a year until we hit the right one
    while ($realEndingYear % $columns) {
        $realEndingYear++;
    }

    echo '<table width="755" border="1">';
    echo "<tr>";
    for ($year = $realStartingYear; $year < $realEndingYear; $year++) {
        if (!($year % $columns)) {
            echo "</tr><tr>";
        }
        echo "<td>" . ($year >= $startingYear && $year <= $endingYear ? $year : "") . "</td>";
    }
    echo "</tr>";
    echo "</table>";
?> 
```

如果您还想显示其他列，只需更改

```
echo "<td>" . ($year >= $startingYear && $year <= $endingYear ? $year : "") . "</td>"; 
```

至

```
echo "<td>" . $year . "</td>"; 
```

* * *

## 解决方案 2

您想以 1912 开始表格，如下所示：

![在此处输入图像描述](../Images/b859dc1afede594c3f1719fded36e16a.png)

代码会简单很多：

```
<?php
    $columns = 12;
    $startingYear = 1912;
    $endingYear = 2013;

    echo '<table width="755" border="1">';
    for ($i = $startingYear; $i <= $endingYear; $i += $columns) {
        echo "<tr>";
        for ($j = 0; $j < $columns; $j++) {
            echo "<td>" . ($i + $j) . "</td>";
        }
        echo "</tr>";
    }
    echo "</tr>";
    echo "</table>";
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:50:11.073

您想每 12 列换行一次，只需跟踪当前列并使用它来确定何时应该结束该行（例如，每 12 列）-

```
$col = 1;

while ($Year <= 2013 && $col++) {
        if (!($col % $columns)) {
            //... 
```

用于`$Year`确定何时包装只会使事情复杂化。

# c# - 通过 C# (Kinect SDK) 的手势控制 Javascript InfoVis Toolkit

> ID：14404573
> 
> 赞同：0
> 
> 时间：2013-01-18T17:44:03.440
> 
> 标签：c#, javascript, kinect, kinect-sdk, infovis

我一直在网上寻找解决这个问题的方法，但现在我很沮丧地找到了能满足我所有要求的东西。所以这里。

我正在尝试构建一个桌面应用程序，该应用程序使用 Kinect for Windows 传感器来控制数字图书馆的可视化（例如，您去书籍的地方）资产。我非常精通使用官方的 MS Kinect SDK，并且手头已经有一个用于原型设计的简洁实用框架，所以我显然很想使用它。这加上桌面应用程序主题表明整个shebang都需要使用C#，这对我来说很好。

另一方面，可视化部分已经存在并且看起来很漂亮，但它是 JavaScript（特别是 JIT，即 javascript infovis 工具包）。它有我需要的所有花里胡哨的东西，而且它的动画效果很好。另外，我是 JavaScript 的菜鸟。

关键是，我如何避免将其中一种语言重写为另一种语言，同时仍然允许它们在运行时交谈？

那么，您知道任何一种方法吗
A）在 Windows 应用程序中嵌入 JIT 可视化（例如径向树可视化），使我能够在运行时从 C# 类操作图形（例如选择要动画的新节点成为焦点）还是
B）向 JS 发送 C# 事件以在运行时对手势输入做出反应？这是 ASP.NET 可以做到的吗？

我有一种感觉，结果将是桌面和网络技术的奇怪组合，但任何指向正确技术的指针都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:02:07.650

也许你应该看看这个关于使用 Kinect 和 JavaScript 的项目：

[http://research.microsoft.com/en-us/projects/kinectedbrowser/](http://research.microsoft.com/en-us/projects/kinectedbrowser/)

[http://kinesis.io/](http://kinesis.io/)

# hibernate - 如何使用 Hibernate 4.1.9.Final 获取两个字段的唯一键？

> ID：14404575
> 
> 赞同：0
> 
> 时间：2013-01-18T17:44:07.337
> 
> 标签：hibernate, unique-key, hibernate-4.x

我有 2 个课程，StockNDate 和 Datapoint。StockNDate 是我放入 DataPoint 的嵌入式实体。我想将其设置为只有一个数据点和一个 StockNDate。我尝试使用 @Column 注释，但这似乎没有任何作用。[我的问题与如何使用 Hibernate 获取两个字段的唯一键](https://stackoverflow.com/questions/946512/how-to-get-a-unique-key-for-two-fields-with-hibernate)非常相似？，但看起来它是为 Hibernate 的早期版本制作的，因为当我尝试实现它时，会出现编译时错误。我正在使用 Hibernate 4.1.9.Final。

```
@Embeddable
public class StockNDate implements Serializable{
    @ManyToOne
    private Stock mParentStock;

    @Type(type="org.jadira.usertype.dateandtime.joda.PersistentLocalDate")
    private LocalDate mDate;
    //snip...
}

public class DataPoint implements Serializable{

    @Embedded
    @Cascade(CascadeType.ALL)
    @Column(unique = true) // THIS DOESN'T DO ANYTHING
    private StockNDate mFingerPrint = new StockNDate();
    //snip...
} 
```

# ios - 我的 ios 应用程序的大小限制，尤其是核心数据

> ID：14404580
> 
> 赞同：2
> 
> 时间：2013-01-18T17:44:37.887
> 
> 标签：ios, core-data, size, limit

我开发了一个应用程序。这是一个内部应用程序。我想知道我的应用程序可以在 iOS 设备上占用的大小是否有任何限制。我的应用程序连接到 Web 服务并从 SQL 服务器下载数据。可能有 1000 行。我的应用程序可以在 iOS 设备上存储多少数据？有人可以简单地解释一下。我读了它的2GB。但我认为这是您安装应用程序时的大小。对吗？在组织者的档案部分，我的应用程序现在显示 1MB。那么 2gb 的限制是正确的吗？50mb 是 OTA 下载的大小。我想知道我的应用程序可以在 iOS 设备上占用多少空间。我的应用程序可以占用多少核心数据空间？更多问题即将到来。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:50:12.897

据我所知，您可以在设备上保存尽可能多的数据，直到内存不足。核心数据存储（例如 sqlite 文件）只存在于设备文档目录中的一个文件中。一旦设备上没有更多空间，并且没有要清除的缓存，我认为它会抛出“没有可用空间”等错误。

编写一个快速的小应用程序，从捆绑包中加载大图像并将其保存到具有不同文件名（时间戳？）的文档文件夹中，循环它直到设备崩溃，您可能会看到它让您拥有多少内存:)

（在实际设备上进行，而不是在模拟器上）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:00:07.537

2GB 是允许您上传到 iTunes 的应用程序的最大大小，我认为这与您的应用程序最终在设备上的大小无关。

# node.js - 意外的响应代码：502 nginx

> ID：14404581
> 
> 赞同：0
> 
> 时间：2013-01-18T17:44:38.873
> 
> 标签：node.js, websocket

我有以下设置：

作为代理运行的 nginx 服务器：

```
server {
    server_name  domain.tld;
    location / {
            # For Read Requests
            proxy_pass http://XXX.XXX.XXX.XXX;
            proxy_set_header        Host            $host;
            proxy_set_header        X-Real-IP       $remote_addr;
            proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    location ~* "(/config.json|/nowjs/now.js|socket.io|/stat/1.gif)" {
            proxy_pass http://127.0.0.1:9080;
            proxy_set_header        Host            $host;
            proxy_set_header        X-Real-IP       $remote_addr;
            proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
    }
} 
```

其中 XXX.XXX.XXX.XXX 是我的静态内容页面和资产的 IP 域。

我有一个简单的聊天应用程序运行在与端口 9080 上的 nginx 相同的服务器上

在我的 index.html 页面中，我有以下代码：

```
 <div id="chat">
    <div id="messages"></div>
    <input type="text" id="text-input" />
    <input type="button" value="Send" id="send-button" />
  </div>

  <script type="text/javascript" src="http://domain.tld/nowjs/now.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){
        now.receiveMessage = function(name, message){
        $("#messages").append('<br />' + '<a href="${path}">' + name + '</a>' + ': ' + message);
        }
        $("#send-button").click(function(){
        now.distributeMessage($("#text-input").val());
        $("#text-input").val("");
        });
      now.name = "${name}";
    });
  </script> 
```

这是 app.js 文件：

```
var server = require('http').createServer(function(req, res){
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Chat Server\n');
});
server.listen(9080);

var nowjs = require("now");
var everyone = nowjs.initialize(server);

everyone.now.distributeMessage = function(message){
  console.log('User '+this.now.name+' added message ' +message);
  everyone.now.receiveMessage(this.now.name, message);
}; 
```

一切似乎都运行正常，尽管页面加载时我不断收到意外的响应代码：502！

有没有办法为 nginx 启用网络代理，因为使用 Firefox Firebug 进一步查看，我收到此错误：

```
Firefox can't establish a connection to the server at ws://domain.tld/socket.io/1/websocket/-WFvaQTvzASDBMHNpUGA. 
```

任何建议非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:28:14.003

我变了：

```
var everyone = nowjs.initialize(server); 
```

到

```
var everyone = nowjs.initialize(server, {socketio: {transports: ["xhr-polling"]}}); 
```

似乎已经完成了这项工作。

# ruby-on-rails - Rails 缓存的默认过期时间是多少？

> ID：14404584
> 
> 赞同：23
> 
> 时间：2013-01-18T17:44:49.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching

我做了一些谷歌搜索，找不到这个问题的答案。Rails 允许为其缓存指定过期时间，如下所示：

```
Rails.cache.fetch("my_var", :expires_in => 10.seconds) 
```

但是如果我什么都不指定会发生什么：

```
Rails.cache.fetch("my_var") 
```

它永不过期？有默认值吗？如何明确定义永不过期的东西？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-26T22:46:06.250

这实际上取决于您使用的缓存存储。Rails 提供了几种，其中最流行的是[Memcached](http://guides.rubyonrails.org/caching_with_rails.html#activesupport-cache-memcachestore)。Memcached 的主要功能之一是它会[自动使旧的未使用记录过期](https://github.com/memcached/memcached/wiki/Overview#forgetting-is-a-feature)，因此您可以忘记 :expire 选项。

其他 Rails 缓存存储，如内存存储或 redis 存储将不会过期，除非您明确指定何时执行此操作。

[更多关于缓存键过期如何在 Rails 中工作。](http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-16T11:21:55.170

正如@Rahul 所说，将 Dalli 用于 memcached（谁没有），默认到期时间永远不会。正如@icem 所说，您不必担心垃圾收集，memcached 会丢弃旧的未使用记录。

请参阅官方 dalli 文档：

```
Expires_in default is 0, which means never 
```

[https://github.com/mperham/dalli#configuration](https://github.com/mperham/dalli#configuration)

您可以为 dalli 设置全局到期时间

```
config.cache_store = :dalli_store, { expires_in: 1.day} 
```

为了更好的个人控制：

```
Rails.cache.write "some_cache_key", some_cachable_string, expires_in: 3.hours 
```

新文档[http://apidock.com/rails/ActiveSupport/Cache/Store/write](http://apidock.com/rails/ActiveSupport/Cache/Store/write)没有说太多，但旧文档：http: [//apidock.com/rails/ActiveSupport/Cache/MemCacheStore/write](http://apidock.com/rails/ActiveSupport/Cache/MemCacheStore/write)

手动使缓存过期（如果发生某些事件）：

```
Rails.cache.delete "some_cache_key" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-18T17:55:30.043

它们永不过期。（对于基于 FileStore 的缓存，在 Rails 中是默认的）

如果在缓存存储中找到它们的键，则将使用该值。因此，始终建议添加至少任何到期时间。

# c++ - 动态更改循环内部的 QLineEdit TextBox

> ID：14404587
> 
> 赞同：1
> 
> 时间：2013-01-18T17:45:09.657
> 
> 标签：c++, qt

我正在构建一些代码，我正在运行一个 while 循环，并且在循环内，我试图用 QLineEdit 的 setText() 更改几个文本框的内容。但是，仅在循环内调用 setText 是行不通的；文本框仅在代码运行后更改其实际值，而不是在每次迭代时更改。

我对 C++ 或 Qt 几乎没有经验，但我正在从事的项目必须使用它们。有什么帮助吗？

编辑：我猜这一定很简单，因为我缺乏熟悉/知识，我只是遇到了麻烦，但如果需要更多信息，我很乐意提供！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:36:00.570

问题是 QT 需要控制返回到 UI 线程的事件循环以更新 QLineEdit 的视觉外观。运行事件循环的快速而肮脏的方法是`QCoreApplication::processEvents()`在每次调用之后添加`setText()`. 修复它的正确方法是将设置文本框值的阻塞进程移动到另一个线程中，公开一个`updateText(QString text)`信号，将其连接到 TextBox 的`setText(const QString & text)`插槽，并在您希望更新文本时发出该信号。

有关更多详细信息，请参阅我对类似问题的回答：[QProgressBar 完成加载后无法解释的延迟](https://stackoverflow.com/q/14398050/895024)

您可能还想查看有关 QThreads 和 Qt 信号槽系统的一些文档：http: [//harmattan-dev.nokia.com/docs/library/html/qt4/threads-qobject.html](http://harmattan-dev.nokia.com/docs/library/html/qt4/threads-qobject.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:08:54.963

就我而言，仅调用 repaint() 或 processEvents() 不会完成这项工作。

在您的函数循环中，**同时** `QCoreApplication::processEvents();`调用and `repaint();`：

```
for (i;...)
{
    //do your calculations
    //...

    QCoreApplication::processEvents();
    repaint();
} 
```

调用 ui->mywidget->update() 也没有什么不同。

（针对 Kubuntu 12.10 上的 Qt4.8.3 和 Windows XP 上的 Qt5.0.1 测试）

# mysql - 在mysql中忽略ORDER BY中的大小写

> ID：14404588
> 
> 赞同：1
> 
> 时间：2013-01-18T17:45:14.183
> 
> 标签：mysql, sql, select, sql-order-by

我遇到了一种情况，我想按字母顺序对 mysql 查询结果进行排序，忽略大小写......我的意思是

```
Al

aasd

Cfds 

ddafsf 
```

...

我找到了一个解决方案，将结果的每个元素转换为小写或大写并使用**Order By** ..我不喜欢这种方法... [http://dev.mysql.com/doc/refman/5.0/en/identifier -case-sensitive.html](http://dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitivity.html) .. 阅读这篇文章.....但我什么都没掌握......只是想知道如何做到这一点......干杯......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:46:37.080

为什么不`ASC`直接使用，

```
SELECT *
FROM   tableName
ORDER  BY columnName ASC 
```

# javascript - 带有可自定义元素网格的 jQuery 内容滑块

> ID：14404590
> 
> 赞同：0
> 
> 时间：2013-01-18T17:45:14.713
> 
> 标签：javascript, jquery, grid, slider

有谁知道允许您指定元素网格的 jQuery 内容滑块（不仅仅是图像滑块）？

例如，这是我所追求的那种网格：

[http://cl.ly/image/0O213C1n2b0s](http://cl.ly/image/0O213C1n2b0s)

您可以看到它是一个 2x2 网格。使用这些控件，当有人单击“下一个”链接时，它应该滚动以显示接下来的 4 个元素。我希望能够在一个页面上有多个实例，每个实例都有不同的网格（我可能在同一页面上是 3x2、2x2、4x1）

另外，作为一个额外的警告，我需要这个响应。

第一个问题是；有谁知道已经存在的符合我要求的解决方案？如果不是，那就引出我的第二个问题；有人愿意帮我写这样的东西吗？我对 javascript 比较精通（如果我绝对诚实的话，更具体地说是 jQuery），但绝不是专家。

我已经进行了相当多的谷歌搜索，但没有完成。希望有人比我领先，并且已经按照这些思路写了一些东西。

你说什么，互联网？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:04:09.080

你见过这个吗：

[jQuery 网格样式滑块](http://codecanyon.net/item/jquery-grid-style-slider/1204040)

# asp.net - 使用 CSS 设置不同宽度的表格列样式

> ID：14404594
> 
> 赞同：1
> 
> 时间：2013-01-18T17:45:21.400
> 
> 标签：asp.net, css, web-applications

我需要将中间列设置为 100%。css 在下面正常工作，除非我将列宽更改为 100%，然后它会删除其他列的所有宽度。有谁知道为什么？

```
.SummaryTable td:first-child
{
    width: 150px;
}
.SummaryTable td:first-child + td
{
    width: 150px; /*100% will remove other col widths*/
}
.SummaryTable td:first-child + td + td
{
    width: 175%;
} 
```

这是[小提琴](http://jsfiddle.net/qw2fZ/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:10:41.733

如果表格的宽度 = 100%，则不设置中间单元格的宽度应该会为您修复它。

其他单元格将被固定，但未指定宽度的单元格将填满屏幕。

试试这个，我认为它应该工作

```
.SummaryTable td:first-child
{
    width: 150px;
}
.SummaryTable td:first-child + td
{
   /* don't set any width for the middle cell, it would expand */
}
.SummaryTable td:first-child + td + td
{
    width: 150px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:11:14.387

给总表一个特定的宽度：

```
.SummaryTable {width: 100%} 
```

然后从第二列中删除宽度，使其填充第一列和第三列从总宽度中剩下的剩余宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:30:54.630

如果我是你，我不会使用 css `:child`，它不会在旧版本的 IE 上工作。（IE8，IE7..）。

你最好使用jquery，你可以尝试：

`$('.SummaryTable td:nth-child(2)').css({width: '100%'})`

或者你可以使用`:eq`：

`$('.SummaryTable td:eq(1)').css({width: '100%'})`

请注意，当您使用`:eq`计数器时，计数器从 0 开始，因此 1 是第二个位置。

# r - 将地理坐标从度数转换为十进制

> ID：14404596
> 
> 赞同：25
> 
> 时间：2013-01-18T17:45:22.683
> 
> 标签：r, gis

我想将我的地理坐标从度数转换为小数，我的数据如下：

```
 lat     long
105252 30°25.264 9°01.331
105253 30°39.237 8°10.811
105255 31°37.760 8°06.040
105258 31°41.190 8°06.557
105259 31°41.229 8°06.622
105260 31°38.891 8°06.281 
```

我有这段代码，但我不明白为什么它不起作用：

```
convert<-function(coord){
tmp1=strsplit(coord,"°")
tmp2=strsplit(tmp1[[1]][2],"\\.")
dec=c(as.numeric(tmp1[[1]][1]),as.numeric(tmp2[[1]]))
return(dec[1]+dec[2]/60+dec[3]/3600) 
} 
don_convert=don1
for(i in 1:nrow(don1)){don_convert[i,2]=convert(as.character(don1[i,2]));              don_convert[i,3]=convert(as.character(don1[i,3]))} 
```

转换函数有效，但我要求循环为我完成工作的代码不起作用。

任何建议都是可以接受的。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-05-12T18:06:44.080

使用`measurements`已经具有单位转换功能的 CRAN 包，因此您无需自己制作：

```
x = read.table(text = "
   lat     long
105252 30°25.264 9°01.331
105253 30°39.237 8°10.811
105255 31°37.760 8°06.040
105258 31°41.190 8°06.557
105259 31°41.229 8°06.622
105260 31°38.891 8°06.281",
header = TRUE, stringsAsFactors = FALSE) 
```

设置好 data.frame 后：

```
# change the degree symbol to a space
x$lat = gsub('°', ' ', x$lat)
x$long = gsub('°', ' ', x$long)

# convert from decimal minutes to decimal degrees
x$lat = measurements::conv_unit(x$lat, from = 'deg_dec_min', to = 'dec_deg')
x$long = measurements::conv_unit(x$long, from = 'deg_dec_min', to = 'dec_deg') 
```

最终产品：

```
 lat             long
105252 30.4210666666667 9.02218333333333
105253         30.65395 8.18018333333333
105255 31.6293333333333 8.10066666666667
105258          31.6865 8.10928333333333
105259         31.68715 8.11036666666667
105260 31.6481833333333 8.10468333333333 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-18T18:02:07.383

尝试使用库`char2dms`中的`sp`函数。它还有其他功能可以额外进行十进制转换。

```
library("sp")
?char2dms 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-18T18:00:22.700

一些矢量化和矩阵操作将使您的功能更简单：

```
x <- read.table(text="
       lat     long
105252 30°25.264 9°01.331
105253 30°39.237 8°10.811
105255 31°37.760 8°06.040
105258 31°41.190 8°06.557
105259 31°41.229 8°06.622
105260 31°38.891 8°06.281",
                header=TRUE, stringsAsFactors=FALSE)

x 
```

该函数本身使用：

*   `strsplit()`使用正则表达式模式`"[°\\.]"`- 这一步将字符串拆分
*   `sapply`循环遍历向量

尝试这个：

```
convert<-function(x){
  z <- sapply((strsplit(x, "[°\\.]")), as.numeric)
  z[1, ] + z[2, ]/60 + z[3, ]/3600
} 
```

试试看：

```
convert(x$long)
[1] 9.108611 8.391944 8.111111 8.254722 8.272778 8.178056 
```

* * *

免责声明：我没有检查你的数学。自行决定使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-03T11:50:28.147

感谢@Gord Stephen 和@CephBirk 的回答。当然帮了我。我想我只是提一下，我还发现它`measurements::conv_unit`不处理“E/W”“N/S”条目，它需要正/负度。我的坐标以字符串形式出现`"1 1 1W"`，需要先转换为`"-1 1 1"`.
我想我会为此分享我的解决方案。

```
df <- c("1 1 1E", "1 1 1W", "2 2 2N","2 2 2S")  
measurements::conv_unit(df, from = 'deg_min_sec', to = 'dec_deg')
[1] "1.01694444444444" NA                 NA                 NA  
Warning message:
In split(as.numeric(unlist(strsplit(x, " "))) * c(3600, 60, 1),  :
  NAs introduced by coercion

ewns <- ifelse( str_extract(df,"\\(?[EWNS,.]+\\)?") %in% c("E","N"),"+","-")
dms <- str_sub(df,1,str_length(df)-1)
df2 <- paste0(ewns,dms)

df_dec <- measurements::conv_unit(df2, 
                                  from = 'deg_min_sec', 
                                  to = 'dec_deg'))
df_dec
[1] "1.01694444444444"  "-1.01694444444444" "2.03388888888889"  "-2.03388888888889"
as.numeric(df_dec)
[1]  1.016944 -1.016944  2.033889 -2.033889 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-15T21:27:53.330

查看`degree`包中的命令`OSMscale`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-25T08:31:28.993

正如吉姆刘易斯之前评论的那样，您似乎正在使用浮点分钟。然后你只连接两个元素

> dec=c(as.numeric(tmp1[[1]][1]),as.numeric(tmp2[[1]]))

具有 43°21'8.02 形式的度、分和秒，`as.character()`返回“43°21'8.02\””，我将您的函数更新为

```
convert<-function(coord){
  tmp1=strsplit(coord,"°")
  tmp2=strsplit(tmp1[[1]][2],"'")
  tmp3=strsplit(tmp2[[1]][2],"\"")
  dec=c(as.numeric(tmp1[[1]][1]),as.numeric(tmp2[[1]][1]),as.numeric(tmp3[[1]]))
  c<-abs(dec[1])+dec[2]/60+dec[3]/3600
  c<-ifelse(dec[1]<0,-c,c)
  return(c)
} 
```

添加负坐标的替代方案，对我很有用。我仍然不明白为什么库`char2dms`中的`sp`函数对我不起作用。

谢谢

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-18T06:34:53.327

使用 substring 而不是 strsplit 的另一个不太优雅的选项。仅当您的所有位置具有相同的位数时，这才有效。对于负坐标，只需乘以 -1 即可获得正确的十进制度数。

```
x$LatDD<-(as.numeric(substring(x$lat, 1,2))
+ (as.numeric(substring(x$lat, 4,9))/60))
x$LongDD<-(as.numeric(substring(x$long, 1,1))
       + (as.numeric(substring(x$long, 3,8))/60)) 
```

# java - Android - Http 获取请求

> ID：14404598
> 
> 赞同：2
> 
> 时间：2013-01-18T17:45:30.313
> 
> 标签：java, android

我正在尝试使用下面的代码获取请求，但字符串生成器始终为空。网址是正确的...

[http://pastebin.com/mASvGmkq](http://pastebin.com/mASvGmkq)

编辑

```
public static StringBuilder sendHttpGet(String url) {

    HttpClient http = new DefaultHttpClient();
    StringBuilder buffer = null;

    try {
        HttpGet get = new HttpGet(url);
        HttpResponse resp = http.execute(get);
        buffer = inputStreamToString(resp.getEntity().getContent());
    }
    catch(Exception e) {
        debug("ERRO EM GET HTTP URL:\n" + url + "\n" + e);
        return null;
    }

    debug("GET HTTP URL OK:\n" + buffer);
    return buffer;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T17:52:08.853

我通常这样做：

```
try {
    DefaultHttpClient httpClient = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet(url);

    HttpResponse httpResponse = httpClient.execute(httpGet);
    HttpEntity httpEntity = httpResponse.getEntity();
    output = EntityUtils.toString(httpEntity);
} 
```

`output`字符串对象在哪里。

# oracle - 获取游标的最后一条记录

> ID：14404605
> 
> 赞同：0
> 
> 时间：2013-01-18T17:45:48.180
> 
> 标签：oracle, plsql, cursor

如果我有一个`cur` 包含这些记录的游标

```
DEPTNO ENAME  ORD   CNT                        
10     KING   1      3                      
10     CLARK  2      3                      
10     MILLER 3      3                      
20     JONES  1      5 
```

我得到这样的光标记录：

```
FOR i IN cur LOOP
  --Process
END LOOP; 
```

现在我需要增强我的流程并进行检查，如果**最后一条记录**的 CNT 列的值等于 5，我不需要导航到此光标。

有没有办法直接获取游标的最后一条记录来测试 CNT 列而不循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:08:55.793

不，游标是指向执行查询的程序的指针。您只能从游标中获取。Oracle 本身不知道游标将返回的最后一行是什么，直到您尝试获取一行并发现没有更多行要返回。

当然，您可以修改查询，以便`CNT`在单独的列中返回最后一行的

# java - Java中聚合器模式的实现

> ID：14404607
> 
> 赞同：0
> 
> 时间：2013-01-18T13:47:33.793
> 
> 标签：java, design-patterns, aggregate

**[编辑]**嗯，显然我没有正确地问这个问题。你能告诉我为什么这是一个不好的问题吗？

换一种说法，我想找到一个为什么要实现[本文](http://cowboyprogramming.com/2007/01/05/evolve-your-heirachy/)中定义为“纯对象聚合”而不是“对象组织为 blob”的内容。

我第一次尝试在 Java 中实现聚合模式。

乍一看，接口似乎是答案，当我需要属性的默认值时，我遇到了困惑。
由于常量是静态的，如果我在接口中定义任何东西，它将与实现它的每个类共享。我想要的是，我只需要在我想要一个与默认值不同的值时才需要实现它。

在这里，抽象类似乎更合适，但我又回到了多重继承问题。

这是我可以使用的（不可能的）骨架：

```
public interface MenuItemPopup {
    // Defaults
    int windowHeight = 200;
    int windowWidth = 350;

    public void open();

    public void setWindowHeight(int newHeight){
        windowHeight = newHeight;
    }

    public void setWindowWidth(int newWidth){
        windowWidth = newWidth;
    }

}

public interface WindowButton {
    // Defaults
    Point size = new Point (5, 120);

    public void initialize();

    public void setSize(Point newSize){
        size = newSize;
    }
}

public class SomeFuncGUI extends MandatoryParentClass implements WindowButton, MenuItemPopup{

    public void open(){
        // do stuff
    }

    public void initialize(){
        // do more stuff
    }
}

public class OtherFuncGUI extends MandatoryParentClass implements MenuItemPopup{

    public OtherFuncGUI(Point customPosition){
        setSize(new Point(45, 92));
    }

    public void open(){
        // do stuff
    }
}

public class MainClass{
    ArrayList <MandatoryParentClass> list = new ArrayList <MandatoryParentClass>();
    list.add(new SomeFuncGUI());
    list.add(new OtherFuncGUI());

    for( MandatoryParentClass button : list){
        // process buttons
        if(button instanceof WindowButton){
            button.open();
        }
        // process popups
        if(button instanceof MenuItemPopup){
            button.initialize();
        }
    }
} 
```

我意识到这不会编译。
我将如何更改它以实现 MenuItemPopup 和 WindowButton 的聚合模式？

# ruby-on-rails - 如何更改 Rails 日期助手选择框的顺序？

> ID：14404608
> 
> 赞同：3
> 
> 时间：2013-01-18T17:45:55.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想更改 Rails 的日期助手选择框的顺序。

我刚刚升级到 Rails 3.2.3，这不再有效：

```
de:
  formats:
    default: "%d/%m/%Y"
    order: [:day, :month, :year] 
```

如何才能做到这一点？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:17:01.673

看起来 Rails 3.2 使用其他格式的订单：[https ://github.com/rails/rails/blob/4b1985578a2b27b170358e82e72e00d23fdaf087/activesupport/lib/active_support/locale/en.yml](https://github.com/rails/rails/blob/4b1985578a2b27b170358e82e72e00d23fdaf087/activesupport/lib/active_support/locale/en.yml)

尝试类似的东西

```
de:
  date:
    formats:
      default: "%d/%m/%Y"
    order:
      - :day
      - :month
      - :year 
```

# java - ToolbarManager：为什么不显示分隔符？

> ID：14404611
> 
> 赞同：1
> 
> 时间：2013-01-18T17:46:03.030
> 
> 标签：java, swt, action, toolbar, separator

这是我的代码：

```
Toolbar toolbar = new ToolBar(this, SWT.NONE);
toolbar.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false, 1, 1));
ToolbarManager toolbarManager = new ToolBarManager(toolbar);
//... create an action...
toolbarManager.add(toolbarAction);
toolbarManager.add(new Separator());
//... create an action...
toolbarManager.add(toolbarAction);
//... create an action...
toolbarManager.add(toolbarAction);
//... create an action...
toolbarManager.add(toolbarAction);
toolbarManager.add(new Separator());
toolbarManager.update(false); 
```

为什么在结果工具栏中只显示操作而不显示分隔符？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T07:26:21.550

尝试使用 SWT.FLAT | SWT.HORIZONTAL 而不是 SWT.NONE

——苏米特·索卡尔

# php - 无法在数据库中搜索 ___ 或 ___ 2 字段，只能搜索最后一个字段

> ID：14404613
> 
> 赞同：-1
> 
> 时间：2013-01-18T17:46:11.923
> 
> 标签：php, mysql, sql, select

无法在数据库中搜索**_ 或 _**
2 字段， 下面是我的代码，我以前在其他项目中使用过，但是现在如果我在两个字段中设置这样的搜索关键字，它只能搜索第二个字段，我不能想清楚为什么？如何解决这个问题使其工作？

谢谢。

```
php
$keyword = mysql_real_escape_string($_POST['keyword']);
$sql = "select * from $table where subject or content like '%$keyword%';";
$query = mysql_query($sql);
while($list = mysql_fetch_array($query)){
    $id = $list[id];
    $subject = $list[subject];
    $content = $list[content];
}

mysql
id    mediumint(6)    AUTO_INCREMENT  INDEX
subject    text    utf8_unicode_ci
content    longtext    utf8_unicode_ci    PRIMARY UNIQUE INDEX 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T17:47:37.220

它应该是

```
select * 
from   $table
where  subject like '%$keyword%' or 
       content like '%$keyword%' 
```

作为旁注，`SQL Injection`如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用 PreparedStatements，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T17:50:38.543

你可以这样使用它

```
where  subject like '%$keyword1%' or 

        content like '%$keyword2%' 
```

# ruby-on-rails - Rails 路由到错误的控制器操作

> ID：14404617
> 
> 赞同：3
> 
> 时间：2013-01-18T17:46:54.803
> 
> 标签：ruby-on-rails, routes, activeadmin

这是'rake routes'的输出

```
$ rake routes
        new_user_session GET    /users/sign_in(.:format)            devise/sessions#new
            user_session POST   /users/sign_in(.:format)            devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)           devise/sessions#destroy
           user_password POST   /users/password(.:format)           devise/passwords#create
       new_user_password GET    /users/password/new(.:format)       devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format)      devise/passwords#edit
                         PUT    /users/password(.:format)           devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)             devise/registrations#cancel
       user_registration POST   /users(.:format)                    devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)            devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)               devise/registrations#edit
                         PUT    /users(.:format)                    devise/registrations#update
                         DELETE /users(.:format)                    devise/registrations#destroy
              admin_root        /admin(.:format)                    admin/dashboard#index
         admin_dashboard        /admin/dashboard(.:format)          admin/dashboard#index
              admin_user PUT    /admin/users/:id(.:format)          admin/users#update
batch_action_admin_users POST   /admin/users/batch_action(.:format) admin/users#batch_action
             admin_users GET    /admin/users(.:format)              admin/users#index
                         POST   /admin/users(.:format)              admin/users#create
          new_admin_user GET    /admin/users/new(.:format)          admin/users#new
         edit_admin_user GET    /admin/users/:id/edit(.:format)     admin/users#edit
                         GET    /admin/users/:id(.:format)          admin/users#show
                         PUT    /admin/users/:id(.:format)          admin/users#update
                         DELETE /admin/users/:id(.:format)          admin/users#destroy
                    root        /                                   home#index 
```

这是日志的摘录

```
Started POST "/admin/users/batch_action" for 127.0.0.1 at 2013-01-18 23:07:07 +0530
Processing by Admin::UsersController#create as HTML 
```

为什么会`/admin/users/batch_action`被路由到`Admin::UsersController#create`，当路由显示时 `batch_action_admin_users POST /admin/users/batch_action(.:format) admin/users#batch_action`

我正在使用 ActiveAdmin，这些是它生成的路由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:03:39.407

您似乎正在使用`resources`路由管理员/用户控制器，因此 POST http 动词默认为`create`控制器中的操作。

如果您想添加另一个宁静的 POST 控制器操作，请执行以下操作，

```
scope "admin" do
  resources :users do
    member do
      post 'batch_action'
    end
  end
end 
```

我不知道您的 routes.rb 看起来如何，所以它在您的 routes.rb 文件中可能看起来不同。但它应该看起来相似。

# ruby - 根据子哈希值获取数组索引

> ID：14404618
> 
> 赞同：9
> 
> 时间：2013-01-18T17:46:56.503
> 
> 标签：ruby

说我有这个：

```
[
  {
             :id => 34,
    :votes_count => 3
  },
  {
             :id => 2,
    :votes_count => 0
  },
] 
```

如何获取基于的索引`id`？我想要做的是在我搜索时返回`0`，当`id: 34`我`1`搜索时`id: 2`。最有效的方法是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-18T17:49:28.643

您可以将块传递给`#index`：

```
array.index {|h| h[:id] == 34 } # => 0 
```

# c# - Couchbase 中 IOperationResult 的状态码

> ID：14404621
> 
> 赞同：1
> 
> 时间：2013-01-18T17:47:21.880
> 
> 标签：c#, couchbase

有人可以让我知道可用`StatusCodes`的内容`IOperationResult`或指向我的一些文档吗？

我查看了在线文档，但没有找到任何东西。我从 GitHub 下载了代码，但我唯一找到的是`StatusCodeEnums`带有两个代码（`Success(0)`和`NotFound(1)`）的枚举。

但是，我有一个返回状态代码 2 和以下消息的测试：

```
Message = "Failed to process response: \0\0\0\0\0\0\0\0?'q\0\0\0\0P_" 
```

（是的，它有 \0 字符 - 这不是复制粘贴/格式错误）

该测试试图针对 StoreMode.Add 中的相同键存储相同的内容两次 - 所以我预计会出现异常。

我将 Couchbase 2.0 与 .NET 客户端 1.2 一起使用。

任何人都可以提供可以预期的代码列表并描述它们的含义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T21:39:38.360

下面的消息是来自集群的损坏响应，它已在 2.2 版本中修复。缺陷[MB-8149](http://www.couchbase.com/issues/browse/MB-8149)更详细地介绍了这个问题。

```
Message = "Failed to process response: \0\0\0\0\0\0\0\0?'q\0\0\0\0P_" 
```

[SDK 手册](http://docs.couchbase.com/couchbase-sdk-net-1.3/#checking-error-codes)列出了所有`StatusCodes`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T21:29:47.293

我做了更多研究，发现这些链接详细说明了`Memcached Binary Protocol`. 它们似乎与 Couchbase 返回的内容相对应，但是，在扫描了他们最新的源代码后，我仍然找不到任何参考。他们为状态代码使用了一个可以为空的 int。

[http://www.couchbase.com/forums/thread/documentation-statuscode](http://www.couchbase.com/forums/thread/documentation-statuscode)

[http://code.google.com/p/memcached/wiki/BinaryProtocolRevamped#Response_Status](http://code.google.com/p/memcached/wiki/BinaryProtocolRevamped#Response_Status)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-17T14:38:49.310

这是一个旧的帖子错误，状态代码现在记录在这里： [http ://docs.couchbase.com/couchbase-sdk-net-1.3/#checking-error-codes](http://docs.couchbase.com/couchbase-sdk-net-1.3/#checking-error-codes)

# c++ - 如果我不给它提供命令行参数，为什么我的程序会崩溃？

> ID：14404626
> 
> 赞同：-13
> 
> 时间：2013-01-18T17:47:42.433
> 
> 标签：c++, command-line, crash, command-line-arguments

我做了一个简单的测试程序来玩 C++11 线程。

```
#include <iostream>
#include <stdlib.h>
#include <thread>
using namespace std;

void tee(int civ)
{
    for(int loop=0; loop<19; loop++, civ++)
    {
        civ = civ%19;
        cout << loop << "\t" << civ << endl;
        this_thread::sleep_for(chrono::milliseconds(300));
    }
}

void koot()
{
    while(true)
    {
        cout << ":) ";
        this_thread::sleep_for(chrono::milliseconds(300));
    }
}

int main(int argc, char *argv[])
{
    thread saie(tee, atoi(argv[1])),
        kamaa(koot);
    saie.join();
    kamaa.join();

    return 0;
} 
```

只要我提供命令行参数，它就可以正常工作，但如果我不提供，它就会崩溃。如何解决？我尝试检查参数计数，如果它们存在，则无济于事。

编辑：我不得不添加这一行：

```
if(argc < 2) return 1; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T17:49:34.937

它崩溃是因为您正在访问

```
argv[1] 
```

如果有的话，它将保存一个命令行参数（除了程序的名称）。你应该检查是否`argc`大于1。为什么大于1？因为第一个命令行参数是程序本身的名称。所以`argc`总是大于`0`。并且索引从`0`. 所以如果`argc == 1`, only`argv[0]`是有效的。

```
#include <iostream>
int main(int argc, char* argv[])
{
  // no need to check argc for argv[0]
  std::cout << argc << " " << argv[0] << "\n";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T17:48:46.363

`argv[1]`为空，导致调用`atoi()`. 请注意，C++ 中的数组索引是从零开始的！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T17:48:53.770

因为您不检查是否`argc > 1`并尝试访问`argv[1]`

解决这个问题的方法是首先检查是否`argc > 1`然后访问 argv[1]。

```
int main(int argc, char *argv[])
{

    if(argc > 1){
    thread saie(tee, atoi(argv[1])),
        kamaa(koot);
    saie.join();
    kamaa.join();
   }
    return 0;
} 
```

要记住的要点：

1.  `argc`默认情况下为 1。这是保存编号的参数计数器。传递给程序的参数。默认情况下，它的 1 因为程序获取可执行文件的名称（和路径）

2.  `argv`保存以 NULL 结尾的字符数组（或字符串）的数组。`argv[0]`将始终保存可执行文件的名称。

3.  永远不要假设用户总是会输入参数。并且在将来访问`argv`或任何数组时始终进行边界检查。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T17:57:44.563

请尝试以下代码：

```
int main(int argc, char *argv[])
{
    if(argc < 2) {   cout<<"No command line arguments found\n Aborting!\n"; return 1;}
    else         {   thread saie(tee, atoi(argv[1])),kamaa(koot);}
    saie.join();
    kamaa.join();

    return 0;
} 
```

您正在尝试访问不存在的命令行参数 argv[1]。最好检查命令行参数是否存在。

# android - 在 sqlite 数据库中搜索

> ID：14404627
> 
> 赞同：2
> 
> 时间：2013-01-18T17:47:49.310
> 
> 标签：android, sqlite, android-intent

我正在尝试构建一个将数据保存在 sqlite 数据库中的应用程序。我有一个在数据库中搜索的类，它按供应商名称和日期搜索。问题是我希望它显示保存在同一**日期的****MeterNumbers**。对于我所尝试的，它只给了我它在数据库中获得的第一个结果，假设我搜索保存于 2013 年 1 月 1 日的 Tom，它应该显示保存于 01/01/ 的 Tom 的两个metereNumbers 2013

 **这是我在 sqlite 中的表的示例

> ****供应商名称****日期** **MeterNumber****
> 
>  ****...汤姆.... 2013 年 1 月 1 日 ......2098957438902
> 
> ...汤姆... 2013 年 1 月 1 日 ..........4786909876785
> 
> ...史蒂文...18/01/2013....8978978906542****

 ****这是 Sqlite 数据库中的代码

```
public String getMeterNUmber(String MeterNumber) throws SQLException  
{
    String[] whereArgs = new String[]{MeterNumber}; 

Cursor mCursor = db.rawQuery("SELECT MeterNumber FROM " + SCAN_TABLE + " WHERE  Date = ?",whereArgs); 
mCursor.moveToFirst(); 

if(mCursor.getCount() > 0){ 
    MeterNumber = mCursor.getString(0); 
}

return MeterNumber;
} 
```

这是调用 sqlite 数据库中的查询并通过意图将结果带到另一个类的类中的代码

```
Intent updateCustomerIntent = new Intent(Searching.this, Result.class);
updateCustomerIntent.putExtra("product", dbUser.getMeterNUmber(ss));
 startActivity(updateCustomerIntent); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:08:42.283

首先，您的参数应该是日期而不是数字，其次，您不要循环遍历您刚刚提取的第一条记录的结果。我认为您应该首先在将 SQLite 与 android 结合使用时修改一些好的教程。这里有一些好的链接可能会有所帮助。

*   [Android SQLite 数据库和 ContentProvider - 教程](http://www.vogella.com/articles/AndroidSQLite/article.html#sqliteoverview_listviews)！
*   [Android SQLite 数据库教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:58:07.493

首先，您的 getMeterNumber 方法将米数作为参数，正如 ggenglish 的评论中已经指出的那样，这似乎很奇怪，它应该是一个日期不是吗？此外，您的方法只调用 mCursor.getString(0) 一次，然后返回，这意味着您只能从结果集的第一行获取仪表编号。

如果您想要所有结果，则需要遍历整个记录集。当您收到光标时，它将**位于第一行之前**，因此，您可以使用 moveToNext() 方法循环遍历它。然后，您还必须将结果存储在适当的数据结构中，例如 ArrayList

```
ArrayList<String> results = new ArrayList<String>();
while (mCursor.moveToNext()) {
    results.add(mCursor.getString(0));
} 
```

所以，你最终会得到这样的东西

```
public ArrayList<String> getMeterNUmber(String meterDate) throws SQLException  
{
    String[] whereArgs = new String[]{meterDate}; 

    Cursor mCursor = db.rawQuery("SELECT MeterNumber FROM " + SCAN_TABLE + " WHERE  Date = ?",whereArgs); 

    ArrayList<String> results = new ArrayList<String>();
    while (mCursor.moveToNext()) {
        results.add(mCursor.getString(0));
    }

    mCursor.close();

    return results;
} 
```

最后，在将数据添加到意图时使用 putStringArrayListExtra 而不是 putExtra。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T18:17:58.453

如果您期望一个值，您应该这样做：

```
public String getMeterNUmber(String date) throws SQLException {  

    String meterNumber = null;

    Cursor cursor = db.rawQuery("SELECT MeterNumber FROM " + SCAN_TABLE + " WHERE  Date = ?", new String[]{date} );

    if ( cursor.moveToNext() )  meterNumber = cursor.getString(0);

    cursor.close();

    return meterNumber;

} 
```

如果您期望多个元素，则应按照其他人提到的那样循环

```
public ArrayList<String> getMeterNUmber(String date) throws SQLException {    

    ArrayList<String> meterNumbers = new ArrayList<String>();

    Cursor cursor = db.rawQuery("SELECT MeterNumber FROM " + SCAN_TABLE + " WHERE  Date = ?", new String[]{date} );

    while ( cursor.moveToNext() )  meterNumbers.add( cursor.getString(0) );

    cursor.close();

    return meterNumbers;

} 
```

您指定您按名称和日期查询，但您的示例代码显示其他方式，但希望这会有所帮助。******

# ios - UITextView 在 UITableViewCell 内增长

> ID：14404634
> 
> 赞同：1
> 
> 时间：2013-01-18T17:48:06.803
> 
> 标签：ios, uitableview, uitextview

我在 SO 上看到了很多与此相关的问题，但是，没有一个与我的问题有关。

我要创建一个具有消息传递功能的应用程序。与 Apple 的 Mail 和 LinkedIn 在他们的应用程序中的 Mail 功能类似，我希望有`UITableView`3 行。第三行具有`UITextView`随着用户类型而增长的。我的代码如下：

```
- (void)textViewDidChange:(UITextView *)textView {
    if (bodyText.contentSize.height > currentContentHeight) {
        currentContentHeight = bodyText.contentSize.height;

        [tblView beginUpdates];
        [tblView endUpdates];

        [bodyText setFrame:CGRectMake(0, 0, 310.0, currentContentHeight)];

        bodyText.selectedRange = NSMakeRange(textView.text.length - 1, 0);

    } else {
        currentContentHeight = minimumContentHeight;

        [tblView beginUpdates];
        [tblView endUpdates];
    }
} 
```

当我在 iPhone 上按下回车键时，它会下降并且可以完美运行。问题是，如果我去中心或任何其他中间部分`UITextView`，它似乎会产生有趣的行为，因为它得到了`contentSize`不正确的。例如：

*   我按回车 10 次
*   转到第五行并输入“狗”
*   它`contentHeight`基于第 5 行，如果这有意义吗？

**有没有办法根据当前的所有**文本来计算它？如果我在上面遗漏了什么，请告诉我。我广泛阅读以下内容：

[http://dennisreimann.de/blog/uitextview-height-in-uitableviewcell/](http://dennisreimann.de/blog/uitextview-height-in-uitableviewcell/)

[https://stackoverflow.com/questions/985394/growth-uitextview-and-uitableviewcell](https://stackoverflow.com/questions/985394/growing-uitextview-and-uitableviewcell)

[UITableViewCell 内的 UITextView](https://stackoverflow.com/questions/7022205/uitextview-inside-a-uitableviewcell)

[如何根据内容调整 UITextView 的大小？](https://stackoverflow.com/questions/50467/how-do-i-size-a-uitextview-to-its-content)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:19:15.560

我用以下内容编辑了上面的代码，它对我有用：

```
- (void)textViewDidChange:(UITextView *)textView {    
    // Get the number of lines in the current view
    NSUInteger lines = textView.text.length;
    if ((lines * 25) > currentContentHeight && (lines * 25) >= minimumContentHeight && bodyText.contentSize.height > minimumContentHeight) {

        currentContentHeight = bodyText.contentSize.height;

    } else if (lines < 5){
        currentContentHeight = minimumContentHeight;
    }

    [tblView beginUpdates];
    [tblView endUpdates];

    [bodyText setFrame:CGRectMake(5, 5, 310, currentContentHeight)];

    bodyText.selectedRange = [bodyText selectedRange];
} 
```

我在开始时根据手机的大小设置了`currentContentHeight`等于。`minimumContentHeight`

# javascript - 在 javascript 中管理这个范围

> ID：14404635
> 
> 赞同：0
> 
> 时间：2013-01-18T17:48:09.480
> 
> 标签：javascript, jquery

我试图让这个函数为其“this”运算符获得正确的范围，但没有运气。在`AssetName = function(options){`代码块内，我希望“this”指向 class `AssetName`。我错过了什么？权利的范围`this`从一开始就是`window`。

```
Assetname: function(options){

    var Base = WM.Utility.GenericFilter()
    options = options;

    if (typeof Object.create !== "function") { 
        // For older browsers that don't support object.create
        Object.create = function (o) {
            function F() {}
            F.prototype = o;
            return new F();
        };
    }       

    var AssetName = {};
    AssetName = function(options){
        return function(){
            var self = this;

            debugger;
            // Call the super constructor.
            Base.call(this, options);

            this.$mod.on('change', '#asset-name-quick-search', self, 
                this.search);
            this.$mod.on('click', '.close', self,  this.remove);

            this.initTypeAhead();
            this.$selectionList = this.$mod.find("#asset-name-selection-list");

            this.assetListItems = [];

            return this;    
        }(options, AssetName);

    }

    // The AssetName class extends the base GenericFilter class.
    AssetName.prototype = Object.create(Base.prototype);

    AssetName.prototype.initTypeAhead = function(){
        var options = {};
        options.source = _.pluck(this.collection, 'asset_name');
        options.items = 8;
        this.$mod.find('#asset-name-quick-search').typeahead(options);    
    };

    AssetName(options);
    return AssetName;
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:00:46.323

```
AssetName = function(options){
        return function(){
            var self = this;

            debugger;
            // Call the super constructor.
            Base.call(this, options);

            this.$mod.on('change', '#asset-name-quick-search', self,  this.search);
            this.$mod.on('click', '.close', self,  this.remove);

            this.initTypeAhead();
            this.$selectionList = this.$mod.find("#asset-name-selection-list");

            this.assetListItems = [];

            return this;    
        }(options, AssetName);

    } 
```

改成

```
AssetName = function(options){
        var aa =  function(){
            var self = this;

            debugger;
            // Call the super constructor.
            Base.call(this, options);

            this.$mod.on('change', '#asset-name-quick-search', self,  this.search);
            this.$mod.on('click', '.close', self,  this.remove);

            this.initTypeAhead();
            this.$selectionList = this.$mod.find("#asset-name-selection-list");

            this.assetListItems = [];

            return this;    
        };
        aa.call(AssetName,options);

    } 
```

在您的代码中，该函数按`aa`原样调用。`aa(options);``this``window`

## **[更新]**

我用以下代码修复了这个错误：

```
AssetName =  function (options) {
    AssetName = function (options) {
        var aa = function () {
            alert(this);
            return this;
        };
        aa.call(this, options);
    }
    AssetName.prototype.initTypeAhead = function () {
        alert(1);
    }

    return new AssetName(options);;
};
var test = AssetName();
test.initTypeAhead(); 
```

但我建议如何编写如下代码：

```
AssetName =  function (options) {
    AssetName = function (options) {
            alert(this);
    }
    AssetName.prototype.initTypeAhead = function () {
        alert(1);
    }

    return  new AssetName();
};
var test =  AssetName();
test.initTypeAhead(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:02:44.927

您只需将您`var self = this`的匿名返回函数移出即可。然后你可以使用只使用`self`.

# ruby-on-rails-3 - 在 Rails Group By 查询中，Order By 被忽略

> ID：14404648
> 
> 赞同：2
> 
> 时间：2013-01-18T17:48:44.337
> 
> 标签：ruby-on-rails-3, activerecord

我要做的只是按过去 7 天的印象数（当有人查看帖子时创建印象）对帖子进行排序。这是我的命名范围

```
scope :popular_last_week, unscoped
    .select("websites.*, COUNT(impressions.id) AS counted_impressions")
    .joins("INNER JOIN impressions ON websites.id = impressions.impressionable_id")
    .where("impressions.created_at >= ?", 7.days.ago)
    .where(:is_published => true)
    .group("websites.id")
    .order("counted_impressions DESC") 
```

（“counted_impressions”用于避免发布记录冲突）

然而，这会产生以下无效 SQL（counted_impressions 不是有效列）：

`SELECT COUNT(*) AS count_all, websites.id AS websites_id FROM "websites" INNER JOIN impressions ON websites.id = impressions.impressionable_id WHERE "websites"."is_published" = 't' AND (impressions.created_at >= '2013-01-11 17:48:03.954542') GROUP BY websites.id ORDER BY counted_impressions`

似乎选择语句被忽略了。我哪里出错了，或者我应该怎么做才能使 SQL 语句为：

`SELECT websites.*, COUNT(impressions.id) AS counted_impressions FROM "websites" INNER JOIN impressions ON websites.id = impressions.impressionable_id WHERE "websites"."is_published" = 't' AND (impressions.created_at >= '2013-01-11 17:42:57.771777') GROUP BY websites.id ORDER BY counted_impressions DESC`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:05:53.477

尝试这个：

```
  范围：popular_last_week，无范围
    .select(arel_table[Arel.star])
    .select(Website.arel_table[:id].count.as("counted_impressions"))
    .joins("INNER JOIN 在网站上的印象.id = 印象.impressionable_id")
    .where("impressions.created_at >= ?", 7.days.ago)
    .where(:is_published => true)
    .group("websites.id")
    .order("counted_impressions DESC")

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T02:40:59.873

似乎查询应该是：

```
SELECT count(*) AS impression_count, w.id AS website_id 
FROM websites as w
INNER JOIN impressions as i ON w.id = i.impressionable_id 
WHERE w.is_published = 't' AND i.created_at >= '2013-01-11 17:48:03.954542'
GROUP BY w.id 
ORDER BY impression_count DESC; 
```

似乎您可以跳过此查询中的联接，然后对下一个查询运行“is_published”检查以获取实际的帖子数据...假设您仅使用此查询来获取第二个查询的 ID 列表获取数据。

# excel - 将多张工作表保存为 .pdf

> ID：14404650
> 
> 赞同：34
> 
> 时间：2013-01-18T17:48:47.883
> 
> 标签：excel, vba, pdf, pdf-generation, export-to-pdf

我有一个报告电子表格，它从数据库中获取一些数据并形成三张汇总报告信息。我想从命令行自动运行电子表格，并让它自动将所有三个报告表保存为 PDF 文件。

起初我以为我可以在工作表上使用 VBA 宏，通过一系列“打印为 PDF”来执行此操作，但这需要一个中间交互式对话框来指定输出文件名。然后我发现我可以只保存为pdf，并且宏可以设置输出文件名。但是，这会创建三个单独的文件，然后我必须稍后在外部将它们放在一起以合并它们。

（奇怪的是，另存为 pdf 只保存一张工作表，而其他保存模式似乎可以保存整个工作簿。）

是的，以后有合并这三个文件的工具，但我想知道是否有一些简单的方法可以让 Excel 将多张工作表一起保存为一个 pdf 文件。

我现在打印了一系列的东西，比如：

```
ActiveSheet.ExportAsFixedFormat Type:=xlTypePDF, ... 
```

我可以做一个类似（伪代码）的语句：

```
ThisWorkbook.Sheets(1,2,3,4).ExportAsFixedFormat Type:=xlTypePDF, ... 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-01-18T21:32:15.253

首先选择要组合的工作表：

```
ThisWorkbook.Sheets(Array("Sheet1", "Sheet2")).Select

ActiveSheet.ExportAsFixedFormat Type:=xlTypePDF, Filename:= _
    "C:\tempo.pdf", Quality:= xlQualityStandard, IncludeDocProperties:=True, _
     IgnorePrintAreas:=False, OpenAfterPublish:=True 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-20T22:26:41.030

与蒂姆的回答类似——但检查了 2007 年（默认情况下未安装 PDF 导出）：

```
公共子 subCreatePDF()

    If Not is PDFLibraryInstalled Then
        '最好将其显示为带有正确链接的用户表单：
        MsgBox "请安装插件以导出为 PDF。您可以在 http://www.microsoft.com/downloads/details.aspx?familyid=4d951911-3e7e-4ae6-b059-a2e79ed87041 找到它"。
        退出子
    万一

    ActiveSheet.ExportAsFixedFormat 类型：=xlTypePDF，_
        文件名：=ActiveWorkbook.Path & Application.PathSeparator & _
        ActiveSheet.Name & " für " & Range("SelectedName").Value & ".pdf", _
        质量：=xlQualityStandard，IncludeDocProperties：=True，_
        IgnorePrintAreas:=False, OpenAfterPublish:=True
结束子

私有函数 IsPDFLibraryInstalled() 作为布尔值
'归功于 Ron DeBruin (http://www.rondebruin.nl/pdf.htm)
    IsPDFLibraryInstalled = _
        (Dir(Environ("commonprogramfiles") & _
        "\Microsoft 共享\OFFICE" & _
        格式（Val（Application.Version），“00”）&_
        "\EXP_PDF.DLL") <> "")
结束功能

```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-12T19:49:35.183

我建议在导出为 PDF 之后添加以下行：

```
ThisWorkbook.Sheets("Sheet1").Select 
```

（例如`Sheet1`，您希望之后激活的单张工作表）

使多张工作表处于选定状态可能会导致执行某些代码时出现问题。（例如，当主动选择多个工作表时，unprotect 无法正常工作。）

# git - git aws.push 返回错误 403

> ID：14404654
> 
> 赞同：3
> 
> 时间：2013-01-18T17:49:10.983
> 
> 标签：git, amazon-web-services, amazon-elastic-beanstalk

我正在为我在 Elastic Beanstalk 上的应用程序设置 git。我一直按照亚马逊提供的说明进行操作。推送更改后，我收到此错误

git aws.push

```
error: The requested URL returned error: 403 while accessing https://<Access Key             Removed>:20130117T213945Z538f1c7baf8c89b4b547cb6717aabbaa7dfab3c52e0911d71e17b06765b922b2@git.elasticbeanstalk.us-east-1.amazonaws.com/v1/repos/54696d73546573744170706c69636174696f6e/commitid/62323130316462646264373436303536343265633861333035633133633265666466393633303133/environment/54696d7374657374656e7669726f6e6d656e74/info/refs?service=git-receive-pack
fatal: HTTP request failed 
```

这是我的 .config 文件

git 配置 -l

```
credential.helper=osxkeychain
user.name=Tim xxxxxxxxxx
user.email=xxxxxxxxx@gmail.com
core.bare=false
core.repositoryformatversion=0
core.filemode=true
core.logallrefupdates=true
core.ignorecase=true
aws.endpoint.us-east-1=git.elasticbeanstalk.us-east-1.amazonaws.com
aws.endpoint.ap-northeast-1=git.elasticbeanstalk.ap-northeast-1.amazonaws.com
aws.endpoint.eu-west-1=git.elasticbeanstalk.eu-west-1.amazonaws.com
aws.endpoint.us-west-1=git.elasticbeanstalk.us-west-1.amazonaws.com
aws.endpoint.us-west-2=git.elasticbeanstalk.us-west-2.amazonaws.com
aws.endpoint.ap-southeast-1=git.elasticbeanstalk.ap-southeast-1.amazonaws.com
aws.endpoint.ap-southeast-2=git.elasticbeanstalk.ap-southeast-2.amazonaws.com
aws.endpoint.sa-east-1=git.elasticbeanstalk.sa-east-1.amazonaws.com
alias.aws.elasticbeanstalk.remote=!.git/AWSDevTools/aws.elasticbeanstalk.push --remote-url
alias.aws.elasticbeanstalk.push=!.git/AWSDevTools/aws.elasticbeanstalk.push
alias.aws.elasticbeanstalk.config=!.git/AWSDevTools/aws.elasticbeanstalk.config
alias.aws.push=!git aws.elasticbeanstalk.push
alias.aws.config=!git aws.elasticbeanstalk.config 
```

如何检查亚马逊方面的权限？是安全组设置吗？

谢谢你的帮助。如果我可以为您提供更多信息，请告诉我。再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-10T03:22:31.913

如果您的系统时钟关闭超过 900 秒，AWS git 插件将返回 403。

# html - 图像替换和文本对齐：右

> ID：14404655
> 
> 赞同：0
> 
> 时间：2013-01-18T17:49:17.923
> 
> 标签：html, css, image-replacement

我正在尝试实现[图像大小调整技术](http://css-tricks.com/examples/ImageReplacement/)，它们都工作得很好——也就是说，直到你弹出一个：

```
body {
    text-align: right;
} 
```

示例：http: [//jsfiddle.net/mAGhh/](http://jsfiddle.net/mAGhh/)

以前有没有人处理过这个问题？我当然可以包装所有元素并使用图像替换，但我很确定我会遇到内联问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:58:55.153

如果您使用它来删除用于图像替换的文本：

```
element {
    text-indent: -9999px;
} 
```

...而且你有`text-align:right`，负缩进将无法正常工作。该技巧旨在处理标准的左对齐文本。

一个好的防御措施是在以`text-align:left`这种方式进行图像替换时显式声明元素。

# django - 使用南迁移将 DB 更新到 heroku 时出现问题

> ID：14404656
> 
> 赞同：2
> 
> 时间：2013-01-18T17:49:27.737
> 
> 标签：django, heroku, migration, django-south, schema-migration

我有一个 Django proyect 在 heroku 中运行了一段时间，问题是，树几天前，我尝试更新我的模式模型，但是，每次我写

```
heroku run python manage.py migrate quizzer 
```

heroku 一直告诉我一切都是最新的，但我已经更改了我的 models.py 文件夹并像往常一样运行模式迁移。

如果您知道为什么会发生这种情况，或者我如何强制将架构迁移到我的 heroku 应用程序，请告诉我如何操作。

ps：hole数据库无法删除，因为heroku中存储的数据和我本地服务器数据库中存储的数据不一样，我不想丢失用户的数据

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T18:01:48.837

这是在修改您的 models.py 后在 quizzer 上运行模式迁移的工作流程

```
./manage.py schemamigration quizzer --auto # create migration
./manage.py migrate quizzer # apply migration locally
git add .
git commit -m "Changed quizzer models, added schemamigration"
git push heroku
heroku run python manage.py migrate quizzer # apply migration on heroku 
```

听起来您可能忘记将迁移文件（通常在 appname/migrations 中找到）检查到 git，提交并将其推送到 heroku。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T03:44:19.570

South might be missing from requirements.txt. Try:

```
pip freeze > requirements.txt 
```

...followed by another git add/commit/push.

Also, according to the [South installation instructions](http://south.readthedocs.org/en/latest/installation.html), `syncdb` must be run first, "to make the South migration-tracking tables". So try:

```
heroku run python manage.py syncdb 
```

...then try the migrate command again.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-27T15:37:02.673

我也有这个问题。我通过再次运行`heroku restart`并运行`migrate`命令解决了这个问题。不知道它为什么有效（怀疑它与初始有关），但至少它有效。

希望有帮助！

# spotify - 导航到自动播放的 Spotify 曲目页面？

> ID：14404658
> 
> 赞同：2
> 
> 时间：2013-01-18T17:49:28.640
> 
> 标签：spotify

使用 Spotify URI 即 ( ) 链接到歌曲`href="spotify:track:5hOvK49BB8MKmMm5zM1mJD"`会导致播放曲目，而我只想转到专辑页面并突出显示曲目。我已经按照[这里](https://stackoverflow.com/questions/10492405/prevent-song-playing-on-uri-link-click)`event.preventDefault();`的建议实现了一个，但我不确定处理程序应该是什么样子才能进入跟踪页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:02:34.257

没有曲目页面这样的东西——如您所见，您实际上进入了专辑页面。

要获得您想要的行为，请获取曲目的专辑并链接到该专辑。

# python - 如何创建一个while循环来检查文件是否存在？

> ID：14404661
> 
> 赞同：0
> 
> 时间：2013-01-18T17:49:32.200
> 
> 标签：python, while-loop, file-io

我想要做的是检查文件是否存在，如果不存在，则执行操作，然后再次检查，直到文件存在，然后代码继续执行其他操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:00:34.193

为简单起见，我将实现一个小的轮询函数，并设置超时以确保安全：

```
def open_file(path_to_file, attempts=0, timeout=5, sleep_int=5):
    if attempts < timeout and os.path.exists(path_to_file) and os.path.isfile(path_to_file): 
        try:
            file = open(path_to_file)
            return file
        except:
            # perform an action
            sleep(sleep_int)
            open_file(path_to_file, attempts + 1) 
```

我还会考虑使用 Python 内置[轮询](http://docs.python.org/2/library/select.html#poll-objects)，因为这将跟踪/报告文件描述符的 I/O 事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:54:16.770

假设你在 Linux 上：

如果你真的想避免任何类型的循环来查找文件是否存在并且你确定它会在某个时候被创建并且你知道它将被创建的目录，你可以使用[pynotify](http://pyinotify.sourceforge.net/)跟踪对父目录的更改. 它会在发生变化时通知您，您可以检测它是否是您需要创建的文件。

但是，根据您的需要，它可能比它的价值更麻烦，在这种情况下，我建议使用像 Kyle 的解决方案这样的小型轮询功能。

# node.js - 按下 CTRL + C 或 CTRL + D 时，node.js REPL over socket 挂起

> ID：14404669
> 
> 赞同：0
> 
> 时间：2013-01-18T17:50:06.267
> 
> 标签：node.js, sockets, read-eval-print-loop

我正在尝试像 telnet 连接一样在套接字上使用 REPL，但是当我按 CTRL + C 或 CTRL + D 或产生错误时，套接字连接挂起并且不响应任何内容。

node.js 代码是：

```
var net = require("net");
var connections = 0;

// Socket port 5001
net.createServer(function (socket) {
  connections += 1;
  var server = require("repl").start(
      'session:' + connections + ' > ', 
      socket
  );
  server.rli.on('exit', function() {
    socket.end();
  });
}).listen(5001);

// Console
var server = require("repl").start('session:' + (++connections) + ' > ', null); 
```

并从其他终端运行：

```
telnet localhost 5001 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T09:56:02.230

也许是linux的问题。

我尝试了一个[带有 node 的 Telnet 服务器示例](http://www.davidmclifton.com/2011/07/22/simple-telnet-server-in-node-js/)。当我在窗口上运行时，我按下的每个键都由`receiveData`函数处理，但在 linux 中没有。在linux中，每行处理一行，而不是每个字符一个字符。

这是我探测过的代码：

```
var net = require('net');
var sockets = [];

/*
 * Cleans the input of carriage return, newline
 */
function cleanInput(data) {
    return data.toString().replace(/(\r\n|\n|\r)/gm,"");
}

/*
 * Method executed when data is received from a socket
 */
function receiveData(socket, data) {
    var cleanData = cleanInput(data);
    if(cleanData === "@quit") {
        socket.end('Goodbye!\n');
    }
    else {
        for(var i = 0; i<sockets.length; i++) {
            if (sockets[i] !== socket) {
                sockets[i].write(data);
            }
        }
    }
    socket.write('Data: ' + data);
}

/*
 * Method executed when a socket ends
 */
function closeSocket(socket) {
    var i = sockets.indexOf(socket);
    if (i != -1) {
        sockets.splice(i, 1);
    }
}

/*
 * Callback method executed when a new TCP socket is opened.
 */
function newSocket(socket) {
    sockets.push(socket);
    socket.write('Welcome to the Telnet server!\n');
    socket.on('data', function(data) {
        receiveData(socket, data);
    })
    socket.on('end', function() {
        closeSocket(socket);
    })
}

// Create a new server and provide a callback for when a connection occurs
var server = net.createServer(newSocket);

// Listen on port 8888
server.listen(8888); 
```

# c# - UserControl 的 OnRepaint 事件后，控件从父 UserControl 中消失

> ID：14404670
> 
> 赞同：0
> 
> 时间：2013-01-18T17:50:09.813
> 
> 标签：c#, user-controls, parent-child, repaint, onpaint

我有一个上面`UserControl`有一个`button`。在`UserControl` `OnPaint`事件中，我绘制一个圆角边框（如果半径为零，则为一个简单的矩形），然后填充整个控件。在这些操作之后，我的`Button`( `btnClose`) 消失了。如何让我的`button`再次可见？

```
protected override void OnPaint(PaintEventArgs pe)
{
    using (System.Drawing.Pen p = new Pen(new SolidBrush(this.BorderColor)))
    {
        if (borderRadius > 0)
        {
            DrawRoundRect(pe.Graphics, p, 0, 0, this.Width - 1, this.Height - 1, borderRadius, this.FillColor);
        }
        else
        {
            this.BackColor = this.FillColor;
            pe.Graphics.DrawRectangle(p, 0, 0, this.Width - 1, this.Height - 1);
        }
        btnClose.Location = new Point(this.Width - btnClose.Width - BTN_MARGIN_DELTA, BTN_MARGIN_DELTA);
    }
    base.OnPaint(pe);
} 
```

以防万一，DrawRoundRect 函数：

```
void DrawRoundRect(Graphics g, Pen p, float X, float Y, float width, float height, float radius, Color _fillColor)
{
    using (GraphicsPath gp = new GraphicsPath())
    {
        gp.AddLine(X + radius, Y, X + width - (radius * 2), Y);
        gp.AddArc(X + width - (radius * 2), Y, radius * 2, radius * 2, 270, 90);
        gp.AddLine(X + width, Y + radius, X + width, Y + height - (radius * 2));
        gp.AddArc(X + width - (radius * 2), Y + height - (radius * 2), radius * 2, radius * 2, 0, 90);
        gp.AddLine(X + width - (radius * 2), Y + height, X + radius, Y + height);
        gp.AddArc(X, Y + height - (radius * 2), radius * 2, radius * 2, 90, 90);
        gp.AddLine(X, Y + height - (radius * 2), X, Y + radius);
        gp.AddArc(X, Y, radius * 2, radius * 2, 180, 90);
        gp.CloseFigure();

        using (SolidBrush brush = new SolidBrush(_fillColor))
        {
            g.FillPath(brush, gp);
            g.DrawPath(p, gp);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:03:36.570

尝试将位置代码移动到 resize 方法：

```
protected override void OnResize(EventArgs e) {
  btnClose.Location = new Point(this.Width - btnClose.Width - BTN_MARGIN_DELTA, BTN_MARGIN_DELTA);
} 
```

在绘制事件中移动控件可能会导致对绘制事件的递归调用。仅在绘画事件中“绘画”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:05:29.257

我设置了`FillColor = Color.Gray`, `BorderColor = Color.Black`, `borderRadius = 5`，`BTN_MARGIN_DELTA = 2`它似乎没有任何问题。这是一个屏幕截图：

![在此处输入图像描述](../Images/ab343553155d3e21dbafc87fbcab5fc3.png)

我认为问题不在于这些代码行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:29:21.280

好吧，我的错。这是一个从 UserControl 中删除所有控件的函数。所以我过滤删除控件。

```
void ClearControls()
{
    for (int i = 0; i < Items.Count; i++)
    {
        foreach (Control cc in Controls)
        {
            if (cc.Name.Contains(LINK_LABEL_FAMILY) || (cc.Name.Contains(LABEL_FAMILY)))
            {
                Controls.RemoveByKey(cc.Name);
            }
        }
    }
} 
```

# c# - 异步套接字读取

> ID：14404673
> 
> 赞同：0
> 
> 时间：2013-01-18T17:50:13.173
> 
> 标签：c#, sockets, asynchronous

所以我开始使用套接字并异步读取它们。

第一个问题是这之间有什么区别：

`socket.BeginReceive(readResult.Buffer, 0, SocketReadResult.BufferSize, 0, new AsyncCallback(ReadCallback), readResult);`

和

`socket.BeginReceive(readResult.Buffer, 0, SocketReadResult.BufferSize, 0, ReadCallback, readResult);`

另外，鉴于这是我的回调函数，为什么我阅读的示例对整个事情都有一个 try/catch，当然你只需要一个 try/catch 围绕`socket.EndReceive()`调用？

```
public void ReadCallback(IAsyncResult ar)
{
    try
    {
        var readResult = (SocketReadResult)ar.AsyncState;
        var socket = readResult.Socket;
        int bytesRead = socket.EndReceive(ar);

        if (bytesRead > 0)
        {
            // There might be more data, so store the data received so far.
            readResult.Text.Append(Encoding.ASCII.GetString(readResult.Buffer, 0, bytesRead));

            // Get the rest of the data.
            socket.BeginReceive(readResult.Buffer, 0, SocketReadResult.BufferSize, 0, new AsyncCallback(ReadCallback), readResult);
        }
        else
        {
            var newRead = new SocketReadResult(socket);

            socket.BeginReceive(readResult.Buffer, 0, SocketReadResult.BufferSize, 0, new AsyncCallback(ReadCallback), newRead);

            // All the data has arrived; put it in response.
            if (readResult.Text.Length > 1) ((IMessageSender)this).RouteMessage(this, new MessageString(readResult.Text.ToString()));
        }
    }
    catch (Exception e)
    {
        // TODO: manage this exception.
    }
}

public struct SocketReadResult
{
    StringBuilder Text;
    Socket Socket;
    byte[] Buffer;

    public const int BufferSize = 1024;

    public SocketReadResult(Socket s)
    {
        Socket = s;
        Buffer = new byte[BufferSize];
        Text = new StringBuilder();
    }
} 
```

最后，您是否希望在调用后优雅地关闭侦听器，您调用`socket.BeginReceive()`了哪些函数以及它是如何管理的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:27:20.370

**a)**他们是平等的。编译器将为您生成相同的代码

**b）**如何为异步调用编写一些扩展方法并处理异常，就好像它们是同步调用而不阻塞调用者一样？

```
try
{
    await socket.ConnectTaskAsync("www.google.com", 80);

    await socket.SendTaskAsync(bytesToSend);

    byte[] buf = new byte[0x8000];
    var bytesRead = await socket.ReceiveTaskAsync(buf, 0, buf.Length);
}
catch (Exception ex)
{
    Console.WriteLine(ex.Message);
} 
```

* * *

```
public static class SocketExtensions
{
    public static Task ConnectTaskAsync(this Socket socket, string host, int port)
    {
        return Task.Factory.FromAsync(
                     socket.BeginConnect(host, port, null, null),
                     socket.EndConnect);
    }

    public static Task<int> ReceiveTaskAsync(this Socket socket, 
                                            byte[] buffer, 
                                            int offset, 
                                            int count)
    {
        return Task.Factory.FromAsync<int>(
           socket.BeginReceive(buffer, offset, count, SocketFlags.None, null, socket),
           socket.EndReceive);
    }

    public static Task SendTaskAsync(this Socket socket, byte[] buffer)
    {
        return Task.Factory.FromAsync<int>(
              socket.BeginSend(buffer,0,buffer.Length,SocketFlags.None, null, socket),
              socket.EndSend);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:01:17.583

`socket.BeginReceive(readResult.Buffer, 0, SocketReadResult.BufferSize, 0, new AsyncCallback(ReadCallback), readResult);`

和

`socket.BeginReceive(readResult.Buffer, 0, SocketReadResult.BufferSize, 0, ReadCallback, readResult);`

两者都是一样的，它是一样的

```
 //both are the same thing
        button1.Click += new EventHandler(button1_Click);
        button1.Click += button1_Click; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:02:21.010

这两个调用之间的差异可以忽略不计，您可以认为它们是等效的。第二个调用将帮助编译器为您进行类型推断，但这在 IntelliSense 和代码自动完成之外不会很明显。我个人使用第一种格式，因为它更简洁。

至于为什么`try/catch`不仅仅是`Socket.EndReceive()`调用主要与其他局部变量的范围有关。

考虑一下：

```
var state = result.AsyncState as SocketStateObject;
var socket = state.Socket;

try
{
  var numberOfBytesRead = socket.EndReceive(result);
}
catch(SocketException ex)
{
  // Handle the exception here.
}

// numberOfBytesRead is not accessible out here!

try
{
  if(socket.Connected)
    socket.BeginReceive(...); // Receive again!
}
catch(SocketException ex)
{
  // Handle the exception here too.
} 
```

正如您在此处看到的，有几个原因可以说明为什么一个较大`try/catch`的比两个单独的较小的更可取。

首先，局部变量仅在`try`. `try/catch`您可以通过在块之外将其定义得更高来解决这个问题。

其次，可能更重要的是，与减少冗余有关。由于您很可能会`Socket.BeginReceive()`在回调中再次调用，因此将其放在相同的`try/catch`. 否则，你必须`SocketException`在两个地方而不是一个地方处理你的潜力。

至于`Socket`优雅地关闭，可以使用`Socket.Close()`方法。通常套接字永远不会被重用，所以你可以通过`false`它。但是，最好在通话`Socket.Dispose()`后也`Socket.Close()`通话。如果您将侦听器套接字作为类的成员变量，请确保您实现`IDisposable`接口并正确处理您的套接字。

# browser - 在浏览器中检测窗口关闭事件的标准方法是什么？

> ID：14404676
> 
> 赞同：0
> 
> 时间：2013-01-18T17:50:17.330
> 
> 标签：browser, chat, logout

在任何标准浏览器中检测浏览器窗口关闭事件的标准方法是什么？按照标准，我的意思是当“让我保持登录”复选框未选中时，谷歌或 Facebook 等网站实施的东西。我有一个交互式网站，其中有一个即时消息模块，我需要通知其他用户合作伙伴已注销。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:53:09.163

保持登录链接通过 cookie 和 cookie 超时长度进行管理。

执行此类操作的一种方法是让浏览器每（1 分钟）对您的服务器进行一次异步 ajax 调用，这样您就知道他们仍然处于登录状态。如果您在 90 秒内没有收到其中一个调用，您可以说他们被注销。

这种方法还可以捕获例如他们的连接断开或他们的计算机崩溃的情况。

# svn - VisualSVN 未按字母顺序排序

> ID：14404680
> 
> 赞同：1
> 
> 时间：2013-01-18T17:50:28.763
> 
> 标签：svn, visualsvn-server

我不确定这是否一直如此，但我今天注意到它，当我通过浏览器访问视觉 SVN 并且找不到 v4.0 标记时，实际上它在那里但顺序错误。是否有一些配置可以确定用于对该列表进行排序的内容？

![在此处输入图像描述](../Images/b1f61ccfba8fa58a365572d4a61f6497.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:35:20.567

Subversion 在 Web 界面中使用区分大小写的排序。当您混合较低和大写“V”时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T05:38:49.543

不。这样的配置不存在，VisualSVN 服务器 web-frontend 只翻译从 WebDAV 接收。

我认为（未经测试），排序顺序是由每个标签时间戳（或修订号，实际上是相同的参数）的创建确定的。您可以使用 svn ls -v URL 对其进行测试。

# css - 在标记为绝对位置的 div 上创建文本

> ID：14404688
> 
> 赞同：1
> 
> 时间：2013-01-18T17:51:09.760
> 
> 标签：css

我目前正在尝试创建一个网站页脚，该页脚位于页面底部并且已经这样做了，尽管在此 div 顶部创建内容时遇到了一些问题。

```
.footer{
width:100%;
height:80px;
background:#333333;
margin-top:20px;
position:absolute;
bottom:0;
} 
```

以上是我使用的当前 CSS 样式选项，但是在尝试创建显示在此之上的 div 时我仍然遇到麻烦，例如版权说明。

所有帮助将不胜感激:)！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:58:29.793

像这样创建一个子div

```
<div class="footer">

    <div>Copyright Info</div>

</div> 
```

并给孩子css`position: relative;`以防止继承`position: absolute;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:59:23.817

我不确定您想要什么样的内容，但这里有几个 jsFiddle 中的示例。

[jsFiddle](http://jsfiddle.net/qB4Z2/)

基本上，如果你想要一个`<div>`在你的页脚，把它放在你的页脚 div 中：

```
<div class ="footer">
 <div class="ele">
  <span class="over">Hello World.</span>
 </div>
</div> 
```

并对其进行样式设置，为其提供尺寸和边距以使其对齐。

```
.ele {
    margin:auto;
    width:100px;
    height:100px;
    background-color:red;
} 
```

# java - 试图让 Maven 属性插件从用户帐户读取文件

> ID：14404691
> 
> 赞同：0
> 
> 时间：2013-01-18T17:51:33.677
> 
> 标签：java, spring, maven, maven-3

试图让 Maven 属性插件从用户帐户读取文件，但看起来我必须硬编码完整路径:(

```
<plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>properties-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>pre-clean</phase>
                        <goals>
                            <goal>read-project-properties</goal>
                        </goals>
                        <configuration>
                            <files>
                                <file>~/jboss.properties</file>
                            </files>
                        </configuration>
                    </execution>
                </executions>
            </plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:39:33.353

use ${user.home}

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>properties-maven-plugin</artifactId>
        <executions>
            <execution>
                <phase>pre-clean</phase>
                <goals>
                    <goal>read-project-properties</goal>
                </goals>
                <configuration>
                    <files>
                        <file>${user.home}/jboss.properties</file>
                    </files>
                </configuration>
            </execution>
        </executions>
        </plugin> 
```

# java - java PlainDocument 覆盖值的问题

> ID：14404703
> 
> 赞同：0
> 
> 时间：2013-01-18T17:52:33.793
> 
> 标签：java, jtextfield, uppercase

下午好。我正在开发一个屏幕，其中有一个**JTextField**，它应该始终接收**大写**值​​。看，我刚刚创建了一个派生自**PlainDocument**的类，在**insertString**中对其进行处理，并且它起作用了。问题是，每当我编辑 JTextField 的值时，它都会覆盖字符串，而不是插入我正在输入的字符串值的中间。示例：我的字段中有值“ **João da Silva** ”，我想在“ **João** ”之后和“ **da Silva ”之前添加名称“** **Pedro** ”，******João Pedrolva** ”而不是“ **João Pedro da Silva** ”。我希望你能理解。有人知道如何解决这个问题吗？我搜索了很多，尝试了很多方法，但无法解决。****

 ****```
import javax.swing.JTextField;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.Document;
import javax.swing.text.PlainDocument;

public class UpperCaseField extends JTextField {

    private static final long serialVersionUID = 1L;

    public UpperCaseField() {
        super();
    }

    protected Document createDefaultModel() {
        return new UpperCaseDocument();
    }

    static class UpperCaseDocument extends PlainDocument {

        private static final long serialVersionUID = 1L;

        @Override 
        public void insertString(int offs, String str, AttributeSet a) 
            throws BadLocationException {

            if (str == null) {
                return;
            }
            char[] upper = str.toCharArray();
            for (int i = 0; i < upper.length; i++) {
                upper[i] = Character.toUpperCase(upper[i]);
            }
            super.insertString(offs, new String(upper), a);
        }
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:30:39.183

关于什么：

```
@Override 
public void insertString(int offs, String str, AttributeSet a) 
            throws BadLocationException {

   if (str == null) {
      return;
   }

   super.insertString(offs, str.toUpperCase(), a);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:34:05.520

这样写你的方法：

```
@Override
public void insertString(int offset, String text, AttributeSet attributes) throws BadLocationException {

    if (text != null) {

        int currentBufferLength = getLength();
        String currentBufferContent = getText(0, currentBufferLength);

        String newText;

        if (currentBufferLength == 0) {
            newText = text;
        } else {
            newText = new StringBuilder(currentBufferContent)
                    .insert(offset, text)
                    .toString();
        }

        try {
                super.insertString(offset, text.toUpperCase(), attributes);
        } catch (BadLocationException exception) {
        }

    }
} 
```

对不起，我没有时间解释。但是，希望您在比较时可以看到自己做错了什么。****

# git - 如何用另一个 repo 替换 git 子模块？

> ID：14404704
> 
> 赞同：108
> 
> 时间：2013-01-18T17:52:39.323
> 
> 标签：git, git-submodules

如何用不同的 git repo 替换 git 子模块？

具体来说，我有一个子模块：

*   位于`./ExternalFrameworks/TestFramework`那个指向 git repo`git@github.com:userA/TestFramework.git`
*   我希望它现在指向`git@github.com:userB/TestFramework.git`.

问题是当我使用[此处](https://stackoverflow.com/questions/1260748/how-do-i-remove-a-git-submodule)描述的方法删除子模块时，然后使用命令重新添加它

```
git submodule add git@github.com:userB/TestFramework.git 
```

我收到此错误：

```
A git directory for 'ExternalFrameworks/TestFramework' is found locally with remote(s):
  origin    git@github.com:userA/TestFramework.git
If you want to reuse this local git directory instead of cloning again from
  git@github.com:userB/TestFramework.git
use the '--force' option. If the local git directory is not the correct repo
or you are unsure what this means choose another name with the '--name' option. 
```

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-01-18T18:45:13.910

如果子模块的位置（URL）发生了变化，那么您可以简单地：

1.  修改您的`.gitmodule`文件以使用新的 URL
2.  删除 repo 中的子模块文件夹`rm -rf .git/modules/<submodule>`
3.  删除工作目录下的子模块文件夹`rm -rf <submodule>`
4.  跑`git submodule sync`
5.  跑`git submodule update`

更完整的信息可以在其他地方找到：

*   [更改 git 子模块的远程存储库](https://stackoverflow.com/questions/913701/changing-remote-repository-for-a-git-submodule)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-01-18T17:52:39.323

[首先，使用此处](https://stackoverflow.com/questions/1260748/how-do-i-remove-a-git-submodule)已经提到的方法删除当前子模块，为方便起见，我将其包括在内：

*   `.gitmodules`从文件中删除相关部分
*   删除相关部分`.git/config`
*   运行`git rm --cached path_to_submodule`（没有尾部斜杠）
*   提交并删除现在未跟踪的子模块文件

现在，添加带有`--name`标志的新子模块。这将为 git 提供一个备用名称以`.git/config`供子模块参考，以与历史上存在的子模块消除冲突，您仍希望在以前的历史中工作。

所以输入：

```
git submodule add --name UpdatedTestFramework git@github.com:userB/TestFramework.git 
```

你会在你期望的路径上加载子模块。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-06-05T20:28:03.440

这些命令将在命令提示符下完成工作，而不会更改本地存储库中的任何文件。

```
git config --file=.gitmodules submodule.Submod.url https://github.com/username/ABC.git
git config --file=.gitmodules submodule.Submod.branch Dev
git submodule sync
git submodule update --init --recursive --remote 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-06T17:32:55.980

对我来说解决这个问题的是你的 git repo 的根目录（不是子模块），运行

```
rm -rf .git/modules/yourmodule 
```

然后你应该能够正常添加。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-16T13:57:33.783

我发现的最简单的方法是：

```
git rm -rf [submodule_dir]
git submodule add --name new_[submodule_name] [new_submodule_url] [submodule_dir] 
```

我不喜欢`.gitmodules`手动修改我的想法。我还写了一篇关于它[的小博文。](http://der-zyklop.de/blog/git-new-submodule-url)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-10-27T10:15:52.160

如果您只想更改**此克隆**的远程 URL ：

```
git config submodule."$submodule_name".url "$new_url" 
```

这不会影响`.gitmodules`父项目中的文件，因此不会传播给其他开发人员。

[这在此处](https://stackoverflow.com/a/914135/99777)被描述为“用户特定的记录更改” 。

***不要***运行`git submodule sync`，因为这将再次重置为默认 URL。

# authentication - NTLM-authenticaion 失败，但基本身份验证有效

> ID：14404713
> 
> 赞同：1
> 
> 时间：2013-01-18T17:53:01.523
> 
> 标签：authentication, httpwebrequest, ntlm, networkcredentials

以下是应用程序在本地 IIS 上调用 HTTP 请求时本地服务器上发生的情况。

```
 request.Credentials = CredentialCache.DefaultNetworkCredentials;
    request.PreAuthenticate = true;
    request.KeepAlive = true; 
```

当我执行请求时，我可以在 Fiddler 中看到以下一系列 HTTP 调用：

1.  没有授权标头的请求，使用 WWW-Authenticate NTLM+Negotiate 导致 401
2.  授权请求：协商（Base64 字符串 1），使用 WWW-Authenticate：协商（Base64 字符串 2）导致 401
3.  授权请求：协商（Base64 字符串 3），使用 WWW-Authenticate：协商（Base64 字符串 4）导致 401
4.  授权请求：协商（Base64 字符串 3），使用 WWW-Authenticate NTLM+协商导致 401

显然客户端和服务器（都在同一台机器上运行）正在尝试握手，但最终授权失败。

奇怪的是，如果我禁用站点的 Windows 身份验证并启用基本身份验证并显式发送用户/密码，一切正常。如果我使用 NTLM 身份验证并尝试从指定我的凭据的浏览器访问该站点，它也可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:43:15.483

好吧，经过几个小时的挣扎，我想出了问题所在。为了能够检查 Fiddler 中的网络流量，我定义了一个 Fiddler 规则：

if (oSession.HostnameIs("MYAPP")) { oSession.host = "127.0.0.1"; }

然后我在 Web 应用参考中使用了“MYAPP”而不是“localhost”，Fiddler 愉快地显示了所有会话信息。

但是服务器安全性远没有那么令人满意，所以这个别名基本上破坏了本地服务器上的质询-响应身份验证。将别名替换为“localhost”后，一切正常。

# php - 如何从本地服务器应用程序更新远程服务器应用程序

> ID：14404715
> 
> 赞同：0
> 
> 时间：2013-01-18T17:53:11.830
> 
> 标签：php, mysql, unix, wamp, lamp

我有一个在本地服务器上使用 WAMP 运行的 PHP/MySQL 应用程序。此应用程序包含只能从办公室网络上的设备访问的敏感和机密数据。

但是，此应用程序生成报告，客户端应该能够从运行在 LAMP 堆栈上的完全独立的应用程序从 Web 访问。

目前，我通过 SFTP 将报告从本地服务器传输到基于 Web 的服务器。

我的问题是，如何安全地从本地应用程序更新远程数据库，并且 MySQL db 只能由远程应用程序的 localhost 和运行本地应用程序的服务器修改？

我正在考虑创建某种只接受来自本地应用程序 IP 的数据的 API，但我不知道最佳实践，也不知道如何开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:58:19.897

MySQL 提供了一个 USER > **FROM HOST** > PER DATABASE > PER TABLE > PER COLUMN 授权系统。

这意味着您可以指定哪个用户可以从**哪个主机**连接到哪个数据库，... 使用 FROM HOST 功能。

# javascript - CSS/jQ/jS - 上一个/下一个按钮不会堆叠在 img 循环器上

> ID：14404717
> 
> 赞同：1
> 
> 时间：2013-01-18T17:53:22.090
> 
> 标签：javascript, jquery, css, slideshow, cycle

我正在尝试使用 prev/next 导航制作图像循环器。我让它运行了，但导航按钮不会出现在 img 上。我使用`<li> a:`了一个带有文本缩进-9999px的背景并将z-index设置为高于img。

CSS

```
div#slideshow {
  width: 1920px; height: 816px;
  overflow: scroll; 
  position: relative; z-index: 5;}

div#slideshow ul#navigation {
  display: none;
  list-style-type: none;
  position: relative; top: 375px; z-index: 15;}

div#slideshow ul#navigation li#prev {
    float: left;}

div#slideshow ul#navigation li#next {
    float: right;}

div#slideshow ul#navigation li a {
    display: block; width: 65px; height: 66px; text-indent: -9999px;}
div#slideshow ul#navigation li#prev a {
    background: url(http://www.nobodyfilm.org/images/Arrow-Left.jpg);}
div#slideshow ul#navigation li#next a {
    background: url(http://www.nobodyfilm.org/images/Arrow-Right.jpg);}

div#slideshow ul#slides {
    list-style: none;} 
```

jQ

```
$(document).ready(function() {

$("#slideshow").css("overflow", "hidden");

$("ul#slides").cycle({
    fx: 'fade',
    pause: 1,
    prev: '#prev',
    next: '#next'
});

$("#slideshow").hover(function() {
    $("ul#navigationv").fadeIn();
    },
        function() {
    $("ul#navigation").fadeOut();
    });
}); 
```

HTML

```
<div id="container">
    <div id="slideshow">
    <ul id="navigation">
      <li id="prev"><a href="#">Previous</a></li>
      <li id="next"><a href="#">Next</a></li>
    </ul>

    <ul id="slides">
      <li><img src="http://nobodyfilm.org/images/Mr.-Nobody-Train-Station.jpg" alt="Pic1" /></li>
      <li><img src="http://nobodyfilm.org/images/Mr.-Nobody-Overview-and-Production.jpg" alt="Pic2" /></li>
      <li><img src="http://nobodyfilm.org/images/Mr.-Nobody-Themes-And-Philosophy.jpg" alt="Pic3" /></li>
      </ul>
  </div>
</div> 
```

[http://nobodyfilm.org/slideshow.html](http://nobodyfilm.org/slideshow.html)

**编辑**：任何人都知道将鼠标移出容器元素时导航元素消失的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:00:21.017

它们没有显示，因为您将它们隐藏：更改以下内容：

```
div#slideshow ul#navigation {
  display: none;
  list-style-type: none;
  position: relative; top: 375px; z-index: 15;
} 
```

对此：

```
div#slideshow ul#navigation {
  display: block;
  list-style-type: none;
  position: relative; top: 375px; z-index: 15;
} 
```

请注意，我使用`display:block;`了而不是`display:none;`

# android - 服务和电池消耗

> ID：14404718
> 
> 赞同：0
> 
> 时间：2013-01-18T17:53:27.337
> 
> 标签：android

我正在处理一个项目，该项目有许多需要不时下载和上传数据的服务。我想知道，如果我们增加应用程序中的服务数量，这会影响电池消耗吗？它会大量流失吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:15:39.133

正如我所说，任何进程都会在处理器上设置更高的负载，从而消耗更多的电池。在此链接中，您可以看到一些消耗更多电池的功能：

[http://electronicdesign.com/ed-europe/what-drains-smart-phone-battery](http://electronicdesign.com/ed-europe/what-drains-smart-phone-battery)

如果您的应用程序消耗那么多电池，我建议您相应地对其进行编程。如果可能，尝试减少更新调用的数量。

# python - 将不确定数量的输入传递给一个函数的子函数

> ID：14404722
> 
> 赞同：0
> 
> 时间：2013-01-18T17:53:32.563
> 
> 标签：python

对不起，如果我没有清楚地解释自己。我想创建一个包装器来调用具有不同输入数量的预定义函数。当然，我可以为每个函数创建一个单独的包装器，但我想知道是否有一种方法可以为所有情况创建一个通用包装器。

应该调用的函数名为“fun1”和“fun2”，输入数量不同。我需要创建一个包装器'fun_wrap（func_name，不确定的输入量）'，它只需要调用函数名称及其相关的输入量。

还有一件事，我需要通过添加“_in”来更改输入名称，并首先将它们设为全局变量。下面是我损坏的代码。感谢您的任何建议！

```
def fun1(a,b):
    return a+b

def fun2(a,b,c):
    return a*b/c

def set_globals(**kwargs):
    for argname in kwargs:
        globals()['%s_in' % argname] = kwargs[argname]

def fun_wrap(func_name, uncertain amount of inputs):
    ffunc_name(set_globals(uncertain amount of inputs)) 
```

这样，如果我可以使用以下参数调用 final_fun：

```
fun_wrap(fun1,a,b)
fun_wrap(fun2,a,b) 
```

更新

我尝试使用 *arg，但失败了...

```
def fun1(a,b):
    return a+b

def fun2(a,b,c):
    return a*b/c

def set_globals(**kwargs):
    for argname in kwargs:
        globals()['%s_in' % argname] = kwargs[argname]

def fun_wrap(func_name, *arg):
    func_name(set_globals(*arg))

fun_wrap(fun2,a=1,b=2,c=3) 
```

得到错误：

```
Traceback (most recent call last):
  File "D:\Dropbox\AppPest\rice\try.py", line 19, in <module>
    fun_wrap(fun2,a=1,b=2,c=3)
TypeError: fun_wrap() got an unexpected keyword argument 'a' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:47:47.357

```
def fun1(a,b):
    return a + b

def fun2(a,b,c):
    return a * b / c

def set_globals(**kwargs):
    for argname in kwargs:
        globals()['%s_in' % argname] = kwargs[argname]

def fun_wrap(func, **kwargs):
    set_globals(**kwargs)       # made the call to set_globals before calling your function
    return func(**kwargs)       # return the value returned by the functions called 
```

# jquery - jQuery 扩展 jquery 函数以动态加载内容

> ID：14404725
> 
> 赞同：1
> 
> 时间：2013-01-18T17:53:38.990
> 
> 标签：jquery, dynamic, uislider

在使用 .html() 和 .on() 方法替换 div 的内容后，我在调用 jQuery 函数时遇到问题。在我访问了很多页面之后，我确定问题是由于以错误的方式使用 .on() 方法引起的，但我无法弄清楚出了什么问题。问题是 jQuery UI 滑块在加载 html 内容后不起作用。我认为解决方案可能很简单，但是当有数百人遇到类似问题时，我就是找不到正确的答案。

我使用一个 div 元素作为主体来显示其他 div 元素的内容。

```
<body>

<a href="#" content="#div1">load content</a>

<div id="body">static content with working UI slider 
 <div class="slider"></div> 
</div> 

 <div id="div1">loaded content where the UI slider is not working
  <div class="slider"></div>
 </div>

</body> 
```

我使用这个 jQuery 代码来动态加载 html 内容（和滑块）

```
$(".slider").slider(); 

$("body").on("click", "a", function(event) {

event.preventDefault();

var htmlContent = $($(this).attr("content")).html();

$("div#body").html(htmlContent);

}); 
```

代码可以在：http: [//jsfiddle.net/zTRFj/1/](http://jsfiddle.net/zTRFj/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:56:42.663

您正在序列化 HTML，因此旧元素全部被销毁，然后在新位置重建。

与其调用[`.html()`](http://api.jquery.com/html/)以将 HTML 作为字符串获取，不如调用[`.contents()`](http://api.jquery.com/contents/). 这将返回实际元素，并将保留任何绑定事件和引用：

```
$(".slider").slider(); 

$("body").on("click", "a", function(event) {
    event.preventDefault();

    var htmlContent = $( $(this).attr("content") ).contents();

    $("div#body").html(htmlContent);
}); 
```

# python - 不考虑大小的 Python 图像比较

> ID：14404731
> 
> 赞同：-2
> 
> 时间：2013-01-18T17:54:08.273
> 
> 标签：python, image, image-processing, python-imaging-library

我有两张图片，我想要一个响应（真或假）来知道它们是否不同。图片大小不一样。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T21:20:08.697

简单的虚拟方法：调整最大图像的大小以匹配最小图像的大小并进行比较。

考虑以下图像并分别从 1 到 4 枚举它们：

![在此处输入图像描述](../Images/402ff2832da3a16aa55d8a49db7f4977.png) ![在此处输入图像描述](../Images/86cff5dd370d2c0e9a0b67510b71250b.png) ![在此处输入图像描述](../Images/165d9b89d4c451e75e88be357deb3529.png) ![在此处输入图像描述](../Images/2b4ef82cd065e6ef1f4ef4e482dff808.png)

要比较两个图像`i`，`j`请使用 3-lobed lanczos 将它们中最大的一个调整为另一张的尺寸，这可以`PIL`通过do 方便地获得`img1.resize(img2.size, Image.ANTIALIAS)`。现在，您可以使用例如[比较 url 中的图像与 python 中的文件系统中的图像中描述的指标进行比较](https://stackoverflow.com/questions/13875989/comparing-image-in-url-to-image-in-filesystem-in-python/13884956#13884956)。

以下是分别使用链接答案中提供的度量 SSIM 和 NRMSE 的相似性结果：

图像 1
   -> 2：[0.98, 0.97]；
   -> 3: [0.96, 0.98];
   -> 4: [0.99, 0.99];

图片 2：
   -> 3：[0.98, 0.97]；
   -> 4: [0.98, 0.93];

图片 3：
   -> 4：[0.97, 0.98]。

这些值最大为 1，表示根据度量标准图像完全相同。因此，如您所见，这些值非常接近 1。您所要做的就是在附近选择一个阈值，`True`如果指标给出的结果高于阈值则返回，`False`否则返回。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T18:47:50.867

没有一种方法是完美的，但您可以尝试：

1.  定义定义为图像大小百分比的样本大小
2.  定义要采集的样本数量
3.  将样本区域分布在两个图像中
4.  在每个样本中，对样本区域中所有像素的颜色值进行平均
5.  对于每对平均样本区域颜色值，验证它们是否在一些小的误差范围内
6.  定义匹配样本数量的阈值，以在您感到满意的水平上平衡假阴性和假阳性
7.  如果满足阈值，则返回表示图像匹配的结果，否则返回表示它们不匹配的结果

因此，假设您从 2 张图像开始，尺寸分别为 100X100 和 200X200，并且您决定要在每个维度的 10% 处对区域进行采样，其中包含 4 个样本。您将平均并比较：

*   x0-9, y0-9 到 x0-19, y0-19
*   x90-99, y0-9 到 x180-199, y0-19
*   x0-9, y90-99 到 x0-9, y180-199
*   x90-99、y90-99 到 x180-199、y180-199

# mysql - 检查两个数组中的相同索引：IN (1,2,3) AND IN (A, B, C)

> ID：14404732
> 
> 赞同：2
> 
> 时间：2013-01-18T17:54:08.387
> 
> 标签：mysql, sql

我正在尝试在 MySQL 中配对两个数组。它们应该仅通过其索引匹配。这意味着如果 a = 1、b = 2 和 c = 3，则数组 (1,2,3) 将与数组 (a,b,c) 匹配并返回 1,2,3，而 (b,a, c) 不会。哪个应该只返回'3'。

**我的代码**

我有两个`arrays`要发送到 SQL 服务器。第一个是`ids`我要回答的问题。第二个是答案。

我已经这样做了：

```
SELECT
  id, title
FROM
  `questions` q
WHERE
  q.id IN (2, 4) AND q.answer IN ('Christoffer Columbus', 'Arnold Schwarzenegger')
; 
```

...这将检查`id`2 是否等于“Christoffer Columbus”**和**“Arnold Schwarzenegger”。因此，如果您在问题 1 和 2 中都回答“Christoffer Columbus”，那将是正确的。这不太好...... :-)

你能帮我解决这个问题吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T17:59:37.963

我想你正在寻找这个：

```
Select
  id, title
From
  `questions` q
Where
  (q.id = 2 And q.answer = 'Christoffer Columbus') Or
  (q.id = 4 And q.answer = 'Arnold Schwarzenegger')
; 
```

您需要为数组中的每一对添加类似的标准。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T18:16:37.993

+1 @Laurence 的回答，但 FWIW 您也可以使用元组比较来表达相同的条件，如下所示：

```
Where
  (q.id, q.answer) IN ((2, 'Christoffer Columbus'), (4, 'Arnold Schwarzenegger')) 
```

# objective-c - NSMutableArray 计数不随数组更新

> ID：14404737
> 
> 赞同：-1
> 
> 时间：2013-01-18T17:54:24.870
> 
> 标签：objective-c, binding, xcode4

我有一个像这样初始化的 NSMutableArray：

```
- (id)init
{
    self = [super init];
    if (self) {
        playlist = [[NSMutableArray alloc] init];
    }
    return self;
} 
```

并用它填充一张桌子。我有一种方法来计算数组中的项目数：

```
- (NSUInteger)trackCount
{
    tracks = [playlist count];
    NSLog(@"Number of tracks = %lx", tracks);
    return tracks;
} 
```

并且我有一个标签绑定到我的 appDelegate 与模型键路径`trackCount`，但是添加曲目时标签不会更新（日志也不会更新）。我究竟做错了什么？？

获取表中的行数是否更有意义和/或更容易，因为它们应该始终是相同的数字？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:59:14.427

您是否正确注册`playlist`为[依赖键](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVODependentKeys.html#//apple_ref/doc/uid/20002179-BAJEAIEE)

您需要指定播放列表对象的更改意味着该`trackCount`更改。

这都是[KVO 合规性](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/uid/10000177-BCICJDHA)的一部分。

**例子**

或多或少完全取自我给你的文档的链接。

将此添加到您的实现文件中：

```
+ (NSSet *)keyPathsForValuesAffectingValueForKey:(NSString *)key {

    NSSet *keyPaths = [super keyPathsForValuesAffectingValueForKey:key];

    if ([key isEqualToString:@"trackCount"]) {
        NSArray *affectingKeys = @[@"playlist"];
        keyPaths = [keyPaths setByAddingObjectsFromArray:affectingKeys];
    }
    return keyPaths;
} 
```

`keyPathsForValuesAffectingValueForKey:`是的一部分`NSKeyValueObservingProtocol`。

这个片段的作用是它说对播放列表的任何更改都会触发 trackCount 的更改。因此，当播放列表更改时，trackCount 的任何观察者都将收到有关 trackcount 可能更改的通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:57:04.007

要么你还没有初始化数组`playlist`。

```
playlist = [[NSMutableArray alloc] init]; 
```

或者你没有调用`trackCount`方法。

```
NSUInteger someValue=[self trackCount]; 
```

# c# - 在 WinForm .NET 应用程序中引用 System.Web 会产生不良影响吗？

> ID：14404738
> 
> 赞同：0
> 
> 时间：2013-01-18T17:54:34.100
> 
> 标签：c#, .net, winforms, system.web

我需要引用[`HttpUtility`](http://msdn.microsoft.com/en-in/library/system.web.httputility.aspx)Class，我主要使用`HttpUtility Class`.

即：

1.  `UrlDecode(String)`
2.  `UrlEncode(String)`
3.  `HtmlEncode(String)`
4.  `HtmlDecode(String)`

我的应用程序是多线程的，那么它是指应用程序的`System.Web`100%`Winform`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:58:39.117

在 .NET 4.5 中，您可以使用 System.Net.WebUtility，它具有您需要的所有方法，以下是信息：

[http://msdn.microsoft.com/en-us/library/system.net.webutility.aspx](http://msdn.microsoft.com/en-us/library/system.net.webutility.aspx)

无论如何，您都可以从 WinForms 应用程序中安全地引用 system.web。缺点是您不能使用客户资料，它对您的客户来说是一个较小的下载。例如，NET 3.5 客户端配置文件为 28 MB，而完整配置文件为 150 MB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-14T13:53:12.193

在解决方案资源管理器中，右键单击项目，选择 Add->Reference... 并选择 System.Web。

# python - numpy 读取某些字段有逗号的 CSV 文件？

> ID：14404744
> 
> 赞同：5
> 
> 时间：2013-01-18T17:54:45.387
> 
> 标签：python, csv, numpy, comma

我正在尝试使用`numpy.recfromcsv(...)`某些字段中包含逗号的位置来读取 CSV 文件。包含逗号的字段用引号括起来，即`"value1, value2"`. Numpy 将引用的字段视为两个不同的字段，并且效果不佳。我现在使用的命令是

```
 data = numpy.recfromcsv(dataFilename, delimiter=',', autstrip=True) 
```

我发现了这个问题

> [在 Python 的字段中读取带逗号的 CSV 文件](https://stackoverflow.com/questions/8311900/python-read-csv-file-with-comma-within-fields)

但它不使用`numpy`，我真的很喜欢使用。所以我希望这里至少有几个选项之一：

1.  有哪些选项`numpy.recfromcsv(...)`可以让我将带引号的字段读取为一个字段而不是多个逗号分隔的字段？
2.  我应该以不同的方式格式化我的 CSV 文件吗？
3.  （或者，但不理想）在引用的问题中读取 CSV，并使用额外的步骤来创建`numpy`数组。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:42:55.327

可以用[pandas](http://pandas.pydata.org/)做到这一点：

```
np_array = pandas.io.parsers.read_csv("file_with_comma_fields_quoted.csv").as_matrix() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T20:15:50.260

[如果您考虑使用本机 Python csv 阅读器，请在此处](http://docs.python.org/2/library/csv.html#csv-fmt-params)使用 Python 文档：

Python csv reader 定义了一些可选`Dialect.quotechar`选项，默认为`'"'`. 在 csv 格式标准中，quotechar 是另一个字段分隔符，分隔符（在您的情况下为逗号）可能包含在引用字段中。[本页](http://golang.org/pkg/encoding/csv/)第一部分明确了引用 csv 格式字符的规则。

因此，似乎使用默认引用字符 to `"`，本机 Python csv 阅读器可以在默认模式下管理您的问题。

如果你想坚持使用 Python，为什么不先清理你的 csv 文件，使用正则表达式来识别带引号的字段，并将分隔符从逗号更改`\t`为例如。但在这里，您实际上是在自己解析 csv 格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T21:45:09.040

事实证明，最简单的方法是使用标准库模块，`csv`将文件读入元组，然后使用元组作为 numpy 数组的输入。我希望我可以用 numpy 阅读它，但这似乎不起作用。

# go - 如何在 Go 中使用 RSA 密钥加密和解密纯文本？

> ID：14404757
> 
> 赞同：14
> 
> 时间：2013-01-18T17:56:12.217
> 
> 标签：go, rsa, encryption-asymmetric

我正在尝试编写一个实用程序，它使用 RSA 密钥对加密和解密纯文本文件。RSA 密钥是使用 ssh-keygen 生成的，并且像往常一样存储在 .ssh 中。

我无法理解如何使用 Go 语言加密和加密/rsa 包来做到这一点？关于这些的文档有点稀疏（更是如此，因为我是加密新手）并且示例很少。我检查了 rsa_test.go 文件是否有任何线索，但这只会让我更加困惑。

简而言之，我正在尝试从 .ssh 中的 id_rsa 和 id_rsa.pub 文件加载公钥/私钥对，并使用它们来加密/解密纯文本文件。

先感谢您！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-18T20:00:50.760

请记住，RSA 并非设计为分组密码。通常 RSA 用于加密对称密钥，然后用于加密数据。然而，考虑到这一点，这里有一个程序可以使用 RSA 私钥来加密可以自行解密的数据：

```
package main

import (
    "crypto/rand"
    "crypto/rsa"
    "crypto/sha1"
    "crypto/x509"
    "encoding/pem"
    "flag"
    "io/ioutil"
    "log"
)

// Command-line flags
var (
    keyFile = flag.String("key", "id_rsa", "Path to RSA private key")
    inFile  = flag.String("in", "in.txt", "Path to input file")
    outFile = flag.String("out", "out.txt", "Path to output file")
    label   = flag.String("label", "", "Label to use (filename by default)")
    decrypt = flag.Bool("decrypt", false, "Decrypt instead of encrypting")
)

func main() {
    flag.Parse()

    // Read the input file
    in, err := ioutil.ReadFile(*inFile)
    if err != nil {
        log.Fatalf("input file: %s", err)
    }

    // Read the private key
    pemData, err := ioutil.ReadFile(*keyFile)
    if err != nil {
        log.Fatalf("read key file: %s", err)
    }

    // Extract the PEM-encoded data block
    block, _ := pem.Decode(pemData)
    if block == nil {
        log.Fatalf("bad key data: %s", "not PEM-encoded")
    }
    if got, want := block.Type, "RSA PRIVATE KEY"; got != want {
        log.Fatalf("unknown key type %q, want %q", got, want)
    }

    // Decode the RSA private key
    priv, err := x509.ParsePKCS1PrivateKey(block.Bytes)
    if err != nil {
        log.Fatalf("bad private key: %s", err)
    }

    var out []byte
    if *decrypt {
        if *label == "" {
            *label = *outFile
        }
        // Decrypt the data
        out, err = rsa.DecryptOAEP(sha1.New(), rand.Reader, priv, in, []byte(*label))
        if err != nil {
            log.Fatalf("decrypt: %s", err)
        }
    } else {
        if *label == "" {
            *label = *inFile
        }
        out, err = rsa.EncryptOAEP(sha1.New(), rand.Reader, &priv.PublicKey, in, []byte(*label))
        if err != nil {
            log.Fatalf("encrypt: %s", err)
        }
    }

    // Write data to output file
    if err := ioutil.WriteFile(*outFile, out, 0600); err != nil {
        log.Fatalf("write output: %s", err)
    }
} 
```

# python - api v1.1 的单用户 OAuth 错误

> ID：14404759
> 
> 赞同：1
> 
> 时间：2013-01-18T17:56:16.550
> 
> 标签：python, twitter

我在使用 Twitter api 进行身份验证时遇到问题。我正在使用 Python 中的 oauth2 模块进行单用户登录。

我一直在使用以下函数来请求关注者 ID：

```
import oauth2 as oauth

def oauth_req(url, key, secret, http_method="GET", post_body=None, http_headers=None):
    consumer = oauth.Consumer(key=key, secret=secret)
    token = oauth.Token(key=key, secret=secret)
    client = oauth.Client(consumer, token)
    resp, content = client.request(
        url,
        method=http_method,
    )
    return content 
```

然后，我将按照以下示例从文档调用 twitter_auth.py 运行它：

```
ids = twitter_auth.oauth_req('https://api.twitter.com/1.1/followers/ids.json?cursor=-1&screen_name=marksandspencer', 'CONSUMER_KEY', 'CONSUMER_SECRET') 
```

然后它只返回以下内容：
'{"errors":[{"message":"Invalid or expired token","code":89}]}'

我似乎无法让它工作，我的应用程序详细信息很好并且没有过期 - 所以我假设它们可能在某种程度上是无效的 - 我只是无法弄清楚如何。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:20:02.500

您正在传递一个 CONSUMER_KEY 和一个 CONSUMER_SECRET 但不是 TOKEN_KEY 和 TOKEN_SECRET，因此您的令牌变量使用与您的消费者相同的凭据。访问令牌凭证需要通过您的代码或在 Twitter 网站上手动请求。

# javascript - 如何制作一个 总是停留在浏览器页面的顶部？

> ID：14404760
> 
> 赞同：0
> 
> 时间：2013-01-18T17:56:18.680
> 
> 标签：javascript, html, css, layout, positioning

我`<ul>`在页面顶部有一个显示导航项。目前它通过位置定位：绝对固定到位。代码：

```
#navigation
{
    text-align: center; 
    position: absolute; 
    float: left;    
    margin: 0;
    padding: 0;
    list-style-type: none;
}

#navigation li
{
    display: inline-block; 
    width: 150px;
    height: 110px;
    cursor: pointer;
} 
```

我想要做的是让这个导航栏保持粘在屏幕顶部，并且不受用户在页面下方滚动的影响。有点像这个页面：

[http://www.google.com/intl/en/enterprise/apps/business/products.html#drive](http://www.google.com/intl/en/enterprise/apps/business/products.html#drive)

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:59:24.227

将位置设置为“固定”

```
#navigation {
    text-align: center; 
    position: fixed; 
    top: 0;
    left: 0;
    float: left;    
    margin: 0;
    padding: 0;
    list-style-type: none; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T17:57:45.437

用途`top`和`left`性质：

```
#navigation
{
    text-align: center; 
    position: absolute; 
    float: left;    
    margin: 0;
    padding: 0;
    top: 0;
    left: 0;
    list-style-type: none;
} 
```

您也可以尝试设置`fixed`位置并将 设置为`z-index`大于其他元素的值。里面的 div`#navigation`必须`position: relative`获得相同的行为。

# android - 测试 Android 应用程序 - 如何执行数据库数据的设置？

> ID：14404762
> 
> 赞同：1
> 
> 时间：2013-01-18T17:56:26.957
> 
> 标签：android, database, testing, mocking

我有一个 android 应用程序，我的测试人员正在学习如何使用 robotsium 实现测试。该应用程序有一个实体（对象/pojo）存储在 sqlite 数据库中，其中包含 id、描述和一些其他信息。

我们需要一些如何在测试类中进行设置，以便应用程序具有一个具有确定 id、描述等的实体，可用于测试。

对于数据库访问，我们实现了一个 Dao 模式 + SQLiteOpenHelper 的扩展创建和管理使用 Robo Guice 注入到 Activity 类中的数据库的更新。到目前为止，我们还没有使用 ContentProviders（在 android 测试包中有一个 MockContentProvider 类），但如果这是最好的解决方案，我们可能会迁移到它。

设置实现的要求是不要将测试代码与应用程序代码混合。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:23:48.123

我不确定您所说的“设置实现的要求是不要将测试代码与应用程序代码混合。有什么建议吗？” 但我猜你的意思是你不想在测试中重用应用程序中的任何代码？？？

好吧，恐怕您最好的选择是让您编写代码来填充数据库，或者让他们运行应用程序以使其进入给定状态然后进行测试。亲自重用您的代码可能是最好的选择，但您必须以正确的方式构建它，并且取决于您要测试的内容。例如，如果您正在测试数据库中的某些内容是否正确显示，那么重用我们的代码就可以了。如果您正在测试将内容放入数据库是否有效，那么重用您的代码并不好，那么您应该运行应用程序以确保它正确保存到数据库中。

我喜欢看这个的方式是 BDD 风格，“给定”步骤中的任何事情都发生在过去，你的测试不应该关心它是如何发生的，只是它发生了所以它是如何进入那个状态的并不重要，在这些情况下，速度可能是最重要的部分。

# javascript - 压缩 If 条件

> ID：14404763
> 
> 赞同：0
> 
> 时间：2013-01-18T17:56:32.260
> 
> 标签：javascript

有没有这样一种方法可以压缩`if`语句中的条件块？从代码中可以看出，`itemKey`是一个变量。我将第一个字母设置为小写，以便将其与另一个变量匹配`letter`。下面的工作完美，但我想清理它。我可以以某种方式将所有这些`||`放在`&&`一起以包含所有数字 0-9 吗？这是作为一个`string`，不是`integer`。

```
firstLetterLower = itemKey.charAt(0).toLowerCase();
if(firstLetterLower==letter || (
   letter=='number' && (
      firstLetterLower=='0' || firstLetterLower=='1' || firstLetterLower=='2' || 
      firstLetterLower=='3' || firstLetterLower=='4' || firstLetterLower=='5' || 
      firstLetterLower=='6' || firstLetterLower=='7' || firstLetterLower=='8' || 
      firstLetterLower=='9'
   ))) { 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T18:00:03.180

您可以将这些测试替换为

```
firstLetterLower.match(/[0-9]/) 
```

或者

```
( firstLetterLower>=0 && firstLetterLower<=9 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:01:24.053

尝试使用正则表达式：

```
firstLetterLower.match(/^[0-9]/) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:06:43.427

使用正则表达式，您可以执行以下操作：

```
firstLetterLower = itemKey.charAt(0).toLowerCase();

if(firstLetterLower == letter || firstLetterLower.match(/^[0-9]$/) ){
} 
```

这将检查您指定`letter`的以及 0 到 9 之间的匹配。

但是，如果您不想使用正则表达式（可能是开销？并不是说这里使用 1 个非常简单的正则表达式会很明显），您可以执行以下操作：

```
firstLetterLower = itemKey.charAt(0).toLowerCase();

if(firstLetterLower == letter || (firstLetterLower >= 0 && firstLetterLower <= 9)){
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T18:08:19.007

您可以使用正则表达式和您所拥有的组合。我可能会将它放入一个函数中：

```
function isMatch(itemKey, letter) {
    firstLetterLower = itemKey.charAt(0).toLowerCase();
    if (firstLetterLower == letter) return true;

    if (letter == 'number'){
       if (firstLetterLower.match(/[0-9]/))
         return true;
        }
     return false;
}

alert("1:" + isMatch('item', 'i'));
alert("2:" +isMatch('1234567', 'number'));
alert("3:" +isMatch('abc','number'));
alert("4:" +isMatch('123','a')); 
```

# ruby - 未调用 Sinatra 内联模板

> ID：14404774
> 
> 赞同：0
> 
> 时间：2013-01-18T17:57:29.733
> 
> 标签：ruby, sinatra

我已经验证它`Merchant.find_all`正确地返回了一个包含许多元素的枚举器。但是，当我运行以下代码时，我得到一个空白页。为什么内联模板没有被重复调用并多次输出“hello”？

```
require 'sinatra'
require 'sinatra/reloader'
require 'sequel'
require_relative 'config/init'
require_relative 'merchant'

get '/' do
  Merchant.find_all.each do |m|
    erb :layout
  end
  ""
end

__END__

@@ layout
hello 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:27:10.637

您正在从路由块返回一个空字符串。返回 erb 结果。如果您确实想多次渲染该视图，则将每个结果保存`erb`到字符串缓冲区中并返回。

```
get '/' do
  result = ''
  Merchant.find_all.each do |m|
    result += erb(:layout)
  end
  result
end 
```

我从来没有真正尝试过这个，但我认为它会工作......

# vagrant - 流浪者'hostonlyif'创建不起作用

> ID：14404777
> 
> 赞同：24
> 
> 时间：2013-01-18T17:57:42.163
> 
> 标签：vagrant, archlinux

我试图在一个盒子上做一个流浪汉，我收到以下错误。

> INFO 接口：错误：使用 VBoxManage 执行以下命令时出错：["hostonlyif", "create"]

在 VAGRANT_LOG 上执行 INFO 时，我得到

```
ERROR vagrant: /opt/vagrant/embedded/gems/gems/vagrant-1.0.6/lib/vagrant/driver/virtualbox_base.rb:278:in `block in execute'
/opt/vagrant/embedded/gems/gems/vagrant-1.0.6/lib/vagrant/util/retryable.rb:14:in `retryable'
/opt/vagrant/embedded/gems/gems/vagrant-1.0.6/lib/vagrant/driver/virtualbox_base.rb:268:in `execute'
/opt/vagrant/embedded/gems/gems/vagrant-1.0.6/lib/vagrant/driver/virtualbox_4_2.rb:61:in `create_host_only_network'
/opt/vagrant/embedded/gems/gems/vagrant-1.0.6/lib/vagrant/action/vm/network.rb:276:in `create_hostonly_network'
/opt/vagrant/embedded/gems/gems/vagrant-1.0.6/lib/vagrant/action/vm/network.rb:229:in `hostonly_adapter'
/opt/vagrant/embedded/gems/gems/vagrant-1.0.6/lib/vagrant/action/vm/network.rb:36:in `block in call'
/opt/vagrant/embedded/gems/gems/vagrant-1.0.6/lib/vagrant/action/vm/network.rb:31:in `each'
/opt/vagrant/embedded/gems/gems/vagrant-1.0.6/lib/vagrant/action/vm/network.rb:31:in `call'
/opt/vagrant/embedded/gems/gems/vagrant-1.0.6/lib/vagrant/action/warden.rb:33:in `call'
/opt/vagrant/embedded/gems/gems/vagrant-1.0.6/lib/vagrant/action/vm/clear_network_interfaces.rb:26:in `call'
/opt/vagrant/embedded/gems/gems/vagrant-1.0.6/lib/vagrant/action/warden.rb:33:in `call' 
```

我尝试将`'hostonly'`vagrantfile 中的 替换为`'hostonlyif'`，但这会给出一条错误消息，指出它应该设置为`'hostonly'`. 我该如何解决这个错误？

主机运行的是archlinux，我使用的是最新版本的vagrant 和virtualbox。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-22T21:54:04.117

试试这个：sudo modprobe vboxnetadp

就我而言，它有效

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-10-29T10:45:32.793

我最近刚刚更新到 OS X 10.9 并且遇到了`vagrant up`.

如果您运行的是 VirtualBox 4.2 或更早版本，这应该可以工作：

`sudo /Library/StartupItems/VirtualBox/VirtualBox restart`

但是，如果您运行的是更新版本的 VirtualBox（4.3 或更高版本），请尝试：

`sudo launchctl load /Library/LaunchDaemons/org.virtualbox.startup.plist`

如本问题所述：[vagrant up failed, /dev/vboxnetctl: no such file or directory](https://stackoverflow.com/questions/18149546/vagrant-up-failed-dev-vboxnetctl-no-such-file-or-directory)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-05T10:12:35.037

就我而言，它也是：

```
sudo modprobe vboxnetflt 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-20T14:50:03.113

我遇到过类似的问题，只是根本没有明显的错误：根本就没有创建专用网络。在这种情况下，解决方案一如既往地愚蠢和简单：

```
$ pacman -S net-tools 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-10T05:31:56.847

看起来这是在 Mac OSX Mavericks (10.9) 上遇到的，这是一个权限问题。

您可以通过运行来修复它：

`sudo /Library/StartupItems/VirtualBox/VirtualBox restart`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-22T15:36:37.570

我没有看到您在问题中运行的 VirtualBox 版本，但对于 4.2.x 版本，前面的答案列出的命令：

```
sudo /Library/StartupItems/VirtualBox/VirtualBox restart 
```

应该解决您的问题。如果您运行的是 4.3.x，但与此命令等效的是：

```
sudo launchctl load /Library/LaunchDaemons/org.virtualbox.startup.plist 
```

这也将重新启动 VirtualBox 服务并解决您的问题。

作为旁注，我遇到了运行该命令将静默失败并导致 VirtualBox 发出与您描述的相同行为的问题。这通常是由于 VM 仍然处于活动状态而引起的，通常可以通过暂停或销毁您的 vagrant 实例或其他 VM 并重新运行命令来解决。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-01T11:08:11.270

我发现以上都不适用于 El Captian，以下是：

```
sudo "/Library/Application Support/VirtualBox/LaunchDaemons/VirtualBoxStartup.sh" restart 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-08T07:52:28.057

我解决了这个问题，只是重新启动我的 MAC，然后再次运行

```
vagrant up 
```

# ios - 使用 GLKit 和 OpenGL-ES，如何绘制两个三角形，一个有纹理，另一个是实体

> ID：14404779
> 
> 赞同：0
> 
> 时间：2013-01-18T17:57:44.113
> 
> 标签：ios, opengl-es, glkit

我是 OpenGL-ES 的新手，并且已经开始阅读 Buck 的[Learning OpenGL ES for iOS](https://rads.stackoverflow.com/amzn/click/com/B008PE3YHY)书籍。

第 2 章介绍了用纯色绘制三角形，第 3 章继续使用纹理。

作为个人学习练习，我正在尝试更改示例代码以绘制两个三角形；一个有质感，一个有质感。

似乎是一个非常基本的练习，但*作为一个 OpenGL-ES 初学者*- 被证明是棘手的。

到目前为止，我已经尝试了多种方法。

首先，我准备用 绘制`GLKVertexAttribPosition`，然后`GLKVertexAttribTexCoord0`。然后我用三角形 1 绘制我的顶点缓冲区。

接下来，我尝试了几件事，包括：

```
 glDisableVertexAttribArray(GLKVertexAttribTexCoord0); 
```

和

```
 GLuint name = self.textureInfo0.name;
    glDeleteTextures(1, &name); 
```

在绘制颜色属性之前：

```
[self.vertexBuffer prepareToDrawWithAttrib:GLKVertexAttribColor
                       numberOfCoordinates:3
                              attribOffset:offsetof(SceneVertex, colours)
                              shouldEnable:YES]; 
```

您可以在屏幕截图中看到左下三角形的纹理与顶点颜色属性混合。构成正方形的直角三角形完全是黑色的。

请注意，`prepareToDrawWithAttrib`方法调用是主要调用该`glVertexAttribPointer`方法的 Buck 实用程序类。

*重要的是要注意我在这里使用的是[GLKit](http://developer.apple.com/library/mac/#documentation/GLkit/Reference/GLKit_Collection/_index.html)，所以没有着色器或任何类似的东西。*

这是屏幕截图：

![在此处输入图像描述](../Images/57cf71650c66d24956b2be80a7e33d2b.png)

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:26:38.570

如果您开始使用 openGLES，我的建议之一是避免使用库（如 Buck 的实用程序类）。你必须很清楚你在做什么。不要在 GLKBaseEffect 上浪费时间。

启动一个 Xcode opengles 项目。移除所有 GLKBaseEffect 部分并开始使用着色器，在进行简单照明时并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:48:01.240

无法在 OpenGL 中渲染的原因可能有很多。例如，我想知道您是否正在使用错误的绕组设置第二个三角形（顺时针与逆时针）。

我会尝试在两个三角形之间切换颜色/纹理，看看是否可以在第二个三角形上获得纹理。

否则，如果您的示例中没有更多代码，很难说。

# delphi - 处理 TShellListView 后代中的文件删除

> ID：14404782
> 
> 赞同：7
> 
> 时间：2013-01-18T17:57:45.247
> 
> 标签：delphi, drag-and-drop, delphi-2010, windows-shell

我正在尝试创建一个接受从 Windows 资源管理器中删除的文件的 TShellListView 的后代。我想在我的组件定义中处理拖放，而不必在任何使用该组件的应用程序中实现它（我找到了接受从 Windows 资源管理器中删除的文件的示例，但都是在应用程序/TForm 级别）。

我在构造函数中调用 DragAcceptFiles()，并且为 WM_DROPFILES 定义了一个消息处理程序。但是，当我在示例项目中使用此组件并从 Windows 资源管理器中拖动文件时：

1.  我看到“不接受”图标（带斜线的圆圈），而不是表明我可以删除文件的指示。

2.  如果我确实尝试删除文件，我不会听到 Beep()。

我认为我没有正确地提醒 Windows 我的控件想要接受拖动的文件这一事实。谁能建议我缺少什么？

这是我的组件代码，去掉了无趣的部分：

```
 unit LJLShellListView;

    interface

    type

      TLJLShellListView = class(TShellListView)
      private
        procedure WMDropFiles(var Msg: TWMDropFiles); message WM_DROPFILES;
      published
        constructor Create(AOwner: TComponent);
      end;

    implementation

    uses ShellAPI;

    constructor TLJLShellListView.Create(AOwner: TComponent);
    begin
      inherited Create(AOwner);
      DragAcceptFiles(self.Handle, True);
    end;

    procedure TLJLShellListView.WMDropFiles(var Msg: TWMDropFiles);
    begin
      Beep();  // I never hear this.
    end;

    end. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T20:09:33.767

问题代码中的`DragAcceptFiles`调用需要 ShellListView 的窗口句柄。当代码访问 wincontrol 的句柄时，VCL 检查窗口是否已创建，如果没有，VCL 调用`CreateHandle`并继续创建窗口并返回其句柄。在这个阶段，问题中的代码成功注册了ShellListView的窗口进行文件拖放。但是有一个问题，控件还没有父级。当它要成为父级时，本机控件将被销毁，然后在其新父级中重新创建，当然会获得不同的句柄，从而使注册状态无效。

A control might get recreated for various other reasons too. For this reason, it is better to put our code in overriden `CreateWnd` and `DestroyWnd` methods, whenever the handle changes or the window is about to be destroyed, our code will run.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T19:31:29.657

正如@SertacAkyuz 所说，您问题的解决方案是覆盖`CreateWnd()`要调用的方法，`DragAcceptFiles()`而不是在构造函数中这样做。我只想提一下，在 Windows Vista 及更高版本下，用户界面特权隔离 (UIPI) 生效，因此如果您的应用程序在 UAC 下以提升状态运行，那么您还需要调用[`ChangeWindowMessageFilter()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632675.aspx)允许`WM_COPYGLOBALDATA`($0049) 和`WM_DROPFILES`消息从较低权限的进程（如 Windows 资源管理器）传递到您的应用程序，否则拖放将无法正常工作。

`WM_DROPFILES`已经弃用了很长时间，取而代之的[`IDropTarget`](http://msdn.microsoft.com/en-us/library/ms679679.aspx)是更强大、更灵活的新界面。新代码应该使用`IDropTarget`而不是`WM_DROPFILES`. 有关详细信息，请参阅 MSDN：

[使用拖放和剪贴板传输壳对象](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776905.aspx)

`IDropTarget`提供的灵活功能之一`WM_DROPFILES`是能够使用单个`IDropTarget`对象接受拖放，不仅在特定`HWND`的 .exe 文件上，而且在应用程序的 .exe 文件本身上，以及在 Shell 弹出菜单中使用它，甚至允许其他应用程序直接将数据传递给您的应用程序，而无需使用窗口消息或其他 IPC 机制。

# mysql - Django 查询集复杂查找

> ID：14404787
> 
> 赞同：0
> 
> 时间：2013-01-18T17:57:55.020
> 
> 标签：mysql, django

我希望使用 Django Query Set 以最佳方式解决这个问题。

每个图书馆只能拥有一本书。多个图书馆可以有同一本书的多个实例（即：Library1 可以有“Girl with the Dragon Tattoo”的实例，Library4 可以有另一个“Girl with the Dragon Tattoo”的实例）

```
Book(models.Model):
    name = models.CharField(max_length=30)

Library(models.Model):
    book = models.ForeignKey(Book)    # multiple libraries have the book
    city = models.CharField(max_length=50) 
```

那么我怎么能找到一本在少于 3 个图书馆的书呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:09:25.340

使用`annotate`和`Count`。

```
 Book.objects.annotate(n_libraries=Count('library')).filter(n_libraries__lt=3) 
```

# java - 如何将 Java 日历设置为特定的 UTC 时间？

> ID：14404789
> 
> 赞同：0
> 
> 时间：2013-01-18T17:58:12.900
> 
> 标签：java, calendar

当我这样做时：

```
Calendar c = Calendar.getInstance(TimeZone.getTimeZone("UTC"));
c.set(9999, 11, 31, 0, 0, 0);
SimpleDateFormat formatter = new SimpleDateFormat("dd-MMM-yy HH.mm.ss.SSSSSSSSS a");
String date = formatter.format(c.getTime());
assertEquals("31-Dec-99 00.00.00.000000000 AM", date); 
```

我明白了：99 年 12 月 30 日下午 18.00.00.000000318

如何获得我想要的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:02:23.390

在执行格式化之前，您还需要设置[格式化程序的时区](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setTimeZone%28java.util.TimeZone%29)。

```
formatter.setTimeZone(c.getTimeZone()); 
```

否则它将使用平台默认时区。

* * *

**与具体问题无关**，日历不保持纳秒，因此格式化后该部分可能仍然有点偏离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:02:34.393

您正在创建一个`SimpleDateFormatter`没有指定时区的 - 因此默认情况下它将使用系统本地时区。如果您希望格式化程序也使用 UTC，只需设置它。

请注意，一个`Date`值与时区无关——它*只是*自 Unix 纪元以来的毫秒数。它不知道最初用于创建它的时区。这就是为什么您需要调用`setTimeZone`格式化程序（或使用带区域的构造函数）。

毫秒中的 318 表明您的原始`Date`值包含 318 的毫秒分量。`java.util.Date`无论如何 A 仅支持毫秒的分辨率，因此您应该`SSS000000`在格式中使用...并且无论如何您都应该将毫秒值设置为 0：

```
c.set(Calendar.MILLISECOND, 0); 
```

（令人讨厌的是，设置“年、月、日、小时、分钟、秒”不会重置毫秒值。对我来说似乎很疯狂，但是......）

附带说明一下，内置的 Java 日期/时间 API 在各个方面都非常糟糕。您可能很想考虑使用[Joda Time](http://joda-time.sf.net)来代替......

# jacoco - jacoco 在使用 ant 时不排除类

> ID：14404790
> 
> 赞同：9
> 
> 时间：2013-01-18T17:58:14.797
> 
> 标签：jacoco

我无法让 jacoco/junit ant 目标从覆盖范围中排除类。我可以通过以下方式排除软件包：

```
<jacoco:coverage destfile="${coverage.reports.dir.xml}/output.jacoco" excludes="foo.*:bar.fiz.*:my.long.package.name.*"> 
```

这并不排除我的测试类，因为测试类与他们测试的类在同一个包中。我已经厌倦了用正则表达式排除测试类，但它不起作用。

```
<jacoco:coverage destfile="${coverage.reports.dir.xml}/output.jacoco" excludes="foo.*:bar.fiz.*:**/Test.*:**/Tests.*"> 
```

我也尝试在报告任务中只包含我想要的类，但是由于我们的测试类位于不起作用的相同包中。我们的构建将所有类放在同一个目录中，例如 buildRoot/classes/ProjectName。因此 buildRoot/classes/ProjectName/foo 将包含已编译的测试类和非测试类。

有什么建议如何让 jacoco 排除此设置中的所有测试？

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-19T21:13:57.710

指定具有 的类`jacoco:coverage`会将它们排除在覆盖范围之外，因此它们在报告中显示为具有 0% 的覆盖率。

为了也从 JaCoCo 报告中排除这些类，您需要使用 classfiles 文件集任务并在`jacoco:report`ant 任务中排除它们。

```
<jacoco:report>
  <executiondata>
    <file file="${coverage.reports.dir.xml}/merged-jacoco.exec"/>
  </executiondata>
  <structure name="Unit Tests ${unit.test.run.ts}">
    <classfiles>
      <fileset dir="${build.root}/classes/ProjectName/" >
        <exclude name="**/*Test*.class" />
      </fileset>
    </classfiles>
    <sourcefiles encoding="UTF-8">
      <fileset dir="${src.root}/ProjectName/src/main"/>
    </sourcefiles>
  </structure>

  <html destdir="${coverage.reports.dir.html}"/>
</jacoco:report> 
```

# python - 过滤具有动态定义的数据集

> ID：14404793
> 
> 赞同：0
> 
> 时间：2013-01-18T17:58:25.457
> 
> 标签：python, database

所以我有一个相当大的数据集，看起来像这样：

```
data=[['O', '3C-1', '100', '100', '67.848600000000005', '0.00021722920782039196', '3.4565635', '1.3', '0.7', '0.38673693', '0.618034', '30.0', '-2.0097724299999977'],
['I', '1C-2', '150', '150', '101.77200000000001', '9.6548022169817182e-05', '3.46454077', '1.3', '0.7', '-1.77373911', '-1.70838786', '30.0', '-1.8860072499999994'],
['O', '3C-2', '250', '250', '169.62', '3.4757287981134192e-05', '3.48710222', '1.3', '0.7', '-6.81997504', '-3.94866255', '30.0', '-1.5686071800000005'],
['O', '3C-2', '500', '500', '339.23899999999998', '8.6893732236788835e-06', '3.23954068', '1.3', '0.7', '19.05924395', '2.15260466', '30.0', '-1.0255009299999993']] 
```

然后我有一个看起来像这样的定义：

```
def mdata(a=None,b=None,c=None,d=None):
    filt=[]
    for num,a in enumerate([a,b,c,d]):
        if a==None: continue
        filt.append([a,num])
    data=creader(open(stuff.csv'))
    for a,num in filt:
        data=[x for x in data if a in x[num]]
    for a in data: print a 
```

a,b,c,d 处理数据集的前四列。因此，如果我调用 mdata() 它会返回整个数据集，但如果指定 data(a='O') 它只会返回第一列有 O 的数据。

除了列 c 和 d 之外，这工作正常，因为它们应该是整数。例如，如果我指定 mdata(c='10')，我将获得第三列包含 10 的所有数据集（100、5103 等）。我可以在这里设置一个条件来有条件地搜索字符串或将有问题的数据转换为 int，但我无法使条件正确，而且这似乎也是一种非常糟糕的方法。如何改进？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:32:19.867

您可以子类`list`化以添加将列名映射到每个元素的子元素的能力，然后提供过滤机制。以下将像常规列表一样工作，除了如果元素没有`len`与列表期望元素具有的列数相同的元素，您将无法添加，并且您将能够迭代其中过滤的元素，如您所愿，使用`filtered_by()`. 提供给初始化程序的任何列名都将是`filtered_by()`.

```
class FilterableList(list):

    def __init__(self, column_names, initial_data=None):
        if initial_data is not None:
            list.__init__(self, initial_data)
        else:
            list.__init__(self)
        self.column_names = column_names

    def __setitem__(self, index, value):
        if len(value) != len(self.column_names):
            raise ValueError('Rows must have the correct number of columns.')
        list.__setitem__(self, index, value)

    def append(self, value):
        if len(value) != len(self.column_names):
            raise ValueError('Rows must have the correct number of columns.')
        list.append(self, value)

    def extend(self, values):
        for value in values:
            self.append(value)

    def filtered_by(self, **filters):
        try:
            filters = [(self.column_names.index(filter[0]), filter[1]) for filter in filters.iteritems()]
        except ValueError:
            raise ValueError('Tried to apply filter with invalid column name.')
        for row in self:
            for index, value in filters:
                if row[index] != value:
                    continue
                yield row

data = FilterableList(('a', 'b', 'c', 'd'))
data.extend(((1,2,3,4), (2,2,5,6), (3,4,7,8)))
for row in data.filtered_by(b=2, c=5):
    print row 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T21:47:31.943

我强烈建议您查看[pandas](http://pandas.pydata.org/)库。

这就是它使事情变得非常容易的事情。

首先，加载数据：

```
>>> data = pd.read_csv("op.csv", index_col=False)
>>> data
   0     1    2    3         4         5         6    7    8          9        10  11        12
0  O  3C-1  100  100   67.8486  0.000217  3.456564  1.3  0.7   0.386737  0.618034  30 -2.009772
1  I  1C-2  150  150  101.7720  0.000097  3.464541  1.3  0.7  -1.773739 -1.708388  30 -1.886007
2  O  3C-2  250  250  169.6200  0.000035  3.487102  1.3  0.7  -6.819975 -3.948663  30 -1.568607
3  O  3C-2  500  500  339.2390  0.000009  3.239541  1.3  0.7  19.059244  2.152605  30 -1.025501 
```

选择一列，找出哪些值是`"O"`：

```
>>> data['0']
0    O
1    I
2    O
3    O
Name: 0
>>> data['0'] == "O"
0     True
1    False
2     True
3     True
Name: 0 
```

只获取那些行：

```
>>> data[data['0'] == "O"]
   0     1    2    3         4         5         6    7    8          9        10  11        12
0  O  3C-1  100  100   67.8486  0.000217  3.456564  1.3  0.7   0.386737  0.618034  30 -2.009772
2  O  3C-2  250  250  169.6200  0.000035  3.487102  1.3  0.7  -6.819975 -3.948663  30 -1.568607
3  O  3C-2  500  500  339.2390  0.000009  3.239541  1.3  0.7  19.059244  2.152605  30 -1.025501 
```

按第一个值对行进行分组：

```
>>> for val, rows in data.groupby("0"):
...     print val
...     print rows
...     
I
   0     1    2    3        4         5         6    7    8         9        10  11        12
1  I  1C-2  150  150  101.772  0.000097  3.464541  1.3  0.7 -1.773739 -1.708388  30 -1.886007
O
   0     1    2    3         4         5         6    7    8          9        10  11        12
0  O  3C-1  100  100   67.8486  0.000217  3.456564  1.3  0.7   0.386737  0.618034  30 -2.009772
2  O  3C-2  250  250  169.6200  0.000035  3.487102  1.3  0.7  -6.819975 -3.948663  30 -1.568607
3  O  3C-2  500  500  339.2390  0.000009  3.239541  1.3  0.7  19.059244  2.152605  30 -1.025501 
```

等等：

```
>>> data[data['0'] == "O"]["4"]
0     67.8486
2    169.6200
3    339.2390
Name: 4
>>> data[data['0'] == "O"]["4"].mean()
192.23586666666665 
```

这让我的生活变得轻松多了。

# php - 在 php 中使用工厂模式构建汽车对象

> ID：14404794
> 
> 赞同：0
> 
> 时间：2013-01-18T17:58:25.687
> 
> 标签：php, object, factory, factory-pattern

我正在寻求一些帮助，我已经编写了一个工厂模式，几乎可以满足我的需求，接受它会根据参数返回一个新类。

我需要的是一个工厂模式，它接受一些东西并返回一个汽车类型的对象。这辆车将包含诸如类型、型号、年份、品牌和里程表读数等信息。

这是我到目前为止所做的：

```
<?php
class Car_Factory_Pattern{

    protected $_instance;

    protected $_dependencies;

    public function getInstance(){
        if(null == self::$_instance){
            self::$_instance == new self();
        }

        return self::$_instance;
    }

    public function create($class){
        if(empty($class)){
            throw new Exception('Cannot declare and empty class.');
        }

        if(!isset(self::$_dependencies)){
            throw new Exception('The $dependencies are not set for this class');
        }

        if(!isset(self::$_dependencies[$class])){
            throw new Exception('This class does not exist in the dependencies array');
        }

        if(isset(self::$_dependencies[$class]['params'])){
            $new_class =  new $class(implode(', ', self::$_dependencies[$class]['params']));
            return $new_class;
        }else{
            $new_class = new $class();
            return $new_class;
        }       
    }

    public function registerDependencies(array $array){
        self::$_dependencies = $array;
    }
} 
```

您需要的数据结构是：

函数依赖（）{

```
$dependencies = array(
    'Car_Class' => array(
        'params' => array(
            'Type',
                            'Model',
                            ...
        ),
    ),          
);

return $dependencies; 
```

}

然后，您通过执行以下操作来实例化该类：

```
$factory = Car_Factory_Pattern()::getInstance();
$factory->registerDependencies(dependencies()); 
```

然后让我这样做：

```
$some_car = Car_Factory_Pattern()::create('Car_Class'); 
```

问题在于我基本上对依赖项进行了硬编码，这适用于我正在处理的另一个应用程序，但是 - 我需要这个类做的是读取类型、模型、品牌、年份和 odom 并给出我返回一个汽车类型的对象，无论您传入什么，我都可以创建一个带有一系列选项的类，我希望工厂模式能为我做到这一点 - 除非我弄错了？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:14:42.567

```
$new_class =  new $class(implode(', ', self::$_dependencies[$class]['params'])); 
```

该代码段将生成如下内容：

```
$new_class =  new $class('Type,Model,Etc,Etc,will automaticly get more values depending on your array'); 
```

那是你真正想要的吗？如果您想将它们作为参数传递，您可以使用`ReflectionClass`该类。

如果您愿意将所有“参数”作为数组传递，那会更容易：

在“Example_Car”类中，您可以使用以下内容：

```
class Example_Car {
 private $aVariables = array();

 public function __construct( $aData = array() ) {
  $this->aVariables = $aData;
 }

 public function __get( $sKey ) {
  return isset($this->aVariables[$sKey]) ? $this->aVariables[$sKey] : NULL;
 }
}

$factory = Car_Factory_Pattern()::getInstance();
$factory->registerDependencies(dependencies());

$some_car = Car_Factory_Pattern()::create('Example_Car');

var_dump( $some_car->Type, $some_car->Model ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:39:47.890

这就是我对工厂的想法。该类为每个新类保留一个单例，并且所有汽车类都扩展了一个基础 car_class，它使您能够设置依赖关系。这种方法每次都节省资源来创建一个新的汽车对象感谢@NiclasLarsson 的神奇get

```
<?php
class Car_Factory_Pattern{

    protected $_instance;

    public static function getInstance($class){
        if(null == self::$_instance){
            self::$_instance[$class] = new $class();
        }
        return self::$_instance[$class];

    }
}

class Base_Car {
 private $aVariables = array();

 public function __construct( ) {
   // to oveload
 }
 public function populate( $aData = array() ) {
  $this->aVariables = $aData;
 }

 public function __get( $sKey ) {
  return isset($this->aVariables[$sKey]) ? $this->aVariables[$sKey] : NULL;
 }
}

class Example_Car extend Base_Car {

 public function __construct( ) {
   // do heavy initialization
 }

  // other functions

}

$car = Car_Factory_Pattern::getInstance('Example_class');
$car->populate(depencies()); 
```

添加

使用@NiclasLarsson Example_Car 类

```
class Forge_Car{

  public static function create($class,$depencies){
    return new $class($depencies);
  }
}

$car = Forge_Car::create('Example_Car', depencies()); 
```

# javascript - 带有 showmodaldialog 的会话超时警报

> ID：14404797
> 
> 赞同：0
> 
> 时间：2013-01-18T17:58:29.967
> 
> 标签：javascript, jquery

我的应用程序具有会话超时功能。每当会话超时发生时都会显示弹出窗口。应用程序具有用于各种操作的模式对话框。如果用户没有打开任何弹出窗口，则会话超时窗口显示没有任何问题。如果用户在弹出窗口中，则会话超时窗口在弹出窗口后面运行。

我的会话超时警报有

寡妇.focus();

但它仍然出现在弹出窗口的后面。有什么可以放在模态弹出窗口的前面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:41:28.840

取决于信息，您的代码如何工作。

但也许有一个简单的问题：当你创建超时对话框时，让他给他巨大的`z-index`价值。

例如：

```
#timeoutDialog {
    z-index: 1000;
} 
```

标准对话框使用 z-index 100+，有时更多。如果 1000 不起作用，请尝试更大的值。

# watir - 用 watir 查找 span id

> ID：14404800
> 
> 赞同：1
> 
> 时间：2013-01-18T17:58:42.330
> 
> 标签：watir

在网站上，有一个由用户通过单击浏览按钮然后选择文件来填充的字段。我不知道如何让 watir 填充它。几年前我们运行了测试用例，发现它`browser.fileField(:id,"file01").set(x)`但不再有效。

```
irb(main):154:0>  bowser.fileField(:id,"file01").exists?
NoMethodError: undefined method `fileField' for #<Watir::IE:0x35de4d8>
        from (irb):154
        from C:/Ruby193/bin/irb:12:in `<main>' 
```

我可以找到它，但还没有比这更远：

```
irb(main):159:0> browser.form(:id, '104').span(:id, "file_1").exists?
=> true 
```

这是代码：

```
<form id="104" onsubmit="return validateForm();" method="post" >
<input type="hidden" value="1" name="create">
<input id="external" type="hidden" value="0" name="external">
<table class="text fullWidth" cellspacing="0" summary="Sending Form">
<tbody>
<tr>
<script type="text/javascript">
<tr>
<tr>
<tr>
<tr>
<td class="fRequired">
<td class="fText">
<table class="fInput">
<tbody>
<tr>
<td>
<span id="file_01">
<input id="file01" class="fFile" type="file" onchange="writename(this.value, shortfile1'); return true;" tabindex="2" name="file01">
<span id="shortfile1"> aby.JPG</span>
</span>
<br>
<span id="file_02">
<br> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:37:52.000

试试这个：

```
browser.file_field(:id => "file01").set(x) 
```

供将来参考，watir-classic gem 的 API 在这里：[http ://rdoc.info/gems/watir-classic](http://rdoc.info/gems/watir-classic)

# css - 随机背景图片 CSS | 导轨

> ID：14404801
> 
> 赞同：3
> 
> 时间：2013-01-18T17:58:49.647
> 
> 标签：css, ruby-on-rails, random, background, selected

```
html{ 
    background: url(/assets/flower.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;   
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

如何使此代码从选定数量的图片中随机选择作为背景。我正在使用 Rails 3，所以请记住这一点，如果这会简化这项工作的过程。谢谢！:D

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T18:10:53.527

最简单的方法是创建一个重定向到随机图像的操作，浏览器将遵循重定向。

应用程序/控制器/background_controller.rb

```
class BackgroundController < ApplicationController
  def image
    redirect_to "/assets/images/background_#{rand(10)}.jpg"
  end
end 
```

这将随机重定向到 和 之间的背景`background_0.jpg`图像`background_9.jpg`

配置/路由.rb

```
Something::Application.routes.draw do
  …
  get '/random_background.jpg', to: 'background#image'
  …
end 
```

css

```
html{ 
  background: url(/random_background.jpg) no-repeat center center fixed;
} 
```

* * *

一些更高级的方法是在中间件中执行类似的操作，因此这样的请求不需要如此完整的 rails 堆栈。

应用程序/中间件/random_background_middleware.rb

```
class RandomBackgroundMiddleware
  def initialize(app, count = 10)
    @app = app
    @count = count
  end

  def call(env)
    if env["PATH_INFO"] == "/random_background.jpg"
      [302, {"Location" => "/assets/images/background_#{rand(@count)}.jpg")}, '']
    else
      @app.call(env)
    end
  end
end 
```

`config/application.rb`

```
config.middleware.insert_before 0, "RandomBackgroundMiddlware" 
```

`insert_before 0`用于将其放置在 Middleware-Chain 的顶部

* * *

或者更好的是在你的网络服务器配置中是这样的。但我不知道如何或是否可以做到这一点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-18T18:20:27.877

在要显示背景图像的视图文件中，添加此行

```
<style type="text/css">
  html {
    background: url(<%= randomized_background_image %>) no-repeat center center fixed; 
  }
</style> 
```

现在在你的 application_helper

```
def randomized_background_image
  images = ["assets/foo.jpg", "assets/random.jpg", "assets/super_random"]
  images[rand(images.size)]
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-02T00:32:40.397

我通过在视图中创建一个随机类名来做到这一点，如下所示：

```
<div class="homepage-banner-<%= rand(1..10) %>"> 
```

然后我像这样在我的css中添加了多个图像：

```
.homepage-banner-1
  background-image: image-url('homepage/homepage-feature-1.jpg')

.homepage-banner-2
  background-image: image-url('homepage/homepage-feature-2.jpg')

.homepage-banner-3
  background-image: image-url('homepage/homepage-feature-3.jpg')

etc. 
```

不确定这是否是最好的方法，但它非常简单。

# jquery - jQuery datepicker 不适用于 iPad

> ID：14404802
> 
> 赞同：0
> 
> 时间：2013-01-18T17:58:51.040
> 
> 标签：jquery, ipad, jquery-ui-datepicker

```
 $(function () {
        $('.Month-Picker').datepicker({
            changeMonth: true,
            changeYear: true,
            showButtonPanel: false,
            dateFormat: 'MM-yy',
            onClose: function (dateText, inst) {
                var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
                var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
                $(this).datepicker('setDate', new Date(year, month, 1));
                $("#<%=btnMonthYear.ClientID %>").click();
            },
            beforeShow: function (input, inst) {
                if ((datestr = $(this).val()).length > 0) {
                    year = datestr.substring(datestr.length - 4, datestr.length);
                    month = jQuery.inArray(datestr.substring(0, datestr.length - 5), $(this).datepicker('option', 'monthNames'));
                    $(this).datepicker('option', 'defaultDate', new Date(year, month, 1));
                    $(this).datepicker('setDate', new Date(year, month, 1));
                }
            }
        });
    }); 
```

我有一个 jQuery 日期选择器，通过它我可以选择“月-年”它可以在除 iPad 之外的所有浏览器上正常工作。请查看随附的图片。 ![jQuery Datepicker 出错](../Images/64ba5aed9346931f8738e8be182509ab.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:47:03.003

```
var postForm = false;

    $(function () {
        $('.Month-Picker').datepicker({
            changeMonth: true,
            changeYear: true,
            showButtonPanel: false,
            dateFormat: 'MM-yy',
            onChangeMonthYear: function () { postForm = true; },
            onClose: function (dateText, inst) {
                var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
                var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
                $(this).datepicker('setDate', new Date(year, month, 1));
                $("#<%=btnMonthYear.ClientID %>").click();
            },
            beforeShow: function (input, inst) {
                if ((datestr = $(this).val()).length > 0) {
                    year = datestr.substring(datestr.length - 4, datestr.length);
                    month = jQuery.inArray(datestr.substring(0, datestr.length - 5), $(this).datepicker('option', 'monthNames'));
                    $(this).datepicker('option', 'defaultDate', new Date(year, month, 1));
                    $(this).datepicker('setDate', new Date(year, month, 1));
                    postForm = false;
                }
            }
        });
    });

    $(document).ready(function () {
        $("#aspnetForm").click(function () {
            if (postForm == true) {
                postForm = false;
                var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
                var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
                $(this).datepicker('setDate', new Date(year, month, 1));
                $("#<%=btnMonthYear.ClientID %>").click();
            }
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:26:38.173

我建议你使用 chrome 开发者工具。(F12)

设置>覆盖>“用户代理”选择 iPad。

Chrome 和 Safari 都使用 WebKit。您可以轻松模拟 iPad 并进行调试。

# rdf - 查询英文城市/州/国家摘要

> ID：14404805
> 
> 赞同：1
> 
> 时间：2013-01-18T17:58:57.793
> 
> 标签：rdf, sparql, dbpedia

我正在尝试从 DBpedia 查询城市、州和国家/地区的英文摘要，结果不一。它似乎适用于 City 和 Country，但不适用于 State。

```
SELECT * WHERE {
  ?x rdfs:label "France"@en.
  ?x dbpedia-owl:abstract ?abstract.
  FILTER (LANG(?abstract) = 'en')
} 
```

或者

```
SELECT * WHERE {
  ?x rdfs:label "Boston"@en.
  ?x dbpedia-owl:abstract ?abstract.
  FILTER (LANG(?abstract) = 'en')
} 
```

但是，这些查询没有找到任何结果：

```
SELECT * WHERE {
  ?x rdfs:label "Sao Paulo"@en.
  ?x dbpedia-owl:abstract ?abstract.
  FILTER (LANG(?abstract) = 'en')
}

SELECT * WHERE {
  ?x rdfs:label "Massachusetts"@en.
  ?x dbpedia-owl:abstract ?abstract.
  FILTER (LANG(?abstract) = 'en')
} 
```

首先，如何将搜索过滤到仅城市、州或国家？第二，如何在法国找到马萨诸塞州或罗纳州等州？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:45:31.250

SPARQL 查询（不带`OPTIONAL`）仅返回所有三元组模式都可以匹配的结果。对于不返回结果的查询，这意味着以下有关资源 ?x 的一个或多个语句不可用：

*   有一个`rdfs:label`“圣保罗”
*   “Sao Paulo”标签是带有语言标签的英文
*   有一个`rdfs:abstract`
*   摘要是带有语言标签的英文

在此示例中，您可能想要查找`<http://dbpedia.org/resource/Sao_Paulo>`. 此资源的标签不是“Sao Paulo”，而是“São Paulo”。

第二个查询对我有用（马萨诸塞州），但需要一些时间才能完成。

要将结果限制为特定类型的资源（如城市、州或国家/地区），您需要指定类型。在 RDF 中，资源的类型（或者更确切地说是“类”）使用`rdf:type`. 你可以用同样的方式查询：

```
SELECT * WHERE {
  ?x rdfs:label "São Paulo"@en.
  ?x rdf:type dbpedia-owl:Settlement.
  ?x dbpedia-owl:abstract ?abstract.
  FILTER (LANGMATCHES(LANG(?abstract), 'en'))
} 
```

`rdf:type`您可以使用简写代替，您可以将`a`其读作“?x*是*?y”。
此外，`LANGMATCHES(LANG(?abstract), 'en')`评估可能比 更有效`LANG(?abstract) = 'en')`。

请注意，此资源`dbpedia:São_Paulo`不在`dbpedia-owl:City`DBpedia 中，因为它是 Wikipedia 上的自治市：[http](http://en.wikipedia.org/wiki/S%C3%A3o_Paulo) ://en.wikipedia.org/wiki/S%C3%A3o_Paulo 。同样，`dbpedia:Massachusetts`不定义为状态。不过，两者都是[dbpedia-owl:PopulatedPlace](http://dbpedia.org/ontology/PopulatedPlace)。

# java - 平面图生成：欧拉公式并不总是有效？

> ID：14404806
> 
> 赞同：0
> 
> 时间：2013-01-18T17:58:58.960
> 
> 标签：java, graph, planar-graph

我正在尝试为平面图生成构建一些算法。我已经阅读了很多关于这个主题的材料，这里有一些结果：

```
public Graph graph;
...

public Level(int numPoints, int numEdges, int levelID, int timeLim) 
{
        this.graph = new Graph(numPoints, numEdges);
    this.graph.GeneratePlanarGraph();
        ...
} 
```

**在这里，我写了一些构建平面图的函数......**

```
public void GeneratePlanarGraph() {
    if(this.edges_num < this.vertices_num) {
        System.out.println("erroe: number of edges mast be\n "+
                    "bigger than number of vertices\n");
        return;
    }

    int edges = 0;

    // add vertices to graph
    for(int i = 0 ; i < this.vertices_num ; i++) 
            this.AddVertex(i+1);

    // connect all vertices to circular list 
    // ( from each vertex 2 connections )       
    for(int i = 1 ; i <= this.vertices_num ; i++) {
        if(i < this.vertices_num) this.AddEdge(i, i+1);
        else this.AddEdge(i, 1);
        edges++;
    }

    //connect other edges if its exist
    int step = 2;
    while(edges < this.edges_num) {
        for(int i = 1 ; i <= this.vertices_num ; i++) {
            if(i + step <= this.vertices_num) {
                this.AddEdge(i, i + step);
                edges++;
                if(edges == this.edges_num) break;
            }
            else {
                this.AddEdge(i, (i + step) - this.vertices_num);
                edges++;
                break;
            }
        }
        step++;
    }
} 
```

当我启动我的程序时，它会以这种方式生成许多平面图：

```
for(int i = 0 ; i < 100 ; i++)
{
    levels[i] = new Level(numPoints, numEdges,  levelID,  timeLim);
} 
```

所有这些代码都有效，但我发现在测试图形（级别）24、36、...时不是平面的。

我知道欧拉公式，所以我尝试通过欧拉公式生成我的顶点/边，但正如我所见，它并没有真正起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T22:03:05.480

首先，请放心，欧拉公式仍然成立。

我可以看到你的算法有几个问题（除了风格）：

*   它不适用于奇数 V（顶点数）和足够高的 E（边数）；更准确地说：对于 V = 2k+1 和 E >= 2V，结果图将不是平面的
*   对于 E > 2V，它不会按预期工作。根据您的`AddEdge`操作，它会生成一个在相同顶点之间具有更多边的多重图，或者生成一个边数少于所需的图。
*   它只产生（在它工作的情况下）一类非常特殊的平面图，而且，在我看来，这不是一个非常有趣的类。

# joomla1.5 - 与 VirtueMart 关联 Webgains

> ID：14404807
> 
> 赞同：0
> 
> 时间：2013-01-18T17:59:01.430
> 
> 标签：joomla1.5, virtuemart, affiliate

实际上，我将 joomla 与美德玛特一起使用，我想在感谢页面中添加 WebGains 的代码，问题是代码永远无法与 WebGains 正确连接

代码是 javascript 和 WebGains 的调用 url

```
<!-- <webgains tracking code> -->
<script language="javascript" type="text/javascript">

var wgOrderReference = "myorderreference";
var wgOrderValue = "0";
var wgEventID = 1341771;
var wgComment = "";
var wgLang = "es_ES";
var wgsLang = "javascript-client";
var wgVersion = "1.2";
var wgProgramID = 73451;
var wgSubDomain = "track";
var wgCheckSum = "";
var wgItems = "";
var wgVoucherCode = "";
var wgCustomerID = "";

if(location.protocol.toLowerCase() == "https:") wgProtocol="https";
else wgProtocol = "http";

wgUri = wgProtocol + "://" + wgSubDomain + ".webgains.com/transaction.html" + "?wgver=" + wgVersion + "&wgprotocol=" + wgProtocol + "&wgsubdomain=" + wgSubDomain + "&wgslang=" + wgsLang + "&wglang=" + wgLang + "&wgprogramid=" + wgProgramID + "&wgeventid=" + wgEventID + "&wgvalue=" + wgOrderValue + "&wgchecksum=" + wgCheckSum + "&wgorderreference="  + wgOrderReference + "&wgcomment=" + escape(wgComment) + "&wglocation=" + escape(document.referrer) + "&wgitems=" + escape(wgItems) + "&wgcustomerid=" + escape(wgCustomerID) + "&wgvouchercode=" + escape(wgVoucherCode);
document.write('<sc'+'ript language="JavaScript"  type="text/javascript" src="'+wgUri+'"></sc'+'ript>');

</script>
<noscript>
<img src="http://track.webgains.com/transaction.html?wgver=1.2&wgprogramid=7401&wgrs=1&wgvalue=0&wgeventid=11771&wgorderreference=myorderreference&wgitems=&wgvouchercode=&wgcustomerid=" alt="" />
</noscript>
<!-- </webgains tracking code> --> 
```

我从 db 和 right 获得订单 id 和总价的值，但是当我进入附属管理系统时，WebGains 的代码没有显示，没有显示付款或产品等

如果你能帮助我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:08:17.603

关于您上面的跟踪代码示例，我可以看到这存在一些问题，这就是为什么它不能正确跟踪的原因。

我可以看到您在西班牙平台上的“CDaudiophile”程序的程序 ID 是 7401，它在 NoScript 标记中设置正确。但是，这在 Script 标记中是不正确的。请将脚本标签中的 wgProgramID 设置为 7401。此变量不会更改。

wgOrderReference 变量需要设置为该事务的唯一参考号，这需要在 Script 标签和 NoScript 标签中设置。

Script 标签中的 wgOrderValue 变量和 NoScript 标签中的 wgValue 变量需要设置为您要支付佣金计算的交易的价值。因此，如果您不想支付包括增值税和交易运费在内的佣金，则需要在将这些变量中的值传递给 Webgains 之前将这些从总价值中删除。

您的 EventID 是 11771，这与您要支付给附属公司的 10% 佣金有关。除非您引入更多佣金类型，否则此 EventID 不会更改。这再次需要在 Script 和 NoScript 标记中设置，我可以看到当前在 Script 标记中没有正确设置。

如果在交易中使用了优惠券代码，则需要使用使用的优惠券代码填充 wgVoucher 代码变量。如果交易中未使用优惠券代码，请将此变量留空。

请确保在 Script 标签和 NoScript 标签中设置所有这些变量。

请随时通过 acorby@webgains.com 直接与我联系，或通过 support@webgains.es 向西班牙 Webgains 平台发送电子邮件支持

我希望这会有所帮助，如果您有任何其他问题，请告诉我。

# java - 如何对 HTTPServlet 进行单元测试？

> ID：14404808
> 
> 赞同：3
> 
> 时间：2013-01-18T17:59:08.297
> 
> 标签：java, unit-testing, junit, mocking

我想用[http://www.easymock.org/测试我的 servlet](http://www.easymock.org/)

如何编写单元测试代码？

我会根据您的回复更新我的代码。

我刚刚使用谷歌并现在制作了这段代码。

这是我的 Servlet：

```
 package com.i4ware.plugin.timesheet;

 import java.io.IOException;

 import com.atlassian.jira.issue.Issue;
 import com.atlassian.jira.issue.IssueManager;
 import com.atlassian.jira.project.Project;
 import com.atlassian.jira.project.ProjectManager;
 import org.ofbiz.core.entity.DelegatorInterface;
 import org.ofbiz.core.entity.EntityExpr;
 import org.ofbiz.core.entity.EntityOperator;
 import org.ofbiz.core.entity.GenericEntityException;
 import org.ofbiz.core.entity.GenericValue;
 import org.ofbiz.core.util.UtilMisc;
 import org.apache.commons.lang.StringEscapeUtils;
 import com.atlassian.crowd.embedded.api.User;
 import com.atlassian.jira.security.JiraAuthenticationContext;
 import com.atlassian.jira.web.bean.PagerFilter;
 import com.atlassian.jira.issue.search.SearchResults;
 import com.atlassian.jira.bc.issue.search.SearchService;
 import com.atlassian.jira.issue.search.SearchException;

 import com.atlassian.jira.issue.worklog.Worklog;
 import com.atlassian.jira.issue.worklog.WorklogManager;
 import com.atlassian.jira.issue.worklog.WorklogImpl;

 import com.atlassian.query.Query;
 import com.atlassian.jira.jql.builder.JqlQueryBuilder;
 import com.atlassian.query.order.SortOrder;

 import com.atlassian.jira.issue.status.Status; 

 import javax.servlet.ServletException;
 import javax.servlet.http.HttpServlet;
 import javax.servlet.http.HttpServletRequest;
 import javax.servlet.http.HttpServletResponse;

 import com.atlassian.jira.util.json.JSONObject;
 import com.atlassian.jira.util.json.JSONException;
 import com.atlassian.jira.util.json.JSONArray;

 import java.io.UnsupportedEncodingException;
 import java.sql.Timestamp;
 import java.util.ArrayList;
 import java.util.Arrays;
 import java.util.Calendar;
 import java.util.Date;
 import java.util.HashMap;
 import java.util.Hashtable;
 import java.util.Iterator;
 import java.util.List;
 import java.util.Map;
import java.util.Set;
import java.util.TimeZone;
import java.util.TreeMap;
import java.util.TreeSet;
import java.util.Collections;
import java.lang.Long;
import java.util.Collection;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.lang.Class;
import java.util.Enumeration;

import org.apache.log4j.Category;

import com.atlassian.upm.api.license.entity.PluginLicense;
import com.atlassian.upm.license.storage.lib.PluginLicenseStoragePluginUnresolvedException;
import com.atlassian.upm.license.storage.lib.ThirdPartyPluginLicenseStorageManager;

import com.atlassian.plugin.webresource.WebResourceManager;
 import com.atlassian.templaterenderer.TemplateRenderer;

import java.text.ParseException;
import java.text.ParsePosition;

 public class UserIsLogedInServlet extends HttpServlet
 {
private static final Category log = Category.getInstance(UserIsLogedInServlet.class);
/** value is made for JSON {"success":true} or {"success":false}. */
private Boolean value;    

private String json;
private String msg;
private final ThirdPartyPluginLicenseStorageManager licenseManager;
private WebResourceManager webResourceManager;
private final TemplateRenderer renderer;

private JiraAuthenticationContext authenticationContext;    

public UserIsLogedInServlet(ThirdPartyPluginLicenseStorageManager licenseManager,
        WebResourceManager webResourceManager,
        TemplateRenderer renderer,
        JiraAuthenticationContext authenticationContext)
{
    this.licenseManager = licenseManager;
    this.webResourceManager = webResourceManager;
    this.renderer = renderer;
    this.authenticationContext = authenticationContext;
}

@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException
{
    resp.setContentType("application/json");        

}

@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException
{       

    User targetUser = authenticationContext.getLoggedInUser();

    String user = "";

    if (targetUser==null) {

        user = "anonymous";
        value = Boolean.valueOf(!"false"
            .equalsIgnoreCase((String) "false"));
        msg = "You're not loged in.";
    } else {

        user = targetUser.getName();
        value = Boolean.valueOf(!"false"
            .equalsIgnoreCase((String) "true"));
        msg = "You're loged in.";
    }        

    try {

    json = new JSONObject()      
    .put("msg", msg)
    .put("success", value)
    .toString();

    } catch (JSONException err) {
        err.printStackTrace();
        System.out.println("Got an JSONException: " + err.getCause());
    }

    resp.setContentType("application/json");        
    resp.getWriter().write(json);
    resp.getWriter().close();

}
} 
```

这是代码：

```
package com.i4ware.plugin.timesheet;

import junit.framework.*;
import org.junit.Ignore;
import org.junit.Test;
import org.junit.BeforeClass;
import org.junit.After;
import java.io.*;
import java.security.*;
import javax.servlet.http.*;
import javax.servlet.ServletException;
import javax.servlet.RequestDispatcher;
import static org.easymock.EasyMock.*;
import org.easymock.IMocksControl;
import com.atlassian.upm.api.license.entity.PluginLicense;
import com.atlassian.upm.license.storage.lib.PluginLicenseStoragePluginUnresolvedException;
import com.atlassian.upm.license.storage.lib.ThirdPartyPluginLicenseStorageManager;
import com.atlassian.plugin.webresource.WebResourceManager;
import com.atlassian.templaterenderer.TemplateRenderer;
import com.atlassian.jira.security.JiraAuthenticationContext;

import com.i4ware.plugin.timesheet.UserIsLogedInServlet;

public class UserIsLogedInServletTest extends TestCase {    

private ThirdPartyPluginLicenseStorageManager licenseManager;
private WebResourceManager webResourceManager;
private TemplateRenderer renderer;  
private JiraAuthenticationContext authenticationContext;

private IMocksControl mocks;
private UserIsLogedInServlet servlet;

@BeforeClass
public void setUpBeforeClass() {
    mocks = (IMocksControl) createStrictControl();
    servlet = new UserIsLogedInServlet(licenseManager,webResourceManager,renderer,authenticationContext);
}

@After
public void tearDown() {
    mocks.reset();
}

@Test
public void testGet()throws ServletException, IOException {
    HttpServletRequest request = mocks.createMock(HttpServletRequest.class);
    HttpServletResponse response = mocks.createMock(HttpServletResponse.class);
expect(request.getRequestDispatcher("/plugins/servlet/timesheet/userislogedin")).andReturn(createMock(RequestDispatcher.class));
    replay(request, response);
    servlet.doGet(request, response);
    verify(request, response);
}

@Test
public void testPost() throws ServletException, IOException {
    HttpServletRequest request = mocks.createMock(HttpServletRequest.class);
    HttpServletResponse response = mocks.createMock(HttpServletResponse.class);
expect(request.getRequestDispatcher("/plugins/servlet/timesheet/userislogedin")).andReturn(createMock(RequestDispatcher.class));
    replay(request, response);
    servlet.doPost(request, response);
    verify(request, response);
}

} 
```

我收到此错误：

```
Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.046 sec <<< FAILURE!
testPost(com.i4ware.plugin.timesheet.UserIsLogedInServletTest)  Time elapsed: 0.01 sec  <<< ERROR!
 java.lang.NullPointerException
at  com.i4ware.plugin.timesheet.UserIsLogedInServletTest.testPost(UserIsLogedInServletTest.java:67)

testGet(com.i4ware.plugin.timesheet.UserIsLogedInServletTest)  Time elapsed: 0 sec  <<< ERROR!
java.lang.NullPointerException
at com.i4ware.plugin.timesheet.UserIsLogedInServletTest.testGet(UserIsLogedInServletTest.java:58) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T18:04:15.050

您需要同时模拟`HttpServletRequest`和`HttpServletResponse`对象。与标准模拟相比，有[现有的实现](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/mock/web/MockHttpServletRequest.html)，[更易于使用。](http://mockrunner.sourceforge.net/doc/api/com/mockrunner/mock/web/MockHttpServletRequest.html)

拥有请求和响应实例后，您可以遵循以下模式：

```
private final MyServlet servlet = new MyServlet();

@Test
public void testServlet() {
    //given
    MockHttpServletRequest req = //...
    MockHttpServletResponse resp = //...

    //when
    servlet.service(req, resp);

    //then
    //verify response headers and body here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T18:08:24.477

我对 Mockito 比较熟悉，但我相信它们仍然相似。事实上，我认为 Mockito 是几年前从 EasyMock 分支出来的。

单元测试没有食谱方法，但这是我倾向于采用的基本方法：

1) 创建你的 servlet 类的真实实例（即*new MyServlet()*）

2) 使用 EasyMock 创建一个模拟 HttpRequest

2a) 模拟请求的期望行为以模拟真实的 HTTP 请求。例如，这可能意味着您模拟请求参数或标头的存在。

3) 使用 EasyMock 创建一个模拟 HttpResponse

4) 调用 servlet 的 doGet() 方法，将模拟请求和响应都传递给它。

5) 为了验证，检查模拟 HttpResponse。验证：(a) 已在对象上调用了预期的方法，(b) 已将预期的数据传递给了对象。

我知道这是非常高级的，但我只是概述了方法。我假设您知道如何使用 EasyMock 完成模拟/验证行为。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T20:31:33.150

我更喜欢使用 spring-test 以及 MockHttpServletRequest 和 MockHttpServletResponse。它们比模拟更类似于存根，但工作得非常好。

这个答案有关于使用的信息：[How to test my servlet using JUnit](https://stackoverflow.com/questions/5434419/servlet-testing-example)

# .net - 实体框架：类型“映射为复杂类型”错误

> ID：14404813
> 
> 赞同：3
> 
> 时间：2013-01-18T17:59:26.810
> 
> 标签：.net, entity-framework, entity-framework-4, complextype

在我的数据库中，我有一个名为“跟踪”的表，其中包含以下列：

```
[OrderNumber] [varchar](50) NULL,
[TrackingNumber] [varchar](50) NULL,
[emailaddress] [varchar](100) NULL,
[courier] [varchar](10) NULL 
```

我有一个名为 Tracking 的类来表示表中的实体：

```
public class Tracking
{
    public virtual string OrderNumber { get; set; }
    public virtual string TrackingNumber { get; set; }
    public virtual string EmailAddress { get; set; }
    public virtual string Courier { get; set; }
} 
```

在我的数据上下文的定义中

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Configurations.Add(new TrackingConfig());
}

internal class TrackingConfig : EntityTypeConfiguration<Tracking>
{
    internal TrackingConfig()
    {
        Property(x => x.OrderNumber);
        Property(x => x.TrackingNumber);
        Property(a => a.EmailAddress).HasColumnName("emailaddress");
        Property(a => a.Courier).HasColumnName("courier");
    }
} 
```

如您所见，我没有明确地将其转换为复杂类型。我什至使用 HasColumnName 来指定哪个列名映射到类的哪个属性，以防万一由于大小写不同而无法识别它们。（事实证明，无论是否使用 HasColumnName 都会发生错误。）

当我出于任何原因调用我设置的存储库时，初始化失败并且实体框架抛出异常：

```
The type 'Tracking' is mapped as a complex type. The Set method, DbSet objects, and DbEntityEntry objects can only be used with entity types, not complex types. 
```

我没有将其设置为复杂类型...为什么 EF4 将其视为一个复杂类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:28:22.340

看起来它与将字段声明为虚拟有关。您还可以使用数据注释来覆盖表和列名称以匹配您现有的数据库模式。下面是我将如何设置 POCO 模型和 dbcontext。

```
[Table("tracking")]
public class Tracking
{
    public string OrderNumber { get; set; }
    public string TrackingNumber { get; set; }

    [Column(Name = "emailaddress")]
    public string EmailAddress { get; set; }

    [Column(Name = "courier")]
    public string Courier { get; set; }
}

public class TrackingEntities : DbContext
{
    public DbSet<Tracking> Trackings { get; set; }
} 
```

# html - 图片在 IE8 中不显示

> ID：14404814
> 
> 赞同：0
> 
> 时间：2013-01-18T17:59:27.793
> 
> 标签：html, https, internet-explorer-8, image

我有一个`<img>`网址来显示我的图片，例如：

```
<img src="https://stage.connect2fans.com/download.svc/ec9f28cf-0e11-467f-b2d7-8d7728e775ce/ticket/GeneralAdmissionTicketInventoryItem/67cf47e6-932d-40da-aacc-c10b9f78ea36" /> 
```

它在FF，Chrome上显示，但在IE8上不显示。怎么做？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:26:15.650

最后，我知道问题是我的网站的cookie被阻止了，所以我需要在IE8中打开来解决：

```
Go into Tools > Internet Options > Sites to turn on cookie for my site 
```

# java - Java Scheduled Executor 服务能力

> ID：14404815
> 
> 赞同：1
> 
> 时间：2013-01-18T17:59:28.133
> 
> 标签：java, scheduled-tasks, scheduledexecutorservice

我正在设计一个服务器，我需要能够在其中安排数千个任务。该任务每 5 秒执行一次。调度执行器服务是否能够准确地处理数千个任务？我试图在一个线程中进行计时。但实际任务将在线程池中执行。谢谢

我不确定它究竟是如何工作的，所以如果有人能澄清这一点，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:11:14.623

[`ScheduledExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)由线程池支持。粗略地说，您可以使用以下等式计算无延迟地同时运行任务所需的线程数：

> 池中的最小线程数等于每秒执行的平均任务数乘以平均任务运行时间

例如，平均而言，您启动 2 个任务需要 3 秒（平均）完成，您需要 6 个线程。当然，这假设随着时间的推移任务分布相当均匀。

您还可以使用[`Executors.newCachedThreadPool()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newCachedThreadPool%28%29)which 理论上可以同时运行无限数量的任务。显然可用内存和上下文切换的数量会大大减少这个数量。

如果您的使用场景是：每五秒在完全相同的时间点运行数千个任务计划 - JVM 和任何其他平台都不会处理这个问题。即使你有*数千个线程*，你也会受到 CPU 内核数量的限制。准确性很大程度上取决于任务的性质（CPU 密集型？阻塞 I/O？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:02:08.687

我建议您阅读调度程序执行器服务的 javadocs。有没有什么特别的地方让你怀疑它的工业实力。您应该使用它并测量您的性能以检查它是否与您的用例匹配。

此外，除非您有充分的理由，否则您不应该修改库类的实现（在客户端分离调度和任务执行线程）

但是，如果您的调度标准预计会变得复杂 - 超出调度程序执行程序服务提供的基本用例，您应该使用像quartz这样的库进行评估。

# c++ - C ++在控制台中移动光标

> ID：14404819
> 
> 赞同：3
> 
> 时间：2013-01-18T17:59:39.727
> 
> 标签：c++, winapi, console-application, keyboard-events

我正在使用 Visual Studio 2010，当用户按下键盘上的右数组键时，我正在尝试移动光标：

```
#include "stdafx.h"
#include <iostream>
#include <conio.h> 
#include <windows.h>

using namespace std;

void gotoxy(int x, int y)
{
  static HANDLE h = NULL;  
  if(!h)
    h = GetStdHandle(STD_OUTPUT_HANDLE);
  COORD c = { x, y };  
  SetConsoleCursorPosition(h,c);
}

int main()
{
    int Keys;
    int poz_x = 1;
    int poz_y = 1;
    gotoxy(poz_x,poz_y);

    while(true)
    {   
        fflush(stdin);
        Keys = getch();
        if (Keys == 77)
                gotoxy(poz_x+1,poz_y);
    }

    cin.get();
    return 0;
} 
```

它正在工作，但只有一次 - 第二次，第三次等按不工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:04:04.390

你永远不会改变`poz_x`你的代码。在你的 while 循环中，你总是移动到初始值 +1。像这样的代码应该是正确的：

```
while(true)
{   
    Keys = getch();
    if (Keys == 77)
    {
            poz_x+=1;     
            gotoxy(poz_x,poz_y);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:03:32.543

你从不改变`poz_x`，所以你总是打电话

```
gotoxy(2,1); 
```

在循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-16T20:52:37.307

对于上、右、左、下，您可以将“Keys”设置为 char 值而不是 int，在这种情况下，您可以使用键“w”移动，“s”移动，“s”移动，“a”移动，“ d" 代表权利：

```
char Keys;
while(true){
    Keys = getch();
    if (Keys == 'd'){
            poz_x+=1;
            gotoxy(poz_x,poz_y);
                }

   if(Keys=='w'){
            poz_y-=1;
            gotoxy(poz_x,poz_y);
                }

    if(Keys=='s'){
            poz_y+=1;
            gotoxy(poz_x,poz_y);
                }

    if(Keys=='a'){
            poz_x-=1;
            gotoxy(poz_x,poz_y);
                }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-14T00:58:32.520

下面的代码应该可以工作！:)

```
#include <windows.h>
using namespace std;

POINT p;

int main(){
   while(true){
       GetCursorPos(&p);
       Sleep(1);
       int i = 0;

       if(GetAsyncKeyState(VK_RIGHT)){
          i++;
          SetCursorPos(p.x+i, p.y);
       }
   }
} 
```

# android - 使用 AudioTrack 和 AudioManager setSpeakerphoneOn

> ID：14404820
> 
> 赞同：8
> 
> 时间：2013-01-18T17:59:53.580
> 
> 标签：android, audiotrack, android-audiomanager

我正在使用 AudioTrack 播放通过 UDP 套接字接收的声音。我的声音伴随着很多噪音，所以我决定使用 AudioManager。但是 AudioManager 改变了应用程序范围之外的声音路由。下面是我正在使用的代码。

```
 m_amAudioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE); 
        m_amAudioManager.setMode(AudioManager.MODE_IN_CALL); 
        m_amAudioManager.setSpeakerphoneOn(false); 
```

这段代码的问题是，当我关闭应用程序并启动音乐播放器时，声音来自前置扬声器而不是通常的后置扬声器，我无法以某种方式更改它。为了解决这个问题，我决定在关闭我的应用程序时添加以下行。

```
 m_amAudioManager.setSpeakerphoneOn(true); 
```

但是这条线的问题是，当我接到电话（普通电话）时，默认情况下扬声器是打开的。我真的需要帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T18:08:56.090

首先，您需要在清单中声明用户权限 MODIFY_AUDIO_SETTINGS 以更改 AudioManager 设置。

```
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" /> 
```

1.  在更改任何设置之前，您必须保存当前的 AudioManager 设置！

    ```
    oldAudioMode = audioManager.getMode();
    oldRingerMode = audioManager.getRingerMode();
    isSpeakerPhoneOn = audioManager.isSpeakerphoneOn(); 
    ```

2.  应用您的音频设置（示例）

    ```
    audioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);
    audioManager.setMode(AudioManager.MODE_NORMAL);
    audioManager.setSpeakerphoneOn(true); 
    ```

3.  然后在完成时，恢复设置

    ```
    audioManager.setSpeakerphoneOn(isSpeakerPhoneOn);
    audioManager.setMode(oldAudioMode);
    audioManager.setRingerMode(oldRingerMode); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:10:15.127

关闭应用程序时设置此项。

m_amAudioManager.setMode(AudioManager.MODE_NORMAL);

# string - 玩！字符串中的框架“意外标识符”

> ID：14404825
> 
> 赞同：0
> 
> 时间：2013-01-18T18:00:04.973
> 
> 标签：string, playframework, playframework-1.x

我正在从消息文件（带有键和值的字符串资源文件）中检索字符串，并尝试将其存储在 javascript 变量中。它显然包含 javascript 不喜欢的字符。如何从消息文件中检索字符串，而无需编辑消息文件中的所有字符串，以避免“意外标识符”错误消息杀死整个脚本？我尝试在周围添加引号： "&{ 'pages.'+_section+'.footnote.'+_page+'.html' }" 但它没有帮助......

在这里崩溃：

```
var sRefTxt =  "&{  'pages.'+_section+'.footnote.'+_page+'.html' }"; 
```

我的游戏！版本是 1.2.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:37:43.610

`&{''}`语法是加载消息的快捷方式。它接受一个字符串作为参数。您不能在此处使用变量。

而不是使用这种语法：

```
&{'message'} 
```

你可以使用这个：

```
${play.i18n.Messages.get('message')} 
```

对于您的示例，它将是：

```
${play.i18n.Messages.get('pages.'+_section+'.footnote.'+_page+'.html')} 
```

# android - LocationListener 中的 onLocationChanged 无法写入线程

> ID：14404830
> 
> 赞同：0
> 
> 时间：2013-01-18T18:00:29.180
> 
> 标签：android, multithreading, locationmanager

我有一个活动和一个单独的服务器线程。服务器线程连接到服务器。在活动中，我有一个 LocationListener。onLocationChanged 正在向服务器线程发送数据，但我的数据不会到达服务器。

如果我直接从我的活动中发送数据，它工作正常。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:24:06.057

独立线程可能无法访问 UI 元素。您应该查看[runOnUIThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:22:37.477

不看代码就无法理解确切的问题..但根据我的理解，你可以试试这个 -

在服务器线程中使用处理程序从 UI 线程接收数据。

例如在您的 serverthread 可运行 -

```
@Override
public void run(){
       Looper.prepare();

       mHandler = new Handler() {
               public void handleMessage(Message msg) {
                   // Act on the message
               }
       };
       Looper.loop();
} 
```

从 onLocationChanged() ，您可以将消息发布到处理程序。

```
 public void onLocationChanged(Location loc) {

 Message m = new Message();
 Bundle bundle = new Bundle();
 bundle.putString(DATA_KEY, "location specific data");
 m.setData(bundle);
 mHandler.sendMessage(m);

 } 
```

# c# - 在 WINRT 中使用 c# 加载可用字体列表

> ID：14404834
> 
> 赞同：0
> 
> 时间：2013-01-18T18:00:44.550
> 
> 标签：c#, windows-runtime

我想使用 c# 将可用字体列表加载到 winrt 应用程序的组合框中。这是 .Net 中的简单任务，但我在 winrt 中找不到相应的 API。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:10:39.797

您需要使用 DirectWrite。这里有一个片段可以做到这一点：

[https://github.com/christophwille/winrt-snippets/tree/master/EnumerateFonts](https://github.com/christophwille/winrt-snippets/tree/master/EnumerateFonts)

复制粘贴：

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Linq;
using System.Text;

using SharpDX.DirectWrite;

namespace EnumerateFonts
{
    public class InstalledFont
    {
        public string Name { get; set; }

        // Code taken straight from SharpDX\Samples\DirectWrite\FontEnumeration\Program.cs
        public static List<InstalledFont> GetFonts()
        {
            var fontList = new List<InstalledFont>();

            var factory = new Factory();
            var fontCollection = factory.GetSystemFontCollection(false);
            var familyCount = fontCollection.FontFamilyCount;

            for (int i = 0; i < familyCount; i++)
            {
                var fontFamily = fontCollection.GetFontFamily(i);
                var familyNames = fontFamily.FamilyNames;
                int index;

                if (!familyNames.FindLocaleName(CultureInfo.CurrentCulture.Name, out index))
                    familyNames.FindLocaleName("en-us", out index);

                string name = familyNames.GetString(index);
                fontList.Add(new InstalledFont()
                                 {
                                     Name = name,
                                 });
            }

            return fontList;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T10:53:29.163

还有一种方法可以在没有 SharpDX 的情况下枚举字体。[https://code.msdn.microsoft.com/FontExplorer-lets-you-f01d415e#content](https://code.msdn.microsoft.com/FontExplorer-lets-you-f01d415e#content)

# java - 使用唯一的实例值创建枚举工厂方法

> ID：14404840
> 
> 赞同：5
> 
> 时间：2013-01-18T18:01:06.620
> 
> 标签：java, enums, factory

我创建了一个枚举来定义某些操作。针对外部 API 进行编程我被迫使用 an`Integer`来表达这个动作。这就是为什么我在我的枚举中添加了一个整数实例字段。这应该与 Joshua Bloch 的 Effective Java 一致，而不是依赖于`ordinal()`Enum 常量的顺序或使用`values()[index]`.

```
public enum Action {

    START(0),

    QUIT(1);

    public final int code;

    Protocol(int code) {
         this.code = code;
     }
} 
```

我从 API 获得一个整数值`what`，现在我想从中创建一个 Enum 值，我怎样才能以最通用的方式实现它？

显然，添加这样的工厂方法，是行不通的。您不能实例化枚举。

```
Action valueOf(int what) {
     return new Action(what);
} 
```

当然，我总是可以创建一个 switch-case 语句并添加所有可能的代码并返回适当的常量。但我想避免同时在两个地方定义它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T18:12:15.480

如果你有很多，你可以使用`HashMap<Integer, Action>`：

```
private static final Map<Integer, Action> actions = new HashMap<>(values().size, 1);

static {
    for (Action action : values())
        actions.put(action.code, action);
}

// ...

public static Action valueOf(int what) {
    return actions.get(what);
} 
```

如果您要拥有大量`Action`值，这将很有用，因为`HashMap`查找是 O(1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:26:39.770

如果您确定您的代码将始终是连续的并且从 0 开始，那么最有效的选择是

```
public enum Action {
    START(0),

    QUIT(1);

    public static final Action[] ACTIONS;
    static {
      ACTIONS = new Action[values().length];
      for(Action a : values()) {
        ACTIONS[a.code] = a;
      }
    }

    public final int code;

    Protocol(int code) {
         this.code = code;
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:45:08.560

我个人会保持简单（YAGNI）并使用序数值**但是**：

*   我会将逻辑保留在枚举中，以确保外部代码不知道该实现细节并且不依赖它
*   如果出现问题（即如果数字不是从 0 开始或不是递增的），我会确保我有一个失败的测试

**枚举代​​码：**

```
public enum Action {

    START(0),
    QUIT(1);
    private final int code;

    Action(int code) {
        this.code = code;
    }

    public int getCode() {
        return code;
    }

    public static Action of(int code) {
        try {
            return Action.values()[code];
        } catch (IndexOutOfBoundsException e) {
            throw new IllegalArgumentException("not a valid code: " + code);
        }
    }
} 
```

**测试**

```
@Test
public testActionEnumOrder() {
    int i = 0;
    for (Action a : Action.values()) {
        assertEquals(a.getCode(), i++);
    }
} 
```

如果更改`QUIT(1)`为`QUIT(2)`例如，测试将失败。发生这种情况时，您可以使用 HashMap 或查找循环。

# windows-runtime - WinRT 实际上是否支持 WPF o Silverlight 开发？

> ID：14404843
> 
> 赞同：0
> 
> 时间：2013-01-18T18:01:20.037
> 
> 标签：windows-runtime

WinRT 实际上是否支持 WPF o Silverlight 开发？

哪些语言用于处理 WinRT 应用程序界面？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:09:59.903

不，它不支持这些。它正式与 C++、C#、VB.NET 和 JavaScript 一起工作。

# javascript - 当复选框被选中时，从标签中删除类

> ID：14404844
> 
> 赞同：4
> 
> 时间：2013-01-18T18:01:20.723
> 
> 标签：javascript, jquery

我已经编写了一个基本的表单验证脚本，现在我正在尝试重置用户未填写必填字段时出现的错误。

对于复选框和单选按钮，我已将类添加`error`到它们的标签中。其 HTML 代码如下所示：

```
<input class="required" id="Example31" name="Example3" type="checkbox" />
<label for="Example31" class="error">Example Input 3 Option 1</label>

<input class="required" id="Example32" name="Example3" type="checkbox" />
<label for="Example32" class="error">Example Input 3 Option 2</label>

<input class="required" id="Example4" name="Example4" type="radio" />
<label for="Example4" class="error">Example Input 4</label> 
```

要添加错误，我会使用以下脚本确定是否选中了具有相同名称的任何复选框：

```
$("input.required").each(function() {
    // check checkboxes and radio buttons
        if ($(this).is(":checkbox") || $(this).is(":radio")) {
            var inputName = $(this).attr("name");
            if (!$("input[name=" + inputName + "]").is(":checked")) {
                var inputId = $(this).attr("id");
                $("label[for=" + inputId + "]").addClass("error");
                error = true;
            };
        };
    // end checkboxes and radio buttons
}); 
```

如何在不修改 HTML 的情况下删除错误？我正在画一个完整的空白。这就是我的想法：

1.  找出与每个有错误的标签关联的名称
2.  找到具有该 ID 的复选框或单选按钮
3.  找出复选框或单选按钮的名称
4.  查找具有相同名称的其余复选框或单选按钮
5.  查找这些输入 ID
6.  查找具有这些名称的标签
7.  清除这些标签上的错误

不过，我很茫然。如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:21:22.477

我已将您的“想法”转换为代码。看看这是否适合你...

```
// Figure out the name associated with each label that has an error
$(".error").each(function() {
    var m = $(this).attr('for');

    // Find the checkbox or radio button that has that ID
    $("input[id=" + m + "]").each(function() {

        // Figure out the checkbox or radio buttons name
        var n = $(this).attr('name');

        // Find the rest of the checkboxes or radio buttons with the same name
        $("input[name=" + n + "]").not(this).each(function() {

            // Find those inputs IDs
            i = $(this).attr('id');

            // Find labels with those names
            $("label[for=" + i + "]").each() {

                // Clear the errors off of those labels
                $(this).removeClass("error");
            });
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:34:44.100

我可以自己解决这个问题：

```
$("input.required").each(function() {
    if ($(this).is(":checkbox") || $(this).is(":radio")) {
        var inputName = $(this).attr("name");
        var labelFor = $(this).attr("id");
        $(this).click(function() {
            $("input[name=" + inputName + "]").each(function() {
                var labelFor = $(this).attr("id");
                $("label[for=" + labelFor + "]").removeClass("error");
            });
        });
    };
}); 
```

# ruby-on-rails-3 - 设计/Omniauth 测试失败：没有路由匹配 {:controller=>"omniauth_callbacks", :action=>"passthru", :provider=>:facebook}

> ID：14404853
> 
> 赞同：2
> 
> 时间：2013-01-18T18:02:16.563
> 
> 标签：ruby-on-rails-3, devise, routes, omniauth, testunit

我在 rails 3.2.11 下使用 Devise 2.2.0 和 omniauth 1.1.1。

我在一个名为“HomepageController”的未经身份验证的（例如，没有“before_filter：authenticate_user！”）控制器上进行了一个名为“homepage”的操作的测试。这个控制器动作非常简单，除非用户登录，否则它会传递到它的视图，在这种情况下它会重定向到我们的“homebase”页面。这是控制器动作：

```
class HomepageController < ApplicationController
  def homepage
if current_user then
  redirect_to :homebase
end
  end
end 
```

这是我的测试：

```
require 'test_helper'

class HomepageControllerTest < ActionController::TestCase
  def setup
    @user = users(:donley)
  end

  test "should get homepage when signed in" do
    sign_in @user
    get :homepage
    assert_redirected_to "/homebase"
  end

  test "should get homepage when not signed in" do
    get :homepage
    assert_response :success
  end

end 
```

第二次测试失败并出现以下错误：

```
No route matches {:controller=>"omniauth_callbacks", :action=>"passthru", :provider=>:facebook} 
```

在视图中的这一行：

```
= link_to user_omniauth_authorize_path(:facebook) do 
```

这是我的设计和omniauth路线：

```
 resources :oauth_clients

  match '/oauth/test_request',  :to => 'oauth#test_request',  :as => :test_request

  match '/oauth/token',         :to => 'oauth#token',         :as => :token

  match '/oauth/access_token',  :to => 'oauth#access_token',  :as => :access_token

  match '/oauth/request_token', :to => 'oauth#request_token', :as => :request_token

  match '/oauth/authorize',     :to => 'oauth#authorize',     :as => :authorize

  match '/oauth',               :to => 'oauth#index',         :as => :oauth

  devise_for :users, :controllers => {:omniauth_callbacks => "omniauth_callbacks"}

  devise_scope :user do
    get "sign_in", :to => "devise/sessions#new"
    get "sign_up", :to => "devise/registrations#new"
    match "sign_out", :to => "devise/sessions#destroy"
  end 
```

这是一条`rake routes`看起来像错误消息中提到的路线：

```
user_omniauth_authorize /users/auth/:provider(.:format) omniauth_callbacks#passthru {:provider=>/facebook|linkedin/} 
```

真正疯狂的是，所有这些代码`rails server`在我的生产环境中的 Heroku 中或上运行时都能完美运行。它只是在测试中失败。

非常感谢您的任何见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-28T17:48:43.823

我今天遇到了同样的问题，发现我没有在测试环境中添加 Facebook 作为提供程序。这应该在`devise.rb`初始化程序中完成。我想这就是我运行测试时没有生成路由的原因。

```
#config/initializers/devise.rb
if Rails.env.test?
  config.omniauth :facebook, "APP_ID", "APP_SECRET"
end 
```

# fonts - 如何在 Corona for Android 中添加自定义字体？

> ID：14404858
> 
> 赞同：2
> 
> 时间：2013-01-18T18:02:28.467
> 
> 标签：fonts, coronasdk, displayobject

我只是在论坛上尝试了一切，但我无法将我的自定义字体添加到系统中。这是我所做的：

我确保家族名称和字体名称与 Typelight 程序相同。

![在此处输入图像描述](../Images/d59bc88af708f64b19c28d1d90684ef6.png)

然后我只是把根目录下的文件名改了，拖到Outlaw里面。之后在 display.newText 中写入文件名。

![在此处输入图像描述](../Images/8baabcde6764e10fb77622478400a941.png)

你能告诉我哪里做错了吗？

[编辑] 好吧，问题是我没有使用 Windows Font Viewer 安装字体。在使用 WFV 安装它并从字体参数 thx krs 中删除扩展名后，我终于用自定义字体显示了文本 =) YAY！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T11:26:50.730

一旦你有你的字体文件（例如 Harrowprint.ttf），你需要首先将它放在你的项目目录中（你的 main.lua 所在的同一个地方）。

对于 Android 应用程序，除了将字体包含在项目文件夹中之外，不需要做任何事情。

您必须在代码中进行如下编辑：

```
 local textObject = display.newText( "See my new font?", 100, 100, "Harrowprint", 40 ) -- no need to use extension here 
```

如果它再次不起作用，您只需使用带有“.ttf”扩展名的字体文件。这可能有效。

礼貌： http: [//www.coronalabs.com/blog/2011/07/13/custom-fonts-corona/](http://www.coronalabs.com/blog/2011/07/13/custom-fonts-corona/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T21:37:37.313

如果您在模拟器中没有看到它，可能是您没有在 Windows 中安装该字体。

那么您没有在代码中使用正确的名称。您不会在 Corona 中使用 .otf 或 .ttf。

```
local textObject = display.newText( "Hello World", 100, 100, "Alex Brush", 40 ) 
```

接下来，如果您正在为 Android 构建，则可能不支持 OTF 字体，具体取决于构建。我认为最近的每日构建之一添加了 OTF 支持，但我不相信最后一个公共构建支持 OTF。

# android - 手机上可以有水平标签，平板电脑上可以有垂直标签吗？

> ID：14404859
> 
> 赞同：0
> 
> 时间：2013-01-18T18:02:29.557
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock, android-tabhost

我目前正在为我正在创建的应用程序设计 UI，我认为看起来不错的一件事是在手机上使用库存的 ActionBar 导航选项卡，但是在平板电脑上，选项卡的垂直列表出现在窗格中在左手侧。

是否可以仅使用 ActionBar 的东西来做到这一点，还是我需要使用自定义视图？如果我需要使用自定义视图，有什么方法可以在手机和平​​板电脑上使用相同的视图，并让它在手机上水平渲染，在平板电脑上垂直渲染？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:24:28.020

> 是否可以仅使用 ActionBar 的东西来做到这一点

不，对不起。

> 我需要使用自定义视图吗？

是的。

> 如果我需要使用自定义视图，有什么方法可以在手机和平​​板电脑上使用相同的视图，并让它在手机上水平渲染，在平板电脑上垂直渲染？

因为这将是你自己的习惯`View`，你会自己写，所以欢迎你让它做你想做的任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:09:53.180

使用不同的布局！layout-large 用于平板电脑 layout-small，layout-normal 用于手机！

请记住在元素上使用相同的 id，这应该有效

# java - 如何检测SQ LException的SQL错误状态

> ID：14404866
> 
> 赞同：0
> 
> 时间：2013-01-18T18:02:45.837
> 
> 标签：java, jdbc, sqlexception

我正在尝试制作`JDBC`连接池组件，但遇到了问题。即：如何检测`java.sql.SQLException`. 据说国家应该遵循`SQL2003`惯例和文件中的`XOPEN SQL`惯例`JDK`。但是我找不到关于这两个公约的任何文件。有人可以为我提供吗？

我想知道每个状态代表什么，所以我可以决定何时完全关闭连接或重新连接。

我参考了`BoneCP`. 这是发生 SQLException 时将激活的部分：

```
 ImmutableSet<String> sqlStateDBFailureCodes = ImmutableSet.of("08001", "08007", "08S01", "57P01", "HY000"); 
    String state = e.getSQLState();
        ConnectionState connectionState = this.getConnectionHook() != null ? this.getConnectionHook().onMarkPossiblyBroken(this, state, e) : ConnectionState.NOP; 
        if (state == null){ // safety;
            state = "08999"; 
        }

        if (((sqlStateDBFailureCodes.contains(state) || connectionState.equals(ConnectionState.TERMINATE_ALL_CONNECTIONS)) && this.pool != null) && this.pool.getDbIsDown().compareAndSet(false, true) ){
            logger.error("Database access problem. Killing off all remaining connections in the connection pool. SQL State = " + state);
            this.pool.connectionStrategy.terminateAllConnections();
            this.pool.poisonAndRepopulatePartitions();
        }
char firstChar = state.charAt(0);
        if (connectionState.equals(ConnectionState.CONNECTION_POSSIBLY_BROKEN) || state.equals("40001") || 
                state.startsWith("08") ||  (firstChar >= '5' && firstChar <='9') /*|| (firstChar >='I' && firstChar <= 'Z')*/){
            this.possiblyBroken = true;
        }

        // Notify anyone who's interested
        if (this.possiblyBroken  && (this.getConnectionHook() != null)){
            this.possiblyBroken = this.getConnectionHook().onConnectionException(this, state, e);
        } 
```

根据这些代码，`boneCP`当 SQLException 的状态等于“08001”、“08007”、“08S01”、“57P01”、“HY000”之一时，将其视为数据库服务器崩溃。

但是为什么，这些州代表什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T18:30:47.470

[前 2 个字符在SQL92 规范](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)的“Table_23-SQLSTATE_class_and_subclass_values”中指定。

这是相关性的摘录：

```
00  success completion
01  warning
02  no data
07  dynamic SQL error
08  connection exception
0A  feature not supported
21  cardinality violation
22  data exception
23  integrity constraint violation
24  invalid cursor state
25  invalid transaction state
26  invalid SQL statement name
27  triggered data change violation
28  invalid authorization specification
2A  direct SQL syntax error or access rule violation
2B  dependent privilege descriptors still exist
2C  invalid character set name
2D  invalid transaction termination
2E  invalid connection name
33  invalid SQL descriptor name
34  invalid cursor name
35  invalid condition number
37  dynamic SQL syntax error or access rule violation
3C  ambiguous cursor name
3D  invalid catalog name
3F  invalid schema name
40  transaction rollback
42  syntax error or access rule violation
44  with check option violation
HZ  remote database access 
```

其余字符取决于数据库供应商。所以一般建议只进行`startsWith()`检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T09:28:06.180

SQL 标准 (ISO/IEC-9075)，特别是书 2 Foundation 定义了 SQL 状态。它们是一个 2 个字符的类值，后跟一个 3 个字符的子类值。

> 以数字“0”、“1”、“2”、“3”或“4”之一或简单的拉丁大写字母“A”、“B”、“C”之一开头的类值， “D”、“E”、“F”、“G”或“H”仅在 ISO/IEC 9075 或任何其他国际标准中定义的条件下返回。[...] 与同样以这 13 个字符之一开头的此类相关的子类值仅针对 ISO/IEC 9075 或其他一些国际标准中定义的条件返回。[...] 与以数字“5”、“6”、“7”、“8”或“9”之一或简单的拉丁大写字母“I”之一开头的此类相关的子类值, 'J', 'K', 'L', 'M', 'N', 'O', 'P',
> 
> 以数字“5”、“6”、“7”、“8”或“9”之一或简单的拉丁大写字母“I”、“J”、“K”之一开头的类值， 'L'、'M'、'N'、'O'、'P'、'Q'、'R'、'S'、'T'、'U'、'V'、'W'、'X '、'Y' 或 'Z' 保留用于实现定义的异常条件，称为实现定义的类。除了“000”（表示没有子类）之外的所有子类值，与此类关联的所有子类值都保留用于实现定义的条件，并称为实现定义的子类。

*（来自 SQL:2011 第 2 册）*

这些标准类（和标准定义的子类）列在第 2（基础）、3（CLI）、4（PSM）、9（MED）、10（OLB）、13（JRT）和 14（XML）中。它还列出了某事是异常、警告、成功完成条件还是无数据完成条件（并非所有 SQL 状态都是错误！）

例如，您的问题中列出的 sqlstates 是：

*   `08001`: 类: 连接异常, 子类: SQL-client 无法建立 SQL-connection
*   `08007`：类：连接异常，子类：事务解析未知
*   `08S01`: 类：连接异常，子类：以S开头，所以是实现定义的子类（在ODBC中定义为通信链路故障）
*   `57P01`:class: 以5开头，所以是实现定义类，好像是PostgreSQL sqlstate for ADMIN SHUTDOWN
*   `HY000`: 类：CLI 特定条件（在第 3 本书 CLI 中定义），子类：（无子类）

`HY000`是一个非常通用的错误，因为某些数据库或驱动程序会为任何没有特定 sqlstate 的错误返回它，因此它通常被视为致命错误。我这样做是为了将 BoneCP 的行为视为杀死整个连接池的原因，这有点矫枉过正，`HY000`因为相对良性的错误也可能会被抛出。其他 sqlstates 通常表示连接到数据库有问题 ( `08001`, `08S01`) 或数据库不可用 ( `57P01`) 或数据库本身有问题 ( `08007`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:01:24.590

状态代码解释的链接实际上与您提到的代码块相同： [https ://github.com/wwadge/bonecp/blob/master/bonecp/src/main/java/com/jolbox/bonecp/ConnectionHandle.java #L163](https://github.com/wwadge/bonecp/blob/master/bonecp/src/main/java/com/jolbox/bonecp/ConnectionHandle.java#L163)

# xml - 无法将字符串中的 xml 加载到 xmldocument 对象

> ID：14404868
> 
> 赞同：0
> 
> 时间：2013-01-18T18:02:52.697
> 
> 标签：xml, vb.net

伙计们，我的 xml 在一个字符串中，我正在尝试将 xml 加载到字符串中，它向我显示错误。我正在尝试将字符串中的 xml 文档加载到 xmldocument 对象，但它显示以下错误：

**'=' 字符，十六进制值 0x3D，不能包含在名称中。第 10 行，第 27 位。**

我的 xml 在这样的字符串变量中：

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soapenv:Body>
<OTA_AirLowFareSearchRQ EchoToken="0" SequenceNmbr="0" TransactionIdentifier="0" AvailableFlightsOnly="" DirectFlightsOnly="" xmlns="http://www.opentravel.org/OTA/2003/05">
<POS xmlns="http://www.opentravel.org/OTA/2003/05">
<Source AgentSine="" PseudoCityCode="" TerminalID="1">
<RequestorID ID="AFFILIATE"/>
</Source>
<YatraRequests>
<YatraRequestDoNotHitCache="false" DoNotCache="false" YatraRequestTypeCode="SMPA" Description="" MidOfficeAgentID="28737" AffiliateID="TRAVELPARTNER" />
</YatraRequests>
</POS>
<TravelerInfoSummary>
<AirTravelerAvail>
<PassengerTypeQuantity Code="ADT" Quantity="1"/>
<PassengerTypeQuantity Code="CHD" Quantity="2"/>
<PassengerTypeQuantity Code="INF" Quantity="1"/>
</AirTravelerAvail>
</TravelerInfoSummary>
<SpecificFlightInfo>
<Airline Code=""/>
</SpecificFlightInfo>
<OriginDestinationInformation>
<DepartureDateTime>30/01/2013</DepartureDateTime>
<OriginLocation CodeContext="IATA" LocationCode=BLR>BLR</OriginLocation>
<DestinationLocation CodeContext="IATA" LocationCode=DEL>DEL</DestinationLocation>
</OriginDestinationInformation>
<TravelPreferences>
<VendorPref Code="SG"/>
<VendorPref Code="DN"/>
<CabinPref Cabin=Economy/>
</TravelPreferences>
</OTA_AirLowFareSearchRQ>
</soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:05:44.553

正如错误**明确**指出的那样，您的 XML 无效：

```
<YatraRequestDoNotHitCache="false" 
```

# objective-c - Objective-C 小数 0-60

> ID：14404869
> 
> 赞同：-4
> 
> 时间：2013-01-18T18:02:54.410
> 
> 标签：objective-c

我想这样做，当你乘法并且小数超过 60 时，它会在正常数字上再加一个（很难解释，但就像时钟一样：7:59、8:00 明白吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:07:47.093

你想做这样的事情......那么这就是答案

```
NSInteger seconds = totalSecondsSinceStart % 60;
NSInteger minutes = (totalSecondsSinceStart / 60) % 60;
NSInteger hours = totalSecondsSinceStart / (60 * 60);
NSString *result = [NSString stringWithFormat:@"%02ld:%02ld:%02ld", hours, minutes, seconds] 
```

编辑：

每当您想将 agian 舍入为 0 并将 +1 添加到先前的计数器时，请使用 : % 来查找余数。和 / 求商。将两者结合起来会给你想要的结果。

例如 num=95;

```
 sec=num%60; //remainder 35 is stored in sec.

 min=num/60; //evaluates to 1.somthing, but due to integer devision, quotient 1 is stored in min. 
```

# ruby - 带有 grep 远程日志文件的尾部

> ID：14404872
> 
> 赞同：6
> 
> 时间：2013-01-18T18:03:03.480
> 
> 标签：ruby, logging, grep, tail

我有这个代码来跟踪远程日志文件：

```
def do_tail( session, file )
  session.open_channel do |channel|
  channel.on_data do |ch, data|
    puts "[#{file}] -> #{data}"
  end
  channel.exec "tail -f #{file}" 
end

Net::SSH.start("host", "user", :password => "passwd") do |session|
  do_tail session, "/path_to_log/file.log"
  session.loop 
```

我只想检索带有**ERROR**字符串的行`file.log`，我正在尝试调用`tail -f #{file} | grep ERROR`但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-30T21:11:59.577

我不确定你想`tail -f #{file} | grep ERROR`在`.loop`. 该`-f`标志告诉`tail`保留流数据，并且您永远不会使用 Ctrl+C 退出该流。

您可能只想为此使用一个简单的 Bash 命令，甚至不需要该`.exec`方法。尝试如下操作：

```
def do_tail session, file
  @keyword = 'ERROR'
  session.open_channel do |channel|
    channel.on_data {|ch, data| puts "[#{file}] -> #{data}"}
    `grep #{keyword} #{file}`
  end 
end 
```

# vba - 重复宏代码

> ID：14404874
> 
> 赞同：0
> 
> 时间：2013-01-18T18:03:08.630
> 
> 标签：vba, excel

我记录了这个宏：

```
Sheets("Sheet1").Select
Range("D4:E4").Select
Application.CutCopyMode = False
Selection.Copy
Sheets("ALB3").Select
Range("C1").Select
ActiveSheet.Paste 
```

我想制作一个循环来重复这个过程。选择时从 D4:E4 到 D200:E200 范围

将其粘贴到从 ALB3 到 ALB196 的相应工作表名称上。

我在表 1 中的数据。

a 列是工作表名称，d4 和 e4 列是我要粘贴到已创建的每个工作表上的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:19:02.573

如果您尝试将范围从一张纸复制到另一张纸，则不需要循环，也不需要选择。您可以使用不使用剪贴板的复制语法。

尝试这个：

```
Sub CopyRangeToAnotherSheet()
    Dim source As Worksheet
    Dim target As Worksheet

    Set source = ActiveWorkbook.Sheets("Sheet1")
    Set target = ActiveWorkbook.Sheets("Sheet2")

    source.Range("D4:E200").Copy target.Range("ALB3")

End Sub 
```

要将源范围复制到工作簿中除源工作表之外的所有工作表，请尝试以下操作：

```
Sub CopyToAllSheets()
    Dim ws As Worksheet

    For Each ws In Worksheets
        CopyRangeToAnotherSheet (ws.Name)
    Next
End Sub

Sub CopyRangeToAnotherSheet(targetName As String)
    Dim source As Worksheet
    Dim target As Worksheet

    Set source = ActiveWorkbook.Sheets("Sheet1")
    Set target = ActiveWorkbook.Sheets(targetName)

    If target.Name <> source.Name Then
        source.Range("D4:E200").Copy target.Range("ALB3")
    End If
End Sub 
```

# iphone - 抗锯齿 UIimage 看起来模糊或锯齿状

> ID：14404877
> 
> 赞同：2
> 
> 时间：2013-01-18T18:03:25.773
> 
> 标签：iphone, ios, image, uiimageview, uiimage

我想在代表手表编号的圆圈中绘制 12 个图像，我已经阅读了 stackoverflow 上有关具有透明边框的图像的所有主题，但在我的情况下它不起作用

```
-(UIImage *)addImageNumber_:(UIImage *)img {

    int w = img.size.width;
    int h = img.size.height;

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(NULL, w, h, 8, 4 * w, colorSpace, kCGImageAlphaPremultipliedFirst);
    CGContextDrawImage(context, CGRectMake(0, 0, w, h), img.CGImage);
    CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1);
    CGContextSetShouldAntialias(context,YES);
    CGContextSetAllowsAntialiasing( context ,YES );
    CGAffineTransform transform;

    for (int x=0; x<=11; x++) {

        UIImage *timg1 = [UIImage imageNamed:@"2.png"];

        CGRect imageRect = CGRectMake(0, 0, timg1.size.width+2, timg1.size.height+2);
        UIGraphicsBeginImageContext(imageRect.size);
        [timg1 drawInRect:CGRectMake(1,1,timg1.size.width,timg1.size.height)];
        timg1 = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        transform = CGAffineTransformIdentity;

        CGContextDrawImage(context, CGRectMake((w-26)/2, 0, 26, 30), timg1.CGImage);

        transform = CGAffineTransformConcat(transform, CGAffineTransformMakeTranslation(-w/2, -w/2));
        transform = CGAffineTransformConcat(transform, CGAffineTransformMakeRotation(radians(30)));
        transform = CGAffineTransformConcat(transform, CGAffineTransformMakeTranslation(w/2, w/2));

        CGContextConcatCTM(context, transform);
    }

    CGImageRef imageMasked = CGBitmapContextCreateImage(context);
    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);
    return [UIImage imageWithCGImage:imageMasked];
} 
```

```
UIViewEdgeAntialiasing = YES;
UIImage *img = [UIImage imageNamed:@"test.png"];
UIImage *img2 = [self addImageNumber_:img ];
R1.image = img2;
[self.view addSubview:R1]; 
```

测试img是手表的背景，2.png是透明png，边框透明

![在此处输入图像描述](../Images/794b4826c3ff8510fc8c3af73eb4df35.png)

12 点和 6 点的数字看起来不错，因为它们没有旋转，其余的都是锯齿状的

![用文字绘制](../Images/e717fc93a094af70fc2c48c71a4231df.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T19:29:34.277

永远不要说`UIGraphicsBeginImageContext(imageRect.size)`。说`UIGraphicsBeginImageContextWithOptions(imageRect.size, NO, 0)`。这样，在双分辨率屏幕上，您将获得双分辨率图形上下文。

您甚至可以尝试将分辨率值设为 4 以进一步提高分辨率。

当然，您从预先绘制的“2”图像开始这一事实可能会限制您的分辨率；你不能用母猪的耳朵做一个丝绸钱包。从头开始绘制“2”作为字符串可能会好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:16:15.417

尝试

```
CGContextSetInterpolationQuality(context, kCGInterpolationHigh); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-12T16:24:32.107

斯威夫特 3：

```
context!.interpolationQuality = .high 
```

# jquery - jquery validate minlength 规则不起作用

> ID：14404884
> 
> 赞同：11
> 
> 时间：2013-01-18T18:03:57.557
> 
> 标签：jquery, jquery-validate

我有一个带有密码字段的表单。密码长度必须至少为 8 个字符。

```
<form action="/account/register" method="post" id="form-register">
<div class="input-row">
    <input name="data[User][password]" type="password" id="FUserPassword" class="required" placeholder="Password">
</div>

</form>

$("#form-register").validate({
        rules: {
            FUserPassword : {
                minlength: 8
            }
        }
    }); 
```

它应用“必需”规则，但它只是忽略“最小长度”规则。

我究竟做错了什么？我在其他页面上使用相同的代码（JS 部分），它按预期工作。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-19T17:09:26.763

Validate 查找**`name`**输入字段的 ，而不是`id`. 从该 `rules`选项的文档中：

> 定义自定义规则的键/值对。键是元素的名称（或一组复选框/单选按钮）

考虑到这一点，你应该使用这样的东西：

```
$("#form-register").validate({
    rules: {
        'data[User][password]': {
            minlength: 8
        }
    }
}); 
```

对于带有特殊字符的输入名称，请务必引用对象键。

**示例：http:** [//jsfiddle.net/kqczf/4/](http://jsfiddle.net/kqczf/4/)

# c++ - c++ 具有 std::thread 转换变量的多线程服务器

> ID：14404889
> 
> 赞同：2
> 
> 时间：2013-01-18T18:04:18.970
> 
> 标签：c++, multithreading, sockets

我刚开始用 C++ 编码，我正在尝试构建一个多线程服务器，但我遇到了一些错误。首先，这是我得到的代码：

```
while(true){
        printf("waiting for a connection\n");
        csock = (int*)malloc(sizeof(int));

        if((*csock = accept( hsock, (sockaddr*)&sadr, &addr_size))!= -1)
        {
            printf("---------------------\nReceived connection from   %s\n",inet_ntoa(sadr.sin_addr));
            //std::thread th(&Network::SocketHandler, NULL);

            std::thread th(Network::SocketHandler, (void*)csock);
            th.detach();
        }
        else
        {
            fprintf(stderr, "Error accepting %d\n", errno);
        }
    }

    }

    void Network::SocketHandler(void* lp)
    {
        int *csock = (int*)lp;

       char buffer[1024];
       int buffer_len = 1024;
       int bytecount;

       memset(buffer, 0, buffer_len);
       if((bytecount = recv(*csock, buffer, buffer_len, 0))== -1){
          fprintf(stderr, "Error receiving data %d\n", errno);

       }
       printf("Received bytes %d\nReceived string \"%s\"\n", bytecount, buffer);
       strcat(buffer, " SERVER ECHO");

       if((bytecount = send(*csock, buffer, strlen(buffer), 0))== -1){
          fprintf(stderr, "Error sending data %d\n", errno);

       }

       printf("Sent bytes %d\n", bytecount);

    } 
```

在此行编译时出现错误：

```
std::thread th(Network::SocketHandler, (void*)csock); 
```

说： std::thread::thread(_Callable&&, _Args&& ...) [with _Callable = void (Network:: *)(int* ); _Args = {void*}] 没有已知的参数 1 从 '' 到 'void (Network:: *&&)(int* )' 的转换</p>

我怎样才能解决这个问题？还是有更好的方法来创建多线程服务器任何其他帖子的示例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T18:20:51.490

当很明显您真正想要的是a 时，为什么要传入 a`void *`而不是a ？`int *``int *`

只需将函数签名更改为：

```
void Network::SocketHandler(int* csock) 
```

并删除执行调用的代码中的强制转换：

```
std::thread th(Network::SocketHandler, csock); 
```

现在，您仍然会收到错误，而且原因不同。`Network::SocketHandler`是成员函数。它需要一个`this`指针。通常，您会使用类似`object.SocketHandler(csock)`or的语法调用此类函数`objptr->SocketHandler(csock)`。当您以这种方式调用它时，`::std::thread`您并没有给它一个要调用的对象。它没有`this`指针。

您应该做的是将函数签名再次更改为：

```
static void Network::SocketHandler(int* csock) 
```

然后你的代码就可以正常工作了。它看起来不像函数使用任何成员变量，所以它不需要`this`指针。

另一方面，您似乎正在尝试调整最初为 pthread 编写的内容。如果我为 C++11 线程库执行此操作，我会以完全不同的方式执行此操作。

我看不到你的整个程序，所以我真的没有重新设计它的奢侈。但是，据我所见，我会进行以下调整：

```
while(true){
        printf("waiting for a connection\n");
        int csock = -1;

        if((csock = accept( hsock, (sockaddr*)&sadr, &addr_size))!= -1)
        {
            printf("---------------------\nReceived connection from   %s\n",inet_ntoa(sadr.sin_addr));
            //std::thread th(&Network::SocketHandler, NULL);

            std::thread th(Network::SocketHandler, csock);
            th.detach();
        }
        else
        {
            fprintf(stderr, "Error accepting %d\n", errno);
        }
    }

    }

    void Network::SocketHandler(int csock)
    {
       char buffer[1024];
       int buffer_len = 1024;
       int bytecount;

       memset(buffer, 0, buffer_len);
       if((bytecount = recv(csock, buffer, buffer_len, 0))== -1){
          fprintf(stderr, "Error receiving data %d\n", errno);

       }
       printf("Received bytes %d\nReceived string \"%s\"\n", bytecount, buffer);
       strcat(buffer, " SERVER ECHO");

       if((bytecount = send(csock, buffer, strlen(buffer), 0))== -1){
          fprintf(stderr, "Error sending data %d\n", errno);

       }

       printf("Sent bytes %d\n", bytecount);

    } 
```

这些变化相当微妙。C++11 线程库允许您调用函数并提供所有参数，并且它以线程安全的方式处理这些。不再需要传递`void *`，也不需要为这些参数使用`malloc`或`new`创建存储空间，您只需将线程需要的参数直接传递给线程构造函数即可。

实际上，您的程序存在内存泄漏。它从不回收它要指向的`malloc`空间`csock`。如果它运行了很长时间，它最终会耗尽内存，因为所有这些文件句柄的空间从未被回收。

您的程序也可能存在文件句柄泄漏。你没有出现`close`在`Network::SocketHandler`. 但由于我不了解您的整个计划，因此我无法确定这一点。

# annotations - @Around 建议访问 thisEnclosureJoinPointStaticPart

> ID：14404890
> 
> 赞同：2
> 
> 时间：2013-01-18T18:04:21.100
> 
> 标签：annotations, aspectj

我正在尝试使用注释样式对方面进行编码。我正在创建一个“环绕”建议，但我似乎找不到任何方法可以从建议方法中访问 thisEnclosureJoinPointStaticPart。每当我尝试为它定义一个参数时，我都会从 ajc 编译器中得到一个错误。

这是我的切入点和建议的声明：

```
@Pointcut("call(@xxx.api.annotation.InvokeOnEDT * gov.raptor..*.*(..))")
void invokeOnEDTPointCut()
{/*empty*/}

@Around("invokeOnEDTPointCut(thisEnclosingJoinPointStaticPart)")
public Object invokeOnEDT(final ProceedingJoinPoint thisJoinPoint, thisEnclosingJoinPointStaticPart) throws Throwable
{...} 
```

我知道这无法编译，我提供它以显示我“想要”做的事情，但找不到方法。我花了几个小时在网上搜索，我能找到的唯一例子是之前或之后的建议，它们似乎允许这种语法。周围的建议显然表现不同，但我发现没有任何讨论它。

我编译时收到的错误是这样的：

```
[ERROR] ...\aspects\DispatchEDTAspects.java:42:0::0 incompatible number of arguments to pointcut, expected 0 found 1 
```

关于如何从建议方法中访问 thisEnclosureJoinPointStaticPart 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T07:01:15.253

关于什么：

```
@Around("call(@xxx.api.annotation.InvokeOnEDT * gov.raptor..*.*(..))")
        public Object advice(final ProceedingJoinPoint thisJoinPoint, ProceedingJoinPoint.EnclosingStaticPart thisEnclosingJoinPointStaticPart) throws Throwable {
    ...
    } 
```

# firefox - Geb Firefox 驱动程序：为什么我的测试运行两次？

> ID：14404892
> 
> 赞同：3
> 
> 时间：2013-01-18T18:04:28.463
> 
> 标签：firefox, grails, selenium-webdriver, grails-2.0, geb

对不起所有这些代码，但我不知道是什么导致了我的问题，所以就这样吧。

我将geb 插件配置为使用JUnit 运行功能测试。所以我在我的**buildConfig.groovy**中有：

```
def seleniumVersion = "2.29.0"
def gebVersion = "0.7.0"

dependencies {
    // specify dependencies here under either 'build', 'compile', 'runtime', 'test' or 'provided' scopes eg.

    // runtime 'mysql:mysql-connector-java:5.1.5'

    provided('com.oracle:oracle:11.1.0.7.0')
    provided('com.oracle:i18n:10.2.0.5')

    test ("org.seleniumhq.selenium:selenium-chrome-driver:$seleniumVersion") {
        export = false
    }
    test("org.seleniumhq.selenium:selenium-firefox-driver:$seleniumVersion"){ 
        excludes "commons-io"
        export = false
    }
    test ("org.seleniumhq.selenium:selenium-ie-driver:$seleniumVersion") {
        export = false
    }

    test ("org.seleniumhq.selenium:selenium-support:$seleniumVersion") {
        export = false
    }
    test ("org.seleniumhq.selenium:selenium-remote-driver:$seleniumVersion") {
        export = false
    } 

    test ("org.codehaus.geb:geb-junit4:$gebVersion") {
        export = false
    }

}

plugins {
  build(":tomcat:$grailsVersion") {
  export = false
  excludes 'svn'
  }
  compile (":hibernate:$grailsVersion") {
  export = false
  excludes 'svn'
  }

  build (":release:2.0.0") {
  excludes 'commons-io','http-builder'
  export = false
  }

   compile(":spring-security-core:1.2.7.3") { excludes 'svn' }
   compile(":spring-security-ldap:1.0.6")

   compile (":remote-control:1.3") {
  export = false
   }

   test(":geb:$gebVersion") {
     export = false
   }
} 
```

我的 conf 文件夹中有一个**GebConfig.groovy ：**

```
driver = {
//def driver = new HtmlUnitDriver()
//driver.javascriptEnabled = true
//driver
def driver = new FirefoxDriver()
driver
} 

environments {
   // run as “grails -Dgeb.env=chrome test-app”
   // See: http://code.google.com/p/selenium/wiki/ChromeDriver
   chrome {
     driver = { new ChromeDriver() }
   }

   // run as “grails -Dgeb.env=firefox test-app”
   // See: http://code.google.com/p/selenium/wiki/FirefoxDriver
   firefox {
    driver = { new FirefoxDriver() }
  }
} 
```

我对登录进行了功能测试：

```
class LoginTests extends GebReportingTest {

    @Test
    void login() {
        to LoginPage
        at LoginPage

        username = "SERGIO"
        password = "SERGIO"

        loginButton.click()

        assert at(IndexPage)

        link.click()

    }

} 
```

这是我的两页：

```
class LoginPage extends Page {

    static url = "login/auth"

    static at = {
        title ==~ /Efetuar Login/
    }

    static content = {
        loginForm { $("form", id: "loginForm") }
        username { $("input", type:"text", id:"username") }
        password { $("input", type:"password", id:"password") }
        loginButton{ $("input", type:"submit", id:"submit") }
    }

}

class IndexPage extends Page {

    static at = {
        title ==~ /Security Service Index View/
    }

    static content = {
        description { $('h1') }
        link { $('a') } 
    }

} 
```

出于某种原因，我的功能测试运行了两次，不管我如何开始：

```
grails test-app :functional

grails test-app -functional 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-22T06:34:25.780

看起来 Geb 插件与 Grails 2.3.x 不完全兼容。由于某种原因，升级到 Geb 插件 0.9.2 后，测试会执行两次。

我相信这个问题与[https://jira.grails.org/browse/GRAILS-10552](https://jira.grails.org/browse/GRAILS-10552)以及作为[https://jira.grails.org/browse/GRAILS-6352](https://jira.grails.org/browse/GRAILS-6352)的一部分所做的更改有关。

在 Grails 2.3.x+ 中，GrailsS​​pecTestType 负责 Junit 和 Spock 测试： [https ://github.com/grails/grails-core/blob/bce298f0/grails-test/src/main/groovy/org/codehaus/groovy /grails/test/spock/GrailsS​​pecTestType.groovy#L33](https://github.com/grails/grails-core/blob/bce298f0/grails-test/src/main/groovy/org/codehaus/groovy/grails/test/spock/GrailsSpecTestType.groovy#L33)

看起来 Geb 插件正在将已弃用的 JUnit4GrailsTestType 添加到执行中： [https ://github.com/geb/geb/blob/584738cb/integration/geb-grails/scripts/_Events.groovy#L60-L67](https://github.com/geb/geb/blob/584738cb/integration/geb-grails/scripts/_Events.groovy#L60-L67)

这就是功能测试执行两次的原因。

这就是我在 Geb 0.9.2 / 0.9.3 版本中解决问题的方法。

```
grails test-app functional:spock 
```

看起来 Geb 版本 0.9.1 没有执行两次测试。

差异似乎是由这个提交引起的： [https ://github.com/geb/geb/commit/9c71e820](https://github.com/geb/geb/commit/9c71e820)

您还应该知道，您不应该在 Grails 2.3.x/2.4.x 中安装 Spock 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:49:43.057

嗨，Ruby 上的 Selenium WebDriver 并不多，但您似乎要启动 Firefox 两次，因为测试在两个实例中运行

# jquery - jQuery nav - 需要在子悬停时显示孙子链接 - jsfiddle

> ID：14404893
> 
> 赞同：0
> 
> 时间：2013-01-18T18:04:29.993
> 
> 标签：jquery, navigation

我的导航 90% 正常工作，但是一旦子（子导航）链接悬停，我就无法让我的孙子（第三级导航）显示。

这是我到目前为止所拥有的一个 jsfiddle：http: [//jsfiddle.net/CSwgQ/1/](http://jsfiddle.net/CSwgQ/1/)

仅供参考：“关于”下的每个子链接目前都有一个孙子链接进行测试。

```
<script type='text/javascript'>
            jQuery(document).ready(function($){
                var lastopen = null;
                var timeout = null;

                jQuery("#access ul li ul").show();
                jQuery("#access ul li ul li").hide();

                function showmenu(element)
                {
                    element.css("background","url('/var/www/wp-content/themes/GreatWall/images/arrow.png') no-repeat bottom");
                //  var children = element.find("ul li");
                    var children = element.children('ul').children('li')
                    children.show();
                }

                function hidemenu(element, fade)
                {
                    element.css("background","transparent");
                    var children = element.find("ul li");

                    fade = typeof(fade) != 'undefined' ? fade : false;
                    if(fade)
                    {
                        children.fadeOut(300);
                    }
                    else
                    {
                        children.hide();
                    }
                }

                jQuery("#access ul li").each(function(i,v){
                jQuery(v).mouseover(function(e){if(timeout != null){clearTimeout(timeout); timeout = null;} if(lastopen != null){hidemenu(lastopen);} lastopen = jQuery(this); showmenu(lastopen);});
                jQuery(v).mouseout(function(e){if(timeout != null){clearTimeout(timeout); timeout = null;} timeout=setTimeout(function(){hidemenu(lastopen, true); lastopen = null;},1500);});
                });

                //jQuery("#access ul li ul").css("display", "block");
                //jQuery("#access ul li").each(function(i,v){var width = 0; jQuery(v).find("ul li").each(function(ii,vv){width += jQuery(vv).width();}); var mid = jQuery(v).position().left+jQuery(v).width()/2-width/2; jQuery(v).find("ul li:first").css("margin-left", Math.min(Math.max(0, mid), 940-width));});
                //jQuery("#access ul li").each(function(i,v){var width = 0; jQuery(v).find("ul li").each(function(ii,vv){width += jQuery(vv).width();}); var mid = jQuery(v).position().left; jQuery(v).find("ul li:first").css("margin-left", Math.min(Math.max(0, mid), 940-width));});
                //jQuery("#access ul li ul").css("display", "none");
            });

            </script> 
```

任何帮助将不胜感激！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:20:44.833

试试这个脚本：http: [//jsfiddle.net/CSwgQ/3/](http://jsfiddle.net/CSwgQ/3/)

这是你要找的：

```
jQuery(document).ready(function ($) {
    $('.menu li').each(function(){
        $(this).hover(function(){
        $('> ul',this).show();
        },function(){
        $('> ul',this).delay(1000).fadeOut();
        });
    });
}); 
```

# wpf - Wpf Popup 失去焦点但保持打开状态

> ID：14404897
> 
> 赞同：1
> 
> 时间：2013-01-18T18:04:38.570
> 
> 标签：wpf, popup, focus

我有以下弹出窗口：

```
<Popup Name="popupBind"
               AllowsTransparency="True"
               Helpers:FocusHelper.IsFocused="{Binding RelativeSource={RelativeSource Self},
                                                       Path=IsOpen,
                                                       Mode=OneWay}"
               HorizontalOffset="-30"
               IsOpen="{Binding IsBindingBegun,
                                Mode=TwoWay}"
               Placement="Bottom"
               PlacementTarget="{Binding ElementName=bindButton}"
               StaysOpen="False"
               >
            <Border Background="{DynamicResource {x:Static Styles:CommonStyles.ButtonsPanelBackgroundKey}}"
                    BorderBrush="Black"
                    BorderThickness="1"
                    Padding="0">
                <StackPanel HorizontalAlignment="Stretch">

                    <StackPanel.Resources>
                        <TemplateSelectors:VersionRangeDataTemplateSelector x:Key="VersionRangeDataTemplateSelector" />
                        <Converters:RangeToVisibilityConverter x:Key="RangeToVisibilityConverter" />
                    </StackPanel.Resources>

                    <StackPanel Margin="5,5,5,2"
                                HorizontalAlignment="Stretch"
                                Orientation="Horizontal">

                        <StackPanel.Resources>
                            <Style TargetType="Button">
                                <Setter Property="Margin" Value="5" />
                            </Style>
                        </StackPanel.Resources>

                        <Button Command="{Binding BindCommand}"
                               >
                        </Button>
                        <Button Command="{Binding BindCommand}"
                                >
                        </Button>
                        <Button Command="{Binding BindCommand}"
                                >
                        </Button>
                        <Button Command="{Binding BindCommand}"
                                >
                        </Button>
                    </StackPanel>

                    <ItemsControl Margin="10,2,5,5"
                                  Focusable="False"
                                  Grid.IsSharedSizeScope="True"
                                  ItemTemplateSelector="{StaticResource VersionRangeDataTemplateSelector}"
                                  ItemsSource="{Binding Path=VersionsVm.TempRanges}">
                        <ItemsControl.Resources>
                            <Style TargetType="CheckBox">
                                <Setter Property="VerticalAlignment" Value="Center" />
                                <Setter Property="Padding" Value="0" />
                            </Style>

                            <Style TargetType="TextBlock">
                                <Setter Property="FontSize" Value="14" />
                                <Setter Property="VerticalAlignment" Value="Center" />
                                <Setter Property="Padding" Value="2" />
                            </Style>

                            <DataTemplate x:Key="TwoDistinctVersionsRangeTemplateKey">
                                <Grid Margin="2,4" HorizontalAlignment="Stretch">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" SharedSizeGroup="_1" />
                                        <ColumnDefinition Width="Auto" SharedSizeGroup="_2" />
                                        <ColumnDefinition Width="Auto" SharedSizeGroup="_3" />
                                        <ColumnDefinition Width="Auto" SharedSizeGroup="_4" />
                                        <ColumnDefinition Width="Auto" SharedSizeGroup="_5" />
                                        <ColumnDefinition Width="Auto" SharedSizeGroup="_6" />
                                        <ColumnDefinition Width="Auto" SharedSizeGroup="_7" />
                                    </Grid.ColumnDefinitions>

                                    <CheckBox Grid.Column="0" IsChecked="{Binding IncludeStartEdge, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                    <TextBlock Grid.Column="1" Margin="2,0,5,0">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IncludeStartEdge}" Value="True">
                                                        <Setter Property="Text" Value="[" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding IncludeStartEdge}" Value="False">
                                                        <Setter Property="Text" Value="(" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>

                                    <TextBlock Grid.Column="2"
                                               HorizontalAlignment="Left"
                                               Text="{Binding FromVersionName}"
                                               TextAlignment="Left" />

                                    <TextBlock Grid.Column="3"
                                               Width="10"
                                               Margin="5,0"
                                               HorizontalAlignment="Center"
                                               Text="-"
                                               TextAlignment="Center" />

                                    <TextBlock Grid.Column="4"
                                               HorizontalAlignment="Left"
                                               Text="{Binding ToVersionName}"
                                               TextAlignment="Left" />

                                    <TextBlock Grid.Column="5" Margin="5,0,2,0">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IncludeEndEdge}" Value="True">
                                                        <Setter Property="Text" Value="]" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding IncludeEndEdge}" Value="False">
                                                        <Setter Property="Text" Value=")" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>

                                    <CheckBox Grid.Column="6" IsChecked="{Binding IncludeEndEdge, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                </Grid>
                            </DataTemplate>

                            <DataTemplate x:Key="FixedVersionRangeTemplateKey">
                                <StackPanel>
                                    <TextBlock Margin="2,4"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               Text="{Binding FromVersionName}"
                                               TextAlignment="Left" />
                                    <StackPanel>
                                        <StackPanel.Visibility>
                                            <MultiBinding Converter="{StaticResource RangeToVisibilityConverter}">
                                                <MultiBinding.Bindings>
                                                    <Binding />
                                                    <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=UserControl}" />
                                                </MultiBinding.Bindings>
                                            </MultiBinding>
                                        </StackPanel.Visibility>
                                        <RadioButton Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor,
                                                                                                      AncestorType=UserControl},
                                                                       Path=DataContext.VersionsVm.ChangeTempRangeTypeCommand}"
                                                                                                              Content="&lt;" />
                                        <RadioButton Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor,
                                                                                                      AncestorType=UserControl},
                                                                       Path=DataContext.VersionsVm.ChangeTempRangeTypeCommand}"                                                         
                                                     Content="&lt;=" />
                                        <RadioButton Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor,
                                                                                                      AncestorType=UserControl},
                                                                       Path=DataContext.VersionsVm.ChangeTempRangeTypeCommand}"                                                         
                                                     Content="="
                                                     IsChecked="True" />
                                        <RadioButton Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor,
                                                                                                      AncestorType=UserControl},
                                                                       Path=DataContext.VersionsVm.ChangeTempRangeTypeCommand}"
                                                                                                              Content="&gt;=" />
                                        <RadioButton Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor,
                                                                                                      AncestorType=UserControl},
                                                                       Path=DataContext.VersionsVm.ChangeTempRangeTypeCommand}"
                                                                                                              Content="&gt;" />
                                    </StackPanel>
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.Resources>
                    </ItemsControl>
                </StackPanel>
            </Border>
        </Popup> 
```

我有一个非常奇怪的问题。
当我点击 Tab 时，左或右焦点离开弹出窗口并转到父窗口。Popus 保持打开状态。
我不知道为什么会这样。但我的键盘导航坏了。
我唯一可以怀疑的原因是 Popup 的父级是在 winforms ElementHost 中托管的 UserControl。
我不知道如何调试这个问题，所以我很感激任何有用的提示。
先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:20:21.773

对 IsOpen 进行绑定可以覆盖 StaysOpen 行为。如果没有看到更多内容，我无法判断，但是如果 IsOpen 绑定`True`从其源中持久保存一个值，那么无论焦点发生什么情况，都会使 Popup 保持打开状态。

# javascript - 在显示加载微调器之前等待？

> ID：14404901
> 
> 赞同：1
> 
> 时间：2013-01-18T18:04:52.270
> 
> 标签：javascript, jquery

我想在我的单页 Web 应用程序中使用加载微调器，如果您想在请求触发后立即显示微调器并在请求完成后立即隐藏它，这很容易做到。

由于请求通常只需要几百毫秒或更短的时间即可完成，因此我宁愿不立即显示微调器，而是先等待*X*毫秒，这样，对于那些完成时间少于 X 毫秒的请求，微调器不会t 在屏幕上闪烁然后消失，这可能会令人不快，尤其是在多个面板同时加载数据的时候。

我的第一直觉是使用 setTimeout，但我无法弄清楚如何取消多个计时器中的一个。

我是否必须创建一个 Timer 类才能停止和启动类似 setTimeout 的对象的不同实例？我是不是从错误的角度考虑这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:06:42.890

```
var timer = setTimeout(function () {
    startSpinner();
}, 2000); 
```

然后在您的回调中，您可以输入：

```
clearTimeout(timer);
stopSpinner(); 
```

您可以在某些课程`setTimout`中进行包装（我做过），但您不需要:)`clearTimeout``Timer`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T18:12:22.150

创建您的 jquery 函数：

```
(function ($) {
  function getTimer(obj) {
    return obj.data('swd_timer');
  }

  function setTimer(obj, timer) {
    obj.data('swd_timer', timer);
  }

  $.fn.showWithDelay = function (delay) {
    var self = this;
    if (getTimer(this)) {
      window.clearTimeout(getTimer(this)); // prevents duplicate timers
    }
    setTimer(this, window.setTimeout(function () {
      setTimer(self, false);
      $(self).show();
    }, delay));
  };
  $.fn.hideWithDelay = function () {

    if (getTimer(this)) {
      window.clearTimeout(getTimer(this));
      setTimer(this, false);
    }
    $(this).hide();
  }
})(jQuery); 
```

用法：

```
$('#spinner').showWithDelay(100); // fire it when loading. spinner will pop up in 100 ms
$('#spinner').hideWithDelay();    // fire it when loading is finished
                                  // if executed in less than 100ms spinner won't pop up 
```

演示：

*   [http://jsfiddle.net/4mVSK/1/](http://jsfiddle.net/4mVSK/1/)

# c# - 使用 LINQ 在 XML 中搜索坐标

> ID：14404903
> 
> 赞同：0
> 
> 时间：2013-01-18T18:04:58.227
> 
> 标签：c#, linq, api, windows-phone-7

我不是在寻找任何代码，只是在项目的特定方面提供建议。

我有一个包含坐标和建筑物名称的 XML 文件，并且我希望能够捕获该人所在位置的坐标（我将创建一个移动应用程序，所以这没关系）。

是否可以在 C# 中使用 LINQ 语句来实现上述场景？如果是这样，是否有可能获得近距离匹配？即，如果该人不在坐标中，则向他/她显示最近的匹配项。

我不是专门寻找任何代码，只是任何关于 LINQ 的提示、技巧或高级教程都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:22:40.277

您可以`System.Device.Location.GeoCoordinate`为此使用课程

```
List<GeoCoordinate> listTakenFromXml = ......
double lat = ......
double lon = ........
var nearest = new GeoCoordinate(lat, lon).NearestPoint(listTakenFromXml); 
```

* * *

```
public static class SoExtensions
{
    public static GeoCoordinate NearestPoint(this GeoCoordinate loc, IEnumerable<GeoCoordinate> coords)
    {
        GeoCoordinate minLoc = null;
        double minDist = double.MaxValue;
        foreach (var c in coords)
        {
            var dist = c.GetDistanceTo(loc);
            if ( dist < minDist)
            {
                minDist = dist;
                minLoc = c;

            }
        }
        return minLoc;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:26:50.760

请参阅[计算纬度/经度点之间的距离、方位等，](http://www.movable-type.co.uk/scripts/latlong.html)并使用最适合您情况的方法。如果您在列表中有一组点，一旦您进行了计算，那么 Linq to Object 的扩展可以帮助您根据需要确定您的逻辑。

# c++ - 在两个构造函数之间进行选择

> ID：14404904
> 
> 赞同：0
> 
> 时间：2013-01-18T18:05:05.920
> 
> 标签：c++, constructor

问题：我有一个带有两个构造函数的不可复制对象。我需要使用其中一个构造函数创建一个对象，然后在一些通用代码中使用它：-

使用可复制对象，它看起来像这样，并且很容易：

```
Object a;

if (condition) 
   a = Object(p1);
else
   a = Object(p2,p3,p4);

a.doSomething(); 
```

但是，该对象是不可复制的，所以我不得不这样做：

```
boost::scoped_ptr<Object> a;

if (condition) 
   a = new Object(p1);
else
   a = new Object(p2,p3,p4);

a->doSomething(); 
```

这感觉太复杂了。有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:09:40.427

这是一个非常可怕的黑客，假设`Object`是默认可构造的：

```
Object a;
a.~Object();

if (condition) { ::new (&a) Object(p1); }
else           { ::new (&a) Object(p2, p3, p4); } 
```

[不要使用这个。](https://stackoverflow.com/q/8829548/596781)

另一种选择是使用联合，但您也需要在该设置中手动调用析构函数。

* * *

[使用Boost.Optional](http://www.boost.org/libs/optional/)（使用[就地工厂](http://www.boost.org/libs/optional/doc/html/boost_optional/in_place_factories.html)）可以实现更清洁的解决方案。（感谢@K-Ballo 挖掘细节！）

```
#include <boost/optional.hpp>
#include <boost/utility/in_place_factory.hpp>

struct Object
{
    explicit Object(int) {}
    explicit Object(int, float, std::string) {}

    Object(Object const &)             = delete;
    Object(Object &&)                  = delete;
    Object & operator=(Object const &) = delete;
    Object & operator=(Object &&)      = delete;
};

boost::optional<Object> a;

if (condition) { a = boost::in_place(0); }
else           { a = boost::in_place(0, 1.0f, "two" ); } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T18:10:41.417

对我来说看起来完全合理。它清晰，简单且相对简洁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T19:57:23.127

```
auto const doSomethingTo = []( Object&& o ) { o.doSomething(); };
doSomethingTo( condition? Object( p1 ) : Object( p1, p2, p3 ) ); 
```

免责声明：编译器未触及代码。

* * *

**编辑**：上面的代码，当`Object( Object&& )`构造函数为时`private`，无法使用 MSVC 11.0 编译（甚至是去年 11 月的 CTP），但使用 MinGW g++ 4.7.1 和某些版本的[clang](http://stacked-crooked.com/view?id=88b7bff9908a78f85574efcf124d2f01)编译得很好。

看来[它应该编译](https://stackoverflow.com/a/14406177/464581)。

所以，这可能是 Visual C++ 中的一个错误——但不幸的是，我没有找到一个简单的解决方法。

* * *

对于假定为 Visual C++ 编译器错误的一个*令人不安的解决方法：*

```
#include <fstream>
#include <iostream>
using namespace std;

class Object
{
private:
    Object( Object const& );
    Object( Object&& );
public:
    void doSomething() const {}
    Object( int ) {}
    Object( int, int, int ) {}
};

int main( int argc, char* argv[] )
{
    int p1 = 0, p2 = 0, p3 = 0;
    bool condition = argc == 2;

    auto const doSomething1 = [=]() { Object o( p1 ); o.doSomething(); };
    auto const doSomething2 = [=]() { Object o( p1, p2, p3 ); o.doSomething(); };

    if( condition ) { doSomething1(); } else { doSomething2(); }
} 
```

另一个答案认为`new`（阅读：动态分配）是您唯一的选择。

那是错误的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T18:16:20.813

我没有看到*复杂性*......如果您需要基于声明指针的 if 条件有效地构造并使用 new 是您唯一的选择。您不一定需要做的是：

1.  使用 scoped_ptr （虽然这通常是个好主意）
2.  在“主”代码中的 if 中有构造函数。您的案例是工厂的典型用例（参见例如[http://en.wikipedia.org/wiki/Factory_method_pattern](http://en.wikipedia.org/wiki/Factory_method_pattern)）。

编辑：在第二句中添加了“有效地”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-19T01:33:49.603

您的解决方案确实没有任何问题，尽管正如其他人已经提到的那样，如果您使用条件运算符而不是 if 会更易读。但是你应该考虑重构的可能性。如果您将使用该对象的所有代码分解为一个单独的函数（通过引用获取该对象），则类似于：

```
if ( condition ) {
    Object a( p1 );
    doWhatever( a );
} else {
    Object a( p2, p3, p4 );
    doWhatever( a );
} 
```

可能更可取（或者不是——我认为在这两者之间进行选择没有任何“正确”的答案）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T18:18:25.427

我认为你的代码没问题。

您可能只想考虑*条件运算符* `? :`

```
boost::scoped_ptr<Object> a( condition ? new Object(p1) : new Object(p2,p3,p4) );
a->doSomething(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-21T16:14:03.453

所以，这里有一个快速的技巧来完成这项工作，而无需手动构造对象。相反，我创建了一个`Deferred<T>`模板来表示自动存储中的一个对象，该对象的构造被延迟（并且可能永远不会发生）。

`buff`in`Deferred`应该替换为 a `union`，因为这将处理对齐问题（假设您有 C++11 特性来支持它）。`constructed`当你打电话时断言它是正确`get()`的可能是一个好主意。

一旦你构建了你的对象，你可以隐式地将你的对象`Deferred<T>`转换为 a `T&`，然后将其`T&`用作 deferred-constructed 的别名`T`。

从理论上讲，`constructed` `bool`如果你能证明它总是会被构造，你可以取消它，但我建议不要这样做。除此之外，这应该几乎与您可以完成的一样有效。对于 C++11`union`案例，它甚至可能符合标准。

哦，是的，它应该通过完美的转发来增强。

```
#include <utility>

// does not handle alignment issues:
template<typename T>
struct Deferred {
   Deferred():constructed(false) {}
  operator T&() { return get(); }
  T& get() { return *reinterpret_cast<T*>(&buff[0]); }
  template<typename... Args>
  T& construct( Args... args ) {
    new(&buff[0]) T(args...);
    constructed = true;
    return get();
  }
  ~Deferred() {
    if (constructed) {
      get().~T();
    }
  }
private:
  bool constructed;
  char buff[sizeof(T)];
};

#include <iostream>

struct Object {
  bool is_int;
  Object( int x ):is_int(true) {}
  Object( double d ):is_int(false) {}
  ~Object() {
    std::cout << "~Object("<<is_int<<") destroyed\n";
  }
};

enum which_test {
  as_int,
  as_double,
  do_not,
};
void test(which_test v) {
  std::cout << v << "\n";
  Deferred<Object> o;
  if(v==as_int) {
    o.construct( 7 );
  } else if (v==as_double) {
    o.construct( 7.0 );
  } else {
  }
}

int main() {
  test(as_int);
  test(as_double);
  test(do_not);
} 
```

# php - 此表单中的提交值在哪里？

> ID：14404905
> 
> 赞同：1
> 
> 时间：2013-01-18T18:05:07.043
> 
> 标签：php

我得到了这个脚本：

```
<?php
if (!isset($_POST) || empty($_POST)) {
    ?>
    <form name="form1" method="post" action="">
        <input type="text" name="textfield"><br />
        <input type="submit" name="Submit" value="Submit">
    </form>
    <?php
} else {
    $roughHTTPPOST = readfile("php://input");
    echo $roughHTTPPOST;
}
?> 
```

每次我提交表单时，我都会得到一个包含文本字段和提交值的字符串，文本字段值非常简单明了。但是我不知道提交值来自哪里？这是我输入“a”字符并提交表单时返回的示例字符串：

> textfield=a&Submit=Submit25 P/S：我这里的意思是'Submit'后面附加的值**25**，它是从哪里来的，textfield的值很容易理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T04:06:05.067

该值`25`被附加，因为这是 的返回值`readfile()`，即从中读取的字节数`php://input`。

```
echo file_get_contents('php://input'); 
```

这将给出预期的输出。

* * *

的价值`Submit=Submit`只是来自您的标记：

```
<input type="submit" name="Submit" value="Submit"> 
```

如果您想删除它，只需删除该`name`属性，浏览器就不会发送它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:06:46.853

这来自：

```
... name="Submit" ... 
```

# android - 在 ListView 中显示每个项目的动画

> ID：14404906
> 
> 赞同：0
> 
> 时间：2013-01-18T18:05:08.510
> 
> 标签：android

我想在从 ListView 中删除的项目上显示褪色动画，并且它下方的所有项目都向上滑动以更改位置。例如，我有

1

2 去掉这个，显示褪色动画

3

4

然后

1

3 从最后一个位置向上滑动

4 从最后一个位置向上滑动

我可以使删除的项目显示褪色动画，但我不知道如何显示以下项目的动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:13:29.437

来自用户@ASH

`getView()`在自定义适配器的方法中为每个添加的元素设置动画。

```
public View getView(int position, View convertView, ViewGroup parent) {

    View v = convertView;

    if (v == null) {
        LayoutInflater vi = (LayoutInflater) getActivity()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.simple_list_item_1, null);
    }

    ListData o = list.get(position);
    TextView tt = (TextView) v.findViewById(R.id.toptext);

    tt.setText(o.content);

    Log.d("ListTest", "Position : "+position);
   if(flag == false) {
      Animation animation = AnimationUtils.loadAnimation(getActivity(),R.anim.slide_top_to_bottom);
      v.startAnimation(animation);}
   return v;
} 
```

# heroku - 如何与 Vagrant shell 配置脚本进行交互？

> ID：14404914
> 
> 赞同：15
> 
> 时间：2013-01-18T18:05:38.167
> 
> 标签：heroku, vagrant

我有一个 shell 配置脚本，它调用需要用户输入的命令 - 但是当我运行时`vagrant provision`，进程在脚本中的那个点挂起，因为命令正在等待我的输入，但无处可提供。有什么办法可以解决这个问题 - 即强制脚本以某种交互模式运行？

具体来说，我创建了一个干净的 Ubuntu VM，然后调用 Heroku CLI 下载数据库备份（这在我的配置脚本中）：

```
curl -o /tmp/db.backup `heroku pgbackups:url -a myapp` 
```

但是，由于这是一个干净的 VM，因此这是我第一次运行 Heroku CLI 命令，系统会提示我输入登录凭据。因为脚本是由 Vagrant 管理的，所以没有附加交互式 shell，所以脚本就挂在那里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-09T19:57:14.917

如果您想将临时输入或变量传递给 Vagrant 脚本，您可以让它们输入其凭据作为该命令的临时环境变量，方法是将它们放在同一行的第一个位置：

```
username=x password=x vagrant provision 
```

并从 Vagrantfile 中访问它们

```
$u = ENV['username']
$p = ENV['password'] 
```

然后您可以将它们作为参数传递给您的 bash 脚本：

```
config.vm.provision "shell" do |s|
    s.inline: "echo username: $1, password: $2"
    s.args: [$u, $p]
end 
```

您可以在 vm 中安装类似 expect 的东西来处理将这些变量传递给 curl 命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T05:51:16.537

我假设您不想用纯文本硬编码您的凭据，从而试图强制使用交互模式。事情就像您一样，我在 vagrant provision doc ( [http://docs.vagrantup.com/v1/docs/provisioners/shell.html](http://docs.vagrantup.com/v1/docs/provisioners/shell.html) ) 中没有看到这样的选项，所以您需要以一种或另一种方式将身份验证嵌入到您的脚本。您是否考虑过使用诸如获取令牌之类的东西并使用 heroku REST Api 而不是 CLI？ [https://devcenter.heroku.com/articles/authentication](https://devcenter.heroku.com/articles/authentication)

# android - Android 谷歌地图显示空白网格

> ID：14404915
> 
> 赞同：0
> 
> 时间：2013-01-18T18:05:41.347
> 
> 标签：android, google-maps, api-key

我已经多次看到这个问题被问过，但似乎没有一个解决方案对我有用。

我试图在我的应用程序中创建一个显示谷歌地图的活动，但是当我在 AVD 中运行我的应用程序时，地图当前只显示空白图块。

我相信我已经使用以下命令正确生成了调试 API 密钥：

```
keytool -v -list -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android 
```

并将 SHA1 密钥输入到 Google API 访问请求中。我还在活动的 xml 中包含了带有键的 mapview，以及活动类中所需的 isRouteDisplayed 方法。

此外，logcat 的错误消息说 com.google.android.gms 打开跟踪文件时出错：没有这样的文件或目录 (2)。但是，它没有指定丢失的文件。

我的清单文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="..."
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<uses-feature
  android:glEsVersion="0x00020000"
  android:required="true"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <uses-library android:name="com.google.android.maps" />

    <activity>
        ....some activities
    </activity>

</application> 
```

有人可以指出问题发生在哪里吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:11:25.257

> 并将 SHA1 密钥输入到 Google API 访问请求中

您需要提供 MD5 密钥。

[注册页面](https://developers.google.com/maps/documentation/android/v1/mapkey#getfingerprint)上的说明不太正确。要获取 MD5 指纹，`-v`请在命令中添加选项：

```
keytool -v -list -alias alias_name -keystore my-release-key.keystore 
```

# javascript - 如何从表单中获取值并阻止提交？

> ID：14404922
> 
> 赞同：0
> 
> 时间：2013-01-18T18:05:53.210
> 
> 标签：javascript, html, forms

我有这个简单的形式：

**HTML**

```
<form>
    <label for="eName">Name</label>
    <input id="eName" type="text" name="eName">
    <label for="Email">Email</label>
    <input id="Email" type="text"  name="Email">
    <button id="create" class="boton" 
        onclick="doSomething();" type="submit">Create!</button>
</form> 
```

**JS**

```
function doSomething() {
    var name, email;
    name = document.getElementById("eName").value;
    email = document.getElementById("Email").value;
    putElementsIntoTheDOM(name, email);
} 
```

当用户输入一些信息时，我想用用户输入填充 DOM。上面的例子有效。但我认为它可以做得更好。我只是不知道怎么做。

如何连接，`<button>`以便当用户单击它时将表单值传递给函数`doSomething()`？

此外，由于除了填充 DOM 之外，我不会在任何地方发送表单值，我该如何阻止提交？

我见过这样的事情，但我不能让它太有效。

```
<button id="create" class="boton" onclick="doSomething(this.form);"     
    type="submit">Create!</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:08:10.000

首先，您必须更新函数声明才能接收要发送的变量

```
function doSomething(name,email) {
} 
```

其次，如果您必须将某些字段的值发送到该函数，您可以像这样在单击按钮时执行此操作。

```
<button id="create" class="boton" onclick="doSomething(document.getElementById('eName').value,document.getElementById('Email').value);" type="submit">Create!</button> 
```

但是，建议使用不显眼的 javascript，因为 jQuery 是您可以用来将变量巧妙地传递给函数的选项之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:13:46.843

如果您不想将表单值发送到任何地方，那么您只需`type="submit"`要从按钮中删除即可。

您的示例代码工作正常。我不确定你所说的“更好”的方式是什么意思。更现代/惯用的 javascript 不会使用该`onclick`属性，而是将 doSomething 绑定到按钮。使用 jQuery，看起来像：

```
$("#create").click(doSomething); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:58:13.103

`type="submit"`和`type="button"`我没有意识到的区别。
此外，`button`and`submit`类型对`onclick`and`onsubmit`事件的反应也不同。

例如

```
<form onclick="doSomething()">
<label for="eName">Name</label>
<input id="eName" type="text" name="eName">
<label for="Email">Email</label>
<input id="Email" type="text"  name="Email">
<button id="create" class="boton" type="button">Create!</button>
</form> 
```

请注意，在顶部`form`有`onclick`. 每当您关注输入元素时都会触发 ，当然如果您单击按钮
。`onclick`

将表单更改为`<form onsubmit="doSomething();`但不更改`type="button"`不会执行任何操作。单击按钮不会触发该功能。

通过更改`type="submit"`并保持头部`<form onsubmit="doSomething();`在单击按钮时触发该功能。一个很好的附加功能是，如果您有任何功能`<input ... required="required">`，`submit`则只有在填写了这些字段时才会起作用（并且您的表单将让您知道必填字段）。

为了防止提交/刷新（因为我只是用用户输入填充 DOM）`return false`，在表单头部添加会阻止提交
`<form onsubmit="doSomething(); return false">`。

最后，要获取表单值添加`this`:
`<form onsubmit="doSomething(this); return false>`然后

```
function doSommething(formInfo) {
   var name = formInfo.eName.value;
   var email = formInfo.Email.value;
   ... 
 } 
```

# css - Twitter Bootstrap 上的插入符号是如何构建的？

> ID：14404923
> 
> 赞同：14
> 
> 时间：2013-01-18T18:05:55.910
> 
> 标签：css, twitter-bootstrap

这更像是一个好奇的问题，而不是我真正需要知道的问题。

在本页面：

[http://twitter.github.com/bootstrap/components.html#buttonDropdowns](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)

小插入符号/向下箭头是如何构造的？用 Firebug 到处乱逛，看起来它只是用透明边框制成的，但是……我一定遗漏了一些东西。

Bootstrap 非常酷。我刚刚开始使用 Symfony。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-18T18:10:26.650

它只有边界。当您看到这样的箭头时，开发人员很可能使用伪元素来创建它们。基本上发生的事情是您创建了一个没有内容的透明框，并且由于那里什么都没有，您所看到的只是边框的一个角。这方便地看起来就像一个箭头。

怎么做：

```
.foo:before {
    content: ' ';
      height: 0;
      position: absolute;
      width: 0;
      border: 10px solid transparent;
      border-left-color: #333;
} 
```

[http://jsfiddle.net/fGSZx/](http://jsfiddle.net/fGSZx/)

以下是一些可以提供帮助的资源：

[CSS-Tricks 中的 CSS 三角形](http://css-tricks.com/snippets/css/css-triangle/)（这应该可以清除所有内容）

[关于 :before 和 :after 的 Smashing Mag 文章](http://coding.smashingmagazine.com/2011/07/13/learning-to-use-the-before-and-after-pseudo-elements-in-css/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-19T20:06:14.307

这是基于引导程序中的 CSS 的向上插入符号的 CSS：

```
.caret-up {
  display: inline-block;
  width: 0px;
  height: 0px;
  margin-left: 2px;
  vertical-align: middle;
  border-top: none;
  border-bottom: 4px solid #FFFFFF;
  border-right: 4px solid transparent;
  border-left: 4px solid transparent;
  border-top-width: 0px;
  border-top-style: dotted;
  content: "";
} 
```

# r - colSums() 的特殊使用，na.rm = TRUE 仅当缺少 1 个或更少时

> ID：14404924
> 
> 赞同：2
> 
> 时间：2013-01-18T18:05:58.973
> 
> 标签：r, if-statement, sum, na, na.rm

我需要对 data.frame 中的一些列进行求和，其中一条规则是，`NA`如果缺少一个以上的观察值，`NA`如果只有 1 个或更少的观察值无论如何都将被求和，则该列将被求和。

假设我有一些这样的数据，

```
dfn <- data.frame(
a  = c(3, 3, 0, 3),
b  = c(1, NA, 0, NA),
c  = c(0, 3, NA, 1))

dfn
  a  b  c
1 3  1  0
2 3 NA  3
3 0  0 NA
4 3 NA  1 
```

我应用我的规则，并对缺少 2 个的列求和`NA`。所以我得到这样的东西。

```
 a  b  c
1 3  1  0
2 3 NA  3
3 0  0 NA
4 3 NA  1
5 9 NA  4 
```

我玩过`colSums(dfn, na.rm = FALSE)`and `colSums(dfn, na.rm = TRUE)`。在我的真实数据中，有超过 3 列，也有超过 4 行。我想我可以以某种方式计算失踪人数并将其用作规则？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T18:17:18.623

我不认为你可以单独做到这一点`colSums`，但你可以使用添加到它的结果`ifelse`：

```
colSums(dfn,na.rm=TRUE) + ifelse(colSums(is.na(dfn)) > 1, NA, 0)
 a  b  c 
 9 NA  4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:40:23.097

@James 的回答没有问题，但这里有一个更简洁的方法：

```
colSums(apply(dfn, 2, function(col) replace(col, match(NA, col), 0)))
# a  b  c 
# 9 NA  4 
```

`match(NA, col)``NA`返回col中第一个的索引，`replace`将其替换为`0`并返回新列，并`apply`返回`matrix`所有新列的 a。

# javascript - JS对话框按钮改变大小，异常小

> ID：14404928
> 
> 赞同：0
> 
> 时间：2013-01-18T18:06:13.953
> 
> 标签：javascript, jquery

我正在使用 Jquery 1.8.3，我注意到在我的对话框中，当用户单击选择按钮（我将按钮文本更改为应用并在对话框中显示新的 div）并且当按钮文本为应用时，按钮尺寸变得异常小。

有任何想法吗？

```
ErrorCodeDialog = $("#treeview").dialog(
{ 
    closeOnEscape: true, 
    stack: false, 
    autoOpen: true, 
    modal: true, 
    resizable: false, 
    draggable: true, 
    title: 'Select and input Error details', 
    width: 480, 
    height: 500,

    buttons: 
    { 
        Select: function () 
        {
            var btnText = '';
            $('.ui-dialog-buttonpane :button').each(function () 
            {
                if ($(this).text() == 'Select') 
                {
                    btnText = 'Select';
                    $(this).text('Apply');
                    $("#errorCodes").attr("style", "display:none;");
                    $("#inputReps").attr("style", "display:inline;");
                }
                else if ($(this).text() == 'Apply') 
                {
                    btnText = 'Apply';
                    $(this).text('Select');
                    $("#errorCodes").attr("style", "display:inline;");
                    $("#inputReps").attr("style", "display:none;");
                }
            }); 
```

# ios - 写入流 iOS 时自旋锁（仅在模拟器上）

> ID：14404935
> 
> 赞同：0
> 
> 时间：2013-01-18T18:06:49.927
> 
> 标签：ios, objective-c, cocoa-touch

每当我将应用程序发送到后台时，我都会收到自旋锁错误。这是我最小化应用程序时的代码：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
    if (savedResults || savedSchedule || watchingClasses || professors) {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *docDir = [paths objectAtIndex:0];
        NSString *fullPath = [docDir stringByAppendingFormat:@"/%@", kFileName];
        NSMutableArray *array = [NSMutableArray arrayWithCapacity:4];
        if (!savedResults)  {
            [array addObject:[NSNull null]];
        }else {
            [array addObject:savedResults];
        }
        if (!savedSchedule) {
            [array addObject:[NSNull null]];
        }else {
            [array addObject:savedSchedule];
        }
        if (!watchingClasses) {
            [array addObject:[NSNull null]];
        }else {
            [array addObject:watchingClasses];
        }
        if (!serverAnnouncements) {
            [array addObject:[NSNull null]];
        }else {
            [array addObject:serverAnnouncements];

        }if (!professors) {
            [array addObject:[NSNull null]];
        }else {
            [array addObject:professors];
        }
        [NSKeyedArchiver archiveRootObject:[array copy] toFile:fullPath];
    }
        //close connection
    if (outputStream) {
        if ([outputStream hasSpaceAvailable]) {
            dispatch_queue_t task = dispatch_queue_create("Close Connection", nil);
            NSString *str = @"_CLOSE_CONNECTION*\n";
            NSData *dataToSend = [[NSData alloc] initWithData:[str dataUsingEncoding:NSUTF8StringEncoding]];
            dispatch_async(task, ^{
                [outputStream write:[dataToSend bytes] maxLength:[dataToSend length]];
            });
        }
    }
    [inputStream close];
    [outputStream close];
    inputStream = nil;
    outputStream = nil;
    [inputStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [outputStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    initializedSocket = NO;

    [FlurryAds setAdDelegate:nil];
} 
```

我在 ouputStream 写入方法上得到一个 EXC_BAD_ACCESS。我也附上截图。![图片](../Images/6529f132ab7fdcd92f5f27f2457db755.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:13:00.923

看起来像一个悬空指针。

该流在 ivar 中被引用，因此您调度的块仅保留`self`，而不是`self->outputStream`。当您在分派块后立即清除 ivar 时，对它的唯一强引用将消失，并且流在仍在使用时被释放，从而导致崩溃。

为避免此问题，请确保您的块通过使用本地范围的变量而不是 ivar 来维护对流的强引用：

```
NSOutputStream *os = self->outputStream;
dispatch_async
(
    ...,
    ^ {
        [os write:...];
    }
); 
```

请注意，在这里为这一块创建一个调度队列是没有意义的；你应该只使用全局队列。

# jquery - jQuery Validate，但仅在初始提交之后

> ID：14404941
> 
> 赞同：5
> 
> 时间：2013-01-18T18:07:39.323
> 
> 标签：jquery, jquery-validate

我正在使用非常好的 bassistance 验证插件来满足我所有的表单验证需求： [http ://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

我遇到的一个问题：即使用户还没有完成一个字段，错误消息也会立即出现。因此：在用户完成输入之前，会出现无效的电子邮件。

[在此处](http://docs.jquery.com/Plugins/Validation/validate#toptions)的文档中，一种解决方案是将选项设置`onkeyup`为`false`导致错误消息仅出现 onblur。

但是，在**我的设置**中，我遇到了两个额外的问题（上面的解决方案没有解决）

1.  提交无效表单后，更正错误消息时不会清除它们
2.  使用浏览器自动填充功能时，自动填写的字段会一直标记为错误。

所以，我最初的问题是：我怎样才能让 Bassistance 验证仅在第一次提交后触发，并且从那里开始使用它的默认设置？

这是我的代码：

```
if($('#contact_form').length) {
    $("#contact_form").validate({
        rules: {
            first_name: {
                required: true
            },
            last_name: {
                required: true
            },
            message: {
                required: true
            },
            telephone: {
                required: true
            },              
            email: {
                required: true,
                email: true
            },
            email_again: {
                required: true,
                email: true,
                equalTo: "#email"
            },
            norobot: {
                required:true,
                minlength:4,
                maxlength:4,
                number:true     
            }
        }
    });
} 
```

请在此处找到完整的 JavaScript：http: [//lad.chocolata.be/js/main.js](http://lad.chocolata.be/js/main.js)

`onkeyup`这是一个设置为错误的工作示例：http `false`: [//lad.chocolata.be/nl/contact](http://lad.chocolata.be/nl/contact)

提交带有一些无效字段的表单后，错误消息在更正时不会清除。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T17:05:07.380

> **引用 OP：** *“所以，简单明了，我的问题是：我怎样才能让 Bassistance 验证仅在第一次提交后才触发，并且从那里开始使用它的默认设置？”*

**对读者的警告：** 通常，人们会在准备好初始化表单的 DOM 上调用`.validate()` *一次。*下面的代码仅在最初按下提交按钮时调用`.validate()` *一次*......因此，在第一次按下该按钮之前不会进行**任何验证。**

不需要`.validate()`多次调用，所以我使用了[jQuery`one()`事件](http://api.jquery.com/one/)。

```
$(document).ready(function() {

    $('#submit').one('click', function() {
        $('#myform').validate({
            // your rules & options
        });
    });

}); 
```

**工作演示：**

[http://jsfiddle.net/hSDyP/](http://jsfiddle.net/hSDyP/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T18:09:44.090

我写了一个通用的解决方案来避免在第一次提交之前应用验证。只需在包含脚本 'jquery.validate.js' 后使用此代码：

```
(function($){

var _validate = $.fn.validate;

$.fn.validate = function(){
    var result, args = Array.prototype.slice.apply(arguments);
    this.each(function(){
        var $this = $(this),
            lazyValidate = $this.data('lazy-validate');
        // Lazy validation has been initialized: just delegate
        if( lazyValidate === true ){
            result = _validate.apply($this, args);
            return;
        }
        // Init, if not yet
        if( !lazyValidate ){
            // Create Lazy Form 
            lazyValidate = $('<form />')[0];
            $this.data('lazy-validate', lazyValidate);
            // Add One-Time submit handlder
            $this.one('submit.lazy-validate', function(){
                var $this = $(this);
                // Apply validation options now
                _validate.call($this, $(lazyValidate).data('validator').settings);
                // Mark lazy validation has initialized
                $this.data('lazy-validate', true);
                // Test Valid
                return $this.valid();
            });
        }
        // Apply Method to Lazy Form
        result = _validate.apply($(lazyValidate), args);
    });
    return result === undefined ? this : result;        
};  

})(jQuery); 
```

请记住，如果您使用字段的方法，解决方案将不起作用：rules()、removeAttrs()。

最后，我认为这个功能应该作为一个简单的 validate() 选项包含在 valation 插件中；但在那之前，我仍然会使用这个技巧。

# matlab - 如何在 Matlab 中创建可以使用灯光对象点亮的 3D 线对象？

> ID：14404942
> 
> 赞同：1
> 
> 时间：2013-01-18T18:07:42.390
> 
> 标签：matlab, 3d, line, lighting

我有 3 个向量，它们指定 3 空间中一条线上各个点的 X、Y 和 Z 坐标。我使用plot3绘制它们，即

```
plot3(X,Y,Z,'go-','LineWidth',4,'MarkerSize',32);
grid on 
```

获取网格上的 3D 线对象。我希望能够使用 lightangle 之类的命令来更改对象上的照明，但它似乎只适用于使用 surf、mesh 等创建的对象。有没有人有一个好方法可以将我的线变成我的对象可以调节灯光吗？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-29T14:18:32.343

线对象在 Matlab 中没有光照属性，但补丁边缘有。

绘制一条“线”

```
% NaNs make the patch effectively faceless, with only an edge
p = patch([X,nan], [Y,nan], [Z,nan], 'k', ...
    'EdgeColor', 'g', 'EdgeLighting', 'Gouraud'); 
```

现在你有一个`p`名为“line”的属性

```
p.VertexNormals % or get(p, 'VertexNormals') in pre-2014b 
```

这定义了线的法线向量，其方向用于计算照明效果。默认情况下`p.VertexNormals`将全部`[0, 0, 1]`用于边缘，指向 Z 轴。您可以手动替换`VertexNormals`以更改每个面片边缘顶点上的照明效果。

指向光的法线向量意味着物体上的一个点会显得更亮，那些指向远离的点会显得更暗。

# rabbitmq - 让 RabbitMQ 等待消息消费，然后引发异常

> ID：14404947
> 
> 赞同：1
> 
> 时间：2013-01-18T18:07:54.467
> 
> 标签：rabbitmq

有什么办法可以做到这一点：

*   将消息写入队列
*   阻塞生产者进程，直到对方有消费者
*   如果 10 秒后没有消费者，则引发异常
*   如果有消费者，解封生产者进程
*   **当达到 10 秒超时并且在生产者端引发异常时，应该将消息保留在队列中，以便消费者稍后可以使用它**

我希望能够以异步方式通知消费者。直到现在我正在发送一条消息。我想知道是否有直接消费者，但如果没有，消息应该仍在队列中。这似乎不是“立即” amqp 事情的行为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:44:58.290

有趣的问题，不幸的是没有一个优雅的解决方案。

从 RabbitMQ 文档中，“立即”标志的工作方式如下：

> 如果消息不能立即路由到队列使用者，该标志告诉服务器如何反应。如果设置了此标志，服务器将使用 Return 方法返回无法投递的消息。如果此标志为零，服务器将对消息进行排队，但不保证它会被使用。

您可以使用立即标志部分解决您的问题，我在想这样的事情：

*   当生产者准备好将消息排队时，它会使用立即标志设置来触发它

*   如果返回消息，则启动一个计时器并在设置立即标志的情况下继续重试 10 秒

*   如果尝试 10 秒后仍然无法被拾取，则将其立即标志设置为 false 发布（以便消费者在线时将其拾取）

# java - 为什么人们会在 Java 中创建像 edu.mit.stk 这样的目录结构？

> ID：14404958
> 
> 赞同：7
> 
> 时间：2013-01-18T18:08:34.483
> 
> 标签：java

我的问题是为什么人们创建目录结构时至少有一个名为 edu 的文件夹，然后是另一个名为 mit 的文件夹（例如），然后是子文件夹中的所有代码？

这是某种标识符吗？

计算机是否出于某种原因实际使用了该结构 - 还是只是用于帮助读者？

如果是这样，它对读者有什么帮助？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T18:10:50.420

这样做是为了防止名称冲突。默认规则是使用您的域名的反向作为包结构

因此，谷歌会将他们所有的代码保存在`com.google.*`包中，而微软会将他们的代码保存在`com.microsoft.*`包中。然后，如果两家公司都实现了 SearchEngine 类，就不会发生命名冲突。

教育机构做同样的事情，所以你知道子包中的任何代码都可能是由[麻省理工学院](http://www.mit.edu)`edu.mit.*`的一个小组开发的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T18:09:58.143

Java 约定是安排源目录以匹配包层次结构。参见例如[*管理源文件和类文件*](http://docs.oracle.com/javase/tutorial/java/package/managingfiles.html)。

因此，如果您有一个类`edu.mit.stk.Foo`，那么它将位于`edu/mit/stk/Foo.java`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T18:10:37.303

这是一个命名空间。它可以防止类/包名称冲突。通常它是公司的反向域名（例如`com.ibm.PackageName`），但它的值是任意的，可以是任何值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T18:10:49.170

按照约定，Java 包名称以相反的顺序遵循域命名约定。因此`edu.mit`是在 . 开发的包的适当前缀[`mit.edu`](http://mit.edu/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T18:11:26.760

与包约定匹配（看起来像颠倒的 Internet 域名）。

[您可以在http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)查看更多详细信息

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T18:12:01.313

包使用它们的反向互联网域名命名，以避免名称冲突。所以来自 ecliplse 的 calss 可能在`package com.eclipse.XYZClass`

从[命名包](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)：

> 公司使用他们的反向 Internet 域名来开始他们的包名——例如，com.example.mypackage 表示由 example.com 的程序员创建的名为 mypackage 的包。

要正确识别，包应位于同名文件夹中。因此，如果您有一个类 in `com.madbreaks.MyClass`，您的文件夹结构将为

```
com
|
+--madbreaks
   |   
   +---MyClass 
```

另请参阅：[关于包的 Java 教程](http://docs.oracle.com/javase/tutorial/java/package/index.html)。

# google-chrome-extension - Chrome 扩展程序偶尔会崩溃 - 为什么？

> ID：14404959
> 
> 赞同：0
> 
> 时间：2013-01-18T18:08:35.053
> 
> 标签：google-chrome-extension, google-chrome-devtools, indexeddb

我正在开发一个使用选项卡 API、长期连接和 HTML5 indexedDB 的扩展。扩展随机崩溃（或者至少我无法重现崩溃场景）。我看了一下chrome日志：

```
[22654:-1322192896:0118/184514:VERBOSE1:ipc_sync_channel.cc(382)] Canceling pending sends
[22649:-1398687192:0118/184514:VERBOSE1:speech_input_extension_manager.cc(228)] Extension unloaded. Requesting to enforce stop...
[22654:-1398687192:0118/184514:VERBOSE1:ipc_sync_channel.cc(382)] Canceling pending sends
[22654:-1322192896:0118/184514:VERBOSE1:ipc_sync_channel.cc(382)] Canceling pending sends
[22808:-1398687192:0118/184514:VERBOSE1:chrome_v8_context.cc(125)] Could not execute chrome hidden method: Port.dispatchOnDisconnect
[22808:-1398687192:0118/184514:VERBOSE1:chrome_v8_context.cc(125)] Could not execute chrome hidden method: Port.dispatchOnDisconnect
[22808:-1398687192:0118/184514:VERBOSE1:chrome_v8_context.cc(125)] Could not execute chrome hidden method: Port.dispatchOnDisconnect
[22808:-1398687192:0118/184514:VERBOSE1:chrome_v8_context.cc(125)] Could not execute chrome hidden method: Port.dispatchOnDisconnect
[22808:-1398687192:0118/184514:VERBOSE1:chrome_v8_context.cc(125)] Could not execute chrome hidden method: Port.dispatchOnDisconnect
[22808:-1398687192:0118/184514:VERBOSE1:chrome_v8_context.cc(125)] Could not execute chrome hidden method: Port.dispatchOnDisconnect
[22649:-1398687192:0118/184514:VERBOSE1:notification_ui_manager_impl.cc(83)] Added notification. URL: data:text/html;charset=utf-8,%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%3Ctitle%3E%3C%2Ftitle%3E%0A%20%20%3Cstyle%3E%0A%20%20body%20%7B%0A%20%20%20%20direction%3A%20ltr%3B%0A%20%20%7D%0A%20%20%23icon%20%7B%0A%20%20%20%20height%3A%2032px%3B%0A%20%20%20%20width%3A%2032px%3B%0A%20%20%20%20float%3A%20left%3B%0A%20%20%7D%0A%20%20%23title%20%7B%0A%20%20%20%20margin-left%3A%2038px%3B%0A%20%20%20%20font-weight%3A%20bold%3B%0A%20%20%20%20font-size%3A%2013px%3B%0A%20%20%20%20font-family%3A%20helvetica%2C%20arial%2C%20sans-serif%3B%0A%20%20%7D%0A%20%20%23description%20%7B%0A%20%20%20%20margin-left%3A%2038px%3B%0A%20%20%20%20font-family%3A%20helvetica%2C%20arial%2C%20sans-serif%3B%0A%20%20%20%20font-size%3A%2013px%3B%0A%20%20%7D%0A%20%20%3C%2Fstyle%3E%0A%3C%2Fhead%3E%0A%3Cbody%3E%0A%20%20%3Cdiv%20id%3D%22icon%22%3E%3Cimg%20src%3D%22chrome-extension%3A%2F%2Fegoecnhkgdfeofmdmjgopmdjbaknldjf%2Fres%2Ficon_48x48.png%22%20width%3D%2232%22%20height%3D%2232%22%3E%3C%2Fdiv%3E%0A%20%20%3Cdiv%20id%3D%22title%22%3E%3C%2Fdiv%3E%0A%20%20%3Cdiv%20id%3D%22description%22%3EHelloWorld%20ist%20abgest%C3%BCrzt.%20Klicken%20Sie%20auf%20dieses%20Fenster%2C%20um%20die%20Erweiterung%20erneut%20zu%20laden.%3C%2Fdiv%3E%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A 
```

我激活了最健谈的详细模式，但对我来说导致崩溃的原因没有意义。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T21:53:11.833

您应该向 Chromium 项目[http://code.google.com/p/chromium/issues/list](http://code.google.com/p/chromium/issues/list)提交票证，Google 将在几天内回复您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-10T13:46:55.280

我有一个类似的问题，花了我一整天的时间来解决，我认为它可能适用。如果我只是打开它，我的弹出扩展程序将运行而不会崩溃，但是如果我在开发人员模式下打开扩展程序（即右键单击->“检查弹出窗口”），下次我尝试打开它时会崩溃。

这似乎是 Chrome 的新设备模式功能的问题。要解决此问题，我必须在新选项卡中打开我的 popup.html 文件，并确保设备模式已关闭。然后，当我在开发人员模式下打开我的扩展程序时，它就不会再崩溃了。

要关闭设备模式：

*   在新选项卡中打开您的 html 文件
*   进入开发者模式（查看 -> 开发者 -> Javascript 控制台）
*   确保设备模式已关闭（通过单击放大镜旁边的手机小图像来切换设备模式）

希望这对你们中的一个人有所帮助。

# python - 如何在一种布局中排列多个 pyplot 图形？

> ID：14404962
> 
> 赞同：10
> 
> 时间：2013-01-18T18:08:44.967
> 
> 标签：python, matplotlib

我创建了一个软件来进行信号分析。有多个函数，每个函数最终显示一个复杂的图形，包含标签、绘图、axhspan、axvspan 等……通常，这些函数是单独调用的。我的每个函数都返回一个图形对象，例如，我可以将其保存为 pdf。

```
def Myfunction1(self):
    fig = pyplot.figure()
    ...do somestuff, create my figure
    pyplot.show()
    fig.savefig('C:\MyFigurefolder\figure1.pdf', dpi=300)
    return fig

def Myfunction2(self):
    fig = pyplot.figure()
    ...do some other stuff, create my 2nd figure
    pyplot.show()
    fig.savefig('C:\MyFigurefolder\figure2.pdf', dpi=300)
    return fig 
```

现在，我想创建一种“摘要图”，通过进行元分析，将多个图合并在一起，并将它们保存在最终的 pdf 中。我真的不知道该怎么做。有没有办法使用整个图形对象（或者可能是多个单独的 pdf）来做我的图形？

就像是：

```
def FinalFigure(self):

    final = A_Kind_Of_Layout_Or_A_Figure_or_something

    a=self.Myfunction1()
    b=self.Myfunction2()

    Action_to_arrange_a_and_b_like_gridspec

    final.savefig('C:\MyFigurefolder\FinalFigure.pdf', dpi=300) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T18:22:20.307

您可以将多个绘图与 matplotlib.pyplot.subplot 结合起来。如需对布局进行更多控制，请查看[GridSpec](http://matplotlib.org/users/gridspec.html)。

**编辑：**根据要求，链接教程中的一个简短示例：

gridspec 实例提供返回 SubplotSpec 实例的类数组（2d 或 1d）索引。对于跨越多个单元格的 SubplotSpec，请使用 slice。

```
import matplotlib.pyplot as plt
import matplotlib.gridspec as gridspec
gs = gridspec.GridSpec(3, 3)
ax1 = plt.subplot(gs[0, :])
ax2 = plt.subplot(gs[1,:-1])
ax3 = plt.subplot(gs[1:, -1])
ax4 = plt.subplot(gs[-1,0])
ax5 = plt.subplot(gs[-1,-2]) 
```

![在此处输入图像描述](../Images/3078a70d77e05b39a8bff0abc31365d0.png)

# php - 添加 rsvp_event 权限时出现错误 310

> ID：14404969
> 
> 赞同：0
> 
> 时间：2013-01-18T18:09:09.787
> 
> 标签：php, facebook, events, user-permissions

我试图弄清楚如何 rsvp 到事件，我能够连接并进入我的主页，然后根据以下代码添加“rsvp_event”权限： [https ://developers.facebook.com/docs/参考/api/事件/#attending](https://developers.facebook.com/docs/reference/api/event/#attending)

不知道为什么它给了我错误。

```
//check if the permissions we need have been allowed by the user
//if not then redirect them again to facebook's permissions page
$permissions_needed = array('publish_stream', 'read_stream', 'manage_pages', 'create_event','rsvp_event');
foreach($permissions_needed as $perm) {
    if( !isset($permissions_list['data'][0][$perm]) || $permissions_list['data'][0][$perm] != 1 ) {
        $login_url_params = array(
            'scope' => 'publish_stream,read_stream,manage_pages',
            'fbconnect' =>  1,
            'display'   =>  "page",
            'next' => 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']
        );
        $login_url = $facebook->getLoginUrl($login_url_params);
        header("Location: {$login_url}");
        exit();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:31:44.133

尝试使用这行代码来证明您的应用将来不会发生变化：

```
'scope' => implode(',', $permissions_needed), 
```

# google-apps-script - 如何通过 Google Apps 脚本添加指向 google 站点的链接？

> ID：14404972
> 
> 赞同：1
> 
> 时间：2013-01-18T18:09:31.907
> 
> 标签：google-apps-script, google-sites

我一直在编写一些脚本，通过动态创建页面来使我的 Google 网站更易于管理。我希望能够创建一个包含指向这些页面的链接的目录。

所以我在想类似的东西......

```
var page = site.getChildByName("NEW URL");
var link = [page.getUrl()];
page = site.getChildByName("URL TO DIRECTORY").addListItem(link); 
```

...使用谷歌应用程序脚本。到目前为止还没有对此进行过彻底的测试，但它无法让链接在列表中起作用。我希望将页面模板保留为普通网页。

如果我走那条路，编辑 html 是唯一的选择吗？希望有更简单的方法。

任何想法都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:54:40.717

这是一个小测试，显示您网站中所有页面的列表

```
function doGet() {
  var app=UiApp.createApplication().setTitle("Directory of this site")
  var mainPanel = app.createAbsolutePanel().setStyleAttributes({background:'beige',padding:'20px'});
  var scroll = app.createScrollPanel().setPixelSize(450,300);
  var site = SitesApp.getSiteByUrl('https://sites.google.com/site/appsscriptexperiments/')
  var pages = site.getAllDescendants()
  var grid = app.createGrid(pages.length,2).setWidth(400)
    for(n=0;n<pages.length;++n){
    grid.setText(n, 0, pages[n].getName()).setWidget(n, 1, app.createAnchor('open', pages[n].getUrl()))
    }
    app.add(mainPanel.add(scroll.add(grid)))
    return app
} 
```

我想您知道如何在您的站点页面中使用它，但仅供其他人参考：您必须去*管理站点>脚本应用程序>创建一个新脚本>保存版本>* **使用适当的授权**进行部署，最后返回您的页面并将其作为小工具插入（最好有边框和 450x300 大小，个人视角 ^^）。您还可以使用其部署 URL 将其用作独立的 Web 应用程序。

![在此处输入图像描述](../Images/1f3e781fb551d8b83f8c1682c63e1fa8.png)

# c++ - LNK2005：已定义错误

> ID：14404981
> 
> 赞同：0
> 
> 时间：2013-01-18T18:10:00.490
> 
> 标签：c++

我正在做一个学校作业，我收到了这个奇怪的错误（我对 C++ 很陌生）。

我应该找到介于 1500 和 1900 之间的第一个值。当我第一次构建它时，一切正常，但是当我下次构建它时，我收到此错误：

```
error LNK2005: "bool __cdecl greaterThan1500SmallerThan1900(int)" (?greaterThan1500SmallerThan1900@@YA_NH@Z) already defined in Lab5.obj 
```

如果我然后稍微更改代码（将谓词函数中的类型更改为双精度），它会再次构建一次。

```
template<typename T>
T MyStlClass<T>::myFindIf(list<T> &theList) {

    list<T>::iterator it = find_if(theList.begin(), theList.end(), greaterThan1500SmallerThan1900);
    return *it;
}

bool greaterThan1500SmallerThan1900(int value){
    return (value >= 1500 && value <= 1900);
} 
```

我在这个网站上读到这是因为我包含了“.cpp”文件，但另一方面，我也读到了，当我使用模板时，我需要包含“.cpp”文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:13:36.703

> 我还读过，当我使用模板时，我需要包含“.cpp”文件。

扔掉/否决/为我们确定告诉您这样做的资源。

这样做是有充分理由的，但建议是错误的，它*直接*导致了这个问题。

**从来`#include`没有`.cpp`。**

您将模板定义放入的文件应该称为`.ipp`而不是`.cpp`，这样您的 IDE 就不会将其与“常规”源文件混淆，而是将其与项目的其余部分一起构建。那么，这样的文件就像 a 一样`.h`，*只有* `#include`d。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:21:07.433

你`greaterThan1500SmallerThan1900`不是模板，这就是为什么它的主体多次出错*（*`#include`这就是为什么它*必须*只链接一次）。

你必须从模板化的东西中分离出这个功能。这个函数应该在一个 cpp 文件中，而不是`#include`任何东西，而是添加到你的项目中。（似乎你已经在它被调用的地方有了它的*声明*——它应该保持不变）。

对于模板，您*可能会*听取另一个答案的建议（重命名为`*.ipp`您将要`#include`的，从项目中删除），但错误会在您这样做之前消失（将额外的仅模板源文件编译为空对象是无用的，但它不会伤害）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:24:33.400

如果您正在编写仅包含标头的库/模块，请使用`#pragma once`以避免多次包含，并标记`greaterThan1500SmallerThan1900`函数`inline`：

```
// MyStlClass.hpp

#prgma once

....

template<typename T>
T MyStlClass<T>::myFindIf(list<T> &theList) {

    list<T>::iterator it = find_if(theList.begin(), theList.end(), greaterThan1500SmallerThan1900);
    return *it;
}

// NOTE inline here:
inline bool greaterThan1500SmallerThan1900(int value){
    return (value >= 1500 && value <= 1900);
} 
```

# python - python gui树走

> ID：14404982
> 
> 赞同：2
> 
> 时间：2013-01-18T18:10:04.713
> 
> 标签：python, tree, tkinter

我试图弄清楚如何走一棵树，然后在一个用户可以导航的窗口中显示输出，就像我电脑左侧的那样。最终我计划有一个完全可浏览的窗口，就像你在右手边的那样。这是我到目前为止所拥有的，我猜它是伪代码和实际代码的混合体。这是在使用 python 的 Linux 机器上使用的。我不是在寻找任何代码，而是主要帮助我如何使用 tkinter 完成此任务。也许只有我一个人，但我找不到太多帮助我解决问题的帮助 - 大多数只是告诉我如何显示目录等。任何帮助将不胜感激。

我希望这个窗口看起来像这样

```
My Documents <--------starting directory
    My pictures<------subdirectory
        picture1.jpg<-inside of subdirectoy
        picture2.jpg
    1234.exe<---------random file inside of my documents 
```

我也想在目录或子目录旁边放一张小文件夹图片。

```
start at root
     create window with tk
     for dirname,subdirList,filelist in os.walk(root)
     create new item(dirname)   
     for i in subdirList:         #not sure what I would have to do to only    
                                           have subdirs showing once the directory was
                                           clicked once
        append i to item 1       
    for fname in fileList:          
        append fname to item 1      
    else:                    
        item +=1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T22:56:43.310

您可以使用小部件来做到这一点`ttk.Treeview`，有一个演示可以做到`dirbrowser.py`这一点。所以我在这里所能做的就是给出它的剥离版本并解释它是如何工作的。首先，这是简短的版本：

```
import os
import sys
import Tkinter
import ttk

def fill_tree(treeview, node):
    if treeview.set(node, "type") != 'directory':
        return

    path = treeview.set(node, "fullpath")
    # Delete the possibly 'dummy' node present.
    treeview.delete(*treeview.get_children(node))

    parent = treeview.parent(node)
    for p in os.listdir(path):
        p = os.path.join(path, p)
        ptype = None
        if os.path.isdir(p):
            ptype = 'directory'

        fname = os.path.split(p)[1]
        oid = treeview.insert(node, 'end', text=fname, values=[p, ptype])
        if ptype == 'directory':
            treeview.insert(oid, 0, text='dummy')

def update_tree(event):
    treeview = event.widget
    fill_tree(treeview, treeview.focus())

def create_root(treeview, startpath):
    dfpath = os.path.abspath(startpath)
    node = treeview.insert('', 'end', text=dfpath,
            values=[dfpath, "directory"], open=True)
    fill_tree(treeview, node)

root = Tkinter.Tk()

treeview = ttk.Treeview(columns=("fullpath", "type"), displaycolumns='')
treeview.pack(fill='both', expand=True)
create_root(treeview, sys.argv[1])
treeview.bind('<<TreeviewOpen>>', update_tree)

root.mainloop() 
```

它首先列出由 给出的路径中存在的文件和目录`sys.argv[1]`。您不想在`os.walk`此处使用，因为您只显示给定路径中直接可用的内容，而不进入更深层次。然后代码继续显示这些内容，并为目录创建一个虚拟子项，因此该`Treeview`条目将显示为可以进一步扩展的内容。然后，您可能会注意到，`<<TreeviewOpen>>`每当用户单击`Treeview`可以进一步扩展（在这种情况下，代表目录的条目）。当事件被触发时，代码最终会删除之前创建的虚拟节点，现在使用指定目录中存在的内容填充节点。其余代码由有关在 中存储附加信息`Treeview`以使一切正常的详细信息组成。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-19T04:38:49.690

我认为 tkinter 将是一个糟糕的选择。wxPython、PyQt 或 GTK 等其他库确实具有 GUI 组件，可以帮助您以最小的努力实现这一目标。

# html - 在 Internet Explorer 中并排加载的 Divs - 应该是顶部/底部

> ID：14404997
> 
> 赞同：-4
> 
> 时间：2013-01-18T18:10:44.460
> 
> 标签：html, css, wordpress

我正在设计自己的作品集网站，并且只有一些关于 wordpress、html 和 CSS 的基本知识。在我的个人作品集页面上，有文本和图形，文本在页面上的位置应该高于位于下方的图形。这在 Firefox、Safari 和 Chrome 中运行良好，但它在 Internet Explorer 中给我带来了问题，并且正在创建一个问题，即文本位于图像的左侧，将图像缩小并弄脏成一个更小、更紧凑的空间。

[http://mikeklok.com/portfolio/myt-product-creation-2/](http://mikeklok.com/portfolio/myt-product-creation-2/)

有什么办法可以用 CSS 解决这个问题？我不够先进，无法理解如何查找和编辑 html，因为它不像 CSS 那样容易获得。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:18:05.117

您的包含 div 分为两个单独的 div，分别具有“第一列”和“最后一列”类，每个都用样式指定`width: 50%; float: left;`。我真的很想知道为什么 Chrome、FF 和 Safari 会把它弄得这么乱。

删除这些样式，或添加`break: both;`到第二个样式。

# excel - 将命名范围分配给数组的对象定义错误

> ID：14404998
> 
> 赞同：0
> 
> 时间：2013-01-18T18:10:46.617
> 
> 标签：excel, vba

我正在尝试将命名范围的值分配给变量数组。我几乎在分配代码 Material = ThisWorkbook.Names("RMInStoreName").RefersToRange 级别收到应用程序或对象定义的错误，我从[这里](http://www.ozgrid.com/forum/showthread.php?t=92426)得到了这个例子，并且在成功之前使用过它。

我仍在试图弄清楚为什么会出现此错误，我似乎已经没有想法了，任何人都可以帮助我指出正确的方向将真正为我节省很多代码在下面这是代码

```
 Sub MonitorStore()
Dim ThreshHold As Variant, InStore As Variant, StatusReport As Variant
Dim Material As Variant    'is the name of the material
Status As Variant
'status is a variable which holds data on wether the user  has seen msg and 
'wants to     supress msg
'the ThreshHold is the minimum allowed in store below which messages are firerd
'InStore is the volume of materials currently in store
'and be told of another error after solving error one, report all at once

 Material = ThisWorkbook.Names("RMInStoreName").RefersToRange
ThreshHold = ThisWorkbook.Names("RMThreshHold").RefersToRange
InStore = ThisWorkbook.Names("RMInStore").RefersToRange
Status = ThisWorkbook.Names("RMStatus").RefersToRange

'other code.............
'dont expect error from unexecuted code
End Sub 
```

感谢斯蒂芬的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:59:09.223

RefersToRange 将返回一个范围对象。它是你之后的价值：

```
Material = ThisWorkbook.Names("RMInStoreName").RefersToRange.Value 
```

或者您可以使用：

```
Material = Evaluate("RMInStoreName") 
```

或者：

```
Material = Evaluate(ThisWorkbook.Names("RMInStoreName").RefersTo).Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:39:08.290

最可能的原因是您没有在工作簿中定义所有命名范围。

您可以使用“公式”选项卡验证命名范围。

公式 --> 名称管理器

![在此处输入图像描述](../Images/221f5e7eac4bcdd1940c6e7bf3bd9ec4.png)

# jquery - 在多个位置引用 HTML？

> ID：14404999
> 
> 赞同：0
> 
> 时间：2013-01-18T18:10:47.160
> 
> 标签：jquery, html, jquery-ui

我正在使用 jQuery 选项卡，并且我有一堆由查询填充的下拉列表。事情是完全相同的下拉菜单（具有相同的选项）在不同的选项卡/对话框上（基本上它们被多次使用）。我想知道是否有办法在每个使用它们的地方复制/粘贴相同的选择/选项输出的 html。有没有办法可以参考它们？这样我加载的页面不是 5,000 行长。希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:28:56.017

将页面的文件扩展名更改为 .php 并使用该`include()`功能从另一个仅包含菜单代码的文件中提取菜单代码。

所以基本上，把你想要复制的所有下拉菜单代码，从主文件中删除，然后放到它自己的文件中（比如`dropdown.php`）。然后，在主页代码中您想要将此代码拉入的任何地方，您所要做的就是添加`<?php include('dropdown.php'); ?>`，您就可以开始了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:17:01.133

您的 javascript 可以克隆一个节点并将其附加到您想要的任何位置。

```
$(document).ready(function(){
    var my_nav_containers = ["nav1", "nav2", "nav3"];

    for(var i = 0; i < my_nav_containers.lengt; i++) {
        var cloned_nav_menu = $("#seed_nav_menu").clone(true);
        $(cloned_nav_menu).attr("id", (my_nav_containers[i] + "_cloned_menu"));
        $("#". my_nav_containers[i]).append(cloned_nav_menu);
    }
}) 
```