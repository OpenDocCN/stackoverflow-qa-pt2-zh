# StackOverflow 问答 15130000-15130999

# android - 饼图在 aChartEngine 中滚动到屏幕之外

> ID：15130001
> 
> 赞同：1
> 
> 时间：2013-02-28T07:36:52.433
> 
> 标签：android, android-widget, achartengine

如果我们在饼图中进行滚动，则饼图在垂直和水平方向都滚动到屏幕之外。
我也在特定时间点出现黑屏。

有什么解决办法吗？
请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:55:07.310

You have to add this if you don't want enable the scrolling through the chart:

```
renderer.setPanEnabled(false); 
```

Also you can let the user scroll the chart and add the zoom buttons, so user can return to the 1:1 view:

```
renderer.setZoomButtonsVisible(true);
renderer.setZoomEnabled(true); 
```

**renderer* is the DefaultRenderer wich you add the series.

# eclipse - maven eclipse:eclipse 执行失败

> ID：15130003
> 
> 赞同：3
> 
> 时间：2013-02-28T07:36:59.567
> 
> 标签：eclipse, maven, maven-3

我是 Maven 的新手。我尝试执行 >mvn eclipse:eclipse -Dwtpversion=2.0。但我得到以下错误：

```
 D:\test\CounterWebApp>mvn eclipse:eclipse -Dwtpversion=2.0
    [INFO] Scanning for projects...
    [INFO]
    [INFO] ------------------------------------------------------------------------
    [INFO] Building CounterWebApp Maven Webapp 1.0-SNAPSHOT
    [INFO] ------------------------------------------------------------------------
    [INFO]
    [INFO] >>> maven-eclipse-plugin:2.9:eclipse (default-cli) @ CounterWebApp >>>
    [INFO]
    [INFO] --- maven-dependency-plugin:2.1:copy-dependencies (copy-dependencies) @ C
    ounterWebApp ---
    [INFO] junit-3.8.1.jar already exists in destination.
    [INFO]
    [INFO] <<< maven-eclipse-plugin:2.9:eclipse (default-cli) @ CounterWebApp <<<
    [INFO]
    [INFO] --- maven-eclipse-plugin:2.9:eclipse (default-cli) @ CounterWebApp ---
    28 Feb, 2013 1:01:48 PM org.sonatype.guice.bean.reflect.Logs$JULSink warn
    WARNING: Error injecting: org.apache.maven.plugin.eclipse.EclipsePlugin
    java.lang.NoClassDefFoundError: org/codehaus/plexus/resource/loader/ResourceNotF
    oundException
            at java.lang.Class.getDeclaredConstructors0(Native Method)
            at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
            at java.lang.Class.getDeclaredConstructors(Class.java:1836)
            at com.google.inject.spi.InjectionPoint.forConstructorOf(InjectionPoint.
    java:245)
            at com.google.inject.internal.ConstructorBindingImpl.create(ConstructorB
    indingImpl.java:98)
            at com.google.inject.internal.InjectorImpl.createUninitializedBinding(In
    jectorImpl.java:629)
            at com.google.inject.internal.InjectorImpl.createJustInTimeBinding(Injec
    torImpl.java:831)
            at com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecurs
    ive(InjectorImpl.java:758)
            at com.google.inject.internal.InjectorImpl.getJustInTimeBinding(Injector
    Impl.java:255)
            at com.google.inject.internal.InjectorImpl.getBindingOrThrow(InjectorImp
    l.java:204)
            at com.google.inject.internal.InjectorImpl.getProviderOrThrow(InjectorIm
    pl.java:954)
            at com.google.inject.internal.InjectorImpl.getProvider(InjectorImpl.java
    :987)
            at com.google.inject.internal.InjectorImpl.getProvider(InjectorImpl.java
    :950)
            at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java
    :1000)
            at org.sonatype.guice.bean.reflect.AbstractDeferredClass.get(AbstractDef
    erredClass.java:45)
            at com.google.inject.internal.ProviderInternalFactory.provision(Provider
    InternalFactory.java:84)
            at com.google.inject.internal.InternalFactoryToInitializableAdapter.prov
    ision(InternalFactoryToInitializableAdapter.java:52)
            at com.google.inject.internal.ProviderInternalFactory$1.call(ProviderInt
    ernalFactory.java:70)
            at com.google.inject.internal.ProvisionListenerStackCallback$Provision.p
    rovision(ProvisionListenerStackCallback.java:100)
            at org.sonatype.guice.plexus.lifecycles.PlexusLifecycleManager.onProvisi
    on(PlexusLifecycleManager.java:138)
            at com.google.inject.internal.ProvisionListenerStackCallback$Provision.p
    rovision(ProvisionListenerStackCallback.java:108)
            at com.google.inject.internal.ProvisionListenerStackCallback.provision(P
    rovisionListenerStackCallback.java:55)
            at com.google.inject.internal.ProviderInternalFactory.circularGet(Provid
    erInternalFactory.java:68)
            at com.google.inject.internal.InternalFactoryToInitializableAdapter.get(
    InternalFactoryToInitializableAdapter.java:45)
            at com.google.inject.internal.InjectorImpl$3$1.call(InjectorImpl.java:96
    5)
            at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.ja
    va:1011)
            at com.google.inject.internal.InjectorImpl$3.get(InjectorImpl.java:961)
            at com.google.inject.Scopes$1$1.get(Scopes.java:59)
            at org.sonatype.guice.bean.locators.LazyBeanEntry.getValue(LazyBeanEntry
    .java:83)
            at org.sonatype.guice.plexus.locators.LazyPlexusBean.getValue(LazyPlexus
    Bean.java:49)
            at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContai
    ner.java:253)
            at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContai
    ner.java:245)
            at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfigu
    redMojo(DefaultMavenPluginManager.java:455)
            at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(Default
    BuildPluginManager.java:92)
            at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
    .java:209)
            at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
    .java:153)
            at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
    .java:145)
            at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
    ct(LifecycleModuleBuilder.java:84)
            at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
    ct(LifecycleModuleBuilder.java:59)
            at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBu
    ild(LifecycleStarter.java:183)
            at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(Lifecycl
    eStarter.java:161)
            at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
            at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
            at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
            at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
            at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
    java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
    sorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Laun
    cher.java:290)
            at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.jav
    a:230)
            at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(La
    uncher.java:409)
            at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:
    352)
    Caused by: java.lang.ClassNotFoundException: org.codehaus.plexus.resource.loader
    .ResourceNotFoundException
            at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(
    SelfFirstStrategy.java:50)
            at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm
    .java:244)
            at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm
    .java:230)
            ... 54 more
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD FAILURE
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 1.106s
    [INFO] Finished at: Thu Feb 28 13:01:48 IST 2013
    [INFO] Final Memory: 6M/15M
    [INFO] ------------------------------------------------------------------------
    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-eclipse-plugin:2.9
    :eclipse (default-cli) on project CounterWebApp: Execution default-cli of goal o
    rg.apache.maven.plugins:maven-eclipse-plugin:2.9:eclipse failed: A required clas
    s was missing while executing org.apache.maven.plugins:maven-eclipse-plugin:2.9:
    eclipse: org/codehaus/plexus/resource/loader/ResourceNotFoundException
    [ERROR] -----------------------------------------------------
    [ERROR] realm =    plugin>org.apache.maven.plugins:maven-eclipse-plugin:2.9
    [ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
    [ERROR] urls[0] = file:/D:/M2_REPO/org/apache/maven/plugins/maven-eclipse-plugin
    /2.9/maven-eclipse-plugin-2.9.jar
    [ERROR] urls[1] = file:/D:/M2_REPO/junit/junit/3.8.1/junit-3.8.1.jar
    [ERROR] urls[2] = file:/D:/M2_REPO/org/apache/maven/reporting/maven-reporting-ap
    i/2.0.8/maven-reporting-api-2.0.8.jar
    [ERROR] urls[3] = file:/D:/M2_REPO/org/apache/maven/doxia/doxia-sink-api/1.0-alp
    ha-9/doxia-sink-api-1.0-alpha-9.jar
    [ERROR] urls[4] = file:/D:/M2_REPO/commons-cli/commons-cli/1.0/commons-cli-1.0.j
    ar
    [ERROR] urls[5] = file:/D:/M2_REPO/org/codehaus/plexus/plexus-interactivity-api/
    1.0-alpha-4/plexus-interactivity-api-1.0-alpha-4.jar
    [ERROR] urls[6] = file:/D:/M2_REPO/commons-io/commons-io/1.4/commons-io-1.4.jar
    [ERROR] urls[7] = file:/D:/M2_REPO/org/codehaus/plexus/plexus-archiver/1.0-alpha
    -7/plexus-archiver-1.0-alpha-7.jar
    [ERROR] urls[8] = file:/D:/M2_REPO/org/codehaus/plexus/plexus-utils/1.5.6/plexus
    -utils-1.5.6.jar
    [ERROR] urls[9] = file:/D:/M2_REPO/org/codehaus/plexus/plexus-interactivity-jlin
    e/1.0-alpha-5/plexus-interactivity-jline-1.0-alpha-5.jar
    [ERROR] urls[10] = file:/D:/M2_REPO/jline/jline/0.9.1/jline-0.9.1.jar
    [ERROR] urls[11] = file:/D:/M2_REPO/org/apache/maven/maven-archiver/2.2/maven-ar
    chiver-2.2.jar
    [ERROR] urls[12] = file:/D:/M2_REPO/org/codehaus/plexus/plexus-resources/1.0-alp
    ha-7/plexus-resources-1.0-alpha-7.jar
    [ERROR] urls[13] = file:/D:/M2_REPO/biz/aQute/bndlib/0.0.145/bndlib-0.0.145.jar
    [ERROR] urls[14] = file:/D:/M2_REPO/org/apache/maven/shared/maven-osgi/0.2.0/mav
    en-osgi-0.2.0.jar
    [ERROR] urls[15] = file:/D:/M2_REPO/org/eclipse/core/resources/3.3.0-v20070604/r
    esources-3.3.0-v20070604.jar
    [ERROR] Number of foreign imports: 1
    [ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]
    [ERROR]
    [ERROR] -----------------------------------------------------: org.codehaus.plex
    us.resource.loader.ResourceNotFoundException
    [ERROR] -> [Help 1]
    [ERROR]
    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e swit
    ch.
    [ERROR] Re-run Maven using the -X switch to enable full debug logging.
    [ERROR]
    [ERROR] For more information about the errors and possible solutions, please rea
    d the following articles:
    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException 
```

我正在关注教程：[http](http://www.mkyong.com/maven/how-to-create-a-web-application-project-with-maven/) ://www.mkyong.com/maven/how-to-create-a-web-application-project-with-maven/ 。

请让我知道如何解决该错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-05T08:58:51.223

用于 maven-eclipse-plugin:2.9:eclipse 和 web 项目使用

mvn 日食：清洁

mvn eclipse:eclipse -Dwtpversion=2.0

更新项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T04:19:35.453

运行“mvn 全新安装”

然后'mvn eclipse：eclipse'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T08:49:00.283

试试下面的，它在朱诺上对我有用

```
mvn eclipse:eclipse -Dwtpversion=1.5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:45:00.100

我只是分享我的 Maven 配置详细信息，它可能会有所帮助：

如果您使用的是**嵌入式 eclipse 插件**，那么使用**外部 maven 安装是个好主意。** 您可以在窗口 -> 首选项 -> maven -> 安装下查看插件详细信息

我有几个嵌入式问题。[所以你可以从http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi)下载 maven 。

在 Eclipse 中进行以下更改：窗口 -> 首选项 -> maven -> 安装 -> 添加 -> 外部一个窗口 -> 首选项 -> maven -> 用户设置 -> 从外部提供 conf/settings.xml 的路径

保持本地存储库与嵌入式存储库相同。它可以解决配置问题。

# c# - ORM 和 DB 归档

> ID：15130006
> 
> 赞同：-1
> 
> 时间：2013-02-28T07:37:09.957
> 
> 标签：c#, database, database-design, orm

假设我使用 ORM 进行数据库访问。它基本上是一个 Windows 桌面应用程序，具有客户端服务器架构。现在我正在尝试建立存档或备份恢复机制。这些是特定于数据库的还是可以通过使用 ORM 使其通用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:43:17.920

我想您可以在 ORM 和编码的帮助下创建一种用于归档或备份/恢复用户数据的机制，但除非特定的业务需求或基础设施限制需要它，否则它是矫枉过正的。

在大多数情况下，备份/恢复功能是数据库组件的一个方面。

# asp.net - MS Exchange powershell 命令创建错误的电子邮件 ID

> ID：15130011
> 
> 赞同：2
> 
> 时间：2013-02-28T07:37:28.240
> 
> 标签：asp.net, powershell

我正在为 MS Exchange 管理创建一个 ASP .NET 应用程序。它将具有一些功能，例如创建用户邮箱。

我正在使用命令“enable-maibox -identity domainid -primarysmtpaddress emailId”

它适用于格式为“firstname.lastname”的域 ID，它将电子邮件 ID 创建为**firstname.lastname@company.com**

现在问题来了，当域 ID 的格式为“firstname.middlename.lastname”时，它将电子邮件 ID 创建为**firstname.lastname2@company.com**预期的电子邮件 ID 是 firstname.middlename.lastname@comapny.com

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:25:23.557

您要么需要更改定义邮箱命名架构的[Exchange 电子邮件地址策略](http://technet.microsoft.com/en-us/library/bb232171%28v=exchg.150%29.aspx)，要么可以禁用单个邮箱的策略遵守。

为您创建的邮箱禁用电子邮件地址策略

加载了 Exchnage 管理单元说

```
Set-Mailbox -Identity <MailboxIdParameter> -EmailAddressPolicyEnabled $false -PrimarySmtpAddress <SmtpAddress> 
```

为 AD 用户启用邮箱后。

我相信它应该可以解决问题。

# javascript - 谷歌图像灰色框弹出看起来'n'feel with js

> ID：15130029
> 
> 赞同：1
> 
> 时间：2013-02-28T07:39:18.843
> 
> 标签：javascript, jquery, google-image-search, dynamic-html

在谷歌图片搜索中实现灰色框滑出效果的最有效方法是什么？我目前有所需的设计。在每列 4 列中有一组图像，单击图像时会滑出一个框。但是，我不知道如何让它在正确的位置（点击的图像下方）弹出。

Google 图片搜索示例：[http](http://bit.ly/YBe7ay) ://bit.ly/YBe7ay 我需要实现的链接：http: [//fxtouch.ee/projects/scale/](http://fxtouch.ee/projects/scale/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:26:29.670

听起来我们正在做类似的任务。这是一个插件，您可能想看看[http://www.htmldrive.net/items/show/1036/JQuery-Ajax-Cool-Shopping-cart-effect](http://www.htmldrive.net/items/show/1036/JQuery-Ajax-Cool-Shopping-cart-effect)

在第 44 行的某处，代码将带有相应文本的“框”直接放在单击的缩略图行的下方。

```
$('#cart_wrapper .cart-info').append('<div class="shopp" id="each-'+thisID+'"><div class="label">'+itemname+'</div><div class="shopp-price"> $<em>'+itemprice+'</em></div><span class="shopp-quantity">1</span><img src="remove.png" class="remove" /><br class="all" /></div>'); 
```

然后再次在第 110 行的某个地方，代码将“框”放在定义的 div 中

```
$("html:not(:animated),body:not(:animated)").animate({scrollTop: targetOffset}, 800,function(){
   $('#wrap #detail-'+thisID).slideDown(500);
    return false;
}); 
```

浏览文件并查看它们是如何组合在一起的，然后将其与您的界面集成。

# php - php单选按钮将错误的值传递给mysql

> ID：15130041
> 
> 赞同：0
> 
> 时间：2013-02-28T07:39:57.627
> 
> 标签：php, html, mysql

我正在尝试将多个单选按钮信息设置为 mysql，但它似乎没有在排名单选按钮上传递正确的信息。这是我的代码。

```
 <tr>
    <td colspan="3">
    <input type="radio" name="rank" value="unranked" />Unranked
    </br><input type="radio" name="rank" value="bronze" />Bronze
    </br><input type="radio" name="rank" value="silver" />Silver
    </br><input type="radio" name="rank" value="gold" />Gold
    </td>
 </tr>

<php?
    mysql_query("INSERT INTO summoner (sumName, rank, position)VALUES( 
    '". mysql_escape_string($_POST['summoner']) ."', 
    '". mysql_escape_string(md5($_POST['rank'])) ."', 
    '". mysql_escape_string($_POST['role']) ."') ") or die(mysql_error());
 ?> 
```

而不是获得未排名或金牌，我在我的数据库中得到了类似的东西：cab7e764b30007514145

我在这里没有做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:54:53.400

检查你的 PHP 代码：

我捕获了浏览器流，看起来不错

![在此处输入图像描述](../Images/0401eff670c7a3f72a19d6a1a6547048.png)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-28T07:53:50.897

这种类型的编码非常古老，不再使用它，请执行以下操作：

```
<div>
<form actiom="my_page.php" method="post">
radio button 1
radio button 2
radio button 3
.....
</form>
</div> 
```

避免您所处的情况类型，并安全发送日期

# iphone - 自定义 UISlider，如音乐应用

> ID：15130047
> 
> 赞同：8
> 
> 时间：2013-02-28T07:40:28.390
> 
> 标签：iphone, objective-c, ios6, uislider

我已经构建了一个自定义滑块来显示音乐曲目的播放进度并允许在曲目内进行擦洗。

两者功能都很好，但是一旦停止拖动并且重新定位滑块，就会出现轻微的延迟（和跳跃的运动） - Apple Music 应用程序滑块是无缝的。

```
_scrubberSlider = [[ScrubberSlider alloc] initWithFrame:CGRectMake(0, 0, 300, 30)];
_scrubberSlider.continuous = YES;
_scrubberSlider.maximumValue = 1.0f;
_scrubberSlider.minimumValue = 0.0f;
 [_scrubberSlider addTarget:self action:@selector(handleSliderMove:) forControlEvents:UIControlEventValueChanged];

- (void) handleSliderMove:(UISlider*)sender
{
    CGFloat currentPlayback = sender.value * [[_theMusicPlayer.nowPlayingItem valueForKey:MPMediaItemPropertyPlaybackDuration] floatValue];
    _theMusicPlayer.currentPlaybackTime = currentPlayback;
}

-(void) handleTrackTime
{
    if (!trackTimer)
    {
    NSNumber *playBackTime = [NSNumber numberWithFloat: _musicPlayer.currentPlaybackTime];
    trackTimer = [NSTimer scheduledTimerWithTimeInterval:0.1f target:self selector:@selector(timeIntervalFinished:) userInfo:@{@"playbackTime" : playBackTime} repeats:YES];
    }
}

-(void) timeIntervalFinished:(NSTimer*)sender
{
     [self playbackTimeUpdated:_musicPlayer.currentPlaybackTime];
}

-(void) playbackTimeUpdated:(CGFloat)playbackTime 
{
    // Update time label
    [self updatePosition];
}

-(void) updatePosition
{
   if (!_scrubberSlider.isScrubbing)
   {
   CGFloat percent = _theMusicPlayer.currentPlaybackTime / [[_theMusicPlayer.nowPlayingItem valueForKey:MPMediaItemPropertyPlaybackDuration] floatValue];
   _scrubberSlider.value = percent;
   }
} 
```

自定义滑块

```
@interface ScrubberSlider : UISlider

@property(nonatomic) BOOL isScrubbing;

@end

@implementation ScrubberSlider

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
    }
    return self;
}

-(BOOL) beginTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event
{
    [super beginTrackingWithTouch:touch withEvent:event];

    _isScrubbing = YES;

    return YES;
}

- (void)endTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event
{
    [super endTrackingWithTouch:touch withEvent:event];

    _isScrubbing = NO;
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T19:17:34.437

也许你正在以错误的方式解决这个问题。与其尝试与轨道的时间完全同步（这会导致一些非常恶劣的比赛条件，这正是为什么您的滑块在“抛出”而不是拖动、按住然后释放时不能正确更新的原因），而是尝试使用您拥有的计时器作为“滴答”。您可以将射速降低到例如每半秒一次，然后使用与现在基本相同的逻辑，但不是试图获得精确的小数值`-updatePosition`，而是向前“勾选”滑块。

```
-(void) updatePosition
{
   if (!_scrubberSlider.isScrubbing)
   {
       _scrubberSlider.value += .5f;
   }
} 
```

它并不完美，但话又说回来，它比尝试使用 NSTimer 将自己与音乐曲目的时间同步（这对于精确的动作可能令人作呕的不准确）更加有效和无缝。这还要求滑块的最大值等于轨道的最大值，因此开始播放的示例方法包括：

```
- (IBAction)startPlayback:(id)sender {
    //... Handle however you wish to play the track
    _scrubberSlider.maximumValue = [[_theMusicPlayer.nowPlayingItem valueForKey:MPMediaItemPropertyPlaybackDuration] floatValue];
    [self handleTrackTime];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T22:38:02.720

经过大量日志记录后 - 我发现 UISlider 组件在更新自身时有轻微的延迟 - 在 1/10 到 3/10 秒之间 - 这导致了跳跃。

我还将计时器间隔更改为 0.5 秒，并通过在`savedValue`内部添加变量`ScrubberSlider`和 BOOL来帮助更新`hasFinishedMoving`，因此 `beginTrackingWithTouch` `endTrackingWithTouch`ScrubberSlider 中的方法如下所示：

```
-(BOOL) beginTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event
{
    [super beginTrackingWithTouch:touch withEvent:event];

    _hasFinishedMoving = NO;

    return YES;
}

- (void)endTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event
{
    [super endTrackingWithTouch:touch withEvent:event];

    _savedValue = self.value;

   _hasFinishedMoving = YES;
} 
```

并更改`updatePosition`为包括这些变量和验证：

```
-(void) updatePosition
{
   if (!_scrubberSlider.tracking) // this is a UISlider BOOL
   {
       if (_scrubberSlider.hasFinishedMoving)
       {
           _scrubberSlider.value = _scrubberSlider.savedValue;
           _scrubberSlider.hasFinishedMoving = NO;
       }
       else
       {
           CGFloat percent = _theMusicPlayer.currentPlaybackTime / [[_theMusicPlayer.nowPlayingItem valueForKey:MPMediaItemPropertyPlaybackDuration] floatValue];

           _scrubberSlider.value = percent;
       }
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T18:12:30.407

[AVFoundation 框架](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVFoundationFramework/_index.html)有一个名为的方法，`addPeriodicTimeObserverForInterval:queue:usingBlock:`它与`AVPlayer`. 有一个[AVPlayer 演示](https://developer.apple.com/library/ios/#samplecode/AVPlayerDemo/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010101)，它具有非常平滑的擦洗。我找不到类似的方法`AVAudioPlayer`，但也许[AVPlayer 演示](https://developer.apple.com/library/ios/#samplecode/AVPlayerDemo/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010101)会给你一些关于如何实现平滑擦洗的想法。

部分问题在于找到正确的计时器间隔，我相信[AVPlayer 演示](https://developer.apple.com/library/ios/#samplecode/AVPlayerDemo/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010101)可以帮助您。如果您必须使用计时器，最好使用 a `CADisplayLink`（而不是`NSTimer`），因为在处理更新屏幕上某些内容的显示时这会更准确。

看起来你正在使用`MPMusicPlayerController`. 如果您正在制作自己的控件，那么使用`AVAudioPlayer`or可能会更好`AVPlayer`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T07:11:02.473

要在滑块拖动时连续更新计时器（不跳动），我们应该最小化 scheduleTimerWithTimeInterval 的值。所以，如果你的计时器值是这样的： -

```
timer=[NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(updateElapsedTime) userInfo:nil repeats:YES]; 
```

通过最小化 scheduleTimerWithTimeInterval 值尝试进行小修改

```
timer=[NSTimer scheduledTimerWithTimeInterval:0.001 target:self selector:@selector(updateElapsedTime) userInfo:nil repeats:YES];

-(void)updateElapsedTime {

     //do your stuffs here
} 
```

# r - 循环目录以获取 Excel 内容

> ID：15130048
> 
> 赞同：2
> 
> 时间：2013-02-28T07:40:31.950
> 
> 标签：r, loops, xlsx

我有一个包含 Excel 文件的目录：

```
sites=list.files(pattern='[.]xls')
> sites
[1] "test1.xls" "test2.xls" "test3.xls" 
```

这有效：

```
a=read.xlsx(sites[1],14) 
```

所以我希望这也会起作用：

```
df=data.frame()
  for (i in sites){
  x=read.xlsx(sites[i],14)
  x=x[560:831,12:14]
  df=rbind.fill(df,x)
  } 
```

但是，这给出了：

```
Error in loadWorkbook(file) : Cannot find NA 
```

这里出了什么问题？此外，有没有办法对此进行矢量化 - 文件很大并且加载速度很慢；我不能使用 read.xlsx2 因为数据不是正确的 [表格] 格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:47:09.810

您`i`遍历索引的元素`sites`而不是索引。试试`for(i in 1:length(sites))`吧。或`x=read.xlsx(i,14)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:08:20.423

您可以尝试`ldply`从`plyr`包装中使用。

我首先定义一个函数，因为您只想获取每个文件的一部分。如果您要全部使用，则可以`read.xlsx`在`ldply`通话中使用。

```
library(xlsx)
library(plyr)
sites=list.files(pattern='[.]xls')

fun <- function(x) {
  df <- read.xlsx(x, sheetIndex=14)
  df <- df[560:831,12:14]
} 
```

然后`fun`使用`ldply`：

```
df.big <- ldply(sites, fun) 
```

这应该为您提供一个包含所有工作表的数据框。

# php - 将名称添加到选择时，Ajax 停止填充选择多个

> ID：15130053
> 
> 赞同：0
> 
> 时间：2013-02-28T07:40:56.547
> 
> 标签：php, html, mysql, ajax, prototype

我试图让用户单击“选择多个”表单中列出的项目，然后单击“开始”。Select Multiple 当前正在由 Ajax 更新程序填充。在我将 name="subjects" 添加到 Select Multiple 之前，Ajax/Form 效果很好，然后 Ajax 不再填充 Select。这可能是一个简单的修复。

我的代码：

```
<form id="searchform" method="get" action="findsyllabi.php">
    <input type="textbox" onkeyup="sendRequest()" name="search_query" />
    <input type="submit" id="search_select_submit" value="Go">
    <input type="hidden" name="searchtype" value="subjects">
    <select multiple id="show_results" name="subjects" />
    </select>
</form>

<script type="text/javascript" src="http://poseidonwebstudios.com/test/ccl_cms/js/prototype.js"></script>
<script>
    function sendRequest() {
        new Ajax.Updater('show_results', 'search.php', { method: 'post', parameters: $('searchform').serialize() });
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:44:05.170

您应该使用**表单 id**。尝试这个，

```
$('#searchform').serialize(); 
```

# ios - 尝试清理 iOS OAuth 代码

> ID：15130061
> 
> 赞同：0
> 
> 时间：2013-02-28T07:41:29.587
> 
> 标签：ios, networking, oauth, objective-c-blocks, flickr

我在我的应用程序中添加了将图像上传到 Flickr 的功能。我正在使用 ObjectiveFlickr 并使用 SnapAndRun 示例代码，并让它工作。唯一的问题是，它看起来很丑。

我很少做很多网络编码，所以这有点难以理解。

使用 OAuth 授权我的应用程序似乎要通过这么多功能......必须有一种更清洁的方式。

我曾考虑过使用积木，但我没有很好地处理它。

我基本上有一个 5 步过程，从一个函数开始，将一些东西发送到 Flickr，Flickr 在另一个函数中返回并调用另一个函数，然后不断地......请求令牌......等待回复，建立一个 webview确认...获取另一个令牌...更多等待...最后点击我的上传代码。

有没有人以更清洁的方式做到这一点？我想要一个小方向。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:03:00.323

我在使用 tumblr 进行身份验证时面临同样的问题。我找到了使用 oauth-consumer 的解决方案。您可以从[git](https://github.com/couchbaselabs/ios-oauthconsumer)或[google-group](https://code.google.com/p/oauthconsumer/wiki/UsingOAuthConsumer)下载它。

您必须在[此处](http://www.flickr.com/services/api/misc.api_keys.html)`CONSUMER_KEY`注册 flicker api，然后才能`CONSUMER_SECRET`从那里获取。

```
#define CONSUMER_KEY @"your consumer key here"
#define CONSUMER_SECRET @"your secret key here"
#define authorize_url  @"http://www.flickr.com/services/oauth/authorize"
#define request_token_url  @"http://www.flickr.com/services/oauth/request_token"

-(void)btnPressed:(id)sender{
    self.consumer = [[OAConsumer alloc] initWithKey:CONSUMER_KEY secret:CONSUMER_SECRET];

    NSURL *url = [NSURL URLWithString:request_token_url];

    OAMutableURLRequest *request = [[OAMutableURLRequest alloc] initWithURL:url
                                                                   consumer:self.consumer
                                                                      token:nil   // we don't have a Token yet
                                                                      realm:nil   // our service provider doesn't specify a realm
                                                          signatureProvider:nil]; // use the default method, HMAC-SHA1

    [request setHTTPMethod:@"POST"];

    OADataFetcher *fetcher = [[OADataFetcher alloc] init];

    [fetcher fetchDataWithRequest:request
                         delegate:self
                didFinishSelector:@selector(requestTokenTicket:didFinishWithData:)
                  didFailSelector:@selector(requestTokenTicket:didFailWithError:)];
}

- (void)requestTokenTicket:(OAServiceTicket *)ticket didFinishWithData:(NSData *)data {
    if (ticket.didSucceed)
    {
        NSString *responseBody = [[NSString alloc] initWithData:data
                                                       encoding:NSUTF8StringEncoding];
        self.accessToken= [[OAToken alloc] initWithHTTPResponseBody:responseBody];

        NSURL *author_url = [NSURL URLWithString:[ NSString stringWithFormat:authorize_url,self.accessToken.key]];
        OAMutableURLRequest  *oaR = [[OAMutableURLRequest alloc] initWithURL:author_url consumer:nil token:nil realm:nil signatureProvider:nil];
        UIWebView  *webView =[[UIWebView alloc] initWithFrame:[UIScreen mainScreen].bounds];
        [[[UIApplication sharedApplication] keyWindow] addSubview:webView];
        webView.delegate=self;
        [webView setScalesPageToFit:YES];
        [webView loadRequest:oaR];

    }
}

- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

    NSString *url = [[request URL] absoluteString];
    NSString *keyOne = @"oauth_token";
    NSString *keyTwo = @"oauth_verifier";
    NSRange r1 =[url rangeOfString:keyOne];
    NSRange r2 =[url rangeOfString:keyTwo];
    if (r1.location!=NSNotFound && r2.location!=NSNotFound) {
        // Extract oauth_verifier from URL query
        NSString* verifier = nil;
        NSArray* urlParams = [[[request URL] query] componentsSeparatedByString:@"&"];
        for (NSString* param in urlParams) {
            NSArray* keyValue = [param componentsSeparatedByString:@"="];
            NSString* key = [keyValue objectAtIndex:0];
            if ([key isEqualToString:@"oauth_verifier"]) {
                verifier = [keyValue objectAtIndex:1];
                break;
            }
        }
        if (verifier) {
            NSURL* accessTokenUrl = [NSURL URLWithString:@"http://www.tumblr.com/oauth/access_token"];
            OAMutableURLRequest* accessTokenRequest =[[OAMutableURLRequest alloc] initWithURL:accessTokenUrl
                                                                                     consumer:self.consumer
                                                                                        token:self.accessToken
                                                                                        realm:nil
                                                                            signatureProvider:nil];
            OARequestParameter* verifierParam =[[OARequestParameter alloc] initWithName:@"oauth_verifier" value:verifier];
            [accessTokenRequest setHTTPMethod:@"POST"];
            [accessTokenRequest setParameters:[NSArray arrayWithObjects:verifierParam,nil]];
            OADataFetcher* dataFetcher = [[OADataFetcher alloc] init];
            [dataFetcher fetchDataWithRequest:accessTokenRequest
                                     delegate:self
                            didFinishSelector:@selector(requestTokenTicketForAuthorization:didFinishWithData:)
                              didFailSelector:@selector(requestTokenTicket:didFailWithError:)];
        } else {
            // ERROR!
        }
        [webView removeFromSuperview];
        return NO;
    }
    if([url isEqualToString:@"http://www.elegantmedia.com.au/"]){
        [webView removeFromSuperview];
        return NO;
    }
    return YES;
}

- (void)requestTokenTicketForAuthorization:(OAServiceTicket *)ticket didFinishWithData:(NSData *)data
{
    if (ticket.didSucceed)
    {
        NSString *responseBody = [[NSString alloc] initWithData:data
                                                       encoding:NSUTF8StringEncoding];
        self.accessToken = [self.accessToken initWithHTTPResponseBody:responseBody];
        accessTokenKey=self.accessToken.key;
        accessTokenSecret=self.accessToken.secret;
        //[self post];

        NSString *blogUrl=(NSString *)[[NSUserDefaults standardUserDefaults]objectForKey:@"tumblrBlogUrl"];
        if([blogUrl isEqualToString:@""]||blogUrl==nil){
            [self getUserInfo];
        }
        else{
            NSData *data = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"picture" ofType:@"jpg"]];
            [self postPhoto:data caption:@"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when" inBlog:blogUrl];
        }
    }
    else
    {
        NSString *responseBody = [[NSString alloc] initWithData:data
                                                       encoding:NSUTF8StringEncoding];
        NSLog(@"Response = %@",responseBody);
    }

}
- (void)requestTokenTicket:(OAServiceTicket *)ticket didFailWithError:(NSError *)error
{
    NSLog(@"Error = %@",[error localizedDescription]);
} 
```

如果它需要任何额外的参数，你可以从[这里](http://www.flickr.com/services/api/auth.oauth.html)获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:08:29.793

[OAuth 的 Flickr 指南](http://www.flickr.com/services/api/auth.oauth.html)看起来很清楚，但是如果你想看一个例子，有一个 github 项目[Flickr iOS OAuth 。](https://github.com/josephstein/Flickr-OAuth-iOS)

# php - URL 编码西班牙语单词

> ID：15130063
> 
> 赞同：0
> 
> 时间：2013-02-28T07:41:32.603
> 
> 标签：php, javascript, html, urlencode, encode

我正在制作一本西班牙语词典。我从 www.rae.es 得到定义。问题：

搜索引擎不适用于重音 (á é í ó ú )。输出是来自 rae.es 的错误消息，指出无法识别该单词。例如：对于单词“baúl”，出现（翻译）：“单词 baÃºl 没有在字典中注册。”

如何使用 urlencode() 或其他函数来解决此问题？请通过右键单击检查代码并使用 Google Chrome、Safari 或 Firefox 检查元素。

[http://verbum.xtrweb.com/verbumpost.php?word=ba%C3%BAl&word0=](http://verbum.xtrweb.com/verbumpost.php?word=ba%C3%BAl&word0=)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:44:21.387

尝试做`urlencode(utf8_encode($string))`而不是仅仅`urlencode($string)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:44:29.460

在您的搜索词上使用 htmlentities 并尝试使用帖子，而不是获取： http: [//php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)

# javascript - jQuery + UI 和nestedSortable，克隆不起作用

> ID：15130064
> 
> 赞同：0
> 
> 时间：2013-02-28T07:41:32.897
> 
> 标签：javascript, jquery, jquery-ui

我尝试让这个示例（[http://jsfiddle.net/jhogervorst/Ge7eK/9/](http://jsfiddle.net/jhogervorst/Ge7eK/9/)）与从左菜单到右的克隆列表元素一起工作。已经有助手：'克隆'，但它不起作用 =\

```
$('ol.sortable').nestedSortable({
    disableNesting: 'no-nest',
    forcePlaceholderSize: true,
    handle: 'div',
    helper: 'clone',
    items: 'li',
    maxLevels: 3,
    opacity: .6,
    placeholder: 'placeholder',
    revert: 250,
    tabSize: 25,
    tolerance: 'pointer',
    toleranceElement: '> div',

    /* The magic tric: */
    connectWith: '.sortable'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T20:41:26.753

事实上，它确实有效，但不是你想的那样，我认为......

*当动作完成时，可排序*的«消失»中的克隆很符合逻辑，不是吗？因为如果您希望一个元素保留在其“初始源”并同时被复制到其他地方，那么**它不是 sort 而是 drag**。

看来您正在尝试实现类似于此页面演示的内容：

*   [http://jqueryui.com/draggable/#sortable](http://jqueryui.com/draggable/#sortable)

（*...如果您不想使用上面演示中的 2 个函数，我建议您在操作结束时使用回调来手动克隆并将您的元素附加到其“初始源”*）。

但是，如果您只想在对元素进行排序*时看到它，*只需向 «placeholder» 添加一些样式，它应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T07:47:57.317

[使用 jquery 可排序时如何复制项目？](https://stackoverflow.com/questions/6940390/how-do-i-duplicate-item-when-using-jquery-sortable)

nestedSortable 只是 jQuery UI sortable 的扩展，所以你可以使用相同的功能

# java - IP Messenger 如何填充在线用户

> ID：15130066
> 
> 赞同：0
> 
> 时间：2013-02-28T07:41:40.917
> 
> 标签：java, android, udp, ip, messenger

我正在为 android 开发 IP messenger(LAN messenger)，

成功地能够使用 udp 发送数据。但我必须手动输入目标 IP 地址。

现在我正在尝试创建在线用户列表。

IP Messenger 如何填充在线用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:47:35.833

一种解决方案是：

> 让客户端频繁 Ping 服务器
> 
> 在服务器端，根据`ping`从客户端收到的信息更新用户列表。

# java - 什么是超类型方法？

> ID：15130067
> 
> 赞同：11
> 
> 时间：2013-02-28T07:41:49.713
> 
> 标签：java, oop, supertype

我用谷歌搜索了几次，但仍然无法理解超类型方法。谁能解释一下这是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-28T08:14:42.557

OOPS 中有超类型和子类型的概念，在 java 中这种关系是通过继承实现的，即使用`extends`关键字：

```
class A {} // super class
class B extends A {} //sub class 
```

在超类中声明的任何成员（字段、方法）都称为超类型。

因此，在上述上下文中，如果类`A`具有类似的方法

```
class A {
   void set()
} 
```

Set 是 class 的超类型方法`B`。

但是，请注意，如果有另一个类说`C`：

```
class C {
    void set()        
} 
```

然后`set()`方法**不是类的超类型**，`C`因为类`A`和类之间没有关系`C`（关系是通过`extends`关键字创建的，用于继承）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T08:36:32.533

如果您正在谈论调用超级方法，则应尝试以下操作

1.  使用方法公共方法创建一个类，例如`printSomething()`

    ```
    public void printSomething() {
       System.out.println("hello, I am the first class");
     } 
    ```

2.  创建从第一个类继承的第二个类并覆盖 printSomething 方法

    ```
    @override
    public void printSomething() {
    super.printSomething();
    } 
    ```

3.  编写一个小程序，调用`printSomething`类二的方法，看看会发生什么

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-07T09:57:37.507

超级在建造者级别

```
class SuperClass
{
    int num=10;
    public void display()
    {
        System.out.println("Superclass display method");
    }
}

class SubClass extends SuperClass
{
    int num=20;

    public void display()
    {
        System.out.println("the value of subclass variable name:"+num);
        System.out.println("Subclass display method");
    }

    public void Mymethod()
    {
        super.display();
        System.out.println("the value of superclass variable name:"+super.num);
    }

    public static void main(String[] args)
    {
        SubClass obj=new SubClass();
        obj.Mymethod();
        obj.display();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T08:19:05.813

在java中，每件事都是对象，方法也是类java.lang.reflect.Method的对象，所以方法的超类型可以被认为`java.lang.reflect.Method`是`AccessibleObject`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-11T15:02:34.287

超类型和子类型是继承的属性，即为了代码的可重用性。我给你举了超级类和子类的例子。更多你可以关注[这里](http://dotnetminds.com/inheritance-using-c-2/)。

使用系统；

```
namespace MultilevelInheritance
{
    public class Customer
    {
        public float fDis { get; set; }
        public Customer()
        {
            Console.WriteLine("I am a normal customer.");
        }
        public virtual void discount()
        {
            fDis = 0.3F;
            Console.WriteLine("Discount is :{0}", fDis);
        }

    }
    public class SilverCustomer : Customer
    {
        public SilverCustomer()
            : base()
        {
            Console.WriteLine("I am silver customer.");
        }
        public override void discount()
        {
            fDis = 0.4F;
            Console.WriteLine("Discount is :{0}", fDis);
        }
    }
    class GoldenCustomer : SilverCustomer
    {
        public GoldenCustomer()
        {
            Console.WriteLine("I am Golden customer.");
        }
        public override void discount()
        {
            fDis = 0.6F;
            Console.WriteLine("Discount is :{0}", fDis);
        }

    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace MultilevelInheritance
{
    class Program
    {
        static void Main(string[] args)
        {
            Customer objCus = new Customer();
            objCus.discount();

            SilverCustomer objSil = new SilverCustomer();
            objSil.discount();

            GoldenCustomer objGold = new GoldenCustomer();
            objGold.discount();

            Console.ReadLine();
        }
    }
} 
```

[在此处输入图像描述](http://i.stack.imgur.com/6XOdW.jpg)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-07T09:53:42.643

Super 用于调用在 3 个级别变量构造函数和方法级别使用的父类属性

1.超级变量

```
class Super
{
    int age;
    Super(int age)
    {
        this.age=age;
    }
        public void getAge()
        {
            System.out.println(age);
        }
}
class Sub extends Super
{
    Sub(int age)
    {
        super(age);
    }
    public static void main(String[] args)
    {
         Super obj=new  Super(24);
         obj.getAge();
    }
} 
```

# struts - 在 websphere 中将 1.1 struts 和 struts-el 迁移到 1.2.9

> ID：15130069
> 
> 赞同：1
> 
> 时间：2013-02-28T07:41:53.257
> 
> 标签：struts, websphere, struts-1, websphere-8, ibm-rad

我一直在尝试将我的网络应用程序从 WASD 5.1 迁移到 RAD 8.5.1 我也在使用 struts-el 1.1 并尝试升级到 1.2.9 我正在使用 websphere 8.5 Web Dynamic 3.0 并遇到此错误：

> /jsp/sa/SA_Login.jsp(62,1) --> JSPG0123E: 找不到标记属性名称的标记属性信息。在 com.ibm.ws.jsp.translator.visitor.validator.ValidateVisitor.validateCustomTagAttributeValues(ValidateVisitor.java:1395) 在 com.ibm.ws.jsp.translator.visitor.validator.ValidateVisitor.visitCustomTagStart(ValidateVisitor.java:294)在 com.ibm.ws.jsp.translator.visitor.JspVisitor.processJspElement(JspVisitor.java:366) 在 com.ibm.ws.jsp.translator.visitor.JspVisitor.processChildren(JspVisitor.java:419) 在 com.ibm .ws.jsp.translator.visitor.JspVisitor.processJspElement(JspVisitor.java:234) 在 com.ibm.ws.jsp.translator.visitor.JspVisitor.visit(JspVisitor.java:216) 在 com.ibm.ws.jsp .translator.JspTranslator.processVisitors(JspTranslator.java:127) 在 com.ibm.ws.jsp.translator.utils.JspTranslatorUtil。

我的 SA_Login 页面有以下代码：

```
<%@ include file = "../common/header.inc"%>
<html-el:javascript formName="SALoginFormBean" staticJavascript="false" dynamicJavascript="true" page="0" />
<script language="JavaScript1.2" src="../../js/xx.js"></script>
... to line 61 ...
<html-el:form  action="/SALogin.do" 
    name="SALoginFormBean"
    type="com.SALoginFormBean" 
    method="post"
    > 
```

我的 header.inc 是：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<%@ taglib uri="../../WEB-INF/struts-html-el.tld" prefix="html-el" %>
<%@ taglib uri="http://java.sun.com/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jstl/fmt" prefix="fmt" %>
<%@ taglib uri="../../WEB-INF/struts-bean.tld" prefix="bean" %>
<%@ taglib uri="../../WEB-INF/struts-logic-el.tld" prefix="logic-el" %>
<%@ page import ="com.*" buffer="16kb" errorPage="../errorpages/xyz.jsp"  %> 
```

我的 struts 配置是：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
                               "struts-config_1_2.dtd">

<struts-config>

    <!-- Data Sources -->
    <data-sources>
    </data-sources>

    <form-beans>
        <form-bean name="SALoginFormBean" type="com.tis.web.sa.SALoginFormBean"></form-bean> 
```

不知道我做错了什么..任何帮助将不胜感激如果需要更多详细信息，请告诉我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:07:25.320

基于此链接 [http://wiki.apache.org/struts/StrutsUpgradeNotes11to124](http://wiki.apache.org/struts/StrutsUpgradeNotes11to124)

看来您需要删除 html-el:form 的名称和类型属性。

# ruby-on-rails-3 - 黄瓜路由问题中的 RSpec::Expectations::ExpectationNotMetError

> ID：15130074
> 
> 赞同：0
> 
> 时间：2013-02-28T07:42:22.210
> 
> 标签：ruby-on-rails-3, cucumber, capybara, bdd, rspec-expectations

我开始通过黄瓜研究 BDD。（使用 Rails-3，gem 'cucumber-rails'）
我想在成功登录时重定向到用户个人资料页面（/users/id）。
我在控制器中定义为 (redirect_to user_path(@user)) 和我在黄瓜中定义的一样 (page.current_path.should == user_path(@user))

在我的 step_definition

```
Given /^a user visits the signin page$/ do
  visit signin_path
end

When /^he log in as "(.*)\/(.*)"$/ do |email, password|
  @email = email
  fill_in "email", with: email
  fill_in "password", with: password
  click_button "Login"
end

Then /^he should see a signin link$/ do
  page.should have_link('Sign in', href: signin_path)
end

Then /^he should see his profile page$/ do
  @user = User.where("email = ?", @email)
  page.current_path.should == user_path(@user)
end 
```

在我的控制器中

```
class SessionsController < ApplicationController

 def create
  @user = User.find_by_email(params[:session][:email].downcase)
  if @user && @user.authenticate(params[:session][:password])
   sign_in @user      
   redirect_to user_path(@user)               
  else
   flash.now[:error] = 'Invalid email/password combination'
   render 'new'
  end
 end
end 
```

现在运行黄瓜时，我收到此错误：

```
expected: "/users/%23%3CActiveRecord::Relation:0x000000062fbec0%3E"
       got: "/users/4" (using ==) (RSpec::Expectations::ExpectationNotMetError) 
```

在我的 features/support/env.rb 中：

```
require File.expand_path(File.dirname(__FILE__) + '/../../config/environment')
require 'cucumber/rails'
require 'rspec/expectations' 
```

请回答我做错的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:45:45.307

您的步骤定义中的此代码是问题所在：

```
Then /^he should see his profile page$/ do
  @user = User.where("email = ?", @email)
  page.current_path.should == user_path(@user)
end 
```

`User.where`将始终返回一个关系，即使结果只是一个用户记录，因此`ActiveRecord::Relation`是您的错误消息的一部分。

如果您可以确定只会返回一个 User ，您可以将其换成类似`User.find_by_email(@email)`or的东西`User.where(:email => @email).first`，以获得单个 User 实例。

# easeljs - 类扩展容器但不能添加事件监听器？

> ID：15130077
> 
> 赞同：0
> 
> 时间：2013-02-28T07:42:30.700
> 
> 标签：easeljs, createjs

我创建了一个扩展 Container 的自定义类。但是，当我尝试向其添加侦听器时，出现以下错误：

“TypeError：this.addEventListener 不是函数

这是我的代码的最小示例：

```
(function() {
    var ExtendedContainerObject = function() {
        this.initialize();
    }

    // inherit from Container
    var p = ExtendedContainerObject.prototype = new createjs.Container();

    p.Container_initialize = p.initialize;
    p.initialize = function() {
        this.Container_initialize();
        console.log("this: " + this);
        this.addEventListener("custom_event", function(evt){console.log("this: " + evt.target);});

        this.button.onPress = function(evt) {
            evt.onMouseMove = function(ev) {
                dispatchEvent(new Event("custom_event", this));
            }
        }
    }

    window.ExtendedContainerObject = ExtendedContainerObject;
}()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:36:28.587

我有一个完全一样的类，它应该可以工作，你使用的是 EaselJS 0.6.0 吗？

# google-chrome-extension - 在 chrome 扩展中过滤特定的书签文件夹项目

> ID：15130078
> 
> 赞同：0
> 
> 时间：2013-02-28T07:42:30.980
> 
> 标签：google-chrome-extension

我需要在存在的许多根文件夹中获取特定的书签组或文件夹“代码库”。此外，我需要在我的 Popup html 表单中显示“代码库”下的子文件夹或子组。从chrome docs，我相信下面的函数可以做这些事情，但它需要文件夹的ID，如何获取ID？

```
chrome.bookmarks.getSubTree(string id, function callback) 
```

仅供参考，弹出 html 表单由脚本外部控制，我需要在其中放置上述要求的代码。谢谢你的时间 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:11:19.113

我使用下面的代码来解决问题，任何人都可以通过检查此答案的“正确”符号或评论来验证下面的代码。

```
var temP = [];
  var found;
  $(document).ready(function(){
    chrome.bookmarks.getTree(function(bookmarks){
        found = search_for_title(bookmarks, "here goes title of an existing bookmark which user need to search"); // found variable will have the id of bookmark we r searching.
        chrome.bookmarks.getChildren(found, function(children) { //using the ID of the bookmark we can process further requirement
            children.forEach(function(bookmark) {   // here i'm dwelling into sub folder to extract the content
            console.debug(bookmark.title);// these were the subfolder titles
            console.log(bookmark.id);// these were the subfolder ids
            });
        });
    });

    function search_for_title(bookmarks, title){ // first argument is entire bookmarks, second argument is title which we specified for search
        for(var i=0; i < bookmarks.length; i++){ 
            if(bookmarks[i].title == title){ 
            return bookmarks[i].id;   // we will get the id of the bookmark we are searching for
            }
            else{
                if(bookmarks[i].children){  
                    var id = search_for_title(bookmarks[i].children, title);
                    if(id)
                    return id;
                }
            }
        }

    return false;
    }
}); 
```

谢谢

# svn - 我可以在 precommit 钩子中使用 export 命令来获取带有 head 修订的单个文件吗？

> ID：15130081
> 
> 赞同：0
> 
> 时间：2013-02-28T07:42:51.683
> 
> 标签：svn

当我在预提交挂钩中运行导出命令时。它没有得到文件。我也尝试在预提交挂钩中运行 svn.exe，但它不起作用。我想知道在 pre-commit 中运行 svn.exe 有一些限制。我在除预提交钩子之外的任何批处理文件中使用带有 head rev 的导出命令获取单个文件。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:54:19.597

虽然@alroc 有完全有效和正确的答案（“显示，**什么**不起作用以及**如何**”），但我必须添加

*   svnlook 更适合在 hooks 中使用
*   `svnlook cat`输出任何受事务影响的文件（在运行过程中预提交钩子检查）

# c# - 将 WPF 窗口数据导出为 HTML 或任何其他可打印格式

> ID：15130084
> 
> 赞同：0
> 
> 时间：2013-02-28T07:42:57.390
> 
> 标签：c#, wpf

C# WPF windows 应用程序屏幕有多个网格和文本框，现在我需要将页面的所有内容显示为可打印格式，然后打印，这里每个网格有超过 500 条记录，我必须打印所有数据，然后再打印我必须在所有数据的可打印视图中显示。

是否有任何开源可用于此？

或任何其他方法来实现这一目标？

或者有什么方法可以将数据导出为 HTML 格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:03:16.600

下面的代码让您获得 FrameworkElement（您的窗口）的图像：您可以使用图像并打印图像：（我不确定图像会是什么样子，因为您有超过 500 条记录）

> ```
>  Transform transform = element.LayoutTransform;
>         element.LayoutTransform = null; 
> ```

```
 double width = element.ActualWidth;
        double height = element.ActualHeight;

        // fix margin offset as well
        Thickness margin = element.Margin;
        element.Margin = new Thickness(0, 0, margin.Right - margin.Left, margin.Bottom - margin.Top);

        // Get the size of canvas
        Size size = new Size(width, height);

        // force control to Update
        element.Measure(size);
        element.Arrange(new Rect(size));

        RenderTargetBitmap bmp = new RenderTargetBitmap((int)width, (int)height, 96, 96, PixelFormats.Pbgra32);

        bmp.Render(element);

        // return values as they were before
        element.LayoutTransform = transform;
        element.Margin = margin;
        Clipboard.SetImage(bmpCopied); 
```

# iphone - UIView 逼真的 3d 旋转动画

> ID：15130085
> 
> 赞同：0
> 
> 时间：2013-02-28T07:43:01.570
> 
> 标签：iphone, ios, objective-c, xcode, core-animation

我正在尝试找到一种方法来为 UIView 的 3D 旋转设置动画。如果您选择“横幅”样式，我希望它看起来像推送通知的动画。我正在尝试使用类似的东西

```
CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"transform"];
CATransform3D t = CATransform3DIdentity;
t = CATransform3DTranslate(t, 0, -self.bounds.size.height/2, 0);
t = CATransform3DRotate(t, M_PI_2, 1, 0, 0);
t = CATransform3DTranslate(t, 0, -self.bounds.size.height/2, 0);
[anim setFromValue:[NSValue valueWithCATransform3D:CATransform3DIdentity]];
[anim setToValue:[NSValue valueWithCATransform3D:t]];
anim.removedOnCompletion = NO;
[anim setDuration:0.25];
anim.fillMode = kCAFillModeForwards;
anim.delegate = self;
[self.layer addAnimation:anim forKey:@"Rotation"]; 
```

但这看起来很扁平，不像推送通知的横幅那么逼真的 3D。我怎样才能使这个动画更逼真？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:32:53.343

您可能想深入了解[CMNavBarNotificationView](https://github.com/edgurgel/CMNavBarNotificationView)是如何实现的。

另外，有不同类型的 CALayer，您可能想从`+(Class)layerClass`动画视图中选择一个想要的。我似乎坚持使用普通的 CALayer。

# php - 来自 api url 的“&”字符未保存到 mysql 数据库

> ID：15130091
> 
> 赞同：1
> 
> 时间：2013-02-28T07:43:35.500
> 
> 标签：php, javascript, jquery, mysql

我正在开发一个应用程序，该应用程序涉及使用 javascript 从页面获取整个页面内容并将 html 转储到数据库。在页面上，我有各种组件将使用`ajax`请求进行解析和存储。我这样做。

```
 function saveContent(){    
    var $getContent = $('#mainWrap').clone();
    $getContent.find('.textBox, .pictureBox').removeAttr('id');
    var saveContent  = $getContent.wrap('<div></div>').html();
    var getBodyStyle=$('body').attr('style');
    var auto="auto";
    $.ajax({
        url:"save.php",
        type:"POST",
        dataType:"text",
        data:"txtComp="+saveContent+"&auto="+auto+"&pageId="+pageId+"&webId="+webId+"&userId="+userId+"&bodyStyle="+getBodyStyle,
        success:function(data){
            var options = {"text":data,"layout":"topCenter","type":"success","animateOpen": {"opacity": "show"}};
            setTimeout(function(){noty(options)}, 1000);
            //$('#draftMsg').html(data).fadeIn(500);
        }
    }); 
 } 
```

现在我有社交媒体组件，如 facebook、twitter。当我尝试保存 facebook 组件时，它并没有完全保存，因为它包含脚本中存在的一些参数，带有“&”。

```
 <div style="z-index: 1001; height: 560px; width: 413px; top: -20px; left: 121.5px;" id="com-IADDFSGNHLU7WNR3WM2KC3I8DA2DOIC6" class="facebookBox contentBox boxStyle">
    <div class="blankDiv"></div>
    <iframe class="facebookBoxObject" allowtransparency="true" style="border: medium none; overflow: hidden; height: 560px; width: 413px;" src="https://www.facebook.com/plugins/likebox.php?api_key=117096311791424&amp;locale=en_US&amp;height=560&amp;header=true&amp;show_faces=true&amp;stream=true&amp;width=413&amp;href=http://www.facebook.com/cbil360" frameborder="0" scrolling="no">
    </iframe>
   </div> 
```

以上是我要存储到数据库中的内容，当我说时我得到它，`console.log`但在数据库中它只存储以下内容

```
 <div style="z-index: 1001; height: 388px; width: 283px; top: -20px; left: 120.5px;" id="com-IADDFSGNHLU7WNR3WM2KC3I8DA2DOIC6" class="facebookBox contentBox boxStyle">
    <div class="blankDiv"></div><iframe class="facebookBoxObject" allowtransparency="true" style="border: medium none; overflow: hidden; height: 388px; width: 283px;" src="https://www.facebook.com/plugins/likebox.php?api_key=117096311791424 
```

它在参数之后中断，`api_key`因为它有&之后。我不确定我没有得到任何错误。尝试调试，但还没有得出结论。请纠正我哪里出错了。

**更新：**我正在使用的查询是

```
$query = "insert into tbl_revision (userId,revisionContent,webId,pageId,status,saveType,dateAdded) values ('".$_SESSION['UserId']."','$revisionContent','$webId','$pageId','$status','$saveType','$toDate')" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:58:24.210

您是否尝试过使用 htmlentities 和 html_entity_decode 对输入字符串进行编码并解码输出字符串？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:04:21.297

我真的怀疑问题是否在数据到达您的后端之前发生。它发生在前端，因为您`&`在查询字符串中包含 a 作为普通字符，这会导致一些混乱。我建议您对变量进行 URL 编码（**URL****编码**不是**HTML**编码）。`saveContent`

 ****```
encodeURIComponent(saveContent) //that will replace the & with it's corresponding url encoding 
```

还有另一种解决方法，您可以使用 jquery $.ajax 提供的 json 表单提交 ajax 请求字段。一个例子是

```
 $.ajax({
        url:"save.php",
        type:"POST",
        dataType:"text",
        data:{txtComp: saveContent, auto: auto }, //etc
        success:function(data){
            var options = {"text":data,"layout":"topCenter","type":"success","animateOpen": {"opacity": "show"}};
            setTimeout(function(){noty(options)}, 1000);
            //$('#draftMsg').html(data).fadeIn(500);
        }
    }); 
```

* * *

我还建议您查看该问题以了解 URL 编码和 HTML 编码之间的区别

[URL编码和HTML编码的区别](https://stackoverflow.com/questions/1812473/difference-between-url-encode-and-html-encode)****

# objective-c - 显示 UIImage 的 Touch On Highlight

> ID：15130092
> 
> 赞同：0
> 
> 时间：2013-02-28T07:43:38.717
> 
> 标签：objective-c, xcode, uibutton, uiimage

UIButton 有一个很酷的属性，叫做“Shows Touch On Highlight”，它允许我告诉用户“你触摸了这个按钮”。

有什么方法可以为 UIImage 实现这个吗？我希望用户看到 UIImage 中触摸的点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:48:07.723

如果你使用一个小技巧。在 UIImageView 上方制作一个透明按钮。所以必须设置一个 UIImageView userInteractionEnabled true bec default false。如下：

```
imageView.userInteractionEnabled = YES;
UIButton *clearButton = [UIButton buttonWithType:UIButtonTypeCustom];
clearButton.frame = imageView.frame;
clearButton.showsTouchWhenHighlighted = YES;
[clearButton setBackgroundColor:[UIColor clearColor]];
[imageView addSubView:clearButton]; 
```

其他技巧，创建一个透明按钮，并设置您想要的图像。

```
UIButton *clearButton = [UIButton buttonWithType:UIButtonTypeCustom];
clearButton.frame = CGRectMake(<#CGFloat x#>, <#CGFloat y#>, <#CGFloat width#>, <#CGFloat height#>);
clearButton.showsTouchWhenHighlighted = YES;
[clearButton setImage:[UIImage imageNamed:@"your_image"] forState:UIControlStateNormal];
[clearButton setBackgroundColor:[UIColor clearColor]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:29:07.847

不，它与 in 中的方式不同`UIButton`，但您可以使用`UIButton`自定义类型，而不是为您解决它。

UIImageView 的另一个帮助是设置它的突出显示图像，但您仍然必须为效果工作。

# jquery - 分页不显示总页数

> ID：15130096
> 
> 赞同：0
> 
> 时间：2013-02-28T07:43:49.640
> 
> 标签：jquery, tablesorter

我正在使用 jquery [tablesorter](http://tablesorter.com/docs/)插件对表（tablesorter.pager.js）进行排序和分页。

我有很多列表页面，它工作正常。在一个页面中，我正在基于过滤器动态加载页面（基本上是点击页面的按钮部分加载表格）

在加载该表分页时显示总页数（1/1），即使有超过 1 页。但是在对任何列进行排序时，它会正确显示页数，例如 (1/8)，即仅在加载时它不会正确显示页数。

所有其他功能都可以正常工作。

jQuery

```
 $(document).ready(function(){
  if(0 < $("#listTable tbody tr").length){ 
      $("table") 
        .tablesorter({sortList: [[0,0]],widthFixed: true }) 
        .tablesorterPager({container: $("#pager")});
    } 
```

});

我尝试设置默认排序，但它不起作用。解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:05:46.440

改变了一些东西，比如

```
$(document).ready(function(){
   if(0 < $("#listTable tbody tr").length){ 
      $("#listTable") 
      .tablesorter({sortList: [[0,0]],widthFixed: true }) 
     .tablesorterPager({container: $("#pager")});
} 
```

及其工作！

# iphone - 如何在 UIImagePickerController 中禁用视频选择按钮

> ID：15130098
> 
> 赞同：3
> 
> 时间：2013-02-28T07:44:02.867
> 
> 标签：iphone, ios, video, uiimagepickercontroller

我正在使用 UIImagePickerController 向用户显示他在他的照片应用程序中拥有的所有视频。但是，如果用户单击`Choose`按钮，我没有提供任何功能，单击视频缩略图时会出现取消和播放按钮。

这就是我实现我的选择器的方式：

```
UIImagePickerController *videoPickerCtrl = [[UIImagePickerController alloc] init];
videoPickerCtrl.delegate = self;
videoPickerCtrl.editing = NO;
videoPickerCtrl.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
NSArray *mediaTypesAllowed = [NSArray arrayWithObject:@"public.movie"];
[videoPickerCtrl setMediaTypes:mediaTypesAllowed];
[self.navigationController presentModalViewController:videoPickerCtrl animated:YES]; 
```

我怎样才能完全删除/隐藏`Choose`按钮？或者我可以禁用它，这样用户就不会点击它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:25:38.240

我认为，不可能禁用该选择按钮。因为那是内置的

UIImagePickerController 的功能，您不能进行相同的更改。

# javascript - Javascript 或 Jquery 存储项目集合

> ID：15130103
> 
> 赞同：0
> 
> 时间：2013-02-28T07:44:14.003
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-4

在我的 MVC Web 应用程序中，我有一个功能，我需要存储几种不同类型的操作和一个键值对。

例如：有一个链接：

```
<a class="downloadIcon" ajax-data-type="download" ajax-machineId="23" ajax-packageId="2343M324HDFHD">Download</a> 
```

当有人单击上面的链接时，将开始下载，并且该下载链接将被隐藏或删除。下载完成后，将为“安装”选项创建一个新链接来代替下载图标。像这样：

```
<a class="installIcon" ajax-data-type="install" ajax-machineId="23" ajax-packageId="2343M324HDFHD">Install</a> 
```

所以我必须记住以下几点：

```
ajax-data-type => Download, Install, Uninstlall, Enable, Disable
ajax-data-machineId => int
ajax-data-packageId => int 
```

此功能将确保（例如）当下载正在“下载”但未完成，并且用户刷新他/她的浏览器时，下载链接不会再次显示（因为下载已经启动）。但是，一旦安装（该功能已经完成并且我从服务器收到响应）然后卸载，我将不得不再次显示“下载”链接等。

我会为此使用cookie吗？任何想法，帮助将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:50:00.643

如果你改变 html 如下

```
<a class="installIcon" data-ajax-type="install" data-ajax-machineId="23" data-ajax-packageId="2343M324HDFHD">Install</a> 
```

你可以使用类似的东西`$("a.installIcon").data("ajax-type")`来获取你想要的数据。您还可以更改每个数据的值，例如`$("a.installIcon").data("ajax-type","Disable")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:50:39.523

您可以将 localStorage 用于此类事情。

[http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

本质上，您只需将变量添加到 localStorage，它将保存它们以供将来访问。

因此，例如：

下载时：`localStorage.state = 'downloading'`

完成后：`localStorage.state = 'done'`

在页面加载时：

```
if(localStorage.state)
    $(".downloadIcon").hide()
if(localStorage.state == 'done')
    $(".installIcon").show() 
```

# php - @ZEND：如何在没有装饰器的情况下水平制作表单标签和元素

> ID：15130104
> 
> 赞同：1
> 
> 时间：2013-02-28T07:44:15.517
> 
> 标签：php, zend-framework, zend-form

如何在没有装饰器帮助的情况下水平创建表单元素和标签。

```
// Add the comment element
        $this->addElement('text', 'txt_password', array(
            'label'      => 'Password:',
            'required'   => true,
            'validators' => array(
                array('validator' => 'StringLength', 'options' => array(0, 20))
                )

        )); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:48:57.630

托盘其

$this->addElement('text', 'txt_password', array(

```
 'label'      => 'Password:',
        'required'   => true,
        'decorators' => array(
            'ViewHelper',
            'Description',
            'Errors',
            array(array('elementDiv' => 'HtmlTag'), array('tag' => 'span')),
            array('Label', array('tag' => 'span')),
         ),
        'validators' => array(
            array('validator' => 'StringLength', 'options' => array(0, 20))
            )

    )); 
```

# c# - 如何以编程方式绑定 DataGrid.SelectedCells

> ID：15130105
> 
> 赞同：1
> 
> 时间：2013-02-28T07:44:15.660
> 
> 标签：c#, wpf, datagrid, datagridcell

有谁知道如何做到这一点？

我知道如何在代码中绑定

```
DataGrid DGrid = new DataGrid();
DGrid.SetBinding( ... , myBinding); 
```

但不是`SelectedCells`因为没有`DataGrid.SelectedCellsProperty`我发现只有`DataGrid.SelectedIndexProperty`和`DataGrid.SelectedItemProperty`

非常感谢任何可以提供帮助的东西！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:40:56.503

如果您有其他一些依赖属性，则可以将其绑定到`DataGrid.SelectedCells`属性。因此，例如，假设您有一些`DependencyObject`祖先，并且在其中有一些`SelectedCellsInGrid`依赖属性，在这种情况下，您可以这样调用：

```
var binding = new Binding("SelectedCells") { Source = yourDataGrid };
this.SetBinding(<your_object_type>.SelectedCellsInGridProperty, binding); 
```

如果您没有 Dependency 对象，那么您可以在自定义编写的 Behavior 中执行此操作。如果这是您的情况，请发表评论-如果需要，我会提供一些其他详细信息。

# ios - iPhone - 在请求中发送证书

> ID：15130107
> 
> 赞同：1
> 
> 时间：2013-02-28T07:44:21.117
> 
> 标签：ios, request, certificate

现在，我打算将`NSURLRequest`带有本地证书的服务器发送到服务器以供服务器验证。但是我检查了函数`NSURLRequest`，我找不到包含证书的方法。有谁知道如何在 中包含证书`NSUrlRequest`？或者我必须使用开源函数，比如`ASIHttpRequest`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:30:16.603

试着看看这个相当不错的教程

[在 iOS 中使用客户端证书对 HTTP 请求进行身份验证](http://xdumaine.com/2013/02/07/authenticating-an-http-request-with-client-certificates-in-ios/)

它解释了如何使用**NSURLConnectionDelegate**方法

```
- (void)connection:(NSURLConnection *)connection 
 didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge 
```

为了提供证书。让我知道这是否有帮助。

**更新** 如果仅提供对 iOS >= 5.0 的支持，最好采用新的非弃用方法

[连接：willSendRequestForAuthenticationChallenge](http://developer.apple.com/library/ios/documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSURLConnectionDelegate/connection%3awillSendRequestForAuthenticationChallenge%3a)

# asp.net - GridView 在行选择后重新加载所有记录

> ID：15130109
> 
> 赞同：0
> 
> 时间：2013-02-28T07:44:25.627
> 
> 标签：asp.net

在页面加载时，我用记录填充 GridView。然后我创建了一个搜索功能来搜索记录。GridView 实际上是根据搜索文本进行更新的。问题是当我选择一行时，GridView 显示所有记录，而不是基于搜索的列表。

这是代码：

```
Imports MySql.Data.MySqlClient

Public Class Main_Admin
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim myConnection As MySqlConnection
        Dim myDataAdapter As MySqlDataAdapter
        Dim myDataSet As DataSet

        Dim strSQL As String
        'Dim iRecordCount As Integer

        myConnection = New MySqlConnection("server=localhost; user id=root; password=admin; database=db; pooling=false;")

        strSQL = "SELECT emp_id AS 'Employee ID', emp_sname AS Surname, emp_fname AS 'First Name', emp_mname AS 'Middle Name', tbl_emp_cat.cat_name AS 'Category', nature AS 'Nature of Employment' FROM tbl_employee JOIN tbl_emp_cat ON tbl_employee.emp_cat = tbl_emp_cat.emp_cat;"

        myDataAdapter = New MySqlDataAdapter(strSQL, myConnection)
        myDataSet = New DataSet()
        myDataAdapter.Fill(myDataSet, "mytable")

        GridView1.DataSource = myDataSet
        GridView1.DataBind()
        myConnection.Close()
    End Sub

    Protected Sub GridView1_RowDataBound(sender As Object, e As GridViewRowEventArgs) Handles GridView1.RowDataBound
        e.Row.Cells(0).Width = 100
        e.Row.Cells(0).Attributes.CssStyle("text-align") = "center"
        e.Row.Cells(1).Width = 100
        e.Row.Cells(2).Width = 100
        e.Row.Cells(3).Width = 100
        e.Row.Cells(4).Width = 100
        If (e.Row.RowType = DataControlRowType.DataRow) Then
            'e.Row.Attributes("onmouseover") = "this.style.cursor='hand';"
            e.Row.Attributes("onmouseout") = "this.style.textDecoration='none';"
            e.Row.Attributes("onclick") = ClientScript.GetPostBackClientHyperlink(Me.GridView1, "Select$" & Convert.ToString(e.Row.RowIndex))
            e.Row.Attributes.Add("onmouseover", "this.style.cursor='hand';this.style.textDecoration='underline';")
            'e.Row.Attributes.Add("onmouseout", "this.style.textDecoration='none';")
            'e.Row.Attributes.Add("onclick", ClientScript.GetPostBackClientHyperlink(Me.GridView1, Page.ClientScript.GetPostBackEventReference(GridView1, e.Row.RowIndex)))
            ' "Select$" + e.Row.RowIndex.ToString())
        End If
    End Sub
    Protected Sub GridView1_PageIndexChanging(sender As Object, e As GridViewPageEventArgs)
        GridView1.SelectedIndex = -1
    End Sub

    Private Sub search_Click(sender As Object, e As EventArgs) Handles search.Click
        Dim myConnection As MySqlConnection
        Dim myDataAdapter As MySqlDataAdapter
        Dim myDataSet As DataSet

        Dim strSQL As String
        'Dim iRecordCount As Integer

        myConnection = New MySqlConnection("server=localhost; user id=root; password=admin; database=db; pooling=false;")

        strSQL = "SELECT emp_id AS 'Employee ID', emp_sname AS Surname, emp_fname AS 'First Name', emp_mname AS 'Middle Name', tbl_emp_cat.cat_name AS 'Category', nature AS 'Nature of Employment' FROM tbl_employee JOIN tbl_emp_cat ON tbl_employee.emp_cat = tbl_emp_cat.emp_cat WHERE emp_sname LIKE '%" & search_text.Text + "%';"

        myDataAdapter = New MySqlDataAdapter(strSQL, myConnection)
        myDataSet = New DataSet()
        myDataAdapter.Fill(myDataSet, "mytable")

        GridView1.DataSource = myDataSet
        GridView1.DataBind()
        myConnection.Close()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:22:24.233

快速浏览一下您的代码表明您在页面加载中缺少这一行

```
 If Not Page.IsPostBack Then
    ->put your code here
 End if 
```

每次页面加载时都会刷新您的网格视图，从而消除您的过滤功能。希望这会有所帮助。

# visual-studio-2010 - 无法从 .Net wcf 服务创建用非托管代码编写的 com 组件的对象

> ID：15130117
> 
> 赞同：-1
> 
> 时间：2013-02-28T07:44:48.637
> 
> 标签：visual-studio-2010, wcf, com, wcf-client, apartments

我正在编写一个 Wcf 服务库并想加载一个非托管的 com dll。[未设置 com dll 线程模型，因此它是仅在主 STA线程模型](http://www.thrysoee.dk/InsideCOM+/ch04d.htm)中运行的单线程遗留组件

[在 wcf 服务中，我](http://scottseely.com/2009/07/17/calling-an-sta-com-object-from-a-wcf-operation/)已将公寓设置为 STA

现在，当我尝试创建 com 组件的实例时，它给出了一个异常

```
System.Runtime.InteropServices.SEHException : External component has thrown an exception. 
```

当我调试 com dll 时，它抛出了一个错误`RPC_E_WRONG_THREAD`。

我可以通过将线程模型设置为`Free Threaded Marshaller`. 但我不允许更改 com dll 的当前线程模型。

所以请帮助我如何从 wcf 服务访问 com dll？

.Net 框架 4.0，Windows 7 x64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:04:44.473

嗯，终于问题解决了......

脚步：

1.  将 wcf 服务库托管到 WindowsForm 应用程序中。
2.  将 WindowsForm 应用程序的线程单元设置为 STA
3.  将 wcf 服务中定义的调度程序设置为当前调度程序，例如

    WcfTest.Service1.disp = System.Windows.Threading.Dispatcher.CurrentDispatcher;

就这样 ：）

# ruby-on-rails - 自定义 Rails 上的错误验证

> ID：15130123
> 
> 赞同：0
> 
> 时间：2013-02-28T07:45:14.690
> 
> 标签：ruby-on-rails

如何将错误消息添加到`@errors`控制器上，然后将其显示在视图上，如：

`<%= @question.errors[:tag][0] %>`

带有标签的不是模型元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:00:15.557

查看[Rails 验证指南的这一部分](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-validators)。他们通过创建一个自定义验证器来工作，该验证器只是将所需的错误消息附加到所需的哈希条目。

在您的情况下，这可能如下所示：

```
class Question < ActiveRecord::Base
  validates_with :tag_validator
end

class TagValidator < ActiveModel::Validator
  def validate(question)
    unless question.special?
      question.errors[:tag] << 'Not special enough.'
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:42:17.343

在 Rails 中处理错误消息分 3 个步骤完成，即。

1.  [使用rails-validation-helpers](http://guides.rubyonrails.org/active_record_validations_callbacks.html#validation-helpers)验证活动记录对象或创建由@chaleyc 指定的自定义验证器
2.  [使用 AR验证方法](http://api.rubyonrails.org/classes/ActiveRecord/Validations.html)验证 ActiveRecord(AR) 对象
3.  在视图上显示错误，创建视图助手是[rails3 上的最佳实践通知和错误](https://stackoverflow.com/questions/4529136/notices-and-errors-on-rails3)

这是一个很好的[rails-cast](http://railscasts.com/episodes/211-validations-in-rails-3)让你开始

# php - 如何知道客户端计算机的文件路径而不是服务器端？

> ID：15130125
> 
> 赞同：0
> 
> 时间：2013-02-28T07:45:22.087
> 
> 标签：php, linux, windows, hyperlink

谁能知道如何知道客户端而不是服务器的路径..

示例我有 linux 服务器，当我使用时：

```
$coredir = dirname(__FILE__) . "/";
var_dump($coredir); 
```

然后我在windows pc中运行它。它像这样：

/var/www/sweeee

请帮我找到windows客户端的路径。不是服务器linux ..

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:48:47.667

你有一个误解。**PHP**在服务器端运行。这意味着它无法访问客户端计算机的文件系统。另一方面，Javascript 在客户端运行。因此，绝对没有办法使用 php 获取客户端的文件系统目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:49:04.623

你不会得到答案，因为你使用的是 PHP，它只在服务器上运行。您无法以您所想的方式获取有关使用 PHP 的客户端的任何信息。

即使您尝试使用 JavaScript 之类的东西，您也会对授予客户端代码的访问级别感到非常失望。

# php - Laravel 中的 URL 缩短器

> ID：15130126
> 
> 赞同：0
> 
> 时间：2013-02-28T07:45:24.977
> 
> 标签：php, laravel

我有一个问题，如何使网址缩短？例如我有这个 url "localhost/public/action/1" 变成这样 "/action/1"

我已经看过如何从 Jeffery Way 制作 url 缩短器，但我想在不使用数据库的情况下制作 url 缩短器，但将 url 作为缩短 url 的参数。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:09:58.697

您可以通过将文档根目录直接指向您的文件`public`夹来缩短 URL。在 nginx 中，您可以像这样配置它：

```
server {
   listen 80;
   server_name localhost;

   root /path/www/laravel_app/public; #this part

   ...

} 
```

或在 Apache 中：

```
<VirtualHost *:80>
DocumentRoot /path/www/laravel_app/public
ServerName localhost

# Other directives here
</VirtualHost> 
```

这将使您免于`public`访问 URL。如果你想让它更短，在你的`hosts`文件中添加这样的东西：

```
127.0.0.1 dev 
```

然后将您的 server_name 更改为`dev`将使 URL 类似于：

```
dev/action/1 
```

**编辑：**`http://path/to/a/very/long/exhausting/location`您是在谈论创建 URL`http://shorty/1234`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:07:34.460

您将不需要网络缩短器。我们将其发布，Laravel 将存在于您的“公共”文件夹中，这将是您的域。

所以你的链接会自动变成 www.example.com/action/1

由于您的本地服务器设置，您只能看到 localhost/public。根据您运行的 Web 服务器，您可以更改此设置，但不会影响您的编码或部署。

# java - getLocalSocketAddress() 和 getRemoteSocketAddress() 没有返回正确的值

> ID：15130132
> 
> 赞同：0
> 
> 时间：2013-02-28T07:46:03.267
> 
> 标签：java, android, sockets

我首先编写了一个示例 Java 服务器和 Android 客户端。我想跟踪登录到服务器的客户端。在套接字对象中，每个 Android 客户端都有一个唯一的端口号和连接的套接字 IP 地址。因此，这些是相互识别客户的选项。

我决定不使用每个客户端套接字的端口号，因为为两个 Android 客户端随机选择的端口号可能是相同数字的可能性很小。机会很小，但有可能。

相反，我决定使用 IP 套接字地址，它是每个客户端套接字中包含的另一串信息。好主意，对吧？没那么快。

要使用的功能是：

在服务器

```
 socket.getRemoteSocketAddress() 
```

并在客户端

```
 socket.getLocalSocketAddress() 
```

但是当我使用这些方法时，返回的地址是不一样的。

如果我在客户端的套接字对象上使用 getLocaSocketlAddress() 并将其作为字符串发送到服务器，那么稍后我必须在服务器的套接字连接上使用 getRemoteSocketAddress() 并查看它是否与我收到的地址相同客户端作为字符串。这样做是为了识别我从哪个客户端接收到消息。这两个地址不匹配，因为它们应该是。

例如，客户端通过调用`getLocalSocketAddress()`客户端中的套接字对象来获取套接字地址------->将地址作为消息中的字符串发送到服务器---->服务器获取消息并调用`getRemoteSocketAddress()`套接字以仅选择要发送的客户端回消息。不是所有其他客户。

服务器将所有连接的客户端的套接字存储在一个 ArrayList 中。

在客户端的套接字上使用`getLocalSocketAddress()`返回例如**XXX.XXX.11.17**并且如果我`getRemoteSocketAddress()`在服务器端的套接字中使用我得到**XXX.XXX.0.13**，这是一团糟，但是如果我使用端口号信息完美匹配`getLocalPort()`在客户端和`getPort()`服务器中。

所以有可能我可以使用客户端端口号来可靠地识别向哪个客户端发送消息。

这些方法有什么问题`getLocalSocketAddress()`还是坏了？还有另一种方法可以识别哪个客户端已连接到服务器？

在服务器端，Java swing 桌面应用程序

```
 // desktop connected to the internet by eathernet cable

  socket = serversocket.accept();

    System.out.println("SOCKET ADDRESS: "
    + socket.getRemoteSocketAddress().toString()); 
```

在客户端，

```
 // Android tablet connected to internet by wifi

   public void run() {

       socket = new Socket(InetAddress.getByName(serverIP), 6789);
       socketAddress = (socket.getLocalSocketAddress().toString());

   Log.i(TAG, "SOCKET ADDRESS: " + socketAddress); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T09:58:51.237

出于多种原因，使用 IP 地址跟踪客户端通常是一个坏主意。

首先，客户端可以通过一些[NAT](http://en.wikipedia.org/wiki/Network_address_translation)连接——在这种情况下，服务器看到的远程地址与客户端的地址不同。想象一下，例如使用 ADSL/WiFi 路由器进行 NAT 的设置 - 它（很可能）有一个公共 IP 地址，WiFi 设备将使用内部 IP 地址，例如来自 10.0.0.x 或 192.168.xx 池（非常流行的设置）。

请注意，在这样的设置中，几个 WiFi 设备会出现（从服务器的角度来看）从同一个 IP 地址连接 - 路由器的公共 IP。显而易见的含义：客户端的 IP 地址不是唯一的，它是唯一的 IP/端口对。准确地说，TCP连接可以通过（本地IP，本地端口，远程IP，远程端口）元组来唯一标识。

最后但同样重要的是：客户端可以从不同的 IP 地址断开连接并再次连接，这在移动网络中非常常见（实际上在任何动态分配 IP 的网络中）。

在您的问题中，您写道：

> 例如，客户端通过在客户端的套接字对象上调用 getLocalSocketAddress() 来获取套接字地址 --------> 将地址作为消息中的字符串发送到服务器 -----> 服务器获取消息并在套接字上调用 getRemoteSocketAddress() 以仅选择要发送回消息的客户端。不是所有其他客户。

我不太明白你的意思，*只选择那个客户端将消息发送回*。对于每个连接的客户端，您将有一个单独的 TCP 连接和单独的`Socket`实例。要将数据发送到特定客户端，请使用与该特定客户端关联的套接字，就是这样。你根本不应该关心客户端的 IP/端口，真的，这是 TCP/IP 协议栈的任务。

如果您真的想识别每个连接设备，您必须在 TCP/IP 之上，在您的应用程序协议中进行。您只需在连接后发送一些唯一标识符。但那是完全不同的故事。

# java - 使用 Android 的触摸屏捕捉游戏的动作或击键，例如（愤怒的小鸟）

> ID：15130135
> 
> 赞同：1
> 
> 时间：2013-02-28T07:46:21.053
> 
> 标签：java, android, android-intent

我基本上需要找出是否有一种方法可以使用 Android 的触摸屏来捕捉诸如“愤怒的小鸟”等游戏的动作或击键并将它们保存到设备上的文件中。

我确定这些手机存在安全问题并且不希望原生“击键记录”，但如果它是位于其他游戏之上的一层，应该没问题

请让我有什么办法可以达到同样的效果。您的帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:51:31.813

实现`onTouchEvent()`，并通过用户按下和抬起的位置计算 dx 和 dy。您可以使用这些值来确定移动的方向。

```
float x1, x2, y1, y2, dx, dy;
String direction;
switch(event.getAction()) {
    case(MotionEvent.ACTION_DOWN):
        x1 = event.getX();
        y1 = event.getY();
        break;
    case(MotionEvent.ACTION_UP) {
        x2 = event.getX();
        y2 = event.getY();
        dx = x2-x1;
            dy = y2-y1;

            // Use dx and dy to determine the direction
        if(Math.abs(dx) > Math.abs(dy)) {
            if(dx>0) directiion = "right";
            else direction = "left";
        } else {
            if(dy>0) direction = "down";
            else direction = "up";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:49:49.300

您可以使用系统覆盖覆盖屏幕，如[this answer](https://stackoverflow.com/a/13346388/1069068)所示。

但是，请记住，您可以使用所有触摸事件，也可以让它们通过。您不能先获取触摸事件，然后将它们传递到您下方的应用程序或视图中。

此外，如果设备在屏幕上有系统导航按钮（主页、返回和最近的应用程序），则覆盖将不会覆盖这些按钮。

# c# - 在 C#/.NET 中将字符串转换为整数

> ID：15130138
> 
> 赞同：1
> 
> 时间：2013-02-28T07:46:35.173
> 
> 标签：c#, asp.net

我需要将字符串转换为整数。我的字符串可以是任何类型（浮点/整数/字符串/特殊字符）。

例如：

```
If my string is "2.3", I need to convert to = 2
If my string is "anyCharacter", I need to convert to = 0
If my string is "2", I need to convert to = 2 
```

我尝试了以下方法：

```
string a = "1.25";int b = Convert.ToInt32(a); 
```

我得到了错误：

> 输入字符串的格式不正确

我该如何转换它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T07:49:44.927

使用**Double.TryParse()**并从中获取值后，将其转换为`int`使用**Convert.ToInt()**：

```
double parsedNum;
if (Double.TryParse(YourString, out parsedNum) {
  newInt = Convert.ToInt32(num);
} 
else {
  newInt = 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:48:35.880

据我所知，没有任何通用转换，所以你必须做一个`switch`找出变量的类型，然后使用以下任一（对于每种类型）：

```
int.Parse(string) 
```

或者

```
int.TryParse(string, out int) 
```

第二个将返回一个布尔值，您可以使用它来查看转换是通过还是失败。

您最好的选择是使用`double`或`decimal`解析，因为这不会删除任何小数位，不像`int`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T07:49:39.447

我认为 Convert.ToInt32 是寻找错误的地方 - 我会使用 Integer.Tryparse 并且如果 TryParse 评估为 false，则为变量分配 0。在 TryParse 之前，您可以简单地删除点之后的任何字符（如果您在字符串中找到它）。

另外，请记住，某些语言使用“，”作为分隔符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T07:50:29.257

尝试：

```
if (int.TryParse(string, out int)) {
    variable = int.Parse(string);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T07:50:41.203

尝试将其解析为浮点数，然后转换为整数：

```
double num;
if (Double.TryParse(a, out num) {
  b = (int)num;
} else {
  b = 0;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-28T07:52:10.127

这应该会有所帮助：将任何字符串视为 a `double`，然后`Math.Floor()`将其向下舍入到最接近的整数。

```
double theNum = 0;
string theString = "whatever"; // "2.3"; // "2";
if(double.TryParse(theString, out theNum) == false) theNum = 0; 
//finally, cut the decimal part
int finalNum = (int)Math.Floor(theNum); 
```

注意：`if`由于初始化，本身可能不需要`theNum`，但这种方式更具可读性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-28T07:52:44.807

[bool Int32.TryParse(string, out int)](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

布尔返回值指示转换是否成功。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-28T07:54:35.607

尝试这样的事情：

```
public int ForceToInt(string input)
{
   int value; //Default is zero 
   int.TryParse(str, out value);

   return value;
} 
```

这会成功的。但是我不建议采用这种方法。最好在任何地方控制您的输入。

# android - 使用来自服务的呼叫意图时，拨号后立即断开呼叫

> ID：15130141
> 
> 赞同：0
> 
> 时间：2013-02-28T07:46:43.513
> 
> 标签：android

我正在尝试从后台服务发起呼叫。它在索尼 xperia p android ics 上运行良好。但是`samsung galaxy y android 2.3.3`通话中会在启动后自动断开连接。

```
String number=Utils.getNumber(this, "contact"+i); 

Intent intent = new Intent(Intent.ACTION_CALL);
    intent.setData(Uri.parse("tel:" + number));
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
     intent.addFlags(Intent.FLAG_FROM_BACKGROUND);
    startActivity(intent); 
```

注意它在索尼 xperia p 上正常工作

# jquery - 在数组中搜索并形成文本区域？

> ID：15130142
> 
> 赞同：0
> 
> 时间：2013-02-28T07:46:46.253
> 
> 标签：jquery, arrays, textfield

当前搜索数组（inArray < 0）。我的新目标是确定表单 textarea :contains 是否与 new.value 匹配

[搜索数组 inArray 但忽略大小写](https://stackoverflow.com/questions/15102429/search-array-inarray-but-ignore-case)

如果有人可以提供一些提示或建议，我会在路上。我已经花了很多时间在我目前拥有的东西上......没想到确切的答案。TIA

这个新条件需要在 submit() 上启动，因为用户将完成先前的字段，并且很可能不会在其他任何地方进行标签/单击。

[http://jsfiddle.net/arkjoseph/dRpmq/5/](http://jsfiddle.net/arkjoseph/dRpmq/5/)

```
 $(submit).submit(function() {
   var data = $(textfield).val();
   //contains some string 
     if(data.indexOf('yourstring') > -1){
     //do this
   }else {
     // do this    
   }

    }); 
```

我在哪里获得你的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:50:18.570

是的，下面的 ex 用于从数据中获取特定的字符串。

```
var data = $("#ID").val();//contains some string 
if(data.indexOf('yourstring') > -1){
    //do this
}else {
     // do this    
} 
```

# c# - Visual Studio 2010 permissions on files

> ID：15130145
> 
> 赞同：0
> 
> 时间：2013-02-28T07:46:47.403
> 
> 标签：c#, visual-studio-2010, exception, file-permissions

There is a small program which is supposed to open file and then output it to console adding line numbers. The problem is that no matter whether program is run from command console of from IDE it throws exception regarding file permission.

I moved both executable and the file which is supposed to be read (simple TXT file) to several directories (my document, temp, etc) run console as Admin, run Visual studio as admin, gave all permissions to both files, but it always throws exception. The strangest thing is that a week or two ago I fund solution by trial and error but but I can' remember it.

Here is exception:

```
 Exception: System.UnauthorizedAccessException: Access to the path 'C:\Users\Nena
d\documents\visual studio 2010\Projects\Listing 10.6\Listing 10.6\bin\Debug\prog
ram.cs' is denied.
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, I
nt32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions o
ptions, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolea
n useLongPath)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access,
FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean
bFromProxy)
   at System.IO.FileStream..ctor(String path, FileMode mode)
   at ListFile.Main(String[] args) in C:\Users\Nenad\documents\visual studio 201
0\Projects\Listing 10.6\Listing 10.6\Program.cs:line 22

Press any key to continue . . . 
```

Here is code:

```
// ListFile.cs - program to print a listing to the console
//-----------------------------------------------------------

using System;
using System.IO;

class ListFile
{
    public static void Main(string[] args)
    {
        try
        {

            int ctr = 0;
            if (args.Length <= 0)
            {
                Console.WriteLine("Format: ListFile filename");
                return;
            }
            else
            {
                FileStream fstr = new FileStream(args[0], FileMode.Open);
                try
                {
                    StreamReader t = new StreamReader(fstr);
                    string line;
                    while ((line = t.ReadLine()) != null)
                    {
                        ctr++;
                        Console.WriteLine("{0}:  {1}", ctr, line);
                    }
                }
                catch (Exception e)
                {
                    Console.WriteLine("Exception during read/write: {0}\n", e);
                }
                finally
                {
                    fstr.Close();
                }
            }
        }

        catch (System.IO.FileNotFoundException)
        {
            Console.WriteLine("ListFile could not find the file {0}", args[0]);
        }
        catch (Exception e)
        {
            Console.WriteLine("Exception: {0}\n\n", e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:49:28.063

Check one of these possibilities:

*   File is not open in any other window/application
*   Run your applications .exe file `as Administrator` (optional extra, enable UAC so that you will see the request that the application requires elevated privileges and to explicitly give them, in Windows8 disabling UAC only hides these popups but that doesn't mean the application will have elevated rights so be careful if using Win8)
*   Manually set read rights to `Everyone` for that file
*   Check that the file is not in a special folder (but i think you already did that, but just to be sure create c:\temp and put it there)

CAUTION - The exception shows that there was a problem accessing `C:\Users\Nena d\documents\visual studio 2010\Projects\Listing 10.6\Listing 10.6\bin\Debug\prog ram.cs` not the a simple text file!!!

Be careful you may be providing a wrong path in your code by accident. And the `Users` folder is a special folder which requires elevated privileges to access, so better move the whole executable + readableFile to an ordinary folder where it will not encounter problems (like the c:\temp i mentioned above)

# delphi - 安装 JVCL 时出错

> ID：15130146
> 
> 赞同：5
> 
> 时间：2013-02-28T07:46:47.937
> 
> 标签：delphi, delphi-xe, jvcl, jedi-code-library

我已通过 Install.bat 安装[**JCL**](http://jvcl.delphi-jedi.org/)并成功安装。但是，当我尝试通过 install.bat 安装**[JVCL](http://jvcl.delphi-jedi.org/)**时，我收到如下错误消息：

```
[Compiling installer...]
Using Embarcadero RAD Studio XE

Embarcadero Delphi for Win32 compiler version 22.0
Copyright (c) 1983,2010 Embarcadero Technologies, Inc.
C:\Program Files (x86)\Embarcadero\Components\JVCL347CompleteJCL241-Build4571\jv
cl\devtools\PackagesGenerator\GenerateDefines.pFatal: F1026 File not found: 'Sys
tem.Types.dcu'

Failed to compile JVCL installer

Press any key to continue . . . 
```

有人知道这里有什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T16:58:13.970

显然，这是一个已知*（已解决？）*的问题。

解决方案是[删除“系统”。编译您拥有的 JVCL 版本](http://issuetracker.delphi-jedi.org/view.php?id=6024)

# java - java中的用户脚本输入

> ID：15130148
> 
> 赞同：0
> 
> 时间：2013-02-28T07:46:47.810
> 
> 标签：java, function, input, scripting

我正在开发一个 java 应用程序，用户通过属性文件输入某些功能。然后在运行时使用应用程序提供的变量值评估这些函数。

这里举一个简单的例子。用户想要计算未来 n 年特定资本分配的投资回报。他应该不仅能输入相关参数，还能输入一个逐年计算回报的函数。

任何人都可以建议或推荐一种简单的脚本语言，以便用户学习曲线不会太陡峭，并且可以使用提供与 java 代码集成的标准库吗？

一个相关的例子也将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:55:17.580

我建议使用 javascript。它很简单，Rhino 库与 java 集成。完整信息可在此处找到：[Rhino](http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:57:34.320

你可以看看 Groovy。它可以嵌入到 Java 应用程序中，并且是在应用程序中编写脚本的有用工具。

[http://groovy.codehaus.org/Embedding+Groovy](http://groovy.codehaus.org/Embedding+Groovy)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T08:02:02.397

我的建议是使用`ScriptEngine`和评估`Javascript`函数。很简单：

```
public class TestScriptEngine {

    private static final String script = "var customFunction = function(parameter) {\n" +
            "\treturn parameter*parameter;\n" +
            "};\n" +
            "\n" +
            "println(customFunction(10));\n";

    public static void main(String[] args) {
        ScriptEngineManager factory = new ScriptEngineManager();
        ScriptEngine engine = factory.getEngineByName("JavaScript");
        // evaluate JavaScript code User's input
        try {
            engine.eval(script);
        } catch (ScriptException e) {
            e.printStackTrace(); 
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T07:55:22.360

您可以使用 JavaScript 或 Ruby，它们应该足够方便。

# python - 调用另一个模块时传入可变数量的参数python

> ID：15130149
> 
> 赞同：0
> 
> 时间：2013-02-28T07:46:51.057
> 
> 标签：python, module, python-2.7, argv

所以我需要从一个模块中调用另一个模块，我需要从一个文本文件中传递参数。我将从文本文件中逐行读取，文本文件的每一行都应该是我正在调用的模块的参数。

关于如何做到这一点的任何想法？

- 它将在云上完成。我将从文本文件中获取一堆参数，然后将它们传递到云上的服务器，该服务器将为所有参数提供一堆逻辑。我只需要弄清楚如何将文本文件的每一行作为参数，然后将所有行作为参数传递给云中的模块。

将使用 ssh 命令调用其他模块

# c# - 为类的所有方法订阅委托

> ID：15130153
> 
> 赞同：0
> 
> 时间：2013-02-28T07:47:07.743
> 
> 标签：c#

我刚刚熟悉了一点 C# 委托。可以通过“+=”操作符为一个委托订阅多个委托实例。但是是否也可以有一个控制器类，它具有第二类中所有方法的委托，并自动添加方法，即不必单独添加（甚至知道）每个方法到相应的委托？

在简化代码中（省略访问修饰符等）：

```
class Car
{
    void Start();
    void Drive();
}

// I would like to have the following class generated automatically
// without needing to repeat all the methods of Car, i.e.
// without declaring a delegate instance for each of them
class CarController
{
    delegate void DoSomething();

    DoSomething StartAll;
    DoSomething DriveAll;

    void Subscribe(Car anotherCar)
    {
        StartAll += anotherCar.Start;
        DriveAll += anotherCar.Drive;
    }
} 
```

编辑：Rawling 的解决方案是我最喜欢的解决方案。它简单明了。作为一个小小的调整，我尝试了这个东西如何与动态类型的对象一起工作，它确实有效：控制器和受控对象之间的完全解耦。当然，这种“动态”的用法并不是每个人都喜欢……

```
public class CallAller2 : HashSet<dynamic>
{
    public void CallAll(Action<dynamic> action)
    {
        foreach (dynamic t in this)
        {
            try {action(t);} catch (RuntimeBinderException) {};
        }
    }
}

class Bike
{
    void Drive();
}

CallAller2 ca = new CallAller2();
ca.Add(new Car());
ca.Add(new Bike());
ca.CallAll(c => c.Start());  // is ignored by Bike which does not implement it  
ca.CallAll(c => c.Drive()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:57:24.447

我认为这应该有效：

//编辑：不要简化MethodInfo mi1 = mi，否则你会得到一个叫做访问修改闭包的问题

```
 static IList<Action> getDelegatesFromObject(Object obj)
    {
        Type type = obj.GetType();

        List<Action> Actions = new List<Action>();
        foreach (MethodInfo mi in type.GetMethods())
        {
            MethodInfo mi1 = mi;

            Actions.Add(
                () => mi1.Invoke(obj, new object[] {})
            );
        }

        return Actions;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:23:08.553

现在我意识到这实际上只是在重新创建备受诟病的`List<T>.ForEach`. 为什么不直接使用它，因为它就在那里？

* * *

虽然它不能让你只调用`.StartAll`or `.DriveAll`，但你可以做一些简单的事情

```
class CallAller<T> : HashSet<T>
{
    public void CallAll(Action<T> action)
    {
        foreach (T t in this)
        {
            action(t);
        }
    }
}

var ca = new CallAller<Car>();
ca.Add(myFirstCar);
ca.Add(mySecondCar);

// Call a simple function
ca.CallAll(c => c.Start());

// Call a function taking parameters
ca.CallAll(c => c.SetRadio(88.1, RadioType.FM));

// Get return values... if you really need to.
Dictionary<Car, int> returnValues = new Dictionary<Car, int>();
ca.CallAll(c => returnValues.Add(c, c.GetNumberOfTyres())); 
```

If you want something with actual methods to call and Intellisense, you'll need to look into code generation - it's possible, but I doubt it'd be worth the hassle.

# php - 提交表单后 $_FILES 为空

> ID：15130159
> 
> 赞同：18
> 
> 时间：2013-02-28T07:47:42.930
> 
> 标签：php, file-upload

我正在使用标准的 PHP 函数上传文件以用作 PHPMailer 的附件。

```
<form name="upload" method="post" action="send_form_email3.php">
    <div width="100%" class="con3">
        <div class="lable">
            <label for="first_name">First Name *</label>
        </div>
        <input  type="text" name="first_name" id="first_name" class="span4">

        <div class="lable">
            <label for="email">Email Address *</label>
        </div>
        <input  type="text" name="email" id="email" class="span4">

        <div class="lable">
            <label for="telephone">Contact Number *</label>
        </div>
        <input  type="text" name="telephone" id="telephone" class="span4">

        <div class="lable">
            <label for="comments">Message *</label>
        </div>
        <textarea  name="comments" rows="8" id="comments" class="span4"></textarea>

        <div class="lable">
            <label for="upload">Send Us Your CV *</label>
        </div>
        <input type="file" name="upload" id="upload" />

        <input type="submit" value="Submit" class="btn btn-success">
    </div>
</form> 
```

此表单被提交到以下 php 处理程序，在该处理程序中构建和发送邮件：

```
<?php

    require_once("class.phpmailer.php");

    $first_name = $_POST['first_name']; // required
    $email_from = $_POST['email']; // required
    $telephone = $_POST['telephone']; // required
    $comments = $_POST['comments']; // required

    echo "just got form values<br />";
    echo $_FILES['upload']['name'].'<br />';

    $email_message = "Form details below.<br />";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "Name: ".clean_string($first_name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Contact: ".clean_string($telephone)."\n";
    $email_message .= "Message:\n".clean_string($comments)."\n";

    echo "added text to email<br />";

    $target_path = "uploads/";

    $target_path = $target_path . basename( $_FILES['upload']['name']); 

    // upload the file
    echo "target = ".$target_path."<br />";

    if (isset($_FILES['upload']['size']))
    {
        if ($_FILES['upload']['size'] > 0)
        {
        echo 'file size: '.basename($_FILES['upload']['size']).'<br />';
            if (move_uploaded_file($_FILES['upload']['name'], $target_path))
            {
                echo "The file ".  basename( $_FILES['upload']['name'])." has been uploaded<br />";
                                    // adding an already existing file as an attachment to the email for debugging purposes.
                $email->AddAttachment('uploads/CreditReportViewer.pdf');
            }
            else
            {
                echo "There was an error uploading the file, please try again!<br />&nbsp;".basename($_FILES['upload']['error']);
            }
        }
        else
        {
            echo "There was an error uploading the file, please try again!<br />";
        }
    }
    else
    {
        echo "No file was found for the upload.<br />";
    }

    $email = new PHPMailer();

    $email->To = "me@this.com";
    $email->From = $email_from;
    $email->FromName = $first_name;
    $email->Subject = "New Message from Website";
    $email->Body = $email_message;

    echo "\n mail built...<br />";

    $email->Send();

    echo "mail sent!";
?> 
```

问题是`$_FILES['upload']['name']`没有设置。这是正在写入浏览器的回声：

> 刚刚得到表单值
> 
> 将文本添加到电子邮件
> 目标 = 上传/
> 未找到上传文件。
> 邮件建...
> 邮件发送！

这让我觉得我引用了文件上传字段或上传本身不正确。

如果这不是最好的方法，任何人都可以在这里看到任何问题或提供一些指导吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-28T07:49:58.857

你必须添加，

```
enctype= "multipart/form-data" 
```

将您的表格更改为，

```
<form name="upload" method="post" action="send_form_email3.php" enctype= "multipart/form-data"> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-28T07:49:10.980

添加`enctype`到您的表单：更改：

```
<form name="upload" method="post" action="send_form_email3.php"> 
```

到

```
<form name="upload" method="post" action="send_form_email3.php" enctype="multipart/form-data"> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-13T16:23:55.183

另一个提示：如果**upload_max_filesize** (php.ini) 小于用户选择的文件，$_FILES 将为空。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-28T07:49:12.547

您忘记在表单声明中设置多部分。

`enctype="multipart/form-data"`在表格中添加。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-28T07:49:52.540

您应该添加`enctype=multipart/form-data`到您的表单中。

```
<form name="upload" method="post" action="send_form_email3.php" enctype="multipart/form-data"> 
```

因为它是作为 MIME 流传输的，与普通 POST 格式完全不同

[enctype='multipart/form-data' 是什么意思？](https://stackoverflow.com/questions/4526273/what-does-enctype-multipart-form-data-mean)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-22T10:18:50.320

如果您添加了 enctype 但仍然无法正常工作 - 请检查 PHP 文件权限。在 ooowebhost 中，您可以在 chmod 中找到它。更改为“777”。否则，该文件无权执行/写入

# opencv - 如何访问 CV_32F/CV_64F Mat 的像素值？

> ID：15130162
> 
> 赞同：13
> 
> 时间：2013-02-28T07:47:49.137
> 
> 标签：opencv, pixel, mat

我正在研究单应性，每当我尝试使用`H.at<float>(i, j)`随机数（有时是垃圾值）检查 H 矩阵（CV_64F 类型）的值时。我想访问浮点矩阵的像素值。有什么办法吗？

```
Mat A = Mat::eye(3, 3, CV_64F);
float B;
for(int i=0; i<A.rows; i++)
{
    for(int j=0; j<A.cols; j++)
    {
        printf("%f\n", A.at<float>(i, j));
    }
}

imshow("identity", A);
waitKey(0); 
```

这显示了单位矩阵的正确图像，但是在尝试访问像素值时，我得到了

> 0.000000 1.875000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000

为什么会这样？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-28T07:53:02.343

你应该试试这个：

```
A.at<double>(i, j); 
```

因为您的矩阵是“类型” `CV_64F`，这反过来意味着它包含类型的元素`double`，而不是`float`。

顺便说一句，我不确定您是否知道这一点，但您可以使用`cout`如下方式打印矩阵：

```
std::cout << A << std::endl; 
```

我发现这对于检查小矩阵或矩阵切片很有用。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-04-04T18:25:04.493

下面的例子初始化了一个希尔伯特矩阵：

```
Mat H(100, 100, CV_64F);
for(int i = 0; i < H.rows; i++)
    for(int j = 0; j < H.cols; j++)
        H.at<double>(i,j)=1./(i+j+1); 
```

请记住，不能随机选择 at 运算符中使用的尺寸标识符。这取决于您尝试从中检索数据的图像。下表对此提供了更好的了解：

如果矩阵是 CV_8U 类型，则使用`Mat.at<uchar>(y,x)`.

如果矩阵是 CV_8S 类型，则使用`Mat.at<schar>(y,x)`.

如果矩阵是 CV_16U 类型，则使用`Mat.at<ushort>(y,x)`.

如果矩阵是 CV_16S 类型，则使用`Mat.at<short>(y,x)`.

如果矩阵是 CV_32S 类型，则使用`Mat.at<int>(y,x)`.

如果矩阵是 CV_32F 类型，则使用`Mat.at<float>(y,x)`.

如果矩阵是 CV_64F 类型，则使用`Mat.at<double>(y,x)`.

（取自[OpenCV 文档](http://docs.opencv.org/trunk/d3/d63/classcv_1_1Mat.html#aa5d20fc86d41d59e4d71ae93daee9726)）

# ruby-on-rails - collections_for_select 总是返回“错误数量的参数（0 代表 1）”

> ID：15130167
> 
> 赞同：1
> 
> 时间：2013-02-28T07:48:22.947
> 
> 标签：ruby-on-rails

我知道这个问题很简单，但我还不能解决。可能你们的眼睛比我还敏锐。

我有`select_tag`哪个：

```
<%= f.select :product_type, options_for_select([["Raw Material", "0"], ["Semi Material", "1"], ["Finish", "2"]], @product.product_type,), { :prompt => "Select Product Type" }, :required => true %> 
```

一个简单`select_tag`但它总是返回`wrong number of arguments (0 for 1)`

我尝试从我的另一个`select_tag`非常相似的页面复制粘贴，并在它的页面上完美运行，但仍然在此页面上返回该错误。

我尝试将代码破坏为：

```
33\. <%= f.select :product_type, options_for_select([["Raw Material", "0"],
34\. ["Semi Material", "1"],
35\. ["Finish", "2"]], 
36\. @product.product_type,
37\. ), { :prompt => "Select Product Type" }, :required => true %> 
```

它在行上返回错误`36`。

我不知道为什么让它不起作用。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:55:11.313

我在模型上的错误是我创建了一个在该字段上具有相同名称的过程。所以这就是为什么它总是在我的模型上返回错误原因`def product_type(id)`

真的很抱歉，谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:49:30.143

您可以尝试删除第 36 行末尾的逗号。

# xml - 如何获取、编辑和保存包含嵌套命名空间的 xml 内容？

> ID：15130169
> 
> 赞同：0
> 
> 时间：2013-02-28T07:48:31.347
> 
> 标签：xml, xpath, xml-parsing, simplexml, domdocument

这是我的xml文件内容：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<w:document xmlns:ve="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml">
    <w:body>
        <w:p w:rsidR="00551371" w:rsidRDefault="0010551B" w:rsidP="0010551B">
            <w:pPr>
                <w:jc w:val="center"/>
            </w:pPr>
            <w:r>
                <w:t xml:space="preserve">Hi this is a paragraph with </w:t>
            </w:r>
            <w:r w:rsidRPr="00517389">
                <w:rPr>
                    <w:b/>
                </w:rPr>
                <w:t>default</w:t>
            </w:r>
            <w:r>
                <w:t xml:space="preserve"> text and some wording in it so </w:t>
            </w:r>
        </w:p>
        <w:p w:rsidR="0010551B" w:rsidRDefault="0010551B" w:rsidP="0010551B">
            <w:pPr>
                <w:jc w:val="center"/>
            </w:pPr>
            <w:r>
                <w:t xml:space="preserve">Here is new </w:t>
            </w:r>
            <w:r w:rsidRPr="00517389">
                <w:rPr>
                    <w:u w:val="single"/>
                </w:rPr>
                <w:t>line sentence</w:t>
            </w:r>
            <w:r>
                <w:t xml:space="preserve"> with some text.</w:t>
            </w:r>
        </w:p>
          .
          .
          .
          and so on. 
```

现在我正在`<w:t>`独立获取内容，下面是我的代码：

```
// load the xml into the object
$xml = simplexml_load_file('sample/word/document.xml');

//Use that namespace
$namespaces = $xml->getNameSpaces(true);

$xml->registerXPathNamespace('w', $namespaces['w']);

$nodes = $xml->xpath('/w:document/w:body//w:t');

$i = 1;

foreach ($nodes as $node) {
    echo (string) $node; // prints each node value correctly
    $node->nodeValue = "abc"; // it adds the node instead of replacing
    $i++;
}

$xml->asXML('test.xml'); 
```

它`w:t`分别给了我每个文本的文本，但我想得到 wrt意味着单个节点下`<w:p>`所有节点中的所有文本都应该被视为单个节点。`<w:t>``<W:p>`

像 first 下的文本`<w:p>`应该返回**“嗨，这是一个带有默认文本和一些措辞的段落”。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:43:40.233

首先，您可以只使用方法来选择命名空间并使用普通的 SimpleXML 访问方法，而不是使用`registerXPathNamespace`和 XPath 。`->children()`在这种情况下，您可以使用`foreach ( $xml->children('w', true)->body->p as $p_node ) ...`

其次，SimpleXML 中没有`nodeValue`属性（也许您正在考虑 DOM？）。要覆盖元素的内容，您只需分配给它，例如`$node->child = 'abc';`. 但是，这在循环中有点棘手，因为您必须知道您正在查看哪个元素；但你可以，例如，说`$xml->children('w', true)->body->p[0] = 'asd';`

最后，要组合`<w:p>`节点中的所有文本，您需要遍历它们的`<w:r>`子节点，在您的示例`<w:t>`中每个子节点都有一个。所以你最终得到一个像这样的嵌套循环：

```
foreach ( $sx->children('w', true)->body->p as $p_node ) { 
    $p_content=''; 
    foreach ( $p_node->r as $r_node ) { 
        $p_content .= (string)$r_node->t; 
    } 
    echo $p_content;
} 
```

# c# - 如何开发适用于 PC 到 Windows Phone 的 wifi 同步应用程序？

> ID：15130172
> 
> 赞同：0
> 
> 时间：2013-02-28T07:48:35.740
> 
> 标签：c#, windows-mobile, synchronized, wifi-direct

我想为 pc 到 windows phone 开发一个 wifi 同步应用程序。关于如何开始的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:50:32.413

您可能想查看[MS 同步框架](http://msdn.microsoft.com/en-us/sync/bb821992.aspx)

# java - ActionBarSherlock 不再编译

> ID：15130175
> 
> 赞同：0
> 
> 时间：2013-02-28T07:48:56.620
> 
> 标签：java, scala, actionbarsherlock, sbt

我正在使用 ActionBarSherlock、Scala、Sbt 和 android-plugin。当它突然无法编译时，一切都正常工作。我使用 git 回退到之前工作的先前提交，它仍然会抛出以下 12 个错误。然后，我记得我的 Mac OS 更新了，我检查了更新的内容。看来我的 Java 已经从 1.6.0_37 更新到 1.6.0_41，使用 OS X 2013-001 的新 Java。

使用此特定版本的其他人有问题吗？我应该如何解决这个问题？

```
> compile
[info] extracting apklib actionbarsherlock-4.2.0.apklib
[info] Wrote /Users/Laimiux/scala-rest-client/target/scala-2.9.2/src_managed/main/scala/com/limeblast/mydeatree/TR.scala
[info] generated 84 source files from 1 apklibs
[info] Compiling 36 Scala sources and 87 Java sources to /Users/Laimiux/scala-rest-client/target/scala-2.9.2/classes...
[warn] /Users/Laimiux/scala-rest-client/src/main/scala/IdeaEditActivity.scala:32: value FILL_PARENT in object LayoutParams is deprecated: see corresponding Javadoc for more information.
[warn]     getWindow().setLayout(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT)
[warn]                                        ^
[error] /Users/Laimiux/scala-rest-client/target/scala-2.9.2/src_managed/main/java/com/actionbarsherlock/app/SherlockFragment.java:11: OnCreateOptionsMenuListener is not a member of com.actionbarsherlock.app.SherlockFragmentActivity
[error] import static com.actionbarsherlock.app.SherlockFragmentActivity.OnCreateOptionsMenuListener;
[error]        ^
[error] /Users/Laimiux/scala-rest-client/target/scala-2.9.2/src_managed/main/java/com/actionbarsherlock/app/SherlockFragment.java:15: not found: type OnCreateOptionsMenuListener
[error] public class SherlockFragment extends Fragment implements OnCreateOptionsMenuListener, OnPrepareOptionsMenuListener, OnOptionsItemSelectedListener {
[error]                                                           ^
[error] /Users/Laimiux/scala-rest-client/target/scala-2.9.2/src_managed/main/java/com/actionbarsherlock/app/SherlockFragment.java:13: OnPrepareOptionsMenuListener is not a member of com.actionbarsherlock.app.SherlockFragmentActivity
[error] import static com.actionbarsherlock.app.SherlockFragmentActivity.OnPrepareOptionsMenuListener;
[error]        ^
[error] /Users/Laimiux/scala-rest-client/target/scala-2.9.2/src_managed/main/java/com/actionbarsherlock/app/SherlockFragment.java:15: not found: type OnPrepareOptionsMenuListener
[error] public class SherlockFragment extends Fragment implements OnCreateOptionsMenuListener, OnPrepareOptionsMenuListener, OnOptionsItemSelectedListener {
[error]                                                                                        ^
[error] /Users/Laimiux/scala-rest-client/target/scala-2.9.2/src_managed/main/java/com/actionbarsherlock/app/SherlockFragment.java:12: OnOptionsItemSelectedListener is not a member of com.actionbarsherlock.app.SherlockFragmentActivity
[error] import static com.actionbarsherlock.app.SherlockFragmentActivity.OnOptionsItemSelectedListener;
[error]        ^
[error] /Users/Laimiux/scala-rest-client/target/scala-2.9.2/src_managed/main/java/com/actionbarsherlock/app/SherlockFragment.java:15: not found: type OnOptionsItemSelectedListener
[error] public class SherlockFragment extends Fragment implements OnCreateOptionsMenuListener, OnPrepareOptionsMenuListener, OnOptionsItemSelectedListener {
[error]                                                                                                                      ^
[error] /Users/Laimiux/scala-rest-client/target/scala-2.9.2/src_managed/main/java/com/actionbarsherlock/app/SherlockListFragment.java:11: OnCreateOptionsMenuListener is not a member of com.actionbarsherlock.app.SherlockFragmentActivity
[error] import static com.actionbarsherlock.app.SherlockFragmentActivity.OnCreateOptionsMenuListener;
[error]        ^
[error] /Users/Laimiux/scala-rest-client/target/scala-2.9.2/src_managed/main/java/com/actionbarsherlock/app/SherlockListFragment.java:15: not found: type OnCreateOptionsMenuListener
[error] public class SherlockListFragment extends ListFragment implements OnCreateOptionsMenuListener, OnPrepareOptionsMenuListener, OnOptionsItemSelectedListener {
[error]                                                                   ^
[error] /Users/Laimiux/scala-rest-client/target/scala-2.9.2/src_managed/main/java/com/actionbarsherlock/app/SherlockListFragment.java:13: OnPrepareOptionsMenuListener is not a member of com.actionbarsherlock.app.SherlockFragmentActivity
[error] import static com.actionbarsherlock.app.SherlockFragmentActivity.OnPrepareOptionsMenuListener;
[error]        ^
[error] /Users/Laimiux/scala-rest-client/target/scala-2.9.2/src_managed/main/java/com/actionbarsherlock/app/SherlockListFragment.java:15: not found: type OnPrepareOptionsMenuListener
[error] public class SherlockListFragment extends ListFragment implements OnCreateOptionsMenuListener, OnPrepareOptionsMenuListener, OnOptionsItemSelectedListener {
[error]                                                                                                ^
[error] /Users/Laimiux/scala-rest-client/target/scala-2.9.2/src_managed/main/java/com/actionbarsherlock/app/SherlockListFragment.java:12: OnOptionsItemSelectedListener is not a member of com.actionbarsherlock.app.SherlockFragmentActivity
[error] import static com.actionbarsherlock.app.SherlockFragmentActivity.OnOptionsItemSelectedListener;
[error]        ^
[error] /Users/Laimiux/scala-rest-client/target/scala-2.9.2/src_managed/main/java/com/actionbarsherlock/app/SherlockListFragment.java:15: not found: type OnOptionsItemSelectedListener
[error] public class SherlockListFragment extends ListFragment implements OnCreateOptionsMenuListener, OnPrepareOptionsMenuListener, OnOptionsItemSelectedListener {
[error]                                                                                                                              ^
[warn] /Users/Laimiux/scala-rest-client/src/main/scala/NewIdeaActivity.scala:38: value FILL_PARENT in object LayoutParams is deprecated: see corresponding Javadoc for more information.
[warn]     getWindow().setLayout(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT)
[warn]                                        ^
[warn] two warnings found
[error] 12 errors found
[error] (Scala-Rest-Client/compile:compile) Compilation failed
[error] Total time: 7 s, completed Feb 27, 2013 11:32:58 PM
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:21:07.507

我不确定是什么导致了这个问题，但我修复了它。我首先测试了创建常规 Android 项目并添加 ActionBarSherlock。它编译！然后，我想创建一个新的 Scala Android 项目，并在其中添加了 ActionBarSherlock。它也编译了！所以，我复制了所有的旧资源，java/scala 文件。更新了 AndroidManifest。项目编译，构建并再次工作！

似乎我的项目文件夹已损坏或类似的东西。

# c# - 使用 Monotouch 在 UISearchBar 上更改“取消”按钮的文本？

> ID：15130180
> 
> 赞同：2
> 
> 时间：2013-02-28T07:49:19.933
> 
> 标签：c#, xamarin.ios, uisearchbar, xamarin

我需要更改取消按钮的文本以始终在我的应用程序中显示“重置”。我在 SO 上发现了许多[类似](https://stackoverflow.com/questions/2536151/how-to-change-the-default-text-of-cancel-button-which-appears-in-the-uisearchbar)的问题，但所有答案都是针对 ObjC，而我在 Monotouch 工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-02T10:59:50.823

像这样为 iOS7+ 使用下面的扩展方法：searchBar.SetCancelTitle("close");

它源自 Kolbjørn Bredrup 的评论，这很好，但我不清楚它内部使用的附加扩展方法（OfType 和 FirstOrDefault）的命名空间是什么，所以我自己将它们添加到这个类中。

我还重命名了 UISearchBarExtensions 类，以便它与我的其他类很好地配合。

感谢 Kolbjørn Bredrup 的原创！

与原来的一样，它被称为使用：

searchBar.SetCancelTitle("关闭");

```
public static class UISearchBarExtensions
{
    /// <summary>
    /// Finds the Cancelbutton
    /// </summary>
    /// <returns></returns>
    public static UIButton GetCancelButton(this UISearchBar searchBar)
    {
        //Look for a button, probably only one button, and that is probably the cancel button.
        return (UIButton)searchBar.GetAllSubViews().OfType<UIButton>().FirstOrDefault();
    }

    public static UIView FirstOrDefault(this IEnumerable<UIView> views)
    {
        return ((List<UIView>)views)[0];
    }

    public static IEnumerable<UIView> OfType<T>(this IEnumerable<UIView> views)
    {
        List<UIView> response = new List<UIView>();
        foreach(var view in views)
        {
            if(view.GetType() == typeof(T))
            {
                response.Add(view);
            }
        }
        return response;
    }

    /// <summary>
    /// Recursively traverses all subviews and returns them in a little list.
    /// </summary>
    /// <param name="view"></param>
    /// <returns></returns>
    public static IEnumerable<UIView> GetAllSubViews(this UIView view)
    {
        List<UIView> retList = new List<UIView>();
        retList.AddRange(view.Subviews);
        foreach (var subview in view.Subviews)
        {
            retList.AddRange(subview.GetAllSubViews());
        }

        return retList;
    }

    /// <summary>
    /// Sets the title of the search bars cancel button
    /// </summary>
    /// <param name="searchBar"></param>
    /// <param name="cancelTitle"></param>
    public static void SetCancelTitle(this UISearchBar searchBar, string cancelTitle)
    {
        searchBar.GetCancelButton().SetTitle(cancelTitle, UIControlState.Normal);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T14:58:54.073

请注意，在 ios6 和 ios7 中，子视图层次结构不同。

但是通过添加下面的扩展方法，您可以使用

```
searchBar.SetCancelTitle("NO!"); 
```

适用于 ios7 和 ios5/ios6 的扩展方法：

```
public static class NimbleSearchBarExtensions
{
    /// <summary>
    /// Finds the Cancelbutton
    /// </summary>
    /// <returns></returns>
    public static UIButton GetCancelButton(this UISearchBar searchBar)
    {
        //Look for a button, probably only one button, and that is probably the cancel button.
        return searchBar.GetAllSubViews().OfType<UIButton>().FirstOrDefault();
    }

    /// <summary>
    /// Recursively traverses all subviews and returns them in a little list.
    /// </summary>
    /// <param name="view"></param>
    /// <returns></returns>
    public static IEnumerable<UIView> GetAllSubViews(this UIView view)
    {
        List<UIView> retList = new List<UIView>();
        retList.AddRange(view.Subviews);
        foreach (var subview in view.Subviews)
        {
            retList.AddRange(subview.GetAllSubViews());
        }

        return retList;
    }

    /// <summary>
    /// Sets the title of the search bars cancel button
    /// </summary>
    /// <param name="searchBar"></param>
    /// <param name="cancelTitle"></param>
    public static void SetCancelTitle(this UISearchBar searchBar, string cancelTitle)
    {
        searchBar.GetCancelButton().SetTitle(cancelTitle,UIControlState.Normal);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:12:48.827

这很容易 -

```
UIButton btnCancel = (UIButton)SearchBar.Subviews[3];
btnCancel.SetTitle ("test", UIControlState.Normal); 
```

# vb.net - 异或的替代品

> ID：15130181
> 
> 赞同：4
> 
> 时间：2013-02-28T07:49:24.527
> 
> 标签：vb.net

我得到了以下方法：

```
Private Sub boldButton_Click(sender As System.Object, e As System.EventArgs) Handles boldButton.Click
    Dim curFont As Font
    Dim newFont As Font
    curFont = rtb.SelectionFont
    If curFont IsNot Nothing Then
        'create the new font
        newFont = New Font(curFont.FontFamily, curFont.Size, curFont.Style Xor FontStyle.Bold)
        'set it
        rtb.SelectionFont = newFont
    End If
End Sub 
```

目前在理解这部分代码发生的情况时遇到问题`curFont.Style Xor FontStyle.Bold`。在不使用 ? 的情况下获得相同结果的有效方法是`operator` `Xor`什么？

**编辑**（由 us2012 评论）我需要替代方案吗？

我[**在 MSDN 上查找了 Xor，**](http://msdn.microsoft.com/en-us/library/csw1x2a6.aspx)但仍然无法理解它在`boldButton_Click`过程中的实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T08:15:38.157

从你的评论来看，你不明白`Xor`这里做了什么，我认为解释比人为的替代结构更能帮助你。如果你想了解它是如何工作的，你首先需要了解[按位运算。](http://en.wikipedia.org/wiki/Bitwise_operation)一旦你知道这一点，想象一下对于字体，字体样式保存为 0 和 1。为简单起见，假设有 3 位，第一个为粗体，第二个为斜体，第三个为下划线。（所以 101 是粗体下划线，011 是斜体下划线等。此外，`FontStyle.Bold`是 100 等）。

然后，类似于按位运算：

`oldstyle Or FontStyle.Bold`创造一种大胆的新风格，无论旧风格是否。（如果`oldstyle`是`FontStyle.Italic`= `010`，那么`010 Or 100`= `110`，所以新样式是粗斜体。）

`oldstyle Xor FontStyle.Bold`创建一个新样式，如果旧样式不是粗体，则它是粗体，如果旧样式是粗体，则不是粗体。（假设`oldstyle`是粗体和斜体，so `110`, then `110 Xor 100`is `010`, so italic only。但是如果旧样式是 normal `000`， then `000 Xor 100`is `100`, so just bold。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T08:16:14.010

按位异或切换标志。让我们假设 Style 位域看起来像这样

```
00000000
     ^^^
     BIU (Bold, Italic, Underline) 
```

所以 的值`FontStyle.Bold`是：

```
00000100 
```

现在`something Xor FontStyle.Bold`将只翻转这一位`something`。例子：

```
00000111 Xor 00000100 = 00000011    (Boldness removed)
00000001 Xor 00000100 = 00000101    (Boldness added) 
```

请注意，其他位不受影响。

* * *

由于您明确要求替代方案：您可以检查该位是否已设置`style And Bold <> 0`，然后设置`style = style Or Bold`或删除它`style = style And (Not Bold)`。

# jsf-2 - 如何在按下另一个 JSF 页面上的某个按钮时返回相同的 JSF 页面

> ID：15130190
> 
> 赞同：4
> 
> 时间：2013-02-28T07:49:43.110
> 
> 标签：jsf-2, navigation

我有两个 JSF 页面，假设 A 和 B。从这两个页面 A 和 BI 可以导航到页面 C。现在页面 C 中有一个按钮（确定按钮），单击它应该导航回 A 或 B，具体取决于从哪里（A或B）调用页面C。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T12:45:17.527

## 利用视图参数的解决方案

这个想法是您可以将当前视图 id 作为下一个（目标）页面的获取参数传递。从目标页面，您将能够使用它导航回来。

基本示例：

视图 A 和 B：

```
<h:body>
    Hello from page A (B)
    <h:link value="Go to page C via link" outcome="target">
        <f:param name="backurl" value="#{view.viewId}"/>
    </h:link>
    <h:form>
        <h:commandButton value="Go to page C via command button" action="#{baseBean.doAction}"/>
    </h:form>
</h:body> 
```

视图 C：

```
<f:metadata>
    <f:viewParam name="backurl" value="#{backBean.backurl}"/>
</f:metadata>
<h:body>
    Hello from page C
    <h:link value="Go back via link" outcome="#{backBean.backurl}">
    </h:link>
    <h:form>
        <h:commandButton value="Go to page C via command button" action="#{backBean.back}"/>
    </h:form>
</h:body> 
```

页面 A / B 的 Bean：

```
@ManagedBean
@RequestScoped
public class BaseBean {

    public String doAction() {
        String url = FacesContext.getCurrentInstance().getViewRoot().getViewId();
        return "/target?faces-redirect=true&backurl=" + url;
    }

} 
```

C页的Bean：

```
@ManagedBean
@RequestScoped
public class BackBean {

    private String backurl;

    public String back() {
        return backurl + "?faces-redirect=true";
    }

    public String getBackurl() {
        return backurl;
    }

    public void setBackurl(String backurl) {
        this.backurl = backurl;
    }

} 
```

最后要提到的一点是，视图 ID 可能*与*Web 浏览器中的 URL 不同。

## `<h:link>`仅在使用时增强解决方案

考虑到 BalusC 的正确评论和他之前对问题[Cancel button 在验证错误的情况下不起作用](https://stackoverflow.com/questions/13148566/cancel-button-doesnt-work-in-case-of-validation-error/13149506#13149506)的回答，以防您不需要`<h:commandButton>`在目标页面中使用，因此不需要做任何业务工作返回上一页时，您基本上可以将工作留给`<h:link>`. 在这种情况下，根本不需要（目标视图的）支持 bean，并且可以将目标视图的结构最小化为：

```
<f:metadata>
    <f:viewParam name="backurl"/>
</f:metadata>
<h:body>
    Hello from page C
    <h:link value="Go back" outcome="#{backurl}" rendered="#{not empty backurl}"/>
</h:body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:55:46.940

`comesFrom`你可以在你的 Beanclass 中实现一个属性。此属性可以在导航到页面时提供您来自的页面的名称`C`（`A`如果是页面 A，`B`如果是页面 B）。
单击页面中的“确定”按钮后，您`C`可以检查您的财产`comesFrom`并导航回该财产的价值。

# php - 提交按钮在 php 脚本中不起作用 - 按什么都没发生

> ID：15130209
> 
> 赞同：0
> 
> 时间：2013-02-28T07:50:48.373
> 
> 标签：php, html

我不知道为什么提交按钮不起作用。当我点击它时，什么也没有发生。什么是错误不知道？这是代码：

```
<form action=members.php method=post>

<br><br><Center><table><tr><td colspan=2 align=center><h3>Members Login Area</h3></td></tr>
<tr><td>Member's ID</td><td><input type=text name=id></td></tr>
<tr><td>Password</td><td><input type=password name=password></td></tr>
<tr><td>&nbsp;</td><td>
<a href="forgot.php" onclick="doexit=false;"><font face="Verdana,Arial,Helvetica" size="1" color="#000000"><b>Forgot Your Password?</b></font></a></td></tr>
<tr><td colspan=2 align=center><input type=submit value="Log In"></td></tr>         
</table></form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:52:14.563

引号（“）在哪里。你到处都错过了引号：P

```
<form action="members.php" method="post"> 
```

// 你的代码必须是这样的。

```
<form action="members.php" method="post">
  <br><br>
  <center>
    <table>
      <tr>
        <td colspan="2" align="center">
          <h3>
            Members Login Area
          </h3>
        </td>
      </tr>
      <tr>
        <td>
          Member's ID
        </td>
        <td>
          <input type="text" name="id"></td>
      </tr>
      <tr>
        <td>
          Password
        </td>
        <td>
          <input type="password" name="password">
        </td>
      </tr>
      <tr>
        <td>
          &nbsp;
        </td>
        <td>
          <a href="forgot.php" onclick="doexit=false;">
            <font face="Verdana,Arial,Helvetica" size="1" color="#000000">
            <b>
              Forgot Your Password?
            </b>
            </font>
          </a>
        </td>
      </tr>
      <tr>
        <td colspan="2" align="center">
          <input type="submit" value="Log In">
        </td>
      </tr>         
    </table>
  </center>
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T07:53:07.797

```
<input type=submit value="Log In"> 
```

应该

```
<input type='submit' value="Log In"> 
```

它`type="something"`不像`type=something`

输入的结构是

`<input type='keyword' >`和关键字可能[来自这个列表](http://www.w3.org/wiki/HTML/Elements/input)（w3.org）

# c# - Automapper，映射异常

> ID：15130220
> 
> 赞同：3
> 
> 时间：2013-02-28T07:51:36.800
> 
> 标签：c#, .net, automapper

我在解决方案的代码中的许多位置都使用了 Automapper。但我不明白为什么在这个解决方案的一个项目中，我这样做：

```
Mapper.CreateMap<MY_CLASS, MyClass>();

Mapper.AssertConfigurationIsValid();

var result = Mapper.Map<List<MY_CLASS>, List<MyClass>>(myListResult); 
```

我在线得到这个异常`Mapper.Map`： *缺少类型映射配置或不支持的映射*

在配置中，我忽略了除`Id`字段之外的所有属性，相同的异常

我真的不明白为什么。有没有办法更精确地知道问题？

**更新 1**

失败的 MyTestMethod 抛出异常：AutoMapper.AutoMapperMappingException：缺少类型映射配置或不支持的映射。

映射类型：MY_CLASS -> MyClass MyProject.DataContexts.MY_CLASS -> MyProject.BusinessModels.MyClass

目标路径：List`1[0]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-18T11:11:32.187

由于对此没有答案，我想将 nemesv 的评论添加到问题中，这为我指明了正确的方向。即未执行 CreateMapper 语句，导致与 OP 相同的异常。

# android - 我在参考库中有重复的 jar

> ID：15130221
> 
> 赞同：0
> 
> 时间：2013-02-28T07:51:44.933
> 
> 标签：android, android-library

我在参考库中有一个重复的jar文件，是error multiple dex error的原因吗？如何从参考库中删除那些

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:54:02.597

右键单击jar文件->构建路径->从构建路径中删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:54:11.363

如果您的`Jar`项目中有一个同名的文件和 1 个引用的库，只需删除其中的 1 个。从库中删除。

# c++ - 确定是否将相同的指针传递给宏

> ID：15130225
> 
> 赞同：3
> 
> 时间：2013-02-28T07:52:00.417
> 
> 标签：c++, templates, visual-c++, compiler-errors, static-assert

有一组宏，用于调试、日志记录、堆栈跟踪显示等。其中一个是：

```
#define ASSERT_IF_NULL_2(_ptr1, _ptr2) \ 
    ASSERT(_ptr1);  \
    ASSERT(_ptr2); 
```

这是我编写的宏的简化版本。如果断言（运行时）失败，我有自定义断言对话框，将此类空检查失败记录到日志文件中。还编写了宏，以便在编译时检查非指针（静态断言）。

现在，我正在寻找一些静态断言来检查两个指针​​是否实际上相同。例子：

```
int* ptr;
ASSERT_IF_NULL_2(ptr, ptr); 
```

应该引发编译器错误，因为宏的两个参数是相同的。我不在乎指针是否指向相同的内存（因为那是运行时的）。

我试过这样的表达：

```
int xx;
xx = 1 / (ptr-ptr);
xx = 1 / (&ptr - &ptr); 
```

它们都没有给出被零除的编译器错误。另外，我尝试过使用`void*`模板参数的模板：

```
template<void* T>
class Sample{}; 
```

但它不允许将局部变量指针传递给模板非类型参数。

我正在使用**VC9**，它不支持`constexpr`关键字（甚至 VS2012 也不支持）。我尝试使用 'const' 代替，这不会引发错误。我还将表达式用作数组大小，这**总是**会导致错误。

```
int array[(&ptr - &ptr)]; // Even with ptrdiff_t 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T08:11:19.190

好吧，解决方案很简单。使用`static_assert`和[字符串化运算符 (#)](http://msdn.microsoft.com/en-us/library/7e3a913x.aspx)：

```
#define ASSERT_TWO(a,b) static_assert((void*)#a != (void*) #b, "'" #a  "' and '" #b "' are same variables passed to ASSERT_TWO.") 
```

演示：

```
int *global;    

int main()
{
    int *local;

    ASSERT_TWO(global, local);  //should pass
    ASSERT_TWO(local, global);  //should pass

    ASSERT_TWO(global, global); //should fail
    ASSERT_TWO(local, local);   //should fail

    (void)local; //suppress unsused warning!
} 
```

这会导致**非常有用**的错误消息：

> main.cpp：在函数'int main（）'中：
> main.cpp：18：5：错误：静态断言失败：'global'和'global'是传递给ASSERT_TWO的相同变量。
> main.cpp:19:5：错误：静态断言失败：“本地”和“本地”是传递给 ASSERT_TWO 的相同变量。

[在线演示](http://stacked-crooked.com/view?id=7a0c549b8e46dad2a2169770a36ce28a)。

希望有帮助。

[我记得这对您没有帮助，因为您正在使用**VC9**，但我保留此答案，因为它可能对其他人有所帮助。截至目前，您可以使用其他生成重新声明错误的解决方案，与消息相比，该错误消息的帮助较小`static_assert`。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T09:32:57.597

因此，您想检查是否将相同的名称传递给两个参数，对吗？然后这个简单的技巧有效

```
#define ASSERT_IF_NULL_2(_ptr1, _ptr2)\
{\
    int _check_##_ptr1;\
    int _check_##_ptr2;\
}\
ASSERT(_ptr1);\
ASSERT(_ptr2);

int main ()
{
    int* ptr1;
    int* ptr2;

    ASSERT_IF_NULL_2 (ptr1, ptr1); // error: redeclaration of `int _check_ptr1'
    ASSERT_IF_NULL_2 (ptr1, ptr2); // OK
} 
```

**编辑**（由 OP，Ajay）：

在 Visual C++ 编译器上，我们可以使用 MS 特定的关键字[`__if_exists`](http://msdn.microsoft.com/en-us/library/x7wy9xh3%28v=vs.80%29.aspx)通过以下方式给出错误`static-assert`：

```
 #define ASSERT_IF_NULL_2(_ptr1, _ptr2)\
    {\
        int _check_##_ptr1;\
        __if_exists(_check_##_ptr2) 
             STATIC_ASSERT(false, "Same pointer passed twice")
    }\ 
```

由于`static_assert`VS2010 之前的编译器不存在关键字，因此可以使用自定义编写的 STATIC_ASSERT。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:07:03.713

您是否要检查指针是否指向相同的内存或它们是否指向相同的值？

在第一种情况下

```
xx = 1 / (ptr-ptr); 
```

应该管用。

在第二种情况下

```
xx = 1 / (*ptr-*ptr); 
```

应该管用。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-28T08:00:22.680

尝试其中一种：

```
ASSERT_IF_NULL(ptr1 == ptr1);
ASSERT(ptr1 != ptr2) 
```

正如 Nawaz 所指出的，你想要一个编译错误，所以试试这个：

```
1/(ptr1 != ptr2);
1/static_cast<int>(ptr1 != ptr2);
static_assert(ptr1 != ptr2, "Pointers are different")       //if you dont use c++0x look here:http://stackoverflow.com/a/1664651/258418 
```

# java - SearchAPI 和 Hibernate 意外结束子树

> ID：15130226
> 
> 赞同：3
> 
> 时间：2013-02-28T07:52:04.237
> 
> 标签：java, hibernate, google-search-api

我有以下实体

```
@Entity
public class Task {

private List<TaskParameter> taskParameters = Collections.emptyList();

@ElementCollection(fetch = FetchType.EAGER)
    @CollectionTable(name = "taskParameters", joinColumns = @JoinColumn(
            name = "task_id"))
    public List<TaskParameter> getTaskParameters() {
        return taskParameters;
    }

} 
```

并且 TaskParameter 实体是一个嵌入定义如下：

```
@Embeddable
public class TaskParameter {
        private String name;
    private String value;

} 
```

我正在使用 Search API 这个方法

```
@Transactional(readOnly = true) 
public List<Task> getTaskByRequisitionId(String requisitionId) {
    List<Task> tasks;
    Search search = new Search();
    search.addFilterAll("taskParameters",Filter.equal("value", requisitionId));
    tasks = taskDao.search(search);
    return tasks;
} 
```

但得到例外

```
[INFO] 2013-02-28 10:20:06,641 [btpool0-14] ERROR org.hibernate.hql.PARSER - <AST>:0:0: unexpected end of subtree
[INFO] 2013-02-28 10:20:06,642 [btpool0-14] ERROR org.hibernate.hql.PARSER - <AST>:0:0: expecting "from", found '<ASTNULL>'

[INFO] org.hibernate.hql.ast.QuerySyntaxException: unexpected end of subtree [select _it from com.planetsystems.procnet.model.jbpm.Task _it where not exists (from _it.taskParameters _it1 where not (_it1.value = :p1 and _it1.value is not null))] 
```

我正在使用 genericdao 1.1.0 和休眠 3.5.6-Final

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:06:23.977

我认为这里的问题可能是 genericdao 框架无法处理 @ElementCollection 情况。我以前没想过这个案子。谢谢你提出来。也许我可以在未来的版本中将它添加到框架中。

同时，编写您的方法以使用本机 Hibernate 查询。您可以使用 getSession() 在 DAO 中直接获取 Hibernate 会话。当你让它工作时，请用能够工作的 HQL 查询更新这个线程。我可以使用它来找出一种将功能构建到框架中的方法。

谢谢。

# c# - 由于保护级别错误，成员无法访问

> ID：15130231
> 
> 赞同：7
> 
> 时间：2013-02-28T07:52:25.507
> 
> 标签：c#, .net, csharpcodeprovider

在本主题内连接： [如何将我的班级中的字符串连接到表格](https://stackoverflow.com/questions/15127819/how-to-connect-string-from-my-class-to-form)

我试图做与他们的答案相关的解决方案（特别是杰里米爵士的回答），但这个错误不断出现

> “KeyWord.KeyWord.keywords”因其保护级别而无法访问

KeyWords.cs 的代码：

```
namespace KeyWord
{
    public class KeyWord
    {
        String[] keywords = { "abstract", "as", "etc." };

    }
} 
```

main.cs 的代码

```
// Check whether the token is a keyword. 
var keyboardCls = new KeyWord.KeyWord();
String[] keywords = keyboardCls.keywords;

for (int i = 0; i < keywords.Length; i++)
{
    if (keywords[i] == token)
    {
        // Apply alternative color and font to highlight keyword.        
        rtb.SelectionColor = Color.Blue;
        rtb.SelectionFont = new Font("Courier New", 10, FontStyle.Bold);
        break;
    }
} 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-28T07:53:36.067

您需要定义`keywords`为公开

```
public String[] keywords = { "abstract", "as", "etc." }; 
```

目前是这样`private`，这就是为什么在课堂外无法访问的原因。

[访问修饰符（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173121.aspx)

> 类成员，包括嵌套类和结构，可以是公共的、受保护的内部的、受保护的、内部的或私有的。类成员和结构成员（包括嵌套类和结构）的访问级别**默认为私有**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T07:58:56.300

请改用此代码：

```
public class KeyWord
    {
        String[] keywords = { "abstract", "as", "etc." };

    } 
```

变量的保护级别是`private`默认的。一个好的做法是在类中为成员使用属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T07:56:33.100

您应该为关键字创建一个属性，如下所示

```
public String[] Keywords
{
get{return keywords;}
} 
```

这是一个保护违规，因为变量默认是私有的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T07:53:48.190

尝试公开字符串数组：

```
public class KeyWord
{
    public String[] keywords = { "abstract", "as", "etc." };

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-13T06:48:27.530

您需要使用“public”关键字定义您的类

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-10T03:32:20.260

请确保将构造函数添加为公共访问说明符。这可能是这种错误的原因。例子 ：

```
Customer() {
this.CustomerId = ++counter;
}
Change it to : 
public Customer() {
this.CustomerId = ++counter;
} 
```

# c# - 深度克隆对象时事件处理程序的奇怪行为

> ID：15130232
> 
> 赞同：0
> 
> 时间：2013-02-28T07:52:29.670
> 
> 标签：c#, events, observablecollection, deep-copy

首先，很抱歉无法提出更好的标题。不过我试过了。

我有这样的课

```
public class GameBoard : ICloneable {       
    private bool _isCloned;

    public ObservableCollection<BoardPosition> BoardPositions { get; set; }

    public GameBoard() {
        BoardPositions = new ObservableCollection<BoardPosition>();
        //this.BoardPositions.CollectionChanged += BoardPositionsOnCollectionChanged;
    }

    private void BoardPositionsOnCollectionChanged(object sender, NotifyCollectionChangedEventArgs notifyCollectionChangedEventArgs) {
        // if this event is raised from the NEW object, [this] still points to the OLD object
    }

    public object Clone() {
        //var gameBoard = (GameBoard)this.MemberwiseClone();
        var gameBoard = new GameBoard {
            // make it VERY clear this is just a clone
            _isCloned = true,
            // deep copy the list of BoardPositions
            BoardPositions =
                new ObservableCollection<BoardPosition>(this.BoardPositions.Select(p => p.Clone()).Cast<BoardPosition>())
        };

        gameBoard.BoardPositions.CollectionChanged += BoardPositionsOnCollectionChanged;
        // why does the target of the event point to the old object?!?
        return gameBoard;
    }
}
public class BoardPosition : ICloneable {
    public int[] Coordinates { get; set; }

    public BoardPosition(int[] coordinates) {
        Coordinates = coordinates;
    }

    public object Clone() {
        return new BoardPosition(new int[]{this.Coordinates[0], this.Coordinates[1], this.Coordinates[2]});
    }
} 
```

它实现了 ICloneable。在 Clone 方法中，我深度复制 ObservableCollection，并附加 CollectionChanged 事件处理程序。

现在的问题是，当新的克隆对象的 CollectionChanged 事件触发时，[this] 指向被克隆的旧对象。这可以很容易地观察到，因为在引发事件时 _isCLoned 始终为 false，即使在克隆期间它被设置为 true。为什么会这样，我该怎么办？我当然希望 [this] 引用新的克隆对象。

```
var gameBoard = new GameBoard();
        gameBoard.BoardPositions.Add(new BoardPosition(new[] {1, 2, 3}));

        var clonedBoard = (GameBoard)gameBoard.Clone();
        clonedBoard.BoardPositions.Add(new BoardPosition(new[] { 2, 3, 4 })); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T08:02:12.390

那是因为您没有附加`BoardPositionsOnCollectionChanged`新创建对象的方法，而是将方法附加到正在克隆的对象上。

也就是说，您需要明确指定要使用的引用，否则编译器将假定`this`，这是原始对象：

```
// your code ("this." is added implicitly):
gameBoard.BoardPositions.CollectionChanged += this.BoardPositionsOnCollectionChanged;

// working code:
gameBoard.BoardPositions.CollectionChanged += gameBoard.BoardPositionsOnCollectionChanged; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:00:59.993

> 为什么事件的目标指向旧对象？

因为您在旧对象 Clone 方法中分配处理程序。我在这里做一些猜测（我这里没有 C# 编译器），但我记得我过去遇到过类似的问题。在克隆中，“this”是旧对象。BoardPositionsOnCollectionChanged 在该点解析为当前的“this”引用，因此它将始终处理对“old”对象的引用。

您可以尝试将分配分解为不同的“Init”方法，并在新实例上调用它：

```
void Init() {
   BoardPositions.CollectionChanged += BoardPositionsOnCollectionChanged;
}

public object Clone() {
    ...
    gameBoard.Init()
    return gameBoard;
} 
```

那应该工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:02:14.997

你的问题是这一行：

`gameBoard.BoardPositions.CollectionChanged += BoardPositionsOnCollectionChanged;`

`BoardPositionsOnCollectionChanged`是被克隆对象的成员，所以当调用时，'this' 将是旧对象。

而是在 ctor 中设置您的事件处理程序。

# c - 两个进程之间的 mq_notify - C

> ID：15130235
> 
> 赞同：2
> 
> 时间：2013-02-28T07:52:36.973
> 
> 标签：c, posix, message, message-queue

我有两个进程 server.c 和 client.c 它们通过 POSIX 消息队列进行通信。客户端向队列发送一条消息，mq_notify 告诉服务器一条消息已添加到队列中。然后信号处理程序将接收并处理该消息。但是，我无法让它正常工作。从 client.c 添加消息永远不会发送信号处理程序（但是，如果我从 server.c 添加消息，它会设置处理程序）。服务器仍然可以接收来自客户端的放在队列中的消息，但是由于某种原因，这不会触发 server.c 的 mq_notify 中使用的处理程序。有人知道这是什么吗？这是来自每一方的相关示例代码：

客户端.c

```
/* queue has already been created, this opens it*/
msgq_id = mq_open(MSGQOBJ_NAME, O_RDWR);

if (msgq_id == (mqd_t)-1) {
    perror("In mq_open()");
    exit(1);
}

/* sending the message      --  mq_send() */
mq_send(msgq_id, packet.mesg_data, strlen(packet.mesg_data), msgprio);

/* closing the queue        -- mq_close() */
mq_close(msgq_id); 
```

服务器.c

```
void handler()
{
    /*for now it just prints that the signal was recieved*/
}
/*i opening the queue        --  mq_open() */
msgq_id = mq_open(MSGQOBJ_NAME, O_RDWR);
if (msgq_id == (mqd_t)-1) {
        perror("In mq_open()");
        exit(1);
}

int main(){
    . 
    . 
    .
    .
    /*Set up to be notifed when the queue gets something in it*/
    signal(SIGUSR1, handler);
    sigevent.sigev_signo = SIGUSR1;;
    if(mq_notify (msgq_id, &sigevent) == -1)
    {
        if(errno == EBUSY)
                printf("Another process has registered for notifications.\n");
        _exit (EXIT_FAILURE);
    }
    //strcpy(packet2.mesg_data, "Hello world!");
    //mq_send(msgq_id, packet2.mesg_data, strlen(packet2.mesg_data), 0);

    while(1)
    {
        /*wait to be notified*/
    }
    .
    .
    . 
} 
```

这是否与它们是单独的进程有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:22:45.887

啊哈！弄清楚了。通知被阻止，因为 server.c 在 mq_receive 中等待。这意味着信号未被确认，因为进程正忙于等待 mq_receive。感谢任何看过我问题的人。

# visual-studio-2012 - 在 Visual Studio 2012 中自动化“附加到进程”

> ID：15130239
> 
> 赞同：6
> 
> 时间：2013-02-28T07:52:49.213
> 
> 标签：visual-studio-2012

我正在为不属于我的解决方案的软件开发一个 .NET DLL（没有源代码）。

我真的很想以某种方式实现一个键快捷方式，自动将 DLL 附加到特定的可执行文件（理想情况下等待 exe 启动）。

解决此问题的最佳方法是什么？

如果有办法将 VisualBasic 排除在外，那将是一个额外的好处。（无意冒犯 VB 粉丝，但我就是不喜欢）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-22T09:07:45.803

由于 Visual Studio 2012 中不存在宏，因此您需要添加一个扩展。

[AttachTo](http://visualstudiogallery.msdn.microsoft.com/d0265ab0-df51-4100-8e10-1f84403c4cd0)非常好且轻巧。*在 Visual Studio 的扩展和更新*（在工具中）中搜索它。

> 将“附加到 IIS”、“附加到 IIS Express”和“附加到 NUnit”命令添加到“工具”菜单。
> 
> 现在您可以开始调试托管在本地 IIS 服务器中的网站，或者比以前更快地通过 NUnit 测试:)
> 
> AttachTo 扩展提供了隐藏与您无关的命令的选项。您还可以使用工具 -> 选项 -> 键盘来分配快捷方式。

# batch-file - Imagemagick 批量转换内存过载

> ID：15130249
> 
> 赞同：1
> 
> 时间：2013-02-28T07:53:28.337
> 
> 标签：batch-file, cmd, imagemagick

我必须将大约十亿张图片从 jp2 转换为 jpg...

我创建了这样的 .bat

```
for /d %%d in (*) do (
  for %%f in ("%%~d\*.jp2") do (
    convert -limit memory 0 -limit map 0 "%%~ff" -quality 25 "%%~dpf\jpg\%%~nf.jpg"
  )
) 
```

但是当它转换超过〜100 000个窗口时，我会抛出可用内存等错误......我该怎么做才能使用更多的内存？所以那个图像转换器？如果是，则释放该内存....也许有办法将它与其他东西连接起来？

现在我遇到了 concolse free memory 错误以及 window 的 throw 错误...

此外，如果我删除限制内存 0 -limit map 0 我有同样的问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:12:24.760

根据我们的[聊天会话](https://chat.stackoverflow.com/rooms/25307/discussion-between-rojo-and-brabertaser1992)，解决方案是不使用 ImageMagick`convert`进行转换。 [IrfanView](http://www.irfanview.com/)支持用于批处理的[命令行开关，并且在源参数和目标参数中使用通配符都能很好地工作。](http://www.etcwiki.org/wiki/IrfanView_Command_Line_Options)您还需要[jpeg2000 插件](http://www.irfanview.com/plugins.htm)从 jp2 转换。

```
for /d %%d in (*) do (
    pushd "%%d"
    if not exist "jpg\" md jpg
    "c:\Program Files (x86)\IrfanView\i_view32.exe" *.jp2 /convert=jpg\*.jpg /jpgq=25
    popd
) 
```

# lua - Lua：什么时候调用函数？

> ID：15130256
> 
> 赞同：0
> 
> 时间：2013-02-28T07:53:54.500
> 
> 标签：lua, love2d

顺便使用 Love 框架。

好的，所以我正在寻找创建一个随机地图生成。我显然只希望它绘制一次，所以我尝试建立一个非常基本的结构。哪个不起作用，我不知道为什么。

```
function love.load()
    testVar = 1
end

function love.draw()
    if testVar == 1 then
        testFunction()
        love.graphics.print("Update", 20, 200)
    end

    love.graphics.print(testVar, 100, 100)
end

function testFunction()
    love.graphics.print("Success", 20, 300)
    testVar = 0
end 
```

所做的只是打印“0”，这要归功于在绘图函数中打印 testVar up 的命令。所以它似乎在没有实际运行 testFunction 的情况下更新了 testVar 值。这与Lua有关吗？

对于那些不熟悉 Love 的人，love.draw 会在每一帧中调用，love.load 只是最初。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:23:49.530

此代码按预期工作。它只是`love.draw`每帧调用一次（每秒多次），因此第一帧的输出很快被下一帧覆盖。通常，`love.update`当您需要更改状态（例如，基于用户输入）并`love.draw`在屏幕上（每帧）绘制该状态时使用。

# python - 序列化 Django 模型对象：引用自我

> ID：15130260
> 
> 赞同：2
> 
> 时间：2013-02-28T07:54:24.960
> 
> 标签：python, django, json, serialization

我已经在我的对象上实现了自然键并且它们起作用了。除了一个引用自身的模型。

```
from django.db import models

class Person(models.Model):
    name = models.CharField(max_length=100)
    parent = models.ForeignKey('self')

    def natural_key(self):
        return (self.name) 
```

打电话

```
serializers.serialize('json', Person.objects.all(), use_natural_keys=True) 
```

给我一个错误“DoesNotExist...没有提供异常”

-提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:25:59.400

If you want a list of lists, this would work:

```
from django.utils import simplejson

people = People.objects.all().values_list('name', 'id')
simplejson.dumps(list(people)) 
```

# javascript - 在按键时显示警报

> ID：15130263
> 
> 赞同：-1
> 
> 时间：2013-02-28T07:54:34.927
> 
> 标签：javascript, jquery

当用户按下搜索栏中的任意键时，我试图显示一条消息。经过几次尝试，我无法做到。

```
<form method="get" >
    <input type="submit" value="Search" class="btn" >
    <input name="q" type="text" id="search" size="32" maxlength="128" class="txt" >
</form> 
```

以下是我的 JavaScript：

```
$("#search").keyup(function() {                                                   // function starts when a key is entered in the search bar
  window.alert("Handler for .keyup() called.");     
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T07:57:34.520

尝试将代码包装在 a`$(document).ready`中以确保加载 dom。

```
$(document).ready(function(){
    $("#search").keyup(function() {                                                   // function starts when a key is entered in the search bar
      window.alert("Handler for .keyup() called.");     
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:59:24.933

请准备好

```
$(document).ready(function(){
   $("#search").keyup(function() {                                                   //             

   //function starts when a key is entered in the search bar
   window.alert("Handler for .keyup() called.");     
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:00:30.060

检查控制台是否有 JS 错误，`alert("Handler for .keyup() called.");`应该为您解决问题。另外尝试添加`$(document).ready(function(){});`您的代码**或**将您的代码放在页面末尾。使用 id 搜索确保输入字段存在。

```
$(document).ready(function(){
    $("#search").keyup(function() {                     
      window.alert("Handler for .keyup() called.");     
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T08:01:42.730

将您的代码放在文档就绪回调中。仅因为它没有显示警报。

```
$(function(){
   $("#search").keyup(function() {            
   //function starts when a key is entered in the search bar
     window.alert("Handler for .keyup() called.");     
    });
}); 
```

# xml - XSLT 正在复制数据

> ID：15130266
> 
> 赞同：0
> 
> 时间：2013-02-28T07:54:39.697
> 
> 标签：xml, xslt

我有一个 XSLT，它正在创建一个数据显示，按学科、学位和班级对大学课程进行分组。

XSLT 不知何故创建了重复数据。每当元素`<COURSEORAND1>`和`<GROUPORAND1>`为空时，它都会重复该类列表一次或多次（至少这是我的猜测）。在某些情况下，它会创建十几个重复项。该类仅在基础 XML 中出现一次。

我不知道是什么导致 XSLT 复制数据。

这是 XSLT：

```
<?xml version="1.0"?>
<!-- DWXMLSource="STX049-2-21-13-parsed.xml" -->
<!DOCTYPE xsl:stylesheet>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="no"/>
  <xsl:variable name="allSections" select="/CrystalReport/Group/Group/Group/Details/Section" />

  <xsl:key name="kArea" match="Section" use="ACPGAREAOFSTUDY1"/>
  <xsl:key name="kDegree" match="Section" use="concat(ACPGAREAOFSTUDY1, '+', ACPGDEGREE1)" />
  <xsl:key name="kDepartment" match="Section" use="concat(ACPGAREAOFSTUDY1, '+', ACPGDEGREE1, '+', ICCB1)" />

  <xsl:variable name="degreeFirsts" select="$allSections[generate-id() = generate-id(key('kDegree', concat(ACPGAREAOFSTUDY1, '+', ACPGDEGREE1))[1])]" />
  <xsl:variable name="deptFirsts" select="$allSections[generate-id() = generate-id(key('kDepartment', concat(ACPGAREAOFSTUDY1, '+', ACPGDEGREE1, '+', ICCB1))[1])]" />

  <xsl:template match="/">
    <CrystalReport>
      <Degrees>
        <xsl:apply-templates select="$allSections[generate-id() = generate-id(key('kArea', ACPGAREAOFSTUDY1)[1])]" mode="group"/>
      </Degrees>
    </CrystalReport>
  </xsl:template>

  <xsl:template match="Section" mode="group">
    <xsl:variable name="area" select="ACPGAREAOFSTUDY1" />
    <xsl:text>&#xA;</xsl:text>
    <areaofstudy>
      <xsl:value-of select="$area"/>
    </areaofstudy>
    <xsl:apply-templates select="$degreeFirsts[ACPGAREAOFSTUDY1 = $area]" mode="degree"/>
  </xsl:template>

  <xsl:template match="Section" mode="degree">
    <xsl:variable name="area" select="ACPGAREAOFSTUDY1" />
    <xsl:variable name="degree" select="ACPGDEGREE1" />
    <Degree>
      <xsl:apply-templates select="$deptFirsts[ACPGAREAOFSTUDY1 = $area and ACPGDEGREE1 = $degree]" mode="department">
        <xsl:sort select="ACADPROGRAMSID1" />
      </xsl:apply-templates>
    </Degree>
  </xsl:template>

  <xsl:template match="Section" mode="department">
    <department>
      <xsl:text>&#xA;</xsl:text>
      <Degreetitle>
        <xsl:apply-templates select="ACPGDEGREE1" />
      </Degreetitle>
      <Certtitle>
        <xsl:apply-templates select="CCD11" />
      </Certtitle>
      <xsl:text>&#xA;</xsl:text>
      <DegreeDesc>
        <xsl:apply-templates select="ACPGCOMMENTS1" />
      </DegreeDesc>
      <xsl:text>&#xA;ICCB Code </xsl:text>
      <ICCBcode>
        <xsl:apply-templates select="ICCB1" />
      </ICCBcode>
      <xsl:text> | Field of Study Code: </xsl:text>
      <ProgramID>
        <xsl:apply-templates select="ACADPROGRAMSID1" />
      </ProgramID>

      <xsl:variable name="courses" select="key('kDepartment', concat(ACPGAREAOFSTUDY1, '+', ACPGDEGREE1, '+', ICCB1))" />

      <xsl:call-template name="CourseGroup">
        <xsl:with-param name="courses" select="$courses[FlagElectives1 = 'N']" />
        <xsl:with-param name="title" select="'Program Requirements'" />
        <xsl:with-param name="requiredCourses" select="true()" />
      </xsl:call-template>

      <xsl:call-template name="CourseGroup">
        <xsl:with-param name="courses" select="$courses[FlagElectives1 = 'Y']" />
        <xsl:with-param name="title" select="'Program Electives'" />
      </xsl:call-template>
      <xsl:apply-templates select="ACPGHOMELANGNOTREQDRSN1" />
    </department>
  </xsl:template>

  <xsl:template name="CourseGroup">
    <xsl:param name="courses" />
    <xsl:param name="title" />
    <xsl:param name="requiredCourses" select="false()" />

    <xsl:if test="$courses">
      <xsl:text>&#xA;</xsl:text>
      <req-electitle>
        <xsl:value-of select="$title" />
      </req-electitle>
      <xsl:apply-templates select="$courses">
        <xsl:sort select="FlagElectives1" order="ascending" />
        <xsl:sort select="CRSSUBJECT1" />
        <xsl:sort select="GROUPLABEL1" />
        <xsl:sort select="CRSNO1" />
      </xsl:apply-templates>
      <xsl:if test="$requiredCourses">
        <xsl:text>&#xA;</xsl:text>
        <credit-sum>
          <xsl:value-of select='format-number(sum($courses/CRSMINCRED1),"##")'/>
        </credit-sum>
      </xsl:if>
    </xsl:if>
  </xsl:template>

  <xsl:template match="Section">
    <xsl:text>&#xA;</xsl:text>
    <Details>
      <class>
        <deptname>
          <xsl:apply-templates select="CRSSUBJECT1" />
        </deptname>
        <xsl:text>  </xsl:text>
        <courseno>
          <xsl:apply-templates select="CRSNO1" />
        </courseno>
        <xsl:text>  </xsl:text>
        <classname>
          <xsl:apply-templates select="CRSTITLE1" />
        </classname>
        <xsl:text>  </xsl:text>
        <classcredit>
          <xsl:apply-templates select="CRSMINCRED1" />
        </classcredit>
        <xsl:apply-templates select="CRSMAXCRED1" />
      </class>
    </Details>
  </xsl:template>

  <xsl:template match="ACPGHOMELANGNOTREQDRSN1[string-length() != 0]">
    <xsl:text>&#xA;</xsl:text>
    <totalcredits>
      <xsl:value-of select="normalize-space(.)" />
    </totalcredits>
  </xsl:template>

  <xsl:template match="CRSMAXCRED1[string-length() != 0]">
    <xsl:text> to </xsl:text>
    <maxcredits>
      <xsl:value-of select="normalize-space(.)" />
    </maxcredits>
  </xsl:template>

  <xsl:template match="ACPGDEGREE1/text()">
    <xsl:value-of select="concat(., ' DEGREE')"/>
  </xsl:template>

  <xsl:template match="CCD11/text()">
    <xsl:value-of select="('CERTIFICATE')" />
  </xsl:template>

</xsl:stylesheet> 
```

这是 XML 的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<CrystalReport>
  <Group Level="1">
    <Group Level="2">
      <Group Level="3">
        <Details Level="4">
          <Section SectionNumber="0">
            <ACPGDEGREE1>AAS</ACPGDEGREE1>
            <CCD11/>
            <ACPGCOMMENTS1>The Accounting program is designed to provide the theoretical and practical background necessary for supervisory and administrative careers in accounting and accounting-related areas. This degree requires a minimum of 64 credits in program requirements, program electives, and general education as listed below.</ACPGCOMMENTS1>
            <ICCB1>3203</ICCB1>
            <ACADPROGRAMSID1>ACCOU.AAS</ACADPROGRAMSID1>
            <CRSNO1>1150</CRSNO1>
            <ACPGHOMELANGNOTREQDRSN1>General Education - 12 to 16 credit hours (In addition to those listed above)  Total Credits Required - 64 to 70</ACPGHOMELANGNOTREQDRSN1>
            <CRSMINCRED1>3</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Intro to Computer Information Systems</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <ACRBLABEL1>CIS REQUIREMENT</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
            <CRSSUBJECT1>CIS</CRSSUBJECT1>
            <COURSEORAND1>OR</COURSEORAND1>
            <GROUPORAND1/>
            <ACADREQMTBLOCKSID1>16316</ACADREQMTBLOCKSID1>
            <GROUPLABEL1>Group 1</GROUPLABEL1>
          </Section>
        </Details>
        <Details Level="4">
          <Section SectionNumber="0">
            <ACPGDEGREE1>AAS</ACPGDEGREE1>
            <CCD11/>
            <ACPGCOMMENTS1>The Accounting program is designed to provide the theoretical and practical background necessary for supervisory and administrative careers in accounting and accounting-related areas. This degree requires a minimum of 64 credits in program requirements, program electives, and general education as listed below.</ACPGCOMMENTS1>
            <ICCB1>3203</ICCB1>
            <ACADPROGRAMSID1>ACCOU.AAS</ACADPROGRAMSID1>
            <CRSNO1>1110</CRSNO1>
            <ACPGHOMELANGNOTREQDRSN1>General Education - 12 to 16 credit hours (In addition to those listed above)  Total Credits Required - 64 to 70</ACPGHOMELANGNOTREQDRSN1>
            <CRSMINCRED1>2</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Using Computers: An Introduction</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <ACRBLABEL1>CIS REQUIREMENT</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
            <CRSSUBJECT1>CIS</CRSSUBJECT1>
            <COURSEORAND1>OR</COURSEORAND1>
            <GROUPORAND1/>
            <ACADREQMTBLOCKSID1>16316</ACADREQMTBLOCKSID1>
            <GROUPLABEL1>Group 1</GROUPLABEL1>
          </Section>
        </Details>
      </Group>
      <Group Level="3">
        <Details Level="4">
          <Section SectionNumber="0">
            <ACPGDEGREE1>AAS</ACPGDEGREE1>
            <CCD11/>
            <ACPGCOMMENTS1>The Accounting program is designed to provide the theoretical and practical background necessary for supervisory and administrative careers in accounting and accounting-related areas. This degree requires a minimum of 64 credits in program requirements, program electives, and general education as listed below.</ACPGCOMMENTS1>
            <ICCB1>3203</ICCB1>
            <ACADPROGRAMSID1>ACCOU.AAS</ACADPROGRAMSID1>
            <CRSNO1>1100</CRSNO1>
            <ACPGHOMELANGNOTREQDRSN1>General Education - 12 to 16 credit hours (In addition to those listed above)  Total Credits Required - 64 to 70</ACPGHOMELANGNOTREQDRSN1>
            <CRSMINCRED1>2</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Introduction to Computer Keyboarding</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <ACRBLABEL1>OFTI REQUIREMENT</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
            <CRSSUBJECT1>OFTI</CRSSUBJECT1>
            <COURSEORAND1>OR</COURSEORAND1>
            <GROUPORAND1/>
            <ACADREQMTBLOCKSID1>16318</ACADREQMTBLOCKSID1>
            <GROUPLABEL1>Group 1</GROUPLABEL1>
          </Section>
        </Details>
        <Details Level="4">
          <Section SectionNumber="0">
            <ACPGDEGREE1>AAS</ACPGDEGREE1>
            <CCD11/>
            <ACPGCOMMENTS1>The Accounting program is designed to provide the theoretical and practical background necessary for supervisory and administrative careers in accounting and accounting-related areas. This degree requires a minimum of 64 credits in program requirements, program electives, and general education as listed below.</ACPGCOMMENTS1>
            <ICCB1>3203</ICCB1>
            <ACADPROGRAMSID1>ACCOU.AAS</ACADPROGRAMSID1>
            <CRSNO1>1210</CRSNO1>
            <ACPGHOMELANGNOTREQDRSN1>General Education - 12 to 16 credit hours (In addition to those listed above)  Total Credits Required - 64 to 70</ACPGHOMELANGNOTREQDRSN1>
            <CRSMINCRED1>3</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Word Processing I</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <ACRBLABEL1>OFTI REQUIREMENT</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
            <CRSSUBJECT1>OFTI</CRSSUBJECT1>
            <COURSEORAND1>OR</COURSEORAND1>
            <GROUPORAND1/>
            <ACADREQMTBLOCKSID1>16318</ACADREQMTBLOCKSID1>
            <GROUPLABEL1>Group 1</GROUPLABEL1>
          </Section>
        </Details>
      </Group>
    </Group>
  </Group>
</CrystalReport> 
```

注意：XML 只是一个小示例，我在此链接中放置了一个较大的示例：http: [//pastebin.com/Y4J2VDRd](http://pastebin.com/Y4J2VDRd)

我注意到它只有在运行整个文件时才会发生。较短的样本不会重复。但是，如果您在 Pastebin 上查看我的示例，您会看到`<courseno>1175</courseno> <classname>Microcomputer Accounting</classname>`并`<courseno>1100</courseno> <classname>Business Mathematics</classname>`重复两次，在更大的 XML 中，您会看到随着您深入数据，类会重复多次。

这是预期的文本输出：

```
 AAS DEGREE
 The Accounting degree program is designed to provide the theoretical and practical background necessary for supervisory and administrative careers in accounting and accounting-related areas. This degree program requires a minimum of 64 credits in program requirements, program electives and general education as listed below.
 ICCB Code 3203 | Field of Study Code: ACCOU.AAS
 Program Requirements
 Accou 1140 Financial Accounting............................................4
 Accou 1150 Managerial Accounting...........................................4
 Accou 2205 Federal Taxation I .............................................3
 Accou 2241 Intermediate Accounting I.......................................4
 Accou 2242 Intermediate Accounting II......................................4
 Accou 2251 Cost Accounting.................................................3
 Busin 1100 Introduction to Business .......................................3
 Cis 1150 Introduction to Computer Information Systems .....................3
 OR
 Cis 1110 Using Computers: An Introduction..................................2
 Econo 2201 Macroeconomics and the Global Economy ..........................3
 Ofti 1100 Introduction to Computer Keyboarding ............................2
 OR
 Ofti 1210 Word Processing I................................................3
 Philo 1114 Business Ethics ................................................3
 (Total Credits)   35 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:09:40.680

事实证明，数据确实重复了多次。感谢您查看此问题。我们正在努力生成新数据。

# java - 什么是 Websphere？

> ID：15130267
> 
> 赞同：4
> 
> 时间：2013-02-28T07:54:40.013
> 
> 标签：java, websphere

**谷歌搜索这个问题会返回很多带有营销术语的结果。**

我正在寻找的是它所做的事情的总结，更多的是沿着这些路线[什么是 Maven？](http://maven.apache.org/what-is-maven.html)

[这是我能得到的最接近的。](http://searchdomino.techtarget.com/definition/WebSphere)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T08:02:55.927

“WebSphere”在最抽象的意义上是一个包含各种产品的[品牌](https://en.wikipedia.org/wiki/IBM_WebSphere)，所以“一个品牌”就是你能得到的最好的答案。

但是，当说“WebSphere”时，通常指的是[WebSphere Application Server](https://en.wikipedia.org/wiki/IBM_WebSphere_Application_Server)，它（顾名思义）是一个应用程序服务器——运行 EJB 和其他服务器端 Java 技术（如 servlet、JMS 等）的东西。这个领域的另一个重要参与者的例子是[JBoss AS](http://en.wikipedia.org/wiki/JBoss_Application_Server)。

最后，“WebSphere”的另一个可能定义是[“它的创造者最大的技术错误”](http://www.bbc.co.uk/news/business-11944966)；）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T08:01:44.190

与简单地向客户端提供对 html 文档的访问权限的常规 Web 服务器不同，它们的浏览器随后将其显示为网站，应用程序服务器允许通过请求网站调用程序/脚本，从而动态生成网站。

在这种情况下，脚本是用 Java 编写的。这允许您的 Web 应用程序使用 Java 中提供的许多 API（网站本身就是您的 Web 应用程序的前端）

所以 web sphere 是来自 IBM 的应用服务器。就那么简单。 [这](http://searchdomino.techtarget.com/definition/WebSphere)告诉你它能做什么。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T08:05:12.143

WebSphere 是一个应用服务器，它支持许多高级功能，包括负载平衡、数据库连接管理、高级日志选项等等。

另一方面，它引入了严重的开销，难以管理，并且必须学习很多才能有效地使用它。并且比在其他服务器上更经常发现自己处于[JAR 地狱](http://en.wikipedia.org/wiki/Java_Classloader#JAR_hell)中。到过那里。

# java - 多个 ObjectOutputStream 和 ObjectInputStream 出错（套接字已关闭）

> ID：15130271
> 
> 赞同：0
> 
> 时间：2013-02-28T07:54:52.700
> 
> 标签：java, sockets

我正在尝试制作一个套接字程序来同步来自两台 PC 的文件。所以基本上，我试图先进行单向同步。所以发生的事情是..

1.  服务器和客户端通过套接字连接在一起。（好的）
2.  服务器通过 ObjectOutputStream 发送他拥有的文件列表，客户端通过 ObjectInputStream 接收它。（好的）
3.  客户端比较文件列表并将他没有的文件发送回服务器（通过 ObjectOutputStream）。（好的）
4.  服务器将丢失的文件发送给客户端。（这里有问题）

我的错误出现在服务器端，它显示：

```
java.net.SocketException: Socket is closed
at java.net.Socket.getOutputStream(Unknown Source)
at ee4210.TcpServer$ConnectionRequestHandler.run(TcpServer.java:116)
at ee4210.TcpServer.handleClientRequest(TcpServer.java:80)
at ee4210.TcpServer.startServer(TcpServer.java:72)
at ee4210.TcpServer.main(TcpServer.java:39) 
```

我相信它与 ObjectOutputStream 和 ObjectInputStream 有关，因为如果我不关闭 ObjectOutputStream 或 ObjectInputStream，它可以工作。

客户端可以同时拥有 ObjectOutputStream 和 ObjectInputStream 来发送/接收对象吗？同样，服务器也可以两者兼得吗？

感谢你的帮助。对不起，很长的帖子。我喜欢尽可能详细。

我的客户代码：

```
package ee4210;

import java.io.* ;
import java.net.* ;
import java.util.* ;public class TcpClient{
static ObjectOutputStream out;
static ObjectInputStream in;
String message;
int portNo=2004;
static Socket _socket = null;   
InetAddress host = null;
static LinkedList destinationfiles = new <String>LinkedList();
static LinkedList sourcefiles = new <String>LinkedList();
static LinkedList missingfiles = new <String>LinkedList();
String filename=null;

TcpClient(){}

public static void listFilesForFolder(final File folder) { //no need to read this
    for (final File fileEntry : folder.listFiles()) {
        if (fileEntry.isDirectory()) {
            listFilesForFolder(fileEntry);
        } else {
            //System.out.println(fileEntry.getName());
            destinationfiles.add(fileEntry.getName());
        }
    }
}

public static void getListfromPeer() {
    try {
        in=new ObjectInputStream(_socket.getInputStream());
        sourcefiles = (LinkedList) in.readObject();
        //in.close(); //if i close, got error
    } catch (ClassNotFoundException | IOException classNot) {
        System.err.println("data received in unknown format");
    }

}

public static void compareList() {
    // go through each of the peer's filename, check against urs. If dont
    // have, download
    ListIterator iter = sourcefiles.listIterator();
    String filename;
    while (iter.hasNext()) {
        // System.out.println(iter.next());
        filename=(String) iter.next();
        if (!destinationfiles.contains(filename)) //file cannot be found
        {
            missingfiles.add(filename);
        }
    }

}

public static void main(String[] args) {
    /*Check if directory exist, create one if doesnt exit*/
    File theDir = new File("src/ee4210/files");

    // if the directory does not exist, create it
    if (!theDir.exists()) {
        System.out.println("creating directory..");
        boolean result = theDir.mkdir();
        if (result) {
            System.out.println("Successfully created directory");
        }

    }
    /*Get the list of files in that directory and store the names in array*/
    listFilesForFolder(theDir);

    /*Connect to peer*/
    try {
        new TcpClient().connect();
        //new TcpClient().checkForInput();

    } catch (Exception e) {
        System.out.println("Something falied: " + e.getMessage());
        e.printStackTrace();
    }

}

public void connect() throws IOException 
{

    try {
        host = InetAddress.getLocalHost();
        //_socket = new Socket(host.getHostName(), portNo);
        _socket = new Socket("172.28.177.125", portNo);
        //System.out.println(host.getHostAddress()); //get the IP address of client

        /*Get list from peer and compare list*/
        getListfromPeer(); //receive from Server
        compareList();
        System.out.println(missingfiles);

        /*Send to server the list of missing files*/

        do
        {
            //busy wait till socket is open
        }while (_socket.isClosed());
        out = new ObjectOutputStream(_socket.getOutputStream());
        out.flush();
        out.writeObject(missingfiles);
        out.flush();
        System.out.println("Client have finished sending missing linkedList over");
        out.close();

    } catch (Exception e) {
        e.printStackTrace();
    } 
} 
```

}

服务器代码：

```
 package ee4210;

import java.io.*;
import java.net.*;
import java.util.*;

public class TcpServer extends Thread
{
ServerSocket providerSocket;
Socket connection = null;
static ObjectOutputStream out;
ObjectInputStream in;
String message;
int portNo=2004; //portNo is 2004
TcpClient tcpclientobject = new TcpClient();
static LinkedList destinationfiles = new <String>LinkedList();
static LinkedList missingfiles = new <String>LinkedList();

public static void main(String[] args) 
{
    /*Check if directory exist, create one if doesnt exit*/
    File theDir = new File("src/ee4210/files");

    // if the directory does not exist, create it
    if (!theDir.exists()) {
        System.out.println("creating directory..");
        boolean result = theDir.mkdir();
        if (result) {
            System.out.println("Successfully created directory");
        }

    }
    /*Get the list of files in that directory and store the names in array*/
    listFilesForFolder(theDir);

    /*Connect*/
    try {
        new TcpServer().startServer();
    } catch (Exception e) {
        System.out.println("I/O failure: " + e.getMessage());
        e.printStackTrace();
    }

    /*Rest of the code in run()*/

}

public static void listFilesForFolder(final File folder) {
    for (final File fileEntry : folder.listFiles()) {
        if (fileEntry.isDirectory()) {
            listFilesForFolder(fileEntry);
        } else {
            //System.out.println(fileEntry.getName());
            destinationfiles.add(fileEntry.getName());
        }
    }
}
public void startServer() throws Exception {
    ServerSocket serverSocket = null;
    boolean listening = true;

    try {
        serverSocket = new ServerSocket(portNo);
    } catch (IOException e) {
        System.err.println("Could not listen on port: " + portNo);
        System.exit(-1);
    }

    while (listening) {
        handleClientRequest(serverSocket);
    }

    serverSocket.close();
}

private void handleClientRequest(ServerSocket serverSocket) {
    try {
        new ConnectionRequestHandler(serverSocket.accept()).run();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public class ConnectionRequestHandler implements Runnable{
    private Socket _socket = null;

    public ConnectionRequestHandler(Socket socket) {
        _socket = socket;
    }
    public void run() {
        System.out.println("Client connected to socket: " + _socket.toString());

        /*Send the linkedlist over*/
        try {
            out = new ObjectOutputStream(_socket.getOutputStream());
            //out.flush();
            out.writeObject(destinationfiles);
            out.flush();
            //out.close(); //if I close, will have errors
        } catch (IOException e) {
            e.printStackTrace();
        }
        receiveMissingFileNames(); //this one is still ok

        try { //if i put the close here its ok
            out.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try { 
            out = new ObjectOutputStream(_socket.getOutputStream()); //when I add this line it shows the error
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    public void receiveMissingFileNames()
    {
        try {

            in=new ObjectInputStream(_socket.getInputStream());
            System.out.println("Is the socket connected="+_socket.isConnected());
            missingfiles=(LinkedList) in.readObject();
            System.out.println(missingfiles);
            in.close();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:32:26.380

> java.net.SocketException：套接字已关闭

该异常意味着*您*关闭了套接字，然后继续尝试使用它。

关闭套接字的输入流或输出流会关闭另一个流和套接字。

# templates - 如何访问另一个类别的项目

> ID：15130273
> 
> 赞同：0
> 
> 时间：2013-02-28T07:54:56.383
> 
> 标签：templates, joomla, joomla1.5, joomla-k2

我需要更改 mod_k2_content 模板以输出一个类别的文章：在不同的位置（列表的第 3 和第 5 位）添加几篇（例如 2 篇）文章到此输出。

我可以将直连到 DB 并将文章从类别抓取到数组，然后将其与默认类别输出混合。但我正在搜索如何使用 k2 函数来做到这一点？有人有完整的答案或任何想法在哪里搜索吗？谢谢你！

# vb.net - 执行长流程时等待表单消失

> ID：15130275
> 
> 赞同：0
> 
> 时间：2013-02-28T07:54:57.017
> 
> 标签：vb.net, winforms

我正在尝试显示一条等待消息，这实际上是一个表单，而一个长进程正在某个不同的文件中运行。我面临的问题是，一旦进程开始，表单就会消失，但它仍然处于活动状态并正在运行进程

我的代码：

```
 Dim objWait As New frmWaitupdate
    Dim strReply As String

    Dim ischange As Boolean
    Dim obj1 As New MyBO.UpdateSchemaBO()
    ischange = obj1.CheckSchemaChanges(Application.ProductVersion.ToString())

    If ischange = True Then

        lblMsg.Text = "Schema changes found please wait  Please wait."

        obj1.AddVersionTable(Application.ProductVersion.ToString())
        Me.Visible = True

        strReply = obj1.UpdateSchema(Me)
        If strReply <> "" Then
            MessageBox.Show(strReply, "abc")
        Else
            MessageBox.Show("Schema updated successfully", "abc")
        End If

        'objWait.Hide()
    ElseIf ischange = False Then

        MessageBox.Show("No schema changes found", "abc")

        End If

    End If 
```

随着流程在 UpdateSchema() 中进行，大约需要 30-45 秒才能完成表单消失。有什么方法可以让表单在屏幕上可见，直到我的流程完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:41:11.373

我假设 UpdateSchema 调用是您的“漫长过程”，并且 frmWaitUpdate 是包含您希望显示的消息的表单。

而不是调用“Me.Visible = True”，您应该调用“objWait.Show(Me)”。确保等待表单不是模态的，否则代码执行将在那里停止，直到等待表单关闭。当漫长的过程完成后，您可以调用“objWait.Hide()”或 objWait.Visible = False”。

另外，我相信在 objWait.Show 工作之前，您的代码运行的形式需要可见。

# android - 如何在android中计算最后一个日期收件箱短信

> ID：15130280
> 
> 赞同：1
> 
> 时间：2013-02-28T07:55:17.540
> 
> 标签：android, date, sms, inbox

我正在开发一个应用程序，我想在其中计算最后一个日期总数`inbox SMS`。我正在使用此代码

```
TextView view = new TextView(this);
Uri uriSMSURI = Uri.parse("content://sms/inbox");
long now = System.currentTimeMillis();
long last24 = now - 24*60*60*1000;//24h in millis
String[] selectionArgs = new String[]{Long.toString(last24)};
String selection = "date" + ">?";
String[] projection = new String[]{"date"};
Cursor cur = getContentResolver().query(uriSMSURI, projection, selection, selectionArgs,null);
String sms = String.valueOf(cur.getCount());
view.setText("Total incoming today SMS  "+sms);
setContentView(view); 
```

我可以计算过去 24 小时的收件箱短信，但我需要计算最后日期的收件箱短信。像今天一样，`Date is 28/02/13`但我想计算总收件箱短信`Date 27/02/13`。

请帮助我，我是新手，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:00:54.000

尝试将选择设置为`date between date('now', '-1 day') and date('now')`，删除`selectionArgs`

更新：

```
Cursor cur = getContentResolver().query(uriSMSURI, projection, "datetime(date/1000, 'unixepoch') between date('now', '-1 day') and date('now')", null, null); 
```

# wpf - 如何删除 MediaElement WPF 上的黑色边框

> ID：15130281
> 
> 赞同：1
> 
> 时间：2013-02-28T07:55:19.253
> 
> 标签：wpf, mediaelement

我的 XAML 上有一个 MedialElement，显示动画 GIF。一切正常，但我无法删除黑色边框：

![在此处输入图像描述](../Images/79a62a075ca49412f530d76666413be3.png)

mediaelement 的大小已经与 GIF 的大小相同，我也将它包裹在 Border 标签上，但边框仍然存在：

```
<Border BorderBrush="white" BorderThickness="1" SnapsToDevicePixels="True">
   <MediaElement SnapsToDevicePixels="True" Source="<source>" Height="16"  
       HorizontalAlignment="Left" Margin="8,0,0,82" Name="medElemStatusWidget" 
       VerticalAlignment="Bottom" Width="16" LoadedBehavior="Manual" />
</Border> 
```

我应该怎么办？提前致谢！

# java - Java 和 C++ 共享内存

> ID：15130283
> 
> 赞同：10
> 
> 时间：2013-02-28T07:55:28.627
> 
> 标签：java, c++, java-native-interface, ipc, shared-memory

我有一段创建共享内存的 C++ 代码。除非使用 JNI，否则是否可以编写可以读取 C++ 代码创建的内存的 Java 代码。顺便说一句，我使用的是 Windows 操作系统。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-31T03:20:19.450

见[`MappedByteBuffer`](https://docs.oracle.com/javase/8/docs/api/java/nio/MappedByteBuffer.html)。它是读取和写入共享内存的标准 Java 类。我经常使用它。是的，您可以使用它与使用共享内存的任何语言编写的任何程序进行通信，而且它都是非常标准的 Java，没有 JNI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:00:21.197

是的，您可以使用代码项目：[代码项目](http://www.codeproject.com/Articles/2460/Using-Memory-Mapped-Files-and-JNI-to-communicate-b)

# php - PHP fwrite 新行

> ID：15130289
> 
> 赞同：52
> 
> 时间：2013-02-28T07:56:08.383
> 
> 标签：php

我正在尝试将用户名和密码写入 txt 文件中的新行。txt 文件中的输出应该是这样的。我知道这不是很安全，但仅用于学习目的

```
Sebastian   password
John        hfsjaijn 
```

这就是我到目前为止所拥有的

```
if(isset($_GET['register'])) //  
{
    $user  = $_GET['username'];
    $password=$_GET['password'];
    $fh = fopen("file.txt","a+");
    fwrite($fh,$user."\n"); //write to txtfile
    fwrite($fh,$password."\n"); // write to txtfile
    fclose($fh);
} 
```

编辑：这是我的解决方案：

```
if (isset($_POST['register'])) {
   $user  = $_POST['username'];
   $password = $_POST['password'].PHP_EOL;
   $fh = fopen("file.txt","a+");
   fwrite($fh,$user." ".$password); //write to txtfile

   fclose($fh);
} 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-02-28T08:03:55.680

使用[`PHP_EOL`](http://php.net/manual/en/reserved.constants.php)产生`\r\n`或`\n`

```
$data = 'my data' . PHP_EOL . 'my data';
$fp = fopen('my_file', 'a');
fwrite($fp, $data);
fclose($fp); 
```

// 文件输出

```
my data
my data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:01:55.163

*您在用户名和*密码上都附加一个换行符，即输出类似于

```
Sebastian
password
John
hfsjaijn 
```

`fwrite($fh,$user." ".$password."\n");`改为将它们放在一条线上。
或使用[fputcsv()](http://docs.php.net/fputcsv)写入数据并`fgetcsv()`获取数据。这样，您至少可以避免编码问题，例如`$username='Charles, III';`

...即搁置所有关于将纯密码存储在纯文件中并使用 _GET 进行此类操作的错误（改用 _POST）;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-02T20:53:44.240

```
fwrite($handle, "<br>"."\r\n"); 
```

在下面添加这个

```
$password = $_POST['password'].PHP_EOL; 
```

这。.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-26T17:05:48.563

你这样保存怎么样？也许是用户名：密码格式，所以

```
sebastion:password123
anotheruser:password321 
```

然后您可以使用它`list($username,$password) = explode(':',file_get_contents('users.txt'));` 来解析您的数据。

# android - listactivity 中的操作栏不显示操作

> ID：15130290
> 
> 赞同：1
> 
> 时间：2013-02-28T07:56:09.543
> 
> 标签：android, android-actionbar

我有一个`ActionBar`. 当我打电话

```
getMenuInflater().inflate(R.menu.items, menu); 
```

在我的活动中，使用 的菜单`ActionBar`，这是我想要的。但是当我在 a 中尝试这个时`ListActivity`，菜单被添加到经典菜单中（我必须按下菜单按钮......）如何将菜单添加到`ActionBar`我的`ListActivity`？

# pagination - Liferay 搜索容器分页

> ID：15130292
> 
> 赞同：4
> 
> 时间：2013-02-28T07:56:35.310
> 
> 标签：pagination, liferay

我在我的代码中使用了 liferay-ui:search-container。

搜索结果正在正确显示，直到我点击下一步。portlet 正在重新加载，这将我带到 portlet 的第一页，从而破坏了显示的搜索结果。

即使在重新加载 portlet 后，我​​如何保留搜索结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T16:46:40.913

如果 iteratorURL 属性的默认行为不符合您的需要，您可以为其赋值。

在以下示例中，当您在搜索结果表上单击“下一步”时，将使用 param1 和 param2 调用 portlet 的 proccesAction() 方法。

您可以向该方法添加逻辑以保留搜索结果。

```
<%
PortletURL urlPaginator=renderResponse.createActionURL();
urlPaginator.setParameter("param1", value1);
urlPaginator.setParameter("param2",value2);
%>

<liferay-ui:search-container iteratorURL="<%=urlPaginator%>"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:04:50.353

Liferay 搜索容器处理您单击“下一步”和“上一个”时传递的参数。

请注意“下一个”和“上一个”链接的 URL。

例如，URL 将具有以下参数：

> p_p_id=15&p_p_lifecycle=0&p_p_state=maximized&p_p_mode=view&doAsGroupId=10194&refererPlid=12110&_15_struts_action=%2Fjournal%2Fview&_15_tabs1=templates&_15_delta=20&_15_keywords=&_15_advancedSearch=false&_15_andOperator=true&_15_description=&_15_groupIds=10194&_15_name=&_15_structureId=&_15_searchTemplateId=&_15_resetCur=false&cur=2

Liferay 搜索容器使用 delta、cur 参数导航到下一组结果。

有关更多信息，请查看使用搜索容器的 liferay portlet 以及它们如何构建 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-12T09:55:18.710

单击 NEXT（或搜索容器中的任何其他分页器按钮）会导致呈现 portlet。如果 search-container 不在 portlet 的第一页（通常是 view.jsp，在 portlet.xml 中设置），您将被重定向到那里（呈现阶段的默认行为）。

在 Liferay 6.2 中，您可以设置一个 iteratorUrl 并使用参数 mvcPath 指定您当前的 jsp。

```
<liferay-portlet:renderURL portletConfiguration="true" varImpl="iteratorURL">
  <liferay-portlet:param name="mvcPath" value="something.jsp"/>
</liferay-portlet:renderURL>
<liferay-ui:search-container iteratorURL="<%=iteratorURL %>">
  [...]
</liferay-ui:search-container> 
```

# android - 为什么会调用 new Activity 的 onDestroy()？

> ID：15130294
> 
> 赞同：0
> 
> 时间：2013-02-28T07:56:47.383
> 
> 标签：android, android-layout, android-intent, android-lifecycle

我的代码破坏了我当前的活动并开始了一个新活动，如下所示：

```
Intent intent = myActivity.getIntent();

myActivity.finish(); //Destroy my activity

myActivity.startActivity(intent); //Start my new activity 
```

它可以工作，之前的活动被销毁并开始新的活动，但是在启动新活动**之后**，活动的`onDestroy()`方法被调用，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:23:32.377

先开始你的新活动，然后完成旧活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:01:16.660

来自 android[文档](http://developer.android.com/reference/android/app/Activity.html#onDestroy%28%29)：-

> **受保护的无效 onDestroy ()**
> 
> 在销毁活动之前执行任何最终清理。这可能是因为 Activity 正在完成（有人在其上调用 [了 finish() ，或者因为系统正在临时销毁该 Activity 实例以节省空间。您可以使用](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)[isFinishing()](http://developer.android.com/reference/android/app/Activity.html#isFinishing%28%29)方法区分这两种情况。

# python - 如何选择一个可变长度但具有固定开头和结尾的字符串？

> ID：15130295
> 
> 赞同：1
> 
> 时间：2013-02-28T07:56:58.497
> 
> 标签：python, regex, string, python-2.7

我有很多字符串，比如`statt 29,95 â‚¬ nur 26,95â‚¬8) statt 39,95 â‚¬ nur 35,95â‚¬13)`我想选择和删除介于`statt 29,95 â‚¬ nur`.

字符串将始终以开头`statt`和结尾，并且将`nur`在它们之间包含一些可变长度的价格值。我希望将它们从我的数据中删除，并且`nur`只包含之后的价格值。

我研究了正则表达式的可能性，但无法设计一种在我的情况下使用它的方法。请帮助我解决这个问题并原谅我的无知，因为我是编程新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:58:42.820

如果要删除所有出现的

```
"statt 29,95 â‚¬ nur " 
```

在“€,cents”中具有不同的价格，您可以使用这个正则表达式：

```
text = re.sub(r'statt \d+,\d+ â‚¬ nur ', '', text) 
```

另外，请检查您的编码，因为价格后面的字符不会自然出现。

# mysql - 如何更新从另一个表的默认空值列中选择值的表的列？

> ID：15130297
> 
> 赞同：0
> 
> 时间：2013-02-28T07:57:02.780
> 
> 标签：mysql, sql

我有两个表 user 和 user_secondary。我必须获取几列并存储在 user_secondary 中。现在这两个表有一行让我们说 - 用户可以稍后更新然后保存它的性别。但是此条目在 user_secondary 中存储为 null。现在我必须针对我的 user_secondary 表中的用户更新这个性别字段。我该怎么做？

由于性别字段为空值，因此无法定义键约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:25:50.023

```
UPDATE user_secondary
JOIN user ON user.id=user_secondary.id 
SET user_secondary.gender=user.gender 
WHERE user_secondary.gender IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:26:43.923

请问，这两张表是怎么关联的？无论如何，这段代码可以作为一个示例：

```
UPDATE user_secondary
SET user_secondary.GENDER = (SELECT user1.usergender FROM user1 
                             WHERE user1.userid = user_secondary.id)
where user_secondary.GENDER IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:05:54.913

遍历每个用户行，如果该字段为空，则执行一个简单的查询以从 user_secondary 表中获取它。然后使用该数据在用户表上运行更新语句。

# windows-phone-8 - windows phone 应用程序市场的主要磁贴标题

> ID：15130298
> 
> 赞同：0
> 
> 时间：2013-02-28T07:57:06.393
> 
> 标签：windows-phone-8, windows-phone

为了在应用程序中创建**主循环瓦片**，我们是否必须提供“标题”。**我们应该使用 Tile Title 为空**吗？注意：我们已经完成了带有应用程序标题的图像。

2.在Primary Cyclic tile 模板中，我们**找不到Medium size image 选项卡来分配图像**。应用程序本身是否会将大图像分配为中图像？注意：我们分配了大图像（691X336）png图像和小尺寸图像（159X159）。

请同样澄清我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:55:44.280

包括“Tile Title”是完全可选的。如果您的图像包含您的应用程序名称或其他将在标题中重复的内容，那么这是不包含标题的一个很好的理由。这适用于所有瓷砖类型，而不仅仅是循环瓷砖。

使用循环图块模板，您只需提供图像，操作系统将根据每个图块大小调整或剪切图像的大小。

# javascript - 简化多边形 - Clipper 库 Angus Johnson

> ID：15130305
> 
> 赞同：2
> 
> 时间：2013-02-28T07:57:31.677
> 
> 标签：javascript, google-maps-api-3, polygon, clipping

我正在尝试简化在 Google 地图（API v3 Javascript）上绘制的复杂多边形。我的目标是接收一组简单的多边形。问题是我画的有些图形可以分析，有些则不能。

例如：

1) 图 8-vertical - 对于带坐标的多边形 (var areaPolygon)：

```
{42.15093256154524, 24.746017456054687}
{42.149087174176515, 24.740352630615234}
{42.14049586965896, 24.754257202148437}
{42.1333673840616, 24.747648239135742}
{42.13795007405907, 24.73846435546875}
{42.145841707270215, 24.74867820739746}
{42.15093256154524, 24.749107360839843}
{42.15093256154524, 24.746017456054687} 
```

它工作正常 - SimplifyPolygon 返回 2 个简单的多边形

2）Figure 8-horizo​​ntal - 对于带坐标的多边形（var areaPolygon）：

```
{42.145523515284395, 24.744129180908203}
{42.15016895950386, 24.749279022216797}
{42.14603262169405, 24.7646427154541}
{42.14978715502878, 24.769277572631836}
{42.15055076167604, 24.758892059326172}
{42.14393253136682, 24.75193977355957}
{42.141705086714666, 24.747648239135742}
{42.14348704870535, 24.74472999572754}
{42.145523515284395, 24.744129180908203} 
```

*   它不起作用 - SimplifyPolygon 返回相同的复杂多边形

这是我的代码：

```
function analyzePolygon(areaPolygon) {

//areaPolygon is google.maps.Polygon
var subj_polygon = new ClipperLib.Polygon();
var result_polygons = new ClipperLib.Polygons();

//LatLng coordinates to integer coordinates
for(var i = 0; i < areaPolygon.getPath().getArray().length ; i++) {
    subj_polygon.push(new ClipperLib.IntPoint(Math.round(areaPolygon.getPath().getArray()[i].lat()*100000000000000), Math.round(areaPolygon.getPath().getArray()[i].lng()*100000000000000)));
}

var cpr = new ClipperLib.Clipper();

result_polygons = cpr.SimplifyPolygon(subj_polygon, ClipperLib.PolyFillType.pftNonZero);

//for each simple polygon - make a request and populate markers of the objects which are in these bounds
for(var j=0; j < result_polygons.length; j++) {

    var rpStringify = JSON.stringify(eval(result_polygons[j]));
    var rpJSON = JSON.parse(rpStringify);
    var arrayPolygon = [];
    for (var i = 0; i < rpJSON.length; i++) {

        var tempObject = JSON.stringify(eval(rpJSON[i]));
        var objectJSON = JSON.parse(tempObject);
        var tempArr = [2];
        tempArr[0] = objectJSON.X/100000000000000;
        tempArr[1] = objectJSON.Y/100000000000000;
        arrayPolygon[i]= tempArr; 
    }

    loadPinsPolygon(arrayPolygon);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:13:09.410

埃琳娜。

> 它不起作用 - SimplifyPolygon 返回相同的复杂多边形

我不确定您所说的“复杂多边形”是什么意思，但如果您的意思是自相交多边形（请参阅[http://en.wikipedia.org/wiki/Complex_polygon](http://en.wikipedia.org/wiki/Complex_polygon)），那么 SimplifyPolygon 函数确实会删除自我- 与预期相交。你得到的是一个简单的多边形，虽然在前一个交点有两个顶点在相同的坐标。

![简单多边形](../Images/b21cb898766f99cb0ac8beb0a964dac1.png)

但是，如果您真的想要两个离散的多边形，那么您必须修改库中的底层代码（请参阅[此处](http://sourceforge.net/p/polyclipping/discussion/1148419/thread/4e614a38/)的讨论。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T08:53:45.083

如果设置为 true ，则 Clipper 版本 6 也可以在点位于多边形线段上（不穿过线段，而是接触线段）的情况下生成真正简单的多边形`StrictlySimple`。我还没有对此进行测试，但我在这里参考了 Angus Johnson 的评论： [https ://sourceforge.net/p/polyclipping/discussion/1148419/thread/813a62c8/](https://sourceforge.net/p/polyclipping/discussion/1148419/thread/813a62c8/)

下面是这种多边形的一个例子。第五个点接触垂直线段。在这种情况下简化的结果是两个三角形。

![在此处输入图像描述](../Images/384ff69f1c6c3eab827f7971348e59ca.png)

Clipper 6 的 javascript 版本不会在发布后立即发布，但会延迟一些时间。

# php - API 使用情况，将其存储在本地还是每次都发出请求？

> ID：15130306
> 
> 赞同：0
> 
> 时间：2013-02-28T07:57:32.120
> 
> 标签：php, mysql, database, api, facebook-graph-api

我想知道是否有人可以给我一些建议。目前，我们正在构建一个使用大量 API 的应用程序，例如 Flickr、Facebook、Salesforge、Picasa、Twitter、LinkedIn 等。现在我想知道解决数据使用问题的最佳想法是什么。首先，请求所有数据会消耗您的数据容量。此外，该应用程序应该能够同时处理 1000 个用户，因此使用所有这些请求可能会使我们被标记为 DDOS 攻击者：P 所以我的解决方案是将所有内容本地存储在 MySQL 中，并每小时更新关键数据和其他数据一天一次。你们将如何解决这个问题？另一个问题是图像，我们将使用 1000000 张图片。你们会建议在本地托管这些并经常更新它们吗？还是只存储链接并将其发送给用户？我遇到的最后一个问题是 MySQL 如何处理 1000 名用户每秒从复杂表发出数百个请求的情况。例如，如果用户加载相册，数据库必须输出 100 张照片。想象一下，同时为 100 个用户完成这项工作。mysql能够处理这一切吗？

在此先感谢，山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:08:34.307

大多数（如果不是全部）公共 API 都有称为 ETag 的东西。这是数据的指纹，您可以向 API 发出有条件的 GET 请求，例如：

“如果 Etag 与 E33SDF33D234DMD 不同，请给我 ID 为 6123765 的图像！” 这是通过 If-None-Match HTTP 标头完成的。

```
If-None-Match:W/"98F96B877E576EA4E5A278D41217959117663007" 
```

然后 API 将使用图像进行回复，或者它会给您一个 HTTP 302（它在您的缓存中）。如果服务器为您提供缓存的图像已过时，并且服务器还将在 Etag HTTP 响应标头中为您提供新的 Etag：

```
ETag:W/"A4D860491DE0E51EA05F46143A41CC58F7270142" 
```

在您的缓存中，您存储图像 ID、图像数据和 Etag。然后，当您使用 ETag 从 API 请求图像并且服务器以 302 回复时，您可以交付已缓存的图像。如果服务器给你一张图片和一个 200 回复，你用新的图片和服务器给你的图片的 Etag 更新你的缓存。并将图像传输给调用者。

# java - 如何在 Java 中的 String.contains() 方法中使用正则表达式

> ID：15130309
> 
> 赞同：133
> 
> 时间：2013-02-28T07:57:36.020
> 
> 标签：java, regex, string

我想检查一个字符串是否按顺序包含“商店”、“商店”和“产品”这几个词，无论它们之间是什么。

我尝试使用`someString.contains(stores%store%product);`并且也`.contains("stores%store%product");`

我是否需要显式声明一个正则表达式并将其传递给方法，或者我根本不能传递一个正则表达式？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-02-28T08:01:48.983

## 字符串.包含

`String.contains`与字符串、句号一起使用。它不适用于正则表达式。它将检查指定的确切字符串是否出现在当前字符串中。

注意`String.contains`不检查单词边界；它只是检查子字符串。

## 正则表达式解决方案

Regex 比 更强大`String.contains`，因为您可以对关键字强制执行单词边界（除其他外）。这意味着您可以将关键字作为*单词*进行搜索，而不仅仅是*子字符串*。

`String.matches`与以下正则表达式一起使用：

```
"(?s).*\\bstores\\b.*\\bstore\\b.*\\bproduct\\b.*" 
```

RAW 正则表达式（删除在字符串文字中完成的转义 - 这是您在打印出上面的字符串时得到的）：

```
(?s).*\bstores\b.*\bstore\b.*\bproduct\b.* 
```

检查单词边界，`\b`这样您就不会得到`restores store products`. 请注意，这`stores 3store_product`也被拒绝，因为 digit 和`_`被认为是单词的一部分，但我怀疑这种情况是否出现在自然文本中。

由于两边都检查了单词边界，所以上面的正则表达式将搜索确切的单词。换句话说，`stores stores product`将不匹配上面的正则表达式，因为您正在搜索`store`没有`s`.

`.`通常匹配**除** [多个换行符之外的任何字符](https://stackoverflow.com/questions/14648743/whats-the-difference-between-these-regex/14648811#14648811)。`(?s)`一开始`.`匹配任何字符，无一例外（感谢 Tim Pietzcker 指出这一点）。

* * *

## 回答 #2

> 赞同：125
> 
> 时间：2014-06-03T06:45:27.390

`matcher.find()`做你需要的。例子：

```
Pattern.compile("stores.*store.*product").matcher(someString).find(); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-02-29T11:28:08.677

您可以简单地使用`matches`String 类的方法。

```
boolean result = someString.matches("stores.*store.*product.*"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-16T21:11:02.617

如果你想检查一个字符串是否包含子字符串或不使用正则表达式，你可以做的最接近的是使用 find() -

```
 private static final validPattern =   "\\bstores\\b.*\\bstore\\b.*\\bproduct\\b"
    Pattern pattern = Pattern.compile(validPattern);
    Matcher matcher = pattern.matcher(inputString);
    System.out.print(matcher.find()); // should print true or false. 
```

请注意matches() 和find() 之间的区别，如果整个字符串与给定模式匹配，matches() 将返回true。find() 尝试查找与给定输入字符串中的模式匹配的子字符串。此外，通过使用 find() 您不必在正则表达式模式的开头添加额外的匹配，例如 - (?s).* 和 .* 。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-01T23:00:06.450

```
public static void main(String[] args) {
    String test = "something hear - to - find some to or tows";
    System.out.println("1.result: " + contains("- to -( \\w+) som", test, null));
    System.out.println("2.result: " + contains("- to -( \\w+) som", test, 5));
}
static boolean contains(String pattern, String text, Integer fromIndex){
    if(fromIndex != null && fromIndex < text.length())
        return Pattern.compile(pattern).matcher(text).find();

    return Pattern.compile(pattern).matcher(text).find();
} 
```

1.结果：真

2.结果：真

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-12-12T23:35:56.763

从**Java 11**开始，可以使用`Pattern#asMatchPredicate`which 返回`Predicate<String>`.

```
String string = "stores%store%product";
String regex = "stores.*store.*product.*";
Predicate<String> matchesRegex = Pattern.compile(regex).asMatchPredicate();

boolean match = matchesRegex.test(string);                   // true 
```

该方法可以与其他 String 谓词*链接*，这是该方法的主要优点，只要`Predicate`提供`and`，`or`和`negate`方法。

```
String string = "stores$store$product";
String regex = "stores.*store.*product.*";

Predicate<String> matchesRegex = Pattern.compile(regex).asMatchPredicate();
Predicate<String> hasLength = s -> s.length() > 20;

boolean match = hasLength.and(matchesRegex).test(string);    // false 
```

# javascript - HighCharts：工具提示上可见的标签

> ID：15130311
> 
> 赞同：18
> 
> 时间：2013-02-28T07:57:44.300
> 
> 标签：javascript, jquery, highcharts, tooltip, labels

我图表上的标签显示在工具提示上方，看起来不太好。我试着玩`zIndex`，但没有结果。如何使工具提示不透明？这是我的 jsFiddle： http: [//www.jsfiddle.net/4scfH/3/](http://www.jsfiddle.net/4scfH/3/)

```
$(function() {
  var chart;
  $(document).ready(function() {
    chart = new Highcharts.Chart({
      chart: {
        renderTo: 'graf1',
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false
      },

      title: {
        margin: 40,
        text: 'Podíl všech potřeb'
      },
      tooltip: {
        //pointFormat: '<b>{point.y} Kč [{point.percentage}%]</b>',
        percentageDecimals: 2,
        backgroundColor: "rgba(255,255,255,1)",
        formatter: function() {
          return this.point.name + '<br />' + '<b>' + Highcharts.numberFormat(this.y).replace(",", " ") + ' Kč [' + Highcharts.numberFormat(this.percentage, 2) + '%]</b>';
        }
      },
      plotOptions: {
        pie: {
          allowPointSelect: true,
          cursor: 'pointer',
          dataLabels: {
            enabled: true,
            color: '#000000',
            connectorWidth: 2,
            useHTML: true,
            formatter: function() {
              return '<span style="color:' + this.point.color + '"><b>' + this.point.name + '</b></span>';
            }
          }
        }
      },
      series: [{
        type: 'pie',
        name: 'Potřeba',
        data: [
          ['Firefox', 45.0],
          ['IE', 26.8], {
            name: 'Chrome',
            y: 12.8,
            sliced: true,
            selected: true
          },
          ['Safari', 8.5],
          ['Opera', 6.2],
          ['Others', 0.7]
        ]
      }]
    });
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<div id="graf1" style="width: 400px; height: 250px; float:left"></div>
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-28T10:00:36.243

您可以[`useHTML`](http://api.highcharts.com/highcharts#series<pie>.dataLabels.useHTML)通过 css 设置和定义自己的工具提示：

[http://jsfiddle.net/4scfH/4/](http://jsfiddle.net/4scfH/4/)

```
tooltip: {
    borderWidth: 0,
    backgroundColor: "rgba(255,255,255,0)",
    borderRadius: 0,
    shadow: false,
    useHTML: true,
    percentageDecimals: 2,
    formatter: function () {
        return '<div class="tooltip">' + this.point.name + '<br />' + '<b>' + Highcharts.numberFormat(this.y).replace(",", " ") + ' Kč [' + Highcharts.numberFormat(this.percentage, 2) + '%]</b></div>';
    }
}, 
```

CSS

```
.label {
    z-index: 1 !important;
}

.highcharts-tooltip span {
    background-color: white;
    border:1 px solid green;
    opacity: 1;
    z-index: 9999 !important;
}

.tooltip {
    padding: 5px;
} 
```

解释：当你设置`useHTML`为true时，它会在HTML层上将工具提示文本显示为HTML，但仍会在highcharts中为方框和箭头绘制一个SVG形状显示SVG。您最终会得到看起来像是绘制在工具提示之上的数据标签，但工具提示文本本身位于数据标签之上。上面的配置选项有效地隐藏了 SVG 工具提示的形状，并纯粹使用 HTML/CSS 构建和设置工具提示的样式。唯一的缺点是您丢失了小“箭头”指针。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-08T12:01:37.263

如果您将 tooltip.backgroundColor 设置为“rgba(255,255,255,1)”，您将获得“无透明度”的工具提示

您必须在饼图设置中删除 useHTML: true 。

你的 jsfiddle 的分支：http: [//jsfiddle.net/kairs/Z3UZ8/1/](http://jsfiddle.net/kairs/Z3UZ8/1/)

```
tooltip: {
  backgroundColor: "rgba(255,255,255,1)"
} 
```

[highchart 上的文档](http://api.highcharts.com/highcharts#tooltip.backgroundColor)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-16T11:51:34.457

我有同样的问题。标签在工具提示上可见。删除标签的 useHTML=true 对我有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-29T19:53:26.347

我有同样的问题。我的解决方案。工具提示 - useHTML = true。工具提示 - 格式化程序 = 带有一个 div 容器的 HTML 代码。这里负值的边距在 CSS 中很重要。

```
tooltip: {
    backgroundColor: "rgba(255,255,255,1)",
    useHTML: true,
    formatter: function() {
        var html = [];
        html.push('<b>Correlation to ' + this.point.p + '</b><br>');
        if (null != this.point.associatedPoints 
                && typeof this.point.associatedPoints != 'undefined' 
                && this.point.associatedPoints.length > 0) {
            $.each(this.point.associatedPoints, function(i, associatedPoint) {
                html.push('Responses: ' + associatedPoint.nFormatted);
            });
        }
        return '<div class="tooltip-body">' + html.join('') + '</div>';
    } 
```

CSS：

```
.highcharts-tooltip span {
    z-index: 9999 !important;
    top:2px !important;
    left:2px !important;
}
.highcharts-tooltip span .tooltip-body{
    background-color:white;
    padding:6px; 
    z-index:9999 !important;
    margin-bottom:-14px;
    margin-right:-14px;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-11T06:40:31.763

如果你不想在 useHTML 中遇到问题，这里是在 svg 中解决问题的方法：

```
 Highcharts.wrap(Highcharts.Chart.prototype, 'redraw', function(proceed, animation) {
  proceed.call(this, animation);
  try {
   if (this.legend.options.floating) {
    var z = this.legend.group.element, zzz = z.parentNode;
    zzz.removeChild(z);
    zzz.appendChild(z); //zindex in svg is determined by element order
   }
  } catch(e) {

  } 
 }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-11T04:51:07.500

我仍然对一些解决方案有疑问，在 .tooltip 上设置 z-index: 999 由于各种容器 div 没有任何效果。但是，我发现设置这个效果很好（当图例和工具提示是 HTML 时）。也不需要设置其他 z-indexes：

`.highcharts-legend { z-index: -1; }`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-08T20:04:16.483

用于 html 格式的 Highchart 工具提示

高图配置

```
tooltip: {
    borderWidth: 0,
    backgroundColor: "rgba(255,255,255,0)",
    shadow: false,
    useHTML: true
    ........
}, 
```

CSS：

```
.highcharts-tooltip>span {
    background-color: #fff;
    border: 1px solid #172F8F;
    border-radius: 5px;
    opacity: 1;
    z-index: 9999!important;
    padding: .8em;
    left: 0!important;
    top: 0!important;
} 
```

[![截屏](../Images/dbce98808680b076559404f8bab7e036.png)](https://i.stack.imgur.com/RjSYu.jpg)

# javascript - 仅将 Twitter Bootstrap 用于网站的一个子集

> ID：15130314
> 
> 赞同：1
> 
> 时间：2013-02-28T07:58:15.277
> 
> 标签：javascript, css, twitter-bootstrap

在使用 Twitter Bootstrap 或 jQuery UI Bootstrap 构建网站的子集/组件时，是否有任何注意事项？我是否需要采取任何步骤来确保引导程序不会影响引导组件范围之外的网站部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:07:21.433

使用 CSS 闭包。

通过限制所需 css 的视图来限制部件的 twitter 引导

例如：

```
#divPart .btn {

}

#divPart .btn-large {

}

#divPart .table {

} 
```

我希望你明白。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:24:03.650

Bootstrap 和 Jquery ui bootstrap 不能一起锻炼。会有很多 css 和 javscript 冲突。因此，要将它们一起使用，您必须通过从 jquery ui bootstrap 取消选择要使用的那些组件来使用自定义的 bootstrap 副本。

除此之外，如果您想在现有项目或正在进行的项目中使用引导程序的某些部分。前往**自定义引导**部分[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

并选择您需要的东西并下载要使用的副本。此外，在命名您的自定义样式时，使用与 bootstrap 中已定义的名称不同的名称。

# sql - 如何在 SQL / PLSQL 中将带逗号的字符串转换为枚举

> ID：15130318
> 
> 赞同：2
> 
> 时间：2013-02-28T07:58:28.190
> 
> 标签：sql, oracle, plsql

我有一个有趣的问题。

我怎样才能`'1,4'`变成 enum`1,4`以便能够以这样的表达式传递它：

```
SELECT DICT_ID AS ITEM_ID FROM DICTIONARY WHERE SERIAL_NUMBER IN (#ARGUMENT#) 
```

`#ARGUMENT#`在哪里`'1,4'`。

简而言之，我想让这个查询像我们传递的不是字符串而是数字一样工作。

为什么我传递 '1,4' 而不是传递数字 - 不是我在查询中传递这个字符串，而是一些应用程序。

我可以编辑查询，但不能编辑#ARGUMENT#

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:18:40.830

就像是：

```
select dict_id as item_id
from dictionary d
where serial_number in  (
     select to_number(regexp_substr ('1,2,3,4','[^,]+',1,level)) as id
     from dual
     connect by regexp_substr ('1,2,3,4','[^,]+',1,level) is not null
) 
```

注意：我前段时间在 SO 上发现了这个。但是我再也找不到链接来感谢原作者了。如果有人知道，我很乐意将其替换为原始链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:14:08.923

```
SELECT 
      DICT_ID AS ITEM_ID 
   FROM 
      DICTIONARY 
   WHERE 
      INSTR(','||#ARGUMENT#||',', ','||SERIAL_NUMBER||',') > 0 
```

# go - 有没有一种方法可以用 go 语言生成 UUID

> ID：15130321
> 
> 赞同：146
> 
> 时间：2013-02-28T07:58:39.390
> 
> 标签：go, uuid

我的代码如下所示：

```
u := make([]byte, 16)
_, err := rand.Read(u)
if err != nil {
    return
}

u[8] = (u[8] | 0x80) & 0xBF // what does this do?
u[6] = (u[6] | 0x40) & 0x4F // what does this do?

return hex.EncodeToString(u) 
```

它返回一个长度为 32 的字符串，但我认为它不是有效的 UUID。如果是真正的 UUID，为什么是 UUID，修改`u[8]`and的值的代码的目的是什么`u[6]`。

有没有更好的方法来生成 UUID？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2017-11-22T11:49:29.770

谷歌有一个官方实现：[https ://github.com/google/uuid](https://github.com/google/uuid)

生成版本 4 UUID 的工作方式如下：

```
package main

import (
    "fmt"
    "github.com/google/uuid"
)

func main() {
    id := uuid.New()
    fmt.Println(id.String())
} 
```

在这里试试：https: [//play.golang.org/p/6YPi1djUMj9](https://play.golang.org/p/6YPi1djUMj9)

* * *

## 回答 #2

> 赞同：108
> 
> 时间：2013-02-28T11:33:48.053

您可以使用[go-uuid](https://github.com/nu7hatch/gouuid)库生成 UUID。这可以安装：

```
go get github.com/nu7hatch/gouuid 
```

您可以使用以下命令生成随机（版本 4）UUID：

```
import "github.com/nu7hatch/gouuid"

...

u, err := uuid.NewV4() 
```

返回的`UUID`类型是一个 16 字节的数组，因此您可以轻松检索二进制值。它还通过其`String()`方法提供标准的十六进制字符串表示。

您的代码看起来也将生成有效的版本 4 UUID：您在最后执行的按位操作设置 UUID 的版本和变体字段以正确地[将其识别为版本 4](http://en.wikipedia.org/wiki/UUID#Version_4_.28random.29)。这样做是为了将随机 UUID 与通过其他算法生成的 UUID 区分开来（例如，基于您的 MAC 地址和时间的版本 1 UUID）。

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2014-02-17T07:03:40.113

该`go-uuid`库不符合 RFC4122。变量位设置不正确。社区成员多次尝试修复此问题，但未接受修复请求。

您可以使用我基于该`go-uuid`库重写的 Go uuid 库生成 UUID。有几个修复和改进。这可以安装：

```
go get github.com/twinj/uuid 
```

您可以使用以下命令生成随机（版本 4）UUID：

```
import "github.com/twinj/uuid"

u := uuid.NewV4() 
```

返回的 UUID 类型是一个接口，底层类型是一个数组。

该库还生成 v1 UUID 并正确生成 v3 和 5 UUID。有几种新方法可以帮助打印和格式化，还有新的通用方法可以根据现有数据创建 UUID。

* * *

## 回答 #4

> 赞同：60
> 
> 时间：2014-09-09T03:12:46.023

“crypto/rand”是用于随机字节生成的跨平台 pkg

```
package main

import (
    "crypto/rand"
    "fmt"
)

// Note - NOT RFC4122 compliant
func pseudo_uuid() (uuid string) {

    b := make([]byte, 16)
    _, err := rand.Read(b)
    if err != nil {
        fmt.Println("Error: ", err)
        return
    }

    uuid = fmt.Sprintf("%X-%X-%X-%X-%X", b[0:4], b[4:6], b[6:8], b[8:10], b[10:])

    return
} 
```

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2013-02-28T08:36:55.020

```
u[8] = (u[8] | 0x80) & 0xBF // what's the purpose ?
u[6] = (u[6] | 0x40) & 0x4F // what's the purpose ? 
```

这些行将字节 6 和 8 的值限制在特定范围内。`rand.Read`返回 range 中的随机字节`0-255`，这不是 UUID 的所有有效值。据我所知，这应该对切片中的所有值进行。

如果你在 linux 上，你也可以调用`/usr/bin/uuidgen`.

```
package main

import (
    "fmt"
    "log"
    "os/exec"
)

func main() {
    out, err := exec.Command("uuidgen").Output()
    if err != nil {
        log.Fatal(err)
    }
    fmt.Printf("%s", out)
} 
```

产生：

```
$ go run uuid.go 
dc9076e9-2fda-4019-bd2c-900a8284b9c4 
```

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2016-04-25T19:14:13.240

[gofrs/uuid](https://github.com/gofrs/uuid)是 satori/go.uuid 的替代品[，](https://github.com/satori/go.uuid)它是[Go 的星号最多的 UUID 包](https://libs.garden/go/search?q=uuid&sort=popular)。它支持 UUID 版本 1-5，并且符合 RFC 4122 和 DCE 1.1。

```
import "github.com/gofrs/uuid"

// Create a Version 4 UUID, panicking on error
u := uuid.Must(uuid.NewV4()) 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2013-02-28T08:38:32.973

来自拉斯考克斯的[帖子](https://groups.google.com/d/msg/golang-nuts/d0nF_k4dSx4/rPGgfXv6QCoJ)：

> 没有官方图书馆。忽略错误检查，这似乎可以正常工作：

```
f, _ := os.Open("/dev/urandom")
b := make([]byte, 16)
f.Read(b)
f.Close()
uuid := fmt.Sprintf("%x-%x-%x-%x-%x", b[0:4], b[4:6], b[6:8], b[8:10], b[10:]) 
```

注意：在 Go 1 之前的原始版本中，第一行是：

```
f, _ := os.Open("/dev/urandom", os.O_RDONLY, 0) 
```

[它在这里](http://play.golang.org/p/aD_PZ4oibe)编译并执行，只`/dev/urandom`在操场上返回全零。在本地应该可以正常工作。

在同一个线程中，还发现了一些其他方法/参考/包。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2015-01-06T05:57:13.230

作为 uuid 规范的一部分，如果您从随机生成一个 uuid，它必须在第 13 个字符包含“4”，在第 17 个字符（[源](http://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_.28random.29)）中包含“8”、“9”、“a”或“b”。

```
// this makes sure that the 13th character is "4"
u[6] = (u[6] | 0x40) & 0x4F
// this makes sure that the 17th is "8", "9", "a", or "b"
u[8] = (u[8] | 0x80) & 0xBF 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2017-11-08T03:59:35.743

在 Linux 上，您可以阅读`/proc/sys/kernel/random/uuid`：

```
package main

import "io/ioutil"
import "fmt"

func main() {
    u, _ := ioutil.ReadFile("/proc/sys/kernel/random/uuid")
    fmt.Println(string(u))
} 
```

没有外部依赖！

```
$ go run uuid.go 
3ee995e3-0c96-4e30-ac1e-f7f04fd03e44 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-06-15T00:00:39.450

gorand包有一个 UUID 方法，[它](https://github.com/leonelquinteros/gorand)以规范的字符串表示形式（“xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx”）返回版本 4（随机生成的）UUID，并且它符合 RFC 4122。

它还使用 crypto/rand 包来确保在 Go 支持的所有平台上最安全地生成 UUID。

```
import "github.com/leonelquinteros/gorand"

func main() {
    uuid, err := gorand.UUID()
    if err != nil {
        panic(err.Error())
    }

    println(uuid)
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-02-28T09:22:57.227

对于 Windows，我最近这样做了：

```
// +build windows

package main

import (
    "syscall"
    "unsafe"
)

var (
    modrpcrt4 = syscall.NewLazyDLL("rpcrt4.dll")
    procUuidCreate = modrpcrt4.NewProc("UuidCreate")
)

const (
    RPC_S_OK = 0
)

func NewUuid() ([]byte, error) {
    var uuid [16]byte
    rc, _, e := syscall.Syscall(procUuidCreate.Addr(), 1,
             uintptr(unsafe.Pointer(&uuid[0])), 0, 0)
    if int(rc) != RPC_S_OK {
        if e != 0 {
            return nil, error(e)
        } else {
            return nil, syscall.EINVAL
        }
    }
    return uuid[:], nil
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-08-14T18:10:39.003

这个库是我们 uuid 生成和解析的标准：

[https://github.com/pborman/uuid](https://github.com/pborman/uuid)

# ios - UIWebView 和文件 Mime 类型

> ID：15130325
> 
> 赞同：2
> 
> 时间：2013-02-28T07:58:52.963
> 
> 标签：ios, ios6

我有一个`UIWebView`从需要身份验证的 Web 服务器下载文件（PDF、Word、Excel）。为此，我已经`NSMutableData`按照 Apple 的建议处理了身份验证并填充了一个对象。

将数据加载到`UIWebView`我不想对 Mime 类型进行硬编码时，关于如何避免这种情况的任何想法？

```
[_webView loadData:data MimeType: @"application/msword" textEncodingName: @"UTF-8" baseURL:[NSURL URLWithString: @""]]; 
```

尝试了以下但总是返回“text/html”：

```
- (void)connection:(NSURLConnection *)connection didRecieveResponse:(NSURLResponse *)response {
    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) response;
    NSString *mimeType = [httpResponse MIMEType];
    NSLog(@"MIMETYPE: %@",mimeType);
} 
```

响应标头在这里：

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Content-Length: 50176
Content-Type: application/msword
Expires: -1
Server: Microsoft-IIS/7.5
Content-Disposition: attachment; filename=test.doc
X-AspNet-Version: 4.0.30319
Persistent-Auth: true
X-Powered-By: ASP.NET 
```

**编辑：** 标题发生了一些奇怪的事情。

我最初发布的标头已在 Chrome 和 Fiddler2 中验证，但 NSURLConnection 实际上正在接收：

> "Content-Type" = "text/html;charset=us-ascii,application/msword";
> "内容长度" = "341, 79360";

以下代码段用于确认这一点：

```
- (void)connection:(NSURLConnection *)connection didRecieveResponse:(NSURLResponse *)response {

    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse*)response;
    if ([response respondsToSelector:@selector(allHeaderFields)]) {
        NSDictionary *dictionary = [httpResponse allHeaderFields];
    NSLog([dictionary description]);
    }
} 
```

知道为什么它会收到这个无效的标题，我很难过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-08T23:16:37.743

我避免 mime 类型的方法：在 connectionDidFinishLoading

```
[webView loadHTMLString:[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding] baseURL:[[connection currentRequest] URL]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:28:04.383

如果它对其他人有帮助，我无法找到关于 IIS 生成该特定标头的原因的答案，因此必须为标头编写一个小型解析器，以便在应用程序/标头存在的情况下忽略 text/html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:35:30.260

使用

```
[[httpReponse allHeaderFields] objectForKey:@"Content-Type"] isEqualToString:@"application/msword"] 
```

检查响应头。

可能是您错过了请求期间发生多次重定向的事实。

# android - 按下列表视图项时用动画启动活动

> ID：15130326
> 
> 赞同：1
> 
> 时间：2013-02-28T07:58:53.400
> 
> 标签：android, listview, animation, android-activity

我正在尝试使用 activityOptions 启动一个活动，以便在从`listview`活动中选择项目时为过渡设置动画。唯一`startActivity(intent)`可用的方法。（从活动方法调用时，尝试调用`startActivity(intent,bundle)`会产生编译时错误。`onItemClick``listview`

如果选择了来自 listview 的列表项，我如何在启动 activtiy 时生成过渡效果？

谢谢。

我的错。我没有将 activityOption 转换为 bundle。现在好啦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:38:33.173

对我来说，我使用 overridePendingTransition(R.anim.slide, R.anim.slide2); 像这样的东西

# ruby-on-rails - rails 在页面加载时生成随机数

> ID：15130328
> 
> 赞同：0
> 
> 时间：2013-02-28T07:58:54.973
> 
> 标签：ruby-on-rails

我正在用 Ruby on Rails 编写一个猜数游戏，我想知道当页面完全加载时如何执行一段代码（在本例中是生成一个随机数）。有没有办法做到这一点？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T08:01:34.987

```
rand(9)       # this generator a number between 0 to 8
rand(0 .. 9)  # this generator a number between 0 to 9
rand(1 .. 50) # this generator a number between 1 to 50
#rand(m .. n) # m is the start of generator number range, n is the end of generator number range 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:06:56.710

尝试：

```
Array.new(5){rand 10}.join 
```

**优势：**

上述代码将生成 5 位随机数。您可以`5`根据需要的位数替换为任何数字。

更多来自[在 Ruby 中生成随机数](http://ruby.about.com/od/newinruby191/ss/Generating-Random-Numbers-In-Ruby.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-12T14:27:05.213

使用“ **SafeRandom** ”Gem [GithubLink](https://github.com/rpatil/safe_random)

它将提供为 Rails 2、Rails 3、Rails 4、Rails 5 兼容生成随机值的最简单方法。

这里可以使用 strong_string 方法生成字符串的强组合（即字母（大写、小写）、数字和符号的组合

强字符串：最小数字应大于 5，否则默认为 8 个字符串。

```
require 'safe_random'
puts SafeRandom.strong_string       # => 4skgSy93zaCUZZCoF9WiJF4z3IDCGk%Y
puts SafeRandom.strong_string(3)    # => P4eUbcK%
puts SafeRandom.strong_string(5)    # => 5$Rkdo 
```

# c# - 将对象存储在隔离存储中

> ID：15130331
> 
> 赞同：3
> 
> 时间：2013-02-28T07:59:05.757
> 
> 标签：c#, windows-phone-7, windows-phone-8, isolatedstorage

我正在尝试将对象存储在 Windows Phone 7.1 的独立存储设置中

班级是 -

```
public class container
    {
        public int index { get; set; }
        public int left { get; set; }
        public int top { get; set; }
        public int[] ar { get; set; }
        public int count { get; set; }
        public bool mark { get; set; }
        public int num_e { get; set; }
        public int o { get; set; }
        public bool mine { get; set; }
// some functions
    } 
```

将对象添加到隔离存储后，执行**.save()**语句时，会产生以下错误

> “System.Runtime.Serialization.ni.dll 中发生了‘System.Runtime.Serialization.InvalidDataContractException’类型的异常，但未在用户代码中处理”

你能告诉它是如何工作的吗？

在这方面的任何帮助将不胜感激。

编辑 :: 这就是我的存储方式。

```
private void save_Click(object sender, RoutedEventArgs e)
    {

        if (save_g.Contains("n"))
        {
            save_g["n"] = cons.n;       //cons is a class and n is a static int
        }
        else
            save_g.Add("n", cons.n);

        if (save_g.Contains("n_boxes"))
        {
            save_g["n_boxes"] = cons.n_boxes;   //n_boxes is a static int
        }
        else
            save_g.Add("n_boxes", cons.n_boxes);

        save_g.Save();

        string t = "";
        container c;                   //class definition as above 

        for (int i = 0; i < cons.n; i++)
        {
            t = Convert.ToString(i);
            c=new container(edge[i]);        //edge is an object of other class

            if (save_g.Contains(t))
            {
                save_g[t] = c;
            }
            else
                save_g.Add(t, c);
            save_g.Save();                  ****Here error occurs****
        }

        for (int i = 0; i < cons.n_boxes; i++)
        {
            t = Convert.ToString(i + cons.n);
            c = new container(brick[i]);    //brick is an object of other class

            if (save_g.Contains(t))
            {
                save_g[t] = c;
            }
            else
                save_g.Add(t, c);
            save_g.Save();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T08:06:44.930

将 [DataContract] 属性放在类上，将 [DataMember] 属性放在要序列化的属性上。通常没有这些序列化应该可以工作，但我怀疑你的类中有一些类型不能序列化，你没有向我们展示这些。还要确保您有一个没有参数的公共构造函数（或没有构造函数）。

.NET 约定属性中的 PS 是 PascalCase，类的名称也是 PascalCase。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T07:30:13.093

我尝试了有承包商，但它不起作用@Stilgar你能指导我们如何在你想要序列化的属性上放置一个 [DataContract] 属性和 [DataMember] 属性

我将 [DataContract] 放在类名上方，将 [DataMember] 放在 calss 具有 2 个 arttributes 字符串的属性上方

# printing - 如何安装 pscript/unidrv 渲染插件？DDK/WDK 打印/oemdll 样本表现得很奇怪

> ID：15130332
> 
> 赞同：2
> 
> 时间：2013-02-28T07:59:06.737
> 
> 标签：printing, drivers, wdk, inf

我正在尝试获得一些[pscript/unidrv 渲染插件](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551780%28v=vs.85%29.aspx)，但提供的 DDK 示例无法安装在我曾经拥有的任何可能的 DDK/build/target 系统组合上。

报告的消息是 WinXP x64 的“指定端口未知”和 Win7、Win8 的“未找到元素”（Win7 setupapi 日志的一部分，带有显着的**“dvi：此类设备不允许安装 NULL 驱动程序！** ”错误可以在[这里](http://everfall.com/paste/id.php?c8s0rbt8xax6)找到）。

到目前为止，我已经尝试过：

*   更改 .rc 文件以匹配 FILESUBTYPE ( `VFT2_DRV_VERSIONED_PRINTER`) 和 FILETYPE ( `VFT_DRV`)
*   使用测试证书签名，打开调试模式
*   `"product 1" = product_target,,product_1`在 .inf ( )中的产品名称中添加空的 hw-id 后跟普通的 compatible-id
*   检查 .inf（.ini、.gpd、.dll）中引用的所有文件是否都已到位
*   删除对任何文件的所有附加引用，不包括我想要*的 oemps*目标
*   运行 chkinf 测试并修复所有警告
*   搞乱 UAC，文件位置，做其他印加舞。

* * *

还应该做些什么才能将 pscript 渲染插件安装到系统中？

*它们是否打算作为普通设备安装在打印机驱动程序之外？MSDN 对此真的不清楚，但是，从 .inf 在 DDK 源中的存在猜测，我想有一种方法可以“按原样”安装它们，我只是还没有找到。*

* * *

[UPD：在 WDK8（“ http://code.msdn.microsoft.com/windowshardware/OEMDLL-Samples-71364d95](http://code.msdn.microsoft.com/windowshardware/OEMDLL-Samples-71364d95) ”）中找到了这些样本的描述，其中提到了主文章中没有的内容（“自定义 Microsoft 的打印机驱动程序”) - **“BITMAP、OEMPS、OEMUI、OEMUNI、OEMPREAN、CUSTHLP、SyncSet、ThemeUI、PSUIRep 和水印样本不影响打印机输出”**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:59:29.580

您引用的有关 BITMAP、OEMPS 等的引用仅表示这些示例仅显示驱动程序插件的结构，不产生任何输出。但这并不意味着他们不能。如果您想构建驱动程序插件，我建议您从其中一个示例开始，然后向其中添加代码以执行您想要的操作。

安装打印驱动程序可能很棘手，因为“添加打印机向导”提供的错误报告***非常差。***它给你的只是一个 Win32 错误代码。例如，如果缺少任何必需的文件，它只会显示错误代码 0x2，这意味着缺少文件。但是，它不会告诉您缺少***哪个***文件，这可能会非常令人沮丧。但请放心，这些样本可以安装。通常，您需要将 .inf 文件中列出的所有文件与 .inf 文件放在同一目录中。在大多数情况下，这将是一个或两个 DLL，加上一个 .ini 和一个 .gpd 或 .ppd 文件。例如，我刚刚构建并安装了通用文本驱动程序。[我还在这里](http://www.installsetupconfig.com/win32programming/windowsdriverkitswdk15_10.html)找到了关于安装该驱动程序的好教程。

因此，我建议您从通用文本示例开始。构建和安装它后，请处理 pscript 驱动程序。不要更改他们提供的 .inf 文件，也不要摆弄 .rc 文件或证书；你不需要证书。

[使用添加打印机向导的替代方法是使用AddPrinterDriver](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183346%28v=vs.85%29.aspx)和[AddPrinter](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183343%28v=vs.85%29.aspx)函数直接安装驱动程序。这更复杂，但我更喜欢它，因为它给了你更多的控制权，你可以准确地看到发生了什么错误以及原因。不需要 .inf 文件。以下是安装驱动程序并使用该驱动程序创建打印机的工作代码片段。为清楚起见，已删除文件的错误检查和复制....

```
char driverPath[MAX_PATH];
DWORD needed;
GetPrinterDriverDirectory(0, 0, 1, (UCHAR *)driverPath, sizeof(driverPath), &needed);

// **copy all necessary files to driverPath here**

// format all file names with full paths
char driverSrc[MAX_PATH];
sprintf_s(driverSrc, "%s\\%s", driverPath, psDriverFile);
char driverUISrc[MAX_PATH];
sprintf_s(driverUISrc, "%s\\%s", driverPath, psUIFile);
char driverPPDSrc[MAX_PATH];
sprintf_s(driverPPDSrc, "%s\\%s", driverPath, psPPDFile);
char helpFileSrc[MAX_PATH];
sprintf_s(helpFileSrc, "%s\\%s", driverPath, psHelpFile);

// initialize the DRIVER_INFO struct
DRIVER_INFO_3 di;
memset(&di, 0, sizeof(di));
di.cVersion = 3;
di.pEnvironment = "Windows x64";
di.pDriverPath = driverPath;
di.pName = "MyDriver";
di.pDefaultDataType = "RAW";
di.pDataFile = driverPPDSrc;
di.pConfigFile = driverUISrc;
di.pHelpFile = helpFileSrc;
di.pDependentFiles = pszDependentFiles;

// add the driver
AddPrinterDriver(0, 3, (LPBYTE)&di);

// create the printer
PRINTER_INFO_2 pi;
memset(&pi, 0, sizeof(pi));
pi.pPrinterName = (LPSTR)pPrinterNames->at(i);
pi.pDriverName = "MyDriver";
pi.pPrintProcessor = "winprint";
pi.Attributes = PRINTER_ATTRIBUTE_LOCAL;
pi.pDatatype = "RAW";
pi.pPortName = "LPT1:";
HANDLE hPrinter = AddPrinter(0, 2, (LPBYTE)&pi); 
```

# tomcat - 如何使用无效的 ssl 证书通过 Exchange 2007 SMTP 中继从 Tomcat Web 应用程序发送电子邮件？

> ID：15130334
> 
> 赞同：0
> 
> 时间：2013-02-28T07:59:08.513
> 
> 标签：tomcat, ssl-certificate, classloader, jakarta-mail, socketfactory

我要解决的问题是通过 Exchange 2007 SMTP 中继从我的 tomcat Web 应用程序发送电子邮件。

交换服务器没有安装有效的 SSL 证书，所以我试图推送我自己的 ssl 套接字工厂，它也接受无效的证书。

在堆栈溢出的帮助下，我找到了一个**可以在简单测试程序中运行的解决方案，但在从正在运行的 Web 应用程序中执行时却不行**（类加载问题）。

我目前的解释是 SocketFetcher 类的类加载器无法看到我的 webapp 的类，对吗？

我该如何解决这个限制？

只是为了好玩，我把我的工厂放在一个单独的 jar 中，并将它放在 tomcat lib 文件夹中，但仍然找不到。

我得到这个例外：

```
Caused by: java.lang.ClassNotFoundException: com.mypackage.MyTrustAllSslSocketFactory
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at javax.net.ssl.SSLSocketFactory.getDefault(SSLSocketFactory.java:104)
    at com.sun.mail.util.SocketFetcher.startTLS(SocketFetcher.java:247)
    ... 25 more 
```

我这样推工厂：

```
Security.setProperty("ssl.SocketFactory.provider", MyTrustAllSslSocketFactory.class.getName()); 
```

我的自定义套接字工厂：

```
public class MyTrustAllSslSocketFactory extends SSLSocketFactory
{  
  private SSLSocketFactory    m_sslSocketFactory;

  public MyTrustAllSslSocketFactory() throws Exception
  {
    SSLContext sslContext = SSLContext.getInstance("TLS");
    sslContext.init(null, new TrustManager[] { new TrustAllX509Manager() }, new SecureRandom());
    m_sslSocketFactory = sslContext.getSocketFactory();
  }

  @Override
  public Socket createSocket(Socket s, String host, int port, boolean autoClose) throws IOException
  {
    return m_sslSocketFactory.createSocket(s, host, port, autoClose);
  }

  @Override
  public String[] getDefaultCipherSuites()
  {
    return m_sslSocketFactory.getDefaultCipherSuites();
  }

  @Override
  public String[] getSupportedCipherSuites()
  {
    return m_sslSocketFactory.getSupportedCipherSuites();
  }

  @Override
  public Socket createSocket(String host, int port) throws IOException, UnknownHostException
  {
    return m_sslSocketFactory.createSocket(host, port);
  }

  @Override
  public Socket createSocket(InetAddress host, int port) throws IOException
  {
    return m_sslSocketFactory.createSocket(host, port);
  }

  @Override
  public Socket createSocket(String host, int port, InetAddress localHost, int localPort) throws IOException, UnknownHostException
  {
    return m_sslSocketFactory.createSocket(host, port, localHost, localPort);
  }

  @Override
  public Socket createSocket(InetAddress address, int port, InetAddress localAddress, int localPort) throws IOException
  {
    return m_sslSocketFactory.createSocket(address, port, localAddress, localPort);
  }
} 
```

和“信任所有人”经理：

```
public class TrustAllX509Manager implements X509TrustManager
{
  @Override
  public X509Certificate[] getAcceptedIssuers()
  {
    return null;
  }

  @Override
  public void checkClientTrusted(X509Certificate[] certs, String authType)
  {
    // nothing
  }

  @Override
  public void checkServerTrusted(X509Certificate[] certs, String authType)
  {
    // nothing
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:22:44.630

好的，一整天后，这是我当前的工作解决方案。它不安全，也不是特别便携，但对我来说已经足够了。

请注意，我正在控制 tomcat 和 java 版本，并且我的 webapp 是唯一在此 tomcat 实例中运行的应用程序。

```
SocketFactory originalSslSocketFactory = SSLSocketFactory.getDefault();

Field theFactoryField = SSLSocketFactory.class.getDeclaredField("theFactory");
theFactoryField.setAccessible(true);

try
{
  // doesn't work when running in webapp (class not found)
  //      Security.setProperty("ssl.SocketFactory.provider", TrustAllSslSocketFactory.class.getName());

  // temporarily replace the SSL socket factory. using reflection because there is no method SSLSocketFactory.setDefault
  theFactoryField.set(null, new TrustAllSslSocketFactory());

  [...] // send email (just in case you're interested, i use org.apache.tools.ant.taskdefs.email.EmailTask)
}
finally
{
  // restore original value
  theFactoryField.set(null, originalSslSocketFactory);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:04:19.143

你让这变得不必要地复杂了。

一种更简单的方法是使用JavaMail 附带的[com.sun.mail.util.MailSSLSocketFactory类。](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/util/MailSSLSocketFactory.html)创建该类的一个实例，对其进行配置，并将其设置为 mail.smtps.ssl.socketFactory Session 属性（或 mail.smtp.ssl.socketFactory 属性，如果您只是使用“smtp”协议并启用STARTTLS 支持）。

# c# - 避免在已部署的 c# asp 网站中窃取代码

> ID：15130337
> 
> 赞同：5
> 
> 时间：2013-02-28T07:59:17.313
> 
> 标签：c#, asp.net, security

我正在用 asp/c# 构建一个网站，我需要将它部署到由外部人员管理的多个服务器上。

我需要避免有权访问服务器的人访问和重用我们的代码。

到目前为止，我听到的一种选择是我可以检查代码中的 MAC 地址，但是，用户可以更改 MAC 地址。

避免这种情况的最安全选择是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:16:29.403

您有多种选择，但正如许多人所评论的那样……也许它们不值得。

*   **法律**：让在您的服务器上工作的外部人员签署保密协议。
*   **受信任的外部人员**：雇用您信任的人。朋友、老同事等。
*   **虚拟服务器**：根据您希望外部人员完成的工作，您可能会创建应用程序的虚拟版本。例如，如果您希望外部人员安装和配置您的 IIS 和 WCF 服务，则只部署不执行任何操作的 WCF 服务的虚拟版本。稍后，在外部人员完成工作后，您可以将您的虚拟代码替换为真实代码。
*   **混淆代码**：您可以使用一些工具来混淆您的代码以使其更难。（更难并不意味着不可能）
*   **拿走你的代码**：正如**Mahmoud Fayez**建议的那样，将你的代码带到一些外部 Web 服务并让你的 UI 完全没有任何逻辑可能是可行的。然而，这取决于外部人员将为您做什么以及您的应用程序的确切细节。

唯一可靠的是：

*   **部署到您自己的服务器**：如果您的代码非常敏感，以至于您想保证没有人复制它，那么您自己做这些事情。**对于有足够时间和动力的程序员来说，没有任何管理任务是足够困难的**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:04:04.390

唯一 100% 可靠的方法是不允许其他人访问实际部署的文件。

由于代码必须首先*工作*，因此无论您做什么，一个有足够动力的破解者都会获得底层源代码。

[您可以审核您的部署文件夹](http://www.techotopia.com/index.php/Auditing_Windows_Server_2008_File_and_Folder_Access)，以便拥有访问日志：您不会阻止任何交互，但您至少会知道谁得到了什么......总比没有好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T08:04:31.367

为您提供最大控制权的选项：不要部署由外部人员管理的外部服务器。

其他一切都将有更少的选择来保护您的代码，您只需要确定可以支付的价格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T08:35:51.120

Web 应用程序通常不能完全“关闭”源。

除了bin中编译好的DLL（可以混淆）外，视图页面（.aspx，.ascx，.master，.cshtml）中必须有一点“开源”

如果您希望 100% 关闭，您可以考虑使用非标准方式来提供视图，以便您可以将所有内容打包在 DLL 中并编写您的 http 处理程序代码来处理不同的 URL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T08:04:58.783

您可以“发布”该网站，而不是将整个源代码放在服务器上，从而将其变成一个已编译的网站。

[你可以在这里](http://msdn.microsoft.com/en-us/library/1y1404zt%28v=vs.80%29.aspx)找到指南

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T09:02:02.190

如果你需要这样做，这表明你在公司层面做错了什么。最好的程序通常不是试图阻止盗版，而是接受它。让任何人都可以轻松获得代码，如果需要，可以自己在种子网站上播种，但只能让它以非常受限的方式运行 - 例如，一次只能连接一个连接，因此注册和购买许可证显示出明显的优势。

如果您的许可证也清晰且价格合理，那么就没有盗版软件的动机，预防总比治疗好。

# c++ - 什么是 C++ 临时对象？

> ID：15130338
> 
> 赞同：12
> 
> 时间：2013-02-28T07:59:17.923
> 
> 标签：c++, constants

我正在阅读 Eckel 的固定章节，并在解释 Temporaries 的部分混淆了。我能得到的是，当我们将引用传递给函数时，编译器会创建一个临时对象，它是一个 const 对象，因此即使我们将引用传递为

```
f(int &a){} 
```

现在我尝试在网上查看其他一些临时文件的参考资料，结果被卡住了

[http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage %2Fref%2Fcplr382.htm](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fcplr382.htm)和

[都是 C++ 中的临时右值吗？](https://stackoverflow.com/questions/2145030/are-all-temporaries-rvalues-in-c)

这促使我认为临时对象不仅仅是在函数内部传递引用和为其创建 const 对象。现在我可以从这两个链接中得到一些东西，但不能说我已经理解临时对象的工作、功能和使用所有的。如果有人可以解释临时人员的概念，那将非常有帮助。提前致谢。
bruce eckel 的原始示例是：

```
// Result cannot be used as an lvalue
class X {
    int i;
    public:
    X(int ii = 0);
    void modify();
};
X::X(int ii) { i = ii; }
void X::modify() { i++; }
X f5() {
    return X();
}
const X f6() {
    return X();
}
void f7(X& x) { // Pass by non-const reference
    x.modify();
}
int main() {
    f5() = X(1); // OK -- non-const return value
    f5().modify(); // OK
    // Causes compile-time errors:
    //! f7(f5());
    //! f6() = X(1);
    //! f6().modify();
    //! f7(f6());
} ///:~ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T09:18:28.167

临时对象是未命名的对象（某些表达式的结果），并且始终是右值。或者也许最好说导致右值的表达式是临时的。

在 C 中，右值/临时对象并不是真正的对象（从某种意义上说，标准使用“对象”一词：位于内存中的东西）。因此，例如，它们不是 cv 限定的（像`3 + 5`has type`int`和 not这样的表达式，并且`int const`函数返回值上忽略 cv 限定符）并且您不能获取它们的地址（因为它们不在内存中，他们没有地址）。在 C++ 中，类类型使问题变得模糊：您*可以*在右值上调用成员函数，并且该成员函数将具有`this`指针，这意味着即使（类类型的）右值也必须在内存中具有地址，并且 cv -qualifications 是有意义的，因为如果返回类型是 `const`，你不能在它上面调用非常量函数。

最后，尽管右值和临时的概念非常密切相关，但 C++ 标准以稍微不同的方式使用这些词。表达式的结果要么是右值，要么是左值（C++11 增加了其他可能性，但在您成为专家之前，您可以忽略它们），这种区别涉及所有类型。当 C++ 标准谈到临时的时，它是一个右值，它是（或已经成为）一个对象。在大多数情况下，它们具有类类型；在极少数情况下，您会在编写良好的代码中拥有一个*不是*类类型的临时文件，*除非*涉及模板。区别很重要，因为即使内置`&`运算符在右值上是非法的，类类型的右值具有定义的“生命周期”和内存地址。该生命周期直到完整表达式结束。因此，当涉及到类类型时，临时值和命名值的区别主要在于临时值没有名称，并且具有不同的生命周期。类类型的生命周期很重要，原因有两个：首先，它决定了何时调用析构函数，其次，如果对象“泄露”了一个指向内部数据的指针，例如`std::string::c_str()`，它决定了这个指针的有效时间。

最后，我提到了模板，因为这是您唯一一次拥有对非类类型的 const 引用。in 参数的通常约定是对非类类型按值传递，对类类型按 const 引用传递；然而，模板的作者不知道是否`T`将是一个类类型，并且在大多数情况下，将定义他的函数来接受一个`T const&`. 在实践中，这将是唯一一次你会得到一个非类类型的临时对象（如果模板保存了参数的地址，你可能会遇到问题）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T08:12:02.337

在 C++ 中，临时对象是编译器在各种上下文中创建的未命名对象。典型用途包括引用初始化、参数传递、表达式求值（包括标准类型转换）、函数返回和异常（抛出表达式）。

从这个[链接](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/cplr382.htm)：

当创建临时对象来初始化引用变量时，临时对象的名称与引用变量的名称具有相同的范围。当在对完整表达式（不是另一个表达式的子表达式）求值期间创建临时对象时，它会作为其求值的最后一步被销毁，在词法上包含创建它的点。

完整表达式的销毁也有例外：

1.  该表达式作为定义对象的声明的初始化程序出现：初始化完成后临时对象被销毁。
2.  引用绑定到临时对象：临时对象在引用的生命周期结束时被销毁。

如果为具有构造函数的类创建临时对象，编译器会调用适当的（匹配的）构造函数来创建临时对象。

当临时对象被销毁且存在析构函数时，编译器调用析构函数销毁临时对象。当您退出创建临时对象的范围时，它会被销毁。如果引用绑定到临时对象，则临时对象在引用超出范围时被销毁，除非它在控制流中断之前被销毁。例如，由构造函数初始化程序为引用成员创建的临时对象在离开构造函数时被销毁。

在此类临时对象是冗余的情况下，编译器不会构造它们，以创建更有效的优化代码。当您调试程序时，尤其是内存问题时，这种行为可能是一个考虑因素。

让我们这样总结[一下](http://msdn.microsoft.com/en-us/library/a8kfxa78%28v=vs.80%29.aspx)。可以出于以下原因创建这些临时对象：

1.  使用与正在初始化的引用的基础类型不同的类型的初始化程序来初始化 const 引用。

2.  存储返回用户定义类型的函数的返回值。仅当您的程序不将返回值复制到对象时，才会创建这些临时对象。因为返回值没有复制到另一个对象，所以创建了一个临时对象。创建临时变量的更常见情况是在计算表达式期间必须调用重载的运算符函数。这些重载的运算符函数返回一个用户定义的类型，该类型通常不会复制到另一个对象。

3.  将强制转换的结果存储到用户定义的类型。当给定类型的对象显式转换为用户定义类型时，该新对象将被构造为临时对象。

让我们考虑这个[例子](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1905.pdf)：

```
class X {
   / / ...
public:
   / / ...
   X(int);
   X(const X&);
   ~X();
};

X f(X);

void g()
{
   X a(1);
   X b = f(X(2));
   a = f(a);
} 
```

`X(2)`在这里，一个实现可能会在将它传递给`f()`using`X`的复制构造函数之前使用一个临时的来构造；或者，`X(2)`可以在用于保存论点的空间中构造。此外，在使用的复制构造函数`f(X(2))`将其复制到 b 之前，可以使用临时保存结果；`X`或者，`f()`的结果可能在`b`. 另一方面，表达式`a=f(a)`需要一个临时的结果`f(a)`，然后分配给`a`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T08:11:30.350

让我们从一个例子开始：

```
float f(int a);
int g(float b);
int main() { int a=10; std::cout << g(f(a)); } 
```

函数调用如下所示：

```
int ---f----> float ---g---> int 
```

当编译器为 g(f(a)) 生成代码时，它需要一些内存来存储调用 f() 后生成的浮点数。这个内存区域称为临时的。它是 f() 和 g() 之间的内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T08:27:00.440

临时对象是计算的“副产品”。它们没有显式声明，顾名思义，它们是临时的。不过，您应该知道编译器何时创建临时对象，因为通常可以防止这种情况发生。

正如他的帖子中的几个答案详细介绍了临时工是什么，但我想添加一些与它们相关的“额外开销”相关的内容，但也有一些方法可以避免它们。

1.  临时发生的最常见的地方是通过值将对象传递给方法。形式参数是在堆栈上创建的。这可以通过使用按地址传递或按引用传递来防止。

2.  编译器可能会在分配对象时创建临时对象。例如，可以为将 int 作为参数的构造函数分配一个 int。编译器将使用 int 作为参数创建一个临时对象，然后对该对象调用赋值运算符。您可以通过在构造函数的声明中使用显式关键字来防止编译器在您背后执行此操作。

3.  当对象按值返回时，经常使用临时对象。必须返回对象的方法通常必须创建要返回的对象。由于构造此对象需要时间，因此我们希望尽可能避免它。有几种方法可以做到这一点。

    3.a. 不是返回一个对象，而是向方法添加另一个参数，允许程序员传入程序员想要存储结果的对象。这样，该方法就不必创建额外的对象。它只会使用传递给方法的参数。这种技术称为返回值优化 (RVO)。

RVO 是否会导致实际优化取决于编译器。不同的编译器以不同的方式处理这个问题。帮助编译器的一种方法是使用计算构造函数。可以使用计算构造函数代替返回对象的方法。计算构造函数采用与要优化的方法相同的参数，但不是根据参数返回对象，而是根据参数的值初始化自身。

1.  使用 = 运算符可以避免临时性。例如，代码

    a = b + c; 可以写成 a=b; a+=c；。

# c - 在avx中执行等效于_mm_loaddup_pd的功能的最快方法是什么？

> ID：15130352
> 
> 赞同：1
> 
> 时间：2013-02-28T07:59:59.840
> 
> 标签：c, avx

如果我在内存中有以下双打（按顺序），我希望能够执行以下操作：

A-> a1| b1| a2| b2

```
__m256d r1,im1;
/*Perform operation here*/
r1-> |a2|a2|a1|a1| 

im1-> |b2|b2|b1|b1| 
```

我能想到的一种方法是：

```
t1 = _mm256_load_pd(&A);t1->|b2|a2|b1|a1|
r1 = _mm256_movedup_pd(t1);
t1 = _mm256_permute_pd(&A,0x0101);
im1 = _mm256_movedup_pd(t1); 
```

AVX 没有 _mm_loaddup_pd() 或 _mm_load1_pd()。那么我可以执行此操作的最快方式是什么（就延迟而言，不一定是指令数量）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:11:14.023

您需要的不是广播/复制，而是随机播放/解包：

```
/* tmp = |b2|a2|b1|a1| */
tmp = _mm256_load_pd(&A);
/* r1 = |a2|a2|a1|a1| */
r1 = _mm256_unpacklo_pd(tmp, tmp);
/* im1 = |b2|b2|b1|b1| */
im1 = _mm256_unpackhi_pd(tmp, tmp); 
```

# datatables - jsp的数据表

> ID：15130359
> 
> 赞同：0
> 
> 时间：2013-02-28T08:00:36.767
> 
> 标签：datatables, taglib

当我搜索 Datatables Tag Lib 时，我遇到了两种选择：

[http://tduchateau.github.com/DataTables-taglib/index.html](http://tduchateau.github.com/DataTables-taglib/index.html) [http://datatables4j.github.com/docs/main.changelog.html（Datatables4j](http://datatables4j.github.com/docs/main.changelog.html)宣布他们将转移到一个名为 Dandelion 的项目。）

有没有人有过该标签库之一的经验？哪个更健壮？

谢谢。

PS。我是 Twitter Bootstrap 和 Spring MVC 的新手。虽然我打算为数据表 jquery 插件编写自定义标签，但我遇到了上述解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:33:28.937

DataTables-taglib 是第一个项目，非常基础且有很多缺陷。DataTables4j 的功能更多，但该项目最近已转移到蒲公英。

[您可以在此处](http://dandelion.github.io/datatables/)浏览文档以及新[Spring Petclinic 应用程序](https://github.com/SpringSource/spring-petclinic)中的集成示例。

免责声明，根据 StackOverflow 规则的要求：我是上述三个项目的作者。

# wpf - 如何更改 WPF XAML 中单选按钮内圈的颜色

> ID：15130363
> 
> 赞同：2
> 
> 时间：2013-02-28T08:00:48.983
> 
> 标签：wpf, radio-button, controltemplate

这是我的单选按钮：

```
<RadioButton Content="Add" Grid.Column="1" Height="16" HorizontalAlignment="Left" Margin="50,13,0,0" Name="rdAdd" VerticalAlignment="Top" GroupName="AddEditRadio" Checked ="rdAdd_Checked" FontSize="12.667" /> 
```

现在单选按钮内圈的颜色是橙色。我想把它改成蓝色。

我设置哪个属性来获得“蓝色”颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:06:15.140

恐怕没有可用于更改颜色的直接属性。
您需要做的是将 RadioButton 重新模板化为您想要的任何内容。

幸运的是，默认模板可用，**[这](http://msdn.microsoft.com/en-us/library/ms751600.aspx)**是 RadioButton 的模板。

如果我正确理解您想要更改的内容，您可能应该修改的颜色`CheckMark`（或整个`BulletDecorator`取决于您想要实现的目标）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:04:33.190

您必须编辑单选按钮的[ControlTemplate](http://msdn.microsoft.com/en-us/library/ms751600%28v=vs.85%29.aspx)。您可以在那里使用混合和更新控制模板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-07T17:02:04.393

这是一个旧线程，但如果其他人希望更改单选按钮内选中圆圈的颜色，这对我有用，而无需更改控件模板：

(1) 在单选按钮的加载事件上，使用查找可视子项功能（[在此处](https://stackoverflow.com/questions/974598/find-all-controls-in-wpf-window-by-type)获取）在按钮下方的可视树中定位椭圆。

(2) 将步骤 (1) 中找到的椭圆的填充和/或描边更改为所需的颜色。

(3) 就是这样！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T19:20:44.753

`<RadioButton Content="Add" Background="Blue" Foreground="Green" BorderBrush="Red" BorderThickness="5" />`

（我添加了 5 的 BorderThickness 以便于查看）

这会将单选按钮的背景颜色更改为蓝色，将文本“添加”更改为绿色，并将边框（按钮周围）更改为红色，如下所示：

![单选按钮，选中和未选中](../Images/6670ac53778f7647eb6fea163d7c9d01.png)

这些是您可以直接从单选按钮更改的唯一颜色（不使用模板等）

# java - Java：杀死执行数据库操作的线程

> ID：15130368
> 
> 赞同：0
> 
> 时间：2013-02-28T08:01:07.157
> 
> 标签：java, database, multithreading

我有一个 java 线程，它执行一些繁重的数据库操作。我正在编写一个 api 来杀死这个 java 线程。我为此使用了执行器框架，所以一旦我得到未来，我就会调用 future.cancel() 然后检查线程中断。

上述逻辑工作正常，除了线程正在执行 DB 操作的场景，这意味着杀死线程将首先涉及杀死 DB 连接，这意味着 DBA 干预。

我的目标是创建一个不需要支持团队干预的 api。

关于如何解决这个问题的任何想法都将非常有帮助。

代码：

```
private void killBatches1() {
    if (killBatchRunning.compareAndSet(false, true)) {
    try{
        Iterator<Future<?>> futureIterator = futuresForBatch.iterator();
        while (futureIterator.hasNext()) {
            Future<?> future = futureIterator.next();
            if (future.cancel(true))
                ;
            futureIterator.remove();
        }
      }finally{
        killBatchRunning.set(false);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:18:13.773

不要那样做！！！如果您的线程启动了数据库操作并且您将其杀死，则可能会导致数据库出现问题。假设你的线程正在更新数据库，而你杀死了它。它完成交易了吗？是否已提交更改？如果您杀死线程，您将不得不进行回滚，因为您说的是“繁重的数据库操作”，这可能非常昂贵！（我经历了数小时的数据库回滚......我开始讨厌它们）。

从技术上讲，您可以尝试访问操作系统并搜索数据库连接进程并将其终止，但正如我上面所说，这不仅是不好的做法，而且很危险。

所以，我的建议是找到一些方法以小块的方式进行大数据库操作，这样你就有更好的响应能力和控制力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:29:25.790

理论上你可以调用线程中断（）。如果 JDBC 驱动程序支持中断，则会调用适当的异常，该异常应在您的代码中捕获。如果没有，您可以尝试关闭连接。那也应该抛出异常。无论如何在 JDBC 驱动程序规范中研究这个问题。

# android - Android AudioRecord to File 然后使用 AudioTrack 进行播放

> ID：15130374
> 
> 赞同：1
> 
> 时间：2013-02-28T08:01:21.470
> 
> 标签：android, android-audiorecord

基本上，我使用 AudioRecord 将声音文件录制到 sdcard 目录。它记录 5 秒，然后使用 AudioTrack 播放。

好吧，对我来说，录制的文件不存在。也许它没有成功记录。我在录音中做错了什么？播放部分呢？

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    int minBufferSize = AudioTrack.getMinBufferSize(44100, AudioFormat.CHANNEL_CONFIGURATION_MONO, 
            AudioFormat.ENCODING_PCM_16BIT);

  audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC, 44100, AudioFormat.CHANNEL_CONFIGURATION_MONO, 
        AudioFormat.ENCODING_PCM_16BIT, minBufferSize, AudioTrack.MODE_STREAM); 

  recordSound();
 }

private void recordSound(){
    File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/"+"recordsound");
    //    /mnt/sdcard/recordsound
    // Delete any previous recording.
    if (file.exists())
            file.delete();

    try {
                    file.createNewFile();

                    // Create a DataOuputStream to write the audio data into the saved file.
                    OutputStream os = new FileOutputStream(file);
                    BufferedOutputStream bos = new BufferedOutputStream(os);
                     dos = new DataOutputStream(bos);

                    // Create a new AudioRecord object to record the audio.
                    int bufferSize = audioRecord.getMinBufferSize(FREQUENCY, CHANNEL_CONFIGURATION, AUDIO_ENCODING);
                     audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC, FREQUENCY, CHANNEL_CONFIGURATION, AUDIO_ENCODING, bufferSize);

                    short[] buffer = new short[bufferSize]; 
                    audioRecord.startRecording();

                    new Timer().schedule(stop(), 5000);  //time in miliseconds

                  //  while (audioRecord.RECORDSTATE_RECORDING==1) 
                    {
                            int bufferReadResult = audioRecord.read(buffer, 0, bufferSize);
                            for (int i = 0; i < bufferReadResult; i++)
                                    dos.writeShort(buffer[i]);
                    }

                   // dos.close();
            } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            } catch (IllegalArgumentException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            } catch (IllegalStateException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            }

}

private TimerTask stop()
{
    TimerTask t = new TimerTask() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            audioTrack.stop();
            audioTrack.release();
            try {
                dos.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

             try {
                    playfilesound();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

        }
    };
    return t;

}

private void playfilesound() throws IOException
{

    int count = 512 * 1024; // 512 kb
    //Reading the file..
    byte[] byteData = null; 
    File file = null; 
    file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/"+"recordsound");    //filePath

     if (file.exists())
     {
         int a=0;

     }

    byteData = new byte[(int)count];
    FileInputStream in = null;
    try {
    in = new FileInputStream( file );

    } catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }

    int bytesread = 0, ret = 0;
    int size = (int) file.length();
    audioTrack.play();

    while (bytesread < size) {    // Write the byte array to the track 
        ret = in.read( byteData,0, count);   //ret =size in bytes

        if (ret != -1) {
            audioTrack.write(byteData,0, ret);
            bytesread += ret; }  //ret
        else break; }   //while

        in.close(); audioTrack.stop(); audioTrack.release();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:08:27.630

如果您的要求是在录制时它应该播放（意味着循环播放音频），在您的 while 循环线程中，您正在存储录制的数据（audioData 缓冲区），您可以在其中将其复制到播放器对象，在 while 循环中（ player.write(audioData, 0, numShortsRead);)。你说你的 UI 线程卡住了，可能是因为你给音频记录线程更多的优先级。

检查下面我用于上述环回要求的代码：

```
boolean m_isRun=true;
    public void loopback() {
            // Prepare the AudioRecord & AudioTrack
            try {
                buffersize = AudioRecord.getMinBufferSize(SAMPLE_RATE,
                        AudioFormat.CHANNEL_CONFIGURATION_MONO,
                        AudioFormat.ENCODING_PCM_16BIT);

            if (buffersize <= BUF_SIZE) {
                buffersize = BUF_SIZE;
            }
            Log.i(LOG_TAG,"Initializing Audio Record and Audio Playing objects");

            m_record = new AudioRecord(MediaRecorder.AudioSource.MIC,
                    SAMPLE_RATE, AudioFormat.CHANNEL_CONFIGURATION_MONO,
                    AudioFormat.ENCODING_PCM_16BIT, buffersize * 1);

            m_track = new AudioTrack(AudioManager.STREAM_ALARM,
                    SAMPLE_RATE, AudioFormat.CHANNEL_CONFIGURATION_MONO,
                    AudioFormat.ENCODING_PCM_16BIT, buffersize * 1,
                    AudioTrack.MODE_STREAM);

            m_track.setPlaybackRate(SAMPLE_RATE);
        } catch (Throwable t) {
            Log.e("Error", "Initializing Audio Record and Play objects Failed "+t.getLocalizedMessage());
        }

        m_record.startRecording();
        Log.i(LOG_TAG,"Audio Recording started");
        m_track.play();
        Log.i(LOG_TAG,"Audio Playing started");

        while (m_isRun) {
            m_record.read(buffer, 0, BUF_SIZE);
            m_track.write(buffer, 0, buffer.length);
        }

        Log.i(LOG_TAG, "loopback exit");
    }

    private void do_loopback() {
        m_thread = new Thread(new Runnable() {
            public void run() {
                loopback();
            }
        }); 
```

还有一件事，如果您的要求是记录几秒钟然后播放，在播放时您的记录应该重新开始，您可以使用延迟处理程序线程超时，在该线程中您可以停止记录复制缓冲区，然后开始录制。

# ruby - 如何将 ruby 中 CSV 的数组输出导出到 html？

> ID：15130375
> 
> 赞同：0
> 
> 时间：2013-02-28T08:01:29.380
> 
> 标签：ruby, arrays

下面是我的红宝石脚本

```
require "rubygems"
require 'csv'

a = Array.new
CSV.foreach("p34n234.csv") do |row|
    a << row
end

print a 
```

我现在要做的是最后我想生成一个 html 文件并将数组打印到它。

我希望我说得通。

谢谢

PS 我只想在 .html 文件中显示数组。这里没什么特别的：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:05:21.683

我猜你会做这样的事情......

```
print "HTTP/1.0 200 OK\r\n"
print "Content-type: text/html\r\n\r\n"
print "<html><body>#{your_array}</body></html>\r\n" 
```

# android - flurry - 如何快速检测新用户？

> ID：15130380
> 
> 赞同：2
> 
> 时间：2013-02-28T08:01:45.017
> 
> 标签：android, analytics, flurry

根据 Flurry 文档，

> “新用户
> 
> 新用户是刚刚开始使用您的应用程序的用户。用户由唯一的电话 ID（因平台而异）识别，以确保用户实际上是唯一的新用户，而不仅仅是重新安装。”

任何人都可以详细说明这`"unique phone IDs (which vary by platform)"`部分吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:14:04.070

**伪唯一 ID**，适用于所有 Android 设备。某些设备没有手机（例如平板电脑）或出于某种原因您不想包含 READ_PHONE_STATE 权限。您仍然可以阅读 ROM 版本、制造商名称、CPU 类型和其他硬件详细信息等详细信息，如果您想将 ID 用于序列密钥检查或其他一般用途，这将非常适合。以这种方式计算的 ID 不会是唯一的：可以找到具有相同 ID 的两个设备（基于相同的硬件和 ROM 映像），但在实际应用中的机会可以忽略不计。为此，您可以使用 Build 类：

```
String m_szDevIDShort = "35" + //we make this look like a valid IMEI
            Build.BOARD.length()%10+ Build.BRAND.length()%10 + 
            Build.CPU_ABI.length()%10 + Build.DEVICE.length()%10 + 
            Build.DISPLAY.length()%10 + Build.HOST.length()%10 + 
            Build.ID.length()%10 + Build.MANUFACTURER.length()%10 + 
            Build.MODEL.length()%10 + Build.PRODUCT.length()%10 + 
            Build.TAGS.length()%10 + Build.TYPE.length()%10 + 
            Build.USER.length()%10 ; //13 digits 
```

大多数 Build 成员都是字符串，我们在这里所做的是获取它们的长度并通过模数转换它。我们有 13 个这样的数字，我们在前面添加两个 (35) 以具有与 IMEI 相同大小的 ID（15 位）。这里还有其他的可能性很好，看看这些字符串。

**返回类似： 355715565309247**。

**不需要特别许可，使这种方法非常方便。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:04:51.980

对于 Android，唯一 ID 可能是以下之一：

*   设备 IMEI 号码（仅适用于带有 SIM 卡插槽的设备）
*   蓝牙/WiFi MAC 地址（大多数设备上都有）
*   [Secure.ANDROID_ID](http://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID)（技术上存在于所有设备上，但已知在某些版本中存在错误）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:04:20.023

你真的不需要为它做任何事情。

关于flurry是如何做到的，我不完全确定，但我猜他们只是在获取一些特定于设备的信息并从中创建一个自己的“flurry-number”。

由于这些信息可能与平台不同（以 Apple 为例，您可以长时间使用 UDID），因此“可以非常依赖于平台”。

# c++ - QTableView高级选择

> ID：15130381
> 
> 赞同：3
> 
> 时间：2013-02-28T08:01:48.277
> 
> 标签：c++, qt, qtableview, multipleselection

我使用 QTableView，我想开发一种高级选择模式。我没有设法做到这一点，[`SelectionBehavior`](http://doc.qt.digia.com/4.6/qabstractitemview.html#SelectionMode-enum)也没有做到[`SelectionMode`](http://doc.qt.digia.com/4.6/qabstractitemview.html#SelectionMode-enum)。

用户应该能够选择一些单元格，但前提是它们属于同一列：

*   **有效行为**：

![选择一整列就可以了](../Images/09768368f57642959b8caeb1fd8ae8f2.png) ![在同一列中选择一些单元格就可以了](../Images/49fd5f68735f9833d1283855f74e6fdd.png)

*   **无效行为**：

![选择多列中的单元格不正确](../Images/c5c4b327df71e873184c175016ae8d3c.png)

锦上添花是为了防止最后一行（黄色）被选中。

有什么解决办法吗？

* * *

**编辑 - 2013/03/05**

我无法让它工作：

```
ui->table->setSelectionBehavior(QAbstractItemView::SelectItems);
ui->table->setSelectionMode(QAbstractItemView::MultiSelection);

connect(ui->table->selectionModel(), SIGNAL(currentColumnChanged(QModelIndex,QModelIndex)), ui->table->selectionModel(), SLOT(clearSelection())); 
```

这段代码有什么问题？我也试过`QAbstractItemView::ExtendedSelection`和`QAbstractItemView::ContiguousSelection`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:13:09.303

您是否检查过来自 QItemSelectionModel 的信号，尤其是

> [信号] QItemSelectionModel::currentColumnChanged

可以用来开始一个新的选择，以防当前选择被扩展到覆盖两列。

# javascript - getID() 无法识别

> ID：15130391
> 
> 赞同：0
> 
> 时间：2013-02-28T08:02:16.453
> 
> 标签：javascript, google-apps-script, google-drive-api

我正在编写一个脚本，让 Google 表格跟踪作者的小说在 Google Drive 中的进度。

我正在尝试计算给定文档的字数并将其推送到下面代码中的数组中：

```
// Gets each chapter's word count and pushes it into the numberTitleCount array.

for(c in files){
  var counter = 0;
  var ID = files[c].getID();
  var doc = DocsList.getFileById(ID);

  var text = doc.getText();
  var textArray = text.split(" ");
  counter = textArray.length;
  numberTitleCount[c].push(counter);
} 
```

问题是，当我运行脚本时，会发生错误。这是错误：

**TypeError：在对象文件中找不到函数 getID。（第 20 行，文件“commentCount”）**

我不确定错误是什么。files 是一个文件数组，因此调用 files[c].getID() 应该得到指定文件的 ID，但没有这样的运气。我知道数组很好，就像我尝试添加字数统计功能之前一样，我使用相同的数组成功获取章节编号和标题。

对此问题的任何意见将不胜感激！

~诺艾尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:46:32.027

如果您使用脚本编辑器的自动完成功能，您将能够更轻松地发现此问题。（Ctrl + 空格）。

问题是该函数被调用`getId()`，而不是被调用`getID()`。[文档](https://developers.google.com/apps-script/class_file#getId)。

# cocoa-touch - ABRecordRef 的来源（电话簿或 icloud）

> ID：15130397
> 
> 赞同：2
> 
> 时间：2013-02-28T08:02:44.720
> 
> 标签：cocoa-touch, abaddressbook, abrecordref

我需要找出 ABRecordRef 的来源，因为下面的方法从电话簿和 icloud 返回联系人数组，结果有同一个人（第一个，姓氏）的双重联系人，但 ABRecordID recordId=ABRecordGetRecordID(record );?

```
ABAddressBookRef addressBook;
if ([self isABAddressBookCreateWithOptionsAvailable]) {
    CFErrorRef error = nil;
    addressBook = ABAddressBookCreateWithOptions(NULL,&error);

    ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {

        dispatch_async(dispatch_get_main_queue(), ^{

            if (error) {

            } else if (!granted) {

            } else {
                CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);
                CFIndex nPeople = ABAddressBookGetPersonCount(addressBook);

                for (int i = 0; i < nPeople; i++) {
                    // Get the next address book record.
                    ABRecordRef record = CFArrayGetValueAtIndex(allPeople, i);

                    ABRecordID recordId=ABRecordGetRecordID(record);

                    NSString* firstName = (__bridge_transfer NSString*)ABRecordCopyValue(record,kABPersonFirstNameProperty);
                    NSString* lastName = (__bridge_transfer NSString*)ABRecordCopyValue(record,kABPersonLastNameProperty);

                    CFTypeRef bDayProperty = ABRecordCopyValue((ABRecordRef)record, kABPersonBirthdayProperty);

                    NSDate *birthday;

                    if (ABRecordCopyValue((ABRecordRef)record, kABPersonBirthdayProperty))
                    {
                        birthday=(__bridge NSDate*)bDayProperty;
                    }

                }
                CFRelease(addressBook);

            }
        });
    });
} else {
    // iOS 4/5
    addressBook = ABAddressBookCreate();
    CFRelease(addressBook);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:28:17.713

[答案的来源](https://stackoverflow.com/questions/4067542/getting-merged-unified-entries-from-abaddressbook)

添加新集

```
NSMutableSet *linkedPersonsToSkip = [[NSMutableSet alloc] init]; 
```

并检查每个人

```
if ([linkedPersonsToSkip containsObject:(__bridge id)(record)]) {
                            continue;
}

NSArray *linked = (__bridge NSArray *) ABPersonCopyArrayOfAllLinkedPeople(record);
if ([linked count] > 1) {
   [linkedPersonsToSkip addObjectsFromArray:linked];
} 
```

# xpages - 在 javascript-onbeforeunload 中调用 ssjs

> ID：15130398
> 
> 赞同：2
> 
> 时间：2013-02-28T08:02:52.887
> 
> 标签：xpages

我不太习惯 xpages 和 webprogramming，而且我被困在这里几天了。

有没有办法在 javascript-onbeforeunload-event 中调用服务器端 java 脚本？我要做的是在用户离开页面时删除notesview中的notesdocument。

例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
xmlns:xe="http://www.ibm.com/xsp/coreex">
<script language="JavaScript">
    window.onbeforeunload = callSSJS;
    function callSSJS(){
      here I'd like to call a ssjs - f.eg. 
         var vw:NotesView = database.getview("anyview");
         var doc:NotesDocument = vw.getDocumentByKey("123");
         doc.remove(true);
     }
</script>
</xp:view> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:48:30.023

这可以通过Jeremy Hodge的*execOnServer方法来实现：* [http ://xpagesblog.com/XPagesHome.nsf/Entry.xsp?documentId=88065536729EA065852578CB0066ADEC](http://xpagesblog.com/XPagesHome.nsf/Entry.xsp?documentId=88065536729EA065852578CB0066ADEC)

首先在您的 XPage 中创建一个事件：

```
<xp:eventHandler event="onunload" id="onUnload" submit="false">
    <xp:this.action>
        <xp:executeScript>
            <xp:this.script><![CDATA[#{javascript:
                var vw:NotesView = database.getview("anyview");
                var doc:NotesDocument = vw.getDocumentByKey("123");
                doc.remove(true);
            }]]></xp:this.script>
        </xp:executeScript>
    </xp:this.action>
</xp:eventHandler> 
```

然后将 CSJS 输出脚本块添加到您的 XPage：

```
<xp:scriptBlock id="scriptBlockOnUnload">
    <xp:this.value>
    <![CDATA[

        var executeOnServer = function () {

            // must supply event handler id or we're outta here....
            if (!arguments[0])
                return false;

            // the ID of the event handler we want to execute
            var functionName = arguments[0];

            // OPTIONAL - The Client Side ID that you want to partial refresh after executing the event handler
            var refreshId = (arguments[1]) ? arguments[1] : "@none";
            var form = (arguments[1]) ? XSP.findForm(arguments[1]) : dojo.query('form')[0];

            // OPTIONAL - Options object contianing onStart, onComplete and onError functions for the call to the
            // handler and subsequent partial refresh
            var options = (arguments[2]) ? arguments[2] : {};

            // Set the ID in $$xspsubmitid of the event handler to execute
            dojo.query('[name="$$xspsubmitid"]')[0].value = form.id + ':' + functionName;
            XSP._partialRefresh("post", form, refreshId, options);

        }

        window.onbeforeunload = function(){

                        if( ! dojo._xhr )
                           dojo._xhr = dojo.xhr;

                        dojo.xhr = function ( args, ioArgs, addArgs ){
                           ioArgs["sync"] = true;
                   ioArgs["failOk"] = true;
                           return dojo._xhr( args, ioArgs, addArgs );
                        }
                        executeOnServer('onUnload');
                    };
    ]]>
    </xp:this.value>
</xp:scriptBlock> 
```

最后一行是 unload 方法的钩子，它调用服务器端事件来删除文档。

**编辑：**

为同步调用和更好的故障处理添加了一个 dojo ioArgs。

# hadoop - 如何从 Hadoop-Hive 中删除/截断表？

> ID：15130403
> 
> 赞同：24
> 
> 时间：2013-02-28T08:03:15.510
> 
> 标签：hadoop, hive

请告诉我如何从配置单元中删除表，并告诉我从哪里可以获得有关配置单元查询的更多信息。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-28T08:30:15.197

您可以使用[drop](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-Create/Drop/AlterDatabase)命令从 HDFS 中删除元数据和实际数据。

而只是为了删除数据并保持表结构，使用 truncate 命令。

有关 hive ql 的进一步帮助，请查看[hive 的语言手册](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-10-05T06:52:40.910

截断：

```
hive -e "TRUNCATE TABLE IF EXISTS $tablename" 
```

下降：

```
hive -e "Drop TABLE IF EXISTS $tablename" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-01T11:23:54.100

使用以下命令删除linux环境中的所有表。

```
hive -e 'show tables' | xargs -I '{}' hive -e 'drop table {}' 
```

# firefox - 如何在 Firefox 19 中显示流中的 pdf？

> ID：15130412
> 
> 赞同：0
> 
> 时间：2013-02-28T08:04:04.200
> 
> 标签：firefox, pdf, outputstream

我想问你如何从 Firefox 19 中的 servlet 输出 pdf 文件。

我有一个输出 pdf 流的 servlet

```
.....

public void doPost(HttpServletRequest request, HttpServletResponse response) {

    try {

        String namePDF = "filename.pdf";
        StringBuffer sb = new StringBuffer(request.getScheme());
        sb.append("://").append(request.getServerName());
        if (request.getServerPort() > 0) {
            sb.append(":").append(request.getServerPort());
        }
        sb.append(request.getContextPath()).append("/dirPdf/")
                .append(namePDF);

        OutputStream out = response.getOutputStream();

        Document document = new Document();
        document.setMargins(30, 30, 25, 25);

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        PdfWriter pdfWriter = PdfWriter.getInstance(document, baos);

        PdfPageEvents events = new PdfPageEvents();
        pdfWriter.setPageEvent(events);

        // step 2: we set the ContentType and create an instance of the
        // corresponding Writer
        // writer.setEncryption(null, null, PdfWriter.ALLOW_PRINTING,
        // PdfWriter.STANDARD_ENCRYPTION_40);

        document.open();

        compiledModule(request, response, document);

        document.newPage();
        pdfWriter.setPageEmpty(false);

        // chiudo il documento
        document.close();

        int tot = pdfWriter.getPageNumber() - 1;

        PdfReader reader = new PdfReader(baos.toByteArray());
        reader.consolidateNamedDestinations();
        PdfStamper pdfStamper = new PdfStamper(reader,baos);

        //read from module
        reader = new PdfReader(sb.toString());
        reader.consolidateNamedDestinations();

        PdfContentByte cbu = pdfStamper.getUnderContent(tot);
        PdfImportedPage page = pdfStamper.getImportedPage(reader, 2);

        cbu.addTemplate(page, 1, 0, 0, 1, 0, 0);

        pdfStamper.close();

        response.setContentType("application/pdf");
        response.setContentLength(baos.size());
        response.setBufferSize(baos.size());

        baos.writeTo(out);
        out.flush();
        out.close();
    } catch (Exception e) {

        logger.error("", e);
        try {
            /*if (out != null)
                out.close();*/
            response.sendRedirect("../exception.jsp?message="
                    + e.getMessage());
        } catch (IOException ex) {
            logger.error("", ex);
        }
    }
}

.... 
```

在 Internet Explorer 和 Chrome 中正确查看文件，而在 Firefox 19 中出现以下错误

“此 PDF 文档可能无法正确显示”

我知道有一个解决方案可以通过更改 Firefox 19 中的设置来实现，无论如何，因为我的应用程序的许多用户可能会因此而气馁，最好知道是否有实用的解决方法让 Firefox 显示的PDF。

或者也许这是一个没有解决方法的错误？

先感谢您！

--- 更新 28/02/2013 下午 12:52 ---

这个问题似乎与我使用一些 ByteArrayOutputStream 复制到输出流的事实有关。如果我直接使用 outputStream 一切正常。不幸的是，我不得不使用 ByteArrayOutputStream，因为我必须将 pdf 的最后一页粘贴到另一页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:20:40.267

我的情况的解决方案是更改并添加第二个 ByteArrayOutputStream

```
.....

public void doPost(HttpServletRequest request, HttpServletResponse response) {

try {

    String namePDF = "filename.pdf";
    StringBuffer sb = new StringBuffer(request.getScheme());
    sb.append("://").append(request.getServerName());
    if (request.getServerPort() > 0) {
        sb.append(":").append(request.getServerPort());
    }
    sb.append(request.getContextPath()).append("/dirPdf/")
            .append(namePDF);

    OutputStream out = response.getOutputStream();

    Document document = new Document();
    document.setMargins(30, 30, 25, 25);

    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ByteArrayOutputStream baos2 = new ByteArrayOutputStream();
    PdfWriter pdfWriter = PdfWriter.getInstance(document, baos);

    PdfPageEvents events = new PdfPageEvents();
    pdfWriter.setPageEvent(events);

    // step 2: we set the ContentType and create an instance of the
    // corresponding Writer
    // writer.setEncryption(null, null, PdfWriter.ALLOW_PRINTING,
    // PdfWriter.STANDARD_ENCRYPTION_40);

    document.open();

    compiledModule(request, response, document);

    document.newPage();
    pdfWriter.setPageEmpty(false);

    // chiudo il documento
    document.close();

    int tot = pdfWriter.getPageNumber() - 1;

    PdfReader reader = new PdfReader(baos.toByteArray());
    reader.consolidateNamedDestinations();
    PdfStamper pdfStamper = new PdfStamper(reader,baos2);

    //read from module
    reader = new PdfReader(sb.toString());
    reader.consolidateNamedDestinations();

    PdfContentByte cbu = pdfStamper.getUnderContent(tot);
    PdfImportedPage page = pdfStamper.getImportedPage(reader, 2);

    cbu.addTemplate(page, 1, 0, 0, 1, 0, 0);

    pdfStamper.close();

    response.setContentType("application/pdf");
    response.setContentLength(baos2.size());
    response.setBufferSize(baos2.size());

    baos2.writeTo(out);
    out.flush();
    out.close();
} catch (Exception e) {

    logger.error("", e);
    try {
        /*if (out != null)
            out.close();*/
        response.sendRedirect("../exception.jsp?message="
                + e.getMessage());
    } catch (IOException ex) {
        logger.error("", ex);
    }
} 
```

}

……

使用 PdfStamper 向自己添加 byteArrayOutputStream 似乎存在问题。我不明白只有一个宝和两个宝之间的联系。随意解释...

# jquery - 在 JQuery 对话框中加载动态内容

> ID：15130419
> 
> 赞同：1
> 
> 时间：2013-02-28T08:04:36.473
> 
> 标签：jquery, dialog

我在将动态内容加载到新的 JQuery 对话框时遇到问题。当我单击按钮时，没有任何反应。

我的代码如下：

```
 <script  src="jquery-ui.min.js"></script>

    <script>
        //$('#dialog').dialog({ dialogClass: 'noTitleStuff' }); ---> CSS

         $(function() {
            $( "#dialog" ).dialog({
                autoOpen: false,
                height:$(window).height() - 50,
                width:$(window).width() - 50,
                    show: {
                    effect: "blind",
                    duration: 400,
                    },

                    hide: {
                    effect: "explode",
                    duration: 400
                    }
            });

            $( "#opener" ).click(function() {
                $( "#dialog").dialog({
                    open: function(event, ui) {
                           $('#content').load('http://www.google.com');
                    }
                });
            });
        });
    </script>
</head>
<body>
    <div id="dialog">
        <div class="content"></div>
    </div>
    <button id="opener">Open Dialog</button>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:11:04.757

您必须在初始 dialog() 设置中定义 open 函数：

```
$("#dialog").dialog({
    autoOpen: false,
    height: $(window).height() - 50,
    width: $(window).width() - 50,
    show: {
        effect: "blind",
        duration: 400,
    },
    hide: {
        effect: "explode",
        duration: 400
    },
    open: function (event, ui) {
        $('#content').load('http://www.google.com');
    }
}); 
```

并像这样调用它：

```
$("#opener").click(function () {
    $("#dialog").dialog('open');
}); 
```

[jsfiddle](http://jsfiddle.net/BGEK6/)

ps：您正在使用`$('#content')`但在您定义的html中`class="content"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:10:09.027

您的内容 div 有类，而不是 id。下面的代码可以解决问题。

```
$( "#opener" ).click(function() {
                $( "#dialog").dialog({
                    open: function(event, ui) {
                           $('.content').load('http://www.google.com');
                    }
                }).dialog("open");
            }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T08:10:30.143

您可以做的只是在该 DOM 中加载 html 并创建对话框。

```
$('#content').load('http://www.google.com');

$( "#content" ).dialog( 'open' ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-10T09:57:22.220

除了到目前为止提供的答案之外，我想提一下，提供的示例无法“开箱即用”，因为它们正在尝试加载 Google 页面。我在过去半个小时里偶然发现了这个问题，直到我阅读了[JQuery 文档：](http://api.jquery.com/load/)

> 由于浏览器安全限制，大部分“Ajax”请求都受同源策略的约束；请求无法从不同的域、子域、端口或协议成功检索数据。

以防万一其他人遇到这个问题并且想知道为什么提供的示例和 JSFiddles 没有按预期工作。

# jquery - 如何在 jquery mobile 中将弹出窗口定位在屏幕顶部或固定在顶部？

> ID：15130420
> 
> 赞同：2
> 
> 时间：2013-02-28T08:04:39.300
> 
> 标签：jquery, cordova, jquery-mobile, popup

我在 jquery mobile 中有一个弹出窗口

```
<div data-role="popup"   id="itemDetails">
...
</div> 
```

我以编程方式调用以打开：

`$('#itemDetails').popup('open');`

，但总是在屏幕上居中打开`x,y`，我想在屏幕顶部显示修复`(y=0)`，并在滚动时修复。

我该怎么做？，提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:23:43.257

像 CSS 这样的东西就足够了：

```
#itemDetails{
  position:fixed;
  top:0px;
} 
```

如果你真的想使用 jQuery，那么

```
$('#itemDetails').css({position:'fixed',top:'0'}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T17:08:39.297

该解决方案对我不起作用。将css放在.css文件中没有生效。我发现我需要使用第二种类型：

```
$("#popupBasic").popup('open');
$('#popupBasic').css({position:'fixed',top:'10px',left:'30px','display':'block'}); 
```

然后关闭弹出窗口：

```
$('#popupBasic').popup('close');
$('#popupBasic').css({display:'none'}); 
```

# mysql - 使用mysql获取错过的记录

> ID：15130427
> 
> 赞同：-1
> 
> 时间：2013-02-28T08:05:10.297
> 
> 标签：mysql, sql

我想从两个表中获取记录。我的示例表结构如下。我的表格和预期输出如下。我是这个领域的新手。请帮我创建这个.. 代码可能在 SQL 或 Mysql 中

```
Table 1   

Id   name
101  xx
102  xxx
103  ccc
104  cc
105  vv

Table 2     
Id   name category
101  xx   ww
102  xxx  qq 
```

我想得到这样的输出

```
Id   name  category
101  xx    ww
102  xxx   qq
103  ccc
104  cc
105  vv 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:07:04.663

您需要使用左连接：

```
SELECT
  t1.ID,
  t1.name,
  t2.category
FROM
  t1 LEFT JOIN t2
  ON t1.id=t2.id AND t1.name=t2.name 
```

请[在此处](http://sqlfiddle.com/#!2/db53b/1)查看小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:07:13.353

您可以`JOIN`为此使用：

```
SELECT Table_1.Id, Table_1.name, category 
FROM Table_1 LEFT JOIN Table_2 ON Table_1.Id=Table_2.Id 
```

另外，为什么你的表中有冗余？

# javascript - javascript - 修改输入到 TextBox 中的文本

> ID：15130428
> 
> 赞同：0
> 
> 时间：2013-02-28T08:05:10.873
> 
> 标签：javascript, html, gwt

我想捕捉一些文本输入到 TextBox 的事件并在用户看到更改之前对其进行修改。我尝试添加 keyDown、keyUp 和 keyPressed 事件，但它们都是在更改后调用的。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:14:30.323

这必须工作

```
 $("#input").keypress(function(replace){ 
        if(replace.which==46)
        {
            $("#input").val($(this).val() + 'no_dots');
            replace.preventDefault();
        }
  }); 
```

它替换（，）字符，试试这个代码我认为它`keypress`很好用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:24:55.853

这似乎是你所追求的。[http://jsfiddle.net/wcS9j/1/](http://jsfiddle.net/wcS9j/1/)

```
var blacklist = /(foo|bar)/ig;

$('input').on('keyup', function () {
    if (blacklist.test(this.value)) {
        this.value = this.value.replace(blacklist, '');
    }
}); 
```

# php - Twitter 作为 Silex 中的身份验证系统

> ID：15130431
> 
> 赞同：1
> 
> 时间：2013-02-28T08:05:13.697
> 
> 标签：php, security, twitter, authorization, silex

在我的项目中，我使用 Twitter 作为用户数据提供者。

我找到了这段代码：[https](https://gist.github.com/adeslade/1148079) ://gist.github.com/adeslade/1148079 我将它与这个自定义中间件一起使用

```
<?php

use Symfony\Component\HttpFoundation\RedirectResponse;

$app['controllers']
    -> before(function ($request) use ($app) {

        $path = substr($request -> getRequestUri(), strlen($request -> getBasePath()));

        // I put all twitter data in the session under the key "twitter"
        if (!$app['session'] -> has('twitter'))
            if (!preg_match("#^(/|/login(/.*)?)$#", $path))
                return new RedirectResponse('/');
    }); 
```

这很好用，但我希望使用像[GromNaN/FacebookServiceProvider](https://github.com/GromNaN/FacebookServiceProvider)和[sensiolabs/Silex-Connect这样的预安装工具](https://github.com/sensiolabs/Silex-Connect)[SecurityServiceProvider而](http://silex.sensiolabs.org/doc/providers/security.html)**不会**浪费时间创建它。

 **是否建议按照我的意图进行，还是可以成为第二个大项目？**

# iphone - Facebook 分享只发布在我的墙而不是我的朋友墙 - ios

> ID：15130433
> 
> 赞同：0
> 
> 时间：2013-02-28T08:05:22.090
> 
> 标签：iphone, ios, objective-c, facebook

我打算在 Facebook 上发布（图片、字符串或链接）。当我尝试使用以下代码发布时，它只发布在我的墙上，而不显示在我的朋友墙上。

允许 ：

"read_stream","publish_stream","email","user_birthday","friends_about_me","friends_activities","friends_likes"。

```
 - (IBAction)fblogin:(id)sender {

     AppDelegate *getdelegate=(AppDelegate *)[[UIApplication sharedApplication]delegate];

     getdelegate.facebook.sessionDelegate=self;

     Reachability *reachability = [Reachability reachabilityForInternetConnection];

     NetworkStatus internetStatus = [reachability currentReachabilityStatus];

     if (internetStatus != NotReachable) {

        if([getdelegate.facebook isSessionValid])

        {

            NSLog(@"User already logined with facebook");

        }

        else

        {

            [getdelegate.facebook authorize:[NSArray arrayWithObjects:@"read_stream",@"publish_stream",@"email",@"user_birthday",@"friends_about_me",@"friends_activities",@"friends_likes",nil]];

        }

    }

    else

    {

        NSLog(@"No Internet Connection");

    }

    }

    - (void)fbDidLogin

    {

    AppDelegate *getdelegate=(AppDelegate *)[[UIApplication sharedApplication]delegate];

    [getdelegate.facebook requestWithGraphPath:@"me" andDelegate:self];

}

- (void) request:(FBRequest*)request didLoad:(id)result

{

    AppDelegate *getdelegate=(AppDelegate *)[[UIApplication sharedApplication]delegate];

    if ([result isKindOfClass:[NSDictionary class]])

    {

    }
}

- (IBAction)Sharebutton:(id)sender

{

    AppDelegate *getdelegate=(AppDelegate *)[[UIApplication sharedApplication]delegate];

    NSLog(@"TOKEN:%@",getdelegate.facebook.accessToken);

    NSURL *url = [NSURL URLWithString:@"http://www.facebook.com/images/devsite/iphone_connect_btn.jpg"];

    NSData *data = [NSData dataWithContentsOfURL:url];

    UIImage *img= [[UIImage alloc] initWithData:data];

    NSMutableDictionary * params = [NSMutableDictionary dictionaryWithObjectsAndKeys:img,@"picture",@"http://www.google.com",@"link",@"Message text",@"message",nil];

    [[getdelegate facebook] requestWithGraphPath:@"me/feed"

                                       andParams:params

                                   andHttpMethod:@"POST"

                                     andDelegate:self];

} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:05:25.887

阅读 Facebook 方法中更改的此链接

[https://developers.facebook.com/roadmap/completed-changes/](https://developers.facebook.com/roadmap/completed-changes/)

IdOfFriend/Feed 方法不再起作用

阅读它以获得更多帮助：

[https://developers.facebook.com/docs/howtos/ios-6/](https://developers.facebook.com/docs/howtos/ios-6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:10:12.700

```
[[getdelegate facebook] requestWithGraphPath:@"me/feed"

                                       andParams:params

                                   andHttpMethod:@"POST"

                                     andDelegate:self]; 
```

而不是“我/饲料”，你必须提供你想在墙上分享的朋友的 facebook id。

# c# - 数据模型和类库 - 如何将虚拟属性添加到其他类库中的对象？

> ID：15130440
> 
> 赞同：0
> 
> 时间：2013-02-28T08:06:06.187
> 
> 标签：c#, entity-framework, shared-libraries

我有两个用于数据模型和数据库上下文的库。

1.  基本与对象

    ```
    public class Person
    {
        [Key]
        public int ID { get; set; }
        public string Name { get; set; }
        public string SName { get; set; }
        public bool IsSystemUser { get; set; }            
    } 
    ```

2.  扩展

    ```
    public class Vehicle
    {
      [Key]
      public int Id { get; set; }
      public string Name { get; set; }
      public string Plate { get; set; }    
      public virtual ICollection<Person> Users { get; set; }
    } 
    ```

如何添加公共虚拟 ICollection Vehicles { get; 放; } 到第一类库中的对象。EF 正在正确生成数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:16:51.077

使用扩展方法，您可以向类添加方法：

[http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:35:21.140

> 在第二个库中，我想扩展在第一个库中定义的 Person，因此它可以与第二个库中的对象有多对多的关系。

您可以扩展基础库的`Person`类：

```
using BasePerson = BaseLibrary.Person;

public class Person : BasePerson
{
    public virtual ICollection Vehicles { get; set; }
} 
```

这仅在您还扩展 DbContext 时才有效：

```
using BaseContext = BaseLibrary.MyContext;

public class MyExtendedContext : BaseContext
{
    public new DbSet<Person> Persons { get; set; }
} 
```

现在，当您使用时，`MyExtendedContext`您将能够访问 Vehicles-collection。

# c# - 使用 .PerformClick() 获取 EventArgument

> ID：15130441
> 
> 赞同：0
> 
> 时间：2013-02-28T08:06:06.543
> 
> 标签：c#

我尝试使用 .PerformClick 创建动态按钮并在不导入 Dll 的情况下模拟 Mouseclick。

代码：

```
for (int i = 0; i < save.Count; i++)
{
    Button tempButtonForClick = new Button();
    tempButtonForClick.Location = save[i].SaveRegion.Location;
    Cursor.Position = save[i].SaveRegion.Location;
    tempButtonForClick.Size = save[i].SaveRegion.Size;
    tempButtonForClick.Click += new EventHandler(MainPanelClicks);
    MainPanel.Controls.Add(tempButtonForClick);
    tempButtonForClick.PerformClick();
    ...
} 
```

问题是，我使用该方法得到了一个空的 EventArgs。有没有办法获得“正常”的 EventArgument？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:40:24.863

我真的不鼓励你这样做，但如果你真的想要它，那就去吧。（最好的办法是创建一个额外的控制层并从该层触发事物——Action Manager 层）。

首先，为自己创建一个不错的小扩展方法容器类，例如：

```
public static class ButtonExtensions {

    // Button indirectly extends Control
    // Control has a protected method: protected void OnClick(EventArgs e);
    // you can't call it directly, you need to do it via reflection
    private static readonly MethodInfo controlsOnClickMethod = typeof(Control).GetMethod("OnClick", BindingFlags.Instance | BindingFlags.NonPublic);

    // Although the second parameter of the Button.Click event
    // is syntactically: EventArgs
    // at runtime, it is usually a MouseEventArgs
    // so that's what we're going to send it
    public static void PerformClickEx(this Button @this, MouseEventArgs args) {
        ButtonExtensions.controlsOnClickMethod.Invoke(@this, new object[] { args });
    }

} 
```

你怎么用这个？真的很容易：

```
public class Foo {

    private Button someButton;

    public void Bar() {
        this.someButton.PerformClickEx(new MouseEventArgs(MouseButtons.Right, 1, 100, 100, 2));
    }
} 
```

你会得到非常想要的、非空的、充满鼠标信息的EventArgs（实际上是一个MouseEventArgs）:)

# javascript - javascript中的'this'关键字返回不同

> ID：15130442
> 
> 赞同：2
> 
> 时间：2013-02-28T08:06:07.800
> 
> 标签：javascript

为什么**`this`**关键字在下面的代码中表示不同的值？

```
var t = {
    a: "a",
    b: {
        c: "c",
        d: function () {
            return this;
        }
    },
    f: function () {
        return this;
    },
    g: this
}

var k = t.f(),
    l = t.g;

alert(k); // returns [object object] i.e 't'
alert(l); // returns [object DOMWindow] i.e 'window' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T08:14:21.747

如果您习惯于其他一些编程语言，如 C++、Java 或 C#，那么了解`this`JavaScript 的第一件事是：它与其他语言完全不同`this`，尽管它看起来非常相似，有时甚至行为相似。

在创建`t`对象时，您会捕获对象创建时的*值*`this`并将其存储在属性中`g`。因此`g`，无论`this`何时`t`创建。因为默认情况下`this`指的是全局对象（`window`浏览器上的 , ），除非您使用严格模式，否则就是`t.g`这样。

相反，您的`t.f`函数被*调用*并返回`this`存在*于 call*中的值。在 JavaScript（目前）中，`this`完全取决于*函数的调用方式*，而不是定义的位置。特别是，当您将函数作为从属性引用中检索函数的表达式的一部分调用时，`this`将设置为调用中的对象。这是一种复杂的说法，当你这样做时`t.f()`，在调用期间`f`，`this`将会`t`。

一些进一步的阅读（在我的博客上）：

*   [*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)
*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)

# apache - 从响应头中删除服务器信息和 PHP 信息

> ID：15130443
> 
> 赞同：27
> 
> 时间：2013-02-28T08:06:09.010
> 
> 标签：apache, php-ini

我如何防止`server info`并`php info`在响应标题中显示

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-28T08:08:41.923

对于服务器信息，在 apache2.conf 中添加以下行

```
ServerTokens ProductOnly

ServerSignature Off 
```

对于 PHP 信息

在你的 php.ini

转动

```
expose_php = off 
```

# php - 带有幽灵数据的 MySQL 数据库？

> ID：15130444
> 
> 赞同：1
> 
> 时间：2013-02-28T08:06:09.143
> 
> 标签：php, mysql, plugins

不久前我写了一个 PHP 工具，它允许我们在内部独立安装中为我们的客户自动设置免费的 MySQL 数据库。它工作正常，但由于硬件故障，我们最近被迫迁移数据库。

这样做之后，现有的 MySQL 数据库中似乎有某种类型的幽灵数据。我们在 PHPMyAdmin 中看不到这些表格，但我们客户的插件和我们自己的一些工具可以检测到这些表格。

我以前从未听说过这样的 MySQL Ghost Data，我想知道是否有人知道这是从哪里来的或如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:02:25.533

幽灵数据..有趣！我不确定，但我认为您在谈论 INFORMATION_SCHEMA，它提供对数据库元数据的访问。[检查这个](http://dev.mysql.com/doc/refman/5.0/en/information-schema.html)

而且，无论您迁移到哪里，大多数数据库都有这些元数据表。例如：SQL SERVER 有 sysobjects 或 sysusers 表等等……

# android - Android相机setDisplayOrientation不起作用

> ID：15130447
> 
> 赞同：7
> 
> 时间：2013-02-28T08:06:18.043
> 
> 标签：android, android-camera

我在android中工作相机项目。我的问题是相机`setDisplayOrientation`方法不起作用，我在表面上的相机预览总是横向的。我希望在SurfaceView上期待纵向相机预览。我正在使用三星 Galaxy y (Android 2.3.5)，我的活动代码如下所示：

```
import java.io.IOException;

import android.app.Activity;
import android.graphics.PixelFormat;
import android.hardware.Camera;
import android.os.Bundle;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.widget.Button;

public class AndroidCamera extends Activity implements SurfaceHolder.Callback{

 Camera camera;
 SurfaceView surfaceView;
 SurfaceHolder surfaceHolder;
 boolean previewing = false;;

 String stringPath = "/sdcard/samplevideo.3gp";

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       Button buttonStartCameraPreview = (Button)findViewById(R.id.startcamerapreview);
       Button buttonStopCameraPreview = (Button)findViewById(R.id.stopcamerapreview);

       getWindow().setFormat(PixelFormat.UNKNOWN);
       surfaceView = (SurfaceView)findViewById(R.id.surfaceview);
       surfaceHolder = surfaceView.getHolder();
       surfaceHolder.addCallback(this);
       surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

       buttonStartCameraPreview.setOnClickListener(new Button.OnClickListener(){

   @Override
   public void onClick(View v) {
    // TODO Auto-generated method stub
    if(!previewing){
     camera = Camera.open();
     if (camera != null){
      try {
       camera.setDisplayOrientation(90);
       camera.setPreviewDisplay(surfaceHolder);
       camera.startPreview();
       previewing = true;
      } catch (IOException e) {
       // TODO Auto-generated catch block
       e.printStackTrace();
      }
     }
    }
   }});

       buttonStopCameraPreview.setOnClickListener(new Button.OnClickListener(){

   @Override
   public void onClick(View v) {
    // TODO Auto-generated method stub
    if(camera != null && previewing){
     camera.stopPreview();
     camera.release();
     camera = null;

     previewing = false;
    }
   }});

   }

 @Override
 public void surfaceChanged(SurfaceHolder holder, int format, int width,
   int height) {
  // TODO Auto-generated method stub

 }

 @Override
 public void surfaceCreated(SurfaceHolder holder) {
  // TODO Auto-generated method stub

 }

 @Override
 public void surfaceDestroyed(SurfaceHolder holder) {
  // TODO Auto-generated method stub

 }
} 
```

我的问题显示了打击图：

![在此处输入图像描述](../Images/1c5eabea4e880782b0606e0730de8f56.png)

任何人都可以提供任何代码或教程链接，感谢您花费宝贵的时间

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T05:14:42.870

最后我得到了解决方案并找到以下代码的相机预览表面视图：

```
import java.io.IOException;
import java.util.List;
import android.app.Activity;
import android.content.Context;
import android.content.res.Configuration;
import android.hardware.Camera;
import android.os.Build;
import android.util.Log;
import android.view.Display;
import android.view.Surface;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
    private SurfaceHolder mHolder;
    private Camera mCamera;

    private static boolean DEBUGGING = true;
    private static final String LOG_TAG = "CameraPreviewSample";
    private static final String CAMERA_PARAM_ORIENTATION = "orientation";
    private static final String CAMERA_PARAM_LANDSCAPE = "landscape";
    private static final String CAMERA_PARAM_PORTRAIT = "portrait";
    protected Activity mActivity;

    protected List<Camera.Size> mPreviewSizeList;
    protected List<Camera.Size> mPictureSizeList;
    protected Camera.Size mPreviewSize;
    protected Camera.Size mPictureSize;

    public CameraPreview(Context context, Camera camera) {
        super(context);

        mActivity=(Activity)context;
        mCamera = camera;

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);
        // deprecated setting, but required on Android versions prior to 3.0
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    }

    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, now tell the camera where to draw the preview.
        try {
            mCamera.setPreviewDisplay(holder);
            mCamera.startPreview();
        } catch (IOException e) {
            Log.d("CameraView", "Error setting camera preview: " + e.getMessage());
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // empty. Take care of releasing the Camera preview in your activity.
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // If your preview can change or rotate, take care of those events here.
        // Make sure to stop the preview before resizing or reformatting it.

        if (mHolder.getSurface() == null){
          // preview surface does not exist
          return;
        }

        // stop preview before making changes
        try {
           // mCamera.stopPreview();
        } catch (Exception e){
          // ignore: tried to stop a non-existent preview
        }

        // set preview size and make any resize, rotate or
        // reformatting changes here

        // start preview with new settings
        try {
            Camera.Parameters cameraParams = mCamera.getParameters();
            boolean portrait = isPortrait();
            configureCameraParameters(cameraParams, portrait);

            mCamera.setPreviewDisplay(mHolder);
            mCamera.startPreview();

        } catch (Exception e){
            Log.d("CameraView", "Error starting camera preview: " + e.getMessage());
        }
    }

    public void onPause() {
        mCamera.release();
        mCamera = null;
    }

    protected void configureCameraParameters(Camera.Parameters cameraParams, boolean portrait) {
        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.FROYO) { // for 2.1 and before
            if (portrait) {
                cameraParams.set(CAMERA_PARAM_ORIENTATION, CAMERA_PARAM_PORTRAIT);
            } else {
                cameraParams.set(CAMERA_PARAM_ORIENTATION, CAMERA_PARAM_LANDSCAPE);
            }
        } else { // for 2.2 and later
            int angle;
            Display display = mActivity.getWindowManager().getDefaultDisplay();
            switch (display.getRotation()) {
                case Surface.ROTATION_0: // This is display orientation
                    angle = 90; // This is camera orientation
                    break;
                case Surface.ROTATION_90:
                    angle = 0;
                    break;
                case Surface.ROTATION_180:
                    angle = 270;
                    break;
                case Surface.ROTATION_270:
                    angle = 180;
                    break;
                default:
                    angle = 90;
                    break;
            }
            Log.v(LOG_TAG, "angle: " + angle);
            mCamera.setDisplayOrientation(angle);
        }

        cameraParams.setPreviewSize(mPreviewSize.width, mPreviewSize.height);
        cameraParams.setPictureSize(mPictureSize.width, mPictureSize.height);
        if (DEBUGGING) {
            Log.v(LOG_TAG, "Preview Actual Size - w: " + mPreviewSize.width + ", h: " + mPreviewSize.height);
            Log.v(LOG_TAG, "Picture Actual Size - w: " + mPictureSize.width + ", h: " + mPictureSize.height);
        }

        mCamera.setParameters(cameraParams);
    }

    public boolean isPortrait() {
        return (mActivity.getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT);
    }
} 
```

**它需要最低 sdk 2.3 或更高版本**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:13:22.153

如果你想旋转预览输出，试试这个：

```
public void surfaceChanged(SurfaceHolder holder, int format, int width, int height)
    {            
        if (isPreviewRunning)
        {
            mCamera.stopPreview();
        }

        Parameters parameters = mCamera.getParameters();
        Display display = ((WindowManager)getSystemService(WINDOW_SERVICE)).getDefaultDisplay();

        if(display.getRotation() == Surface.ROTATION_0)
        {
            parameters.setPreviewSize(height, width);                           
            mCamera.setDisplayOrientation(90);
        }

        if(display.getRotation() == Surface.ROTATION_90)
        {
            parameters.setPreviewSize(width, height);                           
        }

        if(display.getRotation() == Surface.ROTATION_180)
        {
            parameters.setPreviewSize(height, width);               
        }

        if(display.getRotation() == Surface.ROTATION_270)
        {
            parameters.setPreviewSize(width, height);
            mCamera.setDisplayOrientation(180);
        }

        mCamera.setParameters(parameters);
        previewCamera();                      
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T10:49:48.173

对于较低的 API 级别，您可以使用：

```
private void setCameraDisplayOrientationAPI8(){
        //Sets the camera right Orientation.
        //Special void for API 8 build.
        //This void should be called before calling camera.setParameters(cameraParameters).
        if (activeActivity.getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)
        {   
            camera.setDisplayOrientation(90);
        }
        if (activeActivity.getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE)
        {                               
            camera.setDisplayOrientation(180);
        }
    } 
```

只需调用`setCameraDisplayOrientationAPI8();`您的`surfaceChanged`功能即可。

加：

```
private void setCameraDisplayOrientation() {
        //Sets the camera right Orientation.
        //IMPORTANT!! This code is available only for API Level 9 build or greater.
        if (mApiLvl<9){
            Log.d(TAG, "setCameraDisplayOrientation ERROR: This code is available only for API Level 9 build or greater.");
            return;
        }
        android.hardware.Camera.CameraInfo info =
                new android.hardware.Camera.CameraInfo();
        android.hardware.Camera.getCameraInfo(cameraIndex, info);
        int rotation = activeActivity.getWindowManager().getDefaultDisplay()
                .getRotation();
        int degrees = 0;
        switch (rotation) {
            case Surface.ROTATION_0: degrees = 0; break;
            case Surface.ROTATION_90: degrees = 90; break;
            case Surface.ROTATION_180: degrees = 180; break;
            case Surface.ROTATION_270: degrees = 270; break;
        }

        int result;
        if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
            result = (info.orientation + degrees) % 360;
            result = (360 - result) % 360;  // compensate the mirror
        } else {  // back-facing
            result = (info.orientation - degrees + 360) % 360;
        }
        camera.setDisplayOrientation(result);
    } 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-28T13:06:21.973

此外，请检查手机设置中是否选中了“自动旋转屏幕”选项（设置 > 显示或屏幕 - 取决于 android 版本）。

我花了很长时间才弄明白。如果未选中，则应用程序中的相机方向可能会被忽略。

# dojo - dojo中函数的目的是什么？

> ID：15130450
> 
> 赞同：1
> 
> 时间：2013-02-28T08:06:29.377
> 
> 标签：dojo

```
// Load the dom module
require(["dojo/dom"], function(dom){
}); 
```

我知道在加载 dom 模块时会调用该函数，但我不清楚该函数中的代码是什么。它是我页面上所有 javascript 代码的容器吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T11:43:17.760

该函数是回调函数，当 AMD 加载器加载了您需要的所有模块时，它会调用该函数。

如果我有

```
require(["dojo/_base/ready", "dojo/_base/declare"], function(ready, declare) {

  // do something with declare and ready

}); 
```

AMD 将准备好加载并声明。这可能需要 AMD 向服务器进行异步回调。一旦 AMD 加载了模块，它就会调用您传递给`require`方法的函数。

我在 Dojo Builds 的回答[...？现在怎么办？](https://stackoverflow.com/questions/12922618/dojo-builds-what-now/12922801#12922801)有关 AMD API 的更多详细信息。

* * *

回答评论中的问题。以下两个语句可以在页面上的任何位置。

```
<script type="text/javascript">
require(["dojo/_base/ready", "dojo/_base/declare"], function(ready, declare) {
   // do something with declare and ready
});
</script>

<script type="text/javascript">
require(["dojo/_base/ready", "dojo/_base/declare", "dijit/form/Button"], 
   function(ready, declare, Button) {
     // Assuming this is the second statement to be executed, AMD will 
     // realize that ready and declare have previously been loaded,
     // so it will use the previously loaded modules, load the Button module, 
     // and then execute the callback

     // do something with declare, ready, and Button
});
</script> 
```

# c# - 将我的应用程序时间与外部服务器时间同步的最佳方法是什么？

> ID：15130459
> 
> 赞同：3
> 
> 时间：2013-02-28T08:06:56.760
> 
> 标签：c#, synchronization, clock

我正在考虑将系统的本地时间更改为服务器的时间，然后使用它，但我敢打赌还有其他方法可以做到这一点。我一直试图在 c# 中找到类似时钟的东西，但找不到任何东西。我以 DateTime 格式接收服务器的时间。

编辑：我需要我的应用程序在同一时间服务器工作时使用。我只想获得一次服务器的时间，然后使用从服务器获得的时间让我的应用程序在一个while循环中工作。我的系统时间和服务器时间（甚至 5 秒）之间可能存在差异，这就是我想要这样做的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T08:11:01.290

您的意思并不完全清楚，但您当然可以创建自己的`IClock`接口，您可以在代码中的任何地方使用该接口，然后编写一个与您的服务器（或与 NTP）定期同步的实现。

我的[Noda Time](http://noda-time.googlecode.com)项目已经使用了可注入时钟的概念——不是为了同步，而是为了可测试性。（时间服务基本上是一个依赖项。）基本上这个想法是可行的 :) 你很可能找不到任何已经这样做的东西，但写起来应该不会太难。不过，您需要考虑如何调整时间 - 例如，如果服务器时间超过您的“上次服务器时间 + 本地时间测量值”，您可能希望逐渐调整它而不是离散跳跃。

当然，这总是假设您*确实*希望它在您的应用程序中是本地的。另一种选择（这可能不合适，取决于您的上下文）是要求主机运行时间同步客户端（我*相信*这些天默认情况下Windows会这样做）并且如果您的服务器和客户端之间的差异变得简单，则开始失败太大了。（无论如何，它永远不会*完全*同步，或者至少不会很长时间 - 你需要留出*一些*余地。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T09:37:41.460

@JonSkeet 提供的同步时间的答案看起来不错，我只是想指出一些事情。

正如@Alexei 已经说过的那样，用户需要管理员权限才能更改他们的本地时间（至少在 Windows 中），但也可能存在其他可能导致时间不同步的问题（糟糕的互联网连接、黑客攻击等）。 ）。这意味着不能保证客户端时间确实与服务器时间相同，因此您至少需要检查服务器端收到请求的时间。另外，这里可能还存在可用性问题，我是否希望应用程序能够更改我自己的本地计算机的时间？一定不行。

总结一下：

*   至少检查请求服务器端的时间
*   不要更改客户端机器的时间，而是在您的应用程序中显示某种指示器

如何处理应用程序中的指标可以通过多种方式完成。

*   在您的应用程序（您最初的想法）中显示一个与服务器定期同步的时钟
*   显示某种倒计时（*“您可以在 x 秒后提交..”*），在收到请求时向客户端推送 resetCountdown 请求。
*   启用“发送按钮”或您拥有的任何东西，这类似于倒计时。

请记住，几乎不可能验证像这个客户端这样的请求。所以你必须在服务器端建立一些检查！

我实际上想写一个评论，但它有点长.. :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-09T16:36:40.347

好吧，有点死灵法，因为这是 6 岁，但不得不为网络游戏处理类似的问题。

采用了一种我称之为“马可波罗”的技术，原因很快就会很明显。它需要两个时钟能够交换消息，其准确性取决于它们能够以多快的速度做到这一点。

免责声明：我很确定我不是第一个这样做的人，这是同步两个时钟的最基本方法。我仍然没有找到这样做的记录方法。

在时钟 B（我们尝试同步的时钟），我们执行以下操作::

```
// Log the timestamp
localTime_Marco_Send = DateTime.UtcNow;

// Send that to clock A
SendSyncRequest();

// Wait for an answer
Sleep(..); 
```

在时钟 A（参考时钟）处，我们有以下处理程序 ::

```
// This is triggered by SendSyncRequest
OnReceiveSyncRequest()
{
    // We received "Marco" - Send "Polo"
    SendSyncReply(DateTime.UtcNow);
} 
```

回到时钟B::

```
// This is triggered by SendSyncReply
OnReceiveSyncReply(DateTime remoteHalfTime)
{
    // Log the time we received it
    DateTime localTime_Polo_Receive = DateTime.UtcNow;

    // The remote time is somewhere between the two local times
    // On average, it will be in the middle of the two
    DateTime localHalfTime = localTime_Marco_Send  + 
         (localTime_Polo_Receive - localTime_Marco_Send) / 2;

    // As a result, the estimated dT from A to B is
    TimeSpan estimatedDT_A_B = localHalfTime - remoteHalfTime;
} 
```

因此，我们现在可以访问一个漂亮的 TimeSpan，我们可以从当前本地时间中减去来估计远程时间

```
DateTime estimatedRemoteTime = DateTime.UtcNow - estimatedDT_A_B; 
```

这个估计的准确性取决于发送-接收-发送-接收的往返时间，您还应该考虑时钟漂移（您应该多次这样做）：

1.  往返时间。如果它是即时的，那么您将获得准确的 dT。如果来回需要1秒钟，你不知道延迟是在发送还是接收。结果，您的错误为 0 < e < RTT，平均为 RTT/2。如果您知道发送（或接收）比另一个花费更多，请利用它来发挥您的优势 - 您收到的时间不是半场时间，而是相对于每条腿花费的时间
2.  时钟漂移。CPU 时钟漂移，可能每天 1 秒。因此，一旦潜在的漂移再次轮询可能会发挥重要作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T08:12:11.987

您的服务器应始终以 UTC 模式保存时间。
您可以在服务器中像这样在 UTC 中节省时间：

```
 DateTime utcTime = new DateTime(0, DateTimeKind.Utc); 
```

或者：

```
 DateTime utcTimeNow = DateTime.UtcNow; 
```

在客户端中，当您获得存储在 utc 中的时间时，您可以将其转换为本地时间，如下所示：

```
 public DateTime ToLocalTime(DateTime utcTime)
    {
        //Assumes that even if utcTime kind is no properly deifned it is indeed UTC time
        DateTime serverTime= new DateTime(utcTime.Ticks, DateTimeKind.Utc);
        return TimeZoneInfo.ConvertTimeFromUtc(serverTime, m_localTimeZone);            
    } 
```

如果你想改变你的本地时区，这里有一个关于如何从配置中读取时区的代码示例：

```
string localTimeZoneId = sysParamsHelper.ReadString(LOCAL_TIME_ZONE_ID_KEY, LOCAL_TIME_ZONE_DEFAULT_ID);
    ReadOnlyCollection<TimeZoneInfo> timeZones = TimeZoneInfo.GetSystemTimeZones();

    foreach (TimeZoneInfo timeZoneInfo in timeZones)
    {                
       if(timeZoneInfo.Id.Equals(localTimeZoneId))
       {
           m_localTimeZone = timeZoneInfo;
           break;
       }
    }

    if (m_localTimeZone == null)
    {
        m_logger.Error(LogTopicEnum.AMR, "Could not find time zone with id: " + localTimeZoneId + " . will use default time zone (UTC).");
        m_localTimeZone = TimeZoneInfo.Utc;
    } 
```

# vim - 什么 vim 模式匹配以点结尾的数字？

> ID：15130460
> 
> 赞同：4
> 
> 时间：2013-02-28T08:06:57.310
> 
> 标签：vim, syntax, vim-syntax-highlighting

在 PDP11/40 汇编语言中，以点结尾的数字被解释为十进制数。我使用以下模式，但无法匹配该表示法，例如`8.`：

```
syn match asmpdp11DecNumber /\<[0-9]\+\.\>/ 
```

当我`\.`用`D`模式替换时可以匹配`8D`没有任何问题。谁能告诉我我的“以点结尾”模式有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:31:40.523

您的正则表达式语法很好（好吧，您可以使用`\d`代替`[0-9]`），但您的`'iskeyword'`值不包括句点`.`，因此您无法匹配其后*的词尾*( `\>`)。

看起来您正在为自定义文件类型编写语法。一种选择是

```
:setlocal filetype+=. 
```

在相应的`~/.vim/ftplugin/asmpdp11.vim`文件类型插件中。当句点字符在您的语法中被视为关键字字符时，请执行此操作。

否则，删除`\>`以使正则表达式匹配。如果要确保句点后没有非空白字符，可以在匹配后断言该条件，例如：

```
:syn match asmpdp11DecNumber /\<\d\+\.\S\@!/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:19:41.810

请注意，一个词被 vim 定义为：

> 一个单词由一系列字母、数字和下划线或一系列其他非空白字符组成，用空格（空格、制表符、）分隔。这可以通过 'iskeyword' 选项进行更改。空行也被认为是一个单词。

因此，如果空格跟在数字后面，则您的模式可以正常工作。您可能想跳过`\>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T08:23:31.653

我认为问题在于您的词尾边界标记。尝试这个：

```
syn match asmpdp11DecNumber /\<[0-9]\+\./ 
```

请注意，我已经删除了`\>`词尾边界。我不确定那是做什么用的，但是如果您将其删除，它似乎可以工作。A`.`不被视为单词的一部分，这就是您的版本失败的原因。

# objective-c - 将 characterAtIndex 分配给 characterAtIndex

> ID：15130461
> 
> 赞同：-2
> 
> 时间：2013-02-28T08:07:01.870
> 
> 标签：objective-c

```
[a characterAtIndex:0] = [b characterAtIndex:0]; 
```

我想将 charAt a 分配给 charAt b。

但是失败了，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:18:05.190

```
 NSMutableString *a = [NSMutableString stringWithString:@"HOUSE" ];

  NSString *b= @"MUSIC";

 [a replaceCharactersInRange:NSMakeRange(0, 1) withString:[b substringWithRange:NSMakeRange(0, 1)]]; 
```

结果你得到了鼠标;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:57:57.233

如果您正在寻找这样的方法：`setCharacter:atIndex:`

然后看下面的代码：

```
NSMutableString *string=[NSMutableString stringWithString:@"abcdefgh"];

[string setCharacter:'X' atIndex:0]; //Note X is character not string so "X" and its is primitive therefore even @ is not prefixed.

NSLog(@"%@",string); 
```

这是通过`NSMutableString`其方法实现的类别来实现的

```
@implementation NSMutableString (SetCharacterAtIndex)

- (void)setCharacter:(char)character atIndex:(NSUInteger)index;{

    [self replaceCharactersInRange:NSMakeRange(index, 1) withString:[NSString stringWithFormat:@"%c",character]];

} 
```

编辑：

有了上述方法后，您可以使用：

~~[a characterAtIndex:0] = [b characterAtIndex:0];~~

```
[a setCharacter:[b characterAtIndex:0] atIndex:0]; 
```

# jquery - Jquery：即使只选择了一个孩子，也可以在 textarea 中显示父级

> ID：15130465
> 
> 赞同：0
> 
> 时间：2013-02-28T08:07:09.737
> 
> 标签：jquery, select, checkbox, parent-child

我有复选框列表，如果选择了子项，则自动选择了父项，然后所有选择都显示在 textarea 中。

问题：

当只选择一个孩子时，父母不显示在文本区域中。选择何时选择更多1个孩子。即使只选择了一个孩子，我也需要在 textarea 上显示父级

代码：http: [//jsfiddle.net/NVhnw/](http://jsfiddle.net/NVhnw/)

html:

```
 <ul class="taglist">
            <li class="category">Category:
                <ul>                
                    <li class="category"><input type="checkbox" name="A" value="Parent">Parent
                           <ul>     
                                <li><input type="checkbox" class="liChild" name="A" value="Child1">Child1</li>      
                                <li><input type="checkbox" class="liChild" name="A" value="Child2">Child2</li>      
                            </ul>
                    </li>   
                </ul>   
            </ul>          
            <br/>
            You checked:
            <br/>
            <textarea rows="4" cols="50" class="textfield"  name="describe" class="required" id="describe">
            </textarea> 
```

查询：

```
 //* Parent select if children selected*//

                $(document).ready(function() {
                $('input.liChild').change(function() {
                    $(this).closest('ul')
                           .siblings('input:checkbox')
                           .prop('checked', $(this).closest('ul')
                                                   .children()
                                                   .children('input:checkbox')
                                                   .is(':checked'))
                           .first().change();
                });

                $('li.category').addClass('plusimageapply');
                $('li.category').children().addClass('selectedimage');
                $('li.category').children().hide();
                $('li.category').each(
                function(column) {
                $(this).click(function(event){
                if (this == event.target) {
                if($(this).is('.plusimageapply')) {
                $(this).children().show();
                $(this).removeClass('plusimageapply');
                $(this).addClass('minusimageapply');
                }
                else
                {
                $(this).children().hide();
                $(this).removeClass('minusimageapply');
                $(this).addClass('plusimageapply');
                }
                }
                });
                }
                );
                });

                //*Text area update*//
                function updateTextArea() {     
                   var allVals = [];
                   $('.taglist :checked').each(function(i) {

                       allVals.push((i!=0?"\r\n":"")+ $(this).val());
                   });
                   $('#describe').val(allVals).attr('rows',allVals.length) ;

                   }
                   $(function() {
                      $('.taglist input').click(updateTextArea);
                      updateTextArea();
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:13:49.860

改变这个：

```
$('input.liChild').change(function() { 
```

到

```
$('input.liChild').click(function() { 
```

这在你的小提琴上对我有用

# ios - png 图像不使用 ios 5.1 加载

> ID：15130467
> 
> 赞同：0
> 
> 时间：2013-02-28T08:07:15.557
> 
> 标签：ios, ipad, ios-simulator

我的应用程序中有几个**png 图像**，并且我已将其放置在 xib 的**UIImageView**中，但问题是图像在**ios 6.0模拟器中加载良好，但图像在****ios 5.1 模拟器**中不可见，我的**Xcode 版本是 4.5**与我的相同ipad 3 中的设备加载良好，ipad 1 不可见 图像分辨率有任何问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:47:07.233

确保添加扩展名：

```
UIImage *image = [UIImage imageNamed:@"image.png"]; 
```

# jquery - 在非 Razor 视图中使用 Jquery Unobtrusive 进行客户端 MVC 模态验证

> ID：15130468
> 
> 赞同：0
> 
> 时间：2013-02-28T08:07:16.720
> 
> 标签：jquery, asp.net-mvc, data-annotations, unobtrusive-validation

我的控制器返回 JsonResult 并且我根本不想使用 Razor 视图，我想要使用 JQuery AJAX 的普通 Html 页面向控制器操作发出请求。我能够做到这一切，但我希望 JQuery 使用 Jquery 不显眼地验证我的模式（比如说在创建订单 [表单验证] 时），以便我可以显示 Dataannotation 属性错误消息而不是客户端验证错误。

请参阅下面的代码

我的控制器代码如下

```
 [HttpPost]
    public JsonResult SaveMovies(Movie movie)
    {
        AjaxResponse response = new AjaxResponse { Success = false };
        try
        {
            _movieRepository.Add(movie);
            _movieRepository.Save();
            response.Data = "Movie added";
            response.Success = true;
        }
        catch (Exception ex)
        {
            response.Success = false;
            response.Message = "An exception occur while fetching data" + Environment.NewLine + "Method: " + ex.TargetSite + Environment.NewLine + "Source: " + ex.Source + Environment.NewLine + "Message: " + ex.Message;
            MoviesLogger logger = new MoviesLogger();
            logger.Error(ex);
        }
        return Json(response, JsonRequestBehavior.AllowGet);
    } 
```

我的 Jquery 代码如下

```
 $("#save").click(function () {

        var movie = {
            Title: $('#TitleTextBox').val(),
            ReleaseDate: $('#ReleaseDateTextBox').val(),
            Genre: $('#GenreTextBox').val(),
        };

        if (isValid(movie)) {
            SendRequest("Movies", "SaveMovies", JSON.stringify(movie), "post", function (response) { // AJAX Success
                $("#Notification").html("Movie Added");
            }, function (response) { // AJAX Fail
                alert("Fail");
                alert(response.Message);
            });
        }
        else {
            $('#errorDiv').html(""); // THIS DIV WILL LIST ALL THE error messages FROM MY POCO CLASS DataAnnotations Attributes
        }
    }); 
```

函数isValid代码如下

```
 function isValid(Movie) {
    try {
        /*
                       I WANT TO VALIDATE THE POCO MODAL(Movie) AGAINST ALL DataAnnotations Attributes set in there
                       MY Movie POCO is as under

                       public class Movie
                       {
                           [Key]
                           public int ID { get; set; }
                           [StringLength(20)]
                           [Required(ErrorMessage="Title is required")]
                           public string Title { get; set; }
                           public DateTime ReleaseDate { get; set; }
                           public string Genre { get; set; }
                       }
                       */
        return true;
    } catch (e) {
        return false;
    }
} 
```

函数 SendRequest 代码如下

```
 function SendRequest(controller, action, data, type, onSuccess, onError) {
        if (type.toLowerCase() == 'post')
            data = JSON.stringify(data);
        $.ajax({
            url: baseUrl + '/' + controller + '/' + action,
            dataType: 'json',
            type: type,
            data: data,
            contentType: "application/json; charset=utf-8",
            success: onSuccess,
            error: onError
        }); 
```

# javascript - 使用 Linq.js 从 Json 数据的三个字段中选择两个字段

> ID：15130470
> 
> 赞同：2
> 
> 时间：2013-02-28T08:07:23.610
> 
> 标签：javascript, underscore.js, linq.js

我需要使用**Linq.js从****Json**数据的三个字段中选择两个字段

 **所需的输出应该是

```
[{ "A": -27, C: "country 1" } , { "A": 28 , C: "country 2"} ] 
```

从以下路径使用“linq.js”：[ [https://raw.github.com/gist/1175460/fb7404d46cab20e31601740ab8b35d99a584f941/linq.js](https://raw.github.com/gist/1175460/fb7404d46cab20e31601740ab8b35d99a584f941/linq.js) ]

样本数据

```
var Data = [{ "A": -27, "B": -39, C: "country 1" }, { "A": 28, "B": 0 , C: "country 2"}]

var filter = "  x =>    x['A'], x['C']  ";
var findItem = Enumerable.From(Data)
.Select(filter)
.ToArray();

console.log(findItem); 
```

JsFiddle 的代码：http: [//jsfiddle.net/gLXNw/9/](http://jsfiddle.net/gLXNw/9/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T08:20:43.040

您的“lambda”函数必须返回一个有效的 java 对象。

您的查询应该更像这样：

```
var query = Enumerable.From(data)
    .Select("x => { A: x['A'], X: x['C'] }") // object initializer
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-28T08:34:29.590

您可以在结果选择器中使用函数而不是 lambda（如果不是出于政治原因使用 lambda 表达式:)）

```
var findItem = Enumerable.From(Data)
.Select(function(x){
    return {
        'A': x['A'], 
        'X': x['C']
    };
}).ToArray(); 
```**

# php - 通过每个单词的每个字符序列标记字符串

> ID：15130473
> 
> 赞同：1
> 
> 时间：2013-02-28T08:07:31.917
> 
> 标签：php, regex, string, tokenize

我觉得这可能是被问到的，但标题不同，因此我找不到完全相同的副本。

标记字符串以便标记每个单词以及每个单词中的每个字符序列的最简单方法是什么？我认为它可以通过正则表达式拆分来完成，但也许不是......

效果应该是......

`Hey you guys`

**到**

`[H, e, y, He, Hey, y, o, u, yo, you, g, u, y, s, gu, guy, guys]`

顺序并不重要，只要结果与上面的效果相同。

正则表达式可以做到这一点，还是按顺序进行某种自定义标记？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:17:27.740

自定义标记化将是您最好的选择。

```
$inStr = 'Hey you guys';
$tokens = array();
$tokenList = explode(' ',$inStr);
foreach($tokenList as $bigToken) {
    $tokens[] = $bigToken; //take care of individual words
    $tokens = array_merge($tokens, str_split($bigToken)); //take care of single letters
    for($i = 2; $i < strlen($bigToken); $i++) {
        $tokens[] = substr($bigToken, 0, $i); //only need the first element here.
    }
}
print_r($tokens); 
```

这是工作代码。[http://3v4l.org/gZn8p](http://3v4l.org/gZn8p)

# html - 发送表单到远程服务器

> ID：15130475
> 
> 赞同：1
> 
> 时间：2013-02-28T08:07:45.020
> 
> 标签：html, forms

我想在我自己的站点中使用带有自定义表单的[http://zxing.org/w/decode.jspx提供的服务。](http://zxing.org/w/decode.jspx)我编写了以下代码：

```
<html>
<body>
    <FORM action="http://zxing.org/w/decode.jspx" method="post">
        <INPUT type="text" name="u" value="http://justinsomnia.org/images/qr-code-justinsomnia.png">
        <INPUT type="submit" value="Send"> 
    </FORM>
</body>
</html> 
```

当我提交表单时，我希望看到带有“解码成功”消息的结果页面。相反，我看到了我试图复制的原始远程表单。

你能发现我的自定义表单有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T08:40:14.767

```
 <html>
   <body>
   <FORM action="http://zxing.org/w/decode" method="get">
   <INPUT type="text" name="u" value="http://justinsomnia.org/images/qr-code-justinsomnia.png">
   <INPUT type="submit" value="Send"> 
    </FORM>
    </body>
    </html> 
```

您应该使用**get**而不是**post**方法。您发布到错误的 URL，发布到[http://zxing.org/w/decode](http://zxing.org/w/decode)。我检查了它，它现在可以工作了。

# iphone - UILabel 不会改变 setFrame 上的高度

> ID：15130478
> 
> 赞同：5
> 
> 时间：2013-02-28T08:07:55.603
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我正在尝试`UILabel`根据标签中的文本数量来更改 a 的高度。

我可以计算标签所需的尺寸，但是当我尝试设置`UILabel`框架时，它并没有改变。

下面是我的代码。即使我将最后一行中的 size.height 替换为 500 之类的东西，`UILabel`框架的大小也不会改变

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
    static NSString *simpleTableIdentifier = @"GameItemCell";
    GameItemCell *cell = (GameItemCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"GameItemCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];

    GameItem* item = [_hunt.gameItems objectAtIndex: indexPath.row];

    cell.itemHeaderLabel.text = [NSString stringWithFormat:@"#%d - (%d pts)", indexPath.row+1, item.itemPoints];

    UILabel* textLabel = cell.itemTextLabel;

    textLabel.text = item.itemText;
    textLabel.lineBreakMode = NSLineBreakByWordWrapping;

    CGRect frame = cell.itemTextLabel.frame;
    CGSize textSize = { frame.size.width, 20000.0f };
    CGSize sizeOneLine = [@"one line" sizeWithFont:cell.itemTextLabel.font constrainedToSize:textSize lineBreakMode:NSLineBreakByWordWrapping];
    CGSize cellTextSize = [item.itemText sizeWithFont:cell.itemTextLabel.font constrainedToSize:textSize lineBreakMode:NSLineBreakByWordWrapping];
    CGSize sizeOneLineSpacing = CGSizeMake(sizeOneLine.width, sizeOneLine.height + 3);
    NSInteger lines = cellTextSize.height / sizeOneLine.height;
    CGSize size = CGSizeMake(frame.size.width, lines * sizeOneLineSpacing.height);

    textLabel.frame = CGRectMake(frame.origin.x, frame.origin.y, size.width, size.height);

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T09:31:15.100

您必须在 GameItemCell 里面设置标签的框架`-(void)layoutSubviews`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:37:34.003

与其做所有艰苦的工作，不如试试：

```
textLabel.numberOfLines = 0;
textLabel.text = textString;
[textLabel sizeToFit]; 
```

请记住`sizeToFit`尊重您的标签默认宽度，因此请根据您的要求设置宽度。然后高度将由该`sizeToFit`方法管理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-26T03:01:39.113

最后，您需要在 UITableViewCell 子类中添加类似这两个方法的内容：

```
// call this method on your cell, during cellForRowAtIndexPath
// provide your resizing info (frame, height, whatever)

- (void) updateLabelFrame:(CGRect)newLabelFrame {
    self.resizedLabelFrame = newLabelFrame;
    [self setNeedsLayout];
}

// the actual resize happens here when UIKit gets around to it

- (void) layoutSubviews {
    [super layoutSubviews];
    self.myLabel.frame = self.resizedLabelFrame;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T08:09:38.313

您错过了`numberOfLines`要设置的属性。

添加 ：

```
textLabel.numberOfLines = 0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T09:58:47.437

是的，对于多行使用 textLabel.numberOfLines = 0; 在 cellForRowAtIndexPath 中

但是您仍然需要更改单元格的高度：

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Calculate new cell height too as you are doing in cellForRowAtIndexPath 
    return YOUR_SIZE;;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T08:12:49.140

**行数**

用于呈现文本的最大行数。

**此属性的默认值为 1。**要删除任何最大限​​制并根据需要使用尽可能多的行，请将此属性的值设置为 0。

看看[UILabel 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UILabel_Class/Reference/UILabel.html)

根据您的问题，您可以设置行数

现在没有为您的标签设置行数，所以设置它，

```
textLabel.numberOfLines = lines; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-28T08:24:16.147

```
CGRect labelFrame = myLabel.frame;

labelFrame.size = [myLabel.text sizeWithFont:myLabel.font             constrainedToSize:CGSizeMake(myLabel.frame.size.width, CGFLOAT_MAX)
                                lineBreakMode:myLabel.lineBreakMode];

cell.textLabel.frame = labelFrame; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-04T07:58:53.607

尝试这个 ：

```
 NSString *text1 = shareObjC.commentText;
        CGSize constraint1 = CGSizeMake(280 - (size.width + 5), 2000);

        CGSize size1 = [text1 sizeWithFont:[UIFont systemFontOfSize:12] constrainedToSize:constraint1 lineBreakMode:UILineBreakModeWordWrap];

        UILabel *lblComment = [[[UILabel alloc] initWithFrame:CGRectMake(posx,posy,size1.width,size1.height)] autorelease];

        lblComment.lineBreakMode = UILineBreakModeWordWrap;
        lblComment.numberOfLines = size1.height/15;
        [lblComment setFont:[UIFont systemFontOfSize:12]];
        lblComment.text = text1;
        [cell.viewLikeComment addSubview:lblComment]; 
```

# mysql - 将特定行从 Postgresql 转换为 mysql

> ID：15130480
> 
> 赞同：0
> 
> 时间：2013-02-28T08:07:58.547
> 
> 标签：mysql, postgresql

我每天在我的 postgres 数据库上运行几个查询，现在我决定学习 MySQL，并决定将我的数据库和查询迁移到 MySQL 服务器。

不幸的是，我无法转换查询的某些部分，尤其是以下部分：

```
DATE_PART('day', DATE_TRUNC('month', CURRENT_DATE) +  
        '1 MONTH - 1 DAY'::INTERVAL)::INTEGER 
```

知道如何将其转换为在 MySql 上工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:34:40.530

```
SELECT DAY(LAST_DAY(CURRENT_DATE)) Day 
```

输出：

```
| DAY |
-------
|  28 | 
```

或人为地应用相同的逻辑

```
SELECT DAY(DATE_SUB(DATE_ADD(DATE_FORMAT(CURRENT_DATE ,'%Y-%m-01'), INTERVAL 1 MONTH), INTERVAL 1 DAY)) Day 
```

这是工作示例**[sqlfiddle](http://sqlfiddle.com/#!2/d41d8/8157)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:58:44.947

我假设你想要当月的最后一天

> DATE_TRUNC('month', CURRENT_DATE) --> 将日期减少到（第一天）当月 '1 MONTH - 1 DAY'::INTERVAL --> 再添加一个月并返回一天

MySQL 有[`LASTDAY(date)`](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_last-day)，因此查询将转换为`LASTDAY(now())`然后您可以使用[`DAY(date)`](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_dayofmonth).

# spring - 使用 mongotemplate 以天数表示的日期差异

> ID：15130486
> 
> 赞同：0
> 
> 时间：2013-02-28T08:08:28.547
> 
> 标签：spring, mongodb

我的 mongodb 中有 3 列，名为`days (long)`, `startDate (java.util.Date)`, `endDate (java.util.Date)`。我想要获取 startDate 和`(endDate-days)`OR `(endDate-startDate)`<= 天之间的记录。你能告诉我如何使用 mongoTemplate spring 来实现这一点。

我不想从表中获取所有记录，然后在 java 端解决这个问题，因为将来我的表可能有数百万条记录。

感谢 jitender

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:39:35.797

在数据库端的查询中没有办法做到这一点（结束减去开始部分）。如果这是您的应用程序的一个重要功能，我建议您更改架构以在文档中以您需要的格式维护两个字段之间的增量。由于您可以在更新 endDate 时更新该字段（或者如果您同时填充两个日期，则可以只计算该字段）。

如果您从另一个来源批量接收此数据，或者如果您对 endDate 进行多次更新，那么您可能需要运行另一个作业并定期计算未计算的文档的增量（然后您可以从始终设置开始delta 到 99999 并在设置 endDate 后在此作业中将其更新为准确值）。

虽然您可以使用 $where 子句，但这将是一个非常缓慢的完整集合扫描，因此我不建议使用它 - 即使它需要更改架构，最好还是想出一个性能更高的替代方案。 [http://docs.mongodb.org/manual/reference/operator/where/](http://docs.mongodb.org/manual/reference/operator/where/)

# php - php，提交后使用同一页面的表单

> ID：15130493
> 
> 赞同：9
> 
> 时间：2013-02-28T08:08:55.210
> 
> 标签：php, html, forms, submit

我想知道最简单的方法是让我们说一个带有用户/密码的表单并使用 php 提交按钮，但是在提交后它会返回到同一页面而不是转到另一个 php 页面。

我正在考虑 if/else 语句，但在多次尝试后如何设置它但仍然没有得到想要的结果有点困惑

*很奇怪，我在发布之前做了你们说的所有事情......但是......>。<“* 让我们说一些像这样简单的事情......

但我也想设置如果没有输入然后点击 sumbit 会有一个错误....应该很容易但我不知道为什么我似乎无法弄清楚

```
<?php
function userPass()
{
    echo "<form method='post' action=" . $_SERVER['PHP_SELF'] . ">";
    echo "<input type='text' name='user' /><br/>";
    echo "<input type='text' name='pass' /><br/>";
    echo "<input type='submit' value='Login' />";
}
    if(empty($_POST["user"]))
    {
        userPass();
    }
    if(!(empty($_POST["user"])))
    {
        if($_POST["user"] == "comp")
        {
            echo "Welcome comp";
        }
        else
        {
            echo "Wrong user";
        }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-25T08:50:44.360

其他答案是正确的；您只需将用户发送回“ `action`”属性中的当前页面。您可以使用“ `isset`”进行测试以查看他们是否这样做。

令我惊讶的是尚未提及您的输入没有被清理，并且您正在为灾难做好准备。您的操作属性中存在**巨大的注入漏洞：**

```
$_SERVER['PHP_SELF'] 
```

如果您不对此进行清理，那么有人可以修改他们看到的 URL，而您可怜的 PHP 脚本将不会比将其作为`SELF`常量处理更好。

换句话说，您绝对*必须*使用一个`htmlspecialchars()`函数来对该参数进行 html 编码。有了这个，你`action`应该看起来更像`htmlspecialchars($_SERVER['PHP_SELF'])`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T08:10:42.763

如果当前页面是 index.php，则在表单标签中使用 index.php 作为操作值。

像这样：

```
<form action="index.php" method="post">
</form> 
```

你可以通过输入来检查提交的表格：

```
if(isset($_POST)){
...
} 
```

在页面顶部

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T08:13:17.613

只需使用以下语法

```
<form method="post" action=""> 
```

您可以使用 isset() 方法检查是否设置了 post。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-25T16:04:11.237

```
<?php function userPass() {
    echo "<form method='post' action=" . $_SERVER['PHP_SELF'] . ">";
    echo "<input type='text' name='user' /><br/>";
    echo "<input type='text' name='pass' /><br/>";
    echo "<input type='submit' value='Login' />"; }
    if(empty($_POST["user"]))
    {
        userPass();
    }
   *if(!(empty($_POST["user"])))*
    {
        if($_POST["user"] == "comp")
        {
            echo "Welcome comp";
        }
        else
        {
            echo "Wrong user";
        }
    }
    ?> 
```

*这部分代码是错误的，你应该输入： if(!empty($_POST["user"]))*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T09:03:16.260

这是我创建的用于控制学习所需输入字段满足要求的代码。如果是这样，数据将被发送到数据库。如果不符合要求，页面顶部可能会显示一条消息

```
<?php
if (!isset($_POST['submitform'])) {   
}
else
{
$_SESSION['firstname'] = $_POST['firstname'];
$_SESSION['lastname'] = $_POST['lastname'];
$_SESSION['email'] = $_POST['email'];
$_SESSION['mobile'] = $_POST['mobile'];
$_SESSION['telephone'] = $_POST['telephone'];
$_SESSION['place'] = $_POST['place'];
$_SESSION['street'] = $_POST['street'];
$_SESSION['housenumber'] = $_POST['housenumber'];
$_SESSION['gender'] = $_POST['gender'];

if (empty($_POST['firstname']) or empty($_POST['lastname']) or empty($_POST['email']) or empty($_POST['mobile'])or empty($_POST['telephone']) or empty($_POST['place'])
or empty($_POST['street']) or empty($_POST['housenumber']) or !isset($_POST['gender']))
{
    echo "Sending denied";
}
else
{       
    require 'database.php';

    header('Location: succes.php');
}  ?> 
```

我希望这是对你有用的信息

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-05T12:13:22.770

```
 <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post"> 
```

这正是您在单击此表单内的提交按钮时使用表单重新加载页面的方式。

**附加：** 添加`required`到您想要的所有输入或检查它是否为空。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-04T18:39:30.950

这段代码会帮助你

```
<form action="<?= $_SERVER['REQUEST_URI'] ?>" method="post"> 
```

或者你可以这样做：

```
<form action="" method="post"> 
```

谢谢 ....

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-28T08:13:02.327

您可以在表单提交中定义：

```
<form method=get action=index.php > 
```

您也可以完全忽略操作，它会自动发布/获取相同的文件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-19T06:33:47.003

我认为所有人都错过了实际问题，即是否有办法在提交表单后**留在同一页面。**答案是**否定**的。一旦你提交了一个表单——无论你使用 POST 还是 GET 方法，当然假设你正在使用 $_SERVER['PHP_SELF'] 或空操作等——**一个新页面会自动打开**。这至少适用于 PHP。（我使用 XAMPP 尝试了很多不同的方法。）我现在不关心其他脚本语言。

# java - 如何在 JPA 中实现复杂的多对多关系？

> ID：15130494
> 
> 赞同：4
> 
> 时间：2013-02-28T08:08:57.383
> 
> 标签：java, jpa

这里是数据库模式

```
CREATE TABLE Products
(
    id          INT NOT NULL AUTO_INCREMENT,
    category_id  INT NOT NULL,
    description VARCHAR(100),
    price       DECIMAL(10, 2) NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (category_id) REFERENCES Categories(id)
) ENGINE = INNODB;

CREATE TABLE Orders
(
    id           INT NOT NULL AUTO_INCREMENT,
    customer_id  INT NOT NULL,
    status       VARCHAR(20) NOT NULL,
    date_created TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (id),
    FOREIGN KEY (customer_id) REFERENCES Customers(id)
) ENGINE = INNODB;

CREATE TABLE OrderDetails
(
    product_id INT NOT NULL,
    order_id   INT NOT NULL,
    quantity   INT NOT NULL,
    subtotal   DECIMAL(10, 2) NOT NULL,
    PRIMARY KEY (product_id, order_id),
    FOREIGN KEY (product_id) REFERENCES Products(id),
    FOREIGN KEY (order_id)   REFERENCES Orders(id)
) ENGINE = INNODB; 
```

模型

```
@Embeddable
public class OrderDetailPK
{
    private Product product;
    private Order order;

    public OrderDetailPK() {}

    public OrderDetailPK(Product product, Order order)
    {
        this.product = product;
        this.order   = order;
    }
}

public class OrderDetail {
    @EmbeddedId
    private OrderDetailPK id;

    @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="product_id", insertable=false, updatable=false)
    private Product product;

    @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="order_id", insertable=false, updatable=false)
    private Order order;

    private int quantity;
    private double subtotal;

    public OrderDetail() {}

    public OrderDetail(OrderDetailPK id, int quantity, double subtotal)
    {
        this.product  = id.getProduct();
        this.order    = id.getOrder();
        this.quantity = quantity;
        this.subtotal = subtotal;
    }
    // getters, setters
}

public class Product {
    @Id
    private int id;

    private String description;
    private double price;

    @ManyToOne
    @JoinColumn(name="category_id")
    private Category category;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "Products")
    private List<OrderDetail> orderDetail;
}

public class Order {
    @Id
    private int id;

    @ManyToOne
    @JoinColumn(name="customer_id")
    private Customer customer;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "Orders")
    private List<OrderDetail> orderDetail;
} 
```

由于某些原因，我不断收到错误

```
Concrete type "class models.OrderDetail" with application identity does not declare any primary key fields. 
```

谁能指出问题出在哪里？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:44:12.153

当我之前这样做时（如[this question and answer](https://stackoverflow.com/a/7196183/116639)中所述），我在可嵌入ID原语中制作了字段（对应于所引用实体的ID字段），然后[`@MapsId`](http://docs.oracle.com/javaee/6/api/javax/persistence/MapsId.html)在实体中使用。我相信这是满足所有要求的最简单的（我敢说是正确的）：实体中的字段是关系，ID 类中的字段是原始的，每一列都只映射一次（这些`@MapsId`字段不是真的是映射，但有点别名）。

将其应用于您的案例，ID 类如下所示：

```
@Embeddable
public class OrderDetailPK {
    private final int productId;
    private final int orderId;

    public OrderDetailPK(int productId, int orderId) {
        this.productId = productId;
        this.orderId = orderId;
    }
} 
```

实体类看起来像：

```
public class OrderDetail {
    @EmbeddedId
    private OrderDetailPK id;

    @ManyToOne(cascade = CascadeType.ALL)
    @MapsId("productId")
    private Product product;

    @ManyToOne(cascade = CascadeType.ALL)
    @MapsId("orderId")
    private Order order;

    private int quantity;
    private double subtotal;

    public OrderDetail(Product product, Order order, int quantity, double subtotal) {
        this.id = new OrderDetailPK(product.getId(), order.getId());
        this.product = product;
        this.order = order;
        this.quantity = quantity;
        this.subtotal = subtotal;
    }

    protected OrderDetail() {}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:28:40.120

首先`OrderDetailPK`得落实`Serializable`。

其次，请指定您要使用的 ID，因为您已指定列`product_id`和`order_id`as `insertable=false, updatable=false`（只读）。

因此，您需要尝试以下方法：

```
@EmbeddedId
@AttributeOverrides({
        @AttributeOverride(name = "product_id",column = @Column(name = "product_id")),
        @AttributeOverride(name = "listingId",column= @Column(name = "order_id"))
})
private OrderDetailPK id; 
```

您可以在这里找到更多信息：

[http://docs.oracle.com/javaee/6/api/javax/persistence/EmbeddedId.html](http://docs.oracle.com/javaee/6/api/javax/persistence/EmbeddedId.html)

[http://docs.oracle.com/javaee/6/api/javax/persistence/AttributeOverride.html](http://docs.oracle.com/javaee/6/api/javax/persistence/AttributeOverride.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:42:17.807

从`EmbeddedId`javadoc：

> 不支持在嵌入式 id 类中定义的关系映射。

所以你不能这样做。我不认为 JPA 1 指定了实现这一点的标准方法（在 JPA 2 中有`@MapsId`但我从未尝试过），但这是我通常做的，大多数实现（我认为至少 Hibernate、EclipseLink 和 OpenJPA）都支持它：

使用原始类型声明您的主键类：

```
@Embeddable
public class OrderDetailPK implements Serializable
{
    private int product;
    private int order;

    public OrderDetailPK() {}

    ...
} 
```

`@IdClass`使用相同名称但所需类型来注释您的实体并声明字段：

```
@Entity
@IdClass(OrderDetailPK.class)
public class OrderDetail {
    @Id
    @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="product_id", insertable=false, updatable=false)
    private Product product;

    @Id
    @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="order_id", insertable=false, updatable=false)
    private Order order;

    ...
} 
```

（我一直保留`@Id`实体中的字段，但我没有重新检查它们是否是强制性的）

# r - 更改 ggplot 因子颜色

> ID：15130497
> 
> 赞同：39
> 
> 时间：2013-02-28T08:09:09.053
> 
> 标签：r, ggplot2, visualization

我注意到这里[Box 和胡须绘制](http://docs.ggplot2.org/0.9.3/geom_boxplot.html)了调用：

```
p + geom_boxplot(aes(fill = factor(cyl))) 
```

为箱线图填充生成明亮的红色/绿色/蓝色，同时：

```
p + geom_boxplot(aes(fill = factor(vs))) 
```

产生明显的淡绿色/红色颜色。在我的数据中，我得到了第二组颜色，但想要第一组（比如

```
p + geom_boxplot(aes(fill = factor(cyl))) 
```

什么控制 ggplot 使用哪组颜色以及如何更改它？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-28T08:14:25.723

默认颜色是围绕色轮均匀分布的色调。您可以从[**这里**](https://stackoverflow.com/questions/8197559/emulate-ggplot2-default-color-palette)查看它是如何生成的。

您可以使用`scale_fill_manual`这些颜色：

```
p + scale_fill_manual(values=c("#F8766D", "#00BA38")) 
```

在这里，我用`ggplot_build(p)$data`from`cyl`来获取颜色。

或者，您也可以使用另一个调色板，如下所示：

```
p + scale_fill_brewer(palette="Set1") 
```

要在调色板中查找颜色，您可以执行以下操作：

```
require(RColorBrewer)
brewer.pal(9, "Set1") 
```

如果您有兴趣，请查看包装以了解调色板和其他选项。

**编辑：** @user248237dfsf，正如我*已经*在顶部的链接中指出的那样，@Andrie 的这个函数显示了生成的颜色：

```
ggplotColours <- function(n=6, h=c(0, 360) +15){
  if ((diff(h)%%360) < 1) h[2] <- h[2] - 360/n
    hcl(h = (seq(h[1], h[2], length = n)), c = 100, l = 65)
}

> ggplotColours(2)
# [1] "#F8766D" "#00BFC4"

> ggplotColours(3)
# [1] "#F8766D" "#00BA38" "#619CFF" 
```

如果查看生成的两种颜色，当 n=2 和 n=3 时，第一种颜色相同，但第二种颜色不同。这是因为它会生成*均匀分布*的色调颜色。如果你想使用 for 的颜色，`cyl`那么`vs`你必须设置`scale_fill_manual`和使用从这个函数中用 n=3 生成的这些颜色。

要验证这确实是正在发生的事情，您可以这样做：

```
p1 <- ggplot(mtcars, aes(factor(cyl), mpg)) + 
           geom_boxplot(aes(fill = factor(cyl)))

p2 <- ggplot(mtcars, aes(factor(cyl), mpg)) + 
           geom_boxplot(aes(fill = factor(vs))) 
```

现在，如果你这样做：

```
ggplot_build(p1)$data[[1]]$fill
# [1] "#F8766D" "#00BA38" "#619CFF"

ggplot_build(p2)$data[[1]]$fill
# [1] "#F8766D" "#00BFC4" "#F8766D" "#00BFC4" "#F8766D" 
```

您会看到这些是使用生成的颜色，`ggplotColours`差异的原因也很明显。我希望这有帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-15T14:13:36.123

添加到以前的答案：

当使用`col`审美（而不是`fill`）时，使用`scale_color_manual`. 这对于`geom_point()`：

```
myColors <- c("#56ddc5", "#ff3db7", "#4699dd")
ggplot(mtcars, aes(x=mpg, y=hp, col=as.factor(cyl))) + 
  geom_point() +
  scale_color_manual(values=myColors) 
```

[![在此处输入图像描述](../Images/e4744c55e2f4bd31a6296deac5c46e4e.png)](https://i.stack.imgur.com/ToFj1.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-24T01:03:31.220

你可以使用这些包：

```
#install.packages(pals)
#install.packages(reshape2)
require(pals)
require(reshape2) 
```

在这里您可以找到一些示例离散调色板：

```
pal.bands(alphabet, alphabet2, cols25, glasbey, kelly, okabe, polychrome, 
stepped, stepped2, stepped3, tol, watlington,
        main="Discrete", show.names=FALSE) 
```

你可以像这样应用它们：

```
 p +
   scale_fill_manual(values=as.vector(stepped3(20))) 
```

# android - 如何从 Android 2.3 上的 ActionBarSherlock 溢出菜单中删除图标？

> ID：15130499
> 
> 赞同：13
> 
> 时间：2013-02-28T08:09:15.180
> 
> 标签：android, menu, icons, actionbarsherlock

我有一个`ActionBarSherlock`使用主题的应用程序`Theme.Sherlock.Light.DarkActionBar`。操作栏是暗的，我的菜单图标是亮的。当我在小布局上运行我的应用程序时，溢出菜单中会显示 2 或 3 个带有图标的菜单项。

在 Android 3+ 上，溢出菜单项不会显示它们的图标，但在 Android 2.3 和更早版本上，我看到带有几乎不可见图标的菜单图块，因为图块颜色为白色，图标接近于白色。

![在此处输入图像描述](../Images/5cf4258a5d19ef8e2965b479a96a281f.png)

如您所见，浅色图标在白色背景上是不可见的，但它们必须具有浅色才能在深色操作栏上可见：

![在此处输入图像描述](../Images/5821a24b24df629e5ab0374042c9422e.png)

当菜单项显示在溢出菜单中时，我可以删除图标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:49:43.560

您可以使用配置限定符。例如

制作一个可绘制文件夹 /res/drawable-v11/ 将所有“灯光”图标放入其中。

对于较暗的图标，请使用 /res/drawable/ 文件夹。

确保在两个文件夹中使用相同的文件名。

我希望我已经理解了你的问题，这可能会对你有所帮助。

但是，如果您只想为溢出菜单更改可绘制对象，我认为这是不可能的。也因为菜单图标不打算这样使用。ActionBarSherlock 可能也是因为这样的问题，不是官方库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T15:35:39.680

我也面临同样的问题：

有很多方法可以实现这一点，而不是删除图像：

1）您可以使用各自的可绘制文件夹来放置明暗图像。

2）您还可以通过检查您的设备版本来通过菜单代码更改背景颜色。

如果您的设备不支持溢出菜单，您可以更改菜单的背景颜色以及更改菜单文本颜色。

我也面临同样的问题并使用以下解决了：

```
static final Class<?>[] constructorSignature = new Class[] {Context.class, AttributeSet.class};

class MenuColorFix implements LayoutInflater.Factory {
public View onCreateView(String name, Context context, AttributeSet attrs) {
    if (name.equalsIgnoreCase("com.android.internal.view.menu.ListMenuItemView")) {
        try {
            Class<? extends ViewGroup> clazz = context.getClassLoader().loadClass(name).asSubclass(ViewGroup.class);
            Constructor<? extends ViewGroup> constructor = clazz.getConstructor(constructorSignature);
            final ViewGroup view = constructor.newInstance(new Object[]{context,attrs});

            new Handler().post(new Runnable() {
                public void run() {
                    try {
                        view.setBackgroundColor(Color.BLACK);
                        List<View> children = getAllChildren(view);
                        for(int i = 0; i< children.size(); i++) {
                            View child = children.get(i);
                            if ( child instanceof TextView ) {
                                ((TextView)child).setTextColor(Color.WHITE);
                            }
                        }
                    }
                    catch (Exception e) {
                        Log.i(TAG, "Caught Exception!",e);
                    }

                }
            });
            return view;
        }
        catch (Exception e) {
            Log.i(TAG, "Caught Exception!",e);
        }
    }
    return null;
}       
}

public List<View> getAllChildren(ViewGroup vg) {
ArrayList<View> result = new ArrayList<View>();
for ( int i = 0; i < vg.getChildCount(); i++ ) {
    View child = vg.getChildAt(i);
    if ( child instanceof ViewGroup) {
        result.addAll(getAllChildren((ViewGroup)child));
    }
    else {
        result.add(child);
    }
}
return result;
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
LayoutInflater lInflater = getLayoutInflater();
if ( lInflater.getFactory() == null ) {
    lInflater.setFactory(new MenuColorFix());
}
super.onCreateContextMenu(menu, v, menuInfo);
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.myMenu, menu);
} 
```

3) 从 styles.xml 文件中更改背景颜色

```
<style name="Theme.MyTheme" parent="Theme.Sherlock.ForceOverflow">
    <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
</style>

<style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">#ff000000</item>
    <item name="background">#ff000000</item>
</style> 
```

对我来说，这三个都很好

希望，这也对你有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-19T01:20:48.950

另一种选择是从 onPrepareOptionsMenu 中的非操作项中删除图标。

这个想法是使用 actionbarsherlock`MenuItemImpl.isActionButton`来确定每个项目是否是一个操作项目，如果不是则删除图标。这有点棘手，因为`onPrepareOptionsMenu`ABS 调用（至少）两次 - 第一次是在构建操作栏时，在这种情况下`MenuItemImpl.isActionButton`尚未设置并且将始终返回 false。如果是这种情况，您希望单独保留图标。一旦构建了操作栏，该`isActionButton`方法将为操作栏项目返回 true，否则返回 false。因此，您要删除返回 false 的图标。这就是我想出的：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB) {
        boolean buildingOptionsMenu = false;
        for (int i=0; i<menu.size(); ++i) {
            MenuItemImpl mi = (MenuItemImpl)menu.getItem(i);
            if (mi.isActionButton()) {
                buildingOptionsMenu = true;
                break;
            }
        }

        if (buildingOptionsMenu) {
            for (int i=0; i<menu.size(); ++i) {
                MenuItemImpl mi = (MenuItemImpl)menu.getItem(i);
                if (!mi.isActionButton()) {
                    mi.setIcon(null);
                    mi.setIcon(0);
                }
            }               
        }
    }
    return super.onPrepareOptionsMenu(menu);
} 
```

您将需要这两个导入：

```
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.internal.view.menu.MenuItemImpl; 
```

这适用于 ABS 4.3.0，但由于它使用内部库类，它可能不适用于其他版本的库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-18T05:27:37.427

OS 2.x 是一团糟，因为选项菜单背景可能是黑色或白色，具体取决于设备，无法确定哪个。

简单的解决方法是为 Android 2.x 及以下版本使用灰色 (#888888) 图标，并将现代 (ICS/JB) 图标放在现代设备的 v11 文件夹中：

```
drawable      // old school icons
drawable-v11  // modern icons 
```

当然这意味着drawable-mdpi-v11、drawable-hdpi-v11等等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-27T19:51:59.410

为 2.x 版本添加一整套重复的深色图标的一个简单替代方法是从所有可以进入溢出菜单的项目中删除图标。例如：

`res/menu`

```
<item
    android:id="@+id/menu_send_email"
    android:showAsAction="ifRoom"
    android:title="@string/menu_send_email"/> 
```

`res/menu-v11`（甚至`res/menu-v9`，因为 2.3 通常有一个深色菜单）

```
<item
    android:id="@+id/menu_send_email"
    android:icon="@drawable/ic_action_send_email"
    android:showAsAction="ifRoom"
    android:title="@string/menu_send_email"/> 
```

当然，您需要使标题足够短以至少在某些较大的屏幕上适合 ActionBar，或者接受它们总是进入溢出的事实。

# inno-setup - 用单选按钮替换安装类型下拉列表

> ID：15130502
> 
> 赞同：5
> 
> 时间：2013-02-28T08:09:31.997
> 
> 标签：inno-setup

我最近在我的 Inno Setup 中添加了不同的安装类型（安装、更新、修复）。这一切都很好。

```
[Types]
Name: Install; Description: "Install OLP"; 
Name: Update; Description: "Update an existing version of OLP"; 
Name: Repair; Description: "Repair OLP"; 
```

我唯一不太喜欢的是安装运行时出现的下拉列表，用于选择一种安装类型。

有没有办法用无线电组替换下拉列表？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-28T15:40:37.673

您可以使用单选按钮（因为 Inno Setup 中没有可用的单选组组件）：

```
[Code]
procedure OnTypeChange(Sender: TObject);
begin
  { set the item index in hidden TypesCombo }
  WizardForm.TypesCombo.ItemIndex := TNewRadioButton(Sender).Tag;
  { notify TypesCombo about the selection change }
  WizardForm.TypesCombo.OnChange(nil);
end;

procedure InitializeWizard;
var
  I: Integer;
  RadioButton: TNewRadioButton;
begin
  for I := 0 to WizardForm.TypesCombo.Items.Count - 1 do
  begin
    { create radio button and set the basic properties }
    RadioButton := TNewRadioButton.Create(WizardForm);
    RadioButton.Parent := WizardForm.SelectComponentsPage;
    RadioButton.Left := WizardForm.TypesCombo.Left;
    RadioButton.Top := WizardForm.TypesCombo.Top + I * RadioButton.Height;
    RadioButton.Width := WizardForm.TypesCombo.Width;
    { check just the first item }
    RadioButton.Checked := I = 0;
    RadioButton.Caption := WizardForm.TypesCombo.Items[I];
    { the Tag property substitutes the index property }
    RadioButton.Tag := I;
    RadioButton.TabOrder := I;     
    RadioButton.OnClick := @OnTypeChange;
  end;
  { hide the TypesCombo combo box }
  WizardForm.TypesCombo.Visible := False;

  { if you're not using the "iscustom" flag in any type entry, you can remove }
  { the following lines, because they resize and reposition the check list box }
  { for component selection, which is hidden, if you don't use "iscustom" flag }
  I := WizardForm.ComponentsList.Top - 
    (RadioButton.Top + RadioButton.Height + 8);
  WizardForm.ComponentsList.Top := RadioButton.Top + RadioButton.Height + 8;
  WizardForm.ComponentsList.Height := WizardForm.ComponentsList.Height + I;
end; 
```

结果（包括`iscustom`组件列表）：

![在此处输入图像描述](../Images/d84c3df32ed3fb8949ab856f0d641b0a.png)

或者您可以使用例如检查列表框，它能够在 Inno Setup 中包含单选按钮：

```
[Code]
procedure OnTypeChange(Sender: TObject);
begin
  { set the item index in hidden TypesCombo }
  WizardForm.TypesCombo.ItemIndex := TNewCheckListBox(Sender).ItemIndex;
  { notify TypesCombo about the selection change }
  WizardForm.TypesCombo.OnChange(nil);
end;

procedure InitializeWizard;
var
  I: Integer;
  CheckListBox: TNewCheckListBox;
begin
  { create the TNewCheckListBox object and set the basic properties }
  CheckListBox := TNewCheckListBox.Create(WizardForm);
  CheckListBox.Parent := WizardForm.SelectComponentsPage;
  CheckListBox.Left := WizardForm.TypesCombo.Left;
  CheckListBox.Top := WizardForm.TypesCombo.Top;
  CheckListBox.Width := WizardForm.TypesCombo.Width;
  CheckListBox.Height := CheckListBox.MinItemHeight * 
    WizardForm.TypesCombo.Items.Count + 4;
  CheckListBox.TabOrder := 0;
  { assign the selection change event }
  CheckListBox.OnClickCheck := @OnTypeChange;
  { add radio buttons from all TypesCombo items, select the first item }
  for I := 0 to WizardForm.TypesCombo.Items.Count - 1 do
    CheckListBox.AddRadioButton(WizardForm.TypesCombo.Items[I], 
      '', 0, I = 0, True, nil);
  { hide the TypesCombo combo box }
  WizardForm.TypesCombo.Visible := False;

  { if you're not using the "iscustom" flag in any type entry, you can remove }
  { the following lines, because they resize and reposition the check list box }
  { for component selection, which is hidden, if you don't use "iscustom" flag }
  I := WizardForm.ComponentsList.Top - 
    (CheckListBox.Top + CheckListBox.Height + 8);
  WizardForm.ComponentsList.Top := CheckListBox.Top + 
    CheckListBox.Height + 8;
  WizardForm.ComponentsList.Height := WizardForm.ComponentsList.Height + I;
end; 
```

结果（包括`iscustom`组件列表）：

![在此处输入图像描述](../Images/99e5da11cd53ebf65daf143f790a8f72.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:37:42.210

一个整洁的解决方案是[`CreateInputOptionPage`](http://www.jrsoftware.org/ishelp/topic_isxfunc_createinputoptionpage.htm)在组件选择页面之前使用单选按钮创建一个单独的页面。（在 CodeDlg.iss 脚本中有一个示例。）

一个更整洁的选择是根本不问，因为这完全没有必要。您可以自动检测已安装的版本 - 如果未安装，则为 Install，如果已安装但较旧，则为升级，如果已安装且版本相同，则为修复，最后如果已安装但较新那么它是一个降级 - 您可能想要禁止（更安全）或允许但显示警告（更方便，如果人们可能想要降级）。

# highcharts - 在折线图的情况下，在高图中向下钻取功能

> ID：15130503
> 
> 赞同：5
> 
> 时间：2013-02-28T08:09:35.037
> 
> 标签：highcharts

我正在尝试使用可以向下钻取几个级别的高图生成折线图。Highchart 具有柱形图的此功能，但我找不到折线图的任何内容。如果我尝试将图表类型从列更改为行，那么我会得到一条线作为图表，无法进一步深入研究。有什么方法可以将向下钻取功能应用于高图表中的折线图。这是我拥有的代码：

```
$(function () {
var chart;
$(document).ready(function() {

    var colors = Highcharts.getOptions().colors,
        categories = ['MSIE', 'Firefox', 'Chrome', 'Safari', 'Opera'],
        name = 'Browser brands',
        data = [{
                y: 55.11,
                color: colors[0],
                drilldown: {
                    name: 'MSIE versions',
                    categories: ['MSIE 6.0', 'MSIE 7.0', 'MSIE 8.0', 'MSIE 9.0'],
                    data: [10.85, 7.35, 33.06, 2.81],
                    color: colors[0]
                }
            }, {
                y: 21.63,
                color: colors[1],
                drilldown: {
                    name: 'Firefox versions',
                    categories: ['Firefox 2.0', 'Firefox 3.0', 'Firefox 3.5', 'Firefox 3.6', 'Firefox 4.0'],
                    data: [0.20, 0.83, 1.58, 13.12, 5.43],
                    color: colors[1]
                }
            }, {
                y: 11.94,
                color: colors[2],
                drilldown: {
                    name: 'Chrome versions',
                    categories: ['Chrome 5.0', 'Chrome 6.0', 'Chrome 7.0', 'Chrome 8.0', 'Chrome 9.0',
                        'Chrome 10.0', 'Chrome 11.0', 'Chrome 12.0'],
                    data: [0.12, 0.19, 0.12, 0.36, 0.32, 9.91, 0.50, 0.22],
                    color: colors[2]
                }
            }, {
                y: 7.15,
                color: colors[3],
                drilldown: {
                    name: 'Safari versions',
                    categories: ['Safari 5.0', 'Safari 4.0', 'Safari Win 5.0', 'Safari 4.1', 'Safari/Maxthon',
                        'Safari 3.1', 'Safari 4.1'],
                    data: [4.55, 1.42, 0.23, 0.21, 0.20, 0.19, 0.14],
                    color: colors[3]
                }
            }, {
                y: 2.14,
                color: colors[4],
                drilldown: {
                    name: 'Opera versions',
                    categories: ['Opera 9.x', 'Opera 10.x', 'Opera 11.x'],
                    data: [ 0.12, 0.37, 1.65],
                    color: colors[4]
                }
            }];

    function setChart(name, categories, data, color) {
        chart.xAxis[0].setCategories(categories, false);
        chart.series[0].remove(false);
        chart.addSeries({
            name: name,
            data: data,
            color: color || 'white'
        }, false);
        chart.redraw();
    }

    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line'
        },
        title: {
            text: 'Browser market share, April, 2011'
        },
        subtitle: {
            text: 'Click the columns to view versions. Click again to view brands.'
        },
        xAxis: {
            categories: categories
        },
        yAxis: {
            title: {
                text: 'Total percent market share'
            }
        },
        plotOptions: {
            column: {
                cursor: 'pointer',
                point: {
                    events: {
                        click: function() {
                            var drilldown = this.drilldown;
                            if (drilldown) { // drill down
                                setChart(drilldown.name, drilldown.categories, drilldown.data, drilldown.color);
                            } else { // restore
                                setChart(name, categories, data);
                            }
                        }
                    }
                },
                dataLabels: {
                    enabled: true,
                    color: colors[0],
                    style: {
                        fontWeight: 'bold'
                    },
                    formatter: function() {
                        return this.y +'%';
                    }
                }
            }
        },
        tooltip: {
            formatter: function() {
                var point = this.point,
                    s = this.x +':<b>'+ this.y +'% market share</b><br/>';
                if (point.drilldown) {
                    s += 'Click to view '+ point.category +' versions';
                } else {
                    s += 'Click to return to browser brands';
                }
                return s;
            }
        },
        series: [{
            name: name,
            data: data,
            color: 'white'
        }],
        exporting: {
            enabled: false
        }
    });
});

});
    </script>
</head>
<body> 
```

请让我知道是否有可能的解决方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T14:00:25.290

请看下钻行示例：jsfiddle.net/mv9FV/6/

# java - 实时搜索结果

> ID：15130504
> 
> 赞同：1
> 
> 时间：2013-02-28T08:09:38.203
> 
> 标签：java, php, websocket, real-time, thrift

我正在构建一个定制的搜索引擎。在我的程序中，每个搜索结果都需要一段时间才能显示出来。我正在寻找的是一种在用户浏览器上显示搜索结果项的方法，一旦找到它。

我想到的与此最相关的事情是 WPF 的绑定。当您将项目列表绑定到 a`ListView`时，只要将项目添加到列表中，它就会显示在 UI 中。我想实现类似的东西。

在 .Net 和 C# 世界中，我玩过 SignalR、Web 套接字等概念，但我不是专家，但我对 jQuery 相当了解。但是，我希望在 Java（这是我的服务器的后端）和 PHP（作为前端）中实现这一点。我之前的静态（没有我描述的功能）搜索引擎是使用 Thrift 作为 Web 服务实现的，用于在 Java 服务器和 PHP 之间进行通信（[更多关于如何做到这一点](http://blog.alireza-noori.com/programming/thriftpart-one-introduction/)）。我可以扩展当前的实现并添加此功能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:55:46.303

对于中间轮胎，您需要能够很好地支撑网络插座的东西。因此，当新结果从后端到达时，中间轮胎会通过 Web 套接字将其转发到浏览器中的客户端。Javascript 代码将在 web 套接字上接收对象，并动态地将新的搜索结果添加到带有结果的 div 中。

# c++ - 为什么 Xcode 4.2 为 .cpp 文件应用 C 文件构建规则脚本？

> ID：15130507
> 
> 赞同：1
> 
> 时间：2013-02-28T08:09:45.613
> 
> 标签：c++, xcode4.2

我有一个 Xcode 4.2 项目，其中包括一个为 windows 交叉编译的目标。我对该目标中的 C 源文件和 C++ 源文件使用自定义构建规则，通过自定义脚本调用 i386-pc-mingw32-g++。出于某种原因，Xcode 会运行我为 C 源文件指定的自定义脚本，即使在编译扩展名为 .cpp 的文件时也是如此。为什么会这样？如何让 Xcode 4.2 为我的 .cpp 文件运行“C++ 源文件”脚本？

我在这个项目中也有 .c 文件，我希望在编译 c++ 文件时使用 -std=c++11 标志来启用一些 c++11 功能。如果我用这个标志编译 .c 文件，我最终会遇到关于 math.h 中包含的常量的奇怪范围问题，我还没有真正尝试和理解 - 我希望我可以让 Xcode 为我的运行正确的脚本.cpp 文件。

有任何想法吗？

更新：我已经能够让 Xcode 运行正确的脚本。为此，我必须将 Process 下拉菜单选项从“C 源文件”和“C++ 源文件”都更改为“名称匹配的源文件：”，然后在提供的文本字段中手动输入`*.c`和。`*.cpp`现在我必须弄清楚为什么我会收到一条`M_PI was not declared in this scope`以前没有的错误消息——也许不同版本的 math.h 正在与 -std=c++11 标志一起使用，该标志要么不包括 M_PI常量还是在不同的命名空间下提供它？

更新：继续解决这个问题 - 看来我从 math.h 使用的 M_PI 值实际上是一个宏，如果`__STRICT_ANSI__`没有定义，它只是#define'd。显然，通过使用 -std=c++11 编译器标志切换到 c++11 导致该`__STRICT_ANSI__`宏被定义，因此我之前使用的 M_PI 宏不存在。我想最好只定义我自己的 pi 常量而不是弄乱这个`__STRICT_ANSI__`宏的声明，但我可能会深入研究一下，只是为了澄清为什么现在我正在使用 c++11 来声明它旗帜。

更新：我发现这篇文章[如何让 C++0x 和 __STRICT_ANSI__ 相处？](https://stackoverflow.com/questions/5580921/how-can-i-make-c0x-and-strict-ansi-get-along)，这只是建议在 '-std=c++11' 标志之后取消定义' **STRICT_ANSI** ' 宏（或者更确切地说，等效的 '-std=c++0x' 标志。虽然这看起来很粗略，但没有人发布遇到因为它的任何问题，在这种情况下它似乎对我来说也很好。关于这个宏的 Gcc 文档位于：http: [//gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html](http://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html)，并附上以下相关声明：

> 宏**STRICT_ANSI**是在使用 -ansi 选项时预定义的。一些头文件可能会注意到这个宏，并避免声明某些函数或定义 ISO 标准不要求的某些宏；这是为了避免干扰任何可能将这些名称用于其他用途的程序。

仍然不确定为什么'-std = c++ 11'标志会导致它在默认情况下被定义（显然是'-std = c ++ 98'）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:40:41.357

如果您希望在没有 ANSI 模式的情况下支持 C++11，请使用`-std=gnu++11`而不是`std=c++11`.

# c# - 无法加载文件或程序集“水晶决定.windows.forms,version=13.0.2000.0”

> ID：15130508
> 
> 赞同：10
> 
> 时间：2013-02-28T08:09:48.397
> 
> 标签：c#, visual-studio-2010, sql-server-2008, crystal-reports

我正在开发 Windows 应用程序。在此我设计了报告模块。每当我想在 Windows 7、Windows XP 和 Windows Vista 中查看报告时都会出错，但它在 Windows 8 中有效。

按照我在部署设置之前采取的步骤

1.  我在 Windows XP 中安装了 .NET Framework 4，在 Windows 7 中安装了 .NET Framework 4.5
2.  我安装了**CRforVS_13_0_2**但它通过错误消息如

> 您必须已安装 Visual Studio 2010 才能继续进行此安装。和
> SAP Crystal Reports 版本的 Visual Studio 2010 安装由于错误而提前结束。

3.  然后我安装了我的项目设置（在手动创建设置时，我包括了所有水晶报表程序集），登录并转到报表菜单，单击以打开水晶报表的预览，通过错误消息如

> 无法加载文件或程序集“水晶决策.windows.forms,version=13.0.2000.0,culture=neutral,Public keytoken=692fbea5521e1304”或其依赖项之一。该系统找不到指定的文件。

请指导我如何解决此问题。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-01T17:24:12.893

您没有正确安装所需的 Crystal Reports 程序集，您必须在每台客户端计算机上安装 Crystal Reports 的运行时，而不是 VS 的版本，仅通过将程序集与您的应用程序一起复制将无法正常工作。

您可以直接从 SAP 获得正确的安装程序，也许您需要创建一个免费帐户。[32位](http://downloads.businessobjects.com/akdlm/cr4vs2010/CRforVS_redist_install_32bit_13_0_2.zip) [64位](http://downloads.businessobjects.com/akdlm/cr4vs2010/CRforVS_redist_install_64bit_13_0_2.zip)

问候，

# php - 在 3 列中按字母垂直列出 mysql 数据

> ID：15130509
> 
> 赞同：2
> 
> 时间：2013-02-28T08:09:52.443
> 
> 标签：php, mysql

我有这个工作正常的语句，但从左到右按字母顺序列出 3 列。我希望它按字母顺序垂直向下列，然后继续到下一列。任何人都知道我该怎么做。

```
$models = mysql_query("SELECT model, id FROM model where make='$phonemake' order by model asc") or die(mysql_error());      
$count = 0;    
$max = 3;    
while($model = mysql_fetch_array( $models ))
{    
    $count++;    
    echo "<div style='float:left; width:31%; padding-right:5px;'>".$model['model']."&nbsp;<a href='include/delete-model.php?id=".$model['id']."' onclick='return makesure".$model['id']."();'>Delete</a></div>";
    if($count >= $max){
        //reset counter
        $count = 0;
        //end and restart
        echo"<div style='clear:both;'></div>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:16:42.053

回显 UL LIST 中的数据，并使用您的计数器设置 UL LIST 中的行数，当计数器达到最大值时，创建一个新列表并继续显示。我个人会使用：

```
if($counter%3==0) {
   create new list
} 
```

这样你就不需要每次都重置计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:24:17.057

你有两个选择：

您可以将结果缓冲到数组中并更改 div 的添加顺序

代码可能如下所示：

```
$allmodels = array();
while($model = mysql_fetch_array( $models ))
{    
  $allmodels[] = $model;
}
for($i = 0; 3 * $i < count($allmodels); $i++)
{
    for($j = 0; $j < 3; $j++)
    {
        if(isset($allmodels[($i * 3) + $j]))
        {
          $model = $allmodels[($i * 3) + $j];
          // print your stuff here...
        }
    }
} 
```

或者您可以以某种方式重新排序 sql 查询中的项目，可能将其转储到临时表或使用 mysql_data_seek。

# cakephp - 在 CakePHP 中上传和检索图像

> ID：15130516
> 
> 赞同：1
> 
> 时间：2013-02-28T08:10:20.373
> 
> 标签：cakephp, upload, store

我有以下代码在 cakephp 中上传文件

```
class UsersController extends AppController {

    var $name = 'Users';

    function index() {
        $this->set('users', $this->User->find('all'));
    }

    function add() {
        if (!empty($this->data)) {
            if ($this->User->save($this->data)) {
                $this->Session->setFlash('Your user data has been saved.');
                $this->redirect(array('action' => 'index'));
            }
            $this->User->create();
            if ($this->uploads() && $this->User->save($this->data)) {
                $this->Session->setFlash(_('Upload saved', true));
            } else {
                $this->Session->setFlash(_('Upload not saved.Please try again', true));
            }
        }
    }

    function uploads() {
        $uploads_dir = '/uploads';
        $users = $this->request->data['Upload']['file'];
        if ($users['error'] === UPLOAD_ERR_OK) {
            if (move_uploaded_file($users['User']['file'], $uploads_dir)) {
                $this->User->saveAll($this->data);
                return true;
            }
        }
        return false;
    }

    function edit($id = null) {
        $this->User->id = $id;
        if (empty($this->data)) {
            $this->data = $this->User->read();
        } else {
            if ($this->User->save($this->data)) {
                $this->Session->setFlash('Your user details has been updated.');
                $this->redirect(array('action' => 'index'));
            }
        }
    }

     function delete($id) {
      $this->User->delete($id);
      $this->Session->setFlash('This user has been deleted.');
      $this->redirect(array('action' => 'index'));
      } 
} 
```

当我尝试上传时，文件正在上传，但我需要在显示每个 .jpeg 的超链接时查看上传的文件，但我收到错误消息

" 在此服务器上找不到请求的地址 '/Users/app/webroot/index.php/uploads'。"

另外请帮助我如何将上传的图像存储在另一个文件夹中

PS:: 代码应该纯粹在 CakePHP 中

请帮助，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:16:08.880

确保用于上传文件的文件夹有足够的权限，您可以使用 Cakephp 媒体视图下载文件。供您参考，请检查此。 [在 CakePHP 中使用媒体视图下载文件](https://stackoverflow.com/questions/4905555/downloading-files-using-media-view-cakephp)

在函数下载中使用图像名称或图像 ID 作为参数并将路径更改为 'path' => APP 。'上传' 。DS

“上传”文件夹应该在 webroot 目录中。

# macros - 为什么我的宏的形式在函数调用之前没有被评估？

> ID：15130519
> 
> 赞同：1
> 
> 时间：2013-02-28T08:10:35.540
> 
> 标签：macros, clojure

我有以下 Clojure 代码：

```
(defn mul [a b]
  (* a b))

(defmacro create-my-macro [macroname]
    `(defmacro ~macroname [a# b#]
      (mul a# b#)))

(create-my-macro my-mul)

(my-mul 1 2)
;; => 2
(my-mul (+ 1 1) 2)
;; => ClassCastException clojure.lang.PersistentList cannot be cast to java.lang.Number 
```

`mul`当我将参数包装在with的调用中时，我得到了我想要的答案`eval`：

```
(mul (eval #a) (eval #b)) 
```

但我不明白为什么有必要这样做：如果`my-mul`宏是直接定义的（而不是通过另一个宏），它会起作用。例如，以下工作正常：

```
(defmacro my-mul [a b] `(mul ~a ~b))
(my-mul (+ 1 1) 2)
;; => 4 
```

为什么我会看到这种行为？

* * *

**编辑：**作为对评论的回应，以下是失败案例的宏扩展（即，不使用`eval`）：

```
(macroexpand '(create-my-macro my-mul))
;; => (do
;;      (clojure.core/defn my-mul 
;;        ([&form &env a__58__auto__ b__59__auto__] 
;;          (foo/mul a__58__auto__ b__59__auto__)))
;;      (. (var my-mul) (setMacro)) (var my-mul))

(macroexpand '(my-mul (+ 1 1) 2))
;; => ClassCastException clojure.lang.PersistentList cannot be cast to java.lang.Number  clojure.lang.Numbers.multiply (Numbers.java:146) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:07:39.087

如您所见，您要发出的代码如下所示：

```
(defmacro my-mul [a b] `(mul ~a ~b)) 
```

因此，您需要对其进行语法引用并在所有本地人后面加上 #：

```
`(defmacro my-mul [a# b#] `(mul ~a# ~b#)) 
```

因此，您发出宏的宏应该是：

```
(defmacro create-my-macro [macroname]
    `(defmacro ~macroname [a# b#]
       `(mul ~a# ~b#))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T09:05:12.760

```
(defmacro create-my-macro [macroname]
 `(defmacro ~macroname [a# b#]
   `(mul ~a# ~b#))) 
```

# php - PDO 在 beginTransaction() 上失败

> ID：15130520
> 
> 赞同：0
> 
> 时间：2013-02-28T08:10:41.937
> 
> 标签：php, pdo

我试图理解为什么这段代码会失败：

```
<?php

$db = new PDO('mysql:host=localhost;dbname=db', 'root', 'pass');

$db->beginTransaction();
if ($db->exec('select VERSION();') === FALSE) {
    $db->rollback();
}
$db->commit(); 
```

执行此代码后，我冻结了 3-4 秒，然后浏览器显示我

```
Error 103 (net::ERR_CONNECTION_ABORTED): Unknown error. 
```

我的 PDO 扩展有问题，但我找不到任何关于问题所在的错误。有任何想法吗？

# android - 指南针校准

> ID：15130521
> 
> 赞同：1
> 
> 时间：2013-02-28T08:10:43.670
> 
> 标签：android, compass-geolocation

如果在使用指南针之前没有很好地校准指南针，我想显示 toast 来校准指南针，因为如果指南针没有很好地校准，则会出现在 Iphone Compass Calibration toast 中。如何实现这一点，以了解用户在使用指南针之前对其进行校准。为了进一步说明，附上屏幕截图。 ![在此处输入图像描述](../Images/ac4ad611282632a922fe5c6e75ebec7c.png) 谢谢你

# quicklook - 从 qlmanage 获取图像

> ID：15130524
> 
> 赞同：0
> 
> 时间：2013-02-28T08:10:46.450
> 
> 标签：quicklook

qlmanage 可以生成PNG。像这样[https://superuser.com/a/162221](https://superuser.com/a/162221)

但是使用标准命令我只能得到第 1 页。是否有可能得到第 2 页？我想知道我是否可以模仿 Apple Wiki 中的 quicklook 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:26:21.610

`qlmanage`实际上并不意味着任何生产项目的工具。它是一个调试工具。它以与普通快速查看不同的权限运行，不提供相同级别的安全性。而且，它*真的*不打算用于服务器端。

也就是说，要回答您的问题：不，当`qlmanage`生成 PNG 时，它会调用生成器的缩略图代码，这并不意味着翻阅文档。

Apple Wiki 中的 Quick Look 功能使用特定的客户端，该客户端能够：

1.  从一组有限的生成器请求预览（而不是缩略图）
2.  解释预览
3.  在有意义时为预览的每一页生成图像

唉，没有公共 API 可以自己做这件事。

# java - Java 输入文件不会打印

> ID：15130527
> 
> 赞同：0
> 
> 时间：2013-02-28T08:10:55.060
> 
> 标签：java, file, input

我正在处理一项作业，我需要从 java 中的输入文件中打印 3 组不同分数的平均值。平均值必须四舍五入到小数点后 2 位。我尝试创建扫描仪，以便可以添加输入文件中的小数并求平均值，但是当我单击运行时，netbeans 只是运行并且没有打印出来。我也没有收到错误。任何关于我如何让它运行的提示将不胜感激。

输入文件内容：7.88 6.44 5.66 3.44 7.50 9.80 4.33 2.31 8.99 7.62 3.67 4.39

``这是代码（所有必要的导入都已导入）

```
public static void main(String[] args) throws IOException {

    {
        Scanner sc = new Scanner(new File("Gym.in"));

        double Number = sc.nextFloat();
        {
            NumberFormat fmt = NumberFormat.getNumberInstance();
            fmt.setMinimumFractionDigits(2);
            fmt.setMaximumFractionDigits(2);

            Scanner sf = new Scanner(new File("Gym.in"));
            int maxIndx = -1;
            String text[] = new String[100];
            while (sf.hasNext())
                ;
            {
                maxIndx++;
                text[maxIndx] = sf.nextLine();
                System.out.println(text[maxIndx]);
            }
            sf.close();

            String answer;
            double sum;
            double average;

            for (int j = 0; j <= maxIndx; j++) {
                StringTokenizer st = new StringTokenizer(text[j]);
                Scanner sg = new Scanner(text[j]);
                System.out.println(text[j]);

                Scanner ss = new Scanner(text[j]);
                sum = 0;
                average = sum / 10;
                answer = "For Competitor #1, the average is: ";

                while (sc.hasNext()) {
                    double i = sc.nextDouble();
                    answer = answer + i;
                    sum = sum + i;
                }

                answer = answer + average;
                System.out.println(answer);

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:32:45.460

这段代码有几个问题 - 一个是您期望`'.'`作为小数点字符，但在我的语言环境中它是`','`，所以我得到的第一件事是`java.util.InputMismatchException`.

无论如何，您的代码似乎没有做任何事情的原因是以下几行：

```
 while (sf.hasNext())
             ; 
```

这实际上是一个无限循环。当您的扫描仪有更多令牌要传递时，您正在循环，但您永远不会检索下一个令牌。所以`hasNext()`会`true`永远回来。

如果您删除，`;`那么您的代码将运行。我还没有验证结果。

* * *

您还需要重新计算平均值：使用您的代码，您的平均值将始终保持不变`0.0`：

```
sum = 0;
average = sum / 10;
...
answer = answer + average;
System.out.println(answer); 
```

我也不确定为什么要将总和除以 10-在您的情况下可能应该是 12（假设“每组分数”是输入文件中的一行）。总而言之，您的方法还不错 - 您基本上必须删除一些不必要的代码并将第二个循环中的语句以正确的顺序放置:)

```
for (int j = 0; j <= maxIndx; j++) {
    double sum = 0;
    double average = 0;

    Scanner ss = new Scanner(text[j]);
    String answer = "For Competitor #1, the average is: ";

    while (sc.hasNext()) {
        double i = sc.nextDouble();
        sum = sum + i;
    }
    average = sum / 12; // better use number of tokens read instead of hard coded 12

    answer = answer + average;
    System.out.println(answer);
} 
```

最后，您不需要将每一行读入一个`String`数组 - 只需读取一行并立即处理它。这样可以节省内存，并且`IndexOutOfBoundsException`在文件超过 100 行时避免 s。我把这作为练习交给你了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:39:49.000

去除 ; 一段时间后 (sf.hasNext())

改变

```
while (sf.hasNext())
;
{ 
```

进入

```
while (sf.hasNext())
{ 
```

# php - Zend中的分页不起作用

> ID：15130536
> 
> 赞同：0
> 
> 时间：2013-02-28T08:11:38.533
> 
> 标签：php, centos, zend-paginator

我有一系列项目。项目是文件路径。我已经设置了分页，但是当我单击下一步时它不会改变。我想每页显示 1 个 pdf。下面是我的代码

```
class IndexController extends Zend_Controller_Action
{

    public function init(){}

    public function indexAction()
    {
        if($_SERVER['SERVER_NAME']=="portal-dev"){
            $location = "/data/scan/invoice";           
            $listOfFiles = $this->readFiles($location);
            $paginator = Zend_Paginator::factory($listOfFiles);
            $paginator->setItemCountPerPage(1);
            $this->view->paginator = $paginator;
        }
    }

    public function readFiles($location){
        $pattern="(\.pdf$)"; //valid image extensions
        $thelist = array();
        if ($handle = opendir($location)) {
            while (false !== ($file = readdir($handle)))
            {
                if (eregi($pattern, $file)) //if this file is a valid image
                {
                    $thelist[] = $file; //insert files into array
                    $max = count($thelist) - 1;
                    $max1 = count($thelist);
                }
            }
            closedir($handle);
        }
        return $thelist;
    }
} 
```

索引.phtml

```
<div id="main">
    <?php if(!$this->paginator){
        echo "No Files to process";
    }else{
    ?>
    <table>
        <tr>
            <td rowspan=2></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
        </tr>

    </table>
    <?php if (count($this->paginator)): ?>
    <ul>
        <?php foreach ($this->paginator as $item): ?>
        <li><?php echo $item; ?>
        </li>
        <?php endforeach; ?>
    </ul>
    <?php endif; ?>

    <?php echo $this->paginationControl($this->paginator,'Sliding','partial/my_pagination_control.phtml'); ?>
    <?php }?>
</div> 
```

分页在目录部分中找到

```
<?php if ($this->pageCount): ?>
<div
    class="paginationControl">
    <!-- Previous page link -->
    <?php if (isset($this->previous)): ?>
    <a href="<?php echo $this->url(array('page' => $this->previous)); ?>">
        Previous </a> <span class="bar"> | </span>
    <?php else: ?>
    <span class="disabled"> Previous</span> <span class="bar"> | </span>
    <?php endif; ?>

    <!-- Numbered page links -->
    <?php foreach ($this->pagesInRange as $page): ?>
    <?php if ($page != $this->current): ?>
    <a href="<?php echo $this->url(array('page' => $page)); ?>"> <?php echo $page; ?>
    </a> <span class="bar"> | </span>
    <?php else: ?>
    <?php echo $page; ?>
    <span class="bar"> | </span>
    <?php endif; ?>
    <?php endforeach; ?>

    <!-- Next page link -->
    <?php if (isset($this->next)): ?>
    <a href="<?php echo $this->url(array('page' => $this->next)); ?>"> Next
    </a>
    <?php else: ?>
    <span class="disabled">Next </span>
    <?php endif; ?>
</div>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:25:22.063

在 indexAction 中设置当前页码后尝试

```
$paginator->setCurrentPageNumber($this->_getParam('page')); 
```

像这样

```
$paginator = Zend_Paginator::factory($listOfFiles);
$paginator->setItemCountPerPage(1);
$paginator->setCurrentPageNumber($this->_getParam('page'));
$this->view->paginator = $paginator; 
```

# php - 如何将 HTML div 中的值传递给 PHP

> ID：15130537
> 
> 赞同：2
> 
> 时间：2013-02-28T08:11:40.173
> 
> 标签：php, jquery, html

我正在用 php 开发一个论坛。我在每个帖子下制作了一个“**带引号回复**”按钮，当用户单击此按钮时，它会运行一个 JQuery 函数，该函数会获取该帖子的文本并将其放入 CKEditor 并使用具有`id="quote"`. 插入 CKEditor 后的文本如下所示

```
<div id="quote">This is the quoted Text"</div> 
```

通常在论坛中，值以这样的引号传递

```
[QUOTE=user_name;post_id]This is Quoted Text[/QUOTE] 
```

但我没有在我的论坛中使用 BBCode。那么，我如何在我的 PHP中传递`user_name`和`post_id`值？`<div id="quote">`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:14:51.467

在将该引用 div 插入页面之前，该按钮应运行 ajax 查询以将表单值传递给您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:22:09.010

在将 div 插入页面之前使用 Ajax 添加隐藏字段，并从会话或 cookie 中获取用户凭据

# django - 在 django 1.5 中返回重定向引发导入异常

> ID：15130538
> 
> 赞同：0
> 
> 时间：2013-02-28T08:11:45.373
> 
> 标签：django

我有简单的代码，基本上看起来像这样：

```
from django.shortcuts import redirect
def my_view(request):
    ... does stuff
    return redirect('/some_other_url/') 
```

抛出的异常是“无法导入 django.views.generic.simple.redirect_to。父模块 django.views.generic.simple 不存在。” 当我注释掉“返回重定向”代码（并替换为 return HttpResponse("")）时，我不再收到错误消息。

堆栈跟踪：*不再可用，因为它发布在 SO* [http://dpaste.com/1007500/之外](http://dpaste.com/1007500/)

我刚刚从 django 1.3.1 升级到 django 1.5。检查 1.5 的文档看起来我仍然应该能够使用“redirect()”。我无法从几个谷歌搜索中找到任何答案，所以希望这不是我的盲目疏忽。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T08:55:26.160

看起来问题不在`django.shortcuts.redirect`，但在视图中，您被重定向到的进程 url。根据您的回溯，查看该进程 url 127.0.0.1:8000/post_station/ 在某处使用 django.views.generic.simple.redirect_to。在 django 1.5 中你可能不应该这样做。在欧洲使用`django.views.generic.RedirectView`。

[您可以在 Django 中的“No module named simple”错误中](https://stackoverflow.com/questions/11428427/no-module-named-simple-error-in-django)找到答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:35:05.627

```
from django.shortcuts import redirect

def my_view(request):
    ... does stuff
    return redirect('/your_app/some_other_url/') 
```

# php - 创建 .csv 下载的问题

> ID：15130545
> 
> 赞同：0
> 
> 时间：2013-02-28T08:12:19.407
> 
> 标签：php, mysql, csv, download

我正在尝试从 mysql 表创建 .csv 下载，但没有取得多大成功。我已经从我在这里找到的教程中汇总了下面的代码[http://code.stephenmorley.org/php/creating-downloadable-csv-files/](http://code.stephenmorley.org/php/creating-downloadable-csv-files/)但由于某种原因，下载的 .csv 文件包含整个源代码页面不是 mysql 表中的列标题和数据。

任何帮助将非常感激 ：）

```
 // output headers so that the file is downloaded rather than displayed
    header('Content-Type: text/csv; charset=utf-8');
    header('Content-Disposition: attachment; filename=site-list-export.csv');

    // create a file pointer connected to the output stream
    $output = fopen('php://output', 'w');

    // output the column headings
    fputcsv($output, array('id', 'url', 'clean_host', 'keyword', 'group', 'page_number', 'page_authority', 'domain_authority', 'page_mozrank', 'seomoz', 'page_title', 'check_inbound', 'check_inbound_priority ', 'count', 'project', 'type'));

    // fetch the data
    $connect = mysql_connect("localhost", DB_USERNAME, DB_PASSWORD);
    mysql_select_db(DB_DATABASE, $connect);

    $rows = mysql_query("SELECT * 
    FROM `url_list_google`
    WHERE `group` = '".$selected_group."' 
    GROUP BY clean_host 
    ORDER BY `domain_authority` DESC") or die(mysql_error());
    mysql_close($connect);

    // loop over the rows, outputting them
    while ($row = mysql_fetch_assoc($rows)) fputcsv($output, $row);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-29T08:22:01.633

在循环之后添加`exit;`函数调用，它将阻止其他内容呈现。

# java - 如何在 Java 中读取 .pfx 文件的内容？

> ID：15130548
> 
> 赞同：14
> 
> 时间：2013-02-28T08:12:42.547
> 
> 标签：java, pkcs#12

我有`file.pfx`文件，也有私钥。如何`file.pfx`用 Java 读取证书？

我用过这段代码：

```
import java.security.*;
import java.security.cert.Certificate;
import java.security.cert.X509Certificate;
import java.security.cert.CertificateException;
import javax.crypto.SecretKey;
import javax.security.auth.callback.*;
//These packages I have used.

public String readFile(String fn) { 
  String thisLine, ret = ""; 
  KeyStore ks = KeyStore.getInstance("pkcs12", "SunJSSE"); 
  ks.load(new FileInputStream(fn),"password".toCharArray()); 
  try { 
    Key key = ks.getKey("1", "password".toCharArray());
    Certificate[] cc = ks.getCertificateChain("1");
    X509Certificate certificate1 = (X509Certificate) cc[0];//Here it throws  java.lang.NullPointerException 
    ret += certificate1.getNotAfter(); 
    ret += certificate1.getNotBefore(); 
  } catch(Exception e) { 
    ret = "Cannot load, exception!";
  } 
  return ret; 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-06-03T06:58:44.407

尝试使用此代码读取 .pfx 文件：-

```
 public void checkExpire() {

        try {
            KeyManagerFactory kmf = javax.net.ssl.KeyManagerFactory.getInstance("SunX509");
            KeyStore keystore = KeyStore.getInstance("PKCS12");
            char[] password= "yourfilepassword".toCharArray();

            keystore.load(new FileInputStream("filepath\filename.pfx"),password);
            //keystore.load(new FileInputStream(certificate), password);
            kmf.init(keystore, psswd);
            Enumeration<String> aliases = keystore.aliases();
            while(aliases.hasMoreElements()){
                String alias = aliases.nextElement();
                if(keystore.getCertificate(alias).getType().equals("X.509")){
                Date expDate = ((X509Certificate) keystore.getCertificate(alias)).getNotAfter();
                Date fromDate= ((X509Certificate) keystore.getCertificate(alias)).getNotBefore();
        System.out.println("Expiray Date:-"+expDate );
        System.out.println("From Date:-"+fromDate);
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T11:03:05.563

由于您的密钥库（即 PKCS #12 文件）不包含具有您提供的别名的证书链，因此您遇到了异常。

```
Key key = ks.getKey("1", "shalimar1234".toCharArray());
Certificate[] cc = ks.getCertificateChain("1"); // this is returning null 
```

您的`key`对象也很合理`null`，但您似乎根本没有使用该对象。

要了解文件中可用的别名，请尝试查看从[`KeyStore.aliases()`](http://docs.oracle.com/javase/7/docs/api/java/security/KeyStore.html#aliases%28%29).

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-28T08:18:50.213

这是关于使用 Java 代码打开和读取 .PFX 文件的论坛问题的[链接。](http://www.coderanch.com/t/585238/java/java/extract-private-key-pfx-PKCS)

总结一下链接中的内容，您应该能够像使用普通 JKS 一样打开密钥库，但略有不同的是，将密钥库类型传递为`pcks12`并将提供程序传递为`SunJSSE`.

```
try (FileInputStream stream = new FileInputStream("C:/store.pfx")) {
    KeyStore store = KeyStore.getInstance("pkcs12", "SunJSSE");
    store.load(stream, "password".toCharArray());

    Enumeration<String> aliases = store.aliases();

    while (aliases.hasMoreElements()) {
        System.err.println(aliases.nextElement());
    }

    X509Certificate certificate = (X509Certificate)store.getCertificate("alias");
    System.err.println(certificate.getNotAfter());
    System.err.println(certificate.getNotBefore());
    System.err.println(certificate.toString());
} 
```

另一个有用的说明是，您可能想考虑使用和引用[BouncyCastle](http://www.bouncycastle.org/java.html)提供程序，在我看来，它是最完整的实现。

# hex - 为 linux 编写 hex 文件（没有编译器/解释器）

> ID：15130551
> 
> 赞同：0
> 
> 时间：2013-02-28T08:12:57.213
> 
> 标签：hex, debian, binaryfiles

我想学习如何为debian编写（我的意思是，手工制作程序（而不是使用编译器），而不是如何编辑十六进制/二进制文件）二进制文件。

我试过用谷歌搜索，但这并不是很有帮助。有人可以指出正确阅读材料的方向吗？我想学习如何编写标题等。我希望为 unix-y 操作系统编写一些东西（现在，我的设置有在 MIPS32 架构上运行的 debian，但是现在学习在裸机上执行的东西也可以。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:35:56.200

尝试使用[hexdump](http://linux.about.com/library/cmd/blcmdl1_hexdump.htm)进行阅读，[使用 hexedit](http://linux.die.net/man/1/hexedit)进行写作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:58:36.077

那时可能应该阅读此内容。

[http://www.skyfree.org/linux/references/ELF_Format.pdf](http://www.skyfree.org/linux/references/ELF_Format.pdf)

# jboss - 将接缝应用程序移动到 OSGI

> ID：15130553
> 
> 赞同：1
> 
> 时间：2013-02-28T08:13:03.453
> 
> 标签：jboss, osgi, seam

我有一些使用 Seam Framework 2.3 + jBoss AS 7 + Hybernate 开发的 Web 应用程序。

因为我研究 OSGI 有一段时间了，所以我想知道是否可以将我的应用程序迁移到 osgi 世界以模块化一切；我也阅读了很多博客和这些有趣的讨论（[how-to-modularize-an-enterprise-application-with-osgi-and-ee6](https://stackoverflow.com/questions/11284491/how-to-modularize-an-enterprise-application-with-osgi-and-ee6/)和[how-to-modularize-a-jsf-facelets-spring-application -with-osgi](https://stackoverflow.com/questions/2575669/how-to-modularize-a-jsf-facelets-spring-application-with-osgi) ) 但老实说我仍然不知道我应该从哪里开始，因为我以前从未使用过 OSGI。

照你说的

1.  有可能（并且有用）做这样的事情吗？
2.  根据您的经验，什么是一个好的起点？

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:25:18.073

**方法**

可能从一个玩具应用程序开始，一个 WAB (OSGi WAR) 和单个服务包。

绝对采取迭代的方法。据我所知，JBoss 支持 OSGi 服务和 Java EE 的混合，通过 JBoss modules/msc，这将允许您尝试 OSGi 并逐步迁移。

我认为您会发现有些事情非常容易，有些则非常困难，所以在熟悉的同时选择简单的战斗。最后，您可能会坚持使用混合方法。

**建造**

你的构建工具是什么？主要像 Maven 或 Ant，在这种情况下，请分别查看[maven-bundle-plugin](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html) 或[bnd](http://www.aqute.biz/Bnd/Ant)。您需要确保 OSGi 元数据存在于每个包中（Bundle-SymbolicName、Import-Package、Export-Package 等）。如果您使用的是 Maven，请参阅[此答案](https://stackoverflow.com/questions/10436865/best-way-to-convert-existing-java-projects-to-osgi-bundles/10438035#10438035)。

将单体应用程序划分为模块可能很棘手，但作为一般规则，当您迁移一个合理大小的模块时，您应该为 API 和实现提供单独的捆绑包（无论如何这是一个好的设计，但对运行时也有影响）。

**互操作**

您可以使用从注入的低级框架 API 获取 OSGi 服务、访问包等`BundleContext`，这将为您提供进入 OSGi 的低级编程挂钩。它应该很简单：

```
@Resource
BundleContext context; 
```

除非您的 Java EE 代码被打包为 JBoss 模块，否则我认为如果不求助于 JNDI 之类的东西，您很难以其他方式调用（例如 OSGi 服务查找 Java EE 服务）。

您应该能够安装 web 控制台并查看在 OSGi 中注册了哪些 Java EE 位，并类似地检查 JNDI 以查看 Java EE 的可用 OSGi。

**迁移服务**

虽然 OSGi 很有趣，但使用原始框架 API 会产生相当多的样板代码，而且您不太可能需要强大的功能或想要耦合。您可以在 OSGi 之上使用许多依赖注入框架；blueprint（类似 Spring）、Peaberry（Guice）和声明式服务。

我有偏见，但声明式服务对 OSGi µservice 模型有很强的亲和力，并且实现是轻量级的。

**CDI**

我对 Seam/CDI 了解不多，但[Pax CDI](http://team.ops4j.org/wiki/display/PAXCDI/Pax+CDI)可能会有所帮助（尽管 JBoss 可能已经涵盖了这一点）。

**网络**

您是否计划拥有一个高度模块化的 UI，并热部署各种组件？如果不是，那么最好将 UI 打包为 WAB。WAB 是一个瘦 WAR（即它导入而不是嵌入大多数依赖项）。即使您追求高度模块化、动态的前端，我也肯定会在第一遍就这样做。

**JPA**

一个警告 - JPA 实现通常在 OSGi 环境中不能很好地发挥作用，您可能想看看 Apache Aries 或 Eclipse Gemini。另一种选择可能是将 JPA 内容留在 Java EE 空间中，并将 Java EE DAO/存储库作为 OSGi 服务访问。同样，尽管您可能会遇到一些类加载问题。

可能有用的例子[https://docs.jboss.org/author/display/JBOSGI/Provided+Examples](https://docs.jboss.org/author/display/JBOSGI/Provided+Examples)

# php - 服务器：move_uploaded_file 在 freewebhostingarea 中不起作用

> ID：15130563
> 
> 赞同：1
> 
> 时间：2013-02-28T08:13:32.107
> 
> 标签：php, directory

有没有人体验过这个免费的网络托管区域。我已经检查了所有内容，当我在我的服务器上运行它时它运行良好。但是当我将它运行到 freewebhostingarea 时。将上传的文件移动到目录失败。

我认为这是关于目录的权限。所以我将其设置为 777。有什么想法吗？

这是我的代码

```
$m_id=$_COOKIE['m_id'];
$image_type=$_POST['image_type'];
$upic="u_".$image_type."_pic";
$valid_formats = array("jpg", "png", "bmp","jpeg");
   if(isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST")
{
    $fileinfo=pathinfo($_FILES['photoimg']['name']);
    $size = $_FILES['photoimg']['size'];
if(isset($fileinfo['extension']))
{
    $ext=strtolower($fileinfo['extension']);
if(in_array($ext,$valid_formats))
{
if($size<(5*1024*1024)) // Image size max 1 MB
{
    $name ="uploadimg.".$ext;
    $tmp = $_FILES['photoimg']['tmp_name'];
if(move_uploaded_file($tmp,"../user/$m_id/$name"))
{
    BLAH BLAH 

    exit("<script>window.location='../user_page_update.php?u_id=$m_id';</script>");
}

else
    exit("<script>alert('failed');window.location='../user_page_update.php?u_id=$m_id';</script>"); 
}
else
    exit("<script>alert('Image file size max 2 MB');window.location='../user_page_update.php?u_id=$m_id';</script>");   
}
else
    exit("<script>alert('Invalid file format..');window.location='../user_page_update.php?u_id=$m_id';</script>");  
}
else
    exit("<script>alert('Please select image..!');window.location='../user_page_update.php?u_id=$m_id';</script>"); 
    exit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-30T17:02:54.893

特别是对于 www.freewebhostingarea.com ，默认情况下，根目录中的任何文件夹的权限都很低。如果你想创建一个文件夹（比如“图像”）来通过表单保存文件，首先你应该登录到 freewebhostingarea.com/ftp/ 然后右上角有一个小按钮，名为通道模块。首先选择您的文件夹（通过单击它附近的小框），然后单击 CHMOD 并打开那里的所有框。这样做，您会将权限（仅适用于该文件夹）更改为 777（意思是“完全访问权限”）。就这样。然后，命令 move_uploaded_file($_FILES["file"]["tmp_name"],"/home/vhosts/~your site name ~/images/" . $_FILES["file"]["name"]); 会工作的。

我希望这对其他有同样困境的人有用。

# java - 没有应用程序策略的 JBoss 中的数据源密码加密

> ID：15130564
> 
> 赞同：1
> 
> 时间：2013-02-28T08:13:33.230
> 
> 标签：java, jakarta-ee, encryption, jboss, encryption-symmetric

主要限制是对于不同的客户端，我必须拥有具有不同凭据的不同数据库。因此，我必须为新客户即时创建数据源（无需重新启动 JBoss）：

```
<datasources>
   <xa-datasource>
     <jndi-name>jdbc/1349173612812_ARCHIVE_001DS</jndi-name>
     <isSameRM-override-value>false</isSameRM-override-value>
     <xa-datasource-class>com.microsoft.sqlserver.jdbc.SQLServerXADataSource</xa-datasource-class>
     <xa-datasource-property name="URL">jdbc:sqlserver://DEVDB\MYDB;databaseName=DEV_ARCHIVE_001</xa-datasource-property>
     <xa-datasource-property name="DatabaseName">DEV_ARCHIVE_001</xa-datasource-property>
     <xa-datasource-property name="SelectMethod">cursor</xa-datasource-property>
     <xa-datasource-property name="User">admin</xa-datasource-property>
     <xa-datasource-property name="Password">plain text password</xa-datasource-property>
  </xa-datasource>
</datasources> 
```

一切正常，但知道我必须加密密码，以采取安全措施。

我找到了解决方案，`application policy`但为了让 JBoss 可以看到策略，必须重新启动服务器 - 这对我来说不是一个选项。

是否有另一种保护密码的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T12:02:23.330

当服务器需要数据源配置时，org.jboss.resource.security.SecureIdentityLoginModule 类可用于加密数据库密码和提供密码的解密版本。SecureIdentityLoginModule 使用硬编码密码来加密/解密数据源密码。

数据源密码使用 SecureIdentityLoginModule 主方法通过传入明文密码进行加密。SecureIdentityLoginModule 由 jbosssx.jar 提供。

此过程适用于 JBoss 企业应用平台版本 5.1 及更高版本

1.  GoTo Jboss directory or Change directory to the jboss-as directory for Example user/demo/Jboss/

    **Linux 命令**

java -cp client/jboss-logging-spi.jar:lib/jbosssx.jar org.jboss.resource.security.SecureIdentityLoginModule PASSWORD

或者

java -cp bin/client/jboss-logging-spi.jar:standalone/lib/ext/jbosssx.jar org.jboss.resource.security.SecureIdentityLoginModule PASSWORD

**Windows 命令：** java -cp client\jboss-logging-spi.jar;lib\jbosssx.jar org.jboss.resource.security.SecureIdentityLoginModule PASSWORD

结果：

该命令将返回一个加密的密码。

> **重要的提示**

:如果执行此命令后出现错误在这种情况下检查，您的 jboss 中应该有“jbosssx.jar”、“jboss-logging-spi.jar”。它应该在 lib 目录下，或者可能在独立/lib/ext/ 中（在 cammand 中，它正在为此 jar 加密密码的路径）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:54:54.867

[这](http://docs.jboss.org/jbosssecurity/docs/6.0/security_guide/html/Encrypting_Data_Source_Passwords.html)将有助于加密密码。

# c++ - 哪个库用于体素数据结构？

> ID：15130565
> 
> 赞同：2
> 
> 时间：2013-02-28T08:13:44.840
> 
> 标签：c++, raycasting, voxels

我在科学环境中使用具有大型体素网格的 C++ 工作，我正在尝试决定使用哪个库。只有一小部分体素网格保存值 - 但每个体素（例如结构）可能有几个值，这些值由光线跟踪确定。我不想渲染任何东西，但我必须确定穿过整个目标区域的潜在光线数量，因此必须计算大量的光线盒计算，并且最好非常快*......*

到目前为止，我发现

*   OpenVDB [http://www.openvdb.org/](http://www.openvdb.org/)
*   Field3d [http://sites.google.com/site/field3d/](http://sites.google.com/site/field3d/)

后者更有吸引力，因为它看起来更简单/更容易使用。

我的问题是：如果将它们中的哪一个用于不针对渲染/可视化的任务中，它们中的哪一个会更适合？在计算大量光线盒交点（不可能进行视点相关剔除）时，哪一个更快/更好？建议，有人吗？

无论如何，我想使用现有的 C++ 库而不是自己编写 kdTree/Octree 等。没有时间重新发明轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:12:37.533

我会建议

1.  [开放场景图](http://www.openscenegraph.org/)
2.  [食人魔3D](http://www.ogre3d.org/)
3.  [VTK](http://www.vtk.org/)

我个人用过前两个。然而，VTK 也是一种流行的替代方案。它们都支持基于体素的渲染。

# android - 当处理程序完成任务时我们会收到通知吗？如何？

> ID：15130568
> 
> 赞同：2
> 
> 时间：2013-02-28T08:13:52.133
> 
> 标签：android, handler

我已经使用处理程序来处理解压缩任务`handler.post(new Decompress())`，我已经为这个处理程序保留了一个循环器。任务完成后如何通知我们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:32:30.840

如果您想在 UI 线程中收到通知，那么我会在 UI 线程中创建另一个`Handler`对象，并在执行解压缩任务的线程中保留对它的引用。任务完成后，您只需`Message`使用它的`Handler`.

但最方便的方法是使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)

# android - Android ListView onItemClick

> ID：15130570
> 
> 赞同：5
> 
> 时间：2013-02-28T08:14:07.680
> 
> 标签：android, listview

我有一个 ListView，其中包含来自已解析 JSON 的数据。所以这是我的示例代码：

```
ArrayList<HashMap<String, String>> myList = new ArrayList<HashMap<String, String>>();

    /**
     * parsing JSON...
     * ...
     * ...
     * ...
     */

ListAdapter adapter = new SimpleAdapter(this, myList, R.layout.s_layout, new String[]{NAME, TEXT}, new int[]{R.id.name, R.id.text});
    setListAdapter(adapter);

lv.setOnItemClickListener(new OnItemClickListener(){

        public void onItemClick(AdapterView<?> parent, View view, int position, long id){

            String inName = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String inText = ((TextView) view.findViewById(R.id.text)).getText().toString();

            Intent intent = new Intent(getApplicationContext(), StaffProfileActivity.class);

            intent.putExtra("staff_name", inName);
            intent.putExtra("staff_desc", inText);
            startActivity(intent);
       }
}); 
```

我的问题是我如何在不使用的情况下将数据传递给 Intent

```
String inName = ((TextView) view.findViewById(R.id.name)).getText().toString(); 
```

我的意思是，如何从我的 ListView 中获取我的数据并将其赋予意图？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T08:18:34.600

`adapter.get(position)`将为您返回一个`HashMap<String, String>`选定元素。并使用`List<T>`定义而不是`ArrayList<T>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T08:32:51.073

从[文档](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)

> public abstract void onItemClick (AdapterView parent, View view, int position, long id)
> 
> 单击此 AdapterView 中的项目时要调用的回调方法。如果实施者**需要访问与所选项目关联的数据，他们可以调用 getItemAtPosition(position)。**

所以在 onItemClick 你可以检索你的元素：

```
 HashMap<String, String> elt = myList.getItemAtPosition(position); 
```

然后从 elt 获取 inName 和 inText 值。

# javascript - 是否可以在 highcharts 堆栈区域图中有一条可调整的线？

> ID：15130572
> 
> 赞同：1
> 
> 时间：2013-02-28T08:14:11.173
> 
> 标签：javascript, jquery, highcharts

我有下面的图表很好，但是我必须添加值才能使顶线到位。它是一个恒定值，永远不会改变，我怎样才能使这条紫色线永久且用户可以调整？

![高图表](../Images/273b40ae3fd26ec8a9d4ad3d12ecfa00.png)

解决方案：

```
plotLines: [{
                        color: '#FF0000',
                        width: 2,
                        value: 5.5,
                        dashStyle: 'shortdash',
                        id: 'plotline-1'
                    }], 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:23:42.357

您可能正在寻找的是[plotLine](http://api.highcharts.com/highcharts#yAxis.plotLines)。您可以在加载时将其设置为某个默认值，然后在用户更改他们想要显示的值时删除/添加。很多方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:14:26.887

您可以将两个 xAxis 和链接的紫色系列设置为一个，但将其余系列（区域）设置为另一个。

多轴示例[http://www.highcharts.com/demo/combo-multi-axes](http://www.highcharts.com/demo/combo-multi-axes)

# pygtk - pygtk vlc 播放器不播放下一首曲目

> ID：15130580
> 
> 赞同：0
> 
> 时间：2013-02-28T08:14:27.193
> 
> 标签：pygtk, vlc, libvlc

我正在编写一个基于 libvlc 的小型自定义播放器。我已经使用了[https://github.com/hartror/python-libvlc-bindings/blob/master/examples/gtkvlc.py](https://github.com/hartror/python-libvlc-bindings/blob/master/examples/gtkvlc.py)中的大部分代码，这些代码就像我需要的那样播放单个曲目。

现在我想在之前完成后切换到另一首曲目。为此，我捕获回调“EventType.MediaPlayerEndReached”并在回调处理程序中编写代码：

```
<------>def endCallback(self,event):
<------><------>fname = vlc_controller.GetNextTrack()['url']
<------><------>self.w.set_title(fname)
<------><------>self.vlc.player.set_mrl(fname)
<------><------>self.w.set_title('after set_mrl')
<------><------>self.vlc.player.play()
<------><------>self.w.set_title('after play') 
```

现在，当此代码被执行时，它会卡住`self.vlc.player.set_mrl(fname)`并且不会继续前进，因此我看到 NO NEXT TRACK。

我使用 ( `vlc.stop()`,`vlc.set_media`而不是`vlc.set_mrl`) 尝试了此代码的不同变体，但没有任何效果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:28:08.933

最后......我认为最好的选择是在 python 2 线程上制作多线程应用程序：

1.  主线程 - gtk.loop 并显示其他人认为的视频
2.  进行媒体切换的附加线程。

有一段时间我害怕多线程，但现在我知道这是完成这项任务的最佳方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-30T20:07:22.607

对于那些在 C# (Xamarin) 中面临类似问题的人，根据 VLC 文档，从与对象绑定的事件调用 VLC 对象可能会冻结应用程序。所以他们说在触发事件中使用下面的代码。

```
 ThreadPool.QueueUserWorkItem(_ => PlayNext()); 
```

一个例子是在 EndReach 事件中调用上面的代码。其中 PlayNext() 是您自己的自定义方法，用于处理您要执行的下一个操作。在看到文档的那部分之前，我为此苦苦挣扎了大约一天。

# java - 使用什么来识别连接到服务器的客户端？Java、Android、套接字

> ID：15130586
> 
> 赞同：3
> 
> 时间：2013-02-28T08:14:39.547
> 
> 标签：java, android, sockets

我正在使用 Java 桌面服务器和连接到它的多个 Android 客户端。在服务器端，我需要确定哪个客户端通过套接字 TCP/IP 向我发送了一条消息，并仅向该客户端发送响应，而不向其他客户端发送响应。

我会将客户端的所有套接字存储在一个 ArrayList 中。

首先，这是我尝试过的两种不起作用的方法；

-- 客户端的IP地址，通过在客户端调用socket.getLocalSocketAddress()和在服务器调用socket.getRemoteSocketAddress()来获取，但是它们永远不匹配。例如，我进入了客户端 XXX.XXX.11.17 和服务器 XXX.XXX.0.13，对于相同的连接，它们应该是相同的。

-- 端口号，通过在客户端调用 getLocalPort() 和在服务器中调用 getPort() 来获取，是的，这完美地工作并且数字匹配，所以我可以使用它，但是有可能随机选择的端口号在两个不同的客户端可能是相同的。不太可能但可能。所以这意味着不能保证它们是独一无二的。

我可以使用的替代方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:33:37.410

> 我需要确定哪个客户端通过套接字 TCP/IP 向我发送了一条消息，并仅向该客户端发送响应，而不向其他客户端发送响应。

将其发送回您收到请求的同一个套接字。

如果您需要为客户永久识别，您可以使用`Socket.getRemoteAddress()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:25:10.640

> 客户端中的 getLocalSocketAddress() 和服务器中的 getRemoteSocketAddress() [...] 对于同一连接应该是相同的。

不，因为你不知道中间是什么。大多数移动提供商使用代理、NAT 等。移动设备认为它位于提供商提供的 LAN（10.0.0.x 或 192.168.xx 地址）上。多个客户端甚至有可能拥有相同的远程地址（从您的服务器上可以看到）。

话虽如此，如果服务器侦听一个 IP、端口和协议，您可以通过组合在一起的远程 IP 地址和端口来唯一地识别服务器应用程序中的客户端。此信息可从 获得`socket.getRemoteSocketAddress()`，其中返回的`InetSocketAddress`（在 Internet 套接字的情况下）包含远程 IP 和端口（分别为`getAddress()`和`getPort()`）。

但正如另一个答案所示，您实际上并不需要一种*识别*客户的方法。网络客户端由您接收数据*的*套接字标识（套接字是两个节点之间的独占连接），因此只需将数据发送回您接收请求的套接字。

如果您确实需要有关已连接客户端的更多簿记数据，请将客户端套接字包装在包含附加信息的包装类中。

# javascript - jQuery根据输入添加或删除表格行

> ID：15130587
> 
> 赞同：1
> 
> 时间：2013-02-28T08:14:40.823
> 
> 标签：javascript, jquery

对不起，如果这太基本了。

1.  如果当前行数少于用户的需求，我正在尝试向表中添加行。
2.  同时，如果当前行数超过用户的需要，我需要删除多余的行。

我的代码正在运行，但我认为它没有多大意义。所以我想知道是否有人可以纠正我的错误并使我的代码更合理。（我试图使用两个索引来控制此添加或删除活动。一个索引检查当前存在的元素并获取用户新输入之间的差异。然后执行添加或删除动作。但我没有这样做。）

另外，是否可以在`<td>`不更改的情况下调整添加的宽度`shape of the first table row?`谢谢您的帮助！这是一个[演示](http://jsfiddle.net/godhong/322f2/10/)。

### HTML

```
<form method="post" id="form1" action=index.html>
    <table class="tab tab_Application" border="0">
        <tr>
            <th>
                <label for="id_noa">Number of Applications:</label>
            </th>
            <td>
                <select name="noa" id="id_noa">
                    <option value="">Make a selection</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>
            </td>
        </tr>
        <tr id='noa_header' style="display:none">
            <th>App#</th>
            <th>Month</th>
            <th>Day</th>
            <th>Mass Applied (kg/hA)</th>
            <th>Slow Release (1/day)</th>
        </tr>
    </table>
</form> 
```

### JS

```
$(document).ready(function () {
    var i = 1
    $('#id_noa').change(function () {
        var total = $(this).val()
        $('#noa_header').show()

    //I was trying to use two indices to control this add or remove activity. One index check the current existed elements and get the difference between user's new input. Then do the add or remove movements. But I failed to do this.

        while (i <= total) {
            $('.tab_Application').append('<tr class="tab_noa1"><td><input type="text" size="5" value="' + i + '"/></td><td><input type="text" size="5" name="mm' + i + '" id="id_mm' + i + '""/></td><td><input type="text" size="5" name="dd' + i + '" id="id_dd' + i + '""/></td><td><input type="text" size="5" name="ma' + i + '" id="id_ma' + i + '""/></td><td><input type="text" size="5" name="sr' + i + '" id="id_sr' + i + '" value="0""/></td></tr>');
            i = i + 1;
        }
        while (i-1 > total) {
            $(".tab_Application tr:last").remove();
            i=i-1
        }

        $('</table>').appendTo('.tab_Application');

    })
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:06:09.047

我采用了@B3aT 提出的想法，对其进行了编辑和充实以实现这一点（可在[我的 OP 的 jsfiddle 的 fork 中获得](http://jsfiddle.net/amullins/5LkUQ/3/)：

```
var row_i = 0;

function emptyRow() {
  row_i++;
  this.obj = $("<tr></tr>");
  this.obj.append('<td><input type="text" size="5" value="' + row_i + '"/></td>');
  this.obj.append('<td><input type="text" size="5" name="mm' + row_i + '" id="id_mm' + row_i + '""/></td>');
  this.obj.append('<td><input type="text" size="5" name="dd' + row_i + '" id="id_dd' + row_i + '""/></td>');
  this.obj.append('<td><input type="text" size="5" name="ma' + row_i + '" id="id_ma' + row_i + '""/></td>');
  this.obj.append('<td><input type="text" size="5" name="sr' + row_i + '" id="id_sr' + row_i + '" value="0""/></td>');
}

function refresh(new_count) {
  if(new_count > 0) {
    $("#noa_header").show();
  }
  else {
    $("#noa_header").hide();
  }
  var old_count = parseInt($('tbody').children().length);

  var rows_difference = parseInt(new_count) - old_count;

  if (rows_difference > 0)
  {
     for(var i = 0; i < rows_difference; i++)
        $('tbody').append((new emptyRow()).obj);
  }
  else if (rows_difference < 0)//we need to remove rows ..
  {
     var index_start = old_count + rows_difference + 1;          
     $('tr:gt('+index_start+')').remove();
     row_i += rows_difference;
  }
}

$(document).ready(function () {
    $('#id_noa').change(function () {
        refresh( $(this).val() );
    })
}); 
```

函数这么长的原因`emptyRow`是我想让列数易于操作。每列都是单独附加的，因此更改默认模式很简单。

在 html 中，我必须按照@B3aT 的回答中的描述添加`thead`and标记。`tbody`thead 包括前两行，因为第 1 行是选择框，第 2 行是表的实际标题。开始时 tbody 为空。

至于更改单个行的样式（例如调整列宽），最好不要使用表格。类似表格的行为可以像`float:left`在列样式中使用一样简单，确保`clear:both`在每行的末尾放置一个 div。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:29:12.583

在这些情况下 jQuery 表现出色，让我们使用各种选择器。首先，您需要将表的表头和表体（thead 和 tbody）分开。（代码未测试）。

```
function refresh(new_count) {
//how many applications we have drawed now ?
var old_count = parseInt($('tbody').children().count());
//the difference, we need to add or remove ?
var rows_difference = parseInt(new_count) - old_count;
//if we have rows to add
if (rows_difference > 0)
{
    //$('tbody').append() or prepend() new empty rows based on your pattern with a loop
}
else if (rows_difference < 0)//we need to remove rows ..
{
    var index_start = old_count - rows_difference;//for the LAST X rows
    $('tr:gt('+index_start+')').remove();
}
} 
```

# javascript - while( ) 中的加法

> ID：15130589
> 
> 赞同：1
> 
> 时间：2013-02-28T08:14:45.027
> 
> 标签：javascript, jquery

这是HTML：

```
<form>
   <textarea id="input1"></textarea>
   <textarea id="input2"></textarea>
   <span></span>
</form> 
```

js：

```
$("#input2").keyup{
 var a = document.getElementById("input1").length;
 var b = document.getElementById("input2").length;
 var c=a+b;
  $("span").html(c);
} 
```

每次 'c' 达到多个 140 时，我需要将它添加到 'b'，我尝试这样做：

```
while(c%140 == 0){
   c=c+b;
} 
```

在第 140 个 keyup 时，是的，它添加了，但是下一个 keyup(141th) 等等 'c' 回到了 notihng 添加的值。如何正确执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:27:58.297

我不能确定我是否正确阅读了这个问题，但是如果[我的代码的 jsfiddle](http://jsfiddle.net/amullins/kckyx/)是一个近似值，那么解决方案可能就像`var`在`c`添加`a+b`. 如果你想`c`拥有一个持久值，你需要它的范围在`keyup`事件处理程序之外。

从小提琴：

```
$(function() {
   var c = 0;

   $("#input2").keyup( function() {
       var a = $("#input1").val().length;
       var b = $("#input2").val().length;
       c=a+b;
       if(c%140 == 0){
           c=c+b;
       }
       $("span").html(b);
   });

}); 
```

请注意，这是一个`if`，而不是`while`。如果它应该是一个while循环，那是一个很容易做出的改变。

## 更新

我想我知道这里发生了什么。您想要跟踪多页 SMS 消息的总字符数。更新后的[jsfiddle](http://jsfiddle.net/amullins/kckyx/5/)回答了你不会出来问的问题。

这是新代码：

```
$(function() {

  $("#input2, #input1").keyup( function() {
    var a = $("#input1").val().length;
    var b = $("#input2").val().length;
    c=a+b;

    c+=Math.floor(c/140)*b;

    $("span").html(c); 
  });

}); 
```

现在，这当然假设 input1 保存您的实际消息，而 input2 保存一些需要在每个页面上显示的文本。如果情况相反，或者此代码有其他用途，请告诉我。

# java - Geocell 和 Google App Engine 空间查询

> ID：15130592
> 
> 赞同：1
> 
> 时间：2013-02-28T08:14:59.157
> 
> 标签：java, google-app-engine, geospatial

```
lat = json.getJsonArray("data").getJsonObject(i).getDouble("lat");
lon = json.getJsonArray("data").getJsonObject(i).getDouble("lon");
Point p = new Point(lat, lon);
List<String> cells = GeocellManager.generateGeoCell(p); 
```

使用上面的代码，我可以获得如下所示的单元格。

[9, 9f, 9ff, 9fff, 9fffe, 9fffe1, 9fffe13, 9fffe136, 9fffe1364, 9fffe1364f, 9fffe1364fb, 9fffe1364fb7, 9fffe1364fb76]

在最后一个元素“9fffe1364fb76”处，该元素表示多大？

现在我将告诉你我所知道的。

地球的地球大小是510,072,000Km^2。

元素“9”表示 510,070,000km^2/16。

元素“9f”表示 (510,070,000km^2)/(16^2)

.. 最后一个元素“9fffe1364fb76”表示 (510,070,000km^2)/(16^13)。

这就是我对 geocell 的了解。这是正确的吗？

否则，请告诉我真相...zzZ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:01:12.243

这取决于。Geocells 将 [-90,90] x [-180,180] 纬度/经度空间分成几部分。长度为 1 的土工格串将该区域分为 16 个部分，两个维度中的每一个分为 4 个部分。每个连续字符将每个维度再次除以 4。用一个长度为13（最长的）的字符串，每个维度都被以4的因子划分了13次，即4^13 = 67108864。所以[-90,90]纬度区间被划分为180 / 67108864 = 2.68220901 E-6 度，[-180,180] 经度区间区间分为 360 / 67108864 = 5.36441802 E-6 度。

就距离而言，这有多大取决于您在地球上的位置，因为相同的度数在不同的纬度上转化为不同的纵向距离。在赤道上，1 度在两个方向上都等于 111.319 公里，因此赤道上最高分辨率的地理单元测量为 0.597mx 0.2985m，对应的表面积约为 0.18 m^2。

在极点处，纵向长度收缩为零。其间，在纬度 60 度处，土工格室呈正方形，尺寸为 0.2985mx 0.2985m，表面积为 0.089 m^2。

# php - php链接添加当前域

> ID：15130594
> 
> 赞同：0
> 
> 时间：2013-02-28T08:15:02.860
> 
> 标签：php, html

我有以下代码：

```
echo "<li style='font-size:10pts;' class='news-item'>
        <a href='$link'>(".date("D, d M Y", strtotime($date)).") $description</a>
      </li>"; 
```

**链接**的数据库字段值为：

> www.yahoo.com

现在，当执行上面的 echo 语句时，我单击页面上显示的链接，它不会转到 www.yahoo.com，而是转到 www.mydomain.com/www.yahoo.com。这当然会导致找不到 404。请问我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:16:43.527

使用 http:// 放入数据库链接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:17:42.977

如果你没有`http://`在你的链接前面添加，它将作为一个目录执行：

```
echo "<li style='font-size:10pts;' class='news-item'>
        <a href='http://{$link}'>(".date("D, d M Y", strtotime($date)).") $description</a>
      </li>"; 
```

或者放入`http://www.yahoo.com/`您的数据库并使用您的原始脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T08:17:27.390

在链接 href 之前添加 http 或 https。

```
$var = 'www.yahoo.com';

if(strpos($var, 'http://') !== 0) {
  return 'http://' . $var;
} else {
  return $var;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T08:17:57.423

试试这个，

```
$link = "http://".$link;

<a href='".$link."'>(".date("D, d M Y", strtotime($date)).") $description</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T08:18:11.327

您必须添加`http://`到开头，否则它**相对于当前位置**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T08:20:35.610

您的`$link = "www.yahoo.com"`

你的代码 `<a href='$link'>`

然后输出 `<a href='www.yahoo.com'>`

当您使用标签时，href 属性应该是 `<a href='http://www.yahoo.com'>` 链接到其他域。

# css - CSS类选择器？

> ID：15130596
> 
> 赞同：0
> 
> 时间：2013-02-28T08:15:10.310
> 
> 标签：css, css-selectors

我想缩短我的 css 文件（总共 4843 行），我想将此文件应用到一个名为“block1”的类的单个 div，如下所示：

```
 .block1{

      .pages{
         //some style
      }
   } 
```

不是这样（浪费很多时间）：

```
 .block1 .pages{ //some style }

    .block1 .titles{ //some style } 
```

这似乎行不通。还有其他方法可以解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:16:27.270

你应该看看[less](http://lesscss.org)。Less 正是这样做的。

来自较少的网站摘要

> LESS 扩展了 CSS 的动态行为，例如变量、mixin、操作和函数。

它不是 css，但它编译为 css。它可能不会缩短您生成的 css，但它会使它更易于管理。

如果您想要可管理的样式然后还要缩短它，您可以使用 less 构建您的样式，然后使用称为缩小器的东西缩小生成的 css。看看[这个 SO question](https://stackoverflow.com/questions/11353271/minifying-and-inlining-tool-for-less)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:16:48.217

通过使用 CSS 预处理器，如[Less](http://lesscss.org)或[Sass](http://sass-lang.com/)。

# git - git log 排除重命名

> ID：15130597
> 
> 赞同：4
> 
> 时间：2013-02-28T08:15:11.497
> 
> 标签：git

我可以列出文件的提交，即使它已被重命名或移动

```
git log --follow foo.sh 
```

但是，我想“关注”该文件，但只列出文件实际更改的提交。就像是

```
git log --follow --exclude-renames foo.sh 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:48:01.567

```
git log --follow --name-status --oneline foo.sh | sed 'h;N;/\nR/d;g' 
```

*   复制提交行以保留空间
*   在第二行读取
*   如果找到以开头的行，`R`则删除模式空间并开始下一个循环，否则将保留空间复制到模式空间

谢谢[`jthill`](https://stackoverflow.com/users/1290731)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:21:54.703

有点像“[在 git log 中很好地显示文件重命名历史](https://stackoverflow.com/a/13579446/6309)”，您可以添加以下内容`--name-status`：

*   不选择（`grep -v`重命名：状态' `Rxxx`'，同时保持添加' `A`'或修改' `M`'）
*   仍然通过不同的名称跟随文件

但这仍将涉及对 git log 命令（使用 grep 和/或 sed）进行后处理，以获得您想要的输出：目前还没有原生 ' `--exclude-renames`'-like 选项。

# c++ - C++ 类原型

> ID：15130600
> 
> 赞同：1
> 
> 时间：2013-02-28T08:15:28.750
> 
> 标签：c++, class, visual-studio-2012, prototyping

我在这里错过了什么吗？

```
class Foo;

class Bar {
    public:
        Foo foo;
};

class Foo { }; 
```

错误：

> 错误 C2079：“Bar::foo”使用未定义的类“Foo”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T08:19:02.930

当你前向声明一个类时，你可以对它进行指针和引用，但你不能创建前向声明类的类型的成员：需要完整的定义`Foo`来决定外部类的布局（即`Bar`），否则编译器无法决定`Bar`.

但是，这是允许的：

```
class Foo;

class Bar {
    public:
        Foo* fooPtr;
        Foo& fooRef;
}; 
```

允许指向前向声明的类的指针和引用的原因是指针和引用的大小不依赖于它们指向（或它们引用）的类的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:19:38.343

是的，你错过了一些重要的东西：一个问题。

I assume you want to know what's wrong in the code, and why the compiler issues an error.

The compiler has to know the size of Foo in order to calculate the layout of the class Bar. The size of Foo objects is determined by their layout, to know that layout, the compiler has to know the class definition. At the point where you declare the Member variable foo, it merely knows that Foo exists, but not its size, because you have given it only a declaration, not a definition before.

# c# - 如果控件从列表视图模型生成，则数据注释不起作用

> ID：15130604
> 
> 赞同：1
> 
> 时间：2013-02-28T08:15:50.657
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, data-annotations, unobtrusive-validation

我有以下视图模型

```
public class QuestionarrieAnswersViewModel
{
    public long QuestionID { get; set; }
    public string Question { get; set; }

    [Required(ErrorMessage="required")]
    [StringLength(255, ErrorMessage = "Maximum 255 characters are allowed.")]
    public string Answer { get; set; }
} 
```

我正在以下方式生成视图

```
@model List<BusinessLayer.Models.ViewModel.QuestionarrieAnswersViewModel>

@using (Ajax.BeginForm("SaveQuestionarrie", "Member", FormMethod.Post, new AjaxOptions { OnBegin = "OnBegin", OnComplete = "OnComplete" }, new { @class = "form-horizontal" }))
{   
    for(int i=0;i<Model.Count;i++)
    {
     <div class="control-group">
        <div class="head_form">
            <label class="control-label">@Model[i].Question</label>
        <div class="controls">
            @Html.TextAreaFor(m=>m[i].Answer)
            @Html.ValidationMessageFor(m => m[i].Answer)
            @Html.HiddenFor(m=>m[i].QuestionID)         
        </div>
        </div>
    </div>
    }           
    <div class="control-group">
        <div class="controls">
            <button class="btn" type="submit">Save</button>                     
        </div>
    </div>
} 
```

我已经在上面模型中的 Answer 字段上设置了数据注释，但是如果我以下面的方式生成视图，它不会在上面的视图中应用

```
@model BusinessLayer.Models.ViewModel.QuestionarrieAnswersViewModel

@using (Ajax.BeginForm("SaveQuestionarrie", "Member", FormMethod.Post, new AjaxOptions { OnBegin = "OnBegin", OnComplete = "OnComplete" }, new { @class = "form-horizontal" }))
{   
    @Html.TextAreaFor(m => m.Answer)
    @Html.TextAreaFor(m => m.QuestionID)
    <div class="control-group">
        <div class="controls">
            <button class="btn" type="submit">Save</button>                     
        </div>
    </div>
} 
```

这里出了什么问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:15:45.917

为了触发这些验证规则，您需要使用 a`EditorFor`而不是 a `TextAreaFor`。

这是因为`TextArea`'s 的验证存在一个突出问题，请参见此处：[http](http://aspnet.codeplex.com/workitem/8576) ://aspnet.codeplex.com/workitem/8576 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:46:19.507

这是由于随 ASP.NET MVC3 发布的 jquery.validate.unobtrusive.js 版本中的一个错误。 [这个答案](https://stackoverflow.com/a/13156367/678338)是在同一个错误上，解决方案是升级到最新版本的 jquery.validate.unobtrusive.js - 从 MVC4 项目中获取它或使用 NuGet 更新。

jquery.validate.unobtrusive.js 脚本似乎没有版本号，因此如果您在脚本中搜索名为**escapeAttributeValue**的函数，那么这是具有此错误修复的脚本版本。

错误修复中解决的问题是如何处理生成的标记，其名称属性包含需要在 jQuery 选择器中转义的字符。在这种情况下

```
<textarea cols="20" name="[0].Answer" rows="2"></textarea> 
```

需要这个选择器

```
$('[name=\\[0\\]\\.Answer]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:46:07.473

客户端 DataAnnotation（验证）不适用于 Html.TextAreaFor() 助手。

要使其工作，您必须使用 [DataType(DataType.MultilineText)] 属性装饰“Answer”属性。并且在视图中，使用 Html.EditorFor() 帮助器而不是 Html.TextAreaFor() 帮助器方法。

请参阅类似的 SO 答案[asp.net mvc TextAreaFor is not gettingvalidated as a required field](https://stackoverflow.com/a/10216280/819071)。

# c# - C# 搜索“您的意思是”功能

> ID：15130605
> 
> 赞同：3
> 
> 时间：2013-02-28T08:15:54.457
> 
> 标签：c#, asp.net, search

我想用 asp.net/c# 实现一种谷歌“你是说”的功能。用户输入“Red Sheos”，然后点击搜索，输出节目，“你的意思是'红鞋'”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:18:52.337

你需要一个拼写检查器和字典。我建议你从[NHunspell](http://nhunspell.sourceforge.net/)开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T08:36:50.697

检查 Trie 数据结构，请参见此处[Trie](http://en.wikipedia.org/wiki/Trie)

大多数拼写检查器都实现了某种 Trie，如果您需要实现自动完成功能，那么您也可以考虑 Trie

请参阅下面的代码审查 stackexchange 问题

[代码审查特里](https://codereview.stackexchange.com/questions/19802/is-this-a-valid-implementation-of-trie-data-structure/19815#19815)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T08:28:11.923

[我在这里的回答](https://stackoverflow.com/questions/9014045/regex-compare-two-strings-to-find-alliteration-and-assonance/9014069#9014069)（尽管主题有所不同）应该给你关于非精确匹配的想法。有几个很好的选项可用于处理单词“发音”的方式。我会从[Levenshtein](http://en.wikipedia.org/wiki/Levenshtein_distance)开始。

采用不同的方法，SQL Server 全文索引还可以用最少的代码提供非精确匹配。它本身不一定是为了纠正，但确定用户的意图并不总是与语音相似性有关。

为了实现实时性能（例如，在您键入时搜索），请考虑我[在此处](https://stackoverflow.com/questions/8623477/what-type-of-collection-should-i-use/8623535#8623535)描述的数据结构（trie，或其混合）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T08:18:29.537

尝试从自动更正功能中获得灵感。基本上你要做的是在输入的文本上调用自动更正，如果找到“解决方案”，将其显示为`did you mean`建议。

这些可能会有所帮助：

[自动更正算法如何在 PHP 和/或 C# 中工作？](https://stackoverflow.com/questions/4854783/how-do-autocorrect-algorithms-work-in-php-and-or-c)

[自动更正文本 C# Word](https://stackoverflow.com/questions/9304013/autocorrect-text-c-sharp-word)

# visual-studio - Visual Studio 2012 并排配置不正确

> ID：15130609
> 
> 赞同：13
> 
> 时间：2013-02-28T08:16:05.273
> 
> 标签：visual-studio, visual-studio-2012, side-by-side

当我运行 Visual Studio 2012 Professional 时，我收到一条并排配置错误消息。

**信息：**

“C:\Program Files\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe

应用程序无法启动，因为它的并排配置不正确。请查看应用程序事件日志或使用命令行 sxstrace.exe 工具了解更多详细信息。”

**事件簿：**

““C:\Program Files\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe”的激活上下文生成失败。依赖程序集 coloader80.dll，processorArchitecture="X86"，type="win32"，version="1.0。 0.0”找不到。请使用sxstrace.exe进行详细诊断。”

**sxstrace.exe：** [http ://pastebin.com/qgS3Sx8c](http://pastebin.com/qgS3Sx8c)

我已经安装了 vcredist_x86

我正在运行 Windows 7 专业版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T01:40:05.890

我遇到了同样的问题，因为几个文件没有复制到 VS2012 目录中，这导致了“并排”问题。就我而言，我是从网络上的驱动器安装的。在一遍又一遍地安装/卸载/重新安装后，我终于将安装媒体移动到我的本地硬盘驱动器。然后，我能够成功卸载然后重新安装。我认为问题在于，当安装必须重新启动并继续安装时，它无法“及时”找到安装介质，因此它会失败。如果您从“远程驱动器”安装，我建议将安装介质移动到本地驱动器，然后重试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T18:57:22.613

我今天遇到了这个问题，并找到了一种粗略的方法来为我解决它，而无需分析日志并查找丢失的 .dll。

我打开系统配置，正要卸载VS2013 RC，才发现有修复选项。尝试这个没有效果，但我也看到仍然安装了 VS2012 for windows desktop 和 vs2012 for web。

因此，重新启动后，这终于解决了我的`side-by-side`错误：

1.  清理机器上以前安装的任何 Visual Studio 版本。
2.  重启。
3.  修复已安装（且仅剩）的 Visual Studio 版本
4.  重启。

也许这对将来遇到此问题的其他所有人有用。

亲切的问候

# jsf-2 - javax.Servlet.ServletException：找不到标识符为“：form：display”的组件

> ID：15130610
> 
> 赞同：1
> 
> 时间：2013-02-28T08:16:07.507
> 
> 标签：jsf-2, primefaces

嗨，我需要在 tab1 内创建一个带有数据表的手风琴面板，但我收到以下错误:: javax.Servlet.ServletException:cannot find component with identifier ":form:display"，谁能帮我解决这个问题使用 primefaces 时出错。我需要在不使用小部件的情况下工作。

**视图.xhtml**

```
<h:form prependId="false" id="form">  

<p:dataTable id="dataTable" var="car" value="#{tableBean.getList()}"  
             paginator="true" rows="10"  selectionMode="single" selection="#{tableBean.selectedCar}" rowKey="#{car.model}" 
             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
             rowsPerPageTemplate="5,10,15">  
    <f:facet name="header">  
        Posted Jobs  
    </f:facet>  

    <p:column>  
        <f:facet name="header">  
            <h:outputText value="Model" />  
        </f:facet>  
        <h:outputText value="#{car.model}" />  
    </p:column>  

    <p:column>  
        <f:facet name="header">  
            <h:outputText value="Year" />  
        </f:facet>  
        <h:outputText value="#{car.year}" />  
    </p:column>  

    <p:column>  
        <f:facet name="header">  
            <h:outputText value="Manufacturer" />  
        </f:facet>  
        <h:outputText value="#{car.manufacturer}" />  
    </p:column>  

    <p:column>  
        <f:facet name="header">  
            <h:outputText value="Color" />  
        </f:facet>  
        <h:outputText value="#{car.color}" />  
    </p:column>  
      <f:facet name="footer">  
        <p:commandButton id="viewButton" value="View" icon="ui-icon-search"  
               update=":form:display" oncomplete="carDialog.show()"    actionListener="#{tableBean.add}"
                />  
    </f:facet>

</p:dataTable>  
 <p:dialog id="dialog" header="Car Detail" widgetVar="carDialog" resizable="false"  
          width="200" showEffect="clip" hideEffect="fold">  

    <h:panelGrid id="display" columns="2" cellpadding="4">  

        <h:outputText value="Model:" />  
        <h:outputText value="#{tableBean.selectedCar.model}" />  

        <h:outputText value="Year:" />  
        <h:outputText value="#{tableBean.selectedCar.year}" />  

        <h:outputText value="Manufacturer:" />  
        <h:outputText value="#{tableBean.selectedCar.manufacturer}" />  

        <h:outputText value="Color:" />  
        <h:outputText value="#{tableBean.selectedCar.color}" />  
    </h:panelGrid>  
</p:dialog>  

  </h:form> 
```

**AccordionPanel.xhtml**

```
<h:head>
    <title>Accordion Panel</title>
</h:head>
<h:body>

    <h:form>
        <p:accordionPanel>
<p:tab id="DataTable1" title="DataTable 1">
<ui:include src="view.xhtml" />
  </p:tab>
  <p:tab id="DataTable2" title="DataTable2">
</p:tab>
</p:accordionPanel>
    </h:form>

</h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:06:22.337

您收到此错误是因为无法使用呈现的 html 上的指定组件引用找到 commandButton 的更新目标。

```
<p:commandButton id="viewButton" value="View" icon="ui-icon-search"
 update=":form:display" oncomplete="carDialog.show()" actionListener="#tableBean.add}"/> 
```

尝试删除`update=":form:display"`以便您的页面可以呈现，使用 Firebug 检查生成的显示 panelGrid 的组件 ID，并在更新目标中使用该 ID。

由于 primefaces 3.1 版组件引用与 JSF 规范保持一致。有关详细信息，请参阅此链接[UI 组件 findComponent()](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#findComponent%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:54:46.700

将 commandButton 上的 (update=":form:display") 属性更新为：

更新=“：表单：对话框：显示”

# c# - 如何检查工作流是否正在运行。（WF4）

> ID：15130615
> 
> 赞同：2
> 
> 时间：2013-02-28T08:16:18.377
> 
> 标签：c#, workflow-foundation-4

我有 3 个使用相同持久工作流的独立应用程序。其中 2 个是 Web 应用程序，第三个是监视 WF 的 win form 应用程序。我目前正在使用我自己的 DB 查询来检查 WF 是通过 processID guid 运行还是空闲。是否有一些本机方法来检查 WF 是否正在运行，空闲.....通过我用于关联的不会锁定工作流实例的 processID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:18:59.447

我认为更好的方法是使用日志，无论是您自己在数据库中的日志和指示状态的仪表板，还是来自 Windows 或 Windows 服务器的内置系统监视器和性能计数器，这些都将是任何标准方法IT 环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:38:37.250

您可以提升关联键，然后您可以根据关联键查询实例。[请参阅此处以获取解释。](http://msdn.microsoft.com/en-us/library/ee364726.aspx)

# tomcat - 如何通过 Gradle Tomcat 插件使用外部化配置文件？

> ID：15130617
> 
> 赞同：2
> 
> 时间：2013-02-28T08:16:25.180
> 
> 标签：tomcat, configuration, classpath, gradle, gradle-tomcat-plugin

**问题。**我有各种特定于环境的配置文件，我想在运行时将它们包含在类路径中，但我不希望这些成为 WAR 本身的一部分。例如，我有一个`log4j.xml`打开调试的开发环境文件，以及一个包含许多特定于环境的凭据、端点等的属性文件。

我想要这些在 WAR 之外，因为我想发布我测试的同一个 WAR，而不是构建单独的特定于环境的 WAR。我可能会在 WAR 中包含多个特定于环境的配置集（类似于 Maven 和 Spring 提供的配置文件功能），但我不希望这样做。

Standalone Tomcat 具有该`shared.loader`功能 (in `catalina.properties`)，而 Jetty 具有`extraClasspath`，但我不知道如何使用 Gradle Tomcat 插件来做到这一点。有办法吗？

**相关文章。**以下帖子是相关的，但它们似乎涉及将配置文件复制到最终被拉入 WAR 文件的位置。

*   [Gradle tomcat 插件和属性文件](https://stackoverflow.com/questions/14958679/gradle-tomcat-plugin-and-properties-files)
*   [如何使用 gradle 将 .properties 文件添加到我的 WAR 中？](https://stackoverflow.com/questions/6683375/how-do-i-add-a-properties-file-into-my-war-using-gradle)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:05:18.703

想出了一个方法来做到这一点：

```
buildscript {
    repositories { mavenCentral() }
    dependencies {
        classpath "org.gradle.api.plugins:gradle-tomcat-plugin:0.9.7"
        classpath files("/path/to/config/files")
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:50:49.937

您可以尝试为此使用该属性`additionalRuntimeJars`。这个名字有点离谱，但目的是将外部 JAR 添加到 Tomcat 的类加载器中。

```
[tomcatRun, tomcatRunWar]*.additionalRuntimeJars << file("/path/to/config/files") 
```

或者

```
[tomcatRun, tomcatRunWar]*.additionalRuntimeJars = [file("/path/to/config/files")] 
```

我不确定它是否会起作用，但值得一试。如果这不起作用，如果您可以在 GitHub 上为它打开一个问题，那就太好了。

# php - 页面加载时是否仍然加载未使用的图片？

> ID：15130620
> 
> 赞同：2
> 
> 时间：2013-02-28T08:16:33.180
> 
> 标签：php, css, image, load-time

我有一个网站，它有一个函数调用，在工作时间之后，在我的时区切换到*'night mode'*。

php 文件具有夜间模式的 div 以及白天模式的一个文件中的白天模式，div 具有***“day-”***前缀，而夜间模式具有***“night-”***前缀。

并且 css 具有每个 div 背景图像的所有 url。

**现在当网站处于*“白天模式”*时，使用*“day-”* div 是否仍会加载*“night-”* div 背景图像，反之亦然？** ---即**它们会影响页面加载时间吗？**

*（补充信息----这不是javascript它唯一的php，因此只有在关闭时间之前打开页面并在关闭时间之后刷新页面才会更改。）*

编辑 - 添加代码以便对其他人更有用

继承人的PHP

```
<?php
date_default_timezone_set('Asia/Tbilisi');

$c_time = mktime();
$open = strtotime('Today 8am');
$close = strtotime('Today 8pm');
?>

<?php if ($c_time > $open && $c_time < $close): ?> <!-- BEGIN DAY MODE -->

 <div id="animated-head-link">
<a href="<?php echo esc_url( home_url( '/' ) ); ?>" title="Return to  <?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>' Homepage." rel="home">

    <div id="sky" class="stage">       </div><!-- END SKY -->

     </a> 
  </div><!-- END ANIMATED-HEAD-LINK -->      <!-- END DAY MODE -->

 <?php else: ?> <!-- BEGIN NIGHT MODE -->

  <div id="animated-head-link">
  <a href="<?php echo esc_url( home_url( '/' ) ); ?>" title="Return to  <?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>' Homepage." rel="home">

    <div id="night-sky">        </div><!-- END NIGHT-SKY -->

   </a> 
 </div><!-- END ANIMATED-HEAD-LINK -->

<?php endif; ?><!-- END NIGHTMODE --> 
```

和 CSS

```
#sky {
overflow:hidden;
margin: 0px;
background: url('img/bg.png');
max-height: 200px;
min-height: 150px;
height: 20%;
width:100%;
max-width: 1400px;
margin-bottom: -24px;
}

#night-sky {
overflow: hidden;
margin: 0px;
background: url('img/night-bg.png');
max-height: 200px;
min-height: 150px;
height: 20%;
width:100%;
max-width: 1400px;
margin-bottom: -24px;
} 
```

我只包含了两个 div，因为包含更多 div。但是，这应该足以支持该问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T08:29:54.160

如果我理解正确，你有这样的事情：

**CSS**

```
.day { background-image: url(day.jpg); }
.night { background-image: url(night.jpg); } 
```

**PHP**

```
<div class="<?php echo $day ? 'day' : 'night'; ?>"> 
```

这意味着，生成的 HTML 输出一次只使用一个类。然后将**不会**加载其他图像。如果在 HTML 中使用了这两个类，即使是不可见的元素，它们*也会被加载。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:32:36.863

它**不是**。

您可以使用浏览器进行检查，许多浏览器都支持“开发人员工具”，您可以在其中查看实际产生的流量。（例如 Firefox 有 Firebug 工具）

你可以在这个例子上试试：

```
<html>
  <head>
  <title>Test</title>
  <style type="text/css">
  <!--
  #middle { width: 800px; height: 600px; border: 2px solid #AFF; margin: 100px; }

  .day {background-image: url('http://i1.trekearth.com/photos/88915/night_and_day.jpg');}
  .night {background-image: url('http://smartpei.typepad.com/.a/6a00d83451db7969e20153903c3136970b-800wi');}   
  //-->
  </style>
  </head>
  <body>
  <div id="middle" class="night">
  </div>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T08:38:53.863

如果您正在渲染包含带有或属性`night-`的html 。`day mode``display:none``hidden`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T09:05:17.880

CSS 只会加载需要/具有 HTML 引用的图像：

![在此处输入图像描述](../Images/b53d1eb779e041848115dbd489bc3bcf.png)

您会看到 GET logo-nl.png，还有一个 logo-fr.png，它没有加载，只有在网站上更改语言时，才会将 logo-nl.png 和 logo-fr 放在缓存中。 png 将被加载。

# php - Codeigniter 视图上的 Foreach 未定义变量错误

> ID：15130621
> 
> 赞同：4
> 
> 时间：2013-02-28T08:16:33.917
> 
> 标签：php, codeigniter, view, foreach, undefined

我认为我有这个错误，无法找出问题所在。

```
A PHP Error was encountered

Severity: Notice

Message: Undefined variable: c

Filename: views/commentsList.php

Line Number: 10 
```

这是我的查看代码

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>

<div id="commentsByParentId">
   <?foreach($comments as $c):?>
        <?=$c['comment']?>
    <?endforeach?>

</div>
</body>
</html> 
```

`$comments`是来自控制器的数组。`$c`是循环变量，所以我不明白为什么它会捕获**undef var error**。

UPD：这是我的控制器代码

```
public function viewCommentsListByParentId($parentid) {
    $data = array();
    $data = $this->em->getRepository('Entities\Comment')->findBy(array('parentid' => $parentid));
    $comments = array();
    for ($i=0; $i<count($data); $i++){
        $comments[$i]['comment'] = $data[$i]->getComment();
    }
    $this->load->view('commentsList', $comments);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:24:17.043

您的服务器是否允许`<?`标签。有些配置没有，它们会将它们变成常规的 html 注释。试试看`<?php foreach($comments as $c): ?>`是否能解决问题。

编辑：

现在我们修复了这个错误，它不知道 $comments 是什么。那是因为在您的控制器中，您将其定义为 $commentsList：

所以你需要`<?php foreach($commentsList as $c): ?>`

注意：您仍然不能使用`<?`标签，因为这首先是问题所在。

第二次编辑：

我查阅了 CodeIgnitor 的文档，它说您必须在`$this->load->view('view_name', $data);`其中包含 data 是一个值数组，其中 key 是视图中使用的变量名，而 value 是该键的值。

所以试试这个：`$this->load->view('view-name', array('comments' => $comments));`

然后在视图中返回`<?php foreach($comments as $c): ?>`

有关详细信息，请参阅[此](http://ellislab.com/codeigniter/user-guide/general/views.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:19:46.327

查看您的控制器代码后：您需要在关联数组中传递 $comments 以查看：

```
$data['comments'] = $comments; 
$this->load->view('commentsList', $data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:35:43.893

尝试这个 ：

```
<?php 
foreach($comments as $c){
    echo $c['comment'];
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T10:28:02.080

大家，谢谢。我以这种方式解决了这个问题。我将控制器更改为此。传递控制器对象数组似乎比传递数组数组更好。

```
public function viewCommentsListByParentId($parentid) {
    $data = array();
    $data['comments'] = $this->em->getRepository('Entities\Comment')->findBy(array('parentid' => $parentid));
    $this->load->view('commentsList', $data);
} 
```

并改变了我的看法

```
 <?php foreach($comments as $c):?>
        <?=$c->getComment()?><br>
    <?php endforeach?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T09:18:59.493

你到那里的奇怪错误。为什么在 foreach 循环中没有 HTML 时使用简写 PHP 标记？还是生产代码不同？

您可以使用以下代码（解决方法）使您的代码工作：

```
<?php
    foreach($comments as $key=>$c) {
        if(isset($c) && isset($c['comment'])) {
            echo $c['comment'];
        } else {
            echo 'Error at index ' . $key;
        }
    }
?> 
```

请报告您返回的手动错误。

# c# - 更新后获取 RowVersion

> ID：15130627
> 
> 赞同：1
> 
> 时间：2013-02-28T08:17:09.750
> 
> 标签：c#, database, entity-framework-4, rowversion

我使用带有行版本的 Entity Framework 4。我想更新一行，然后接收新的行版本。

我可以在不重新访问数据库中的行的情况下做到这一点吗？

# php - htaccess 403 错误重定向不起作用

> ID：15130629
> 
> 赞同：1
> 
> 时间：2013-02-28T08:17:24.163
> 
> 标签：php, .htaccess

我在我的 htaccess 中创建了 404 重定向，并且工作正常。

```
ErrorDocument 404 /myfolder/404.html 
```

但我对 403 重定向有问题。

```
ErrorDocument 403 /myfolder/403.html 
```

这条线不能正常工作。你有什么想法吗。谢谢。

# javascript - 为什么新的 javascript 数组有“未定义”条目？

> ID：15130654
> 
> 赞同：3
> 
> 时间：2013-02-28T08:19:26.560
> 
> 标签：javascript, undefined

这是一个示例，演示了一个数组，当您填充它时，它也会在其中获取所有类型的未定义条目。

这是在 firefox 19.0/firebug 上，不确定它是否发生在其他浏览器上。

基本流程：

1.  对象已初始化（非常底部）
2.  它称为“负载”
3.  当 ajax 在加载中返回时，data.objects 包含一个 json 对象数组。该数组上没有未定义的条目。
4.  setObjects 被调用，所有来自 ajax 调用的对象都被复制到 this.objects。
5.  当它们被复制时，我可以看到*未定义*的条目出现在萤火虫中，如果我没有第二次传递数组并拼接出未定义的条目，它会在尝试访问模板中的数组元素时破坏胡子。

为什么 javascript 会自动用*未定义*的条目填充 this.objects 数组？

这是代码：

```
function MailerFromProfile( )
{
    // privileged
    this.objects = [];
    this.load( );
}

MailerFromProfile.prototype.setObjects = function( objects )
{
    for( var i in objects )
    {
        if( 'undefined' !== objects[ i ] )
        {
            this.objects[ objects[ i ].id ] = objects[ i ];
        }
    }
    // I should not have to do this:
    for( var i = 0; i < this.objects.length; i++ )
    {
        if( typeof this.objects[ i ] === 'undefined' )
        {
            this.objects.splice( i, 1 );
            i--;
        }
    }
}

MailerFromProfile.prototype.setTemplate = function( n, v )
{
    this.template[ n ] = v;
}

MailerFromProfile.prototype.load = function( )
{
    jQuery.post(
        MAILER_PATH,
        { session: MAILER_SESSION,
          object : 'from_profile',
          action : 'list'
        },
        function( data )
        {
            if( typeof data.objects !== 'undefined' )
            {
                g_mailer_from_profiles.setObjects( data.objects );
            }
        },
        'json' );
}

var g_mailer_from_profiles = new MailerFromProfile( ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T08:26:45.020

> 为什么 javascript 会自动用未定义的条目填充 this.objects 数组？

它没有，但它可以看起来那样。

关键是您正在设置这样的数组条目：

```
this.objects[ objects[ i ].id ] = objects[ i ]; 
```

...显然，`objects[ i ].id`有时高于数组中的条目数。

标准的 JavaScript 数组[根本不是一个真正的数组](http://blog.niftysnippets.org/2011/01/myth-of-arrays.html)（除非经过 JavaScript 引擎优化），它是一个对一些事情进行特殊处理的对象。

让我们举一个更简单的例子：

```
var a = [];            // An empty array
console.log(a.length); // 0
a[3] = "foo";          // Puts an entry at index 3
console.log(a.length); // 4 
```

如您所见，如果您写入超出数组末尾的数组条目，`length`则数组的 调整为比您写入的索引高一。

但是 JavaScript 不会用`undefined`. `a[0]`、`a[1]`和处的条目`a[2]` **不存在**：

```
console.log(1 in a);   // false 
```

但是如果你向一个数组询问一个不存在的条目，你会得到`undefined`：

```
console.log(a[1]);     // undefined 
```

...就像您在请求不存在的属性时对任何其他 JavaScript 对象所做的那样（因为数组“元素”实际上是对象属性，而数组“索引”实际上是属性名称）。

这与实际存在的带有 value 的条目*不同*`undefined`，这也是可能的：

```
a[1] = undefined;
console.log(1 in a);   // true
console.log(a[1]);     // undefined 
```

所以 Mustache 循环遍历数组 from `0`to`length - 1`并询问条目，其中一些不存在，导致`undefined`.

这是一个很长的说法，您可能希望将该行更改为：

```
this.objects.push(objects[ i ]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:21:56.530

当你这样做时

```
this.objects[ objects[ i ].id ] = objects[ i ]; 
```

您要求数组扩展`this.objects`到`objects[ i ].id`. `undefined`当您需要未填充索引处的元素时，引擎没有其他解决方案。

如果您的数组大部分为空（稀疏数组），您可能应该使用对象作为映射，即使用

```
this.objects = {}; 
```

# c - C - 获取信令进程的进程 ID

> ID：15130660
> 
> 赞同：2
> 
> 时间：2013-02-28T08:19:51.490
> 
> 标签：c, signals, pid

所以这是我现在遇到的问题，我创建了 2 个不同的程序（1 个将管理另一个，而另一个将被执行多次）。这些程序将通过信号来回通信。我的问题是，是否有可能（以及如何）获取发送信号的程序的进程 ID。我的程序使用 signal() 来捕获信号并使用 kill() 来发送它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:45:06.027

尽管 signal() 在标准 C 库中，但此函数不可移植，其行为取决于系统。最好使用 sigaction() ，它是 POSIX.1。

以下是如何将 sigaction 与处理程序 void h(int sig) 一起使用的示例：

```
int mysignal (int sig, void (*h)(int), int options)
{
    int r;
    struct sigaction s;
    s.sa_handler = h;
    sigemptyset (&s.sa_mask);
    s.sa_flags = options;
    r = sigaction (sig, &s, NULL);
    if (r < 0) perror (__func__);
    return r;
} 
```

选项在 man sigaction 中描述。一个不错的选择是`options=SA_RESTART`。

要知道发送信号的进程的 PID，请设置`options=SA_SIGINFO`并使用`sa_sigaction`回调而不是`sa_handler`; 它将收到一个`siginfo_t`结构，有一个`si_pid`字段。您可以使用 将数据与信号相关联`sigqueue`。

一般来说，使用信号以安全的方式进行通信是一个坏主意（当发送n个信号时，只有第一个有机会被传递；没有钩子来关联其他数据；可用的用户信号只有两个） . 最好使用管道、命名管道或套接字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:23:33.517

不要使用`signal()`，它已经过时了。如果你有它，请改用它[`sigaction()`](http://linux.die.net/man/2/sigaction)，它提供了一个接口来获取发送者的进程 ID。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-06T15:50:58.260

要获取发送信号的进程的进程 ID，您需要将其包含在选项 SA_SIGINFO 中。如果你这样做，sigaction 的接口会略有不同。以下是要使用的正确处理程序以及如何设置它的示例。（我将 SA_RESTART 作为一个选项包括在内只是因为它通常是一个好主意，但没有必要）

```
// example of a handler which checks the signalling pid
void handler(int sig, siginfo_t* info, void* vp) { 
  if (info->si_pid != getpid()) {
    // not from me (or my call to alarm)
    return;
  }
  // from me.  let me know alarm when off
  alarmWentOff = 1;
} 
```

这是我设置处理程序的一般代码：

```
typedef void InfoHandler(int, siginfo_t *, void *);

InfoHandler*
SignalWithInfo(int signum, InfoHandler* handler)
{
  struct sigaction action, old_action;

  memset(&action, 0, sizeof(struct sigaction));
  action.sa_sigaction = handler;  
  sigemptyset(&action.sa_mask); /* block sigs of type being handled */
  action.sa_flags = SA_RESTART|SA_SIGINFO; /* restart syscalls if possible */

  if (sigaction(signum, &action, &old_action) < 0)
perror("Signal error");
  return (old_action.sa_sigaction);
} 
```

最后，对于这种特殊情况：

```
SignalWithInfo(SIGALRM, handler); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-20T10:18:07.683

现在变了。信号信息显示的不是 1 个 pid，而是简单的数字。这符合killall过程。可能，有可能枚举 /proc/ 目录，当你找到 /proc/DIGIT 时，打开 /proc/DIGIT/comm，读取并关闭它。可能，acueried 名称将是“关闭”或“重新启动”

# jquery - 本地化不适用于 mvc4 应用程序中的按钮

> ID：15130662
> 
> 赞同：2
> 
> 时间：2013-02-28T08:20:09.937
> 
> 标签：jquery, asp.net-mvc-4, localization, jquery-jtable

我本地化了我的应用程序，它适用于标签、标题和错误消息。我在我的应用程序中使用了 jtable。但是按钮没有本地化。在 jtable.js 里面我有

```
messages: {
            serverCommunicationError: 'An error occured while communicating to the server.',
            loadingMessage: 'Loading records...',
            noDataAvailable: 'No data available!',
            areYouSure: 'Are you sure?',
            save: 'Save',
            saving: 'Saving',
            cancel: 'Cancel',
            error: 'Error',
            close: 'Close',
            cannotLoadOptionsFor: 'Can not load options for field {0}'
        } 
```

但是，如果我选择俄语，我应该以俄语获取这些消息。为此，我尝试添加如下资源文件：

```
<script type="text/javascript">
(function ($) {
    $.widget("hik.jtable", {
        messages: {

            serverCommunicationError: '@SEFTool.Resources.Models.ValidationStrings.serverCommunication',
            loadingMessage: '@SEFTool.Resources.Models.ValidationStrings.loading',
            noDataAvailable: '@SEFTool.Resources.Models.ValidationStrings.noData',
            areYouSure: '@SEFTool.Resources.Models.ValidationStrings.Sure',
            save: '@SEFTool.Resources.Models.ValidationStrings.Save',
            saving: '@SEFTool.Resources.Models.ValidationStrings.Saving',
            cancel: '@SEFTool.Resources.Models.ValidationStrings.Cancel',
            error: '@SEFTool.Resources.Models.ValidationStrings.Error',
            close: '@SEFTool.Resources.Models.ValidationStrings.Close',
            cannotLoadOptionsFor: '@SEFTool.Resources.Models.ValidationStrings.cannotLoad'

        }
    });
}); 
```

但它不起作用..我如何将当前文化传递给 js 文件并在其中调用资源文件。

请帮助本地化按钮..

编辑：-

我创建了一个类

```
public static class MyGlobals
   {
       public static string serverCommunicationError;
.....
   } 
```

我给的内部视图是这样的。

```
@SEFTool.Models.Administration.MyGlobals.serverCommunicationError= '@SEFTool.Resources.Models.ValidationStrings.serverCommunication' 
```

我在 '@SEFTool.Resources.Models.ValidationStrings.serverCommunication' 中使用俄语。但是这个值没有被传递给 @SEFTool.Models.Administration.MyGlobals.serverCommunicationError.serverCommunicationError 显示为 null

编辑：-

在索引视图中我已经这样做了.....但是没有得到输出

```
 <script type="text/javascript">

(function (global) {
    var r = global.Resources || {};
    r.serverCommunicationError = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.serverCommunication)';
    r.loadingMessage = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.loading)';
    r.noDataAvailable = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.noData)';
    r.areYouSure = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.Sure)';
    r.save = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.Save)';
    r.saving = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.Saving)';
    r.cancel = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.Cancel)';
    r.error = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.Error)';
    r.close = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.Close)';
    r.cannotLoadOptionsFor = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.cannotLoad)';

    global.Resources = r;
})(this);

    $('#content_1').jtable({
        title: '',
        paging: true,
        pageSize: 10,
        sorting: true,
        inlineEditor: false,
        permissions: 'AED', 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:06:31.317

In your view (.cshtml), set up the following script tag:

```
<script type="text/javascript">
    (function(global) {
        var r = global.Resources || {};
        r.serverCommunicationError = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.serverCommunication)';
        r.loadingMessage = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.loading)';
        r.noDataAvailable = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.noData)';
        r.areYouSure = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.Sure)';
        r.save = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.Save)';
        r.saving = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.Saving)';
        r.cancel = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.Cancel)';
        r.error = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.Error)';
        r.close = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.Close)';
        r.cannotLoadOptionsFor = '@Html.Raw(SEFTool.Resources.Models.ValidationStrings.cannotLoad)';

        global.Resources = r;
    })(this);
</script> 
```

Then, in your script file, reference it like this:

```
messages: {
            serverCommunicationError: Resources.serverCommunicationError,
            loadingMessage: Resources.loadingMessage,
            noDataAvailable: Resources.noDataAvailable,
            areYouSure: Resources.areYouSure,
            save: Resources.save,
            saving: Resources.saving,
            cancel: Resources.cancel,
            error: Resources.error,
            close: Resources.close,
            cannotLoadOptionsFor: Resources.cannotLoadOptionsFor
        } 
```

Just remember that the first script tag has to be called before the code in you js-file, so that the `Resources` object will be available. If, in your js-file, you wait for the DOM to be ready, this will be no problem though. Also, this is just the first solution that came to my mind. Maybe its not the best, and someone else knows a better approach. I would be interested too in different ways to solve this.

# java - 如何使用类型参数从 Java callablestatement 调用 Oracle 过程？

> ID：15130664
> 
> 赞同：1
> 
> 时间：2013-02-28T08:20:20.710
> 
> 标签：java, oracle, object, jdbc, procedure

我必须从带有 JDBC Oracle 驱动程序的 Java 应用程序调用 Oracle DB 中的存储过程，其中一些参数是简单类型（VARCHAR2、NUMBER、...），而其他参数是对象或对象的事件表。

```
create or replace 
type t_TYPE as object (In_PARAM VARCHAR2(255)   );

create or replace 
type t_TYPE_array is table of t_TYPE ;

PROCEDURE SOME_PROC (in_myParam IN t_TYPE_array, out_retVal OUT NUMBER) AS ... 
```

我在 Java 1.6 和 ojdbc6 上，我的方式是 java.sql.CallableStatement，但我对其他解决方案持开放态度（在 JDBC 驱动程序之上）。

PS 这是一个在 Jboss 5 中运行的企业应用程序（来自数据源的连接）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:57:47.283

发现自己：

```
StructDescriptor structDesc = StructDescriptor.createDescriptor(TYPE_STRUCT, dbConnection);
ArrayDescriptor arrayDesc = ArrayDescriptor.createDescriptor(TYPE_ARRAY, dbConnection);

Object[] objType = new Object[1];
objType[0] = new String("param data");
oracle.sql.STRUCT struct = new oracle.sql.STRUCT(structDesc, dbConnection, objType);

Object[] arrayObj = new Object[size];
arrayObj[0] = struct;
arrayObj[1] = struct1;
[...]
oracle.sql.ARRAY array = new oracle.sql.ARRAY(arrayDesc, dbConnection, arrayObj);

callableStatement = dbConnection.prepareCall(MY_CALL);
[...]
callableStatement.setArray(4, array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:34:31.407

对于一些接受 VARCHAR 和数字作为输入和数字输出的存储过程，我会这样做。

```
 Connection conn = null;
    CallableStatement cs = null;
    try {
        conn = dataSource.getConnection();
        cs = conn.prepareCall("{ CALL pkg.someproc(?,?,?) }");

        //populate stored proc parameters
        cs.setString(1, param1);
        cs.setInt(2, param2);
        cs.registerOutParameter(3, Types.NUMERIC); 

        //execute stored procedure
        cs.execute();
    } 
```

# mysql - 用于加载数据库的 EC2 实例

> ID：15130665
> 
> 赞同：0
> 
> 时间：2013-02-28T08:20:25.980
> 
> 标签：mysql, amazon-ec2

我正在做涉及将数据库从文件加载到 MySQL 的实验。

在我的机器上，2.1Gh CoreDuo，加载时间不到 3 秒。

我尝试在 EC2 实例中使用中型、大型然后是高 CPU 实例，但它们都需要一个数量级以上（大约 30 秒）。

有谁知道这里的问题是什么？是否有可能达到与我的非云机器相同的性能？

# node.js - NodeJS - 无法实现异步功能

> ID：15130666
> 
> 赞同：1
> 
> 时间：2013-02-28T08:20:29.573
> 
> 标签：node.js, asynchronous

我是 NodeJs 的新手。这是我学习异步函数的代码。

```
//--------------------- MAIN ---------------
console.log("Endpoint 1\r\n");

testThread(1000000000,function (result){
    console.log(">>>>"+result+"\r\n");
});

console.log("Endpoint 2\r\n");

//------------------------------------------

function testThread(data,callback) {    
    //take a long time
    for(j=0;j<data;j++) {
        a = 122342342342424242431*3543652636364;
    }
    //          
    callback(a);
} 
```

运行：

```
node testthread.js 
```

结果总是：

```
Endpoint 1

>>>>4.335387639806787e+32

Endpoint 2 
```

系统打印“端点 1”，耗时 2 秒，打印“>>>>4.335387639806787e+32”，然后打印“端点 2”

我在这里找不到异步。它应该是：

```
Endpoint 1

Endpoint 2

>>>>4.335387639806787e+32 
```

请解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:44:37.827

这是一个完全同步的代码，并且由于 node.js 是单线程的，它不会以这种方式启动第二个线程。

有几个异步任务，比如网络请求或数据库调用，但这个不是。

您必须生成一个子进程才能进行此异步操作。

有关更多信息，请参见[http://nodejs.org/api/child_process.html](http://nodejs.org/api/child_process.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:50:44.297

异步函数是调用其他异步函数的函数。在 javascript/node.js 中没有其他方法可以实现异步函数。乍一看，这不是先有鸡还是先有蛋的问题吗？如果要求它必须调用另一个异步函数才能异步，如何编写异步函数？

答案是最低级别的异步函数必须在 C 中实现。

幸运的是，javascript/node.js 有几个用 C 实现的内置异步函数，我们可以将它们用作 javascript 中的构建块来构建我们自己的异步函数。此类函数的示例包括`http.request()`方法、`socket.listen()`方法以及可能最简单的`setTimeout()`和`setInterval()`。

这是一个如何重写代码以实现异步处理的示例；

```
function long_task (repeat_number, callback) {
    // setTimeout is asynchronous, so keep calling it until we're done

    function loop () {
        if (repeat_number > 0) {
            repeat_number --;
            setTimeout(loop,1);
        }
        else {
            callback("I'm done!");
        }
    }

    loop();
}

console.log("calling long task");
long_task(10000,function(x){console.log(x)});
console.log("long task started"); 
```

# rubymotion - Rubymotion：添加方法的 NoMethodError

> ID：15130669
> 
> 赞同：4
> 
> 时间：2013-02-28T08:20:57.093
> 
> 标签：rubymotion

我向 String 类添加了一个额外的方法。我想稍后使用这个方法，但是我得到一个 no Method 错误。

```
class String
   def as_file_full_path
      NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, true)   [0].stringByAppendingPathComponent(self)    
  end
end 
```

当我在 REPL 中尝试以下操作时，它可以工作：

```
 (main)> "image.jpg".as_full_path
  => "/Users/user/Library/Application Support/iPhone Simulator/6.1/Applications/30D186A9-B1C7-4377-AE91-0D14BD3B4A6D/Documents/image.jpg" 
```

但是当我在我的模型类上调用一个方法时，它不再起作用了：

```
 (main)> w = Word.first
  => #<Word:0x94d7df0>
 (main)> w.filename
  => "2C86A58A-A92A-4A0F-B26C-0F5F583E142C.caf"
 (main)> w.filename.class
  => String
 (main)> w.filename.as_full_path
 2013-02-28 09:17:55.935 project[74283:c07] undefined method `as_full_path' for "2C86A58A-A92A-4A0F-B26C-0F5F583E142C.caf":String (NoMethodError)
 => NoMethodError: undefined method `as_full_path' for "2C86A58A-A92A-4A0F-B26C-0F5F583E142C.caf":String 
```

该模型是使用 NanoStore::Model 实现的。

编辑：

当我克隆模型返回的字符串时，存在添加的*方法*。

```
w.filename.dup.as_full_path
=> "/Users/user/Library/Application Support/iPhone Simulator/6.1/Applications/30D186A9-B1C7-4377-AE91-0D14BD3B4A6D/Documents/2C86A58A-A92A-4A0F-B26C-0F5F583E142C.caf" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T11:09:58.960

问题解决了！由于某种原因，扩展 String 类并不总是有效。我认为 NanoStore 出于某种原因不会返回“真正的”红宝石字符串。通过用“NSString”替换“String”来解决它：

```
class NSString 
   def as_file_full_path
       NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, true)   [0].stringByAppendingPathComponent(self)    
   end
end 
```

# python - PIL 和基于矢量的图形

> ID：15130670
> 
> 赞同：19
> 
> 时间：2013-02-28T08:21:08.340
> 
> 标签：python, svg, python-imaging-library, vector-graphics, eps

当我尝试使用 PIL 打开 EPS 或 SVG 图像时遇到了几个问题。

开幕 EPS

```
from PIL import Image
test = Image.open('test.eps') 
```

结束于：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\Lib\site-packages\PIL\Image.py", line 1965, in open
    return factory(fp, filename)
  File "C:\Python27\Lib\site-packages\PIL\ImageFile.py", line 91, in __init__
    self._open()
  File "C:\Python27\Lib\site-packages\PIL\EpsImagePlugin.py", line 206, in _open
    raise IOError, "bad EPS header"
  IOError: bad EPS header 
```

同样打开 SVG 以`IOError: cannot identify image file`.

问题是我必须在我的应用程序中支持这两种格式。转换为其他格式是没有选择的。我在 Windows 7、Python 2.7.2 和 PIL 1.1.7 上。

我上传了两张图片：[EPS](http://bit.ly/VckNjH)和[SVG](http://bit.ly/XcsIxA)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-07-23T07:25:15.027

截至今天，也就是 2017 年 7 月，通过导入提供 svg2png 功能的**cairosvg**可以**轻松完成 SVG 文件的读取和转换。**

此外，**svglib**开发又开始了，因此通过导入 svglib 和**reportlab**，从 svg 到 png 的转换也应该很容易。2个电话的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T18:01:16.063

PIL 有替代品，但 PIL 的替代品不是您想要的 - 我所知道的没有库会透明地打开基于矢量的绘图并将其视为任何其他图像，而不是打开 Web 浏览器并抓取它的渲染.

对于处理 SVG，有一个使用 Cairo 的配方 - 如果比 PIL API 更难处理，它也可以处理许多其他格式 - 我认为 Cairo 也可以处理 EPS - 所以，你可以开发你的带有 pycairo 的应用程序 - 或 pycairo + PIL 在最坏的情况下。

渲染 SVG 的秘诀在于：[Convert SVG to PNG in Python](https://stackoverflow.com/questions/6589358/convert-svg-to-png-in-python/6599172#6599172)

（请注意，您不必“将文件转换为 PNG” - 配方显示了如何渲染到 cairo 表面，可以显示、保存到文件等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-25T14:25:43.320

然而，Pillow 支持仍然是矢量图形的 EMF（增强型 Windows 元文件）。我偶然发现了这个线程，因为我正在寻找将 SVG 转换为 EMF 的便捷方法。最好的办法是使用 Inkscape 从 SVG 创建 EMF：

`inkscape --file image.svg --export-emf image.emf`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T17:26:23.690

`PIL`不支持`svg`，你可以[`svglib`](https://pypi.python.org/pypi/svglib/)试试~~联合国~~幸运的是，确实~~不是~~似乎正在积极开发中：

*   [https://pypi.python.org/pypi/svglib/](https://pypi.python.org/pypi/svglib/)
*   [https://github.com/deeplook/svglib](https://github.com/deeplook/svglib)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-08T12:29:06.890

虽然我相信最佳答案更好，但可以利用 Inkscape 将 SVG 渲染为 PNG 文件。

```
render_image_command = "inkscape --export-background-opacity=0 --export-width={} --export-type=png --export-filename {} {}"

render_image_command = render_image_command.format(
    image_width_in_pixels,
    path_to_png_image_to_write,
    path_to_svg_image_to_read
) 
```

# xcode - 在 Xcode 中编译时出现链接器错误

> ID：15130672
> 
> 赞同：1
> 
> 时间：2013-02-28T08:21:37.390
> 
> 标签：xcode, linker, linker-errors

在 Xcode 中编译程序时出现此错误。

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_MyDatabase", referenced from:
      objc-class-ref in Gallery_CollectionViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:36:15.273

您忘记将实现该类的源文件添加`MyDatabase`到 Xcode 目标，因此它没有被编译并与二进制文件链接。

# c# - 为什么 SQL 语句更新的记录比它需要的多？

> ID：15130674
> 
> 赞同：1
> 
> 时间：2013-02-28T08:21:51.270
> 
> 标签：c#

我的代码有问题，特别是在更新代码上。

```
private void updatebtn_Click(object sender, EventArgs e)
{
    String Fname = fnametb.Text;
    String Lname = lnametb.Text;
    String Age = agetb.Text;
    String Address = addresstb.Text;
    String Course = coursetb.Text;

    {
        connection.Open();
        OleDbCommand select = new OleDbCommand();
        select.Connection = connection;
        select.CommandText = "Select * From Accounts";
        OleDbDataReader reader = select.ExecuteReader();
        while (reader.Read())
        {
            OleDbCommand insert = new OleDbCommand("UPDATE Accounts SET Firstname=@Fname, Lastname=@Lname, Age=@Age, Address=@Address, Course=@Course WHERE Lastname='"+ reader[2].ToString()+"'", connection);

            insert.Parameters.Add("@Fname", OleDbType.VarChar).Value = Fname;
            insert.Parameters.Add("@Lname", OleDbType.VarChar).Value = Lname;
            insert.Parameters.Add("@Age", OleDbType.VarChar).Value = Age;
            insert.Parameters.Add("@Address", OleDbType.VarChar).Value = Address;
            insert.Parameters.Add("@Course", OleDbType.VarChar).Value = Course;
            insert.ExecuteNonQuery();

            fnametb.Clear();
            lnametb.Clear();
            agetb.Clear();
            addresstb.Clear();
            coursetb.Clear();
            listBox1.Items.Clear();
            searchtb.Clear();
        }
        connection.Close();
    }
} 
```

以上是我的代码。每当我更新一条记录时，表中的所有记录都会受到影响。我认为阅读器有问题。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T08:26:36.933

您正在选择所有记录，

```
select.CommandText = "Select * From Accounts"; 
```

然后你用阅读器循环结果。

```
while (reader.Read()) 
```

然后你更新每条记录。

```
String sql = "UPDATE Accounts SET Firstname=@Fname, Lastname=@Lname, Age=@Age, Address=@Address, Course=@Course WHERE Lastname='"+ reader[2].ToString()+"'";
OleDbCommand insert = new OleDbCommand(sql, connection); 
```

那你为什么感到惊讶？

我不确定你真正想要什么。也许你忘记在`WHERE`你的第一个选择中添加一个子句并且你想使用`lnametb.Text`. 但是第一个选择只是多余的，您可以使用`WHERE`更新命令：

```
String sql = "UPDATE Accounts SET Firstname=@Fname, Lastname=@Lname, Age=@Age, Address=@Address, Course=@Course WHERE Lastname=@LastName";
insert.Parameters.Add("@LastName", OleDbType.VarChar).Value = lnametb.Text; 
```

顺便说一句，你为什么命名你的 update-command `insert`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:27:16.213

问题是由于某种原因，您在循环中为读者找到的每条记录执行更新。自然，读者会在表中找到您的每一个姓氏，因此更新将更改每条记录！

您需要删除循环，删除阅读器，并更改更新命令以使用屏幕上任一输入框中的姓氏：

```
connection.Open();
OleDbCommand update = new OleDbCommand("UPDATE Accounts SET Firstname=@Fname, Age=@Age, Address=@Address, Course=@Course WHERE Lastname=@Lname", connection);
update.Parameters.Add("@Fname", OleDbType.VarChar).Value = Fname;
update.Parameters.Add("@Lname", OleDbType.VarChar).Value = Lname;
update.Parameters.Add("@Age", OleDbType.VarChar).Value = Age;
update.Parameters.Add("@Address", OleDbType.VarChar).Value = Address;
update.Parameters.Add("@Course", OleDbType.VarChar).Value = Course;
update.ExecuteNonQuery();
connection.Close(); 
```

当然，这不会让您更新姓氏：为此，您需要提供某种独立的学生 ID，并在`WHERE`您的子句中使用它`UPDATE`而不是姓氏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:27:05.093

您正在迭代表中的所有记录并设置为一个值.. 仅访问匹配的记录并更新它是错误的

# silverlight - 在telerik silverlight gridview中拖动列时突出显示

> ID：15130675
> 
> 赞同：1
> 
> 时间：2013-02-28T08:21:51.023
> 
> 标签：silverlight, telerik, telerik-grid, radgridview

比如这样的分隔线

![在此处输入图像描述](../Images/4b612f7e13ac6fa05bedb80dacb6683c.png)

可能吗？请帮忙

非常感谢

# sql-server - Visual Studio 的 sql server 中的查询生成器，用于从 id 所在的表中选择

> ID：15130677
> 
> 赞同：0
> 
> 时间：2013-02-28T08:21:55.707
> 
> 标签：sql-server, visual-studio-2010

我已经为登录页面创建了查询，它已经奏效了！

如果有人可以指导我创建一个查询，我想在其中 id=__ 的文本框中显示所有值，那将是非常有帮助的

请注意，我不只是简单地问，我已经尝试了很多方法，但不知道如何使用查询生成器针对这种特殊方法进行查询

谢谢

# css - 容器中具有相同宽度的多个div

> ID：15130679
> 
> 赞同：-1
> 
> 时间：2013-02-28T08:21:58.027
> 
> 标签：css

我正在尝试将具有相同宽度的多个 div 放置在同一行的容器中，如下所示

```
 ++++++++++++++++++++++++++++++
    + ++++++++ ++++++++ ++++++++ +
    + +      + +      + +      + +
    + + box1 + + box2 + + box3 + +
    + +      + +      + +      + +
    + ++++++++ ++++++++ ++++++++ +
    ++++++++++++++++++++++++++++++ 
```

容器宽度：100%；我成功地将 3 个 div 放在同一行。向左飘浮; 显示：内联块；但我无法为多个 div 修复相同的宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:24:24.907

你可以使用：

```
.inner-boxes {
  float: left;
  width: 30%;
  margin: 0 1.5%;
} 
```

使每个盒子的宽度为容器宽度的三分之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:39:13.630

尝试将 div 包装在另一个 div 中。

代码：

```
 div { border: 2px solid red; } 
     div.wrapper { 
     border: 2px solid blue;
     display: inline-block; 
```

}

html代码：

```
 <div class="wrap">
    <div class="wrap">
    <div style="width: 100px; height: 83px;">This is good</div>
    </div>
    </div> 
```

参考： [如何制作一个div来包装两个浮动div？](https://stackoverflow.com/questions/1844207/how-to-make-a-div-to-wrap-two-float-divs-inside),

[div 中的 CSS 自动换行](https://stackoverflow.com/questions/502500/css-word-wrapping-in-div)，

[如何包装这样的div？](https://stackoverflow.com/questions/4879379/how-to-wrap-divs-like-this)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-12T07:18:48.300

使用显示表属性

```
.tbl {
  display: table;
  width: 100%;
}

.tbl .row {
  display: table-row;
}

.tbl .row div {
  display: table-cell;
  background-color: pink;
}
```

```
<div class="tbl">
  <div class="row">
    <div>TEST</div>
    <div>TEST</div>
    <div>TEST</div>
  </div>
</div>
```

# asp.net - 无法让 sourcemap 工作

> ID：15130683
> 
> 赞同：3
> 
> 时间：2013-02-28T08:22:07.697
> 
> 标签：asp.net, google-chrome, web, dotless

我正在尝试让我的源映射实现与 dotless 一起使用。

我已经提取了[dotless](http://www.dotlesscss.org/)并添加了 sourcemap [(1)](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/) [(2)](https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit)生成。问题是即使我提供了我的css文件和相应的

*   `SourceMap`: `Main.less.map`HTTP-Header 和
*   `X-SourceMap`: `Main.less.map`HTTP-Header 并在我的 css 文件末尾添加注释
*   `/*@ sourceMappingUrl=Main.less.map */`和
*   `/*@ sourceURL=Main.less.map */`
*   铬金丝雀（版本 27.0.1424.0）

铬根本不在乎。不用说，我`"Enable source maps"`在控制台设置中启用了 -swtich。所有文件的内容类型似乎也很好。（仔细检查） - 对于源地图位置，我已经尝试了完整的 url 以及地址的相对符号 - 但似乎没有任何效果......

Chrome 甚至不会从服务器请求地图文件。有任何想法吗？我错过了什么？

干杯，科莱戈特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:10:47.807

目前 Chrome 中的 CSS 源映射仅支持 Sass，不支持 LESS。甚至这种支持也支持“开发人员工具实验”标志：（有关更多信息，请参阅[Addi Osmani](https://plus.google.com/+AddyOsmani/posts/5qxt7Bu3Eay)关于该主题的帖子）。

Mozilla 团队也在为 Sass、LESS 和 Stylus 开发 CSS Source maps，尽管我不知道该项目的活跃程度。您可以在此处跟踪他们的进度： [https ://wiki.mozilla.org/DevTools/Features/CSSSourceMap](https://wiki.mozilla.org/DevTools/Features/CSSSourceMap)

# c++ - Visual Studio 2008 x64 下的 libpqxx

> ID：15130686
> 
> 赞同：0
> 
> 时间：2013-02-28T08:22:18.963
> 
> 标签：c++, visual-studio-2008, 64-bit, libpqxx

这里有人在 Visual Studio 2008 x64 下构建 libpqxx 吗？我已经建立了它。使用 libpqxx_staticD.lib 调试工作正常，但使用 libpqxx_static.lib 发布失败

pqxx::connection conn(...);

调用堆栈：

```
postgres.exe!std::_Tree<std::_Tmap_traits<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,pqxx::notification_receiver *,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,pqxx::notification_receiver *> >,1> >::_Init()  + 0x60 bytes 
postgres.exe!std::_Tree<std::_Tmap_traits<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,pqxx::notification_receiver *,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,pqxx::notification_receiver *> >,1> >::_Tree<std::_Tmap_traits<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,pqxx::notification_receiver *,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,pqxx::notification_receiver *> >,1> >()  + 0x6c bytes    
postgres.exe!std::multimap<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,pqxx::notification_receiver *,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,pqxx::notification_receiver *> > >::multimap<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,pqxx::notification_receiver *,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,pqxx::notification_receiver *> > >()  + 0x3f bytes    
postgres.exe!pqxx::connection_base::connection_base()  + 0x83 bytes 
postgres.exe!pqxx::basic_connection<pqxx::connect_direct>::basic_connection<pqxx::connect_direct>(const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & opt="host=localhost user=tka4 password=sga19791988 dbname=sfMakseq")  Line 65 + 0x2d bytes   C++
postgres.exe!main(int argc=5, char * * argv=0x00000000003470b0)  Line 36 + 0x40 bytes   C++
postgres.exe!__tmainCRTStartup()  Line 586 + 0x19 bytes 
```

错误信息：

“postgres.exe 中 0x000000013f0612e0 处未处理的异常：0xC0000005：访问冲突写入位置 0x0000000077225418。”

可能你知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:46:37.257

所以，首先我使用 /machine:x64 而不是 /machine:I386。这是我的错误。它应该是 /machine:amd64 和“vcvarsall.bat amd64”。

# ios - iOS 6.1 中谁的视图不在窗口层次结构中

> ID：15130688
> 
> 赞同：0
> 
> 时间：2013-02-28T08:22:24.657
> 
> 标签：ios, objective-c, ios6

收到此错误。

> 2013-02-28 16:19:49.628 VLC[1416:907] 警告：尝试显示不在窗口层次结构中的视图！

这是我的代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    // This will mark crashy files
    [[MLMediaLibrary sharedMediaLibrary] applicationWillStart];

    [_window addSubview:self.navigationController.view];
    [_window setRootViewController:self.navigationController];
    [_window makeKeyAndVisible];

    NSURL * urlToOpen = [launchOptions objectForKey:UIApplicationLaunchOptionsURLKey];
    urlToOpen = [NSURL URLWithString:@"rtsp://192.168.4.123"];

    if (urlToOpen != nil) {
        // We were started to open a given URL
        MVLCMovieViewController * movieViewController = [[MVLCMovieViewController alloc] init];
        movieViewController.url = urlToOpen;

        [self.navigationController presentViewController:movieViewController animated:YES completion:NULL];
        [movieViewController release];
    }

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:30:34.290

在添加`navigationController`到.`UIViewController``window`

试试看：

```
YourViewController *object_yvc = [[YourViewController alloc] initWithNibName:@"YourViewController"
                                                                            bundle:[NSBundle mainBundle]];
UINavigationController *navObject_vc = [[UINavigationController alloc] initWithRootViewController:object_yvc]; 
```

# c++ - 通过 Mat::at 获取一个像素

> ID：15130692
> 
> 赞同：4
> 
> 时间：2013-02-28T08:22:29.730
> 
> 标签：c++, opencv

我正在尝试从 Mat 对象中获取像素。为了测试，我尝试在正方形上画一条对角线，并期望得到一条从左上角到右下角的完美线。

```
for (int i =0; i<500; i++){
     //I just hard-coded the width (or height) to make the problem more obvious

  (image2.at<int>(i, i)) = 0xffffff;
     //Draw a white dot at pixels that have equal x and y position.
} 
```

然而，结果并不像预期的那样。这是在彩色图片上绘制的对角线。 ![在此处输入图像描述](../Images/50f13fa682e5afe8d6c721760455cc02.png) 这是一张灰度图片。 ![在此处输入图像描述](../Images/b8f22eae01a62422393e9d759f4c976b.png) 有人看到问题了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T08:34:25.420

问题是您试图将每个像素作为 int （每像素图像 32 位）访问，而您的图像是 3 通道无符号字符（每像素图像 24 位）或 1 通道无符号字符（每像素 8 位）图像）为灰度之一。您可以尝试像这样访问每个像素以获得灰度像素

```
for (int i =0; i<image2.width; i++){
  image2.at<unsigned char>(i, i) = 255;
} 
```

或者像这样的颜色

```
for (int i =0; i<image2.width; i++){     
      image2.at<Vec3b>(i, i)[0] = 255;
      image2.at<Vec3b>(i, i)[1] = 255;
      image2.at<Vec3b>(i, i)[2] = 255;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T08:29:25.273

```
(image2.at<int>(i, i)) = 0xffffff; 
```

看起来您的彩色图像是 24 位的，但您的 int 寻址像素似乎是 32 位。

# perl - perl 101，通过在数组变量上使用 $ 来获取数组的长度

> ID：15130695
> 
> 赞同：4
> 
> 时间：2013-02-28T08:22:35.637
> 
> 标签：perl

我期待这能给出数组的长度。因为我认为`$mo`隐含的标量上下文。

但相反，我得到了错误：

`Global symbol "$mo" requires explicit package name at ./a.pl line 7.`

```
#! /usr/bin/perl
use strict;
use warnings;

my @mo = (3,4,5);
print( $mo); 
```

更新:: 我认为 mo 是变量， $mo 上的符号 $ 使用标量上下文。我的问题更多是关于印记，然后是实际长度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T08:29:03.377

为了得到正在`@mo`使用的元素的数量**`scalar @mo`**。

```
my $num_elements = scalar @mo; 
```

`scalar`当上下文要求它必须是标量时，您可以省略，例如在比较中：

```
if ($count < @mo) { print "$count is less than the number of elements" } 
```

您也可以使用**`$#mo`**，它是*最后一个元素的索引*（通常比元素数小一）。

```
my $last_index = $#mo; 
```

当您遍历数组并需要数组索引时，这很有用：

```
for (0..$#mo)
{
   print "Index $_ is $mo[$_]\n";
} 
```

**`$mo`** 获取数组元素时使用的形式：

```
my $second_element = $mo[1]; 
```

**`$mo`**仅其本身就是一个完全独立的变量（尽管您可能不应该创建这样的变量，因为它会令人困惑）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T08:27:30.957

您正在尝试打印一个`$mo`不存在的标量变量。您需要在标量上下文中使用数组名称：

```
my @mo = (3,4,5);
print scalar @mo; 
```

另一种方法是使用`$#mo`which 将返回数组中的最大索引，在您的情况下为 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T09:23:56.873

你可能会得到一个数组的长度

1.  > 我的 $mo = @mo;
    > 打印 $mo;

2.  > 我的 $mo = 标量 (@mo);
    > 打印 $mo;

3.  > 我的 $mo = $#mo + 1;
    > 打印 $mo;

# backbone.js - 如何停止在主干中获取集合

> ID：15130697
> 
> 赞同：1
> 
> 时间：2013-02-28T08:22:40.163
> 
> 标签：backbone.js

磁盘是我的收藏对象。我需要停止获取集合

```
customPoll: function(time){
          var set_time = 0;
            if(time === undefined){
                set_time = 4000;
            }
            var route = Backbone.history.fragment.split('/');
            var self = this;
            if(route[0] === "disks"){
                setTimeout(function() {
                    Disks.fetch({update:true,success: function(){
                        self.customPoll();
                    }, error: function(){
                        self.customPoll();
                    }
                    });
                }, set_time); //TODO Need to handle efficiently...
            }  
        } 
```

如果存在某些条件，我试图每 4 秒调用一次此提取，否则我需要停止调用此提取。

```
 var route = Backbone.history.fragment.split('/');
            var smart = new Smart.model({
                "id"    : route[1]
            });
            var self = this;
    smart.save(null,{
                    success: function(model,event,response){
                        model =  Disks.get(route[1]).toJSON();
                        $('#smart-confirm-dialog').modal('hide'); 
                        self.showStatusMsg(1,"<b> S.M.A.R.T. Test : </b>S.M.A.R.T Test started succesfully");
                        if(model.smart.progress === "100%"){
                            self.clearAllTimeout();
                            alert("please stop fetching....pleaseeee");
                            // Stop polling here . then fetch information from smart.fetch api.
                           Smart.fetch({update: true}); //this is another api i need to call this api now.
                        }else{
                            self.customPoll();
                        }
}); 
```

但它似乎不起作用......它继续获取集合..我怎样才能停止这个磁盘集合获取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:03:42.943

我的回答可能很有趣，我想添加评论，但我不能。您可以在模型中添加新字段吗？

```
customPoll: function(time){
   var  disks = this.model.toJSON();
   if(disks.yourField){
       // here your code
   }
} 
```

但在保存模型之前需要做 `delete disks.yourField;`

# ruby-on-rails - 基于条件的Rails将模型分配给变量

> ID：15130698
> 
> 赞同：0
> 
> 时间：2013-02-28T08:22:42.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有以下方法：

```
def self.get_rec(product, type)
  if type == "A"
    db = Pwvav
  elsif type == "B"
    db = Pwbab
  elsif type == "C"
    db = Pwvub
  else type == "D"
    db = Tic
    db.find_by_id(product.id).recommendation.split(",").each do |rec|
      r = Recommendation.find_by_id(rec)
      pr = Model.new(:rating_set => rating_set.id, :recommendation_id => r.id, :product_id => product.id)
      pr.save
    end
  end
end 
```

当我运行该方法时，`db.find` 它没有按我预期的那样工作。如果替换`db.find_by_id(product.id).recommendation.split(",").each do |rec|`为`Pwvav.find_by_id(product.id).recommendation.split(",").each do |rec|`例如，它可以工作。如何根据`type`等号选择要调用的模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:30:59.977

如果我是对的，您的错误在于您的结构。该`find_by_id`代码在 else 中，因此当类型不是“D”时它不会创建其他记录。尝试以下我认为更具可读性的代码

```
def self.get_rec(product, type)
  db = case type
       when 'A' then Pwvav
       when 'B' then Pwbab
       when 'C' then Pwvub
       when 'D' then Tic
       end

  db.find_by_id(product.id).recommendation.split(",").each do |rec|
    r = Recommendation.find_by_id(rec)
    pr = Model.new(rating_set: rating_set.id, recommendation_id: r.id, product_id => product.id)
    pr.save
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:31:03.627

你还没有关闭你的“if - elsif - else 条件，那么最后一个带有 find 的块，find_by_id 和你的 new 仅在 type == 'D' 时执行。

在后面插入一个结尾

```
db = Tic 
```

# node.js - 无需在 nodejs express 中预加载模块即可组织路由

> ID：15130700
> 
> 赞同：3
> 
> 时间：2013-02-28T08:22:51.997
> 
> 标签：node.js, express

目前 Express 框架中的路由需要先加载模块。但这在有数百个模块的现实生活场景中效率不高。我只想加载需要的模块。有没有一种方法可以在不预加载模块的情况下定义到目标模块的路由。

像这样的东西

app.get('user/showall', 'user.list');

因此，我希望仅在该特定请求需要加载用户模块时才加载它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:53:56.083

我宁愿以快速请求处理的缓慢启动，也不愿以缓慢的请求处理快速启动，因为模块必须在运行时加载。

但如果你真的想要，你可以创建一个中间件来实现这种行为（**完全未经测试**）：

```
 var lazyload = function(route) {

   var s = route.split('.');
   var mod = s[0];
   var exp = s[1];

   return function(req, res, next) {
     require(mod)[exp](req, res);
   };
 };
 ...
 app.get('user/showall', lazyload('user.list')); 
```

（这假设路由总是命名为`MODULENAME.EXPORTEDNAME`）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T09:11:11.413

我赞同@robertklep 所说的“我宁愿以快速请求处理的速度启动慢速启动，也不愿以缓慢的请求处理快速启动”。

但是我强烈建议不要使用 a`require`来处理请求，因为第一次调用是同步的，并且会阻塞服务器，这不仅会影响当前请求，还会阻止处理任何其他请求。有了足够多的此类请求，您的服务器将停止响应请求。

基本上：预加载您需要的所有代码，但延迟加载数据（以异步方式）。

（这不是您所要求的，但这将被视为不好的做法）。

# macos - 在批量 sqlite 命令行导入中捕获错误

> ID：15130702
> 
> 赞同：0
> 
> 时间：2013-02-28T08:23:06.607
> 
> 标签：macos, bash, error-handling, sqlite

我尝试使用以下命令通过终端（OSX ML）创建数据并将其导入到 sqlite 文件：

```
sqlite3 test.sqlite < /importsql.sql 
```

这工作正常，但是当 importsql.sql 出现错误时，如何捕获错误并停止脚本？

现在错误将被打印为输出，但我没有找到捕捉错误的方法......

这可能吗？

问候，马修

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:30:34.937

捕获输出是第一部分：

```
sqlite3 test.sqlite < /importsql.sql 1>importsql.log 2>importsql.errors 
```

Where`1>`重定向标准输出并`2>`重定向通常会出现标准错误的任何内容。

停止脚本应该很简单：

```
sqlite3 test.sqlite < /importsql.sql 1>importsql.log 2>importsql.errors || exit $? 
```

之后的任何内容只有在调用失败`||`时才会执行。是 的退出代码。`sqlite3``$?``sqlite3`

如果您想在脚本中包含更多报告，您可能会发现[此答案](https://stackoverflow.com/a/15078816/78845)很有帮助。

# in-app-purchase - 应用程序购买窗口商店中的消耗品

> ID：15130704
> 
> 赞同：1
> 
> 时间：2013-02-28T08:23:21.370
> 
> 标签：in-app-purchase, windows-store-apps

我希望用户想买多少次就买多少次。例如金币、奖励积分等。是否可以指定 LicenseDuration="0"，以便用户购买后，积分会立即添加到用户帐户中，并且可以再次购买产品。我正在按照以下方式进行操作，它在模拟器模式下运行良好：

```
<Product ProductId="sp75" LicenseDuration="0">
            <MarketData xml:lang="en-us">
                <Name>ServerPoints75</Name>
                <Price>1.99</Price>
                <CurrencySymbol>$</CurrencySymbol>
                <CurrencyCode>USD</CurrencyCode>
            </MarketData>        
</Product> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:33:33.370

You are limited in the number of in-app purchases, so that's not even a viable workaround if you were considering it : )

Check out the PayPal API for consumables, subscriptions, etc. There's a specific Win8 wrapper on github for it:

[http://paypal.github.com/Windows8SDK/](http://paypal.github.com/Windows8SDK/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:23:39.083

目前内置的应用内购买支持不支持消耗品。

您可以通过 3rd 方商务提供商完成您想要的。可能值得在 Bing 上搜索一些主要的支付提供商。

希望有帮助。

有关 Windows 应用商店应用开发的更多信息，请注册[Generation App](http://bit.ly/gd30tolaunch)。

# google-maps - 地图上未显示的地图图像

> ID：15130706
> 
> 赞同：0
> 
> 时间：2013-02-28T08:23:31.130
> 
> 标签：google-maps, google-maps-api-3

我正在使用谷歌地图 api v3。它工作正常，但地图图像不起作用你能告诉实际问题是什么。我第一次使用谷歌地图API，所以请帮助提前谢谢-[演示](http://jsfiddle.net/2crQ7/17/)

我使用的代码---

```
<style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map { height: 80%;width:80% }
    </style>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false">
    </script>
    <script type="text/javascript">
    var map;
    var locations = [
  [' 1', 33.1890542, 151.274856, 'http://localhost/liveMap/app/webroot/favicon.ico'],
  [' 2', 33.0923036, 151.259052, 'http://localhost/liveMap/app/webroot/img/cake.icon.png'],
  [' 3', 34.9028249, 151.157507, 'http://localhost/liveMap/app/webroot/img/test-error-icon.png'],
  [' 4', 33.480010128657071, 151.28747820854187, 'http://localhost/liveMap/app/webroot/img/test-fail-icon.png'],
  [' 5', 33.950198, 151.259302, 'http://localhost/liveMap/app/webroot/img/test-pass-icon.png']];
  function initialize() {
    var myOptions = {
      center: new google.maps.LatLng(33.890542,151.274856),
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map"),myOptions);
    setMarkers(map,locations)
  }
  function setMarkers(map,locations){
      var marker, i
for (i = 0; i < locations.length; i++)
 {  
 var loan = locations[i][0]
 var lat = locations[i][1]
 var long = locations[i][2]
 var add =  locations[i][3]

 latlngset = new google.maps.LatLng(lat, long);

  var marker = new google.maps.Marker({  
          map: map, title: loan , position: latlngset ,icon : add ,draggable:true,
        });
        map.setCenter(marker.getPosition())

        var content = "Number: " + loan +  '</h3>'     

  var infowindow = new google.maps.InfoWindow()

google.maps.event.addListener(marker,'click', (function(marker,content,infowindow){ 
        return function() {
           infowindow.setContent(content);
           infowindow.open(map,marker);
        };
    })(marker,content,infowindow)); 

  }
  }
</script>
<body>
<div><a href="javascript:void(0)" onclick="return initialize()">Click Me</a></div>
<div id="map"></div> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:54:29.077

如果您尝试在浏览器窗口中查看图像，它会显示吗？

```
http://localhost/liveMap/app/webroot/img/cake.icon.png 
```

因为您使用的是本地主机地址，所以我们无法分辨。

# wpf - 在 WPF 中模拟拖放事件

> ID：15130712
> 
> 赞同：3
> 
> 时间：2013-02-28T08:23:40.163
> 
> 标签：wpf, drag-and-drop

我想在 WPF 中模拟拖放事件。
为此，我需要访问存储在“拖放缓冲区”中的数据，还需要创建一个`DragEventArgs`. 我注意到它`DragEventArgs`是密封的，没有公共 ctor。

所以我的问题是：
1.我怎样才能创建一个实例`DragEventArgs`？
2\. 如何访问拖放缓冲区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:30:40.863

我最近这样做！我用 MouseDown、MouseMove 和 MouseUp 事件模拟了拖放。例如对于我的应用程序，我有一些想要拖放的画布。每个画布都有一个 ID。在 MouseDown 事件中，我缓冲它的 id 并在 MouseMove 和 MouseUp 事件中使用它。Desktop_Canvas 是我的主要画布，其中包含一些画布。这些画布在我的字典（dic）中。

这是我的代码：

```
private Dictionary<int, Win> dic = new Dictionary<int, Win>();
    private Point downPoint_Drag = new Point(-1, -1);
    private int id_Drag = -1;
    private bool flag_Drag = false;

    public class Win
    {
        public Canvas canvas = new Canvas();
        public Point downpoint = new Point();

        public Win()
        {
            canvas.Background = new SolidColorBrush(Colors.Gray);
        }
    }

    private void Desktop_Canvas_MouseMove(object sender, MouseEventArgs e)
    {
        try
        {
            Point movePoint = e.GetPosition(Desktop_Canvas);

                    if (flag_Drag && downPoint_Drag != new Point(-1, -1))
                    {
                        double dy1 = movePoint.Y - downPoint_Drag.Y, x = -1, dx1 = movePoint.X - downPoint_Drag.X, y = -1;
                        downPoint_Drag = movePoint;
                        if (x == -1)
                            x = Canvas.GetLeft(dic[id_Drag].canvas) + dx1;
                        if (y == -1)
                            y = Canvas.GetTop(dic[id_Drag].canvas) + dy1;
                        Canvas.SetLeft(dic[id_Drag].canvas, x);
                        Canvas.SetTop(dic[id_Drag].canvas, y);
                    }
        }
        catch
        {
            MouseEventArgs ee = new MouseEventArgs((MouseDevice)e.Device, 10);
            Desktop_Canvas_MouseLeave(null, ee);
        }
    }

    private void Desktop_Canvas_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        try
        {
  downPoint_Drag  = new Point(-1, -1);
            id_Drag =-1;
            flag_Drag = false;
        }
        catch
        {
            MouseEventArgs ee = new MouseEventArgs((MouseDevice)e.Device, 10);
            Desktop_Canvas_MouseLeave(null, ee);
        }
    }

    private void Desktop_Canvas_MouseLeave(object sender, MouseEventArgs e)
    {
        MouseButtonEventArgs ee = new MouseButtonEventArgs((MouseDevice)e.Device, 10, MouseButton.Left);
            Desktop_Canvas_MouseLeftButtonUp(null, ee);
    }

    void canvas_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {            
        downPoint_Drag = e.GetPosition(Desktop_Canvas);
        int hoverId = HoverWin(downPoint_Drag);
        flag_Drag = true;
        id_Drag = hoverId;
        dic[id_Drag].downpoint = new Point(downPoint_Drag.X, downPoint_Drag.Y);
    }

    private int HoverWin(Point p)
    {
        foreach (int i in dic.Keys)
        {
                if (dic[i].canvas.IsMouseOver)
                    return i;
        }
        return -1;
    } 
```

# android - 带有 viewpager 的 Google Adview NullPointerException

> ID：15130713
> 
> 赞同：1
> 
> 时间：2013-02-28T08:23:48.820
> 
> 标签：android, admob, adview

我正在尝试在我的一些页面中添加 AdView `viewpager`。我正在使用`ActionbarSherlock`，每个页面都是一个片段。我正在使用我的适配器动态添加 adview。它显示广告很好，但是一旦我点击它，我就会得到`nullpointerexception`。

有没有人遇到过类似的问题？

```
02-28 08:13:55.533: E/AndroidRuntime(31181): FATAL EXCEPTION: main
02-28 08:13:55.533: E/AndroidRuntime(31181): java.lang.NullPointerException
02-28 08:13:55.533: E/AndroidRuntime(31181):    at com.google.ads.util.h.a(SourceFile:52)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at com.google.ads.internal.AdWebView.canScrollHorizontally(SourceFile:398)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.support.v4.view.ViewCompatICS.canScrollHorizontally(ViewCompatICS.java:30)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.support.v4.view.ViewCompat$ICSViewCompatImpl.canScrollHorizontally(ViewCompat.java:237)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.support.v4.view.ViewCompat.canScrollHorizontally(ViewCompat.java:347)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.support.v4.view.ViewPager.canScroll(ViewPager.java:2377)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.support.v4.view.ViewPager.canScroll(ViewPager.java:2368)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.support.v4.view.ViewPager.canScroll(ViewPager.java:2368)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.support.v4.view.ViewPager.canScroll(ViewPager.java:2368)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.support.v4.view.ViewPager.canScroll(ViewPager.java:2368)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.support.v4.view.ViewPager.canScroll(ViewPager.java:2368)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.support.v4.view.ViewPager.canScroll(ViewPager.java:2368)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.support.v4.view.ViewPager.canScroll(ViewPager.java:2368)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.support.v4.view.ViewPager.onInterceptTouchEvent(ViewPager.java:1775)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1817)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1953)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1405)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.app.Activity.dispatchTouchEvent(Activity.java:2410)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1901)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.View.dispatchPointerEvent(View.java:7426)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3220)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3165)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4292)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4271)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4363)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:179)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.InputEventReceiver.nativeConsumeBatchedInputEvents(Native Method)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.InputEventReceiver.consumeBatchedInputEvents(InputEventReceiver.java:171)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewRootImpl.doConsumeBatchedInput(ViewRootImpl.java:4342)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.ViewRootImpl$ConsumeBatchedInputRunnable.run(ViewRootImpl.java:4382)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.Choreographer.doFrame(Choreographer.java:530)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.os.Handler.handleCallback(Handler.java:725)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.os.Looper.loop(Looper.java:137)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at android.app.ActivityThread.main(ActivityThread.java:5041)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at java.lang.reflect.Method.invokeNative(Native Method)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at java.lang.reflect.Method.invoke(Method.java:511)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-28 08:13:55.533: E/AndroidRuntime(31181):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:10:00.797

这是 AdMob SDK v6.3.0 中的一个错误。AdMob 刚刚发布了 v6.3.1，您可以在[下载页面](https://developers.google.com/mobile-ads-sdk/download)上找到它。

# typo3 - 使用 pi_list_browseresults() 在typo3 中浏览页面

> ID：15130714
> 
> 赞同：0
> 
> 时间：2013-02-28T08:23:55.107
> 
> 标签：typo3

我想设置链接数以浏览使用 kickstarter 创建的扩展程序中的结果页面。（第 1 页第 2 页第 3...）。

可以轻松设置最大数量（在本例中为 4）：

```
**$this->internal["maxPages"]=t3lib_div::intInRange($lConf["maxPages"],0,1000,4); ** 
```

但这会一直显示前四个链接，无论我在哪个页面上。所以说我有 7 个结果页面，我已经在第四页：我看到“Page1 Page2 Page3 Page4”。

是否有可能动态改变它。

所以在第 4 页我看到“ Page2 Page3 Page4 Page5”

在第 5 页上，我看到“ Page3 Page4 Page5 Page6”等等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:17:10.777

我认为您正在寻找的是：

```
$this->internal['pagefloat'] 
```

它是这样定义的：

```
Using $this->internal['pagefloat']: this defines were the current page is shown in the 
list of pages in the Pagebrowser. If this var is an integer it will be interpreted as   
position in the list of pages. If its value is the keyword "center" the current page will 
be shown in the middle of the pagelist. 
```

您可以在函数 pi_list_browseresults（类 tslib_pibase）的文档标题中找到更多选项和描述：第 425 行，[http ://doxygen.frozenkiwi.com/typo3/html/de/d1c/class_8tslib__pibase_8php_source.html](http://doxygen.frozenkiwi.com/typo3/html/de/d1c/class_8tslib__pibase_8php_source.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T05:10:20.490

检查此链接：[http](http://www.typo3forum.net/forum/extension-modifizieren-neu-erstellen/55721-fe-userlisting.html) ://www.typo3forum.net/forum/extension-modifizieren-neu-erstellen/55721-fe-userlisting.html 。用户给出了他成功实现分页的代码，例如：

…………

```
 $this->internal['results_at_a_time'] = t3lib_utility_Math::forceIntegerInRange($lConf['results_at_a_time'], 0, 1000, 3); // Number of results to show in a listing.
 $this->internal['maxPages'] = t3lib_utility_Math::forceIntegerInRange($lConf['maxPages'], 0, 1000, 2); // The maximum number of "pages" in the browse-box: "Page 1", 'Page 2', etc. 
```

............

# java - 缺少依赖项的模拟类

> ID：15130715
> 
> 赞同：3
> 
> 时间：2013-02-28T08:23:55.850
> 
> 标签：java, mocking

我有要模拟的第三方组件，但它返回具有复杂层次结构的类，并且某些接口具有静态字段，这些字段由 API 中不可用的某些类初始化。我不需要隐藏类的任何东西。

示例：假设我们要模拟实现 Combo 的类 MutableCombo。但是接口 Combo 具有由 Breaker 初始化的字段。Breaker 是实现包的一部分，开发人员在编译和测试期间无法访问。

```
public interface Combo{
    String FUU = Breaker.getFoo();
    String BAR = Breaker.getBar();
}
public class MutableCombo implements Combo; 
```

我想测试我的类，它使用 MutableCombo 但不能模拟它，因为

```
java.lang.NoClassDefFoundError: Breaker
    at Combo.<clinit>(Combo.java:36)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:38:19.890

你需要一个适配器在这里。首先，您不应该嘲笑您不拥有的类型。视为`MutableCombo`实现细节。例如：

```
public class ExampleMutableCombo implements IExampleMutableCombo
{
     public String DoFoo()
     {
         return Breaker.getFoo();
     }

     public String DoBar()
     {
         return Breaker.getBar();
     }
} 
```

让您的代码使用`IExampleMutableCombo`. 这个界面现在是你的了。在您的生产代码中使用它。当你拥有这个接口时，你可以模拟这个角色——你可以引入一个假的组合进行测试，例如：

```
public class FakeExampleMutableCombo implements IExampleMutableCombo
{
     public String DoFoo()
     {
         return "Foo";
     }

     public String DoBar()
     {
         return "Bar";
     }
} 
```

现在您的所有测试都可以使用 stubbed 类，而您的生产代码可以使用`ExampleMutableCombo`. 关键是“编码到接口”，而不是类型。

# java - 如何知道 Web 请求中提供的文件

> ID：15130722
> 
> 赞同：0
> 
> 时间：2013-02-28T08:24:16.340
> 
> 标签：java, tomcat, webserver

我的问题很清楚，在没有文件名的 Web 服务器请求中

```
http://whatever.com/path_1/path_b/ 
```

当使用带有默认可能页面（deafult.html、index.html 等）的“welcome-file-list”（在 Tomcat 应用程序的 web.xml 中）获得 Web 服务器响应时。
有没有办法通过网络服务器知道确切的文件或文件名是服务器？

我需要在过滤器中检查文件，但在请求和/或响应对象中似乎不可用

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:42:18.540

好吧，我已经尝试过这个解决方案，但我不知道它是否太多“资源消耗”。

在我的 servlet 过滤器中，检查第一个现有文件的欢迎文件列表。

```
String fullURL = httpRequest.getRequestURL().toString();
String realPath = this.servletContext.getRealPath(filePath);

// if path is not a filename
if (fullURL.endsWith("/")){
    // welcome file list
    for (String wf : (String[])servletContext.getAttribute("org.apache.catalina.WELCOME_FILES")) {
        // first encountered - first used
        if ((new File(realPath+"\\"+wf)).exists()) {
            // el primero que exista será el utilizado
            fullURL += wf;
            realPath += "\\"+wf;
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:37:15.500

不，你不能。将文件的物理细节及其访问隐藏在 Web 服务器后面的目的是提供对服务器资源的简化和安全的访问。

# php - CI 与不同服务器的多个数据库连接

> ID：15130729
> 
> 赞同：0
> 
> 时间：2013-02-28T08:24:50.827
> 
> 标签：php, codeigniter, phpmyadmin

我有一个应用程序需要连接到 2 个不同的数据库和不同的服务器。除了在 database.php 中进行之外，我还需要做其他设置吗？我在我的代码中写了这个来连接到两个数据库：

```
$provinsi_db = $this->load->database('provinsi', true); //this is from another server
$local = $this->load->database('default', true); //this one is in my localhost 
```

但是当我尝试从服务器数据库中选择数据时，什么都没有发生..从本地数据库中选择数据没有问题..任何人都可以帮助我吗？

这是我的database.php：

```
$active_group = 'default';
$active_record = TRUE;

$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'username_local';
$db['default']['password'] = 'password_local';
$db['default']['database'] = 'db_local';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE;

$db['provinsi']['hostname'] = 'xxx.xxx.xxx.xxx';
$db['provinsi']['username'] = 'username_foreign';
$db['provinsi']['password'] = 'password_foreign';
$db['provinsi']['database'] = 'db_foreign';
$db['provinsi']['dbdriver'] = 'mysql';
$db['provinsi']['dbprefix'] = '';
$db['provinsi']['pconnect'] = TRUE;
$db['provinsi']['db_debug'] = TRUE;
$db['provinsi']['cache_on'] = FALSE;
$db['provinsi']['cachedir'] = '';
$db['provinsi']['char_set'] = 'utf8';
$db['provinsi']['dbcollat'] = 'utf8_general_ci';
$db['provinsi']['swap_pre'] = '';
$db['provinsi']['autoinit'] = TRUE;
$db['provinsi']['stricton'] = FALSE; 
```

我必须在服务器的“主机名”中包含端口吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:38:41.857

我的整个数据库设置示例

// 我的数据库.php

```
/* API Database Connection */

$active_group = 'apidb';
$active_record = TRUE;

$db['apidb']['hostname'] = 'localhost';
$db['apidb']['username'] = 'user_name';
$db['apidb']['password'] = 'pass_word';
$db['apidb']['database'] = 'db_name';
$db['apidb']['dbdriver'] = 'mysql';
$db['apidb']['dbprefix'] = '';
$db['apidb']['pconnect'] = FALSE;
$db['apidb']['db_debug'] = TRUE;
$db['apidb']['cache_on'] = FALSE;
$db['apidb']['cachedir'] = '';
$db['apidb']['char_set'] = 'utf8';
$db['apidb']['dbcollat'] = 'utf8_general_ci';
$db['apidb']['swap_pre'] = '';
$db['apidb']['autoinit'] = TRUE;
$db['apidb']['stricton'] = FALSE;

/* Site Database Connection */

$active_group = 'sitedb';
$active_record = TRUE;

$db['sitedb']['hostname'] = 'localhost';
$db['sitedb']['username'] = 'user_name';
$db['sitedb']['password'] = 'pass_word';
$db['sitedb']['database'] = 'db_name';
$db['sitedb']['dbdriver'] = 'mysql';
$db['sitedb']['dbprefix'] = '';
$db['sitedb']['pconnect'] = FALSE;
$db['sitedb']['db_debug'] = TRUE;
$db['sitedb']['cache_on'] = FALSE;
$db['sitedb']['cachedir'] = '';
$db['sitedb']['char_set'] = 'utf8';
$db['sitedb']['dbcollat'] = 'utf8_general_ci';
$db['sitedb']['swap_pre'] = '';
$db['sitedb']['autoinit'] = TRUE;
$db['sitedb']['stricton'] = FALSE; 
```

在控制器中，加载数据库

```
$this->sitedb = $this->load->database('sitedb', TRUE);
$this->apidb = $this->load->database('apidb', TRUE); 
```

在模型中，您可以调用

```
$this->apidb->query('your query'); 
```

或者

```
$this->sitedb->query('your query'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:40:26.833

尝试在您的配置 database.php 中更改它

```
$db['provinsi']['pconnect'] = FALSE;

$db['default']['pconnect'] = FALSE; 
```

# css - 有意的边框或填充在中途重叠以实现响应式平铺视图

> ID：15130732
> 
> 赞同：0
> 
> 时间：2013-02-28T08:25:10.880
> 
> 标签：css, responsive-design, media-queries

我正在使用响应式布局，其中容器具有任意数量的“图块”，这些“图块”会根据使用媒体查询的屏幕大小自动调整其基于百分比的宽度。

每个图块都有一个 10 像素的边框，我正在寻找一种可靠的方法来确保始终有 10 像素的边框。如果我将边框设置为 10 像素，那么相邻的图块之间最终会有 20 像素。如果我看到它到 5px，边缘图块最终的边框比其他部分更薄，等等。

有什么好方法可以设置瓷砖的样式以使边框重叠一半，而不必使用javascript不断调整边缘瓷砖？

注意：我使用了一种`width: %`用于瓷砖宽度和`padding-bottom: %`高度的技术。这是一种有效的技术，因为填充底部是基于宽度的。如果您看到相同的值，它将是完美的正方形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:04:05.547

答案如下：

```
ul#container{
     border: 5px solid white; /*Half border*/
}

ul#container li.tile {
     outline: 10px solid white;  /*Full border*/
     outline-offset: -5px solid white;  /*Negative Half border*/
} 
```

我发现在我的情况下效果更好的另一种方法（决定使用 isotope.js 响应式磁贴）如下：

```
li.tile {
    border: 10px solid white;
    margin-right: -10px; 
    margin-bottom: -10px;
} 
```

# javascript - 如何使用 Moment.js 从日期中删除时间？

> ID：15130735
> 
> 赞同：329
> 
> 时间：2013-02-28T08:25:31.610
> 
> 标签：javascript, date, momentjs

```
formatCalendarDate = function (dateTime) {
    return moment.utc(dateTime).format('LLL');
}; 
```

它显示：“2013 年 2 月 28 日 09:24”

但我想在最后删除时间。我怎样才能做到这一点？

我正在使用[Moment.js](http://momentjs.com/)。

* * *

## 回答 #1

> 赞同：721
> 
> 时间：2013-10-31T06:03:06.873

很抱歉这么晚才加入，但如果你想*删除*a 的时间部分`moment()`而不是*格式化*它，那么代码是：

```
.startOf('day') 
```

参考： http: [//momentjs.com/docs/#/manipulating/start-of/](http://momentjs.com/docs/#/manipulating/start-of/)

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2016-04-30T00:52:52.027

### 采用`format('LL')`

取决于你试图用它做什么，`format('LL')`可以做到这一点。它产生这样的东西：

```
Moment().format('LL'); // => April 29, 2016 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2017-03-01T17:07:17.680

正确的方法是根据您的要求指定输入，这将为您提供更大的灵活性。

本定义包括以下内容

`LTS : 'h:mm:ss A', LT : 'h:mm A', L : 'MM/DD/YYYY', LL : 'MMMM D, YYYY', LLL : 'MMMM D, YYYY h:mm A', LLLL : 'dddd, MMMM D, YYYY h:mm A'`

您可以使用其中任何一种或更改传递给 moment().format() 的输入。例如，对于您的情况，您可以通过`moment.utc(dateTime).format('MMMM D, YYYY')`.

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2019-11-09T02:01:44.710

好的，所以我知道我参加派对要迟到了。就像晚了 6 年，但这是我需要弄清楚并将其格式化为 YYYY-MM-DD 的东西。

```
moment().format(moment.HTML5_FMT.DATE); // 2019-11-08 
```

您还可以传入一个参数，如`2019-11-08T17:44:56.144`.

```
moment("2019-11-08T17:44:56.144").format(moment.HTML5_FMT.DATE); // 2019-11-08 
```

[https://momentjs.com/docs/#/parsing/special-formats/](https://momentjs.com/docs/#/parsing/special-formats/)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-01-04T07:54:26.647

您也可以使用这种格式：

`moment().format('ddd, ll'); // Wed, Jan 4, 2017`

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-02-28T08:31:22.207

```
formatCalendarDate = function (dateTime) {
    return moment.utc(dateTime).format('LL')
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-09-10T16:52:26.257

使用较新版本的 moment.js，您还可以这样做：

```
var dateTime = moment();

var dateValue = moment({
    year: dateTime.year(),
    month: dateTime.month(),
    day: dateTime.date()
}); 
```

请参阅： http: [//momentjs.com/docs/#/parsing/object/](http://momentjs.com/docs/#/parsing/object/)。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2020-12-07T04:29:58.247

看看这些例子。

格式化日期

```
moment().format('MMMM Do YYYY, h:mm:ss a'); // December 7th 2020, 9:58:18 am
moment().format('dddd');                    // Monday
moment().format("MMM Do YY");               // Dec 7th 20
moment().format('YYYY [escaped] YYYY');     // 2020 escaped 2020
moment().format();                          // 2020-12-07T09:58:18+05:30 
```

相对时间

```
moment("20111031", "YYYYMMDD").fromNow(); // 9 years ago
moment("20120620", "YYYYMMDD").fromNow(); // 8 years ago
moment().startOf('day').fromNow();        // 10 hours ago
moment().endOf('day').fromNow();          // in 14 hours
moment().startOf('hour').fromNow();       // an hour ago 
```

日历时间

```
moment().subtract(10, 'days').calendar(); // 11/27/2020
moment().subtract(6, 'days').calendar();  // Last Tuesday at 9:58 AM
moment().subtract(3, 'days').calendar();  // Last Friday at 9:58 AM
moment().subtract(1, 'days').calendar();  // Yesterday at 9:58 AM
moment().calendar();                      // Today at 9:58 AM
moment().add(1, 'days').calendar();       // Tomorrow at 9:58 AM
moment().add(3, 'days').calendar();       // Thursday at 9:58 AM
moment().add(10, 'days').calendar();      // 12/17/2020 
```

多语言环境支持

```
moment.locale();         // en
moment().format('LT');   // 9:58 AM
moment().format('LTS');  // 9:58:18 AM
moment().format('L');    // 12/07/2020
moment().format('l');    // 12/7/2020
moment().format('LL');   // December 7, 2020
moment().format('ll');   // Dec 7, 2020
moment().format('LLL');  // December 7, 2020 9:58 AM
moment().format('lll');  // Dec 7, 2020 9:58 AM
moment().format('LLLL'); // Monday, December 7, 2020 9:58 AM
moment().format('llll'); // Mon, Dec 7, 2020 9:58 AM 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2017-10-16T09:42:15.320

每当我使用该`moment.js`库时，我都会以这种方式指定所需的格式：

```
moment(<your Date goes here>).format("DD-MMM-YYYY") 
```

或者

```
moment(<your Date goes here>).format("DD/MMM/YYYY") 
```

...等我希望你明白

在 format 函数中，放置所需的格式。上面的示例将删除日期中所有不需要的元素，例如分钟和秒

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2018-04-02T21:58:57.063

对于像我这样想要长日期格式（`LLLL`）但没有一天中的时间的人，有一个 GitHub 问题：[https](https://github.com/moment/moment/issues/2505) ://github.com/moment/moment/issues/2505 。目前，有一个解决方法：

```
var localeData = moment.localeData( moment.locale() ),
    llll = localeData.longDateFormat( 'llll' ),
    lll = localeData.longDateFormat( 'lll' ),
    ll = localeData.longDateFormat( 'll' ),
    longDateFormat = llll.replace( lll.replace( ll, '' ), '' );
var formattedDate = myMoment.format(longDateFormat); 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-08-28T22:59:22.067

试试这个：

```
moment.format().split("T")[0] 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-08-23T12:29:18.770

您可以使用此构造函数

```
moment({h:0, m:0, s:0, ms:0}) 
```

[http://momentjs.com/docs/#/parsing/object/](http://momentjs.com/docs/#/parsing/object/)

```
console.log( moment().format('YYYY-MM-DD HH:mm:ss') )

console.log( moment({h:0, m:0, s:0, ms:0}).format('YYYY-MM-DD HH:mm:ss') )
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-05-04T05:12:26.320

我迟到了，但这对我来说很完美：

> moment().format('YYYY-MM-DD')

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2021-07-05T10:15:38.183

```
moment(date).format(DateFormat) 
```

这里 DateFormat 应该是`DateFormat = 'YYYY-MM-DD'`

# android - Android 将 html 嵌入视频 url 提供给浏览器

> ID：15130736
> 
> 赞同：1
> 
> 时间：2013-02-28T08:25:31.953
> 
> 标签：android, html

我从服务器获取以下视频网址

```
<iframe width=\"480\" height=\"270\" src=\"http://staging.snagfilms.com/modules/html5player.jsp?filmId=ed9195a0-a748-11e0-a92a-0026bb61d036&w=500\" frameborder=\"0\" allowfullscreen></iframe> 
```

现在我需要在 Andorid 浏览器中播放 url。我不太擅长 HTML。任何人都可以帮助我如何格式化上述网址并将其提供给浏览器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:21:39.343

我试图做同样的事情，但无法播放视频。我最终使用了一个带有这样图像的链接：

```
<a href="http://www.youtube.com/watch?v=aniukekGDi8"><img src="meet_developers_video_jules.png" width="300" height="168" style="border-style:solid; border-color:#ccc; border-width:1px; margin-top:5px"></a> 
```

# wpf - wpf selfbinding：绑定颜色随着标签文本的变化而变化

> ID：15130737
> 
> 赞同：-1
> 
> 时间：2013-02-28T08:25:34.507
> 
> 标签：wpf, data-binding, vb.net-2010

我现在正在学习 WPF 并创建了一个应用程序。它在视图和代码分离中工作正常。它从网站中提取详细信息。列出产品的所有细节及其规格，并将其全部转储到 Excel 中。到目前为止一切都很好。现在我想为用户提供外观和进度的数据绑定视图。我能够从类中获取值并显示在标签中。我想通过更改标签的颜色来显示每个网页的加载量。这是 XAML

```
<Window x:Class="WebExtractor.AvnetMainClass"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:Avenet_Web_Extractor.WebExtractor"
xmlns:diag="clr-namespace:System.Diagnostics;assembly=WindowsBase"
Title="Avnet Product Details Extractor" 
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" Height="300" Width="538" 
ResizeMode="NoResize">

<Window.Resources>
    <local:ColorConvert x:Key="colorConvert"/>

</Window.Resources> 
```

数据绑定在这里

```
<StackPanel Margin="164,4,4,5" HorizontalAlignment="Stretch" >
                    <Label Name="lbl1PrdFll" BorderBrush="Black" BorderThickness="1" Width="312" Height="27" Margin="0,2,0,0" Background="{Binding RelativeSource={RelativeSource Self}, Path=Caption,Converter={StaticResource colorConvert}}" Content="{Binding Path=prdFrstState, UpdateSourceTrigger=PropertyChanged}" ></Label>
                    <Label Name="lbl2PrdFll" BorderBrush="Black" BorderThickness="1" Width="312" Height="27" Margin="0,2,0,0" Background="{Binding RelativeSource={RelativeSource Self}, Path=Caption,Converter={StaticResource colorConvert}}"  Content="{Binding Path=prdScndState, UpdateSourceTrigger=PropertyChanged}"></Label>
                    <Label Name="lbl3PrdFll" BorderBrush="Black" BorderThickness="1" Width="312" Height="27" Margin="0,2,0,0" Background="{Binding RelativeSource={RelativeSource Self}, Path=Caption,Converter={StaticResource colorConvert}}"  Content="{Binding Path=prdLstState, UpdateSourceTrigger=PropertyChanged}"></Label> 
```

用于颜色更改的 vb.net 代码是：

```
Namespace WebExtractor

<ValueConversion(GetType(String), GetType(SolidColorBrush))> _
Public Class ColorConvert
    Implements IValueConverter
    Public Function Convert(ByVal value As Object, ByVal targetType As Type, ByVal parameter As Object, ByVal culture As CultureInfo) As Object Implements IValueConverter.Convert
        Dim boundWord As String = TryCast(value, String)
        Dim returnBrush As SolidColorBrush = Nothing
        Select Case boundWord.ToLower().Trim()

            Case "UnInti"
                returnBrush = New SolidColorBrush(Colors.Red)
            Case "Loading"
                returnBrush = New SolidColorBrush(Colors.Red)
            Case "Loaded"
                returnBrush = New SolidColorBrush(Colors.LightPink)
            Case "Interactive"
                returnBrush = New SolidColorBrush(Colors.Pink)
            Case "Complete"
                returnBrush = New SolidColorBrush(Colors.Green)
        End Select

        Return returnBrush
    End Function

    Public Function ConvertBack(ByVal value As Object, ByVal targetType As Type, ByVal parameter As Object, ByVal culture As CultureInfo) As Object Implements IValueConverter.ConvertBack
        Throw New Exception("Cant convert back")
    End Function
End Class 
```

结束命名空间

是否有任何选项可以像“lblprdfrst.background=color.red”一样即时更改颜色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:30:19.143

您可以按照 makc 的建议将背景属性直接绑定到视图模型上的属性，或者如果您根据已知的固定规则更改颜色，则可以使用数据触发器执行此操作，该触发器基于您的 boundword 变量的值. 这是一个包含数据触发器示例的教程站点[http://zamjad.wordpress.com/2009/08/21/data-trigger-in-wpf/](http://zamjad.wordpress.com/2009/08/21/data-trigger-in-wpf/)

# php - 用php发送邮件没有给出预期的结果

> ID：15130740
> 
> 赞同：0
> 
> 时间：2013-02-28T08:25:48.643
> 
> 标签：php

我有这个表格，我在整个网站上都使用过它，它工作正常，但是当我在我的内容中使用额外的数据时，它会停止发送，即使它没有显示有错误的消息或任何其他消息

这是它自己的形式

```
<form action="" method="post">
<table width="683" border="0" cellspacing="0" cellpadding="10">
  <tr>
    <td width="96">Full Name</td>
    <td colspan="4"><label for="textfield"></label>
    <input type="text" name="fname" id="fname" /></td>
  </tr>
  <tr>
    <td>E-mail</td>
    <td colspan="4"><input type="text" name="email" id="email" /></td>
  </tr>
  <tr>
    <td>Company</td>
    <td colspan="4"><input type="text" name="company" id="company" /></td>
  </tr>
  <tr>
    <td colspan="5">How do you rate our services and products:</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td width="120"><input type="radio" name="s_rate" id="Poor" value="Poor" />
Poor </td>
    <td width="120"><input type="radio" name="s_rate" id="Good" value="Good" />
Good </td>
    <td width="120"><input type="radio" name="s_rate" id="Very_Good" value="Very Good" />
Very Good </td>
    <td width="127"><input type="radio" name="s_rate" id="Excellent" value="Excellent" />
Excellent</td>
  </tr>
  <tr>
    <td colspan="5"><p>How did you know about us?</p></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td><input type="radio" name="know" id="Google" value="Google" />
Google</td>
    <td><input type="radio" name="know" id="E_mail" value="E-mail" />
E-mail</td>
    <td><input type="radio" name="know" id="A_friend" value="A friend" />
A friend</td>
    <td><input type="radio" name="know" id="Social_Media" value="Social Media" />
Social Media</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td colspan="2"><input type="radio" name="know" id="advertisement" value="An advertisement at a  web site" />
An advertisement at a  web site</td>
    <td colspan="2"><input type="radio" name="know" id="Old_customer" value="I am an old customer" />
    I am an old customer</td>
  </tr>
  <tr>
    <td colspan="5">Would you recommend us to your friends and colleagues:</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td><input type="radio" name="recommend" id="Yes" value="Yes" />
Yes </td>
    <td><input type="radio" name="recommend" id="No" value="No" />
No</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td colspan="5">Do you have any suggestions to make us improve our services?</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td colspan="4">
    <textarea name="message" id="message" cols="45" rows="5"></textarea></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td><input type="submit" name="Submit" id="button" value="Submit" /></td>
  </tr>
</table>
</form> 
```

这是我的 php 代码

```
<?php
      if(isset($_POST['submit'])){
          echo "done";

            $name = $_POST['fname'];
            $email = $_POST['email'];
            $company = $_POST['company'];
            $s_rate = $_POST['s_rate'];
            $know = $_POST['know'];
            $recommend = $_POST['recommend'];
            $message = $_POST['message'];

            $recipient = 'johnef_sh@hotmail.com'; 
            $subject="feedback"; 

            $content = "New feedback \n From: ".$name.",\n Email: ".$email.", \n Company: ".$company.", \n He rate our services as: ".$s_rate.", \n He know about us from: ".$know.", \n Would he recommend us to his friends: ".$recommend.", \n He's suggestions was: ".$message; 
            $headers = 'From: feedback@hostnile.com' . "\r\n" .
    'Reply-To: johnef_sh@hotmail.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();
    $retval=mail($recipient, $message, $content, $headers);

   if($retval==true)
   {
      echo "<span style='color:green; font-size:16px; margin-left:35px; font-family:Arial, Helvetica, sans-serif;'>Message sent successfully...</span>";
   }
   else
   {
      echo "<span style='color:red; font-size:16px; margin-left:35px; font-family:Arial, Helvetica, sans-serif;'>Message could not be sent...</span>";
   }
}
?> 
```

现在，当我提交表单时，我返回同一页面，没有任何结果，邮件没有发送任何内容，甚至没有消息。

内容是

```
$content = "New feedback \n From: ".$name.",\n Email: ".$email.", \n Company: "
.$company.", \n He rate our services as: ".$s_rate.", \n He know about us from: "
.$know.", \n Would he recommend us to his friends: "
.$recommend.", \n He's suggestions was: ".$message; 
```

我把很多数据放进去有什么不同吗？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:28:23.933

如果你在本地主机上，它会给你错误，因为你没有从本地主机端口 25 发送邮件。为了从本地主机发送邮件，你需要[phpmailer](http://phpmailer.org)或[swiftmailer](http://swiftmailer.org)或其他`smpt`选项。

您可以在本地使用设置`SMTP`邮件服务器并测试邮件功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:32:35.250

你有

```
<input type="submit" name="Submit" id="button" value="Submit" /> 
```

但检查提交使用

```
isset($_POST['submit']) 
```

`Submit`您在按钮的- 属性中使用大写字母，但在 PHP 脚本中`name`检查小写字母。`submit`

# xcode - cocos2D 出现 AdMob 错误

> ID：15130745
> 
> 赞同：0
> 
> 时间：2013-02-28T08:26:12.200
> 
> 标签：xcode, cocos2d-iphone

我正在开发一个简单的 Cocos2D 游戏，并在我的游戏中包含 AdMob SDK。当我用模拟器运行我的项目时，它运行正常。但是当我使用设备时，我得到了这个

```
error /Users/developway/Desktop/The GardenerResources/AdMob/libGoogleAdMobAds.a for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:35:18.547

更新到最新的 AdMob。如果这不能解决问题，请从 Build Settings 中删除 armv7s 作为支持的架构。

# android - 如何在 JAVA 中的每个类中包含方法，例如 php 中的 include 函数？

> ID：15130763
> 
> 赞同：1
> 
> 时间：2013-02-28T08:27:19.350
> 
> 标签：android, button, methods, onclick

我想知道是否有一种方法可以在每个 JAVA 类中包含重复方法。

这是场景：

我有 5 个布局： main.xml layout1.xml layout2.xml layout3.xml layout4.xml

我知道在android中你需要为每个布局都有一个类。所以我有5个不同的课程。

但在所有布局中，有 4 个单选按钮使用以下代码：

```
public void layout1(View target) {
        // Do stuff
        Intent n1 = new Intent(main.this, layout1.class);
        startActivity(n1);
    }

    public void layout2(View target) {
        Intent n2 = new Intent(main.this, layout2.class);
        startActivity(n2);
    }

    public void layout3(View target) {
        Intent n3 = new Intent(main.this, layout3.class);
        startActivity(n3);
    }

    public void layout4(View target) {
        Intent n4 = new Intent(main.this, layout4.class);
        startActivity(n4);
    } 
```

通过使用布局中的“android:onclick”来分配按钮。如何在每个类中包含这些方法，以便在有很多类/布局时不需要复制和粘贴？

因为在 PHP 中，您可以通过使用在每个页面中包含函数

```
include 'functionfilename.php'; 
```

我怎么能在Java中做到这一点？有办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:31:44.163

创建一个扩展类的抽象类`Activity`调用它`BaseActivity`，然后在所有活动中扩展你的`BaseActivity`类而不是直接扩展活动，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:33:37.207

在尝试使用 Android 进行任何操作之前，您应该学习面向对象的技术以及如何在 Java 中应用它。

# java - `hashCode` 的默认实现是什么？

> ID：15130764
> 
> 赞同：63
> 
> 时间：2013-02-28T08:27:21.760
> 
> 标签：java, hashcode

如果不覆盖该`hashCode`方法，那么默认实现是`hashCode`什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-28T08:28:16.807

然后这个类继承`hashCode`自它的一个祖先。如果它们都没有覆盖它，则使用[Object.hashCode](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)。

从[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)：

> 在合理可行的情况下，由 Object 类定义的 hashCode 方法确实为不同的对象返回不同的整数。（这通常通过将对象的内部地址转换为整数来实现，但 JavaTM 编程语言不需要这种实现技术。）

所以默认实现是特定于 JVM 的

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-28T08:35:00.530

默认情况下，未覆盖的方法继承自`Object`.

如果您查看该方法的文档，返回值是“ `[...] distinct integers for distinct objects. (This is typically implemented by converting the internal address of the object into an integer [...])`”。in 中的方法`java.lang.Object`被声明为 native，这意味着实现由 JVM 提供，并且可能会根据您的运行时环境而有所不同。

一个小例子：

```
Object o1 = new Object();
Object o2 = new Object();
System.out.println(o1.hashCode());
System.out.println(o2.hashCode()); 
```

打印（使用我的 jdk6）：

```
1660187542
516992923 
```

`hashCode()`顺便说一句，在默认实现中使用值的十六进制表示`toString()`：运行`System.out.println(o1)`打印类似

```
java.lang.Object@7a5e1077 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-28T08:34:21.943

Object.hashcode() 是本机方法。

`public native int hashCode();`

这意味着它是在特定于平台的代码中实现的，并作为本机方法公开。

相同的代码将是编译后的代码，JDK 中不可用

这个[现有的问题](https://stackoverflow.com/questions/2292629/where-to-find-source-code-for-java-lang-native-methods)可能会提供更多信息。

# oracle - 从具有小写字段名的表中选择时标识符无效

> ID：15130768
> 
> 赞同：0
> 
> 时间：2013-02-28T08:27:38.070
> 
> 标签：oracle, oracle-sqldeveloper, identifier

我从 csv 文件导入数据并创建了一个新表。第一行是标题。

当我尝试对这些表运行一些简单查询时，我收到*ORA-00904 无效标识符*错误。

普通表和导入数据表的唯一区别是后者中的字段名是小写的，而在普通表中它们总是大写的。

这可能是错误的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:56:41.767

当您`""`在 DDL 中使用时，您可以使列名区分大小写。

所以如果 DDL 是这样的：

```
CREATE TABLE "DWH"."TEST_PROBA" ( "credit_num" VARCHAR2(11 BYTE) NOT NULL ENABLE, 
"term_acc_open_date" DATE NOT NULL ENABLE, 
"date_final_pmt_exp" DATE, "dpd_1" VARCHAR2(5 BYTE) NOT NULL ENABLE, 
"dpd_2" VARCHAR2(5 BYTE) NOT NULL ENABLE, 
"dpd_3" VARCHAR2(5 BYTE) NOT NULL ENABLE, 
"dpd_4" VARCHAR2(5 BYTE) NOT NULL ENABLE, 
etc 
```

然后你需要像这样查询：

```
SELECT "credit_num", "term_acc_open_date", etc...
FROM "TEST_PROBA" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:56:12.790

如果您以小写形式创建列名（只能使用双引号来完成），您也必须以这种方式引用它们。

由于 Oracle 大写不带引号的标识符的方式，您必须在使用它们的任何地方用双引号将列名括起来。使用您提供的 DDL 的快速示例：

[SQL小提琴](http://sqlfiddle.com/#!4/4b2ac/4)

**Oracle 11g R2 模式设置**：

```
CREATE TABLE "TEST_PROBA" (
  "credit_num" VARCHAR2(11 BYTE) NOT NULL ENABLE
, "term_acc_open_date" DATE NOT NULL ENABLE
, "date_final_pmt_exp" DATE
, "dpd_1" VARCHAR2(5 BYTE) NOT NULL ENABLE
)
/

INSERT INTO test_proba (
  "credit_num"
, "term_acc_open_date"
, "date_final_pmt_exp"
, "dpd_1"
)
VALUES (
  '12341234123'
, SYSDATE
, SYSDATE+1
, 'foo'
)
/

COMMIT
/ 
```

**查询 1**：

```
SELECT "credit_num"
FROM test_proba 
```

**[结果](http://sqlfiddle.com/#!4/4b2ac/4/0)**：

```
|  CREDIT_NUM |
---------------
| 12341234123 | 
```

请注意，`SELECT "credit_num"`有效而`SELECT credit_num`无效，并且会产生您上面提到的 ORA-00904 错误。

# java - Primefaces FileUpload 不适用于 Spring

> ID：15130770
> 
> 赞同：0
> 
> 时间：2013-02-28T08:27:48.020
> 
> 标签：java, spring, primefaces

我正在使用 Spring 3.0.6.RELEASE 和 Primefaces 2.2.1 做一个 Web 应用程序。在我的应用程序中有一个 FileUpload 组件。但是 fileupload 不起作用。并且从不调用 backingbean FileUploadController 中的 upload() 函数。

我将这个包含到我的 web.xml 中：

```
<filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

在我的 index.xhtml

```
<p:dialog widgetVar="assetUploadDialog" modal="true" minHeight="300"
                  minWidth="550" closable="true" draggable="true"
                  closeOnEscape="true" header="Asset upload">
             <h:form id="formuploader" >
                <p:fileUpload id="fileuploader"
                      fileUploadListener="#{fileUploadController.upload}"
                      sizeLimit="100000"
                      allowTypes="*.jpg;*.gif;*.png;*.pdf;*.png;*.doc?x;*.xls;*.xlsx;"/>
            </h:form>
        </p:dialog> 
```

在我的 FileUploadController 梁类中：

```
public class FileUploadController {

    private String destination="D:\\";

     public void upload(FileUploadEvent event) {  
        System.out.println("uplaod");
        FacesMessage msg = new FacesMessage("Success! ", event.getFile().getFileName() + " is uploaded.");  
        FacesContext.getCurrentInstance().addMessage(null, msg);

        try {
            copyFile(event.getFile().getFileName(), event.getFile().getInputstream());
        } catch (IOException e) {
            e.printStackTrace();
        }

    }  
     public void copyFile(String fileName, InputStream in) {
           try {

                OutputStream out = new FileOutputStream(new File(destination + fileName));

                int read = 0;
                byte[] bytes = new byte[1024];

                while ((read = in.read(bytes)) != -1) {
                    out.write(bytes, 0, read);
                }

                in.close();
                out.flush();
                out.close();

                System.out.println("New file created!");
                } catch (IOException e) {
                System.out.println(e.getMessage());
                }
    }
} 
```

我的问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:42:42.110

尝试添加`enctype="multipart/form-data"`到您的表单标签，就像在这个[例子中一样](http://www.primefaces.org/showcase/ui/fileUploadSingle.jsf)

# ruby-on-rails - 无法在 Rails 控制器中批量分配属性

> ID：15130777
> 
> 赞同：0
> 
> 时间：2013-02-28T08:28:08.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的内裤扭曲了。我的目标是让任何登录的人都能够编辑指南。show 操作将显示 updated_by 和 created_by 用户。有什么不对劲。

指南控制器.rb

```
 before_filter :authenticate_user!, only: [:new, :create, :edit, :update]
def update

    @guideline = Guideline.find(params[:id])

    respond_to do |format|
      if @guideline.update_attributes(params[:guideline])
        @guideline.update_attribute(:updated_by, current_user.id)

def show
    @guideline = Guideline.find(params[:id])
    if @guideline.updated_by
     @updated = User.find(@guideline.updated_by).profile_name
   end

      if User.find(@guideline.user_id)
     @created = User.find(@guideline.user_id).profile_name
      end 
```

指南.rb（模型）

```
 attr_accessible :content, :hospital, :title, :user_id, :guideline_id, :specialty, :updated_by, :current_user

 belongs_to :user
 has_many :favourite_guidelines 
```

我似乎能够正确分配 updated_by 。但是当我进入管理员并尝试更改指南用户时，我得到了错误：

```
Processing by Admin::GuidelinesController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"x+2BC0ztrqLBasL5uWskDEdars+FvSSNRvzGJuXyiA0=", "guideline"=>{"user_id"=>"13", "title"=>"URL testing", "content"=>"http://www.healme.com", "hospital"=>"Children's Hospital", "subtitle"=>"", "specialty"=>"Cardiology", "slug"=>"", "updated_by"=>""}, "commit"=>"Update Guideline", "id"=>"37-url-testing"}
  AdminUser Load (0.4ms)  SELECT "admin_users".* FROM "admin_users" WHERE "admin_users"."id" = 1 LIMIT 1
  Guideline Load (0.2ms)  SELECT "guidelines".* FROM "guidelines" WHERE "guidelines"."id" = ? LIMIT 1  [["id", "37-url-testing"]]
Completed 500 Internal Server Error in 9ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: subtitle, slug): 
```

这是 before_filter 的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:30:46.177

答案就在错误消息中：

`ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: subtitle, slug):`

如果要批量分配这些属性，则需要将它们添加到`attr_accessible`模型中的列表中。

有关详细信息，请参阅[http://guides.rubyonrails.org/security.html#mass-assignment 。](http://guides.rubyonrails.org/security.html#mass-assignment)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:30:47.040

将字幕和 slug 添加到 attr_accessible 列表。

这将解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T08:30:49.793

直接的工作解决方案是将`subtitle`和添加`slug`到`attr_accessible`列表中。

请记住，即使表单不包含他们的字段，您的应用程序的用户也可以更新它们，他可以完美地使用这些字段制作查询。

不在`attr_accessible`列表中的字段必须单独分配，如下所示：

```
@guideline.subtitle = ...
@guideline.slug = ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T08:31:52.730

只需将**字幕和 slug**放入`attr_accessible`.

指南.rb（模型）

```
 attr_accessible :content, :hospital, :title, :user_id, :guideline_id, :specialty, :updated_by, :current_user, :subtitle, :slug 
```

**注意**：放入任何字段`attr_accessible`将允许任何用户批​​量分配您通过浏览器中的表单或代码添加的属性。因此，如果您这样做，请谨慎行事，请记住您希望任何用户批​​量分配哪些字段以及您不希望分配哪些字段。

# function - 在matlab中定义函数而不使用新函数

> ID：15130781
> 
> 赞同：0
> 
> 时间：2013-02-28T08:28:20.583
> 
> 标签：function, matlab

我的代码有一个 matlab 文件，我想在这个文件中定义一个新函数，我不想为这个函数添加新文件，因为这个文件是我在 Webots 中控制代理的代码，并且控制器文件必须是单一的文件。函数必须在文件中定义我的代码的第一个或最后一个或...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:20:17.437

您不能在脚本中定义函数，但*可以*在函数 m 文件中定义本地函数……因此，假设您的脚本如下所示：

```
blah blah         %// This is your main code

%// Here you want to add another function, for example:
function y = foo(x)
    y = x + 2; 
```

如果您尝试执行上面显示的操作，您将收到以下错误：

> `Function definitions are not permitted at the prompt or in scripts.`

但是，如果您只是将主脚本更改为一个函数，您将能够定义本地函数：

```
function mainfunc %// Main function name to your choosing
blah blah         %// This is your main code

function y = foo(x)
    y = x + 2; 
```

由于您`mainfunc`不接受也不返回任何参数，因此您可以像普通脚本一样运行它。另请注意，建议 main 函数和 m 文件同名。

**编辑**：Shai 在评论中提到这里有一个警告：虽然脚本可以访问主工作区中的变量，但函数有自己的范围。记在脑子里。尽管如此，您仍然可以使用 、 和 命令来操作工作[`load`](http://www.mathworks.com/help/matlab/ref/load.html)区[`save`](http://www.mathworks.com/help/matlab/ref/save.html)变量。[`evalin`](http://www.mathworks.com/help/matlab/ref/evalin.html)[`assignin`](http://www.mathworks.com/help/matlab/ref/assignin.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:38:28.160

如果你的函数非常小，可以定义为[匿名函数](http://www.mathworks.com/help/matlab/matlab_prog/anonymous-functions.html)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-28T08:48:34.597

我认为使用 eval 是您的案例的解决方案

把你的函数放在一个字符串变量中。

```
% script
subfun = 'do something with input parameter param, and assign to output variable'
param = xxx;
output = 0;
eval(subfun);
% Then access the output here 
```

这是一个例子

```
% Script
subfun = 'output=param^2;output=output^2;'
param = 5;
output = 0;
eval(subfun);
disp(output); 
```

# shell - 从变量展开环境变量

> ID：15130782
> 
> 赞同：3
> 
> 时间：2013-02-28T08:28:23.503
> 
> 标签：shell, environment-variables

我有一个看起来像这样的代码：

```
my_var="MY_FIRST_ENV_VAR" 
```

我的问题是，如何从环境变量 MY_ENV_VAR 中获取值。

我尝试了很多东西，但主要问题是 my_var 现在是一个字符串。

我想这样做的原因是因为我有一些几乎同名的环境变量。

```
MY_FIRST_ENV_VAR=R1.2.3
MY_SECOND_ENV_VAR=R2.3.4

for vari in FIRST SECOND; do
    branch=MY_$( echo $vari )_ENV_VAR;
    echo $branch;
    echo ${branch};
    echo "${branch};
done; 
```

我也尝试了其他一些事情。在我的代码中，我只能访问 FIRST 和 SECOND 字符串，我需要先构造变量的名称。

我已经找了很长时间，也许我只是在寻找错误的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:37:02.957

试试这个：

```
MY_FIRST_ENV_VAR=R1.2.3
MY_SECOND_ENV_VAR=R2.3.4

for vari in FIRST SECOND; do
    varName="MY_${vari}_ENV_VAR"
    branch=${!varName}
    echo "$branch"
done 
```

输出：

```
R1.2.3
R2.3.4 
```

`${!varName}`被称为[间接扩展](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)，并允许您扩展名为 的变量`varName`。有关详细信息，请参阅 bash[手册页](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)。

* * *

如果您的 shell 不支持上面显示的间接扩展，请`eval`改用：

```
MY_FIRST_ENV_VAR=R1.2.3
MY_SECOND_ENV_VAR=R2.3.4

for vari in FIRST SECOND; do
    branch=$(eval "echo \$MY_${vari}_ENV_VAR")
    echo "$branch"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:34:27.673

## 让我们告诉你

```
MY_FIRST_ENV_VAR=R1.2.3
MY_SECOND_ENV_VAR=R2.3.4

for vari in FIRST SECOND; do
    branch="MY_${vari}_ENV_VAR"
    echo "branch variable: $branch"
    echo "branch variable indirection: ${!branch}"
done 
```

## 输出

```
branch variable: MY_FIRST_ENV_VAR
branch variable indirection: R1.2.3
branch variable: MY_SECOND_ENV_VAR
branch variable indirection: R2.3.4 
```

## 文档

`${!branch}`是一个[*变量间接*](http://mywiki.wooledge.org/BashFAQ/006#Evaluating_indirect.2BAC8-reference_variables)

# sharepoint - 使用存储过程获取 SPListItem

> ID：15130784
> 
> 赞同：1
> 
> 时间：2013-02-28T08:28:25.670
> 
> 标签：sharepoint, stored-procedures, splistitem

是否可以使用 sql server 中的存储过程获取列表项？每个人都可以给我任何建议来解决这个问题......如果你能给我一个存储过程代码可以做到这一点，我很高兴，

并且……它是否比其他方式更有效，例如休息服务……？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:51:25.983

从技术上讲，这是可能的，但实际上它几乎没有任何意义，并且非常不鼓励。为什么*不*尝试`SPListItem`直接从 SQL 数据库中获取 s 的原因：

*   **合法**- SQL 级数据结构和相关存储过程代表 Microsoft 的知识产权，即使作为[Microsoft 开放规范的一部分被正式](http://www.microsoft.com/openspecifications/en/us/default.aspx)[记录](http://msdn.microsoft.com/en-us/library/cc339475%28v=office.12%29.aspx)，使用它们也需要获得[许可](http://msdn.microsoft.com/en-us/library/dd346586.aspx)并支付版税。
*   **架构**— 它违反 SharePoint 的架构，克服 SharePoint 自己的数据访问 API 可能会导致意外行为。
*   **维护**——不能保证 SQL 结构在不同版本之间保持相同/兼容。
*   **可移植性**— 告别 SharePoint Online (Office 365) 兼容性。
*   **安全**性 — 您有效地绕过了 SharePoint 的权限检查和安全架构。
*   **治理— 没有***任何*理智的 SharePoint 管理员会让您直接从自定义（非 Microsoft）代码访问 SharePoint 的 SQL 存储。

结果：**不要这样做**，除非您处于非常特定的场景中（例如，开发复杂的迁移工具，但我怀疑在这种情况下您会问这样一个初学者的问题）。因此，推测性能是无关紧要的。

# regex - 如何删除包含 javadoc 注释的整行？

> ID：15130786
> 
> 赞同：0
> 
> 时间：2013-02-28T08:28:38.010
> 
> 标签：regex, eclipse, replace

如何使用 Eclipse **Find/Replace prompt**删除仅包含 javadoc 注释的行。
我有以下情况，

```
/** The panel. */
private JPanel panel;
/** The text field. */
private JTextField textField1;
/** The text field_1\. */
private JTextField textField2;
/** The button. */
private JButton button;
/** The combo box. */
private JComboBox comboBox; 
```

现在我想删除包含**/****的整行我应该在**eclipse**
中使用 什么**正则表达式**来**搜索和删除这些行**？

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:33:26.723

```
/\*\*.*\r?\n? 
```

`/**`匹配以包括（如果存在）任何后续换行符开头的整行。

```
/\*\*.*?\*/ 
```

匹配单个评论。****

# c# - System.Web.Routing.RouteCollection 不包含“MapHubs”的定义

> ID：15130790
> 
> 赞同：8
> 
> 时间：2013-02-28T08:28:48.947
> 
> 标签：c#, asp.net, signalr

我遵循 SignalR wiki 页面中的示例，这是我的`Global.asax`：

```
<%@ Application Language="C#" %>

<%@ Import Namespace="System" %>
<%@ Import Namespace="System.Web.Routing" %>

<script runat="server">

    void Application_Start(object sender, EventArgs e) 
    {
        // Code that runs on application startup
        RouteTable.Routes.MapHubs();
    } 
```

但我得到：

“System.Web.Routing.RouteCollection”不包含“MapHubs”的定义，并且找不到接受“System.Web.Routing.RouteCollection”类型的第一个参数的扩展方法“MapHubs”（您是否缺少 using 指令还是程序集参考？）\Global.asax 11

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T08:40:14.313

Maphubs 是 SignalR 库中 RouteCollection 类的扩展方法。您需要包含 SignalR 引用才能调用 MapHubs。

资源：

[https://github.com/SignalR/SignalR/blob/master/src/Microsoft.AspNet.SignalR.SystemWeb/SignalRRouteExtensions.cs](https://github.com/SignalR/SignalR/blob/master/src/Microsoft.AspNet.SignalR.SystemWeb/SignalRRouteExtensions.cs)

# backbone.js - 如何让 twitter bootstrap.modals 与骨干网配合得很好？

> ID：15130797
> 
> 赞同：0
> 
> 时间：2013-02-28T08:29:18.753
> 
> 标签：backbone.js, twitter-bootstrap, modal-dialog

作为主题，我已经阅读了关于类似问题的另一个问题： [modal-dialog-with-backbone-and-marionette](https://stackoverflow.com/questions/13546560/backbone-bootstrap-modal-within-template-not-showing/13549250#13549250 "带骨干和木偶的模态对话")

但我不想引入`backbone.marionette`我的项目。

我想知道是否还有其他选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:03:57.633

我通过将`div`模态对话框的容器放置并清空到页面底部来解决它：

```
 <!-- Charge -->
    <div id="charge_dialog_container" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

    </div> 
```

在模板中定义了对话框的其余部分：

```
 <script id="charge_dialog_template" type="text/template">
        <div class="modal-header">
            ...
        </div>
        <div class="modal-body">
            ...
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" data-dismiss="modal"><i class="icon-ok"></i> OK</button>
        </div>
    </script> 
```

在`initialize`函数中的视图构建过程中，我做了以下`modal()`事情：

```
 ChargeView = Backbone.View.extend({
            el: $('#charge_dialog_container'),
            initialize: function() {
                this.render();
                this.$el.modal({'backdrop': 'static'});
            },
            render: function() {
                var template = _.template($('#charge_dialog_template').html());
                this.$el.html(template);
            }
        }); 
```

# parsing - 有没有关于斯坦福依赖解析器改进的论文？

> ID：15130803
> 
> 赞同：0
> 
> 时间：2013-02-28T08:29:39.200
> 
> 标签：parsing, stanford-nlp

就像标题一样，我想知道在改进斯坦福依赖解析器方面是否有任何工作（应用程序或论文）。我的意思是外部研究，而不是版本更新。以及论文所涉及的改进方面（比如速度、准确性等）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:32:49.023

是的^(1,2)。

* * *

*   ¹：[https ://www.google.com/?q=stanford%20dependency%20parser](https://www.google.com/?q=stanford%20dependency%20parser)
*   ²： http: [//nlp.stanford.edu/software/lex-parser.shtml](http://nlp.stanford.edu/software/lex-parser.shtml)：

> *   版本 2.0.4 2012-11-12 提高依赖代码提取效率，其他依赖变化
> *   版本 2.0.3 2012-07-09 小错误修复
> *   版本 2.0.2 2012-05-22 一些模型现在支持使用额外标记的非树数据进行训练
> *   版本 2.0.1 2012-03-09 包括无壳英文模型，强制标签的错误修复
> *   2.0 版 2012-02-03 线程安全！
> *   版本 1.6.9 2011-09-14 改进了对命令的识别，依赖项现在明确包含一个根，解析器知道 osprey 是一个名词
> *   版本 1.6.8 2011-06-19 新法语模型，改进的外语模型，错误修复
> *   版本 1.6.7 2011-05-15 小错误修复。
> *   版本 1.6.6 2011-04-20 内部代码和 API 更改（ArrayLists 而不是 Sentence；使用 CoreLabel 对象）以匹配标记器和 CoreNLP。
> *   版本 1.6.5 2010-11-30 对英语斯坦福依赖项的进一步改进和其他小的更改
> *   版本 1.6.4 2010-08-20 更多小错误修复和对英语斯坦福依赖项和问题解析的改进
> *   版本 1.6.3 2010-07-09 对英语斯坦福依赖和问题解析的改进，小错误修复
> *   版本 1.6.2 2010-02-26 对阿拉伯语解析器模型以及英语和中文斯坦福依赖项的改进
> *   版本 1.6.1 2008-10-26 略微改进了阿拉伯语和德语解析以及斯坦福依赖项
> *   1.6 版 2007-08-19 添加了阿拉伯语、k-best PCCFG 解析；改善英语语法关系
> *   版本 1.5.1 2006-06-11 改进了英文和中文的语法关系；固定 UTF-8 处理
> *   1.5 版 2005-07-21 添加了语法关系输出；修复了 1.4 中引入的错误
> *   1.4 版 2004-03-24 再次使 PCFG 更快（通过 FSA 最小化）；添加了德语支持
> *   1.3 版 2003-09-06 使解析器的速度提高了一倍；添加了标记化选项
> *   1.2 版 2003-07-20 将 PCFG 内存使用量减半；增加了对中文的支持
> *   版本 1.1 2003-03-25 提高解析速度；包括 GUI，改进的 PCFG 语法
> *   版本 1.0 2002-12-05 初始版本

# jsf-2 - Richfaces PanelMenuItem 重新评估禁用不起作用

> ID：15130807
> 
> 赞同：1
> 
> 时间：2013-02-28T08:29:48.923
> 
> 标签：jsf-2, richfaces

如果我禁用 PanelMenuItem，我发现 Richfaces 在此元素之后添加了某种 javascript，导致该元素被禁用。如果我修改此脚本并将 disabled 属性设置为 false 并使用 firebug 执行此脚本，我可以再次使用 PanelMenuItem。如果我单击该项目，则会调用该操作，这似乎是错误的。我的理解是JSF会记住状态以避免被篡改的请求。我假设 Richfaces 脚本在 JSF 完成后将元素更改为禁用。所以 JSF 仍然认为这个元素没有被禁用。如果这是真的，那将是非常危险的。也许我完全错了或错过了什么。如果有人可以就此给我反馈，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:54:03.740

听起来像一个错误。 `org.richfaces.renderkit.html.PanelMenuItemRenderer#doDecode`不检查`disabled`属性（在执行操作之前通常如何执行其他组件）。

在 RF jira 中报告：[https ://issues.jboss.org/browse/RF-12813](https://issues.jboss.org/browse/RF-12813)

您可以在 jira 中为问题添加更多详细信息。

# node.js - nodejs 模块是否跨多个 HTTP 请求缓存？

> ID：15130812
> 
> 赞同：1
> 
> 时间：2013-02-28T08:30:01.600
> 
> 标签：node.js

nodejs 文档说

> 模块在第一次加载后被缓存。这意味着（除其他外）每次调用 require('foo') 都将返回完全相同的对象，如果它会解析为同一个文件。

但它没有指定范围。是否为当前 HTTP 请求中或跨多个 HTTP 请求的多次调用 require('module') 缓存加载的模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:16:26.330

是的，他们是。

与其他常见的服务器环境（如 PHP）不同，node.js 服务器在请求完成后不会关闭。

假设您使用的是优秀的[express](http://expressjs.com)框架，也许这个示例将有助于理解差异：

```
... // setup your server

// do a route, that will show a call-counter
var callCount = {};

app.get('/hello/:name', function(request, response) {
  var name = request.params.name;
  callCount[name] = (callCount[name] || 0) + 1

  response.send(
    "Hello " + name + ", you invoked this " + callCount[name] + " times");
  });
}); 
```

呼叫时`curl localhost:3000/hello/Dave`，您将在每次后续呼叫时收到更高的号码。

第一次调用：`Hello Dave, you invoked this 1 times`

第二次调用：`Hello Dave, you invoked this 2 times`

... 等等 ...

因此，您`callCount`将被对该路线的任何请求修改。它来自哪里并不重要，它可以在您正在使用的任何模块中定义`require`。

无论如何，在任何模块中定义的这些变量都将在服务器重新启动时重置。您可以通过将它们放入与您的 node.js 进程分离的 Store 来解决这个问题，例如[Redis](http://redis.io/) Store（请参阅[node-redis](https://github.com/mranney/node_redis)）、文件系统上的文件或数据库（例如[MongoDB](http://www.mongodb.org/)）。最后由你决定。您只需要了解数据的来源和去向。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:32:20.263

是的。同样来自文档：

```
 Multiple calls to require('foo') may not cause the module code to be executed 
    multiple times. This is an important feature. With it, "partially done" 
    objects can be returned, thus allowing transitive dependencies to be loaded 
    even when they would cause cycles. If you want to have a module execute code 
    multiple times, then export a function, and call that function. 
```

# c# - EF Code First 防止使用 Fluent API 进行属性映射

> ID：15130814
> 
> 赞同：32
> 
> 时间：2013-02-28T08:30:20.477
> 
> 标签：c#, entity-framework, ef-code-first, fluent-interface

我有一个类`Product`和一个复杂类型`AddressDetails`

```
public class Product
{
    public Guid Id { get; set; }

    public AddressDetails AddressDetails { get; set; }
}

public class AddressDetails
{
    public string City { get; set; }
    public string Country { get; set; }
    // other properties
} 
```

是否可以防止从类`AddressDetails`内部映射“国家”属性`Product`？（因为我上课永远不需要它`Product`）

像这样的东西

```
Property(p => p.AddressDetails.Country).Ignore(); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-28T10:50:14.070

**对于 EF5 及更早版本：** 在`DbContext.OnModelCreating`您的上下文的覆盖中：

```
modelBuilder.Entity<Product>().Ignore(p => p.AddressDetails.Country); 
```

**对于 EF6：**你不走运。请参阅[Mrchief 的回答](https://stackoverflow.com/a/25027724/1622598)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-07-30T02:11:48.713

不幸的是，接受的答案不起作用，至少在 EF6 中，尤其是在子类不是实体的情况下。

我还没有找到任何通过 fluent API 来做到这一点的方法。它工作的唯一方法是通过数据注释：

```
public class AddressDetails
{
    public string City { get; set; }

    [NotMapped]
    public string Country { get; set; }
    // other properties
} 
```

**注意：**如果您有一种情况，`Country`只有当它是某个其他实体的一部分时才应该被排除，那么您对这种方法不走运。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-01-13T15:30:18.030

如果您使用的是 EntityTypeConfiguration 的实现，则可以使用 Ignore 方法：

```
public class SubscriptionMap: EntityTypeConfiguration<Subscription>
{
    // Primary Key
    HasKey(p => p.Id)

    Property(p => p.Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
    Property(p => p.SubscriptionNumber).IsOptional().HasMaxLength(20);
    ...
    ...

    Ignore(p => p.SubscriberSignature);

    ToTable("Subscriptions");
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-25T15:41:34.043

虽然我意识到这是一个老问题，但答案并没有解决我对 EF 6 的问题。

对于 EF 6，您需要创建一个 ComplexTypeConfiguration 映射。

例子：

```
public class Workload
{
    public int Id { get; set; }
    public int ContractId { get; set; }
    public WorkloadStatus Status {get; set; }
    public Configruation Configuration { get; set; }
}
public class Configuration
{
    public int Timeout { get; set; }
    public bool SaveResults { get; set; }
    public int UnmappedProperty { get; set; }
}

public class WorkloadMap : System.Data.Entity.ModelConfiguration.EntityTypeConfiguration<Workload>
{
    public WorkloadMap()
    {
         ToTable("Workload");
         HasKey(x => x.Id);
    }
}
// Here This is where we mange the Configuration
public class ConfigurationMap : ComplexTypeConfiguration<Configuration>
{
    ConfigurationMap()
    {
       Property(x => x.TimeOut).HasColumnName("TimeOut");
       Ignore(x => x.UnmappedProperty);
    }
} 
```

If your Context is loading configurations manually you need to add the new ComplexMap, if your using the FromAssembly overload it'll be picked up with the rest of the configuration objects.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-04T16:23:59.577

在 EF6 上，您可以配置复杂类型：

```
 modelBuilder.Types<AddressDetails>()
     .Configure(c => c.Ignore(p => p.Country)) 
```

这样，属性 Country 将始终被忽略。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-29T16:57:26.667

试试这个

```
modelBuilder.ComplexType<AddressDetails>().Ignore(p => p.Country); 
```

在类似的情况下它对我有用。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-01-07T08:29:49.443

也可以在 Fluent API 中完成，只需在映射中添加以下代码

this.Ignore(t => t.Country)，在 EF6 中测试

# node.js - Node.js 在哪些场景下有用

> ID：15130815
> 
> 赞同：-4
> 
> 时间：2013-02-28T08:30:24.683
> 
> 标签：node.js

我一直在阅读有关**Node.js**的信息。但我不明白为什么它声称它是强大的。**Node.js**在哪些场景下大放异彩？它可以用于通用 Web 应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:48:55.273

与大多数其他系统相比，Node.js 是基于事件的，用于构建 Web 应用程序。这导致它非常有争议（有些人非常喜欢它，有些人讨厌它……）。除了争议之外，它还可以很好地用于构建各种 Web 应用程序，到目前为止，即使是大公司也已经这样做了（LinkedIn IIRC）。

Felix，（前）node.js 核心贡献者，编写了本[指南](http://nodeguide.com/convincing_the_boss.html)，它很好地展示了节点可以/应该（不）用于什么。

# textmatebundles - TextMate2 的 Sass 语法高亮不工作

> ID：15130819
> 
> 赞同：3
> 
> 时间：2013-02-28T08:30:32.263
> 
> 标签：textmatebundles, textmate2

我正在使用 TM2，我喜欢它。可悲的是，Sass 的语法高亮似乎并没有真正起作用。难道只有我一个？

例如，新建一个“xxx.sass”文件，内容如下：

```
+h5bp-normalize // All normalize styles
+h5bp-main      // Basic styles ( see variables partial) 
```

在我的 TM2 中，第二行的颜色好像是注释，但它绝对不是注释。任何人都可以验证这一点吗？有什么解决办法吗？我现在正在开始一个大项目的 HTML/CSS 实现，我想使用 Sass 而不是 SCSS（我读了很多关于选择哪一个，所以请不要告诉我 SCSS 是标准现在），但如果没有正确的语法突出显示这似乎是不可能的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:13:06.360

我发现[https://github.com/nathos/sass-textmate-bundle/](https://github.com/nathos/sass-textmate-bundle/)捆绑包似乎正在工作。

安装（我也尝试打开 Sass.tmbundle，虽然 TM2 询问我是否要安装该包，但它似乎没有用）：

```
mkdir -p ~/Library/Application\ Support/Avian/Bundles/
cd ~/Library/Application\ Support/Avian/Bundles/
git clone https://github.com/nathos/sass-textmate-bundle.git Sass.tmbundle 
```

也许重新加载TM2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:16:24.633

When I used the .sass format in Sublime Text 2 I found that it was not auto recognizing the syntax and that I had to set it manually (unlike any other format I've encountered). Are you saying that even after setting the syntax highlighting it won't work?

There are several packages for syntax highlighting, trying another one might be a quick fix. Which one are you using?

# html - Safari : 表单提交

> ID：15130828
> 
> 赞同：1
> 
> 时间：2013-02-28T08:30:46.880
> 
> 标签：html, safari

由于未知原因，登录表单无法在 Safari 中工作（从 5.1.x 到最新版本）。虽然适用于其他浏览器。

完整代码（页面为**index.php**）

```
<?php
ini_set('display_errors', '1');
$err = '';
if(isset($_POST['action']) && $_POST['action'] == 'login') {
    require_once('require_once.php');
    $ans = Core::Authenticate($_POST['txt_user'], $_POST['txt_pass']);
    if($ans) {
        session_set_cookie_params(3600, domain_path);
        session_start();
        $_SESSION['login_key'] = 'A COMPLEX LOGIC';
        header('Location: console.php');
        exit;
    } else {
        $err = 'Invalid Username / Password';
    }
}
?>
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Login</title>
    <link rel="stylesheet" type="text/css" href="css/style.css" />
</head>
<body>
    <div id="login_wrapper">
        <form action="index.php" method="post">
        <input type="hidden" name="action" value="login" />
        <h1>Welcome</h1>
    <?php
    if($err != '') {
        echo '<p>Error: ' . $err . '</p>' . PHP_EOL;
    }
    ?>
                <table class="tbl_login">
            <tr>
                <td>Username</td>
                <td><input type="text" name="txt_user" /></td>
            </tr>
            <tr>
                <td>Password</td>
                <td><input type="password" name="txt_pass" /></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td><button>Login</button></td>
            </tr>
        </table>
        </form>
    </div>
</body>
</html> 
```

`Core::Authenticate`是一个在凭据匹配时返回 true 的函数。

`require_once.php`包含其他必需的文件，例如配置文件、数据库库等。

`domin_path`是脚本的绝对路径，在全局范围内定义。

我不认为这是服务器端错误，因为其他浏览器（Chrome、IE、Firefox）都可以工作。

我怀疑这是由于`<button>`标签造成的，但是当我查找文档（来自[Safari HTML Reference](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/HTMLTags.html#//apple_ref/doc/uid/30001262-SW2)和[MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/button)`type` ）时，自 Safari 1.0 起支持不带属性的按钮标签。因此，我尝试将其更改为`<input type="submit" value="Login" />`，但 Safari 仍然拒绝工作（重定向到同一页面而没有任何消息）。

我还看错了什么？

注意：在 Safari 中未检测到/显示任何问题。也没有控制台消息。该页面也通过了 W3C HTML 验证。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T09:23:09.573

终于找到了Safari无法提交表单的原因。

不知何故`domain_path`设置不正确。它不包含前导`/`。更正域路径后，函数[session_set_cookie_params()](http://php.net/manual/en/function.session-set-cookie-params.php)可以正常工作。

但为什么其他浏览器运行良好？

# r - 如何控制绘图中符号的字体？

> ID：15130838
> 
> 赞同：4
> 
> 时间：2013-02-28T08:31:21.357
> 
> 标签：r, plot

在 R 中，在 plot() 函数中，pch 参数控制符号的外观。例如 pch=3，但是否可以将此符号设为粗体，例如 font.symbol = 2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:17:56.467

如果您使用带线条的符号，看起来`lwd`可能会得到您所追求的：

```
plot(1:10, lwd = rep(1:5, 2), cex = 2) 
```

![在此处输入图像描述](../Images/4638bf624a3a001de719158611d8ed5f.png)

# windows - QDir::rename() 不起作用

> ID：15130840
> 
> 赞同：0
> 
> 时间：2013-02-28T08:31:30.250
> 
> 标签：windows, qt, qdir

我在 windows 7 pro 上运行这段代码：

```
foreach(QString str, directorie.entryList(QStringList(), QDir::Dirs))
{
    if(str != "." && str != "..")
    {
        QDir path(directorie.path() + "\\" + str + "\\" + from.path());
        if(path.exists())
        {
            QDir toPath(directorie.path() + "\\" + str + "\\" + to.path() + "\\" + path.dirName());
            QDir make(directorie.path() + "\\" + str);
            qDebug() << make.mkpath(to.path() + "\\" + path.dirName());
            QDir dir;
            qDebug() << dir.rename(path.path(), toPath.path()) << path.path() << toPath.path();
        }
    }
} 
```

对于我尝试移动的每个目录，重命名返回 false

我检查：旧路径存在，新路径已创建。我对这两个目录都有足够的权限。

该目录位于另一台服务器上（以“\\”开头）。它可以从任何地方（甚至从完全不同的服务器）复制到该目录

有谁知道为什么它不起作用？我做错了什么 ？你有任何替代解决方案吗？

编辑：出于神秘的原因，它不再使 toPath

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:26:07.170

只需使用该代码，在参数中使用 old_dir、new_dir 调用“moveNodeAndSubNodes”。此代码非常安全，如果 som 不会删除 orig dir

```
#include <QDir>
#include <QDebug>
#include <QString>
#include <QDateTime>
#include <QFileInfoList>
#include <QFileInfo>

bool moveNodeAndSubNodes(QString from, QString to);
void moveDir(QString from, QString to);
QStringList findFiles(QString dir);

void moveDir(QString from, QString to)
{
    qDebug() << "from=" << from << "to=" << to;

    QDir source_dir(from);
    if (source_dir.exists()) {

        QDir dest_dir(to);
        if (!dest_dir.exists()) {
            qDebug() << "dest dir doesn't exist, create it" << to;
            dest_dir.mkpath(".");
        }

        foreach (QFileInfo info, source_dir.entryInfoList(QDir::AllEntries | QDir::NoDotAndDotDot)) {

            QString old_path = info.absoluteFilePath();
            QString new_path = QString("%1/%2").arg(to).arg(info.fileName());

            if (info.isDir()) {
                // recreate dir
                qDebug() << "move dir" << old_path << "to" << new_path;
                moveDir(old_path, new_path);
            }
            else {
                // recreate file
                qDebug() << "move file" << old_path << "to" << new_path;
                QFile::rename(old_path, new_path);
            }
        }
    }
    else { qDebug() << "error : source dir doesn't exist :" << from; }
}

QStringList findFiles(QString dir)
{
    QStringList ret;
    QDir source_dir(dir);
    if (source_dir.exists()) {
        foreach (QFileInfo info, source_dir.entryInfoList(QDir::AllEntries | QDir::NoDotAndDotDot)) {
            if (info.isDir()) {
                ret << findFiles(info.absoluteFilePath());
            }
            else {
                ret << info.absoluteFilePath();
            }
        }
    }
    return ret;
}

bool moveNodeAndSubNodes(QString from, QString to)
{
    bool ok  = false;
    moveDir(from, to);
    QStringList files = findFiles(from);
    qDebug() << "files not deleted =" << files;
    if (files.isEmpty()) {
        QDir rm_dir(from);
        ok = rm_dir.removeRecursively();
        qDebug() << "source dir removed =" << ok;
    }
    else {
        qDebug() << "source dir not empty, not removed";
    }
    return ok;
} 
```

# c++ - if(...) 和 ?: 的比较，哪个更好？

> ID：15130842
> 
> 赞同：1
> 
> 时间：2013-02-28T08:31:40.250
> 
> 标签：c++, c, performance, optimization, compiler-construction

我对以下代码片段的流程有一个简单的疑问。我在高级和汇编指令级别上比较了这个代码块。我发现这`?:`比分支要好得多。

```
const int THUMB_IMAGE = 0;
const int ICON_IMAGE = 1;
const int UNKNOWN_IMAGE = 2;

void foo( int nFlag ){
    int CopyFlag = nFlag;
    if( CopyFlag == THUMB_IMAGE )
        CopyFLag = ICON_IMAGE; // Setting THUMB and ICON images to same level
    // Executing rest of the code
}

void foo1( int nFlag ){
    int CopyFlag = ( nFlag == THUMB_IMAGE ) ?
                     ICON_IMAGE : nFlag; // Setting THUMB and ICON images to same level
    // Executing rest of the code
}

int main(void){
   foo( THUMB_IMAGE );
   foo1( THUMB_IMAGE );
   return 0;
} 
```

在上面的代码片段中，有两个函数，`foo()`和`foo1()`. 这两个函数将两种图像类型设置为`ICON_IMAGE`。

问题是如何分配和`if()`执行？

哪些条件语句是高度优化的`if()`或三元运算符`?:`？

在汇编代码级别，翻译`if()`, `CMP`（分支）和`MOV`指令是必要的。对于`?:`操作员，我认为有一些特殊的指令，但完全避免了分支指令。

谁能告诉哪个是最好的方法？

在`foo()`中，无论 if 条件如何，都会完成第一个赋值操作。它可能并非一直都需要。

但是在 中`foo1()`，这是在`?:`操作符部分完成的，避免了不需要的赋值操作。我想知道`foo()`或中的代码`foo1()`是否经过优化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:45:33.860

如果不进行优化，您会`copyFlag`以编写 . 的方式设置两次，而`if`使用`?`. 等效于您的`?:`使用`if`将是：

```
int copyFlag;
if ( nFlag == thumbImage ) 
    copyFlag = iconImage;
else
    copyFlag = nFlag; 
```

通过优化，我希望所有三个变体都生成或多或少相同的代码。

一般来说，你不应该担心这种事情。最重要的是，我不会担心汇编程序。在这两种情况下都可以使用相同的优化。（可以在没有任何分支指令的情况下编写它；这是否是最佳解决方案由编译器决定，而不是您。）优化器会处理它。您应该尽可能以最清晰的方式编写代码——在这种情况下，这意味着三元运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:48:30.173

`if`在一个体面的编译器上，和之间的效率绝对没有区别`?:`。

这两种做同一件事的方式之间的唯一区别是`?:`包含微妙的提升规则。第二个和第三个表达式相互平衡，就好像它们是同一操作的操作数一样。如果你不走运，这可能会导致错误，但它的效率可能不会`?:`低于`if`.

例如，如果你写`int x = 1;`then`x ? 1 : 1.0f;`那么结果类型是`float`，这可能是出乎意料的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T08:49:04.190

对于*x86*系列，关闭优化的编译器将转换为*x86*`if... else...`中带有跳转指令的分支，并转换为*x86*`...?...:...`中的条件移动指令。

 *如果您像在代码中一样直接编写条件，那么好的编译器会将分支优化为条件移动。

就性能而言，如果易于预测，分支会更好，如果难以预测，则条件移动会更好。原因是如果预测不正确，分支指令会在现代处理器中导致显着的分支预测损失，而无论条件是否成立，条件移动指令的延迟都会稍慢一些。

[在此处](https://stackoverflow.com/a/11237235/866732)查看我的答案以获取详细说明：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T09:15:41.390

我 100% 确信任何现代编译器都会将这两者优化为相同的东西。当然，在这个特定的示例中，编译器可能会删除 and 的所有代码`foo`，`foo1`因为这些代码在此示例中没有任何作用，除非您关闭优化 - 这不是一个公平的比较。您需要一个更复杂的示例，其中编译器无法确定输入并需要代码的结果。

现在，如果我对这段代码所做的事情是正确的——即复制某种图像——那么我希望函数开头的 if 语句在这个函数中花费的总时间非常少。

与性能一样，首先分析您的代码并识别“热点”，然后集中精力使热点运行得更快。我很确信这不是一个热点。因此，您正在尝试优化不会对您的代码产生重大影响的东西。

此外，不要相信互联网上的某个人会告诉您哪个版本的代码更快 - 在不同的配置下运行它，然后做出决定。最好在具有不同硬件（在这种特殊情况下是不同制造商的处理器）的多台机器上 - 除非它是一个只需要在您当前的计算机上快速运行的爱好项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T11:13:22.697

仅当您关闭优化时，才可能存在性能差异。现代编译器应该平等地优化这两个版本。

选择其中一种解决方案的原因可能是：

1.  可读性。但是，个人偏好可能会有所不同。
2.  调试版本性能。但是，差异应该很小。
3.  易于调试。不可能在三元运算符的某个分支处设置断点（除非您进入汇编语言级别，否则有时可以）。
4.  覆盖分析。如果您编写测试并收集覆盖分析信息，`if`则语句可以让您了解两个分支是否都经过测试。三元运算符没有。在程序运行期间根本无法评估其中一个表达式，但代码覆盖率工具会显示所有内容都被覆盖。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T10:10:56.780

所有其他答案，表明一个体面的编译器不会关心，并且除非您看到此函数在分析器中弹出作为性能瓶颈，否则您可能不应该担心，是完全正确的。

但是...如果您在某些架构上分支很昂贵，并且不存在条件移动，或者您的编译器真的很糟糕...您可以将原始版本与以下内容进行比较：

```
void foo( int nFlag ){
    int CopyFlag = ((nFlag & 2) << 1) + 1;
    // Rest of code... 
```

显然，这需要有很多警告（它很丑陋、hacky、不可维护等）......不过它会并行化！

然而，我真正得到的是，与其担心两种相似语言结构的确切代码生成，你应该（在确定你甚至有性能问题之后）看看算法本身，以及它是否可以更改或更换，以完全避免您遇到的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-28T09:01:35.450

理论上不应该有任何区别，理论上无所不知的优化器会将其优化为相同的生成代码。

在实践中，我知道 amd64 上至少某些版本的 gcc 将生成一个分支`if`并使用该`cmov`指令，`:?`而不管优化级别和标志如何。听起来像是一件小事，但在代码库中，我在一个与此类似的构造上测试了它，该构造用于一种锁定更改，在宏基准测试中`if`减少`:?`了 10% 的 cpu 使用率。

当然，您的里程可能会因编译器、编译器版本、标志和其他您无法控制的因素而有所不同。所以测试你的编译器，看看它是否值得优化。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-28T09:14:11.637

使用优化编译器，您应该看不到任何差异。只需使用更具可读性的内容。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-28T08:41:30.040

这取决于编译器。一些编译器会优化这两个语句并从中生成相同的汇编代码。

顺便说一句，为此使用最快的解决方案的优势非常小，不值得麻烦。如果您调用此代码来设置图像的类型，那么您很可能会在某处使用该图像（即使只是更改图像类型而不显示它们），这比在一个额外的汇编指令中花费更多的 CPU**周期**`if`或`?:`声明。主要使用三元运算符编写代码`?:`可能会使开发和维护更加困难，而且不值得付出努力。

编辑：性能的差异来自您在`foo`when `nFlag`is执行两项任务的事实`THUMB_IMAGE`。以下`foo2`在性能上应该更接近`foo1`.

```
void foo2( int nFlag ){
   int CopyFlag;
   if( nFlag == THUMB_IMAGE )
       CopyFlag = ICON_IMAGE; // Setting THUMB and ICON images to same level
   else
       CopyFlag = nFlag;
   // Executing rest of the code
} 
```

性能差异可能来自编译器不是为了优化赋值和`if`将同一变量赋值到语句中的`if-else`语句（例如 Sun/Oracle Java 编译器这样做），或者编译器可能已被指示不要优化代码（通过编译标志/参数）。*

# javascript - 使用struts 2 超链接标签调用javascript 函数？

> ID：15130845
> 
> 赞同：3
> 
> 时间：2013-02-28T08:31:49.883
> 
> 标签：javascript, struts2

我的 jsp 中有以下代码片段，但它不调用 addCustomer 函数。

```
 <s:a href="javascript:addCustomer()">Add Customer</s:a> 
```

我在使用 s:a 标签时遗漏了什么吗？

对应s:a标签生成的html代码是

```
<a href="javascript:addCustomer();" tabindex="-1">Add Customer</a> 
```

虽然当我使用下面的代码片段时，javascript函数被执行。我没有得到使用 s:a 标签的问题？

```
<a href="#" onclick = "addCustomer();">Add Custome</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:38:26.390

试试这三个..

1.

```
<s:url value="http://www.mkking.com" var="mkyongURL" />
<s:a href="%{mkyongURL}">J2EE web development tutorials</s:a> 
```

2.

```
<s:a href="http://www.google.com">Google search engine</s:a> 
```

3.

```
<s:url action="aTagaAction.action" var="aURL" />
<s:a href="%{aURL}">aTagAction</s:a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:51:31.633

试试这个..

```
<a href="#" onclick = "myfunction(12);">Click</a> 
```

javascript函数

```
function myfunction(var1)
        {
                var params =var1; //values for passing to struts if any
                var resultStringX = $.ajax({
                type: "POST",
                url:"mystruts2action.action", // struts2 action call
                data: params,
                async: false
                }).responseText;
                resultStringX=$.trim(resultStringX);  // the returning result will be stored in resultStringX variable
        } 
```

# c++ - C++ 函数指针错误

> ID：15130847
> 
> 赞同：0
> 
> 时间：2013-02-28T08:31:53.687
> 
> 标签：c++, function, pointers

我正在尝试使源代码正常工作

```
extern "C" {
    typedef LRESULT (__stdcall *NRI_PM_CALLBACK)(WPARAM, LPARAM);
}

LRESULT OnPaymentManagerMessage(WPARAM wParam, LPARAM lParam)
{
    int type = (wParam >> 4) & 0x0F;
    int device = wParam & 0x0F;
    //cstr.Format("** Msg **[ %d %d %d ]", type, device, lParam);
    //handle message here
    return lParam;
}

NRI_PM_CALLBACK callback = &OnPaymentManagerMessage; //error on this line 
```

错误：“LRESULT (*)(WPARAM wParam, LPARAM lParam)”类型的值不能用于初始化“NRI_PM_CALLBACK”类型的实体

我在 Visual Studio Express 2012 中运行它

任何想法为什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:35:49.657

做`OnPaymentManagerMessage()`一个`__stdcall`函数：

```
LRESULT __stdcall OnPaymentManagerMessage(WPARAM wParam, LPARAM lParam) 
/* ... */ 
```

`__cdecl`是编译器的默认值（尽管编译器选项可以改变它）。

# java - 在多线程 RMI 架构中使用 JPA

> ID：15130848
> 
> 赞同：3
> 
> 时间：2013-02-28T08:31:54.107
> 
> 标签：java, spring, jpa, rmi

我正在为不同的 Java 客户端设计一个基于 RMI 的数据服务服务器。客户端使用 RMI 远程执行 CRUD 操作，我计划将 JPA 用于服务器的 ORM。

据我所知，一些 RMI 请求实现是线程安全的，所以我打算注入`EntityManager`using `@PersistenceContext`. 我有两个问题。

1.  spring 是否使`EntityManager`注入的线程安全，或者我应该在必要时注入`EntityManagerFactory`和调用`createEntityManager`？
2.  当方法代码保证是线程安全的时，我是否还必须确保同步？

根据 RMI 规范

1.  当一个远程请求进来时，它立即被解组为一个封装了方法调用的请求对象。此请求对象是实现 RemoteCall 接口的类的实例，它具有对套接字输出流的引用。这意味着，尽管 RMI 共享套接字，但一个套接字一次仅用于一个远程方法调用。
2.  从套接字接收请求的线程找到方法调用的预期远程对象，找到与该远程对象关联的框架，并调用该框架的 dispatch() 方法。dispatch 方法具有以下签名：
3.  公共无效调度（java.rmi.Remote obj，java.rmi.server.RemoteCall 调用，int opnum，长哈希）抛出 java.lang.Exception
4.  骨架的 dispatch() 方法调用服务器上的正确方法。这是您编写的代码实际执行的地方。
5.  服务器方法返回一个值，该值最终通过接收原始请求的套接字传回。

我认为流程定义表明我们可以在 RMI 环境中创建许多独立的代码调用堆栈。因此，RMI 要求代码是线程安全的，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:26:34.490

**当您通过 RMI 导出对象时，它必须处理多个线程，即使您只有一个用于该对象的客户端**。原因如下：创建远程对象的线程与处理远程调用的线程肯定不同。

因此，如果您`EntityManager`在创建远程对象期间注入 ，它将被注入到与远程调用期间使用的线程不同的线程上。但是，`EntityManager`只能在单个线程上使用，更具体地说，只能在创建它的线程上使用。例如，使用 Hibernate，`EntityManager`除非是这种情况，否则您将无法工作。

所以你必须使用 an`EntityManagerFactory`来创建`EntityManager`按需。为了尽量减少`EntityManager`创作，您可以`EntityManager`将`ThreadLocal`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:11:30.560

> RMI 要求代码是线程安全的，对吗？

奇怪的是，您所问的问题已经在评论中得到了回答，但是无论您在上面引用了什么，[RMI 规范 #3.2](http://docs.oracle.com/javase/7/docs/platform/rmi/spec/rmi-arch3.html)中都有一个更短的部分准确地说明了这一点：

“远程对象实现需要确保其实现是线程安全的。”

# android - onReceive 被多次调用

> ID：15130849
> 
> 赞同：3
> 
> 时间：2013-02-28T08:31:54.913
> 
> 标签：android, broadcastreceiver

我读了这篇文章：[广播接收器 onReceive() 被多次调用](https://stackoverflow.com/questions/7479101/broadcast-receiver-onreceive-getting-called-multiple-times)

但我没有找到需要的答案。

我创建了一个小型实用程序函数，它覆盖 BroadcastReceiver 的 onReceive() 并根据某些条件拒绝来电（工作正常）。

现在，一旦所有条件都匹配并且我拒绝呼叫，我想将该号码存储在数据库中（这又是一项简单的任务）。拒接电话后，我想将号码保存在数据库中。但是在日志中，我观察到一旦有来电，onReceive 函数就会被多次调用。如果是这种情况，我不希望我的数据库中有多个条目。

有什么方法可以只调用一次 onReceive() 吗？或任何解决方法？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T08:41:23.003

您的接收器将被呼叫三种不同的状态。在振铃、挂机和空闲状态。

检查 onReceive 中的电话状态。如果它的状态正在响铃，您可能希望中断呼叫并存储在 db 中。

```
public void onReceive(final Context context, Intent intent) {
   Bundle bundle = intent.getExtras();

    if (null == bundle) {
        return;
    }

    String state = bundle.getString(TelephonyManager.EXTRA_STATE);

    if (TelephonyManager.EXTRA_STATE_RINGING.equalsIgnoreCase(state)) {
    //cut the call and store in db
    return;
    }

    } 
    if(TelephonyManager.EXTRA_STATE_IDLE.equalsIgnoreCase(state)) {
    return;
    }
     if(TelephonyManager.EXTRA_STATE_OFFHOOK.equalsIgnoreCase(state)){
     return;
     }

   } 
```

# svg - SVG 过滤器 feGaussianBlur 需要提升

> ID：15130850
> 
> 赞同：3
> 
> 时间：2013-02-28T08:32:02.980
> 
> 标签：svg, svg-filters

我想要一个带有白色外发光的黑色文本，以便在彩色地图上可读。这是我以前做的：

```
<defs>
  <filter id="label-glow">
    <feGaussianBlur stdDeviation="1" />
  </filter>
</defs>
<text stroke="white" stroke-width="5" filter="url(#label-glow)">Harald's Repose</text>
<text>Harald's Repose</text> 
```

我想避免重复文本元素，所以我决定使用 feFlood 创建一个白色矩形，使用 feComposite 创建文本的白色副本，使用 feGaussianBlur 创建模糊，然后使用另一个 feComposite 在顶部添加原始文本这一切。不幸的是，由此产生的外部辉光非常微弱。我发现重复几次 feComposite 会有所帮助。我确信有更好的解决方案。我究竟做错了什么？

```
<defs>
  <filter id="label-glow">
<feFlood flood-color="white"/>
<feComposite in2="SourceGraphic" operator="in"/>
<feGaussianBlur stdDeviation="2"/>
<feComposite operator="over"/>
<feComposite operator="over"/>
<feComposite operator="over"/>
<feComposite operator="over"/>
<feComposite in="SourceGraphic"/>
  </filter>
</defs>
<text filter="url(#label-glow)">Harald's Repose</text> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:55:01.697

一种更优雅的方法是使用 alpha 通道上的 feComponentTransfer 来提高发光的不透明度。

```
<filter id="label-glow">
<feFlood flood-color="white"/>
<feComposite in2="SourceGraphic" operator="in"/>
<feGaussianBlur stdDeviation="2"/>
<feComponentTransfer>
    <feFuncA type="gamma" exponent=".5" amplitude="2"/>
      </feComponentTransfer>
<feComposite in="SourceGraphic"/>
  </filter> 
```

您可以通过更改幅度来调整白色的平均强度，您可以通过更改指数来调整强度衰减。

# backbone.js - this.$el 指向容器元素

> ID：15130851
> 
> 赞同：0
> 
> 时间：2013-02-28T08:32:09.933
> 
> 标签：backbone.js

我有两种观点，`ListView`和`ItemView`。在以下`ItemView`位置填充：`render``ListView`

```
this.items.each(function(model, index) {
    new ItemView({
        item: model,
    });
}); 
```

所有`ItemView`共享同一个容器`el`；是 a `<tbody>`，其模板是`<tr>`.

当触发事件时，它们指向包含元素，从而导致例如`save`触发保存所有`ItemView`而不是仅被单击的那个。有没有办法规避这种行为，还是有更好的做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:47:02.217

你可以试试这个

```
ListView = Backbone.View.extend({
        events : {
            'click tr' : function(e){
                       this.items.each(function(model){
                       model.trigger('save');
                  });
             }
        }
}) 
```

然后在项目视图中绑定保存事件。

```
this.model.on('save', function(){
  //your code here
}); 
```

# oauth-2.0 - google-api-client gem，fetch_access_token！- “无效的请求”

> ID：15130852
> 
> 赞同：1
> 
> 时间：2013-02-28T08:32:18.003
> 
> 标签：oauth-2.0, google-calendar-api, google-oauth, google-api-client, google-api-ruby-client

以下是我想要做的 -

```
client = Google::APIClient.new
client.authorization.client_id = 'XXXX'
client.authorization.client_secret = 'XXXXX'
client.authorization.scope = 'https://www.googleapis.com/auth/calendar'
client.authorization.redirect_uri = 'http://www.aaaaa.com/'
calendar = client.discovered_api('calendar', 'v3') 
```

为了让 access_token 发出进一步的请求，我调用了 client.authorization.fetch_access_token！

我得到的回应是：

```
Signet::AuthorizationError: Authorization failed.  Server message:
{
  "error" : "invalid_request"
}
from D:/main/tools/jruby/lib/ruby/gems/1.8/gems/signet-0.4.4/lib/signet/oauth_2/client.rb:865:in `fetch_access_token' 
```

后来我更改了一些更改并将grant_type设置为密码并提供了用户名和密码。

```
client.authorization.grant_type = 'password'
client.authorization.username = 'aaaaa'
client.authorization.password = 'aaaaa' 
```

仍然面临同样的问题。

文档没有太大帮助。有什么我缺少的设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:26:10.810

你可能已经想通了，但我想我知道问题出在哪里。您必须首先（在浏览器中）导航到`client.authorization.authorization_uri`，在此处您将被要求授予对 Google 帐户的访问权限。之后，您将被重定向到您提供的代码`client.authorization.redirect_uri`中`http://www.aaaaa.com/`的 。URL 上会附加一个授权码：`http://www.aaaaa.com?code=<code here>`。您必须设置`client.authorization.code`为等于该授权码。完成此操作后，您应该能够调用`client.authorization.fetch_access_token!`API，然后对其进行调用。

# cakephp - 如何在 Cakephp 中回显和播放视频

> ID：15130854
> 
> 赞同：0
> 
> 时间：2013-02-28T08:32:21.023
> 
> 标签：cakephp

我有一个应用程序，用户可以上传图像，并且应该能够回显和播放视频。我的上传功能工作正常，但我现在面临的挑战是回显和播放视频。这是我上传文件的方式

```
function uploadFile() {
    $file = $this->data['CpdVideo']['file'];
    if ($file['error'] === UPLOAD_ERR_OK) {
        $id = String::uuid();
        if (move_uploaded_file($file['tmp_name'], WWW_ROOT . 'files/videos/' . $file['name'])) {
            $this->request->data['CpdVideo']['filename'] = $file['name'];
            $this->request->data['CpdVideo']['filesize'] = $file['size'];
            $this->request->data['CpdVideo']['filemime'] = $file['type'];
            return true;
        }
    }
    return false;
} 
```

这是我保存视频的方式

```
if ($this->uploadFile() && $this->CpdVideo->save($this->data)) 
```

这就是我在 view.ctp 中回显和播放视频的方式。请不要编辑此代码，现在这对我有用

```
<object width="100" height="100">
<param name="movie" value="<?php echo $this->Html->url('/files/videos/'. $cpdVideo['CpdVideo']['filename'])?>">
<embed src="<?php echo $this->Html->url('/files/videos/'. $cpdVideo['CpdVideo']['filename'])?>" width="100" height="100">
</embed>
</object> 
```

如果有人可以帮助我，那就太棒了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:01:26.777

尝试修改这一行

```
<?php echo $this->Html->media('files/videos'. $cpdVideo['CpdVideo']['filename'], array('fullBase' => true)); 
```

至

```
<?php echo $this->Html->media('files/videos'. $cpdVideo['CpdVideo']['filename'], array('fullBase' => true, type="audio/ogg")); 
```

其中 ogg 是该文件的文件类型。问题是如果没有该文件类型，那么某些浏览器会将其从您的 html 中删除（如果您查看页面源代码，您可能会发现您的音频标签坐在那里）。

我不知道 CakePHP 是否提供了某种猜测文件类型的方法，但值得研究一下。我希望我已经为您指明了正确的方向。

# c# - 如何获得不具有双值的 Arraylist？

> ID：15130858
> 
> 赞同：0
> 
> 时间：2013-02-28T08:32:27.443
> 
> 标签：c#, asp.net, arraylist, active-directory, directorysearcher

我想从 Active Directory 中获取 Departmentlist，为此我使用 Directoryentry 和 DirectorySearcher 类。我得到了部门列表，但是如何删除这个列表中的双值。

例如我现在的清单：

```
it
it
it
vg
per
vg
... 
```

我只想要列表中的其中一个值：

```
it
vg
per
...(other departments) 
```

我想将此列表用于 dropDownlist 列表。

我的代码：

```
public static void GetAllDepartments(string domaincontroller) 
        {
            ArrayList list = new ArrayList();

            int Counter = 0;

            string filter = "(&(objectClass=user)(objectCategory=user)(!userAccountControl:1.2.840.113556.1.4.803:=2)(sn=*)(|(telephoneNumber=*)(mail=*))(cn=*)(l=*))";

            List<User> result = new List<User>();

            DirectoryEntry Entry = new DirectoryEntry(domaincontroller);

            DirectorySearcher Searcher = new DirectorySearcher(Entry, filter);

            foreach (SearchResult usr in Searcher.FindAll())
            {
                result.Add(new User()
                {
                    department = GetLdapProperty(usr, "Department")

                });

                Counter++;
            }

            for (int i = 0; i < Counter; i++)
            {

                list.Add(result[i].department);

            }
        } 
```

如何在 Arraylist 中只显示一个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:36:03.727

首先，我建议不要使用 ArrayList，而是使用[强类型列表](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)。
然后，使用该`Distinct()`方法仅获取唯一值列表（无重复值）。

例如：

```
List<String> list = new List();

....

 for (int i = 0; i < Counter; i++)
 {
     list.Add(result[i].department.ToString());
 }

 var noDuplicates = list.Distinct(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:36:11.780

尝试`Distinct()`扩展`System.Linq`：

```
list = list.Distinct(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:37:59.397

使用[**Enumerable.Distinct Method**](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T08:42:51.177

您还可以使用[Exists](http://msdn.microsoft.com/en-us/library/bfed8bca.aspx)子句查看该元素是否已存在于列表中。

```
using System.Linq;

for (int i = 0; i < Counter; i++)
{
   bool deptExists = list.Exists(ele => ele == result[i].department);

   if(!deptExists){
    list.Add(result[i].department);
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T08:43:09.547

使用 HashSet 并仅插入不重复的值。

```
HashSet<string> list = new HashSet<string>();

...

for (int i = 0; i < Counter; i++)
{
   string dep = result[i].department.ToString();

   // true if dep was added, false if not. No exception at this point.
   list.Add(dep);
} 
```

# iphone - 从 Settings.bundle 中的 MultiValueSpecifier 首选项访问标题和值

> ID：15130862
> 
> 赞同：1
> 
> 时间：2013-02-28T08:32:34.353
> 
> 标签：iphone, ios, objective-c, cocoa-touch, plist

`Root.plist`作为我的应用程序的一部分，我的文件中有以下设置`Settings.bundle`：

```
<dict>
    <key>PreferenceSpecifiers</key>
    <array>
        <dict>
            <key>Type</key>
            <string>PSMultiValueSpecifier</string>
            <key>Title</key>
            <string>Title</string>
            <key>Key</key>
            <string>my_key</string>
            <key>DefaultValue</key>
            <string>default_value</string>
            <key>Titles</key>
            <array>
                <string>Default Value</string>
                <string>First</string>
                <string>Second</string>
                <string>Third</string>
                <string>Fourth</string>
            </array>
            <key>Values</key>
            <array>
                <string>default_value</string>
                <string>one</string>
                <string>two</string>
                <string>three</string>
                <string>four</string>
            </array>
        </dict>
    </array>
    <key>StringsTable</key>
    <string>Root</string>
</dict> 
```

我想访问`Titles`and`Values`以便我可以有效地确定`Title`特定偏好的（即字符串表示），并将文本视图的文本分配给该值。

例如，

```
*defaultValue = [NSUserDefaults valueForKey:@"my_key"]; 
// let's say it's 'one'
textView setText:[[self getTitleForValue:defaultValue]]; 
// i want getTitleForValue to return 'First' 
```

我必须自己解析`Root.plist`文件吗？然后手动构建/协调标题和值之间的映射？

设置列表足够长，我不希望在查找后不必编写 if 语句`NSUserDefaults`，所以我肯定想找到一个允许我查找它的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:40:06.157

**对于标题：**

```
NSLog(@"%@",[[[[yourdic objectForKey:@"PreferenceSpecifiers"] objectAtindex:0] objectForKey:@"Titles"] objectAtIndex:0]); 
```

//或者

```
NSLog(@"%@",[[[yourdic objectForKey:@"PreferenceSpecifiers"] objectAtindex:0] objectForKey:@"Titles"]); 
```

**对于价值：**

```
NSLog(@"%@",[[[[yourdic objectForKey:@"PreferenceSpecifiers"] objectAtindex:0] objectForKey:@"Values"] objectAtIndex:0]); 
```

//或者

```
NSLog(@"%@",[[[yourdic objectForKey:@"PreferenceSpecifiers"] objectAtindex:0] objectForKey:@"Values"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:31:36.907

对于那些感兴趣的人，这就是我最终得到的

```
NSString *bPath = [[NSBundle mainBundle] bundlePath];
NSString *settingsPath = [bPath stringByAppendingPathComponent:@"Settings.bundle"];
NSString *plistFile = [settingsPath stringByAppendingPathComponent:@"Root.plist"];
NSDictionary *settingsDictionary = [NSDictionary dictionaryWithContentsOfFile:plistFile];
NSArray *preferencesArray = [settingsDictionary objectForKey:@"PreferenceSpecifiers"];
NSArray *titles = [[preferencesArray objectAtIndex:0] objectForKey:@"Titles"];
NSArray *values = [[preferencesArray objectAtIndex:0] objectForKey:@"Values"];
int index = [values indexOfObject:currentValue];
if( index > -1 ){
    return [titles objectAtIndex:index];
}
return @"Default Title"; 
```

# maven - 如何使“Make Project”菜单在 IntelliJ 中运行 maven 目标？

> ID：15130863
> 
> 赞同：2
> 
> 时间：2013-02-28T08:32:34.217
> 
> 标签：maven, intellij-idea, maven-3

现在我们的 Maven Java 项目在 IntelliJ 中产生了很多错误，但 maven 编译它们很好。我们的 IntelliJ 项目是从 pom.xml 文件中导入的。所以我想通过使用 maven 目标`Make Project`在`Build`菜单中运行而不是内置的来消除这些错误。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T23:18:07.807

每次将 pom.xml 文件修改为 IntelliJ 时，通常会出现一个信息框，询问您是否要重新导入依赖项。单击它，您的错误将消失。

# ruby-on-rails - Heroku 上的键/值缓存何时值得？

> ID：15130866
> 
> 赞同：2
> 
> 时间：2013-02-28T08:32:38.610
> 
> 标签：ruby-on-rails, performance, caching, heroku

**背景：**

我有一个 Web 服务，它接受 1 到 20 个对象的输入，然后对每个对象执行大约需要 100-300 毫秒的操作。该操作的结果平均有效期为一小时，输出是字符串和整数的哈希。平均请求有 5 个对象，因此响应时间大约为 1000 毫秒。在服务获得牵引力之前，我预计缓存命中率会非常低——我们暂时称其为 10% 的命中率。

我的应用程序托管在 Heroku 上，出于这个问题的目的，我不想移动它。

**我试过的**

我从 IronCache 的免费产品开始（通过 Heroku 插件），并做了一些非常粗略的测试。简单对象的 put() 和 get() 请求大约需要 20-40 毫秒。不支持批处理操作，因此假设 100% 缓存未命中，这将为我的响应中每个对象增加 20-40 毫秒。在我平均 5 个对象的情况下，大约多出 150 毫秒。

IronCache 不支持批处理操作，但这似乎可以解决我的问题。

**我的问题**

鉴于此配置文件，是否值得在 Heroku 上使用托管缓存（键/值）存储？如果是这样，是哪个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:04:06.597

我选择了 MemCachier，这是 Heroku 的一个附加组件，它提供 25MB 的免费层。他们使用 Dalli 作为他们的 Ruby 库，它支持 get_multi 和一个 multi 函数，它接受一个块并将发送延迟到块的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:03:29.150

如果批处理操作对您来说值得缓存，您应该使用 redis，它支持它们。

# jquery - jQuery POST 请求 - 返回 JSON

> ID：15130868
> 
> 赞同：6
> 
> 时间：2013-02-28T08:32:45.720
> 
> 标签：jquery, ajax, json, post

我想使用 jQuery`$.ajax`进行 POST 调用，发送一些信息（通过 POST，例如：`page.aspx?var1=value`....）。

但我也希望 jQuery 处理服务正在返回 JSON，以便我返回一个 JSON 对象。

```
var data = {name: _name, ...};

var request = $.ajax({
    url: url,
    type: "post",
    data: data,
    //dataType: "json"
}); 
```

只要我使用`dataType: "json"`，它允许我接收 JSON 对象，我就会在请求中收到一个 parseerror ！

希望你能帮我解决这个问题！

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T08:48:22.333

从请求的网址中，您必须以 JSON 格式制作数据，例如

```
echo json_encode($response); 
```

然后您将在成功函数中获得响应 JSON，如下所示：

```
 $.ajax({
            type:"POST",
            url: "your_url",
            data:data,
            success: function (response){
                var arr = $.parseJSON(response);

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:45:59.107

首先 post 请求没有在 URL 之后附加参数。您指定的格式用于 GET 请求。您可以通过以下方式实现相同的目标：

```
$.post(
'/yourURLL',
{'data' : dataJson},
function(data){
    handleIncomingJSON(data);
}).error(function(data, textStatus){handleUnsuccessfulSave(data, textStatus)}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:36:27.110

确保您的服务器端脚本返回编码的 json。

在 php 中使用`json_encode()`.

```
echo json_encode($response); 
```

也设置`dataType : 'json'`在`$.ajax`通话中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-04T08:36:33.350

根据[jQuery`$.post`文档](http://api.jquery.com/jQuery.post/#jqxhr-object)，我强烈建议最初实现所有主要的回调方法（`done`, `fail`, `always`），这样如果您的 JSON 响应出现错误，它们就不会被隐藏：

```
var jqxhr = $.post( 
    "example.php", 
    function(response) {var arr = JSON.parse(response);},
    'json'
)
.done(function() {console.log( "second success" );})
.fail(function() {console.log( "error" );})
.always(function() {console.log( "finished" );}); 
```

# ruby - 在 ERB 模板中对 YAML 输出进行排序

> ID：15130872
> 
> 赞同：1
> 
> 时间：2013-02-28T08:32:52.793
> 
> 标签：ruby, types, yaml, erb, puppet

在 Puppet 使用的 ERB 模板中，我试图对哈希的 YAML 输出进行排序，以确保它始终是相同的输出。

这是我到目前为止所拥有的（在`mytest/templates/hash.erb`）：

```
<%=
  class MyHash < Hash
    def to_yaml( opts = {} )
      YAML::quick_emit( self, opts ) do |out|
        out.map( taguri, to_yaml_style ) do |map|
          keys.sort.each do |k|
            v = self[k]
            map.add( k, v )
          end
        end
      end
    end
  end
  myScope = scope.to_hash.reject{|k,v| k.to_s =~ /(uptime|timestamp|free)/}
  MyHash[myScope].to_yaml
-%> 
```

产生：

```
$ puppet apply -e 'include mytest' --modulepath .
Failed to parse template mytest/hash.erb:
  Filepath: /usr/lib/ruby/1.8/yaml.rb
  Line: 391
  Detail: wrong argument type String (expected Data)
 at /home/rpinson/bas/puppet/mytest/manifests/init.pp:3 on node foo.example.com 
```

这是的内容`mytest/manifests/init.pp`：

```
class mytest {
  notify { 'toto':
    message => template('mytest/hash.erb'),
  }
} 
```

我似乎无法理解这种类型的 Data 来自哪里，以及如何正确转换参数以使其正常工作……</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T17:30:40.630

It turns out, the source of problem is [ZAML](https://github.com/hallettj/zaml), YAML replacement which `Puppet` uses for performance purposes.

It can be proved by testing this `erb`-template without `Puppet`.

I'm pretty sure it will work.

I'm investigating to allow to work them together.

UPDATE:

```
ZAML.dump(MyHash[myScope]) # instead of MyHash[myScope].to_yaml 
```

This may heal problem, at least it does my one that really similar.

# c# - 未找到 WCF 端点

> ID：15130879
> 
> 赞同：5
> 
> 时间：2013-02-28T08:33:32.120
> 
> 标签：c#, wcf, windows-phone-7

我正在按照书中的教程为 Windows Phone 实现推送通知。这是服务的标记：

```
<%@ ServiceHost Language="C#" Debug="true" Service="Service.PushService" CodeBehind="PushService.svc.cs" Factory="System.ServiceModel.Activation.WebServiceHostFactory" %> 
```

如您所见，添加了一个工厂，尽管我不太了解它的用途。运行服务时，出现`"endpoint not found"`错误。当我从标记中删除工厂时，错误消失了，但我得到了一个空白页面。

知道什么可能导致此错误或如何解决？如果您需要更多代码，请告诉我。

谢谢

编辑：我的 web.config：

```
<?xml version="1.0"?>
<configuration>

  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <protocolMapping>
        <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>    
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T10:09:31.400

您的 web.config 中缺少端点配置。

将此添加到您的 web.config：

```
<system.serviceModel>
  <services>
    <service name="Service.PushService">
      <endpoint address="" binding="basicHttpsBinding"
                contract="Service.IPushService" />
    </service>
  </services>
</system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-20T13:20:57.220

对于那些在Service.svc中没有实现IService中没有定义它的方法的人会导致同样的异常。

这被遗忘了

```
[OperationContract]
 string CheckHMAC(string hMac); 
```

但实施

```
[WebInvoke(Method = "GET", UriTemplate = "/CheckHMAC/{hMac}")]
public string CheckHMAC(string hMac)
{//} 
```

# json - 带有 JSON 的 JsTree 卡在加载中

> ID：15130885
> 
> 赞同：3
> 
> 时间：2013-02-28T08:33:59.493
> 
> 标签：json, jstree

我正在使用 JSON 来显示 JsTree。JSON 正在通过递归函数构建为字符串。现在，我对较小/不太复杂的树进行了一些测试，并让它工作。我使用 JSONLint 检查有效的 JSON 并最终得到正确的语法。现在，当我尝试显示预期的大树时，它只是卡在加载 .gif 上（这曾经是因为 JSON 不正确），但在 JSONLint 上检查后它是正确的。

这有什么可能的原因吗？我怀疑这棵树可能太大或任何东西。

递归函数：

```
public void getViewTree(ref string tree, Int32? id = null)
        {
            var topNodes = (from items in db.AssessmentViewItems
                           select items).Take(1);

            #region getChildren via LINQ
            if (id == null)
            {
                topNodes = from items in db.AssessmentViewItems
                           where items.ParentAssessmentViewItemID == null
                           && items.AssessmentViewID == 17
                           select items;
            }
            else
            {

                topNodes = from items in db.AssessmentViewItems
                           where items.ParentAssessmentViewItemID == id
                           && items.AssessmentViewID == 17
                           select items;
            } 
            #endregion

            int counter = 1;
            int max = (int)topNodes.Count();
            foreach (var node in topNodes)
            {

                if (node.ParentAssessmentViewItemID == null)
                {
                    {\"id\":\"532topNode\",\"selected\":true},\"children\":[null,
                    tree += "{\"data\":\"" + node.Title.Trim().Replace("\"","").Replace("("," ").Replace(":"," ").Replace("-"," ").Replace("&","and").Replace("/"," ").Replace("\\"," ").Replace(","," ").Replace("•", " ") + "\",\"attr\":{\"id\":\"" + node.AssessmentViewItemID + "\", \"selected\":true}, \"children\":[";   

                    getViewTree(ref tree, node.AssessmentViewItemID);
                    tree += "}]";
                    if (counter < max)
                    {
                        tree += "},";
                    }
                }
                else if (node.Type.Equals("Legal Topic"))
                {
                    tree += "{\"data\":\"" + node.Title.Trim().Replace("\"", "").Replace("(", " ").Replace(":", " ").Replace("-", " ").Replace("&", "and").Replace("/", " ").Replace("\\", " ").Replace(",", " ").Replace("•", " ") + "\",\"attr\":{\"id\":\"" + node.AssessmentViewItemID + "\", \"selected\":true}";

                    if (counter < max)
                    {
                        tree += "},";
                    }

                }
                else
                {
                    var topNodes1 = from items in db.AssessmentViewItems
                               where items.ParentAssessmentViewItemID == node.AssessmentViewItemID
                               && items.AssessmentViewID == 17
                               select items;

                    if (topNodes1.Count() > 0)
                    {

                        tree += "{\"data\":\"" + node.Title.Trim().Replace("\"", "").Replace("(", " ").Replace(":", " ").Replace("-", " ").Replace("&", "and").Replace("/", " ").Replace("\\", " ").Replace(",", " ").Replace("•", " ") + "\",\"attr\":{\"id\":\"" + node.AssessmentViewItemID + "\", \"selected\":true}, \"children\":[";
                    }
                    else
                    {
                        tree += "{\"data\":\"" + node.Title.Trim().Replace("\"", "").Replace("(", " ").Replace(":", " ").Replace("-", " ").Replace("&", "and").Replace("/", " ").Replace("\\", " ").Replace(",", " ").Replace("•", " ") + "\",\"attr\":{\"id\":\"" + node.AssessmentViewItemID + "\", \"selected\":true}";
                    }

                    getViewTree(ref tree, node.AssessmentViewItemID);

                    if (topNodes1.Count() > 0)
                    {
                        tree += "}]";
                    }

                    if (counter < max)
                    {
                        tree += "}";
                        tree += ",";
                    }

                }

                counter++;
            }
        } 
```

JS：

```
$(function () {
    $("#demoTree").jstree({
        "json_data": {
            "data": treeModel
        },
        "plugins": ["themes", "json_data", "ui"],

    });
}); 
```

调用递归函数：

```
string tree = "[";

getViewTree(ref tree);

tree += "}]";

return View("About", "_Layout", tree); 
```

使用 Chrome 开发工具后，我从中得到的错误：

Uncaught SyntaxError: Unexpected token ILLEGAL (program):54 Uncaught 既没有提供数据也没有提供 ajax 设置。

我确实在 JSONLint 上检查了它的语法。没有这两个错误的小树生成良好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T13:42:50.723

使用 DevExpress 树解决了问题。完全相同的 JSON 字符串。

# zend-framework2 - Zend\Form 自定义 HTML 标记

> ID：15130886
> 
> 赞同：0
> 
> 时间：2013-02-28T08:33:59.907
> 
> 标签：zend-framework2, zend-form2

需要有关如何创建自定义 HTML 标记的教程（如 Zend 1 上的表单装饰器）。我想生成类似的东西：

```
<ul>
<li>
    <label class="required"><span>*</span> Username</label>
    <input id="username" name="username" type="text">
</li>
<li>
    <label class="required"><span>*</span> Password</label>
    <input id="password" name="password" type="password">
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:51:46.843

假设表单元素被命名为`username`and `password`，这里有一个示例可以提供所需的输出

```
<?php
// attributes to apply to label(s)
$labelAttr = array('class' => 'required');
// extra label content (assumes Username and Password are already present in the given elements)
$labelSpan = '<span>*</span> ';
// set the label attributes
$form->get('username')->setLabelAttributes($labelAttr);
$form->get('password')->setLabelAttributes($labelAttr);
?>

<ul>
<li>
    // use the formLabel helper, hand it the extra label content, and tell it to place the existing label after it
    <?php echo $this->formLabel($form->get('username'), $labelSpan, 'append');
    <?php echo $this->formInput($form->get('username');
</li>
<li>
    <?php echo $this->formLabel($form->get('password'), $labelSpan, 'append');
    <?php echo $this->formInput($form->get('password');
</li>
</ul> 
```

# ios - Apple Production iOS Push Services 证书不适用于应用分发

> ID：15130888
> 
> 赞同：1
> 
> 时间：2013-02-28T08:34:05.417
> 
> 标签：ios, objective-c, push, distribution

当我使用开发配置文件和开发推送证书时，推送通知工作正常。

但是，当我使用临时配置文件构建我的应用程序以便通过 testflightapp 进行分发时。

通过 testflightapp 安装我的应用程序的人没有收到任何推送通知。我还将推送认证更改为服务器的生产认证。

我不明白为什么推送通知不适用于我的 testflight 分发。

这是我的理解。如果有什么不对的地方请纠正我。

```
 Apple Development iOS Push Services Certification use for development. 
```

当应用程序使用开发配置文件构建时，推送通知应该可以工作。

```
 Apple Production iOS Push Services Certification use for production and distribution. 
```

当使用 adhoc 或 appstore 配置文件构建应用程序时，推送通知应该可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:37:34.287

开发和生产的设备令牌不同，您更改了吗？

# android - 如何从imageview获取全尺寸图像

> ID：15130889
> 
> 赞同：1
> 
> 时间：2013-02-28T08:34:13.033
> 
> 标签：android, bitmap, android-imageview, bitmapimage

我从手机的相机中捕获了一张图像`2592x1936`，将其转换为位图。我将它显示为我的图像视图`myImageVew.setImageBitmap(myBitmap);`

显示此位图后，我对此图像（在图像视图内）进行了一些操作，现在我使用

```
Bitmap bitmap;
// frmCaptureThis is the root framelayout (this contains my imageview)
View v1 = frmCaptureThis; 
v1.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(v1.getDrawingCache());
v1.setDrawingCacheEnabled(false);

saveImgToSDcard(bitmap); 
```

这是将我的图像保存到 SD 卡但不是`2592x1936`分辨率，它保存我的图像大小等于 imageView 大小（即 400X620）。我想以原始分辨率保存图像，即`2592x1936`

**编辑**

这是我通过意图拍摄图像的代码

```
// ////////// Capture Button Handler//////////////////
    btnCapture.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            ContentValues values = new ContentValues();
            values.put(MediaStore.Images.Media.TITLE, "New Picture");
            values.put(MediaStore.Images.Media.DESCRIPTION,
                    "From your Camera");

            imageUri = getActivity().getContentResolver().insert(
                    MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            intent.putExtra(MediaStore.EXTRA_SCREEN_ORIENTATION,
                    ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
            startActivityForResult(intent, REQUEST_OPEN_CAMERA);

        }
    }); 
```

这是我的活动结果方法

```
 @Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);

    String imageurl = null;
    if (requestCode == REQUEST_OPEN_CAMERA
            && resultCode == Activity.RESULT_OK) {

        captureFlage = true;
        relTapToCapture.setEnabled(false);
        relHeader.setVisibility(View.INVISIBLE);
        frmCaptureThis.setVisibility(View.VISIBLE);
        btnCapture.setVisibility(View.VISIBLE);
        btnSave.setVisibility(View.VISIBLE);
        txtTapToCapture.setVisibility(View.INVISIBLE);

        try {
            thumbnail = MediaStore.Images.Media.getBitmap(getActivity()
                    .getContentResolver(), imageUri);
        } catch (FileNotFoundException e) {

        } catch (IOException e) {

        }

        imageurl = getRealPathFromURI(imageUri);

        if (thumbnail.getWidth() > thumbnail.getHeight()) {
            // Log.i("Orientation", "LandScape");

            // thumbnail = rotateImage_90(thumbnail);
            imgCaptured.setImageBitmap(thumbnail);

        } else {
            // Log.i("Orientation", "Portrait");
            imgCaptured.setImageBitmap(thumbnail);
        }

        File file = new File(imageurl);
        boolean deleted = file.delete();

    }
    super.onActivityResult(requestCode, resultCode, data);

} 
```

这是我将图像保存在 SD 卡中的方法

```
public void saveImgToSDcard(Bitmap bitmap) {

    Calendar cal = Calendar.getInstance();
    System.out.println("Current milliseconds since 13 Oct, 2008 are :"
            + cal.getTimeInMillis());

    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, bytes);

    File f = new File(Environment.getExternalStorageDirectory()
            + File.separator + "brandYourImage" + cal.getTimeInMillis()
            + ".jpg");
    try {
        f.createNewFile();
    } catch (IOException e) {

    }
    // write the bytes in file
    FileOutputStream fo = null;
    try {
        fo = new FileOutputStream(f);
    } catch (FileNotFoundException e) {

    }
    try {
        fo.write(bytes.toByteArray());
    } catch (IOException e) {

    }

    // remember close de FileOutput
    try {
        fo.close();
        Toast.makeText(getActivity(), "Saved Successfully",
                Toast.LENGTH_SHORT).show();
    } catch (IOException e) {

    }

} 
```

# android - 如何以编程方式截取 DrawingSurface

> ID：15130890
> 
> 赞同：1
> 
> 时间：2013-02-28T08:34:14.337
> 
> 标签：android

我正在编写一个应用程序，在该应用程序中，用户可以从图库中选择图像，并可以使用 DrawingSurface 在其上画笔，现在我想以编程方式截取视图。我已经完成了活动的屏幕截图，但我无法截取 DrawingSurface 的屏幕截图。下面是我的 XML 代码

```
<RelativeLayout 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<Holi_app.in.DrawingSurface
    android:id="@+id/drawingSurface"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

</LinearLayout>

</RelativeLayout> 
```

这是我的 Java 类

```
public class DrawingSurface extends SurfaceView implements SurfaceHolder.Callback 
{

private Boolean _run;
protected DrawThread thread;
Bitmap mBitmap;
Context context;
int flag=0;
String mImagePath;
File file;  
String savedFilePath = "";
private boolean isFileAlreadySaved = false;

private CommandManager commandManager;
private Canvas canvas;   

SurfaceView v;

public DrawingSurface(Context context, AttributeSet attrs)
{
    super(context, attrs);

    String tag=PreferenceConnector.readString(context, PreferenceConnector.IMAGE_TAG,"ab"); 

     if(tag.equals("ab"))
     {
         mBitmap = BitmapFactory.decodeResource(getResources(),R.drawable.abdraw); 
     }

    getHolder().addCallback(this);

    commandManager = new CommandManager();
    thread = new DrawThread(getHolder());

}

class DrawThread extends  Thread
{
    private SurfaceHolder mSurfaceHolder;

    public DrawThread(SurfaceHolder surfaceHolder)
    {
        mSurfaceHolder = surfaceHolder;

    }

    public void setRunning(boolean run)
    {
        _run = run;
    }

    DrawingActivity image=new DrawingActivity();

    @Override
    public void run() 
    {
        Canvas canvas = null;

        while (_run)
        {
            try
            {                   

                canvas = mSurfaceHolder.lockCanvas(null);                
                canvas.drawBitmap(mBitmap, 0, 0, null);
                commandManager.executeAll(canvas);
                    mSurfaceHolder.unlockCanvasAndPost(canvas);
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }

        }

    }

}

public void addDrawingPath (DrawingPath drawingPath)
{
    commandManager.addCommand(drawingPath);
}

public boolean hasMoreRedo()
{
    return commandManager.hasMoreRedo();
}

public void redo()
{
    commandManager.redo();
}

public void undo()
{
    commandManager.undo();
}

public boolean hasMoreUndo()
{
    return commandManager.hasMoreRedo();
}

public void surfaceChanged(SurfaceHolder holder, int format, int width,  int height)
{
    // TODO Auto-generated method stub
}

public void surfaceCreated(SurfaceHolder holder) 
{
    // TODO Auto-generated method stub
    thread.setRunning(true);
    thread.start();
}

public void surfaceDestroyed(SurfaceHolder holder) 
{
    // TODO Auto-generated method stub
    boolean retry = true;
    thread.setRunning(false);
    while (retry) 
    {
        try 
        {
            thread.join();
            retry = false;
        }
        catch (InterruptedException e) 
        {
            // we will try it again and again...
        }
    }
}
public void Save(String mImagePath, String savedFilePath2)
{

   this.mImagePath=mImagePath;  
   this.savedFilePath=savedFilePath2;
   System.out.println("here imagepath"+mImagePath);
   if(isFileAlreadySaved == false)
   {
                this.setDrawingCacheEnabled(true);
       mBitmap=getDrawingCache();
         Calendar currentDate = Calendar.getInstance();
          SimpleDateFormat formatter= new SimpleDateFormat("yyyyMMMddHmmss");
          String dateNow = formatter.format(currentDate.getTime());          
          file = new File(savedFilePath);
          FileOutputStream fos;
          try {
           fos = new FileOutputStream(file);
           mBitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
           fos.close();
           isFileAlreadySaved = true;
          } 
          catch (FileNotFoundException e)
          {
           Log.e("Panel", "FileNotFoundException", e);
          } 
          catch (IOException e) {
           Log.e("Panel", "IOEception", e);
       }

}
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:44:30.793

尝试这个

```
 GameBoard gameBoard = (GameBoard)findViewById(R.id.the_canvas);
gameBoard.save(); 
```

View 类的 GameBoard 名称

```
public void save() {
        // TODO Auto-generated method stub

//       File folder = new File(Environment.getExternalStorageDirectory()+"/folder/");
//          if(!folder.exists()) folderAppointment.mkdirs();
        flag=false;

            try {
                this.setDrawingCacheEnabled(true);
                FileOutputStream fos = new FileOutputStream(new File(Environment.getExternalStorageDirectory()+"/filetosave4.jpg"));
                mBitmap = this.getDrawingCache();
                mBitmap.compress(CompressFormat.JPEG, 100, fos);
                fos.flush();
                fos.close();
//              Toast.makeText(getContext(), "Saved to "+fos, Toast.LENGTH_LONG).show();
               next();

            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            finally
            {
                Log.d("Flag",""+flag);
            }

    } 
```

也试试这个

```
private void saveBitmap(File file) {
        try {
            FileOutputStream fos = new FileOutputStream(file);
            Bitmap bitmap = context.getSurface().getBitmap();
            if (bitmap == null) {
                return;
            }
            bitmap.compress(CompressFormat.PNG, 100, fos);
        } catch (FileNotFoundException e) {
            throw new RuntimeException(e);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:35:51.337

如果启用，`View`您可以`Bitmap`通过调用获取视图`getDrawableCache()``drawableCache`

# android - 安卓水印

> ID：15130891
> 
> 赞同：1
> 
> 时间：2013-02-28T08:34:14.987
> 
> 标签：android, watermark

我对android代码中的水印有一些疑问！

以下代码显示了我对 WaterMark 的想法！但是，它不能正常工作。

例如，只有以 .png 结尾的图像才能被水印

是否有关于水印的方案（.jpeg、.jpg、.wbmp、.bmp、.png 或其他）

```
 protected static Bitmap getDrmPicture(Context context,String path){
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inPreferredConfig = Bitmap.Config.ARGB_8888;

        Bitmap originMap = BitmapFactory.decodeFile (path,options);
        Bitmap waterMark = BitmapFactory.decodeResource(context.getResources(), R.drawable.close);

        InputStream input;
        byte[] b;
        Bitmap waterMark = null;
        try {
            input = context.getResources().openRawResource(R.drawable.lock);
            b = new byte[input.available()];
            input.read(b);
            waterMark =  DecodeUtils.requestDecode(jc, b, null);
        }catch(IOException e){
        }

        int w = originMap.getWidth();
        int h = originMap.getHeight();

        int ww = waterMark.getWidth();
        int wh = waterMark.getHeight();

        Bitmap newb = Bitmap.createBitmap(w, h,Bitmap.Config.ARGB_8888;);
        Canvas cv = new Canvas(newb);
        cv.drawBitmap(originMap, 0, 0, null);
        cv.drawBitmap(waterMark, w - ww, h - wh, null);
        cv.save(Canvas.ALL_SAVE_FLAG);
        cv.restore();

        return newb;
    } 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T08:51:04.690

This is the code I use to apply watermark to a jpeg, it should work for you too,

```
public Bitmap applyWatermarkColorFilter(Drawable drawable) { 
    Bitmap image = ((BitmapDrawable)drawable).getBitmap();

    Bitmap result = Bitmap.createBitmap(image.getWidth(), image.getHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(result);
    canvas.drawBitmap(image, 0, 0, null);

    Bitmap watermark = BitmapFactory.decodeResource(getResources(), R.drawable.watermark);

    canvas.drawBitmap(watermark, image.getWidth()/2 - watermark.getWidth()/2, 
            image.getHeight()/2 - watermark.getHeight()/2, 
            null);

    return result;
} 
```

Basically after this u have to use `Bitmap.compress(<arguments>)` to get a jpg out of it.

Din't try for the other formats. May be it might be possible if you can extract the Bitmap out of them like how we do for jpg and png.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-22T11:11:46.913

[https://stackoverflow.com/questions/6756975/draw-multi-line-text-to-canvas](http://Measure%20height%20of%20multiline%20text%20%20To%20center%20text%20vertically%20we%20need%20to%20know%20text%20height.%20Instantiate%20StaticLayout%20with%20text%20width%20according%20to%20your%20needs,%20for%20us%20it%20is%20simple%20the%20width%20of%20Bitmap/Canvas%20minus%2016dp%20padding.%20The%20getHeight()%20then%20returns%20height%20of%20text.%20Positioning%20text%20on%20Canvas%20%20There%20are%20four%20simple%20steps%20to%20position%20text%20on%20Canvas:%20%20%20%20%20%20Save%20the%20current%20matrix%20and%20clip%20with%20Canvas.save().%20%20%20%20%20Apply%20translation%20to%20Canvas%20matrix%20with%20Canvas.translate(x,y).%20%20%20%20%20Draw%20StaticLayout%20on%20Canvas%20with%20StaticLayout.draw(canvas).%20%20%20%20%20Revert%20matrix%20translation%20with%20Canvas.restore()%20method.)

测量多行文本的高度

要使文本垂直居中，我们需要知道文本高度。根据您的需要使用文本宽度实例化 StaticLayout，对我们来说，这很简单，即 Bitmap/Canvas 的宽度减去 16dp 填充。getHeight() 然后返回文本的高度。在画布上定位文本

在 Canvas 上放置文本有四个简单的步骤：

```
Save the current matrix and clip with Canvas.save().
Apply translation to Canvas matrix with Canvas.translate(x,y).
Draw StaticLayout on Canvas with StaticLayout.draw(canvas).
Revert matrix translation with Canvas.restore() method. 
```

# c# - c# datagridview 显示枚举值

> ID：15130900
> 
> 赞同：1
> 
> 时间：2013-02-28T08:34:38.113
> 
> 标签：c#, winforms, datagridview

我有一个用 C# 编写的 winform 应用程序。为了说明问题，我编写了以下代码片段。

```
class A
{
    public E e{get; set;}
}

enum E
{
    A=2,
    B=3
}

void Form1_Load(object sender, EventArgs e)
{
    A[] AA=new A[]
           {
               new A{e=E.A},
               new A{}
           };
    dataGridView1.DataSource=AA;
} 
```

我希望它在数据网格的第二行显示空白，但它会生成异常“System.ArgumentException：值'0'不是枚举'E'的有效值。”。我该如何处理？基本上数据是从其他程序返回的，我无法更改。

顺便说一句，我在 propertyGrid 中显示了一个值。它运作良好。当枚举值为空时，它显示一个空白单元格，这正是我想要的。但是数据网格的工作方式不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-23T23:02:52.423

我猜你会得到那个烦人的对话框，它会不断地以消息的形式警告你该异常。解决方法是通过订阅`DataGridView`'`DataError`事件并设置`e.ThrowException`为来覆盖该默认行为`false`。但是，由于这是吞下异常的一种技巧，因此您可能希望将其范围限制为您试图吞下的异常。我就是这样处理的。

```
private void DataGridView_DataError(object sender, DataGridViewDataErrorEventArgs e)
{
    var columnIndex = e.ColumnIndex;
    var valueType = dataGridView.Columns[columnIndex].ValueType;

    //HACK: Hides the infinitely-appearing error dialog for enum values which are not defined as fields in the enum.
    e.ThrowException = !typeof(Enum).IsAssignableFrom(valueType) || Enum.IsDefined(valueType, dataGridView[columnIndex, e.RowIndex].Value);
} 
```

`ValueType`因此，如果相关单元格的 不可分配给 an`Enum`或者如果在相关枚举中定义了实际值，则会出现对话框。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T08:48:27.763

由于您没有在数组的第二个元素的默认构造函数中为 E 提供任何值，因此该变量 E 使用 0 进行初始化，这是 int 类型的默认值。但是 0 不在 enum 类型的集合中，所以会抛出异常。

解决方案是为类 A 创建一个默认构造函数。

```
class A
{
    public A(){
        e = E.A; 
    }

    public E e{get; set;}
} 
```

# java - 如何让我的边界数组索引的右侧工作？

> ID：15130902
> 
> 赞同：0
> 
> 时间：2013-02-28T08:34:59.053
> 
> 标签：java, arrays

我正在创建一个以 1 和 3 作为索引值的数组。我有两个来代表我的边界。我已经编写了四个 for 循环来为我的数组设置边框。除了为右侧创建边框的 for 循环之外，它们似乎都可以工作。

```
value: 5

222222
213133
231133
211131
231331
222222

//Creates the border indexes for the cells represented by the value 2
    for (int top = 0; top < cells.length; top++)
        cells[0][top] = 2;

    for (int bottom = 0; bottom < cells.length; bottom++)
        cells[cells.length-1][bottom] = 2;

    for (int left = 0; left < cells.length; left++)
        cells[left][0] = 2;

    //for some reason, this code doesn't do anything
    for (int right = 0; right < cells.length; right++)
        cells[right][cells.length] = 2;

    // Creates the first generation of cells randomly
    for (int i = 1; i <m; i++)
    {

        for (int j = 1; j < m; j++)
        {   
            double CellCreate = Math.random();
            if (CellCreate > .5)
            {
                cells[i][j] = 1;

            }
            else
            {
                cells[i][j] = 3;

            }   
        }
    }

            //Prints the cells  
    for (int x = 0; x < cells.length;x++)
    {
        for (int y = 0; y < cells.length; y++)
        {
            System.out.print(cells[x][y]);
        }
        System.out.println();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:37:21.183

您忘记从 中减去 1 `cells.length`：

```
for (int right = 0; right < cells.length; right++)
    cells[right][cells.length-1] = 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:37:44.013

此外，这里还有一件事很有趣。原始循环没有失败`ArrayOutOfBoundsException`，因此很可能在声明您的数组时也出现了问题。如果正确定义了数组，我应该失败了。你也应该发布它......看来，你在数组中声明你的行有`cells.length+1`元素

否则，这是一个经典的循环结束问题，而不是`cells.length`在

```
 cells[right][cells.length] = 2; 
```

你应该使用`cells.length-1`

```
for (int right = 0; right < cells.length; right++)
    cells[right][cells.length-1] = 2; 
```

其他注意事项：

明智的做法是始终使用大括号括住循环块和 if 条件：

```
//for some reason, this code doesn't do anything
for (int right = 0; right < cells.length; right++) {
    cells[right][cells.length-1] = 2;
} 
```

这样，您就不太可能陷入这样的“无循环”情况：

```
/**** BAD!!! *****/
for(...); // note the ; !!! That ends the loop block
    doSomething(); //this will be done only once!
/**** BAD!!! *****/ 
```

# opengl - 使用仅半透明的顶点缓冲区对象渲染的四边形纹理

> ID：15130910
> 
> 赞同：3
> 
> 时间：2013-02-28T08:35:23.057
> 
> 标签：opengl, opengl-es, textures, vbo, opengl-es-1.1

我正在将一些代码从 OpenGL 1.3 转换为 OpenGL ES 1.1。这是一个 2D 游戏，所以它主要归结为将纹理渲染到四边形上。OpenGL ES 中没有立即模式，所以我不得不使用顶点缓冲区对象。

但似乎只有组成每个四边形的两个三角形中的一个处理透明度。这是一个屏幕截图：

![在此处输入图像描述](../Images/26934c6ca62ba009d4f89e3dafb32a0d.png)

这是我现在渲染纹理四边形的方式，这导致：

```
glBindTexture2D(GL_TEXTURE_2D, id);

glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);

const GLfloat texture_coordinates[] = {0, 0,
                                       0, 1,
                                       1, 1,
                                       1, 0};
glTexCoordPointer(2, GL_FLOAT, 0, texture_coordinates);

const GLfloat vertices[] = {0, 0,
                            0, height,
                            width, height,
                            width, 0};
glVertexPointer(2, GL_FLOAT, 0, vertices);

const GLubyte indices[] = {0, 1, 2,
                           0, 2, 3};
glDrawElements(GL_TRIANGLE_STRIP, 6, GL_UNSIGNED_BYTE, indices);

glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_TEXTURE_COORD_ARRAY); 
```

以下是我使用即时模式渲染纹理四边形的方法，效果很好：

```
glBindTexture2D(GL_TEXTURE_2D, id);

glBegin(GL_QUADS);

glTexCoord2i(0, 0);
glVertex2i(0, 0);

glTexCoord2i(1, 0);
glVertex2i(width, 0);

glTexCoord2i(1, 1);
glVertex2i(width, height);

glTexCoord2i(0, 1);
glVertex2i(0, height);

glEnd(); 
```

以下是重现该问题的示例程序。

你可以像这样在 Linux 上编译它：

```
g++ `pkg-config --cflags --libs sdl gl libpng` reproduce.cpp 
```

在 Mac OS X 上是这样的：

```
clang++ -framework OpenGL `pkg-config --cflags --libs sdl libpng` reproduce.cpp 
```

这是一个 512x256 的透明 PNG 图像，您可以将其另存为“transparent.png”：

![在此处输入图像描述](../Images/b48d84a64765db28313d1f9fc2489102.png)

```
#include <cmath>
#include <cstdio>
#include <iostream>
#include <png.h>
#include <SDL.h>
#include <SDL_main.h>
#include <SDL_opengl.h>
#include <stdexcept>
#include <sstream>

#define USE_VBO 1

struct Pixmap {
    int width;
    int height;
    const unsigned char* data;
    GLenum format;
};

Pixmap load_png(const std::string& path)
{
    FILE* const file = fopen(path.c_str(), "rb");
    if (!file)
        throw std::runtime_error("Unable to open " + path);

    png_byte header[8];
    fread(header, 1, 8, file);
    const bool is_png = !png_sig_cmp(header, 0, 8);
    if (!is_png)
        throw std::runtime_error(path + " is not a PNG");

    png_structp png = png_create_read_struct(PNG_LIBPNG_VER_STRING,
                                             NULL, NULL, NULL);
    if (!png)
        throw std::runtime_error("Failed to create png struct");

    png_infop info = png_create_info_struct(png);
    if (!info) {
        png_destroy_read_struct(&png, (png_infopp) NULL, (png_infopp) NULL);
        throw std::runtime_error("Failed to create png info struct");
    }

    png_infop info_end = png_create_info_struct(png);
    if (!info_end) {
        png_destroy_read_struct(&png, &info, (png_infopp) NULL);
        throw std::runtime_error("Failed to create png info struct");
    }

    if (setjmp(png_jmpbuf(png))) {
        png_destroy_read_struct(&png, &info, &info_end);
        throw std::runtime_error("Error from libpng");
    }

    png_init_io(png, file);
    png_set_sig_bytes(png, 8);
    png_read_info(png, info);

    int bit_depth;
    int color_type;
    png_uint_32 image_width, image_height;
    png_get_IHDR(png, info, &image_width, &image_height, &bit_depth,
                 &color_type, NULL, NULL, NULL);

    png_read_update_info(png, info);

    GLenum format;
    switch (color_type) {

    case PNG_COLOR_TYPE_RGBA:
        format = GL_RGBA;
        break;
    case PNG_COLOR_TYPE_RGB:
        format = GL_RGB;
        break;
    default:
        png_destroy_read_struct(&png, &info, &info_end);
        std::ostringstream message_stream;
        message_stream << "Unsupported PNG color type: " << color_type;
        throw std::runtime_error(message_stream.str());
    }

    const int row_bytes = png_get_rowbytes(png, info);
    png_byte* image_data = new png_byte[row_bytes * image_height];
    png_bytep* row_pointers = new png_bytep[image_height];
    for (unsigned int i = 0; i < image_height; i++)
        row_pointers[i] = image_data + i * row_bytes;

    png_read_image(png, row_pointers);

    png_destroy_read_struct(&png, &info, &info_end);
    delete[] row_pointers;
    fclose(file);

    Pixmap pixmap;
    pixmap.width = image_width;
    pixmap.height = image_height;
    pixmap.data = image_data;
    pixmap.format = format;
    return pixmap;
}

GLuint create_texture(Pixmap pixmap)
{
    GLuint id;
    glGenTextures(1, &id);
    glBindTexture(GL_TEXTURE_2D, id);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexImage2D(GL_TEXTURE_2D, 0, pixmap.format, pixmap.width,
                 pixmap.height, 0, pixmap.format, GL_UNSIGNED_BYTE,
                 pixmap.data);
    return id;
}

void draw_texture(const GLuint id, const int width, const int height)
{
    glBindTexture(GL_TEXTURE_2D, id);

#if USE_VBO
    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);

    const GLfloat texture_coordinates[] = {0, 0,
                                           0, 1,
                                           1, 1,
                                           1, 0};
    glTexCoordPointer(2, GL_FLOAT, 0, texture_coordinates);

    const GLfloat vertices[] = {0, 0,
                                0, height,
                                width, height,
                                width, 0};
    glVertexPointer(2, GL_FLOAT, 0, vertices);

    const GLubyte indices[] = {0, 1, 2,
                               0, 2, 3};
    glDrawElements(GL_TRIANGLE_STRIP, 6, GL_UNSIGNED_BYTE, indices);

    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
#else
    glBegin(GL_QUADS);

    glTexCoord2i(0, 0);
    glVertex2i(0, 0);

    glTexCoord2i(1, 0);
    glVertex2i(width, 0);

    glTexCoord2i(1, 1);
    glVertex2i(width, height);

    glTexCoord2i(0, 1);
    glVertex2i(0, height);

    glEnd();
#endif
}

int main(int argc, char* argv[])
{
    const int width = 512;
    const int height = 256;

    SDL_Init(SDL_INIT_VIDEO);
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
    SDL_SetVideoMode(width, height, 0, SDL_OPENGL);

    glEnable(GL_TEXTURE_2D);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_BLEND);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, width, height, 0, -1, 1);
    glMatrixMode(GL_MODELVIEW);

    glClearColor(1.0f, 1.0f, 1.0f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT);

    try {
        Pixmap pixmap = load_png("transparent.png");
        GLuint texture = create_texture(pixmap);
        draw_texture(texture, pixmap.width, pixmap.height);
    } catch (std::exception& e) {
        std::cerr << e.what() << std::endl;
    }

    SDL_GL_SwapBuffers();

    SDL_Event event;
    for (;;) {
        SDL_WaitEvent(&event);
        if (event.type == SDL_QUIT)
            return 0;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T09:33:02.837

Seeing you use indexed drawing with a simple triangle strip for a quad made me wonder, and in fact this is your problem. Your index array looks like you want to draw two indexed triangles and not a single triangle strip. So you draw a triangle strip with 6 vertices and thus 4 triangles, which means additional triangles that wrap somehow behind your other two and cause double drawing, which then results in the darker parts.

So the easiest solution would be to change `GL_TRIANGLE_STRIP` to `GL_TRIANGLES`, but maybe reorder your vertices/indices a bit, as otherwise you are drawing your triangles in clockwise order, whereas your 1.3 quad example uses counter-clockwise order (it may be that this is irrelevant in your case, but that would be the wrong approach in the first place, never ignore your ordering).

但是你知道吗，它是两个三角形的三角形带，它只需要 4 个顶点。所以根本不需要任何索引数组，只需使用good old`glDrawArrays`并按顺序绘制顶点即可。但是稍微重新排列它们（三角形条使用锯齿形图案，因此从左到右，从上到下排列它们）：

```
const GLfloat texture_coordinates[] = {0, 1,
                                       0, 0,
                                       1, 1,
                                       1, 0};
glTexCoordPointer(2, GL_FLOAT, 0, texture_coordinates);

const GLfloat vertices[] = {0, height,
                            0, 0,
                            width, height,
                            width, 0};
glVertexPointer(2, GL_FLOAT, 0, vertices);

glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

# nosql - Cassandra 列族中的唯一行键

> ID：15130911
> 
> 赞同：0
> 
> 时间：2013-02-28T08:35:23.737
> 
> 标签：nosql, cassandra

我正在使用 Cassandra 1.1.8，今天我在我的键空间中看到了一个包含以下内容的列族

```
 SELECT * FROM challenge;
 KEY
----------------------------
 49feb2000100000a556522ed68  
 49feb2000100000a556522ed74  
 49feb2000100000a556522ed7a   
 49feb2000100000a556522ed72   
 49feb2000100000a556522ed76   
 49feb2000100000a556522ed6a   
 49feb2000100000a556522ed70   
 49feb2000100000a556522ed78   
 49feb2000100000a556522ed6e   
 49feb2000100000a556522ed6c 
```

所以，只有行键。昨天那些行在那里，我进行了一些删除（正是在那些行上）。我正在使用赫克托

```
Mutator<byte []> mutator = HFactory.createMutator(keyspace, BYTES_ARRAY_SERIALIZER)
    .addDeletion(challengeRowKey(...), CHALLENGE_COLUMN_FAMILY_NAME)
    .execute(); 
```

这是单机/单节点上的小型开发和测试环境，所以我不认为硬件细节是相关的。可能我在做一些愚蠢的事情，或者我不明白事情是如何工作的，但据我所知，上面的行是无效的......列名和列值坐标丢失，所以没有有效的单元格（行键/列名/列值）...对吗？

我读过关于幽灵读取的文章，但我认为这是分布式环境中的一个场景……这在一天后在单个 Cassandra 节点上是否有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:18:14.510

来自[http://www.datastax.com/docs/1.0/dml/about_writes#about-deletes](http://www.datastax.com/docs/1.0/dml/about_writes#about-deletes)

“已删除行的行键可能仍会出现在范围查询结果中。当您在 Cassandra 中删除一行时，它会用墓碑标记该行键的所有列。直到通过压缩清除这些墓碑，您有一个空行键（不包含列的行）。这些删除的键可以显示在 get_range_slices() 调用的结果中。如果您的客户端应用程序对行执行范围查询，您可能希望过滤掉返回空列列表的行键。

# byte - 从串口读取字节

> ID：15130914
> 
> 赞同：0
> 
> 时间：2013-02-28T08:35:37.870
> 
> 标签：byte, arduino

我已经制作了这个程序，它从串行读取信息并将二进制值写入 6 个 LED。我不觉得这是最简单或最快的方法，但这正是我真正想要的。我的代码如下所示：

```
boolean enable = false;

void setup()
{
  for (int i = 2; i < 8; i++)
  {
    pinMode(i, OUTPUT);
  }
}

void loop()
{
  if (Serial.available() > 0)
  {
    enable = true;
  }
  if (enable)
  {
    while (Serial.available() > 0)
    {
      byte b = Serial.parseInt();
      b = constrain(b, 0, 63);
      byte val = b;
      for (int i = 7; i >= 2; i--)
      {
        if (pow(2, (i-2)) <= val)
        {
          digitalWrite(i, HIGH);
          val -= pow(2, (i-2));
        }
        else
        {
          digitalWrite(i, LOW);
        }
      }
    }
    enable = false;
  }
  delay(100);
} 
```

一个有效的代码示例会很好。我试过使用 PORTD 但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:09:22.243

使用二元运算

```
for(int i = 0 ; i < 8 ; i++ ) {
   val = ( b >> i ) & 0x1;
   digitalWrite(i, val == 1 ? HIGH : LOW );
} 
```

如果您计划进行一些严肃的串行通信，请查看我创建的库[https://github.com/lukaszkujawa/arduino-serial-helper](https://github.com/lukaszkujawa/arduino-serial-helper)

# javascript - 如何将 dojo javascript 文件导入 worklight 应用程序？

> ID：15130916
> 
> 赞同：1
> 
> 时间：2013-02-28T08:35:42.933
> 
> 标签：javascript, dojo, ibm-mobilefirst

在创建新项目时，我选择了包含 dojo 工具包。我可以使用`src="dojo/dojo.js"`. 但是，当我尝试使用导入其他一些模块（例如 dijit.js）时

```
require(["dijit/dijit"], function(){}) 
```

...我总是在 Web 控制台中遇到错误（即找不到资源）。当我导入 dojo 模块时，该问题不适用。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:09:12.327

确保您已正确配置 Dojo，请找到我在 Hybrid App 中使用的 Dojo 配置。

```
<script>
    var dojoConfig = {
    baseUrl: "js",
    packages: [
        { name: "dojo", location: "dojo/dojo"},
        { name: "dijit", location: "dojo/dijit"},
        { name: "dojox", location: "dojo/dojox"}
    ],
        isDebug: false,
        async: true,
        parseOnLoad: true,
        deps:['app/main']
    }
</script> 
```

如果您仍然无法解决它，请尝试制作一个示例用例或 jsfiddle，将进一步研究它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:03:01.220

您犯了一个简单的语法错误：- 需要 js 文件而不是`require[("dojo/parser")]` 您使用`require(["dojo/parser"],function(parser){})`

# iphone - 如何使用语音识别制作 iOS 应用程序以确保安全？

> ID：15130918
> 
> 赞同：-2
> 
> 时间：2013-02-28T08:35:44.313
> 
> 标签：iphone, objective-c

我想制作一个可以录制声音的 iPhone 应用程序，而不是每当用户开始使用我的应用程序时。它将通过一些关键字被说出，应用程序将记录这些关键字并匹配现有文件和关键字文件的声音。那么有什么方法可以让我出于安全目的制作这样的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:43:12.907

OpenEars 让您可以轻松快速地将语音识别和合成语音/TTS 添加到您的 iPhone 应用程序中。我希望以下链接对您有所帮助

[http://www.politepix.com/openears/](http://www.politepix.com/openears/)

# linux - 如何编写shell脚本？

> ID：15130923
> 
> 赞同：1
> 
> 时间：2013-02-28T08:35:54.797
> 
> 标签：linux, shell, unix

我想编写一个shell，它一直运行直到将某些内容写入文件（由另一个进程）。我写了这个：

```
PID_FILE=log.txt
DONE=0
while [$DONE -eq 0]
do 
    cat $PID_FILE | while read LINE 
    do
    if [$LINE -neq ""]; then    
        echo "Do stuff here"
        $DONE=1
    fi  
    done
done    
echo "DONE"
echo "">$PID_FILE 
```

但我明白了

```
test.sh: 3: test.sh: [0: not found
DONE 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T08:38:22.507

这一行：

```
while [$DONE -eq 0] 
```

方括号周围需要空格：

```
while [ $DONE -eq 0 ] 
```

和这个一样：

```
if [$LINE -neq ""]; then 
```

像这样：

```
if [ $LINE -neq "" ]; then 
```

[当您知道这`\[`是一个*命令*时，它会有所帮助。](https://stackoverflow.com/a/9581117/78845)请参阅[为什么在 Bash 脚本中的 '[' 之后和 ']' 之前应该有一个空格](https://stackoverflow.com/q/9581064/78845)以获得解释。

# java - 如何在运行时从 HTML 代码片段（由浏览器解释）生成图像

> ID：15130925
> 
> 赞同：1
> 
> 时间：2013-02-28T08:36:00.537
> 
> 标签：java, html, jquery, screenshot

谁能指导如何通过 Java API 或 Jquery 库从输入的 html 代码生成图像？否则，如何制作浏览器解释的 HTML 代码片段的屏幕截图？

例如：如果我有这个 HTML 代码：

```
<h1>Logo</h1><img src="http://blog.stackoverflow.com/wp-content/uploads/stackoverflow-logo-300.png"> 
```

我将生成一个图像，其中包含此代码的屏幕截图，因为它由浏览器解释

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:50:25.477

请参阅：[将 html 渲染为 png（服务器端）](https://stackoverflow.com/questions/2651173/rendering-html-to-png-server-side)

如果您需要 Java API，[Html2Image](https://wkhtmltopdf.org/downloads.html)是您的最佳解决方案。

# android - 为什么android中没有main()方法

> ID：15130930
> 
> 赞同：-3
> 
> 时间：2013-02-28T08:36:14.033
> 
> 标签：android

我问这个是因为在阅读之后，android 依赖于组件，这就是他们从中删除方法的原因，但是我们是否可以通过在一个地方`main()`添加而不是在我们需要互联网时创建程序。`main()`

比我们可以放置另一个*Internet 的 main()*方法并暂停以前的 main 方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:46:55.203

在 AndroidManifest.xml 你需要一个 LAUNCHER 活动，还有 2 个用于网络和没有网络，例如：

```
 <activity
        android:name="your.package.StartActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name="your.package.NetworkActivity" >
    </activity>

    <activity
        android:name="your.package.NoNetworkActivity" >
    </activity> 
```

在 StartActivity.java 检查连接性，然后选择要启动的活动：

```
 public class StartActivity extends Activity {
     //...

     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);

         // here do the job!!!
         boolean iAmConnected = checkNetwork(); // you need to implement that
         if(iAmConnected) {
           // start network activity
           Intent intent = new Intent(this, NetworkActivity.class);
           startActivity(intent);

         } else  {
           // start no network activity
           Intent intent = new Intent(this, NoNetworkActivity.class);
           startActivity(intent);
         }

     }

    //...
 } 
```

`StartActivity`可以有`setContentView(R.layout.a_splash_screen);`或没有内容视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:00:42.037

main() 方法只是许多语言的入口点，就像 java android 需要一些入口点来启动应用程序（第一个屏幕），在 android 中，我们将使用 Intent Filter 在 android 清单文件中指定必须启动哪个活动

```
 <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter> 
```

当活动开始时（用户可以看到第一个屏幕），它将调用 onCreate(Bundle b) 方法...活动生命周期方法

# ruby - Rails 对 date.end_of_day.to_datetime 和 date.to_datetime.end_of_day 返回的日期对象值进行比较时返回 false

> ID：15130932
> 
> 赞同：6
> 
> 时间：2013-02-28T08:36:15.357
> 
> 标签：ruby, ruby-on-rails-3, datetime, activesupport

**ruby 1.9.3dev（2011-09-23 修订版 33323）[i686-linux]**

**导轨 3.0.20**

最近为什么要在与 Rails 上的 DateTime 相关的 RSpecs 项目上工作，我发现 *在给定日期*，以下语句发出的值

```
 date.end_of_day.to_datetime 
```

和

```
 date.to_datetime.end_of_day 
```

比较时返回 false，尽管它们代表相同的日期时间。

为了确认这一点，我打开了 Rails 控制台并尝试了以下操作

```
 1.9.3dev :053 > monday = Time.now.monday
   => 2013-02-25 00:00:00 +0530

  1.9.3dev :054 > monday.class
   => Time

  1.9.3dev :055 > d1 = monday + 1.hour
   => 2013-02-25 01:00:00 +0530

  1.9.3dev :056 > d2 = monday + 1.hour
   => 2013-02-25 01:00:00 +0530

  1.9.3dev :058 > d1_eod_datetime = d1.end_of_day.to_datetime
   => Mon, 25 Feb 2013 23:59:59 +0530

  1.9.3dev :059 > d2_eod_datetime = d2.to_datetime.end_of_day
   => Mon, 25 Feb 2013 23:59:59 +0530

  1.9.3dev :061 > d1_eod_datetime == d2_eod_datetime
   => false

  1.9.3dev :062 > d3_eod_datetime = d2.to_datetime.end_of_day
   => Mon, 25 Feb 2013 23:59:59 +0530

  1.9.3dev :063 > d2_eod_datetime == d3_eod_datetime
   => true 
```

看来我的观察看起来是正确的。那就是：

**比较d1_eod_datetime 和 d2_eod_datetime**时，它**​​返回 false**

**比较d2_eod_datetime 和 d3_eod_datetime**时，它**​​返回 true**

这对我来说似乎是一种不一致的行为，但是如果有人能让我了解幕后发生的事情以及为什么使用**date.end_of_day.to_datetime**和 **date.to_datetime.end_of_day**对值进行的比较虽然源**日期**对象失败，我将不胜感激表示相同的日期时间。

谢谢，

吉涅什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-14T13:46:47.607

尽管它们的字符串表示形式相同，`d1_eod_datetime`但不等于`d2_eod_datetime`. 它们的最低有效位不同。如果您将日期时间转换为浮点表示，您会看到它们不相等：

```
d1_eod_datetime.to_f
=> 1381788000.0
d2_eod_datetime.to_f
=> 1381787999.0 
```

当`Time`实例收到`end_of_day`消息时会出现问题。将`end_of_day`消息传递给`Time`实例会返回一个`DateTime`实例。转换为`DateTime`可能会导致准确性损失，并且新`DateTime`实例可能不完全等于您的原始`Time`实例。

# php - 天差

> ID：15130937
> 
> 赞同：2
> 
> 时间：2013-02-28T08:36:32.490
> 
> 标签：php, strtotime

如何制作`$your_date = strtotime("2010-01-01")`动态？我的意思是（“2010-01-01”）一个（“动态”）？

这是代码：

```
 $started = get_post_meta(get_the_ID(), 'wtf_started', true);
 $now = time(); // or your date as well
 $your_date = strtotime("$started");
 $datediff = $now - $your_date;
 echo floor($datediff/(60*60*24)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:03:13.373

试试这个

```
$startdate = new DateTime(date("Y-m-d", strtotime(get_post_meta(get_the_ID(), 'wtf_started', true))));
$now = new DateTime("now");
$datediff = date_diff($startdate,$now);
echo $datediff->format('%d days'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:42:02.267

只需传递不带引号的变量。

```
$your_date = strtotime($started); 
```

即使**您的代码也可以正常工作，**但请尝试删除引号。

# iphone - 将 Xcode 项目导入 Unity

> ID：15130943
> 
> 赞同：1
> 
> 时间：2013-02-28T08:37:06.537
> 
> 标签：iphone, objective-c, xcode, unity3d

我有一个在 Xcode 中开发的项目，我想将其导入 Unity 或将其作为功能添加到现有的 Unity 项目中。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:34:03.750

您不能将 Xcode 项目导入 Unity，但您可以统一创建插件，并且可以从统一访问您的 Xcode 代码。

例如，在您的 iPhone 应用程序中，您已经集成了 Facebook，并且您希望将该 Facebook 集成访问到您的应用程序中，那么您应该为此创建插件。

[这是参考。](http://docs.unity3d.com/Documentation/Manual/PluginsForIOS.html)

# php - RabbitMqBundle 中的路由键参数

> ID：15130944
> 
> 赞同：0
> 
> 时间：2013-02-28T08:37:09.480
> 
> 标签：php, symfony, rabbitmq, symfony-2.1

我使用 Symfony 2.1.8 和 RabbitMqBundle。

我正在尝试像这样添加`routing_keys`参数`config.yml`：

```
old_sound_rabbit_mq:
connections:
    default:
        host:      'localhost'
        port:      5672
        user:      'guest'
        password:  'guest'
        vhost:     '/'
producers:
    twitter_metrics:
        connection: default
        exchange_options: {name: 'social-networks', type: topic}
consumers:
    twitter_metrics:
        connection: default
        exchange_options:
            name: 'social-networks'
            type: topic
        queue_options:
            name: 'twitter-metrics-queue'
            routing_keys:
              - 'metrics.twitter'
        callback: twitter_metrics_service 
```

我尝试只在消费者和生产者中添加`routing_keys`参数和变体。`producers`但是当我尝试使用 symfony2 控制台时，我得到了这个：

> [Symfony\Component\Config\Definition\Exception\InvalidConfigurationException]
> “old_sound_rabbit_mq.consumers.twitter_metrics.queue_options”下无法识别的选项“routing_keys”

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:39:11.750

在今天最后一次更新 RabbitMqBundle 后，问题得到了解决。如果你有同样的问题，试试`php composer.phar update`你的 symfony 应用路径中的命令。

# symfony - 如何将嵌套查询与 FOQElasticaBundle 一起用于 Symfony2

> ID：15130946
> 
> 赞同：2
> 
> 时间：2013-02-28T08:37:15.660
> 
> 标签：symfony, elasticsearch

我在使用 FOQElasticaBundle 构建查询时遇到问题

我有 3 个实体

*   用户
*   酒店
*   氛围

用户可以拥有 1 个或多个 Hotels，每个 Hotel 只有 1 个 Ambiance。在我的配置文件中，我有：

```
foq_elastica:
clients:
    default: { host: %elasticsearch.host%, port: %elasticsearch.port% }
indexes:
    MyBundle:
        client: default
        finder:
        types:
            user:
                mappings:
                    id:
                        boost: 10
                        analyzer: fr_case_analyzer
                    name:
                        boost: 5
                        analyzer: fr_case_analyzer
                    hotels:
                        type: "nested"
                        properties:
                            name:
                                boost: 10
                                analyzer: fr_case_analyzer
                            ambiance:
                                boost: 1 
```

我希望能够通过输入他的姓名或他的酒店名称来搜索用户，并可能在 Ambiance 类型上添加一个过滤器。所以查询应该是这样的：

```
$mainQuery = new \Elastica_Query_Bool();
$nameQuery = new \Elastica_Query_Bool();
$filtersQuery = new \Elastica_Query_Bool();

//searching in Users' names
$nameQuery = new \Elastica_Query_Text();
$nameQuery->setFieldQuery('name', $searchName);
$nameQuery->setFieldParam('name', 'boost', 5);
$nameQuery->setFieldParam('name', 'type', 'phrase_prefix');

//searching in Hotels' names
$hotelNameQuery = new \Elastica_Query_Text();
$hotelNameQuery->setFieldQuery('name', $searchName);
$hotelNameQuery->setFieldParam('name', 'boost', 3);
$hotelNameQuery->setFieldParam('name', 'type', 'phrase_prefix');

$nestedHotelNameQuery = new \Elastica_Query_Nested();
$nestedHotelNameQuery->setPath('hotels');
$nestedHotelNameQuery->setQuery($hotelNameQuery);

$nameQuery->addShould($nameQuery);
$nameQuery->addShould($nestedHotelNameQuery);

//if filter on ambiance
$ambianceQuery = new \Elastica_Query_Term();
$ambianceQuery->setTerm('ambiance', $arrFilters['ambiance']);

$nestedAmbianceQuery = new \Elastica_Query_Nested();
$nestedAmbianceQuery->setPath('hotels');
$nestedAmbianceQuery->setQuery($ambianceQuery);

$filtersQuery->addMust($nestedAmbianceQuery);

//adding the parameters to the main query
$mainQuery->addMust($nameQuery);
$mainQuery->addMust($filtersQuery); 
```

不幸的是，如果激活了 Ambiance 过滤器，这不起作用并且不返回任何结果，但如果我只使用名称进行搜索，则效果很好。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T07:54:15.510

我找到了为什么它不起作用。捆绑包实际上在对象上使用了 __toString()。因此，我没有查询环境的“id”，而是修改了我的 html 输入，因此值是环境的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-22T10:51:14.813

这是我自己的解决方案版本：

根据 elasticsearch 文档，我们应该实现一个类似于下面的 json 的结构：

```
{
  "query": {
    "bool": {
      "must": [
        { "match": { "title": "eggs" }}, 
        {
          "nested": {
            "path": "comments", 
            "query": {
              "bool": {
                "must": [ 
                  { "match": { "comments.name": "john" }},
                  { "match": { "comments.age":  28     }}
                ]
        }}}}
      ]
}}} 
```

因此，要使用 symfony 2 并根据 FOSElasticaBundle 包执行此操作，我们将编写以下代码行：

```
//if filter on ambiance
$ambianceQuery = new \Elastica_Query_Term();
$ambianceQuery->setTerm('ambiance', $arrFilters['ambiance']);
// We will add the the term to the query bool 
$filtersQuery->addMust($ambianceQuery)

$nestedAmbianceQuery = new \Elastica_Query_Nested();
$nestedAmbianceQuery->setPath('hotels');
// we will set the result as argument in the setQuery method.
$nestedAmbianceQuery->setQuery($filtersQuery);

// And finally we add the nested query to the main query bool through addMust. 
$mainQuery->addMust($nestedAmbianceQuery); 
```

希望这会帮助别人。

一个+

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T06:57:56.830

只是有同样的问题。这对我有用：

```
..
$ambianceQuery->setTerm('hotels.ambiance', $arrFilters['ambiance']);
.. 
```

在 Symfony2 的 FOQElasticaBundle（现为 FOSElasticaBundle）中找不到任何关于此的示例，但它应该以如下所示的弹性搜索查询结尾：

[http://www.elasticsearch.org/guide/reference/query-dsl/nested-query/](http://www.elasticsearch.org/guide/reference/query-dsl/nested-query/)

可以像这样执行/测试原始弹性搜索查询：

```
$queryString = '{..JSON..}';
$boolQuery = new \Elastica_Query_Builder($queryString); 
```

# iphone - 为什么 [UIColor whiteColor] 和 blackColor 的亮度相等

> ID：15130949
> 
> 赞同：11
> 
> 时间：2013-02-28T08:37:33.613
> 
> 标签：iphone, cocoa-touch, cocoa, ios5, uikit

让我向您展示一些获取三种 UIColor 的色调、饱和度和亮度的结果。

```
[[UIColor redColor] getHue:&hue
                saturation:&saturation
                 brightness:&brightness
                 alpha:&alpha];

hue = 1.0 saturatino = 1.0 brightness = 1.0 alpha = 0.0 
```

> * * *

```
[[UIColor whiteColor] getHue:&hue
                  saturation:&saturation
                  brightness:&brightness
                       alpha:&alpha];

hue = 0.0 saturatino = 0.0 brightness = 0.0 alpha = 0.0 
```

> * * *

```
[[UIColor blackColor] getHue:&hue
                  saturation:&saturation
                  brightness:&brightness
                       alpha:&alpha];

hue = 0.0 saturatino = 0.0 brightness = 0.0 alpha = 0.0 
```

谁能解释为什么白色和黑色的色调，饱和度，亮度相等？为什么阿尔法等于零？

我想在我的项目中做的是通过改变给定颜色的亮度来生成“较深”的颜色：

> 亮度 = 亮度 * 0.8；

它适用于任何颜色，但它会从白色产生黑色。（虽然我希望是灰色的）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T08:42:19.457

原因是`+whiteColor`两者`+blackColor`都返回灰度色彩空间中的颜色，这与 HSB 色彩空间不兼容。因此，`-getHue:saturation:brightness:alpha:`实际上是没有修改参数。我想你会发现`0.0`在调用那个方法之前你已经把它们都设置好了。如果你检查它的返回值，`-getHue:saturation:brightness:alpha:`它会告诉你它是否成功转换为 HSB。

# delphi - Advantage 数据库索引整理顺序

> ID：15130953
> 
> 赞同：3
> 
> 时间：2013-02-28T08:37:48.807
> 
> 标签：delphi, indexing, collation, advantage-database-server, codepages

我正在将一个 Delphi 程序从 BDE 转换为 Advantage 数据库。

周末我在使用 Delphi XE 的 Win 7 机器上工作。在这一周里，我在一台使用 Delphi 7 的 Win XP 机器上工作。

优势表在 Win 7 机器上工作正常，但复制到 XP 机器时无法访问 -`Error 5175 the index was created with a different collation sequence`

我已经搜索了网络，甚至进入了 Advantage 论坛，但找不到任何有用的信息。

XP 和 Win 7 在位置等方面的设置相同。表属性将排序顺序列为空白。

任何人都知道是什么原因造成的以及如何解决。我曾尝试删除并重新创建索引，但无济于事。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T11:30:30.393

用于创建或打开索引文件的排序规则取决于为您配置的排序规则`remote server`或`local server`您要连接到的排序规则。

这`Advantage Local Server (ALS)`可以在`adslocal.cfg`配置文件中设置。

必须重新安装专用`Advantage Database Server (ADS)`才能更改排序规则，因为安装程序将排序规则“烘焙”到服务器可执行文件中（至少据我所知）。

此外，如果您`<CURRENT SYSTEM LANGUAGE>`在安装 ADS 组件时选择（或类似），则不同操作系统版本和操作系统语言的排序规则会有所不同。这在帮助中有所描述：

> 1.  强烈建议使用第一个选项，它是确保所有连接的 ANSI 排序语言相同的更简单方法。安装 Advantage 数据库服务器和 Advantage 客户端时，请特别选择 ANSI 排序语言。确保为所有安装指定相同的 ANSI 语言。在 Advantage 客户端安装期间选择的 ANSI 排序语言将放置在 Advantage 本地服务器配置文件 ADSLOCAL.CFG 中。
> 2.  如果您不希望使用上述选项 1，请在安装 Advantage 数据库服务器和 Advantage 客户端时选择 ANSI 排序语言。仅当以下所有条件都为真时才选择。用于安装 Advantage 数据库服务器的所有计算机都应运行相同的 Windows 操作系统。运行连接到 Advantage 本地服务器的应用程序的计算机也应该运行相同的操作系统。除了操作系统相同之外，所有计算机都应使用相同的 ANSI 排序语言（通过区域设置图标指定）。

[http://devzone.advantagedatabase.com/dz/webhelp/advantage10/master_avoiding_ansi_collat​​ion_mismatch_errors.htm](http://devzone.advantagedatabase.com/dz/webhelp/advantage10/master_avoiding_ansi_collation_mismatch_errors.htm)

[http://devzone.advantagedatabase.com/dz/webhelp/advantage10/index.html?error_5175_ae_index_collat​​ion_mismatch.htm](http://devzone.advantagedatabase.com/dz/webhelp/advantage10/index.html?error_5175_ae_index_collation_mismatch.htm)

# java - 如何在java中使用jmap分析堆转储

> ID：15130956
> 
> 赞同：61
> 
> 时间：2013-02-28T08:38:00.357
> 
> 标签：java, jmap

我正在使用以下命令创建堆转储：

```
jmap -dump:file=DumpFile.txt <process-id> 
```

我已经打开了生成的文件 -`DumpFile.txt`但它不是可读格式。所以请让我知道如何分析生成文件中的数据。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-06-12T13:23:55.783

您应该使用`jmap -heap:format=b <process-id>`没有任何路径。因此它会创建一个 *.bin 文件，您可以使用该文件`jvisualvm.exe`（与 jmap 相同的路径）打开该文件。这是打开此类转储文件的好工具。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-02-28T08:41:26.637

您可以使用[`jhat`](http://docs.oracle.com/javase/7/docs/technotes/tools/share/jhat.html)（Java Heap Analysis Tool）读取生成的文件：

```
jhat [ options ] <heap-dump-file> 
```

jhat 命令解析 java 堆转储文件并启动 web 服务器。jhat 使您能够使用您最喜欢的网络浏览器浏览堆转储。

请注意，您应该有一个`hprof`二进制格式的输出，以便能够使用`jhat`. 您可以使用`format=b`选项以这种格式生成转储。

```
-dump:format=b,file=<filename> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-05-13T16:08:43.553

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-28T08:42:42.023

如果你使用 Eclipse 作为你的 IDE，我会推荐优秀的 eclipse 插件[内存分析器](http://www.eclipse.org/mat/)

另一种选择是使用 JVisualVM，它也可以读取（和创建）堆转储，并且随每个 JDK 一起提供。您可以在 JDK 的 bin 目录中找到它。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-10-15T23:24:01.813

VisualVm 不随 Apple JDK 一起提供。您可以将 VisualVM Mac Application bundle(dmg) 用作单独的应用程序来弥补这一点。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-18T18:15:05.683

MAT、jprofiler、jhat 是可能的选项。由于 jhat 自带 jdk，你可以很容易地启动它来做一些基本的分析。[看一下这个](http://ranjanrakesh.wordpress.com/2013/04/17/java-memory-analysis-just-using-jdk/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-11-17T06:01:27.107

如果你只是运行 jmap -histo:live 或 jmap -histo，它会在控制台上输出内容！

# weblogic - 在 weblogic 上部署 liferay 时遇到异常

> ID：15130958
> 
> 赞同：-2
> 
> 时间：2013-02-28T08:38:13.707
> 
> 标签：weblogic, liferay, yui-compressor

我已经在 weblogic 10.3 上部署了 liferay 5.2 sp2，并且在部署部分应用程序的状态是活动的。现在，当我在浏览器“nakulpatel:7001”中传递 URL 时，它显示“500--内部服务器错误”。

```
java.lang.NoClassDefFoundError: com/yahoo/platform/yui/compressor/JavaScriptCompressor
    at com.liferay.portal.util.MinifierUtil._minifyJavaScript(MinifierUtil.java:80)
    at com.liferay.portal.util.MinifierUtil.minifyJavaScript(MinifierUtil.java:52)
    at com.liferay.portal.servlet.filters.strip.StripFilter.strip(StripFilter.java:251)
    at com.liferay.portal.servlet.filters.strip.StripFilter.processFilter(StripFilter.java:159)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:91)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:154)... 
```

请指导我如何解决此问题。我根本没有使用过 maven。仅部署了 liferay 5.2 的 .war 文件并且无法启动门户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:10:44.080

你得到它的原因是因为 Liferay 使用 YUI 压缩器来做 Javascript/CSS 缩小。缩小可以通过两种方式完成——运行时与构建时间。看起来liferay通过servlet过滤器实现了前者。

我检查了我的 Liferay 6.0.x 安装。下有一个**liferay-yuicompressor.jar**`\liferay-portal-6.0.6\tomcat-6.0.29\webapps\ROOT\WEB-INF`。Lfieray 5.2 应该有类似的目录结构。`WEB-INF/lib`确保在部署到 WebLogic 10.3 时包含此 jar 文件

# vb.net - 使用 RS232 VB.net 发送字符串和十六进制数据

> ID：15130960
> 
> 赞同：0
> 
> 时间：2013-02-28T08:38:15.180
> 
> 标签：vb.net, com, serial-port

我一直在开发一个与 COM 设备（Fluke 123 Scopemeter）通信的程序。当我通过 ASCII 数据发送时，我没有遇到任何问题。

我需要做的是通过 ASCII 和 HEX 数据的组合发送。我一直在查看该站点上的许多帖子，但它们似乎专注于专门发送 HEX 数据。我需要找到一种发送组合 ASCII 和 HEX 的方法 - 本质上，我需要找到一种有效格式化 HEX 数据的方法，以便 COM 设备能够理解它。

下面是我如何构建字符串的示例。它给了我一个错误“从字符串 PS #0x 转换为类型 'Double' 无效”，我假设这是因为我混合了两种数据类型！我希望我在做一些非常愚蠢的事情，这实际上是直截了当！

```
'Building my command line
Command = "PS"
Command += ControlChars.Cr
Command += "#0 x"
Command += &H0 + &H2 + &H0 + &H0 + &H0
Command += " y"
Command += &H0 + &H1 + &H0 + &H0

...

'Writing my command to the COM device
moRS232.Write(Command) 
```

任何人都可以提供的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:18:10.900

诀窍是发送字节，这意味着您的字符串需要转换为字节。一个例子：

```
 Dim buf As New List(Of Byte)
    buf.AddRange(moRS232.Encoding.GetBytes("PS" & ControlChars.Cr & "#0 x"))
    buf.AddRange(New Byte() {0, 2, 0, 0, 0})
    buf.AddRange(moRS232.Encoding.GetBytes(" y"))
    buf.AddRange(New Byte() {0, 1, 0, 0})
    moRS232.Write(buf.ToArray, 0, buf.Count) 
```

你有显示协议的手册吗？如果粘贴链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:45:59.307

你是对的 - 如果 Fluke 同时获取 ascii 和 hex 数据（即使可以通过一种方法发送），它会变得非常混乱。

因此，如果 Write 方法需要一个字符串，那么您需要将您的十六进制命令转换为字符串以及查看 ASC() / CHR() 命令

# android - 从相机拍照时出现空指针异常

> ID：15130971
> 
> 赞同：2
> 
> 时间：2013-02-28T08:38:53.597
> 
> 标签：android, nullpointerexception, android-camera

我正在尝试从相机（三星 S3 特定问题）捕获图片，下面是我的相同代码：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {  

    if( requestCode == 1337 && resultCode== RESULT_OK){
        Bundle extras = data.getExtras();
            if (extras != null){    
                   BitmapFactory.Options options = new BitmapFactory.Options();
            // options.inSampleSize = 1;
            // options.inPurgeable = true;
            // options.inInputShareable = true;
             thumbnail = (Bitmap) extras.get("data");
             image(thumbnail);
    }else{
                Toast.makeText(CreateProfile.this, "Picture NOt taken", Toast.LENGTH_LONG).show();
         } 
```

图像功能：

```
 public void image(Bitmap thumbnail){
       Bitmap photo = thumbnail; 
       ByteArrayOutputStream bos = new ByteArrayOutputStream();
       photo.compress(Bitmap.CompressFormat.PNG, 100, bos);
       b = bos.toByteArray();
       ImageView imageview = (ImageView)findViewById(R.id.imageView1);
      } 
```

启动相机意图的代码：

```
 if(i==0){
                       Intent cameraIntent = new  Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
                       startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST); 
                } 
```

原木猫：

[http://img534.imageshack.us/img534/8388/logcamera.png](http://img534.imageshack.us/img534/8388/logcamera.png)

[http://img585.imageshack.us/img585/7559/camera1u.png](http://img585.imageshack.us/img585/7559/camera1u.png)

我的代码在 HTC Wildfire S、Dell XCD35、Samsung Galaxy Grand 和 Samsung Galaxy Tab 上运行良好，但对于 S3 中显示此错误的原因知之甚少。有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:50:15.607

好吧，从您的`LOGCAT`输出来看，相机活动似乎正在返回拍摄照片的 URI。并且没有缩略图，只是为了确保使用：

```
if (extras.keySet().contains("data") ){
       thumbnail = (Bitmap) extras.get("data");
       image(thumbnail);
} 
```

关于解析 Uri 在意图中，您可以使用以下内容：

```
Uri imageURI = getIntent().getData();
ImageView imageview = (ImageView)findViewById(R.id.imageView1);
imageview.setImageURI(imageURI); 
```

所以完整的代码看起来像这样：

```
 if (extras.keySet().contains("data") ){
       thumbnail = (Bitmap) extras.get("data");
       image(thumbnail);
} else {
    Uri imageURI = getIntent().getData();
    ImageView imageview = (ImageView)findViewById(R.id.imageView1);
    imageview.setImageURI(imageURI);
} 
```

# html - span 在 Firefox 中有偏移，但在 chrome 中没有

> ID：15130975
> 
> 赞同：1
> 
> 时间：2013-02-28T08:39:06.093
> 
> 标签：html, css, google-chrome, firefox

我的html真的很简单

```
<div class="btns">
    <div id="green">    <span class="btn btn-block btn-large btn-success disabled green_btn">Green</span>

    </div>
    <div id="red">
        <form class="button_to" >
            <div>
                <input class="btn btn-block btn-large btn-danger red_btn" type="submit"
                value="Red">
            </div>
        </form>
    </div>
</div> 
```

css

```
.btns {
    position: relative;
}

#green, #red {
    display: inline-block;
    width: 49%;
    position: relative;
}
.green_btn, .red_btn {
    margin-bottom: 4px;
} 
```

正如你在这里看到的[http://jsfiddle.net/HajHV/9/](http://jsfiddle.net/HajHV/9/)

在 chrome 上看起来像这样

![镀铬](../Images/55afcde4eabc940525052d52f4f8e9b2.png)

但在 Firefox 上

![在火狐上](../Images/391ba32710441d43360de381faad9fa1.png)

我不明白这个区别。在 html/css 中没有什么对这个很重要。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:43:11.017

添加`display: inline-block;`到`.green_btn, .red_btn {...}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:43:30.637

添加`vertical-align:top`

```
#green, #red {
    display: inline-block;
    width: 49%;
    position: relative; vertical-align:top
} 
```

**[演示](http://jsfiddle.net/HajHV/10/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:45:47.017

或者，尝试：

```
.btns {
    position: relative;
}

#green, #red {
    display: inline-block;
    width: 49%;
    position: relative;
}
.green_btn, .red_btn {
    margin-bottom: 4px;
}
#green {
    float:left;
}

#red {
    margin-left: 4px;
} 
```

# android - 退出安卓应用

> ID：15130978
> 
> 赞同：0
> 
> 时间：2013-02-28T08:39:15.137
> 
> 标签：android, android-activity, android-lifecycle

假设我有 A->B->C->D 活动。我想总是从 C 中退出`onBackPressed()`。

在这种情况下如何退出应用程序。我试过`FLAG_ACTIVITY_CLEAR_TOP`但没有成功。

我的最低 SDK 是`API 8`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:44:39.913

使用此代码。

```
@Override
    public void onBackPressed()
    {
        // TODO Auto-generated method stub
        super.onBackPressed();
        finish();
        Intent startMain = new Intent(Intent.ACTION_MAIN);
        startMain.addCategory(Intent.CATEGORY_HOME);
        startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startMain.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(startMain);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:52:55.720

```
public void AppExit()
{

    this.finish();
    Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_HOME);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(intent);

    /*int pid = android.os.Process.myPid();=====> use this if you want to kill your activity. But its not a good one to do.
    android.os.Process.killProcess(pid);*/

} 
```

call this method when you click `back` button

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T05:58:24.837

试试这个：- 在活动 A 中，

```
 startActivity(new Intent("B"),request_code); 
```

在 onActivityResult() 函数中，

```
public void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if (requestCode == request_code) 
        {
            if(resultCode == RESULT_OK)
            {
                finish();
            }
        }
    } 
```

现在在活动 B 中，

```
startActivity(new Intent("C"),request_code);

public void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if (requestCode == request_code) 
        {
            if(resultCode == RESULT_OK)
            {
                setResult(RESULT_OK);
                finish();
            }
        }
    } 
```

最后在活动 C 中，

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
if ((keyCode == KeyEvent.KEYCODE_BACK)) 
{ 
    setResult(RESULT_OK);
finish();
    return true;
}
return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T09:03:30.647

如果您只想退出 C 中的 onBackPressed()，那么您所要做的就是通过执行此操作覆盖活动 A、B 和 D 中的 onBackPressed()

```
@Override
public void onBackPressed()
{
    // TODO Auto-generated method stub
} 
```

这将确保在 A、B 和 D 中按下返回键时，应用程序不会关闭。您不需要覆盖活动 C 中的 onBackPressed()，因为默认情况下 Android 会调用 finish()。但是，如果您想弹出一个警报对话框，那么您可以执行以下操作 -

```
@Override
public void onBackPressed()
{
 // TODO Auto-generated method stub
AlertDialog.Builder alertbox = new AlertDialog.Builder(this);
            alertbox.setTitle("Are you sure you want to exit the application");
            alertbox.setCancelable(false);
            alertbox.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface arg0, int arg1) {
                    // TODO Auto-generated method stub
                    finish();
                }
            });

            alertbox.setNegativeButton("No", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface arg0, int arg1) {
                }
            });

            alertbox.show();
} 
```

最后，当您尝试在 C 中完成活动时，要注意关闭以前的活动，您应该在开始新活动时调用 finish()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T08:53:52.523

嗨，您可以在要退出的 Activity 中添加此代码

```
@Override
public void onBackPressed() {
    new AlertDialog.Builder(this)
    .setIcon(android.R.drawable.ic_dialog_alert)
    .setTitle("Exit")
    .setMessage("Are you sure you want to close this APP ")
    .setPositiveButton("Yes", new DialogInterface.OnClickListener()
    {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            finish();    
        }

    })
    .setNegativeButton("No", null)
    .show();
} 
```

否则你可以参考这个[**帖子**](https://stackoverflow.com/questions/2354336/android-pressing-back-button-should-exit-the-app)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-25T12:35:12.413

使用方法完成你的 current_activity`finish();`

然后在 current_activity 的 onDestroy 中添加以下行以移除强制关闭

```
@Override
public void onDestroy()
{
    android.os.Process.killProcess(android.os.Process.myPid());
    super.onDestroy();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-30T17:45:46.690

它已经有发布时间：

[http://developer.android.com/intl/es/reference/android/app/Activity.html](http://developer.android.com/intl/es/reference/android/app/Activity.html)

```
this.FinishAffinity(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-28T08:43:27.087

您可以在您的应用程序中覆盖后退按钮的功能`Activity C`并退出应用程序（如果它被按下）。尝试这个：-

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) { //Back key pressed
       //To Do - Exit App in your case
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

# php - 德语 ä ü ö 变音符号查询不起作用

> ID：15130979
> 
> 赞同：1
> 
> 时间：2013-02-28T08:39:15.940
> 
> 标签：php, mysql

我试图通过 php 使用正常的 mysql 查询将某些内容保存到数据库中。

它工作得很好，但是当涉及到变音/突变时它不起作用。

我用正则表达式尝试了它，但这也不起作用。

有任何想法吗？

谢谢努布

# playframework-2.0 - 如何设计多模块播放应用程序

> ID：15130983
> 
> 赞同：1
> 
> 时间：2013-02-28T08:39:50.637
> 
> 标签：playframework-2.0

给定一个由几个模块组成的 Play 应用程序，并假设它们彼此不知道任何事情，我想知道将它们的输出关联起来的正确方法是什么。

假设一个应用程序由一个主模块、一个认证模块和一个支付模块组成。认证模块提供注册和签名功能，支付模块提供信用卡支付功能，主模块运行业务。

当用户注册时，作为身份验证模块的一部分的注册表单会要求提供用户名、密码、地址等……并希望还提供信用卡详细信息。信用卡详细信息应该由支付模块管理，但如果用户可以在注册时提供它们会很好。这意味着身份验证模块需要支付模块提供的用于注册新信用卡的功能......并且主模块应该以某种方式启用此功能。

任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:58:25.153

> 给定一个由多个模块组成的 Play 应用程序，并假设它们彼此不知道任何信息

你为什么这么认为？模块可以相互依赖。模块化的主要原因之一是依赖关系很好地相互分离，以明确软件的哪个部分依赖于其他部分。另一个主要原因是可重用性。

例如：通常我在每个游戏项目中使用相同的认证模块。另外，我通常为我的数据层创建一个模块，我的意思是我将我的所有实体都分离到另一个模块中，并且使用这个模型的其他模块实体可以依赖它。

另一个建议：将您想要替换的组件放在一个单独的模块中。例如，我在自己的模块中实现了短信发送服务（具有通用接口）的不同实现。因此，如果我不想替换 sms 实现，我需要做的就是替换核心项目的 Build.scala 中的依赖项。

我希望这些想法可以帮助您继续前进...

# excel - 处理两个不同税级的excel公式

> ID：15130984
> 
> 赞同：0
> 
> 时间：2013-02-28T08:39:56.313
> 
> 标签：excel, excel-formula

我正在用 Excel 制作电子表格，以帮助我了解在全职工作之外开展兼职业务可能会如何影响我的税收。我需要这样做，因为我非常接近我的下一个英国税级，我想确切地知道它可能如何影响我的财务状况。

作为其中的一部分，我正在尝试编写一个将两个数字相加的 excel 公式，然后检查这个新数字是否大于第三个数字。我将把这两个数字加在一起称为 A，将第三个数字称为 B。如果 A 不大于 B，那么我将乘以 20% 以找出欠税的金额。如果 A 大于 BI 将从 A 中减去 B 以创建数字 C 并将 B 乘以 20% 并将 C 乘以 40% 并将两者相加以产生我需要的最终数字。有人可以向我解释如何在 Excel 中编写脚本吗？我在网上找了一些例子，但我发现这种语言不是很容易理解。如果我使用的是脚本语言，我更熟悉的代码如下所示：

```
 float taxThreshold = 42011.00;
  int income = foo;

  if(taxThreshold < income)
  {
    float higherRate = income-taxThreshold;
    float standardTaxOwed = taxThreshold * 20%;
    float higherRateOwed = higherRate * 40%;
    float finalTaxOwed = standardTaxOwed+higherTaxOwed;
  }
  else
  {
    float finalTaxOwed = income * 20%;
  } 
```

我确信这很简单，我只是没有得到 excel 语法。有人可以告诉我应该怎么做吗？您不仅可以解决这个问题，还可以为我提供一种将我当前的脚本知识转化为 excel 的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:08:22.747

最简单的方法是将您的 4 个输入参数存储在一些单元格中 - 然后为它们命名。为此，请选择单元格并在显示地址的字段中键入一个有意义的名称（即编辑栏左侧）。

完成此操作后，您可以简单地使用以下公式：

```
=IF（收入>阈值，阈值*StandardTaxRate+（收入-阈值）*HighTaxRate，收入*StandardTaxRate）

```

如果没有命名，公式将是这样的：

```
=IF(B2>B1,B1*B7+(B2-B1)*B8,B2*B7)

```

这两个公式都会计算您需要支付的税款。如果您想要更明确，我会推荐这样的布局：

![在此处输入图像描述](../Images/d47e6b854165c8656888e2a30b6ad7f4.png)

公式将显示为：

```
C7: =IF(B2>B1,B1,B2)
C8: =IF(B2>B1,B2-B1,0)
D7：=B7*C7
D8：=B8*C8

```

！

# ruby-on-rails - 使用 ruby on rails 在单选按钮中调用控制器方法

> ID：15130986
> 
> 赞同：0
> 
> 时间：2013-02-28T08:40:05.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我是 ruby​​ on rails 的新手。是否可以在单选按钮内调用控制器操作。

```
<%= form_tag :action => 'show' do %>
  <strong>Select device: </strong> 
  <br></br>
  <strong>Chose: </strong><%=  radio_button_tag :name,:time, @time, :onclick => "this.parentNode.submit();"%>Time
  <%=  radio_button_tag :name,:graph%>Graph 
```

选择第一个单选按钮时，我必须去显示控制器内的方法。它工作正常。选择第二个单选按钮我还必须转到控制器内的另一种方法。怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:51:21.470

I would do the following :

The form will lead to the same action for both radio buttons.

Inside the action, depending on the selected radio, it will call the right action :

```
def show
  if params[:name] == :time
    self.action_for_time
  elsif params[:name] == :graph
    self.action_for_graph
  end
end

protected

def action_for_time
  # ...
end

def action_for_graph
  # ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:46:23.877

尝试：

```
<%= radio_button_tag :name,:graph, :onclick => "window.location.href=<YOUR_PATH>" %>Graph 
```

你可以写（例如你想去主页）

```
<%= radio_button_tag :name,:graph, :onclick => "window.location.href=/home/" %>Graph
  # or
<%= radio_button_tag :name,:graph, :onclick => "window.location.href=<%=home_path%>/" %>Graph 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T06:52:08.907

我认为这样做更干净的方法是，

```
<div id="my-select" >
--
<<view code>>
--
</div> 
```

应用程序.js

```
$(function() {

   $("#my-select").on("click",function() {
    <<do-what-you-want>>;
   });

}); 
```

我可能对你的路由和控制器有点随意，但如果你喜欢这个解决方案，你会弄明白的。

# sublimetext2 - 使用 * 进行崇高搜索（搜索多个部分）

> ID：15130988
> 
> 赞同：1
> 
> 时间：2013-02-28T08:40:07.793
> 
> 标签：sublimetext2

我想使用 sublime 搜索找到结果 -> **'the_red_cat' 。**我已经启用了正则表达式，但无法弄清楚如何获得我需要的结果。

我想沿着***the*ca***搜索一些东西，但它似乎没有产生任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:45:59.163

正则表达式`.*the.*ca.*`查找包含文本的整行。使用正则表达式搜索任意数量的字符是使用`.*`.

# javascript - document.getElementById() 为空

> ID：15130997
> 
> 赞同：-1
> 
> 时间：2013-02-28T08:40:58.987
> 
> 标签：javascript

我有这段代码。它收到错误 document.getElementById('foo') 为空。请帮助解决这个问题。

```
<script>
function doMove() {
    var foo=document.getElementById('foo');
    foo.style.left = (foo.style.left+10)+'px'; // pseudo-property code: Move right by 10px
    setTimeout(doMove(),20); // call doMove() in 20 msec
}
doMove();
</script>

</head>
<body>
<div id="foo" style="width:10px;">a</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T08:41:41.443

那是因为执行脚本时对象还不存在。

最简单的解决方案是将脚本移动到正文的末尾。

另一种解决方案是等待 DOM 被加载：

```
window.addEventListener('load', doMove); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:46:50.883

运行脚本时该元素尚不存在。您的问题的一个简单解决方案是将调用从脚本中移至 doMove 并将其称为 onload 用于 body 标记，如下所示：

```
<body onload="doMove()"> 
```

或者简单地将脚本移动到 id 为 'foo' 的 div 下方。

如果支持旧版本的 IE (pre IE9) 'addEventListener' 是一个替代方案。用以下代码段替换您对 doMove 的调用：

```
window.addEventListener('load', doMove); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:53:18.587

我已经改变了我的代码并写了这个。它现在正在读取 document.getElementById('foo')。我想每 20 毫秒移动一次我的 div 元素，因为我使用了 setTimeout() 但它什么也没做。

```
<body>
<div id="foo" style="width:10px;">a</div>
<script language="javascript">
function doMove() {
var foo=document.getElementById('foo');
     foo.style.left = parseInt(foo.style.left)+10+'px'; // pseudo-property code: Move right by 10px
     setTimeout(doMove,20); // call doMove() in 20 msec
    }
    doMove();
</script>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T08:42:24.460

将代码粘贴到正文关闭标记之前的底部。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T08:42:39.900

尝试将脚本放在文档正文的末尾。

像这样：

```
<body>
<div id="foo" style="width:10px;">a</div>
<script>
function doMove() {
var foo=document.getElementById('foo');
     foo.style.left = (foo.style.left+10)+'px'; // pseudo-property code: Move right by 10px
     setTimeout(doMove(),20); // call doMove() in 20 msec
    }
    doMove();
</script>
</body> 
```

# ruby - 是否有更简单的（单行）语法来别名一个类方法？

> ID：15130998
> 
> 赞同：58
> 
> 时间：2013-02-28T08:41:04.797
> 
> 标签：ruby

我知道我可以做到以下几点，而且只有 3 行：

```
class << self
  alias :generate :new
end 
```

但出于好奇，有没有更简单的方法（没有分号），比如：

```
class_alias :generate, :new 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-10-10T13:35:26.727

从 Ruby 1.9 开始，您可以使用该`singleton_class`方法访问类的单例对象。这样您也可以访问该`alias_method`方法。该方法本身是私有的，因此您需要使用`send`. 这是你的一个班轮：

```
singleton_class.send(:alias_method, :generate, :new) 
```

但请记住，这`alias`在这里行不通。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-12T06:26:18.503

我正在粘贴一些别名方法示例

```
class Test
  def simple_method
    puts "I am inside 'simple_method' method"
  end

  def parameter_instance_method(param1)
    puts param1
  end

  def self.class_simple_method
    puts "I am inside 'class_simple_method'"
  end

  def self.parameter_class_method(arg)
    puts arg
  end

  alias_method :simple_method_new, :simple_method

  alias_method :parameter_instance_method_new, :parameter_instance_method

  singleton_class.send(:alias_method, :class_simple_method_new, :class_simple_method)
  singleton_class.send(:alias_method, :parameter_class_method_new, :parameter_class_method)
end

Test.new.simple_method_new
Test.new.parameter_instance_method_new("I am parameter_instance_method")

Test.class_simple_method_new
Test.parameter_class_method_new(" I am parameter_class_method") 
```

> 输出

```
I am inside 'simple_method' method
I am parameter_instance_method
I am inside 'class_simple_method'
I am parameter_class_method 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-20T07:41:07.710

我不相信有任何特定于类的版本`alias`。我通常使用它，就像您之前演示的那样。

但是，您可能想研究和之间[的区别](http://andreacfm.com/2012/11/29/ruby-alias-vs-alias-method/)。这是红宝石的那些棘手领域之一，可能有点违反直觉。特别是关于后代的行为可能不是您所期望的。`alias``alias_method``alias`

希望这可以帮助！

# sas - 在 sas 中编辑相似的值

> ID：15130999
> 
> 赞同：2
> 
> 时间：2013-02-28T08:41:15.950
> 
> 标签：sas

我每周有一个交易数据集。（数量、价格、周等）但是在数据集中我有两个同一周的价格。例如，第 28 周的两个观察值（一个价格为 5.03，一个价格为 5.20）

我想要做的是根据数量计算加权平均价格并将两个不同 obs 的数量相加，这样我在第 28 周只有一个 obs。

这种情况经常发生，所以我希望能够快速完成此操作，而无需手动编辑所有价格和数量。

哦，这是在 SAS 顺便说一句！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T09:35:35.020

对价格应用 WEIGHT 语句的 PROC Summary 将为您计算。

```
proc summary data=have nway;
class week;
var quantity;
var price / weight=quantity;
output out=want (drop=_:) sum(quantity)= mean(price)=;
run; 
```