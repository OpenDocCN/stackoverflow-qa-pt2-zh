# StackOverflow 问答 15655000-15655999

# javascript - Google 身份验证：无法将用户序列化到会话中

> ID：15655002
> 
> 赞同：0
> 
> 时间：2013-03-27T09:01:25.043
> 
> 标签：javascript, node.js, express, passport.js

我正在尝试使用 PassportJS 进行一些基本的 Google 身份验证。网络上的信息量似乎相当有限，我不断遇到问题，所以我想我会在这里尝试。

我正在使用来自[https://github.com/mattgaidica/twitter-mongo](https://github.com/mattgaidica/twitter-mongo)的代码，并进行了一些修改以将其用于 Google OAuth（它不使用 Twitter 密钥，它使用 passport-google，`passport.authenticate('google', ...)`）。

我一直以这个错误结束：`'Error: failed to serialize user into session'`

```
passport.serializeUser(function(user, done) {
  console.log(user); //does not have the fields we created earlier, user.uid does not exist.
  done(null, user.uid);
}); 
```

我的护照策略：

```
passport.use(new GoogleStrategy({
    returnURL: "http://localhost:3000/auth/google/callback"
  },
  function(identifier, profile, done) {
    User.findOne({uid: profile.id}, function(err, user) {
      if(user) {
        done(null, user);
      } else {
        var user = new User();
        user.provider = "google";
        user.uid = identifier;
        user.name = profile.displayName;
        user.save(function(err) {
          if(err) { throw err; }
          done(null, user);
        });
      }
    })
  }
)); 
```

这个其他用户的字段与最初创建的不一样，其他用户发生了什么？

我对这里发生的事情有点迷茫，如果有人能让我知道我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:09:35.400

在您的查询中，您使用`profile.id`：

```
User.findOne({uid: profile.id}, function(err, user) { ... }); 
```

但这应该是`identifier`。

此外，您正在使用 Passport Google 插件的 OpenID 版本，该插件相当旧（甚至在 Node 0.10 上无法正常工作）。我建议您改用[passport-google-oauth](https://github.com/jaredhanson/passport-google-oauth)。

# ruby-on-rails - Rails :dependent => 有条件的销毁

> ID：15655005
> 
> 赞同：2
> 
> 时间：2013-03-27T09:01:31.813
> 
> 标签：ruby-on-rails

假设我有狗，皮带和主人......如果我破坏皮带，我也想摧毁狗......但如果狗有主人......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:12:21.460

您不想在`:dependent => :destroy`这里使用，而是`before_destroy`像这样使用回调：

```
#leash.rb

before_destroy :destroy_dog

def destroy_dog
  dog.destroy unless dog.owner
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-04T21:52:45.140

```
class Book < ApplicationRecord
  belongs_to :author, -> { where active: true },
                        dependent: :destroy
end 
```

也适用`has_many`，它根据`where`条件破坏对象

# java - Java 中的“final”关键字是如何工作的？（我仍然可以修改对象。）

> ID：15655012
> 
> 赞同：529
> 
> 时间：2013-03-27T09:02:18.153
> 
> 标签：java, final

在 Java 中，我们使用`final`带变量的关键字来指定其值不会被更改。但是我看到您可以更改类的构造函数/方法中的值。同样，如果变量是，`static`那么它是一个编译错误。

这是代码：

```
import java.util.ArrayList;
import java.util.List;

class Test {
  private final List foo;

  public Test()
  {
      foo = new ArrayList();
      foo.add("foo"); // Modification-1
  }
  public static void main(String[] args) 
  {
      Test t = new Test();
      t.foo.add("bar"); // Modification-2
      System.out.println("print - " + t.foo);
  }
} 
```

上面的代码工作正常，没有错误。

现在将变量更改为`static`：

```
private static final List foo; 
```

现在是编译错误。`final`这真的如何运作？

* * *

## 回答 #1

> 赞同：618
> 
> 时间：2013-03-27T10:08:12.330

这是一个**最喜欢的面试问题**。通过这个问题，面试官试图找出你对构造函数、方法、类变量（静态变量）和实例变量的对象行为的理解程度。

```
import java.util.ArrayList;
import java.util.List;

class Test {
    private final List foo;

    public Test() {
        foo = new ArrayList();
        foo.add("foo"); // Modification-1
    }

    public void setFoo(List foo) {
       //this.foo = foo; Results in compile time error.
    }
} 
```

在上面的例子中，我们为“Test”定义了一个构造函数，并给了它一个“setFoo”方法。

**关于构造函数：**使用关键字每次创建对象 只能调用**一次构造函数。**`new`您不能多次调用构造函数，因为构造函数不是为此而设计的。

**关于方法：**可以根据需要多次调用方法（甚至永远不会），并且编译器知道这一点。

**方案 1**

```
private final List foo;  // 1 
```

`foo`是一个**实例**变量。当我们创建`Test`类对象时，实例变量`foo`将被复制到`Test`类的对象中。如果我们`foo`在构造函数内部赋值，那么编译器就知道构造函数只会被调用一次，所以在构造函数内部赋值没有问题。

如果我们`foo`在一个方法内部赋值，编译器就知道一个方法可以被多次调用，这意味着值必须被多次改变，这对于一个`final`变量是不允许的。所以编译器决定构造函数是不错的选择！**您只能为最终变量赋值一次。**

**方案 2**

```
private static final List foo = new ArrayList(); 
```

`foo`现在是一个**静态**变量。当我们创建`Test`类的实例时，`foo`不会因为`foo`是静态的而被复制到对象中。现在`foo`不是每个对象的独立属性。这是`Test`类的属性。但是`foo`可以通过多个对象看到，如果使用`new`关键字创建的每个对象最终都会调用`Test`构造函数，该构造函数会在多个对象创建时更改值（记住`static foo`不是在每个对象中复制，而是在多个对象之间共享.)

**方案 3**

```
t.foo.add("bar"); // Modification-2 
```

以上`Modification-2`来自你的问题。在上述情况下，您不会更改第一个引用的对象，而是在`foo`其中添加允许的内容。如果您尝试将 a 分配`new ArrayList()`给`foo`引用变量，编译器会抱怨。
**规则**如果你已经初始化了一个`final`变量，那么你不能改变它来引用一个不同的对象。（在这种情况下`ArrayList`）

**final**类不能被子类化
**final**方法不能被覆盖。（此方法在超类中）
**最终**方法可以覆盖。（以语法方式阅读。此方法在子类中）

* * *

## 回答 #2

> 赞同：573
> 
> 时间：2013-03-27T09:03:50.473

您始终可以初始化*变量*`final`。编译器确保您只能执行一次。

请注意，对存储在`final`变量中的对象调用方法与`final`. 换句话说：`final`仅与引用本身有关，与被引用对象的内容无关。

Java 没有对象不变性的概念；这是通过仔细设计对象来实现的，并且是一项非常艰巨的工作。

* * *

## 回答 #3

> 赞同：233
> 
> 时间：2013-03-27T09:09:57.367

*Final*关键字有多种使用方式：

*   最终**类**不能被子类化。
*   最终**方法**不能被子类覆盖
*   final**变量**只能初始化一次

其他用法：

*   *当在方法体中定义匿名内部类时，在该方法范围内声明为 final 的所有变量都可以从内部类中访问*

静态类变量从 JVM 开始就存在，并且应该在类中初始化。如果您这样做，则不会出现错误消息。

* * *

## 回答 #4

> 赞同：66
> 
> 时间：2013-03-27T09:12:38.107

关键字可以用`final`两种不同的方式解释，具体取决于它的用途：

**值类型：**对于`int`s、`double`s等，会保证值不能改变，

**引用类型：**对于对象`final`的引用，确保**引用**永远不会改变，这意味着它将始终引用同一个对象。它不保证被引用的对象内部的值保持不变。

因此，`final List<Whatever> foo;`确保`foo`始终引用*同一个*列表，但所述列表*的内容*可能会随着时间而改变。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2013-03-27T09:06:28.713

如果您制作`foo`静态，则必须在类构造函数（或定义它的内联）中对其进行初始化，如下例所示。

**类构造函数（不是实例）：**

```
private static final List foo;

static
{
   foo = new ArrayList();
} 
```

**排队：**

```
private static final List foo = new ArrayList(); 
```

这里的问题不是`final`修饰符如何工作，而是`static`修饰符如何工作。

修饰符在`final`对构造函数的调用完成时强制对引用进行初始化（即，您必须在构造函数中对其进行初始化）。

当您在线初始化一个属性时，它会在您为构造函数定义的代码运行之前被初始化，因此您会得到以下结果：

*   if `foo`is `static`,`foo = new ArrayList()`将在`static{}`您为类定义的构造函数执行之前执行
*   如果`foo`不是`static`，`foo = new ArrayList()`将在您的构造函数运行之前执行

当您不内联初始化属性时，`final`修饰符会强制您对其进行初始化，并且您必须在构造函数中这样做。如果您还有一个`static`修饰符，则必须在其中初始化属性的构造函数是类的初始化块：`static{}`。

您在代码中遇到的错误来自于在`static{}`加载类时运行的事实，在您实例化该类的对象之前。因此，在创建类时您还没有初始化`foo`。

将`static{}`块视为类型对象的构造函数`Class`。这是您必须初始化`static final`类属性的地方（如果没有内联完成）。

**边注：**

`final`修饰符仅确保原始类型和引用的 const-ness 。

当你声明一个`final`对象时，你得到的是对该对象的`final` **引用**，但对象本身不是常量。

声明属性时真正实现的`final`是，一旦您为特定目的声明了一个对象（如`final List`您已声明的那个），那么只有该对象将用于该目的：您将无法更改`List foo`为另一个`List`，但您仍然可以`List`通过添加/删除项目来更改您的项目（`List`您使用的项目将是相同的，只是其内容发生了变化）。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2014-09-24T20:34:16.993

这是一个非常好的面试问题。有时他们甚至可能会问你最终对象和不可变对象有什么区别。

1）当有人提到最终对象时，意味着引用不能改变，但它的状态（实例变量）可以改变。

2) 不可变对象是其状态*不能*改变，但其引用可以改变的对象。前任：

```
 String x = new String("abc"); 
    x = "BCG"; 
```

ref 变量 x 可以更改为指向不同的字符串，但“abc”的值不能更改。

3) 实例变量（非静态字段）在构造函数被调用时被初始化。因此，您可以在构造函数中为变量初始化值。

4）“但我看到你可以更改类的构造函数/方法中的值”。-- 你不能在方法内部改变它。

5) 在类加载期间初始化一个静态变量。所以你不能在构造函数中初始化，它必须在它之前完成。因此，您需要在声明本身*期间*为静态变量赋值。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2017-01-03T04:45:18.923

java中的`final`关键字用于限制用户。java`final`关键字可以在许多上下文中使用。最终可以是：

1.  多变的
2.  方法
3.  班级

`final`关键字可以和变量一起使用，没有值的变量`final`称为空白`final`变量或未初始化`final`变量。它只能在构造函数中初始化。空白`final`变量也可以是仅在块`static`中初始化的变量。`static`

**Java最终变量：**

如果将任何变量设为`final`，**则无法更改变量的值**（`final`它将是常量）。

`final`变量示例

有一个 final 变量 speedlimit，我们要改变这个变量的值，但是它不能改变，因为 final 变量一旦赋值就永远不能改变。

```
class Bike9{  
    final int speedlimit=90;//final variable  
    void run(){  
        speedlimit=400;  // this will make error
    }  

    public static void main(String args[]){  
    Bike9 obj=new  Bike9();  
    obj.run();  
    }  
}//end of class 
```

**Java最终类：**

如果您将任何类设为`final`，**则无法扩展**它。

最后一课的例子

```
final class Bike{}  

class Honda1 extends Bike{    //cannot inherit from final Bike,this will make error
  void run(){
      System.out.println("running safely with 100kmph");
   }  

  public static void main(String args[]){  
      Honda1 honda= new Honda();  
      honda.run();  
      }  
  } 
```

**Java最终方法：**

如果您将任何方法设为最终方法，**则无法覆盖**它。

方法示例`final`（Honda 中的 run() 无法覆盖 Bike 中的 run()）

```
class Bike{  
  final void run(){System.out.println("running");}  
}  

class Honda extends Bike{  
   void run(){System.out.println("running safely with 100kmph");}  

   public static void main(String args[]){  
   Honda honda= new Honda();  
   honda.run();  
   }  
} 
```

分享自： [http ://www.javatpoint.com/final-keyword](http://www.javatpoint.com/final-keyword)

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2016-06-29T16:05:11.723

值得一提的是一些简单的定义：

**类/方法**

> 您可以将类的部分或全部方法声明为`final`，以表明该方法不能被子类覆盖。

**变量**

> 一旦`final`变量被初始化，它总是包含相同的值。

`final`根据具体情况，基本上避免被任何东西（子类，变量“重新分配”）覆盖/覆盖。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2021-01-30T20:04:02.960

***`"A final variable can only be assigned once"`***

## **`*Reflection*`**- *“哇哇等等，拿着我的啤酒”*。

* * *

**`final`字段**冻结**在两种情况下发生：**

 ***   构造函数结束。
*   当反射设置字段的值时。（*想多少次就多少次*）

* * *

***让我们违法***

```
public class HoldMyBeer 
{
    final int notSoFinal;

    public HoldMyBeer()
    {
       notSoFinal = 1;
    }

    static void holdIt(HoldMyBeer beer, int yetAnotherFinalValue) throws Exception
    {
       Class<HoldMyBeer> cl = HoldMyBeer.class;
       Field field = cl.getDeclaredField("notSoFinal");
       field.setAccessible(true);
       field.set(beer, yetAnotherFinalValue);
    }

    public static void main(String[] args) throws Exception 
    {
       HoldMyBeer beer = new HoldMyBeer();
       System.out.println(beer.notSoFinal);
       holdIt(beer, 50);
       System.out.println(beer.notSoFinal);
       holdIt(beer, 100);
       System.out.println(beer.notSoFinal);
       holdIt(beer, 666);
       System.out.println(beer.notSoFinal);
       holdIt(beer, 8888);
       System.out.println(beer.notSoFinal);
    }    
} 
```

***输出：***

```
1
50
100
666
8888 
```

“ *final”*字段被分配了**5 个不同的** *“final”*值（*注意引号*）。而且它可能会一遍又一遍地被分配不同的值......

*为什么？因为反射就像 Chuck Norris，如果它想改变一个已初始化的 final 字段的值，它就会这样做。有人说他本人就是将新值推入堆栈的人：*

```
Code:
   7: astore_1
  11: aload_1
  12: getfield                
  18: aload_1
  19: bipush        50        //wait what
  27: aload_1
  28: getfield                
  34: aload_1
  35: bipush        100       //come on...
  43: aload_1
  44: getfield                
  50: aload_1
  51: sipush        666      //...you were supposed to be final...
  60: aload_1
  61: getfield                
  67: aload_1
  68: sipush        8888     //ok i'm out whatever dude
  77: aload_1
  78: getfield 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-02-17T02:05:35.797

*`final`*是Java中用于限制用户的保留关键字，可以应用于成员变量、方法、类和局部变量。在 Java 中， final 变量通常用*`static`*关键字声明，并被视为常量。例如：

```
public static final String hello = "Hello"; 
```

当我们在*`final`*变量声明中使用关键字时，存储在该变量中的值以后不能更改。

例如：

```
public class ClassDemo {
  private final int var1 = 3;
  public ClassDemo() {
    ...
  }
} 
```

**注意**：声明为 final 的类不能扩展或继承（即，不能有超类的子类）。还需要注意的是，声明为 final 的方法不能被子类覆盖。

**使用 final 关键字的好处在** [这个线程](https://stackoverflow.com/questions/4279420/does-use-of-final-keyword-in-java-improve-the-performance)中得到了解决。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-06-27T23:48:06.357

阅读所有答案。

还有另一个用户案例`final`可以使用关键字，即在方法参数中：

```
public void showCaseFinalArgumentVariable(final int someFinalInt){

   someFinalInt = 9; // won't compile as the argument is final

} 
```

可用于不应更改的变量。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-01-27T20:04:40.823

假设你有两个钱盒，红色和白色。您只为这些钱盒分配了两个孩子，并且不允许他们互换它们的钱盒。所以你有红色或白色的钱盒（最终）你不能修改盒子但你可以把钱放在你的盒子上。没人在乎（修改-2）。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-07-22T19:02:21.247

首先，代码中初始化（即第一次分配） foo 的位置在这里：

```
foo = new ArrayList(); 
```

foo 是一个对象（类型为 List），因此它是*引用*类型，而不是*值*类型（如 int）。因此，它包含对存储 List 元素的内存位置（例如 0xA7D2A834）的引用。像这样的线条

```
foo.add("foo"); // Modification-1 
```

不要更改 foo 的值（同样，它只是对内存位置的引用）。相反，他们只是将元素添加到引用的内存位置。要违反*final*关键字，您必须再次尝试重新分配 foo，如下所示：

```
foo = new ArrayList(); 
```

那*会给*你一个编译错误。

* * *

现在，考虑一下添加*static*关键字时会发生什么。

当您没有 static 关键字时，实例化该类的每个对象都有自己的 foo 副本。因此，构造函数将值分配给 foo 变量的空白、新副本，这非常好。

但是，当您确实有 static 关键字时，与该类关联的内存中只存在一个 foo 。如果您要创建两个或更多对象，则构造函数每次都会尝试重新分配一个 foo，这违反了*final*关键字。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-03-27T09:08:24.223

当您将其设为静态最终时，应在静态初始化块中对其进行初始化

```
 private static final List foo;

    static {
        foo = new ArrayList();
    }

    public Test()
    {
//      foo = new ArrayList();
        foo.add("foo"); // Modification-1
    } 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-03-27T09:03:55.613

1.  由于最终变量是非静态的，因此可以在构造函数中对其进行初始化。但是如果你把它设为静态，它就不能被构造函数初始化（因为构造函数不是静态的）。
2.  添加到列表预计不会通过使列表最终化而停止。`final`只是将引用绑定到特定对象。您可以自由更改该对象的“状态”，但不能更改对象本身。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-03-27T09:09:30.237

关键字表示一个`final`变量只能被初始化一次。在您的代码中，您只执行最终的一次初始化，因此满足条款。此语句执行`foo`. 注意`final`!= 不可变，它只意味着引用不能改变。

```
foo = new ArrayList(); 
```

当您声明`foo`为`static final`变量时，必须在加载类时进行初始化，并且不能依赖实例化（也就是对构造函数的调用）来初始化`foo`，因为静态字段必须在没有类实例的情况下可用。不能保证在使用静态字段之前已经调用了构造函数。

`static final`当你在场景下执行你的方法时，`Test`类在实例化之前加载`t`，此时没有实例化`foo`意味着它还没有被初始化，所以`foo`设置为所有对象的默认值，即`null`. 在这一点上，我假设您的代码`NullPointerException`在您尝试将项目添加到列表时抛出 a 。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-01-14T03:49:16.070

我想在这里写一个更新的和深入的答案。

`final`关键字可以在多个地方使用。

1.  班级

A`final class`表示***没有***其他类可以***扩展***该最终类。当 Java 运行时 ( ***JRE*** ) 知道对象引用的类型是最终类（比如 F）时，它知道该引用的值只能是 F 类型。

前任：

```
F myF;
myF = new F();    //ok
myF = someOther;  //someOther cannot be in type of a child class of F.
                  //because F cannot be extended. 
```

因此，当它执行该对象的任何方法时，该方法***不需要在运行时使用******[virtual table](https://en.wikipedia.org/wiki/Virtual_method_table)***来解析。即不能应用运行时多态性。所以运行时间并不关心这一点。这意味着它可以节省处理时间，从而提高性能。

2.  方法

任何类的 A`final method`意味着扩展该类的任何子类***都不能覆盖***该最终方法。因此，这种情况下的运行时行为也与我之前提到的类行为完全相同。

3.  字段、局部变量、方法参数

如果将上述任何一种指定为`final`，则表示该值已经确定，因此***无法更改该值***。

前任：

对于字段，本地参数

```
final FinalClass fc = someFC; //need to assign straight away. otherwise compile error.
final FinalClass fc; //compile error, need assignment (initialization inside a constructor Ok, constructor can be called only once)
final FinalClass fc = new FinalClass(); //ok
fc = someOtherFC; //compile error
fc.someMethod(); //no problem
someOtherFC.someMethod(); //no problem 
```

对于方法参数

```
void someMethod(final String s){
    s = someOtherString; //compile error
} 
```

这仅仅意味着`final`参考值的值不能改变。即只允许一个初始化。在这种情况下，在运行时，由于***JRE***知道值不能更改，它会将所有这些最终值（最终引用）加载到***L1 缓存***中。因为它***不需要从******主内存***一次又一次地***加载***。否则它会加载到 L2 缓存并不时从主内存加载。所以这也是性能的提升。

 *所以在以上3种场景中，当我们没有`final`在可以使用的地方指定关键字时，不用担心，[编译器优化](https://www.ibm.com/support/knowledgecenter/en/ssw_aix_72/com.ibm.aix.performance/comp_opt_tech.htm)会为我们做这件事。编译器优化还为我们做了很多其他的事情。:)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-10-07T06:26:44.330

以下是使用 final 的不同上下文。

**最终变量**一个最终变量只能赋值一次。如果该变量是一个引用，这意味着该变量不能被重新绑定以引用另一个对象。

```
class Main {
   public static void main(String args[]){
      final int i = 20;
      i = 30; //Compiler Error:cannot assign a value to final variable i twice
   }
} 
```

final 变量可以稍后赋值（声明时不强制赋值），但只能赋值一次。

**最终类**最终类不能扩展（继承）

```
final class Base { }
class Derived extends Base { } //Compiler Error:cannot inherit from final Base

public class Main {
   public static void main(String args[]) {
   }
} 
```

**最终方法**最终方法不能被子类覆盖。

```
//Error in following program as we are trying to override a final method.
class Base {
  public final void show() {
       System.out.println("Base::show() called");
    }
}     
class Derived extends Base {
    public void show() {  //Compiler Error: show() in Derived cannot override
       System.out.println("Derived::show() called");
    }
}     
public class Main {
    public static void main(String[] args) {
        Base b = new Derived();;
        b.show();
    }
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-12-23T02:10:04.280

以上都是正确的。此外，如果您不希望其他人从您的类创建子类，则将您的类声明为 final。然后它成为你的类树层次结构的叶级，没有人可以进一步扩展它。避免巨大的类层次结构是一个很好的做法。***

# symfony - Symfony2 如何知道 sass 和 compass 安装在哪里？

> ID：15655016
> 
> 赞同：0
> 
> 时间：2013-03-27T09:02:40.480
> 
> 标签：symfony, assetic

我已经安装了 Sass 和 Compass，使用：

```
gem install sass
gem install compass 
```

现在我正在尝试在 symfony2 上集成 Sass、Compass 和 Assetic。但我不明白*Symfony2 如何在我的系统（Windows 8）上找到 Sass 和 Compass 安装*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:13:45.087

您可以提供可执行文件的路径作为资产配置的一部分，这在文档中有所介绍；

[http://symfony.com/doc/current/reference/configuration/assetic.html](http://symfony.com/doc/current/reference/configuration/assetic.html)

# php - 用于重定向的 window.location (JS) 与 header() (PHP)

> ID：15655017
> 
> 赞同：20
> 
> 时间：2013-03-27T09:02:43.730
> 
> 标签：php, javascript, redirect, meta

**使用 JS：（**在`<head>`标签中）

```
<script>window.location="https://stackoverflow.com";</script> 
```

**使用 PHP :** (在`<head>`标签中)

```
header('Location: https://stackoverflow.com');
end(); 
```

我应该使用哪一个？或其他 ？

那么**使用** `<meta>`呢？

```
<meta http-equiv="refresh" content="0;url=https://stackoverflow.com"/> 
```

* * *

***很多好的答案，我不知道我会接受哪个答案，非常感谢***

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-27T09:04:12.017

所有选项的结果都是相同的。重定向。

`<meta>`在 HTML 中：

*   显示您网站的内容，并在几（或 0）秒后重定向用户。
*   不需要启用 JavaScript。
*   不需要PHP。

`window.location`在 JS 中：

*   需要启用 Javascript。
*   不需要PHP。
*   显示您网站的内容，并在几（或 0）秒后重定向用户。
*   重定向可以依赖于任何条件`if (1 === 1) { window.location.href = 'http://example.com'; }`。

`header('Location:')`在 PHP 中：

*   不需要启用 JavaScript。
*   需要 PHP。
*   重定向将首先执行，用户永远看不到后面的内容。`header()`必须是 php 脚本中的第一个命令，然后才能输出任何其他命令。如果您尝试在标头之前输出一些内容，将收到一个`Warning: Cannot modify header information - headers already sent`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-27T09:09:13.450

在 JS 中设置位置的更好方法是：

```
window.location.href = 'https://stackoverflow.com'; 
```

是使用 PHP 还是 JS 来管理重定向取决于您的代码在做什么以及如何操作。但是，如果您能够使用 PHP；也就是说，如果您打算使用 PHP 将一些 JS 代码发送回浏览器，只是告诉浏览器转到其他地方，那么逻辑建议您应该切断中间人并直接通过 PHP 告诉浏览器。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-27T09:18:00.937

这取决于您希望如何以及何时将用户重定向到另一个页面。

如果您想**立即将**用户重定向到另一个页面而不让他看到任何中间站点，您应该使用 PHP`header`重定向方法。

如果您有 Javascript 并且**用户的某些操作**必须导致他进入另一个页面，那么您应该使用`window.location`.

`meta`每当您看到这些“您的下载应自动开始”消息时，通常会在下载站点上使用标记刷新。你可以让用户加载一个页面，**等待一段时间，然后**在没有Javascript的情况下将他重定向（例如到一个要下载的文件）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-27T09:06:14.907

如果您可以使用 JavaScript 重定向，那么 PHP 重定向会更好，您会导致客户端在重定向之前加载页面，而使用 PHP 重定向会发送正确的标头。

但是 PHP 不应该进入 <head>，它应该在任何输出发送到客户端之前进入，否则会导致错误。

使用 <meta> 标记与 Javascript 在执行重定向之前导致初始页面加载具有相同的问题。如果您可以使用它们，服务器端重定向几乎总是更好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-27T09:05:58.733

当 JS 关闭时，第一种情况将失败。它也有点慢，因为必须先解析 JS（必须加载 DOM）。但是 JS 更安全，因为目的地**不知道引用者**，并且您的重定向可能会被跟踪（引用者通常不可靠，但这是某些东西）。

您还可以使用[元刷新](http://www.w3.org/TR/WCAG20-TECHS/H76.html)标签。它还需要加载 DOM。

# php - php如何在不进行数字舍入的情况下将文件大小从字节单位缩短为更大的单位

> ID：15655021
> 
> 赞同：-1
> 
> 时间：2013-03-27T09:03:07.000
> 
> 标签：php, numbers, byte, rounding

让我举一个例子来解释我所期望的。示例：我的文件大小为“3147483648 字节”，我想将其转换为以下适当的文件大小：2 GB + 70 MB + 333 KB + 512 字节。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:46:24.540

见官方 php.net 网站：

```
<?php
function human_filesize($bytes, $decimals = 2) {
  $sz = 'BKMGTP';
  $factor = floor((strlen($bytes) - 1) / 3);
  return sprintf("%.{$decimals}f", $bytes / pow(1024, $factor)) . @$sz[$factor];
}
?> 
```

[http://www.php.net/manual/fr/function.filesize.php#106569](http://www.php.net/manual/fr/function.filesize.php#106569)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:07:39.117

您可以为此编写自己的函数：类似于

```
bytes = filesize % 1024;
filesize = (int)(filesize / 1024);
kbytes = filesize % 1024;
filesize = (int)(filesize / 1024); 
```

等等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:10:07.290

我找到了解决方案。我真的不喜欢它如何使用递归，但它得到了我想要的。

```
function shortenBytes($sizeInBytes){

    $units = array('Bytes', 'KB', 'MB', 'GB', 'TB', 'PB' , 'EB', 'ZB', 'YB');

    $resultArray = array(
        'YB' => 0,'ZB' => 0,'EB' => 0,'PB' => 0,'TB' => 0,
        'GB' => 0,'MB' => 0,'KB' => 0,'Bytes' => 0);

    $remainder = $sizeInBytes;
    $i = count($units);
    while($i >= 0)
    {
        $pownumber = pow(1024, $i);

        if($sizeInBytes >= $pownumber){
            $resultArray[$units[$i]] = (int)($sizeInBytes / $pownumber);
            $remainder = abs($sizeInBytes % $pownumber);
            $i--;
            $remainder = recursiveGetUnitArray($remainder,$i,$resultArray);
        }
        $sizeInBytes = $remainder;
        $i--;
    }

    return $resultArray;
}

function recursiveGetUnitArray($sizeInBytes, $i, &$resultArray){
    $units = array('B', 'KB', 'MB', 'GB', 'TB', 'PB' , 'EB', 'ZB', 'YB');

    $remainder = $sizeInBytes;

    $pownumber = pow(1024, $i);
    if($sizeInBytes >= $pownumber){
        $resultArray[$units[$i]] = (int)($sizeInBytes / $pownumber);
        $remainder = abs($sizeInBytes % $pownumber);
        $i--;
        $remainder = recursiveGetUnitArray($remainder,$i,$resultArray);
    }
    return $remainder;
} 
```

的结果`shortenBytes(3147483648);`

```
 array (size=9)
              'YB' => int 0
              'ZB' => int 0
              'EB' => int 0
              'PB' => int 0
              'TB' => int 0
              'GB' => int 2
              'MB' => int 70
              'KB' => int 333
              'Bytes' => int 512 
```

# mysql - while循环在获取一些数据后终止

> ID：15655030
> 
> 赞同：0
> 
> 时间：2013-03-27T09:03:47.983
> 
> 标签：mysql, while-loop

我编写了一个创建临时表并通过从临时表中获取行来执行查询的过程。我在临时表中有大约 13486 行。但是当我调用该过程时，我观察到该过程在获取后终止临时表中的 107 行。此外，我还观察到这个值不是恒定的。有时是 107，有时是 114，有时只是 100。为什么会发生这种情况？请需要帮助？有人请..这是我的程序。我知道while循环将终止> 1000次迭代。请建议我一种方法来克服这个问题。

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `lookup`.`test` $$  
CREATE PROCEDURE `lookup`.`test` ()  
BEGIN

CREATE  TEMPORARY  TABLE  lookup.airportname(id  int  AUTO_INCREMENT,PRIMARY KEY(id))
AS (select distinct airport_id from lookup.airport);  
SET @num=0;  
SET @arpt=NULL;  
SELECT count(*) INTO @num FROM airportname;  
SET @i=0;  

while @i<@num do  
SELECT airport_id INTO @arpt FROM airportname WHERE id=@i;  
select @arpt,@i;    
set @i=@i+1;  
end while;  
END $$ 

DELIMITER ; 
```

我正在使用mysql查询浏览器。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:07:50.553

如果你想将值插入 id 那么它不应该是 auto_increment。- 从表定义中删除 auto_increment，它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:41:24.800

分隔符 |

创建过程employee_select()

开始

声明 empno,done int(9);

为从 Gross_salary 中选择 emp_no 声明 emp_select 游标；

DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

打开emp_select；// 光标打开

read_loop: loop // 开始一一循环所有数据

```
fetch emp_select into empno; // fetching the select value into variable empno 
```

//注意：变量名不能与select语句中的列名相同"

```
IF done THEN
   LEAVE read_loop;   // if no more rows, this makes it to leave the loop"
END IF;

//Enter the code you want do for each row 

 end loop; 
```

关闭emp_select；

结束 |

分隔符；

# domain-driven-design - 没有 CQRS 的 EventStore

> ID：15655037
> 
> 赞同：8
> 
> 时间：2013-03-27T09:04:05.350
> 
> 标签：domain-driven-design, neventstore

我看过很多关于 EventStores 的文章，但所有文章都伴随着关于 CQRS 的讨论。

我们希望使用 EventStores 来集成有界上下文，但希望坚持使用传统的 ORM 来读取/写入聚合，以避免命令/查询和单独的读取模型在我们的例子中会增加太多的复杂性。

鉴于将这两个概念一起讨论如此流行，人们会认为它们注定要一起生活 - 与为聚合/CQRS/读取模型实现 EventStore 相比，在没有 CQRS 的情况下做 EventStore 'lite' 是否存在陷阱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T21:49:05.703

跑到[NoSql Distilled](http://martinfowler.com/books/nosql.html) - 你可以通过几天无所事事来节省大量时间，而是阅读它并绘制出你所追求的东西。如果你正在“读/写聚合”，你应该考虑像 RavenDB 这样的主要数据库。

请注意，事件存储标签是针对 JOliver 事件存储的，它具有关键的架构概念

你也有一些事情会稍微倒退，因为要产生事件，你的域以特定的方式构建以促进这一点。与您在问题中提出事物的方式形成鲜明对比的关键事物（解释得很糟糕和/或不公平：我想使用事件存储来存储事件 - 我可以自己做剩下的事情）

1.  事件按聚合进行批处理 - 它是事件管理的真正单元

2.  派往某事。

如果您不想要事件源域模型，请研究队列管理解决方案。这是一件非常合法的事情——只是不要假装 Event Store 是一个通用的事件发布子队列。

让 Dispatcher Project to Denormalizers 构建读取模型很容易——您可以使用各种奇特的东西，但使用 SQL SB 等熟悉的工具和 PetaPoco 等简单的数据库层就可以了。

你真的用过 CommonDomain 和 EventStore 吗？您是否阅读过 nuget 中的自述文档？你看过~~2~~ JOliver 的视频吗？

*   [CQRS - 2010 年犹他州代码训练营 - 第 1 部分](http://vimeo.com/10493269)和第[2部分](http://www.viddler.com/v/bc9d9136)
*   [CQRS - 初学者介绍](http://vimeo.com/9573973)
*   [Jonathan Oliver 谈 Event Sourcing 和 EventStore @ E-VAN 2011 年 10 月 25 日](http://vimeo.com/31153808)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:31:33.840

> 我们想使用 EventStores 来集成有界上下文

可以将事件存储用作消息队列，另外还有一个好处是它是持久的，并且新订阅者可以请求所有过去的事件。

> 但要坚持使用传统的 ORM 来读取/写入聚合，以避免命令/查询和单独的读取模型在我们的例子中会增加太多的复杂性。

顺便说一句，您仍然可以通过简单地使用单独的[读取模型](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)而不是行为模型来获得 CQRS 的一些好处。

总的来说，您可以在不使用[事件源](http://martinfowler.com/eaaDev/EventSourcing.html)的情况下使用 EventStore ，但是您应该确保它支持您的集成场景的所有要求。除了事件存储之外，您可能还需要其他组件。更一般地，事件存储可用于存储任何时间序列数据。

# c# - 如何在可见时将可见性设置为图像上的折叠

> ID：15655040
> 
> 赞同：0
> 
> 时间：2013-03-27T09:04:10.190
> 
> 标签：c#, wpf, xaml, user-controls

我在 XAML 中有四个图像：

```
<Image Visibility="Collapsed" Name="LeftArrow" Height="20" Width="20"></Image>
<Image Visibility="Collapsed" Name="RightArrow" Height="20" Width="20"></Image>
<Image Visibility="Collapsed" Name="TopArrow" Height="20" Width="20"></Image>
<Image Visibility="Collapsed" Name="BottomArrow" Height="20" Width="20"></Image> 
```

在我的代码隐藏中，我有一个开关盒，当其中一个像这样可见时，它会使所有其他图像折叠起来：

```
switch (ElementInfoCollection[pos].ArrowDirection)
{
    case ArrowDirection.Left:
        LeftArrow.Visibility = Visibility.Visible;
        RightArrow.Visibility = Visibility.Collapsed;
        TopArrow.Visibility = Visibility.Collapsed;
        BottomArrow.Visibility = Visibility.Collapsed;
        break;
    case ArrowDirection.Right:
        LeftArrow.Visibility = Visibility.Collapsed;
        RightArrow.Visibility = Visibility.Visible;
        TopArrow.Visibility = Visibility.Collapsed;
        BottomArrow.Visibility = Visibility.Collapsed;
        break;
    case ArrowDirection.Top:
        LeftArrow.Visibility = Visibility.Collapsed;
        RightArrow.Visibility = Visibility.Collapsed;
        TopArrow.Visibility = Visibility.Visible;
        BottomArrow.Visibility = Visibility.Collapsed;
        break;
    case ArrowDirection.Bottom:
        LeftArrow.Visibility = Visibility.Collapsed;
        RightArrow.Visibility = Visibility.Collapsed;
        TopArrow.Visibility = Visibility.Collapsed;
        BottomArrow.Visibility = Visibility.Visible;
        break;
    default:
        LeftArrow.Visibility = Visibility.Collapsed;
        RightArrow.Visibility = Visibility.Collapsed;
        TopArrow.Visibility = Visibility.Collapsed;
        BottomArrow.Visibility = Visibility.Collapsed;
        break;
} 
```

显然，这是一种非常愚蠢的方法，所以我想知道当其中一个图像在代码隐藏中设置为可见时如何使图像折叠？到目前为止，这是我想出的：

```
<UserControl.Resources>
    <Style x:Key="ArrowSwitch" TargetType="{x:Type Image}">
        <Style.Triggers>
            <DataTrigger >
                <Setter Property="Image.Visibility" Value="Collapsed"></Setter>
            </DataTrigger>
            <DataTrigger>
                <Setter Property="Image.Visibility" Value="Visible"></Setter>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</UserControl.Resources> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:09:26.037

这是相同的代码，但要短得多：

```
switch (ElementInfoCollection[pos].ArrowDirection)
{
    LeftArrow.Visibility = Visibility.Collapsed;
    RightArrow.Visibility = Visibility.Collapsed;
    TopArrow.Visibility = Visibility.Collapsed;
    BottomArrow.Visibility = Visibility.Collapsed;

    case ArrowDirection.Left: LeftArrow.Visibility = Visibility.Visible; break;
    case ArrowDirection.Right: RightArrow.Visibility = Visibility.Visible; break;
    case ArrowDirection.Top: TopArrow.Visibility = Visibility.Visible; break;
    case ArrowDirection.Bottom: BottomArrow.Visibility = Visibility.Visible; break;
    default: break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:26:57.783

如果要使用数据绑定，可以使用将 ArrowDirection 映射到 Visibility 值的转换器：

```
public class DirectionVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        ArrowDirection target;
        ArrowDirection current;
        try
        {
            current = (ArrowDirection)value;
        }
        catch (Exception)
        {
            return null;
        }
        if (Enum.TryParse(parameter.ToString(), out target))
        {
            if (current == target)
                return Visibility.Visible;
            else
                return Visibility.Collapsed;
        }
        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

并在 XAML 中使用它，例如：

```
<Window.Resources>
    <local:DirectionVisibilityConverter x:Key="VisibilityConverter"/>
</Window.Resources>
....
<Image Visibility="{Binding ArrowDirection, Converter={StaticResource VisibilityConverter}, ConverterParameter=Left}" .../> 
```

where`ArrowDirection`指定`ElementInfoCollection[pos].ArrowDirection`. 如果它实现了`INotifyPropertyChanged`，您只需将此值设置为正确的方向，可见性就会更新。

# c# - ExternalException (0x80004005) GDI+ 中发生一般错误

> ID：15655045
> 
> 赞同：4
> 
> 时间：2013-03-27T09:04:32.020
> 
> 标签：c#, .net, image, gdi+, filestream

我的程序有问题。我`byte[]`从 SQL Server 数据库中读取数据并将其保存为 JPEG 图像。

```
while (reader1.Read())
{
    picBytes = null;
    picBytes = (byte[])reader1.GetValue(0);
    if (picBytes != null)
    {
        try
        {
            ms = new MemoryStream(picBytes, 0, picBytes.Length);
            returnImage = Image.FromStream(ms, true);
            returnImage.Save(@"path" + array[2] + ".jpg", System.Drawing.Imaging.ImageFormat.Jpeg);
            returnImage.Dispose();
            ms.Dispose();
        }
        catch (Exception e)
        {
            Console.WriteLine(e + array[2] + ".jpg");
        }
    }
} 
```

我读过 99% 存在权限错误，但正确创建了 500 张图像，而未正确创建 50 张。

而且这个错误只在 Windows 7 64Bit 下抛出...... XP 没有问题：

```
Error in System.Drawing.Image.Save(String filename, ImageCodecInfo encoder, EncoderParameters encoderParams) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-31T07:41:24.793

还有一些人有同样的问题，所以我如何解决这个问题：

*   螺杆系统.绘图

利用

*   **File.WriteAllBytes(pathString, picBytes);**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:55:10.877

我有一个类似的问题，相同的代码适用于大多数图像，并产生了一些错误。作为一种解决方法，我发现从加载的图像创建位图并保存位图适用于所有图像。在您的情况下，这意味着：

```
using(var bmp=new Bitmap(returnImage))
  bmp.Save(@"path" + array[2] + ".jpg", System.Drawing.Imaging.ImageFormat.Jpeg); 
```

我不知道为什么会这样，所以我会对任何进一步的信息非常感兴趣。

编辑：经过进一步调查，问题（至少在我的情况下）似乎与图像中的 EXIF 数据有关。如果 EXIF 块的长度大于 0xEFFF（即第一个字节为 0xFF），则无法保存图像。所以从文件开头剥离EXIF块也解决了问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-14T12:32:22.603

我在运行我安装的程序时出现了这个错误，但在 Visual Studio 调试器中运行它时没有。错误代码 0x80004005 表示权限错误。我怀疑在某些情况下，Windows 7 在读/写权限方面比 XP 更严格，而 Windows 10 肯定更具限制性。我能够通过以管理员身份运行程序来解决我的问题。但是，这对于我打算分发的程序来说是一个不好的做法，所以我检查了代码，发现我试图在程序文件夹中写入一个临时 emf 文件，该文件夹在 Windows 10 中受到保护。我可以通过写信来解决这个问题该程序的未受保护的 ProgramData 文件夹，或者最好使用 System.IO.Path.GetTempPath 获取临时文件的默认路径名。使用内存流是一个更好的解决方案。

# database - Java EE getResultList() 只返回对象不相关的类类型对象

> ID：15655047
> 
> 赞同：1
> 
> 时间：2013-03-27T09:04:37.380
> 
> 标签：database, jakarta-ee, object, jpa, jpql

我正在使用此代码从数据库中检索对象。此代码返回一个对象，但该对象的类型只是`Object`.

但是，我想返回 type `Pcinitialdata`。如前所述，它只返回`Object`，其类型为`Object`

我该如何解决这个问题？

```
String qryStrforCom = "select pci.fileNo,pci.projectNo,pci.fundId,pci.decrp,pci.devSec,pci.estBy,pci.areaCode,pci.targetDate,pci.jobnoRecedate,pci.conBy,pci.supBy,pci.ht33,pci.lt11,pci.sub11,pci.lt3Phase,pci.ltsPhase,pci.abc5w,pci.abc4w,pci.abcsecct,pci.perCapacity,pci.newCapacity,pci.proLtrToEsOn,pci.stdCost,pci.detailCost,pci.varianceNew from Pcinitialdata pci where TRIM(pci.estNo) = :value";

Query querycom = getEntityManager(webAppName).createQuery(qryStrforCom);
querycom.setParameter("value", value);
List<Pcinitialdata> listCom=querycom.getResultList();
if (listCom.isEmpty()) {
    return null;
}
return listCom; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:31:19.173

该`createQuery`方法使用的查询语言是 JPQL，而不是 SQL。

在 JPQL 中，您可以直接查询实体，而无需列出所有单独的属性。无论如何都支持列出它们，但结果是单独的属性列表而不是单个实体。

`Query`此外，如果您至少使用 JPA 2.0 (Java EE 6)，则可以在构造对象时输入类类型。然后代码将变为：

```
String qryStrforCom = "select pci from Pcinitialdata pci where TRIM(pci.estNo) = :value";
TypedQuery<Pcinitialdata> querycom = getEntityManager(webAppName).createQuery(qryStrforCom, Pcinitialdata.class);
querycom.setParameter("value", value);
List<Pcinitialdata> listCom = querycom.getResultList();
if (listCom.isEmpty()) {
    return null;
}

return listCom; 
```

请注意，使用 JPA，您可以链接调用，并且通常使用空列表而不是 null 会更好。预先声明您的查询也更方便，[无论是在 XML 中还是通过注释](http://jdevelopment.nl/put-named-queries-jpa)。最后，尽量减少使用的缩写，并给你的变量起有意义的名字（例如`value`，如果它用于 等，则不应这样称呼`estNo`）

您的代码将变得简单：

```
return getEntityManager(webAppName)
    .createNamedQuery("Pcinitialdata.byEstNo", Pcinitialdata.class)
    .setParameter("estNo", estNo)
    .getResultList(); 
```

# android - ndk build_static_library make：“所有”都无事可做

> ID：15655049
> 
> 赞同：0
> 
> 时间：2013-03-27T09:04:40.540
> 
> 标签：android, android-ndk

当我在 Eclipse 中的 android 上构建 libjpeg 时遇到问题。jni 包含 Android.mk 如下：

```
 LOCAL_PATH := $(call my-dir)
    include $(CLEAR_VARS)
    LOCAL_MODULE    := hello-jni
    LOCAL_SRC_FILES := hello-jni.c
    #LOCAL_C_INCLUDES := $(LOCAL_PATH)/jpeg8d-master
    #LOCAL_STATIC_LIBRARIES := libjpeg
    include $(BUILD_STATIC_LIBRARY)
    #include $(LOCAL_PATH)/jpeg8d-master/Android.mk 
```

jpeg8d 是我从[github](https://github.com/folecr/jpeg8d)下载的源代码。安卓.mk

```
LOCAL_PATH:= $(call my-dir)
# ------------------------------------------------------------------
# Static library for Cocos
# ------------------------------------------------------------------
include $(CLEAR_VARS)
LOCAL_MODULE := cocos_jpeg_static
LOCAL_MODULE_FILENAME := libjpeg
LOCAL_SRC_FILES := \
    jcapimin.c jcapistd.c jccoefct.c jccolor.c jcdctmgr.c jchuff.c \
    jcinit.c jcmainct.c jcmarker.c jcmaster.c jcomapi.c jcparam.c \
    jcprepct.c jcsample.c jctrans.c jdapimin.c jdapistd.c \
    jdatadst.c jdatasrc.c jdcoefct.c jdcolor.c jddctmgr.c jdhuff.c \
    jdinput.c jdmainct.c jdmarker.c jdmaster.c jdmerge.c \
    jdpostct.c jdsample.c jdtrans.c jerror.c jfdctflt.c jfdctfst.c \
    jfdctint.c jidctflt.c jidctfst.c jidctint.c jquant1.c \
    jquant2.c jutils.c jmemmgr.c jcarith.c jdarith.c jaricom.c

# Use the no backing store memory manager provided by
# libjpeg. See install.txt
LOCAL_SRC_FILES += \
    jmemnobs.c

LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)
include $(BUILD_STATIC_LIBRARY) 
```

ndk-build 给出提示：

> make: 对“所有”无事可做。

但是，如果我设置 jpeg8d Android.mk `BUILD_SHARED_LIBRARY`，我会得到`libjpeg.so`. 我不知道为什么。谁能帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T01:26:49.340

解决方案：您可以通过`LOCAL_MODULE_FILENAME`. 在我的问题中，我设置了`LOCAL_MODULE_FILENAME=libjpeg`，但我没有将 `APP_MODULES:=cocos_jpeg_static`（记住`cocos_jpeg_staic`不是）添加到`LOCAL_MODULE`jni*目录*中而不是jpeg8d *-master*目录中。`LOCAL_MODULE_FILENAME``Application.mk`

 **当我将此`libjpeg.a`行添加到`Appliction.mk`

```
APP_MODULES:=cocos_jpeg_static 
```**

# css - 如何将 div 的高度设置为当前视口高度的百分比？

> ID：15655050
> 
> 赞同：0
> 
> 时间：2013-03-27T09:04:44.803
> 
> 标签：css

我试过`height: 100%`了，但这似乎只是视口的高度。

我的页面滚动，所以我希望基本上将高度设置为整个窗口。

这是一个活生生的例子 - [http://jsfiddle.net/gtKBs/750/](http://jsfiddle.net/gtKBs/750/)（试图找出`divider`高度）。

注意，我不想移动 div，我只想将高度设置为窗口的最大高度。

谢谢。

**编辑 1**

或者更好的是，我想要发生的事情是当我滚动时`divider`保持相同的比例并与我一起滚动 - 即说它的总高度为`90%`，然后当我滚动时，我总是看到空间@顶部和底部，表明它只是`90%`当前视口的高度。

**编辑 2**

这就是我想要做的 - [http://jsfiddle.net/ryBZG/1/](http://jsfiddle.net/ryBZG/1/) A span 2 divs, `span2`，`span9`其中`span2`是侧边栏，`span9`是页面内容。我想在它们之间放置一个分隔符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:57:35.320

尝试将分隔符 div 的 CSS 更改为以下内容

```
.divider{
    position:fixed;
    left:50%;
    top:10%;
    bottom:10%;
    border-left:1px solid white;
} 
```

由于您`#bluebox`有一个固定宽度，`width: 550px;`我建议您也将您`.divider`的宽度设置为固定宽度（`260px`）。

HTH安迪

# gcc - gcc 在存档中找不到 .o

> ID：15655058
> 
> 赞同：1
> 
> 时间：2013-03-27T09:05:14.790
> 
> 标签：gcc

```
 mipsisa64-octeon-elf-gcc obj/zxmd_main.o obj/zxmd_mproc.o obj/zxmd_init.o obj/zxmd_pcie.o  obj/libcvm-common.a obj/libcvm-pci-drv.a  obj/libcvmhfao.a obj/libocteon-hfa.a /home/jianxi/Juson/JusonFlow/sdk/OCTEON-SDK/components/hfa/lib-octeon/pp/octeon/se/libpp.a obj/libcvmx.a obj/libzxexe.a obj/libfdt.a   -mfix-cn63xxp1 -march=octeon2 -o cn63hw1.bin 
```

gcc 抱怨：

```
obj/libzxexe.a(zxmx_tim.o): In function `zxmx_init_tim':
/home/jianxi/Juson/JusonFlow/libexec/zxmx_tim.c:47: undefined reference to `cvmx_tim_setup' 
```

但`cvmx_tim_setup` 可以在以下位置找到`libcvmx.a`：

```
[jianxi@jianxi obj]$ readelf -h libcvmx.a | grep "cvmx-tim.o" -A21
File: libcvmx.a(cvmx-tim.o)
ELF Header:
  Magic:   7f 45 4c 46 01 02 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF32
  Data:                              2's complement, big endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              REL (Relocatable file)
  Machine:                           MIPS R3000
  Version:                           0x1
  Entry point address:               0x0
  Start of program headers:          0 (bytes into file)
  Start of section headers:          13424 (bytes into file)
  Flags:                             0x808d4001, noreorder, octeon2, eabi64, mips64r2
  Size of this header:               52 (bytes)
  Size of program headers:           0 (bytes)
  Number of program headers:         0
  Size of section headers:           40 (bytes)
  Number of section headers:         33
  Section header string table index: 30

  [jianxi@jianxi obj]$ readelf -s cvmx-tim.o
      27: 00000000    92 FUNC    GLOBAL DEFAULT    1 cvmx_tim_start
      28: 00000000    40 OBJECT  GLOBAL DEFAULT   16 cvmx_tim
      29: 00000060    56 FUNC    GLOBAL DEFAULT    1 cvmx_tim_stop
      30: 00000098   276 FUNC    GLOBAL DEFAULT    1 cvmx_tim_shutdown
      31: 000001b0   752 FUNC    GLOBAL DEFAULT    1 cvmx_tim_setup
      32: 00000000     0 NOTYPE  GLOBAL DEFAULT  UND cvmx_clock_get_rate
      33: 00000000     0 NOTYPE  GLOBAL DEFAULT  UND cvmx_bootmem_alloc
      34: 00000000     0 NOTYPE  GLOBAL DEFAULT  UND memset
      35: 00000000     0 NOTYPE  GLOBAL DEFAULT  UND puts
      36: 00000000     0 NOTYPE  GLOBAL DEFAULT  UND printf 
```

当我`cvmx-tim.o`在命令中添加时，gcc会执行成功：</p>

```
mipsisa64-octeon-elf-gcc  obj/cvmx-tim.o obj/zxmd_main.o obj/zxmd_mproc.o obj/zxmd_init.o obj/zxmd_pcie.o  obj/libcvm-common.a obj/libcvm-pci-drv.a  obj/libcvmhfao.a obj/libocteon-hfa.a /home/jianxi/Juson/JusonFlow/sdk/OCTEON-SDK/components/hfa/lib-octeon/pp/octeon/se/libpp.a obj/libcvmx.a obj/libzxexe.a obj/libfdt.a -mfix-cn63xxp1 -march=octeon2 -o cn63hw1.bin 
```

如果把 obj/libcvmx.a 放在 obj/zxmd_main.o 前面，gcc 会报更多的错误。

`cvmx-tim.o`为什么gcc中找不到`libcvmx.a`？

的顺序`*.o`会不会造成问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:10:32.390

这是图书馆的顺序：

```
obj/libcvmx.a obj/libzxexe.a 
```

到链接器搜索`obj/libzxexe.a`它已经处理的时候`obj/libcvmx.a`- 它不会再次搜索第一次处理时尚未拉入的任何内容`obj/libcvmx.a`。

将这些库的顺序更改为：

```
obj/libzxexe.a obj/libcvmx.a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-21T02:53:23.743

除了更改库的顺序外，您还可以强制 cvmx_tim_setup 在命令行中标记为“未定义”符号。如果已知该符号是必需的，那么链接器将寻找它并记住定义它的第一个库。将此标志添加到 gcc 命令：-Wl,--undefined=cvmx_tim_setup

此外，您还可以在 gcc 中试验 --start-group 和 --end-group。--start-group（要链接的二进制文件列表）--end-group。这将允许搜索的完整循环关闭。但是会消耗一些链接性能。

参考： [http ://eli.thegreenplace.net/2013/07/09/library-order-in-static-linking](http://eli.thegreenplace.net/2013/07/09/library-order-in-static-linking)

派克西姆

# php - MySQL PDO INSERT 动态生成查询

> ID：15655059
> 
> 赞同：-2
> 
> 时间：2013-03-27T09:05:18.897
> 
> 标签：php, mysql, pdo

我有以下代码可以正常工作，因为它使用 pdo 即使是动态生成 sql 查询（我认为）。

```
$fields = array(
    'col1'  => 'radiobutton1',
    'col2'  => 'radiobutton2'
);

$parts = array();

foreach($fields as $dbfield => $field){
    $parts[] = '`' . $dbfield . '` = :' . $dbfield;
}

$DBH = new PDO( "mysql:host=localhost;dbname=database", "user", "pass" );
$DBH -> setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

$STH = $DBH -> prepare( 'UPDATE `table1` SET ' . join(', ', $parts) . ' WHERE `id`= :id' );

$STH -> bindParam( ':id', $some_id_here, PDO::PARAM_INT, 4 );

foreach($fields as $dbfield => $field) {
    $value = isset($_POST[$field]) ? 1 : 0;
    $STH -> bindValue( ':' . $dbfield, $value, PDO::PARAM_INT);
}

$STH -> execute(); 
```

我的问题是，我该如何更改它以便执行 sql 插入而不是更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:21:46.277

你可以这样做：

```
'INSERT INTO `table1` SET `id`= :id, ' . join(', ', $parts) 
```

如果您对 id 有自动增量：

```
'INSERT INTO `table1` SET ' . join(', ', $parts) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:22:18.537

似乎此代码仅适用于复选框。如果您希望它适用于所有字段类型，则必须将第二个 foreach 更改为

```
foreach($fields as $dbfield => $field) {
    if (isset($_POST[$field])) {
        $STH -> bindValue( ':' . $dbfield,$_POST[$field] );
    }
} 
```

其余的很简单，只需将 UPDATE 替换为 INSERT 并从查询中删除 WHERE 部分（并且显然摆脱绑定 id）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:38:39.630

我认为这样的事情会起作用：（我使用 implode() 而不是 join() 但它本质上是相同的）。我之所以使用 implode() 而不是我认为 join() 与 SQL 语句一起使用会令人困惑（无论是 SQL 还是 PHP，您都必须三思而后行）。我还没有测试过代码，但我希望你能得到图片......

```
<?php
//...some code...
$dbValues = array();

foreach($fields as $dbfield => $field) {
    $dbValues[] = isset($_POST[$field]) ? 1 : 0;
}

$STH = $DBH -> prepare( 'INSERT INTO `table1` (' . implode(', ', $parts) . ') VALUES(' . implode(', ', $dbValues) . ')' );

//..more code...
?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T10:08:36.767

这是我用于使用 MySQL/PDO 进行动态插入的函数。

```
function DB_Insert($table, $data) {
    $bind = ':'.implode(',:', array_keys($data));
    $sql  = 'INSERT INTO ' . $table . '(' . implode(',', array_keys($data)) . ') ' . 'VALUES (' .$bind. ')';
    $stmt = $DBH->prepare($sql);
    $stmt->execute(array_combine(explode(',',$bind), array_values($data)));
} 
```

$table 只是表的字符串。

$data 是使用格式 $data['column1'] = value1 的键/值数组

请注意，上述功能不包括任何数据验证，我单独执行此操作。

# java - 使用Java中的标记替换文件中的字符串

> ID：15655060
> 
> 赞同：0
> 
> 时间：2013-03-27T09:05:28.083
> 
> 标签：java, string, replace

尝试替换文件中的字符串时遇到问题。在我的文件中，我有：

```
<!-- Header -->
<header fontName="Arial" size="24"/>
<!-- Content -->
<content>
    <fontName="Arial" size="11"/>
</content> 
```

如何仅替换 fontName 和 size `<!-- Header -->`？
这是我的替换代码

```
public class StringReplacement {
     public static void main(String args[])
         {
         try
             {
             File file = new File("file.xml");
             BufferedReader reader = new BufferedReader(new FileReader(file));
             String line = "", oldtext = "";
             while((line = reader.readLine()) != null)
                 {
                 oldtext += line + "\r\n";
             }
             reader.close();
             // replace a word in a file
             //String newtext = oldtext.replaceAll("drink", "Love");

             //To replace a line in a file
             String newtext = oldtext.replaceAll("Arial", "Times New Roman");

             FileWriter writer = new FileWriter("file.xml");
             writer.write(newtext);
             writer.close();
         }
         catch (IOException ioe)
             {
             ioe.printStackTrace();
         }
     }
} 
```

但它只是替换所有要替换的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:09:18.500

如果您确定这是文件的格式，您可以简单地执行以下操作：

```
String newtext = oldtext.replaceAll("header fontName=\"Arial\"", "header fontName=\"Times New Roman\""); 
```

顺便说一句，使用 a`StringBuilder`来附加字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:12:03.190

在您的读取循环中`while((line = reader.readLine()) != null)`，您可以测试是否找到该`<!-- Header -->`行（而不是该`<!-- Content -->`行），并仅在标题块中进行替换。

```
boolean inHeader == false;
while((line = reader.readLine()) != null) {
    if (line.equals("<!-- Header -->")) {
        inHeader = true;
    } else if (line.equals("<!-- Content -->")) {
        inHeader = false;
    }
    if (inHeader) {
        line = line.replaceAll("Arial", "Times New Roman");
    }
    oldtext += line + "\r\n";
} 
```

并删除线

```
String newtext = oldtext.replaceAll("Arial", "Times New Roman"); 
```

编辑：检测任意标签可能比硬编码标题和内容更干净。这将需要一个正则表达式来匹配`<!-- (tag) -->`和测试 tag 是否等于`"Header"`，但这种方法当然更容易。

# php - PHP：在 SQL 中保存多个复选框值

> ID：15655062
> 
> 赞同：0
> 
> 时间：2013-03-27T09:05:42.483
> 
> 标签：php, sql, checkbox, implode, insert-into

我正在尝试制作一个**在单个 SQL 记录中写入多个复选框值**的表单 到目前为止我有一些代码，但我不知道我做错了什么。

**这是我所拥有的：（我的表包含复选框）**

```
<table> 
  <tr>
    <td><input id="vlaams-brabant" type="checkbox" name="Regio[]" value="Vlaams-Brabant"/> Vlaams-Brabant</td>
    <td><input id="waals-brabant" type="checkbox" name="Regio[]" value="Waals-Brabant"/> Waals-Brabant </td>
  </tr>
  <tr>    
    <td><input id="oost-vlaanderen" type="checkbox" name="Regio[]" value="Oost-Vlaanderen"/> Oost-Vlaanderen </td>
    <td><input id="west-vlaanderen" type="checkbox" name="Regio[]" value="West-Vlaanderen"/> West-Vlaanderen </td>
  </tr>
  <tr>
    <td><input id="Limburg" type="checkbox" name="Regio[]" value="Limburg"/> Limburg </td>
    <td><input id="Antwerpen" type="checkbox" name="Regio[]" value="Antwerpen"/> Antwerpen</td>
  </tr>
  <tr>
    <td><input id="Luik" type="checkbox" name="Regio[]" value="Luik"/> Luik </td>
    <td><input id="Henegouwen" type="checkbox" name="Regio[]" value="Henegouwen"/> Henegouwen </td>
  </tr>
  <tr>
    <td><input id="Luxemburg" type="checkbox" name="Regio[]" value="Luxemburg"/> Luxemburg </td>
    <td><input id="Namen" type="checkbox" name="Regio[]" value="Namen"/> Namen </td>
  </tr>
  <tr>
    <td><input id="België" type="checkbox" name="Regio[]" value="Heel België"/> Heel België </td>
    <td><input id="Internationaal" type="checkbox" name="Regio[]" value="Internationaal"/> Internationaal </td>
  </tr>
  <tr>
    <td><input id="Brussel" type="checkbox" name="Regio[]" value="Brussel Hoofdstedelijk Gewest"/> Brussel Hoofdstedelijk Gewest </td>
  </tr>
</table> 
```

**这是我的 PHP 代码（请记住，这只是更大代码的一部分，我还有其他文本字段等。已经在运行）**：

```
$adds['nameCom'] = $conn->real_escape_string($_POST['nameCom']);
    $adds['name'] = $conn->real_escape_string($_POST['name']);
    $adds['number'] = $conn->real_escape_string($_POST['number']);
    $adds['email'] = $conn->real_escape_string($_POST['email']);
    $adds['activiteit'] = $conn->real_escape_string($_POST['activiteit']);
    $adds['Regio'] = $conn->real_escape_string($_POST['Regio']);

    // query voor INSERT INTO
    $sql = "INSERT INTO `data` (`nameCom`, `name`, `number`, `email`, `activiteit`, `Regio`) 
    VALUES ('". $adds['nameCom']. "', '". $adds['name']. "', '". $adds['number']. "', '". $adds['email']. "', '". $adds['activiteit']. "', '" . implode(',', $adds['Regio']) ."')"; 

    // Performs the $sql query on the server to insert the values
    if ($conn->query($sql) === TRUE) {
      echo 'Uw gegevens werden opgeslagen, bedankt!'; 
```

内爆给出以下错误： ***警告：内爆（） [function.implode]：在第 38 行的 C:\xampplite\htdocs\LPtest\insert.php 中传递的参数无效***

如果有人可以帮助我了解我在这里做错了什么，将不胜感激！先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:13:08.157

正如函数名所说，`real_escape_string`仅适用于字符串。`$_POST['Regio']`所以你必须为数组的每个值调用这个函数：

```
$Regio = array();
$adds['Regio'] = "";

if(count($_POST['Regio']) > 0) {
  foreach($_POST['Regio'] as $key=>$value)
    $Regio[] = $conn->real_escape_string($value);
}

$adds['Regio'] = implode(',', $Regio); 
```

这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:09:15.137

$_POST['regio'] 是一个多维数组。您应该使用它`foreach`来获取各个值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:16:33.083

你应该使用 foreach..

HTML 代码：

```
<input id="id1" type="checkbox" name="Regio[id1]"/>
<input id="id2" type="checkbox" name="Regio[id2]"/>
<input id="id3" type="checkbox" name="Regio[id3]"/> 
```

PHP代码：

```
$chkBoxes = $_POST['Regio'];
foreach ($chkBoxes as $key => $val) {
     // you code here
} 
```

# c++ - 如何检测双精度浮点上溢和下溢？

> ID：15655070
> 
> 赞同：26
> 
> 时间：2013-03-27T09:06:26.747
> 
> 标签：c++, floating-point

我有以下变量：

```
double dblVar1;
double dblVar2; 
```

它们可能有很大的值，但小于`double`最大值。

我对上述变量有各种算术，如加法、乘法和幂：

```
double dblVar3 = dblVar1 * dblVar2; 
double dblVar4 = dblVar1 + dblVar2;
double dblVar5 = pow(dblVar1, 2); 
```

综上所述，我必须检查上溢和下溢。如何在 C++ 中实现这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T09:36:00.307

很大程度上取决于上下文。为了完美便携，您必须在操作*前*检查，例如（用于添加）：

```
if ( (a < 0.0) == (b < 0.0)
    && std::abs( b ) > std::numeric_limits<double>::max() - std::abs( a ) ) {
    //  Addition would overflow...
} 
```

类似的逻辑可用于四个基本运算符。

如果您所针对的所有机器都支持 IEEE（如果您不必考虑大型机，可能就是这种情况），您可以只执行操作，然后在结果上使用`isfinite`或`isinf`。

对于下溢，第一个问题是逐渐下溢是否算作下溢。如果不是，那么只需检查结果是否为零即可`a != -b`。如果您想检测逐渐下溢（这可能仅在您有 IEEE 时才存在），那么您可以使用`isnormal`— 如果结果对应于逐渐下溢，这将返回 false。*（与溢出不同，您在操作后*测试下溢。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-27T09:43:39.970

POSIX、C99、C++11 `<fenv.h>`（和`<cfenv>`对于 C++11）具有测试 IEEE754 异常标志的功能（与 C++ 异常无关，这太容易了）：

```
int  feclearexcept(int);
int  fegetexceptflag(fexcept_t *, int);
int  feraiseexcept(int);
int  fesetexceptflag(const fexcept_t *, int);
int  fetestexcept(int); 
```

该标志是一个定义了以下位的位域：

```
FE_DIVBYZERO
FE_INEXACT
FE_INVALID
FE_OVERFLOW
FE_UNDERFLOW 
```

因此，您可以在操作前清除它们，然后再进行测试。您必须检查文档以了解库函数对它们的影响。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-27T09:52:15.893

使用像样的编译器（支持最新的 C++ 标准），您可以使用[以下](http://en.cppreference.com/w/cpp/numeric/fenv/fetestexcept)函数：

```
#include <cfenv>
#include <iostream>

int main() {
    std::feclearexcept(FE_OVERFLOW);
    std::feclearexcept(FE_UNDERFLOW);

    double overflowing_var = 1000;
    double underflowing_var = 0.01;

    std::cout << "Overflow flag before: " << (bool)std::fetestexcept(FE_OVERFLOW) << std::endl;
    std::cout << "Underflow flag before: " << (bool)std::fetestexcept(FE_UNDERFLOW) << std::endl;

    for(int i = 0; i < 20; ++i) {
        overflowing_var *= overflowing_var;
        underflowing_var *= underflowing_var;
    }

    std::cout << "Overflow flag after: " << (bool)std::fetestexcept(FE_OVERFLOW) << std::endl;
    std::cout << "Underflow flag after: " << (bool)std::fetestexcept(FE_UNDERFLOW) << std::endl;
}

/** Output:
  Overflow flag before: 0
  Underflow flag before: 0
  Overflow flag after: 1
  Underflow flag after: 1
 */ 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-27T09:46:58.147

ISO C99 定义了查询和操作浮点状态字的函数。您可以在方便时使用这些函数来检查未捕获的异常，而不是在计算过程中担心它们。

它提供

```
FE_INEXACT
FE_DIVBYZERO
FE_UNDERFLOW
FE_OVERFLOW
FE_INVALID 
```

例如

```
 {
       double f;
       int raised;
       feclearexcept (FE_ALL_EXCEPT);
       f = compute ();
       raised = fetestexcept (FE_OVERFLOW | FE_INVALID);
       if (raised & FE_OVERFLOW) { /* ... */ }
       if (raised & FE_INVALID) { /* ... */ }
       /* ... */
     } 
```

[http://www.gnu.org/software/libc/manual/html_node/Status-bit-operations.html](http://www.gnu.org/software/libc/manual/html_node/Status-bit-operations.html)

# android - Android SQLite 和字符串资源

> ID：15655072
> 
> 赞同：0
> 
> 时间：2013-03-27T09:06:30.533
> 
> 标签：android, sqlite

我可以存储在数据库字符串资源名称中，而不是值吗？

例如，`R.string.title, not "Some title"`。但是当我想使用这样的东西时：

```
 private static final String[] FROM = { Items.name };
 private static final int[] TO = { R.id.text1 };

 adapter = new SimpleCursorAdapter(getActivity().getApplicationContext(), R.layout.item_list, null, FROM, TO, 0); 
```

而在`R.id.text1`我想看到`"Item 3`“或者，取决于当前的语言环境，`"Пункт 3" (in russian)`而不是`"R.string.item3"`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:12:21.070

> 在 R.id.text1 中，我想查看“第 3 项”，或者，取决于当前的语言环境，“Пункт 3”（俄语），而不是“R.string.item3”。

放置在 from 中的每一列`String[]`都将以相同的顺序分配其值 to `int[]`。换句话说，每个`Items.name`值都将被分配`TextView`给`R.id.text1`

# javascript - setTimeout 和 window.location (location.href) 不工作

> ID：15655073
> 
> 赞同：13
> 
> 时间：2013-03-27T09:06:34.237
> 
> 标签：javascript

我想在 5 秒内将用户重定向到 index.php，但它会立即重定向我。我不想在这个简单的代码中使用 jQuery。

```
<script>            
setTimeout(function(){location.href="index.php", 5000} );           
</script> 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-27T09:14:31.907

这是正确的方法...

```
setTimeout(function(){location.href="index.php"} , 5000); 
```

您可以在此处查看文档：

[https://developer.mozilla.org/en/docs/DOM/window.setTimeout](https://developer.mozilla.org/en/docs/DOM/window.setTimeout)

**句法 ：**

```
var timeoutID = window.setTimeout(func, [delay, param1, param2, ...]);
var timeoutID = window.setTimeout(code, [delay]); 
```

**例子 ：**

```
WriteDatePlease();
setTimeout(function(){WriteDatePlease();} , 5000);

function WriteDatePlease(){
    var currentDate = new Date()
    var dateAndTime = "Last Sync: " + currentDate.getDate() + "/"
                + (currentDate.getMonth()+1)  + "/" 
                + currentDate.getFullYear() + " @ "  
                + currentDate.getHours() + ":"  
                + currentDate.getMinutes() + ":" 
                + currentDate.getSeconds();
    $('.result').append("<p>" + dateAndTime + "</p>");
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div class="result"></div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-14T18:36:47.900

这也有效： setTimeout ("window.location='index.php'", 5000);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-05T23:52:55.473

我知道这个线程已经解决了，大约 2 年后我遇到了这个问题，我个人只是使​​用了 Joan 的答案中的示例，并对其进行了修改以完全按照我的需要工作，因为 location.href 不会重定向在 iframe 中调用时的 TOP 或父页面。

因此，对于任何想要在 5 秒后但在 iframe 内重定向并重定向 TOP / Parent 页面的方法的人来说，这就是我如何根据 Joan 对原始问题的回答来实现的。

```
 <script type="text/javascript">
    setTimeout(function(){window.top.location="index.php"} , 5000);
    </script> 
```

如果您想像我个人那样使用 PHP 来调用它，那么您将如何使用 echo 命令在 5 秒后重定向用户。

```
echo '<script type="text/javascript">setTimeout(function(){window.top.location="index.php"} , 5000);</script>'; 
```

希望这可以帮助其他寻找相同解决方案的人。

谢谢

# sql - 查询性能 INNER JOIN ON AND 比较

> ID：15655076
> 
> 赞同：23
> 
> 时间：2013-03-27T09:06:46.520
> 
> 标签：sql, performance, join

我想知道以下两个查询之间的性能最好的是哪一个，或者它们的性能是否相同？

**第一个：[没有 WHERE 子句，只有 AND 和 ON]**

```
SELECT related_tabid AS tabid, label, t.name
  FROM relatedlists r
     INNER JOIN tab t 
       ON t.tabid = r.tabid
          AND t.name = 'Leads'
          AND r.is_active=1  and r.related_tabid <> 0
          AND t.is_active=1
  ORDER BY label 
```

**第二个：[使用 WHERE 子句，与 where 而不是 ON 关联的 AND ]**

```
SELECT related_tabid AS tabid, label, t.name
  FROM relatedlists r
     INNER JOIN tab t 
       ON t.tabid = r.tabid
       WHERE t.name = 'Leads'
             AND r.is_active=1  and r.related_tabid <> 0
             AND t.is_active=1
  ORDER BY label 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-27T09:09:00.167

这两个查询是相同的，因为使用的连接是`INNER JOIN`. `INNER JOIN`基本上它只过滤在另一个表上至少有匹配的行。即使两个表互换，结果仍然相同。

但是，如果您通过 加入它们`LEFT JOIN`，则这两个查询彼此不同，并且会产生不同的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-08T05:24:18.007

在我看来，这两个查询之间的唯一区别是一个`t.name = 'Leads'`在 WHERE 子句中，一个在 JOIN 子句中。正确的？

两者没有区别。SQL 优化器将以相同的方式处理它们。对它们中的每一个进行解释以进行验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-02T23:07:38.320

理论上，第一个查询只是想将文本比较放在“where”中，然后加入表联合的“逻辑”的定义中，而“where”仅用于指定比较时变化的值其中 t.name = 'Leads'; 问候

# html - IE 中的表格宽度为 100% 会导致问题

> ID：15655077
> 
> 赞同：1
> 
> 时间：2013-03-27T09:06:46.923
> 
> 标签：html, css, internet-explorer

我在 IE 中的表格有一个令人不安的问题……我创建了一个 Joomla！模板与引导程序相结合。客户创建了 joomla! 的内容！网站。

你可以在这里找到我的问题：（链接已删除）

当您在 Firefox 或其他浏览器中查看它时，您会发现一切都很好。但是当您在 Internet Explorer 中查看它时（我讨厌那个浏览器），您会看到带有灰色背景的表格没有正确显示。他们有很大的宽度。文本被截断。

我尝试了很多东西并测试了互联网上的不同解决方案。但我找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:38:37.273

您的问题是由底部的大图像（connectivity2_big-photo.jpg）引起的。当您在图像上设置了高度和宽度时，CSS 将高度和宽度设置为“自动”，这会将尺寸推到 IE 中的最大可能大小。

要么使用适当大小的图像，要么从 img 声明中删除 width:auto 和 height:auto ，然后一切正常。

我怀疑这与使用 XHTML 1.0 过渡有关：IE 正在恢复到 1997 年，但这正是您所要求的！

# jquery - 谷歌地图信息窗口偏离中心

> ID：15655079
> 
> 赞同：1
> 
> 时间：2013-03-27T09:06:48.283
> 
> 标签：jquery, google-maps

如果您访问以下网站：

[http://showsec.rnmtest2.co.uk/contact-us](http://showsec.rnmtest2.co.uk/contact-us)

您将看到左侧有一张地图，然后在右侧有选择办公室的选项。如果您单击其中一个办公室，则会触发一个信息窗口以在地图上弹出，但是该信息窗口未居中并溢出地图右侧，这意味着如果不拖动地图，则关闭按钮不可见。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:24:15.363

您的地图相当窄，而信息窗口对它来说太宽了。您可以通过在创建信息窗口时指定其属性来强制信息窗口使用较窄的宽度`maxWidth`，例如：

```
var iw = new google.maps.InfoWindow({ maxWidth: 300 }); 
```

# jquery - 在 jQuery 中更改后，MVC 输入按钮 onclick 不起作用

> ID：15655080
> 
> 赞同：0
> 
> 时间：2013-03-27T09:06:53.043
> 
> 标签：jquery

我在页面中有一个下拉列表和按钮，如下所示：

```
@Html.DropDownList("MovieType")

<input id="btnBk" type="button" value="Back" onclick="location.href = '/Test/Index/'"  /> 
```

下拉列表填充在控制器中：

```
public ActionResult DDL()
{
    List<SelectListItem> items = new List<SelectListItem>();

    items.Add(new SelectListItem { Text = "Action", Value = "0" });

    items.Add(new SelectListItem { Text = "Drama", Value = "1" });

    items.Add(new SelectListItem { Text = "Comedy", Value = "2", Selected = true });

    items.Add(new SelectListItem { Text = "Science Fiction", Value = "3" });

    ViewBag.MovieType = items;

    return View();
} 
```

选择下拉列表项后，我尝试将按钮 onclick 从原始 /Test/Index/ 更改为 /Test/Index1 ：

```
$(document).ready(function () {            
    $('#MovieType').change(function () {
        var href = $('#btnBk').attr("onclick");
        alert(href);
        $('#btnBk').attr('onclick', "location.href='/Test/Index1/'");
        href = $('#btnBk').attr("onclick");
        alert(href);
    })
}); 
```

警报消息表明 onclick 值已更新。但是更改后点击返回按钮时，没有响应，而是重定向到/Test/Index1。

有什么遗漏吗？

在此先感谢，本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:11:49.397

从您的元素中删除 onclick 属性并使其像这样。充分利用 jQuery 进行操作。

```
$(document).ready(function () {            
      $('#btnBk').click(function(){
             location.href='/Test/Index/';
        });

    $('#MovieType').change(function () {
        $('#btnBk').unbind('click').click(function(){
             location.href='/Test/Index1/';
        });
    })
}); 
```

# android - 通过android中的libsonic库播放视频

> ID：15655081
> 
> 赞同：1
> 
> 时间：2013-03-27T09:06:53.237
> 
> 标签：android, android-ndk, video-streaming, inputstream, android-audiorecord

我在我的应用程序中使用 Sonic-NDK 进行声音调制。因为它工作正常，但仅适用于音频文件。可以用来播放视频文件吗？这是库源代码的[**链接**](https://github.com/waywardgeek/sonic-ndk)，我的代码虽然相同，但遵循..

```
public class SonicTest extends Activity
{
VideoView videoView;
String uri;
FileInputStream soundFile=null;
File file;
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);                      
    setContentView(R.layout.main);

}

public void play(View view)
{

    new Thread(new Runnable() 
    {
        public void run()
        {

            float speed= (float) 1.0;
            float pitch= (float) 1.5;
            float rate= (float) 1.0;
            uri= Environment.getExternalStorageDirectory().toString();
            uri=uri+"/talking.bin";
            Log.i("testing","check if uri is correct "+uri);
            AndroidAudioDevice device = new AndroidAudioDevice(22050, 1);
            Sonic sonic = new Sonic(22050, 1);
            byte samples[] = new byte[4096];
            byte modifiedSamples[] = new byte[2048];

                //soundFile = getContentResolver().openInputStream(Uri.parse(uri));
                /*soundFile=getResources().openRawResource(R.raw.video3);
                Log.i("testing","check if SoundFile is correct "+soundFile);
            */
            file= new File(uri);
            try {
                soundFile= new FileInputStream(file);
                Log.i("testing","check if SOUNDFILE is correct "+soundFile);
            } catch (FileNotFoundException e1) {
                Log.i("testing","File Not Supported");
                e1.printStackTrace();
            }
            int bytesRead;

            if(soundFile != null) {
                sonic.setSpeed(speed);
                sonic.setPitch(pitch);
                sonic.setRate(rate);
                do {
                    try {
                        bytesRead = soundFile.read(samples, 0, samples.length);
                    } catch (IOException e) {
                        e.printStackTrace();
                        return;
                    }
                    if(bytesRead > 0) {
                        sonic.putBytes(samples, bytesRead);
                    } else {
                        sonic.flush();
                    }
                    int available = sonic.availableBytes(); 
                    if(available > 0) {
                        if(modifiedSamples.length < available) {
                            modifiedSamples = new byte[available*2];
                        }
                        sonic.receiveBytes(modifiedSamples, available);
                        device.writeSamples(modifiedSamples, available);
                    }
                } while(bytesRead > 0);
                device.flush();
            }
        }
    } ).start();
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T13:11:54.907

对于使用任何视频播放器播放视频，Sonic 库用于更改音频文件属性，如音高、频率、速度等。

# c# - 生成 6 位数字

> ID：15655084
> 
> 赞同：1
> 
> 时间：2013-03-27T09:06:57.637
> 
> 标签：c#

我正在从数据库中检索一些记录，并将它们附加到一些字符串中 - 例如：

```
spouse counter=1;
counter=1+counter; 
```

然后我通过`customerID`以下方式获得：

```
customerID = "AGP-00000" + counter; 
```

这样`customerID`就可以了`AGP-000001`。

对于计数器值`2`-`customerID`字符串将是`AGP-000002`.

我的问题是，如果 counter is `10`then `customer ID`will be `AGP-0000010`，我希望它是`AGP-000010`。

我怎样才能确保`customer ID`总是这样`AGP-000010`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T09:08:07.697

```
int  number = 1;
string customerID = "AGP-" + number.ToString("D6"); 
```

客户 ID 将是：`"AGP-000001"`

请参阅：[如何：用前导零填充数字](http://msdn.microsoft.com/en-us/library/dd260048.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:14:24.807

不确定这是否是最有效的方法，但它有效

```
string str = "AGP-00000";
int counter = 100;
str = str.Substring(0, str.Length - counter.ToString().Length + 1);
str += counter.ToString(); 
```

# jquery - Jquery Find - 仅可见

> ID：15655085
> 
> 赞同：6
> 
> 时间：2013-03-27T09:07:00.640
> 
> 标签：jquery

我想检查 div 是否包含具有“错误”类的子项，但条件是错误类显示不等于无。（意思是错误类必须是可见的。

如何在下面更改我的代码：

```
 $(".related_field").each(function(){
     var $widthAdj = $(this).find(".autoDiv");
     if($(this).find(".error").length == 0){  //MUST BE VISIBLE "ERROR" CLASS ONLY
        $widthAdj.css("height","48px");
     } else {
        $widthAdj.css("height","63px");
     }
 }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T09:08:51.287

你的意思是这样吗？使用[`:visible`](http://api.jquery.com/visible-selector/)选择器：

```
if($(this).find(".error:visible").length == 0)
    $widthAdj.css("height","48px");
} else {
    $widthAdj.css("height","63px");
} 
```

# python - 如何去除双空格并留下新行？Python

> ID：15655087
> 
> 赞同：5
> 
> 时间：2013-03-27T09:07:06.223
> 
> 标签：python, string, newline, whitespace, strip

如何去除双空格并留下新行？没有可能`re`吗？

如果我有这样的事情：

```
string = '   foo\nbar  spam' 
```

我需要得到：

```
'foo\nbar spam' 
```

`' '.join(string.split())`删除所有空格，包括新行：

```
>>> ' '.join(string.split())
'foo bar spam' 
```

`' '.join(string.split(' '))`没做什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T09:07:40.220

```
>>> text = '   foo\nbar      spam'
>>> '\n'.join(' '.join(line.split()) for line in text.split('\n'))
'foo\nbar spam' 
```

这将其分成几行。然后它用空格分割每一行并用单个空格重新加入。然后它重新加入行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:23:43.810

```
text = [' '.join(i.split()) for i in text.split('\n') if not i.isspace()]
text = '\n'.join(text) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T09:10:41.357

可以使用 strip 或 lstrip 函数：

```
line = '   foo\nbar  spam'
while '  ' in line:
    line = line.replace('  ', ' ')
line = line.strip(' ') 
```

# c# - 从流中使用 XDocument.Load 错误“缺少根元素”加载 xml

> ID：15655088
> 
> 赞同：1
> 
> 时间：2013-03-27T09:07:16.687
> 
> 标签：c#, stream, linq-to-xml

我在使用 XDocument.Load 时遇到问题，因为有时没有错误，有时已经出现错误，同样的错误“缺少根元素”我已经尝试使用 seek 和 position 仍然出现相同的错误。

有什么想法可以解决这个问题吗？谢谢

到目前为止，这是我的源代码：

```
using (var stream = File.Open(file, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
        {
            stream.Seek(0, System.IO.SeekOrigin.Begin);
            //stream.Position = 0;
            var request = XDocument.Load(stream);
            var get_command = from r in request.Descendants("Transaction")
                              select new
                              {
                                  Type = r.Element("Type").Value
                              };

            foreach (var c in get_command)
            {
                type = c.Type;
            }
        } 
```

示例 XML

```
<?xml version="1.0" encoding="utf-8"?>
<Request>
  <Transaction>
    <Type>gc</Type>
  </Transaction>
</Request> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:07:38.600

我的猜测是您的示例过于简化，您的 Xml 看起来更像这样

```
<?xml version="1.0" encoding="utf-8"?>
<Request>
  <Transaction>
    <Type>gc</Type>
  </Transaction>
</Request>
<Request>
  <Transaction>
    <Type>gc</Type>
  </Transaction>
</Request> 
```

这可以解释你的错误，因为没有根元素。你需要让它像这样

```
<?xml version="1.0" encoding="utf-8"?>
<Requests>
  <Request>
    <Transaction>
      <Type>gc</Type>
    </Transaction>
  </Request>
  <Request>
    <Transaction>
      <Type>gc</Type>
    </Transaction>
  </Request>
</Requests> 
```

# java - 重写抽象方法 TimerTask.Run()

> ID：15655091
> 
> 赞同：0
> 
> 时间：2013-03-27T09:07:20.233
> 
> 标签：java, overriding, abstract-class

我在覆盖从 TimerTask 类运行的方法时遇到问题。

这是我的代码：

```
public class PGameCore 
{

    Toolkit toolKit;
    Timer   timer;

    public PGameCore(int clockIntervalInSeconds)
    {
        timer = new Timer();
        timer.schedule(new CoreTimer(), 1000 * clockIntervalInSeconds);
    }

    class CoreTimer extends TimerTask
    {
            public void Run()
            {
                System.out.println("BEEEP :)");
                toolKit.beep();
            }
    }

} 
```

问题出在行中：

```
class CoreTimer extends TimerTask 
```

我正在使用 Netbeans。它说：“PGameCore.CoreTimer 不是抽象的，不会覆盖 TimerTask 中的抽象方法 run()。”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T09:10:00.267

*它说：“PGameCore.CoreTimer 不是抽象的，不会覆盖 TimerTask 中的抽象方法 run()。”*

您的方法名称`Run`应该是`run`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T09:12:43.557

运行，而不是运行 - Java 区分大小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:22:24.643

使用 eclipse 或 netbean IDE。它将解决您的许多编译时问题。

在上述情况下，您应该使用`run`方法。这是区分大小写的。您使用`Run`了 where R is capital 这是不正确的方法。

保持一种习惯以避免此类错误。编写方法名称时使用**Camel大小写，编写类名称时使用****Pascal**大小写。

# python - Python：列表索引超出范围

> ID：15655093
> 
> 赞同：0
> 
> 时间：2013-03-27T09:07:28.803
> 
> 标签：python, string, list

我有一些简单的代码：

```
fname = "file1_12345678_23653345.tar.gz"
splitted_file_name = fname.split('.')[0].split('_') 
```

如果我尝试：

```
for i in xrange(len(splitted_file_name)):
    print str(i) + " - " + str(splitted_file_name[i]) 
```

但如果我想打印：

```
print splitted_file_name[0]
print splitted_file_name[1]
print splitted_file_name[2] 
```

我收到一个错误：

```
print splitted_file_name[1]
IndexError: list index out of range 
```

我不知道为什么，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:36:58.270

```
 first = fname.split('.')
    first = fname.split('.')
    second= splitted_file_name[0].split('_')
    print splitted_file_name[0]
    print splitted_file_name[1]
    print splitted_file_name[2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:21:04.400

我试过你的代码，我没有得到任何这样的错误！

编码：

```
fname = "file1_12345678_23653345.tar.gz"

splitted_file_name = fname.split('.')[0].split('_') 
```

输出 ：

```
['file1', '12345678', '23653345'] 
```

编码：

```
for i in range(len(splitted_file_name)):

print str(i)+" - "+str(splitted_file_name[i]) 
```

输出 ：

```
0 - file1

1 - 12345678

2 - 23653345 
```

编码：

```
for i in range(len(splitted_file_name)):

   print splitted_file_name[i] 
```

输出 ：

```
file1

12345678

23653345 
```

# vb6 - 如何从扫描仪获取图像？

> ID：15655096
> 
> 赞同：1
> 
> 时间：2013-03-27T09:07:36.287
> 
> 标签：vb6, image-scanner

我有 iBall A3 图像扫描仪，我想使用 VB6.0 应用程序扫描图像。

有人知道这种类型的应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:10:55.487

VB6 不需要“本机扫描仪库”，因为现代版本的 Windows 内置了一个。

TWAIN 仍在使用，但它的使用时间很长，而且许多现代扫描仪无论如何都没有附带 TWAIN 驱动程序。

看看[VB6-WIA 扫描演示](http://www.vbforums.com/showthread.php?672793-VB6-WIA-Scanning-Demo)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T09:16:55.947

由于 VB6 不包含本机扫描仪库，因此扫描仪访问需要某种第三方 DLL。一个流行的选择是免费的公共域[EZTW32 库](http://eztwain.com/index.htm)。还有其他的，搜索 TWAIN，这是底层 Windows API 的名称，提供对扫描仪驱动程序的访问。

EZTW32 库提供了多种与扫描仪交互的方式，以下是如何导入库函数的示例：

```
Private Declare Function TWAIN_IsAvailable Lib "EZTW32.dll" () As Long
Private Declare Function TWAIN_SelectImageSource Lib "EZTW32.dll" (ByVal hwndApp As Long) As Long
Private Declare Function TWAIN_AcquireToFilename Lib "EZTW32.dll" (ByVal hwndApp As Long, _
 ByVal sFile As String) As Long 
```

我建议您按照他们网站上的说明来满足您的需求。[这篇文章](http://www.tannerhelland.com/4043/scanner-vb6/)有更多的例子和信息。

# c# - 基于 ViewModel 属性实时设置树视图项目文本颜色

> ID：15655101
> 
> 赞同：0
> 
> 时间：2013-03-27T09:07:54.047
> 
> 标签：c#, mvvm, treeview, wpf-4.5

在我的 WPF 应用程序中，我使用的是 MVVM 模式。我的视图有一个树视图，我绑定了一个 observableCollection 对象，如下定义。我想要做的是在绑定对象将其脏属性设置为 true 时更改树项名称的颜色。当我第一次填充树时，我可以让它设置颜色，但是当属性在 false 和 true 之间变化时，它不会反映变化。

```
public class HierarchicalItem
{
    private readonly ObservableCollection<HierarchicalItem> _children = new ObservableCollection<HierarchicalItem>();

    public ViewModelBase ViewModel { get; set; }

    public string Name
    {
        get { return ViewModel.ViewModelName; }
    }

    public ICollection<HierarchicalItem> Children
    {
        get { return _children; }
    }

    private bool _isSelected;
    public bool IsSelected
    {
        get { return _isSelected; }
        set
        {
            _isSelected = value;
            if (_isSelected)
                EventSystem.Publish(new SelectedViewModelMessage { SelectedViewModel = ViewModel });
        }
    }

    public bool IsDirty
    {
        get { return ViewModel.IsDirty; }
    }
} 
```

这是树视图 xaml：

```
 <TreeView Grid.Row="0" Grid.Column="0" ItemsSource="{Binding Path=Views}">
        <TreeView.ItemContainerStyle>
            <Style TargetType="{x:Type TreeViewItem}">
                <Setter Property="IsExpanded" Value="True"/>
                <Setter Property="IsSelected" Value="{Binding Path=IsSelected, Mode=OneWayToSource}" />
            </Style>
        </TreeView.ItemContainerStyle>

        <TreeView.Resources>

            <HierarchicalDataTemplate DataType="{x:Type local:HierarchicalItem}" ItemsSource="{Binding Children}">
                <TextBlock Text="{Binding Name}">

                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsDirty}" Value="True">
                                    <Setter Property="Foreground" Value="Red" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>

                </TextBlock>
            </HierarchicalDataTemplate>

        </TreeView.Resources>
    </TreeView> 
```

这是绑定到树的集合：

```
 private readonly ObservableCollection<HierarchicalItem> _views = new ObservableCollection<HierarchicalItem>();
    public ObservableCollection<HierarchicalItem> Views
    {
        get { return _views; }
    } 
```

在 HierarchicalItem 集合中引用的 ViewModel 都派生自公开“IsDirty”属性的基类。这肯定会改变状态，所以我不确定我是否犯了编码错误，或者我想要实现的目标是否无法以这种方式完成。这些类都使用“INotifyPropertyChanged”接口。这是 ViewModel 基类中的“IsDirty”属性：

```
public class ViewModelBase : ValidatableModel
{
    #region Properties

    private bool _isDirty;
    public bool IsDirty
    {
        get { return _isDirty; }
        protected set
        {
            _isDirty = value;
            OnPropertyChanged("IsDirty");
        }
    }

 .
 .
 .
 Etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:20:34.147

这是因为您的 HierarchicalItem（您遇到问题的那个）没有对其 IsDirty 属性使用完整的 INPC 方法。viewmodel 可以，但这还不够，因为 DataTemplate 将使用 HierarchicalItem 的 IsDirty 属性，因此也需要完整的 INPC 属性

把它改成这个，应该没问题。

```
private bool _isDirty;
public bool IsDirty
{
    get { return _isDirty; }
    protected set
    {
        _isDirty = value;
        OnPropertyChanged("IsDirty");
    }
} 
```

尽管对于您的用例，您需要想出一些方法来触发它。或者您可以尝试的另一件事是将 HierarchicalItem DataTemplate 中的绑定更改为此

```
<DataTrigger Binding="{Binding ViewModel.IsDirty}" Value="True"> 
```

# objective-c - 如何在 Cocoapod 子规范中定义不同的 xcconfig 参数？

> ID：15655103
> 
> 赞同：3
> 
> 时间：2013-03-27T09:08:01.897
> 
> 标签：objective-c, configuration-management, cocoapods, xcconfig

我开发了一个 iOS 项目，它是一个处理不同服务器的类库。每个使用该库的应用程序只需要一台服务器。服务器类型可在编译时通过预处理器定义进行配置。

在我的库的 podspec 中，我为每个服务器定义了各种子规范，如下所示：

```
s.name = "ServerLib"
[...]
s.subspec 'ServerA' do |a|
    a.source_files = 'Classes/A/**/*.{h,m}'
    a.xcconfig = { "GCC_PREPROCESSOR_DEFINITIONS" => "$(inherited) ServerA=1" }
end

s.subspec 'ServerB' do |b|
    b.source_files = 'Classes/B/**/*.{h,m}'
    b.xcconfig = { "GCC_PREPROCESSOR_DEFINITIONS" => "$(inherited) ServerB=1" }
end 
```

我的应用程序是一个多客户应用程序，每个客户有一个目标。每个客户都使用图书馆项目中的特定服务器。所以，我的 Podfile 看起来像这样：

```
platform :ios, '5.0'

pod 'MyCore'
pod '3rdPartyLib'

target :'Customer1', :exclusive => true do
    pod 'ServerLib/ServerA'
end

target :'Customer2', :exclusive => true do
    pod 'ServerLib/ServerB'
end 
```

该`pod install`脚本的作用是将子规范中定义的所有标志合并为每个 pod-customerN.xcconfig 文件中的一个值

```
GCC_PREPROCESSOR_DEFINITIONS = $(inherited) 3RD_PARTY_FLAGS $(inherited) ServerA=1 $(inherited) ServerB=1 
```

有什么建议可以规避 Cocoapods 的这种错误（？）行为吗？据我了解文档，子规范属性应该只继承其父规范而不是同级子规范。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T09:15:55.817

找到了一种解决方法，可能不是那么优雅：

由于`pod install`将所有编译器标志合并为一个，我不得不`GCC_PREPROCESSOR_DEFINITIONS`从库的`podspec`文件中删除 。但是如果没有这个定义，我的库就无法构建。

在 Xcode 中，这可以通过将定义添加到每个库的目标来轻松解决。但是当我在应用程序中使用我的库时，Pods 项目是根据不包含所需标志的 Podspec 生成的。

解决方案是使用`post_install`应用程序的 Podfile 中的钩子来操作 Pods 项目生成的 xcconfig。

```
post_install do |installer|

    file_names = ['./Pods/Pods-ServerA.xcconfig',
                  './Pods/Pods-ServerB.xcconfig']

    # rename existing pre-processor definitions
    file_names.each do |file_name|
        text = File.read(file_name)
        File.open(file_name, 'w') { |f| f.puts text.gsub(/GCC_PREPROCESSOR_DEFINITIONS/, "GCC_PREPROCESSOR_DEFINITIONS_SHARED")}
    end

    # merge existing and required definition for ServerA
    File.open('./Pods/Pods-ServerA.xcconfig', 'a') { |f|
        f.puts "\nGCC_PREPROCESSOR_DEFINITIONS=$(GCC_PREPROCESSOR_DEFINITIONS_SHARED) ServerA=1"
    }

    # merge existing and required definition for ServerB
    File.open('./Pods/Pods-ServerB.xcconfig', 'b') { |f|
        f.puts "\nGCC_PREPROCESSOR_DEFINITIONS=$(GCC_PREPROCESSOR_DEFINITIONS_SHARED) ServerB=1"
    }

end 
```

代码有点冗长，因为我不熟悉 Ruby，但它可以工作。只要变量和库遵循命名方案，就应该很容易自动化这个重命名附加过程。

# python - 如何使用 pylzma 从 7zip 压缩文件中提取多个文件

> ID：15655104
> 
> 赞同：0
> 
> 时间：2013-03-27T09:08:02.987
> 
> 标签：python, 7zip, compression

我有一个 .bup 扩展名的 7zip 压缩文件，在使用 7zip 实用程序提取此文件后，它会创建一个包含两个文件的文件夹....我想用 PyLZMA 做同样的事情，可以将所有文件提取到一个文件夹中使用 PyLZMA（解压缩）？，你能告诉我怎么做吗？我是新手，所以任何详细的帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:56:54.900

Python 3.3 模块内置了 lzma 支持并附带[示例](http://docs.python.org/dev/library/lzma#examples)

# php - 除非我先回显，否则 php odbc_exec 不起作用？

> ID：15655105
> 
> 赞同：3
> 
> 时间：2013-03-27T09:08:06.397
> 
> 标签：php, ms-access, apache2, odbc

我正在尝试使用 php odbc_connect 和 odbc_exec 查询访问 MDB 文件。这个想法是返回一个数组，然后我可以将其转换为 json。

我在 Ubuntu 12.10 上通过 apache2 运行 php

这是我的代码：

```
//Connect to the database
$conn=odbc_connect('stock-test','','');

//die if error
if (!$conn) {
    die("Connection Failed: " . $conn);
} 
//SQL query
$sql = "SELECT * FROM Stk_Items";

//This is the print command...see notes below for this
//print " "

//Execute SQL query
$rs=odbc_exec($conn,$sql);

//If no result, there is an error in the SQL
if (!$rs) {
    exit("Error in SQL");
}

//Create an array to contain the results...
$arr = array();

//Loop through the results, pushing each array to the $arr array
while ($row = odbc_fetch_array($rs)) {
    array_push($arr, $row);
}

print json_encode( $arr);

odbc_close($conn); 
```

现在这是奇怪的事情。如果我在发出 odbc_exec 命令之前打印一个空格（或任何其他字符），此代码只会输出 json（我已在上面的代码中注释掉了该命令）

我还运行了其他几个测试（回显结果等），但除非我在 odbc_exec 命令之前打印一些空格，否则没有一个可以工作。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T06:35:05.113

我设置了一个虚拟机并从头开始重新安装，以查看新版本是否再次存在问题。事实并非如此，这让我相信在现场机器上构建 Apache 存在问题。在过去的几天里，我已经通过存储库删除和添加了 Apache，并通过 apt-get 添加了所有最新更新，现在问题似乎已经解决 - 由于通常会应用最新更新，因此我只能想象必须有一些东西apache2 或 php5-odbc 的初始安装出错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:40:57.410

你所描述的对我来说听起来像是一个 apache 怪癖。如果您使用 Web 浏览器来触发 PHP 脚本并检查结果，那么您确实应该至少`<html><body>`在其他任何事情之前输出。如果您想以合理的不受干扰的形式查看结果，您也应该回显一个`<pre>`标签。

FWIW，我从命令行按原样运行您的代码，它对我来说工作得很好。

编辑：

除了下面的评论，当 apache2 调用一个使用`odbc_exec()`. 为了测试，我在我的 Ubuntu 12.04 LAMP 服务器上创建了以下“页面”...

```
<?php
$arr = array(
    array('ID' => 1, 'text' => 'foo'), 
    array('ID' => 2, 'text' => 'bar'), 
    array('ID' => 3, 'text' => 'baz')
    );
print json_encode($arr); 
```

...并且 Firefox 确实显示 JSON 字符串，如下所示...

[{"ID":1,"text":"foo"},{"ID":2,"text":"bar"},{"ID":3,"text":"baz"}]

...所以 apache2 吐出一个纯 JSON 字符串没有问题，而 Firefox 显示它也没有问题。

# security - 确保没有凭据的客户端/服务器身份验证

> ID：15655106
> 
> 赞同：0
> 
> 时间：2013-03-27T09:08:07.633
> 
> 标签：security, ssl, https, certificate

我正在研究保护我的客户端应用程序和服务器之间的通道的方法。

我有一个富桌面客户端（win）和移动客户端连接到 web 服务，交换数据。

使用 SSL 证书，服务器和客户端可以相互信任。在安全连接上，我可以交换用户名和密码，从而对用户进行身份验证。

但是，在某些情况下，用户必须通过两种方法中的任何一种连接到服务器，而无需其凭据，而只能是文字，例如车牌号。

我真的想确保在这种情况下，我只允许客户端从我确定我知道的设备连接，因为没有进一步检查身份验证并且车牌号将是一个非常常见的文字。

我如何确保只有我的服务器已知的“设备”才能与我的服务器交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:25:27.787

如果要对设备进行身份验证，则需要找到一种方法让设备证明它是什么，而不泄露它的秘密。

对于任何有能力看到该号码的人来说，类似车牌的系统很容易被欺骗。根据您对此设备的控制程度，您可能无法隐藏它，即使与您的服务器的连接受到 SSL/TLS 的保护。

一种可能的方法是使用加密硬件令牌（或智能卡）。其中一些令牌可以配置为持有证书和私钥，能够使用私钥而无法导出该私钥。加密操作（签名和解密）发生在令牌本身上。

您可以使用这些对您的服务器执行客户端证书身份验证。在这种情况下，您会知道客户端拥有该令牌。这可以在您知道 CA 仅针对此类令牌中的密钥对颁发证书的条件下起作用：管理 CA 来处理此问题将产生成本。

这至少允许您将身份验证绑定到特定令牌。您是否可以将其与您的整体设备集成取决于您拥有的设备类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:35:49.177

请检查 TLS 预共享密钥 ( [RFC 4279](https://www.rfc-editor.org/rfc/rfc4279) ) 是否可用于您的方案。

# java - 如何自动启动 apache tomcat 服务器

> ID：15655115
> 
> 赞同：0
> 
> 时间：2013-03-27T09:08:37.270
> 
> 标签：java, web-services

部署war文件后我可以查看网页。当我第二天打开页面时，我无法在重新启动apache tomcat服务器后再次查看该页面，页面打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:13:26.573

您必须关闭机器。当您第二天访问相同的 URL 时，您将无法看到该页面。您必须再次重新启动 tomcat 服务器才能看到该页面。

# nsis - 如何使用 NSIS 在静默安装程序中调用自定义页面功能？

> ID：15655119
> 
> 赞同：2
> 
> 时间：2013-03-27T09:08:49.077
> 
> 标签：nsis

```
 page custom test

    # Installer sections
    Section -Main SEC0000
        SetOutPath $INSTDIR
        MessageBox MB_OK "done"
        ;............
        ;.........
    SectionEnd

    Function test
        MessageBox MB_OK "ok"
        //Do some stuff
    FunctionEnd

    # Installer functions
    Function .onInit
   !ifdef IsSilent
         SetSilent silent
   !endif
         InitPluginsDir
    FunctionEnd 
```

在上面的代码中，以静默和非静默模式两种方式运行。如果在非静默模式下运行[用户交互]，则会调用自定义页面函数并显示消息框。但是如果你在静默模式下运行它[无用户交互]，则不会调用自定义页面并且不会显示任何消息框。此外，**完成**消息框以静音模式显示。

在静默安装程序中没有调用自定义页面是否有任何原因？

如何在静默安装程序模式下调用自定义页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T10:01:57.100

> 是否有任何原因没有在静默安装程序中调用自定义页面？

这是设计使然：静默安装程序是静默的，即它不显示 GUI，因此不显示页面（既不是标准的也不是自定义的），也不会触发页面回调。`MessageBox`很特别，因为它映射到标准函数并由您触发。

> 如何在静默安装程序模式下调用自定义页面？

你不能。如果自定义页面有一些处理，放在一个函数中：

*   将从自定义页面调用
*   将从 the`.onInit`或 类似的部分显式调用

    ```
    IfSilent 0 +2
    Call YourProcessingFunc 
    ```

如果您基于用户在自定义页面中给出的某些选择进行处理，则需要在静默模式下使用一些默认值。或者实现命令行传递的参数。

# android - 使用 ksoap2 在 android 中通过 HTTPs 调用 webservice

> ID：15655121
> 
> 赞同：3
> 
> 时间：2013-03-27T09:08:57.010
> 
> 标签：android

大家好，我正在使用 ksaop2 库在 android 中处理 Web 服务，我已经使用 http，但是当尝试使用 https 时，我得到了异常

**javax.net.ssl.SSLHandshakeException：java.security.cert.CertPathValidatorException：找不到证书路径的信任锚。** 我的 wsdl 文件要求打开用户名和密码，您能帮我如何通过 ssl 调用 Web 服务吗

# eclipse - 如何在 Eclipse 中自动格式化代码？

> ID：15655126
> 
> 赞同：441
> 
> 时间：2013-03-27T09:09:17.070
> 
> 标签：eclipse, formatting, format, code-formatting

如何在 Eclipse 中自动格式化代码？

* * *

## 回答 #1

> 赞同：765
> 
> 时间：2013-03-27T09:09:17.070

**在 Windows 和 Linux**上：`Ctrl`++`Shift``F`

**在 Mac 上**：`⌘</kbd> + `⇧</kbd> + `F```

（或者，您可以按`Format`主菜单 > 来源）

* * *

## 回答 #2

> 赞同：200
> 
> 时间：2013-03-27T09:18:50.313

另一个选项是转到**Window->Preferences->Java->Editor->SaveActions**并检查**Format source code**选项。然后，您的源代码将在每次保存时真正自动格式化。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2013-10-19T03:08:43.230

`CTRL`++将自动格式化您的代码（无论是突出显示还是未突出显示）`SHIFT`。`F`

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2014-02-12T14:52:55.880

这也可以在项目级别完成：在包资源管理器中，**右键单击项目 > 属性 > Java 编辑器 > 保存操作**

当作为一个团队工作时，这可能更可取，以便每个人的代码都以相同的格式设置保存。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2017-04-28T16:18:41.017

注意：除非我纠正了所有错误，否则它不会格式化文档。在按`CTRL`+ `SHIFT`+之前检查您的文件`F`。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2013-10-04T14:12:05.480

按：`Ctrl`+`A`或突出显示要缩进的代码部分，然后按`Ctrl`+ `I`。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2014-01-31T16:58:57.123

Windows -> 首选项 -> Java -> 编辑器 -> 保存操作 -> 格式化源代码 -> 格式化编辑的行（或）格式化所有行。

有时当你作为一个团队工作时，领导不希望你格式化源文件中的所有代码行（巨大的跟踪更改将在提交时出现）。因此，选择“格式化编辑的行”。这将只编辑和格式化您修改的行。

古布斯

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2015-11-14T04:00:25.513

您可以按照以下步骤进行

1.  按`Ctr`+ `A`（Windows）或`cmd`+ `A`（Mac 操作系统）

2.  `Ctr`+`I`在 windows 中或`cmd`+`I`在 Mac os 中

它会自动格式化您的代码

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2019-04-29T19:26:06.997

秘诀很简单：`Ctrl`++`Shift``F`

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-02-25T11:05:36.427

使用最新的 PDT 版本更新您的 IDE，以获得更好的代码格式。在主菜单上单击**帮助 -> 安装新软件，然后在****使用**字段中添加以下 URL ：

```
http://download.eclipse.org/tools/pdt/updates/4.0.1 
```

当询问名称时，请提供名称，`PDT4.0.1`然后进行更新或安装。

它将查看是否已经安装了适当的 PDT，或者它是否是较低版本，然后将对其进行更新。

重新启动或应用更改后，转到 侧栏上的**Windows -> Preferences并展开****PHP -> Code Style**。在这里，您将看到一个名为**Formatter**的项目。选择它并选择代码格式化的活动配置文件。而已。

下次格式化时，它将根据所选的活动配置文件选择格式。

希望能帮助到你。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-01-25T14:52:25.357

您可以使用
`Ctrl`+`I`

或者

`Ctrl`+ `Shift`+`F`

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2019-01-15T11:43:55.623

另请注意，您还可以使用**@formatter:off**和**@formatter:on** “保护”块不被格式化，避免重新格式化评论，例如：

```
// Master dataframe
Dataset<Row> countyStateDf = df
    .withColumn(
        "countyState",
        split(df.col("label"), ", "));

// I could split the column in one operation if I wanted:
// @formatter:off
//    Dataset<Row> countyState0Df = df
//        .withColumn(
//            "state",
//            split(df.col("label"), ", ").getItem(1))
//        .withColumn(
//            "county",
//            split(df.col("label"), ", ").getItem(0));
// @formatter:on

countyStateDf.sample(.01).show(5, false); 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2017-08-29T11:10:34.163

右键单击项目 > 属性 > Java 编辑器 > 保存操作

# eclipse - 如何从我创建的视图跳转到 Eclipse 编辑器中的错误行

> ID：15655129
> 
> 赞同：0
> 
> 时间：2013-03-27T09:09:19.120
> 
> 标签：eclipse, view

我在 Eclipse 中创建了一个类似控制台的视图，它向用户显示了错误。所以当用户单击该错误时，它应该转到该行号。我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:35:34.247

扔掉你自制的视图，实现[控制台工厂扩展点，](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_console_consoleFactories.html)而不是在现有的控制台视图中创建新的控制台子窗口。然后实现[控制台模式匹配扩展点](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_console_consoleFactories.html)以在控制台输出中查找和链接文本段。

在 Eclipse 中实现一个表现得像一个已经存在的视图的完整视图总是错误的。eclipse 平台中的所有现有视图都有扩展点来更改和增强它们。没有人真的希望在一个透视图中显示 5 个*不同*的控制台视图。

# scala - 集合中的可选元素取决于条件，在 scala 中没有额外的过滤

> ID：15655133
> 
> 赞同：1
> 
> 时间：2013-03-27T09:09:27.883
> 
> 标签：scala

我正在尝试找到仅有条件地将元素添加到集合中的最佳方法。让我试着解释一下。

让：

```
val a="1234"
val b="1arst"
val c="" 
```

（你可以看到我正在使用我打赌的 colemak 布局）

我想制作一张地图，但只有当它的长度大于一个时才包含一个元素。

我可以去：

```
Map("a" -> a, "b" ->b, "c"->c).filter(_._2.length>0) 
```

这给了我想要的地图：

```
res7: scala.collection.immutable.Map[java.lang.String,java.lang.String] = 
Map(a -> 1234, b -> 1arst) 
```

我还可以执行以下操作：

```
Map(
if(a.length>0) "a"->a else "" -> "" ,
if(b.length>0) "b"->b else "" -> "" , 
if(c.length>0) "c"->c else "" -> "" ) 
```

但这在地图中给了我一个不需要的空字符串值，我仍然需要过滤它：

```
res12: scala.collection.immutable.Map[java.lang.String,java.lang.String] = Map(a -> 1234, b -> 1arst, "" -> "") 
```

因此，我正在考虑对 Nil 使用右关联运算符，但这也不起作用，因为您最终会在列表中得到一个空的列表项。

> scala> "test" -> "test" :: Nil :: "test"->"test" :: Nil res1: List[Product with Serializable] = List((test,test), List(), (test,测试））

有没有更有效的方法来完成这项工作，而无需再次过滤所有元素以删除任何长度为 0 的项目？

# xml - XML 模式参考和未声明的类型

> ID：15655136
> 
> 赞同：1
> 
> 时间：2013-03-27T09:09:34.710
> 
> 标签：xml, xsd, envelope

我是架构构建的新手，并且在理解命名空间引用应该如何工作时遇到问题。我使用与 BizTalk 类似的应用程序并在以下架构上执行去封装操作。我不确定这是否是一般错误，但这是我得到的错误：

错误

```
XmlSchemaValidationException, Type 'http://Wheelhouse/Property:PropertyType' is not declared. : 
```

属性定义

```
<?xml version="1.0" encoding="utf-16"?>
<xs:schema xmlns="http://Wheelhouse/Property" elementFormDefault="qualified" targetNamespace="http://Wheelhouse/Property" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="Property" type="PropertyType" />
  <xs:complexType name="PropertyType">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="1" name="ID" />
      <xs:element minOccurs="0" maxOccurs="1" name="Listing_Number" />
      <xs:element minOccurs="0" maxOccurs="1" name="Status" />
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

属性列表定义

```
<?xml version="1.0" encoding="utf-16"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import schemaLocation="blueintegrator://Wheelhouse/PropertyDefinition__4f3f265569d54e9fa898eba835502c6a_" namespace="http://Wheelhouse/Property" />
  <xs:element xmlns="http://Wheelhouse/Property" name="Root">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" maxOccurs="unbounded" name="Property" type="PropertyType" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:09:31.770

它不起作用的原因与 schemaLocation 属性中的 URI 方案（blueintegrator）有关。您用来使用 XSD 的工具很可能不理解该 URI，因此它无法加载包含`http://Wheelhouse/Property:PropertyType`类型定义的 XSD。

对于“普通”工具，如果您将该属性的值更改为其他值（例如，如果您将两个文件放在同一个文件夹中，然后将整个 schemaLocation 值替换为文件名），您将看到架构是完全有效的。

# ios - NSURLConnection 身份验证挑战，即使它不应该

> ID：15655137
> 
> 赞同：0
> 
> 时间：2013-03-27T09:09:35.357
> 
> 标签：ios, http, authentication, nsurlconnection

我可以使用 NSURL 进行身份验证，用户可以分配用户名和密码。但是，我遇到了另一个问题。如果我打开这个[http://html5test.com/](http://html5test.com/)，它也会弹出并询问用户名和密码。我得到了认证，即使它不应该得到。我想知道该怎么做。

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
   if(!_auth)
    {
   connection_for_auto = [[NSURLConnection alloc] initWithRequest:request delegate:self];
          firsttimeonly=TRUE;
         [connection_for_auto start];
        NSLog(@"Request >>  %@ and !firsttimeonly",request);
        return NO;
    }
    self.lbl_error.hidden = YES; //hide error message label
    return YES;

}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{

    checkTochangeUIalert=TRUE;
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Login"
                                                    message:nil
                                                   delegate:self
                                          cancelButtonTitle:@"Cancel"
                                          otherButtonTitles:@"OK",@"Auto", nil];

    alertView.transform=CGAffineTransformMakeScale(1.0, 0.75);
    alertView.alertViewStyle = UIAlertViewStyleLoginAndPasswordInput;
    [alertView show];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:31:34.470

我想我已经找到了一种方法。我需要检查我使用哪种身份验证方法。

```
if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodHTTPBasic] || [challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodNTLM])
{
.............
} 
```

# css - Html 本地文件中的字体

> ID：15655138
> 
> 赞同：0
> 
> 时间：2013-03-27T09:09:42.920
> 
> 标签：css

我在 CSS 文件中选择字体时遇到问题。字体在本地 HTML 代码中显示不正确。

```
#main_menu ul li
  {
      border-left:1px solid #dad8d8;
      font-family:"arabic transparent";
      font-size:16px;
      padding: 0px 20px;
      color: #e2001a;
      list-style: none;
      display: inline;
      font-weight: bold;
  } 
```

HTML 文件中的字体与 Photoshop 设计中的字体不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:16:06.280

你必须嵌入字体

使用以下网站生成字体 [www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

```
@font-face {
    font-family: 'YourFont';
    src: url('YourFont.eot');
    src: url('YourFont.eot?#iefix') format('embedded-opentype'),
         url('YourFont.woff') format('woff'),
         url('YourFont.ttf') format('truetype'),
         url('YourFont.svg#YourFont') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:14:30.773

你最好使用CSS3 中[的@font-face](http://www.w3schools.com/css3/css3_fonts.asp)。来自 W3School 的示例：

```
@font-face
{
    font-family: myFirstFont;
    src: url('Sansation_Light.ttf'),
        url('Sansation_Light.eot'); /* IE9+ */
}

div
{
    font-family:myFirstFont;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:14:16.030

您不能只在网络上/在 HTML 中使用任何字体。你有一种叫做网络安全字体的东西，可以手动添加自定义字体。

检查 FontSquirrel 的转换技术：[http ://www.fontsquirrel.com](http://www.fontsquirrel.com)

如果字体在您的本地计算机上，则如果浏览器尝试查找它，它“可以”工作，但您不能依赖它，因为大多数访问您网站的其他用户不会在他们的网站上使用它，从而制作字体回退到 Arial 或类似的默认字体。

Font-squirrel 会给你这些格式（名字就是一个例子）；

*   阿拉伯语.eot
*   阿拉伯语.svg
*   阿拉伯语.ttf
*   阿拉伯语.woff

包含所有这些内容后，所有主要浏览器都应该能够使用以下`@font-face`属性读取您的自定义字体：

```
@font-face {
    font-family: 'arabic transparent';
    src: url('arabic.eot');
    src: url('arabic.eot?#iefix') format('embedded-opentype'),
         url('arabic.woff') format('woff'),
         url('arabic.ttf') format('truetype'),
         url('arabic.svg#arabic_transparent') format('svg');
    font-weight: normal;
    font-style: normal;
}

#main_menu ul li {
    font-family: 'arabic transparent';
} 
```

# c# - 如何使用 C# 获取“用于执行操作的应用程序”

> ID：15655139
> 
> 赞同：0
> 
> 时间：2013-03-27T09:09:48.540
> 
> 标签：c#, windows, filesystems, file-association

在windows XP 资源管理器中的“文件夹选项”对话框是一个文件类型选项卡。在文件类型选项卡中，已知的文件类型与程序相关联。

当“编辑文件类型”对话框可见时，文件类型有不同的操作，如打开或打印。这些动作中的每一个都具有“用于执行动作的应用程序”的属性。我需要读出所列软件的绝对路径和名称。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:30:29.473

您需要查看**File Associations**，有很多方法可以做到这一点。

MSDN： http: [//msdn.microsoft.com/en-us/library/windows/desktop/cc144154 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144154(v=vs.85).aspx)

PInvoke，有一个 shchangenotify(...) 在注册表的那个区域有一个例子： [http ://www.pinvoke.net/default.aspx/shell32.shchangenotify](http://www.pinvoke.net/default.aspx/shell32.shchangenotify)

还有右边的相关链接->

# c# - MVC 中异常处理的最佳方法是什么（Base_Controller vs CustomHandleErrorAttribute）

> ID：15655144
> 
> 赞同：1
> 
> 时间：2013-03-27T09:10:12.607
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, exception-handling

我在三种模型中的 MVC 中进行了特殊处理。

```
 public class CustomHandleErrorAttribute : HandleErrorAttribute
{  
    public override void OnException(ExceptionContext filterContext)
    {
       //logging           

    }
} 
```

和

```
 public class Base_Application : System.Web.HttpApplication
{
    protected void Application_Error(object sender, EventArgs e)
    {

        //Logging
    }
} 
```

和

```
 public class Base_Controller : Controller
{
    protected override void OnException(ExceptionContext filterContext)
    {
        //Logging;

    }

} 
```

如果我从代码中抛出一个示例异常，它会被`CustomHandleErrorAttribute`and捕获`Base_Controller`。

和

在`Base_Application`我记录异常时，Elmah 也记录异常。

所以我想知道在所有情况下最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:27:39.377

如果您有基本控制器，我建议您采用这种方法

```
public class CustomHandleErrorAttribute : HandleErrorAttribute
{  
    public override void OnException(ExceptionContext filterContext)
    {
       //logging           

    }
} 
```

并使用自定义属性装饰基本控制器

```
[CustomHandleError]
public class Base_Controller : Controller
{

} 
```

因此，如果您将来添加一个不需要基本控制器的控制器，您也可以重用该属性。

还要通过这篇精彩的[**文章**](http://odetocode.com/blogs/scott/archive/2010/06/28/action-filter-versus-controller-base-class.aspx)来决定是使用基本控制器还是 ActionFilter。

`Application_Error`事件可用于捕获页面级错误处理程序未捕获的错误。

# java - 使用 glReadPixels() 找到正确的上下文以截取屏幕截图

> ID：15655148
> 
> 赞同：0
> 
> 时间：2013-03-27T09:10:32.553
> 
> 标签：java, android, opengl-es, screenshot, glreadpixels

我正在尝试通过 glReadPixels() 直接从帧缓冲区读取，以便我可以从屏幕上的任何内容中截取屏幕截图。
我没有使用 GUI，而是在我触摸屏幕时打印屏幕的原始内容（这对于开始来说已经足够了）。

我现在一直在为我的 gl.glReadPixels() 函数获取正确的上下文。
因为我认为我现在得到的上下文与屏幕上的实际内容无关。

当我运行应用程序时，它会打印一个 libEGL 错误，上面写着

> 在没有当前上下文的情况下调用 OpenGL ES API（每个线程记录一次）

然后我让我的数组充满了零。

为了隐藏我的应用程序，我在清单中使用了以下行。

```
android:theme="@android:style/Theme.Translucent.NoTitleBar" 
```

这是代码：

```
public class ScreenshotActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_UP) {   
                savePixels();
        }
        return true;
    }

    EGL10 egl = (EGL10) EGLContext.getEGL();
    GL10 gl = (GL10) egl.eglGetCurrentContext().getGL();

    public void savePixels() {
         w= getWidth(this);
         h= getHeight(this);
         int b[] = new int[w * h];
         int bt[] = new int[w * h];
         IntBuffer ib = IntBuffer.wrap(b);
         ib.position(0);

         gl.glReadPixels(0, 0, w, h, GL10.GL_RGBA, GL10.GL_UNSIGNED_BYTE, ib);

         for (int i = 0; i < h; i++) {
             for (int j = 0; j < w; j++) {
                 int pix = b[i * w + j];
                 int pb = (pix >> 16) & 0xff;
                 int pr = (pix << 16) & 0x00ff0000;
                 int pix1 = (pix & 0xff00ff00) | pr | pb;
                 bt[(h - i - 1) * w + j] = pix1;
                 }
             }

             Log.w("debug", Arrays.toString(bt));
             moveTaskToBack(true);
    }
} 
```

高度赞赏帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:44:18.947

人们可以停止尝试滥用 OpenGL 来**截取屏幕截图**吗？如果您想捕获执行 glReadPixels 调用的程序的渲染输出，这很好，但是一旦其他程序成为预期的像素源，它就会变得非常不可靠。

获取全屏屏幕截图的唯一可靠方法是直接从 GPU 的视频缓冲内存中读取。Android 基于 Linux，Linux 为此提供了 fbdev 设备。由于使用所有这些 ioctl 有点麻烦，因此应该使用一些经过测试的库。有一个适用于 Android 的库，它提供了用于截屏的专用 API：[http ://code.google.com/p/android-screenshot-library/wiki/DeveloperGuide](http://code.google.com/p/android-screenshot-library/wiki/DeveloperGuide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:28:24.050

终于找到了一个开源程序，它没有使用 /dev/graphics/fb0 来捕获帧缓冲区。

包[fb2png](http://code.google.com/p/android-fb2png/source/checkout)包含一个 C 程序和一个 python 脚本，它们都可以完美运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:35:20.690

```
mGLSurfaceView.queueEvent(new Runnable() {
  public void run() {
    savePixels();
  }
}); 
```

您必须将 mGLSurfaceView 更改为您的 SurfaceView 实例。

# php - 如何在php，mysql中保存拖放（图像，按钮，文本，段落）的位置

> ID：15655153
> 
> 赞同：-4
> 
> 时间：2013-03-27T09:10:53.053
> 
> 标签：php, javascript, jquery, mysql, ajax

**如何在php，mysql中保存拖放（图像，按钮，文本，段落）的位置**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:37:44.050

如果实时更新位置：使用 JQuery + AJAX 发送坐标（更复杂）

如果在单击提交按钮后更新位置：

1）制作隐藏的html字段：

```
<form action="mySubmitScript.php" method="post">
    <input type='hidden' id='textfieldX' name='textfieldX'/>
    <input type='hidden' id='textfieldY' name='textfieldY'/>
</form> 
```

2）在jQuery元素移动事件上，设置隐藏的html字段值：

```
$('#textfieldX').val(XCordinateVar);
$('#textfieldY').val(YCordinateVar); 
```

3) $_POST 获取值：

```
$x = $_POST['textfieldX'];
$y = $_POST['textfieldY']; 
```

4）要存储的sql：

```
INSERT INTO mytable VALUES ($x, $y); 
```

# javascript - attributeContains 选择器中无法识别的表达式

> ID：15655154
> 
> 赞同：2
> 
> 时间：2013-03-27T09:10:55.947
> 
> 标签：javascript, jquery, jquery-selectors, fancybox

我在我的网站上使用 FancyBox 1.3.1 jQuery 插件。从 jQuery 1.4.1 切换到 1.9.1 后，我开始收到以下错误消息：

> 未捕获的错误：语法错误，无法识别的表达式：a[rel=lightbox[ArticleImages]]

我尝试将选择器更改为[jQuery 文档](http://api.jquery.com/attribute-contains-selector/)中描述的内容：

```
$('a[rel="lightbox[ArticleGallery]"]') 
```

但这也不起作用，因此将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:12:22.980

您必须对选择器中的方括号使用转义字符反斜杠`\`。

*改变*

```
$('a[rel="lightbox[ArticleGallery]"]') 
```

*至*

```
$('a[rel="lightbox\\[ArticleGallery\\]"]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:12:42.310

转义`[`运算符 .. 因为 jquery 将其视为属性选择器

```
$('a[rel="lightbox\\[ArticleGallery\\]"]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:45:00.190

答案由几个部分组成，所以我在这里总结一下答案：

1.  在 jQuery 1.9.1 中，您必须转义选择器中的方括号。请参阅 Adil 的回答。

2.  当从旧版本的 jQuery 迁移到 1.9.1 时，您可以使用 migration.js 文件来确保任何旧的 3rd 方插件仍然可以工作。请参阅 François Wahl 的评论。

但就我而言，这些建议都没有奏效。我仍然收到相同的错误消息。

所以我所做的就是迁移到fancyBox2，但后来偶然发现了另一个问题：

我的网站使用的是 Twitter Bootstrap 2.3.0，它不适用于 fancyBox2。[幸运的是，我在这个论坛帖子](https://github.com/twitter/bootstrap/issues/6862)中找到了答案。

我不得不在 bootstrap.js 文件中更改代码的和平：

```
.on('.dropdown-menu', function (e) { e.stopPropagation() }) 
```

对此：

```
.on('click.dropdown-menu', function (e) { e.stopPropagation() }) 
```

现在它起作用了。谢谢帮忙。

# ios - Objective-C KVC 改变属性的类型

> ID：15655155
> 
> 赞同：3
> 
> 时间：2013-03-27T09:10:57.683
> 
> 标签：ios, objective-c, kvc

我是 Objective-c 的新手。我正在写一个简单的方法将字典转换为对象来练习KVC知识：

```
+(id) ConvertDictionary:(NSDictionary *)dict 
                         ToClassInstance:(Class)type{

id targetObj = nil;
if(dict){
    NSArray *dictKeys = dict.allKeys;
    targetObj = [[type alloc] init];

    for (NSString*item in dictKeys) { 
            [targetObj setValue:[dict objectForKey:item] forKey:item];
        }
    }
}
return targetObj;
} 
```

还有一个简单的类：

```
 #import <Foundation/Foundation.h>
 @interface foo : NSObject
 @property (nonatomic) int value;
 @property(nonatomic,strong) NSDate *dateTime;
 @end 
```

并使用以下代码运行方法：

```
-(void)testConvert
{
   NSArray *value = [NSArray arrayWithObjects:
                     [NSNumber numberWithInt:2],@"wrongDateString",nil];
   NSArray *key = [NSArray arrayWithObjects:@"value",@"dateTime", nil];

   NSDictionary *dict = [NSDictionary dictionaryWithObjects: value forKeys:key];

   id result= [EPMClassUtility ConvertDictionary:dict 
                               ToClassInstance:[foo class]];
    foo *convert = (foo*) result; 
    NSLog(@"get value: %@",convert.dateTime);
    //console write the line: get value:wrongDateString

} 
```

我的问题是，我通过 setValue:forKey: 给属性一个错误类型的值（应该是 NSDate 但实际上是 NSString）。但是为什么没有异常发生在运行时或 XCode 中，属性 dateTime 如何接受 NSString 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:25:40.373

Objective-c 没有自动运行时类型检查，并且 using`setValue:frorKey:`避免了任何编译时检查，因为 value 参数可以是任何类型。

如果您想要运行时类型检查，您将需要实现自己的`-setDateTime:`（例如）在运行时检查类型。

# prolog - 最长递增子集 Prolog

> ID：15655158
> 
> 赞同：1
> 
> 时间：2013-03-27T09:11:19.923
> 
> 标签：prolog

我想在 Prolog 中创建以查找输入列表的最长增加子集。例如，您输入 [3,1,2] 的列表，输出为 [1,2]，

```
?- subset([3,1,2], X).
X = [1,2] 
```

我有显示此列表所有子集的代码：

```
subset([],[]).
subset([_|X],Y):-subset(X,Y).
subset([A|X],[A|Y]):-subset(X,Y). 
```

谁能帮我找到最长的增加子集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:01:56.480

你的意思`[1,3,5,6,7]`是回答`[4,1,3,8,9,5,6,7]`？IOW，您真的是指子集，还是只是子列表，即列表的连续部分？

如果是后者，则不需要子集。搜索是线性的。如果在一个列表中`[a,b,c,d,e,f]`你发现它`d > e`并且增加的序列`[a,b,c,d]`停止，你不需要从`b`现在开始重新开始搜索：序列仍然会在`d`. 您只需从 继续搜索`e`。

因此，我们将在搜索过程中携带一些额外的信息，即。当前和迄今为止的获胜子序列。以及它们的长度。

```
longest_incr([],0-[]).
longest_incr([A|B],RL-R):-                  % R is the result, of length RL
    longest_aux(B,[],0, [A],1, RL-R). 

longest_aux([],   Win,N, Curr,K, RL-R):- 
    ( K>N -> RL=K, reverse(Curr,R) ; RL=N, reverse(Win,R) ).
longest_aux([A|B],Win,N, Curr,K, RL-R):- Curr = [X|_], L is K,
    ( A>X -> longest_aux(B,Win, N, [A|Curr],L+1,RL-R)    % keep adding
    ; L>N -> longest_aux(B,Curr,K, [A],     1,  RL-R)    % switch the winner
    ;        longest_aux(B,Win, N, [A],     1,  RL-R)    % winner unbeaten 
    ). 
```

如果OTOH你真的需要最长的子集......那里有一个矛盾。集合可以重新排列其元素，因此给定列表的最长子集将是

```
longset_subset(L,R):- sort(L,S), R=S. 
```

也许您的意思是最长的保序子序列，即允许它是不连续的。然后，您可以收集您的`subset`with`findall`或类似谓词的所有解决方案，并分析这些结果：

```
longest_subseq(L,R):- 
    findall( S, subset(L,S), X),
    maplist( longest_incr, X, Y),
    keysort( Y, Z), 
    last( Z, _Len-R). 
```

上面有很多冗余。我们可以尝试通过只允许*增加*子序列来提高其效率：

```
incr_subseq([],[]).
incr_subseq([_|X],Y):- incr_subseq(X,Y).
incr_subseq([A|X],[A|Y]):- incr_subseq(X,Y), ( Y=[] ; Y=[B|_], A<B). 
```

现在由上述谓词找到的所有子序列都会增加，所以我们可以取它们`length`的 s：

```
lenlist(List,Len-List) :- length(List,Len).
longest_subseq(L,R):- 
    findall( S, incr_subseq(L,S), X),
    maplist( lenlist, X, Y),
    keysort( Y, Z), 
    last( Z, _Len-R). 
```

`longest_incr`或者，可以调整线性搜索以获得更有效的解决方案。它不会只保留一个获胜子序列，而是会在输入列表中保留所有相关的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:12:42.137

只是出于好奇，是否有可能在 prolog 中实现类似的东西来寻找最长的递增子序列：

*   您找到列表的所有子集
*   比你发现的，这些子集中的哪一个在增加
*   然后你搜索最长的

如果可能的话，我怎么能在 Prolog 中做到这一点？

# c# - 如何使用 ServiceStack 增量序列化和反序列化 JSON？

> ID：15655159
> 
> 赞同：2
> 
> 时间：2013-03-27T09:11:28.293
> 
> 标签：c#, json, .net-3.5, servicestack

我所拥有的是：

```
string json = @"{'number': 3, 'object' : { 't' : 3, 'whatever' : 'hi', 'str': 'test'}"; 
```

如何读取字段，直到我位于“对象”，然后将整个“对象”序列化为 .NET 类型，然后继续解析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:45:03.687

查看[ServiceStack 的动态 JSON 解析](https://github.com/ServiceStack/ServiceStack.Text#supports-dynamic-json-as-well)：

```
var myPoco = JsonObject.Parse(json)
    .GetUnescpaed("object")
    .FromJson<TMyPoco>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:29:03.123

定义你的类型：

```
public class Object
{
    public int t { get; set; }
    public string whatever { get; set; }
    public string str { get; set; }
}

public class RootObject
{
    public int number { get; set; }
    public Object object { get; set; }
} 
```

然后反序列化它：

```
string json = @"{'number': 3, 'object' : { 't' : 3, 'whatever' : 'hi', 'str': 'test'}";
var deserialized = JsonConvert.DeserializeObject<RootObject>(json);
//do what you want 
```

**更新**

你没有说它是动态的，对于这样的解析有很多解决方案。

检查以下内容：

[使用 JSON.NET 进行动态 JSON 解析](http://www.west-wind.com/weblog/posts/2012/Aug/30/Using-JSONNET-for-dynamic-JSON-parsing)

[使用 C# 4.0 和动态解析 JSON](http://www.drowningintechnicaldebt.com/ShawnWeisfeld/archive/2010/08/22/using-c-4.0-and-dynamic-to-parse-json.aspx)

[将 JSON 反序列化为 C# 动态对象？](https://stackoverflow.com/questions/3142495/deserialize-json-into-c-sharp-dynamic-object)

[使用动态变量解析 JSON 块](https://stackoverflow.com/questions/5628374/parse-json-block-with-dynamic-variables)

[将 JSON 转换为 ExpandoObject](http://coderjournal.com/2010/07/turning-json-into-a-expandoobject/)

处理动态类型：使用`dynamic`, 处理动态数据，例如**XML**或**JSON**使用`ExpandoObject`。

**更新 2**

[使用匿名类型反序列化 JSON 数据](http://blogs.msdn.com/b/alexghi/archive/2008/12/22/using-anonymous-types-to-deserialize-json-data.aspx)

**更新 3**

这对你有用吗：

```
 string json = "{\"number\": 3, \"object\" : { \"t\" : 3, \"whatever\" : \"hi\", \"str\": \"test\"}}";
            var deserialized = SimpleJson.DeserializeObject<IDictionary<string, object>>(json);

            var yourObject = deserialized["object"] as IDictionary<string, object>;            
            if (yourObject != null)
            {
                var tValue = yourObject.GetValue("t");
                var whateverValue = yourObject.GetValue("whatever");
                var strValue = yourObject.GetValue("str");
            } 

 public static object GetValue(this IDictionary<string,object> yourObject, string propertyName)
        {
            return yourObject.FirstOrDefault(p => p.Key == propertyName).Value;
        } 
```

最后结果：

![在此处输入图像描述](../Images/a3af04529a3602bfed500d08b58fda90.png)

或者改成以下

```
if (yourObject != null)
            {
                foreach (string key in yourObject.Keys)
                {
                    var myValue = yourObject.GetValue(key);
                }
            } 
```

![在此处输入图像描述](../Images/55801c7c4b0dca11222113f0f14469f3.png)

**更新 4 - 服务堆栈**

```
string json = "{\"number\": 3, \"object\" : { \"t\" : 3, \"whatever\" : \"hi\", \"str\": \"test\"}}";
            var deserialized = JsonObject.Parse(json);

            var yourObject = deserialized.Get<IDictionary<string, object>>("object");

            if (yourObject != null)
            {
                foreach (string key in yourObject.Keys)
                {
                    var myValue = yourObject.GetValue(key);
                }
            } 
```

结果：

![在此处输入图像描述](../Images/385fc9d3adcc7e96725461ba054625d0.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:05:51.160

这适用于反序列化，我会在序列化后更新。

```
foreach(KeyValuePair<String,String> entry in JsonObject.Parse(json))
{

} 
```

编辑：看起来这只适用于 json 对象。我仍然不知道如何迭代 JsonArrayObjects

# automation - 如何从 QTP 点击 WebArea ？

> ID：15655165
> 
> 赞同：0
> 
> 时间：2013-03-27T09:11:53.750
> 
> 标签：automation, qtp

在我的测试中，我想单击类型 WebArea 的对象，它会打开一个 webelement 弹出窗口，其中包含一些我需要测试的字段。

通过代码单击 WebArea 对象后弹出窗口未打开的问题。

我使用的代码如下。

Browser("WW").page("assessment").WebArea("areaassesment").Click

上述行执行后没有任何反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T09:26:11.937

查看 WebArea 的 HTML 并查看触发弹出窗口的操作。通常它有类似的东西`onclick='showPopup();'`，但在其他情况下它是`onmousedown`or `onmouseup`。

如果是这种情况，您必须相应地设置 QTP。这里有多条路要走，一条是看你的高级网络设置是如何配置的。转到*工具>选项>Web>高级*并查看运行设置。
将 Replay Type 设置为 Event 将通过事件（默认`mousedown`为 ,`mouseup`然后`mouseclick`）或鼠标（您会看到鼠标指针在此模式下移动，QTP 将通过通过 Windows api 发送 WM_* 消息以移动到正确的屏幕位置并触发点击）。
尽管它重播速度更快，但如果`Run only click`选中，最好取消选中它以触发所有事件/消息。

事件也可以通过以下`FireEvent`方法触发：

```
Browser("WW").page("assessment").WebArea("areaassessment").FireEvent("onclick") 
```

或通过对象本机方法：

```
call Browser("WW").page("assessment").WebArea("areaassessment").Object.click()
call Browser("WW").page("assessment").WebArea("areaassessment").Object.FireEvent("onclick") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:39:17.623

正如@AutomateChaos 所说，QTP 可能没有模拟一个事件，解决此问题的一种方法是按照@AutomateChaos 的建议进行操作并模拟所需的事件。一种更简单的方法是更改​​为设备重播（如我[在此处](https://stackoverflow.com/a/6670228/3848)和[此处](https://stackoverflow.com/a/1455924/3848)所述）。

# c++ - 多线程环境下读取变量总是有效吗？

> ID：15655167
> 
> 赞同：2
> 
> 时间：2013-03-27T09:12:00.910
> 
> 标签：c++, linux, multithreading, kernel, cpu

多线程环境中有一个变量（例如 int temp;）。一些线程写入它，写锁保护。而其他人读取变量，但没有任何锁。

我的问题是：如果变量被一些线程反复写入 SET 中的元素之一（例如 {1, 2, 3}）。当我读到它时，它总是其中一个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:22:06.863

规则很简单：如果两个或多个线程访问同一个变量，并且其中至少一个线程写入它，则**必须**同步**所有**这些访问。如果不这样做，则行为未定义。

`volatile`在这里帮不上忙；要么使用互斥锁或条件变量，要么使变量本身原子化。（并且“原子”是指 C++11 原子，而不是一些有人认为在多线程应用程序中表现良好的属性选择）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:46:33.007

如果没有人从您的 SET 之外写入值，则该值将保留在该 SET 中。您可能需要`volatile`在您的情况下使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:26:27.153

是的，如果你的变量的类型是不可变的，因为 SET 不允许重复

参考[SET](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)

# scheme - 二叉树在里面搜索

> ID：15655171
> 
> 赞同：0
> 
> 时间：2013-03-27T09:12:12.637
> 
> 标签：scheme, racket

谁能告诉我我需要在这里做什么？

```
(define (count-values abst v)
  (cond [(empty? abst) 0]
        [else (+ (cond [(equal? v (bae-fn abst)) 1]
                       (else 0))
                 (count-values .... v)
                 (count-values .... v ))])) 
```

我基本上需要一个函数来计算二叉树中符号 v 的数量

```
(define bae
  (make-bae '+
            (make-bae '* (make-bae '+ 4 1)
                      (make-bae '+ 5 2))
            (make-bae '- 6 3)))
(count-values bae '+) => 3 
```

因为 bae 中有 3 '+

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:24:44.887

你需要：

1.  发布树的定义 - 我猜`bae`是一个结构 - 不要假设我们知道您的代码，将所有相关信息作为问题的一部分发布
2.  确保您发布的代码至少部分有效 - 例如，由于命名冲突，`(define bae ...)`即使您提供了 的定义，该部分也不会有效`bae`
3.  按照遍历二叉树的秘诀，我敢打赌它在教科书中是对的

解决方案的总体思路是这样的，不看你到目前为止所做的代码的实际实现是我能给你的唯一帮助：

1.  如果树为空，则返回 0
2.  如果当前元素的值等于搜索到的值，加1；否则加 0
3.  无论哪种方式，将值添加到递归遍历左右子树的结果中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:06:50.200

如果你递归定义你的数据结构，那么自然会出现递归计数算法：

```
;; Utils
(define (list-ref-at n)
  (lambda (l) (list-ref l n)))
(define (eq-to x)
  (lambda (y) (eq? x y)))

;; Data Type    
(define (make-bae op arg1 arg2)
  `(BAE ,op, arg1, arg2))
(define (bae? thing) 
  (and (list? thing) (eq? 'BAE (car thing)) (= 4 (length thing))))
(define bae-op   (list-ref-at 1))
(define bae-arg1 (list-ref-at 2))
(define bae-arg2 (list-ref-at 3))

;; Walk
(define (bae-walk func bae)  ;; 'pre-ish order'
  (if (not (bae? bae))
      (func bae)
      (begin
        (func (bae-op bae))
        (bae-walk func (bae-arg1 bae))
        (bae-walk func (bae-arg2 bae)))))

;; Count
(define (bae-count-if pred bae)
  (let ((count 0))
    (bae-walk (lambda (x) 
                 (if (pred x) 
                     (set! count (+ 1 count))))
              bae)
     count))

(define (bae-count-if-plus bae)
  (bae-count-if (eq-to '+) bae))

> bae
(BAE + (BAE * (BAE + 4 1) (BAE + 5 2)) (BAE - 6 3))

> (bae-count-if-plus bae)
3

;; Find
(define (bae-find-if pred bae)
  (call/cc (lambda (exit)
             (bae-walk (lambda (x)
                         (if (pred x) (exit #t)))
                       bae)
             #f))) 
```

# git - PhpStorm - 在 Git 下的两次提交之间更改的导出文件

> ID：15655173
> 
> 赞同：1
> 
> 时间：2013-03-27T09:12:19.613
> 
> 标签：git, phpstorm

**PhpStorm**中是否有机会在**Git**下的两次提交之间导出更改的文件？现在我正在使用**Git 控制台**命令并***立即***将更改的文件压缩到存档中。

```
tar -czvf %FILE_NAME%.tar $(git diff --diff-filter=[ACMRT] --name-only %COMMIT_HASH_0% %COMMIT_HASH_1%) 
```

PS我正在使用PhpStorm 6。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:00:39.887

PhpStorm 中没有这样的功能；最接近的可能是将每个提交保存为补丁（更改工具窗口，日志选项卡，右键单击提交，选择“创建补丁...”）

Git 命令行非常灵活，以至于任何工具供应商都无法为通过命令行可能进行的所有操作提供 GUI。

# image - 从目录加载所有图像

> ID：15655177
> 
> 赞同：6
> 
> 时间：2013-03-27T09:12:30.720
> 
> 标签：image, matlab, image-processing, matlab-cvst

我在目录中有某些图像，我想加载所有这些图像以进行一些处理。我尝试使用该`load`功能。

```
imagefiles = dir('F:\SIFT_Yantao\demo-data\*.jpg');      
nfiles = length(imagefiles);    % Number of files found
 for i=1:nfiles
 currentfilename=imagefiles(i).name;
 I2 = imread(currentfilename);
 [pathstr, name, ext] = fileparts(currentfilename);
 textfilename = [name '.mat'];
fulltxtfilename = [pathstr textfilename];
load(fulltxtfilename);
descr2 = des2;
frames2 = loc2;
do_match(I1, descr1, frames1, I2, descr2, frames2) ;
end 
```

我收到一个错误，因为无法读取 xyz.jpg 没有找到这样的文件或目录，其中 xyz 是我在该目录中的第一个图像。
我还想从目录中加载所有格式的图像，而不仅仅是 jpg……我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T11:18:58.033

您可以轻松加载多个相同类型的图像，如下所示：

```
function Seq = loadImages(imgPath, imgType)
    %imgPath = 'path/to/images/folder/';
    %imgType = '*.png'; % change based on image type
    images  = dir([imgPath imgType]);
    N = length(images);

    % check images
    if( ~exist(imgPath, 'dir') || N<1 )
        display('Directory not found or no matching images found.');
    end

    % preallocate cell
    Seq{N,1} = []

    for idx = 1:N
        Seq{d} = imread([imgPath images(idx).name]);
    end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T10:26:39.900

我相信你想要这个`imread`功能，而不是`load`. 请参阅[文档](http://www.mathworks.co.uk/help/matlab/ref/imread.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T10:27:20.487

完整路径（inc. 目录）不在 imgfiles.name 中，只是文件名，因此它无法找到该文件，因为您没有告诉它在哪里查找。如果您不想更改目录，请在读取文件时再次使用 fullfile。

您还使用了错误的功能来读取图像 - 尝试 imread。其他注意事项：[最好不要将 i 用于 variables](https://stackoverflow.com/questions/14790740)，并且您的循环在每一步都会覆盖 I2 ，因此您最终只会得到一张图像，而不是四张。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-14T14:51:57.487

您可以使用计算机视觉系统工具箱中的[imageSet](http://www.mathworks.com/help/vision/ref/imageset-class.html)对象。它从给定目录加载图像文件名，并使您能够按顺序读取图像。它还为您提供了递归到子目录的选项。

# c - 用 C 代码创建函数的快速方法

> ID：15655183
> 
> 赞同：-1
> 
> 时间：2013-03-27T09:12:47.993
> 
> 标签：c, function

我正在做一个项目，我有一个 C 程序，其中代码超过 3000 行，需要大量时间才能完成。我需要将其划分为函数以获得更快的结果。

有没有一种快速的方法或某种方法可以用来帮助我将函数制作成很长的 C 代码？还是我必须手动完成所有功能的代码？

例如这段代码和很多很多喜欢它。

```
addr_len = sizeof their_addr;
if ((numbytes = recvfrom(sockfd, ubuf, 6 , 0,(struct sockaddr *)&their_addr, &addr_len)) == -1) 
{
    perror("recvfrom");
    //exit(1);
}

inet_ntop(their_addr.ss_family,get_in_addr((struct sockaddr *)&their_addr),s, sizeof s);

//printf("listener: packet is %d bytes long\n", numbytes);

ubuf[numbytes] = '\0';
printf("listener: packet contains \"%s\"\n", ubuf); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:17:57.033

据我所知，没有自动化的方法可以实现这一点。您需要手动执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T09:22:56.543

3000 行代码不算多……但对于单个函数来说却是很多代码。虽然这可能不会对性能产生影响，但您应该拆分代码以提高可读性/维护性并避免重复代码。

如果您认为您的代码花费的时间太长，则无法查看需要花费的时间，但请注意，例如，在您发布的示例中，您使用可能是阻塞函数的 recvfrom （这没有错，但如果您需要等待对于传入的数据，您的程序显然将需要该数据到达所需的时间）。

# domain-driven-design - 有界上下文事件 - 存储消息合约的模块/项目

> ID：15655184
> 
> 赞同：3
> 
> 时间：2013-03-27T09:12:50.727
> 
> 标签：domain-driven-design

我们的每个有界上下文都有一个事件消息处理器，它从上下文总线中提取消息并通过内存总线（反应式扩展，或[https://github.com/flq/MemBus](https://github.com/flq/MemBus)）在本地分派它。

在 DDD 书籍中，我读过它谈到将消息放入项目中的模块中，例如`mycompany.accounts.infrastructure.messages`和`mycompany.ordering.infrastructure.messages`.

对我来说有多个上下文的问题，引用这些消息会导致循环引用。

如何最好地组织不同的有界上下文消息传递合约：

1.  每个有界上下文是否会有一个单独的项目，其中包含该上下文的所有可能消息，以便其他有界上下文可以引用？

2.  还是为将通过上下文总线的所有消息使用单独的共享库更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:36:40.810

我解决了为每个有界上下文构建（至少）两个程序集的类似问题：

1.  一个用于合同（事件、异常、共享标识符等......）
2.  一个用于执行实体。

这样，不同的有界上下文实现可以引用相同的合约，而无需任何 cicle。

**编辑**
至于命名约定，我通常在有界上下文的“约定名称”之后命名程序集，例如

1.  合约的 BankName.FinancialAdvisory
2.  BankName.FinancialAdvisory.POCO 用于实现
3.  BankName.FinancialAdvisory.ORMOrOtherTechnologicalCouplingName 当我需要专门化某个类以在特定的技术环境中使用它们时。

然而，在 POCO 程序集中，根命名空间与合约的命名空间相同（例如 BankName.FinanicalAdvisory）：这是因为 POCO 以代码形式表达业务规则，无需任何技术关注，具有相同的合约开发生命周期。相反，包含技术专业化的程序集使用与程序集名称相同的根命名空间（例如 BankName.FinancialAdvisory.ORMOrOtherTechnologicalCouplingName）。

尽管如此，与域相关的所有程序集都共享相同的命名空间结构：例如，如果命名空间“Funds”存在于 BankName.FinancialAdvisory 下，它也存在于 POCO 和 ORMOrOtherTechnologicalCouplingName 中（当然，如果它包含任何类）。

# python - 我正在使用 Python3，我想使用 RabbitMQ

> ID：15655189
> 
> 赞同：11
> 
> 时间：2013-03-27T09:13:06.363
> 
> 标签：python, python-3.x, rabbitmq

我正在使用 Python3，我想使用 RabbitMQ。我已经尝试过使用 Pika 和 txAMQP，但它们不支持 Python 3。有人知道如何使用 RabbitMQ。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-24T15:13:21.410

检查此页面[https://github.com/hollobon/pika-python3](https://github.com/hollobon/pika-python3) 可能对您有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T09:36:37.600

[https://pika.readthedocs.org/en/latest/faq.html](https://pika.readthedocs.org/en/latest/faq.html)

很遗憾，您将无法将 pika 用于 python 3.x 工作，因为它仅支持 2.x。有一个 github 存储库讨论了对 pika 3.x 支持的初步工作，但在 2 年前就关闭了。

好消息是你仍然可以使用 py-amqplib

[http://code.google.com/p/py-amqplib/](http://code.google.com/p/py-amqplib/)

坏消息是，除了为您指明正确的方向之外，我无法提供太多帮助。我只在使用 rabbitmq 时使用了 pika。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-02T07:20:29.850

如果您需要 librabbitmq 的性能或功能，而不是纯 Python 库，我写了[https://github.com/jbg/rabbit](https://github.com/jbg/rabbit)，虽然相当初级，但确实允许您在 Python 3 上使用 librabbitmq C 库。

18 个月后编辑：我将包重命名为 rabbitmq，因为它与现有的 PyPI 包冲突，现在它在 PyPI 上，所以你可以只`pip install rabbitmq`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-05T20:08:33.457

对于我的项目，我使用了 Celery，一个非常好的库，它与 python3 配合得很好！！！

这是信息的链接。 [https://pypi.python.org/pypi/celery/](https://pypi.python.org/pypi/celery/)

# algorithm - 插入链表伪代码

> ID：15655193
> 
> 赞同：0
> 
> 时间：2013-03-27T09:13:14.637
> 
> 标签：algorithm, insert, linked-list, pseudocode, doubly-linked-list

在 Introduction to Algorithm Ed 3 中，我阅读了用于在链表中插入元素的伪代码算法，但我不明白中间步骤。

```
x.prev = L.head
if L.head != NIL
    L.head.prev = x
L.head = x
x.prev = NIL 
```

如果我的原始链表是`HEAD -- 4 -- 24`，我了解步骤如下：

1.  头 -- 4 -- 24

2.  x -- 4 -- 24

3.  头 -- x -- 4 -- 24

与 2\. 对应

```
x.prev = L.head 
```

为什么我们必须在 head with 之前插入 x

```
 if L.head != NIL
        L.head.prev = x 
```

?

smbdy 可以澄清一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:46:58.930

可以说，最初 Head 指向节点 [Y]，这意味着 [Y] 是当前头。我们将插入新节点 [X]，它将成为我们列表的头节点，因此头指针将​​指向 [X]。

这里请记住，在开始时间（在向列表中插入任何内容之前）Head 将指向 NiL。

现在让我们一步一步地用伪代码来看看发生了什么：

我们列表的当前情况是：`Head -> [Y], [Y].prev -> NiL`，因为 head 指向 [Y]，所以在我们更改 Head 指针之前，每当我们使用 Head 时，您都可以将其视为/读取为 [Y]。现在当前头节点 [Y] 将在 [X] 之后，所以让我们设置 [X] = [Y] 的下一个

```
1\. x.next = L.head 
```

在第一个声明之后，我们有`[X].next->[Y], Head->[Y], [Y].prev->NiL`

```
2\. if (L.head != NIL) //At the beginning Head might be pointing to NiL, and of course NiL.prev does not exist and we do not want to access illegal location.
    3\. L.head.prev = x //if head is not pointing to Nil then it is pointing to [Y],
                       //in that case [X] will be the prev node of [Y], 
                    //so after this line, have Head->[Y], [X].next->[Y], [Y].prev->[X] 
```

在第 3 行之后，我们可以安全地将列表 Head 指针设置为点 [X]

```
4\. L.head = x    
5\. x.prev = NIL //You can write L.head.prev = NIL, as [X] is now the new head 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:19:57.850

提示是

> L:head:pre 表示 L:head 指向的对象的 pre 属性

然后，算法如下

```
 //HEAD -- 4 -- 24

    x.next = l.head
    if L.head != NIL
        L.head.prev = x

    //x -- 4 -- 24

    L.head = x
    x.prev = NIL

   //HEAD -- x -- 4 --24 
```

# javascript - 哪个地方最好将我的 JavaScript 放入 ROR

> ID：15655196
> 
> 赞同：0
> 
> 时间：2013-03-27T09:13:16.677
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, assets, actionview

我的应用程序结构如下所示

```
myapp
  app/assets/javascripts/admin/admin.js
  app/controllers/admin/admin_controller.rb
  app/views/admin/new.html.haml
  app/views/admin/new.js.haml 
```

我正在使用一些 ajax 函数来呈现我的表单中的特定内容。`new.js.haml`调用js格式时触发的指定动作。我的`admin.js`文件中还有其他一些脚本，这些脚本在此 ajax 调用之后不包括在内。当我将脚本复制并粘贴到 new.js.haml 中时，一切正常。但我不想在我的应用程序中有多余的脚本。如何重新考虑这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:20:28.597

您是正确的，因为复制代码不是一个好主意。至于您将 javascript 文件放在哪里的问题，这并不重要（尽管通常，由于您的问题范围之外的原因，它们位于`app/assets/javascripts`）。

重要的是您调用的 javascript 函数`new.js.haml`实际上已经定义，这意味着必须加载 javascript 文件。这可以通过在布局中包含 javascript 文件来完成，如下所示：

```
<%= javascript_include_tag "admin/admin" %> 
```

在主 javascript 文件中定义函数：

```
// admin.js

var testFunc = function() {
  console.log('this is a test!')
}; 
```

然后在 new.js 文件中调用该函数：

```
// new.js

testFunc(); 
```

无需重新定义您的函数或变量。

# php - 使用 CSS 隐藏表格行

> ID：15655202
> 
> 赞同：5
> 
> 时间：2013-03-27T09:13:30.970
> 
> 标签：php, html, css

是否可以使用 CSS 隐藏表格行，我有一个需要这个概念的项目。这是我的代码：

**样式.css：**

```
#hide-row { display:none; } 
```

**文件.php**

```
<table>
  <tr>
      <th>Name</th>
      <th>Address</th>
  </tr>
  <div id="hide-row">
     <?php foreach( $cops as $row ) { ?>
        <tr>
            <td><?php echo $row->name; ?></td>
            <td><?php echo $row->address; ?></td>
        </tr>
     <?php } ?>
  </div>
</table> 
```

但是，它没有用，记录仍然出现。有人帮助如何解决这种情况吗？任何帮助将不胜感激。谢谢你的高级！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T09:15:45.237

使用类而不是 id：

```
.hide-row { display:none; } 
```

在您的 html/php 文件中：

```
<table>
  <tr>
      <th>Name</th>
      <th>Address</th>
  </tr>
     <?php foreach( $cops as $row ) { ?>
        <tr class="hide-row">
            <td><?php echo $row->name; ?></td>
            <td><?php echo $row->address; ?></td>
        </tr>
     <?php } ?>
</table> 
```

如果您必须对行进行分组，您可以使用`tbody`标签而不是`div`标签。

[我们可以在同一个 <table> 中有多个 <tbody> 吗？](https://stackoverflow.com/questions/3076708/can-we-have-multiple-tbody-in-same-table)

```
 .hide-row tr { display:none; } 
```

在您的 html/php 文件中：

```
<table>
  <tr>
      <th>Name</th>
      <th>Address</th>
  </tr>
    <tbody class="hide-row">
     <?php foreach( $cops as $row ) { ?>
        <tr>
            <td><?php echo $row->name; ?></td>
            <td><?php echo $row->address; ?></td>
        </tr>
     <?php } ?>
     </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T09:20:35.260

您不能将 div 作为 <table> 元素的直接子级。要隐藏单行，请参阅 jantimon 的答案。如果要对多行进行分组，请使用 <tbody>：

css

```
.hide-row { display:none; } 
```

php

```
<table>
    <tr>
        <th>Name</th>
        <th>Address</th>
    </tr>
    <tbody class="hide-row">
        <?php foreach( $cops as $row ) { ?>
            <tr>
                <td><?php echo $row->name; ?></td>
                <td><?php echo $row->address; ?></td>
            </tr>
        <?php } ?>
    </tbody>
</table> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T09:16:50.610

您不能直接在标签`div`内嵌套 a 。`table`你必须给你的行一个类，然后隐藏它。就像是：

```
.hidden {
    display: none;
}

<?php foreach( $cops as $row ) { ?>
    <tr class="hidden">
        <td><?php echo $row->name; ?></td>
        <td><?php echo $row->address; ?></td>
    </tr>
 <?php } ?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T09:16:57.347

你不能有`<div>`外面`<tr>`..给课程`<tr>`并隐藏它..不需要`<div>`在它周围创建一个

**html**

```
<tr class="hide-row">
        <td><?php echo $row->name; ?></td>
        <td><?php echo $row->address; ?></td>
    </tr> 
```

**样式.css**

```
.hide-row { display:none; } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-27T09:17:21.340

我会给你想要隐藏的每一行一个`hide-row`类：

```
<tr class="hide-row"> 
```

您的 CSS 将如下所示：

```
tr.hide-row { display: none; } 
```

这意味着您不需要嵌套的 div。

# c# - “排序”树数据结构

> ID：15655204
> 
> 赞同：0
> 
> 时间：2013-03-27T09:13:42.480
> 
> 标签：c#, data-structures, tree

我做了一个树数据结构，我希望元素像这样排序：

```
 10
     /  \
    5    12
   / \   / \
  3   7 11  18 
```

如果添加元素的值小于另一个元素的值，则应向左链接，如果更大，则向右链接。我的问题是，我就是无法正确地使用排序方法。

```
class Tree
{
    private class TElement
    {
        public int _value;
        public TElement _left;
        public TElement _right;

        public TElement(int value)
        {
            _value = value;
        }
    }

    private TElement RootElement;

    public void Add(int value)
    {
        TElement newElement = new TElement(value);
        TElement current = new TElement(value);
        current = RootElement;
        if (RootElement == null)
        {
            RootElement = newElement;
            return;
        }

        SortNewElement(RootElement, RootElement, newElement, RootElement);
    }

    private void SortNewElement(TElement left, TElement right, TElement newElement, TElement RootElement)
    {
        if (newElement._value < RootElement._value && RootElement._left == null)
        {
            left._left = newElement;
            return;
        }

        if (newElement._value > RootElement._value && RootElement._right == null)
        {
            right._right = newElement;
            return;
        }

        if (newElement._value < left._value && left._left == null)
        {
            left._left = newElement;
            return;
        }

        if (newElement._value > right._value && right._right == null)
        {
            right._right = newElement;
            return;
        }

        SortNewElement(left._left, right._right, newElement, RootElement);
    }      
} 
```

我知道它不起作用，因为它试图获取空元素的链接节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:37:34.267

根据我从您的问题中可以理解的内容，您只是想在二叉搜索树中插入一个新节点。它的中序遍历将是一个排序数组。

您可以通过以下简单的伪代码来做到这一点

```
 insert_new( Node* node, value)
    {

    if(value > node->value)
    {
       if(node->right != null)
       {
         insert_new(node->right,value);
       }
       else
       {
         node->right = new Node(value);
         return;
       } 
   }
   else
   {
      if(node->left != null)
      {
       insert_new(node->left,value)
      }
      else
      {
       node->left = new Node(value);
       return;          
      } 
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:26:39.093

```
class element{
public:
int value;
   *element left;
   *element right;

   element(int value)
      value = value;

public add(&element a)
   if (a != null)
      {
      if (left!=null){
            left = a;
      }
      else{
         if (left.value > a.value){
             right = left;
             left= a;
         }
         else{
             right=a;
         }

   } 
```

# python - 用python网格化

> ID：15655207
> 
> 赞同：0
> 
> 时间：2013-03-27T09:13:47.437
> 
> 标签：python, grid, matplotlib, plot

我正在尝试在 python 中绘制这样的图片。

![在此处输入图像描述](../Images/8f4fdd0723c9a6e63d8b739e17d7e561.png)

我有三个用于绘图的参数。X：

```
[ 0.03570416  0.05201517  0.05418171  0.01868341  0.07116423  0.07547471] 
```

是：

```
 [-0.32079484 -0.53330218 -1.02866859 -0.94808545 -0.51682506 -0.26788337] 
```

z:

```
[-0.32079484 -0.53330218 -1.02866859 -0.94808545 -0.51682506 -0.26788337] 
```

所以x是x轴，y是y轴。然而 z 是像素的强度。我想出了这段代码：

```
z = np.array(reals)
x = np.array(ra)
y = np.array(dec)
nrows, ncols = 10, 10 
grid = z.reshape((nrows, ncols))
plt.imshow(grid, extent=(x.min(), x.max(), y.max(), y.min()), interpolation='nearest', cmap=cm.gist_rainbow)
plt.title('This is a phase function')
plt.xlabel('ra')
plt.ylabel('dec')
plt.show() 
```

但是我收到此错误：

```
grid = z.reshape((nrows, ncols))
ValueError: total size of new array must be unchanged 
```

ra、dec 和 reals 是大小相同的普通数组。我之前计算过它们，然后我用它们创建了 numpy 数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:28:54.830

您显示的数据与制作图像不一致，但您可以制作**散点图**。

(x,y) 坐标对处 z 值的两种基本类型的绘图是：

1.  散点图，其中为每个 (x,y) 对指定一个 z 值。
2.  图像（imshow、pcolor、pcolormesh、contour），其中指定了具有 m 个规则间隔值的 x 轴和具有 n 个规则间隔值的 y 轴，然后是大小为 (m,n) 的 z 值数组给出。

您的数据看起来更像前一种类型，所以我建议使用散点图。

这是散点图的样子（顺便说一句，你的 y 和 z 值是相同的，如果这可能是一个错误）：

```
import numpy as np
import matplotlib.pyplot as plt

x = np.array([ 0.03570416, 0.05201517, 0.05418171, 0.01868341, 0.07116423, 0.07547471])
y = np.array([-0.32079484, -0.53330218, -1.02866859, -0.94808545, -0.51682506, -0.26788337])
z = np.array([-0.32079484, -0.53330218, -1.02866859, -0.94808545, -0.51682506, -0.26788337])

plt.scatter(x, y, c=z, s =250)        

plt.show() 
```

![在此处输入图像描述](../Images/f9a4fd399908eda247134bf7ec4e80c8.png)

# c# - 如何从实体模型更新实体的数据库修改？

> ID：15655208
> 
> 赞同：0
> 
> 时间：2013-03-27T09:13:48.683
> 
> 标签：c#, entity-framework, c#-4.0

我设计了`entity model`从`Sql server database`. 后来，我更新了`Identity column`数据库中特定表中的内容，然后我完成了`Update Model from`数据库。不幸的是，它没有在我的`Entity Model`. 我应该怎么做才能解决？

非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:48:11.470

在 Designer 或 Xml 视图中手动编辑 EDMX，以您的偏好为准。

# xcode - Xcode/OSX 中的 OpenCL - 无法在内核循环中分配零

> ID：15655209
> 
> 赞同：0
> 
> 时间：2013-03-27T09:13:50.027
> 
> 标签：xcode, opencl, grand-central-dispatch

[在本教程](https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/OpenCL_MacProgGuide/Introduction/Introduction.html)的指导下，我正在使用 Xcode 4.5.1 和 Grand Central Dispatch 在 OpenCL 中开发一个加速组件。

完整的内核在 GPU 上不断失败，发出信号 SIGABRT。除此之外，我无法在解释错误方面取得太大进展。

但是我打破了内核的各个方面进行测试，我发现了一些非常特殊的事情，涉及将某些值分配给循环内数组中的位置。

测试场景：给每个线程一个固定范围的数组索引来初始化。

```
kernel void zero(size_t num_buckets, size_t positions_per_bucket, global int* array) {

    size_t bucket_index = get_global_id(0);
    if (bucket_index >= num_buckets) return;

    for (size_t i = 0; i < positions_per_bucket; i++)
        array[bucket_index * positions_per_bucket + i] = 0;
} 
```

上述内核失败。但是，当我分配 1 而不是 0 时，内核成功（并且我的主机代码打印出 1 的数组）。基于对各种整数值的少量测试，我只遇到了 0 和 -1 的问题。

我试图用 1-1、(int) 0 等来超越编译器，但没有成功。不过，将零作为内核参数传入是可行的。

赋值为零确实在 for 循环的上下文之外起作用：

```
 array[bucket_index * positions_per_bucket] = 0; 
```

上述发现在两台不同配置的机器上得到证实。（OSX 10.7 + GeForce，OSX 10.8 + Radeon。）此外，内核在 CL_DEVICE_TYPE_CPU 上运行时没有问题——它只是在 GPU 上。

显然，发生了一些荒谬的事情，而且一定是在我的尽头，因为“零”不能被打破。希望这很简单。谢谢您的帮助。

主机代码：

```
#include <stdio.h>
#include <OpenCL/OpenCL.h>
#include "zero.cl.h"

int main(int argc, const char* argv[]) {

    dispatch_queue_t queue = gcl_create_dispatch_queue(CL_DEVICE_TYPE_GPU, NULL);

    size_t num_buckets = 64;
    size_t positions_per_bucket = 4;

    cl_int* h_array = malloc(sizeof(cl_int) * num_buckets * positions_per_bucket);
    cl_int* d_array = gcl_malloc(sizeof(cl_int) * num_buckets * positions_per_bucket, NULL, CL_MEM_WRITE_ONLY);

    dispatch_sync(queue, ^{

        cl_ndrange range = { 1, { 0 }, { num_buckets }, { 0 } };
        zero_kernel(&range, num_buckets, positions_per_bucket, d_array);
        gcl_memcpy(h_array, d_array, sizeof(cl_int) * num_buckets * positions_per_bucket);

    });

    for (size_t i = 0; i < num_buckets * positions_per_bucket; i++)
        printf("%d ", h_array[i]);
    printf("\n");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:09:47.403

请参阅 OpenCL 标准，第 6 节，第 8 段“限制”，要点 k（强调我的）：

> 6.8 千。不能使用内置标量类型 bool、half、**size_t**、ptrdiff_t、intptr_t 和 uintptr_t 来声明程序中内核函数的参数。[...]

您的编译器甚至允许您构建内核这一事实表明它有些损坏。

* * *

所以你可能想修复它......但如果它不能修复它，那么它看起来像一个编译器错误，简单明了（CLC，即 OpenCL 编译器，而不是你的主机代码）。没有理由这个内核应该使用除 0、-1 以外的任何常量。您是否尝试过更新您的 OpenCL 驱动程序，尝试在不同的操作系统上怎么样（尽管我认为此代码仅适用于 OS X）？

# c# - 如何合并两个内存流？

> ID：15655210
> 
> 赞同：14
> 
> 时间：2013-03-27T09:13:56.090
> 
> 标签：c#, .net, memorystream

我有两个 MemoryStream 实例。

如何将它们合并为一个实例？

好吧，现在我不能从一个 MemoryStream 复制到另一个。这是一个方法：

```
public static Stream ZipFiles(IEnumerable<FileToZip> filesToZip) {
ZipStorer storer = null;
        MemoryStream result = null;
        try {
            MemoryStream memory = new MemoryStream(1024);
            storer = ZipStorer.Create(memory, GetDateTimeInRuFormat());
            foreach (var currentFilePath in filesToZip) {
                string fileName = Path.GetFileName(currentFilePath.FullPath);
                storer.AddFile(ZipStorer.Compression.Deflate, currentFilePath.FullPath, fileName,
                               GetDateTimeInRuFormat());
            }
            result = new MemoryStream((int) storer.ZipFileStream.Length);
            storer.ZipFileStream.CopyTo(result); //Does not work! 
                                               //result's length will be zero
        }
        catch (Exception) {
        }
        finally {
            if (storer != null)
                storer.Close();
        }
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-27T11:11:48.930

使用[CopyTo](http://msdn.microsoft.com/en-us/library/dd782932.aspx)或[CopyToAsync](http://msdn.microsoft.com/en-us/library/dd782932.aspx)非常容易：

```
var streamOne = new MemoryStream();
FillThisStreamUp(streamOne);
var streamTwo = new MemoryStream();
DoSomethingToThisStreamLol(streamTwo);
streamTwo.CopyTo(streamOne); // streamOne holds the contents of both 
```

框架, 人. *框架*。_

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-12T21:04:14.217

根据上面@Will 分享的答案，这里是完整的代码：

```
void Main()
{
    var s1 = GetStreamFromString("Hello");
    var s2 = GetStreamFromString(" World");

    var s3 = s1.Append(s2);
    Console.WriteLine(Encoding.UTF8.GetString((s3 as MemoryStream).ToArray()));
}

public static Stream GetStreamFromString(string text)
{
        MemoryStream stream = new MemoryStream();
        StreamWriter writer = new StreamWriter(stream);
        writer.Write(text);
        writer.Flush();
        stream.Position = 0;

        return stream;
}

public static class Extensions
{ 
    public static Stream Append(this Stream destination, Stream source)
    {
        destination.Position = destination.Length;
        source.CopyTo(destination);

        return destination;
    }
} 
```

并将流集合与`async`：

```
async Task Main()
{
    var list = new List<Task<Stream>> { GetStreamFromStringAsync("Hello"), GetStreamFromStringAsync(" World") };

    Stream stream = await list
            .Select(async item => await item)
            .Aggregate((current, next) => Task.FromResult(current.Result.Append(next.Result)));

    Console.WriteLine(Encoding.UTF8.GetString((stream as MemoryStream).ToArray()));
}

public static Task<Stream> GetStreamFromStringAsync(string text)
{
    MemoryStream stream = new MemoryStream();
    StreamWriter writer = new StreamWriter(stream);
    writer.Write(text);
    writer.Flush();
    stream.Position = 0;

    return Task.FromResult(stream as Stream);
}

public static class Extensions
{
    public static Stream Append(this Stream destination, Stream source)
    {
        destination.Position = destination.Length;
        source.CopyTo(destination);

        return destination;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T09:54:19.150

*   创建第三个（让它成为`mergedStream`）`MemoryStream`长度等于第一个和第二个长度之和

*   `MemoryStream`先写到`mergedStream`（用于[`GetBuffer()`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.getbuffer.aspx)获取`byte[]`）`MemoryStream`

*   写第二个`MemoryStream`（`mergedStream`使用[`GetBuffer()`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.getbuffer.aspx)）

*   记住写作时的偏移量。

它相当***append***，但完全不清楚 MemoryStreams 上的合并操作是什么

# asp.net - 生成带有矢量图形的 PDF

> ID：15655213
> 
> 赞同：1
> 
> 时间：2013-03-27T09:14:08.450
> 
> 标签：asp.net, pdf, vector-graphics

我有一个想法，我需要能够动态创建一个应该包含许多矢量图形图像的 PDF 文件。我还需要能够在 PDF 中“绝对”定位矢量图像。我然后以后需要能够下载生成的PDF文件..这可能吗？..以前有人做过类似的事情吗？..据我所知，使用非矢量化来做这件事有很好的支持-images（jpg，png等）..但是可以使用eps文件和其他矢量图像吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-16T11:56:27.980

您可以使用`pdflatex`生成pdf。

(pdf)Latex 对导入 svg 和 eps 有很好的支持。

当您使用 Inkscape 时，您可以选择导出到 tex/latex，它会为您生成代码。

# php - 抓取奇怪安全网页的内容

> ID：15655219
> 
> 赞同：1
> 
> 时间：2013-03-27T09:14:30.960
> 
> 标签：php

我正在尝试从网页中读取成绩单。为了为我们的团队创建一些统计数据，我想将结果自动保存在我自己的数据库中。例如[http://fvbw.sm-u.de/index.php?seite=game&game=568](http://fvbw.sm-u.de/index.php?seite=game&game=568)

我试图通过 PHP 中的几个选项（curl、file、file_get_contents 等）获取页面的内容，但我总是想出一个奇怪的行为。`<div id="inhalt"></div>`在浏览器中查看时，实际分数会显示在容器中。但是当我通过 PHP 获取页面时，容器总是空的。

我的第一个想法是内容是通过 JS 重新加载的。但我找不到任何 JS 调用！Firebug 也没有跟踪此类活动。也没有使用 CSS 属性内容或其他任何东西。

有人可以告诉我那里发生了什么吗？以及我如何能够通过 PHP 获取该页面的内容？

**更新（2013-03-27 12:05）：**

这是我的代码，它使用与 Firefox 的请求相同的标头。这将返回相同的不完整结果。

```
$curl = curl_init();
$header[] = "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
$header[] = "Accept-Language: de-de,de;q=0.8,en-us;q=0.5,en;q=0.3";
$header[] = "Accept-Encoding: deflate";
$header[] = "Referer: http://fvbw.sm-u.de/index.php?seite=table&table=15";
$header[] = "Connection: keep-alive";
$header[] = "Cache-Control: max-age=0";
$header[] = "Host: fvbw.sm-u.de";

curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0");
curl_setopt($curl, CURLOPT_HTTPHEADER, $header);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);

$data = curl_exe($curl); 
```

还有一件奇怪的事情正在发生。使用 HttpRequester（Firefox 插件）时，我只需输入 url 并执行请求，它就会得到正确的结果。原始请求如下所示

```
GET http://fvbw.sm-u.de/index.php?seite=game&game=571 
```

没有标题，什么都没有。如果我使用 curl 执行此操作，我仍然会得到不完整的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T23:34:58.047

不确定这个问题是否是最新的。我可以使用以下方法正常获取内容：

```
echo file_get_contents('http://fvbw.sm-u.de/index.php?seite=game&game=568'); 
```

# javascript - onsubmit return validateForm 没有触发

> ID：15655222
> 
> 赞同：1
> 
> 时间：2013-03-27T09:14:35.107
> 
> 标签：javascript, html, forms, validation, scope

这真的让我陷入了困境。`onsubmit="return validateForm()"`当我的`validateForm`函数位于全局变量中时，我通过调用我的 javascript 成功地验证了这个表单。不幸的是，一旦我开始尝试调试 IE8，我就因为拥有一个全局变量而不断收到错误消息，我决定将其改为一个全局函数......

现在我似乎根本无法触发它。-_-

（是的——我实际上已经在测试中添加了前缀，以确保它不会因为是全球性的而发生冲突。）

据我所知，我正在做一个基本形式的缩影。这种方法是 w3schools 上显示的方法，它适用于他们，所以......什么给了？

我的表格：

```
<form name="emailus" id="emailus" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" onsubmit="return validateForm()">
    <a href="mailto:example@email.com">
        <h3><i class="icon-envelope-alt icon-large"></i>Send us an email<span>: example@email.com</span></h3>
    </a>

    <div class="half">
        <fieldset class="name">
            <label for="cf_name">Name <span>*</span></label>
            <input type="text" id="cf_name" name="cf_name" class="textualformfield" placeholder="Jane Doe" pattern="^[a-zA-Z'\s]+$">
        </fieldset>
        <fieldset class="emailaddress">
            <label for="cf_email">E-mail <span>*</span></label>
            <input type="text" id="cf_email" name="cf_email" class="textualformfield" placeholder="janedoe@email.com" pattern="[a-z0-9!#$%\x26'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%\x26'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[A-Z]{2}|com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum)\b">
        </fieldset>
        <fieldset class="phonenumber">
            <label for="cf_phonenumber">Phone</label>
            <input type="tel" id="cf_phonenumber" name="cf_phonenumber" class="textualformfield" placeholder="555-555-5555">
        </fieldset>
        <fieldset class="eventdate">
            <label for="cf_eventdate">Event Date</label>
            <input type="text" id="cf_eventdate" name="cf_eventdate" class="textualformfield" placeholder="May 25th, 2012">
        </fieldset>
        <fieldset class="location">
            <label for="cf_location">Location</label>
            <input type="text" id="cf_location" name="cf_location" class="textualformfield" placeholder="The Church">
        </fieldset>
    </div>

    <div class="half">
        <textarea name="cf_message" class="textualformfield" placeholder="Your Message"></textarea>
    </div>

    <input type="submit" name="submit" id="submit" value="Submit">
</form> 
```

我的 javascript 函数，位于外部，`(document).ready`以便*可以*调用它：

```
function validateForm() {
    window.alert("I'm activating!");
    var valid = true;

    jQuery('p.validationhelpers').remove();

    if (document.emailus.cf_email.value === '') {
        jQuery('.emailaddress').append("<p class='validationhelpers'>Please enter an email address.</p>");
        jQuery('.emailaddress>input').focus();
        valid = false;
    }

    if (document.emailus.cf_name.value === '') {
        jQuery('.name').append("<p class='validationhelpers'>Please enter your name.</p>");
        jQuery('.name>input').focus();
        valid = false;
    }

    return valid;
} 
```

相反，它只是提交......我觉得这是一个愚蠢的问题。我尝试用 , 替换' `onsubmit`s 内容（确实返回了错误并阻止提交）、和。`return validateForm();``return false; return validateForm()``return validateForm(); return false();``validateForm()``validateForm();`

>_<

**解决方案：** bjornarvh 通过调试实际站点找到了真正的原因。我在这里突出显示它，因为真正的答案在标记为已解决的答案**的评论中。**

原来我在 javascript 中缺少我的一个函数的右括号，这导致函数`validateForm`被包裹在. 意外范围问题！`(document).ready``onsubmit`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:24:35.787

JavaScript 是区分大小写的，所以你需要添加

```
onsubmit="return ValidateForm()" 
```

代替

```
onsubmit="return validateForm()" 
```

# python - “从包导入*”和“导入包”之间的性能

> ID：15655224
> 
> 赞同：8
> 
> 时间：2013-03-27T09:14:46.507
> 
> 标签：python, performance, python-import

`from package import *`和之间有任何性能差异`import package`吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-27T09:17:34.557

不，差异不是性能问题。在这两种情况下，都必须解析整个模块，并且将执行任何模块级代码。唯一的区别在于命名空间：首先，导入模块中的所有名称都将成为当前模块中的名称；第二种，在当前模块中只定义包名。

也就是说，很少有充分的理由使用`from foo import *`. 导入模块，或从中导入特定名称。

# android - 对相似项目进行分组

> ID：15655229
> 
> 赞同：0
> 
> 时间：2013-03-27T09:14:58.437
> 
> 标签：android

我从 webservice 得到解析的响应，如下所示

```
<Table>
    <Restaurant_ID>2153</Restaurant_ID>
    <restaurant_name>Bhagini Palace</restaurant_name>
    <address>210, 1st Main, 'A' Cross, ESI Hospital Road, 2nd Stage, Domlur, Bangalore</address>
    <costoftwo>Approx Rs. 400 for two (without alcohol)</costoftwo>
    <rating>2.6</rating>
    <timings>11:30 AM to 4 PM, 6:30 PM to 11 PM</timings>
    <Phone>08040799999,+919731323333</Phone>
    <Location_ID>53</Location_ID>
    <Location_name>Domlur</Location_name>
    <city_ID>1</city_ID>
    <city_name>Bangalore</city_name>
    <Cuisine_ID>8</Cuisine_ID>
    <Cuisine_name>North Indian</Cuisine_name>
  </Table>
  <Table>
    <Restaurant_ID>2153</Restaurant_ID>
    <restaurant_name>Bhagini Palace</restaurant_name>
    <address>210, 1st Main, 'A' Cross, ESI Hospital Road, 2nd Stage, Domlur, Bangalore</address>
    <costoftwo>Approx Rs. 400 for two (without alcohol)</costoftwo>
    <rating>2.6</rating>
    <timings>11:30 AM to 4 PM, 6:30 PM to 11 PM</timings>
    <Phone>08040799999,+919731323333</Phone>
    <Location_ID>53</Location_ID>
    <Location_name>Domlur</Location_name>
    <city_ID>1</city_ID>
    <city_name>Bangalore</city_name>
    <Cuisine_ID>13</Cuisine_ID>
    <Cuisine_name>Chinese</Cuisine_name>
  </Table>
  <Table>
    <Restaurant_ID>2153</Restaurant_ID>
    <restaurant_name>Bhagini Palace</restaurant_name>
    <address>210, 1st Main, 'A' Cross, ESI Hospital Road, 2nd Stage, Domlur, Bangalore</address>
    <costoftwo>Approx Rs. 400 for two (without alcohol)</costoftwo>
    <rating>2.6</rating>
    <timings>11:30 AM to 4 PM, 6:30 PM to 11 PM</timings>
    <Phone>08040799999,+919731323333</Phone>
    <Location_ID>53</Location_ID>
    <Location_name>Domlur</Location_name>
    <city_ID>1</city_ID>
    <city_name>Bangalore</city_name>
    <Cuisine_ID>26</Cuisine_ID>
    <Cuisine_name>Andhra</Cuisine_name>
  </Table> 
```

我使用 customadapter 在列表视图中显示餐厅名称和美食

```
holder.txtvalue.setText(mlist.get(position)
                        .getRestaurant_name()
                        + "\n"
                        + mlist.get(position).getCuisine_name()); 
```

但是当餐厅 ID 相同时，我想对美食名称进行分组并需要在列表视图中显示。

我尝试过这样的事情

```
cuisines = mlist.get(position).getCuisine_name();

                Integer id = mlist.get(position).getRestaurant_ID();
                Log.d("restaurant_id", ""+id);
                for (int i = 1; i < 10; i++) {

                    if (id.equals(mlist.get(position+i).getRestaurant_ID())) {

                        if(id.equals(mlist.get(position+(i+1)).getRestaurant_ID())){

                            cuisines = cuisines +","+ mlist.get(position+i).getCuisine_name()
                                    +","+ mlist.get(position+(i+1)).getCuisine_name();  
                        }else

                        cuisines = cuisines +","+ mlist.get(position+i).getCuisine_name();
                        Log.d("cuisiene_id", ""+cuisines);
                    }
                }
                holder.txtvalue.setText(mlist.get(position)
                        .getRestaurant_name() + "\n" + cuisines); 
```

但我会在团体和个人中获得美食名称。

我怎样才能避免显示个人的？

谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:17:08.870

使用可展开的列表视图。根据餐厅 ID 填充组视图，子视图可以是餐厅中的每个项目。看看那里可用[的教程](http://www.mysamplecode.com/2012/10/android-expandablelistview-example.html)来做到这一点。

![可展开的列表视图](../Images/fc43a434dc6e982d42a281294c246eee.png)

# javascript - 如何在 SVG 中找到最接近的元素？

> ID：15655236
> 
> 赞同：4
> 
> 时间：2013-03-27T09:15:43.270
> 
> 标签：javascript, svg, geometry

我试图在 SVG 绘图上的所有元素中找到最接近给定元素的欧几里得距离。

目前，我对如何测量距离并不挑剔——无论是在边界框、质心或其他任何东西之间。

除了计算每对元素之间的距离然后排序之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:10:29.980

你不需要计算每对元素之间的距离，也不需要排序。您只需要遍历所有元素并跟踪最小距离/元素对：

```
function closest( elements, toElement ){
  var closestDistance=Infinity, closestElement;
  for (var i=elements.length;i--;){
    var fromElement = elements[i];
    if (fromElement==toElement) continue;
    var distance = distanceBetween(toElement,fromElement);
    if (distance<closestDistance){
      closestElement  = fromElement;
      closestDistance = distance;
    }
  }
  return closestElement;
} 
```

如果您经常这样做**，并且**您已经测试了上面的简单解决方案以证明它太慢，那么请查看[空间分区](http://en.wikipedia.org/wiki/Nearest_neighbor_search#Methods)或其他方法来散列您的位置以便更快地查找。

# sql-server-2000 - SQL Server 2000 DTS 指针无效

> ID：15655238
> 
> 赞同：0
> 
> 时间：2013-03-27T09:15:45.723
> 
> 标签：sql-server-2000, dts

各位早安

每次在我的 DTS 步骤上执行查询时，我都会遇到这个烦人的错误。当查询在查询分析器上成功执行时，它返回“无效指针”。

我试过了：

```
SET NOCOUNT ON
SET ANSI_WARNINGS OFF 
```

==> 没有成功。更多使用 SET ANSI_WARNINGS OFF 我得到一个新错误..

请问有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:27:48.100

显然，问题出在另一个查询中，而 SET NOCOUNT ON 确实使它最终起作用。

# c# - Shockwave 对象 For Windows Ce

> ID：15655241
> 
> 赞同：1
> 
> 时间：2013-03-27T09:16:12.337
> 
> 标签：c#, flash, adobe, compact-framework, windows-ce

我可以在 C# windows 应用程序中使用 Shockwave Flash 对象如何在 Windows embebde Ce 6.0 CF 2.0 中使用 Shockwave 对象，或者在 Windows ce 中是否有另一种动画方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:52:25.090

至于 Windows CE 6 上的 Flash——我相信对 CE 6.0 R3 的 Flash Lite 形式的支持非常有限（我不知道你是否还能掌握它），在此之前什么都没有。

# android - 获取我的应用程序的实际发布版本代码的方法

> ID：15655243
> 
> 赞同：0
> 
> 时间：2013-03-27T09:16:13.960
> 
> 标签：android

有没有办法以编程方式获取在商店上发布的我的应用程序的实际发布版本代码？

从我的开发者控制台中，我可以手动获取版本代码，但我想使用例如 URL 来获取这个数字。

实际上，我的替换方法是创建一个 Apache/PHP URL，直接返回我手动输入的版本代码：

```
<?php /* File getVersionCode.php */

$versionCode = 24;
return "Version code of production is ".$versionCode; 

?> 
```

当我调用我的 URL mysite/getVersionCode.php 时，我会自动得到以下返回：

```
Version code of production is 24 
```

有没有办法以不同的方式获取它，例如通过访问谷歌 URL？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:20:35.073

您可以通过编程方式在应用程序中获取版本代码。

```
PackageInfo pInfo = getPackageManager().getPackageInfo(getPackageName(), 0);
version = pInfo.versionName; 
```

# javascript - 如何找到 JS 代码在浏览器中运行？

> ID：15655249
> 
> 赞同：0
> 
> 时间：2013-03-27T09:16:48.507
> 
> 标签：javascript, jquery, twitter-bootstrap, browser

我正在使用引导模式，我不知道我将单击按钮后触发模式的js代码放在哪里。

```
jQuery('#signin').modal('show'); 
```

我检查了每个文件......甚至检查了浏览器中源代码中的每个 JS 文件。

当我单击按钮打开模式时，如何在浏览器中找到触发事件的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:19:20.877

使用浏览器的开发者工具，允许您执行 Javascript 调试。您最好的选择很可能是 Firebug。如果您在 JS 文件中的一行设置调试点，firebug 将允许您检查堆栈以查看哪一行调用了该函数。

**指示**

1.  在 Firebug 中，单击脚本选项卡。
2.  使用下拉菜单选择您的 .js 文件。
3.  当JS文件显示时找到目标行并单击它的左侧，设置一个调试点。
4.  加载您的页面，脚本应该在您的调试点停止。
5.  单击右侧的堆栈选项卡并检查。

![在此处输入图像描述](../Images/a8ffed710d83a5f9412c8d287327e0c8.png)

**在 Firebug 中搜索脚本**

如果您单击脚本选项卡，您可以在 firebug 的右上角输入一段已知的脚本，这应该会将您带到它在代码中的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:33:08.083

我同意 Kevin 的观点，另一种选择是使用以下内容打印堆栈跟踪：http: [//www.codeovertones.com/2011/08/how-to-print-stack-trace-anywhere-in.html](http://www.codeovertones.com/2011/08/how-to-print-stack-trace-anywhere-in.html)

# jquery - 没有点击的jQuery触发点击事件

> ID：15655251
> 
> 赞同：7
> 
> 时间：2013-03-27T09:16:54.023
> 
> 标签：jquery, events, chaining

嗯，就是这样。

```
$('.js-custom-dropdown').find('.custom-dropdown-unfolded').toggle();
$('.custom-dropdown-btn, .custom-dropdown-btn-unfolded').keydown(function(event){
    if (event.keyCode === 13) {
        openDropdown($(this));
    }
}).click( function(){
    openDropdown($(this));
});

function openDropdown (element){
    element.parents('.js-custom-dropdown').find('.custom-dropdown-unfolded').toggle();
    console.log($(this))
} 
```

当我单击下拉按钮时，`openDropdown`函数会执行一次，但是当我使用 Tab 键到达按钮并按 Enter 时，函数会被调用两次。猜猜这与链接有关，但我承认我是新手，并不完全理解 jQuery 设计模式。我当然可以在处理程序中调用该函数两次，`keydown`这样可以解决问题，但是..你知道:)

您能否解释一下代码有什么问题以及导致这种行为的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:23:17.020

这归结为 html 5 用户交互规范。如果您查看[带有 tabIndex 的元素的 HTML 规范，](http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#sequential-focus-navigation-and-the-tabindex-attribute)您会发现他们提到对于任何带有选项卡索引的元素，输入键都会导致单击事件。

我怀疑这是导致这种行为的原因。您可以在较旧的（不符合 html 5 的）浏览器上试一试，以测试是否是这种情况。

编辑（根据海报的要求）：[@Terry 给出的答案](https://stackoverflow.com/a/15655361/20992)提供了一种解决您遇到的问题的方法。在事件上使用 jquery 的“preventDefault”将在您按 Enter 时阻止它被击中两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:23:40.490

您可以使用: 触发 keydown 上的点击事件`$(this).trigger('click');`，并防止在 keydown 时执行默认操作：

```
$('.custom-dropdown-btn, .custom-dropdown-btn-unfolded').keydown(function (e) {
    if (e.keyCode === 13) {
        $(this).trigger('click');
        e.preventDefault();
    }
}).click(function () {
    openDropdown($(this));
}); 
```

这是一个概念验证小提琴：http: [//jsfiddle.net/yTuR3/](http://jsfiddle.net/yTuR3/)

# android - 在 Android 中获取媒体播放器的内部详细信息

> ID：15655257
> 
> 赞同：0
> 
> 时间：2013-03-27T09:17:15.167
> 
> 标签：android, android-mediaplayer

我想分析和调试一个`video`文件是如何在android中播放的。我搜索了很多，但我只知道`MediaPlayer`类如何与内部**媒体播放器**引擎交互，我无法了解内部**媒体播放器**引擎在 android 中的工作方式。任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:04:12.577

`MediaPlayer`( ) 是从应用程序角度来看`MediaPlayer.java`的主要抽象。它通过接口 ( )`MediaPlayer`与其本机`MediaPlayer`实现 ( ) 交互。`Mediaplayer.cpp``JNI``android_media_Mediaplayer.cpp`

`player`要创建的类型由`MediaPlayerService`through中的参数决定[`MediaPlayerFactory`](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libmediaplayerservice/MediaPlayerFactory.cpp#108)。通常`StagefrightPlayer`或被`NuPlayer`创建。

如果`StagefrightPlayer`被创建，则实际`player`由`AwesomePlayer`.

`AwesomePlayer`暴露*类似于* `API`主要`MediaPlayer`实现，因此，您可以在两者之间找到几乎**1:1**的映射，除了`MediaPlayer::start`由`AwesomePlayer::play`.

`AwesomePlayer`将创建`MediaExtractor`which 在内部将创建特定轨道的抽象`MediaTrack`作为个人的源`tracks`。

`AwesomePlayer`在内部创建`audio`和`video`跟踪特定对象，例如`AudioPlayer`和`OMXCodec`。

我在这里回答了您的另一个问题：[Android Media Player 中的事件是什么意思？](https://stackoverflow.com/questions/15664963/what-is-meant-by-event-in-android-media-player/15672816#15672816)它概述了处理轨道的`AV Synchronization`功能和功能。`AwesomePlayer``video`

我希望这些信息对你的学习是足够的。

# mysql - 在更新期间交换mysql同一列中的值

> ID：15655263
> 
> 赞同：0
> 
> 时间：2013-03-27T09:17:25.130
> 
> 标签：mysql, sql-update

我的桌子长这样

```
 RangeId    CellId  Some Coulmns more 
       101        1
       101        2 
```

我会得到一个列表，`[101,2],[101,1]`现在我必须交换上表中的 cellId 值。如何为此编写更新查询。我浏览[了 MySQL 中的交换列值，](https://stackoverflow.com/questions/37649/swapping-column-values-in-mysql)但这在两个列之间交换。任何建议..

**编辑**：我正在交换我的应用程序中的单元格，我将获得两个单元格 ID。我有两个只是将 2 与 1 和 1 与 2 交换，行中的其余值保持不变

**EDIT2**：该表没有任何 Id 列，也没有主键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:43:49.177

使用当前所述的表格，您无法真正按照您的意愿行事，因为没有唯一的方法来识别行。我建议你退后一步，看看你正在尝试做的事情，因为感觉要么a：没有经过深思熟虑，要么b：你没有提供足够的信息来真正解决这个问题

如果 b:，请提供有关此表及其链接的表的更多信息，以及您要实现的确切目标（是的，我知道您想交换 2 个数值，但是不知道有关表的更多信息/可以用来选择它很难准确地给出建议）

**下面的注释**是为 OP 的原始编辑编写的

这不是一个好方法，但它可能会得到你想要的，它依赖于 ID 作为 PKID

[http://sqlfiddle.com/#!2/0c48c/2](http://sqlfiddle.com/#!2/0c48c/2)

# c# - 在 wpf 中将列动态添加到 DataGrid

> ID：15655271
> 
> 赞同：4
> 
> 时间：2013-03-27T09:17:57.013
> 
> 标签：c#, wpf, wpfdatagrid, drawingvisual

我目前正在使用自定义画布，并且我必须添加一个表格，所以我认为 dataGrid 会很好。所以我想从**“Datagrid”创建一个“****表格”**，用户可以在运行时将表格添加到画布。

 **到目前为止，我已经尝试使用列表填充 DataGrid 并成功。

如何在运行时将列添加到 Datagrid，以便在运行时使用文本框从用户那里获取列数和标题值，并根据文本框的值，数据网格应添加列和标题值。

实际上我想开发一个表格，其中用户传递列数和列标题，并且应该生成表格。

或者

**“你能建议我一种我应该看的方式，以便使用 DrawingVisual 类“绘制”一个表格吗？**

它是 GraphicsTable 类的一部分

```
//Custom Classes "DrawingCanvas & GraphicsTable" 
public void CreateDataGrid(GraphicsTable graphicsTable, DrawingCanvas drawingCanvas)
{
    dt = new DataGrid();
    dt.Name = "Data";
    dt.ItemsSource = person();
    dt.AllowDrop = true;
    dt.AutoGenerateColumns = true;
    dt.Height = graphicsTable.Rectangle.Height;
    dt.Width = graphicsTable.Rectangle.Width;
    drawingCanvas.Children.Add(dt);
    Canvas.SetTop(dt, graphicsTable.Rectangle.Top);
    Canvas.SetLeft(dt, graphicsTable.Rectangle.Left);
    dt.Width = dt.Width;
    dt.Height = dt.Height;
    dt.Focus();
}
//I have just tried to add dome dummy data to the datagrid.

public List<Person> person()
{
    List<Person> peep = new List<Person>();
    peep.Add(new Person() {});
    return peep;
}

public class Person
{
    private string name;
    private double salary;
    public string Names
    {
        get { return name; }
        set { name = value; }
    }
    public double Salary
    {
        get { return salary; }
        set { salary = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:51:11.523

您可以按如下方式动态构建 DataGrid 的列。

```
public void buildTable(string[] headers)
{
    myGrid.Columns.Clear();
    foreach (string header in headers)
    {
        DataGridTextColumn c = new DataGridTextColumn();
        c.Header = header;
        myGrid.Columns.Add(c);
    }
} 
```

但是，如果您正在设置 ItemsSource，则行数和列数将自动调整以匹配 ItemsSource 的值。例如，以下代码生成一个 3 行 3 列的 DataGrid。

```
dt = new DataTable();

for (int i = 0; i < 3; i++)
    dt.Columns.Add("col" + i.ToString());

for (int i = 0; i < 3; i++)
{
    DataRow r = items.NewRow();
    r[0] = "a" + i.ToString();
    r[1] = "b" + i.ToString();
    r[2] = "c" + i.ToString();
    dt.Rows.Add(r);
}

myGrid.ItemsSource = dt; 
```

```
+-----+------+------+  
| col0 | col1 | col2 |  
+-----+------+------+  
| a0 | 0 | c0 |  
+-----+------+------+  
| a1 | b1 | c1 |  
+-----+------+------+  
| a2 | b2 | c2 |   
+-----+------+------+

```

在不知道您的确切要求的情况下，除非您有一些特殊需要的自定义图形，否则我不会在代码中手动绘制表格，即使在这种情况下，我也会考虑使用 XAML 重新设置 DataGrid 或其元素的样式，然后再尝试自己呈现它。这只是我的意见。祝你好运！

**编辑：**

如果要根据用户输入生成表列，只需将列生成代码放入事件处理程序中。在您的示例中，您可以为 Textbox TextChanged 事件添加事件处理程序，如下所示。每次文本框中的文本更改时，都会运行此事件处理程序。您可能希望添加验证以防止用户键入大量数字。

```
private void numColsTextbox_TextChanged(object sender, TextChangedEventArgs e)
{
    int numCols;
    if (Int32.TryParse(tb.Text, out numCols))
    {
        myGrid.Columns.Clear();
        for (int i = 1; i <= numCols; i++)
        {
            DataGridTextColumn c = new DataGridTextColumn();
            c.Header = "Column " + i.ToString();
            myGrid.Columns.Add(c);
        }
    }
} 
```**

# android - Horizo ntalScrollView 获取可见的孩子

> ID：15655274
> 
> 赞同：5
> 
> 时间：2013-03-27T09:18:30.670
> 
> 标签：android, android-layout

我在水平滚动视图中添加了线性布局，并在布局中添加了一些文本视图。是否有可能在此布局中获得可见的孩子。

此代码获取所有孩子，但我只想让孩子可见（当前显示）：

```
final HorizontalScrollView scroll = (HorizontalScrollView)findViewById(R.id.horizontalScrollView1);
    LinearLayout linearLayout = ((LinearLayout)scroll.findViewById(R.id.linearLayout1));
    int chilrenNum = linearLayout.getChildCount(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:48:04.957

好吧，经过一番搜索后，我找到了这个监听滚动事件的答案。[在 Android 中实现滚动事件监听器](https://stackoverflow.com/questions/3948934/synchronise-scrollview-scroll-positions-android)。这个想法是在您的活动中覆盖`onScrollChanged`并`ScrollView`跟踪滚动视图的可见部分。

这样做，您可以通过如下所示的代码轻松获取可见视图：

```
int currentPosition = lastXPosition; // lastXPosition gets updated from scroll event
int layoutWidth = linearLayout.getWidth();
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int childWidth = layoutWidth/linearLayout.getChildCount();
int firstVisibleXPos = currentPosition - width/2; // currentPosition will be in the middle of the screen
int lastVisibleXPos = currentPosition + width/2;

int indexOfFirstVisible = firstVisibleXPos/childWidth;
int indexOfLastVisible  = lastVisibleXPos/ childWidth; 
```

以上所有代码都假定子视图大小是固定的。如果您使用可变子大小，则需要先获取它们的宽度并跟踪它，然后根据父视图中的索引和位置计算可见性。

# jquery - 将ajax完成传输到父函数

> ID：15655275
> 
> 赞同：0
> 
> 时间：2013-03-27T09:18:42.113
> 
> 标签：jquery, ajax

我想弄清楚：我有一个进行ajax调用的函数。我知道我可以在 ajax 完成后执行 onComplete、success.. 代码，但我正在寻找的是如果我可以返回一些东西，以便之后的代码等待它完成。

例子：

```
function loadPage(url){
    $.get(url,function(data){
        $("article").html(data);
    })
} 
```

问题是我怎么能做这样的事情，也许是通过返回一些东西：

```
function loadPage(url){
    $.get(url,function(data){
        $("article").html(data);
    })
    return XXXX;
} 
```

这样我就可以在每次函数 loadPage 完成 ajax 时做一些不同的事情，就像这样，或者以与此类似的方式：

```
loadPage(url).done(otherFunction()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:22:01.773

试试这个：

```
function loadPage(url){
    return $.get(url,function(data){
        $("article").html(data);
    })
} 
```

jQuery.get() 函数返回具有 done() 函数的 jQuery XHR 对象。请参阅此处的文档[jQuery.get()](http://api.jquery.com/jQuery.get/)。所以只要返回 get 函数的结果就可以了。

# android - tabhost groupactivity 不起作用（已弃用）

> ID：15655282
> 
> 赞同：0
> 
> 时间：2013-03-27T09:18:57.767
> 
> 标签：android, android-tabhost

```
public class Feedback extends ActivityGroup {
protected static LocalActivityManager mLocalActivityManager;

private EditText fd=null;
private Button send=null;
public int res_flag=0;
public String result="";
public String url="";
private RelativeLayout newaccount;
private TextView needhelp=null;
private String currentDateandTime="";
private boolean isonline;

protected String fd_text="";

public void replaceContentView(String id, Intent newIntent) {
    View view = getLocalActivityManager().startActivity(id,newIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)) .getDecorView(); this.setContentView(view);
    }   

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.feedback);
    initialization();

    try{
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
        currentDateandTime = sdf.format(new Date());
    }catch (Exception e) {
        System.out.println(e);
    }

    send.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
        new Feedback.Retrieve().execute();  

    }

    });

}

private void initialization()
{
    fd=(EditText)findViewById(R.id.fd);
    send=(Button)findViewById(R.id.send);

}

class Retrieve extends AsyncTask<Void, Integer, Integer> {

    ProgressDialog pd = null;

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        pd = new ProgressDialog(Feedback.this);
        pd.setMessage("Please wait while sending feedback..");
        pd.setCancelable(false);
        pd.show();

    }

    @Override
    protected Integer doInBackground(Void... params) {

        try{    
            System.out.println("IN BKGRND");

            StrictMode.ThreadPolicy policy1 = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy1);

            url="url"+fd_text.toString().trim()+"&datetime="+currentDateandTime;
            url=url.replace(" ","%20");
            url=url.replace("+","%2B");

            System.out.println(url);

         JSONObject json = JSONfunctions.getJSONfromURL(url);
          JSONObject response1=json.getJSONObject("response");
          result=response1.getString("Success").toString().trim();
          System.out.println(result);
         if(result.equalsIgnoreCase("1"))
         {
             System.out.println("Logged In");

             res_flag=1;

         }
         else
         {
             System.out.println("failed");
             res_flag=5;
         }
            }
                catch (JSONException e) {
                    System.out.println(e);
                }catch (Exception e) {
                    System.out.println(e);
                }       
        return null;

    }

    @Override
    protected void onPostExecute(Integer result) {
        super.onPostExecute(result);
        pd.dismiss(); 
```

}

***错误是：*** android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@40e16110 无效；您的活动正在运行吗？

**问题**

我通过另一个标签主机调用活动。它只加载视图。网络服务和按钮不起作用。，当我单击按钮时，它显示上面的错误。帮我继续。

**参考：** [http ://www.gamma-point.com/content/android-how-have-multiple-activities-under-single-tab-tabactivity](http://www.gamma-point.com/content/android-how-have-multiple-activities-under-single-tab-tabactivity)

现在 ActivityGroup 已被弃用..，我现在应该使用什么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:29:14.590

对于您发布的内容，您似乎根本不需要使用`ActivityGroup`。只需扩展您`Feedback`的`Activity`课程。例如：

```
public class Feedback extends Activity 
```

# c - 包装来自静态库错误的函数调用

> ID：15655285
> 
> 赞同：0
> 
> 时间：2013-03-27T09:19:14.327
> 
> 标签：c, function, linker, overriding

我有一个包含目标文件的静态库，我想包装一个在一个目标文件中调用并在另一个目标文件中定义的函数，我正在尝试使用使用选项[覆盖 C 中的函数调用中](https://stackoverflow.com/questions/617554/override-a-function-call-in-c)`gcc --wrap`建议的方法。

假设我想覆盖一个函数`getnamei()`，我创建了一个 wrap.C 文件并定义`__wrap__getnamei()`，然后编译它以获得一个目标文件，然后使用`--wrap`选项我可以覆盖该函数，但是当我尝试使用 in 调用真正的函数`__real__getnamei()`时wrap.C，我得到“错误：'__real__getnamei() 未在此范围内声明'”。

我在 Windows 7 上运行，使用 MinGW

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:03:26.103

我想通了，在 wrap.C 中我们需要添加一个函数声明`extern "C" __real__getnamei()`，然后一切正常！！

# wpf - WPF 应用程序在 InitializeComponent 调用中显示托管已退出，代码为 -1073740771 (0xc000041d)

> ID：15655289
> 
> 赞同：2
> 
> 时间：2013-03-27T09:19:27.360
> 
> 标签：wpf, interop, .net-assembly

当我启动我的 WPF 应用程序并转到`InitializeComponent`一个用户控件的函数调用时，它会静默退出，并且只在输出窗口中留下一条消息，说 Managed (v4.0.30319)' has exited with code `-1073740771`( `0xc000041d`)。当我说“静默”时，我的意思是即使我用-块包装这个`InitializeComponent`调用也没有捕获到异常（这就是我通常发现问题所在的方式）`try``catch`

这是我所做的：在这个应用程序项目中，我们需要使用参考 Microsoft.Office.Interop.Owc.dll，版本号为 10.0.4504.0。由于它是一个互操作库，所以当我在 VS2012 中添加此引用时，它会自动将该属性设置`Embedded Interop Types`为 true，我认为这意味着它不会在输出文件夹中保留单个 dll，而是将此库嵌入到主输出中（至少这就是我们在其他参考资料中的表现，例如 Microsoft.Office.Interop.Outlook.dll）。然而，当我启动这个项目时，它抛出了一个`XamlParseException`说法：

> “无法加载文件或程序集 'Microsoft.Office.Interop.Owc, Version=10.0.4504.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。系统找不到指定的文件。”：“Microsoft.Office .Interop.Owc，版本=10.0.4504.0，文化=中性，PublicKeyToken=31bf3856ad364e35""

好像没有嵌入引用（或者版本不正确。但我验证了引用版本确实是10.0.4504.0）

接下来我将这个 dll 直接复制到输出文件夹`bin\Debug\`，以确保它可以找到这个库。这次没有抛出异常，但整个应用程序就像我在开始时描述的那样默默地退出。我试图用谷歌搜索代码`-1073740771`（`0xc000041d`），但没有关于它的文章。我试图将其设置`Embedded Interop Types`为真/假，但问题是一样的。

更新：

我想在这里添加更多描述。如上所述，有问题的库是 OWC（Office Web Component）10。我按照此链接使 OWC 与 VB.NET 桌面应用程序一起工作：[如何：在 Visual Studio .NET 中处理 Office Web 组件的事件](http://support.microsoft.com/kb/328275/EN-US)。但是这篇官方文章太老了，所以我不得不做很多修改来编译包装器 dll（主要是因为命名空间不匹配）。然后，当我添加对实际互操作库 Microsoft.Office.Interop.Owc 的引用时，如果我遵循默认设置并让 Embedded Interop Types 为 True，在运行时它会抱怨（抛出`XamlParseException`) 无法加载程序集（参见上面的描述）。我勒个去？我认为将其设为“嵌入式”可以保证找到该库。然后我将此 dll 复制到输出文件夹，然后我有这个静默退出问题。但可能值得一提的是，这次输出窗口显示`Microsoft.Office.Interop.Owc.dll`确实已加载。实际上它是消息之前的最后一条`managed has exited`消息。所以它必须仍然与这个库有关。

所有这一切都只发生在 OWC10 上。实际上，在 OWC11 中也有类似的方法（最新的，但不幸的是，它仍然是 Office2003 附带的旧版本）：[如何：在 Visual Studio .NET 中处理 Office 2003 Web 组件的事件](http://support.microsoft.com/kb/823982)。但它确实有效，并且控件显示在我的应用程序上。由于其他一些原因，我想尝试 OWC10 而不是 OWC11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-28T19:03:20.513

> 当我启动我的 WPF 应用程序并转到一个用户 > 控件的 InitializeComponent 函数调用时，它会静默退出，并且只在输出窗口中留下一条消息，说 Managed (v4.0.30319)' has exited with code -1073740771 (0xc000041d)。当我说“静默”时，我的意思是>即使我用 try-catch 块包装这个 InitializeComponent 调用，也没有捕获到异常（这就是>我通常如何找到问题所在）
> 
> 接下来我将这个 dll 直接复制到输出文件夹 bin\Debug\，以确保它可以找到这个 >library。这次没有抛出异常，但整个应用程序只是默默地退出，正如我在开始时所描述的那样。我试图用谷歌搜索代码-1073740771（0xc000041d），但没有>关于它的文章。我尝试将 Embedded Interop Types 设置为 true/false，但问题是 > 相同。

我今天发生了完全相同的事情，“以代码 -1073740771 (0xc000041d) 退出。” （这发生在我的 VB 和 C# .NET WinForms 应用程序中）。我尝试调试，发现我什至从未进入 Form_Load 代码块。

我最终通过以管理员身份运行visual studio“解决”了这个问题（然后通过菜单打开并构建和运行项目）。这是一个 win8 安全问题，在任何地方都没有得到很好的解释。（我分心了，直接从我的任务栏/解决方案文件中打开了一个特定的项目，导致这种情况发生在我身上）。

您现在可能已经自己发现了这一点，希望您没有为此失去任何头发:) 只是为其他可能在某处发生此错误的人指出这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T20:59:47.537

也有这个问题，在 x64 平台上使用代码 -1073740771 (0xc000041d) 的“静默”退出，在 x86 平台上一切正常。

我的应用程序的一部分是非托管 C++，另一部分是 C#。事实证明，我的 C++ 代码还没有完全准备好用于 x64 平台。以下更改解决了我的问题：

```
// before
g_OrigWndProc = reinterpret_cast<WNDPROC>(::SetWindowLongPtr(hWnd, GWLP_WNDPROC,
                reinterpret_cast<LONG>(WindowProc)));

// fixed version
g_OrigWndProc = reinterpret_cast<WNDPROC>(::SetWindowLongPtr(hWnd, GWLP_WNDPROC,
                reinterpret_cast<LONG_PTR>(WindowProc))); 
```

因此，一般建议是验证您的代码是否已完全准备好用于 x64 平台。

# java - Nexus（Sonartype）是否可以像我们使用 SVN 和 Java EE 项目来处理版本控制一样与 maven 项目一起使用？

> ID：15655291
> 
> 赞同：-4
> 
> 时间：2013-03-27T09:19:51.253
> 
> 标签：java, svn, jakarta-ee, nexus

Nexus（Sonartype）是否可以像我们使用 SVN 和 Java EE 项目来处理版本控制一样与 Maven 项目一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:31:38.677

不，Nexus 是一个 Maven 存储库管理器，它的主要用途是存储重要的人工制品 - 例如版本控制或“快照” - 由您的构建过程发出。它不能用作版本控制系统的替代品。

我建议您查看[Sonatype 在 Nexus 上的网站](http://www.sonatype.org/nexus/why)了解更多详细信息。

# python - 将文档的颜色模式从索引更改为 rgb

> ID：15655292
> 
> 赞同：1
> 
> 时间：2013-03-27T09:19:53.423
> 
> 标签：python, automation, photoshop-cs4

我尝试使用 Photoshop 自动化将图像从 gif 转换为 png。

为了能够保存为 png，我必须先将图像转换为 RGB。

应该使用

```
doc.changeMode( ChangeMode.RGB ) 
```

这会得到错误“无效的参数...缺少必需的参数”

> com_error: (-2147352567, 'Ausnahmefehler aufgetreten.', (0, u'Adobe Photoshop', u'Ung\xfcltiges Argument - Argument 1\n- Erforderlicher Wert fehlt', None, 0,

我尝试对 RGB 使用硬编码值“2”但得到相同的结果

> doc.changeMode(2)

如何转换为 RGB？

这是完整的脚本：

```
import win32com.client
import xlrd 
import sys, os
import pdb
import os.path

psApp = win32com.client.Dispatch("Photoshop.Application")  

# the source File
sourceFile =  "D:\Projekte\myfile.gif"

psApp.Open(   sourceFile ) 
doc = psApp.Application.ActiveDocument

doc.changeMode( 2 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:46:19.580

[文档](http://cssdk.host.adobe.com/sdk/1.0/docs/WebHelp/references/csawlib/com/adobe/photoshop/ChangeMode.html)和错误表明您缺少参数。尽管它看起来像是`HostObject`一个可选参数，但我认为您不能将其省略。

```
ChangeMode(ho:HostObject = null, enum:Number) 
```

所以也许你应该尝试：

```
doc.changeMode(None, 2) 
```

（我没有 Photoshop，所以我无法尝试）。

# php - php中的符号链接

> ID：15655295
> 
> 赞同：0
> 
> 时间：2013-03-27T09:20:09.510
> 
> 标签：php

我正在尝试在 php 中创建符号链接，在 linux

如果我使用 ln -s targetfile linkfile 手动创建链接，它工作得很好

如果我尝试

```
<?php

symlink($targetfilefullpath, $linkfilefullpath) ; 
?> 
```

没有任何反应，没有链接

如果我尝试

```
<? php
shell_exec("ln -s ".$targetfilefullpath." ".$linkfilefullpath);
?> 
```

也没有任何反应，没有链接

所有目标文件和文件夹都有 chmod 777

有什么问题？

# javascript - Javascript - Error 对象的名称和消息属性在哪里？

> ID：15655297
> 
> 赞同：8
> 
> 时间：2013-03-27T09:20:20.040
> 
> 标签：javascript, jquery, error-handling

试图理解为什么使用“for ... in”方法找不到Javascript Error对象的两个跨浏览器属性，即“name”和“message”

```
// error code
...
}catch( err ){

  // in FF this lists 3 properties for fileName, lineNumber and columnNumber...
  // but NOT name or message!
  for(var propertyName in err) {
    $( '#diags' ).append( 'err property: ' + propertyName + ', 
       value: ' + err[ propertyName ] + '<br>' );
  }
  // this line prints fine:
  $( '#diags' ).append( 'Error - name:' + err.name + ', message: ' + err.message + '<br>' );
} 
```

**编辑**

有人问我什么是名称和消息。这些是所有错误在任何浏览器中都有的属性（它们是吗？）...所以在上面的代码中，我添加了一行额外的代码，显示这些“属性”或它们打印的任何东西都很好

**编辑2**

按照 Mati 的有用回答，我做了一些搜索。这似乎回答了“检查”问题：[是否可以获得对象的不可枚举的继承属性名称？](https://stackoverflow.com/questions/8024149/is-it-possible-to-get-the-non-enumerable-inherited-property-names-of-an-object)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T17:59:01.177

[for...in 循环](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)不会迭代不可枚举的属性。

```
var e = new Error('a');

console.log(e.propertyIsEnumerable('name'));
console.log(e.propertyIsEnumerable('message'));
console.log(e.propertyIsEnumerable('fileName'));
console.log(e.propertyIsEnumerable('lineNumber'));
console.log(e.propertyIsEnumerable('columnNumber'));

for(var prop in e)
{
    console.log(prop + ': ' + e[prop]);
} 
```

输出

```
false
false
true
true
true
fileName: index.html
lineNumber: 25
columnNumber: 0 
```

# actionscript-3 - AS3“导入包”不工作 - 在迷人的拖放游戏

> ID：15655300
> 
> 赞同：2
> 
> 时间：2013-03-27T09:20:22.580
> 
> 标签：actionscript-3, flash-cs5.5, adobe-captivate

我正在尝试将 AS3“拖放”游戏放到 captivate 6 中的幻灯片上。独立的 swf 工作正常，但是一旦将其导入到 captivate 中的幻灯片上并发布它，captivate 就会重新包装其所有内容进入另一个 swf 从而丢失了导入的游戏包。

在 Flash 的主时间线上，我有动作

```
import com.test.games.*;

var dragArray:Array = [comment1, comment2, comment3, comment4, comment5, comment6, comment7, comment8 ];
var matchArray:Array = [leftMatch, leftMatch, rightMatch, rightMatch, rightMatch, leftMatch, rightMatch, leftMatch ];
var posArray:Array = [ {x:154, y:362}, {x:154, y:316}, {x:641, y:362}, {x:641, y:316}, {x:641, y:270}, {x:154, y:270}, {x:641, y:224}, {x:154, y:224} ];

var dragGame:DragGame = new DragGame(stage, dragArray, matchArray, posArray);

dragGame.addEventListener(DragGame.MATCH_MADE, onMatch);
dragGame.addEventListener(DragGame.NO_MATCH, onFlub);
dragGame.addEventListener(DragGame.ALL_DONE, onDone);

function onMatch(event:Event):void {
    var matchSound:Sound = new MatchSound();
    matchSound.play();
}
function onFlub(event:Event):void {
    var flubSound:Sound = new FlubSound();
    flubSound.play();
}
function onDone(event:Event):void {
    var applause:Sound = new Applause();
    applause.play();
} 
```

但我认为导致问题的原因是 4 个包文件来自

```
import com.test.games.*; 
```

重新包装在 captivate 的 swf 中时会丢失，如果这有意义吗？

我是否需要以root或其他东西为目标才能工作，或者是否有一种方法可以将所有文件的包与主时间线一起嵌套。

（该游戏是我发现的免费赠品 - 所以我对 AS3 作为一种语言不是很有信心，请温柔）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:12:48.590

我希望这是因为`stage`当您将其导入 Captivate 时该值可能为空。用这个覆盖：

```
var dragGame:DragGame; // uninitialized!
if (stage) init() else addEventListener(Event.ADDED_TO_STAGE,init);
function init(e:Event=null):void {
    removeEventListener(Event.ADDED_TO_STAGE,init);
    // here we have stage available, let's make a game
    dragGame = new DragGame(stage, dragArray, matchArray, posArray); 
    dragGame.addEventListener(DragGame.MATCH_MADE, onMatch);
    dragGame.addEventListener(DragGame.NO_MATCH, onFlub);
    dragGame.addEventListener(DragGame.ALL_DONE, onDone);
} 
```

# php - 使用 javascript 或一些外部网络编码语言运行 apt-get

> ID：15655301
> 
> 赞同：1
> 
> 时间：2013-03-27T09:20:23.867
> 
> 标签：php, javascript, html, get, apt

当点击链接时，有什么方法可以让 JavaScript`apt-get install gimp`在用户的计算机上运行，​​以便用户知道正在安装软件。

我试过用谷歌搜索它。

如果没有办法做到这一点，请说一天后，我将其标记为答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:32:57.077

在 ubuntu 上有链接快捷方式：

`<a href="apt://gimp" title="apt://gimp" rel="nofollow">gimp</a>`

但它不会自动安装，它只是启动包管理器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-14T04:48:42.967

Few answers above mention that if it exists, then it will be unsafe. But the fact is that there is an **existing** solution already for ubuntu and **its safe too**.

The mechanism is called apturl. see here:

[https://help.ubuntu.com/community/AptURL](https://help.ubuntu.com/community/AptURL)

[https://wiki.ubuntu.com/AptUrl](https://wiki.ubuntu.com/AptUrl)

It is supported by firefox, konqueror atleast. It needs "apturl" package to be installed(which is installed by default ). When user click on apt-url link as shown in answer above by @atrepp , then the defult package launcher will start to install with asking for appropriate authorization(password), as if you would have clicked in "Ubuntu Software Center". Its completely safe as much as you would have installed via "Ubuntu Software Center" or "apt-get" directly.

And i am confident that no such solution exists for RHEL or SuSE.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T09:28:43.637

如果这是可能的，那将是一个巨大的安全问题！想象一下类似的链接，但运行类似`rm -rf ~`... 据我所知，浏览器中的 JavaScript 不支持创建子进程。

另一方面，Java 能够创建子进程（作为您的 apt-get），因此您可以为此使用（签名的）Java 小程序；在这种情况下，将提示用户授权小程序运行，以使他意识到潜在的安全风险。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T09:29:16.533

如果你能做到这一点，我将永远不会使用互联网，因为它会充满垃圾邮件。

javascript 和所有客户端脚本的权限都非常有限，因此不可能编写 shell 命令

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T09:34:51.837

嗯，不，不能直接从 JavaScript 在客户端计算机上运行 shell 命令。当然有 JavaScript shell 函数，但它们仅限于它们可以做的事情。但是在任何情况下，Web 上的客户端代码都没有权限访问根级别的命令，例如 apt-get install。

您可能会编写一个 python/ruby/perl 脚本来执行此操作。让用户下载并手动执行。

除此之外，我很抱歉，伙计，这根本不可能（至少从我多年来在网上阅读的内容来看）。

# php - Image Magick 用法

> ID：15655309
> 
> 赞同：-1
> 
> 时间：2013-03-27T09:20:57.443
> 
> 标签：php, imagemagick

当我尝试使用 Image Magick 函数处理图像文件时出现此错误。

```
Image Magick Error

Fatal error: Class 'Imagick' not found in F:\xampp\htdocs\xampp\image_magic\create_image.php on line 2

Program

<?php
$im = new Imagick();
$im->newPseudoImage(100, 100, "magick:rose");
$im->setImageFormat("png");
$im->roundCorners(5,3);
$type=$im->getFormat();
header("Content-type: $type");
//$im->adaptiveBlurImage(5,3); // Adaptively blur an image //
$im->adaptiveResizeImage(1024,768); // Adaptively resize image //
echo $im->getimageblob();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:42:53.060

正如评论中已经提到的，这几乎可以肯定是因为没有安装 ImageMagick。它是一个 PECL 扩展，因此默认情况下不安装。[PHP 文档](http://www.php.net/manual/en/imagick.installation.php)与安装步骤一起涵盖了这一点。

# java - Java初学者：找不到符号

> ID：15655310
> 
> 赞同：5
> 
> 时间：2013-03-27T09:20:57.963
> 
> 标签：java

我一直在搜索 Java 教科书好几个小时，试图确定我做错了什么。我回来的错误是第 13 行的“找不到符号”，这是代码行：

```
 System.out.println("The three initials are " + 
     getInitials(Harry, Joseph, Hacker)); 
```

指令在代码中注释。我很确定这与我设置的名称有关。但我不确定。

```
public class InitialsTest {
     /**
       Gets the initials of this name
      @params first, middle, and last names
      @return a string consisting of the first character of the first, middle,
  and last name
      */

    public static void main(String[] args) {
         System.out.println("The three initials are " + 
         getInitials(Harry, Joseph, Hacker));
    }

    public static String getInitials(String one, String two, String three) {
        String initials = one.substring(0,1) + two.substring(0,1) + three.substring(0,1);
        return initials;
    }

 } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-27T09:21:56.997

```
System.out.println("The three initials are " 
    + getInitials("Harry", "Joseph", "Hacker")); //Enclosed within double quotes 
```

这就是你传递`String`文字的方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T09:23:36.317

```
System.out.println("The three initials are " + 
     getInitials("Harry", "Joseph", "Hacker")); 
```

只需使用双引号。如果您将它们声明为代码中的变量，则不需要双引号，

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T09:27:59.353

你应该这样传递它：

```
System.out.println("The three initials are " 
    + getInitials("Harry", "Joseph", "Hacker")); 
```

`Harry, Joseph, Hacker`没有双引号 ( " " ) 是变量，你会得到错误，因为你没有用这些名称声明任何变量。

注意：Java 中的所有字符串都**必须**用**双引号**引起来。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T09:22:34.097

您有 3 个字符串值传递给`getInitials()`，字符串文字必须用 in 括起来`"`

```
System.out.println("The three initials are " + 
          getInitials("Harry", "Joseph", "Hacker")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-24T06:43:47.793

字符串必须始终位于 " 和 " 内。所以你的代码是

```
System.out.println("The three initials are " + 
 getInitials("Harry", "Joseph", "Hacker")); 
```

此外，您还可以使用

```
String initials = one.charAt(0)+two.charAt(0)+three.charAt(0); 
```

在您的 getInitials() 函数中，而不是

```
String initials = one.substring(0,1) + two.substring(0,1) + three.substring(0,1); 
```

只是说。两者都为您提供字符串中第 0 个索引位置的字符，但 charAt 作为字符而不是字符串返回。

# php - 使用 REST API 处理 URL？

> ID：15655313
> 
> 赞同：-1
> 
> 时间：2013-03-27T09:21:14.413
> 
> 标签：php, api, url

我知道在创建 php 网站时，我可以使用类似：index.php?id=2 并且 index.php 可以使用：$_GET['id'] 获取 id。我想为我的一个 websies 创建一个 api，我看到了不同的例子。

推特：

```
https://api.twitter.com/1.1/statuses/mentions_timeline.json?count=2&since_id=14927799 
```

所以，我在我的 FTP 服务器上创建了一个文件夹“1.1”和一个文件夹“statuses”，其中包含可以理解 $_GET['count'] 等的文件提及时间线.json？

其他 API 如下所示：

```
https://quote.fm/api/recommendation/delete 
```

我可以删除推荐：

```
https://quote.fm/api/recommendation/delete/?id=1 or
https://quote.fm/api/recommendation/delete/1 
```

通常对于网站，我可以创建这样的 url 结构以使其使用 mod_rewrite 工作。据我了解，我为不同的部分创建了不同的网址：

```
https://xyz.com/api/user/get/1
https://xyz.com/api/user/delete/1 
```

所以我创建了一个文件夹用户，子文件夹删除并进入 FTP 服务器，每个都有一个 index.php 文件？我的脚本如何知道 /1 是 id=1？

有人理解我吗？我很难理解我的脚本如何将 url 结构转换为来自应用程序的必要数据。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:29:01.300

我将在这里从[我的路由器实现的自述文件中](https://github.com/deceze/Kunststube-Router#what-urls-are-and-how-to-set-up-routing)复制这一章：

> ## 什么是 URL 以及如何设置路由
> 
> URL 只是一个由几个部分组成的字符串：
> 
> ```
> http://example.com/foo?bar=baz
>   |         |       |    |
>   |         |       |    +- query
>   |         |       +- path
>   |         +- host
>   +- scheme 
> ```
> 
> URL 可能还具有身份验证信息、端口和片段，但我们将在此尽量保持简单。Kunststube\Router 专门处理路径。方案和查询通常对路由没有影响，主机通常由 Web 服务器处理。
> 
> 假设使用 Apache Web 服务器进行典型设置，Apache 通常会为您执行“路由”。它接收到如下所示的 HTTP 请求：
> 
> ```
> GET /foo/bar/baz?some=parameters HTTP/1.1 
> ```
> 
> Web 服务器现在可以自由地以它选择的任何方式响应此请求。大多数 Web 服务器所做的默认操作是将 URL 的路径映射到硬盘上的文件。Web 服务器将首先确定合适的*DocumentRoot*是什么，即磁盘上已配置为“公共 Web 文件夹”的文件夹。假设 DocumentRoot 是`/var/www`. 然后它将连接到该根的请求路径，从而产生`/var/www/foo/bar/baz`. 然后它将尝试确定该文件是否存在于磁盘上并将其作为响应提供。如果请求的文件以`.php`或 Apache 以其他方式配置为将该文件视为 PHP 文件，它将首先通过 PHP 解释器运行该文件，然后返回其输出。
> 
> 要使用 PHP 路由器使用我们自己的自定义路由，我们需要拦截 Apache 查找文件以在磁盘上提供服务的过程。这可以在 Apache 配置文件中完成；但是如果您可以访问这些文件，我假设您知道自己在做什么，并且不会详细介绍那里的最佳设置。相反，我将介绍您不能或不想编辑核心 Apache 配置文件而是求助于`.htaccess`文件的典型情况。当 Apache 遍历磁盘上的目录结构以找到要服务的正确文件时，它会检查每个目录中是否`.htaccess`放置了一个调用的文件。如果找到，它将执行和/或将其中定义的规则合并到文件查找过程中，
> 
> 您想要实现的是让 Apache “查找”并为任何和所有请求执行一个特定的 PHP 文件，并使原始 URL 可用于该 PHP 文件，以便它可以进行自己的路由。最简单，最肮脏的方法是简单的`RewriteRule`：
> 
> ```
> <IfModule mod_rewrite.c>
>     RewriteEngine On
>     RewriteRule ^(.*)$ index.php?url=/$1 [QSA,L] 
> </IfModule> 
> ```
> 
> 假设您将其放入文件`/var/www/.htaccess`中。当 Apache 开始在该目录中查找文件时，它将解析这些重写规则。此时 Apache 正在寻找的路径的“内部状态”是`foo/bar/baz`. 的正则表达式`^(.*)$`将 `RewriteRule`匹配该路径（表达式基本上说“匹配任何东西”），并且该规则将路径重写为 `index.php?url=/foo/bar/baz`. 然后将原始`some=parameters`文件再次附加到该路径/URL（由于`QSA`标志）。然后 Apache 将继续寻找现在重写的路径`index.php`。因此，只需将您的代码放入`/var/www/index.php`其中，Apache 就会为其启动 PHP 解释器。PHP 将传递 URL 查询部分 `?url=/foo/bar/baz&some=parameters`，在 PHP 中可以访问为 `$_GET['url']`和`$_GET['some']`. 所以完整的设置如下所示：
> 
> ### 基本设置
> 
> 文件/文件夹结构
> 
> ```
> /var
>     /www
>         .htaccess
>         index.php
>         /Kunststube
>             /Router
>                 Router.php
>                 ... 
> ```
> 
> .htaccess
> 
> ```
> <IfModule mod_rewrite.c>
>     RewriteEngine On
>     RewriteRule ^(.*)$ index.php?url=/$1 [QSA,L] 
> </IfModule> 
> ```
> 
> 索引.php
> 
> ```
> <?php
> 
> require_once 'Kunststube/Router/Router.php';
> 
> $r = new Kunststube\Router\Router;
> $r->add('/foo');
> ...
> $r->route($_GET['url']); 
> ```
> 
> 这就是它的全部。一个基本的重写规则，将每个请求重定向到同一个 PHP 文件，并将原始 URL 作为查询参数附加，然后用于调用路由过程。
> 
> ### 警告和调整
> 
> 对上述设置的一个重要警告是，您的 URL 不能包含名为 的查询参数`url`，因为原始查询参数被添加回重写的 URL。URL `/foo/bar?url=baz`将被重写为：
> 
> ```
> index.php?url=/foo/bar&url=baz 
> ```
> 
> 第二个`url`参数将替换第一个参数。如果您需要`url`在应用程序中使用查询参数，请为您的重写规则选择不同的参数名称。
> 
> 其次，请注意 Kunststube\Router 期望传递给的 URL `route()`以`/`. 您可以在重写过程中添加斜线，如上所示，或者在 PHP 中；只要确保它在那里。
> 
> 第三，您通常也有不想通过 PHP 路由的文件，例如 CSS 和图像文件。您将希望这些由 Apache 直接提供服务。一个很好的设置是这样的：
> 
> ```
> /var
>     /Kunststube
>         /Router
>             ...
>     /MyApp
>         MyScript.php
>         ...
>     /www
>         .htaccess
>         index.php
>         /css
>             style.css
>             ...
>         /img
>             kitten.jpg
>             ... 
> ```
> 
> 将所有实际的 PHP 文件从公共 Web 根目录中取出，只留下公共资产文件和一个最小`index.php`文件。调整你的 RewriteRule 看起来像这样：
> 
> ```
> <IfModule mod_rewrite.c>
>     RewriteEngine On
>     RewriteCond %{REQUEST_FILENAME} !-f
>     RewriteRule ^(.*)$ index.php?url=/$1 [QSA,L] 
> </IfModule> 
> ```
> 
> `RewriteCond`确保`RewriteRule`仅当请求的文件实际上不存在时才适用 ( ) `!-f`。这意味着对 URL 的请求`css/style.css`将按原样通过，因为该文件确实存在并且 Apache 可以直接提供它。对物理上不存在的“虚构”文件的任何请求都将进入 `index.php`并可以路由到那里。在里面`index.php`，确保使用正确的路由器路径：
> 
> ```
> require_once '../Kunststube/Router/Router.php'; 
> ```
> 
> 事实上，更好的做法是在其他地方完全定义您的路线并使用自动加载器来加载所需的文件，但这超出了本文档的范围。

# c++ - 带有函数指针的 C++ 无效初始化错误

> ID：15655319
> 
> 赞同：2
> 
> 时间：2013-03-27T09:21:47.907
> 
> 标签：c++, templates, function-pointers

我正在使用指向模板函数的指针，这些函数具有数组引用参数，例如：

```
template< size_t N >
double MyFunction( double (&x)[N] ); 
```

我将使用以前的函数类型，就像另一个函数中的参数一样

```
template< size_t N >
bouble BigFunction( double (* PtrFunc)( double (&)[N] ), ... ) {
    double x[3];
    ...
    // fill x
    // call PtrFunc
    double y = (* PtrFunc)( x ); // error: ...
    ...
} 
```

在我调用的主程序中，`double z = BigFunction( &MyFunction, ... )`但是当我尝试使用 GCC 4.7.2 进行编译时，对于 N = 3 的数组的特定情况，我得到以下错误（这种情况并不重要，只解释了错误中的 [3]）

**错误：**从类型'double [(((sizetype)(((ssizetype)dim[1]) + -1))+ 1)]'的表达式中对类型'double (&)[3]'的引用的初始化无效< /p>

**如何解决仍然使用数组引用的问题？**

**注意。-**如果我用 typedef 或 std::function< double( double (&)[N] ) > 的结构替换指针参数，问题是一样的。

[这是ideone](http://ideone.com/oWef7L)的完整示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T14:36:11.073

在[http://ideone.com/oWef7L](http://ideone.com/oWef7L)的示例中， 将第 24 行从

```
double x[M]; 
```

至

```
double x[N]; 
```

这编译没有错误：http: [//ideone.com/VouWlG](http://ideone.com/VouWlG)

# ios - 从 iPad 发布到 ASP 时编码不同

> ID：15655320
> 
> 赞同：1
> 
> 时间：2013-03-27T09:21:49.150
> 
> 标签：ios, encoding, asp-classic

我制作了一个将数据发布到 ASP 脚本的 iPad 应用程序。然后数据以 UTF-8 格式存储在 MySQL 数据库中。今天，其中一位用户发布了出错的数据：

发布的数据：

```
Jeanette Sjösvärd, Uttke Renata, Håkan Giljam 
```

log和db中保存的数据：

```
Jeanette SjÃ¶svÃ¤rd, Uttke Renata, HÃ¥kan Giljam 
```

从数据库读取数据时，文本全是“Ã¥ Ã¤ Ã¶”（应该是“å ä ö”）

日志还以百分比格式保存原始发布数据到达服务器的方式：

```
Jeanette%20Sj%C3%B6sv%C3%A4rd%2C%20Uttke%20Renata 
```

从 ASP 页面再次发布所有数据（复制并粘贴该百分比编码块）时，数据将被保存而没有任何编码问题。

**事实**

*   完整发布的数据约为 18kB
*   所有 ASP 页面都包含`<%@LANGUAGE="VBSCRIPT" CODEPAGE="65001"%>`在顶部

**问题/想法**

*   为什么 ASP 脚本根据发送者的不同以不同的方式读取数据？
*   为什么它只发生了 100 次中的 1 次？
*   是否有任何编码信息/应该与 POST 请求一起发送？
*   它可能取决于数据中的某个特殊字符吗？
*   iPad 是否使用 UTF-8 以外的任何其他编码作为标准？（iPad 设置为瑞典语）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:32:39.553

**编辑**

找到了这个线程：[什么决定了你从 HTTP POST 接收到的数据的编码？](https://stackoverflow.com/questions/8040064/what-determines-the-encoding-of-then-data-you-receive-from-an-http-post)

将查看 post 请求的编码标头。但是我如何检测发布的数据是否不是 UTF-8 并在这种情况下进行转换呢？

这篇文章的后续：[https ://stackoverflow.com/questions/15656710/how-to-detect-post-encoding-and-convert-to-utf-8-in-asp](https://stackoverflow.com/questions/15656710/how-to-detect-post-encoding-and-convert-to-utf-8-in-asp)

# php - 在 cakephp 中调用函数

> ID：15655322
> 
> 赞同：5
> 
> 时间：2013-03-27T09:21:58.527
> 
> 标签：php, function, cakephp

```
public function data()
{ 
if($old != $status || $prev_lat != $lat || $prev_long != $long)
            {
                if($status == 'Village' || 'Unknown')
                {
                    exec_query();
                }
                else if($status == 'Town' || 'City')
                {
                    exec_query();
                }   
            }
}

public function exec_query()
{
    //Some data;
} 
```

但是每当我调用此函数时，我都会收到如下错误：-

```
Call to undefined function exec_query() 
```

谁能告诉我在 cakephp 中调用函数

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-27T09:24:41.717

在函数名称前添加`$this->`如下：

```
public function data()
{ 
if($old != $status || $prev_lat != $lat || $prev_long != $long)
            {
                if($status == 'Village' || 'Unknown')
                {
                    $this->exec_query();
                }
                else if($status == 'Town' || 'City')
                {
                    $this->exec_query();
                }   
            }
}

public function exec_query()
{
    //Some data;
} 
```

# java - 从java小程序上传文件到php服务器，同时使用数字签名来保证真实性

> ID：15655328
> 
> 赞同：0
> 
> 时间：2013-03-27T09:22:17.307
> 
> 标签：java, php, digital-signature, backend

我正在为我的本科学位开发一个主要项目。我有一个使用 aes 算法加密文件的 java 小程序。然后将该文件存储在本地计算机中。现在我想将该文件存储在服务器上的 MySQL 数据库中。我在后端使用 php。我还想通过使用数字签名来验证该文件。我编写了一些生成签名和公钥文件的 java 代码和一些代码来验证给定文件的签名。问题是假设多个用户正在访问该页面，并且对于每个实例，这些文件都将生成并存储在他们各自的本地计算机中。我不知道如何将这些文件上传到服务器并验证个人用户。有没有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:28:45.123

使用 Applet，您可以获得客户端 IP 地址。首先使用 IP 和公钥向您的 PHP Web 应用程序发送一个 POST 请求。将这些存储在数据结构中。

然后使用上传脚本中的另一个 POST 请求上传文件，您可以找到 IP 并从数据结构中检索该 IP 的公钥。

**更新**

如果您不使用基于 SSL 的 HTTP，请不要忘记在通过 POST 请求发送之前先加密然后对公钥进行编码。

# java - 在播放框架中读取上传文件

> ID：15655329
> 
> 赞同：0
> 
> 时间：2013-03-27T09:22:18.063
> 
> 标签：java, web, upload, playframework, playframework-2.1

我正在使用播放框架 2.1.0，将文件上传到`play-app/upload`文件夹。

然后我运行`play 'start -Dhttp.port=80'`启动服务器。

但是当我将文件上传到`play-app/upload`文件夹时，它不能立即访问。

**如果我停止服务器并重新启动，那么我可以访问该文件。**

我怎么解决这个问题？非常感谢。

ps，我的路线`/upload`如下：

```
GET     /upload/*file               controllers.Assets.at(path="/upload", file) 
```

会不会是静态文件加载一次？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:39:57.290

Preferably create upload folder outside the application's folder and add it's **full** path like `/home/navins/upload-folder/` in `application.conf`, then you'll be able to access it whole time, also you will be able to upload files there not only with app (ie, by FTP) without need of restarting.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:35:45.093

我认为您需要定义一种`Remote assets`控制器。基本上，上传文件后，您将其放在应用程序文件夹之外的文件夹中。然后，使用可以让您访问它的控制器。这是一个例子：[http ://www.jamesward.com/2012/08/08/edge-caching-with-play2-heroku-cloudfront](http://www.jamesward.com/2012/08/08/edge-caching-with-play2-heroku-cloudfront)

在这里，James Ward 创建了一个控制器来访问存储在云端的资产，您需要做的是编写一个类似的控制器并将“内容 url”替换为“已上传文件目录”的绝对路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T16:52:04.703

最后我通过在控制器中添加访问方法来解决它：

```
public static Result view(String filename) {
    File file  = new File(Play.application().path().getAbsolutePath() + "/upload/" + filename);
    return ok(file);
} 
```

然后，更改路由配置，您可以通过该方法访问文件。

顺便说一句，如果您使用的是 2.0 以下的播放框架，您可以使用：

```
 renderBinary(file, ContentType); 
```

# php - 如何使用 ImageMagick 的 php 的 api 来分割 gif 图片？

> ID：15655331
> 
> 赞同：1
> 
> 时间：2013-03-27T09:22:26.410
> 
> 标签：php, imagemagick, gif, imagick

我想分割一个 gif，我需要第一帧。现在我使用 php api for ImageMagick。我编写了以下代码，但代码返回完整图片。

```
function imagemagick_auto_img($inputImg,$dstWidth,$dstHeight) {
          try {

                    $im = new Imagick($inputImg);
                    $im = $im->coalesceImages();
                    $outputData = array('width'=> $dstWidth, 'height' => $dstHeight);

                    foreach ($im as $frame) {
                      $frame->thumbnailImage($outputData['width'],$outputData['height']);
                      $frame->writeImages($createImg, true);
                      return $createImg;
                    }
            } catch(Exception $e) {
                    $createImg = $this->autoImgThumbs($inputImg,$dstWidth, $dstHeight);
            }

} 
```

# c# - 使用 xpath 从 wsdl 文件中选择所有操作

> ID：15655333
> 
> 赞同：1
> 
> 时间：2013-03-27T09:22:28.797
> 
> 标签：c#, xpath, wsdl

为了自动生成一些文档（并学习 xpath），我试图从 WSDL 文件中获取所有操作的列表。

到目前为止，我尝试过的是：

```
 doc = new XmlDocument();
        doc.Load(@"C:\temp\tempuri.org.wsdl");
        var list = doc.SelectNodes("wsdl:definitions/wsdl:portType/wsdl:operation"); 
```

这给了我错误：

> 需要命名空间管理器或 XsltContext。此查询具有前缀、变量或用户定义的函数。

谁能解释我为什么会收到此错误以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:35:51.890

我建议看看这个答案：[C# XPath help - Expression not working](https://stackoverflow.com/questions/4728409/c-sharp-xpath-help-expression-not-working/4728740#4728740)

您需要`wsdl`在开始查询之前注册命名空间。

例如：

```
XPathDocument xDoc = new XPathDocument(@"C:\temp\tempuri.org.wsdl");
XPathNavigator xNav = xDoc.CreateNavigator();
XmlNamespaceManager mngr = new XmlNamespaceManager(xNav.NameTable);
mngr.AddNamespace("wsdl", "http://schemas.xmlsoap.org/wsdl/"); // this namespace may need to be different - I don't know what your wsdl file looks like
XPathNodeIterator xIter = xNav.Select("wsdl:definitions/wsdl:portType/wsdl:operation",mngr); 
```

或者，您可以使用 LINQ to XML - 请参阅 Jon Skeet 的这个答案：[需要命名空间管理器或 XsltContext](https://stackoverflow.com/questions/7088291/namespace-manager-or-xsltcontext-needed)

但是您说您想学习 xPath，所以我想这无关紧要。

# mysql - 函数的字符串

> ID：15655338
> 
> 赞同：0
> 
> 时间：2013-03-27T09:22:46.247
> 
> 标签：mysql, bash, function, shell

我有以下脚本：

```
#!/bin/bash

function MySQLQuery()
{
        echo $1
        #mysql -u root -p << EOF
        #$1
        #EOF
}
MySQLQuery "SELECT * FROM kunden;" 
```

但输出是：SELECT install.sh FROM kunden。它将 * 替换为脚本的名称。我怎样才能防止这种情况？

或者有没有更好的解决方案？

问候，文斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:42:49.473

除了@Ansgar 建议的（`MySQLQuery 'SELECT * FROM kunden;'`）之外，您还需要将`$1`参数括在引号中，例如：

`echo "$1"`.

这应该够了吧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:26:27.987

您需要防止[globbing](http://tldp.org/LDP/abs/html/globbingref.html)。将字符串放在单引号中：

```
MySQLQuery 'SELECT * FROM kunden;' 
```

并双引号函数内的参数。

# python - 在python中的for循环中嵌套列表

> ID：15655341
> 
> 赞同：1
> 
> 时间：2013-03-27T09:22:50.437
> 
> 标签：python, list, nested, loops

我正在遍历一个 for 循环，在列表中查找关键字匹配，然后将匹配索引编译到第三个列表。我可以将索引编译为列表列表，但我想通过它们匹配的项目进一步对子列表进行分组。

```
import re, itertools
my_list = ['ab','cde']
keywords = ['ab','cd','de']

indices=[]
pats = [re.compile(i) for i in keywords]
for pat in pats:
    for i in my_list:
        for m in re.finditer(pat, i):
            a =list((m.start(),m.end()))
            indices.append(a)
print(indices) 
```

这将返回：

```
[[0, 2], [0, 2], [1, 3]] 
```

试图得到：

```
[[0, 2], [[0, 2], [1, 3]]] 
```

所以很明显：

```
[[0, 2], [1, 3]] 
```

是上例中“cde”上的索引匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:27:45.807

使索引成为字典：

```
import re, itertools
my_list = ['ab','cde']
keywords = ['ab','cd','de']

indices = {}
pats = [re.compile(i) for i in keywords]
for pat in pats:
    for i in my_list:
        indices.setdefault(i, [])
        for m in re.finditer(pat, i):
            a = list((m.start(),m.end()))
            indices[i].append(a)
print(indices) 
```

给予：

```
{'cde': [[0, 2], [1, 3]], 'ab': [[0, 2]]} 
```

这是你要找的吗？

我用这段代码玩了一段时间，既然你导入了 itertools，你不妨用它来摆脱那些丑陋的嵌套 fors ;) 像这样：

```
import re
from itertools import product

my_list = ['ab', 'cde']
keywords = ['ab', 'cd', 'de']

indices = {}
pats = [re.compile(i) for i in keywords]

for i, pat in product(my_list, pats):
    indices.setdefault(i, [])
    for m in re.finditer(pat, i):
        indices[i].append((m.start(), m.end()))

print(indices) 
```

不幸的是，我无法理解 Bakuriu 使用列表理解来正常工作的想法。所以现在这对我来说似乎是最好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:33:11.667

`list`为每个匹配创建一个并在 this 中累积匹配`list`，最后将其添加到结果中：

```
import re, itertools
my_list = ['ab','cde']
keywords = ['ab','cd','de']

indices=[]
pats = [re.compile(i) for i in keywords]
for pat in pats:
    for i in my_list:
        sublist = []
        for m in re.finditer(pat, i):
            a =list((m.start(),m.end()))
            sublist.append(a)
        indices.append(sublist)
print(indices) 
```

或者您可以使用列表理解：

```
import re, itertools
my_list = ['ab','cde']
keywords = ['ab','cd','de']

indices=[]
pats = [re.compile(i) for i in keywords]
for pat in pats:
    for i in my_list:
        sublist = [(m.start(), m.end()) for m in re.finditer(pat, i)]
        indices.append(sublist)
print(indices) 
```

# mysql - Mysql，无法添加外键约束

> ID：15655345
> 
> 赞同：0
> 
> 时间：2013-03-27T09:23:00.623
> 
> 标签：mysql

为什么会这样：

```
Create table Kaart (
aantal_geel     int         not null,
aantal_rood     int         not null,
Primary key (aantal_geel, aantal_rood));

Create table Wedstrijd (
datum           date        not null,
aantal_geel     int     not null,
aantal_rood     int     not null,   
Primary key (datum),
Foreign key (aantal_geel) REFERENCES kaart(aantal_geel),
Foreign key (aantal_rood) REFERENCES kaart(aantal_rood)); 
```

给出：错误代码：1215。无法添加外键约束

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:26:08.200

您需要引用键列的组合，而不是单独引用每个键列：

```
Create table Wedstrijd 
(
  datum           date    not null,
  aantal_geel     int     not null,
  aantal_rood     int     not null,   
  Primary key (datum),
  Foreign key (aantal_geel,aantal_rood) 
          REFERENCES kaart(aantal_geel,aantal_rood)
); 
```

# blob - 如何从 Firebird 恢复未知类型的 BLOB 字段

> ID：15655347
> 
> 赞同：2
> 
> 时间：2013-03-27T09:23:05.660
> 
> 标签：blob, firebird, compression

我正在尝试恢复存储在 Firebird 数据库中的 BLOB 字段，我拥有的唯一信息是 BLOB 字段的内容是一个文档。

我尝试使用 IBManager 右键单击​​单元格并单击“将 BLOB 保存到文件”，但保存的文件不可读（就像它被加密一样）。我尝试用 Microsoft Word、记事本、adobe 等打开它，但没有成功。我还尝试用 WinRAR 打开它（我认为它可能在存储到数据库之前已经被压缩）但仍然没有。

有没有办法查明 BLOB 文件是否以及如何被压缩，以及如何恢复它？

提前致谢！

更新：

我已将 firebird 数据库转换为 SQL，并使用以下代码提取未编码的 BLOB 文档：

```
 conn.Open();
        dr = comm.ExecuteReader();

        while (dr.Read())
        {
            byte[] document_byte = null;

            if (dr[1] != System.DBNull.Value)
            {
                document_byte = (byte[])dr[1];
            }

            string subPath = "C:\\Documents\\" + dr[0] + "\\";
            System.IO.Directory.CreateDirectory(subPath);

            if (document_byte != null)
            {
                System.IO.File.WriteAllBytes(subPath + "Document", document_byte);
            }

        } 
```

既然我知道是 Base64 编码的，如何调整我的代码以从 Base64 解码 BLOB 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:16:25.323

除非该字段使用 BLOB 过滤器，否则数据将按原样存储到数据库中，即 Firebird 不会以任何方式更改它。检查字段的定义，如果它确实有`SUB_TYPE 0`（或`binary`）那么它是“普通”二进制数据，即 Firebird 不对其应用任何过滤器。即使该字段使用了一些过滤器，除非过滤器代码中存在错误，否则您应该在读取 BLOB 的内容时取回原始数据。

因此，归结为将文档存储到数据库中的程序，它很可能压缩或加密了文件，但是 Firebird 无法帮助您弄清楚使用了什么算法......一种选择是将 BLOB 的内容保存到文件中，然后尝试 *nix[`file`](http://en.wikipedia.org/wiki/File_%28command%29)命令，也许它能够检测到使用的文件格式。

我还会检查数据库是否损坏，只是为了区分大小写（Firebird 的`gfix`命令行工具）。

# jquery - $.getJSON 在本地工作，但在上传到 Web 服务器时不工作

> ID：15655349
> 
> 赞同：2
> 
> 时间：2013-03-27T09:23:16.380
> 
> 标签：jquery, json, apache, getjson

我正在编写一个在我的本地机器上运行良好的脚本，但是当我将它上传到我的网络服务器时，我的 $.getJSON 请求不起作用。

```
function loadData(fileName) {
    return $.getJSON(fileName + ".json");
}

var data;

var myFile = "Data";

loadData(myFile).done(function (data1) {
    if (data1 && data1.info) {
        data = data1;
        $.each(data1.info[0], function (key, value) {
            alert(value);
        });
    }
}); 
```

我已经删掉了很多内部代码，它们基本上只是将结果放入 html 元素中。我请求的 url 在远程服务器上，但是当我从硬盘驱动器运行这个 html 页面时它可以工作。当我将它上传到我的网络服务器时，它没有弹出，就像 $.getJSON 甚至没有运行。

我将它作为文件夹上传到 apache

```
Folder
|
|-->Index.html
|
|-->Data.json 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:34:29.507

不要依赖`$.getJSON()`方法，`$.ajax()`而是使用：您将对请求标头拥有更多控制权。

尝试使用以下选项，并将函数调用与应用程序特有的参数集成：

```
$.ajax({
    type: "POST",
    url: "some-url.json",
    contentType: "application/json; charset=utf-8",
    dataType: "json"
}); 
```

该`$.ajax()`方法的完整文档可以在[这里](http://api.jquery.com/jQuery.ajax/)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T13:16:34.637

我遇到了同样的问题，但它适用于远程服务器而不是本地开发设备（在我将项目从远程服务器导入到我的新开发设备之后）。

我终于发现我的 PHP 脚本会根据未设置的 $_Session 键引发通知。远程*专用*服务器设置为无论我的本地服务器是什么都不会发出任何通知。结果是 - 在我的本地设备上 - 响应无法被解析为 JSON。在我对 JSON 请求输入`isset()`命令后`$_SESSION`，JSON 请求*确实是*JSON 并且 jQuery 正确解析了它。

只需证明您的服务器响应是什么。您可以使用 Firefox 上的 Web Developer -> Web 控制台来完成。只需右键单击发送 AJAX 请求后出现的 URL 并标记该字段以记录您的请求及其响应。然后，您可以在再次调用 AJAX 调用后检查 URL，在检查器窗口的底部您会找到它。您可以直接看到响应是什么以及其格式是否正确。

# c++ - xcode中泄漏的c ++列表

> ID：15655352
> 
> 赞同：0
> 
> 时间：2013-03-27T09:23:24.427
> 
> 标签：c++, xcode, list, memory-leaks

我如何设法在 xcode、c++ 中创建泄漏列表。所以在我的 iOS 项目中，我有一个自定义对象列表，如下所示：

```
 int i=0;
        while (rawArr->isObject(i)) {
            Object::Ptr object = rawArr->getObject(i);
            SRComplexType* sr = new SRComplexType(object);
            refs.push_front(*sr);
            delete sr;
            i++;
        } 
```

尽管我添加了一个删除所有对象的解构函数，但似乎这里有一些泄漏：

```
for(std::list<SRComplexType>::iterator list_iter = refs.begin();
    list_iter != refs.end(); list_iter++)
{
    list_iter->~SRComplexType();
} 
```

}

SRComplexType 包含：

```
std::string sNo;
std::string sName;
std::string sUrl;
LocationComplexType *sLocation; 
```

sLocation （仅包含两个双精度数和一些方法）使用以下方式设置：

```
this->sLocation = new LocationComplexType(locationObject); 
```

LocationComplexType 中的双精度数使用以下方法设置：

```
 double d;
    const char * str = LatRaw.convert<string>().c_str();
    sscanf(str, "%*[^0-9]%lf",&d);
    free ((void*) str);
    this->longitude=d; 
```

仪器泄漏报告给出：

```
Leaked Object   #   Address Size    Responsible Library Responsible Frame
Malloc < varying sizes >    17  < multiple >    384 Bytes   libstdc++.6.dylib   std::string::_Rep::_S_create(unsigned long, unsigned long, std::allocator<char> const&)
Malloc 32 Bytes 17  < multiple >    544 Bytes   PocoTest2   std::list<SRComplexType, std::allocator<SRComplexType> >::_M_create_node(SRComplexType const&)
Malloc 16 Bytes 1   0x72f2140   16 Bytes    PocoTest2   -[ViewController viewDidLoad]
Malloc 3.00 KB  1   0x7c6ca00   3.00 KB libstdc++.6.dylib   std::string::_Rep::_S_create(unsigned long, unsigned long, std::allocator<char> const&)
Malloc < varying sizes >    17  < multiple >    560 Bytes   libstdc++.6.dylib   std::string::_Rep::_S_create(unsigned long, unsigned long, std::allocator<char> const&)
Malloc 32 Bytes 17  < multiple >    544 Bytes   libstdc++.6.dylib   std::string::_Rep::_S_create(unsigned long, unsigned long, std::allocator<char> const&) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:26:22.203

看起来您的列表包含`SRComplexType`对象，因此这里不需要动态分配。只需通过一个`SRComplexType`：

```
refs.push_front(SRComplexType(object)); 
```

也不需要删除列表的元素。

如果`SRComplexType`'s`LocationComplexType`是动态分配的，则必须确保遵循[*三规则*](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)或使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)（`boost::scoped_ptr`或者`std::unique_ptr`将是很好的候选者）。

# java - 在 Maven 构建期间生成随机数

> ID：15655353
> 
> 赞同：7
> 
> 时间：2013-03-27T09:23:26.377
> 
> 标签：java, maven, random

作为 Maven 构建的一部分，是否有一个插件（或另一种简单的方法）来生成一个“随机”数字？我想将此数字分配给一个属性，然后我可以在`pom.xml`文件中将其用于其他目的，例如过滤器值。

该数字不必是完全随机的（因此是引号），使用当前时间戳作为种子的东西完全可以。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T09:39:57.713

The default installation of maven offers a variable named `maven.build.timestamp`, which gives you a timestamp. You can control the format with

```
 <properties>
    <maven.build.timestamp.format>yyyyMMdd-HHmm</maven.build.timestamp.format>
  </properties> 
```

which follows the [SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html) rules. So, you can simply just use `${maven.build.timestamp}` to get a formatted timestamp :)

[http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Available_Variables](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Available_Variables)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T09:43:32.113

您可以使用时间戳 maven 插件：[http ://code.google.com/p/maven-timestamp-plugin/](http://code.google.com/p/maven-timestamp-plugin/)

它以您喜欢的格式在 Maven 属性中生成时间戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-16T12:23:57.857

您可以使用[randomid-maven-plugin](https://github.com/infrastructurebuilder/randomid-maven-plugin)

```
 <plugin>
    <groupId>org.infrastructurebuilder.maven</groupId>
    <artifactId>randomid-maven-plugin</artifactId>
    <version>0.9.2</version> <!-- r
    <configuration>
      <randomConfigs>
        <randomConfig>
          <name>random</name> <!-- Default value -->
          <length>16</length>
          <lower>2</lower>
        </randomConfig>
      </randomConfigs>
    </configuration>
  </plugin> 
```

您可以更改特殊字符集、长度等，它会让您生成一个随机 UUID 作为属性。

请注意，这*将*产生不可重复的构建。这就是随机的本质。但是，如果您只是注入一个将在下游使用但对可重复性无关紧要的值，那么这将起到作用。

# c# - 将随机背景图像分配给面板

> ID：15655357
> 
> 赞同：0
> 
> 时间：2013-03-27T09:23:34.837
> 
> 标签：c#, winforms, image, panel

我正在尝试将随机图像分配给面板：

```
System.Random randomNum = new System.Random();
int myInt = randomNum.Next(4);

if (Panel1.BackgroundImage != null)
{
    switch (myInt)
    {
        case 0:
            Panel1.BackgroundImage = @"C:\Users\etrit.bujupi\Desktop\IO-Etrit\CardGame\Images\2-Black.jpg";
    }
} 
```

但是我的代码会导致错误：

> 无法将类型“字符串”隐式转换为“System.Drawing.Image”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:30:23.720

用这个 ：

```
Panel1.BackgroundImage = System.Drawing.Bitmap.FromFile(yourPath); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T09:32:27.100

此代码可能会让您上路：

```
ImageList images = new ImageList();
images.Images.Add(Image.FromFile("C:\\pic1.bmp"));
images.Images.Add(Image.FromFile("C:\\pic2.bmp"));
//Fill with more images

//Make a Random-object
Random rand = new Random();
// This could also be a panel already on the Form
Panel p = new Panel(); 

//Pick a random image from the list
p.BackgroundImage = images.Images[rand.Next(0, images.Images.Count - 1)]; 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:32:04.260

```
 System.Random randomNum = new System.Random();
        int myInt = randomNum.Next(4);

        if (Panel1.BackgroundImage != null)
        {
            switch (myInt)
            {
                case 0:
                    Panel1.BackgroundImage = System.Drawing.Bitmap.FromFile( @"C:\Users\etrit.bujupi\Desktop\IO-Etrit\CardGame\Images\2-Black.jpg");

            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T09:32:19.773

![截屏](../Images/efc06852e4f8a235beedb9f65ab8e84c.png)

在您的项目资源中添加图像，然后像这样使用它：

```
Panel1.BackgroundImage = Properties.Resources.MyImage; 
```

# performance - Erlang 程序的跟踪速度更快

> ID：15655360
> 
> 赞同：1
> 
> 时间：2013-03-27T09:23:38.303
> 
> 标签：performance, erlang

我正在对程序进行一些评估测量，以测试执行时间以及检查原始系统执行的跟踪器如何影响原始系统的性能。跟踪程序不**干扰**系统，它们之间除了接收跟踪消息外不进行任何通信。

到目前为止，我得到的结果是`953.14`未打开跟踪的程序的平均`937`微秒与打开跟踪的微秒相比。时间是使用`statistics(wall_clock)`函数计算的。

我的想法是，由于我有一个来自跟踪器的额外进程，并且跟踪机制需要它们自己的处理能力，因此它会减慢系统速度而不是加快系统速度。有什么已知的原因会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:09:21.603

您是否运行过一次或多次测量？当您使用 wall_clock 时，您将在此测量中包括对环境的潜在扰动，等待消息...，并且您没有评估 CPU 时间。下面的示例显示了它：

```
1> F = fun() -> receive _ -> ok after 5000 -> timout end end.
#Fun<erl_eval.20.111823515>
2> F().
timout
3> statistics(wall_clock),F(),statistics(wall_clock).       
{965829,5016}
4> 
```

函数 F 显然不需要 5 秒的 CPU 时间，而只是等待 5 秒。

这意味着您应该多次测量，一般不要使用第一次执行时间，其中可能包括加载模块代码所需的时间，并注意环境 - 同一台机器上运行的其他进程是什么，以及确保测量的时间不是等待状态的结果。

如果您使用 runtime 而不是 wall_clock，您应该会看到所需的 CPU 时间，因此在跟踪代码时会增加时间。请注意，这种时间的增加可能会被多核的使用所掩盖。

# ember.js - 将动画添加到通过把手创建和销毁的视图（如果有帮助）

> ID：15655367
> 
> 赞同：1
> 
> 时间：2013-03-27T09:24:03.533
> 
> 标签：ember.js

假设我有这样的观点：

```
{{#if someCondition}}
  {{view view.someView}}
{{/if}} 
```

当 someCondition 为 true 时，将创建里面的视图，当它为 false 时，如果它已经创建，它将被销毁。

有没有人想出一种添加动画的方法？当条件为假并且视图被简单地破坏时，这尤其困难。

保罗

# maven - Maven ear插件多个工件内容

> ID：15655371
> 
> 赞同：3
> 
> 时间：2013-03-27T09:24:11.127
> 
> 标签：maven, war, environment, ear

让我们假设我有一个 Web 项目和几个可以部署它的环境。而且我希望 Maven 一次构建多个工件（例如，用于开发和产品）。我有一个 A-war 模块和一个 A-ear 模块（其中包含 A-war）。每个战争文物都可能包含仅与其环境相关的信息。

首先，我为 A-war 模块配置了一个 pom.xml 文件：

```
<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <executions>
                    <execution>
                        <id>package-prod</id>
                        <phase>package</phase>
                        <configuration>
                            <classifier>prod</classifier>
                            <webappDirectory>${project.build.directory}/${project.build.finalName}-prod</webappDirectory>
                            <webResources>
                                <resource>
                                    <directory>src/env/prod</directory>
                                </resource>
                            </webResources>
                        </configuration>
                        <goals>
                            <goal>war</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>package-dev</id>
                        <phase>package</phase>
                        <configuration>
                            <classifier>dev</classifier>
                            <webappDirectory>${project.build.directory}/${project.build.finalName}-dev</webappDirectory>
                            <webResources>
                                <resource>
                                    <directory>src/env/dev</directory>
                                </resource>
                            </webResources>
                        </configuration>
                        <goals>
                            <goal>war</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </pluginManagement>
    <finalName>A-war</finalName>
</build> 
```

这很好用 - 在目标文件夹中创建了 2 * *war* *s：A-war-prod 和 A-war-dev。

现在我想为这些**战争**中的每一个建立**耳朵**神器。

 **下面是A-ear模块中pom.xml的主要内容：

```
<dependencies>
    <dependency>
        <groupId>gr.id</groupId>
        <artifactId>A-war</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <classifier>prod</classifier>
        <scope>provided</scope>
        <type>war</type>
    </dependency>
    <dependency>
        <groupId>gr.id</groupId>
        <artifactId>A-war</artifactId>
        <classifier>dev</classifier>
        <version>0.0.1-SNAPSHOT</version>
        <scope>provided</scope>
        <type>war</type>
    </dependency>

</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ear-plugin</artifactId>
            <version>2.8</version>
            <executions>
                <execution>
                    <id>package-dev</id>
                    <phase>package</phase>
                    <configuration>
                        <classifier>dev</classifier>
                        <version>5</version>
                        <modules>
                            <webModule>
                                <groupId>gr.id</groupId>
                                <artifactId>A-war</artifactId>
                                <classifier>dev</classifier>
                                <contextRoot>/A-war</contextRoot>
                                <bundleFileName>/A-war.war</bundleFileName>
                            </webModule>
                        </modules>
                    </configuration>
                    <goals>
                        <goal>ear</goal>
                    </goals>
                </execution>
                <execution>
                    <id>package-prod</id>
                    <phase>package</phase>
                    <configuration>
                        <classifier>prod</classifier>
                        <version>5</version>
                        <modules>
                            <webModule>
                                <groupId>gr.id</groupId>
                                <artifactId>A-war</artifactId>
                                <classifier>prod</classifier>
                                <contextRoot>/A-war</contextRoot>
                                <bundleFileName>/A-war.war</bundleFileName>
                            </webModule>
                        </modules>
                    </configuration>
                    <goals>
                        <goal>ear</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
    <finalName>A-ear</finalName>
</build> 
```

它还构建了 2 个**耳朵：A-ear-dev.ear 和 A-ear-prod.ear。并且这些 * *ear* * 中的每一个都包含一个 A-war.war 工件。除了一个小细节之外，一切都很好：这些 **war**文件是相同的。我的意思是 A-ear-dev.ear 包含 A-war-dev.war（已重命名为 A-war.war），但 A-ear-prod.ear 包含相同的 A-war-dev.war 而不是它自己的战争产品战争。此外，当我更改执行顺序（将 prod 的创建移到 dev 之上）时，这些 * *ear* * 都包含 A-war-prod.war。

正如我从 maven 输出中看到的那样，当开始构建**ear**s 时，它将第一个战争复制到第一个 **ear 的文件夹中，**但对于第二个它没有：

```
[INFO] --- maven-ear-plugin:2.8:ear (package-dev) @ A-ear
---
[INFO] Copying artifact [war:gr.id:A-war:dev:0.0.1-SNAPSHOT] to [/A-war.war]
[INFO] Including custom manifest ....
[INFO] Copy ear sources to ...

[INFO] Building jar: <location>\A-ear\target\A-ear-dev.ear

....
[INFO] --- maven-ear-plugin:2.8:ear (package-prod) @ A-ear ---
[INFO] Copy ear sources to ...
[INFO] Including custom manifest file ...

[INFO] Building jar: <location>\A-ear\target\A-ear-prod.ear 
```

所以也许有人知道如何每次强制 maven 复制**战争文件？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T23:44:07.093

正如我发现的那样，当 Maven 将**war**文件复制到 temp 目录时，它不会重写它 - 如果有一个同名的文件，那么它将不会被替换。因此，在第一个工件复制之后，它总是复制执行模块中指向的第一个工件。所有其他工件均未复制。于是这件神器就被放在了所有结果的**耳朵里**。

所以这个问题的解决方案是为每个执行标签指定工作目录，比如：

```
 <execution>
                <id>package-prod</id>
                <phase>package</phase>
                <configuration>
                    <workDirectory>target/prod</workDirectory>
                    <classifier>prod</classifier>
                    <version>5</version>
                    <modules>
                        <webModule>
                            <groupId>gr.id</groupId>
                            <artifactId>A-war</artifactId>
                            <classifier>prod</classifier>
                            <contextRoot>/A-war</contextRoot>
                            <bundleFileName>/A-war.war</bundleFileName>
                        </webModule>
                    </modules>
                </configuration>
                <goals>
                    <goal>ear</goal>
                </goals>
            </execution> 
```**

# xml - xml解析面临的问题。无法替换字符串

> ID：15655374
> 
> 赞同：0
> 
> 时间：2013-03-27T09:24:20.617
> 
> 标签：xml, xml-parsing

我有一个如下的xml：-

```
<Comments>
    <Comment Text="ABC">
        <Note Timestamp="3/25/2013 8:26AM" Text="Movie">
    </Note>
</Comments> 
```

我想在同一行结束评论标签，例如，

```
<Comment Text="ABC"/> 
```

我已将字符串替换所有操作应用为：-

```
str.replaceAll("><Note", "/><Note"); 
```

但由于注释和注释标签之间的空格不定，它不起作用。请注意，空间每次都会有所不同。请建议我如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:50:01.590

这是您的解决方案，

`in = in.replaceAll(">[\\s]*<Note", "/><Note");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:59:19.537

You could do this using Linq by replacing each `Note`-node with a new one. Simplified example handling only the first node (tested in [Linqpad](http://www.linqpad.net/)):

```
 XElement oldStructure = 
     XElement.Parse(@"<Comment Text=""ABC"">
                       <Note Timestamp=""3/25/2013 8:26AM!"" Text=""Movie"">
                       </Note></Comment>");

 oldStructure.Dump("Original"); 

 // Replace this with some kind of lookup for each Note-element:
 var noteNode = (XElement) oldStructure.FirstNode; 

 // Create a new node. Note that it has no content:
 // (The null could be left out - left it here just to be explicit)
 var simplifiedNote = new XElement(noteNode.Name, null);
 noteNode.Attributes().ToList().ForEach(
    attrib => simplifiedNote.Add(new XAttribute(attrib.Name, attrib.Value)));

 // Replace with newly generated node - Linq will automatically use 
 // the compact format for you here, since the node has no content. 
 oldStructure.FirstNode.ReplaceWith(simplifiedNote);

 oldStructure.Dump("Final"); 
```

Running this in Linqpad will first dump the following:

Original:

```
<Comment Text="ABC">
   <Note Timestamp="3/25/2013 8:26AM!" Text="Movie"></Note>
</Comment> 
```

Final:

```
<Comment Text="ABC">
   <Note Timestamp="3/25/2013 8:26AM!" Text="Movie" />
</Comment> 
```

# c# - 如何使用 Open XML 和 C# 更改单个段落或页面的方向？

> ID：15655375
> 
> 赞同：5
> 
> 时间：2013-03-27T09:24:25.543
> 
> 标签：c#, openxml, export-to-word

我正在使用 C# 和 Open XML SDK 生成一个 word 文档。我想将某些段落及其包含页面的方向更改为横向，同时将其他段落保持为纵向。
我尝试了一些解决方案，但它们没有达到我想要的效果，而是所有页面的方向都更改为横向，除了第一个页面。这些解决方案包括：
- 将 SectionProperties 添加到我想要将其方向更改为横向的段落：

```
WordprocessingDocument WordDocument = WordprocessingDocument.Open(ReportFile, true)
Paragraph paragraph =  new Paragraph(new ParagraphProperties(
               new SectionProperties( new PageSize() 
               { Width = (UInt32Value)15840U, Height = (UInt32Value)12240U, Orient = PageOrientationValues.Landscape })));
WordDocument.MainDocumentPart.Document.Body.Append(paragraph); 
```

- 向主文档添加新正文并将段落附加到其中：

```
WordprocessingDocument WordDocument = WordprocessingDocument.Open(ReportFile, true)    
Body body = new Body();          
Paragraph paragraph =  new Paragraph(new ParagraphProperties(
               new SectionProperties( new PageSize() 
               { Width = (UInt32Value)15840U, Height = (UInt32Value)12240U, Orient = PageOrientationValues.Landscape })));
body.Append(paragraph);
WordDocument.MainDocumentPart.Document.Append(body); 
```

- 向主文档添加一个新的 Body 并将 SectionProprties 直接附加到它：

```
WordprocessingDocument WordDocument = WordprocessingDocument.Open(ReportFile, true)  
Body body = new Body();
Paragraph paragraph = new Paragraph();
SectionProperties sectionProp = new SectionProperties(new PageSize() { Width = (UInt32Value)15840U, Height = (UInt32Value)12240U, Orient = PageOrientationValues.Landscape });
body.Append(paragraph);
body.Append(sectionProp);
WordDocument.MainDocumentPart.Document.Append(body); 
```

那么，有没有办法改变单个段落/页面的方向？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T18:41:23.853

您必须放置下一页分节符才能开始新的部分，并设置该部分的方向。完成后，使用默认页面方向开始一个新部分。

下一页分节符开始横向：

```
doc.MainDocumentPart.Document.Body.Append(
    new Paragraph(
        new ParagraphProperties(
            new SectionProperties(
                new PageSize() { Width = (UInt32Value)12240U, Height = (UInt32Value)15840U, Orient = PageOrientationValues.Landscape },
                new PageMargin() { Top = 720, Right = Convert.ToUInt32(rightmargin * 1440.0), Bottom = 360, Left = Convert.ToUInt32(leftmargin * 1440.0), Header = (UInt32Value)450U, Footer = (UInt32Value)720U, Gutter = (UInt32Value)0U })))); 
```

下一页分节符开始纵向：

```
doc.MainDocumentPart.Document.Body.Append(
    new Paragraph(
        new ParagraphProperties(
            new SectionProperties(
                new PageSize() { Width = (UInt32Value)12240U, Height = (UInt32Value)15840U },
                new PageMargin() { Top = 720, Right = Convert.ToUInt32(rightmargin * 1440.0), Bottom = 360, Left = Convert.ToUInt32(leftmargin * 1440.0), Header = (UInt32Value)450U, Footer = (UInt32Value)720U, Gutter = (UInt32Value)0U })))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T11:50:46.130

根据上面的对话和我的理解，代码可能如下所示。

在 Main 方法中调用子方法：

```
 using (WordprocessingDocument package = WordprocessingDocument.Create(filePath, WordprocessingDocumentType.Document))
            {
                package.AddMainDocumentPart();
                package.MainDocumentPart.Document = new Document();
                Body body = package.MainDocumentPart.Document.Body = new Body();

                Paragraph para1 = CreatePara1(); // Paragraph 1 Portrait

                Paragraph breakBefore = CreateBreakBefore(); // Break before next paragraph that would be landscape

                Paragraph para2 = CreatePara2(); // Paragraph 2 Landscape

                Paragraph breakAfter = CreateBreakAfter(); // Break after previous paragraph that was landscape

                Paragraph para3 = CreatePara3(); // Paragraph 3 Portrait again

                body.Append(para1);
                body.Append(breakBefore);
                body.Append(para2);
                body.Append(breakAfter);
                body.Append(para3);
            } 
```

遵循子方法：

```
 private static Paragraph CreatePara1()
    {
        Paragraph para1 = new Paragraph();
        Run run1 = new Run(new Text("This is Paragraph one."));
        para1.Append(run1);
        return para1;
    }

    private static Paragraph CreateBreakBefore()
    {
        Paragraph paragraph2 = new Paragraph() { RsidParagraphAddition = "00BA2F0F", RsidParagraphProperties = "00BA2F0F", RsidRunAdditionDefault = "00BA2F0F" };

        ParagraphProperties paragraphProperties1 = new ParagraphProperties();

        SectionProperties sectionProperties1 = new SectionProperties() { RsidR = "00BA2F0F" };
        PageSize pageSize1 = new PageSize() { Width = (UInt32Value)12240U, Height = (UInt32Value)15840U };
        PageMargin pageMargin1 = new PageMargin() { Top = 1440, Right = (UInt32Value)1440U, Bottom = 1440, Left = (UInt32Value)1440U, Header = (UInt32Value)720U, Footer = (UInt32Value)720U, Gutter = (UInt32Value)0U };
        Columns columns1 = new Columns() { Space = "720" };
        DocGrid docGrid1 = new DocGrid() { LinePitch = 360 };

        sectionProperties1.Append(pageSize1);
        sectionProperties1.Append(pageMargin1);
        sectionProperties1.Append(columns1);
        sectionProperties1.Append(docGrid1);

        paragraphProperties1.Append(sectionProperties1);

        paragraph2.Append(paragraphProperties1);
        return paragraph2;
    }

    private static Paragraph CreatePara2()
    {
        Paragraph para2 = new Paragraph() { RsidParagraphAddition = "00BA2F0F", RsidParagraphProperties = "00BA2F0F", RsidRunAdditionDefault = "00BA2F0F" };
        BookmarkStart bookmarkStart1 = new BookmarkStart() { Name = "_GoBack", Id = "0" };

        Run run2 = new Run();
        LastRenderedPageBreak lastRenderedPageBreak1 = new LastRenderedPageBreak();
        Text text2 = new Text();
        text2.Text = "This is the paragraph two";

        run2.Append(lastRenderedPageBreak1);
        run2.Append(text2);

        para2.Append(bookmarkStart1);
        para2.Append(run2);
        BookmarkEnd bookmarkEnd1 = new BookmarkEnd() { Id = "0" };
        return para2;
    }

    private static Paragraph CreateBreakAfter()
    {
        Paragraph paragraph4 = new Paragraph() { RsidParagraphAddition = "00BA2F0F", RsidParagraphProperties = "00BA2F0F", RsidRunAdditionDefault = "00BA2F0F" };

        ParagraphProperties paragraphProperties2 = new ParagraphProperties();

        SectionProperties sectionProperties2 = new SectionProperties() { RsidR = "00BA2F0F", RsidSect = "00BA2F0F" };
        PageSize pageSize2 = new PageSize() { Width = (UInt32Value)15840U, Height = (UInt32Value)12240U, Orient = PageOrientationValues.Landscape };
        PageMargin pageMargin2 = new PageMargin() { Top = 1440, Right = (UInt32Value)1440U, Bottom = 1440, Left = (UInt32Value)1440U, Header = (UInt32Value)720U, Footer = (UInt32Value)720U, Gutter = (UInt32Value)0U };
        Columns columns2 = new Columns() { Space = "720" };
        DocGrid docGrid2 = new DocGrid() { LinePitch = 360 };

        sectionProperties2.Append(pageSize2);
        sectionProperties2.Append(pageMargin2);
        sectionProperties2.Append(columns2);
        sectionProperties2.Append(docGrid2);

        paragraphProperties2.Append(sectionProperties2);

        paragraph4.Append(paragraphProperties2);
        return paragraph4;
    }

    private static Paragraph CreatePara3()
    {
        Paragraph para3 = new Paragraph();
        Run run3 = new Run(new Text("This is Paragraph three."));
        para3.Append(run3);
        return para3;
    } 
```

# sql - 将 CSV 导入 SQL Server（包括自动创建表）

> ID：15655380
> 
> 赞同：27
> 
> 时间：2013-03-27T09:24:42.830
> 
> 标签：sql, sql-server, csv

我有几个**CSV 文件**，我想将它们导入**SQL Server 数据库**。我知道这是否可以通过 BULK 插入来实现，但我想要一个解决方案，以便在 CSV 文件的第一行（即列名）**之前自动创建导入表。**

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-27T09:39:14.970

SQL Server Management Studio 提供了一个导入/导出向导工具，该工具具有自动创建表的选项。

您可以通过右键单击对象资源管理器中的数据库并选择***任务->导入数据来访问它...***

从那里向导应该是不言自明且易于浏览的。您选择 CSV 作为源、所需目标、配置列并运行包。

如果您需要详细的指导，网上有很多指南，这里有一个不错的： [http ://www.mssqltips.com/sqlservertutorial/203/simple-way-to-import-data-into-sql-server/](http://www.mssqltips.com/sqlservertutorial/203/simple-way-to-import-data-into-sql-server/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-27T09:35:58.317

您可以创建一个临时表变量并将数据插入其中，然后通过从临时表中选择它来将数据插入到您的实际表中。

```
 declare @TableVar table 
 (
    firstCol varchar(50) NOT NULL,
    secondCol varchar(50) NOT NULL
 )

BULK INSERT @TableVar FROM 'PathToCSVFile' WITH (FIELDTERMINATOR = ',', ROWTERMINATOR = '\n')
GO

INSERT INTO dbo.ExistingTable
(
    firstCol,
    secondCol
)
SELECT firstCol,
       secondCol
FROM @TableVar

GO 
```

# php - 在 PHP 中对应的 MYSQL 表中调用值

> ID：15655381
> 
> 赞同：-1
> 
> 时间：2013-03-27T09:24:43.143
> 
> 标签：php, html, mysql

我有以下简单的搜索代码：

```
 <?php

mysql_connect ("localhost", "xxx","xxx")  or die (mysql_error());
mysql_select_db ("xxx");

$term = $_POST['term'];

$sql = mysql_query("select * from attendees where Surname like '%$term%' or Name like'%$term%' ");

while ($row = mysql_fetch_array($sql)){
echo '<br/> Name: '.$row['Name'];
echo '<br/> Last Name: '.$row['Surname'];
echo '<br/> E-Mail: '.$row['email'];
echo '<br/><br/>';
}
?> 
```

这可以正常工作并显示参加者表中的请求数据，但是我还想显示每个结果的图像。这里的问题是图像的路径在“路径”列中的“图像”表中。参加者表中的 id_attendees 列和图像表中的 id_images 列是相同的，因此如果 id_attendees 为 4，例如 id_images=4 的行包含“路径”列中的图像路径。那么我如何在这里调用这条路径呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:27:25.143

使用左连接

```
$sql = mysql_query("select * from attendees a
                       left join images i on a.id_attendees = i.id_images
                       where a.Surname like '%$term%' or a.Name like'%$term%' "); 
```

这将使用图像加入参加者并左加入确保如果没有与参加者匹配的 id 则它显示为 null 的图像....

正如stackoverflow中的每个人所建议的那样......即使我建议你使用mysqli，因为

> 此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:27:50.077

请注意，强烈建议不要使用 mysql_* 函数。

反正; 你可以用一个简单的 JOIN 来写这个：

```
SELECT whatever, you, want
FROM attendees JOIN id_attendees = id_images
WHERE ... your current where clause 
```

你可以使用所有你想要的列（只要你选择它们），就像你现在做的那样：

```
while ($row = mysql_fetch_array($sql)){
echo '<br/> Name: '.$row['Name'];
echo '<br/> Last Name: '.$row['Surname'];
echo '<br/> E-Mail: '.$row['email'];

echo '<img src="'.$row['image_path'].'" />'; // YOUR IMAGE

echo '<br/><br/>';
} 
```

***注意：***您的代码正在使用*mysql_*函数，这是不鼓励的。另请注意，您当前的代码中存在较高的 SQL 注入漏洞。使用 mysql_real_escape_string 确保您的数据被转义，或者更好的是，使用 PDO 或其他正确方法来防止这种情况并具有良好系统的好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:26:18.810

```
mysql_connect ("localhost", "xxx","xxx") or die (mysql_error());<p>
mysql_select_db ("xxx");

$term = $_POST['term'];

$sql = mysql_query("SELECT t1.*, t2.* FROM attendees t1 LEFT JOIN images t2 ON t1.id_attendees=t2.id_images WHERE t1.Surname LIKE '%$term%' OR t1.Name LIKE'%$term%' ");

while ($row = mysql_fetch_array($sql)){
echo '<br/> Name: '.$row['Name'];
echo '<br/> Last Name: '.$row['Surname'];
echo '<br/> E-Mail: '.$row['email'];
echo '<br/> Image: <img alt="img" src="' . $row['path'] . '">';
echo '<br/><br/>';

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T09:29:44.087

您可以`INNER JOIN`用于加入图像表以获取图像路径

```
mysql_connect ("localhost", "xxx","xxx")  or die (mysql_error());
mysql_select_db ("xxx");

// Note that you have to escape your search term to prevent SQL Injection
$term = mysql_real_escape_string($_POST['term']);

$sql = mysql_query("SELECT a.*, i.imagepath 
                    FROM attendees a 
                    JOIN images i
                      ON i.id_images=a.id_attendees
                    WHERE a.Surname LIKE '%$term%' OR a.Name LIKE '%$term%' ");

while ($row = mysql_fetch_array($sql)){
  echo '<br/> Name: '.$row['Name'];
  echo '<br/> Last Name: '.$row['Surname'];
  echo '<br/> E-Mail: '.$row['email'];
  echo '<br/><br/>';
} 
```

**您必须使用 MySQLi 或 PDO，因为`mysql_*`不推荐使用函数！**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T09:33:20.600

在链接表时总是使用关节，在你的情况下它会像：

```
$query = "select a.*, i.path
          from attendees a
             inner join images i ON i.id_images = a.id_attendees
          where a.Surname like '%$term%' or a.Name like'%$term%'" 
```

为了进一步了解这一点，请查看[http://phpweby.com/tutorials/mysql/32](http://phpweby.com/tutorials/mysql/32)

# asp.net - MonoDevelop：无法加载 http 处理程序

> ID：15655385
> 
> 赞同：0
> 
> 时间：2013-03-27T09:24:54.570
> 
> 标签：asp.net, mono, monodevelop, nancy

我在 OS X 上运行 MonoDevelop 以使用[Nancy](http://nancyfx.org/)开发 ASP.NET Web 应用程序。我下载了该`nancy.dll`文件并从我的网络项目中引用了它。

在里面`web.config`我添加了一行：

```
<httpHandlers>
  <add verb="*" type="Nancy.Hosting.Aspnet.NancyHttpRequestHandler" path="*" />
</httpHandlers> 
```

到该`system.web`部分，如 Nancy 的文档中所述。但是，如果我尝试运行我的应用程序，我的浏览器会出现并且我看到 Mono 创建的 ASP.NET 错误消息告诉我它

> 无法加载 httpHandler 类型“Nancy.Hosting.Aspnet.NancyHttpRequestHandler”

知道我做错了什么吗？为什么 Mono 找不到 DLL，尽管它在那里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:32:28.887

我明白了......我也错过了下载和安装`Nancy.Hosting.Aspnet`软件包。

一旦我这样做并引用了 dll，一切正常:-)

# c# - 在c#中使用microsoft office interop word的文档中的不同首页

> ID：15655387
> 
> 赞同：0
> 
> 时间：2013-03-27T09:25:06.837
> 
> 标签：c#, winforms, ms-office, office-interop

如何使用 Microsoft.office.interop.word 在文档中创建不同的首页页眉和页脚。

我已经尝试了以下代码，但仅在第一页中，页眉和页脚即将到来。我想要它以另一种方式（第一页不应该有页眉和页脚）。谁能帮帮我吗 ？我尝试了很多。

```
 Microsoft.Office.Interop.Word.Application w = new icrosoft.Office.Interop.Word.Application();
 Microsoft.Office.Interop.Word.Document doc;
 w.ActiveDocument.PageSetup.DifferentFirstPageHeaderFooter = -1;
 doc.ActiveWindow.ActivePane.View.SeekView = WdSeekView.wdSeekCurrentPageHeader;
 doc.ActiveWindow.Selection.TypeText("HEader Text"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T06:12:47.190

尝试这个 -

```
 Microsoft.Office.Interop.Word.Application w = new icrosoft.Office.Interop.Word.Application();
 Microsoft.Office.Interop.Word.Document doc;
 doc = w.ActiveDocument;
 doc.PageSetup.DifferentFirstPageHeaderFooter = -1;

 // Setting Different First page Header & Footer
 doc.Sections[1].Headers[WdHeaderFooterIndex.wdHeaderFooterFirstPage].Range.Text = "First Page Header";
 doc.Sections[1].Footers[WdHeaderFooterIndex.wdHeaderFooterFirstPage].Range.Text = "First Page Footer";

 // Setting Other page Header & Footer
 doc.Sections[1].Headers[WdHeaderFooterIndex.wdHeaderFooterPrimary].Range.Text = "Other Page Header";
 doc.Sections[1].Footers[WdHeaderFooterIndex.wdHeaderFooterPrimary].Range.Text = "Other Page Footer"; 
```

# android - 如何更新启动器中的应用程序列表？

> ID：15655390
> 
> 赞同：1
> 
> 时间：2013-03-27T09:25:21.323
> 
> 标签：android, launcher, android-launcher, app-launcher

我创建了一个启动器来使用我的平板电脑和多个配置文件，它是可配置的，我可以选择平板电脑的用户数量，每个用户都有自己的空间，管理员帐户从列表视图中选择应用程序列表包含所有已安装的应用程序。此列表一旦被选中，它将被保存在内部存储空间中。并且现有的菜单栏将随着新用户的添加而改变。并且每个内部都会有一个新的配置文件配置文件，我的问题是在实时应用程序中更新，现在，只有重新启动应用程序才能进行更新，android中的机制是什么我可以用来不断更新我的启动器重新启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:32:33.603

我认为这回答了您的问题： [如何强制整个布局视图刷新？](https://stackoverflow.com/questions/5991968/how-to-force-an-entire-layout-view-refresh)

我还想指出，您可以使用更少的 komma 并制作更小的句子。这让读者更清楚。

# android - 如何获得 XYSeries x 位置的屏幕 x 位置？

> ID：15655391
> 
> 赞同：3
> 
> 时间：2013-03-27T09:25:24.493
> 
> 标签：android, achartengine

假设我有这个[`XYSeries`](http://www.achartengine.org/content/javadoc/org/achartengine/model/XYSeries.html)：

```
XYSeries temps = new XYSeries("Temperature");
temps.add(0, 43);
temps.add(1, 42);
temps.add(2, 40);
temps.add(3, 38);
temps.add(4, 35);
temps.add(5, 35);
temps.add(6, 34);
temps.add(7, 33);
temps.add(8, 32);
temps.add(9, 32); 
```

如果渲染，这将绘制 10 小时内的温度图表。

如何获取本系列中每个数据点的屏幕 x 位置？换句话说，我如何找出第 6 个数据点在屏幕上的位置？

我要做的是确定哪个数据点最接近用户触摸屏幕的位置（在 x 轴上），以便显示数据点的详细信息。

[`XYChart.getSeriesAndPointForScreenCoordinate()`](http://www.achartengine.org/content/javadoc/org/achartengine/chart/XYChart.html#getSeriesAndPointForScreenCoordinate%28org.achartengine.model.Point%29)除了用户必须直接触摸一条线之外的其他类型的作品，而他们应该能够在该数据点的 x 轴上垂直触摸任何地方。

我认为这只是将图表空间转换为屏幕空间（反之亦然）的问题，但我还没有看到 Javadoc 中任何只采用 x 位置的方法；它们都需要 x 和 y，如果 y 与数据点不匹配，则不会返回任何内容。

有任何想法吗？

**更新**：

考虑到Dan的智慧，可以通过方法得到给定屏幕x位置的“图表空间”x位置`toScreenPoint()`，如下：

```
double[] chartPoint = chart.toScreenPoint(new double[] {event.getX(), event.getY()}, 2);
// double[0] == 4935.436905570652 
```

然而，现在的问题是获取这个坐标并找到它最近的数据点。如果有办法获取给定 XYSeries 索引/数据点的“图表空间”x 位置，我可以自己手动搜索最近的数据点：

```
// Build a list of the data points' chart space x-positions
double[] dataPointPositions = new double[temps.getItemCount()];
for(int index = 0; index < dataPointPositions.length; index++)
{
    dataPointPositions[index] = getXPositionForIndex(index, scale);
}

// (Go thru the list of data point positions, comparing them to the
// value taken from toScreenPoint() to find which one is closest.) 
```

所以现在百万美元的问题变成**`getXPositionForIndex()`**了，ACE 中是否已经有一种方法，或者是否有办法使用现有方法编写一个方法？此方法将获取 XYSeries 数据点的索引（可能还有比例），并将返回该数据点的“图表空间”x 位置。*这就是我卡住的地方。*

整个想法是触摸屏幕并找出用户触摸的十个（在这种情况下）数据点中的哪一个最接近。

**更新 2**：

我更新了我的代码只是为了看看`toRealPoint()`会返回什么。这是我的`OnTouchListener`；正如你所看到的，我输出了几个不同的值只是为了看看我得到了什么：

```
@Override
public boolean onTouch(View view, MotionEvent event)
{
    Log.i(TAG, "onTouch()");
    Log.i(TAG, "event.x = " + event.getX() + ", event.y = " + event.getY());

    double[] screenPoints = chart.toScreenPoint(new double[] {event.getX(), event.getY()}, 0);
    Log.i(TAG, "Screen points: " + event.getX() + " = " + screenPoints[0] + ", " + event.getY() + " = " + screenPoints[1]);

    double[] realPoints1 = chart.toRealPoint(event.getX(), event.getY());
    Log.i(TAG, "Real points #1: " + event.getX() + " = " + realPoints1[0] + ", " + event.getY() + " = " + realPoints1[1]);

    double[] realPoints2 = chart.toRealPoint((float)screenPoints[0], (float)screenPoints[1]);
    Log.i(TAG, "Real points #2: " + screenPoints[0] + " = " + realPoints2[0] + ", " + screenPoints[1] + " = " + realPoints2[1]);

    return true;
} 
```

不幸的是，我得到的数字并不乐观：

```
03-27 17:10:18.277: I/MainActivity(1149): onTouch()
03-27 17:10:18.277: I/MainActivity(1149): event.x = 98.19905, event.y = 259.41077
03-27 17:10:18.277: I/MainActivity(1149): Screen points: 98.19905 = 2049.3714971127715, 259.41077 = -Infinity
03-27 17:10:18.287: I/MainActivity(1149): Real points #1: 98.19905 = -Infinity, 259.41077 = 44.807568573847
03-27 17:10:18.297: I/MainActivity(1149): Real points #2: 2049.3714971127715 = -Infinity, -Infinity = Infinity 
```

当尝试使用 将屏幕点转换为真实点时`toRealPoint()`，它总是给我`-Infinity`x 位置（这是我真正关心的唯一一个）。我不确定我是否应该将“原始”屏幕点（来自`MotionEvent`）或“转换后的”屏幕点（来自`toScreenPoint()`）传递给它，所以我对两者都进行了尝试，看看它会输出什么。

我做错了什么吗？如果没有，有什么想法吗？

**更新 3**：

我认为我们（或者更确切地说......**我**）可能已经过度思考这种方式太多了。提供的观点`MotionEvent`实际上不需要翻译；它提供的坐标已经是正确的类型，“屏幕空间”。需要翻译的是数据*点*坐标；它们位于“图表空间”中，为了将它们与“屏幕空间”进行比较，您必须这样翻译它们。

考虑以下代码：

```
@Override
public boolean onTouch(View view, MotionEvent event)
{
    Log.i(TAG, "onTouch()");
    Log.i(TAG, "event.x = " + event.getX() + ", event.y = " + event.getY());

    for(int i = 0; i < tempSeries.getItemCount(); i++)
    {
        double x = tempSeries.getX(i);
        double y = tempSeries.getY(i);
        double[] screenPoint = chart.toScreenPoint(new double[] { x, y }, 0);

        Log.i(TAG, x + "," + y + " = " + screenPoint[0] + "," + screenPoint[1]);
    }

    return true;
} 
```

当用户触摸屏幕时，我在这里所做的只是输出`MotionEvent`坐标，然后循环遍历`XYSeries`. 我打印出原始点（范围从 0.0 到 23.0，因为我总共有 24 个数据点）。`toScreenPoint()`我还使用该方法打印出翻译后的“屏幕空间”点。这允许将`MotionEvent`坐标与数据点坐标进行比较。

I won't bother posting the long verbose output from this code as it's not really important. What is important is to realize if I touch the screen anywhere vertically around the "8 PM" x-axis (which has an internal data point value of 20 [12 + 8 = 20]), the `MotionEvent` coordinate I receive in my `OnTouchListener` tells me I touched at around x-position 420.0 (+/- 20 or so). Now if I look thru all the translated "screenPoint" values, I find one that is is around 420.0 -- the "8 PM" one!

简而言之，要将用户的触摸转换为数据点 x 位置值，您只需将`MotionEvent`x 位置与转换后的`toScreenPoint()`数据点 x 位置进行比较。将`toScreenPoint()`数据点的 x 位置转换到使用的相同坐标系`MotionEvent`（例如“屏幕空间”）。从那里开始，找出用户在触摸时最接近哪个数据点是一件简单的事情，即循环遍历转换后的数据点 x 位置并与 x 位置进行比较`MotionEvent`。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:42:54.777

该类`XYChart`有这样一个方法：

```
public double[] toScreenPoint(double[] realPoint, int scale) 
```

但是，为了使用它，您将不得不放弃您可能用于创建`GraphicalView`实例的方式。

例如，这个：

```
GraphicalView view = ChartFactory.getLineChartView(context, dataset, renderer); 
```

会变成这样：

```
XYChart chart = new LineChart(dataset, renderer);
GraphicalView view = new GraphicalView(context, chart); 
```

这样做的好处是您将获得对您的`chart`实例的引用，因此您可以调用我提到的方法。

**更新**：我认为更新的问题是寻找反向方法，将屏幕点转换为真实点。您可以在以下情况下使用此方法`XYChart`：

```
public double[] toRealPoint(float screenX, float screenY, int scale) 
```

# extjs - Extjs - 如何填充组合框形成一个单一的商店？

> ID：15655392
> 
> 赞同：2
> 
> 时间：2013-03-27T09:25:33.453
> 
> 标签：extjs, extjs4.1, ext4, extjs-stores

我有两个组合框，我正在使用一个存储，其中包含“sg”和“aod”键中的 2 个组合的数据。

假设对于第一个组合，我想在“sg”键中填充数据

对于第二个组合，我想用名为“aod”的键填充数据

那么如何在渲染组合时填充数据？

这是我的商店：

```
var myStore = Ext.create('Ext.data.Store', {
  fields: [{
    name: 'sg'
  }, {
    name: 'aod'
  }],
  data: [{
      'sg': ['1', '2', '3', '4', '5']
    }, {
      'aod': ['15', '20']
    }

  ]
});

Here is my comobos inside items config

defaults: {
    labelAlign: 'top',
    width: '20%',
    style: {
      textAlign: 'center',
      color: '#0a4374',
      fontSize: '12px',
      fontWeight: 'bold'
    },
    labelSeparator: '',
    allowEmpty: false,
    editable: false,
    cls: 'extraComboBox',
    xtype: 'combo',
    autoSelect: true,
    margin: 10
  },
  items: [{
      fieldLabel: 'Combo 1',
      value: '',
      //Here I want to load myStore.data.items[0].data.sg								
    },

    {
      fieldLabel: 'Combo 2',
      value: '',
      //myStore.data.items[1].data.aod			
    }
```

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:44:55.487

您可以使用[ComboBox.valueField](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-cfg-valueField)

用于显示：[Combobox.displayField](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-cfg-displayField)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:07:30.730

通过使用`myStore.getAt(0).get('sg')`，我能够将数据填充到 1st combo 并与 2nd combo 相同`myStore.getAt(0).get('aod')`。

要为每个组合设置默认值，请添加

```
{
    fieldLabel: 'Combo 1',
    id: 'sg',
    store: myStore.getAt(0).get('sg').data,
    listeners: {
        afterrender: function (combo) {
            combo.setValue(myStore.getAt(0).get(combo.id).default);
        }
    }
}, {
    fieldLabel: 'Combo 2e',
    id: 'aod',
    store: myStore.getAt(0).get('aod').data,
    listeners: {
        afterrender: function (combo) {
            combo.setValue(myStore.getAt(0).get(combo.id).default);
        }
    }

} 
```

并更改json如下：

```
var myStore = Ext.create('Ext.data.Store', {

    fields: [
        {name: 'sg'}, 
        {name: 'aod'}
    ],

    data: [{
            'sg': {
                'default': 1,
                'data': ['1', '2', '3', '4', '5']
            }
        }, {
            'aod': {
                'default': '15',
                'data': ['15', '20']
            }
        }
    ]
}); 
```

# sql - SQL 前 5 条记录算法

> ID：15655396
> 
> 赞同：1
> 
> 时间：2013-03-27T09:25:45.767
> 
> 标签：sql, sql-server, algorithm

让我第一个承认我不是最擅长 SQL 的人，这个问题有点难过。

我需要创建一个算法，从表中返回前 5 条记录。前 5 条记录应通过将 3 列相加得出，并返回得分最高的前 5 条记录。

谁能给我一些关于我将如何做这种陈述的指示。

一段时间以来，我一直在搞乱一些代码，但我没有快速得到任何地方。

问候马克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:28:08.370

我刚刚在 SQL Server Management Studio 中尝试了以下操作，它似乎可以满足您的要求：

```
SELECT TOP 5 * FROM
(
     SELECT Value1, (Col1 + Col2 + Col3) AS Rank FROM MyTable
) tmp
ORDER BY Rank DESC 
```

* * *

**编辑**
刚刚注意到您实际上不需要外部选择并且可以编写：

```
SELECT TOP 5 Value1, (Col1 + Col2 + Col3) AS Rank FROM MyTable
ORDER BY Rank DESC 
```

这在 SQL Server 2008 中进行了测试。

* * *

`MyTable`它从内部选择中调用的表中选择一列的值和其他三列的总和。外部选择按所选总和对这些进行排序，并获得前 5 个。

示例：源表包含以下数据

```
Value1    Col1    Col2    Col3
  V0        0       0       0
  V1        1       0       0
  V2        2       0       0
  V3        3       9       0
  V4        4       9       0
  V5        5       9       0
  V6        6       9       10
  V7        7       9       10 
```

内部选择将创建

```
Value1    Rank
  V0        0
  V1        1
  V2        2
  V3        12
  V4        13
  V5        14
  V6        25
  V7        26 
```

外部选择会返回

```
Value1    Rank
  V7        26
  V6        25
  V5        14
  V4        13
  V3        12 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T09:30:37.367

这可能会给你想要的效果：

`MySQL`

```
SELECT Value1, (Col1 + Col2 + Col3) AS Rank 
FROM MyTable
ORDER BY Rank DESC
LIMIT 5; 
```

`SQL`

```
SELECT TOP 5 Value1, (Col1 + Col2 + Col3) AS Rank 
FROM MyTable
ORDER BY Rank DESC; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T09:31:16.517

SQL Server 用于`TOP`限制`SELECT`语句返回的记录数。

```
SELECT TOP 5 Column1, (Column1 + Column2 + Column3) totalSum 
FROM   TableName
ORDER  BY totalSum  DESC 
```

如果要处理领带，请添加子句`WITH TIES`，`TOP`

```
SELECT TOP 5 WITH TIES Column1, 
       (Column1 + Column2 + Column3) totalSum 
FROM   TableName
ORDER  BY totalSum  DESC 
```

*   [TSQL 顶部](http://msdn.microsoft.com/en-us/library/ms189463%28v=sql.90%29.aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T09:30:55.620

尝试结合使用“order by”和“limit”。

```
select *, (col1 + col2 + col3) as total
  from MyTable
  order by total desc
  limit 5; 
```

*注意，这是 mysql 的语法，而不是 sql-server*

# spring - 获取客户端在 Java EE Web 应用程序中的反向代理后面知道的服务器名称

> ID：15655397
> 
> 赞同：1
> 
> 时间：2013-03-27T09:25:50.970
> 
> 标签：spring, jakarta-ee, redirect, proxy

对于我的 Java EE Web 应用程序，我遇到了问题。我需要使用我编写的 Spring 控制器将页面 A 重定向到另一个页面 B：

页面 A 用于我的浏览器（在 http 中）：

```
 http://MYPUBLICSERVERNAME/MYCONTEXT/A.do : 
```

在作为 Spring 控制器的 A 中，具有以下重定向代码：

```
@RequestMapping(method = RequestMethod.GET, value = "/A.do")
public String searchProfiles(){
....
return "redirect:/B.html";
} 
```

它在http中完美运行。所以我去 B ：

```
 http://MYPUBLICSERVERNAME/MYCONTEXT/B.html 
```

问题来自 HTTPS，因为使用 HTTPS 的反向代理拦截了请求：

这个代理在同一台机器上，我得到：

无法连接，因为当我去：

```
httpS://MYPUBLICSERVERNAME/MYCONTEXT/A.do 
```

我希望被重定向到：

```
httpS://MYPUBLICSERVERNAME/MYCONTEXT/B.html 
```

相反，浏览器被重定向到

```
 http://localhost/MYCONTEXT/B.html 
```

我知道对于服务器，客户端是反向代理，当然不是浏览器。

所以我的问题是：servlet 如何获取原始服务器名称，我的意思是 Web 浏览器中指示的服务器名称（MYPUBLICSERVERNAME）和协议（如果是 HTTPS，则为 HTTPS）。

我认为解决方法是使用浏览器提供的 cookie，因为浏览器只知道 MYPUBLICSERVERNAME 但可能存在更优雅的解决方案？

当然，如果我知道一个可以使用预期协议和服务器名称神奇地重定向的 spring 函数，那也没关系，但我没有找到它。

感谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:47:14.487

您可以将重定向与整个路径和协议一起使用

```
 return "redirect:https://MYPUBLICSERVERNAME/MYCONTEXT/B.html" 
```

我不确定您是否可以在请求中使用引用者标头（代理会更改引用者吗？）

```
String referrer = request.getHeader("referer"); 
```

# php - 数据库中的 HTML 特殊字符并在输入中回显

> ID：15655398
> 
> 赞同：0
> 
> 时间：2013-03-27T09:26:00.657
> 
> 标签：php, html, mysql, htmlspecialchars

早晨，

我创建了一个小表单来将一些信息存储到数据库中。

我在我的服务器上关闭了 magic_quotes_gpc。

如果我在框中输入一个`"`或一个`£`符号，则无需担心将其存储到数据库中。

当我用 php 回显它时，它会显示，但如果我在输入表单字段中使用值，则`"`关闭值字段。

```
<input type="text" name="variable" value="<?php echo $row[variable]; ?>" /> 
```

我现在在输入值周围使用了 htmlspecialchars 并且它可以工作。

```
<input type="text" name="variable" value="<?php echo htmlspecialchars($row[variable]); ?>" /> 
```

但我已经将开放购物车源作为参考，他们不使用 htmlspecialchars 而是以不同的方式存储数据。

我尝试使用他们使用的 urlencodes 方法：

```
urlencode(html_entity_decode($_POST[variable],ENT_QUOTES, 'UTF-8')); 
```

但这似乎存储了很多没有正确显示的数字和 + 符号。

我宁愿对更新数据库进行编码，而不是使用我使用的方法`htmlspecialschars`。

但不太确定哪种方式最好？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:08:38.517

也许尝试`mysqli_real_escape_string($dblink, $string)`而不是`htmlspecialchars`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:15:45.417

你可以使用

```
htmlentities() function in php 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-27T09:35:46.520

要存储 HTML 字符，请更改章程，然后存储它们：

```
<?php
      $new = htmlspecialchars("<a href='test'>Test</a>", ENT_QUOTES);
      echo $new; // &lt;a href=&#039;test&#039;&gt;Test&lt;/a&gt;
?> 
```

要取回正确的 HTML 字符，请按以下方式进行解码：

```
<?php
      $str = "<p>this -&gt; &quot;</p>\n";

      echo htmlspecialchars_decode($str);

      // note that here the quotes aren't converted
      echo htmlspecialchars_decode($str, ENT_NOQUOTES);
?> 
```

有关详细信息，请参阅[http://www.php.net/manual/en/function.htmlspecialchars.php](http://www.php.net/manual/en/function.htmlspecialchars.php)

# extjs4.1 - 如何将过滤器标题添加到每个网格列 extjs 4.1

> ID：15655399
> 
> 赞同：1
> 
> 时间：2013-03-27T09:26:07.007
> 
> 标签：extjs4.1, extjs-mvc

我已经在 Extjs 3.4 中实现了网格过滤器，但现在我正在迁移到 extjs 4.1。谁能告诉我如何在 extjs 4.1 中实现网格过滤器？

（作为新用户，我无法上传图片以显示示例）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:15:43.413

请参考以下链接。

[http://www.sencha.com/forum/showthread.php?150918-Grid-Header-Filters](http://www.sencha.com/forum/showthread.php?150918-Grid-Header-Filters)

第二个选项是菜单中的过滤器，这在 extjs 4.1 示例中可用。

[http://docs.sencha.com/extjs/4.1.3/#!/example/grid-filtering/grid-filter-local.html](http://docs.sencha.com/extjs/4.1.3/#!/example/grid-filtering/grid-filter-local.html)

第三个选项是过滤行。

[http://www.sencha.com/forum/showthread.php?128154-FilterRow-for-Ext-JS-4-Grids](http://www.sencha.com/forum/showthread.php?128154-FilterRow-for-Ext-JS-4-Grids)

这些链接之一将引导您走向正确的道路。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T13:10:11.793

最好的方法是定义一个列组件。

```
Ext.define('Ext.ux.grid.MyColumn',{

extend: 'Ext.grid.column.Column',

alias: 'widget.mycolumn',

childEls: [
    'headerEl', 'titleEl', 'filterEl', 'triggerEl', 'headerTextEl', 'filterTextEl'
],

renderTpl:
    'change it , and make your own TPL',

initComponent: function () {
// change or declare new data if you want.
// me.callParent(arguments);
// I have modified lot. so, I skip initComponent of Ext.grid.column.column
me.superclass.superclass.initComponent.call(this); // directly call parents parent class.
}

});

USAGE : 
columns: [
    {
         xtype: 'mycolumn',
         itemId: 'sfsfsfsfsf', text: 'My filter column'
    }
] 
```

# c# - 在asp.net中序列化为JSON？

> ID：15655401
> 
> 赞同：0
> 
> 时间：2013-03-27T09:26:12.033
> 
> 标签：c#, jquery, ajax, json

您好我第一次在 asp.net 中使用 JSON

我有这样的 WebMethod

```
 [WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public static string Vo_Get(string Action,int ID)
{
    Product p= new Product();

    DataSet ds= new DataSet();

    p.Action = Action;
    p.ID= ID;

    ds= VoGet_Get(obj);

    **string jsonVesselDetails = JsonConvert.SerializeObject(ds, Formatting.None);
    return jsonVesselDetails;**
} 
```

我在这里得到我的结果

```
 [
  {
    "Pinky": 1,
    "Ponky": "Breakwater Dockk",

  },
  {
    "Pinky": 2,
    "Ponky": "Watson Island Dock",    
  }, 
```

但是，当我尝试使用 Ajax 调用并附加到表时，如果我尝试与 result 绑定，它会给出 Unexpected Token U，如果我尝试与 result.data 绑定，它会给出 Unexpected token O

最后我发现问题在于序列化，

我的 Ajax 调用是

```
 $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "Voyage.aspx/Vo_Get",
                data: "{'Action':'Get','ID':'68'}",
                dataType: "json",
                success: function (data) {
                    try {
                        alert("getdata! success" );

                        Get(data);

                    } catch (ex) {
                        alert(ex);
                    }
                },
                error: function (msg) {
                    alert("err: " + error);
                }
            }); 
```

和

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:40:10.773

May be you are using the same variable `data` in success function as well. Try using the following,

```
success: function (result) {
   try {
        alert("getdata! success" );

        GetVessels(result);

        //Rebuild the table
        //BuildVesselTaggerInfo();

   } catch (ex) {
        alert(ex);
   }
}, 
```

note that I have changed from data to result.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:48:59.247

首先验证您的方法期望什么样的`JSON`或数组结构。`GetVessles`

您可以通过直接提供方法的 JSON 响应`VoyageVessel_Get`或手动构建它来做到这一点。IE

```
 var data= [
 {
      "TerminalID": 1,
      "TerminalName": "Breakwater Dockk",
      "PortID": 1,
      "PortName": "Swire Pacific Offshore",
      "Column1": "08/03/13",
      "Column2": "16/03/13",
      "ServiceID": 2
  },
  {
      "TerminalID": 2,
      "TerminalName": "Watson Island Dock",
      "PortID": 2,
      "PortName": "Keppel Offshore",
      "Column1": "20/03/13",
      "Column2": "23/03/13",
      "ServiceID": 2
  }];

  GetVessels(data); 
```

看看你的`GetVessels`作品是否适合这个对象。如果它没有找到它需要的结构（只有你可以这样做），然后构建它。

其次，您不能直接访问`:success`in的响应`ASP.NET Web-Service`。

像这样访问它：

```
success: function (data) {
           var jsonData= data.d;
           GetVessels(jsonData);
 } 
```

# 更新

如果您的对象包含日期时间字段，请尝试在`Serialization`ie中指定 DateFormathandling

```
JsonSerializerSettings microsoftDateFormatSettings = new JsonSerializerSettings
            {
                DateFormatHandling = DateFormatHandling.MicrosoftDateFormat
            };
string serializedObject= Newtonsoft.Json
                     .JsonConvert
                     .SerializeObject(dsVoyages, microsoftDateFormatSettings); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:31:27.153

我不知道 GetVessels 期待什么，但请尝试：

```
GetVessels(data.d); 
```

即传递实际数据而不是整个响应对象。

# jquery - 如何使这些函数仅在先前在 jQuery 中完成时才运行？

> ID：15655402
> 
> 赞同：1
> 
> 时间：2013-03-27T09:26:18.290
> 
> 标签：jquery

我有一个悬停事件，在悬停时，我需要设置子导航的大小，根据它的宽度添加一个类，然后显示子导航。问题是，就像现在一样，它在第一次悬停时显示子导航具有原始大小，然后当我第二次悬停时，它已经调整了子导航的大小。

那么我如何在前一个完成后才链接 3 件事情来运行：

1.  setSubNavWidth2()
2.  setSubMenuPos()
3.  $(this).children('.sub-menu-div').css('visibility', 'visible');

    ```
     $('.dir').hover(        
            function(){
              if($(this).children('.sub-menu-div').length>0){
                 var subnav=$(this).children('.sub-menu-div');
                 setSubMenuPos(subnav);
                 setSubNavWidth2(subnav);
                   $(this).children('.sub-menu-div').css('visibility', 'visible');
              }              
                $(this).children('.top-level-link').addClass('hoverstyle');              
            },
          function(){
                 $(this).children('.sub-menu-div').css('visibility', 'hidden');
                 $(this).css('background-color','transparent')
                 $(this).children('.top-level-link').removeClass('hoverstyle');

            }
        );      

    function setSubNavWidth2(element){
         var sub_nav_width = various calculations that set sub nav width
           $(element).width(sub_nav_width );
    }

     function setSubMenuPos(element){
           //set posiiton of menu
                var position = $(element).parent().position();
                var xPos = position.left;
                var width = $(element).width();
                var parentWidth = $(element).parent().width();
                var newXpos = xPos + parentWidth;
                if(xPos + width > 950 ){                
                      $(element).removeClass('left');
                       $(element).addClass('right');
                }

        } 
    ```

# php - MySQL 编码 utf8_general_ci

> ID：15655403
> 
> 赞同：0
> 
> 时间：2013-03-27T09:26:19.940
> 
> 标签：php, mysql

我有一个使用 utf8_general_ci 编码的数据库，但是当我使用 php 将数据提取到页面时，它显示“????”，这是怎么回事？

```
<?php
$query1 = "SELECT name FROM `kotegorii`";
$result1 = mysql_query($query1) or die(mysql_error());
echo "<h3>Категориялар</h3>";
while ($row = mysql_fetch_array($result1)) {

    echo $row['name']."<br>";
}
?> 
```

代码也是使用 UTF-8 编码编写的..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T09:32:44.640

[您必须在使用mysql_set_charset](http://php.net/manual/en/function.mysql-set-charset.php)连接到数据库后立即将 MySQL 连接编码设置为 UTF-8 ：

```
mysql_set_charset('utf8'); 
```

服务器使用连接编码向客户端发送信息，无论文本在存储中是如何编码的。默认情况下，连接编码`latin1`在许多安装中。

此外，您不应该`mysql`在新代码中使用旧 API；它已被弃用，并将在未来的某个版本中从 PHP 中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:27:29.083

您也应该设置页面编码。

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </head>
    <body>
    <!-- and so on --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:28:13.413

我不知道您的数据看起来如何，但您尝试过`utf8_decode` `utf8_encode`吗`$row['name']`？

# c# - C# 泛型约束问题

> ID：15655411
> 
> 赞同：0
> 
> 时间：2013-03-27T09:26:42.407
> 
> 标签：c#, .net, generics

我可以在 C# 的基类中声明的派生类型上传播通用约束吗？

示例程序显示错误：

> *类型“T”不能用作泛型类型或方法“Test.Base”中的类型参数“T”。没有从“T”到“Test.IBase”的装箱转换或类型参数转换。*

```
interface IBase
{

}

class Base<T> where T : IBase
{

}

class Derived<T> : Base<T>
{

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:29:59.197

```
class Derived<T> : Base<T> where T : IBase
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:30:42.900

在您的`Derived<T>`课程中，您没有指定`T`必须实现`IBase`的内容，并且因为它被用作类型参数，`Base<T>`所以您不能说任何`T`可以使用。将其更改为：

```
class Derived<T> : Base<T> where T : IBase 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:30:32.873

应该：

```
class Derived<T> : Base<T> where T : IBase
{

} 
```

始终明确地放置您的约束，因为 T 只是一个声明，它与您的基类中的 T 不同。

# javascript - jQuery移动按钮对齐问题

> ID：15655414
> 
> 赞同：8
> 
> 时间：2013-03-27T09:26:47.377
> 
> 标签：javascript, jquery, jquery-mobile

我正在尝试使用 jQuery Mobile，但我发现它有点令人困惑，因为它是一个标记驱动的框架。

我创建了一个测试页面，我只是试图将一个按钮向右对齐，但我无法做到这一点。我试过`float: right`了，但它不起作用。尽管`margin-left`通过给出特定百分比来工作，但当我调整页面大小时，同样不起作用。

这是我的[小提琴代码](http://jsfiddle.net/karthick6891/96s59/1/)。任何帮助都会很棒。

```
<div data-role="page">
    <div data-role="header" data-theme="b" data-position="fixed">
        <h1 style="font-size: 1.5em; text-align: left; margin-left: 70px;"
            data-role="none">Test</h1>
    </div>

    <div id="contentLogin" align="center" name="contentConfirmation" data-role="content">

        <p style="font-size: 0.85em; color: #000000">
            <b>Welcome to my page</b>
        </p>
        <br>
        <div class="ui-grid-b responsive">

            <div style="margin: 0px; margin-top: 0px; margin: 0px;" class="ui-block-a">

                <div data-role="fieldcontain">
                    <label for="url" class="alignleft">Username:*</label>
                    <input id="userId1" class="required" name="uid_r" placeholder="" type="text">
                </div>
                <div data-role="fieldcontain">
                    <label for="url" class="alignleft">Password:*</label>
                    <input id="Password1" class="required" name="pwd_r" value="" type="password">
                </div>
                <button id="login" data-theme="a" type="button" href="home.html" data-mini="false" data-inline="true" >Login</button>

            </div>
            <div class="ui-block-b">BLOCK A ADS</div>
            <div class="ui-block-c" style="margin-top: 0px;">
                BLOCK C
            </div>

        </div>
    </div>
    <div data-role="footer" data-theme="b" data-position="fixed">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T09:30:21.927

为什么不将按钮放在 div 中并右对齐 div？父 div 内的所有内容（包括按钮）都将右对齐。

```
<div align="right"><button id="login" data-theme="a" type="button" href="home.html" data-mini="false" data-inline="true" >Login</button></div> 
```

查看小提琴[http://jsfiddle.net/mayooresan/96s59/2/](http://jsfiddle.net/mayooresan/96s59/2/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-29T17:54:34.213

使用`ui-btn-right`. 它更容易，更简洁，而且（我认为）jquery 做事的方式。

```
<a href="#" class="ui-btn-right ui-btn-inline">Login</a> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-15T11:15:11.920

上一个答案是正确的，但您应该改用 CSS 样式（不推荐使用 aling=""）

```
<div style="text-align: right;">
<button data-inline="true">Login</button>
</div> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-03T17:33:58.977

如果你想要多个按钮，你可能会遇到问题......

尝试：

```
<div style="float:right">
    <button data-inline="true">Login</button>
</div> 
```

如果您想要多个按钮（左右对齐）。

如果您使用：

```
<div style="text-align: right;">
    <button data-inline="true">Login</button>
</div> 
```

div 将在任何现有按钮下方开始一个新块，因此您不能在左侧有其他图标。

类`ui-btn-icon-left|right`允许您将按钮左对齐|右对齐，但我发现使用两个按钮`ui-btn-icon-right`会使它们重叠。

下面的模板适用于我的两个左对齐按钮和两个右对齐的页脚：

```
<a href="#home" class="ui-btn">Home</a>
<a href="#intro" class="ui-btn">Intro</a>
<div style="float:right">
    <a href="#review" class="ui-btn">Review</a>
    <a href="#exit" class="ui-btn">Exit</a>
</div> 
```

[![在此处输入图像描述](../Images/c9de8160a3314e9d82ea8ceaed6ae78c.png)](https://i.stack.imgur.com/1jLSO.png)

# c# - ASP MVC 上 ViewModel 字段的条件验证

> ID：15655415
> 
> 赞同：3
> 
> 时间：2013-03-27T09:26:47.313
> 
> 标签：c#, asp.net-mvc, validation, web

标题：ASP MVC 上 ViewModel 字段的条件验证

我有一个关于 ASP MVC 验证的问题。假设我有以下视图模型

```
public class PersonViewModel
{
    [Required]
    public string Name {get; set; }

    [Required]
    public string Email {get; set; }
} 
```

据此，当我提交表单时，MVC 将验证两个字段是否都有值。但是，在我的网站中，我遇到了可以在全局站点设置中关闭电子邮件的情况，因此该模型只会在表单上呈现名称文本框。现在，当我提交表单时，它仍然要求我输入电子邮件字段，因为它被指示为“必填”，尽管用户现在无法填写该字段。

使用 ASP MVC 验证时，是否有针对此类场景的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T10:19:25.710

我似乎找到了解决方案：

```
if(EmailTurnedOff)
{
    this.ViewData.ModelState.Remove("Email");
} 
```

然后当我打电话给 ModelState.IsValid 它会给我正确的答案

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T09:31:18.760

解决方案是，如果设置了这样的设置，您必须取消字段`Required`上的属性并在发布时自己执行验证。`Email`像这样的东西

```
[HttpPost]
public ActionResult Post(PersonViewModel model)
{
    //replace EmailTurnedOff with your setting
    if (!EmailTurnedOff && string.IsNullOrWhiteSpace(model.Email))
    {
        ModelState.AddModelError("Email", "Field is Required");
    }

    if (ModelState.IsValid)
    {
        //do whatever
    }

    return View(model);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-12T19:23:31.053

可以从 ViewModel 执行条件验证。ViewModel 类需要实现 IValidatableObject 接口。

然后在 ViewModel 的底部添加一个类似这样的方法：

```
 public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (validationContext == null)
            return null;

        var valResults = new List<ValidationResult>();

        if (!EmailExists))
            valResults.Add(new ValidationResult($"Email is required.", new[] { "EmailErrorMsg" }));

        return valResults;
    } 
```

不要忘记将 ValidationMessage 添加到视图中的正确位置：

```
@Html.ValidationMessage("EmailErrorMsg") 
```

快乐编码！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-29T18:40:06.400

背负 [groovejet](https://stackoverflow.com/users/472603/groovejet)，这就是我在控制器中使用条件[必需]而不是视图模型的方式。我这样做是因为我只想忽略我的应用程序中的 [Required] 一项操作。

```
 public ActionResult Update(MyViewModel mVM)
    {
        if(mVM.Role == "Role" && mVM.Property == null)
        {
            ModelState.Remove("Property");
        }
        if (ModelState.IsValid)
        {
           // code...
        }
     } 
```

# netlogo - 特定于海龟和补丁的变量

> ID：15655416
> 
> 赞同：0
> 
> 时间：2013-03-27T09:26:50.513
> 
> 标签：netlogo

在 NetLogo 中，我可以使用 turtles-own 创建特定于海龟的变量，使用 patch-own 创建特定于补丁的变量。但是如何创建特定于海龟和补丁的变量？

具体来说，我想创建一个偏好函数——每只海龟都偏好生活在某个补丁中。每个乌龟和补丁的偏好不同，例如，乌龟 1 有偏好 20 住在补丁 (1,1) 和偏好 30 住在补丁 (2,2) 等。我如何在 NetLogo 中定义这个函数?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:06:12.450

如果我理解正确，您希望在每个海龟和每个补丁之间有一个唯一的映射。我的第一个想法是通过使用内置矩阵扩展

```
extensions [matrix] 
```

并有一个海龟自己的变量“preferences”，它是一个包含您世界尺寸的矩阵（例如，如果 max-pxcor 和 max-pycor 都是 16 并且您的原点居中，您需要一个 33x33 矩阵）。

然后，“首选项”的每个元素对应一个补丁并表示分配的值。

有关如何用值填充矩阵的文档，请参阅 NetLogo 用户手册。

# java - Java，通用类型的常用接口 - 一个糟糕的设计？

> ID：15655423
> 
> 赞同：4
> 
> 时间：2013-03-27T09:27:07.847
> 
> 标签：java, generics

我有一个常用的接口（我不想让它泛型），它带有泛型方法`Get`和一个实现它的泛型类。

@Override 没有给我警告并且代码按预期工作，但我在 Foo#Get() 中有警告： `Type safety: The return type T for Get() from the type Test.Foo<T> needs unchecked conversion to conform to TT from the type Test.Attribute`

我也必须使`Attribute`接口通用吗？我试图避免手动弄乱 Object 和 casts 并将所有类型的不同属性存储在一个列表中。

（使用静态只是在一个文件中编译测试样本 - 它不会改变任何东西）

```
import java.util.ArrayList;
import java.util.List;

public class Test
{
    static interface Attribute
    {
        <TT> TT Get();
    }

    static class Foo<T> implements Attribute
    {
        T val;

        public Foo(T val)
        {
            this.val = val;
        }

        @Override
        public T Get()
        {
            System.out.println("it is me");

            return val;
        }
    }

    public static void main(String[] args)
    {
        List<Attribute> list = new ArrayList<Attribute>();

        list.add(new Foo<String>("test"));

        String s = list.get(0).Get();

        System.out.println(s);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:40:49.790

您可以使`Attribute`接口通用，然后使用[通配符](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)允许`Attribute`将任何类型的 s 放置在 a 中`List`：

```
List<Attribute<?>> list = new ArrayList<Attribute<?>>(); 
```

如果您需要确保`Attribute`容器中只能放置每种类型中的一种，只需使用`Set`：

```
Set<Attribute<?>> set = new HashSet<Attribute<?>>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:30:32.003

为了在不强制转换的情况下使用接口，您需要使接口通用。

```
import java.util.ArrayList;
import java.util.List;

public class Test
{
    static interface Attribute<E> //Added Generic Param
    {
        <E> E Get();
    }

    static class Foo<T> implements Attribute<T> //Added Generic Param
    {
        T val;

        public Foo(T val)
        {
            this.val = val;
        }

        @Override
        public T Get()
        {
            System.out.println("it is me");

            return val;
        }
    }

    public static void main(String[] args)
    {
        //Specify Type of generic
        List<Attribute<String>> list = new ArrayList<Attribute<String>>(); 

        list.add(new Foo<String>("test"));

        String s = list.get(0).Get();

        System.out.println(s);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T09:31:08.043

基类中泛型方法的问题是有人可以使用显式类型参数调用它。这显然在这里没有意义，这就是编译器抱怨的原因。

似乎最好的解决方案是使您的基类通用。如果你想在一个列表中存储不同类型的属性，那么你就有不同的问题了；您将如何恢复原始类型（无论您是否使用泛型）？

# cocoa - 在单个 customViews 中将一个视图切换到另一个视图

> ID：15655424
> 
> 赞同：0
> 
> 时间：2013-03-27T09:27:18.307
> 
> 标签：cocoa, xcode4.5, nsview, nsviewcontroller

我在一个 xib 中有一个 CustomView，在两个不同的 xib 中有两个不同的视图。我想在一个CustomeView中一个接一个地显示这两个视图。我有一个 NSView 对象，它连接到 .xib 文件中的 CustomView

> ```
> @property (retain) IBOutlet NSView *mySubview;
> @property (retain) NSViewController *viewController; 
> ```

**打开一个View的方法是：**

```
 -(IBAction)selectBookTicket:(id)sender
  {
      //setting status label to nil
      _viewController=[[NSViewController alloc] initWithNibName:@"BookTicket" bundle:nil];
      //loading bookTicket xib in custom view of NormalUserWindow
      [_mySubview addSubview:[_viewController view]];
  } 
```

**在同一个 CustomView 中打开另一个视图的方法是：**

```
-(IBAction)selectTicketCancellation:(id)sender
  {
      _viewController=[[NSViewController alloc] initWithNibName:@"CancelTicket" bundle:nil];
      //loading CancelTicket xib in custom view of NormalUserWindow
      [_mySubview addSubview:[_viewController view]];
  } 
```

当我第一次打开任何视图时，它会在 CustomView 中正确显示，但是当我尝试第二次打开第二个视图或相同的视图时，它会与之前打开的视图重叠。

我试过了

> [_mySubview removeFromSuperview]

它正在完全删除“mySubview”，我的意思是当前加载的视图将被删除，但在执行后不允许显示任何视图`'[_mySubview removeFromSuperview]'`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:53:57.947

您必须仅删除您从视图控制器中添加的视图。请尝试以下代码。

```
-(IBAction)selectTicketCancellation:(id)sender
  {
      [[_viewController view] removeFromSuperView];
      _viewController=[[NSViewController alloc] initWithNibName:@"CancelTicket" bundle:nil];
       //loading CancelTicket xib in custom view of NormalUserWindow
       [_mySubview addSubview:[_viewController view]];
  } 
```

执行`[_mySubview removeFromSuperview]`将从视图层次结构中删除您的主机视图（即显示来自其他视图控制器的视图），这解释了“不允许显示任何其他子视图部分”。

# c# - 在代码上的 DataGridView asp.Net 上编辑时动态添加 DropDownList

> ID：15655433
> 
> 赞同：0
> 
> 时间：2013-03-27T09:27:51.133
> 
> 标签：c#, asp.net, gridview, drop-down-menu

我正在做一个项目只是为了添加一些东西，其中之一是当他们按下一行的编辑按钮时在 GridView 上添加一个 DropDownList ......遗憾的是，这些列是在数据库绑定之前在运行时添加的，而不是在 aspx 上页面作为我找到的所有示例，我在这里有这样的：

```
private void SetColumnsGrid(GridView Grid)
    {
        BoundField Col = new BoundField();//1
        Col.HeaderText = "Name";
        Col.DataField = "Name";
        Col.HeaderStyle.Width = Unit.Pixel(100);
        Col.ReadOnly = true;
        Grid.Columns.Add(Col);

        Col = new BoundField(); //2
        Col.HeaderText = "User Type";
        Col.DataField = "UserType";
        Col.HeaderStyle.Width = Unit.Pixel(100);
        Grid.Columns.Add(Col);

        //Is ddl spected to be here as the TemplateField with the EditItemTemplate?
} 
```

那么，我该怎么做呢？我只是找不到正确的方法。我应该处理哪些事件？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:26:50.000

您可以使用几个选项。一种是使用模板，另一种是在创建行时手动添加控件。模板示例（这使用了一个复选框，但可以轻松切换）：

```
Public Class CheckBoxTemplate
    Implements ITemplate   

    Public Sub InstantiateIn(ByVal container As System.Web.UI.Control) Implements System.Web.UI.ITemplate.InstantiateIn
        Dim cb As CheckBox = New CheckBox()
        cb.ID = "someId"
        cb.AutoPostBack = True

        container.Controls.Add(cb)

    End Sub
End Class 
```

在您创建 gridview 控件的应用代码中：

```
 Dim gv As New GridView
    With gv
        .ID = "myGridView"
        .AutoGenerateColumns = False
        .DataKeyNames = New String() {"somePKID"}
        .GridLines = GridLines.Both
        .AllowSorting = False
        .AllowPaging = False
        .PageSize = numRows
        .Width = tableWidth
        .BorderColor = Drawing.ColorTranslator.FromHtml("#808080")
        .PagerSettings.Mode = PagerButtons.NextPrevious
        .PagerSettings.NextPageText = "Next"
        .PagerSettings.PreviousPageText = "Prev"
        .HeaderStyle.CssClass = foundUserHeadStyle
        .RowStyle.CssClass = foundUserEvenRows
        .AlternatingRowStyle.CssClass = foundUserOddRows
        .Columns.Clear()

        Dim SelectUserTF As New TemplateField
        With SelectUserTF
            .HeaderText = "Add"
            .ItemStyle.Wrap = False
            .ItemTemplate = New CheckBoxTemplate()
        End With
       .Columns.Add(SelectUserTF)

   End With 
```

另一种选择是在创建行事件中执行此操作：

```
 Protected Sub gv_rowCreated(ByVal sender As Object, ByVal e As GridViewRowEventArgs) Handles myGridView.RowCreated
    Try
        Dim myDDL As New DropDownList
        Dim myCollection As New ListItemCollection
        With myCollection
            Dim newItem As New ListItem
            newItem.Text = "item 1"
            newItem.Value = "1"

            .Add(newItem)
        End With
        e.Row.Cells(0).Controls.Add(myDDL)
  Catch ex As Exception

    Finally

    End Try
end sub 
```

让我知道这是否有帮助或您对此有疑问。

# c++ - 本机 C++ 中是否有等效的 XSD2Code？

> ID：15655446
> 
> 赞同：1
> 
> 时间：2013-03-27T09:28:17.730
> 
> 标签：c++, xml, xsd

在 C# 中，我使用 XSD2Code 来：

*   从 XSD 自动生成实体
*   生成在这些实体中序列化/反序列化 XML 流的方法

它存在于原生 C++ 世界中吗？

我正在寻找适用于 Windows 的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:36:28.433

不，C++ 没有这样的特性。

但是，有多个C++*库*可以提供您可能需要的一切。我确信至少会有几个可以满足您的 XML 需求（糟糕！）。

特别是，“ *[CodeSynthesis XSD - C++ 的 XML 数据绑定](http://www.codesynthesis.com/products/xsd/)*”看起来很有希望。

^(我获得了 1,120,000 个 Google 搜索结果`xsd xml c++`。)

# r - 在某一点上评估 ksmooth？

> ID：15655450
> 
> 赞同：0
> 
> 时间：2013-03-27T09:28:34.903
> 
> 标签：r, kernel, regression

所以我试图找到一种方法来评估使用 k-smooth 拟合到数据集的估计曲线上的一个点。即我已经使用内核注册为数据集拟合了一条曲线。并且想要估计曲线上特定点的值。就像我有一个曲线图......但我不确定如何使用它。

抱歉，如果不太清楚...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:37:26.250

要提取其他点，一种简单（尽管效率低下）的方法就是指定`n.point`参数。例如，

```
z = ksmooth(cars$speed, cars$dist, "normal", bandwidth = 5, n.points = 1000) 
```

`min(cars$speed)`将输出从 开始到结束的1000 个值`max(cars$speed)`。您可以通过以下方式访问这些值：

```
z$x 
z$y 
```

**例子**

假设您想获得 的点预测`x=21`。然后选择查找`x`最接近的值`21`：

```
which.min(abs(z$x-21)) 
```

然后使用此索引选择特定`y`值

```
z$y[which.min(abs(z$x-21))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-28T21:56:30.727

在另一个答案中，可能没有 x 值恰好等于 21。在实际拟合中，您可以指定`x.points`参数以获取要评估拟合的点。

```
z = ksmooth(cars$speed, cars$dist, "normal", bandwidth = 5, x.points = 21)
print(z)

$x
[1] 21
$y
[1] 58.00075 
```

# asp.net-mvc - 避免重新锐化 带有 MVC 和 WebAPI 的 web.config 警告

> ID：15655452
> 
> 赞同：15
> 
> 时间：2013-03-27T09:28:42.600
> 
> 标签：asp.net-mvc, web-config, asp.net-web-api, resharper

如果文件中的元素涉及与源树中的文件夹不直接对应的 URL，ReSharper 7.1.1 代码检查会错误地将文件中`<location>`的元素报告为冗余。`web.config`如果您使用的是 ASP.NET MVC 或 Web API，则 URL 路径不直接对应于任何特定的物理文件夹是正常的。

如果您运行解决方案范围的检查，您会收到两个警告，我已经能够禁用其中一个，但我不知道如何禁用第二个。

第一个是“冗余位置元素”警告。ReSharper 淡出整个位置部分。这是它会淡出的示例：

```
<location path="FederationMetadata">
  <system.web>
    <authorization>
      <allow users="*" />
    </authorization>
  </system.web>
</location> 
```

如果您通过 ACS 使用联合登录，并且您希望为此提供元数据端点，则需要此配置。但是不会有这个名字对应的路径。

（严格来说，这与 MVC 或 Web API 无关。我给出了这个示例，因为它很常见。但是，我的项目也有几个`<location>`元素对应于通过 MVC 和 Web API 路由配置处理的路径，它们具有同样的问题。根本原因似乎是相同的：ReSharper 在项目中看不到与此位置对应的任何内容，因此它错误地得出结论认为它是错误的。它影响 MVC 和 Web API 控制器，以及任何路径由于模块等原因可用。）

摆脱第一个警告很容易：您可以在“检查严重性”设置中将其关闭。

然后你会得到第二个警告：“位置元素未使用：在 FederationMetadata 中找不到项目项目”（以及每个具有相应`<location>`元素的控制器的类似警告）。

这个仅出现在您检查整个解决方案时出现的“检查结果”面板中。当您查看源文件本身时，通常不会出现任何检查小部件。奇怪的是，这个似乎没有被禁用的选项。

我知道您可以右键单击并选择“隐藏...”（尽管这似乎认为这是一个“冗余位置”问题，我已经在设置中禁用了该问题），但据我所知，隐藏检查结果在我的机器上是本地的。我想配置团队共享点设置，以便它不会在任何地方显示此警告。

我的目标是为所有用户提供干净的检查结果，而不是让每个用户隐藏结果。Resharper 虚假地报告了这个问题 -`web.config`很好，只是 R# 误解了它。有谁知道我怎样才能使第二个警告消失？（或者，更好的是，有什么方法可以让 R# 能够知道这些“隐藏”位置确实存在？）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-09T19:34:43.470

我刚刚添加了这个：

```
 <!-- ReSharper disable WebConfig.RedundantLocationTag -->
  <!-- ReSharper disable WebConfig.WebConfigPathWarning -->
  <location path="api">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <!-- ReSharper restore WebConfig.RedundantLocationTag -->
  <!-- ReSharper restore WebConfig.WebConfigPathWarning --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:06:10.740

您可以更改 R# 设置，使其不在您的计算机本地。

1.  在VS中，点击`RESHARPER`菜单，然后点击`Manage Options...`
2.  双击该`team-shared`项目（应该是中间的，介于`This computer`和之间`personal`）。

通过在此处更改设置，它将`[ProjectName].csproj.DotSettings`在您的项目中创建一个文件。如果您将此文件签入源代码管理，这些设置将与在项目上开发的其他 R# 用户共享。AFAIK，您可以更改的任何设置（例如，告诉 R# 检查严重性应该不同于默认设置），您应该能够添加到团队共享设置中。

至于您的 web.config 错误，我对 R# 有更大的不满，因为启用它后，我会在 web.config 和 app.config 文件上丢失智能感知。您可能可以告诉 R# 忽略以下错误，但我不确定它是否是您正在寻找的解决方案，因为它将忽略 web.config 文件的所有 R# 问题。

1.  双击编辑您的`team-shared`设置（如上所述）后，单击左侧菜单`Settings`下的项目。`Code Inspection`
2.  单击`Edit Items to Skip button`。
3.  在 下`Files and folders to skip when analysing`，单击`Add File...`。
4.  导航到您的 web.config 文件并添加它。

这告诉 R# 在分析时忽略整个 web.config 文件。同样，不确定这是否是您想要的解决方案，但它可能会抑制您看到的错误建议。

**更新（回复评论）**

实际上，您可以从 VS 上下文菜单中更改检查选项。当`Inspection Options`对话框出现单选按钮 ( `Do not show`- `Error`) 时，会有一个`Save To`按钮。单击该按钮将设置保存到团队共享的 DotSettings。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T11:34:44.460

这似乎有两个部分：

1.  配置 Web 路径是处理这两个错误的最佳方法
2.  显然，您必须`DotSettings.user`手动将设置从文件中移到共享团队文件中

如果单击有问题的路径属性（将插入符号放在属性值中），然后等待 R# 弹出窗口出现，它的菜单应该提供一种创建“路径映射”或编辑现有映射的方法地点。您可以使用它来告诉 R# 对应于路径的实际文件在哪里。或者，由于在这种情况下没有这样的文件，您可以将操作设置为忽略此路径。

有了这个，上面提到的任何警告都不会出现。

不幸的是，路径映射对话框（如过滤器问题对话框）是其中之一，只有“保存”按钮，没有“保存到”按钮，无法控制设置的去向。实际上，它们似乎最终出现在`<project>.DotSettings.user`Web 项目的文件中。

但事实证明，如果您在文本编辑器中打开该文件，从那里剪切设置，然后将它们粘贴到您的团队共享解决方案设置中，那么它只适用于文件。这似乎以一种适用于项目中每个人的方式消除了这两个警告。

（您应该能够对“过滤器问题”设置使用类似的技巧，尽管您需要查看不同的位置。这些最终会出现在您的全局设置中，但您可以使用“管理选项”对话框导出它们，然后您可以打开导出的设置，并将它们复制到团队共享的解决方案设置中。）

# wordpress - Wordpress 3.5.1：限制默认搜索小部件以搜索特定类别

> ID：15655462
> 
> 赞同：0
> 
> 时间：2013-03-27T09:29:07.997
> 
> 标签：wordpress

我正在使用`WP Subdomains`运行完美的插件，我可以限制帖子以通过子域 slug 显示我想要的位置。但是，如果我使用 wordpress 默认搜索小部件搜索单词，它会显示所有帖子，而不管子域如何。

我不知道如何限制搜索以过滤帖子并仅显示子域，在升级的情况下如何停止覆盖我新创建的搜索小部件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:47:00.993

Search Everything 插件有一个区域，您可以在其中排除您想要的类别。但我不知道子域和 WP 子域。如果您设法同时使用这两个插件，请反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:36:29.353

要限制 wordpress 的默认搜索，您必须编辑搜索表单发送输入文本的页面。Searchform 只是发送信息，您需要检查的是目标文件。

检查此链接：[http ://codex.wordpress.org/Creating_a_Search_Page](http://codex.wordpress.org/Creating_a_Search_Page)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-05T05:15:58.467

好的，我用我的自定义搜索页面做到了。

# java - 无法删除 cookie

> ID：15655463
> 
> 赞同：0
> 
> 时间：2013-03-27T09:29:08.920
> 
> 标签：java, cookies, web, httpcookie, setcookie

我有一个控制器（在 tomcat 7 上），我想从中删除 cookie。例如，我的域是“test.mydomain.de”。这是我的代码：

```
private void removeCookies(HttpServletRequest request, HttpServletResponse response) {
  Cookie[] allCookies = request.getCookies();
  for( Cookie cookie : allCookies ) {
    if(! (cookie.getName().equals( "JSESSIONID")) {
      cookie.setMaxAge(0);
      response.addCookie(cookie);
    }
  }
} 
```

这适用于使用域“test.mydomain.de”设置的 cookie。但是有 2 个由域（主机）“.mydomain.de”的 javascript 设置的 cookie。路径是“/”。它们不安全，也不是 httponly。我试过`cookie.setDomain(".mydomain.de");`了`cookie.setPath("/");`。在响应标头（Set-Cookie）中，我看到`Expires=Thu, 01-Jan-1970 00:00:10 GMT`但 Firefox（版本 14.0.1）不会删除 cookie。

# c - 在C中将小端十六进制转换为大端十进制

> ID：15655467
> 
> 赞同：1
> 
> 时间：2013-03-27T09:29:18.137
> 
> 标签：c, bit-shift, fat

我正在尝试理解和实现一个基于 FAT12 的简单文件系统。我目前正在查看以下代码片段，它让我发疯：

```
 int getTotalSize(char * mmap)
{
    int *tmp1 = malloc(sizeof(int));
    int *tmp2 = malloc(sizeof(int));
    int retVal;

```
* tmp1 = mmap[19];
* tmp2 = mmap[20];
printf("%d and %d read\n",*tmp1,*tmp2);
retVal = *tmp1+((*tmp2)<<8);
free(tmp1);
free(tmp2);
return retVal; 
```

}; 
```

从我目前所读到的，FAT12 格式以小端格式存储整数。上面的代码正在获取存储在引导扇区的第 19 和第 20 字节中的文件系统的大小。

但是我不明白为什么

```
 retVal = *tmp1+((*tmp2)<<8); 
```

作品。是按位 <<8 将第二个字节转换为十进制吗？还是大端格式？为什么它只对第二个字节而不是第一个字节？

有问题的字节是[小端格式]：

40 0B

我尝试通过先将顺序切换为手动转换它们

0B 40

然后从十六进制转换为十进制，我得到了正确的输出，我只是不明白如何将第一个字节添加到第二个字节的按位移位中做同样的事情？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:37:05.670

这里的使用`malloc()`是严重的[面部](http://en.wikipedia.org/wiki/Facepalm)诱导。完全没有必要，而且有严重的“代码异味”（让我怀疑代码的整体质量）。此外，`mmap`显然应该是`unsigned char`（或者，甚至更好，`uint8_t`）。

也就是说，您要询问的代码非常简单。

给定两个字节大小的值`a`和`b`，有两种方法可以将它们组合成一个 16 位值（这就是代码所做的）：您可以认为`a`是最低有效字节，或者`b`.

使用框，16 位值可以如下所示：

```
+---+---+
| a | b |
+---+---+ 
```

或者像这样，如果您改为认为`b`是最重要的字节：

```
+---+---+
| b | a |
+---+---+ 
```

将 `lsb`和组合`msb`成 16 位值的方法很简单：

```
result = (msb * 256) + lsb; 
```

**更新**： 256 来自这样一个事实，即多字节数中每个连续更重要的字节的“价值”。将其与十进制数中 10 的作用进行比较（组合两个个位数的十进制数`c`，`d`您将使用`result = 10 * c + d`）。

考虑`msb = 0x01`和`lsb = 0x00`，那么上面将是：

```
result = 0x1 * 256 + 0 = 256 = 0x0100 
```

您可以看到该`msb`字节在 16 位值的上半部分结束，正如预期的那样。

您的代码`<< 8`用于向左进行按位移位，这与乘以 2 ⁸即 256 相同。

请注意，`result`上面是一个值，即不是内存中的字节缓冲区，因此它的字节顺序无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:49:40.477

我认为将单个数字或字节组合成更大的整数没有问题。

让我们用 2 位数字进行十进制：1（最低有效）和 2（最高有效）：

  1 + 2 * 10 = 21（10 是系统基数）

现在让我们使用 2 位数字进行 base-256：0x40（最低有效）和 0x0B（最高有效）：

  0x40 + 0x0B * 0x100 = 0x0B40 （0x100=256 是系统基数）

然而，问题可能在于其他地方，即 12 位整数如何存储在 FAT12 中。

一个 12 位整数占用 1.5 个 8 位字节。在 3 个字节中，您有 2 个 12 位整数。

假设您有 0x12、0x34、0x56 作为这 3 个字节。

为了提取第一个整数，您只需要获取第一个字节 (0x12) 和第二个字节 (0x04) 的 4 个最低有效位，然后像这样组合它们：

```
0x12 + ((0x34 & 0x0F) << 8) == 0x412 
```

为了提取第二个整数，您需要获取第二个字节 (0x03) 和第三个字节 (0x56) 的 4 个最高有效位并将它们组合如下：

```
(0x56 << 4) + (0x34 >> 4) == 0x563 
```

如果你阅读微软关于 FAT 的官方文档（`fatgen103`在线查找），你会发现所有与 FAT 相关的公式/伪代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:32:50.167

`<<`运算符是左移*运算*符。它取运算符左侧的值，并将其移动运算符右侧使用的数字。

因此，在您的情况下，它将`*tmp2`八位的值向左移动，并将其与 的值组合`*tmp1`以从两个八位值生成一个 16 位值。

例如，假设您有 integer `1`。这是，在 16 位二进制中，`0000000000000001`. 如果将其左移八位，则最终得到二进制值`0000000100000000`，即`256`十进制。

*表示*（即二进制、十进制或十六进制）与它无关。所有整数都以相同的方式存储在计算机上。

# java - 在 Java 中设置 FTP 连接超时

> ID：15655472
> 
> 赞同：0
> 
> 时间：2013-03-27T09:29:52.420
> 
> 标签：java, ftp

我正在尝试使用 com.enterprisedt.net.ftp.FTPClient 在 FTP*连接*上设置超时，但由于某种原因无法使其正常工作。

这是我的代码：

```
public boolean testFtpDetails(String path) {
    boolean success = false;
    try {
        FTPClient ftp = new FTPClient();
        ftp.setRemoteHost("210.160.1.100");
        ftp.setTimeout(3000);
        ftp.connect();

        ftp.login("test", "test");

        success = ftp.connected();

        if (success && path != null) {
            ftp.chdir(path);
        }

        ftp.quit();

    } catch (UnknownHostException e) {            
    } catch (IOException e) {            
    } catch (FTPException e) {
} 
```

因此，在尝试执行 ftp.connect() 3 秒后，我希望它会超时。但是，这不会发生，超时大约需要 15 秒。有没有办法改变这个？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:57:19.330

setTimeout 方法记录为：

```
Set the SO_TIMEOUT in milliseconds on the underlying socket. 
```

这样，它只影响低级别的套接字操作。问题是——你期望发生什么样的超时？

在连接？转会期间？闲置？

如果您连接到例如未知主机，您还将在大部分时间甚至考虑超时之前进行 DNS 查找。

# sql-server - 我的 sql 脚本有什么问题？（SQL服务器）

> ID：15655474
> 
> 赞同：0
> 
> 时间：2013-03-27T09:30:01.653
> 
> 标签：sql-server, performance, sql-server-2005

我的表 serialNumber, Org 我想将 serialNumber (123456100) 从 ORG A 转移到 ORG B 并将其标记为已转移转移状态 = 0（有库存）转移状态 = 1（无库存）

这是我的查询，它可以工作，但是当我要传输大量序列号（10K）时它太慢了……我知道还有其他方法可以做到，但是怎么做？！

```
create table org(
  org_id  INT NOT NULL IDENTITY(1,1)PRIMARY KEY CLUSTERED,
  orgName VARCHAR(10)
  )
create table serialNumber(id  INT NOT NULL IDENTITY(1,1)PRIMARY KEY CLUSTERED,
                          org_id INT FOREIGN KEY REFERENCES org,
                          serialNumber BIGINT,
                          transferedStatus INT DEFAULT(0),
                          parentID INT NULL FOREIGN KEY REFERENCES serialNumber)

insert into org values('ORG A')
insert into org values('ORG B')
insert into org values('ORG C')
insert into org values('ORG D')
insert into org values('ORG E')

insert into serialNumber values(1,123456100,0,NULL)
insert into serialNumber values(1,123456101,0,NULL)
insert into serialNumber values(1,123456102,0,NULL)
insert into serialNumber values(1,123456103,0,NULL)
insert into serialNumber values(1,123456104,0,NULL)
insert into serialNumber values(1,123456105,0,NULL)

declare @parentID int
declare @From_org_id  int 
declare @To_org_id  int 
declare @serialNumber BIGINT

set  @From_org_id  = 1
set  @To_org_id  = 2
set @serialNumber = 123456101

/* mark the serialNumber as transfered */

UPDATE serialNumber                             
set
transferedStatus = 1 
Where   
org_id              = @From_org_id
AND serialNumber    = @serialNumber 

/* find ID of the source of Serial Number */
select TOP 1 @parentID = id
FROM serialNumber
Where org_id            = @From_org_id 
  AND transferedStatus  = 1
    AND serialNumber    = @serialNumber 
ORDER BY id DESC

insert into serialNumber values(@To_org_id,@serialNumber,0,@parentID) 
```

[sqlfiddle 链接](http://sqlfiddle.com/#!3/85226/10)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:37:03.087

您可能不会为您的插入进行单独的插入，例如可能更多，但这对于大量插入更有效：

```
insert into #serialNumber 
values
(1,123456100,0,NULL)
,(1,123456101,0,NULL)
,(1,123456102,0,NULL)
,(1,123456103,0,NULL)
,(1,123456104,0,NULL)
,(1,123456105,0,NULL) 
```

接下来，对于您的实际更新，运行它，使用 OUTPUT 子句我们可以一举完成更新和插入，节省一些查找，这可能是昂贵的。

```
UPDATE serialNumber                             
    set transferedStatus = 1 
OUTPUT @To_Org_id, INSERTED.serialNumber, 0, INSERTED.Id  into serialNumber
Where   
    org_id = @From_org_id
    AND serialNumber    = @serialNumber 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:06:51.943

首先，当您在已提高索引的表中插入大量数据时，这可能会减慢您的插入批处理。

禁用表上的聚集索引，`serialNumber`然后重试。如果您有更多索引，请将它们全部禁用，插入数据并重建索引。重建索引将使它们全部启用。

# silverlight - Silverlight 5 ListBox IsSelected 样式绑定坏了？

> ID：15655489
> 
> 赞同：1
> 
> 时间：2013-03-27T09:30:41.273
> 
> 标签：silverlight, mvvm, binding

我看到 Silverlight 5 购买了样式绑定。试图将它应用到 ListBox 控件中，以进行多选。我有以下 XAML ListBox（代码在 WPF 应用程序中工作）。

```
 <ListBox ItemsSource="{Binding Values}" SelectionMode="Multiple">
        <ListBox.ItemContainerStyle>
            <Style TargetType="ListBoxItem">
                <Setter Property="IsSelected" Value="{Binding Path=IsSelected, Mode=TwoWay}"/>
            </Style>
        </ListBox.ItemContainerStyle>
        <ListBox.ItemTemplate>
            <DataTemplate DataType="ListBoxItem">
                <TextBlock Text="{Binding DisplayValue}"/>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

当我运行它时，我得到一个绑定错误，它似乎试图在“值”集合的类型上查找 IsSelected 属性，而不是该集合中的每个单独项目。有没有其他人经历过这个？

**更新** 添加完整代码重现，需要滚动列表框才能看到输出日志中的错误

```
public class ValueViewModel : INotifyPropertyChanged
{
    private bool _isSelected;
    public bool IsSelected
    {
        get { return _isSelected; }
        set
        {
            _isSelected = value;
            OnPropertyChanged("IsSelected");
        }
    }

    private string _displayValue;
    public string DisplayValue
    {
        get { return _displayValue; }
        set
        {
            _displayValue = value;
            OnPropertyChanged("DisplayValue");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
}

public class MainPageViewModel : INotifyPropertyChanged
{

    public ObservableCollection<ValueViewModel> _values;
    public ObservableCollection<ValueViewModel> Values
    {
        get { return _values; }
        set
        {
            _values = value;
            OnPropertyChanged("Values");
        }
    }

    public MainPageViewModel()
    {
        Values = new ObservableCollection<ValueViewModel>();

        for (var i = 0; i < 50; i++)
            Values.Add(new ValueViewModel() { DisplayValue = i.ToString(), IsSelected = (i % 5) == 0 });
    }

    public event PropertyChangedEventHandler PropertyChanged;
    protected void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

和 XAML：

```
<Grid x:Name="LayoutRoot" Background="White" >
    <Grid.Resources>
        <viewmodels:MainPageViewModel x:Key="vmMainPage"/>
    </Grid.Resources>
    <Grid x:Name="workGrid" DataContext="{Binding Source={StaticResource vmMainPage}}">
        <ListBox ItemsSource="{Binding Values}" SelectionMode="Multiple" Height="100">
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="IsSelected" Value="{Binding Path=IsSelected, Mode=TwoWay}"/>
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Margin="5" Text="{Binding DisplayValue}"/>
                        <TextBlock Margin="5" Text="{Binding IsSelected}"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Grid> 
```

**更新 2** 似乎围绕错误的问题是，在可滚动的情况下，如果您选择项目 1，然后向下滚动并选择项目 49（在上面的示例中），则第一个选择会丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:30:36.687

我无法重现它。这对我来说可以。这是基于您的代码的完整工作示例。我确实注意到的一个问题是，当呈现 ListBoxItem 时，它会自动将数据对象上的属性设置为 false，而不管它是否一开始就为 true。因此，如果您加载一个列表并将其中的一些项目设置为预选，则在呈现 ListBoxItems 时，所有项目都将被取消选择。防止这种情况的一种方法是使用 Dispatcher.BeginInvoke 并在那里设置所选项目。在下面的代码中查看我的评论。

XAML：

```
<UserControl x:Class="SilverlightApplication12.MainPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="300"
             d:DesignWidth="400">

    <Grid x:Name="LayoutRoot"
          Background="White">

        <ListBox ItemsSource="{Binding Entities}"
                 SelectionMode="Multiple">
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="IsSelected"
                            Value="{Binding Path=IsSelected, Mode=TwoWay}" />
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBox.ItemTemplate>
                <DataTemplate DataType="ListBoxItem">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Name}" />
                        <TextBlock Margin="10 0 0 0"
                                   Text="IsSelected:" />
                        <TextBlock Margin="5 0 0 0"
                                   Text="{Binding IsSelected}"></TextBlock>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

    </Grid>
</UserControl> 
```

代码隐藏+实体类：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

namespace SilverlightApplication12
{
    public partial class MainPage : UserControl, INotifyPropertyChanged
    {
        private ObservableCollection<MyEntity> _Entities;

        public ObservableCollection<MyEntity> Entities
        {
            get { return _Entities; }
            set
            {
                _Entities = value;
                OnPropertyChanged("Entities");
            }
        }

        public MainPage()
        {
            InitializeComponent();

            Entities = new ObservableCollection<MyEntity>();
            Entities.Add(new MyEntity()
            {
                Name = "One",
                IsSelected = false,
            });
            Entities.Add(new MyEntity()
            {
                Name = "Two",
                IsSelected = true,
                //Even though this is initially true it does not matter. 
                //When the ListBoxItem is rendered it sets the property to false. 
            });
            Entities.Add(new MyEntity()
            {
                Name = "Three",
                IsSelected = false,
            });

            LayoutRoot.DataContext = this;

            //Enable the following line to set the 2nd item to selected when the page is loaded. 
            //Dispatcher.BeginInvoke(() => Entities[1].IsSelected = true);
        }

        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }

    public class MyEntity : INotifyPropertyChanged
    {
        private string _Name;

        public string Name
        {
            get { return _Name; }
            set
            {
                _Name = value;
                OnPropertyChanged("Name");
            }
        }

        private bool _IsSelected;

        public bool IsSelected
        {
            get
            {
                return _IsSelected;
            }
            set
            {
                _IsSelected = value;
                OnPropertyChanged("IsSelected");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:26:17.773

所以我设法找到了一个似乎可以满足我需要的工作。一旦触发 Loaded 事件，它将设置已加载的值。它包装了 MouseDown 事件来设置选择状态。它不是真正的数据绑定，但可以完成工作，并且仍然保持 View 的代码干净。

```
 <ListBox ItemsSource="{Binding Values}" SelectionMode="Multiple" Height="100">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Margin="2" Text="{Binding DisplayValue, Mode=TwoWay}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Loaded">
                            <ei:ChangePropertyAction 
                                        TargetObject="{Binding RelativeSource={RelativeSource AncestorType=ListBoxItem}}"
                                        PropertyName="IsSelected" 
                                        Value="{Binding IsSelected}"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <ei:ChangePropertyAction 
                                        TargetObject="{Binding}"
                                        PropertyName="IsSelected" 
                                        Value="{Binding IsSelected, Converter={StaticResource invertBooleanConverter}}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>  
                </TextBlock>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:18:14.117

除了这个，我觉得一切都`<DataTemplate DataType="ListBoxItem">`很好。

* * *

如果 Values 集合是 ListBoxItems 的集合，则不需要 IsSelected 绑定。

否则，您的 DataTemplate 上的 DataType 是错误的，应该留空。

# python - 将大小函数的matlab代码转换为python

> ID：15655492
> 
> 赞同：-3
> 
> 时间：2013-03-27T09:30:43.713
> 
> 标签：python, matlab

代码 `fill_value(1,1,:) = [0; 255; 255];` 有什么作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:47:54.073

1.  了解它的作用
2.  阅读[Python 图像库的文档](http://www.pythonware.com/products/pil/)
3.  编写 Python 代码

# c# - 日期时间字段的反序列化问题

> ID：15655495
> 
> 赞同：0
> 
> 时间：2013-03-27T09:31:06.117
> 
> 标签：c#, json.net, deserialization

反序列化 JSON 的最佳方法是什么

我有以下 JSON

```
"_created" : { 
                "$dt": "2013-03-26T16:45:20Z" 
             } 
```

我想得到对象的领域，像这样 -`DataTime Created {get; set;}`

json.net [http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)专家的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:57:32.127

最简单的方法是创建 JsonConvertor

```
public class MongoDbDateTimeConverter : DateTimeConverterBase
    {
        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            var jObject = JObject.Load(reader);

            return jObject["$dt"].Value<DateTime>();
        }

        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            throw new NotImplementedException();
        }
    } 
```

并将其与财产一起使用

```
[JsonConverter(typeof(MongoDbDateTimeConverter))]
public DateTime Created { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:43:15.687

您可以使用[NewtonSoft](http://james.newtonking.com/projects/json/help/index.html?topic=html/N_Newtonsoft_Json.htm)的 JSON 序列化器/反序列化器，对我来说没问题。

[Nuget](http://www.nuget.org/packages/Newtonsoft.Json)包

[MediaTypeFormatter 示例](http://code.msdn.microsoft.com/Using-JSONNET-with-ASPNET-b2423706)

将以下 MediaTypeFormatter 添加到 GlobalConfiguration 中，如下所示：

```
GlobalConfiguration.Configuration.Formatters.Remove(GlobalConfiguration.Configuration.Formatters.XmlFormatter);
GlobalConfiguration.Configuration.Formatters.Insert(0, new JsonFormatter()); 
```

媒体类型格式化程序：

```
public class JsonFormatter : MediaTypeFormatter
{
    private const string WesternEuropeStandardTime = "W. Europe Standard Time";
    private TimeZoneInfo timeZoneInfo;

    public JsonFormatter()
    {
        SupportedMediaTypes.Add(new System.Net.Http.Headers.MediaTypeHeaderValue("application/json"));
        this.timeZoneInfo = TimeZoneInfo.FindSystemTimeZoneById(WesternEuropeStandardTime);
    }

    public override bool CanReadType(Type type)
    {
        return true;
    }

    public override bool CanWriteType(Type type)
    {
        return true;
    }

    public override Task<object> ReadFromStreamAsync(Type type, Stream readStream, System.Net.Http.HttpContent content, IFormatterLogger formatterLogger)
    {
        Task<object> task = Task<object>.Factory.StartNew(() =>
        {
            JsonSerializerSettings settings = new JsonSerializerSettings()
            {
                NullValueHandling = NullValueHandling.Ignore,
            };

            StreamReader sr = new StreamReader(readStream);
            JsonTextReader jreader = new JsonTextReader(sr);

            JsonSerializer ser = new JsonSerializer();
            ser.Converters.Add(new DateTimeConverter(this.timeZoneInfo) { DateTimeFormat = "o" });

            return ser.Deserialize(jreader, type);
        });

        return task;
    }

    public override Task WriteToStreamAsync(Type type, object value, Stream writeStream, System.Net.Http.HttpContent content, System.Net.TransportContext transportContext)
    {
        Task task = Task.Factory.StartNew(() =>
        {
            JsonSerializerSettings settings = new JsonSerializerSettings()
            {
                NullValueHandling = NullValueHandling.Ignore,
            };

            string json = JsonConvert.SerializeObject(
                value, 
                Formatting.Indented,
                new JsonConverter[1] { new DateTimeConverter(this.timeZoneInfo) { DateTimeFormat = "o" } });

            byte[] buf = System.Text.Encoding.Default.GetBytes(json);
            writeStream.Write(buf, 0, buf.Length);
            writeStream.Flush();
        });

        return task;
    }

    private class DateTimeConverter : IsoDateTimeConverter
    {
        private TimeZoneInfo timeZoneInfo;

        public DateTimeConverter(TimeZoneInfo timeZoneInfo)
        {
            this.timeZoneInfo = timeZoneInfo;
        }

        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            DateTime? date = value as DateTime?;
            if (date.HasValue && DateTime.MinValue != date.Value && DateTime.MaxValue != date.Value)
            {
                TimeSpan timeZoneOffset = this.timeZoneInfo.GetUtcOffset(date.Value);
                value = DateTime.SpecifyKind(date.Value - timeZoneOffset, DateTimeKind.Utc);
            }

            base.WriteJson(writer, value, serializer);
        }

        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            object result = base.ReadJson(reader, objectType, existingValue, serializer);

            DateTime? date = result as DateTime?;
            if (date.HasValue && DateTime.MinValue != date.Value && DateTime.MaxValue != date.Value)
            {
                TimeSpan timeZoneOffset = this.timeZoneInfo.GetUtcOffset(date.Value);
                result = DateTime.SpecifyKind(date.Value + timeZoneOffset, DateTimeKind.Utc);
            }

            return result;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:03:38.467

如果你正在使用`json.NET`

尝试这样`serialize`的`datetime`字段或由字段`object`组成的`datetime`字段：

```
JsonSerializerSettings microsoftDateFormatSettings = new JsonSerializerSettings
            {
                DateFormatHandling = DateFormatHandling.MicrosoftDateFormat
            };
string serializedObject= Newtonsoft.Json
                     .JsonConvert
                     .SerializeObject(data, microsoftDateFormatSettings); 
```

如果已使用`JSON.NET`:)完成序列化，它可以正常工作

然后你就可以成功反序列化回来

```
var myobject = Newtonsoft.Json.JsonConvert.DeserializeObject(serializedObject); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T09:34:26.887

如果您询问的是 C# 中的 JSON 解析器，那么这更像是谷歌的事情。去那里搜索。有很多可用的。

如果您询问如何将此字符串解析为 DateTime，那么`DateTime.TryParse()`将为您提供帮助。您可以通过提供的字符串格式来帮助它，例如`yyyy-MM-ddTHH:mm:ss`.

# java - JPA、复杂对象图和序列化

> ID：15655496
> 
> 赞同：0
> 
> 时间：2013-03-27T09:31:07.607
> 
> 标签：java, database, jpa, jdo

我有一个“项目”实体/类，其中包括许多“复杂”字段，例如作为具有许多不同可能实现的接口引用。举个例子：一个接口属性， T 几乎可以是任何类型（与我实现的类型一样多）。

我使用 JPA。对于这些字段，我别无选择，只能将它们实际序列化以存储它们。尽管我不需要在查询中使用这些对象，但这显然会导致一些问题，例如开始时的维护/更新。

我有两个问题：

1）如果我的序列化类中有“重大”更改（大部分时间序列化更改处理得很好），是否有一个“技巧”可以让我的数据库保持最新？

2) 转向 JDO 会有帮助吗？我对 JDO 的经验很少，但我的理解是，使用 JDO，表中的序列化对象永远不会发生（但是如何处理更改？）。为了支持 2）我还必须补充一点，我拥有的对象图可能非常复杂，例如可能涉及 10 个表，只是为了检索一个完整的“项目”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:44:50.400

JDO 显然支持接口字段的持久性（但后来 DataNucleus JPA 也允许它们的持久性，但作为供应商扩展）。让某个接口字段成为任何可能的类型之一会给**RDBMS**而不是 JDO 本身带来问题。底层数据存储更多是您的问题（无法充分镜像您的模型），许多其他数据存储之一可以帮助您解决这个问题。例如，DataNucleus JDO/JPA 支持 GAE/Datastore、Neo4j、MongoDB、HBase、ODF、Excel 等，并简单地将相关对象的“id”保存在拥有对象表示的“列”（或等效项）中......所以这样的重大变化会比你现在拥有的要少得多

# jquery - html元素附加到DOM后的回调

> ID：15655499
> 
> 赞同：1
> 
> 时间：2013-03-27T09:31:10.003
> 
> 标签：jquery, dom, callback

假设我有以下功能：

```
function createDiv(){
  var div = $("<div>");
  //here specify a callback to be triggered after the div has been attached to the DOM.
  return div;
} 
```

div 元素将附加到 DOM 主体，*假设我不知道它何时会真正成为 DOM 的一部分*。但最终应用程序的其他部分将负责将元素附加到活动 DOM。有了 createDiv 函数中的这个**假设**，我希望有一个回调来执行仅在元素位于 DOM 中之后才有意义的进一步处理。

这种类型的**回调**可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:36:32.913

任何动态创建的元素只有在调用其他方法将其附加到 DOMtree 后才会附加到 DOM，例如、`append()`等。`html()``text()`

在这里，在你的函数中，你只是创建一个元素并返回它。所以这实际上并没有附加到 DOM ......创建的 div 应该先附加到 DOM，然后你可以指定回调在附加后触发..

例子，

```
function createDiv(){
 var div = $("<div>");

return div;
}

$(function(){
   var DivElement=createDiv();
   $('body').append(DivElement); //so now you are sure the element is in the DOM.
}); 
```

# jquery - 了解 Jquery 承诺

> ID：15655505
> 
> 赞同：0
> 
> 时间：2013-03-27T09:31:28.290
> 
> 标签：jquery, backbone.js

我一直在通过使用来研究 Jquery 的承诺`when`，我想知道它是否能够满足我的场景，或者我是否需要重新考虑我是如何做事的。

所以我有一个带有几个听众的backbone.js模型，例如：

```
this.on('supplier:change', function(){
    $.get('/supplier_details', function(data){
        // fill in some fields here
        anotherAjaxCallInAnotherFunction();
    });
});

anotherAjaxCallInAnotherFunction: function(){
    // Another Ajax call
} 
```

如果我这样使用`when`，`model.set({supplier: 'ss'}).done();`promise 是否能够等到所有 Ajax 调用结束？

如果我在我的主干模型中设置需要多个 Ajax 调用的多个属性怎么办？承诺会封装模型的整个设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:33:03.273

One thing I didn't realise until I actually tried this was that you CAN chain Ajaz calls in this way, you just need to be a bit creative with your coding.

The easiest way to chain these sort of calls is like so:

```
this.on('supplier:change', function(){
    return $.get('/supplier_details').then(function(data){
        return anotherAjaxCallInAnotherFunction();
    });
}

function anotherAjaxCallInAnotherFunction(){
    return $.ajax();
} 
```

And just chaining the deferred object like this will allow you to not only make the calls async but also do it without locking the browser thread.

You can find more info here: [http://api.jquery.com/jQuery.Deferred/](http://api.jquery.com/jQuery.Deferred/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:52:28.653

你可以试试：

```
$.when( firstAjaxCall, secondAjaxCall )
  .done( 
      function(firstResp) { console.log(firstResp); },  
      function(secondResp) { console.log(secondResp); } 
  ); 
```

或者你可以`listenTo`是一个`sync`事件，当成功返回时`firstAjaxCall`，你可以调用`secondAjaxCall`：[Backbone Events](http://documentcloud.github.com/backbone/#Events-catalog)

> "sync" (model, resp, options) — 当模型（或集合）与服务器成功同步时。

# php - 如何在 PHP 中将 json 数据转换为可访问的数组？

> ID：15655509
> 
> 赞同：0
> 
> 时间：2013-03-27T09:31:39.503
> 
> 标签：php, arrays, json

我从 Google API 获得一个 JSON 字体列表，我想在我的 PHP 应用程序中使用它。我需要一种更容易访问这个 JSON 对象的方法。例如，我希望能够轻松调用字体及其属性，如下所示：

```
$font['abc']['variants'] 
```

... ETC。

所以 JSON 看起来像这样：

```
$fonts = '
{
 "kind": "webfonts#webfontList",
 "items": [
  {
   "kind": "webfonts#webfont",
   "family": "Yesteryear",
   "variants": [
    "regular"
   ],
   "subsets": [
    "latin"
   ]
  },
  {
   "kind": "webfonts#webfont",
   "family": "Zeyada",
   "variants": [
    "regular"
   ],
   "subsets": [
    "latin"
   ]
  }
]
}
'; 
```

我正在使用它来将其解析为一个数组：

```
$fonts = json_decode( $fonts, true );
$var_dump( $fonts['items'] ); 
```

一个 var dump 会显示：

```
array (size=2)
  0 => 
    array (size=4)
      'kind' => string 'webfonts#webfont' (length=16)
      'family' => string 'Yesteryear' (length=10)
      'variants' => 
        array (size=1)
          0 => string 'regular' (length=7)
      'subsets' => 
        array (size=1)
          0 => string 'latin' (length=5)
  1 => 
    array (size=4)
      'kind' => string 'webfonts#webfont' (length=16)
      'family' => string 'Zeyada' (length=6)
      'variants' => 
        array (size=1)
          0 => string 'regular' (length=7)
      'subsets' => 
        array (size=1)
          0 => string 'latin' (length=5) 
```

所以使用上面的数组，我不能轻易地检索到我想要的数据。所以我不确定这是否意味着我必须重建阵列，如果是，如何重建？

感谢您的关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:35:32.980

试试这个来获取值：在这里你会得到里面所有数组的值`items`

```
foreach($fonts['items'] as $val){

    echo $val['kind'];
    echo $val['family'];

    print_r($val['variants']);
    echo "======================<br>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:39:46.800

I think you are looking for something like this: [Example](http://codepad.viper-7.com/GFidmD)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:49:07.730

希望这个片段可以帮助你

```
$res1=json_decode($fonts,true);
$res2=$res1['items'];
$count=count($res2);
for($i=0;$i< $count;$i++)
{
    echo $res2[$i]['variants'][0];
} 
```

# ios - 报警应用说明

> ID：15655510
> 
> 赞同：0
> 
> 时间：2013-03-27T09:31:49.150
> 
> 标签：ios, objective-c, xcode, uitableview

我正在创建一个警报应用程序。如何在默认 iphone 闹钟中使用相同的闹钟应用程序？我想做和图片一样的事情。请给我一个建议，我是 iOS 新手。

[样本图像](http://postimage.org/gallery/bu6b7reg/d065dc97/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:49:40.390

这被称为，你可以[在这里](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)`Table Views`找到如何使用它们 然后你需要学习如何使用你可以在[这里找到它](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html)`Custom Table View Cells`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:49:10.303

UI 很简单，您可以在[此](http://www.raywenderlich.com/tutorials)站点上找到一些教程。您需要了解的唯一最重要的事情是音频会话。请查看[音频会话编程指南](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Introduction/Introduction.html) 音频会话很重要，因为您需要在应用程序处于后台/播放其他声音时管理您的警报。

# visual-studio-2012 - 问题：在 jenkins 服务器上设置 MSTest2012 而不安装 VS2012

> ID：15655511
> 
> 赞同：0
> 
> 时间：2013-03-27T09:32:01.010
> 
> 标签：visual-studio-2012, jenkins, mstest

我试图在**没有安装 Visual Studio 2012**`MSTest2012`的 jenkins 服务器上进行设置。到目前为止，我没有收到任何“Assembly not found”错误消息。

 **我打算做一些功能测试，所以我将一个`vs2012`项目从我的本地机器复制到我的 jenkins 服务器并在 cmd 中尝试了类似的操作：

```
C:\VS2011Stub\Common7\IDE>MSTest.exe /testcontainer:D:\Users\Jenkins\Documents\V
isualStudio2012\Projects\HelloWorld\UnitTestProject4\bin\Debug\UnitTestProject4.
dll 
```

> Microsoft (R) 测试执行命令行工具版本 11.0.50727.1 版权所有 (c) Microsoft Corporation。版权所有。
> 
> 正在加载 D:\Users\Jenkins\Documents\VisualStudio2012\Projects\HelloWorld\UnitTest Project4\bin\Debug\UnitTestProject4.dll... D:\Users\Jenkins\Documents\VisualStudio2012\Projects\HelloWorld\UnitTestProject4\bin\Debug\ UnitTestProject4.dll **Ein Aufrufziel hat einen Ausnahmefehler verursacht。**

此错误消息（Ein Aufrufziel hat einen Ausnahmefehler verursacht -> in English: **Exception has been throwed by the target of an invocation** .）非常……无济于事。

在我的**本地机器**上，相同的 cmd 代码如下所示：

![在此处输入图像描述](../Images/f88076a136b3ebf97cdd9548e4e298b4.png)

我不知道该怎么做...任何建议，解决方案？？？也许有人有同样的问题：/也许 mstest2012 仍然需要其他文件才能正常运行？

我对每一次帮助感到高兴！

**编辑：** 我按照这些[步骤](http://sparethought.wordpress.com/2011/07/12/mstest-2010-on-the-build-server-without-vs2010-installed/)在我的詹金斯服务器上构建 MSTest.exe (VS2012) 作为独立程序

**edit2: !!!问题解决了!!!**

我复制的 GAC 文件夹中的一些 Microsoft.VisualStudio.QualityTools.#.dll 不包含版本 = 11.0.0.0，所以我打开 C:\Windows\Assembly 并查看了 Microsoft.VisualStudio.QualityTools.# 并检查了可用版本并在我的 jenkins 服务器上添加了缺少的最新 11.0.0.0 Microsoft.VisualStudio.QualityTools.#.dll 文件，并通过 gacutil（版本 4.0.30319.17929）注册了它们。

MSTest 现在可以作为独立程序运行，无需安装 MS Visual Studio 2012。

**如果有人需要说明文件，请询问，我会上传=）****

# css - 将 div 放在其他元素上

> ID：15655529
> 
> 赞同：2
> 
> 时间：2013-03-27T09:32:42.157
> 
> 标签：css

我试图在 div 上放置一个图标，但覆盖的 div 将其余内容向下推。我被卡住了，虽然它应该很容易。请看看[这个小提琴](http://jsfiddle.net/EESAc/1/)，让我知道我做错了什么（除了在设计中使用表格！）

```
body{
 background-color: #666;   
}
.sizesbg {
    background-color:#fff;
    -webkit-border-radius: 10px;
    border-radius: 10px;
    width: 170px;
    text-align: center;
}
.soldicon {
    background: url("http://www.oroeora.gr/preowned/images/sold_curl_small.png") no-repeat scroll left top transparent;
    height: 155px;
    left: 0;
    top: 0;
    width: 170px;
    z-index: 2;
}
<table>
<tr>
    <td class="sizesbg">
        <div style="width:150px; overflow:hidden; max-height:140px; max-width:150px; min-height:100px;"> 
            <img src="http://www.carfolio.com/images/dbimages/zgas/manufacturers/id/843/bmw-logo.png" width="140" height="140">
        </div>
    </td>

    <td class="sizesbg">
        <div class="soldicon"></div>
        <div style="width:150px; overflow:hidden; max-height:140px; max-width:150px; min-height:100px;"> 
            <img src="http://mcurrent.name/atarihistory/warner_books_logo.gif" width="140" height="140">
        </div>
    </td>        
    <td class="sizesbg">
        <div style="width:150px; overflow:hidden; max-height:140px; max-width:150px; min-height:100px;"> 
            <img src="http://www.mindxstudio.com/images/mindxstudio-logo-icon.jpg" width="140" height="140">
        </div>
    </td>                
</tr>
</table> 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T09:35:04.733

在 div 上使用`position:absolute;`，但当然父元素需要`position:relative;`保留在正确的位置

像这样：http: [//jsfiddle.net/EESAc/5/](http://jsfiddle.net/EESAc/5/)

**编辑：** 这在 Chrome 中运行良好......但其他一些浏览器有问题（例如 Firefox），因为没有定义表格元素的位置属性，你应该使用块元素......所以如果你使用另一个它可以工作`div`围绕图像并将其位置设置为相对。我为一个想法添加了另一个快速小提琴：http: [//jsfiddle.net/EESAc/9/](http://jsfiddle.net/EESAc/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:40:54.683

**[演示](http://jsfiddle.net/ssilas777/2YfnS/)**

将您的 CSS 更改为：-

```
.soldicon {
    background: url("http://www.oroeora.gr/preowned/images/sold_curl_small.png") no-repeat scroll left top transparent;
    display: block;
    height: 155px;
    left: -7;
    top: 0;
    width: 170px;
    z-index: 2;
    position:absolute; // Change to absolute positioning
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-19T11:52:52.000

在我的情况下（包含的弹出元素大于包含元素）位置：绝对；没有完全按照我的需要工作（滚动条被添加到包含元素上，并且包含的​​弹出窗口没有完全显示）。所以解决方案是：

```
position: fixed; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T09:36:11.803

给类`.soldicon`a`position: absolute;`这样该元素将被从文档流中取出，并且不会影响其他元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T09:37:57.037

尝试将以下内容添加到您的 .soldicon css：

位置：绝对；

# android - 如何让 .apk 的 Android 应用程序在 Eclipse 中分发？

> ID：15655535
> 
> 赞同：1
> 
> 时间：2013-03-27T09:32:56.340
> 
> 标签：android, eclipse, apk

我刚刚使用 Windows 7 + Eclipse 开发了一个 Android 应用程序。这个应用程序还使用`FacebookSDK`了我在名为**MyFBFriends**的主应用程序中添加的库。

我的应用程序在 Android 虚拟设备管理器 (AVD) 中运行顺畅。

*现在我想`.apk`从 eclipse 中获取我的应用程序文件，以便我可以将它放在我的个人网站上

我应该如何进行？

我寻找谷歌，但不同的教程，如使用命令提示符、未签名等让我感到困惑。有些人建议转到 bin 文件夹（在构建应用程序之后）并从那里复制 .apk 但我在那里看不到任何 .apk。

还有我添加的那个`FacebookSDK`库呢？它会自动出现在我的 .apk 文件中吗？或者图书馆有什么特殊的程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:36:49.417

当您将其添加为应用程序的库时，您的 FacebookSDK 将自动添加到 .apk 文件中。对于 .apk，请在构建应用程序后查看工作区中的 bin 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:39:36.990

Right click on the eclipse and select export and follow the instructions. Read this tutorial on [how to export your application form Eclipse](http://mobile.tutsplus.com/tutorials/android/publish-to-android-market/).

Yeap all the libraries you use will be added to the .apk file.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:47:14.697

[这](https://stackoverflow.com/questions/7801491/how-do-you-compile-an-android-project-into-an-apk-file-in-eclipse-without-launc)应该解释一下。如果您的问题的解决方案不在这里，请告诉我。我会尝试以另一种方式帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T09:38:03.113

是的，图书馆将在 apk 的“内部”。

您可以右键单击您的项目 -> Android 工具 -> 导出已签名/未签名的应用程序包。

构建后它也应该在您的 bin 文件夹中。

# php - 从 MySQL 表中获取列名

> ID：15655540
> 
> 赞同：0
> 
> 时间：2013-03-27T09:33:08.617
> 
> 标签：php, mysql, sql

我的 MySQL 数据库中有一个表，如下所示：

```
Table: VAAW
Columns:
ID  int(11) PK AI
Voornaam    varchar(45) 
Achternaam  varchar(45) 
Adres   varchar(45) 
Woonplaats  varchar(45) 
```

我在以下 php 代码中使用此表：

```
$strSQL     = "SELECT * FROM NAW.VAAW";
$objQuery   = mysql_query($strSQL);
while($objResult = mysql_fetch_array($objQuery))
{
$Voornaam   = $objResult["Voornaam"];
$Achternaam = $objResult["Achternaam"];
$Adres      = $objResult["Adres"];
$Woonplaats = $objResult["Woonplaats"];

$string     = $_POST['naam'];

$vaaw       = array("(voornaam)", "(achternaam)", "(woonplaats)", "(adres)");
$vervang    = array("$Voornaam", "$Achternaam", "$Woonplaats","$Adres");

echo str_replace($vaaw, $vervang, $string);
echo '<br>';
} 
```

我用它做什么：
我有一个表单，我可以在文本框中添加一些 tekst，当我提交它时会回显结果。例如，如果“Voornaam”列包含“Jack”行，并且当我在表单中的文本框中输入：Hey (voornaam)，它应该输出：Hey Jack。

我真的不知道如何问这个问题，所以我举个例子。如果我出于某种原因想要更改数据库中的列名，我将不得不根据列名更改来更改此源代码。

这个例子：

如果我将列名“voornaam”更改为“Vnaam”，我也必须更改

```
$Voornaam  = $objResult["Voornaam"]; 
```

至

```
$Voornaam  = $objResult["Vnaam"]; 
```

所以我的问题是，是否有任何方法可以为第一列、第二列等设置某种标准，所以我可以在代码中添加它，并且每次更改列名时都不必更改源代码。也许有一个查询功能可以做到这一点？我知道这个问题有点含糊，但我希望你能理解，如果不能随时在评论中提问。任何帮助都会很棒，因为我不知道该怎么做！

***注意：*** 我知道我不应该使用 mysql_*，我稍后会切换到 PDO。所以请不要再提这个了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:36:35.347

如果你使用`print_r($objResult)`，你会看到你有两个`numerical`和`strings`键的结果。

所以，而不是`$Voornaam = $objResult["Vnaam"]`你可以使用`$Voornaam = $objResult[0]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:36:24.920

您可以通过那里的索引调用列，例如：

```
$Voornaam  = $objResult[0]; //if the first column of the table is "voornaam" 
```

但是你必须知道列顺序......

该[`mysql_fetch_array`](http://php.net/manual/en/function.mysql-fetch-array.php)函数可以有第二个参数，如：**MYSQL_ASSOC、MYSQL_NUM 等 MYSQL_BOTH**默认为 MYSQL_BOTH，它为每一列返回一个数组，一个带有列名称的键，另一个带有列索引的键。

# ios - 如何让更多按钮始终显示更多视图？

> ID：15655546
> 
> 赞同：0
> 
> 时间：2013-03-27T09:33:20.693
> 
> 标签：ios, objective-c, uitabbar

我正在为带有标签栏的 ios 开发应用程序。我在栏上有超过 5 个按钮，所以在 iphone 上我有更多的按钮。现在，假设我有这个按钮： Button1 Button2 Button3 Button4 More（和内部更多） Button5 Button6。如果我单击更多，然后单击 Button5，我将进入相对于 Button5 的视图。然后我单击 Button2（不在“更多”中）并进入相对于 Button2 的视图。到目前为止，一切都很好。现在，如果我单击更多，我不会转到更多选项卡，而是返回相对于 Button5 的视图。我如何使更多按钮始终转到更多视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:38:10.013

您无需添加更多按钮。只需将视图控制器设置为 UITabBarController

```
- (void)setViewControllers:(NSArray *)viewControllers animated:(BOOL)animated 
```

如果您有超过 5 个视图控制器，它将自动创建一个更多按钮！即 NSArray 的计数大于 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:31:33.763

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    UIViewController *viewController1 = [[UIViewController alloc] init];
    UIViewController *viewController2 = [[UIViewController alloc] init];
    UIViewController *viewController3 = [[UIViewController alloc] init];
    UIViewController *viewController4 = [[UIViewController alloc] init];
    UIViewController *viewController5 = [[UIViewController alloc] init];
    UIViewController *viewController6 = [[UIViewController alloc] init];
    UIViewController *viewController7 = [[UIViewController alloc] init];
    UIViewController *viewController8 = [[UIViewController alloc] init];
    UIViewController *viewController9 = [[UIViewController alloc] init];

    [viewController1.view setBackgroundColor:[UIColor whiteColor]];
    [viewController2.view setBackgroundColor:[UIColor redColor]];
    [viewController3.view setBackgroundColor:[UIColor greenColor]];
    [viewController4.view setBackgroundColor:[UIColor grayColor]];
    [viewController5.view setBackgroundColor:[UIColor blueColor]];
    [viewController6.view setBackgroundColor:[UIColor yellowColor]];
    [viewController7.view setBackgroundColor:[UIColor brownColor]];
    [viewController8.view setBackgroundColor:[UIColor magentaColor]];
    [viewController9.view setBackgroundColor:[UIColor purpleColor]];

    [viewController1 setTitle:@"one"];
    [viewController2 setTitle:@"two"];
    [viewController3 setTitle:@"three"];
    [viewController4 setTitle:@"four"];
    [viewController5 setTitle:@"five"];
    [viewController6 setTitle:@"six"];
    [viewController7 setTitle:@"seven"];
    [viewController8 setTitle:@"eight"];
    [viewController9 setTitle:@"nine"];

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[viewController1, viewController2, viewController3, viewController4, viewController5, viewController6, viewController7, viewController8, viewController9];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

我添加了一个我尝试过的示例 AppDelegate 代码，它对我来说绝对没问题。让我知道你在这方面遇到了什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:24:48.630

我在我的应用程序 delegate.m 中使用了这段代码来解决问题

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {
    UITabBarController* tabBarController2 = (UITabBarController*)self.window.rootViewController;
    if (tabBarController2.selectedIndex < 4) {
        [tabBarController2.moreNavigationController popViewControllerAnimated:NO];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T10:05:59.873

您可以做的另一种方法是，每当用户按下更多按钮时，第一个按钮就会被删除，而其他按钮会被添加。基本上，您可以创建一个数组并将所有按钮保留在其中。然后根据按下的按钮，您可以导航到该特定视图。

例如：

最初你有： `Button1` `Button2` `Button3` `Button4` `Next`

点击下一步后：`Prev` `Button3` `Button4` `Button5` `Button6`

# java - Jsoup 元刷新重定向

> ID：15655547
> 
> 赞同：0
> 
> 时间：2013-03-27T09:33:21.600
> 
> 标签：java, redirect, refresh, jsoup, meta

我想从一个非常相似的元刷新重定向中获取一个 HTML 页面，因为有问题[jsoup 可以处理元刷新重定向](https://stackoverflow.com/questions/7343974/can-jsoup-handle-meta-refresh-redirect)。

但我无法让它工作。我想在[http://synchronkartei.de](http://synchronkartei.de)上进行搜索。我有以下代码：

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class SynchronkarteiScraper {
  public static void main(String[] args) throws Exception{
    Document doc = Jsoup.connect("https://www.synchronkartei.de/search.php")
                                        .data("cat", "2")
                                        .data("search", "Thomas Danneberg")
                                        .data("action", "search")
                                        .followRedirects(true)
                                        .get();
    Elements meta = doc.select("html head meta");                                  
    for (final Element m : meta){
      if (m.attr("http-equiv").contains("refresh")){
        doc = Jsoup.connect(m.baseUri()+m.attr("content").split("=")[1]).get();
      }
    }

    System.out.println(doc.body().toString());
  }
} 
```

这会进行搜索，这会导致一个临时站点被刷新，从而打开真实的结果页面。这与访问[http://synchronkartei.de](http://synchronkartei.de)相同，从下拉框中选择“Sprecher”，在文本字段中输入“Thomas Danneberg”并按 Enter。

但是即使在提取刷新 URL 并进行第二次连接后，我仍然得到临时登陆页面的内容，可以在 body 的 prinln 中看到。

那么这里出了什么问题呢？

请注意，站点 synchronkartei.de 始终重定向到 HTTPS。由于它使用的是 StartCom 的证书，java 抱怨证书路径。要让上述代码片段正常工作，必须使用`-Djavax.net.ssl.trustStore=<path-to-keystore>`具有正确证书的 VM 参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T09:38:57.537

我不得不承认，我不是 Jsoup 方面的专家，但我知道 Synchronkartei 的一些细节。

Deutsche Synchronkartei 支持链接在 /search.xml 的 OpenSearchDescriptions。也就是说，您还可以使用`https://www.synchronkartei.de/search.php?search={searchTerms}`将您的搜索词带入会话。

您只需要一个带有会话 ID 的 cookie “sid”，Synchronkartei 为您提供。之后`https://www.synchronkartei.de/index.php?action=search`，无论您的推荐人如何，直接请求都会为您提供结果。

我的意思是，首先向`https://www.synchronkartei.de/search.php?search={searchTerms}`or发送请求`https://www.synchronkartei.de/search.php?cat={Category}&search={searchTerms}&action=search`（如上所述），如果 HTTP 结果为 200，则完全忽略结果，但确保会话 cookie 安全。之后，您提出一个请求，然后该请求`https://www.synchronkartei.de/index.php?action=search`应为您提供整个结果列表。

丰子

# java - Main.class.getResource() 和 jTextArea

> ID：15655548
> 
> 赞同：0
> 
> 时间：2013-03-27T09:33:25.977
> 
> 标签：java, swing, file-io, jtextarea, getresource

当我从 jar 文件中读取文件并将其放入 jTextArea 时，它会显示加密符号，而不是真实内容。

我在做什么：

```
public File loadReadme() {
    URL url = Main.class.getResource("/readme.txt");
    File file = null;

    try {
        JarURLConnection connection = (JarURLConnection) url
                .openConnection();
        file = new File(connection.getJarFileURL().toURI());

        if (file.exists()) {
            this.readme = file;
            System.out.println("all ok!");

        }
    } catch (Exception e) {
        System.out.println("not ok");
    }

    return file;
} 
```

然后我读了文件：

```
public ArrayList<String> readFileToArray(File file) {
    ArrayList<String> array = new ArrayList<String>();
    BufferedReader br = null;

    try {

        String sCurrentLine;
        br = new BufferedReader(new FileReader(file));
        while ((sCurrentLine = br.readLine()) != null) {
            String test = sCurrentLine;
            array.add(test);

        }

    } catch (IOException e) {
        System.out.println("not diese!");

    } finally {
        try {
            if (br != null)
                br.close();
        } catch (IOException ex) {
        }
    }
    return array;
} 
```

现在，我将 ArrayList 中的所有行放在 jTextArea 中，这向我展示了这样的内容：

PK����?����^��S?��3��� z_��
%�Q Tl?7��+�;���fK� �N��:k����� ]�Xk,������U"������q��\����%�Q#4x�|[���o�S{��:�aG�*sg�' .}����x����5��q���hpu�H���W�9���h2��Q����#���@7(�@�� ��F!��~��?����j�?\xA�/�Rr.�v�l�PK�bv�=

文本文件包含：

```
SELECTION:
----------
By clicking the CTRL Key and the left mouse button you go in the selection mode.
Now, by moving the mouse, you paint a rectangle on the map.

DOWNLOAD:
---------
By clicking on the download button, you start the download.
The default location for the tiles to download is: <your home> 
```

我确定该文件存在！有谁知道问题是什么？我的“getResource”正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:01:06.277

根据输出，我怀疑您的代码实际上读取了 JAR 文件本身（因为它以 开头`PK`）。为什么不使用下面的代码来读取文本文件：

```
Main.class.getResourceAsStream("/readme.txt") 
```

这将为您提供`InputStream`文本文件，而无需打开 JAR 文件等的麻烦。

然后，您可以将`InputStream`对象传递给`readFileToArray`方法（而不是`File`对象）并使用

```
br = new BufferedReader(new InputStreamReader(inputStream)); 
```

您的其余代码不需要任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:41:12.127

这似乎是一个**编码**问题。`FileReader`不允许您指定。尝试使用

```
br = new BufferedReader(new InputStreamReader(new FileInputStream(file), yourEncoding)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:29:25.587

你似乎在这里为自己做了太多的工作。您首先调用`getResource`，它会为您提供`readme.txt`JAR 文件中的条目的 URL，然后您获取该 URL，确定它指向的 JAR 文件，然后使用 a 打开该 JAR 文件`FileInputStream`并读取整个 JAR 文件。

相反，您可以简单地调用返回`.openStream()`的原始 URL，`getResource`这将为您提供一个`InputStream`您可以从中读取内容的`readme.txt`

```
br = new BufferedReader(new InputStreamReader(url.openStream(), "UTF-8")); 
```

（如果`readme.txt`未以 UTF-8 编码，则酌情更改该参数）

# php - 为什么链接查询数据库不起作用？

> ID：15655550
> 
> 赞同：-2
> 
> 时间：2013-03-27T09:33:33.353
> 
> 标签：php, mysql

我有一个显示链接的页面，所以当我单击该链接时，它应该将我带到另一个页面并查询数据库，以便我只能看到该特定链接的信息。但是现在它给了我一个问题，它与我在其他程序中使用的代码相同。我已经尝试了将近 2 个小时来解决这个问题。请下面是任何可以帮助您的代码。

```
First piece of code or page 
<?php 
$selector1 =("SELECT job_id, job_title, job_description, 
job_category, wantORoffering, address, cell, email, date_registered, 
user_id from h2s_job ORDER BY date_registered DESC LIMIT $offset, $rowsperpage");
$result_selector=$con->prepare($selector1);
$result_selector->execute();
while($row = $result_selector->fetch(PDO::FETCH_ASSOC)){
#substring 
$job_description = $row['job_description'];
$job_description  = wordwrap($job_description , 200);
$job_description  = explode("\n", $job_description );
$job_description  = $job_description [0] . '...';
#substring 
echo '<a href="jobdetails.php?job_id=$job_id"><div id="record" id ="record-">
<strong class="pic"><img src="images/nopic.png" ></strong>
<strong class="job_title"><h4>',$row['job_title'],'</h4></strong></br>
 <strong class ="desc"><p>',$job_description,'</p></strong></br>
  <strong class="contact"><p>',$row['cell'],'</strong></br>
<strong class="time"><p>',$row['date_registered'],'</strong></br>
</div></a>';
}?>

Second page 

<?php 

$selector =("SELECT  job_title, job_description, 
job_category, wantORoffering, address, cell, email, date_registered, 
user_id FROM  h2s_job WHERE job_id =".$_GET['job_id']);
$result_selector=$con->prepare($selector);
$result_selector->execute();
while($row = $result_selector->fetch(PDO::FETCH_ASSOC)){
#substring 
$job_description = $row['job_description'];
echo '<div id="record" id ="record-">
<strong class="pic"><img src="images/nopic.png" ></strong>
<strong class="job_title"><h4>',$row['job_title'],'</h4></strong></br>
 <strong class ="desc"><p>',$job_description,'</p></strong></br>
  <strong class="contact"><p>',$row['cell'],'</strong></br>
<strong class="time"><p>',$row['date_registered'],'</strong></br>
</div></a>';
}
?> 
```

我得到的错误

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column '$job_id' in 'where clause'' in C:\wamp\www\houseCurrent\jobdetails.php:98 Stack trace: #0 C:\wamp\www\houseCurrent\jobdetails.php(98): PDOStatement->execute() #1 {main} thrown in C:\wamp\www\houseCurrent\jobdetails.php on line 98 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:43:11.267

你一开始忘记添加`$job_id = $row['job_id'];`的概率`while`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:57:06.927

$job_id 似乎没有定义，并且使用 echo-statement 创建的链接不是您想要的（我期望...） Option1 没有分配 job_id 实际值（它分配字符串'$job_id'）。

选项 2 做到了，并将 job_id 分配给值 5。

```
<?php
$job_id = 5; //example

//OPTION 1 This would output to html => jobdetails.php?job_id=$job_id
echo '<a href="jobdetails.php?job_id=$job_id">test</a>';

//OPTION 2 This would output to html => jobdetails.php?job_id=5
echo '<a href="jobdetails.php?job_id=' . $job_id . '">test</a>';
?> 
```

你可以改变......（选项1）

```
echo '<a href="jobdetails.php?job_id=$job_id"><div id="record" id ="record-">
<strong class="pic"><img src="images/nopic.png" ></strong>
<strong class="job_title"><h4>',$row['job_title'],'</h4></strong></br>
 <strong class ="desc"><p>',$job_description,'</p></strong></br>
  <strong class="contact"><p>',$row['cell'],'</strong></br>
<strong class="time"><p>',$row['date_registered'],'</strong></br>
</div></a>'; 
```

至（选项 2）

```
echo '<a href="jobdetails.php?job_id=' . $job_id . '"><div id="record" id ="record-">
<strong class="pic"><img src="images/nopic.png" ></strong>
<strong class="job_title"><h4>' . $row['job_title'] . '</h4></strong></br>
 <strong class ="desc"><p>' . $job_description . '</p></strong></br>
  <strong class="contact"><p>' . $row['cell'] . '</strong></br>
<strong class="time"><p>' . $row['date_registered'] . '</strong></br>
</div></a>'; 
```

逗号已替换为句点，因为 . 用于字符串的连接。

# java - LinearLayout 和 ListView 在一个视图中？

> ID：15655552
> 
> 赞同：0
> 
> 时间：2013-03-27T09:33:57.913
> 
> 标签：java, android, xml, listview, android-listview

例子：

主要线性布局

|子线性布局|列表视图 |

ListView 有一组名称，它们会更改子线性布局的内容。现在我的主 LL 中有子 LL。如何正确添加 ListView，使用

```
arraylist<string> ar 
```

但我不知道如何正确使用列表适配器。

另一个问题：我可以每隔几秒用一个线程更新列表视图的内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:22:04.033

试试这个，每隔几秒更新一次。

```
handler=new Handler();
            final Runnable r = new Runnable()
            {
                public void run() 
                {
                    //Write your code here

                    handler.postDelayed(this, 100);
                }
            };

            handler.postDelayed(r,100); 
```

# c - 为什么在函数序言/尾声中使用 ebp？

> ID：15655553
> 
> 赞同：9
> 
> 时间：2013-03-27T09:34:04.113
> 
> 标签：c, optimization, assembly, x86

前段时间我在尝试编写汇编例程并将其与 C 程序链接，我发现我可以跳过标准的 C 调用序言结语

```
 push ebp
    mov ebp, esp
    (sub esp, 4
    ...
    mov esp, ebp)
    pop ebp 
```

就跳过这一切，就在旁边`esp`，就像

```
 mov eax, [esp+4]          ;; take argument
    mov [esp-4], eax          ;; use some local variable storage 
```

它似乎工作得很好。为什么使用这个 ebp - 可能是通过`ebp`更快的地址还是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T09:58:59.157

不需要使用堆栈帧，但肯定有一些优点：

首先，如果每个函数都使用相同的过程，我们可以利用这些知识通过反转过程轻松确定调用序列（调用堆栈）。我们知道，在一条`call`指令之后，`ESP`指向返回地址，而被调用函数首先要做的就是`push`当前的`EBP`，然后复制`ESP`到`EBP`. 因此，在任何时候，我们都可以查看指向的数据，`EBP`哪个是前一个`EBP`，而这`EBP+4`将是最后一个函数调用的返回地址。因此，我们可以使用类似（请原谅生锈的 C++）打印调用堆栈（假设为 32 位）：

```
void LogStack(DWORD ebp)
{
    DWORD prevEBP = *((DWORD*)ebp);
    DWORD retAddr = *((DWORD*)(ebp+4));

    if (retAddr == 0) return;

    HMODULE module;
    GetModuleHandleExA(GET_MODULE_HANDLE_EX_FLAG_FROM_ADDRESS, (const char*)retAddr, &module);
    char* fileName = new char[256];
    fileName[255] = 0;
    GetModuleFileNameA(module, fileName, 255);
    printf("0x%08x: %s\n", retAddr, fileName);
    delete [] fileName;
    if (prevEBP != 0) LogStack(prevEBP);
} 
```

然后，这将打印出直到那时为止的整个调用序列（嗯，它们的返回地址）。

此外，因为`EBP`除非您明确更新它，否则不会更改（与 不同`ESP`，当您`push`/时更改`pop`），通常更容易引用堆栈上相对于 的数据`EBP`，而不是相对于`ESP`，因为对于后者，您必须注意在函数开始和引用之间可能已调用的任何`push`/指令。`pop`

正如其他人所提到的，您应该避免使用*下面* `ESP`的堆栈地址，因为`call`您对其他函数所做的任何操作都可能会覆盖这些地址处的数据。相反，您应该在堆栈上保留空间供您的函数使用：

```
sub esp, [number of bytes to reserve] 
```

在此之后，堆栈的初始区域`ESP`和`ESP - [number of bytes reserved]`可安全使用之间的区域。在退出函数之前，您必须使用匹配释放保留的堆栈空间：

```
add esp, [number of bytes reserved] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-27T09:47:52.320

在调试代码时使用`EBP`很有帮助，因为它允许调试器遍历调用链中的堆栈帧。

> *它[创建]一个单向链表，将每个调用者的帧指针链接到一个函数。从例程的 EBP，您可以恢复函数的整个调用堆栈。*

请参阅[http://en.wikibooks.org/wiki/X86_Disassembly/Functions_and_Stack_Frames](http://en.wikibooks.org/wiki/X86_Disassembly/Functions_and_Stack_Frames)
尤其是它链接到的涵盖您的问题的页面：http: [//blogs.msdn.com/b/larryosterman/archive/2007/03/12 /fpo.aspx](http://blogs.msdn.com/b/larryosterman/archive/2007/03/12/fpo.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-27T09:35:44.070

它可以工作，但是，一旦你得到一个中断，处理器会将它的所有寄存器和标志推入堆栈，覆盖你的值。堆栈存在是有原因的，使用它...

# javascript - appendchild 中的上标 html 标记

> ID：15655555
> 
> 赞同：1
> 
> 时间：2013-03-27T09:34:06.140
> 
> 标签：javascript, html, dom

我的 js 文件在前端导出包含上标标记的文本。问题是在浏览器上`<sup>`和`&reg;`没有呈现，而是将标签本身显示为文本。有什么解决办法吗？谢谢！

```
var rName="Something<sup>&reg;</sup>";
var rURL="http://www.google.com";
var rAA=1;

function addResult(rName, rURL, rAA)
    {
        var node=document.createElement("li");
        var linkNode=document.createElement("a");

        node.setAttribute("id", rAA);
        node.setAttribute("class", "searchListing");
        node.setAttribute("onclick", "window.open('"+rURL+"','_self');");

        linkNode.setAttribute("href", rURL);
        linkNode.setAttribute("target", "_self");

        var textnode=document.createTextNode(rName);

        node.appendChild(textnode);

        document.getElementById("search_list_results").appendChild(node);
        document.getElementById(rAA).appendChild(linkNode);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:41:27.963

根据定义，文本节点不包含 HTML，因此任何特殊的 HTML 字符都将被转义并按字面​​意思打印。

您可以创建一个`span`元素并设置其`innerHTML`：

```
var spannode = document.createElement('span');
spannode.innerHTML = rName;
node.appendChild(spannode); 
```

# emacs - 删除 emacs 中的主要模式键绑定

> ID：15655563
> 
> 赞同：1
> 
> 时间：2013-03-27T09:34:32.040
> 
> 标签：emacs, elisp

我安装了一个新的主要模式（日出指挥官），我想重置其所有预定义的键绑定。虽然我可以使用

```
(add-hook 'sr-mode-hook
    '(lambda ()
    (define-key sr-mode-map "KEY"        nil)
    ...
)) 
```

这种模式有很多绑定，这对我来说是一个乏味的标签。

有没有办法在单行或少行中完全重置此主要模式的键绑定？

* * *

编辑＃1：我尝试使用这些方法，如下所述：

```
(eval-after-load "sunrise"
  '(setq sr-mode-map (make-sparse-keymap))) 
```

或者

```
(add-hook 'sr-mode-hook
    (lambda ()
    (setq sr-mode-map (make-sparse-keymap)))) 
```

可悲的是，它们似乎都不起作用。

我真的需要定义一个新的空键盘映射吗？例如使用

```
(defvar sunrise-keys-mode-map (make-keymap) "sunrise-keys-mode keymap.")
(define-minor-mode sunrise-keys-mode
  "A minor mode so that my key settings override sunrise major mode keymap."
  t " my-keys" 'sunrise-keys-mode-map)
(sunrise-keys-mode 1)
(eval-after-load "sunrise" ;; Fix this line to include the correct library name
  '(setq sr-mode-map (sunrise-keys-mode))) 
```

* * *

编辑#2：在对日出指挥官代码进行一些修改后，我注意到 sr-mode-map 是基于 dired 模式图的。我禁用了两者，它工作得很好。

```
(eval-after-load "sunrise-commander"
  '(setq sr-mode-map (make-sparse-keymap)
         dired-mode-map (make-sparse-keymap))) 
```

供将来参考 - 以上是唯一需要的代码。make-sparse-keymap 是一个返回空键映射的函数（显然，除非提供了参数）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:08:02.260

您可以绑定`sr-mode-map`到一个新创建的空键盘映射：

```
(setq sr-mode-map (make-sparse-keymap)) 
```

* * *

您可能需要将此延迟到加载日出指挥官之后：

```
(eval-after-load "sc" ;; Fix this line to include the correct library name
  '(setq sr-mode-map (make-sparse-keymap))) 
```

# javascript - 将 ASp.net ClientId 传递给 javascript 函数

> ID：15655567
> 
> 赞同：0
> 
> 时间：2013-03-27T09:34:49.960
> 
> 标签：javascript, asp.net, function, parameters

我有一个包含 JavaScript 函数的 ASP.NET 页面，如下所示：

```
function PrintGridView(Title,Address,Terms,GridViewName) {

  if (document.getElementById != null) {
    var html = '<html xmlns="http://www.w3.org/1999/xhtml" dir="rtl"  xml:lang="en"><HTML>\n\n';

    html += '<head> <title>' + Title + '</title>  <link href="Styles/Print.css" rel="stylesheet" type="text/css" /> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />';
    html += ""; 
    html += '</head>';

    html += '<body> <div id="page-wrap">';
    html += '<textarea id="header">'+Title+'</textarea>';
    html += '<div id="identity">';
    html += '<textarea id="address">'+Address+'</textarea>';
    html += '<div id="logo">';

    html += '<div id="logohelp">';
    html +='<input id="imageloc" type="text" size="50" value="" /><br />';
    html +='(max width: 540px, max height: 100px)';
    html +='</div>';

    html += '<img id="image" src="images/smallLogo.png" alt="logo" />';
    html +='</div>';
    html += '</div>';
    html += '<div style="clear:both"></div>';

    var tablerow = GridViewName.getElementsByTagName("tr");

    html += '<table align="center" id="items">';

    var td = tablerow.item(0).getElementsByTagName("th");

    html += '<tr>';  // Get Table Header

    for (var i = 1; i < td.length ; i++) { 
      html +='<th width=auto>'+td.item(i).innerText+'</th>';  
    }

    html += '</tr>';

    //Get Table Rows Data
    if (tablerow.length > 10)
      var Rowlen = 11;
    else
      var Rowlen = tablerow.length -1;

    for (var j = 1; j < Rowlen; j++) {
      html += '<tr class="item-row">';
      var tRow= tablerow.item(j).getElementsByTagName("td");

      for (var i = 1; i < 3; i++) {
        html += '<td >' + tRow.item(i).innerText + '</td>';
      }

      html += '</tr>';
    }

    html += '</table>';
    html += '<div id="terms"> <h5>notice</h5> <textarea>'+Terms+'</textarea></div>';
    html +='</div></body></html>';

  }

  var printWin = window.open("", "PrintGridView");
  printWin.document.open();
  printWin.document.write(html);
  printWin.document.close();
  //printWin.print();
} 
```

ASP.NET 页面如下：

```
<%@ Page Title="Damascus University-Institutes Management System" Language="C#" MasterPageFile="~/University.master" AutoEventWireup="true" CodeBehind="UniPunishmentRewardInfo.aspx.cs" Inherits="InstitutesManagementSystem.RewardPunishmentInfo" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>

<asp:Content ID="Content1" ContentPlaceHolderID="ContainerHolder" runat="server">

  <script type="text/javascript">
  //  PrintGridView(Title,Address,Terms,GridViewName) code is here
  </script>

  <asp:TabContainer ID="TabContainer" runat="server" Width="700px" 
        ActiveTabIndex="0" OnDemand="true" AutoPostBack="false" TabStripPlacement="Top" 
        CssClass="fancy fancy-green" ScrollBars="None" 
        UseVerticalStripPlacement="false" VerticalStripWidth="120px" 
        onactivetabchanged="TabContainer_ActiveTabChanged" ViewStateMode="Enabled">

    <asp:TabPanel ID="TabPanelSendingDownType" runat="server" HeaderText="Typs" Enabled="true" ScrollBars="Auto" OnDemandMode="Once" ViewStateMode="Enabled">

      <ContentTemplate>

        <asp:UpdatePanel ID="UpdatePanelSendingDownType" runat="server" 
             UpdateMode="Conditional">

          <ContentTemplate>
            <table align="center"  class="tabContainerTable" >
              <tr class="tabContainerTableRow">
                <td align="center"  >
                  <table align="center">
                    <tr>
                      <td>
                        <asp:ImageButton ID="SendingDownTypeRefreshImageButton" runat="server" ImageUrl="~/images/refresh.png" ToolTip="Refresh" onclick="SendingDownTypeRefreshImageButton_Click"  />
                      </td>
                      <td>
                        <asp:ImageButton ID="SendingDownTypePrintImageButton" runat="server" ImageUrl="~/images/printer.png" ToolTip="Print" onclick="SendingDownTypePrintImageButton_Click" OnClientClick="PrintGridView('university',' address','Terms','"<%=SendingDownTypeGridView.ClientID>"')"/>
                      </td>
                    </tr>
                  </table> 
                </td>
              </tr>
              <tr   class="tabContainerTableRow" >
                <td align="center" class="tabContainerTableCell" ><asp:Label ID="SendingDownResultsLabel" runat="server"></asp:Label></td>
              </tr>
              <tr class="tabContainerTableRow"> 
                <td align="center" class="tabContainerTableCell" >
                  <asp:Panel ID="PanelSendingDownType" runat="server" ScrollBars="Auto" Width="650px">
                    <asp:GridView ID="SendingDownTypeGridView" runat="server" 
                        DataKeyNames="SendingDownTypeID" HeaderStyle-BackColor="#61A6F8" 
                        ShowFooter="True" HeaderStyle-Font-Bold="true" 
                        HeaderStyle-ForeColor="White" AutoGenerateColumns="False" HorizontalAlign="Center" 
                        onrowcommand="SendingDownTypeGridView_RowCommand" 
                        DataSourceID="SendingDownTypeSqlDataSource" AllowPaging="True" 
                        AllowSorting="True">

                      <Columns>
                        <asp:TemplateField HeaderText="???????" HeaderStyle-HorizontalAlign="center">
                          <EditItemTemplate>
                            <asp:ImageButton ID="SendingDownTypeImgBtnUpdate" CommandName="Update" runat="server" ImageUrl="~/images/save.png" ToolTip="Update" Height="20px" Width="20px" />
                            <asp:ImageButton ID="SendingDownTypeImgBtnCancel" runat="server" CommandName="Cancel" ImageUrl="~/images/exit.png" ToolTip="Cancel" Height="20px" Width="20px" />
                          </EditItemTemplate>

                          <ItemTemplate>
                            <asp:ImageButton ID="SendingDownTypeImgBtnEdit" CommandName="Edit" runat="server" ImageUrl="~/images/edit.png" ToolTip="Edit" Height="20px" Width="20px" />
                            <asp:ImageButton ID="SendingDownTypeImgBtnDelete" CommandName="Delete" Text="Remove" runat="server" ImageUrl="~/images/-.png" ToolTip="Remove" Height="20px" Width="20px" />
                          </ItemTemplate>

                          <FooterTemplate>
                            <asp:ImageButton ID="SendingDownTypeImgBtnAppend" runat="server" ImageUrl="~/images/+.png" CommandName="Insert" Width="30px" Height="30px" ToolTip="Append" ValidationGroup="Tab1"  />
                          </FooterTemplate>

                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="??? ??? ?????" HeaderStyle-HorizontalAlign="center">

                          <EditItemTemplate>
                            <asp:Label ID="EditSendingDownTypeIDLable" runat="server" CssClass="input" Text='<%#Eval("SendingDownTypeID") %>'/>
                          </EditItemTemplate>

                          <ItemTemplate>
                            <asp:Label ID="ItemSendingDownTypeIDLable" runat="server" CssClass="input" Text='<%#Eval("SendingDownTypeID") %>'/>
                          </ItemTemplate>

                          <FooterTemplate>
                            <asp:TextBox ID="SendingDownTypeIDTextBox" runat="server" MaxLength="3" CssClass="input" />
                            <asp:RequiredFieldValidator ID="SendingDownTypeIDTextBoxVali" runat="server" ControlToValidate="SendingDownTypeIDTextBox" Text="*" ValidationGroup="Tab1"/>
                          </FooterTemplate> 

                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="??? ?????" HeaderStyle-HorizontalAlign="center">

                          <EditItemTemplate>
                            <asp:TextBox ID="EditSendingDownTypeNameTextBox" runat="server" CssClass="input" Text='<%#Eval("SendingDownTypeName") %>'/>
                          </EditItemTemplate>

                          <ItemTemplate>
                            <asp:Label ID="ItemSendingDownTypeNameLable" runat="server" CssClass="input" Text='<%#Eval("SendingDownTypeName") %>'/>
                          </ItemTemplate>

                          <FooterTemplate>
                            <asp:TextBox ID="SendingDownTypeNameTextBox" runat="server" MaxLength="50" CssClass="input"/>
                            <asp:RequiredFieldValidator ID="SendingDownTypeNameTextBoxVali" runat="server" ControlToValidate="SendingDownTypeNameTextBox" Text="*" ValidationGroup="Tab1"/>
                          </FooterTemplate> 

                        </asp:TemplateField>
                      </Columns>

                      <HeaderStyle BackColor="#61A6F8" Font-Bold="True" ForeColor="White" />
                    </asp:GridView>

                    <asp:SqlDataSource ID="SendingDownTypeSqlDataSource" runat="server" ConflictDetection="OverwriteChanges" ConnectionString="<%$ ConnectionStrings:SqlConnectionString %>" 
                     DeleteCommand="DELETE FROM [SendingDownType_Table] WHERE [SendingDownTypeID] =@SendingDownTypeID" 
                     InsertCommand="IF NOT EXISTS (SELECT * FROM [SendingDownType_Table]  WHERE [SendingDownTypeID] = @SendingDownTypeID ) INSERT INTO [SendingDownType_Table] ([SendingDownTypeID], [SendingDownTypeName]) VALUES (@SendingDownTypeID, @SendingDownTypeName) ELSE PRINT N'This Type ID Is Exist'" 
                     SelectCommand="SELECT [SendingDownTypeID], [SendingDownTypeName] FROM [SendingDownType_Table] ORDER BY [SendingDownTypeID], [SendingDownTypeName]" 
                     UpdateCommand="UPDATE [SendingDownType_Table] SET [SendingDownTypeName] = @SendingDownTypeName WHERE [SendingDownTypeID] = @SendingDownTypeID">

                      <DeleteParameters>
                        <asp:Parameter Name="SendingDownTypeID" Type="Byte"  />
                      </DeleteParameters>

                      <InsertParameters>
                        <asp:Parameter Name="SendingDownTypeID" Type="Byte" />
                        <asp:Parameter Name="SendingDownTypeName" Type="String" />
                      </InsertParameters>

                      <UpdateParameters>
                        <asp:Parameter Name="SendingDownTypeID" Type="Byte" /> 
                        <asp:Parameter Name="SendingDownTypeName" Type="String" />
                      </UpdateParameters>

                    </asp:SqlDataSource>

                  </asp:Panel>
                </td>
              </tr>
              <tr class="tabContainerTableRow">
                <td><div class="clear"></div></td>
              </tr>
            </table>
          </ContentTemplate>
        </asp:UpdatePanel>
      </ContentTemplate>
    </asp:TabPanel>
  </asp:TabContainer> 
```

我尝试将 GridView ID 传递给声明如下的 JavaScript 函数：

```
'PrintGridView(Title,Address,Terms,GridViewName)' 
```

在我的 ASP.NET 页面中将其用于`ImageButton`on `OnClientClick`Event 如下：

```
<asp:ImageButton ID="SendingDownTypePrintImageButton" runat="server" ImageUrl="~/images/printer.png" ToolTip="Print" OnClientClick="PrintGridView('university',' address','Terms','<%=SendingDownTypeGridView.ClientID%>')"/> 
```

但我总是得到一个错误。我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:36:20.350

*改变*

```
'"<%=SendingDownTypeGridView.ClientID>"' 
```

*至*

```
'<%=SendingDownTypeGridView.ClientID %>' 
```

# c++ - 如何找到warpPerspective的变换矩阵以将旋转后的图像带到归一化位置？

> ID：15655569
> 
> 赞同：0
> 
> 时间：2013-03-27T09:34:53.413
> 
> 标签：c++, opencv, image-processing, template-matching

我需要处理一些从扫描仪获得的信息。问题是我偶尔会旋转的图像。我决定在照片上添加一些特殊对象，以便能够使用技术 Features2D + Homography 来找到该对象。我认为在找到特殊对象后，我可以将图像旋转回其原始位置（使用 warpPerspective？）。这是一个例子：
旋转后的图像，我知道黑框下面有一些文本，我需要那个区域用于 OCR 功能： ![在此处输入图像描述](../Images/61828dfaa08b191b41db066dbffe9395.png)

找到黑盒后我被卡住了。我想我会使用 warpPerspective 来旋转它，但是如何找出 3x3 变换矩阵？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:41:30.487

使用 FindHomography 方法。

喂它 4 个源点。对于目标点，您必须进行一些数学运算，例如 4 个点应在目标图像中放置的位置。一个简单直接的操作是：

```
(from top-left going clockwise)
A' = (A.x, A.y)
B' = (A.x + length, A.y)
C' = (A.x + length, A.y + width)
D' = (A.x, A.y + width) 
```

使用 FindHomography() 将 (A,B,C,D) 映射到 (A', B', C', D')。

其中宽度和长度是已识别矩形的宽度和长度。

# ios - 构建自定义 UIPickerView

> ID：15655572
> 
> 赞同：1
> 
> 时间：2013-03-27T09:35:06.337
> 
> 标签：ios, uikit, uipickerview

我正在尝试构建一个自定义`UIPickerView`替换类，主要用于学习目的，但为了在我正在开发的应用程序中实现它。我在我的应用程序的 UI 上投入了大量时间和精力，但现在默认设置`UIPickerView`不合适。

我看到这个[Dribble](http://dribbble.com/shots/991626-What-time?list=users)模拟了一个看起来非常漂亮的日期/时间选择器，但我意识到在`UIPickerView`没有一些重大黑客攻击的情况下，没有机会可以如此大量地自定义。

经过大量阅读和调查，我发现它的组件`UIPickerView`使用`UITableView`s 而不是`UIScrollView`我最初假设的平原。这令人困惑，原因有两个：

定制`UITableViewCell`s 是 derriere 的一大痛点。并不是说它很辛苦，只是费力并且很少产生所需的结果。尽管开销很小，但不知何故`UIPickerView`设法做到了这一点。我会假设组件中的每一行只使用`UITableViewCellStyleDefault`一个自定义视图，`contentView`但你知道他们对假设的看法。

让我失望的第二件事是`UIPickerView`符合`UITableViewDataSource`协议，但不符合`UITableViewDelegate`协议。这似乎有点奇怪，因为委托负责提供正确的高度，`– tableView:heightForRowAtIndexPath:` `UIPickerView`但是确实允许您通过设置组件的大小`– pickerView:rowHeightForComponent:`

与此一致，使用表格视图似乎也是一个奇怪的选择，因为它们本身不会像滚动视图那样“捕捉”到指定的行`pagingEnabled`。

谁能解释为什么默认值`UIPickerView`不符合上述委托？用 a 来实现我的自定义选择器会更容易，`UIScrollView`还是应该`UITableView`提供所需的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:49:17.023

1.  `UIPickerView`实际上符合`UITableViewDelegate`协议，但只是没有在公共标头中公开它。`class_copyProtocolList`您可以使用功能检查自己。

2.  在内部使用 UITableView 可以更轻松地实现具有大量行的选择器，因为 UITableView 为重用单元格提供了很好的支持，否则 Apple 需要再次为选择器重新实现该逻辑 - 这没有多大意义（对不起，我没有看到在这种情况下自定义 UITableViewCell 的任何大问题，因此很难对此发表评论）

3.  由于 UITableView 是 UIScrollView 子类，因此您可以将其“捕捉”到特定位置，检查协议中可用于该目的的`scrollViewWillEndDragging:withVelocity:targetContentOffset:`方法。`UIScrollViewDelegate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:00:52.960

自定义`UIPickerView`是通过使用`UIViewController`包含尽可能多`UITableView`的字段的子类来模仿它的行为来完成的。

例如：如果您想要一个时间选择器，请使用 2 个表格视图

您应该使用图像等在 xib 中设置它们的样式。

重现这种行为有点困难的是`UIPickerView`“捕捉”到最近的单元格的部分，尤其是让它**正确**。

此外， a 中的单元格`UIPickerView`很简单，单元格之间没有边框/分隔符，文本标签居中，并且*瞧*。您看到的只是覆盖在`UITableView`s 前面的图像。

至于为什么不*完全*符合. 因此，它缺少一些对此不是特别有用的委托。`UITableViewDelegate``UITableView``UIPickerView`

但我想我们都同意一件事：**确实，建立定制`UIPickerView`是一个很大的痛苦，应该更容易。**

看看这个组件，看起来很不错，虽然我自己没有测试过。[计算机逻辑x/AFPickerView](https://github.com/computerlogicx/AFPickerView)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T19:50:45.440

我设法`UIPicker`通过扩展`UICollectionView`.

虽然`UICollectionView`通常用于一个部分中有多个项目的情况，但您可以只拥有一个项目并且它工作正常。如果启用分页，您将获得与 a 类似的行为`UIPicker`，但它有一个“更粘”的滚动，一次只允许您滚动一个项目，如果这是您想要的，这可能会更好。此外，您可以垂直或水平滚动。你甚至可以有一个带有一些额外代码的 2D 选择器。

# twitter-bootstrap - 如何处理 phundament 作曲家包中的错误修复

> ID：15655573
> 
> 赞同：1
> 
> 时间：2013-03-27T09:35:16.417
> 
> 标签：twitter-bootstrap, composer-php, phundament

我想修复 Phundament3 0.15.0 使用的 twitter bootstrap composer 包中的一个错误。如何在不更改供应商文件夹中的代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:14:15.837

您可以分叉包并在作曲家中要求您的分叉。有关详细信息，请参阅[文档](http://getcomposer.org/doc/05-repositories.md#vcs)。

# ipv6 - 将 IPv6 类型地址转换为网络字节顺序

> ID：15655574
> 
> 赞同：3
> 
> 时间：2013-03-27T09:35:17.363
> 
> 标签：ipv6, uint32

我有以下格式的 ipv6 地址

uint32_t 地址6[4]；

所以上面的数组存储了 4 个 uint32_t 类型的数据，总共等于 16 个字节，因此是一个 ipv6 类型的地址。

如何将上述格式存储的地址转换为网络字节序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-02T20:34:55.690

您将需要地址在数组中的布局方式的详细信息。

通常，IPv6 地址是使用网络顺序中的 uint32 元素构建的。uint32 元素本身按主机顺序存储。

例子：

地址：dead:beef:feed:face:cafe:babe:baad:c0de

```
adress6[0] = 0xdeadbeef;
adress6[1] = 0xfeedface;
adress6[2] = 0xcafebabe;
adress6[3] = 0xbaadc0de; 
```

该数组按网络顺序排列，但每个整数元素将按主机顺序排列。

要获得网络订单，您可以执行以下操作：

```
void network_order_me ( uint32_t *host_ipv6, uint32_t *net_ipv6 ) {
  net_ipv6[0] = htonl(host_ipv6[0]);
  net_ipv6[1] = htonl(host_ipv6[1]);
  net_ipv6[2] = htonl(host_ipv6[2]);
  net_ipv6[3] = htonl(host_ipv6[3]);
} 
```

# xml - 排除某些关键字而不使用“？！”

> ID：15655576
> 
> 赞同：0
> 
> 时间：2013-03-27T09:35:26.987
> 
> 标签：xml, regex

我试图排除 logserver 上的某些关键字，但显然，它没有收到像？！这是我需要否定。同时，要搜索确切的关键字，我使用如下模式：

```
 [/^SMTP$/]{4}|[/^THROTTLED$/]{9} 
```

搜索 SMTP 和 THROTTLED 这两个词，但是如何在不使用字符的情况下排除它们！或者 ？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:05:52.440

如果您使用的是支持前瞻的正则表达式，那么我建议您使用以下内容：

```
^(?:(?!\b(?:THROTTLED|SMTP)\b).)*$ 
```

确保在多行模式下运行它（通常是正则表达式实现的默认值）。

如果您不能使用这些字符`!`，或者`?`您应该复制日志文件并将与以下表达式匹配的任何行替换为空：

```
^.*?\b(THROTTLED|SMTP)\b.*$ 
```

然后你会留下**没有**字符串“SMTP”或“THROTTLED”的行。

# android - 从时间服务器检索当前日期和时间

> ID：15655578
> 
> 赞同：1
> 
> 时间：2013-03-27T09:35:33.597
> 
> 标签：android, date, time

在我的 Android 应用程序中，我想从某个服务器检索当前日期/时间 (UTC)。Android 确实具有将设备的日期和时间与某些服务器同步的内置功能，但我发现这不可靠。谷歌或其他知名服务提供商是否提供了一个简单的 API 可以让我检索当前日期/时间？我对尝试在设备上设置日期/时间不感兴趣（这甚至不可能）。但我确实需要知道正确的日期才能执行取决于确切日期的计划任务。

我看到一个设备将其日期重置为 1980 年，当电池长时间被取出时，因此我不能依赖设备的日期。

编辑：

我遇到了这篇文章： [https ://stackoverflow.com/a/13066268/753632](https://stackoverflow.com/a/13066268/753632)

但它需要安装 Apache Commons Net。有点矫枉过正只是为了获得时间。我不需要比现在更膨胀我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T11:26:48.540

你可以参考这个链接[我怎样才能得到“网络”时间，（来自名为“使用网络提供的值”的“自动”设置），而不是手机上的时间？](https://stackoverflow.com/questions/8049912/how-can-i-get-the-network-time-from-the-automatic-setting-called-use-netw)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-27T09:41:51.127

您可以使用日历类，就像在[此处](https://stackoverflow.com/questions/5369682/android-get-current-time-and-date)解释的那样，尽管这使用设备本身的时间。你也可以阅读[这篇](https://stackoverflow.com/questions/14278663/how-to-get-time-from-server-in-android)文章，它解释了如何为服务提供商争取时间。

我认为使用日历，然后根据手机所在的时区计算 UTC 时间（像[这样](https://stackoverflow.com/questions/7672597/how-to-get-timezone-from-android-mobile)）。因为手机在连接到互联网时已经从服务器获取时间。

我希望这有帮助。

编辑：我看到你编辑了你的帖子。所以你不想使用设备时间......我认为你可以考虑从服务提供商那里获取它。

# django - Django 管理员：list_editable 中的 ManyToManyField？

> ID：15655587
> 
> 赞同：4
> 
> 时间：2013-03-27T09:35:52.410
> 
> 标签：django, django-admin, many-to-many

在 Django 管理员中，我**真的希望**能够在列表显示中显示一个可编辑的 ManyToManyField。

它不一定需要是完整的 ManyToManyField 控件 - 能够保存一个值对于列表显示的目的就足够了（尽管基础值本质上是多对多的）。

我的模型如下所示：

```
class Item(models.Model):
    name = models.CharField(max_length=500)
    colour = models.ManyToManyField(Colour, related_name='primary_colour') 
```

如果我尝试这个`admin.py`：

```
class ItemAdmin(admin.ModelAdmin):
    list_display = ('name', 'colour')
    list_editable = ('colour') 
```

然后我得到这个错误：

```
'ItemAdmin.list_display[6]', 'colour' is a ManyToManyField which is not supported. 
```

有**什么办法**可以在列表显示中显示可编辑的 ManyToManyField 以进行快速编辑？

我发现了这个相关的问题，它解释了如何使值在列表显示中可见，但不可编辑：[ManyToManyField widget in a django admin change list?](https://stackoverflow.com/questions/7629786/manytomanyfield-widget-in-a-django-admin-change-list?lq=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-07-13T13:38:53.160

默认情况下，Django 不允许在 ModelAdmin 的 list_editable 中添加 ManyToManyField。所以我们需要重写模型管理方法。

在查看您的模型时，您需要按照以下步骤在列表显示页面中获取可编辑的 ManyToManyField。

在[apps/forms.py 中](http://#) ，您需要定义哪些 ManyToMany 字段需要在列表显示页面中进行编辑。如下，

```
from django import forms
from app.models import Item

class ItemChangeListForm(forms.ModelForm):

    # here we only need to define the field we want to be editable
    colour = forms.ModelMultipleChoiceField(queryset=Colour.objects.all(), 
        required=False) 
```

在[app/admin.py 中](http://#) ，您需要覆盖模型管理员的方法。如下，

```
from django.contrib import admin
from django.contrib.admin.views.main import ChangeList
from app.models import Item
from app.forms import ItemChangeListForm

class ItemChangeList(ChangeList):

    def __init__(self, request, model, list_display,
        list_display_links, list_filter, date_hierarchy,
        search_fields, list_select_related, list_per_page,
        list_max_show_all, list_editable, model_admin):

        super(ItemChangeList, self).__init__(request, model,
            list_display, list_display_links, list_filter,
            date_hierarchy, search_fields, list_select_related,
            list_per_page, list_max_show_all, list_editable, 
            model_admin)

        # these need to be defined here, and not in ItemAdmin
        self.list_display = ['action_checkbox', 'name', 'colour']
        self.list_display_links = ['name']
        self.list_editable = ['colour']

class ItemAdmin(admin.ModelAdmin):

    def get_changelist(self, request, **kwargs):
        return ItemChangeList

    def get_changelist_form(self, request, **kwargs):
        return ItemChangeListForm

admin.site.register(Item, ItemAdmin) 
```

现在你们都准备好检查更改，运行服务器并检查电影模型的 django admin。您可以直接从列表显示页面编辑 ManyToMany 字段。

**注意：如果您要在列表中使用多个可编辑的 ManyToManyFields，则需要在**[settings.py](http://#)中设置 DATA_UPLOAD_MAX_NUMBER_FIELDS 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:46:26.920

您可以轻松地将自定义视图添加到您的管理 url 并添加所需的 html/javascript/ajax。这是基础知识：

```
class ItemAdmin(admin.ModelAdmin):
    # regular stuff

    def render_foo(self, obj):
        # add this to your list_display
        html = '<stuff><input/submit action></stuff>'
        return mark_safe(html)

    def get_urls(self):
        urls = super(ItemAdmin, self).get_urls()
        extra_urls = patterns('',
            (r'^process_foo/$', self.admin_site.admin_view(self.process_foo)),
        )
        return extra_urls + urls

    def process_foo(self, request):
        if not request.is_ajax():
            raise Http404
        foo = request.GET.get("attr")
        # process m2m
        # return some json 
```

# c++ - Autotools 有条件的包括

> ID：15655588
> 
> 赞同：1
> 
> 时间：2013-03-27T09:35:57.343
> 
> 标签：c++, c, makefile, autotools

我有一个包含标题的 C 文件。此标头位于不同的位置，具体取决于构建机器运行的 Linux 发行版。

使用自动工具检测不同位置的标头的最干净的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:43:23.820

使用标准[`AC_CHECK_HEADERS`](http://www.gnu.org/software/autoconf/manual/autoconf.html#Generic-Headers)宏。

它将为标题创建正确的预处理器定义。

例如：

```
AC_CHECK_HEADERS([somepath/foo.h someotherpath/foo.h]) 
```

将创建预处理器定义`HAVE_SOMEPATH_FOO_H`或`HAVE_SOMEOTHERPATH_FOO_H`取决于找到的标头。如果两个标题都找到，或者两者都找到。使用这些宏来决定要包含哪个标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T11:50:58.260

担心这些事情不是维护者的责任。任何合理构建的分发都将被设置，以便预处理器可以在它安装在系统上的任何位置找到头文件（而不是用户的 $HOME 或其他一些非标准位置）。如果将工具链安装在非标准位置，则设置工具链以查找标头是特定于平台的任务，在 Linux 中通过设置`CPPFLAGS`. 例如，用户可能运行

```
./configure CPPFLAGS=-I/p/a/t/h 
```

（使用旧版本的 autoconf 生成的配置脚本可能需要调用 be `CPPFLAGS=-I/p/a/t/h ./configure`）或者她可以添加`/p/a/t/h`到`CPATH`，或使用任何其他可用的方法来通知预处理器在哪里查找包含文件。作为维护者，您需要做的就是确保配置脚本检查用户是否正确设置了工具链，您可以通过调用`AC_CHECK_HEADERS`in来做到这一点`configure.ac`：

```
AC_CHECK_HEADERS([foo.h]) 
```

# jquery - jQuery：parseXML appendChild“类型不匹配”-错误 IE8

> ID：15655594
> 
> 赞同：0
> 
> 时间：2013-03-27T09:36:17.050
> 
> 标签：jquery, xml, appendchild

我想用一些数据创建一个 XML 文件，但是 IE8 抛出一个错误。使用 FF 和 Chrome，我的脚本可以工作。知道为什么`col.appendChild(document.createTextNode(this))`不能使用 IE8 吗？

```
var xmlDoc = $.parseXML("<?xml version=\"1.0\" encoding=\"UTF-8\"?><mapping-table/>");
//Append rows with col to XML-document
    $.each(trData, function(){
        var row = xmlDoc.createElement('row');
        $.each(this, function(){
            var col = xmlDoc.createElement('col');          
            col.appendChild(document.createTextNode(this));
            row.appendChild(col);
        });
        xmlDoc.documentElement.appendChild(row);
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:46:44.790

您在 XML 文档上调用该方法`createElement`，这很好。

但是您是在 (html)`document`对象的范围内创建文本节点，而不是在 XML 文档的范围内创建它。

改为使用`xmlDoc.createTextNode`。

# php - 使用 SoapFault 忽略 PHP SoapServer addSoapHeader

> ID：15655596
> 
> 赞同：1
> 
> 时间：2013-03-27T09:36:19.287
> 
> 标签：php, soap, header, soapserver, soapfault

我编写了一个接受基本身份验证凭据的 PHP SOAP 服务，如[http://www.whitemesa.com/soapauth.html](http://www.whitemesa.com/soapauth.html)中所述。我通过在实例`BasicAuth`的处理程序类中定义一个方法来做到这一点。`SOAPServer`这一切都很好。

但是，当身份验证由于某种原因失败（用户名不正确，`BasicAuth`请求中没有标头）时，我想`BasicChallenge`在我的响应中包含一个标头，如下所示：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header>
      <h:BasicChallenge xmlns:h="http://soap-authentication.org/basic/2001/10/"
                        SOAP-ENV:mustUnderstand="1">
         <Realm>Realm</Realm>
      </h:BasicChallenge>
   </SOAP-ENV:Header>
   <SOAP-ENV:Body>
      <SOAP-ENV:Fault>
         <faultcode>SOAP-ENV:Client</faultcode>
         <faultstring>Authentication failed</faultstring>
      </SOAP-ENV:Fault>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

以下代码不起作用（标头未添加到响应中）。

```
$soapServer->addSoapHeader(new SoapHeader("http://soap-authentication.org/basic/2001/10/", "BasicChallenge", array("Realm" => "Realm"), true));
throw new SoapFault("Client", "Authentication Failed"); 
```

调用`$soapServer->fault()`而不是`throw new SoapFault`没有任何区别。

我尝试自己构建 Fault 对象，并将其作为常规响应返回，但我无法让 PHP 发送格式正确的响应。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-27T14:56:40.727

这是 2013 年，我实际上遇到了完全相同的问题。好吧，现在是 2019 年，PHP 的当前版本是 7.3，而 7.4 正朝着我们迈出一大步。不幸的是，SoapServer 类在 SoapFault 案例中完全忽略了肥皂头。

我编写了一个小变通方法来操作soap 服务器的XML 响应。对于遇到同样问题的每个人，这里有一个小例子，如何解决它。

**1\. 初始化你的 Soap 服务器**

```
$server = new SoapServer($wsdl, $options);

ob_start();
$server->setObject($service);
$server->handle();
$response = ob_get_contents();
ob_end_clean(); 
```

实际上我们正在做一个简单的初始化。我们不是简单地返回内容，而是使用输出缓冲函数拦截 xml 响应。的结果是一个 xml 字符串`$response`。

**2\. 找出响应是否是故障**

实际上`SoapServer`，如果这是一个有效的响应，该类正在添加肥皂标题。我们必须找出响应是否是错误的。

```
$doc = new DOMDocument();
$doc->loadXML($response);

$xpath = new DOMXPath($doc);
$isFault = $xpath->query('//*[local-name()="Fault"]')->length; 
```

只需将响应 xml 字符串加载到`DOMDocument`类中。从现在开始，我们可以使用 DOM 函数访问 xml 元素。为了更好地处理我正在使用`DOMXPath`该类。当然，也可以使用 DOMDocument 类来确定 XML 节点。该`$isFault`变量对下一步很有用。

**3.在故障情况下设置一个肥皂头**

不幸的是，简单地设置一个肥皂头没有花哨`addSoapHeader`的功能。在这种情况下，我们必须手动完成。

```
if ($isFault) {
    $header = $doc->createElementNS('http://schemas.xmlsoap.org/soap/envelope/', 'Header');
    $body = $doc->getElementsByTagNameNS('http://schemas.xmlsoap.org/soap/envelope/', 'Body')->item(0);

    $realm = $doc->createElementNS('http://soap-authentication.org/basic/2001/10/', 'h:Realm');
    $basicChallenge = $doc->createElementNS('http://soap-authentication.org/basic/2001/10/', 'h:BasicChallenge');

    $basicChallenge->appendChild($realm);
    $header->appendChild($basicChallenge);

    $doc->documentElement->insertBefore($header, $body);
}

$xmlResponse = $doc->saveXML($doc->documentElement);

header('Content-Length: ' . strlen($xmlResponse));
echo $xmlResponse;
exit(); 
```

在故障情况下，我们创建一个标题元素并添加我们需要的所有子节点。如果附加了所有内容，则在正文之前插入标题，将新的 xml 结构保存在字符串中并回显它。

希望这个对你有帮助。

# firefox - 如何使用开源 firebreath 实现编辑框插件 firefox？

> ID：15655599
> 
> 赞同：0
> 
> 时间：2013-03-27T09:36:21.337
> 
> 标签：firefox, plugins, mfc, firebreath, editbox

我找到了一个开源——Firebreath，它旨在成为一个跨平台的插件架构，我想用它来实现一个在 Firefox chrome 等中的安全控制。

我可以得到 hwnd ，但我不知道如何在 hwnd 窗口中插入一些控件，如编辑框或按钮。

我可以在 Firebreath 中使用 MFC 或 ALT 或其他东西吗？我是浏览器插件的新手，我需要一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:36:36.333

AFAIK 没有人能够让 MFC 与 FireBreath 插件一起工作，主要是因为 FireBreath 是建立在 ATL 之上的，这似乎与 MFC 不兼容。

但除此之外，仅仅因为它是一个浏览器插件并不意味着它有什么特别或神奇之处。您要研究的真正问题是如何使用 C++ 创建 HWND 并为其添加控件。这不是 FireBreath、firefox 或插件问题，而是学习 windows 编程的问题。

当你在做这件事时，请记住一些关键规则：

1.  您*永远*不允许阻塞主线程。不要这样做。请不要在这个问题上与我争论，这是一个**非常糟糕的主意**。

2.  您在 AttachedEvent 中获得的 HWND 不属于您。你可以画它，你可以用它做事，但要知道它是由浏览器拥有的，你不能决定它的生命周期等等。

3.  我不确定您要做什么，但是了解插件的第一条规则是：**如果您可以在不使用插件的情况下解决问题，请不要使用插件。** 此外，大多数人避免在插件内部做一个实际的 UI 只是因为用 C++ 做有点痛苦，所以大多数人用 html 制作 UI 并使用 javascript 与插件交互。

# erlang - 在 Sublime Text 2 中使用 Erlang 自动缩进 ->

> ID：15655611
> 
> 赞同：3
> 
> 时间：2013-03-27T09:36:44.390
> 
> 标签：erlang, sublimetext2, auto-indent

如何在 -> 之后使用 Erlang 在 Sublime Text 2 中自动缩进？

我找到了这个页面：[http ://sublimetext.userecho.com/topic/85708-fix-increaseindentpattern-for-erlang/](http://sublimetext.userecho.com/topic/85708-fix-increaseindentpattern-for-erlang/)

如何应用它？

我是否必须使用一些软件包，例如 SublimErl？

谢谢！

* * *

更新：

安装 Sublime-Erlang ( [https://github.com/fjl/Sublime-Erlang](https://github.com/fjl/Sublime-Erlang) ) 并禁用 Sublime Text 2 附带的 Erlang 包是最简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:51:53.167

如果要应用您链接到的新模式，请编辑此文件：

```
~/Library/Application Support/Sublime Text 2/Packages/Erlang/Indentation Rules.tmPreferences 
```

SublimeErl 看起来像一个很酷的插件。 [SublimeREPL](https://github.com/wuub/SublimeREPL#readme)还提供 Erlang 支持。

# plsql - 在存储过程中创建并在表中插入一行

> ID：15655613
> 
> 赞同：0
> 
> 时间：2013-03-27T09:36:50.537
> 
> 标签：plsql, oracle11g

```
create or replace procedure sample
as
ID VARCHAR(20);
BEGIN
execute immediate
'CREATE GLOBAL TEMPORARY TABLE UPDATE_COLUMN_NO_TP
(
NAME VARCHAR2(256)
)';

INSERT INTO UPDATE_COLUMN_NO_TP
SELECT SRC_PK_COLUMNS.PK_KEY 
  FROM SRC_PK_COLUMNS 
  WHERE NOT EXISTS ( 
  SELECT 1
  FROM TGT_PK_COLUMNS
 WHERE TGT_PK_COLUMNS.ID = SRC_PK_COLUMNS.ID);
END; 
```

错误是：

```
The table is no exist. 
```

所以，我想要这个场景的最佳解决方案。在我的存储过程中，我有 10 个临时表。都是动态的创作和插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:41:50.787

表`UPDATE_COLUMN_NO_TP`在编译时不存在，所以你得到了错误。
如果您动态创建了一个表，您应该动态访问它。
并注意Mat关于GTT本质的评论。

* * *

```
execute immediate '
INSERT INTO UPDATE_COLUMN_NO_TP
SELECT SRC_PK_COLUMNS.PK_KEY 
  FROM SRC_PK_COLUMNS 
  WHERE NOT EXISTS ( 
    SELECT 1
    FROM TGT_PK_COLUMNS
    WHERE TGT_PK_COLUMNS.ID = SRC_PK_COLUMNS.ID
  )
'; 
```

# iphone - NSNumberFormatter 不允许在 UITextField 中超过 4 位数字

> ID：15655617
> 
> 赞同：0
> 
> 时间：2013-03-27T09:37:04.437
> 
> 标签：iphone, ios, objective-c, uitextfield, nsnumberformatter

我正在尝试构建一个基本的计算器，但在输入过程中无法格式化显示屏上的数字。我使用 NSNumberFormatter 在每 3 位数字后加一个逗号，这样“99999”就可以看起来像“99,999”。

问题是它在输入过程中不会显示超过 4 位……它基本上会重置为 1 位。这是我的数字输入代码：

```
- (IBAction)digitPressed: (UIButton *)sender
{
    NSString *digit = sender.titleLabel.text;

        display.text = [display.text stringByAppendingString:digit];

        NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
        [numberFormatter setGroupingSeparator:@","];
        [numberFormatter setGroupingSize:3];
        [numberFormatter setUsesGroupingSeparator:YES];
        [numberFormatter setDecimalSeparator:@"."];
        [numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
        NSString *theString = [numberFormatter stringFromNumber:[NSNumber numberWithDouble:[[display text] doubleValue]]];
        display.text = theString;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:16:47.783

这些方法可能会派上用场：

```
- (void)setMaximumIntegerDigits:(NSUInteger)number;
- (void)setMaximumFractionDigits:(NSUInteger)number; 
```

您可以将最大小数位数设置为 6，或者您需要的任何值：

```
[numberFormatter setMaximumFractionDigits: 6]; 
```

# python - 如何在不安装的情况下使用烧杯？

> ID：15655620
> 
> 赞同：3
> 
> 时间：2013-03-27T09:37:15.380
> 
> 标签：python, beaker

Beaker 不是 python 标准库的一部分，**我想让我的应用程序没有依赖项，而不是 python 标准库本身**。为此，我下载了烧杯并将其提取为我的应用程序的子包。

然后，我使用这个：

```
import os, inspect, sys
sys.path.append(os.path.abspath('./beaker'))
import beaker.middleware
app = beaker.middleware.SessionMiddleware(bottle.app(), session_opts) 
```

并得到这个错误

```
Traceback (most recent call last):
  File "start.py", line 8, in <module>
    from kokoropy import kokoro_init
  File "/home/gofrendi/workspace/kokoropy/kokoropy/__init__.py", line 9, in <module>
    import beaker.middleware
  File "/home/gofrendi/workspace/kokoropy/kokoropy/beaker/middleware.py", line 11, in <module>
    from beaker.cache import CacheManager
ImportError: No module named beaker.cache 
```

问题出在 beaker.middleware 第 11 行：

```
from beaker.cache import CacheManager 
```

解释器无法识别烧杯包，因为它没有安装实际上我可以通过将该行更改为以下内容来解决这个问题：

```
from cache import CacheManager 
```

但是这样做，我需要修改很多。

那么，有没有什么方法可以使用烧杯而不安装它并且不做太多修改呢？

**PS：**下面是我的目录结构

```
kokoropy
  |
  |--- __init__.py <-- this is where I write my script
  |
  |--- beaker
        |
        |--- __init__.py 
```

**编辑：**接受的答案是正确的，但就我而言，我在一级顶级目录中运行脚本。因此，以下解决方案似乎更强大：

```
import os, inspect, sys
sys.path.append(os.path.dirname(__file__)) 
```

或者可能是这样：[如何在 Python 中获取当前执行文件的路径？](https://stackoverflow.com/questions/2632199/how-do-i-get-the-path-of-the-current-executed-file-in-python):)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:55:04.177

您必须将包含目录的`beaker`目录添加到路径而不是烧杯目录本身：

```
<root>
  |
  --beaker
      |
      -- <...> 
```

在这种情况下，您需要将`<root>`目录添加到路径中。

根据您的示例代码，这将是：

```
sys.path.append(os.path.abspath('.')) 
```

这可能意味着你从这个文件夹运行你的程序，它会`PYTHONPATH`自动将它添加到。（所以它应该在没有你修改的情况下运行`PYTHONPATH`）。

编辑：

有关该主题的更多信息，您可以查看有关模块的 Python 文档：Python 中的[模块](http://docs.python.org/2/tutorial/modules.html)。

# css - 强制应用媒体查询

> ID：15655621
> 
> 赞同：14
> 
> 时间：2013-03-27T09:37:25.960
> 
> 标签：css, media-queries

我有这个 html 和 css 代码：

```
<div class="wrapper">
    <div class="a"></div>
    <div class="b"></div>
</div>

@media all and (max-width: 400px), (max-height: 300px) {
    .wrapper .a {
        ....
        ....
    }
    wrapper. .b {
        ....
        ....
    }
    ....
    ....
} 
```

现在我希望每当 wrapper 获得“like-small”类时，即使屏幕不小，所有小屏幕的样式都将适用。我不想在媒体查询中复制 css 代码。我该如何解决？

另一种解决方案是强制应用媒体查询。有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-17T08:35:23.367

您可以尝试使用 javascript。这句话设置视口宽度并强制浏览器应用您的媒体查询：

```
$('meta[name="viewport"]').prop('content', 'width=400'); 
```

这取自这个答案： [https](https://stackoverflow.com/a/20137580/1401341) ://stackoverflow.com/a/20137580/1401341 正如有人在评论中所说，这仅适用于支持`viewport`标签的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-23T14:48:23.780

你可以用一点 javascript 来做这样的事情。

简而言之，您会将媒体查询移出 css，并在 JS 中使用`window.matchMedia`.

当您知道哪个匹配时，您可以将 className 添加到`<html>`标签中，类似于 Modernizr 的工作方式。所以在手机上你会看到`<html class="like-small">`。

您的 css 将被编写为利用这些便利类，而不是使用本机媒体查询：

```
.like-small wrapper.a {}
.like-large wrapper.a {} 
```

（我也喜欢添加 .not-like-small、.not-like-medium 类`<html>`，以进一步简化 css）

所以现在，在匹配常规媒体查询并将适当的类名附加到文档之后，RWD 几乎可以正常工作。如果您想强制使用特定样式，您可以重写 HTML 标记上的 classNames 以影响整个页面，或者将 className 添加到任何父元素以仅影响页面的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T14:10:27.247

在较新版本的 Chrome 中，您可以[“模拟”移动设备](https://developer.chrome.com/devtools/docs/mobile-emulation)，以便在桌面浏览器中触发/测试您的媒体查询。（Internet Exploder 11[具有相同的行为！](http://msdn.microsoft.com/en-us/library/ie/dn255001(v=vs.85).aspx)）您可能需要在应用仿真后刷新浏览器；Chrome 35 仍然部分应用媒体查询，直到我在相关选项卡中点击刷新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-23T15:11:41.377

我知道这个问题很老，但希望这是您正在寻找的（因为没有答案）。而且我也不知道在你的 CSS 中添加一个特异性类是否违反了你不重复 CSS 的要求。

您可以通过更改查询的定义来实现您想要做的事情`@media`。基本上，与其说您希望屏幕变得小于某个值时发生某些事情，不如让您的小屏幕 CSS 远离**媒体**查询，并为更大的屏幕设置媒体查询。

然后，您只需要更改调用 CSS 的顺序，并将特定性添加到要调用 class 的样式中`like-small`。

HTML：

```
<div class="wrapper like-small">
    <div class="a"></div>
    <div class="b"></div>
</div>

<div class="wrapper">
    <div class="a"></div>
    <div class="b"></div>
</div> 
```

CSS：

```
.wrapper.like-small .a,
.wrapper .a {
        height:200px;
        width:200px;
        background:purple;
    }

.wrapper.like-small .b,
    .wrapper .b {
       height:200px;
       width:200px;
       background:blue;
 }

@media all and (min-width: 400px), (min-height: 300px) {
    .wrapper .a {
        height:100px;
        width:100px;
    background:yellow;
    }
    .wrapper .b {
       height:100px;
        width:100px;
    background:red;
    }
} 
```

和小提琴：http: [//jsfiddle.net/disinfor/70n37hhj/](http://jsfiddle.net/disinfor/70n37hhj/)

希望这就是你所追求的（一年半以前:)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-03-27T09:41:58.787

为这些部分添加相同的类。

```
<div class="wrapper">
    <div class="makeMeShine a"></div>
    <div class="makeMeShine b"></div>
</div> 
```

a 和 b 可以有自己的自定义样式:)

# perl - 在向量末尾添加一个元素

> ID：15655623
> 
> 赞同：0
> 
> 时间：2013-03-27T09:37:32.040
> 
> 标签：perl

我想在已经存在许多元素的向量末尾添加数字“1”或“0”。假设我有不同长度的二维向量，比如

```
vector[0][0] = 1
vector[0][1] = 3
vector[1][0] = 2
vector[1][1] = 4
vector[1][2] = 5 
```

我想在每个向量的末尾添加数字 1 或 0（基于 if 命令）；输出应该是：

```
vector[0][0] = 1
vector[0][1] = 3
vector[0][2] = 1
vector[1][0] = 2
vector[1][1] = 4
vector[1][2] = 5
vector[1][3] = 0 
```

其中添加的新元素是`vector[0][2] = 1`和`vector[1][3]=0`。

我想到了类似的东西：

```
for my $i (0..$#vector) {
    for my $j (0..$#{ $vector[$i] }) {
    if($prob_friendship > (my $random_number=rand()) ) {
        push  @{ $vector[$i][$j] }, 1;
    }
    else {
         push  @{ $vector[$i][$j] }, 0;
        }
    }
} 
```

但它给了我错误`Can't use string ("1") as an ARRAY ref while "strict refs" in use at distribuzione2.pl line 42, <STDIN> line 5.`

有什么帮助吗？

* * *

该`$prob_friendship`值在键盘​​输入中给出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:53:18.790

您可以按原样使用数组引用：

```
for my $aref (@vector) {      # will iterate over array refs
    if ($prob > rand()) {
        push @$aref, 1;       # dereferencing the aref
    } else {
        push @$aref, 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T09:44:28.257

不需要嵌套循环，您只需要遍历第一个数组索引。

您可以像现在一样迭代使用`$i`，然后使用`push @{$vector[$i]}, ...`

或者，如果您实际上不需要知道数组索引（并且使用@TLP 答案的道具），您可以直接遍历存储在第一个维度中的各个引用，`@vector`并在三行中完成整个操作：

```
for my $ref (@vector) {
    push @$ref, ($prob_friendship > rand()) ? 1 : 0;
} 
```

# apache-flex - FLEX：调整图像大小后，imageRotate 无法正常工作

> ID：15655624
> 
> 赞同：0
> 
> 时间：2013-03-27T09:37:33.527
> 
> 标签：apache-flex

请帮帮我ㅠㅠ

我正在制作 ImageEditor。但我对图像旋转功能有疑问。

当我加载图像然后旋转它时，旋转功能工作得很好。

但是在调整大小（宽度，高度）加载图像后，旋转工作可笑......

像素图像的宽度，高度，它只旋转图像的内容..

结果画质下降...

这是截图。

哦..我不能发布图片..因为声誉限制... :-<

[http://blog.naver.com/hago89n/150164439917](http://blog.naver.com/hago89n/150164439917)

请访问我的博客并确认截图..

你能理解我的问题吗？

嗯..代码在这里

//调整按钮点击处理程序的大小

```
private function btn_resize_clickHandler(event:MouseEvent):void
{
        image.width = parseInt(ti_width.text.toString());
    image.height = parseInt(ti_height.text.toString());
} 
```

//旋转按钮点击处理程序

```
private function btn_rotateCCW_clickHandler(event:MouseEvent):void
{//Rotate Counter ClockWise
    var o_rotateimage:RotateImage = new RotateImage();
    o_rotateimage.rotateCCW(image);
} 
```

//RotateImage.as中的旋转函数

```
public function rotateCCW(image:Image):void
{
    m = new Matrix();    
    m.rotate(Math.PI/2);
    m.tx = image.height;
    var bd:BitmapData = new BitmapData(image.height as int, image.width as int);
    bd.draw(image, m);
    image.source = new Bitmap(bd);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:05:31.793

我认为您应该对这两种操作进行矩阵转换。如果您只是更改 Image 对象的大小，则并非在所有情况下都可以正常工作。

这是我的[这个](http://it-skills.su/sosamples/webspark46/imageeditor/SO_ImageEditor.html)例子的代码。

//应用

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600">

<fx:Script>
    <![CDATA[
        import com.imageeditor.RotateImage;

        [Embed(source="/assets/img/chart.png")]
        [Bindable]
        public var chartPng:Class;

        private var o_rotateimage:RotateImage = new RotateImage();

        private function btn_resize_clickHandler(event:MouseEvent):void
        {
            o_rotateimage.scale(image, int(ti_width.text)/image.width, int(ti_height.text)/image.height);
        }

        private function btn_rotateCCW_clickHandler(event:MouseEvent):void
        {
            o_rotateimage.rotateCCW(image);
        }
    ]]>
</fx:Script>

<s:VGroup x="10" y="10">
    <s:HGroup>
        <s:TextInput id="ti_width" text="300" width="40"/>
        <s:TextInput id="ti_height" text="200" width="40"/>

        <s:Button label="Resize" click="btn_resize_clickHandler(event)"/>
        <s:Button label="Rotate" click="btn_rotateCCW_clickHandler(event)"/>
    </s:HGroup> 
    <s:HGroup width="800" height="600" horizontalAlign="center" verticalAlign="middle">
        <s:Image id="image" source="{chartPng}" width="600" height="400"/>
    </s:HGroup>

</s:VGroup>
</s:Application> 
```

//旋转图像.as

```
package com.imageeditor
{
import flash.display.Bitmap;
import flash.display.BitmapData;
import flash.geom.Matrix;

import spark.components.Image;

public class RotateImage
{
    private var m:Matrix;

    public function rotateCCW(image:Image):void
    {
        var w:int = image.width;
        var h:int = image.height;

        m = new Matrix();    
        m.rotate(Math.PI/2);
        m.tx = image.height;
        var bd:BitmapData = new BitmapData(image.height as int, image.width as int);
        bd.draw(image, m);

        image.width = h;
        image.height = w;

        image.source = new Bitmap(bd);
    }

    public function scale(image:Image, kx:Number, ky:Number):void
    {
        var w:int = image.width;
        var h:int = image.height;

        m = new Matrix();  
        m.scale(kx, ky);

        var bd:BitmapData = new BitmapData(w*kx as int, h*ky as int);
        bd.draw(image, m);

        image.width = w*kx;
        image.height = h*ky;

        image.source = new Bitmap(bd);
    }
}
} 
```

# algorithm - 在走廊寻找星路

> ID：15655629
> 
> 赞同：1
> 
> 时间：2013-03-27T09:37:50.673
> 
> 标签：algorithm, path-finding, a-star

我正在为走廊内的移动机器人寻路实施 A*。到目前为止，路径是在走廊内生成的，但它会沿着障碍物的所有边缘向右滑动，但我更喜欢路径应该位于走廊的中间。1.是否有任何平滑算法可以做到这一点？2.如何包括转向约束，以便我可以获得现实/可行的路径？3.如何对“转弯”进行惩罚以避免曲折路径。

由于我是 A* 算法的新手，我发现上述问题很困难。参考任何链接，也欢迎书籍..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:02:51.203

您可以通过将其缩小 1 格来预先形成运行 A* 的字段，以便与 4 路邻域中无法通行的单元格相邻的单元格将变得无法通行。然后你得到的 A* 路径将更靠近走廊的中心。当然，有几条走廊可能会完全无法通行，但这是意料之中的，因为我们实际上是在模拟一个 3x3 十字形机器人绕着网格走动，而 3x3 十字形无法通过 2xN 路径。

关于增加转弯成本 - 您必须将当前方向添加到包含 A* 数据的数组中，并实现一个双参数函数，该函数将为（旧方向，新方向）一对参数返回一个非负值。说，“如果 old_direction 不等于新方向，则返回 1，否则返回 0”。然后将该函数的结果添加到您为 A* 迭代的每个步骤计算的任何成本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:45:39.433

您可以简单地将可用区域限制在走廊的中间。

# android - 为什么有些安卓手机没有安装 Google Play 服务？

> ID：15655634
> 
> 赞同：1
> 
> 时间：2013-03-27T09:38:07.310
> 
> 标签：android

我目前正在集成 Google Maps v2，并且没有 Google Play 服务就无法运行。我知道我可以通过

```
 GooglePlayServicesUtil.isGooglePlayServicesAvailable 
```

但是，有些手机安装了这些服务而有些没有安装这些服务的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:45:56.607

Google Play 服务可能无法使用的原因：

1.  用户使用非 Play 设备（如 Amazon Kindle Fire）
2.  用户在应用设置菜单中禁用了 Google Play 服务。
3.  用户在有根设备上卸载了 Play 服务。
4.  用户在旧设备上进行了出厂重置。重新启动后，Google Play 服务可能会在一段时间内不可用（Google Play 最终会在几天内安装它们。来自文档：`In general, devices running Android 2.2 (Froyo) or later and have the Google Play Store app installed receive updates within a few days`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:43:58.940

一些 android 手机使用自定义 rom，它们不包括 google play 或任何其他 google 应用程序。如果您要求，您可以安装它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:44:00.713

有未经谷歌认证的设备，此类设备将不具备播放服务。例如亚马逊安卓设备和一些中国设备。还有一个案例，比如我老婆的三星 Galaxy Y。它的存储内存非常低，现在没有可用的，所以从来没有在上面安装过播放服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T09:41:52.073

一些制造商已尝试创建自己的 Google Play 版本。亚马逊就是一个典型的例子。

# c++ - c++模板使用与成员函数指针

> ID：15655641
> 
> 赞同：3
> 
> 时间：2013-03-27T09:38:42.860
> 
> 标签：c++, templates, member-function-pointers

下面根本无法编译，我无法修复它。希望一个好人能让我明白如何解决这个例子。

谢谢

我尝试编译：

```
# make
g++    -c -o client.o client.cpp
client.cpp: In function `int main()':
client.cpp:7: error: missing template arguments before "t"
client.cpp:7: error: expected `;' before "t"
client.cpp:8: error: `t' undeclared (first use this function)
client.cpp:8: error: (Each undeclared identifier is reported only once for each function it appears in.)
<builtin>: recipe for target `client.o' failed
make: *** [client.o] Error 1 
```

client.cpp - 主要

```
#include<stdio.h>
#include"Test.h"
#include"Other.h"

int main() {

        Test<Other> t = Test<Other>(&Other::printOther);
        t.execute();

        return 0;
} 
```

测试.h

```
#ifndef TEST_H
#define TEST_H

#include"Other.h"

template<typename T> class Test {

        public:
                Test();
                Test(void(T::*memfunc)());
                void execute();

        private:
                void(T::*memfunc)(void*);
};

#endif 
```

测试.cpp

```
#include<stdio.h>
#include"Test.h"
#include"Other.h"

Test::Test() {
}

Test::Test(void(T::*memfunc)()) {
        this->memfunc= memfunc;
}

void Test::execute() {
        Other other;
        (other.*memfunc)();
} 
```

其他.h

```
#ifndef OTHER_H
#define OTHER_H

class Other {
        public:
                Other();
                void printOther();
};

#endif 
```

其他.cpp

```
#include<stdio.h>
#include"Other.h"

Other::Other() {
}

void Other::printOther() {
        printf("Other!!\n");
} 
```

生成文件

```
all: main

main: client.o Test.o Other.o
        g++ -o main $^

clean:
        rm *.o

run:
        ./main.exe 
```

Makefile 将允许轻松编译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:50:52.760

不幸[的是，不可能](https://stackoverflow.com/a/2143606/493122)将模板类的实现写入 cpp 文件（即使如果您确切知道要使用的类型[有一种解决方法）。](https://stackoverflow.com/a/1724632/493122)模板类和函数应该在头文件中声明和实现。

您必须`Test`在其头文件中移动实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:51:07.343

简单修复：将 Test.cpp 中的函数定义内联移动到 Test.h 中的类中

模板类的成员函数的定义必须在**同一个 compiler-unit**中。通常在定义类的同一个 .h 中。如果您没有将函数的定义内联到类中，并且只想要声明，则需要在每个函数的定义（以及定义的一部分）之前添加“魔术”字样`template<typename T>`。这只是为您提供修改参考文档的方向和一些示例的大致答案。

# c# - 使用条件 LINQ 设置值

> ID：15655643
> 
> 赞同：0
> 
> 时间：2013-03-27T09:38:48.580
> 
> 标签：c#, linq, entity-framework, linq-to-sql, repository

我正在从表中选择一些数据，其中有`A`一列`value`和类型与表有关系，`B`其中有一列`coef`包含`(-1,0,1)` 当从我检索时`A`我想乘以`value`with `coef`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T09:41:03.373

像这样的东西？

```
var result = from a in tableA
             join b in tableB on a.Key = b.ForeignKey
             select new 
             {
                 Value = a.value * b.coef
             }; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T09:47:09.193

您可以使用 LINQ 表达式在一行中执行此操作：

```
dt.Rows.ForEach(x => x["value"] = (double)x["value"] * (double)x["coef"]); 
```

或者您可以在 DataTable 中添加另一列：

```
dt.Columns.Add("Result", typeof(decimal));
dt["result"] = "value * coef"; 
```

# ios - Image segmentation for iOS

> ID：15655646
> 
> 赞同：8
> 
> 时间：2013-03-27T09:39:28.107
> 
> 标签：ios, objective-c, uiimage, cgimage

I need a way to transform image containing human into a image containing only body sihlouette in one color. First i took a look at Canny edge detector (OpenCV implementation), but this may lead to problems with background of the image.

I`ve tried with GrabCut OpenCV implementation. This works fine in most of cases, bit it have extremely bad time performance, example for 480x320 image it takes up to 1 minute to process. Also the problem with grabcut is that user need to make interaction and to set the background area and user area, which in my case is not allowed.

So, maybe you can give me ideas about some another approach using something different than GrabCut, or suggest me how to enhance GrabBut time performance(Maybe gpu implementation). Also i need a suggestion about algorithm that will locate human body, and help grabcut algorithm with positioning of body/background area.

Example:

![Example](../Images/ade3e15ca01dc7ee240f4045d3a484c4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T21:55:50.430

可以提出两件事来调查，这可能会有所帮助：

1) [CIDetector](http://developer.apple.com/library/ios/#documentation/CoreImage/Reference/CIDetector_Ref/Reference/Reference.html)类

2)[适用于 iOS 的 OpenCV 库](https://github.com/macmade/OpenCV-iOS)。这个项目看起来不活跃，但你可以[在这里](https://github.com/search?q=OpenCV-iOS&ref=cmdform)找到一些分叉或相关项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-20T20:54:40.567

将图像缩小一半分辨率（使用`pyrDown()`），运行 GrabCut，使用轮廓检测​​对剪切进行矢量化，并根据需要进行放大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:13:02.573

OpenCV would be a good option for something like that. You can get a pre-built library for ios on the official site:

[http://opencv.org/](http://opencv.org/)

And there is also a Tutorial-App using OpenCV, that may have a similar ability to what you're looking for:

[http://computer-vision-talks.com/](http://computer-vision-talks.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T08:34:12.800

您可以为此使用 Canny 的边缘检测。

[http://iosgpuar.blogspot.com/2011/12/canny-edge-detection-using-fragment.html](http://iosgpuar.blogspot.com/2011/12/canny-edge-detection-using-fragment.html)

# html - HTML/CSS when hover link with style italic other links stay stable

> ID：15655647
> 
> 赞同：1
> 
> 时间：2013-03-27T09:39:30.283
> 
> 标签：html, css, hyperlink, hover, italic

I have a little problem when i hover menu link other links shift to sideways, but i need that my other links would stay stable. How can i fix that?

HTML:

```
<div id="top">
    <a href="index.php?id=pagrindinis"><div id="logo"></div></a>
    <div id="menu">
        <ul id="nav">
            <li><a href="index.php">Pagrindinis</a></li>
            <li><a href="#">Taisyklės</a></li>
            <li><a href="#">Pamokos</a></li>
            <li><a href="#">Kontaktai</a></li>
            <li><a href="#">Facebook</a></li>
        </ul>
    </div> 
```

CSS:

```
#menu #nav {
    font-family: Segoe UI, Arial, sans-serif;
    font-size: 14px;
    color: #FFFFFF;
    list-style:none;
}

#menu #nav li {
    display: inline-block;
    padding: 0px 10px 0px 10px;
}

#menu #nav li a {
    font-family: Segoe UI, Arial, sans-serif;
    font-size: 14px;
    color: #FFFFFF;
    text-decoration: none;
}

#menu #nav li a:hover {
    color: #0a813c;
    font-style: italic;
} 
```

JSFIDDLE: [http://jsfiddle.net/nJgyn/1/](http://jsfiddle.net/nJgyn/1/)

Thanks for help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-20T20:28:51.263

这是另一种解决方案，您可以添加空格/nbsp；在 A 标记之后，它将修复斜体悬停错误：

1.  html方法：

    `<a href="#">Link&nbsp;</a>`

2.  方法：

    `#menu #nav li a:after { content: "\0000a0"; }`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T09:46:28.887

这是因为你`font-style:italic`需要额外的空间。

您可以添加一些固定`width`到`li`.

```
#menu #nav {
  font-family: Segoe UI, Arial, sans-serif;
  font-size: 14px;
  color: #000;
  list-style: none;
}

#menu #nav li {
  display: inline-block;
  padding: 0px 10px 0px 10px;
  width: 50px;
}

#menu #nav li a {
  font-family: Segoe UI, Arial, sans-serif;
  font-size: 14px;
  color: #000;
  text-decoration: none;
}

#menu #nav li a:hover {
  color: #0a813c;
  font-style: italic;
}
```

```
<div id="menu">
  <ul id="nav">
    <li><a href="index.php">Pagrindinis</a></li>
    <li><a href="#">Taisyklės</a></li>
    <li><a href="#">Pamokos</a></li>
    <li><a href="#">Kontaktai</a></li>
    <li><a href="#">Facebook</a></li>
  </ul>
</div>
```

[JSfiddle](http://jsfiddle.net/mpHJy/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:57:03.837

```
#menu #nav li {
display: inline-block;
width: 100px;
text-align: center;
}

#menu #nav {
font-family: Segoe UI, Arial, sans-serif;
font-size: 14px;
color: white;
list-style: none;
padding: 0px;
display: table; 
```

}

# html - ARIA mobile menu, correct label

> ID：15655648
> 
> 赞同：2
> 
> 时间：2013-03-27T09:39:32.557
> 
> 标签：html, accessibility, wai-aria

I have a responsive website, once the website reaches mobile width the menu gets hidden and only shown when you click the menu icon. This icon is hidden within the HTML until you reach this break point.

Question: what is the correct label that I should be giving the element?

I was thinking of adding `aria-hidden="true"` which is correct for desktop browsers but on mobile it's not hidden.

```
<a href="#" id="menu-phone" data-menu="mobile" title="Show Menu">
    <span>Menu</span>
    <i class="icon"></i>
</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:58:53.577

`aria-hidden="true"`没有必要，因为：

*   在桌面上，链接已经隐藏在 CSS 中（通过`display: none`或`visibility: hidden`）
*   在移动设备上显示并且必须被屏幕阅读器和其他 AT 感知

我猜该元素`a > span`在视觉上是隐藏的（在视口之外），并且只有图标在`i`移动设备上显示？然后您可以在其中包含文本“显示菜单”并且没有其他属性，无论是 ARIA 还是`@title`必要的。
如果显示“菜单”，那么是的，链接标题`a[title="Show Menu"]`更适合更明确的链接。

注意：如果您正在使用 ARIA 角色地标（并且应该），`[role="navigation"]`则应将其添加到桌面上可见的导航容器和移动设备上唯一可见的导航部分中。否则，用户将跳转到不可见的空白处，不知道导航在哪里，也不知道有一个特殊的链接/按钮可以再次显示它。
跳过链接也一样：它应该指向放置在导航和此链接/按钮之前的元素。

# php - Magento multi store remove add to cart from one store and show on others

> ID：15655649
> 
> 赞同：0
> 
> 时间：2013-03-27T09:39:34.503
> 
> 标签：php, magento, magento-1.7

I have a magento multi-store website. I have three stores. I want to remove/hide the Add to cart button from one store. But the other stores should display it.

Can I do this from admin panel? What is the easyest solution?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:40:47.487

在您的模板中，您可以检查商店 id，例如，如果您不希望它显示在商店 id 3 中...

app/design/frontend/[package]/[theme]/template/catalog/product/view/addtocart.phtml

```
...
<?php if ($_product->isSaleable() && Mage::app()->getStore() != "3"): ?>
    <div class="add-to-cart">[...]</div>
<?php endif ?>
... 
```

这应该删除产品页面的添加到购物车。

* * *

您可以将按钮留在那里，但禁用它通过一个模块添加到购物车的功能，并覆盖`Mage_Checkout_CartController::addAction()`. 您可以重定向用户并添加一条消息，说明它已被禁用等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:13:55.883

最好的解决方案是使用模块。现在我可以从每个商店（或网站/全球）的管理面板设置为：

1.  显示“加入购物车”按钮和价格
2.  隐藏两者
3.  仅显示“加入购物车”按钮
4.  只显示价格

而且我还可以将此设置设置为适用于某些用户组。不需要额外的主题或一些“硬代码” :) 我们需要干净地工作..

这是模块（它是免费的）：

[http://www.magentocommerce.com/magento-connect/hide-cart-price-5914.html](http://www.magentocommerce.com/magento-connect/hide-cart-price-5914.html)

注意：这个模块可能无法开箱即用。当我安装模块时，它给出了一个错误页面，其中在 Rule.php 中找不到类“Zend_log”，当我访问“系统-> 配置”和“客户-> IG 隐藏购物车和价格规则”并在每个产品的前端。好吧，这是因为 Rule.php 文件中的函数名称不好。我没有创意的解决方案是（因为时间较晚）：转到：/app/code/community/IG/HideCartPrice/Model/Rule.php 查找第 129 行：public function load($id) 将其更改为：public function load1 ($id) 查找第 131 行： parent::load($id); 将其更改为： parent::load1($id);

希望我有所帮助！

# javascript - Get href value from a variable

> ID：15655651
> 
> 赞同：0
> 
> 时间：2013-03-27T09:39:37.970
> 
> 标签：javascript, html

I have been trying to take out the **href** value from a variable which contains a link.

This is my variable which contains a link.

```
var mylink = "<a href='#!takethisout'><img src='http://google.com/'></a>" 
```

I tried to get the value **#!takethisout** , and I also googled it but there are bunch of pages with how to get the href value from a real link.

Is this possible? Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T09:44:37.607

我可能是错的，但我认为您要求的是 a `documentFragment`，以便您可以`href`从字符串中提取：

```
var mylink = "<a href='#!takethisout'><img src='http://google.com/'></a>";
var div = document.createElement('div');
div.innerHTML = mylink;
var href = div.firstChild.getAttribute('href'); 
```

[http://jsfiddle.net/userdude/js8r2/](http://jsfiddle.net/userdude/js8r2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T09:49:45.203

如果你可以使用 jQuery，你可以这样做：

```
var mylink = "<a href='#!takethisout'><img src='http://google.com/'></a>";

var href = $(mylink).attr('href');
alert(href); 
```

示例：http: [//jsfiddle.net/pn8M4/](http://jsfiddle.net/pn8M4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T09:50:39.433

字符串拆分呢？

```
var hrefAttr = mylink.split(/href='(.*?)'/)[1] 
```

[http://jsfiddle.net/SzHLu/](http://jsfiddle.net/SzHLu/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T09:50:02.220

您需要正则表达式来解析部分字符串。

 ~~~~```
mylink.match(/href=["']([^"']+)["']/i)[1]; 
```~~  ~~```
mylink.split(/href=["']([^"']+)["']/i)[1]; 
```

当心 - 它**实际上并不解析 html 并寻找 href 属性**- 它只会找到匹配正则表达式的字符串。所以在这种情况下

```
<a href=#!foobar> 
```

不起作用

upd：在不存在匹配的情况下，使用 split 不会破坏代码 - 感谢@freshbm~~~~

# android - using one AsyncTask instead of two AsyncTasks in android

> ID：15655652
> 
> 赞同：0
> 
> 时间：2013-03-27T09:39:40.847
> 
> 标签：android, android-asynctask

I have the following scenario: in my application I am using AsyncTask A to connect to the database and check the login. This AsyncTask's doInBackground method returns a boolean value. For some user interaction I am using AsyncTask B to connect to the same database and get back a ResultSet. Everything is working fine, but I want to use only one AsyncTask. How can I do this?

AsyncTask A code

```
@Override
protected Boolean doInBackground(String... arg0) {

    String username = arg0[0];
    String password = arg0[1];

    Boolean v = false;
    ResultSet rs = null;
    Statement stmt = null;

    try {
        DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());
        conn = DriverManager.getConnection(jdbcURL, user, passwd);

        try {
            stmt = conn.createStatement();
            try {
                rs = stmt
                        .executeQuery("execute"
                                + username + "'");

                if (rs.next()) {
                    String p=rs.getString("pass_word");
                    if (p==null){
                        if(password.equals(""))
                            v = true;}
                    else
                        if(p.equals(password))
                            v=true;
                }

            } finally {
                try {
                    rs.close();
                } catch (Throwable ignore) {
                }
            }
        } finally {
            try {
                stmt.close();
            } catch (Throwable ignore) {
            }
        }

    } catch (java.sql.SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (java.lang.ClassCastException e) {
        e.printStackTrace();
    }

    return v;

} 
```

AsyncTask B code

```
@Override
protected ResultSet doInBackground(String... params) {

    Statement stmt = null;
    ResultSet rs = null;
    try {
        if (conn == null) {
            DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());
            conn = DriverManager.getConnection(jdbcURL, user, passwd);
        }

        stmt = conn.createStatement();
        rs = stmt.executeQuery(params[0]);

    } catch (SQLException e) {
        e.printStackTrace();
    }
    return rs;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:00:28.563

我认为你能做的最好的事情（假设你的应用程序中会有更多的数据库访问案例）是使用你的 AsyncTask B （无论如何它已经很通用）作为所有其他任务的**基类**，并为特殊任务扩展任务像从它登录这样的情况，只需根据需要覆盖`onPreExecute`and`onPostExecute`方法。

因此，您可以通过扩展 AsyncTask B 来重写您的 AsyncTask A，并将结果集的检查移至 onPostExecute。或者，如果这太耗时，您可以通过在获得 ResultSet 后`handleResultSetInBackground`调用的方法扩展通用 AsyncTask B，`doInBackground`并且可以在派生类中覆盖该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:55:59.177

`doInBackground`在任务 A 的方法中附加在任务 B 中执行的代码。使用该`onPostExecute`方法执行任何后期处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:56:04.520

您可以执行 onPreExecute() 检查登录。然后 doInBackground(Params...) 取回一个 ResultSet

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)描述得更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T09:56:59.600

这是一个应该可以工作的模拟实现：

```
public class MyTask extends AsyncTask<Params, Void, Integer> {
    private ResultSet result;
    private int option;

    public MyTask(int option) {
        this.option = option;
    }

    @Override
    protected Integer doInBackground(Params... params) {
        switch (option) {
            case checkLogin: {
                // Do checks from first Asynctask here and return an int like normal
            } case getResults: {
                // Get your resultSet here and store:
                this.result = results;
            }
        }
    }

    public ResultSet getResults() {
        if (this.result != null) { 
            return this.result;
        } else {
            // Throw error or log message here
        }
    }
} 
```

另一种解决方案是扩展`AsyncTask<Params, Void, Object>`，然后你可以传递你想要的任何东西，而不是使用另一种方法来获得结果。

# sync - System Verilog Counterpart for 'sync' of Specman e

> ID：15655659
> 
> 赞同：1
> 
> 时间：2013-03-27T09:40:01.480
> 
> 标签：sync, wait, system-verilog, specman

I would like to ask what is the counterpart of `sync` of Specman e in the System Verilog Language.

I understand that `@ event_indentifier` is equivalent to `wait @ event` of Specman e. But how about `sync @ event` ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:30:36.857

IEEE 1647 13.1.1 的一部分说

> 同步动作与等待动作类似，不同之处在于等待动作**总是**需要至少一个 TCM 的采样事件周期才能继续执行。使用同步操作，可以在同一时间步继续执行。

1647-2008 年草案的一部分

为了`sync`

> 当一个 TCM 达到同步动作时，它的执行将被暂停，以便其他一些 TCM 或暂停的 TCM 本身可以被调度执行。

为了`wait`

> 当一个 TCM 达到等待动作时，它的执行将被暂停，以便其他一些 TCM 可以被调度执行。暂停的 TCM 本身应保持空闲状态，直到下一次采样事件发生时才进行调度。

我认为您正在比较不同的事物。*SystemVerilog*是模拟引擎和内核，而*Specman*就像内核上的附加组件或插件，用于监视和检查您用*e*语言编写的内容。在*SystemVerilog*中，事件用于其模拟事件，*Specman*还为其 TCM 流程创建自己的事件。所以在*Specman*中，它有自己的 TCM 进程调度。如果你使用`sync`，它可以在没有额外循环的情况下进行同步；使用`wait`并导致至少一个周期为采样周期。当然，如果`sync`和`wait`没有时间表达式，它们都使用 TCM 默认采样事件，并且可能有一个或多个周期。

*SystemVerilog*也是基于事件的模拟器。它确实在每个时间步中都有增量周期。[您可以在http://standards.ieee.org/getieee/1800/download/1800-2012.pdf](http://standards.ieee.org/getieee/1800/download/1800-2012.pdf)下载 IEEE 1800-2012 SystemVerilog LRM，其调度参考算法见 4.5。但在硬件建模中，在当前仿真时间步长中没有明确`wait`的零周期延迟同步，因为仿真器会自动安排运行敏感列表的过程。如果必须将*Specman*与*SystemVerilog*进行比较，则应该是专门的*SystemVerilog Assertion*语法。SVA中的`##0`语法使断言过程在下一个断言表达式之前具有零周期延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:39:50.760

对于命名事件，您可以使用该`triggered`属性。

```
event ev;
...
wait (ev.triggered); 
```

有关完整说明，请参阅 2012 SystemVerilog LRM 的第 15.5.3 章。

# windows-8 - Getting MAC Address in Windows 8 app

> ID：15655669
> 
> 赞同：0
> 
> 时间：2013-03-27T09:40:45.017
> 
> 标签：windows-8, mac-address

I am creating a windows 8 app. I have a requirement to save MAC address of my device but I could not find a way to get the MAC Address.

Can anybody help me out??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:50:31.300

[该线程](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/54883f27-fd1b-402c-aa14-264257434c32)说，从设计上讲，Windows Store 应用程序是不可能的。评论提供了一些替代方案：

*   可从 Windows 应用商店应用程序访问的 WIN32 和 COM API 列表：http: [//msdn.microsoft.com/en-us/library/windows/desktop/br205757.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/br205757.aspx)
*   使用 ASHWID 唯一标识符，使用它可以为应用程序创建每个设备逻辑：http: [//msdn.microsoft.com/en-us/library/windows/apps/jj553431.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj553431.aspx)
*   来自 Microsoft 的示例供下载，成功获取系统型号和系统制造商等信息：﻿ [﻿http://code.msdn.microsoft.com/windowsapps/Device-Enumeration-Sample-a6e45169](http://code.msdn.microsoft.com/windowsapps/Device-Enumeration-Sample-a6e45169)

# objective-c - Which form of Objective-C init method is preferred?

> ID：15655670
> 
> 赞同：4
> 
> 时间：2013-03-27T09:40:45.647
> 
> 标签：objective-c, idioms

So far I've seen it done three ways:

1:

```
- (instancetype)init
{
    self = [super init];
    if (self) {
        // ...
    }
    return self;
} 
```

2:

```
- (instancetype)init
{
    if (self = [super init]) {
        // ...
    }
    return self;
} 
```

3:

```
- (instancetype)init
{
    if ((self = [super init]) == nil)
        return nil;
    // ...
    return self;
} 
```

Which form is more idiomatic Objective-C?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:23:34.060

1.  大多数“现代”方法（在 Xcode 4 中默认使用）。

    ```
    - (instancetype)init
    {
        self = [super init];
        if (self) {
            // Initialization code here.
        }
        return self;
    } 
    ```

2.  旧版本 Xcode 中的默认设置。

    ```
    - (instancetype)init
    {
        if (self = [super init])
        {
            // Initialization code here.
        }
        return self;
    } 
    ```

3.  虽然“合法”但很少见，我不会推荐它。

传统上，在 Objective-C 1.0 中，init 方法返回`id`，在 Objective-C 2.0 的更新版本中，建议改为返回`instancetype`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T09:41:47.273

都是一样的，没关系。我建议使用前两个中的一个。最后一个很少做。

您可能不会从 Apple 那里找到有关此级别的任何建议。他们声明，您应该将超级的 init 的返回值设置为 self。你如何做到这一点取决于你。

[实现初始化器](http://developer.apple.com/library/ios/documentation/general/conceptual/CocoaEncyclopedia/Initialization/Initialization.html#//apple_ref/doc/uid/TP40010810-CH6-SW58)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T09:45:01.157

这三种方法都是正确的，我们通常会这样做。

```
- (id) init
{
    self = [super init];

    if (self != nil)
    {
        // your code here
    }

    return self;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T09:51:17.507

第一个或第二个是首选。无需检查它是否为 nil，因为“if”条件会自动检查。以下是使用 init 的标准方法。

```
- (id)init
{
    self = [super init];
    if (self) {
        <#initializations#>
    }
    return self;
} 
```

# ibm-mobilefirst - org.apache.http.conn.HttpHostConnectException

> ID：15655681
> 
> 赞同：1
> 
> 时间：2013-03-27T09:40:58.383
> 
> 标签：ibm-mobilefirst, httpconnection

当我尝试在 worklight 5.0.6 上连接到 URL [https://jazz.net时出现以下错误。](https://jazz.net)

> 过程调用错误。运行时：Http 请求失败：org.apache.http.conn.HttpHostConnectException：连接到 [https://jazz.net](https://jazz.net)被拒绝

这是我在日志中得到的响应：

> {"responseID":"6","errors":["运行时：Http 请求失败：org.apache.http.conn.HttpHostConnectException：连接到 https://jazz.net 被拒绝"],"isSuccessful":false, “警告”：[]，“信息”：[]}*/

这是适配器 xml 代码：

```
 <connectivity>
    <connectionPolicy xsi:type="http:HTTPConnectionPolicyType">
        <protocol>https</protocol>
        <domain>jazz.net</domain>
</connectionPolicy>
    <loadConstraints maxConcurrentConnectionsPerNode="2" />
</connectivity> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:23:59.293

`port`您还需要添加一个值为的子元素`443`。

# gnuplot - Gnuplot 稀疏矩阵显示

> ID：15655682
> 
> 赞同：1
> 
> 时间：2013-03-27T09:41:01.743
> 
> 标签：gnuplot, sparse-matrix

我有一个程序可以生成 Gnuplot 脚本来显示雅可比矩阵的模式。

对于密集矩阵，我获得了完全符合我要求的代码：

```
set terminal wxt persist
set title 'The Answer'
set palette defined(0 "white",1 "blue")
set grid front
set xrange [0:7]
set yrange [0:7] reverse
set size ratio -1
unset colorbox
plot '-' using ($1+0.5):($2+0.5):($3 == 0 ? 0 : 1) matrix with image notitle
1.00 0.00 0.00 0.00 1.00 1.00 0.00
1.00 0.00 1.00 0.00 0.00 0.00 1.00
1.00 0.00 1.00 0.00 0.00 0.00 1.00
1.00 1.00 1.00 0.00 0.00 1.00 0.00
0.00 0.00 1.00 0.00 1.00 0.00 0.00
0.00 0.00 1.00 0.00 1.00 0.00 0.00
0.00 0.00 1.00 0.00 1.00 1.00 1.00
e 
```

由于我的其余代码现在处理稀疏矩阵，因此我一直在尝试调整 Gnuplot 脚本的生成，以使用 Gnuplot 的二进制数据格式实现相同的结果。但是，到目前为止，如果不使用外部文件，我还没有成功。我该怎么办？

# c++ - Windows 服务属性 - 登录

> ID：15655687
> 
> 赞同：0
> 
> 时间：2013-03-27T09:41:09.737
> 
> 标签：c++, windows, service

所以我正在关注本教程[http://code.msdn.microsoft.com/windowsdesktop/CppWindowsService-cacf4948](http://code.msdn.microsoft.com/windowsdesktop/CppWindowsService-cacf4948)

我在服务管理控制台中启动服务时遇到问题。我收到错误消息“Windows 无法在本地计算机上启动服务错误 5 访问被拒绝”

但是我发现在服务的属性中，如果我转到登录选项卡并单击本地系统帐户而不是此帐户，我将尝试启动它。我只想知道这里到底发生了什么？它会以任何方式影响服务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:34:04.657

您已更改运行该服务的帐户。这可能有很多影响，最重要的是涉及权限。从安全的角度来看，限制服务拥有的权限总是很重要的。

此外，用户需要具有一些权限才能运行服务（例如`Log on as a service`）。这些可以在`Local Security Policy`->中设置`User Rights Assignment`（这可能会因您正在运行的窗口而异）。您尝试运行服务的用户似乎没有足够的权限来运行您的服务。尝试调查为什么会这样。

# java - 如何手动设置每个“页面”的哈希值

> ID：15655690
> 
> 赞同：0
> 
> 时间：2013-03-27T09:41:18.973
> 
> 标签：java, gwt, errai

使用 Errai-UI，您如何手动设置每个页面的哈希值。

例如：

```
MainPage.java
MainPage.html 
```

哈希将是`#MainPage`

我怎样才能将其更改为`#!MainPage`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T14:24:24.653

您可以使用注释的`path`属性设置哈希。`@Page`在回答您的具体问题时，请执行以下操作：

```
@Templated
@Page(path="!MainPage")
public class MainPage extends Composite {
  // ...
} 
```

# css - CSS | 两个背景

> ID：15655691
> 
> 赞同：0
> 
> 时间：2013-03-27T09:41:25.347
> 
> 标签：css

我有 wordpress 网站，我想更改背景，我需要两张图片作为背景示例：http: [//i.imgur.com/8HMY8al.png](http://i.imgur.com/8HMY8al.png)
我想要它的正文，代码现在是：

```
body {
    background: #fff;
    color: #494949;
    font-family: Arial,Trebuchet MS,Helvetica,sans-serif;
    font-size: 12px;
    line-height: 18px;
    background: url(images/bg1.png) top left repeat-x #D3D5D4;
} 
```

我需要在这里添加什么？我认为 bg2 需要适合屏幕（网站）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:42:58.100

将其分成两个 div 并为每个 div 应用不同的背景

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:50:01.893

您可以将单独的背景设置为`html`元素并将一个单独的背景设置为`body`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:18:44.180

With CSS3 tricks, you can apply multiple background to only one div. See this example :

```
body{
    background:url(images/img.gif) no-repeat left top, 
    url(images/img.gif) no-repeat right top, 
    url(images/img.gif) no-repeat left bottom, 
    url(images/img.gif) no-repeat right bottom;
} 
```

Careful with browsers compatibility. Hope it helped ;)

# list - 清理邮件列表

> ID：15655696
> 
> 赞同：0
> 
> 时间：2013-03-27T09:41:28.893
> 
> 标签：list, email

我有一个装满 3000 个邮件列表的记事本，但问题是除了空格和引号之外，我还需要删除重复的电子邮件，所以任何关于自动执行此操作的脚本的建议，而不是花费数小时来修复它谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-30T11:47:13.880

聚会迟到了，但我修改了一个脚本来读取包含电子邮件的文件，并使用 RFC822 正则表达式、域错字列表、mx 查找（感谢 eagle1 此处）和模棱两可的电子邮件过滤对其进行过滤。

该脚本可以像这样使用：

```
./emailCheck.sh /path/to/emailList 
```

并生成两个文件，过滤列表和模糊列表。两者都已从不符合 RFC822 的地址、没有有效 MX 域的电子邮件域和域拼写错误中清除。

然后，您可以使用以下方法删除重复项：

```
sort -u emaillist 
```

脚本可以在这里找到：[https ://github.com/deajan/linuxscripts](https://github.com/deajan/linuxscripts)

欢迎指正和评论：）

# asp.net - Rad 窗口打开为空白窗口

> ID：15655698
> 
> 赞同：0
> 
> 时间：2013-03-27T09:41:36.457
> 
> 标签：asp.net, telerik, radwindow

我让它工作，但我想知道它为什么会发生）

所以我有我的 rad 窗口：

```
<telerik:RadWindowManager ID="wndManager" runat="server">
        <Windows>
            <telerik:RadWindow ID="rwShippingAddressEdit" runat="server" Modal="True" VisibleStatusbar="False"  VisibleOnPageLoad="false" ShowContentDuringLoad="false">
                <ContentTemplate>
                    //content
                </ContentTemplate>
            </telerik:RadWindow>
        </Windows>
    </telerik:RadWindowManager> 
```

我有我的按钮来打开它：

```
 <telerik:RadButton ID="" Width="90" CssClass="button-next" runat="server" 
     ID="btnOpen" OnClientClicking="windowOpen" Text="Open" />

        function windowOpen(sender, args) {
            var oManager = GetRadWindowManager();
            oManager.open(null, "rwShippingAddressEdit");
            args.set_cancel(true);
        } 
```

此代码显示常规的默认空白窗口，但在另一个页面上，相同的代码可以正常工作并打开包含我的内容的窗口。

为了使它工作，我将此代码添加到 page_load 事件

```
rwShippingAddressEdit.OpenerElementID = btnOpen.ClientID; 
```

现在，当我按下`btnOpen`它时，它会打开两个窗口（一个空白窗口和包含内容的窗口）。两个页面都继承了相同的母版页，我不在后面的代码中使用 rad 窗口。但不知何故，相同的代码在页面页面上的工作方式不同。问题可能是什么？

这与验证器无关。我试过`CausesValidation="False"`了`btnOpen`。因此，如果您有任何想法，我将很高兴听到）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:57:09.293

试试这个替代方案，看看你是否有更好的结果：

```
var oWnd = $find("<%=rwShippingAddressEdit.ClientID%>");
oWnd.show(); 
```

不要使用这种方法设置 OpenerElementID 来验证它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:48:50.000

我猜你的页面上有几个经理，而 radopen() 没有使用你期望的那个，在这里阅读更多：[http ://www.telerik.com/help/aspnet-ajax/window-troubleshooting-wrong-window-打开.html](http://www.telerik.com/help/aspnet-ajax/window-troubleshooting-wrong-window-opened.html)

# objective-c - 在循环中声明一个指针

> ID：15655704
> 
> 赞同：0
> 
> 时间：2013-03-27T09:41:53.010
> 
> 标签：objective-c

每个人。我的“英语”不是很好，但我希望你能理解我的问题。

假设我有这样的代码

```
-(id) init
{
    if ( self = [super init] )
    {
        deck = [[NSMutableArray alloc] initWithCapacity:52];
        Card *newCard = [[Card alloc] init];

        for ( int suit = 0; suit < 4; suit++ )
            for ( int rank = 0; rank < 13; rank++ )
            {
                newCard.suit = suit;
                newCard.rank = rank;
                [deck addObject:newCard];
            }
        [newCard release];
    }
    return self;
} 
```

我觉得我在上述代码中有一个错误。我想在嵌套循环中创建 52 个不同的对象并将每个对象添加到数组中。但我怀疑我将有 52 个相同的对象，并且在数组中将有 52 个指向相同地址的指针，对吧？

如果我这样做会发生什么。

```
-(id) init
{
    if ( self = [super init] )
    {
        deck = [[NSMutableArray alloc] initWithCapacity:52];

        for ( int suit = 0; suit < 4; suit++ )
            for ( int rank = 0; rank < 13; rank++ )
            {
                Card *newCard = [[Card alloc] init]; // I guess every time newCard
                newCard.suit = suit;                 // created, it will point to 
                newCard.rank = rank;                 // another chunk of memory,
                [deck addObject:newCard];            // right?
                [newCard release] // Should I release newCard every time?
            }
    }
    return self;
} 
```

那么我可以通过哪种方式创建 52 张不同的卡片呢？谢谢你。如果您需要更多解释，请询问我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:59:54.987

第一个问题：您的第二个代码片段生成 52 个单独的对象，您将它们添加到数组中。正如您已经建议自己的那样，第一个片段只生成一个您添加到数组中的对象。因为它是一个对象，所以只有数组的所有成员都将携带相同的`.suit`和值`.rank`。

Als 已经建议，当您 nslog 对象时，您至少会看到它们在内存中的地址。当地址相同时，它就是相同的对象。

第二个问题：是的，除非你使用 ARC，否则你应该释放它。`addObject`将自动保留每个添加的对象，并在从数组中删除时释放它。因此，稍后从数组中获取对象并打算进一步使用它时要小心。然后你可能不得不再次保留它。

替代您的 -correct- 代码，您可以使用以下方法自动释放对象：

```
 Card *newCard = [[[Card alloc] init] autorelease]; // I guess every time newCard
        newCard.suit = suit;                 // created, it will point to 
        newCard.rank = rank;                 // another chunk of memory,
        [deck addObject:newCard];            // right?
        //[newCard release]; // not required, autoreleased 
```

（但是，发布声明后缺少分号。）

# php - 使用 pregmatch 获取 youtube/vimeo id

> ID：15655705
> 
> 赞同：1
> 
> 时间：2013-03-27T09:41:54.927
> 
> 标签：php, html, preg-replace, preg-match

如何获取 youtube 和 vimeo 视频嵌入代码的视频 ID？youtube 视频嵌入代码如下所示：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/dbPmWbqAJPs" frameborder="0" allowfullscreen></iframe> 
```

其中的 ID 是 dbPmWbqAJPs。

vimeo 嵌入代码如下所示：

```
<iframe src="http://player.vimeo.com/video/62468031?color=00ff00" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> 
```

本例中的 ID 为 62468031。

我不想替换那些确切的 id，而是有一个 pregmatch/pregreplace 可以在 vimeo 和 youtube 的任何嵌入中找到 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:50:19.080

尝试这个

维密欧

```
$string='<iframe src="http://player.vimeo.com/video/62468031?color=00ff00" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';
preg_match_all( '~http://player.vimeo.com/video/(.*?)\?~si',$string,$M);
echo ($M[1][0]); 
```

YouTube ：

```
$string='<iframe width="560" height="315" src="http://www.youtube.com/embed/dbPmWbqAJPs" frameborder="0" allowfullscreen></iframe>';
preg_match_all( '~http://www.youtube.com/embed/(.*?)\"~si',$string,$M);
echo ($M[1][0]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-11T07:27:24.650

试试下面的 php 代码，它可以在没有 pregmatch 的情况下工作

IE ：

```
http://vimeo.com/22222222
http://player.vimeo.com/video/22222222
http://vimeo.com/channels/staffpicks/22222222
http://vimeo.com/groups/groupsname/22222222 
```

PHP代码：

```
 $vimeoUrl = 'http://vimeo.com/channels/channelsName/22222222';
    $fetchVimeoIdArr = explode('/', $vimeoUrl);
    $idCounter = count($fetchVimeoIdArr) - 1;
    $vimeoId = $fetchVimeoIdArr[$idCounter]; 
```

# openerp - 继承视图并更新它

> ID：15655706
> 
> 赞同：-1
> 
> 时间：2013-03-27T09:41:56.907
> 
> 标签：openerp

我对继承视图有疑问，我刚刚得到了函数的继承视图。但是我有下一个问题，为什么必须默认视图，例如：res.partner，必须有多个继承视图，例如：res.partner.emails.info.inherit

```
<?xml version="1.0"?>
<xpath expr="//field[@name='active']" position="after">
                    <field name="opt_out"/>
                </xpath> 
```

和 res.partner.opt_out.form

```
<?xml version="1.0"?>
<xpath expr="//sheet" position="after">
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread" options="{"thread_level": 1}"/>
                    </div>
                </xpath> 
```

， 还有很多。为什么必须分成不同的文件？为什么只是没有团结呢？然后，当我在 xml 中完成新的继承视图时，如何更新它？以便它可以插入数据库并直接应用于父视图..

真的需要你们的帮助..提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:50:59.830

ERP软件由许多模块组成。每个 ERP 模块都模仿组织的主要功能领域。常见的 ERP 模块包括产品计划、零件和材料采购、库存控制、产品分销、订单跟踪、财务、会计、营销和 HR 模块。组织通常有选择地实施在经济和技术上都可行且更易于在组织运营环境中控制的 ERP 模块。

res.partner 的默认视图是对象的实际视图。每个对象都有自己的默认视图。就像销售模块中的合作伙伴是供应商或客户一样，您需要在合作伙伴中添加信息，以便您在销售模块中继承合作伙伴，将其名称命名为“res.partner.sale_type.info.inherit”并添加归档的供应商或客户。当您直接在单个文件代码中引诱所有更改并查看其使代码变得丑陋和过于复杂时

当您添加此字段时，它会直接添加到合作伙伴默认视图中。当您添加字段时，您必须更新模块以便将其插入数据库。

您可以在更改后更新您的模块，例如 -u 'your module name' -d 'database name'

或直接转到设置 => 已安装模块 => 打开您的模块并更新它

希望这有帮助

# r - 如何调整geom tile中的tile高度？

> ID：15655710
> 
> 赞同：6
> 
> 时间：2013-03-27T09:42:10.887
> 
> 标签：r, ggplot2

我正在尝试使用 ggplot2 进行绘图，但我正在努力处理几何图块。当我第一次使用这个 geom 时，我仔细查看了 Hadley 的文档，但我仍然没有设法得到我想要的东西。我想调整瓷砖宽度和瓷砖高度。我在文档中找到了如何调整瓷砖宽度，但我在努力解决高度问题。以下一个情节为起点：

```
test <- data.frame(
  x = rep(c(1,3,6),2),
  y = rep(c(1,3), each = 3),
  w = rep(c(.5,2,1), 2),
  z = sample(rep(LETTERS[1:6])))

ggplot(test, aes(x=x, y=y, fill = z)) + geom_tile(aes(width = w)) 
```

![在此处输入图像描述](../Images/1420b789947252fb0b46526ab93c4e8d.png)

我现在也想调整瓷砖的高度。第一个“列”中的底部图块（x = 1）从 0 到 1，第一列中的顶部图块从 1 到 4。在第二列中，我想让底部图块运行从 0 到 3，顶部瓷砖从 3 到 4。对于最后一列，我想要底部从 0 到 1.5，顶部从 1.5 到 4。我尝试了很多东西，例如以下内容：

```
test2 <- data.frame(
 x = rep(c(1,3,6),2),
 y = c(0, 0, 0, 1, 3, 1.5),
 w = rep(c(.5,2,1), 2),
 z = sample(rep(LETTERS[1:6])),
 h = c(1, 3, 1.5, 3, 1, 2.5))

ggplot(test2, aes(x=x, y=y, fill = z)) + geom_tile(aes(width = w, heigth = h)) 
```

但没有人产生我正在寻找的情节。

任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T10:09:42.917

`geom_tile`采取审美`height=h`和产生`ymin`和`ymax`从`-h/2 to h/2`。这就是为什么你没有得到你想要的情节。虽然我完全支持@Didzis 的解决方案，因为它非常简单并且可以完成工作，但我将展示使用该解决方案`geom_tile`的两个原因。这很有趣，而且总是很高兴知道:)。

*目标是根据高度*相应地“生成”您的`y`位置，以便情节如您所愿。取data.frame，*`test2`*

 *```
require(plyr)
# calculate y coordinate accounting for shift in y due to h
test2 <- ddply(test2, .(x), transform, y2 = c(0, head(h,-1)) + h/2)
p <- ggplot(test2, aes(x=x, y=y2, fill = z)) + 
           geom_tile(aes(width = w, height=h))
p 
```

![在此处输入图像描述](../Images/ea247d336a52153f9b867f6964883fea.png)

现在，您会看到高度是整齐生成的（ymin 和 ymax）

```
ggplot_build(p)$data

#      fill x    y PANEL group xmin xmax ymin ymax
# 1 #00BFC4 1 0.50     1     4 0.75 1.25  0.0  1.0
# 2 #619CFF 1 2.50     1     5 0.75 1.25  1.0  4.0
# 3 #00BA38 3 1.50     1     3 2.00 4.00  0.0  3.0
# 4 #F8766D 3 3.50     1     1 2.00 4.00  3.0  4.0
# 5 #B79F00 6 0.75     1     2 5.50 6.50  0.0  1.5
# 6 #F564E3 6 2.75     1     6 5.50 6.50  1.5  4.0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T09:49:16.607

而不是`geom_tile()`使用`geom_bar()`with`stat="identity"`和 use `h`as`y`值。您也可以设置`width=`为，`geom_bar()`但您会收到可以忽略的警告。

```
ggplot(test2,aes(x,h,fill=z))+geom_bar(stat="identity",aes(width=w)) 
```

![在此处输入图像描述](../Images/865da503b7975bcf8ecc80e012fc37d3.png)*

# android - 处理 Android 的纹理大小限制

> ID：15655713
> 
> 赞同：14
> 
> 时间：2013-03-27T09:42:27.237
> 
> 标签：android, android-layout, opengl-es, android-gui

我需要在 Android 应用程序上显示一些大图像。现在我正在使用带有源位图的 ImageView。我知道openGL对于图像尺寸可以有多大以便处理它有一定的设备独立限制。

除了将图像拆分为多个 ImageView 元素之外，是否有*任何方法可以显示这些图像（具有固定宽度，不裁剪）而不管这个限制？*

谢谢你。

**2013 年 4 月 1 日更新** 到目前为止，所有建议都是降低图像质量，但仍然没有运气。有人建议可以通过使用 CPU 进行处理而不是使用 GPU 来绕过这一限制（尽管可能需要更多时间来处理）。不明白，难道真的没有办法在不降低画质的情况下，显示固定宽度的长图吗？我敢打赌，如果有人至少能指出我正确的方向，我会很高兴。

感谢大家。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T12:25:22.543

您可以使用[`BitmapRegionDecoder`](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html)拆分较大的位图（需要 API 级别 10）。我编写了一个方法，该方法将利用这个类并返回一个`Drawable`可以放置在 中的单个`ImageView`：

```
private static final int MAX_SIZE = 1024;

private Drawable createLargeDrawable(int resId) throws IOException {

    InputStream is = getResources().openRawResource(resId);
    BitmapRegionDecoder brd = BitmapRegionDecoder.newInstance(is, true);

    try {
        if (brd.getWidth() <= MAX_SIZE && brd.getHeight() <= MAX_SIZE) {
            return new BitmapDrawable(getResources(), is);
        }

        int rowCount = (int) Math.ceil((float) brd.getHeight() / (float) MAX_SIZE);
        int colCount = (int) Math.ceil((float) brd.getWidth() / (float) MAX_SIZE);

        BitmapDrawable[] drawables = new BitmapDrawable[rowCount * colCount];

        for (int i = 0; i < rowCount; i++) {

            int top = MAX_SIZE * i;
            int bottom = i == rowCount - 1 ? brd.getHeight() : top + MAX_SIZE;

            for (int j = 0; j < colCount; j++) {

                int left = MAX_SIZE * j;
                int right = j == colCount - 1 ? brd.getWidth() : left + MAX_SIZE;

                Bitmap b = brd.decodeRegion(new Rect(left, top, right, bottom), null);
                BitmapDrawable bd = new BitmapDrawable(getResources(), b);
                bd.setGravity(Gravity.TOP | Gravity.LEFT);
                drawables[i * colCount + j] = bd;
            }
        }

        LayerDrawable ld = new LayerDrawable(drawables);
        for (int i = 0; i < rowCount; i++) {
            for (int j = 0; j < colCount; j++) {
                ld.setLayerInset(i * colCount + j, MAX_SIZE * j, MAX_SIZE * i, 0, 0);
            }
        }

        return ld;
    }
    finally {
        brd.recycle();
    }
} 
```

该方法将检查可绘制资源是否`MAX_SIZE`在两个轴上都小于 (1024)。如果是，它只返回可绘制对象。如果不是，它会将图像分开并解码图像块并将它们放在`LayerDrawable`.

我选择 1024 是因为我相信大多数可用的手机都会支持至少那么大的图像。如果你想找到手机的实际纹理大小限制，你必须通过 OpenGL 做一些时髦的东西，这不是我想深入研究的东西。

我不确定你是如何访问你的图像的，所以我假设它们在你的 drawable 文件夹中。如果不是这种情况，那么重构该方法以获取您需要的任何参数应该是相当容易的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T09:47:55.147

您可以使用`BitmapFactoryOptions`来减小图片的大小。您可以使用类似的东西：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = 3; //reduce size 3 times 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T12:59:31.567

你见过你的地图是如何工作的吗？我曾经为地图制作过渲染器。您可以使用相同的技巧来显示您的图像。

将您的图像划分为方形图块（例如 128x128 像素）。创建支持从图块渲染的自定义 imageView。你的 imageView 知道它现在应该显示位图的哪一部分，并且只显示从你的 sd 卡加载它们所需的图块。使用这样的平铺地图，您可以显示无尽的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T08:53:48.137

如果您向我们提供位图的尺寸，将会有所帮助。

请理解 OpenGL 的运行违反了自然的数学限制。

例如，OpenGL 中的纹理必须是 2 的 x 次方，这是有充分理由的。这实际上是可以干净地完成任何缩小的数学运算而没有任何剩余的唯一方法。

因此，如果您向我们提供给您带来麻烦的最小位图的确切尺寸，我们中的一些人可能会告诉您您遇到了什么样的实际限制。

# php - php缓存与cookie

> ID：15655714
> 
> 赞同：1
> 
> 时间：2013-03-27T09:42:28.467
> 
> 标签：php, session, redirect, cookies, logout

我正在集成一个登录页面（固定用户名和密码）。

用户登录后，他将被重定向到另一个页面“x”（在我的服务器上）。

但是，当用户关闭浏览器（或选项卡）并重新打开它时，他会自动被定向到页面“x”，而无需询问用户名并通过。

但是，如果我从浏览器（firefox）设置中删除 cookie，一切都会恢复正常。删除缓存不会做任何事情。

我知道我需要插入几行代码才能删除到 cookie。我的问题是，

1.  这是 100% 的 cookie 问题吗？或者我也需要防止存储到本地缓存中？
2.  cookie 预防发生在哪个级别？在登录或重定向期间？
3.  一旦我被重定向到页面“x”，是否在此处放置一个注销按钮可以注销重定向的会话？

下面是我的代码。

```
<?php
session_start();
if(isset($_POST['username'])){
 if(($_POST['username'] == "user") && ($_POST['password'] == "pass"))
{
  $_SESSION['secured'] = "Secured";
 }else{
  echo "Wrong username and password.  <p>
  <a href='?'retry</a>";
 }
}

if(!isset($_SESSION['secured']))
{    
echo "<form method='post'>
Username: <input type='text' name='username' maxlength='10' /><br>
Password: <input type='password' name='password' maxlength='10' /><br>
<input type='submit' value='login' />
</form>";
}else{
?>

<html>
<head>
<title>Session Login</title>
</head>
<body>
<p>redirecting....
<meta HTTP-EQUIV="REFRESH" content="1; url=http://x.php">
</p>
</body>
</html>

<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:00:33.310

如果您可以创建一个 logout.php 页面来破坏会话：

```
unset($_SESSION['secured']);
header('Location: login.php');
exit; 
```

只需访问该页面，登录就会被销毁。

如果您希望会话在预定时间段后超时，您可以使用类似于[此示例](https://stackoverflow.com/a/3068766/491494)中显示的代码的内容。

如果您想在用户登陆 x.php 后终止会话

```
<?php
session_start();

//First make sure that they're allowed access to x.php
if(!isset($_SESSION['secured'])){
    //They shouldn't be here.
    header('Location: login.php'); //Redirect back to your login page
    exit;
}

//Ok, user is obviously logged in. Unset the session variable so that they can only view this page once (unless they login again)
unset($_SESSION['secured']);

//Show content of x.php 
```

# unit-testing - maven测试依赖的依赖

> ID：15655729
> 
> 赞同：2
> 
> 时间：2013-03-27T09:43:30.640
> 
> 标签：unit-testing, maven, scope, dependencies

我有一个父项目，它与范围*测试有依赖关系*

```
 <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-firefox-driver</artifactId>
        <version>2.31.0</version>
        <scope>test</scope>
    </dependency> 
```

现在我“mvn install”了父项目，当我将此父项目作为依赖项包含在我的子项目中时

```
 <dependency>
        <groupId>group</groupId>
        <artifactId>parentproject</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </dependency> 
```

`selenium-firefox-driver`不可用。*编译*范围的依赖项可用。

我怎样才能使它可用？我不会在父项目和子项目中更改范围。因为我在运行时需要一些父类

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T10:54:28.233

正如 Charlee Chitsuk 在他的回答中概述的那样，您的范围（在子项目中*编译*）将省略包含项目的*测试*依赖项。

一个干净的解决方案是将*父*项目的关注点分成两个单独的项目：

*   parent-test：该项目包括您的测试依赖项（例如`selenium-firefox-driver`）和*编译*范围。此外，该项目包含您所有的通用测试资源，例如 JUnit 基类，在`src/main/java`.
*   parent-business：该项目仅包含父项目的业务功能。`parent-test`在此处包括范围`test`。

在您的子项目中，您现在也可以包含`parent-test`范围*测试*，让您可以访问具有正确范围的资源。

此设置将提供清晰的项目结构和清晰的范围，避免您提到的问题。是的，由于额外的项目，它有点复杂，但它也更干净。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T10:38:42.673

与其将父项目作为依赖项包含在子 pom 中，不如将父项目作为`parent`子 pom 的。

```
<parent>
   <groupId>group</groupId>
   <artifactId>parentproject</artifactId>
   <version>0.0.1-SNAPSHOT</version>
</parent> 
```

你不能把它称为`parent project`其他。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T10:24:18.510

[依赖范围](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)告诉这是`compile`默认范围，如果没有指定则使用。它以不同的方式影响传递依赖。通过概述，如果依赖项是范围，则将省略`compile`传递范围。`test`请参阅[Maven: The Complete Reference: Project Dependencies](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-project-dependencies.html)中的更多信息。

# vb6 - 文件写入：回车和Tab

> ID：15655734
> 
> 赞同：0
> 
> 时间：2013-03-27T09:43:44.493
> 
> 标签：vb6

嗨，我是 VB6 的新手，我想实现这个：当用户登录时，他输入他的姓名和密码，我应该把它写在一个文件中。

这是文件“authentification.txt”：它有用户名密码的形式

```
 bill hope
   jessica 1234567 
   jhon 7654321 
```

这是代码：

```
Open "c:\authentification.txt" For Binary As #1
x = txtidentifiant.Text
y = txtmotdepasse.Text
Do While Not EOF(1)
Line Input #1, l
If l <> " " Then 
Put 1, i, x & vbNewLine
Put 1, i + 1, y & vbNewLine

Else
//here i want to implement a  carriage return in the file #1
End If
Loop 
```

我的问题是：如果文件像这样填充：`bhope` 并且它只写第一行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:55:10.173

您应该使用[Input](http://msdn.microsoft.com/en-us/library/aa243392%28v=vs.60%29.aspx)和[Print](http://msdn.microsoft.com/en-us/library/aa266187%28v=vs.60%29.aspx)语句。它们读取和写入逗号分隔的文件，并且设计为成对使用，仅用于此类应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:30:56.233

这是新代码：

```
Open "c:\authentification.txt" For Append As #1
x = txtidentifiant.Text
y = txtmotdepasse.Text
Print #1, x
Print #1, y
Close #1 
```

# java - 在 Eclipse 中清理项目后未找到类异常

> ID：15655740
> 
> 赞同：0
> 
> 时间：2013-03-27T09:43:50.753
> 
> 标签：java, eclipse, project, classnotfoundexception

我目前正在 Eclipse 中开发一个 Java 项目，其中包括 44 个 java 文件和 1 个 SQL 文件。今天工作了几个小时后，我注意到当我运行它时我所做的一切都没有影响程序（我可以删除主类中的所有代码，它仍然运行良好）。我检查了类文件，发现它们已经好几天没有被修改了（自从我上次处理它以来）。在网上做了一些阅读后，我接受了执行 Project->Clean 的建议。但是，这样做之后，我无法再编译该项目。当我运行主类时，我很容易得到：

```
Exception in thread "Thread-1" java.lang.NoClassDefFoundError: sprint1/Main2
Caused by: java.lang.ClassNotFoundException: sprint1.Main2
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

我检查了构建路径，据我所知，一切似乎都是正确的。我还打开和关闭了 Project->Build Automatically，但无济于事。我现在唯一能想到的就是创建一个新项目并将所有代码复制到其中，但我正在使用各种晦涩难懂的 jar 和 SWT（根据我的经验，它们不能很好地传输，如果有的话）。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-13T12:36:11.270

检查您的项目中是否存在任何错误。不仅仅是编译错误。单击项目并检查 Eclipse 中的“问题”视图。

我认为这通常发生在项目中缺少任何 JAR 文件时。即使你不使用它。

在 Eclipse 中选择 Project -> 右键 -> Properties -> Java Build Path -> Libraries 选项卡

并检查 JAR 文件中的任何红色标记。从 Eclipse 项目中删除它或修复路径（选择 JAR 并单击编辑按钮）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T09:46:35.213

您确定您的任何课程中都没有构建错误吗？如果有错误，eclipse 可以运行以前的无错误版本（根据您提供的一些设置）。构建错误还可能导致项目清理后未生成类文件。

# facebook - OAuthWebSecurity 扩展 Facebook 数据（名字和姓氏）

> ID：15655744
> 
> 赞同：0
> 
> 时间：2013-03-27T09:44:03.297
> 
> 标签：facebook, oauth

我正在使用 OAuthWebSecurity 准备我的 MVC 应用程序 Facebook 登录。一切都按预期工作。但是，提供商仅将 Facebook 用户名（电子邮件地址）返回给我的客户。我也喜欢接收名字和姓氏，但没有找到任何如何使用 OAuthWebSecurity 执行此操作的示例。

是否可以在不使用大型 Facebook sdk 的情况下扩展 Facebook 提供程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:51:01.730

好的，经过更多研究后，我发现使用 Facebook SDK 并使用以下代码片段来访问此信息是最简单的方法：

```
 var client = new FacebookClient(result.ExtraData["accesstoken"]);
     dynamic me = client.Get("me");
     string firstName = me.first_name;
     string lastName = me.last_name;
     string email = me.email;
     string gender = me.gender; 
```

扩展 Facebook OAuth 提供程序会复杂得多。

# java - java中链表代码的意外结果

> ID：15655745
> 
> 赞同：0
> 
> 时间：2013-03-27T09:44:04.423
> 
> 标签：java

以下代码编译并执行，没有任何错误或警告。但给出了意想不到的结果。

代码 ：

```
import java.util.LinkedList;
import java.util.Scanner;

//defining a custom data-type (class)
class LLObj{
    static int NodeInt;
    static char NodeChar;

    LLObj(int x, char y){
        NodeInt = x;
        NodeChar = y;
    }
}

class LLexp{

    static LinkedList<LLObj> list = new LinkedList<>();

    public static void main(String[] args){

        list.addLast(new LLObj(5,'c'));

        System.out.println(list.get(0).NodeInt);
        System.out.println(list.get(0).NodeChar);

        list.addLast(new LLObj(7,'h'));

        System.out.println(list.get(0).NodeInt);
        System.out.println(list.get(0).NodeChar);
        System.out.println(list.get(1).NodeInt);
        System.out.println(list.get(1).NodeChar);
    }
} 
```

预期产出 -

> 5
> 摄氏度
> 5
> 摄氏度
> 7
> 小时

获得的输出 -

> 5
> 小时
> 7
> 小时
> 7
> 小时

1.  为什么会这样？
2.  如何获得预期的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T09:45:54.917

这就是问题：

```
static int NodeInt;
static char NodeChar; 
```

如果目的是让每个`LLObj`人都有自己的值（这似乎很可能），那么这些应该是*实例*变量。

了解实例字段/方法和静态字段/方法之间的区别非常重要。有关更多详细信息，请参阅[Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:58:32.450

```
//defining a custom data-type (class)
class LLObj
{
    static int NodeInt;
    static char NodeChar;

    LLObj(int x, char y)
    {
        NodeInt = x;
        NodeChar = y;
    }
} 
```

您从 LLObj 类创建的所有对象**共享**相同的数据成员，

**静态数据成员与类相关联，而不是与启动的对象相关联，**

在您的示例中，从 LLObj 创建的所有对象的 NodeInt 和 NodeChar 的值将是最后一个创建的对象的初始值..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T09:49:59.880

您已将 NodeInt 和 NodeChar 定义为静态变量。静态变量处于类级别，并且不为不同的实例保存不同的值。从两者中删除静电，它应该没问题。

# node.js - grunt-init 没有创建任何文件

> ID：15655746
> 
> 赞同：0
> 
> 时间：2013-03-27T09:44:11.913
> 
> 标签：node.js, gruntjs

我可能在这里错过了一些东西。我在 Win7/64bit 上使用 Node 0.10.1 并安装了 grunt 0.4.1

```
npm install grunt
npm install -g grunt-cli
npm install -g grunt-init 
```

然后我尝试在文件夹 %USERPROFILE% 中安装模板

```
git clone git@github.com:gruntjs/grunt-init-gruntfile.git ~/.grunt-init/gruntfile 
```

但是 git 想要一个密钥 [当前文件夹] 的密码。所以我刚刚创建了一个文件夹

```
%USERPROFILE%\.grunt-init\gruntfile\ 
```

[并将https://raw.github.com/gruntjs/grunt-init-gruntfile/master/template.js](https://raw.github.com/gruntjs/grunt-init-gruntfile/master/template.js)复制 到它。现在我切换到项目文件夹并能够启动 grunt-init

```
grunt-init gruntfile 
```

*   涉及DOM？n
*   文件连接或缩小？是
*   包.json？n
*   任何变化？ñ

过程以“完成，没有错误”结束，但没有创建文件，或者至少我找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:13:05.070

不知道如何在 Windows 上克隆到您的用户主目录，但重要（！）您还需要复制整个“根”目录（[https://raw.github.com/gruntjs/grunt-init-gruntfile/master/root](https://raw.github.com/gruntjs/grunt-init-gruntfile/master/root)）到 '%USERPROFILE%.grunt-init\gruntfile\'

你知道这个初始化模板只会为你创建一个 gruntfile.js 吗？（在根目录中你可以看到）。如果要创建节点模块、jquery-plugin 等，请使用其他模板之一（grunt-init-node、grunt-init-jquery）等等。

创建自己的模板很容易。只需使用您的模板名称在 '%USERPROFILE%.grunt-init' 中创建一个新文件夹。添加模板.js。添加一个根目录，其中包含您要复制的所有文件，可能添加一个 rename.json（用于文件夹和文件重命名），并可能更改 template.js 中的一些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T12:00:31.200

我认为您在这里遇到了一些不同的问题-从您的评论看来，您使用的是 Windows。

第一个问题是您无法克隆存储库。我自己试过这个，我发现问题是通过在我的 github 帐户上设置一个有效的 ssh 密钥来解决的。因此，要克隆此存储库，您需要创建一个 github 帐户并在您的计算机和 github 帐户上安装 ssh 密钥。Github 关于如何做到这一点的文档非常好，可以在这里找到 Windows [https://help.github.com/articles/set-up-git#platform-windows](https://help.github.com/articles/set-up-git#platform-windows)。

第二个问题是`git clone`您使用的命令在 Windows 机器上不起作用，因为它提供了 Linux 主目录的路径`~/.grunt-init/gruntfile`。

根据您的评论，我猜这`%USERPROFILE%.grunt-init\gruntfile\`是 Windows 的正确安装目录，因此将您的工作目录更改为该目录并使用该命令`git clone git@github.com:gruntjs/grunt-init-gruntfile.git`应该安装它。

您也可以考虑使用[Cygwin](http://www.cygwin.org/)，它允许您在 Windows 机器上使用 linux 工作环境。

快乐的节点黑客。

# javascript - 尽管存在，但无法直接访问 ajax 响应属性

> ID：15655747
> 
> 赞同：0
> 
> 时间：2013-03-27T09:44:14.343
> 
> 标签：javascript, jquery, ajax, json

我有以下 JSON 字符串从 PHP 5.3.10 的 json_encode 函数返回到 jQuery 1.9.1

```
{
   "messsages":{
      "error":["API_CONTROLLER.INVALID_LOGIN_PASSWORD"],
      "warning":[],
      "notice":[],
      "success":[]
   },
   "result":false
} 
```

jQuery代码：

```
$.ajax(targetURL, {
   type: method,
   data: params,
   dataType: "json",
   success: function(resp){
      console.log(resp); //Shows object with all vars correctly displayed

      //The for loop also outputs all keys and values correctly
      for(var i in resp){
         console.log("I: "+i);
         console.log("RESP: ");
         console.log(resp[i]);
      }

      console.log("DIRECT ACCESS");
      console.log(resp.messages); //WHY undefined?
      //console.log(resp.messages[error]); //undefined
      //console.log(resp.messages[error][0]); //undefined
      //console.log(resp.messages.error); //undefined
      //console.log(resp.messages.length); //Just trying => undefined
      console.log(resp.result); //this works!
      //console.log(resp[messages]); //Just trying => undefined
   }
}); 
```

如何访问消息？

第一个console.log 和循环显示消息存在，messages.error、messages.notice 等......也存在。但是我怎样才能访问它们？这种jQuery错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:47:09.193

您的回复的消息变量名称中有三个“s”。因此它在循环中有效，但在您尝试访问不存在的“消息”时失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:59:36.263

首先修复错字（**消息**）然后你可以重写你的代码:)

**请**使用Google Chrome 中的[JavaScript 开发人员工具](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints)。

```
{
   "messages":{
      "error":["API_CONTROLLER.INVALID_LOGIN_PASSWORD"],
      "warning":[],
      "notice":[],
      "success":[]
   },
   "result":false
}

The jQuery code:

var performLogin = function(){
 return $.getJSON(targetURL, params).done(function(response){

      // TODO - do something with response

      console.log(response.messages);
      console.log(response.messages[error]);
      console.log(response.messages[error][0]);
      console.log(response.messages.error);
      console.log(response.messages.length);
      console.log(response.result);
      console.log(response[messages]);
   });
} 
```

# c - 将内存区域视为结构数组时的对齐注意事项

> ID：15655748
> 
> 赞同：2
> 
> 时间：2013-03-27T09:44:17.363
> 
> 标签：c, arrays, struct, alignment

让我们考虑一下我已经定义了一个内存区域，例如（*注意*：`uint8`表示`unsigned char`）：

```
uint8 myMemoryArea[1024]; 
```

我有一个像这样的结构：

```
typedef struct
{
   uint8 * ptrToMyVar; 
   uint8 otherVar;
} myStruct_type; 
```

我想将其视为`myMemoryArea`一个数组`myStruct_type`，因此我想对内存区域执行随机访问，例如：

```
myStruct_type * myPtrToStruct = (* myStruct_type)(&(myMemoryArea[ELEMENT_TO_ACCESS * sizeof(myStruct_type)]));
myPtrToStruct->otherVar =  2; 
```

这台机器独立代码吗？我应该期待对齐或填充的麻烦吗？我猜只要我使用`sizeof`.

我是否应该确保`myMemoryArea`从可被整除的地址开始`sizeof(* char)`- 也许将其定义为指针数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:21:05.187

不能保证`myMemoryArea`会适当地对齐。根据您的 CPU 和操作系统以及编译器，您可能会遇到崩溃或访问未对齐数据的速度非常慢。（另请参阅：[解决困扰我的 C 面试问题中的内存对齐问题](https://stackoverflow.com/questions/227897/solve-the-memory-alignment-in-c-interview-question-that-stumped-me/)）。

考虑如果您的变量在此上下文中声明会发生什么：

```
double d1;
uint8  c1;
uint8  myMemoryArea[1024];
uint8  c2;
douebl d2; 
```

完全有理由期望`d1`正确对齐；如果不是，编译器会让你非常失望。没有理由期待任何不寻常的治疗`c1`; 单个字节可以存储在任何对齐上。`myMemoryArea`数据也不必特别对齐；它周围可能没有空间，而且它很可能位于一个奇怪的地址。该`c2`变量不需要特殊处理；`d2`将正确对齐（并且数据中可能有 6 个字节的未使用空间。

如果`myMemoryArea`是奇数字节对齐，并且您使用 RISC 机器访问内存结构，您很可能会收到 SIGBUS 错误。在 Intel 机器上，您的访问速度可能会非常慢。

# c++ - pclose 从哪里获取 pid

> ID：15655749
> 
> 赞同：0
> 
> 时间：2013-03-27T09:44:22.063
> 
> 标签：c++, c

在**pclose**函数的文档中，有一部分代码说明了如何实现 pclose() 函数

```
int pclose(FILE *stream)

{
    int stat;
    pid_t pid;

    pid = <pid for process created for stream by popen()>
    (void) fclose(stream);
    while (waitpid(pid, &stat, 0) == -1) {
        if (errno != EINTR){
            stat = -1;
            break;
        }
    }
    return(stat);
} 
```

所以我很有趣，他得到“popen（）为流创建的进程的pid”的形式。是否有存储此值的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:46:32.400

来自实现`popen()`和`pclose()`. 很可能它将作为（内部）`FILE`结构中的字段存储。

# performance - 为什么使用猫 | grep 搜索匹配的文本非常慢

> ID：15655753
> 
> 赞同：1
> 
> 时间：2013-03-27T09:44:36.603
> 
> 标签：performance, command-line, grep, cat

我在命令行工具中遇到了一个非常奇怪的问题。基本上我试图搜索匹配的单词并从文件中获取文本。所以我有 80,000 字的 file1：

```
aaa
bbb
ccc
ddd
... 
```

我有 600,000 行文本的 file2：

```
id: hhh, address: xxxx, content: yyyy
id: aaa, address: zzzz, content: eeee
id: jjj, address: qqqq, content: oooo
id: ccc, address: nnnn, content: tttt
... 
```

我需要在file2中找到包含file1中单词的文本，所以输出如下：

```
id: aaa, address: zzzz, content: eeee
id: ccc, address: nnnn, content: tttt
... 
```

现在我正在使用命令：`cat file2 | grep -f file1 > newfile.`我也测试了该方法，它运行得很好，它的运行速度也没有什么奇怪的。但是，当我在那个真实文件上运行这个命令时，它超级慢......直到现在它已经运行了 12 个小时并且终端中的命令仍在运行！当我签入新文件时，只生成了 2000 行文本，这意味着如果我需要获得 80,000 行的全部结果，我需要 12 小时的 40 次，这绝对是荒谬的。

另外，我尝试在 file2 上进行实验，即 600,000 行文本。我运行了一个类似的命令`cat file2 | grep -w 'aaa'`，不到一秒就立即得到结果。我还尝试了一个包含几个单词的文件，它也立即得到。所以我不明白，为什么这 80,000 字要花很长时间。即使搜索每个单词需要一秒钟的时间，它仍然只需要不到 20 个小时，这仍然比我目前遇到的情况要快得多......有人能给我提示吗？

我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:12:25.337

在 600,000 行中的每一行中搜索 80,000 行中的每一行的代码都需要付出代价。

*   无条件改变：使用`grep -f file1 file2`（否`cat`）。可能会带来轻微的性能提升，但它可以节省一次复制大文件。
*   可能：添加`-F`以禁止通配符搜索。这可以避免 80,000 个已编译的正则表达式副本，这些副本实际上是简单的搜索。

    ```
    grep -F -f file1 file2 
    ```

*   查找GNU的`-w`和选项。他们可以简化搜索。`-x``grep`
*   拆分工作量：将 80000 行文件拆分为 80 个文件，每个文件 1000 行；运行该命令 80 次。

最后一个选项有点像“绝望的律师”。如果其他选项不能加快速度，这可能会让您更接近理智的性能（并且至少您将能够对搜索的每组行进行计时以了解它将运行多长时间）。

# wordpress - NextGen Gallery 的自定义永久链接

> ID：15655756
> 
> 赞同：0
> 
> 时间：2013-03-27T09:44:38.160
> 
> 标签：wordpress, redirect, url-rewriting, nextgen-gallery

我将 wordpress 默认永久链接设置为`/%category%/%postname%/`. 我正在使用 NextGen Gallery。因此，当我在 NG Gallery 中使用 imagebrowser 而不是 jQuery 效果时，它会为每个图像创建自定义 url，例如`category/postname/?pid=no.`where category、postname 和 no。变化。我只是想把它改成`image/no.`，`image`应该是一个修复词。并且 url 重写应该只适用于 nextgen 图像，它不应该影响 wordpress 帖子 url。所以请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T17:37:04.743

兄弟太容易了，只需转到选项页面并勾选以启用 parmalinks 并在给定框中添加一些您想要的文本

![截屏](../Images/9e76db2ccad4fb1ac488701875fdb5e7.png)

到此为止，您可以查看 [Pullaice画廊](http://gallery.pullaice.com/)

# php - PHPMailer：随机 SMTP 错误

> ID：15655763
> 
> 赞同：0
> 
> 时间：2013-03-27T09:45:22.497
> 
> 标签：php, smtp, phpmailer

我在使用 PHPMailer 时遇到了麻烦。我有一个 PHP 页面，在完成所有功能后应该发送一封带有 PHPMailer 和 SMTP 身份验证的电子邮件。

一切似乎都运行良好，除了有时，显然是随机的，代码

```
SMTPDebug = 1 
```

返回

```
SMTP ->ERROR: DATA not accepted from server.
SMTP ERROR: DAta not accepted. 
```

在 95% 的时间里一切正常并且电子邮件到达：这可能是某种我无法解决的服务器问题？我使用 TMDHosting。真的不知道要纠正什么..这是我的代码

```
$mail = new PHPMailer();

$mail -> CharSet = 'UTF-8';
$mail -> AddReplyTo('mail@domain.it', 'SomeValue');
$mail -> SetFrom('mail@domain.it', $piede);
$subj = $piede . ' - Comment';
$mail -> Subject = $subject;
$mail -> SMTPDebug = 1;
$mail -> AddAddress($to);
$mail -> IsHTML();
$mail -> MsgHTML($message);
$mail -> IsSMTP();
$mail -> SMTPAuth = true;
$mail -> Host = 'mail.domain.com';
$mail -> Port = 2525;
$mail -> Username = 'mail@domain.com';
$mail -> Password = $mailPsw;
if ($mail -> Send()) {
echo 'OK';
} else {
echo $mail -> ErrorInfo;
} 
```

有什么提示吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:47:02.620

可能有各种原因...

其中之一可能是服务器行为不正常。

现在因为它只发生几次，这意味着 smtp 服务器正试图通过限制或速率限制来限制您的连接。

不要试图用大量邮件发送垃圾邮件或轰炸系统，现在邮寄者对那里的规范非常严格。

还可以尝试通过 telnet 运行脚本以发送大量邮件，看看是否仍然收到任何错误。需要对来自 SMTP 服务器的错误进行正确描述以分析情况。

# events - 适用于 Windows 应用商店应用的 WeakEventManager

> ID：15655765
> 
> 赞同：1
> 
> 时间：2013-03-27T09:45:29.160
> 
> 标签：events, garbage-collection, windows-store-apps, weak-references

我找不到`WeakEventManager`Windows 应用商店应用程序，想知道应该使用什么来防止内存泄漏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:08:25.763

`WeakReference`如果目标还活着，您可以使用和中继事件。[在此处](http://konaguidance.codeplex.com/SourceControl/changeset/view/cb2b257e240e7700c55b0c5860dc24155103a5eb#PubSubEvents/DelegateReference.cs)查看科纳指南。

# sql - 有没有办法在线处理 Oracle\Scott 帐户？

> ID：15655766
> 
> 赞同：2
> 
> 时间：2013-03-27T09:45:31.347
> 
> 标签：sql, oracle

我有一个必须在 Scott 帐户上完成的数据库作业，有没有办法获取架构？我在哪里可以找到支持 Oracle 的在线 sql 编辑器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T09:53:02.640

我建议安装[Oracle Express Edition](http://www.oracle.com/technetwork/products/express-edition/downloads/index.html) - 只需在安装过程中选中“安装演示数据库”（或类似的）选项，您就可以开始使用了。

安装包还包含*SQL Developer*，这是一个相当不错的 SQL 编辑器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:25:09.370

[sqlfiddle.com](http://sqlfiddle.com)并选择 Oracle。架构的 ddl 可以在 Internet 上轻松找到。只需运行 create 和 insert 语句，您就可以在右侧面板上运行查询。

# mysql - 重命名 Django 模型及其对应的 MySQL 表

> ID：15655769
> 
> 赞同：1
> 
> 时间：2013-03-27T09:45:41.533
> 
> 标签：mysql, django

我需要将应用程序“myapp”中的 Django 模型从“Hotel”重命名为“Client”，并且我不想使用 South。

我想知道使用以下查询处理 MySQL 中的更改是否安全？

> 将表 myapp_hotel 重命名为 myapp_client；
> 
> 将表 myapp_hotel_sites 重命名为 myapp_client_sites；

对于与现在的客户表有外键关系的表：

> ALTER TABLE myapp_client_sites 更改 hotel_id client_id int(11);

可以这么简单，还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:02:53.233

在 MYSQL 中可以像这样更改表名，但考虑到您还需要在 django 代码中更改类名。否则 orm 将不会映射到 mysql 数据库表名。

使用类似[south](http://south.readthedocs.org/en/latest/about.html)的工具将确保在数据库中需要的地方进行所有代码更改。

> 自动迁移创建：South 可以查看您的 models.py 文件中的更改并自动编写与您的更改相匹配的迁移。

# java - 实现 java.util.Observer 的类中的所有静态成员？

> ID：15655772
> 
> 赞同：0
> 
> 时间：2013-03-27T09:45:54.530
> 
> 标签：java, design-patterns, observer-pattern

我想创建一个类`R`来观察 class 的所有实例`S`，也就是说，我正在使用观察者可观察模式。没有必要拥有多个 class 实例`R`，我确信这一点。这就是为什么我将所有成员`R`设为静态的原因。但是，我不确定这是否是设计课程的正确方法。的`public void addObserver(Observer o)`方法`Observable`需要一个对象而不是静态类。如果我创建一个`R`only 的实例以便我可以将它传递给 ，可以`addObserver`吗？它是否以任何方式违反了 Observable-Observer 模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:58:25.493

即使您不需要`R`（现在）的多个实例，您也不必也不应该设计`R`为仅由`static`成员组成。程序设计可以规定只使用一个`R`. 有些人甚至会建议使用单例模式以编程方式强制执行它。

> Observable 的 public void addObserver(Observer o) 方法需要一个对象而不是静态类

该短语`static class`通常引用一个声明为静态的内部类，以表明它可以在没有封闭的外部类实例的情况下存在。我认为您错误地使用了这个短语。

> 如果我只创建一个 R 实例以便我可以将它传递给 addObserver 可以吗？

是的，当然。仅仅因为您`R`以这样一种方式声明了所有成员都是`static`并因此属于该类（由 ClassLoader 加载），并不意味着您不能构造和使用任意数量的类实例。

> 它是否以任何方式违反了 Observable-Observer 模式？

只要`R implements Observer`，不。事实上，同一个观察者观察多个可观察者并没有异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:19:57.323

作为一般规则，避免使用静态方法和字段。也就是说，如果您只能与实例成员一起生活，请这样做。静态成员是邪恶的，有时是必要的，但从不想要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:16:26.197

不，不违反。谁知道将来你可能会有其他观察者。您仍然可以拥有由非静态方法更新的静态字段。因此静态字段的状态由所有实例共享。（单态模式）

# ios - 如何在 iPhone 笔记应用程序中添加和删除笔记

> ID：15655775
> 
> 赞同：0
> 
> 时间：2013-03-27T09:45:55.833
> 
> 标签：ios, objective-c, iphone, xcode

是否可以在 iPhone 笔记应用程序中添加或修改笔记。如果您对此有任何想法，请与我分享，这对我很有帮助。提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:50:54.333

不，这是不可能的。Apple 不提供任何 API 来与笔记应用程序交互。

# php - 在 cakephp 中编写查询时感到困惑

> ID：15655777
> 
> 赞同：0
> 
> 时间：2013-03-27T09:45:56.913
> 
> 标签：php, mysql, cakephp

我只是对cakephp有一个简单的疑问，可能也很傻。

在 cakephp 中编写查询：-

```
1.$output1 = $this->Modelname->query("Select * from tablename");
2.$output2 = $this->Modelname->query("Update tablename set ....."); 
```

当我执行第一个查询时，即 $output1。它运行完美。但是当我运行 $output2 它不会正确运行

可能是什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T09:52:41.757

我建议您使用[CakePHP 方法](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)来查询数据库。

这样，即使您有相关的模型，它也会更加安全，并且对您来说事情会更容易。

一开始可能需要一段时间来学习，但你很快就会意识到它的优点。

您的第一个查询相当于：

```
$this->Modelname->find("all"); 
```

你的第二个是这样的：

```
// Update: id is set to a numerical value
$this->Modelname->id = 2; 
$this->Modelname->save($this->request->data); 
```

# java - BufferedReader.readLine 不从文件开头开始并跳过行

> ID：15655779
> 
> 赞同：0
> 
> 时间：2013-03-27T09:46:13.183
> 
> 标签：java, eclipse

我需要逐行读取文本文件，直到找到特定的字符串。我正在使用`BufferedReader.readLine()`，但是当我调试时，我发现它从文件的第三行开始，然后跳过行。这是我的代码：

```
try {
    reader = new BufferedReader(new FileReader(path));

    String line1 = null;

    while ((line1 = reader.readLine()) != null) {
        if (line1.toString() == invocation0) {
            found = true;
            return false;
        } else if (line1 == invocation1) {
            found = true;
            return true;
        }
    }
} catch (Exception e) {
    e.printStackTrace();
} finally {
    if (reader != null)
        try {
            reader.close();
        } catch (IOException e) {
        }
} 
```

我真的很感激任何帮助，因为我为此尝试了许多不同的解决方案，但仍然无法解决这个问题。

文件的内容是这样的：

.//================================================ ============================= .// 文件：abc.mark .// 描述：anything .// 注意：anything . // .//============================================== ================================ .invoke RemoveClass("Properties",0)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:49:00.823

```
if(line1.equals(invocation0)) 
```

使用`equals()`方法进行`String`价值比较。

此外，您可以`return`使用. 这只是一个建议。`if``break`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:16:29.870

BufferedReader 不应该跳过任何内容。不幸的是，您是使用 read 方法跳过该行的人。相等运算符`==`不会比较任何两个字符串的内容，而是比较它们是否属于同一对象。您可以通过两种方式避免它。

1.  在 invocation0 上调用 intern() （无论如何，line1 对象应该已经被实习过）
2.  更准确地使用 equals 方法 line1.equals(invocaton0)

此[链接](http://blog.enrii.com/2006/03/15/java-string-equality-common-mistake/)可能对您更好地理解它有所帮助。

# javascript - 奇怪地滚动到jQuery函数

> ID：15655785
> 
> 赞同：0
> 
> 时间：2013-03-27T09:46:30.547
> 
> 标签：javascript, jquery, html, anchor

我有一个 jQuery 平滑滚动脚本：

```
$(".scroll").click(function(event){
     event.preventDefault();
     var dest=0;
     if($(this.hash).offset().top > $(document).height()-$(window).height()){
          dest=$(document).height()-$(window).height();
     }else{
          dest=$(this.hash).offset().top;
     }
     $('html,body').animate({scrollTop:dest}, 500,'swing');
 }); 
```

它可以很好地滚动到

```
<a id="info"></a> 
```

但不适用于我的任何其他人

```
<a id="top"></a>
<a id="bottom"></a>
<a id="announcements"></a>
etc ... 
```

手动添加 domain.com/#top 时它可以工作，所以锚应该没问题。

有谁知道为什么？

实时预览： [http ://thehtmlworkshop.com/](http://thehtmlworkshop.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:14:49.833

您的按钮 top 和 down 没有类`scroll`。尝试添加它。

```
<a href="top" class="scroll" /><!-- img --></a> 
```

然后可以肯定的是，`a`将触发事件：

```
$("a.scroll").click(function(event){
    //your code there
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:16:35.027

问题是您将单击设置为“滚动”类。点击事件需要设置为父级。

```
$(".scroll").parent().click(function(event){
     event.preventDefault();
     var dest=0;
     if($(this.hash).offset().top > $(document).height()-$(window).height()){
          dest=$(document).height()-$(window).height();
     }else{
          dest=$(this.hash).offset().top;
     }
     $('html,body').animate({scrollTop:dest}, 500,'swing');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:28:33.917

这是一个 jsfiddle：[这行得通](http://jsfiddle.net/tpressley1/bHMUC/31/)。

jQuery：

```
$(".scroll").click(function(event){

var target = $(this).hash;
 var dest=null;
 if(($(this.hash).offset().top) > ($(document).height()-$(window).height())){
      dest= $(document).height()-$(window).height();
 }else{
      dest=$(this.hash).offset().top;
 }

$('html,body').animate({scrollTop:dest}, 1000, 'swing');
 event.preventDefault(); 
```

});

# javascript - iPad 上的 Firebug Lite 无法检测和记录 JavaScript 错误

> ID：15655790
> 
> 赞同：5
> 
> 时间：2013-03-27T09:46:41.300
> 
> 标签：javascript, ios, ipad, firebug-lite

我使用[Firebug Lite](https://getfirebug.com/firebuglite)为 iPad 调试应用程序。它工作得很好，我可以直接在 iPad 上查看 CSS 文件、JavaScript 文件并检查 DOM 树。

但是，它似乎没有检测到 JavaScript 错误，也没有将它们记录到控制台。默认的 iOS Safari 控制台说存在 JavaScript 错误，但 Firebug 没有检测到也没有显示它们。顺便说一下，我的 iPad 在 iOS 5 下运行。

有任何想法吗 ？

# c# - 在 C# 中实现双重分派，可扩展函数和对象以对其进行操作

> ID：15655792
> 
> 赞同：1
> 
> 时间：2013-03-27T09:46:46.383
> 
> 标签：c#, design-patterns, visitor-pattern, double-dispatch

我正在寻找一种方法来实现可以为方法和类扩展的双重调度。

到目前为止，我基本上使用了三种方法：

*   传统的程序方法非常好`switch`（容易添加新功能，很难添加新类）
*   访问者模式（非常相似：容易添加新访问者，很难添加新类）
*   一个简单的接口方法（容易添加新类，很难添加新功能）

我正在寻找一种无需修改函数或现有类即可添加新函数和新类的方法。

在请求对象/函数的某种组合时，这不应该失败，至少在程序启动后我可以做一次检查之后不会失败。

以下是我目前使用的方法：

传统的程序方法：

```
enum WidgetType {A,B,C,}

interface IWidget
{
    WidgetType GetWidgetType();
}

class WidgetA
{
    public WidgetType GetWidgetType() {return WidgetType.A;}
}
class WidgetB
{
    public WidgetType GetWidgetType() {return WidgetType.B;}
}
class WidgetC
{
    public WidgetType GetWidgetType() {return WidgetType.C;}
}
// new classes have to reuse existing "WidgetType"s
class WidgetC2
{
    public WidgetType GetWidgetType() {return WidgetType.C;}
}

class Functions
{
    void func1(IWidget widget)
    {
        switch (widget.GetWidgetType())
        {
            case WidgetType.A:
                ...
                break;
            case WidgetType.A:
                ...
                break;
            case WidgetType.A:
                ...
                break;
            default:
                // hard to add new WidgetTypes (each function has to be augmented)
                throw new NotImplementedException();
        }
    }

    // other functions may be added easily
} 
```

传统的面向对象方法（Visitor-Pattern）：

```
interface IWidgetVisitor
{
    void visit(WidgetA widget);
    void visit(WidgetB widget);
    void visit(WidgetC widget);
    // new widgets can be easily added here
    // but all visitors have to be adjusted
}

interface IVisitedWidget
{
    void accept(IWidgetVisitor widgetVisitor);
}

class WidgetA : IVisitedWidget
{
    public void accept(IWidgetVisitor widgetVisitor){widgetVisitor.visit(this);}
    public void doStuffWithWidgetA(){}
}
class WidgetB : IVisitedWidget
{
    public void accept(IWidgetVisitor widgetVisitor){widgetVisitor.visit(this);}
    public void doStuffWithWidgetB(){}
}
class WidgetC : IVisitedWidget
{
    public void accept(IWidgetVisitor widgetVisitor){widgetVisitor.visit(this);}
    public void doStuffWithWidgetB(){}
}

class SampleWidgetVisitor : IWidgetVisitor
{
    public void visit(WidgetA widget){ widget.doStuffWithWidgetA(); }
    public void visit(WidgetB widget){ widget.doStuffWithWidgetB(); }
    public void visit(WidgetC widget){ widget.doStuffWithWidgetC(); }
} 
```

简单的界面方法：

```
IWidget
{
    void DoThis();
    void DoThat();
    // if we want to add
    // void DoOtherStuff();
    // we have to change each class
}

WidgetA : IWidget
{
    public void DoThis(){ doThisForWidgetA();}
    public void DoThat(){ doThatForWidgetA();}
}
WidgetB : IWidget
{
    public void DoThis(){ doThisForWidgetB();}
    public void DoThat(){ doThatForWidgetB();}
}
WidgetC : IWidget
{
    public void DoThis(){ doThisForWidgetC();}
    public void DoThat(){ doThatForWidgetC();}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T13:24:49.633

我面临着一个类似的问题 - 这里的问题本质上是多调度，这在单调度 OO 语言中没有得到很好的支持。

我达成的妥协是您的程序示例的可扩展变体。

它使用带有字典的调解器（或协调器）来注册和解决两个对象之间应该发生的动作。在下面的代码示例中，我使用了两个对象之间的碰撞问题。

基本结构如下：

```
enum CollisionGroup { Bullet, Tree, Player }

interface ICollider
{
    CollisionGroup Group { get; }
} 
```

Mediator 对象定义如下：

```
class CollisionResolver
{
    Dictionary<Tuple<CollisionGroup, CollisionGroup>, Action<ICollider, ICollider>> lookup
        = new Dictionary<Tuple<CollisionGroup, CollisionGroup>, Action<ICollider, ICollider>>();

    public void Register(CollisionGroup a, CollisionGroup b, Action<ICollider, ICollider> action)
    {
        lookup[Tuple.Create(a, b)] = action;
    }

    public void Resolve(ICollider a, ICollider b)
    {
        Action<ICollider, ICollider> action;
        if (!lookup.TryGetValue(Tuple.Create(a.Group, b.Group), out action))
            action = (c1, c2) => Console.WriteLine("Nothing happened..!");

        action(a, b);
    }
} 
```

呸！它看起来不太好，但这主要是由于泛型类型和缺乏支持对象。我没有为这个例子做任何事情，因为这会给这个答案的范围带来太多的复杂性。

该对象的使用方式如下：

```
var mediator = new CollisionResolver();
mediator.Register(CollisionGroup.Bullet, CollisionGroup.Player,
    (b, p) => Console.WriteLine("A bullet hit {0} and it did not end well", p));

mediator.Register(CollisionGroup.Player, CollisionGroup.Tree,
    (p, t) => Console.WriteLine("{0} ran into a tree. Ouch", p));

mediator.Register(CollisionGroup.Player, CollisionGroup.Player,
    (p1, p2) => Console.WriteLine("{0} and {1} hi-fived! Yeah! Awesome!", p1, p2));

var jeffrey = new Player("Jeffrey");
var cuthbert = new Player("Cuthbert");
var bullet = new Bullet();
var tree = new Tree();

mediator.Resolve(jeffrey, cuthbert); // Jeffrey and Cuthbert hi-fived! Yeah! Awesome!
mediator.Resolve(jeffrey, tree);     // Jeffrey ran into a tree. Ouch
mediator.Resolve(bullet, cuthbert);  // A bullet hit Cuthbert and it did not end well
mediator.Resolve(bullet, tree);      // Nothing happened..! 
```

这种方法是我能找到的最可扩展的。要添加新的反应或新类型，只需要一个新的枚举成员和对该`.Register()`方法的调用。

上述方法的扩展点：

*   泛型`DispatchMediator<TType, TEnum>`很容易实现
*   类似地，`Tuple<T, T>`and`Action<T, T>`类型可以被压缩为接受单个类型参数
*   `ICollider`如果您想在多个地方重用该模式，您甚至可以更进一步，将接口更改为通用接口
*   使用[可扩展枚举](http://tigerang.blogspot.co.uk/2007/05/simple-design-pattern-for-extensible.html)解决了另一个可扩展性问题（添加新类型）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:54:28.027

这真的归结为您看到代码最不稳定的地方。我想我会选择一个基类，小部件派生自该基类并标记每个函数，`virtual`因此添加一个新函数不需要所有派生类都提供一个实现，并且如果您调用该函数，您的代码不会失败一个没有提供 Widget 特定实现的具体类。

# jquery - 在 iframe 中使用 Jquery

> ID：15655794
> 
> 赞同：0
> 
> 时间：2013-03-27T09:46:54.097
> 
> 标签：jquery, iframe

我有一个 iframe，我不会使用 jquery 对样式进行一些编辑，我该如何在 iframe 上做到这一点？

```
 <iframe src="domain.com"></iframe>

<script>
$('#div').hide();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:51:12.307

根据[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)，你不能。或者如果你想隐藏整个 iframe，你可以使用简单的：

```
$("#iframe_id").hide(); 
```

# sql-server - 如何将此连接字符串转换为使用集成安全性？

> ID：15655795
> 
> 赞同：0
> 
> 时间：2013-03-27T09:46:54.840
> 
> 标签：sql-server, sql-server-2008, connection-string, integrated-security

在我前进的过程中，我非常了解 SQL。Visual Studio 使完成基础工作变得非常容易，但现在我想发布一个站点，我需要一些关于 SQL 安全性的建议。

这是我的连接字符串：

```
<add name="MyConnectionString"
  providerName="System.Data.EntityClient"
  connectionString="metadata=
  res://*/;
  provider=System.Data.SqlClient;
  provider connection string='
  Data Source=localhost;
  Initial Catalog=MyDb;
  Integrated Security=False;
  User Id=MyUser;
  Password=MyPassword;
  MultipleActiveResultSets=True'" /> 
```

如您所见，这不使用集成安全性并在 web.config 文件中公开用户名和密码。我知道这可能不是最好的解决方案，但我不知道是什么。

我有3个问题：

1.  这是生产网站可接受的做法吗？
2.  如何将连接字符串转换为使用集成安全性？
3.  我还需要在服务器上做些什么来确保集成安全性有效？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:58:34.067

1.  是的。从管理员的角度来看，集成安全性非常方便。这对我来说似乎也很安全。
2.  我将向您推荐其他已有的材料：http: [//www.connectionstrings.com/](http://www.connectionstrings.com/)
3.  您需要在 SQL Server 中创建一个基于 Windows 的登录并为其添加适当的权限。GUI 使这非常容易。

确保 Windows 用户的密码不会过期（强制执行密码策略 = 否）。

# wcf - 避免在 WCF 数据协定中填充扩展属性

> ID：15655805
> 
> 赞同：0
> 
> 时间：2013-03-27T09:47:14.313
> 
> 标签：wcf, datacontract, extended-properties

***如何避免在我的数据合同中填充 ExtendedProperties 集合？***

我的 WCF 服务正在从 XML 构建数据合同，并`ExtendedProperties`使用合同中没有的属性填充数据合同。然后他们被退回，我想避免这种情况。

清除`ExtendedProperties`集合是一种直接的方法，但我一直在寻找一种更优雅的方法来做到这一点。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:58:35.013

使用接受名为 ignoreExtensionDataObject 的布尔参数的其他 DataContractSerializer 构造函数之一是我发现完成此任务的最佳方法。

```
public DataContractSerializer(Type type, 
    IEnumerable<Type> knownTypes, 
    int maxItemsInObjectGraph, 
    bool ignoreExtensionDataObject, 
    bool preserveObjectReferences, 
    IDataContractSurrogate dataContractSurrogate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T10:02:26.023

来自 MSDN[前向兼容数据合同](http://msdn.microsoft.com/en-us/library/ms731083%28v=vs.110%29.aspx)：

[可以通过在 DataContractSerializer 构造函数中将 ignoreExtensionDataObject 设置为 true 或通过在 ServiceBehaviorAttribute 上将IgnoreExtensionDataObject](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.ignoreextensiondataobject%28v=vs.110%29.aspx)属性设置为 true 来关闭往返功能。当此功能关闭时，反序列化程序将不会填充 ExtensionData 属性，并且序列化程序不会发出该属性的内容。

# jquery - 在 jquery 模板中将 < 渲染为文本而不是 < 或 > 因为它不是 >

> ID：15655809
> 
> 赞同：2
> 
> 时间：2013-03-27T09:47:32.367
> 
> 标签：jquery, asp.net-mvc-3, jquery-templates, javascript-injection

我有一个文本`&lt;script&gt;alert('injection');&lt;/script&gt;`，我想在视图中呈现它，它在 ASP MVC3 应用程序中呈现为 jquery 模板。但`&lt;`显示为`<`.

我的 jquery 模板如下：

```
<script id="nameTemplate" type="text/x-jquery-tmpl">
    <p>${Name}</p>
</script> 
```

我们如何将其呈现为纯文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:54:11.433

正如 SpaceBison 所暗示的，您的浏览器将解码 HTML 编码的值并将它们写为“纯文本”HTML。

为了将值写出**encoded**，您实际上必须对值进行“双重编码”，因此当浏览器解码并呈现它时，它仍然会被编码一次。

如果您的值最初来自 ASP.NET MVC 模型属性或类似属性（假设这基于您的标签），您可以`HttpUtility.HtmlEncode`在服务器端代码中使用，例如：

```
Model.Name = HttpUtility.HtmlEncode(Model.Name); 
```

但是，如果您需要在前端执行此操作，您可以编写一个简单的 jQuery 函数来对值进行编码（无耻地从[这个答案](https://stackoverflow.com/a/7124052/1043198)中窃取）：

```
function HtmlEncode(str) {
    return String(str)
        .replace(/&/g, '&amp;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#39;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;');
} 
```

然后，在将项目添加到容器之前，您可以在 jQuery 中执行以下操作：

```
Name = HtmlEncode(Name); 
```

要查看它的实际效果：http: [//jsfiddle.net/Rb2VJ/1/](http://jsfiddle.net/Rb2VJ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:54:37.950

要从`&amp;`字面上理解，请使用`&amp;lt;`

`$(elem).text("&lt;");`也将其显示为纯文本。

`$(elem).html("&amp;lt;");`对于 HTML。

[http://jsfiddle.net/yCuZt/](http://jsfiddle.net/yCuZt/)

# sql - 比较电话号码sql

> ID：15655813
> 
> 赞同：4
> 
> 时间：2013-03-27T09:47:49.807
> 
> 标签：sql, sql-server, sql-server-2008-r2

我在 2 个不同的表格中有 2 组电话号码，`table 1`有直接的格式，`01234567890`另一个表格有 3 种不同的格式，有时是`01234567890`or`01234 567890`或`01234-567890`。

目前，我只是在表上进行内部联接，并且只返回几行，但会期望更多，因为显然任何带有连字符或空格的东西都会从联接中丢失。

系统的方式是我无法使用 3 种格式更改表中的数据，因此无法对其进行标准化或清理等。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T09:51:35.643

好吧，您可以考虑在第二个表中创建一个计算列来*规范*电话号码格式 - 例如：

```
ALTER TABLE dbo.YourSecondTable
ADD NormalizedPhone AS REPLACE(REPLACE(PhoneColumn, '-', ''), ' ', '') PERSISTED 
```

此表达式从 中删除任何空格和任何破折号，`PhoneColumn`并且这些值存储在名为 的新计算列`NormalizedPhone`中。

此列将始终保持最新 - 即使您`PhoneColumn`稍后更改 ' 值。它将始终*自动包含**规范化*的电话号码。

 *现在，您可以轻松地将*标准化*电话字符串上的两个表连接起来，并且您应该得到更准确的结果。*

# scala - Scala 多类型模式匹配

> ID：15655817
> 
> 赞同：89
> 
> 时间：2013-03-27T09:47:58.203
> 
> 标签：scala, types, pattern-matching

我想知道如何使用多种类型的模式匹配。我有：

```
abstract class MyAbstract

case class MyFirst extends MyAbstract
case class MySecond extends MyAbstract
case class MyThird extends MyAbstract // shouldn't be matched and shouldn't call doSomething()

val x: MyAbstract = MyFirst

x match { 
 case a: MyFirst => doSomething()
 case b: MySecond => doSomething()
 case _ => doSomethingElse()
} 
```

所以我想写一些类似的东西：

```
x match {
 case a @ (MyFirst | MySecond) => doSomething()
 case _ => doSomethingElse()
} 
```

我在一些教程中看到了类似的结构，但它给了我错误：

```
pattern type is incompatible with expected type;
[error]  found   : object MyFirst
[error]  required: MyAbstract 
```

那么有没有办法在 on case 子句中定义几种不同的类型？我认为它会使代码更漂亮。好像我会有 5 个一样，我会写 5 次相同的代码（调用 doSomething()）。

提前致谢！

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-03-27T09:58:37.077

您缺少案例类的括号。不推荐使用没有参数列表的案例类。

尝试这个：

```
abstract class MyAbstract
case class MyFirst() extends MyAbstract
case class MySecond() extends MyAbstract

val x: MyAbstract = MyFirst()

x match {
   case aOrB @ (MyFirst() | MySecond()) => doSomething(aOrB)
   case _ => doSomethingElse()
} 
```

如果您的案例类有太多参数并且不喜欢编写长`Foo(_,_,..)`模式，那么也许：

```
x match {
   case aOrB @ (_:MyFirst | _:MySecond) => doSomething(aOrB)
   case _ => doSomethingElse()
} 
```

要不就：

```
x match {
   case _:MyFirst | _:MySecond => doSomething(x) // just use x instead of aOrB
   case _ => doSomethingElse(x)
} 
```

但也许你只是想要单例对象？

```
abstract class MyAbstract
case object MyFirst extends MyAbstract
case object MySecond extends MyAbstract

val x: MyAbstract = MyFirst

x match {
   case aOrB @ (MyFirst | MySecond) => doSomething()
   case _ => doSomethingElse()
} 
```

# sql - 在 postgresql 中将 varchar 列升级为枚举类型

> ID：15655820
> 
> 赞同：29
> 
> 时间：2013-03-27T09:48:00.710
> 
> 标签：sql, database, postgresql, ddl

我们在表中有一个 varchar 列，我们需要将其升级为枚举类型。

varchar 列中的所有值都是枚举中的有效值。varchar 列中没有空值。

```
ALTER TABLE tableName
   ALTER COLUMN varcharColumn TYPE enum_type 
```

**错误：列“varcharColumn”不能转换为类型 enum_type SQL 状态：42804**

迂回的方法是

1.  使用枚举类型创建另一个新列。
2.  类型转换后使用 varchar 列更新枚举类型列。
3.  删除 varchar 列。
4.  将枚举类型列名重命名为 varchar 列名。

有没有更好的方法来实现这一目标？

提前致谢。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-27T09:53:41.900

您需要定义要使用的演员表，因为没有可用的默认演员表。

如果 中的所有值都`varcharColumn`符合枚举定义，则以下内容应该有效：

```
alter table foo 
  ALTER COLUMN varcharColumn TYPE enum_type using varcharColumn::enum_type; 
```

我个人不喜欢枚举，因为它们非常不灵活。如果我想限制列中的值，我更喜欢对 varchar 列进行检查约束。或者 - 如果值列表经常更改并且会增长 - 具有外键约束的旧“查找表”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T09:51:54.313

知道了。

```
ALTER TABLE tableName
   ALTER COLUMN varcharColumn TYPE enum_type
    USING varcharColumn::enum_type 
```

将成功更新它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-08T13:49:35.897

如果您不需要枚举排序属性并且由于缺少删除枚举值而被淘汰，您也可以考虑域类型。
域类型是用户定义类型 + 约束，这使得 x 可以通过`CHECK`& co 进行选择，因此不像枚举那样“笨拙”。

典型的枚举是例如日志级别，而域例如电子邮件文本输入验证，该字段存在于许多表中。

# jquery - 如果第一个验证失败，jQuery-validate 不会验证该字段的另一个验证

> ID：15655821
> 
> 赞同：0
> 
> 时间：2013-03-27T09:48:03.073
> 
> 标签：jquery, jquery-validate

我有两个自定义验证器附加到一个字段。不幸的是，当这两个条件都失败时，只会显示第一个验证错误。是否可以配置 jQuery 验证器，以便无论第一个验证的结果如何，它都会验证两个验证？

该字段的第一个验证器：

> $.validator.addMethod("datemin", function (value, element, param) {
> 
> ```
>  var minimum = Date.parse(param['minimum']),
>         dateValue;
> 
>     if (value) {
>         dateValue = Date.parse(value);
>         if (dateValue && (dateValue < minimum)) {
>             return false;
>         } else {
>             return true;
>         }
>     }
> 
>     return true;
> }); 
> ```

该字段的第二个验证器：

```
 $.validator.addMethod("bankday", function (value, element, params) {
            if (value != "") {
                var bankholidays = params['bankholidays'].split(",");

                // If the given date is not among the bank holidays return true otherwise, false
                if ($.inArray(value, bankholidays) == -1) {
                    return true;
                } else {
                    return false;
                }
            }

            return true;
        }); 
```

现在，当 datemin 验证器失败时，它根本不会验证第二个银行日验证。

# php - php隐藏扩展后验证码停止工作

> ID：15655823
> 
> 赞同：-1
> 
> 时间：2013-03-27T09:48:05.847
> 
> 标签：php, .htaccess, captcha

我正在使用以下代码在我的 .htaccess 文件中隐藏我的 .php 扩展名.....

```
 <IfModule mod_rewrite.c>
      RewriteEngine On

      # Unless directory, remove trailing slash
      RewriteCond %{REQUEST_FILENAME} !-d
      RewriteRule ^([^/]+)/$ http://example.com/folder/$1 [R=301,L]

      # Redirect external .php requests to extensionless url
      RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)?\ HTTP/
      RewriteRule ^(.+)\.php$ http://example.com/folder/$1 [R=301,L]

      # Resolve .php file for extensionless php urls
      RewriteRule ^([^/.]+)$ $1.php [L]
      </IfModule> 
```

但是我的验证码停止工作。该图像由以下代码行调用...

```
 <img src="assets/phpscripts/captcha_code_file.php?rand=<?php echo rand(); ?> 
```

我尝试从图像链接中删除 .php 但仍然没有乐趣。关于如何排序的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:19:49.477

所以答案是在 htaccess 中为验证码 url 添加一个规则。

```
RewriteRule ^/?assets/phpscripts/captcha_code_file.php$ - [L] 
```

# c - 使用 (int) sqrt(N) 导致“数组绑定不是整数常量”

> ID：15655827
> 
> 赞同：1
> 
> 时间：2013-03-27T09:48:13.423
> 
> 标签：c

```
#include <stdio.h>
#include <math.h>

int size = (int) sqrt(4);
int arr[size];

int main() {
  return 0;
} 
```

我得到了：

```
test.c:5: error: array bound is not an integer constant 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T09:50:08.427

您不能定义具有可变大小的静态存储数组（例如“全局”数组）。如果数组具有自动存储功能（如果它是函数中的数组），它将作为 VLA 工作。

正如 icepack 正确指出的那样，VLA 是在 C99 中正式引入的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T09:49:56.313

```
int arr[size]; 
```

这定义了一个具有恒定大小的数组。但是`size`是通过调用计算出来的`sqrt`，所以根据 C 程序的执行方式，它不是一个常数。

编译器需要知道数组有多大才能创建程序的全局内存布局。所以`sqrt`不能推迟到运行时。并且 C 没有任何可以在编译时解析的“数学”函数的概念。

解决这个问题的唯一方法是自己执行计算并将结果 ( `2`) 直接放入源代码中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T09:52:35.583

```
const int size=(int) sqrt(4); 
```

一个预先计算好的常数就可以了。但是，您既不能更改数组大小，也不能更改此常数。

# diff - 有没有像 Quick Diff 这样的基于 PC 的程序？

> ID：15655828
> 
> 赞同：1
> 
> 时间：2013-03-27T09:48:14.113
> 
> 标签：diff, utility

Quick Diff 很棒，因为 - 正如作者所说 - 而不是“必须创建两个文件......只需粘贴代码片段来执行差异”。但是，它是一个在线工具，有时我不想将代码发送到异地。

是否有类似的基于 PC 的实用程序？

参考：“快速差异在线工具”：- [http://www.quickdiff.com/](http://www.quickdiff.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:52:33.587

我使用[WinMerge](http://winmerge.org/)，它和你说的完全一样。另外，它是开源的。

如果你不喜欢它，还有[KDiff3](http://kdiff3.sourceforge.net/)，但它需要两个文件。

# ruby-on-rails - attr_accessible 可以接受对象而不是模型属性吗？

> ID：15655833
> 
> 赞同：1
> 
> 时间：2013-03-27T09:48:48.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在尝试理解一个预构建的应用程序，其中：

```
class Friendship < ActiveRecord::Base
   attr_accessible :status,:user,:friend
   belongs_to :user
   belongs_to :friend, :class_name => "User",:foreign_key => "friend_id"
end 
```

我对`attr_accessible`他提供的部分感到困惑`:user`，`:friend`因为它们不是友谊模型中的属性。这只是写作的一种简短方式，`:user_id`还是`friend_id`他实际上提供了`:user`对象和`:friend`对象？如果它们确实是对象，那是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:57:55.293

这不是一种简短的写作方式`user_id`。`attr_accessible`意味着，您可以在创建友谊时批量分配一段时间用户。这意味着你可以**做** `attr_accessible :status,:user,:friend`

```
Friendship.create! user: user1, friend: friend1 
```

**否则**会`attr_accessible`抛出错误，因为用户和朋友的批量分配被禁用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:58:03.837

它允许您分配用户或朋友，而不是分配 user_id 或friend_id：

```
Friendship.create!(:status=>"active", :user=>current_user, :friend=>@friend) 
```

，`attr_accessible :user_id,:friend_id`你会这样做：

```
Friendship.create!(:status=>"active", :user_id=>current_user.id, :friend_id=>@friend.id) 
```

总之，这两种方式都有效地保存了user_id和friend_id。只是方法不同而已。

注意：您应该只允许访问您想要分配的属性，否则您可能会创建批量分配漏洞。

# cpu - 沙桥和 haswell SSE2/AVX/AVX2 的每周期 FLOPS

> ID：15655835
> 
> 赞同：60
> 
> 时间：2013-03-27T09:48:53.153
> 
> 标签：cpu, intel, cpu-architecture, avx, flops

我对使用 Sandy-Bridge 和 Haswell 可以在每个核心每个周期完成多少次触发器感到困惑。据我了解，对于 SSE，对于 SSE，每个内核每个周期应该有 4 个触发器，对于 AVX/AVX2，每个内核每个周期应该是 8 个触发器。

这似乎在这里得到验证， [如何实现每个周期 4 次 FLOP 的理论最大值？](https://stackoverflow.com/questions/8389648/how-to-achieve-4-flops-per-cycle) ，这里是 [Sandy-Bridge CPU 规范](https://stackoverflow.com/questions/12027922/sandy-bridge-cpu-specification)。

然而，下面的链接似乎表明 Sandy-bridge 每个内核每个周期可以执行 16 次触发器，Haswell 每个内核每个周期可以执行 32 次触发器 [http://www.extremetech.com/computing/136219-intels-haswell-is-an-unprecedented -威胁到 nvidia-amd](http://www.extremetech.com/computing/136219-intels-haswell-is-an-unprecedented-threat-to-nvidia-amd)。

谁可以给我解释一下这个？

编辑：我现在明白为什么我感到困惑了。我认为术语 FLOP 仅指单浮点 (SP)。我现在看到[如何实现每个周期 4 次 FLOP 的理论最大值的测试？](https://stackoverflow.com/questions/8389648/how-to-achieve-4-flops-per-cycle)实际上是在双浮点 (DP) 上，因此它们实现了 SSE 的 4 DP FLOP/周期和 AVX 的 8 DP FLOP/周期。在 SP 上重做这些测试会很有趣。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-03-27T11:31:13.600

以下是一些最新处理器微架构的理论最大 FLOP 计数（**每个内核**）以及如何实现它们的说明。

通常，要计算此值，请查看 FMA 指令的吞吐量，例如在[https://agner.org/optimize/](https://agner.org/optimize/)或任何其他微基准测试结果上，然后乘以
`(FMAs per clock) * (vector elements / instruction) * 2 (FLOPs / FMA)`。
请注意，在实际代码中实现这一点需要非常仔细的调整（如循环展开），缓存未命中率接近于零，并且在其他任何*事情*上都没有瓶颈。现代 CPU 具有如此高的 FMA 吞吐量，以至于其他指令没有太多空间来存储结果或向它们提供输入。例如，每个时钟 2 个 SIMD 负载也是大多数 x86 CPU 的限制，因此点积将成为每 1 个 FMA 2 个负载的瓶颈。不过，经过仔细调整的密集矩阵乘法可以接近实现这些数字。

如果您的工作负载包括任何不能被纳入 FMA 的 ADD/SUB 或 MUL，则理论上的最大数量不是适合您的工作负载的目标。Haswell/Broadwell 具有每时钟 2 个 SIMD FP 乘法（在 FMA 单元上），但每个时钟只有 1 个 SIMD FP add（在具有较低延迟的单独向量 FP add 单元上）。Skylake 放弃了单独的 SIMD FP 加法器，以 4c 延迟、每时钟 2 次吞吐量运行 add/mul/fma 相同的任何向量宽度。

### 英特尔

请注意，最近微架构的 Celeron/Pentium 版本不支持 AVX 或 FMA 指令，仅支持 SSE4.2。

英特尔酷睿 2 和 Nehalem (SSE/SSE2)：

*   4 DP FLOPs/cycle：2-wide SSE2 加法 + 2-wide SSE2 乘法
*   8 SP FLOPs/cycle：4-wide SSE 加法 + 4-wide SSE 乘法

英特尔桑迪桥/常春藤桥 (AVX1)：

*   8 DP FLOPs/cycle：4-wide AVX 加法 + 4-wide AVX 乘法
*   16 SP FLOPs/cycle：8 宽度 AVX 加法 + 8 宽度 AVX 乘法

英特尔 Haswell/Broadwell/Skylake/Kaby Lake/Coffee/... (AVX+FMA3)：

*   16 DP FLOPs/cycle：两条 4-wide FMA（fused multiply-add）指令
*   32 SP FLOPs/cycle：两条 8-wide FMA（fused multiply-add）指令
*   （使用 256 位向量指令会降低某些 CPU 的最大涡轮时钟速度。）

Intel Skylake-X/Skylake-EP/Cascade Lake/etc ( **AVX512F** ) 带**1 个 FMA 单元**：一些 Xeon Bronze/Silver

*   16 DP FLOPs/cycle：一条 8-wide FMA（fused multiply-add）指令
*   32 SP FLOPs/cycle：一条 16-wide FMA（fused multiply-add）指令
*   与更窄的 256 位指令的计算吞吐量相同，但对于更广泛的加载/存储、一些不在 FMA 单元上运行的向量操作（如按位操作）和更广泛的 shuffle，AVX512 仍然可以实现加速。
*   （运行中的 512 位向量指令会关闭端口 1 上的向量 ALU。还会**降低最大涡轮时钟速度**，因此“周期”在性能计算中不是常数。）

英特尔 Skylake-X/Skylake-EP/Cascade Lake/etc ( **AVX512F** ) 带有**2 个 FMA 单元**：至强金/铂金和 i7/i9 高端台式机 (HEDT) 芯片。

*   32 DP FLOPs/cycle：两条 8-wide FMA（fused multiply-add）指令
*   64 SP FLOPs/cycle：两条 16-wide FMA（fused multiply-add）指令
*   （运行中的 512 位向量指令会关闭端口 1 上的向量 ALU。还会降低最大涡轮时钟速度。）

未来：英特尔[Cooper Lake](https://en.wikichip.org/wiki/intel/microarchitectures/cooper_lake)（Cascade Lake 的继任者）预计将引入[Brain Float](https://en.wikichip.org/wiki/brain_floating-point_format)，这是一种用于神经网络工作负载的 float16 格式，支持实际的 SIMD 计算，这与当前仅支持加载/存储的 F16C 扩展不同转换为 float32。这应该使 FLOP/cycle 吞吐量与相同硬件上的单精度相比翻倍。

当前的英特尔芯片仅在 iGPU 中的标准 float16 上直接进行实际计算。

* * *

### AMD

AMD K10：

*   4 DP FLOPs/cycle：2-wide SSE2 加法 + 2-wide SSE2 乘法
*   8 SP FLOPs/cycle：4-wide SSE 加法 + 4-wide SSE 乘法

AMD 推土机/打桩机/压路机/挖掘机，每个模块（两个核心）：

*   8 DP FLOPs/cycle：4-wide FMA
*   16 SP FLOPs/cycle: 8-wide FMA

AMD锐龙

*   8 DP FLOPs/cycle：4-wide FMA
*   16 SP FLOPs/cycle: 8-wide FMA

* * *

### x86 低功耗

英特尔凌动（Bonnell/45nm、Saltwell/32nm、Silvermont/22nm）：

*   1.5 DP FLOPs/cycle：标量 SSE2 加法 + 标量 SSE2 乘法每隔一个周期
*   6 SP FLOPs/cycle：4-wide SSE 加法 + 4-wide SSE 乘法每隔一个周期

AMD山猫：

*   1.5 DP FLOPs/cycle：标量 SSE2 加法 + 标量 SSE2 乘法每隔一个周期
*   4 SP FLOPs/cycle：每隔一个周期进行 4 次 SSE 加法 + 每隔一个周期进行 4 次 SSE 乘法

AMD捷豹：

*   3 DP FLOPs/cycle：4-wide AVX 加法每隔一个周期 + 4-wide AVX 乘法在四个周期内
*   8 SP FLOPs/cycle：每隔一个周期进行 8 次 AVX 加法 + 每隔一个周期进行 8 次 AVX 乘法

* * *

* * *

### 手臂

ARM Cortex-A9：

*   1.5 DP FLOPs/cycle：标量加法 + 标量乘法每隔一个周期
*   4 SP FLOPs/cycle：4-wide NEON 每隔一个周期加法 + 4-wide NEON 乘法每隔一个周期

ARM Cortex-A15：

*   2 DP FLOPs/cycle：标量 FMA 或标量乘加
*   8 SP FLOPs/cycle：4-wide NEONv2 FMA 或 4-wide NEON multiply-add

高通Krait：

*   2 DP FLOPs/cycle：标量 FMA 或标量乘加
*   8 SP FLOPs/cycle：4-wide NEONv2 FMA 或 4-wide NEON multiply-add

* * *

### IBM 电源

IBM PowerPC A2（Blue Gene/Q），每个内核：

*   8 DP FLOPs/cycle：每个周期 4-wide QPX FMA
*   SP 元素扩展到 DP 并在相同的单元上处理

IBM PowerPC A2（Blue Gene/Q），每个线程：

*   4 DP FLOPs/cycle：4-wide QPX FMA 每隔一个周期
*   SP 元素扩展到 DP 并在相同的单元上处理

* * *

### 英特尔 MIC / 至强融核

Intel Xeon Phi (Knights Corner)，每个核心：

*   16 DP FLOPs/cycle：每个周期 8-wide FMA
*   32 SP FLOPs/cycle：每个周期 16-wide FMA

Intel Xeon Phi (Knights Corner)，每个线程：

*   8 DP FLOPs/cycle：8-wide FMA 每隔一个周期
*   16 SP FLOPs/cycle：16-wide FMA 每隔一个周期

Intel Xeon Phi (Knights Landing)，每个核心：

*   32 DP FLOPs/cycle：每个周期两个 8-wide FMA
*   64 SP FLOPs/cycle：每个周期两个 16-wide FMA

IBM Blue Gene/Q 和 Intel Xeon Phi (Knights Corner) 有 per-thread 和 per-core 数据的原因是这些内核在每个内核运行多个线程时具有更高的指令发出率。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-07-24T13:35:59.530

Haswell 的加法吞吐量低于乘法和 FMA。有两个乘法/FMA 单元，但只有一个 fp 加法单元。如果您的代码主要包含加法，那么您必须将加法替换为 FMA 指令，乘数为 1.0 以获得最大吞吐量。

Haswell 上 FMA 指令的延迟为 5，吞吐量为每时钟 2。这意味着您必须保持 10 个并行操作才能获得最大吞吐量。例如，如果您想添加一个很长的 fp 编号列表，则必须将其分成十个部分并使用十个累加器寄存器。

这确实是可能的，但是谁会为一个特定的处理器做出如此奇怪的优化呢？

# ruby-on-rails-3 - validates_uniqueness_of 和 state_machine 转换的问题

> ID：15655846
> 
> 赞同：0
> 
> 时间：2013-03-27T09:49:35.147
> 
> 标签：ruby-on-rails-3, validation, state-machine

我对 rails 'validates_uniqueness_of' 函数和 state_machine gem 有疑问。请看下面的代码：

```
state_machine :initial => :foo do

  state :bar do
    validates_uniqueness_of :something
  end

  event :action do
    transition :foo => :bar
  end

end 
```

如您所见，当模型处于“bar”状态时，我想验证“某物”的唯一性。但是，验证似乎已经在过渡期间进行。因此，我的实例变得无效并且转换永远不会完成。

那么，有没有办法确保在转换发生后进行验证？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:11:03.663

很抱歉谁遇到了类似的问题，但我们通过让客户更改他们的用例来解决了这个问题；-)。

# excel - 在指定范围内添加分钟？

> ID：15655854
> 
> 赞同：0
> 
> 时间：2013-03-27T09:50:00.427
> 
> 标签：excel, vba

我有一个名为“Run_Time”的范围，其中包含 13:00。我有另一个范围，其中包含值 30（代表分钟）。

我希望将这两者结合在一个 IF 语句中，以检查 Now 是否大于 13:00 + 30 分钟。

我试过了：

```
?DateAdd("n",sheet_Config.Range("Run_Time").value,sheet_Config.Range("Run_Frequency").value) 
```

在即时窗口中添加时间，但它返回一个包含 1899 年的值 - 这是不正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:00:19.977

尝试这个：

```
? Format(sheet_Config.Range("Run_Time").value+(sheet_Config.Range("Run_Frequency").value/1440), "hh:mm:ss") 
```

它将在 13:30 返回。如果你只需要比较你可以摆脱`Format`功能。

编辑 - 准确地说，比较你可以使用这个：

```
? Time > (sheet_Config.Range("Run_Time").value+(sheet_Config.Range("Run_Frequency").value/1440)) 
```

# python-2.7 - 从文本文件的多行中提取数据：Python

> ID：15655861
> 
> 赞同：0
> 
> 时间：2013-03-27T09:50:16.370
> 
> 标签：python-2.7

你好，我是 python 中的新手（必须使用 python 2.7）编程，我正在使用一个遗留系统，它生成一个 13,000 行的 txt 文件，示例如下

```
center = 1204
blah
blah
outside_diameter = 9.00023
blah 
blah
 --- MEASUREMENT DATA LEFT ---
2.0003 , 3.000943
3.4330 , 3.00083
 --- MEASUREMENT DATA RIGHT ---
4.0054 , 2.00004
3.4343 , 3.03200 
```

我必须找到 center 和 outside_diameter 的值并将该 int 数据存储在变量中......然后棘手的部分（对我来说）我必须逐行读取所有`--- MEASUREMENT DATA LEFT ---`行并且要读取的行数等于中心的 int值为 i\在这种情况下，我必须以`--- MEASUREMENT DATA LEFT ---`类似的方式逐行读取 1204 行`--- MEASUREMENT DATA RIGHT ---` ，并将所有这些结果保存在文本文件中。

请帮助解决这个问题....在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:54:55.483

如果您知道文件的结构，则可以使用一些[Python 输入和输出](http://docs.python.org/2/tutorial/inputoutput.html)工作以及一些[Python 字符串操作。](http://docs.python.org/2/library/string.html).

小费：

```
"random" in ["just some random text"] 
```

返回真；

# c# - 在文本文件中每 16 个字符后添加或附加 ,（逗号）

> ID：15655864
> 
> 赞同：-5
> 
> 时间：2013-03-27T09:50:22.753
> 
> 标签：c#, hex, append

我必须在 c# 中每 16 个字符后添加或附加 ,（逗号）。此代码为 .txt 格式。请帮助一些示例代码如下：

> 443322115355524403000000000000001a000000c0604f0060624f0000000000ee3e01000000000050726f626520300050726f6265203000446174612047726f7570000000000000412d5363616e000047723a310000000044656661756c74204265616d0000000047617465204d61696e2028412d5363616e2900000000000000790000407b0000807d0000c07f0000008200004084000080860000c0880000008b0000408d0000808f0000c0910000009400004096000080980000c09a0000009d0000409f000080a10000c0a3000000a6000040a8000080aa0000c0ac000000af000040b1000080b30000c0b5000000b8000040ba000080bc0000c0be000000c1000040c3000080c50000c0c7000000ca000040cc000080ce0000c0d0000000d3000040d5000080d70000c0d9000000dc000040de000080e00000c0e2000000e5000040e7000080e90000c0eb000000ee000040f0000080f20000c0f4000000f7000040f9000080fb0000c0fd0000000001004002010080040100c006010000090100400b0100800d0100c00f0100001201004014010080160100c0180100001b0100401d0100801f0100c0210100002401004026010080280100c02a0100002d0100402f010080310100c03301000036010040380100803a0100c03c0100003f01004041010080430100c045010000480100404a0100804c0100c04e0100005101004053010080550100c0570100005a0100405c0100805e0100c06001000"

我努力了

```
using (StreamReader reader = new StreamReader(fileStream))
{
    string linesFromFile = String.Concat(bin.Select(b => b.ToString("x2")));
    linesFromFile.Split(',');
    richTextBox1.Text = linesFromFile;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:59:16.060

```
string input = "12345678";
StringBuilder sb = new StringBuilder();
for (int i = 0; i < input.Length; i++)
{
    if (i % 3 == 0)
        sb.Append(',');
    sb.Append(input[i]);
}
string formatted = sb.ToString(); 
```

[http://msdn.microsoft.com/en-us/library/system.text.stringbuilder(v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder(v=VS.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:00:15.280

您可以为此使用 StringBuilder

```
s = "Your text";
StringBuilder result = new StringBuilder();
for (var i = 0; i<s.Length; i++)
{
    char currLetter = s[i];
    result = (i % 16 == 0) ? result.Append(string.Format(",{0}", currLetter)) : result.Append(currLetter);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:55:49.650

一个简单的方法是：

```
 string result = string.Empty;
        for (int i = 0; i < text.ToArray().Length; i++)
        {
            char c = text.ToArray()[i];
            if (i%16 != 0)
                result += c;
            else
                result += "," + c;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T10:09:09.000

这有点短（而且不是很 C#-ish）：

```
string x = "that string", y = string.Empty; ; int i = -16;
while ( i < x.Length ) y += x.Skip( i += 16 ).Take( 16 ) + ","; 
```

如果速度很重要，您应该考虑使用 StringBuilder。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T10:10:30.403

以下是基于输入的示例代码...

```
 var input ="443322115355524403000000000000001a000000c0604f0060624f0000000000ee3e01000000000050726f626520300050726f6265203000446174612047726f7570000000000000412d5363616e000047723a310000000044656661756c74204265616d0000000047617465204d61696e2028412d5363616e2900000000000000790000407b0000807d0000c07f0000008200004084000080860000c0880000008b0000408d0000808f0000c0910000009400004096000080980000c09a0000009d0000409f000080a10000c0a3000000a6000040a8000080aa0000c0ac000000af000040b1000080b30000c0b5000000b8000040ba000080bc0000c0be000000c1000040c3000080c50000c0c7000000ca000040cc000080ce0000c0d0000000d3000040d5000080d70000c0d9000000dc000040de000080e00000c0e2000000e5000040e7000080e90000c0eb000000ee000040f0000080f20000c0f4000000f7000040f9000080fb0000c0fd0000000001004002010080040100c006010000090100400b0100800d0100c00f0100001201004014010080160100c0180100001b0100401d0100801f0100c0210100002401004026010080280100c02a0100002d0100402f010080310100c03301000036010040380100803a0100c03c0100003f01004041010080430100c045010000480100404a0100804c0100c04e0100005101004053010080550100c0570100005a0100405c0100805e0100c06001000";

        var output = string.Empty;
        int count = 0;
        foreach (var c in input)
        {
            count++;
            output += count % 16 == 0 ? "," : c.ToString();
        }

        //Output : 443322115355524,030000000000000,1a000000c0604f0,60624f000000000,ee3e01000000000,50726f626520300,50726f626520300,446174612047726,757000000000000,412d5363616e000,47723a310000000,44656661756c742,4265616d0000000,47617465204d616,6e2028412d53636,6e2900000000000,00790000407b000,807d0000c07f000,008200004084000,80860000c088000,008b0000408d000,808f0000c091000,009400004096000,80980000c09a000,009d0000409f000,80a10000c0a3000,00a6000040a8000,80aa0000c0ac000,00af000040b1000,80b30000c0b5000,00b8000040ba000,80bc0000c0be000,00c1000040c3000,80c50000c0c7000,00ca000040cc000,80ce0000c0d0000,00d3000040d5000,80d70000c0d9000,00dc000040de000,80e00000c0e2000,00e5000040e7000,80e90000c0eb000,00ee000040f0000,80f20000c0f4000,00f7000040f9000,80fb0000c0fd000,000001004002010,80040100c006010,00090100400b010,800d0100c00f010,001201004014010,80160100c018010,001b0100401d010,801f0100c021010,002401004026010,80280100c02a010,002d0100402f010,80310100c033010,003601004038010,803a0100c03c010,003f01004041010,80430100c045010,00480100404a010,804c0100c04e010,005101004053010,80550100c057010,005a0100405c010,805e0100c060010,0
        Console.WriteLine(String.Format("Output : {0}", output)); 
```

# javascript - DataTableColumns 仅在最大化时可调整大小

> ID：15655867
> 
> 赞同：0
> 
> 时间：2013-03-27T09:50:36.293
> 
> 标签：javascript, css, ajax, jsf, primefaces

我有一个**p:dataTable**，里面有很多数据。我希望用户能够调整列的大小，但前提是窗口最大化；如果窗口未最大化，则列重叠并且无法读取数据。

但是，只有当**p:dataTable**中的**resizableColumns**属性为**true**时才会发生这种情况；如果它为**false**并且窗口未最大化，则会出现滚动条。

 ******这正是我想要的，如果窗口最大化**resizableColumns=true**否则**resizableColumns=false**和一个滚动条（如果 resizableColumns=true，滚动条不会出现，无论是否最大化）。

这里有一些图片：

![这就是窗口最大化时的样子=>列应该可以调整大小](../Images/6ae2a8a9f8d075b4a01d0887ccffe027.png)

![列重叠](../Images/6e08b3c7fbab1bb2438ee740e1b0148b.png)

是否可以检查窗口是否最大化并在之后设置 resizableColumns 值？******

# html - Joomla 网站元黑客

> ID：15655870
> 
> 赞同：0
> 
> 时间：2013-03-27T09:50:42.583
> 
> 标签：html, security, joomla, keyword, code-injection

我的客户 joomla 网站遭受了一次奇怪的黑客攻击，我不能完全确定它是如何工作的？

[https://www.google.co.uk/search?q=bishamabbeysailing.co.uk+&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a#hl= en&client=firefox-a&hs=XbT&rls=org.mozilla:en-US:official&q=+site:bishamabbeysailing.co.uk+bishamabbeysailing.co.uk&sa=X&ei=zL5SUdauNMnWOffggJgC&ved=0CE4QrAM&bav=on.2,or.r_qf.&bvm=bv .44342787,d.ZWU&fp=c50a33b4a78ecaf3&biw=1920&bih=909](https://www.google.co.uk/search?q=bishamabbeysailing.co.uk+&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a#hl=en&client=firefox-a&hs=XbT&rls=org.mozilla:en-US:official&q=+site:bishamabbeysailing.co.uk+bishamabbeysailing.co.uk&sa=X&ei=zL5SUdauNMnWOffggJgC&ved=0CE4QrAM&bav=on.2,or.r_qf.&bvm=bv.44342787,d.ZWU&fp=c50a33b4a78ecaf3&biw=1920&bih=909)

> 元描述谷歌 - 任何探测者的剪辑！Amoksiklav 1000 毫克山多士：虽然...

如果您看到结果，所有页面都有与药物相关的元描述和关键字，但是当您访问该网站时，一切看起来都很好。

[http://www.bishamabbeysailing.co.uk/](http://www.bishamabbeysailing.co.uk/)

> 元描述网站 - “Bisham Abbey Sailing & Navigation School, RYA 船舶操作课程....

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-27T11:58:13.290

这很可能在主 index.php 或模板中。或者它甚至可能在 .htaccess 文件中。

正如亚历山大所说，黑客肯定会检查用户代理。因此，您可以对其进行搜索，看看是否在您的文件中找到任何内容。还要检查在正常安装中不应该存在的文件。

如果您不熟悉 Joomla 文件结构，最好的办法是删除所有内容并重新设置干净。或使用 myjoomla.com 之类的专业服务为您执行审核，甚至为您清理。

# mysql - 存储过程中无法识别 GROUP_CONCAT 值

> ID：15655873
> 
> 赞同：0
> 
> 时间：2013-03-27T09:50:54.223
> 
> 标签：mysql, stored-procedures

我写了一个存储过程。shippingnumbers 和 cartonid 都应返回逗号分隔值。shippingnumbers 正确出现，即逗号分隔值，但 cartonid 始终只返回一个值，即使有多行也是如此。我该如何解决这个问题。

```
 DELIMITER $$
    CREATE PROCEDURE `sp_deleteOrderData`(orderid BIGINT(11))
    BEGIN
        DECLARE shipmentnumbers VARCHAR(1000);
        DECLARE cartonid VARCHAR(1000);

        SELECT GROUP_CONCAT(a_shipmentid) FROM t_shipment WHERE a_orderid = orderid INTO shipmentnumbers;

        SELECT GROUP_CONCAT(a_cartonid) FROM t_carton WHERE a_shipmentid IN (shipmentnumbers) INTO cartonid;

    SELECT shipmentnumbers;
    /*SELECT  cartonid;  */
    END$$

    DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:56:55.460

为什么不尝试以下方法，使用内部连接来匹配所有组合

```
DELIMITER $$
CREATE PROCEDURE `sp_deleteOrderData`(orderid BIGINT(11))
BEGIN
    DECLARE shipmentnumbers VARCHAR(1000);
    DECLARE cartonid VARCHAR(1000);

    SELECT
        GROUP_CONCAT(a_shipmentid),
        GROUP_CONCAT(a_cartonid)
    INTO
        shipmentnumbers,
        cartonid
    FROM t_shipment ts
    LEFT JOIN t_carton tc
    ON tc.a_shipmentid = ts.a_shipmentid

    WHERE ts.a_orderid = orderid;

    SELECT 
        shipmentnumbers,
        cartonid;
END$$

DELIMITER ; 
```

如果您尝试从这些表中删除，尽管您可以通过一些连接更有效地执行此操作，即

```
DELETE ts,tc
FROM t_shipment ts
LEFT JOIN t_carton tc
ON tc.a_shipmentid = ts.a_shipmentid
WHERE ts.a_orderid = orderid; 
```

# xml - 针对 XSD 模式验证 XML 并使用 groovy 捕获验证器期望

> ID：15655875
> 
> 赞同：2
> 
> 时间：2013-03-27T09:50:55.397
> 
> 标签：xml, exception-handling, groovy, xsd, validation

```
def validateXml(xml){

    String xsd = "src/main/ressources/fulltext-documents-v1.2.3.xsd"

    def factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI)
    def schema = factory.newSchema(new StreamSource(new File(xsd)))
    def validator = schema.newValidator()
    validator.validate(new StreamSource(new StringReader(xml)))
} 
```

这是我验证 xml 文档的字符串表示形式的函数。在另一个捕获验证器可能引发的异常的函数下方

```
def xmlVerification(xml) {

    Node rootNode = new XmlParser().parseText(xml)
    def stringXml = XmlUtil.serialize(rootNode)

    try{
        validateXml(stringXml)
        println "no error in text"
    }catch(SAXParseException e){
        println "column number "+e.getColumnNumber()
        println "line number"+e.getLineNumber()
    }
} 
```

现在它只显示引发异常的列和行号（目前对我来说已经足够了）。

现在，假设我有一个至少有 2 个错误的文档。我希望得到这两个错误（例如在表格中）然后处理它们。使用我的代码，它会在引发的第一个异常时停止，因此我无法处理这 2 个错误。我必须更正第一个才能更正第二个（通过第二次重新运行我的代码）。

知道如何浏览整个文档，存储所有异常并在 .each{} 循环或类似的东西中处理它们吗？

希望它足够清楚

提前致谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T10:07:12.103

这应该做你想要的：

```
import org.xml.sax.ErrorHandler
import static javax.xml.XMLConstants.W3C_XML_SCHEMA_NS_URI
import javax.xml.transform.stream.StreamSource
import javax.xml.validation.Schema
import javax.xml.validation.SchemaFactory
import javax.xml.validation.Validator

List findProblems( File xml, File xsd ) {
  SchemaFactory factory = SchemaFactory.newInstance( W3C_XML_SCHEMA_NS_URI )
  Schema schema = factory.newSchema( new StreamSource( xsd ) )
  Validator validator = schema.newValidator()
  List exceptions = []
  Closure<Void> handler = { exception -> exceptions << exception }
  validator.errorHandler = [ warning:    handler,
                             fatalError: handler,
                             error:      handler ] as ErrorHandler
  validator.validate( new StreamSource( xml ) )
  exceptions
}

// Two files I got for testing
File xml = new File( 'books.xml' )
File xsd = new File( 'books.xsd' )

// Call the method, and print out each exception
findProblems( xml, xsd ).each {
  println "Problem @ line $it.lineNumber, col $it.columnNumber : $it.message"
} 
```

或者一个更符合概念的 groovy 版本是：

```
import org.xml.sax.ErrorHandler
import static javax.xml.XMLConstants.W3C_XML_SCHEMA_NS_URI
import javax.xml.transform.stream.StreamSource
import javax.xml.validation.SchemaFactory

List findProblems( File xml, File xsd ) {
  SchemaFactory.newInstance( W3C_XML_SCHEMA_NS_URI )
               .newSchema( new StreamSource( xsd ) )
               .newValidator().with { validator ->
    List exceptions = []
    Closure<Void> handler = { exception -> exceptions << exception }
    errorHandler = [ warning: handler, fatalError: handler, error: handler ] as ErrorHandler
    validate( new StreamSource( xml ) )
    exceptions
  }
} 
```

# android - 在 ViewPager 中，滑动到第三个选项卡时，tab1 中的子片段消失

> ID：15655876
> 
> 赞同：5
> 
> 时间：2013-03-27T09:51:00.673
> 
> 标签：android, android-layout, android-fragments, android-viewpager

我在 FragmentStatePagerAdapter 中有 3 个选项卡。我有一个选项卡 1 的片段，它动态地将视图添加到相对布局内的“线性布局”容器中。我在选项卡 1 片段中动态添加了一些视图。我还在该 linearLayout 容器中添加了一个完整的片段，以及上下其他视图。这工作正常.. 一切都很好。

但是当我转到第 3 页并回来时。所有的观点都在那里。但是那个完整的片段消失了~~ **编辑**
它从tab1消失并出现在tab2中添加另一个子片段的视图下方。

首先，我在 tab1 和 tab2 中有一个 listFragment。基于 listItem 单击我在每个选项卡中加载一个片段，tab1 和 2 中的两个片段在 xml 下膨胀相同并添加动态视图，但在某些情况下，我添加一个完整的片段而不是 xml 中给出的线性布局中的视图。 当我必须在选项卡 1 和选项卡 2 中的两个新添加的片段中添加两个片段时，出现了**问题，只有列表，然后滑动到选项卡 3。**回来时。“tab1 主要片段”中的片段消失并出现在“tab2 主要片段”中的片段下方

这是 viewpager，我在其中通过 setItem(fragment, position) 方法更改不同的片段：

```
public static class ScreenSlidePagerAdapter extends
        FragmentStatePagerAdapter {

    public static ArrayList<Fragment> tabs_fragments = new ArrayList<Fragment>(
            3);

    public ScreenSlidePagerAdapter(FragmentManager fm,
            ArrayList<Fragment> tabs) {
        super(fm);
        ScreenSlidePagerAdapter.tabs_fragments = tabs;
    }

    @Override
    public Fragment getItem(int arg0) {
        return tabs_fragments.get(arg0);
    }

    @Override
    public int getCount() {
        return tabs_fragments.size();
    }

    @Override
    public int getItemPosition(Object object) {
        if (tabs_fragments.contains(object)) {
            return POSITION_UNCHANGED;
        }
        return POSITION_NONE;
    }

    public static void setItem(Fragment fr, int position) {
        if (position <= 2 && position >= 0) {
            tabs_fragments.remove(position);
            tabs_fragments.add(position, fr);
        } else
            Log.d("adding tab", "wrong tab position to add fragment at");
    }
} 
```

这就是我将片段添加到线性布局的方式，其中'll'是相对布局内的线性布局，即tab1上片段的实际内容视图

```
ll.addView(getTitle("Set Message Receive Settings"));
        // View smsRecLayout = inflater.inflate(R.layout.fr_ev_sms_receive,
        // container, false);
        Bundle b = new Bundle();
        b.putInt("id", eventId);
        b.putInt("event", eventTypeId);
        Fragment fr = new FrEv_SMSReceive();
        fr.setArguments(b);
        getFragmentManager().beginTransaction()
                .add(ll.getId(), fr, "fr_sms_receive").commit(); 
```

这是片段的布局，其中在线性布局“fr_event_container”中添加了另一个片段。FragmentStatePagerAdapter

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".EventDetails" >

<TextView
    android:id="@+id/title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:gravity="center_horizontal"
    android:padding="10dp"
    android:textIsSelectable="false" />

<ScrollView
    android:id="@+id/fr_event_container_scroll"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/sep1"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/title" >

    <LinearLayout
        android:id="@+id/fr_event_container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
    </LinearLayout>
</ScrollView>

<View
    android:id="@+id/sep1"
    android:layout_width="fill_parent"
    android:layout_height="2dp"
    android:layout_above="@+id/addOther"
    android:layout_centerHorizontal="true"
    android:layout_margin="10dp"
    android:background="#000"
    android:padding="10dp"
    android:visibility="gone" />

<Button
    android:id="@+id/next"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/addOther"
    android:layout_alignBottom="@+id/addOther"
    android:layout_alignParentRight="true"
    android:layout_marginRight="54dp"
    android:text="Next"
    android:width="90dp" /> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T09:57:49.037

ViewPager 有一个最大的离屏页面限制。您可以将其设置得更高`setOffscreenPageLimit(int)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:00:19.523

我已经知道问题在于对两个选项卡使用相同的布局而不在运行时更改其 ID `setId`;

尽管片段位于不同的选项卡中，但 Android 将首先添加的布局视为主要布局，因此如果我在 tab1 之后在 tab2 中添加了一个片段，那么在 tab2 或该布局的 tab2 版本中添加的任何内容都将在 tab1 中进行（首先添加） .

我在运行时更改了 layoutIds 并解决了问题。

# coq - Coq 中的模块错误类型不同

> ID：15655884
> 
> 赞同：0
> 
> 时间：2013-03-27T09:51:18.287
> 
> 标签：coq

我很难弄清楚如何编写这段代码。

例如，我有一个签名，`A`一个函子作为参数，为了能够使用，我定义了一个模块实现签名`C``a: A``C``B``A`

```
Require Import String.
Module Type A.
  Parameter toto : string -> nat. 
End A.

Module C (Import a : A).
 ...
End C.

Module B <: A.
      Definition toto (s: string) := foo s.
End B. (* COQ error *) 
```

并支持我有类型`foo: string -> string list-> nat.`

然后在`End B.`，我有一个错误`Coq`说：`signature components for label toto do not match: types differ.`

或者另一种方式：

```
Module B.
 Definition too (s : string) := foo s.
End B.

Module Export D := C B. 
```

我会在`D`

我理解这个问题，因为我没有`string list`在 的定义中提供论据`toto`。

`string list`所以我的问题是我不知道在这种情况下如何提供论点。

在我的真实代码中，我使用`Section`并`Record`键入而不是`Module`.

```
Record A : Type := mkA { too : string -> nat}. 
```

然后我打开一个`Section`

```
Section B.
 Variable l: string list.
 Definition too (s: string) := foo s l.
 Definition A := mkA too.
End B. 
```

您能否帮助我编写或理解如何`B`正确编写模块中的函子？有没有办法可以`string list`在模块中定义/声明变量？同样在定义之后，`Coq`我会将其提取到`OCaml`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:37:29.417

好吧，您总是可以这样做：

```
Require Import String.

Parameter foo: string -> list string -> nat.

Module Type A.

  Parameter toto : string -> nat. 

End A.

Module B <: A.

  Variable (* or Parameter, or Axiom *) ls : list string.

  Definition toto (s: string) := foo s ls.

End B. 
```

但据我了解，这只会使 ls 成为公理......另一个解决方案是延迟提供 ls：

```
ModuleType HasListString.

  Parameter ls : list string.

End HasListString.

Module B(LS: HasListString) : A.

  Definition toto (s: string) := foo s LS.ls.

End B. 
```

不过，这可能不是您所需要的。没有上下文，很难给你更好的建议。

# cocos2d-iphone - layer->schedule() 不起作用

> ID：15655888
> 
> 赞同：0
> 
> 时间：2013-03-27T09:51:40.847
> 
> 标签：cocos2d-iphone, cocos2d-x

```
void HelloWorld::startMovingBackground() {

    CCLog("startMovingBackground...");

    if ( isLeftPressed && isRightPressed ) {
        return;
    }

    CCLog("schedule...");        // OK.......................

    this->schedule(schedule_selector(HelloWorld::moveBackground));
} 
```

和

```
void HelloWorld::moveBackground(float f) {

    CCLog("moveBackground %f", f);       // NO....................

    // Do move background...
} 
```

但是，没有调用 moveBackground 函数。帮我...

==================================================== ========

代码（初始化“HelloScene”）

```
CCScene* HelloWorld::scene() {
    CCScene * scene = NULL;
    do {
        scene = CCScene::create();
        CC_BREAK_IF(! scene);
        HelloWorld *layer = HelloWorld::create();
        CC_BREAK_IF(! layer);
        scene->addChild(layer);
    } while (0);
    return scene;
}

bool HelloWorld::init()
{
    bool bRet = false;
    do {
        CC_BREAK_IF(! CCLayerColor::initWithColor(ccc4(255, 255, 255, 255)) );

        this->setTouchEnabled(true);

        winSize = CCDirector::sharedDirector()->getWinSize();

        this->setTouchEnabled(true);

        this->createBackgroundParallax();

        this->createArrowButtons();

        bRet = true;
    } while (0);

    return bRet;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T06:30:07.290

如果您调用`onEnter`，`scheduleUpdate()`可能无法正常工作。请尝试以下操作：

```
CCDirector::sharedDirector()->getScheduler()->scheduleUpdateForTarget(this,0,false); 
```

或者

```
CCDirector::sharedDirector()->getScheduler()->scheduleSelector(schedule_selector(NewGame::update),this,0.1,false); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-28T02:00:18.120

你错过了一场争论

```
this->schedule( selector, time_interval); 
```

如果我没记错的话，默认是 0，它永远不会被调用。

# html - 网址中的 CSS 计数器

> ID：15655889
> 
> 赞同：6
> 
> 时间：2013-03-27T09:51:42.530
> 
> 标签：html, css

我有兴趣根据其位置动态设置列表项目旁边的图像。您可以在下面看到我正在使用 CSS 的计数器功能来跟踪列表项，并且我正在尝试使用计数器将图像指定为列表样式类型。

```
ul{
    counter-reset:list;
}
li
{
    counter-increment:list;
    list-style:disc outside url("http://dummyimage.com/" counter(list) "x" counter(list) "");
}
<ul>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
</ul> 
```

让计数器在 url 声明中工作的正确方法是什么？甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:58:16.893

`counter()`函数只能用于`content`属性。URL 组合，就像您在上面尝试创建的那样，在 CSS 中是不可能的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T10:32:59.873

url 不能由多个字符串组成

例如，这项工作：

```
url("http://dummyimage.com/10x10"); 
```

但这不起作用：

```
url("http://dummyimage.com/" "10x10"); 
```

计数器与它无关

另一方面，您可以使用变量来做到这一点，请尝试查看 LessCSS 以获取 axample。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T09:59:59.863

我不确定您要实现什么，但这是您认为有用的示例代码：[示例代码](http://codepen.io/anon/pen/akzxl)

**html**

```
<ul>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
</ul> 
```

**css**

```
ul { counter-reset: list; }
li {
  counter-increment: list;
  list-style: disc outside url("http://placekitten.com/20/20");
}
li:before {
  counter-increment: section;
  content:"Item " counter(list) ". ";
} 
```

# maven - m2e 无法使用 Artifactory 解析原型

> ID：15655890
> 
> 赞同：5
> 
> 时间：2013-03-27T09:51:44.207
> 
> 标签：maven, m2eclipse, artifactory

我有这种类型的问题：

我已经将 Artifactory 配置为内部代理存储库，并且一切正常，除了现在我无法使用 m2Eclipse 向导创建新项目。

我以这种方式修改了 settings.xml：

```
<proxies>
 <proxy>
   <id>optional</id>
   <active>true</active>
   <protocol>http</protocol>
   <username></username>
   <password></password>
   <host>myproxymachine.mycompany.com</host>
   <port>8080</port>
   <nonProxyHosts>*.mycompany.com|127.0.0.1</nonProxyHosts>
 </proxy>
</proxies>

<servers>
 <server>
  <username>user</username>
  <password>pwd</password>
  <id>central</id>
</server>
<server>
  <username>user</username>
  <password>pwd</password>
  <id>snapshots</id>
</server> 
```

```
<profile>
  <repositories>
    <repository>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>libs-release</name>
      <url>http://srvmmaven.mycompany.com:8081/artifactory/libs-release</url>
    </repository>
    <repository>
      <snapshots />
      <id>snapshots</id>
      <name>libs-snapshot</name>
      <url>http://srvmmaven.mycompany.com:8081/artifactory/libs-snapshot</url>
    </repository>
  </repositories>
  <pluginRepositories>
    <pluginRepository>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>repo</name>
      <url>http://srvmmaven.mycompany.com:8081/artifactory/repo</url>
    </pluginRepository>
    <pluginRepository>
      <snapshots />
      <id>snapshots</id>
      <name>repo</name>
      <url>http://srvmmaven.mycompany.com:8081/artifactory/repo</url>
    </pluginRepository>
  </pluginRepositories>
  <id>artifactory</id>
</profile> 
```

```
<activeProfiles>
 <activeProfile>artifactory</activeProfile>
</activeProfiles> 
```

当我尝试创建一个新项目时，Eclipse 在尝试加载 Nexus 目录时崩溃。

这是堆栈跟踪：

```
!ENTRY org.eclipse.core.jobs 4 2 2013-03-27 10:16:19.803
!MESSAGE An internal error occurred during: "Retrieving archetypes:".
!STACK 0
java.lang.OutOfMemoryError: GC overhead limit exceeded
at java.util.Arrays.copyOfRange(Unknown Source)
at java.lang.String.<init>(Unknown Source)
at org.apache.lucene.index.TermBuffer.toTerm(TermBuffer.java:122)
at org.apache.lucene.index.SegmentTermEnum.term(SegmentTermEnum.java:167)
at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:251)
at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:218)
at org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:55)
at org.apache.lucene.index.MultiSegmentReader$MultiTermDocs.termDocs(MultiSegmentReader.java:608)
at org.apache.lucene.index.MultiSegmentReader$MultiTermDocs.next(MultiSegmentReader.java:559)
at org.apache.lucene.search.FieldCacheImpl$10.createValue(FieldCacheImpl.java:384)
at org.apache.lucene.search.FieldCacheImpl$Cache.get(FieldCacheImpl.java:71)
at org.apache.lucene.search.FieldCacheImpl.getStringIndex(FieldCacheImpl.java:351)
at org.apache.lucene.search.FieldSortedHitQueue.comparatorString(FieldSortedHitQueue.java:415)
at org.apache.lucene.search.FieldSortedHitQueue$1.createValue(FieldSortedHitQueue.java:206)
at org.apache.lucene.search.FieldCacheImpl$Cache.get(FieldCacheImpl.java:71)
at org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSortedHitQueue.java:167)
at org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQueue.java:55)
at org.apache.lucene.search.TopFieldDocCollector.<init>(TopFieldDocCollector.java:43)
at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:121)
at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:113)
at org.apache.lucene.search.Hits.<init>(Hits.java:90)
at org.apache.lucene.search.Searcher.search(Searcher.java:61)
at org.apache.maven.index.DefaultSearchEngine.searchFlat(DefaultSearchEngine.java:191)
at org.apache.maven.index.DefaultSearchEngine.searchFlatPaged(DefaultSearchEngine.java:111)
at org.apache.maven.index.DefaultSearchEngine.searchFlatPaged(DefaultSearchEngine.java:89)
at org.apache.maven.index.DefaultNexusIndexer.searchFlat(DefaultNexusIndexer.java:404)
at org.apache.maven.index.archetype.NexusArchetypeDataSource.getArchetypeCatalog(NexusArchetypeDataSource.java:67)
at org.eclipse.m2e.core.internal.archetype.ArchetypeCatalogFactory$NexusIndexerCatalogFactory.getArchetypeCatalog(ArchetypeCatalogFactory.java:87)
at org.eclipse.m2e.core.ui.internal.wizards.MavenProjectWizardArchetypePage.getArchetypesForCatalog(MavenProjectWizardArchetypePage.java:519)
at org.eclipse.m2e.core.ui.internal.wizards.MavenProjectWizardArchetypePage$15.run(MavenProjectWizardArchetypePage.java:557)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

如果我从命令行使用 Maven 创建一个新项目，一切正常。

我正在使用 Eclipse Indigo SR2 和 m2Eclipse 插件版本 1.3.1.20130219-1424

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-26T13:09:43.020

为了保持问答的顺序，我将复制@charlee-chitsuk 的答案：

因为它向我们展示了`java.lang.OutOfMemoryError: GC overhead limit exceeded`. 您可以尝试通过增加wiki.eclipse.org/Eclipse.ini 中提到的`Xmx`和来设置 Eclipse VM Arguments。`Xms`

# php - 上传路径似乎无效

> ID：15655891
> 
> 赞同：1
> 
> 时间：2013-03-27T09:51:48.717
> 
> 标签：php, codeigniter

我使用来自 CI 的确切代码

[https://www.codeigniter.com/user_guide/libraries/file_uploading.html](https://www.codeigniter.com/user_guide/libraries/file_uploading.html)

但它总是不断给我同样的错误

上传路径似乎无效。

文件夹在那里，路径没问题。文件夹有写权限。

控制器代码是这个

```
<?php

  class Upload extends CI_Controller {

function __construct()
{
    parent::__construct();
    $this->load->helper(array('form', 'url'));

}

function index()
{
    $this->load->view('upload_form', array('error' => ' ' ));
}

function do_upload()
{

    $config['upload_path'] = '/uploads/';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size'] = '100';
    $config['max_width']  = '1024';
    $config['max_height']  = '768';
    print_r($config);

    $this->load->library('upload', $config);
    $this->upload->initialize($config);

    if ( ! $this->upload->do_upload())
    {
        $error = array('error' => $this->upload->display_errors());
        //echo 'path : '.$config['upload_path'];

        $this->load->view('upload_form', $error);
    }
    else
    {
        $data = array('upload_data' => $this->upload->data());

        $this->load->view('upload_success', $data);
    }
    //echo "submited";
}
 }?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:28:29.763

我找出问题所在。我在控制器文件夹中创建文件夹。上传文件夹应在安装 Codeignator 的根文件夹中创建。在我的情况下，CI 安装在此路径

本地主机/CI/

所以我创建了名为 upload 的文件夹，它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:03:21.023

只需在应用程序文件夹目录中创建一个具有名称`'uploads'`的文件夹。并更改您在控制器中上传路径编码行，如下所示。

```
$config['upload_path'] = './uploads/'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-16T15:01:16.360

您的问题在下一行。

```
 $this->load->library('upload', $config);
 $this->upload->initialize($config); 
```

而不是这样做

```
 $this->upload->initialize($config); 
```

并从自动加载加载上传库。

# ruby-on-rails-3.2 - Rails：如果字段为空，则阻止提交表单

> ID：15655892
> 
> 赞同：0
> 
> 时间：2013-03-27T09:51:49.130
> 
> 标签：ruby-on-rails-3.2, validation, paperclip, nested-attributes, paperclip-validation

我正在创建产品页面，用户可以在其中上传多张产品照片。为了创建和编辑产品，我正在渲染一个表单文件。对于上传照片，我使用了nested_fields 以产品形式的照片。表单中的照片代码如下所示：

```
<%= f.fields_for :photos do |photo| %>
   <%= image_tag photo.object.avatar.url(:thumb), unless f.object.new_record? or photo.object.new_record? %>
   <%= photo.file_field :avatar, :style => "none" %>
   <%= photo.link_to_remove "Remove"%>
<% end %>
<%= f.link_to_add 'Add Photos', :photos, "data-association-insertion-node"=> ".photos",   "data-association-insertion-position" => "append", "data-type" => "link"%> 
```

在产品模型中，

```
has_many :photos, :as => :attachable, :dependent => :destroy
accepts_nested_attributes_for :photos, :allow_destroy => true 
```

当用户创建产品时，我使用了验证照片的存在。因此，用户必须上传照片。这件作品工作正常。

在照片模型中：

```
validate :validates_account_avatar 
```

但问题在于编辑。用户可以删除所有照片。在这里，我想阻止用户删除所有照片。

如何在提交编辑后的产品时通知用户照片字段不能为空或至少应存在一张照片。

我试着用这个：

```
accepts_nested_attributes_for :photos, :allow_destroy => true, :reject_if => lambda { |a| a[:avatar].blank? } 
```

但没有用。

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:12:49.927

使用 jquery 验证插件。

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

# jquery - 加载远程内容后无法关闭 div - Jquery

> ID：15655893
> 
> 赞同：0
> 
> 时间：2013-03-27T09:51:51.547
> 
> 标签：jquery

最后 5 行我想折叠第一次单击外部文件时填充内容的 div。

我尝试了许多没有运气的事件：

```
 $(document).ready(function () {
        $("li.span3 a").click(function (e) {
            e.preventDefault();   
            jQuery('html, body').animate({ scrollTop: jQuery('.content').offset().top -100 }, 'fast');
            $('.content').load(this.href).delay(2000);
        });
        $("li.span3 a").click(function(){
            $('.content').unload();
            $('.content').addclass().css('height', '0px');
        });
    }); 
```

内容位于目标页面上的空 div 中，用于加载内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:03:26.320

也许这对你有用？

```
var $content = $('.content');

$(".span3").on('click', 'a', function (e) {
    e.preventDefault();

    if($content.hasClass('loaded') {
        $content.hide().removeClass('loaded');
    } else {
        $('html, body').animate({ scrollTop: $content.offset().top -100 }, 'fast');
        $content.load(this.href).show().addClass('loaded');
    }
}); 
```

# jquery - HandleBar 模板 & jQuery mobile & 动态列表视图

> ID：15655896
> 
> 赞同：2
> 
> 时间：2013-03-27T09:51:55.947
> 
> 标签：jquery, json, cordova, jquery-mobile, handlebars.js

我正在为这个项目使用 jQuery、jQuery Mobile、Handlebar

我有一个课程页面如下。

![在此处输入图像描述](../Images/b2cd88735c32869d8c687aca06e2292a.png)

当我单击一门课程时，它会显示如下页面，其中包含课程的特定课程。

![在此处输入图像描述](../Images/5aa10737a2589528de6f96a6bb27149b.png)

以上课程取自我为此使用 Handlebar 的 JSON。下面是把手模板。

```
<script id="lessontemplate" type="text/x-handlebars-template">
    {{#each this}}
        <li><a href="{{lesson}}">{{lessonname}}</a></li>
    {{/each}}
</script> 
```

下面是替换模板的JS代码

```
("#mycourses").on('click','.mycourse',function(e){

            e.preventDefault();
            var url = domainURL+'coursedata.php?callback=?';    
            $.getJSON( url, { courseid: $(this).data('courseid') }, function( data ) {

            var tmpl = $('#lessontemplate').html();
            console.log(tmpl);
            $('h1.coursename').html(data.coursename);
            lessontemplate = Handlebars.compile( tmpl );
            console.log(    lessontemplate(data.coursedetails) );
            $('ul#lessons').html( lessontemplate(data.coursedetails) );
            $.mobile.changePage("#coursedetails", {transition: 'slide'}); 

            });

        }); 
```

然后，如果我转到课程页面并单击课程，则课程显示不正确。它显示了以下输出。

![在此处输入图像描述](../Images/55ab891119849b7530070c2bb080d93e.png)

第一次单击 Console.log() 输出如下

```
 {{#each this}}
        <li><a href="{{lesson}}">{{lessonname}}</a></li>
    {{/each}}

        <li><a href="1">Lesson Name 1</a></li>

        <li><a href="2">Lesson Name 2</a></li>

        <li><a href="3">Lesson Name 3</a></li> 
```

第二次单击 Console.log() 输出如下

```
 {{#each this}}
        <li><a href="{{lesson}}">{{lessonname}}</a></li>
    {{/each}}

        <li><a href="1">Lesson Name 1</a></li>

        <li><a href="2">Lesson Name 2</a></li>

        <li><a href="3">Lesson Name 3</a></li> 
```

第一次单击 Console.log() = 第二次单击 Console.log() 但为什么我第二次没有得到正确的输出？为什么没有正确显示第二次课程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:09:07.317

@Gajotres - 感谢您为我指出正确的方向。

你要做的是

```
if ( $('ul#lessons').hasClass('ui-listview')) 
{
 $('ul#lessons').listview('refresh');
} 
else {
 $('ul#lessons').trigger('create');
} 
```

取自文档。

> 如果将项目添加到列表视图，则需要对其调用 refresh() 方法来更新样式并创建添加的任何嵌套列表。例如：
> 
> $('#mylist').listview('refresh');
> 
> 请注意，refresh() 方法仅影响附加到列表的新节点。这样做是出于性能原因。刷新过程将忽略任何已增强的列表项。这意味着如果您更改已经增强的列表项的内容或属性，这些将不会被反映。如果要更新列表项，请在调用刷新之前将其替换为新标记。

# 更新

[Gajotres 回答了一些其他类似的问题](https://stackoverflow.com/questions/14550396/jquery-mobile-markup-enhancement-of-dynamically-added-content/14550417#14550417)

# eclipse - Eclipse SSH 密钥生成 - 密钥强度

> ID：15655899
> 
> 赞同：4
> 
> 时间：2013-03-27T09:52:15.127
> 
> 标签：eclipse, ssh, rsa

Eclipse SSH 密钥生成屏幕（常规 -> 网络连接 -> SSH2）生成一个 1024 位 RSA 密钥，该密钥太弱而无法使用（[http://news.netcraft.com/archives/2012/09/10/minimum -rsa-public-key-lengths-guidelines-or-rules.html](http://news.netcraft.com/archives/2012/09/10/minimum-rsa-public-key-lengths-guidelines-or-rules.html) )

有没有办法将其增加到 2048 或 4096 位？我知道我可以使用`ssh-keygen`或 puttygen，但我试图让其他开发人员保持简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:03:00.333

我已经向 Eclipse 团队提出了一个错误：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=404714](https://bugs.eclipse.org/bugs/show_bug.cgi?id=404714)

# windows - 当程序被命令行中的 Edit>Mark 暂停时，到底会发生什么？

> ID：15655903
> 
> 赞同：3
> 
> 时间：2013-03-27T09:52:18.433
> 
> 标签：windows, multithreading, jvm, cmd

在 Windows 中从命令行运行程序时，如果进入标记模式，则程序输出会暂停，让您有足够的时间复制您需要的任何内容，然后继续执行程序。

我一直认为这只是暂停了输出流，无论如何程序都会继续落后。但是，我发现它似乎也“暂停”了程序（或者至少阻止它通过套接字进行通信）。

我的问题是：这种“暂停”实际上意味着什么？哪些线程被挂起？子进程是否暂停（我猜不是）？例如，如果运行 Java 代码，是整个 JVM 暂停，还是只是主线程？Windows实际上是如何处理这个问题的？

如果这可能是一个开放式的问题，我深表歉意，但是打开快速编辑模式后，我想知道关键程序有什么风险！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T21:17:55.280

在控制台窗口中选择文本将阻塞标准输出管道。这意味着当一个线程尝试写入标准输出时，它也会阻塞，直到管道中的所有数据都被读取并且一切都重新开始移动。

这不会*阻塞*任何其他线程或子进程。

您可以使用[GetConsoleSelectionInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683173%28v=vs.85%29.aspx)来查看用户是否选择了文本，并可能警告他们或采取其他措施。

# c++ - 警告：函数返回与 C 不兼容的用户定义类型

> ID：15655912
> 
> 赞同：4
> 
> 时间：2013-03-27T09:52:49.093
> 
> 标签：c++, xcode, llvm

标题：

```
using namespace std;
extern "C" {
  string testFunc();
} 
```

.cpp：

```
string testFunc()
{
  return string("test");
} 
```

我在构建时收到此警告：

```
'testFunc' has C-linkage specified, but returns user-defined type 'string' (aka 'basic_string<char>') which is incompatible with C 
```

我已经测试了我的功能，并且“测试”已正确返回。

此警告会导致任何问题吗？

我在 XCode 4.6 中使用 Apple LLVM 4.2、C99、所有默认设置。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T09:55:37.243

大概您正在包装 in 的声明，`testFunc`因为`extern "C"`您希望能够从 C 程序中调用它。但是，当 C 程序调用此函数时，他们会得到一个`std::string`返回，这与 C 完全不兼容。程序将无法管理它。

要么`testFunc`不应该在里面，要么应该`extern "C"`以 C 风格的方式返回字符串（可能作为 a `const char*`）。

对于与 C 兼容的类类型，它应该是*标准布局类*（在 C++11 术语中）。

> 标准布局类是这样的类：
> 
> *   没有非标准布局类（或此类类型的数组）或引用类型的非静态数据成员，
> *   没有虚函数 (10.3) 和虚基类 (10.1)，
> *   对所有非静态数据成员具有相同的访问控制（第 11 条），
> *   没有非标准布局的基类，
> *   要么在派生最多的类中没有非静态数据成员，并且最多有一个具有非静态数据成员的基类，要么没有具有非静态数据成员的基类，并且
> *   没有与第一个非静态数据成员相同类型的基类。

它的名称也不应该被弄乱，当类型在命名空间中或它是模板类型时会发生这种情况。

# php - 多台电脑使用相同的IP地址

> ID：15655913
> 
> 赞同：2
> 
> 时间：2013-03-27T09:52:50.693
> 
> 标签：php, ip-address

我尝试使用 php 代码获取用户的 IP 地址：

```
$_SERVER["REMOTE_ADDR"]; 
```

当我检查与同一网络关联的计算机时，它为所有计算机提供了相同的 IP 地址......为什么会这样。我期待不同的IP地址。如何使用 php 获取不同的 IP 地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:55:46.193

IPV4 IP 地址数量有限。因此，大多数不运行面向公众的服务器的人都使用[网络地址转换](http://en.wikipedia.org/wiki/NAT)。

这将涉及他们使用 LAN 上的计算机（在[私有地址空间](http://en.wikipedia.org/wiki/Private_network)中具有 IP，例如 192.168.1.2）和具有 LAN IP 地址和 Internet IP 地址的路由器，用于中继它们与 Internet 上的服务器之间的流量。

互联网上的服务器只会看到路由器的面向互联网的 IP 地址。

要查看私有 IP 地址，您必须在 LAN 边界内运行软件。理论上，如果您可以说服用户运行允许签名的 Java 小程序执行，您就可以获取该地址，但即便如此，如果使用多个 IP，您也可能会遇到问题。（例如，我目前有一个环回 IP、一个以太网 IP、一个 Wi-Fi IP，并且正在运行两个虚拟机，我的工作站有几个 IP 供它们连接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:54:30.920

您的服务器有一个 ip，本地网络有一个外部 ip（这就是您所看到的）。该网络上的所有计算机都有自己的内部 IP。

当计算机连接到您的服务器时，它会通过路由器/交换机的 ip 进行连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T09:55:21.420

当您在同一个 LAN 中时，如果您的路由器使用 NAT（大多数都使用 NAT），您将拥有相同的 IPv4 地址。你对此无能为力，这就是它的工作方式。请注意，如果有人使用 IPv6，大多数情况下每台计算机都有自己唯一的 IP 地址。

一点额外的说明：您的路由器正在跟踪传出连接，从而确保每个数据包都到达正确的来源（内部计算机）。也没有办法跟踪它，所以你真的必须处理它。但还要注意，使用“普通 IP 地址”和您正在使用的代码，它是非常独特的。也许网络中的某些用户具有相同的 IP 地址，但它是该特定网络的唯一标识符。另请注意，人们可以拥有动态 IPv4 地址，这意味着 IP 地址经常更改。“静态”IP 地址是留在网络中的地址。这是 ISP 控制的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T22:36:06.680

您的机器可能位于网络代理服务器后面。

在这种情况下，您的 Web 服务器位于本地网络之外。它只能从服务器变量中看到代理服务器 IP 地址。

# api - 没有从 API 调用中获取 xml

> ID：15655914
> 
> 赞同：0
> 
> 时间：2013-03-27T09:52:52.443
> 
> 标签：api, jquery, twitpic

我想调用 API 并以 XML 格式获取结果我当前的代码如下。当我直接提供 XML 文件时，我的代码按预期运行，但是当我提到 API url 以获取相同的 xml 时，没有错误，但没有调用 API。

我想使用 AJAX 来实现，我当前的代码如下：

```
<script type="text/javascript">
var searchq = $("#txtTag").val();
var twitpicURL = 'http://twitpic.com/show/thumb/';
$(document).ready(function () {
    $("#btnGetData").click(function () {
        $.ajax({
            type: "GET",
            /* define url of xml file to parse */
            //url: "show.xml",
            url: "http://api.twitpic.com/2/tags/show.xml?tag=" + searchq,
            dataType: "xml",
            success: parseXml
        });
    });

    function parseXml(xml)
    /* this is where the xml file is parsed and converted into a HTML output */
    {
        alert(xml);
        //for each item node in the xml file
        var html = '';
        $(xml).find("image").each(function () {
            var imageId = $(this).find("short_id").text();
            var imagesrc = twitpicURL + imageId;

            html += '<tr class="menu_item">';
            html += '<td class="h-menu">' + "<img src='" + imagesrc + "'/>" + '</td>';
            html += '<td class="h-menu">';
            html += '<div>' + $(this).find("id").text() + '</div>';
            html += '<div>' + $(this).find("short_id").text() + '</div>';
            html += '<div>' + $(this).find("type").text() + '</div>';
            html += '<div>' + $(this).find("timestamp").text() + '</div>';
            html += '<div>' + $(this).find("message").text() + '</div>';
            html += '</td>';
            html += '</tr>';

        });
        $('#tblTwitpic').append($(html));
        //end for each 
        //end function
    }
    //$("#tweets").append("</table>");
}); 
```

我的 HTML 如下所示：

```
<body>
<input id="btnGetData" type="button" value="Twitter Get Tweets" />
<input type="text" id="txtTag" />
<div id="tweets">
<table id="tblTwitpic" border='1'></table>
</div> 
```

我没有收到任何错误，但没有调用此 API。

提前致谢; 阿布舍克·A·夏尔马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:10:59.680

```
url: "http://api.twitpic.com/2/tags/show.xml?tag=" + searchq, 
```

只是将输出从 .xml 更改为 jsonp。我仍然不知道为什么这不解析 xml oject。

# correlation - LoadRunner EXTRARES 相关性

> ID：15655915
> 
> 赞同：0
> 
> 时间：2013-03-27T09:52:55.693
> 
> 标签：correlation, loadrunner

我想将我以前的请求部分中的值关联起来，以便在即将到来的请求中用作普通 URL。

首先我有这个：

```
web_url("considertakingadump", 

            "URL=http://mydevserver.test.local:8080/choice/toscana/{choiceId}/considertakingadump", 

            "TargetFrame=", 

            "Resource=0", 

            "RecContentType=text/html", 

            "Referer=http://mydevserver.test.local:8080/choice/toscana/{choiceId}/klargjore?3", 

            "Snapshot=t79.inf", 

            "Mode=HTML", 

            EXTRARES, 

            "Url=/choice/css/images/icon_ikke_ok.png", "Referer=http://mydevserver.test.local:8080/choice/toscana/{choiceId}/considertakingadump?5", ENDITEM, 

            "Url=/choice/css/images/navigasjon/Navigation_top_2_considertakingadump.png", "Referer=http://mydevserver.test.local:8080/choice/toscana/{choiceId}/considertakingadump?5", ENDITEM, 

            "Url=/choice/css/images/icon_ok.png", "Referer=http://mydevserver.test.local:8080/choice/toscana/{choiceId}/considertakingadump?5", ENDITEM, 

            LAST); 
```

然后我有这个：

```
 web_url("Next", 

            "URL=http://mydevserver.test.local:8080/choice/toscana/{choiceId}/considertakingadump?5-1.ILinkListener-next", 

            "TargetFrame=", 

            "Resource=0", 

            "RecContentType=text/html", 

            "Referer=http://mydevserver.test.local:8080/choice/toscana/{choiceId}/considertakingadump?5", 

            "Snapshot=t80.inf", 

            "Mode=HTML", 

            EXTRARES, 

            "Url=/choice/css/images/navigasjon/Navigation_top_2_considertakingadump.png", "Referer=http://mydevserver.test.local:8080/choice/toscana/{choiceId}/forslagchoice?6", ENDITEM, 

            LAST); 
```

上面的 Considertakingadump?5 中的数字 5（在 web_url("Next") 的 URL 部分中是我想用第一个请求的值替换的值（在 web_url("considertakingadump") 的 EXTRARES 部分中））。

如何关联要在定价请求中使用的请求的 EXTRARES 部分中的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:05:04.203

当您使用`web_reg_save_param()`or`web_reg_save_param_ex()`函数时，它们适用于您从 a 收到的所有响应`web_url()`。

因此，只需在 the`web_reg_save_*`之前添加调用`web_url()`，您应该会很好。

*请注意，保存的内容是第一个找到的匹配项，因此如果您在不同的响应中有 2 个或更多匹配项，您需要启用“Ord=All”选项并将它们全部获取。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:18:53.820

您不能为后续请求获取动态数据元素并将其应用于已经发生的请求。您可以做的是将这一请求分解为 URL 模式请求。例如，为两个不同的名称保存脚本文件两次。在 URL 模式下重新生成两者之一。将一个请求和所有 URL/EXTRARES 引用替换为来自 URL 模式生成的适当数量的请求。

然后关联您需要的动态数据元素的第一个实例。如果您无法与服务器数据流相关联，那么请考虑该值可能来自 JavaScript 中的一段客户端代码。找到有问题的 JavaScript 算法，然后将您的 JavaScript 转换为适合您的虚拟用户的语言函数，或者将您的虚拟用户类型转换为 TruClient/GUI/Citrix/RDP

# javascript - 在 .load() 页面之后执行 javascript

> ID：15655923
> 
> 赞同：2
> 
> 时间：2013-03-27T09:53:26.190
> 
> 标签：javascript, jquery, eval

我有从外部 *.php 文件加载 div 内容的页面。一切都很完美，但是当我想在加载的页面上使用缩放插件时，它不起作用。

我的页面结构：

```
<div id="wrapper">
<img id="zoom" src="example.jpg"/> /**zoom plugin works here**/
  <a href="external_content">button which onclick load external content</a>
  <div id="external_content">
     <p>a lot of text here</p>
     <img id="zoom2" src="example2.jpg"/> /**zoom plugin doesn't work here**/
  </div>
</div> 
```

我怀疑问题是页面加载后脚本没有执行。我在这个网站上阅读了很多例子，但没有一个对我没有帮助

这是我的 .html 文件

```
 <html>
     <head>
        <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
        <script type="text/javascript" src="js/ajax.js"></script>
        <script type="text/javascript" src="http://www.dynamicdrive.com/dynamicindex4/ddpowerzoomer.js"></script>
        <script type="text/javascript">
         jQuery(document).ready(function($){
           $('#zoom').addpowerzoom();
           $('#zoom2').addpowerzoom();
         });
        </script> 
     <head>
    </html> 
```

加载外部内容的主脚本在这里

```
jQuery.noConflict()
jQuery(document).ready(function() {
    var hash = window.location.hash.substr(1);
    var href = jQuery('#nav li a').each(function(){
            var href = jQuery(this).attr('href');
        if(hash==href.substr(0,href.length-4)){

            var toLoad = hash+'.html #content_low'+divId;
            jQuery('#content'+divId).load(toLoad);
        }                                           
    });

    jQuery('#nav li a').click(function(){
        divId = jQuery(this).parents('li').attr('id');
        var toLoad = jQuery(this).attr('href')+' #content_low'+divId;

        jQuery('#content'+divId).slideUp(500,loadContent);

        function loadContent() {
            jQuery('#content'+divId).load(toLoad,showNewContent)
        }
        function showNewContent() {
            jQuery('#content'+divId).delay(200).slideDown(800);

            jQuery("#urun_ac").fadeOut(100);

        }
        return false;

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:55:23.613

您必须在回调函数中再次调用缩放函数：

```
function showNewContent() {
    jQuery('#content'+divId).delay(200).slideDown(800);

    jQuery("#urun_ac").fadeOut(100);

    $('#zoom').addpowerzoom();
    $('#zoom2').addpowerzoom();

} 
```

# java - maven 程序集，如何指定我要打包在我的 jar 中的类

> ID：15655924
> 
> 赞同：-3
> 
> 时间：2013-03-27T09:53:29.260
> 
> 标签：java, apache, maven, maven-assembly-plugin

我需要使用插件 maven 程序集将我的应用程序的一个类包装在一个 jar 中。当我使用 maven 时，插件程序集将我的包中的所有类打包在目标 jar 中。如何指定我想要打包在我的 jar 中的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:32:48.573

你必须使用maven程序集插件吗？如果要生成 jar 文件，可以改用[maven jar 插件](http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html)。

它会是这样的：

```
<project>
  ...
  <build>
    <plugins>
      ...
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.4</version>
        <configuration>
          <includes>
            <include>com/company/project/package/SomeClass.class</include>
            <include>com/company/project/anotherpackage/AnotherClass.class</include>
          </includes>
        </configuration>
      </plugin>
      ...
    </plugins>
  </build>
  ...
</project> 
```

该插件可以在普通执行中`mvn package`执行。

# c# - wpf 使用样式中声明的元素

> ID：15655925
> 
> 赞同：0
> 
> 时间：2013-03-27T09:53:31.220
> 
> 标签：c#, wpf, styles, wpf-controls

我在我的表单中加入样式和代码时遇到了麻烦：

这是我的情况：

我的 TabItem 样式：

```
 <Style TargetType="TabItem" x:Key="testStyle">
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="6,2,6,2" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="VerticalContentAlignment" Value="Stretch" />
        <Setter Property="MinWidth" Value="5" />
        <Setter Property="MinHeight" Value="5" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TabItem">
                    <DockPanel Width="120" x:Name="rootPanel">
                        <ContentPresenter ContentSource="Header"  RecognizesAccessKey="True" />
                        <Image x:Name="rootImage"/>
                        <Label x:Name="rootLabel" FontSize="18" />
                    </DockPanel>
                    <ControlTemplate.Triggers> 
```

这是我应用我的风格的地方

```
 <TabItem Style="{StaticResource testStyle}">
                <TabItem.Header>

                </TabItem.Header> 
```

但是：如何将值设置为名为`rootImage`and的图像和标签`rootLabel`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:55:32.010

就像您为 your 所做的那样`TabItem`，您可以为您的`Image`和指定样式`Label`-

```
<Image x:Name="rootImage" Style="{StaticResource ImageStyle}"/>
<Label x:Name="rootLabel" FontSize="18" Style="{StaticResource LabelStyle}" /> 
```

如果您想更改`Header`外观，则需要覆盖`HeaderTemplate`而不是全部`Template`-

```
 <TabItem.HeaderTemplate>
            <DataTemplate>
                <StackPanel>
                    <Image x:Name="rootImage"
                           Style="{StaticResource ImageStyle}"/>
                    <Label x:Name="rootLabel" FontSize="18"
                           Style="{StaticResource LabelStyle}"/>
                </StackPanel>
            </DataTemplate>
        </TabItem.HeaderTemplate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:06:56.923

我假设你有一个名为`SomeClass`

```
public class SomeClass
{
    public string SomeLabel;
    public string SomeImage;
} 
```

现在改变你的风格

```
<DockPanel Width="120" x:Name="rootPanel">
    <ContentPresenter ContentSource="Header"  RecognizesAccessKey="True" />
    <Image x:Name="rootImage" Source={Binding SomeImage}/>
    <Label x:Name="rootLabel" Content={Binding SomeLabel} FontSize="18" />
</DockPanel> 
```

最后：

```
<TabItem Style="{StaticResource testStyle}" Name="myTabItem">
    <TabItem.Header>

    </TabItem.Header>
</TabItem> 
```

在后面的代码中：

```
myTabItem.DataContext = new SomeClass(); //create a SomeClass with proper label and image 
```

# android - 异步任务和肥皂 Android

> ID：15655935
> 
> 赞同：-1
> 
> 时间：2013-03-27T09:54:24.353
> 
> 标签：android

我需要使用 android 后台服务从下面的 xml 中获取 mango 和 orange 的值。

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">

<soap:Body><wsFruitResponse xmlns="http://www.orange.ws/fruitspec/ws">

<mango>wow</mango>

<orange>boom</orange>

</wsFruitResponse>

</soap:Body>

</soap:Envelope> 
```

然后它应该存储在一个数组列表中。我怎样才能做到这一点。我习惯于常规的 sax 解析器，但这个肥皂的东西看起来很奇怪。请帮忙

类 loadingTask 扩展 AsyncTask {

```
 protected String doInBackground(String... urls) {

        ...
        sh.parseContent("");
        return "";

    }

    protected void onPostExecute(String s) {

        ShowProgress.dismiss();

    }
}

class SAXHelper {
    public HashMap<String, String> userList = new HashMap<String, String>();
    private URL url2;

    public SAXHelper(String url1) throws MalformedURLException {
        this.url2 = new URL(url1);
    }

    public RSSHandler parseContent(String parseContent) {
        RSSHandler df = new RSSHandler();
        try {

            ....
            xr.setContentHandler(df);
            xr.parse(new InputSource(url2.openStream()));
        } catch (Exception e) {
            e.printStackTrace();
        }
        return df;
    }
}

class RSSHandler extends DefaultHandler {

    private Post currentPost = new Post();

    StringBuffer chars = new StringBuffer();

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes atts) {

        chars = new StringBuffer();
        if (localName.equalsIgnoreCase("item")) {

        }
    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        if (localName.equalsIgnoreCase("orange")
                && currentPost.getOrange() == null) {
            currentPost.setOrange(chars.toString());

        }
        if (localName.equalsIgnoreCase("mango")
                && currentPost.getMango() == null) {
            currentPost.setMango(chars.toString());

        }

        if (localName.equalsIgnoreCase("item")) {
            PostList.add(currentPost);
            currentPost = new Post();
        }

    }

    @Override
    public void characters(char ch[], int start, int length) {
        chars.append(new String(ch, start, length));
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:47:03.217

**注意：**这是使用 Jsoup。[下载 Jsoup](http://jsoup.org/packages/jsoup-1.7.2.jar)，将其粘贴到您的项目 libs 文件夹中。

你可以尝试这样的事情：

```
URL form = new URL(Your_url_String);
HttpURLConnection connection1 = (HttpURLConnection)form.openConnection();
connection1.setRequestProperty("Cookie", your_cookie);//if you have no cookie, you can skip this line

connection1.setReadTimeout(10000);
StringBuilder whole = new StringBuilder();

BufferedReader in = new BufferedReader(
        new InputStreamReader(new BufferedInputStream(connection1.getInputStream())));
String inputLine;
while ((inputLine = in.readLine()) != null)
     whole.append(inputLine);
     in.close();
Document doc = Jsoup.parse(whole.toString());
Element element1 = doc.select("mango");
Element element2 = doc.select("orange");

String value_of_mango = element1.text();
String value_of_orange = element2.text(); 
```

**更新：**

你可以为你的肥皂做：记住，你必须输入`soap`为字符串。

```
String html = "<html><head><title>First parse</title></head>"
  + "<body><p>Parsed HTML into a doc.</p></body></html>";

Document doc = Jsoup.parse(html);

Element element1 = doc.select("mango");
Element element2 = doc.select("orange");

String value_of_mango = element1.text();
String value_of_orange = element2.text(); 
```

# gradle - Gradle：如何让上传任务进行最新检查？

> ID：15655938
> 
> 赞同：2
> 
> 时间：2013-03-27T09:54:28.387
> 
> 标签：gradle

我正在尝试一些相当简单的事情：没有为相同的版本号再次执行上传任务。我

```
uploadArchives {
    inputs.file file("version.txt")
    repositories.mavenDeployer {
        // ...
    }
} 
```

version.txt 包含：

```
1.0.2 
```

但是，当我在不更改版本的情况下执行两次任务时，该任务不会显示为 UP-TO-DATE。我还尝试将属性声明为输入，效果相同。我可能遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:45:29.503

`Upload`任务类型不声明任何输出，在这种情况下，Gradle 会安全并假定输出已过期。尝试这个：

```
uploadArchives.outputs.upToDateWhen { true } 
```

现在`uploadArchives`任务应该是最新的，除非版本文件或要上传的档案内容发生了变化（与之前在同一台机器上执行任务相比）。归档内容由`Upload`任务类型声明为输入。

请注意，这不会阻止用户/构建 A 上传与用户/构建 B 上传的相同版本。为此，您必须在`outputs.upToDateWhen {}`.

另一种选择是在存储库端强制执行“不覆盖”规则。

# iphone - 图像以相反的顺序显示并缩小到一半大小 cocos2d

> ID：15655939
> 
> 赞同：0
> 
> 时间：2013-03-27T09:54:29.497
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

我正在使用opengl调用在cocos2d中绘制图像，但图像以相反的顺序显示并按比例缩小，图像的原始尺寸为320 * 480。我以前遇到过同样的问题，我曾经在 cocos2d api v1 的 ccConfig 文件中将 CC_TEXTURE_NPOT_SUPPORT 的值从 0 更改为 1，然后它正确显示图像现在我在这里创建新的 cocos2d 项目我面临同样的问题，我遵循了我使用的程序以前但静止图像显示相反的顺序只有我不知道出了什么问题......

输出截图

![输出图像](../Images/be8880fb3e7b552764e54d1fa53d002e.png)

这是我的代码......

init 方法中的代码

```
 if( (self=[super init])) {
[CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];
if (originalImage!=nil) {
    originalImage=nil;
}
self.originalImage=[Utilities scaleAndRotateImage:[UIImage imageNamed:@"2.jpg"]];

texture2D = [[CCTexture2D alloc] initWithImage:originalImage];
NSLog(@"Width %f Height %f",texture2D.contentSize.width,texture2D.contentSize.height);
[self body_init];
self.isTouchEnabled = YES; 
```

/* 绘制下一帧动画。*/

```
- (void)body_redraw {
int k;
int i, j;
if(mass == NULL) {
NSLog(@"mass is null");
return;
}
glBindTexture(GL_TEXTURE_2D, [texture2D name]);

k = 0;
for (i = 0; i < GRID_SIZE_X - 1; i++)
{
for (j = 0; j < GRID_SIZE_Y - 1; j++)
{
    GLfloat vertices[]= {
        mass[k].x[0],mass[k].x[1],mass[k].x[2],
        mass[k + 1].x[0],mass[k + 1].x[1],mass[k + 1].x[2],
        mass[k + GRID_SIZE_Y + 1].x[0],mass[k + GRID_SIZE_Y + 1].x[1],
             mass[k + GRID_SIZE_Y + 1].x[2],
        mass[k + GRID_SIZE_Y].x[0],mass[k + GRID_SIZE_Y].x[1],
         mass[k + GRID_SIZE_Y].x[2]
    };
    GLfloat tex[]={
        mass[k].t[0], mass[k].t[1],
        mass[k + 1].t[0], mass[k + 1].t[1],
        mass[k + GRID_SIZE_Y + 1].t[0], mass[k + GRID_SIZE_Y + 1].t[1],
        mass[k + GRID_SIZE_Y].t[0], mass[k + GRID_SIZE_Y].t[1]
    };

    glVertexPointer(3, GL_FLOAT, 0, vertices);
    glTexCoordPointer(2, GL_FLOAT, 0, tex);
    glDrawArrays(GL_TRIANGLE_FAN, 0,4);

    k++;
 }
  k++;
}
}

- (void)body_init {

 GLint width = texture2D.contentSizeInPixels.width;
 GLint height = texture2D.contentSizeInPixels.height;
 int i, j;
 int k;

 if (mass == NULL)
{
mass = (MASS *) malloc(sizeof(MASS)*GRID_SIZE_X*GRID_SIZE_Y);
if (mass == NULL)
{
    fprintf(stderr, "body: Can't allocate memory.\n");
    exit(-1);
}
}

k = 0;
for (i = 0; i < GRID_SIZE_X; i++)
for (j = 0; j < GRID_SIZE_Y; j++)
{
    //this code implements grid on texture2D, gets vertex & side vertex in array
    mass[k].nail = (i == 0 || j == 0 || i == GRID_SIZE_X - 1
                    || j == GRID_SIZE_Y - 1);//value is 0/1

    mass[k].x[0] = i/(GRID_SIZE_X - 1.0)*width;
    //            NSLog(@"mass[%d].x[0]:: %f",k,mass[k].x[0]);

    mass[k].x[1] = j/(GRID_SIZE_Y - 1.0)*height;
    //            NSLog(@"mass[%d].x[1]:: %f",k,mass[k].x[1]);

    mass[k].x[2] = -(CLIP_FAR - CLIP_NEAR)/4.0;
    //            NSLog(@"mass[%d].x[2]:: %f",k,mass[k].x[2]);

    mass[k].v[0] = 0.0;
    mass[k].v[1] = 0.0;
    mass[k].v[2] = 0.0;

    mass[k].t[0] = i/(GRID_SIZE_X - 1.0);
    mass[k].t[1] = j/(GRID_SIZE_Y - 1.0);

    k++;
  }
}

- (void)draw {

glDisableClientState(GL_COLOR_ARRAY);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
glColor4ub(224,224,244,200);

[self body_redraw];

glBlendFunc(CC_BLEND_SRC, CC_BLEND_DST);
glEnableClientState(GL_COLOR_ARRAY); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:12:34.323

如果是 cocos2d 游戏，那么您可以使用这些调用来反转图像并缩小。

```
CCSprite *sprite = [CCSprite spriteWithFile:@"Filename.png"];
[parent addChild:sprite];
[sprite setPosition: ccp( p.x, p.y)];

sprite.flipY = true;
sprite.scale = 1.0f; 
```

# android - android拆分url字符串

> ID：15655945
> 
> 赞同：0
> 
> 时间：2013-03-27T09:54:47.830
> 
> 标签：android, string, split

我的字符串看起来像这样

```
String url = 'domain1/balabala.mp3,domain2/aaaaa.mp3,domain3/baaaaa.mp3'; 
```

我想像这样

```
String domain1 = 'domain1/balabala.mp3';
String domain2 = 'domain2/aaaaa.mp3';
String domain3 = 'domain3/baaaaa.mp3'; 
```

例如：名为“domain1”的主机名将链接作为字符串

编辑：我不想要一个数组。我需要基于域名主机名的输出。所有答案都很好。请再次检查。

这几乎可以工作，但我没有预料到..

```
String[] separated = CurrentString.split(",");
separated[0]; // this will contain "domain1"
separated[1];// this will contain "domain2" 
```

但是这个不是基于主机名..它只是分隔第一，第二和第三个域名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:57:13.090

你可以用逗号分割，这给你一个比声明变量更有意义的数组，因为我假设你的字符串可能包含不同数量的域。

```
final String url = "domain1/balabala.mp3,domain2/aaaaa.mp3,domain3/baaaaa.mp3";
final String[] split = url.split(",");
for(final String domain : split) {
    System.out.println(domain);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:57:20.073

试试分..

```
String[] domains = "domain1/balabala.mp3,domain2/aaaaa.mp3,domain3/baaaaa.mp3".split(","); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:57:57.120

```
String url = "domain1/balabala.mp3,domain2/aaaaa.mp3,domain3/baaaaa.mp3";
    String[] strAry = url.split(",");
    for (int i=0; i<strAry.length; i++) {
        System.out.println(strAry[i]);
    } 
```

# php - 让客户在 Magento 书籍的物理格式和可下载格式之间进行选择

> ID：15655949
> 
> 赞同：-1
> 
> 时间：2013-03-27T09:55:10.187
> 
> 标签：php, html, magento, download, shop

我尝试使用 magento 电子商务软件（Magento 社区版 - 版本 1.7.0.2）为我们的客户建立一个书店网站。这是我第一次使用商店系统..这是我的问题：

我想以至少两种格式出售书籍，印刷版和可下载版——每种都有不同的价格。用户应该将一本书视为一种产品，并且应该能够通过下拉菜单选择他想要购买的格式（如在线商店中的 T 恤尺寸......）..我尝试使用可配置的产品，但我似乎无法创建一个包含简单产品和可下载产品的产品。

此处和其他站点讨论了相同的问题，但没有针对此问题的具体解决方案：

[https://collaborate.magento.com/magento/topics/can_you_include_a_downloadable_product_within_a_configurable_product](https://collaborate.magento.com/magento/topics/can_you_include_a_downloadable_product_within_a_configurable_product)

[http://www.magentocommerce.com/boards/viewthread/269950/](http://www.magentocommerce.com/boards/viewthread/269950/)

我的编程技能不是最好的，如果有人可以在这里帮助我，我将非常感激。

谢谢，伊琳娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:00:57.237

理论上，您可以创建一个捆绑产品，其中包含一个捆绑项目，其中包含可下载的书籍和实体书作为选项。

但如果你看一下，`app/code/core/Mage/Downloadable/etc/config.xml`你会在下面找到以下内容`global/catalog/product/type`：

```
 <!--<bundle>-->
                    <!--<allowed_selection_types>-->
                        <!--<downloadable/>-->
                    <!--</allowed_selection_types>-->
                <!--</bundle>-->
                <configurable>
                    <allow_product_types>
                        <downloadable/>
                    </allow_product_types>
                </configurable> 
```

看起来可下载的产品曾经被允许，但自从 Magento 1.6 以来，这被故意注释掉了，所以它可能有问题（[另见这个问题](https://stackoverflow.com/questions/11368494/magento-add-downloadable-with-physical-product-or-simple-product)）。尽管如此，您仍然可以尝试重新激活此代码，但要小心并期待出现错误。

顺便说一句，由于这与编程没有直接关系，因此您的问题将在[magento.stackexchange.com上更受欢迎](http://magento.stackexchange.com)

# database - 如何将数据库连接添加到eclipse中？

> ID：15655951
> 
> 赞同：0
> 
> 时间：2013-03-27T09:55:18.250
> 
> 标签：database, jsp, servlets, toad

我正在使用**Servlet 和 JSP**构建登录页面来开发动态 Web 应用程序，我做了所有事情，但现在我需要添加**数据库**来检查用户名和密码是真还是假，我正在使用**toad**并且有带有表的模式用户信息。我的问题是如何将我的**数据库**连接到我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:05:53.320

Toad 本身不是数据库，它只是管理软件。

您可能想要使用 JDBC 驱动程序插件。

[这里](http://www.vogella.com/articles/MySQLJava/article.html)有一个非常简单的教程，向您展示如何在 Eclipse 中使用它。您应该能够从那里获得基础知识并将其应用于您的 Web 应用程序。

# winapi - 如何从 Rich Edit Win API 获取 RTF 格式的文本？

> ID：15655953
> 
> 赞同：4
> 
> 时间：2013-03-27T09:55:23.003
> 
> 标签：winapi, rtf, richedit

（对不起我的疯狂英语）我想以 RTF 格式获取 Rich Edit 中的所有文本，而不是纯文本到变量。我尝试使用带有 EM_STREAMOUT 的 SendMessage() 直接将 Rich Edit 写入文件，但我无法将内容保存到特定变量，例如 LPWSTR。请记住，只有 Win API，而不是 MFC。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T19:13:19.397

您可以将变量传递给`EM_STREAMOUT`回调，以便可以根据需要对其进行更新，例如：

```
DWORD CALLBACK EditStreamOutCallback(DWORD_PTR dwCookie, LPBYTE pbBuff, LONG cb, LONG *pcb)
{
    std::stringstream *rtf = (std::stringstream*) dwCookie;
    rtf->write((char*)pbBuff, cb);
    *pcb = cb;
    return 0;
} 
```

.

```
std::stringstream rtf;

EDITSTREAM es = {0};
es.dwCookie = (DWORD_PTR) &rtf;
es.pfnCallback = &EditStreamOutCallback; 
SendMessage(hRichEditWnd, EM_STREAMOUT, SF_RTF, (LPARAM)&es);

// use rtf.str() as needed... 
```

**更新：**要将 RTF 数据加载到 RichEdit 控件中，请使用`EM_STREAMIN`，例如：

```
DWORD CALLBACK EditStreamInCallback(DWORD_PTR dwCookie, LPBYTE pbBuff, LONG cb, LONG *pcb)
{
    std::stringstream *rtf = (std::stringstream*) dwCookie;
    *pcb = rtf->readsome((char*)pbBuff, cb);
    return 0;
} 
```

.

```
std::stringstream rtf("...");

EDITSTREAM es = {0};
es.dwCookie = (DWORD_PTR) &rtf;
es.pfnCallback = &EditStreamInCallback; 
SendMessage(hRichEditWnd, EM_STREAMIN, SF_RTF, (LPARAM)&es); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T11:17:17.423

使用`EM_STREAMOUT`消息就是答案。

这是我可以构建来演示的最简单的示例。这会将富编辑控件的内容保存到文件中。

```
DWORD CALLBACK EditStreamOutCallback(DWORD_PTR dwCookie, LPBYTE pbBuff, LONG cb, LONG *pcb)
{
    HANDLE hFile = (HANDLE)dwCookie;
    DWORD NumberOfBytesWritten;
    if (!WriteFile(hFile, pbBuff, cb, &NumberOfBytesWritten, NULL))
    {
        //handle errors
        return 1;
        // or perhaps return GetLastError();
    }
    *pcb = NumberOfBytesWritten;
    return 0;
}

void SaveRichTextToFile(HWND hWnd, LPCWSTR filename)
{
    HANDLE hFile = CreateFile(filename, GENERIC_WRITE, 0, NULL,
        CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);
    if (hFile == INVALID_HANDLE_VALUE)
    {
        //handle errors
    }
    EDITSTREAM es = { 0 };
    es.dwCookie = (DWORD_PTR) hFile;
    es.pfnCallback = EditStreamOutCallback; 
    SendMessage(hWnd, EM_STREAMOUT, SF_RTF, (LPARAM)&es);
    CloseHandle(hFile);
    if (es.dwError != 0)
    {
        //handle errors
    }
} 
```

# sybase - top 子句和 set rocount 的区别

> ID：15655954
> 
> 赞同：1
> 
> 时间：2013-03-27T09:55:23.330
> 
> 标签：sybase

top 子句和 set rowcount 之间有什么区别..我正在为存储过程进行性能调整...建议在过程中选择前 1 条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:38:42.940

**top**和**set rowcount**非常相似，但**top**有一些**set rowcount**没有的限制和限制。

来自 Sybase[参考手册：命令](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc36272.1550/html/commands/X35229.htm)

> top unsigned_integer 与 select...into 语句一起使用，以限制插入目标表的行数。**这与 set rowcount 不同，后者在 select...into 期间被忽略。**
> 
> • 与删除、更新或视图一起使用时，不能指定顺序。如果聚集索引对表有隐含顺序，则该顺序适用；否则，结果是不可预测的，因为它们可以按任何顺序排列。
> 
> • 当与游标一起使用时，top n 限制了结果集的整体大小。指定 set cursor rowcount 会限制单个提取的结果。
> 
> • 当视图定义包含select top n 并且带有where 子句的查询使用它时，结果可能不一致。

# unix - 根据模式重命名目录

> ID：15655959
> 
> 赞同：0
> 
> 时间：2013-03-27T09:55:32.007
> 
> 标签：unix, directory, find

我目前正在尝试将所有包含*123*的目录重命名为*321*。
例如，如果我有一个名为 test123test 的目录，我想将其重命名为 test321test。

到目前为止，我有一些看起来像的东西：
`find . -depth -name *123* -exec mv {}` **这就是我遇到问题的地方**`\;`
因为我看不到如何根据原始名称替换文件夹的名称。

如果您对如何进行有任何想法，请随时贡献。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:00:05.677

尝试使用 for 循环：

```
for dir in `find . -type d -depth X -name '*123*'` ; do
    mv "$dir" "${dir/123/321}"
done 
```

*注意：*您需要`X`在上面进行编辑。如果有像 ' `./dir123/dir123/`'这样的路径，它可能会失败

# javascript - 如何为基于 Titanium 构建的 iphone 应用程序放置广告

> ID：15655960
> 
> 赞同：1
> 
> 时间：2013-03-27T09:55:36.223
> 
> 标签：javascript, titanium-mobile

我对在 AppStore 上部署应用程序还很陌生。应用程序正在使用 Javascript 在 Titanium 上开发，应该在几个月内完成。这个应用程序可以免费下载。我浏览了一些关于使用 xCode 放置广告的搜索，但找不到任何关于 Titanium 的内容。任何人有想法请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:40:44.090

您可以在 XCode 中使用钛合金中的任何内容，只需将其包装在一个模块中即可。

[AdMob 是一种选择。](https://marketplace.appcelerator.com/apps/4961?214631482)

[你可以在这里找到更多的可能性。](https://marketplace.appcelerator.com)

# iphone - 恢复定时器后，定时器计数快两倍

> ID：15655961
> 
> 赞同：1
> 
> 时间：2013-03-27T09:55:36.693
> 
> 标签：iphone, ios, objective-c, cocoa-touch, nstimer

我现在正在学习 Mac OS X 编程。我的第一个项目是写一个简单的秒表。我知道你可以使用 NSTimer，但我想如果我自己完成所有工作，我会学到更多。该应用程序运行良好。但是在恢复秒表后，它会跳过每一秒的数字..

这里的代码：

```
- (IBAction)stop:(id)sender {
    started = FALSE;
    NSLog(@"Stop pressed: %i", started);
}

- (IBAction)start:(id)sender {
    if(!started){
        started = TRUE;
        [self tock:nil];  
    }
    else {
        started = FALSE; 
    }
}

- (void) tock:(id)sender { 
     if(started == TRUE) {
         seconds++;
     };

     [self performSelector:@selector(tock:) withObject:(self) afterDelay:(1.0)];
     _anzeige.stringValue = [NSString stringWithFormat:(@"%i"), seconds];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:04:37.353

第 1 步：在 .h 文件中声明以下两个变量

```
NSTimer *secondTimer;
int seconds; 
```

第2步：然后将秒初始化为0

```
- (void)viewDidLoad
{
    seconds = 0;
} 
```

第 3 步：编写以下方法并为各自的 Start 和 Stop 方法分配 IBOutlets

```
- (IBAction)stop:(id)sender
{
    // Check if time is enable stop it first    
    if([secondTimer isValid])
    {
        [secondTimer invalidate];
        secondTimer = nil;
    }
}

- (IBAction)start:(id)sender
{
    // Check if time is enable stop it first
    if([secondTimer isValid])
    {
        [secondTimer invalidate];
        secondTimer = nil;
    }

    // now start a new timer
    secondTimer = [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(tock) userInfo:nil repeats:YES];
}

- (void) tock
{
    seconds++;
    NSLog(@"%d",seconds);
    // if you want to display second in UILabel uncomment following line
    //[lbl setText:[NSString stringWithFormat:@"%d",seconds]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:18:17.517

像这样尝试并使用 NSDate 变量 lObjstrt 中的开始时间和

```
NSTimeInterval lTimeInterval=[lObjCurrentDateStr timeIntervalSinceDate:lObjstrt];
NSDate *lObjTimerDatePtr =[NSDate dateWithTimeIntervalSince1970:lTimeInterval];
NSDateFormatter *lObjDateFormatterPtr = [[NSDateFormatter alloc] init];
[lObjDateFormatterPtr setDateFormat:@"mm:ss.SS"];
[lObjDateFormatterPtr setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
NSString *m_cObjSprintTimePtr=[lObjDateFormatterPtr stringFromDate:lObjTimerDatePtr];
NSString *m_cObjSprintTimerValuePtr = [NSString stringWithFormat:@"%@ secs", self.m_cObjSprintTimePtr]; 
```

有了这个，您可以相应地获取计时器并尝试在停止后让计时器休息，例如：

```
if((NSTimer *)nil != m_cObjSprintTimerPtr) {
    [m_cObjSprintTimerPtr invalidate];
    m_cObjSprintTimerPtr = (NSTimer *)nil;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:18:33.987

您需要取消`performSelector:withObject:afterDelay:`通话。否则，每次调用时它们都会堆积起来`tock:`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T10:19:41.510

首先，您通常只是在单独的线程中启动这样的循环并用标志控制它。其次，如果要使塞子准确，则必须在启动计时器时保存时间戳，并且每次计时器循环都会显示开始时间戳和当前时间戳之间的差异。示例：[[NSDate 日期] timeIntervalSinceDate:startDate];

# gtk - 如何缩放地图坐标以确保它完全可见

> ID：15655963
> 
> 赞同：0
> 
> 时间：2013-03-27T09:55:42.023
> 
> 标签：gtk, coordinates, gis, scale, cartography

我正在开发一个类似 GIS 的应用程序，我需要在 Gtk 窗口上绘制（2d）*地图。*我们从**PROJ.4**获得坐标 - 已经转换为**标准 x, y 格式**。

 **所有点都有非常*大*的数字作为坐标。例如，一个典型的点可以描述如下：

**x = 820787.12345...**

**y = 3937564.12345...**

这个区域仍然*太大*，无法在我的 GTK 窗口中绘制（最大分辨率：**1366** * **768**）！

所以，我有一个简单而*愚蠢*的问题：是否有任何标准方法可以在绘制地图之前*连贯地缩放*地图的大小，以确保我的地图完全显示在我的默认绘图区域中（不损失精度）？

是的，我知道我可以先将每个坐标除以一个常数，然后再加入点；但是这种“原始”方法似乎（当然对我来说）草率且不准确。

如果我能解决我的问题，我承诺制作一个演示与其他用户分享。

谢谢

它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:16:58.840

不确定我是否正确，但我使用 cairo 在 gtk_windows 上绘图。如果您使用的是 cairo，这可能会有所帮助：

```
// save cairo to simply restore old scale_map
cairo_save(cr);

// move cairo center to your zero pos of your graph
cairo_translate(cr, x_zero_pos, y_zero_pos);

// scale on max bounds <--- this is what you are looking for
cairo_scale(cr, graph_width / max_x_amplitude,
               -graph_height / max_y_amplitude);

// now you can draw your line with real values
cairo_line....s.o

//restore your cairo. otherwise the linewidth will be depending on the scale
cairo_restore(cr);

// finally paint
cairo_set_line_width(cr, linewidth);
cairo_stroke(cr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:19:25.553

首先，非常感谢您！多亏了你的建议，我已经解决了我的烦恼。

下面你可以看到一个简单的_self_containing_演示应用程序：

```
import gtk
from gtk import gdk

class Canvas(gtk.DrawingArea):

    # the list of points is passed as argument

    def __init__(self, points):
        super(Canvas, self).__init__()
        self.points = points

        # Canvas is 800*500 only!

        self.set_size_request(800, 500)
        self.scaleFactor = 0.0
        self.connect("expose_event", self.expose)

    # Method to paint polygons and lines on screen

    def expose(self, widget, event):
        rect = widget.get_allocation()
        w = rect.width
        h = rect.height

        # Calculation of the coordinates limits

        xMax = max([c[0] for c in self.points])
        yMax = max([c[1] for c in self.points])
        xMin = min([c[0] for c in self.points])
        yMin = min([c[1] for c in self.points])

        # Calculation of the size of the bounding box

        maxRectWidth = xMax - xMin
        maxRectHeigth = yMax - yMin

        # Scale factor calculation

        width_ratio = float(w) / maxRectWidth
        height_ratio = float(h) / maxRectHeigth
        self.scaleFactor = min(height_ratio, width_ratio)

        # Create Cairo Context object

        ctx = widget.window.cairo_create()

        # Set colour and line width

        ctx.set_line_width(7)
        ctx.set_source_rgb(255, 0, 0)
        ctx.save()

        # CRITICAL LINE: the Cairo Context is moved and scaled here

        ctx.scale(self.scaleFactor, self.scaleFactor)
        ctx.translate(-xMin, -yMin)

        # Drawing of the lines

        for i in range(0, len(self.points)):
            currPoint = self.points[i]
            currX = float(currPoint[0])
            currY = float(currPoint[1])
            nextIndex = i + 1
            if (nextIndex == len(self.points)):
                continue
            nextPoint = self.points[nextIndex]
            nextX = float(nextPoint[0])
            nextY = float(nextPoint[1])
            ctx.move_to(currX, currY)
            ctx.line_to(nextX, nextY)
        ctx.restore()
        ctx.close_path()
        ctx.stroke()

# a list of single points with large _LARGE _coordinates

li1 = [(200000,200000), (400000,200000), (400000,400000), (200000,400000)]

window = gtk.Window()
canvas = Canvas(li1)
window.add(canvas)
window.show_all()
gtk.main() 
```**

# linux - 用于 CPU 负载监控的 Shell 脚本

> ID：15655969
> 
> 赞同：3
> 
> 时间：2013-03-27T09:55:54.020
> 
> 标签：linux, shell, load, cpu-usage

我正在寻找一个脚本来监控每天的 cpu 使用情况。我遇到的所有脚本都会进行实时监控，并在满足某些方面（例如负载增加超过 80%）时发送电子邮件。

是否可以使用 shell 脚本监控和了解 CPU 的最大、最小和平均利用率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-26T07:49:54.640

您可以使用以下脚本来监控服务器负载，

```
#!/bin/bash
r=$(cat /proc/loadavg | awk -F. '{print $1}')
if [ $r -ge 50 ]
then
/bin/mail -s "Warning: High Server Load on: `hostname -i` Load Average: $r"     your@emailid.here
fi 
```

将其另存为 loadmon.sh

添加定时任务：

```
 * * * * * /bin/sh /path/for/loadmon.sh 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T08:52:47.037

这个问题已经有一年多了，这就是我当时解决它的方式。由于我不是常用用户，因此我为延迟发布表示歉意。

我编写了一个脚本`vmstat`，每天使用并将输出写入 fileload.log。然后我把它带到互联网上，那里有一个出色的负载监控工具，可以将 vmstat 日志转换为 CPU、RAM 和处理器 utlis 的图表。我已经使用这个免费工具来可视化 vmstat 图。

`vmstat -n 5 > vmstat.log`

检查[VMStax for Visualization of vmstat](http://vmstax.michenux.net/)以上传 vmstat 日志以生成图表。

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:03:26.407

我认为您不需要此任务的脚本。您可以使用**mpstat**或**sar** 按照链接了解详细说明： [http ://www.linuxexplorers.com/2012/08/linux-commands-to-check-cpu-and-memory-usage/](http://www.linuxexplorers.com/2012/08/linux-commands-to-check-cpu-and-memory-usage/)

# android - Android：Endless Scrolling listview 内容错误和 NullpointerException

> ID：15655972
> 
> 赞同：0
> 
> 时间：2013-03-27T09:55:59.470
> 
> 标签：android, json, android-listview, android-asynctask, cwac-endless

我在通过从 JSON 加载产品和从产品加载图像来修复无休止的滚动时遇到了巨大的问题。我得到了两个我无法修复的错误我已经尽我所能。

当我不在最后一个项目上时，它有时会加载页面，这会给我一个“适配器已更改但列表视图未通知错误”，并且我得到一个随机的 NullPointerException ，它对我没有任何意义，我无法解决它。有什么帮助吗？

错误空指针：

```
03-27 10:25:29.250: E/AndroidRuntime(23494): FATAL EXCEPTION: main
03-27 10:25:29.250: E/AndroidRuntime(23494): java.lang.NullPointerException
03-27 10:25:29.250: E/AndroidRuntime(23494): at com.tonika.productlijst$ImageLoaderTask.onPostExecute(productlijst.java:761)
03-27 10:25:29.250: E/AndroidRuntime(23494): at com.tonika.productlijst$ImageLoaderTask.onPostExecute(productlijst.java:1)
03-27 10:25:29.250: E/AndroidRuntime(23494): at com.commonsware.cwac.task.AsyncTaskEx.finish(AsyncTaskEx.java:422)
03-27 10:25:29.250: E/AndroidRuntime(23494): at com.commonsware.cwac.task.AsyncTaskEx.access$300(AsyncTaskEx.java:129)
03-27 10:25:29.250: E/AndroidRuntime(23494): at com.commonsware.cwac.task.AsyncTaskEx$InternalHandler.handleMessage(AsyncTaskEx.java:434)
03-27 10:25:29.250: E/AndroidRuntime(23494): at android.os.Handler.dispatchMessage(Handler.java:99)
03-27 10:25:29.250: E/AndroidRuntime(23494): at android.os.Looper.loop(Looper.java:137)
03-27 10:25:29.250: E/AndroidRuntime(23494): at android.app.ActivityThread.main(ActivityThread.java:5234)
03-27 10:25:29.250: E/AndroidRuntime(23494): at java.lang.reflect.Method.invokeNative(Native Method)
03-27 10:25:29.250: E/AndroidRuntime(23494): at java.lang.reflect.Method.invoke(Method.java:525)
03-27 10:25:29.250: E/AndroidRuntime(23494): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:799)
03-27 10:25:29.250: E/AndroidRuntime(23494): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
03-27 10:25:29.250: E/AndroidRuntime(23494): at dalvik.system.NativeStart.main(Native Method) 
```

错误内容已更改：

```
03-27 10:26:48.515: E/AndroidRuntime(23630): FATAL EXCEPTION: main
03-27 10:26:48.515: E/AndroidRuntime(23630): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(2131165198, class android.widget.ListView) with Adapter(class android.widget.SimpleAdapter)]
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.widget.ListView.layoutChildren(ListView.java:1544)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.widget.AbsListView.onLayout(AbsListView.java:1996)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.View.layout(View.java:14008)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.ViewGroup.layout(ViewGroup.java:4373)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.View.layout(View.java:14008)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.ViewGroup.layout(ViewGroup.java:4373)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.widget.RelativeLayout.onLayout(RelativeLayout.java:1021)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.View.layout(View.java:14008)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.ViewGroup.layout(ViewGroup.java:4373)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.View.layout(View.java:14008)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.ViewGroup.layout(ViewGroup.java:4373)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1663)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1521)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.widget.LinearLayout.onLayout(LinearLayout.java:1434)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.View.layout(View.java:14008)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.ViewGroup.layout(ViewGroup.java:4373)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.View.layout(View.java:14008)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.ViewGroup.layout(ViewGroup.java:4373)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1892)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1711)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.Choreographer.doCallbacks(Choreographer.java:562)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.Choreographer.doFrame(Choreographer.java:532)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.os.Handler.handleCallback(Handler.java:725)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.os.Handler.dispatchMessage(Handler.java:92)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.os.Looper.loop(Looper.java:137)
03-27 10:26:48.515: E/AndroidRuntime(23630): at android.app.ActivityThread.main(ActivityThread.java:5234)
03-27 10:26:48.515: E/AndroidRuntime(23630): at java.lang.reflect.Method.invokeNative(Native Method)
03-27 10:26:48.515: E/AndroidRuntime(23630): at java.lang.reflect.Method.invoke(Method.java:525)
03-27 10:26:48.515: E/AndroidRuntime(23630): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:799)
03-27 10:26:48.515: E/AndroidRuntime(23630): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
03-27 10:26:48.515: E/AndroidRuntime(23630): at dalvik.system.NativeStart.main(Native Method) 
```

代码：

```
public class productlijst extends Activity {
    ListView list;
    String keuze = "nothing";
    String filter = null;
    ImageView search;
    ImageView thumb;
    int kf;
    int c;
    int o;
    int set;
    int currentpagee;
    int products;
    int check;
    int working;
    View footerView;
    SimpleAdapter adapter;
    TextView total;
    TextView current;
    TextView divider;
    ImageButton back;
    ImageButton next;
    DownloadTask downloadTask;
    ListViewLoaderTask listViewLoaderTask;
    ImageLoaderTask imageLoaderTask;
    ArrayList<HashMap<String, Object>> mylist;
    ProgressBar prog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.productlijst);

        //Get Bundle
        Bundle extra = getIntent().getExtras();

        if (extra != null) {
            filter = extra.getString("keuze");
            keuze = extra.getString("filter");

            Log.i("keuze", filter);
        }

        thumb = (ImageView) findViewById(R.id.imPThumb);
        search = (ImageView) findViewById(R.id.imSearch);
        list = (ListView) findViewById(R.id.lvKeuze);
        prog = (ProgressBar) findViewById(R.id.pbProductLijst);
        mylist = new ArrayList<HashMap<String, Object>>();

        prog.setVisibility(View.INVISIBLE);

        downloadTask = new DownloadTask();
        DownloadPage downloadPage = new DownloadPage();

        c = 0;
        o = 10;
        currentpagee = 1;
        kf = 0;
        products = 0;
        check = 0;
        working = 0;

        // Starting the download process
        downloadTask.execute("http://no.nl/api/products?display=full&limit=" + c + ",10&filter[id_category_default]=" + filter);
        downloadPage.execute("http://no.nl/AppScripts/GetCount.php?cat=" + filter);

        list.setOnScrollListener(new OnScrollListener() {
            public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {}

            public void onScrollStateChanged(AbsListView view, int scrollState) {
                if (scrollState == SCROLL_STATE_IDLE) {
                    if (working != 1) {
                        if (list.getLastVisiblePosition() >= list.getCount() - o) {
                            Log.i("Scroll", "scroll " + c);
                            if (c >= products ) {
                                //load more list items:
                                Toast.makeText(getApplicationContext(), "Geen producten meer", Toast.LENGTH_SHORT).show();
                            } else {
                                working = 1;
                                check = 1;
                                kf = 1;
                                c = c + o;
                                currentpagee++;

                                //current.setText("" + currentpagee);
                                Toast.makeText(getApplicationContext(), "Producten Laden..", Toast.LENGTH_SHORT).show();

                                ScrollDownloadTask scrollDownloadTask = new ScrollDownloadTask();
                                scrollDownloadTask.execute("http://no.nl/api/products?display=full&limit=" + c + ",10&filter[id_category_default]=" + filter);
                                adapter.notifyDataSetChanged();
                            }
                        }
                    } else {
                        Toast.makeText(getApplicationContext(), "Nog bezig met laden", Toast.LENGTH_SHORT).show();
                    }
                }
            }
        });

    /** A method to download xml data from url */
    private String downloadUrl(String strUrl) throws IOException {
        String line = null;

        try {
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet httpPost = new HttpGet(strUrl);
            Credentials creds = new UsernamePasswordCredentials("", ""); 
            httpClient.getCredentialsProvider().setCredentials(new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT), creds);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            line = EntityUtils.toString(httpEntity);
        } catch (UnsupportedEncodingException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        } catch (MalformedURLException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        } catch (IOException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        }
        return line;
    }

    private String downloadUrlPage(String strUrl) throws IOException {
        String line = null;

        try {
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet httpPost = new HttpGet(strUrl);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            line = EntityUtils.toString(httpEntity);
        } catch (UnsupportedEncodingException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        } catch (MalformedURLException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        } catch (IOException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        }
        return line;
    }

    /** AsyncTask to download xml data */
    private class DownloadTask extends AsyncTaskEx<String, Integer, String> {
        String data = null;

        @Override
        protected String doInBackground(String... url) {

        try{
            data = downloadUrl(url[0]);
        } catch(Exception e) {
            Log.d("Background Task",e.toString());
        }
        return data;
    }

    @Override
    protected void onPostExecute(String result) {

        // The parsing of the xml data is done in a non-ui thread 
        listViewLoaderTask = new ListViewLoaderTask();

        // Start parsing xml data
        listViewLoaderTask.execute(result);
    }
} 
```

下载页面代码

```
 /** AsyncTask to download xml data */
    private class DownloadPage extends AsyncTaskEx<String, Integer, String>{
        String data = null;

        @Override
        protected String doInBackground(String... url) {
            try {
                data = downloadUrlPage(url[0]);
            } catch(Exception e) {
                Log.d("Background Task",e.toString());
            }
            return data;
        }

        @Override
        protected void onPostExecute(String result) {
            products = Integer.parseInt(Html.fromHtml(result).toString());

            Log.i("Result page", Html.fromHtml(result).toString());
        }
    } 
```

ScrollDownloadTask 的代码

```
/** AsyncTask to download xml data */
private class ScrollDownloadTask extends AsyncTaskEx<String, Integer, String> {
    String data = null;

    @Override
    protected String doInBackground(String... url) {
        try {
            data = downloadUrl(url[0]);
        } catch(Exception e) {
            Log.d("Background Task",e.toString());
        }
        return data;
    }

    @Override
    protected void onPostExecute(String result) {

        // The parsing of the xml data is done in a non-ui thread 
        ScrollListViewLoaderTask ScrollListViewLoaderTask = new ScrollListViewLoaderTask();

        // Start parsing xml data
        ScrollListViewLoaderTask.execute(result);
    }
} 
```

ScrollListViewLoaderTaks 的代码

```
/** AsyncTask to parse xml data and load ListView */
private class ScrollListViewLoaderTask extends AsyncTaskEx<String, Void, SimpleAdapter> {
    StringReader reader;

    // Doing the parsing of xml data in a non-ui thread 
    @SuppressWarnings("unchecked")
    @Override
    protected SimpleAdapter doInBackground(String... strXml) {
        DocumentBuilder db = null;
        InputSource is = null;

        try {
            db = DocumentBuilderFactory.newInstance().newDocumentBuilder();
            is = new InputSource();
            is.setCharacterStream(new StringReader(strXml[0]));
        } catch(Exception e) {
            Log.d("XML Exception1",e.toString());
        }

        Document doc = null;
        try {
            doc = db.parse(is);
        } catch (SAXException e1) {
            e1.printStackTrace();
        } catch (IOException e1) {
            e1.printStackTrace();
        }

        NodeList nodes = doc.getElementsByTagName("product");
        NodeList nodename = doc.getElementsByTagName("name");

        //fill in the list items from the XML document
        for (int i = 0; i < nodes.getLength(); i++) {
            HashMap<String, Object> map = new HashMap<String, Object>();    

            Log.i("child notes", nodename.item(i).getFirstChild().getTextContent());
            Element e = (Element)nodes.item(i);

            Log.i("Manu name", "" + Integer.parseInt(XMLLoader.getValue(e, "quantity")));
            if (Integer.parseInt(XMLLoader.getValue(e, "quantity")) > 0) {
                Log.i("Stock!", "Stock!");
                map.put("stock", R.drawable.stock);
            } else {
                map.put("stock", R.drawable.nostock);
            }
            String id = XMLLoader.getValue(e, "id");
            String imageid = XMLLoader.getValue(e, "id_default_image");
            String name = nodename.item(i).getFirstChild().getTextContent();
            String newname = name;

            if (newname.contains("-") | newname.contains(".") | newname.contains("'")) {
                newname = newname.replaceAll("-", " ");
                newname = newname.replaceAll(".", " ");
                newname = newname.replaceAll("'", "");
            }
            String nameimage = newname.replaceAll(" ", "-");

            map.put("id", id);
            map.put("name", name);
            map.put("imageid", imageid);
            map.put("flag", R.drawable.tlogotrans);    
            map.put("flag_path", "http://no.nl/" + id +  "-" + imageid + "-home/" + nameimage +  ".jpg");
            // map.put("flag_path", "http://no.nl/img/p/" + id + "-" + imageid + ".jpg");
            // imageLoader.DisplayImage(, thumb);

            String p = XMLLoader.getValue(e, "price");
            String price = p.substring(0, p.length() - 4);
            map.put("price",price); 
            map.put("manufacturer_name", XMLLoader.getValue(e, "manufacturer_name"));

            mylist.add(map);
        }       

        // Keys used in Hashmap 
        String[] from = { "name","manufacturer_name","price","flag","stock"};

        // Ids of views in listview_layout
        int[] to = { R.id.tvPRName,R.id.tvPLMerk,R.id.tvPRPrijs,R.id.imPThumb,R.id.imstock};

        // Instantiating an adapter to store each items
        // R.layout.listview_layout defines the layout of each item        

        adapter = new SimpleAdapter(getBaseContext(), mylist, R.layout.productlijstrow, from, to);  
        return adapter;
    }

    /** Invoked by the Android when "doInBackground" is executed */
    @Override
    protected void onPostExecute(SimpleAdapter adapter) {

        // Setting adapter for the listview
        adapter.notifyDataSetChanged();

            for(int i=0;i<adapter.getCount();i++){
                HashMap<String, Object> hm = (HashMap<String, Object>) adapter.getItem(i);
                String imgUrl = (String) hm.get("flag_path");
                imageLoaderTask = new ImageLoaderTask();

                HashMap<String, Object> hmDownload = new HashMap<String, Object>();
                hm.put("flag_path",imgUrl);
                hm.put("position", i);

                // Starting ImageLoaderTask to download and populate image in the listview 

                imageLoaderTask.execute(hm);

            }
        }       
    }

    /** AsyncTask to parse xml data and load ListView */
    private class ListViewLoaderTask extends AsyncTaskEx<String, Void, SimpleAdapter>{

        StringReader reader;

        // Doing the parsing of xml data in a non-ui thread 
        @SuppressWarnings("unchecked")
        @Override
        protected SimpleAdapter doInBackground(String... strXml) {
            DocumentBuilder db = null;
            InputSource is = null;
            try{
                db = DocumentBuilderFactory.newInstance().newDocumentBuilder();
                is = new InputSource();
         is.setCharacterStream(new StringReader(strXml[0]));
            }catch(Exception e){
                Log.d("XML Exception1",e.toString());
            }

                Document doc = null;
                try {
                    doc = db.parse(is);
                } catch (SAXException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

                NodeList nodes = doc.getElementsByTagName("product");

                NodeList nodename = doc.getElementsByTagName("name");
                NodeList link = doc.getElementsByTagName("link_rewrite");

                //fill in the list items from the XML document
                for (int i = 0; i < nodes.getLength(); i++) {
                    HashMap<String, Object> map = new HashMap<String, Object>();    

                    Log.i("child notes", nodename.item(i).getFirstChild().getTextContent());
                    Element e = (Element)nodes.item(i);

                    Log.i("Manu name", "" + Integer.parseInt(XMLLoader.getValue(e, "quantity")));

                    if(Integer.parseInt(XMLLoader.getValue(e, "quantity")) > 0){
                        Log.i("Stock!", "Stock!");

                        map.put("stock", R.drawable.stock);

                    }else{

                        map.put("stock", R.drawable.nostock);
                    }
                    String id = XMLLoader.getValue(e, "id");
                    String imageid = XMLLoader.getValue(e, "id_default_image");
                    String name = nodename.item(i).getFirstChild().getTextContent();
                    String newname = link.item(i).getFirstChild().getTextContent();

                    map.put("id", id);
                    map.put("name", name);
                    map.put("imageid", imageid);

                    map.put("flag", R.drawable.tlogotrans);    
                    //
                    map.put("flag_path", "http://no.nl/" + id +  "-" + imageid + "-home/" + newname +  ".jpg");
                //  map.put("flag_path", "http://no.nl/img/p/" + id + "-" + imageid + ".jpg");

                //  imageLoader.DisplayImage(, thumb);

                    String p = XMLLoader.getValue(e, "price");

                    String price = p.substring(0, p.length() - 4);
                    map.put("price",price );    
                    map.put("manufacturer_name", XMLLoader.getValue(e, "manufacturer_name"));

                    mylist.add(map);

                }       

            // Keys used in Hashmap 
            String[] from = { "name","manufacturer_name","price","flag","stock"};

            // Ids of views in listview_layout
            int[] to = { R.id.tvPRName,R.id.tvPLMerk,R.id.tvPRPrijs,R.id.imPThumb,R.id.imstock};

            // Instantiating an adapter to store each items
            // R.layout.listview_layout defines the layout of each item        

            adapter = new SimpleAdapter(getBaseContext(), mylist, R.layout.productlijstrow, from, to);  

            return adapter;
        }

        /** Invoked by the Android when "doInBackground" is executed */
        @Override
        protected void onPostExecute(SimpleAdapter adapter) {

            // Setting adapter for the listview

            list.setAdapter(adapter);
            adapter.notifyDataSetChanged();

            for(int i=0;i<adapter.getCount();i++){
                HashMap<String, Object> hm = (HashMap<String, Object>) adapter.getItem(i);
                String imgUrl = (String) hm.get("flag_path");
                imageLoaderTask = new ImageLoaderTask();

                HashMap<String, Object> hmDownload = new HashMap<String, Object>();
                hm.put("flag_path",imgUrl);
                hm.put("position", i);

                // Starting ImageLoaderTask to download and populate image in the listview 
                imageLoaderTask.execute(hm);
            }

        }       
    }

    /** AsyncTask to download and load an image in ListView */
    private class ImageLoaderTask extends AsyncTaskEx<HashMap<String, Object>, Void, HashMap<String, Object>>{

        @Override
        protected HashMap<String, Object> doInBackground(HashMap<String, Object>... hm) {

            InputStream iStream=null;
            String imgUrl = (String) hm[0].get("flag_path");
            int position = (Integer) hm[0].get("position");

            URL url;
            try {
                url = new URL(imgUrl);

                // Creating an http connection to communicate with url
                HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

                // Connecting to url                
                urlConnection.connect();

                // Reading data from url 
                iStream = urlConnection.getInputStream();

                // Getting Caching directory 
                File cacheDirectory = getBaseContext().getCacheDir();

                // Temporary file to store the downloaded image 
                File tmpFile = new File(cacheDirectory.getPath() + "/wpta_"+position+".png");               

                // The FileOutputStream to the temporary file
                FileOutputStream fOutStream = new FileOutputStream(tmpFile);

                // Creating a bitmap from the downloaded inputstream
                Bitmap b = BitmapFactory.decodeStream(iStream);             

                // Writing the bitmap to the temporary file as png file
                b.compress(Bitmap.CompressFormat.PNG,100, fOutStream);              

                // Flush the FileOutputStream
                fOutStream.flush();

                //Close the FileOutputStream
                fOutStream.close();             

                // Create a hashmap object to store image path and its position in the listview
                HashMap<String, Object> hmBitmap = new HashMap<String, Object>();

                // Storing the path to the temporary image file
                hmBitmap.put("flag",tmpFile.getPath());

                // Storing the position of the image in the listview
                hmBitmap.put("position",position);              

                // Returning the HashMap object containing the image path and position
                return hmBitmap;                

            }catch (Exception e) {              
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(HashMap<String, Object> result) {
            // Getting the path to the downloaded image
            **String path = (String) result.get("flag");**          

            // Getting the position of the downloaded image
            int position = (Integer) result.get("position");

            // Getting adapter of the listview
            SimpleAdapter adaptert = (SimpleAdapter ) list.getAdapter();

            // Getting the hashmap object at the specified position of the listview
            HashMap<String, Object> hm = (HashMap<String, Object>) adaptert.getItem(position);  

            // Overwriting the existing path in the adapter 
            hm.put("flag",path);
            Log.i("Status", imageLoaderTask.getStatus().toString());

            if(imageLoaderTask.getStatus() == AsyncTaskEx.Status.FINISHED){
                check = 0;
            }
            // Noticing listview about the dataset changes
            adaptert.notifyDataSetChanged();    
            working = 0;    
        }   
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:22:39.647

每当更改数据源时，请调用以下方法：

```
adapter.notifyDataSetChanged() 
```

请务必从 UI 线程调用该方法！

您没有在正确的位置调用上述方法：

```
ScrollDownloadTask scrollDownloadTask = new ScrollDownloadTask();
scrollDownloadTask.execute("http://no.nl/api/products?display=full&limit=" + c + ",10&filter[id_category_default]=" + filter);
adapter.notifyDataSetChanged(); 
```

应在数据源中加载和添加新项目时调用。

# python-nose - python-nose：如何在测试失败时触发自定义回调

> ID：15655979
> 
> 赞同：1
> 
> 时间：2013-03-27T09:56:14.490
> 
> 标签：python-nose

我正在使用 python-nose 运行一些测试。测试代码被安排到模块中，每个模块的固定装置在新配置中安装一些虚拟机，然后模块的测试检查这些虚拟机的行为是否符合预期。

*我想安装一个每个模块的故障处理程序，如果模块中的任何*测试失败，它就会关闭并从 VM 中获取日志。有正确的方法吗？是否有一些回调可以注册 python-nose 当测试失败时启动自定义代码？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:34:21.350

听起来你应该写一个[插件](http://nose.readthedocs.org/en/latest/plugins/interface.html)。您可能有兴趣在您的 Plugin 类上定义[afterTest()](http://nose.readthedocs.org/en/latest/plugins/interface.html#nose.plugins.base.IPluginInterface.afterTest)、[handleFailure()方法。](http://nose.readthedocs.org/en/latest/plugins/interface.html#nose.plugins.base.IPluginInterface.handleFailure)希望有帮助。

# android - 在 Android 应用中部署本地化文档的最佳做法是什么？

> ID：15655980
> 
> 赞同：0
> 
> 时间：2013-03-27T09:56:20.330
> 
> 标签：android, localization, documentation, multilingual, assets

我想在我的 apk 中直接在我的 Android 应用程序中部署多语言文档，以便离线访问它们。

放置在原始目录中的文档可以做到这一点，但我不能保留任何文件夹结构，我宁愿避免这种情况。此外，我将无法集成（非单个文件）html 文件。

我看到了一些使用资产文件夹的解决方法：

[Android 中的可本地化资产](https://stackoverflow.com/questions/9831067/localizable-assets-in-android)

[资产文件的本地化](https://stackoverflow.com/questions/5427933/localization-of-assets-files/5427995#5427995)

最佳做法是什么？这似乎是一个基本功能，奇怪的是谷歌没有预见到解决方案。[我在http://developer.android.com](http://developer.android.com)中找不到任何指南。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:10:19.213

如您所知，Android 支持对某些具有文件夹名称的文件夹进行本地化（例如：drawable-en、values-br）

在我看来，使用 values-[XX] 使用字符串 xml 作为控制机制来访问资产文件夹是最佳实践

例如 ：

使用您的资产子文件夹来这样做：

资产--> 图像-en,images-fr,html-gr...

然后像这样获取您的文件

```
context.getAssets().open("images"+Locale.getDefault().getDisplayLanguage()+"/whatetever.png"); 
```

# vba - 如何使用 VBA 在 PDF 中进行搜索

> ID：15655987
> 
> 赞同：0
> 
> 时间：2013-03-27T09:56:36.583
> 
> 标签：vba, search, excel

嗨，我是 VBA 的菜鸟，

是否可以使用 VBA 在 PDF 文件中进行搜索？并将搜索到的目标与搜索匹配的文件的名称一起返回？

为了让您更好地理解我的工作：我在网页上有一个宏（[http://cetatenie.just.ro/ordine/articol-11/](http://cetatenie.just.ro/ordine/articol-11/)）循环通过超链接并下载匹配的标准文件（PDF） . 现在我需要在其中搜索名字和姓氏（即 BLANARI VITALIE）并知道它发布在哪个文件/文档中。

我脑海中浮现的唯一想法是导入数据，但 Excel 文件又会变得太大。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:05:34.067

如果您安装了 Acrobat Professional，您可以使用自动化 (Acrobat.AcroPDDoc) 并查询 Postscript

这是我为您找到的示例（通过在 Google 上搜索）：

[将 PDF 文件中的数据获取到 Excel 工作表或文本文件中](http://www.vbaexpress.com/kb/getarticle.php?kb_id=1101)

要使用此代码，您需要以下参考资料：

1.  AcroPDFLib
2.  杂技演员

在我的电脑上，它们位于：

*   **AcroPDFLib** : C:\Program Files\Common Files\Adobe\Acrobat\ActiveX\AcroPDF.dll
*   **Acrobat**：C:\Program Files\Adobe\Reader 11.0\Reader\AcroRd32.dll

如果您在 VB Editor References 对话框中找不到它们，或者在**C:\Program Files\Adobe**中搜索，那么您的电脑上没有安装必要的组件来*轻松完成*

**困难**的方法是剥离 PostScript 并将其读入变量，然后搜索变量！

高温高压

菲利普

# vba - 在 excel VBA 中跳过包含搜索字符串的行

> ID：15655991
> 
> 赞同：1
> 
> 时间：2013-03-27T09:56:43.497
> 
> 标签：vba, excel, row, skip

我有一个电子表格的循环，其中已经有一些代码。基本上在VBA中我想做的是：

`If x = Searchstring.row then GoTo continue`（未定义）

我目前正在使用`If x = activecell.row GoTo continue`，但是当我将信息添加到新行时，旧单元格会更新，其中包括搜索字符串行（因为它不再是`ActiveCell.row`）

下面是我正在使用的代码（抱歉有点乱）：

```
Function RelLookup(ByVal Searchstring As String, Reldate As String, _
                SearchRange As Range, TicketRange As Range, ReldateRange As Range, _
                RelRange As Range, Optional UniqueOnly As Boolean = True)

Dim X As Long, Task As String, ReldateVal As String, TicketVal As String, ReturnRel As String, _
Result As String

For X = 1 To SearchRange.Count
If X = ActiveCell.row Then GoTo Continue

Task = SearchRange(X).Value
ReldateVal = ReldateRange(X).Value
TicketVal = TicketRange(X).Value
ReturnRel = RelRange(X).Value

If (Task = Searchstring) And (ReldateVal = Reldate) Then
Result = Result & " Rel " & ReturnRel & " (" & TicketVal & ")" & " &"
End If

Continue:
Next X

If Len(Result) > 0 Then RelLookup = Left(Result, Len(Result) - 2)

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:08:43.557

我找到了适合这种情况的解决方法（感谢@John Bustos 的帮助）。我添加了一个名为“RowNumber”的整数。然后我将 VBA 更改为阅读`If x = RowNumber GoTo Continue` 虽然我现在有一个冗长的公式

```
=RelLookup(E955,Row(E955),"Not Rel",E:E,B:B,I:I,A:A,"") 
```

Integer RowNumber 由 Row(E955) 的值确定。

如果有一种更简单或更可靠的方法可以在不引入另一个字符串的情况下执行此操作，我将保留这个问题（尽管我想不出更基本的方法）

# git - tortoisegit diff 显示未修改的文件

> ID：15655992
> 
> 赞同：1
> 
> 时间：2013-03-27T09:56:50.600
> 
> 标签：git, tortoisegit

Tortoisegit diff 显示未修改的文件，其中添加了 0 行并带有“已修改”状态。实际上它显示了所有项目文件。

那么如何只区分修改过的文件呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T12:45:34.993

听起来像 tortoisegit 中的错误。在命令行（例如在 git bash 中）使用 git 来获取准确的信息：

```
> git status 
```

我还发现上面的命令很奇怪，在下次调用时也会更新 tortoisegit 的输出......

# php - 使用 Spreadsheet_Excel_Writer 的开发服务器不起作用？

> ID：15655998
> 
> 赞同：0
> 
> 时间：2013-03-27T09:56:59.557
> 
> 标签：php, pear, spreadsheet-excel-writer

我正在使用`apache` `2.4`(XAMPP) 的 Windows 机器上运行最新的 PHP 和 pear，我已经安装了最新版本的`OLE`,`PEAR`和 `Spreadsheet_Excel_Writer`. `PEAR`已安装并正在工作。

但是，现在不是在特定页面`generateexcel.php`（在托管版本中，它可以完美运行，并且位于带有.`generateexcel.php``url``apache 2.0``PHP 5.3.18`

所以基本上在我的开发版本上它不起作用，它正在连接到数据库并且网站上的其他一切都在工作。

这是由于在 Windows 上而导致 and 和相对路径不正确的 `include_once`问题吗？`require_once``Writer.php`

任何帮助将不胜感激。即使我可以获得某种错误报告，它也会非常有用。我会尝试：`PEAR::isError()`与此同时。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-27T20:00:44.717

确保 和 的版本`Spreadsheet_Excel_Writer`与`OLE`代码一致。

IE。卸载并使用以前的版本，服务器上使用的相同版本或初始编码失败时。