# StackOverflow 问答 15090000-15090999

# javascript - Node.js Socket.io MongoDB 更新远程 pc 上的数据库

> ID：15090003
> 
> 赞同：1
> 
> 时间：2013-02-26T13:11:57.317
> 
> 标签：javascript, node.js, mongodb, socket.io, gridfs

我想达到的目标：

*   有一个运行 node.js 和 socket.io 的主服务器，它运行一个“类似聊天”的网页，比如这个 [聊天示例](http://uditalias.github.com/chat-nodejs/public/)。在这台服务器上，我还将有一个 mongo 数据库，用于存储多媒体文件和标签。我没有计划使用文件系统来存储数据和元数据，所以我选择了 gridFS。

*   在世界各地拥有多台可以连接到我的服务器的客户端机器，将它们的 MAC 地址作为标识符返回给我。这些机器有自己的主服务器数据库的本地副本，如果缺少某些媒体或标签，则需要对其进行更新。我需要能够将本地数据库与主数据库匹配。

*   在“聊天”页面中，我可以键入触发有用操作的预定义文本命令，例如将在聊天“[客户端 MAC 地址] GET VIDEO ('video.mp4')”中键入的视频或音频发送回主数据库。 .

现在作为一个新手，我的问题是：我可以只使用 node、socket.io、gridFS 和 javascript 吗？

有更好的选择吗？

# xml - 使用 jstl 标签在数据库中解析和存储 xml 数据时出错

> ID：15090007
> 
> 赞同：0
> 
> 时间：2013-02-26T13:12:14.610
> 
> 标签：xml, jsp, parsing, jstl

我必须读取一个 xml 文件，以表的形式显示其内容，并且需要将数据存储在数据库表中。首先，我尝试在我的 jsp 中仅使用 jstl1.2 标签显示数据。它工作正常。但是当我尝试实现一些代码来插入记录时，我收到了这个错误..

```
 Can't infer the SQL type to use for an instance of org.apache.taglibs.standard.tag.common.xml.JSTLNodeList. Use setObject() with an explicit Types value to specify the type to use. 
```

我的 Jsp 代码如下：

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/xml" prefix="x" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql" %>

<sql:setDataSource var="dataSource" driver="org.postgresql.Driver"
     url="jdbc:postgresql://localhost:5432/postgres" user="postgres" password="shail"
     scope="session" />

<html>
  <head>
    <title>cust_xml</title>
  </head>
  <body>

    <h1>Customer Information</h1>

    <c:import var="xmlFile" url="cust.xml"  charEncoding="UTF-8"/>
    <x:parse var="myDoc" xml="${xmlFile}" />

    <table border="1">
      <tr>
        <th>Customer Number</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Street</th>
        <th>City</th>
        <th>State</th>
        <th>Zipcode</th>
        <th>Balance</th>
      </tr>
      <x:forEach select="$myDoc/CUSTOMERS/Customer" var="cust">
        <tr>
             <td>
              <x:out select="$cust/CustNo" />
              <x:set var="custno" select="$cust/CustNo" scope="session"/>
             </td>
             <td>
              <x:out select="$cust/CustFirstName" />
              <x:set var="custfn" select="$cust/CustFirstName" scope="session"/>
             </td>
             <td>
              <x:out select="$cust/CustLastName" />
              <x:set var="custln" select="$cust/CustLastName" scope="session"/>
             </td>
             <td>
              <x:out select="$cust/CustStreet" />
              <x:set var="custst" select="$cust/CustStreet" scope="session"/>
             </td>
             <td>
              <x:out select="$cust/CustCity" />
              <x:set var="custcity" select="$cust/CustCity" scope="session"/>
             </td>
             <td>
              <x:out select="$cust/CustState" />
              <x:set var="custstate" select="$cust/CustState" scope="session"/>
             </td>
             <td>
              <x:out select="$cust/CustZip" />
              <x:set var="custz" select="$cust/CustZip" scope="session"/>
             </td>
             <td>
              <x:out select="$cust/CustBal" />
              <x:set var="custbal" select="$cust/CustBal" scope="session"/>
             </td>
        </tr>
      </x:forEach>
    </table>

    <sql:update dataSource="${dataSource}" var="updatedTable">
        INSERT INTO data  VALUES (?,?,?,?,?,?,?,?);
        <sql:param value="${custno}" />
        <sql:param value="${custfn}" />
        <sql:param value="${custln}" />
        <sql:param value="${custst}" />
        <sql:param value="${custcity}" />
        <sql:param value="${custstate}" />
        <sql:param value="${custz}" />
        <sql:param value="${custbal}" />
    </sql:update>
    <c:if test="${updatedTable>=1}">
     <font size="5" color='green'> Congratulations ! Data inserted successfully.</font>
    </c:if>

  </body>
</html> 
```

请提供您的建议，我应该使用哪个标签来设置插入查询参数的值？如何获取要在查询参数中设置的 xml 元素数据？感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:18:41.317

我努力解决我的问题，但不幸的是无法获得任何帮助。在谷歌搜索时，我得到了一些基本的想法来解决这个问题。我试过这个

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/xml" prefix="x" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql" %>

<sql:setDataSource var="dataSource" driver="org.postgresql.Driver"
     url="jdbc:postgresql://localhost:5432/postgres" user="postgres" password="shail"
     scope="session" />

<html>
  <head>
    <title>cust_xml</title>
  </head>
  <body bgcolor="skyblue">

    <h1 align="center">Customer Information Stored In XMl File</h1>

    <c:import var="xmlFile" url="cust.xml"  charEncoding="UTF-8"/>
    <x:parse var="myDoc" xml="${xmlFile}" />

    <table border="1" cellspacing="1" cellpadding="1" bgcolor="pink" align="center">
      <tr>
        <th>Customer Number</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Street</th>
        <th>City</th>
        <th>State</th>
        <th>Zipcode</th>
        <th>Balance</th>
      </tr>
      <x:forEach select="$myDoc/CUSTOMERS/Customer" var="cust">
        <tr>
             <td>
              <c:set var="custno" >
              <x:out select="$cust/CustNo" />
              </c:set>
              <x:out select="$cust/CustNo" />
             </td>
             <td>
              <c:set var="custfn" >
              <x:out select="$cust/CustFirstName" />
              </c:set>
              <x:out select="$cust/CustFirstName" />
             </td>
             <td>
              <c:set var="custln" >
              <x:out select="$cust/CustLastName" />
              </c:set>
              <x:out select="$cust/CustLastName" />
             </td>
             <td>
              <c:set var="custst" >
              <x:out select="$cust/CustStreet" />
              </c:set>
              <x:out select="$cust/CustStreet" />
             </td>
             <td>
              <c:set var="custcity" >
              <x:out select="$cust/CustCity" />
              </c:set>
              <x:out select="$cust/CustCity" />
             </td>
             <td>
              <c:set var="custstate" >
              <x:out select="$cust/CustState" />
              </c:set>
              <x:out select="$cust/CustState" />
             </td>
             <td>
              <c:set var="custz" >
              <x:out select="$cust/CustZip" />
              </c:set>
              <x:out select="$cust/CustZip" />
             </td>
             <td>
              <c:set var="custbal" >
              <x:out select="$cust/CustBal" />
              </c:set>
              <x:out select="$cust/CustBal" />
             </td>
        </tr>
        <sql:update dataSource="${dataSource}" var="updatedTable">
        INSERT INTO data  VALUES (?,?,?,?,?,?,?,?);
        <sql:param value="${custno}" />
        <sql:param value="${custfn}" />
        <sql:param value="${custln}" />
        <sql:param value="${custst}" />
        <sql:param value="${custcity}" />
        <sql:param value="${custstate}" />
        <sql:param value="${custz}" />
        <sql:param value="${custbal}" />

    </sql:update>
    <c:set var="rowcount" value="${updatedTable+rowcount}"/>
      </x:forEach>

    <c:if test="${rowcount>=1}">
      <tr>
       <td colspan="8" align="center">
     <font size="5" color='red' align="center">
     Congratulations ! <c:out value="${rowcount}" /> Rows inserted successfully  in DB Table.</font>
       </td>
      </tr>
    </c:if>
    </table>
  </body>
</html> 
```

但我得到了这个错误：

```
org.apache.jasper.JasperException: javax.servlet.ServletException: javax.servlet.jsp.JspException: 
        INSERT INTO data  VALUES (?,?,?,?,?,?,?,?);
ERROR: column "balance" is of type integer but expression is of type character varying
  Hint: You will need to rewrite or cast the expression. 
```

正如我的表余额（最后一列）是整数类型。当我用谷歌搜索时，我发现 jstl 标签会自动处理投射。但它显示错误为`by default <c:set > tag places value for variable as string.` 任何想法？有什么帮助吗？有什么建议吗？请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-16T11:12:47.763

您可以附上`?`with`CAST`函数并仍然使用`setObject()`方法。
让我举个例子在**MySQL**中存储 IP 地址时，我的查询是这样的

```
INSERT INTO log (ip,logged_on) VALUES(inet6_aton(?),no()); 
```

PS：`inet6_aton()`对于 MySQL 5.6+ 否则使用`inet4_aton()`或只是`inet_aton()`

现在我转向**Postgres**，它没有`inet_aton`功能，而是`inet`作为一种数据类型。不幸的是，没有`setInet()`方法，所以我会这样做

```
INSERT INTO log (ip,looged_on) VALUES(CAST(? AS INET),now()); 
```

有了这个，我可以使用`setString()`or同时`setObject()`传递参数`JDBC``JSTL`

> 插入数据值 (?,?,?,?,?,?,?,?);

由于您没有像我在示例中那样提及列名，因此我不知道需要对哪一列进行类型转换，但您可以尝试这样编写

```
 INSERT INTO data VALUES (CAST(? AS INTEGER),?,?,?,?,?,?,?); 
```

我只是假设您表格的第一列，`balance`请根据表格中列的位置为适当的参数执行此操作`balance`。

# javascript - 为什么我在使用 Knockout JS 时收到“无法读取属性 'nodeType' of null”错误？

> ID：15090015
> 
> 赞同：33
> 
> 时间：2013-02-26T13:12:28.403
> 
> 标签：javascript, html, data-binding, mvvm, knockout.js

今天是我参加 Knockout 的第一天。被它打动了。下面是我使用 knockout.js 的第一个示例代码，它显示了一个错误。

> 无法读取 null 的属性“nodeType”

这是我的脚本：`

```
 function ViewModel()  
   {  
     var self = this;  
     self.n1 = ko.observable(10);  
     self.n2 = ko.observable(10);  
     self.n3 = ko.observable(10);  
   }  
   ko.applyBindings(new ViewModel());  ` 
```

这是我的html：

```
<body>
<p>Number1:<input data-bind="value:n1"></input></p>
<p>Number2:<input data-bind="value:n2"></input></p>
<p>Number3:<input data-bind="value:n3"></input></p>
</body> 
```

我想知道上述错误的原因以及如何克服它......

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-26T13:16:24.657

如果您像这样设置代码，它将起作用。

```
<body>
<p>Number1:<input data-bind="value:n1"></p>
<p>Number2:<input data-bind="value:n2"></p>
<p>Number3:<input data-bind="value:n3"></p>
<script src="knockout.js"></script>
<script>

function ViewModel() {  
   var self = this;  
   self.n1 = ko.observable(10);  
   self.n2 = ko.observable(10);  
   self.n3 = ko.observable(10);
}  

ko.applyBindings(new ViewModel());  `

</script>
</body> 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-07-05T13:15:48.190

如果你想保持`<script>`在页面的顶部，你可以使用 jQuery 的 ready() 函数来延迟初始化，直到页面加载。

```
$(document).ready(function() {
    ko.applyBindings(new ViewModel());
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-07T09:56:07.677

我认为 ko.applyBindings(obj); 应该写在视图模型下。

```
<!DOCTYPE html>
<html>
<head>
    <title>KO Examples</title>
    <script type='text/javascript' src='knockout-3.1.0.js'></script>
    <script type='text/javascript' src='jquery.js'></script>
    <script type='text/javascript'>
        var  obj = {
            first_name : 'Gazal Irish'
        };

    </script>

</head>
<body>
<div>
    <p>My name : <span data-bind="text: first_name"></span>
<p> 
</div>
<script type="text/javascript">

    ko.applyBindings(obj);
</script>

</body>
</html> 
```

# css - 另一个css垂直对齐

> ID：15090018
> 
> 赞同：0
> 
> 时间：2013-02-26T13:12:30.883
> 
> 标签：css, vertical-alignment

试图在不添加边距/填充的情况下使右侧的灰色框居中对齐：

```
<!DOCTYPE html>
<html>
 <head>
  <title></title>
  <style>
#frame { border: 1px solid #999; padding: 0.5em; width: 60%; margin: 0 auto; }  
#header { height: 40px; line-height: 40px; background-color: #eee; position: relative; width: 100%; }
h3 { margin: 0em; padding: 0em; }
h3 span { margin-left: 0.5em; }
a { float: right; text-align: right;  }
a span {  vertical-align: middle; background-color: #ccc; width: 1em; height: 1em; color: #fff; margin-right: 0.5em; display: inline-block; }
#content { height: 16em; }
  </style>
 </head>
 <body>
<div id="frame">
<div id="header">
<h3><span>Heading</span><a href="#"><span></span></a></h3>
</div>
<div id="content">
</div>
</div>
 </body>
</html> 
```

[http://jsfiddle.net/hotdiggity/4yGh8/](http://jsfiddle.net/hotdiggity/4yGh8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:02:39.940

有几种不同的方法可以解决这个问题，但没有一个是完美的。

我稍微修改了标记，以便更轻松地为以下内容编写选择器：

```
<div id="frame">
<div id="header">
<h3><span>Heading</span><span><a href="#"></a></span></h3>
</div>
<div id="content">
</div>
</div> 
```

# CSS 表

如果您有要包装的内容，结果可能不太好：

[http://jsfiddle.net/4yGh8/4/](http://jsfiddle.net/4yGh8/4/)

```
#frame { border: 1px solid #999; padding: 0.5em; width: 60%; margin: 0 auto; }  
#header { height: 40px; line-height: 40px; background-color: #eee; position: relative; width: 100%; }
h3 { margin: 0em; padding: 0em; display: table; width: 100%; }
h3 span { display: table-cell; vertical-align: middle; }
h3 span { padding: 0 0.5em; width: 100% }
h3 span:last-child { width: 1px; line-height: 1; }
a {  background-color: #ccc; width: 1em; height: 1em; color: #fff; display: block }
#content { height: 16em; } 
```

# 弹性盒

确保检查[http://caniuse.com/#search=flexbox](http://caniuse.com/#search=flexbox)以查看需要哪些前缀才能使其正常工作。

[http://jsfiddle.net/4yGh8/6/](http://jsfiddle.net/4yGh8/6/)（不包括前缀）

```
#frame { border: 1px solid #999; padding: 0.5em; width: 60%; margin: 0 auto; }  
#header { height: 40px; line-height: 40px; background-color: #eee; position: relative; width: 100%; }

h3 {
    margin: 0em;
    padding: 0em;
    display: flex;
    width: 100%;
    justify-items: space-between;
    align-items: center;
}

h3 span {
    margin: 0 .5em;
}

h3 span:first-child {
    flex: 1 1 auto;
}

a {  background-color: #ccc; width: 1em; height: 1em; color: #fff; display: block }
#content { height: 16em; } 
```

# 绝对定位

[http://jsfiddle.net/4yGh8/7/](http://jsfiddle.net/4yGh8/7/)

```
#frame { border: 1px solid #999; padding: 0.5em; width: 60%; margin: 0 auto; }  
#header { height: 40px; line-height: 40px; background-color: #eee; position: relative; width: 100%; }

h3 {
    margin: 0em;
    padding: 0em;
    position: relative;
}

h3 span {
    padding: 0 .5em;
}

h3 span:last-child {
    position: absolute;
    right: 0;
    top: 50%;
    margin-top: -.5em; /* half of the element's height */
}

a {  background-color: #ccc; width: 1em; height: 1em; color: #fff; display: block }
#content { height: 16em; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:21:31.993

你可以做的2件事。

1.  添加另一个框 en 限制在宽度上，直到您的块位于中间并向右浮动

2.  使用边距和填充

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:21:39.607

您只需要添加`position:relative`到 your `#frame`，然后添加`position:absolute;top:0;bottom:0; margin:auto;`到 yout `#header`。我编辑了你的[小提琴](http://jsfiddle.net/4yGh8/3/)

# android - 如何使用 Android SDK 或 NDK 方法裁剪视频

> ID：15090019
> 
> 赞同：0
> 
> 时间：2013-02-26T13:12:31.840
> 
> 标签：android, video, android-ndk

我有一个非常宽的视频，我试图在显示器中裁剪一部分，我试图找到一种方法，也许可以获取该视频的原始分辨率的位图，然后用它做我喜欢的事情（即移动视频从一边到另一边）。我希望能够观看放置在屏幕上的调整大小的图像，就好像视频被裁剪一样。我想这可以用[getDrawingCache 之](http://developer.android.com/reference/android/view/View.html#getDrawingCache%28%29)类的东西来完成，但我没有得到我正在寻找的完整分辨率。有谁知道解决这个问题的方法？

编辑：我找到了 videoview 的最新[源文件](http://www.netmite.com/android/mydroid/frameworks/base/core/java/android/widget/VideoView.java)，所以我将看看编辑效果如何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:37:31.533

您可以简单地在比实际显示更大的表面上渲染视频，然后操纵该视图的位置和裁剪。

# jquery - 触发 change() 事件以刷新选择框会导致重新触发实时更改事件

> ID：15090022
> 
> 赞同：0
> 
> 时间：2013-02-26T13:12:39.400
> 
> 标签：jquery, events, onchange

我正在做的事情很简单，所以我可能做错了。

我有一个简单的选择框作为表格的过滤器。我有一个重置过滤器的按钮。

```
$("#package").live('change', function()
{   
    filterPackage = $("#package").val();

    $.ajax({url: 'ajaxAllGroups.php?filterPackage='+filterPackage, cache: false, success: function(main)
    {
        $('#fullPartsList').html(main);
    }});
});

function unfilter()
{
    $.ajax({url: 'ajaxAllGroups.php?filterPackage=0', cache: false, success: function(main)
    {
        $('#fullPartsList').html(main); // Send ajax content to table

        $('#package').val(0); // Reset option to default
        $("#package").change(); // Force visual change to select box
    }});
} 
```

如您所见，重置按钮将选择选项设置回零，并且我触发了选择上的 change() 函数，以使更改应用于选择框。

一切正常，但仅视觉更改会触发上面的实时更改功能，这会导致第二次不必要的 ajax 调用。

我考虑过使用真/假变量来执行此操作以使其运行一次，但无法让该变量在正确的时间设置真/假，但我相信有一种更简单的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:19:11.597

为什么不在实时操作处理程序中添加一个简单的检查以排除对值 0 的调用。

```
if(filterPackage!=0)
{
    $.ajax({url: 'ajaxAllGroups.php?filterPackage='+filterPackage, cache: false, success: function(main)
    {
        $('#fullPartsList').html(main);
    }});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:18:41.830

```
$(document).on('change', '#package', function() {
    doFilter(this.value);
});

function doFilter(pkg) {
    $.ajax({
        url : 'ajaxAllGroups.php',
        data: {filterPackage: pkg}
    }).done(function(main) {
        $('#fullPartsList').html(main);
    });
}

function unfilter() {
    $('#package').val(0);
    doFilter(0);
} 
```

# eclipse - 您可以使用 eclipse 运行配置将文件推送到模拟器吗？

> ID：15090025
> 
> 赞同：0
> 
> 时间：2013-02-26T13:12:44.760
> 
> 标签：eclipse, android-emulator, run-configuration

基本上我正在做一些数据库工作，我需要在每次启动之前将数据库的干净副本推送到模拟器。在每次运行之前从 DDMS 执行此操作有点乏味，因此我试图找出一种将其包含在运行配置中的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:51:39.477

如果您转到该`Android-SDK\platform-tools`文件夹​​，`adb.exe`您可以从命令行使用该程序将文件推送到 AVD。

例子：`adb push [filename] [targetlocation]`

# c# - 未经证实 确保结合接口引用另一个属性

> ID：15090033
> 
> 赞同：9
> 
> 时间：2013-02-26T13:13:26.797
> 
> 标签：c#, .net, code-contracts

假设以下代码：

```
[ContractClass(typeof(ICC4Contract))]
public interface ICC4
{
    bool IsFooSet { get; }
    string Foo { get; }
}

public class CC4 : ICC4
{
    private string _foo;

    public bool IsFooSet { get { return Foo != null; } }

    public string Foo { get { return _foo; } }
}

[ContractClassFor(typeof(ICC4))]
public abstract class ICC4Contract : ICC4
{
    public bool IsFooSet
    {
        get
        {
            Contract.Ensures((Contract.Result<bool>() && Foo != null)
                             || !Contract.Result<bool>());
            return false;
        }
    }

    public string Foo
    {
        get
        {
            Contract.Ensures((Contract.Result<string>() != null && IsFooSet)
                             || !IsFooSet);
            return null;
        }
    }
} 
```

合同试图说：

1.  `IsFooSet``true`如果`Foo`不是，将返回`null`。
2.  `Foo``null`如果`IsFooSet`返回则不返回`true`。

这几乎可以工作。
但是，我在 上得到一个“确保未经证实” `return _foo;`，因为检查员没有意识到这`Foo`将始终等于`_foo`。

使用设置器更改`Foo`为自动属性`private`会删除该警告，但我不想这样做（我不喜欢使用私有设置器的自动属性）。

**`_foo`在保留字段的同时，我必须在上面的代码中进行哪些更改才能使警告消失？**

以下不起作用：

1.  更改`IsFooSet`为使用`_foo`而不是`Foo`. 这将导致额外的“确保未经证实” `IsFooSet`。
2.  添加一个不变量`Foo == _foo`。这将导致隐式默认构造函数出现“不变的未证明”。此外，在真正的代码库上，静态检查器的处理时间会高很多。
3.  根据[这个答案](https://stackoverflow.com/a/3730682/572644)添加`Contract.Ensures(Contract.Result<string>() == _foo);`到 getter不会改变任何东西。`Foo`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T11:31:08.930

您可以使用短路来简化条件，这出于某种原因：

```
[ContractClassFor(typeof(ICC4))]
public abstract class ICC4Contract : ICC4
{
    public bool IsFooSet
    {
        get
        {
            Contract.Ensures(!Contract.Result<bool>() || Foo != null);
            return false;
        }
    }

    public string Foo
    {
        get
        {
            Contract.Ensures(!IsFooSet || Contract.Result<string>() != null);
            return null;
        }
    }
} 
```

# methods - Go中的方法图

> ID：15090037
> 
> 赞同：8
> 
> 时间：2013-02-26T13:13:39.743
> 
> 标签：methods, go

在某些情况下，我有几种方法（如添加、删除等）。然而，随着时间的推移，案例的数量正在增加，而我的开关案例也越来越长。所以我想我会创建一个方法图，比如[Go map of functions](https://stackoverflow.com/questions/6769020/go-map-of-functions)；这里*函数*的映射是微不足道的。但是，是否可以在 Go中创建*方法映射？*

当我们有一个方法时：

```
func (f *Foo) Add(a string, b int) { } 
```

下面的语法创建编译时错误：

```
actions := map[string]func(a, b){
        "add": f.Add(a,b),
} 
```

是否可以在 Go 中创建方法映射？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T13:35:04.803

是的。目前：

```
actions := map[string]func(a string, b int){
        "add": func(a string, b int) { f.Add(a, b) },
} 
```

稍后：见 guelfi 提到的 go11func 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:25:40.643

目前无法将接收器和方法存储在单个值中（除非将其存储在结构中）。这目前正在进行中，它可能会随着 Go 1.1 的变化而改变（参见[http://golang.org/s/go11func](http://golang.org/s/go11func)）。

但是，您可以将方法分配给函数值（没有接收器）并稍后将接收器传递给该值：

```
package main

import "fmt"

type Foo struct {
    n int
}

func (f *Foo) Bar(m int) int {
    return f.n + m
}

func main() {
    foo := &Foo{2}
    f := (*Foo).Bar
    fmt.Printf("%T\n", f)
    fmt.Println(f(foo, 42))
} 
```

这个值可以像其他任何东西一样存储在地图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-05T01:04:18.393

您可以使用方法表达式执行此操作：

[https://golang.org/ref/spec#Method_expressions](https://golang.org/ref/spec#Method_expressions)

但是，这使得函数将接收者作为第一个参数：

```
actions := map[string]func(Foo, string, int){
  "add": Foo.Add
} 
```

`func(*Foo, string, int)`同样，您可以使用签名获得一个函数`(*Foo).Add`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-06T01:45:24.353

如果您想使用指针类型 Foo 作为接收者，例如：

```
func (f *Foo) Add(a string, b int) { } 
```

然后您可以将字符串映射到 (*Foo, string, int) 的函数，如下所示：

```
var operations = map[string]func(*Foo, string, int){
    "add": (*Foo).Add,
    "delete": (*Foo).Delete,
} 
```

然后你会用它作为：

```
var foo Foo = ...
var op string = GetOp() // "add", "delete", ...
operations[op](&foo, a, b) 
```

where`GetOp()`以字符串形式返回操作，例如来自用户输入。 `a`并且`b`是方法的字符串和 int 参数。

这假定所有方法都具有相同的签名。它们也可以具有相同类型的返回值。

也可以使用`Foo`as receiver 而不是`*Foo`. 在这种情况下，我们不必在地图中取消引用它，我们通过`foo`而不是`&foo`.

# php - PHP SESSIONS、COOKIES 和记住我功能

> ID：15090038
> 
> 赞同：-1
> 
> 时间：2013-02-26T13:13:43.887
> 
> 标签：php, session, cookies

我有以下代码，当用户登录时，他们会看到两个文本框和一个复选框。

设置三个 cookie`username`和所有工作`password`以及`remember`登录脚本本身都非常好（我很欣赏在 cookie 中存储散列密码不是最佳做法，但现在它可以做到）。

但是会发生什么，是用户在他们已经登录时重新访问`login.php`页面（这个）的 id，由于未满足 $_POST 条件，因此正在执行下面的行，因此 cookie 被一一删除。我怎样才能防止这种情况发生。此外，任何清理代码的建议都将不胜感激，因为我无疑会以大量重复代码告终。谢谢

`snippet from the 'login.php' page below`

```
} elseif (!$_POST['remember']) {
    $past = time() - 100;
    if (isset($_COOKIE['remember'])) {
        setcookie('remember', '', $past);
    } elseif (isset($_COOKIE['username'])) {
        setcookie('username', '', $past);
    } elseif (isset($_COOKIE['password'])) {
        setcookie('password', '', $past);
    }
} 
```

`login.php`

```
<?php
session_start();
include("includes/config.php");

?>
<!DOCTYPE html>
<html>
<head>
    <title>Login</title>
</head>
<body>
<?php

$odb = new PDO("mysql:host=" . DB_SERVER . ";dbname=" . DB_NAME, DB_USER, DB_PASS);

$username = "";
$password = "";

if (isset($_COOKIE['username']) && isset($_COOKIE['password'])) {

    $username = $_COOKIE['username'];
    $password = $_COOKIE['password'];

} elseif (isset($_POST['username'])) {

    $username = $_POST['username'];
    $password = $_POST['password'];
    $password = md5(DB_SALT.$password);

}

$sql = "SELECT * from tblMembers WHERE username = :username";
$query = $odb->prepare($sql);
$query->execute(array(":username" => $username));
$results = $query->fetchAll();
if($results !== FALSE && $query->rowCount()>0) {
    if($results[0]['passwordHash'] == $password) {
        $_SESSION['username'] = $username;
        $_SESSION['userID'] = $results[0]['userID'];

        if($_POST['remember']) {
            $month = time() + (60 * 60 * 24 * 30);
            setcookie('remember', $_POST['username'], $month);
            setcookie('username', $_POST['username'], $month);
            setcookie('password', $results[0]['passwordHash'], $month);
        } elseif (!$_POST['remember']) {
            $past = time() - 100;
            if (isset($_COOKIE['remember'])) {
                setcookie('remember', '', $past);
            } elseif (isset($_COOKIE['username'])) {
                setcookie('username', '', $past);
            } elseif (isset($_COOKIE['password'])) {
                setcookie('password', '', $past);
            }
        }

        header("Location: "."index.php");
    } else {
        echo "password incorrect";
    }
}
?>
<form action="<?php echo $_SERVER['PHP_SELF']?>" method="post">
Username:&nbsp;
<?php
if(isset($_COOKIE['username'])) {
    echo "<input type=\"text\" id=\"username\" name=\"username\" maxlength=\"40\" value=".$_COOKIE['username'].">";
} else {
    echo "<input type=\"text\" id=\"username\" name=\"username\" maxlength=\"40\" value=\"\">";
}
?>
Password:&nbsp;<input type="password" id="password" name="password" maxlength="50">
Remember Me:&nbsp;
<?php
if(isset($_COOKIE['remember'])) {
    echo "<input type=\"checkbox\" id=\"remember\" name=\"remember\" checked=\"checked\">";
} else {
    echo "<input type=\"checkbox\" id=\"remember\" name=\"remember\">";
}
?>
<input type="submit" id="submit" name="submit" value="Log In">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:19:04.623

您的代码确切地说应该发生这种情况。在第一次请求之后，`remember`将不再设置 POST 参数，因此 if 语句的计算结果为`true`。然后它将删除第一个cookie。下次它将删除第二个，因为第一个已经不存在了。

也许你应该替换这一行：

```
elseif (!$_POST['remember']) { 
```

有了这个：

```
elseif (!$_POST['remember'] && !$_COOKIE['remember']) { 
```

你应该去掉`elseif`那里的 s，因为你可能想删除所有的 cookie。只要放`if`，它应该如你所愿。

附带说明：`!$var`不是检查是否设置了值的正确方法。改为使用`!isset($var)`。

# python - 如果每个元组中的第二项是重复项，如何从元组列表中删除元素？

> ID：15090039
> 
> 赞同：3
> 
> 时间：2013-02-26T13:13:44.073
> 
> 标签：python, list, sorting, duplicates, tuples

如果每个元组中的第二项是重复项，如何从元组列表中删除元素？

例如，我有一个按第一个元素排序的列表，如下所示：

```
alist = [(0.7897897,'this is a foo bar sentence'),
(0.653234, 'this is a foo bar sentence'),
(0.353234, 'this is a foo bar sentence'),
(0.325345, 'this is not really a foo bar'),
(0.323234, 'this is a foo bar sentence'),] 
```

期望的输出离开具有最高第一项的元组，应该是：

```
alist = [(0.7897897,'this is a foo bar sentence'),
(0.325345, 'this is not really a foo bar')] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T13:16:17.677

如果您`alist`已经按第一个元素从高到低排序：

```
alist = [(0.7897897,'this is a foo bar sentence'),
(0.653234, 'this is a foo bar sentence'),
(0.353234, 'this is a foo bar sentence'),
(0.325345, 'this is not really a foo bar'),
(0.323234, 'this is a foo bar sentence'),]

seen = set()
out = []
for a,b in alist:
    if b not in seen:
        out.append((a,b))
        seen.add(b) 
```

`out`就是现在：

```
[(0.7897897, 'this is a foo bar sentence'),
 (0.325345, 'this is not really a foo bar')] 
```

# macos - Emacs + nRepl + ClojureMode 上的组合键

> ID：15090041
> 
> 赞同：0
> 
> 时间：2013-02-26T13:13:52.363
> 
> 标签：macos, emacs, clojure, nrepl

我是 Emacs + Lein + nRepl + ClojureMode 组合的新手，我似乎不知道为什么我不能在 clojure 程序缓冲区中运行 Cc C-, 组合键。它根本不需要 C-,。其他快捷方式，例如 Cc Ck 工作得很好。

我在 Mac OS X Mountain Lion 上使用来自 Terminal OS X 的 Emacs，如果有人可能觉得这很有用的话。

谢谢你。

# javascript - 我的代码上的地理位置不起作用

> ID：15090047
> 
> 赞同：-1
> 
> 时间：2013-02-26T13:14:28.167
> 
> 标签：javascript

我正在尝试学习使用 javascript 使用地理位置。但是，脚本并没有像我想象的那样工作。下面是我的代码：

```
<!doctype html>
<html>
<title> Testing Geolocation</title>
<head>
  <script>
    function displayLocation(){
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;
    var div = document.getElementById("myLocation");
    div.innerHTML =" You are at Latitude "+latitude+" and longitude "+longitude);}          
    window.onload = getMyLocation;}
    function getMyLocation{
    if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(displayLocation);}
    else{
    alert("Oops! Geolocation function not supported");}

</script>
</head>
<body>
<div id="myLocation">
Your location will go here.
</div>
</body>
</html> 
```

您好，改正错字后，脚本仍然无法正常工作。即纬度和经度没有显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:05:55.567

将参数“位置”添加到您的 displayLocation 函数。

UPD：..还有一些错别字。您是否使用 Chrome/FF 控制台进行错误跟踪？尝试这个：

```
<script>
function displayLocation(position){
  var latitude = position.coords.latitude;
  var longitude = position.coords.longitude;
  var div = document.getElementById('myLocation');
  div.innerHTML = "You are at Latitude "+latitude+" and longitude "+longitude;
}          

function getMyLocation(){
    if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition(displayLocation);
    } else {
        alert('Oops! Geolocation function not supported');
    }
}

getMyLocation();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:59:10.340

您的`getMyLocation`函数缺少 () ，并且该函数缺少 final `}`（并且`}`在 window.onload 行之后还有一个额外的）：

```
<!doctype html>
<html>
<title> Testing Geolocation</title>
<head>
<script>
    function displayLocation(position){
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        var div = document.getElementById("myLocation");
        div.innerHTML =" You are at Latitude "+latitude+" and longitude "+longitude;}          

    function getMyLocation(){
        if(navigator.geolocation){
            navigator.geolocation.getCurrentPosition(displayLocation);}
        else{
            alert("Oops! Geolocation function not supported");}
    }

window.onload = getMyLocation;
</script>
</head>
<body>
<div id="myLocation">
Your location will go here.
</div>
</body>
</html> 
```

# f# - F# 中的采样：Set 是否足够？

> ID：15090049
> 
> 赞同：2
> 
> 时间：2013-02-26T13:14:34.680
> 
> 标签：f#, set, sampling

我有一系列项目，我想从中取样。

我的印象是 Set 是一个很好的采样结构，在折叠中我会返回原始或修改后的集合，而检索到的元素会丢失，这取决于我是否想要替换 not。但是，似乎没有直接从 Set 中检索元素的方法。

有什么我想念的吗？或者我应该使用一组索引，以及一个随机开始`position < Set.count`并上升直到找到一个成员的代理函数？

也就是说，沿着这条线

```
module Seq =
    let modulo (n:int) start = 
        let rec next i = seq { yield (i + 1)%n ; yield! next (i+1)}
        next start

module Array =
    let Sample (withReplacement:bool) seed (entries:'T array) = 
        let prng, indexes = new Random(seed), Set(Seq.init (entries |> Array.length) id)
        Seq.unfold (fun set  -> let N = set |> Set.count
                                let next = Seq.modulo N (prng.Next(N)) |> Seq.truncate N |> Seq.tryFind(fun i -> set |> Set.exists ((=) i))
                                if next.IsSome then
                                    Some(entries.[next.Value], if withReplacement then set else Set.remove next.Value set)
                                else
                                    None) 
```

编辑：积极跟踪我给的东西，而不是跟踪我仍然可以给的东西，这会使它更简单、更有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T13:47:09.307

对于*没有*替换的采样，您可以只置换源序列并获取您想要采样的任何元素

```
let sampleWithoutReplacement n s =
    let a = Array.ofSeq s
    seq { for i = a.Length downto 1 do
              let j = rnd.Next i
              yield a.[j]
              a.[j] <- a.[i - 1] }
    |> Seq.take n 
```

要进行替换采样*，*只需从源序列中选择一个随机元素 n 次

```
let sampleWithReplacement n s =
    let a = Array.ofSeq s
    Seq.init n (fun _ -> a.[rnd.Next(a.Length)]) 
```

然而，这些可能不是拥有大量数据集的最有效方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T19:54:43.977

继续我们的评论...如果您想随机采样一个序列而不将整个事物放入内存中，您可以生成一组随机索引，其大小与您想要的样本大小（与您已有的没有太大不同）：

```
let rand count max = 
  System.Random() 
    |> Seq.unfold (fun r -> Some(r.Next(max), r))
    |> Seq.distinct
    |> Seq.take count
    |> set

let takeSample sampleSize inputSize input =
  let indices = rand sampleSize inputSize
  input
    |> Seq.mapi (fun idx x -> 
      if Set.contains idx indices then Some x else None)
    |> Seq.choose id

let inputSize = 100000
let input = Seq.init inputSize id
let sample = takeSample 50 inputSize input
printfn "%A" (Seq.toList sample) 
```

# sql-server - 我可以使用插入设置 SQL Server 中 ID 列的值吗？

> ID：15090052
> 
> 赞同：0
> 
> 时间：2013-02-26T13:14:37.780
> 
> 标签：sql-server, entity-framework

如果我有下表定义：

```
CREATE TABLE [dbo].[Application] (
    [ApplicationId]   INT            IDENTITY (1, 1) NOT NULL,
    [Name] NVARCHAR (MAX) NULL,
    CONSTRAINT [PK_dbo.Application] PRIMARY KEY CLUSTERED ([ApplicationId] ASC)
); 
```

是否可以插入我自己的测试数据并覆盖标识列？我问的原因是因为我需要像这样填充几个表，并且我想获取每个表中的 ID 列以匹配外键？

如果这是不可能的，那么我可以插入数据然后将其更改为标识列吗？如果有人能给我一个例子，我会很高兴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:16:28.483

```
SET IDENTITY_INSERT Application ON

INSERT INTO Application(ApplicationId, Name)
VALUES (3, 'Third Row')

SET IDENTITY_INSERT Application OFF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:16:39.623

```
SET IDENTITY_INSERT Application ON

[Do your insert]

SET IDENTITY_INSERT Application OFF 
```

# javascript - pnotify 拒绝工作

> ID：15090058
> 
> 赞同：4
> 
> 时间：2013-02-26T13:15:08.527
> 
> 标签：javascript, jquery

[我从Pines Notify](http://pinesframework.org/pnotify)下载了 pnotify jquery 插件

简单地说，它告诉我添加所需的 js 和 css 文件，并且在准备好文档时，以下应该可以工作！

```
$(document).ready(function() {
    $.pnotify({
        type: 'error',
        title: 'Errors found in form',
        text: 'Please check all form data, some items were invalid.',
        opacity: 0.95,
        hide:false,
        history: false,
        sticker: false
    });    
}); 
```

但它只是不断给我错误

> 未捕获的类型错误：对象函数 (e,t){return new v.fn.init(e,t,n)} 没有方法“pnotify”

最愚蠢的是，即时视觉 VS 2012 和在开发环境中它向我展示了 pnotify 作为 '$' 作为智能感知的功能！

我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-25T21:52:18.457

with PNotify2.01, you can use it with reguirejs

main.js:

```
requirejs.config({
   paths: {
      pnotify: "/Static/plugins/pnotify/pnotify.custom.min"
   }
}); 
```

Notify.js

```
define(['pnotify'], function () {
  return {
     SimpleNotice: function () {
        return new PNotify('Check me out! I\'m a notice.');
     }
  };
}); 
```

I copy this from my production code (Durandal framework)

# oracle - 带有变量表的 MULE DB 查询不起作用

> ID：15090060
> 
> 赞同：1
> 
> 时间：2013-02-26T13:15:16.270
> 
> 标签：oracle, mule

我有以下情况：我在流变量 destTable 中有一个表的名称，并希望将其放入简单查询中：

```
SELECT * FROM #[destTable] 
```

我完全确定该表存在，调用查询的用户可以访问它，并且我的变量中的名称是正确的并且是字符串类型 - 我确信因为如果我明确输入表的名称，它一切正常。我得到的错误是：

```
Root Exception stack trace:
java.sql.SQLSyntaxErrorException: ORA-00903: invalid table name
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:457)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:400)
    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:926)
    + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything) 
```

该错误表明该名称无效，但正如我所说 - 我已经通过记录器等检查该名称（T_ORG）不包含空格或任何不可打印的字符。对于我遗漏了什么或做错了什么，或者可能是 Mule 软件本身的问题，我恳请您迅速做出回应？

附加信息 1：没有“#[]”的查询具有语法着色（主要是棕色和黑色）；但是，如果我将 #[] 放在 FROM 子句之后，那么它之后的所有内容都会变成浅蓝色，就好像它是一个注释或以其他方式被忽略了一样。希望这有助于定位问题。

附加信息 2：重现错误的示例配置（假设您有 Oracle XE 等）：

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:tracking="http://www.mulesoft.org/schema/mule/ee/tracking" xmlns:jms="http://www.mulesoft.org/schema/mule/jms" xmlns:http="http://www.mulesoft.org/schema/mule/http"
    xmlns:mulexml="http://www.mulesoft.org/schema/mule/xml"
    xmlns:jdbc-ee="http://www.mulesoft.org/schema/mule/ee/jdbc" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="EE-3.3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/xml http://www.mulesoft.org/schema/mule/xml/current/mule-xml.xsd 
http://www.mulesoft.org/schema/mule/ee/jdbc http://www.mulesoft.org/schema/mule/ee/jdbc/current/mule-jdbc-ee.xsd 
http://www.mulesoft.org/schema/mule/jms http://www.mulesoft.org/schema/mule/jms/current/mule-jms.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/ee/tracking http://www.mulesoft.org/schema/mule/ee/tracking/current/mule-tracking-ee.xsd ">
    <jdbc-ee:connector name="Database" dataSource-ref="cdf" validateConnections="true" queryTimeout="-1" pollingFrequency="0" doc:name="Database"/>
    <jdbc-ee:oracle-data-source name="cdf" user="CDF" password="CDF" url="jdbc:oracle:thin:@//localhost:1521/xe" transactionIsolation="UNSPECIFIED" doc:name="Oracle Data Source"/>

    <flow name="sampleFlow" doc:name="sampleFlow">
        <http:inbound-endpoint exchange-pattern="one-way" host="localhost" port="8082" doc:name="HTTP"/>
        <set-variable variableName="myVar" value="T_ORG" doc:name="Variable"/>
        <jdbc-ee:outbound-endpoint exchange-pattern="one-way" queryKey="selectAll" queryTimeout="-1" connector-ref="Database" doc:name="Database">
            <jdbc-ee:query key="selectAll" value="SELECT * FROM #[myVar]"/>
        </jdbc-ee:outbound-endpoint>
    </flow>
</mule> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:09:12.977

只有查询的参数可以是动态的（即 Mule 表达式）。表在查询中不能是动态的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:01:50.783

经过长时间的停顿后，我偶然回到了这个主题……实际上，您可以使整个查询动态化（至少从 Mule 3.3.2 开始）；我在这里找到了线索：[Mule 中的非常动态的 JDBC 查询](https://stackoverflow.com/questions/9870038/very-dynamic-jdbc-query-in-mule)

这里是一个示例项目（您需要在本地运行 ActiveMQ 服务器和本地 Oracle DB；或编辑代码以使其工作）：

[http://pastebin.com/PcPz2LZy](http://pastebin.com/PcPz2LZy)

希望它可以帮助某人，因为它确实帮助了我！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-21T06:49:28.917

您是否尝试过将名称定义为 app.properties 文件中的属性，然后使用它？像这样的东西`<jdbc-ee:query key="selectAll" value="SELECT * FROM ${tableName}"/>`，其中“tableName”是 app.properties 文件中定义的值。

# java - 发送未知类的 Java 对象

> ID：15090069
> 
> 赞同：2
> 
> 时间：2013-02-26T13:15:53.177
> 
> 标签：java, classnotfoundexception, objectoutputstream, objectinputstream

搜索了很长时间，但没有找到任何答案：

我有一个服务器，我有一个客户端。服务器应该通过`ObjectInputStream`和接收对象`ObjectOutputStream`。这已经适用于`class`服务器上已知的任何 . 现在我想发送一个`Object`服务器`class`不知道的。他只知道那个类的接口。这显然失败了......

我怎样才能避免`ClassNotFoundException`？我认为接口是解决方案。我只想通过接口访问我知道的功能，但是Java无论如何都希望拥有该类。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:19:49.030

There is no way. To be able to execute a method on an object, you need to have the byte-code of the concrete class of the object. Its interface isn't sufficient.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:20:58.400

只有当 JVM 加载了这个类时，某个类的对象才可能存在于 JVM 中。可能与其发送未知类型的对象，不如发送一些描述对象的众所周知的数据结构，即 HashMap。所以，而不是这样做：

```
MySecretClass o = new MySecretClass ();
o.setFoo ("Hello, World!");
o.setBar (123);
send (o); 
```

您执行以下操作：

```
Map o = new HashMap ();
o.put ("foo", "Hello, World!");
o.put ("bar", 123);
send (o); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:57:36.560

您需要服务器上特定类的字节码，因此它不会像您想象的那样工作。

您可以发送客户端和服务器都知道的类的代理对象。代理将包含服务器未知的类的对象，其类将作为字节数组存储在代理中。当代理对象被反序列化时（使用带有从客户端传递的类定义的字节数组），代理类将是**Externalizable**并使用**Classloader.defineClass**在服务器 JVM 中动态创建未知类。它不会很快，但可以进行优化，例如不发送和加载类的定义两次等。

如果您需要直接在从客户端传递的对象上调用接口特定方法，请让代理实现您的接口并在代理对象（java.lang.reflect.Proxy/InvocationHandler）上使用动态代理模式将调用传递给代理以前未知的类的对象。

这相当复杂，但我相信可以这样做。

# jquery - 如果 url 中存在模式 id，如何在页面打开后立即打开引导模式 #

> ID：15090084
> 
> 赞同：4
> 
> 时间：2013-02-26T13:16:33.283
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

`http://www.website.com/page/#delete-page`当用户打开一个 url并且该页面有一个具有相同 id 的 twitter 引导模式时，是否有任何方法可以`delete-page`立即打开。

所以理论上用户打开网址，页面加载并在其成功加载后打开模式（即如果它存在，如果不存在则什么都不会发生）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T13:39:58.943

你需要什么？

1.  从 URL 中获取哈希：[如何使用 JavaScript 检查 URL 中的#hash？](https://stackoverflow.com/questions/298503/how-can-you-check-for-a-hash-in-a-url-using-javascript)
2.  获得哈希后，只需使用哈希的 id 选择器获取元素，然后：

    ```
    $(hash).modal('show') 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-30T22:38:33.437

尝试这样的事情，它应该工作。

```
 $(document).ready(function() {

    if(window.location.href.indexOf('#myModal') != -1) {
    $('#myModal').modal('show');
  }

}); 
```

或者

```
$(document).ready(function() {

if(window.location.href==='mysite.com/#myModal'){
 $('#myModal').modal('show');
}

} 
```

# c# - 如何隐藏 dataGridView 中的特定列？

> ID：15090093
> 
> 赞同：14
> 
> 时间：2013-02-26T13:16:52.253
> 
> 标签：c#, winforms

如何在`DataGridview`能够使用其值的同时隐藏特定的列及其标题？（只是没有显示）。以下代码不起作用。

```
 gridview.Rows[e.RowIndex].Cells[11].Visible = false; 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-26T13:20:56.307

试试这个：

```
gridview.Columns["ColumnName"].Visible = false; 
```

[隐藏 Windows 窗体 DataGridView 控件中的列](http://msdn.microsoft.com/en-us/library/0c24a0d7.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-21T08:19:55.383

这是100％正确的解决方案...... `this.dataGridView1.Columns[0].Visible = false;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:36:55.503

将列名添加到`DataKeyNames`网格视图的...

```
<asp:gridview id="GridView1" runat="server" datakeynames="ColumnName" onselectedindexchange="GridView1_SelectedIndexChanged"></asp:gridview> 
```

然后，您可以访问后面代码中的数据键...

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    textbox.Text = GridView1.DataKeys[GridView1.SelectedIndex].Values["ColumnName"].ToString();
} 
```

`DataKeyNames`您可以通过逗号分隔来添加更多内容。然后，如果您不想，则根本不需要将该列添加`GridView`到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-03T08:47:22.097

如果你想隐藏gridview列，你应该有一个**条件**..

```
if(userlevel != 'Administrator')
{
      GridView.Columns["ColumnName"].Visible = false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-24T13:59:28.473

以你认为合适的方式称呼它。无论是否可见，应用程序仍然可以使用数据。

```
private void showHideGridColumns(bool show)
{
    List<String> lstColNames = new List<string>();
    lstColNames.Add("Column1");
    lstColNames.Add("Column2");
    lstColNames.Add("Column3");
    lstColNames.Add("Column4");
    foreach (DataGridViewColumn Col in DataGridView1.Columns)
    {
        if (!lstColNames.Contains(Col.Name.ToString()))
        {
            Col.Visible = show;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2021-04-20T11:48:28.530

```
GridView.Columns[index of Column].Visible = false; 
```

# c# - Not getting exceptions raised with namespace from servicestack filter

> ID：15090095
> 
> 赞同：1
> 
> 时间：2013-02-26T13:16:58.157
> 
> 标签：c#, servicestack

I implemented a couple of filters a few months back and I set

```
[assembly: ContractNamespace("http://schemas.servicestack.net/types",  ClrNamespace = "My.NameSpace")] 
```

in my assembly and made sure all by DTOS are under the correct namespace "My.NameSpace".

If I raise an exception in my Service (using RestServiceBase) my exception is serialized correctly with the namespace set to "[http://schemas.servicestack.net/types](http://schemas.servicestack.net/types)" in the error response DTO.

If I raise an exception in the filter, then the namespace "[http://schemas.servicestack.net/types](http://schemas.servicestack.net/types)" is set in the error response DTO as above. All this is fine and worked.

However, for some reason today when an exception is raised in a filter the namespace is blank in the error response DTO. I am also getting the StackTrace element in the error response DTO set with my exception stack trace (it was blank when all was working).

Since my client checks for the namespace "[http://schemas.servicestack.net/types](http://schemas.servicestack.net/types)" all my error handling from exceptions in filters are not being shown correctly on the client.

Any ideas where I should check?

# jquery - jQuery动态传递元素的ID来限制slideToggle()的范围

> ID：15090096
> 
> 赞同：1
> 
> 时间：2013-02-26T13:16:59.853
> 
> 标签：jquery, slidetoggle

在下面的脚本中，我试图传入对父容器 ID 的引用，以便将 slideToggle 的范围限制为该元素的类匹配的子元素。

如何更改代码以传递 ID？问题是“ ***myID*** .extras”显然不是正确的语法。

```
jQuery(document).ready(function()
{
    jQuery(document).on('click','.toggleExtras', function(e){
        var myEl = jQuery(this).closest('.widget');
        var myID = jQuery(myEl).attr('id');
        jQuery('myID .extras').slideToggle();
        jQuery(this).text(function(el, old){
            return old == "Show Advanced Options" ? "Hide Advanced Options" : "Show Advanced Options";
        });
    });

}); 
```

HTML：

```
<div id="widget-43_my_box_cats-4" class="widget">   
    <div class="widget-top">
        <div class="widget-title-action"></div>
        <div class="widget-title"><h4>Widget Title<span class="in-widget-title"></span></h4></div>
    </div>

    <div class="widget-inside" style="display: block;">
        <form action="" method="post">
            <div class="widget-content">
                <p>
                    <label for="widget-my_box_cats-4-title">Title:</label>
                    <input class="widefat" id="widget-my_box_cats-4-title" name="widget-my_box_cats[4][title]" type="text" value="">
                </p>

                <fieldset><legend><span class="toggleExtras">Hide Advanced Options</span></legend> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:27:17.943

当您可以直接找到元素时，为什么要获取 ID，并绕圈子做很多事情：

```
jQuery(document).ready(function() {
    jQuery(document).on('click','.toggleExtras', function(e){

        jQuery(this).closest('.widget').find('.extras').slideToggle();

        jQuery(this).text(function(el, old){
            return old == "Show Advanced Options" ? "Hide Advanced Options" : "Show Advanced Options";
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:18:58.047

`jQuery('myID .extras').slideToggle();`应该`jQuery('#myID .extras').slideToggle();`

对于[id selecor](http://api.jquery.com/id-selector/)，您需要使用前缀`#`。`myID`是一个[元素选择器](http://api.jquery.com/element-selector/)，它将在其中查找带有标签名的元素`myID`

# sql-server - 有没有打开游标的 PostgreSQL “select * for update” 的 SQL Server 等价物

> ID：15090099
> 
> 赞同：2
> 
> 时间：2013-02-26T13:17:17.583
> 
> 标签：sql-server, locking

Postgresql 允许我在使用以下语法选择行时锁定行：

```
select id, amount from table where id = 1234 for update 
```

这使我可以更新行，同时确保也想要更新同一行的并发读取将获得更新和正确的结果。

基本上我可以做这样的事情（伪代码）：

```
begin transaction
select id, amount from table where id = 1234 for update
if(amount == new_amount) then
  delete from table where id = 1234;
else
  update table set amount = amount - new_amount where id = 1234
end
commit transaction 
```

Sql Server 中仅允许对 DECLARE CURSOR 使用相同的语法。有没有办法通过简单的选择来读取行，同时锁定它以进行更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:20:00.017

```
select * from T WITH (UPDLOCK) 
```

`WITH`提示非常灵活且设计精良。我猜它们比`for update`.

# javascript - 如何从 ListItem 调用 ListView

> ID：15090101
> 
> 赞同：0
> 
> 时间：2013-02-26T13:17:23.523
> 
> 标签：javascript, windows-8, visual-studio-2012, microsoft-metro, winjs

当我从右侧列表中的任何项目时，我想更新右侧`listview`此外，当我单击选择所有项目以选择右侧列表项而不是左侧项目时。

**换句话说，我想要做的是，当我单击左侧列表中的任何项目时，右侧列表将根据我调用的左侧项目更改为不同的列表**

![在此处输入图像描述](../Images/3a1b9f3ab1f98fe186ea4054bd59c49d.png)

这是我的 JS 代码

```
function selectionChangedHandler() {

    // Check for selection
    var selectionCount = listView.selection.count();
    if (selectionCount === 1) {

        // Only one item is selected, show the message
        // information for the item
        listView.selection.getItems().done(function (items) {
            // Print item data to the relevant message pane locations
            inboxMessage_Text.innerText = items[0].data.text;
            if (items[0].data.key == 1) {
                document.getElementById('listView4b2')
                        .innerHTML = '<ol><li>html2222 data</li></ol>';
            } else {
                document.getElementById('listView4b2')
                        .innerHTML = '<ol><li>html data</li></ol>';
            }
        });

    }

}
function selectAll() {
    WinJS.log && WinJS.log(" ", "sample", "status");
    listView.selection.selectAll();
}

function clearSelection() {
    WinJS.log && WinJS.log(" ", "sample", "status");
    listView.selection.clear();
} 
```

和 HTML 代码

```
<div id="listView4b"
    class="win-selectionstylefilled"
    data-win-control="WinJS.UI.ListView" 
    data-win-options="{ 
        itemDataSource: myToppingsData.dataSource, 
        itemTemplate: mediumListIconTextTemplate, 
        selectionMode: 'multi', 
        tapBehavior: 'toggleSelect', 
        layout: { type: WinJS.UI.GridLayout } 
    }"
></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:29:17.393

假设这`myToppingsData`是一个 WinJS.Binding.List，在`itemInvoked`左侧的处理程序中`WinJS.UI.ListView`使用[`createFiltered`](http://msdn.microsoft.com/en-us/library/windows/apps/hh700741.aspx).

然后，您可以`itemDataSource`将右侧的列表设置为此过滤列表数据源。

# git - .gitattributes 文件应该在提交中吗？

> ID：15090102
> 
> 赞同：13
> 
> 时间：2013-02-26T13:17:23.903
> 
> 标签：git, merge

我们正在与几个拥有 Mac 的人一起开展一个项目，而我正在 Windows 上运行。我们遇到了换行符的一些问题。

我在 GitHub 上读到可以添加以下内容：

```
# Set default behaviour, in case users don't have core.autocrlf set.
* text=auto

# Explicitly declare text files we want to always be normalized and converted
# to native line endings on checkout.
*.c text
*.h text

# Declare files that will always have CRLF line endings on checkout.
*.sln text eol=crlf

# Denote all files that are truly binary and should not be modified.
*.png binary
*.jpg binary 
```

进入 .git 属性

但是我应该将该文件提交到 GitHub，以便其他使用 Mac 的人获得相同的设置吗？

如果重要的话，我们正在编写网站。（PHP、JavaScript 文件等）。

郑重声明，我是唯一一个使用 Windows 的人......所以，是的，我能做什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T13:30:21.253

首先，我建议先阅读[文档](http://git-scm.com/book/ch7-2.html)。

`.gitattributes`它建议在存储库的根目录或本地文件夹中签入文件`.git`：`.git/info/attributes`.

后一个选项的影响可能最小（如果您是唯一的 Windows 用户）。

对于这种事情，我倾向于将责任放在团队中“喜欢与众不同”的任何人身上——例如，如果除了一个开发人员之外的所有人都在使用 Mac，而另一个开发人员正在使用 Windows，这*真的*应该取决于正在逆向整理的家伙。这没有恶意，只是公平的:-)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T09:39:34.030

我添加了这个：

```
# Set default behaviour, in case users don't have core.autocrlf set.
* text=auto

# Explicitly declare text files we want to always be normalized and converted
# to native line endings on checkout.
*.c text
*.h text

# Declare files that will always have CRLF line endings on checkout.
*.sln text eol=crlf

# Denote all files that are truly binary and should not be modified.
*.png binary
*.jpg binary 
```

并将其提交到 GitHub 服务器。因此，遇到此问题的每个人都解决了问题。

# c# - 有时使用 c# 从 hotmail 发送邮件失败

> ID：15090104
> 
> 赞同：0
> 
> 时间：2013-02-26T13:17:27.987
> 
> 标签：c#, email

我有 C# 代码来发送邮件。该代码适用于 gmail、yahoo 配置。但是对于hotmail，有时会发送邮件，有时不会发送邮件。我观察到 yahoo 邮件的响应时间比 gmail 更好。但是 hotmail 的响应与 yahoo、gmail 相比非常差。

会是什么原因？如何配置hotmail以获得良好的响应。

这是我发送邮件的代码：

```
 private void button2_Click(object sender, EventArgs e)
 {

            SmtpClient client = new SmtpClient();
            MailMessage message = new MailMessage();

        message.To.Add("user_name");
                message.From = new MailAddress("user_name");
                message.Subject = "Email Confirmation";
                message.BodyEncoding = System.Text.Encoding.UTF8;
                message.SubjectEncoding = System.Text.Encoding.UTF8;

    client.Port=587
    client.Host="smtp.live.com";

    System.Net.NetworkCredential nc = new System.Net.NetworkCredential("user_name", "password");
                if (mail_server == "smtp.gmail.com" || mail_server == "smtp.live.com")
                {
                    client.EnableSsl = true;
                }
                client.UseDefaultCredentials = false;
                client.Credentials = nc;

                Ping p = new Ping();
                bool result = false;
                int i = 10;
                do
                {

                    PingReply reply = p.Send("smtp.live.com", 587);
                    if (reply.Status == IPStatus.Success)
                    {
                        result = true;
                    } Thread.Sleep(500);
                    i--;
                } while (result == false && i != 0);

                if (result == true)
                {
                    client.Send(message);
                    MessageBox.Show("Email sent successfully");                    

                }
                else
                {
                    MessageBox.Show("Email not sent");

                }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:33:40.527

如果您尝试使用上述代码发送电子邮件，它显然无法发送它，我不知道您使用`Ping`该类发送电子邮件的原因是什么。

固定代码：

```
 SmtpClient client = new SmtpClient();
    MailMessage message = new MailMessage();

    message.To.Add("user_name");
    message.From = new MailAddress("user_name");
    message.Subject = "Email Confirmation";
    message.BodyEncoding = Encoding.UTF8;
    message.SubjectEncoding = Encoding.UTF8;

    client.Port = 587;
    client.Host = "smtp.live.com";

    NetworkCredential nc = new NetworkCredential("user_name", "password");
    string mail_server = "smtp.live.com";
    if (mail_server == "smtp.gmail.com" || mail_server == "smtp.live.com")
        {
            client.EnableSsl = true;
        }
        client.UseDefaultCredentials = false;
        client.Credentials = nc;

    try
    {
        client.Send(message);
    }
    catch (SmtpException exception)
    {
        Console.WriteLine(exception.Message);
    } 
```

# mysql - 获取最新的时间戳mysql

> ID：15090105
> 
> 赞同：0
> 
> 时间：2013-02-26T13:17:35.547
> 
> 标签：mysql

好的，所以我有一个表，它在名为“时间”的列中记录了它的更新时间。此列以标准 MySQL 日期时间格式记录。

我有以下查询选择最新日期：

```
SELECT * FROM table1 WHERE DATE(time) = ( SELECT MAX(DATE(time))FROM table1 ) 
```

我有另一个查询选择最新时间：

```
SELECT * FROM table1 WHERE TIME(time) = ( SELECT MAX(TIME(time))FROM table1 ) 
```

我需要的是一个同时提供日期和时间的工具，以便为我提供最近更新的记录。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:19:12.750

```
SELECT * FROM table1 order by time desc limit 1 
```

建议不要使用 time 作为列名，因为它是 MySQL 中的保留字，会导致问题和/或混淆。

此外，MySQL 可以自动维护记录上次更新的日期时间。将列声明为时间戳而不是日期时间以查看其工作原理。

# javascript - JavaScript Issue? Google Maps. infoWindows

> ID：15090107
> 
> 赞同：1
> 
> 时间：2013-02-26T13:17:43.003
> 
> 标签：javascript, html, google-maps, google-maps-markers, infowindow

The following code is placemarkers placed on a google map using JavaScript. My issue is that I wish to envoke a infoWindow upon mouse click on each placemarker but cannot get infoWindow to appear on more than the Alnwick Gardens entry.

I am convinced its a quick fix but cannot figure it out, nothing I have tried seems to work. Probably down to poor JavaScript skills.

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style type="text/css">
          html { height: 100%}
          body { height: 100%; margin: 0; padding: 0; font-family: Helvetica, Arial, sans-serif;font-size:10pt;}
          #map_canvas { height: 100% }

          #content {

          }
    </style>

    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
        function initialize() {
            var latlng = new google.maps.LatLng(55.140425,-1.643829);
            var settings = {
                zoom: 10,
                center: latlng,
                mapTypeControl: true,
                mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
                navigationControl: true,
                navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                mapTypeId: google.maps.MapTypeId.ROADMAP};
            var map = new google.maps.Map(document.getElementById("map_canvas"), settings);
            var contentString = '<div id="content">'+
                '<div id="siteNotice">'+
                '</div>'+
                '<h1 id="firstHeading" class="firstHeading">Alnwick Gardens</h1>'+
                '<div id="bodyContent">'+
                '<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>'+
                '</div>'+
                '</div>';
            var infowindow = new google.maps.InfoWindow({
                content: contentString
            });

            var companyImage = new google.maps.MarkerImage('images/logo.png',
                new google.maps.Size(100,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var companyShadow = new google.maps.MarkerImage('images/logo_shadow.png',
                new google.maps.Size(130,50),
                new google.maps.Point(0,0),
                new google.maps.Point(65, 50));

            var companyPos = new google.maps.LatLng(55.41535,-1.694795);

            var companyMarker = new google.maps.Marker({
                position: companyPos,
                map: map,
                icon: companyImage,
                shadow: companyShadow,
                title:"Alnwick Gardens",
                zIndex: 3});

            var trainImage = new google.maps.MarkerImage('images/logo.png',
                new google.maps.Size(100,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var trainShadow = new google.maps.MarkerImage('images/logo_shadow.png',
                new google.maps.Size(130,50),
                new google.maps.Point(0,0),
                new google.maps.Point(65, 50)
            );

            var trainPos = new google.maps.LatLng(54.881742,-1.6589);

            var trainMarker = new google.maps.Marker({
                position: trainPos,
                map: map,
                icon: trainImage,
                shadow: trainShadow,
                title:"Beamish Hall Hotel, County Durham",
                zIndex: 2
            });

            var parkingImage = new google.maps.MarkerImage('images/logo.png',
                new google.maps.Size(100,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var parkingShadow = new google.maps.MarkerImage('images/logo_shadow.png',
                new google.maps.Size(130,50),
                new google.maps.Point(0,0),
                new google.maps.Point(65, 50)
            );

            var parkingPos = new google.maps.LatLng(54.696009,-1.18378);

            var parkingMarker = new google.maps.Marker({
                position: parkingPos,
                map: map,
                icon: parkingImage,
                shadow: parkingShadow,
                title:"Borough Hall, Hartlepool",
                zIndex: 1
            });
            var trainImage = new google.maps.MarkerImage('images/logo.png',
                new google.maps.Size(100,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var trainShadow = new google.maps.MarkerImage('images/logo_shadow.png',
                new google.maps.Size(130,50),
                new google.maps.Point(0,0),
                new google.maps.Point(65, 50)
            );

            var trainPos = new google.maps.LatLng(54.741519,-1.519296);

            var trainMarker = new google.maps.Marker({
                position: trainPos,
                map: map,
                icon: trainImage,
                shadow: trainShadow,
                title:"Bowburn Hall",
                zIndex: 2
            });
            var trainImage = new google.maps.MarkerImage('images/logo.png',
                new google.maps.Size(100,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var trainShadow = new google.maps.MarkerImage('images/logo_shadow.png',
                new google.maps.Size(130,50),
                new google.maps.Point(0,0),
                new google.maps.Point(65, 50)
            );

            var trainPos = new google.maps.LatLng(54.987242,-1.802942);

            var trainMarker = new google.maps.Marker({
                position: trainPos,
                map: map,
                icon: trainImage,
                shadow: trainShadow,
                title:"Close House Golf Club",
                zIndex: 2
            });
            var trainImage = new google.maps.MarkerImage('images/logo.png',
                new google.maps.Size(100,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var trainShadow = new google.maps.MarkerImage('images/logo_shadow.png',
                new google.maps.Size(130,50),
                new google.maps.Point(0,0),
                new google.maps.Point(65, 50)
            );

            var trainPos = new google.maps.LatLng(55.040147,-1.817086);

            var trainMarker = new google.maps.Marker({
                position: trainPos,
                map: map,
                icon: trainImage,
                shadow: trainShadow,
                title:"Dissington Hall, Northumberland",
                zIndex: 2
            });
            var trainImage = new google.maps.MarkerImage('images/logo.png',
                new google.maps.Size(100,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var trainShadow = new google.maps.MarkerImage('images/logo_shadow.png',
                new google.maps.Size(130,50),
                new google.maps.Point(0,0),
                new google.maps.Point(65, 50)
            );

            var trainPos = new google.maps.LatLng(55.512687,-1.705022);

            var trainMarker = new google.maps.Marker({
                position: trainPos,
                map: map,
                icon: trainImage,
                shadow: trainShadow,
                title:"Doxford Hall, Northumberland",
                zIndex: 2
            });
            var trainImage = new google.maps.MarkerImage('images/logo.png',
                new google.maps.Size(100,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var trainShadow = new google.maps.MarkerImage('images/logo_shadow.png',
                new google.maps.Size(130,50),
                new google.maps.Point(0,0),
                new google.maps.Point(65, 50)
            );

            var trainPos = new google.maps.LatLng(54.773588,-1.57667);

            var trainMarker = new google.maps.Marker({
                position: trainPos,
                map: map,
                icon: trainImage,
                shadow: trainShadow,
                title:"Durham Castle",
                zIndex: 2
            });
            var trainImage = new google.maps.MarkerImage('images/logo.png',
                new google.maps.Size(100,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var trainShadow = new google.maps.MarkerImage('images/logo_shadow.png',
                new google.maps.Size(130,50),
                new google.maps.Point(0,0),
                new google.maps.Point(65, 50)
            );

            var trainPos = new google.maps.LatLng(54.935575,-1.608303);

            var trainMarker = new google.maps.Marker({
                position: trainPos,
                map: map,
                icon: trainImage,
                shadow: trainShadow,
                title:"Eslington Villa, Gateshead",
                zIndex: 2
            });
            var trainImage = new google.maps.MarkerImage('images/logo.png',
                new google.maps.Size(100,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var trainShadow = new google.maps.MarkerImage('images/logo_shadow.png',
                new google.maps.Size(130,50),
                new google.maps.Point(0,0),
                new google.maps.Point(65, 50)
            );

            var trainPos = new google.maps.LatLng(54.953396,-1.656384);

            var trainMarker = new google.maps.Marker({
                position: trainPos,
                map: map,
                icon: trainImage,
                shadow: trainShadow,
                title:"Federation Brewery, Gateshead",
                zIndex: 2
            });

            /*Example Tab Code*/

            var trainImage = new google.maps.MarkerImage('images/logo.png',
                new google.maps.Size(100,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var trainShadow = new google.maps.MarkerImage('images/logo_shadow.png',
                new google.maps.Size(130,50),
                new google.maps.Point(0,0),
                new google.maps.Point(65, 50)
            );

            var trainPos = new google.maps.LatLng(54.884735, -1.366491);

            var trainMarker = new google.maps.Marker({
                position: trainPos,
                map: map,
                icon: trainImage,
                shadow: trainShadow,
                title:"Example",
                zIndex: 2
            });

            /*Example Tab Code*/

            google.maps.event.addListener(companyMarker, 'click', function() {
                infowindow.open(map,companyMarker);
            });
        }
    </script>
</head>
<body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
</body>
 </html> 
```

Any help would be be hugely appreciated. Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:11:19.407

尝试为每个标记添加侦听器。例如，对于 companyMarker

```
var companyMarker = new   google.maps.Marker({
       position: companyPos,
       map: map,
       icon: companyImage,
       shadow: companyShadow,
       title:"Alnwick Gardens",
       zIndex: 3,
       listeners: {
        click: function(e){
           var infowindow = new google.maps.InfoWindow({
             content: contentString
           });
           infowindow.open(map, companyMarker);
        }
       }
}); 
```

它不是经过测试的解决方案。总结一下，您需要为每个标记添加点击事件。

# iphone - 如何通过单击条形按钮关闭弹出框

> ID：15090111
> 
> 赞同：0
> 
> 时间：2013-02-26T13:18:03.300
> 
> 标签：iphone, ios, objective-c, ios6, uipopovercontroller

嘿，我有一个我必须在其中显示弹出窗口。我可以轻松做到这一点。当显示其他类的弹出窗口时。此弹出窗口中有一个带有条形按钮“完成”的标题栏。我想通过单击完成按钮来关闭弹出窗口。

如何使用完成按钮关闭弹出框？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:24:58.400

您是否尝试过寻找解决方案？

```
-(void) onDoneButtonClick {
    [popover dismissPopoverAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:41:05.313

`- (void)dismissPopoverAnimated:(BOOL)animated`是`UIPopoverController`类的方法。为了以编程方式关闭弹出框，您必须自己保留对呈现的引用`UIPopoverController`。

这是一个可能的解决方案：

在弹出框加载的视图控制器中，定义一个属性。

```
@interface MyViewController: UIViewController

@property (nonatomic, strong) UIPopoverController *popover;

@end 
```

在执行 segue 到 popover 之前，存储 segue 的 popover 控制器。

```
- (void)prepareForSegue:(UIStoryboardPopoverSegue *)segue sender:(id)sender 
{
    if ([segue.identifier isEqualToString:@"mySegue"]) 
    {
        MyViewController *dvc = segue.destinationViewController;
        dvc.popover = [segue popoverController];
    }
} 
```

单击按钮时，关闭弹出框。

```
- (void)onButtonClick:(id)sender
{
    [self.popover dismissPopoverAnimated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T12:05:23.060

在简单的 popoverobj 中并在按钮事件上使用简单的方法。

```
 [popoverobj dismissPopoverAnimated:YES]; 
```

# java - Handling inputs with unsupported and/or multiple charsets in Java

> ID：15090113
> 
> 赞同：1
> 
> 时间：2013-02-26T13:18:13.110
> 
> 标签：java, character-encoding

I am writing a Java (7 SE) app to ingest all sorts of text-based inputs, and am concerned about running into character sets/encodings that the JRE doesn't support (for instance this app will run on a Linux box but will be ingesting files generated on every major OS, etc.).

For one, is there a way to catch an `IOException` (or similar) if the `InputStreamReader` encounters an unsupported charset/encoding?

And what about inputs that contain multiple encodings? Say we have 4 different types of inputs:

*   Raw `java.lang.String`s
*   Plaintext (`.txt`) files
*   Word (`.docx`) files
*   PDF files

What if we're reading one of these inputs and we start encountering multiple (but supported) character encodings? Does the JRE natively handle this, or do I have to have multiple readers, each configured with it's own charset/encoding?

In such a case, could I "normalize" the streaming inputs to a single, standardized (UTF-8 most likely) set/encoding? Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:12:05.550

要回答您的第一个问题，您可以创建一个 CharsetDecoder 并指定在遇到格式错误的输入时要发生的情况。

```
CharsetDecoder charsetDecoder = Charset.forName("utf-8").newDecoder();
charsetDecoder.onMalformedInput(myCustomErrorAction);
charsetDecoder.onUnmappableCharacter(myCustomErrorAction);
Reader inputReader = new InputStreamReader(inputStream, charsetDecoder); 
```

至于捕捉不支持整个字符集的情况，它看起来像：

```
if( Charset.isSupported(encodingSpecified)) {
    //Normal case
} else {
    //Error case
} 
```

但是，我不确定多种编码。我认为单个二进制流具有多种编码是非常不寻常的。流必须有一些自定义方式来指示编码更改。您必须一次从流中读取一个字符来查找该指标。如果您遇到它，则必须使用新编码在同一流上创建一个新阅读器。

在所有情况下，在 Java 中，一旦您从字节流转到字符流，这些字符将在内存中表示而无需任何特定编码，因此无需规范化，除非您将数据保存回某处. 如果您稍后要将该数据保存回文件，那么我强烈建议您选择一种编码并坚持使用它来存储所有数据。

# java - 无法为非实体集合创建元素连接

> ID：15090115
> 
> 赞同：2
> 
> 时间：2013-02-26T13:18:13.933
> 
> 标签：java, hibernate, jpa, hql

我正在尝试一个 typedQuery，它给了我以下错误：java.lang.IllegalArgumentException：无法为非实体集合创建元素连接！

我正在使用 JPA 2.0

我的代码：

```
@Entity
public class Example {
    @ElementCollection(targetClass=ExampleData .class,fetch = FetchType.EAGER)
@MapKeyColumn(name = "locale_key")
@CollectionTable(name = "exampleLocalizedData", joinColumns = @JoinColumn(name = "exampleId"))
     private Map<String, IExampleData> exampleLocalizedData;
}

@Embeddable
public class ExampleData {
     private String data;
     .....
} 
```

我的查询：

```
String querySentence = "SELECT DISTINCT e FROM Example e WHERE e.exampleLocalizedData[:locale].name LIKE :filter ";
        TypedQuery<Example > actualQuery = entityManager.createQuery(querySentence, Example .class); 
```

我的问题是，这样做的正确查询是什么？

问候。

编辑：

如果有任何想知道的最终查询：

```
select DISTINCT e FROM Example e join e.exampleLocalizedData r WHERE index(r) = :locale AND r.name LIKE :filter . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:38:14.867

问题在于尝试将映射值字段用作普通实体。

为此，您需要使用 JPA 2`KEY()`和`VALUE()`函数。

您可以在此处找到更多信息：[https ://stackoverflow.com/a/9311242/655756](https://stackoverflow.com/a/9311242/655756)

# wordpress - get_post_custom_values not working

> ID：15090118
> 
> 赞同：0
> 
> 时间：2013-02-26T13:18:14.390
> 
> 标签：wordpress, custom-fields

I have made a custom template to show the posts in "Products" category in a single page.I have some custom fields.I need to show the values of the custom fields in the page. I have used the get_post_custom_values as the following but i get an error as

```
Warning: Invalid argument supplied for foreach() in C:\wamp\www\SampleSite\wp-content\themes\TwentyElevenChildTheme\products.php on line 11 
```

The code for products.php is as follows.

```
<?php
/*
Template Name: Product Template
*/
?>
<?php get_header(); ?>
<div id="content" class="narrowcolumn">
   <?php $recent = new WP_Query("cat=4&showposts=10"); while($recent->have_posts()) :$recent->the_post();?>
   <?php $key_values = get_post_custom_values("Description"); ?>
   <?php foreach($key_values as $key => $value )?>
   <?php echo  "$key  => $value("Description") <br />";?>
   <?php endwhile; ?> 
```

I am not getting what the error is.Someone please help in this

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:36:42.490

`get_post_custom_values()`如果键不存在，则返回**null 。***参考：wp-includes/.post.php:1892*

您可以将返回的值转换为数组，以确保您始终在处理数组并避免该警告：

```
<?php $key_values = (array) get_post_custom_values("Description"); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:33:26.340

为什么不使用`get_post_meta`？我在我的网站上使用它，它按预期工作。

# python - python Traits: Column of Buttons in Table

> ID：15090121
> 
> 赞同：1
> 
> 时间：2013-02-26T13:18:29.987
> 
> 标签：python, traits, enthought, traitsui

I would like to add a Button to the end of every line in a table.

The following code results in an PyDeadObjectError when closing the window:

```
from traits.api import HasTraits,Str,Int,Button,Instance
from traitsui.api import TableEditor,ObjectColumn,View
class Person(HasTraits):
    name=Str
    age=Int
    Plot_size=Button(label='Plot size')

class Display(HasTraits):
    table=List(Instance(Person))
    table_editor=TableEditor(columns=[ObjectColumn(name='name'),
        ObjectColumn(name='age'),
        ObjectColumn(name='Plot_size')],
        deletable = True,
        sortable = False,
        sort_model = False,
        show_lines = True,
        orientation = 'vertical',
        show_column_labels = True)
    traits_view=View(Item('table',editor=table_editor),resizable=True)

a=Display()
a.table.append(Person(name='Joe',age=21))
a.table.append(Person(name='John',age=27))
a.table.append(Person(name='Jenny',age=23))
a.configure_traits() 
```

Has someone already tried to do the same? How can I get rid of this error? Is it possible to display the Button even without clicking on the corresponding cell?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:41:30.960

我不确定问题出在哪里，但也许有一种解决方法。不要让一列充满按钮，而是拥有一个按钮，然后使用选定的行。

```
from traits.api import HasTraits,Str,Int,Button,Instance, List
from traitsui.api import TableEditor,ObjectColumn,View, Item

class Person(HasTraits):
    name=Str
    age=Int
    #Plot_size=Button(label='Plot size')

class Display(HasTraits):
    Plot_size=Button(label='Plot size')
    selected_person = Instance(Person)

    people=List(Instance(Person))
    table_editor=TableEditor(columns=[ObjectColumn(name='name'),
        ObjectColumn(name='age')],
        selected='selected_person',
        #ObjectColumn(name='Plot_size', editable=False)],
        deletable = True,
        sortable = False,
        sort_model = False,
        show_lines = True,
        orientation = 'vertical',
        show_column_labels = True)

    traits_view=View(Item('people',editor=table_editor),
            Item('Plot_size'),
            resizable=True)

    def _Plot_size_fired(self):
            print self.selected_person.name

demo=Display(people = [Person(name='Joe',age=21),
    Person(name='John',age=27),
    Person(name='Jenny',age=23)])

if __name__ == '__main__':
    demo.configure_traits() 
```

否则，也许 checkbox_column 示例是一个很好的起点。

# ruby - Global exception handler in Ruby

> ID：15090124
> 
> 赞同：3
> 
> 时间：2013-02-26T13:18:45.003
> 
> 标签：ruby

Is it possible to create a global listener for an exception in Ruby?

I want to catch all exceptions in my script for StateMachine::InvalidTransition so my application can respond with sending an email with the error.

Normally in Ruby, a rescue block is preceded by begin, but I want to have a central listener method that will catch all exceptions for the above mentioned exception.

Is this possible at all?

I really don't want to place

```
begin
    # Do some stuff
rescue StateMachine::InvalidTransition => exception
    # Send error in email message
end 
```

inside every single event I have in my state_machine.

I want something similar to **set_exception_handler()** in PHP.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-07T02:24:09.013

是的，可以为异常创建全局侦听器。这里有两种方法：

### 1.[`at_exit`](https://ruby-doc.org/core/Kernel.html#method-i-at_exit)和`$!`：

```
at_exit do
  if $!.is_a? StateMachine::InvalidTransition
    # Send error in email message
  end
end 
```

这种方法仅作为崩溃记录器有用，因为它不能阻止您的脚本退出。

### 2.补丁[`raise`](https://ruby-doc.org/core/Kernel.html#method-i-raise)和[`fail`](https://ruby-doc.org/core/Kernel.html#method-i-fail)：

```
module PatchRaise
  def raise(err, *args)
    if defined?(err.exception) &&
      err.exception.is_a?(StateMachine::InvalidTransition)
      # Send error in email message
    else
      super(err, *args)
    end
  end

  def fail(*args)
    raise(*args)
  end
end

Object.prepend PatchRaise 
```

这种方法可以阻止您的脚本退出，但它还有两个限制：

*   它将捕获对`raise`/的所有调用`fail`，即使是那些可能被脚本中其他地方的`begin`/`rescue`块捕获的调用。
*   由于它依赖于重写 Ruby`raise`和`fail`方法，因此不会捕获任何由原生 Ruby 核心代码或 C 扩展（例如，`ZeroDivisionError`由`1/0`表达式引发）生成的异常。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-26T13:23:54.390

您可以将所有内容包装在 begin/rescue/end 中。像这样：

```
begin
    class Sheep
        def self.raise_me
             raise
        end
    end
    Sheep.raise_me
rescue
    p 'caught!'
end 
```

我只是不确定你是否*愿意*。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-26T13:34:52.760

你看过 Errbit 的来源吗？这可能具有您正在寻找的功能。

[错误](https://github.com/errbit/errbit)

就个人而言，我相信你应该大量失败并且有办法处理你的反应（在肉类空间）而不是聪明地恢复。那样拉的头发太多了。:-)

此外，这对您来说也可能是一个很好的参考。

[出色的红宝石书](http://exceptionalruby.com/)

祝你好运！

**更新：2017 年 1 月 23 日**

我不知道为什么这最近被否决了。我仍然支持在生产中“大规模失败”并使用其他系统处理响应，这可能与聪明的 Ruby 主义者的货物崇拜背道而驰，但在生产中，这通常是这样做的。主要是因为当你开始在野外使用其他人的生产代码时，它会缺乏测试/规范，并且由于经理压住开发人员的脖子或由于任意的截止日期而主要是动态组成的。

IMO 最好不要太巧妙地处理错误，即一些全局 catch 方法可以在遍历异常路径时保持您的应用程序正常运行。这会导致您的系统中出现静默错误，您甚至可能永远不会意识到这些错误，并且您永远不会获得良好的 TDD 代码覆盖率。全局捕获错误对于保持正常运行时间非常有用，但会阻止您了解系统中正在发生的事情。如果您实现了良好的集成测试代码覆盖率，这应该不是问题。

另外，我遇​​到过这个 gem，[Contracts](https://github.com/egonSchiele/contracts.ruby)，因为它是用良好的代码覆盖率编写的，这将帮助您消除与代码覆盖率差和随机返回相关的异常。

**更新：2017 年 3 月 8 日**

我坚持我之前的更新，这解决了最重要的问题，即如何实现“侦听”红宝石应用程序中的异常的东西。

有时你问一个问题，答案是切题的，即有更好的方法。Stack Overflow 是关于利用他人的经验。打高尔夫球有其一席之地，但大多数时候是不必要的。

Errbit 是一个基于开源 Airbrake API 和 Rails 的开源异常捕获器，可以相当快地启动并提供比手动编写解决方案更多的选项。所以驳回它是错误的IMO。

关于 Exceptional Ruby Book 是一个无关紧要的资源，因为它要花钱。在我看来，作者要求为他们投入时间创作并为您的工具集增加价值的作品付费是完全可以接受的。如果这本书的价格对您来说太高了，请向您当地的图书馆索取一份副本，这就是它们存在的原因。如果失败，请联系 Avdi，或许可以达成协议。

# java - Use TreeSet to sort JList

> ID：15090125
> 
> 赞同：0
> 
> 时间：2013-02-26T13:18:47.340
> 
> 标签：java, jlist, hashset, treeset

I'm doing an assignment where I'm making a program that generates 20 random numbers and puts them in an arraylist, a hashset and a treeset. It is supposed to show those numbers in JList1\. Then, I am going to use HashSet to display unique numbers only, and TreeSet to display the numbers sorted. I made three JLists, and made one function for each of them to update the GUI (there's probably an easier way to do this, but thats all I could come up with due to me being quite new to java). So, for example my updateGUI function used to display the arraylist in my JList looks like this:

```
public void updateGUI(JList someList, ArrayList<Integer> anyarraylist){
        DefaultListModel m = new DefaultListModel();
        for (Object  s : anyarraylist) {
            m.addElement(s);
        }
        someList.setModel(m);
    } 
```

I then call that function when I press a button by using ActionEvent:

```
@Override
public void actionPerformed(ActionEvent arg0) {

    generateNumbers();

    this.updateGUI(this.numbers1, numberlist); 
```

Where generateNumbers is my function to generate 20 random numbers, numbers1 is my first JList and numberlist is the name of my arraylist.

I did pretty much the exact same thing for HashSet to display a JList with unique numbers, and it worked. However, I then tried to do the same for TreeSet, which gave me a "Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException"-error. The function looks like this:

```
 public void oppdaterGUI3(JList someList, TreeSet<Integer> anysortedlist){
    DefaultListModel m = new DefaultListModel();
    for (Object  s : anysortedlist) {
        m.addElement(s);
    }
    someList.setModel(m);
} 
```

Why doesn't this work? I thought TreeSet would work the same way as HashSet. Any help is appreciated. I can post the full error and code if necessary.

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:39:02.833

尽管缺乏信息，但我将以下内容制定为答案。

查看 NullPointerException 的堆栈跟踪。它给出了它发生的行号。

TreeSet 可能被定义了两次，一次是作为局部变量。或者有一种情况，树集的副本也必须发生。类似的东西。

您可以使用断点对其进行调试。遍历树集 var 和另一个 var 的所有用法。

对于响应更快的 GUI，请使用以下模式。

```
@Override
public void actionPerformed(ActionEvent arg0) {
    EventQueue.invokeLater(new Runnable()) {
        @Override
        public void run() {
            generateNumbers();
            /*MyClass.this.*/ updateGUI(this.numbers1, numberlist);
        }
    });
} 
```

# php - quotes in php array to javascript array

> ID：15090128
> 
> 赞同：1
> 
> 时间：2013-02-26T13:18:52.330
> 
> 标签：php, javascript

I want to pass a php array to javascript. I've tried several examples taken form this site, but the rest of my code seem not to recognize them. I think the problem is in the quotes or format of the array.

First: var functionlist defined as below works OK.

```
<script type="text/javascript">
    var functionlist = Array('1','2','3','4','5','6','7','8','9','10','11','12');
    //Rest of the code
</script> 
```

Second: var functionlist defined as below works OK.

```
<script type="text/javascript">
    var functionlist=Array("1","2","3","4","5","6","7","8","9","10","11","12");
    //Rest of the code
</script> 
```

But the code below is not working, despite the fact that echoing $TransfArray renders something quite similar to the above.

```
<?php
    for ($i = 0; $i <= 12; $i++) {
        $OriginalArray[$i] = $i;
    }
    $TransfArray= "'" . implode("','", $OriginalArray) . "'";
?>

<script type="text/javascript">
    var functionlist = Array(<? echo $TransfArray; ?>);
    //Rest of the code
</script> 
```

Nor does the code below

```
<?php
    for ($i = 0; $i <= 12; $i++) {
        $OriginalArray[$i] = $i;
    }
    $Original_to_json = json_encode($OriginalArray);
?>

<script type="text/javascript">
    var functionlist =  <?php echo $Original_to_json; ?>;
    //Rest of the code
</script> 
```

Does anyone detect the problem? Thnaks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:26:36.487

使用铸造如下，

```
<?php
for ($i = 0; $i <= 12; $i++) {
$OriginalArray[]= (String)$i;
}
$Original_to_json=json_encode($OriginalArray);
?>

<script type="text/javascript">
var functionlist =  <?php echo $Original_to_json; ?>;
//Rest of the code
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:24:44.707

用 PHP 编写 JavaScript 代码是一种糟糕的做法。你不应该那样做。相反，您可以做一些不同且简单的事情。

1.  在 PHP 中，您通过将数组转换为 JSON 对象来生成 JSON 文档。为此使用 json_encode 函数。将您的文件命名为“json.php”（尽管命名为 data.json 可能是一种更好的做法，但您必须执行更多步骤）。
2.  现在，您可以在 HTML 文档中包含该文件， `<script src="json.php"></script>`或者您可以使用 AJAX 动态加载它。
3.  JSON 对象将具有 JavaScript 数组。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T13:24:36.303

尝试这个 ：

```
<script type="text/javascript">
var functionlist =  <?php echo json_encode($OriginalArray); ?>;
//Rest of the code
</script> 
```

享受 ;）

# typo3 - Typo3 remove home page from URL

> ID：15090130
> 
> 赞同：2
> 
> 时间：2013-02-26T13:18:55.320
> 
> 标签：typo3

i have a website in TYPO3 Ver. 4.7.1 and I woul like to remove the homepage from URL. [http://www.mywebsite.com/home](http://www.mywebsite.com/home) I would like be [http://www.mywebsite.com/](http://www.mywebsite.com/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:58:09.607

处理此问题的唯一方法是将内容添加到根页面并添加从“主页”到根页面的快捷方式。

*   根页面
    *   主页 -> 指向根页面的链接
    *   其他二级页面

唯一的问题是，当您单击“主页”时，菜单状态不会在打字稿 HMENU/TMENU 元素中触发为“活动”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:34:23.920

我有一种感觉，我以前做过：

*   根页面
    *   其他一级页面

用两个 HMENU 构建菜单：

1.  仅覆盖根页面级别的菜单
2.  一个涵盖所有其他内容的菜单，但假装比后端高一级

所以一切都显示为标准 ul > li> ul > li 菜单

这有点古怪，但它可能会奏效

@Merec 还是你不觉得？

# java - 为什么在 numberformatexception 发生时要声明 ioexception？

> ID：15090138
> 
> 赞同：0
> 
> 时间：2013-02-26T13:19:10.410
> 
> 标签：java

```
try {
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    str = br.readLine();
    i = Integer.parseInt(str);
} catch(NumberFormatException e) {
    System.out.Println("enter a valid input");
} 
```

当我尝试编译此代码时，它会引发一个编译错误，即发生 ioexception 我应该捕获它。

因此我必须添加一个`catch(IOException e)`语句，但是发生的异常是`java.lang`库的数字格式异常，所以我为什么要捕获`ioException`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T13:20:11.327

```
str=br.readLine(); 
```

[**BufferedReader.readLine()**](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)抛出**IOException**。

```
public String readLine() throws IOException 
```

> 抛出：IOException - 如果发生 I/O 错误

由于**IOException**是一个检查异常，您要么需要使用 try/catch 块处理它，要么使用 throws 子句声明它。

```
try
{
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
str=br.readLine();
i=Integer.parseInt(str);
}catch(IOException e)
{System.out.println("IOException occured... " + e.printStacktrace());
catch(NumberFormatException e)
{System.out.println("enter a valid input");
} 
```

**在 java 7 中多次捕获：**

```
try
    {
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    str=br.readLine();
    i=Integer.parseInt(str);
    }
catch(IOException | NumberFormatException ex) {
System.out.println(ex.printStackTrace())
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:21:23.390

**[`BufferedReader.readLine`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)**`IOException`如果发生 I/O 错误，可以抛出一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:25:01.723

因为这条线 str=br.readLine(); 可能会发生 IOException

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T08:10:45.760

这是因为，

```
bufferedReader.readLine () 
```

抛出 IOException 这是一个检查异常。所有检查的异常都应该在 try catch 块中。您可以捕获 IOException 或通用异常。代码片段如下所示。NumberFormatException 也是运行时异常。除非需要，否则您无需抓住它。

```
try {
     String str = bufferedReader.readLine ();
} catch (IOException ie) {
     ie.printStacktrace();
}

try {
     String str = bufferedReader.readLine ();
} catch (Exception ie) {
     e.printStacktrace();
} 
```

# ios - iOS 应用因应用购买“错误”而被拒绝 - 无法复制

> ID：15090142
> 
> 赞同：1
> 
> 时间：2013-02-26T13:19:29.390
> 
> 标签：ios, app-store, in-app-purchase

我已提交应用更新以供审核，但已被拒绝。拒绝的原因是：

> 我们发现，在运行 iOS 6.1 的 iPad 上审查时，您的应用在 Wi-Fi 和蜂窝网络上都出现了一个或多个错误，这不符合 App Store 审查指南。
> 
> 尝试在您的应用程序中购买其他内容后，会向用户显示一条警报，指出该应用程序无法连接到 iTunes Store。用户不能继续购买附加内容。

当我使用提交的完全相同的二进制文件进行测试时，一切正常。我怀疑审稿人在沙盒环境中使用的是普通账户，或者在直播环境中使用的是测试账户，会出现描述的行为，所以我重新提交。

现在我又以同样的理由被拒绝了。我不知道发生了什么——有人见过这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:54:13.253

一切都很好，结局很好。看来这是审稿人错误的结果。经过进一步审查，该应用程序已获准销售。

如果其他人有这个问题，我建议提出上诉。

# logging - Remove the DEBUG-messages when testing a Play-SolrJ-Application

> ID：15090143
> 
> 赞同：0
> 
> 时间：2013-02-26T13:19:33.283
> 
> 标签：logging, solr, playframework, logback, playframework-2.1

My Scala-application uses Play Framework 2.1 together with SolrJ (V. 4.0) to communicate with Solr.

*   When I run my *tests* (`play test`) I get a very long annoying list of `DEBUG org.apache.http.*` messages from SolrJ. :-(
*   When I *run* my application (`play run`) no debug-message from SolrJ appears. :-)

In `conf/application.conf` all logger levels are set to INFO:

```
logger.root=INFO
logger.play=INFO
logger.application=INFO 
```

I even try to create my own `conf/application-logger.xml` file, but the DEBUG-messages from Solrj stay the same.

**How can I get rid of the DEBUG-messages durring testing?**

I have read an [old Stackoverflow-Question](https://stackoverflow.com/questions/7992945/playframework-log-level-in-tests) about this, but the answers don't work (I think it was a question for Play 1).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:43:40.347

您可以尝试在 Java 代码中动态修改日志级别。

```
 private static void modifyLogLevel() {
    @SuppressWarnings("unchecked")
    Enumeration<Logger> e = Logger.getRootLogger().getLoggerRepository().getCurrentLoggers();
    while (e.hasMoreElements()) {
        Logger curLogger = e.nextElement();
        if (curLogger.getName().contains("org.apache")){
            curLogger.setLevel(Level.INFO);
        }
    }
    Properties props = new Properties();
    props.put("log4j.logger.org.apache","ERROR");
    PropertyConfigurator.configure(props);} 
```

# c# - Client for a local Java based service

> ID：15090146
> 
> 赞同：0
> 
> 时间：2013-02-26T13:19:47.303
> 
> 标签：c#, java, sockets, client, tcpclient

I am trying to connect my C# application with a local service that is based on Java. I dont have access to the Java code and the service details, the only thing I know is to communicate via socket through a specified port.

The problem is I can connect BUT cannot send / receive any data. My C# client code is as follows;

=====================

```
IPHostEntry ipAddress = Dns.GetHostEntry("127.0.0.1");
IPEndPoint ip = new IPEndPoint(IPAddress.Parse(ipAddress.AddressList[0].ToString()), 8888);
socket = new Socket(ip.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
socket.Connect(ip);

Encoding ASCII = Encoding.ASCII;
Byte[] byteGetString = ASCII.GetBytes("Service_Command_Message");
Byte[] receivedBytes = new Byte[256];
string l_Response = string.Empty;

socket.Send(byteGetString, byteGetString.Length, SocketFlags.None);

//debugger gets lost at this line. I also tried stream.read    
Int32 bytes = socket.Receive(receivedBytes, receivedBytes.Length, SocketFlags.None);
l_Response += ASCII.GetString(receivedBytes, 0, bytes);
while (bytes > 0)
{
    bytes = socket.Receive(receivedBytes, receivedBytes.Length, SocketFlags.None);
    l_Response = l_Response + ASCII.GetString(receivedBytes, 0, bytes);
}
socket.Close(); 
```

=====================

I tried using some port capture tool, that shows the connectivity but length of transmitted data is shown to be 0.

Thanks for any help.

======= update (using TcpClinet to send) ==========

```
client = new TcpClient("127.0.0.1", 8888);
stream = client.GetStream();

Byte[] data = System.Text.Encoding.ASCII.GetBytes("Service_Command_Message");

StreamWriter sw = new StreamWriter(stream);

sw.WriteLine(p_Message);
sw.Flush(); 
```

========================================

I've used Flush() but still data is not transmitted till I close the application.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:35:25.253

由于您的代码命中了接收方法，我假设发送方法没有任何问题。您应该查看 out 参数`SocketError`来验证这一点。

首先，您不能依赖套接字发送或接收所有数据。您发送的字节数总是有可能超出客户的预期。Socket.Send 方法返回发送的字节数，因此您可以使用它来确定您是否已发送所有字节：

```
Byte[] byteGetString = ASCII.GetBytes("Service_Command_Message");
int count = 0;
while (count < byteGetString.Length ) 
{
    count += socket.Send(
        bytes,
        count, 
        bytes.Length - count, 
        SocketFlags.None)
} 
```

您的接收方法挂起的原因可能是由于您的 while 循环条件：

```
while (bytes > 0) {
    bytes = socket.Receive(receivedBytes, receivedBytes.Length, SocketFlags.None);
    l_Response = l_Response + ASCII.GetString(receivedBytes, 0, bytes); } 
```

您假设当您收到零长度字节时，您已完成接收，但情况可能并非如此。当您在最后一个循环的缓冲区中填充一些字节时，您可能已经到达网络流的末尾。因此，您必须像这样更改 while 循环条件：

```
while (bytes == receivedBytes.Length) {
    bytes = socket.Receive(receivedBytes, receivedBytes.Length, SocketFlags.None);
    l_Response = l_Response + ASCII.GetString(receivedBytes, 0, bytes); } 
```

如果这一切都失败了，那么很可能服务器没有正确发送/接收字节。

最后，一定要处理好`SocketException`，因为连接随时都可能掉线。

# android - custom info window adapter with custom data in map v2

> ID：15090148
> 
> 赞同：45
> 
> 时间：2013-02-26T13:19:48.440
> 
> 标签：android, infowindow, android-maps-v2

I want to make custom info window adapter in map v2 in android as like below.

![enter image description here](../Images/a73b24b6d296d05bb483dd2374893cf9.png)

I have seen below link but doesn't get more.

[1](http://bon-app-etit.blogspot.be/2012/12/using-infowindowadapter-part-1.html),[2,](http://bon-app-etit.blogspot.be/2012/12/add-informationobject-to-marker-in.html)[3](https://stackoverflow.com/questions/14811579/android-map-api-v2-custom-marker-with-imageview),

below is my content layout file.

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
>
    <ImageView
        android:id="@+id/infocontent_iv_image"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true" 
    />
    <RelativeLayout
        android:id="@+id/infocontent_rl_middle"
        android:layout_below="@id/infocontent_iv_image"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:layout_margin="5dp"
    >

    </RelativeLayout>
    <TextView
        android:id="@+id/infocontent_tv_name"
        android:layout_below="@id/infocontent_rl_middle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textStyle="bold" 
        android:layout_margin="5dp"
    />
    <TextView
        android:id="@+id/infocontent_tv_type"
        android:layout_below="@id/infocontent_tv_name"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="#CCCCCC"
        android:layout_margin="5dp"
    />
    <TextView
        android:id="@+id/infocontent_tv_desc"
        android:layout_below="@id/infocontent_tv_type"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
    />
    <TextView
        android:id="@+id/infocontent_tv_addr"
        android:layout_below="@id/infocontent_tv_desc"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
    />
</RelativeLayout> 
```

So any one help me how can i set data to all views in infowindow adapter?

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-02-26T14:09:54.440

尝试这个

***窗口布局.xml***

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <TextView
        android:id="@+id/tv_lat"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/tv_lng"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

***MainActivity.java***

```
public class MainActivity extends FragmentActivity {

GoogleMap googleMap;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Getting reference to the SupportMapFragment of activity_main.xml
    SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);

    // Getting GoogleMap object from the fragment
    googleMap = mapFragment.getMap();

    // Setting a custom info window adapter for the google map
    googleMap.setInfoWindowAdapter(new InfoWindowAdapter() {

        // Use default InfoWindow frame
        @Override
        public View getInfoWindow(Marker arg0) {
            return null;
        }

        // Defines the contents of the InfoWindow
        @Override
        public View getInfoContents(Marker arg0) {

            // Getting view from the layout file info_window_layout
            View v = getLayoutInflater().inflate(R.layout.windowlayout, null);

            // Getting the position from the marker
            LatLng latLng = arg0.getPosition();

            // Getting reference to the TextView to set latitude
            TextView tvLat = (TextView) v.findViewById(R.id.tv_lat);

            // Getting reference to the TextView to set longitude
            TextView tvLng = (TextView) v.findViewById(R.id.tv_lng);

            // Setting the latitude
            tvLat.setText("Latitude:" + latLng.latitude);

            // Setting the longitude
            tvLng.setText("Longitude:"+ latLng.longitude);

            // Returning the view containing InfoWindow contents
            return v;

        }
    });

    // Adding and showing marker while touching the GoogleMap
    googleMap.setOnMapClickListener(new OnMapClickListener() {

        @Override
        public void onMapClick(LatLng arg0) {
            // Clears any existing markers from the GoogleMap
            googleMap.clear();

            // Creating an instance of MarkerOptions to set position
            MarkerOptions markerOptions = new MarkerOptions();

            // Setting position on the MarkerOptions
            markerOptions.position(arg0);

            // Animating to the currently touched position
            googleMap.animateCamera(CameraUpdateFactory.newLatLng(arg0));

            // Adding marker on the GoogleMap
            Marker marker = googleMap.addMarker(markerOptions);

            // Showing InfoWindow on the GoogleMap
            marker.showInfoWindow();

        }
    });

}
} 
```

通过这种方式，您可以创建自定义布局并实现您想要的方式。

让我知道它是否对您有帮助。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-19T09:55:17.953

我有打开对话框`onMarker()`点击。和`setContentView(my layout)`。

我使用了下面的代码。

```
@Override
    public boolean onMarkerClick(Marker arg0) {
        if(arg0.getSnippet() == null){
            mMap.moveCamera(CameraUpdateFactory.zoomIn());
            return true;
        }
        //arg0.showInfoWindow();
        final DataClass data = myMapData.get(arg0);
        final Dialog d = new Dialog(MainActivity.this);
        d.requestWindowFeature(Window.FEATURE_NO_TITLE);
        //d.setTitle("Select");
        d.getWindow().setBackgroundDrawable(new ColorDrawable(Color.WHITE));
        d.setContentView(R.layout.info_content);
        ivPhoto = (ImageView)d.findViewById(R.id.infocontent_iv_image);
        AddImageOnWindow executeDownload = new AddImageOnWindow();
        final LatLng l = arg0.getPosition();
        executeDownload.execute(l);
        TextView tvName = (TextView)d.findViewById(R.id.infocontent_tv_name);
        tvName.setText(data.getPlaceName());

        TextView tvType = (TextView)d.findViewById(R.id.infocontent_tv_type);
        tvType.setText("("+data.getPlaceType()+")");

        TextView tvDesc = (TextView)d.findViewById(R.id.infocontent_tv_desc);
        tvDesc.setText(data.getPlaceDesc());

        TextView tvAddr = (TextView)d.findViewById(R.id.infocontent_tv_addr);
        tvAddr.setText(Html.fromHtml(data.getPlaceAddr()));

d.show();
return true; 
```

# objective-c - 根据其内容在 UITableViewCell 上放置条件格式的正确方法？

> ID：15090153
> 
> 赞同：0
> 
> 时间：2013-02-26T13:19:56.567
> 
> 标签：objective-c, uitableview

我正在通过 Core Data 和 an 提取一些对象，`NSFetchedResultsController`并且我正在尝试根据它们的布尔属性之一对它们应用条件格式。例如，如果它们被标记为`Liked`我希望它们的文本颜色为蓝色。

我发现的问题是，在滚动表格时，不仅仅是那些带有`Liked`as`YES`的被着色。这也是一个常规模式，例如，当我向下滚动时，每六个条目。我认为这与细胞排队和重用有关，但我不知道是什么。这是我的代码：

```
- (UITableViewCell *) tableView: (UITableView *) tableView cellForRowAtIndexPath: (NSIndexPath *) indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: CellIdentifier forIndexPath: indexPath];

    Quote *thisQuote = [self.fetchedResultsController objectAtIndexPath: indexPath];

    cell.textLabel.numberOfLines = 4;
    cell.textLabel.font = [UIFont boldSystemFontOfSize: 12];
    cell.textLabel.textAlignment = NSTextAlignmentCenter;
    cell.textLabel.text = [[self.fetchedResultsController objectAtIndexPath: indexPath] quote];

    if ([[thisQuote isLiked] boolValue]) {
        cell.textLabel.textColor = [UIColor blueColor];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:22:28.240

当您使用`dequeueReusableCellWithIdentifier:`时，您必须为每个单元格重置属性 textColor ：

```
if ([[thisQuote isLiked] boolValue]) {
    cell.textLabel.textColor = [UIColor blueColor];
}
else cell.textLabel.textColor = [UIColor blackColor]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:24:16.233

对于每六个单元格，您始终可以执行以下操作：

```
if(indexPath.row % 6 == 0) {
    // Set blue color
}
else {
   // Set black color
} 
```

或更简单：

```
cell.textLabel.textColor = (indexPath.row % 6 == 0) ? [UIColor blueColor] : [UIColor blackColor]; 
```

# c# - LocalStorage 重定向 Windows Phone 7

> ID：15090158
> 
> 赞同：2
> 
> 时间：2013-02-26T13:20:10.830
> 
> 标签：c#, silverlight, windows-phone-7, xaml, local-storage

我正在创建一个 Windows Phone 7.5 应用程序，理论上，它应该启动一个应该只显示一次的页面。让我们称之为`SplashPage.xaml`。SplashPage.xaml 包含两个具有不同参数值的按钮：
这是英文按钮，还有另一个按钮：

```
 private void chooseEnglish_Click_1(object sender, RoutedEventArgs e)
    {
        languageChooser.Add("languageChooser", "English");
        NavigationService.Navigate(new Uri("/MainPage.xaml?Language=English", UriKind.Relative));
    } 
```

但是，目前我还保存了一个`LocalSettings`值“languageChooser”，单击时的值为“English”，该值存储在`ApplicationSettings`调用的语言选择器中。现在，我想做的基本上是：
如果（languageChooser 包含“Norwegian”或“English”作为值）
-> 启动时自动将用户重定向（输入 SplashPage.xaml）到 MainPage.xaml
else
->用户选择一种语言，并根据他/她单击的按钮存储该值。

我希望这是足够的信息。截至目前，SplashPage.xaml.cs 的开头如下所示：

```
 public SplashPage()
    {
        InitializeComponent();

        if ((string)languageChooser["languageChooser"] == "Norwegian" || (string)languageChooser["languageChooser"] == "English")
        {
            NavigationService.Navigate(new Uri("/MainPage.xaml?Language=Norwegian", UriKind.Relative));
        }
        else
        {

        }

    } 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:06:38.297

```
private void chooseEnglish_Click_1(object sender, RoutedEventArgs e)
{
    languageChooser.Add("languageChooser", "English");
    languageChooser.Save();
    NavigationService.Navigate(new Uri("/MainPage.xaml?Language=English", UriKind.Relative));
} 
```

您的点击事件缺少保存。这会将值保存到 ApplicationSettings。

```
public SplashPage()
{
    InitializeComponent();

    string language;
    languageChooser.TryGetValue("languageChooser", out language);
    if (language != null)
    {
        NavigationService.Navigate(new Uri("/MainPage.xaml?Language=" + language, UriKind.Relative));
    }

} 
```

在应用程序启动时加载值。在第一次运行时，它们的键没有任何价值，因此您需要使用 TryGetValue 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:00:51.267

在`App.xaml.cs`你有一个 void for`Application Launching`并且`Application Activated`我假设你有一个 loadind 设置无效，只需为默认语言添加另一个

```
private void Application_Launching(object sender, LaunchingEventArgs e)
    {         
        LoadSettings();
        DefaultLanguage();
    } 
```

做这样的事情

```
 void DefaultLanguage() 
    {
            if (languageChooser==null)
            {
                ((App)Application.Current).RootFrame.Navigate(new Uri("/SplashPage.xaml", UriKind.Relative));

            }
            else if (languageChooser =="Norwegian")
            {
                ((App)Application.Current).RootFrame.Navigate(new Uri("/MainPage.xaml?Language=Norwegian", UriKind.Relative));
            }
            else if (languageChooser =="English")
            {
                ((App)Application.Current).RootFrame.Navigate(new Uri("/MainPage.xaml?Language=English", UriKind.Relative));
            }

        }
    } 
```

最后在你`WMAppManifest`的领域`Navigation Page`必须是空的。

我希望它对你有用。

# java - 什么默认类型 Mat Image OpenCV4Android？

> ID：15090162
> 
> 赞同：2
> 
> 时间：2013-02-26T13:20:12.737
> 
> 标签：java, image, opencv

```
ImageManipulationsActivity.VIEW_MODE_BINARY:
capture.retrieve(mRgba, Highgui.CV_CAP_ANDROID_COLOR_FRAME_RGBA);

Mat binary = new Mat();
Imgproc.cvtColor(mRgba,binary, Imgproc.COLOR_RGBA2GRAY, 4);

int size = (int) binary.total() * binary.channels();
double[] buff = new double[size];
binary.get(0, 0, buff);

for(int i = 0; i < size; i++)
{
    buff[i] = (buff[i] >= 0) ? 1 : 0;
}

Mat bv = new Mat(binary.size(), CvType.CV_8U);
bv.put(0, 0, buff);

Imgproc.cvtColor(binary, mRgba, Imgproc.COLOR_GRAY2RGBA, 4);

break; 
```

上面的代码用于在opencv4android中对灰度图像进行二值化，但是直到知道这对我不起作用，我从[这里](https://stackoverflow.com/a/12493075/1593269)复制上面的代码，在上面的代码中，我尝试：

1.  使用以下方法检索 Mat 图像：capture.retrieve
2.  使用 Imgproc.cvtColor 将图像转换为灰度
3.  像上面的代码一样使用 Java Primitive Array 进行二值化
4.  然后从灰色转换回 rgba
5.  使用位图 bmp 显示结果

如果你有什么建议，请告诉我。我不知道我从上面的代码中错了什么，它没有错误，但是当我安装应用程序并运行它时，它总是强制关闭。

这是来自应用程序的 logcat：

致命异常：Thread-10 java.lang.UnsupportedOperationException：Mat 数据类型不兼容：org.opencv.core.Mat.get(Mat.java:2042) 的 org.opencv.samples.imagemanipulations.ImageManipulationsView.processFrame( ImageM‌​anipulationsView.java:158) at org.opencv.samples.imagemanipulations.SampleCvViewBase.run(SampleCvViewBase.java‌​:99) at org.opencv.samples.imagemanipulations.ImageManipulationsView.run(ImageManipulati‌​onsView.java:195) at java.lang.Thread.run(Thread.java:1019)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-28T14:59:31.203

Mat的默认类型是CV_8UC1，无论是单通道还是3通道（BGR）-[基本结构OpenCV-](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html)

# silverlight - Silverlight 标准进度条

> ID：15090171
> 
> 赞同：0
> 
> 时间：2013-02-26T13:20:48.623
> 
> 标签：silverlight, xaml, progress-bar

当 silverlight 应用程序加载时，我们会看到这个进度条：

![在此处输入图像描述](../Images/18586162fad8ebf043b41ff7efdf0274.png)

如何在我的应用程序中添加这样的进度条。我知道有ProgressBar控件，但我相信我可以得到这样的风格，不要用手重绘它。我在哪里可以找到这种风格？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:39:18.897

您应该检查有关加载旋转的以下几个链接：

[http://www.deanchalk.me.uk/post/2009/01/18/Silverlight-Loadinge-Spin-Icon-in-XAML.aspx](http://www.deanchalk.me.uk/post/2009/01/18/Silverlight-Loadinge-Spin-Icon-in-XAML.aspx) [http://www.blackspike.com/silverlight/silverlight-spinner](http://www.blackspike.com/silverlight/silverlight-spinner) [http: //www.codeproject.com/Articles/44885/Customizable-Loading-Indicator-for-Silverlight-3](http://www.codeproject.com/Articles/44885/Customizable-Loading-Indicator-for-Silverlight-3)

希望能帮助到你。

# java - Java 访问 TCK 的典型方式

> ID：15090174
> 
> 赞同：4
> 
> 时间：2013-02-26T13:20:54.310
> 
> 标签：java, oracle, jsr

我想开始实现一个特定的 JSR，以开始了解这样做时可能涉及的不同方面。为了获得知道我是否成功的满足感，我需要一个 TCK（技术兼容性工具包）来验证实现。根据 JCP 主页，这仅适用于选定的合作伙伴（我假设是商业的）或学术机构。

私人实体或一般的开源项目如何访问 TCK？涉及什么，这是一项值得尝试的任务吗？

用于合作伙伴注册的旧 Sun 页面已关闭/链接到通用 Oracle 站点，我发现最接近的是[https://java-partner.sun.com/support/login.action](https://java-partner.sun.com/support/login.action)，它缺少注册表/信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T16:16:06.100

如果您想以非商业实体的身份访问 TCK，您可以申请 Oracle 的[*兼容性测试奖学金计划*](http://www.oracle.com/technetwork/java/index-137188.html)。如果您是商业实体，则需要每年支付 35,000 美元才能获得访问权限。我相信如果您是[JCP 成员](http://www.jcp.org/en/participation/membership)（这不仅仅是在他们的网站上拥有一个帐户，并且需要向 Oracle 提交一些文件），您也可以获得访问权限。

我不确定这如何以及是否真的有效。我正在考虑自己做，但我还没有时间处理这些官僚障碍。

# c++ - 互斥体实现和信令

> ID：15090176
> 
> 赞同：11
> 
> 时间：2013-02-26T13:20:56.737
> 
> 标签：c++, c, mutex, implementation

当一个 mutex 已被 T1 锁定，而 T2 试图锁定它时，T2 的过程是什么？

我认为它是这样的：

> -T2 尝试锁定，失败，可能自旋锁有点，然后调用 yield...
> -T2 计划执行几次，尝试锁定失败，yield... -
> 最终 T1 解锁，T2 计划执行和设法锁定互斥锁...

T1 解锁是否明确向调度程序或其他线程发出互斥锁已解锁的信号？或者它只是解锁，并让调度程序在感觉合适时调度阻塞线程（又名调度程序没有阻塞线程的概念，也不将它们视为特殊）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T13:44:23.787

这取决于您的操作系统。我已经看到`yield`了内核中的通用条件变量、用户态控制调度和具有内核支持的专用锁定原语。

旋转和旋转`yield`具有可怕的性能。从理论上讲，用户态控制的调度（请参阅[调度程序激活](http://en.wikipedia.org/wiki/Scheduler_activations)）应该具有最佳性能，但据我所知，没有人让它在所有情况下都能正常工作。[内核中的通用条件变量和具有内核支持的专用锁定原语应该与 Linux 中的futex](http://en.wikipedia.org/wiki/Futex)执行或多或少相同，作为后者的最佳示例。

在某些情况下，旋转可以具有更好的性能。在 Solaris 中，内核中的某些锁定原语具有自适应模式，只要持有锁的进程在不同的 cpu 上运行，锁就会旋转。如果锁所有者休眠或被抢占，锁服务员也会进入休眠状态。在其他内核中，有一些锁的所有者在持有锁时不能被抢占或休眠，因此在这些情况下旋转也能很好地工作。但总的来说，特别是在用户态，旋转有如此可怕的退化情况（旋转过程旋转直到它被抢占让锁所有者运行），这对性能非常不利。请注意，专门的锁定原语`futex`可以实现这样的优化，而通用条件变量通常不能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T13:52:12.097

简而言之：是的，也许……

这是实现细节，如果不知道您在谈论哪个操作系统，就很难说。通常，解锁互斥体只会将等待线程标记为“可运行”，但不会（必然）在那时调用调度程序——即使调用了调度程序，也不意味着 T2 将成为下一个线程跑步。

在 Linux 中，代码进入`mutex_unlock()`which 检查是否有任何等待任务（通过检查锁计数是否小于零 - 它从 1 开始表示未锁定，单个锁请求使其为零，进一步尝试锁定将使其变为负数）。如果有进一步的等待过程，它会调用“慢速路径解锁”，它通过几个重定向函数来允许实现细节，最终会在[`__mutex_unlock_common_slowpath`](http://lxr.linux.no/linux+%2a/kernel/mutex.c#L307)- 再往下几行，有一个调用`wake_up_process`最终会在[`try_to_wake_up`](http://lxr.linux.no/linux+%2a/kernel/sched/core.c#L1429)-它本质上只是将任务排队为“准备运行”，然后调用调度程序（通过几层函数！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:02:57.433

假设我们有以下场景：

```
 1\. T1 got M1\. M1 locked.
 2\. T2 tries to get M1 and gets blocked as M1 is locked.
 3\. T3 tries to get M1 and gets blocked as M1 is locked.
 4\. ...some time later...
 5\. T1 unlocks M1.*
 6\. T2 got M1.
 7\. T3 is unblocked and tries to get M1 but is blocked again as T2 got M1 first. 
```

*系统调用**unlock**应该**通知所有**被互斥**锁调用**阻塞的阻塞**任务/进程/线程**。然后他们被**安排**执行。这并不意味着他们被执行，因为可能已经有人在执行。正如其他人所说，这取决于实现方式。如果你真的想学好，我会推荐这[**本书**](https://rads.stackoverflow.com/amzn/click/com/013230998X)****[](https://rads.stackoverflow.com/amzn/click/com/013230998X)****

# javascript - Windows 商店应用程序的语言选择：C++ 还是 javascript？

> ID：15090182
> 
> 赞同：0
> 
> 时间：2013-02-26T13:21:12.830
> 
> 标签：javascript, visual-c++, windows-8, visual-studio-2012, windows-store-apps

我正计划开发一个 Windows 商店应用程序，并想要一些关于选择哪种语言的建议..

我知道 C++ 和 javascript。我想知道以下内容 -

两种语言是否具有相同的支持？意思是，假设我需要自定义 App 工具栏的外观和行为，或者我需要拥有自己的 UI 面板，其中包含一些按钮？他们对两种语言有相同的支持吗（在 API 方面）？

另外，我有一个需要使用的现有 C++ 组件（库包）——从 JS 世界与这个库进行通信有多容易？

我还具有与在线服务通信以检索和发送数据的功能。我将在网格视图中显示这些数据并与该网格视图交互。

将有一个编辑视图，我希望其中包含按钮的 UI 面板和带有 UI 控件（如滑块和切换按钮）的弹出窗口等。这些语言做起来有多容易？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:33:01.633

如果您使用 javascript，它可能会更慢，因为 WinRT 使用 IE 呈现它。

# iphone - 是否可以在第三方应用程序中阻止 iOS 上的特定邮件帐户？

> ID：15090184
> 
> 赞同：0
> 
> 时间：2013-02-26T13:21:20.097
> 
> 标签：iphone, ios, email

我正在考虑创建一个非常简单的 iOS 应用程序，根据您在应用程序中选择的内容，它会阻止您 iOS 设备上邮件应用程序中的特定邮件帐户。例如，您可以选择在晚上阻止您的工作电子邮件地址，这样当您打开邮件应用程序时它就不会接收邮件。还有更多，但基本上我要确定的是是否有可能a）通常-通过第三方应用程序更改默认iOS应用程序和b）特别是-阻止特定邮件帐户使用第三方应用程序。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:28:12.553

Apple 没有提供任何以您尝试的方式访问 Mail 应用程序的方法。

请记住，作为第一方应用程序，邮件客户端**始终**在后台进程中运行。即使 Apple 提供了一个 API 来执行您尝试执行的操作，您的应用程序也必须遵循第三方应用程序的正常后台任务限制，这意味着它最终会关闭，让邮件客户端发送邮件不受您的过滤影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:28:38.343

a）使用“常规”应用程序是不可能的。您需要为越狱设备编写一个应用程序（尽管没有太多文档，祝你好运哈哈）。

b）一旦您开始越狱应用程序项目，我认为几乎一切皆有可能。您可以更改系统应用程序并做几乎任何您想做的事情（只要您知道怎么做）。

可能还有另一种方法，即创建一个完整的邮件替换应用程序，您可以在其中提供所有基本功能等等。也许不像您的想法那样*性感*，但它可能比越狱应用程序更容易。

# drop-down-menu - AngularJS + Bootstrap Dropdown：不能在 ng-repeat 中进行 ng-click

> ID：15090185
> 
> 赞同：9
> 
> 时间：2013-02-26T13:21:22.557
> 
> 标签：drop-down-menu, twitter-bootstrap, angularjs, ng-repeat

我正在尝试使用 Bootstrap Dropdown 和 AngularJS 创建一个选择器。

[http://jsfiddle.net/qbjfQ/](http://jsfiddle.net/qbjfQ/)

```
<li ng-repeat="item in list"><a ng-click="current = item">Dynamic set {{item}}</a></li> 
```

当我在列表中静态使用 ng-click 时，它工作正常（示例 4 和 5）但是当我在 ng-repeat 中使用 ng-click 时，它不会更新值（示例 1 到 3）

我能做些什么 ？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-26T13:25:03.190

这是指令中范围界定的一个已知问题。您可以阅读文章[The Nuances of Scope Prototypal Inheritance](https://github.com/angular/angular.js/wiki/The-Nuances-of-Scope-Prototypal-Inheritance)以了解有关 Angular js 中作用域的更多信息。

您需要更改`ng-repeat`为

```
<li ng-repeat="item in list">
  <a ng-click="$parent.current = item">
    Dynamic set {{item}}
  </a>
</li> 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/qbjfQ/1/)

有关问题的解释，您可以阅读[我](https://stackoverflow.com/questions/15037743/why-does-assignment-not-always-work-in-angular-expressions/15037878#15037878)对[这个问题的回答](https://stackoverflow.com/questions/15037743/why-does-assignment-not-always-work-in-angular-expressions)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T14:10:09.243

一种选择是在`ng-click`

HTML：

```
<li ng-repeat="item in list"><a ng-click="setCurrent( item)">Dynamic set {{item}}</a></li> 
```

JS

```
function MyCtrl($scope) {

    $scope.list = [1,2,3];
    $scope.setCurrent=function(val){
         $scope.current =val;
    }    
    $scope.current = 0;    
} 
```

演示：http: [//jsfiddle.net/qbjfQ/2/](http://jsfiddle.net/qbjfQ/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T16:03:34.900

有一个 angularjs 指令可以做到这一点：[https ://gist.github.com/andyvr/5205764](https://gist.github.com/andyvr/5205764)

这是带有示例的 jsfiddle：http: [//jsfiddle.net/M32pj/1/](http://jsfiddle.net/M32pj/1/)

```
Sample: 
<select ng-model="example1" bs-selectbox>
 <option value="1">One</option>
 <option value="2">Two</option>
</select> 
```

# java - 另一个线程中的 Android 视频视图 & android 2.1 的问题

> ID：15090187
> 
> 赞同：5
> 
> 时间：2013-02-26T13:21:23.937
> 
> 标签：java, android, multithreading, video-streaming, android-videoview

我想在 android 视频视图中流式传输视频表单 url。我使用示例 api 代码并对其进行了少量修改来满足我的需要。我的代码是

```
public class VideoViewDemo extends Activity {

private static final String TAG = "VideoViewDemo";
private String current;

/**
 * TODO: Set the path variable to a streaming video URL or a local media
 * file path.
 */
private String path = "http://www.boisestatefootball.com/sites/default/files/videos/original/01%20-%20coach%20pete%20bio_4.mp4";
private VideoView mVideoView;

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.videoview);
    mVideoView = (VideoView) findViewById(R.id.surface_view);
    runOnUiThread(new Runnable() {
        public void run() {
            playVideo();
        }
    });
}

private void playVideo() {
    try {
        // final String path = path;
        Log.v(TAG, "path: " + path);
        if (path == null || path.length() == 0) {
            Toast.makeText(VideoViewDemo.this, "File URL/path is empty",
                    Toast.LENGTH_LONG).show();

        } else {
            // If the path has not changed, just start the media player
            if (path.equals(current) && mVideoView != null) {
                mVideoView.start();
                mVideoView.requestFocus();
                return;
            }
            current = path;
            mVideoView.setVideoPath(getDataSource(path));
            mVideoView.start();
            mVideoView.setMediaController(new MediaController(this));
            mVideoView.requestFocus();

        }
    } catch (Exception e) {
        Log.e(TAG, "error: " + e.getMessage(), e);
        if (mVideoView != null) {
            mVideoView.stopPlayback();
        }
    }
}

private String getDataSource(String path) throws IOException {
    if (!URLUtil.isNetworkUrl(path)) {
        return path;
    } else {
        URL url = new URL(path);
        URLConnection cn = url.openConnection();
        cn.connect();
        InputStream stream = cn.getInputStream();
        if (stream == null)
            throw new RuntimeException("stream is null");
        File temp = File.createTempFile("mediaplayertmp", "dat");
        temp.deleteOnExit();
        String tempPath = temp.getAbsolutePath();
        FileOutputStream out = new FileOutputStream(temp);
        byte buf[] = new byte[128];
        do {
            int numread = stream.read(buf);
            if (numread <= 0)
                break;
            out.write(buf, 0, numread);
        } while (true);
        try {
            stream.close();
        } catch (IOException ex) {
            Log.e(TAG, "error: " + ex.getMessage(), ex);
        }
        return tempPath;
    }
}
} 
```

在这里你可以看到我正在使用 uithread 流式传输视频。有什么方法可以通过我的线程处理这个

我试过的是

```
new Thered(new Runnable() {
        public void run() {
            playVideo();
        }
    }).start(); 
```

但它失败了

而且在 Android 2.2 中运行时，第一个代码运行，它`error(-38,0)`在 Android 2.1 中显示这个错误是什么？我检查了[这个文件](https://github.com/android/platform_external_opencore/blob/master/pvmi/pvmf/include/pvmf_return_codes.h)，但找不到这是什么错误？？

有人可以指导我吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T11:48:43.270

您不需要获取整个视频，并将其保存在文件系统中，然后运行它..您提到的视频大小为 32Mb，通过网络获取需要很长时间。相反，您可以提供指向 videoview 的直接链接，它将逐步获取/缓冲视频并播放它。您试图在 UI 线程中获取视频数据，这是不可接受的。这是更正的代码，您可以检查它。

```
public class VideoViewDemo extends Activity {

private static final String TAG = "VideoViewDemo";
private String current;

/**
 * TODO: Set the path variable to a streaming video URL or a local media
 * file path.
 */
private String path = "http://www.boisestatefootball.com/sites/default/files/videos/original/01%20-%20coach%20pete%20bio_4.mp4";
private VideoView mVideoView;

private Handler handler;

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    handler = new Handler();
    setContentView(R.layout.videoview);
    mVideoView = (VideoView) findViewById(R.id.surface_view);
/*    runOnUiThread(new Runnable() {
        public void run() {
            playVideo();
        }
    });
*/    
    playVideo();
    Log.v(TAG, "activity oncreate finished");
}

private void playVideo() {
    try {
        // final String path = path;
        Log.v(TAG, "path: " + path);
        if (path == null || path.length() == 0) {
            Toast.makeText(VideoViewDemo.this, "File URL/path is empty",
                    Toast.LENGTH_LONG).show();

        } else {
            // If the path has not changed, just start the media player
            if (path.equals(current) && mVideoView != null) {
                mVideoView.start();
                mVideoView.requestFocus();
                return;
            }
            current = path;

            mVideoView.setVideoPath(path);
            mVideoView.start();
            mVideoView.setMediaController(new MediaController(VideoViewDemo.this));
            mVideoView.requestFocus();

        }
    } catch (Exception e) {
        Log.e(TAG, "error: " + e.getMessage(), e);
        if (mVideoView != null) {
            mVideoView.stopPlayback();
        }
    }
}

} 
```

# c++ - 使用 dumpbin.exe 的 DLL 函数名称

> ID：15090196
> 
> 赞同：12
> 
> 时间：2013-02-26T13:21:49.880
> 
> 标签：c++, windows, visual-studio-2010, dll

我在 Visual Studio 2010 中编写了一个包含许多函数和类的 .dll 库。当我查看文件内容时：

```
dumpbin.exe /EXPORTS myDll.dll 
```

我得到带有某种函数位置指针的长函数名称，如下所示（.dll 中的第二个条目）：

```
 2    1 0001100A ?Initialize@codec@codecX@@SANNN@Z = @ILT+5(?Initialize@codec@codecX@@SANNN@Z) 
```

这有点难以阅读，但我从其他 .dll-s 中看到了“更好”的过程/函数列表，如下所示：

```
141   8C 00002A08 PogoDbWriteValueProbeInfo 
```

**我怎样才能使那个 .dll 列表看起来那样？**

*PS：我的 dll 源代码如下所示：*

```
namespace codecX
{
   class codec
   {
      public:
      static __declspec(dllexport) double Initialize(double a, double b);
      ... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T13:27:45.383

您需要将这些静态成员函数拉入全局地址空间，然后用 extern "C" 包装它们。这将抑制 C++ 名称修饰，而是为您提供不那么难看的 C 名称修饰：

```
extern "C" __declspec(dllexport) Initialize(double a, double b)
{
    codec::Initialize(a, b);
} 
```

然后删除静态成员函数上的 __declspec(dllexport) ：

```
class codec
{
    public:
        static double Initialize(double a, double b);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T13:28:16.383

这称为**名称修改**，当您使用 C++ 编译器编译 C++ 时会发生这种情况。为了保留`extern "C"`在声明和定义类和函数时必须使用的“人类可读”名称。IE

```
extern "C" void myFunction(int, int); 
```

见[这里](http://yosefk.com/c++fqa/mixing.html)和谷歌`mixing C and C++`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-23T16:03:28.960

您所看到的是函数名称的 C++ 修饰。

如果需要将此函数保留为 C++ 函数，您可以`dumpbin.exe`使用该实用程序对输出进行后期处理以获得正常的函数名称`undname.exe`。

Microsoft Visual Studio 提供了一个用于取消修饰 C++ 损坏的函数名称的实用程序，称为`undname.exe`.

它可以按如下方式使用：

```
C:\>undname ?func1@a@@AAEXH@Z
Microsoft (R) C++ Name Undecorator
Copyright (C) Microsoft Corporation. All rights reserved.

Undecoration of :- "?func1@a@@AAEXH@Z"
is :- "private: void __thiscall a::func1(int)" 
```

# macos - 尝试在 OSX 上构建 iniparser 时出现“ld：未知选项：-Bsymbolic”

> ID：15090198
> 
> 赞同：2
> 
> 时间：2013-02-26T13:21:56.123
> 
> 标签：macos, build, ld

我正在尝试在 OSX上构建[http://github.com/ndevilla/iniparser ，但得到：](http://github.com/ndevilla/iniparser)

```
~/ make
compiling src/iniparser.c ...
compiling src/dictionary.c ...
a - src/iniparser.o
a - src/dictionary.o
ld: unknown option: -Bsymbolic
collect2: ld returned 1 exit status
make: *** [libiniparser.so] Error 1 
```

这似乎不是代码本身的已知问题。我需要在我的系统上进行什么调整？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:00:01.247

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-10T12:35:20.810

Using bdash's answer you can build iOS openssl-1.1.1 by doing the following:

```
sed -ie "s!-Bsymbolic! !" "Makefile"
sed -ie "s/-Wl,-soname=libssl\$(SHLIB_EXT)/ /g" "Makefile"
sed -ie "s/-Wl,-soname=libcrypto\$(SHLIB_EXT)/ /g" "Makefile"
sed -ie "s/--version-script=libcrypto.map/ /g" "Makefile"
sed -ie "s/--version-script=libssl.map/ /g" "Makefile" 
```

# rar - 操作 rar 文件中的文件

> ID：15090202
> 
> 赞同：0
> 
> 时间：2013-02-26T13:22:14.013
> 
> 标签：rar

我下载了一部电影，由于它的大小，它被分成了 5 个 rar 文件。该文件的前 4 个部分是从一个站点下载的，而第 5 个文件是从另一个站点下载的，因为指向原始站点中第五个文件的链接已损坏。问题是第五个文件在子文件夹中，而前四个文件在根文件夹中，所以我无法合并文件以获取 avi 文件。有没有办法可以操纵第五个文件并将其移动到根文件夹？Part1.avi Part2.avi Part3.avi Part4.avi 子文件夹\part5.avi

我最后的手段是从第二个站点重新下载文件的前 4 部分，但如果可能的话，我想避免这种情况。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:02:16.163

最简单的方法是也下载这 4 个其他部分。我看到了可能使其复杂化的问题，但这是可能的。

首先要问自己的是每个可用的 RAR 文件中有多少数据？这两个 RAR 集是否相同？可能不是。Set 2 存储了路径，因此使其更大。两组中哪一组包含的数据最多？如果它是第一组，那么您也需要从第二组下载第 4 部分，否则会有大量您没有的数据。

第二个问题：档案是否被压缩？如果第一组是，则问题不大，但如果使用压缩，我看不到打开第二组的可能性。您谈论一部电影，所以除非白痴打包电影，否则我的猜测是不会使用压缩。

文件夹中可能存储了一个 nfo 文件，但积极的是，您在第 5 部分中将拥有比需要更多的数据，但我希望无论如何都是这样。

这是我对最佳情况的实验：档案中的数据大小相同，并且不使用压缩。我解决这个问题的想法是使用十六进制编辑器编辑第 5 部分中的名称，但是不，我创建的档案没有相同的数据，所以它会与您的设置相匹配。

我创建了测试文件。我重命名了第 5 部分以匹配第一组：尝试提取时出现 CRC 错误。这是因为第 5 部分的数据太多。撤消重命名。从第一组中提取部分电影：使用 WinRAR 提取时，选中其他部分中的“保留损坏的文件”框。

要从最后一个 RAR 文件中获取数据，请使用以下工具：[hachoir-wx](https://stackoverflow.com/questions/6896487/how-to-determine-compression-method-of-a-zip-rar-file/6914588#6914588)

打开文件[0]/块并右键单击compressed_data。选择转储到磁盘.... 现在您的电影分为 2 个部分仍需要合并，但第 2 部分的数据有点过多。

接下来需要做的是将正确的字节复制到一个新文件中。这是计算需要从文件 2 中删除的内容的公式：

```
(size part 1) + (size part 2 - X) = total size movie file 
```

总文件大小可以从 WinRAR 中读出。您拥有的其他尺寸和 X 可以计算出来。

您可以通过编写一个小脚本来加入这两个文件，或者您可以使用十六进制编辑器来完成。Python 脚本可能如下所示：

```
folder = "C:\movie"
name_part_1 = os.path.join(folder, "movie_part1.avi")
name_part_2 = os.path.join(folder, "movie_part2.avi")
out = os.path.join(folder, "good_name.avi")
x = 1337

with open(out, "wb") as good:
    with open(name_part_1, "rb") as one:
        good.write(one.read())
    with open(name_part_2, "rb") as two:
        two.seek(x)
        good.write(two.read()) 
```

# android - 如何在android中更新google map api 2上的标记？

> ID：15090206
> 
> 赞同：2
> 
> 时间：2013-02-26T13:22:20.637
> 
> 标签：android, google-maps-markers, google-maps-android-api-2

我必须在 google map api 2 上显示多个标记。标记将使用具有 ImageView 的布局，该 ImageView 将从 webService 获取图像。而且我必须以循环方式显示图像。我尝试了很多，但我没有找到任何好的解决方案。

# c++ - boost 是否具有比 STL 更简单的集合操作数据类型？

> ID：15090209
> 
> 赞同：29
> 
> 时间：2013-02-26T13:22:40.937
> 
> 标签：c++, boost, stl, set

我发现执行简单集合操作[的 C++ STL 方法使用起来非常笨拙。](https://stackoverflow.com/a/284004/794283)例如，要查找两组之间的差异：

```
std::set<int> newUserIds;
set_difference(currentUserIds.begin(), currentUserIds.end(), mPreviousUserIds.begin(), mPreviousUserIds.end(), std::inserter(newUserIds, newUserIds.end()));
std::set<int> missingUserIds;
set_difference(mPreviousUserIds.begin(), mPreviousUserIds.end(), currentUserIds.begin(), currentUserIds.end(), std::inserter(missingUserIds, missingUserIds.end()));
mPreviousUserIds = currentUserIds; 
```

boost 是否提供了一组替代类，可以将上述示例简化为如下所示：

```
set_type<int> newUserIds = currentUserIds.difference(mPreviousUserIds);
set_type<int> missingUserIds = mPreviousUserIds.difference(currentUserIds); 
```

（类似于Qt 中的[QSet](http://qt-project.org/doc/qt-5.0/qtcore/qset.html)`operator-` ，它以这种方式覆盖。）

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-02-26T13:47:20.073

没有。但我这里是如何清理它。

首先，将基于迭代器的函数重写为基于范围的函数。这将您的样板减半。

其次，让它们返回容器构建器而不是使用插入迭代器：这为您提供了高效的赋值语法。

第三，可能太过分了，把它们写成命名操作符。

最后的结果是你得到：

```
set<int> s = a *intersect* b;
set<int> s2 = c -difference- s;
set<int> s3 = a *_union_* (b *intersect* s -difference- s2); 
```

...在其他地方编写了大量样板代码之后。

据我所知，boost 会执行第 1 步。

但是上述三个阶段中的每一个都应该显着减少你的样板。

容器构建器：

```
template<typename Functor>
struct container_builder {
  Functor f;
  template<typename Container, typename=typename std::enable_if<back_insertable<Container>::value>::type>
  operator Container() const {
    Container retval;
    using std::back_inserter;
    f( back_inserter(retval) );
    return retval;
  }
  container_builder(Functor const& f_):f(f_) {}
}; 
```

这需要写作`is_back_insertable`（相当标准的 SFINAE）。

您包装基于范围（或基于迭代器）的函子，该函子将 back_insert_iterator 作为最后一个参数，并用于`std::bind`绑定输入参数，使最后一个空闲。然后将其传递给`container_builder`，然后返回。

`container_builder`然后可以隐式转换到任何接受`std::back_inserter`（或具有自己的 ADL `back_inserter`）的容器，并且`move`每个容器上的语义`std`使得构造-然后-返回非常有效。

这是我的十几行命名运算符库：

```
namespace named_operator {
  template<class D>struct make_operator{make_operator(){}};

  template<class T, char, class O> struct half_apply { T&& lhs; };

  template<class Lhs, class Op>
  half_apply<Lhs, '*', Op> operator*( Lhs&& lhs, make_operator<Op> ) {
    return {std::forward<Lhs>(lhs)};
  }

  template<class Lhs, class Op, class Rhs>
  auto operator*( half_apply<Lhs, '*', Op>&& lhs, Rhs&& rhs )
  -> decltype( named_invoke( std::forward<Lhs>(lhs.lhs), Op{}, std::forward<Rhs>(rhs) ) )
  {
    return named_invoke( std::forward<Lhs>(lhs.lhs), Op{}, std::forward<Rhs>(rhs) );
  }
} 
```

使用它来实现的[现场示例](http://coliru.stacked-crooked.com/a/dfbdf7cdde234414)`vector *concat* vector`。它只支持一个运算符，但扩展它很容易。对于严肃的使用，我建议有一个`times`默认调用的函数，`invoke`一个`*blah*`同样`add`的函数`+blah+`，等等。 `<blah>`可以直接调用`invoke`.

然后客户端程序员可以重载特定于运算符的重载并且它可以工作，或者一般的`invoke`.

[这是一个类似的库，用于实现`*then*`](https://stackoverflow.com/questions/27068396/c11-pattern-for-factory-function-returning-tuple)元组返回函数和期货。

这是一个原语`*in*`：

```
namespace my_op {
  struct in_t:named_operator::make_operator<in_t>{};
  in_t in;

  template<class E, class C>
  bool named_invoke( E const& e, in_t, C const& container ) {
    using std::begin; using std::end;
    return std::find( begin(container), end(container), e ) != end(container);
  }
}
using my_op::in; 
```

[活生生的例子](http://coliru.stacked-crooked.com/a/42e907eada8e8b94)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-26T13:24:16.773

请参阅[Boost Range Set 算法](http://www.boost.org/doc/libs/1_53_0/libs/range/doc/html/range/reference/algorithms/set.html)。不过，他们仍然期望输出迭代器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T13:25:27.087

不，我认为它从来没有这样的东西，这是 C++ 中的一般原则，即当你可以有一个非成员函数来完成这项工作时，永远不要让该函数成为成员。所以它不能那样，但可能是[Boost::Range](http://www.boost.org/doc/libs/1_53_0/libs/range/doc/html/range/)帮助你。

# c++ - std::is_base_of() 深度

> ID：15090216
> 
> 赞同：1
> 
> 时间：2013-02-26T13:22:55.707
> 
> 标签：c++, c++11

我有这样的层次结构：

```
namespace MyService{
class IBase
{
public:
    virtual ~IBase(){}

protected:
    IPointer *_somePointer;

};
} 
```

```
class IInterface: public MyService::IBase
{
public:
    virtual ~IInterface(){}

    virtual std::string get() const = 0;
}; 
```

```
class ConcreteClass: public IInterface
{
public: 
    std::string get() const
    {
        bool isNull = (_somePointer == NULL);
        return "Hello";
    }
}; 
```

```
bool isBase = std::is_base_of<IBase, ConcreteClass>::value; 
```

我需要检查 I3 是从 I1 派生的。但是 std::is_base_of() 对我来说效果不佳 - 它返回错误。目标是添加到任何类 IBase 并检查任何类在它的层次结构中是否有 IBase

找到了问题，但没有解决。我的代码是：

```
template<class Base, class Derived>
    bool IsDerivedFromBase()
    {
        if( std::tr1::is_fundamental<Base>::value )
            throw MyService::Exceptions::ETypeTraitsInvalidArgument( "Base class can't be POD" );
        if( std::tr1::is_fundamental<Derived>::value )
            throw MyService::Exceptions::ETypeTraitsInvalidArgument( "Derived class can't be POD" );

        bool a = std::tr1::is_base_of<Base, Derived>::value;
        return a;
    } 
```

我有一个这样的

```
bool a = std::is_base_of<MyService::IBase, SomeInterface>::value; // true
a = IsDerivedFromBase<MyService::IBase, SomeInterface>(); // false 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:30:25.107

这确实`true`与 G++ 4.7 一起输出：

```
class I1{};
class I2: public I1{};
class I3: public I2{};

int main(int argc, const char* argv[])
{
  std::cout << std::boolalpha
            << std::is_base_of<I1, I3>::value
            << std::endl;
  return 0;
} 
```

^(请注意，这`std::is_base_of<I1, I3>::value`相当于实例化一个类型的对象`std::is_base_of<I1, I3>`并将其转换为`bool`.)

我相信这样做是准确的。`std::is_base_of<Base, Derived>`被定义为具有条件（§20.9.6）：

> `Base`是`Derived`(10) 的基类，不考虑 cv 限定符，或者`Base`不是`Derived`联合，并且命名相同的类类型而不考虑 cv 限定符

*基类*是这样定义的（§10）：

> 一个类`B`是一个类的基类，`D`如果它是 的一个基类的直接基类`D`或其中一个基类的直接基`D`类。

所以是的，`I1`是的基类，`I3`应该`std::is_base_of<I1, I3>::value`是`true`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:31:06.743

[不，代码有效：](http://stacked-crooked.com/view?id=7d91ece11402bbade951cf49f211cbda)

```
#include <iostream>
#include <type_traits>

class A {};
class B : public A {};
class C : public B {};

int main() {
    std::cout << std::boolalpha;
    std::cout << "a2b: " << std::is_base_of<A, B>() << '\n';
    std::cout << "b2a: " << std::is_base_of<B, A>() << '\n';
    std::cout << "c2b: " << std::is_base_of<C, B>() << '\n';
    std::cout << "a2c: " << std::is_base_of<A, C>() << '\n';
} 
```

产量：

```
a2b: true
b2a: false
c2b: false
a2c: true 
```

以上适用于 GCC 4.6 和 4.7。如果您使用的是其他东西，则需要指定它。

您的错误必须在其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:22:29.313

我发现了问题。我有一些带有单元测试的 .cpp 文件，我在其中定义了同名的本地类。尚未在标准 tis 中找到，但重现代码类似于：

```
/// 1.cpp
class IInterface{};
class Interface: public IInterface{};

/// class 2.cpp
class IInterface: public MyService:IBase{};
class Interface: public IInterface{};

/// facility.h
namespace a{ namespace b{
    template<class T, class B>
    bool IsBaseOf(){
        return std::is_base_of<T, B>();
    }
}
}
}

/// ...main
a::b::IsBaseOf<MyService::IBase, Interface>(); 
```

它应该/可能会失败。但是，如果我使类名独一无二，那也没关系。

# java - ActionRedirect 迁移到 Struts 2

> ID：15090217
> 
> 赞同：1
> 
> 时间：2013-02-26T13:22:56.843
> 
> 标签：java, struts2, migration, struts, actionresult

我目前正在将一个 wepapp 从 Struts 迁移到 Struts 2，我遇到了一些困难。

我有一些`ActionRedirect`没有给它额外的参数，我不知道如何迁移它，也许只返回一个字符串是有效的？

例如我有这个：

```
return new ActionRedirect(mapping.getFindforward("failed"); 
```

这样做是否有效？

```
return "failed"; 
```

当我有参数时，我该如何迁移它？我从 2 天开始就在这方面工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:53:11.590

在 Struts2 中，`"redirect"`如果您想要重定向到特定 URL，或者`"redirectAction"`如果您想要重定向到配置中的已知操作，则创建类型的结果会进行重定向。

这些结果您可以在 Struts1 中配置动作或全局前向。

不同之处在于您不需要在其中找到它，`mapping`它将由框架完成。

如果您返回`"failed"`，框架将查找命名结果的配置，`"failed"`如果找不到此类结果，则会抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:29:36.567

在 struts.xml 类中，您可以指定

```
<result type="redirect"      
name="failed">redirect action name</result> 
```

在动作类中，您可以使用

返回“失败”

或 Action 类中存在的任何常量

# java - 如果可能，无需等待/通知即可协调线程

> ID：15090218
> 
> 赞同：0
> 
> 时间：2013-02-26T13:22:58.067
> 
> 标签：java, multithreading, events, concurrency, java.util.concurrent

此外`wait/notify`，还有更简洁的线程间事件通知方式吗？
例如，如果我想`Thread X`通知`ThreadY`发生了什么事情，在并发包中是否有比在上面构建更好的构造`wait/notify`？
我的要求很简单： `ThreadB`期望事件发生。`ThreadA`负责检测此类更改。发生变化时`ThreadA`通知`ThreadB`

**更新：**
我需要做观察者/观察者模式，但我希望观察者在通过循环通知观察者时尽可能少地阻塞。
即观察者将是单独的线程，并且可观察到的火变化将“通知”它们以尽可能少地阻塞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-27T10:08:44.210

如果您不想引入任何复杂的数据结构而只是通知线程，那么您还可以查看中断线程。消费者线程并循环运行，当被中断时，它们执行处理，然后再次退出/循环运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:26:21.660

如果您不想阻止观察者（因为他们正忙于其他任务），那么您需要实现某种轮询机制。您不能只是神奇地调用另一个未被阻塞的线程中的方法，因为另一个线程有自己的顺序逻辑。

最简单的轮询解决方案是将 volatile 变量设置为特殊值，并定期从观察者线程检查该变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:34:34.567

您可以使用[ExecutorService 。它从](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)[Executor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executor.html)扩展而来 ，它提供了管理终止的方法和可以产生 Future 以跟踪一个或多个异步任务的进度的方法。在您描述的[线程间通信](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&cad=rja&sqi=2&ved=0CFcQFjAF&url=http://en.wikipedia.org/wiki/Inter-process_communication&ei=tbksUbXFBcaIrAfF94HwDQ&usg=AFQjCNHNOAMQbnzDqBKaYTRkwdvjDa4NWQ&bvm=bv.42965579,d.bmk)这样的情况下使用它非常简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:27:29.680

不要写等待/通知。使用 java.concurrent 工具。 [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/package-summary.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/package-summary.html)

例如，如果未绑定队列适合您的要求，则使用 ConcurrentLinkedQueue： [http ://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)

顺便说一句，最好的选择是通过使用期货和演员来完全避免手动管理线程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T13:38:52.990

不幸的是，您的要求仍然含糊不清。您可以将三个主要的并发原语用于更高级别的通知，然后是等待/通知和等待/信号。

你可以有一个等待线程完成的屏障，一个等待来自另一个线程的消息的屏障，或者你可以有一个等待事件的多个线程的屏障。

您可以使用`CyclicBarrier`,`CountdownLatch`或`Phaser`.

对于第二个，您可以使用任何 BlockingQueue，无论是`LinkedBlockingQueue`、还是。`ArrayBlockingQueue``SynchronousQueue``TransferQueue`

最后，您可以使用`ExecutorService`+ `Future`。

下一个问题：

究竟什么是事件以及正在发生什么变化？[这很重要，如果字段正在更改，您可以使用SettableFuture](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/SettableFuture.html)支持您的字段/事件更新

编辑：

你能包括一个新的图书馆。看来[Akka](http://akka.io/)很适合你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T13:39:53.223

java.util.concurrent.locks 包类 Lock、Condition 和其他类可以更好地控制线程协调。

# ios - iOS中使用UIDatePicker的定时器倒计时

> ID：15090219
> 
> 赞同：1
> 
> 时间：2013-02-26T13:23:03.127
> 
> 标签：ios, cocoa-touch, uidatepicker

在我的应用程序中，我让用户设置倒数计时器`UIDatePicker's` `CountDownTimer`。

我有一个`UILabel`显示计数时间当用户从 CountDownTimer 中选择时间时，我想显示在 CoutDownTimer 中选择的用户的计数，如下图所示。

![在此处输入图像描述](../Images/3a587936feca33a0bd44f7f03057d694.png)

`CountDownTimer`所以我使用以下代码检索用户选择的计数时间

```
self.dateFormatter = [[NSDateFormatter alloc] init];
[self.dateFormatter setDateFormat:@"HH:mm:ss"];

self.sleepTimer = [NSTimer timerWithTimeInterval:1.00 target:self selector:@selector(timerFired:) userInfo:nil repeats:NO]; 
```

当它到达 00:00 时，我想触发一个事件。

我不知道如何减少每秒倒计时。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:34:42.690

你可以这样做：

```
[NSTimer timerWithTimeInterval:1.00 target:self selector:@selector(decrementByOne:) userInfo:nil repeats:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:51:20.960

将您的`countDownDuration`属性`UIDatePicker`（值以秒为单位）保存在一个名为`secondsLeft`.

```
self.sleepTimer = [NSTimer scheduledTimerWithTimeInterval:1.00 target:self selector:@selector(timerFired:) userInfo:nil repeats:YES]; 
```

`timerFired:`这将每秒调用您的方法。减去`secondsLeft`1。用剩下的时间更新你`UILabel`的时间（将你的秒数格式化为 hh:mm:ss -[请参阅有关格式化的这个问题](https://stackoverflow.com/questions/4042958/how-to-find-the-difference-between-two-dates-in-hhmmss-format-in-objective-c/4043251#4043251)）。验证倒计时是否还有时间，如果倒计时完成，则采取适当的措施 ( `secondsLeft <= 0`)。

倒计时完成后记得清理；

```
[self.sleepTimer invalidate];
self.sleepTimer = nil; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:35:51.383

记下你的日期，将其保存到一个属性中，然后查看 NSDates

```
– dateByAddingTimeInterval: 
```

所以如果你这样做

```
[self.date dateByAddingTimeInterval:-1]; 
```

您将日期递减 1 秒。之后，使用新的计算日期更新您的 UI。

此外，您可以将所有代码打包在一个函数中并通过调用执行此函数：

```
performSelector:withObject:afterDelay: 
```

# google-chrome - chrome浏览器中url的最大长度

> ID：15090220
> 
> 赞同：44
> 
> 时间：2013-02-26T13:23:02.803
> 
> 标签：google-chrome, url, browser

我见过这个流行的问题：

[不同浏览器中 URL 的最大长度是多少？](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)

但由于我无法直接找到对 Google Chrome 的引用（并且由于大多数答案都是几年前给出的），我想知道 Google Chrome 浏览器的 URL 长度当前限制是什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-26T13:26:40.453

我相信它保持不变：

> 我找不到 Chrome 和 Safari 的任何限制。两者都是基于 WebKit 的，它似乎有与 Firefox 类似的限制。
> 
> Firefox 在 64k 个字符后停止显示，但可以提供超过 100k 个字符。

您可以[在本文中阅读更多相关信息。](http://wiert.me/2010/04/20/maximum-url-lengths/)

一般来说，URL 的长度没有“限制”，但[这个答案](https://stackoverflow.com/a/33733386/2091793)表明您应该将 URL 保持在 2048 个字符以下，以确保它在每个客户端和服务器中都能正常工作。

[**有关所有浏览器的更多信息，请点击此处。**](https://stackoverflow.com/a/417184/2091793)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-08-19T12:54:57.680

Chrome 的当前限制为 2MB。这个问题在这里讨论：

[https://code.google.com/p/chromium/issues/detail?id=69227](https://code.google.com/p/chromium/issues/detail?id=69227)

当您需要解决诸如使用“toDataUrl”源显示图像等问题时，您会在那里找到资源，例如解决方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T13:43:12.773

除了处理 URL 可能依赖于实现这一事实之外，`HTTP/1.1`规范在 that 中*`RFC2616`*指出：

> RFC 2616（超文本传输​​协议 - HTTP/1.1）在第 3.2.1 节中声明对 URI 的长度没有限制（URI 是大多数人称之为 URL 的官方术语）。

我不知道 Google Chrome 最多可以接受多少个字符，甚至不知道当前是否存在这样的限制。例如，它可能会在[Chromium GIT 存储库](https://chromium.googlesource.com/)`Win32 API`中的一个不起眼的定义中指定，或者甚至由on windows中文本输入的最大值指定。

但是，大多数 Web 服务器都有关于 URL 长度的限制。在大多数情况下，他们可能会抛出一个`413 Entity Too Large`响应。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-15T20:10:34.050

理论上它应该是无限的，但是在实践中，大多数 Http 客户端或浏览器被限制为 2083 个字符的 Url 长度。

# dynamics-crm-2011 - 在命名空间中调用 JavaScript 函数的表单事件

> ID：15090222
> 
> 赞同：0
> 
> 时间：2013-02-26T13:23:13.590
> 
> 标签：dynamics-crm-2011

如何从表单事件调用命名空间中的函数？我努力了

```
accountLib.accountType.showType 
```

和

```
accountLib.accountType.showType() 
```

在 onload 事件中，但它不起作用。
这是代码：

```
/// <reference path="Scripts/XrmPageTemplate.js" />
if (typeof (accountLib) == "undefined") {
accountLib == {}; // namespace
}
accountLib.accountType = {
    showType: function () {
        alert("RINNING");
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:30:22.190

当您尝试创建 accountLib 对象时，您有一个 double ==。这是一个比较运算符，不会将变量设置为对象。如果你检查你的控制台，它可能会在行上抛出一个错误：accountLib.accountType = {

尝试：

```
if (!accountLib) {
    accountLib = {}; // namespace
} 
```

# php - 解析错误：语法错误，PHP 中出现意外的 T_DOUBLE_ARROW

> ID：15090226
> 
> 赞同：0
> 
> 时间：2013-02-26T13:23:26.493
> 
> 标签：php, wordpress

我正在尝试用这个更新functions.php，这是直接从网站上的附件插件复制的代码，但是我收到了一个T_DOUBLE_ARROW语法错误，有什么想法吗？:-

```
<?php

function my_attachments( $attachments )
{
  $fields         => array(
    array(
      'name'      => 'title',                         // unique field name
      'type'      => 'text',                          // registered field type
      'label'     => __( 'Title', 'attachments' ),    // label to display
      'default'   => 'title',                         // default value upon selection
    ),
    array(
      'name'      => 'caption',                       // unique field name
      'type'      => 'textarea',                      // registered field type
      'label'     => __( 'Caption', 'attachments' ),  // label to display
      'default'   => 'caption',                       // default value upon selection
    ),
  );

  $args = array(

    // title of the meta box (string)
    'label'         => 'My Attachments',

    // all post types to utilize (string|array)
    'post_type'     => array( 'post', 'page' ),

    // meta box position (string) (normal, side or advanced)
    'position'      => 'normal',

    // meta box priority (string) (high, default, low, core)
    'priority'      => 'high',

    // allowed file type(s) (array) (image|video|text|audio|application)
    'filetype'      => null,  // no filetype limit

    // include a note within the meta box (string)
    'note'          => 'Attach files here!',

    // text for 'Attach' button in meta box (string)
    'button_text'   => __( 'Attach Files', 'attachments' ),

    // text for modal 'Attach' button (string)
    'modal_text'    => __( 'Attach', 'attachments' ),

    // which tab should be the default in the modal (string) (browse|upload)
    'router'        => 'browse',

    // fields array
    'fields'        => $fields,

  );

  $attachments->register( 'my_attachments', $args ); // unique instance name
}

add_action( 'attachments_register', 'my_attachments' ); 
```

?>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T13:25:30.897

应该

```
 $fields         = array(... 
```

代替

```
 $fields         => array( 
```

# arrays - 查找最接近数组中所有数字的数字

> ID：15090228
> 
> 赞同：5
> 
> 时间：2013-02-26T13:23:34.267
> 
> 标签：arrays, algorithm, optimization, numbers

这个问题基本上是一个算法优化问题。

我们有一个包含 n 个元素的列表。例如，`{n1,n2,n3...nk}` 这个列表是排序的，我们必须找出数字 ni，它是

1.  `n1<=ni<=nk`
2.  与每个数字的距离之和`ni`最小。

可能有所有`(nk-n1+1)`可能的数字，但我们的目标是找出`ni`最接近所有其他数字的数字。

蛮力方法可以迭代`n1`到 nk 并计算与所有列表编号的距离之和。通过这种方式，我们可以轻松找出最接近列表中所有其他数字的数字。

但是这种方法的问题是，它在时间复杂度方面并不好。这种方法的时间复杂度是`O(n^2)`。

我认为可能有更好的方法来做到这一点，它可以以更少的时间复杂度解决这个问题。

任何方法将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T13:27:46.783

如果你的意思是“距离”，`distance(a,b) = abs(a-b)`那么你只需要找到中位数。

在排序列表中找到中位数是 O(1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:53:39.290

答案应该是 ROUND( SUM(n1,...,nk)/k ) 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:33:02.277

求平均值……这需要 O(n)。然后遍历列表以找到平均值的 ni（也需要 O(n)）...实际上更像 o(1/2n)

# ms-access - 访问报告中的子组总和

> ID：15090229
> 
> 赞同：1
> 
> 时间：2013-02-26T13:23:47.697
> 
> 标签：ms-access, report, ms-access-2007

我创建了一个访问报告，其中显示了与合作伙伴的合同列表。我需要报告显示组和子组的计数总和。由于这很好用，我必须处理一个我无法弄清楚的错误：

[] 是一个文本字段，其中包含我用来计算组的名称、设置和数据内容。

() 是我用来呈现结果的文本字段。

```
HEADER COUNTRY [txtCountCountryAll|sumoverall|=1]
    HEADER PARTNER [txtCountPartnerAll|sumoverall|=1] [txtCountPartnerGroup|sumovergroup|=1]
        DETAIL CONTRACT 1
        DETAIL CONTRACT 2
FOOTER COUNTRY (=txtCountPartnerGroup)

FOOTER REPORT (=txtCountPartnerAll) (=txtCountCountryAll) 
```

除了一个国家有两个合作伙伴的情况外，一切都很好。

由于某种原因，第一个合作伙伴的“txtCountPartnerGroup”字段未设置为 =1，因为它已定义但为空。组数将为 1 而不是 2。

无论如何，所有总和都是正确的。在任何情况下，“txtCountPartnerAll”都设置为 =1。

我制作了一个将 txtFields 设置为可见的屏幕截图。它显示文本框为空。

![截屏](../Images/f1b19e8ff084f3a7a33978771c448331.png)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:17:46.867

您愿意使用 VBA 代码计算小计吗？如果是这样，Microsoft 描述了一种解决方案，您可以在打印每一行时自行计算小计：

```
Private Sub Detail_Print(Cancel As Integer, PrintCount As Integer)
  If PrintCount = 1 Then
    txtPageSum = txtPageSum + ExtendedPrice
    txtPageQuantity = txtPageQuantity + Quantity
  End If
End Sub

Private Sub PageHeaderSection_Print(Cancel As Integer, _
                                    PrintCount As Integer)
  txtPageSum = 0
  txtPageQuantity = 0
End Sub 
```

这个想法是在每次打印合作伙伴页脚时向合作伙伴计数添加一个。每次打印国家/地区标题时，都会将合作伙伴计数设置为零。

# ruby-on-rails - 用另一个字符串 rails 替换子字符串

> ID：15090240
> 
> 赞同：2
> 
> 时间：2013-02-26T13:24:25.870
> 
> 标签：ruby-on-rails, ruby, regex, replace

在我的 Rails 应用程序中，我将问题保存为 html。例如，

```
"<p>&lt;pre dir=\"ltr\" style=\"background-color: #ede7db; color:
#000000; margin: 0px; padding: 6px; border: 1px inset; width: 640px; height: 194px; text-align: left; overflow: auto; background-position: initial initial; background-repeat: initial initial;\" class=\"alt2\"&gt;void myFunc (int x) <br />{ <br /> if (x &amp;gt; 0)<br /> myFunc(--x); <br /> printf(\"%d, \", x); <br />} <br />int main() <br />{ <br /> myFunc(5); <br /> return 0; <br />}&lt;/pre&gt;</p>" 
```

我需要将所有宽度属性替换为`width:auto;`

帮助我做同样的事情。谢谢 ：）-

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T13:27:53.380

试试这个，假设字符串在一个变量中`s`：

```
s.gsub(/width:[^;]*;/, 'width: auto;') 
```

# html - HTTPS 网站上的 Youtube iframe

> ID：15090242
> 
> 赞同：8
> 
> 时间：2013-02-26T13:24:33.560
> 
> 标签：html, iframe, https, youtube

我在使用 https 的网站上包含了一个指向 youtube 视频的 iframe。虽然我使用“https://”嵌入了 youtube 视频，但当我点击播放时，视频会加载 http 文件，从而使浏览器安全图标“不安全”。如何强制 youtube 仅加载 https 文件？

我的嵌入 HTML：

```
<iframe id="ytplayer" type="text/html" width="480" height="360" src="//www.youtube.com/embed/-ZUrjLs48a8" frameBorder="0" allowfullscreen></iframe> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T13:34:48.283

如 Google api 文档中所述，将 origin 参数添加到您的 URL： **[YouTube Player API Reference for iframe Embeds](https://developers.google.com/youtube/iframe_api_reference)**

作为一项额外的安全措施，您还应该在 URL 中包含 origin 参数，指定 URL 方案（http:// 或 https://）和主机页面的完整域作为参数值。虽然来源是可选的，但它可以防止恶意第三方 JavaScript 被注入您的页面并劫持您的 YouTube 播放器的控制权。

```
 <iframe id="player" type="text/html" width="640" height="390"
  src="http://www.youtube.com/embed/u1zgFlCw8Aw?enablejsapi=1&origin=http://example.com"
  frameborder="0"></iframe> 
```

# c# - 使用 EF 从 DB 检索数据时对象名称“dbo.Infoes”无效

> ID：15090246
> 
> 赞同：0
> 
> 时间：2013-02-26T13:24:44.740
> 
> 标签：c#, sql, asp.net-mvc, entity-framework, sqlexception

我真的是 MVC 的初学者。我制作的视图只是从`Info`使用此代码命名的表中检索数据

控制器 ：

```
namespace FP.WebUI.Controllers
{
    public class HomeController : Controller
    {
        private IRetrieveData repo;
        public HomeController(IRetrieveData repoParam)
        {
            repo = repoParam;
        }
        public ViewResult Index()
        {
            Info model = repo.Info.ToList().FirstOrDefault();
            return View(model);
        }

    }
} 
```

和观点：

```
<div id="follow">
    <a href="http://@Model.Facebook.Substring(Model.Facebook.IndexOf("http://")+1,Model.Facebook.Length)"><img src="img/temp.png" alt="facebook"/></a>
    <a href="http://@Model.Twitter.Substring(Model.Twitter.IndexOf("http://")+1,Model.Twitter.Length)"><img src="img/temp.png" alt="twitter"/></a>
    <a href="mailto://@Model.Email"><img src="img/temp.png" alt="email"/></a>
</div> 
```

但我总是在这条线上得到这个例外：

```
Info model = repo.Info.ToList().FirstOrDefault(); 
```

例外是：

> “/”应用程序中的服务器错误。
> 
> 无效的对象名称“dbo.Infoes”。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：对象名称“dbo.Infoes”无效。

**我不知道问题出在哪里，所以我将放置项目的相关部分。**

* * *

根内的连接字符串`Web.config`：

```
 <connectionStrings>    
    <add name="EFDbContext" providerName="system.data.sqlclient" connectionString="Data Source=.;Initial Catalog=photography;Integrated Security=True"/>
  </connectionStrings> 
```

EFDbContext 类：

```
namespace FP.Domain.Concrete
{
    public class EFDbContext : DbContext
    {
        public DbSet<Gallery> Gallery { get; set; }
        public DbSet<SessionImages> SessionImages { get; set; }
        public DbSet<Sessions> Sessions { get; set; }
        public DbSet<Admins> Admins { get; set; }
        public DbSet<Info> Info { get; set; }
        public DbSet<Offers> Offers { get; set; }
    }
} 
```

EFDbRetrieve 类：

```
namespace FP.Domain.Concrete
{
    public class EFDbRetrieve : IRetrieveData
    {
        private EFDbContext context = new EFDbContext();

        public IQueryable<Admins> Admins
        {
            get { return context.Admins; }
        }

        public IQueryable<Gallery> Gallery
        {
            get { return context.Gallery; }
        }

        public IQueryable<SessionImages> SessionImages
        {
            get { return context.SessionImages; }
        }

        public IQueryable<Sessions> Sessions
        {
            get { return context.Sessions; }
        }

        public IQueryable<Offers> Offers
        {
            get { return context.Offers; }
        }

        public IQueryable<Info> Info
        {
            get { return context.Info; }
        }
    }
} 
```

IRetrieveData 接口：

```
namespace FP.Domain.Abstract
{
    public interface IRetrieveData : IAdmins, IGallery, ISessionImages, ISessions, IOffers, IInfo
    {
    }
} 
```

继承自 IInfo 接口：

```
namespace FP.Domain.Abstract
{
    public interface IInfo
    {
        IQueryable<Info> Info { get; }
    }
} 
```

如果有人在这方面帮助我，我将非常感激，我感到很沮丧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:43:55.627

就像他们建议的那样，问题在于表名变得复数（Info 映射到名为 Infoes 的表）。您可以检查 SQL 中的表名。要禁用此功能，请添加：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        base.OnModelCreating(modelBuilder);
    } 
```

到 EFDbContext 类。

希望这可以帮助

# c# - 使用 https c# 强制页面，出错此网页有重定向循环

> ID：15090247
> 
> 赞同：0
> 
> 时间：2013-02-26T13:24:51.747
> 
> 标签：c#, http, redirect, https

几天来，我一直在尝试将 http 重定向到 https，任何帮助将不胜感激！我在共享托管环境中托管我的网站，我不允许在 IIS 中更改任何内容。

这是c#登录页面中的代码

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Request.Url.ToString().IndexOf("http://") != -1)
    {
        string redirectUrl = Request.Url.ToString().Replace("http://", "https://");
        //Response.Write(redirectUrl);
        Response.Redirect(redirectUrl);
    }      
} 
```

我得到的错误是“这个网页有一个重定向循环”。我也尝试在 web.config 文件中进行重定向，但出现了同样的错误。有没有强制使用 https 的页面？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T13:33:04.200

您可以通过这样做直接询问您是否使用 HTTPS

```
if(Request.IsSecureConnection) 
```

我用它来重定向到我在 HTTPS 中的登录：

```
if(!IsPostBack){
    if(!Request.IsSecureConnection)
      Response.Redirect("https://" & Request.Url.Host & "/Login.aspx")

......
......
....
...
} 
```

# objective-c - 读取字符串的键

> ID：15090248
> 
> 赞同：0
> 
> 时间：2013-02-26T13:24:54.253
> 
> 标签：objective-c, cocoa

我有几段文字想放入我的应用程序的`NSTextView`. 现在的问题是我存储它们的方式。由于有很多文本，我不想将它们编码到`NSString`我的代码中，所以我想通过**Plist**、**.strings**或**RTF**文件来访问它们。我不确定哪个更好用。我的要求是

**(1)**在复制和粘贴过程中，能够存储大量文本而不会滞后。

**(2)**我需要能够通过我的代码中每组单词的“键”来访问它们。抱歉，我现在只尝试过 Plist，但是当我将文本复制到每个键中时会出现滞后。还有另一种方法可以做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:28:30.583

**大量文本**，如果它真的很大，你应该去核心数据。

如果它是可维护的说几兆字节，那么你可以去 plist。

或者您可以在那里创建一个数据文件，您可以将您的字符串保存为 NSData。

# iphone - 计算 iPhone 应用程序中的数据使用量、语音使用量

> ID：15090249
> 
> 赞同：1
> 
> 时间：2013-02-26T13:24:54.723
> 
> 标签：iphone, ios

嗨，我正在开发我想要的 iPhone 应用程序

1.  计算给定时间段的数据使用量

2.  计算给定时间段的语音使用情况

3.  确定设备上的漫游是打开还是关闭

我的问题是，是否可以在 iOS 上执行这些操作？

如果是，那么实现这一目标的可能方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:38:57.463

不会。在正常出厂设置的 iPhone（即没有越狱）上，应用程序无法获得有关数据总量和语音使用总量的信息。

# c# - 使用 Windows 8 的 Windows 认证工具包测试应用程序时，exiflib.dll 应处于发布模式错误

> ID：15090257
> 
> 赞同：0
> 
> 时间：2013-02-26T13:25:15.163
> 
> 标签：c#, visual-studio-2012, windows-8, windows-store-apps, wack

我正在使用从 ExifLib 下载的 Windows 应用程序的[*exiflib.dll - A Fast Exif Data Extractor for .NET 2.0+*](http://www.codeproject.com/Articles/36342/ExifLib-A-Fast-Exif-Data-Extractor-for-NET-2-0)。该应用程序在我的电脑中构建良好。但是当我使用 Windows 认证套件测试该应用程序时，它在发布模式下不使用 exiflib.dll 引发错误。我正在使用适用于 Windows 8 的 Visual Studio 2012 Express Edition。如何解决这个问题。任何人都可以找到解决方案吗？？？提前谢谢。

我在使用 Windows 认证工具包测试应用程序时遇到的错误如下所示。

支持的 API 测试

FAILED 支持的 API • 发现错误：

支持的 API 测试检测到以下错误： ◦ MSCORLIB 中的 API System.IO.FileInfo，PUBLICKEYTOKEN=7CEC85D7BEA7798E 不支持此应用程序类型。ExifLib.dll 调用此 API。

◦ MSCORLIB 中的 API System.IO.FileStream，PUBLICKEYTOKEN=7CEC85D7BEA7798E 不支持此应用程序类型。ExifLib.dll 调用此 API。

◦此应用程序类型不支持 MSCORLIB 中的 API System.IO.FileSystemInfo，PUBLICKEYTOKEN=7CEC85D7BEA7798E。ExifLib.dll 调用此 API。

◦ MSCORLIB 中的 API System.IO.FileInfo.OpenRead，PUBLICKEYTOKEN=7CEC85D7BEA7798E 不支持此应用程序类型。ExifLib.dll 调用此 API。

◦ MSCORLIB 中的 API System.IO.FileInfo.get_Length，PUBLICKEYTOKEN=7CEC85D7BEA7798E 不支持此应用程序类型。ExifLib.dll 调用此 API。

◦此应用程序类型不支持 MSCORLIB 中的 API System.IO.FileSystemInfo.get_Name，PUBLICKEYTOKEN=7CEC85D7BEA7798E。ExifLib.dll 调用此 API。

◦此应用程序类型不支持 MSCORLIB 中的 API System.String.Format(System.String,System.Object)，PUBLICKEYTOKEN=7CEC85D7BEA7798E。ExifLib.dll 调用此 API。

调试配置测试

FAILED 调试配置 • 发现错误：调试配置测试检测到以下错误： ◦二进制 ExifLib.dll 在调试模式下构建。

• 未修复的影响：Windows 应用商店不允许应用程序的调试版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-19T22:40:51.533

看起来你需要从github下载项目并在发布模式下再次编译，并将dll添加到你的项目中

github 网址： [https ://github.com/ravensorb/portable-exif-lib](https://github.com/ravensorb/portable-exif-lib)

# hook - WooCommerce 使用 get_price() 函数自定义价格

> ID：15090258
> 
> 赞同：2
> 
> 时间：2013-02-26T13:25:18.233
> 
> 标签：hook, woocommerce

我目前一直在根据用户位置使用多种价格/货币。我正在经历整个订购过程，我几乎就在那里。

我正在使用该`get_price()`函数与`woocommerce_get_price`（位于`class-wc-product.php`第 822 行）挂钩，然后从产品中找到我设置的自定义字段金额（gb_price、us_price 等）。

在商店、单一产品视图、购物车、结帐中一切正常，但在下订单时，一切都会退回到默认的基本成本和货币。我注意到这只在通过functions.php连接时失败。如果我直接在类文件中修改函数本身，一切正常。

我真的不想破解 WC 的核心，所以有人可以看看并告诉我为什么它会失败吗？这是我的代码...

**类-wc-product.php**

```
function get_price() {  
    return apply_filters( 'woocommerce_get_price', $this->price, $this );
} 
```

**函数.php**

```
add_filter('woocommerce_get_price', 'return_custom_price', $product, 2); 
function return_custom_price($price, $product) {    
    global $post, $woocommerce;
    // Grab the product id
    $post_id = $product->id; 
    // Get user's ip location and correspond it to the custom field key
    $user_country = $_SESSION['user_location'];
    $get_user_currency = strtolower($user_country.'_price');
    // If the IP detection is enabled look for the correct price
    if($get_user_currency!=''){
        $new_price = get_post_meta($post_id, $get_user_currency, true);
        if($new_price==''){
            $new_price = $price;
        }
    }
    return $new_price;
} 
```

所以除了订单确认外，这在任何地方都有效。如果我只是将函数从functions.php 移动到get_price() 中的类本身，它就可以完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T08:58:54.970

这是我现在使用的代码，它无论如何都不完美，但应该可以帮助人们走上正轨。（尚未使用 WC2.0 进行测试，我几乎可以肯定它不适用于 2。）请注意，使用的任何会话都用于 IP 驱动测试，而不是功能的组成部分。我从以前改编它以用作插件。在 WP 的产品中，我使用自定义字段作为价格，即“us_price”、“gb_price”等，这就是 ip 检测挂钩的方式。

```
// 1\. Change the amount
function return_custom_price($price, $product) {
    global $post, $woocommerce;
    $post_id = $post->ID;
    // Prevent conflicts with order pages and products, peace of mind.
    if($post_id == '9' || $post_id == '10' || $post_id == '17' || $post_id == '53' || $post_id == ''){
        // cart, checkout, , order received, order now
        $post_id = $product->id;
    }
    $user_country = $_SESSION['user_location'];
    $get_user_currency = strtolower($user_country.'_price');
    // If the IP detection is enabled look for the correct price
    if($get_user_currency!=''){
        $new_price = get_post_meta($post_id, $get_user_currency, true);
        if($new_price==''){
            $new_price = $price;
        }
    }
    if( is_admin() && $_GET['post_type']=='product' ){
        return $price;
    } else {
        return $new_price;
    }
}
add_filter('woocommerce_get_price', 'return_custom_price', $product, 2);

// 2\. Update the order meta with currency value and the method used to capture it
function update_meta_data_with_new_currency( $order_id ) {
    if($_SESSION['user_order_quantity']>=2){
        update_post_meta( $order_id, 'group_ticket_amount', $_SESSION['user_order_quantity'] );
        update_post_meta( $order_id, 'master_of', '' );

    }
    update_post_meta( $order_id, 'currency_used', $_SESSION['user_currency'] );
    update_post_meta( $order_id, 'currency_method', $_SESSION['currency_method'] );
}
add_action( 'woocommerce_checkout_update_order_meta', 'update_meta_data_with_new_currency' ); 
```

# java - 在两个数组之间使用相同的索引来获取相关信息？

> ID：15090259
> 
> 赞同：1
> 
> 时间：2013-02-26T13:25:19.950
> 
> 标签：java, arrays

我有一个数据阅读器，它通过给定的分隔符对输入字符串进行标记。标记转到 ArrayList，分隔符转到另一个。例如：

```
this + is - an * input 
```

该句子将被标记化，以便“this”、“is”、“an”和“input”将进入标记数组，而“+”、“-”和“*”将进入分隔符数组。现在，我还需要存储它们的原始索引，以便标记具有索引 0、2、4 和 6，而分隔符将具有索引 1、3 和 5。正常的解决方案是将它们放入相同的数组，但出于性能原因，我需要将它们分开（例如，快速检查分隔符）。

如何进行这种索引，以便当我有一个标记索引“i”时，我可以轻松地从索引“i+1”获取分隔符，而无需遍历所有分隔符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:34:30.103

我建议使用[`TreeMap`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TreeMap.html)，将索引作为键，将分隔符作为值。它甚至有`containsValue()`我认为可能对你有用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:12:04.107

Based on your comment to my other answer

```
import com.google.common.collect.Table;
import com.google.common.collect.TreeBasedTable;
public static void main(String[] args) {
            String in = "this + is - an * input";
            Table<Integer, String, String> table = TreeBasedTable.create();
            StringTokenizer stringTokenizer = new StringTokenizer(in, "+-*", true);

            int x = stringTokenizer.countTokens();

            for (int i = 0; i < x / 2; i++) {
                table.put(i, stringTokenizer.nextToken(),
                        stringTokenizer.nextToken());

            }
            if (stringTokenizer.hasMoreElements()) {
                table.put(x, stringTokenizer.nextToken(), "");
            }

            // iterate through tokens
            System.out.println(table.columnKeySet());
            // iterate thruogh delims
            System.out.println(table.values());
        } 
```

with the following outputs

```
[ an ,  input,  is , this ]
[+, -, *, ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:18:45.600

尝试将此作为对@Pescis 答案的评论发布，但无法很好地格式化。

```
public class Split {

    public static void main(String[] args) {

        String in = "this + is - an * input";

        StringTokenizer stringTokenizer = new StringTokenizer(in, "+-*", true);
        Map<Integer, String> map = new TreeMap<Integer, String>();

        int x = stringTokenizer.countTokens();

        for (int i = 0; i < x; i++) {
            map.put(i, stringTokenizer.nextToken());
        }

        System.out.println(map);
        System.out.println(map.get(0));
        System.out.println(map.get(1));
    }
} 
```

输出

```
{0=this , 1=+, 2= is , 3=-, 4= an , 5=*, 6= input}
this 
+ 
```

# java - 如何在单个文件中记录 MediaPlayer 输出和语音？

> ID：15090260
> 
> 赞同：0
> 
> 时间：2013-02-26T13:25:21.327
> 
> 标签：java, android, audio, media-player, android-mediaplayer

我有一个场景，我需要录制声音以及回溯/音乐播放。用户使用耳机听音乐并随着音乐唱歌，我需要将两者都捕获在一个文件中。

这就像在代码中从媒体播放器获取音频输出一样。

这可能吗？请指教！！

如果我使用设备扬声器（外部），那么这将是可能的，但我需要另一种方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:46:38.370

[您可以使用Visualizer](http://developer.android.com/reference/android/media/audiofx/Visualizer.html)类获得输出混合的低质量版本。它并不是真正适用于您描述的那种用例，因此如果您尝试播放它，听起来会很糟糕。

没有其他方法可以记录可在普通 Android 手机上使用的输出（您提到的扬声器方法除外）。
一些 SoC 确实支持这一点，但由于该功能没有通过任何 Android API 公开，因此您需要具有 root 访问权限，并且会限制您的应用程序在选定的少数手机型号上运行。

# c++ - 嵌套模板类的问题

> ID：15090271
> 
> 赞同：1
> 
> 时间：2013-02-26T13:25:44.723
> 
> 标签：c++, templates

我试图测试下面的模板化代码，但出现以下错误：

```
 error: ‘Foo’ is not a template 
```

我下面的代码正确吗？它看起来是我能做的最简单的模板代码！

```
 template<typename D>
  struct Ciccio{
  };

  template<typename S>
  struct Foo< Ciccio<S> >{
  };

int main(){
    typedef Ciccio<int> test_type;
    Foo<test_type> f;
    return 1;    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:29:51.310

就目前而言，`Foo`看起来像是部分模板专业化。您需要提供一个主要的`Foo`类模板：

```
template<typename D>
struct Ciccio {};

// primary template
template<typename S>
struct Foo;

// partial specialization
template<typename S>
struct Foo< Ciccio<S> > {};

int main(){
  typedef Ciccio<int> test_type;
  Foo<test_type> f;
} 
```

# c# - 动态考虑依赖关系

> ID：15090274
> 
> 赞同：-1
> 
> 时间：2013-02-26T13:25:46.867
> 
> 标签：c#, algorithm, dynamic

我在为我的应用程序开发算法时遇到了困难。应用程序需要非常灵活，以适应多种设备和多种风格。

以下是其中一种设备的规则之一：

```
Only for styles 1,2,3,8,9,10
If slope = I2t
  Range: 2-24
  Step 0.5
If slope = I4t
  Range: 1-5
  Step 0.5
If slope = Mod Inv 
  Range: 0.1-5.0
  Step 0.1
If slope = Very Inv or Ext Inv
    Range 0.2-5.0
    Step 0.1

Ony for Styles 4,5,6,7
If slope = I2t
    Range: 2-24
    Step 0.5
If slope = I4t
    Range: 1-5
    Step 0.5
If slope = IEC-A
    Range: 0.05 - 1.00
    Step 0.05
If slope = IEC-B
    Range: 0.10 - 1.00
    Step 0.05
If slope = IEC-C
    Range: 0.20-1.00
    Step 0.05 
```

现在我可以为这个特定的设备编写代码，但是有多个设备具有不同的语句集。目前我正在从文件中读取这些值。这使我可以在不更改代码的情况下更新程序支持的设备数量，从而减少维护。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:38:22.297

您可以使用表格方式保存输入值和相应的配置设置，然后只需在字典中查找。像这样的东西：

```
struct ConfigKey
{
     public readonly int Style;
     public readonly string Slope;
     public ConfigKey(int style, string slope) 
     {
        this.Style = style;
        this.Slope= slope;
     }
     public override bool Equals(object obj)
     {
         if (!(obj is ConfigKey))
         {
             return false;
         }
         ConfigKey other = (ConfigKey)obj;
         return this.Style == other.Style && this.Slope == other.Slope;
     }

     public override int GetHashCode()
     {
         return Style.GetHashCode() ^ Slope.GetHashCode();
     }
}
struct Config
{
    String  Range {get; set;}
    Double Step { get; set; }
}
Dictionary<ConfigKey, Config> conf = new Dictionary<ConfigKey, Config>();

public Config GetConfig(int style, string slope)
{
    return conf[new ConfigKey(style, slope)];
} 
```

# php - 将数据从android发布到php

> ID：15090275
> 
> 赞同：0
> 
> 时间：2013-02-26T13:25:47.557
> 
> 标签：php, android, http-post

我有一个 android 应用程序，我使用它使用 http post 将数据发布到网站，但它没有将任何数据发布到网站。

在我的安卓代码中：

```
 postParameters.add(new BasicNameValuePair("latitude", Double.toString(latitude)));  
                   postParameters.add(new BasicNameValuePair("longitude", Double.toString(longitude))); 
                   response = CustomHttpClient.executeHttpPost("url", postParameters); 
```

在 executeHttpPost 方法中

```
public static String executeHttpPost(String url, ArrayList postParameters)
        throws Exception {
    BufferedReader in = null;
    try {
        HttpClient client = getHttpClient();
        HttpPost request = new HttpPost(url);
        UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(
                postParameters);
        request.setEntity(formEntity);
        HttpResponse response = client.execute(request);
        in = new BufferedReader(new InputStreamReader(response.getEntity()
                .getContent()));
        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
            sb.append(line + NL);
        }
        in.close();
        String result = sb.toString();
        return result;
    } finally {
        if (in != null) {
            try {
                in.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

这是php源码

```
$lat=$_POST['latitude'];  
$long=$_POST['longitude'];  

mysql_connect('localhost','welcome','Welcome123') or die('conn error');
mysql_select_db('es')  or die('select error');

$query = "insert into GEO_LOC (GEO_LOC_LAT,GEO_LOC_LONG) values ($lat,$long)";
$result = mysql_query($query);

if($result)
{
echo 1;
}
else echo "Database Error";
?> 
```

但是这个 post 方法并没有做任何事情。我错过了什么吗？我需要添加任何额外的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:41:23.090

检查以下代码：

```
public static ArrayList<NameValuePair> arrayPost = new ArrayList<NameValuePair>(); 
```

如果数组大小为 0，则在上面的数组中添加参数，

```
if (arrayPost.size() <= 0) {
                arrayPost.add(new BasicNameValuePair("test", "test"));
            } 
```

* * *

```
public static String Call_Http_URL_PostMethod(String url)
            throws ClientProtocolException, IOException {

        String is = null;
        try {

            if (arrayPost.size() <= 0) {
                arrayPost.add(new BasicNameValuePair("test", "test"));
            }

            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            httppost.setEntity(new UrlEncodedFormEntity(arrayPost, HTTP.UTF_8));
            HttpResponse responce = httpclient.execute(httppost);
            HttpEntity entity = responce.getEntity();
            is = EntityUtils.toString(entity);
            Log.e("post responce----->", "" + is);
        } catch (Exception e) {
            Log.d("post responce error ----->", "" + e.getMessage().toString());
            is = null;
        }
        return is;
    } 
```

更改您的 php 代码，如下所示（这仅用于测试）

```
if($result)
{
echo json_encode("result"=array("sucsess"););
}

echo json_encode("result"=array("Database Error")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:29:09.320

尝试这个，

```
HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(ADD URL HERE);
    try {
        List<NameValuePair> name = new ArrayList<NameValuePair>();

        name.add(new BasicNameValuePair("latitude", Double.toString(latitude))); 
        name.add(new BasicNameValuePair("longitude", Double.toString(longitude)));

        post.setEntity(new UrlEncodedFormEntity(name));
        HttpResponse response = client.execute(post);
        BufferedReader rd = new BufferedReader(new InputStreamReader(
                response.getEntity().getContent()));
        String line = "";
        StringBuilder sb = new StringBuilder();
        while ((line = rd.readLine()) != null) {
            sb.append(line + "\n");
        }
} catch (Exception e) {

    } 
```

# php - PHP 生成正则表达式

> ID：15090277
> 
> 赞同：1
> 
> 时间：2013-02-26T13:25:55.577
> 
> 标签：php, regex

我有一个名为 AccentToRegex 的函数，它应该将重音和非重音字母替换为正则表达式。唯一的问题是，如果我想将“s”替换为“[sš]”，将“š”替换为“[sš]”（同样的事情）。该函数逐个字符地运行，当我输入“s”时，我最终得到类似 [s[sš]] 的内容，但是我想更改它，所以它只返回“[sš]”。

我正在考虑使用修改后的值运行 str_replace 两次，但这似乎效率低下。

所以问题是如何将函数从逐个字符运行并检查已插入的字符更改为忽略插入的字符。

例子。input="s" -> 变为 "[sš]" -> 将 "š" 变为 "[sš]" 所以我们得到 [s[sš]] 而不是 "[sš]"。

```
function accentToRegex($pattern)
    {
       $replacements = Array("a" => "[aáàäâ]",
                             "e" => "[eéèëê]",
                             "s" => "[sš]",
                             "š" => "[sš]",
                              ....
                             );
       $flags = "iu";
       $times = 0;
       $final = str_replace( array_keys($replacements), $replacements, $pattern);  
       $regex = "/$final/$flags";
       return $regex;
    } 
```

感谢您的时间和帮助，我很感激；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:53:59.827

[在strtr()](http://www.php.net/manual/en/function.strtr.php)函数注释中找到答案，该函数称为 gr_regexp(..)。

```
function accentToRegex($mystring){
    $replacement=array(
            array("a","á","ä"),
            array("s", "š"),
    );
    foreach($replacement as $group){
            foreach($group as $character){
                    $exp="[";
                    foreach($group as $expcharacter){
                            $exp.=$expcharacter;
                    }
                    $exp.="]";
                    $trans[$character]=$exp;
            }
    }
    $temp=explode(" ", $mystring);
    for ($i=0;$i<sizeof($temp);$i++){
            $temp[$i]=strtr($temp[$i],$trans);
            $temp[$i]=addslashes($temp[$i]);
    }
    $flags = "iu";
    return "/".implode(".*",$temp)."/$flags";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:55:54.800

用这个替换你的函数：

```
function accentToRegex($pattern)
{
    $replacements = Array("a" => "[aáàäâ]",
                          "e" => "[eéèëê]",
                          "s" => "[sš]",
                          "š" => "[sš]",
                          );
    $flags = "iu";
    $times = 0;
    $final = strtr($pattern, $replacements);  
    $regex = "/$final/$flags";
    return $regex;
} 
```

# datetime - 将 Boost 公历日期转换为 POD

> ID：15090278
> 
> 赞同：0
> 
> 时间：2013-02-26T13:25:58.727
> 
> 标签：datetime, boost

有没有一种简单的方法可以将 boost::gregorian::date 转换为普通的旧数据类型？我需要能够通过 C DLL 接口传递它。我宁愿不来回将其转换为年/月/日组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:32:57.103

您可以选择一些纪元日期，然后获取`date_duration`“当前”日期和纪元之间的时间，然后调用`days()`持续时间以获取`long`. 通过`long`你的 C DLL，然后在另一边创建一个`date_duration`具有相同天数的新的，将它添加到时代，你应该回到原来的日期。

您应该能够轻松地将其包装在几个函数中，例如

```
long days_since_epoch_from_date(date)
date date_from_days_since_epoch(long) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:43:09.960

```
#include <boost/date_time/gregorian/greg_date.hpp>
#include <boost/date_time/gregorian/gregorian_io.hpp>
#include <iostream>

int main() 
{
    boost::gregorian::date date1(2013, boost::date_time::Feb, 25);
    std::cout << date1 << std::endl;
    boost::gregorian::date::date_int_type pod = date1.day_number();
    std::cout << pod << std::endl;
    boost::gregorian::date date2(pod);
    std::cout << date2 << std::endl;
} 
```

# java - 从 Eclipse 内部运行 JUnit 测试套件

> ID：15090280
> 
> 赞同：0
> 
> 时间：2013-02-26T13:26:03.930
> 
> 标签：java, eclipse, unit-testing, junit, test-suite

从历史上看，我总是这样编写单元测试：

```
public void WidgetTest {
    @Test
    public void test_whatever() {
        // Given...

        // When...

        // Then...
    }
} 
```

这允许我在 Eclipse 和 中右键单击我的测试文件`Run As >> JUnit`，并直接从 Eclipse 内部测试该 1 个特定测试。然后，在进行本地（基于 Ant）构建时，我配置了一个`<junit>`Ant 任务来一次运行我的所有`src/test/java`测试。

我现在正在寻找中间解决方案。也就是说，一种从 Eclipse 内部运行我的所有测试类的方法，只需单击一个按钮即可。一位同事建议 Junit 有一个“测试套件”的概念，我可以将所有测试类附加到它，但看起来这个测试套件是某种我不想包含在其中的 JAR/工具我的项目。

所以我问：**我如何定义这样一个“测试套件”，由我所有的测试类组成，并从 Eclipse 内部一口气运行所有这些？**提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T13:29:03.553

您可以在 Eclipse 中右键单击一个项目或包，然后选择“Run As->JUnit Test”，以运行该项目或包中的所有测试。除非您只想运行测试的*子集*，否则不需要测试套件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:29:54.620

您是否尝试过右键单击您的项目并选择并选择 Run as -> JUnit test？这将运行项目中的所有单元测试。

# python - Python 中的内部尝试除外 - 流程如何工作？

> ID：15090281
> 
> 赞同：2
> 
> 时间：2013-02-26T13:26:09.287
> 
> 标签：python, except

我们有内部尝试例外，例如

```
try:

    try: (problem here)

    except: (goes here)

except: (will it go here) ?? 
```

这是 try excepts 的当前流程吗？如果外部 try 块内部捕获到异常，它是错误还是非错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T13:27:44.960

不，它不会出现在第二个 except 中，除非第一个也引发异常。

当您进入该`except`子句时，您几乎是在说“异常被捕获，我会处理它”，除非您重新引发异常。例如，这个结构通常非常有用：

```
try:
    some_code()
    try:
        some_more_code()
    except Exception as exc:
        fix_some_stuff()
        raise exc
except Exception as exc:
    fix_more_stuff() 
```

这允许您对同一异常进行多层“修复”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T13:28:27.650

它不会到达外部`except`，除非您在该异常中引发另一个异常，如下所示：

```
try:
    try:
        [][1]
    except IndexError:
        raise AttributeError
except AttributeError:
    print("Success! Ish") 
```

除非内部`except`块引发了适合外部块的异常，否则它不会被视为错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T13:29:58.553

错误不会命中外部`Except`。你可以像这样测试它：

```
x = 'my test'
try:
    try: x = int(x)
    except ValueError: print 'hit error in inner block'
except: print 'hit error in outer block' 
```

这只会打印`'hit error in inner block'`.

`Try`但是，在内部/块之后说一些其他代码`Except`，这会引发错误：

```
x, y = 'my test', 0
try:
    try: x = int(x)
    except ValueError: print 'x is not int'
    z = 10./y
except ZeroDivisionError: print 'cannot divide by zero' 
```

这将同时打印`'x is not int'`AND `'cannot divide by zero'`。

# iphone - 在我的 Iphone 应用程序中检测安全漏洞的过程

> ID：15090282
> 
> 赞同：2
> 
> 时间：2013-02-26T13:26:15.730
> 
> 标签：iphone, security, pci-dss

我正在开发一个 Iphone 应用程序，并且我有一个信用卡支付流程。我还保存了信用卡以供以后快速使用。

我想确保我遵循 PCI-DSS 提出的所有安全标准

[https://www.pcisecuritystandards.org/documents/pci_dss_v2.pdf](https://www.pcisecuritystandards.org/documents/pci_dss_v2.pdf)（链接到pdf）

有一点说：

```
6.2 Establish a process to identify and assign a risk ranking to newly discovered security vulnerabilities 
```

如何识别我的 Iphone 应用程序中的安全漏洞？有没有我可以使用的工具或可以遵循的流程来检测它们？

我对这意味着什么以及我应该遵循什么流程来检测安全漏洞有点迷茫。

感谢您对此提供任何帮助、链接或澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:06:08.183

至于建立检测 iOS 应用程序中的安全漏洞的程序，OWASP 的[IOS 应用程序安全测试备忘单](https://www.owasp.org/index.php/IOS_Application_Security_Testing_Cheat_Sheet)是一个很好的起点。还有一些关于 iOS 安全的书籍，我觉得[这](https://rads.stackoverflow.com/amzn/click/com/1449318746)本书很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:45:19.473

PCI 指南的这一部分是为了确保您主动监控新的安全漏洞。理想情况下，您将注册/积极监控一个讨论组，该讨论组报告发现的安全漏洞。

当一个新漏洞被列出时，您需要判断它可能对您的应用程序的安全性造成的严重影响，并在必要时指定修复该漏洞的优先级。

您也许可以运行一个工具来查找历史漏洞，但要通过 PCI 指南的这一点，您需要主动解决**新的**安全问题。监控列表是理想的。

# sql-server-2008 - SQL 循环 - 每批加 1

> ID：15090284
> 
> 赞同：0
> 
> 时间：2013-02-26T13:26:30.927
> 
> 标签：sql-server-2008, loops

您好，我有一个包含批处理标题和详细记录的文件。我想添加一个新列，它将为批次标题分配一个编号，然后获取该编号并将其添加到详细记录中。

第一列中的数据如下所示。

AAA

BBB

BBB

BBB

BBB

BBB

BBB

AAA

BBB

BBB

BBB

AAA

我想要它做的是：数据看起来像这样

AAA - 1

血脑屏障 - 1

血脑屏障 - 1

血脑屏障 - 1

血脑屏障 - 1

血脑屏障 - 1

血脑屏障 - 1

AAA - 2

血脑屏障 - 2

血脑屏障 - 2

血脑屏障 - 2

AAA - 3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:43:57.970

假设您的文件是要导入 SQL Server 2008 的文本或 CSV 文件：

*   如果您需要这样做一次，我会在导入之前在 Excel 中处理文件。
*   如果您需要定期执行此操作，我会在 .NET 中编写一个快速控制台应用程序来为我执行此操作。然后，您可以让应用程序也向 SQL Server 推送，以使其成为一步过程。

如果数据已经在 SQL Server 2008 中，我仍然会考虑在 .NET 中逐个记录地执行此操作。.NET 只是比 T-SQL 更好的顺序处理工具。

如果 T-SQL 是您拥有的唯一工具……可能（使用 ROW_NUMBER()）编写几个可以为您执行此操作的批处理更新。但他们很难做到正确。您可能只需要使用游标并尝试顺序处理。

ETA：如果您有可用的 SSIS，您可以编写一个脚本转换来为您执行此操作。这实际上可能是最好的解决方案。

# php - Bootstrap typeahead 未正确连接到 SQL 数据库

> ID：15090287
> 
> 赞同：-1
> 
> 时间：2013-02-26T13:26:41.223
> 
> 标签：php, mysql, sql, twitter-bootstrap, bootstrap-typeahead

我正在尝试将我的 Bootstrap 搜索栏（它使用预先输入）连接到一个远程 SQL 数据库，其中包含不同的食物。我知道预输入在某种程度上是有效的，因为当我输入“C”时，会弹出“Chicago”这个词，但是，“Chicago”不在我的 SQL 数据库中。我正在关注[YouTube 上的本教程](http://www.youtube.com/watch?v=v0H6myhWkfA&list=PLFCC7BB1E12FEDC02&index=5)。

这是我的网页的 HTML/PHP 代码：

这是我的搜索条形码：

```
<form class="navbar-search">
    <input type="text" id="search" class="search-query span3 pull-right" placeholder="Search" data-provide="typeahead">
    <div class="icon-search"></div>
</form> 
```

这是我页面底部的 JS 代码：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/jquery-1.9.0.min.js"><\/script>')</script>

<!-- Bootstrap jQuery plugins compiled and minified -->
<script src="js/bootstrap.min.js"></script>

<!-- Bootstrap JS Code -->
<script>
    $(document).ready(function(){
        $('#search').typeahead({
            source: function(query, process) {
                $.ajax({
                    url: 'database.php'
                    type: 'POST';
                    data: 'query=' + query;
                    dataType: 'JSON';
                    async: true;
                    success: function(data) {
                        process(data);
                    }
                });
            }
        });
    });
</script> 
```

这是我应该访问 SQL 数据库的 database.php 代码：

```
<?php

if (isset($_POST['query'])) {
    // Connect to database
    mysql_connect('localhost','root','root');
    mysql_select_db('Menu_Items');

    // Retrieve the query
    $query = $_POST['query'];

    // Search the database for all similar items
    $sql = mysql_query("SELECT * FROM foods WHERE name LIKE '%{$query}%'");
    $array = array();

    while ($row = mysql_fetch_assoc($sql)) {
        $array[] = row['name'];
    }

    // Return the json array
    echo json_encode($array);

}

?> 
```

数据库信息如下：

数据库名称：Menu_Items

表名：食物

该表由 2 列组成，第 1 列是唯一 id，第 2 列标题为“名称”。

我似乎无法弄清楚我哪里出了问题，据我所知，我已经正确地遵循了教程。关于我在哪里搞砸的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:48:52.190

圣 Sql 注射蝙蝠侠！请在将来使用这种形式来撰写您的查询：

```
$query = sprintf("SELECT firstname, lastname, address, age FROM friends 
    WHERE firstname='%s' AND lastname='%s'",
    mysql_real_escape_string($firstname),
    mysql_real_escape_string($lastname)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T03:32:55.510

在您的代码中更改此：

```
$array[] = row['name']; 
```

对此：

```
$array[] = $row['name']; 
```

并确保您将：mysql_real_escape_string 应用到您的：`$_POST['query'];`以防止 SQL 注入。

# datasource - 运行时的 AppServer 数据源配置 - 查看或更新

> ID：15090288
> 
> 赞同：1
> 
> 时间：2013-02-26T13:26:46.200
> 
> 标签：datasource, jmx, informix, geronimo, appserver

我们正在使用 Geronimo 应用程序服务器并查看在运行时查看数据源配置的选项。

例如，如果我有以下数据源配置：

```
<connection-definition>
    <connectionfactory-interface>javax.sql.DataSource</connectionfactory-interface>
    <connectiondefinition-instance>
        <name>DB2_ds</name>
        <config-property-setting name="UserName">db2admin</config-property-setting>
        <config-property-setting name="DatabaseName">sample</config-property-setting>
        <config-property-setting name="Password">db2admin</config-property-setting>
        <config-property-setting name="ServerName">localhost</config-property-setting>
        <connectionmanager>
            <local-transaction/>
            <single-pool>
                <max-size>10</max-size>
                <min-size>0</min-size>
                <match-one/>
            </single-pool>
        </connectionmanager>
    </connectiondefinition-instance>
</connection-definition> 
```

是否可以监控数据源配置和属性以及运行时？是否可以查看和跟踪如何对 LockWait timeOut 等属性进行数据库调用？

我们是否需要实现 mBean 来监控它？

# magento - 如何从购物车 magento 中获取最后一项

> ID：15090290
> 
> 赞同：0
> 
> 时间：2013-02-26T13:27:05.920
> 
> 标签：magento, cart

需要获取最后的商品名称、图片、网址和价格。

```
$session= Mage::getSingleton('checkout/session');
foreach($session->getQuote()->getAllItems() as $item)
{
$productid = $item->getProductId();
$productname = $item->getName();
$productqty = $item->getQty();
} 
```

这是有效的，但我无法获取图像和网址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:58:38.493

集合通常不会加载整个对象，您需要重新加载对象以获取所需的其他数据：

```
$session= Mage::getSingleton('checkout/session');
// Get all items, including child / hidden items
foreach($session->getQuote()->getAllItems() as $item) {
    $_prod = Mage::getModel('catalog/product')->load($item->getProductId());
    $productname = $_prod->getName();
    $productqty = $_prod->getQty();
    // Now you have a full loaded Product Object.
}
// Visible items only
foreach($session->getQuote()->getAllVisibleItems() as $item) {
    $_prod = Mage::getModel('catalog/product')->load($item->getProductId());
    $productname = $_prod->getName();
    $productqty = $_prod->getQty();
    // Now you have a full loaded Product Object.
} 
```

# linux - “mv file1 *.file1”有什么作用？

> ID：15090291
> 
> 赞同：4
> 
> 时间：2013-02-26T13:27:07.523
> 
> 标签：linux, bash, mv

当我发出命令时

```
mv file1 *.file1 
```

在 file1 所在的目录中，它消失了。它最终在哪里？我知道`*`在 Linux 下的文件名中是一个有效字符，我应该转义该`*`字符以获得预期的结果，例如

```
mv file1 \*.file1 
```

但如果没有逃脱它，它被转移到了哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T13:44:37.397

结果`mv file1 *.file1`取决于匹配的内容`*.file1`

*   如果`*.file1`不匹配，则`file1`重命名为`*.file1`
*   如果`*.file1`只匹配一个文件，则`file1`重命名为匹配文件的名称，匹配文件丢失。
*   如果`*.file1`恰好匹配一个文件，并且该文件是一个目录，则`file1`移动到匹配的目录。
*   如果`*.file1`匹配多个文件，并且最后匹配的文件是一个目录，那么`file1`，所有匹配的文件（除了这个目录）都将被移动到该目录。
*   如果`*.file1`匹配多个文件，并且最后匹配的文件不是目录，`mv`则将失败并出现错误。

参见下面的实验：

```
$ cat /etc/*-release
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=12.04
DISTRIB_CODENAME=precise
DISTRIB_DESCRIPTION="Ubuntu 12.04.2 LTS"
NAME="Ubuntu"
VERSION="12.04.2 LTS, Precise Pangolin"
ID=ubuntu
ID_LIKE=debian
PRETTY_NAME="Ubuntu precise (12.04.2 LTS)"
VERSION_ID="12.04"
$ ls
$ touch file1
$ ls
file1
$ mv file1 *.file1
$ ls
*.file1
$ touch file1
$ ls
file1  *.file1
$ mv file1 *.file1
$ ls
*.file1
$ touch 1.file1
$ touch file1
$ mv file1 *.file1
mv: target `*.file1' is not a directory
$ ls
1.file1  file1  *.file1
$ mkdir z.file1
$ mv file1 *.file1
$ ls z.file1/
1.file1  file1  *.file1 
```

# node.js - 是否可以编译翡翠模板以供生产使用？

> ID：15090300
> 
> 赞同：0
> 
> 时间：2013-02-26T13:27:36.360
> 
> 标签：node.js, express, pug

我有一个 nodejs/express 应用程序。我为我的模板使用了翡翠模板系统。当我得到模板时，它每次都会组装。但我想通过编译来提高性能。快递可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:35:11.647

是的。您可以构建一个在加载时执行的函数（即在`app`express 中的声明处），它将编译所有模板并将它们留在内存中：

以此为例：

```
/**
 * @param   {Object}  app
 *
 * @api     private
 *
 * @summary Compiles the partial dashboard templates into memory
 *          enabling the admin controller to send partial HTMLs
 */
function compileJadeTemplates (app) {
  var templatesDir = path.resolve(
    app.get('views')
   , 'partials'
   );

  var templateFiles
    , fn
    , compiledTemplates = {};

  try {
    templateFiles = fs.readdirSync(templatesDir);
    for (var i in templateFiles) {
      fn = jade.compile(
            fs.readFileSync(path.resolve(templatesDir, templateFiles[i])));
      compiledTemplates[templateFiles[i]] = fn;
    }
    app.set('dashboard-templates', compiledTemplates);
  } catch (e) {
    console.log('ERROR');
    console.log('---------------------------------------');
    console.log(e);
    throw 'Error on reading dashboard partials directory!';
  }

  return app;
} 
```

以这种方式在 expressJS 控制器函数中调用模板：

```
/**
 * @param   {String}  req
 * @param   {Object}  res
 * @param   {Object}  next
 *
 * @api     public
 *
 * @url     GET       /admin/dashboard/user_new
 *
 * @summary Returns HTML via AJAX for user creation
 */
controller.newUser = function (req, res, next) {
  var compiledTemplates = app.get('dashboard-templates');    
  var html = compiledTemplates['_user_new.jade']({ csrf : req.session._csrf});
  return res.send({ status : 'OK', message : html});
} 
```

在这种情况下，我`html`通过 AJAX 发送；由应用程序附加。如果您不想这样做。您可以使用以下功能发送 html：

```
res.write(html);
return res.end(); 
```

# spring - 限制左连接休眠

> ID：15090301
> 
> 赞同：0
> 
> 时间：2013-02-26T13:27:44.790
> 
> 标签：spring, hibernate, playframework, ejb-3.0, ejb-3.1

我有一个名为 ServiceList 的实体，它有一组 productListOrders

```
 @Entity
 @Table(name="service_lists")
 public class ServiceList implements Serializable {
private static final long serialVersionUID = 1L;
    private Set<ProductServiceListOrder> productServiceListOrders = new HashSet<ProductServiceListOrder>();
}

ProductServiceListOrder looks like this 
public class ProductServiceListOrder implements Serializable {
private static final long serialVersionUID = 1L;

private ServiceList serviceList;
private Product product;
private Date createdAt;

private Long id;
private Integer internalOrder;
} 
```

诀窍是在 internalOrder 中，最高的 internalOder 值首先显示..当我进行休眠查询时，我确实喜欢这样...

```
{
List<ServiceList> lists = (List<ServiceList>) JPA.em().createQuery(
                    "select  distinct list from com.vionlabs.movieoncloud.model.main.ServiceList list " +
                            "left join fetch list.productServiceListOrders "  )
} 
```

**我的问题是**：-我想对左连接设置一个限制，这意味着当我进行查询时我只想获得最高的 10 个 productSeriveListOrders ...我该怎么做...有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:45:36.417

在您的方法`Query`返回的对象上，您可以使用该方法并将其与查询中的 order by 结合使用。`createQuery``entityManager``setMaxResult`

# dynamics-crm-2011 - 如何对 CRM 2011 进行身份验证？

> ID：15090305
> 
> 赞同：5
> 
> 时间：2013-02-26T13:27:49.567
> 
> 标签：dynamics-crm-2011

我想建立一个简单的网站，客户可以在其中下订单和查看产品。此数据是我的 Microsoft Dynamics CRM 2011 环境。

此数据是客户特定的，因此我需要有关已登录用户的信息。用户凭据存储在 CRM 2011 中。使用这些凭据，用户可以登录到这个新的自定义网站。他们不应有权访问 crm 环境本身。

我应该如何为此网站设置身份验证？我可以只在 crm 2011 中查询用户信息，我应该设置 ADFS 应用程序还是其他什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T14:42:58.250

我们刚刚为我的一个客户实现了类似的东西。我们有大约 5000 名用户需要能够查看和编辑 CRM 数据，但我们不想为完整的 CRM 用户许可付费，因为他们需要更新/查看的数据相当小。所有用户都已在 Active Directory 中，因此我们为每个用户购买了员工自助服务客户端访问许可证 (ESS CAL) 许可证。这种类型的用户许可证无权访问 CRM UI，因此他们永远无法真正登录 CRM 本身。

我们在网站上使用了 AD 身份验证，应用程序池用户是 CRM 超级用户帐户。在用户会话的初始加载中，我们从上下文中获取用户名，并在 CRM 中查找用户的 SystemUserId，然后使用模拟服务代理来仅访问和更新允许用户访问的数据。它工作得非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:11:46.677

一种方法是创建一组系统用户（可能一个就足够了），对一组网站用户应该可以访问的信息具有访问权限。

然后，在托管 Web 应用程序的服务器上，您可以为每个登录的访问者分配一个角色（这样，CRM 中的某个系统用户实例将对应于一组访问者的角色）。

针对网站的登录过程完全取决于您。我相信，如果您将应用程序和 CRM 服务器之间的连接保持在同一台物理机器上（如果这适用于您的特定设置），那么它们之间的连接是最安全的。

# javascript - html/js Windows 8 People App（Facebook、Twitter）不会出现在共享目标上

> ID：15090307
> 
> 赞同：0
> 
> 时间：2013-02-26T13:27:50.790
> 
> 标签：javascript, facebook-javascript-sdk, windows-store-apps, winjs

在尝试从我的 winjs 应用程序共享数据（简单文本）时，当我单击共享魅力时，我只有邮件和另一个个性化应用程序作为共享选项（目标），我希望在 Facebook 或 Twitter 上共享内容我的地铁应用。

我通过添加 Facebook 和 Twitter 帐户配置了我的 People App，我可以看到所有 Facebook 帖子和推文。

如何将人物应用程序添加到我的共享目标中，以便在我单击共享超级按钮时显示？

我想知道是否有我必须插入的额外代码或其他任何事情要做？

请问有什么有用的建议吗？

```
//this the function that allow me to share content from the share charm
function ShowandShareContract() {

    Windows.ApplicationModel.DataTransfer.DataTransferManager.showShareUI();
    var dataTransferManager = Windows.ApplicationModel
                                     .DataTransfer
                                     .DataTransferManager
                                     .getForCurrentView();

    dataTransferManager.addEventListener("datarequested", function (e) {       
        var request = e.request;
        request.data.properties.title = "Debugmode";
        request.data.properties.description = "Debugmode Share App";
        request.data.setText("Hello from DebugMode App");
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:08:30.247

@布拉欣

共享合同的诀窍在于，共享目标（在您的示例中为 People 应用程序）只有在处理您的应用程序（共享源）提供的一种或多种类型的数据时才会出现在应用程序列表中。因为您只提供了标题、描述和文本，所以我的建议是尝试添加更多数据类型。

Windows 应用商店应用开发中心上的[共享内容源应用示例](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Source-App-d9bffd84)显示了可以共享的多种数据类型的示例。如果您下载并运行此示例，您可以测试以查看人员应用程序接受了哪些内容（当我尝试时，链接是我唯一能够成功分享的内容）。

请记住，共享合同的优势在于您不必仅依赖一个应用程序进行共享。事实上，用户可以控制哪个应用程序接收内容，因此以尽可能多的格式（标题、描述、纯文本、HTML、链接、图片（如果适用）等）提供您的内容符合您的最大利益。 ，因此无论所需的接收应用程序支持哪种类型的内容，都可以处理您的应用程序的共享请求。

希望有帮助。

有关 Windows 应用商店应用开发的更多信息，请注册[Generation App](http://bit.ly/gd30tolaunch)。

# php - mysql中的访问被拒绝超级权限错误？

> ID：15090308
> 
> 赞同：0
> 
> 时间：2013-02-26T13:27:50.593
> 
> 标签：php, mysql

MysqlError：访问被拒绝；您需要（至少一个）超级权限才能执行此操作

我的查询：

```
$sql = 'SELECT GROUP_CONCAT(field_one ORDER BY field_id SEPARATOR '-') AS field_ans FROM table_name'; 
```

*   field_one [最多存储 450 个字符]。
*   使用 GROUP_CONCAT，我试图在单个列中获取多个行值。

注意：不要在 phpmyadmin 中运行 'SET GLOBAL group_concat_max_len = 4096'。我想要更改 PHP 文件。

我在我的查询中使用 group_concat，所以我将 group_concat_max_len 值从“默认：1024 增加到 4096”，仅针对该查询。

```
$sql = "SET GLOBAL group_concat_max_len = 4096"; 
```

如何摆脱错误，我的日志文件中出现错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:34:48.080

您正在尝试更改`group_concat_max_len`整个数据库（即不仅仅是您的查询/会话），这需要数据库管理员权限。

如果您只想为您的会话更改它，请改用；

```
SET SESSION group_concat_max_len=15000; 
```

...这只会为您的会话更改它，并且不需要任何提升的权限。

# java - 最简单的云存储服务API

> ID：15090315
> 
> 赞同：6
> 
> 时间：2013-02-26T13:28:04.407
> 
> 标签：java, web-applications, google-drive-api, dropbox, onedrive

我需要创建一个使用至少两个不同云存储提供商（Google Drive、Dropbox、SkyDrive、Mega...）的 API 的 Java Web 应用程序。我想知道是否有使用这些 API 的经验的人可以判断哪些是最容易使用的，哪些是最困难的......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-15T07:50:05.293

[Kloudless](https://developers.kloudless.com/)为几种不同的云存储 API（Dropbox、Box、GDrive、OneDrive 等）提供了一个通用 API。Kloudless 还提供流行语言的 SDK 和 UI 小部件来处理身份验证和其他用户交互。

您可以在此处找到更多信息并注册：[https ://developers.kloudless.com/](https://developers.kloudless.com/)

全面披露：我在 Kloudless 工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T13:34:39.307

[Amazon S3](http://aws.amazon.com/documentation/s3/)服务非常简单，我在使用它处理 Web 服务上下文中的大文件和大量文件方面拥有丰富的经验。注册服务后，您可以使用[RESTful API](http://docs.aws.amazon.com/AmazonS3/latest/API/APIRest.html)创建存储桶并将对象上传到其中。[Java 库](http://aws.amazon.com/sdkforjava/)是与服务接口的参考库，尽管也有其他语言的端口（例如 Python 的[boto](https://github.com/boto/boto)）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T17:18:44.513

Temboo 支持多种云存储 API，并且可以生成访问它们所需的 Java 源代码。

见这里：[https ://live.temboo.com/library/keyword/storage/](https://live.temboo.com/library/keyword/storage/)

通过规范化 API 访问，Temboo 使与一个 API 的对话变得像与另一个 API 对话一样简单，因此听起来您会发现对这个项目很有用。

全面披露：我在 Temboo 工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T19:58:49.083

在对该主题进行了少量研究之后，我发现可能具有最简单 API 的云存储提供商是[**MediaFire**](http://www.mediafire.com/)，它通过**RESTful**服务提供非常简单的交互。您可以查看[**API 文档**](http://developers.mediafire.com/index.php/REST_API)。我还没有开始深入研究这个 API，但它似乎提供了所有的基本功能。

**[Box](https://www.box.com/)**提供的 API似乎也很简单。它使用[**OAuth 2.0**](http://oauth.net/2/)，这使其更加安全。见[**开发者网站**](http://developers.box.com/)。

[**4sync**](http://www.4sync.com/)的 SOAP API也非常简单。没有太多文档，网站上的示例似乎来自旧版本，但无论如何它非常易于使用。[**请参阅此处**](http://www.4sync.com/developer/docs/intro/)的文档。

# java - 重置 Mockito 间谍

> ID：15090317
> 
> 赞同：12
> 
> 时间：2013-02-26T13:28:10.533
> 
> 标签：java, unit-testing, mocking, mockito

我有一个`Mockito.verify`用于间谍对象的测试类（基于 TestNG）。

这有效：

```
public class Program {
    @Spy
    private TestObject testObject;

    @Test
    public void test1() {
       testObject.makeSth(); 
       verify(testObject, only()).someMethodNeedToBeChecked(); 
    }
} 
```

但在这儿：

```
public class Program {
    @Spy
    private TestObject testObject;

    @Test
    public void test1() {
       testObject.makeSth(); 
       verify(testObject, only()).someMethodNeedToBeChecked(); 
    }

    @Test
    public void test2() {
        // Some different scenario
       testObject.makeSth(); 
       verify(testObject, only()).someMethodNeedToBeChecked(); 
        ...
    }
} 
```

我得到一个 Mokito 异常，我有不止一个`someMethodNeedToBeChecked`方法调用。当然，我尝试添加`Mockito.reset(testObject)`，但它根本没有帮助我。

如果我需要在多个测试中验证相同的方法，如何重置间谍对象？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-26T13:47:41.823

从 Mockito[文档](http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#17)：

> 重置模拟（自 1.8.0 起）
> 
> Smart Mockito 用户几乎不使用此功能，因为他们知道这可能是测试不佳的标志。通常，您不需要重置模拟，只需为每个测试方法创建新的模拟。请考虑在冗长、过度指定的测试中编写简单、小型且集中的测试方法，而不是 reset()。第一个潜在的代码异味是在测试方法中间的 reset() 。这可能意味着您正在测试太多。遵循您的测试方法的耳语：“请让我们保持小规模并专注于单一行为”。在 mockito 邮件列表上有几个关于它的主题。
> 
> 我们添加 reset() 方法的唯一原因是可以使用容器注入的模拟。

您可能应该只在以下位置重新创建间谍`@BeforeMethod`：

```
public class Program {

    private TestObject testObject = new TestObject();
    private TestObject spyTestObject;

    @BeforeMethod
    public void buildSpy() {
        spyTestObject = spy(testObject);
    }

    @Test
    public void test1() {
       spyTestObject.makeSth(); 
       verify(spyTestObject , only()).someMethodNeedToBeChecked(); 
    }

    @Test
    public void test2() {
        // Some different scenario
       spyTestObject.makeSth(); 
       verify(spyTestObject , only()).someMethodNeedToBeChecked(); 
        ...
    }
} 
```

# jquery - 替换为使用 jQuery

> ID：15090320
> 
> 赞同：3
> 
> 时间：2013-02-26T13:28:14.887
> 
> 标签：jquery, html

我在这里做一个懒惰的表格转置。我有一张这样的桌子：

```
 <table>
     <th style="text-align: left; text-transform: capitalize;">Unique</th>
     <th style="text-align: left; text-transform: capitalize;">x1</th>
     <th style="text-align: left; text-transform: capitalize;">y2</th>
     <tr class="rowNormal">
     <td nowrap="true">a1</td>
     <td nowrap="true">b2</td>
     <td nowrap="true">b3</td>
     </tr>
     </table> 
```

我需要看起来像这样：

```
 <table>
     <tr class="rowNormal">
     <tr><td nowrap="true">a1</td><.tr>
     <tr><td nowrap="true">b2</td></tr>
     <tr><td nowrap="true">b3</td></tr>
     </tr>
     </table> 
```

它只有两行，其中一行是标题。所以我像这样隐藏标题：

```
 $("table:contains('Unique')").find("th").addClass("hidden"); 
```

哪个工作正常。现在我需要为`<tr>`每个添加一个`<td nowrap="true">`，在这里我遇到了麻烦。我用这个：

```
 $('div.content').html($('div.content').html().replace(/<td nowrap="true">/g,' <tr><td nowrap="true">')); 
```

哪个有效，但我想将其缩小到包含“唯一”的表，而不使用全局。这个

```
 $('div.content').html($('div.content').html().replace(/</td>/g,'<td></tr>')); 
```

根本不起作用。我尝试玩`replaceWith`and `replaceAll`，但没有成功。问题：1）添加格式以将剩余行转置为列的最佳方法？2）如何指定`"`和`/`作为参数？`'`3)和有什么区别`"`？

感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:33:48.297

你可以[`wrap`](http://api.jquery.com/wrap/)在 jQuery 中使用来做到这一点：

```
$("td[nowrap='true']").wrap("tr"); 
```

或仅适用于您的唯一包含选择器的项目：

```
$("table:contains('Unique') td[nowrap='true']").wrap("tr"); 
```

# localhost - 为什么 localhost 返回“502 Bad Gateway”？

> ID：15090324
> 
> 赞同：3
> 
> 时间：2013-02-26T13:28:23.650
> 
> 标签：localhost, mamp

当我搜索这个问题时，我注意到这是 nginx 的一个常见问题。但我从来没有在我的机器上使用过 nginx。我使用 MAMP，偶尔使用 Python Bottle。

现在无论我的 MAMP/Python 服务器是否打开，只要地址栏 URL 包含单词“ **localhost** ”，我总是会收到“502 Bad Gateway ”。因此，我不得不同时使用“ **127.0.0.1** ”。

我真的很困惑，因为我不知道是哪个特定事件导致这个问题在我的[Mac OS X v10.7.5](http://en.wikipedia.org/wiki/Mac_OS_X_Lion) (Lion) 中开始发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T07:03:56.443

我自己在 MAMP 上遇到了这个问题 - 访问`localhost:8888/anything`给了我一个 502，但`127.0.0.1`工作正常。

我发现是我的 VPN（在这种情况下是[Hotspot Shield](https://en.wikipedia.org/wiki/Hotspot_Shield)）导致了这个问题（尽管我不确定为什么）。我从 VPN 断开连接并`localhost`再次正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-24T04:48:12.050

检查您的`/etc/nginx/site-available/default`文件并确保 php7.1-fpm.sock 是您安装的正确 PHP 版本。

在线的：

```
fastcgi_pass unix:/run/php/php7.1-fpm.sock; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-05T14:34:08.437

对于 MacOS 用户，您可以在终端中输入以下内容：

```
dscacheutil -flushcach 
```

# android - 如何创建可以作为 Android 项目导入的 Maven 项目

> ID：15090327
> 
> 赞同：4
> 
> 时间：2013-02-26T13:28:31.440
> 
> 标签：android, maven-3, m2eclipse

我是 Maven 的粉丝，并且喜欢它给我和我的程序员同事在项目协作时提供的自由。我认为自己对 Maven 及其 pom 以及命令行目标有相当好的理解。

现在我们开始创建一个安卓测试项目来自动测试我们的安卓软件。我们在 Eclipse 环境中执行此操作没有任何问题，并且测试套件现在已启动并运行。

然而，是时候让更多的程序员加入这个项目了，因此我们希望能够从我们的 git 存储库中克隆这个项目，运行`mvn eclipse:eclipse`，将它导入一个新的 eclipse（当然使用 android-sdk 等等）并运行测试正如预期的那样。

我们偶然发现了该项目没有成为 Eclipse 中的 Android 测试项目的障碍，因此无法在其任何类上运行 Android JUnit。

主要问题：从 Git 克隆项目后，我们如何使项目成为终端窗口中的 Android 测试项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T00:42:44.267

您可以通过将其添加到.project文件中然后再次打开eclipse来手动将android性质添加到项目中。

```
<nature>com.android.ide.eclipse.adt.AndroidNature</nature> 
```

您可以创建一个空的 android 测试项目，然后将其 .project 文件与您的项目文件进行比较。

# svn - 如何自动将 Subversion 中的文件从主干复制到特殊分支？

> ID：15090329
> 
> 赞同：1
> 
> 时间：2013-02-26T13:28:40.563
> 
> 标签：svn, hook

我们这里有以下情况：

*   用户开始提交（在主干上）。
*   他在他的提交消息中添加了特殊的关键字来表示这个更改应该在一个分支上自动完成。

有什么好的解决方案来实现它？我看到了以下选项（但想在这里指出您认为最好的选项）：

*   查看后台作业中的每个提交，并开始另一个提交以将相关更改复制到分支。
*   实现一个 post-commit-hook，直接在提交后触发更改。

您对此有何看法？是否有其他可用的解决方案，甚至更合适？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:07:34.497

1.  在 Subversion 中，将修订从某个子树复制到某个现有子树是合并（-c，如果是单个修订，则为“cherry-pick merge”）
2.  合并只能在工作副本中执行

第 1 页和第 2 页的条件为我们提供了初步配方：

提交后挂钩必须：

*   检测提交，这需要采取行动（否则什么也不做）
*   cd 到本地（用于服务器）WC
*   perform `svn merge -c... URL-OF-TRUNK`，可能，为了自动解决冲突，使用`--accept`选项
*   提交到分支

* * *

来自@mliebelt 的补充：

*   最好的解决方案应该是实现脚本以自动执行该任务，但在客户端上手动运行该脚本。
*   然后，配置管理员（或其他熟悉的用户）应该手动澄清可能发生的冲突，在最好的情况下，他只需使用适当的日志消息提交更改。

# ios - 如何从 iOS 的默认日历中检索最近完成的待办事项？

> ID：15090332
> 
> 赞同：0
> 
> 时间：2013-02-26T13:28:47.727
> 
> 标签：ios, ipad, ekevent, ekeventkit, ekeventstore

我在 iOS5 中使用默认日历。我必须显示最近完成的三个活动，最近三个待办事项。这些事件可以是任何事情，意味着它可以是任何一天。

任何人都可以帮助我如何使用 ekevnt 存储检索这些事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:39:05.013

看看你是否可以利用这个`enumerateEventsMatchingPredicate:usingBlock:`Write 谓词来获取所有事件，然后在块回调过程中处理 3 个事件然后停止。

# sql - 性能类型列 x 不同表

> ID：15090333
> 
> 赞同：0
> 
> 时间：2013-02-26T13:28:51.073
> 
> 标签：sql, sql-server, performance, conceptual

在查询的性能或优化方面，不同的表和类型列之间存在差异吗？

例如：

```
Create Table AllInOne(
  Key Integer Identity Primary Key,
  Desc varchar(20) Not Null,
  OneType Integer Not Null
) 
```

其中 OneType 仅接收 1,2 或 3。（整数值）

与以下架构相比：

```
Create Table One(
  Key Integer Identity Primary Key,
  Desc varchar(20) Not Null
)

Create Table Two(
  Key Integer Identity Primary Key,
  Desc varchar(20) Not Null
)

Create Table Three(
  Key Integer Identity Primary Key,
  Desc varchar(20) Not Null
) 
```

另一种可能的架构：

```
Create Table Root(
  Key Integer Identity Primary Key,
  Desc varchar(20) Not Null
)

Create Table One(
  Key Integer Primary Key references Root       
)

Create Table Two(
  Key Integer Primary Key references Root     
)

Create Table Three(
  Key Integer Primary Key references Root    
) 
```

在第三种方式中，所有数据都将设置在根中，并与一、二和三表的关系。

我前段时间问过我的老师，他无法回答是否有任何区别。假设我必须在这三种方法之间进行选择。
假设常用查询正在过滤类型。并且没有引用这些的子表。

为了更容易理解，让我们考虑一个工资系统。
一 = 收入
二 = 折扣
三 = 计算基础。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:08:08.823

拥有单独的表，如 (2) 所示，意味着需要访问特定 OneType 数据的人可以忽略其他类型的数据，从而减少表扫描的 I/O。此外，(2) 中表上的索引会更小，高度可能更小，这意味着索引访问的 I/O 更少。

鉴于 OneType 的高选择性，索引无助于 (1) 中的过滤。但是，可以使用表分区来获得上述所有好处。

还会有额外的好处。查询时（2），需要知道需要哪个OneType才能知道查询哪个表。在 (1) 的分区版本中，可以通过 where 子句谓词中提供的值来消除不需要的分区，从而使过程更加容易。

其他好处包括更轻松的数据库管理（当您将列添加到分区表时，它会添加到所有分区），以及更容易扩展（为新的 OneType 值添加分区很容易）。此外，如前所述，表可以由外键定位。

# php - preg_replace 如果条件匹配

> ID：15090336
> 
> 赞同：0
> 
> 时间：2013-02-26T13:29:08.167
> 
> 标签：php, regex, preg-replace

在解析网页时，我的解析器由于无效的 DOM 结构而停止。我想通过替换某些节点来修复它。

我发现有一个额外`</div>`的导致解析器停止。

我需要编写一个正则表达式来检查： if any`</div>`后跟一个`</div>`[即两者之间没有起始`<div>`标签。它将检查 `<div`标签可能有 id 或 class to follow]，然后最后一个`</div>`将替换为`<div></div>`.

即如果`</div>`后跟一个`</div>`，那么最后一个将被替换为`<div></div>`。

提前致谢。

例子： `<div> <img src="/lexus-share/images/spacer.gif" width="2" height="15" border="0" alt=""> </div> <a href="http://www.somedomain.com"><img src="/pub-share/images.jpg"></a> </div>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:55:08.390

我建议您为此尝试一种不同的方法，而不是使用正则表达式，因为使用嵌套标签并不容易。

我不知道您使用什么语言来解析文档，但是您可以编写的代码逻辑是：

解析整个文档以搜索字符串`div>`并创建 2 个变量来计算 openingDivs 和 closingDivs。

如果之前的字符`div>`是`<`，则打开Divs++。

如果之前的字符`div>`是`/`，则关闭Divs++ 并检查`if (closingDivs > openingDivs)`

如果条件成立，您可以让程序输出 div 的位置或`</div>`用空格或 null 替换。

希望这可以帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:40:03.780

这仅在没有嵌套`<div>`s 时才有效（不确定它们是否合法）：

```
$result = preg_replace(
    '%</div>       # Match a closing div tag
    (              # Match and capture in group 1...
     (?:           # ...the following regex:
      (?!</?div>)  # Match (unless a div tag intervenes)
      .            # any character.
     )*            # Repeat any number of times.
    )              # End of capturing group
    (?=</div>)     # Assert that a closing div tag follows%six', 
    '</div><div>\1', $subject); 
```

这改变了

```
<div> <img src="/lexus-share/images/spacer.gif" width="2" height="15" border="0" alt=""> </div> <a href="http://www.somedomain.com"><img src="/pub-share/images.jpg"></a> </div> 
```

进入

```
<div> <img src="/lexus-share/images/spacer.gif" width="2" height="15" border="0" alt=""> </div><div> <a href="http://www.somedomain.com"><img src="/pub-share/images.jpg"></a> </div> 
```

# javascript - NPM 脚本问题

> ID：15090339
> 
> 赞同：0
> 
> 时间：2013-02-26T13:29:16.023
> 
> 标签：javascript, bash, node.js, npm

我有一个 nodejs 文件`runner.node.js`。

如果我运行`node runner.node.js`它有效

但是，如果我尝试使用 npm test 运行它（它在 package.json 中引用）：

```
"test": "node ./spec/runner.node.js" 
```

或者

```
"test": "spec/runner.node.js" 
```

它说该文件不可执行：

```
sh: 1: spec/runner.node.js: Permission denied
npm ERR! Test failed.  See above for more details.
npm ERR! not ok code 0 
```

如果我将文件设置为可执行文件，那么它会说：

```
spec/runner.node.js: 1: spec/runner.node.js: Syntax error: word unexpected (expecting ")")
npm ERR! Test failed.  See above for more details.
npm ERR! not ok code 0 
```

虽然它仍然可以使用“node spec/runner.node.js”正确运行

文件是这样的：

```
console.log("Running Knockout tests in Node.js");

var fs = require('fs');
var jasmine = require('./lib/jasmine-1.2.0/jasmine');

// export jasmine globals
for (var key in jasmine) {
    global[key] = jasmine[key];
}

// add our jasmine extensions to the exported globals
require('./lib/jasmine.extensions');

// export ko globals
if (process.argv.length > 2 && process.argv[2] == '--source') {
    // equivalent of  ../build/knockout-raw.js
    global.DEBUG = true;
    global.ko = global.koExports = {};
    global.knockoutDebugCallback = function(sources) {
        sources.unshift('build/fragments/extern-pre.js');
        sources.push('build/fragments/extern-post.js');
        eval(sources.reduce(function(all, source) {
            return all + '\n' + fs.readFileSync(source);
        }, ''));
    };
    require('../build/fragments/source-references');
} else {
    global.ko = require('../build/output/knockout-latest.js');
}

// reference behaviors that should work out of browser
require('./arrayEditDetectionBehaviors');
require('./asyncBehaviors');
require('./dependentObservableBehaviors');
require('./expressionRewritingBehaviors');
require('./extenderBehaviors');
require('./mappingHelperBehaviors');
require('./observableArrayBehaviors');
require('./observableBehaviors');
require('./subscribableBehaviors');

// get reference to jasmine runtime
var env = jasmine.jasmine.getEnv();

// create reporter to return results
function failureFilter(item) {
    return !item.passed();
}
env.addReporter({
    reportRunnerResults:function (runner) {
        var results = runner.results();
        runner.suites().map(function (suite) {
            // hack around suite results not having a description
            var suiteResults = suite.results();
            suiteResults.description = suite.description;
            return suiteResults;
        }).filter(failureFilter).forEach(function (suite) {
            console.error(suite.description);
            suite.getItems().filter(failureFilter).forEach(function (spec) {
                console.error('\t' + spec.description);
                spec.getItems().filter(failureFilter).forEach(function (expectation) {
                    console.error('\t\t' + expectation.message);
                });
            });
        });
        console.log("Total:" + results.totalCount + " Passed:" + results.passedCount + " Failed:" + results.failedCount);
        process.exit(results.failedCount);
    }
});

// good to go
env.execute(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:24:20.643

添加

```
#/usr/bin/env node 
```

作为文件的第一行。这样，当作为可执行文件运行时，您的操作系统将知道它将使用 Node.js 来运行它（确切地说：您的操作系统将知道它将使用第一个调用的应用程序`node`来执行您的脚本）。

# mysql - 为什么有“有”，却有“在”

> ID：15090342
> 
> 赞同：7
> 
> 时间：2013-02-26T13:29:39.643
> 
> 标签：mysql, sql, where, where-clause, having-clause

我知道这被讨论了很多，但我的研究都无法让我相信 MySQL 中 ' `where`' 和 ' `having`' 子句之间的区别。据我了解，我们可以使用 ' ' 实现使用 'where' 子句可以完成的一切`having`。例如。`select * from users having username='admin'`. 那你为什么需要' `where`'子句？使用 where 会产生任何性能差异吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T13:41:35.790

`WHERE`子句在聚合之前过滤来自源的数据，而子句`HAVING`在`GROUP BY`应用之后过滤数据。通常这意味着任何非聚合过滤器都可以出现在任一位置，但如果您的查询中未引用列，则只能在`WHERE`子句中对其进行过滤。

例如，如果您有下表：

```
| ID | VALUE |
--------------
|  1 |    15 |
|  2 |    15 |
|  3 |    20 |
|  4 |    20 |
|  5 |    25 |
|  6 |    30 |
|  7 |    40 | 
```

假设您想应用以下查询：

```
select value, count(value)
from Table1
group by value 
```

但是您只想包含行 where `ID > 2`。如果你把它放在一个`HAVING`子句中，你会得到一个[**错误**](http://www.sqlfiddle.com/#!2/f6741/17)，因为该`ID`列在聚合后不可用，因为它不在`SELECT`子句中。在这种情况下，您将需要使用一个`WHERE`子句：

```
select value, count(value)
from Table1
where id > 2
group by value 
```

演示：[http ://www.sqlfiddle.com/#!2/f6741/16](http://www.sqlfiddle.com/#!2/f6741/16)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T13:31:10.193

`HAVING`from`WHERE`子句之间的区别在于`HAVING`支持聚合列，`WHERE`而不支持聚合列，因为它仅适用于单个行。，EG

```
SELECT ID
FROM tableName
GROUP BY ID
HAVING COUNT(ID) > 1  --- <<== HERE 
```

* * *

从 MySQL 文档中，

*“如果您使用 HAVING 而不是 WHERE，则可以使用别名，这是两个子句之间定义的差异之一。Having 也较慢并且不会被优化，但是如果您将这样的复杂函数放置在您显然在的地方没想到速度很快。”*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T13:31:05.867

Where 在单行级别上求值，而 have 用于 group by 表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T13:35:19.153

使用该`HAVING`子句，您可以指定过滤**组**的条件，而不是过滤**单个** 行，这发生在`WHERE`阶段。

只有`HAVING` 子句中的逻辑表达式计算结果为 TRUE 的组才会由`HAVING`阶段返回。逻辑表达式计算结果的组`FALSE or UNKNOWN`被过滤掉。

`GROUP BY`未使用时，其`HAVING`行为类似于`WHERE`子句。关于性能比较请看这篇[文章](http://blog.sqlauthority.com/2007/07/04/sql-server-definition-comparison-and-difference-between-having-and-where-clause/)

# matlab - Matlab kml 在谷歌地图而不是谷歌地球中打开

> ID：15090344
> 
> 赞同：0
> 
> 时间：2013-02-26T13:29:50.750
> 
> 标签：matlab, kml

我的 matlab 正在生成一个 .kml 文件，它在谷歌地球中打开。有没有办法将其更改为在谷歌地图中打开。

并且还要折扣第一个值，它是未知数 0,0

谢谢。

**代码**

```
kmlwrite('routetraveled', B.data(1:elements,4), B.data(1:elements,5));
winopen('routetraveled.kml'); 
```

我用它来生成 .kml 并打开它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:55:38.913

我不知道 Google Earth 是否支持它，但许多应用程序允许您在打开程序时指定要加载的文件。而不是`winopen`，您只需进行命令行调用。像这样的东西：

```
!Path/To/Google/Maps --open filename.kml 
```

# python - 导入我的课程的问题

> ID：15090346
> 
> 赞同：1
> 
> 时间：2013-02-26T13:29:52.500
> 
> 标签：python

考虑到我有 3 个文件。

我试图将不同的导入函数放在一个文件中并直接调用该文件，即 File2 在这种情况下。

文件1.py

```
class generalTools(): 
     def waitAppear():
         wait() 
```

文件 11.py

```
class machinedata():
     def max():
         maxtime() 
```

文件2.py

```
import File1
import File11
self.generalTools = File1.generalTools()
self.machinedata=machinedata.max() 
```

文件3.py

```
from File2 import * 
```

注意这里我不是在创建一个对象；只是想打电话`File1->waitAppear()`

```
self.generalTools.waitAppear(self) 
```

每当我执行上面的代码时，它都会抛出错误说“generaTool 没有实例”上面的代码有什么问题？

# javascript - 在所有视口中保持 Google 地图标记居中

> ID：15090348
> 
> 赞同：1
> 
> 时间：2013-02-26T13:29:55.757
> 
> 标签：javascript, jquery, css, google-maps, responsive-design

甚至不确定以下是否可能，到目前为止还没有在网上找到任何可以确认的方法

我正在使用它来显示我的地图

```
<iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0"     marginwidth="0" src="https://maps.google.co.uk/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=NP19+7GA&amp;aq=&amp;sll=52.405331,-4.159948&amp;sspn=5.732167,16.907959&amp;ie=UTF8&amp;hq=&amp;hnear=NP19+7GA,+United+Kingdom&amp;ll=51.595904,-2.979781&amp;spn=0.011397,0.033023&amp;t=m&amp;z=14&amp;iwloc=near&amp;output=embed"></iframe> 
```

正如您可能知道的那样，它已从谷歌地图网页上删除。到目前为止，它填充了 100% 的屏幕，这很好，但我正在一个响应式网站中实现，并且想知道在更改视口的大小时，生成的标记是否可以保持居中。

目前地图随着视口缩小，但您看不到标记（位置）

编辑

如果我使用谷歌地图 api V3，我可以像这样添加一个事件监听器

```
google.maps.event.addDomListener(window, 'resize', function() {
map.setCenter(homeLatlng);
}); 
```

在 Jquery 中有没有办法创建这个函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:52:20.920

jQuery 是 javascript，GMaps API 也是。只需将上面的代码与您的其他 js 一起放入即可。

您可以重写它以使用 jQuery 事件，但这样做没有任何好处。

# android - 在 Android google maps api v2 for 4.0 中，显示从当前位置到给定 lat long 的路线

> ID：15090351
> 
> 赞同：2
> 
> 时间：2013-02-26T13:30:06.307
> 
> 标签：android, routes, google-maps-android-api-2

[对于 google maps api v2 中的 android，它按照此处http://mobisys.in/blog/2012/12/google-rolls-out-android-maps-api-v2/](http://mobisys.in/blog/2012/12/google-rolls-out-android-maps-api-v2/)的所有步骤显示整个地球，我可以缩放吗在从当前位置到给定纬度和经度的路线中，问题是我需要显示多条路线，如何实现？现在我没有在我的活动中做任何事情，但我认为我必须做一些编码来绘制路线。我怎样才能做到这一点？非常感谢您的回答，如果您知道，请提供任何教程。再次感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T12:17:40.587

最后我通过使用这段代码解决了这个问题..：试试这个类：

```
import java.io.InputStream;
import java.util.ArrayList;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

import com.google.android.gms.maps.model.LatLng;

import android.content.Context;
import android.util.Log;

public class GMapV2Direction {
    public final static String MODE_DRIVING = "driving";
    public final static String MODE_WALKING = "walking";

    public GMapV2Direction() { }

    public Document getDocument(LatLng start, LatLng end, String mode) {
        String url = "http://maps.googleapis.com/maps/api/directions/xml?" 
                + "origin=" + start.latitude + "," + start.longitude  
                + "&destination=" + end.latitude + "," + end.longitude 
                + "&sensor=false&units=metric&mode=driving";

        try {
            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();
            HttpPost httpPost = new HttpPost(url);
            HttpResponse response = httpClient.execute(httpPost, localContext);
            InputStream in = response.getEntity().getContent();
            DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
            Document doc = builder.parse(in);
            return doc;
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    public String getDurationText (Document doc) {
        NodeList nl1 = doc.getElementsByTagName("duration");
        Node node1 = nl1.item(0);
        NodeList nl2 = node1.getChildNodes();
        Node node2 = nl2.item(getNodeIndex(nl2, "text"));
        Log.i("DurationText", node2.getTextContent());
        return node2.getTextContent();
    }

    public int getDurationValue (Document doc) {
        NodeList nl1 = doc.getElementsByTagName("duration");
        Node node1 = nl1.item(0);
        NodeList nl2 = node1.getChildNodes();
        Node node2 = nl2.item(getNodeIndex(nl2, "value"));
        Log.i("DurationValue", node2.getTextContent());
        return Integer.parseInt(node2.getTextContent());
    }

    public String getDistanceText (Document doc) {
        NodeList nl1 = doc.getElementsByTagName("distance");
        Node node1 = nl1.item(0);
        NodeList nl2 = node1.getChildNodes();
        Node node2 = nl2.item(getNodeIndex(nl2, "text"));
        Log.i("DistanceText", node2.getTextContent());
        return node2.getTextContent();
    }

    public int getDistanceValue (Document doc) {
        NodeList nl1 = doc.getElementsByTagName("distance");
        Node node1 = nl1.item(0);
        NodeList nl2 = node1.getChildNodes();
        Node node2 = nl2.item(getNodeIndex(nl2, "value"));
        Log.i("DistanceValue", node2.getTextContent());
        return Integer.parseInt(node2.getTextContent());
    }

    public String getStartAddress (Document doc) {
        NodeList nl1 = doc.getElementsByTagName("start_address");
        Node node1 = nl1.item(0);
        Log.i("StartAddress", node1.getTextContent());
        return node1.getTextContent();
    }

    public String getEndAddress (Document doc) {
        NodeList nl1 = doc.getElementsByTagName("end_address");
        Node node1 = nl1.item(0);
        Log.i("StartAddress", node1.getTextContent());
        return node1.getTextContent();
    }

    public String getCopyRights (Document doc) {
        NodeList nl1 = doc.getElementsByTagName("copyrights");
        Node node1 = nl1.item(0);
        Log.i("CopyRights", node1.getTextContent());
        return node1.getTextContent();
    }

    public ArrayList<LatLng> getDirection (Document doc) {
        NodeList nl1, nl2, nl3;
        ArrayList<LatLng> listGeopoints = new ArrayList<LatLng>();
        nl1 = doc.getElementsByTagName("step");
        if (nl1.getLength() > 0) {
            for (int i = 0; i < nl1.getLength(); i++) {
                Node node1 = nl1.item(i);
                nl2 = node1.getChildNodes();

                Node locationNode = nl2.item(getNodeIndex(nl2, "start_location"));
                nl3 = locationNode.getChildNodes();
                Node latNode = nl3.item(getNodeIndex(nl3, "lat"));
                double lat = Double.parseDouble(latNode.getTextContent());
                Node lngNode = nl3.item(getNodeIndex(nl3, "lng"));
                double lng = Double.parseDouble(lngNode.getTextContent());
                listGeopoints.add(new LatLng(lat, lng));

                locationNode = nl2.item(getNodeIndex(nl2, "polyline"));
                nl3 = locationNode.getChildNodes();
                latNode = nl3.item(getNodeIndex(nl3, "points"));
                ArrayList<LatLng> arr = decodePoly(latNode.getTextContent());
                for(int j = 0 ; j < arr.size() ; j++) {
                    listGeopoints.add(new LatLng(arr.get(j).latitude, arr.get(j).longitude));
                }

                locationNode = nl2.item(getNodeIndex(nl2, "end_location"));
                nl3 = locationNode.getChildNodes();
                latNode = nl3.item(getNodeIndex(nl3, "lat"));
                lat = Double.parseDouble(latNode.getTextContent());
                lngNode = nl3.item(getNodeIndex(nl3, "lng"));
                lng = Double.parseDouble(lngNode.getTextContent());
                listGeopoints.add(new LatLng(lat, lng));
            }
        }

        return listGeopoints;
    }

    private int getNodeIndex(NodeList nl, String nodename) {
        for(int i = 0 ; i < nl.getLength() ; i++) {
            if(nl.item(i).getNodeName().equals(nodename))
                return i;
        }
        return -1;
    }

    private ArrayList<LatLng> decodePoly(String encoded) {
        ArrayList<LatLng> poly = new ArrayList<LatLng>();
        int index = 0, len = encoded.length();
        int lat = 0, lng = 0;
        while (index < len) {
            int b, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;
            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            LatLng position = new LatLng((double) lat / 1E5, (double) lng / 1E5);
            poly.add(position);
        }
        return poly;
    }
} 
```

您可以在此处获取示例代码

```
LatLng fromPosition = new LatLng(13.687140112679154, 100.53525868803263);
LatLng toPosition = new LatLng(13.683660045847258, 100.53900808095932);

GoogleMap mMap = ((SupportMapFragment)getSupportFragmentManager()
        .findFragmentById(R.id.map)).getMap();
GMapV2Direction md = new GMapV2Direction();

Document doc = md.getDocument(fromPosition, toPosition, GMapV2Direction.MODE_DRIVING);
ArrayList<LatLng> directionPoint = md.getDirection(doc);
PolylineOptions rectLine = new PolylineOptions().width(3).color(Color.RED);

for(int i = 0 ; i < directionPoint.size() ; i++) {          
rectLine.add(directionPoint.get(i));
}

mMap.addPolyline(rectLine); 
```

:- [https://docs.google.com/uc?export=download&id=0B0MdROeR0jbvWVVNUV9jbk1OeEE](https://docs.google.com/uc?export=download&id=0B0MdROeR0jbvWVVNUV9jbk1OeEE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:42:03.527

Android maps api V2 具有`Polyline`在地图上绘制路线的类。

```
Polyline line1 = map.addPolyline(new PolylineOptions()
 .add(new LatLng(50.5, 34.1), new LatLng(40.7, -74.0))
 .width(5)
 .color(0xFFFF0000)); 
```

# javascript - 令人困惑的 Javascript 原型行为

> ID：15090356
> 
> 赞同：2
> 
> 时间：2013-02-26T13:30:27.117
> 
> 标签：javascript, oop, prototype

我有以下 Javascript 代码；

```
var Person = function(name, age) {
    this.name = name;
    this.age = age;
    return this;
};

Person.prototype.getAge = function() {
    alert("Age : " + this.age);
}

var p1 = new Person("xyz",10);
p1.getAge(); 
```

这非常有效，我收到警报 Age : 10

现在，如果我如下更新代码（在实例化 Person 对象 p1 后定义 getAge()）；

```
var Person = function(name, age) {
    this.name = name;
    this.age = age;
    return this;
};

var p1 = new Person("xyz",10);

Person.prototype.getAge = function() {
    alert("Age : " + this.age);
}

p1.getAge(); 
```

它仍然将输出返回为“Age：10”

现在我的问题是它如何正确工作，因为 Person.prototype.getAge 是在我们实例化 Person 对象 p1 之后定义的？是因为“原型”的工作方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:32:51.483

是的，这就是原型的工作方式。您也可以使用这种技术来扩展字符串、对象和数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:35:20.663

任何对象原型都可以随时修改。考虑修改基本`Object`原型的库/框架......即使是内置对象（`Date`,`String`等）都将对`Object.prototype`它们是否在页面加载时立即发生进行修改

试试这个：

```
Object.prototype.myTest = function() { console.log('hi'); }
var a = new Date()
a.myTest(); //hi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T13:35:58.153

javascript中的对象有一种链，如果你向他们询问一个属性，他们会返回他们的，如果他们没有它，它会尝试在它的链上找到它，在你的情况下，当p1被问到时对于它的 getAge 属性，它在 Person.prototype 中查找它。

```
var Person = function(name, age) {
    this.name = name;
    this.age = age;
    return this;
};

var p1 = new Person("xyz", 10);
var p2 = new Person("abc", 12);

Person.prototype.getAge = function() {
    alert("Age : " + this.age);
}
p1.getAge = function() {
    alert("I am " + this.age + " years old.");
}

p1.getAge(); // I am 10 years old.
p2.getAge(); // Age : 12 
```

在[这个例子](http://jsfiddle.net/sP6tF/)中，p1 有它自己的 getAge 属性，所以当被询问时，它会返回它。另一方面，p2 并没有这个属性，但可以通过“那个链”访问它并返回其原型的属性。

# php - mysql中的连接

> ID：15090357
> 
> 赞同：-2
> 
> 时间：2013-02-26T13:30:27.760
> 
> 标签：php, mysql, mysqli

我正在尝试制作注册表单。如果我的代码错误或不正确，您可以给我一些提示

它仍然向我展示了这个准备（$sqlinsert）；$user = $_POST['user']; $pass = $_POST['pass']; $email = $_POST['email']; $lname = $_POST['lname']; $fname = $_POST['fname']; $stmt->bind_param($user, $pass, $email, $lname, $fname); $stmt->执行（）；$rowcount = $stmt->affected_rows; if ($rowcount > 0) { echo "Success!"; } else { 回声“错误！”；} //关闭执行 $stmt->close(); ?>

这是我的代码：

```
 <?php
    $mysqli = new mysqli('local','root','','dbtform');
    if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
    $sqlinsert = "INSERT INTO tblform (user, pass, email, lname, fname) 
    VALUES ('sssss',?,?,?,?,?)";
    $stmt = $mysqli->prepare($sqlinsert);

    $user = $_POST['user'];
    $pass = $_POST['pass'];
    $email = $_POST['email'];
    $lname = $_POST['lname'];
    $fname = $_POST['fname'];

    $stmt->bind_param($user, $pass, $email, $lname, $fname);
    $stmt->execute();

    $rowcount = $stmt->affected_rows;

    if ($rowcount > 0)
{
echo "Success!";
}

else
{
echo "Error!";
}

//CLOSE EXECUTE
$stmt->close();

?>

    <head>
        <title>Animated Form Switching with jQuery</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="description" content="Expand, contract, animate forms with jQuery wihtout leaving the page" />
        <meta name="keywords" content="expand, form, css3, jquery, animate, width, height, adapt, unobtrusive javascript"/>
        <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon"/>
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <script src="js/cufon-yui.js" type="text/javascript"></script>
        <script src="js/ChunkFive_400.font.js" type="text/javascript"></script>
        <script type="text/javascript">
            Cufon.replace('h1',{ textShadow: '1px 1px #fff'});
            Cufon.replace('h2',{ textShadow: '1px 1px #fff'});
            Cufon.replace('h3',{ textShadow: '1px 1px #000'});
            Cufon.replace('.back');
        </script>
    </head>
    <body>
        <div class="wrapper">
            <h1>Rythreion</h1>
            <h2>Demo: click the <span>orange links</span> to see the form animating and switching</h2>
            <div class="content">
                <div id="form_wrapper" class="form_wrapper">
                    <form class="register">
                        <h3>Register</h3>
                        <div class="column">
                            <div>
                                <label>First Name:</label>
                                <input type="text" name="fname" />
                                <span class="error">This is an error</span>
                            </div>
                            <div>
                                <label>Last Name:</label>
                                <input type="text" name="lname"/>
                                <span class="error">This is an error</span>
                            </div>

                        </div>
                        <div class="column">
                            <div>
                                <label>Username:</label>
                                <input type="text" name="user"/>
                                <span class="error">This is an error</span>
                            </div>
                            <div>
                                <label>Email:</label>
                                <input type="text"  name="email"/>
                                <span class="error">This is an error</span>
                            </div>
                            <div>
                                <label>Password:</label>
                                <input type="password" name="pass" />
                                <span class="error">This is an error</span>
                            </div>
                        </div>
                        <div class="bottom">
                            <div class="remember">
                                <input type="checkbox" />
                                <span>Send me updates</span>
                            </div>
                            <input type="submit" value="Register" />
                            <a href="index.html" rel="login" class="linkform">You have an account already? Log in here</a>
                            <div class="clear"></div>
                        </div>
                    </form>
                    <form class="login active">
                        <h3>Login</h3>
                        <div>
                            <label>Username:</label>
                            <input type="text" name="user" />
                            <span class="error">This is an error</span>
                        </div>
                        <div>
                            <label>Password: <a href="forgot_password.html" rel="forgot_password" class="forgot linkform">Forgot your password?</a></label>
                            <input type="password" name="pass" />
                            <span class="error">This is an error</span>
                        </div>
                        <div class="bottom">
                            <div class="remember"><input type="checkbox" /><span>Keep me logged in</span></div>
                            <input type="submit" value="Login"></input>
                            <a href="register.html" rel="register" class="linkform">You don't have an account yet? Register here</a>
                            <div class="clear"></div>
                        </div>
                    </form>
                    <form class="forgot_password">
                        <h3>Forgot Password</h3>
                        <div>
                            <label>Email:</label>
                            <input type="text" name="email" />
                            <span class="error">This is an error</span>
                        </div>
                        <div class="bottom">
                            <input type="submit" value="Send reminder"></input>
                            <a href="index.html" rel="login" class="linkform">Suddenly remebered? Log in here</a>
                            <a href="register.html" rel="register" class="linkform">You don't have an account? Register here</a>
                            <div class="clear"></div>
                        </div>
                    </form>
                </div>
                <div class="clear"></div>
            </div>
            <a class="back" href="http://google.com">back to the Codrops tutorial</a>
        </div>

        <!-- The JavaScript -->
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script type="text/javascript">
            $(function() {
                    //the form wrapper (includes all forms)
                var $form_wrapper   = $('#form_wrapper'),
                    //the current form is the one with class active
                    $currentForm    = $form_wrapper.children('form.active'),
                    //the change form links
                    $linkform       = $form_wrapper.find('.linkform');

                //get width and height of each form and store them for later                        
                $form_wrapper.children('form').each(function(i){
                    var $theForm    = $(this);
                    //solve the inline display none problem when using fadeIn fadeOut
                    if(!$theForm.hasClass('active'))
                        $theForm.hide();
                    $theForm.data({
                        width   : $theForm.width(),
                        height  : $theForm.height()
                    });
                });

                //set width and height of wrapper (same of current form)
                setWrapperWidth();

                /*
                clicking a link (change form event) in the form
                makes the current form hide.
                The wrapper animates its width and height to the 
                width and height of the new current form.
                After the animation, the new form is shown
                */
                $linkform.bind('click',function(e){
                    var $link   = $(this);
                    var target  = $link.attr('rel');
                    $currentForm.fadeOut(400,function(){
                        //remove class active from current form
                        $currentForm.removeClass('active');
                        //new current form
                        $currentForm= $form_wrapper.children('form.'+target);
                        //animate the wrapper
                        $form_wrapper.stop()
                                     .animate({
                                        width   : $currentForm.data('width') + 'px',
                                        height  : $currentForm.data('height') + 'px'
                                     },500,function(){
                                        //new form gets class active
                                        $currentForm.addClass('active');
                                        //show the new form
                                        $currentForm.fadeIn(400);
                                     });
                    });
                    e.preventDefault();
                });

                function setWrapperWidth(){
                    $form_wrapper.css({
                        width   : $currentForm.data('width') + 'px',
                        height  : $currentForm.data('height') + 'px'
                    });
                }

                /*
                for the demo we disabled the submit buttons
                if you submit the form, you need to check the 
                which form was submited, and give the class active 
                to the form you want to show
                */
                $form_wrapper.find('input[type="submit"]')
                             .click(function(e){
                                e.preventDefault();
                             });    
            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:31:09.673

> 如果我的代码错误或不正确，您可以给我一些提示

当然。
您的代码既错误又不正确，因为它使用的是 mysqli。
您必须改用 PDO。

只是一个草图给你一个想法：
首先，创建一个连接

```
$dsn  = 'mysql:dbname=test;host=localhost;charset=utf8';
$opt  = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
);
$pdo = new PDO($dsn, $user, $pass, $opt); 
```

然后，运行您的查询

```
$sql = "INSERT INTO tblform (user, pass, email, lname, fname) VALUES (?,?,?,?,?)";
$stmt = $pdo->prepare($sql);
$stmt->execute($_POST); // you may wish to unset non-used fields from POST first
if ($stmt->rowCount())
{
    echo "Success!";
} 
```

# android - Android + FATAL EXCEPTION：Timer-0（使用计时器删除 ImageView）

> ID：15090359
> 
> 赞同：3
> 
> 时间：2013-02-26T13:30:32.793
> 
> 标签：android, timer

在我的 Android 应用程序中，我使用计时器来显示使用 TIMER 的相应 ImageView。我有一个错误

```
02-27 06:39:33.999: E/AndroidRuntime(1325): FATAL EXCEPTION: Timer-0
02-27 06:39:33.999: E/AndroidRuntime(1325):       android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that  created a view hierarchy can touch its views.
02-27 06:39:33.999: E/AndroidRuntime(1325):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4746)
02-27 06:39:33.999: E/AndroidRuntime(1325):     at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:823)
02-27 06:39:33.999: E/AndroidRuntime(1325):     at android.view.View.requestLayout(View.java:15468)
02-27 06:39:33.999: E/AndroidRuntime(1325):     at android.view.View.requestLayout(View.java:15468) 
02-27 06:39:33.999: E/AndroidRuntime(1325):     at android.view.View.requestLayout(View.java:15468)
02-27 06:39:33.999: E/AndroidRuntime(1325):     at android.view.View.requestLayout(View.java:15468)
02-27 06:39:33.999: E/AndroidRuntime(1325):     at android.view.View.requestLayout(View.java:15468)
02-27 06:39:33.999: E/AndroidRuntime(1325):     at android.view.View.setFlags(View.java:8437)
02-27 06:39:33.999: E/AndroidRuntime(1325):     at android.view.View.setVisibility(View.java:5714)
02-27 06:39:33.999: E/AndroidRuntime(1325):     at android.widget.ImageView.setVisibility(ImageView.java:1161)
02-27 06:39:33.999: E/AndroidRuntime(1325):     at com.SAI.timer.MainActivity$1.run(MainActivity.java:51)
02-27 06:39:33.999: E/AndroidRuntime(1325):     at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

代码是：（如何使图像视图在此处消失，）

```
public class MainActivity extends Activity {

MediaPlayer mp;
ImageView firstImageView,secondImageView,thirdImageView,fourthImageView,fullImageView;
Timer t;
TimerTask welcome;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    firstImageView = (ImageView)findViewById(R.id.imageView1);
    secondImageView = (ImageView)findViewById(R.id.imageView2);
    thirdImageView = (ImageView)findViewById(R.id.imageView3);
    fourthImageView = (ImageView)findViewById(R.id.imageView4);
    fullImageView = (ImageView)findViewById(R.id.imageView5);

      firstImageView.setOnClickListener (new ClickListener());
      secondImageView.setOnClickListener(new ClickListener());
      thirdImageView.setOnClickListener (new ClickListener());
      fourthImageView.setOnClickListener(new ClickListener());

      mp = MediaPlayer.create(getApplicationContext(), R.raw.yes);

      t = new Timer();
      welcome = new TimerTask(){

            @Override
            public void run() {
                // TODO Auto-generated method stub
                fullImageView.setVisibility(View.GONE);

            }
        };

}

class ClickListener implements OnClickListener {
    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch (v.getId()) {
        case R.id.imageView1:

            mp.start();

                firstImageView.setVisibility(View.GONE);
                secondImageView.setVisibility(View.GONE);
                thirdImageView.setVisibility(View.GONE);
                fourthImageView.setVisibility(View.GONE);

                fullImageView.setVisibility(View.VISIBLE);
                fullImageView.setImageResource(R.drawable.ic_launcher);

                t.schedule(welcome, 5000);

            break;

        case R.id.imageView2:

            Toast.makeText(getApplicationContext(), "Oh !!! Wrong Yaar", Toast.LENGTH_SHORT).show();

            break; 
```

在这里，我想在媒体播放（5 秒）停止后使“fullImageView”消失（View.GONE）。并返回上一个显示剩余 Imageviews 的活动，如上面的代码：-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:05:01.870

在 5000 毫秒后使用这个处理程序做任何事情

```
try {
                    new Handler().postDelayed(new Runnable() {
                          @Override
                          public void run() {
                     //Your process to do

                          }
                      }, 5000);
                } catch (Exception e) {
                    e.printStackTrace();
                } 
```

# vim - 在vim中，对virtualenv中的定义进行模糊搜索并创建import语句

> ID：15090360
> 
> 赞同：1
> 
> 时间：2013-02-26T13:30:36.947
> 
> 标签：vim, virtualenv, exuberant-ctags

所以我正在寻找一个 vim 插件，它将执行以下操作：

在执行时，打开当前使用的 virtualenv 中所有模块中定义的所有名称的列表，可能来自已经用 ctags 创建的标签文件。

让用户通过 FuzzyFinder 样式的控件限制列表，此外它应该匹配文件路径和定义。

因此，如果搜索字符串`User`返回一组结果

```
User         django/contrib/auth/models.py
UserAdmin    django/contrib/auth/admin.py 
```

搜索字符串`User;models`会将其限制在第一行

当找到所需的定义时，将 name 插入当前缓冲区，并将相应的 import 语句添加到文件的顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:45:46.193

使用内置`taglist()`功能，您可以访问标签数据库（因此您不需要自己解析文件），并且 FuzzyFinder 允许通过`fuf#callbackitem#launch()`;重用其漂亮的向下钻取逻辑。我自己用它来进行自定义搜索。您可能可以将这两个部分与一些`map()`. 插入所选项目及其导入也只是几个`:normal`或`append()`调用。瞧！

# php - 从数据库中提取 MIN 和 MAX 价格

> ID：15090363
> 
> 赞同：0
> 
> 时间：2013-02-26T13:30:42.123
> 
> 标签：php, mysql

我需要从 table1、table2、table3 中选择所有 (*) 行。但我需要在这个 INNER JOIN 中从表 2 中选择 MIN 和 MAX 价格。我已经阅读了如何执行此操作，但是如何在 INNER JOIN 中执行此操作，以及如何在 PHP 变量中显示它。

**最初的问题：**拉取最小值和最大值后如何显示它们..（例如`$Result['MinPrice']`，`$Result['MaxPrice']`）。

这是我的查询：

```
$Query = mysql_query("
   SELECT      *
   FROM        table1
   INNER JOIN  table2 ON table1.UserID = table2.UserID
   INNER JOIN  tables3 ON table2.DeviceID = table3.DeviceID
   WHERE       table2.DeviceID = '$GetDeviceID'
"); 
```

这是表结构：

**表 1 = 用户信息**

```
UserID   UserFirstName     UserLastName    UserDisplayName
1        John              Doe             John D. 
```

**表 2 = 列表**

```
ListingID  UserID   DeviceID
11         1        2 
```

**表 3 = 设备**

```
DeviceID
2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:36:54.203

如果您真的想以这种方式执行您的要求，您可以使用下面显示的查询。但是，如果您在查询时返回了多行，这确实会返回很多重复的行。试试看它是否有效。

```
$Query = mysql_query("
    SELECT table1.*, table2.*, table3.*,
           MIN(table2.price) as minny, 
           MAX(table2.price) as maxxy
    FROM   table1
    INNER JOIN table2 ON table1.UserID = table2.UserID
    INNER JOIN tables3 ON table1.DeviceID = table3.DeviceID
    WHERE  table1.DeviceID = '$Something'
    GROUP BY table2.ListingAskingPrice
"); 
```

然后通过做得到这个值`$result['minny'] and $result['maxxy']`

# c++ - 标识符 cout 未定义..和其他

> ID：15090375
> 
> 赞同：-1
> 
> 时间：2013-02-26T13:31:12.610
> 
> 标签：c++, cout, getline, unordered-map

我不明白发生了什么事。我编译了几次程序，一切都很顺利。但是自从我插入`#include <unordered_map>`后，我收到了诸如“cout 上未声明的标识符...没有 getline 的重载函数实例”之类的错误。我正在使用 Visual Studio 10。另外，如果有人能告诉我如何正确初始化`unordered_map`，那就太好了。

```
#include "stdafx.h"
#include<string>
#include <iostream>
#include <sstream>
#include <unordered_map>

using namespace std;

unordered_map<string, dictionary * > Mymap;

int _tmain(int argc, _TCHAR* argv[])
{
    string option;
    string pass;
    int choice=0;

    unsigned char hash[20];
    char hex_str[41];

    while(choice!=4)
    {
        cout<< "Select an option:"<< endl;
        cout<<"1\. Basic Hashing"<<endl;
        cout<<"2\. Load Dictionary"<<endl;
        cout<<"3\. Decrypt"<<endl;
        cout<<"4\. Exit" <<endl;

        getline(cin,option);
        stringstream(option) >> choice;

        if(choice == 1)
        {
            cout<<"Please enter a sample password"<<endl;
            getline(cin,pass);
            const char * c= pass.c_str();
            sha1::calc(c,pass.length(), hash);
            sha1::toHexString(hash,hex_str);
            cout<<endl;
            cout<<"Hashed: "<< hex_str<<endl;
        }
        else if(choice ==2)
        {
            string answer;
            cout<<"Would you like to use the default dictionary file(d8.txt). Press y or n"<<endl;
            getline(cin,answer);
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:19:06.977

请参阅这篇关于以及为什么不使用它[的帖子。](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)`using namespace std`下面的代码仍然无法编译，但只有关于`sha1`您可能在某处丢失的定义的错误。（我在上面添加了 struct def`Mymap`只是为了减少错误）。

关于错误，通常 C++ 编译器会在遇到第一个错误时为您提供有意义的错误描述，但此后，事情可能会变得奇怪，因此您一次修复一个错误以开始弄清楚。

```
#include "stdafx.h"
#include <string>
#include <iostream>
#include <sstream>
#include <unordered_map>

typedef struct dictionary{ std::string word; char * hash; char *hex; } a_dictionary;
std::unordered_map<std::string, a_dictionary * > Mymap;

int _tmain(int argc, _TCHAR* argv[])
{
    std::string option;
    std::string pass;
    int choice=0;

    unsigned char hash[20];
    char hex_str[41];

    while(choice!=4)
    {
        std::cout<< "Select an option:"<< std::endl;
        std::cout<<"1\. Basic Hashing"<<std::endl;
        std::cout<<"2\. Load Dictionary"<<std::endl;
        std::cout<<"3\. Decrypt"<<std::endl;
        std::cout<<"4\. Exit" <<std::endl;

        getline(std::cin,option);
        std::stringstream(option) >> choice;

        if(choice == 1)
        {
            std::cout<<"Please enter a sample password"<<std::endl;
            getline(std::cin,pass);
            const char * c= pass.c_str();
            sha1::calc(c,pass.length(), hash);
            sha1::toHexstd::string(hash,hex_str);
            std::cout<<std::endl;
            std::cout<<"Hashed: "<< hex_str<<std::endl;
        }
        else if(choice ==2)
        {
            std::string answer;
            std::cout<<"Would you like to use the default dictionary file(d8.txt). Press y or n"<<std::endl;
            getline(std::cin,answer);
        }
    }
    return 0;
} 
```

# c# - ExecuteNonQuery 导致参数映射错误

> ID：15090378
> 
> 赞同：2
> 
> 时间：2013-02-26T13:31:42.077
> 
> 标签：c#, ado.net

您好我正在尝试使用 ADO.NET 将数据插入数据库。这是我的代码。这是我的 C# 代码：

```
 public void CreateBook(FormCollection collection)
        {
            string name = collection["BookName"];
            string author = collection["Author"];
            string description = collection["Description"];
            int category = int.Parse(collection["category"]);
            DateTime currentDate = new DateTime();

            using (SqlConnection connection = new SqlConnection(connectionString)) {
                connection.Open();
                SqlCommand command = new SqlCommand("AddBook", connection);
                command.CommandType = CommandType.StoredProcedure;
                command.Parameters.Add(createParameter(name, "@Name"));
                command.Parameters.Add(createParameter(author, "@Author"));
                command.Parameters.Add(createParameter(description, "@Description"));
                command.Parameters.Add(createParameter(currentDate.Date, "@Date"));
                command.Parameters.Add(createParameter(category, "@CategoryId"));
                command.ExecuteNonQuery();
            }
        }
        //there are 2 other overloads of this method
        private SqlParameter createParameter(string parameter , string parameterName) {
            SqlParameter param = new SqlParameter();
            param.ParameterName = parameterName;
            param.Value = param;
            return param;
        } 
```

这是我的 SQL 代码：

```
 CREATE PROCEDURE [dbo].[AddBook]
    @Name nvarchar(MAX),
    @Author nvarchar(MAX),
    @Description nvarchar(MAX),
    @Date date  ,
    @CategoryId int
 AS
    INSERT INTO Books (Name , Author , Description , PublicationDate , CategoryId)
    VALUES (@Name , @Author , @Description , @Date , @CategoryId) 
```

当 ExecuteNonQueryuery 被解雇时，我收到此错误：

```
No mapping exists from object type System.Data.SqlClient.SqlParameter to a known managed provider native type. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T13:34:35.700

我怀疑这条线是最直接的问题：

```
param.Value = param; 
```

你的意思是：

```
param.Value = parameter; 
```

否则你试图将参数*值*设置为参数本身，这是没有意义的。

但是，我个人建议也指定类型等。您可以摆脱其他方法，只需使用如下调用：

```
command.Parameters.Add("@Name", SqlDbType.NVarChar).Value = name;
command.Parameters.Add("@Date", SqlDbType.DateTime).Value = currentDate.Date;
// etc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:35:41.410

您正在将实际参数分配给参数 - param.Value = param;

# valgrind - 用于 ppc 的 valgrind 编译说无法执行二进制文件

> ID：15090385
> 
> 赞同：0
> 
> 时间：2013-02-26T13:32:20.113
> 
> 标签：valgrind

试图在我的应用程序上运行 valgrind。我已将 valgrind 可执行文件（基于 ppc 编译器）复制到基于英特尔编译器（i686）的机器中。我被困在这之后。我试过用谷歌搜索，但没有遇到任何标准文档。有人可以帮忙吗？只是朝着正确的方向轻推......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:09:17.140

是的，我在 PPC 机器上运行的一个进程崩溃了。想要检查该过程中的内存泄漏。但可用的 valgrind 适用于 x86 机器。

# .net - System.Xml.dll 和 Delphi 6

> ID：15090387
> 
> 赞同：0
> 
> 时间：2013-02-26T13:32:24.987
> 
> 标签：.net, xml, delphi

我花了两天时间在网上搜索有关如何在我的 Delphi 6 上注册 System.XML.dll 的任何提示。

有人可以引导我最终在我的 Delphi 上导入这个吗？我想使用 SignedXML。

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:00:02.483

System.XML.dll 是一个 .net 库。因此，您不能轻易地从像 Delphi 这样的本机开发工具中使用它。您可以将其包装在 COM 对象中。或者您可以使用 .net API 来启动 .net 运行时。或者，您可以使用 Robert Giesecke 的 Unmanaged Exports 使 .net 库可以从您的本机代码中使用。

但是，所有这些选项都相当复杂。找到满足您需求的本地库可能会更好。

# javascript - Node.js 函数、对象和变量

> ID：15090388
> 
> 赞同：2
> 
> 时间：2013-02-26T13:32:27.147
> 
> 标签：javascript, node.js, function, socket.io, anonymous-function

我刚刚开始使用 javascript，但我仍在努力了解它是如何工作的。

你能解释一下为什么会这样吗

```
serialPort.on("open", function () {
    console.log('open');
    serialPort.on('data', function(data) {
        console.log('data received: ' + data);
        //socket.emit('test', { arduinotest: 'Arduino Connected'});
    });  
}); 
```

这不是，我得到一个“数据未定义错误”

```
serialPort.on("open", function () {
    console.log('open');
    serialPort.on('data', received(data));  
});

function received(data) {
    console.log('data received: ' + data);
    //socket.emit('test', { arduinotest: 'Arduino Connected'});
} 
```

由于我不喜欢有很多嵌套函数，我应该如何分离我的函数？

这是我的整个代码

```
var app = require('express')()
    , server = require('http').createServer(app)
    , io = require('socket.io').listen(server)
    , SerialPort  = require('serialport').SerialPort;

//SERIAL
var portName = '/dev/ttyACM0';
var serialPort = new SerialPort(portName, {
    baudRate: 115200,
    dataBits: 8,
    stopBits: 1,
    parity: 'none',   
});

serialPort.on("open", function () {
    console.log('open');
    serialPort.on('data', function(data) {
        console.log('data received: ' + data);
        //socket.emit('test', { arduinotest: 'Arduino Connected'});
    });  
});

//SERVER
app.get('/', function (req, res){
    res.sendfile(__dirname + '/index.html');
});

io.sockets.on('connection', function (socket){
    socket.emit('test', { servertest: 'Server Connected' });
    socket.on('value', function (data){
        switch(data.key)
        {
        case "Right":
            if(data.state == "True")
            {
                serialPort.write("d180\n");
                console.log("test RT");
            }
            else if(data.state == "False")
            {
                serialPort.write("d90\n");
                console.log("test RF");
            }      
            break;
        case "Left":
            if(data.state == "True")
            {
                serialPort.write("d0\n");
                console.log("test LT");
            }
            else if(data.state == "False")
            {
                serialPort.write("d90\n");
                console.log("test LF");
            }      
            break;
        case "Up":
            if(data.state == "True")
            {
                serialPort.write("s0\n");
                console.log("test UT");
            }
            else if(data.state == "False")
            {
                serialPort.write("s90\n");
                console.log("test UF");
            }      
            break;
        case "Down":
            if(data.state == "True")
            {
                serialPort.write("s180\n");
                console.log("test DT");
            }
            else if(data.state == "False")
            {
                serialPort.write("s90\n");
                console.log("test DF");
            }      
            break;
        }
    });
});

server.listen(9081, '192.168.1.158'); 
```

我应该如何从我的串行端口代码（注释掉的行）中访问我的套接字对象？

感谢您帮助我理解

乔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:36:48.093

在您编写的第二个示例中`serialPort.on('data', received(data));`，它将`received`立即调用该函数，并将结果传递给`on`侦听器的第二个参数。

相反，您只需要`serialPort.on('data', received);`传递`received`函数本身，这意味着侦听器可以在准备好时调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:27:33.273

扩展[格雷厄姆的](https://stackoverflow.com/questions/15090388/node-js-functions-objects-and-variables/15090506#15090506)好答案。只需创建一个返回函数的函数，就可以发送一个“带参数”的回调。方法如下：

```
serialPort.on('data', received(data));

received = function(data){
  return function(){
    console.log(data);
  }
} 
```

对于您的其他问题：

**由于我不喜欢有很多嵌套函数，我应该如何分离我的函数？** 编写节点应用程序时有很多回调是正常的，这就是它的设计方式。只需将您的逻辑分成主要操作即可。例如，假设您想在数据库中保存一些内容：

```
function createBobAndSave(){
  var bob - new Bob();
  bob.save(function(err,savedBob){
    console.log(savedBob.id)
  });
} 
```

**我应该如何从我的串行端口代码（注释掉的行）中访问我的套接字对象？** 你不要因为套接字不在客户端的套接字范围内。您仍然可以使用 sockets 对象向所有 socket.io 客户端发送数据。

# excel - 断开的上下文 Excel Com 对象

> ID：15090389
> 
> 赞同：0
> 
> 时间：2013-02-26T13:32:31.907
> 
> 标签：excel, comobject, disconnected

我有一个多线程应用程序。应用程序的属性之一是报告。

用户可以每天获取一年的数据

我获取数据库，将结果放到列表中。然后使用 Excel（作为 com 对象）。

打开 Excel 并开始从列表中添加单元格值。

当这些过程突然发生时，我收到以下消息：

![错误](../Images/3e37ae4596c8337fe25ee17dd3c7ec89.png)

这是我的excel报告代码：

```
private void RNReportDensityStatistics(List<object[]> _PlateBasedDensityStaticticsList)
        {
            try
            {
                RNTakeReportButton.Enabled = false;
                RNExcelApp = new RNExcel.Application();
                RNExcelApp.Visible = false;
                RNWorkBook = RNExcelApp.Workbooks.Add();
                RNWorkSheet = (RNExcel.Worksheet)RNExcelApp.ActiveSheet;
                RNExcelApp.DisplayAlerts = false;

                RNProgressBar.Visible = true;
                RNProgressBar.Minimum = 0;
                RNProgressBar.Maximum = _PlateBasedDensityStaticticsList.Count;
                RNProgressBar.Value = 0;
                RNProgressBar.Step = 1;

                RNExcelApp.Range["A2"].Value = GetGUIItemString(GUIItemIndex.RNReportDensityStatisticsAutoParkPlate);
                RNExcelApp.Range["B2"].Value = GetGUIItemString(GUIItemIndex.RNReportDensityStatisticsAutoParkEntryTime);
                RNExcelApp.Range["C2"].Value = GetGUIItemString(GUIItemIndex.RNReportDensityStatisticsAutoParkExitTime);
                RNExcelApp.Range["D2"].Value = GetGUIItemString(GUIItemIndex.RNReportDensityStatisticsAutoParkCameraIP);
                RNExcelApp.Range["E2"].Value = GetGUIItemString(GUIItemIndex.RNReportDensityStatisticsAutoParkSpaceNo);

                RNWorkSheet.Columns[1].AutoFit();
                RNWorkSheet.Columns[2].AutoFit();
                RNWorkSheet.Columns[3].AutoFit();
                RNWorkSheet.Columns[4].AutoFit();
                RNWorkSheet.Columns[5].AutoFit();

                var row = 2;
                foreach (var DensityStatistics in _PlateBasedDensityStaticticsList)
                {
                    row++;
                    RNWorkSheet.Cells[row, "A"] = DensityStatistics[4];
                    RNWorkSheet.Cells[row, "B"] = ConvertEpochToDateTime(Convert.ToUInt64(DensityStatistics[2]));
                    RNWorkSheet.Cells[row, "C"] = ConvertEpochToDateTime(Convert.ToUInt64(DensityStatistics[3]));
                    RNWorkSheet.Cells[row, "D"] = DensityStatistics[0];
                    RNWorkSheet.Cells[row, "E"] = DensityStatistics[1];                    
                    RNProgressBar.PerformStep();
                }

                RNWorkSheet.Columns[1].AutoFit();
                RNWorkSheet.Columns[2].AutoFit();
                RNWorkSheet.Columns[3].AutoFit();
                RNWorkSheet.Columns[4].AutoFit();
                RNWorkSheet.Columns[5].AutoFit();

                string RNExcelReportPath = RNExcelReportPathStartingAdress
                    + GetGUIItemString(GUIItemIndex.RNReportPathNameAsPlate)
                    + RNPlateSearchTextBox.Text + " "
                    + GetGUIItemString(GUIItemIndex.RNReportPathNameAsDensity)
                                      + ".xlsx";
                RNWorkBook.SaveAs(RNExcelReportPath, 
                                  misValue,
                                  RNExcelPassword, 
                                  misValue, 
                                  misValue,
                                  misValue, 
                                  RNExcel.XlSaveAsAccessMode.xlExclusive,
                                  misValue, 
                                  misValue, 
                                  misValue, 
                                  misValue, 
                                  misValue);

                RNWorkBook.Close(true, misValue, misValue);
                RNExcelApp.Application.Quit();
                RNExcelApp.Quit();

                RNReleaseObject(RNWorkSheet);
                RNReleaseObject(RNWorkBook);
                RNReleaseObject(RNExcelApp);

                RNTakeReportButton.Enabled = true;
                AddLog(LogIndex.RNReportDensityStatisticsSuc, RNExcelReportPath, string.Empty, string.Empty);

            }
            catch (Exception ex)
            {
                RNReleaseObject(RNWorkSheet);
                RNReleaseObject(RNWorkBook);
                RNReleaseObject(RNExcelApp);
                AddException(ex.ToString());
                RNTakeReportButton.Enabled = true;
                AddLog(LogIndex.RNReportDensityStatisticsFail, string.Empty, string.Empty, string.Empty);
            }
            finally
            {
                RNReleaseObject(RNWorkSheet);
                RNReleaseObject(RNWorkBook);
                RNReleaseObject(RNExcelApp);
                RNTakeReportButton.Enabled = true;

                RNProgressBar.Value = _PlateBasedDensityStaticticsList.Count;
                RNProgressBar.Update();
            }
        }

        private void RNReleaseObject(object obj)
        {
            try
            {
                System.Runtime.InteropServices.Marshal.FinalReleaseComObject(obj);

                if (System.Runtime.InteropServices.Marshal.AreComObjectsAvailableForCleanup())
                {
                    System.Runtime.InteropServices.Marshal.CleanupUnusedObjectsInCurrentContext();
                }

                obj = null;
            }
            catch (Exception ex)
            {
                obj = null;
                AddTrace("Unable to release the Object ");
                AddException(ex.ToString());
            }
            finally
            {
                GC.Collect();
                GC.WaitForPendingFinalizers();
                GC.Collect();
                GC.WaitForPendingFinalizers();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:05:36.507

无需使用 COM 对象进行报告。我通过不使用 com 对象来使用 excel 进行报告来解决我的问题。

有不同的工具用于报告和使用 excel

1.  打开 XML SDK：[http ://www.microsoft.com/en-us/download/details.aspx?id=5124](http://www.microsoft.com/en-us/download/details.aspx?id=5124)

文档[http://msdn.microsoft.com/en-us/library/bb491088(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/bb491088(v=office.14).aspx)

1.  如果 Open XML SDK 语法对您来说很难，那么您可以使用：[http ://spreadsheetlight.com/](http://spreadsheetlight.com/)

文档非常好，文森特 ( [http://spreadsheetlight.com/about/](http://spreadsheetlight.com/about/) ) 对您的问题非常有帮助。

1.  如果您的应用程序不需要某种图表，那么您可以使用：[http ://closedxml.codeplex.com/](http://closedxml.codeplex.com/)

电子表格和封闭 XML 都基于 Open XML SDK，根据我的经验，我没有任何类型的断开连接问题。

如果您需要保护您的 excel 文件，您可以使用：[http](http://dotnetzip.codeplex.com/) ://dotnetzip.codeplex.com/ 您有一个受密码保护的压缩 xlsx 文件。

因此，您无需在计算机中使用 COM 对象、互操作服务和 Excel.Exe。

我希望这些建议对您有所帮助，并感谢所有开发 SpreadSheetLight 和 Closed XML 和 Open XML 的人

# ios - UIView 相对于另一个 UIView 的位置

> ID：15090390
> 
> 赞同：2
> 
> 时间：2013-02-26T13:32:34.230
> 
> 标签：ios, uiview

我正在尝试创建一个自定义手风琴列表。在点击时，它应该扩展被点击的行，下一行应该改变它们相对于扩展行的位置。通过再次点击它应该收缩。通过点击另一条未展开的线，展开的线应该收缩，而被抽出的线应该展开。

我试图通过使用带有 TapGestureRecognizers 的子视图来解决这个问题。我有未定义的行数。在点击时，我会更改点击行的高度并手动重新排列以下行的位置。现在，处理所有扩展/收缩/定位的可能性变得非常混乱。我正在寻找一种更舒适的方式来处理这个问题。有什么方法可以垂直对齐子视图，以便在一个高度发生变化时线条的位置会自动变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:37:08.527

我认为更好的解决方案是使用表格视图，其中单元格将贡献您的自定义视图。定位并且所有内容都将由表格视图本身处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:37:30.197

如果您使用的是 iOS 6，那么这应该很容易受到约束。指定每个视图都位于距其上方视图的底部一定距离的位置，并且当其上方的视图移动或扩展或收缩时，该约束应强制其他所有视图移动以保持您指定的间隙。

编辑：我刚刚意识到您在 OP 中提到您可能不确定提前需要多少视图。这可能使其他人建议的表格视图方法更有利。尽管如此，仍然可以使用约束（我在[这里找到了一个非常详细的教程](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)，涵盖了所有内容）。

# python - 使用 ElementTree 进行 XML 解析会产生错误的输出

> ID：15090391
> 
> 赞同：0
> 
> 时间：2013-02-26T13:32:36.380
> 
> 标签：python, xml, elementtree

我想用 ElementTree 解析一个 XML 文件，但是在某个标签处，输出是错误的

```
<descriptions>
<description descriptionType="Abstract">Some Abstract Text
</description>
</descriptions> 
```

所以我用 XML 函数解析它

```
import xml.etree.ElementTree as ElementTree
root = ElementTree.XML(my_xml)
root.getchildren()[0].items() 
```

结果是：

```
Out: [('descriptionType', 'Abstract')] 
```

XML 是否有任何问题，我以错误的方式使用 ElementTree 或者这是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:38:06.830

只是如果没有标签，它存储在 text 属性中..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:38:18.773

我猜你想得到文本。所以：

```
root.getchildren()[0].text 
```

不是

```
root.getchildren()[0].items() 
```

# r - 如何在 r 中命名尺寸的“上标”？

> ID：15090407
> 
> 赞同：3
> 
> 时间：2013-02-26T13:33:11.840
> 
> 标签：r

也许是一个愚蠢的问题，但我找不到答案。如果我用 vcd 包制作马赛克图，那么：

```
 library(vcd)
 test<-matrix(c(65,31,495,651), ncol=2,byrow=T)
 colnames(test)<-c("2010", "2011")
 rownames(test)<-c("yes", "now")
 mosaic(test, shade=T, legend=T) 
```

它就像一个魅力，除了多年来的标题和输出（是/否）显示为“A”和“B”。

我想命名这些“年”和“输出”，但我找不到这个参数。我怎么能这样做？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T13:46:10.410

您可以通过这种方式指定暗名：

```
dimnames(test) <- list(foo=colnames(test),bar=rownames(test))
mosaic(test, shade=T, legend=T) 
```

![在此处输入图像描述](../Images/da3b631f42e6cd16e48db339d51b3318.png)

事实上，`mosaic`更适合应用于列联表，其中标签由`table`函数确定：

```
color <- sample(c("red","blue"),10,replace=TRUE)
color2 <- sample(c("yellow","green"),10,replace=TRUE)
tab <- table(color,color2)
mosaic(tab, shade=T) 
```

![在此处输入图像描述](../Images/bdd072996888c082c9fe2f9a36acc64e.png)

# macos - 在 OSX 上获取 Vim 以打开浏览器，显示存储库主机上当前文件的 URL

> ID：15090408
> 
> 赞同：1
> 
> 时间：2013-02-26T13:33:13.527
> 
> 标签：macos, vim

我想绑定一个密钥以在我们的在线回购托管中的当前文件上打开浏览器（例如实际上是 codebasehq，但想象它就像 github。）

假设我正在 Vim 中编辑一个文件，名为：

```
/ROOT/repository/subdir/filename 
```

我的当前目录位于“存储库”中，因此我的状态行将文件名显示为：

```
subdir/filename 
```

我在 OSX 上，所以我用来在浏览器中打开它的系统命令行是：

```
open https://<REPOHOST>/projects/<USER>/repositories/<REPOSITORY>/blob/master/<SUBDIR>/<FILENAME>#L<LINE> 
```

在哪里：

*   REPOHOST 和 USER 是固定的，我很乐意对它们进行硬编码。
*   REPOSITORY 是我当前工作目录的父目录的基本名称，即目录'repository'，没有'ROOT' 前缀。
*   SUBDIR 和 FILENAME 是我正在编辑的“子目录/文件名”。
*   LINE 是当前行号

我已经做到了：

```
noremap <leader>o :silent !open URL<cr> 
```

*当我使用所有*HOSTNAME 等的硬编码值替换 URL 时，它会在硬编码文件名上打开浏览器，并突出显示指定的行号。我的问题是如何将我的*实际*存储库和文件名等动态替换为这一行中的 URL。

我对 Python 非常熟悉，因此涉及调用 Vim 的内置 Python API 的解决方案是完全可以接受的。

**编辑**

我快到了，但仍然需要一个 vim 命令，它将我当前目录的基本名称附加到 vimscript 变量 'url' 上。有了这个，来自 romain1 的答案（连同我自己的答案中的改进）将完美地做到这一点。

**结束编辑**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:01:44.087

像这样的东西应该工作：

```
let g:repohost = "whatever"
let g:user     = "whatever"
nnoremap <leader>o :execute "open https://".g:repohost."/projects/".g:user."/repositories/".expand('%:h:h:t')."/blob/master/".expand('%:h:t')."/".expand('%:p:t')."#L".line('.') 
```

***编辑***

为了清晰和可维护性，将 URL 构建包装在一个函数中可能是一个好主意：

```
let g:repohost = "whatever"
let g:user     = "whatever"
function! OpenBrowser()
    let url  = "https://"
    let url .= g:repohost
    let url .= "/projects/"
    let url .= g:user
    let url .= "/repositories/"
    let url .= expand('%:h:h:t')
    let url .= "/blob/master/"
    let url .= expand('%:h:t')
    let url .= "/"
    let url .= expand('%:p:t')
    let url .= "#L"
    let url .= line('.')
    execute "open " . url
endfunction
nnoremap <leader>o :call OpenBrowser()<CR> 
```

从那里，您可以添加各种安全检查，甚至是平台特定的优点。

***结束编辑***

见`:h filename-modifiers`。

您是否尝试[过 Fugitive](https://github.com/tpope/vim-fugitive)的`:Gbrowse`命令？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:54:13.217

回答我自己的问题：

romainl 的回答让我朝着正确的方向前进，但我需要对其进行一些修复：

*   字符串连接运算符是“.=”，而不是“+=”
*   我想要命令“！open”（系统命令）而不是“open”（在 vim 中打开文件）
*   我不需要这么多的“扩展”调用。我已经设法将其中几个折叠成一个“expand('%')”。
*   我需要将“行号”之前使用的“#”字符转义为“\\#”（两个反斜杠）
*   为了获得我的 repo 名称，我假设它与我的 PWD 同名，我假设它是我项目的根。因此，我想要 PWD 的基本名称。为了在不调用太多其他可执行文件（速度较慢）的情况下实现这一点，我使用`system('echo -n ${PWD##*/}')`
*   要获取当前分支名称：从 Bash，可以使用`git symbolic-ref -q --short HEAD`（但你需要一个最新的 git，`--short`是最近的。）我需要从这个输出中删除尾随换行符，所以我使用`echo -n $(git ... HEAD)`. 要从 vim 调用它，我使用 system('echo -n $( ... HEAD)')`

这导致以下结果：

```
function! OpenBrowser()
    let url  = "https://rangespan.codebasehq.com/projects/rangespan/repositories/"
    " assume repo name == basename(pwd)
    " use 'echo -n' to strip trailing \n char from output
    let url .= system('echo -n ${PWD##*/}')

    let url .= "/blob/"

    " branchname
    " use 'echo -n' to strip trailing \n char from output
    let url .= system('echo -n $(git symbolic-ref -q --short HEAD)')

    let url .= "/"

    " filename relative to pwd, which is assumed to be root of repo
    let url .= expand('%')

    " line number
    let url .= "\\#L"
    let url .= line('.')

    execute "!open " . url

endfunction

nnoremap <leader>o :call OpenBrowser()<CR> 
```

现在，在 Vim 中编辑文件时，点击`,`然后`o`在上游 repo 中的当前文件上打开一个浏览器窗口，当前行突出显示。这对于在电子邮件或聊天中发送我的同事链接很有用，因此他们可以查看我当前正在查看的同一来源。耶，等等。

# json - 在 Perl 中解析 JSON Data::Dumper 输出数组

> ID：15090410
> 
> 赞同：0
> 
> 时间：2013-02-26T13:33:19.513
> 
> 标签：json, perl, perl-data-structures

我正在尝试编辑一个旧的 perl 脚本，我是一个完整的初学者。来自服务器的请求返回为：

```
$VAR1 = [
          {
            'keywords' => [
                            'bare knuckle boxing',
                            'support group',
                            'dual identity',
                            'nihilism',
                            'support',
                            'rage and hate',
                            'insomnia',
                            'boxing',
                            'underground fighting'
                          ],
          }
        ]; 
```

如何解析这个 JSON 字符串来抓取：

```
$keywords = "bare knuckle boxing,support group,dual identity,nihilism,support,rage and hate,insomnia,boxing,underground fighting" 
```

完整的 perl 代码

```
#!/usr/bin/perl

use LWP::Simple;                # From CPAN
use JSON qw( decode_json );     # From CPAN
use Data::Dumper;               # Perl core module
use strict;                     # Good practice
use warnings;                   # Good practice
use WWW::TheMovieDB::Search;
use utf8::all;
use Encode;
use JSON::Parse 'json_to_perl';
use JSON::Any;
use JSON;

my $api = new WWW::TheMovieDB::Search('APIKEY');
my $img = $api->type('json');
$img = $api->Movie_imdbLookup('tt0137523');

my $decoded_json = decode_json( encode("utf8", $img) );

print Dumper $decoded_json; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:08:14.007

根据评论和您最近的编辑，我想说您要问的是如何导航包含在变量中的 perl 数据结构`$decoded_json`。

```
my $keywords = join ",", @{ $decoded_json->[0]{'keywords'} }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:37:44.033

```
say qq{ @{ $arrayref->[0]->{'keywords'} } }; 
```

正如 TLP 所指出的，您所展示的只是 perl 数组/哈希的组合。但是，如果您有 JSON 字符串，您应该查看[JSON.pm文档。](http://search.cpan.org/dist/JSON/lib/JSON.pm#from_json)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:02:50.193

您呈现的结果类似于 json，但它是 Perl 变体。（即 => 而不是 : 等）。我认为您不需要查看它的 json 部分，因为您已经获得了数据。您只需使用 Perl 将数据连接到文本字符串中。

只是为了详细说明 vol7ron 的解决方案：

```
#get a reference to the list of keywords
my $keywords_list = $decoded_json->[0]{'keywords'};
#merge this list with commas
my $keywords = join(',', @$keywords_list );
print $keywords; 
```

# c# - 加密数据库用户和密码

> ID：15090416
> 
> 赞同：1
> 
> 时间：2013-02-26T13:33:26.720
> 
> 标签：c#, nlog

Nlog 具有将日志写入数据库的能力。
为此，您需要在 nlog 配置或 Web 配置中提供用户/密码。

有没有办法加密它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:23:27.650

您可能想看看[Encrypting Passwords in a .NET app.config File](http://weblogs.asp.net/jgalloway/archive/2008/04/13/encrypting-passwords-in-a-net-app-config-file.aspx)。

将以下类添加到您的项目中：

```
class Encryption
{
    static byte[] entropy = System.Text.Encoding.Unicode.GetBytes("Add some entropy");

    public static string EncryptString(System.Security.SecureString input)
    {
        byte[] encryptedData = System.Security.Cryptography.ProtectedData.Protect(
            System.Text.Encoding.Unicode.GetBytes(ToInsecureString(input)),
            entropy,
            System.Security.Cryptography.DataProtectionScope.CurrentUser);
        return Convert.ToBase64String(encryptedData);
    }

    public static SecureString DecryptString(string encryptedData)
    {
        try
        {
            byte[] decryptedData = System.Security.Cryptography.ProtectedData.Unprotect(
                Convert.FromBase64String(encryptedData),
                entropy,
                System.Security.Cryptography.DataProtectionScope.CurrentUser);
            return ToSecureString(System.Text.Encoding.Unicode.GetString(decryptedData));
        }
        catch
        {
            return new SecureString();
        }
    }

    public static SecureString ToSecureString(string input)
    {
        SecureString secure = new SecureString();
        foreach (char c in input)
        {
            secure.AppendChar(c);
        }
        secure.MakeReadOnly();
        return secure;
    }

    public static string ToInsecureString(SecureString input)
    {
        string returnValue = string.Empty;
        IntPtr ptr = System.Runtime.InteropServices.Marshal.SecureStringToBSTR(input);
        try
        {
            returnValue = System.Runtime.InteropServices.Marshal.PtrToStringBSTR(ptr);
        }
        finally
        {
            System.Runtime.InteropServices.Marshal.ZeroFreeBSTR(ptr);
        }
        return returnValue;
    }
} 
```

使用以下语法获取加密的密码字符串：

```
var encryptedPassword = Encryption.EncryptString(
    Encryption.ToSecureString("yourPassword")); 
```

在配置文件中，确保将清除密码替换`encryptedPassword`为数据库目标的内容：

```
<target xsi:type="Database"
  name="d1"
  dbUserName="log"
  dbProvider="System.Data.SqlClient"
  dbDatabase="NLog"
  dbPassword="AQAAA... + the rest of the encryptedPassword string"
  dbHost="TheLogServer"
  commandText="INSERT INTO [LOG] VALUES (@p)">
  <parameter layout="${longdate}|${level:uppercase=true}|${logger}|${message}" name="p" />
</target> 
```

创建一个替换`DBPassword`当前类记录器的方法，并返回带有解密密码的记录器：

```
static Logger logger = GetLogger();

private static Logger GetLogger()
{
    var logger = LogManager.GetCurrentClassLogger();
    var d1 = (DatabaseTarget)logger.Factory.Configuration
        .AllTargets.Where(t => t.Name == "d1").FirstOrDefault();
    d1.DBPassword = Encryption.ToInsecureString(
        Encryption.DecryptString(((NLog.Layouts.SimpleLayout)(d1.DBPassword)).Text));
    return logger;
} 
```

使用之前使用过的记录器：

```
static void Main(string[] args)
{
    LogEventInfo myEvent = new LogEventInfo(LogLevel.Debug, "", "My debug message");
    myEvent.LoggerName = logger.Name;
    myEvent.Properties.Add("MyCustomValue", "This is from MyClass");
    logger.Log(myEvent);
} 
```

# android - Android 电子邮件意图问题

> ID：15090417
> 
> 赞同：2
> 
> 时间：2013-02-26T13:33:28.710
> 
> 标签：android

我想从我的 android 应用程序发送电子邮件。如果我使用

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
```

它正在打开Skype，蓝牙以及邮件客户端

如果我使用

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SENDTO); 
```

那么它只是打开邮件客户端，但在文本正文中，`%20%20`当有新行时它正在添加

哪种方法适合仅获取邮件客户端和包含新行和空格的邮件正文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:38:55.763

尝试如下发送：

```
String subject = "mail subject";
String body = "whatever the mail content is. may include html tags too";

Intent intMail = new Intent(Intent.ACTION_SEND);
intMail.setType("message/rfc822");
intMail.putExtra(Intent.EXTRA_SUBJECT, subject);
intMail.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(body));
startActivity(Intent.createChooser(intMail, "Send Email...")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:41:15.107

尝试使用此代码。您可以将主题、正文等保留为可选。它只打开电子邮件客户端并提供正确的输出。

```
final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
        emailIntent.setType("message/rfc822"); 
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, Body);
        startActivity(Intent.createChooser(emailIntent, "Email:")); 
```

# c++ - 如何将 DLL 链接到我的项目？错误 LNK2019：未解析的外部符号

> ID：15090418
> 
> 赞同：12
> 
> 时间：2013-02-26T13:33:34.117
> 
> 标签：c++, windows, function, dll, linker

我有一个文件`foo.h`，其中包含各种函数声明。所有这些功能都在一个文件中实现`foo.dll`。但是，当我包含 .h 文件并尝试使用任何函数时，我收到错误：

```
bar.obj : error LNK2019: unresolved external symbol SomeFunction 
```

所以显然没有找到功能实现。

*我必须做些什么来帮助编译器找到 DLL 中的定义并将它们与 .h 文件相关联？*

我看过一些东西`__declspec(dllexport)`，`__declspec(dllimport)`但我仍然不知道如何使用它们。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-26T14:04:23.557

您应该从 DLL 所有者那里收到至少*三个文件。*您在运行时需要的 DLL，带有导出函数声明的 .h 文件，您已经拥有了。还有一个 .lib 文件，即 DLL 的导入库。链接器需要它，因此它知道如何将函数添加到程序的导入表中。

您错过了告诉链接器它需要链接 .lib 文件的步骤。它需要添加到项目的链接器的 Input + Additional Dependencies 设置中。或者最容易通过在源代码中编写链接器指令来完成：

```
#include "foo.h"
#pragma comment(lib, "foo.lib") 
```

这适用于 MSVC，否则不可移植，但链接永远不会。将 .lib 文件复制到您的项目目录或指定完整路径。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-13T01:07:53.400

我只是有一个类似的问题。解决办法原来是 DLL 是 64 位的，而使用它的简单应用程序是 32。我忘记在配置管理器中将其更改为 x64。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T14:02:06.833

1.  构建dll时需要在函数定义前面指定__declspec(dllexport)关键字
2.  您需要将 .dll 文件导入或加载到进程内存中。
3.  您需要从该 dll 中获取要使用的函数的地址。

一些有用的开始链接:: [MSDN Documentation](http://msdn.microsoft.com/en-us/library/z4zxe9k8%28v=vs.80%29.aspx) , [SO](https://stackoverflow.com/questions/538134/exporting-functions-from-a-dll-with-dllexport) , [Random](http://www.askyb.com/cpp/exporting-c-functions-from-dll/)

# database - 没有排序的 Oracle IN 条件

> ID：15090419
> 
> 赞同：1
> 
> 时间：2013-02-26T13:33:35.497
> 
> 标签：database, oracle

我可以知道是否有任何解决方案可以在不订购 Oracle 的情况下获得结果？这是因为当我按如下方式执行查询时，它似乎会自动帮助我按 ID 字段对其进行排序。

```
SELECT ID FROM USER WHERE ID IN (5004, 5003, 5005, 5002, 5008);

Actual results          Expected results
---5002                 ---5004
---5003                 ---5003
---5004                 ---5005
---5005                 ---5002
---5008                 ---5008 
```

如果你们对此有解决方案，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T13:38:10.850

这是我过去使用过的一种方式`INSTR`：

```
SELECT *
FROM YourTable
WHERE ID IN (5004, 5003, 5005, 5002, 5008)
ORDER BY INSTR ('5004,5003,5005,5002,5008', id) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!4/0c283/1)

我也见过`CASE`这样的用法：

```
ORDER BY
  CASE ID 
    WHEN 5004 THEN 1   
    WHEN 5003 THEN 2   
    WHEN 5005 THEN 3   
    WHEN 5002 THEN 4   
    WHEN 5008 THEN 5
  END 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T13:39:45.533

`SELECT`除非您给出子句，否则语句会以*不可预知*的顺序返回其结果集中的行。`ORDER BY`

某些 DBMS 产品给人一种错觉，即它们的结果集是按可预测的顺序排列的。但如果你依赖它，你一定会失望的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T13:45:00.043

如果您想将订单保留为您的列表，您可以执行以下操作：

```
SQL> create type user_va as varray(1000) of number;
  2  /

Type created.

SQL> with users as (select /*+ cardinality(a, 10) */ rownum r, a.column_value user_id
  2                   from table(user_va(11, 0, 19, 5)) a)
  3  select d.user_id, d.username
  4    from dba_users d
  5         inner join users u
  6                 on u.user_id = d.user_id
  7   order by u.r
  8  /

   USER_ID USERNAME
---------- ------------------------------
        11 OUTLN
         0 SYS
        19 DIP
         5 SYSTEM 
```

即我们将元素放入一个可变数组并在合并集合之前分配一个rownum。然后我们可以通过它`r`来维护我们的列表的顺序。提示只是告诉优化器`cardinality`数组中有多少行（不必死在，只是在球场上..因为没有这个，它将假设 8k 行并且可能更喜欢完全扫描而不是索引方法）

如果您没有权限来创建类型，而这只是一些临时的事情，那么有一些公共的：

```
select owner, type_name, upper_bound max_elements, length max_size, elem_type_name
  from all_Coll_types
 where coll_type = 'VARYING ARRAY' 
and elem_type_name in ('INTEGER', 'NUMBER'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:37:54.377

如果没有 ORDER BY 子句，则无法保证排序顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T16:01:10.380

如果您的问题是关于*为什么会发生排序，*那么答案是：您是否在列 ID 上定义了索引或主键？如果是，则数据库通过索引扫描响应您的查询。也就是说：它不是在表本身中而是在 ID 列上定义的索引中查找 IN 子句中的 ID。在索引中，值是有序的。

要获取有关查询执行的更多信息，请尝试 Oracle 的解释计划功能。

要按特定顺序获取值，您必须添加 ORDER BY 子句。这样做的一种方法是

```
 select ID 
      from USER 
     where ID in (5004, 5003, 5005, 5002, 5008)
     order by
           case ID
             when 5004 then 1
             when 5003 then 2
             ...
           end; 
```

更通用的方法是在表中添加一个 ORDERING 列：

```
 select ID 
      from USER 
     where ID in (5004, 5003, 5005, 5002, 5008)
     order by
           ORDERING; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T02:18:05.727

我在这里找到的另一个解决方案。

```
select ID 
    from USER 
where ID in (5004, 5003, 5005, 5002, 5008)
    order by decode(ID, 5002, 1, 5003, 2, 5004, 3, 5005, 4, 5008, 5); 
```

按解码排序（列名、值、位置）

*注：只需重复 VALUE 和 POSITION

是的，感谢所有回复！我真的很感激。

# android - 向 FingerPaint.java 添加撤消和删除

> ID：15090420
> 
> 赞同：0
> 
> 时间：2013-02-26T13:33:35.910
> 
> 标签：android, android-canvas

我以前在手指画课上工作过，我很舒服，但这次我发现自己在实现撤销和删除这两个功能时遇到了很大的麻烦

这是我的绘图视图

```
public class MyView extends View {      
        private Bitmap  mBitmap;
        private Canvas  mCanvas;
        private Path    mPath;
        private Paint   mBitmapPaint;

        public MyView(Context c) {
            super(c);
            mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);            
            mCanvas = new Canvas(mBitmap);          
            mPath = new Path();
            mBitmapPaint = new Paint(Paint.DITHER_FLAG);            
        }

        @Override
        protected void onSizeChanged(int w, int h, int oldw, int oldh) {
            super.onSizeChanged(w, h, oldw, oldh);
        }
        @Override
        protected void onDraw(Canvas canvas) {
            /*canvas.drawColor(Color.WHITE);         
            canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);*/

            for (int i=0;i<paths.size();i++){
                canvas.drawPath(paths.get(i).path, paths.get(i).paint);
            }

            canvas.drawPath(mPath, mPaint);

        }

        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 4;

        private void touch_start(float x, float y)
        {
            if ( erase == true )
            {
                mPath.reset();
            }
            undonePaths.clear();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;          
        }
        private void touch_move(float x, float y) {
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);           
            if (check == 1 || (selectedId == ERASE_MENU_ID) )
            {
                if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) 
                {
                    mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                    mX = x;
                    mY = y;
                    mCanvas.drawPath(mPath, mPaint);
                }

            }

            if(selectedId == ERASE_MENU_ID)
            {
                mCanvas.drawPath(mPath, mPaint);
                mPath=new Path();
                mX = x;
                mY = y;
                mPath.moveTo(x, y);
            }

        }

        public void onClickUndo () { 
            if (paths.size()>0) 
            { 
                paths.remove(paths.size()-1);
                invalidate();
            }
            else
            {

            }
            //toast the user 
        }
        private void touch_up() {       
            mCanvas.drawPath(mPath, mPaint);    

            MyDataHolder md=new MyDataHolder();
            md.paint=mPaint;
            md.path=mPath;

            paths.add(md);

            mPath=new Path(); 
        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            float x = event.getX();
            float y = event.getY();                      
            switch (event.getAction()) 
            {
            case MotionEvent.ACTION_DOWN :
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE :
                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP :
                touch_up();
                invalidate();
                break;
            }           
            return true;
        }
    } 
```

现在的问题是当我将 mPaint 的模式更改为清除时

```
 erase=true;
    mPaint.setXfermode(null);
    mPaint.setStrokeWidth(25.0f);
    //mPaint.setColor(Color.TRANSPARENT);
    mPaint.setXfermode(new PorterDuffXfermode(Mode.CLEAR)); 
```

每条绘制的路径都会变黑，宽度为 25，有人建议我使用相同的油漆，所以我创建了一个包装类来存储油漆和路径对象，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T08:21:01.620

我可以帮你删除（清除屏幕）。这是非常简单和基本的方法。创建一个布尔变量（比如 mclears）。按下“清除”按钮时将此设置为 true。在 ondraw() 中，使用

```
 if(clears){
 myBitmap.eraseColor(bcolor); 
 //Sets your canvas (bitmap) color to your background color. i.e. clears canvas
  clears=false;
           } 
```

您可能需要稍微更改一下 Touch_up 方法。喜欢

```
 private void touch_up() {       
        mCanvas.drawPath(mPath, mPaint);    
        MyDataHolder md=new MyDataHolder();
        mPath.reset();
        md.paint=mPaint;
        md.path=mPath;
        paths.add(md);
        mPath=new Path(); 
    } 
```

我已经在我的应用程序中实现了这一点。希望对你有效。

# php - Codeigniter - 将 2 个文件附加到已从用户表单上传到网络服务器的电子邮件

> ID：15090421
> 
> 赞同：3
> 
> 时间：2013-02-26T13:33:39.147
> 
> 标签：php, codeigniter

我有一个表格，填写后会上传 2 个文件（一个是 doc、docx 或 pdf，另一个是图像文件）。我的控制器验证表单正常并将文件上传到服务器。我的问题似乎是访问上传的文件数组！？

我在表单中一个名为 $uploaded 的变量中引用了该数组，从错误看来，实际数组似乎被称为“成功”（我认为它从 upload.php 库中获取这个名称）我认为这包含2 个称为 [0] 和 [1] 的元素，每个元素都包含另一个文件属性数组。

我正在兜圈子，基本上试图将这两个文件附加到电子邮件中。我希望有人能帮助一个新手吗？我会将控制器代码放在下面，如果您需要任何其他代码，请告诉我。

**编辑**：我已经更新了下面的代码我现在已经取得了一点成功（不多）： for 循环现在附加了 1 个文件，但是两次。所以要么我的代码没有正确索引数组，要么数组没有存储两个文件信息？

```
<?php
class Form extends CI_Controller {

    function index()
    {
        $this->load->helper(array('form', 'url'));

        $this->load->library('form_validation');

        $this->form_validation->set_rules('first_name', 'First Name', 'required|alpha');
        $this->form_validation->set_rules('last_name', 'Surname', 'required|alpha');
        $this->form_validation->set_rules('dob', 'Date of Birth', 'required');
        $this->form_validation->set_rules('nationality', 'Nationality', 'required|alpha');
        $this->form_validation->set_rules('gender', 'Gender', 'required');
        $this->form_validation->set_rules('address_l1', 'Address Line 1', 'required|alpha_dash_space');
        $this->form_validation->set_rules('address_l2', 'Address Line 2', 'alpha');
        $this->form_validation->set_rules('address_city', 'City', 'required|alpha');
        $this->form_validation->set_rules('address_postcode', 'Post Code', 'required|alpha_dash_space');
        $this->form_validation->set_rules('address_country', 'Country', 'required|alpha_dash_space');
        $this->form_validation->set_rules('e_address', 'Email Address', 'required|valid_email');
        $this->form_validation->set_rules('h_tel', 'Home Telephone Number', 'required|numeric');
        $this->form_validation->set_rules('mobile', 'Mobile Number', 'required|numeric');
        $this->form_validation->set_rules('university', 'University', 'required|alpha_dash_space');
        $this->form_validation->set_rules('campus', 'Campus Name', 'required|alpha_dash_space');
        $this->form_validation->set_rules('course', 'Course Title', 'required|alpha_dash_space');
        $this->form_validation->set_rules('end_date', 'Course End Date', 'required');

        if ($this->form_validation->run() == FALSE)
        {
            $this->load->view('home');
        }
        else
        {

            //Display Success page
            $this->load->view('formsuccess');

            //Send Email
            $this->load->library('email');

            //Array helper
            $this->load->helper('array');

            //Upload files to server
            $this->load->library('upload');

            $config['upload_path']   = './attachments'; //if the files does not exist it'll be created
            $config['allowed_types'] = 'gif|jpg|png|doc|docx|txt|pdf';
            $config['max_size']   = '4000'; //size in kilobytes
            $config['encrypt_name']  = TRUE;

            $this->upload->initialize($config);

            $uploaded = $this->upload->up(FALSE); //Pass true if you want to create the index.php files

            $data = $this->upload->data();          

            for ($i = 0; $i <= 1; $i++) {
                // ignore file that have not been uploaded
                //if (empty($_FILES['uploaded'.$i])) continue;

                //get the data of the file
                //$fileName = $data['uploaded'.$i]['name'];
                $filepath = $data['full_path'];
                //add only if the file is an upload
                echo $data['full_path'];
                $this->email->attach($filepath); //$mail->AddAttachment($filePath, $fileName);
            }

            $this->email->from('your@example.com', 'Your Name');
            $this->email->to('t.bryson@shu.ac.uk'); 

            $this->email->subject('Application for Accommodation (Non-SHU)');
            $this->email->message('Testing the email class.');  

            $this->email->send();

            echo $this->email->print_debugger();
        }
    }
    function alpha_dash_space($str_in)
    {
    if (! preg_match("/^([-a-z0-9_ ])+$/i", $str_in)) {
    $this->form_validation->set_message('_alpha_dash_space', 'The %s field may only contain alpha-numeric characters, spaces, underscores, and dashes.');
    return FALSE;
    } else {
    return TRUE;
    }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:25:20.870

在谷歌的帮助下最终成功了：

```
$uploaded = $this->upload->up(FALSE); //Pass true if you want to create the index.php files
        var_dump($uploaded); 
        $data = array('uploaded_data');

        //Attach the 2 files to email
        foreach($_FILES as $key => $value){
            //var_dump($uploaded['success'][$key]['full_path']); //FOR TESTING
            $file = $uploaded['success'][$key]['full_path'];
            $this->email->attach($file);
            //unlink($file);
        } 
```

# java - 通过直接更改 JSF 中的 URL 来限制用户访问页面

> ID：15090423
> 
> 赞同：7
> 
> 时间：2013-02-26T13:33:39.530
> 
> 标签：java, jsf, authorization

我的应用程序中有两种用户——客户和卖家。我`PhaseListener`在 JSF 中使用 a 来防止用户在未登录的情况下访问页面，但是在他们登录后，我不知道如何防止用户更改位置栏中的 URL 并访问他也不允许的页面。例如，阻止客户访问卖家页面。

有谁知道如何防止这种非法访问？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T13:41:11.027

为用户分配一个组/角色，并在您的阶段侦听器中进行检查（从技术上讲，这可能是一个简单的 servlet 过滤器，毕竟，阶段侦听器在幕后，对于简单的目的来说非常笨拙并且不会运行在非 JSF URL 上）。

`/seller/`例如，只允许具有以下角色的用户访问以开头的 URL `SELLER`：

```
if (url.startsWith("/seller/") && user.getRoles().contains(Role.SELLER)) {
    // Allow access.
} else {
    // Block access.
} 
```

请注意，此功能在许多身份验证框架中提供/内置，例如 Java EE 内置容器管理身份验证和第 3 方库 Apache Shiro。然后，您所需要的只是一个简单的`web.xml`配置条目`<security-constraint>`或一些配置文件，例如 Shiro 中的 INI 文件。

### 也可以看看：

*   [受保护的 URL 将 webapge 的未受保护组件泄露给未经身份验证的用户](https://stackoverflow.com/questions/7872265/protected-urls-leaking-unprotected-components-of-the-webapge-to-unauthenticated)
*   [JSF：如何在 JSF 中控制访问和权限？](https://stackoverflow.com/questions/12516349/jsf-how-control-access-and-rights-in-jsf/)
*   [JSF2 + Apache Shiro 教程](http://balusc.blogspot.com/2013/01/apache-shiro-is-it-ready-for-java-ee-6.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:43:54.700

您可以使用一个文件或其他东西，在其中将每个页面映射到一个用户角色。（某些页面可能可以被超过 1 个用户角色访问，例如：

```
<entry key="acl_page_sub/page1">client,seller</entry>
<entry key="acl_page_sub2/page1">client</entry>
<entry key="acl_page_sub2/page2">seller</entry> 
```

并且您定义了某种 LoginController 类，您可以在其中对照该列表检查 currentuserrole 和请求的页面 (url)。如果未授予，则重定向到自定义错误页面或登录页面或其他任何内容。

您将这个 logincontroller 类添加到您的 facesconfig 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T13:41:04.080

用于`Filter`此。创建实现`javax.servlet.Filter`接口的类，并在`doFilter()`方法中检查用户的角色，如果用户没有角色，则将他重定向到某个自定义页面。在`web.xml`添加此过滤器的定义和映射：

```
<filter>
  <filter-name>MyFilter</filter-name>
  <filter-class>mypackage.MyFilter</filter-class>
</filter>

<filter-mapping>
  <filter-name>MyFilter</filter-name>
  <url-pattern>*.xhtml</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:35:46.610

您需要在直接访问时验证那些在您的页面上导致错误的参数。您可以在 jsf2 中的 prerenderview 事件或 jsf1.2 中的后构造方法中执行此操作

# git - 如何在浏览器上获取当前的 git tag/branch/revision？

> ID：15090425
> 
> 赞同：0
> 
> 时间：2013-02-26T13:33:40.437
> 
> 标签：git

我有一个使用 git 的项目。我可以通过 ssh 访问网络服务器，并且可以执行命令：

```
git log --decorate 
```

它将为我提供有关该服务器上当前部署的内容的信息。但如果有人没有这样的访问权限，他们应该总是让我检查。

我正在考虑解决方案，该解决方案将`git log --decorate`在每次`git pull`或当我签出任何标签时生成带有 dump of 或任何其他命令的文件。每个人都可以通过 url 访问`{website}/current-version.html`。

我想我应该使用 git hooks 还是有更简单的解决方案？我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:58:27.833

如果要显示 git log 输出，最好使用 post-receive 挂钩。

如果您想显示一个可能对用户更友好的版本号，那么我建议：-

*   一个`post-receive`钩子，显示当前发布版本的标签名称（假设您标记版本）
*   将 current-version.html 放在你的 git repo 中，这样它就会与`git pull`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:54:11.623

如果你的服务器是 git repo 的克隆并且你正在使用标签，那么**git describe**将使用最新的标签并给出一个偏移量：

```
$ git describe --long
r1.0-2-gca93d0a 
```

在上面，最后一个标签是**r1.0**并且**2**表示我们是经过该标签的两次提交，接下来是**g**（代表“git”）和当前哈希**ca93d0a**。

```
$ git log --oneline
ca93d0a Add info on testing.
949d558 Fixes to get wsdl2java working.
d0a02b1 Initial CXF. 
```

从这里可以看出，标签**r1.0**指向**d0a02b1**提交：

```
$ git show-ref --dereference r1.0 | tail -1
d0a02b1488154b052fed9d568f3823d15567ebb5 refs/tags/r1.0^{} 
```

# javascript - 等待 Spotify 应用 api 搜索完成 [关闭]

> ID：15090426
> 
> 赞同：0
> 
> 时间：2013-02-26T13:33:42.870
> 
> 标签：javascript, spotify

**更新：**新的预览 API 提供了一个简单的解决方案！

好的，我在使用新的 Spotify 预览 api 1.x 时遇到问题。此外，这是一个一般的 javascript/jquery ajax 问题。

我有一个从我的服务器后端获取 json 数组的函数。该数组表示包含音乐曲目（名称、艺术家）的一些推荐。完成后，我想通过 spotify api 搜索这些曲目。

```
 $.when(getCurrentRecommendationList()).done(function(result) {
            console.log(result);
            matchRecommendations(result, showTracksList);
        }); 
```

到目前为止，一切都很好。我的匹配推荐功能如下所示：

```
var matchedTracks = [];
for ( var i = 0; i < result.length; i++) {
    var searchTerm = result[i].song.artist + " " + result[i].song.name;
    var track;

    // Search with SPOTIFY API
    require([ '$api/search#Search' ], function(Search) {
        var search = Search.search(searchTerm);
        search.tracks.snapshot(0, 1).done(function(snapshot) {
        track = snapshot.get(0);
            if (track) {
                var rec = new Recommendation(result[i].id, track);
                matchedTracks.push(rec);
            }
        });
    });
}
return matchedTracks; 
```

不要担心搜索一切正常。问题是搜索需要一些时间，并且在搜索完成之前返回了我的matchedTracks。

我认为 jquery 的 deferred 将是解决方案，但由于我是 javascript 和 jquery 的新手，我无法真正让它们按照我想要的方式工作，主要是因为循环给我带来了麻烦 ^^。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:19:21.347

Javascript 希望是异步的，所以不要从方法返回轨道，使用完成的回调。

```
matchRecommendations(result, showTracksList, function(matchedTracks) {
    console.log("tracks finished", matchedTracks);
});

function matchRecommendations(result, showTracksList, matchedTracksCallback) {
    var matchedTracks = [];
    for ( var i = 0; i < result.length; i++) {
        var searchTerm = result[i].song.artist + " " + result[i].song.name;
        var track;

        // Search with SPOTIFY API
        require([ '$api/search#Search' ], function(Search) {
            var search = Search.search(searchTerm);
            search.tracks.snapshot(0, 1).done(function(snapshot) {
            track = snapshot.get(0);
                if (track) {
                    var rec = new Recommendation(result[i].id, track);
                    matchedTracks.push(rec);
                }
            });

            // Call the callback after all tracks are added
            matchedTracksCallback(matchedTracks);
        });
    }

    // don't return anything here
    // return matchedTracks;
} 
```

我不熟悉 spotify api 知道何时调用回调，虽然......

# jpa - 如何使用 Cassandra 和 Hector Object Mapper 检索持久的 POJO

> ID：15090427
> 
> 赞同：2
> 
> 时间：2013-02-26T13:33:47.500
> 
> 标签：jpa, orm, cassandra, hector, kundera

我正在尝试使用 Hector Object Mapper 将 pojos 映射到 Cassandra 或从 Cassandra 映射。由于我是 JPA 标准的新手，我只是试图将一些基本的 bean 保存到 Cassandra，然后将它们取回。我正在使用 Hector-object-mapper 3.0-04、Hectore-core 1.0-5、Cassandra 服务器 1.2.2。所以我将我的 SimpleBean pojo 保存到 cassandra

```
EntityManagerImpl em = new EntityManagerImpl(keyspace, "it.nosql.tests");

SimpleBean simpleBean = new SimpleBean();
simpleBean.setCassandraId(UUID.randomUUID());
simpleBean.setInteger(1000);
simpleBean.setStr("cassandraCrossing");
em.persist(simpleBean); 
```

然后我检索它指定UUID

```
SimpleBean newSB = em.find(SimpleBean.class, simpleBean.getCassandraId()); 
```

有没有办法在不指定 ID 的情况下检索所有持久保存到 Cassandra 的 SimpleBean 实例？我希望有类似的东西

```
List<SimpleBean> simpleBeanList = em.find(SimpleBean.class).asList(); 
```

谢谢，F。

# jira - 如何将所有问题及其内容（完整内容）导出到 JIRA 中的 excel 中？

> ID：15090429
> 
> 赞同：19
> 
> 时间：2013-02-26T13:33:52.297
> 
> 标签：jira

在这里，我只能下载字段/我只能获取一个特定问题的内容。

JIRA：使用最新版本。

以管理员身份登录。

我搜索了谷歌，但找不到。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-26T13:40:57.900

1.  转到`Issues`并制作一个过滤器，返回您想要的所有问题
2.  在右上角，有一个`Views`菜单项。打开它。
3.  选择`Excel (all fields)`将所有问题导出到 Excel 的选项

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-02T17:47:15.990

@user1747116 您可以使用 Whim 描述的方法，但您无法从问题中获取所有信息。

你有几个选择：

1.  如果您精通 XML，您可以转到 System->Import / Export Section -> Backup，它会按照此[帮助帖子](https://confluence.atlassian.com/display/Cloud/Exporting+issues)中的说明以 XML 格式对您的 JIRA 实例进行完整备份。

2.  您可以使用 Whim 描述的方法，只需转到问题列表并单击“导出功能”，但在此之前也可以使用允许您导出评论的附加组件之一。[本帮助文章](https://confluence.atlassian.com/display/JIRA/How+to+add+comments+to+Excel+export)中特别提到的插件有“ [All Comments](https://marketplace.atlassian.com/plugins/it.skyit.jira.plugins.all-comments-cf) ”、“ [JIRA Utilities](https://marketplace.atlassian.com/plugins/net.customware.jira.utils.customware-jira-utilities) ”和“ [Last Comment](https://marketplace.atlassian.com/plugins/com.capitalcityconsultants.jira.plugins.customfields.ccc-lastcomment) ”。

3.  编写一个以导出到 Excel 的方式格式化的 Crystal Report。我们这样做是为了让那些不熟悉 SQL 的人都可以访问这些信息。我们特别为

4.  您编写一个 SQL 查询并直接访问数据库，然后保存为 CSV。*请注意，在 JIRA 4 到 6 中，模式发生了变化，我们不得不重做几个查询，所以请记住这一点。但这是让您开始使用 JIRA 6 的方法。注意时间日志在 ([worklog] 中，文件附件在 ([fileattachment]) 中，评论在 ([jiraaction]) 中。每一个往往都有多个条目问题，因此您需要进行进一步的连接才能将它们全部放入同一个查询中。如果您在 Crystal Report 中执行此操作然后导出到 excel，这也很有用。*

```
SELECT TOP 1000 _JI.ID
      ,_JI.pkey
      ,_JI.PROJECT
      ,_PRJ.pname
	  ,_JI.REPORTER
      ,_JI.ASSIGNEE
      ,_JI.issuetype
	  ,_IT.pname
      ,_JI.SUMMARY
      ,_JI.DESCRIPTION
      ,_JI.ENVIRONMENT
      ,_JI.PRIORITY
	  ,_PRI.pname
      ,_JI.RESOLUTION
	  ,_RES.pname
      ,_JI.issuestatus
	  ,_IS.Pname
      ,_JI.CREATED
      ,_JI.UPDATED
      ,_JI.DUEDATE
      ,_JI.RESOLUTIONDATE
      ,_JI.VOTES
      ,_JI.WATCHES
      ,_JI.TIMEORIGINALESTIMATE
      ,_JI.TIMEESTIMATE
      ,_JI.TIMESPENT
      ,_JI.WORKFLOW_ID
      ,_JI.SECURITY
      ,_JI.FIXFOR
      ,_JI.COMPONENT
      ,_JI.issuenum
      ,_JI.CREATOR
     FROM jiraissue _JI (NOLOCK)
	 LEFT JOIN PROJECT _PRJ ON _JI.Project = _PRJ.ID
     LEFT JOIN ISSUESTATUS _IS ON _JI.issuestatus = _IS.ID
	 LEFT JOIN ISSUETYPE _IT ON _JI.issuetype = _IT.ID
	 LEFT JOIN PRIORITY _PRI ON _JI.Priority = _PRI.ID
	 LEFT JOIN RESOLUTION _RES ON _JI.Resolution = _RES.ID
```

*注意：你可以去掉多余的字段，但我把它们都留了，这样你就可以看到它们来自哪里。您还可以为单个问题 ID 放置 where 子句，或将输出限制为特定项目。前 1000 个仅显示前 1000 个结果。如果您对它返回所有内容感到满意，请删除它。（我们的数据库中有数万人，所以我把它放在那里）。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-19T10:10:12.373

使用内置导出功能将**所有**详细信息导出到 Excel 是不可能的。Excel 导出不会导出您的评论、附件、更改历史等。正如其他答案提到的那样，JIRA 生成的 Excel 输出实际上是一个 HTML 文件，它在许多情况下都可以使用，但如果您需要精确表示数据。

我们公司构建了一个名为[Better Excel Plugin](https://marketplace.atlassian.com/plugins/com.midori.jira.plugin.betterexcel)的商业插件，它可以从 JIRA 数据生成原生 Excel 导出（XLSX 格式）。

它是内置功能的强大替代品，具有[主要优势](http://www.midori-global.com/products/jira-better-excel-plugin#comparison)和出色的[自定义](http://www.midori-global.com/products/jira-better-excel-plugin/documentation/customization)功能。它真正支持 Excel 分析功能，包括公式、图表、数据透视表和数据透视图。

![在此处输入图像描述](../Images/24318840af887f306c744637331f9a89.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-27T17:31:09.777

这是我的解决方案。

我下载了这样的文件：

*   “问题”>“搜索问题”
*   “导出”按钮 > “Excel（HTML，所有字段）”

下载文件后，Excel（Microsoft Office Professional Plus 2013）没有为我打开下载的 Jira.xls 文件。

我通过执行以下操作解决了这个问题：

*   将“.xls”更改为“.html”
*   在 Chrome 中打开新的“Jira.html”文件
*   突出显示/选择导出的 Jira 问题的表格内容
*   复制并粘贴到新的 Excel 文件中

[![在此处输入图像描述](../Images/fc3a4d3cc3890af1d1bd19ab8fe65778.png)](https://i.stack.imgur.com/u5dPu.png)

* * *

[![在此处输入图像描述](../Images/6870785146f65e6840514303fbe46480.png)](https://i.stack.imgur.com/RtXG2.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-03T05:37:24.067

**Better Excel**插件很棒（我们使用它），但它不能做附件（AFAIK）。另一个附加组件**JExcel Pro**可以。

# java - 如何将带有子文件夹的文件夹上传到亚马逊 s3？

> ID：15090437
> 
> 赞同：7
> 
> 时间：2013-02-26T13:34:14.047
> 
> 标签：java, file-upload, amazon-s3, amazon

我需要在亚马逊 s3 上上传带有子文件夹的文件夹。我尝试用这个片段上传。

```
 for (Path path : directoryWalk("/home/rmuhamedgaliev/tmp/eota7tas0cdlg2ufq5mlke7olf/")){
       if (!path.getParent().toString().equals("eota7tas0cdlg2ufq5mlke7olf")){
        amazonS3Client.putObject("*****", "/plans/eota7tas0cdlg2ufq5mlke7olf/" + path.getParent().toString() + "/" + path.getFileName(), new File(path.toString()));
       } else {
        amazonS3Client.putObject("*******", "/plans/eota7tas0cdlg2ufq5mlke7olf/" + path.getFileName(), new File(path.toString()));
       }
    } 
```

**但是此代码使用("/home/rmuhamedgaliev/tmp/eota7tas0cdlg2ufq5mlke7olf")**创建完整路径文件。如何使用路径上传**（“/plans/eota7tas0cdlg2ufq5mlke7olf/{subfolders and files}”）**

```
 private List<Path> directoryWalk(String path) throws IOException {
        final List<Path> files = new ArrayList<>();
        Files.walkFileTree(Paths.get(path), new SimpleFileVisitor<Path>() {

            @Override
            public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {
                files.add(file);
                return FileVisitResult.CONTINUE;
            }
        });
        return files;
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-26T16:49:11.900

您是否查看过`TransferManager`适用于 Java 的 AWS 开发工具包中的内容？你可以使用这个`uploadDirectory`方法。javadoc 在[这里](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/transfer/TransferManager.html#uploadDirectory%28java.lang.String,%20java.lang.String,%20java.io.File,%20boolean%29)。本质上，您可以执行以下操作：

```
transferManager.uploadDirectory(bucketName, "plans/eota7tas0cdlg2ufq5mlke7olf/", new File("/home/rmuhamedgaliev/tmp/eota7tas0cdlg2ufq5mlke7olf/"), true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:14:31.633

我用自己的方式写。

```
 List<File> files = new LinkedList<File>();
        listFiles(new File("/home/rmuhamedgaliev/tmp/eota7tas0cdlg2ufq5mlke7olf"), files, true);
        for (File f : files) {
            String key = f.getAbsolutePath().substring(new File("/home/rmuhamedgaliev/tmp/eota7tas0cdlg2ufq5mlke7olf").getAbsolutePath().length() + 1)
                .replaceAll("\\\\", "/");
            amazonS3Client.putObject("****", "plans/eota7tas0cdlg2ufq5mlke7olf/" + key, f);
        } 
```

# mysql - 一个 PHP 查询中的 2 个 MySQL SELECT 语句

> ID：15090438
> 
> 赞同：1
> 
> 时间：2013-02-26T13:34:16.020
> 
> 标签：mysql, sql, statements

如何将以下两个 MySQL`SELECT`语句放在一个`PHP`查询中？

```
$SQLquery = "SELECT MAX(ID) AS last_id FROM table";
$SQLquery = "SELECT full_name FROM table"; 
```

谢谢，美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:35:30.317

您无需使用即可获得最新记录`MAX`，

```
SELECT  *
FROM    tableName
ORDER   BY ID DESC
LIMIT   1 
```

但是如果你肯定想使用`MAX`

```
SELECT  *
FROM    tableName
WHERE   ID = (SELECT MAX(ID) FROM tableName) 
```

# jquery - 如何将 div 元素定位在 ACTUAL 屏幕的中心？(jQuery)

> ID：15090439
> 
> 赞同：7
> 
> 时间：2013-02-26T13:34:19.937
> 
> 标签：jquery, html, center

我需要在屏幕中央放置一个 div 元素。我在下面找到了一个简单的代码，但我需要实际屏幕的中心，而不是页面的“总高度/2”！

这是使元素居中而不是实际屏幕居中的 Jquery 代码；

```
jQuery.fn.center = function () {
this.css("position","absolute");
this.css("top", ( $(window).height() - this.height() ) / 2+$(window).scrollTop() + "px");
this.css("left", ( $(window).width() - this.width() ) / 2+$(window).scrollLeft() + "px");
return this;} 
```

正如我所说，我需要计算实际的屏幕尺寸（如 1366*768 或任何用户调整浏览器的大小）并将元素定位在屏幕的中心。所以，如果我向下滚动页面，居中的 div 应该再次位于中心。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T13:57:00.693

如果您可以使用`fixed`定位而不是`absolute`，则可以使用以下内容：

```
jQuery.fn.center = function ()
{
    this.css("position","fixed");
    this.css("top", ($(window).height() / 2) - (this.outerHeight() / 2));
    this.css("left", ($(window).width() / 2) - (this.outerWidth() / 2));
    return this;
}

$('#myDiv').center();
$(window).resize(function(){
   $('#myDiv').center();
}); 
```

演示：http: [//jsfiddle.net/GoranMottram/D4BwA/1/](http://jsfiddle.net/GoranMottram/D4BwA/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:41:35.127

它有效..把它当作潜水`#sample`

将其 css 样式设为

```
#sample{
margin-left:auto;
margin-right:auto;
width:200px;//your wish
} 
```

认为它有效..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:40:44.237

尝试这个：

```
var width=$("#div").css("width");
var half=width/2;
$("#div").css("marginLeft","-"+half+"px"); 
```

使用您的选择器更改#div。

# android - Android Activity 过渡动画

> ID：15090451
> 
> 赞同：10
> 
> 时间：2013-02-26T13:34:44.197
> 
> 标签：android, android-activity, android-animation

我想要实现的是：**只**为现有活动启动一个带有过渡动画的新活动。

我想向上滑动当前活动，新活动将落后于当前活动。

这是上滑动画：**R.layout.slide_up**

```
<set xmlns:android="http://schemas.android.com/apk/res/android">

    <translate
        android:duration="1000"
        android:fromYDelta="0%"
        android:toYDelta="100%" />

</set> 
```

这是我如何应用活动动画过渡：

```
overridePendingTransition ( 0 , R.anim.slide_up ); 
```

我将 0 用于进入活动，因为我不想要新活动的任何动画，并且它不工作（不执行动画）。如果我也使用动画进入活动，它可以工作（两个动画都执行），如下所示：

```
overridePendingTransition ( R.anim.slide_out , R.anim.slide_up ); 
```

其中**R.anim.slide_out**：

```
<set xmlns:android="http://schemas.android.com/apk/res/android">

    <translate
        android:duration="1000"
        android:fromYDelta="100%"
        android:toYDelta="0%" />

</set> 
```

有任何想法吗 ？

我正在使用 Android 4.1.2 和 Android 4.0.4

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-26T13:50:49.350

更改退出动画，使其呈现在进入活动的顶部。

**R.anim.slide_up**

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:zAdjustment="top">

    <translate
        android:duration="1000"
        android:fromYDelta="0%"
        android:toYDelta="100%" />

</set> 
```

然后你可以做你最初做的事情来设置动画。

```
overridePendingTransition ( 0 , R.anim.slide_up ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T14:00:40.517

我有完全相同的过渡，这样的动画对我有用：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_interpolator"
android:fromYDelta="0%" android:toYDelta="100%" android:zAdjustment="top"
android:duration="300" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-12T08:47:46.800

在 startActivity 方法之后调用下面的方法。

```
 overridePendingTransition(0,0); 
```

这将覆盖默认动画并且不执行动画。如果您愿意，还可以提供一些自定义动画

overridePendingTransition(R.anim.animation1,R.anim.animation2);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-07T02:38:50.990

无论您在何处调用意图来启动 Activity，都需要修改该意图。 `ActivityOptions options = ActivityOptions.makeSceneTransitionAnimation(AlbumListActivity.this); startActivity(intent, options.toBundle());`

如果您有任何专用方法`setupTransitions()`可以将接下来的两行代码放在那里，否则您可以将它们放入`onCreate()`

```
getWindow().setEnterTransition(new Slide(Gravity.RIGHT).setDuration(800)); 
```

**Gravity.RIGHT**决定了您想要开始下一个活动的方向。`setDuration()`方法是可选的，为了更平滑的过渡，我使用了它，你不必。

通过使用不同的 Gravity 和 setDuration 属性来探索更多内容。

# java - 如何将零转换为日期

> ID：15090452
> 
> 赞同：-2
> 
> 时间：2013-02-26T13:34:47.840
> 
> 标签：java, date

我从字符串数组中获取单个值。这个单个值有零。我想将此零转换为日期和获取时间...

```
String followupdate2="";
for(int i=1;i<2;i++){
    followupdate2=followupdate1[i];
    System.out.println("--------------"+followupdate2);
}
System.out.println("---------outer-----"+followupdate2);
SimpleDateFormat format1=new SimpleDateFormat("dd-MMM-yy");
Date followupdate3=format1.parse(followupdate2);
long followupdate4=followupdate3.getTime(); 
```

`followupdate2`有`00-000-00`

我想转换`followupdate2`为日期....

我想得到`long followupdate4=followupdate3.getTime();`

错误是：

```
java.text.ParseException: Unparseable date: "00-000-00"
    at java.text.DateFormat.parse(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:47:14.007

您正在为程序提供错误的输入。输出告诉你你给它错误的输入。

**使用 try-catch 块并处理它。**

```
SimpleDateFormat format1=new SimpleDateFormat("dd-MMM-yy");
long followupdate4;
try {
  Date followupdate3=format1.parse(followupdate2);
  followupdate4 = followupdate3.getTime();
} catch (ParseException e) {
  followupdate4 = 0; //Whatever you want here.
} 
```

# java - 将代码转换为 Spring 注解

> ID：15090453
> 
> 赞同：1
> 
> 时间：2013-02-26T13:34:48.293
> 
> 标签：java, spring, annotations

我正在将非 Spring 代码转换为 Spring (v3.2) 代码。我已经阅读了 Spring 文档，但我无法理解下面显示的以下情况。

类 Foo 和 Buz 由 Spring 管理并且是单例。类 Bar 和 MyHyperlinkListener 需要由 Spring 管理并且应该是原型（尽管我不确定如何正确注释这些）。

*   Bar 内部的 Buz 实例当前为空，因为 Bar 不是由 Spring 管理的。如何正确注释这些类以允许这样做？是否需要为 Bar 创建一个 Factory 类，这会是什么样子？

*   Bar 的构造函数从 Foo 类内部传递了一个“this”（又名 JFrame）。我不确定如何修改代码以在 Spring 中处理“this”。我猜这是另一个接受 JFrame 的工厂，但我不确定如何编写代码。

```
 @Named
    public class Foo extends JFrame{
        private Bar bar;

        private void doSomeWork(int x){
             bar = new Bar( new MyHyperlinkListener(this), x);
        }
    }

    public class Bar extends JPanel{
        @Inject
        private Buz buz;

        public Bar(MyHyperlinkListener mhl, int x){
        }
    }

    public class MyHyperlinkListener implements HyperlinkListener{
      private JFrame frame;
      public MyHyperlinkListener(JFrame frame){
        this.frame=frame;
      }
      //...code omitted
    }

    @Named
    public class Buz{
    }

    @Configuration
    public class MyConfiguration{

    }

    public class RunMe{
        public static void main(String[] args){
            AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext();
            context.scan("myPackage");
            context.refresh();
            context.registerShutdownHook();
            Foo foo = context.getBean(Foo.class);
            foo.setVisible(true);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:42:57.717

您可以创建`Bar`类[@Configurable](http://aredko.blogspot.co.uk/2011/02/using-configurable-in-spring-framework.html)，这将允许在创建实例时由 Spring 管理它。

```
@Configurable
public class Bar extends JPanel{
    @Inject
    private Buz buz;

    public Bar(MyHyperlinkListener mhl, int x){
    }
} 
```

或者，您可以使用 bean 工厂来创建`Bar`. 这将产生相同的效果：

```
@Configuration
public class BarFactory
{
  @Bean
  public Bar createBar(MyHyperlinkListener mhl, int x) {
    return new Bar(mhl, x);
  }
} 
```

这两种方法都是有效的，主要区别在于它们如何公开管理。它们还将允许您希望使用的构造函数。

# c# - 如何将属性从一种类型转换为另一种类型？

> ID：15090457
> 
> 赞同：2
> 
> 时间：2013-02-26T13:34:52.850
> 
> 标签：c#, .net, type-conversion

在我的代码中，我使用如下反射获取属性的类型：

```
 foreach(FilterRule rule in filter.Rules)
 {
     PropertyInfo property = typeof(T).GetProperty(rule.Field);
 } 
```

之后，我进行了几次检查以找出它实际上是什么类型以及类型是否是`long?`：

```
 else if (property.PropertyType == typeof(long?))
 {
     long dd = Convert.ChangeType(rule.Field, System.Int64);
 } 
```

我想转换为`System.Int64`类型。或者更具体地说，只是`long`没有可为空的，但似乎我没有得到这个，因为`rule.Field`is`String`并且它说第一个参数应该是 an`object`并且我看到有一些霸主但没有使用我正在尝试的语法。

我该如何进行这种转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:38:03.267

在您使用 时`Convert.ChangeType`，第二个参数应该是`typeof(System.Int64)`（`typeof`运算符返回 的实例`System.Type`）而不是简单的`System.Int64`。

此外，您应该添加显式强制转换`long`（因为`ChangeType`返回一个`Object`）：

```
long dd = (long)Convert.ChangeType(rule.Field, typeof(System.Int64)); 
```

但是，这似乎是使用该[`Convert.ToInt64`方法](http://msdn.microsoft.com/en-us/library/system.convert.toint64.aspx)的完美案例：

```
long dd = Convert.ToInt64(rule.Field); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:38:44.643

使用**[Convert.ToInt64()](http://msdn.microsoft.com/en-us/library/system.convert.toint64.aspx)**方法怎么样？

> 将指定值转换为 64 位有符号整数。

```
long lfield = Convert.ToInt64(rule.Field); 
```

作为

```
var lfield = (long)Convert.ChangeType(rule.Field, typeof(System.Int64)); 
```

由于**[此](http://msdn.microsoft.com/en-us/library/ttf5d382.aspx)**重载`Convert.ChangeType`返回 an `object`，因此您可以将其强制转换为`long`值。

# c - 递增指向数组的指针

> ID：15090461
> 
> 赞同：1
> 
> 时间：2013-02-26T13:35:04.743
> 
> 标签：c, arrays, pointers

我在 HSW 上遇到了这个程序：

```
int *p;
int i;

p = (int *)malloc(sizeof(int[10]));
for (i=0; i<10; i++)
    *(p+i) = 0;
free(p); 
```

我不完全理解循环。假设内存是字节可寻址的，并且每个整数占用 4 个字节的内存，假设我们为`p`从 address `0`to的指针分配 40 个字节的内存`39`。
现在，据我了解，指针`p`最初包含 value `0`，即第一个内存位置的地址。在循环中，将位移添加到指针以访问后续整数。

我无法理解内存地址 uptil`39`是如何以仅 的位移值访问的`0 to 9`。我检查并发现指针以4的倍数递增。这是怎么发生的？我猜这是因为整数类型指针，并且每个指针都应该增加它的数据类型的大小。这是真的？

但是，如果我真的想使用整数指针指向内存位置 2 怎么办。所以，我这样做：`p = 2`。然后，当我尝试取消引用这个指针时，我应该期待一个分段错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:53:04.100

> 现在，据我了解，指针 p 最初包含值 0

不，它包含 10 数组中第一个整数的地址。（假设 malloc 成功。）

> 在循环中，将位移添加到指针以访问后续整数。

嗯，没有。我不确定你的意思，但这不是代码的作用。

> 我检查并发现指针以4的倍数递增。这是怎么发生的？

指针算术，即在指针上使用 + - ++ -- 等运算符，足够聪明，可以知道类型。如果你有一个写 p++ 的 int 指针，那么存储在 p 中的地址将增加`sizeof(int)`字节数。

> 但是，如果我真的想使用整数指针指向内存位置 2 怎么办。所以，我这样做：p = 2。

不，不要那样做，这没有任何意义。它将指针设置为指向内存中的地址 0x00000002。

* * *

代码说明：

`int *p;`是一个指向整数的指针。通过编写`*p = something`，您可以更改p 指向的*内容。*通过写入`p = something`，您可以更改 p 指向的*地址*。

`p = (int *)malloc(sizeof(int[10]));`是一个困惑的程序员写的。输入 malloc 的结果没有任何意义，您可以在此站点上找到有关该主题的大量信息。

写作`sizeof(int[10])`和写作一样`10*sizeof(int)`。

`*(p+i) = 0;`和写作是一样的`p[i] = 0;`

我将按如下方式修复代码：

```
int *p = malloc(sizeof(int[10]));
if(p == NULL) { /* error handling */ }

for (int i=0; i<10; i++)
{
  p[i] = 0;
}

free(p); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:38:50.697

由于您有一个**类型化**的指针，当您对其执行常见操作（加法或减法）时，它会自动调整您的类型的对齐方式。在这里，由于在您的计算机上`sizeof (int)`is `4`，`p + i`将导致 address `p + sizeof (int) * i`，或`p + 4*i`在您的情况下。

而且您似乎误解了该声明`*(p+i) = 0`。该语句等价于`p[i] = 0`。显然，您的`malloc()`电话不会返回 you `0`，除非它未能实际分配您要求的内存。

然后，我假设您的最后一个问题的意思是“如果我将分配的地址恰好移动两个字节，会发生什么？”。

答案取决于您接下来要做什么以及系统的字节序。例如：

```
/*
 * Suppose our pointer p is well declared
 * And points towards a zeroed 40 bytes area.
 * (here, I assume sizeof (int) = 4)
 */

int *p1 = (int *)((char *)p + 2);
*p1 = 0x01020304;
printf("p[0] = %x, p[1] = %x.\n", p[0], p[1]); 
```

将输出

> p[0] = 102，p[1] = 3040000。

在大端系统上，并且

> p[0] = 3040000, p[1] = 102

在小端系统上。

**编辑**：要回答您的评论，如果您尝试取消引用随机分配的指针，可能会发生以下情况：

*   您很幸运：您键入的地址对应于已为您的程序分配的内存区域。因此，它是一个有效的虚拟地址。你不会得到一个段错误，但如果你修改它，它可能会破坏你的程序的行为（它肯定会......）
*   你更幸运：地址无效，你得到了一个很好的段错误，可以防止你的程序完全搞砸。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T13:40:48.840

> 现在，据我了解，指针 p 最初包含值 0

不，如果返回成功，指针`p`将不会保存该值。`0``malloc`

在声明它的时候，指针是未初始化的，很可能是一个垃圾值。一旦将它分配给由 返回的`malloc`指针，指针就会指向分配器认为未占用的动态分配内存区域。

> 我无法理解直到 39 的内存地址是如何以只有 0 到 9 的位移值访问的

实际位移值为`0, 4, 8, 12 ... 36`。因为指针`p`有一个类型，在这种情况下`int *`，这表明在指针算术中应用的偏移量是`sizeof(int)`，在你的情况下`4`。换句话说，位移乘数始终基于指针指向的类型的大小。

> 但是，如果我真的想使用整数指针指向内存位置 2 怎么办。所以，我这样做：p = 2。然后，当我尝试取消引用这个指针时，我应该期待一个分段错误吗？

确切的位置`2`很可能在您的进程的地址空间中不可用，因为该部分要么由操作系统保留，要么以另一种形式受到保护。所以从这个意义上说，是的，你会得到一个分段错误。

然而，在不能被其大小整除的位置访问数据类型的一般问题是打破了对齐要求。许多架构会坚持在 4 字节边界上访问整数，在这种情况下，您的代码将触发未对齐的内存访问，这在技术上是未定义的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T13:39:48.310

它被称为指针算术。将整数添加`n`到类型的指针会按元素`t*`移动指针。`n * sizeof(t)`因此，如果`sizeof(int)`是 4 个字节：

`p + 1 (C) == p + 1 * sizeof(int) == p + 1 * 4 == p + 4`

然后更容易索引您的数组：

`*(p+i)`是数组中的第 i 个整数`p`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-18T07:17:53.510

我不知道“内存位置 2”是指您的示例内存地址`2`，还是指数组中的第二个值。如果您的意思是第二个值，那将是 memory address `1`。要获得指向此位置的指针，您将执行`int *ptr = &p[1];`或等效操作`int *ptr = p + 1;`，然后您可以使用 打印此值`printf("%d\n", *ptr);`。如果您的意思是内存地址`2`（您的示例地址），那将是数组中的第三个值，那么您需要`p[2]`or `p + 2`。请注意，内存地址通常是十六进制的，实际上不会从 0 开始。它会类似于`0x092ef000, 0x092ef004, 0x092ef008, . . .`. 所有其他答案都不理解您正在使用内存地址`0 . . . 39`就像示例地址一样。老实说，我不认为您指的是从地址 0x00000000 开始的物理位置，如果您是，那么其他人所说的都是正确的。

# azure - 在 Web 角色中转换外部配置

> ID：15090464
> 
> 赞同：2
> 
> 时间：2013-02-26T13:35:07.397
> 
> 标签：azure, slowcheetah

slowcheetah 可以在 azure web 角色中转换外部配置文件吗？例如，我在 log4net.config 中有日志信息。但是打包时不会创建转换后的版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:14:59.040

我没有设法让 slowCheetah 在我的 Azure 解决方案中工作。您可以使用的一种替代方法是为每个环境创建完整的配置文件 - 例如：

*   **log4net.debug.config**
*   **log4net.release.config**

并在构建时将这些内容复制到**log4net.config**中，具体取决于所选的构建配置。

这是通过将构建目标添加到您的 csproj 文件来完成的，如下所示：

```
<Target Name="BeforeBuild">
  <Delete Files="$(ProjectDir)log4net.config" />
  <Copy SourceFiles="$(ProjectDir)log4net.$(Configuration).config" 
                     DestinationFiles="$(ProjectDir)log4net.config" />
</Target> 
```

（*您可能必须根据配置文件在解决方案中的位置修改脚本中的路径*）

[您可以在此处](http://msdn.microsoft.com/en-us/library/dd393573.aspx)和[此处](http://pjbelfield.wordpress.com/2007/09/25/pre-build-events-and-the-before-build-target/)找到有关 MSBuild 和操作 .csproj 文件的更多信息

# c++ - 为什么头文件中需要命名空间？

> ID：15090465
> 
> 赞同：0
> 
> 时间：2013-02-26T13:35:08.173
> 
> 标签：c++, interface, namespaces, header-files

我熟悉以下命名空间的使用。

在头文件（例如`people.h`）中，我描述了一个名称空间的接口。例如：

```
namespace people{
   int getAge(str Name);
   void setName(str Name);
} 
```

然后在`people.cpp`我定义空间名称的方法：

```
#include "people.h"
int people::getAge(str Name) {
   something_1;
   something_2;
}

void people::setName(str Name) {
   something_1;
} 
```

但是，在我拥有的头文件中，我看到除了其他名称空间之外`namespace people`还有其他名称空间的接口（例如`namespace dogs`）。并且这些名称空间没有在`people.cpp`文件中定义。

因此，我假设（由于某些奇怪的原因）将接口`namespace dogs`放入 中`people.h`，然后在“dogs.cpp”文件中定义名称空间 dog。所以，换句话说，我假设在两个不同的 cpp 文件中定义了两个不同的名称空间，但它们的接口在一个头文件中描述。但是，这个假设似乎是错误的，因为我发现有很多头文件声明了“命名空间狗”。

所以，我假设`namespace dogs`在 2people.h" 文件中有另一个功能，但我不知道它是什么功能。有人可以帮我吗？

**添加**

我试图理解的代码不是我写的，它工作正常。所以，这应该是有道理的。可能是我不够清楚。所以，我试着举个例子：

在头文件（`people.h`）中，我有：

```
namespace etet
{
    class date;
}

namespace xsystem{
    class estimation_module;
}

namespace people {
   a_lot_of_different_stuff;
} 
```

然后`people.cpp`定义了属于 people 命名空间的所有方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:48:12.900

您混淆了名称空间和类。通常，类定义出现在头文件 ( `.h`) 中，其成员函数的实现出现在相应的实现文件 ( `.cpp`) 中。

命名空间的工作方式与`class`. 如果 a`class`在多个翻译单元中定义，则它必须在所有翻译单元中具有完全相同的标记。你甚至不能对成员重新排序，即使它会产生完全相同的类。使用上面描述的头文件很容易满足这个要求。每个需要类的翻译单元都`foo`包含 的内容，`foo.h`因为它们`#include "foo.h"`在需要时会这样做。当然，它们都包含完全相同的定义，`foo` 因为它们都包含`foo.h`。

但是，这与命名空间非常不同。命名空间可以在相同和不同的翻译单元中多次引入，而不是每次都是相同的标记。这样的事情完全没问题：

```
namespace bar {
  void baz();
  struct x;
}
// some stuff
namespace bar {
  void do_something(x);
} 
```

每次出现都会`namespace bar`向该命名空间引入一些声明。

您通常会在同一个命名空间中定义许多类。这些类的每个标头都会将`namespace whatever { ... }`类定义引入该命名空间。

有时您甚至希望在单个头文件中将事物引入多个命名空间或嵌套命名空间。没有什么可以阻止你这样做。这样做的一种可能情况是，如果您想从另一个命名空间转发声明某些内容。假设您有一个`people.h`这样定义的类：

```
namespace people {
  class person {
    dogs::dog* pet_dog;
  };
} 
```

现在，这`class`需要知道命名空间`dog`中的类型`dogs`。一种方法是这样做`#include "dogs.h"`。然而，由于`pet_dog`它只是一个指针，我们可以使用不完整的类型，所以我们可以`dog`像这样转发声明：

```
namespace dogs {
  class dog;
}

namespace people {
  class person {
    dogs::dog* pet_dog;
  };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:48:47.417

“命名空间接口”是一个误导性概念。命名空间只是在一个姓氏下组合在一起的一堆名字（比如你​​和你的兄弟姐妹）。它没有“*接口*”，因为没有命名空间“*对象*”。

这

```
#include "people.h"
int people::getAge(str Name) {
   something_1;
   something_2;
}

void people::setName(str Name) {
   something_1;
} 
```

完全等同于

```
#include "people.h"
namespace people
{
  int getAge(str Name) {
     something_1;
     something_2;
  }

  void setName(str Name) {
     something_1;
  }
} 
```

可能是这更熟悉，也可能不是。标头声明了 cpp 中不存在的函数这一事实，仅意味着它们可能存在于另一个中。

`namespace name { ..... }`关于声明可以在许多文件中重复的事实，每个文件都包含各种功能是完全正常的，因为`namespace`关键字没有声明对象。它只是分组名称。而且 - 事实上 - 说命名空间是“声明的”是一种常见的语言滥用。声明的是命名空间的名称。

并且在不同地方声明的不同名称可以属于同一个组。这没有什么神秘之处。

您的词典让我觉得您将`namespace`s 与`class`es 和`struct`s混淆了

**添加：**

在您澄清之后，看起来`a_lot_of_different_stuff`包含使用`etet::date`和的声明`xsystem::estimation_module;`

编译器必须知道这些名称（并且只有名称），但标头不能递归地包含它们各自的标头，因为它们很可能已经包含`people.h`。

一个典型的“课程参考”问题，就像[这里](https://stackoverflow.com/questions/6444071/circular-references-in-c-in-different-files)一样，但涉及不同的命名空间。

# php - `password_verify` 调用返回 false 以获得正确的密码

> ID：15090481
> 
> 赞同：2
> 
> 时间：2013-02-26T13:35:39.637
> 
> 标签：php, hash, bcrypt, crypt

我有以下代码片段：

```
// bcrypt hash of 'password'
$hash = '$2y$10$4u0cQ.WEnwHDo.C5Nl1vm.shKA0beQ32wqzphSfzklAq9OcDM2nLu';
if(password_verify('password', $hash)) {
    print_r('woohoo!');
}
else {
    print_r('fubar');
} 
```

在一台服务器上它工作正常（哇哦！），在另一台服务器上它不起作用。[我刚刚把它放在 codepad.org 上](http://codepad.org/2W0d9z7Q)，它也在那里失败了。

问题是（可以在该键盘页面上看到）计算的哈希`crypt`长度为 13 而不是所需的 60。

我在 github 上使用[ircmaxel 的 password_compat 库](https://github.com/ircmaxell/password_compat)`password_verify`来实现仅限 PHP 5.5 的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:10:55.873

您似乎在小于 5.3.7 的 PHP 版本上运行脚本，因此算法“2y”尚不清楚。

如果可能，我会考虑在此服务器上进行 PHP 升级，'2y' 参数解决了 unicode 输入字符串的问题。

如果这不是一个选项，那么您可以替换兼容包中的算法。在第 49 行的某个地方，您会发现...

```
$hash_format = sprintf("$2y$%02d$", $cost); 
```

...将其更改为以前的 BCrypt 常量 '2a'...

```
$hash_format = sprintf("$2a$%02d$", $cost); 
```

...这当然不是最佳的，但它是您在早期版本中可以做到的最好的。

现在将开始一个新生成的密码哈希，`'$2a$10$...'`并且使用此哈希值的验证应该适用于每个系统。

# wolfram-mathematica - Wolfram Mathematica Return[] 奇怪的结果？

> ID：15090483
> 
> 赞同：1
> 
> 时间：2013-02-26T13:35:45.647
> 
> 标签：wolfram-mathematica

我有点困惑，Ret​​urn [] 如何从函数返回结果。例如，采用这两个功能：

```
CalcLossTotal = Function[
   {data, units},

   Clear[i];
   Return[Table[
     data[[i, 1]]*units,
     {i, 1, Length[data]}]
    ];
   ]; 
```

和

```
CalcPremiums = Function[
   {data, lossTotal},

   Clear[i];
   Return[Table[
     data[[i, 2]]*lossTotal[[i]],
     {i, 1, Length[data]}]
    ];
   ]; 
```

其中 CalcPremiums[] 取决于 CalcLossTotal[] 和它们两者相同的数据。在计算 LossTotal（例如来自 CalcLossTotal[] 的结果）时，从它返回的结果不是数据数组，而是

```
Return[{0,1000,2000,3000,4000,5000,6000,7000,8000,9000,10000}] 
```

这是 Mathematica 的工作方式，还是在定义/从函数返回时我错过了一些东西。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:04:03.453

你想要的构造是这样的：

```
CalcPremiums[data_, lossTotal_] := (
  Return[Table[data[[i, 2]]*lossTotal[[i]], {i, 1, Length[data]}]];) 
```

请注意，如果您要返回最终结果，则 return 是多余的，

```
CalcPremiums[data_, lossTotal_] := (
  Table[data[[i, 2]]*lossTotal[[i]], {i, 1, Length[data]}]); 
```

（注意括号内的 Table[] 后面没有分号）这里也不需要括号，但我假设你真的有一个多行函数。

我必须说我有点困惑为什么你的 construt 返回“return []”。考虑一下：

```
g = Function[u, If[u < 0, Return[u], 0]];
f[x_] := (
    y = g[x] ;
    {x, y}) 
```

对于 x<0，纯函数 (g) 的效果是从调用函数 (f) 返回 x，而不是设置 y=x。

```
 f[-1]-> -1   , f[1] -> {1,0} 
```

我看到了逻辑，但这对我来说并不明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:37:53.243

我猜这个问题是[Function](http://reference.wolfram.com/mathematica/ref/Function.html)具有属性的影响`HoldAll`。

如果像这样重写，您的函数将起作用：-

```
CalcLossTotal = Function[
   {data, units},

   Catch[
    Clear[i];
    Throw[Table[
      data[[i, 1]]*units,
      {i, 1, Length[data]}]
     ];
    ]];

CalcPremiums = Function[
   {data, lossTotal},

   Catch[
    Clear[i];
    Throw[Table[
      data[[i, 2]]*lossTotal[[i]],
      {i, 1, Length[data]}]
     ];
    ]]; 
```

# coldfusion - ColdFusion 10 服务器监视器不加载

> ID：15090486
> 
> 赞同：1
> 
> 时间：2013-02-26T13:35:55.063
> 
> 标签：coldfusion, coldfusion-10

我有一个我们刚刚升级到 ColdFusion 10 的服务器。我去查看服务器监视器，我只是得到一个灰色屏幕，没有关于服务器的详细信息：

![在浏览器中查看服务器监视器](../Images/e01f54e7d2c71f55c90ad7d2220b3108.png)

我已经检查以确保 flex2gateway URL 返回一个空白屏幕（所以[这](https://stackoverflow.com/questions/261614/coldfusion-server-monitoring-not-working)不是解决方案）。

当我查看查尔斯的请求时，一切似乎都正确返回（据我所知）。每个 POST 返回一个`200 OK`，看起来我从服务器获得了有效的 AMF 响应：

![查尔斯的活动视图](../Images/6cf005848c716a0e4f4d556e7f17eafc.png)

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:07:29.340

看起来像一个坏掉的 Flash 播放器。Flash 内容是否会加载到其他网站上？

# visual-studio - 从在线图库菜单加载扩展时出错

> ID：15090488
> 
> 赞同：0
> 
> 时间：2013-02-26T13:36:01.197
> 
> 标签：visual-studio, visual-studio-2012, httprequest, firewall, visual-studio-extensions

当我尝试从 VS2012 -> 在线菜单加载`Online`扩展时，我从 visualstudiogallery 服务收到以下错误：`Extensions and Updates`

![在此处输入图像描述](../Images/465474cbdb6fa5df59a2f5609d25c698.png)

可能的原因是什么，我该如何纠正它以从 VS2012 菜单下载扩展？

# jsf - 什么是 ADF 中的上下文事件？

> ID：15090493
> 
> 赞同：0
> 
> 时间：2013-02-26T13:36:14.643
> 
> 标签：jsf, oracle-adf

我正在学习 Oracle 的 ADF，希望对上下文事件有更深入的了解。我熟悉 JSF，而普通 JSF 中没有这种抽象。那么什么是上下文事件，我们作为应用程序开发人员如何利用ADF？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:18:14.590

简单来说，上下文事件是在同一页面上的两个独立任务流之间进行通信的一种方式。由于任务流是独立的，它们不会也不应该知道或依赖于同一页面中的特定其他任务流。上下文事件机制允许他们保持独立性，同时仍然在同一页面中协作和传递事件/数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:37:21.030

## Vanila JSF 有事件（Action 和 ValueChange）和事件监听器、自定义组件和自定义事件监听器。ADF 上下文事件是 Oracle ADF 支持的自定义事件。

谢谢佩迪

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:40:19.740

引用：

> 上下文事件有两个部分：
> 
> -发布者（或生产者），例如引发命名事件的按钮，带有或不带有自定义有效负载
> 
> - 侦听特定命名事件或通配符事件的处理程序（或消费者），以处理该事件
> 
> 上下文事件功能利用 Oracle ADF 绑定层，将事件通知和有效负载传递给有界任务流或父视图中已注册的事件处理程序。有效负载作为参数传递给在处理程序上处理事件的方法。有效负载内容是可定制的。默认情况下，上下文事件的负载是 JavaServer Faces、Oracle ADF Faces 或 Oracle ADF 绑定事件对象。
> 
> 包含区域的视图在其页面定义文件的可执行部分中定义了任务流绑定。绑定分层连接在给定时间为当前浏览器页面初始化的所有绑定容器。事件通知发布到在初始化绑定容器中定义的事件映射。事件首先传递到本地绑定容器，然后发布到父容器和同级容器。
> 
> 事件首先由在其配置中指定事件和生产者名称的事件映射处理。最后通知仅包含事件名称但为生产者名称指定通配符（星号）的事件映射。您可以通过页面定义文件或 adf-config.xml 文件中的配置更改来禁止通配符事件处理。

# java - java中的日期比较出生日期

> ID：15090498
> 
> 赞同：0
> 
> 时间：2013-02-26T13:36:31.703
> 
> 标签：java, date

我有一个`String`格式为`String dob="02/26/2013";`“mm/dd/yyy”格式的日期。它是出生日期，我想检查这个出生日期是否应该小于今天的日期。如何检查？

这是我的代码：

```
 Calendar cal = Calendar.getInstance();
    Date date = cal.getTime();
    SimpleDateFormat format1 = new SimpleDateFormat("MM-dd-yyyy");
    String date1 = format1.format(date);
    System.out.println(date1);
    String date2 = "2013/02/26";
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy/mm/dd");
    Date convertedDate = dateFormat.parse(date2);
    System.out.println(convertedDate); 
```

但`convertedDate`打印为`Sat Jan 26 00:02:00 IST 2013`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:39:36.343

```
 SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");

        Calendar cal = Calendar.getInstance();
        String strDate = sdf.format(cal.getTime());

        Date date1 = sdf.parse("02/26/2013");
        Date date2 = sdf.parse(strDate);

     if(date1.compareTo(date2)>0){
            System.out.println("Date1 is after Date2");
        }else if(date1.compareTo(date2)<0){
            System.out.println("Date1 is before Date2");
        }else if(date1.compareTo(date2)==0){
            System.out.println("Date1 is equal to Date2");
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:43:15.050

```
 String dob="02/27/2013";
    Date today = new Date();

    try {
        Date dobDate = new SimpleDateFormat("MM/dd/yyyy").parse(dob);

        if (dobDate.compareTo(today) <= 0) {
            //before or equals today
            System.out.println("before");
        }
    } catch (ParseException e) {
        //handle exception
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:12:35.003

`new SimpleDateFormat("yyyy/mm/dd");`是错的。`mm`是分钟，这就是为什么您在 1 月 26 日午夜后得到 2 分钟。更改`mm`为`MM`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:40:48.223

您可以查看 Joda 时间，也可以尝试将 String 转换为 Calendar 对象并根据需要使用 before 或 after 方法。有关更多帮助，请阅读[DateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html)和[Calendar](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)类的 Javadoc。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-26T13:42:15.697

你可以试试这个

```
String yourdate = "02/26/2013";
Date toDate = new SimpleDateFormat("MM/dd/yyyy").parse(yourdate);
long toDateAsTimestamp = toDate.getTime();
long currentTimestamp = System.currentTimeMillis();
long getRidOfTime = 1000 * 60 * 60 * 24;
long toDateAsTimestampWithoutTime = toDateAsTimestamp / getRidOfTime;
long currentTimestampWithoutTime = currentTimestamp / getRidOfTime;

if (toDateAsTimestampWithoutTime <= currentTimestampWithoutTime) {
    System.out.println("Display error.");
} else {
    System.out.println("All ok");
} 
```

# ravendb - 为同一个 RavenDB 应用程序创建两个文档存储

> ID：15090502
> 
> 赞同：1
> 
> 时间：2013-02-26T13:36:38.820
> 
> 标签：ravendb

我有两个应用程序需要连接到文件夹中的本地 raven db 实例。第一个应用程序启动良好。当第二个应用程序启动时，由于文件权限，文档存储无法初始化。

如何从需要自己的文档存储的多个应用程序连接到同一个数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:44:35.360

多个实例（无论是同一个应用程序还是不同的应用程序）不能共享同一个数据库。

您可以使用独立的 RavenDB 服务器，也可以确保每个应用程序实例都打开它自己的数据库。

如果您使用的是嵌入式版本，请确保每个实例都有自己的数据目录：

```
var documentStore = new EmbeddableDocumentStore { DataDirectory = "path/to/database/directory" }; 
```

documentStore.Initialize();

[http://ravendb.net/docs/client-api/connecting-to-a-ravenb-datastore](http://ravendb.net/docs/client-api/connecting-to-a-ravendb-datastore)

# vb.net - 合并字符串以查找变量名

> ID：15090503
> 
> 赞同：0
> 
> 时间：2013-02-26T13:36:41.543
> 
> 标签：vb.net, string, visual-studio, variables

假设我有 3 个名为 LBL_1、LBL_2 和 LBL_3 的标签。

然后我有一个函数可以随机选择 1,2 和 3。

如何将该值与标签名称结合起来？

像这样

```
Dim NR As Integer = MyOneToThreeRandomizer()
'Now NR is 1,2 or 3

LBL_ & NR.ToString(or something) & .Text = "Hello world!" 
```

我当然可以做这样的事情；

```
Dim NR As Integer = MyOneToThreeRandomizer()
If NR = 1 Then
    LBL_1.Text = "Hello World!"
Else If NR = 2 Then
    LBL_2.Text.....
....And so on 
```

但在这种情况下，它可能多达 80 个数字，所以感觉真的很糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:38:55.157

将您的标签放在一个数组中，然后通过索引访问它们。

```
Dim myLabelArray As String() = {"label1", "label2", "label3"}

Dim sb As New StringBuilder()

'Some flavour of loop

    Dim NR As Integer = MyOneToThreeRandomizer()

    sb.Append(myLabelArray(NR-1))

'End loop 
```

* * *

如果你有`System.Windows.Forms.Label`*s*，你可以在循环中以编程方式将它们添加到*舞台*，同时你也可以将它们放在你的`labelArray`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:41:16.383

您可以将标签添加到面板并通过子项访问它们。然后你可以通过索引访问它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T13:58:58.287

```
Dim NR As Integer = MyOneToThreeRandomizer()
Dim lbls() As Label = DirectCast(Me.Controls.Find("LBL_" & NR, True), Label())

If lbls.Length > 0 Then
    lbls(0).Text = "Hello world!"
End If 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:42:15.010

```
For Each ctr As Control In Container.Controls
   If ctr.Name = "LBL_" & NR.ToString Then
      CType(ctr, Label).Text = "Hello World"
   End If
Next 
```

# javascript - 如何从asp.net调用客户端函数

> ID：15090505
> 
> 赞同：0
> 
> 时间：2013-02-26T13:36:47.883
> 
> 标签：javascript, asp.net

我得到了 JavaScript 代码：

```
function clearAll() {
    var frm = document.forms[0];
    for (i = 0; i < frm.elements.length; i++) {
        if (frm.elements[i].type == "checkbox") {
            frm.elements[i].checked = false;
        }
        if (frm.elements[i].type == "radio") {
            frm.elements[i].checked = false;
        }
        if (frm.elements[i].type == "text") {
            frm.elements[i].value = "";
        }
        if (frm.elements[i].type == "select-one") {
            frm.elements[i].value = 0;
        }
    }
} 
```

我尝试使用以下方法从服务器端调用此函数：

```
Page.ClientScript.RegisterStartupScript.... 
```

有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:48:18.937

您可以使用以下代码行从服务器端调用此函数。

```
protected void Page_Load(object sender, EventArgs e)
    {
        ScriptManager.RegisterStartupScript(this, typeof(string), "Clear", "clearAll();", true);
    } 
```

在此之前，您必须在页面的表单标签内添加脚本管理器。

javascript代码：

```
<script>
 function clearAll() {
        var frm = document.forms[0];
        for (i = 0; i < frm.elements.length; i++) {
            if (frm.elements[i].type == "checkbox") {
                frm.elements[i].checked = false;
            }
            if (frm.elements[i].type == "radio") {
                frm.elements[i].checked = false;
            }
            if (frm.elements[i].type == "text") {
                frm.elements[i].value = "";
            }
            if (frm.elements[i].type == "select-one") {
                frm.elements[i].value = 0;
            }
        }
    }
</script> 
```

# java - 如何在所有基于 Spring 的应用程序生命周期内存储变量？

> ID：15090511
> 
> 赞同：0
> 
> 时间：2013-02-26T13:37:02.863
> 
> 标签：java, spring

我开发基于 Spring 的 Java Web 服务。我需要在应用程序启动时生成 UUID（应用程序服务器启动上下文）并在应用程序的生命周期内保持不变。一个或多个服务类（使用@Service）应该访问这个变量。只有在重新启动上下文（重新部署应用程序或重新启动应用程序服务器）时才能更改 UUID。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T13:39:30.463

声明一个普通的单例，让它使用`class="java.util.UUID" factory-method="randomUUID"`. 像往常一样从其他bean中引用它。

# sql-server - Mssql：执行名称从另一个 sp 获取的存储过程

> ID：15090515
> 
> 赞同：0
> 
> 时间：2013-02-26T13:37:15.267
> 
> 标签：sql-server, stored-procedures

我对 mssql 中的存储过程 (SP) 有疑问。我所拥有的是一个表，其中一列包含一个 SP 名称，我要做的是获取该 SP 名称并在我的 SP 中执行该 SP。

所以我做了什么：

1.  我有一个 SP - 好的
2.  使用 SP 的名称声明一个变量，该变量将获取表中的 SP 名称和 SP - 好的

.

```
DECLARE @rs varchar(max)
DECLARE @sql varchar(max) = N'usp_GetSP)'
EXECUTE sp_executesql @sql, @rs output
EXECUTE @rs 
```

在这里，我知道当我执行 EXECUTE sp_executesql @sql 时我得到了 SP 名称，但我不确定 @rs。我收到此错误：

> 消息 214，级别 16，状态 2，过程 sp_executesql，第 1 行过程需要类型为“ntext/nchar/nvarchar”的参数“@statement”。消息 2812，级别 16，状态 62，第 4 行找不到存储过程“”。

1.  执行我回来的那个 SP - 这就是问题所在

这是一个包含三个`SELECT`语句的 SP，并且这个 SP 是我需要开始工作`UNION`的第三秒`UNION`（最后一个语句）。`SELECT`

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:42:42.823

*`For Error Message:`*我认为你应该声明`@sql`为 nvarchar 而不是 varchar；

在您的情况下，您分配的 nvarchar 值 (N'usp_GetSP') 将转换为 varchar，因为您已将 @sql 定义为 varchar 类型。

```
DECLARE @rs nvarchar(max)
DECLARE @sql nvarchar(max) = N'usp_GetSP' --not sure why you have ')'
EXECUTE sp_executesql @sql, @rs output
EXECUTE ( @rs ) 
```

另[请查看此链接](http://support.microsoft.com/kb/262499)以了解如何使用`OUTPUT`参数`sp_exeutesql`

# iphone - 退出 iphone 应用程序？

> ID：15090521
> 
> 赞同：-4
> 
> 时间：2013-02-26T13:37:32.940
> 
> 标签：iphone, ios6, exit

我已经在 iPhone 应用程序中创建了退出按钮。现在想要当用户点击退出按钮时。应用程序应该进入后台。请为此提供一些合适的解决方案，以便我可以将我的 iPhone 应用程序上传到应用商店。我使用了退出（ 0). 但是苹果拒绝了我的 iPhone 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:40:11.647

没有任何方法可以让您通过代码使应用程序后台运行，只有用户可以通过按下主页按钮来使您的应用程序后台运行。

你真的应该阅读[`iOS Human Interface Guidelines`](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)特别是关于[`Don’t Quit Programmatically`](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW27)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:40:27.727

iPhone 应用程序不应有“退出”按钮。如果你实施一个，你只是要求拒绝。让用户按下主页按钮来后台应用程序。如果你想在按下主页按钮时终止而不是进入后台状态，你可以`UIApplicationExitsOnSuspend`在`YES`你的`Info.plist`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:40:39.963

您的应用被拒绝是正常的。他们没有给您引用他们的指南吗？特别是这部分：`In particular, people don’t tap an application close button or select Quit from a menu.` 无论如何，您应该阅读以下内容：[iOS is exit(0) deprecated?](https://stackoverflow.com/questions/13843774/ios-is-exit0-deprecated/13843949#13843949)

# javascript - jQuery post() 返回真或假

> ID：15090522
> 
> 赞同：0
> 
> 时间：2013-02-26T13:37:34.653
> 
> 标签：javascript, jquery, ajax, post, global-variables

在想在这里问之前，我一直在寻找答案，但我只是卡住了。

我已经阅读了一些与我类似的文章/问题，但以这些文章结尾：

*   [JQuery - 将 ajax 响应存储到全局变量](https://stackoverflow.com/questions/905298/jquery-storing-ajax-response-into-global-variable)中 // 答案：[https ://stackoverflow.com/a/905324](https://stackoverflow.com/a/905324)
*   [jQuery：ajax调用成功后返回数据](https://stackoverflow.com/questions/5316697/jquery-return-data-after-ajax-call-success)

我最终得到了这个：

```
var del_act = (function(){
    var resp;

    $.post(url+'delete/'+id, 'json')
    .done(function(data) {
        custom_alert(type.toUpperCase()+' deleted succesfully!');
        if(redirect)
            window.location.replace(url);
        resp = true;
    })
    .fail(function(jqXHR, textStatus, errorThrown) {
        console.log(jqXHR);
        if(jqXHR['status'] == 404)
            custom_alert(type + ' not found');
        resp = false;
    });

    return {getResp: function()
    {
        console.log(resp);
        return resp;
    }};
})();

console.log(del_act.getResp()); 
```

但问题是两个`console.log`s 都返回`undefined`响应。我知道我可以使用`$.ajax()`with`async: false,`但我不想，所以我试图找到一种返回 a`true`或`false`响应的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:42:53.743

`$.post()`是异步的，即请求发送后立即返回，之后的代码依次执行。在这种情况下，您`console.log`会被调用，但您的请求是异步运行的，因此您无法获取其返回值。

处理这种异步场景的方法是使用回调，例如。您指定一个 returnCallback 参数，并在调用的“完成”回调中`$.post`调用它。

```
var del_act = (function(doneCB){
    var resp;

    $.post(url+'delete/'+id, 'json')
    .done(function(data) {

        // Call CALLBACK specifying return status
        doneCB(true)
    }) 
```

异步代码的问题是它迫使你在级联回调中做所有事情，例如你不能这样做：

```
console.log(del_act(whatever)) 
```

因为这会给你`undefined`, 因为，如前所述， async 函数仍然单独运行。你必须有不同的想法。在这种情况下，您必须进行设置，以便在工作完成后发生 console.log：

```
del_act(function() { console.log("del_act finished, status OK!"); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:39:22.303

变量不能像那样从 ajax 调用中转移出来。

相反，您应该做的是在成功/失败中调用一个传递 true 或 false 值的函数，然后将代码放入函数中以对该 true/false 输出进行操作

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T13:42:14.580

```
jqXHR 
```

它的自我是和对象，并且直接将其写入控制台会给出未定义或对象作为输出。
似乎从服务器返回的响应无效，因为它触发了失败事件。
确保您返回有效的**JSON**数据。

您应该发布一个链接以便更好地了解问题。

# actionscript-3 - AS2 中的随机码转换为 AS3，

> ID：15090530
> 
> 赞同：0
> 
> 时间：2013-02-26T13:38:02.677
> 
> 标签：actionscript-3, random, actionscript-2

我尝试在 android 的 flash cs5.5 中进行随机测验，所以我将此 AS2 代码转换为 AS3，但我有 1 个错误。

**AS2：**

```
stop();

benar = 0; salah = 0; total_frame = 11; array_frame = []; 
for (i=2; i<=total_frame; i++) {
    array_frame.push(i); 
}
array_frame.sort(function () {  
    return random(2) ? 1 : -1;
});
jumlah_frame = array_frame.length; 
```

**我的 AS3：**

```
stop()

var benar=0;var salah=0; var jumlah_frame; var total_frame = 11; 
var array_frame = [];

var i:Number; for ( i=2; i<=total_frame; i++) {
    array_frame.push(i);
} 
array_frame.sort(function () {  
    return random(2) ? 1 : -1; 
});
jumlah_frame = array_frame.length; 
```

我的错误是.. ***array_frame.sort(function () { return random(2) ? 1 : -1;*** 1180: 调用一个可能未定义的随机方法。

我的代码已经正确了吗？我是 AS3 的新手，请有人解释并更正此代码，或者教我另一个有效的代码，谢谢.. :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:40:31.673

我想，你应该`random(2);`转换为`int(Math.random()*2);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:01:45.787

随机（2）；是 Math.floor(Math.random() * 1);

```
function oldrandom(n):Number
{
    return Math.round(Math.random()*(n-1));
} 
```

# php - 如何在生产环境中访问 Doctrine profiler？

> ID：15090533
> 
> 赞同：2
> 
> 时间：2013-02-26T13:38:06.390
> 
> 标签：php, symfony1, doctrine, symfony-1.4, profiler

我设置了一个过滤器来计算执行的查询数量，并在它们超过一定限制时向我的数据库写入一些内容。

它在我的开发环境中运行良好，但是当我在生产环境中对其进行测试时，我的数据库不再返回探查器。我想这是一个为开发环境启用数据库分析器的设置，但我似乎找不到它。

我使用 Symfony1.4 和 Doctrine。

```
$database = $databaseManager->getDatabase($name);
if ($database instanceof sfDoctrineDatabase && $profiler = $database->getProfiler())
{
    $events = $profiler->getQueryExecutionEvents();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:54:48.160

您可以使用以下`profiler`选项强制探查器在 database.yml 中建立连接：

```
prod:
  master:
    class: sfDoctrineDatabase
    param:
      profiler: true
      dsn: 'mysql:host=localhost;dbname=dbname'
      username: username
      password: password 
```

> 指示是否将教义日志输出到调试工具栏。profiler 的默认值取决于环境。在开发环境中默认值为`true`，否则为 - `false`。

# nuget - 有没有办法将 NuGet 使用的语言环境设置为中性（英语）？

> ID：15090534
> 
> 赞同：4
> 
> 时间：2013-02-26T13:38:06.657
> 
> 标签：nuget

我已经设置了本地化（俄语）Windows 7。它是专业版而不是旗舰版或企业版，所以我无法设置英语语言包或 MUI。然后，我设置了带有 Nuget 扩展的 Visual Studio（英语）。事实是，由于某种原因，Nuget 以系统本地化语言而不是 Visual Studio/msbuild 的语言将其消息发送到输出日志，而来自 .Net SDK 的消息以英文发送。我想要的是用英语输出，例如，将其发送给说英语的人。

看起来没有办法在 Nuget.config 文件中配置它。至少，[文档](http://docs.nuget.org/docs/reference/nuget-config-settings)中没有明确提到这个选项。另外，我在 Nuget 扩展本身中没有找到任何语言设置。

尽管系统语言环境如何，是否有一种工作方式或解决方法可以以英语获得 Nuget 输出？

# php - 更改时区不起作用

> ID：15090539
> 
> 赞同：0
> 
> 时间：2013-02-26T13:38:16.417
> 
> 标签：php, joomla, timezone

如何在我们的 Joomla 网站中将默认时区更改为 CET 时区。我们使用PHP函数

`ini_set('date.timezone', 'Europe/Rome');`

但仍然得到一小时的差异（提前）。

请让我知道你们对解决此问题可能有什么想法。

这个一小时的差异可能与夏季休假有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:49:17.450

*免责声明：我对 Joomla 或 PHP 一无所知。*

但是，我*知道*如何使用 Google 搜索`joomla timezone`和 `joomla daylight savings`

根据[Joomla 文档](http://help.joomla.org/content/view/51/153/1/2/)，Joomla 设置仅支持简单的偏移量。

其他人[询问是否支持 DST/夏令时](http://forum.joomla.org/viewtopic.php?p=2118717)，临时解决方案是[使用此插件](http://extensions.joomla.org/extensions/hosting-a-servers/servers/9268)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:33:09.680

你可以试试

```
date_default_timezone_set("Europe/Rome"); 
```

否则你可以试试

```
$now = new DateTime();
$now->setTimezone(new DateTimeZone("Europe/Rome"));
echo $now->format('g:i A'); 
```

这取决于您的要求。

# css - CSS侧边栏菜单未在移动视图中显示子项

> ID：15090543
> 
> 赞同：0
> 
> 时间：2013-02-26T13:38:24.533
> 
> 标签：css, menu, menuitem

在计算机/笔记本电脑屏幕以及平板电脑/iPad 上查看时，侧边栏菜单看起来完全正常，但由于某种原因，它没有在**移动**视图中显示菜单的**子**项。

 **[在这里查看链接](http://test.snowflakesoftware.com/markets/aviation/)

我尝试将菜单中的内容添加到 theme.css 下的 CSS Mobile 版本，但它仍然不显示子项。我不知道为什么它不起作用？这让我很困惑！

不要以为任何人都可以借另一双眼睛看看我是否遗漏了什么？我真的很感激！

以下是移动视图的当前 CSS：

```
#widget_nav_menu li {
    clear: both;
    float: left;
    list-style: none; 
    text-align: center;
    width: 313px;
    /* padding: 5px;
     margin: 5px;*/
    background: #f4f8fa;
    border-bottom: 1px solid #c3ced5;
    height: 34px;
    text-indent: none;
    color: #174267;
}

#widget_nav_menu a {
    font-family: Arial, sans-serif;
    font-size: 13px;
    color: #174267;
    text-decoration: none;
    display: block;
    padding: 11px 0 15px 7px;
}

#widget_nav_menu a.active,
#widget_nav_menu a:hover {
    background-image: url(images/hover_bg.png);
    background-position: right -5px;
    /*position: absolute;*/
    /*z-index: 10;*/
    color: #fff;
    /*margin-right: -17px;*/
}

#widget_nav_menu li.current_page_item a {
    background-image: url("images/hover_bg_small.png");
    background-position: right -5px;
    color: #FFFFFF;
    display: block;
    margin: 0 auto;
    padding: 11px 0;
    width: 318px;
}

#widget_nav_menu li a:hover {
    background-image: url("images/hover_bg_small.png");
    background-position: right -5px;
    color: #FFFFFF;
    display: block;
    margin: 0 auto;
    padding: 11px 0;
    width: 318px; 
}

#widget_nav_menu a:hover li {
}

#widget_nav_menu .sub-menu {
    /* margin-left:10px; */
}

        #widget_nav_menu li ul {
            position: absolute;
            width: 318px
            left: -999em;
        }
        #widget_nav_menu li:hover ul {
            left: auto;
        }

        #widget_nav_menu li:hover ul, #widget_nav_menu li.sfhover ul {
            left: auto;
        }

            /*** Multi Level ***/
            #widget_nav_menu li ul ul {
                margin: -1em 0 0 10em;
            }

            #widget_nav_menu li:hover ul ul, #widget_nav_menu li.sfhover ul ul {
                left: -999em;
            }

        #widget_nav_menu li ul li.current_page_item a:hover {
            width: 318px;
            background-image: url("images/hover_bg_small.png");
            background-position: right -5px;
            color: #fff;
            margin-right: -17px;
        }

.menu-sectors-container li {
    clear: both;
    float: left;
    list-style: none;
    width: 318px;
    background: #f4f8fa;
    border-bottom: 1px solid #c3ced5;
    height: 34px;
    text-indent: none;
    color: #174267;
}
.menu-sectors-container li a {
    font-family: Arial, sans-serif;
    font-size: 13px;
    color: #174267;
    text-decoration: none;
    display: block;
    padding: 7px 0px 7px 7px;
}
.menu-sectors-container li a:active,
.menu-sectors-container li a:hover {
    width: 318px;
    background-image: url(images/hover_bg.png);
    background-position: right -5px;
    position: absolute;
    z-index: 1005;
    color: #fff;
    margin-right: -17px;
    padding:11px 0 13px 10px;
}
.menu-sectors-container li a:hover li {} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:33:35.290

我已经解决了这个问题。移动部分下有两个 .sub-menu，我什至没有意识到。编辑一个而没有发生的事情是原因，因为另一个类仍在应用中！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:01:33.057

在触摸设备上没有鼠标光标，因此不存在悬停状态，导致不知道显示子导航列表。一些设备将快速点击视为悬停，但 AFAIK 这不是标准行为。

诸如“touchstart”之类的触摸事件的简单 JavaScript 侦听器应该可以解决问题。**

# eclipse - 如何在 Eclipse 中添加 Symfony 包

> ID：15090546
> 
> 赞同：0
> 
> 时间：2013-02-26T13:38:28.030
> 
> 标签：eclipse, symfony

我正在使用 netbeans 来处理 Symfony 项目。但我想尝试使用 Eclipse。我从 Eclipse 市场添加了所有必要的插件，并且能够使用 Eclipse 创建 Symfony 项目。

问题是当我想向项目中添加一个包时......我如何使用 Eclipse 来做到这一点，例如，没有 New->Symfony Bundle，什么都没有

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T10:30:52.683

这不可能..

用于 Symfony 的 Prefezr netbeans 插件...集成了命令行...您可以对 Eclipse 做同样的事情，但您必须通过外部工具构建它们中的每一个

# c# - 如何填写对象列表？

> ID：15090548
> 
> 赞同：1
> 
> 时间：2013-02-26T13:38:38.510
> 
> 标签：c#, asp.net, oop

我的代码上有一个对象“工具包”。

```
class Kit
{
    private int _CK_ID;

    public int CK_ID
    {
        get { return _CK_ID; }
        set { _CK_ID = value; }
    }

} 
```

在我的代码中，我想填写一个 Kit 列表

```
List<Kit> kits = new List<Kit>(); 
```

现在我想用数据库中的数据填充工具包

我有一个解决方案：

将数据带到阅读器，然后循环并将新套件插入列表中。

但我想做“很好”我怎么能做这样的事情

```
kits.fillData(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:46:32.773

这取决于您希望如何构建代码以及您最熟悉的内容可以使用[Entity Framework](http://msdn.microsoft.com/en-gb/data/ef.aspx)或[NHibernate 之](http://nhforge.org/)类的东西。

这显然取决于您的框架、任务要求和技能组合。

如果这不是一个选项，您可以执行此操作，基于您的`stored procedure`或 select 语句带出与类相同的列名`Kit`。

```
public class KitList : List<Kit>
{
  public void FillList()
  {
    using (SqlConnection con = new SqlConnection(""))
    {
      var cmd = new SqlCommand("GetData", con);
      var dt = new DataTable();
      var sda = new SqlDataAdapater(cmd);
      sda.Fill(dt);
      foreach(var row in dt.Rows)
      {
        Kit k = new Kit();
        foreach(var col in dt.Columns)
        {
          k.GetType().GetProperty(col.Name).SetValue(obj, row[col.Name], null);
        }
        this.Add(k);
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:40:27.140

像这样创建一个扩展方法`List<Kit>`：

```
public static void fillData(this List<Kit> kits) { } 
```

然后在里面填充`kits`对象。现在，您需要将其放入一个`static`类中，并且您需要在要使用它的文件的顶部包含命名空间。所以，如果你有这样的代码：

```
namespace MyApplication.Extensions
{
    public static class MyExtensions
    {
        public static void fillData(this List<Kit> kits) { }
    }
} 
```

然后在要使用它的文件中添加一条`using`语句：

```
using MyApplication.Extensions; 
```

所以当你有一个`List<Kit>`你可以这样做：

```
List<Kit> kits = new List<Kit>();
kits.fillData(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T13:45:53.180

为什么`Kit`物体会填充自己？

你可以实现类似的东西：

```
class KitCollection : List<Kit>
{
    public void FillData()
    {
        Random rnd = new Random();
        int i = 10; //let say 10 random data

        for (int j = 0; j < 10; j++)
        {
            Kit kit = new Kit();
            kit.CK_ID = rnd.Next(1, 100);
            this.Add(kit);
        }
    }
} 
```

并像这样使用它：

```
 KitCollection list = new KitCollection(); // can be easily cast to List<Kit>
    list.FillData(); 
```

`Random Data`? 当然，在这种情况下，您当然可以使用简单的方法来填充它，例如

```
private static void FillRandomData(List<Kit> lst)
{
    Random rnd = new Random();
    int i = 10; //let say 10 random data

    for (int j = 0; j < 10; j++)
    {
        Kit kit = new Kit();
        kit.CK_ID = rnd.Next(1, 100);
        lst.Add(kit);
    }
} 
```

# facebook - 分享此自定义摘要、网址和 Facebook 标题

> ID：15090550
> 
> 赞同：8
> 
> 时间：2013-02-26T13:38:43.657
> 
> 标签：facebook, google-plus, sharethis

我已将 sharethis 集成到我的网站中。我想自定义将通过 facebook 和 google plus 共享的标题和摘要，但由于某种原因，facebook 和 googleplus 仅获取 url，并且不显示我在 st_title 和 st_summary 变量中提供的标题和摘要。

将此添加到头部。

```
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "1234"});</script> 
```

在我的 html 我有这样的东西

```
<span class='st_facebook' st_url="http://www.cnn.com" st_title="CNN-Test Website" st_summary="Shared CNN news"></span>
<span class='st_googleplus' st_url="http://www.cnn.com" st_title="CNN-Test Website" st_summary="Shared CNN news"></span> 
```

我也不能使用opengraph（meta og标签）。我也尝试过 javascript 来设置标题和摘要，但结果仍然相同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-10T14:09:09.477

好吧，当涉及到这一点时，我也遇到了麻烦，您没有在 facebook 共享中获得共享标题和自定义 url，因为 facebook 在获取这些值时不考虑 span 元素的属性。Facebook 使用 Open Graph 概念并从 og:url 元标记中提供其 url 的网站的元标记中抓取信息。要允许 facebook 显示您的标题和自定义 url，请执行以下操作：

1.确保在 stLight.options javascript 中添加“shorten:false”行，否则您将无法获得完整的网站 url 2.将这些标签添加到您的 head 部分：（您可以将这些与现有的元标签一起添加)

```
<meta property="og:title" content="Yor desired title"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="Your website url"/>
<meta property="og:image" content="your custom image path"/>
<meta property="og:description" content="A short description of your website"/> 
```

图像应该是最好的 200X200 像素。如果你想知道更多... [http://developers.facebook.com/docs/technical-guides/opengraph/built-in-objects/](http://developers.facebook.com/docs/technical-guides/opengraph/built-in-objects/)

希望能帮助到你 ！

# vb.net - VB.NET 和“登录会话”

> ID：15090556
> 
> 赞同：0
> 
> 时间：2013-02-26T13:38:56.607
> 
> 标签：vb.net

我正在 VB 中制作一个使用 MySQL 作为数据库的应用程序。我有一个`frmMain`和一个名为`frmLogin`. 当我登录时，如果用户输入了正确的用户名和密码，登录表单会检查数据库。我希望他们返回`frmMain`并将信息（例如，id、登录名和角色）作为字符串（或更安全的东西）传递，`frmMain`但我不知道最好的方法是什么。

这是我的代码`frmLogin`（我知道 sql 注入）：

```
Private Sub btnLogin_Click(sender As System.Object, e As System.EventArgs) Handles btnLogin.Click
    Dim loginResult As String

    If String.IsNullOrEmpty(TextGebruikersNaam.Text) Or String.IsNullOrEmpty(TextGebruikersPass.Text) Then
        MsgBox("Voer uw gebruikersnaam en wachtwoord in om in te loggen. ", MsgBoxStyle.Exclamation, "Foutmelding")
        TextGebruikersNaam.Focus()
    Else
        Dim newPass As String
        newPass = HashString.getSHA1Hash(TextGebruikersPass.Text)

        loginResult = SQLHook.Counter("SELECT COUNT(*) FROM tblgebruikers WHERE GebruikersNaam='" & TextGebruikersNaam.Text.Replace("'", "''") & "' AND GebruikersPass='" & newPass.Replace("'", "''") & "'")

        If loginResult = 1 Then
            ' Login is cewl, now set some strings and unload this form so user
            ' could continue on frmMain.
        Else
            MsgBox("De gebruikersnaam of wachtwoord is onjuist.", MsgBoxStyle.Exclamation, "Foutmelding")
            TextGebruikersPass.Text = ""
            TextGebruikersPass.Focus()
        End If
    End If
End Sub 
```

是否有安全的方法来设置带有用户名和角色的（例如）字符串（在数据库内部也作为“GebruikersRole”行。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:52:36.963

使用会话或应用程序变量来保持您的数据可通过我们的应用程序访问，或者您可以创建一个类似 Person info 的类并将这些值分配给该类中的属性，并且可以在整个应用程序中访问它

编辑：创建一个类

类人

私有_用户名作为字符串

公共共享属性 username as string get return _username end get set(value of string) _username = value end set

结束类

这将使登录信息可用于整个应用程序，只需引用人员对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:06:09.177

以一种简单的方式，您可以设置一个公共变量来保存登录名和信息

```
Public Class frmLogin
Public Login as String
Public Informations as String

Login_Click
....
If loginResult = 1 Then
   Login = "xxx"
   Informations = "yyy"
   Me.Visible = False
   frmMain.ShowDialog()
Else .... 
```

现在在 frmMain 中，使用 frmLogin.Variable 获取值。

```
If frmLogin.Login = "xxxx" Then
   ..... 
```

我认为这不是最好的方法，但根据您的需要可能就足够了。青色

# visual-studio-2010 - 用于发布的构建后事件命令 (Visual Studio 2010)

> ID：15090558
> 
> 赞同：10
> 
> 时间：2013-02-26T13:39:00.210
> 
> 标签：visual-studio-2010, publish, post-build-event

我在 Visual Studio 2010 中有一个项目。该项目具有以下构建后事件命令行：

```
SET TARGET_PROJECT=TestMain
IF NOT EXIST "$(TargetDir)IceBox" (
  XCOPY /E /I /Y "$(SolutionDir)Externals\IceBox" "$(TargetDir)IceBox"
)
IF NOT EXIST "$(TargetDir)bzip2.dll" (
  COPY "$(SolutionDir)Externals\IceBox\bzip2.dll" "$(TargetDir)"
)
XCOPY /E /I /Y "$(SolutionDir)Externals\Infragistics" "$(TargetDir)" 
```

但是这个命令只在我创建调试或发布时使用。当我发布我的项目时，这些命令将被忽略。发布项目时是否可以使用此命令？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T16:45:52.150

我最近遇到了类似的问题。我只想在发布应用程序而不是每次构建时才运行命令。

我添加了一个发布后[任务](http://msdn.microsoft.com/en-us/library/ms171466.aspx)。由于我不直接使用[MSBuild](http://msdn.microsoft.com/en-us/library/dd637714.aspx)，我修改了我的解决方案 csproj 文件。

*例子：*

***解决方案名称：*** *MyKillerApp*

***项目文件名：*** *MyKillerApp.csproj*

使用 Notepad++ 或其他文本编辑器打开文件并导航到文件末尾并找到此部分（应该几乎在末尾）：

```
 <PropertyGroup>
    <PreBuildEvent>
    </PreBuildEvent>
  </PropertyGroup> 
```

然后添加您的发布后任务

```
 <PropertyGroup>
    <PreBuildEvent>
    </PreBuildEvent>
  </PropertyGroup>
  <Target Name="AfterPublish">
    <Exec Command="..\..\Documentation\DoxyGenExe\createDocs.bat" />
  </Target> 
```

我的任务运行一个运行[Doxygen](http://www.doxygen.nl/)（一个非常好的文档创建程序）和其他一些任务的 bat 文件。

你可以创建一个bat文件来运行任何命令非常方便

# android - Iphone UDID 和 Android ID

> ID：15090559
> 
> 赞同：3
> 
> 时间：2013-02-26T13:39:01.210
> 
> 标签：android, iphone, udid

我想知道 Iphone UDID 和 Android ID 之间是否有任何明显区别？

与 Android ID 相比，Iphone UDID 是否包含不同数量的数字/字符？是否有任何其他显着差异允许公式区分 Iphone UDID 和 Android ID 之间的区别？

我正在构建一个 SQL 数据库，并希望能够对存储的 ID 进行排序，并能够确定该 ID 是用于 Android 还是 Iphone（无需添加另一个数据库字段）。

干杯，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:31:25.017

首先，IOS 上的 UDID 自 IOS 5 以来已被弃用，您不应该使用它。您可以使用*CFUUIDCreate*函数来生成一个。但是使用这种方法，您每次安装都会获得一个新的 udid。因此，如果用户删除您的应用并稍后再次安装，您将获得一个新的 udid。

使用此方法，IOS UDID 将具有 E8AB292E-C980-4DA7-8B88-D11F11F11E11 之类的格式

android udid 是唯一的，即使您的用户卸载/重新安装您的应用程序也是如此。它的格式不同于IOS。它看起来像 012790000791234 或 A100000BD11B1E，因此您可以制作一个小的正则表达式来检查差异，因为它更短并且似乎不包含“-”，但它对于未来可能会很弱（特别是如果您计划添加更多平台） .

但是由于您知道您的应用程序是在哪种设备上构建的，因此您可以设置一个标志“平台”并将其值设置为 IOS 或 Android。（稍后让开放空间添加更多平台，如 windows、黑莓）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:53:05.333

当您注册设备时，使用 android 1、Iphone 2 的静态值

# android - 安卓。按钮看起来没有按下

> ID：15090562
> 
> 赞同：3
> 
> 时间：2013-02-26T13:39:07.103
> 
> 标签：android, button

我刚刚开始使用 Android 开发。我有一个像这样创建的非常简单的按钮：

```
<Button
    android:id="@+id/howItWorksButton"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="58dp"
    android:text="@string/how_it_works_button_title" /> 
```

在代码中，我为其设置了背景颜色：

```
howItWorksButton.setBackgroundColor(Color.RED); 
```

这是 onClickListener：

```
howItWorksButton.setOnClickListener(new OnClickListener()
    {
        public void onClick(View view)
        {
            Intent intent = new Intent(MainMenuActivity.this, HowItWorksActivity.class);
            MainMenuActivity.this.startActivity(intent);
        }
    }); 
```

问题是，当我单击它时，它看起来不像刚刚被按下，它只是保持原样，没有任何变化。它的 onClick 方法工作正常，功能一切正常，但我希望它看起来以某种方式改变，就像所有按钮在按下时所做的那样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T14:12:29.977

如果您手动设置颜色，Android 不会像 iOS 那样自动显示按下状态。这是推荐的方法。

将 colors.xml 文件夹放在您的 values 文件夹中。它的内容应该是这样的。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="white">#ffffffff</color>
    <color name="darkwhite">#ffeeeeee</color>
    <color name="transparent">#00ffffff</color>
    <color name="semitransparent">#88000000</color>
    <color name="orange">#ffff8800</color>
    <color name="light_orange">#ffe27d18</color>
    <color name="light_blue">#ff00a2e8</color>
    <color name="black">#ff000000</color>
    <color name="menuButtonColor">#ffea8e44</color>
</resources> 
```

例如，将选择器文件放在您的可绘制对象中

my_button_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@color/light_orange" android:state_pressed="true"/>
    <item android:drawable="@color/orange"/>
</selector> 
```

像这样使用你的选择器

```
<Button
    android:id="@+id/howItWorksButton"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="58dp"
    android:text="how_it_works_button_title"
    android:background="@drawable/my_button_selector" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:44:04.690

尝试这个，

使用`Selector`.

```
 <?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@drawable/login_btn" android:state_pressed="false"/>
<item android:drawable="@drawable/login_btn_focus" android:state_pressed="true"/>

</selector> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:43:28.293

您需要将图像选择器设置为背景，以告诉 android 当按钮被按下、聚焦、禁用时，您希望显示哪种图像或颜色......在这里您可以找到一个示例 [http://www.mkyong.com/ android/android-imagebutton-selector-example/](http://www.mkyong.com/android/android-imagebutton-selector-example/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-09T14:26:48.810

写`android:state_pressed=" "`在 both`pressed`和 other`state`中。

**按下按钮时**

```
<item android:state_pressed="true">
    <shape>
        <solid android:color="@color/green" />
        <corners android:radius="@dimen/btn_corner_rds" />
    </shape>
</item> 
```

**未按下按钮时**

```
<item android:state_pressed="false">
    <shape>
        <solid android:color="@android:color/transparent" />
        <stroke android:width="@dimen/stroke_width_btn"  />
        <corners android:radius="@dimen/btn_corner_rds" />
    </shape>
</item> 
```

# java - 在 Apache CXF 生成的客户端存根中为基本身份验证定义管道 xml 节点的位置？

> ID：15090563
> 
> 赞同：1
> 
> 时间：2013-02-26T13:39:11.430
> 
> 标签：java, authentication, https, cxf, stub

`wdsl`我已经通过 Https 从服务于我必须使用的 Web 服务的 Soap 服务器检索了一个文件。然后，我使用 Apache Cxf`wsdl2java`创建了客户端存根，以便检查与 Web 服务服务器的通信。

我知道远程服务器受密码保护（并使用 https 保护），因此，正如预期的那样，远程服务器`HTTP error 401`在我启动存根时返回。好的，我需要进行身份验证。

[在 Apache CXF 文档](http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html)中，他们首先介绍了**Basic Authentication**，它看起来像：

```
 <conduit name="{http://example.com/}HelloWorldServicePort.http-conduit"
   xmlns:sec="http://cxf.apache.org/configuration/security"
   xmlns="http://cxf.apache.org/transports/http/configuration">
   <authorization>
      <sec:UserName>myuser</sec:UserName>
      <sec:Password>mypasswd</sec:Password>
      <sec:AuthorizationType>Basic</sec:AuthorizationType>
   </authorization>
 </conduit> 
```

但是，CXF 生成的代码不包含任何配置 xml 文件。所以我想知道我在哪里放置这个 xml 配置以进行身份​​验证？

我想知道`{http://example.com/}HelloWorldServicePort.http-conduit`对应的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:34:06.907

如果您不想使用配置文件，可以[通过编程方式配置管道。](http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html#ClientHTTPTransport%28includingSSLsupport%29-Usingjavacode)创建一个[AuthorizationPolicy](http://cxf.apache.org/javadoc/latest/org/apache/cxf/configuration/security/AuthorizationPolicy.html)，并使用[HTTPConduit.setAuthorization](http://cxf.apache.org/javadoc/latest/org/apache/cxf/transport/http/HTTPConduit.html#setAuthorization%28org.apache.cxf.configuration.security.AuthorizationPolicy%29)在管道上设置它。否则，您将要[使用 Spring](http://cxf.apache.org/docs/writing-a-service-with-spring.html)来配置客户端。

# ios - 以横向显示动态控制器视图？

> ID：15090565
> 
> 赞同：1
> 
> 时间：2013-02-26T13:39:21.833
> 
> 标签：ios, ios5, ios6

我创建了不同的 UIViewControllers 并使用 nib 文件制作了他们的视图。我只想在横向视图中显示所有这些控制器。这东西适用于这些控制器。

我动态创建了 1 个控制器并使用动态创建视图。

```
UIViewController* temp=[[UIViewController alloc] init ];
temp.view=overlayview;//overlayviw was created dyanmcailly 
```

现在我如何才能在横向中显示此视图，它始终在纵向视图中打开是否可以为动态控制器定义像 shouldAutorotateToInterfaceOrientation 方法这样的方法。

因为我所有带有 nib 文件的控制器类都实现了 shouldAutorotateToInterfaceOrientation ，这让我可以在横向视图中显示视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:47:02.263

我不确定您要完成什么，但最好创建某种基本视图控制器，其中构造函数接受视图作为参数并正确实现所需的方法。即使您需要它更加动态，您也可以为基本视图控制器提供一些配置属性。否则，可以通过 obj-c 运行时添加方法，但这完全没有必要。

# c - 使用 realloc 动态扩展数组

> ID：15090567
> 
> 赞同：4
> 
> 时间：2013-02-26T13:39:22.040
> 
> 标签：c, pointers, malloc, realloc

我编写了以下代码来清楚地了解 malloc 和 realloc。我已经使用 malloc 初始化指针，然后使用 realloc，我正在增加数组的大小。但是当我运行代码时出现以下错误。

```
#include<stdio.h>
#include<stdlib.h>

int main()
{
    char *p;
    p = malloc(10);
    p = " this is it";
    printf("\n%s", p);
    p = realloc(p, 14);
    p[11] = 'A';
    p[12] = 'B';
    p[13] = 'C';
    printf("\n %s", p) ;
    return 0;
} 
```

输出：

```
ajay@ajay-K54L:~$ gcc te.c 
ajay@ajay-K54L:~$ ./a.out

*** glibc detected *** ./a.out: realloc(): invalid pointer: 0x000000000040071c ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7e626)[0x7fb111e88626]
/lib/x86_64-linux-gnu/libc.so.6(realloc+0x2de)[0x7fb111e8d3ee]
./a.out[0x4005dc]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7fb111e2b76d]
./a.out[0x4004d9]
======= Memory map: ========
00400000-00401000 r-xp 00000000 08:03 3027043                            /home/ajay/a.out
00600000-00601000 r--p 00000000 08:03 3027043                            /home/ajay/a.out
00601000-00602000 rw-p 00001000 08:03 3027043                            /home/ajay/a.out
00e76000-00e97000 rw-p 00000000 00:00 0                                  [heap]
7fb111bf4000-7fb111c09000 r-xp 00000000 08:03 2100801                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7fb111c09000-7fb111e08000 ---p 00015000 08:03 2100801                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7fb111e08000-7fb111e09000 r--p 00014000 08:03 2100801                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7fb111e09000-7fb111e0a000 rw-p 00015000 08:03 2100801                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7fb111e0a000-7fb111fbd000 r-xp 00000000 08:03 2100780                    /lib/x86_64-linux-gnu/libc-2.15.so
7fb111fbd000-7fb1121bc000 ---p 001b3000 08:03 2100780                    /lib/x86_64-linux-gnu/libc-2.15.so
7fb1121bc000-7fb1121c0000 r--p 001b2000 08:03 2100780                    /lib/x86_64-linux-gnu/libc-2.15.so
7fb1121c0000-7fb1121c2000 rw-p 001b6000 08:03 2100780                    /lib/x86_64-linux-gnu/libc-2.15.so
7fb1121c2000-7fb1121c7000 rw-p 00000000 00:00 0 
7fb1121c7000-7fb1121e9000 r-xp 00000000 08:03 2100760                    /lib/x86_64-linux-gnu/ld-2.15.so
7fb1123d2000-7fb1123d5000 rw-p 00000000 00:00 0 
7fb1123e5000-7fb1123e9000 rw-p 00000000 00:00 0 
7fb1123e9000-7fb1123ea000 r--p 00022000 08:03 2100760                    /lib/x86_64-linux-gnu/ld-2.15.so
7fb1123ea000-7fb1123ec000 rw-p 00023000 08:03 2100760                    /lib/x86_64-linux-gnu/ld-2.15.so
7ffff08d4000-7ffff08f5000 rw-p 00000000 00:00 0                          [stack]
7ffff09ff000-7ffff0a00000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
 this is itAborted (core dumped) 
```

我在内存分配方面做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T13:42:31.907

这：

```
p = " this is it"; /* Does not copy, use strcpy(). */ 
```

将字符串文字的地址分配给`p`，将其从先前返回的地址更改为`malloc()`. 传递给的指针[`realloc()`](http://en.cppreference.com/w/c/memory/realloc)必须是：

> ... 先前由 malloc()、calloc() 或 realloc() 分配，但尚未使用 free() 释放，否则，结果未定义。

将分配更改`strcpy()`为例如以更正：

```
p = malloc(12); /* Increased size. */
if (p)
{
    strcpy(p, " this is it");
    char* tmp = realloc(p, 14);  /* Store result in temp to avoid potential */
    if (!tmp)                    /* in the event that realloc() fails. */
    {
        free(p);
        return -1;
    }
    p = tmp;
    /* snip ... */

    free(p); /* When 'p' is no longer required. */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T13:41:37.873

您正在`malloc()`用字符串覆盖由 , 返回的指针：

```
p = " this is it"; 
```

您应该使用`strcpy()`将字符串复制到指向的内存中`p`：

```
strcpy(p, "this is it"); 
```

但请注意，上述字符串需要的空间比您分配的要多：它是 10 个可见字符，但字符串有一个 0 字符作为终止符，因此您至少需要 11 个字符的空间。

此外，您应该在依赖指针有效之前检查两者的返回值`malloc()`。`realloc()`如果是`NULL`，则分配失败。考虑到您的分配大小，这不太可能，但这是一种很好的做法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T13:44:37.843

```
char *p = malloc(10); 
```

分配大小的内存块`10`并`p`指向该内存。然后

```
p = " this is it"; 
```

定义一个常量字符串字面量并`p`指向只读内存，该常量字符串字面量存储在其中。所以

```
p = realloc(p, 14); 
```

尝试生成**未定义行为**`realloc`的只读内存。

 *** * *

不要将常量字符串文字的地址分配给`p`（这也会导致**内存泄漏**，因为您动态分配的内存地址丢失了），您应该使用复制此字符串[`strcpy`](http://linux.die.net/man/3/strcpy)。所以替换这一行：

```
p = " this is it"; 
```

有了这个：

```
strcpy(p, " this is it"); 
```**

# html - 网站在浏览器中不可见，但已加载代码

> ID：15090569
> 
> 赞同：0
> 
> 时间：2013-02-26T13:39:30.010
> 
> 标签：html, apache, .htaccess

这是一件很奇怪的事情。我将我的网站复制到子域。在主域上工作正常，但在子域上只是代码加载（我可以检查`View Source`），但页面没有显示。

Chrome 或 Firefox 中没有错误消息...

这是 .htaccess 文件：

```
RewriteEngine On

RewriteBase /
RewriteRule (.*)tiny_mce_popup\.js$ /d_text.cgi?act=tiny_mce_popup.js [L]
RewriteRule (.*)sitemap\.xml$ /d_text.cgi?act=sitemap.xml [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /index.cgi?act=select&htmlfile=$1 [QSA] 
```

有人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:23:50.087

您应该替换代码

```
RewriteBase / 
```

至

```
RewriteBase /SUB-DOMAIN-FOLDER-NAME/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:21:11.473

需要删除 Google Analytics 跟踪代码。

# javascript - 转义字符串以突出显示功能时出错（js -regexp）

> ID：15090573
> 
> 赞同：0
> 
> 时间：2013-02-26T13:39:35.033
> 
> 标签：javascript, regex

我正在尝试实现突出显示功能，这是我到目前为止所拥有的

```
function highlight(value, term){
    return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + 
      term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/i, "\\$1") + ")(?![^<>]*>)(?![^&;]+;)", "i"), "<strong>$1</strong>")
  } 
```

在大多数情况下它可以工作，但是当术语包含')'并且引发此错误时代码会中断：SyntaxError: unmatched ) in regular expression。似乎 ')' 没有通过以下方式转义：

```
term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/i, "\\$1") 
```

但是，尽管我查看了该代码，但似乎找不到错误所在。能帮忙指点一下吗？？或者有没有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:59:40.093

您的`term.replace`代码仅替换找到的任何术语的*第一个*实例。您需要`g`在正则表达式的末尾使用。也没有必要捕获，因为您可以只使用表达式本身（并且我已经删除了一些不必要的转义）：

```
term.replace(/[\^$()[\]{}*.+?|\\\\]/g, "\\$&") 
```

更完整的版本在这里： http: [//phpjs.org/functions/preg_quote/](http://phpjs.org/functions/preg_quote/)

# java - 带有 http 响应 Android 的 Stack OverFlow 错误

> ID：15090575
> 
> 赞同：0
> 
> 时间：2013-02-26T13:39:41.440
> 
> 标签：java, android, backgroundworker, stack-overflow

我有一个从互联网上获取图像的后台工作人员。

现在，在捕获后尝试获取图像时，我得到了 Stack OverFlow。

这是我的代码

**获取函数**

```
 private InputStream fetch(String urlString) throws MalformedURLException, IOException, IllegalStateException, SocketTimeoutException { 

    HttpClient httpClient = new DefaultHttpClient(); 

    HttpParams params = httpClient.getParams();
    HttpConnectionParams.setConnectionTimeout(params, TIME_OUT);
    HttpConnectionParams.setSoTimeout(params, TIME_OUT);

    HttpGet request = new HttpGet(urlString); 
    HttpResponse response = httpClient.execute(request); 

    return response.getEntity().getContent(); 
} 
```

**后台工作者**

```
static int tryouts = 0;
/**
 * Getting the bitmap from the web asynchronously 
 * @author orel.z
 * @version 1.0
 */
class BitmapWorkerTask extends AsyncTask<String, Void, Bitmap>
{
    @Override
    protected Bitmap doInBackground(String... params) {

        Bitmap bitmap = null;

        try
        {
            InputStream is = fetch(params[0]);
            bitmap = BitmapFactory.decodeStream(is);
            is.close();
            is = null;
            tryouts = 0;
        }
        catch(IOException exception)
        {
            if(tryouts < 3)
            {
                doInBackground(params);
                tryouts++;
            }
            else
            {
                tryouts = 0;
                bitmap = null;
            }
        }
        catch (OutOfMemoryError e) 
        {
            if(tryouts < 3)
            {
                System.gc();
                doInBackground(params);
                tryouts++;
            }
            else
            {
                tryouts = 0;
                bitmap = null;
            }
        }

        return bitmap;
    }
} 
```

**这是日志**

```
02-26 15:26:31.616: E/Crittercism(16936): java.lang.StackOverflowError
02-26 15:26:31.616: E/Crittercism(16936):              at     java.lang.String.substring(String.java:1436)
02-26 15:26:31.616: E/Crittercism(16936):              at java.util.regex.Splitter.finishSplit(Splitter.java:105)
02-26 15:26:31.616: E/Crittercism(16936):              at java.util.regex.Splitter.fastSplit(Splitter.java:75)
02-26 15:26:31.616: E/Crittercism(16936):              at java.lang.String.split(String.java:1831)
02-26 15:26:31.616: E/Crittercism(16936):              at java.lang.String.split(String.java:1813)
02-26 15:26:31.616: E/Crittercism(16936):              at java.net.URI.isValidDomainName(URI.java:577)
02-26 15:26:31.616: E/Crittercism(16936):              at java.net.URI.isValidHost(URI.java:545)
02-26 15:26:31.616: E/Crittercism(16936):              at java.net.URI.parseAuthority(URI.java:491)
02-26 15:26:31.616: E/Crittercism(16936):              at java.net.URI.parseURI(URI.java:409)
02-26 15:26:31.616: E/Crittercism(16936):              at java.net.URI.<init>(URI.java:204)
02-26 15:26:31.616: E/Crittercism(16936):              at org.apache.http.impl.conn.ProxySelectorRoutePlanner.determineProxy(ProxySelectorRoutePlanner.java:198)
02-26 15:26:31.616: E/Crittercism(16936):              at org.apache.http.impl.conn.ProxySelectorRoutePlanner.determineRoute(ProxySelectorRoutePlanner.java:150)
02-26 15:26:31.616: E/Crittercism(16936):              at org.apache.http.impl.client.DefaultRequestDirector.determineRoute(DefaultRequestDirector.java:596)
02-26 15:26:31.616: E/Crittercism(16936):              at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:293)
02-26 15:26:31.616: E/Crittercism(16936):              at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
02-26 15:26:31.616: E/Crittercism(16936):              at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
02-26 15:26:31.616: E/Crittercism(16936):              at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager.fetch(ImageManager.java:405)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager.access$3(ImageManager.java:396)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:319)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager.java:329)
02-26 15:26:31.616: E/Crittercism(16936):              at com.tvincisdk.utils.ImageManager$BitmapWorkerTask.doInBackground(ImageManager 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:51:02.783

是因为你`tryouts++;`在`doInBackground()`打电话吗？那不会导致`tryouts`永远不会达到3吗？

尝试：

```
 tryouts++;
 return doInBackground(params); 
```

看看会发生什么。

此外，您应该返回结果`doInBackground(params);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:05:53.647

这是一个更简单的逻辑。

```
class BitmapWorkerTask extends AsyncTask<String, Void, Bitmap>
{
    @Override
    protected Bitmap doInBackground(String... params) {

        Bitmap bitmap = null;

        for (int tryouts=0; tryouts<3; tryouts++) {
            try
            {
                InputStream is = fetch(params[0]);
                bitmap = BitmapFactory.decodeStream(is);
                is.close();
                is = null;

                break;
            }
            catch(IOException exception)
            {
                bitmap = null;
            }
            catch (OutOfMemoryError e) 
            {
                System.gc();
                bitmap = null;
            }
        }

        return bitmap;
    }
} 
```

# python - python tkinter 目录在网格视图中未正确显示

> ID：15090576
> 
> 赞同：0
> 
> 时间：2013-02-26T13:39:44.717
> 
> 标签：python, button, gridview, directory, tkinter

我正在尝试显示已安装的文件系统目录以供浏览。我将目录存储在列表中，然后将它们分配给每个按钮。我遇到的问题是运行程序时只出现一个按钮。库是最终目录，它是唯一打印出来的目录。我首先认为它可能是窗口大小，因为它只能容纳一个按钮的足够大小，所以我更改了窗口的大小，问题仍然存在。

我认为问题可能出在用于创建按钮本身的代码中，即主控部分。每次运行时，以前的主按钮不会被新的主按钮替换吗？如果是这种情况，我将如何解决这个问题？

我也知道我放置按钮的代码现在不能正常工作。放置几个按钮后，我想从新行开始并重复，但现在它只会下降到第三行，不会再继续了。我似乎想不出一种在不使用最少编码的情况下不断增加行数的好方法。

```
#!/usr/bin/python
# coding: latin-1

import os
from Tkinter import *

a=[]
b=[]
row = 0
column = 0

for dirname, dirnames, filenames in os.walk('/mnt/Backups.backupdb/stuart dent\xe2\x80\x99s MacBook Pro'):
    b = dirnames
    a = filenames

master = Tk()
master.geometry("500x500")
for dirnames in b:
    Button(master, width=8, height=4, text=b).grid(row=row, column=column, padx=10, sticky=W)
    column = column + 2
    if column == 10:
        row = 3
        column = 0
    break

mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:57:52.923

您需要问自己一个问题“在我为 b 中的目录名做的那一点上，b 是什么？”。如果您无法通过遵循逻辑来弄清楚这一点（由于您无意识地做出假设，这有时会很困难），请在第二个“for”之前添加一个 print 语句。

在第一个 for 循环中，您将覆盖每次迭代的数据，丢弃之前的所有数据。到循环完成时，`b`仅包含最后一个文件夹的数据。因此，当您最终进入循环以创建按钮时，您只有主文件夹中最后一个文件夹中的任何目录名。

# php - Php : 对字符串进行数学运算

> ID：15090580
> 
> 赞同：-1
> 
> 时间：2013-02-26T13:39:51.693
> 
> 标签：php

我在变量中有一个值，如下所示

```
$game = "4+9"; 
```

我希望它回显 13 ，如何将其转换为整数。

注意：我从 file_get_contents 得到 4+9 的值，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:44:22.083

```
echo array_sum(explode("+",$game)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:42:43.560

```
$strings = explode("+", "4+9");
$value = intval($strings[0]) + intval($strings[1]);
echo $value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:43:07.320

如果您只是处理加法，您可以通过加号运算符拆分字符串并添加数字。

```
$numbers = explode('+', $game);
$result = 0;
foreach($numbers as $num) {
    $result += intval($num);
} 
```

当您开始添加其他运算符、括号等时，这将很快变得复杂。

您可以使用`eval`只运行文件的文本内容，但您必须确保没有人会在文件中放入任何讨厌的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:45:53.717

您应该使用循环将字符串分成一系列子字符串。如果您 100% 确定它只是“+”运算符，那么您可以使用如下简单代码：

$data = explode('+', $game);

回声 $data[0]+$data[1];

但是如果你有 -, / 或 * 会发生什么？

此外，您始终可以使用 eval() 函数，但由于安全问题，强烈建议不要这样做。

# mysql - 按日期分组，给定一个 varchar（字符串）

> ID：15090582
> 
> 赞同：1
> 
> 时间：2013-02-26T13:39:55.250
> 
> 标签：mysql, sql, date, group-by

我得到了一个数据库，其中包含一个包含属性“数据”（varchar（25））的表。由于糟糕的数据库设计，此列以字符串格式填充日期值，例如：

> '2013 年 2 月 25 日下午 3:47'

我需要查询表并按天对所有行进行分组（在上面的示例中为 25）。我应该使用 DATE_FORMAT(datum, '') 函数来做到这一点吗？每当我使用该函数时，我都会得到空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:46:55.800

您是否尝试过`STR_TO_DATE()`功能（[文档](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)）？

它的倒数`DATE_FORMAT()`将日期值作为其第一个参数，而不是字符串。然后，您可以使用它来获取正确的日期值。

这是一个与您的查询匹配的 SQL 命令，我测试过并且可以工作。

```
SELECT * 
FROM tablename 
WHERE DATE_FORMAT( STR_TO_DATE(datum,'%M %e, %Y, %h:%i %p'), '%d' ) = 25; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:47:02.447

由于它是一个字符串，因此您应该使用将其转换为有效的日期值`STR_TO_DATE`

```
SELECT  *
FROM    tableName
WHERE   STR_TO_DATE(datum,'%M %e, %Y, %h:%i %p') .... 
```

两者的区别：

STR_TO_DATE - 将字符串转换为日期
DATE_FORMAT - 将日期转换为字符串

# sql - 在 OpenQuery 错误中使用先前日期搜索

> ID：15090588
> 
> 赞同：1
> 
> 时间：2013-02-26T13:40:24.347
> 
> 标签：sql, sql-server-2008, tsql

尝试使用昨天日期的 where 参数运行 openquery 但出现错误.. 任何人都可以帮忙

```
select top 10 * into #temp1 
from openquery(mysql1, 'select * from test.T1 where source = "Data" and 
  calcdate = SELECT REPLACE(CONVERT(VARCHAR, DATEADD(dd, -1, GETDATE()), 102), '.', '-') ') 
```

谢谢

这是错误消息 102，级别 15，状态 1，行 2 '.' 附近的语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:50:51.010

您缺少转义引号，并且`SELECT`in`WHERE clause`是多余的。

尝试这个：

```
select top 10 * into #temp1 
from openquery(mysql1, 'select * from test.T1 where source = ''Data'' and 
  calcdate = DATE_FORMAT(DATE_ADD(NOW(), INTERVAL -1 DAY), ''%Y-%m-%d'')') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:48:30.023

SELECT 语句必须在括号中或不使用 SELECT 关键字

```
select top 10 * into #temp1 
from openquery(mysql1, 'select * from test.T1 where source = "Data" and 
  calcdate = (SELECT REPLACE(CONVERT(VARCHAR, DATEADD(dd, -1, GETDATE()), 102), '.', '-')) ') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:15:49.317

您不需要另一个选择查询来使用转换函数。你也*`to get the correct results`*应该*`comparing dates not varchar values`*在*`where clause`*. 如果`calcdate`不是日期类型字段，则在比较之前对其进行转换。尝试这个;

```
Select top 10 * into #temp1 
From openquery(mysql1, 'Select * from test.T1 where source = ''Data'' and 
  calcdate =  dateadd(dd, -1, getdate())') 
```

选择查询字符串的[演示](http://sqlfiddle.com/#!3/d41d8/9662)

# jquery - 列表过滤器不适用于 keyup，忽略一些列表项

> ID：15090591
> 
> 赞同：0
> 
> 时间：2013-02-26T13:40:30.883
> 
> 标签：jquery

我发现了这个很棒的列表过滤 jQuery 脚本并实现到我的简单`ol` `li`列表中。当您在搜索中键入内容时，它会从项目中搜索键入的字母`li`并隐藏`lis`. 完美运行！

但是，我将相同的脚本实现为更复杂的`list`. 唯一的区别是 HTML，我的where`divs`里面有额外的内容`li`，而另一个没有。当我在新的东西上搜索东西时，`list`它确实工作正常。当我删除搜索词时，它应该`slideDown`是所有原始`li`项目，但它没有。你们可以看看下面的小提琴并告诉我我做错了什么吗？

工作简单列表[小提琴](http://jsfiddle.net/jBCLv/1/) 不正常工作列表[小提琴](http://jsfiddle.net/vesa9/1/)

我有一种感觉是下面的脚本

```
$(list).find("a:not(:Contains(" + filter + "))").parent().slideUp();
$(list).find("a:Contains(" + filter + ")").parent().slideDown(); 
```

我尝试了几种不同的方法，但都没有奏效。！

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:48:45.337

这应该有效。 [http://jsfiddle.net/mpt8T/](http://jsfiddle.net/mpt8T/)

```
$(list).find('li').each(function(){
    if ( $(this).text().indexOf(filter) >= 0 )
        $(this).slideDown();
    else
        $(this).slideUp();
}); 
```

# vbscript - vbs的telnet命令

> ID：15090608
> 
> 赞同：0
> 
> 时间：2013-02-26T13:41:05.587
> 
> 标签：vbscript, telnet

我正在尝试使用以下命令：

```
netsh interface set interface name="Local Area Connection" admin=disabled 
```

像这样通过它：

```
cloner.SendKeys"netsh interface set interface name="Local Area Connection" admin=disabled" 
```

但我得到了错误：预期的语句结束。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:58:06.057

在 VbScript 中，您需要使用 2 个双引号字符来在字符串中包含双引号字符：

```
cloner.SendKeys "netsh interface set interface name=""Local Area Connection"" admin=disabled" 
```

# java - Eclipse 中的 Axis 插件是否使用 AdminClient 来部署 Web 服务？

> ID：15090614
> 
> 赞同：0
> 
> 时间：2013-02-26T13:41:19.067
> 
> 标签：java, eclipse, web-services, deployment, axis

Eclipse 中的 Axis 插件是否使用 AdminClient 来部署 Web 服务？我正在更改 WEB_INF/some/name/space/deploy.wsdd 下的 deploy.wsdd 文件，但没有任何反应。我什至可以在这个文件中部署无效的 XML。部署 Web 服务时如何强制 Eclipse 使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:48:27.110

如果应该使用 deploy.wsdd 部署 Web 服务，那么您必须使用 org.apache.axis.client.AdminClient 类。

```
java org.apache.axis.client.AdminClient deploy.wsdd 
```

# java - 需要的Java模式：基于其他对象的类实例化对象

> ID：15090615
> 
> 赞同：1
> 
> 时间：2013-02-26T13:41:22.490
> 
> 标签：java, spring, design-patterns

在我的应用程序中有代表任务的对象（存储在数据库中）。还有一些对象具有任务的实际实现（一些业务逻辑）——我们称它们为运行器。所以跑步者可以实现以下接口：

```
public interface Runner<T> {
    void run(T task);
} 
```

给定一个任务对象，我需要一些好的方法来创建/获取一个运行器，以便我可以运行它。

我宁愿避免类似的事情

```
if(task instance of DoSomethingTask) {
    return new DoSomethingTaskRunner();
} else if(task instance of DoSomethingElseTask) {
    return new DoSomethingElseRunner();
} 
```

因为每当我创建一个新的跑步者时，我还需要记住在上面的块中添加另一个 if/else。自动获取实现的跑步者会很好

```
Runner<myTask.getClass()> // pseudocode ;) 
```

这样做的一个好方法是让任务有一个“getRunner”方法（添加一个新任务，我需要实现该方法，所以我不会忘记它）但不幸的是，由于项目依赖性，我的任务对象无法知道关于 Runners 的任何信息。

关于如何以一种好的方式做到这一点的任何想法？

顺便说一句：我正在使用 Spring，因此根据传递的任务获取 Runner bean 会更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:53:31.430

你需要一个 RunnerFactory。如果你不想测试任务的类，你可以使用访问者模式，它基本上允许你做你想做的事（`myTask.createRunner()`），但任务和运行器之间没有任何耦合：

```
public interface TaskVisitor<R> {
    R visitTask1(Task1 task1);
    R visitTask2(Task2 task1);
}

public interface Task {
    // ...
    <R> R accept(TaskVisitor<R> visitor);
}

public class Task1 implements Task {
    // ...
    @Override
    public <R> R accept(TaskVisitor<R> visitor) {
        return visitor.visitTask1(this);
    }
}

public class Task2 implements Task {
    // ...
    @Override
    public <R> R accept(TaskVisitor<R> visitor) {
        return visitor.visitTask2(this);
    }
}

public class RunnerFactory implements TaskVisitor<Runner> {
    @Override
    public Runner visitTask1(Task1 task1) {
        return new Task1Runner(task1);
    }

    @Override
    public Runner visitTask2(Task1 task2) {
        return new Task2Runner(task2);
    }
} 
```

现在，要从任务中获取跑步者，您只需要调用

```
RunnerFactory factory = new RunnerFactory();
Runner runner = someTask.accept(factory); 
```

如果您添加一个新的 Task 类型，您将被迫实现它的`accept()`方法，这将迫使您向访问者添加一个新方法，以及一个新的 Runner 实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:19:52.283

如果您遵循 bean 命名约定，例如 runnerBeanName = `Task`class name + 'Runner'，您可以使用`ApplicationContext`as `Runner`factory。

例如：

```
public class RunnerFactory implements ApplicationContextAware {

    private ApplicationContext applicationContext;

    public Runner getRunner(Task task) {
        return (Runner) applicationContext.getBean(task.getClass().getSimpleName() + "Runner");
    }

    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
        this.applicationContext = applicationContext;

    }
} 
```

您可以使用别名将一个跑步者绑定到多个任务。

如果您不喜欢与 Spring 耦合的工厂，您还可以自动装配一个`Map<String, Runner>`将`Runners`通过 bean 名称在上下文中注入的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:52:29.670

嗯...制作地图如下：

```
Map<Class<? extends MyTask>, MyRunner> runners; 
```

然后在 xml 或 @Configuration 添加映射。在方法中`getRunner(Class<? extends MyTask> myTask)`：

```
 MyRunner getRunner(Class<? extends MyTask> myTask){
    return runners.get(myTask);
 } 
```

就这样。整个“ifology”现在被标准地图包裹#get

# javascript - Ember 数据映射

> ID：15090618
> 
> 赞同：0
> 
> 时间：2013-02-26T13:41:25.527
> 
> 标签：javascript, ember.js, ember-data

我正在使用最新版本的 ember-data（修订版 11）和 REST 适配器从我的 API 中提取数据。返回的 JSON 示例如下所示：

```
{ 
    "events": [
        {
            "id": "5118dd8c4c80866ef2000051",
            "title": null,
            "starts_at": 1361901600,
            "ends_at": null,
            "currency": "SEK",
            "cents_door": 4000,
            "cents_advance": null,
            "price_door": "40.00 kr",
            "price_advance": null,
            "age_limit": null,
            "venue_section": "PLAYHOUSE",
            "description": null,
            "url": null,
            "repeats": null,
            "repeats_until": null,
            "venue_id": "nefertiti-jazz-club",
            "act_ids": [ "marias-playhouse" ]
        }
    ]
} 
```

该模型如下所示：

```
App.Event = DS.Model.extend
  title: DS.attr('string')
  startsAt: DS.attr('number')
  endsAt: DS.attr('number')
  currency: DS.attr('string')
  centsDoor: DS.attr('number')
  centsAdvance: DS.attr('number')
  priceDoor: DS.attr('string')
  priceAdvance: DS.attr('string')
  ageLimit: DS.attr('string')
  venueSection: DS.attr('string')
  description: DS.attr('string')
  url: DS.attr('string')
  repeats: DS.attr('string')
  repeatsUntil: DS.attr('string')
  venue: DS.belongsTo('App.Venue')
  acts: DS.hasMany('App.Act') 
```

但是在请求数据时，请求成功完成，但我在控制台中收到此错误：

> 未捕获的错误：断言失败：您的服务器返回了一个带有关键事件的哈希，但您没有它的映射

任何想法这里出了什么问题？

===

更新：根据要求，我正在添加更多的 Ember.js 应用程序。

我的 RESTAdapter 设置：

```
DS.RESTAdapter.registerTransform 'raw',
  deserialize: (serialized) ->
    serialized
  serialize: (deserialized) ->
    deserialized

App.Store = DS.Store.extend
  adapter: DS.RESTAdapter.create
    url: LJ.CONFIG.api.url
  revision: 11 
```

和路线：

```
App.Router.map ->
  this.resource 'events', ->
    this.route 'new'
  this.resource 'event', path: '/events/:event_id', ->
    this.route 'edit'
  this.resource 'venue', path: '/venues/:venue_id', ->
    this.route 'edit'
    this.resource 'events'
  this.resource 'act', path: '/acts/:act_id', ->
    this.route 'edit'
    this.resource 'events'
  this.route 'search', path: '/search/:term'
  this.route 'doc', path: '/docs/:doc' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:49:25.140

乍一看，响应看起来很完美。

我的猜测是您为错误的请求发送了错误的格式。

这种格式对许多有效`events`，这意味着 a`findAll`或`findQuery`( `GET /events`)

但是，如果您为单个`find`( `GET /events/5118dd8c4c80866ef2000051`)返回此响应，则可能会收到此错误

在这种情况下（当您只获取一个时`event`），您的响应应该如下所示：

```
{
  "event": {
    "id": "5118dd8c4c80866ef2000051",
    "title": null,
    // ... rest of attributes
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:53:24.847

经过大量调试和搜索，Ember.js 似乎还不支持查询字符串参数。我不得不像这样破解我的路线：

```
App.Router.map ->
  this.resource 'events', path: '/events/:country/:region/:city'
  this.route 'eventsNew', path: '/events/new'
  this.resource 'event', path: '/events/:event_id', ->
    this.route 'edit'
  this.resource 'venue', path: '/venues/:venue_id', ->
    this.route 'edit'
    this.resource 'events'
  this.resource 'act', path: '/acts/:act_id', ->
    this.route 'edit'
    this.resource 'events'
  this.route 'search', path: '/search/:term'
  this.route 'doc', path: '/docs/:doc' 
```

这远非完美，但它现在有效。显然查询字符串支持计划在不久的将来发布。

# mysql - 添加“ON DELETE SET NULL”时表创建错误

> ID：15090619
> 
> 赞同：0
> 
> 时间：2013-02-26T13:41:26.993
> 
> 标签：mysql

当我`General 1005, Can't create table`尝试使用`ON DELETE SET NULL`.

我可以使用 ON DELETE RESTRICT 或 CASCADE 设置外键，没有问题

```
ALTER TABLE `users` 
    ADD CONSTRAINT users_domain_id_foreign 
    FOREIGN KEY (`domain_id`) 
    REFERENCES `domains` (`id`) 
    ON DELETE RESTRICT 
    ON UPDATE CASCADE 
```

但是我需要它在删除时设置 null 但这不起作用。`ON DELETE SET NULL`如上所述设置外键会引发 1005 can't create table 错误。谁能解释为什么这不起作用？

```
ALTER TABLE `users` 
    ADD CONSTRAINT users_domain_id_foreign 
    FOREIGN KEY (`domain_id`) 
    REFERENCES `domains` (`id`) 
    ON DELETE SET NULL 
    ON UPDATE CASCADE 
```

（mySQL 5.5.24，所有表都是InnoDB）

附加：以防万一有人问，`domain_id`是无符号整数并且是索引。引用`id`的是一个自动递增的 id。

# java - java.lang.UnsatisfiedLinkError with JNI and c

> ID：15090620
> 
> 赞同：1
> 
> 时间：2013-02-26T13:41:27.530
> 
> 标签：java, c, java-native-interface

I have seen many examples for a JNI application. I have tried one myself and getting an exception

```
dileepvikram@dileepvikram-System-Product-Name:~/include$ java -Djava.Library.path=. Test
Exception in thread "main" java.lang.UnsatisfiedLinkError: no Test in java.library.path
at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1738)
at java.lang.Runtime.loadLibrary0(Runtime.java:823)
at java.lang.System.loadLibrary(System.java:1028)
at Test.<clinit>(Test.java:9)
Could not find the main class: Test.  Program will exit. 
```

Test.java

```
 public class Test {
   public native void sayHello(int length) ;
   public static void main (String args[]) {
   String str = "I am a good boy" ;
   Test h = new Test () ;
   h.sayHello (str.length() ) ;
  }
  static {
    System.loadLibrary ( "Test" ) ;
  }
 } 
```

I have compiled he code and created a Test.h with the code

```
javah -jni Test 
```

Test.c

```
#include "Hello.h"
#include<stdio.h>
#include "jni.h"

JNIEXPORT void JNICALL Java_hello_sayHello
  (JNIEnv *env, jobject object, jint len) {
  printf ( "\nLength is %d", len ); }
void main()
{
    printf("\nHello World\n");

} 
```

Then I have compiled the c code with the command

```
gcc Test.c -o libTest.so 
```

and then tried running the java class with the command

```
java -Djava.library.path=. Test 
```

And I am getting the exception

```
dileepvikram@dileepvikram-System-Product-Name:~/include$ java -Djava.Library.path=. Test
Exception in thread "main" java.lang.UnsatisfiedLinkError: no Test in java.library.path
at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1738)
at java.lang.Runtime.loadLibrary0(Runtime.java:823)
at java.lang.System.loadLibrary(System.java:1028)
at Test.<clinit>(Test.java:9)
Could not find the main class: Test.  Program will exit. 
```

I have tried a lot ,to find the issue,any help is appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:43:35.007

First of all, your class is called `Test`, not `hello`. So your function should be:

```
JNIEXPORT void JNICALL Java_Test_sayHello(JNIEnv *env, jobject object, jint length) 
```

Also, when compiling the source, use `-shared` and `-fPIC` to have gcc compile a shared object (rather than an executable):

```
gcc Test.c -shared -fPIC -o libTest.so 
```

Compiling as a shared object also means that you can remove the `main` function from `Test.c`, which shouldn't be there in the first place.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T08:24:03.593

.export LD_LIBRARY_PATH =., thus setting the library path for the current directory, the Java files to find the so.

# html - 如果 action="" 会发生什么？

> ID：15090624
> 
> 赞同：0
> 
> 时间：2013-02-26T13:41:38.010
> 
> 标签：html, forms

这是我来自 smarty 模板的代码片段。我不明白点击提交按钮后数据去了哪里？谁能帮我吗。提前致谢。

```
<form action="" name="manage_News" method="post" enctype="multipart/form-data">  
    |
    |
    |
    |
    |
<input type="submit" name="submit" value="{$submit_value}" class="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:44:31.647

请求被发送到当前 url。即显示表单的页面。

# ios - 构建 YouTube 应用 (Webapp)

> ID：15090626
> 
> 赞同：0
> 
> 时间：2013-02-26T13:41:38.933
> 
> 标签：ios, objective-c, youtube

我如何构建 YouTubeapp 例如：UITableView 显示 YouTube 主页，如官方 YouTube 应用程序和 UIImage 显示视频照片怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:47:09.653

按照这个[分步教程](http://www.touch-code-magazine.com/how-to-make-a-youtube-app-using-mgbox-and-jsonmodel/)做你想做的事。你可以从[github下载他们的源代码](https://github.com/JSONModel/YouTubeBrowserDemo)

# php - 如何从mysql实现或切换到PDO

> ID：15090642
> 
> 赞同：-1
> 
> 时间：2013-02-26T13:42:20.877
> 
> 标签：php, mysql, pdo

就我而言，我正在建立一个网站并从 mysql 开始。您如何使用 PDO API 而不是 mysql API 编写网站代码？PDO中mysql命令的等价物是什么？

例如：

```
$query = mysql_query(INSERT INTO users Values ('','$un','$fn','$ln','$em','$pswd','d','0')"); 
```

`''`当您拥有and时，正确的 PDO 语法是什么`'0'`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:50:31.207

mysql_connect.inc.php

```
$db = new PDO('mysql:host=localhost;dbname=socialnetwork', 'root', 'abc123'); 
```

然后，在任何有 mysql_query 的地方，都需要使用[PDO 查询方法](http://www.php.net/pdo)。我将展示一个示例：

索引.php

```
// instead of:
$u_check = mysql_query("SELECT username FROM users WHERE username='$un'");

// use:
$statement = $db->prepare('SELECT username FROM users WHERE username = :username');
if ($statement->execute(array(':username' => $un))) {
  // query succeeded
  if ($statement->rowCount() > 0){
    // user exists
  }
} 
```

这只是`mysql_*`用 PDO 语句替换并使用该 API 的问题。

基本概要：

*   `$db`是您与数据库的连接。
*   `$db->prepare()`生成一个新的[`PDOstatement`](http://www.php.net/manual/en/class.pdostatement.php)然后你可以：
    *   用于[`$statement->bindParam()`](http://www.php.net/manual/en/pdostatement.bindparam.php)设置查询参数（也可以直接发送到`execute()`）
    *   用于[`$statement->execute()`](http://www.php.net/manual/en/pdostatement.execute.php)使其调用数据库，以及
    *   使用`$statement->`[`fetch()`](http://www.php.net/manual/en/pdostatement.fetch.php)// *others()*[`fetchAll()`](http://www.php.net/manual/en/pdostatement.fetchall.php)从该查询中获取信息。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:56:11.407

> mysql [ext] 具有重大的安全漏洞

不，它没有。
Mysql ext 与使用它的开发人员一样好或一样坏。
但是没有什么比得上“重大安全漏洞”了。

所以，有一个快速的解决方法：只要你**只在查询中添加引用的字符串**，并且总是正确地格式化它们（使用 mysql_real_escape_string）——你就很安全了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:59:38.077

您发布的大部分代码都不需要更改，但以下内容除外：

mysql_connect.inc.php（新的连接字符串）和任何你调用'mysql_query'的地方

您需要一个包装器类（试试这个 - [PDO 包装器](http://www.phpclasses.org/package/5997-PHP-Database-access-abstraction-layer.html)）将直接 sql 转换为准备好的语句*

# gwt - 可以在运行时禁用 GWT 入口点吗？

> ID：15090644
> 
> 赞同：1
> 
> 时间：2013-02-26T13:42:28.460
> 
> 标签：gwt, entry-point

在我的 GWT 2.5 应用程序中，我有两个入口点。EntryPoint A 是主应用程序，EntryPoint B 提供了我的应用程序的小部件版本。

根据我提供给容器的启动参数，我想启用/禁用 EntryPoint B。我该如何实现？我知道如何在编译期间通过从我的 *.gwt.xml 文件中删除对应的声明来完全禁用 EntryPoint。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:08:44.727

一个 GWT 应用程序只能有一个入口点。因此，您可以创建 2 个容器，例如 ContainerA 和 ContainerB，而不是 2 个应用程序。在 Entrypoint 的 onModuleLoad 方法中，您执行 RPC 调用以获取 Container 决定参数。并根据您所做的参数

```
public void onModuleLoad()
{ 
      getRPCService.getStartUpParameter( AsyncCallBack<Parameter>
      { 
             public void onFailure()
             {
             }

             public void onSuccess(Parameter parameter)
             {
                   if( ContainerARequired( parameter ) )
                   {
                          RoolLayoutPanel.get().add( ContanerA )
                   }
                   else
                   {
                          RoolLayoutPanel.get().add( ContanerB )
                   }
             }
      });
} 
```

使用这种方法，您的 js 大小会增加。因此，使用代码拆分和运行异步概念将大 js 文件拆分为较小的文件。有了这个，您可以只将所需的 js 加载到浏览器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:09:30.887

似乎您可以创建两个模块，每个模块都提供不同的入口点。两者都将从通用逻辑模块继承。然后每个都有一个不同的 boostrap JavaScript URL（.nocache.js）。缺点是这些脚本与浏览器完全不同，因此如果您在小部件和完整版本之间切换，则没有缓存优势。

您还可以在入口点方法中进行简单的测试，是否应该执行入口点 - 如果没有，则返回。例如，您可以检查预期的容器元素是否存在于 DOM、URL 或其他任何内容中。如果在单个模块中执行两个入口点，则没有太大问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:53:33.663

在你的`gwt.xml`

```
<define-property name="disableEntryPoint" values="true,false" />

<!-- Provide a default -->
<set-property name="alternateFeatures" value="false" />

<replace-with class="com.example.EntryPoint1">
  <when-type-is class="com.example.EntryPoint2" />
  <when-property-is name="disableEntryPoint" value="false" />
</replace-with> 
```

请参阅：[http ://code.google.com/p/google-web-toolkit/wiki/ConditionalProperties](http://code.google.com/p/google-web-toolkit/wiki/ConditionalProperties)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T08:54:37.807

也许，最好有一个应用程序拥有一个入口点。结果，您将拥有 2 个具有自己的上下文和访问路径的模块：

*   */入口A*
*   */入口B*

还有两个文件：

*   *入口A.gwt.xml*
*   *入口B.gwt.xml*

这些将包括*Application.gwt.xml中的常见内容*

# javascript - 用 span 或 div 或 p 替换锚标记

> ID：15090647
> 
> 赞同：2
> 
> 时间：2013-02-26T13:42:35.800
> 
> 标签：javascript, jquery

我有一个功能，一旦用户单击链接，就会发出 ajax 请求，如果发出请求，则链接不应再可点击。

这是我用来完成此任务的方法：

```
$('a[id^="rsvp_"]').click (function (e) {
    e.preventDefault();
    $.post(
        $(this).data('url'),
        function(data) {
            $(this).replaceWith(function(){
                alert (data);
                return $("<span>" + data + "</span>");
            });
        }
    );
})  ; 
```

此代码将适用于任何以`rsvp_`. 一切似乎都有效，包括`alert(data)`锚标签仍然存在。我只是想将锚标签替换为其他东西。

HTML 片段如下所示

```
<a id="rsvp_${event.id}" href="#" data-url="${createLink(action: 'myaction', params: ["eventid": event, "userid": user])}">Click to RSVP</a> 
```

**更新**

请注意，我在页面上有多个这样的链接，即`rsvp_1, rsvp_2, rsvp_3 ..etc`

我只想删除用户单击的链接上的锚标记。并非页面上的所有链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:56:40.753

尝试这个：

```
$('a[id^="rsvp_"]').click(function (e) {
    e.preventDefault();
    $.ajax($(this).data('url'), {
        method: 'POST',
        context: this
    }).done(function(data) {
        $(this).replaceWith("<span>" + data + "</span>");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:49:00.213

尝试这个

```
$(e.target).replaceWith(function(){
        return $("<span>" + $(this).html() + "</span>");
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T13:56:50.550

您可以通过使用 jquery .one 方法来实现相同的目的，该方法确保每个选定的元素只能单击一次。

在这种情况下，如果可能的话，我会亲自将所有锚标签默认更改为 p 或 spans，然后在选定的元素上单击一次，例如：

```
$('p[id^="rsvp_"]').one ("click", function (e) {
    e.preventDefault();
    $.post(
        $(this).data('url'),
        function(data) {
            $(this).replaceWith(function(){
                alert (data);
                return $("<span>" + data + "</span>");
            });
        }
    );
}); 
```

[更多在这里](http://api.jquery.com/one/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:46:25.437

```
$("a").removeAttr("href"); 
```

更好地删除锚的href ..或

```
 $(this).replaceWith(function(){
      return $("<span>" + $(this).html() + "</span>");
  }); 
```

# sql - 从 SQL 中选择多行到子查询中的一行

> ID：15090655
> 
> 赞同：4
> 
> 时间：2013-02-26T13:42:57.087
> 
> 标签：sql, sql-server, coalesce

我有这样的查询：

```
DECLARE @razem VARCHAR(MAX);

SELECT  Ordering.orderID , 
        Document.number, 
        (User_info.name  +' '+ User_info.surname),   
        Ordering.dateStart, 
        Ordering.dateEnd ,   
        (
            select   COALESCE(' ',@razem)+sell_type.name as r  
            from    Ordering_sell_type, Sell_type 
            where   orderID = Ordering.orderID and 
                    Ordering_sell_type.sell_typeID = sell_type.sell_typeID
        ) podz
FROM    Ordering, User_info, Product_Document, Document, Document_type   
WHERE   Ordering.orderID = Product_document.orderID  
        AND Document.documentID = Document_type.documentID  
        AND Document.documentID = Product_document.documentID  
        AND  Ordering.userID = User_info.userID   
        AND Ordering.isClosed = 1 AND Document_type.typeID = 1   
GROUP   BY  Document.isitfiscal, Document.refDocID, 
            Document.number, Ordering.orderID, User_info.name, 
            User_info.surname, Ordering.dateStart, 
            Ordering.dateEnd , Ordering.isCLosed  
ORDER   BY Ordering.dateEnd 
```

在那个 COALESCE 函数中，我想获取所选订单的所有支付类型 - 例如，orderID 123 有 payTypes = Card、Cash，orderID 有 payTypes = Cash。

问题是我想把它放在一个简单的行中作为主查询的最后一行，比如：orderID、Document.number、UserInfo.name+surname、dateStart、dateEnd、->card、cash<- 但是在尝试像上面这样的查询之后我得到了错误：

```
Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression. 
```

因为它返回不止一行。是否有可能在子查询中获取支付类型并作为一个字符串返回？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T13:54:18.860

根据您使用的语法，我假设您使用的是 SQL-Server，因此您可以使用 SQL-Servers XML 扩展来连接字符串。

```
SELECT  Ordering.orderID, 
        Document.number, 
        [UserName] = User_info.name  +' '+ User_info.surname,   
        Ordering.dateStart, 
        Ordering.dateEnd,
        [podz] = STUFF((    SELECT  DISTINCT ' ' + SellType.Name
                            FROM    Ordering_Sell_Type
                                    INNER JOIN Sell_Type
                                        ON Sell_Type.sell_typeID = Ordering_Sell_Type.sell_typeID
                            WHERE   Ordering.OrderID = Ordering_SellType.OrderId
                            FOR XML PATH(''), TYPE
                        ).value('.', 'NVARCHAR(MAX)'), 1, 1, '')
FROM    Ordering
        INNER JOIN User_Info
            ON Ordering.UserID = User_Info.UserID
        INNER JOIN ProductDocument
            ON Ordering.OrderID = Product_Document.OrderID
        INNER JOIN Document
            ON Document.DocumentID = Product_Document.DocumentID
        INNER JOIN Document_Type
            ON Document_Type.DocumentID = Document.DocumentID
WHERE   Ordering.IsClosed = 1
AND     Document_Type.TypeID = 1
ORDER BY Ordering.dateEnd; 
```

注意我已经用 ANSI 92 替换了你所有的 ANSI 89 连接，因为这是更现代的语法，并且被[普遍接受](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)为更易读的选项（我说普遍接受，因为它当然是个人喜好，还有一些情况下Oracle 更好地优化了 ANSI89 连接）。

**编辑**

看到您的数据重复来自 Product_Document 表，您可以使用以下方法删除它们：

```
SELECT  Ordering.orderID, 
        Document.number, 
        [UserName] = User_info.name  +' '+ User_info.surname,   
        Ordering.dateStart, 
        Ordering.dateEnd,
        [podz] = STUFF((    SELECT  DISTINCT ' ' + SellType.Name
                            FROM    Ordering_Sell_Type
                                    INNER JOIN Sell_Type
                                        ON Sell_Type.sell_typeID = Ordering_Sell_Type.sell_typeID
                            WHERE   Ordering.OrderID = Ordering_SellType.OrderId
                            FOR XML PATH(''), TYPE
                        ).value('.', 'NVARCHAR(MAX)'), 1, 1, '')
FROM    Ordering
        INNER JOIN User_Info
            ON Ordering.UserID = User_Info.UserID
        INNER JOIN 
        (   SELECT  DISTINCT OrderID, DocumentID
            FROM    Product_Document
        ) Product_Document
            ON Ordering.OrderID = Product_Document.OrderID
        INNER JOIN Document
            ON Document.DocumentID = Product_Document.DocumentID
        INNER JOIN Document_Type
            ON Document_Type.DocumentID = Document.DocumentID
WHERE   Ordering.IsClosed = 1
AND     Document_Type.TypeID = 1
ORDER BY Ordering.dateEnd; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:56:33.673

这篇 SO 文章/答案很好地讨论了将一系列 varchar 行汇总/聚合到单个列中的不同方法，就像您在谈论[https://stackoverflow.com/a/2410524/283895](https://stackoverflow.com/a/2410524/283895)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:59:26.820

是的。但这取决于您使用的 RDBMS。

为了在一行中生成数据列表，您必须使用特定于您使用的 RDBMS 的分析函数，或者编写您自己的特定函数。

在 oracle 中：WM_CONCAT、LISTAGG 或 XMLAGG 函数会将共享相似数据的多行转换为一个列表。

Coalese 一次只工作一排，不合并行。

*   ORACLE：WM_CONCAT、LISTAGG、XMLAGG
*   SQL 服务器：XML 路径
*   我的 SQL：Group_Concat

使用/语法各不相同。所以我建议根据您的 RDBMS 搜索这些术语。

# opengl-es - WebGL / OpenGL 中使用着色器的纹理驱动粒子

> ID：15090657
> 
> 赞同：1
> 
> 时间：2013-02-26T13:43:00.547
> 
> 标签：opengl-es, webgl, shader, vertex-shader

我正在尝试完成以下任务：

*   我有一个 NxM 点的网格（计划）
*   我有一个纹理，每个像素代表一个位置 X，Y 的力场
*   我想使用力场纹理（和着色器）迭代更新初始网格

我想我们可以很容易地使用“几何着色器”来做到这一点，但是这些在 WebGL 中不存在。因此，我如何使用 GLSL 驱动程序来更新网格中顶点的位置？据我了解，常规的顶点着色器确实在一次通过中将源转换为其他东西，现在有没有办法在下一次迭代期间将此输出反馈回着色器？

[编辑] 我现在可以看到的一种可能方法是使用片段着色器，然后可以将结果存储在纹理中，我可能会在下一步中重新注入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:30:11.847

是的，使用片段着色器。将网格的状态存储在纹理中（为方便起见，浮点纹理，尽管这需要扩展），并使用片段着色器计算下一次迭代的新纹理。然后在实际绘制时，顶点着色器读取纹理以确定要显示的顶点坐标。

我已经[使用这种技术实现了一个粒子系统](https://github.com/kpreid/gltoyjs/tree/master/effects/particles)。这是进行状态更新的片段着色器，因此您可以了解它是如何工作的。对于每个粒子，一对相邻的纹素（提供 8 个浮点数）存储它的位置和速度。

```
#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D uState;
uniform float uResolution;
uniform float uDT;
uniform float uHarmonicAccel;

vec4 lookup(float offset) {
  return texture2D(uState, (gl_FragCoord.xy + vec2(offset, 0.0)) / uResolution);
}

void main(void) {
  bool updatingPosition = mod(gl_FragCoord.x, 2.0) < 1.0;
  vec4 posp, velp;
  if (updatingPosition) {
    posp = lookup(0.0);
    velp = lookup(1.0);
  } else {
    posp = lookup(-1.0);
    velp = lookup(0.0);
  }
  vec3 pos = vec3(posp);
  vec3 vel = vec3(velp);

  // velocity update is applied to position as well
  vel += uHarmonicAccel * uDT * normalize(pos);

  if (updatingPosition) {
    gl_FragColor = vec4(pos + uDT * vel, posp[3]);
  } else {
    gl_FragColor = vec4(vel, velp[3]);
  }
} 
```

# jquery - 基于 jquery 的消息验证响应

> ID：15090659
> 
> 赞同：0
> 
> 时间：2013-02-26T13:43:03.153
> 
> 标签：jquery, jquery-validate

有没有办法根据验证结果格式化消息。我有以下

```
jQuery.validator.addMethod("feed", function(value, element) {
    var retVal = true;
            //Ajax call here which returns 
            var retMsg = ajax()

            if(retMsg == "one") {
               //Show error as "not valid url"
            } else if(retMsg == "2") {
               //Show error as "not reachable url"
            }
    return retVal;
}, << CUSTOMIZE MESSAGE HERE BASED ON Validation OUTCOME >>); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:26:25.897

对于 Validate 插件中的每个方法，规则只是通过/失败。当它们失败时，您会收到一条消息；当他们通过时，没有消息。 `return true`在您的自定义方法上并且您通过了（没有消息）......`return false`并且您失败了（消息）。

在插件中，默认情况下，“复合规则”使用多种方法处理。下面的“复合规则”用*四种方法*处理，例如......

```
rules: {
    myfield: {
        required: true,
        digits: true,
        minlength: 5,
        email: true
    }
} 
```

但是，您正试图用一种方法来制定“复合规则”。

因此，合乎逻辑的解决方案是您只需像插件一样进行操作；有两种独特的自定义方法。我更喜欢这种方法，因为我们根本不必篡改消息放置。这就是插件在内部处理所有“复合”规则的方式。

```
jQuery.validator.addMethod("feedvalid", function(value, element) {
    //Ajax call here which returns 
    var retMsg = ajax()

    if (retMsg == "one") {
        return false; // failed, show message
    } else {
        return true;
    }
}, "not a valid url");

jQuery.validator.addMethod("feedreach", function(value, element) {
    //Ajax call here which returns 
    var retMsg = ajax()

    if (retMsg == "2")  {
        return false; // failed, show message
    } else {
        return true;
    }
}, "not a reachable url"); 
```

**模拟：http: [//jsfiddle.net/At555/](http://jsfiddle.net/At555/)**

在输入字段中键入 a`one`或 a以“模拟”您的 ajax。`2`

* * *

**“丑陋”的方法：**

或者，您必须将自己的消息容器与插件控制的默认容器分开创建和放置。您还需要在每次字段通过验证时清除消息的逻辑。这个解决方案有效，但它非常非常规，所以我不喜欢它。

```
jQuery.validator.addMethod("feed", function(value, element) {
    //Ajax call here which returns 
    var retMsg = ajax()

    if (retMsg == "one") {
        $('#myErrContainer').text("not valid url");
        return false; // failed
    } else if (retMsg == "2") {
        $('#myErrContainer').text("not reachable url");
        return false; // failed
    } else {
        $('#myErrContainer').text();
        return true; // passed
    }
}, ""); 
```

**模拟：http: [//jsfiddle.net/vnpG4/](http://jsfiddle.net/vnpG4/)**

在输入字段中键入 a`one`或 a以“模拟”您的 ajax。`2`

# bash - 在脚本中执行操作 IFF 指定文件在 7 天内已被修改

> ID：15090660
> 
> 赞同：1
> 
> 时间：2013-02-26T13:43:06.703
> 
> 标签：bash, conditional-statements

我要做的是将名为 myFile 的文件从目录 A 复制到目录 B。在此之后，我对刚刚复制到目录 B 的文件执行一些操作。这工作正常。但是，如果目录 A 中的文件在过去 7 天内已被修改，我希望脚本运行所有操作。否则它应该什么都不做。所以基本上我想要：

```
#!/bin/sh

if ((modification date of myFile in dir A) >= (current date minus 7 days))

    DO STUFF

else

    DO NOTHING

end 
```

因此，要执行的操作已经启动并正在运行。我只需要上面伪代码中描述的条件结构。有人知道如何为 bash 脚本构建它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:49:44.290

您可以通过编写以下代码进行测试：

```
filepath="your/file/path"
if [[ $(find ${filepath} -mtime -7 | wc -l) ]]; then
    # modified within past 7 days
else
    # not modified within the last 7 days
fi 
```

来自`man find`：

```
-mtime n
       File's data was last modified n*24 hours ago.  See the  comments
       for -atime to understand how rounding affects the interpretation
       of file modification times.

Numeric arguments can be specified as

+n     for greater than n,

-n     for less than n,

 n     for exactly n. 
```

# java - 存储异常实例并重用它是否安全？

> ID：15090664
> 
> 赞同：21
> 
> 时间：2013-02-26T13:43:14.023
> 
> 标签：java, exception, exception-handling

**是否安全：**

```
public class Widget {

    private static final IllegalStateException LE_EXCEPTION
            = new IllegalStateException("le sophisticated way");

    ...

   public void fun() {
      // some logic here, that may throw
      throw LE_EXCEPTION;
   }

   ....
} 
```

1.  保留一个异常实例
2.  在需要时使用它（投掷）

`new`而不是每次都抛出异常？

**我有兴趣是否安全**

安全我的意思是：没有内存损坏，JVM 没有抛出额外的异常，没有类丢失，没有加载错误的类（...）。注意：异常将通过网络（远程）抛出。

其他问题（*可读性、保存实例的成本*）并不重要。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-26T13:53:39.990

这取决于您对“安全”的定义。该异常会产生误导性的堆栈跟踪，我不会称之为“安全”。考虑：

```
public class ThrowTest {
    private static Exception e = new Exception("t1"); // Line 2

    public static final void main(String[] args) {
        ThrowTest tt;

        tt = new ThrowTest();
        try {
            tt.t1();
        }
        catch (Exception ex) {
            System.out.println("t1:");
            ex.printStackTrace(System.out);
        }
        try {
            tt.t2();                                  // Line 16
        }
        catch (Exception ex) {
            System.out.println("t2:");
            ex.printStackTrace(System.out);
        }
    }

    private void t1() 
    throws Exception {
        throw this.e;
    }

    private void t2() 
    throws Exception {
        throw new Exception("t2");                    // Line 31
    }
} 
```

有这个输出：

```
$ java ThrowTest
t1：
java.lang.Exception: t1
    在 ThrowTest.<clinit>(ThrowTest.java:2)
t2：
java.lang.Exception: t2
    在 ThrowTest.t2（ThrowTest.java:31）
    在 ThrowTest.main(ThrowTest.java:16)

```

请注意`t1`，在第一个测试用例的堆栈跟踪中，该方法是如何完全缺失的。根本没有有用的上下文信息。

现在，您*可以*使用[`fillInStackTrace`](http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html#fillInStackTrace%28%29)在投掷前填写该信息：

```
this.e.fillInStackTrace();
throw this.e; 
```

...但这只是为自己工作（有时您*会*忘记工作）。根本没有任何好处。并不是所有的例外都允许你这样做（一些例外使堆栈跟踪只读）。

* * *

您在评论的其他地方已经说过，这是为了避免“代码重复”。你最好**有**一个异常生成器功能：

```
private IllegalStateException buildISE() {
    return new IllegalStateException("le sophisticated way");
} 
```

（`static final`如果你愿意，可以。）

然后像这样扔它：

```
throw buildISE(); 
```

这避免了代码重复，而不会误导堆栈跟踪和不必要的异常实例。

以下是适用于上述内容的内容：

```
public class ThrowTest {

    public static final void main(String[] args) {
        ThrowTest tt;

        tt = new ThrowTest();
        try {
            tt.t1();                                   // Line 8
        }
        catch (Exception ex) {
            System.out.println("t1:");
            ex.printStackTrace(System.out);
        }
        try {
            tt.t2();                                   // Line 15
        }
        catch (Exception ex) {
            System.out.println("t2:");
            ex.printStackTrace(System.out);
        }
    }

    private static final Exception buildEx() {
        return new Exception("t1");                    // Line 24
    }

    private void t1() 
    throws Exception {
        throw buildEx();                               // Line 29
    }

    private void t2() 
    throws Exception {
        throw new Exception("t2");                     // Line 34
    }
} 
```

```
$ java ThrowTest
t1：
java.lang.Exception: t1
    在 ThrowTest.buildEx(ThrowTest.java:24)
    在 ThrowTest.t1（ThrowTest.java:29）
    在 ThrowTest.main(ThrowTest.java:8)
t2：
java.lang.Exception: t2
    在 ThrowTest.t2（ThrowTest.java:34）
    在 ThrowTest.main(ThrowTest.java:15)
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-26T16:28:10.430

它是不安全的，除非异常是不可变的（即 enableSuppression=writableStackTrace=false）。

如果一个异常不是不可变的，它可以被一个捕获器修改——设置一个新的堆栈跟踪或添加一个抑制的异常。如果有多个捕手试图修改异常，就会出现混乱。

令人惊讶的是，`Throwable`它实际上是线程安全的，因为天知道。所以如果一个异常被多个线程修改，至少不会出现灾难性的故障。但是会出现逻辑故障。

如果应用程序不断向这个长期存在的异常添加抑制的异常，内存泄漏也是可能的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T13:52:57.840

不这样做的另一个原因是堆栈跟踪不合适。

无论您在代码中的哪个位置抛出异常，在打印其堆栈跟踪时，它都会显示初始化异常的行而不是抛出异常的行（在这种特殊情况下，而不是预期`Widget.fun()`的堆栈跟踪将包含`Widget.<clinit>`)。

因此，您（或任何使用您的代码的人）将无法确定错误的实际位置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T13:53:25.093

它认为在读取异常的堆栈跟踪时可能会导致问题。当代码抛出异常时堆栈跟踪被填充，但被存储到异常本身的实例中。如果您两次抛出相同的异常实例，我认为这`getStackTrace()`将返回最后一个堆栈跟踪。如果由于某种原因（例如在多线程环境中）异常从代码中的不同位置抛出两次，然后打印出第一次抛出的堆栈跟踪可能是错误的。

由于没有理由重复使用异常的实例，我不建议您这样做。

如果您想将异常用作一种包含附加信息（例如错误消息、错误代码等）的容器，请使用异常是可序列化的事实：在抛出之前克隆它。因此，每次您将抛出唯一的异常实例，但其字段将从预先创建的模板中复制。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-26T22:59:25.103

使用任何错误处理代码都是不安全的。保持简单，保持明显，不要写任何你需要提问的东西。错误处理不会引发额外的错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-26T13:52:03.413

我认为这是错误的，因为它会鼓励您使用异常来描述正常情况，而不仅仅是异常情况。参见 J. Bloch 的 Effective Java 第二版，第 57 项，第 241 页。

此外，您总是在堆中保留一个对象，所以这不是必需的，因为在现代 JVM 中对象创建非常快，而且一旦抛出异常，它可能会很快被垃圾收集。

此外，您的代码可能会变得非常具有误导性，这为一些非常困难的事情增加了很多开销。

# html - 为什么跨度内的 div 是非法的？

> ID：15090666
> 
> 赞同：2
> 
> 时间：2013-02-26T13:43:17.937
> 
> 标签：html

<span> 元素中包含 <div> 元素是不合法的。但是，如果我理解正确，可以通过将 CSS 'display' 属性设置为 'block' 或 'inline' 来使 <span> 像 <div> 一样工作，反之亦然。

如果绕过遏制规则那么容易，那么拥有它们又有什么意义呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:45:22.933

在 span 中包含 div 是非法的，因为 div 是 bloc 元素， span 是 inline 元素。
它与渲染（CSS 显示）无关，但与语义有关。
问问自己，在 span 中有一个 h1 有意义吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:49:51.683

问题是语义之一。一个[Span 元素](http://www.w3.org/html/wg/drafts/html/master/text-level-semantics.html#the-span-element)应该包括[Phrasing Content](http://www.w3.org/html/wg/drafts/html/master/dom.html#phrasing-content-1) - 即文档的文本。

Div[元素](http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-div-element)不是短语内容。它用于内容的逻辑划分。

# meteor - Meteor App 中 Meteor.users 的单独数据库

> ID：15090667
> 
> 赞同：1
> 
> 时间：2013-02-26T13:43:21.407
> 
> 标签：meteor

我有一个 Meteor 应用程序，我想知道是否有一种方法可以将应用程序配置为对用户使用一个 Mongo 数据库，并为其余的应用程序数据使用不同的数据库。这里的目标是最终让多个应用程序共享相同的用户帐户数据库，但每个应用程序都有自己独特的应用程序数据库。Meteor 有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:10:21.970

你试过 Meteor.connect() 吗？它允许您连接到外部 Meteor 应用程序的数据库。

[http://docs.meteor.com/#meteor_connect](http://docs.meteor.com/#meteor_connect)

编辑：我从来没有为用户尝试过（我猜这个 Collection 与“普通”集合有所不同），但我想它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:39:35.613

虽然我很欣赏这个问题的好答案，但目前无法在 Meteor 中完成（截至 0.5.9）。当然，可以修改源代码来实现这样的事情，但我使用 Meteor 是为了避免自己编写所有样板管道代码。希望将来会添加此选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:19:09.260

您可以在流星服务器上使用[mongodb 驱动程序。](https://github.com/mongodb/node-mongodb-native)您可以使用`Meteor.call`. 虽然我从未尝试过它应该可以工作。这也是一个很好的机会来看看[流星的新](http://www.youtube.com/watch?v=kA-QB9rQCq8&feature=youtu.be) [npm 系统](https://github.com/meteor/meteor/tree/engine)。

服务器js

```
var require = __meteor_bootstrap.require;
var mongo = require('mongodb');
var Server = mongo.Server, Db = mongo.Db, BSON = mongo.BSONPure;
var client = new Db('test', new Server("127.0.0.1", 27017, {}), {w: 1})
... 
```

除非您编写自己的方法来检查数据库，否则您不会有反应。

# html - 我想从我的导航栏中突出显示我的按钮请帮帮我

> ID：15090670
> 
> 赞同：0
> 
> 时间：2013-02-26T13:43:28.257
> 
> 标签：html, css, navigation, highlight

我正在尝试使我的导航栏突出显示，我的意思是我必须突出显示我正在浏览的活动页面的按钮。我已经尝试过这种方式，但它没有成功。我有这个 HTML 代码作为我的导航菜单：

```
<code>
<ul class="nav">
    <li class="first">
        <a href="index.htm">Home</a>
    </li>

    <li>
        <a class="hasdropdown" href="collections/catalog/catalog.htm">Catalog</a>                       
    </li>

    <li>                            
        <a class="hasdropdown" href="collections/ocassions/ocassions.htm">Ocassions</a>
    </li>

    <li>
        <a class="hasdropdown" href="collections/specials/specials.htm">Specials</a>
    </li>

    <li>                            
        <a href="pages/plants.htm">Plants</a>                              
    </li>

    <li>
        <a href="pages/exotic.htm">Exotic</a>
    </li>

    <li>
        <a href="pages/contact.htm">Contact</a>
    </li>
</ul> 
```

我也有这个 CSS

```
#header #navblock ul.nav li a:hover {
    background-color: #b23758;
    color: #ffffff;
    border-radius: 4px;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
}

#header #navblock ul.nav li a.active:visited {
    background-color: #b23758;
    color: #ffffff;
    border-radius: 4px;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
}

<br/> 
```

他们就是不成功！请如果有人可以解释如何做对吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:49:00.417

您将要向`.current`当前正在浏览的页面添加一个类。因此，如果用户在主页上：

```
<li class="first">
        <a href="index.htm" class="current">Home</a>
    </li> 
```

然后，根据需要配置`.current`类：

```
.current {
    background-color: #b23758;
    color: #ffffff;
    border-radius: 4px;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
} 
```

参考。 [http://alistapart.com/article/keepingcurrent](http://alistapart.com/article/keepingcurrent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:10:01.753

这很可能会对您有所帮助：http: [//hicksdesign.co.uk/journal/highlighting-current-page-with-css](http://hicksdesign.co.uk/journal/highlighting-current-page-with-css)

基本上，这个想法是您将 id 添加到每个页面，如下所示：

```
<body id="home"> 
```

而且由于您已经将导航作为未排序的列表，因此类似于：

```
<ul id="navlist">
    <li><a href="index.html" id="homenav">Home</a></li>
    <li><a href="products.html" id="prodnav">Products</a></li>
    <li><a href="faq.html" id="faqnav">FAQ</a></li>
    <li><a href="contact.html" id="connav">contact us</a></li>
</ul> 
```

然后可以像这样使用css：

```
body#home a#homenav,
body#products a#prodnav,
body#faq a#faqnav,
body#contact a#connav {
    color: #fff;
    background: #930;
} 
```

它定义了如果 body id="home"，则与 id="homenav" 的链接具有以下样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:51:35.603

如果我了解您想要实现的目标，您应该在活动页面的按钮中添加一个类。

假设您在目录页面上。所以你的链接应该看起来像

```
<li>
    <a class="hasdropdown active" href="collections/catalog/catalog.htm">Catalog<a>                       
</li> 
```

在此示例中，您的链接目录具有“活动”类。现在，你可以为这个类设置你的 css，所以，对于这个按钮：

```
.active {
    background-color: #b23758;
    color: #ffffff;
    border-radius: 4px;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    } 
```

当然，这意味着您网站的每个页面都必须在相应链接上显示一个带有“活动”类的菜单。

# wso2 - WSO2 WS 基于 Greg v 4.5.2 安装与 ESB v 4.5.1

> ID：15090672
> 
> 赞同：0
> 
> 时间：2013-02-26T13:43:35.870
> 
> 标签：wso2, wso2esb, wso2greg

早些时候，我们使用安装在 ESB 中的 Governance Registy 和 Web 服务安装选项，它工作得非常好。但是在迁移到 Greg v4.5.2 和 ESB v4.5.1 之后，这已经停止工作，并且使我们遇到了严重的问题，因为由于挂载无法正常工作，我们所有的服务都没有得到部署。

我已按照链接 [http://docs.wso2.org/wiki/display/Governance453/Remote+Instance+and+Mount+Configuration+Details](http://docs.wso2.org/wiki/display/Governance453/Remote+Instance+and+Mount+Configuration+Details)中给出的说明进行操作， 我们选择了第三个选项，即基于 WebService 的远程实例配置

但是在完成上述操作并启动 ESB 服务器之后，它会出现关于各种传输未正确启动以及使用 wsdls 和存储在 Greg 中的模式的服务未启动的巨大错误，并抱怨资源流为空。

如果有人可以建议前进的方式，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:36:47.787

这里提到的基于 Webservice(WS-mount) 的挂载问题是一个错误 [1]。我们将能够为下一个 Governance Registry 版本 (4.6.0) 应用此修复程序。

[1] [https://wso2.org/jira/browse/REGISTRY-1607](https://wso2.org/jira/browse/REGISTRY-1607)

谢谢和问候， 阿吉斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:10:51.393

您能否提及 G-Reg 和 ESB 的早期版本？

但是，如果您要从 G-Reg 4.1.1 迁移到 G-Reg 4.5.2，

**i) 首先您需要迁移您的 G-Reg 数据库。**

**ii) 然后您需要迁移配置。**

谢谢

阿吉特

# file - 如何更新批处理文件中定义的变量

> ID：15090673
> 
> 赞同：-1
> 
> 时间：2013-02-26T13:43:46.957
> 
> 标签：file, batch-file

以下是我的批处理文件中的代码：

```
@echo off & setlocal
set ver1="doc pic\ABC\" 
set ver2="C:\Users\elmo\Desktop\error4.png"
E:
cd %ver1%
copy %ver2% 
```

问题是我没有办法从我的程序中更新这些变量；有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:55:41.580

如果您使用该`set /P`选项，您可以将变量设置为提示的结果。

```
set /P ver1=Enter path: 
```

这将允许（强制）用户输入变量。具体来说，会提示用户

```
Enter path: 
```

然后他们输入的任何内容都将被放入ver1中。

请注意，在此示例中，用户将键入带有空格的内容。你会更安全`%ver1`地使用语音标记，所以它是`"%ver1"`。

* * *

要从外部文件加载，请尝试`set /P ver1= <file.txt`. 您可能需要检查文件是否存在`if exist file.txt (set /P ver1= <file.txt)`

如果您想允许用户在编辑之前更改文件，只需调用 a `pause`before 并提示用户更改所需的文本文件。

例如，如果您希望用户查看设置了哪些路径以便他们可以先更改它们，您可以尝试...

```
@echo off
echo "Destination path (ver1.txt): " <ver1.txt
echo "Source path (ver2.txt): " <ver2.txt
echo "Please change the values in the text files as required."
pause
set /P ver1= <ver1.txt
set /P ver2= <ver2.txt 
```

自从我实际上做了这样的事情已经有一段时间了，所以我可能需要检查一下，但我相信这应该可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:49:10.947

进程的环境变量在进程启动时从父进程填充。之后就无法在正在运行的进程中更改或添加变量。

因此，如果您有批处理文件并从中运行另一个程序，然后尝试从该程序更改批处理文件的环境变量，那是不可能的。

如果您尝试相反的方式——即从另一个程序启动批处理文件，那么您可以通过在程序中首先设置它们来影响批处理文件的环境变量。

编辑：正如您所说，您有一个包含所需信息的文本文件。最简单的方法是，如果该文本文件采用另一个批处理文件的外观，例如：

```
set ver1=foo
set ver2=bar 
```

在这种情况下，您可以将其“包含”

```
call foobar.cmd 
```

如果它看起来像这样：

```
ver1=foo
ver2=bar 
```

`for /f`您可以通过解析它并为每一行运行一个`set`命令来使其工作类似：

```
for /f "delims=" %%L in (foobar.txt) do set "%%L" 
```

如果它看起来像这样：

```
foo
bar 
```

然后需要做更多的工作（因为您只是隐含地知道第一行是`ver1`第二行`ver2`）：

```
for /f "delims=" %%L in (foobar.txt) do (
  if not defined ver1 (
    set "ver1=%%L"
  ) else if not defined ver2 (
    set "ver2=%%L"
  )
) 
```

现在，如果在解析该文本文件之前未定义`ver1`并且`ver2`未定义，则此方法有效。如果您只需要更新它们的值，它会变得更加混乱：

```
for /f "delims=" %%L in (foobar.txt) do (
  if not defined ver1updated (
    set "ver1=%%L"
    set ver1updated=1
  ) else if not defined ver2updated (
    set "ver2=%%L"
    set ver2updated=1
  )
)
set ver1updated=
set ver2updated= 
```

尽管在您的特定情况下，您可以利用两种方法将文件读入变量，并且它们在处理多行的方式上有所不同：

```
set /p ver1=<foobar.txt
for /f "delims=" %%L in (foobar.txt) do set ver2=%%L 
```

第一种方法只存储文件的第一行，而第二种方法将更新文件中每一行的变量，保留*最后*一行`ver2`的值。因为只有两行开头，所以也可以选择将它们分开。但是在编写批处理文件时，我通常尽量不要混合成语或至少提供注释来解释。

 *如您所见，它可能会变得有点复杂。一般来说，对于此类问题，如果您准确说明*可以*生成什么格式（如果有限制）或您的输入和输出格式到底是什么（您也可以编辑您的问题 :-)），将会有所帮助。*

# java - 如何设置列表到 HQL 参数？

> ID：15090682
> 
> 赞同：2
> 
> 时间：2013-02-26T13:43:59.387
> 
> 标签：java, hibernate, hql

这是我要执行的代码：

```
Query query = getSession().createQuery("select count(*),uv.voter.gender from UserVoter uv  where " +
            "  uv.voter.age between "+startAge+" and "+endAge+" and uv.hamlet.hamletId = :hamletId  group by uv .voter.gender  ") ;
    //query.setParameter("publicationDateId",publicationDateId);
    query.setParameter("hamletId", hamletId);
      return query.list(); 
```

以下是 start 和 end 参数的情况：

```
18-25
25-35
35-45 
```

对于这 3 种情况，我必须运行 3 次查询。对于上述三种情况，我想在一次查询中获得结果。我有一个想法，`new map()` 但我该怎么做？

输出应映射到一对输入参数，例如：

`18-25,55,male 18-25,56,female 25-35,44,male..`

在mysql中我实现了这个

```
select concat(18,'to',25),count( v.voter_id),v.gender from voter v join  user_voter u on v.voter_id = u.voter_id
where v.age between 18 and 25 and u.hamlet_id=10 group by v.gender
union
select concat(26,'to',35),count( v.voter_id),v.gender from voter v join  user_voter u on v.voter_id = u.voter_id
where v.age between 26 and 35 and u.hamlet_id=10 group by v.gender
union
select concat(36,'to',50),count( v.voter_id),v.gender from voter v join  user_voter u on v.voter_id = u.voter_id
where v.age between 36 and 50 and u.hamlet_id=10 group by v.gender
union
select concat(51,'to',200),count( v.voter_id),v.gender from voter v join  user_voter u on v.voter_id = u.voter_id
where v.age between 51 and 200 and u.hamlet_id=10 group by v.gender; 
```

但是如何在不使用本机 sql 的情况下在休眠中获得这种效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:13:53.037

您无法通过对数据库的一次调用来做您想做的事情。如果您真的只想访问数据库一次，那么我认为您最好的选择是：

```
select uv.voter.age, uv.voter.gender, count(*) from UserVoter uv where uv.hamlet.hamletId = :hamletId group by uv.voter.age, uv.voter.gender 
```

这会给你 (18,male,5) (18,female,4) (19,male,3) (19,female,6) ...

然后，您可以以编程方式对结果进行分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:50:52.227

首先，您还应该为 startAge 和 endAge 使用参数。

然后，您可以在您的字符串中生成所需的其他条件，用于在您的案例上使用 for 循环进行查询，这将为您提供如下信息：

```
(uv.voter.age between :startAge0 and :endAge0) or (uv.voter.age between :startAge1 and :endAge1) ... 
```

您可以轻松生成以下字符串，然后使用 namedParameters 添加参数。如果您不喜欢这种情况下的定位参数（使用“？”，然后使用索引设置参数），您可以看看。

# python - 在阅读之前懒惰地过滤文件

> ID：15090685
> 
> 赞同：7
> 
> 时间：2013-02-26T13:44:16.493
> 
> 标签：python, file

假设我有一个大文件，其中包含一些我希望忽略的行，以及一个`file_function`接受文件对象的函数 ( )。我可以在**不先读取整个文件的**情况下返回一个其行满足某些条件的新文件对象吗，这种**懒惰**是重要的部分。

*注意：我可以只保存一个忽略这些行的临时文件，但这并不理想。*

例如，假设我有一个 csv 文件（有一个坏行）：

```
1,2
ooops
3,4 
```

第一次尝试是创建新的文件对象（使用与文件相同的方法）并覆盖`readline`：

```
class FileWithoutCondition(file):
    def __init__(self, f, condition):
        self.f = f
        self.condition = condition
    def readline(self):
        while True:
            x = self.f.readline()
            if self.condition(x):
                return x 
```

*如果`file_name`仅使用`readline`...，则此方法有效，但如果需要其他功能则无效。*

```
with ('file_name', 'r') as f:
    f1 = FileWithoutOoops(f, lambda x: x != 'ooops\n')
    result = file_function(f1) 
```

*使用 StringIO 的解决方案可能有效，但我似乎无法做到。*

理想情况下，我们应该假设这`file_function`是一个黑盒函数，特别是我不能只调整它以接受生成器（但也许我可以将生成器调整为类似文件？）。
**是否有一种标准方法可以对通用文件进行这种惰性（略读）阅读？**

*注意：这个问题的激励例子是[这个 pandas question](https://stackoverflow.com/questions/15088190/what-is-the-easiest-way-to-load-a-filtered-tda-file-using-pandas)，仅仅有一个`readline`不足以开始`pd.read_csv`工作......*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:58:38.587

使用现有 Python 工具的 map-reduce 方法。在此示例中，我使用正则表达式来匹配以 string 开头的行`GET /index`，但您可以使用适合您账单的任何条件：

```
import re
from collections import defaultdict

pattern = re.compile(r'GET /index\(.*\).html')

# define FILE appropriately.
# map
# the condition here serves to filter lines that can not match.
matches = (pattern.search(line) for line in file(FILE, "rb") if 'GET' in line)
mapp    = (match.group(1) for match in matches if match)

# now reduce, lazy:
count = defaultdict(int)
for request in mapp:
    count[request] += 1 
```

这会在几秒钟内扫描我笔记本电脑上的 >6GB 文件。您可以进一步将文件分成块并将它们提供给线程或进程。`mmap`除非您有内存来映射整个文件（它不支持窗口化），否则不建议使用。

# jsf-2 - 添加 我有一个 JSF 页面，其中包含以下代码： ... <f:event type="preRenderView" listener="#{page1.PreRenderViewEvent}">... 现在我需要在页面中而不是在Page1 类构造函数 问问题 问问题 2013-02-26T13:44:22.273 753 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个 JSF 页面，其中包含以下代码： ... <f:event type="preRenderView" listener="#{page1.PreRenderViewEvent}">... 现在我需要在页面中而不是在Page1 类构造函数中注册侦听器（Page1.PreRenderViewEvent 方法） ......类似于： ... UIViewRoot root = FacesContext.getCurrentInstance().getViewRoot(); root.getListenersForEventClass(javax.faces.event.PreRenderViewEvent.class).add .... ... 我怎样才能完成这段代码？ 谢谢。 使用UIViewRoot#subscribeToViewEvent(). context.getViewRoot().subscribeToViewEvent(PreRenderViewEvent.class, new MySystemEventListener); 请注意，如果 bean 是在呈现响应阶段构建的，就像在 GET 请求期间发生的那样，这将为时已晚。您最好只在请求范围 bean 本身的构造函数中完成这项工作（或者，更清洁，在 a 中@PostConstruct）。 jsf-2event-handlingviewroot 4 1 回答 1 This answer is useful 5 使用UIViewRoot#subscribeToViewEvent(). context.getViewRoot().subscribeToViewEvent(PreRenderViewEvent.class, new MySystemEventListener); 请注意，如果 bean 是在呈现响应阶段构建的，就像在 GET 请求期间发生的那样，这将为时已晚。您最好只在请求范围 bean 本身的构造函数中完成这项工作（或者，更清洁，在 a 中@PostConstruct）。 于 2013-02-26T13:51:14.577 回答 Related 3 jquery - 插入内容为空的标签 jQuery中的标签 1 javascript - 手动更新时如何刷新数据表jquery 3 c# - 包含 guid 的结构上的 Marshal.SizeOf 会提供额外的字节 1 mysql - lucene/solr vs mySQL 5.6 LIKE（包含）搜索——转向 solr 会提高速度吗？ 2 sql - 在预期条件的上下文中指定的非布尔类型的表达式，靠近... TABLE 2 objective-c - 在不拆分最后一个单词的情况下切割 NSString 的长度 0 php - 检查facebook用户是否已经投票 1 mysql - 关于带有空字符串的mysql where子句 2 java - 如何检查文档是否在 MongoDB 中更新或插入 1 sql - SSRS 报告级联参数 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</f:event></f:event>

> ID：15090687
> 
> 赞同：2
> 
> 时间：
> 
> 标签：jsf-2, event-handling, viewroot

我有一个 JSF 页面，其中包含以下代码：

```
...
<f:event type="preRenderView" listener="#{page1.PreRenderViewEvent}"/> 
... 
```

现在我需要在页面中而**不是在****Page1 类构造函数**中注册侦听器（Page1.PreRenderViewEvent 方法） ......类似于：

```
...
UIViewRoot root = FacesContext.getCurrentInstance().getViewRoot();
root.getListenersForEventClass(javax.faces.event.PreRenderViewEvent.class).add ....
... 
```

我怎样才能完成这段代码？
谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T13:51:14.577

使用[`UIViewRoot#subscribeToViewEvent()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIViewRoot.html#subscribeToViewEvent%28java.lang.Class,%20javax.faces.event.SystemEventListener%29).

```
context.getViewRoot().subscribeToViewEvent(PreRenderViewEvent.class, new MySystemEventListener); 
```

*请注意，如果 bean 是在*呈现响应阶段构建的，就像在 GET 请求期间发生的那样，这将为时已晚。您最好只在请求范围 bean 本身的构造函数中完成这项工作（或者，更清洁，在 a 中`@PostConstruct`）。

# asp.net - 自定义 IHttpModule 中的 HttpContext 会话中缺少对象

> ID：15090689
> 
> 赞同：1
> 
> 时间：2013-02-26T13:44:26.547
> 
> 标签：asp.net, httpmodule, ihttpmodule

我正在编写自定义 IHttpModule。我需要管理 HttpContext 会话对象。为了实现这一点，我添加了从 IRequiresSessionState 继承的自定义 IHttpHandler。然后我可以访问会话（它不为空）。我在处理程序执行后在 PreRequestHandlerExecute 中编写逻辑，以使会话可达。

然后我遇到了问题。当我向会话中添加未保存/存储的内容时。对于模块中的每个连续请求，我都找不到已添加到会话中的对象。

是否可以从自定义模块持久写入会话，或者我遗漏了什么？

已编辑-> R.Isajev：

```
public class CustomFederationModule : IHttpModule
{
    public void Dispose()
    {
        // TODO
    }

    public void Init(HttpApplication context)
    {
        context.PostAcquireRequestState += Application_PostAcquireRequestState;
        context.PostMapRequestHandler += Application_PostMapRequestHandler;
        context.PreRequestHandlerExecute += Application_PreRequestHandlerExecute;

        context.BeginRequest += OnBeginRequest;
        context.EndRequest += OnEndRequest;
        context.Error += OnErrorOccured;
    }

    private void Application_PreRequestHandlerExecute(object sender, EventArgs e)
    {
        System.Diagnostics.Trace.WriteLine("Session ID : " + HttpContext.Current.Session.SessionID);
        if (HttpContext.Current.Session["Isajev"] == null)
            HttpContext.Current.Session["Isajev"] = "Rastko Isajev";
    }

    private void OnEndRequest(object sender, System.EventArgs e)
    {
        if (sender is HttpApplication)
        {
            HttpResponse response = (sender as HttpApplication).Response;
            int statusCode = response.StatusCode;
        }
    }

    private void OnBeginRequest(object sender, System.EventArgs e)
    {
    }

    void Application_PostMapRequestHandler(object source, EventArgs e)
    {
        HttpApplication app = (HttpApplication)source;

        if (app.Context.Handler is IReadOnlySessionState || app.Context.Handler is IRequiresSessionState)
        {
            // no need to replace the current handler
            return;
        }

        // swap the current handler
        app.Context.Handler = new MyHttpHandler(app.Context.Handler);
    }

    void Application_PostAcquireRequestState(object source, EventArgs e)
    {
        HttpApplication app = (HttpApplication)source;

        MyHttpHandler resourceHttpHandler = HttpContext.Current.Handler as MyHttpHandler;

        if (resourceHttpHandler != null)
        {
            // set the original handler back
            HttpContext.Current.Handler = resourceHttpHandler.OriginalHandler;
        }

        // -> at this point session state should be available
        Debug.Assert(app.Session != null, "it did not work :(");
    }

    private void OnErrorOccured(object sender, System.EventArgs e)
    {
        throw new Exception("Error occured ! \n" + e.ToString());
    }

    // A temp handler used to force the SessionStateModule to load session state
    public class MyHttpHandler : IHttpHandler, IRequiresSessionState
    {
        internal readonly IHttpHandler OriginalHandler;

        public MyHttpHandler(IHttpHandler originalHandler)
        {
            OriginalHandler = originalHandler;
        }

        public void ProcessRequest(HttpContext context)
        {
            // do not worry, ProcessRequest() will not be called, but let's be safe
            throw new InvalidOperationException("MyHttpHandler cannot process requests.");
        }

        public bool IsReusable
        {
            // IsReusable must be set to false since class has a member!
            get { return false; }
        }
    }
} 
```

在自定义模块中，我使用自定义处理程序来启用模块中的会话使用，因为它最初是无会话的。在此示例中，第一次调用会话时添加了“Isajev”。在来自同一用户和浏览器的下一个呼叫中，它不存在于会话中。

问候， 拉斯特科

# c# - 为什么连续调用 Server.Transfer 会改变 url？

> ID：15090698
> 
> 赞同：4
> 
> 时间：2013-02-26T13:44:42.757
> 
> 标签：c#, asp.net

单击按钮时，我正在使用`Server.Transfer`加载另一个页面的内容。这可以按预期工作，并且网址保持不变。但是，如果我尝试通过单击第二页中的按钮来加载第三页，则 URL 将更改为第二页的 URL。我希望它保留第一页的网址。

例子：

1.  `Page1.aspx`负载。
    *   网址：`.../Page1.aspx`
    *   内容：`Page1.aspx`
2.  `Server.Transfer("~/Page2.aspx")`点击按钮。
    *   网址：`.../Page1.aspx`
    *   内容：`Page2.aspx`
3.  `Server.Transfer("~/Page3.aspx")`点击按钮
    *   网址：`.../Page2.aspx`
    *   内容：`Page3.aspx`

为什么第三步的url变了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:56:32.987

当您调用`Server.Transfer()`时，第一页的执行将停止，而在同一个 HTTP 请求中执行第二页。然后第二页 (Page2.aspx) 的执行方式与直接向其 URL 发出的任何正常请求相同，因此表单的操作设置为其自己的 URL（尽管从 调用`Server.Transfer()`）。

如果不是这种情况，那么当提交表单时，它会发布到 Page1.aspx（如您所料），但该页面不一定包含相同的控件并且能够处理请求。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-26T13:47:42.197

这可能会有所帮助：

```
Response.Redirect("~/page.aspx",false) 
```

# c# - Windows Phone 中的 XNA RenderTarget2D

> ID：15090700
> 
> 赞同：2
> 
> 时间：2013-02-26T13:45:06.630
> 
> 标签：c#, windows-phone-7, xna, rendertarget

我想在我的 Windows Phone 7 XNA 应用程序中使用 RenderTarget2D。但是，我不成功，因为将绘图切换到我的渲染目标然后切换回来（通过使用 SetRenderTarget(null) ）导致我的整个屏幕被绘制为蓝色，因此覆盖了在切换到我的渲染目标之前绘制的任何内容。我不确定这是否是预期的行为。

事实上，很容易重现这种行为。只需为 Windows Phone 7 创建一个简单的 XNA 游戏并使用以下代码：

```
protected override void Draw(GameTime gameTime)
{
   spriteBatch.Begin();
   spriteBatch.Draw(textureBackground, new Vector2(0,0), Color.White); // This is a 480x800 image and my resolution is set to 480x800
   spriteBatch.End(); // Testing this block of code confirms that the textureBackground is being drawn

   graphics.GraphicsDevice.SetRenderTarget(textureBuffer);

   spriteBatch.Begin();
   spriteBatch.Draw(textureSummer, new Vector2(0, 0), Color.White); // texture Summer is a 20x20 pixels texture while the screen resolution is 480 x 800
   spriteBatch.End();

   graphics.GraphicsDevice.SetRenderTarget(null); // switch back 

   spriteBatch.Begin();
   spriteBatch.Draw(textureBuffer, new Vector2(0,0), Color.White);
   spriteBatch.End(); // at this point, textureBuffer is drawn (the 20x20 pixeles image) in the upper left hand corner but the background of the whole screen is BLUE and so textureBackground texture has been overwritten by this color and is not showing anymore.

   // At this point all I see is a blue background with a 20x20 pixels image in the upper left hand corner.
} 
```

我正在创建我的渲染目标，如下所示：

```
textureSummer = Content.Load<Texture2D>("summer_picture_icon"); // the 20x20 pixels texture
textureBuffer = new RenderTarget2D(graphics.GraphicsDevice, textureSummer.Width, textureSummer.Height); // the RenderTarget2D object. Note that this RenderTarget is only 20x20. 
```

因此，我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:19:01.467

“问题”是您先绘制背景，然后更改rendertarget，然后渲染那个小方块，然后更改rendertarget，然后再次绘制小方块。按此顺序：

*   在屏幕上渲染
*   渲染目标更改
*   渲染屏幕外的东西
*   渲染目标更改
*   渲染屏幕内容

rendertarget 的每次更改都会清除它。

你应该做什么；

*   渲染目标更改
*   渲染屏幕外的东西
*   渲染目标更改
*   渲染屏幕内容

像这样：

```
GraphicsDevice.SetRenderTarget(textureBuffer);

spriteBatch.Begin();
spriteBatch.Draw(textureSummer, new Vector2(0, 0), Color.White); // texture Summer is a 20x20 pixels texture while the screen resolution is 480 x 800
spriteBatch.End();

GraphicsDevice.SetRenderTarget(null); // switch back 

spriteBatch.Begin();
spriteBatch.Draw(textureBackground, new Vector2(0,0), Color.White); // This is a 480x800 image and my resolution is set to 480x800
spriteBatch.Draw(textureBuffer, new Vector2(0,0), Color.White);
spriteBatch.End(); 
```

# ruby-on-rails - 在 Rails 中使用主机和多个路径字符串创建 URL

> ID：15090701
> 
> 赞同：6
> 
> 时间：2013-02-26T13:45:12.863
> 
> 标签：ruby-on-rails, ruby, uri

我想使用端点和路径或主机和路径创建 URL。不幸`URI.join`的是不允许这样做：

```
pry(main)> URI.join "https://service.com", "endpoint",  "/path"
=> #<URI::HTTPS:0xa947f14 URL:https://service.com/path>
pry(main)> URI.join "https://service.com/endpoint",  "/path"
=> #<URI::HTTPS:0xabba56c URL:https://service.com/path> 
```

我想要的是：`"https://service.com/endpoint/path"`。我怎么能在 Ruby/Rails 中做到这一点？

**编辑：**由于`URI.join`有一些缺点，我很想使用`File.join`：

```
URI.join("https://service.com", File.join("endpoint",  "/path")) 
```

你怎么看？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T13:50:01.273

URI.join 的工作方式与您期望的`<a>`标签一样。

您正在加入`example.com`, `endpoint`, `/path`，因此`/path`会将您带回到域的根目录，而不是附加它。

您需要以 结束端点`/`，而不是以 开始路径`/`。

```
URI.join "https://service.com/", "endpoint/",  "path"
=> #<URI::HTTPS:0x007f8a5b0736d0 URL:https://service.com/endpoint/path> 
```

编辑：根据您在下面评论中的要求，试试这个：

```
def join(*args)
  args.map { |arg| arg.gsub(%r{^/*(.*?)/*$}, '\1') }.join("/")
end 
```

测试：

```
> join "https://service.com/", "endpoint", "path"
=> "https://service.com/endpoint/path"
> join "http://example.com//////", "///////a/////////", "b", "c"
=> "http://example.com/a/b/c" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-01T10:15:52.910

Looks like URI.join checks for the presence of slash character '/' to figures out the folder in the url path. So, if you missed the **trailing slash** '/' in the path it will not treat it as folder, and omit it. Check this out:

```
URI.join("https://service.com", 'omitted_part', 'omitted_again', 'end_point_stays').to_s
# =>"https://service.com/end_point_stays" 
```

Here, if we try to JOIN THE WORDS ONLY, first and last params only stay, rest are omitted, where first param is, absolute uri with protocol & last param is, the end point.

So, if you want to include the folder component, **add trailing slash in each folder-component**, then only it is considered part of the path:

```
URI.join("https://service.com", 'omitted_no_trailing_slash', 'omitted_again', 'stays/', 'end_point_stays').to_s
# => "https://service.com/stays/end_point_stays" 
```

One more interesting thing to consider is that, if you are providing path in first parameter it acts as follows:

```
URI.join("https://service.com/omitted_because_no_trailing_slash", 'end_point_stays').to_s
# => "https://service.com/end_point_stays"
URI.join("https://service.com/stays_because_of_trailing_slash/", 'end_point_stays').to_s
# => "https://service.com/stays_because_of_trailing_slash/end_point_stays"
URI.join("https://service.com/safe_with_trailing_slash/omitted_because_no_trailing_slash", 'end_point_stays').to_s
# => "https://service.com/safe_with_trailing_slash/end_point_stays" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-25T08:29:54.930

我制作了一个脚本，让您可以执行以下操作：

```
SmartURI.join('http://example.com/subpath', 'hello', query: { token: secret })
=> "http://example.com/subpath/hello?token=secret" 
```

[https://gist.github.com/zernel/0f10c71f5a9e044653c1a65c6c5ad697](https://gist.github.com/zernel/0f10c71f5a9e044653c1a65c6c5ad697)

# visual-c++ - 如何在 Visual Studio 2010 c++ express 中安装 opencv 2.3？

> ID：15090702
> 
> 赞同：0
> 
> 时间：2013-02-26T13:45:16.727
> 
> 标签：visual-c++, opencv, image-processing

我正在使用视频进行离线视频检测项目。实际上，首先我将 opencv2.3 与 Microsoft Visual Studio 2008 Express 一起使用。所有算法都运行良好，但视频存在内存或堆栈问题，因此我无法加载和播放任何视频。所以我用Microsoft 2010 express切换到opencv2.4.2。我能够运行任何长度的视频，但是opencv2.4.2中的许多算法不同。那么有人可以告诉我如何使用 Microsoft Visual Studio 2010 express 安装 opencv 2.3 吗？也兼容吗？

# asp.net-mvc-4 - htmlHelper 与部分视图

> ID：15090703
> 
> 赞同：7
> 
> 时间：2013-02-26T13:45:18.777
> 
> 标签：asp.net-mvc-4, partial-views, html-helper

我无法决定是否应该使用 htmlHelper 或部分视图来解决我的问题。

我想重用以下代码：

```
<div style="width: 500px; float: left;">
  <div class="box effect2">
    <span><a href="@Url.Action("someMethod", "somController")">
        <img src="@Url.Content("~someurl)" /></a></span>
  </div>
</div> 
```

href 和图像源将是参数。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T13:48:59.527

当你有很多标记时使用局部视图。Html 助手应该只用于生成 HTML 的一小部分。在这种特殊情况下，您确实处于极限，两种方法都可以。在此特定示例中使用您喜欢的那个。我可能会在这里使用自定义 HTML 帮助程序，因为这似乎是一个很常见的小部件，如果您将其合并到程序集中，它可以在各种应用程序中重用。

# json - hHighstock 从 json 获取标志数据

> ID：15090705
> 
> 赞同：0
> 
> 时间：2013-02-26T13:45:25.923
> 
> 标签：json, charts, highcharts, highstock

我正在尝试从 JSON 数据 创建一系列**highstock 标志。**

JSON格式：`[[timestamp, title],[timestamp, title] ...]`

我还尝试了一个关联数组，比如`[{x: timestamp, title: "flag"}, ...]`

是否可以使用 JSON 数据或仅使用所有 highstock 标志示例中的给定代码创建它们，例如：

```
'data': [{
   'title':'E',
    'x':1330560000000
 }], 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:58:56.583

它应该可以正常工作，请看示例：

数据.json

```
 [{
            "name" : "AAPL",
            "id":"dataseries",
            "data" :[
 [1141171200000,69.10],
[1141257600000,69.61],
[1141344000000,67.72],
[1141603200000,65.48],
[1141689600000,66.31],
[1141776000000,65.66],
[1141862400000,63.93],
[1141948800000,63.19],
[1142208000000,65.68],
[1142294400000,67.32],
[1142380800000,66.23],
[1142467200000,64.31],
[1142553600000,64.66],
[1142812800000,63.99],
[1142899200000,61.81],
[1142985600000,61.67],
[1143072000000,60.16],
[1143158400000,59.96],
[1143417600000,59.51],
[1143504000000,58.71],
[1143590400000,62.33],
[1143676800000,62.75],
[1143763200000,62.72]],
            "tooltip": {
                "yDecimals": 2
            }
},{
                "type": "flags",
                "name": "Flags on axis",
                        "onSeries": "dataseries",
                "data": [{
                    "x": 1143417600000,
                    "title": "On axis"
                }],
                "shape": "squarepin"
            }] 
```

和脚本：

```
$.getJSON('data.json', function(data) {

    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container'
        },

        rangeSelector : {
            selected : 1
        },

        plotOptions: {
            series: {
                stacking: 'normal'
            }
        },

        series : data
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:22:28.913

我认为您需要遵循 Highstock[示例](http://www.highcharts.com/stock/demo/flags-placement)并`data`像这样使用：

```
data: [{
    x: Date.UTC(2011, 1, 14),
    title: 'E'
}], 
```

当我使用您的示例执行此操作时（也修复了语法错误！），它可以工作。

# arrays - Fortran：类型未知大小的数组

> ID：15090715
> 
> 赞同：4
> 
> 时间：2013-02-26T13:46:05.553
> 
> 标签：arrays, types, fortran

也许这是一个非常愚蠢的问题，人们真的应该以不同的方式做到这一点，但是：有没有可能有类似的东西

```
type food
 INTEGER :: NBananasLeft(NBananaTypes)
 INTEGER :: NApplesLeft(NAppleTypes)
end type food 
```

在编译时不知道 NBaranaTypes 和 NAppleTypes 在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:52:46.293

在 Fortran 90-95 中：

```
type food
 INTEGER,pointer :: NBananasLeft(:)
 INTEGER,pointer :: NApplesLeft(:)
end type food 
```

您必须使用自己分配数组`allocate(var%NBananasLeft(NBananaTypes)))`。

在 Fortran 2003 中：

```
type food
 INTEGER,allocatable :: NBananasLeft(:)
 INTEGER,allocatable :: NApplesLeft(:)
end type food 
```

您还必须自己使用 分配数组`allocate(var%NBananasLeft(NBananaTypes)))`，但要避免内存泄漏的可能性。

在 Fortran 2003 中通过参数化数据类型（只有少数编译器支持）：

```
type food(NBananaTypes,NAppleTypes)
 integer,len :: NBananaTypes,NAppleTypes
 INTEGER :: NBananasLeft(NBananaTypes)
 INTEGER :: NApplesLeft(NAppleTypes)
end type food 
```

# iphone - iphone应用程序正在模拟器上运行，但不在设备上

> ID：15090716
> 
> 赞同：0
> 
> 时间：2013-02-26T13:46:08.720
> 
> 标签：iphone, objective-c, cocoa-touch, ios5, xcode4.3

我的应用程序在模拟器上运行良好，但在设备上运行良好......我只能看到我使用的每个选项卡的第一个视图`UITabViewController`......

在尝试了很多之后，当我`UIViewController`通过使用.xib ie 替换其中一个时，我能够在我的 iPhone 上看到变化。那么，可能的原因是什么？有没有办法解决这个问题而不必更换所有的视图控制器？因为更换是不值得的......

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:49:20.243

我猜这是一个重复的问题，但请检查大小写。模拟器不区分大小写，设备是。

# scala - 在Scala中将矩阵9x9元素按3列分组为3行

> ID：15090721
> 
> 赞同：2
> 
> 时间：2013-02-26T13:46:20.020
> 
> 标签：scala, matrix

假设我有以下矩阵：

```
 val grid = Array(
  Array( 1, 2, 3,  4, 5, 6,  7, 8, 9), 
  Array(11,12,13, 14,15,16, 17,18,19), 
  Array(21,22,23, 24,25,26, 27,28,29), 

  Array(31,32,33, 34,35,36, 37,38,39), 
  Array(41,42,43, 44,45,46, 47,48,49), 
  Array(51,52,53, 54,55,56, 57,58,59), 

  Array(61,62,63, 64,65,66, 67,68,69), 
  Array(71,72,73, 74,75,76, 77,78,79), 
  Array(81,82,83, 84,85,86, 87,88,89)
) 
```

我怎样才能，最好以功能方式，将它们转换为这个矩阵：

```
 val gridWithFields = Array(
  Array(1,2,3, 11,12,13, 21,22,23),
  Array(4,5,6, 14,15,16, 21,22,23),
  Array(7,8,9, 17,18,19, 27,28,29),
  ... 
) 
```

****更新****
我做了一些基准测试，但不确定内存结果是否正确。无论如何，它们是：

@maxmc for 的解决方案

```
周期中的 alg1：10 时间：2712683ns 内存：459572
周期中的 alg1：100 时间：914297ns 内存：458191
周期中的 alg1：1000 时间：85102ns 内存：457944
周期中的 alg1：10000 时间：68742ns 内存：457943

```

@Daniel C. Sobral 解决方案

```
周期中的 alg2：10 时间：3747031ns 内存：458889
循环中的 alg2：100 时间：1796564ns 内存：457951
循环中的 alg2：1000 时间：186215ns 内存：457220
循环中的 alg2：10000 时间：122642ns 内存：456708

```

@Or Peles 解决方案

```
周期中的 alg3：10 时间：741475ns 内存：457472
循环中的 alg3：100 时间：542181ns 内存：457914
循环中的 alg3：1000 时间：248020ns 内存：457911
循环中的 alg3：10000 时间：119105ns 内存：457919

```

@Hbf 解决方案

```
周期中的 alg4：10 时间：179093ns 内存：457472
循环中的 alg4：100 时间：121072ns 内存：457069
循环中的 alg4：1000 时间：78123ns 内存：456719
循环中的 alg4：10000 时间：75948ns 内存：455913

```

@Eastsun 解决方案

```
周期中的 alg5：10 时间：144037ns 内存：457512
循环中的 alg5：100 时间：40672ns 内存：457059
循环中的 alg5：1000 时间：42236ns 内存：456119
循环中的 alg5：10000 时间：46480ns 内存：455952

```

我已经在 MacMini(2012) 上对其进行了测试。内存结果真的很奇怪，所以来源在这里，如果有一些不好的错误和反模式请告诉我=）[https://github.com/Stimphonier/MatrixBench](https://github.com/Stimphonier/MatrixBench)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:43:50.017

'for' 方法：

```
for(x <- 0 until 9 by 3) yield
  (for {
    row <- 0 until 9;
    col <- x until x + 3 by 3;
    i <- col until col + 3
  } yield grid(row)(i)).toArray 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T14:49:32.793

分组和转置。我将展示我找出正确顺序的 REPL 会话。

首先，你的数据中有一个分组——你用空格清楚地表明了这一点。每三行，每行内每三个元素。所以我们要做的第一件事就是明确分组。

```
scala> grid.map(row => (row grouped 3).toArray)
res7: Array[Array[Array[Int]]] = Array(Array(Array(1, 2, 3), Array(4, 5,
 6), Array(7, 8, 9)), Array(Array(11, 12, 13), Array(14, 15, 16), Array(
17, 18, 19)), Array(Array(21, 22, 23), Array(24, 25, 26), Array(27, 28,
29)), Array(Array(31, 32, 33), Array(34, 35, 36), Array(37, 38, 39)), Ar
ray(Array(41, 42, 43), Array(44, 45, 46), Array(47, 48, 49)), Array(Arra
y(51, 52, 53), Array(54, 55, 56), Array(57, 58, 59)), Array(Array(61, 62
, 63), Array(64, 65, 66), Array(67, 68, 69)), Array(Array(71, 72, 73), A
rray(74, 75, 76), Array(77, 78, 79)), Array(Array(81, 82, 83), Array(84,
 85, 86), Array(87, 88, 89)))

scala> (res7 grouped 3).toArray
res8: Array[Array[Array[Array[Int]]]] = Array(Array(Array(Array(1, 2, 3)
, Array(4, 5, 6), Array(7, 8, 9)), Array(Array(11, 12, 13), Array(14, 15
, 16), Array(17, 18, 19)), Array(Array(21, 22, 23), Array(24, 25, 26), A
rray(27, 28, 29))), Array(Array(Array(31, 32, 33), Array(34, 35, 36), Ar
ray(37, 38, 39)), Array(Array(41, 42, 43), Array(44, 45, 46), Array(47,
48, 49)), Array(Array(51, 52, 53), Array(54, 55, 56), Array(57, 58, 59))
), Array(Array(Array(61, 62, 63), Array(64, 65, 66), Array(67, 68, 69)),
 Array(Array(71, 72, 73), Array(74, 75, 76), Array(77, 78, 79)), Array(A
rray(81, 82, 83), Array(84, 85, 86), Array(87, 88, 89)))) 
```

让我们看看我们是否做对了：

```
scala> res8(0)
res9: Array[Array[Array[Int]]] = Array(Array(Array(1, 2, 3), Array(4, 5,
 6), Array(7, 8, 9)), Array(Array(11, 12, 13), Array(14, 15, 16), Array(
17, 18, 19)), Array(Array(21, 22, 23), Array(24, 25, 26), Array(27, 28,
29))) 
```

是的，这正是我们要转换的数据单位。让我们试一试：

```
scala> res9.transpose
res10: Array[Array[Array[Int]]] = Array(Array(Array(1, 2, 3), Array(11,
12, 13), Array(21, 22, 23)), Array(Array(4, 5, 6), Array(14, 15, 16), Ar
ray(24, 25, 26)), Array(Array(7, 8, 9), Array(17, 18, 19), Array(27, 28,
 29))) 
```

如预期的！因此，让我们对整个矩阵进行操作：

```
scala> res8 map (_.transpose)
res11: Array[Array[Array[Array[Int]]]] = Array(Array(Array(Array(1, 2, 3
), Array(11, 12, 13), Array(21, 22, 23)), Array(Array(4, 5, 6), Array(14
, 15, 16), Array(24, 25, 26)), Array(Array(7, 8, 9), Array(17, 18, 19),
Array(27, 28, 29))), Array(Array(Array(31, 32, 33), Array(41, 42, 43), A
rray(51, 52, 53)), Array(Array(34, 35, 36), Array(44, 45, 46), Array(54,
 55, 56)), Array(Array(37, 38, 39), Array(47, 48, 49), Array(57, 58, 59)
)), Array(Array(Array(61, 62, 63), Array(71, 72, 73), Array(81, 82, 83))
, Array(Array(64, 65, 66), Array(74, 75, 76), Array(84, 85, 86)), Array(
Array(67, 68, 69), Array(77, 78, 79), Array(87, 88, 89)))) 
```

现在我们只需要将其展平即可。我们需要以与分组相反的顺序将其展平：

```
scala> res11.flatten
res12: Array[Array[Array[Int]]] = Array(Array(Array(1, 2, 3), Array(11,
12, 13), Array(21, 22, 23)), Array(Array(4, 5, 6), Array(14, 15, 16), Ar
ray(24, 25, 26)), Array(Array(7, 8, 9), Array(17, 18, 19), Array(27, 28,
 29)), Array(Array(31, 32, 33), Array(41, 42, 43), Array(51, 52, 53)), A
rray(Array(34, 35, 36), Array(44, 45, 46), Array(54, 55, 56)), Array(Arr
ay(37, 38, 39), Array(47, 48, 49), Array(57, 58, 59)), Array(Array(61, 6
2, 63), Array(71, 72, 73), Array(81, 82, 83)), Array(Array(64, 65, 66),
Array(74, 75, 76), Array(84, 85, 86)), Array(Array(67, 68, 69), Array(77
, 78, 79), Array(87, 88, 89)))

scala> res12.map(_.flatten)
res13: Array[Array[Int]] = Array(Array(1, 2, 3, 11, 12, 13, 21, 22, 23),
 Array(4, 5, 6, 14, 15, 16, 24, 25, 26), Array(7, 8, 9, 17, 18, 19, 27,
28, 29), Array(31, 32, 33, 41, 42, 43, 51, 52, 53), Array(34, 35, 36, 44
, 45, 46, 54, 55, 56), Array(37, 38, 39, 47, 48, 49, 57, 58, 59), Array(
61, 62, 63, 71, 72, 73, 81, 82, 83), Array(64, 65, 66, 74, 75, 76, 84, 8
5, 86), Array(67, 68, 69, 77, 78, 79, 87, 88, 89)) 
```

或者，作为一个班轮：

```
grid.map(_.grouped(3).toArray).grouped(3).toArray.map(_.transpose).flatten.map(_.flatten) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T14:27:40.067

```
val n: Array[Array[Int]] =
  grid.grouped(3)
      .toArray
      .flatMap(_.map(_.grouped(3).toArray)
                .transpose
                .map(_.flatten))

n.foreach(r => {r.foreach(e => print(e + " ")); println})

// 1 2 3 11 12 13 21 22 23 
// 4 5 6 14 15 16 24 25 26 
// 7 8 9 17 18 19 27 28 29 
// 31 32 33 41 42 43 51 52 53 
// 34 35 36 44 45 46 54 55 56 
// 37 38 39 47 48 49 57 58 59 
// 61 62 63 71 72 73 81 82 83 
// 64 65 66 74 75 76 84 85 86 
// 67 68 69 77 78 79 87 88 89 
```

应该可以`toArray`通过将相应的`implicit def`放入范围来删除显式调用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T14:26:44.863

那这个呢？

```
type Grid = Array[Array[Int]]

def transform(grid: Grid): Grid = {
  def transformLine(grid: Grid) =
    grid.map(_.grouped(3).toArray).transpose.map(_.flatten)
  grid.grouped(3).flatMap(transformLine).toArray
}

scala> transform(grid) map(_.deep) foreach println
Array(1, 2, 3, 11, 12, 13, 21, 22, 23)
Array(4, 5, 6, 14, 15, 16, 24, 25, 26)
Array(7, 8, 9, 17, 18, 19, 27, 28, 29)
Array(31, 32, 33, 41, 42, 43, 51, 52, 53)
Array(34, 35, 36, 44, 45, 46, 54, 55, 56)
Array(37, 38, 39, 47, 48, 49, 57, 58, 59)
Array(61, 62, 63, 71, 72, 73, 81, 82, 83)
Array(64, 65, 66, 74, 75, 76, 84, 85, 86)
Array(67, 68, 69, 77, 78, 79, 87, 88, 89) 
```

由于大量隐式转换和中间结果，效率完全低下，但它是功能性的，不应该成为问题，除非你需要在一秒钟内执行数百次......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-27T03:47:29.463

这是一个简短而有效的解决方案，可能是最短和最有效的解决方案：

```
scala> val matrix = Array.tabulate(9, 9){ (r, c) => grid(r/3*3+c/3)(r%3*3+c%3) }
matrix: Array[Array[Int]] = 
Array(Array(1, 2, 3, 11, 12, 13, 21, 22, 23), 
      Array(4, 5, 6, 14, 15, 16, 24, 25, 26), 
      Array(7, 8, 9, 17, 18, 19, 27, 28, 29), 
      Array(31, 32, 33, 41, 42, 43, 51, 52, 53), 
      Array(34, 35, 36, 44, 45, 46, 54, 55, 56), 
      Array(37, 38, 39, 47, 48, 49, 57, 58, 59), 
      Array(61, 62, 63, 71, 72, 73, 81, 82, 83), 
      Array(64, 65, 66, 74, 75, 76, 84, 85, 86), 
      Array(67, 68, 69, 77, 78, 79, 87, 88, 89)
) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-26T14:10:14.073

快速而肮脏（但功能强大）的黑客：

```
(0 until grid(0).size/3).toArray.
  map(i =>
    grid.flatMap(a => a.drop(i*3).take(3))
  ) 
```

对于`grid`您提供的，这会产生：

```
Array(
  Array(1, 2, 3, 11, 12, 13, 21, 22, 23, /*...*/, 71, 72, 73, 81, 82, 83),
  Array(4, 5, 6, 14, 15, 16, 24, 25, 26, /*...*/, 74, 75, 76, 84, 85, 86), 
  Array(7, 8, 9, 17, 18, 19, 27, 28, 29, /*...*/, 77, 78, 79, 87, 88, 89)
) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-26T14:36:57.693

在一行中：

```
grid.grouped(3).map(g => g.transpose.grouped(3).map(_.flatten.sorted)).flatten.toArray 
```

res25: Array[Array[Int]] = Array(Array(1, 2, 3, 11, 12, 13, 21, 22, 23), Array(4, 5, 6, 14, 15, 16, 24, 25 , 26), 数组(7, 8, 9, 17, 18, 19, 27, 28, 29), 数组(3 1, 32, 33, 41, 42, 43, 51, 52, 53), 数组(34 , 35, 36, 44, 45, 46, 54, 55, 56), A ray(37, 38, 39, 47, 48, 49, 57, 58, 59), Array(61, 62, 63, 71, 72, 73, 81, 82, 83), 数组(64, 65, 66, 74, 75, 76, 84, 85, 86), 数组(67, 68, 69, 77, 78, 79, 87, 88, 89))

# java - Java JTable 未显示 MySQL 中的所有行

> ID：15090723
> 
> 赞同：0
> 
> 时间：2013-02-26T13:46:23.043
> 
> 标签：java, swing, jdbc, jtable, defaulttablemodel

我有一个 JTable 的问题，即当从 MySQL 表返回超过 1 行时，JTable 只显示 1 条记录 - （最后一条），但是当我尝试简单时`System.out.print`，它会显示所有记录。这是我的代码：

```
 System.out.println("MySQL Connect Example.");
    Connection conn = null;
    String url = "jdbc:mysql://xxx.xx.xxx.xx:3306/";
    String dbName = "smartcart";
    String driver = "com.mysql.jdbc.Driver";
    String userName = "xxx"; 
    String password = "xxx";
    Statement stmt = null;
    ResultSet rs = null;
        cartID=jTextField1.getText().trim();
        if(cartID.matches("(\\w*)") && !cartID.isEmpty())
        {
           jLabel2.setText("Searching.....");
               try {
                        Class.forName(driver).newInstance();
      conn = DriverManager.getConnection(url+dbName,userName,password);
      System.out.println("Connected to the database");
      stmt = conn.createStatement();
                       String query = "SELECT * FROM user_stock WHERE cartID="+cartID;
                       rs = stmt.executeQuery(query);
                       jInternalFrame1.setVisible(true);
                        while (rs.next()) {
                              jTable1.setModel(new javax.swing.table.DefaultTableModel(
                               new Object [][] {
                                  {rs.getString("id"), rs.getString("product_name"), rs.getString("product_code"), rs.getString("product_quantity"), rs.getString("product_price"), "0"}
                               },
                                new String [] {
                                  "Product No.", "Product Name", "Product Code", "Product Quantity", "Product Price", "Discount"
                                   }
                                ));
                        }
      conn.close();
      System.out.println("Disconnected from database");

                        }
               catch (Exception e) {
                  e.printStackTrace();
                }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:16:24.840

您正在为每个返回的行重新创建一个新的 TableModel，而不是为所有行重新创建一个模型：

```
String query = "SELECT * FROM user_stock WHERE cartID="+cartID;
rs = stmt.executeQuery(query);
jInternalFrame1.setVisible(true);
javax.swing.table.DefaultTableModel model = new javax.swing.table.DefaultTableModel();
model.setColumnIdentifiers(new String [] {
                              "Product No.", "Product Name", "Product Code", "Product Quantity", "Product Price", "Discount" });
 jTable1.setModel(model);
 while (rs.next()) {
     model.addRow(new Object [] {
               rs.getString("id"), rs.getString("product_name"), rs.getString("product_code"), rs.getString("product_quantity"), rs.getString("product_price"), "0"});       
 } 
```

警告：我没有测试也没有执行上面的代码，但修复错别字或缺少括号应该不难。

现在，您还可以简化您的生活并直接重复使用[`ResulSetTableModel`](http://cs.fit.edu/~mmahoney/cis5100/examples/ch25/Fig25_28_31/ResultSetTableModel.java)，这一切都为您完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:17:32.627

1)`XxxTableModel`在无限循环中重新创建，每个循环都有一个新模型

2）不要创建一个新的`XxxTableModel`，也不要在`try - catch - finally`块内

```
jTable1.setModel(new javax.swing.table.DefaultTableModel( 
```

3) 不包括在内

```
new Object [][] {
{
rs.getString("id"), rs.getString("product_name"), rs.getString("product_code"),
   rs.getString("product_quantity"), rs.getString("product_price"), "0"}
}, 
new String [] {"Product No.", "Product Name", "Product Code", "Product Quantity",
  "Product Price", "Discount" }
)); 
```

4) 重用`XxxTableModel`

5) 然后在 JDBC 中添加一个新行到`XxxTableModel`已经初始化为局部变量的行

[6) Swing 中的 Concurency](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)存在潜在问题，所有对已经可见的 GUI 的更新都必须在`Event Dispatch Thread`

*   通过包裹在里面`invokeLater`

*   从调用 JDBC （通过为每一行`Runnable#Thread`包装内部）`invokeLater`

*   从调用`SwingWorker`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:50:15.970

您必须为整个 ResultSet 创建一个 TableModel。

# php - facebook api 和图像

> ID：15090724
> 
> 赞同：0
> 
> 时间：2013-02-26T13:46:22.613
> 
> 标签：php, facebook, html, api

有没有办法提取我在我的 facebook 页面或 facebook 个人资料上的图像并在我的网站上显示它们，有可能吗？有文档链接吗？我用谷歌搜索了它不是很幸运

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:57:26.450

过去几天我一直在做这样的项目..

使用 Facebook 和 jQuery 的 Graph API。

[https://developers.facebook.com/docs/reference/api/using-pictures/](https://developers.facebook.com/docs/reference/api/using-pictures/)

当 FB.api 调用完成并加载数据时，我使用 jQuery Deferred 对象执行一个函数。 [http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

如果您从相册输出照片，请注意您不能要求特定的高度和高度。允许加载专辑、小和缩略图类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:52:56.573

是的，Facebook Graph API 为您提供从服务器获取 JSON 数据的访问权限。这是几个步骤的组合，例如应用程序创建、登录身份验证、应用程序访问照片等。

更多阅读[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)

# asp.net - 父 web.config 未在子文件夹中继承

> ID：15090725
> 
> 赞同：1
> 
> 时间：2013-02-26T13:46:24.007
> 
> 标签：asp.net, iis-7, web-config, asp.net-4.0

我遇到了奇怪的行为，无法在子文件夹中访问来自 Web 应用程序项目的父 web.config 文件。

即无法从 IIS7 下的子文件夹中的父 web.config 中检索值。应用程序池处于经典模式。

**子文件夹中也没有 web.config。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:15:23.403

applicationhost.config 中存在虚拟目录和物理路径不匹配，因此手动更正并解决了上述错误。

# sql - 更新另一张表后触发更新一张表

> ID：15090727
> 
> 赞同：1
> 
> 时间：2013-02-26T13:46:26.547
> 
> 标签：sql, sql-server, triggers

我想编写在表 Y 更新后更新表 X 的触发器。

我试图搜索网络并编写一些代码，但什么也没有。

目前我的代码是：

```
CREATE TRIGGER trg_Update_YCR_Status
ON dbo.tbl_YellowCard_Transactions
AFTER UPDATE,INSERT 
AS
BEGIN

    UPDATE  dbo.tbl_YellowCard_Requests
    SET YellowCard_Status = 

END 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:55:22.860

你有正确的想法。您只需在表 Y 上创建一个触发器并针对表 X 发出一条`UPDATE`语句，就像上面一样。

在 SQL Server 中，如果要将表 X 中的新值基于刚刚插入的值，则可以引用该`inserted`表，该表表示正在添加或更新的数据。* 例如：

```
UPDATE requests
SET requests.YellowCard_Status = inserted.YellowCard_Status 
FROM dbo.tbl_YellowCard_Requests requests 
JOIN inserted ON requests.FieldName = inserted.FieldName 
```

我知道你可以在 SQL Server 中做到这一点。我不确定这是否适用于其他 RDBMS。

*对于`INSERT`语句，插入的表包含任何新行。对于一条`UPDATE`语句，将有一个`deleted`包含旧数据的`inserted`表和一个包含作为更新结果的新数据的表。

# c# - 在 .net 中调用 mprapi.dll 函数

> ID：15090730
> 
> 赞同：0
> 
> 时间：2013-02-26T13:46:33.117
> 
> 标签：c#, .net, unmanaged

我正在尝试在 c# .net 中调用本机 api。谁能帮我将下面的代码翻译成 C# 调用？我会很感激的。

```
dwResult = ::MprAdminMIBServerConnect( pwcComputerName.GetText(), &hMibServer );

dwResult = ::MprAdminServerGetInfo( hMibServer, 0, (LPBYTE*)&pServerBuf );

// I want to read the below variables as string
pInObjectEntry->Put(L"rastotalportstoconnectto", pServerBuf->dwTotalPorts );
pInObjectEntry->Put(L"rasportsinuse", pServerBuf->dwPortsInUse ); 
```

* * *

这是示例代码，谁能告诉我如何读取 dwTotalPorts 和 dwPortsInUse 的值？

```
 class RASCollector
    {
        [DllImport("mprapi.dll", SetLastError = false)]
        public static extern UInt32 MprAdminMIBServerConnect([MarshalAs(UnmanagedType.LPWStr)] string lpwsServerName, out IntPtr phMibServer);

        [DllImport("mprapi.dll", SetLastError = false)]
        public static extern UInt32 MprAdminServerGetInfo(IntPtr phMprServer, UInt32 dwLevel, out byte[] pServerBuf);

        public void Run()
        {
            IntPtr hMibServer = new IntPtr();
            UInt32 result;

            result = MprAdminMIBServerConnect("localhost", out hMibServer);

            byte[] pServerBuf;

            result = MprAdminServerGetInfo(hMibServer, 0, out pServerBuf);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:11:36.770

它是通过使用 InterOP 完成的。您需要像这样导入每个函数：

```
using System.Runtime.InteropServices;

[DllImport("mprapi.dll", SetLastError = false)]
public static extern UInt32 MprAdminMIBServerConnect([MarshalAs(UnmanagedType.LPWStr)] string lpwsServerName, out IntPtr phMibServer); 
```

MSDN 库中定义的数据类型应转换为对应的 C# 数据类型。您应该查看这篇文章以获取更多信息：http: [//msdn.microsoft.com/en-us/library/ac7ay120.aspx](http://msdn.microsoft.com/en-us/library/ac7ay120.aspx)

有关在 C# 中编组复杂数据结构和指针的更多信息：http: [//blogs.msdn.com/b/dsvc/archive/2009/02/18/marshalling-complicated-structures-using-pinvoke.aspx](http://blogs.msdn.com/b/dsvc/archive/2009/02/18/marshalling-complicated-structures-using-pinvoke.aspx)

# css - IE上的下拉菜单不起作用

> ID：15090731
> 
> 赞同：0
> 
> 时间：2013-02-26T13:46:34.610
> 
> 标签：css

这个纯 CSS 下拉菜单在 Firefox、Chrome、Safari 和 Opera 中运行良好，但在 IE9 中只显示列表。假设它在旧版本的 IE 中不起作用。我的理解是 IE9 解决了下拉菜单的悬停等问题。我该如何解决这个问题？谢谢。

纯CSS是：

```
body {
    background: ;
    font-family: Arial Black, Helvetica, sans-serif; font-size: 12px; line-height: 16px;
}

nav {
    margin: 0px auto; 
    text-align: center;
}

nav ul ul {
    display: none;
    width: 130px;
}

    nav ul li:hover > ul {
        display: block;
    }

nav ul {
    background: #; 
    box-shadow: 0px 0px 9px rgba(0,0,0,0.15);
    padding: 0 10px;
    border-radius: 10px;  
    list-style: none;
    position: relative;
    display: inline-table;
}
    nav ul:after {
        content: ""; clear: both; display: block;
    }

    nav ul li {
        float: left;
    }
        nav ul li:hover {
            background: #377C37;

        }
            nav ul li:hover a {
                color: #fff;
            }

        nav ul li a {
            display: block; padding: 5px 40px;
            color: #757575; text-decoration: none;

        }

    nav ul ul {
        background: #5F6975; border-radius: 0px 0px 10px 10px; padding: 0px;
        position: absolute; top: 100%;
    }
        nav ul ul li {
            float: none; 
            border-top: 1px solid #;
            border-bottom: 0px solid #; position: relative;
            border-radius: 0px 10px 0px 0px; 
        }
            nav ul ul li a {
                padding: 3px 30px;
                color: #fff;
            }   
                nav ul ul li a:hover {
                    background: #3BA110;
                        border-radius: 0px 0px 0px 0px; 

                }

    nav ul ul ul {
        position: absolute; left: 100%; top:0;
            border-radius: 0px 10px 10px 10px; 

                } 
```

HTML 是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml2/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>GRH Multi-Level</title>
<meta name="Author" content="George R. Hozendorf" />

<link rel="stylesheet" type="text/css" href="../down_menu_lawsart.css" />

</head>
<body>

<nav>
    <ul>
        <li><a href="http://www.lawsart.com/Home.html">Home</a></li>
        <li><a href="http://www.lawsart.com/About.html">About Me</a></li>

        <li><a>Portfolios &#9660</a>
        <ul>
            <li><a>Horses &#9658</a>

        <ul>
          <li><a href="http://www.lawsart.com/Horse1.html">Horses I</a></li>
          <li><a href="http://www.lawsart.com/Horse2.html">Horses II</a></li>
          <li><a href="http://www.lawsart.com/Horse3.html">Horses III</a></li>
          <li><a href="http://www.lawsart.com/Horse4.html">Horses IV</a></li>
          <li><a href="http://www.lawsart.com/Horse5.html">Horses V</a></li>
          <li><a href="http://www.lawsart.com/Horse6.html">Horses VI</a></li>
          <li><a href="http://www.lawsart.com/Horse7.html">Horses VII</a></li>
            </ul>
            </li>

            <li><a>Dogs &#9658</a>

          <ul>
            <li><a href="http://www.lawsart.com/Dog1.html">Dogs I</a></li>
            <li><a href="http://www.lawsart.com/Dog2.html">Dogs II</a></li>
          </ul>
            </li>

            <li><a>People &#9658</a>

          <ul>
            <li><a href="http://www.lawsart.com/People1.html">People I</a></li>
            <li><a href="http://www.lawsart.com/People2.html">People II</a></li>
          </ul>
            </li>

            <li><a href="http://www.lawsart.com/Stills.html">Stills</a></li>

        </ul>
    </li>
    <li><a href="http://www.lawsart.com/Order.html">Order</a></li>
    <li><a href="http://www.lawsart.com/Contact.html">Contact Me</a></li>
  </ul>
</nav>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T07:33:57.757

您使用了不支持旧版本的 html5 元素。如果你想在旧版本中支持 html5 元素，那么只需在你的 html 文件中使用带有 head 标签的以下 js。

```
<script type="text/javascript">
document.createElement("nav");
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:06:13.167

我尝试了您的代码，并使用“Modernizr Library”添加/包含到您的代码中，一切正常。即使使用 IE8 [http://modernizr.com/](http://modernizr.com/)

```
<script type="text/javascript" src="modernizr.js"></script> 
```

![例子](../Images/1f1f5e5710994d207b04d882ee018cb2.png)

![IE8](../Images/18f54f27a3fc5df2ba85d852ff82c042.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:07:37.643

我正在格式化您的代码，我意识到您错过`</ul>`了`</nav>`. 验证

# actionscript-3 - 我想使用 navigateToURL 功能添加主题、附件和电子邮件地址

> ID：15090735
> 
> 赞同：0
> 
> 时间：2013-02-26T13:46:42.680
> 
> 标签：actionscript-3, apache-flex, air

我想添加带有**navigateToURL**功能的主题、附件、电子邮件地址。如何在 Adob​​e air 和 Flex 中实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:51:54.697

参考以下代码。

```
var format:String = "mailto:address@address.com?subject=mySubject&body=myMessage";

navigateToURL(new URLRequest(format)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:59:38.147

你是对的，NavigateToURL 不支持附件。

我认为您应该查看[STMPMailer](http://www.bytearray.org/?p=27)来完成此操作。

# c# - 在 .NET 中编写 T-SQL 功能

> ID：15090736
> 
> 赞同：1
> 
> 时间：2013-02-26T13:46:48.780
> 
> 标签：c#, tsql

我有这段 t-sql 代码

```
set @UrlHash = convert(bigint, hashbytes('MD5', @Url)) 
```

我想知道我是否可以在 C# 中编写一个函数，它返回与上述行完全相同的哈希值，而无需使用 SQL。

是否可以？

要求是 C# 必须创建完全相同的哈希。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T08:38:11.330

选择

```
SELECT CONVERT(BIGINT, HASHBYTES('MD5', 'http://stackoverflow.com')) 
```

将产生以下结果：

```
-3354682182756996262 
```

* * *

如果您现在尝试在 C# 中创建 MD5 哈希

```
MD5 md5 = MD5.Create();
byte[] textToHash = Encoding.UTF8.GetBytes("http://stackoverflow.com");
byte[] result = md5.ComputeHash(textToHash); 
long numeric = BitConverter.ToInt64(result, 0); 
```

`numeric`将`8957512937738269783`。

* * *

那么问题是什么（除了 MD5 哈希是 128 位和`BIGINT`/`long`只是 64 位这一事实之外）？

这是一个[字节序](http://en.wikipedia.org/wiki/Endianness)问题（字节顺序错误）。让我们使用类修复它[`BitConverter`](http://msdn.microsoft.com/en-us/library/system.bitconverter.islittleendian.aspx)并根据需要反转字节：

```
MD5 md5 = MD5.Create();
byte[] textToHash = Encoding.UTF8.GetBytes("http://stackoverflow.com");
byte[] result = md5.ComputeHash(textToHash); 

if (BitConverter.IsLittleEndian)
    Array.Reverse(result);

long numeric = BitConverter.ToInt64(result, 0); 
```

`numeric`现在`-3354682182756996262`如你所愿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:50:52.177

您应该使用 MD5 类，这里是来自[http://blogs.msdn.com/b/csharpfaq/archive/2006/10/09/how-do-i-calculate-a-md5-hash-from-a的示例-string_3f00_.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2006/10/09/how-do-i-calculate-a-md5-hash-from-a-string_3f00_.aspx)，输出为 int 64 ：

```
public int64 CalculateMD5Hash(string input)
{
    // step 1, calculate MD5 hash from input
    MD5 md5 = System.Security.Cryptography.MD5.Create();
    byte[] inputBytes = System.Text.Encoding.ASCII.GetBytes(input);
    byte[] hash = md5.ComputeHash(inputBytes);

    return BitConverter.ToInt64(hash, 0);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T13:50:29.857

不是 MD5 哈希标准吗？你不能使用标准的 MD5 C# 实现吗？[在这里](http://blogs.msdn.com/b/csharpfaq/archive/2006/10/09/how-do-i-calculate-a-md5-hash-from-a-string_3f00_.aspx)使用代码怎么样？

# assembly - 缺少汇编程序列表文件

> ID：15090737
> 
> 赞同：1
> 
> 时间：2013-02-26T13:46:50.910
> 
> 标签：assembly, intel, 8051

我在汇编中编写了一个程序`intel 8051 microcontroller`。我需要，`assembler listing file .lst`但我无法在程序组装的目录中找到它。汇编器列表文件 .lst 的选项也被选中，但我无法在整个计算机中找到它。我认为汇编程序没有生成它。

我在用`Keil uVision 4`

如何生成 .lst 文件？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-27T13:47:08.003

您需要为项目启用该选项。去做这个：

1.  点击项目菜单
2.  单击目标选项
3.  列表选项卡
4.  然后检查您要输出的列表。
5.  选择要输出的文件的文件夹。

![列表选项卡](../Images/8916e6de43fca7a49c2f98f84ade0631.png)

# php - mysql错误消息中的正则表达式列名

> ID：15090740
> 
> 赞同：0
> 
> 时间：2013-02-26T13:46:57.147
> 
> 标签：php

我想从以下错误消息中正则表达式第二个''：

`Duplicate entry 'this_can_be_anything' for key 'I_want_to_grab_this'`

我正在使用 php，但对正则表达式的工作原理非常模糊。或者也许我应该使用其他东西而不是正则表达式？任何方向？泰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:49:47.197

直截了当：

`preg_match('/Duplicate entry \'.+\' for key \'(.+)\'/', $s, $m);`并使用`$m[1]`

`$m`是

```
array(2) {
  [0]=>
  string(68) "Duplicate entry 'this_can_be_anything' for key 'I_want_to_grab_this'"
  [1]=>
  string(19) "I_want_to_grab_this"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:50:07.213

这应该有效：

```
$yourstring = 'Duplicate entry...';
if (preg_match("=^[^']*'[^']*'[^']*'([^']*)'=", $yourstring, $matches)) {
    echo "Found value: " . $matches[1];
} 
```

但是，这将匹配具有以下格式的任何行：

```
Something 'something' something 'something' 
```

不确定你是否想要那个。如果没有，请按照[k102 的答案](https://stackoverflow.com/a/15090799/989169)。

# entity-framework - 是否可以附加索引来修改初始迁移？

> ID：15090745
> 
> 赞同：0
> 
> 时间：2013-02-26T13:47:07.337
> 
> 标签：entity-framework, ef-code-first, entity-framework-5, entity-framework-migrations

我在我的项目中使用实体框架代码优先方法。我已经使用包管理器控制台中的 enable-migrations 语句创建了模型并启用了迁移。我的上下文类包含映射配置和关系，例如

```
modelBuilder.Configurations.Add(new PostMap());
modelBuilder.Configurations.Add(new UserMap()); 
```

我的迁移文件 201302261054023_InitialCreate.cs 中的 Up 方法包含所有表定义作为我通过 DbSet<Type> 属性指定的上下文。

我在自定义数据库 Initializer 中更改了 InitializeDatabase 方法，因为我想在数据库初始化期间迁移到特定的迁移。

```
public void InitializeDatabase(T context)
{
    bool databaseExists = context.Database.Exists();
    if (!databaseExists)
        context.Database.CreateIfNotExists();

    var configuration = new Configuration();
    var migrator = new DbMigrator(configuration);
    migrator.Update("InitialCreate");
} 
```

可以修改 201302261054023_InitialCreate 类中的 Up 方法以添加另一个索引

```
CreateTable(
        "dbo.City",
        c => new
            {
                Id = c.Int(nullable: false, identity: true),
                Name = c.String(maxLength: 450),
            })
        .PrimaryKey(t => t.Id); 
```

到

```
CreateTable(
        "dbo.City",
         c => new
            {
                Id = c.Int(nullable: false, identity: true),
                Name = c.String(maxLength: 450),
            })
        .PrimaryKey(t => t.Id)
        .Index(t=>t.Name,true); 
```

不附加另一个迁移？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T10:07:48.567

在挖掘了大量与迁移相关的网页后，我发现只有将数据库更新为“零迁移”（空数据库），修改初始迁移才能对我有所帮助。如果不迁移到零数据库，我可以添加另一个迁移并在新迁移中创建索引，例如

```
public partial class InitialIndexes : DbMigration
{
    public override void Up()
    {
        CreateIndex("City", "Name", true);
    }

    public override void Down()
    {
        DropIndex("City", new[] {"Name"});
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:49:55.463

要创建索引，您可以使用 ExecuteSqlCommand。

```
context.Database.ExecuteSqlCommand("CREATE INDEX IX_TableName_ColumnName ON TableName (ColumnName)"); 
```

我通常在种子覆盖方法中使用此命令，如下所示。

```
 protected override void Seed(YourContext context)
            {
                context.Database.ExecuteSqlCommand("CREATE INDEX IX_TableName_ColumnName ON TableName (ColumnName)");
                //...Rest of seed code
             } 
```

您应该能够在您的方法中使用相同的调用。

# android - 如何正确包含 10" 和 7" 布局

> ID：15090752
> 
> 赞同：42
> 
> 时间：2013-02-26T13:47:22.690
> 
> 标签：android, layout, tablet, dpi

Nexus 7：7 英寸 1280x800

Galaxy Tab 10.1 10" 1280x800

我希望我的应用程序可以在 7 英寸和 10 英寸的平板电脑上运行。据我所知，我必须在我的应用程序中包含这些布局文件夹：

适用于 7 英寸平板电脑

*   布局-sw600dp
*   布局-sw600dp-端口

适用于 10 英寸平板电脑

*   布局-sw720dp
*   布局-sw720dp-端口

它在 nexus 7 上运行良好，但在 10" 平板电脑上加载了 sw600dp 布局。

如果我包括这些默认文件夹：

*   布局
*   布局端口

10" 银河选项卡从这些加载布局。

如果我只包括默认布局文件夹和 sw600dp 一个，它会在 nexus7 上崩溃。

如果 10 英寸 Galaxy 选项卡无法加载 sw720p 布局，我应该如何支持手机、7 英寸平板电脑和 10 英寸平板电脑？

编辑：格式化

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-27T13:56:40.420

问题是，我没有默认布局文件夹。

我尝试过，只使用 sw600dp 和 sw720dp 文件夹。我仍然不知道他们为什么不工作，但我不在乎。无论如何，我不能使用 swxxxdp <3.2，所以搞砸了。

因此，如果您想编写一个必须支持手机（2.2+）、7 英寸平板电脑和 10 英寸平板电脑的应用程序，请使用以下老式的东西：

**布局**这是默认设置，即使您不打算支持手机也需要！

**用于 7 英寸平板电脑的大布局**（适用于模拟器和 nexus7）

**layout-xlarge**用于 10" 平板电脑（适用于模拟器和galaxytab10.1）

[其他人](https://stackoverflow.com/questions/12541442/galaxy-tab-10-layout-qualifiers)也得出了同样的结论。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-26T14:11:27.620

我在我的应用程序中也面临这样的问题。但我为此找到了一个很好的解决方案。我只有一种布局`tablet`，目录名称是`layout-sw600dp`. 现在，当部分涉及高度和宽度问题时，我创建了几个不同`values`的目录来放置`dimensions`和`font size`其他存根。所以平板屏幕没有任何`constant`价值`layout`。

```
androd:layout_width:"60dp" // i drop this scenario

androd:layout_width:"@dimen/tab_width" // i used this scenario 
```

你的`values`目录名称会像

```
values-xlarge
values-large 
```

所有值都将从您的值目录中获取。它不会创建不同的布局，但一个布局可以多次使用。

以下是`Developer.android`网站的话。配置示例

为了帮助您针对不同类型的设备进行一些设计，以下是典型屏幕宽度的一些数字：

```
320dp: a typical phone screen (240x320 ldpi, 320x480 mdpi, 480x800 hdpi, etc).
480dp: a tweener tablet like the Streak (480x800 mdpi).
600dp: a 7” tablet (600x1024 mdpi).
720dp: a 10” tablet (720x1280 mdpi, 800x1280 mdpi, etc). 
```

使用表 2 中的尺寸限定符，您的应用程序可以使用您想要的任何宽度和/或高度数字在手机和平​​板电脑的不同布局资源之间切换。例如，如果 600dp 是您的平板电脑布局支持的最小可用宽度，您可以提供以下两组布局：

res/layout/main_activity.xml # 对于手机
res/layout-sw600dp/main_activity.xml # 对于平板电脑

===

在此，您可以看到 1280*720 的布局在下面，因此您应该使用这个让您决定差异的东西，`layout-sw720dp`而不是创建。`layout-normal-xlarge`而不是使用`layout-large-mdpi`and进行不同的识别`layout-large-ldpi`，您不只是通过它来识别`smallest width`吗？因为，android`drawables`为不同的图像提供目录，唯一的就是它的分辨率。你有上述解决方案。

**编辑**

然后你必须开发不同的布局。没有其他选择。我在[http://jamil.fluidsoul.net/2011/03/06/creating-android-applications-for-multiple-screen-sizes](http://jamil.fluidsoul.net/2011/03/06/creating-android-applications-for-multiple-screen-sizes)找到了。

```
Low density Small screens QVGA 240x320 (120dpi):

layout-small-ldpi (240x320)  
layout-small-land-ldpi (320x240)

Low density Normal screens WVGA400 240x400 (x432) (120dpi):

layout-ldpi  (240 x 400 )
layout-land-ldpi  (400 x 240 )

Medium density Normal screens HVGA 320x480 (160dpi):

layout-mdpi (320 x 480 )
layout-land-mdpi (480 x 320 )

Medium density Large screens HVGA 320x480 (160dpi):

layout-large-mdpi (320 x 480 )
layout-large-land-mdpi (480 x 320)

Galaxy Tab ( 240 dpi ):

layout-large  (600 x 1024) 
layout-large-land  (1024 x 600)

High density Normal screens WVGA800 480x800 (x854) (240 dpi):

layout-hdpi (480 x 800)
layout-land-hdpi (800 x 480)

Xoom (medium density large but 1280x800 res) (160 dpi):

layout-xlarge (800 x 1280)
layout-xlarge-land (1280 x 800) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-13T14:43:45.833

是的，您应该使用与布局相关的文件夹，但还要确保任何与设备无关的布局都放在您的 res/layout 文件夹中。

这在 Android 开发者网站上有所提及，但重申他们的观点，如果您的布局仅在支持大型和普通尺寸设备的应用程序的 layout-xlarge 文件夹中可用，则应用程序将作为较小的设备崩溃将无法找到此资源的任何匹配项。

这是一个很好的文件夹结构，从以下开始：

```
res/layout 
```

在其中保留与设备无关的布局，如果您考虑所有可能的限定符类型，则可以避免这种情况，但这仍然是更安全的选择。

如果您想为 7 英寸和 10 英寸平板电脑添加特定布局，请使用以下所有内容：

```
res/layout-large
res/layout-xlarge
res/layout-sw600dp
res/layout-sw720dp
res/layout-sw800dp 
```

对于您想要支持的任何特定设备屏幕宽度，依此类推。需要注意的是，sw600 支持尽可能小的宽度，因此在设备横屏时避免使用屏幕宽度。首选使用 swxxxdp 限定符，但这些是在 API 13 中添加的，因此对于旧的 Android 操作系统，您仍然需要大的 xlarge。

关于 dpi 的使用，请注意，如果您只为尺寸设置一个密度限定符，`layout-large-mdpi`例如，匹配大限定符的任何设备都将使用此处的布局而不是另一个文件夹，这是由于最佳匹配标准，你可以在[这里](http://retailtwo.nn4m.co.uk/DB/DBdroid/forms/FAQ_array.json)阅读。它会在匹配密度之前将其作为大型设备匹配，因此非 mdpi 密度屏幕仍将使用这些布局。

为了解决这个问题，您还必须包含您支持的任何其他密度的文件夹，因此`layout-large-hdpi`从上面的示例开始，并在此文件夹中包含您在 mdpi 文件夹中使用过的布局的 hdpi 版本（如果您需要它们）不同的。

当然也避免重复你的布局，如果你只需要它们，不要将与设备无关的布局复制到每个未使用的文件夹中`res/layout`，尝试只将需要这些限定符的布局保留在文件夹中并正确组织它们，确保你的文件夹以正确的优先顺序使用限定符命名，以防止将错误的文件夹用于密度/大小组合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T15:44:50.600

这很奇怪，因为您正在做正确的事情。

Nexus 7 应选择 sw600dp 限定符。
如果可用，Galaxy Tab 应选择 sw720dp 限定符。

您确定它在尝试找到合适的布局时会崩溃吗？Android 可能会找到正确的布局，但布局 xml 文件中的某些内容可能会丢失，从而导致崩溃。

# c# - 按WIN+D激活桌面

> ID：15090761
> 
> 赞同：0
> 
> 时间：2013-02-26T13:47:46.150
> 
> 标签：c#, winforms

我正在开发包含两个表单的 Windows 表单应用程序。一个在点击另一个时被隐藏。一次只能看到一个表单。我已经禁用了他们两个的 Win+D 键。为此使用了以下代码

```
ntPtr hprog = NativeMethods.FindWindowEx(NativeMethods.FindWindowEx(NativeMethods.FindWindow("Progman", "Program Manager"),
IntPtr.Zero, "SHELLDLL_DefView", ""),
IntPtr.Zero, "SysListView32", "FolderView");
NativeMethods.SetWindowLong(this.Handle, GWL_HWNDPARENT, hprog); 
```

但是当我按 Win+D 时，桌面会被禁用，要激活桌面，我需要再按一次 Win+D。这两种形式都在发生。你能证明这是什么原因吗？无论表单是打开还是关闭，我都需要桌面始终处于活动状态。这仅在某些 PC 上发生，并非在所有 PC 上发生。我正在使用 Windows 7 和 Dot NET 4.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:00:25.773

这可能不是您想要养成的习惯。大量用户使用 Windows 快捷键，我的意思并不仅仅指精通计算机。我的妻子是一名护士，她使用其中一些。

您正在尝试为使用您的应用程序的每个人更改 Windows 的默认行为，这仅在您为“锁定”系统创建本机应用程序时是一个好主意。如果环境不允许使用 Windows 快捷键，那么您可以更改它们。

试图强迫用户做事绝不是正确的想法。

# openerp - 如何在 Openerp 的右侧栏中添加报告

> ID：15090765
> 
> 赞同：0
> 
> 时间：2013-02-26T13:48:02.243
> 
> 标签：openerp

我想在 OpenERP 的右侧栏中为产品添加一个新报告链接的链接，但我不知道视图在哪里。我修改了 addons/product/report/ **init** .py 以添加我的新报告，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:27:31.373

要将报告添加到右侧栏，您必须`menu="True"`在报告标签中添加属性。

例如：

```
<report
    menu="True"
    id="my_report_id"
    string="My Report" 
    model="model_name"
    name="service.name" 
    rml="your_rml_path.rml"
    auto="False"
    header="False"/> 
```

# java - 用 OO 方法替换 if else

> ID：15090767
> 
> 赞同：0
> 
> 时间：2013-02-26T13:48:06.407
> 
> 标签：java, oop, if-statement

可以说我有：

```
if (count <= instance.getFCount()) {
    //do something and return String
} else if (count <= instance.getFSCount()) {
    //do something and return String
} else if (count <= instance.getTCount()) {
    //do something and return String
} else if (count <= instance.getOCount()) {
    //do something and return String
} 
```

我在想如何将这段代码替换为更面向对象的代码。问题是，如果我有这样的声明：

```
if (count <= 0) {
    //do something and return String
} else if (count <= 1) {
    //do something and return String
} else if (count <= 2) {
    //do something and return String
} else if (count <= 3) {
    //do something and return String
} 
```

我可以用一些工厂模式或基于枚举的方法来替换它，因为我的值 0、1、2、3 总是静态的。例如，我将创建一个映射以将类与数字保持一致，然后如果我的计数为 0，我将知道我需要从映射为零的类中创建一个实例，依此类推。

但是现在我在想，如果我在 if 条件中没有静态值，是否有任何方法可以完成，因为例如返回到 this: 的内容`instance.getOCount()`可能因配置而异。

你能给我一些想法如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T13:49:51.273

当您有很多不同的`if else`语句时，您可以使用[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。这有助于您创建符合最佳实践的可管理代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T13:51:12.737

我相信没有必要用设计模式来代替这么简单的逻辑，这是不合理的。A`switch`将是一个改进（假设`count`是一个整数），但为什么要创建一堆类呢？只有当每个人都有额外的、不同的行为时，这才是合理的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T13:52:02.293

如果您使用`NavigableMap`诸如 a之类的`TreeMap`，键是您的阈值，值是`Callable`s，您将能够检索适当的`Callable`并调用它，所有这些都在单行中。相关方法是`NavigableMap#ceilingEntry`。

```
final NavigableMap<Integer, Callable<String>> strats = new TreeMap<>();

...

return strats.ceilingEntry(val).getValue().call(args); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T15:30:15.300

我不认为使用模式是这里的解决方案......一切都比你的原始代码更难阅读。但是，如果您确定，这是一种选择：假设您的实例属于用户类。创建接口

```
public interface IDynamicAction<T> {
boolean select(T t);
String action(T t);
} 
```

做一个列表

```
List<IDynamicAction<User>> actions = new ArrayList<IDynamicAction<User>>();
actions.add(new IDynamicAction<User>() {
@Override
public boolean select(User instance) {
    return count <= instance.getFSCount();
}

@Override
public String action(User t) {
    System.out.println("count <= instance.getFSCount()");
    return "count <= instance.getFSCount()";
}
});

actions.add(new IDynamicAction<User>() {
@Override
public boolean select(User instance) {
    return count <= instance.getTCount();
}
@Override
public String action(User t) {
    System.out.println("count <= instance.getTCount()");
    return " count <= instance.getTCount()";
}
});

actions.add(new IDynamicAction<User>() {
@Override
public boolean select(User instance) {
    return count <= instance.getOCount();
}
@Override
public String action(User t) {
    System.out.println("count <= instance.getOCount()");
    return " count <= instance.getOCount()";
}
}); 
```

并执行你的代码

```
for(IDynamicAction<User> action : actions){
if(action.select(instance)){
    String s = action.action(instance);
    System.out.println(s);
    break;
} 
```

}

请注意中断，我假设基于您的代码只有一个动作可以执行如果您不需要返回值，您可以使用抽象类而不是接口并制作 if(select) action(); AbstractDynamicAction 类的一部分，代码会更好

Java7 并没有真正帮助做那种事情。闭包会让这件事看起来更容易......但恕我直言，你原来的多重 IF 是要走的路。

# c# - 如何从尚未关闭的进程中读取？

> ID：15090777
> 
> 赞同：0
> 
> 时间：2013-02-26T13:48:43.010
> 
> 标签：c#, .net, process, networkstream

我正在用 C# 编写一个简单的程序，它允许客户端连接到服务器并在该服务器上运行 MS DOS 命令。

该程序运行良好，后来我决定在客户端连接到服务器时运行 cmd.exe 进程，这就是我坚持的地方。我想要这个，以便我可以运行诸如*CD*之类的命令并更改工作目录，以前这没有效果，因为 cmd.exe 进程在命令运行后关闭。

如果进程退出，我似乎只能从`StandardOutput`和流中读取，有什么解决方法吗？`StandardError`

这是我在程序中使用的一些代码：

**创建并返回 cmd.exe 进程：**

```
private Process createDOS()
{
    try
    {
        // Create a ProcessStartInfo class
        ProcessStartInfo startInfo = new ProcessStartInfo("cmd","");

        // Set up the values
        startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
        startInfo.UseShellExecute = false;
        startInfo.RedirectStandardOutput = true;
        startInfo.RedirectStandardError = true;
        startInfo.RedirectStandardInput = true;
        startInfo.CreateNoWindow = false;

        // Create a cmd.exe process
        Process process = new Process();

        // Apply the start info and run
        process.StartInfo = startInfo;

        process.Start();  

        return process;
    }
    catch (Exception)
    {
        return null;
    }
} 
```

**将响应格式化为字符串的方法：**

```
private string findResponse(StreamReader err,StreamReader outp)
{
    string output = outp.ReadToEnd();
    string error = err.ReadToEnd();

    string ret = "";

    // Add the output to the return field if the process actually output data
    if (output.Length > 0)
    {
        ret = "OUTPUT : " + output;
    }

    // Then attempt to add data from the error stream
    if (error.Length > 0)
    {
        // If output was read, add a newline character separating the two fields
        if (ret.Length > 0) ret = ret + Environment.NewLine;
        ret = ret + "ERROR : " + error;
    }

    // If there's no output, that means there's no error, which means the execution was silently succesful
    if (ret.Length <= 0)
    {
        ret = "Command execution succesful!";
    }
    return ret;
} 
```

**服务器侦听器块：**

```
private void run()
{
    while (true)
    {

        Stream stream = null;
        StreamReader sr = null;
        StreamWriter sw = null;
        Socket socket = null;
        Process proc = null;

        try
        {
            socket = server.AcceptSocket();

            stream = new NetworkStream(socket);

            sr = new StreamReader(stream);
            sw = new StreamWriter(stream);

            String mode = sr.ReadLine();

            sw.WriteLine("Serverside link connected");
            sw.Flush();

            // Create cmd process in WINPROCESS mode

            if (mode == "WINPROCESS")
            {
                proc = createDOS();
            }

            String line;
            while ((line = sr.ReadLine()) != null)
            {
                if (mode == "WINPROCESS")
                {
                    proc.StandardInput.WriteLine(line);
                    proc.StandardInput.Flush();

                    // Response
                    sw.WriteLine(findResponse(proc.StandardError, proc.StandardOutput));
                    sw.Flush();

                }
                else
                {
                    sw.WriteLine(exeDOS(line));
                    sw.Flush();
                }
            }

        }
        catch (Exception ex)
        {
            // Silence
        }
        finally
        {
            if (socket != null) socket.Close();
            if (stream != null) stream.Close();
            if (sw != null) sw.Close();
            if (sr != null) sr.Close();
            if (proc != null) proc.Close();
        }
    }
} 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:55:52.567

您需要为[OutputDataReceived](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx#)和[ErrorDataReceived](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.errordatareceived.aspx)事件添加一个处理程序：

```
 process.StartInfo.RedirectStandardOutput = true;
    process.OutputDataReceived += 
        new DataReceivedEventHandler(process_OutputDataReceived);

    process.StartInfo.RedirectStandardError = true;
    process.ErrorDataReceived += 
        new DataReceivedEventHandler(process_ErrorDataReceived);

    if (process.Start())
    {
        process.BeginOutputReadLine();
        process.BeginErrorReadLine();
        process.WaitForExit();
    }
}

void process_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
    Console.WriteLine(e.Data);
}

void process_ErrorDataReceived(object sender, DataReceivedEventArgs e)
{
    Console.WriteLine(e.Data);
} 
```

# html - Youtube 自动播放无法在具有嵌入式 HTML5 播放器的移动设备上运行

> ID：15090782
> 
> 赞同：70
> 
> 时间：2013-02-26T13:48:59.327
> 
> 标签：html, mobile, youtube, fancybox, overlay

对于我的问题，我有一个链接`<a href="http://www.youtube.com/embed/YT-ID" class="overlay_video"></a>`。我想通过单击fancybox 覆盖窗口中的链接来播放视频。这不是问题。问题在于参数，例如“自动播放”或“自动隐藏”。

以下链接不起作用：

```
<a href="http://www.youtube.com/embed/YT-ID?autoplay=1" class="overlay_video"></a> 
```

覆盖窗口打开，但视频没有自动播放。

**编辑：我想在移动设备上使用 HTML5 播放器。在桌面浏览器上，它适用于参数，但不适用于移动设备。**

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-26T15:41:31.653

事实证明，无法在 iOS 设备（iPhone、iPad、iPod touch）和 Android 上进行自动播放。

请参阅[https://stackoverflow.com/a/8142187/2054512](https://stackoverflow.com/a/8142187/2054512)和[https://stackoverflow.com/a/3056220/2054512](https://stackoverflow.com/a/3056220/2054512)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-11-25T07:20:51.790

看看下面的代码。测试并发现在移动和平板设备上工作。

```
<!-- 1\. The <iframe> (video player) will replace this <div> tag. -->
<div id="player"></div>

<script>
  // 2\. This code loads the IFrame Player API code asynchronously.
  var tag = document.createElement('script');

  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // 3\. This function creates an <iframe> (and YouTube player)
  //    after the API code downloads.
  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      height: '390',
      width: '640',
      videoId: 'M7lc1UVf-VE',
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });
  }

  // 4\. The API will call this function when the video player is ready.
  function onPlayerReady(event) {
    event.target.playVideo();
  }

  // 5\. The API calls this function when the player's state changes.
  //    The function indicates that when playing a video (state=1),
  //    the player should play for six seconds and then stop.
  var done = false;
  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.PLAYING && !done) {
      setTimeout(stopVideo, 6000);
      done = true;
    }
  }
  function stopVideo() {
    player.stopVideo();
  }
</script> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-12-10T12:38:16.247

下面的代码在 iPhone、iPad (iOS13)、Safari (Catalina) 上进行了测试。它能够在所有设备上自动播放 YouTube 视频。确保视频**静音**并且打开了**playsinline**参数。这些是使它工作的神奇参数。

```
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0, minimum-scale=1.0, user-scalable=yes">
    </head>
  <body>
<!-- 1\. The <iframe> (video player) will replace this <div> tag. -->
<div id="player"></div>

<script>
  // 2\. This code loads the IFrame Player API code asynchronously.
  var tag = document.createElement('script');

  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // 3\. This function creates an <iframe> (and YouTube player)
  //    after the API code downloads.
  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      width: '100%',
      videoId: 'osz5tVY97dQ',
      playerVars: { 'autoplay': 1, 'playsinline': 1 },
      events: {
        'onReady': onPlayerReady
      }
    });
  }

  // 4\. The API will call this function when the video player is ready.
  function onPlayerReady(event) {
     event.target.mute();
    event.target.playVideo();
  }
</script>
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-19T11:59:12.670

[![预览](../Images/65e4b13064b6b0b648f23511a67af01e.png)](https://i.stack.imgur.com/JGb2S.png) 官方声明“由于此限制，autoplay、playVideo()、loadVideoById() 等函数和参数将无法在所有移动环境中工作。

参考：[https ://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference#Mobile_considerations)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-09T07:15:27.353

有一种方法可以让 youtube 自动播放，并播放完整的播放列表。获取 Android 版 Adblock 浏览器，然后访问 youtube 网站，并将其配置为桌面版页面，关闭 Adblock 浏览器，然后重新打开，您将拥有桌面版，其中自动播放将起作用。

使用桌面版本也意味着 AdBlock 可以工作。移动版本调用独立的 YouTube 播放器，这就是为什么您需要桌面版本的页面，以便自动播放可以工作，广告拦截也可以工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-15T16:04:14.297

如何使用 Youtube 频道直播网址嵌入和自动播放。而不是必须为实时流更改而不断更新的视频 ID。

我混合了两组代码，并想出了一个从频道直播中嵌入的自动播放 Youtube 视频。

我感谢其他两位贡献者的帮助。希望这对其他人有所帮助。

示例流 [https://www.youtube.com/embed/live_stream?channel=UCwobzUc3z-0PrFpoRxNszXQ](https://www.youtube.com/embed/live_stream?channel=UCwobzUc3z-0PrFpoRxNszXQ)

Zubi 于 2016 年 11 月 25 日 7:20 回答的以下代码适用于 Youtube 视频。

Darien Chaffart 的代码位于

[https://stackoverflow.com/a/61126012/1804252](https://stackoverflow.com/a/61126012/1804252)

例子

```
<html>
<head>

</head>
<body>
<center>

<script src="https://www.youtube.com/iframe_api"></script>

<!-- Insert Livestream Video -->
<iframe id="live-video" src="https://www.youtube.com/embed/live_stream?channel=UCwobzUc3z-0PrFpoRxNszXQ&enablejsapi=1" width="100%" height="100%" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen enablejsapi="1"></iframe>

<!-- Basic API code for Youtube videos -->
<script>
  var player;
function onYouTubeIframeAPIReady() {
  player = new YT.Player('live-video', {
    events: {
      'onReady': onPlayerReady,
      'onStateChange': onPlayerStateChange
    }
  });
}
function onPlayerReady() {
  var url = player.getVideoUrl(); /*Use Youtube API to pull Video URL*/
  var match = url.match(/[?&]v=([^&]+)/);
  var videoId = match[1]; /*Use regex to determine exact Video URL*/
  // Insert a new iFrame for the livestream chat after a specific div named chatframe*/
  var livevid = document.createElement("iframe");
  livevid.src = 'https://www.youtube.com/live_chat?v=' + videoId + ''
  livevid.width = '100%';
  livevid.height= '100%';
  document.getElementById("chatframe").appendChild(livevid);
}
    function onPlayerStateChange() {
    }

    function onPlayerReady(event) {
      event.target.playVideo();
    }

    // The API calls this function when the player's state changes.
    //    The function indicates that when playing a video (state=1),
    //    the player should play for six seconds and then stop.
    var done = false;
    function onPlayerStateChange(event) {
      if (event.data == YT.PlayerState.PLAYING && !done) {
        setTimeout(stopVideo, 90000000);
        done = true;
      }
    }
    function stopVideo() {
      player.stopVideo();
    }

</script>

</center>
</body>
</html> 
```

# php - 登录成功后重定向到新页面

> ID：15090785
> 
> 赞同：6
> 
> 时间：2013-02-26T13:49:07.420
> 
> 标签：php, html, forms, login

我确定这个问题之前已经被问过，但我已经彻底寻找答案但无济于事。（我见过的唯一答案涉及 ajax）但我只使用 javascript、PHP 和 HTML。

我有一个 login.php 页面，并且我已经创建了一个 HTML 页面，该页面将在用户成功登录后立即成为登录页面。我该怎么做？

下面是我的登录页面的代码，登录后的登陆页面叫做transfer.html：

**登录.PHP**

```
 <div id="content">
     <h3>Login to Internet Banking</h3>
     <form id="login" action="" method="post">
        <p>
          <label for="userid">UserID:</label>
          <input type="text" name="UserID" id="UserID"/>
        </p>
        <p>
          <label for="PIN">PIN:</label>
          <input type="password" name="PIN" id="PIN" />
        </p>

        <p>
          <input type="submit" name="btnSend" value="Login" class="submit_button" />

        </p>
      </form>
      <td>&nbsp;</td>
 <p>
        Not yet registered?
 <a href="registration.php">Click here to register</a>
 </p>

  <div id="wrap">
        <!-- start PHP code -->
        <?php

            mysql_connect("localhost", "root", "") or die(mysql_error()); // Connect to database server(localhost) with UserID and PIN.
            mysql_select_db("registrations") or die(mysql_error()); // Select registration database.

            if(isset($_POST['name']) && !empty($_POST['name']) AND isset($_POST['PIN']) && !empty($_POST['PIN'])){
                $UserID = mysql_escape_string($_POST['name']);
                $PIN = mysql_escape_string(md5($_POST['PIN']));

                $search = mysql_query("SELECT UserID, PIN, active FROM users WHERE UserID='".$UserID."' AND PIN='".$PIN."' AND active='1'") or die(mysql_error()); 
                $match  = mysql_num_rows($search);

                if($match > 0){
                    $msg = 'Login Complete! Thanks';
                }else{
                    $msg = 'Login Failed!<br /> Please make sure that you enter the correct details and that you have activated your account.';
                }
            }

        ?>
        <!-- stop PHP Code -->
        <?php 
            if(isset($msg)){ // Check if $msg is not empty
                echo '<div class="statusmsg">'.$msg.'</div>'; // Display our message and add a div around it with the class statusmsg
            } ?>

    </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-26T13:53:34.833

首先，将所有 PHP 代码移到顶部。没有它，我下面的代码将无法工作。

要进行重定向，请使用：

```
header('Location: http://www.example.com/'); 
```

另外，请考虑我的建议。由于这不是今天的第一个问题，而且您的所有问题都与基础知识有关，因此您应该考虑阅读一些好的 PHP 书籍以了解其工作原理。

在这里您可以找到免费书籍的有用链接： [https ://stackoverflow.com/tags/php/info](https://stackoverflow.com/tags/php/info)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-26T13:54:46.013

> **使用 php 代码生成的 Javascript 重定向：**

```
 if($match > 0){
     $msg = 'Login Complete! Thanks';
     echo "<script> window.location.assign('index.php'); </script>";
 }
 else{
     $msg = 'Login Failed!<br /> Please make sure that you enter the correct  details and that you have activated your account.';
 } 
```

> **仅限 PHP 重定向：**

```
<?php
    header("Location: index.php"); 
    exit;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:53:15.297

试试 header("Location:home.php"); 而不是显示 $msg = '登录完成！谢谢'; 希望它会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:53:17.840

您需要`location`按如下方式设置标题：

```
header('Location: http://www.example.com/'); 
```

当然替换`http://www.example.com`为您的登录页面的网址。

在您完成用户登录的地方添加此内容。

**注意**：重定向用户时将立即重定向，因此您的消息可能不会显示。

此外，您需要将 PHP 代码移动到文件顶部才能使此解决方案正常工作。

另一方面，请参阅我上面关于使用已弃用`mysql`语句的评论，并考虑使用更新、更安全和改进的`mysqli`or`PDO`语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-05T06:45:25.640

可以这样使用

```
if($match > 0){
 $msg = 'Login Complete! Thanks';
 echo "<a href='".$link_address."'>link</a>";
 }
else{
 $msg = 'Login Failed!<br /> Please make sure that you enter the correct  details and that you have activated your account.';
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-06-17T15:27:18.773

您还可以在登录后提供指向页面的链接，并在 10 秒后使用 javascript 自动重定向。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-08-12T13:20:49.043

只需在您使用 PHP 代码提供的最后一条消息之后添加以下代码

打印'window.location.assign("index.php")

# google-maps - 如何更新选定地点类型的新标记..？

> ID：15090791
> 
> 赞同：3
> 
> 时间：2013-02-26T13:49:27.047
> 
> 标签：google-maps, google-places-api, drag, google-places

我创建了一个自定义 Google 地图，以显示不同类型的地点。当我单击`checkbox`列表中的菜单项时（请参阅 HTML）。它将该类型的标记放置在距地图中心 20000 米（20 公里）的半径范围内。现在，当我将地图拖到新位置时，如何从新的中心位置更新半径值，然后请求该区域的地点类型。地点类型将从`checkbox`已选择的 es 中获取。

每次我将地图拖到新位置时，都应该重复此操作。

我在下面提供 HTML 和 JS 代码以供参考：

```
<ul class="sub-menu">
    <li><a>Health</a>
        <ul class="sub-menu">
           <li><a> <input type="checkbox" class="map-checkbox" id="dentist" name="dentist" value="dentist" /> Dentist</a></li>
            <li><a> <input type="checkbox" class="map-checkbox" id="doctor" name="doctor" value="doctor" /> Doctor</a></li>
            <li><a> <input type="checkbox" class="map-checkbox" id="gym" name="gym" value="gym" /> Gymnasium</a></li>
            <li><a> <input type="checkbox" class="map-checkbox" id="health" name="health" value="health" /> Health</a></li>
            <li><a> <input type="checkbox" class="map-checkbox" id="hospital" name="hospital" value="hospital" /> Hospital</a></li>
            <li><a> <input type="checkbox" class="map-checkbox" id="pharmacy" name="pharmacy" value="pharmacy" /> Pharmacy</a></li>         
         </ul> 
     <li><a>Travel</a>
        <ul class="sub-menu">
           <li><a> <input type="checkbox" class="map-checkbox" id="airport" name="airport" value="airport" /> Airport</a>
            <li><a> <input type="checkbox" class="map-checkbox" id="bus_station" name="bus_station" value="bus_station" /> Bus Station</a></li>
            <li><a> <input type="checkbox" class="map-checkbox" id="car_rental" name="car_rental" value="car_rental" /> Car Rental</a></li>
            <li><a> <input type="checkbox" class="map-checkbox" id="subway_station" name="subway_station" value="subway_station" /> Subway Station</a></li>
            <li><a> <input type="checkbox" class="map-checkbox" id="taxi_stand" name="taxi_stand" value="taxi_stand" /> Taxi Stand</a></li> 
            <li><a> <input type="checkbox" class="map-checkbox" id="train_station" name="train_station" value="train_station" /> Train Station</a></li>
            <li><a> <input type="checkbox" class="map-checkbox" id="travel_agency" name="travel_agency" value="travel_agency" /> Travel Agency</a></li>
         </ul>
     </li>
</ul> 
```

Javascript代码：

```
var loc_geocoder;
var loc_map;
var loc_marker;
var loc_image = tpl_dir + '/images/marker.png';
var placetype = [];
var selected_markers = [];

function initialize() {

//fetch lat,lng values from the post
post_location();

 // prepare Geocoder
 geocoder = new google.maps.Geocoder();

//set initial position (from the post)
map = new google.maps.Map(document.getElementById('location_map'),     {
    zoom: 10,
    center: postlatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
        });
            loc_marker = new google.maps.Marker({
            position: postlatlng,
            title: 'CFP Roar',
            map: map,
            icon: loc_image
    });
 google.maps.event.addListener(map,'dragend',function(event) {

    clearOverlays();
    selectedMarkers();
    findPlaces(selected_markers);
    }
}

function selectedMarkers() {
 selected_markers = [];
$('.map-checkbox').each(function() {
        var $this = $(this);
        if($this.is(':checked')){
    selected_markers.push($this.val());
        }
});
}

function clearOverlays() {
if (markers) {
    for (i in markers) {
         markers[i].setMap(null);
    }
}
}
function findPlaces(type) {
var radius;
var lat = document.getElementById('post_lat').value;
var lng = document.getElementById('post_lng').value;
var cur_location = map.getCenter();
var request = {
    location: cur_location,
    radius: 50000,
    types: [type]
};
if (keyword) {
    request.keyword = [keyword];
}
service = new google.maps.places.PlacesService(map);
service.search(request, createMarkers);
}

function createMarkers(results, status) {
if (status == google.maps.places.PlacesServiceStatus.OK) {
    // if we have found something - clear map (overlays)
    //clearOverlays();
    // and create new markers by search result
    for (var i = 0; i < results.length; i++) {
        createMarker(results[i]);
    }
    //console.log(results);
    //$('#test').append( markers );
} else if (status == google.maps.places.PlacesServiceStatus.ZERO_RESULTS) {
    alert('Sorry, nothing is found');
}
}
function createMarker(obj) {
    var mark = new google.maps.Marker({
    position: obj.geometry.location,
    map: map,
    title: obj.name,
marktype: placetype,
icon: gp_tpl_dir + '/gp/images/places/' + placetype + '.png'
});
     markers.push(mark);
//mark_array.push(mark);
    var infowindow = new google.maps.InfoWindow({
    content: '<img src="' + obj.icon + '" /><font style="color:#000;">' + obj.name +
    '<br />Rating: ' + obj.rating + '<br />Vicinity: ' + obj.vicinity + '</font>'
});
    google.maps.event.addListener(mark, 'click', function() {
    clearInfos();
    infowindow.open(map,mark);
});
   infos.push(infowindow);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:32:13.517

我不太确定我是否了解您要执行的操作，但也许可以查看“center_change”侦听器：

[https://developers.google.com/maps/documentation/javascript/events](https://developers.google.com/maps/documentation/javascript/events)

# jquery - Fancybox：不透明度问题

> ID：15090795
> 
> 赞同：0
> 
> 时间：2013-02-26T13:49:41.697
> 
> 标签：jquery, fancybox

我对以下语法/代码不起作用（不再）是对的吗？

```
$(".fancybox").fancybox({
    helpers : {
        overlay : {
            opacity : 0.9,
            css : {
                'background-color' : '#f00' 
            }
        }
    }
}); 
```

看看：http: [//jsfiddle.net/jRsjK/3375/](http://jsfiddle.net/jRsjK/3375/)

……但只有这个？

```
$(".fancybox").fancybox({
    helpers : {
        overlay : {
            css : {
                'background-color' : 'rgba(255, 0, 0, .9)'
            }
        }
    }
}); 
```

看看：http: [//jsfiddle.net/jRsjK/3374/](http://jsfiddle.net/jRsjK/3374/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:48:27.357

如果您使用的是格式`rgba(255, 0, 0, .9)`，那么 css 属性应该是`background`，而不是`background-color`上面的示例代码。然后您的脚本应如下所示：

```
$(".fancybox").fancybox({
    helpers : {
        overlay : {
            css : {
                'background' : 'rgba(255, 0, 0, .9)'
            }
        }
    }
}); 
```

...请参阅**[JSFIDDLE](http://jsfiddle.net/MjyWX/1/)**（我设置了较低的不透明度值以使其更明显）

请记住，如果您不设置任何`background`属性，fancybox 将使用半透明的**.png**图像作为背景 (fancybox_sprite.png)。如果您设置`background-color`属性（如上面的示例），仍将使用*png精灵，并且可能会影响您正在寻找的不透明度效果。*

似乎自 2.1.x 版以来已删除了 的`opacity`API 选项`overlay`（最后使用的是 v2.0.6）

# javascript - 具有自定义标头和请求正文作为 JSON 字符串的跨域 jquery ajax 请求

> ID：15090797
> 
> 赞同：0
> 
> 时间：2013-02-26T13:49:46.940
> 
> 标签：javascript, jquery, ajax, preflight

我需要`JSON` `ajax request`从另一个域创建一个。在我认为我克服了跨域问题之后，这就是我坚持的地方：

我需要添加我的自定义“ `myCustomHeader`”标题 - 从 a 很容易`server`，但从`client`...

我们添加了它们

```
$.ajax({
    type: 'POST',
    data: put the results of your header request here,
    url: 'http://server.com/service',
    beforeSend: function (xhr) { 
        xhr.setRequestHeader('myCustomHeader', '1') 
    },
    success: function(data) {    
        alert('success.');
    }
}); 
```

这会生成一个`preflight`带有我想要的标题的标题，没有`values`（`CSV`），但它们不会出现在`request`本身的标题中（如 `myCustomHeader=X`）......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:44:58.393

为此，您可以使用 CORS。

示例代码：

```
jQuery.support.cors = true; 

function CrosDom_ajax(url) {
        if (window.XDomainRequest
        && $.browser.msie
        && $.browser.version < 10) {
        xdr = new XDomainRequest();
        if (xdr) {
            xdr.onload = function () {
               alert(xdr.responseText);

            };
            xdr.open("get", url);
            xdr.send();
        }
        }
        else {
            $.ajax({
                url: url,
                success: function (response) {

                },
                error: function (data) {
                }
            });
         }
    } 
```

您还需要在服务器端编写以下代码，以允许跨域访问

```
Response.AppendHeader("Access-Control-Allow-Origin", "*"); 
```

# c++ - 命名空间和包含生成链接错误

> ID：15090800
> 
> 赞同：1
> 
> 时间：2013-02-26T13:49:47.190
> 
> 标签：c++, header-files, lnk2005

当我遇到 lnk2005 错误时，我正在使用命名空间。我不知道如何解决这个错误。这是错误：

```
1>Source.obj : error LNK2005: "int Chart::Bars::d" (?d@Bars@Chart@@3HA) already defined in Chart.obj
1>Source.obj : error LNK2005: "class foo Chart::l" (?l@Chart@@3Vfoo@@A) already defined in Chart.obj
1>Source.obj : error LNK2005: "int Chart::t" (?t@Chart@@3HA) already defined in Chart.obj
1>C:\Users\bnm\dev\examples\play\nmspca\Debug\nmspca.exe : fatal error LNK1169: one or more multiply defined symbols found
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:00.49
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

这是代码...

图表.h

```
#pragma once

#include "foo.h"

namespace Chart
{
    int t;

    foo l;

    namespace Bars
    {

        int d;
    }

} 
```

Foo.h

```
#pragma once

class foo
{
public:
    int ss;
    char* h;

}; 
```

图表.cpp

```
#include "Chart.h"

using namespace Chart;

int main ()
{
    l.h = "g";
} 
```

源.cpp

```
#include "Chart.h"

using namespace Chart;

int test()
{
    l.ss = 0;

    return l.ss;
} 
```

当 Source.cpp 中的 #include "Chart.h" 被删除时，问题就消失了。但是，Source.cpp 需要 #include "Chart.h" 来定义命名空间。

在 Chart.cpp 和 Source.cpp 中表达“命名空间图表”的正确方法是什么，以便一切都能编译？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T13:59:19.567

如果您在头文件中定义任何对象并将该头文件包含在多个翻译单元中，则这些对象现在会被定义多次。这是你遇到的问题。, 和引入对象的声明`t`，您已经在头文件中这样做了。`l``d`

支持命名空间范围变量的正确方法是将它们声明为`extern`在头文件中。这使得它们只是声明而不是定义。然后，在单个实现文件中定义它们。

更改`Chart.h`为：

```
#pragma once

#include "foo.h"

namespace Chart
{
    extern int t;

    extern foo l;

    namespace Bars
    {

        extern int d;
    }

} 
```

然后在一个实现文件中，也许`Chart.cpp`，做：

```
int Chart::t;
foo Chart::t;
int Chart::Bars::d; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:59:47.417

在您包含 Chart.h 的任何地方，您都有效地将变量 t、l 和 d 放入这些对象中。将它们声明为 extern，然后在 Chart.cpp 中定义它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T15:42:28.733

我遇到了完全相同的问题，我发现了一个workarroud。

chart.h 变为：

```
#pragma once

#include "foo.h"

class Chart{
    static int t;
    static foo l;
    class Bars
    {
        static int d;
    };
}; 
```

并在 chart.cpp 中定义变量

```
int Chart::t;
foo Chart::l;
int Chart::Bars::d; 
```

丑陋，我知道，但至少在需要使用 var 的地方，语法是相同的。

这样，只创建一个 .obj 文件，其中包含防止多重定义错误的变量。
如果您可以在可以解决问题的命名空间上声明一个静态变量，我还没有尝试过。

编辑：

***PS这个解决方案在msvc上给出了一些奇怪的错误，好像每次包含它时，代码部分都会引用不同的变量***

在我自己的程序上测试了静态内部命名空间，它似乎工作。
示例.h：

```
namespace sdl{
    static SDL_Surface* screen;

    static int xres = 640;
    static int yres = 480;
    static int bpp  = 32;
    static int flags = SDL_ASYNCBLIT;

}; 
```

# c++ - 移植到windows时程序崩溃

> ID：15090801
> 
> 赞同：-1
> 
> 时间：2013-02-26T13:49:46.763
> 
> 标签：c++, linux, windows, porting, sfml

正如标题所说，我已经在 Linux Mint 14 上成功编译、链接并运行了一个用 sfml-1.6 制作的程序。我使用 g++ 进行编译。但是，一旦我将源文件移动到 Windows 并尝试编译为 sfml 库的 Windows 等效项，它就会崩溃。该程序可以正常编译和链接，但在到达 main 之前就崩溃了。我确保我自己的 .h 文件中没有任何全局对象/变量。但我不能为 sfml 库做到这一点。我怀疑可能是因为库坏了，所以我移植了 sfml 2.0 的代码，问题仍然存在。关于我做错了什么的任何线索？我还确保我不使用任何特定于平台的标头。

这是我的 main.cpp

```
#include <SFML/System.hpp>
#include <SFML/Window.hpp>
#include <SFML/Graphics.hpp>
#include "World.h"
#include <sstream>
#include <vector>
#include <zip.h>

enum states
{
    MENU,
    GAME,
    PAUSE,
    EXIT,
    DIE
};
player plr;
sf::Clock timer;
void getKeys(const sf::Input& input);
std::string floatToString(float flt);

int main(int argc, char** argv) 
{
    sf::RenderWindow window(sf::VideoMode(1024, 768), "sfTest");
    window.SetFramerateLimit(60);
    sf::Music startSong;
    sf::Music endSong;
    sf::Music s1, s2, s3;
    sf::String musicBy;
    musicBy.SetText("Music by Kevin McLeod: www.incompetech.com");
    if(!s1.OpenFromFile("Batty McFaddin.ogg"))
        return -1;
    if(!s2.OpenFromFile("Merry Go.ogg"))
        return -1;
    if(!s3.OpenFromFile("One-eyed Maestro.ogg"))
        return -1;
    if(!endSong.OpenFromFile("One-eyed Maestro.ogg"))
        return -10;

    if(!startSong.OpenFromFile("Comedic Juggernaut.ogg"))
        return -15;

    endSong.SetVolume(50);

    std::vector<sf::Music*> playList;
    std::vector<sf::Music*>::iterator mIt;
    s1.SetVolume(25);
    s2.SetVolume(25);
    s3.SetVolume(25);
    playList.push_back(&s2);
    playList.push_back(&s3);
    playList.push_back(&s1);    

    startSong.SetLoop(true);
    startSong.SetVolume(50);
    const sf::Input& input = window.GetInput();

    plr.setSpeed(.5);
    plr.setMaxSpeed(15.0);
    plr.setJumpForce(.4f);
    plr.setJumpSpeed(16.f);

    int state = MENU;
    sf::String str;
    str.SetText("Welcome to fatrunning!");
    sf::String str2;
    str2.SetText("Developed by Echoes Entertainment");
    str2.Move(0, 100);
    sf::String cont;
    cont.SetText("Please press enter to play...");
    cont.Move(0, 30);
    sf::String spd;

    sf::String menuHelp;
    menuHelp.SetText("Stand on the block equivalent to the level (0-15) and press TAB");
    menuHelp.Move(0, 30);
    float endTime = 60*5;
    float curTime = 0;

    sf::Sprite menu;
    sf::Image mim;
    mim.LoadFromFile("MenuBackground.png");
    menu.SetImage(mim);

    sf::String scr;
    sf::String thanks("Thanks for playing! Your score was: ");
    //sf::String tarantulas("                             Tarantual tarantulas         Everybody loves tarantulas         if there's just fuzz where your hamster was         it's propably because of tarantulas                                             They're so soft         and they're so furry         And they're so cute         if your vision's blurry         all of mine got free         but dont you worry         though they're crawling up your wall in a big hurry                                    Tarantual tarantulas         Everybody loves tarantulas         if there's just fuzz where your hamster was         it's propably because of tarantulas                                             Don't look now but i have a feeling         there's one above you on your ceiling         but when they crawl they never fall                 unless the person under them is nervous at all                            Tarantual tarantulas           Everybody loves tarantulas         if there's just fuzz where your hamster was             it's propably because of tarantulas                 \t        \t                   can you feel that itch   on the top of your head         it could be one of them crawling instead         but it wont bite unless it senses fear         so just stay calm til' it's gone in a year                \t\t                              Tarantual tarantulas            Everybody loves tarantulas         if there's just fuzz where your hamster was         it's propably because of tarantulas          Tarantual tarantulas         Everybody loves tarantulas         if there's just fuzz where your hamster was         it's propably because of tarantulas         if there's just fuzz where your hamster was         it's propably because of tarantulas          Tarantulas tarantulas         it's propably because of tarantulas");
    //.tarantulas.Move(3000, 0);
    thanks.Move(0, 30);
    scr.Move(500, 30);

    World world;
    world.addLevel("lvl1", "lvl1.txt");
    world.addLevel("lvl2", "lvl2.txt");
    world.addLevel("lvl3", "lvl3.txt");
    world.addLevel("lvl4", "lvl4.txt");
    world.addLevel("lvl5", "lvl5.txt");
    world.addLevel("lvl6", "lvl6.txt");
    world.addLevel("lvl7", "lvl7.txt");
    world.addLevel("lvl8", "lvl8.txt");
    world.addLevel("lvl9", "lvl9.txt");
    world.addLevel("lvl10", "lvl10.txt");
    world.addLevel("lvl11", "lvl11.txt");
    world.addLevel("lvl12", "lvl12.txt");
    world.addLevel("lvl13", "lvl13.txt");
    world.addLevel("lvl14", "lvl14.txt");
    world.addLevel("lvl15", "lvl15.txt");
    world.setMenuLevel("menu.txt");
    world.regPlr(plr);
    bool once = false;
    bool unodos = false;
    float finalScore = 0;

    while (state != DIE) 
    {
        sf::Event e;
        while (window.GetEvent(e))
        {
            if ( e.Type == sf::Event::Closed )
            {
                window.Close();
                state = EXIT;
            }
            if( e.Type == sf::Event::KeyPressed )
            {
                if(e.Key.Code == sf::Key::Return)
                {
                    if(!unodos)
                    {
                        state = GAME;
                        unodos = true;
                    }
                }
            }
        }
        getKeys(input);
        window.Clear();
        switch(state)
        {
            case MENU:
                if(startSong.GetStatus() == sf::Sound::Stopped)
                    startSong.Play();
                window.Draw(menu);
                window.Draw(str);
                window.Draw(str2);
                window.Draw(cont);
                break;
            case GAME:
                if(startSong.GetStatus() == sf::Sound::Playing)
                {
                    mIt = playList.begin();
                    (*mIt)->Play();
                    startSong.Stop();
                }
                if((*mIt)->GetStatus() == sf::Sound::Stopped)
                {
                    mIt++;
                    if(mIt == playList.end())
                        mIt = playList.begin();
                    (*mIt)->Play();
                }
                timer.Reset();
                spd.SetText(floatToString(endTime-plr.time));
                world.drawWorld(window);
                world.update(input);
                plr.update();
                window.Draw(plr.getSprite());
                window.Draw(spd);
                plr.time+=timer.GetElapsedTime();
                if(plr.time >= endTime || world.quit)
                {
                    state = EXIT;
                    plr.time = endTime;
                }
                if(world.atMenu)
                    state = PAUSE;
                break;
            case PAUSE:
                if(startSong.GetStatus() == sf::Sound::Playing)
                    startSong.Stop();
                spd.SetText(floatToString(endTime-plr.time));
                plr.update();
                world.drawWorld(window);
                world.update(input);
                window.Draw(plr.getSprite());
                window.Draw(spd);
                window.Draw(menuHelp);
                if(!world.atMenu)
                    state = GAME;
                if(world.quit)
                    state = EXIT;
                break;
            case EXIT:
                if(!once)
                {
                    endSong.Play();
                    (*mIt)->Stop();
                    world.addLevel("end", "end.txt");
                    world.setLevel("end");
                    once = true;
                    finalScore = plr.score;
                    finalScore += (endTime-plr.time);
                }
                //tarantulas.Move(-3.5, 0);
                plr.update();
                world.drawWorld(window);
                window.Draw(plr.getSprite());
                scr.SetText(floatToString(finalScore));
                //window.Draw(tarantulas);
                window.Draw(musicBy);
                window.Draw(thanks);
                window.Draw(scr);
                if(world.curLvl->atEnd)
                    state = DIE;
                break;  
            case DIE:
                window.Close();
                break;
            default:
                break;
        }
        window.Display();
    }

    return 0;
}

std::string floatToString(float flt)
{
    std::stringstream ss;
    ss << flt;
    return ss.str();
}

void getKeys(const sf::Input& input)
{
    if(input.IsKeyDown(sf::Key::D))
    {
        plr.isAcc = true;
        plr.right();
    }           
    else if(input.IsKeyDown(sf::Key::A))
    {
        plr.isAcc = true;
        plr.left();
    }
    if(input.IsKeyDown(sf::Key::Space))
    {
        plr.isJump = false;
        plr.jump();
    }
    if(!input.IsKeyDown(sf::Key::D) && !input.IsKeyDown(sf::Key::A))
    {
        plr.isAcc = false;
    }
    if(!input.IsKeyDown(sf::Key::Space))
        plr.isJump = true;
} 
```

That is the whole main.cpp, if you need to look at the other sources, ask me. But the program crashes BEFORE it reaches main. It doesn't even reach the enum define.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:43:01.260

This could be due to any undefined or unspecified behavior in the constructors of objects with static lifetime. One of the most frequence causes, however, is order of initialization issues. Do some of your objects with static lifetime use other objects with static lifetime in their constructor? For example, does the constructor for player use a static object defined in World? Or even something from SFML? (A quick glance shows some objects with static lifetime in the library. You shouldn't use any of these in any of your constructors of objects with static lifetime.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:16:04.503

Run the program in the debugger ([windbg.exe](http://msdn.microsoft.com/en-us/library/windows/hardware/hh406274%28v=vs.85%29.aspx)), that should show you where the exception occurs, with helpful progress text in the output window about what's been loaded so far, any 'swallowed' exceptions, and you can take it from there.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:55:54.123

It's possible the crash is due to some incompatibility between how the EXE was compiled and how the library was compiled... check your code-generation flags, character sets, etc.

# php - OOP 工厂方法与构造函数

> ID：15090803
> 
> 赞同：1
> 
> 时间：2013-02-26T13:49:50.527
> 
> 标签：php, factory-pattern

我有一个顶级班，比方说学校。

还有几个课程扩展了学校课程。

通常，如果我必须调用其中一个子类，我会使用：

`new Math('aaa')`, 或`new English(array('foo'))`;

每个子类都有不同的参数。

现在，什么更好：

1）在 School 类中创建工厂方法，所以：

`School::Factory('aaa')`将`Math('aaa')`基于给定参数的类返回到 Factory() 方法

2）还是直接调用每个子类？

编辑：我只有两个子类，我的问题是我不知道这样做是否值得在生产代码中简化一点。我只是检查哪些参数传递给了 Factory 方法，并根据这些信息调用这两个类之一。你怎么看？

一方面，我将能够编写更简单的代码。另一方面，每次我需要添加新的子类时（尽管这样做的机会很少），我也需要更改 Factory() 方法，所以我在这里有一个依赖项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:33:50.220

> 1）在 School 类中创建工厂方法，所以：

你说你有 2 个类扩展学校。因此，学校**不应**充当工厂。父类不应该对其子类/子类一无所知。

> 2）还是直接调用每个子类？

或者你可以有一个“CourseFactory”或“LectureFactory” `createMath( aaa )`，例如。或者视情况而定，也许`createLecture("math")`。

但是，在您的示例中，数学或英语*扩展*学校是没有意义的（除非您指的是 MathSchool 和 EnglishSchool，但我将其理解为 MathCourse 和 EnglishCourse）

# php - 是否有一些纯粹的 PHP GIT 服务器？

> ID：15090811
> 
> 赞同：6
> 
> 时间：2013-02-26T13:50:07.260
> 
> 标签：php, git

我的虚拟主机上只有 PHP，想在那里设置私有 GIT 存储库。有什么选择？有纯 PHP GIT 实现吗？

# r - 未找到 R 安装 2.15.2 Renvirons，Ubuntu 12.10 x64

> ID：15090817
> 
> 赞同：6
> 
> 时间：2013-02-26T13:50:36.410
> 
> 标签：r, installation, package, ubuntu-12.10

Ubuntu 12.10 x64，R 2.15.2

我很茫然，我已经安装了很多次 R，安装时从来没有遇到过丝毫问题。然而，这一次当我启动程序时（通过使用 GUI 或在终端中键入“R”）我得到了这个；

> 找不到系统 Renviron 错误：'utils' 的 loadNamespace() 中的 .onLoad 失败，详细信息：调用：options(op.utils[toset]) 错误：'editor' 的值无效
> 
> R 版本 2.15.2 (2012-10-26) -- “不给糖就捣蛋” 版权所有 (C) 2012 统计计算的 R 基金会 ISBN 3-900051-07-0 平台：x86_64-pc-linux-gnu (64-少量）
> 
> R 是免费软件，绝对不提供任何担保。欢迎您在某些条件下重新分发它。键入“license()”或“licence()”以获取分发详细信息。
> 
> 自然语言支持，但在英语语言环境中运行
> 
> R 是一个有许多贡献者的协作项目。输入“contributors()”以获取更多信息，输入“citation()”以了解如何在出版物中引用 R 或 R 包。
> 
> 输入 'demo()' 获得一些演示，输入 'help()' 获得在线帮助，或者输入 'help.start()' 获得 HTML 浏览器界面的帮助。输入 'q()' 退出 R。
> 
> 错误：'utils'的loadNamespace（）中的.onLoad失败，详细信息：
> 调用：选项（op.utils [toset]）错误：'编辑器'的值无效另外：警告消息：选项中的包“方法”（“defaultPackages ") 未找到错误：.onLoad 在 loadNamespace() 中为 'utils' 失败，详细信息：调用：options(op.utils[toset]) 错误：'editor' 的值无效另外：警告消息：包 'utils'在 options("defaultPackages") 中找不到错误：.onLoad 在 loadNamespace() 中失败，用于 'utils'，详细信息：调用：options(op.utils[toset]) 错误：'editor' 的值无效另外：警告消息：在启动期间未找到选项（“defaultPackages”）中的包'stats' - 警告消息：未找到选项（“defaultPackages”）中的包“方法”

没有任何效果，没有找到任何包。我从未接受过任何有关如何使用 Ubuntu 的培训，但据我所知，我缺少推荐的 R 软件包。

我已经尝试使用终端和 Synaptics 包管理器完全删除 R，然后从 CRAN 服务器重新下载（对于我的互联网连接来说下载速度似乎太快），然后重新安装。相同的消息。我不知所措。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T01:32:07.863

我遇到了同样的问题，设置 EDITOR 环境变量为我解决了这个问题。

试试例如

```
EDITOR=vim R 
```

如果可行，请放行

```
export EDITOR=vim 
```

在您的 ~/.profile 末尾

**编辑：**问题的根源是 /etc/R/Renviron 没有被 R 阅读。正如 Dirk 评论他的回复，

```
sudo chmod 644 /etc/R/Renviron 
```

解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:57:42.210

错误似乎如下：

```
error: invalid value for 'editor' 
```

您可以尝试在终端中键入以下内容以了解`EDITOR`当前环境变量的值是什么：

```
echo $EDITOR 
```

也许您应该能够从命令行启动 R，例如：

```
EDITOR="" R 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:32:57.823

但它在它开始之前就开始变得很糟糕`editor`——它似乎无法加载你保存的环境。你能试一下吗

```
 R --no-restore-data 
```

甚至

```
 R --vanilla 
```

不用说，它对我有用，唯一的配置更改是在 Java 堆栈中（请参阅 Changelog 文件）。

有一个专门`r-sig-debian`的 Debian 和 Ubuntu 软件包列表，您可以在其中找到我（Debian 软件包）、Johannes（Debian backports，可通过 CRAN 获得）和 Michael（Ubuntu 构建，可通过 CRAN 获得）。我倾向于在我的 Ubuntu 机器上运行 Michael 的软件包并且没有遇到问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T07:10:19.383

我在安装 R 和 RStudio 后也遇到了这个问题。他们都出现了和你一样的问题。我在 /etc/R 中找不到 .Renviron。然后我在互联网上搜索，发现我应该使用这个文件为我的 R 设置环境。所以我需要做的就是新建一个“.Renviron”文件并写入它正确。幸运的是，我在 /etc/R 中找到了一个名为“Renviron.site”的文件，在其中我找到了几行注释：

```
 # ## Example .Renviron on Windows
   # R_LIBS=C:/R/library
   # MY_TCLTK="c:/Program Files/Tcl/bin"…… 
```

我想这对编写我的 .Renviron 文件很有用。所以我在终端写了这些：

`sudo gedit /etc/R/.Renviron` .Renviron 文件由 gedit 自动创建并打开。稍后我复制

`R_LIBS=~/R/library`

`PAGER=/usr/local/bin/less`

`R_DEFAULT_PACKAGES='utils,grDevices,graphics,stats'`

进入.Renviron文件并保存。RStudio正常工作！

# java - 将非英文字符的数据传递到 Web 服务器

> ID：15090822
> 
> 赞同：0
> 
> 时间：2013-02-26T13:50:56.350
> 
> 标签：java, jsp, tomcat

从 html ，我使用非英文字符的数据到控制器。例如）在 url 中传递多章字节作为发布请求。

但在控制器中，数据接收为

多«字节

任何人都可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:23:44.933

首先，您需要告诉浏览器您正在提供 UTF-8 内容并期望 UTF-8 提交。您可以通过将行放在 JSP 的最顶部来做到这一点，

```
<%@page pageEncoding="UTF-8" %> 
```

或者通过添加以下条目，`web.xml`这样您就不需要重复`@page`所有 JSP：

```
<jsp-config>
    <jsp-property-group>
        <url-pattern>*.jsp</url-pattern>
        <page-encoding>UTF-8</page-encoding>
    </jsp-property-group>
</jsp-config> 
```

然后，您需要告诉 servlet API 使用 UTF-8 来解析 POST 请求参数。您可以通过创建一个基本上执行以下操作的[servlet 过滤器来做到这一点：](https://stackoverflow.com/tags/servlet-filters/info)

```
@WebFilter("/*")
public class CharacterEncodingFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        req.setCharacterEncoding("UTF-8");
        chain.doFilter(req, res);
    }

    // ...
} 
```

就这样。您**不需要**（在使用 MSIE 浏览器时`<form accept-charset>`这会使事情变得更糟）并且您**不一定**需要`<meta http-equiv="content-type">`（仅在从本地磁盘文件系统而不是通过 HTTP 提供页面时才解释）。

请注意，当您使用`System.out.println()`logger 来验证提交的值时，它也应该被配置为使用 UTF-8 来呈现字符，否则仍然会被 Mojibake[误导](http://en.wikipedia.org/wiki/Mojibake)。

### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:53:25.187

您可以在您的操作方法中使用它

```
request.setCharacterEncoding("UTF-8"); 
```

这必须在任何调用之前`request.getParameter()`调用

并根据您的需要更改编码

你也可以参考这个

[HttpServletRequest - setCharacterEncoding 似乎什么都不做](https://stackoverflow.com/questions/3278900/httpservletrequest-setcharacterencoding-seems-to-do-nothing)

[request.getQueryString() 似乎需要一些编码](https://stackoverflow.com/questions/3029401/java-servlet-and-utf-8-problem)

# python - 导入__module__ python：为什么下划线？

> ID：15090825
> 
> 赞同：4
> 
> 时间：2013-02-26T13:51:08.540
> 
> 标签：python, import, module, double-underscore

我是 Python 新手，已经开始编写其他人编写的代码。

在从 Pypi 下载的包的源代码中，我注意到使用

```
import __module__ 
```

`src`使用包文件夹中定义的函数和类。

这是常见的做法吗？我实际上无法真正理解这种语法，你能给我解释一下或给我一些参考吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T13:53:39.230

这是一些内置对象的 python 约定。[从 PEP8](http://www.python.org/dev/peps/pep-0008/)：

> `__double_leading_and_trailing_underscore__`: 存在于用户控制的命名空间中的“神奇”对象或属性。例如`__init__`，`__import__`或`__file__`。永远不要发明这样的名字；仅按记录使用它们。

但归根结底，它不是一种理解与否的“语法”，`__module__`它只是一个带有下划线的名称。它与 不同且完全无关`module`。

向您展示它只是一个名称的示例：

```
>>> __foo__ = 42
>>> print foo
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'foo' is not defined

>>> print _foo
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name '_foo' is not defined

>>> print __foo
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name '__foo' is not defined

>>> print __foo__
42

>>> type(__foo__)
<type 'int'> 
```

它本身并没有什么特别之处。

如果没有更多关于你在哪里看到的信息，很难说作者的意图是什么。要么他们正在导入一些 python 内置函数（例如`from __future__ import...`），要么他们忽略了 PEP8，只是以这种风格命名了一些对象，因为他们认为它看起来很酷或更重要。

# python - 使用 Requests 库对响应进行单元测试

> ID：15090828
> 
> 赞同：1
> 
> 时间：2013-02-26T13:51:09.673
> 
> 标签：python, unit-testing, urllib2, python-requests

我正在从 URLLib2 切换到 Requests，但我不确定如何最好地复制我当前的单元测试功能：我安装了一个自定义[OpenerDirector](http://docs.python.org/2/library/urllib2.html#urllib2.install_opener)实例，其中包含我想要处理的响应内容和 HTTP 代码，即非常灵活。我知道存在诸如[Mocker](http://labix.org/mocker)之类的库，但是是否有广泛用于请求的最佳实践/方法？

# javascript - Javascript 正则表达式模式将多个字符串（AND、OR）与单个字符串匹配

> ID：15090829
> 
> 赞同：6
> 
> 时间：2013-02-26T13:51:12.307
> 
> 标签：javascript, regex, match

我需要根据一个相当复杂的查询过滤一组字符串——它的“原始”形式如下所示：

```
nano* AND (regulat* OR *toxic* OR ((risk OR hazard) AND (exposure OR release)) ) 
```

要匹配的字符串之一的示例：

```
Workshop on the Second Regulatory Review on Nanomaterials, 30 January 2013, Brussels 
```

所以，我需要使用 AND OR 和通配符进行匹配 - 所以，我想我需要在 JavaScript 中使用正则表达式。

我已经正确循环，过滤并且通常可以正常工作，但是我100％确定我的正则表达式是错误的-并且某些结果被错误地省略了-这里是：

```
/(nano[a-zA-Z])?(regulat[a-zA-Z]|[a-zA-Z]toxic[a-zA-Z]|((risk|hazard)*(exposure|release)))/i 
```

任何帮助将不胜感激 - 我真的无法正确抽象我的思想来理解这种语法！

更新：

很少有人指出构建正则表达式的顺序的重要性，但是我无法控制将要搜索的文本字符串，所以我需要找到一个可以不管顺序或任何顺序都可以工作的解决方案。

更新：

最终使用了一个 PHP 解决方案，由于 twitter API 1.0 的弃用，请参阅 pastebin 示例函数（我知道在这里粘贴代码更好，但是有很多......）：

功能：[http://pastebin.com/MpWSGtHK](http://pastebin.com/MpWSGtHK) 用法： http: [//pastebin.com/pP2AHEvk](http://pastebin.com/pP2AHEvk)

感谢所有帮助

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-26T15:24:54.280

IMO，单个正则表达式不是正确的工具：

```
/^(?=.*\bnano)(?=(?:.*\bregulat|.*toxic|(?=.*(?:\brisk\b|\bhazard\b))(?=.*(?:\bexposure\b|\brelease\b))))/i.test(subject)) 
```

*如果字符串满足您提出的标准，*将返回 True ，但我发现嵌套的前瞻非常难以理解。*如果 JavaScript 支持带注释的正则表达式，它看起来像这样：*

 *```
^                 # Anchor search to start of string
(?=.*\bnano)      # Assert that the string contains a word that starts with nano
(?=               # AND assert that the string contains...
 (?:              #  either
  .*\bregulat     #   a word starting with regulat
 |                #  OR
  .*toxic         #   any word containing toxic
 |                #  OR
  (?=             #   assert that the string contains
   .*             #    any string
   (?:            #    followed by
    \brisk\b      #    the word risk
   |              #    OR
    \bhazard\b    #    the word hazard
   )              #    (end of inner OR alternation)
  )               #   (end of first AND condition)
  (?=             #   AND assert that the string contains
   .*             #    any string
   (?:            #    followed by
    \bexposure\b  #    the word exposure
   |              #    OR
    \brelease\b   #    the word release
   )              #    (end of inner OR alternation)
  )               #   (end of second AND condition)
 )                #  (end of outer OR alternation)
)                 # (end of lookahead assertion) 
```

请注意，整个正则表达式由前瞻断言组成，因此匹配结果本身将始终为空字符串。

相反，您可以使用单个正则表达式：

```
if (/\bnano/i.test(str) &&
    ( 
        /\bregulat|toxic/i.test(str) ||
        ( 
            /\b(?:risk|hazard)\b/i.test(str) &&
            /\b(?:exposure|release)\b/i.test(str)
        )
    )
)    /* all tests pass */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:06:16.850

正则表达式必须按顺序在字符串中移动。您在模式中的“regulat”之前有“nano”，但它们在测试字符串中被交换。我不会使用正则表达式来执行此操作，而是坚持使用普通的旧字符串解析：

```
if (str.indexOf('nano') > -1) {
    if (str.indexOf('regulat') > -1 || str.indexOf('toxic') > -1
        || ((str.indexOf('risk') > - 1 || str.indexOf('hazard') > -1)
        && (str.indexOf('exposure') > -1 || str.indexOf('release') > -1)
    )) {
        /* all tests pass */
    }
} 
```

如果您想实际捕获单词（例如，从“regulat”所在的位置获取“Regulatory”，我会按单词分隔符拆分句子并检查单个单词。*

# grails - Grails 将 sqltype "number" 转换为 String

> ID：15090835
> 
> 赞同：3
> 
> 时间：2013-02-26T13:51:32.867
> 
> 标签：grails, grails-orm

我有一个抽象`Event`类，它包含所有事件类型共享的属性，在它下面我有两个子类，每个类有一个表（`MasterEvent`和`ParentEvent`）。

问题是`MasterEvent`id 列的类型是“number”，而`ParentEvent`它的类型是“varchar2”。这意味着当我尝试运行应用程序时，我得到：

> 由 HibernateException 引起：列 event_id 的 * 列类型错误。找到：数字，预期：varchar2(255 char)。

请注意，这是一个遗留数据库，因此不可能在数据库级别更改列类型。

下面的示例代码应该有助于更好地理解：

**事件.groovy**

```
 package a

abstract class Event {
    String id

    static mapping = {
        tablePerHierarchy "false"
        id column: "id"
    }
} 
```

**父事件.groovy**

```
 package a

class ParentEvent extends Event {
    static mapping = {
        id column: "id"
    }
} 
```

**MasterEvent.groovy**

```
 package a

class MasterEvent extends Event {
    static mapping = {
        id column: "id", type: "number"
    }
} 
```

我尝试过`type: number`各种组合，但它总是给我同样的错误。

无论如何，是否可以`sqlType`直接将其转换为`String`或让 grails 忽略此验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:15:14.393

`type: 'number'`不起作用，因为它不是[休眠基本类型](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html#mapping-types-basictypes)

尝试将其更改为`type: 'long'`（或任何适合您的旧数据库）

另请参阅文档：[链接](http://grails.org/doc/2.1.0/guide/single.html#ormdsl)

* * *

*发表评论后编辑*

我不知道您在抽象类中在做什么，但也许您可以做类似的事情并在抽象类中使用 getter（未经测试！）：

```
class MasterEvent extends Event {

    Long longId        
    static mapping = {
        longId column: "id"
    }

    @Override
    String getId() {
        longId?.toString()
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:13:42.160

您是否尝试在子类中定义 id 字段？父事件中的“字符串 id”和主事件中的“长 id”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:49:13.513

您可以尝试使用数字 id 列并将其转换为字符串的自定义[Hibernate UserType 。](http://grails.org/doc/latest/guide/GORM.html#customHibernateTypes)然后这将进入 MasterEvent 类：

```
static mapping = {
    id column: "id", type: NumberToStringType
} 
```

# php - 使用属性访问 php 对象

> ID：15090839
> 
> 赞同：0
> 
> 时间：2013-02-26T13:51:40.797
> 
> 标签：php, object

Google 身份验证服务返回一个 php 对象（我们称之为 $Ticket）。它的价值是这样的

```
Google_LoginTicket Object ( [envelope:Google_LoginTicket:private] => Array ( [alg] => RS256 [kid] => 057d4167ee9b75e7b3a3fcc9c1ca17a14dab5044 ) ) 
```

现在我想访问 alg 的值，即“RS256”。

```
print_r ($Ticket->{'envelope:Google_LoginTicket:private'}); 
```

print_r 没有给出任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:57:18.010

Google_LoginTicket 有 getAttributes() 函数，它返回属性数组，你可以在源代码中检查这一点 [https://github.com/sylvainw/GPlusGlobe/blob/master/src/auth/Google_LoginTicket.php](https://github.com/sylvainw/GPlusGlobe/blob/master/src/auth/Google_LoginTicket.php)

```
$attrs = $Ticket->getAttributes();
print_r($attrs["envelope"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:58:29.127

您可以通过[反射](http://www.php.net/manual/en/book.reflection.php)访问私有属性。但是，不建议这样做。这些主要是框架使用的功能。

相反，您应该搜索为您提供所需价值的方法。

```
var_dump(get_class_methods($Ticket)); 
```

通常，直接阅读 API 文档或[源文件](https://github.com/sylvainw/GPlusGlobe/blob/master/src/auth/Google_LoginTicket.php)可以让您看到类中可用的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:59:49.950

实例变量是私有的`envelope`，所以你不能像那样访问它；您必须使用提供的[方法](https://code.google.com/p/google-api-php-client/source/browse/trunk/src/auth/Google_LoginTicket.php#60)：

```
$attributes = $Ticket->getAttributes();

$envelope = $attributes['envelope']; 
```

# c - 如何为 ARM 上的每个任务定义堆栈

> ID：15090840
> 
> 赞同：0
> 
> 时间：2013-02-26T13:51:43.380
> 
> 标签：c, assembly, arm

今天我有一个小问题，我认为起源是关于堆栈的。

这是我的问题：

我像这样声明三个用户任务：

```
void task1Function(void) {
    print_uart0("-usertask : First task is started...\r\n");
    while(1){
        //syscall(1);
    }
}

void task2Function(void) {
        print_uart0("-usertask : Second task is running...\r\n");
        //syscall(); /* To return in the kernel's mode */
        while(1){

        }
}

 void task3Function(void) {
            print_uart0("-usertask : Third task is running...\r\n");
            //syscall(); /* To return in the kernel's mode */
            while(1){

            }
    } 
```

我有一个包含三个任务的数组，其结构如下：

```
typedef struct
{

    unsigned int *sp;
    unsigned int registers[12];
    unsigned int lr;
    unsigned int pc;
    unsigned int cpsr;
    unsigned int mode;
    unsigned int num;
    void *stack;
    int stacksize;

    int priority;
    int state;                    /* Running, Ready, Waiting, Suspended */

    /* Next and previous task in the queue */
    struct taskstruct *qnext, *qprev;
}taskstruct; 
```

这是我的任务的初始化：

```
void init_task(taskstruct * task, void (*function)(void) ){
    task->sp = (unsigned int*)&function;
    task->registers[0] = 0; // r0
    task->registers[1] = 0; // r1
    task->registers[2] = 0; // r2
    task->registers[3] = 0; // r3
    task->registers[4] = 0; // r4
    task->registers[5] = 0; // r5
    task->registers[6] = 0; // r6
    task->registers[7] = 0; // r7
    task->registers[8] = 0; // r8
    task->registers[9] = 0; // r9
    task->registers[10] = 0; // r10
    task->registers[11] = 0; // r11
    task->registers[12] = 0; // r12
    task->lr = 0;
    task->pc = 0;
    task->cpsr = 0;
    task->mode = 0x10;
}

init_task(&task[0],&task1Function);
init_task(&task[1],&task2Function);
init_task(&task[2],&task3Function); 
```

但是当我将 task[0].sp 传递给我的激活函数时，它始终是启动的最后一个声明的任务（即第三个）：

```
.global activate
activate:

LDR r12, [r0]
/*STMFD sp!,{r1-r11,lr}*/
NOP

msr CPSR_c, #0x10 /* User mode with IRQ enabled and FIQ disabled*/
mov pc, r12 
```

所以我想我的用户堆栈有问题，我必须为每个用户设置不同的堆栈，对吗？在这种情况下，有人可以告诉我如何进行吗？

问候，文森特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:59:35.760

是的你是对的。

每个任务都必须有单独的堆栈，因为堆栈的状态是任务总状态的一部分。

你可以添加类似的东西

```
uint32_t stack[512]; 
```

到您的`taskstruct`, 然后在切换任务时相应地设置/恢复任务指针，当然。在这种情况下很难提供足够的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:10:52.600

'好的，但我如何分配堆栈任务？' - malloc 它。

您可以通过在 taskstruct 末尾添加堆栈空间来节省 malloc - 您当前的所有成员都是固定大小的，因此计算 malloc 的总大小很容易。

这些任务的难点在于让中断条目正确，即。当中断处理程序需要更改任务状态并因此必须通过调度程序退出时。这对于嵌套中断特别有趣。祝你好运！

# android - Android中Fragments的正确实现方式

> ID：15090846
> 
> 赞同：0
> 
> 时间：2013-02-26T13:52:02.720
> 
> 标签：android, android-fragments

我最近正在为android开发一个应用程序。我决定使用片段的力量并决定使用动态 UI。我想在纵向中包含一个片段，在横向中包含两个片段。

我想出了如何创建两个布局以及如何添加片段。

到目前为止，一切进展顺利。

我正在尝试找到一种适当的方法来创建和销毁旋转片段。我知道我应该总是检查是否有保存的实例，所以在轮换时不应该创建更多的片段。但是当用户从纵向切换到横向时，此解决方案会忽略创建另一个片段。所以我认为在检查实例是否已保存之前我需要检查方向。检查不是问题，但处理片段的正确方法是什么？我是否应该始终创建一个新片段并在更改轮换时将其删除？还是隐藏了？我找到了一个实现，其中包含两个片段的活动，当旋转发生变化时，新活动被创建。但是这个解决方案为一件事创建了活动和片段，我不确定这是否是正确的方法。

你有什么建议？我认为 Android 开发人员的官方网站严重覆盖了片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:03:49.613

也许 Lars Vogel 的这个教程可以帮助你：

[教程](http://www.vogella.com/articles/AndroidFragments/article.html)

他创建了一个横向应用程序，并在第 11 章中展示了如何更改为纵向模式。

# linux - 如何在 Fedora 中通过终端查找特定文件夹

> ID：15090848
> 
> 赞同：1
> 
> 时间：2013-02-26T13:52:08.497
> 
> 标签：linux, search, terminal, command, directory

目前我正在使用 linux(Fedora 15) 并且我正在尝试使用以下命令在整个文件系统中搜索文件夹

```
find / -name "apache-tomcat*" 
```

执行上述命令花费的时间越来越多，用户无法等待，结果如下所示

```
[root@user fedrik]# find / -name "apache-tomcat*"
find: `/proc/6236/task/6236/ns/net': No such file or directory
find: `/proc/6236/task/6236/ns/uts': No such file or directory
find: `/proc/6236/task/6236/ns/ipc': No such file or directory
find: `/proc/6236/ns/net': No such file or directory
find: `/proc/6236/ns/uts': No such file or directory
find: `/proc/6236/ns/ipc': No such file or directory
find: `/proc/6462/task/6462/ns/net': No such file or directory
.................
................. 
```

但是正如我所提到的，它需要很长时间来处理，有时它会被击中，所以任何人都可以告诉我如何使用来自 linux 终端的命令按名称搜索特定文件夹，这将非常快并且应该搜索上面我使用的整个文件系统`'/'`

**编辑**

实际上我的意图是`apache-tomcat-7.0.37`在整个文件系统中搜索文件夹，

例如，在文件系统的不同位置可能有许多文件夹，如`apache-tomcat-6.0.45`, `apache-tomcat-5.1.7`, .........`apache-tomcat-5.0.37`

所以我们可以观察到只有最后一部分（数字部分）正在改变并且整个文件夹名称是相同的，所以有没有办法搜索这些类型的文件夹而不管最后一个数字部分，比如使用正则表达式或类似的东西。

最后我的目的是在整个文件系统上找到该格式的文件夹`apache-tomcat-xxxxxxx`，因为如果我们只搜索`apache-tomcat`我们会得到数百个结果，有时甚至会得到数千个结果，这很难从它们中分析和搜索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:58:46.857

尝试这个：

```
locate apache-tomcat 
```

它使用一个数据库（由热闹的命名更新`updatedb`，您可以运行它`sudo updatedb`来刷新搜索索引）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:32:25.950

```
locate apache-tomcat | grep -E '^apache-tomcat-[[:digit:]]+\.[[:digit:]]+\.[[:digit:]]+$' 
```

或者只是使用`[0-9]`而不是`[[:digit:]]`. 这可能更具可读性。或者

```
locate apache-tomcat | perl -ne 'print if /^apache-tomcat-\d+\.\d+\.\d+$/' 
```

无论你做什么，你肯定要使用，`locate`而不是`find`，因为它会*快得多*。

# backbone.js - 有什么办法可以将url参数添加到主干销毁方法中

> ID：15090851
> 
> 赞同：1
> 
> 时间：2013-02-26T13:52:17.057
> 
> 标签：backbone.js

现在我正在通过销毁请求中的标头传递数据，如下所示

```
 this.model.destroy(
            {
               headers: {
                  'myId': myId
               }
            }
        ); 
```

是否可以将 myId 作为 url 参数传递给删除请求？

谢谢，普拉茨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:32:57.873

您可以在参数中传递`data`in 对象`destroy`

```
this.model.destroy(
            {
               data: {
                  'myId': myId
               }
            } 
```

# xml - 如何在 xslt 中过滤

> ID：15090853
> 
> 赞同：0
> 
> 时间：2013-02-26T13:52:19.173
> 
> 标签：xml, xslt, xpath, xslt-2.0

我有 ：

```
<ExtData>
<table>
    <Column biz="Bus" desc="" id="Bus" >
        <CoreColumn coreEntityName="ser" coreId="Bus" coreColumnDataType="TypeInt" coreColumnLength=""/>
    </Column>
    <Column biz="ser" desc="" id="NAME" >
        <CoreColumn coreEntityName="ser" coreId="NAME" coreColumnDataType="TypeVarChar" />
    </Column>
    <Column biz="ID" desc=""  id="GLOBAL_ID" >
        <CoreColumn coreEntityName="ser" coreId="UCMDB_ID" coreColumnDataType="VarChar" />
        <CoreColumn coreEntityName="ser_xxx" coreId="UCMDB_ID" coreColumnDataType="VarChar" />
    </Column>
    <Column biz="State" desc="" id="ser_STATE" >
        <CoreColumn coreEntityName="ser" coreId="ser_STATE" coreColumnDataType="VarChar" />
    </Column>
</table> 
```

并且需要输出 >>> 按属性过滤`@coreEntityName="ser"`：

```
<ExtData>
<table>
    <Column biz="Bus" desc="" id="Bus" >
        <CoreColumn coreEntityName="ser" coreId="Bus" coreColumnDataType="TypeInt" coreColumnLength=""/>
    </Column>
    <Column biz="ser" desc="" id="NAME" >
        <CoreColumn coreEntityName="ser" coreId="NAME" coreColumnDataType="TypeVarChar" />
    </Column>
    <Column biz="ID" desc=""  id="GLOBAL_ID" >
        <CoreColumn coreEntityName="ser" coreId="UCMDB_ID" coreColumnDataType="VarChar" />
    </Column>
    <Column biz="State" desc="" id="ser_STATE" >
        <CoreColumn coreEntityName="ser" coreId="ser_STATE" coreColumnDataType="VarChar" />
    </Column>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:56:34.237

以下 XSLT 样式表实现了所需的输出：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>

    <!-- Identity template : copy attributes and elements by default -->
    <xsl:template match="@*|*">
        <xsl:copy>
            <xsl:apply-templates select="@*|*" />
        </xsl:copy>
    </xsl:template>

    <!-- Exclude all the CoreColumn elements such as their @coreEntityname
         attribute is other than ser -->
    <xsl:template match="CoreColumn[@coreEntityName != 'ser']" />

</xsl:stylesheet> 
```

# java - 无法打开使用 jOpenDocument 创建的 ODS 文档 Google Docs

> ID：15090854
> 
> 赞同：1
> 
> 时间：2013-02-26T13:52:19.287
> 
> 标签：java, excel, google-sheets, ods, opendocument

我正在尝试使用[jOpenDocument 库](http://www.jopendocument.org/)来创建文档。我已经执行了创建电子表格的示例 - 代码编译并运行正常，但是当我尝试使用 Excel Office 2012 或 Google Docs 打开文档时，他们向我指出格式不正确。

这是示例，我使用的是 jOpenDocument 1.2 版：

```
final Object[][] data = new Object[6][2];
data[0] = new Object[] { "January", 1 };
data[1] = new Object[] { "February", 3 };
data[2] = new Object[] { "March", 8 };
data[3] = new Object[] { "April", 10 };
data[4] = new Object[] { "May", 15 };
data[5] = new Object[] { "June", 18 };

String[] columns = new String[] { "Month", "Temp" };

TableModel model = new DefaultTableModel(data, columns);

// Save the data to an ODS file and open it.
final File file = new File(destpath, "temperature.ods");

SpreadSheet.createEmpty(model).saveAs(file); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:58:41.360

好的。使用版本 1.3b1（或更高版本），Excel 2010 可以打开文件。

但谷歌文档仍然不能。

# php - PHP preg_match_all / 正则表达式问题

> ID：15090855
> 
> 赞同：1
> 
> 时间：2013-02-26T13:52:20.247
> 
> 标签：php, regex, preg-match-all

我有一串如下所示的文本：

```
2012-02-19-00-00-00+136571235812571+UserABC.log 
```

我需要将其分解为三段数据：第一个 + 左侧的字符串（2012-02-19-00-00-00），两个 + 之间的字符串（136571235812571）和右侧的字符串+ (UserABC.log)。

我现在有这个代码：

```
preg_match_all('\+(.*?)\+', $text, $match); 
```

我遇到的问题是上面的代码返回：+136571235812571+

有没有办法使用 RegEx 给我所有三个数据（没有 + 标记），还是我需要不同的方法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:54:10.100

这基本上是通过以下方式完成的`explode()`：

```
explode('+', '2012-02-19-00-00-00+136571235812571+UserABC.log');
// ['2012-02-19-00-00-00', '136571235812571', 'UserABC.log'] 
```

您可以使用`list()`将它们直接分配给变量：

```
list($date, $ts, $name) = explode('+', '2012-02-19-00-00-00+136571235812571+UserABC.log'); 
```

也可以看看：[`explode()`](http://www.php.net/explode) [`list()`](http://php.net/list)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:57:02.207

使用[preg_split()](http://php.net/manual/en/function.preg-split.php)：

```
$str = '2012-02-19-00-00-00+136571235812571+UserABC.log';
$matches = preg_split('/\+/', $str);
print_r($matches); 
```

输出：

```
Array
(
    [0] => 2012-02-19-00-00-00
    [1] => 136571235812571
    [2] => UserABC.log
) 
```

* * *

使用[preg_match_all()](http://php.net/manual/en/function.preg-match-all.php)：

```
$str = '2012-02-19-00-00-00+136571235812571+UserABC.log';
preg_match_all('/[^\+]+/', $str, $matches);
print_r($matches); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:31:53.563

如果您想进行微优化，这可以在不使用 RegEx 的情况下“更快”完成。显然，这取决于您为其编写代码的上下文。

```
$string = "2012-02-19-00-00-00+136571235812571+UserABC.log";
$firstPlusPos = strpos($string, "+");
$secondPlusPos = strpos($string, "+", $firstPlusPos + 1);
$part1 = substr($string, 0, $firstPlusPos);
$part2 = substr($string, $firstPlusPos + 1, $secondPlusPos - $firstPlusPos - 1);
$part3 = substr($string, $secondPlusPos + 1); 
```

此代码需要 0.003，而我的计算机上的 RegEx 需要 0.007，但当然这会因硬件而异。

# entity-framework - 其他虚拟/导航属性

> ID：15090857
> 
> 赞同：0
> 
> 时间：2013-02-26T13:52:28.710
> 
> 标签：entity-framework

我有以下模型：

```
public class Useraccount
{
     public int Id { get; set; }
     public virtual ICollection<Task> Tasks { get; set; }
} 
```

任务集合由实体框架通过任务实体填充。这工作没有问题。现在我想要一个额外的虚拟属性，所以这个类看起来像这样：

```
public class Useraccount
{
     public int Id { get; set; }
     public virtual ICollection<Task> Tasks { get; set; }
     public virtual ICollection<Task> FinishedTasks { get; set; }
} 
```

FinishedTasks 属性与 Tasks 相同，但它只有已完成的任务（例如 statusId = 1）。EF可以做到这一点吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:15:18.553

像这样定义属性：

```
public class Useraccount
{
    public int Id { get; set; }
    public virtual ICollection<Task> Tasks { get; set; }

    [NotMapped]
    public IEnumerable<Task> FinishedTasks
    {
        get
        {
            return Tasks.Where(t => t.Finished);
        }
    }
} 
```

`NotMapped`属性告诉 EF 此属性未映射到数据库列（有关更多信息，请参阅[此页面](http://msdn.microsoft.com/en-US/data/jj591583)）。

无需将其设为虚拟（除非您确切知道原因），因为 EF 不会覆盖它。访问`set`器也不应该存在，因为它实际上是一个计算属性。

# linq - Linq To Entity Optional Distinct

> ID：15090859
> 
> 赞同：2
> 
> 时间：2013-02-26T13:52:30.943
> 
> 标签：linq, entity-framework, linq-to-entities, distinct

早些时候，我[在 Stackoverflow 上提出了一个问题，](https://stackoverflow.com/questions/15087531/linq-to-entities-distinct-on-column-without-anonymous-type)关于如何根据每个对象中的特定属性**删除对象列表中的重复记录。**

我得到了我正在寻找的答案（见下文），该**查询返回一个不同**的对象列表，**使用 MainHeadingID 作为删除重复项的属性**。

```
public IList<tblcours> GetAllCoursesByOrgID(int id)
{
    return _UoW.tblcoursRepo.All.
        Where(c => c.tblCourseCategoryLinks.Any(cl => cl.tblUnitCategory.tblUnit.ParentID == id))
        .GroupBy(c => c.MainHeadingID)
        .Select(g => g.FirstOrDefault())
        .ToList();
} 
```

但是，现在我需要更多帮助！无论如何修改上面的查询，它只**在 MainHeadingID 不等于 180 时删除重复值**。我尝试将 GroupBy 行修改为

```
.GroupBy(c => c.MainHeadingID != 180) 
```

然而，这并没有奏效。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:56:49.070

以下适用于 LINQ to SQL：

```
return _UoW.tblcoursRepo.All
   .Where(c => c.tblCourseCategoryLinks.Any(cl => cl.tblUnitCategory.tblUnit.ParentID == id))
   .GroupBy(c => c.MainHeadingID)
   //.SelectMany(g => g.Key == 180 ? g : g.Take(1))
   .SelectMany(g => g.Take(g.Key == 180 ? Int32.MaxValue : 1))
   .ToList(); 
```

*评论：* 在上面的查询中，从等于 180`SelectMany`的组中选择所有项目，但它只从其他组中取一个项目（即不同的结果）。`MainHeadingID`Linq to SQL 无法翻译注释掉的部分，但感谢@usr 有办法解决。

* * *

Linq to Entities 甚至无法翻译简化的查询。我认为在这种情况下，您唯一的选择是两个查询的简单连接结果：

```
Expression<Func<tblcours, bool>> predicate = x =>
  x.tblCourseCategoryLinks.Any(cl => cl.tblUnitCategory.tblUnit.ParentID == id)
int headingId = 180;

return _UoW.tblcoursRepo.All
   .Where(c => c.MainHeadingID != headingId)
   .Where(predicate)
   .GroupBy(c => c.MainHeadingID)
   .Select(g => g.FirstOrDefault())
   .Concat(_UoW.tblcoursRepo.All
               .Where(c => c.MainHeadingID == headingId)
               .Where(predicate))
   .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:16:46.150

由于 EF 错误（考虑到 EF 的 LINQ 支持的质量，这并不奇怪），lazyberezovsky 的回答失败了。它可以与黑客一起使用：

```
.SelectMany(g => g.Key == 180 ? g.Take(int.MaxValue) : g.Take(1)) 
```

或者

```
.SelectMany(g => g.Take(g.Key == 180 ? int.MaxValue : 1)) 
```

请注意，由于将其转换为 SQL 的方式，性能不会特别好。

# python - 使用 Traversal 时如何生成要查看的 URL？

> ID：15090863
> 
> 赞同：4
> 
> 时间：2013-02-26T13:52:40.073
> 
> 标签：python, pyramid, traversal

当使用 URL Dispatch 时，我们可以很容易地生成一个视图的 URL，因为每个视图都有一个不同的 route_name，例如：

```
login.py:
@view_config(route_name='login')

index.pt:
<a href="${request.route_url('login')}">Login</a> 
```

但是如何在遍历中做到这一点？由于没有可用的资源“登录”实例，我不知道如何生成 URL 来查看登录。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T15:48:32.657

在遍历中，您需要知道树的结构，并且您必须能够按需加载上下文对象。URL 是相对于上下文生成的，使用其位置感知属性`__name__`并`__parent__`构建 URL。

```
/
|- login
|- users
   |- 1
      |- edit 
```

所以假设我们有一个`User(id=1)`上下文对象，我们想要登录。如果您的视图是通过 注册的`@view_config(context=Root, name='login')`，那么您可以通过 生成 url `request.resource_url(request.root, 'login')`。这是我们告诉 Pyramid 生成一个相对于树根的 URL。

另一方面，如果我们正在登录并且想要让用户进行编辑，则必须为该用户加载一个位置感知`User`对象才能生成 URL。`request.resource_url(user, 'edit')`其中`user`是`User(id=1)`具有有效`__name__`和`__parent__`属性的实例。

如果您在没有位置感知`__parent__`的情况下传递上下文，则会生成 URL，就好像您的用户已安装在，`/`因为这是 Pyramid 认为该对象将在您的树中的唯一理智的地方。

加载位置感知对象的能力是为什么我们强调遍历最适合使用**持久**对象树的原因，而不是动态生成的对象树。如果您想为它生成 URL，直接加载用户并为您填充`__parent__`它会更方便。`__name__`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:27:49.050

[resource_url](http://docs.pylonsproject.org/projects/pyramid/en/master/api/request.html#pyramid.request.Request.resource_url "资源网址")（资源，'view_name'）

# php - 2 mysql 格式化日期时间之间的周数

> ID：15090871
> 
> 赞同：0
> 
> 时间：2013-02-26T13:52:58.010
> 
> 标签：php, mysql, datetime

我正在创建前 30 名音乐排行榜。

如何获得两个 mysql 格式化日期时间之间的周数？像

从：`2013-01-15 11:41:14`

当前日期时间：`2013-02-25 13:41:14`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:01:55.743

使用 SQL 更好，但在 php 中会是这样的：

```
<?php
$datetime1 = new DateTime('2013-01-15 11:41:14');
$datetime2 = new DateTime('2013-02-25 13:41:14');
$interval  = $datetime1->diff($datetime2);
$diff      = $interval->format('%d');
echo (int)$diff/7; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:55:02.693

您可以使用`strtotime()`方法，然后计算当前时间与 MySQL 数据库中的时间之间的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:56:09.743

减去使用时间`strtotime`

```
$difference = strtotime($first_date)-strtotime($second_date);

$weeks = round($difference / 604800 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:59:16.760

```
<?php
$db_time_a = strtotime('2013-01-15 11:41:14');
$db_time_b = strtotime('2013-02-25 13:41:14');

$seconds_in_between = $db_time_a - $db_time_b;

$hours = (int)($seconds_in_between/60/60);
$minutes = (int)($seconds_in_between/60)-$hours*60;
$seconds = (int)$seconds_in_between-$hours*60*60-$minutes*60;

echo 'The time in seconds in between the two times is: '.$seconds_in_between.' (Hours:'.$hours.', Minutes:'.$minutes.', Seconds:'.$seconds.')';
?> 
```

您可以使用“剩余”将秒数分块并找出分钟（以及剩余的秒数）等等，直到达到您想要的时间距离。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T13:59:29.303

该`WEEK()`功能对您的查询有帮助吗？

我不太了解 Mysql，但让我们假设以下内容：

```
select WEEK(date1-date2) from mytable where name='Ken'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T14:07:31.120

在 mysql 中尝试 DATEDIFF(date1, date2) 函数。DATEDIFF() 将返回两个给定日期之间的日期编号。希望您可以轻松地从输出中获得周数。

# weblogic-10.x - weblogic应用服务器的域位置是什么？

> ID：15090878
> 
> 赞同：0
> 
> 时间：2013-02-26T13:53:20.697
> 
> 标签：weblogic-10.x

我是 weblogic 的新手。我正在尝试使用 weblogic 配置 liferay。我想将 liferay 依赖 jar 文件放在域的 lib 文件夹中。

现在我很困惑，因为在 Oracle>Middleware>user_projects>domains 中有两个文件夹包含 lib 文件夹。

1)base_domain
2)my_domain。

有人可以让我知道我应该把所有依赖 jar 文件放在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:31:29.410

首先，确定您使用的是哪个域。base_domain 和 my_domain 不是 weblogic 附带的。它们是为应用程序部署而创建的。

请检查您的应用程序的部署位置，然后将您的 jar 放在该域中。

# string - 如何在 perl 中将两个字符串转换为哈希？

> ID：15090879
> 
> 赞同：2
> 
> 时间：2013-02-26T13:53:20.280
> 
> 标签：string, perl, hash, map, split

我有两个字符串：

```
my $wTime = "00:00-06:00 / 06:00-09:00 / 09:00-17:00 / 17:00-23:00 / 23:00-00:00";
my $wTemp = "17.0 °C / 21.0 °C / 17.0 °C / 21.0 °C / 17.0 °C"; 
```

我想将这些字符串加入一个哈希，其中每个时间刻度的第一部分是一个键，例如：

```
$hash = (
  "00:00" => "17.0 °C",
  "06:00" => "21.0 °C",
  "09:00" => "17.0 °C",
  "17:00" => "21.0 °C",
  "23:00" => "17.0 °C"
); 
```

我尝试了一些 map 和 split 变体，但我得到了一些神秘的结果；-)

```
%hash = map {split /\s*\/\s*/, $_ } split /-/, $wTime; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:28:00.530

另一种方法：

```
my $wTime = "00:00-06:00 / 06:00-09:00 / 09:00-17:00 / 17:00-23:00 / 23:00-00:00";
my $wTemp = "17.0 °C / 21.0 °C / 17.0 °C / 21.0 °C / 17.0 °C";

my %h1;
@h1{$wTime=~/([\d:]+)-/g}=split(m! / !,$wTemp); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:58:25.607

您可以使用[`List::MoreUtils` `zip`/`mesh`功能](https://metacpan.org/module/List%253A%253AMoreUtils)：

```
my @time_ranges = split ' / ', $wTime;
my @times = map { (split '-', $_)[0] } @time_ranges;
my @temps = split ' / ', $wTemp;

use List::MoreUtils qw(zip);
my %hash = zip @times, @temps; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:06:29.140

这是一个没有 List::MoreUtils 的详细解决方案。

```
my $wTime = "00:00-06:00 / 06:00-09:00 / 09:00-17:00 / 17:00-23:00 / 23:00-00:00";
my $wTemp = "17.0 °C / 21.0 °C / 17.0 °C / 21.0 °C / 17.0 °C";

my @time = map { (split /-/, $_)[0] } split m! / !, $wTime;
my @temp = split m! / !, $wTemp;

my %hash;
for (my $i=0; $i <= $#time; $i++) { # Iterate the times via their index...
  # This only works if we have an equal number of temps and times of course.
  $hash{$time[$i]} = $temp[$i];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T02:22:22.737

创建两个列表。

```
my @wTimes = map /([^-]+)/, split qr{ / }, $wTime;
my @wTemps = split qr{ / }, $wTemp; 
```

然后使用散列片。

```
my %hash;
@hash{@wTimes} = @wTemps; 
```

# javascript - Video.js 在 iOS 上的文件加载期间停止

> ID：15090890
> 
> 赞同：2
> 
> 时间：2013-02-26T13:53:56.010
> 
> 标签：javascript, ios, html, cordova, video.js

我有一个在 iOS 和 Blackberry 上运行的用 PhoneGap/Cordova（1.8.1 直到我敢升级到 2.3.0）编写的应用程序。

当我尝试启动视频播放时，应用程序会使用视频播放器（我们使用 JQuery 和 JQuery Mobile）切换到视频“页面”div，并设置目标视频的 URL。

该播放器旨在播放以前下载到本地文件系统的文件，但目前甚至无法播放从网络流式传输的内容。

我已经为视频播放器上的所有事件添加了侦听器，我可以看到一个“loadstart”事件，然后什么也没有。

初始化如下：

**HTML：**

```
<video id="video_player" class="video-js vjs-default-skin noscroll" controls preload="none"> 
```

**JavaScript - 初始化：**

```
var DEFAULT_OPTIONS = { controls: true, autoplay: false, preload: "none", loop: false };

var videoPlayer = null;

try {
  videoPlayer = _V_("video_player", DEFAULT_OPTIONS, function() {
    log("Video ready");
  });
} catch (error) {
  dumpError("Problem with initialisation", error);
}

try {
  log("DEBUG:  Setting up video");
  videoPlayer.addEvent("loadstart", function() {
    try {
      dumpArguments("loadstart", arguments);
    } catch (error) {
      dumpError("Failed to process loadstart", error);
    }
  });
  videoPlayer.addEvent("loadedmetadata", function() {
    try {
      dumpArguments("loadedmetadata", arguments);
    } catch (error) {
      dumpError("Failed to process loadedmetadata", error);
    }
  });
  videoPlayer.addEvent("loadeddata", function() {
    try {
      dumpArguments("loadeddata", arguments);
    } catch (error) {
      dumpError("Failed to process loadeddata", error);
    }
  });
  videoPlayer.addEvent("loadedalldata", function() {
    try {
      dumpArguments("loadedalldata", arguments);
    } catch (error) {
      dumpError("Failed to process loadedalldata", error);
    }
  });
  videoPlayer.addEvent("progress", function() {
    try {
      dumpArguments("progress", arguments);
    } catch (error) {
      dumpError("Failed to process progress", error);
    }
  });
  videoPlayer.addEvent("error", function() {
    try {
      dumpArguments("error", arguments);
    } catch (error) {
      dumpError("Failed to process error", error);
    }
  });
} catch (error) {
  dumpError("Error setting up video controller", error);
} 
```

**JavaScript - 设置播放视频**

```
APP.avPlayer.video.src(cachedFileRecord.URL); 
```

APP.avPlayer.video 是在初始化结束时创建的视频播放器的全局参考。

有时视频会启动，并且对于该会话有好处，但重新启动应用程序，问题会再次出现。

我是移动开发和 JavaScript（以及 iOS、Cordova 等）世界的新手，但对开发不熟悉，是我做错了什么，还是我长期使用 Java 的历史导致我JavaScript 行为的错误假设？

哦，最后一个事实，代码在 BlackBerry 上运行良好，所以这肯定与 iOS 平台有关，但 5.1、6.0 和 6.1 在模拟器和设备上都失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:42:30.150

我无法找到问题的根源，因此如果其他人有这个问题，为了将来参考，我通过像这样动态构建所有东西来解决它：

```
 // Get the place we will mount the video
    var home = $("#videoInsert");
    // Remove previous player, TODO Release first
    home.empty();

    // Create the new content
    var player = $('<video></video>');
    var videoId = "video" + playerCounter++;
    player.attr("id", videoId);
    player.attr("class", "video-js vjs-default-skin noscroll");
    player.attr("controls", "true");
    player.attr("autoplay", "false");
    player.attr("preload", "auto");
    player.attr("data-setup", "{}");

    // Add the optional poster if supplied
    if (arguments.length > 2) {
      player.attr("poster", posterUrl);
    }

    // Set the media up
    var media = $("<source />");
    media.attr("src", "file://" + videoUrl);
    media.attr("type", mimeType);
    player.append(media);

    // Finally add the player to the page
    home.append(player);

    try {
      target = _V_(videoId, null, function() {
    log("Video ready");
    attachEventListeners(this);
    resize(this);
      });
    } catch (error) {
      dumpError("Problem with initialisation", error);
    } 
```

似乎有关 HTML 和 JS 初始化的某些内容存在冲突，但纯 JS 初始化解决了这个问题。

# python - 如何使用零配置的 Sphinx 生成 Python 文档？

> ID：15090894
> 
> 赞同：16
> 
> 时间：2013-02-26T13:54:08.587
> 
> 标签：python, python-sphinx, documentation-generation

我们不想同时维护文档和源代码，目前它们正在迅速发展，但 Sphinx 似乎需要大量的设置和配置。（我们只需要一些基本的 API 文档。）难道没有一个命令可以在 python 项目中运行，它将遍历所有包、模块、类和函数，生成 HTML 文档？

sphinx-apidoc 将东西放到一个目录中，在修改 conf.py 以将我们的包放在 sys.path 中之后，我们可以运行“make html”，但它只列出包和模块，而没有记录任何类或函数。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-26T14:16:38.027

该`sphinx-apidoc`工具将为您的模块自动生成存根，这可能是您想要的。

## 指示

*   确保`autodoc`在 Sphinx 配置期间启用了该模块。

    ```
    extensions = ['sphinx.ext.autodoc'] 
    ```

    在狮身人面像内`conf.py`应该做的伎俩。

*   确保进行`conf.py`相应调整`sys.path`（参见文件中第 16-19 行的注释）。

    ```
    sys.path.insert(0, os.path.abspath('/my/source/lives/here')) 
    ```

*   运行`sphinx-apidoc`以生成骨架。

    ```
    sphinx-apidoc -o /my/docs/live/here /my/source/lives/here 
    ```

*   重建文档。如果一切顺利，您*应该不会*收到以下警告：

    > mymodule.rst:4：警告：autodoc 无法导入/查找模块“mymodule”

*   现在应该填充您的模块 RST。

# php - 使用 PHP 了解 Apache 上的“408 请求超时”

> ID：15090897
> 
> 赞同：24
> 
> 时间：2013-02-26T13:54:12.610
> 
> 标签：php, apache2, http-error, http-status-code-408

**问题描述 - Apache 日志**

我在 Apache 日志文件中找到了与此类似的项目：

```
166.147.68.243 [24/Feb/2013:06:06:25 -0500] 19 web-site.com "-" 408 - "-" 
```

我有自定义日志格式，`408`这里代表状态。日志格式为：

```
LogFormat "%h %t %D %V \"%r\" %>s %b \"%{User-agent}i\"" detailed 
```

通常日志文件中的行看起来像

```
184.73.232.108 [26/Feb/2013:08:38:16 -0500] 30677 www.site.com "GET /api/search... HTTP/1.1" 200 205 "Zend_Http_Client" 
```

这就是为什么 408 错误行对我来说看起来很奇怪。没有记录请求，我不知道应该优化什么。

**问题**

如何解决问题？我应该收集哪些额外的信息或日志？什么可能导致问题？这是服务器上的问题吗？或者这绝对是网络连接问题？

我正在解决这个问题，因为我们的客户抱怨他的手机出现 408 错误。我在日志文件中发现了很多记录，但我不得不承认我不知道该怎么处理。

* * *

**我自己的研究**

这里已经有几个关于这个主题的问题。但人们要具体得多。就像他们讨论某些特定客户端软件和脚本的问题一样。在这里，我在 iPhone 上打开某些页面时遇到了错误。

例如在[HTTP 中， 408 Request timeout](https://stackoverflow.com/questions/1667720/http-408-request-timeout)，建议在 POST 之前进行 GET 请求。如果我有自定义客户端，我可以这样做。但我无法控制用户浏览器的行为。

**猜猜#1**

在搜索互联网并思考问题时，我发现[https://serverfault.com/questions/383290/too-many-408-error-codes-in-access-log](https://serverfault.com/questions/383290/too-many-408-error-codes-in-access-log)

建议是将[`Timeout`](http://httpd.apache.org/docs/2.2/mod/core.html#timeout)配置参数更新回其默认值。

```
#
# Timeout: The number of seconds before receives and sends time out.
#
Timeout 300 
```

我首先尝试了 30 的值，因为我认为 30 秒应该足够了。**但即使使用 300 秒的默认值，我仍会继续在日志中收到错误。**我`tail -f`在写这篇文章的时候就这样做了，几分钟后就写了 10 多行。

对我来说，这看起来不是一个完整的解决方案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T07:01:44.583

经过对该主题的一些研究，我得出了以下答案。它由我们的首席开发人员提供，我认为它很好地解释了这个主题。

这些错误是完全正常的。它们不是更大问题的迹象，而是使 Apache 保持打开状态的正常连接时间超过允许的时间。

例如，客户端的查询一遍又一遍地运行它们使 Apache 保持打开状态。阿帕奇的回应是适当地关闭他。

如果没有，那么少数人可以接管我们的服务器，并且不允许其他任何人连接。

大多数情况下，这些错误来自寻找漏洞的系统，您可以通过打开 telnet 会话并使其保持打开状态来重新创建它。

同时，tail -f 访问日志，在 X 时间（KeepAliveTimeout）内你会看到你的 IP 弹出相同的错误代码。

在 Apache 1.3 的时代，这个错误很常见，但后来 2.2 出来了，他们把它删除了，直到我们有足够多的人要求它返回，因为它让我们知道有多少人保持开放的端口，并且不请求实际资源等

我认为除了确保将 Timeout 设置为我在原始问题中描述的某个合理值外，这里不应该做任何其他事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-17T10:42:56.570

实际上 apache 日志中的大量 408 消息是现代浏览器中的结果预取机制。通过查看过去 3 年的 apache 日志，对于相同的流量，408 错误的数量增加了一倍以上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-31T10:42:07.093

如果在 Apache 中设置了 Proxy，并且后端由于某种原因没有及时响应，那么在日志中会看到相同的 408 - -。代理超时是单独配置的，这就是为什么更改 Apache 默认超时似乎对这些请求没有任何作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-09T14:57:46.240

所有 http 请求都支持用户名和密码。没有用户名=“-”，没有密码=“-”，密码=“*”。

# google-calendar-api - 在不使用重复模式的情况下在 Google 中创建链接事件

> ID：15090899
> 
> 赞同：1
> 
> 时间：2013-02-26T13:54:20.300
> 
> 标签：google-calendar-api, recurrence, recurring-events

我们正在尝试实现一个中间件应用程序来同步 Google（App G）事件和我们的应用程序（App A）事件。我们面临的问题是创建从中间件应用程序到 Google 的循环事件。应用 A 不使用 ICS 格式进行重复事件。相反，它使用事件之间的父子关系的概念来表示链接事件。但是，在尝试将这些数据插入 Google 时，我们最终会为每个子事件创建一个单独的事件，因为在插入之前我们没有任何重复模式要在事件中设置。

我们试图寻找任何解决方案，在将事件插入 Google 之后将事件链接为经常发生的事件。但找不到任何解决方案。我们可以做些什么来将插入的事件显示为链接？即使事件被标记为

```
RecurrenceException(com.google.gdata.model.gd.RecurrenceException). 
```

欢迎提出解决方案和建议。

# vb.net - 创建 WP8 应用内视频不会生成 .jpg 缩略图

> ID：15090900
> 
> 赞同：0
> 
> 时间：2013-02-26T13:54:22.653
> 
> 标签：vb.net, windows-phone-8, windows-phone

有人告诉我，当我允许用户从我的应用程序中创建视频时，应该会自动生成一个 .jpg 缩略图。但是，使用windows phone power tools，我可以看到只生成了视频，没有图像。下面是代码：

**编辑：这里的问题是，如何从保存在隔离存储中的给定视频中获取缩略图？**

```
 ' Set recording state: start recording.
Private Async Sub StartVideoRecording()
    Try
        App.ViewModel.IsDataLoaded = False

        'isoStore = Await ApplicationData.Current.LocalFolder.GetFolderAsync("IsolatedStore")
        strVideoName = GenerateVideoName()
        isoFile = Await isoVideoFolder.CreateFileAsync(strVideoName, CreationCollisionOption.ReplaceExisting)
        thisAccessStream = Await isoFile.OpenAsync(FileAccessMode.ReadWrite)
        Await avDevice.StartRecordingToStreamAsync(thisAccessStream)

        'save the name of the video file into the list of video files in isolated storage settings
        Dim videoList As New List(Of InfoViewModel)

        isoSettings = IsolatedStorageSettings.ApplicationSettings
        If isoSettings.Contains("ListOfVideos") Then
            videoList = isoSettings("ListOfVideos")
        Else
            isoSettings.Add("ListOfVideos", videoList)
        End If
        videoList.Add(New InfoViewModel With {.Name = strVideoName, .DateRecorded = Date.Now})
        isoSettings("ListOfVideos") = videoList
        isoSettings.Save()
        isoSettings = Nothing

        ' Set the button states and the message.
        UpdateUI(ButtonState.Recording, "Recording...")
    Catch e As Exception
        ' If recording fails, display an error.
        Me.Dispatcher.BeginInvoke(Sub() txtDebug.Text = "ERROR: " & e.Message.ToString())
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:32:12.347

[在 Windows Phone 7.0 中，除了使用CameraCaptureTask](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.tasks.cameracapturetask%28v=vs.105%29.aspx)之外，无法使用“官方”SDK 来访问相机。但是使用`Microsoft.Phone.InteropServices`库可以在应用程序中创建自定义相机视图。如果你使用这个`VideoCamera`类，它有一个名为 的事件`ThumbnailSavedToDisk`，这可能是你听说过的。`Microsoft.Phone.InteropServices`但在 Windows Phone Marketplace 中从未允许使用应用程序。你可以在这里阅读更多[关于它的信息](http://dotnet.dzone.com/articles/how-videocameracamera-content)。

* * *

要从视频文件生成缩略图，一种解决方案是阅读 MP4 文件格式的工作原理并提取其中一帧并将其用作缩略图。不幸的是，我还没有找到任何可以做到这一点的库。

另一种但远非最佳解决方案是在 MediaElement 中播放视频，然后将该控件呈现为位图。这可以通过以下代码来完成（用 XAML/C# 编写，我不知道 VB.net，但应该很容易移植）：

```
<MediaElement 
    x:Name="VideoPlayer" 
    Width="640" 
    Height="480"
    AutoPlay="True" 
    RenderTransformOrigin="0.5, 0.5" 
    VerticalAlignment="Center" 
    HorizontalAlignment="Center" 
    Stretch="Fill"
    Canvas.Left="80"/> 
```

然后创建缩略图：

```
// Set an event handler for when video has loaded
VideoPlayer.MediaOpened += VideoPlayer_MediaOpened;
// Read video from storage
IsolatedStorageFileStream videoFile = new IsolatedStorageFileStream("MyVideo.mp4", FileMode.Open, FileAccess.Read, IsolatedStorageFile.GetUserStoreForApplication());
VideoPlayer.SetSource(videoFile);
// Start playback
VideoPlayer.Play(); 
```

然后创建“捕获”缩略图的事件处理程序：

```
void VideoPlayer_MediaOpened(object sender, RoutedEventArgs e)
{
    Thread.Sleep(100); // Wait for a short time to avoid black frame
    WriteableBitmap wb = new WriteableBitmap(VideoPlayer, new TranslateTransform());
    thumbnailImageHolder.Source = wb; // Setting it to a Image in the XAML code to see it
    VideoPlayer.Stop();
} 
```

以下是使用[Video Recorder Sample](http://code.msdn.microsoft.com/wpapps/Video-Recorder-Sample-5e800bbf)的修改版本时的外观。（右上角蓝色边框的小图是录制视频的缩略图，后面是camera Viewer。）

![在此处输入图像描述](../Images/711576fba78271a6233f95728641c721.png)

# adobe - IDML：什么是 Kinsoku/Mojikumi 表？

> ID：15090902
> 
> 赞同：3
> 
> 时间：2013-02-26T13:54:28.260
> 
> 标签：adobe, adobe-indesign, idml

我是 Adob​​e InDesign 和 IDML 文件格式的新手。我正在尝试了解 IDML 文件格式，以便可以通过代码动态创建 IDML 文件！

我正在浏览 IDML 文件格式规范，并找到了对“ **Mojikumi Tables** ”和“ Kinsoku **Tables** ”和“ **Aki** ”的引用。尽管文档定义了这些元素的各种属性，但没有明确解释这些元素实际上是什么。

任何指向相关文章的指针或链接都会非常有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:00:58.987

这些都是用于布置日文文本的附加排版设置。

**Kinsoku**：在日语中设置的规则，用于确定不允许出现在行首或行尾的字符。[参考](http://msdn.microsoft.com/en-us/library/dd909100%28v=office.12%29.aspx)。

**Mojikumi**：确定日文中标点、符号、数字和其他字符类别之间的间距。[参考](http://www.pdesigner.net/photoshopcs/1_16_11_7.html)。

**Aki**：在日语中是空间的意思：

> “当对应于不同字符类别的字符的字形在一行文本中聚集在一起时，就会出现间距行为。换句话说，使用*em*的一小部分测量的额外空间取决于哪两个字符类别在接近度*。典型值为*em*的四分之一和二分之一“
> （脚注：* '在日语中，这个空间被称为*aki*，它的意思是“空间”'）

[此报价的参考和来源。](http://books.google.co.uk/books?id=SA92uQqTB-AC&lpg=PA516&ots=GKzpZ-q6FA&dq=%22In%20Japanese,%20this%20extra%20space%20is%20referred%20to%20as%20aki%22&pg=PA516#v=onepage&q=%22In%20Japanese,%20this%20extra%20space%20is%20referred%20to%20as%20aki%22&f=false)

这是一本应该提供更多信息的书的链接：[CJKV Information Processing, 2nd Edition](http://shop.oreilly.com/product/9780596514471.do)

# php - 为什么 PHP 无法获取值？在 android 到 php

> ID：15090903
> 
> 赞同：0
> 
> 时间：2013-02-26T13:54:33.017
> 
> 标签：php, android, mysql

我想在 mysql 中选择行值。当我运行代码时，logcat 显示“缺少必填字段”。我不确定 php 或 android 代码中的问题。我希望有一个人可以帮助我。

```
public class profileActivity extends Activity{   

EditText txtName;
EditText inputusername;
EditText answer;
EditText txtPrice;
EditText txtDesc;
EditText txtCreatedAt;
String username;

private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_FIRSTNAME = "first_name";
private static String KEY_lASTNAME = "last_name";
private static String KEY_EMAIL = "email";

private DatabaseHandler dbHelper;  
private ProgressDialog pDialog;

// JSON parser class
JSONParser jsonParser = new JSONParser();

// single product url
private static final String profileURL =       "http://10.0.2.2/android_login_api4/include/profile.php";

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.profile);       

 // getting product details from intent
        Intent i = getIntent();

        // getting product id (pid) from intent
        username = i.getStringExtra(KEY_NAME);

    // Getting complete product details in background thread
    new GetProfileDetails().execute(); 

}

 /**
 * Background Async Task to Get complete product details
 * */
class GetProfileDetails extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(profileActivity.this);
        pDialog.setMessage("Loading product details. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

        /**
         * Getting product details in background thread
         * */
        protected String doInBackground(String... params) {

            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    // Check for success KEY
                    int success;
                    try {

                        // Building Parameters
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        params.add(new BasicNameValuePair("username", username));

                        // getting product details by making HTTP request
                        // Note that product details url will use GET request
                        JSONObject json = jsonParser.getJSONFromUrl(
                                profileURL, params);

                        // check your log for json response
                        Log.d("Single Product Details", json.toString());

                        // json success KEY
                        success = json.getInt(KEY_SUCCESS);
                        if (success == 1) {
                            // successfully received product details
                            JSONArray productObj = json
                                    .getJSONArray(KEY_NAME); // JSON Array

                            // get first product object from JSON Array
                            JSONObject product = productObj.getJSONObject(0);

                            // product with this uid found
                            // Edit Text
                            txtName = (EditText) findViewById(R.id.name);
                            txtPrice = (EditText) findViewById(R.id.email);
                            txtDesc = (EditText) findViewById(R.id.tel);

                            // display product data in EditText
                            txtName.setText(product.getString(KEY_lASTNAME));
                            txtPrice.setText(product.getString(KEY_FIRSTNAME));
                            txtDesc.setText(product.getString(KEY_EMAIL));

                        }else{
                            // product with uid not found
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            });

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once got all details
            pDialog.dismiss();
        }
    }
} 
```

那是php的代码

```
 <?php

// array for JSON response
$response = array();

// include db connect class
require_once 'DB_Connect.php';

// connecting to db
$db = new DB_CONNECT();

// check for post data
if (isset($_GET["username"])) {
$username = $_GET['username'];

// get a product from products table
$result = mysql_query("SELECT *FROM users WHERE username = $username");

if (!empty($result)) {
    // check for empty result
    if (mysql_num_rows($result) > 0) {

        $result = mysql_fetch_array($result);

        $product = array();
        $product["username"] = $result["username"];
        $product["first_name"] = $result["first_name"];
        $product["last_name"] = $result["last_name"];
        $product["email"] = $result["email"];
        $product["tel"] = $result["tel"];
        $product["age"] = $result["age"];
        // success
        $response["success"] = 1;

        // user node
        $response["product"] = array();

        array_push($response["product"], $product);

        // echoing JSON response
        echo json_encode($response);
    } else {
        // no product found
        $response["success"] = 0;
        $response["message"] = "No product found";

        // echo no users JSON
        echo json_encode($response);
    }
} else {
    // no product found
    $response["success"] = 0;
    $response["message"] = "No product found";

    // echo no users JSON
    echo json_encode($response);
 }
 } else {
 // required field is missing
 $response["success"] = 0;
 $response["message"] = "Required field(s) is missing";

 // echoing JSON response
 echo json_encode($response);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:20:19.143

您可以通过在浏览器中打开此网址来检查您的 php 代码。

```
http://10.0.2.2/android_login_api4/include/profile.php?username=username 
```

确保您在 URL 末尾放置了正确的用户名。

如果你的 php 代码是正确的，它会显示一个 json 格式的文本，否则会显示一个错误，这样你就可以发现你的 php 代码是正确的还是不正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:33:08.793

我认为您的问题是您的代码没有以适当的方式将参数提供给服务器。

这是我如何进行这种交流的简单示例：

```
private static String convertStreamToString(InputStream IS) {
    BufferedReader reader = new BufferedReader(new InputStreamReader(IS));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            IS.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
}

private JSONObject processCommand(String command, String params) {
    JSONObject result = null;

    HttpClient client = new DefaultHttpClient();
    HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000);
    HttpResponse response;

    try{
        String s = serverURL + command + ".php";
        if (params.length() != 0) s += "?" + params;

        Log.v("Wordster", s);

        HttpGet get = new HttpGet(s);
        response = client.execute(get);

        if (response != null){
            InputStream instream = response.getEntity().getContent();

            String instring = convertStreamToString(instream);

            Log.v("Wordster", instring);

            JSONObject json = new JSONObject(instring);
            instream.close();

            result = json;
        }
    } catch(Exception e) {
        e.printStackTrace();
        result = null;
    }

    return result;
}

public CommandResult getUserProfile(int userId) {
    String paramstr = 
            "sessionid=" + sessionID + 
            "&userid=" + userId;

    JSONObject data = processCommand("getuserprofile", paramstr);

    if (data != null) {
        try {
            if (data.getString("result").equals("ok")) {

                JSONObject u = data.getJSONObject("data");

                User user = new User(
                        u.getInt("userid"),
                        u.getString("loginname"),
                        u.getString("username"),
                        u.getString("email"),
                        u.getString("sex"),
                        AXUtils.convertSQLStringToDate(u.getString("birthdate"))
                );

                return new CommandResult(ResultCodes.OK, user);
            } else {
                if (data.getInt("errcode") == -2) 
                    return new CommandResult(ResultCodes.ERR_INVALID_SESSION);
                else
                    return new CommandResult(ResultCodes.ERR_INTERNAL);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    return new CommandResult(ResultCodes.ERR_COMM_ERROR);
} 
```

Activity 的用法如下：

```
private void loadUserProfile() {
    AsyncTask<Integer, Void, CommandResult> load = new AsyncTask<Integer, Void, CommandResult>() {
        @Override
        protected CommandResult doInBackground(Integer... userId) {
            WordsterApp app = (WordsterApp) getApplication();
            return app.server.getUserProfile(userId[0]);
        }

        @Override
        protected void onPostExecute(CommandResult result) {
            User u = (User) result.data;
            if (u != null) {
                user = u;

                findViewById(R.id.ControlsLayout).setVisibility(View.VISIBLE);
                findViewById(R.id.LoadingLayout).setVisibility(View.GONE);

                EditText et = (EditText) findViewById(R.id.LoginNameEditText);
                et.setText(user.loginName);
                et = (EditText) findViewById(R.id.UserNameEditText);
                et.setText(user.userName);
                et = (EditText) findViewById(R.id.EmailEditText);
                et.setText(user.email);
                et = (EditText) findViewById(R.id.BirthDateEditText);
                et.setText(AXUtils.ConvertDateToString(getBaseContext(), user.birthDate));        
            } else {
                new AXErrDialog(UserProfileActivity.this, R.string.cannot_communicate_with_server) {
                    @Override
                    void onClosed() {
                        setResult(Activity.RESULT_CANCELED);
                        finish();
                    };
                }.Show();
            }
        }
    };

    load.execute(userID);   
} 
```

php代码是（getuserprofile.php）：

```
require_once("../config.php");
require_once(LIBSDIR."db.class.php");
require_once(LIBSDIR."xutils.php");
require_once(LIBSDIR."ws_base.php");

if (!isset($_REQUEST["sessionid"]) || !isset($_REQUEST["userid"])) {
    Error(-1);
}

$sessionid = $_REQUEST["sessionid"];
$userid = $_REQUEST["userid"];

$db = new DataBase(DB_SERVER, DB_DATABASE, DB_USER, DB_PASSWORD);

if (!$uid = CheckSessionID($db, $sessionid)) {
    Error(-2);
}

if ($userid == -1)
    $userid = $uid;

$ds = $db->query(
    "SELECT " .
    "  nID as userid, " .
    "  cLoginName as loginname, " .
    "  cUserName as username, " .
    "  cEmail as email, " .
    "  cSex as sex, " .
    "  dBirth as birthdate, " .
    "  cProfilePictureID as profilepictureid " .
    "FROM WS_Users " .
    "WHERE " .
    "  nID = $userid");

$details = mysql_fetch_array($ds, MYSQL_ASSOC);

$data = array(
    "result" => "ok", 
    "data" => $details
);

echo json_encode($data); 
```

# php - 贝宝沙盒 IPN 模拟器 - 没有得到响应

> ID：15090911
> 
> 赞同：0
> 
> 时间：2013-02-26T13:54:47.387
> 
> 标签：php, paypal, paypal-ipn

我使用了来自 paypal 的完全相同的代码，并尝试从 Payapl Sandbox 的 IPN 模拟器获得响应。我已经在我的网站上设置了 ipn.php 文件，我将在其中获得 IPN 响应，它具有以下代码。正如我在下面的代码中所述，我仍然没有收到任何已验证或无效状态的邮件。所以请让我知道我的代码中缺少什么或有什么问题，以便我更正它。

```
<?php
$raw_post_data = file_get_contents('php://input');
$raw_post_array = explode('&', $raw_post_data);
$myPost = array();
foreach ($raw_post_array as $keyval) {
$keyval = explode ('=', $keyval);
if (count($keyval) == 2)
    $myPost[$keyval[0]] = urldecode($keyval[1]);
}

$req = 'cmd=_notify-validate';
if(function_exists('get_magic_quotes_gpc')) {
$get_magic_quotes_exists = true;
} 
foreach ($myPost as $key => $value) {        
if($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) { 
    $value = urlencode(stripslashes($value)); 
} else {
    $value = urlencode($value);
}
$req .= "&$key=$value"; 
}

$ch = curl_init('https://www.sandbox.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

if( !($res = curl_exec($ch)) ) {
// error_log("Got " . curl_error($ch) . " when processing IPN data");
curl_close($ch);
exit;
}
curl_close($ch);

if (strcmp ($res, "VERIFIED") == 0) {
$item_name = $_POST['item_name'];
$item_number = $_POST['item_number'];
$payment_status = $_POST['payment_status'];
$payment_amount = $_POST['mc_gross'];
$payment_currency = $_POST['mc_currency'];
$txn_id = $_POST['txn_id'];
$receiver_email = $_POST['receiver_email'];
$payer_email = $_POST['payer_email'];

mail('mymailid@yahoo.com', 'PayPal IPN', 'Working...');
} 
else if (strcmp ($res, "INVALID") == 0) 
{
// log for manual investigation
mail('kra_14_05@yahoo.co.in', 'PayPal IPN', 'NOT Working...');  
}
?> 
```

* * *

我曾尝试在贝宝沙盒中使用测试商家和买家帐户进行测试。我可以在测试商家帐户下查看 IPN 历史记录。在那里我可以看到 HTTP 响应代码 = 200，所以我猜我的 ipn 脚本是被 Paypal 访问的。0.25 美元的金额从买家账户中扣除并存入商家账户，所以我想这部分也可以正常工作。

现在我已经在单个变量中传递了 2 个值，例如。

```
<input type="hidden" name="custom" value="mem001::mempass001"> 
```

然后我试图在我的 ipn.php（ipn 脚本在此页面上）页面上接收“自定义”变量的值。使用 php 函数，我将两个值分开并存储在不同的变量中。

出于测试目的，我试图将上述值存储在数据库中，但值没有存储到数据库中。

那么，到目前为止，我到底做错了什么？在所有上述过程之后，我如何确保我真的从 IPN 获得“已验证”状态？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:16:34.413

我首先会检查您服务器上的访问日志和错误日志。确保您的访问日志显示 PayPal 实际上正在尝试将数据发布到您的脚本。如果访问日志显示 PayPal 发布到您的脚本，请检查您的错误日志以查看是否生成了任何错误。

确保您的服务器已配置为所有入站和出站连接，并且您没有任何会阻止访问您的系统的东西。另一种选择是在测试沙盒卖家帐户上进行设置，然后使用测试沙盒卖家帐户而不是使用模拟器进行购买。这样做的好处是，当您通过帐户并付款时，您将在 IPN 历史记录中记录 IPN。然后，您可以检查以验证 PayPal 是否将其发送出去。它还会告诉您您的服务器是否返回了 200ok 响应，或者您的服务器是否返回了 200ok 以外的其他状态。

我使用了与您相同的脚本示例，它基于[https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)上的脚本，过去这对我有用。如果这没有帮助，请告诉我，我可以尝试使用您的脚本对其进行测试，并提取我的一个发送电子邮件的 PHP 脚本。

# mvvm - kendo mvvm：如何定义自定义 CSS 绑定

> ID：15090913
> 
> 赞同：3
> 
> 时间：2013-02-26T13:55:01.043
> 
> 标签：mvvm, kendo-ui, custom-binding

这是真的吗：（或者我错过了什么？）

*   Kendo UI MVVM 不支持 css 绑定；

如果是，如何定义自定义 css 绑定？

[**我在这里**](http://feedback.kendoui.com/forums/127393-kendo-ui-feedback/suggestions/2782980-add-an-mvvm-css-binding)找到了一个实现，但我只有缩小的剑道 js 文件，任何人都可以提供下载未压缩的剑道 js 文件的链接吗？

***更新***

临时解决方案： http: [//feedback.kendoui.c​​om /forums/127393-kendo-ui-feedback/suggestions/2782980-add-an-mvvm-css-binding](http://feedback.kendoui.com/forums/127393-kendo-ui-feedback/suggestions/2782980-add-an-mvvm-css-binding)

必须修改 kendo.web.js 源代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T18:44:53.447

Kendo UI 支持设置任意 CSS 属性的“样式”绑定。文档可在此处获得：[http ://docs.kendoui.c​​om/getting-started/framework/mvvm/bindings/style](http://docs.kendoui.com/getting-started/framework/mvvm/bindings/style)

在旁注中，您可以创建自定义活页夹而无需编辑源代码。方法如下：[http ://docs.kendoui.c​​om/getting-started/framework/mvvm/bindings/custom](http://docs.kendoui.com/getting-started/framework/mvvm/bindings/custom)

最后可以使用[attr](http://docs.kendoui.com/getting-started/framework/mvvm/bindings/attr)绑定来设置`class`属性：http: [//jsbin.com/ojayoq/1/edit](http://jsbin.com/ojayoq/1/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T20:32:38.590

在[https://coderwall.com/p/gwa2jg有几个 CSS 活页夹](https://coderwall.com/p/gwa2jg)

**CSS 切换**

```
<div data-bind="cssToggle: truthyProperty" 
     data-enabled-css="on-class" 
     data-disabled-css="off-class"></div> 
```

还有

**CSS 状态**

```
<div data-bind="cssState: switch"
     data-css-states="stop:red, go:green, slowdown:amber"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-22T12:11:49.357

我为 Kendo UI 博客编写了一个示例活页夹，它可以满足您的需求： [为复杂类型制作 Kendo UI 活页夹](http://blogs.telerik.com/kendoui/posts/13-04-30/making-kendo-ui-binders-for-complex-types)

HTML 使用示例：

```
<div data-bind="class: { selected: isSelected, error: hasError }"> 
```

如果是真的，这将添加“选定”类，如果`isSelected`是真的，则添加“错误”类`hasError`。同样，如果绑定值是虚假的，它将删除这些类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-25T01:48:47.980

Kendo 现在（从 2015 年第二季度开始）提供[CSS 类绑定](http://docs.telerik.com/kendo-ui/framework/mvvm/bindings/css)以及样式绑定。

例子：

```
<div data-bind="css: { someClass: isSomeClassEnabled }"></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T18:51:57.797

**[这](http://demos.kendoui.com/web/mvvm/style.html)**不是您要查找的 CSS 绑定吗？

# symfony - Symfony2 在 Twig 扩展中使用实体管理器

> ID：15090916
> 
> 赞同：1
> 
> 时间：2013-02-26T13:55:06.887
> 
> 标签：symfony, doctrine-orm, twig

我正在使用 Tree Doctrine 扩展创建一个菜单系统，并且我想创建一个 Twig 扩展来显示基于请求的父节点的菜单，例如`{% display_menu(side_menu) %}`. 此功能将在基本树枝模板中（即菜单在网站的每个页面上）。

因为我将使用 Doctrine 存储菜单结构，所以我认为我需要访问 Twig 扩展中的 MenuRepository，所以我遇到的第一个问题是将实体管理器放入其中。在寻找解决方案时，[一些](http://forum.symfony-project.org/viewtopic.php?t=35202&p=117613) [人](https://groups.google.com/d/msg/symfony-devs/37T1LP4EOqY/N_VrFV7hwCMJ)说这是不好的做法，这是有道理的，因为 Twig 扩展是 View 的一部分。

因此，尽管我的问题有一个解决方案（在类似问题中链接），但我的问题是，有没有一种方法可以使用*良好的*实践来完成它？或者一开始有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:30:06.970

让实体了解任何服务——包括实体管理器——是一种不好的做法。将 EM 注入 Twig 扩展并没有错。虽然，我宁愿将模型管理器注入到 Twig 扩展中，以便扩展不知道持久层——这是管理器层的工作。

所以，我会`MenuManager`知道存储库/实体管理器并将其注入到扩展中。

# cakephp - 在 CakePHP 2.3 中使用 OAuth 进行身份验证

> ID：15090917
> 
> 赞同：5
> 
> 时间：2013-02-26T13:55:07.173
> 
> 标签：cakephp, oauth-2.0, cakephp-2.3

我有一个 CakePHP 应用程序，我希望我的用户能够使用 OAuth 登录。

我似乎让 OAuth 对话正常工作，因为我正在从它的末尾获取用户信息，并且可以`users`很好地将令牌保存到我的表中。

我的问题可能很愚蠢，但我正在努力解决何时需要使用给我的令牌。我是否应该将用户的 ID 存储在 cookie 中，并且每当他们“回到”我的网站时，从数据库中获取他们的令牌并让我们重新检查他们的详细信息？

我没有为使用 OAuth 的用户获得任何类型的密码，所以我应该为这些人绕过 Auth，还是使用其中一个令牌作为 CakePHP 的密码？

* * *

这是我的 UsersController 的登录和 oauth2callback 部分：

```
<?php
class UsersController extends AppController {

    public function login() {
        if ($this->request->is('post')) {
            if ($this->Auth->login()) {
                $this->redirect($this->Auth->redirect());
            } else {
                $this->Session->setFlash(__('Invalid username or password'));
            }
        } else {
            $client = $this->getGoogleClient();
            $authUrl = $client->createAuthUrl();
            $this->set(array('GoogleAuthUrl' => $authUrl));
        }
    }

    public function oauth2callback() {
        $client = $this->getGoogleClient();

        if (isset($this->request->query['code'])) {
            $client->authenticate($this->request->query['code']);
            $this->Session->write('token', $client->getAccessToken());
            $this->redirect('oauth2callback');
            return;
        }

        if ($this->Session->read('token')) {
            $client->setAccessToken($this->Session->read('token'));
        }

        $accessToken = $client->getAccessToken();
        if ($accessToken) {
            $oauth2  = new Google_Oauth2Service($client);
            $user = $oauth2->userinfo->get();

            $token = json_decode($accessToken);
            debug($token);
            debug($user);
            // We now have a user from Google. Either log them in, or create a new user
            $id = $this->User->field('id', array('email' => $user['email'], 'oauth_id' => $user['id']));
            if (empty($id)) {
                $new_user = $this->User->create();
                $new_user['User']['username'] = $user['email'];
                $new_user['User']['email'] = $user['email'];
                $new_user['User']['oauth_id'] = $user['id'];
                $new_user['User']['oauth_token'] = $token->access_token;
                $new_user['User']['oauth_expires'] = time() + $token->expires_in;
                $new_user['User']['oauth_id_token'] = $token->id_token;
                $new_user['User']['oauth_refresh_token'] = $token->refresh_token;
                $new_user['User']['oauth_created'] = $token->created;
                if ($this->User->save($new_user)) {
                    $new_user['User']['id'] = $this->User->id;
                    debug($new_user);
                    $this->Session->setFlash(__('Registration complete!'));
                    if ($this->Auth->login($new_user)) {
                     //   return $this->redirect($this->Auth->redirectUrl());
                    }
                    //$this->redirect(array('action' => 'index'));
                } else {
                    $this->Session->setFlash(__('There was a problem with your registration. Please, try again.'));
                }

            }

            // The access token may have been updated lazily.
            $this->Session->write('token', $client->getAccessToken());
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T16:22:19.340

CakePHP 向 Auth 组件添加自定义身份验证的方法是创建一个“自定义身份验证对象”（请参阅[​​ http://book.cakephp.org](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#creating-custom-authentication-objects)）。

# ruby-on-rails - Serve confident files in a RESTful API (Rails/Paperclip)

> ID：15090923
> 
> 赞同：0
> 
> 时间：2013-02-26T13:55:23.193
> 
> 标签：ruby-on-rails, security, rest, paperclip

I would like my users to be able to upload some files which are strictly related to them. The resource is only visible if they authenticate to the web service, so should the file attachment be.

Now with Paperclip I can specify the upload location of the files and even obfuscate the filename like so:

```
has_attached_file :avatar, {
    :url => "/system/:hash.:extension",
    :hash_secret => "longSecretString"
} 
```

But still, all files are stored in the same place and by brute-forcing you COULD see files that do not belong to you, even though unlikely.

Is there any way to protect the files from being seen by people that shouldn't?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:08:50.353

You should be able to configure paperclip to store the files somewhere outside your app's /public directory, so they have to be fetched and served by your application. If they have to be fetched by your application, then you can apply whatever authentication and authorization you need at that point.

Another approach is to store uploaded files in the database instead of in the filesystem. That makest the uploaded files just as secure as any other application data you store in the database.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:16:20.950

For object/model-level authorization of those objects, take a look at [canable](http://github.com/jnunemaker/canable), [rails_authorization](http://www.ruby-toolbox.com/categories/rails_authorization.html) in ruby toolbox, and the following questions:

*   [CRUD Ownership of Items/Microposts in Rails App](https://stackoverflow.com/q/15076473/178651)
*   [Rails object based permission/authorization engine?](https://stackoverflow.com/q/2463962/178651)

If you have trouble with Paperclip, you could take a look at [carrierwave](https://github.com/jnicklas/carrierwave) or something else from [rails_file_uploads](https://www.ruby-toolbox.com/categories/rails_file_uploads) in ruby toolbox. Carrierwave has support for storage on filesystem, in DB, or DB-managed filesystem storage (like large object support in [carrierwave-postgresql](https://github.com/diogob/carrierwave-postgresql), if you were using postgres).

# angularjs - AngularJS：防止模型更改导致视图更新

> ID：15090925
> 
> 赞同：1
> 
> 时间：2013-02-26T13:55:34.980
> 
> 标签：angularjs

我有一个指令`widget`，其中许多是动态添加到页面中的三个垂直列之一。`widget`在该指令中，我通过`parent`属性跟踪该列所在的列。我用来渲染它的 HTML 如下：

```
<div id="columns">
    <div id="column1">
        <widget data-ng-repeat="widget in widgets | filter:{parent: 'column1'}" data-widget="widget" />
    </div>
    <div id="column2">
        <widget data-ng-repeat="widget in widgets | filter:{parent: 'column2'}" data-widget="widget" />
    </div>
    <div id="column3">
        <widget data-ng-repeat="widget in widgets | filter:{parent: 'column3'}" data-widget="widget" />
    </div>
</div> 
```

每个`widget`都是指定的类型，因此它们各自具有不同的内容并且彼此独立。用户可以在不同的列之间拖放这些，Angular 会自动更新`parent`底层数据中的这些。我的问题是，通过 Angular 进行此模型更新，它还触发了指令的重新加载，因此它有效地重新初始化了小部件，从而消除了用户对其所做的任何更改。

我有什么办法可以让 Angular 更新底层模型数据，但阻止它重新渲染视图的更改？我意识到这是 Angular 应该做的，但在这种情况下它是不可取的，并且足以让我考虑删除 Angular。

我可以尝试整理一个 JSFiddle 来说明我遇到的问题，如果它有用的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:00:44.930

我们可能需要查看那个小部件指令。

但是如果不看它，如果重新处理视图正在消除对小部件所做的更新，那么小部件就不是很“Angular”。

我的意思是，您不应该在 DOM 中保留用户输入，您应该通过诸如 ngModel 甚至自定义指令之类的指令将用户输入保留到您的范围。如果您不想将指令中的更改发布到它的父模型中，则必须将其持久化到它自己的隔离范围中，然后在需要时将更改推出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:16:26.617

我最终自己解决了这个问题。在尝试在此处发布该问题的演示时，我意识到由于我的代码结构，这将是不可能的。所以，我已经开始了重构并确保一切都是“Angular 方式”的过程。这大大改善了我的代码结构，感觉好多了。它也无意中解决了我的问题，而我实际上并不知道是什么解决了它！

# batch-file - 在批处理脚本中对用户输入进行验证

> ID：15090930
> 
> 赞同：1
> 
> 时间：2013-02-26T13:55:54.840
> 
> 标签：batch-file

我需要在用户输入值时进行验证，他应该只输入数值，但用户将以以下格式输入值

```
Echo Build Number in the Format 5.1.2.44
set /p Build="enter Build Number Please : " 
```

如果他将值放在 5.1.2.3 中，那么他需要确定它是数字。他可以`?/.,`在值之间使用任何字符而不是 `.`（点）

有效的例子是`5.1.2.3`

无效的例子是`5.2.A.3`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:03:39.643

以下是如何验证分隔符之间的每个值是否为数字的示例。

```
@echo off
set "xResult=valid"
for /f "tokens=1,2,3,4 delims=?/.," %%A in ("%Build%") do (
    for /f "tokens=1 delims=1234567890" %%n in ("%%A") do set "xResult=invalid"
    for /f "tokens=1 delims=1234567890" %%n in ("%%B") do set "xResult=invalid"
    for /f "tokens=1 delims=1234567890" %%n in ("%%C") do set "xResult=invalid"
    for /f "tokens=1 delims=1234567890" %%n in ("%%D") do set "xResult=invalid"
)
echo %xResult% 
```

`A-D`这首先通过分隔符 ( )将 Build 字符串解析为四个单独的值 ( )，`?/.,`并检查每个值是否仅由数字 ( `0-9`) 组成。

# macos - 以二进制格式表示的已知格式结构突出显示程序

> ID：15090932
> 
> 赞同：0
> 
> 时间：2013-02-26T13:55:57.110
> 
> 标签：macos, data-structures, format, visualization, data-visualization

有人知道用于读取二进制文件并用 OS X 的结构突出显示（着色）表示它们的程序：

像这样的东西：

![但有数据](../Images/43211c13b5ab488b602f0bc7b1e42206.png)

只是为了更快更好地了解文件结构的外观以及文件有趣部分的数据是什么，而不是计算字节偏移量并写下字节......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:18:58.333

我相信 010 编辑器（在[http://www.sweetscape.com](http://www.sweetscape.com)上）可以满足您的需求，而不是作为图形，而是作为结构树。至少，它绝对优于原始十六进制编辑（尽管 010 Editor 也具有该功能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T03:52:19.640

在 OS X 上，您可以使用[Synalyze It！](http://www.synalysis.net)它允许定义描述二进制文件格式的“语法”。使用内置解析器应用后，十六进制视图会被着色，并且可以在树视图中显示和编辑解析结果。也可以打印彩色十六进制视图。

可以通过在十六进制视图中选择要着色的字节并根据数据将元素添加为二进制、字符串、数字来构建语法。

# sharepoint - 我需要部署一个共享点解决方案

> ID：15090935
> 
> 赞同：0
> 
> 时间：2013-02-26T13:56:01.850
> 
> 标签：sharepoint, sharepoint-2010

我在 Sharepoint 2010 网站上更新了一个主题。该站点是一个沙盒开发站点。更改包括对母版页、新 css 和主页上使用的一些小图像文件的更新。主页上还实现了一些 Web 部件。

现在，这些更改需要作为 Sharepoint 解决方案的一部分部署到生产环境。

我没有对第三方托管的服务器的直接和完全访问权限。

所以我的问题是，是否可以创建要部署的 SP 解决方案以及如何创建它？

（在开始开发之前我不知道我需要创建 SP 解决方案）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:56:29.803

如果更改只是对母版页、css 和图像文件的更新，您可以覆盖 hive 14 文件夹 (C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14) 中现有的那些。请务必先进行备份。

您还可以在安装了 Central Admin 的计算机上使用 SharePoint Designer 来更改 CSS 和母版页。这样做非常容易和直观。

有关更多信息，请参阅此处[Sharepoint 2010 - V4.master 的位置，](https://stackoverflow.com/questions/4127026/sharepoint-2010-location-of-v4-master)祝你好运！

# wpf - 领域层和表示层共享的 DDD 中的业务逻辑放在哪里？

> ID：15090937
> 
> 赞同：2
> 
> 时间：2013-02-26T13:56:07.560
> 
> 标签：wpf, mvvm, domain-driven-design

我正在使用 DDD 模式开发应用程序。

我`Invoice`在领域层上课。

```
public class Invoice
{
    List<InvoiceLine> list = new List<InvoiceLine>();

    public DateTime Date { get; set; }

    public Customer Customer { get; set; }

    public decimal GrandTotal 
    { 
        get
        {
            // Simplified grand total. 
            // It's actually include tax and discount to calculate.

            decimal total = 0m;
            foreach(InvoiceLine line in Lines)
                total += line.LineTotal;

            return total;
        }
    }

    public IEnumerable<InvoiceLine> Lines
    {
        get { return list; } 
    }

    public void AddLine(InvoiceLine line)
    {
        lines.Add(line);
    }
} 
```

我正在使用 mvvm 模式，所以我也有一个视图模型来编辑发票。我的问题是我**应该将业务逻辑放在哪里来计算 GrandTotal，以便域和表示上的业务逻辑相同？**

我应该将代码从域复制到演示文稿（`Invoice`到`InvoiceViewModel`）吗？或者提供一个域和演示都可以使用的服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:44:46.003

DDD 中聚合的主要目标是保持一致性 - 在您的情况下，一致性意味着例如 GrandTotal 将始终具有正确的值。也就是说，没有规则规定聚合类不能使用额外的类来获得这种一致性。

例如，您可以提供一个类，其唯一职责是计算总计并在您的域和视图模型中使用它。我不会称它为服务，因为它与 DDD 概念无关。例子：

```
public interface IInvoiceLine
{
    decimal Amount {get;}
}

public interface ICalculateGrandTotal
{
    decimal Calculate(IEnumerable<IInvoiceLine> lines);
}

public class GrandTotalCalculator: ICalculateGrandTotal
{
    ...
} 
```

现在您可以在视图模型和域中使用此计算器，而无需重复代码。除了接口之外，视图模型和域类之间没有直接耦合。`IInvoiceLine`接口可以由视图模型和领域实体分别实现。

# java - WSS4J 和 Apache Axis 不起作用

> ID：15090941
> 
> 赞同：0
> 
> 时间：2013-02-26T13:56:15.937
> 
> 标签：java, web-services, tomcat, axis, wss4j

我尝试将 WSS4J 与 Axis Web 服务一起使用，但没有任何反应。似乎根本没有使用 WSS4J。所有必要的库都在 WEB-INF/lib 目录中。该服务正在使用 org.apache.axis.client.AdminClient 实用程序进行部署。

这是我的 deploy.wsdd：

```
<deployment xmlns="http://xml.apache.org/axis/wsdd/"
xmlns:java="http://xml.apache.org/axis/wsdd/providers/java">

<!-- Services from AccountsServiceImplService WSDL service -->
<service name="AccountsServiceImpl" provider="java:RPC" style="wrapped"
    use="literal">
    <requestFlow>
        <handler type="java:org.apache.ws.axis.security.WSDoAllReceiver">
            <parameter name="passwordCallbackClass" value="haha" />
            <parameter name="action" value="UsernameToken" />
        </handler>
    </requestFlow>
    <parameter name="wsdlTargetNamespace" value="http://accoutsservice.abc.ru" />
    <parameter name="wsdlServiceElement" value="AccountsServiceImplService" />
    <parameter name="schemaQualified" value="http://accoutsservice.abc.ru" />
    <parameter name="wsdlServicePort" value="AccountsServiceImpl" />
    <parameter name="className"
        value="ru.abc.accoutsservice.AccountsServiceImpl" />
    <parameter name="wsdlPortType" value="AccountsServiceImpl" />
    <parameter name="typeMappingVersion" value="1.2" />
    <operation xmlns:operNS="http://accoutsservice.abc.ru"
        xmlns:retNS="http://accoutsservice.abc.ru" xmlns:rtns="http://www.w3.org/2001/XMLSchema"
        name="sendAccountNumber" qname="operNS:sendAccountNumber"
        returnQName="retNS:sendAccountNumberReturn" returnType="rtns:string"
        soapAction="">
    </operation>
    <parameter name="allowedMethods" value="sendAccountNumber" />

</service> 
```

尽管我什至没有`haha`类，但没有发生错误（请参阅`passwordCallbackClass`deploy.wsdd 中的参数）。我可以自由地将没有 WSS 标头的 SOAP 请求发送到我的服务。

**更新**

我已经解决了一些类路径问题。当我尝试打开`http://localhost:8080/axis/servlet/AxisServlet`页面时，我看到一个错误：`org.apache.axis.ConfigurationException: java.lang.ClassNotFoundException: org.apache.ws.axis.security.WSDoAllSender`. WSS4J jar 位于 {tomcat}\webapps\axis\WEB-INF\lib 目录中。我做错了什么？

**更新#2**

似乎`wsdl4j`jar 既不包含`org.apache.ws.axis.security.WSDoAllSender`类也不包含`wss4j`jar。但是，对于 1.5.x 版本，此类*在*`wss4j`jar 中。现在它不见了。WSS4J 的文档已过时。

# jquery - 事件处理程序不适用于动态内容

> ID：15090942
> 
> 赞同：261
> 
> 时间：2013-02-26T13:56:17.970
> 
> 标签：jquery, dynamic-content, static-content

我有一个标签 A，当点击它时，它会附加另一个标签 B 以在点击时执行操作 B。因此，当我单击标签 B 时，将执行操作 B。但是，该`.on`方法似乎不适用于动态创建的标签 B。

我的标签 A 的 html 和 jquery 如下：

```
<a id="address" class="add_address btn btn-inverse btn-medium pull-right push-top">Add Shipping address</a>

$('.add_address').click(function(){
    //Add another <a>
    $(document).append('<a id="address"  class="pull-right update btn btn-inverse btn-medium push-top">Update</a>');
}) 
```

当点击标签 B 时，会执行一些动作 B。我的jquery如下：

```
$('.update').on('click',function(){
  //action B
}); 
```

我有一些非动态内容也有“.update”类。上述`.on()`方法适用于非动态内容，但不适用于动态内容。

如何使其适用于动态内容？

* * *

## 回答 #1

> 赞同：589
> 
> 时间：2013-02-26T13:57:06.170

您必须添加选择器参数，否则事件是直接绑定而不是委托的，这仅在元素已经存在时才有效（因此它不适用于动态加载的内容）。

请参阅[http://api.jquery.com/on/#direct-and-delegated-events](http://api.jquery.com/on/#direct-and-delegated-events)

将您的代码更改为

```
$(document.body).on('click', '.update' ,function(){ 
```

jQuery 集合接收事件，然后将其委托给与作为参数给出的选择器匹配的元素。这意味着与使用时相反，`live`执行代码时必须存在 jQuery 集合元素。

由于这个答案受到很多关注，这里有两个补充建议：

**1）**如果可能，尽量将事件监听器绑定到最精确的元素，以避免无用的事件处理。

也就是说，如果您将 class 的元素添加`b`到 id 的现有元素中`a`，则不要使用

```
$(document.body).on('click', '#a .b', function(){ 
```

但使用

```
$('#a').on('click', '.b', function(){ 
```

**2)**当你添加一个带有 id 的元素时要小心，以确保你不会添加它两次。在 HTML 中拥有两个具有相同 id 的元素不仅是“非法的”，而且会破坏很多东西。例如，选择器`"#c"`将只检索一个具有此 ID 的元素。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-26T13:59:15.947

您在`.on`函数中缺少选择器：

```
.on(eventType, selector, function) 
```

这个选择器很重要！

[http://api.jquery.com/on/](http://api.jquery.com/on/)

> 如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者， **使用委托事件**附加事件处理程序

有关更多详细信息，请参阅[jQuery 1.9 .live() is not a function](https://stackoverflow.com/q/14354040/584192)。

# php - 通过手动索引从数组中搜索元素

> ID：15090949
> 
> 赞同：-1
> 
> 时间：2013-02-26T13:56:50.317
> 
> 标签：php, arrays

是否可以在 php 中的某个特定索引之后在数组中找到一个元素，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:08:18.297

您的问题相当模糊，因此答案将取决于您的数据的结构。如果您有一个带有顺序键的普通索引数组，则可以搜索数组的一部分：

```
function array_search_from($needle, $haystack, $index_from)
{
    $array_to_search = array_slice($haystack, $index_from);

    $index = array_search($needle, $array_to_search);

    if ($index === false)
    {
        return $index;
    }

    return $index + $index_from;
} 
```

.. 或者您可以将其实现为常规 for 循环以避免创建切片：

```
function array_search_from($needle, $haystack, $index_from)
{
    $len = count($haystack);

    for ($i = $index_from; $i < $len; $i++)
    {
        if ($haystack[$i] == $needle)
        {
            return $i;
        }
    }

    return false;
} 
```

要测试它是否按预期工作：

```
$array = array("one", "two", "three", "four", "one", "two");

var_dump(array_search_from("one", $array, 0));
var_dump(array_search_from("one", $array, 1));
var_dump(array_search_from("two", $array, 2));   

int(0)
int(4)
int(5) 
```

然后，您可以将其扩展为 array_search_slice，并可能添加更好的错误检查（例如，如果提供了无效参数，则 array_search 返回 NULL）。

为了好玩，由于 PHP 关联数组也是序列，您也可以对关联数组执行相同操作：

```
function array_search_from($needle, $haystack, $from)
{
    $searching = false;

    foreach ($haystack as $key => $value)
    {
        if ($key == $from)
        {
            $searching = true;
        }

        if ($searching && ($needle == $value))
        {
            return $key;
        }
    }

    return false;
} 
```

..并测试它们：

```
$array = array("one" => "foo", "two" => "bar", "three" => "baz", "four" => "woo", "five" => "foo", "six" => "bar");

var_dump(array_search_from("foo", $array, "one"));
var_dump(array_search_from("foo", $array, "two"));
var_dump(array_search_from("bar", $array, "three")); 
```

.. 结果是：

```
string(3) "one"
string(4) "five"
string(3) "six" 
```

..这可能不是那么有用，但可以做到。因此，它已经完成了。

# c# - IAsyncResult 输出字符串始终为空

> ID：15090952
> 
> 赞同：-2
> 
> 时间：2013-02-26T13:56:56.397
> 
> 标签：c#, asynchronous, callback, null

我的字符串消息始终为空，我的 Result AsyncState 也始终为空。有人看到错误了吗？

```
private void create_Incident(string computer_idn, string swidn_choice,
                             string swName_choice, string CI_Number,
                             string windows_user)
{
    string msg_id = "" + computer_idn + "_" + swidn_choice + "";
    string username = "BISS";

    server3.ILTISAPI api = new server3.ILTISAPI();
    api.BeginInsertIncident(username, "", msg_id, "", "", "2857",
        "BISS - Software Deployment", "", "", "NOT DETERMINED", "", "", "", "",
        "", "", "5 - BAU", "3 - BAU", "", "Interface", "", "", "", "", "", "", 
        delegate(IAsyncResult r) { InsertIncidentCallback(api, r); }, null);
}

private void InsertIncidentCallback(server3.ILTISAPI api,
                                    IAsyncResult result)
{
    // do something and then:
    string message;
    api.EndInsertIncident(result, out message);
} 
```

返回值：<0 错误（更多信息可以在 msg 参数中找到）。=0 好的。=1 好的。详细方法：

```
public IAsyncResult BeginInsertIncident(string userName, string password, 
                                        string MsgId, string ThirdPartyRef, 
                                        string Type, string EmployeeId, 
                                        string ShortDescription, string Details,
                                        string Category, string Service, 
                                        string  OwnerGrp, string OwnerRep, 
                                        string SecondLevelGrp, 
                                        string SecondLevelRep, 
                                        string ThirdLevelGrp, 
                                        string ThirdLevelRep, string Impact, 
                                        string Urgency, string Priority, 
                                        string Source, string Status, 
                                        string State, string Solution, 
                                        string ResolvedDate, string Cause, 
                                        string Approved, AsyncCallback callback, 
                                        object asyncState);

public int EndInsertIncident(IAsyncResult asyncResult, out string msg); 
```

我想检查味精，如果有错误或正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:58:05.917

异步状态是您传入的备用状态`object`。您正在传入`null`（作为最终参数）；因此`AsyncState`永远是`null`。

如果您不想要`null`，请将其他内容作为最终参数传入。

# jqgrid - jqgrid设置搜索工具栏触发器的等待时间

> ID：15090953
> 
> 赞同：0
> 
> 时间：2013-02-26T13:56:56.387
> 
> 标签：jqgrid

我有一个包含一些数据的 JQgrid，并且启用了工具栏搜索选项。我想知道是否有办法告诉工具栏在输入最后一个字符后 2 或 3 秒触发，或者在用户按下回车键时触发。搜索文档 wiki 没有结果。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:25:21.887

如果您检查将在使用`searchOnEnter: false`选项的情况下使用的 jqGrid 代码（请参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.custom.js#L432-L449)），您将看不到管理超时的选项，之后将自动开始搜索。超时始终为 500 毫秒（半秒）。因此，如果您需要另一个超时，则必须在自定义代码中实现相同的行为。您可以注册自己的`keydown`处理程序，它与选项做相同的`searchOnEnter: false`事情，但有另一个超时。例如

```
var $grid = $("#grid"), hTimeout;
$grid.jqGrid('filterToolbar', {defaultSearch: "cn", stringResult: true});
$grid.closest(".ui-jqgrid-view")
    .find(">.ui-jqgrid-hdiv .ui-search-toolbar th input")
    .keydown(function (e) {
        var uiKeyCode = $.ui.keyCode,
            keyCode = e.keyCode || e.which;

        if (keyCode === uiKeyCode.ENTER) {
            return false;
        }

        if (keyCode === uiKeyCode.PAGE_UP  || keyCode === uiKeyCode.PAGE_DOWN ||
                keyCode === uiKeyCode.END  || keyCode === uiKeyCode.HOME ||
                keyCode === uiKeyCode.UP   || keyCode === uiKeyCode.DOWN ||
                keyCode === uiKeyCode.LEFT || keyCode === uiKeyCode.RIGHT) {

            return;
        }

        if (hTimeout) {
            clearTimeout(hTimeout);
        }
        hTimeout = setTimeout(function () {
            $grid[0].triggerToolbar();
            hTimeout = undefined;
        }, 3000); // start searching with 3 sec timeout
    }); 
```

请参阅[演示](http://www.ok-soft-gmbh.com/jqGrid/CustomTimeoutOfSearchingToolbar.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:07:20.137

在 colModel 中，您可以将 searchoptions 设置为自定义函数，例如：

```
searchoptions: {dataInit: function (elem) { AutoOrAfterEnterSearch(elem) }} ... 
```

然后，您可以构建事件处理程序以在一段时间后或按下 Enter 键时触发搜索 Ex `if (e.keyCode == 13) { SearchFunction() };`，每次按键您都需要重置计时器。这不是解决方案的完整代码，但这应该是正确的路径。我个人使用它来为搜索工具栏构建一个自动完成功能（这可能比我认为的定时搜索更好）

# c - 在 C 中打开 .pkt（Omnipeek 捕获）文件

> ID：15090960
> 
> 赞同：0
> 
> 时间：2013-02-26T13:57:16.493
> 
> 标签：c, wireshark, pcap

我想在 C 程序中打开一个 omnipeek (.pkt) 文件。我该怎么做？转换为 .pcap 并通过 pcap 库打开会导致丢失重要的无线电信息。我可以有一个离线读取 .pkt 文件的示例程序吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:15:14.427

好吧，Wireshark 是一个可以做到这一点的示例程序，尽管它很大。有关“经典” Peek 格式（用于旧版本的 WildPacket 软件）的 wiretap/peekclassic.c 文件和有关“标记” Peek 格式（用于其软件的当前版本）的 wiretap/peektagged.c 文件。

您可能希望以“标记”格式处理比 Wireshark 当前处理的更多的无线电信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:31:53.617

WildPackets 技术支持可以为您提供文件格式的文档。此外，最新版本的 OmniPeek 将在以 pcap 格式保存时包含无线电信息。

# jquery - Jquery Slider，垃圾邮件点击会破坏我的滑块

> ID：15090971
> 
> 赞同：1
> 
> 时间：2013-02-26T13:57:48.057
> 
> 标签：jquery, html, slider

我正在寻找答案或建议如何让我的滑块忽略箭头上的任何点击，直到完成向左或向右箭头的移动。

我在这里有一个链接，可以准确地向您展示正在发生的事情。

[http://madaxedesign.co.uk/dev/index/](http://madaxedesign.co.uk/dev/index/)

和下面的Jquery代码：

```
$(document).ready(function() {

    var nav = $('div.slider').css('overflow', 'hidden').children('ul'),
    ul = $('#container .slider ul'),
    count = $('#container .slider ul li').length,
    width = count * 854;    

    $('#container .slider ul').width(width);

function slideRight() {
        ul.animate({
            left: '0'
        }, 1000);
    }

    function moveRight() {
        $('#container .slider ul li:first').insertBefore($('#container .slider ul li:last'));           
        ul.css("left", "-854px");
    }

    function slideLeft() {
        ul.animate({
            left: '-=854'
        }, 1000, function() {
            $('#container .slider ul li:first').appendTo(ul);           
            ul.css("left", "0");
        });
    }

    var autoSlide;

    autoSlide = setInterval(function() {
        slideLeft();
    }, 3000);

    $('#container .slider_container').mouseenter(function() {
        clearInterval(autoSlide);
    }).mouseleave(function() {
        autoSlide = setInterval(function() {
            slideLeft();
        }, 3000);
    });

    $('#slider-nav').show();

    $('#slider-nav .left_arrow').click(function(slideLeft){
        event.stopPropagation();
    });

    $('#slider-nav .right_arrow').click(function() {
        moveRight();
        slideRight().delay(200);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:02:11.857

使用[`:animated`选择器](http://api.jquery.com/animated-selector/)检查动画是否正在运行。

```
$('#slider-nav .right_arrow').click(function() {
    if(ul.is(":animated")) return;
    ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:05:28.113

诀窍是保留一个变量，告诉您当前是否正在滑动，并且仅在它是`false`. 然后当滑动函数执行时，将其设置为`true`，并告诉回调将其设置为 false。我`sliding`在下面的代码中调用了变量：

```
$(document).ready(function() {
    // Flag to test on trigger
    var sliding = false;

    var nav = $('div.slider').css('overflow', 'hidden').children('ul'),
    ul = $('#container .slider ul'),
    count = $('#container .slider ul li').length,
    width = count * 854;    

    $('#container .slider ul').width(width);

function slideRight() {
        // Stop the function if we're already sliding
        if(sliding){
            return false;
        }

        // And now we're sliding
        sliding = true;

        ul.animate({
            left: '0'
        }, 1000, function(){
            // Slide over!
            sliding = false;
        });
    }

    function moveRight() {
        $('#container .slider ul li:first').insertBefore($('#container .slider ul li:last'));
        ul.css("left", "-854px");
    }

    function slideLeft() {
        // Stop the function if we're already sliding
        if(sliding){
            return false;
        }

        // And now we're sliding
        sliding = true;
        ul.animate({
            left: '-=854'
        }, 1000, function() {
            // Slide over!
            sliding = false;

            $('#container .slider ul li:first').appendTo(ul);
            ul.css("left", "0");
        });
    }

    var autoSlide;

    autoSlide = setInterval(function() {
        slideLeft();
    }, 3000);

    $('#container .slider_container').mouseenter(function() {
        clearInterval(autoSlide);
    }).mouseleave(function() {
        autoSlide = setInterval(function() {
            slideLeft();
        }, 3000);
    });

    $('#slider-nav').show();

    $('#slider-nav .left_arrow').click(function(slideLeft){
        event.stopPropagation();
    });

    $('#slider-nav .right_arrow').click(function() {
        moveRight();
        slideRight().delay(200);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:02:40.030

我认为你的问题是`slideRight()`没有返回任何东西......

```
function slideRight() {
    return ul.animate({
        left: '0'
    }, 1000);
} 
```

# iphone - 如何识别呈现了 UIViewController

> ID：15090987
> 
> 赞同：26
> 
> 时间：2013-02-26T13:58:27.320
> 
> 标签：iphone, ios, objective-c, uiviewcontroller, modalviewcontroller

我创建了一个 UIViewController 子类，它可以被推送到 UINavigationController 的导航堆栈中，也可以从任何 UIViewController 呈现（模态）。我需要确定是否显示了我的视图控制器，如果显示了，我需要在视图控制器的顶部添加一个带有关闭按钮的工具栏。（否则，如果将其推入导航堆栈，则将添加默认关闭按钮，用户可以使用该按钮返回。）

在所有可用版本中，从 UIViewController 子类内部说 4.3、5.0 到 6.0，如果满足以下条件，我是否可以假设视图控制器已呈现（模态）。

```
if(self.parentViewController == nil || self.navigationController == nil) 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-06T07:43:53.527

在 iOS 5 中，UIViewController 获得了一个名为 的只读属性`presentingViewController`，它取代了旧的语义`parentViewController`（现在描述了*包含*）。当视图控制器需要访问呈现它的视图控制器时，可以使用此属性 - 注意：如果您是 API 新手，这通常会超出您的预期！

此外，`isBeingPresented`引入该属性几乎可以解决您当前所处的情况。在您的视图控制器的`viewWillAppear:`.

## 更新

我过度阅读了您似乎也以 iOS 4.3 为目标：
在这种情况下，您需要保护对的调用，`isBeingPresented`然后`if ([self respondsToSelector:…])`您可以在`else`块中检查 parentViewController 是否不为零。

向后兼容的另一种方法可能是覆盖`+resolveInstanceMethod:`以`-isBeingPresented`在运行时添加实现。这将使您的呼叫站点保持清洁，一旦您放弃古老的 iOS 支持，您就会摆脱运行时魔法；-)

但是请注意，在 iOS <5 上运行时，这有一些极端情况，并且您的初始方法也是如此：

视图控制器可以包含在任何其他视图控制器中——包括导航控制器。当最后一种情况发生时，你就不走运了：`parentViewController`will be `nil`， while `navigationController`will **not**。您可以尝试添加大量笨拙的代码来缓解旧 iOS 中的这种限制……或者您可以放手。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-08T13:56:27.647

我使用这段代码来检查 UIViewController 是否存在。

```
if (uiviewcontroller.presentingViewController != nil) {
   // do something
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-09T00:08:14.403

我有一个类似的案例，但是我展示的视图控制器**包含在它自己的导航控制器**中。因此，在该视图控制器中，当我需要确定是否添加关闭按钮和后退按钮时，**我只需检查导航控制器堆栈大小**。如果显示屏幕，堆栈大小应该是一（需要关闭按钮）......如果它是使用现有导航控制器推送的，那么堆栈大小将大于一（需要返回按钮）。

```
BOOL presented = [[self.navigationController viewControllers] count] == 1; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-26T14:10:15.710

为了处理这种行为，我通常在 viewWillAppear/viewWillDisappear 方法中设置/重置一个 BOOL 来切换它。

顺便说一句，您的测试条件似乎不正确。我认为你应该使用

```
if(self.parentViewController != nil || self.navigationController != nil) 
```

为什么不能总是将工具栏添加到视图控制器？是否存在视图已加载但从未呈现的情况？

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-03-11T17:46:15.103

在 iOS 9（或更高版本）上的 Swift 中：

```
if viewController.viewIfLoaded?.window != nil {
    // viewController is visible
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-01T06:54:15.783

@saikamesh。

当您使用 UINavigationController 导航您的 viewControllers 时，我认为您可以使用`topViewController`( [Doc here](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instp/UINavigationController/topViewController) ) 和`visibleViewController`( [Doc again](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instp/UINavigationController/visibleViewController) ) 来达到您的意图。

你提到：

> 当它被推入导航堆栈时，将添加默认的关闭按钮，通过使用该按钮用户可以返回

如果特定 UIViewController 的实例很重要，我认为最好创建一个共享单例实例并提供一个全局显示标志：

```
id specificVC = [SpecificViewController sharedInstance];
if (specificVC.isPushed) {
    [self.navController popToViewController:specificVC animated:YES];
} 
```

并检查它是否存在：

```
if ([self.navController.visibleViewController isKindOfClass:[SpecificViewController class]]) {
    // Hide or add close button
    self.isPresented = YES;
} 
```

或者，您可以阅读[广为接受的答案](https://stackoverflow.com/a/2777460/889538)。

:) 希望有所帮助。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-01T06:27:42.207

请以这种方式检查：

```
 for (UIViewController*vc in [self.navigationController viewControllers]) {
    if ([vc isKindOfClass: [OffersViewController class]]){ //this line also checks OffersViewController is presented or not 

        if(vc.isViewLoaded){
             NSLog(@"Yes");
        }

    }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-03-21T16:10:01.127

可以这样操作，又快又安全

```
UIViewController *topController = [UIApplication sharedApplication].keyWindow.rootViewController;

// Find the top controller on the view hierarchy
while (topController.presentedViewController) {
    topController = topController.presentedViewController;
}

// If the top controller it is not already presented
if (![topController isKindOfClass:[YourViewController class]]) {
    // Present it
    [topController presentViewController:yourViewController animated:YES completion:nil];
}
else {
// do some stuff here
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-05T09:52:13.180

您可以随时使用导航控制器中的 modalViewController 属性检查是否显示了模态视图控制器。前任：

```
 UIViewController *presentedController = self.navigationController.modalViewController;
   if (presentedController) {
      // At this point, you have a view controller presented from your navigation controller
      if ([presentedController isKindOfClass:[controllerYouWantToCheck class]]) {
         // add your toolbar/buttons/etc here
      }
   } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-03-03T15:52:11.167

我在这里没有看到的一个优雅的答案：

```
// Edit: Added 2 other modal cases
extension UIViewController {
    var isModal: Bool { 
        return self.presentingViewController?.presentedViewController == self
            || (navigationController != nil && navigationController?.presentingViewController?.presentedViewController == navigationController)
            || tabBarController?.presentingViewController is UITabBarController
    }
} 
```

信用：基于[这个要点](https://gist.github.com/edenwaith/c9de3000d8a9067daaca8f3caa1e43a4)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-07-25T12:46:02.327

正如[马丁里德](https://stackoverflow.com/users/2616171/martin-m-reed)所说，这是最好的方式

```
 BOOL presented = [[self.navigationController viewControllers] count] == 1;
        if (presented) {
            [self dismissViewControllerAnimated:YES completion:^{
                // do whatever you need here
            }];
        }
        else {
            [self.navigationController popViewControllerAnimated:YES];
        } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-02-26T14:10:23.227

如果是我，我会有一个自定义的 init 方法并在创建 vc 时使用它。

```
vc = [[[MyUIViewControllerSubClass alloc] init] initWithToolbarAndCloseButton:YES]; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-02-15T07:19:44.933

@AmitaiB 回答中的小修改以创建函数，

```
func isModallyPresented(tmpVC:UIViewController) -> Bool {
        return tmpVC.presentingViewController?.presentedViewController == tmpVC
            || (tmpVC.navigationController != nil && tmpVC.navigationController?.presentingViewController?.presentedViewController == tmpVC.navigationController)
            || tmpVC.tabBarController?.presentingViewController is UITabBarController
    } 
```

只需致电检查：

```
if(isModallyPresented(tmpVC:myTopVC)){
//return true if viewcontroller is presented 
} 
```

# php - “使用” php 语句多个？

> ID：15090989
> 
> 赞同：5
> 
> 时间：2013-02-26T13:58:34.223
> 
> 标签：php, symfony, silex

有什么办法可以“一机多用”吗？

我在 Silex 中使用了一个插件来使用 ORM，并且在每个实体中我必须像这样使用：

```
use Doctrine\ORM\Mapping\Entity,
    Doctrine\ORM\Mapping\Table,
    Doctrine\ORM\Mapping\Id,
    Doctrine\ORM\Mapping\Column,
    Doctrine\ORM\Mapping\GeneratedValue,
    Doctrine\ORM\Mapping\ManyToOne,
    Doctrine\ORM\Mapping\ManyToOne; 
```

所以，我的问题是，PHP 中是否有像 Java 这样的“多重使用”？我是说：

```
use Doctrine\ORM\Mapping\*; 
```

或者也许使用由 Silex/Symfony 或其他东西制作的自动加载技术？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T14:00:48.613

为什么不这样做...

`use Doctrine\ORM\Mapping as ORM;`

然后在你的注释中......

```
/**
 * @ORM\Column(type="int")
 */
 protected $name; 
```

等等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:29:43.527

不，这是不可能的——设计使然。

想象一下，您有两个“通配符”用法，如下所示：

```
use Foo\*;
use Bar\*; 
```

现在，在您的代码中的某处，您将访问其中一个命名空间的类，如下所示：

```
$a = new Something(); 
```

现在，该类`Something`可能需要自动加载，但要这样做，php 需要解析您的类的完整命名空间路径：`Foo\Something`或者`Bar\Something`？或者我们的意思是`Something`当前命名空间中的类？

# f# - 列表中的扩展方法？

> ID：15090990
> 
> 赞同：3
> 
> 时间：2013-02-26T13:58:34.013
> 
> 标签：f#, extension-methods

如何在 F# 列表上定义扩展方法？

像这样天真的尝试会导致错误：

```
type list with
    member this.abc() = 100 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T14:49:42.263

正确的语法是：

```
type List<'a> with
    member this.abc() = 100 
```

您也可以使用限定名称`Microsoft.FSharp.Collections.List<'a>`，但`list<'a>`不能使用类型缩写。

也就是说，使用模块函数更惯用。您应该制作一个模块函数，以便通过管道运算符轻松地与其他函数组合`(|>)`：

```
module List = 
    let abc (xs: _ list) = 100 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:48:38.047

```
type Microsoft.FSharp.Collections.List<'T> with
  member x.IsNotEmpty() = not (List.isEmpty x)

let xs = [1]
xs.IsNotEmpty 
```

# c# - 禁用 Alt 键的正常行为

> ID：15090994
> 
> 赞同：3
> 
> 时间：2013-02-26T13:58:42.047
> 
> 标签：c#, vb.net, winforms, hook, keyboard-shortcuts

按下该`Alt`键时，焦点通常会转到窗口的菜单。我需要**全局**禁用它。因为我的应用程序使用`Alt`密钥。当用户按下某个键与`Alt`键组合时，我的应用程序将另一个键发送到活动应用程序。所以我只需要`Alt`在它打开菜单时忽略它。

我是编程新手，我正在寻找 VB.Net 或 C# 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:15:15.797

我的第一个答案是**不要**`Alt`为您的程序使用密钥，而是使用它`Ctrl`。阻止“正常”事情的发生通常会导致未来的痛苦。

但是，如果您必须使用`Alt`密钥，我会查看[这篇文章](https://stackoverflow.com/a/12899915/231316)，它使用消息过滤器尝试在应用程序级别拦截它。

如果这不能满足您的要求，您可能需要查看 Global hooks，[此链接](https://stackoverflow.com/a/5861542/231316)将使您开始走上这条路。全局挂钩通常被认为是邪恶的，因此只有在上述两个建议不起作用时才应该使用它。您**必须**确保卸载挂钩，否则您可能会发现需要经常重新启动计算机以修复奇怪的键盘问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-23T17:34:18.800

这对我有用：

```
 private class AltKeyFilter : IMessageFilter
    {
        public bool PreFilterMessage(ref Message m)
        {
            return m.Msg == 0x0104 && ((int)m.LParam & 0x20000000) != 0;
        }
    } 
```

然后像这样添加消息过滤器：

```
Application.AddMessageFilter(new AltKeyFilter()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-05T10:03:32.720

你可以尝试这样的事情：

```
public void HandleKeyDown(object sender, keyEventArgs e)
{
  //do whatever you want with or without Alt

  if (e.Modifiers == Keys.Alt)
    e.SuppressKeyPress = true;
} 
```

这应该允许您将 Alt 用于您想要的任何东西，但不要激活菜单条。请注意，`e.SuppressKeyPress = true`还设置了`e.Handled = true`. [https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.keyeventargs.suppresskeypress?view=windowsdesktop-5.0](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.keyeventargs.suppresskeypress?view=windowsdesktop-5.0)

# c# - C#中的列表问题——MVC

> ID：15090997
> 
> 赞同：0
> 
> 时间：2013-02-26T13:58:54.087
> 
> 标签：c#, asp.net-mvc

我在以下代码中有问题。下面是我的模型代码

```
public class Comments
{
    public string displayComments { get; set; }

    [DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}")]
    public DateTime? dTime { get; set; }

    public int airPortId { get; set; }
}

public class LstComments
{
    private List<Comments> _lstcomment = new List<Comments>();

    public List<Comments> lstCommet
    {
        get
        {
            return _lstcomment;
        }
        set
        {
            _lstcomment = value;
        }
    }
} 
```

在 mycontroller 中，我从 EF 获取数据并将其添加到 For 循环中的属性中。下面的代码

```
Comments com = new Comments();
LstComments savedComments = new LstComments();

AirportEntities airPortEntity = new AirportEntities();

var userComments = from c in airPortEntity.AirportComments
                    select c;

//List<Comments> savedComments = new List<Comments>();

foreach (var item in userComments)
{
    com.displayComments = item.Comments;
    com.dTime = item.Time;

    savedComments.lstCommet.Add(com);            
} 
```

我的问题是我的整个列表正在更新相同的记录（最近添加的数据）

例如。foreach 3rd timn 使用第 3 项数据更新列表中的第 1 项和第 2 项第 3 项。

我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T14:01:48.943

`Comments`您在循环之外实例化。这意味着堆上有一堆对同一个注释对象的引用。你需要做

`Comments com = new Comments();` 在 foreach 里面。这将在每次迭代时创建一个单独的实例，而不是仅仅为一个实例提供新值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T14:01:40.257

您需要`Comments com = new Comments();`在 foreach 中每次实例化。至于现在，您只需重写对同一对象的引用。

或者将 foreach 重写为：

```
 foreach (var item in userComments)
    {
        savedComments.lstCommet.Add(
           new Comments()
           {
               com.displayComments = item.Comments,
               com.dTime = item.Time
           });  
    } 
```

# git - 来自 CodeAurora.org 的 Git 克隆，只有一个 repo，而不是整个项目

> ID：15090999
> 
> 赞同：2
> 
> 时间：2013-02-26T13:58:59.957
> 
> 标签：git, git-clone

所以，我想知道有什么方法可以克隆这个 repo： [https ://www.codeaurora.org/gitweb/quic/la/?p=kernel/msm.git;a=tree;h=refs/heads/ korg/linux-3.0.y;hb=refs/heads/korg/linux-3.0.y](https://www.codeaurora.org/gitweb/quic/la/?p=kernel/msm.git;a=tree;h=refs/heads/korg/linux-3.0.y;hb=refs/heads/korg/linux-3.0.y)无需像这样克隆整个项目：

```
git clone git://codeaurora.org/kernel/msm.git 
```

谢谢！