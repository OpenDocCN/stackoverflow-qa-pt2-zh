# StackOverflow 问答 13409000-13409999

# java - 我可以得到 ...args 变量吗？我想做 MyLog(String format, Object... args)

> ID：13409000
> 
> 赞同：0
> 
> 时间：2012-11-16T01:16:32.973
> 
> 标签：java, logging, arguments

如果我打电话

```
String name = "Chang";
int id = 1;
boolean isChecked = false;

MyLog.d(__FORMAT__, name, id, isChecked); 
```

> MyLog.java

```
public static d(String foramt, Object... args) {
    Log.d(___TAG___, String.format(format, args));
} 
```

我可以得到 arg 值。“常”，1，假。

但我不知道 arg 变量（？）、“name”、“id”、“isChecked”。

我要登录

```
name: Chang 
id: 1
isChecked:false 
```

我可以得到 "name", "id", "isChecked" 吗？

对不起可怜的英语...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:21:45.183

在java中，可变参数可以像数组一样被引用。例如，您可以编写：

```
System.out.println(args[0]); 
```

如果您要问如何获取传入的变量的名称，那是不可能的。最好做一个类调用Person，然后像这样重新声明方法：

```
public static d(String foramt, Person... args) {
     for(Person p:args){
         //get the values of each object here and log them
     }
} 
```

# php - 如何解析这个特定的 XML？

> ID：13409001
> 
> 赞同：1
> 
> 时间：2012-11-16T01:16:34.593
> 
> 标签：php, xml, simplexml

这是我迄今为止尝试过的，它给了我一堆我不想要的东西（浏览器输出见底部）：

```
// transform to Simple XML
$xml = new SimpleXMLElement($results);
// find category names
$xml = $xml->xpath('params/param/value/array/data/value/struct/member/value/string');

print_r($xml); 
```

这是 XML，我需要获取所有 categoryName 节点：

```
<?xml version="1.0"?>
<methodResponse>
  <params>
    <param>
      <value>
      <array><data>
  <value><struct>
  <member><name>categoryId</name><value><string>7</string></value></member>
  <member><name>parentId</name><value><string>0</string></value></member>
  <member><name>description</name><value><string>@MyCat000egory</string></value></member>
  <member><name>categoryDescription</name><value><string></string></value></member>
  <member><name>categoryName</name><value><string>@MyCat000egory</string></value></member>
  <member><name>htmlUrl</name><value><string>http://en.webacceleration.net/?cat=7</string></value></member>
  <member><name>rssUrl</name><value><string>http://en.webacceleration.net/?feed=rss2&amp;amp;cat=7</string></value></member>
</struct></value>
  <value><struct>
  <member><name>categoryId</name><value><string>6</string></value></member>
  <member><name>parentId</name><value><string>0</string></value></member>
  <member><name>description</name><value><string>this is the category</string></value></member>
  <member><name>categoryDescription</name><value><string></string></value></member>
  <member><name>categoryName</name><value><string>this is the category</string></value></member>
  <member><name>htmlUrl</name><value><string>http://en.webacceleration.net/?cat=6</string> </value></member>
  <member><name>rssUrl</name><value><string>http://en.webacceleration.net/?feed=rss2&amp;amp;cat=6</string></value></member>
</struct></value>
  <value><struct>
  <member><name>categoryId</name><value><string>1</string></value></member>
  <member><name>parentId</name><value><string>0</string></value></member>
  <member><name>description</name><value><string>Uncategorized</string></value></member>
  <member><name>categoryDescription</name><value><string></string></value></member>
  <member><name>categoryName</name><value><string>Uncategorized</string></value></member>
  <member><name>htmlUrl</name><value><string>http://en.webacceleration.net/?cat=1</string></value></member>
  <member><name>rssUrl</name><value><string>http://en.webacceleration.net/?feed=rss2&amp;amp;cat=1</string></value></member>
</struct></value>
</data></array>
      </value>
    </param>
  </params>
</methodResponse> 
```

这是浏览器输出：

```
Array ( [0] => SimpleXMLElement Object ( [0] => 7 ) [1] => SimpleXMLElement Object ( [0] => 0 ) [2] => SimpleXMLElement Object ( [0] => @MyCat000egory ) [3] => SimpleXMLElement Object ( ) [4] => SimpleXMLElement Object ( [0] => @MyCat000egory ) [5] => SimpleXMLElement Object ( [0] => http://en.webacceleration.net/?cat=7 ) [6] => SimpleXMLElement Object ( [0] => http://en.webacceleration.net/?feed=rss2&cat=7 ) [7] => SimpleXMLElement Object ( [0] => 6 ) [8] => SimpleXMLElement Object ( [0] => 0 ) [9] => SimpleXMLElement Object ( [0] => this is the category ) [10] => SimpleXMLElement Object ( ) [11] => SimpleXMLElement Object ( [0] => this is the category ) [12] => SimpleXMLElement Object ( [0] => http://en.webacceleration.net/?cat=6 ) [13] => SimpleXMLElement Object ( [0] => http://en.webacceleration.net/?feed=rss2&cat=6 ) [14] => SimpleXMLElement Object ( [0] => 1 ) [15] => SimpleXMLElement Object ( [0] => 0 ) [16] => SimpleXMLElement Object ( [0] => Uncategorized ) [17] => SimpleXMLElement Object ( ) [18] => SimpleXMLElement Object ( [0] => Uncategorized ) [19] => SimpleXMLElement Object ( [0] => http://en.webacceleration.net/?cat=1 ) [20] => SimpleXMLElement Object ( [0] => http://en.webacceleration.net/?feed=rss2&cat=1 ) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:26:28.063

```
$categories = $xml->xpath('//name[text()="categoryName"]/../value/string'); 
```

用于`text()="categoryName"`定位`<name>`并`/../`检索其兄弟节点`<value>`。

全面分解：

*   `//name[text()="categoryName"]``<name>`文本值为“categoryName”的 所有节点
*   `/../`上一场比赛的父节点
*   `/value/string` `<string>``<value>`匹配的父节点的子节点`/../`

.

```
 var_dump($categories);
    array(3) {
      [0]=>
      object(SimpleXMLElement)#5 (1) {
        [0]=>
        string(14) "@MyCat000egory"
      }
      [1]=>
      object(SimpleXMLElement)#6 (1) {
        [0]=>
        string(20) "this is the category"
      }
      [2]=>
      object(SimpleXMLElement)#7 (1) {
        [0]=>
        string(13) "Uncategorized"
      }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T01:26:37.587

使用而不是简单地使用`member`这个：`member[name="categoryName"]`

```
$xml = $xml->xpath('params/param/value/array/data/value/struct/member[name="categoryName"]/value/string'); 
```

# python - 使用 imshow 时自定义刻度自动缩放？

> ID：13409006
> 
> 赞同：8
> 
> 时间：2012-11-16T01:17:36.423
> 
> 标签：python, matplotlib

我正在尝试`imshow`使用以下代码更改 x 轴上刻度的值：

```
import matplotlib.pyplot as plt
import numpy as np

def scale_xaxis(number):
    return(number+1001)

data = np.array([range(10),range(10,20)])
fig = plt.figure(figsize=(3,5))
ax = fig.add_subplot(111)
ax.imshow(data,aspect='auto')
ax.autoscale(False)
xticks = ax.get_xticks()
ax.xaxis.set_ticklabels(scale_xaxis(xticks))
plt.savefig("test.png") 
```

[结果图像 http://ubuntuone.com/2Y5ujtlEkEnrlTcVUxvWLU](http://ubuntuone.com/2Y5ujtlEkEnrlTcVUxvWLU)

然而，x 刻度重叠并具有“非圆形”值。matplotlib 有什么方法可以自动执行此操作吗？通过使用`set_ticklabels`或其他方式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T17:35:15.637

还可以考虑使用`extent` [(doc)](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.imshow)来`matplotlib`考虑如何放入刻度标签并添加任意班次：

```
data = np.array([range(10),range(10,20)])
fig = plt.figure(figsize=(3,5))
ax = fig.add_subplot(111)
ax.imshow(data,aspect='auto',extent=[10000,10010,0,1]) 
```

如果您确实想要我的手，您最好设置`formatter`and`locator`以`axis` 获得您想要的[(doc)](http://matplotlib.org/api/ticker_api.html#module-matplotlib.ticker)。

```
import matplotlib.pyplot as plt
import numpy as np

def scale_xaxis(number):
    return(number+1001)

def my_form(x,pos):
    return '%d'%scale_xaxis(x)

data = np.array([range(10),range(10,20)])
fig = plt.figure(figsize=(3,5))
ax = fig.add_subplot(111)
ax.imshow(data,aspect='auto')
ax.autoscale(False)
ax.xaxis.set_major_locator(matplotlib.ticker.MultipleLocator(int(2)))
ax.xaxis.set_major_formatter(matplotlib.ticker.FuncFormatter(my_form)) 
```

The locator needs to be set to make sure that ticks don't get put at non-integer locations which are then forcible cast to integers by the formatter (which would leave them in the wrong place)

related questions:

[matplotlib: format axis offset-values to whole numbers or specific number](https://stackoverflow.com/questions/3677368/matplotlib-format-axis-offset-values-to-whole-numbers-or-specific-number)

[removing leading 0 from matplotlib tick label formatting](https://stackoverflow.com/questions/8555652/removing-leading-0-from-matplotlib-tick-label-formatting)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T17:31:43.663

有几种方法可以做到这一点。

你可以：

1.  传入整数数组而不是浮点数数组
2.  传入格式化字符串数组
3.  使用自定义刻度格式化程序

对于这么简单的事情，最后一个选项是矫枉过正的。

作为第一个选项的示例，您可以将`scale_xaxis`函数更改为如下所示：

```
def scale_xaxis(numbers):
    return numbers.astype(int) + 1001 
```

请注意，您得到的`ax.get_xticks`是一个 numpy 数组而不是单个值。因此，我们需要做`number.astype(int)`而不是`int(number)`.

或者，我们可以返回一系列格式化的字符串。`set_xticklabels`实际上需要一个字符串序列：

```
def scale_xaxis(numbers):
    return ['{:0.0f}'.format(item + 1001) for item in numbers] 
```

在这里使用自定义刻度格式化程序是多余的，所以我暂时不考虑它。不过，在正确的情况下，它非常方便。

# iphone - AppDelegate.m 中当前 ViewController 类名的 NSLog

> ID：13409009
> 
> 赞同：3
> 
> 时间：2012-11-16T01:18:38.047
> 
> 标签：iphone, ios, xcode, cocoa-touch

如何从当前的 ViewController 类名生成 NSLog？

```
- (void)applicationWillResignActive:(UIApplication *)application
{

    NSLog(self.window.rootViewController.class);

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T01:22:49.580

试试这个：

```
NSLog(@"%@", NSStringFromClass(self.window.rootViewController.class)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T01:40:50.707

如果您使用的是导航控制器，您可能想要这样的东西：

```
NSLog(@"%@", [self.window.rootViewController.navigationController.visibleViewController class]); 
```

# eclipse - Eclpise CDT：查看给定目录中源代码中定义的所有宏

> ID：13409010
> 
> 赞同：0
> 
> 时间：2012-11-16T01:18:39.233
> 
> 标签：eclipse, eclipse-cdt

在 Eclipse CDT 中，如何查看给定目录树下所有源文件中定义的所有宏？我不想看到存在于给定目录树之外的包含文件中定义的任何宏。

在“打开元素”对话框 ( `Ctrl`++ `Shift`)`T`中，我可以取消选中所有元素类型，仅选中“宏”类型，然后搜索“*”。这将显示索引中的所有宏。无法根据“选定资源”进一步过滤它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:35:47.393

我找到了这个问题的答案。

1.  在 Project Explorer 中单击要对其执行递归搜索的目录。
2.  点击`Ctrl`+`H`以获取“搜索”对话框。转到“C/C++ 搜索”选项卡。
3.  在“搜索”框中，取消选中“任何元素”并选中“宏”。
4.  在“限制为”框中，取消选中“所有事件”并选中“定义”。
5.  在“范围”框中，选择“选定资源”。
6.  将搜索字符串设置为“*”（不带引号）。
7.  最后，点击“搜索”按钮。

![在此处输入图像描述](../Images/54dc13d598f33c7c9d804e53436803dc.png)

# ruby-on-rails - 摆脱 Rails 中的 X-CSRF-Token

> ID：13409013
> 
> 赞同：1
> 
> 时间：2012-11-16T01:19:02.153
> 
> 标签：ruby-on-rails, rest, token, restful-authentication

我需要为 Rails 设计一个 RESTful API，它可以从 Web 浏览器、智能手机、平板电脑等登录。当我登录时，它总是需要 X-CSRF-Token，所以每次我都需要使用会话或 cookie 信息。但是 REST api 应该是无状态的，这意味着不应该使用 cookie。有没有办法摆脱它？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:25:45.340

这是我在一个同时响应 HTML 和 JSON 的应用程序中处理这个问题的方法。我想要 CSRF 检查，除非它是来自受信任来源的 API 调用，所以

application_controller.rb

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  # has to come after the protect_from_forgery line
  skip_before_filter :verify_authenticity_token, :if => :api_request?

  # but don't just accept any URL with a .json extension, you need something else to
  # ensure your caller is trusted (in this case I test for a valid API key being passed)
  before_filter :api_key_valid?, :if => :api_request?

  def api_request?
    request.format == 'application/json'
  end

  # ... etc
end 
```

# c - 为什么 %d 代表整数？

> ID：13409014
> 
> 赞同：80
> 
> 时间：2012-11-16T01:19:10.183
> 
> 标签：c, formatting, printf

我知道这听起来并不高效，但我正在寻找一种方法来记住`printf`呼叫的所有格式代码。`%s`, `%p`,`%f`都是显而易见的，但我不明白`%d`从哪里来。已经被`%i`别的东西占用了？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-11-16T01:22:34.747

它代表“[十进制](http://en.wikipedia.org/wiki/Decimal)”（以 10 为底），而不是“整数”。您可以使用`%x`以[十六进制](http://en.wikipedia.org/wiki/Hexadecimal)（以 16 为底）打印，并`%o`以[八进制](http://en.wikipedia.org/wiki/Octal)（以 8 为底）打印。一个整数可以是这些基数中的任何一个。

在中，如果您更喜欢表示“整数”而不是“十进制”，则`printf()`可以将`%i`其用作 的同义词，但通常首选它，因为它更具体。`%d``%d`

在输入时， using `scanf()`，您可以同时使用`%i`和`%d`。`%i`意味着将其解析为任何基数的整数（八进制、十六进制或十进制，由 a`0`或`0x`前缀表示），而`%d`意味着将其解析为十进制整数。

以下是所有这些操作的示例：

```
#include <stdio.h>

int main() {
  int out = 10;
  int in[4];

  printf("%d %i %x %o\n", out, out, out, out);
  sscanf("010 010 010 010", "%d %i %x %o", &in[0], &in[1], &in[2], &in[3]);
  printf("%d %d %d %d\n", in[0], in[1], in[2], in[3]);
  sscanf("0x10 10 010", "%i %i %i", &in[0], &in[1], &in[2]);
  printf("%d %d %d\n", in[0], in[1], in[2]);

  return 0;
} 
```

因此，仅`%i`当您希望输入基数依赖于前缀时才应使用；如果输入基数应固定，则应使用`%d`、`%x`或`%o`。特别是，领先`0`使您进入八进制模式这一事实可以赶上您。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-16T01:23:29.810

[http://en.wikipedia.org/wiki/Printf_format_string](http://en.wikipedia.org/wiki/Printf_format_string)似乎说它是十进制的，正如我猜测的那样

`d,i`

> int 作为带符号的十进制数。'%d' 和 '%i' 是输出的同义词，但在与 scanf() 一起用于输入时是不同的（如果数字前面有 0x，则使用 %i 会将数字解释为十六进制，如果前面有 0，则将其解释为八进制。）

# java - 通过 json 对象、Android 和 google map api 从自动完成搜索功能中获取位置信息

> ID：13409019
> 
> 赞同：1
> 
> 时间：2012-11-16T01:19:55.997
> 
> 标签：java, android, google-maps, dataadapter

我正在构建一个 android 应用程序，用户可以在其中按位置搜索并保存位置信息。搜索框具有自动完成功能，因此，当用户输入内容时，他实际上可以在框上获得建议列表。我在我的搜索框中实现了这个。为此，我使用本教程实现了一个单独的数据适配器。但是这里我只能得到一个名字列表，而且我还需要有对应的经纬度。我怎么能得到那个。这是我在位置视图文件中的代码，

```
LOC= (AutoCompleteTextView) findViewById(R.id.autoCompleteEditText1);
        Context ctx=this;
        LOC.setAdapter(new com.cuet.csezeroseven.dao.PlacesAutoCompleteAdapter(this,
                R.layout.list_item)); 
```

这是我使用的数据适配器，

```
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLEncoder;
import java.util.ArrayList;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.content.Context;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.Filter;
import android.widget.Filterable;

public class PlacesAutoCompleteAdapter extends ArrayAdapter<String> implements
        Filterable {
    private ArrayList<String> resultList;
    private static final String PLACES_API_BASE = "https://maps.googleapis.com/maps/api/place";
    private static final String TYPE_AUTOCOMPLETE = "/autocomplete";
    private static final String OUT_JSON = "/json";
    //do not change this key
    private static final String API_KEY = "my_key";
    private static final String TAG = "tag";

    public PlacesAutoCompleteAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    @Override
    public int getCount() {
        return resultList.size();
    }

    @Override
    public String getItem(int index) {
        return resultList.get(index);
    }

    public static ArrayList<String> autocomplete(String input) {

        ArrayList<String> resultList = null;

        HttpURLConnection conn = null;
        StringBuilder jsonResults = new StringBuilder();
        try {
            StringBuilder sb = new StringBuilder(PLACES_API_BASE
                    + TYPE_AUTOCOMPLETE + OUT_JSON);
            sb.append("?sensor=false&key=" + API_KEY);
            sb.append("&components=country:us");
            sb.append("&input=" + URLEncoder.encode(input, "utf8"));

            URL url = new URL(sb.toString());
            conn = (HttpURLConnection) url.openConnection();
            InputStreamReader in = new InputStreamReader(conn.getInputStream());

            // Load the results into a StringBuilder
            int read;
            char[] buff = new char[1024];
            while ((read = in.read(buff)) != -1) {
                jsonResults.append(buff, 0, read);
            }
        } catch (MalformedURLException e) {
            Log.e(TAG, "Error processing Places API URL", e);
            return resultList;
        } catch (IOException e) {
            Log.e(TAG, "Error connecting to Places API", e);
            return resultList;
        } finally {
            if (conn != null) {
                conn.disconnect();
            }
        }

        try {
            // Create a JSON object hierarchy from the results
            JSONObject jsonObj = new JSONObject(jsonResults.toString());
            JSONArray predsJsonArray = jsonObj.getJSONArray("predictions");

            // Extract the Place descriptions from the results
            resultList = new ArrayList<String>(predsJsonArray.length());
            for (int i = 0; i < predsJsonArray.length(); i++) {
                resultList.add(predsJsonArray.getJSONObject(i).getString(
                        "description"));
            }

        } catch (JSONException e) {
            Log.e(TAG, "Cannot process JSON results", e);
        }

        return resultList;
    }

    @Override
    public Filter getFilter() {
        Filter filter = new Filter() {
            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults filterResults = new FilterResults();
                if (constraint != null) {
                    // Retrieve the autocomplete results.

                    resultList = autocomplete(constraint
                            .toString());

                    // Assign the data to the FilterResults
                    filterResults.values = resultList;
                    filterResults.count = resultList.size();
                }
                return filterResults;
            }

            @Override
            protected void publishResults(CharSequence constraint,
                    FilterResults results) {
                if (results != null && results.count > 0) {
                    notifyDataSetChanged();
                } else {
                    notifyDataSetInvalidated();
                }
            }
        };
        return filter;
    }
} 
```

这完全是按照[本](https://developers.google.com/academy/apis/maps/places/autocomplete-android)教程编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T01:14:20.857

从这个[Stackoverflow 问题](https://stackoverflow.com/questions/14946169/places-autocomplete-api-to-get-gps-coordinates-from-address-entered)，我猜你必须使用第一个“参考”做另一个查询。

# boolean - 无效到布尔处理

> ID：13409027
> 
> 赞同：0
> 
> 时间：2012-11-16T01:20:52.223
> 
> 标签：boolean, processing, void

我正在尝试检查 .save 方法是否已执行，但出现“无法从 void 转换为布尔值”错误。我怎么能检查它？此外，`img.save()`在网络小程序中也不起作用，任何线索为什么它不起作用？

```
PImage img  = get (180, 0, 620, 400);

if( img.save("img/111,jpg") )
{
fill(0, 255, 0);
}
else
{
 fill(255, 0, 0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:25:15.960

您的 if 语句假设 true 或 false 将由`img.save()`函数返回。因此，您需要检查`img.save()`返回的内容。如果这是一种方法，那么它一旦执行就无法返回任何值，这意味着您无法比较它......

`try/catch`如果您预计方法可能会失败，请放入方法调用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:15:07.527

一心一意：

1.  您设置填充，但之后不要绘制任何东西（至少在发布的代码中）*
2.  默认情况下，如果不[签署小程序](http://wiki.processing.org/w/Sign_an_Applet)，某些功能可能无法工作。
3.  您不能使用 PImage 的 save() 方法为您进行上传。这是文档中的引用：

> 在 Web 浏览器中运行程序时不能使用 save()。

您将需要使用服务器端脚本来传递数据，然后将图像保存到 serser。看看[Philho 的上传草图](http://bazaar.launchpad.net/~philho/+junk/Processing/files/head:/ImageUpload/)。请注意，他正在将数据传递给处理在服务器上写入文件的 php 脚本。

*虽然不那么重要，但您可以在 Processing IDE/locally 中尝试此操作以查看颜色变化：

```
if( img.save("img/111.jpg") )
{
fill(0, 255, 0);
}
else
{
 fill(255, 0, 0);
}
rect(0,0,width,height); 
```

# c++ - 具有相同编译器的相同程序代码导致不同的二进制文件

> ID：13409029
> 
> 赞同：9
> 
> 时间：2012-11-16T01:21:18.247
> 
> 标签：c++, multithreading, segmentation-fault, qnx

我的代码有一些非常奇怪的症状。

1.  代码在我的电脑上编译，版本如下：

    一种。GCC 版本：4.4.2

    湾。CMAKE 版本：2.8.7

    C。QNX（操作系统）版本：6.5.0

并且代码在释放一些内存并退出函数时存在段错误（不会因任何代码而死，只是在函数退出时）。

这件事的奇怪之处在于：

1.  代码在发布模式而不是调试模式下执行：

    一种。代码是线程化的，因此这表明存在竞争条件。

    湾。我无法通过将其置于调试模式进行调试。

2.  在具有相同版本的所有东西的同事机器上编译的代码没有这个问题。

    一种。奇怪的是，同事的代码可以工作，而且在他的机器上编译创建的二进制文件也是一样的，大约大 6mB。

现在烦人的是我不能发布代码，因为它太大而且也不能工作。但是任何人都可以指出我解决这个问题的道路。

由于我使用的是 QNX，因此我的调试工具受到限制，因此我无法使用 Valgrind，并且由于 QNX 不支持它，因此 GDB 并没有真正的帮助。

我正在寻找遇到类似/相同问题以及原因是什么以及他们如何解决问题的任何人。

**编辑：**

Sooo...我发现了它是什么，但我仍然对它是如何发生的感到有点困惑。

罪魁祸首是这样的：

```
Eigen::VectorXd msBb = data.modelSearcher->getMinimumBoundingBox(); 
```

的定义`getMinimumBoundingBox`是这样的：

```
Eigen::VectorXd ModelSearcher::getMinimumBoundingBox(); 
```

它返回一个 VectorXd，它总是初始化为`VectorXd output(6, 1)`. 所以我立刻想到，这一定是因为 VectorXd 没有被初始化，而是将其更改为：

```
Eigen::VectorXd msBb(6, 1); msBb = data.modelSearcher->getMinimumBoundingBox(); 
```

但这没有用。事实上，我必须通过将函数的定义更改为：

```
void ModelSearcher::getMinimumBoundingBox(Eigen::MatrixXd& input); 
```

以及对此的呼吁

```
Eigen::VectorXd msBb(6, 1); data.modelSearcher->getMinimumBoundingBox(msBb); 
```

**所以现在新的问题：**

我勒个去？为什么第一个更改不起作用，而第二个更改起作用，为什么我必须通过引用传递？哦，还有一个大问题，当我的同事编译它并运行它时，这到底是怎么回事？它是一个直接的内存错误，当然它不应该取决于哪台计算机编译它，特别是因为编译器和所有其他重要的东西都是一样的！！？？

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T10:11:40.677

> ...在他的机器上编译创建的二进制文件是相同的，大约大 6mB

值得弄清楚区别是什么（即使只是他的构建隐藏的情况，而你的暴露，一个真正的错误）：

*   仔细检查您正在编译完全相同的代码（没有未提交的本地更改，包含搜索路径中没有额外的标头等）
    *   通过在 cmake 中为您的 gcc 参数添加一个开关来进行三重检查`-E`，因此它将使用与常规编译相同的包含路径来预处理您的文件；diff 预处理器输出
*   比较两个链接的可执行文件的输出`nm`或`objdump`任何您必须的输出：如果某个系统或第 3 方库是一个盒子上的不同版本，它可能会显示在这里
*   比较`ldd`是否为动态链接的输出，确保它们都获得相同的库版本
    *   如果可能的话，比较它在运行时*实际*获得的库版本。希望您可以执行以下操作之一：运行`pldd`、比较中的`.so`条目、在//`/proc/pid/map`下运行进程并比较运行时链接器活动`strace``dtrace``truss`

* * *

至于代码......如果这不起作用：

```
Eigen::VectorXd ModelSearcher::getMinimumBoundingBox();
// ...
Eigen::VectorXd msBb(6, 1); msBb = data.modelSearcher->getMinimumBoundingBox(); 
```

这确实：

```
void ModelSearcher::getMinimumBoundingBox(Eigen::MatrixXd& input);
// ...
Eigen::VectorXd msBb(6, 1); data.modelSearcher->getMinimumBoundingBox(msBb); 
```

您可能对赋值运算符有问题。如果它做了一个浅拷贝并且向量中有动态分配的内存，你最终会得到两个持有相同指针的向量，它们都会`free`/`delete`它。

请注意，如果根本没有定义操作符，则默认是执行这个浅拷贝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:07:04.960

你说你必须改变：

```
void ModelSearcher::getMinimumBoundingBox(Eigen::MatrixXd& input); 
```

以前是什么？

如果它是：

```
void ModelSearcher::getMinimumBoundingBox(Eigen::MatrixXd input); 
```

并且复制构造函数/赋值运算符没有正确实现，它可能会导致问题。

请检查它们是如何实现的。这里[有一些信息](http://www.cplusplus.com/articles/y8hv0pDG/)可能会有所帮助。

# git - git：显示两次提交之间所有更改的文件，但保留 A|M|D

> ID：13409035
> 
> 赞同：0
> 
> 时间：2012-11-16T01:21:50.830
> 
> 标签：git

```
git show --pretty="format:" --name-only 
```

这向我显示了 HEAD 中更改的文件列表，例如：

```
pkg.file1.java
pkg.file2.java
pkg.file3.java 
```

我想要的是保留文件是否被添加、修改或删除：

```
M pkg.file1.java
D pkg.file2.java
A pkg.file3.java 
```

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:24:54.510

找到了：

```
git show --pretty="format:" --name-status 
```

# perl - 在 Perl 中打开超过 10,000 个文件时出现问题

> ID：13409037
> 
> 赞同：7
> 
> 时间：2012-11-16T01:22:07.010
> 
> 标签：perl, file, solaris, ulimit

我需要在 Perl 脚本中打开 10,000 多个文件，因此我要求系统管理员将我的帐户限制更改为 14,000。`ulimit -a`现在显示这些设置：

```
core file size        (blocks, -c) unlimited
data seg size         (kbytes, -d) unlimited
file size             (blocks, -f) unlimited
open files                    (-n) 14000
pipe size          (512 bytes, -p) 10
stack size            (kbytes, -s) 8192
cpu time             (seconds, -t) unlimited
max user processes            (-u) 29995
virtual memory        (kbytes, -v) unlimited 
```

更改后，我运行了一个测试 Perl 程序，该程序打开/创建 256 个文件并在脚本末尾关闭 256 个文件句柄。当它创建 253 个文件时，程序死了，说打开的文件太多。我不明白为什么我会收到这个错误。

我正在使用 Solaris 10 平台。这是我的代码

```
my @list;
my $filename = "test";

for ($i = 256; $i >= 0; $i--) {
    print "$i " . "\n";
    $filename = "test" . "$i";
    if (open my $in, ">", ${filename}) {
        push @list, $in;
        print $in $filename . "\n";
    }
    else {
        warn "Could not open file '$filename'. $!";
        die;
    }
}

for ($i = 256; $i >= 0; $i--) {
    my $retVal = pop @list;
    print $retVal . "\n";
    close($retVal);
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-16T02:17:47.290

[根据这篇文章，](http://www.oracle.com/technetwork/server-storage/solaris10/stdio-256-136698.html)这是 32 位 Solaris 的默认限制。程序通常仅限于使用前 256 个文件编号。STDIN、STDOUT 和 STDERR 取 0、1 和 2，剩下 253。解决它不是一个简单的过程，ulimit 不会这样做，我不知道 Perl 是否会尊重它。

[这是 Perlmonks 上关于它的讨论，并](http://www.perlmonks.org/?node_id=849608)提供了一些建议的解决方法，例如[FileCache](https://metacpan.org/module/FileCache)。

虽然 Solaris 的限制是不可原谅的，但通常有数百个打开的文件句柄表明您的程序可以设计得更好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-16T01:59:06.183

您可能能够解决[FileCache](http://perldoc.perl.org/FileCache.html) Core 模块的限制（保持打开的文件多于系统允许的数量）。

使用`cacheout`而不是`open`，我能够在 linux 上打开 100334 个文件：

```
#david@:~/Test$ ulimit -n
1024

#david@:~/Test$ perl plimit.pl | head
100333 
100332 
100331 
100330 
100329 

#david@:~/Test$ perl plimit.pl | tail
test100330
test100331
test100332
test100333

#david@:~/Test$ ls test* | wc -l
100334 
```

**脚本的修改版本 (plimit.pl)**

```
my @list;

use FileCache;

$mfile=100333;

my $filename="test";
for($i = $mfile; $i >= 0; $i--) {
    print "$i " . "\n" ;
    $filename = "test" . "$i";
    #if (open my $in, ">", ${filename}) {
     if ($in = cacheout( ">", ${filename}) ) {
        push @list,$in;
        print $in  $filename . "\n";
    } else {
        warn "Could not open file '$filename'. $!";
        die;
    }
}
for($i = $mfile; $i >= 0; $i--) {
    my $retVal = pop @list;
    print $retVal . "\n";
    close($retVal);
} 
```

* * *

**更新**

`FileCache`如果您超过系统的最大文件描述符数或建议的最大 maxopen（在 sys/param.h 中定义的 NOFILE），则会自动关闭并重新打开文件。

就我而言，在 linux 机器上，它是 256：

```
#david@:~/Test$ grep -B 3 NOFILE /usr/include/sys/param.h 

/* The following are not really correct but it is a value 
   we used for a long time and which seems to be usable.  
   People should not use NOFILE and NCARGS anyway.  */
#define NOFILE      256 
```

使用[lsof](http://en.wikipedia.org/wiki/Lsof)（列出打开的文件）命令，脚本的修改版本最多打开 100334 个文件中的 260 个：

```
#david@:~/Test$ bash count_of_plimit.sh
20:41:27 18
new max is 18
20:41:28 196
new max is 196
20:41:29 260
new max is 260
20:41:30 218
20:41:31 258
20:41:32 248
20:41:33 193
max count was 260 
```

**count_of_plimit.sh**

```
 #!/bin/bash
 # count open files with lsof
 #
 # latest revision: 
 #   ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/
 # latest FAQ: 
 #  ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/FAQ

 perl plimit.pl > out.txt &
 pid=$!

##adapted from http://stackoverflow.com/a/1661498
HOW_MANY=0
MAX=0
while [ -r "/proc/${pid}" ]; 
do
    HOW_MANY=`lsof -p ${pid} | wc -l`
    #output for live monitoring
    echo `date +%H:%M:%S` $HOW_MANY
    # look for max value
    if [ $MAX -lt $HOW_MANY ]; then
        let MAX=$HOW_MANY
        echo new max is $MAX
    fi 
    # test every second
    sleep 1
done
echo max count was $MAX 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-16T02:00:42.570

在 Windows 机器和 linux 机器上使用您的程序和以下更简单的程序进行了测试，没有遇到您描述的错误。

```
my @files;
for (;;) {
   print 1+@files, "\n";
   open my $fh, '<', $0 or die $!;
   push @files, $fh;
   last if @files == 500;
} 
```

输出：

```
1
2
...
498
499
500 
```

我不认为这是 Perl 的限制，而是系统的限制。

请注意，当您尝试打开进程的第 257 个句柄（STDIN + STDOUT + STDERR + 253 = 256）时它会失败，这让我相信一个进程可以拥有的打开文件句柄的数量必须适合您系统上的 8 位。您可以尝试通过编写等效的 C 程序并在同一台机器上运行来验证这一点。

```
#include <stdio.h>
#include <stdlib.h>

int main() {
   int i = 0;
   for (;;) {
      ++i;
      printf("%d\n", i);
      if (fopen("/bin/sh", "r") == NULL) {
         perror("fopen");
         exit(1);
      }

      if (i == 500)
         break;
   }

   return 0;
} 
```

更新：这已在[此处](http://www.oracle.com/technetwork/server-storage/solaris10/stdio-256-136698.html)得到确认。谢谢，施韦恩。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T08:54:22.520

您有 256 个文件的限制。您忘记了 STDIN、STDOUT 和 STDERR。您的 253 + 默认 3 = 256。

# signalr - 用于向 SignalR 中的组发送消息的客户端事件处理程序

> ID：13409038
> 
> 赞同：0
> 
> 时间：2012-11-16T01:22:19.163
> 
> 标签：signalr, signalr-hub

我正在尝试将 SignalR 集成到我的 MVC 项目中，并且一切正常，但是有些事情我做不到，使用最新版本的 signalR：http: [//blogs.msdn.com/b/webdev/archive/ 2012/08/22/announcing-the-release-of-signalr-0-5-3.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/22/announcing-the-release-of-signalr-0-5-3.aspx)

并编写此 wiki 中描述的组功能：

[https://github.com/SignalR/SignalR/wiki/Hubs](https://github.com/SignalR/SignalR/wiki/Hubs)

特别是在 MANAGING GROUPS 主题中，有以下代码可以向特定组发送消息：

```
 public Task Send(string message)
    {
        return Clients.Group("foo").addMessage(message);
    } 
```

我想不出两件事：按照代码的表述方式，我有以下异常：

```
'System.Threading.Tasks.Task<object>' does not contain a definition for 'addMessage' 
```

除此之外，客户端中引发的事件究竟是什么，以便用 jquery 正确处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:55:33.657

对困惑感到抱歉。该文档已更新为最新版本，即 1.0 alpha2。[http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx](http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx)。

要安装它：

```
Install-Package Microsoft.AspNet.SignalR -pre 
```

我们将很快弃用旧软件包。

# java - Maven Pom 错误 - 找不到泽西岛的父级

> ID：13409049
> 
> 赞同：1
> 
> 时间：2012-11-16T01:23:39.040
> 
> 标签：java, maven, jersey

让 Eclipse Juno、maven 2.2.1 和 m2eclipse 在 Red Hat Linux 平台上运行...

下载了一个简单的示例来构建一个 Restful Hello World Web 服务（它可以在我的 OS X 计算机上运行），但由于某些奇怪的原因，它不能在我的 Linux 机器上运行。

这是 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
     <modelVersion>4.0.0</modelVersion>
     <groupId>com.mkyong.common</groupId>
     <artifactId>RESTfulExample</artifactId>
     <packaging>war</packaging>
     <version>1.0-SNAPSHOT</version>
     <name>RESTfulExample Maven Webapp</name>
     <url>http://maven.apache.org</url>

     <repositories>
        <repository>
        <id>maven2-repository.java.net</id>
        <name>Java.net Repository for Maven</name>
        <url>http://download.java.net/maven/2/</url>
        <layout>default</layout>
        </repository>
     </repositories>

     <dependencies>
      <dependency>
          <groupId>junit</groupId>
          <artifactId>junit</artifactId>
          <version>4.8.2</version>
          <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-server</artifactId>
        <version>1.8</version>
    </dependency>

</dependencies>

<build>
    <finalName>RESTfulExample</finalName>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build>
</project> 
```

当我尝试从命令行发出 mvn compile 时：

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building RESTfulExample Maven Webapp
[INFO]    task-segment: [compile]
[INFO] ------------------------------------------------------------------------
[INFO] [resources:resources {execution: default-resources}]
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error building POM (may not be this project's POM).

Project ID: null:jersey-server:bundle:null

 Reason: Cannot find parent: com.sun.jersey:jersey-project for project: null:jersey -server:bundle:null for project null:jersey-server:bundle:null

[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: < 1 second
[INFO] Finished at: Thu Nov 15 17:07:16 PST 2012
[INFO] Final Memory: 8M/309M
[INFO] ------------------------------------------------------------------------ 
```

有没有人遇到过这个问题？我不明白它在我的 OS X 计算机上是如何工作的，但在 Linux 上却不是（我认为这不是问题）。

感谢您抽出时间来阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T01:57:32.020

我会完全删除 pom.xml 文件中的整个`repositories`元素。这样 maven 将使用标准的中央存储库。然后将 jersey-server 的版本更改为 1.15（最新）。

该 java.net 存储库中的最新球衣日期为 2011 年 8 月，而标准中央 maven 存储库的版本为 1.15，日期为 2012 年 10 月 30 日。

我怀疑它在一台机器上而不是另一台机器上工作的原因是在你的 ~/.m2/repository 缓存中，你在一台机器上有很好的缓存文件，但在另一台机器上没有。可能需要删除整个 ~/.m2/repository/com/sun/jersey 层次结构并重建。您可能在那里损坏了文件。

# mysql - MySQL 和 phpMyAdmin 创建三向关系

> ID：13409051
> 
> 赞同：0
> 
> 时间：2012-11-16T01:23:59.497
> 
> 标签：mysql, phpmyadmin

我正在尝试创建一个相当复杂的数据库，我的电子表格具有以下结构：

```
 Colour   Dashboard 
        ---------------------
Porche  |  Red      1
        |  Green    2
        |           3
        |--------------------
Toyota  |  Blue     2
        |  Red
        |  Orange
        |--------------------
Ferrari |  Green    3
        |  Orange
        | 
```

我很难理解如何创建链接表来反映这种结构。

对于每个“品牌”，用户必须为汽车的各个“方面”选择一些特定的“定制选项”。我希望能够为每个“方面”定义哪些“定制选项”可用，因为并非所有品牌都可以从相同的选项中进行选择。

对于这种情况，我将如何最好地构建数据库？

谢谢， C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:28:53.693

我会做这样的事情：

*   汽车（名称 PK）
*   颜色（名称 PK）
*   仪表板（Id PK）
*   Cars_Colors(Car_Name FK(Cars.Name), Color_Name FK(Colors.Name))
    与复合 PK(Car_Name, Color_Name)
*   Cars_Dashboards(Car_Name FK(Cars.Name), Dashboard_Id FK(Dashboards.Id))
    与复合 PK(Car_Name, Dashboard_Id)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:28:36.017

创建带有字段的仪表板表`dashboard_num, car, colour`。您可以在展示选项时将其用作参考。

# java - 如何使用标签内的数据解析 XML 字符串

> ID：13409055
> 
> 赞同：0
> 
> 时间：2012-11-16T01:24:59.667
> 
> 标签：java, parsing

我想解析这种 XML 字符串：

```
<Objects>
   <Object type="crs" obj_id="192">
      <Title>Course 1</Title>
      <Description>this is description</Description>
      <CreateDate>2012-10-16 12:53:12</CreateDate>
      <LastUpdate>2012-10-16 12:53:54</LastUpdate>
   </Object>

   <Object type="frm" obj_id="202">
      <Title>Forum 1</Title>
      <Description>this is description</Description>
      <CreateDate>2012-10-30 01:06:41</CreateDate>
      <LastUpdate>2012-10-30 01:06:41</LastUpdate>
   </Object>
</Objects> 
```

我已经解析了具有相同结构的 XML 字符串，但只是使用了标签 <Object>。现在我想获取标签对象中的信息以获取类型=“xxx”的字符串。

这就是我进行此类解析的方式：

```
try {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        InputSource xml = new InputSource();
        xml.setCharacterStream(xmlSTring);
        Document doc = db.parse(xml);
        NodeList nodes = doc.getElementsByTagName("Object");

        // iterate objects 
        for (int i = 0; i < nodes.getLength(); i++) {
           Element element = (Element) nodes.item(i);
           // get first attribute
           NodeList ref_id = element.getElementsByTagName("title");
           Element line = (Element) ref_id.item(0);
           System.out.println("title: " + getCharacterDataFromElement(line));

        }
    }
    catch (Exception e) {
        e.printStackTrace();
    }
private static String getCharacterDataFromElement(Element e) {
    Node child = e.getFirstChild();
    if (child instanceof CharacterData) {
        CharacterData cd = (CharacterData) child;
        return cd.getData();
    }
    return "?";
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:36:56.187

在你的主循环中

```
element.getAttribute("type"); 
```

应该得到你想要的。

而不是使用 dom 你可以看看 stax

[jee5 stax 教程](http://docs.oracle.com/javaee/5/tutorial/doc/bnbem.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:45:45.860

您也可以使用 JAXB 来解决此类问题。[当您有一个示例 XML 文件时，您可以使用一个名为Trang](http://www.thaiopensource.com/relaxng/trang.html)的程序生成一个 xsd 。这是我使用该程序生成的 xml 文档的架构：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
  <xs:element name="Objects">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" ref="Object"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="Object">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="Title"/>
        <xs:element ref="Description"/>
        <xs:element ref="CreateDate"/>
        <xs:element ref="LastUpdate"/>
      </xs:sequence>
      <xs:attribute name="obj_id" use="required" type="xs:integer"/>
      <xs:attribute name="type" use="required" type="xs:NCName"/>
    </xs:complexType>
  </xs:element>
  <xs:element name="Title" type="xs:string"/>
  <xs:element name="Description" type="xs:string"/>
  <xs:element name="CreateDate" type="xs:string"/>
  <xs:element name="LastUpdate" type="xs:string"/>
</xs:schema> 
```

然后，您可以使用 JAXB 为您的 xml 文档生成对象并将 xml 绑定到这些对象。

# c# - 带有实体框架的 SqlBulkCopy（和更新）

> ID：13409057
> 
> 赞同：3
> 
> 时间：2012-11-16T01:25:24.487
> 
> 标签：c#, linq, entity-framework, ado.net

我最近发现 Entity Framework 不再满足我将数据从一个数据库复制到另一个数据库的需求（它太慢了，我想提取比以前更多的数据）。所以我开始寻找替代品并找到了`SqlBulkCopy`方法。问题是这`SqlBulkCopy`不允许我“UPSERT”。再次，开始寻找解决方案并遇到了该`DataTable.Merge(table)`功能。

根据我的研究，“最佳实践”似乎是使用 SqlBulkCopy 将我的数据导入“临时表”，然后使用`DataTable.Merge()`然后以某种方式保存更改。保存更改是我遇到问题的部分。我有以下代码：

```
static void Main(string[] args)
    {
        using(var mdb = new meldbContext())
        using(var odb = new ocmgccazTestEnvDbContext())
        {
            /*Is there a better way to clear the staging table that
              doesn't require me to write actual SQL?*/
            odb.Database.ExecuteSqlCommand("DELETE FROM almCallDetail_staging");

            var lastUpdateTime = (from p in odb.almCallDetail
                                  select p.time_of_contact).Max();

            var query = from p in mdb.cl_contact_event
                        where p.time_of_contact >= lastUpdateTime
                        select new almCallDetail
                        {
                            id = p.id,
                            contact_list_name = p.contact_list_name,
                            account_number = p.account_number,
                            time_of_contact = p.time_of_contact
                        };

            var conn = new SqlConnection(odb.Database.Connection.ConnectionString);
            var bulkCopy = new SqlBulkCopy(conn)
            {
                BatchSize = 5000,
                DestinationTableName = "almCallDetail_staging"
            };

            conn.Open();
                bulkCopy.WriteToServer(query.ToDataTable());    

                var originalTable = (from p in odb.almCallDetail
                                     where p.time_of_contact >= lastUpdateTime
                                     select p).ToDataTable();

                var stagingTable = (from p in odb.almCallDetail_staging
                                    select p).ToDataTable();

                /*Merge happens but the data is not actually saved to the almCallDetail
                  Table (originalTable)...*/
                originalTable.Merge(stagingTable);
            conn.Close();
        }
    } 
```

如何更改它以保存合并操作的结果？

有没有更好的方法可以编写代码来实现快速导入/更新大量数据的目标？

**进一步说明：**我基本上只是从生产服务器的表中复制数据，以便（稍后）创建各种数据集，我可以将这些数据集转换为我们组的报告。我有一个计划任务，它将每 30 分钟左右运行一次此代码，以保持数据相对最新，我希望整个过程尽可能高效。IE 从生产服务器提取所需的最小数据量并将其复制到我的本地数据库。

我当前的实现完全基于实体框架。它：

1.  从生产服务器中提取当天的数据集
2.  循环遍历该组数据
3.  将其与本地数据库进行比较
4.  根据需要更新/添加

它完全符合我的需要，但速度非常慢（出于多种原因，我都理解）。因此，我渴望更新它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T01:53:13.447

可能这里最快的方法（如果不使用 SSIS）将使用带有[MERGE](http://technet.microsoft.com/en-us/library/bb510625.aspx)语句的存储过程。
在存储过程中添加链接服务器。像这样的东西应该工作：

```
exec sp_addlinkedserver @server = 'ProductionServer'

MERGE [LocalServer].dbName.dbo.TableName AS Target
USING (SELECT * FROM [ProductionServer].dbName.dbo.TableName) AS source
ON TARGET.Id = source.Id
WHEN MATCHED
THEN UPDATE 
SET Field1 = source.Field1, Field2 = source.Field2, ---etc....
WHEN NOT MATCHED BY TARGET THEN
INSERT (Field1, Field2, Field3) 
VALUES (Field1, Field2, Field3) ; 
```

此外，如果您需要从其中一个表中删除所有内容，您可以 使用[比](http://msdn.microsoft.com/en-us/library/ms177570.aspx)`Delete from`. 像这样：

```
TRUNCATE TABLE TableName; 
```

# php - SQL 结果的 Memcached/XCache 缓存？

> ID：13409061
> 
> 赞同：0
> 
> 时间：2012-11-16T01:25:47.030
> 
> 标签：php, mysql, wordpress, memcached, xcache

我刚刚为一个社交网站设计了一个管理控制台。我的老板现在要我缓存构建这些结果的几个 MySQL 查询的结果（24 小时）。该站点使用 Memcached（带有 Wordpress W3 总缓存）和 XCache。我想知道最好的方法是什么。

这是一个此类查询的示例以及我如何获得结果（基本上我返回的是用户的汇总统计信息，这意味着我的结果相当简单，例如：

```
//users who registered in last 365 days
$users_reg_365 = "select ID
from wp_users
where user_registered > NOW() - interval 365 day"; 
```

然后使用 wpdb 查询类来获取结果：

```
$users_reg_365 = $wpdb->get_results($users_reg_365); 
```

然后在仪表板中显示结果：

```
<li><?php echo "Total users who registered within last 365 days: <span class='sqlresult'>" . sizeof($users_reg_365) . "</span>"; ?></li> 
```

我对 Memcached/XCache 的理解是它基本上存储字符串，所以只缓存 sizeof($users_reg_365) 有意义吗？

最后一个问题是我们的 Wordpress 站点使用 W3 总缓存，它利用了 Memcached，老板让我不要使用 Memcached 而是使用 XCache，但我发现文档有点混乱。解决这个问题的最佳方法是什么？是否可以告诉 SQL 本身“记住”这样的某些查询，或者内存缓存是要走的路？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:18:27.650

您可以在此处找到有关两者差异的更多信息： [Memcache、APC、XCache 和其他我没听说过的替代方案之间的差异](https://stackoverflow.com/questions/3692488/difference-between-memcache-apc-xcache-and-other-alternatives-ive-not-heard-o)

一个例子你怎么能

```
<?php
$m = new Memcached();
$m->addServer('localhost', 11211);

// cache 24hrs
$cache_expire = 86400;

// users is your key
$users_reg_365 = $m->get('users_reg_365');
if (empty($users_reg_365)) {
    $users_reg_365 = "select ID from wp_users where user_registered > NOW() - interval 365 day";
    $m->set('users_reg_365', $cache_expire);
} 
```

如果您需要在午夜准确刷新缓存，请更改 $cache_expire 的值。

[您可以在http://www.php.net/manual/en/memcached.get.php](http://www.php.net/manual/en/memcached.get.php)参考 memcached 的完整参考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:21:41.657

嗯。我不确定您的缓存是如何在 WordPress 中配置的。如果您将 WordPress 的对象缓存设置为使用 Memcache(d)/XCache 进行持久缓存，您可以执行**以下操作：**

```
$key = 'custom-key-to-look-up-later';
$data = sizeof( $users_reg_365 );
$group = 'group-id';
$expire = 60 * 60 * 24 // time in seconds before expiring the cache.

wp_cache_set( $key, $data, $group, $expire ); 
```

稍后您可以像这样查找该值**：**

```
$data = wp_cache_get( $key, $group );

if( ! is_wp_error( $data ) )
    // the data is good. do something with it. 
```

[您可以在此处](http://codex.wordpress.org/Class_Reference/WP_Object_Cache)找到有关这些功能的文档。

不过，在开始之前，请确保 WordPress 已设置为与 Memcache(d) 或 XCache 一起使用。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T13:25:04.170

如果您想存储任何数组的结果，只需对其进行序列化/jsonencode 并将其存储为..

# node.js - 使用 swank-js 和 clojure 设置 Emacs

> ID：13409063
> 
> 赞同：3
> 
> 时间：2012-11-16T01:25:57.397
> 
> 标签：node.js, emacs, clojure, slime

我想安装 slime-js，但我已经安装了 Clojure，据我了解，Clojure 当前的 Emacs 集成不适用于 swank-js 使用的 SLIME 版本。我试过用谷歌搜索，但一直空着。有没有人能够让 swank-js 和 Clojure-mode 的 nrepl 功能很好地协同工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:25:28.100

我猜你在谈论 swank-js 和 swank-clojure？我认为 nrepl-mode 对 SLIME 没有任何作用。我通过 MELPA 安装了两者，一切正常。

swank-js 和 swank-clojure 是两个实现 SLIME 协议的 SLIME 后端。swank-clojure 不支持较新版本的 SLIME，最近已被弃用。另一方面，nrepl 有它自己的协议。

# java - lwjgl and slick - 旋转光滑的纹理

> ID：13409074
> 
> 赞同：2
> 
> 时间：2012-11-16T01:27:39.427
> 
> 标签：java, opengl, textures, lwjgl, slick2d

我正在创建一个绘制对象的程序，该对象需要“指向”鼠标。为此，我想绘制旋转的图像。

我有这个用于绘制对象的代码：

```
glBindTexture(GL_TEXTURE_2D,img.getTextureID());
glBegin(GL_QUADS);
glTexCoord2f(0,0);
glVertex2f(x-r,y-r);
glTexCoord2f(1,0);
glVertex2f(x+r,y-r);
glTexCoord2f(1,1);
glVertex2f(x+r,y+r);
glTexCoord2f(0,1);
glVertex2f(x-r,y+r);
glEnd(); 
```

很基本。但是我很难找到如何旋转纹理，或者绘制旋转的纹理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T06:51:36.960

详细说明@genpfault 的答案：

如果您希望您的纹理围绕其中心旋转，您需要绘制它，使其中心位于 (0,0)。尝试这样的事情：

```
glPushMatrix();
glTranslatef(x,y); // move to the proper position
glRotatef( angle, 0, 0, 1 ); // now rotate

glBindTexture(GL_TEXTURE_2D,img.getTextureID());
glBegin(GL_QUADS);
glTexCoord2f(0,0);
glVertex2f(-r,-r);
glTexCoord2f(1,0);
glVertex2f(+r,-r);
glTexCoord2f(1,1);
glVertex2f(+r,+r);
glTexCoord2f(0,1);
glVertex2f(-r,+r);
glEnd();

glPopMatrix(); // pop off the rotation and transformation 
```

请注意，`glRotatef`的角度以度为单位，而不是弧度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:27:54.300

旋转纹理：

```
glMatrixMode( GL_TEXTURE );
glLoadIdentity();
glRotatef( angle, 0, 0, 1 );
glMatrixMode( GL_MODELVIEW );
drawTexturedQuad(); 
```

旋转四边形：

```
glPushMatrix();
glRotatef( angle, 0, 0, 1 );
drawTexturedQuad();
glPopMatrix(); 
```

# c++ - 为什么bash在进程死后不打印“Broken pipe”日志？

> ID：13409075
> 
> 赞同：0
> 
> 时间：2012-11-16T01:28:27.497
> 
> 标签：c++, c, linux, bash, ubuntu

我的客户端将循环发送包到服务器。客户端程序不捕获 SIGPIPE。（客户端操作系统是 ubuntu 服务器 12.04 LTS）

我做以下测试：

1.  3次握手结束后。然后客户端将一些包发送到服务器。服务器可以正常接收包裹。

2.  然后我突然杀死了服务器进程。

3.  客户端进程已死。但我没有看到任何日志显示“断管”。

我认为 bash 会报告死因。

为什么 bash 在 process dead 后不打印“Broken pipe”日志？

但是我使用 gdb 开始该过程，重复上面的步骤。进程已死，gdb 显示以下日志：

“程序收到信号 SIGPIPE，管道损坏。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:33:40.827

如果客户端没有捕捉到 SIGPIPE，那么它就不可能打印错误消息！“Broken pipe”形式的消息由接收 SIGPIPE 以响应写入错误或作为对信号的响应的程序打印。由于您的客户端没有处理 SIGPIPE，因此它不会打印该错误消息，而只是终止。当您在 gdb 中运行时，gdb 会告诉您子进程因 SIGPIPE 而终止。

# android - AssetManager.exists(String) 等效？

> ID：13409076
> 
> 赞同：1
> 
> 时间：2012-11-16T01:28:28.973
> 
> 标签：android, assets

我的理解是，最好事先进行测试以避免异常，而不是捕获它们。有没有办法在尝试打开资产文件之前检查它是否存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:45:10.227

资产没有这样的功能，但是，不需要它（见下文）。

> 我的理解是，最好事先进行测试以避免异常，而不是捕获它们。

仅当异常是应用程序正常（预期）操作的一部分时，这才是正确的。换句话说，如果异常是统计上常见的事件（例如，您希望它“经常”在某个地方发生），那么捕获它可能会产生显着的性能成本。（在实践中，这仅在短时间内捕获许多异常的情况下才重要，因此基准测试始终很重要。）

由于您通常不希望在尝试访问某个资产时会丢失它（否则在您的应用程序中设计错误），因此可以对异常情况使用异常处理程序。

总而言之，带有异常的错误处理有性能成本，但错误（尤其是要抑制的错误）预计是罕见的事件。如果您希望在应用程序的某个部分经常发生错误，那么您的设计中可能有问题。（一些非常特殊的情况是可能的，但情况并非如此，但这些是非常罕见且非典型的应用领域。）

**在实践中：**在您的情况下，例如，如果资产名称来自外部（例如用户）输入，则可以使用异常。这是因为可能异常的“频率”很低。另一方面，如果您尝试确定许多资产是否存在（例如，在循环中），那么异常处理可能会产生不可接受的性能成本——但我很难想象会需要这样的东西。

# sql - 计算最近时间的优雅方法

> ID：13409082
> 
> 赞同：2
> 
> 时间：2012-11-16T01:29:13.667
> 
> 标签：sql, sql-server, sql-server-2005, graphics

我有一个参考时间：

`'2012-05-01 23:35:00'`

而且我从一些表中还有几次，其中“yyyy-MM-dd”日期部分无关紧要，但相关的是日期部分与“HH：分钟”

```
------------------------------
| ID |         Time          |
| -- |-----------------------|
| 01 | '1900-01-01 13:10:00' |
| 02 | '1900-01-01 07:01:00' |
| 03 | '1900-01-02 00:45:00' |
| 04 | '1900-01-02 18:00:00' |
------------------------------ 
```

我正在编写一个函数，它将返回时间最近的行（在上面的示例中，这将是 ID 03），但我不喜欢我正在写的内容。

所以我开始以图形方式观察问题。有没有办法用 Atan 函数做到这一点？

编辑：我正在使用 MSSQL 服务器 2005

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T01:46:14.590

```
declare @reftime datetime;
set @reftime = '20120501 23:00:00';

    select TOP(1) with ties
           id, time
      from (
    select
           t.*,
           dateadd(d, -datediff(d, 0, @reftime), @reftime) reftime,
           dateadd(d, -datediff(d, 0, t.time), t.time) coltime
      from tbl t
           ) x
  order by (select min(diff)
            from 
            (select abs(datediff(ms, reftime, coltime))
             union all
             select abs(datediff(ms, reftime+1, coltime))
             union all
             select abs(datediff(ms, reftime, coltime+1))) y(diff)); 
```

笔记：

1.  这些`datediff(d, -datediff(...`模式从日期时间中删除日期部分。
2.  为了处理跨午夜场景，`reftime+1`除了`coltime+1`仅测试`abs(reftime-coltime)`.
3.  这`ORDER BY`是在与在所有 3 个场景中进行测试的最小差异中执行的。

# java - Jfreechart：如何从图表中排除周末？

> ID：13409084
> 
> 赞同：5
> 
> 时间：2012-11-16T01:29:18.903
> 
> 标签：java, android, jfreechart

1.  如何从 jfreechart 中排除一两天？我输入了没有星期六的日期和没有星期六的图表，但在轴上都有所有日期。
2.  我已经在屏幕上添加了所有项目。如何在屏幕上查看 <= 100 项以及是否滚动到右侧项添加更多。

更新：我制作了 CandleChart，使用了 JfreeChart 库。不应中断 12 至 14 天图表。

![在此处输入图像描述](../Images/ebfabcbc7042938126dc7922ddc45d39.png)

这是字符串：一天或几天可能是休息时间。

```
12.10.2012 19:00    1.2951  1.296   1.2947  1.2956
12.10.2012 20:00    1.2956  1.296   1.295   1.2954
**12.10.2012 21:00  1.2955  1.2959  1.2948  1.2949**
**14.10.2012 22:00  1.2952  1.296   1.2948  1.2953** 
14.10.2012 23:00    1.2955  1.2955  1.2942  1.2947 
```

这是代码：

```
 static TimeSeries t1 = new TimeSeries("");
    RegularTimePeriod day = new Day();
    RegularTimePeriod hour = new Hour();
private static OHLCDataset createPriceDataset(String FILENAME_SD)
        {   
            OHLCSeries s1 = new OHLCSeries(FILENAME_SD);

                if (!Environment.getExternalStorageState().equals(
                    Environment.MEDIA_MOUNTED)) {

                }
                File sdPath = Environment.getExternalStorageDirectory();
                sdPath = new File(sdPath.getAbsolutePath() + "/" + DIR_SD);
                File sdFile = new File(sdPath, FILENAME_SD);
            try {
                BufferedReader in = new BufferedReader(new FileReader(sdFile));
                DateFormat df = new SimpleDateFormat("dd.MM.yyyy HH:mm");
                String inputLine;

                in.readLine();
                while ((inputLine = in.readLine()) != null) {
                     String[] data = inputLine.split("\\s+");                    
                     Date date = df.parse(data[0] + " " + data[1]);                  
                    double open     = Double.parseDouble( data[2] );
                    double high     = Double.parseDouble( data[3]  );
                    double low      = Double.parseDouble( data[4]  );
                    double close    = Double.parseDouble( data[5]  );
                   // double volume   = Double.parseDouble( st.nextToken() );
                    //double adjClose = Double.parseDouble( st.nextToken() );
                    s1.add(new Hour(date), open, high, low, close);
                    t1.add(new Hour(date), open);      
                }    
                in.close();              
            }
            catch (Exception e) {
                e.printStackTrace();
            }

            OHLCSeriesCollection dataset = new OHLCSeriesCollection();
            dataset.addSeries(s1);
            return dataset;
        } 
```

此外，图表缩放取决于文件中的马赫字符串。如何在屏幕上绘制不超过 100 根的蜡烛？

这是来自文件的图表，其中包含许多字符串：

![在此处输入图像描述](../Images/c04374b9f7818c1207d24cd2c3cdfe78.png)

这是文件中带有少量字符串的图表： ![在此处输入图像描述](../Images/967f02c8bb1db57c1b40c5b589c3d764.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:57:03.063

如果您特别想使用烛台，我不相信 JFreechart 类支持它。您可以使用 Box And Whisker 在使用基于类别的数据时模仿行为。对于您显示的图表，轴代表连续数据，分类轴代表离散数据。

示例代码如下所示： [http ://www.java2s.com/Code/Java/Chart/JFreeChartBoxAndWhiskerDemo.htm](http://www.java2s.com/Code/Java/Chart/JFreeChartBoxAndWhiskerDemo.htm)

有了它，您可以选择要在图表上表示的自己的离散点。

如果是烛台以外的任何东西，格雷厄姆是对的，DefaultCategoryDataset 会更有用： [http ://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/category/DefaultCategoryDataset.html](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/category/DefaultCategoryDataset.html)

# javascript - 如何在移动设备上启用唯一活动？

> ID：13409089
> 
> 赞同：17
> 
> 时间：2012-11-16T01:29:37.623
> 
> 标签：javascript, html, css, mobile, contacts

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-16T01:31:09.927

不要使用超链接。使用[微数据](http://schema.org/)。手机会识别为电话号码并允许点击，但不会影响正常的网络浏览器。

```
<div class="vcard">
    <div class="tel">
        12345555555
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-16T01:48:26.777

这可能不会直接回答这个问题，但我会挑战您需要在其他设备上隐藏呼叫链接的假设。

为什么？

*   非电话设备仍然可以拨打电话。例如，带有 VoIP 客户端的 PC 可以处理`tel:`链接。
*   平板电脑（iPad 和 Android）`tel:`通过允许用户将号码添加到他们的联系人来处理链接，这无疑会同步到他们的手机——这对您的用户来说非常方便。
*   依靠自动格式检测是一种技巧。

因此，只需将其保留为常规链接即可。也许通过链接电话号码使其显而易见，这样桌面上没有电话软件的人就会明白，当他们点击它时不会发生任何事情。

```
Call Us Now at <a href="tel:12345555555">(234) 555-5555</a> 
```

另外，请记住，`tel:`链接不会导致 404 错误，因为永远不会生成 HTTP 请求。在我没有`tel:`处理程序的机器上，Chrome 什么也不做，IE9 说“*此网页上的某些内容或文件需要您尚未安装的程序。* ”（合理），而 Firefox 说“ *Firefox 不知道如何打开这个地址，因为协议（tel）没有与任何程序相关联。* ”（也是合理的）。

当我遇到这个问题时，我决定只留下`tel:`链接的好处超过了任何缺点或凌乱的选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-31T20:36:57.573

我正在使用下面的 CSS 和[媒体查询](https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries)来实现这一点。

```
@media screen and (min-width: 768px) {
    a[href*="tel:"] {
        cursor:default;
    }
} 
```

它基于[这个问题](https://teamtreehouse.com/community/onoff-toggle-for-telephone-link-between-mobile-and-desktop)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T01:42:26.213

我遇到了同样的问题并开始使用元标记进行格式检测：

```
<meta name="format-detection" content="telephone=no" /> 
```

根据与相同问题的讨论： [禁用 iPad 桌面 Web 链接上的电话号码检测？](https://stackoverflow.com/questions/4268413/disable-telephone-number-detection-on-ipad-desktop-web-links)

# python - 如何创建一个具有特定 len 的 python 数组，每个元素都初始化为 0

> ID：13409090
> 
> 赞同：1
> 
> 时间：2012-11-16T01:29:52.563
> 
> 标签：python

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T01:31:11.640

您可以使用`*`运算符：

```
i = [0] * 5 
```

演示：

```
>>> i = [0] * 5
>>> i
[0, 0, 0, 0, 0] 
```

哦，`i`这是一个糟糕的命名选择。人们期望`i`成为一个数字循环变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T01:32:10.383

```
i = [0] * 5 
```

警告：当列表中的事物是可变对象时要小心，例如嵌套列表。您正在对同一个对象进行五次引用，当您开始操作列表项时，它会咬住您。不过，对于整数和字符串，这很好。对于可变对象：

```
i = [[] for _ in xrange(5)]   # range(5) on Python 3.x 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T01:31:27.910

使用*列表理解*：

```
i = [0 for j in range(5)] 
```

您还可以使用它来构建更复杂的数组：

```
A = [[0 for i in range(5)] for j in range(5)] 
```

# google-apps-script - 将表单提交合并到文档 - 丢失的新手

> ID：13409091
> 
> 赞同：1
> 
> 时间：2012-11-16T01:30:11.793
> 
> 标签：google-apps-script

寻求以下方面的指导：

用户提交 Formstack 表单 -> 表单条目在 Google 电子表格上填充一行 -> 触发执行该提交的文档合并（现在是工作表中的 ROW），列标题定义变量 -> 通过提交的电子邮件将合并的文档发送给用户电子邮件地址。

我的文档需要有条件地处理许多变量的能力（if/then 基于表单响应的条件文本）。我玩过一个名为 Ultradoc 的应用程序，它似乎非常适合 Google 文档中的变量处理、支持条件等。

但是，问题在于它不知道如何选择一行数据，而是设计为对每一列中的所有内容运行合并。

一个想法可能是运行一个脚本，它采用新的 ROW 并以某种方式使它看起来像一个两行表（标题+提交的行）？不知何故隐藏了其他行？这看起来非常笨拙。处理这样的事情的正确方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:22:59.490

您实际上不需要任何第三方应用程序。将表单创建为 Google 表单，创建脚本并使其在表单提交时运行。

要获取输入到表单中的值，请将表单提交作为参数传递给函数：`function processForm(e){`

要获取表单中的数据，请访问`e.values`数组。它是零索引的，从表单上的顶部项目开始。

将提交的数据存储到变量中

```
var name = e.values[0];
var email = e.values[1];
// and so on... 
```

执行任何验证或文档处理。

创建模板文档的副本

```
var copyId   = DocsList.getFileById("templateDocID")
            .makeCopy(docName+' from '+name) //or whatever you wanted to call the resulting document
            .getId();
var copyDoc = DocumentApp.openById(copyId);
var copyBody = copyDoc.getActiveSection(); 
```

替换模板中的文本

```
copyBody.replaceText("NAME", name);
copyBody.replaceText("EMAIL", email);
// and so on... 
```

将文档发送给用户（对于我的应用程序，我以 pdf 格式发送，但您可以随意发送）

```
copyDoc.saveAndClose();
var pdf = DocsList.getFileById(copyId).getAs("application/pdf");
MailApp.sendEmail(email, copyDoc.getName(), "Here's your document", {attachments:pdf});
DocsList.getFileById(copyId).setTrashed(true); 
```

# ember.js - Ember - 清除 ArrayProxy

> ID：13409092
> 
> 赞同：2
> 
> 时间：2012-11-16T01:30:24.093
> 
> 标签：ember.js

在 Ember MVC TodoApp 上有一个选项“清除所有已完成”。

我一直在尝试做一个简单的“全部清除”。

我尝试了多种方法，但都没有按预期工作（清除数据、本地存储和刷新 UI）。

示例附带的代码如下：

```
clearCompleted: function () {
    this.filterProperty(
            'completed', true
        ).forEach(this.removeObject, this);
}, 
```

我期望工作的基本测试是这个：

```
 clearAll: function () {
            this.forEach(this.removeObject, this);
        }, 
```

不过，它留下了一些物品。

如果我在 Entries 控制器中单击调用此函数的按钮几次，则列表最终为空。我不知道发生了什么事！并且不想做一个“解决方法”。

顺便说一句，clearCompleted 可以完美地工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T04:32:24.027

答案取决于您真正想知道的内容——如果您想清除 ArrayProxy，根据问题标题，您只需调用`clear()`ArrayProxy 实例，例如：

```
var stuff = ['apple', 'orange', 'banana'];
var ap = Ember.ArrayProxy.create({ content: Ember.A(stuff) });
ap.get('length'); // => 3
ap.clear();
ap.get('length'); // => 0 
```

这样您就不会直接接触 content 属性，并且会通知任何观察者（您会在 TodoMVC 示例中注意到，如果您`Todos.router.entriesController.clear()`在控制台中键入，屏幕会更新）。

如果您特别询问 TodoMVC Ember 示例，那么您将受到快速而肮脏的“存储”实现的摆布……如果您按照上述方式进行操作，您将在刷新页面时看到该项目的返回，因为没有在条目“控制器”和 Store 之间进行绑定或观察（有点愚蠢，因为它是 Ember 的优势之一，但 meh whatev）

Anywho ...您正在寻找的类似“clearAll”方法`entriesController`可以这样完成：

```
clearAll: function() {
    this.clear();
    this.store.findAll().forEach(this.removeObject, this);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:55:38.450

好吧，这行得通：

```
clearAll: function () {
    for (var i = this.content.length - 1; i >= 0; i--) {
        this.removeObject(this.content[i]);
    }
}, 
```

如果有人可以确认这是否是正确的方法，那就太好了！

# python - python正则表达式重复字符

> ID：13409093
> 
> 赞同：1
> 
> 时间：2012-11-16T01:30:24.760
> 
> 标签：python, regex

我希望在 python 中创建一个正则表达式，它匹配所有`T`以`18`字符（任何字符）开头的 DNA 序列，然后以`AA`,或. 我可以管理第一部分，但我似乎无法找到一种方法来编写结尾（双字符）而不复制正则表达式 4 次。这是我对以 结尾的序列的内容：`TT``CC``GG``TT`

```
import re
seq='ATGTGTGGACACAAGTGACAGTTTACGATGAGGTTACAGCCCGCA'
match=re.findall('T.{18}TT',seq)
print match 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T01:33:14.913

查看[一个很好的教程](http://www.regular-expressions.info/tutorial.html)。

有一个概念叫交替。它匹配任何一个给定的选项：

```
r'T.{18}(?:TT|AA|CC|GG)' 
```

请注意，您应该使用原始字符串来编码 Python 中的正则表达式，否则您稍后会遇到转义字符的问题。

# postgresql - 为什么 PostgreSQL 将所有内容都默认为小写？

> ID：13409094
> 
> 赞同：7
> 
> 时间：2012-11-16T01:30:44.937
> 
> 标签：postgresql, case-sensitive

在使用了相当多的 MySQL (5.1) 之后，我正试图让自己熟悉 Postgres (9.2)，因为我已经被一些[MySQL 的陷阱](http://sql-info.de/mysql/gotchas.html)咬住了。然而，在我使用 Postgres 的前五分钟里，我遇到了[它的一个陷阱](http://sql-info.de/postgresql/postgres-gotchas.html)，我相信每个人都会遇到这个问题：

*   默认情况下，PostgreSQL 将所有未引用的内容转换为小写。

这对我来说没什么大不了的，因为有几个明显的解决方法：

*   将所有内容封装在引号中。
*   允许以小写方式命名所有内容。

但我想知道为什么。考虑到我想象这个设计决定会引起多少争论，我很惊讶我在互联网上找不到任何理由。有没有人有详尽的解释，或者最好是一些开发者宣言的链接，为什么 Postgres 是这样设计的？我很感兴趣。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T03:57:24.383

SQL 标准规定将不带引号的标识符折叠为大写。许多其他 RDBMS 以这种方式遵循标准。Firebird 和 Oracle 都可以。这意味着标识符匹配默认情况下不区分大小写。当涉及到基本查询的兼容性时，此行为非常重要。在这方面 MySQL 的行为是一个真正的异常值。

然而 PostgreSQL 通过折叠成小写偏离了标准。这被认为更具可读性是有一般原因的，等等，因为您可以使用案例来提示语法。就像是：

```
SELECT foo FROM bar WHERE baz = 1; 
```

当箱子折叠得更低时，这更自然。对面的替代折叠将是：

```
select FOO from BAR where BAZ = 1; 
```

一般来说，就像前一种行为（折叠成小写）一样，因为它更好地强调了 sql 操作，而折叠到另一种情况则不强调操作并强调标识符。鉴于许多查询的复杂性，我认为前者效果更好。

一般来说，我在 postgres 邮件列表上看到的最多的讨论是每个人都同意标准规定的行为被破坏了。所以以上是我对这些问题的理解。

# ruby - 在枚举数末尾停止的优雅方式？

> ID：13409095
> 
> 赞同：1
> 
> 时间：2012-11-16T01:30:52.240
> 
> 标签：ruby, loops, enumerators

有没有一种优雅的方式来实现一个枚举数的末尾？

例如，

```
a = (1..10).to_a
e = a.each
e.next # should yield 1
while e.next
  # do something
end 
```

当然， 当您到达枚举数末尾时，e 会引发[StopIteration 。](http://www.ruby-doc.org/core-1.9.3/StopIteration.html)

有没有一种很好的方法可以在没有救援的情况下打破这个 while 循环？我知道我可以只说 e.each （或者根本不使用枚举器），但是对于我的具体问题，我想在前几次迭代中做一些特别的事情，然后在最后几个迭代中做一些一般性的事情。

我想要一种查看下一个值并获取`nil`而不是错误的方法。

有小费吗？可能有一些明显的东西我错过了......

注意。我不必使用枚举器，但这似乎是解决我的问题的最简单方法。因此，如果您有一个非枚举器解决方案（用于迭代可枚举），请随时分享。（在那张纸条上，也许我应该只使用 each 或 each_with_index 并将计数器用于特殊情况......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T01:47:14.720

解救`StopIteration`是*一种*方法。唯一的办法。*

当您意识到返回的*任何*值（例如`nil`，如您所建议的那样）`next`可能是可枚举的下一个值时，很明显它不可能返回特殊情况的值，因为那永远不会在可枚举中. 这就是为什么`next`必须在完成时加注`StopIteration`而不是做一些更“优雅”的事情。

[**假设您必须使用`Enumerator`，因为可能有更好的方法来解决您的实际问题而无需这样做。*]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:28:20.910

像你建议的那样使用`each_with_index`对第一个 N 有特殊行为有什么问题？这种模式一直出现：

```
a.each_with_index do |e, i|
  if (i <= n)
    # Do special stuff
  end
  # Do regular stuff
end 
```

[Enumerable](http://apidock.com/ruby/Enumerable)工具箱中有很多工具可供您使用。

# java - spring mvc - 如何在不创建视图的情况下从控制器中检索值

> ID：13409098
> 
> 赞同：2
> 
> 时间：2012-11-16T01:31:06.740
> 
> 标签：java, spring, model-view-controller, controller

我这里有问题，我需要你的帮助。

我试图从控制器检索一个整数值到 jsp。

在我的 jsp 中，我有一个 ajax 调用：

```
$("#hdnCustomerSize").load(contextPath+"/customer/size", function() {
// some codes
}); 
```

在我的控制器中：

```
@RequestMapping(method = RequestMethod.GET, value="/size")
public void getCustomerSize(Model model) {
   model.addAttribute("customerSize", customerService.getCustomers().size());
} 
```

我的问题是我遇到了一个例外：

```
javax.servlet.ServletException: Could not resolve view with name 'customer/size' in servlet with name 'tombuyandsell'. 
```

我知道我得到了这个异常，因为我故意没有将它映射到`views.properties`. 原因是我只想获取整数值`size`而不是整个 jsp 页面。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:34:20.143

使用`@ResponseBody`注释并将 int 作为字符串返回。`@ResponseBody`将导致返回类型写入响应 HTTP 正文。

```
@RequestMapping(method = RequestMethod.GET, value="/size")
@ResponseBody
public String getGroupChatSize(Model model) {
   return Integer.toString(customerService.getCustomers().size());
} 
```

[文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-responsebody)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T01:34:29.310

尝试使用[@ResponseBody](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/annotation/ResponseBody.html)：

```
@ResponseBody
@RequestMapping(method = RequestMethod.GET, value="/size")
public int getGroupChatSize() {
    return customerService.getCustomers().size();
} 
```

# parsing - 开始编写逻辑表达式求值器

> ID：13409101
> 
> 赞同：3
> 
> 时间：2012-11-16T01:31:23.073
> 
> 标签：parsing, logical-operators, expression-evaluation

我想开发一个逻辑表达式评估器来计算某些逻辑表达式对特定表达式的适用性。例如，

表达式可以是以下形式

`(A AND B) NOT C`

然后应该用另一个表达式来评估这个表达式

`(B AND C) OR D`

上述情况下的评估结果为 FALSE，因为第二个表达式没有填满第一个。

表达式也可以更复杂，例如它可以具有数值范围 R(1-100)，这意味着表达式的适用性在范围内有效，例如正则表达式中的 [A-Za-z0-9]。

所以表达式可以很复杂

`(A AND B) OR C AND R(1-100) NOT R(80-100)`

然后必须通过类似的表达式对其进行评估

`(C OR D) AND B NOT R(1-7) AND R(25-100)`

关于一个表达式何时满足另一个表达式有明确的规则。因此，如果必须编写表达式评估器，最好的方法是什么。因为，我以前没有做过任何事情，所以我想抢先一步。任何相关的指针或类似的实现都可能有很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:35:24.020

您可以使用堆栈相当容易地评估布尔表达式。

基本上，当您看到“值”时，您将它们推入堆栈，当您看到运算符时，您会应用它们。谷歌“布尔表达式堆栈”会给你很多点击。

# android - Android：BroadcastReceiver 没有被我的服务调用

> ID：13409112
> 
> 赞同：2
> 
> 时间：2012-11-16T01:32:38.120
> 
> 标签：android, service, broadcastreceiver

我是 Android 开发的新手。我已经定义了一个带有服务的测试应用程序，我在其中声明了一个 BroadcastReceiver 用于接收蓝牙事件 -

```
public class MyService extends Service
 {
  BluetoothEventsReceiver mBluetoothEventsReceiver = null;

   @Override
    public int onStartCommand(Intent i, int flags, int startId) {

        // register the receiver to listen for Bluetooth Connected/Dis-connected events
        if (mBluetoothEventsReceiver != null) {
            mBluetoothEventsReceiver = new BluetoothEventsReceiver();

            Log.e(TAG, "Register receiver=" + mBluetoothEventsReceiver);
            IntentFilter intent = new IntentFilter("android.bluetooth.device.action.ACL_CONNECTED");
            intent.addAction("android.bluetooth.device.action.ACL_DISCONNECTED");

            getApplicationContext().registerReceiver(mBluetoothEventsReceiver, intent);
        }

        return super.onStartCommand(i, flags, startId);
   }
    @Override
    public IBinder onBind(Intent intent) {
        return null; 
    }
} 
```

我的 BroadcastReceiver 定义为

```
public class BluetoothEventsReceiver extends BroadcastReceiver {

 public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();

        if (BluetoothDevice.ACTION_ACL_DISCONNECTED.equals(action)) {
            Log.e(TAG, "Received Event" + " ACTION_ACL_DISCONNECTED" );
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            Log.e(TAG, "device=" + device);        

        } else if (BluetoothDevice.ACTION_ACL_CONNECTED.equals(action)) {
            Log.e(TAG, "Received Event" + " ACTION_ACL_CONNECTED" );
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            Log.e(TAG, "device=" + device);
        }
    }
} 
```

我从我的 Activity 启动服务，我希望 BroadcastReceiver 在我连接和断开蓝牙耳机时打印日志消息，但没有打印日志。所以，我想它没有被调用。

```
public class MyActivity extends Activity {

    // Debugging
    public final static String TAG ="MyActivity";

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Log.e(TAG, "Starting service");
        startService(new Intent(".MyService"));

    } 
```

此外，当我将接收器添加到 Manifest 文件时，会调用 BluetoothEventsReceiver。但据我了解，如果我希望接收器仅在服务运行时处于活动状态，则不需要在清单文件中声明接收器。

我确实在清单文件中设置了权限

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.example"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8"/>

    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application android:label="@string/app_name">
        <activity android:name="MyActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>

        <service android:name=".MyService" android:process=":remote">
        <intent-filter>
            <!-- These are the interfaces supported by the service, which
        you can bind to. -->
            <action android:name=".MyService" />
        </intent-filter>
        </service>
</application>
</manifest> 
```

请帮助调试我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:46:05.357

从此更改您的意图过滤器：

```
IntentFilter intent = new IntentFilter("android.bluetooth.device.action.ACL_CONNECTED");
intent.addAction("android.bluetooth.device.action.ACL_DISCONNECTED"); 
```

对此：

```
 IntentFilter intent = new IntentFilter();
 intent.addAction("android.bluetooth.device.action.ACL_CONNECTED");
 intent.addAction("android.bluetooth.device.action.ACL_DISCONNECTED"); 
```

您创建的过滤器似乎与蓝牙意图不匹配，因为它们确实附加了额外的数据，而您的过滤器仅适用于只有一个操作的空意图。

这是 API 的 javadoc：

public IntentFilter (String action) 自：API 级别 1 新的 IntentFilter，匹配没有数据的单个操作。如果随后没有指定数据特征，则过滤器将仅匹配不包含数据的意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T07:18:26.553

这`startService(new Intent(".MyService"))`行不通。您需要提供服务类名称的实际路径。相对路径仅在 AndroidManifest 文件中使用，不应在代码中使用。

在你的活动中尝试这样的事情：

```
Intent intent = new Intent(this, MyService.class);
this.startService(intent); 
```

其中**MyService**是指您的服务的实际完全限定名称。

# c++ - 错误：“”未在此范围内声明

> ID：13409116
> 
> 赞同：0
> 
> 时间：2012-11-16T01:33:09.033
> 
> 标签：c++, scope

所以我正在制作一个简单的几何程序，并进行测试编译。

出于某种原因，当我编译此代码时，出现以下错误：

```
base.cc: In member function ‘void seg::init_seg(p, p)’:
base.cc:20:3: error: ‘mid’ was not declared in this scope
base.cc:22:3: error: ‘b’ was not declared in this scope 
```

但有趣的是，第 1 点和第 2 点没有出现错误，只有 mid 和 b。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

struct p{
    float x=0.0f,y=0.0f;
    void init_p(float sx, float sy){
        x = sx;
        y = sy;
        }
    };

struct seg{
    p 1, 2, mid, b;
    float length = 0.0f, m = 0.0f;
    void init_seg(p p1, p p2){
        1.init_p(p1.x, p1.y);
        2.init_p(p2.x, p2.y);
        length = sqrt((1.x - 2.x)^2 + (1.y - 2.y)^2);
        mid.init_p((1.x + 2.x)/2, (1.y + 2.y)/2 );
        m = ((1.y - 2.y)/(1.x - 2.x));
        b.init_p(0, (1.y - (m*1.x)));
        }
}; 
```

为什么会出现这个错误，为什么只针对这两点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:38:53.993

这是一组错误：

```
float x=0.0f,y=0.0f;
float length = 0.0f, m = 0.0f; 
```

与 Java 和 C# 不同，您不能像在 C++11 之前的 C++ 中那样进行初始化。在您的情况下，这也是不必要的：您拥有的唯一构造函数同时设置了`x`and `y`，因此您设置的零无论如何都会被覆盖。

这是另一个错误：

```
p 1, 2, mid, b; 
```

您不能使用不以字母或下划线开头的标识符。这应该是

```
p p1, p2, mid, b; 
```

# c# - 使用 C# excel OpenXML API 从模板创建报告

> ID：13409119
> 
> 赞同：0
> 
> 时间：2012-11-16T01:33:36.667
> 
> 标签：c#, excel, openxml, openxml-sdk

我一直在使用 Microsoft COM 模型来准备报告，但是如果服务器没有安装 excel，它会很慢并且会失败。因此，我开始使用 OpenXML 从服务器进程创建报告，该服务器进程也执行大量其他操作。

我有一个模板，其中包含我需要更改或扩展的数据的命名范围、命名图表、命名图表系列、命名工作表等。我所有的格式都包含在 excel 文件中，我在服务器端进程中所做的只是填充带有数据的文件。

这些是我需要使用 Excel OpenXML 复制的步骤：

1.  打开现有工作表并基于它创建一个新工作表。
2.  通过工作表名称获取工作表
3.  获取该工作表中的命名范围。
4.  根据数据集填充命名范围并根据需要扩展范围。
5.  按图表名称获取图表
6.  按系列标题获取图表系列
7.  将图表系列设置为新范围
8.  将图表导出为 jpeg 以在 html 中使用。
9.  保存新文件。

是否可以干净地在 OpenXML 中执行这些步骤？任何例子都会对我有很大帮助。或执行此操作的轻量级库。其中一些第 3 方库太大，在从头开始创建新工作表时更有用。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:53:41.507

AFAIK，使用 OpenXml，您可以做任何事情。

我推荐一个[ClosedXml](http://closedxml.codeplex.com/documentation)库，它包装了 OpenXML SDK，让你的工作更容易。链接包含样本和东西。希望有帮助。

# ruby-on-rails - 我应该如何将排序的项目存储在数据库中？

> ID：13409121
> 
> 赞同：4
> 
> 时间：2012-11-16T01:33:43.363
> 
> 标签：ruby-on-rails, database, database-design, activerecord, relational-database

在我的应用程序中，用户可以按照他们选择的任何顺序重新排列他们最喜欢的书籍。

我的数据库中有一个“书籍”表，每本书都有一行。目前，有一个名为“位置”的整数列存储每本书的位置：1 表示最上面的书，2 表示下一本，等等。

问题是，如果有人将一本书从 #11000 位置拖到 #1 位置，那么我必须对数据库进行 11,000 次更新。这似乎效率低下。有一个更好的方法吗？

我的一个想法就是拥有另一个名为“book_sort_orderings”或其他东西的表，每个用户都有一行。其中一列将是一个巨大的文本列，其中存储书籍 ID 的排序列表。然后当用户重新排列书籍时，我可以将这个值提取到我的代码中，在那里执行重新排列，并更新数据库行。当然，任何时候添加或删除一本书，我都必须更新这个数组。这是做事情的“正确”方式吗？或者有什么聪明的方法可以在不改变当前设置的情况下加快速度吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T01:48:34.493

假设您以“批量”方式进行更新（而不是为每一行进行单独的数据库往返），您会惊讶于一个体面的 DBMS 可以更新 11,000 行的速度。

但是，如果您想避免这种情况，请使用旧的 BASIC 技巧（从 BASIC 仍然有行号的时候起）：**留下空白！**

而不是使用职位：`1, 2, 3, 4, 5 etc...`使用`10, 20, 30, 40, 50 etc...`.

因此，当您需要将（例如）第一项移动到倒数第二个位置时，只需将 10 修改为 41 ，您最终会得到：`20, 30, 40, 41, 50 etc...`。显然，如果一个空白被完全填满，你需要做一些摆弄，但这种策略应该能够几乎消除大量的更新。

* * *

另一种可能性是实现双向链表：保留上一个和下一个项目的 ID，而不是 order。重新排序可以通过简单地“重新链接”ID 来完成，就像在内存列表中一样。不幸的是，您还会阻止 DBMS 直接对项目进行排序（至少没有尴尬且可能效率低下的递归查询） - 您必须在应用程序级别进行排序，所以我建议再次使用它

* * *

> 其中一列将是一个巨大的文本列，其中存储书籍 ID 的排序列表。

请不要那样做。您将违反[1NF](http://en.wikipedia.org/wiki/1NF)，并且有**很好的理由**不这样做，包括数据一致性和性能（您必须重写整个字段以对其任何部分进行任何单个更改）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T01:43:07.340

您当前的解决方案似乎不适用于多用户设置。如果这本书的顺序是在`Book`表格中设置的，那不是对所有用户都是永久的吗？

正如其他人所提到的，通常最好保持您的数据标准化，这将需要您添加另一个表，就像您建议的那样。所以你可以有一张新`BookOrdering`桌子。所以它有一个`book_id`，一个`user_id`和`position`列。这样，每个用户和每本书都有一个指定的位置。

因此会有一个默认排序（不会存储在此表中），但用户可以更改顺序。该表只会记录默认的更改。当您要加载用户的书籍时，您首先要检查此表中的某个 user_id，然后相应地移动/调整顺序。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-16T01:44:11.307

使用几个 SQL 语句更新示例中的所有这些行并不难。您不需要在您的 DBMS 上触发 11,000 次更新（我假设这就是您想说的）。

首先，更新所有正在向前移动的书籍：

```
UPDATE book
SET position = position + 1
WHERE position < 11000
AND position >= 1 
```

...然后设置您要移动的书的位置：

```
UPDATE book
SET position = 1
WHERE id = whatever 
```

# python - 在扫雷中的炸弹周围放置数字：为什么我会得到“列表索引超出范围”？

> ID：13409123
> 
> 赞同：0
> 
> 时间：2012-11-16T01:33:46.147
> 
> 标签：python, matrix, minesweeper

我有一个函数可以将“z”数量的炸弹随机散布在 10x10 的网格中。它看起来像这样（“b”代表炸弹所在的位置。）我需要在“0”（包括对角线）旁边放置一个代表有多少炸弹的数字，我不知道该怎么做。

```
0 0 0 0 0 0 0 0 b 0
b 0 0 b 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 b 0 0 0
0 0 0 b 0 0 0 0 0 0
0 0 b 0 0 0 0 0 0 b
0 0 0 0 0 0 0 b 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 b 0 b 0 0 0 0
0 0 0 0 0 0 0 0 0 0 

from random import*
mat1 = []
mat2 = []

def makemat(x):
    for y in range(x):
        list1 = []
        list2 = []
        for z in range(x):
            list1.append(0)
            list2.append("-")
        mat1.append(list1)
        mat2.append(list2)
makemat(5)

def printmat(mat):
    for a in range(len(mat)):
        for b in range(len(mat)):
            print(str(mat[a][b]) + "\t",end="")
        print("\t")

def addmines(z):
    count = 0
    while (count < z):
        x = randrange(0,len(mat1))       
        y = randrange(0,len(mat1))      
        if mat1[y][x] == "b":
            count -= 1
        else:
            mat1[y][x] = "b"
        count += 1
    printmat(mat1)
addmines(10) 
```

这是我尝试放置数字的功能：

```
def addscores():
    for x in range(len(mat1)):
        for y in range(len(mat1)):
            if mat1[y][x] != "b":
                if mat1[y+1][x] == "b":
                    mat1[y][x] = 1 
                if mat1[y-1][x] == "b":
                    mat1[y][x] = 1                  #...ETC
            else:
                mat1[y][x] == "b"
addscores() 
```

我不断得到错误*列表索引超出范围*。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:45:19.727

改变

```
if mat1[y+1][x] == "b": 
```

至

```
if safeEquals(mat1, y+1, x, "b"): 
```

并将 safeEquals 定义为

```
def safeEquals(mat, y, x, value):
    try:
        return mat1[y][x] == "b"
    except IndexError as e:
        return False 
```

如果您在地图位置之外进行索引，这实质上允许您提供默认行为。

PS条件后执行的代码：

```
mat1[y][x] = 1 
```

应该

```
mat1[y][x] += 1 
```

由于相邻炸弹的存在会增加炸弹计数器（否则 3 怎么会出现在地图上_

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:24:49.707

避免索引错误的一种简单方法是`defaultdict`使用`mat1`和`mat2`。作为奖励，代码更短:)

```
from random import randrange
from collections import defaultdict
mat1 = defaultdict(int)
mat2 = defaultdict(lambda:"-")
size = 5

def printmat(mat):
    for a in range(size):
        print("\t".join(str(mat[a, b]) for b in range(size)))

def addmines(count):
    while (count):
        x = randrange(0,size)       
        y = randrange(0,size)      
        if mat1[y, x] != "b":
            mat1[y, x] = "b"
            count -= 1
    printmat(mat1)
addmines(10)

def addscores():
    for x in range(size):
        for y in range(size):
            if mat1[y, x] != "b":
                if mat1[y+1, x] == "b":
                    mat1[y, x] = 1                  # should be +=
                if mat1[y-1, x] == "b":
                    mat1[y, x] = 1                  #...ETC
            else:
                mat1[y, x] == "b"
addscores() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T01:46:11.447

比方说`(x, y) = (9, 9)`，你得到了，`IndexError`因为你这样做：

```
if mat1[y+1][x] == "b": 
```

它试图访问`mat1[10]`不存在的 index ，因为您的列表只有 10 个元素长。

另外，让我们这么说`(x, y) = (0, 0)`。那么当你这样做时：

```
if mat1[y-1][x] == "b": 
```

您访问索引`mat[-1]`，相当于`mat[9]`. 我很确定这不是你想要的。

有两种简单的方法可以纠正这个问题：

1) 包括一组额外的`if`语句，以确保您不会尝试访问列表边界之外的列表元素：

改变：

```
 if mat1[y+1][x] == "b":
                mat1[y][x] = 1 
            if mat1[y-1][x] == "b":
                mat1[y][x] = 1 
```

至：

```
 #parentheses in if statements added for clarity
            if (y < len(mat1) - 1) and (mat1[y+1][x] == "b"):
                mat1[y][x] = 1 
            if (y > 0) and (mat1[y-1][x] == "b"):
                mat1[y][x] = 1 
```

2）这是我喜欢的方法。在数组周围添加一层“填充”。首次创建数组时，请执行以下操作：

```
WIDTH = 10
HEIGHT = 10

myMap = [[0 for i in range(WIDTH + 2)] for j in range(HEIGHT + 2)] 
```

然后，当您访问数组中的元素时，只需确保您从 1 开始索引，而不是 0：

```
#do this
firstElement = myMap[1][1]

#not this
firstElement = mayMap[0][0]

#do this
for i in range(1, len(myMap) - 1): pass

#not this
for i in range(len(myMap)): pass 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-16T01:39:35.527

如果 y 在 range(len(mat1)) 那么 y+1 不是...

# c# - Linq to XML - 将 CDATA 渲染为 HTML

> ID：13409125
> 
> 赞同：3
> 
> 时间：2012-11-16T01:34:12.950
> 
> 标签：c#, asp.net, razor, linq-to-xml

我有以下 XML：

```
<stories>
    <story id="1234">
        <title>This is a title</title>
        <date>1/1/1980</date>
        <article>
            <![CDATA[<p>This is an article.</p>]]>
        </article>
    </story>
</stories> 
```

以及 C# 中的以下 Linq to XML 代码：

```
@{
    XDocument xmlDoc = XDocument.Load("foo.xml");

    var stories = from story in xmlDoc.Descendants("stories")
                        .Descendants("story")
                        .OrderByDescending(s => (string)s.Attribute("id"))
        select new
        {
            title = story.Element("title").Value,
            date = story.Element("date").Value,
            article = story.Element("article").Value,
        };

    foreach (var story in stories)
    {

        <text><div class="news_item">
            <span class="title">@story.title</span>
            <span class="date">@story.date</span>
            <div class="story">@story.article</div>
        </div></text>

    }
} 
```

呈现的 HTML 以如下形式输出到浏览器：

```
<div class="news_item">
    <span class="title">This is a title</span>
    <span class="date">1/1/1980</span>
    <div class="story">&lt;p&gt;This is an article.&lt;/p&gt;</div>
</div> 
```

我希望将`<p>`标签呈现为浏览器的 HTML，而不是编码。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T01:45:00.893

Razor 默认对值进行编码。您需要使用 Html.Raw 助手来避免它（[ASP.NET MVC Razor 视图中的 Html.Raw()](https://stackoverflow.com/questions/7027683/html-raw-in-asp-net-mvc-razor-view)）

```
 <div class="story">@Html.Raw(story.article)</div> 
```

# matlab - 我可以使用哪个循环和哪个坐标系统来自动化这个桁架结构的例子

> ID：13409129
> 
> 赞同：1
> 
> 时间：2012-11-16T01:34:30.550
> 
> 标签：matlab, loops, structure, polar-coordinates, truss

我对 matlab 完全陌生，似乎无法让 if 循环工作。例如，如果 Ln > k ，绘制点 i(n-1) 到 i(n)。我如何自动将正确的行或列向量分配给 i(n)？

这是我想要的图表

![在此处输入图像描述](../Images/ca6b80351be755819d1e4ca239150727.png)

我想要实现的是将 i(0) 连接到 i(1) 到 ... i(n-1) 到 i(n)。

我也有点困惑使用哪个坐标系？我认为使用极坐标系统会很容易。定义点 i(o) 的距离和角度，然后从点 i(1) 做同样的事情，但据我所知，有必要转换回笛卡尔坐标系。

一旦我对本节感到满意，我就有信心可以采取下一步措施，并为我的问题制定完整的解决方案。如果您对我想要实现的目标感兴趣，这里有一个[链接](http://bit.ly/UtdzBZ)

[请注意] 在我链接的那个问题中，有人告诉我我把它搞砸了。如果这个问题也不清楚，我很抱歉。我真的花时间尽可能清楚地说明它。我有时很难表达自己。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:44:13.490

对于坐标系，您可以使用复数作为在一维矩阵中工作的简单方法。否则，我很难理解您要完成的工作。您至少应该尝试显示一些代码，因为我们将能够更好地指导您。

有很多方法可以解决你的问题。无需详细说明，您可以执行以下操作：

```
n = 1
L(1) = ...
point(1) = ...

while (L(n) < k)
    n = n+1;       
    L(n) = L(n-1)*sin(alpha)/sin(alpha+theta);
    point(n) = ...
end

plot(point(1:n)); 
```

# objective-c - 从 [[class alloc] init] 返回 nil 的后续行动

> ID：13409131
> 
> 赞同：1
> 
> 时间：2012-11-16T01:34:43.133
> 
> 标签：objective-c, cocoa, automatic-ref-counting, idioms

作为[从 [[class alloc] init] 返回 nil 被认为是好的做法？](https://stackoverflow.com/questions/3470550/is-returning-nil-from-a-class-alloc-init-considered-good-practice/13279913)，有一种情况我没有看到太多讨论：如何处理一个在调用下一个 init 之前失败了一些先决条件的 init？

例如，假设在这个 initWithStuff: 方法中被传递 nil 或者通常没有值传递给 initWithValue: 是绝对失败的，我们肯定想要返回 nil。

```
- (id)initWithStuff:(Stuff *)inStuff {
  if (!inStuff || ![inStuff hasValidValue])
  {
    // can't proceed to call initWithValue: because we have no value
    // so do what?
    return nil;
  }
  NSInteger value = [inStuff integerValue];
  return [super initWithValue:value];
} 
```

也许一个更清楚的例子是，如果我们包装的指定初始化方法接受一个对象指针，如果它传递 nil 则抛出异常。我们肯定需要短路会导致异常的初始化调用。

我的猜测：以任何可能的方式初始化，然后才在返回零之前释放自我。如有必要，请调用裸 init 或任何其他初始化程序，以在释放它之前完成将 self 置于已知状态。

```
 // can't proceed to call super's initWithValue: because we have no value
  // so do what? do this:
  self = [super init]; // or initWithValue:0
  [self release];
  return nil; 
```

如果没有这样的初始化程序可以在没有有效数据的情况下工作，我想人们需要构造一些有效的虚拟数据。或者向其作者投诉，然后返回 nil 并忍受泄漏:^)

另外，ARC如何影响这种情况？

我的猜测：仍然以任何可能的方式完成初始化，然后返回 nil。你会认为设置 self 可能是多余的，但在某些情况下并非如此。在任何情况下，它都需要在那里消除编译器警告。

```
 // can't proceed to call super's initWithValue: because we have no value
  // so do what? do this:
  self = [super init]; // finish init so ARC can release it having no strong references
  return nil; 
```

我的猜测有任何错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:40:14.717

理想情况下，如果先决条件失败，则不要调用`[super init…]`. 您只需释放`self`（如果不使用 ARC）并返回 nil：

```
- (id)initWithStuff:(Stuff *)stuff {
    if (!stuff || ![stuff isValid]) {
        [self release]; // if not using ARC
        return nil;
    }

    if (self = [super init]) {
        // initialization here
    }
    return self;
} 
```

该版本负责`self`在 MRC 下解除分配。在 ARC 下，编译器将为您插入发行版。

**然而，这种方法存在一个潜在的问题。** 当你释放`self`时（或当 ARC 为你释放它时），系统会将`dealloc`消息发送给对象。你的`dealloc`方法会调用`[super dealloc]`. 您可以抑制`[super dealloc]`MRC，但您无法使用 ARC 来避免它。

所以危险在于你的超类可能假设它的一个实例变量已经被初始化，并且依赖于它的`dealloc`. 例如，假设这是超类：

```
@interface SomeSuperclass : NSObject
@end

@implementation SomeSuperclass {
    CFMutableBagRef bag;
}

- (id)init {
    if (self = [super init]) {
        bag = CFBagCreateMutable(NULL, 0, &kCFTypeBagCallBacks);
    }
    return self;
}

- (void)dealloc {
    CFRelease(bag);
}

@end 
```

这里的问题是`CFRelease`要求它的论点不是零。因此，如果您不调用`[super init]`子类，这将在释放期间崩溃。

鉴于这个问题，我不得不改变我最初的建议。如果您知道您的超类`dealloc`没有此类问题（例如，因为它会在取消引用或将指针传递给 之前检查指针`CFRelease`），那么您可以放心地不调用`[super init]`.

如果您**不**知道您的超类`dealloc`是安全的，那么我的建议是您**将前提条件移出`init`并移入类工厂方法。**

换句话说，不要将`alloc/init`其视为类的公共接口的一部分。提供创建实例的类方法：

```
// The class factory method.  Declare this in your header file.  This is how you
// or any user of this class should create instances.
+ (id)myObjectWithStuff:(Stuff *)stuff {
    if (!stuff || ![stuff isValid])
        return nil;

    // self here is the class object, so it's appropriate to send `alloc` to it.
    // You don't want to hardcode the class name here because that would break
    // subclassing.
    return [[self alloc] initWithStuff:stuff];
}

// This is now considered a private method.  You should not declare it in your
// header file, though in Objective-C you can't prevent the user from calling it
// if he's determined to.
- (id)initWithStuff:(Stuff *)stuff {
    // Precondition was already checked in myObjectWithStuff:.
    if (self = [super init]) {
        // initialization here...
    }
    return self;
} 
```

# php - 如何使用 MD5 密码签署我的代码？

> ID：13409137
> 
> 赞同：-3
> 
> 时间：2012-11-16T01:35:33.830
> 
> 标签：php, mysql, md5

我对回答问题有点陌生，所以请耐心等待。而且我已经阅读了帖子，并且我已经看到不再使用 mysql_ 了。我知道，所以不要告诉我不要使用它。

无论如何，我有这个代码，每当我尝试使用它注册时，密码都不会在 MD5 中散列。我已经删除了

```
$mdhash = md5('$name'); 
```

因为我需要你的帮助。

这是代码：

```
<?php

    session_start();

    include('./dbconnect/global.php');

    if (isset ($_POST['submit'])) {
    $comment = mysql_escape_string (trim ($_POST['username']));
    $id = 0;
    $date = date("Y-m-d");
        if(!empty($_POST['username']) && !empty($_POST['password']) && !empty($_POST['email'])){
            if ($_POST['username']=="telamon" or $_POST['username']=="brick") {
                die("This username is banned");
            }
                $name = mysql_escape_string (trim ($_POST['password']));
                $mdehash = md5($name);
                $email = mysql_escape_string (trim ($_POST['email']));
                $picture = $_POST['def'];
                $tweet = 'NoTweetsTweeted';
                $g = mysql_query( "SELECT * FROM admin WHERE username='".$comment."'") or die(mysql_error());

                if (mysql_num_rows($g) >= 1) {
                    $errMsg = "<p style='color:#999999;'>That username is already registerd!</p>";
                }else {
                    if ( preg_match("/^[a-zA-Z0-9]+$/i", $comment) ) { 
                    $sql = mysql_query ("INSERT INTO admin (id,username,password,date,picture,email,twitter) VALUES ('".$id."','".$comment."','".$name."','".$date."','".$picture."','".$email."','".$tweet."')");
                    header('location: home.php');
                    }else
                    $errMsg = "<p style='color:#999999;'>Please fill all fields!</p>";
            }
        }
    }
?> 
```

所以，如果我能得到一些帮助，那将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T01:38:08.227

去掉这个语句中的单引号。

```
$mdhash = md5('$name'); 
```

它应该是：

```
$mdhash = md5($name); 
```

单引号导致美元符号按字面意思表示，因此 $name 不再是变量而是文字字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:42:56.243

看起来好像您正在传递`$name`到 SQL 数据库而不是`$mdehash`在您的查询中。

我还会更改变量名称以更好地匹配它们的实际用法。他们有点混乱。

# php - 邮件表单从上一页提取值

> ID：13409139
> 
> 赞同：0
> 
> 时间：2012-11-16T01:35:43.550
> 
> 标签：php, actionmailer, html-email

我已经制作了这样的邮件表格

```
<?php

//session_start();

$Total = $_POST['Total'];
$room = $_POST['room'];
$letter = $_POST['letter'];
$Name = $_POST['name'];
$Email = $_POST['email'];
$Address = $_POST['address'];
$Message = $_POST['message'];
$body = "Message sent from CARBONYZED Quotation System | www.CARBONYZED.co.uk ".     "\r\n".
        "// Number of $room = Sel". $letter. " \r\n".
        "// Quote Total = ". $Total. " \r\n".                           
        "// Name = ". $Name. " \r\n".
        "// Email = ". $Email. " \r\n".
        "// Address = ". $Address. " \r\n".
        "// Message = ". $Message. " \r\n".

$subject = "**CONTACT FORM** - From CARBONYZED's Web Server";

      $to = "AffordableCleaners@carbonyzed.co.uk";
        $headers = 'AffordableCleaners@carbonyzed.co.uk' . "\r\n" .
      'Reply-To: AffordableCleaners@carbonyzed.co.uk' . "\r\n" .
        'X-Mailer: PHP/' . phpversion();
      if (mail($to, $Email, $body, $headers)) {
    echo("<p>Message successfully sent!</p>  Click here to go <a     href='http://www.affordablecleaners.co.uk'>back</a>");

    } else {
      echo("<p>Message delivery failed...</p>");
    }
       ?> 
```

这很好，除了我需要添加更多功能。在上一页，我有一些盒子，我将在这里发布

```
<tr>
<td align="left">Stairs</td>
<td align="center" style="text-align: left">
<select name="SelA">
<option>0</option>
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
</select>
<input type="hidden" name="TotA" onFocus="this.blur();" />
<br></td>
<td width="120" align="center" style="text-align: left">
<select name="SelAA">
<option>0</option>
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
</select>
<input type="hidden" name="TotAA" onFocus="this.blur();" />
<br></td>
<td width="116" align="center" style="text-align: left">
<select name="SelUA">
<option>0</option>
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
</select>
<input type="hidden" name="TotUA" onFocus="this.blur();" />
<br></td>

</tr> 
```

**请**你能帮我做两件事，首先拉出楼梯以发送邮件内容（例如楼梯），还有3个值，每个下拉列表中每个的内容......

此外，我们可能会添加一些具有相似数据但不完全相同的所有数据。基本上，楼梯格式的名称文本值总是随机的，但 SelA 和 SelUA 总是在变化。基本上，我们需要它循环并提取这 4 位信息（或 8、12、16 ......

希望某人的疯狂大脑可以提供帮助

问候

亨利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:41:23.500

提交之前的上一页中的每个表单选项（无论是 POST 还是 GET）都将作为其名称包含在下一页中。就像 PHP 顶部的语句一样，您可以获取框的值：

```
$SelA= $_POST['SelA'];
$SelAA= $_POST['SelAA'];
$SelUA= $_POST['SelUA']; 
```

然后你可以像你已经拥有的那样在正文中使用这些值：

```
$body = "Message sent from CARBONYZED Quotation System | www.CARBONYZED.co.uk ".     "\r\n".
        "// Number of $room = Sel". $letter. " \r\n".
        "// Quote Total = ". $Total. " \r\n".                           
        "// Name = ". $Name. " \r\n".
        "// Email = ". $Email. " \r\n".
        "// Address = ". $Address. " \r\n".
        "// Message = ". $Message. " \r\n".
        "// SelA= ". $SelA. " \r\n".
        "// SelAA= ". $SelAA. " \r\n".
        "// SelUA= ". $SelUA. " \r\n". 
```

那是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:59:15.537

修改表单页面以将输入字段放入数组中：

```
 <select name="Sel[A]">  ...
 <select name="Sel[AA]">  ...
 <select name="Sel[XA]">  ... 
```

然后用循环附加那些：

```
 foreach ($_POST["Sel"] as $key => $value) {

      $email_body .= "// Stairs? $Sel $key = $value \r\n";
 } 
```

是的，这是将变量与字符串连接起来的简便方法。

# cvs - 在 CVS 中区分一个新文件

> ID：13409145
> 
> 赞同：1
> 
> 时间：2012-11-16T01:36:49.753
> 
> 标签：cvs

我试图在我的几个文件之间生成差异，其中一个是 CVS 中新添加的文件（我做了一个 cvs add myfile.py）。

当我尝试生成差异时， cvs diff -u （我的所有文件）它抱怨说 cvs diff: myfile.py 是一个新条目，没有可用的比较。

如何让它生成包含我的新文件的差异文件？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T01:39:54.170

```
cvs diff -Nu 
```

使用`-N`旗帜。来自`cvs diff --help`：

> -N --new-file 将不存在的文件视为空文件。

# performance - Haskell - 从 List 转换为 Data.Vector

> ID：13409150
> 
> 赞同：5
> 
> 时间：2012-11-16T01:37:11.743
> 
> 标签：performance, list, haskell, vector

在分析我的 haskell 程序后，我发现程序中 66% 的时间都花在索引列表上。该解决方案似乎正在使用 Data.Vector，但我在转换时遇到了麻烦：当我将代码更改为使用 Vector 时，它会使用大量内存，并且挂起非常严重，我什至无法对其进行分析。什么可能导致这种情况？

这是我要转换的文件：[https ://github.com/drew-gross/Blokus-AI/blob/master/Grid.hs](https://github.com/drew-gross/Blokus-AI/blob/master/Grid.hs)

以及我尝试转换它：[https ://github.com/drew-gross/Blokus-AI/blob/convert-to-vector/Grid.hs](https://github.com/drew-gross/Blokus-AI/blob/convert-to-vector/Grid.hs)

任何想法我做错了什么？或者至少，去哪里看？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T02:11:45.010

```
makeEmptyGrid width height defaultCell = Grid (Data.Vector.take arraySize $ fromList $ repeat defaultCell) width height 
```

那是一个杀手。`fromList`将整个列表转换为 a `Vector`，但`repeat defaultCell`它是一个无限列表。

```
makeEmptyGrid width height defaultCell = Grid (fromListN arraySize $ repeat defaultCell) width height 
```

或者

```
makeEmptyGrid width height defaultCell = Grid (fromList $ replicate arraySize defaultCell) width height 
```

会解决这个问题。

粗略查看其余部分并没有导致更明显的陷阱，但我可能很容易忽略了一些。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T17:57:58.383

这只是丹尼尔的一个额外想法。看起来你`Grids`只是`Colors` 一个小“网格”可能不会做太多，但创建一个`Unbox`实例相对容易`Color`。然后一个网格将包含一个未装箱的数组。在`Grid.hs`您将导入`Data.Vector.Unboxed`而不是`Data.Vector`. 由于许多原因，这通常*要*好得多，但需要您`Unbox a =>`对许多定义进行限制。如果您想制作或“映射”到充满另一种类型的东西的网格中，这可能会产生后果`Color`，除非它有一个`Unbox`实例。

下面我只是添加了 TH 咒语`vector-th-unbox`（我最近刚刚了解了那个包，并借此机会再次测试它）和两个必要的定义。在`Data.Vector.Unboxed.Base`.

```
{-#LANGUAGE TemplateHaskell, TypeFamilies, MultiParamTypeClasses#-}
module Color where

import Display
import Data.Vector.Unboxed.Deriving 
import qualified Data.Vector.Unboxed as V 
import qualified Data.Vector.Generic         as G
import qualified Data.Vector.Generic.Mutable as M 
import Data.Word (Word8)

data Color = Yellow | Red | Green | Blue | Empty      
           deriving (Show, Eq, Ord, Enum, Bounded)

fromColor :: Color -> Word8
{-# INLINE fromColor #-}
fromColor = fromIntegral . fromEnum

toColor :: Word8 -> Color
{-# INLINE toColor #-}
toColor x | x < 5 = toEnum (fromIntegral x)
toColor _ = Empty

derivingUnbox "Color"
   [t| Color -> Word8 |]
    [| fromColor |]
    [| toColor |]

-- test
colorCycle :: Int -> V.Vector Color
colorCycle n = V.unfoldr colorop 0 where 
  colorop m  | m < n =  Just (toColor (fromIntegral (m `mod` 5)),m+1)
  colorop _ =  Nothing
-- *Colour> colorCycle 12
-- fromList [Yellow,Red,Green,Blue,Empty,Yellow,
-- Red,Green,Blue,Empty,Yellow,Red]

colorBlack  = "\ESC[0;30m"
colorRed    = "\ESC[0;31m"
colorGreen  = "\ESC[0;32m"
colorYellow = "\ESC[0;33m"
colorBlue =   "\ESC[0;34m"

instance Display Color where
    display Red    = colorRed ++ "R" ++ colorBlack
    display Green  = colorGreen ++ "G" ++ colorBlack
    display Yellow = colorYellow ++ "Y" ++ colorBlack
    display Blue   = colorBlue ++ "B" ++ colorBlack
    display Empty  = "." 
```

编辑：在`vector-th-unbox`前面的版本中`0.1`使用了以下模板：

```
derivingUnbox "Color"
    [d| instance Unbox' (Color) Word8 |]
    [| fromColor |]
    [| toColor |] 
```

# variables - Pascal：DLL 中的内部变量

> ID：13409152
> 
> 赞同：-1
> 
> 时间：2012-11-16T01:37:48.117
> 
> 标签：variables, dll, pascal

例如在 Pascal 中，如果我有一个要编译为 DLL 的库：

```
library Blah;

procedure AddToNum;
begin
  Num := Num + 1;
end;

procedure PrintNum;
begin
  WriteLN(Num);
end;

Exports AddToNum;
Exports PrintNum;

var
  Num: Integer;

begin
  Num := 0
end. 
```

理想情况下，用户只需调用 AddToNum 和 PrintNum 例程，它就会这样做。但是，您实际上必须传入参数，这意味着用户必须跟踪我将使用的所有变量。这样做的理想方法是什么？指针什么的？

我正在寻找函数调用之间相同的变量，就像某种“全局”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:23:39.810

将您的 DLL 代码（运行的实际代码）移动到一个单独的单元（例如，`DLLCode.pas`），在实现部分的顶部声明变量，并让您的`.DPR`文件只使用该单元。所有实际代码都进入`DLLCode.pas`，并且变量的可见性遵循正常的 Pascal 范围规则。

这是一个示例 DLL (`DLLSample.dpr`和`DLLCode.pas`)，以及一个使用它的测试控制台应用程序。所有代码都在 Delphi 2007 和 Windows 7 64 位下编译并正确执行。

DllSample.dpr：

```
library DLLSample;

{ Important note about DLL memory management: ShareMem must be the
  first unit in your library's USES clause AND your project's (select
  Project-View Source) USES clause if your DLL exports any procedures or
  functions that pass strings as parameters or function results. This
  applies to all strings passed to and from your DLL--even those that
  are nested in records and classes. ShareMem is the interface unit to
  the BORLNDMM.DLL shared memory manager, which must be deployed along
  with your DLL. To avoid using BORLNDMM.DLL, pass string information
  using PChar or ShortString parameters. }

uses
  SysUtils,
  Classes,
  DLLCode in 'DLLCode.pas';

{$R *.res}

begin
end. 
```

DllCode.pas：

```
unit DLLCode;

interface

procedure AddToNum; stdcall;
procedure PrintNum; stdcall;

exports
  AddToNum,
  PrintNum;

implementation

// Num  is only visible from here down, and starts with a value of zero when the
// DLL is first loaded. It keeps it's value until the DLL is unloaded, which is
// typically when your app is exited when using static linking, or when you 
// FreeLibrary() when dynamically linking.
var
  Num: Integer = 0;

procedure AddToNum;
begin
  Inc(Num);   // Same as Num := Num + 1;
end;

procedure PrintNum;
begin
  WriteLn(Num);
end;

end. 
```

DllTestApp.dpr：

```
program DLLTestApp;

{$APPTYPE CONSOLE}

uses
  SysUtils;

// Links to the procedures in the DLL. Note that the DLL has to be
// in the same folder, or located somewhere on the Windows PATH. If 
// it can't be found, your app won't run.
procedure AddToNum; external 'DLLSample.dll';
procedure PrintNum; external 'DllSample.dll';

begin
  PrintNum;   // Print initial value
  AddToNum;   // Add to it twice
  AddToNum;
  PrintNum;   // Print new value
  ReadLn;     // Wait for Enter key
end. 
```

这输出：

```
0
2 
```

在控制台窗口中，等待您点击`Enter`关闭它。

# ios - 使用pushViewController时如何使用prepareForSegue并避免错误？

> ID：13409153
> 
> 赞同：1
> 
> 时间：2012-11-16T01:37:48.043
> 
> 标签：ios, xcode, segue, pushviewcontroller

我的转场被添加到故事板中。我想推送到一个视图控制器，比如 Deep_VC，与故事板中的下一个不同，比如 Next_VC。我正在使用：

```
Deep_VC *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"DeepVC"];
[self.navigationController pushViewController:controller animated:YES]; 
```

它去了那里，但我得到了错误。导航栏磁贴用于 Next_VC，而不是 Deep_VC，并且错误消息：

```
Finishing up a navigation transition in an unexpected state . . .
Unbalanced calls to begin/end appearance transitions . . . 
```

我的 prepareForSegue 看起来像：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"toNextVC"]) {
        Next_VC *vc = [segue destinationViewController];
        vc.receivedData = [NSMutableArray arrayWithObjects:passData, nil];
    }
    if ([[segue identifier] isEqualToString:@"toDeepVC"]) {
        Deep_VC *vc = [segue destinationViewController];
        vc.receivedData = [NSMutableArray arrayWithObjects:passData, nil];
    }
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:03:17.343

在您的情况下，我宁愿使用 performSegue 而不是 pushViewController。但是等等，如果你已经在情节提要中连接了你的 VC，你就不需要推送了。这将由 segue 自动完成。

**编辑**

```
if (login == successful) {
       [self performSegueWithIdentifier:@"toNextVC" sender:self];
} else {
       [self performSegueWithIdentifier:@"toDeepVC" sender:self];
} 
```

之后 prepareForSegue 将被自动调用并在那里设置您的数据。不需要 pushViewController，因为序列会推送适当的 VC。

希望有帮助！

# c# - 使用streamreader在html标签之间进行编辑

> ID：13409161
> 
> 赞同：0
> 
> 时间：2012-11-16T01:38:59.857
> 
> 标签：c#, html, visual-studio-2010

是否可以使用 streamreader 查找与标签匹配的所有行，然后编辑它们之间的内容？

到目前为止，我可以将 html 文件的所有内容读入富文本框中，但我希望它找到具有 h4 标签的每一行并将其加载到 textbox1、2、3 等中。

我该怎么做？你能举个例子吗，我是新手。

```
 private void loadToolStripMenuItem_Click(object sender, EventArgs e)
    {
        using (OpenFileDialog dlgOpen = new OpenFileDialog())
        {
            try
            {
                // Available file extensions
                dlgOpen.Filter = "All files(*.*)|*.*";
                // Initial directory
                dlgOpen.InitialDirectory = "L";
                // OpenFileDialog title
                dlgOpen.Title = "Open";
                // Show OpenFileDialog box
                if (dlgOpen.ShowDialog() == DialogResult.OK)
                {
                    // new StreamReader
                    StreamReader sr = new StreamReader(dlgOpen.FileName, Encoding.Default);
                    // Get all text from the file
                    string str = sr.ReadToEnd();

                    // CloseStreamReader
                    sr.Close();
                    // Show text
                    richTextBox1.Text = str;

                }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:22:58.413

From `You should use HtmlAgilityPack`. and `could you give an example of how to use it with html agility pack then?`

Follow [How to use HTML Agility pack](https://stackoverflow.com/questions/846994/how-to-use-html-agility-pack).

You can find examples as well.[Here](http://htmlagilitypack.codeplex.com/wikipage?title=Examples)

Please do not try to use Regular Expressions to find and replcase. Because this great answer [RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454) begs to avoid that. I was told about it in comments

However I had used them 100% successfully with 110% limited scope. Limited mean my e.g. I have no other tags between any `<td> sometext </td>` and I wanted to replace all of them with `<td> sometext and some newtext </td>` and I had done it successfully. But I was 100% sure what number of tags and what maximum depth I had in my HTML with no `Unexpected` and `Irregular` behavior. If you have such limited and well defined HTML then [These Regular Expressions](http://www.pagecolumn.com/tool/all_about_html_tags.htm) might help.

# powershell - 使用 PowerShell 安装驱动器和启动应用程序

> ID：13409162
> 
> 赞同：1
> 
> 时间：2012-11-16T01:39:18.477
> 
> 标签：powershell, clearcase

我正在尝试卸载驱动器，安装驱动器，启动视图，安装 vobs，然后调用 perl 脚本。

我遇到的问题是，似乎我必须以管理员身份运行才能安装驱动器，但我的程序必须以特定用户身份运行。
如果我以管理员身份运行 powershell，我可以运行挂载命令，但我需要以用户身份运行 perl scipts。

如何让这两个部分以用户身份运行？

我试过评论和未评论的版本

```
c:\WINDOWS\system32\net.exe use Z: /d
#Remove-PSDrive Z
sleep 2

cleartool endview -server Bedrock_Main_mvwd01tc_1
sleep 2

##new-psdrive -name Z -psprovider FileSystem -root \\view\Bedrock_Main_mvwd01tc_1 
c:\WINDOWS\system32\net.exe use Z: \\view\Bedrock_Main_mvwd01tc_1
sleep 2

##%DRIVE% ##|| goto NETUSEERROR
Set-Location Z:\CMTools\buildtools
cd Z:\CMTools\buildtools

cleartool mount -a

### SET THE CONFIG SPEC TO THE NIGHTLY TIMESTAMP.
\\usmvwc0wafnsrv.ww005.siemens.net\EngTools\bin\chrcs -p $PROJECT -n -m -f 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:04:42.303

在 Windows 上，所有动态视图都自动安装在`M:`驱动器上，因此您不需要使用非 ClearCase 命令 (net.exe) 来启动视图。

简单[`cleartool startview aViewTag`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_startview.htm)就够了。

如果您需要为特定视图使用驱动器号，请先启动该视图（尤其是动态视图，否则在 下不可见`M:\`），然后使用`subst`.

有关具体示例，请参阅“ [ClearCase，使用动态视图将特定文件夹映射到驱动器”。](https://stackoverflow.com/questions/2062810/clearcase-mapping-specific-folders-into-drives-using-dynamic-views/2062854#2062854)

# javascript - 相等操作数的顺序是否重要？（例如 1 == x 与 x == 1）

> ID：13409165
> 
> 赞同：12
> 
> 时间：2012-11-16T01:39:39.290
> 
> 标签：javascript, google-closure-compiler

所以我正在尝试使用 Google Closure Compiler，我注意到它会切换我所有的相等参数，以便变量始终位于比较的右侧。

所以现在代替`typeof XMLHttpRequest=="undefined"`I have`"undefined"==typeof XMLHttpRequest`和 I have `if(null!==a)`instead of `if(a!==null)`，就像一些例子一样。

我知道他们完成了同样的事情，但这不是我习惯的风格。切换这些是否有某种好处？我看不出会怎么样。

有人可以向我解释*为什么 Closure Compiler 决定这样做*吗？这只是写闭包那部分的人的偏好吗？

*编辑：*为了澄清，人们告诉我为什么它可能被认为是良好的编码实践。没关系，但这是*在编译之后*。有性能优势还是闭包编译器只是试图证明一个观点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T01:42:33.347

通常用 C / C++ 等语言完成，所以你不会意外地这样做

```
if (a = null) {
    // sets a to null and everyone is happy.
    // but probably meant to check if a is null or not.
    // via (a == null)
}

if (null = a) {
    // won't compile
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-16T06:06:15.143

编译器切换顺序的原因很简单：它使用 gzip 压缩得更好。编译器并不关心提高理解力或使其更易于编辑。通过切换顺序，常见的比较例如 "if (x == null) ... if (y == null) ..." 变成 "if (null == x) ... if (null == y) 。 ..” Gzip 找到“if (null ==" 并能够用单个标记替换它。这不是一个很大的改进，但它在一个大型代码库中加起来。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T01:41:51.050

是的，您不能分配给常量，并且`==`很容易输入错误（有时您可能会忘记一个，然后使用`=`）。

例如，有什么区别...

```
if (a == 1) { } 
```

...和...

```
if (a = 1) { } 
```

? 第二个总是评估为*真*，不管值是多少`a`。

如果你翻转 LHS 和 RHS，你可以看到直接的好处......

```
if (1 == a) { } 
```

...将按预期工作并且...

```
if (1 = a) { } 
```

...将失败，因为您不能分配给常量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-16T01:44:02.943

我知道的原因是为了防止

```
if (x = 5) { } 
```

如果你把它反转为

```
if (5 = x) { } 
```

你会得到一个编译器错误。

但是如果你把它写成

```
if (5 == x) { } 
```

它会编译得很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T01:49:26.160

我的大脑解析

```
if( x < y ) 
```

略快于

```
if( y > x ) 
```

可能是因为实轴始终从左到右定向，从而使条件更易于可视化。

但是，在java中编写更实用

```
if( "string".equals(x) ) {... 
```

与“更自然”相反

```
if( x.equals("string") ) {... 
```

消除任何 NPE 的机会。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-16T04:40:57.853

只是对常见错误的特定情况的静态分析的廉价替代/

# javascript - 在 JavaScript 中创建多个图像对象

> ID：13409166
> 
> 赞同：3
> 
> 时间：2012-11-16T01:39:46.247
> 
> 标签：javascript, html, client-side

我正在用 JavaScript 编程，我想知道是否有创建多个图像对象的“最佳”方法。以下面的代码为例。

```
var a = new Image();
var b = new Image();
var c = new Image(); 
```

这是唯一的方法吗，还是我应该做类似的事情......

```
var a = new Image(), b = a, c = a; 
```

我只是想知道第一种方法是否有不同的方法。我发现我的程序包含更多的 ' `new Image()`' 变量，我认为重复对代码不利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:45:44.513

我不确定我是否正确理解了您的问题。`new Image()`如果代码需要，我不相信将三个变量声明为三个不同的变量有什么问题。事实上，我非常赞成它，因为在我看来它使代码更具可读性。

但是，如果你打算做一些不同的事情，你可以试试这个：

`var a = new Image(), b = a.cloneNode( true ), c = a.cloneNode( true );`

我不认为这是非常可读的。

如果代码允许，您也可以尝试在可能是首选方法的列表中初始化它们。

```
var images = [];
for( var index = 0; index < 10; index++ ) {
    images.push( new Image() );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T01:43:00.253

我可能会将它们构建为一个数组，而不是用一堆指向不同`Image`对象的单独变量来污染你的命名空间。

```
var imgs = [];
var numImgs = 10;
// In a loop, build up an array of Image objs
for (var i=0; i<numImgs; i++) {
  imgs.push(new Image());
  // Initialize properties here if necessary
  imgs[i].src = 'http://example.com';
}
// imgs now holds ten Image objects...
// Access them via their [n] index
img[3].src = 'http://stackoverflow.com'; 
```

这不会比创建多个变量更有效率或更少，但让它们保持井井有条肯定更容易。您将在初始化它们时节省几行代码，但从长远来看，这相当于微优化，其效果可以忽略不计。

请注意，如果您真的想要每个 的文本描述符`Image`，您可以选择使用对象`{}`而不是 Array`[]`并将其属性设置为小的描述性字符串。你甚至可以通过一个数组来初始化它：

```
var imgNames = ['stackoverflow','google','example'];
var imgs = {}
// Initialize object properties in a loop
for (var i=0; i<imgNames; i++) {
  // Initialize a property in the object from the current array value using [] notation
  imgs[imgNames[i]] = new Image();
}
// Then you can access them by their property name:
imgs.google.src = 'http://www.google.com';
imgs.stackoverflow.src = 'http://stackoverflow.com'; 
```

这有点类似于滥用对象以表现得像 PHP 或 Perl 关联数组，但如果您需要按名称而不是上面数组方法中的数字键，则可以轻松访问图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T01:48:47.557

第二种方式是*相同*的图像。

如果你这么说的话：

```
b = a;
c = b; 
```

如果`a`是一个对象，那么`b`和`c`只是指向同一个对象的引用。

制作一个加载图像的函数怎么样？

```
function loadImage(name, optionalCallback) {
    var img = new Image();
    if (typeof optionalCallback === "function") { img.onload = optionalCallback; }
    img.src = name;

    return img;
} 
```

然后你可以说：

```
var a = loadImage("images/image01.png", function () { document.body.appendChild(this); }),
    b = loadImage("images/image02.jpg", function () { gallery.addImage(this); }); 
```

你可以用它做更多的事情，当你走得更远时——当你进入`Promises`等等时，你可以用这些图像做很多事情。

此外，如果您正在编写如下所示的程序，您可能需要小心：

```
var a = new Image();
a.src = "images/image01.jpg";
document.getElementById("gallery").appendChild(a); 
```

如果您在图像加载完成之前到达将图像添加到页面的代码部分，那么您可能会得到意想不到的结果。

# xcode - 创建 Xcode 项目后如何撤消“添加到 Git 存储库”？

> ID：13409169
> 
> 赞同：2
> 
> 时间：2012-11-16T01:40:11.743
> 
> 标签：xcode, git

我创建了一个简单的 Xcode 项目来尝试一些东西，但不小心忘记禁用 Git 存储库选项。

现在 Xcode 中充斥着源代码控制的东西。除了手动将所有文件复制到新的 Xcode 项目并再次进行所有项目更改之外，我如何才能摆脱这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:30:06.957

Not sure I understand your question, but if you just don't want the project to be a Git repository, you can simply delete the `.git` folder located in the project's root.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T03:48:48.563

如果您尚未与其他人共享您的提交，请使用“git reset -mixed”或“git reset -hard”将 master 设置为您想要的最后更改。

如果您想更改索引和工作树，请使用类似： git reset -hard HEAD^ 如果您只想更改索引并保持 Xcode 未提交，请使用类似： git reset -mixed HEAD^

见 man git reset

# c# - Groupbox重绘问题

> ID：13409171
> 
> 赞同：1
> 
> 时间：2012-11-16T01:40:29.133
> 
> 标签：c#, paint, redraw

我觉得我已经在互联网上搜寻了答案，但我仍然没有解决这个问题。我正在用 C# 构建一个刽子手游戏（我还是新手），我的表单上有一个组框，我在其中绘制不同的“身体部位”。问题是每次调用 draw 事件时都会重新绘制它。所以我最终会得到一个头，然后是一条手臂，一条腿，等等。

我试图做一些事情，比如覆盖 OnPaintBackground，虽然这解决了重绘的问题，但它搞砸了整个表单，当我这样做时它看起来很糟糕。我也尝试在面板上而不是组框上绘制，但由于某种原因，我什至无法绘制。

有人可以提供任何建议吗？顺便说一句，这不是家庭作业，只是个人项目和学习经历。

一些代码：这是我用来触发绘图功能的（它在我拥有的其他条件下触发）

```
this.groupBoxHang.Paint += new System.Windows.Forms.PaintEventHandler(this.groupBoxHangMan_Paint); 
```

然后它来到这里并调用实际的函数，该函数在一个单独的类中

```
 private void groupBoxHangMan_Paint(object sender, PaintEventArgs e)
    {          
       draw.DrawHangMan(e.Graphics, GetRemainingGuess());      
    } 
```

这是另一个类的一部分：

```
 public void DrawHangMan(Graphics dM, int guessesRemaining)
    {        
        Pen blackPen = new Pen(Brushes.Black);

        Pen deathPen = new Pen(Brushes.Red);
        deathPen.Width = 2.0F;

        if (guessesRemaining == 7)
        {
            dM.DrawEllipse(blackPen, 94, 75, 60, 60);//head
        }
        else if (guessesRemaining == 6)
        {
            dM.DrawLine(blackPen, 124, 210, 124, 135);//body
        }
        else if (guessesRemaining == 5)
        {
            dM.DrawLine(blackPen, 123, 170, 65, 145);//left arm
        }
        else if (guessesRemaining == 4)
        {
            dM.DrawLine(blackPen, 123, 170, 181, 145); //right arm
        }
        else if (guessesRemaining == 3)
        {
            dM.DrawLine(blackPen, 123, 210, 65, 255);//left leg
        }
        else if (guessesRemaining == 2)
        {
            dM.DrawLine(blackPen, 123, 210, 181, 255);//right leg
        }
        else if (guessesRemaining == 1)
        {
            dM.DrawEllipse(blackPen, 105, 93, 10, 10); //left open eye
            dM.DrawEllipse(blackPen, 133, 93, 10, 10); //right open eye
        }
        else if (guessesRemaining == 0)
        {
            dM.DrawLine(deathPen, 102, 104, 118, 92);//left eye dead
            dM.DrawLine(deathPen, 118, 104, 102, 92);

            dM.DrawLine(deathPen, 130, 104, 146, 92);//right dead eye
            dM.DrawLine(deathPen, 146, 104, 130, 92);
        }         

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:17:28.597

您的 If 语句有两件事。它们被设置为仅在计数等于计数时才激活，因此当计数小于阈值时您不会重绘，第二件事是使用 else 语句您只运行一个级别。在您的活动中这样做`Paint`是正确的。尝试这样的事情：

```
public void DrawHangMan(Graphics dM, int guessesRemaining)
{
    Pen blackPen = new Pen(Brushes.Black);
    Pen deathPen = new Pen(Brushes.Red);
    deathPen.Width = 2.0F;

    if (guessesRemaining < 8)
    {
        dM.DrawEllipse(blackPen, 94, 75, 60, 60);//head
    }
    if (guessesRemaining < 7)
    {
        dM.DrawLine(blackPen, 124, 210, 124, 135);//body
    }
    if (guessesRemaining < 6)
    {
        dM.DrawLine(blackPen, 123, 170, 65, 145);//left arm
    }
    if (guessesRemaining < 5)
    {
        dM.DrawLine(blackPen, 123, 170, 181, 145); //right arm
    }
    if (guessesRemaining < 4)
    {
        dM.DrawLine(blackPen, 123, 210, 65, 255);//left leg
    }
    if (guessesRemaining < 3)
    {
        dM.DrawLine(blackPen, 123, 210, 181, 255);//right leg
    }
    if (guessesRemaining < 2)
    {
        dM.DrawEllipse(blackPen, 105, 93, 10, 10); //left open eye
        dM.DrawEllipse(blackPen, 133, 93, 10, 10); //right open eye
    }
    if (guessesRemaining < 1)
    {
        dM.DrawLine(deathPen, 102, 104, 118, 92);//left eye dead
        dM.DrawLine(deathPen, 118, 104, 102, 92);
        dM.DrawLine(deathPen, 130, 104, 146, 92);//right dead eye
        dM.DrawLine(deathPen, 146, 104, 130, 92);
    }

} 
```

# opengl - 使用条件语句在与弹出相反的颜色之间反弹

> ID：13409172
> 
> 赞同：3
> 
> 时间：2012-11-16T01:40:33.483
> 
> 标签：opengl, glsl, conditional-statements, vertex-shader

我最近一直在阅读一篇在线文章以了解现代 3d OpenGL 编程的技巧，但我陷入了“独立实践”评论之一的困境。问题如下：

> 在 fragChangeColor.cpp 中，更改它以使片段程序在 firstColor 和 secondColor 之间反弹，而不是在循环结束时从 secondColor 弹出回第一个。从第一个到第二个到第一个的转换都应该在单个 fragLoopDuration 时间间隔内发生。如果您想知道，GLSL 支持 if 语句以及 ?: 运算符。但是，对于奖励积分，请在没有明确的条件声明的情况下进行；随意使用 sin 或 cos 函数来执行此操作。

我遇到的麻烦是使用条件语句在两种颜色之间反弹，我对 GLSL 着色器语言的了解有限。下面的代码会慢慢增加三角形的颜色，直到达到最大值，然后将颜色恢复为白色。

```
#version 330

out vec4 outputColor;

uniform float fragLoopDuration;
uniform float time;

const vec4 firstColor = vec4(1.0f, 1.0f, 1.0f, 1.0f);
const vec4 secondColor = vec4(0.0f, 1.0f, 0.0f, 1.0f);

void main()
{
    float currTime = mod(time, fragLoopDuration); //makes the color pop from green to white once mod goes from 5 to 0 again
    float currLerp = currTime / fragLoopDuration;

    outputColor = mix(firstColor, secondColor, currLerp);
} 
```

在该代码的某处，我需要包含某种条件语句，这样一旦三角形颜色达到最大值，它将开始减少颜色，直到达到白色，然后再次变为最大颜色，依此类推。我该怎么做呢？我最初的猜测是使用某种静态 bool if 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:41:10.767

你想多了。这是你的[函数图](http://fooplot.com/#W3sidHlwZSI6MCwiZXEiOiJhYnMoc2luKHgpKSIsImNvbG9yIjoiIzAwMDAwMCJ9LHsidHlwZSI6MTAwMCwid2luZG93IjpbIi00LjE1OTk5OTk5OTk5OTk5NzUiLCI0LjE1OTk5OTk5OTk5OTk5NzUiLCItMi41NTk5OTk5OTk5OTk5OTg3IiwiMi41NTk5OTk5OTk5OTk5OTg3Il19XQ--)

和代码示例：

```
uniform float time;

const vec4 firstColor = vec4(1.0, 1.0, 1.0, 1.0);
const vec4 secondColor = vec4(0.0, 1.0, 0.0, 1.0);

void main()
{
   float lerp = abs(sin(time));
   gl_FragColor = mix(firstColor, secondColor, lerp);
} 
```

您可以在线测试它[http://www.iquilezles.org/apps/shadertoy/](http://www.iquilezles.org/apps/shadertoy/)只需复制过去的代码并按编译（源面板左上角的小图标）

但保持这个块完好无损：

```
#ifdef GL_ES
precision highp float;
#endif 
```

否则将无法正常工作。

# c# - 当 DataSource 中只有 1 项时，FormView 不显示 PagerTemplate

> ID：13409173
> 
> 赞同：2
> 
> 时间：2012-11-16T01:40:37.543
> 
> 标签：c#, asp.net, datasource, formview, pagertemplate

我有一个带有自定义 PagerTemplate 的 FormView 控件和我自己的分页 LinkBut​​tons。在我加载的数据集只包含一个记录/项目并完全隐藏 PagerTemplate 之前，一切都很好。我在网上搜索了几个答案，只需添加：

```
protected void fvAppHMDA_PreRender(object sender, EventArgs e)
    {
        if (fvAppHMDA.TopPagerRow != null)
            fvAppHMDA.TopPagerRow.Visible = true;
    } 
```

但是，这并没有什么不同。似乎当数据集中只有一条记录时，FormView.TopPagerRow 始终为空。似乎需要一种方法来拦截它，但我已经尝试在 OnPreRender 和 OnDataBound 事件中这样做，但仍然没有骰子。

如果有帮助，下面是我的代码示例：

**ASPX**

```
<asp:FormView ID="fvAppHMDA" runat="server" AllowPaging="True" DefaultMode="Edit" DataSourceID="dsLoanApplication" Width="100%" onpageindexchanging="fvAppHMDA_PageIndexChanging" OnDataBound="fvAppHMDA_DataBound" OnPageIndexChanged="fvAppHMDA_PageIndexChanged" OnItemCreated="fvAppHMDA_ItemCreated" DataKeyNames="ApplicationID" OnPreRender="fvAppHMDA_PreRender">
<PagerTemplate>
    <div class="tab_toolbar">
        <asp:LinkButton ID="lnkMoveFirst" runat="server" 
            ToolTip="Move to the First Application" CommandName="Page" 
            CommandArgument="First"><img src="images/icons/Icon_ArrowBackEnd.png" width="16" height="16" class="grid2" alt="Move to the First Application" /></asp:LinkButton>
        <asp:LinkButton ID="lnkMovePrevPage" runat="server" 
            ToolTip="Move to the Previous Page" CommandName="Page" 
            onclick="lnkMovePrevPage_Click" Enabled="False"><img src="images/icons/Icon_ArrowBackSkip.png" width="16" height="16" class="grid2" alt="Move to the Previous Page" /></asp:LinkButton>
        <asp:LinkButton ID="lnkMovePrevApp" runat="server" 
            ToolTip="Move to the Previous Application" CommandName="Page" 
            CommandArgument="Prev"><img src="images/icons/Icon_ArrowBack.png" width="16" height="16" class="grid2" alt="Move to the Previous Application" /></asp:LinkButton>
        <div class="grid2_container"><asp:TextBox ID="txtMoveNumber" runat="server" Text="0" Columns="5"></asp:TextBox> of <asp:Label ID="lblMoveTotal" runat="server" Text="0"></asp:Label></div>
        <asp:LinkButton ID="lnkMoveNextApp" runat="server" 
            ToolTip="Move to the Next Application" CommandName="Page" 
            CommandArgument="Next"><img src="images/icons/Icon_ArrowForward.png" width="16" height="16" class="grid2" alt="Move to the Next Application" /></asp:LinkButton>
        <asp:LinkButton ID="lnkMoveNextPage" runat="server" 
            ToolTip="Move to the Next Page" CommandName="Page" 
            onclick="lnkMoveNextPage_Click" Enabled="False"><img src="images/icons/Icon_ArrowForwardSkip.png" width="16" height="16" class="grid2" alt="Move to the Next Page" /></asp:LinkButton>
        <asp:LinkButton ID="lnkMoveLast" runat="server" 
            ToolTip="Move to the Last Application" CommandName="Page" 
            CommandArgument="Last"><img src="images/icons/Icon_ArrowForwardEnd.png" width="16" height="16" class="grid2" alt="Move to the Last Application" /></asp:LinkButton>
    </div>
</PagerTemplate>
<PagerSettings Mode="NextPreviousFirstLast" Position="Top" />
<EditItemTemplate>
    <!-- FORM CONTROLS HERE -->
</EditItemTemplate> 
```

**代码隐藏**

```
protected void fvAppHMDA_PreRender(object sender, EventArgs e)
{
if (fvAppHMDA.TopPagerRow != null)
    fvAppHMDA.TopPagerRow.Visible = true;
}

protected void fvAppHMDA_DataBound(object sender, EventArgs e)
{
if (fvAppHMDA.DataItemCount != 0)
{
    // Update Current and Total Page
    ((Label)fvAppHMDA.TopPagerRow.FindControl("lblMoveTotal")).Text = fvAppHMDA.PageCount.ToString();
    ((TextBox)fvAppHMDA.TopPagerRow.FindControl("txtMoveNumber")).Text = (fvAppHMDA.PageIndex + 1).ToString();

    // Enable/Disable Page buttons based on Current Page
    if (fvAppHMDA.PageIndex + 1 == fvAppHMDA.PageCount)
    {
        ((LinkButton)fvAppHMDA.TopPagerRow.FindControl("lnkMoveLast")).Enabled = false;
        ((LinkButton)fvAppHMDA.TopPagerRow.FindControl("lnkMoveNextApp")).Enabled = false;
    }
    else if (fvAppHMDA.PageIndex == 0)
    {
        ((LinkButton)fvAppHMDA.TopPagerRow.FindControl("lnkMoveFirst")).Enabled = false;
        ((LinkButton)fvAppHMDA.TopPagerRow.FindControl("lnkMovePrevApp")).Enabled = false;
    }

    if (fvAppHMDA.PageIndex + 10 <= fvAppHMDA.PageCount - 1)
    {
        ((LinkButton)fvAppHMDA.TopPagerRow.FindControl("lnkMoveNextPage")).Enabled = true;
    }
    if (fvAppHMDA.PageIndex - 10 > -1)
    {
        ((LinkButton)fvAppHMDA.TopPagerRow.FindControl("lnkMovePrevPage")).Enabled = true;
    }

    fvAppHMDA.TopPagerRow.Cells[0].Visible = true;
}

if (fvAppHMDA.TopPagerRow != null)
    fvAppHMDA.TopPagerRow.Visible = true;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:44:03.377

试过这个[http://forums.asp.net/t/1016811.aspx/1](http://forums.asp.net/t/1016811.aspx/1)，它对我来说很好。如果你想要一个顶级寻呼机行，我猜 HeaderTemplate 也可以。

“在我设置的 FormView 的标记中：

AllowPaging="true"

PagerSettings-Visible="false"

然后我将所有用于分页的控件放在 FormView 的 FooterTemplate 中。通过这种方式，我仍然能够处理所有的分页事件，并且即使在数据源中只返回一条记录时，“Pager Row”也始终可见。”

# c# - 如何确定 IP 地址是否可路由？

> ID：13409176
> 
> 赞同：2
> 
> 时间：2012-11-16T01:40:56.047
> 
> 标签：c#

我有一个 FTP 服务器，它为 PASV 命令返回无效的 IP 地址。Filezilla 会自动检测到这一点。如何在 C# 中验证 IP 地址以确保它是可路由的？

以下是 filezilla 在日志中的内容：命令：PASV 响应：227 进入被动模式 (10,46,169,44,21,124)。状态：服务器发送了带有不可路由地址的被动回复。改用服务器地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T02:24:29.507

为了检查私有地址（不可路由地址的最大子集），你可以这样：

```
public static bool IsPrivateAddress(this IPAddress addr)
{
    if(addr.AddressFamily == System.Net.Sockets.AddressFamily.InterNetworkV6)
    {
        return addr.IsIPv6LinkLocal || addr.IsIPv6SiteLocal;
    }
    var bytes = addr.GetAddressBytes();
    return
        ((bytes[0] == 10) ||
        ((bytes[0] == 192) && (bytes[1] == 168)) ||
        ((bytes[0] == 172) && ((bytes[1] & 0xf0)==16)));
} 
```

还有更多不可路由的地址（例如环回、多播和实验块），但您似乎不太可能看到这些。

# iphone - 带有背景图像的按钮 - iPhone 5 调整大小问题

> ID：13409178
> 
> 赞同：2
> 
> 时间：2012-11-16T01:41:15.937
> 
> 标签：iphone, xcode, uibutton, background-image, autoresize

我一直在这里和谷歌上到处寻找，但我仍然有这个我无法弄清楚的奇怪问题。我在下面有一个应用程序图片，其中有 4 个 UIButtons 应用了背景图像： ![在此处输入图像描述](../Images/209648ae72a4de2db94d275e9b870142.png)

当我在 iPhone 5 上调整大小/运行时，顶部按钮以一种非常奇怪的方式调整大小：

![在此处输入图像描述](../Images/f2636a6d318a90dfec7de4115e100eea.png)

如何让所有 UIButtons 以与 iPhone 5 相同的方式调整大小？可能吗？我需要使用不同的方法吗？

我真的希望这不是重复的，但我完全被难住了。如果我在 UIView 的其他位置更改 UIButtons，则会调整不同的 UIButtons 的大小，或者会出现奇怪的间隙间距......我不明白。谢谢你的帮助！

编辑：我在 Xcode 4.5 上使用 iOS 6。我在 iPhone 4S 和 iPhone 5 上进行测试。我检查了 AutoLayout。如果我使用 Pin（刚刚找到），我可以让 UIButton 保持其高度。

澄清我的问题。我希望 UIButtons 调整大小，使它们占据屏幕的相同百分比......我希望比例相同，而不是简单地添加一堆空白空间。我希望它更清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:39:11.663

您可以使用的功能之一称为 AutoLayout。它与 Xcode 一起提供，以便更轻松地为 4 英寸屏幕进行调整。你可以在这里找到一个很好的例子：[http ://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

但据我所知，AutoLayout 仅适用于 iOS 6，这使得它“还没有那么有用”。我一直在使用一个名为 的类`UIDevice`，其来源可以在这里找到：[https](https://github.com/erica/uidevice-extension) ://github.com/erica/uidevice-extension并检查平台类型是否为 iPhone 5。我在设置 GUI 的方法中设置了它当视图加载时。我的实现示例：

```
UIImage *backgroundImage;

if ([[UIDevice currentDevice] platformType] == UIDevice5iPhone)
{
    //I have a 4 inch screen present
    myButton.frame = CGRectMake(x, y, w, h); //Set the frame as you would like it to look on the iPhone 5

    backgroundImage = [[UIImage alloc] initWithCGImage:[UIImage imageNamed:@"main_background-568h@2x"].CGImage scale:2.0 orientation:UIImageOrientationUp];
}
else
{
    //I have a 3.5 inch screen present
    myButton.frame = CGRectMake(x, y, w, h); //Set the frame as you would like it to look on the iPhone 3, 3gs, 4, 4s...

    backgroundImage = [[UIImage imageNamed:@"main_background"] retain];
}
self.view.backgroundColor = [UIColor colorWithPatternImage:backgroundImage];
[backgroundImage release]; 
```

希望它清除一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:07:49.437

你应该首先禁用使用 AutoLayout 这个选项在“显示文件检查器”下

# c# - 如何使用 Subsonic 向数据库表中添加列？

> ID：13409179
> 
> 赞同：0
> 
> 时间：2012-11-16T01:41:16.273
> 
> 标签：c#, asp.net, visual-studio-2012, subsonic

我正在尝试向`SubSonic 2.0.3.0`用作数据库层生成器的应用程序中的数据库表添加一列。

我只是无法掌握它。我试图手动更新表的生成文件，但它不起作用。我一直在尝试重新生成亚音速文件，但找不到`sonic.exe`所需的工具？谁能帮我理解这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:05:42.907

[您可以从https://github.com/subsonic/SubSonic-2.0](https://github.com/subsonic/SubSonic-2.0)下载该项目的最新 2.0 版本，构建后 sonic.exe 将位于 SubSonic\SubCommander\bin\Debug 中。

然后我有一个小脚本文件

```
del /q "DAL\*.*"
"..\..\ExternalResources\lib\sonic.exe" generate /out "DAL"
pause 
```

这足以让你走上正轨吗？

# objective-c - 何时使用“#if __IPHONE_OS_VERSION_MIN_REQUIRED > x”？

> ID：13409188
> 
> 赞同：4
> 
> 时间：2012-11-16T01:42:21.937
> 
> 标签：objective-c, ios

[这个问题](https://stackoverflow.com/questions/820142/how-to-target-a-specific-iphone-version)解决了如何有条件地包含基于 iOS 版本的代码。但它是如何工作的？

假设我`iOS Deployment Target`在 Xcode 4.5.2 中设置为 3.2。在我的代码中，我输入了一些`#ifdef`语句：

```
#if __IPHONE_OS_VERSION_MIN_REQUIRED >= __IPHONE_4_0
  // Some iOS 4+ code
#endif 
```

如果我在 3.2 设备上运行该代码，则该代码将不存在，但如果我在 4.3 设备上运行它，它会存在，对吗？这是怎么发生的？还是我误解了这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T02:06:45.303

这是一个编译时检查，因此它将在任何 iOS 版本上创建相同的行为。由于部署目标小于 4.0，if 语句中的代码不会在任何设备上运行。

如果您想要您描述的行为，您需要进行运行时检查。您可以在链接的线程中看到如何执行此操作的示例。

# c - 为什么输出字符串显示我从未写过的数据？

> ID：13409190
> 
> 赞同：1
> 
> 时间：2012-11-16T01:42:31.990
> 
> 标签：c, output

我正在编写一个程序，通过向每个字符添加 10 来加密文件。不知何故，程序工作目录的一部分被打印到文件中，我不知道为什么。

```
#include <stdio.h>
    int main(void){
        FILE *fp;
        fp=fopen("tester.csv","r+");
        Encrypt(fp);      
        fclose(fp);
    }

    int Encrypt(FILE *fp){
        int offset=10;
        Shift(fp, offset);
    }
    int Decrypt(FILE *fp){
        int offset= -10;
        Shift(fp, offset);
    }
    int Shift(FILE *fp, int offset){
        char line[50],tmp[50], character;
        long position;
        int i;
        position = ftell(fp);
        while(fgets(line,50,fp) != NULL){
            for(i=0;i<50;i++){
                character = line[i];
                character = (offset+character)%256;
                tmp[i] = character; 
                if(character=='\n' || character == 0){break;}                
            }
            fseek(fp,position,SEEK_SET);
            fputs(tmp,fp);
            position = ftell(fp);
            fseek(stdin,0,SEEK_END);
        }
      } 
```

该文件最初读取

```
this, is, a, test
i, hope, it, works! 
```

程序运行后：

```
~rs}6*s}6*k6*~o}~
/alexio/D~6*y|u}+
k6*~o}~
/alexio/D 
```

其中 users/alexio/Desktop 是路径的一部分。这是怎么回事？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T01:49:57.967

因为您“编码”了字符串，所以它不会以空值结尾（这是你的情况），或者它甚至在字符串结尾之前包含空值（字符+偏移量 % 256 == 0）。稍后您尝试将其写为字符串，这会超出您的缓冲区，并输出您的程序参数的一部分。

使用[`fread`](http://en.cppreference.com/w/c/io/fread)和[`fwrite`](http://en.cppreference.com/w/c/io/fwrite)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T01:49:24.750

线

```
fputs(tmp,fp); 
```

写出一个可能非空终止的字符串。因此它会继续将内存复制到文件中，直到找到空值。

如果循环在换行符处中断，您需要在“tmp”的末尾添加一个空值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T01:52:10.237

一些事情：

1.  您正在对读取缓冲区中的所有 50 个字符进行编码，无论实际使用[`fgets()`](http://www.cplusplus.com/reference/clibrary/cstdio/fgets/). 回想一下，[`fgets()`](http://www.cplusplus.com/reference/clibrary/cstdio/fgets/)读取的是**一行**，而不是整个缓冲区（除非该行比缓冲区长，而你的*不是*）。行文件输入中超过字符串长度的任何内容都是堆栈垃圾。

2.  然后，您将转储所有额外的垃圾数据，并且除此之外，`tmp[]`在写入之前不终止您的字符串，`fputs()`无论如何您都不应该使用它。还有更多的堆栈垃圾。

解决方案。使用[**`fread()`**](http://www.cplusplus.com/reference/clibrary/cstdio/fread/)and[**`fwrite()`**](http://www.cplusplus.com/reference/clibrary/cstdio/fwrite/)进行这种编码。没有任何理由使用字符串函数。当您编写*解码器*时，您会感谢自己使用`fread()`和`fwrite()`

# mysql - 如果系统内存消耗变高，系统是否会移动 mysql 表（存储引擎 = 内存）进行交换？

> ID：13409192
> 
> 赞同：1
> 
> 时间：2012-11-16T01:42:36.830
> 
> 标签：mysql

对于运行存储引擎为内存的mysql表的系统......当内存被其他任务用完并且系统开始使用交换空间时，是否会每次都将mysql表从内存中取出？

# c# - 是否可以实现递归“SelectMany”？

> ID：13409194
> 
> 赞同：13
> 
> 时间：2012-11-16T01:42:43.297
> 
> 标签：c#, .net, recursion, f#

众所周知，`Enumerable.SelectMany`将一个序列序列展平为单个序列。如果我们想要一种可以递归地展平序列序列的方法怎么办？

我很快想出了一个使用 的实现`ICollection<T>`，即热切评估，但我仍然在摸索如何制作一个懒惰评估的实现，例如，使用`yield`关键字。

```
static List<T> Flatten<T>(IEnumerable list)  {
    var rv = new List<T>();
    InnerFlatten(list, rv);
    return rv;
}

static void InnerFlatten<T>(IEnumerable list, ICollection<T> acc) {
    foreach (var elem in list) {
        var collection = elem as IEnumerable;
        if (collection != null) {
            InnerFlatten(collection, acc);
        }
        else {
            acc.Add((T)elem);
        }
    }
} 
```

有任何想法吗？欢迎使用任何 .NET 语言的示例。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-16T02:11:26.383

据我了解您的想法，这是我的变体：

```
static IEnumerable<T> Flatten<T>(IEnumerable collection)
{
    foreach (var o in collection)
    {
        if (o is IEnumerable && !(o is T))
        {
            foreach (T t in Flatten<T>((IEnumerable)o))
                yield return t;
        }
        else
            yield return (T)o;
    }
} 
```

并检查它

```
List<object> s = new List<object>
    {
        "1",
        new string[] {"2","3"},
        "4",
        new object[] {new string[] {"5","6"},new string[] {"7","8"},},
    };
var fs = Flatten<string>(s);
foreach (string str in fs)
    Console.WriteLine(str);
Console.ReadLine(); 
```

显然，它确实缺少一些类型有效性检查（一个`InvalidCastExcpetion`if 集合包含 not `T`，可能还有其他一些缺点）......好吧，至少它是惰性求值的，如所愿。

`!(o is T)``string`添加以防止`char`阵列变平

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T02:52:08.833

这在具有递归序列表达式的 F# 中是微不足道的。

```
let rec flatten (items: IEnumerable) =
  seq {
    for x in items do
      match x with
      | :? 'T as v -> yield v
      | :? IEnumerable as e -> yield! flatten e
      | _ -> failwithf "Expected IEnumerable or %A" typeof<'T>
  } 
```

一个测试：

```
// forces 'T list to obj list
let (!) (l: obj list) = l
let y = ![["1";"2"];"3";[!["4";["5"];["6"]];["7"]];"8"]
let z : string list = flatten y |> Seq.toList
// val z : string list = ["1"; "2"; "3"; "4"; "5"; "6"; "7"; "8"] 
```

# php - mysql在词组中搜索关键字，按找到的大多数关键字排序

> ID：13409195
> 
> 赞同：0
> 
> 时间：2012-11-16T01:42:54.730
> 
> 标签：php, mysql, codeigniter

我有一个 mysql 表，其中包含 3 列数据，用于 FAQ 搜索，我想让用户键入他们想要回答的问题，并在表中的 3 列中搜索问题中出现在任何列中的关键字桌子。并按关键字匹配次数最多的行对结果进行排序。

我正在使用 Code Igniter 框架。目前，我的模型中有一个带有 FULLTEXT 搜索的查询：

```
$new_query = 'This is a question';
$sql = "SELECT ques_id, ques_desc FROM ec_questions WHERE MATCH (ques_desc,ques_tags,ques_answer) AGAINST (? IN BOOLEAN MODE) LIMIT 15";
$query = $this->db->query($sql, array($new_query));
return $query->result_array(); 
```

但是上面似乎并没有真正返回我想要的结果，帮助？

谢谢

“显示创建表”结果： http: [//pastebin.com/nKd1JT5n](http://pastebin.com/nKd1JT5n)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:56:47.383

我认为您不需要`IN BOOLEAN MODE`，因为这会增加对特殊修饰符`+`等的[支持](http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html)`-`http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html 。

也`implode()`不能直接在字符串上工作

`string implode ( string $glue , array $pieces )`

尝试

`$new_query = 'This is a question';`

代替

`$new_query = implode(' ', 'This is a question');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T02:02:23.747

而不是内爆，看起来你想使用爆炸： http: [//php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

修改后的代码如下所示：

```
$new_query = explode(' ', 'This is a question');
$sql = "SELECT ques_id, ques_desc FROM ec_questions WHERE MATCH (ques_desc,ques_tags,ques_answer) AGAINST (? IN BOOLEAN MODE) LIMIT 15";
$query = $this->db->query($sql, array($new_query));
return $query->result_array(); 
```

# c# - 将 LinkedList 附加到另一个 LinkedList 的末尾？

> ID：13409201
> 
> 赞同：3
> 
> 时间：2012-11-16T01:43:17.190
> 
> 标签：c#

假设我有以下内容：

```
LinkedList<int> list1 = new LinkedList<int>();
LinkedList<int> list2 = new LinkedList<int>();

list1.AddLast(1);
list1.AddLast(2);

list2.AddLast(1);
list2.AddLast(2); 
```

据我所知，您不能执行以下操作；

```
list1.AddLast(list2.First); 
```

并且除了要连接在一起的列表。

在 C# 中合并两个 LinkedLists 的正确方法是什么？我知道有一种`Union()`方法，但似乎 C++ 中 LinkedList 的优势在于，如果需要，您可以轻松地组合和拆分列表。

> LinkedList 类不支持链接、拆分、循环或其他可能使列表处于不一致状态的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T01:47:14.007

`List`如果您使用 a而不是 a ，这同样简单`LinkedList`。以下是完成整个列表的几种方法。

LINQ；

```
var combinedList = list1.Concat(list2).ToList(); 
```

我在 msdn 上找到的其他方式；

```
List<int> combinedList = new List<int>();
combinedList.AddRange(list1);
combinedList.AddRange(list2); 
```

# sql - 日期转换的 SQL 选择查询

> ID：13409202
> 
> 赞同：1
> 
> 时间：2012-11-16T01:43:17.437
> 
> 标签：sql, date, data-conversion, julian-date

一直在研究一整天，到目前为止还没有找到一个可以接受的答案，我对代码的试验也没有产生任何结果。

我有一个数据库，其中包含特定的 2 列“StartDate”和“LastBackupDate”，它们似乎将其日期信息存储为儒略日期（例如 40953.6017873071）。我需要将其转换为标准的公历日期（MM-DD-YYYY 或 DD-MM-YYYY）。

我正在从当前的“Select * FROM xxxxxx WHERE blah blah”处撤回该表的所有结果。

如果我将数据导出到工作表，我可以使用 Excel 立即转换这些日期，但是当我使用 Convert 提取数据时，我无法转换日期。

这是网页 SQL 查询的一部分。我无法发布网络代码，但我可以发布 SQL 查询：

```
SELECT * FROM ExpandedCustomerView WHERE regloginid = @0 AND (Status='A' OR Status='H')" 
```

我一直在尝试这个：

```
SELECT CONVERT(varchar(36),[STARTDATE],101)
[StartDate]
,[LastBackupDate]
FROM [CNTD_Accounts].[dbo].[ExpandedCustomerView] 
```

作为一种适当地返回它的方法。我尝试过格式化 101、110 和其他格式，看看我们是否能得到正确的结果。到目前为止，没有什么对我有用。我认为这必须相当简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:04:48.040

直接从数字转换为日期时间..

```
select cast(40953.6017873071 as datetime)
-- 
2012-02-16 14:26:34.423 
```

例如

```
cast([StartDate] as datetime) 
```

如果数据是 varchar 字段中的数字，则将其转换两次

```
cast(cast([StartDate] as float) as datetime) 
```

# c# - 在内存汇编中访问

> ID：13409204
> 
> 赞同：0
> 
> 时间：2012-11-16T01:43:38.903
> 
> 标签：c#, memory

我正在研究从序列化代码创建和动态编译内存中的程序集。是否可以转储或访问内存以访问程序集的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:11:57.580

这取决于您如何创建程序集。例如，如果您使用[CSharpCodeProvider](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)，您可以设置[CompilerParameters](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.compilerparameters.aspx)将程序集保存在内存中或文件中。或两者。然后您可以读取输出文件。

您还可以[定义一个动态程序集](http://msdn.microsoft.com/en-us/library/4xtysk39.aspx)，然后将其保存到磁盘。

无论哪种情况，您都可以使用反射（即[System.Reflection.Assembly](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.load.aspx)）访问程序集中的代码和其他信息。

# dom - Knockout.js 文本绑定 - 折叠多个空格

> ID：13409209
> 
> 赞同：2
> 
> 时间：2012-11-16T01:44:12.240
> 
> 标签：dom, knockout.js, textnode

似乎在使用 Knockout 的文本绑定时，多个空格会合并为一个。例如：

```
<textarea data-bind="value: Notes"></textarea>
<p data-bind="text: Notes"></p> 
```

函数 VM() { this.Notes = ko.observable(); }

var vm = 新的 VM();

ko.applyBindings(vm);

这是一个证明这一点的小提琴：http: [//jsfiddle.net/9rtL5/](http://jsfiddle.net/9rtL5/)

我发现在 jsfiddle 中，空间在 Firefox、Chrome 和 IE9 中被压缩。奇怪的是，虽然在我的应用程序中 IE9 不会压缩它们，但其他的却可以。

我的理解是 Knockout 使用 HTML 文本节点来呈现值。我在创建文本节点时发现了有关保留空格的相关问题：

[http://www.webdeveloper.com/forum/showthread.php?193107-RESOLVED-Insert-amp-nbsp-when-using-createTextNode%28%29](http://www.webdeveloper.com/forum/showthread.php?193107-RESOLVED-Insert-amp-nbsp-when-using-createTextNode%28%29)

Knockout 是否应该适当地处理转换空间？我真的不想为此使用自定义绑定处理程序。

实际上，我在选择中的显示文本的上下文中遇到了这个问题，并且在调试该问题时才发现它也与简单的文本绑定有关。我认为选择问题是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:10:31.747

您所观察的是正常行为。在某些元素中渲染时，空白被修剪。淘汰赛不应该进行*任何*自动替换，如果我想使用淘汰赛将字符串发送到具有前导/尾随空格的服务器，最好使用这些空格将其发送到那里。

您应该创建一个绑定处理程序以用不间断空格替换空格，以便可以以这种方式呈现。

```
ko.bindingHandlers.spacedtext = {
    replaceSpace: function (str) {
        return new Array(str.length + 1).join('\xA0');
    },
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var spacedValue = ko.computed(function () {
            var value = ko.utils.unwrapObservable(valueAccessor()),
                text = value && value.toString();
            return text && text.replace(/^\s+|\s+$/gm, ko.bindingHandlers.spacedtext.replaceSpace);
        });
        ko.applyBindingsToNode(element, { text: spacedValue });
    }
}; 
```

[演示](http://jsfiddle.net/jeff1203/fqCsg/)

# solr - 有没有办法在 Solr 中突出显示拼写检查排序规则？

> ID：13409210
> 
> 赞同：2
> 
> 时间：2012-11-16T01:44:14.063
> 
> 标签：solr, websolr

使用 Solr：

*   我能够在查询中突出显示匹配的术语
*   我能够实现拼写检查组件：您的意思是：`collation`？

是否可以在拼写检查中突出显示**更正/建议的单词？**
例如：[https](https://www.google.com/search?q=I+have+fevert) ://www.google.com/search?q=I+have+fevert 返回：我**发烧了**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T10:17:15.010

Solr 本身不支持这一点。这是您可以在客户端中处理的事情。

# android - 如何将信息纬度和经度发送到服务器连续

> ID：13409211
> 
> 赞同：1
> 
> 时间：2012-11-16T01:44:15.283
> 
> 标签：android, gps

我的应用程序获得了我所在位置的信息纬度和经度。现在，我想每隔 5 分钟将这个信息连续发送到服务器。但我不必这样做。你能帮帮我吗！！（我认为应该使用服务运行后台！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:51:39.020

看看他们专为您制作的 TimerTasks [http://developer.android.com/reference/java/util/TimerTask.html](http://developer.android.com/reference/java/util/TimerTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:24:54.737

对于基于定期时间间隔的执行，有两个类可用

*   [报警管理器](http://developer.android.com/reference/android/app/AlarmManager.html)
*   [定时器任务](http://developer.android.com/reference/java/util/TimerTask.html)

这两个都是为了在一定的时间间隔内重复执行，但是 AlarmManager 使用较少的电池。即使设备处于睡眠模式或锁定模式，AlarmManager 也可以触发动作（除了一些在锁定/睡眠模式期间不支持的 HTC 设备）

# c# - 将 DataDirectory 设置为可执行文件的位置

> ID：13409212
> 
> 赞同：0
> 
> 时间：2012-11-16T01:44:30.690
> 
> 标签：c#, sql-server-ce, executable, datadirectory

我正在开发一个使用 SQL Server CE 数据库的应用程序。对于我的产品的最终最终版本，我将把我的数据库放在一个特定的位置，但是，为了测试目的，我需要把它放在与程序的可执行文件相同的位置。问题是我的 DataDirectory 指向了它在最终版本中所在的目录。有没有办法找出可执行文件的文件位置并将 DataDirectory 设置为该位置？

**更新：**

我尝试了下面的代码，但现在它甚至不会将数据加载到 DataGridView 中。

```
string folder = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetEntryAssembly().CodeBase);
AppDomain.CurrentDomain.SetData("DataDirectory", folder); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:15:29.950

```
string folder= System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetEntryAssembly().CodeBase);
string dbPath = System.IO.Path.Combine(folder, "DbName.sdf");
string connString = "DataSource=" + dbPath; 
```

然后您可以使用`connString`打开与数据库的连接。

# java - 连接关闭时 BufferReader 仍在运行

> ID：13409213
> 
> 赞同：1
> 
> 时间：2012-11-16T01:44:54.190
> 
> 标签：java, sockets, networking

我有一个有点简单的服务器，这意味着我试图通过使服务器尽可能面向对象来学习不同的设计模式。令人惊讶的是，在我创建方法 close() 之前，我还没有遇到一个问题。

显然，当客户端关闭他与数据库的连接时，BufferReader 仍然需要输入并抛出一个 execption 说`Java.net.socketExecption`：套接字关闭

因为我有很多不同的课程，如果您需要更多信息，我只会发布目前失败的课程，请不要犹豫，给我发评论。另外，因为我想从这个项目中学习，如果你喜欢的话，请评论我的代码:)

**代码（我的所有代码）**

```
public class ServerConnectionManager {

    private static ServerSocket server;
    private static Socket connection;
    private static ServerInformation ai = new ServerInformation();
    private static boolean connected = false;
    private static final int portNumber = 7070;
    private static int backLog = 100;

    /**
     * This method launches the server (and the application)!
     * @param args
     */
    public static void main(String[] args){
        startServer();
        waitForConnection();
    }

    /**
     *This method sets the serverSocket to portNumber and also adds the backLog.
     */
    private static void startServer() {
        try {
            server = new ServerSocket(portNumber, backLog);
            connected = true;
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    /**
     * This method waits for a connection aslong as the serverSocket is connected.
     * When a new client connects it creates an Object of the connection and starts the individual procedure.
     */
    private static void waitForConnection() {
        while (connected) {
            try {
                connection = server.accept();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Connection c = new Connection(connection);
            ai.addToConnectionList(c);
            waitForConnection();
        }

    }

    public void closeMe(Socket con) {
        for (Connection conn : ai.getConnectionList()) {
            if (conn.getConnection() == con) {
                conn.close();
            }
        }
    }

} 
```

**联系**

```
public class Connection{
    private Socket connection;

    public Connection(Socket connection){
        this.connection = connection;
        ServerListner cl = new ServerListner(Connection.this);
        cl.start();
    }
    public Socket getConnection(){
        return this.connection;
    }
    public void close() {
        try {
            connection.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

**服务器监听器**

```
public class ServerListner extends Thread {

    private Socket connection;
    private BufferedReader br;
    private ChatPerson person;
    private Connection con;
    private ServerInformation ai = new ServerInformation();
    private ServerConnectionManager scm = new ServerConnectionManager();
    private ServerSender sender = new ServerSender();

    public ServerListner(Connection con){
        this.con = con;
        connection = con.getConnection();
        try {
            br = new BufferedReader(new InputStreamReader(connection.getInputStream()));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    public Socket getConnection(){
        return this.connection;
    }
    public void run(){

        while (con.getConnection().isConnected()) {
            String inString;
            try {
                while ((inString = br.readLine()) != null) {
                    processInput(inString);
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
    public void processInput(String input){
        if (input.equalsIgnoreCase("Connect")) {
            sender.sendMessageToConnection(this.connection, "Accepted");
        }
        if (input.equalsIgnoreCase("UserInformation")) {
            try {
                String username = br.readLine();
                person = new ChatPerson(username, connection);
                ai.add(person);
                System.out.println(ai.getList());

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        if (input.equalsIgnoreCase("SearchByCon")) {
            String name = ai.searchByConnection(connection);
            System.out.println(name);
        }
        if (input.equals("Disconnect")) {
            scm.closeMe(connection);
        }

    }
} 
```

** 服务器发件人**

```
public class ServerSender {
    private PrintWriter pw;
    private ServerInformation ai = new ServerInformation();

    public void addToList(){

    }
    public void sendToAll(String message){
        for (Connection c : ai.getConnectionList()) {
            try {
                pw = new PrintWriter(c.getConnection().getOutputStream());
                pw.print(message);
                pw.flush();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    }
    /** 
     *
     * @param con
     * @param message
     */

    /*
     * Note - Denne metode gør også at jeg kan hviske til folk!:)
     */
    public void sendMessageToConnection(Socket con, String message){
        try {
            PrintWriter print = new PrintWriter(con.getOutputStream());
            print.println(message);
            print.flush();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

** 服务器信息**

```
public class ServerInformation {
    private ArrayList<Connection> connectedClients = new ArrayList<Connection>();
    private ArrayList<ChatPerson> list = new ArrayList<ChatPerson>();

    public ArrayList<Connection> getConnectionList(){
        return connectedClients;
    }
    public void addToConnectionList(Connection con){
        connectedClients.add(con);
    }
    public String searchByConnection(Socket myConnection){
        for (ChatPerson p : list) {
            if (p.getConnection() == myConnection) {
                return p.getName();
            }

        }
        /*
         * If none found!
         */
        return null;
    }

    public void add(ChatPerson p){
        list.add(p);
    }

    public void removeByName(String name){
        for (ChatPerson p : list) {
            if (p.getName().equalsIgnoreCase(name)) {
                list.remove(p);     
            }
        }
    }
    public String searchList(String name){
        for (ChatPerson p : list) {
            if (p.getName().equalsIgnoreCase(name)) {
                return p.getName();
            }
        }
        return null;
    }   
    public ArrayList<ChatPerson>getList(){
        return list;
    }

} 
```

** 聊天人**

```
public class ChatPerson {
    private String chatName;
    private Socket connection;

    /*
     * This is for furture development
     * private Integer adminLevel;
     */

    public ChatPerson(String name, Socket connection){
        this.chatName = name;
        this.connection = connection;
    }
    public void setName(String name){
        this.chatName = name;

    }
    public String getName(){
        return chatName;

    }
    public String toString(){
        return "Username: "+chatName;
    }
    public Socket getConnection(){
        return connection;
    }
} 
```

我尝试了以下事情：

```
try {
            String inString;
            while ((inString = br.readLine()) != null) {
                if (inString.equalsIgnoreCase("Disconnect")) {
                    System.out.println(inString);
                    break;

                }else {
                    processInput(inString);
                }
            }
            scm.closeMe(connection); 
```

这不起作用仍然给了我同样的例外。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T06:47:13.637

```
while (con.getConnection().isConnected()) {
            String inString;
            try {
                while ((inString = br.readLine()) != null) {
                    processInput(inString);
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    } 
```

拥有这两个循环是没有意义的。`readLine()`到达 EOS 后将返回 null，此时您应该关闭套接字并退出循环。在任何情况下`isConnected()`都不会告诉您有关连接状态的任何信息，只会告诉您您调用了哪些 API，`Socket`哪个是它的端点。失去外循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T02:06:43.717

[Socket](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#close%28%2)上的文档说

> 当前在此套接字上的 I/O 操作中阻塞的任何线程都将抛出 SocketException。

您可能想要跳出您的 readline() 循环并在此之外关闭连接。

# javascript - 使用 Ember.js，我如何手动确定模板的范围并查看其对应的控制器？

> ID：13409218
> 
> 赞同：3
> 
> 时间：2012-11-16T01:45:13.840
> 
> 标签：javascript, web-applications, ember.js, handlebars.js

假设我启动了一个控制器：

```
 App.pageController = Ember.Controller.create({

         pageNumber:  '12',
    }) 
```

及其对应的视图：

```
 App.pageView = Ember.View.create({

        templateName: 'page-template',

    }).append(); 
```

现在它的模板：

```
 <script type="text/x-handlebars" data-template-name = 'page-template'>
        <div class = 'page-background'>
            page: {{ pageNumber }}
        </div>
    </script> 
```

我打算让 pageController 为 pageView 提供渲染上下文，但是我不知道如何显式提供此说明，因此不会渲染 pageNumber。

我可以通过在 pageView 中放置一个 pageNumberBinding 来解决这个问题：

```
 App.pageView = Ember.View.create({

        templateName: 'page-template',
        pageNumberBinding: 'App.pageController.pageNumber',

    }).append(); 
```

并将模板改写如下

```
 page: {{ pageNumber contextBinding="this" }} 
```

但是你会怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:55:53.283

通过`controller`在视图上设置属性，视图会将它不知道的属性转发给控制器。

因此，使用您的示例，您可以执行以下操作：

```
App.pageView = Ember.View.create({
    controller:   App.pageController,
    templateName: 'page-template',
}).append(); 
```

查看[Ember.View 的 Ember 文档](http://emberjs.com/api/classes/Ember.View)，以及[他们网站上的介绍](http://emberjs.com/documentation/)。

# swing - 在 Scala Swing 中监听 RadioButton 上的事件

> ID：13409229
> 
> 赞同：0
> 
> 时间：2012-11-16T01:46:16.887
> 
> 标签：swing, events, scala, radio-button, jradiobutton

我如何收听scala中单选按钮上的事件？我有以下代码，但由于某种原因没有执行反应。这是一个对话框，我正在寻找单选按钮选择，并相应地更改对话框窗口的标题。

```
val dirFileSelector = {
  List(
    new RadioButton("Directory"){
      name = "dir"

    },
    new RadioButton("File"){
      name = "file"
    }
  )
}

val buttonGroup = new ButtonGroup
dirFileSelector map { button=>
  listenTo(button)
  buttonGroup.buttons.add(button) 
}

contents = new BorderPanel{

  add(new BoxPanel(Orientation.Horizontal) {contents ++= dirFileSelector}, BorderPanel.Position.North)
}

reactions += {
  case SelectionChanged(buttonSelect) => {
    println("buttonSelect selection changed")
    buttonSelect.name match {
      case "dir" => title = "Add Directory"
      case "file" => title = "Add File"
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:05:24.100

据我所知，RadioButtons 不会发出 SelectionChanged 事件。然而，它们确实会发出[ButtonClicked](http://www.scala-lang.org/api/current/scala/swing/event/ButtonClicked.html)。

这是一个简单的工作示例，可以获得您想要的效果：

```
import swing._
import swing.event._

object app extends SimpleSwingApplication {
  val dirFileSelector = List(
    new RadioButton() {
      name = "dir"
      text = "Directory"

    },
    new RadioButton() {
      name = "file"
      text = "File"
    }
  )

  new ButtonGroup(dirFileSelector: _*)

  def top = new MainFrame {
    title = "Test"
    contents = new BoxPanel(Orientation.Horizontal) {
      contents ++= dirFileSelector
    }
    dirFileSelector.foreach(listenTo(_))
    reactions += {
      case ButtonClicked(button) => {
        button.name match {
          case "dir" => title = "Add Directory"
          case "file" => title = "Add File"
        }
      }
    }
  }
} 
```

# python - Windows 中线程失去焦点的 GUI

> ID：13409239
> 
> 赞同：1
> 
> 时间：2012-11-16T01:48:21.603
> 
> 标签：python, multithreading, wxpython

我正在尝试更新`textctrl`wxpython 中的 a，而一个长时间运行的线程正在查找某种信息。在用户将焦点转移到另一个窗口之前，它工作得很好，然后在返回到 wxpython 脚本时，GUI 在线程完成之前没有响应。

有没有办法返回到这个脚本并仍然看到`textctrl`动画光标的更新？

这是代码：

```
#!/usr/bin/env python
import wx
import thread
import Queue
from time import sleep

class MyFrame1 ( wx.Frame ):

        def __init__( self, parent ):
                wx.Frame.__init__ ( self, parent, id = wx.ID_ANY, title = wx.EmptyString, pos = wx.DefaultPosition, size = wx.Size( 500,300 ), style = wx.DEFAULT_FRAME_STYLE|wx.TAB_TRAVERSAL )

                self.SetSizeHintsSz( wx.DefaultSize, wx.DefaultSize )

                bSizer1 = wx.BoxSizer( wx.VERTICAL )

                self.m_panel1 = wx.Panel( self, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, wx.TAB_TRAVERSAL )
                bSizer2 = wx.BoxSizer( wx.VERTICAL )

                self.m_button1 = wx.Button( self.m_panel1, wx.ID_ANY, u"MyButton", wx.DefaultPosition, wx.DefaultSize, 0 )
                bSizer2.Add( self.m_button1, 0, wx.ALL, 5 )

                self.m_panel1.SetSizer( bSizer2 )
                self.m_panel1.Layout()
                bSizer2.Fit( self.m_panel1 )
                bSizer1.Add( self.m_panel1, 1, wx.EXPAND |wx.ALL, 5 )

                self.m_panel2 = wx.Panel( self, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, wx.TAB_TRAVERSAL )
                bSizer3 = wx.BoxSizer( wx.VERTICAL )

                self.m_textCtrl1 = wx.TextCtrl( self.m_panel2, wx.ID_ANY, wx.EmptyString, wx.DefaultPosition, wx.DefaultSize, wx.TE_MULTILINE )
                bSizer3.Add( self.m_textCtrl1, 1, wx.ALL|wx.EXPAND, 5 )

                self.m_panel2.SetSizer( bSizer3 )
                self.m_panel2.Layout()
                bSizer3.Fit( self.m_panel2 )
                bSizer1.Add( self.m_panel2, 1, wx.EXPAND |wx.ALL, 5 )

                self.SetSizer( bSizer1 )
                self.Layout()

                self.Centre( wx.BOTH )

                # Connect Events
                self.m_button1.Bind( wx.EVT_BUTTON, self.do_something )

        def __del__( self ):
                pass

        # Virtual event handlers, overide them in your derived class
        def do_something( self, event ):
                event.Skip()

class MyFrame( MyFrame1 ):
    def __init__( self, parent ):
        MyFrame1.__init__( self, parent )

    def do_something(self, event):
        self.Result = Queue.Queue()
        thread.start_new_thread(self.do_loop, ())
        self.m_textCtrl1.AppendText("searching for something... ")
        self.found= 0
        for character in self.cursor():
            self.m_textCtrl1.AppendText(character)
            self.Update()
            sleep(0.1)
            self.m_textCtrl1.Undo()
            if (self.found == 1):
                self.m_textCtrl1.AppendText('\n')
                break
        num = self.Result.get()
        print num

    def cursor(self):
        characters='.oOo'
        i = 0
        while 1:
            yield characters[i]
            i = (i + 1) % len(characters)

    def do_loop(self):
        x = 0
        while (x < 20007):
            print x
            x = x + 1
            if x == 20000:
                self.Result.put(x)
                self.found = 1
                break

class threadtest(wx.App):
    def OnInit(self):
        self.m_frame = MyFrame(None)
        self.m_frame.Show()
        self.SetTopWindow(self.m_frame)
        return True

app = threadtest(0)
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:43:56.027

这是基于匿名 Coward 评论的解决方案。我将按钮事件中的所有内容都移到了一个线程中。让我知道是否有更好的方法来做到这一点。

```
#!/usr/bin/env python
import wx
import thread
import Queue
from time import sleep

class MyFrame1 ( wx.Frame ):

        def __init__( self, parent ):
                wx.Frame.__init__ ( self, parent, id = wx.ID_ANY, title = wx.EmptyString, pos = wx.DefaultPosition, size = wx.Size( 500,300 ), style = wx.DEFAULT_FRAME_STYLE|wx.TAB_TRAVERSAL )

                self.SetSizeHintsSz( wx.DefaultSize, wx.DefaultSize )

                bSizer1 = wx.BoxSizer( wx.VERTICAL )

                self.m_panel1 = wx.Panel( self, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, wx.TAB_TRAVERSAL )
                bSizer2 = wx.BoxSizer( wx.VERTICAL )

                self.m_button1 = wx.Button( self.m_panel1, wx.ID_ANY, u"MyButton", wx.DefaultPosition, wx.DefaultSize, 0 )
                bSizer2.Add( self.m_button1, 0, wx.ALL, 5 )

                self.m_panel1.SetSizer( bSizer2 )
                self.m_panel1.Layout()
                bSizer2.Fit( self.m_panel1 )
                bSizer1.Add( self.m_panel1, 1, wx.EXPAND |wx.ALL, 5 )

                self.m_panel2 = wx.Panel( self, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, wx.TAB_TRAVERSAL )
                bSizer3 = wx.BoxSizer( wx.VERTICAL )

                self.m_textCtrl1 = wx.TextCtrl( self.m_panel2, wx.ID_ANY, wx.EmptyString, wx.DefaultPosition, wx.DefaultSize, wx.TE_MULTILINE )
                bSizer3.Add( self.m_textCtrl1, 1, wx.ALL|wx.EXPAND, 5 )

                self.m_panel2.SetSizer( bSizer3 )
                self.m_panel2.Layout()
                bSizer3.Fit( self.m_panel2 )
                bSizer1.Add( self.m_panel2, 1, wx.EXPAND |wx.ALL, 5 )

                self.SetSizer( bSizer1 )
                self.Layout()

                self.Centre( wx.BOTH )

                # Connect Events
                self.m_button1.Bind( wx.EVT_BUTTON, self.do_something )

        def __del__( self ):
                pass

        # Virtual event handlers, overide them in your derived class
        def do_something( self, event ):
                event.Skip()

class MyFrame( MyFrame1 ):
    def __init__( self, parent ):
        MyFrame1.__init__( self, parent )

    def do_something(self, event):
        thread.start_new_thread(self.do_something_thread, ())

    def do_something_thread(self):
        self.Result = Queue.Queue()
        thread.start_new_thread(self.do_loop, ())
        self.m_textCtrl1.AppendText("searching for something... ")
        self.found= 0
        for character in self.cursor():
            self.m_textCtrl1.AppendText(character)
            self.Update()
            sleep(0.1)
            self.m_textCtrl1.Undo()
            if (self.found == 1):
                self.m_textCtrl1.AppendText('\n')
                break
        num = self.Result.get()
        print num

    def cursor(self):
        characters='.oOo'
        i = 0
        while 1:
            yield characters[i]
            i = (i + 1) % len(characters)

    def do_loop(self):
        x = 0
        while (x < 20007):
            print x
            x = x + 1
            if x == 20000:
                self.Result.put(x)
                self.found = 1
                break

class threadtest(wx.App):
    def OnInit(self):
        self.m_frame = MyFrame(None)
        self.m_frame.Show()
        self.SetTopWindow(self.m_frame)
        return True

app = threadtest(0)
app.MainLoop() 
```

# xhtml - PIE.htc 不工作

> ID：13409246
> 
> 赞同：0
> 
> 时间：2012-11-16T01:48:49.730
> 
> 标签：xhtml, web.xml, css3pie

我已经在 web.xml 中映射了 mimi 类型

```
<mime-mapping>
<extension>htc</extension>
<mime-type>text/x-component</mime-type>
</mime-mapping> 
```

**我的 xhtml 文件位于** `WebContent/tasks/task/include/test.xhtml`

**我的css文件位于** `WebContent/css/test.css`

**我的 PIE.htc 文件位于** `WebContent/pie/PIE.htc`

**在我的 CSS 中，我有以下规则：**

```
 .test{
       border-radius:5px;
       position:relative;
       zoom:1;
       behavior: url(/pie/PIE.htc);
    } 
```

但 IE8 不显示圆角。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:45:02.743

好的，我修好了。我添加了完整的网址，例如*http://www.test.com/*并尝试了*../*

```
.test{
   border-radius:5px;
   position:relative;
   z-index:0;
   behavior: url(http://www.test.com/tasks/pie/PIE.htc);
} 
```

**或者**

```
.test{
   border-radius:5px;
   position:relative;
   z-index:0;
   behavior: url(../../../pie/PIE.htc);
} 
```

# sql-server - 从 VS2010 和 SQL Server 2008 调试 SQL 应用程序 - 无法在存储过程中命中断点

> ID：13409248
> 
> 赞同：3
> 
> 时间：2012-11-16T01:49:18.267
> 
> 标签：sql-server, debugging

我知道这里还有其他关于同一问题的问题，但我对任何问题的建议都没有帮助。

我正在尝试调试存储过程，以从 VB.Net 应用程序中单步执行其代码。

我可以使用 VS 2010 中的服务器资源管理器进入存储过程。但是，我不能从我的 .Net 应用程序中的代码进入存储过程。我的 .net 代码中都有断点，位于读取“ExecuteNonQuery()”的行和存储过程中的一个。当我在调试模式下运行应用程序时，存储过程中的断点显示为“当前不会命中此断点。没有为此文档加载任何符号。” 当我的断点在 .Net 代码中被命中时，执行从 ExecuteNonQuery 行直接到 .Net 代码的下一行 - 在存储过程中没有命中我的断点。

我为 .Net 项目启用了 SQL 调试。我在服务器资源管理器中为与我的数据库的数据连接启用了“启用 SQL/CLR 调试”。我的调试器附加到托管 (4.0)、本机和 T-SQL 进程（通过调试菜单中的附加到进程对话框确认）。

sql server 实例和 VS 实例都在我的本地机器上，我是它的管理员。我正在从 Cassini 运行该应用程序，它在我自己的帐户下运行。我正在运行 VS2010 V 10.0.40219.1 sp1 Rel 和 SQL Server 2008，SP 2 安装在 64 位 Win2k8 机器上。

帮助，请 - 任何人！我在这上面浪费了 2 天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-02T01:04:12.847

我知道这是一个老问题，但我想我会提供以下全面的解决方案，它可以让您调试存储过程，并且可能对其他提出这个问题的人有价值。希望你能找到有价值的步骤！

建议步骤：

1.  **运行 SQL Server Profiler**（例如，从*SQL Server Management Studio (SSMS)*中 - 选择菜单项**Tools** -> **SQL Server Profiler**）。
2.  使用 SQL Server Profiler**连接**到您的本地 SQL Server 实例。
3.  单击“*跟踪属性*”窗口中的**“运行”**按钮。
**   *注意：您应该注意 SQL Server Profiler 现在将监视本地 SQL Server 实例上的活动（例如，存储过程执行等）。**   和以前一样，在**ExecuteNonQuery()**语句上设置**断点。*****   **运行你的 .Net 代码**，它应该会到达上面提到的断点。*   在执行断点 ExecuteNonQuery() 语句之前，返回**SQL Server Profiler**并*清除跟踪*（使用**CTRL+Shift+Del**或单击**Clear Trace Window**按钮。*   现在在 VS 中**执行/跳过**ExecuteNonQuery **()**语句。*   *在**SQL Server Profiler**中，请注意现在已捕获存储过程的跟踪（以及任何参数）。**   在**SQL Server Profiler**中，只需**复制跟踪结果**（即带有参数的存储过程）。*   **在**SSMS中****打开一个新的查询窗口**。*****   确保**连接**到*本地实例数据库*并通过**Alt+F5**或菜单**Debug -> Start Debugging 开始***调试*。*****

 *******您现在应该希望能够根据需要调试您的存储过程！*******

# c++ - 双指针的问题

> ID：13409253
> 
> 赞同：3
> 
> 时间：2012-11-16T01:49:30.257
> 
> 标签：c++, pointers, segmentation-fault

当我尝试使用下面第 15 行中的指针变量 *temp 创建一个新的 Node 对象时，我遇到了分段错误。我对 c++ 以及双指针的工作方式仍然很陌生，尤其是与 & 结合使用时。谢谢你的帮助。

```
void bst::insert(int n) {
    Node **temp;
    Node *r, *parent;
    // Tree is empty
    if (root == NULL) {
        root = new Node;
        root->parent = NULL;
        root->value = n;
        root->left = NULL;
        root->right = NULL;
        root->isBlack = true;
    } else {
        r = root;
        // Create a node with the given value, n
        (*temp) = new Node;
        (*temp)->value = n;
        (*temp)->left = NULL;
        (*temp)->right = NULL;
        (*temp)->isBlack = false; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T01:51:51.310

变量`temp`未初始化。因此，尝试取消引用`temp`将失败，因为取消引用没有任何价值。如果你真的需要一个指向指针的指针，你可以只声明单指针并使用`&`运算符来获取双指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T01:52:14.937

`temp`没有指向任何有效的东西，所以当你这样做时

```
(*temp) = new Node;
(*temp)->value = n;
(*temp)->left = NULL;
(*temp)->right = NULL;
(*temp)->isBlack = false; 
```

在`else`您的 -statement 的分支中，当您取消引用指针变量`if`时，您将调用未定义的行为。`temp`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T12:20:00.020

看起来您不想在这里使用双指针（或者我更喜欢称它们为指向指针的指针）。 `temp`保存一个从未初始化过的指针的地址。因此，当您尝试创建 a 时，您会尝试使用已初始化`new Node`的任何随机数据来创建它。`temp`

你可以只使用一个普通的指针，然后如果你以后需要使它成为一个指向指针的指针，只需使用`&temp`：

```
Node * temp;

// <snip>

temp = new Node;
Node->value = n;
//  etc.

SomeFunc( &temp );  //  temp will be passed as a pointer-to-pointer (Node**). 
```

或者，如果您坚持 temp 仍然是指向指针的指针，您可以使用：

```
Node * temp2 = new Node;  // Creates a new Node and assigns the address to temp2
temp = &temp2;            // Assigns the address of the pointer to the Node (temp2) to temp.

//  Now do stuff. 
```

请记住，您需要像这样删除它：

```
delete( *temp ); 
```

# backbone.js - 使用 Jasmine 进行测试时，Backbone Collection 为空

> ID：13409256
> 
> 赞同：2
> 
> 时间：2012-11-16T01:49:56.663
> 
> 标签：backbone.js, jasmine

我刚刚开始使用 Jasmine 并尝试第一次设置一些测试。我有一个骨干系列。我想我会将我的集合作为 beforeEach() 方法的一部分，然后针对它执行测试。

我有一个测试 json 对象，我在为我的应用程序制作原型时使用了它，因此我宁愿重用该对象进行测试，而不是模拟调用。

到目前为止，这是我的代码（它失败了）。

```
describe("Vehicle collection", function() {
    beforeEach(function() {
        this.vehicleCollection = new Incentives.VehiclesCollection();
        this.vehicleCollection.url = '../../json/20121029.json';
        this.vehicleCollection.fetch();
        console.log(this.vehicleCollection);
    });

    it("should contain models", function() {
        expect(this.vehicleCollection.length).toEqual(36);
        console.log(this.vehicleCollection.length); // returns 0
    });
}); 
```

当我在 beforeEach 方法中 console.log 时——控制台看起来像这样......

```
d {length: 0, models: Array[0], _byId: Object, _byCid: Object, url: "../../json/20121029.json"} 
```

奇怪的是，当我在 Chrome 开发人员工具中展开对象（小三角形）时——我的集合完全填充了一系列车辆模型等。但我的测试仍然失败：

```
Error: Expected 0 to equal 36 
```

我想知道是否需要利用“waitsFor()”方法？

**更新（带有工作代码）**

谢谢您的帮助！

@ deven98602——你让我走上了正确的道路。最终，这个“waitsFor()”实现终于奏效了。我希望这段代码对其他人有帮助！如果这是一种糟糕的技术，请发表评论。谢谢！

```
describe("A Vehicle collection", function() {

    it("should contain models", function() {

        var result; 
        var vehicleCollection = new Incentives.VehiclesCollection();
        vehicleCollection.url = '/json/20121029.json';
        getCollection();

        waitsFor(function() {
            return result === true;
        }, "to retrive all vehicles from json", 3000);

        runs(function() {
            expect(vehicleCollection.length).toEqual(36);
        });

        function getCollection() {
            vehicleCollection.fetch({
                success : function(){
                    result = true;
                },
                error : function () {
                    result = false;
                }
            });
        }

    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:30:56.480

Just glancing at your code, it looks to me like `fetch` has not yet populated the collection when you run the expectation.

You can use the return value from `fetch` to defer the expectation until the response is received using [`waitsFor` and `runs`](https://github.com/pivotal/jasmine/wiki/Asynchronous-specs):

```
beforeEach(function() {
    this.vehicleCollection = new Incentives.VehiclesCollection();
    this.vehicleCollection.url = '../../json/20121029.json';
    var deferred = this.vehicleCollection.fetch();
    waitsFor(function() { return deferred.done() && true });
});

it("should contain models", function() {
    runs(function() {
        expect(this.vehicleCollection.length).toEqual(36);
    });
}); 
```

I haven't actually tried this can't guarantee that it will work as-is, but the solution will look something like this. See [this article](http://evanhahn.com/?p=181) for more on asynchronous testing with Jasmine.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T02:41:06.227

collection.fetch() 是异步调用，接受成功和错误回调

```
var result; 
this.collection.fetch({success : function(){
result = true;
}})

waitsFor(function() {
return response !== undefined;
}, 'must be set to true', 1000);

runs(function() {
expect(this.vehicleCollection.length).toEqual(36);
console.log(this.vehicleCollection.length); // returns 0
}); 
```

# php - 重定位域后 Drupal 会话不会破坏

> ID：13409269
> 
> 赞同：1
> 
> 时间：2012-11-16T01:52:49.403
> 
> 标签：php, apache, session, subdomain

我们有一个过时的基于typo3 的站点，想要一个基于Drupal7 的新站点，所以我们在同一个服务器上创建了它。

**mydomain.org**在***home/mydomain.org/public/***上，所以我们在 /home/newmysite/mydomain.org/public/ 中创建了一个新的，***以***new.mydomain.org**作为**子域地址。

一旦我们准备好运行新的 drupal 站点，我们要求我们的主机将*new.mydomain.org*更改为*mydomain.org。* 更改完成后，drupal 显示：

> 警告：ini_set()：会话处于活动状态。此时您无法在 drupal_environment_initialize() 中更改会话模块的 ini 设置（/home/newmysite/mydomain.org/public/includes/bootstrap.inc 的第 707 行）。

我无法在 drupal 中以管理员身份启动会话或运行不同的脚本，如[tinyshell](http://sourceforge.net/projects/tiny-shell/?source=recommended)或[phpshell](http://phpshell.sourceforge.net/)，因为它们需要创建会话

我改变了drupal的settings.php：

```
ini_set('session.gc_maxlifetime', 0); 
ini_set('session.cookie_lifetime', 0); 
```

（当前返回默认值导致不起作用）

我还用 session_destroy(); 做了一个脚本。没啥事儿。

信息：

```
htaccess: php_flag session.auto_start   off

phpinfo(): session.auto_start = off 
```

# android - Android：如何知道按钮是否被按住

> ID：13409271
> 
> 赞同：6
> 
> 时间：2012-11-16T01:53:07.950
> 
> 标签：android, button, user-interface, callback

我在 Android 上玩游戏，我有一个函数 MoveCharacter (int direction) 可以在按下按钮时移动动画精灵

例如，当用户按下我有这个代码：

```
 mControls.UpButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                mLevel.mCharAnimation.FrameUp();
            }           
        }); 
```

但是，只要用户按住按钮，我希望能够继续移动角色。令人惊讶的是，我还没有发现如何在 Android 中做到这一点。是否有某种 onButtonDownLister？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-16T01:54:54.400

您需要使用[OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)对向下、向上和其他状态执行单独的操作。

```
mControls.UpButton.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch(event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            // Do something
            return true;
        case MotionEvent.ACTION_UP:
            // No longer down
            return true;
        }
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-18T21:32:24.880

正如 Gary Bak 的评论中提到的，您还想检测用户是否也将手指拖到按钮外。

```
mButton.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch(event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                // Pressed down
                return true;
            case MotionEvent.ACTION_UP:
                // Released
                return true;
            case MotionEvent.ACTION_CANCEL:
                // Released - Dragged finger outside
                return true;
        }
        return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T01:55:16.953

你想要[onTouchListener()](http://developer.android.com/reference/android/view/View.OnTouchListener.html)。基本上，这将允许您查看对象何时被触摸，查看用户如何移动手指，并知道何时松开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T01:57:35.483

您可以`OnTouchListener`改用

```
mControls.UpButton.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {

                switch (event.getAction() & MotionEvent.ACTION_MASK) {
                case MotionEvent.ACTION_DOWN:
                    mLevel.mCharAnimation.FrameUp();
                    break;
                case MotionEvent.ACTION_UP:
                    // User released the button, do your stuff here
                    break;
                }
                return false;

            }           
        }); 
```

# java - 绘制图形太慢

> ID：13409279
> 
> 赞同：3
> 
> 时间：2012-11-16T01:54:04.557
> 
> 标签：java, swing, graphics, bufferedimage, paintcomponent

所以，我有这个项目，你可以在里面画图。我希望人们能够在它上面画画，但是一开始我使用的时候它太慢了`repaint()`所以我使用了这个`repaint(Rectangle r)`工具。它更好，但仍然不是我想要的速度。这是代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;

public class DrawingPad extends JPanel implements MouseListener,MouseMotionListener,ListSelectionListener{
public Color[][] picture = new Color[601][601];
public Color selected;
public String action;
public Maker m;
private static final long serialVersionUID = 1L;
public DrawingPad(Maker m){
    this.m = m;
    this.setPreferredSize(new Dimension(600,600));
    this.setVisible(true);
    for (int x = 1;x<=600;x++){
        for (int y = 1; y<=600;y++){
            picture[x][y]=Color.WHITE;
        }
    }
}
public void addColor(int x, int y){
    try{
        picture[x][y]=selected;
        repaint(new Rectangle(x,y,x,y));
    }catch (Exception e){

    }
}
@Override
public void paintComponent(Graphics g){
    super.paintComponent(g);
    g.clearRect(0, 0, 600, 600);
    for (int x = 1;x<=600;x++){
        for (int y = 1; y<=600;y++){
            g.setColor(picture[x][y]);
            g.drawLine(x, y, x, y);
        }
    }
}
@Override
public void mouseClicked(MouseEvent arg0) {
    // TODO Auto-generated method stub

}
@Override
public void mouseEntered(MouseEvent arg0) {
    // TODO Auto-generated method stub

}
@Override
public void mouseExited(MouseEvent arg0) {
    // TODO Auto-generated method stub

}
@Override
public void mousePressed(MouseEvent arg0) {
    // TODO Auto-generated method stub

}
@Override
public void mouseReleased(MouseEvent arg0) {
    // TODO Auto-generated method stub

}
@Override
public void mouseDragged(MouseEvent e) {
    for (int x = -1;x<=1;x++){
        for (int y = -1;y<=1;y++){
            this.addColor(e.getX()+x, e.getY()+y);
        }   
    }
}
@Override
public void mouseMoved(MouseEvent arg0) {
    // TODO Auto-generated method stub

}
@Override
public void valueChanged(ListSelectionEvent e) {
    if (e.getSource()==m.seeit){
        selected = m.colors[m.seeit.getSelectedIndex()];
    }else{
        action=(String) m.actions.getSelectedValue();
    }

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T01:56:40.943

您可能想研究绘制不会更改为 BufferedImage 的内容，然后在 paintComponent 方法中将该 BufferedImage 显示为背景图像。

例如，请查看[此链接](https://stackoverflow.com/a/10055021/522444)以及[此](https://stackoverflow.com/a/6105437/522444)链接。

# php - 数据库信息到 Facebook 页面选项卡？XML 和 cURL

> ID：13409280
> 
> 赞同：2
> 
> 时间：2012-11-16T01:54:40.577
> 
> 标签：php, mysql, xml, facebook, curl

我正在尝试创建一个简单的 Facebook 页面选项卡，用于从我的数据库中检索当前信息。我很快了解到跨站点脚本不起作用，因为实际网站上的工作演示效果很好，但在 heroku 上没有产生任何结果。

这是我现在在heroku中的内容。如何让 curl 在返回结果之前处理页面？

```
<?php
$curl = curl_init();
curl_setopt ($curl, CURLOPT_URL, 'http://www.url.com/output.html');

$result = curl_exec ($curl);
curl_close ($curl);

print $result;
?> 
```

这是创建位于我的网络服务器上的格式化 XML 的页面：

```
<?php
require_once('connectDB.php');
$xslt_file = "xmlstyle.xsl";

mysql_select_db($database_DB, $db);

$query = sprintf("SELECT * from db");
$result = mysql_query($query, $db) or die(mysql_error());

header("Content-type: text/xml");
$XML = "<?xml version=\"1.0\"?>\n";
if ($xslt_file) $XML .= "<?xml-stylesheet href=\"$xslt_file\" type=\"text/xsl\" ?>";

// root node
$XML .= "<result>\n";
// rows
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {    
  $XML .= "\t<row>\n"; 
  $i = 0;
  // cells
  foreach ($row as $cell) {
    // Escaping illegal characters - not tested actually ;)
    $cell = str_replace("&", "&amp;", $cell);
    $cell = str_replace("<", "&lt;", $cell);
    $cell = str_replace(">", "&gt;", $cell);
    $cell = str_replace("\"", "&quot;", $cell);
    $col_name = mysql_field_name($result,$i);
    // creates the "<tag>contents</tag>" representing the column
    $XML .= "\t\t<" . $col_name . ">" . $cell . "</" . $col_name . ">\n";
    $i++;
  }
  $XML .= "\t</row>\n"; 
 }
$XML .= "</result>\n";
// output the whole XML string
echo $XML;
?> 
```

我确信我已经把整个事情复杂化了，但尝试让它发挥作用还是有点令人愉快的。如果有更简单的方法来获得相同的结果，我会全力以赴。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:41:28.987

使用 RETURNTRANSFER 选项：

```
//Set curl to return the page instead of sending it to the browser
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); 
```

**参考**

*   [卷曲手册页](http://curl.haxx.se/docs/manpage.html)
*   [PHP卷曲绑定](http://php.net/manual/en/book.curl.php)

# visual-studio-2010 - vs.net 2010 的团队资源管理器连接到 tfs 2012

> ID：13409282
> 
> 赞同：1
> 
> 时间：2012-11-16T01:54:58.323
> 
> 标签：visual-studio-2010

我需要一个 vs.net 2010 的团队资源管理器来连接到 tfs 2012。有这样的事情吗？如果是的话我在哪里可以下载这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T01:11:05.690

如果您有 Visual Studio 2010 SP1，则不需要任何其他组件即可连接到 TF Server 2012，它将本机连接。

如果您要连接到 TF 服务，那么您将需要正向兼容性 GDR，它增加了对通过 Microsoft ID（Was Live ID）进行身份验证的支持。

# objective-c - 为数组中的每个项目添加单独的 UIImageViews

> ID：13409283
> 
> 赞同：0
> 
> 时间：2012-11-16T01:55:03.363
> 
> 标签：objective-c, ios, uiimageview, nsarray

我正在尝试为数组中的每个项目添加一个单独的 UiImageView 这是我到目前为止所拥有的

```
_shapeArray = [NSArray arrayWithObjects:@"cloud.png",@"star.png", nil];

    for (int i = 0; i < [_shapeArray count]; i++){
        // I make a UIImage, which I will draw later
        UIImage* image = [UIImage imageNamed:[NSString stringWithFormat:@"%@",[_shapeArray objectAtIndex:i]]];

        UIImageView* blockView = [[UIImageView alloc] initWithImage:image];

        blockView.frame = CGRectMake(arc4random()%320, arc4random()%460, image.size.width, image.size.height);

        [self.view addSubview:blockView];

    } 
```

但正如你所知道的，它只是添加了数组中的最后一个图像。我想不出一种方法可以将数组对象编号添加到 UIImageView 的名称中。也许我走错了路，如果是这样，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:40:05.983

此代码有效，但您需要确保以下几点：
- 文件名确实存在于您的包中（检查大写/小写），如果没有，您不会收到错误消息，但它会不显示图片
- 图片尺寸不要太大，不要互相覆盖

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T03:38:41.040

您正在同一帧中添加图像。

```
 blockView.frame = CGRectMake(arc4random()%320+SomeXValue, arc4random()%460+SomeYvalue, image.size.width, image.size.height); 
```

# c# - 通过普通旧 C# 类中的线程方法访问表单组件

> ID：13409287
> 
> 赞同：0
> 
> 时间：2012-11-16T01:55:37.670
> 
> 标签：c#, c#-4.0

在回答这个问题之前，让我提供一点背景知识。首先 MyMainForm 开始做两件事，它初始化一个名为 Form2 的表单，然后调用另一个类中的一个方法，将该方法传递一个 Form2 的实例作为参数。这可以从下图中看出。然后该方法`RunInThread`在新线程中运行不同的方法。现在我想知道的是如何通过 RunInThread 方法更改 form2 上的文本框上的数据。图片也解释了我的场景。我尝试为更改文本框中文本的方法创建一个委托，并且该委托位于 Form2 类中，但是您似乎无法从 RunInThread 方法调用该委托。关于如何通过 RunInThread 方法更改 Form2 文本框中的文本的任何建议。

![在此处输入图像描述](../Images/9249b6a4f725858c96ec6e75a629057e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:21:03.270

在方法内部，RunInThread(Form2 frm_) 执行如下操作：

```
frm_.BeginInvoke( new System.Windows.Forms.MethodInvoker( () => 
   { 
      frm_.myTextBox.Text = "Hey this updated!!"; 
   })); 
```

这将导致通过创建 frm_ 的 Windows 窗体 GUI 线程调用 myTextBox.Text 属性设置器。

# python - Flask-MySQL - 命令不同步

> ID：13409289
> 
> 赞同：0
> 
> 时间：2012-11-16T01:55:44.047
> 
> 标签：python, mysql, flask

我在使用光标从 mysql 中读取数据并通过烧瓶通过 HTTP 显示数据时遇到问题。每次我运行这段代码：

```
import os
from flask import Flask, request, session, url_for, redirect, \
     render_template, abort, g, flash, _app_ctx_stack
from flaskext.mysql import MySQL
from contextlib import closing
from hashlib import md5
from datetime import datetime
import time
import os
from werkzeug import check_password_hash, generate_password_hash
import config

app = Flask(__name__)
mysql = MySQL()

app.config['MYSQL_DATABASE_HOST'] = config.MYSQL_DATABASE_HOST
app.config['MYSQL_DATABASE_PORT'] = config.MYSQL_DATABASE_PORT
app.config['MYSQL_DATABASE_USER'] = config.MYSQL_DATABASE_USER
app.config['MYSQL_DATABASE_PASSWORD'] = config.MYSQL_DATABASE_PASSWORD
app.config['MYSQL_DATABASE_DB'] = config.MYSQL_DATABASE_DB

mysql.init_app(app)

if 'SECRET_KEY' in os.environ:
    app.config['SECRET_KEY'] = os.environ['SECRET_KEY']
else:
    app.config['SECRET_KEY'] = os.urandom(24)

###
# Routing for your application.
###

def init_db():
    with closing(connect_db()) as db:
        with app.open_resource('init.sql') as f:
            db.cursor().execute(f.read())
        db.commit()

def connect_db():
    return mysql.connect()

 if __name__ == '__main__':
    init_db()
    app.run(debug=True) 
```

我得到这个结果：

```
(venv)λ fh → λ git master* → python app.py                                              
Exception _mysql_exceptions.ProgrammingError: (2014, "Commands out of sync; you can't ru
n this command now") in <bound method Cursor.__del__ of <MySQLdb.cursors.Cursor object a
t 0x10bc3ddd0>> ignored                                                                 
Traceback (most recent call last):                                                      
  File "app.py", line 124, in <module>                                                  
    init_db()                                                                           
  File "app.py", line 38, in init_db                                                    
    db.commit()                                                                         
_mysql_exceptions.ProgrammingError: (2014, "Commands out of sync; you can't run this com
mand now") 
```

有任何想法吗？我是烧瓶的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:15:29.317

似乎您需要在尝试执行数据库操作*之前*启动应用程序，因为您正在通过 Flask 访问数据库。我没有使用 Flask 的经验，所以我不确定在启动服务器后如何访问数据库，但如果你不知道，我可以看看。基本上，

```
init_db()
app.run(debug=True) 
```

需要反转为

```
app.run(debug=True)
init_db() 
```

某种程度上来说。

# mysql - 限制表中的最大记录/行数

> ID：13409290
> 
> 赞同：0
> 
> 时间：2012-11-16T01:55:44.433
> 
> 标签：mysql, sql, schema

我可以限制表中的记录数吗？

因此，如果我们达到最大数量，MySQL 将不允许插入新记录。

是否有一些功能或技术来实现这一点？

谢谢。

# plsql - PL/SQL 将行转换为分组列

> ID：13409299
> 
> 赞同：2
> 
> 时间：2012-11-16T01:56:10.440
> 
> 标签：plsql

我不确定如何表达这个问题，但我正在尝试将行值转换为 PL/SQL 中的列。我不是新手，但我只是不知道如何去做。我有下表数据：

姓名责任

* * *

Joe Sales
史蒂夫销售
Paul Exec
Pete 经理
John Exec
Roger Sec
Scott Exec

我需要创建一个查询，该查询将返回并显示如下数据：

销售经理 Exec Sec

* * *

乔·皮特约翰·罗杰
史蒂夫·努尔斯科特·努尔
····················································································································································

我面临的问题是行数据无论如何都彼此无关。这甚至可以做到吗？

我感谢任何人可以提供的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:11:18.327

[首先，如果您将来给我们您的数据库版本会更好。例如，如果您有 Oracle 11g，即使它不是您想要的，您也可以使用PIVOT](http://www.oracle.com/technetwork/articles/sql/11g-pivot-097235.html)做类似的事情

```
with pivot_data as (select rownum as no,emp_name,job_name from (
select 'Joe' as emp_name,'Sales' as job_name from dual union all
select 'Steve','Sales'    from dual union all
select 'Paul','Exec'     from dual union all
select 'Pete','Manager'  from dual union all
select 'John','Exec'     from dual union all
select 'Roger','Sec'      from dual union all
select 'Scott','Exec'     from dual))
select "'Sales'" as Sales,"'Exec'" as Exec,"'Sec'" as Sec,"'Manager'" as Manager
from pivot_data
pivot(max(emp_name) for job_name in ('Sales','Exec','Sec','Manager'))

SALES    EXEC    SEC    MANAGER
-------------------------------
                Roger    
        Scott        
        John        
Joe            
Steve            
        Paul        
                        Pete 
```

或者，如果这对您来说还不够，那么这个 PL/SQL 可以满足您的需求。我在 11g 上对其进行了测试，并且我相当肯定它可以与 10g 和 9i 一起使用，但我不能保证 DB2 或 PostGre 的任何内容：

```
declare
    cursor C1 is 
    select 'Joe' as emp_name,'Sales' as job_name from dual union all
    select 'Steve','Sales'    from dual union all
    select 'Paul','Exec'     from dual union all
    select 'Pete','Manager'  from dual union all
    select 'John','Exec'     from dual union all
    select 'Roger','Sec'      from dual union all
    select 'Scott','Exec'     from dual;
    varray_sales dbms_sql.varchar2_table;
    varray_exec dbms_sql.varchar2_table;
    varray_manager dbms_sql.varchar2_table;
    varray_sec dbms_sql.varchar2_table;
    i_sales number := 0;
    i_exec number := 0;
    i_manager number := 0;
    i_sec number := 0;
    n_line_aextr number;
    colwidth number := 30;
    line varchar2(120);
    function max_de_deux (i number,x number) return number is
    begin
        return case when i > x then i else x end;
    end;
begin
    dbms_output.enable(120);
    for l1 in c1 loop
        if L1.job_name = 'Sales' then
            i_sales := i_sales+1;
            varray_sales(i_sales) := L1.emp_name; 
        elsif L1.job_name = 'Exec' then
            i_exec := i_exec+1;
            varray_exec(i_exec) := L1.emp_name;
        elsif L1.job_name = 'Manager' then
            i_Manager := i_Manager+1;
            varray_manager(i_Manager) := L1.emp_name;
        elsif L1.job_name = 'Sec' then
            i_sec := i_sec+1;
            varray_sec(i_sec) := L1.emp_name;
        end if;
    end loop;
    dbms_output.put_line(rpad('Sales',colwidth,' ')||rpad('Exec',colwidth,' ')||rpad('Manager',colwidth,' ')
                              ||rpad('Sec',colwidth,' '));
    dbms_output.put_line(rpad('-',colwidth,'-')||rpad('-',colwidth,'-')||rpad('-',colwidth,'-')
                              ||rpad('-',colwidth,'-'));
    n_line_aextr := max_de_deux(i_manager,max_de_deux(i_sec,max_de_deux(i_sales,i_exec)));

    for l in 1..n_line_aextr loop
        line := '';
        if l <= i_sales then
            line := line || rpad(varray_sales(l),colwidth,' ');
        else 
            line := line || rpad(' ',colwidth,' ');
        end if;
        if l <= i_exec then
            line := line || rpad(varray_exec(l),colwidth,' ');
        else 
            line := line || rpad(' ',colwidth,' ');
        end if;
        if l <= i_manager then
            line := line || rpad(varray_manager(l),colwidth,' ');
        else 
            line := line || rpad(' ',colwidth,' ');
        end if;
        if l <= i_sec then
            line := line || rpad(varray_sec(l),colwidth,' ');
        else 
            line := line || rpad(' ',colwidth,' ');
        end if;
        dbms_output.put_line(line);
    end loop;                                  

end;

Sales          Exec           Manager        Sec            
------------------------------------------------------------
Joe            Paul           Pete           Roger          
Steve          John                                         
               Scott 
```

# css - 表达式引擎模块中的自定义 CSS

> ID：13409300
> 
> 赞同：4
> 
> 时间：2012-11-16T01:56:13.873
> 
> 标签：css, module, expressionengine, add-on, controlpanel

我正在开发一个表达式引擎模块，并希望在控制面板中为我的模块提供一些自定义 CSS。我真的不想使用主题和 override.css 文件。我还想分离 CSS 并且不想将它放在 '$this->EE->cp->add_to_head()' 调用中。是否可以将它放在我的模块文件夹中的文件中，例如视图和 js 文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T04:20:52.117

是的。将其放入**/third_party/my_module/css/my_styles.css**，然后在您的视图文件调用中：

```
$this->EE->cp->load_package_css('my_styles'); 
```

# vim - ViM：通过 bufdo 在多个缓冲区中定义语法区域

> ID：13409302
> 
> 赞同：1
> 
> 时间：2012-11-16T01:56:36.060
> 
> 标签：vim

如果我在三个不同的缓冲区上单独执行命令`syn region Region1 matchgroup=Highlight1 start=+(+ end=+)+`，则语法区域 Region1 会在所有三个缓冲区中正确定义。

但是，如果我通过 bufdo 执行它，就像`bufdo syn region Region1 matchgroup=Highlight1 start=+(+ end=+)+`最后一个缓冲区上缺少语法区域一样。

我想在所有活动缓冲区中定义这个区域，但我不明白为什么 bufdo 会失败。有人可以帮忙吗？

谢谢！

# python - 如何读取服务器上的 AFNetworkings 授权标头？

> ID：13409306
> 
> 赞同：0
> 
> 时间：2012-11-16T01:56:53.423
> 
> 标签：python, objective-c, ios, security, afnetworking

我正在尝试使用 AFNetworking 设置的 Authorization 标头在我的 Python 服务器上进行身份验证。在我发出请求之前，我将我的 AFNetworking 客户端设置为：

```
// global.globalAFHTTPClient is my AFclient in this case
[global.globalAFHTTPClient setAuthorizationHeaderWithUsername:global.userEmail
password:global.password]; 
```

在服务器上，我可以像这样访问标头：

```
self.request.headers['Authorization'] 
```

那么我的问题是，在服务器上，我如何从 Authorization 标头中提取用户名和密码？我需要先解码 Base64 编码吗？我是否将标题视为字典？

这是正确的方法吗？

```
authorizationHeader = self.request.headers['Authorization']
username = authorizationHeader['username']
password = authorizationHeader['password'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:07:09.567

您需要先对其进行解码。在您的示例中，您只需要解码“KG51bGwpOihndWxsKQ==”。这应该解码为格式为“用户名：密码”的字符串。

可能有一些库可以为您执行此操作，但这取决于您的服务器堆栈。

# javascript - 强制 Internet Explorer 9 在解析页面时执行 javascript？

> ID：13409313
> 
> 赞同：3
> 
> 时间：2012-11-16T01:57:31.423
> 
> 标签：javascript, internet-explorer-9, responsive-design

**背景**

我正在为我使用的 CMS 开发响应式图像插件，并且我选择使用立即 set-cookie 方法来告诉服务器用户屏幕的尺寸。

对于那些不熟悉这一点的人，这意味着您在文档顶部的 javascript 中设置了一个 cookie，因此当浏览器继续解析文档的其余部分时，它会发送您的 cookie 以及它发送的任何图像请求。

这适用于大多数浏览器，除了 IE9。对此流行的解释似乎是 IE9 在完成文档解析之前实际上并没有设置 cookie，这似乎是非常奇怪的行为。我已经完成了自己的测试，得出的结论是 cookie 不仅仅是一些特殊的例外，它实际上是 IE9 处理 javascript 的方式 - IE9 似乎在完成对文档的解析之前不会执行任何 javascript。

不幸的是，它在执行内联 JS 之前发送了所有对外部资源的请求。

**问题**

有没有办法强制 IE9（和其他表现出这种行为的浏览器）在文档仍在被解析时执行 javascript？

**编辑**

所以我开始取得进展，这可能与 IE9 javascript 引擎有关 - 它进行后台编译。我想它会等到它得到所有的 javascript 后再编译它。我想知道是否有一个鲜为人知的 IE 脚本标签属性可以切换特定块的行为。要去打猎，有什么发现我会告诉大家的。

**编辑 2**

似乎我对 IE9 使用 javascript 的方式的假设并不完全正确。这是科学界将其描述为“甚至没有错”的不幸情况之一！因此，我提出的问题不再有用，因为它依赖于一些错误的假设。但是，我将在下面发布我用于测试的修改后的代码：

**测试.php**

```
<?php
file_put_contents("log.txt", "\r\n\r\nTestResStart\r\n", FILE_APPEND);
?>
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <img src="image.php?q=1" />
    <script type="text/javascript">
        document.write('<img src="image.php?q=4-js" />');
        alert("HALT!");
        document.write('<img src="image.php?q=5-js" />');
    </script>
    <img src="image.php?q=2" />
    <img src="image.php?q=3" />
</body>
</html> 
```

**图像.php**

```
<?php
session_start();
file_put_contents("log.txt", "image".$_GET['q']."\r\n", FILE_APPEND);
$rImg = ImageCreate(300,50);
$cor = imagecolorallocate($rImg, 225, 225, 225);
$cor = imagecolorallocate($rImg, 0, 0, 0);
imagestring($rImg,2,0,0,$_GET['q'],$cor);
header('Content-type: image/jpeg');
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");
imagejpeg($rImg,NULL,100); 
```

运行 test.php 将通过 html 和 document.write 加载图像。image.php 将按照收到的顺序记录这些请求。您会注意到，即使显示警报，请求也会继续通过 - 因此警报不会停止执行（尽管大多数其他浏览器表现出类似的行为）。回到广场 1！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:09:36.793

将脚本标签写入文档`document.write()`可能会解决您的问题。

这可能看起来很奇怪，但我注意到这样做会导致 DOM 在每个脚本之后实际呈现到屏幕上（否则情况并非如此，如果您尝试在加载过程中为进度条设置动画，则非常烦人）

如果它们具有相同的原因，它也可以解决您的 cookie 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:25:59.393

您可以延迟 DOM 的构建。走“模板方式”：

1) 将 html 代码放入`<script type="text/template" id="someID"></script>`. 这将导致浏览器具有非 javascript 类型的脚本节点。这将导致浏览器简单地忽略其内容，但您可以通过获取脚本节点的 innerHTML 来访问它。

2) 在页面加载并设置好之后，您可以附加一个 document.ready 事件处理程序来执行您的 DOM 的实际构建。至此，解析和初始渲染已经完成，所以我希望 IE 现在已经设置了 cookie。如果没有，则在 setTimout(fn,1); 中触发 DOM 的构建；

3）做类似的事情：

```
var content = document.getElementById('someID');
var container = document.getElementById('containerID'); // This could be an empty DIV right next to the <script> tag. 
container.innerHTML = content.innerHTML; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:24:26.167

所以，要回答这个问题已经变成的问题；

**当你设置它们时，你如何让 IE9 尊重你设置的 cookie？**

答案是特征检测。我们可以检测（使用老式元标记）浏览器是否支持即时 cookie 设置，如果不支持，我们会尽快重新加载页面（在我们浪费太多时间之前）。

编码

```
<script type="text/javascript">
    var c ='resolution='+Math.max(screen.width,screen.height)+("devicePixelRatio" in window ? ","+devicePixelRatio : ",1");
    var cSet = new RegExp(c);

    //If cookies are enabled and our cookie isn't set
    if(navigator.cookieEnabled && !cSet.test(document.cookie))
    {
        //Set the cookie via a meta tag
        document.write('<me'+'ta http-equiv="Set-Cookie" content="'+c+'; path=/" />');

        //If it hasn't been parsed yet
        if(!cSet.test(document.cookie))
        {
            //Reload the page
            document.location.reload();
        }
    }
</script> 
```

在我的博客上还有一个更完整、更杂乱的解决方案：

[http://iain-fraser.com/2012/11/cookie-based-responsive-images-that-work-in-ie9/](http://iain-fraser.com/2012/11/cookie-based-responsive-images-that-work-in-ie9/)

我会在周末之后更新这篇文章——我只需要在它还新鲜的时候把它全部写下来。当然，如果我进一步开发它，我会相应地更新它。

# xcode - 如何从 SVN 下载 Xcode 项目？

> ID：13409317
> 
> 赞同：0
> 
> 时间：2012-11-16T01:58:16.903
> 
> 标签：xcode, svn

我已获得对存储库的 SVN 访问权限，该存储库的形式为`svn://xxx/repo-name/trunk`

如何将源代码下载到本地硬盘上？

我尝试在 Mac 上使用以下命令使用终端：

`#svn checkout svn://xxx:portnumber/repo-name/trunk`

这似乎没有帮助。

我还尝试使用 Xcode 中的 Organizer 来设置存储库，但没有成功。

另外：如果项目被下载，它是否保存在我硬盘的根目录中？

# bison - 为 bison 和 flex 编译问题

> ID：13409320
> 
> 赞同：1
> 
> 时间：2012-11-16T01:58:43.627
> 
> 标签：bison, flex-lexer

我是这个 flex 和 bison 的新手，我有一个小问题。一旦我得到了我的 lex.yy.c 文件和我的 tab.c 文件，当我编译 lex.yy.c 文件时，我得到了错误：

```
stojk_2.l: In function ‘int yylex()’:
stojk_2.l:3: error: ‘PLUS’ was not declared in this scope
stojk_2.l:4: error: ‘MINUS’ was not declared in this scope
stojk_2.l:5: error: ‘MULT’ was not declared in this scope
stojk_2.l:6: error: ‘DIVIDE’ was not declared in this scope
stojk_2.l:8: error: ‘LPAREN’ was not declared in this scope
stojk_2.l:9: error: ‘RPAREN’ was not declared in this scope
stojk_2.l:12: error: ‘yylval’ was not declared in this scope
stojk_2.l:13: error: ‘UNSIGNEDINTEGER’ was not declared in this scope 
```

当我编译 tab.c 文件时，我得到了这些错误：

```
stojk_3.y: In function ‘void yyerror(char*)’:
stojk_3.y:12: error: ‘print’ was not declared in this scope
stojk_3.tab.c: At global scope:
stojk_3.tab.c:1056: error: redefinition of ‘double yylval’
stojk_3.y:8: error: ‘double yylval’ previously declared here
stojk_3.tab.c: In function ‘int yyparse()’:
stojk_3.tab.c:1253: error: ‘yylex’ was not declared in this scope
stojk_3.tab.c:1401: warning: deprecated conversion from string constant to ‘char*’
stojk_3.tab.c:1547: warning: deprecated conversion from string constant to ‘char*’ 
```

似乎他们看不到对方，但我把它们放在同一个文件夹中，所以我不知道我应该做什么......任何帮助将不胜感激......

感谢大家的帮助，但仍然试图弄清楚，但这是我的代码：

stojk_2.l

```
%%

"+"            {return PLUS;}
"-"            {return MINUS;}
"*"            {return MULT;}
"/"            {return DIVIDE;}

"("            {return LPAREN;}
")"            {return RPAREN;}

[0-9]+     {
            sscanf(yytext,  "%lf", &yylval);
        return UNSIGNEDINTEGER;
            }

[ \t]      {  }
[\n]       {return yytext[0];}

.          {return yytext[0];}

%%

int yywrap()
{
        return 0;
} 
```

stojk_3.y

```
%{
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

#define YYSTYPE double

YYSTYPE yylval;

void yyerror(char *s)
{
        print("yyerror: %s\n", s);
}

%}

%token PLUS
%token MINUS
%token MULT
%token DIVIDE

%token LPAREN
%token RPAREN

%token UNSIGNEDINTEGER

%left PLUS MINUS
%left MULT DIVIDE

%%

lines     :         lines expr   '\n'         {printf("%g\n", $2);}
          |         lines '\n'
          |         /*empty*/
          ;

expr      :          expr PLUS  expr           {$$  =  $1  +  $3;}  
          |          expr MINUS  expr           {$$  =  $1  -  $3;} 
          |          expr MULT  expr           {$$  =  $1  *  $3;} 
          |          expr DIVIDE  expr           {$$  =  $1  /  $3;} 
          |          LPAREN  expr  RPAREN        {$$ =  $2;}
          |          UNSIGNEDINTEGER
          ;

%%

#include  "lex.yy.c"

int yylex();
int yyparse(void);

int main()
{
return yyparse();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:42:44.413

第一组错误看起来像您`#include`在 .l 文件中的 .tab.h 文件失败。第二组错误看起来像是您的 .y 文件有问题，但如果不查看 .y 文件就很难准确判断是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:42:36.210

您需要从中生成`bison`定义常量的标头。您需要在词法分析器中包含该标题。

```
bison -d stojk_3.y    # generates stojk_3.tab.c and stojk_3.tab.h 
```

因此，您需要将其包含`stojk_3.tab.h`在 Flex 代码中。

该`print()`函数可能是`printf()`;的拼写错误。它当然不是标准功能。

的多重定义`yylval`很可能是因为您定义了它但不需要（Bison 为您这样做）。您可能需要`extern int yylex(void);`在代码中声明或等效。转换投诉意味着您将文字字符串传递给采用 a 的函数`char *`（但字符串在形式上是不可修改的，因此应声明并定义该函数以采用 a`const char *`代替）。

如果没有看到更多代码，很难更具体。

* * *

### 使用提供的代码

正如预测的那样，问题`print()`是 的错字。`printf()`应该有一个强有力的论据`fprintf(stderr, ...)`；错误应该去`stderr`而不是`stdout`。

你不需要定义`yylval`; 注释掉那一行。

我`int yylex(void);`在语法文件的顶部（在该`%{ ... %}`部分中）声明了。

我做`yyerror()`了一个静态函数。我得到了两个警告：

```
gcc -O3 -g -std=c99 -Wall -Wextra -Wstrict-prototypes stojk_3.tab.c -o stojk_3.tab
In file included from stojk_3.y:50:0:
lex.yy.c:1112:17: warning: ‘yyunput’ defined but not used [-Wunused-function]
lex.yy.c:1153:16: warning: ‘input’ defined but not used [-Wunused-function] 
```

### 固定代码

```
%{
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

#define YYSTYPE double

int yylex(void);

static
void yyerror(char *s)
{
        printf("yyerror: %s\n", s);
}

%}

%token PLUS
%token MINUS
%token MULT
%token DIVIDE

%token LPAREN
%token RPAREN

%token UNSIGNEDINTEGER

%left PLUS MINUS
%left MULT DIVIDE

%%

lines     :         lines expr   '\n'         {printf("%g\n", $2);}
          |         lines '\n'
          |         /*empty*/
          ;

expr      :          expr PLUS  expr           {$$  =  $1  +  $3;}  
          |          expr MINUS  expr           {$$  =  $1  -  $3;} 
          |          expr MULT  expr           {$$  =  $1  *  $3;} 
          |          expr DIVIDE  expr           {$$  =  $1  /  $3;} 
          |          LPAREN  expr  RPAREN        {$$ =  $2;}
          |          UNSIGNEDINTEGER
          ;

%%

#include  "lex.yy.c"

int yylex(void);
int yyparse(void);

int main(void)
{
    return yyparse();
} 
```

我没有收到关于非常量字符指针的警告；我不确定那里有什么问题。

# javascript - 尝试使用 GreaseMonkey 提交表单，但页面停止工作

> ID：13409322
> 
> 赞同：1
> 
> 时间：2012-11-16T01:58:59.830
> 
> 标签：javascript, forms, submit, greasemonkey

我需要在特定页面上提交表单，并且需要在提交表单之前单击单选按钮。

我让一切正常，但是当我让 GreaseMonkey 提交表单时，页面只返回一个白页。如果我要手动单击提交，它会说“请稍等……”然后转到另一个页面。

如果需要，我可以给你我正在谈论的表格的 URL。

这是我正在使用的脚本：

```
$(document).ready(function() {
    $("input[pmmethod=paypal]").click();
$(".submit-button").click();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:22:12.340

听起来按钮上附加了一个事件处理程序，您可以尝试使用本机 JavaScript 而不是 jQuery 方法来模拟鼠标单击它；

```
function simulateClick(node) {
    var ev = document.createEvent("MouseEvents");
    ev.initMouseEvent("click", true, false, self, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
    return node.dispatchEvent(ev);
}

$(document).ready(function() {
    $("input[pmmethod=paypal]").click();
simulateClick( $(".submit-button")[0] );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:17:03.763

我知道你想要什么...

我已经更改了原始脚本，现在它可以工作了！

[http://userscripts.org/scripts/show/153026](http://userscripts.org/scripts/show/153026)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T02:05:36.747

要使用 JavaScript 提交表单，请使用`submit()`如下方式：

```
$(document).ready(function() {
    $("input[pmmethod=paypal]").click();
    $("#orderform").submit();
}); 
```

# python - 如何在使用 write() 时追加到文件的新行？

> ID：13409324
> 
> 赞同：1
> 
> 时间：2012-11-16T01:59:05.047
> 
> 标签：python, python-3.x

在 Python 中：假设我有一个循环，在每个循环中我生成一个具有以下格式的列表： ['n1','n2','n3'] 在每个循环之后，我想写入附加生成的条目到一个文件（其中包含之前循环的所有输出）。我怎样才能做到这一点？

另外，有没有办法制作一个列表，其条目是这个循环的输出？即 [[],[],[]] 其中每个内部 []=['n1','n2','n3] 等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T02:19:18.663

## 将单个列表作为一行写入文件

当然，您可以在将其转换为字符串后将其写入文件中：

```
with open('some_file.dat', 'w') as f:
    for x in xrange(10):  # assume 10 cycles
        line = []
        # ... (here is your code, appending data to line) ...
        f.write('%r\n' % line)  # here you write representation to separate line 
```

## 一次写入所有行

当涉及到问题的第二部分时：

> 另外，有没有办法制作一个列表，其条目是这个循环的输出？即`[[],[],[]]`每个内部`[]`=`['n1','n2','n3']`等

它也很基本。假设您想一次保存所有内容，只需编写：

```
lines = []  # container for a list of lines
for x in xrange(10):  # assume 10 cycles
    line = []
    # ... (here is your code, appending data to line) ...
    lines.append('%r\n' % line)  # here you add line to the list of lines
# here "lines" is your list of cycle results
with open('some_file.dat', 'w') as f:
    f.writelines(lines) 
```

## 将列表写入文件的更好方法

根据您的需要，您可能应该使用一种更专业的格式，而不仅仅是文本文件。您可以使用例如，而不是编写列表表示（可以，但不理想）。`csv`模块（类似于 Excel 的电子表格）：[http ://docs.python.org/3.3/library/csv.html](http://docs.python.org/3.3/library/csv.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T02:20:21.000

**f=open(file,'a')** 第一个参数是文件的路径，第二个是模式，'a' 是追加，'w' 是写入，'r' 是读取，依此类推，我认为，你可以使用**f.write(list+'\n')**循环写一行，否则你可以使用**f.writelines(list)**，它也起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T02:28:46.780

Hope this can help you:

```
lVals = []
with open(filename, 'a') as f:
    for x,y,z in zip(range(10), range(5, 15), range(10, 20)):
        lVals.append([x,y,z])
        f.write(str(lVals[-1])) 
```

# java - 在 Java 中无法匹配正则表达式

> ID：13409325
> 
> 赞同：4
> 
> 时间：2012-11-16T01:59:07.027
> 
> 标签：java, regex

这是我要获取数据的字符串的格式/示例：

```
<span style='display:block;margin-bottom:3px;'><a style='margin:4px;color:#B82933;font-size:120%' href='/cartelera/pelicula/18312'>Español  </a></span><br><span style='display:block;margin-bottom:3px;'><a style='margin:4px;color:#FBEBC4;font-size:120%' href='/cartelera/pelicula/18313'>Subtitulada  </a></span><br>          </div> 
```

这是我使用的正则表达式：

```
"pelicula/([0-9]*)'>([\\w\\s]*)</a>" 
```

[我在RegexPlanet](http://www.regexplanet.com/advanced/java/index.html)中测试了这个正则表达式，结果很好，它给了我预期的结果：

```
group(1) = 18313
group(2) = Subtitulada 
```

但是当我尝试在 Java 中实现该正则表达式时，它不会匹配任何东西。这是代码：

```
Pattern pattern = Pattern.compile("pelicula/([0-9]*)'>([\\w\\s]*)</a>");              
            Matcher matcher = pattern.matcher(inputLine);            
            while(matcher.find()){
                    version = matcher.group(2);
                }
            } 
```

有什么问题？如果正则表达式已经过测试，并且在相同的代码中，我会搜索更多模式，但我遇到了两个问题（我在这里只向您展示一个）。先感谢您！

****_***编辑****_* _****

 **我发现了问题......如果我检查页面的源代码，它会显示所有内容，但是当我尝试从 Java 中使用它时，它会获得另一个源代码。为什么？因为这个页面需要你的城市，所以它可以显示关于那个的信息。我不知道是否有解决方法来实际访问我想要的信息，但就是这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:49:46.510

您的正则表达式是正确的，但似乎`\w`不匹配`ñ`。

我将正则表达式更改为

`"pelicula/([0-9]*)'>(.*?)</a>"`

它似乎与这两种情况都匹配。在这里，我使用了不情愿的`*?`运算符来防止`.*`匹配从 first`<a>`到 last之间的所有字符`<\a>` 看看[`Greedy` 和 `Reluctant` 正则表达式量词有什么区别？](https://stackoverflow.com/questions/1139171/when-it-comes-to-regex-what-is-the-difference-between-greedy-and-reluctant)解释。

@Bohemian 正确地指出，`Pattern.DOTALL`如果文本中`<a>`有换行符，您可能还需要启用该标志

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T02:08:26.520

如果您的输入超过几行（即它包含换行符），您需要打开“点匹配换行符”。

有两种方法可以做到这一点：

在您的正则表达式中使用“点匹配换行符”正则表达式开关`(?s)`：

```
Pattern pattern = Pattern.compile("(?s)pelicula/([0-9]*)'>([\\w\\s]*)</a>"); 
```

或[`Pattern.DOTALL`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#DOTALL)在调用中使用标志[`Pattern.compile()`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#compile%28java.lang.String,%20int%29)：

```
Pattern pattern = Pattern.compile("pelicula/([0-9]*)'>([\\w\\s]*)</a>", Pattern.DOTALL); 
```**

# iphone - 重新创建 UIViewcontroller 的视图时，如何强制旋转？

> ID：13409327
> 
> 赞同：0
> 
> 时间：2012-11-16T01:59:28.690
> 
> 标签：iphone, ios, cocoa-touch

我有一个我正在重复使用的视图控制器（出于内存限制的原因。）所以，我没有推送一个新的 UIViewController，而是设置了一些参数，然后强制这个 VC 重新加载它的视图。代码是这样的（由通知​​回调触发）：

```
- (void) reloadView: (NSNotification*) note
{
    // Save parameters for reloaded view
    UIWindow *window = (UIWindow*) self.view.superview;
    //CGAffineTransform xfrm = self.view.transform;  // Doesn't do what I want.

    // Trash this one & reload the view
    [self.view removeFromSuperview];
    self.view = nil;

    // force view reload
    if (self.view == nil)
    {
        NSLog(@"%s ***** Why didn't self.view reload?!", __PRETTY_FUNCTION__);
    }
    else
    {
        // restore params
        //self.view.transform = xfrm;  // Boo-hoo!
        [window addSubview: self.view];
    }
} 
```

一切正常，***除了***应用程序仅是横向的，并且新重新加载的视图作为纵向添加到窗口中。

我尝试将旧视图的变换强制到新视图上，但奇怪的是，它给出了旋转但有一个愚蠢的平移偏移。

有没有办法告诉 UIViewController “做你的旋转，现在”......？

***编辑：***

我添加了这个相当愚蠢的技巧：

```
 // restore params
    self.view.transform = xfrm;
    self.view.center = CGPointMake(window.bounds.size.width / 2., window.bounds.size.height / 2.);
    [window addSubview: self.view]; 
```

这给出了预期的结果，但我对在我的代码库中有这样的东西真的很不满意。当然有更好的方法来做到这一点？！？！

谢谢！

***编辑：***

在与 JPH 讨论后，答案竟然是“不要那样做”。请参阅评论以了解一些细节和发生的重新设计。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T02:57:56.660

你的问题是在使用这个：

```
[window addSubview: self.view]; 
```

从文档中：

> 如果您通过以下方式将其他视图控制器的 UIView 属性添加到 UIWindow（与主视图控制器处于同一级别）：
> 
> [myWindow addSubview:anotherController.view];
> 
> 这个额外的视图控制器不会接收旋转事件，也永远不会旋转。只有添加到 UIWindow 的第一个视图控制器会旋转。

[https://developer.apple.com/library/ios/#qa/qa2010/qa1688.html](https://developer.apple.com/library/ios/#qa/qa2010/qa1688.html)

我更喜欢带有根视图控制器的设计，并且子视图被添加到根视图控制器的视图中。

另一种选择是不终止视图并重新添加它，而是更新该视图中需要更新的所有内容。我不确定我是否理解您为什么要终止视图并立即重新添加它。

# eclipse - Eclipse：scala工作表中的“输出超出截止限制”

> ID：13409328
> 
> 赞同：3
> 
> 时间：2012-11-16T01:59:32.760
> 
> 标签：eclipse, scala

如何增加 Eclipse 中的输出行数，以便在 scala 工作表中不再收到此消息：

```
Output exceeds cutoff limit. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T02:03:52.817

在 Eclipse 首选项中有一个菜单项`Scala Worksheet`

该选项是唯一的选项`Maximum number of output characters to be shown after evaluation`。将此设置为高于默认值。

虽然这不是行数，但它是唯一的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T19:27:51.333

我遇到了同样的问题并找到了这个答案。在尝试中，我发现在当前版本的 Eclipse/Scala Preferences 中有一个 Scala Worksheet 菜单项，可让您设置每个语句在截止前输出的字符数。

# java - Spring Framework中回调方法与Bean后处理器的区别

> ID：13409332
> 
> 赞同：1
> 
> 时间：2012-11-16T01:59:57.030
> 
> 标签：java, spring, jakarta-ee, javabeans

请原谅这个春季初学者的问题。我正在阅读第一版的第 4 章，并介绍了回调方法和 Bean 后处理器。

现在我只是对这两者感到困惑，似乎他们都在做某事。创建bean实例时，如何区分两者？也许一个例子会很好？

我个人的理解是，如果我们必须找到差异，那么在实际创建bean时启动回调方法，在创建bean后稍微调用Bean后处理器？另外，我认为差异也可能是初始化回调方法只关注一个bean，而Beanpost procsso将一个一个地处理所有bean实例？

另外，任何人都可以通过将 JSR250 注释 @PreDestroy 和 @PostConstruct 与上述两个概念进行比较和对比来帮助我进一步解释差异吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T02:27:13.657

我已经有一段时间没有使用其中任何一个了，但我认为您所指的回调方法和@PostConstruct 方法是同一回事。但要回答你的问题，区别......

1) @PostConstruct（或 afterPropertiesSet）方法是特定类的内部方法，将在实例化 bean 后调用。这确实是您放置特定类型操作的地方。

2) BeanPostProcessor 将触及所有 Spring bean。所以这里是你可以放置横切功能的地方，不一定是特定于类的。

一个小例子……假设我有一个小型地址簿应用程序，用于跟踪我的朋友和他们的地址。如果我有一些我无法追踪的疯狂错误，我可能会使用 BeanPostProcessor 用一些日志记录来包装我的所有 Spring bean，例如“现在调用 Address.getStreet()...，现在调用 Address.getCity()。 ……”。

现在我可以在 Address 中使用 @PostConstruct 方法来验证和查找针对某些 Web 服务的邮政编码，以查找我只有城市/州的地址。

现在，我可能实际上并没有我的一个域对象在现实中访问 Web 服务，但这个想法是为了说明 @PostConstruct 可以处理特定于类的东西，而 BeanPostProcessor 可以处理跨越多个类的东西。

另外值得注意的是，BeanPostProcessor 有两个方法可以覆盖：postProcessBeforeInitialization 和 postProcessAfterInitialization，这将让您决定在 bean 的 @PostConstruct 方法之前和之后运行什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-04T05:02:09.820

Bean 后处理器接口有两个回调方法： 1\. **PostProcessBeforeInitialization**和**PostProcessAfterInitialization**。 **PostProcessBeforeInitialization**方法在调用 bean 的 init-method 或 afterPropertySet 方法之前被调用。

**PostProcessAfterInitialization**方法只是在 bean 初始化完成后调用。

Bean Post Processors 提供了在 bean 初始化之前和之后做某事的机会。

# javascript - 将变量传递给 PHP 文件

> ID：13409337
> 
> 赞同：0
> 
> 时间：2012-11-16T02:00:57.583
> 
> 标签：javascript

所以我不太确定我是否能够以一种有人能够帮助我的方式来解释这一点，但它是这样的：

当我调用函数 getFishing() 时，我希望它获取“用户名”元素并将其放入名为 get_name 的 var 中，然后我希望它将该变量发送到 XML_Fishing.php 文件，然后在 mysql 中使用然后将查询解析为 XML 数据，然后由 fishingUrl() 函数重新读取。现在的问题是它没有将 get_name 变量传递给 XML_Fishing.php 文件。谁能从下面的代码中看出原因？我没有给出整个fishingUrl函数，因为它与变量的传递无关。在从 XML 数据返回数据之后，这只是函数的其余部分。

```
 function getFishing(){
    var get_name = escape(document.getElementById("username").innerHTML);
    var name = "XML_Fishing.php?username=" + get_name;
    fishingUrl(name, "XML_Fishing.php", function(data) {
              ............
              ............
              ............
              }

function fishingUrl(name, url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:05:59.367

`name`未传递给 AJAX 请求 - 尝试更改

```
fishingUrl(name, "XML_Fishing.php", function(data) 
```

至

```
fishingUrl(name, name , function(data) 
```

这将使第一个参数变得多余 - 除非它在回调函数中使用。

这将`$_GET['username']`在 PHP 脚本中设置为`get_name`来自 Javascript的值

# javascript - XPages：不允许单选组中的相同值

> ID：13409338
> 
> 赞同：1
> 
> 时间：2012-11-16T02:01:15.160
> 
> 标签：javascript, xpages, lotus-domino

我在 xPage 上有一组 6 个无线电组，每个组都有一个值 1-6 的列表。我正在寻找一种允许用户只选择每个数字一次的方法。用户将无法为 radioGroup1 和 radioGroup2 选择数字 1。

我正在努力想出一个好的方法来做到这一点。

我想到的两种方法是在 js 中构建一个数组，将数组用于 radioGroup 中的值，然后删除从数组中选取的值并对其他 radioGroup 进行部分刷新。

如果在另一个 radioGroup 中检测到重复值，则第二种方法是简单地擦除 radioGroup 的值。

我想我可以做一个验证器来比较提交的值。

关于在 xPages 中解决此问题的最佳方法有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:51:09.117

我建议采用双重方法：

1.  客户端：向单选按钮添加一个 onChange 侦听器。当值更改时，您可以通过按钮运行并禁用（灰显）其他单选组中的相同数字。这对用户来说既快又好，因为 UI 不会“跳舞”。你需要一个“拣货”订单。例如，左列（如果按列组织）总是可以覆盖右列。您还需要在禁用单选按钮之前最终清除它
2.  在服务器端有一个验证器（一个被所有人调用的函数），它会仔细检查——以防有人试图用 Firebug 欺骗你

额外的想法：
单选按钮不适合这种类型的 UI（它们作为支持数据存储很好）。使用基于单选按钮状态的背景图形覆盖它们，例如复选标记、空方块（用于可选）或灰色 X（用于禁用）。将制作一个很棒的自定义控件。

# .net - 系统消息 dll 丢失？

> ID：13409342
> 
> 赞同：2
> 
> 时间：2012-11-16T02:01:38.320
> 
> 标签：.net, msmq, messaging, gac

我正在使用 MSMQ 并且有一个可以在一台机器上运行的程序，但是当我尝试将/构建到另一台安装了 .NET SP1 的机器上时。它找不到 System.Messaging.DLL。在工作机器上，它使用来自

> C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\v3.5

## 该文件夹存在于客户端计算机上，但没有消息传递 DLL——我没有子文件夹 Client。如何确保我的客户拥有 System.Messaging。这是 SP1 版本吗？使困惑。我想如果它在 GAC 中，无论如何都可以找到它。

发现这个..似乎相关。“客户档案”？ [http://nlog-project.org/2010/03/04/support-for-net-framework-4-client-profile-in-nlog-2-0.html](http://nlog-project.org/2010/03/04/support-for-net-framework-4-client-profile-in-nlog-2-0.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T02:17:35.693

我的路径略有不同（使用 .NET 3.5 Client Profile 创建了一个项目）：

```
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v3.5\Profile\Client\System.Messaging.dll 
```

因此，即使您使用的是客户端配置文件，您仍然可以使用 System.Messaging.dll。如果您想确保程序集在那里，您始终可以将 Copy Local 标记为 True，并且程序集将在构建时复制到您的 bin 文件夹中。

# c++ - qt 信号未定义参考错误

> ID：13409343
> 
> 赞同：21
> 
> 时间：2012-11-16T02:01:57.540
> 
> 标签：c++, qt, signals-slots, qt-signals

我有一个类服务器，我为其创建了一个信号连接（QString 名称）。我在一个名为 join(QString name) 的函数中调用它，但是我得到了错误

> Server.o: 在函数`Server::join(QString)': Server.cpp:(.text+0x48): undefined reference to` Server::joined(QString)' collect2: ld 返回 1 退出状态

这是我的头文件的样子：

```
#ifndef SERVER_H
#define SERVER_H

#include <QString>
#include <mqueue.h>
#include <QVector>
#include <QStringList>
#include "../src/messages.h"

class Server
{
public:
    Server();
    void start();
private:
    void join(QString name);
    char buf[MSG_SIZE], msgSend[MSG_SIZE];
    QVector<mqd_t> mq_external;
    QVector<QString> users;
    mqd_t mq_central;
    struct mq_attr attr;

signals:
    void joined(QString name);

};

#endif // SERVER_H 
```

这是我的 cpp 文件：

```
#include "Server.h"

using namespace std;

Server::Server()
{
}

void Server::start(){

    attr.mq_maxmsg = 100;
    attr.mq_msgsize = MSG_SIZE;
    attr.mq_flags = 0;

    mq_unlink(CENTRALBOX);
    mq_central = mq_open(CENTRALBOX, O_RDONLY | O_CREAT, S_IRWXU, &attr);
    while(1)
    {
        int tempMsgVal = mq_receive(mq_central, buf, MSG_SIZE, 0);
        if(tempMsgVal != -1){
            QString tempS = buf;
            QStringList tempSL = tempS.split(":");
            if(tempSL.size() == 2 && tempSL.at(0) == "started")
            {
                int x = 0;
                bool exists = false;
                for(int i = 0; i < mq_external.size(); i++)
                {
                    x = QString::compare(tempSL[1], users.at(i), Qt::CaseInsensitive);
                    if(x == 0)
                    {
                        exists = true;
                        break;
                    }
                }

                if(!exists)
                {
                    sprintf(buf,"joined");
                    QString tempS1 = tempSL[1] + "new";
                    QByteArray byteArray = tempS1.toUtf8();
                    const char* tempr = byteArray.constData();
                    mqd_t tempMQ = mq_open(tempr, O_RDWR);
                    int tempI = mq_send(tempMQ, buf, strlen(buf), 0);
                }
                else
                {
                    sprintf(buf,"invalidname");
                    QString tempS1 = tempSL[1] + "new";
                    QByteArray byteArray = tempS1.toUtf8();
                    const char* tempr = byteArray.constData();
                    mqd_t tempMQ = mq_open(tempr, O_RDWR);
                    int tempI = mq_send(tempMQ, buf, strlen(buf), 0);
                }//Endelse
            }//Endif
        }//Endif

    }//Endwhile
}

void Server::join(QString name)
{
    emit joined(name);
} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-16T02:15:38.070

在你的类声明的开头你应该有宏`Q_OBJECT`并且一定要从一些`QObject`后代继承。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-08-19T07:05:46.013

除了[此答案](https://stackoverflow.com/a/13409423)中提到的任何内容外，还请确保：

```
click 'Build' option > Run 'qmake' 
```

这也应该解决未决的错误。

# delphi - Delphi (DataSnap) 我需要验证线程吗？

> ID：13409344
> 
> 赞同：1
> 
> 时间：2012-11-16T02:02:16.040
> 
> 标签：delphi, datasnap

我很好奇如何处理这个问题；我目前有一个带有 TDSAuthenticationManager 类管理身份验证的 DataSnap 服务器设置。

如果身份验证失败，我可以直接在 TMemo 或类似的表单上写入以进行日志记录吗？观察这一点的最佳方法是什么？

我需要穿线吗？

为阅读干杯，阿德里安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T05:22:59.100

Yes, you need synchronization, since Datasnap events run in the context of different threads, and as you may know, the UI programming is limited to the main thread.

So, if you want to display something in the UI, you have to take care of how to do it.

On the other hand, if you want to *log* to a file, you don't need synchronization, but you have to be careful, since it is possible for two different threads to try to log at the same time.

The options I would evaluate are:

*   Protect the access to the log file using a Critical Section, thus avoiding the multi-thread access with a lock. Only one thread can access the file at a time and all other interested threads have to wait.
*   Create a new logging class, from which a global instance that can take *log requests* by simply adding the log message to a (multi thread capable) queue in memory, and running it's own thread writing them to a file when there are messages in the queue.

Since servers tend to run as a services in production environments, I would choose the latter.

# c# - C# 匹配 IIS 和 Oracle Server 日志循环

> ID：13409348
> 
> 赞同：2
> 
> 时间：2012-11-16T02:02:31.340
> 
> 标签：c#, oracle, iis

对于过去 6 周左右正在学习 c# 的人，我有一个有点困难的问题。

我有两个逗号分隔的文件，我将它们流式传输到一个数组中。第一个有一个列 d:m:yh:m:s。我需要将它与第二个文本文件匹配，逗号分隔，我需要将第二个文件中的 d:m:yh:m:s 匹配到第一个文件。唯一的问题是，秒必须与相同的秒或秒 + 1 匹配，我需要将该行打印到第三个文件。

例如我可以有：

```
File 1           File 2
d:m:y h:m:s      d:m:y h:m:s,UUID - 1
d:m:y h:m:s      d:m:y h:m:s+1,UUID - 2
d:m:y h:m:s      d:m:y h:m:s+1,UUID - 3 
```

此外，UUID 在 1:1 关系中必须是唯一的。文件 1 是 IIS 服务器日志。文件 2 是 Oracle 服务器日志。

最终目标是匹配到服务器日志之间的时间差，以找出哪些进程花费的时间太长。

这有意义吗？代码如下。

```
private void btnRun_Click(object sender, EventArgs e)
{
    // open server file
    StreamReader readServerFile = new StreamReader(strServerFile);
    readServerFile.ReadLine();

    // open message file
    StreamReader readMessageLog = new StreamReader(strMessageLog);
    readMessageLog.ReadLine();

    // write line to file - false does not append
    StreamWriter writer = new StreamWriter(strSavedLog, true);
    string strHeader = "Ast Timestamp,Method,Service,IP Address,Time Taken, Time Taken(s),Log Filename,UUID,Request Created,Request Type,Response Created,Result Description,Sender,Time Span,Resp-Req(s)";
    writer.WriteLine(strHeader);

    // loop through server file and copy to save log
    foreach (string strServerLine in File.ReadLines(strServerFile))
    {
        string[] ServerLogWord = strServerLine.Split(',');

        if (ServerLogWord[0] != "Ast Timestamp")
        {
            // extract - server log "Ast Timestamp" convert to date
            string strServerLogAstTimestamp = ServerLogWord[0];
            string AstServerLogTimestamp = strServerLogAstTimestamp.ToString();

            DateTime ServerFileLogDateTime = DateTime.ParseExact(AstServerLogTimestamp, "dd/MM/yyyy hh:mm:ss tt", null);

            // convert time taken in MS to Sec
            int timeTaken = Convert.ToInt32(ServerLogWord[4]);
            int timeTakenSeconds = timeTaken / 1000;

            // loop through message file
            foreach (string strMessageLine in File.ReadLines(strMessageLog))
            {
                string[] MessageLogWord = strMessageLine.Split(',');

                if (MessageLogWord[0] != "ID")
                {
                    // extract - message log - "requestcreated" convert to date
                    string strMessageLogRequestCreated = MessageLogWord[2];
                    string AstMessageLogRequestCreated = strMessageLogRequestCreated.ToString();
                    DateTime MessageLogDateTimeRequestCreated = Convert.ToDateTime(AstMessageLogRequestCreated);

                    // extract - message log - "responsecreated" convert to date
                    string strMessageLogResponseCreated = MessageLogWord[5];
                    string AstMessageLogResponseCreated = strMessageLogResponseCreated.ToString();
                    DateTime MessageLogDateTimeResponseCreated = Convert.ToDateTime(AstMessageLogResponseCreated);

                    // time calculations
                    // calculate timespan
                    TimeSpan ts = MessageLogDateTimeResponseCreated.Subtract(ServerFileLogDateTime);
                    // ***** Change x to modify the time range, must add + or -:  -----  'AddSeconds(x)'
                    DateTime desiredTime = ServerFileLogDateTime.AddSeconds(1);

                    // calculate the time  
                    TimeSpan respReqTimeTaken = MessageLogDateTimeResponseCreated.Subtract(MessageLogDateTimeRequestCreated);

                    // if timestamps match
                    if (MessageLogDateTimeResponseCreated == ServerFileLogDateTime && MessageLogDateTimeRequestCreated <= desiredTime)
                    {
                       if (ServerFileLogDateTime)
                       {
                          string SavedLog = string.Join(",", AstServerLogTimestamp, ServerLogWord[1], ServerLogWord[2], ServerLogWord[3], ServerLogWord[4], timeTakenSeconds, ServerLogWord[5], MessageLogWord[1], AstMessageLogRequestCreated, MessageLogWord[3], AstMessageLogResponseCreated, MessageLogWord[7], MessageLogWord[9], ts, respReqTimeTaken);
                          // write line to save log
                          writer.WriteLine(SavedLog);
                       }
                    }
                }
            }
        }
    }
    writer.Close();
    MessageBox.Show("Complete");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:47:17.330

IIS 日志中有一个名为“time-taken”的列，定义为“操作所花费的时间长度，以毫秒为单位。”。通过检查此列的值，您可以知道每个请求需要多长时间。

请检查此链接[W3C 扩展日志文件格式 (IIS 6.0)](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/676400bc-8969-4aa7-851a-9319490a9bbb.mspx?mfr=true)

也可以试试 LogParser，它是检查 IIS 日志的好工具。

您的解决方案很有创意，但我认为这不是理想的方法。

# javafx - 当列排序处于活动状态时，JavaFX TableView 在 ObservableList 中插入

> ID：13409350
> 
> 赞同：4
> 
> 时间：2012-11-16T02:03:25.933
> 
> 标签：javafx

我有一个 JavaFX TableView 定义为：

```
TableView<MyMessage> messages; 
```

它由 ObservableList 支持：

```
private ObservableList<MyMessage> messagesList;

// Allocate the message list
messagesList = FXCollections.observableArrayList();

// Set the list into place
messages.setItems( messagesList ); 
```

**MyMessage**对象有 10 个字符串类型的字段。有一个将**MyMessage**对象插入 ObservableList 的后台操作。

```
messages.add( new MyMessage( String ... colData ) ); 
```

一切都像宣传的那样工作。TableView 的表行随着对象插入 ObservableList 而更新。

似乎没有按预期工作的是，如果我单击列标题对表格进行排序，后台线程插入的后续项目将附加到表格的末尾。不是正确排序的行位置。如果我单击以重新排序该列，则该表将被正确地重新排序。

每次向 ObservableList 添加内容时，是否需要强制重新排序表格？或者 TableView 应该为我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-17T20:42:15.883

Java FX 8 现在在 tableView 上有一个[.sort()](http://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/TableView.html#sort--)方法，可以调用它来重新触发排序。某些操作会自动触发重新排序，但在可观察集合中添加/删除条目的外部事件不会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T05:29:58.527

> TableView 是否应该为我解决这个问题

不。

有一个要求[TableView 在基础列表更改时保持排序顺序，](http://javafx-jira.kenai.com/browse/RT-19445)但它被关闭为“不是问题”。您可以查看有关该问题的评论以获取更多详细信息。简而言之，保持列表排序是底层 ObservableList 或维护列表的应用程序的责任。

> 每次向 ObservableList 添加内容时，是否需要强制重新排序表格？

本质上，是的。

JavaFX 应该附带一个 SortedObservableList 实现，它与 TableView 有效地合作，使应用程序的所有排序处理几乎自动化。但是，对于 JavaFX 2.2，该功能并没有被包含在内。目前，此功能计划作为 JDK/JRE8 的一部分交付，并且可以通过这个[总括问题进行跟踪，以改进 TableView 中的排序支持](http://javafx-jira.kenai.com/browse/RT-19479)。

# java - 如何在java中的嵌套sql语句中连接动态值？

> ID：13409353
> 
> 赞同：0
> 
> 时间：2012-11-16T02:04:36.940
> 
> 标签：java, sql

我有这个代码：

```
long userID = user.getId();
String query = "select userclient.username from twitter_content.userclient where     userclient.userid = " +
        "(select follower.followerid from twitter_content.follower where follower.followerid = userclient.userid and follower.userid = "+userID+")"; 
```

我想在 Where 子句中使用 userID 作为查询的一部分，但我似乎没有正确连接 userID（我希望它被读取为动态值，而不是字符串）。有人可以提供一些指导吗它？

编辑：
这是完整的源代码：

```
public ArrayList<Post> retrieveFollowerDB(String userName){
    ArrayList<Post> postArray = new ArrayList<Post>();
    ArrayList<Integer> intArray = new ArrayList<Integer>();
    ResultSet rs = null;
    Connection conn = null;
    PreparedStatement pstmt = null;

    Twitter twitter = new TwitterFactory().getInstance();
    try {
        User user = twitter.showUser(userName);
        long userID = user.getId();
    } catch (IllegalStateException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (TwitterException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    String query = "select userclient.username from twitter_content.userclient where userclient.userid = " +
            "(select follower.followerid from twitter_content.follower where follower.followerid = userclient.userid and follower.userid = ?)";
    System.out.println(query);

    String userNames = null;
    String query1 = null;
    try{
        JDBC db = new JDBC();
        conn = db.getConnection();
        pstmt = conn.prepareStatement(query);
        pstmt.setLong(1, userID);
        rs = pstmt.executeQuery();

        Properties config = new Properties();
        config.load(new FileInputStream("C:/Users/L31207/Desktop/FYPJ/OpenCalais/MarcusFYPJ/categories.properties"));
        String[][] categories = fetchArrayFromPropFile("content", config);
        HashMap<String,Integer> hashmap = new HashMap<String,Integer>();
        for (String[] mapping : categories)
        {
            hashmap.put(mapping[0], 0);

        }

        while(rs.next()){
            int id = rs.getInt("followerid");
            userNames = rs.getString("username");
            intArray.add(id);
        }   

        ResultSet rs1 = null;
        Connection conn1 = null;
        PreparedStatement pstmt1 = null;

            for(int i=0;i<intArray.size();i++){
                query1 = "Select post.content from twitter_content.post where post.userid = "+intArray.get(i)+"";
                JDBC db1 = new JDBC();
                conn1 = db1.getConnection();
                pstmt1 = conn1.prepareStatement(query1);
                rs1 = pstmt1.executeQuery();
            }
                while(rs1.next()){
                    Post post = new Post(rs.getString(userNames), rs.getString("content"), hashmap);
                    System.out.println(rs.getString("content"));
                    postArray.add(post);
                    System.out.println(postArray.size());
                }
    }
    catch (Exception e) {
        System.err.println(e);
    }
    return postArray;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T02:11:57.743

您可以简单地使用 Prepared Statement 来注入变量的值。

```
con = DriverManager.getConnection("...");
String query = "select userclient.username from twitter_content.userclient where     userclient.userid = (select follower.followerid from twitter_content.follower where follower.followerid = userclient.userid and follower.userid = ?)";
PreparedStatement prest = con.prepareStatement(sql);
prest.setLong(1,<user_id>);
ResultSet rs1 = prest.executeQuery(); 
```

# java - 跨多个服务器运行 Java 实例？

> ID：13409357
> 
> 赞同：1
> 
> 时间：2012-11-16T02:04:53.327
> 
> 标签：java, scalability

我有一个 Java VM 在我的网络上的一台机器上运行。一台机器上的 CPU 电源耗尽，有什么办法可以将进程分散到两台计算机上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:09:04.333

看看远程方法调用，它可以让你执行不在本地机器上的方法。

[http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136424.html](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136424.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T02:10:23.940

也许使用服务器和客户端。您可以将服务器放在远程位置，让客户端处理所有内容，然后将数据返回到服务器。

# c# - Interface.GetMethods() 包括 c# 中的 get 和 set 语句

> ID：13409362
> 
> 赞同：0
> 
> 时间：2012-11-16T02:05:41.753
> 
> 标签：c#, .net-4.0

当我调用 时`inter.GetMethods()`，它给了我一个方法列表，*包括*所有的 get 和 set 语句。如何检查每个项目（在 a 中`foreach`）是否是 get 或 set 语句。

```
foreach (MethodInfo meth in inter.GetMethods()) Console.WriteLine(meth.Name); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:29:30.223

Not exactly the most elegant, but it works:

```
List<MethodInfo> propertyGetterSetters = new List<MethodInfo>();
foreach(PropertyInfo prop in typeof(MyType).GetProperties())
{
    var getter = prop.GetGetMethod();
    var setter = prop.GetSetMethod();

    if (getter != null)
        propertyGetterSetters.Add(getter);

    if (setter != null)
        propertyGetterSetters.Add(setter);
}

List<MethodInfo> nonPropertyMethods = typeof(MyType).GetMethods().Except(propertyGetterSetters).ToList(); 
```

You could also use `MethodInfo.IsSpecialName`, but that can also pick up on other special cases other than just properties, but if you have a simple class that you can test and see that it works, you can use it instead. I wouldn't recommend it; I'd rather just use a utility method like I have above:

`var nonPropertyMethods = typeof(MyType).GetMethods().Where(m => !m.IsSpecialName);`

# algorithm - 如何确定给定的有向图是否是树

> ID：13409363
> 
> 赞同：3
> 
> 时间：2012-11-16T02:05:52.773
> 
> 标签：algorithm, tree, directed-graph

程序的输入是图中的一组边。例如，考虑以下简单的有向图：

```
a -> b -> c 
```

该图的边集是

```
{ (b, c), (a, b) } 
```

所以给定一个有向图作为一组边，你如何确定有向图是否是一棵树？如果是树，树的根节点是什么？

首先我要看看你将如何表示这个图，邻接列表/邻接矩阵/其他任何东西？将如何利用您选择的表示来有效地回答上述问题？

编辑1：

有些人正在谈论使用 DFS 进行循环检测，但问题是从哪个节点启动 DFS。由于它是一个有向图，我们不能从随机节点启动 DFS，例如，如果我从顶点“c”启动 DFS，它将不会继续进行，因为没有后边可以到达任何其他节点。这里的后续问题应该是如何确定这棵树的根。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T03:04:34.797

这是一个相当直接的方法。它可以使用邻接矩阵或边列表来完成。

1.  找到不作为任何边的目的地出现的节点集合 R。如果 R 没有恰好一个成员，则图不是树。

2.  如果 R 确实只有一个成员 r，它是唯一可能的根。

3.  马克河。

4.  从 r 开始，递归地标记所有可以通过从源到目标的边到达的节点。如果任何节点已被标记，则存在一个循环，并且该图不是树。（此步骤与之前发布的答案相同）。

5.  如果在第 3 步结束时没有标记任何节点，则该图不是树。

如果这些步骤都没有发现图不是树，那么图就是以 r 为根的树。

如果没有关于节点和边数的一些信息，很难知道什么是有效的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T17:10:16.260

有 3 个属性可以检查图是否为树：

*   (1) 图中的边数正好比顶点数|E|少一 = |V| - 1
*   (2) 没有循环
*   (3) 图是连通的

我认为这个示例算法可以在有向图的情况下工作：

```
 # given a graph and a starting vertex, check if the graph is a tree
 def checkTree(G, v):

    # |E| = |V| - 1
    if edges.size != vertices.size - 1:
        return false;

    for v in vertices:
        visited[v] = false;

    hasCycle = explore_and_check_cycles(G, v);

    # a tree is acyclic
    if hasCycle:
        return false;

    for v in vertices:
        if not visited[v]: # the graph isn't connected
            return false;

    # otherwise passes all properties for a tree
    return true;

# given a Graph and a vertex, explore all reachable vertices from the vertex
# and returns true if there are any cycles
def explore_and_check_cycles(G, v):
    visited[v] = true;

    for (v, u) in edges:
        if not visited[u]:
            return explore_and_check_cyles(G, u)
        else: # a backedge between two vertices indicates a cycle
            return true

    return false 
```

资料来源：S. Dasgupta、CH Papadimitriou 和 UV Vazirani 的算法 [http://www.cs.berkeley.edu/~vazirani/algorithms.html](http://www.cs.berkeley.edu/~vazirani/algorithms.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T02:09:08.437

从根开始，“标记”它，然后转到所有子节点并递归重复。如果你到达一个已经被标记的孩子，这意味着它不是一棵树......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T02:16:15.747

**注意**：绝不是最有效的方法，但在概念上很有用。有时您需要效率，有时您出于教学原因需要另一种观点。这肯定是后者。

**算法：**`A`从大小为 的邻接矩阵开始`n`。取阵法力`A**n`。如果每个条目的矩阵都为零，则您知道它至少是树的集合（森林）。如果你能证明它是连通的，那么它一定是一棵树。参见[幂零矩阵](http://en.wikipedia.org/wiki/Nilpotent_matrix)。了解更多信息。

为了找到根节点，我们假设您显示的图形是一棵连通树。让是在矩阵变为零之前`k`必须提高功率的次数。对电源`A**k`进行转置。唯一的非零条目必须是根。`(k-1)``A.T ** (k-1)`

**分析：**一个粗略的最坏情况分析表明，`O(n^4)`对于矩阵乘法，它最多以 , 3 为界`n`。你可以通过对角化矩阵来做得更好，这应该把它降到`O(n^3)`. 考虑到这个问题[可以](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)在`O(n), O(1)`时间/空间中完成，这只是对问题的逻辑和理解的有用练习。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-22T16:03:13.933

以下是我为此编写的代码。随意提出优化建议。

```
import java.util.*;
import java.lang.*;
import java.io.*;

class Graph
{
private static int V;
private static int adj[][];

static  void initializeGraph(int n)
{
    V=n+1;
    adj = new int[V][V];
    for(int i=0;i<V;i++)
    {
        for(int j=0;j<V ;j++)
        adj[i][j]= 0;
    }

}

static int isTree(int edges[][],int n)
{
    initializeGraph(n);

    for(int i=0;i< edges.length;i++)
    {
        addDirectedEdge(edges[i][0],edges[i][1]);
    }

    int root = findRoot();
    if(root == -1)
    return -1;
    boolean visited[] = new boolean[V];
    boolean isTree = isTree(root, visited, -1);
    boolean isConnected = isConnected(visited);
    System.out.println("isTree= "+ isTree + " isConnected= "+ isConnected);
    if(isTree && isConnected)
    return root;
    else 
    return -1;

}

static  boolean isTree(int node, boolean visited[], int parent)
{
//  System.out.println("node =" +node +" parent" +parent);
    visited[node] = true;int j;

    for(j =1;j<V;j++)
    {
    //  System.out.println("node =" +node + " j=" +j+ "parent" + parent);
        if(adj[node][j]==1)
        {
            if(visited[j])
            {
            //  System.out.println("returning false for j="+ j);
                return false;
            }
            else
            {   //visit all adjacent vertices
                boolean child = isTree(j, visited, node);
                if(!child)
                {
                //  System.out.println("returning false for j="+ j + " node=" +node);
                    return false;   
                }
            }

        }
    }
    if(j==V)
    return true;
    else
    return false;
}

static int findRoot()
{
    int root =-1, j=0,i;
    int count =0;
    for(j=1;j<V ;j++)
    {
        count=0;
        for(i=1 ;i<V;i++)
        {
            if(adj[i][j]==1)
            count++;
        }
    //  System.out.println("j"+j +" count="+count);
        if(count==0)
        {
        //  System.out.println(j);
            return j;   
        }
    }
    return -1;
}

static void addDirectedEdge(int s, int d)
{
//  System.out.println("s="+ s+"d="+d);
    adj[s][d]=1;
}

static boolean isConnected(boolean visited[])
{
    for(int i=1; i<V;i++)
    {
        if(!visited[i])
        return false;
    }
    return true;
}

public static void main (String[] args) throws java.lang.Exception
{
    int edges[][]= {{2,3},{2,4},{3,1},{3,5},{3,7},{4,6}, {2,8}, {8,9}};
    int n=9;
    int root = isTree(edges,n);
    System.out.println("root is:" + root);

    int edges2[][]= {{2,3},{2,4},{3,1},{3,5},{3,7},{4,6}, {2,8}, {6,3}};
    int n2=8;
    root = isTree(edges2,n2);
    System.out.println("root is:" + root);
   }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-04T12:38:54.907

对于有向图，如果无向图是无环且全连接的，则底层无向图将是一棵树。对于有向图，如果每个顶点的入度 = 1，除了一个入度 = 0 的顶点外，相同的属性也适用。

如果邻接表表示也支持每个顶点的入度属性，那么我们可以很容易地应用上述规则。否则，我们应该应用调整后的 DFS 来找到底层无向图以及 |E|=|V|-1 的无环。

# objective-c - xcode4和助手编辑器中非常基本的出口/动作连接问题

> ID：13409365
> 
> 赞同：1
> 
> 时间：2012-11-16T02:06:09.557
> 
> 标签：objective-c, cocoa, xcode4, appdelegate

我有一个带有单个窗口的全新 xcode 4 可可项目（不是 ios ）。对于该窗口中的视图，我将类更改为“myView”并创建了 myView.[hm] 。我在主窗口的视图中添加了一个按钮。当我从按钮控制拖动到 myView.m 的源代码时，它不会弹出“创建操作？” 正如我所料。但是，当我尝试控制拖动到“AppDelegate.m”时，它确实会弹出。因此，我认为我需要更改某些东西的“所有者”，以便控制拖动到 myView.m 工作。

任何关于我如何做到这一点的建议，或者我在概念上的错误，将不胜感激。

谢谢，

查理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:36:58.987

你犯了两个错误。

第一：如果你想让它公开，你必须按 Ctrl+Drag 到 .h，如果你在 .m 中这样做，它将变为私有。由于您无法在 .m 中进行操作，请在 .h 中尝试。

第二：将Object的类更改为myView，默认为AppDelegate。并检查您的文件所有者类是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T06:38:20.313

这取决于你拖到哪里。您不能`@implementation`在 .m 文件或 .m 文件的顶层插入插座（这是一个属性）或操作方法声明。您必须将它们插入到`@interface`.

在 .m 文件的顶部，就在 . 上方`@implementation`，开始编写一个`@interface`，并完成一个类扩展。它应该如下所示：

```
@interface MyView ()

@end 
```

按住 Ctrl 并拖动到这两条非空行之间，然后在此处插入您的出口或操作声明。

> 因此，我认为我需要更改某些东西的“所有者”，以便控制拖动到 myView.m 工作。

我认为您在某处阅读并正在考虑的是更改文件所有者的类别。如果它还不是正确的类，您只需要更改它，即使那样，这也只有在该对象位于您的 ctrl-drag 的一端或另一端时才有意义。由于您是从另一个对象拖动到另一个对象的类，因此不涉及文件所有者，因此您可以或应该更改它以解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T06:47:41.140

以下方法不使用助理编辑器：

首先声明一个动作

```
@interface myView : NSView
//...
- (IBAction)myAction:(id)sender;
//...
@end 
```

在`myView.h`或替代地在类扩展中

```
@interface myView ()
//...
- (IBAction)myAction:(id)sender;
//...
@end 
```

在`myView.m`.

在界面生成器中，控制从按钮拖动到`myView`

![在此处输入图像描述](../Images/cc4820914ba3f581567354c19ddd6449.png)

并选择`myAction:`。

# sql - 如何将聚合 SQL 查询的结果插入单独的表中

> ID：13409368
> 
> 赞同：1
> 
> 时间：2012-11-16T02:06:49.353
> 
> 标签：sql, aggregate-functions

我有一个带有索引的表，我正在使用 sum 执行聚合 SQL 查询，你可以在 sqlfiddle中[看到](http://sqlfiddle.com/#!2/30271/4)我在做什么。

```
Create table TX (
  i int NOT NULL PRIMARY KEY,
  x1 DECIMAL(7,3), 
  x2 DECIMAL(7,3), 
  x3 DECIMAL(7,3)
);

INSERT INTO TX (i,x1,x2,x3) values
(1,5, 6,6) ;
INSERT INTO TX (i,x1,x2,x3) values
(2,6, 7, 5);
INSERT INTO TX (i,x1,x2,x3) values
(3,5, 6, 7) ;
INSERT INTO TX (i,x1,x2,x3) values
(4,6, 7, 4); 
```

我的问题是如何将该查询的结果插入到 3 个不同的表中？

```
SELECT SUM(1),
       SUM(x1),SUM(x2),SUM(x3),
       SUM(x1*x1),
       SUM(x2*x1),SUM(x2*x2),
       SUM(x3*x1),SUM(x3*x2),SUM(x3*x3)

FROM TX 
```

所以

我怎么能得到类似的东西

```
Sum(1)
-----
n

index  Sums
------------
1      4
2      22
3      26

index1  index2   Mult
----------------------
1            1   122
2            1   144
2            2   170
3            1   119
3            2   141
3            3   126 
```

代替

```
 SUM(1) SUM(X1) SUM(X2) SUM(X3) SUM(X1*X1) SUM(X2*X1) SUM(X2*X2) SUM(X3*X1) SUM(X3*X2)  SUM(X3*X3)
_____________________________________________________________________________________________________
        4      22       26     22        122        144       170      119          141          126 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T02:17:02.800

运行 3 个单独的查询。将 SELECT 转换为 INSERT 取决于 RDBMS。对于 SQL Server，它只是`INTO newTableName`在子句之前添加一个`FROM`来创建一个新子句，或者`INSERT INTO existingTableName`在`SELECT`语句之前添加一个。

```
Create table TX (
  i int NOT NULL PRIMARY KEY,
  x1 DECIMAL(7,3), 
  x2 DECIMAL(7,3), 
  x3 DECIMAL(7,3)
);

INSERT INTO TX (i,x1,x2,x3) values
(1,5, 6,6) ;
INSERT INTO TX (i,x1,x2,x3) values
(2,6, 7, 5);
INSERT INTO TX (i,x1,x2,x3) values
(3,5, 6, 7) ;
INSERT INTO TX (i,x1,x2,x3) values
(4,6, 7, 4); 
```

**查询 1**：

```
SELECT COUNT(*) AS SUM1
FROM TX 
```

**[结果](http://sqlfiddle.com/#!2/30271/17/0)**：

```
| SUM1 |
--------
|    4 | 
```

**查询 2**：

```
SELECT SUM(X1) index1, SUM(X2) sums
FROM TX 
```

**[结果](http://sqlfiddle.com/#!2/30271/17/1)**：

```
| INDEX1 | SUMS |
-----------------
|     22 |   26 | 
```

**查询 3**：

```
SELECT x.index1,
       x.index2,
       case x.id
       when 1 then SUM(x1*x1)
       when 2 then SUM(x2*x1)
       when 3 then SUM(x2*x2)
       when 4 then SUM(x3*x1)
       when 5 then SUM(x3*x2)
       when 6 then SUM(x3*x3)
       end Mult
FROM TX
CROSS JOIN
     (select 1 id, 1 index1, 1 index2 union all
      select 2 id, 2 index1, 1 index2 union all
      select 3 id, 3 index1, 1 index2 union all
      select 4 id, 2 index1, 2 index2 union all
      select 5 id, 3 index1, 2 index2 union all
      select 6 id, 3 index1, 3 index2) x
GROUP BY x.id, x.index1, x.index2
ORDER BY x.id 
```

**[结果](http://sqlfiddle.com/#!2/30271/17/2)**：

```
| INDEX1 | INDEX2 | MULT |
--------------------------
|      1 |      1 |  122 |
|      2 |      1 |  144 |
|      3 |      1 |  170 |
|      2 |      2 |  119 |
|      3 |      2 |  141 |
|      3 |      3 |  126 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T02:15:24.330

```
SELECT SUM(1)
FROM TX;

SELECT 1, SUM(x1)
FROM TX
UNION ALL 
SELECT 2, SUM(x2)
FROM TX
UNION ALL 
SELECT 3, SUM(x3)
FROM TX;

SELECT a.x i1, b.x i2, SUM(a.s * b.s)
FROM
(
    SELECT i, 1 x, x1 s
    FROM TX
    UNION ALL 
    SELECT i, 2 x, x2 s
    FROM TX
    UNION ALL 
    SELECT i, 3 x, x3 s
    FROM TX
) a
INNER JOIN
(
    SELECT i, 1 x, x1 s
    FROM TX
    UNION ALL 
    SELECT i, 2 x, x2 s
    FROM TX
    UNION ALL 
    SELECT i, 3 x, x3 s
    FROM TX
) b ON a.i = b.i AND a.x >= b.x
GROUP BY a.x, b.x; 
```

[SQL Fiddle 使用您的数据](http://sqlfiddle.com/#!2/30271/33)- 请注意，您的数据总和（第二个查询）与您问题中的总和不匹配。我相信这是一个错字。

请注意，我对第三个查询有点懒惰。我没有写出展开式，而是先将桌子展平，然后将其连接起来。

另请注意，在第一个查询`SUM(1)`中可以替换为`COUNT(*)`.

# dojo - onfocus 事件未在 dojo dijit FilteringSelect 上触发

> ID：13409369
> 
> 赞同：0
> 
> 时间：2012-11-16T02:07:05.570
> 
> 标签：dojo, event-handling, dijit.form

如果用户单击小部件或小部件获得焦点，我有一个包含 7 个 dijit FilteringSelect 小部件的页面，我想连接到从服务器获取的商店。我希望事件触发一次。

如果我将 onfocus="loadDropDown(this)" 添加到我的标记中，它会在每次小部件获得焦点时执行，正如您所期望的那样。

我正在尝试使用 dojo 使用 on.once() 触发事件一次。使用 dojo 事件处理的函数正在运行，但当小部件获得焦点时，永远不会调用事件处理函数。

任何指针？

这是我的标记

```
<select data-dojo-type="dijit.form.FilteringSelect"
                        type="text" intermediateChanges="false"
                        data-dojo-props="required:false, pageSize:20, placeholder: '---'"
                        scrollOnFocus="true" name="CJ1lxA" style="width: 40em;"
                        id="searchAgency">
                    </select> 
```

这是为了记录事件

```
function registerDDLoad(){
require(["dojo/on", "dijit", "dojo/ready"], function(on, dijit, ready){
    ready(function(){
        var dropDown = dijit.byId("searchAgency");
        on.once(dropDown, "onfocus", function() {
            loadDropDown(dropDown);
        });
        dropDown = dijit.byId("searchLocation");
        on.once(dropDown, "onfocus", function() {
            loadDropDown(dropDown);
        });
        dropDown = dijit.byId("searchCounty");
        on.once(dropDown, "onfocus", function() {
            loadDropDown(dropDown);
        });
        dropDown = dijit.byId("searchRep");
        on.once(dropDown, "onfocus", function() {
            loadDropDown(dropDown);
        });
        dropDown = dijit.byId("searchSenate");
        on.once(dropDown, "onfocus", function() {
            loadDropDown(dropDown);
        });
        dropDown = dijit.byId("searchStatus");
        on.once(dropDown, "onfocus", function() {
            loadDropDown(dropDown);
        });
        dropDown = dijit.byId("searchAE");
        on.once(dropDown, "onfocus", function() {
            loadDropDown(dropDown);
        });
    });
});
}

registerDDLoad(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:57:35.583

dojo 事件类[dojo/on](http://dojotoolkit.org/reference-guide/1.7/dojo/Evented.html#dojo-evented)期望在没有“on”的情况下指定事件：

```
onFocus = focus
onClick = click
onMouseOut = mouseout
... 
```

我认为改变它应该可以解决你的问题。我已将您的代码复制到[jsFiddle](http://jsfiddle.net/simpo/BeBNU/)上的测试区域，因此您可以使用它。

**注意：**由于您正在重新使用下拉变量，因此它将始终等于最后一个 filterSelect (id=searchAE)，而不是之前的那个。

# c - 如何找到数组 [x] = 数组 [x] + 1

> ID：13409372
> 
> 赞同：2
> 
> 时间：2012-11-16T02:07:56.240
> 
> 标签：c, arrays, for-loop, factorial

这是我的代码，用于查找数字的阶乘并查找阶乘中所有数字的出现次数。

```
#include <stdio.h>
#include <stdbool.h>

int iFactorial(int iCount)
{
    int iProduct = 1;
    int iNumber = 1;
    while (iNumber <= iCount)
    {
        iProduct *= iNumber;
        iNumber++;
    }
    return iProduct;
}

int main(void)
{
    int iFac[10] = {0};
    int iCount = 0;
    printf("Please input a Integer: ");
    scanf("%d",&iCount);
    iFac[iCount] = iFactorial(iCount);
    printf("\nThe value of the factorial of %d is %d\n",iCount, iFac[iCount]);
    int i;
    int dig[10] = {0};
    while (iFac <=0)
    {
        int n;
        n= ((iFac % 10) + 1);
        dig[n] = dig[n] +1;
        iFac = iFac / 10;
    }

    for (i = 0; i > 9; i++)
    {
        if (dig[i+1] >0)
        {
            printf ("%d     %d\n", i, dig[i+1]);
        }
    }
} 
```

我需要找到合适的写作方法`array[x] = array[x] + 1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:39:25.687

我认为以下代码将清楚您想要如何计算数字。

```
#include<stdio.h>

int factorial (int n)
{
 if ( n == 1 ) return 1 ; 
 return n * factorial( n-1 ) ;
}

int main()
{

//Input number
int num ;
scanf( "%d", &num ) ;  

//Calculate Factorial
int fact = factorial ( num ) ;
cout<< "\nFactorial of Number is " << fact ;

//Count the frequency of Digits
int dig[10] = {0} ;

while( fact )
{
 int i = fact % 10 ;
 dig[i]++ ;
 fact /= 10 ;  
}

for ( int i = 0 ; i < 10 ; i++ )
   printf("\n The digit %d is present %d times " , i , dig[i] );

return 0 ;
} 
```

确保您没有输入较大的值来计算数字的阶乘。

# android - 在 Eclipse 中更新 sdk rev.21 后无法设置 Android 目标

> ID：13409373
> 
> 赞同：1
> 
> 时间：2012-11-16T02:07:58.563
> 
> 标签：android, eclipse, android-sdk-tools

更新 Android SDK 版本 21 后，使用 Android 4.2 构建应用程序。但是现在，我不能再设置 Android Project Build 目标了。

程序步骤：

1.  通过 Android SDK 管理器将 Android SDK 平台和平台工具更新至修订版 21。

2.  将 Eclipse 的 ADT 插件更新到修订版 21。

3.  重新启动 Eclipse。

这是 Eclipse Preferences 中的 Android 条目。 ![安卓偏好](../Images/3b4f6bfb452e261a6c1081df45a700e9.png)

这是我的项目的属性： ![项目属性](../Images/f442811ac14a3bbbee2411d0dbf82625.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T07:29:30.493

**至少，我必须安装最新的 Eclipse IDE 才能使其正常工作。**

**我的旧日食版本：**

> 面向 Java 开发人员的 Eclipse IDE
> 
> 版本：1.4.2.20120213-0813
> 
> 版本号：20120216-1857

**和最新的：**

> 日食平台
> 
> 版本：4.2.1.v20120814-120134-9JF7BHVGFyMveli1uX6aTH0q-eAap6PAgOP5mO
> 
> 版本号：M20120914-1800

# c++ - C++ 输出格式错误

> ID：13409374
> 
> 赞同：2
> 
> 时间：2012-11-16T02:08:10.473
> 
> 标签：c++, text, file-io, formatting

当我遇到这个奇怪的错误时，我正在处理 C++ 的输出格式。这是我用于打印数组中包含的信息的代码示例：

```
int store;
while(table[i]!=NULL)
            {
                store=table[i]->ReturnID();
                output<<"ID: "<<setw(9)<<store<<"\t"; // Export to a file channel
                store=table[i]->ReturnTotalNumber();
                output<<" Total Number: "<<setw(5)<<store<<endl;
                i++;
            } 
```

尽管代码可以按预期编译和工作，但这是我的 output.txt 文件的一部分：

```
ID:       243    Total Number:     0
ID:       312 Total Number:     0
ID:       458    Total Number:     0
ID:       700    Total Number:     0
ID:       738    Total Number:     0
..... 
```

txt 文件的第二行似乎总是不平衡。其余的不管多少都可以。我还注意到将第一个**setw(9)**从 9 更改为任何其他随机数可以修复该错误，但我无法解释。有人对此有任何解释吗？我的编译器是 GCC-G++ 版本 4.4.1，我的 IDE 是 Code::Blocks 10.05。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-31T06:26:05.583

根据您输出的字符串，该选项卡似乎误入歧途。因此，您的任务是确定它是否不是由程序*输出*，或者它是否不是由您用来查看输出的任何工具呈现的。

我会将输出发送到一个文件，然后使用您必须检查所述文件的任何十六进制转储实用程序来查看选项卡是否真的存在。在 Linux（或带有 CygWin 的 Windows）下，您可以使用：

```
od -xcb fileNameYouCapturedTo 
```

如果您可以确定它没有被输出，请在`glibc` [此处](https://sourceware.org/bugzilla/)提出错误。如果它正在输出，那么您有两种可能性。

首先，您可以针对您用于查看输出的任何工具提交错误，无论是编辑器还是您正在使用的终端程序（因为它似乎没有正确处理选项卡）。

或者你可以完全放弃标签，只输出一个空格。鉴于由于 ，您的列已经排列好`setw()`，因此这里几乎不需要制表符。

# javascript - $(document).ready() 处理程序立即触发

> ID：13409384
> 
> 赞同：0
> 
> 时间：2012-11-16T02:09:43.693
> 
> 标签：javascript, jquery, html

我制作了一个小页面，其中包含 HTML：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">

<title>hi</title>

<script type="text/javascript" src="js/jquery-1.8.2.js"></script>
<link type="text/css" href="js/jquery-ui-1.9.1.custom/css/black-tie/jquery-ui-1.9.1.custom.css" rel="Stylesheet" />
<script type="text/javascript" src="js/jquery-ui-1.9.1.custom/js/jquery-ui-1.9.1.custom.js"></script>

<link type="text/css" href="css/main.css" rel="Stylesheet" />
<script src="js/main.js"></script>

<script>
    $(main());
/* or $(document).ready(main()); */
</script>
</head>
<body>
<div id="loginDiv" class="popupDiv">
    <div id="usernameDiv">
        <label for="username">username</label>
        <input type="text" id="username"/>
    </div>
    <div id="passwordDiv">
        <label for="password">Password</label>
        <input type="password" id="password"/>
    </div>
</div>

<div id="introDiv">
    <div class="headerDiv">
        <button id="loginButton">Login</button>
    </div>
</div>
</body>
</html> 
```

然后我有我的 main.js：

```
function main()
{
    var $loginButton = $('#loginButton');
    var $loginDiv = $('#loginDiv');

    $loginDiv.dialog({ autoOpen: false });

    $loginButton.click(function() {
        $loginDiv.dialog("open");
        //alert('sfsdf');
    });
} 
```

我可以触发警报，但如果在头部指定了 .ready() 处理程序，选择器将不会返回任何元素。

我尝试将它移到 body 标签的末尾，一切正常。根据[JQuery 文档](http://api.jquery.com/ready/)，整个 DOM 以及所有图像和资源都应该在调用处理程序之前加载。是什么赋予了？

*   Linux x86 上的 Firefox 16.0.2
*   jQuery 1.8.2
*   JQuery UI 1.9.2（这里没有真正使用）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T02:11:38.160

因为你正在调用你的函数！

```
$(main());   <--() means run it 
```

你想给它分配一个引用

```
$(main);  <-- no ()! 
```

# python - 怎么说......当字段是数字时匹配......在mongodb中？

> ID：13409386
> 
> 赞同：14
> 
> 时间：2012-11-16T02:09:51.270
> 
> 标签：python, mongodb

所以我的结果中有一个名为“城市”的字段......结果已损坏，有时是实际名称，有时是数字。以下代码显示所有记录...

```
db.zips.aggregate([{$project : {city:{$substr:["$city",0,1]}}},{$sort : {city : 1}} ]) 
```

我需要修改此行以仅显示名称为数字（2、3、4 等）的城市的记录....我想我可以使用“$match”，但是如何使用？

```
db.zips.aggregate([{$project : {city:{$substr:["$city",0,1]}}},{$sort : {city : 1}}, {$match:{???what_to_say_here???} ]) 
```

“当城市是数字时匹配”怎么说？

我得到的输出看起来像这样......

```
 {
        "city" : "A",
        "_id" : "04465"
    },
    {
        "city" : "1",
        "_id" : "02821"
    },
    {
        "city" : "0",
        "_id" : "04689"
    } 
```

我试图只显示带有数字字符串的记录......这与更大的“家庭作业”问题有关，但在我超过这一点之前我什至无法回答实际的家庭作业问题。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-16T02:32:48.897

[`$type`](http://docs.mongodb.org/manual/reference/operator/type/)在您的`$match`:中使用运算符

```
db.zips.aggregate([
    {$project : {city:{$substr:["$city",0,1]}}},
    {$sort : {city : 1}}, 
    {$match: {city: {$type: 16}}}      // city is a 32-bit integer
]); 
```

number 没有单一的类型值，因此您需要知道您拥有哪种类型的数字：

```
32-bit integer   16
64-bit integer   18
Double           1 
```

或者使用`$or`运算符来匹配所有类型的数字：

```
db.zips.aggregate([
    {$project : {city:{$substr:["$city",0,1]}}},
    {$sort : {city : 1}}, 
    {$match: {$or: [{city: {$type: 1}}, {city: {$type: 16}}, {city: {$type: 18}}]}}
]); 
```

甚至用于`$not`匹配`city`不是字符串的所有文档：

```
db.zips.aggregate([
    {$project : {city:{$substr:["$city",0,1]}}},
    {$sort : {city : 1}}, 
    {$match: {city: {$not: {$type: 2}}}}      // city is not a string
]); 
```

**更新**

要匹配数字字符串的所有文档，`city`您可以使用正则表达式：

```
db.zips.aggregate([
    {$project : {city:{$substr:["$city",0,1]}}},
    {$sort : {city : 1}}, 
    {$match: {city: /^\d.*$/}}      // city is all digits
]); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-03-08T17:02:05.937

为什么不使用 $regex？

```
db.zips.aggregate([
    {$project : {city:{$substr:["$city",0,1]}}},
    {$sort : {city : 1}}, 
    {$match: {city:{$regex:'[0-9]'}}}
]) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-06T17:54:36.623

只需使用：

```
db.zips.aggregate([
{$match: {
    'city': { $regex: '^[0-9].*'}
}}]) 
```

这对我来说很好！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-06T11:39:29.830

匹配`city`数字字符串的所有文档的更简单方法是使用该属性，`'0' <= city <= '9'`即您的聚合查询变为：

```
db.zips.aggregate([
    {$project : {city:{$substr:["$city",0,1]}}},
    {$sort : {city : 1}}, 
    {$match: {city: {$gte: '0', $lte: '9'}}}
]); 
```

当使用 JohnnyHK 的正则表达式建议时，您可以`$project`完全节省自己的舞台。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-14T18:30:41.583

您还可以使用`in`命令

```
db.zips.aggregate([     
    {
        $project: {
            first_char: { 
                $substr : ["$city",0,1]
            }, 
            "_id":"$_id"
        } 
    }, 
    {
        $match: {
            first_char: { 
                $in: ["0","1","2","3","4","5","6","7","8","9"] 
            }
        }
    }
]) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-13T14:47:29.773

您也可以尝试如下，使用正则表达式而不使用 $regex

```
db.zips.aggregate([
{$project : { city : { $substr : ["$city",0,1] } }}, 
{$sort : {city : 1}}, 
{$match: { city:/[0-9]/}}
]) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-24T23:53:24.880

```
db.zips.aggregate([
    {$project : {city:{$substr:["$city",0,1]},pop:1}},
    {$group:{_id:"$city",sumPop:{$sum:"$pop"}}},
    {$sort : {_id : 1}}, 
    {$match:{_id : {$regex:/\d/}} },
    {$group:{_id:"id",sumPop:{$sum:"$sumPop"}}},
]); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-27T06:18:02.663

随着 mongodb **4.4**（即将推出），您可以使用[**`$isNumber`**](https://docs.mongodb.com/master/reference/operator/aggregation/isNumber/)管道运算符来检查表达式是整数还是其他 BSON 类型。

```
db.zips.find({ "$expr": { "$anyElementTrue": { "$isNumber": "$city" }}}) 
```

[**`$isNumber`**](https://docs.mongodb.com/master/reference/operator/aggregation/isNumber/)将返回对应于表达式的 true 或 false[**`$anyElementTrue`**](https://docs.mongodb.com/master/reference/operator/aggregation/anyElementTrue/)并将返回`$match`ed 文档。

# c# - 如何从我的列表中获取数据

> ID：13409388
> 
> 赞同：0
> 
> 时间：2012-11-16T02:10:01.047
> 
> 标签：c#, wpf

伙计，我知道如何从我的列表中添加数据，但问题是我如何检索它......？

id 在 GlobalVar.cs 中删除了我的列表：

```
public static List<string> ViolationRefNumToPrint = new List<string>(); 
```

这是将数据添加到我的列表中的代码.....

```
 GlobalVar.ViolationRefNumToPrint.Clear();
    for (int i = 0; i < lvviolations.Items.Count; i++)
    {
        GlobalVar.ViolationRefNumToPrint.Add(((EmpViolationObject)lvviolations.Items[i]).VioRefNum);
    } 
```

我的问题是如何将它检索到我的列表中...... :(

# **编辑**

Guyz 我使用了下面的代码。这是由@evanmcdonnal 给出的。实际上我要在我的报告中使用它......我已经使用了**DocumentViewer**

这是我的代码....

```
 ReportDocument reportDocument = new ReportDocument();

        string ats = new DirectoryInfo(Environment.CurrentDirectory).Parent.Parent.FullName;

        StreamReader reader = new StreamReader(new FileStream(ats.ToString() + @"\Template\ReportViolation.xaml", FileMode.Open, FileAccess.Read));

        reportDocument.XamlData = reader.ReadToEnd();
        reportDocument.XamlImagePath = Path.Combine(ats.ToString(), @"Template\");
        reader.Close();

        DateTime dateTimeStart = DateTime.Now; // start time measure here
        List<ReportData> listData = new List<ReportData>();
        int i = 0;

        foreach (string item in GlobalVar.ViolationRefNumToPrint)
        {
            ReportData data = new ReportData();

            data.ReportDocumentValues.Add("PrintDate", DateTime.Now); 
            data.ReportDocumentValues.Add("EmpIDNum", NewIDNumber.ToString()); 
            data.ReportDocumentValues.Add("EmpName", NewEmpName.ToString()); 
            data.ReportDocumentValues.Add("EmpPosition", NewPosition.ToString()); 

            data.ReportDocumentValues.Add("PageNumber",(i + 1)); 
            data.ReportDocumentValues.Add("PageCount", GlobalVar.ViolationRefNumToPrint.Count.ToString()); 

            listData.Add(data);
            i++;
        }

        XpsDocument xps = reportDocument.CreateXpsDocument(listData);
        documentViewer.Document = xps.GetFixedDocumentSequence();

        // show the elapsed time in window title
        Title += " - generated in " + (DateTime.Now - dateTimeStart).TotalMilliseconds + "ms"; 
```

这里的问题是它给了我这样的错误....

![在此处输入图像描述](../Images/5c50a19134922da93b2673063d47ce5c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:13:30.573

您必须遍历它并搜索您想要的项目。

```
foreach (string item in ViolationRefNumToPrint)
{
      Console.Out(item);
} 
```

相反，如果你想要一个特定的项目（假设你的列表有对象调用它`string itemImLookinFor = "some nonsense";`循环它并有条件匹配；

```
foreach (MyObject item in ViolationRefNumToPrint)
{
      if (item.name == itemImLookinFor)
          //do something with this object
} 
```

# c - 如何检查 GtkListStore 中是否已经存在值以避免重复？

> ID：13409397
> 
> 赞同：0
> 
> 时间：2012-11-16T02:11:33.837
> 
> 标签：c, gtk, gtk3

如何检查 a 中是否已存在值`GtkListStore`以避免重复？我根据用户数据输入动态地从数据库中获取值，但是如果用户键入与先前键入的单词相同或相似的单词，它可以返回相同的结果，因此我的`GtkListStore`.

这是我当前用于将值添加到的函数`GtkListStore`：

```
static inline void update_c_list(struct al_t *new_list, size_t new_list_size)
{
  struct al_t *l = new_list;
  GtkTreeIter iter;
  size_t i = 0;

  for(; i < new_list_size; i++,l++) {

    if(/* magic to avoid double goes here */) {
    gtk_list_store_append(completionmodel, &iter);
    gtk_list_store_set(completionmodel, 
               &iter, C_NAME, l->name,
               C_NICK, FOO_STRING(l->foo),
               C_EMAIL, BAA_STRING(l->baa), -1);
    }
  }

  gtk_entry_completion_set_model(completion, GTK_TREE_MODEL(completionmodel));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:17:51.423

您需要迭代列表并查找其中是否存在相同的数据。

```
struct CListLooupStruct
{
  gbolean b_found;
  struct al_t *l;
}; 

gbolean search_c_list_func(GtkTreeModel *model, 
                           GtkTreePath *path, 
                           GtkTreeIter *iter, 
                           gpointer data)
{
   gchar name[MAX_NAME_LENGTH];
   CListLooupStruct* lookup = (CListLooupStruct*)data;
   gtk_tree_model_get (model, iter, 0, &name, -1)
   if (/*compare name to lookup->name */)
   { 
       lookup->b_found = TRUE;
       return TRUE;
   }
   return FALSE;
} 
```

在您的`update_c_list()`功能中，您需要：

```
...
CListLooupStruct c_list_lookup = { FALSE, new_list };    
gtk_tree_model_foreach(completionmodel, search_c_list_func, &c_list_lookup);
if (/* magic to avoid double */ c_list_lookup.b_found == FALSE )
... 
```

# bash - 删除长度为 x 或更多字符的文件

> ID：13409403
> 
> 赞同：3
> 
> 时间：2012-11-16T02:12:04.763
> 
> 标签：bash

我正在复习考试，其中一个问题是要求我编写一个命令，该命令将删除给定目录中至少 6 个字符长的文件。

例子：

> 人@ubuntumachine:~$ ls

```
abc.txt, abcdef.txt, 123456.txt, helloworld.txt, rawr.txt 
```

该命令将删除文件“abcdef.txt”、“12346.txt”和“helloworld.txt”。

我知道 at * 会在某些时候使用，但我不确定用什么来表示 6 个字符长...

谢谢<3

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-16T02:27:57.767

由于该问题可以有两种解释，因此给出了两个答案：

**1\. 删除文件名中包含 6 个或更多字符的文件：**

```
rm ??????* 
```

*解释：*

*   `??????`: `?`'s 将按字面意思输入。每个`?`匹配任何单个字符。所以这里的意思是“匹配任意 6 个字符”
*   `*`:`*`通配符匹配零个或多个字符
*   因此，它会删除任何包含 6 个或更多字符的文件。

或者：

```
find -type f -name "??????*" -delete 
```

*解释：*

*   `find`: 调用 find 命令
*   `-type f`: 只查找文件。
*   `-name "??????*"`: 匹配任何至少 6 个字符的文件，与上面的想法相同。
*   `-delete`：删除找到的任何此类文件。

**2\. 删除 CONTENTS 中包含 6 个或更多字符的文件：**

```
find -type f -size +5c -delete 
```

*说明*：

*   `find`: 调用 find 命令
*   `-type f`：只查找文件（不查找目录等）
*   `-size +5c`: 只查找长度大于 5 个字符的文件。**注意：请**记住，`EOF`在这种情况下，（文件结尾）算作一个字符。如果您想`EOF`从计数器中排除，请将其从 5 更改为 6。
*   `-delete`：删除找到的任何此类文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T02:27:49.797

像这样的东西应该工作：

```
$ ls|while read filename; do test ${#filename} -gt 6 && echo rm "$filename"; done 
```

诀窍是使用`${#foo}`构造来获取文件名的长度。

对输出感到满意后，立即在上一个命令之后运行以下命令：

```
$ !! | sh 
```

这会重复最后一个命令（显示删除文件的 rm 命令）并将其通过管道传递给 sh 以真正执行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T03:10:01.897

这将对当前目录和所有子目录执行请求的逻辑。

`find . -type f -regextype posix-egrep -regex ".*/[^/]{5}[^/]+$" -exec rm -vf {} \;`

*   `find .`
    *   搜索本地目录（将 . 更改为在别处搜索）
*   `-type f`

    *   只考虑文件
*   `-regextype posix-egrep`

    *   使用 egrep 正则表达式语法（这是我所知道的）
*   `-regex ".*/[^/]{5}[^/]+$"`
    *   find 将匹配与此正则表达式匹配的所有路径
    *   正则表达式解构如下：
        *   `.*/`有效地忽略路径，直到文件名
        *   `[^/]{5}`找到 5 个不是斜杠的字符
        *   `[^/]+$` 需要在行尾 ($) 之前出现至少一个非斜杠的字符（因此：6 个或更多）
*   `-exec rm -vf {} \;`
    *   find 将用`{}`其搜索查询匹配的每个文件替换 （在这种情况下，文件的路径与我们的正则表达式匹配）。这样就实现了删除。 `-vf`添加以打印结果，以便您知道发生了什么。
        *   `-exec`对语法很挑剔 -如果在其位置使用简单，`\;`则必须避免`find: missing argument to '-exec'`遇到这种情况。`;`
        *   您可以通过使用`-print`而不是`-exec rm -vf {} \;`或简单地删除`-exec rm -vf {} \;`(`-print`是 find 的默认行为)来测试它

# c# - 在类中调用/访问 Windows 窗体控件的最有效方法

> ID：13409405
> 
> 赞同：0
> 
> 时间：2012-11-16T02:12:08.023
> 
> 标签：c#

我在表单项目中添加了一个 CSharp 类。现在我想从 Class 访问表单控件。

我将这段代码与隐式变量一起使用，如下所示：

```
var form = frmClasses.ActiveForm as frmClasses; 
```

使用此代码，我将表单修饰符设置为公共，将代码放置为方法/函数，并且我能够访问类中的表单控件。

问题是每次我需要调用表单控件时，我都必须使用 var 和上面的整行代码。有没有更简单的方法减少冗余？示例：类中的每个方法/函数都需要调用表单控件，因此使用 Var 引用表单控件。

看看下面的代码，你会注意到我使用 Var 来调用每个表单控件。

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;

namespace Classes
{
    class ClsProperties
    {   
        //VALIDATE TEXTBOX
        public static void validateTextBox()
        {
            var form = frmClasses.ActiveForm as frmClasses;
            if (form.txtMyTextBox.Text.Trim().Length == 0)
            {
                form.txtMyTextBox.BackColor = Color.Aquamarine;
            }

        }

        //VALIDATE RADIO BUTTON
        public static void validateRadio()
        {   
            var form = frmClasses.ActiveForm as frmClasses;
            if (form.radBtnColor.Checked == false)
            {
                form.lblShowError.ForeColor = Color.Aquamarine;
            }

        }
    }
} 
```

表格代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Classes
{
    public partial class frmClasses : Form
    {
        public frmClasses()
        {
            InitializeComponent();
        }

        private void btnSubmit_Click(object sender, EventArgs e)
        {
            ClsProperties.validateRadio();
            ClsProperties.validateTextBox();
        }
    }
} 
```

我可以将所有验证放在一个方法中，但我只是想展示如何使用一个类调用多个方法。

有没有更好的方法来访问类中的表单元素？

谢谢

# xcode - xcode 和 ios 以及全局变量

> ID：13409411
> 
> 赞同：0
> 
> 时间：2012-11-16T02:13:42.167
> 
> 标签：xcode, ios5, ios6

有没有全局变量的概念？就像我想检查我最初是否有网络并根据显示一些功能。我明白，我可以继续在表单之间传递变量。这是唯一的方法吗

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:38:59.140

这里典型的 Objective C OOP 编码解决方案是使用 MVC 模式。在模型对象中实例化这些变量，可能是一个单例和/或将该模型对象传递给需要获取/设置此状态信息的对象。

但是Objective C也是普通ANSI C的超集。因此，如果您不需要/想要封装以实现可重用性/可维护性，则可以使用标准C全局变量，可以从Objective C中的任何地方访问。

# html - 字体系列未在我的网站上正确显示

> ID：13409414
> 
> 赞同：1
> 
> 时间：2012-11-16T02:14:23.050
> 
> 标签：html, css, fonts, font-face, google-font-api

我不确定我在网站上使用的 css 字体系列发生了什么。直到昨天它还在工作。然后今天早上它停止在 Chrome 上工作，然后在 FireFox 和 Safari (Mac) 上停止工作。

奇怪的是，它在我的一台队友计算机（Linux）上看起来不错，但在朋友的 Mac 计算机上看起来很糟糕。不知道发生了什么。当我检查元素时，我可以看到 CSS font-family 属性，但它被划掉了，好像字体没有加载一样。

这就是我在 CSS 上添加字体的方式：

```
@import url(http://fonts.googleapis.com/css?family=Rokkitt:400,700|Open+Sans:600italic,400,600,700|Helvetica+Neue:400,500,700); 
```

这就是[它现在的样子](http://www.evernote.com/shard/s68/sh/6148c419-e444-474e-b01b-629994e1716a/c73abc2f8f346bfb74fba14ad6f4b876)，[也是应该的样子](http://www.evernote.com/shard/s68/sh/302cab81-8a88-428f-96ec-0c1926e52cb2/3d07550ebed95c4fcf388f170d156dfd)。

完全卡住了，不知道发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T06:58:28.143

拆下零件`|Helvetica+Neue:400,500,700`。

Google Web 字体不包含 Helvetica Neue。它是一种商业字体，不是免费提供的，也可能不是收费的网络字体。

当您的请求中有一种在 Google Web Fonts 中不存在的字体时，Google 服务器会以 403 Forbidden 响应并且不发送*任何*字体。如果您使用开发人员工具 (F12) 并在加载页面时查看“网络”部分，您可以看到这一点。

当您将请求拆分为三个请求时，每个字体系列一个，其他请求成功。但是在一个请求中包含两个字体系列并删除 Helvetica Neue（或用谷歌实际拥有的某种字体替换它）会更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T02:32:20.010

好的，让它工作。不知道发生了什么。我所做的只是改变这一行：

```
@import url(http://fonts.googleapis.com/css?family=Rokkitt:400,700|Open+Sans:600italic,400,600,700|Helvetica+Neue:400,500,700); 
```

到：

```
@import url(http://fonts.googleapis.com/css?family=Rokkitt:400,700);
@import url(http://fonts.googleapis.com/css?family=Open+Sans:600italic,400,600,700);
@import url(http://fonts.googleapis.com/css?family=Helvetica+Neue:400,500,700); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-09T20:27:56.827

Helvetica Neue 实际上可在 Google 字体中找到：

[http://fonts.googleapis.com/css?family=Helvetica+Neue](http://fonts.googleapis.com/css?family=Helvetica+Neue)

# c# - 我可以在 Web 服务中使用编译查询吗？

> ID：13409415
> 
> 赞同：3
> 
> 时间：2012-11-16T02:14:30.527
> 
> 标签：c#, wcf, linq-to-sql

我有一个 WCF 服务，它的选择方法只需要一个 id。我需要使用几个（20 多个）加载选项来获取我需要返回的所有内容，所以我认为这会产生一个非常复杂的查询，并且编译它会是一个好主意。到目前为止，我发现的唯一方法是创建一个静态数据上下文并加载选项以用于已编译的查询。如果我不这样做，它会抱怨使用与编译时不同的上下文。所以这让我的问题是我应该这样做吗？在 Web 服务上使用静态数据上下文会导致问题吗？它只会用于这种方法。所有其他方法都创建自己的方法。我只是担心我最终可能会为这个决定付出代价，所以任何提示都会很棒！谢谢！

```
 private static DataLoadOptions loadOptions = GetDataLoadOpt();

    private static readonly Func<ItemsDataContext, int, Data.Item> SelectItem =
        CompiledQuery.Compile((ItemsDataContext DataContext, int ItemId) =>
            DataContext.Items.Where(r => r.ItemID == ItemId).FirstOrDefault());

    private static DataLoadOptions GetDataLoadOpt()
    {
        var loadOpts = new System.Data.Linq.DataLoadOptions();
        loadOpts.LoadWith<Data.Item>(d => d.ItemProp);
        .
        .
        .
        return loadOpts;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T16:48:25.613

Web 服务调用是不同的。我还没有发现拥有一个共享的静态上下文可以节省任何时间，因为无论如何调用最终都会启动一个新实例。在我的一些项目中，我还有几个对象具有非常大、复杂的加载选项堆栈。在某些情况下，我的性能会有所下降，因为我要带回这么多表，但如果连接很强大（设计良好的数据库），那还不错。

# email - 连接到 SMTP 服务器时，我应该先尝试 SSL 还是 TCP/STARTTLS？

> ID：13409419
> 
> 赞同：1
> 
> 时间：2012-11-16T02:15:23.600
> 
> 标签：email, ssl, smtp, starttls

SMTP 允许通过端口 25 进行未加密通信。对于某些服务器（例如 Google 的 MX 服务器），我可以在建立初始未加密连接后使用 STARTTLS 切换到 TLS 连接。

```
S:220 mx.google.com ESMTP l1si352658een.133
C:EHLO mail.example.com
S:250-mx.google.com at your service
S:250-SIZE 35882577
S:250-8BITMIME
S:250-STARTTLS
S:250-ENHANCEDSTATUSCODES
S:250 PIPELINING
C:STARTTLS
S:220 2.0.0 Ready to start TLS
[socket switches to TLS here]
C:EHLO mail.example.com
... 
```

但是，我也想支持直接的 SSL 连接，我想知道大多数邮件服务器是更喜欢从 SSL 开始还是从 TCP 开始，然后在建立连接后转移到 TLS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T02:44:03.160

除非您与服务器管理员事先安排好，否则不要尝试使用 SSL 进行连接。端口 (465) 用于 SSMTP 或 SMTPS（基于 SSL 的 SMTP）。与此端口的连接预计会使用 SSL 启动连接。由于 StartTLS 可用，因此已放弃使用此端口和协议。

有两个端口可以支持带有 StartTLS 的 SMTP。在没有 StartTLS 的情况下，两者都不支持 SSL，如果您尝试，可能会断开连接。SMTP (25) 和 Submission (587) 都可以支持 StartTLS。如果受支持，它将在对 EHLO 消息的响应中列出。然后，您可以启动 StartTLS 过程。有关详细信息，请参阅[RFC 3207 。](http://www.ietf.org/rfc/rfc3207.txt)

从您的评论中可以看出，您真正关心的是如何验证证书。这是一个不同但相关的问题。它还假设邮件服务器没有使用自签名证书。就我而言，我使用自签名证书。这对我很有效，因为 StartTLS 很少（如果有的话）用于 SMTP（端口 25）连接。我对连接消息提交（端口 587 或端口 25）的客户端有合理的控制权，这些客户端必须在发送消息之前进行身份验证。根据我的经验，StartTLS 主要用于保护必须在发送电子邮件之前进行身份验证的客户端的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:23:14.320

对 SSL/TLS on connect (SMTPS) 或 SSL/TLS after 的支持`STARTTLS`因一台服务器而异，具体取决于软件及其配置方式。

SSL/TLS 连接的主要优点是它不需要对应用程序协议进行任何更改。事实上，您可以`stunnel`在每一侧使用类似的东西来包装连接。

SSL/TLS after 的主要优点`STARTTLS`是可以在同一个端口上完成。另一个优势可能是能够托管多个主机名（取代 TLS 级别的服务器名称指示），但我不确定这是否曾经用于 SMTP 服务器。

STMPS（连接时的 SSL/TLS）没有官方规范，并且使用[未注册的端口号](http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xml)(465)。从理论上讲，它也已被弃用。然而，许多服务器可以支持它（例如[Exim](http://www.exim.org/exim-html-current/doc/html/spec_html/ch41.html)），并且如果它们能够这样做，它们将能够同时支持这两者：由托管服务来选择配置什么。

如果您正在编写客户端并且已经支持`STARTTLS`，那么在连接时支持 SSL/TLS 也应该相当便宜。支持两者当然是一个好主意，因为它可以被更多的用户使用（如果我没记错的话，Gmail 在某些时候只支持 SMTPS，它在防火墙阻止的情况下也很有用仅端口之一）。

两者都可以提供相似级别的安全性，只要以一种或另一种方式使用 SSL/TLS（并且执行正确的证书验证，包括主机名）。

[关于SSL 和 TLS 之间的区别](https://serverfault.com/a/368574/47187)通常存在一些混淆。由于某种原因，似乎许多电子邮件软件实现未能意识到“STARTTLS”中最重要的词是“START”，而不是 TLS（在连接模式和协议选择方面）。不幸的是，这种混淆已传播到某些软件配置选项（甚至在流行的邮件客户端中），因此也传播到了 ISP 文档中。预计您的用户会感到困惑。

无论您要支持哪种模式，请确保它没有[“*使用 TLS，如果可用*”选项](https://bugzilla.mozilla.org/show_bug.cgi?id=473080)，如果 SSL/TLS 不可用，该选项将退回到普通交换：这会打开与 MITM 攻击的连接。

# c# - .PDF 文件的 IIS 7.5 404 错误

> ID：13409424
> 
> 赞同：2
> 
> 时间：2012-11-16T02:15:57.333
> 
> 标签：c#, iis, redirect, iis-7.5, sitecore

我遇到了一个问题，我正在使用 IIS 7.5 重新定向 .pdf 扩展名 url。这是发生了什么奇怪的事情：当我的 URL 不包含`.pdf`它时：`http://mySite/documents/forms/test`pdf (test.pdf) 完美打开。但是，当我这样打开时：`http://mySite/documents/forms/test.pdf`它向我展示

```
HTTP Error 404.0 - Not Found 
```

您要查找的资源已被删除、名称已更改或暂时不可用。

我浏览了几个链接，例如：[http ://chentiangemalc.wordpress.com/2012/02/16/case-of-the-disappearing-pdf/](http://chentiangemalc.wordpress.com/2012/02/16/case-of-the-disappearing-pdf/)

和

[http://support.microsoft.com/kb/979543](http://support.microsoft.com/kb/979543)

但不知道是否合适。还尝试通过提琴手调试，因为这个链接提到：[http ://chentiangemalc.wordpress.com/2012/02/16/case-of-the-disappearing-pdf/](http://chentiangemalc.wordpress.com/2012/02/16/case-of-the-disappearing-pdf/)

当我保存**响应正文**时，pdf 文件没有以正确的格式保存。所以我猜有某种文件损坏？也许？但是当我在 URL 中不包含 .pdf 时，我的文件会完美打开。不知道发生了什么：\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:41:35.197

我得到了答案。我必须更改 web.config 文件以允许 .pdf 文件在浏览器中打开：

```
 <preprocessRequest help="Processors should derive from Sitecore.Pipelines.PreprocessRequest.PreprocessRequestProcessor">
    <processor type="Sitecore.Pipelines.PreprocessRequest.SuppressFormValidation, Sitecore.Kernel" />
    <processor type="Sitecore.Pipelines.PreprocessRequest.NormalizeRawUrl, Sitecore.Kernel" />
    <processor type="Sitecore.Pipelines.PreprocessRequest.IIS404Handler, Sitecore.Kernel" />
    <processor type="Sitecore.Pipelines.PreprocessRequest.FilterUrlExtensions, Sitecore.Kernel">
      <param desc="Allowed extensions (comma separated)">aspx, ashx, asmx, pdf</param>
      <param desc="Blocked extensions (comma separated)">*</param>
      <param desc="Blocked extensions that stream files (comma separated)">*</param>
      <param desc="Blocked extensions that do not stream files (comma separated)" />
    </processor>
    <processor type="Sitecore.Pipelines.PreprocessRequest.StripLanguage, Sitecore.Kernel" />
  </preprocessRequest> 
```

# c# - 以 Func 为键的字典

> ID：13409425
> 
> 赞同：10
> 
> 时间：2012-11-16T02:15:58.337
> 
> 标签：c#, dictionary, func

我想知道这是否是字典键的明智选择？我想要做的是使用表达式作为字典中的键，例如：

```
 var map3 = new Dictionary<Func<int, bool>, int>();
    map3.Add((x) => x % 2 == 0, 1);
    map3.Add((x) => x % 10 == 0, 2);
    // ...

    var key = map3.Keys.SingleOrDefault(f => f(2));
    // key = (x) => x % 2
    // map3[key] = 1 
```

这个想法是比使用大 if-else 或 switch 语句更清洁的方法。

这有意义吗？它会起作用吗？有没有更简单的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T02:28:15.120

Considering the way that you use your map, you will be better off with a `List<Tuple<Func<int,bool>,int>>`, because the order of checking the lambdas will no longer be arbitrary, as in a hash-based dictionary. This approach also lets you skip the lookup step:

```
var map3 = new List<Tuple<Func<int,bool>,int>> {
    new Tuple<Func<int,bool>,int>((x) => x % 2 == 0, 1)
,   new Tuple<Func<int,bool>,int>((x) => x % 10 == 0, 2)
};
var t = map3.SingleOrDefault(t => t.Item1(2));
if (t != null) {
    var v = t.Item2;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-16T02:27:13.713

不，只要使用 lambda，C# 就会构造一个新的委托实例，因此您将无法将其用作一致的键。例子：

```
 Func<int, int> f = x => x*x + 1;
        Func<int, int> g = x => x*x + 1;
        Console.WriteLine(f.Equals(g)); // prints False 
```

除非您有其他方法可以始终获取相同的实例，否则这将使用作字典键的用法变得尴尬。

编辑：

Eric Lippert's answer [here](https://stackoverflow.com/a/6281337/517852)表明*允许*编译器检测 lambdas 是否相同（尽管通常不会）。无论哪种方式，lambda/delegate 都是一个糟糕的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-22T04:12:15.530

用最新语法重写@dasblinkenlight 的答案：

```
void Main()
{
    var map3 = new List<(Func<int, bool> Key, int Value)> {
        (Key: (x) => x * 2 == 4, Value: 1),
        (Key: (x) => x * 10 == 100, Value: 2)
    };

    var result = map3.SingleOrDefault(x => x.Key(10));
    Console.WriteLine(result.Value);
} 
```

当`Key`计算出一个不存在的 Func 时，`List` `SingleOrDefault`返回一个键为 null 且值为 0 的元素。

`Key`以上`Value`是为了可读性，它们可以被删除，在这种情况下`result.Intem2`会产生输出

# php - 计算从 SQL QUERY 检索特定值的次数

> ID：13409429
> 
> 赞同：0
> 
> 时间：2012-11-16T02:16:24.253
> 
> 标签：php, mysql

MySQL 表：姓名、薪水、子女、兄弟、年龄

我正在尝试检索年龄> 30 的薪水，子女和兄弟中具有最大值的人的姓名。注意：每个名称都是唯一的。

为了实现这一点，我遍历了这个数组的所有列：

```
$columns = array('salary','childrens','brothers')
foreach($columns as $value){
  $result=mysql_query("SELECT `name`, `$value` FROM table_name WHERE `age`>30 ORDER BY `$value` ASC LIMIT 1");
  while($rows=mysql_fetch_array($result,MYSQL_ASSOC)){
    echo $rows[name];
  };
}; 
```

一切正常，但我还想计算每个名称被检索的次数（*回*显）。即： Max 的薪水最高，兄弟数量最多，所以他的名字被检索了 2 次。Loren 只有最多的孩子，所以他的名字被检索了 1 次。Jason 从未被召回，所以对他来说是 0。

我试过这个：

```
$i=0;
$columns = array('salary','childrens','brothers')
foreach($columns as $value){
  $result=mysql_query("SELECT `name`, `$value` FROM table_name WHERE `age`>30 ORDER BY `$value` ASC LIMIT 1");
  while($rows=mysql_fetch_array($result,MYSQL_ASSOC)){
    echo "The person who has the max amount of $value is $rows[name]";
    $count[$rows[name]] = $i++;
  };
}; 
```

但它没有按预期工作，它计算每个名称出现在每列中的次数，而不考虑它是否具有最大值。

任何帮助都将不胜感激。ps：如果您也可以改进代码以检索最大值，我将不胜感激。

**更新：**

每个表的查询应输出以下内容：

```
Name salary
Max  2000 
```

--

```
Name   childrens
Loren  4 
```

--

```
Name   brothers
Max    3 
```

$count 数组应该是： $count = array('Max'=>2,'Loren'=>1,'Jason'=>0,'etc'=>0);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:38:57.270

我不确定你在做什么，但在编程中我会使用比较方法来获得最高值，但是服务器端语言中还有另一个 MAX() 函数来获得所有记录[http://www.w3schools 的最大值。 com/sql/sql_func_max.asp](http://www.w3schools.com/sql/sql_func_max.asp)

```
$columns = array('salary','childrens','brothers');
$highest = array(array('salary'=>0,'childrens'=>0,'brothers'=>0));

foreach($columns as $value){
  $result=mysql_query("SELECT `name`, `$value` FROM table_name WHERE `age`>30 ORDER BY `$value` ASC LIMIT 1");
  while($rows=mysql_fetch_array($result,MYSQL_ASSOC)){

    //compare the value of each record if greater then replace
    if($highest[$value]<$rows[$value]){
    //replace with current highest value and set name into array
    $highest[$value]=$rows[$value];
    $highest[$value]=$rows[name];
    }
  };
};

print_r($highest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:26:39.410

您对所有名称使用相同的计数器。尝试拆分它们。像这样的东西：

```
$count=array();
$columns = array('salary','childrens','brothers')
foreach($columns as $value) {
    $result=mysql_query(
        "SELECT `name`, `$value` 
         FROM table_name 
         WHERE `age`>30 
         ORDER BY `$value` ASC 
         LIMIT 1"
    );
    while($rows=mysql_fetch_array($result,MYSQL_ASSOC)) {
        echo "The person who has the max amount of $value is $rows[name]";
        if(!isset($count[$rows[name]]))
            $count[$rows[name]] = 0;
        ++$count[$rows[name]];
    };
};
print_r($count); 
```

**UPD：**而且，如果您需要具有 MAX 值的行，则必须使用`DESC`而不是`ASC`

**UPD2：**要检索所有用户，您还需要`SELECT DISTINCT name FROM table_name`在之前的代码之前执行并将其提取到数组中`$count[$r['name']] = 0`

# extjs4 - 如何在 ext4.1 中创建视口时添加浮动组件

> ID：13409430
> 
> 赞同：0
> 
> 时间：2012-11-16T02:16:29.903
> 
> 标签：extjs4

如何在创建时将浮动窗口添加到视口。当我尝试添加时

```
viewport.on('add',function(){
//my functionality here
}); 
```

怎么加？？？

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:01:43.007

在创建视口时，您不能真正将组件添加到视口，除非您覆盖其内部方法。您正在做的是为“add”事件添加一个事件侦听器，该事件在将项目添加到容器时触发。

我不明白您为什么要尝试将窗口添加到视口，但您会像添加任何其他项目一样添加它。

```
Ext.create("Ext.container.Viewport", {
    items: [{
        xtype:  "window",
        width:  400,
        height: 400,
        title:  "My Window"
    }]
}); 
```

或者只是自己创建窗口，因为它无论如何都被限制在文档正文中。

请记住，您必须先在窗口上调用该`show`方法，然后才能将其呈现到文档中（除非您`autoShow: true`在窗口配置中进行了设置）。

# c# - Sharepoint - 升级 Web 部件属性

> ID：13409434
> 
> 赞同：2
> 
> 时间：2012-11-16T02:17:09.593
> 
> 标签：c#, .net, sharepoint, sharepoint-2010

我现在正在使用 SharePoint 2010，但遇到了问题。有一个功能负责 webparts - 它的范围是 web。需要更新已创建的 Web 部件的某些属性，例如 - 标题。

所以我已经覆盖了 FeatureUpgrading 事件并将自定义升级操作添加到功能清单中 - 这里没有问题。在该功能接收器中，我计划编写一个代码，该代码应该获取带有所需页面的文件，检查它，遍历其上的所有 Web 部件，更改属性，然后返回页面。问题是我所有的 webpart 都显示为**ErrorWebPart**，标题为空。

顺便说一句，如果我在 FeatureDeactivating 事件中使用相同的代码 - 一切正常。我注意到的唯一区别 - 在功能升级 HttpContext.Current 中为空。所以我手动填充了它，但它没有帮助。在谷歌搜索时，仅有的两个建议是：填充 HttpContext 并确保带有 webparts 的库在 GAC 中。这两个条件都在我的情况下完成。

FeatureUpgrading 的示例代码是正确的：

```
 SPUtility.ValidateFormDigest();
        web.AllowUnsafeUpdates = true;

        var request = new HttpRequest("", web.Url, "");
        HttpContext.Current = new HttpContext(request, new HttpResponse(new StringWriter()));
        HttpContext.Current.Items["HttpHandlerSPWeb"] = web;

        var fileUrl = web.Url + "/pages/sample.aspx";
        var file = web.GetFile(fileUrl);
        if (file.CheckOutType == SPFile.SPCheckOutType.None)
        {
            file.CheckOut();
        }

        using (var webPartsManager = file.GetLimitedWebPartManager(PersonalizationScope.Shared))
        {
            foreach (WebPart webPart in webPartsManager.WebParts)
            {
                Console.WriteLine(webPart.GetType().ToString());
            }
        }

        file.CheckIn("System update"); 
```

将不胜感激任何帮助。也许我缺少一些东西，或者有另一个变体来完成所描述的任务？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:42:05.257

由于它正在处理 Deactivating()，因此我认为激活功能的顺序是问题所在。
您可能必须确保以下几点：
1\. 首先激活添加 Web 部件的功能
2\. 然后激活新功能。

您可以在包中更改它。或者更好地为您的新功能添加依赖项。

# javascript - 我们可以在网页之外使用 Javascript 吗？

> ID：13409438
> 
> 赞同：2
> 
> 时间：2012-11-16T02:17:37.127
> 
> 标签：javascript

我们可以将 Javascript 用于任何其他目的，或者其唯一目的是使网页具有交互性吗？通过其他目的，我的意思是，用于计算文件中的字数等

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T02:19:55.703

是的。有许多平台可以运行 JavaScript，例如[GoogleV8](http://code.google.com/p/v8/)和[node.js](http://nodejs.org/)。

这篇博文有很多关于在后端运行 JavaScript 的信息：http: [//amix.dk/blog/post/19613](http://amix.dk/blog/post/19613)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T02:20:28.020

是的。

自从 IE4.0 出现以来，Windows 就有了一个用于 shell 脚本的 JavaScript 引擎。它被称为 Windows 脚本宿主，是 Active Scripting 引擎的三个使用者之一。另外两个用户是 Internet Explorer（直到 IE9）和 IIS 的 Active Server Pages (ASP) 功能（否则与 ASP.NET 无关）。

这里有可用的文档：http: [//msdn.microsoft.com/en-us/library/9bbdkx3k (v=VS.84).aspx](http://msdn.microsoft.com/en-us/library/9bbdkx3k(v=VS.84).aspx)

# sql-server - 在 SQL 中将八进制转换为十进制

> ID：13409441
> 
> 赞同：1
> 
> 时间：2012-11-16T02:18:06.217
> 
> 标签：sql-server, sql-server-2008

一位朋友问如何在 SQL 中将表示八进制值的 varchar 转换为整数，所以我在这里放置一个答案，看看是否有人改进它。

我曾希望有一个可以作为查询的一部分内联运行的解决方案，而不必在数据库中创建任何函数（例如，如果您只有查询数据库的权限，但不能在其中创建任何新函数或存储过程）。

或者，我看到 .Net Framework ToInt32 方法很容易做到这一点，但似乎跳过了很多 CLR 集成箍才能到达那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:18:06.217

这是我的 quick-n-dirty 迭代版本：

```
CREATE FUNCTION dbo.fn_OctalToInt(@OctalVal varchar(50)) RETURNS BIGINT AS
BEGIN
    DECLARE @pos tinyint = 0
    DECLARE @tot bigint = 0
    WHILE @pos < LEN(@OctalVal) BEGIN
        set @tot = @tot + cast(SUBSTRING(@OctalVal, len(@OctalVal) - @pos, 1) as tinyint) * power(8,@pos)
        set @pos = @pos + 1
    END
    RETURN @tot
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T02:39:02.610

有点复杂 - 需要 2 级标量子查询

**设置和查询**

```
declare @t table (oct varchar(10));
insert @t select '7101';
insert @t select '6';
insert @t select '110111';

select *,
       (select sum(val)
        from
           (
            select substring(reverse(t.oct), v.number, 1) * power(8, v.number-1) val
              from master..spt_values v
             where v.type='p' and v.number between 1 and len(t.oct)
           ) x
       ) intVal
  from @t t; 
```

**结果**

```
oct        intVal
---------- -----------
7101       3649
6          6
110111     36937 
```

# jsf - 将多个组件绑定到支持 bean 中的一个实例（Primefaces 树）

> ID：13409444
> 
> 赞同：3
> 
> 时间：2012-11-16T02:18:28.517
> 
> 标签：jsf, binding, jsf-2, primefaces, components

我希望能够在我的页面上的 2 个地方有一个 Primefaces 树。原因是我想让具有相同数据的两棵树具有完全相同的状态-扩展相同的节点等。我尝试将两个实例绑定到支持 bean 中的相同值，但这只会导致其中一个呈现。我做错了吗？这应该以不同的方式解决吗？

相关问题（要求略有不同）指出不应该这样做，但如果不这样做 - 应该怎么做？

[JSF组件绑定后消失](https://stackoverflow.com/questions/10953438/jsf-component-disappears-after-binding)

**编辑 1**

我注意到我可以使用“value=”轻松共享选择值，但真正的问题是共享哪些节点已展开，哪些节点已折叠。我不知道这是否存储在服务器上，或者它是否可以存储在服务器上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T11:53:14.290

> *我试图将两个实例绑定到支持 bean 中的相同值，但这会导致其中只有一个呈现。我做错了吗？*

这绝对是错误的。每个组件`binding`都应该解析为一个**唯一的**请求范围属性，该属性不被任何其他组件共享，也不会比请求范围更长。

* * *

> *这应该以不同的方式解决吗？*

将它们绑定到不同的属性。如果您想要一个动态可扩展的属性，请使用`Map<String, UIComponent>`.

```
private Map<String, UIComponent> components = new HashMap<String, UIComponent>();

// Getter (no setter necessary). 
```

可以用作

```
<x:someComponent binding="#{bean.components.foo}" />
<x:someComponent binding="#{bean.components.bar}" />
<x:someComponent binding="#{bean.components.baz}" /> 
```

# objective-c - 自定义 UISearchBar

> ID：13409445
> 
> 赞同：1
> 
> 时间：2012-11-16T02:18:40.940
> 
> 标签：objective-c, ipad, background, uisearchbar, uisegmentedcontrol

我是新手`Objective-C`，我正在尝试删除 a 的背景`UISearchBar`以将我的一个图像用于`textfield`，但是一旦删除它，它就会`UISegmentedControl` 在背景中显示 a 。

```
for (UIView *subview in [projectSearch subviews]) {
        if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")])
        {
            [subview removeFromSuperview];
        }

        if ([subview isKindOfClass:NSClassFromString(@"UISearchBarTextField")]) {
            [(UITextField *)subview setBackground:[UIImage imageNamed:@"pg-14-search-field.png"]];
        }
    } 
```

`UISegmentedControl`删除`UISearchBar`背景后如何防止出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T02:38:50.303

```
for (UIView *view in self.searchBar.subviews) {
    for (UIView *subview in view.subviews) {
        if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")])
        {
            [subview removeFromSuperview];
        }

        if ([subview isKindOfClass:NSClassFromString(@"UISearchBarTextField")])
        {

        }
    }
} 
```

# c++ - 向量的 C++ 向量，无法编辑

> ID：13409457
> 
> 赞同：3
> 
> 时间：2012-11-16T02:20:22.700
> 
> 标签：c++, vector

我有一个 MatrixGraph 类，其成员变量 M 的类型为`vector<vector<double> >`。我有一个构造函数，它接受一个无符号的，并从该输入生成一个 NxN 矩阵，我想将它初始化为零。问题是当我运行我的代码时，调试器会在我尝试分配东西时启动。我试过方法，第一个：

```
MatrixGraph::MatrixGraph(unsigned num_nodes) {
for(int i = 0;i < num_nodes;i++) {
    for(int j = 0;j < num_nodes;j++) {
        M[i][j] = 0.0;//breaks on this line
    }//end i for loop
}//end j for loop
} 
```

我尝试的第二种方法是在这里找到的，但这也不起作用：

```
MatrixGraph::MatrixGraph(unsigned num_nodes) {
for(int i = 0;i < num_nodes;i++) {
        M[i].resize(num_nodes);//breaks on this line
    }
} 
```

我在这里评论了调用堆栈的最后一行在我得到错误之前的位置。调用堆栈上的下一行显示了类向量，并说我的 Pos 大于我的向量的大小。我假设这是一个大小为零的矩阵，但我不知道为什么我不能让它更大。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T02:28:49.250

The reason your code is failing is that you **cant use the [] operation** on a vector **before that element exists**. The usual way to add a value to a vector is to use **push_back**.

If you want to initialize to 0 you want **assign**(). Resize the outer vector to the required size and then assign each of the inner vectors with 0

```
M.resize(num_nodes);
for(int i = 0;i < num_nodes;i++) 
{        
    M[i].assign(num_nodes,0.0f);
}//end i for loop 
```

This can also be done. It is cleaner code but a tad less efficient since it makes 1 extra vector object.

```
vector<double> temp;
temp.assign(num_nodes,0.0);
M.assign(num_nodes,temp); 
```

or just

```
M.assign(num_nodes,vector<double>(num_nodes,0.0)); 
```

neatest one(courtesy @Mike Seymour) would be

```
MatrixGraph(unsigned num_nodes) 
   : M(num_nodes, vector<double>(num_nodes,0.0)) 
{} 
```

(thanks Mike Seymour for the constructor syntax)

What you are doing here is initializing the outer vector with a temp vector full of `0.0`s

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T02:24:36.387

您需要用数据填充向量 M：`M.resize(num_nodes)`

这应该这样做：

```
MatrixGraph::MatrixGraph(unsigned num_nodes) 
{
    M.resize(num_nodes);
    for(int i = 0;i < num_nodes;i++) 
    {
        M[i].resize(num_nodes);
        for(int j = 0;j < num_nodes;j++) 
        {
            M[i][j] = 0.0;
        }//end j for loop
    }//end i for loop
} 
```

# php - 第 6 行的 PHP 解析错误...似乎很简单，我忽略了。

> ID：13409459
> 
> 赞同：3
> 
> 时间：2012-11-16T02:20:39.737
> 
> 标签：php, sql

我在创建简单的登录表单时遇到问题。谁能解释为什么 SQL 在第 6 行显示“解析错误：语法错误，C:\xampp\htdocs\Easy Grade 2000\login.php 中的意外 '$username' (T_VARIABLE)”以及如何修复它？

谢谢

```
<?php

include 'connect.php'

// username and password sent from form 
$username = $_POST['u_name']; 
$password = $_POST['p_word']; 

$sql="SELECT * FROM $db_name WHERE u_name='$username' and p_word='$password'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);
// If result matched $myusername and $mypassword, table row must be 1 row

if($count==1){
// Register $myusername, $mypassword and redirect to file "login_success.php"
session_register("myusername");
session_register("mypassword"); 
header("location:login_success.php");
}
else {
echo "Wrong Username or Password";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:21:32.193

您忘记了包含后的分号：

```
include 'connect.php';
                     ^---- :) 
```

# python - 使用应用引擎上传网站后出错

> ID：13409460
> 
> 赞同：2
> 
> 时间：2012-11-16T02:20:50.857
> 
> 标签：python, google-app-engine

使用 App Engine 上传网站后，我收到以下错误消息：

```
Traceback (most recent call last):
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/_webapp25.py", line 710, in __call__
    handler.get(*groups)
  File "/base/data/home/apps/s~americocunhajr/1.363201743143209914/main.py", line 16, in get
    self.response.out.write (template.render (path, {}))
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/template.py", line 91, in render
    t = _load_user_django(template_path, debug)
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/template.py", line 113, in _load_user_django
    template = django.template.loader.get_template(file_name)
  File "/base/python_runtime/python_lib/versions/third_party/django-0.96/django/template/loader.py", line 80, in get_template
    template = get_template_from_string(source, origin, template_name)
  File "/base/python_runtime/python_lib/versions/third_party/django-0.96/django/template/loader.py", line 88, in get_template_from_string
    return Template(source, origin, name)
  File "/base/python_runtime/python_lib/versions/third_party/django-0.96/django/template/__init__.py", line 158, in __init__
    self.nodelist = compile_string(template_string, origin)
  File "/base/python_runtime/python_lib/versions/third_party/django-0.96/django/template/__init__.py", line 174, in compile_string
    return parser.parse()
  File "/base/python_runtime/python_lib/versions/third_party/django-0.96/django/template/__init__.py", line 254, in parse
    filter_expression = self.compile_filter(token.contents)
  File "/base/python_runtime/python_lib/versions/third_party/django-0.96/django/template/__init__.py", line 338, in compile_filter
    return FilterExpression(token, self)
  File "/base/python_runtime/python_lib/versions/third_party/django-0.96/django/template/__init__.py", line 558, in __init__
    raise TemplateSyntaxError, "Could not parse the remainder: %s" % token[upto:]
TemplateSyntaxError: Could not parse the remainder: {*/\nbody {\n   background: [[ColorPalette::Background]];\n color: [[ColorPalette::Foreground]];\n}\n\na{\n color: [[ColorPalette::PrimaryMid]];\n}\n\na:hover{\n   background: [[ColorPalette::PrimaryMid]];\n color: [[ColorPalette::Background]];\n}\n\na img{\n border: 0;\n}\n\nh1,h2,h3,h4,h5 {\n color: [[ColorPalette::SecondaryDark]];\n   background: [[ColorPalette::PrimaryPale]];\n}\n\n.button {\n    color: [[ColorPalette::PrimaryDark]];\n border: 1px solid [[ColorPalette::Background]];\n}\n\n.button:hover {\n color: [[ColorPalette::PrimaryDark]];\n background: [[ColorPalette::SecondaryLight]];\n border-color: [[ColorPalette::SecondaryMid]];\n}\n\n.button:active {\n  color: [[ColorPalette::Background]];\n  background: [[ColorPalette::SecondaryMid]];\n   border: 1px solid [[ColorPalette::SecondaryDark]];\n}\n\n.header {\n    background: [[ColorPalette::PrimaryMid]];\n}\n\n.headerShadow {\n   color: [[ColorPalette::Foreground]];\n}\n\n.headerShadow a {\n  font-weight: normal;\n  color: [[ColorPalette::Foreground]];\n}\n\n.headerForeground {\n    color: [[ColorPalette::Background]];\n}\n\n.headerForeground a {\n  font-weight: normal;\n  color: [[ColorPalette::PrimaryPale]];\n}\n\n.tabSelected{\n color: [[ColorPalette::PrimaryDark]];\n background: [[ColorPalette::TertiaryPale]];\n   border-left: 1px solid [[ColorPalette::TertiaryLight]];\n   border-top: 1px solid [[ColorPalette::TertiaryLight]];\n    border-right: 1px solid [[ColorPalette::TertiaryLight]];\n}\n\n.tabUnselected {\n   color: [[ColorPalette::Background]];\n  background: [[ColorPalette::TertiaryMid]];\n}\n\n.tabContents {\n   color: [[ColorPalette::PrimaryDark]];\n background: [[ColorPalette::TertiaryPale]];\n   border: 1px solid [[ColorPalette::TertiaryLight]];\n}\n\n.tabContents .button {\n    border: 0;}\n\n#sidebar {\n}\n\n#sidebarOptions input {\n  border: 1px solid [[ColorPalette::PrimaryMid]];\n}\n\n#sidebarOptions .sliderPanel {\n  background: [[ColorPalette::PrimaryPale]];\n}\n\n#sidebarOptions .sliderPanel a {\n border: none;\n color: [[ColorPalette::PrimaryMid]];\n}\n\n#sidebarOptions .sliderPanel a:hover {\n color: [[ColorPalette::Background]];\n  background: [[ColorPalette::PrimaryMid]];\n}\n\n#sidebarOptions .sliderPanel a:active {\n   color: [[ColorPalette::PrimaryMid]];\n  background: [[ColorPalette::Background]];\n}\n\n.wizard {\n background: [[ColorPalette::SecondaryLight]];\n border-top: 1px solid [[ColorPalette::SecondaryMid]];\n border-left: 1px solid [[ColorPalette::SecondaryMid]];\n}\n\n.wizard h1 {\n color: [[ColorPalette::SecondaryDark]];\n}\n\n.wizard h2 {\n    color: [[ColorPalette::Foreground]];\n}\n\n.wizardStep {\n  background: [[ColorPalette::Background]];\n border-top: 1px solid [[ColorPalette::SecondaryMid]];\n border-bottom: 1px solid [[ColorPalette::SecondaryMid]];\n  border-left: 1px solid [[ColorPalette::SecondaryMid]];\n}\n\n.wizard .button {\n    color: [[ColorPalette::Background]];\n  background: [[ColorPalette::PrimaryMid]];\n border-top: 1px solid [[ColorPalette::PrimaryLight]];\n border-right: 1px solid [[ColorPalette::PrimaryDark]];\n    border-bottom: 1px solid [[ColorPalette::PrimaryDark]];\n   border-left: 1px solid [[ColorPalette::PrimaryLight]];\n}\n\n.wizard .button:hover {\n  color: [[ColorPalette::PrimaryLight]];\n    background: [[ColorPalette::PrimaryDark]];\n    border-color: [[ColorPalette::PrimaryLight]];\n}\n\n.wizard .button:active {\n  color: [[ColorPalette::Background]];\n  background: [[ColorPalette::PrimaryMid]];\n border-top: 1px solid [[ColorPalette::PrimaryLight]];\n border-right: 1px solid [[ColorPalette::PrimaryDark]];\n    border-bottom: 1px solid [[ColorPalette::PrimaryDark]];\n   border-left: 1px solid [[ColorPalette::PrimaryLight]];\n}\n\n#messageArea {\n   border: 1px solid [[ColorPalette::SecondaryDark]];\n    background: [[ColorPalette::SecondaryMid]];\n   color: [[ColorPalette::PrimaryDark]];\n}\n\n#messageArea .button {\n    padding: 0.2em 0.2em 0.2em 0.2em;\n color: [[ColorPalette::PrimaryDark]];\n background: [[ColorPalette::Background]];\n}\n\n.popup {\n  background: [[ColorPalette::PrimaryLight]];\n   border: 1px solid [[ColorPalette::PrimaryMid]];\n}\n\n.popup hr {\n color: [[ColorPalette::PrimaryDark]];\n background: [[ColorPalette::PrimaryDark]];\n    border-bottom: 1px;\n}\n\n.listBreak div{\n border-bottom: 1px solid [[ColorPalette::PrimaryDark]];\n}\n\n.popup li.disabled {\n    color: [[ColorPalette::PrimaryMid]];\n}\n\n.popup li a, .popup li a:visited {\n color: [[ColorPalette::TertiaryPale]];\n    border: none;\n}\n\n.popup li a:hover {\n   background: [[ColorPalette::PrimaryDark]];\n    color: [[ColorPalette::Background]];\n  border: none;\n}\n\n.tiddler .defaultCommand {\n font-weight: bold;\n}\n\n.shadow .title {\n    color: [[ColorPalette::TertiaryDark]];\n}\n\n.title {\n color: [[ColorPalette::SecondaryDark]];\n}\n\n.subtitle {\n color: [[ColorPalette::TertiaryDark]];\n}\n\n.toolbar {\n   color: [[ColorPalette::PrimaryMid]];\n}\n\n.tagging, .tagged {\n    border: 1px solid [[ColorPalette::TertiaryPale]];\n background-color: [[ColorPalette::TertiaryPale]];\n}\n\n.selected .tagging, .selected .tagged {\n   background-color: [[ColorPalette::TertiaryLight]];\n    border: 1px solid [[ColorPalette::TertiaryMid]];\n}\n\n.tagging .listTitle, .tagged .listTitle {\n  color: [[ColorPalette::PrimaryDark]];\n}\n\n.tagging .button, .tagged .button {\n       border: none;\n}\n\n.footer {\n color: [[ColorPalette::TertiaryLight]];\n}\n\n.selected .footer {\n color: [[ColorPalette::TertiaryMid]];\n}\n\n.sparkline {\n  background: [[ColorPalette::PrimaryPale]];\n    border: 0;\n}\n\n.sparktick {\n background: [[ColorPalette::PrimaryDark]];\n}\n\n.error, .errorButton {\n   color: [[ColorPalette::Foreground]];\n  background: [[ColorPalette::Error]];\n}\n\n.warning {\n color: [[ColorPalette::Foreground]];\n  background: [[ColorPalette::SecondaryPale]];\n}\n\n.cascade {\n background: [[ColorPalette::TertiaryPale]];\n   color: [[ColorPalette::TertiaryMid]];\n border: 1px solid [[ColorPalette::TertiaryMid]];\n}\n\n.imageLink, #displayArea .imageLink {\n  background: transparent;\n}\n\n.viewer .listTitle {list-style-type: none; margin-left: -2em;}\n\n.viewer .button {\n    border: 1px solid [[ColorPalette::SecondaryMid]];\n}\n\n.viewer blockquote {\n  border-left: 3px solid [[ColorPalette::TertiaryDark]];\n}\n\n.viewer table {\n  border: 2px solid [[ColorPalette::TertiaryDark]];\n}\n\n.viewer th, thead td {\n    background: [[ColorPalette::SecondaryMid]];\n   border: 1px solid [[ColorPalette::TertiaryDark]];\n color: [[ColorPalette::Background]];\n}\n\n.viewer td, .viewer tr {\n   border: 1px solid [[ColorPalette::TertiaryDark]];\n}\n\n.viewer pre {\n border: 1px solid [[ColorPalette::SecondaryLight]];\n   background: [[ColorPalette::SecondaryPale]];\n}\n\n.viewer code {\n color: [[ColorPalette::SecondaryDark]];\n}\n\n.viewer hr {\n    border: 0;\n    border-top: dashed 1px [[ColorPalette::TertiaryDark]];\n    color: [[ColorPalette::TertiaryDark]];\n}\n\n.highlight, .marked {\n    background: [[ColorPalette::SecondaryLight]];\n}\n\n.editor input {\n   border: 1px solid [[ColorPalette::PrimaryMid]];\n}\n\n.editor textarea {\n  border: 1px solid [[ColorPalette::PrimaryMid]];\n   width: 100%;\n}\n\n.editorFooter {\n    color: [[ColorPalette::TertiaryMid]];\n}\n\n/* 
```

有谁知道发生了什么？

提前感谢您的帮助。

美国

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T23:26:15.793

很难肯定地说，但看看你发布的来源，你的价值是领先`/*{{{*/\n`的`StyleSheetColors`。我以前没有使用`config.js`过（所以这可能会偏离），但是[在这里](http://svn.tiddlywiki.org/Tags/1.2.38/tiddlywiki.html)检查我没有看到相同的领导者（示例包含`\n`'s，所以我假设这是正常的）。您是否手动将其添加`/*{{{*/\n`到您的代码中？从外观上看，您不需要在值前面加上大括号（也不需要用大括号将其关闭），因此我建议将其视为普通样式表并将其从`StyleSheetColors`值的开头和`/*}}}*/`结尾删除。

# jquery - 真正奇怪的 JQuery scrollTop 问题破坏了所有其他 jquery 函数

> ID：13409462
> 
> 赞同：2
> 
> 时间：2012-11-16T02:20:55.683
> 
> 标签：jquery, scrolltop

我正在尝试做一个简单的 jquery 平滑滚动，但是当我输入代码时：

```
$("a.fashion").click(function(){
    $("html,body").animate({scrollTop:0}, "slow");
}); 
```

我所有其他 jquery 代码停止工作。仅当我添加该行时：

```
$("html,body").animate({scrollTop:0}, "slow"); 
```

我可以在该函数中添加任何其他内容，它会起作用，但不是该行。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:31:37.770

May be this will help you.Change the line as follow

```
$("a.fashion").click(function(){
 $("html, body").animate({scrollTop: $(document).height()}, 'slow'); 
return false;
}); 
```

or just follow this link [Smooth scrolling](http://designwoop.com/2011/01/using-jquery-to-create-smooth-page-scrolling/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:42:16.740

谢谢大家的回答。我刚刚发现了问题。它似乎与功能块中奇怪的间距有关。我将它粘贴到内联并且它工作然后确保当我将它放在下一行时它只有一个选项卡空间（而不是一个选项卡空间和一块）。诡异的。没想到空格很重要... O_o

# java - 如何确定嵌套循环中的语句执行的频率？

> ID：13409467
> 
> 赞同：3
> 
> 时间：2012-11-16T02:21:52.593
> 
> 标签：java, algorithm, complexity-theory, nested-loops

我正在阅读一段关于使用递归关系确定嵌套循环复杂性的文本。在这个特定示例中，我试图确定计数变量将作为 n 的函数递增多少次。

这是我正在分析的循环：

```
for (int i = 1; i <= n; i++) {
     int j = n;
     while (j > 0) {
           count++;
           j = j / 2;
     }
} 
```

我想我明白第一行将简单地等同于 n 因为它只针对 n 的每个值执行，但其余的部分我遇到了麻烦。我认为答案类似于 n(n/2) ，只是这个例子使用的是整数除法，所以我不确定如何用数学表示。

我已经在纸上手动运行了几次循环，所以我知道对于 1-6 的 n 值，计数变量应该等于 1、4、6、12、15 和 18。我似乎无法想出公式......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:31:09.373

循环`n`在范围内执行`[1, n]`。对于设置为 n的变量，它每次除以 2 `j`，因此内部循环执行的次数是`floor(l2(n)) + 1,`其中 l2 是二进制 log 函数。将所有这些值从 1 加到 n（乘以`n`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:31:58.317

内部`j`循环将第一个设置位的位置添加到计数中。

每次除以 2 与右移相同，直到所有位都为零。

因此，2 在二进制中是 10，内部循环的值为 2。4 在二进制中是 100，内部循环的值为 3。

外部循环似乎只是将第一个设置位的位置乘以数字本身。

* * *

这是一个 n = 13 的示例。

二进制中的 13 是 1101，所以第一个设置位在位置 4。

4 * 13 = 52。52 是最终答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-11T05:01:07.690

> for (int i = 1; i <= n; i++) {

顶部的这个循环经过**n 次循环**。

> ```
>  int j = n;
>  while (j > 0) {
>        count++;
>        j = j / 2;
>  } 
> ```

这里的这个循环通过**循环 log(n) 次**，注意它是一个以 2 为底的日志，因为你每次都除以 2。

因此，计数总数为**n * ceiling(log(n))**

# php - 登录后PHP不保存$_SESSSION变量

> ID：13409468
> 
> 赞同：3
> 
> 时间：2012-11-16T02:21:58.563
> 
> 标签：php, login

第一次来这里。让我们希望这行得通！

我是 PHP 新手，正在尝试创建一个网站，用户可以在其中拥有自己的页面，其中包含可以编辑的内容。我让登录系统工作到一半。它正确识别用户名和密码，但似乎没有存储 $_SESSION 变量。起初我以为是因为我试图将用户名（本身是一个变量）设置为 $_SESSION 变量，但即使我将其设置为绝对值，我的代码检查用户是否已登录也会将它们重定向到“您尚未登录”页面。这是我的验证php代码：

```
<?php

$host="xxxx.ipagemysql.com";
$username="xxxxx";
$password="xxxxxx";
$db_name="farmers";
$tbl_name="users";

mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$farmeruser=$_POST['farmeruser'];
$farmerpw=$_POST['farmerpw'];

$sql="SELECT * FROM ".$tbl_name." WHERE farmeruser='".$farmeruser."' and farmerpw='".$farmerpw."';";

$result=mysql_query($sql);

$count=mysql_num_rows($result);

if($count==1){

session_start();
$_SESSION['member'] = "affirmative";
header("location:succesful_login.php");
}
else {
echo "Wrong Username or Password";
}
?> 
```

这是我的页面，它永远不会识别出用户已登录：

```
<?php
session_start();
if($_SESSION['member'] == "affirmative")
{
echo
"Welcome!";
}
else {
header('Location: http://www.leukosweb.com/user_not_recognized.php');
}
?> 
```

任何想法为什么这不起作用？

PS。我想将“肯定”更改为用户的登录名。如果您想帮助我使用登录验证页面中的变量设置 $_SESSION 'member' 变量，那也很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:29:14.813

`session_start()`需要向用户的浏览器添加一个 cookie，如果您在第一个之前有任何空间`<?php`，它将被输出到浏览器并且会搞砸设置 cookie。我会移动`session_start()`到第二行

```
<?php
session_start(); 
```

并确保没有多余的空间，您可以检查您的浏览器 cookie，看看您是否有 cookie PHP_SESSION 或类似的，如果您

```
print session_start(); 
```

`true`如果能够创建会话，它应该返回- 如果不是，您可能在 PHP 配置和创建会话时遇到问题。

这也需要纠正

`header("location:succesful_login.php");`

应该

`header("Location: succesful_login.php");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:00:19.837

检查 php.ini 文件中的会话超时时间

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-19T05:23:36.460

转到 Ipage 并登录到您的帐户。
转到 CGI 和脚本语言支持在那里
选择 PHP 脚本
通过按 ctrl +f 找到 save_path 来编辑 php.ini 文件并将
`session.save_path = "/var/php_sessions"`
更改为
`session.save_path = "/tmp" `

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T05:31:50.587

你需要尝试一些事情来看看出了什么问题。让我们尝试查看以下几行。

```
session_start();
$_SESSION['member'] = "affirmative";
header("location:succesful_login.php"); 
```

注释掉标头位置重定向。在 $_SESSION['member'] 设置为肯定后，回显该变量以查看其中的内容。

```
echo "DBUG: ".$_SESSION['member']. "<br />"; 
```

让我们先测试一下，让它工作，然后你可以用你要求的用户名设置它。

```
$_SESSION['member'] = $farmeruser; 
```

但是 $farmeruser 直接来自 $_GET... 您可能希望在阻止 SQL 注入后从行中获取用户名。

让我们在设置后立即检查该代码以查看它是否工作。我还喜欢将 session_start() 放在页面顶部。将连接数据库详细信息放入单独的包含文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T14:12:31.763

好的，虽然 Anad Pal 的答案不是正确的，但它让我朝着正确的方向前进。原来您必须在以下行更改您的 iPage 帐户的 php.ini 文件

```
session.save_path = "/var/php_sessions" 
```

到

```
session.save_path = "/tmp" 
```

现在一切正常。谢谢！具有讽刺意味的是，这不是我自己的代码，但是 ipage 存储会话的默认设置不起作用>.<

# cocos2d-iphone - CCLayer UIGestureRecognizer 和 HUD

> ID：13409469
> 
> 赞同：0
> 
> 时间：2012-11-16T02:22:01.350
> 
> 标签：cocos2d-iphone, zooming, hud

嗨 cocos2d 游戏开发者，我有一个简单的问题

我正在实现一个 CCScene，上面有两个 CCLayers，一个是游戏，另一个是 HUD，如下所示：

```
+ (CCScene *)scene {
    CCScene *scene = [CCScene node];
    LevelLayer *layer = [LevelLayer node];
    LevelHUDLayer *hud = [LevelHUDLayer node];
    layer = [layer init];

    [layer setHUDLayer:hud];
    [hud setParentLevel:layer];

    [scene addChild:hud z:HUD_ZLevel];
    [scene addChild:layer];

    return scene;
} 
```

这很好用。我也有一个 UIPinchGestureRecognizer ，我是这样实现的：

```
- (void)onEnterTransitionDidFinish {
    pinch = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(makePinch:)];
    [[CCDirector sharedDirector].view addGestureRecognizer:pinch];
} 
```

然后我稍后在代码中捕捉到手势，如下所示：

```
self.scale = pinch.scale; 
```

这完美无缺，除了我想确保只有游戏层接收手势而不是 HUDLayer。现在触摸 HUDLayer 的控件并试图在屏幕上移动角色会导致关卡缩放，这很烦人。

所以我的问题是如何只分配 LevelLayer 来拾取手势识别器？我认为如果我可以访问 CCLayer 的 UIView 这将很容易，但似乎我只能访问 CCDirector.sharedDirector.view

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:44:12.413

您无法访问 CCLayer 的视图，原因很简单：它不存在。所有 cocos2d 逻辑都在单个 openGL 视图中完成。

要限制手势识别器的区域，您可以实现委托方法`gestureRecognizerShouldBegin:`。在那里你可以检查触摸的位置，`NO`如果它们在你的 HUD 上，而不是游戏层，则返回。

另一种方法是使用 cocos2d 的 CCTouchDispatcher 实现自己的手势识别器。

# java - Oracle 翻译的 Java 等价物

> ID：13409473
> 
> 赞同：2
> 
> 时间：2012-11-16T02:22:22.523
> 
> 标签：java, string, oracle, equivalent, sql-function

java中是否有任何等效的字符串函数或库，其行为方式与oracle translate函数的行为方式相同？

在 oracle 中，我可以这样做：

```
select translate(
 '23423k!(dfgd){sdf};',
 '(){}k!',
 '{}()'
 ) from dual; 
```

得到这个：

```
23423{dfgd}(sdf); 
```

但是在java中，如果我这样做：

```
 String a="23423k!(dfgd){sdf};";
    String b=a
        .replace("(", "{")
        .replace(")", "}")
        .replace("{", "(")
        .replace("}", ")")
        .replace("!", "")
        .replace("k", "")
        ;
    System.out.println("ori:"+a);
    System.out.println("mod:"+b); 
```

我明白了：

```
ori:23423k!(dfgd){sdf}; 
mod:23423(dfgd)(sdf); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T02:34:40.560

[Apache commons-Lang 库](http://commons.apache.org/lang/)有[StringUtils.replaceChars()](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#replaceChars-java.lang.String-java.lang.String-java.lang.String-)实用方法，可以做到这一点。

的 java 说：

> 一次性替换字符串中的多个字符。此方法也可用于删除字符。搜索字符的长度通常应等于替换字符的长度。如果搜索字符较长，则删除多余的搜索字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:27:46.037

```
String a="23423k!(dfgd){sdf};";
    String b=a
        .replace("(d", "{d")
        .replace("d)", "d}")
        .replace("{s", "(s")
        .replace("f}", "f)")
        .replace("!", "")
        .replace("k", "")
        ; 
```

这行得通，但这不是正确的方法。查看使用 String.replace() 或 StringBuffer 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T02:30:27.543

我会构建一个正则表达式来匹配字符串并捕获感兴趣的子字符串，然后使用字符串连接将正确的样板添加回

# django - django respite +主干在获取url时搞砸了

> ID：13409474
> 
> 赞同：3
> 
> 时间：2012-11-16T02:22:23.107
> 
> 标签：django, rest, backbone.js

我正在尝试使用[django-respite](https://github.com/jgorset/django-respite)与`Backbone.js`. 假设我有：

模型.py：

```
class Books(models.Model):
      name = models.CharField(max_length = 100)
      author = models.CharField(max_length = 100) 
```

和views.py：

```
from respite import Views

class BooksView(Views):

    def index(self, request)
    return self._render(
        request = request,
        template = 'index/index'
        context = dict(
            books = Books.objects.all()
        ),
        status = 200,
    )

book1 = Books.objects.create(name = 'foo', author = 'bar')
book2 = Books.objects.create(name = '123', author = 'abc') 
```

当我使用它来获取它时`Tastypie`，它会产生 1 个集合和 2 个模型，第一个模型持有`book1`，第二个持有`book2`持有该 2 个模型的集合。

当我使用 using 获取它时`respite`，它会产生 1 个集合 1 个模型，该模型就像一个集合（模型数组），并且该集合包含该 1 个模型。

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:43:13.587

我没有喘息的经验，但我认为问题在于您返回的 JSON dict 是一个带有一个键的字典，以及那本书中的所有模型。

您可能只想从视图中返回一个数组，因此 Backbone 会看到它是模型的集合。

所以改变：

`context = dict(books = Books.objects.all()),`

至

`context = Books.objects.all(),`

哪个应该返回一个数组（如果喘息足够聪明）。

# xamarin.ios - Monotouch for SQLite 的支持级别

> ID：13409477
> 
> 赞同：2
> 
> 时间：2012-11-16T02:23:09.140
> 
> 标签：xamarin.ios, monodevelop

我想知道最新的 MonoTouch 对使用 SQLite 的支持程度如何。我能找到的最接近的信息是这篇文章，它指的是 v1.2 中的有限支持，但它承认您在使用它时可能会遇到运行时错误。

这是我在 Xamarin 网站上找到的：http: [//docs.xamarin.com/ios/Guides/Advanced_Topics/System.Data](http://docs.xamarin.com/ios/Guides/Advanced_Topics/System.Data)

这真的让我害怕。是否有任何文档表明 Xamarin 对 SQLite 的当前支持级别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:56:13.870

这个[链接](http://docs.xamarin.com/ios/Guides/Advanced_Topics/System.Data)已经过时了，它是关于 MonoTouch 1.2 的，最新的 MonoTouch 版本是[6.0](http://docs.xamarin.com/ios/releases/MonoTouch_6/MonoTouch_6.0)。

我[在 App Store 上](http://skahal.com/category/apps/)的两个应用程序中使用 Sqlite 和[Vici CoolStorage](http://viciproject.com/wiki/Projects/CoolStorage/MonoTouch)：简单且完全没有问题。我从未见过使用 Sqlite 的任何运行时错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:36:11.403

我不能谈论在那篇文章之后 System.Data 支持的变化，但我认为人们使用[csharp-sqlite](http://code.google.com/p/csharp-sqlite/)或者更好的是[sqlite-net](https://github.com/praeclarum/sqlite-net)来代替它是很常见的。Csharp-sqlite 是 SQLite 的一个独立端口。sqlite-net 在某种意义上“更好”，因为它是一个最小的库，您可以在其中将单个文件放入项目中，并使用它来支持各种单声道平台上的 sqlite。然而，由于基于反射的 ORM，它仍然具有很好的特性，例如“强类型查询”。因此，如果您不需要完整的 Sqlite 驱动程序，它是一个不错的选择。

Greg Shackles 在 4 月份用 Monotouch/droid 举办了一场关于 x 平台开发的精彩研讨会，他介绍了这些库和其他库：[http ://blog.xamarin.com/2012/04/25/cross-platform-mobile-development-研讨会/](http://blog.xamarin.com/2012/04/25/cross-platform-mobile-development-seminar/)

# c# - 如何自动调整 wpf 行的大小？

> ID：13409479
> 
> 赞同：2
> 
> 时间：2012-11-16T02:23:38.500
> 
> 标签：c#, wpf, line

我有一个 WPF 项目，我必须`lines`在项目中绘制一些。但是当我调整窗口大小时，`lines`不会调整大小，因为我使用画布坐标来绘制线条。有人告诉我如何使线条调整大小随窗口大小而变化吗？

我的代码：

```
public static void drawGridLines(MainWindow main)
    {
            double axisX = 10;
            Line lastLine = new Line();
            lastLine.X2 = axisX;
            lastLine.Y2 = 15;
            double y = 0;
            double x = 0;
            bool first = true;
            int[] point = new int[10] { 1, 3, 8, 9, 9, 0, 7, 5, 4, 1 };

        for (int i = 0; i < point.Length; i++) // iterate over your gridview rows 
            {
                Line newline = new Line();

                newline.X1 = lastLine.X2;
                newline.Y1 = lastLine.Y2;

                newline.X2 = axisX + (Point[i] * 5); // calculate X position of the current cell 
                newline.Y2 = lastLine.Y2 + 10; // calculate Y position of the current cell 
                x = newline.X2;
                y = newline.Y2;

                if (!first)
                {
                    // first minimum cell should't be drawn, it is just the start point for next line                  
                    drawLine(main, newline);
                }
                else
                {
                    first = false;
                }

                lastLine = newline;
            }

public static void drawLine(MainWindow main, Line line)
    {
        line.HorizontalAlignment = HorizontalAlignment.Left;
        line.VerticalAlignment = VerticalAlignment.Center;
        line.Stroke = System.Windows.Media.Brushes.SteelBlue;
        line.StrokeThickness = 1.5;
        main.myLineCanvas.Children.Add(line);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:58:32.760

把你`Canvas`放在一个[`Viewbox`](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox.aspx)：

```
<Viewbox>
    <Canvas x:Name="myLineCanvas" />
</Viewbox> 
```

[`Stretch`](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox.stretch.aspx)您可以使用和更改其行为[`StretchDirection`](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox.stretchdirection.aspx)。

![在此处输入图像描述](../Images/6160ba4e1de4e6fbcd992694dec9133b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:57:46.983

您应该尝试使用 ViewBox，看看它是否适合您的情况，就像用 ViewBox 围绕画布一样简单。

```
<Window ...
    ...>

    <ViewBox>
        <Canvas .....>
        </Canvas>
    </ViewBox>
</Window> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:51:33.853

Window 有一个 SizeChanged 事件。在您的处理程序中，您可以获取窗口的新大小并相应地设置行的端点。

# java - Rootbeer GPU CUDA_ERROR_OUT_OF_MEMORY

> ID：13409482
> 
> 赞同：1
> 
> 时间：2012-11-16T02:24:04.737
> 
> 标签：java, gpu, rootbeer

我一直在尝试使用这个 GPU 库`Rootbeer`我已经运行了演示，并且它们运行良好，然后我尝试运行我的代码，并且在这个片段的倒数第二行 ( `Rootbeer rootbeer = new Rootbeer();`)，我收到一个错误（请参阅最后一节）。

```
 // This sesction is within a JSlider change event.
    int val = sldBrightness.getValue();
    List<Kernel> jobs = new ArrayList<Kernel>();
    jobs.add(new Brightness(val));
    Rootbeer rootbeer = new Rootbeer();
    rootbeer.runAll(jobs); 
```

这是我正在运行的课程：

```
package pocketshop.graphics.adjustments;

import edu.syr.pcpratts.rootbeer.runtime.Kernel;
import java.awt.image.BufferedImage;
import pocketshop.Canvas;
import pocketshop.graphics.Colors;
import pocketshop.graphics.Preview;

/**
 *
 * @author Ryan
 */
public class Brightness implements Kernel {

    protected int amount = 0;
    protected int width, height;
    int[] pixels; // = new int[width * height];

    public void amount(int amount) {
        this.amount = amount;
    }

    public Brightness(int amount) {
        this.amount = amount;
        width = Canvas.image.getWidth();
        height = Canvas.image.getHeight();
        pixels = new int[width * height];
        Canvas.image.getRGB(0, 0, width, height, pixels, 0, width);
    }

    public void setImage() {
        BufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
        img.setRGB(0, 0, width, height, pixels, 0, width);
        Preview.setImage(img);
    }

    @Override
    public void gpuMethod() {
        int[] pixels = this.pixels;
        for (int i = 0; i < pixels.length; i++) {
            int pixel = pixels[i];
            int red = Colors.red(pixel);
            int green = Colors.green(pixel);
            int blue = Colors.blue(pixel);

            red += amount;
            if (red > 255) {
                red = 255;
            } else if (red < 0) {
                red = 0;
            }

            green += amount;
            if (green > 255) {
                green = 255;
            } else if (green < 0) {
                green = 0;
            }

            blue += amount;
            if (blue > 255) {
                blue = 255;
            } else if (blue < 0) {
                blue = 0;
            }
            pixels[i] = Colors.rgba(red, green, blue);
        }
    }
} 
```

这是输出错误。我真的很困惑为什么会这样`Caused by: edu.syr.pcpratts.rootbeer.runtime2.cuda.CudaErrorException: CUDA_ERROR_OUT_OF_MEMORY: gpuHandlesMemory memory allocation failed`

```
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at edu.syr.pcpratts.rootbeer.runtime.RootbeerFactory.create(RootbeerFactory.java:19)
    at edu.syr.pcpratts.rootbeer.runtime.Rootbeer.<init>(Rootbeer.java:19)
    at pocketshop.dialogs.BrightnessContrastDialog.sldBrightnessStateChanged(BrightnessContrastDialog.java:191)
    at pocketshop.dialogs.BrightnessContrastDialog.access$100(BrightnessContrastDialog.java:21)
    at pocketshop.dialogs.BrightnessContrastDialog$2.stateChanged(BrightnessContrastDialog.java:65)
    at javax.swing.JSlider.fireStateChanged(JSlider.java:432)
    at javax.swing.JSlider$ModelListener.stateChanged(JSlider.java:350)
    at javax.swing.DefaultBoundedRangeModel.fireStateChanged(DefaultBoundedRangeModel.java:364)
    at javax.swing.DefaultBoundedRangeModel.setRangeProperties(DefaultBoundedRangeModel.java:302)
    at javax.swing.DefaultBoundedRangeModel.setValue(DefaultBoundedRangeModel.java:168)
    at javax.swing.JSlider.setValue(JSlider.java:531)
    at pocketshop.dialogs.BrightnessContrastDialog.txtBrightnessActionPerformed(BrightnessContrastDialog.java:180)
    at pocketshop.dialogs.BrightnessContrastDialog.access$300(BrightnessContrastDialog.java:21)
    at pocketshop.dialogs.BrightnessContrastDialog$4.actionPerformed(BrightnessContrastDialog.java:88)
    at javax.swing.JTextField.fireActionPerformed(JTextField.java:508)
    at javax.swing.JTextField.postActionEvent(JTextField.java:721)
    at javax.swing.JTextField$NotifyAction.actionPerformed(JTextField.java:836)
    at javax.swing.SwingUtilities.notifyAction(SwingUtilities.java:1664)
    at javax.swing.JComponent.processKeyBinding(JComponent.java:2879)
    at javax.swing.JComponent.processKeyBindings(JComponent.java:2926)
    at javax.swing.JComponent.processKeyEvent(JComponent.java:2842)
    at java.awt.Component.processEvent(Component.java:6282)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1895)
    at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:762)
    at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1027)
    at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:899)
    at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:727)
    at java.awt.Component.dispatchEventImpl(Component.java:4731)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:155)
    at java.awt.WaitDispatchSupport$2.run(WaitDispatchSupport.java:182)
    at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:221)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.awt.WaitDispatchSupport.enter(WaitDispatchSupport.java:219)
    at java.awt.Dialog.show(Dialog.java:1077)
    at java.awt.Component.show(Component.java:1651)
    at java.awt.Component.setVisible(Component.java:1603)
    at java.awt.Window.setVisible(Window.java:1014)
    at java.awt.Dialog.setVisible(Dialog.java:1003)
    at pocketshop.Main.jMenuItem4ActionPerformed(Main.java:233)
    at pocketshop.Main.access$200(Main.java:15)
    at pocketshop.Main$3.actionPerformed(Main.java:180)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.AbstractButton.doClick(AbstractButton.java:376)
    at javax.swing.plaf.basic.BasicMenuItemUI.doClick(BasicMenuItemUI.java:833)
    at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(BasicMenuItemUI.java:877)
    at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:289)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
Caused by: edu.syr.pcpratts.rootbeer.runtime2.cuda.CudaErrorException: CUDA_ERROR_OUT_OF_MEMORY: gpuHandlesMemory memory allocation failed
    at edu.syr.pcpratts.rootbeer.runtime2.cuda.CudaRuntime2.setup(Native Method)
    at edu.syr.pcpratts.rootbeer.runtime2.cuda.CudaRuntime2.<init>(CudaRuntime2.java:92)
    at edu.syr.pcpratts.rootbeer.runtime2.cuda.CudaRuntime2.v(CudaRuntime2.java:38)
    at edu.syr.pcpratts.rootbeer.runtime.ConcreteRootbeer.<init>(ConcreteRootbeer.java:27)
    ... 105 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:19:38.583

尝试编辑文件：/.rootbeer/config

将 reserve_mem 值更改为更大的数字。

然后可以通过电子邮件向我发送此命令的结果：$ java -jar Rootbeer.jar -printdeviceinfo

# php - Push Notification Server 使用什么语言来维护与 Apple Push Notification Server 的套接字流连接

> ID：13409489
> 
> 赞同：0
> 
> 时间：2012-11-16T02:24:37.713
> 
> 标签：php, ios, apache, symfony, push-notification

我正在为我们的 iPhone 应用程序实现一个推送通知服务器。

我正在使用 Symfony Web 框架为我的 iPhone 应用程序构建后端系统。

我构建推送通知服务器的方式是：

1) 与 Apple 的 PNS 建立套接字流连接。

2) 开始一个无限的while循环

3) 在 while 循环中，查找 SQL 数据库中的任何新通知

4) 如果我的 SQL 数据库中有新的推送通知实体，将它们全部获取并发送出去

下面是我的PHP代码：

```
// ----------------------------------------------------------
// Opens a connection to Apple's Push Notification server
// ----------------------------------------------------------
public function pnsConnect()
{
    // push notification pem certificate file
    //$this->apnscert_dev = $this->container->getParameter('apnscert_dev');
    //$this->apnshost_dev = $this->container->getParameter('apnshost_dev');
    $this->apnscert_dev = 'cert_and_key_dev.pem';
    $this->apnshost_dev = 'gateway.sandbox.push.apple.com';
    $this->apnsport = 2195; //$this->container->getParameter('apnsport');

    $pempath_dev = __DIR__."/../Resources/config/".$this->apnscert_dev;

    echo 'pem path = '.$pempath_dev.'<br />';

    $streamContext = stream_context_create();

    stream_context_set_option($streamContext, 'ssl', 'local_cert', $pempath_dev);

    // push notification server connection object
    $this->apns = stream_socket_client('ssl://' . $this->apnshost_dev . ':' . $this->apnsport, $error, $errorString, 2, STREAM_CLIENT_CONNECT, $streamContext);
    error_log(date('Y-m-d H:i:s')." - Successfully connected to APNS", 3, 'PushLog.log'); // log for successful connection to help with debugging
}

// ---------------------------------------------------------
// Sends a push notification to multiple targeted tokens
// i.e. a group of users
//
// pnsSendToTokenGroup() only sends to a group, not a list
// of tokens specifically selected
// ---------------------------------------------------------    
public function pnsSendToMultiple($paramArrTokens, $paramMessage)
{
    if(!$paramMessage || !$paramArrTokens)
    {
        return new Response('Missing input parameters');
    }

    $badge = 1;
    $sound = 'default';
    $development = true;

    $payload = array();
    $payload['aps'] = array('alert' => $paramMessage, 'badge' => intval($badge), 'sound' => $sound);
    $payload = json_encode($payload);

    //echo 'message = '.$paramMessage.'<br />';

    //echo '<br />Received '.count($paramArrTokens).' tokens<br />';

    foreach($paramArrTokens as $paramToken)
    {
        //echo 'current token = '.$paramToken.'<br />';

        $apns_message = chr(0).chr(0).chr(32).pack('H*', str_replace(' ', '', $paramToken)).chr(0).chr(strlen($payload)).$payload;
        fwrite($this->apns, $apns_message);

        $apns_message = null;
        //$paramToken = null;
    }

    $badge = null;
    $sound = null;
    $development = null;
    $payload = null;

    //$paramArrTokens = null;
    //$paramMessage = null;
}

// ---------------------------------------------------------
// Keeps this PNS server alive to maintain the connection
// to Apple's PNS server. This process will continually
// check the database for any new notification and push
// the notificaiton to who ever we need to.
// ---------------------------------------------------------    
public function pnsKeepAlive()
{
    // prevents time out
    ini_set('max_input_time', 0);
    ini_set('max_execution_time', 0);

    $this->pnsDisconnect();
    $this->pnsConnect();

    // circular reference collector
    gc_enable();

    // start infinite loop to keep monitoring for new notifications
    while(true)
    {
        echo 'checking database for new notifications ...<br />';

        set_time_limit(0);

        gc_collect_cycles();

        $today = new DateTime('today');
        $now = new DateTime();

        $query = $this->em->createQuery('SELECT n FROM MyAppWebServiceBundle:Notification n WHERE n.sent = :paramSent and n.notificationdate >= :paramDate and n.notificationdate <= :paramNow')
            ->setParameter('paramSent', false)
            ->setParameter('paramDate', $today)
            ->setParameter('paramNow', $now);

        $notifications = $query->getResult();

        $today = null;
        $now = null;

        //echo 'number of unsent notifications found for today = '.count($notifications).'<br />';

        // for each notification, combine all tokens into a single array
        // to be looped through and sent into notification processing queue
        foreach($notifications as $notification)
        {
            $this->pushNotification($notification);
        }

        $this->em->detach($query);

        $notifications = null;
        $query = null;
    }

    $this->pnsDisconnect();
}

// ---------------------------------------------------------    
// Finds all tokens attached to Notification
// and construct an array of all unique tokens to be
// sent out to all receivers of the notification
// ---------------------------------------------------------    
public function pushNotification($notification)
{
    // initialise an empty array
    $arrAllTokens = array();

    // add all raw tokens to final array first
    foreach($notification->getTokens() as $token)
    {
        // only add active tokens
        if($token->getActive() == true)
        {
            $arrAllTokens[] = $token->getToken();
        }
    }

    // for each token group add all 
    // tokens in each group to final array
    foreach($notification->getTokenGroups() as $tokenGroup)
    {
        foreach($tokenGroup->getTokens() as $token)
        {
            // only add active tokens
            if($token->getActive() == true)
            {
                $arrAllTokens[] = $token->getToken();
            }
        }
    }

    $arrAllTokens = array_unique($arrAllTokens);

    $this->pnsSendToMultiple($arrAllTokens, $notification->getMessage());

    $notification->setSent(true);
    $this->em->flush();
    $this->em->detach($notification);

    $arrTokens = null;
    $arrAllTokens = null;
    $notification = null;
} 
```

Apple 已声明 Push Provider 应保持与 Apple Push Server 的连接，而不是频繁断开和重新连接，否则他们会将其视为拒绝服务攻击并阻止我们。

这就是为什么我有一个无限的 while 循环，所以脚本不会结束以允许我保持与 Apple 的推送通知套接字流的持续连接。

目前，我的推送通知服务器在我的本地机器上工作（我的 pnsKeepAlive() 无限循环永远持续）但是当我将我的代码部署到生产服务器时，我的 pnsKeepAlive()（见上面的代码）不会永远持续下去.

我的生产服务器是 Linode 上的共享主机。它是一个运行 Apache 和 Debian 的 LAMP 服务器。

我听说 PHP 不是为做这些工作而设计的。

所以我的问题是是否有其他语言是为这类事情设计的（维护推送通知服务器的持久连接）。

我调查过 Gearman，但也有人告诉我 Gearman 并不是我真正需要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:48:35.157

我有一些关于推送通知服务器的 Node JS + socket.io 的好故事。

这是一篇很棒的文章，可能会对您有所帮助：http: [//www.gianlucaguarini.com/blog/nodejs-and-a-simple-push-notification-server/](http://www.gianlucaguarini.com/blog/nodejs-and-a-simple-push-notification-server/)

# c# - C#重复DataTable但只插入一个值唯一的行

> ID：13409490
> 
> 赞同：0
> 
> 时间：2012-11-16T02:24:50.237
> 
> 标签：c#

我正在使用以下代码：

`DataTable uniqueCou = CouponResult.DefaultView.ToTable(true, "URL");`

这很好，它只添加了值 URL，我想要的是来自 CouponResult 的所有 4 列，它们是（URL、Key、Item、Value）。当我使用上面的代码时，它只返回一列唯一的数据表。

我真正想要的是插入所有其他列中“URL”唯一的行。如果我在 DefaultView.ToTable(true, "URL");` 中包含其他 3 列，则结果实际上不是唯一的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:53:26.127

我想`CouponResult`没有唯一的数据。尝试这个，

```
DataTable uniqueCou = CouponResult.DefaultView.ToTable(true, new String[] {"URL","Key","Item","Value"}); 
```

# path-finding - A* 寻路 - 最接近无法步行的目的地

> ID：13409492
> 
> 赞同：0
> 
> 时间：2012-11-16T02:25:14.343
> 
> 标签：path-finding, a-star

我已经有一个可行的 A* 实现。问题是，如果您选择无法行走的目的地，则不会返回任何路径。我希望能够得到我能得到的“最接近的”。

最好的选择是完全动态的（不仅仅是检查目的地周围的 8 个图块来尝试找到一个）。这样，即使他们点击了一个被一大块不可行走瓷砖包围的不可行走瓷砖，它仍然会尽可能靠近。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T00:14:41.833

While the simple answers provided here MIGHT be sufficient enough, I think it depends on your game type and what you're trying to achieve.

For example, take this play field (sorry I'm reusing the same software I used to show you the fog of war :)) :

![play field](../Images/87c6044a6fb174b210ed920c9dc8b7c1.png)

As you can see, an Angry Chicken is blocking the path between the left side and the right side. The Angry Chicken could be anything... if it's a static obstacle, then going with the lowest `h node` might be enough, but if it's a dynamic object (like a locked door, draw bridge, etc...) the following examples might help you find out how you want to solve your problem.

If we set the destination for our Hero on the other side

![destination](../Images/fcf3ae50ff4d357e1e683147c803c778.png)

We need to think what we want the path to be, since obviously we can't reach it. Using a standard heuristic like `manhattan` distance or `euclidian` distance, you will get this result:

![dumb path](../Images/98b96b39862872da10897f2ff49006ce.png)

Which might be good enough, but if there's any way our little Hero could interact with the chicken to pass, it doesn't make sense at all, what you want is this

![interact path](../Images/64d4d5f7c93f1ce34aaa32957018ed68.png)

How can you do this? Well, an easy way to do this is to pathfind on `hierarchical graphs`. This sounds complicated but it isn't. First, you want to be able to build a new set of high level nodes and edges that will contain multiple grid nodes (or other representation, wouldn't change a thing)

![enter image description here](../Images/94d6e544e50d5c6340a7e8ddc6bdd5f8.png)

As you can see, we now have a right `blue node` and a left `red node`. The arrow represents the edge between the two nodes. How to build this graph you ask? It's easy, simply start from an open node, expand all of its neighbors and add them to a high level node, when you're done, open the dynamic nodes that could lead to another part of the graph and do the same.

Now, when you ask for a path from our Hero to the red `X`, you first do the pathfinding on the high level... is there a way from `blue node` to `red node`? Yes! Through the chicken.

You can now easily know how to navigate on the blue side by going to the `edge` that will allow you to cross, which is the chicken.

![interact path](../Images/64d4d5f7c93f1ce34aaa32957018ed68.png)

If it was just a plain wall, you could determine very quickly, by visiting a single node, that there is NO way to reach on the other side and then handle it the way you want, possibly still performing an A* and returning the lowest `h` node.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T00:23:16.177

您可以保留一个指针，该指针包含具有最低 h 值的图块，然后如果没有返回路径，则只需生成指向您所持有的图块的路径。

# php - PHP cURL 语法，因此我的 Web 表单将执行到本地（IP/命令）的帖子

> ID：13409493
> 
> 赞同：2
> 
> 时间：2012-11-16T02:25:25.897
> 
> 标签：php, http, curl, network-protocols

很棒的评论线程： [https](https://stackoverflow.com/a/6398220/1679026) ://stackoverflow.com/a/6398220/1679026给了我希望，但我没能解决我的问题。当我使用 cURL 来获取 www.php.net 页面时，它可以工作，所以 cURL 可以工作

我有一个位于本地 LAN ( [http://192.168.1.117](http://192.168.1.117) ) 上的网络设备，或者在我的客户端站点上，设备 (n) 位于其 LAN (173.18.13.xxx) 上。从 Local_Browser_Address 我可以键入“ [http://192.168.1.117/#diag/term&cmd=signage+sign+ALARM](http://192.168.1.117/#diag/term&cmd=signage+sign+ALARM) ”，网络设备会响应更改为“ALARM”状态。<-- 这就是我想用一键自动完成的！

在我的 web 表单上，当单击 Alarm_Button 时，我有 $_POST PHP 代码要执行。我希望我的客户物理站点上的用户能够在他们的浏览器中单击我的 web_form (www.mySite.com/index.php?option=com_rsform&formId=27) 上的 the_button 并让 cURL 代码发送/发布/执行(http-ALARM) 地址/指令字符串。我可以做这件事吗？在发送地址/指令时或之后不需要 UI。

我试过：

```
 $c = curl_init('http://192.168.1.117/u/r/l');
     curl_setopt($c, CURLOPT_HTTPHEADER, array('#diag/term&cmd=signage+sign+ALARM'));
     curl_exec($c); 
```

和

```
 $curl = curl_init();
     echo"<br>  the curl resource is ch --> $curl";
     curl_setopt ($curl, CURLOPT_URL, "http://192.168.1.117");
     curl_setopt ($curl, CURLOPT_POST, "/#diag/term&cmd=signage+sign+CELL_IN_ALARM");
     curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
     $result = curl_exec ($curl);
     curl_close ($curl);
     echo"<br>  The RESULT (1) is --> $result"; 
```

没有错误消息，但没有有用的结果。

首先：恐怕我会被诸如“no_outside_web_page_doing_junk_locally”之类的规则之类的安全限制所阻止。

如果我必须在内部 Web 服务器上创建本地页面，我可以在同一/相邻网络上的另一台设备上执行此操作。但是问题仍然存在，如何在 cURL 工具中表达 ip/command 指令。

我已经搜索了 StackOverFlow 信息，看起来我很接近但在某处错过了“明显的真相”！

希望我的挑战值得你关注。谢谢你。 - -更新 - -

![HTTPFox 捕获 POST 事件](../Images/26107ca8fe45eeaa6d570f486d38e061.png) 突出显示的（484）上方和下方的“已发送”值（461）具有各自的POST数据：{“version”：“1.1”，“method”：“unit.baseInfo”，“id”：28，“params ":[]} {"version":"1.1","method":"term.cmd","id":29,"params":["signage sign CELL_IN_ALARM"]} {"version":"1.1" ,"方法":"unit.baseInfo","id":30,"params":[]}

这显示了类型 application/jason 和 URL - [http://192.168.1.117/jasonrpc-(jasonRemoteProcedureCall?)](http://192.168.1.117/jasonrpc-(jasonRemoteProcedureCall?))

这会使我的斗争变得简单还是复杂？

-- 新更新 --

当我运行以下代码时，我得到了 php.net 主页和一个空白返回“...is -->”作为第二个返回...

```
// From http://www.tuxradar.com/practicalphp/15/10/2
  $curl1 = curl_init();
    curl_setopt ($curl1, CURLOPT_URL, "http://www.php.net");
    curl_setopt($curl1, CURLOPT_RETURNTRANSFER, 1);
    $result = curl_exec ($curl1);
    curl_close ($curl1);
    print $result;
//====================
  $curl = curl_init();
    curl_setopt ($curl, CURLOPT_URL, "http://192.168.1.117");
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    $result = curl_exec ($curl);
    curl_close ($curl);
    //print $result;
  echo"<br>  The RESULT (1) is --> $result"; 
```

第一个是 www，第二个是我网络上的设备。这是原始的网络/Web 冲突吗？真的很欣赏这里的大脑循环！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:42:57.117

你在想`CURLOPT_POSTFIELDS`。

这可以像这样使用

```
$ch = curl_init($site);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, "field1=value1&field2=value2&field3=value3");
$chx = curl_exec($ch); 
```

还应注意 CURLOPT_POST 根据[此处找到的文档仅采用 TRUE 或 FALSE](http://us3.php.net/curl_setopt)

# mysql - sql if 存在简单语法错误

> ID：13409498
> 
> 赞同：1
> 
> 时间：2012-11-16T02:26:56.953
> 
> 标签：mysql, sql

我不断收到此语法错误，但在与其他示例进行比较时找不到任何问题。

```
if EXISTS (select 1 from City where name = 'Perth')
THEN  Print 'Record exits - Update'
ELSE  Print 'Record doesn''t exist - Insert' 
```

我发现错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds
to your MySQL server version for the right syntax to use near 'if EXISTS (select
1 from City where name = 'Perth') THEN Print 'Record e' at line 1 
```

我在zend cloud和普通的phpmyadmin mysql 5上都得到了这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:55:49.097

这实际上不是一个有效的 MySQL 查询。看起来您正在尝试将 SQL 与根据查询是否存在来显示输出的方式混合在一起。您可以使用它来返回 SQL 中是否`Perth`存在：

```
SELECT EXISTS(SELECT 1 FROM City WHERE name = 'Perth') 
```

这将返回`1`or `0`，然后您可以使用服务器端脚本对其进行解析。它给你一个语法错误的原因是因为 MySQL`IF`语句采用形式`IF(condition, <action if true>, <action if false>)`，没有使用`THEN`or `ELSE`（这在编程语言中很常见）。此外，MySQL 没有明确的`PRINT`声明，但您可以使用它`SELECT`来完成您想要的上述操作（请注意，`EXISTS`如果结果不返回任何内容，我们可以删除因为 False 将被暗示）：

```
SELECT IF(
      (SELECT 1 FROM City WHERE name = 'Perth'),
      (SELECT 'Record exists - update'),
      (SELECT 'Record does not exist - Insert')
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T22:26:37.497

您需要使用“选择”而不是`print`以下方式

```
select IF((select 1 from city where name='Perth'),
'Record exits - Update','Record does not exist - Insert'); 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!2/b9ddd/20)。下面展示了`IF`in select 语句

```
IF((select 1 from city where name='Perth'),
'Record exits - Update','Record does not exist - Insert'); 
```

`IF`包含两条消息。

第一：`'Record exits - Update'`第二：`'Record does not exist - Insert'`

`(select 1 from city where name='Perth')`如果有一些结果（相当于 EXISTS），则打印第一条消息，否则您将收到第二条消息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T03:47:54.790

另一种方法：使用分组函数将始终返回一条记录。如果没有要操作的记录，则 group by 函数的结果将为`NULL`. 您可以将其用作决策机制。

```
postgres=# create table city(name text);
CREATE TABLE
postgres=#
postgres=# select COALESCE( max('Record exists - Update'), 'Record doesn''t exist - Insert' ) as state
postgres-#   from city
postgres-#   where name = 'Perth';
             state
-------------------------------
 Record doesn't exist - Insert
(1 row)

postgres=#
postgres=# insert into city values('Perth');
INSERT 0 1
postgres=#
postgres=# select COALESCE( max('Record exists - Update'), 'Record doesn''t exist - Insert' )  as state
postgres-#   from city
postgres-#   where name = 'Perth';
         state
------------------------
 Record exists - Update
(1 row) 
```

# javascript - 如何将列表框更改为可编辑框？

> ID：13409505
> 
> 赞同：0
> 
> 时间：2012-11-16T02:27:41.837
> 
> 标签：javascript, jquery, listbox

我按表格制作了一个列表框，因为我需要两列来显示列表。而且，当我点击列表框时，我正在尝试编辑表格中的文本。我的意思是当我单击一个列表时，所选列表会更改为可编辑框，因此我可以直接编辑文本，而无需在出现的另一个框上放置文本。有没有办法做到这一点？？

这是列表框的代码：

```
$(document).ready(function () {
   $('div#selReporterList table tr:has(td)').click(function() {
     $('.selected').removeClass('selected');
     $('.selected').addClass('deselected');
     $(this).addClass('selected'); 
   });  
}); 
```

表格在这里：

```
<div id="selReporterList" class="srList">
  <div>
    <table id="list" cellspacing="0" border="1" style="border-collapse:collapse;" ndblclick="edit()">
      <tr>
        <td id="a" class="1" value="apple">apple</td>
        <td id="b" class="2" value="good">good</td>
      </tr>
      <tr>
        <td id="a" class="1" value="banana">banana</td>
        <td id="b"class="2" value="very good">very good</td>
      </tr>
    </tr>
    </table>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:37:08.343

是的，您可以将文本放在 an 中`<input type=text editable="false" />`，然后在单击它时将`editable`属性设置为 true。

PS当你有多行代码时，把它全部去掉，突出显示它并按comment+k，`是内联代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T03:08:15.050

```
 <div id="selReporterList" class="srList">
        <div>
            <table id="list" cellspacing="0" border="1" onclick="changeTableModeToEdit(true)" ondblclick="changeTableModeToEdit(false)" style="border-collapse:collapse;" ndblclick="edit()">
                <tr>
                    <td id="a" class="1" value="apple"><span>apple</span></td>
                    <td id="b" class="2" value="good"><span>good</span></td>
                </tr>
                <tr>
                    <td id="a" class="1" value="banana"><span>banana</span></td>
                    <td id="b"class="2" value="very good"><span>very good</span></td>
                </tr>
            </tr>
        </table>
    </div>

    <script type="text/javascript">
        function changeTableModeToEdit(toEditMode){
            var value;
            if(toEditMode)
            {
                $('#list span').each(function(){
                    value = $(this).text();
                    $(this).after('<input type="text"/>');
                    $(this).next().val(value).focus();          
                    $(this).remove();
                });
            }
            else
            {
                $('#list input').each(function(){
                    value = $(this).val();
                    $(this).after('<span> </span>');
                    $(this).next().text(value);         
                    $(this).remove();
                });
            }
        }
    </script> 
```

# c - Format String Attack

> ID：13409508
> 
> 赞同：6
> 
> 时间：2012-11-16T02:27:56.140
> 
> 标签：c, buffer-overflow, format-string, fortify-source

I have a small C program to be exploited. And I also understood the logic behind the attack to be performed. However, as much as I try, it is just not working for me.

```
#include <stdio.h>
#include <stdlib.h>

#define SECRET1 0x44
#define SECRET2 0x55

int main(int argc, char *argv[]) {
  char user_input[100];
  int *secret;
  int int_input;
  int a, b, c, d; /* other variables, not used here.*/

  /* The secret value is stored on the heap */
  secret = (int *) malloc(2*sizeof(int));

  /* getting the secret */
  secret[0] = SECRET1; secret[1] = SECRET2;

  printf("Please enter a decimal integer\n");
  scanf("%d", &int_input);  /* getting an input from user */
  printf("Please enter a string\n");
  scanf("%s", user_input); /* getting a string from user */

  printf(user_input);
  printf("\n");

  /* Verify whether your attack is successful */
  printf("The original secrets: 0x%x -- 0x%x\n", SECRET1, SECRET2);
  printf("The new secrets:      0x%x -- 0x%x\n", secret[0], secret[1]);
  return 0;
} 
```

I just need to print the address and value of secret[0] using the format string "printf(user_input);"

I have tried giving something like "\x6e\xaf\xff\xff%x%x%x%x%s". but it is not working. Any suggestions will be appreciated. Thanks a lot.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T05:10:04.937

这看起来像是一个类的练习，所以我将提供一些指针，但没有实际的解决方案。

您试图通过提供不受信任的输入来利用此程序。这里有两个相当明显的错误；一个是`scanf()`using `%s`，因为您可以溢出缓冲区并覆盖堆栈。另一个是格式字符串漏洞。在函数返回之前，覆盖堆栈可能不会让您做任何有趣的事情。根据“验证您的攻击是否成功”部分，您可能希望在此之前利用该漏洞，所以我猜测它应该是一个格式字符串漏洞。

根据验证部分，您应该覆盖指向的内存`secret`。导致`printf`写入内存中受控位置的唯一方法是使用`%n`格式说明符，它写入给定的指针。

现在的诀窍是弄清楚如何在堆栈中向上走，直到找到合适的指针。方便的是，在堆栈指针之前有一个用户控制的整数。因此，我们输入一个易于识别的数字（可能是 65535，它是`ffff`十六进制），并使用带有很多`%x`s 的格式字符串来查看堆栈中的内容。一旦我们发现，堆栈上的下一个东西应该是指针。

唔。我刚刚尝试了这个，结果发现它并不是那么简单。堆栈帧的确切布局实际上与声明的顺序无关；对我来说，不同的系统之间有所不同。取而代之的是，我不得不使用很多`%lx`s，以及开头的一个众所周知的字符串，并添加一行来打印出实际的指针，这样我就会知道什么时候找到它。然后将对应的替换为`%lx`以`%n`通过该指针写入。尝试 20 左右可能是最简单`%lx`的，然后用 逐个替换`%n`，直到您设法覆盖该指针。

无论如何，希望这足以让你开始。如果您有任何问题，请告诉我。

# r - C和R之间的交互

> ID：13409510
> 
> 赞同：3
> 
> 时间：2012-11-16T02:27:59.043
> 
> 标签：r

我有一些天真的问题要问：

1）当我想在R中调用C时，我必须编写一些C代码。但有时我必须调用自己用 R 编写的函数，我可以在 C 函数中调用该函数吗？

2）如果1）是可行的，那么如果我使用R编写的函数重复1000次循环，使用C调用这个函数进行循环会加快速度吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T02:31:58.893

问得好。快速浏览：

1.  是的你可以。使用 R 提供的基于 C 的 API 可能（和很多事情一样）有点乏味——但是（至少在我们看来）使用我们通过[Rcpp放在顶部的 C++ 层要容易得多](http://dirk.eddelbuettel.com/code/rcpp.html)

2.  这就是关键点。如果 R 代码是瓶颈，那么当您从 C 或 C++ 调用它时它仍然是瓶颈，因为从*哪里调用它并不重要*。重要的是它的相对速度。

rcpp-devel 列表（链接在[Rcpp 页面](http://dirk.eddelbuettel.com/code/rcpp.html)）有很多相关的讨论；`[rcpp]`您还可以在标签下的 SO 上找到很多内容。

# java - 启动更新检查线程，检查数据库中的新条目

> ID：13409511
> 
> 赞同：2
> 
> 时间：2012-11-16T02:28:02.230
> 
> 标签：java, android, database, multithreading, updates

我需要一些建议采取的方法...

这里有一些背景信息： 现在我有一个 Android 应用程序和一个单独的 java 程序在我的服务器上运行。Java程序不断地从不同的站点获取信息，并将它们存储在服务器上SQL数据库的14个不同条目中。然后，Android 应用程序会查询数据库以检索要显示的信息。

我的目标：我需要有关如何让应用程序处理从数据库检查更新，然后让用户知道有新信息的建议。我的第一个想法是，也许我需要启动一个单独的线程来查询数据库的修改时间。然后，如果它找到更新，它会在屏幕上弹出有新信息。我对线程或服务的工作方式不太了解，所以我想我正在寻找如何实现这一点，或者是否有一种完全不同的方式来进行更新检查会更好。

提前致谢，感谢任何反馈、意见或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:05:30.513

嗨 Ryan
，我也在我的 android 应用程序中实现了类似的东西，令人惊讶的是，我的**PostgreSQL**服务器中也有 14 个表。
首先，即使应用程序不在前台，您也希望定期轮询服务器。为此，您需要运行后台[**服务**](http://developer.android.com/reference/android/app/Service.html)- 在这里您必须在服务中手动创建一个线程，因为服务默认在 UI 线程上运行或使用[**IntentService**](http://developer.android.com/reference/android/app/IntentService.html) - 您不必创建单独的线程。无论您在意图服务中编写的任何代码都将在不同的线程中自动处理
现在您必须让该服务**定期**执行。为此，请使用[**AlarmManager**](http://developer.android.com/reference/android/app/AlarmManager.html)并使用`setRepeating()`功能。在参数中，您必须为您的*Service*或*IntentService提供***PendingIntent**。但是，如果您要每隔不到 1 分钟轮询一次服务器，请不要使用警报管理器。因为电池会浪费很多。 这里有一些代码可能会给你一个想法：

 **```
function setalarm()
{
 Intent intent = new Intent(getBaseContext(), Intent_Service.class);
       PendingIntent sender = PendingIntent.getBroadcast(getBaseContext(), 192837, intent, PendingIntent.FLAG_UPDATE_CURRENT);
       Random randomGenerator = new Random();
     long interval=60000;  //1 minute in milliseconds
     AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
       am.setRepeating(AlarmManager.RTC, cal.getTimeInMillis(),interval,sender);
} 
```

这是 IntentService 类型的 Intent_Service ：

```
public class BackService extends IntentService
{

 Context context=this;

 //public Timer t=null;
 public BackService()
 {
 super("myintentservice");
 }

 @Override
 protected void onHandleIntent(Intent intent) 
 {
  try
  {
     PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
      wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "My Tag");
      wl.acquire();
        //..CPU will remain on during this section..

     //make our network connections, poll the server and retrive updates
   //Provide a notification if you want

    wl.release();//Release the powerlock
  }
}

} 
```

但如果您想要**即时更新**，请使用[Google Cloud Messaging Services](http://developer.android.com/guide/google/gcm/gs.html)。要了解有关其工作原理的更多信息，请参阅[此](http://developer.android.com/guide/google/gcm/adv.html)
希望这对您有所帮助。**

# java-me - LWUIT TextArea NullPointerException

> ID：13409512
> 
> 赞同：1
> 
> 时间：2012-11-16T02:28:10.420
> 
> 标签：java-me, lwuit

I run LWUITDemo, Some UI can not be shown successful.All of them are TextArea contained by Form.If I change TextArea to Label, it work well.

Sorry, I run it in nokia s40 sdk 2.0\. When I run most of codes that include TextArea, exception ocurred;

The Code Like That(From LWUITDemo):

```
Form aboutForm = new Form("About");
aboutForm.setScrollable(true);
aboutForm.setLayout(new BorderLayout());
TextArea aboutText = new TextArea(getAboutText(), 5, 10);
aboutText.setEditable(false);
aboutForm.addComponent(BorderLayout.CENTER, aboutText);
aboutForm.show(); 
```

When I run it, it faild:

```
Form: showModal
java.lang.NullPointerException
  at com.sun.lwuit.TextArea.shouldShowHint(+21)
  at com.sun.lwuit.TextArea.calcPreferredSize(+4)
  at com.sun.lwuit.Component.preferredSize(+63)
  ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:51:52.020

您可以检查以下代码：

```
import com.sun.lwuit.Display;
import com.sun.lwuit.Form;
import com.sun.lwuit.TextArea;
import com.sun.lwuit.layouts.BorderLayout;
import javax.microedition.midlet.*;

public class TextMidlet extends MIDlet {

    private Form aboutForm;

    public TextMidlet() {
        Display.init(this);

        aboutForm = new Form();
        aboutForm.setScrollable(true);
        aboutForm.setLayout(new BorderLayout());
    }

    public void startApp() {

        TextArea aboutText = new TextArea("hiiiiiiiiiiiiii", 5, 10);
        aboutText.setEditable(false);
        aboutForm.addComponent(BorderLayout.CENTER, aboutText);
        aboutForm.show();
    }

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:23:33.227

代码对我来说看起来不错。请检查是否`getAboutText()`返回一个字符串并且不返回 null。

如果这没有帮助，您可以使用 LWUIT-Sources 来调试您的代码。在 TextArea.shouldShowHint 处设置一个断点并找出它是空的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T22:44:35.720

查看

导入 com.sun.lwuit.TextArea；

# java - SUM result value repeats even with case statement

> ID：13409514
> 
> 赞同：6
> 
> 时间：2012-11-16T02:28:14.723
> 
> 标签：java, sql, hibernate, postgresql, sum

I'm using posgresql as a database and java as programming language with hibernate. My problem is this query:

```
select cast(sum(CASE WHEN p.nropack > 0 THEN p.nropack ELSE 0 END) as integer),
cast(sum(CASE WHEN p.nropack < 0 THEN p.nropack ELSE 0 END) as integer),
cast(p.fechareg as date) 
from pronostico p 
inner join aeropuerto a on (a.idaeropuerto=p.idaeropuerto)
inner join ciudad c on (a.idciudad=c.idciudad)
inner join pais ps on (ps.idpais=c.idpais)
inner join continente ct on (ct.idcontinente=ps.idcontinente)
where c.idciudad=105
group by cast (p.fechareg as date); 
```

As a result I get:

```
sum;sum;fechareg 
30;-15;"2012-11-15" 
```

But when I use it in my program:

```
public ArrayList<RepKardex> listarKardex(int ciud){  
    ciud=105; 
    ArrayList<RepKardex> listaKardex = new ArrayList<>();
    Session session = HibernateUtil.getSessionFactory().openSession();
    Transaction tx = session.beginTransaction();        
    String q = "select cast(sum( case when p.nropack > 0 then p.nropack ELSE 0 end ) as integer), "
            + "cast(sum( case when p.nropack < 0 then p.nropack ELSE 0 end ) as integer), "
            + "cast(p.fechareg as date) "
            + "from Pronostico p "
            + "inner join Aeropuerto a on (p.idaeropuerto = a.idaeropuerto) "
            + "inner join Ciudad c on (a.idciudad = c.idciudad) "
            + "inner join Pais ps on (c.idpais = ps.idpais) "
            + "inner join Continente ct on (ct.idcontinente = ps.idcontinente) "
            + "where c.idciudad = :ciud "
            + "group by cast(p.fechareg as date) ";                    
    Query query = session.createSQLQuery(q);        
    query.setInteger("ciud", ciud);
    List lista = query.list();        
    Iterator iter = lista.iterator(); 
    while (iter.hasNext()) {    
        Object[] row = (Object[]) iter.next();            
        if (row!=null){
            System.out.println("entrantes : "+(Integer)row[0]); 
            System.out.println("salientes : "+(Integer)row[1]); 
            RepKardex rep = new RepKardex((int)row[0],(int)row[1],(Date)row[2]);              
            listaKardex.add(rep);
        }

    }

    tx.commit();
    session.close();

    return listaKardex;
} 
```

It prints

```
entrantes: 30
salida:    30 
```

Can someone help me figure out why it repeats the positive numbers even when I use the case statement inside the query? Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:14:33.173

您可以使用[`LEAST`和`GREATEST`](http://www.postgresql.org/docs/current/interactive/functions-conditional.html#FUNCTIONS-GREATEST-LEAST)简化查询：

```
SELECT sum(GREATEST(p.nropack, 0))::int AS entrantes
      ,sum(LEAST(p.nropack, 0))::int AS salida
      ,p.fechareg::date AS fechareg
from   pronostico  p 
JOIN   aeropuerto  a ON a.idaeropuerto = p.idaeropuerto
JOIN   ciudad      c ON c.idciudad = a.idciudad
JOIN   pais       ps ON ps.idpais = c.idpais
JOIN   continente ct ON ct.idcontinente = ps.idcontinente
where  c.idciudad = 105
GROUP  BY p.fechareg::date; 
```

除此之外，它看起来还不错。我认为第二列不可能返回正数。这里肯定有其他问题。

### 编辑：

[@hvd 的评论](https://stackoverflow.com/questions/13409514/sum-result-value-repeats-even-with-case-statement/13413539#comment18329010_13409514)有助于发现客户端代码似乎被相同的列名弄糊涂了（两个总和列都默认为`"sum"`）。显式列别名似乎可以解决此问题。

# php - Error removing empty elements from TinyMCE editor using DOMDocument

> ID：13409516
> 
> 赞同：2
> 
> 时间：2012-11-16T02:28:40.480
> 
> 标签：php, domdocument

I have two questions:

1.  I am using TinyMCE editor and I want to remove empty tags from HTML. I am getting error "DOMDocument::loadHTML(): Unexpected end tag : p" when I pass text from TinyMCE editor and this error disappears when I directly pass text to TinyMCE strange! Please see code below.

2.  How do I prevent warning from DomDocument when incorrect HTML is passed?. `<strong>Bold Item </b></strong>`?

Here is an example text

```
<p style="text-align: justify;"> </p>
<p>blah blah blah <strong></strong>.</p>
<p style="text-align: justify;"> </p>
<p>paragraph three!!.</p> 
```

My function

```
function remove_empty_tags ($text) {
    $dom = new DOMDocument;
    $dom->loadHTML($text);

    // fetch all the wanted nodes
    $xp = new DOMXPath($dom);
    foreach($xp->query('//*[not(node() or self::br) or normalize-space() = ""]') as $node) {
        $node->parentNode->removeChild($node);
    }

    // output the cleaned markup
    return $dom->saveXml($dom->getElementsByTagName('body')->item(0) );
 }

 echo remove_empty_tags($_POST['mce_editor']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:56:25.850

使用以下功能`error_reporting(0)`

```
function remove_empty_tags ($text) {
    error_reporting(0); // added
    $dom = new DOMDocument;
    $dom->loadHTML($text);
    $xp = new DOMXPath($dom);
    foreach($xp->query('//*[not(node() or self::br) or normalize-space() = ""]') as $node) {
        $node->parentNode->removeChild($node);
    }
    return $dom->saveXml($dom->getElementsByTagName('body')->item(0) );
}
echo remove_empty_tags("<p>blah blah blah <strong><i></strong>.<em><span></em></span></p>"); 
```

我得到以下结果

```
<p>blah blah blah .</p> 
```

你可以试试这个，但不确定它是否适合你`TinyMCE`，[例如这里](http://sandbox.onlinephpfunctions.com/code/103c5c883ca8cae96b49a779a97ddf3d7765cd9f)。

**更新：** 还有另一种使用[simplexml_import_dom](http://uk.php.net/manual/en/function.simplexml-import-dom.php)修复严重嵌套标签的方法

```
error_reporting(0);
$text = "<p>blah blah blah <strong><i></strong>.<em><span></em></span></p>";
$dom = new DOMDocument();
$dom->loadHTML($text);
$repaired = simplexml_import_dom($dom)->asXML();
echo $repaired; 
```

这给了我以下结果

```
<p>blah blah blah <strong><i></i></strong><i>.<em><span></span></em></i></p> 
```

# php - Using esc_attr or htmlspecialchars in $POST doesn't submit to DB?

> ID：13409518
> 
> 赞同：0
> 
> 时间：2012-11-16T02:28:48.303
> 
> 标签：php, mysql, escaping, special-characters

I want users to have the ability to enter special characters and for it to still submit to the DB.

I have tested using the input: **Dave & ' " ***, however it doesn't store in the database. If I don't use special characters as per the above and just use **Dave**, it stores just fine.

I have tried 2 things:

```
<p class="clearfix">
                        <label for="name">name</label>
                        <input class="validate[required]" id="name" name="name" type="text" value="'.esc_attr($_POST['name']).'">
                    </p> 
```

and

```
<p class="clearfix">
                        <label for="name">name</label>
                        <input class="validate[required]" id="name" name="name" type="text" value="'.htmlspecialchars($_POST['name']).'">
                    </p> 
```

Neither work.

Database insertion code after payment:

```
if(strpos($response['body'], 'VERIFIED') !== false && $_POST['payment_status'] == "Completed") {
    //Assign IPN Post Values to Local Variables
    $comboString = $_POST['txn_id'].$_POST['payment_date'];

    $data = explode('~',$_POST['custom']);

    $ipn_data = array(
        'name'      => mysql_real_escape_string($_POST['name']),
        'sale_date'     => $_POST['payment_date']
    );
    $ipn_format = array('%s','%s');
    if($ipn_business == $paypal_email) {

        $wpdb->insert($wpdb->prefix.'orderdata', $ipn_data, $ipn_format);
        $ipn_data['currency'] = $_POST['mc_currency'];
        $ipn_data['admin_field'] = $_POST['admin_field'];

        send_email($ipn_data);
    }

} else {
    exit("IPN Request Failure");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:59:03.477

两个非常简单的规则适用于此：

1.  当且仅当插入数据库时​​，使字符串安全地插入数据库
2.  当且仅当在屏幕上显示时，使字符串安全地显示在屏幕上。

（添加到 XML、添加到 URL/GET 参数、将数据放入电子邮件等的类似规则 - 每个都有处理它的方法。）

因此，当插入数据库时​​，请使用 PDO 准备语句或 mysqli 准备语句，因为这将使您的数据安全。如果不能，则将字符串包装在`mysql_real_escape_string()`. 它不会改变进入（并因此出来）数据库的内容，只是让它安全进入。

当在屏幕上显示时，就像你在第二个例子中一样，使用`htmlentities()`or `mysqlspecialchars()`。如果您知道如何处理引号，则最好使用 mysqlspecialchars，但如果不确定，请使用 htmlentities。

当我在做的时候，我看到你正在发送一封电子邮件。确保从添加到电子邮件标题的值中删除换行符和假边界，并从正文中删除假边界（换行符OK）。最好使用电子邮件脚本，因为它们很难防止垃圾邮件。

# javascript - 隐藏id中具有特定数字的所有元素

> ID：13409522
> 
> 赞同：2
> 
> 时间：2012-11-16T02:29:21.687
> 
> 标签：javascript, jquery

需要帮助，我尝试降低复杂性并制作简单的示例：

```
<div id="tree_div">
   <ul>
      <li id="tree_li_401">401</li>
      <li id="tree_li_101">101</li>
      <li id="tree_li_301">301</li>
      <li id="tree_li_201">201</li>
      <li id="tree_li_102">102</li>
      <li id="tree_li_402">402</li>
   </ul>
</div> 
```

我需要根据**tree_li_ 之后的第一个数字隐藏所有 li 元素**

例如：我需要隐藏所有在**tree_li_**之后编号为**4**的元素：

 **```
<li id="tree_li_402">
<li id="tree_li_401"> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T02:30:31.777

您可以使用属性选择器来定位这些元素：

```
$('li[id^="tree_li_4"]').hide(); 
```

这是 jQuery 支持的所有[属性选择器的列表。](http://api.jquery.com/category/selectors/attribute-selectors/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T02:56:52.167

如前所述，您可以使用属性选择器，如果您想为所有这些选择器提供解决方案，请使用该`.each()`方法，并且您可以为数字使用变量。

例子：

```
$("li[id='tree_li_'"+ magicNumber +"]").each(function (idx, li) {
  $(li).hide();
}); 
```

或作为一个班轮

```
$("li[id='tree_li_'"+ magicNumber +"]").hide(); 
```

如果你想变得非常疯狂，你可以使用这个`.substring()`方法。 `.substring`如果字符串具有指定的子字符串，则返回 true。ie`"brian".substring("ria")`将返回字符串的索引（一个正数），如果没有找到该字符串，则返回 -1。

```
$("li").each(function(idx, li) {
  if ($(li).attr("id").substring("4")) {
    $(li).hide();
  }
}); 
```**

# java - Parsing timestamp Soap fied to Java Date

> ID：13409523
> 
> 赞同：0
> 
> 时间：2012-11-16T02:29:22.597
> 
> 标签：java, parsing, datetime, soap, timestamp

I received from a SOAP message the follow date: **2012-11-16T02:02:05Z**

How to parse to Date? What means this T and the Z in the date according with the SOAP specification?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:50:17.480

我可以通过这种方式正确解析：

```
new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'").parse(paymentDate); 
```

谢谢@vikdor！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-18T20:03:42.500

# xml - 如何从同一文件的较新版本更新已编辑的 XML 文件？

> ID：13409525
> 
> 赞同：0
> 
> 时间：2012-11-16T02:29:44.977
> 
> 标签：xml

我尝试使用比较工具将新 XML 中的元素添加到旧 XML 中，但客户端不会运行它，它会显示为损坏的文件，不知道为什么。

在从更新中添加新添加的元素时，我需要保留旧 XML 中的一些元素。我希望我能很好地解释这一点。

是否有任何工具可以自动执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:58:10.617

您可能想查看[3DM](http://tdm.berlios.de/3dm/doc/index.html)。它可以进行 XML 感知的 3 路合并。

# php - How to use wordpress wpdb class to insert data

> ID：13409528
> 
> 赞同：3
> 
> 时间：2012-11-16T02:30:14.717
> 
> 标签：php, wordpress

I am new to wordpress I am try to create table and insert data to that table. so within the wordpress database I created table called 'album' then I created directory called 'my-codes'(within root directory/ same level with 'wp-admin' , 'wp-content, 'wp-includes' directories)

within that directory I created `insert.php` then i added following code

```
<?php       
global $wpdb;
$wpdb->insert($wpdb->album , array("ID"=>1, "Name"=>'something'), array("%d", "%s"));

 ?> 
```

but it give this error `Fatal error: Call to a member function insert() on a non-object in C:\wamp\www\wordpress\my-codes\insert.php` what is the mistake I did, please help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:32:25.220

您必须在脚本中加载 Wordpress 文件，以便您可以访问 Wordpress 的`$wpdb`对象：

```
require_once( '../wp-load.php' ); 
```

这将加载*所有 Wordpress*，甚至是您不需要的功能。如果您只想加载数据库部分，[请阅读本文](http://www.stormyfrog.com/using-wpdb-outside-wordpress/)。

* * *

**更新**- 该`insert`方法的第一个参数应该是您的表的名称：

```
$wpdb->insert(
    'album',
     array("ID"=>1, "Name"=>'something'),
     array("%d", "%s")
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:35:35.783

```
require (dirname(dirname(__FILE__)) . '/wp-blog-header.php');
require (ABSPATH . WPINC . '/compat.php');
require (ABSPATH . WPINC . '/functions.php');
require (ABSPATH . WPINC . '/classes.php');

require_wp_db();
global $wpdb; // Look look! Over here! line 270 in wp-settings.php

if ( !empty($wpdb->error) )
        dead_db();

 //Execute your query here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T02:41:50.720

我建议使用[WordPress 选项 API](http://codex.wordpress.org/Options_API)而不是创建自定义表，除非**选项**不符合您的需要。此外，将所有代码放在主题的`functions.php`. 这样，您就不需要从外部加载任何其他 WordPress 文件。如果您的代码在functions.php 中，它们已经为您自动加载。

这是一个如何使用选项将数据存储在数据库中的快速示例（取自上面链接的 WP Codex 文章）：

```
// Create an option to the database
add_option( $option, $value = , $deprecated = , $autoload = 'yes' );

// Removes option by name.
delete_option( $option );

// Fetch a saved option
get_option( $option, $default = false );

// Update the value of an option that was already added.
update_option( $option, $newvalue ); 
```

与直接访问数据库相比，选项更容易实现并且通常更不容易出错。:)

# github - update fork on GitHub for Windows?

> ID：13409531
> 
> 赞同：20
> 
> 时间：2012-11-16T02:30:44.923
> 
> 标签：github

I am currently using the Windows Github GUI and its pretty cool looking and easy so I'm trying to use it as often. A problem I encountered is when I fork a project I don't know how to update that fork with the git

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-11T08:11:04.157

仅供参考，我在此处复制[http://processwire.com/talk/topic/1565-github-for-windows/](http://processwire.com/talk/topic/1565-github-for-windows/)上的帖子中的详细说明：

*   在“GitHub for Windows”本地存储库视图中，右键单击并选择“ `open a shell here`”
*   这将打开一个已经在正确目录中的 shell。键入以下命令：

```
# 将原始 repo 分配给名为“upstream”的远程
git 远程添加上游 https://github.com/path_to_your_repository.git

# 从原始存储库中提取本地存储库中不存在的更改，
# 不修改你的文件。
# 允许您先查看。
git 获取上游

# 将获取的更改合并到您的工作文件中。
git 合并上游/主

```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-16T07:13:40.353

GitHub for Windows 目前仅支持一个遥控器（`origin`引用您的 fork）。

因此，您需要手动添加一个`upstream`引用原始存储库的远程（称为“”），以便您能够（从 CLI）从中提取`upstream`、更新本地存储库并允许您推送（这次使用 GUI）新的提交到你的 fork。

有关更多信息，请参阅“ [github 中的 origin 和 upstream 有什么区别](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-10T00:50:24.127

> **同步分叉**
> 
> 同步存储库的分支以使其与上游存储库保持同步。
> 
> 提示：在您可以将您的分叉与上游存储库同步之前，您必须在 Git 中[配置一个指向上游存储库的远程。](https://help.github.com/articles/configuring-a-remote-for-a-fork)
> 
> **1.**打开终端（Mac 用户）或命令提示符（Windows 和 Linux 用户）。
> 
> **2.**将当前工作目录更改为您的本地项目。
> 
> **3.**从上游存储库中获取分支及其各自的提交。提交的`master`内容将存储在本地分支中，`upstream/master`.
> 
> ```
> $ git fetch upstream 
> ```
> 
> **4.**检查你的 fork 的本地`master`分支。
> 
> ```
> $ git checkout master 
> ```
> 
> **5.**将更改合并`upstream/master`到您的本地`master`分支中。这将使您的 fork`master`分支与上游存储库同步，而不会丢失您的本地更改。
> 
> ```
> $ git merge upstream/master 
> ```
> 
> * * *
> 
> 如果您的**本地分支没有任何唯一的提交**，Git 将改为执行“快进”：
> 
> ```
> $ git merge upstream/master 
> ```
> 
> 提示：同步您的 fork 只会更新您的本地存储库副本。要在 GitHub 上更新您的分叉，您必须推送您的更改。

*来源：* [https ://help.github.com/articles/syncing-a-fork/](https://help.github.com/articles/syncing-a-fork/)

![在此处输入图像描述](../Images/d1f258882127d8c0b15026d4409c51ee.png)

在 Windows 版 Github（GUI 应用程序）中，按 按钮`Sync`，然后应用程序会将更改的文件上传到您自己的存储库（在 Github.com）。 ![在此处输入图像描述](../Images/21925d8b817f7df350c45c9fb3d67a30.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-02T04:38:13.837

如何从原始存储库同步分叉存储库？

为了便于理解，我称之为一个现实的例子：同步这个存储库：[https](https://github.com/donhuvy/scrapy) ://github.com/donhuvy/scrapy from [https://github.com/scrapy/scrapy](https://github.com/scrapy/scrapy)

有所有步骤：

```
Last login: Fri Sep  2 08:45:34 on ttys000
Dos-MacBook-Pro:~ donhuvy$ 
Dos-MacBook-Pro:~ donhuvy$ 
Dos-MacBook-Pro:~ donhuvy$ ls
AndroidStudioProjects   IdeaProjects        Public
Applications        Library         PycharmProjects
Desktop         Movies          example.dump
Documents       Music           pgadmin.log
Downloads       Pictures        sun-appserv-samples
Dos-MacBook-Pro:~ donhuvy$ cd Documents/
Dos-MacBook-Pro:Documents donhuvy$ ls
$RECYCLE.BIN
13256069_130212657393823_216708148326317354_n.jpg
1511456_1453604554870601_599093550_n.jpg
4578-rc007-jquery_online.pdf
Apps
Programming ebooks
Setup
Treasure_Island_NT.pdf
Video tutorial
Virtual Machines.localized
films
postgresql-9.0-A4.pdf
program_files
source_code
vy.sql
workspace_javaee
Dos-MacBook-Pro:Documents donhuvy$ cd source_code/
Dos-MacBook-Pro:source_code donhuvy$ ls
github.com
Dos-MacBook-Pro:source_code donhuvy$ cd github.com/
Dos-MacBook-Pro:github.com donhuvy$ ls
AurelioDeRosa   donhuvy     hibernate-orm   scrapy      spring-projects
Dos-MacBook-Pro:github.com donhuvy$ cd donhuvy/
Dos-MacBook-Pro:donhuvy donhuvy$ ls
ZohoCRM_integration jquery3_examples
java_examples       real_estate
Dos-MacBook-Pro:donhuvy donhuvy$ git clone https://github.com/donhuvy/scrapy.git
Cloning into 'scrapy'...
remote: Counting objects: 40481, done.
remote: Total 40481 (delta 0), reused 0 (delta 0), pack-reused 40481
Receiving objects: 100% (40481/40481), 13.98 MiB | 746.00 KiB/s, done.
Resolving deltas: 100% (21135/21135), done.
Checking connectivity... done.
Dos-MacBook-Pro:donhuvy donhuvy$ '
> 
> 
> 
Dos-MacBook-Pro:donhuvy donhuvy$ 
Dos-MacBook-Pro:donhuvy donhuvy$ 
Dos-MacBook-Pro:donhuvy donhuvy$ ls
ZohoCRM_integration jquery3_examples    scrapy
java_examples       real_estate
Dos-MacBook-Pro:donhuvy donhuvy$ cd sc
-bash: cd: sc: No such file or directory
Dos-MacBook-Pro:donhuvy donhuvy$ cd scrapy/
Dos-MacBook-Pro:scrapy donhuvy$ ls
AUTHORS         README.rst      requirements.txt
CODE_OF_CONDUCT.md  artwork         scrapy
CONTRIBUTING.md     conftest.py     sep
INSTALL         debian          setup.cfg
LICENSE         docs            setup.py
MANIFEST.in     extras          tests
Makefile.buildbot   pytest.ini      tox.ini
NEWS            requirements-py3.txt
Dos-MacBook-Pro:scrapy donhuvy$ git log
commit ab42e2b5d531cbbf2ee46b49726604c90becbd3d
Author: vydn <v@vyhn.net>
Date:   Sat Apr 2 06:08:28 2016 +0700

    Change the content

    Change the content

commit bf7f67549378269c3976afc89abcf9c2190d242f
Merge: 9d8c368 9250a5b
Author: Paul Tremberth <paul.tremberth@gmail.com>
Date:   Fri Apr 1 15:47:06 2016 +0200

    Merge pull request #1847 from aron-bordin/add_blocking_storage_path_setting

    [MRG+2] added BLOCKING_FEED_STORAGE_PATH to settings

commit 9250a5bffa91c24dbea5c5d64c3c7cd9992a6ee7
Author: Aron Bordin <aron.bordin@gmail.com>
Date:   Sat Mar 5 19:36:02 2016 -0300

    added FEED_TEMPDIR to settings

commit 9d8c368ce8a24d7adb63b731df1359f3b05f3bdd
Dos-MacBook-Pro:scrapy donhuvy$ 
Dos-MacBook-Pro:scrapy donhuvy$ 
Dos-MacBook-Pro:scrapy donhuvy$ git fetch upstream
fatal: 'upstream' does not appear to be a git repository
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
Dos-MacBook-Pro:scrapy donhuvy$ git remote -v
origin  https://github.com/donhuvy/scrapy.git (fetch)
origin  https://github.com/donhuvy/scrapy.git (push)
Dos-MacBook-Pro:scrapy donhuvy$ git remote add upstream https://github.com/scrapy/scrapy.git
Dos-MacBook-Pro:scrapy donhuvy$ git remote -v
origin  https://github.com/donhuvy/scrapy.git (fetch)
origin  https://github.com/donhuvy/scrapy.git (push)
upstream    https://github.com/scrapy/scrapy.git (fetch)
upstream    https://github.com/scrapy/scrapy.git (push)
Dos-MacBook-Pro:scrapy donhuvy$ git fetch upstream
remote: Counting objects: 1329, done.
remote: Compressing objects: 100% (7/7), done.
remote: Total 1329 (delta 600), reused 599 (delta 599), pack-reused 723
Receiving objects: 100% (1329/1329), 425.28 KiB | 325.00 KiB/s, done.
Resolving deltas: 100% (920/920), completed with 141 local objects.
From https://github.com/scrapy/scrapy
 * [new branch]      0.12       -> upstream/0.12
 * [new branch]      0.14       -> upstream/0.14
 * [new branch]      0.16       -> upstream/0.16
 * [new branch]      0.18       -> upstream/0.18
 * [new branch]      0.20       -> upstream/0.20
 * [new branch]      0.22       -> upstream/0.22
 * [new branch]      0.24       -> upstream/0.24
 * [new branch]      1.0        -> upstream/1.0
 * [new branch]      1.1        -> upstream/1.1
 * [new branch]      asyncio    -> upstream/asyncio
 * [new branch]      deprecate-make-requests-from-url -> upstream/deprecate-make-requests-from-url
 * [new branch]      disable-toplevel-2 -> upstream/disable-toplevel-2
 * [new branch]      doc-arch-overview2 -> upstream/doc-arch-overview2
 * [new branch]      feature-1371-download-prios -> upstream/feature-1371-download-prios
 * [new branch]      fix-1330   -> upstream/fix-1330
 * [new branch]      fix-util-function-to-work-outside-project-dir -> upstream/fix-util-function-to-work-outside-project-dir
 * [new branch]      link-encoding -> upstream/link-encoding
 * [new branch]      master     -> upstream/master
 * [new branch]      no-max-rss -> upstream/no-max-rss
 * [new branch]      py3-chunked -> upstream/py3-chunked
 * [new branch]      release-notes-1.1.2-master -> upstream/release-notes-1.1.2-master
 * [new branch]      remove-prerelease-configuration -> upstream/remove-prerelease-configuration
 * [new tag]         1.0.6      -> 1.0.6
 * [new tag]         1.1.2      -> 1.1.2
 * [new tag]         1.1.0      -> 1.1.0
 * [new tag]         1.1.0rc4   -> 1.1.0rc4
 * [new tag]         1.1.1      -> 1.1.1
Dos-MacBook-Pro:scrapy donhuvy$ git checkout master
Already on 'master'
Your branch is up-to-date with 'origin/master'.
Dos-MacBook-Pro:scrapy donhuvy$ git merge upstream/master
error: There was a problem with the editor 'vi'.
Not committing merge; use 'git commit' to complete the merge.
Dos-MacBook-Pro:scrapy donhuvy$ git commit -m "update"
[master 6f16b46] update
Dos-MacBook-Pro:scrapy donhuvy$ git push
Counting objects: 915, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (380/380), done.
Writing objects: 100% (915/915), 235.84 KiB | 0 bytes/s, done.
Total 915 (delta 677), reused 769 (delta 535)
remote: Resolving deltas: 100% (677/677), completed with 99 local objects.
To https://github.com/donhuvy/scrapy.git
   ab42e2b..6f16b46  master -> master
Dos-MacBook-Pro:scrapy donhuvy$ git status
On branch master
Your branch is up-to-date with 'origin/master'.
nothing to commit, working tree clean
Dos-MacBook-Pro:scrapy donhuvy$ 
```

[![在此处输入图像描述](../Images/442e663b25a4534289d078038f29511b.png)](https://i.stack.imgur.com/Di15Y.png)

要点：

**步骤 1.**更改目录：

```
cd /Users/donhuvy/Documents/source_code/github.com/donhuvy/ 
```

为了确定：

```
pwd 
```

**Step 2.**去[https://github.com/donhuvy/scrapy](https://github.com/donhuvy/scrapy)看右上角，复制仓库链接

```
https://github.com/donhuvy/scrapy.git 
```

**步骤 3.**从服务器克隆到本地

```
git clone https://github.com/donhuvy/scrapy.git 
```

**Step 4.**去[https://github.com/scrapy/scrapy](https://github.com/scrapy/scrapy)，看右上角，复制仓库链接

```
https://github.com/scrapy/scrapy.git 
```

**步骤 5.**添加上游存储库链接

```
git remote add upstream https://github.com/scrapy/scrapy.git 
```

**步骤 6.**检查 repo 列表：git remote -v

结果：

来源 [https://github.com/donhuvy/scrapy.git](https://github.com/donhuvy/scrapy.git) (fetch) 来源 [https://github.com/donhuvy/scrapy.git](https://github.com/donhuvy/scrapy.git) (push) 上游 [https://github.com/scrapy/scrapy.git](https://github.com/scrapy/scrapy.git) (fetch ) 上游 [https://github.com/scrapy/scrapy.git](https://github.com/scrapy/scrapy.git) (推送)

**步骤 7.**获取上游

```
git fetch upstream 
```

**步骤 8.**从上游仓库获取 master 分支

```
git checkout master 
```

**步骤 9.**合并源代码：

```
git merge upstream/master 
```

Vim 编辑器在终端内打开，然后编辑提交消息，按**i**开始编辑，按**esc**，**:wq!** 退出并保存。

**步骤 10.**提交

```
git commit -m "update" 
```

**步骤 11.**推送 **git push**

**第 12 步**。

```
git status

On branch master
Your branch is up-to-date with 'origin/master'.
nothing to commit, working tree clean
Of course, I try to my post have no 13rd step. 
```

参考：

[https://help.github.com/articles/configuring-a-remote-for-a-fork/](https://help.github.com/articles/configuring-a-remote-for-a-fork/) [https://help.github.com/articles/syncing-a-fork/](https://help.github.com/articles/syncing-a-fork/)

# java - How do I add an icon to launchpad in os x mountain lion that will launch a java .jar?

> ID：13409534
> 
> 赞同：0
> 
> 时间：2012-11-16T02:31:10.847
> 
> 标签：java, macos, shortcuts

Let's say I want an icon in Launchpad that when clicked on executes:

```
java -jar /Users/me/Program.jar argument1 argument2 
```

I'm running OS X Mountain Lion. This is a little Java program I wrote for my own personal use, nothing I'm trying to distribute. Basically, I'm asking: How do I make the equivalent of a Windows shortcut?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T02:35:58.560

如何编写一个 shell 脚本来执行命令并创建一个像[这样](http://lifehacker.com/5809871/how-to-make-a-desktop-shortcut-in-mac-os-x)或[这样](http://hintsforums.macworld.com/showthread.php?t=70973)的桌面快捷方式？

ps我不是mac用户顺便说一句。哈哈

# redis - redis-server auto restart

> ID：13409535
> 
> 赞同：2
> 
> 时间：2012-11-16T02:31:33.657
> 
> 标签：redis, centos, centos5

i have a question here..

i already install redis-server on my CentOS vps for my wordpress frontend cache.. but i have a little problem here..

sometimes my redis-server was closed/disconnected suddenly, and i must have to restart it manually using command

```
/etc/init.d/redis-server start 
```

my question is..

how to auto start the redis-server if my redis-server down or crashed suddenly..

i install redis using this tutorial [http://www.saltwebsites.com/2012/install-redis-245-service-centos-6](http://www.saltwebsites.com/2012/install-redis-245-service-centos-6)

great thanks before

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:02:34.190

> 如果我的 redis 服务器突然关闭或崩溃，如何自动启动 redis 服务器

尝试查看像[upstart](http://upstart.ubuntu.com/)或[monit](http://mmonit.com/monit/)这样的工具，如果它意外死亡，它们可以用来重生 redis。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-03T10:57:03.510

如果您将 docker 与 docker-compose 一起使用：

```
version: '3'

services:
  redis:
    container_name: "redis"
    image: redis:5.0.3-alpine
    command: ["redis-server", "--appendonly", "yes"]
    hostname: redis
    ports:
      - "6339:6379"
    volumes:
      - /opt/docker/redis:/data
    restart:
      always 
```

看最后一行： **重启：总是**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-07T10:31:52.760

我不太清楚centos 和 linux

```
sudo systemctl enable redis_6379 
```

上面的工作就像魅力一样，上面将在 /etc/systemd/system/redis_6379.service 中创建一个符号链接。

# php - Array to string error using mysqli

> ID：13409538
> 
> 赞同：2
> 
> 时间：2012-11-16T02:31:56.177
> 
> 标签：php, mysqli

This code was given to me by a friend and works perfectly, however in my system it Array to string conversion in C:\wamp\www\web2\database.php on line 90 and on line 91

```
 function edit($table, $id)
        {
             $query = "SELECT DISTINCT  `COLUMN_NAME` 
            FROM  `INFORMATION_SCHEMA`.`COLUMNS` 
            WHERE  `TABLE_NAME` =  '$table'";

      echo "<form method='post' action=''>";

            $header = $this->dbLocalhost->query($query);

            foreach($header as $data) {
                echo "<p>";
    90\.         echo "".$data.": ";
    91\.         echo "<input type='text' name=".$data." />";    
                echo "</p>";
            }

            echo "<input type='submit' name='Insert' />";

            echo "</form>";
} 
```

sorry to ask, as I have the irritating feeling its very simple. Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:45:04.447

谢谢我将 $data 更改为 $data['COLUMN_NAME'] 而不使用 print_r($data) 来提供所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:46:06.900

尝试这个

```
$q = "SELECT DISTINCT  `COLUMN_NAME` FROM  `INFORMATION_SCHEMA`.`COLUMNS` WHERE  `TABLE_NAME` =  '".$table."'";
$cols = mysql_query($q);
while ($col = mysql_fetch_object($cols)) {
    echo "<p>";
    echo ucfirst($col->COLUMN_NAME);
    echo "<input type='text' name=".$col->COLUMN_NAME." />";    
    echo "</p>";
} 
```

输出将类似于

```
<p>Id<input type="text" name="id"></p>
<p>Name<input type="text" name="name"></p><!--and more--> 
```

# java - 如何在 roboguice 2.0 中注入 LocationManager？

> ID：13409539
> 
> 赞同：1
> 
> 时间：2012-11-16T02:31:56.267
> 
> 标签：java, android, roboguice

roboguice wiki 上的[简单示例](http://code.google.com/p/roboguice/wiki/SimpleExample)显示您可以使用`Inject`将`LocationManager`实例注入 Activity。但是，自编写此示例以来，API 似乎发生了变化。`Inject`我在任何包裹中都找不到。有没有办法`LocationManager`使用最新的 roboguice 2.0 API 将 a 注入我的活动？

以下是供参考的示例代码：

```
class RoboWay extends RoboActivity { 
    @InjectView(R.id.name)             TextView name; 
    @InjectView(R.id.thumbnail)        ImageView thumbnail; 
    @InjectResource(R.drawable.icon)   Drawable icon; 
    @InjectResource(R.string.app_name) String myName; 
    @Inject                            LocationManager loc; 

    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.main);
        name.setText( "Hello, " + myName ); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:48:16.790

[2.0 文档](http://code.google.com/p/roboguice/wiki/InstallationNonMaven)声明您必须将JAR`Guice 3.0-no_aop`文件添加到您的应用程序中。这就是`Inject`定义注释的地方。

# java - Java / JUnit - 测试预定义多项式的 AssertionError

> ID：13409545
> 
> 赞同：0
> 
> 时间：2012-11-16T02:32:36.833
> 
> 标签：java, junit, polynomial-math

我有一个 Term 类来定义多项式：

```
public class Term
{
    final private int coef;
    final private int expo;

    private static Term zero, unit;

    static
    {
        try
        {
            zero = new Term(0, 0); // the number zero
            unit = new Term(1, 0); // the number one
        }
        catch (Exception e)
        {
            // constructor will not throw an exception here anyway
        }
    }

    /**
     * 
     * @param c
     *            The coefficient of the new term
     * @param e
     *            The exponent of the new term (must be non-negative)
     * @throws NegativeExponent
     */
    public Term(int c, int e) throws NegativeExponent
    {
        if (e < 0)
            throw new NegativeExponent();
        coef = c;
        expo = (coef == 0) ? 1 : e;
    }

    final public static Term Zero = zero;
    final public static Term Unit = unit;

    public boolean isConstant()
    {
        boolean isConst = false;
        if (this.expo == 0)
        {
            isConst = true;
        }
        return isConst;
    }
} 
```

我的 JUnit 测试如下：

```
 /*
 *      const1      isConstant(zero)        =>      true    (0,0)
 *      const2      isConstant(unit)        =>      true    (1,0)
 *      const3      isConstant(0,5)         =>      true
 *      const4      isConstant(5,1)         =>      false
 */

 @Test 
 public void const1() throws TError { assertTrue(Term.Zero.isConstant()); }

 @Test 
 public void const2() throws TError { assertTrue(Term.Unit.isConstant()); }

 @Test 
 public void const3() throws TError { assertTrue(new Term(0,5).isConstant()); }

 @Test 
 public void const4() throws TError { assertFalse(new Term(5,1).isConstant()); } 
```

测试 2 和 4 应有的通过，但测试 1 和 3 失败，我不知道为什么，“零”将多项式定义为 (0,0)，另一个将其定义为 (0,5) . 所以根据我的想法，第一个测试应该给出一个绿色的勾号，第三个测试应该给出一个红十字，因为它的指数是 5。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:48:52.580

请检查您的构造函数：

```
public Term(int c, int e) throws NegativeExponent{
    if (e < 0) throw new NegativeExponent();
    coef = c;
    expo = (coef == 0) ? 1 : e;
} 
```

当`coef == 0`, 然后 exp 被分配给`1`.

**这**使得**`zero`不`(0,1)``(0,0)`**。这是测试结果的原因如下：

```
 const1 -> false as expo = 1-->failure as expecting true
    const2 -> true as expo = 0 -->success as expecting true
    const3 -> false as expo = 5.-->failure as expecting true
    const4 -> false as expo = 1.-->success as expecting false 
```

**编辑：** 要反向修复您的代码以使测试用例通过，我认为您可以更新您的构造函数，如下所示：

```
public Term(int c, int e) throws NegativeExponent{
    if (e < 0) throw new NegativeExponent();
    coef = c;
    expo = (c == 0 && e != 0) ? 0 : e;
} 
```

在这里，我将构造函数更新为设置`expo`为 0，如果`coef`为 0，因为 coef 0 的任何博览会都不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T02:58:00.323

Yogendra 介绍了您的第一次测试失败的原因。您的 const3() 失败（至少对我而言），因为 new Term(0, 5) 的 expo 为 5，它被 coef 的 1 b/c 取代，但 1 仍然不是 0 所以 new Term(0, 5 ) 不是恒定的。

不是你问的，但我也会给你一些关于未来的通用 Java 指针......

1) 对静态常量使用全部大写

```
 public static final Term ZERO = new Term(0, 0);
 public static final Term UNIT = new Term(1, 0); 
```

这只是 Java 社区所期望的约定。

2) 给你的测试用例起有意义的名字。测试用例的一个强大用途是它们可以兼作您当时假设的文档。而不是 const1() 告诉其他开发人员什么都没有，而是使用一个描述性的名称，如 zeroShouldBeAConstant()。这告诉下一个查看您的代码的人，零应该被视为该系统中的常数。

3) 每当您返回布尔变量时，请考虑只返回语句。将下面的函数与您的函数进行比较，并告诉我哪一个更具可读性：

```
public boolean isConstant()
{
   return expo == 0;
} 
```

它的代码更少，希望更容易阅读。

祝你好运！

# ajax - 如果超过一定大小的 ajax 调用，则怀疑 IIS7.5 连接器问题 Tomcat 和 Coldfusion 10

> ID：13409551
> 
> 赞同：1
> 
> 时间：2012-11-16T02:33:27.230
> 
> 标签：ajax, tomcat, coldfusion, coldfusion-10

我已经在本地测试服务器上测试了表单提交，一切都很好。

但是，一旦代码上传到 IIS7.5 上的 Coldfusion 10，它就会失败。

基本上，如果我在屏幕上有 2 个联系方式很好，如果有 3 个它拒绝通过 ajax 更新（通过 ajaximport 调用）。

url 长度为 2.48kb，错误从

```
"NS_ERROR_FAILURE: Failure" 
```

其他时候我得到一个 500 服务器错误

[http://m.yapcrm.com/sites/dump/ii7errorlongajaxcall.cfm](http://m.yapcrm.com/sites/dump/ii7errorlongajaxcall.cfm)

我检查了通常的主题并调整了服务器，但没有任何乐趣..

最好我能把它与 Tomcat 的连接器作为它的 ISAPifilter 来解决问题。

简而言之，任何提示或帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:19:49.227

如上所述，没有找到解决方案。但是将默认方法从 Get 更改为 Post

示例供其他人参考。

```
 var submitForm = new UpdateContact();
            **submitForm.setHTTPMethod("POST");**               
            submitForm.setCallbackHandler(response);
            submitForm.setErrorHandler(errorHandler);
            submitForm.setForm("testValidator");                
            submitForm.UpdateContact(); 
```

UpdateContact() 是通过 cfAjaxProxy 调用的 CFC 方法。

# tomcat - 配置为使用内存缓存存储会话时，Tomcat 管理器应用程序未显示活动会话

> ID：13409555
> 
> 赞同：3
> 
> 时间：2012-11-16T02:34:06.600
> 
> 标签：tomcat, memcached, tomcat-manager

我已将 tomcat 配置为使用 memcache 作为会话存储。在此之前，我已经能够使用 tomcat /manager webapp 检查和计算当前有多少活动会话。

但是，在将 tomcat 配置为使用 memcache 之后，我注意到我无法再看到活动会话，并且它总是被报告为零 (0)。

memcache 或 tomcat 中是否有我缺少的配置？

这是我配置tomcat context.xml的方式

```
<Manager className="de.javakaffee.web.msm.MemcachedBackupSessionManager"
memcachedNodes="n1:localhost:11211,n2:localhost:11212"

sticky="false"
sessionBackupAsync="false"
requestUriIgnorePattern=".*\.(ico|png|gif|jpg|css|js)$"
/> 
```

# android - 将类转换为可包裹

> ID：13409557
> 
> 赞同：0
> 
> 时间：2012-11-16T02:34:15.237
> 
> 标签：android, android-layout

我有以下课程，我想将其转换为 parcelable 课程。尝试按照[本教程](http://www.sohailaziz.com/2012/04/passing-custom-objects-between-android.html)和[此线程](https://stackoverflow.com/questions/2736389/how-to-pass-object-from-one-activity-to-another-in-android)进行操作，但被卡住了。也许你可以把我推向正确的方向？

当前类

```
import java.util.ArrayList;

public class SimpleBookManager implements BookManager {

    private ArrayList<Book> allBooks = new ArrayList<Book>();

    public ArrayList<Book> getAllBooks(){
    return  allBooks;
    }   
    public int count(){
        return getAllBooks().size();
    }
    public Book getBook(int index){
        return allBooks.get(index);
    }
    public Book createBook(){
        Book book = new Book();
        allBooks.add(book);
        return book;
    }
    public void removeBook(Book book){
        allBooks.remove(book);
        //Remove instance of book
    }
    public void moveBook (int from, int to){
        Book book1 = allBooks.get(from);
        Book book2 = allBooks.get(to);
        allBooks.add(to, book1);
        allBooks.add(from, book2);

    }
    public int getMinPrice(){
    ArrayList<Integer> allPrices = getAllPrices();
    int smallestElem=allPrices.get(0);
    for(int i=0; i < allPrices.size(); i++){
         if (smallestElem > allPrices.get(i)){
             smallestElem = allPrices.get(i);
         }
      }
        return smallestElem;    
    }
    public int getMaxPrice(){
        ArrayList<Integer> allPrices = getAllPrices();
        int biggestElem=allPrices.get(0);
        for(int i=0; i < allPrices.size(); i++){
             if (biggestElem < allPrices.get(i)){
                 biggestElem = allPrices.get(i);
             }
          }
            return biggestElem; 
    }
    public float getMeanPrice(){
        ArrayList<Integer> allPrices = getAllPrices();
        int total=0;
        for(int i=0; i < allPrices.size(); i++){
             total+=allPrices.get(i);
          }
            return total/allPrices.size();  

    }
    public int getTotalCost(){
        ArrayList<Integer> allPrices = getAllPrices();
        int total=0;
        for(int i=0; i < allPrices.size(); i++){
             total+=allPrices.get(i);
          }
            return total;
    }
    public void saveChanges(){
        //What to do here
    }
    private ArrayList<Integer> getAllPrices(){
        int totalElements = allBooks.size();
        ArrayList<Integer> allBookPrices = new ArrayList<Integer>();
        //loop through it
        for(int i=0; i < totalElements; i++){
          allBookPrices.add(allBooks.get(i).getPrice());
        }
        return allBookPrices;
    }

    public SimpleBookManager(){
        Book harryPotter1 = createBook();
        Book harryPotter2 = createBook();

        harryPotter1.setAuthor("JK Rowling");
        harryPotter1.setCourse("Harry Potter Kunskap");
        harryPotter1.setPrice(199);
        harryPotter1.setTitle("Harry Potter and the philosifer Stone");
        harryPotter1.setIsbn("9780590353403");

        harryPotter2.setAuthor("JK Rowling");
        harryPotter2.setCourse("Harry Potter Kunskap");
        harryPotter2.setPrice(299);
        harryPotter2.setTitle("Harry Potter and snake");
        harryPotter2.setIsbn("0439064872");
    }
} 
```

我已经走了多远

```
import android.os.Parcel;
import android.os.Parcelable;
import java.util.ArrayList;

public class SimpleBookManager implements BookManager, Parcelable{

    private ArrayList<Book> allBooks = new ArrayList<Book>();

    public ArrayList<Book> getAllBooks(){
    return  allBooks;
    }   
    public int count(){
        return getAllBooks().size();
    }
    public Book getBook(int index){
        return allBooks.get(index);
    }
    public Book createBook(){
        Book book = new Book();
        allBooks.add(book);
        return book;
    }
    public void removeBook(Book book){
        allBooks.remove(book);
        //Remove instance of book
    }
    public void moveBook (int from, int to){
        Book book1 = allBooks.get(from);
        Book book2 = allBooks.get(to);
        allBooks.add(to, book1);
        allBooks.add(from, book2);  
    }
    public int getMinPrice(){
    ArrayList<Integer> allPrices = getAllPrices();
    int smallestElem=allPrices.get(0);
    for(int i=0; i < allPrices.size(); i++){
         if (smallestElem > allPrices.get(i)){
             smallestElem = allPrices.get(i);
         }
      }
        return smallestElem;    
    }
    public int getMaxPrice(){
        ArrayList<Integer> allPrices = getAllPrices();
        int biggestElem=allPrices.get(0);
        for(int i=0; i < allPrices.size(); i++){
             if (biggestElem < allPrices.get(i)){
                 biggestElem = allPrices.get(i);
             }
          }
            return biggestElem; 
    }
    public float getMeanPrice(){
        ArrayList<Integer> allPrices = getAllPrices();
        int total=0;
        for(int i=0; i < allPrices.size(); i++){
             total+=allPrices.get(i);
          }
            return total/allPrices.size();  

    }
    public int getTotalCost(){
        ArrayList<Integer> allPrices = getAllPrices();
        int total=0;
        for(int i=0; i < allPrices.size(); i++){
             total+=allPrices.get(i);
          }
            return total;
    }
    public void saveChanges(){
        //What to do here
    }
    private ArrayList<Integer> getAllPrices(){
        int totalElements = allBooks.size();
        ArrayList<Integer> allBookPrices = new ArrayList<Integer>();
        //loop through it
        for(int i=0; i < totalElements; i++){
          allBookPrices.add(allBooks.get(i).getPrice());
        }
        return allBookPrices;
    }

    public SimpleBookManager(){
        Book harryPotter1 = createBook();
        Book harryPotter2 = createBook();

        harryPotter1.setAuthor("JK Rowling");
        harryPotter1.setCourse("Harry Potter Kunskap");
        harryPotter1.setPrice(199);
        harryPotter1.setTitle("Harry Potter and the philosifer Stone");
        harryPotter1.setIsbn("9780590353403");

        harryPotter2.setAuthor("JK Rowling");
        harryPotter2.setCourse("Harry Potter Kunskap");
        harryPotter2.setPrice(299);
        harryPotter2.setTitle("Harry Potter and snake");
        harryPotter2.setIsbn("0439064872");
    }

    //parcel part, not finished_________________________________________________________________________________
    public SimpleBookManager(Parcel in){
    //...Incomplete
    }
    @Override
    public int describeContents() {
    // TODO Auto-generated method stub
    return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
    // TODO Auto-generated method stub

    dest.writeStringArray(new String[]{this.UserName,this.Password,String.valueOf(this.Action)});
    }

    public static final Parcelable.Creator<SimpleBookManager> CREATOR= new Parcelable.Creator<SimpleBookManager>() {

    @Override
    public SimpleBookManager createFromParcel(Parcel source) {
    // TODO Auto-generated method stub
    return new SimpleBookManager(source);  //using parcelable constructor
    }

    @Override
    public SimpleBookManager[] newArray(int size) {
    // TODO Auto-generated method stub
    return new SimpleBookManager[size];
    }
    };  
} 
```

我知道要给出一个扩展的答案需要很多，但也许会说构造函数的外观和一些方法，以便我可以看到它是如何完成的，因为尽管示例看起来很简单，但我无法掌握它. 谢谢 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:53:06.877

a 的原则`Parcelable`是对象能够将其状态序列化为一个包裹并再次反序列化。将其与从流中写入和读取对象进行比较。事实上，这个想法与`Serializable`界面非常相似，这就是为什么你会看到很多 Q&A 提到`Serializable`作为替代方案的原因。在大多数情况下，这是最简单的解决方案，因为它几乎不需要开发人员的任何努力。但是，`Parcelable`在 Android 上使用通常更有效。

无论如何，我使用您自己的代码片段编写了一个快速示例实现。需要注意的一些事项：

1.  为了简单起见，我删除了 BookManager 界面。
2.  我对课程进行了逆向工程`Book`。它很可能是不完整的，但对于这个例子来说应该足够了。
3.  `SimpleBookManager`我从's 的构造函数中删除了两本哈利波特书籍。

使用下面的示例，您应该能够执行类似的操作并看到 and 的相同`manager`内容`parcelledManager`：

```
// create manager and two example books
SimpleBookManager manager = new SimpleBookManager();
Book harryPotter1 = manager.createBook();
Book harryPotter2 = manager.createBook();

harryPotter1.setAuthor("JK Rowling");
harryPotter1.setCourse("Harry Potter Kunskap");
harryPotter1.setPrice(199);
harryPotter1.setTitle("Harry Potter and the philosifer Stone");
harryPotter1.setIsbn("9780590353403");

harryPotter2.setAuthor("JK Rowling");
harryPotter2.setCourse("Harry Potter Kunskap");
harryPotter2.setPrice(299);
harryPotter2.setTitle("Harry Potter and snake");
harryPotter2.setIsbn("0439064872");

// let's use an intent to parcel the manager to
Intent intent = new Intent();
intent.putExtra("extra_book_manager", manager);

// read the parcelled manager back from the intent
SimpleBookManager parcelledManager = intent.getParcelableExtra("extra_book_manager"); 
```

`SimpleBookManager`（并且`Book`作为嵌套的静态类），两者都实现`Parcelable`：

```
public class SimpleBookManager implements Parcelable{

    /****************************
     *  Book
     ****************************/

    public static class Book implements Parcelable {
        private String mAuthor, mTitle, mIsbn, mCourse;
        private int mPrice;

        public Book() { /* empty */ }

        public Book(Parcel in) {
            // read all fields back from the parcel
            mAuthor = in.readString();
            mTitle = in.readString();
            mIsbn = in.readString();
            mCourse = in.readString();
            mPrice = in.readInt();
        }

        public String getAuthor() {
            return mAuthor;
        }
        public String getTitle() {
            return mTitle;
        }
        public String getIsbn() {
            return mIsbn;
        }
        public String getCourse() {
            return mCourse;
        }
        public int getPrice() {
            return mPrice;
        }
        public void setAuthor(String author) {
            mAuthor = author;
        }
        public void setTitle(String title) {
            mTitle = title;
        }
        public void setIsbn(String isbn) {
            mIsbn = isbn;
        }
        public void setCourse(String course) {
            mCourse = course;
        }
        public void setPrice(int price) {
            mPrice = price;
        }

        @Override public int describeContents() {
            return 0;
        }

        @Override public void writeToParcel(Parcel out, int flags) {
            // write all fields to the parcel 
            out.writeString(mAuthor);
            out.writeString(mTitle);
            out.writeString(mIsbn);
            out.writeString(mCourse);
            out.writeInt(mPrice);
        }

        public static final Parcelable.Creator<Book> CREATOR = new Parcelable.Creator<Book>() {
            @Override public Book createFromParcel(Parcel source) {
                return new Book(source);
            }

            @Override public Book[] newArray(int size) {
                return new Book[size];
            }
        };
    }

    /****************************
     *  BookManager
     ****************************/

    private ArrayList<Book> allBooks = new ArrayList<Book>();

    public SimpleBookManager() { /* empty */ }

    public SimpleBookManager(Parcel in) {
        // read all the books from the parcel as a typed list 
        in.readTypedList(allBooks, Book.CREATOR);
    }

    public ArrayList<Book> getAllBooks(){
        return  allBooks;
    }   

    public int count(){
        return getAllBooks().size();
    }

    public Book getBook(int index){
        return allBooks.get(index);
    }

    public Book createBook(){
        Book book = new Book();
        allBooks.add(book);
        return book;
    }

    public void removeBook(Book book){
        allBooks.remove(book);
    }

    public void moveBook (int from, int to){
        Book book1 = allBooks.get(from);
        Book book2 = allBooks.get(to);
        allBooks.add(to, book1);
        allBooks.add(from, book2);  
    }

    public int getMinPrice(){
        ArrayList<Integer> allPrices = getAllPrices();
        int smallestElem=allPrices.get(0);
        for(int i=0; i < allPrices.size(); i++){
            if (smallestElem > allPrices.get(i)){
                smallestElem = allPrices.get(i);
            }
        }
        return smallestElem;    
    }

    public int getMaxPrice(){
        ArrayList<Integer> allPrices = getAllPrices();
        int biggestElem=allPrices.get(0);
        for(int i=0; i < allPrices.size(); i++){
            if (biggestElem < allPrices.get(i)){
                biggestElem = allPrices.get(i);
            }
        }
        return biggestElem; 
    }

    public float getMeanPrice(){
        ArrayList<Integer> allPrices = getAllPrices();
        int total=0;
        for(int i=0; i < allPrices.size(); i++){
            total+=allPrices.get(i);
        }
        return total/allPrices.size();  

    }

    public int getTotalCost(){
        ArrayList<Integer> allPrices = getAllPrices();
        int total=0;
        for(int i=0; i < allPrices.size(); i++){
            total+=allPrices.get(i);
        }
        return total;
    }

    public void saveChanges(){
        //What to do here
    }

    private ArrayList<Integer> getAllPrices(){
        int totalElements = allBooks.size();
        ArrayList<Integer> allBookPrices = new ArrayList<Integer>();
        //loop through it
        for(int i=0; i < totalElements; i++){
            allBookPrices.add(allBooks.get(i).getPrice());
        }
        return allBookPrices;
    }

    @Override public int describeContents() {
        return 0;
    }

    @Override public void writeToParcel(Parcel out, int flags) {
        // write all books as a typed list into the parcel
        out.writeTypedList(allBooks);
    }

    public static final Parcelable.Creator<SimpleBookManager> CREATOR= new Parcelable.Creator<SimpleBookManager>() {

        @Override public SimpleBookManager createFromParcel(Parcel source) {
            return new SimpleBookManager(source);
        }

        @Override public SimpleBookManager[] newArray(int size) {
            return new SimpleBookManager[size];
        }
    };  
} 
```

# python - 在 Python 中用转义的双引号替换转义的单引号

> ID：13409559
> 
> 赞同：1
> 
> 时间：2012-11-16T02:34:31.107
> 
> 标签：python, regex, double-quotes, substitution

我试图用双引号替换所有单引号，但留下所有转义的单引号。有谁知道用 python 正则表达式做这个的简单方法？

```
Input:
"{ 'name': 'Skrillex', 'Genre':'Dubstep', 'Bass': 'Heavy', 'thoughts': 'this\'s ahmazing'}"

output:
"{ "name": "Skrillex", "Genre": "Dubstep", "Bass": "Heavy", "thoughts": "this\'s ahmazing"}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:42:40.453

这有点……奇怪，但它可能会奏效。请记住在您的字符串前面加上`r`表示原始字符串，以便我们可以删除反斜杠：

```
In [19]: s = r"{ 'name': 'Skrillex', 'Genre':'Dubstep', 'Bass': 'Heavy', 'thoughts': 'this\'s ahmazing'}"
In [20]: s.replace("\\'", 'REPLACEMEOHYEAH').replace("'", '"').replace('REPLACEMEOHYEAH', "\\'")
Out[20]: '{ "name": "Skrillex", "Genre":"Dubstep", "Bass": "Heavy", "thoughts": "this\'s ahmazing"}' 
```

要替换的`REPLACEMEOHYEAH`令牌，因此它需要是不会出现在您的实际字符串中的东西。响应格式看起来可以以更自然的方式解析，但如果这不是一个选项，它应该可以工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T02:43:11.573

1.  将所有 \' 替换为一个神奇的单词
2.  将所有 ' 替换为 "
3.  将所有魔术词替换回\'

# javascript - 使用 slidetoggle 时如何在各个跨度的类之间切换？

> ID：13409566
> 
> 赞同：2
> 
> 时间：2012-11-16T02:35:38.217
> 
> 标签：javascript, jquery, asp.net

当使用slidetoggle 单击相应的标题时，我正在滑动内容。现在我想同时在类之间切换。

我可以使用toggleclass并切换所有类，而不管单击哪个标题，但是我无法仅切换与单击的标题相对应的类。

这是我的代码：

```
<div class="Title ">
  <a class="Expanded" href="#">Title1<span id="span1" class="ArrowDown"></span></a>
</div>
<ul class="Content">
  <a href="#">
  <li class="selected">hello1</li></a> <a href="#">
  <li>hello2</li></a> 
</ul>

<div class="Title">
  <a class="Expanded" href="#">Title2<span id="span2" class="ArrowDown"></span> </a>
</div>
<ul class="Content">
  <a href="#">
    <li>hello3</li></a>
  <a href="#">
    <li>hij</li></a>
  </ul> 
```

这是我的脚本：

```
$(document).ready(function(){
  $(".Title").click(function(){
    $(this).next(".Content").slideToggle("slow");
    $("#span1").toggleClass("ArrowUp", "ArrowDown");
  });
}); 
```

我只是把第一个跨度的 id 放在这里，但我尝试了不同的东西，但不知道该怎么做......我希望当点击相应的标题（展开或折叠）时，跨度类在 ArrowUp 和 ArrowDown 之间切换）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:41:36.260

在点击回调函数中，利用`this`关键字，结合`.find()`方法的威力。

例子：

```
$('element').click(function() {
  $(this).find('span').toggleClass('myclass');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T02:49:49.667

您还可以使用 jQuery 链接的强大功能将其写在一行中，就像这样。

```
$(this).find('span').toggleClass("ArrowUp", "ArrowDown").end()
       .next(".Content").slideToggle("slow")
       ; 
```

这里需要注意的两件事是[`.find()`](http://api.jquery.com/find/)（获取由选择器过滤的匹配元素的后代）和[`.end()`](http://api.jquery.com/end/)（结束当前链中最近的过滤操作并将匹配元素集返回到其先前状态。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T02:43:51.343

```
$(this).find(' span').toggleClass("ArrowUp", "ArrowDown"); 
```

# xml - xml 架构更改日期格式

> ID：13409567
> 
> 赞同：2
> 
> 时间：2012-11-16T02:35:45.280
> 
> 标签：xml, date, xsd

在 xml 模式数据类型中 --> 日期默认允许日期为 yyyy-mm-dd 格式。

我们如何修改它以使其接受 yyyy/mm/dd 格式样式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-25T12:09:54.820

您无法将日期类型更改为特定格式，但可以将其作为字符串并选择所需的特定格式。

对于日期 MM/DD/YYYY 的格式。代码片段如下。

```
<xs:element name="StartDate">
    <xs:simpleType>
        <xs:restriction base="xs:string">
            <xs:pattern value="\d{2}[/]\d{2}[/]\d{4}"></xs:pattern>
            <xs:length value="10"/>
        </xs:restriction>
    </xs:simpleType>
</xs:element> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T09:03:14.293

您不能让标准 xs:date 类型接受标准格式以外的格式。你可以做的是定义一个带有模式约束的字符串数据类型；但它没有日期语义，例如它将接受 1999/02/29。

Saxon 的 XSD 处理器有一个实验性扩展 saxon:preprocess，它允许您更改数据类型的词法表示。当然，没有多少人使用它，因为他们希望他们的模式是可互操作的。但它正是你想要的，所以我想我会提到它。

另一种经常被忽视但可能更实用的解决方案是让您的处理管道在执行验证步骤之前执行转换步骤。这种方法可以用来克服 XML Schema 的许多限制，而且它还不够广为人知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-18T23:05:44.583

您可以查看 melwil 发布的这个正则表达式。它对我有用！

```
((0[1-9]|[1-2]\d|3[01])-(0[13578]|1[02])|([0-2]\d|30)-(0[469]|11)|(0[1-9]|1\d|2[0-8])-02)-\d{4}|(0[1-9]|[12]\d)-02-(([02468][048]|[13579][26])00|(\d{2}([02468][48]|[2468][048]|[13579][26]))) 
```

# php - PHP - 编辑表单输入类型单选按钮

> ID：13409572
> 
> 赞同：0
> 
> 时间：2012-11-16T02:36:22.563
> 
> 标签：php, button

我有一个单选类型的表格，当用户填写并提交它时，我想添加用户编辑和更改他选择的答案的能力..所以当他点击（编辑）时，他会回到他以前的表格选定的按钮.. 我知道如何从数据库中获取数据，但是如何使先前选定的按钮出现在表单上？

所以其中一个问题就像..

```
<tr>
<th bgcolor='FF6600'> Clarity of speaking
(Could you hear the speaker properly and clearly?)<font size="4" > </font></th>
<td>  <input type="radio" name ="v3" value = "4"     onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v3" value = "3"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v3" value = "2"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v3" value = "1"    onclick="updateTotal();" /></td>    
</tr> 
```

我试过了，但没有成功

```
checked="<?php echo $v3; ?>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:42:22.100

根据您`DOCTYPE`的 ，该`checked`属性的存在就是将单选按钮显示为选中状态所需的全部内容。

您需要做的是将此属性包装在条件中，例如

```
<?php for ($i = 4; $i > 0; $i--) : ?>
<td>
<input type="radio" name="v3" value="<?= $i ?>"
       <?php if ($v3 == $i) ?>checked<?php endif ?>
        onclick="updateTotal()">
</td>           
<?php endfor ?> 
```

这将适合 HTML Doctype。如果您使用的是 XHTML，请更改`checked`为`checked="checked"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:43:35.687

像这样：

```
<tr>
<th bgcolor='FF6600'> Clarity of speaking
(Could you hear the speaker properly and clearly?)<font size="4" > </font></th>
<td>  <input type="radio" name ="v3" value = "4"<?php echo ($v3 == $value) ? ' checked="checked"' : null;?> onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v3" value = "3"<?php echo ($v3 == $value) ? ' checked="checked"' : null;?> onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v3" value = "2"<?php echo ($v3 == $value) ? ' checked="checked"' : null;?> onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v3" value = "1"<?php echo ($v3 == $value) ? ' checked="checked"' : null;?> onclick="updateTotal();" /></td>    
</tr> 
```

我假设您使用循环检查 $value 与 $v3 来打印单选选项以查找当前选定的选项。

# testing - 对经过身份验证的用户进行负载测试

> ID：13409574
> 
> 赞同：-1
> 
> 时间：2012-11-16T02:36:32.910
> 
> 标签：testing, load

我正在寻找几个选项来负载测试一些经过身份验证的用户的 asp.net 应用程序。有没有人有什么建议？我更喜欢开源或不是很昂贵的工具。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:15:53.320

开源工具会有一些限制。我建议您使用像 StressTester 这样的物超所值的工具，因为您将获得更可靠的结果（基于个人经验）。取决于您正在测试的应用程序对于您的目标有多重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:23:11.600

[AppLoader](http://www.nrgglobal.com/apploader/ "应用加载器")适用于经过身份验证的用户。虽然不是免费的，但您可以免费试用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T02:42:27.907

1.  [Apache JMEter](http://jmeter.apache.org/)
2.  [磨床](http://grinder.sourceforge.net/)

For more, Google for "开源负载测试库"

Alos 看看这篇文章[JMeter 测试 ASP .NET 网页有多好？](https://stackoverflow.com/questions/10649303/jmeter-and-asp-net)

# mysql - 如何在没有特殊标签的情况下在 mysql 中使用 FULLTEXT SEARCH(, 和别的）

> ID：13409575
> 
> 赞同：1
> 
> 时间：2012-11-16T02:36:42.163
> 
> 标签：mysql, full-text-search

我在 mysql 中使用帮助下一个代码进行 sarch：

```
SELECT * FROM `articles` WHERE MATCH (title,body) AGAINST ('database'); 
```

`<html>`如何在没有特殊标签（`<p>`和其他）的情况下在 mysql 中使用搜索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T02:59:56.877

有一个php函数可以做到这一点

```
strip_tags($text); 
```

你可以在这里找到更多信息 [http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

如果你仍然想在 mysql 中这样做，你必须定义你自己的函数

```
delimiter ||
DROP FUNCTION IF EXISTS strip_tags||
CREATE FUNCTION strip_tags( x longtext) RETURNS longtext
LANGUAGE SQL NOT DETERMINISTIC READS SQL DATA
BEGIN
DECLARE sstart INT UNSIGNED;
DECLARE ends INT UNSIGNED;
SET sstart = LOCATE('<', x, 1);
REPEAT
SET ends = LOCATE('>', x, sstart);
SET x = CONCAT(SUBSTRING( x, 1 ,sstart -1) ,SUBSTRING(x, ends +1 )) ;
SET sstart = LOCATE('<', x, 1);
UNTIL sstart < 1 END REPEAT;
return x;
END;
||
delimiter ; 
```

定义函数后在搜索查询中调用函数

```
$q="CALL strip_tags(SELECT textarea FROM table where ....)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T02:43:45.323

在将文本存储在 FULLTEXT 索引的列中之前删除 HTML 标记。如果您需要原始文本，请将其存储在不同的列中。

或者，使用真正的搜索索引器，例如 Lucene。MySQL FULLTEXT 是一种玩具。

# sitecore - 验证未发布的项目并发出警告

> ID：13409577
> 
> 赞同：0
> 
> 时间：2012-11-16T02:37:38.540
> 
> 标签：sitecore

场景：内容编辑器用户不断添加几篇文章，它们可以在内容树的不同位置。他们想通过查看内容树中的验证来了解必须发布哪些项目。

有人可以帮我编写一个验证规则来确定项目是否未发布并发出警告说“项目尚未发布”。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:47:48.787

有一个名为 Published Item Comparer 的模块可以满足您的需要：

[http://blog.velir.com/index.php/2011/04/29/published-item-comparer/](http://blog.velir.com/index.php/2011/04/29/published-item-comparer/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:52:11.883

您还可以考虑使用 Workflow，并根据需要设置最终批准步骤以发布该项目。用户将能够看到项目在 Workbox 中的工作流过程的哪个步骤。

# xcode - 在 IOS (Xcode) 中为函数创建类 java 文档

> ID：13409580
> 
> 赞同：0
> 
> 时间：2012-11-16T02:38:09.763
> 
> 标签：xcode, ios5, document

我是`IOS`开发的初学者，我正在使用`Xcode`. 在 java (android) 中，我可以`document`为如下函数创建：

```
 /**
 * Get the index object in list of object and try to catch
 * {@link IndexOutOfBoundsException}
 * 
 * @param list
 *            of object: {@link List}
 * @param index
 *            of ojbect: {@link Integer}
 * @return Object or null if {@link IndexOutOfBoundsException} occurs
 */
public static <T> T getIndexObject(List<T> list, int index) {
    T object = null;
    try {
        object = list.get(index);
    } catch (IndexOutOfBoundsException e) {
        return null;
    }
    return object;
} 
```

当我`document`如上所述创建时（在 Java 中），每次将鼠标悬停在函数上（在每个地方都使用）时，我都会看到该函数的文档。里面怎么`IOS`样`Xcode`？我知道`Doxygen`，但它只生成`HTML`文件（这不是我想要的）。`Apple`我想要（在`Ctrl + click`IOS SDK的功能上）提供的每个功能的默认文档之类的文档？我可以做吗？如何？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:32:30.007

使用[AppleDoc](http://gentlebytes.com/appledoc/)。他们的网站上有一篇文章解释了如何与 Xcode 集成：http: [//gentlebytes.com/appledoc-docs-examples-xcode/](http://gentlebytes.com/appledoc-docs-examples-xcode/)，基本上，您使用：

```
appledoc
--project-name appledoc
--project-company "Gentle Bytes"
--company-id com.gentlebytes
--output ~/help
--logformat xcode
. 
```

生成文档。此外，您还可以执行普通的 HTML。它是免费的，看起来很像 Apple 的文档。

# vb.net - 未处理的异常错误行和源函数

> ID：13409581
> 
> 赞同：0
> 
> 时间：2012-11-16T02:38:29.060
> 
> 标签：vb.net, function, exception-handling, visual-studio-2012, line-numbers

我正在使用 VS2012 VB.net。

我可以在创建一些代码来计算异常的错误行以及发生异常的函数方面提供一些帮助吗？

这是我当前的代码：

```
Partial Friend Class MyApplication

    Public exceptionListOfExceptionsToNotPauseOn As New List(Of ApplicationServices.UnhandledExceptionEventArgs)

    Private Sub MyApplication_UnhandledException(sender As Object, e As ApplicationServices.UnhandledExceptionEventArgs) Handles Me.UnhandledException

        Dim msgboxResult As MsgBoxResult
        Dim booleanExceptionFoundInList As Boolean = False

        'Dim trace As System.Diagnostics.StackTrace = New System.Diagnostics.StackTrace(ex, True)
        'Dim exceptionLineNumber = trace.GetFrame(0).GetFileLineNumber()

        For x = 0 To exceptionListOfExceptionsToNotPauseOn.Count - 1
            If exceptionListOfExceptionsToNotPauseOn(x).Exception.Message = e.Exception.Message Then
                booleanExceptionFoundInList = True
            End If
        Next

        If Not booleanExceptionFoundInList Then
            msgboxResult = MessageBox.Show("An exception error has occured." & vbCrLf & "Error message: " & e.Exception.Message & vbCrLf & "Do you wish to pause on this exception again?", "Exception", MessageBoxButtons.YesNoCancel, MessageBoxIcon.Question)

            If msgboxResult = Microsoft.VisualBasic.MsgBoxResult.No Then
                exceptionListOfExceptionsToNotPauseOn.Add(e)
            End If
        End If

        e.ExitApplication = False

    End Sub
End Class 
```

**更新**

跟踪代码的代码使用异常数据类型，其中处理未处理异常的代码具有“e As ApplicationServices.UnhandledExceptionEventArgs”参数。我可以使用这种数据类型的跟踪代码吗？我需要将其转换为异常类型吗？还是不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:30:48.450

这里有几个提示。首先是使用[PostSharp](http://www.sharpcrafters.com/solutions/logging)，它是一个 AOP 工具包，可让您使用 Attributes 跟踪所有方法的进入和退出。这将直接引导您使用该功能。

另一个技巧。订阅`ThreadExceptionEventHandler`实际确实会导致调试器在未处理的异常上中断！因此暂时注释掉你的`MyApplication_UnhandledException`并添加一个`ThreadExceptionEventHandler`

```
<STAThread> _
Public Shared Sub Main(args As String())
    Try
        'your program entry point
        Application.ThreadException += New ThreadExceptionEventHandler(Application_ThreadException)
            'manage also these exceptions
    Catch ex As Exception
    End Try
End Sub

Private Sub Application_ThreadException(sender As Object, e As ThreadExceptionEventArgs)
    ProcessException(e.Exception)
End Sub 
```

另一个技巧是不要在调试器下运行。调试器出于某种原因屏蔽了异常。如果您正常运行您的应用程序 ( `Ctrl`+ `F5`)，您将看到通常的*`Unhandled exception has occurred in your application... Continue/Quit?`*对话框。

> 上面处理未处理异常的代码有一个参数“e As ApplicationServices.UnhandledExceptionEventArgs”。我可以使用这种数据类型的跟踪代码吗？

不可以。您不能轻松地将跟踪代码数据类型与 UnhandledExceptionEventArgs 一起使用。一个想法可能是创建一个继承自 UnhandledExceptionEventArgs 的类，但我不知道您将如何调用`MyApplication_UnhandledException`具有特殊类型的函数，因为该函数是在 is 时调用`Exception`的`Unhandled`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:20:13.367

我没有精通 Vb.Net，但以前我使用过下面的代码，也许它可以帮助你 [ex.StackTrace()]

```
 Try
  'Your Code goes here
 Catch ex As Exception
  MsgBox(ex.StackTrace())
 End Try 
```

# xss - 如何禁用内联 javascript 但允许外部 .js 文件？

> ID：13409582
> 
> 赞同：3
> 
> 时间：2012-11-16T02:38:33.370
> 
> 标签：xss

（请原谅我的英语不好，我会尽量让自己清楚，谢谢！）

我不是高级用户。我想阻止任何内部 javascript（内部样式表）代码，但允许所有外部 .js 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:17:18.537

您可以使用 Firefox 中的 UserCSP 插件禁用内联 javascript。如果您为站点设置 CSP，它将默认阻止内联 JS 和从字符串（如 eval）创建 js 的函数。

[https://addons.mozilla.org/en-US/firefox/addon/newusercspdesign/](https://addons.mozilla.org/en-US/firefox/addon/newusercspdesign/)

# android - 数组整数 Android

> ID：13409587
> 
> 赞同：0
> 
> 时间：2012-11-16T02:39:18.873
> 
> 标签：android, arrays, android-edittext, textview

好的，所以我创建了一个包含整数的数组。该数组显示最小值和最大值中的五个数字。如何在 textview 或 edittext 中显示所有五个数字？我试过了：

```
nameofile.setText(al.get(x).toString()); 
```

但它只显示一个？

```
ArrayList<Integer> al = new ArrayList<Integer>();
for (int i = minint; i <= maxint; i++)
    al.add(i);

Random ran = new Random();

for (int i = 0; i < 5; i++) {
    int x = al.remove(ran.nextInt(al.size()));
    String myString = TextUtils.join(", ", al);
    lottonumbers.setText(myString); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:02:49.083

```
ArrayList<Integer> al = new ArrayList<Integer>();
    al.add(0);
    al.add(1);
    al.add(5);
    al.add(4);
    al.add(3);
    java.util.Collections.sort(al);//for sorting Integer values

    String listString = "";

    for (int s : al)
    {
        listString += s + " ";
    }
    nameofile.setText(listString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T02:50:10.007

您目前只打印出一个元素（位于 index 的那个`x`）。如果您想按顺序打印它们，只需使用[`TextUtils.join()`](http://developer.android.com/reference/android/text/TextUtils.html#join%28java.lang.CharSequence,%20java.lang.Iterable%29).

**更新**：看到您的编辑后，我认为有更好的方法来处理您正在尝试做的事情。与其尝试一次提取一个值并更新列表，不如直接打乱它们，然后使用上述方法？

**更新2**：好的，我想我终于明白你的问题了。那么简单的改变。

```
ArrayList<Integer> al = new ArrayList<Integer>();
for (int i = minint; i <= maxint; i++)
    al.add(i);

Random ran = new Random();

StringBuilder text = new StringBuilder(); // Create a builder
for (int i = 0; i < 5; i++) {
    int x = al.remove(ran.nextInt(al.size()));
    if (i > 0)
        text.append(", "); // Add a comma if we're not at the start
    text.append(x);
}
lottonumbers.setText(text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T02:41:56.170

al.get(x).toString() 只会获取索引“x”处的值。如果要显示所有值，则需要将数组中的所有值组合成一个字符串，然后在该字符串上使用 setText。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T03:02:17.277

您只在 TextView 中显示一个数组，您必须连接这些数字才能看到其他结果，例如：

```
for(Integer integer : al) {
  nameofile.setText(nameofile.getText() + " " + al.get(x).toString());
} 
```

然后我认为您可以在一个字符串中显示所有数字。

# python - 让 Python 发行版与 COPASI 和 libsbml 合作

> ID：13409590
> 
> 赞同：1
> 
> 时间：2012-11-16T02:39:59.800
> 
> 标签：python, python-2.7

我已经使用 Enthought Python Distribution（学术版）有一段时间了，但一直在尝试为一个项目安装一些额外的包，并且遇到了由于我对命令行相对缺乏经验而产生的问题。

这些是：

*   科帕西
*   libSBML
*   随机

最后一个很顺利，一个简单的`python setup.py install`，一切似乎都运行良好。但是 COPASI 和 libSBML 似乎都不起作用。

导入其中任何一个都会导致“ImportError：没有名为 COPASI/libsbml 的模块”。

我根据[此处](http://sbml.org/Software/libSBML/docs/python-api/libsbml-installation.html#unix-gnumake)的说明安装了 libSBML。并使用[此建议的解决方法](http://sbml.org/Forums/index.php?t=tree&th=1925&mid=7256&rid=0&rev=&reveal=)使其与 Enthought 一起使用，但无济于事。对于 COPASI，我按照指示安装了 COPASI，并按照以下说明进行 Python 绑定：

> 一旦你下载了 Java 绑定的二进制包，你必须解压它。它将被解压到一个名为 copasi_python 的目录中。该目录包含本机库、python 文件、文档文件和许可证文件。它还包含一个名为 unittests 的目录，其中包含许多可用于检查绑定是否正常工作的单元测试。
> 
> 要运行单元测试，您首先必须将 PYTHONPATH 环境变量设置为本机库和 COPASI.py 文件所在的目录。切换到 unittests 目录后，您会发现一个名为 runTests.py 的文件，它运行目录中的所有单元测试。

我编辑的 .bash_profile 文件现在看起来像这样：

```
export PATH="/Library/Frameworks/EPD64.framework/Versions/Current/bin:${PATH}"
export PYTHONPATH=/usr/local/lib/python2.7/site-packages
export PYTHONPATH=/Applications/COPASI/copasi35_python27_macosx107_x64:$PYTHONPATH 
```

第一行是使 EPD 成为默认的 python 解释器，第二行是上面建议的解决方法的结果，第三行是根据 COPASI 的说明。知道我做错了什么吗？

# php - 1.7 版中的 Codigniter 编码 2.0 版中的解码

> ID：13409591
> 
> 赞同：1
> 
> 时间：2012-11-16T02:40:04.650
> 
> 标签：php, codeigniter, decode, encode

以前有人遇到过这个问题吗？

从 codignier v1.7 我对一些数据进行编码，以便使用 codignier 2.0 向另一个站点提供 Web 服务

```
$to_send =  $this->encrypt->encode($data, '12345'); 
```

如果我不编码和解码，到另一个使用 codignier 2.0 从 curl 获取数据的站点，来自 curl 的数据很好。

```
$to_get = $this->encrypt->decode($data, '12345'); 
```

我也尝试将此添加到网站的两个站点，但如果默认值发生某些变化，仍然无济于事。

```
$this->encrypt->set_cipher(MCRYPT_RIJNDAEL_256);
$this->encrypt->set_mode(MCRYPT_MODE_CFB); 
```

当 echo $to_get 数据不可用时

```
"^6>þ×È·¾ˆ­÷Íón´= wÁSùçâÈþbåNÚÁ»¿_óÈÔfÞã@sf=µ@¹vÏŽ§ÃíŽÞ" 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:15:53.763

[`encode_from_legacy`](http://ellislab.com/codeigniter/user-guide/libraries/encryption.html#legacy)在 2.0.0 更新中引入的加密库中有一个方法。有关详细信息，请参阅[升级指南的第 4 步](http://ellislab.com/codeigniter/user-guide/installation/upgrade_200.html)。

还要确保在使用该方法时使用旧站点的加密密钥（通过配置文件或显式传入）。

# ruby-on-rails - 测试和断言的数量膨胀？

> ID：13409604
> 
> 赞同：1
> 
> 时间：2012-11-16T02:41:45.603
> 
> 标签：ruby-on-rails, ruby, autotest

我刚刚开始在 Rails 中进行自动测试。似乎我已经正确设置了所有内容（当我收到红色/绿色咆哮通知时）。但我不明白咆哮通知。

*   我有一个具有两个属性的模型
*   我有以下宝石（autotest-rails、autotest-growl、autotest-fsevent）
*   我已经设置了 ~/.autotest 文件（需要'autotest/fsevent'，需要'autotest/growl'）

我有一个看起来像这样的测试：

```
test "my first test" do
  assert true
end 
```

我不明白的是：

1.  我有两个咆哮窗口，为什么？

2.  第一个窗口显示正确的“1 个测试，1 个断言”，但第二个窗口显示“15 个测试，21 个断言”。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:50:11.443

当然，就是这样。脚手架产生了我不知道的功能测试。非常感谢@prusswan 的提示。

# php - 通过 PHP Web App / Facebook Deep Linking Workaround 获取电话 iPhone / Android 联系人

> ID：13409611
> 
> 赞同：0
> 
> 时间：2012-11-16T02:42:30.653
> 
> 标签：php, facebook, web-applications, mobile, deep-linking

这是情况。我正在为一家希望在其移动网站上设置 SMS 共享小部件的公司开发基于 PHP 的 Web 应用程序。目标是允许访问者通过 SMS 向他们的移动联系人列表进行大规模共享，这与 Cloudsponge 通过 Google/Hotmail/Yahoo/Exchange API 为电子邮件联系人执行此操作的方式非常相似。

我被反复告知这是不可能的，但经过一番研究，我们发现通过 Facebook 深度集成到更新的智能手机和移动设备中来实现这一目标的可能性。

所以，完全无能，并且对我如何实现这一点的知识为零……并且花了数小时研究谷歌，发现很少/误导性的信息，我来找你。去哪里看？该怎么办？不是在这里寻找蓝图......只是一只手（或两只，或三只手：-）为我指明正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T14:49:45.617

您无法从在移动浏览器中运行的网络应用程序访问任何系统功能（GPS 精确位置、联系人、相机）。只是出于安全原因。

# iphone - 使用 apple-mobile-web-app-capable 和 cache.manifest 问题

> ID：13409623
> 
> 赞同：1
> 
> 时间：2012-11-16T02:41:14.187
> 
> 标签：iphone, caching, safari, iphone-standalone-web-app

所以我有这个简单的html文件

```
<!DOCTYPE HTML>
<html manifest="cache.manifest"><head>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<title>Test</title>
<meta http-equiv="content-type" content="text/html">
<meta name="HandheldFriendly" content="true">
<meta name="viewport" content="width=320; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">

<body marginwidth="0" marginheight="0" topmargin="0" leftmargin="0">
    <h1>hello</h1>
</body>
</html> 
```

我的 cache.manifest 很简单

```
CACHE MANIFEST 
```

我在我的本地服务器 (localhost) 上运行这个网站。我从 iphone safari 加载它，它工作正常。然后我停止服务器并再次加载它，它可以工作，因为离线缓存正在完成它的工作。但是...如果我将网站保存为 iphone 仪表板中的开始图标，然后我尝试在服务器停止的情况下打开它，它将无法加载。但是......如果我在服务器至少运行一次的情况下打开它（它会工作），那么我可以稍后打开它而不会出现问题。

看起来即使该页面已在 Safari 中缓存，但它并未缓存在此保存的应用程序中。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:18:28.923

原因是 Safari 使用与 WebClips 不同的缓存。在 Safari 中缓存的事实并不意味着如果您从中创建 webClip，它将被缓存。您需要至少访问一次网络剪辑以将其缓存。

# sql - Rails，Ransack：如何在 HABTM 关系中搜索“所有”匹配项而不是“任何”匹配项

> ID：13409627
> 
> 赞同：7
> 
> 时间：2012-11-16T02:44:46.793
> 
> 标签：sql, ruby-on-rails, search, has-and-belongs-to-many, ransack

我想知道是否有人有使用 Ransack 与 HABTM 关系的经验。我的应用程序`photos`与之有 habtm 关系`terms`（术语就像标签）。这是对我所经历的事情的简化解释：

我有两张照片：照片 1 和照片 2。它们具有以下术语：

照片1：A、B、C

照片 2：A、B、D

我构建了一个搜索表单，并在搜索表单中为所有术语添加了复选框，如下所示：

```
- terms.each do |t|
  = check_box_tag 'q[terms_id_in][]', t.id 
```

如果我使用：`q[terms_id_in][]`并且我检查“A，C”，我的结果是照片 1 和照片 2。我只想要照片 1，因为我要求 A 和 C，在这个查询中我不关心 B 或 D，但我想要A 和 C 都出现在给定的结果中。

如果我使用`q[terms_id_in_all][]`我的结果为零，因为两张照片都只包含 A 和 C。或者，也许因为每次连接只有一个术语，所以没有连接匹配 A 和 C。无论如何，我只想返回照片 1。

如果我使用任何品种，`q[terms_id_eq][]`我永远不会得到任何结果，所以我认为这在这种情况下不起作用。

那么，给定一个 habtm 连接，您如何搜索与给定值匹配的模型，同时忽略未给定的值？

或者，对于任何不熟悉 Ransack 的 rails/sql 专家，您还可以如何创建一个搜索表单，就像我为具有 habtm 连接的模型所描述的那样？

* * *

更新：根据[相关问题的答案](https://stackoverflow.com/questions/13420773/convert-activerecord-habtm-query-to-arel/13445889#13445889)，我现在已经构建了一个正确匹配的 Arel 查询。不知何故，您应该能够将 Arel 节点用作洗劫者，或者正如 cdesrosiers 指出的那样，用作自定义谓词，但到目前为止，我还没有做到这一点。

根据该答案，我设置了以下 ransack 初始化程序：

```
Ransack.configure do |config|
  config.add_predicate 'has_terms',
    :arel_predicate => 'in',
    :formatter => proc {|term_ids| Photo.terms_subquery(term_ids)},
    :validator => proc {|v| v.present?},
    :compounds => true
end 
```

...然后在照片上设置以下方法：

```
def self.terms_subquery(term_ids)
  photos = Arel::Table.new(:photos)
  terms = Arel::Table.new(:terms)
  photos_terms = Arel::Table.new(:photos_terms)
  photos[:id].in(
  photos.project(photos[:id])
    .join(photos_terms).on(photos[:id].eq(photos_terms[:photo_id]))
    .join(terms).on(photos_terms[:term_id].eq(terms[:id]))
    .where(terms[:id].in(term_ids))
    .group(photos.columns)
    .having(terms[:id].count.eq(term_ids.length))
  ).to_sql
end 
```

不幸的是，这似乎不起作用。虽然`terms_subquery`产生了正确的 SQL，但结果`Photo.search(:has_terms => [2,5]).result.to_sql`只是`"SELECT \"photos\".* FROM \"photos\" "`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T23:14:25.907

[使用在我对您的相关问题的回答](https://stackoverflow.com/a/13445889/1366302)中定义的自定义洗劫谓词，这应该与您的标记的简单更改一起使用：

```
- terms.each do |t|
  = check_box_tag 'q[id_has_terms][]', t.id 
```

* * *

更新

并没有按照`:formatter`我的想法做，并且看到 Ransack repo 没有提到“子查询”，毕竟你可能无法将它用于你想要做的事情。所有可用的选项似乎都用尽了，所以除了猴子补丁之外别无他法。

为什么不像通常使用活动记录（或者甚至使用您现在拥有的 Arel 查询）那样跳过搜索并查询“照片”表？您已经知道查询有效。您是否希望从使用 Ransack 中获得特定的好处？

# java - 正确使用 Comparable 和泛型

> ID：13409635
> 
> 赞同：0
> 
> 时间：2012-11-16T02:46:41.370
> 
> 标签：java, generics

我无法让接口按照我希望使用泛型的方式工作。

我有一个 CRUD 风格的界面来处理各种对象的数据访问。`Comparable<?>`用于通过标识符获取对象，因为对象可能具有不同类型的标识符：

```
public interface DataProvider<T> {
  T create(T object);
  T get(Comparable<?> id);
  void update(T object);
  void delete(T object);
} 
```

现在想象一个需要访问的（人为的）对象，`Book`：

```
public class Book implements Comparable<Book> {

  private ISBN isbn;

  public int compareTo(Book other) {
    return getIsbn().compareTo(other.getIsbn());
  } 

  // ...
} 
```

我希望能够做到的是：

```
public class BookDataProvider implements DataProvider<Book> {
  public Book create(Book book) { ... }
  public Book get(ISBN isbn) { ... }
  public void update(Book book) { ... }
  public void delete(Book book) { ... }
} 
```

修改`DataProvider`和/或`Book`允许`get(ISBN)`编译的最简单方法是什么？

我提出了几个部分解决方案，但我不确定是否是最优的：

*   键入`DataProvider`as `DataProvider<T, I extends Comparable<I>>`，但这会增加一个额外的类型参数。
*   [根据这个相关帖子](https://stackoverflow.com/questions/12074557/how-to-use-comparablet)介绍一个`Identifiable`接口，实现它，然后键入as ，但是我没有实现.`Book``DataProvider``DataProvider<T extends Identifiable<?>>``get(ISBN)`

理想情况下，我想限制`DataProvider`只有一个类型参数。我也对其他方法持开放态度。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:54:56.173

在应用程序特定的 getter 方法中使用 Comparable 作为参数是不合适的。理想情况下，您的 get 方法不应该适用于任何 Comparable。它仅适用于 ISBN 等特定类型。所以我建议不要为 Comparable 泛型而苦苦挣扎，而是为此类标识符寻求通用接口。

让我们从您的部分选项中采用第二种方法并创建一个解决方案。下面是我建议的代码。

```
public class TestGenerics {
    public static void main(String[] args) {

    }
}

interface Identifiable<T extends Identifier> {
    T getIdentifier();
}

interface Identifier {

}

class Book implements Comparable<Book>, Identifiable<ISBN> {

    private ISBN isbn;

    public int compareTo(Book other) {
        return getIdentifier().compareTo(other.getIdentifier());
    }

    public ISBN getIdentifier() {

        return null;
    }

}

class ISBN implements Comparable<ISBN>, Identifier {

    public int compareTo(ISBN o) {
        return 0;
    }

}

interface DataProvider<T extends Identifiable<? extends Identifier>> {
    T create(T object);

    T get(Identifier id);

    void update(T object);

    void delete(T object);
}

class BookDataProvider implements DataProvider<Book> {

    public Book create(Book book) {
        return null;
    }

    public void update(Book book) {
    }

    public void delete(Book book) {
    }

    public Book get(Identifier id) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

现在这种方法是真正通用的，因为现在在顶层你有 Identifiable 和 Identifier 接口，这意味着每个 Identifiable（例如 book、pdf 等）都必须有一些 Identifier（例如 ISBN、bookNumber 等）。

现在，您使用 Book 作为 Identifiable 和 ISBN 作为 Identifier 来实现这个顶级层次结构。这将是您的实现层。

然后为泛型中提到的 Identifiable 创建 DataProvider 接口。它的get 方法将Identifier 作为参数，即如果DataProvider 用于Book，那么它的get 方法将用于ISBN。

现在在这里您使用 BookDataProvider 实现 DataProvider。在此类中，您不会将 ISBN 作为参数，而是将 Identifier 作为参数。您可以在其中传递 ISBN，因为它是一个标识符。

# ruby-on-rails - 是否可以使用带有年份文本框的 date_select？

> ID：13409636
> 
> 赞同：2
> 
> 时间：2012-11-16T02:46:52.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在寻找创建一个带有日期字段的祖先类型网页，该字段允许用户输入返回到您的数字的日期。这使得带有下拉框的 date_select 和 jquery datepicker 非常不友好。

有谁知道显示年份文本框但显示月份和日期下拉列表的好方法？

我希望使用 date_select 的“智能”，同时仍然允许用户以更用户友好的方式（文本框）输入年份。

感谢你给与我的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:05:26.023

非常尊重 Rails 的开发人员，date_select 的可用性几乎在任何情况下都很弱:-)

与其他字段类型不同，date_select 帮助器生成三个具有特殊名称和 ID 的选择标签，每个标签用于年、月和日元素。`params`这是一种命名约定，它允许控制器代码在处理数组时自动神奇地将输入重新组合成一个（单个）日期。

抱歉，我没有一个方便的命名格式示例（因为我从不使用 date_select），但是如果您查看字段的名称，您可能可以通过使用该`:discard_year`选项来模仿该行为而无需过多的骇客。这会让你得到月份和日期字段，以及一个包含当前年份的隐藏字段（我认为）。

如果您不反对使用一点 JS 或 CoffeeScript，您可以在加载 DOM 后修改输入字段，方法是删除`hidden`“type”属性（从而使其成为简单的文本字段）并将其值设置为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:05:01.257

我会在三个选项之间进行选择

1-仅对日期和月份使用 date_select，在年份中使用带有一些 javascript 的文本字段

Date_select 接受 :discard_year 选项，如果将其设置为 true，则年份字段将呈现为 hidden_​​field，因此没有选择/下拉[http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method- i-date_select](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select)

然后你放一个 text_field 并绑定到 keyUp 事件并修改隐藏年份字段的值

最重要的问题是，如果用户禁用了 javascript，则文本字段的值将永远不会设置为隐藏字段，这是一个问题。

2-仅对日期和月份以及文本字段使用 date_select

我不确定您是否可以执行此选项，您可以尝试使用与上面相同的 date_select 并将输入字段的名称设置为年份字段的名称。问题是 date_select 将放置一个具有该名称的隐藏字段，而您放置另一个具有相同名称的字段，并且提交时发送的值可能不是您想要的......您应该看看它是否可行。

3-使用 date_select 并使用 Choosen [http://harvesthq.github.com/chosen/添加额外的功能](http://harvesthq.github.com/chosen/)

像往常一样放置 date_select 并设置您想要的 start_year 和 end_year，然后将选择替换为选择的选择，选择的选择包括一个文本字段以在选择的年份之间进行搜索

Choosen 为您提供了几乎跨浏览器的漂亮且一致的外观（未在旧 IE 版本上测试），您可以获得用户友好的文本输入，如果禁用 javascript，用户仍然有三个选择。

我肯定会使用数字 3，但也许您不想添加插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-24T11:42:07.670

尝试使用 Tom 建议的 Javascript 路由，我想出了如下内容：

```
<%= f.date_select :birth_date %>
<script>
    var date_field =
        document.getElementsByName('ancestor[birth_date(1i)]')[0];
    var new_html = '<%=
        f.text_field 'birth_date(1i)', :value=>(f.object.birth_date.strftime("%Y") rescue "") %>';

    date_field.outerHTML = new_html;           
</script> 
```

（欢迎改进）

# hibernate - DetachedCriteria - 如何将分离的标准结果转换为整数？

> ID：13409641
> 
> 赞同：0
> 
> 时间：2012-11-16T02:47:49.083
> 
> 标签：hibernate, detachedcriteria

请帮我解决一下这个。

我使用独立的标准来获取客户总数。

在我的 CustomerDaoImpl 中：

```
@Override
public int getCustomerSize() {
    DetachedCriteria dc = getDetachedCriteria();
    dc.setProjection(Projections.count("customerId"));

    // I need to return only the count result.
    return 0;
} 
```

通常我所做的是得到结果，存储在集合中并使用`collection.size`. 我认为它效率不高，因为我必须获取不必要的数据才能获得`count`. 请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:35:41.813

```
Number result = (Number) dc.getExecutableCriteria(session).uniqueResult();
return number.intValue(); 
```

# python-2.7 - 安装 PythonMagick Windows 7 时遇到问题

> ID：13409643
> 
> 赞同：6
> 
> 时间：2012-11-16T02:48:08.433
> 
> 标签：python-2.7, imagemagick

我正在尝试安装 PythonMagick。我正在使用 Python 2.7 并运行 Windows 7。我尝试按照自述文件中的说明进行操作，但所有配置脚本都是“文件”类型，无法在 python 或 Windows 命令行中执行。我该怎么办？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-16T09:48:33.313

我建议您使用来自[Unofficial Windows Binaries for Python Extension Packages的](http://www.lfd.uci.edu/~gohlke/pythonlibs/)[预编译安装](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pythonmagick)程序。

只需点击[此链接](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pythonmagick)并为您的 Python 解释器下载正确的安装程序（在您的情况下，它将是`PythonMagick-0.9.10.win-amd64-py2.7.‌exe`或`PythonMagick-0.9.10.win32-py2.7.‌exe`，具体取决于您安装的是**64**位还是**32**位 Python 解释器）。

# c++ - 静态私有成员计数器

> ID：13409648
> 
> 赞同：0
> 
> 时间：2012-11-16T02:48:42.887
> 
> 标签：c++, private-members

更新：：

好的，所以我在头文件中有这些新行：

```
static void gcdStatsCounter();//increments counter
static void display(); // displays the gcdStats
static int gcdStats;//• calls to gcd

public:                                  // interface routines
        static void statistics();              // print statistics 
```

然后我添加到cpp文件中：

```
int Rationalnumber::gcdStats(0);//initialization

void Rationalnumber::gcdStatsCounter() { // counter incrementer
    gcdStats++;
}

void Rationalnumber::display() {// displays the gcdStats
    cout << "gcdStats = " << Rationalnumber::gcdStats << endl;
}

void statistics() {
    Rationalnumber::display();
}                       // print statistics 
```

**它给了我错误： static void Rationalnumber::display() 是私有的。**挑战是我只添加私人成员而不接触界面例程:(要避免使用朋友功能。有什么想法吗？

原帖::

我在更新以下部分下的静态计数器变量时遇到问题：//我的成员

规则：“不要更改、添加或删除接口的 GIVEN 代码的成员。如果需要，您可以添加私有成员，但不允许进行其他更改。”

我的问题是如何在不创建新公共函数的情况下更新私有成员？我知道我需要一个静态私有成员函数来访问一个静态私有成员变量。但是，每当我尝试访问静态私有计数器变量时，都会收到错误“未定义的引用...”例如，gcdStats 的这个私有计数器函数（声明为静态）会给我这样一个错误：

```
void Rationalnumber::gcdStatsCounter() {
    gcdStats++;
} 
```

头文件：

```
#ifndef RATIONALNUMBER_H
#define RATIONALNUMBER_H
#include <iostream>
// HEADER FILE

class Rationalnumber
{
    friend bool operator==( Rationalnumber l, Rationalnumber r );
    friend bool operator!=( Rationalnumber l, Rationalnumber r );
    friend bool operator<( Rationalnumber l, Rationalnumber r );
    friend bool operator<=( Rationalnumber l, Rationalnumber r );
    friend bool operator>( Rationalnumber l, Rationalnumber r );
    friend bool operator>=( Rationalnumber l, Rationalnumber r );

    friend Rationalnumber operator+( Rationalnumber l, Rationalnumber r );
    friend Rationalnumber operator-( Rationalnumber l, Rationalnumber r );
    friend Rationalnumber operator*( Rationalnumber l, Rationalnumber r );
    friend Rationalnumber operator/( Rationalnumber l, Rationalnumber r );

    friend std::istream &operator>>( std::istream &is, Rationalnumber &r );
    friend std::ostream &operator<<( std::ostream &os, Rationalnumber r );

    int num, denom;                        // implementation

    // MY MEMBERS

    // functions
    static int gcd(int n, int d); // for the gcd function
    static void zeroDenom(); // is called whenever denom = 0

    // variables
    // object stats:
    // The first four statistics vary depending on the implementation approach
    static void gcdStatsCounter();
    static int gcdStats;//• calls to gcd
    static int con;     //• rational-number objects created by regular constructors
    static int copy;    //• rational-number objects created by copy constructor
    static int des;     //• rational-number objects destroyed by destructor

    //operation stats:
    // must be consistent across implementations
    static int assn;    //• assignments to rational-number objects
    static int rel;     //• relational/equality operations between rational-number objects
    static int add;     //• addition/subtraction operations between rational-number objects
    static int sub;
    static int mul;     //• multiplication/division operations between rational-number objects
    static int div;
    static int in;      //• input/output operations on rational-number objects
    static int out;

  public:                                  // interface routines
    Rationalnumber();
    Rationalnumber( int n );
    Rationalnumber( int n, int d );
    Rationalnumber( const Rationalnumber &c ); // copy constructor
    ~Rationalnumber();

    int numerator() const;                 // return numerator
    int numerator( int n );                // set numerator to n; return previous numerator
    int denominator() const;               // return denominator
    int denominator( int d );              // set denominator to d; return previous denominator

    Rationalnumber operator-();            // unary negation
    Rationalnumber &operator=( const Rationalnumber &r ); // assignment

    static void statistics();              // print statistics

}; // Rationalnumber

#endif // __RATIONALNUMBER_H__ 
```

更新::见顶部

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T02:58:50.577

你只声明了你的静态成员，你还没有定义它们。

一般用静态变量，需要在类定义里面声明，然后在外面定义，例如：

```
class Rationalnumber
{

    static float f;
    //...

}; 
```

编辑：当然，定义应该放在 .cpp 文件中，而不是你的头文件中。这样做的原因是为了避免多个定义，如果您的头文件包含在多个源文件中，就会发生这种情况。链接器的任务是初始化静态对象，下面的行基本上告诉链接器它存在以及如何处理它。

```
//In Rationalnumber.cpp:
float Rationalnumber::f; //Allow default initialization
float Rationalnumber::f(5.0); //Initialize with non-default value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:54:24.583

这是给学校的吗？

也许您的老师希望您发现**朋友**关键字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T02:58:55.577

在标题中声明您的静态方法：

静态无效 gcdStatsCounter();

# haskell - 如何在使用 GHC 编译的 Haskell 函数中找到分配？

> ID：13409649
> 
> 赞同：14
> 
> 时间：2012-11-16T02:48:43.443
> 
> 标签：haskell, memory-management, ghc

我正在使用 GHC 7.4 编译以下函数：

```
nodups' :: [Int] -> Bool
nodups' = ok empty
  where ok _ [] = True
        ok seen (n:ns) = not (n `member` seen) && ok (n `insert` seen) ns
        member n word = testBit word n
        insert n word = setBit word n
        empty = 0 :: Int 
```

该函数在小整数列表中查找重复元素。该集合`seen`是将一组小整数表示为位向量。分析器（使用 运行`ghc -prof -auto-all`）声称该`ok`函数占总体分配的 22%。查看带有 的输出`-ddump-simpl`，我不明白为什么要分配此代码。我检查了一下，据我所知，它*没有*为调用分配 thunk 到`insert`.

我应该看什么来识别正在分配的代码部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:45:49.123

# 一般来说

我知道函数式语言的简单（科学）实现，如果我没记错的话，有可以与 Haskell 一起使用的[G-Machine 。](http://citeseer.ist.psu.edu/peytonjones92implementing.html)

这意味着（再次，如果我没记错的话）您的程序状态表示为“树”，其中节点（为了简单起见）是您在代码中使用的函数。叶子将是它的论据。然后，“G-Maschine”沿着“Spine”（节点的左侧链）查找并在可用的“Functions”（“Supercombinators”？）集合中查找它可以应用的模式匹配。如果从定义的**左侧**识别出**物质匹配**，则将其替换为定义的**右侧**。

 ****这意味着即使是简单的行

```
ok seen (n:ns) = not (n `member` seen) && ok (n `insert` seen) ns 
```

甚至

```
(n:ns) = ns 
```

在计算机内存中做某事，即匹配模式

```
 ...
     ...
    (:)
   /   \
  n     ns 
```

并将其替换为

```
 ...
     ...
    ns 
```

最终结果可能会比输入消耗更少的内存，但这是一个动态步骤，因此必须在某个地方进行。如果一遍又一遍地重复（在“紧密循环”中），那么这会让你的 CPU 很忙，你的内存也会很忙——只是因为 G-Machine 正在运行。（正如我所说，我不确定 G-Machine 概念是否适用于此，但我想它是类似的）。

# 具体猜测

```
 member n word = testBit word n
    insert n word = setBit word n 
```

除此之外，我还有一些怀疑。`testBit`并且`setBit`看起来像列表上的索引操作。如果是的话，可能需要一些工作。如果它们是正确的数组，那就没问题了。如果它们是一种地图或集合......嗯......可能涉及昂贵的散列？还是通过使用大量（昂贵？）比较操作的平衡树来实现？****

# java - 如何在 Android 编程中获取当前内容视图？

> ID：13409651
> 
> 赞同：12
> 
> 时间：2012-11-16T00:33:14.247
> 
> 标签：java, android

我知道我可以通过说 setContentView(int) 在 Android 应用程序中设置视图的内容。有没有可以用来了解当前内容视图的功能？我不知道这是否有意义，但我正在寻找的是一个名为 getContentView 的函数，它返回一个 int。

理想情况下，它看起来像这样：

```
setContentView(R.layout.main); // sets the content view to main.xml
int contentView = getContentView(); // does this function exist? 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T03:01:10.503

引用[Android 中任何简单、通用的方法来获取布局的根视图？](https://stackoverflow.com/questions/5488509/any-easy-generic-way-in-android-to-get-the-root-view-of-a-layout)

> 这个答案和评论提供了一种方法：[[从当前活动中获取根视图](https://stackoverflow.com/questions/4486034/android-how-to-get-root-view-from-current-activity/4488149#4488149])
> 
> findViewById(android.R.id.content)
> 
> 给定层次结构中的任何视图，您还可以调用：
> 
> view.getRootView()
> 
> 获取该层次结构的根视图。
> 
> “装饰视图”也可以通过 getWindow().getDecorView() 获得。这是视图层次结构的根，也是它附加到窗口的点，但我不确定你想直接弄乱它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T03:18:59.453

您可以仅通过 id 制作当前视图的 setter 和 getter

```
private int currentViewId = -1;

    public void setCurrentViewById(int id)
    {
        setContentView(id);
        currentViewId = id;
    }

    public int getCurrentViewById()
    {
        return currentViewId;
    } 
```

然后在

```
protected void onCreate(Bundle savedInstanceState)
{
        super.onCreate(savedInstanceState);
        setCurrentViewById(R.layout.main_layout);

} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-27T08:39:45.387

在一个活动中，你可以做

```
View rootView = null;
View currentFocus = getWindow().getCurrentFocus();
if (currentFocus != null)
    rootView = currentFocus.getRootView(); 
```

如上所述，还有

```
View decorView = getWindow().getDecorView(); 
```

也

```
View decorView = getWindow().peekDecorView(); 
```

The difference between the latter two is that `peekDecorView()` may return `null` if the decor view has not been created yet, whereas `getDecorView()` will create a new decor view if none exists (yet). The first example may also return `null` if no view currently has focus.

I haven't tried out whether the root view and the decor view are the same instance. Based on the [documentation](http://developer.android.com/reference/android/view/Window.html#getDecorView%28%29), though, I would assume they are, and it could be easily verified with a few lines of code.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-09T12:36:52.767

如果您有两个内容视图，那么您可以在每个内容的相对布局中放置一个标签。然后通过标签名称获取视图。如果标签名称是一个愿望，那么 blablabla。希望这对正在寻找解决方案的人有所帮助。

# vba - 如何将日期选择器添加到 VBA 用户窗体

> ID：13409653
> 
> 赞同：18
> 
> 时间：2012-11-16T02:49:29.517
> 
> 标签：vba, excel

我正在寻找添加到 userForm 以使用户能够选择日期的控件。我在这个地址找到了一个不错的

[在 VBA 的文本框中格式化 MM/DD/YYYY 日期](https://stackoverflow.com/questions/12012206/formatting-mm-dd-yyyy-dates-in-textbox-in-vba)

来自 Siddharth Rout，它非常完美，但它会生成我的应用程序不需要的隐形表。我试图停止创建工作表，但我无法弄清楚。

您能否让我知道如何正确修改 Siddharth Rout 代码或将我指向另一个类似的应用程序？

谢谢你的时间

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-07-05T16:16:50.267

**办公室 2013 说明**：

（适用于**Windows 7 (x64)** | MS Office **32 位**）

选项 1 | 检查能力是否已经存在 | 2分钟

1.  打开 VB 编辑器
2.  工具 -> 附加控件
3.  选择“Microsoft Monthview Control 6.0 (SP6)”（如果适用）
4.  对 VBA 用户窗体使用“DatePicker”控件

选项 2 | “月视图”控件当前不存在 | 5分钟

1.  **关闭**Excel
2.  **下载** [MSCOMCT2.cab](http://support.microsoft.com/kb/297381)（它是一个压缩文件，提取成两个有用的文件）
3.  **提取**两个文件 | .inf 文件和 .ocx 文件
4.  **安装**| 右键单击 .inf 文件 | 点击“安装”
5.  **移动**.ocx 文件 | 从“C:\Windows\system32”移动到“C:\Windows\sysWOW64”
6.  运行**CMD** | 开始菜单 -> 搜索 -> "CMD.exe" | 右键单击图标 | 选择“以管理员身份运行”
7.  **注册**Active-X 文件 | 键入“regsvr32 c:\windows\sysWOW64\MSCOMCT2.ocx”
8.  **打开**Excel | 打开 VB 编辑器
9.  **激活**控制 | 工具->参考 | 选择“Microsoft Windows 通用控件 2-6.0 (SP6)”
10.  **用户窗体**控件 | 在 VB 项目中选择任何用户窗体 | 工具->附加控件
11.  **选择**“Microsoft Monthview Control 6.0 (SP6)”
12.  **为 VBA 用户窗体**使用“日期选择器”控件****

 **好的，如果您在 Windows 7 (x64) 上安装了 Office 2013（32 位），这两个步骤中的任何一个都应该适合您。如果您有不同的 Windows 7 和 Office 2013 组合，某些步骤可能会有所不同。

“月视图”控件将是您完全充实的“日期选择器”。它配备了自己的属性和图像。它工作得很好。祝你好运。

站点：上面的“bonCodigo”（这是他工作的更新扩展）
站点：上面的“AMM”（这只是他添加的扩展）
站点：各种 Microsoft 支持网页

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-16T03:09:34.383

您可以尝试“Microsoft 日期和时间选择器控件”。要使用它，请在工具箱中右键单击并选择“其他控件...”。然后检查“Microsoft Date and Time Picker Control 6.0”并确定。您将在工具箱中有一个新控件来执行您需要的操作。

我刚刚在以下网址找到了一些打印屏幕： [http](http://www.logicwurks.com/CodeExamplePages/EDatePickerControl.html) ://www.logicwurks.com/CodeExamplePages/EDatePickerControl.html 忘记程序，只需检查打印屏幕。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-19T17:42:25.513

在 Access 2013 中。将“文本框”控件拖放到表单上。在“格式”选项卡下控件的“属性表”上，找到“格式”属性。将此设置为日期格式选项之一。工作完成了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-17T05:12:42.087

只需对与此控件相关的一些问题进行一些说明即可。

日期选择器不是办公包附带的标准控件。因此，当应用程序部署在其他一些机器/版本的 Office 中时，开发人员遇到了诸如缺少日期选择器控件等问题。为了使用它，您必须激活对包含它的 .dll、.ocx 文件的引用。

如果缺少日期选择器，您必须替换 System 或 System32 目录中的 MSCOMCT2.OCX 文件并正确注册。[尝试此链接以](https://stackoverflow.com/questions/15816014/how-to-install-mscomct2-ocx-file-from-cab-file-excel-user-form-and-vba)正确替换文件。

在 VBA 编辑器菜单栏-> 选择工具-> 参考，然后找到日期选择器参考并检查它。

如果您需要该文件，请从[此处](http://support.microsoft.com/kb/297381?wa=wsignin1.0)下载 MSCOMCT2.OCX 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-20T20:10:58.160

日历表单可以用作日期选择器的替代品。在用户表单示例中，我使用此日历表单将日期添加到文本框。双击文本框时，会显示日历表单：

[![在此处输入图像描述](../Images/7c1c4572e731b275036edeebd3039b23.png)](https://i.stack.imgur.com/SsIcg.gif)

```
Private Sub txtDOTDate_DblClick(ByVal Cancel As MSForms.ReturnBoolean)
Call GetCalendar
End Sub

Sub GetCalendar()
    dateVariable = CalendarForm.GetDate(DateFontSize:=11, _
        BackgroundColor:=RGB(242, 248, 238), _
        HeaderColor:=RGB(84, 130, 53), _
        HeaderFontColor:=RGB(255, 255, 255), _
        SubHeaderColor:=RGB(226, 239, 218), _
        SubHeaderFontColor:=RGB(55, 86, 35), _
        DateColor:=RGB(242, 248, 238), _
        DateFontColor:=RGB(55, 86, 35), _
        TrailingMonthFontColor:=RGB(106, 163, 67), _
        DateHoverColor:=RGB(198, 224, 180), _
        DateSelectedColor:=RGB(169, 208, 142), _
        TodayFontColor:=RGB(255, 0, 0))
If dateVariable <> 0 Then frmflightstats.txtDOTDate = dateVariable
End Sub 
```

[模板来源](https://eksi30.com/vba-option-button-control-on-userform/)**

# android - 如何在Android中无间隙地循环播放声音？

> ID：13409657
> 
> 赞同：22
> 
> 时间：2012-11-16T02:50:12.323
> 
> 标签：android, android-mediaplayer

我想在android中循环一个没有间隙的声音。我尝试使用代码`mediaplayer.setLooping(true)`循环播放声音，但是当第一个声音结束并开始下一个声音时，总会有一点停顿。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-16T04:36:48.187

尝试对应用程序中的声音文件使用 .ogg 文件格式。我遇到了同样的问题，经过大量研究，我尝试了 .ogg 格式，它在 android 中没有任何间隙地循环。

有关 .ogg 格式的信息：[http ://en.wikipedia.org/wiki/.ogg](http://en.wikipedia.org/wiki/.ogg)

您可以使用流行的开源应用程序[VLC 媒体播放器](http://www.videolan.org/vlc/)轻松地将您的声音文件从 .mp3 或您拥有的文件转换为 .ogg 。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-16T04:24:55.773

这是 android 操作系统中的一个错误 :( [http://code.google.com/p/android/issues/detail?id=18756](http://code.google.com/p/android/issues/detail?id=18756)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T05:09:15.540

另外值得注意的是，Jelly Bean（API 级别 16）添加了无缝播放。它允许您设置一个辅助媒体播放器，该辅助媒体播放器应该用于播放下一个音频流，只要主要播放器尚未完成当前音频的播放。这也可能用于创建无间隙的“循环”。

[`public void setNextMediaPlayer (MediaPlayer next)`](http://developer.android.com/reference/android/media/MediaPlayer.html#setNextMediaPlayer%28android.media.MediaPlayer%29)

显然，这对于大多数市场来说不会有太大帮助（目前[< 3% 的设备正在运行 JB](http://developer.android.com/about/dashboards/index.html)），但仍然值得一提。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T02:54:54.230

它通常工作得很好，除非你的手机很慢。

我会使用 Audacity 之类的音频编辑器仔细检查声音文件，以验证它在文件的开头或结尾没有任何静音。

# redirect - 是否可以为 github 存储库中的移动文件创建重定向？

> ID：13409660
> 
> 赞同：5
> 
> 时间：2012-11-16T02:50:32.220
> 
> 标签：redirect, github, move

我正在重新组织作为 github 存储库托管的文档集合。有什么方法可以在存储库中创建重定向，以便为已移动文件添加书签的任何人重定向到新位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-16T13:55:43.873

我不知道有什么方法可以为移动的文件设置重定向。下一个最好的事情取决于你需要什么？

*   **您只是想避免损坏的 URL 吗？**然后分发更永久的 URL。一种方法是在 GitHub 上找到要链接的文件，然后按`y`哪个将用提交 SHA 替换分支名称。例如，如果您在`https://github.com/fred/frobbler/blob/master/LICENSE.md`然后按`y`，您的浏览器将重新加载`https://github.com/fred/frobbler/blob/{commit-sha}/LICENSE.md`。即使`LICENSE.md`在以后的提交中被删除或重命名，该 URL 仍将保持有效。当然，人们现在将链接到该文件的特定（历史）快照。

*   **您想将人们转发到以前内容的最新版本吗？**在这种情况下，您可能需要保留旧文档，并在其中放置一个可以找到新文档的通知。或者，您使用其中一种 URL 缩写服务来生成一个公共 URL，这样您就可以稍后编辑实际的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:48:27.950

没有办法自动做到这一点。

服务器需要用`HTTP/1.1 301 Moved Permanently`代码回答。但 GitHub 只是提供页面。

只是把字用大字体**`MOVED TO http://new.url`**

# android - Gridview片段不刷新

> ID：13409661
> 
> 赞同：2
> 
> 时间：2012-11-16T02:50:41.860
> 
> 标签：android, replace, android-fragments, refresh

我有一个 FrameLayout 作为我用片段替换的滑动抽屉的内容。当我的活动开始时，FrameLayout 被 GridView 片段替换。当我单击 GridView 中的一个项目时，它会将 FrameLayout 替换为 TextView 片段。这个新片段有一个按钮，可以返回并用 GridView 片段再次替换 FrameLayout。这一切都很好，但由于某种原因，GridView 和 TextView 在更改为时都不会刷新，但是在我单击一个从服务器获取信息的按钮后，当时可见的任何一个都会刷新新信息。有没有办法让 android 认为我需要重绘 GridView 和 TextView？我在所有地方都尝试过 invalidate() ，但它似乎一点也不工作。好像android正在调用“getView”

对不起，令人困惑的问题和解释，我真的不知道要发布什么代码，因为有这么多。我会根据要求更新代码。请帮忙！谢谢你。

这是单击框架布局被替换为 textview 布局的地方：

```
 playerGridView = (GridView) findViewById(R.id.playerInfoGrid);
    if (playerGridView != null) {
        playerGridView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                drawerFragment2 = new topFrag();
                FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
                transaction.replace(R.id.frag_content, drawerFragment2);
                transaction.addToBackStack(null);
                transaction.commit();
            }
        });
    } 
```

这是 topFrag 是什么：

```
public class topFrag extends Fragment {

private TextView view;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
    Bundle savedInstanceState) {
    // Inflate the layout for this fragment
    return inflater.inflate(R.layout.slidingdrawer2, container, false);
}

@Override
public void onStart() {
    super.onStart();
    view = (TextView) getView().findViewById(R.id.characterInfo);
    view.setText("hello");
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
}
} 
```

内部有框架布局的主要布局：

```
<?xml version="1.0" encoding="utf-8"?>  
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >    
<SlidingDrawer
     android:id="@+id/drawer" 
     android:layout_width="match_parent" 
     android:layout_height="match_parent" 
     android:topOffset="125dip"
     android:handle="@+id/handle" 
     android:content="@+id/frag_content">

    <ImageView 
        android:id="@+id/handle" 
        android:contentDescription="@string/handle"
        android:layout_width="120dip" 
        android:layout_height="30dip"
        android:src="@drawable/drawertab"/>

    <FrameLayout
        android:id="@+id/frag_content"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</SlidingDrawer>

</RelativeLayout> 
```

这是我用以下内容替换框架布局的内容：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#50808080" >

<TextView
    android:id="@+id/characterInfo"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/playerInfoBack"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#FFFFFF" />

<Button
    android:id="@+id/playerInfoBack"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="@string/back"
    android:onClick="back" />

</RelativeLayout> 
```

不知道这是否有帮助，或者只是让它变得更加混乱。

当您单击 playerGridView 上的项目时，它会将 framelayout（主布局）替换为新的“topFrag”（首先显示），该新“topFrag”（首先显示）使用带有按钮的 textview 布局来膨胀片段。我只想在单击项目后更新你好。感谢您的关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:52:16.900

对于 GridView，您将在支持 GridView 的适配器上调用[notifyDataSetChanged()](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged)以便它知道更新。

对于 TextView，我必须查看代码才能了解那里发生了什么。

# php - 可继承数组的设计模式？

> ID：13409662
> 
> 赞同：0
> 
> 时间：2012-11-16T02:50:42.840
> 
> 标签：php, design-patterns, inheritance

给定以下类结构：

```
class Foo {
    protected static $_things = ['thing'];
}

class Bar extends Foo {
    protected static $_things = [
        'thing', 'other-thing'
    ];
}

class Baz extends Bar {
    protected static $_things = [
        'thing', 'other-thing', 'something-else'
    ];
}

class Quux extends Baz {
    // Note the lack of "other-thing"
    protected static $_things = [
        'thing', 'something-else', 'one-more'
    ];
} 
```

重构这个并保持数组元素更干燥的最佳方法是什么？例如，“thing”元素应该只定义一次（in `Foo`），“other-thing”元素应该只定义一次（in `Bar`），等等。

在实践中，这个数组非常大，有时最多可以有 4 或 5 级继承，每个都需要以某种特殊的方式“修改”这个数组，无论是添加*还是删除*元素。

我一直在玩弄可以进行适当修改的初始化方法的想法，但想先看看是否有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:08:45.447

我能想到的最简单的解决方案（主要基于单例模式）。

我认为没有任何编译时方法可以做你正在寻找的东西。

```
<?php
class A {
    private static $a = [1, 2, 3];
    public static function getA() {
        return self::$a;
    }
}

class B extends A {
    private static $a = null;
    public static function getA() {
        if (self::$a === null)
            self::$a = array_merge(A::getA(), [4, 5, 6]);
        return self::$a;
    }
}

echo join(',', B::getA()) . "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:51:26.863

判断不完全了解用例有点困难，但继承似乎是错误的方法。无论如何，您需要将数据的存储方式和访问方式分开，即将数据结构与数据模型分开。

最好的解决方案是创建一个单独的列表类并在多个客户端中使用它。例如：

```
class SomeList{
    private $_things = ['thing'];
    function mergeItems( $items ){
        //merge the $this->_things and $items arrays uniquely
        //...
    }
}

class Foo{
    private $list;

    function __construct( $list ){
        $this->list = $list;
        $this->list->mergeItems( ['thing', 'other-thing'] );
    }
} 
```

您永远不应该将状态存储在静态属性中

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T03:01:35.253

也许这样的事情会起作用：

```
class Foo {
    protected static $_things = ['thing'];
}

class Bar extends Foo {
    protected static $_things = array_merge($_things, ['other-thing']);
}

//and so on... 
```

# php - 如何在网页函数中调用php类中的函数

> ID：13409663
> 
> 赞同：1
> 
> 时间：2012-11-16T02:50:53.773
> 
> 标签：php, javascript, html, function, web

代码示例；

PHP 网页：(index.php)

```
 <html><head></head>
    <body>
    <?php 
    include("class_validation.php");
    $val = new validation();

        if(isset($_POST['action'])) doSomething();

    function doSomething() {
        $val->validate(); //I AM UNABLE TO DO THIS!
    }
    ?>
    </body>
    </html> 
```

PHP 文件：（class_validation.php）

```
<?php
class validation()
{
    function validate(){
        //some validation
    }
}
?> 
```

问题：如何在我在 PHP 网页中创建的函数中调用“class_validation.php”文件中的函数？我可以正确调用函数 doSomething() 以及调用函数 $val->validate(); 当不在另一个函数中时。我有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T02:52:47.450

`$val`超出该`doSomething()`函数调用的范围。将其作为参数传递给函数：

```
// Define the function to accept a parameter. Use a type hint to be sure it is 
// a validation object
function doSomething(validation $val) {
  $val->validate(); 
}

if(isset($_POST['action'])) doSomething($val); 
```

（[关于类型提示的 PHP 文档](http://php.net/manual/en/language.oop5.typehinting.php)）

或者，***不推荐***，您可以使用`global`函数内部的关键字来引用全局`$val`.

```
function doSomething() {
  // Don't do it this way. The func parameter is preferred
  global $val;
  $val->validate(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:53:12.033

您似乎正在寻找仅适用于[匿名函数](http://www.php.net/manual/en/functions.anonymous.php)的闭包支持。

根据您的代码示例，它似乎不是一个正确的用例。也许您应该将此值作为函数参数传递？

# ruby-on-rails - Rails 如何适合客户端丰富的 Web 应用程序？

> ID：13409666
> 
> 赞同：1
> 
> 时间：2012-11-16T02:51:57.583
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是 Ruby on Rails 的新手，我试图在简单的博客示例之外了解它的用法。

1.  看起来 Rails 使与表单交互和接收/保存对象到数据库变得容易。我在“twitter”或“blog”类型的应用程序中得到了这个。但是更真实的世界类型的例子呢？假设我们构建了一个主页，其中包含登录/注册的大部分静态信息（w/设计和 OmniAuth）。

    一个。我需要一个“家庭”控制器吗？
    湾。就此而言，我是否需要一个与网站上每种类型的网页相对应的控制器（假设页面不是 100% 静态的，在这种情况下它将位于 /public 中）？

2.  如果在您登录后用户被带到一个使用图表、数据表和地图的功能丰富的页面怎么办？也许这三件事需要来自 3 个不同模型的数据。这要怎么做？我想在这种情况下会有很多客户端逻辑（如 Kendo UI 或 Jquery）。所以我想rails应用程序基本上会变成一个json API？如果一个页面将有很多客户端的奇思妙想... rails 是正确的后端吗？

抱歉这些愚蠢的问题。我没有 Rails 导师。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:22:09.837

1.  a) 您不需要“家庭”控制器。但是，您应该有一些控制器来处理“根”路径作为登录页面/仪表板，而“主”控制器可以很好地处理这个问题。

    b) 您将需要一个控制器来处理每个概念类别或资源（如在 REST 中），但不一定每个页面都有一个控制器。例如，所有“帮助”页面都可以由单个控制器处理。

2.  图表的底层数据可以与初始页面一起构建，或者更常见的是通过 ajax 从控制器操作构建。控制器操作将负责收集和返回适当的数据。然后，您可以使用客户端 api（例如谷歌图表）来构建可视化图形，或者您可以使用帮助模块在服务器端构建并返回所需的图像或 HTML/JS/CSS 来表示图形。

> 如果一个页面将有很多客户端的奇思妙想... rails 是正确的后端吗？

这个问题会让你在 SO 上遇到麻烦 :)

但是，可以说它与用于封装客户端“whiz-bang”库的任何其他框架一样好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T03:25:35.063

我一直在使用基于表单的管理区域和用于一般用户前端的单页应用程序的 Rails 单页 Web 应用程序。

对于单页应用程序，Rails 提供 RESTful API (JSON) 来提供数据，其中表示逻辑使用 Javascript 实现，并使用 Backbone.js 以更接近 MVC 模式的方式组织。

对于你的问题 1)

a) 对于使用 Devise 的身份验证，您可能需要一个控制器来解释登录请求，但对于后续请求，您可以决定您的基本路由和控制器映射是什么。

b) 不！您不需要为网站上的每个网页使用单独的控制器。您可以使用相同的控制器并根据请求方法和参数呈现不同的视图。

2) 如果您在不同的模型中为每个图形、数据表和地图获取数据，一种方法是实现一个控制器，该控制器从每个模型中查询数据并以合适的方式为每个 UI 元素进行准备。为此，最简单的方法是在 JSON 中呈现视图，以便为 UI 组件绑定数据。

如果您想以灵活的方式呈现 JSON，[https://github.com/nesquena/rabl](https://github.com/nesquena/rabl)将是一个不错的选择。

目前，我正在使用 Rails 进行一个项目（大约两年前），并且 RESTful JSON API 仍在不断发展，没有重大挑战。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T03:33:22.600

> 如果一个页面将有很多客户端的奇思妙想... rails 是正确的后端吗？

Rails 可以作为具有大量客户端代码的应用程序的后端。在某些时候，您（可能）需要进行一些基本的用户管理和身份验证，以及获取和发送某种持久性数据，这样 Rails 本身就不会“出错”。有人可能会争辩说，如果您打算使用 Ruby，则使用诸如[Sinatra之类的更轻量级的框架，或者如果您真的只是要创建一个像](http://www.sinatrarb.com/)[Bottle (Python) 或](http://bottlepy.org/docs/dev/)[node.js](http://nodejs.org/) + [express](http://expressjs.com)的 Javascript 堆栈这样的框架，将更适合您。 RESTful API + 一些登陆页面，但 Rails 也可以完美地做到这一点，并且有很多其他功能可供您在时机成熟时使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T04:38:39.787

感谢上面的好答案。

实际上，我刚刚看到一个视频，它很好地回答了我的问题。我把它贴在这里是为了那些可能会好奇的人：

[http://ontwik.com/ruby/building-rails-apps-for-the-rich-client/](http://ontwik.com/ruby/building-rails-apps-for-the-rich-client/)

# python - Django、Facebook 图形 API 和 iOS

> ID：13409667
> 
> 赞同：3
> 
> 时间：2012-11-16T02:52:03.280
> 
> 标签：python, ios, django

我在这个领域是全新的，我正在我的服务器上使用 django 构建一个 iOS 应用程序，需要一些建议和帮助如何去做。我正在使用 django-tastypie 编写 Web 服务。该应用程序的用户身份验证使用 facebook iOS sdk。发布 Facebook 提供的唯一 ID 已发送到我的服务器，以使用 Facebook-Graph API 从他们的个人资料中访问公共数据，并存储在我服务器上的数据库中。我正在使用 ASIHTTPRequest 库来处理从应用程序到服务器的 HTTP 请求。请告诉我我的方法是否正确，如果可能的话，请帮助我提供一些可以帮助我的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:56:50.953

我发现[Pyfb](https://github.com/jmg/pyfb)对于使用 Facebook Graph API 的项目来说是一个很好的节省时间。

# python - 如何格式化 timedelta 以进行显示

> ID：13409682
> 
> 赞同：12
> 
> 时间：2012-11-16T02:54:30.643
> 
> 标签：python

我的脚本计算了 2 次的差异。像这样：

```
lasted = datetime.strptime(previous_time, FMT) - datetime.strptime(current_time, FMT) 
```

它返回给我一个 timedelta 对象。目前，它给了我几秒钟的差异。

我怎样才能格式化它以很好地显示？

例如将“121”转换为“00:02:01”？

谢谢你。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-16T02:57:30.027

你试过使用`str()`吗？

```
>>> a = datetime.now()                 
>>> b = datetime.now() - a
>>> b
datetime.timedelta(0, 6, 793600)
>>> str(b)
'0:00:06.793600' 
```

或者，您可以使用字符串格式：

```
>>> a = datetime.now()                 
>>> b = datetime.now() - a
>>> s = b.total_seconds()
>>> '{:02}:{:02}:{:02}'.format(s // 3600, s % 3600 // 60, s % 60)
'00:00:06' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T03:13:22.853

您可以`str`通过创建新的 timedelta 对象来截断使用时的秒数

```
>>> a = datetime.now()
>>> b = datetime.now()
>>> c = b-a
>>> str(c)
'0:00:10.327705'
>>> str(timedelta(seconds=c.seconds))
'0:00:10' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-20T02:06:52.327

[在这里插入无耻的自我宣传免责声明]

您可以使用[https://github.com/frnhr/django_timedeltatemplatefilter](https://github.com/frnhr/django_timedeltatemplatefilter)

它被打包为 Django 的模板过滤器，所以这是重要的部分，只是普通的 Python：

```
def format_timedelta(value, time_format="{days} days, {hours2}:{minutes2}:{seconds2}"):

    if hasattr(value, 'seconds'):
        seconds = value.seconds + value.days * 24 * 3600
    else:
        seconds = int(value)

    seconds_total = seconds

    minutes = int(floor(seconds / 60))
    minutes_total = minutes
    seconds -= minutes * 60

    hours = int(floor(minutes / 60))
    hours_total = hours
    minutes -= hours * 60

    days = int(floor(hours / 24))
    days_total = days
    hours -= days * 24

    years = int(floor(days / 365))
    years_total = years
    days -= years * 365

    return time_format.format(**{
        'seconds': seconds,
        'seconds2': str(seconds).zfill(2),
        'minutes': minutes,
        'minutes2': str(minutes).zfill(2),
        'hours': hours,
        'hours2': str(hours).zfill(2),
        'days': days,
        'years': years,
        'seconds_total': seconds_total,
        'minutes_total': minutes_total,
        'hours_total': hours_total,
        'days_total': days_total,
        'years_total': years_total,
    }) 
```

没有比这更简单的了：）不过，请查看自述文件以获取一些示例。

对于您的示例：

```
>>> format_timedelta(lasted, '{hours_total}:{minutes2}:{seconds2}')
0:02:01 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-03T19:30:52.570

该小数秒位有时在时间增量中是不需要的。通过拆分和丢弃快速截断该小数位：

```
a = datetime.now()
b = datetime.now() - a 
```

然后

```
str(b).split('.')[0] 
```

（假设几分之一秒与您无关的应用程序）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T03:03:55.500

希望这能解决您的问题，

```
import datetime
start = datetime.datetime(2012,11,16,11,02,59)
end = datetime.datetime(2012,11,20,16,22,53)
delta = end-start
print ':'.join(str(delta).split(':')[:3])

In [29]: import datetime
In [30]: start = datetime.datetime(2012,11,16,11,02,59)
In [31]: end = datetime.datetime(2012,11,20,16,22,53)
In [32]: delta = end-start
In [33]: print ':'.join(str(delta).split(':')[:3])
4 days, 5:19:54 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-03T23:13:54.840

扩展@blender的答案。如果您对毫秒分辨率感兴趣

```
a = datetime.now()
b = datetime.now() - a
s = b.seconds
ms = int(b.microseconds / 1000)
'{:02}:{:02}:{:02}.{:03}'.format(s // 3600, s % 3600 // 60, s % 60, ms) 
```

# ruby-on-rails-3 - 在载波中复制图像

> ID：13409685
> 
> 赞同：0
> 
> 时间：2012-11-16T02:55:07.053
> 
> 标签：ruby-on-rails-3, amazon-s3, carrierwave

我有一种方法可以在 Carrierwave 中复制图像，但`Validation failed: Image could not download file`在运行时收到错误消息。它会创建一份 Invoice 副本，然后遍历它的关联图像，将它们设置为 remote_image_url 并重新上传它们。

我认为这与图片网址末尾有 AccessKey 信息这一事实有关。任何的想法？

```
 def self.duplicate_it(invoice)

    new_invoice = invoice.dup
    new_invoice.save

    if invoice.images.any?
      invoice.images.each do |i|
        temp_image = i.image

        new_image = Image.new(:remote_image_url => temp_image.to_s, :order_id => new_invoice.id)
        new_image.save!
      end
    end 

  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T22:15:33.460

这有效

```
new_invoice = invoice.dup :include => {:lineitems => :images} do |original, kopy|
  kopy.image = original.image if kopy.is_a?(Image)
end 
```

# java - SWT中的动态颜色应该如何分配和处置？

> ID：13409687
> 
> 赞同：4
> 
> 时间：2012-11-16T02:55:26.853
> 
> 标签：java, colors, swt

我有时需要在 SWT 中动态生成颜色。以一个视图为例，该视图以红绿色的不同颜色显示 0-1 之间的分数。可能还有其他不同颜色的类似视图：

```
class ScoreView {
    private Canvas canvas;
    private List<Item> items = new ArrayList<Item>();

    public ScoreView(Composite parent) {
        canvas = new Canvas(parent, SWT.NONE);

        canvas.addPaintListener(new PaintListener() {
            public void paintControl(PaintEvent event) {
                GC gc = event.gc;

                int x = 0;
                for(Item item:items) {
                    int shade = (int)(item.getScore() * 255.0);

                    Color color = new Color(Display.getCurrent(), shade, 255-shade, 0);
                    gc.setBackground(color);
                    gc.fillRectangle(x, 0, 50, 50);
                    x += 50;
                }
            }
        });
    }

    public void setItems(List<Item> items) {
        this.items = items;
        canvas.redraw();
    }
} 
```

在 SWT 中，您应该始终释放资源。来自[http://www.eclipse.org/articles/Article-SWT-Color-Model/swt-color-model.htm](http://www.eclipse.org/articles/Article-SWT-Color-Model/swt-color-model.htm)：

> 颜色包含必须分配和释放的操作系统资源。因此，有必要处理您创建的每种颜色。

那么处理颜色的最佳方法是什么？

来自[http://www.eclipse.org/articles/swt-design-2/swt-design-2.html](http://www.eclipse.org/articles/swt-design-2/swt-design-2.html)：

> 如果您在小部件中使用图形资源 - 例如，widget.setFont(font) - 通常最好在释放它们所使用的小部件时清理这些资源，以便您可以在小部件上挂接一个 dispose 侦听器。 .

所以我可以跟踪我分配的每种颜色，并将它们`DisposeListener`放置在画布或外壳上。但来自同一个链接：

> 当程序退出时，操作系统会释放程序的所有资源。为什么不只依靠这个？操作系统资源不是无限的。如果您的程序没有释放不再需要的资源，则可能会耗尽资源。它还可能导致其他程序耗尽资源。所以等到程序退出来释放资源通常是个坏主意。

看起来我没有得到任何东西，因为即使颜色被处理，它们也会在退出时被处理（视图持续程序的生命周期）。

*我认为我*不能直接`PaintListener`在*在那次通话中没有再次使用？*

如果我做到了，如果只有几种颜色可用，还有另一个问题。由于颜色分配的顺序，我可以渲染许多红色阴影，然后用完颜色，并且无法显示任何绿色阴影。那么在这种情况下，*在程序开始时预先分配我可能需要的一系列颜色（如调色板）会更好吗？我应该分配多少个，按什么顺序分配？*这意味着永远不要丢弃这些颜色。

另外，有什么方法可以随时知道有多少种颜色可用？其他正在运行的程序是否会占用可用的颜色数量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T10:40:09.263

Eclipse RCP 通过全局[ColorRegistry](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/resource/ColorRegistry.html)处理这个问题。

通过使用它，您可以避免在应用程序启动时进行资源预分配。当你需要一个资源时，你可以在全局注册表中查询它。如果它不可用，您将其分配并注册到全局注册表。

```
private static final String SHADE = "shadedcolor";

Color color = null;
if (!JFaceResources.getColorRegistry().hasValueFor(SHADE)) {
    color = new Color(Display.getCurrent(), shade, 255-shade, 0);
    JFaceResources.getColorRegistry().put(SHADE, color);
} else {
    color = JFaceResources.getColorRegistry().get(SHADE);
} 
```

资源将在应用程序退出时被释放。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T11:39:14.713

除了前面的答案，您还可以使用系统颜色。这些颜色不需要处理。

您可以通过调用来访问它们[`Display#getSystemColor(int)`](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Display.html#getSystemColor%28int%29)：

```
Display display = Display.getCurrent();
Color blue = display.getSystemColor(SWT.COLOR_BLUE); 
```

有关可用颜色的列表，请访问：[SWT 的 Javadoc](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/SWT.html)

您可以使用以 . 开头的任何内容`SWT.COLOR_`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T07:32:01.850

在`paintControl`方法中，创建颜色，使用它并处理它。

```
Color color = new Color(Display.getCurrent(), shade, 255-shade, 0);
gc.setBackground(color);
gc.fillRectangle(x, 0, 50, 50); // this call renders it then you can dispose the color
color.dispose(); 
```

这种方法的问题是，创建/销毁资源是昂贵的操作。这就是为什么你需要缓存它。

我建议你`shadeColor`在`Item`. 当分数发生变化时，处理现有的`shadeColor`并创建新的`shareColor`. 处置/移除`shareColor`时处置。`Item`

# redirect - cakephp 2.1 错误重定向到另一个蛋糕实例

> ID：13409688
> 
> 赞同：0
> 
> 时间：2012-11-16T02:55:28.120
> 
> 标签：redirect, cakephp-2.1

在我的服务器中，我有两个站点：

opm.asc

开发者.opm.asc

当用户在 opm.asc 上工作时，我在 dev.opm.asc 上进行开发；当新版本准备好时，我只需将 dev.opm.asc 的新副本制作为 opm.asc，授予权限，我们就可以开始了。

几天前，生产站点 opm.asc 开始反映 dev.opm.asc 文件夹上的代码更改！。例如，我在 dev.opm.asc 上的模型中添加了一些验证，这会影响 opm.asc 上的用户。

最明显的标志是登录页面：我在此页面上显示版本号，并且 opm.asc 上的用户显示我的页面，因为它在 dev.opm.asc 上，而不是在他们正在工作的 opm.asc 上。

IT和我自己去服务器日志和htaccess等上寻找痕迹，没有发现故障；然后我们发现错误一定出在代码本身上，因为几天前的副本没有显示这种行为。

然后我尝试了我最近的代码，问题就消失了。但是，我们无法检测到任何可疑代码。

昨天它又开始发生了，我就是不知道是哪段代码（如果有的话）导致了这种情况。我在 Windows netbeans 7 中编程时在 unix 服务器上使用 jquery、css 等。

关于这怎么可能的任何想法？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:14:34.283

在复制到生产站点之前，您可以尝试清理 dev 中的 app/tmp 文件夹。

# youtube-api - 如何在 API 上传 (v2) 后检查所有支持的 YouTube 平台的视频何时完成处理

> ID：13409690
> 
> 赞同：0
> 
> 时间：2012-11-16T02:55:34.363
> 
> 标签：youtube-api

我正在使用 YouTube API V2 上传视频，并且我想在上传完成后分享它（例如 Twitter、FB、G+）。在分享视频之前，我如何检查以确保视频可以在 YouTube 支持的所有平台上播放？例如，我正在上传一个 WebM 视频，但我想确保 iOS 设备上的用户可以在我分享之前观看新上传的视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:55:34.363

使用 YouTube API V2，您可以通过查看以下元素来轮询视频处理的状态：[https](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_yt:state) ://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_yt:state 。包含标签的视频条目不可播放。但是，遗憾的是，目前没有并不能保证在所有平台上播放。因此，在 YouTube API v2 中，无法以编程方式确定视频在这种情况下可以在 iOS 上播放的确切时间。

# php - 获取内容：从 RSS 提要编码

> ID：13409692
> 
> 赞同：2
> 
> 时间：2012-11-16T02:55:37.620
> 
> 标签：php, parsing, rss, feed

我正在使用它来解析来自 rss 提要的内容：

```
$rss = new DOMDocument();
$rss->load($feedurl);
$feed = array();
foreach ($rss->getElementsByTagName('item') as $node) {
    $item = array(
        'title' => $node->getElementsByTagName('title')->item(0)->nodeValue,
        'content' => $node->getElementsByTagName('content:encoded')
            ->item(0)->nodeValue,
        'link' => $node->getElementsByTagName('link')->item(0)->nodeValue,
        'date' => $node->getElementsByTagName('pubDate')->item(0)->nodeValue,
        'guid' => $node->getElementsByTagName('guid')->item(0)->nodeValue,
    );
    array_push($feed, $item);
}
$limit = 1;
for ($x = 0; $x < $limit; $x++) {
    $title   = str_replace(' & ', ' &amp; ', $feed[$x]['title']);
    $link    = $feed[$x]['link'];
    $content = $feed[$x]['content'];
    $guid    = $feed[$x]['guid'];
} 
```

并将内容分配给变量。

除了一个，他们都在工作。为什么是这样？

有人请帮我解决这个问题:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-26T05:08:09.697

有一个类似的问题，我按照[fortytwo](https://stackoverflow.com/questions/13409692/get-contentencoded-from-rss-feed#comment25848237_13409692)提到的链接 找到[了这个答案](https://stackoverflow.com/a/17731547/1815624)，它没有像显示的那样工作（将提交对该答案的编辑），尽管通过一些小的编辑，我能够让它按需要工作. 这使它超级简单。

```
<?php
$xml=("https://en.blog.wordpress.com/feed/");

function getFeed($feed_url) {
        $feeds = file_get_contents($feed_url);
        $feeds = str_replace("<content:encoded>","<contentEncoded>",$feeds);
        $feeds = str_replace("</content:encoded>","</contentEncoded>",$feeds);
        $rss = simplexml_load_string($feeds);

    echo "<ul>";
    $x=$rss;
        foreach($x->channel->item as $entry) {
            echo "<li><a href='$entry->link' title='$entry->title'>" . $entry->title . "</a></li>";
            echo "<li>$entry->contentEncoded</li>";
        }
    echo "</ul>";
}

getFeed($xml); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-03T19:57:50.377

编码 PHP 如果你想从 feed rss 获取数据：

```
 <?php
        $invalidurl = false;
        if(@simplexml_load_file($url)){

           $feeds = file_get_contents($url);
        $feeds = str_replace("<content:encoded>","<contentEncoded>",$feeds);
        $feeds = str_replace("</content:encoded>","</contentEncoded>",$feeds);
        $feeds = simplexml_load_string($feeds);

          //  $feeds = simplexml_load_file($feeds);
        }else{
            $invalidurl = true;
            echo "<h2>Invalid RSS feed URL.</h2>";
        }

        $i=0;
        if(!empty($feeds)){

            $site = $feeds->channel->title;
            $sitelink = $feeds->channel->link;
            echo '<h1>'.$site.'</h1><div class="row">';
            foreach ($feeds->channel->item as $item) {

                $title = $item->title;
                $link = $item->link;
                $description = $item->description;
                $postDate = $item->pubDate;
                $content = $item->contentEncoded;
                $pubDate = date('D, d M Y',strtotime($postDate));

                if($i>=20) break;      

 ?>         
           <div class="col-12 p-3 GeetMark-col">
                  <div class="p-1">
                    <div class="row">
                      <div class="col-sm-5 col-md-4">
                        <div class="position-relative h-sm-100"><a class="d-block h-100" href="<?= $link ?>"><img class="img-fluid fit-cover w-sm-100 h-sm-100 rounded absolute-sm-centered" src="<?= $meta_img ?>" alt="<?= $title ?>" /></a></div>
                      </div>
                      <div class="col-sm-7 col-md-8 GeetMark-col-sm">
                        <div class="">

                            <h5 class="mt-3 mt-sm-0"><a class="text-dark fs-0 fs-lg-1" href="<?= $link ?>"><?= $title ?></a></h5>
                            <span class="notification-time"><span class="mr-1" role="img" aria-label="Emoji"></span><?= $pubDate ?> </span>
                            <p class="fs--1 mb-2 mb-md-3"> <?= $description ?> </p>
                            <hr>
                            <p class="fs--1 mb-2 mb-md-3"> <?= $content ?> </p>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>      
   <?php
                $i++;
            }
            echo "</div>";
        }else{
            if(!$invalidurl){
                echo "<h2>No item found</h2>";
            }
        }
      ?> 
```

见[例子](https://web.geetmark.com/api/news/rss/?u=http://feeds.bbci.co.uk/news/technology/rss.xml)

# c++ - 我如何确定身体是否停止（睡眠）

> ID：13409701
> 
> 赞同：0
> 
> 时间：2012-11-16T02:57:03.597
> 
> 标签：c++, box2d

有一个移动的 BOX2D 身体，我如何确定身体是否停止（睡觉）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:01:38.040

头文件中的所有函数都有文档：

```
 /// Get the sleeping state of this body.
 /// @return true if the body is sleeping.
     bool IsAwake() const; 
```

用法：

```
body->IsAwake(); 
```

来源：[http ://code.google.com/p/box2d/source/browse/trunk/Box2D/Box2D/Dynamics/b2Body.h](http://code.google.com/p/box2d/source/browse/trunk/Box2D/Box2D/Dynamics/b2Body.h)

# python - python脚本中的网络不可用

> ID：13409703
> 
> 赞同：1
> 
> 时间：2012-11-16T02:57:12.853
> 
> 标签：python, url, ip, urllib2

我试图从 python 访问维基百科页面

```
a = urllib2.urlopen("http://en.wikipedia.org/wiki/LALR_parser") 
```

这导致了一个错误

```
<urlopen error [Errno 101] Network is unreachable> 
```

所以我尝试了

```
req = urllib2.Request(url, headers={'User-Agent' : "MyBrowser"})
a = urllib2.urlopen(req) 
```

我仍然得到同样的错误

**现在我无法在 chrome 或 firefox 中查看维基百科**..它说“chrome 找不到该页面”

但是如果我在匿名代理中输入维基百科 url，页面显示没有任何问题

你认为是什么问题？我的IP被封锁了吗？我检查了防火墙（在 ubuntu lucid 中）

```
sudo ufw status

Status: inactive 
```

我也试过

```
sudo iptables -L -n
Chain INPUT (policy ACCEPT)
target     prot opt source               destination         

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:32:22.470

维基百科是否有可能阻止它？运行您提供的代码会引发异常：

`urllib2.HTTPError: HTTP Error 403: Forbidden`

似乎维基百科可能会阻止（简单）编程访问以促使人们使用他们的 API。

有关此问题的更多讨论，请参阅[使用 Python 获取 Wikipedia 文章。](https://stackoverflow.com/questions/120061/fetch-a-wikipedia-article-with-python)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T03:32:59.500

你在使用代理吗？如果您使用的是代理，请尝试在代码中添加以下行：

```
import urllib2
proxy = urllib2.ProxyHandler({'http': 'user:password@your_proxy_server:proxy_port'})
opener = urllib2.build_opener(proxy)
urllib2.install_opener(opener)
urllib2.urlopen('http://www.python.org/') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T04:06:54.253

因为您的标题不正确，请使用此尝试：

```
import  urllib2
headers = {'User-Agent':'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1'}
req = urllib2.Request("http://en.wikipedia.org/wiki/LALR_parser", headers=headers)
a = urllib2.urlopen(req)
print a.read() 
```

希望你好运！

# javascript - 通过 vanilla Javascript 更改元素的样式

> ID：13409713
> 
> 赞同：4
> 
> 时间：2012-11-16T02:58:18.850
> 
> 标签：javascript, jquery, css

```
<a href="" style="right:0px">right</a> 
```

我想把它改成

```
<a href="" style="left:0px">right</a> 
```

在 jQuery 我可以做到这一点

```
$('a').attr('style','left:0px'); 
```

但是如何在不使用 jquery 的情况下在传统的 javascript 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T03:03:56.923

```
var elements = document.getElementsByTagName('a'),
    l = elements.length;

while ( l-- ) elements[l].style.left = '0px'; 
```

这是小提琴：http: [//jsfiddle.net/236pk/](http://jsfiddle.net/236pk/)

* * *

如果您使用的是现代浏览器，则可以使用以下衬里：

```
document.querySelectorAll('a').forEach(e => e.style.left = '0px'); 
```

这是小提琴：http: [//jsfiddle.net/236pk/24](http://jsfiddle.net/236pk/24)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T03:20:35.783

JavaScript 答案已经存在，但是您将其标记为 jQuery，同时提到您不想使用 jQuery。也许你只是没有意识到 JavaScript 与 jQuery 一起玩是多么容易，它几乎可以在你使用 JavaScript 的任何地方使用，并且有 0 个不良副作用。所以下面是用 jQuery 来做这件事是多么容易，而且代码更少。

```
$("a").css({ left: "0px", right: "" }) 
```

# [jsFiddle](http://jsfiddle.net/SpYk3/mWjbh/)

我知道您展示了一个 jQuery 示例，但它并不完全正确，因此我猜您认为在 JavaScript 中它会更容易，因为您无法弄清楚 jQuery 正确的方式。只需在样式中包含 right 并将其值设置为空字符串，这将正确设置您的样式。

还有一点，虽然选择的答案显示了一种简单的方法，但它并不能解释你的问题。即a标签已经有了`style="right:0px;"`。如果你想让这一切都正确，请使用他的公式，但添加一行：

```
var elements = document.getElementsByTagName('a'),
    l = elements.length;

while ( l-- ) {
    elements[l].style.left = '0px';
    elements[l].style.right= ''; // here in lies the added line, it removes the previously set "right"
} 
```

# sql - T SQL - CASE 或 IF

> ID：13409715
> 
> 赞同：1
> 
> 时间：2012-11-16T02:58:32.133
> 
> 标签：sql, sql-server-2008, tsql

我有一个存储过程，我需要检查以查看：

```
 if @variable is null
 Then this
 Else that 
```

在这种情况下，使用 IF/ELSE 或 CASE 或其他东西会更好吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T03:01:05.713

**选项1：**

```
SELECT CASE WHEN @variable IS NULL THEN 'IT IS NULL' ELSE 'NOT NULL' END 
```

**选项 2：**

```
 SELECT COALESCE(@variable,'IT IS NULL') 
```

**选项 3：**

```
SELECT ISNULL(@variable,'IT IS NULL') 
```

所有都将带有 Select 语句

**选项 4：**

```
IF @variable IS NULL

BEGIN 
   PRINT 'IT IS NULL'
END

ELSE
  PRINT 'IT IS NOT NULL' 
```

希望图片清晰

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T03:04:10.277

如果*这个*和*那个*是 SQL 查询，我宁愿使用`IF`语句。

例子：

```
if @status=0
    select * from #t where id=2
else
    select * from #t where names='nameHere' 
```

但如果它们是值，请使用`CASE`：

```
SELECT (CASE WHEN @variable is null 
             THEN 'Nothing'
             ELSE 'Hello!'
        END) Status
FROM tableName 
```

# javascript - div 背景颜色来回变化，一次只有一个突出显示的 div

> ID：13409725
> 
> 赞同：0
> 
> 时间：2012-11-16T02:59:53.453
> 
> 标签：javascript, html

嗨，我有一个水平导航栏，当单击每个部分时，背景颜色会来回切换。但是我希望它只有一个部分是“活动的”。换句话说，一次只有一个部分可以有不同的背景颜色。

```
<ul class="nav">
    <li><a href="javascript:Tog('1')" onclick="changeColor(this)">Search</a></li>
    <li><a href="javascript:Tog('2')" onclick="changeColor(this)">Legend</a></li>
    <li><a href="javascript:Tog('3')" onclick="changeColor(this)">Info</a></li>
</ul>" 
```

Javascript

```
function changeColor(e) {
var c = e.className;
e.className = (c == 'color1') ? 'nav'  : 'color1'; 
} 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:17:08.977

通过使用纯 javascript：

```
 <ul class="nav">
        <li><a href="#1" id="link1"  onclick="changeColor(this)">Search</a></li>
        <li><a href="#2" id="link2" onclick="changeColor(this)">Legend</a></li>
        <li><a href="#3" id="link3" onclick="changeColor(this)">Info</a></li>
    </ul>

    <script type="text/javascript">
        function changeColor(e) {
            var arr =e.parentNode.parentNode.querySelectorAll('.color1');
            for(var i=0;i<arr.length;i++){
                arr[i].className = 'nav';
            }
            var c = e.className;    
            e.className = (c == 'color1') ? 'nav'  : 'color1'; 
            checkHashChange();
        }

        var currentPage = 0;
        function checkHashChange(){
            var newPage = window.location.href.substring(window.location.href.length -1 , window.location.href.length);
            if(currentPage != newPage) {
                currentPage = newPage;
                changeColor(document.getElementById('link'+currentPage));
            }
            setTimeout('checkHashChange();', 100);
        }
    </script>
    <style type="text/css">
        .color1{
        background: #444;
        }

        .nav{
        background: #eee;
        }
    </style> 
```

# java - Java 使用数组查找重复项（包含概念）

> ID：13409728
> 
> 赞同：0
> 
> 时间：2012-11-16T03:00:16.543
> 
> 标签：java, list, for-loop, contains

我正在尝试有关如何查找重复数组列表的问题之一。
该程序有效：

```
import java.util.*;

public class CheckDuplicates {
public static void main(String[]args){

    boolean containsDuplicate;
    int[] values = {1,2,3,4,5,6,7,8,9,1,3,4,5,10};

    List<Integer> myObj = new ArrayList<Integer>();
    Set<Integer> dupInt = new HashSet<Integer>();

    for(int id : values){
        System.out.println(myObj);
        if(myObj.contains(id)){    
            System.out.println("From contains "+id);
            containsDuplicate = true;
            dupInt.add(id);
        }else{
            System.out.println("not contains "+id);
            myObj.add(id);
        }
    }

    for(int dup : dupInt)
        System.out.println(dup); // prints the duplicates
}
} 
```

但是我对 for 循环部分有一个概念问题。如果

```
 List<Integer> myObj = new ArrayList<Integer>(); 
```

创建一个空的arraylist，那么这些行是如何工作的？

```
 for(int id : values){ if(myObj.contains(id)){ // Why is this true? 
```

虽然文档说包含

> boolean contains
> (Object o) 如果此列表包含指定元素，则返回 true。更正式地说，当且仅当此列表包含至少一个元素 e 满足 (o==null ? e==null : o.equals(e)) 时，才返回 true。
> 
> 指定者：接口 Collection 中的 contains
> 
> 参数：o - 要测试其在此列表中的存在的元素
> 
> 返回：如果此列表包含指定元素，则为 true

但我还是不明白这个概念！提前感谢您的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:02:57.940

你是对的，第一次检查 myObj.contains(id) 总是错误的，但请看你代码的另一部分：

```
else{
        System.out.println("not contains "+id);
        myObj.add(id);
    } 
```

随着循环的进行，您的列表将被填充 - 进一步的迭代可能会满足该条件。

# linux - 如何实现shell输入重定向

> ID：13409729
> 
> 赞同：4
> 
> 时间：2012-11-16T03:00:23.167
> 
> 标签：linux, shell, unix

如何编写一个从文件中收集内容并输入命令的shell？它看起来像： $ command < inputfile 我不知道如何开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:06:12.943

使用`wc`为例：

```
$ wc < input_file > output_file 
```

**说明**：

*   `wc`：这是您正在调用的命令（或 shell 内置）
*   `< input_file`: 读取输入`input_file`
*   `> output_file': write output into`输出文件`

请注意，许多命令将接受输入文件名作为其命令行参数之一（不使用`<`），例如：

*   `grep pattern file_name`
*   `awk '{print}' file_name`
*   `sed 's/hi/bye/g`文件名`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:53:58.310

您需要将 shell 程序的输入文件描述符指向输入文件。在 c 中，它是通过调用`int dup2(int oldfd, int newfd);`谁的工作使 newfd 成为 oldfd 的副本来实现的，如果需要，首先关闭 newfd。
在 Unix/Linux 中，每个进程都有自己的文件描述符，存储方式如下：

0 - 标准输入 (stdin) 1 - 标准输出 (stdout) 2 - 标准错误 (stderr)

因此，您应该将标准输入描述符指向您要使用的输入文件。这是我几个月前写的：

```
void ioredirection(int type,char *addr) {
    // output append redirection using ">>"
    if (type == 2) {
        re_file = open(addr, O_APPEND | O_RDWR, S_IREAD | S_IWRITE);
        type--;
    }
    // output redirection using ">"
    else if (type==1) re_file = open(addr, O_TRUNC | O_RDWR, S_IREAD | S_IWRITE);
    // input redirection using "<" or "<<"
    else re_file = open(addr, O_CREAT | O_RDWR, S_IREAD | S_IWRITE);
    old_stdio = dup(type);
    dup2(re_file, type);
    close(re_file);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:30:53.100

您可以使用命令从 bash 脚本中的输入读取`read`：

**输入阅读器.sh**

```
#!/bin/bash

while read line; do
    echo "$line"
done 
```

**输出**

```
$ echo "Test" | bash ./inputreader.sh
Test
$ echo "Line 1" >> ./file; echo "Line 2" >> ./file
$ cat ./file | bash ./inputreader.sh
Line 1
Line 2
$ bash ./inputreader.sh < ./file 
Line 1
Line 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T12:05:05.947

你可以使用`xargs`：

例如，您有一个文件，其中包含一些文件名列表。

```
cat your_file|xargs wc -l 
```

`wc -l`是您的命令 `cat`，`xargs`并将文件中的每一行作为输入传递给`wc -l`

所以输出将是输入文件中名称存在的所有文件的行数，这里主要是`xargs`将每一行作为输入传递给`wc -l`

# wordpress - previous_post_link 包含标题和“上一篇文章”？

> ID：13409730
> 
> 赞同：0
> 
> 时间：2012-11-16T03:00:27.070
> 
> 标签：wordpress

目前我已经设置了它，所以它是链接上方的一个跨度标签，上面写着“上一篇文章”和“下一篇文章”，问题是即使没有下一篇或上一篇文章，跨度标签仍然存在。

```
<div class="nextprev">
                    <div class="nex1">
                        <span>Previous Post</span>
                        <?php previous_post_link('<strong>%link</strong>'); ?>  
                    </div> <!-- end div nex1 -->

                    <div class="nex2">
                        <span>Next Post</span>
                        <?php next_post_link('<strong>%link</strong>'); ?> 

                    </div> <!-- end div nex1 -->
                </div> <!-- end div nextprev --> 
```

如何将 Previous Post 放在 php 中，以便它仅在有链接时出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:37:55.190

使用[previous_post_link](http://codex.wordpress.org/Function_Reference/previous_post_link)和[next_post_link](http://codex.wordpress.org/Template_Tags/next_post_link)时，您可以允许 WordPress 控制是否显示所选文本。

**像这样：**

```
previous_post_link( '%link', 'Previous Post' );
next_post_link( '%link', 'Next Post' ); 
```

您可以用您想要显示的任何内容替换**“上一篇文章”**和**“下一篇文章”文本。**此外，您现在可以删除`<span>`标签。:)

**编辑：**

如果您想显示帖子的标题和**以前的帖子**文本，请**尝试以下操作：**

```
previous_post_link( '<span>Previous Post</span>%link', '%title' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:26:58.080

这将打印上一个和/或下一个帖子的标题，如果上一个/下一个帖子不存在，则不打印标题或链接。随心所欲地设置跨度的样式。

```
<span class="nav-previous">

<?php previous_post_link( '<span class="meta-nav">Previous Post: ', 'twentyeleven' ); ?>
<?php $prev_post = get_previous_post(); if (!empty( $prev_post )): ?>
<a href="<?php echo get_permalink( $prev_post->ID ); ?>">
<?php echo $prev_post->post_title; ?></a></span>
<?php endif; ?>

<span class="nav-next">

<?php next_post_link( '<span class="meta-nav">Next Post: ', 'twentyeleven' ); ?>
<?php $next_post = get_next_post(); if (!empty( $next_post )): ?>
<a href="<?php echo get_permalink( $next_post->ID ); ?>">
<?php echo $next_post->post_title; ?></a></span>
<?php endif; ?> 
```

并查看[http://codex.wordpress.org/Function_Reference/next_post_link](http://codex.wordpress.org/Function_Reference/next_post_link)和[http://codex.wordpress.org/Function_Reference/previous_post_link](http://codex.wordpress.org/Function_Reference/previous_post_link)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-02T16:14:20.930

获取下一个或上一个 wp 帖子的 url 和标题的示例：

```
<?php 
$next_link = get_next_post();

//all You can use!
print_r($next_link);

?>
<!-- CUSTOM TITLE -->
<a href="<?php echo $next_link->post_name ?>">Custom Text - Next Post!</a>
<!-- DEFAULT TITLE -->
<a href="<?php echo $next_link->post_name ?>"><?php echo $next_link->post_title ?></a> 
```

对于以前的帖子，请使用 get_previous_post()

# php - PHP 会话在子域上失败

> ID：13409732
> 
> 赞同：1
> 
> 时间：2012-11-16T03:00:43.213
> 
> 标签：php, html

因此，我设置了一个登录/会话系统，该系统在很长一段时间内都能完美运行。但是，在过去的几天内，会话无法传送到子域。

我一直在 session_start 调用上方使用以下内容：

```
session_set_cookie_params(0, '/', '.domain.com'); 
```

同样，这工作得很好。您可以在基本域登录，然后移动到子域并继续会话。或者你可以在一个子域登录并转移到其他人。例子：

*   在 domain.com 登录有效
*   移至 subdomain.domain.com 不
*   移至 domain.com/subdomain 作品

此脚本完全没有任何更改。它只是失败了。也许是主人负责？

**编辑：** 即使您在子域上登录，PHP 会话也会创建但不起作用。没有 $_SESSION 数组数据有效，等等，尽管您可以在浏览器的 cookie 中看到 PHP 会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:25:28.403

解决它。似乎我在 PHP.ini 中的 session.save_path 设置为 /tmp ，无论出于何种原因，它都不允许我的子域工作或访问会话文件。

我将 PHP.ini 更改为 html 层次结构中的一个新文件夹，并且它起作用了。

仍在使用 session_set_cookie_params(0, '/', '.domain.com'); 以及我之前的所有设置。所以我的代码很好，不知何故保存路径停止工作。很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:08:08.327

尝试使用**ini_set()**函数，例如：

```
ini_set('session.cookie_domain',
substr($_SERVER['SERVER_NAME'], strpos($_SERVER['SERVER_NAME'],"."),100) ); 
```

或尝试使用**.htaccess**

```
php_value session.cookie_domain .domain.com 
```

或尝试将安全参数设置为 false ，例如

```
session_set_cookie_params(0, '/', '.domain.com', false, false); 
```

# node.js - 如何在 Node.js Express 中真正将访问日志与错误日志分开？

> ID：13409733
> 
> 赞同：1
> 
> 时间：2012-11-16T03:00:39.630
> 
> 标签：node.js, express

我见过这个问题： [Logging in express js to a output file?](https://stackoverflow.com/questions/5489815/logging-in-express-js-to-a-output-file)

但是在阅读了关于`logger`中间件的文档之后，仍然不确定如何真正将访问日志与错误日志分开，以便访问日志仅包含 url 访问数据，而错误日志仅包含错误。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T06:16:34.340

内置的连接记录器专用于一个目的：记录有关传入 HTTP 请求的基本详细信息。您可以使用配置参数控制日志消息的确切格式，但从根本上说，中间件是用于记录请求的，例如 access.log。要记录错误并将它们转到单独的文件中，您需要编写一个带有 . 签名的错误处理中间件`(error, req, res, next)`。您可以将其连接起来`app.use`并将您的错误写入文件或`stderr`按您的意愿写入。要从您的正常路由或中间件触发它，只需将一个`Error`实例传递给`next(error)`回调。

# node.js - 当我在 node.js 中使用 vows 时出现奇怪的错误

> ID：13409734
> 
> 赞同：0
> 
> 时间：2012-11-16T03:00:49.380
> 
> 标签：node.js, testing, express, bdd, vows

我正在尝试使用誓言使用 BDD 启动我的 node.js 项目。然后我得到了这个奇怪的错误。

我试图用誓言为快递写一个小路线测试，这是我的原始代码，

```
node_server.prototype.mainpage = function(callback) {
  http.get({host:'localhost', port:this.port, path:'/', agent:false}, function(res){
  callback(res.statusCode);
  });
} 
```

这就是我写我的誓言测试的方式

```
vows.describe('Request to the server').addBatch({
'Should get http 200': {
      topic: function () {
        app_server.mainpage(this.callback)
      },

      'we get 200': function (statusCode) {
        app_server.close_server();
        assert.equal(statusCode, 200);
      }
  },
}).run(); // Run it 
```

即使 statusCode 是正确的，Vows 总是会报告意外错误，像这样

```
» An unexpected error was caught: 200 
```

所以我像这样改变我的主页功能

```
node_server.prototype.mainpage = function(callback) {
  http.get({host:'localhost', port:this.port, path:'/', agent:false}, function(res){
      callback("error", res.statusCode); // Here I added a err message in front of the status code.
  });
} 
```

而且我还将我的测试套件更改为

```
'we get 200': function (err, statusCode) { 
```

然后这个测试成功了！我只是想知道这种奇怪的情况怎么会发生。我已经阅读了誓言的文档，但我没有找到他们说我必须将 2 个参数放入 cb 而不是 1 的任何地方。

给我一些线索！先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T02:53:15.247

Vows 文档没有提及它，但它假设错误优先回调模式，该模式已被 Node.js 社区广泛采用。在这种模式中，回调的第一个参数始终是错误的。如果它为 null 或未定义，那么您就知道异步操作成功了。我建议您也将这种模式用于您自己的所有代码，即使该函数永远不会产生错误参数。

如果您自己使用此模式，您可以更轻松地使用其他库，例如[async](https://github.com/caolan/async)，这可以让复杂的应用程序变得更容易。

# iphone - 调用 SubViewController 问题

> ID：13409736
> 
> 赞同：0
> 
> 时间：2012-11-16T03:00:57.717
> 
> 标签：iphone, objective-c, ios, xcode, ipad

在 iOS 应用程序中，当按下某个链接时，我正在从当前的 RootViewController 调用视图，例如：

```
SubViewController *view = [[SubViewController alloc] initWithItem:itemID];
[[self navigationController] pushViewController: view animated: YES]; 
```

但是由于某种原因，视图没有被调用，而是我在导航栏顶部获得了动画效果，但视图本身保持不变。

可能是什么问题呢？我应该改变什么才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:24:54.553

我认为您的代码出错了。您没有加载视图

```
SubViewController *view=[[SubViewController alloc]initWithNibName:@"YourNibName" bundle:nil];
    [self.navigationController pushViewController:view animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:13:10.607

如果您有该视图控制器的 nib 文件，则需要使用此代码。

```
YourViewController *obj = [[YourViewController alloc]initWithNibName:@"YourViewController" bundle:nil];
    [self.navigationController pushViewController:obj animated:YES]; 
```

或者，如果您没有 nib 文件，则只需使用此代码

```
YourViewController *obj = [[YourViewController alloc]ini];
[self.navigationController pushViewController:obj animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T03:12:01.660

问题出在新的 x-code 4.5 中，我所要做的就是取消选中视图布局中界面生成器中的“使用自动布局”选项。

# masm - 使用 MASM 单步执行堆栈

> ID：13409737
> 
> 赞同：2
> 
> 时间：2012-11-16T03:01:02.273
> 
> 标签：masm

我正在尝试编写一个简单的汇编应用程序，它从用户那里读取字符，然后检查输入的字符串是否可以被视为整数。

```
mov       ebx,esp
input:
get_ch    eax
cmp       eax,0dh
je        continue
push      eax
jmp       input

continue:
put_str    0ah

xor       edx,edx
output: 
```

这就是我迷路的地方...

```
put_ch    dword ptr [ebx-4][edx]
dec       edx
jmp       output 
```

...使用 [ebx-4] 和 edx = 0，我可以输出第一个字符。之后，它似乎正在输出空格或空字符。

任何帮助或参考链接将不胜感激，我很难找到可以查找 MASM 的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T19:43:18.753

1) 我不熟悉 put_ch 或 get_ch，但我认为 put_ch dword ptr [ebx-4][edx] 在 EBX 和 EDX 调用之间需要一个“，”。

2) 每次迭代都将 EDX 更改为 -1，但指针 (EBX) 始终位于 ebx-4。如果我错了，请纠正我，但你不应该改变EBX吗？我不认为 -4 在每次迭代运行中实际上都会从 EBX 中减去。

3）我认为如果你从 0 中减去，就像你在 EBX 中所做的那样，在汇编中你只设置溢出标志（OF），或者至少设置 SF（符号标志）。检查您正在使用的 ASM 实现的标志，并查看哪些命令设置了哪些标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T22:01:47.053

在我看来，您不必要地从输出循环的有效地址中减去 4。也许您认为括号用于乘法。不是这种情况; IA-32 不支持这种类型的寻址。在您的代码中，您将...

```
put_ch    dword ptr [ebx-4][edx]
dec       edx
jmp       output 
```

在循环的第一次迭代的第一条指令中，作为 *put_ch* 宏的有效地址，相对于堆栈帧 (EBX) 的顶部为 -4。这个数字，代表堆栈上的地址，将被传递给宏以成功打印 ASCII 代码。但是，由于*dec edx*指令，第二次迭代将失败，因为程序将调用 *put_ch* 并使用参数 -5。由于这个地址的双字几乎毫无疑问会包含 0，*put_ch* 会将它注册为 NULL 字符，表示字符串的结束。尝试这个：

```
dec       edx
put_ch    dword ptr [ebx][edx*4]
jmp       output 
```

在这里，EDX 首先递减*，*并在宏中用作要乘以四的索引。因此，传递给 *put_ch* 的第一个地址将是 -4。传递的第二个地址是-8。第三个是-12，依此类推...

最后，我*强烈*建议，在比较 get_ch 的返回值和 0dh（回车）时，请使用 AL（1 字节）而不是 EAX（4 字节），以防 EAX 的高 3 字节包含任意数据。

祝你好运。

# google-maps - 限制谷歌地图 V3 方向服务留在国家

> ID：13409740
> 
> 赞同：5
> 
> 时间：2012-11-16T03:01:23.310
> 
> 标签：google-maps, google-maps-api-3

我正在创建一个谷歌地图，该地图绘制了加拿大各地的电动汽车 (EV) 充电站，并且仅在加拿大。地图的目的是让用户绘制他们在加拿大境内的路线，并查看沿途有哪些电动汽车站。然而，当搜索温哥华 -> 多伦多时，该路线经过美国。如何确保路线停留在加拿大境内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T23:14:44.257

在任何类型的地理编码情况下，如果您有首选路线、已知位置等，通常以某种方式存储首选数据是一个更好的主意。然后，每当对特定路线、位置等进行查询时，您都会使用该数据而不是地理编码服务。

这通常会加快速度，为您提供更大的控制权，并保护您免受路线或位置在您不知情的情况下发生变化。地理编码不是一门固定或精确的科学，如果您查询远程服务，则无法保证今天有效的输入明天也有效。

因此，如果您的路线偏离*了您所知道的正确*路线，请修复并存储它们。当对该路线进行查询时，而不是对路线进行地理编码，只需返回路线即可。

应该很容易获得加拿大主要路线的某种交通数据。除了电动汽车站的位置数据，您甚至可以在进行任何用户地理编码查询之前预先计算、设计和优化最受欢迎的路线。

# php - 的价值 是数组

> ID：13409749
> 
> 赞同：1
> 
> 时间：2012-11-16T03:02:45.303
> 
> 标签：php

我只是在想如果这可能的话

这是......的代码

```
 <?php
    $temp1 = 'anyvalue1';
    $temp2 = 'anyvalue2';
    ?>
<form action='next.php' method='post'>
    <select name='dropdown'>
    <option value='any'>item1</option>
    <option value='anyone'>item2</option>
    <option value='<? $dual = array("$temp1","temp2"); ?>'>item3</option>
    </select>
<input type='submit'>
</form> 
```

正如您在顶部看到的那样`item3`，代码行是否可行？然后我在这个 sql 代码中使用它（这个 sql 代码只在上面的代码下面）

```
$keyword = $_POST['dropdown'];
$res = mysql_query("select * from teybol where field1='$keyword[0]' and field2='keyword[1]'"); 
```

然后稍后通过结果生成记录`$res`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:07:00.577

当被 Javascript 或 PHP 解释时，HTML`option`的值总是字符串。但是，您可以将其格式化为以后可以将其转换为数组：

```
<option value='["$temp1","$temp2"]'>item3</option> 
```

或者

```
<option value='{"$temp1","$temp2"}'>item3</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:10:59.317

不，那是不可能的。您必须找到“双重”选项的字符串表示形式：

```
<option value='<?php echo htmlspecialchars("$temp1-$temp2") ?>'>item 3</option> 
```

*这假设破折号不存在于任何一个`$temp1`或`$temp2`*

然后当你查询时：

```
$keywords = array_map('mysql_real_escape_string', explode('-', $_POST['dropdown']));
$sql = "select * from teybol where field1='$keywords[0]'";
if (count($keywords) > 1) {
    $sql .= " and field2='keywords[1]'";
}
// use $sql to perform the query 
```

您还可以使用 JSON 格式 - 使用`json_encode()`和`json_decode()`- 来表示字符串；`-`它在不能可靠使用分隔符的情况下有所帮助。

**注意**您应该转义您在 SQL 中使用的变量；我在这里通过`array_map()`应用于`mysql_real_escape_string`每个关键字来做到这一点。

**注意 2**您应该移至 PDO 或 mysqli 并改用准备好的语句。

# xml - 如何在 Go 中使用 XPath 从 XML 中获取值

> ID：13409751
> 
> 赞同：26
> 
> 时间：2012-11-16T03:02:49.510
> 
> 标签：xml, xpath, go

查看[go xml 包](http://golang.org/pkg/encoding/xml)我找不到这种可能性。 [Go](http://golang.org)只允许定义结构树，将它们映射到 XML 树并使用`xml.NewDecoder(myXmlString).Decode(myStruct)`.

即使我定义了所需的 Go 结构树，我仍然无法使用 XPath 查询该树。

C# 具有方便的函数[SelectSingleNode](http://msdn.microsoft.com/en-us/library/aa335970%28v=vs.71%29.aspx)，它允许通过指定 XPath 从 XML 树中选择值，而无需在 C# 类中复制整个树结构。

Go 中是否有类似的可能性？如果不是，那么实现它的最简单方法是什么（可能重用 xml 包）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-01T13:26:58.873

还有[xmlpath](http://godoc.org/launchpad.net/xmlpath)包。

示例用法：

```
path := xmlpath.MustCompile("/library/book/isbn")
root, err := xmlpath.Parse(file)
if err != nil {
    log.Fatal(err)
}
if value, ok := path.String(root); ok {
    fmt.Println("Found:", value)
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-16T07:14:12.243

Go 的标准包中没有 xpath 解析，因此您需要使用 3rd 方包。

然后我知道的一个是[Gokogiri](https://github.com/moovweb/gokogiri)
包是基于*libxml2*使用*cgo*

您要导入的子包是`github.com/moovweb/gokogiri/xpath`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-04-08T23:06:26.177

即使不是 xpath，您也可以使用本机[go xml 编码器](https://golang.org/pkg/encoding/xml/)包从 XML 中读取值。您将使用 xml.Unmarshal() 函数。[这](http://play.golang.org/p/O4_y4AMYJR)是一个围棋示例。

```
package main

import "fmt"
import "encoding/xml"

func main() {
    type People struct {
        Names []string `xml:"Person>FullName"`
    }

    data := `
        <People>
            <Person>
                <FullName>Jerome Anthony</FullName>
            </Person>
            <Person>
                <FullName>Christina</FullName>
            </Person>
        </People>
    `

    v := People{Names: []string{}}
    err := xml.Unmarshal([]byte(data), &v)
    if err != nil {
        fmt.Printf("error: %v", err)
        return
    }
    fmt.Printf("Names of people: %q", v)
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-10-24T02:50:08.663

[xmlquery](https://github.com/antchfx/xmlquery)允许您使用 XPath 表达式从 XML 文档中提取数据。

```
package main

import (
    "fmt"
    "strings"
    "github.com/antchfx/xmlquery"
)

func main() {
    htmlstr := `<?xml version="1.0" ?>
    <html>
    <head>
     <title>this is a title</title>
    </head>
    <body>Hello,World</body>
    </html>`
    root, err := xmlquery.Parse(strings.NewReader(htmlstr))
    if err != nil {
         panic(err)
     }
    title := xmlquery.FindOne(root, "//title")
    fmt.Println(title.InnerText())
} 
```

# c - 变量的损失值 - C

> ID：13409755
> 
> 赞同：3
> 
> 时间：2012-11-16T03:03:16.450
> 
> 标签：c, ncurses

*   编译器：gcc 4.5.2
*   终端：Xterm
*   操作系统：Linux（x86）
*   Ncurses 5.9

我正在编写一个文本编辑器，它使用 ncurses 以图形方式表示一个数组`key_strokes[]`。它是一维的，所以我使用宏`INDEX(y*maxx+x)`指向`key_strokes`( `key_strokes[INDEX]`) 中的当前位置。`y`是函数返回的终端中`x`的当前坐标，是函数`getyx(stdscr, y, x)`返回`maxx`的每一行中的最大列数`getmaxyx(stdscr, maxy, maxx)`。该程序运行良好，直到我按下退格键，由于某种原因，`maxx`在它到达下面的开关后，它的值被设置为零。这当然`INDEX`不会将其限制为仅数组的第一“行”。

用户的击键被捕获为`int key_strokes`。我使用 switch case 来检查它是否是箭头键、退格键、F12 等`INDEX`，并`maxx`定义为，

```
#define INDEX (y*maxx+x)
unsigned int maxx = 0; 
```

注意我也在使用`cbreak(); noecho(); keypad(stdscr, TRUE);`.

```
case KEY_BACKSPACE:
if (INDEX >= 0)
{
   for(i = INDEX; key_strokes[i] != '\0'; i++) {
   key_strokes[i] = key_strokes[i+1];
   }

   if (total_count > 0) {
   total_count--;
   }

   delch();
   if (x == 0) {
   move(y-1, maxx-1);
   }
   else {
   move(y, x-1);
   } refresh();
}
break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T23:26:52.097

你*确定*那`key_strokes[]`是空终止的吗？

因为如果不是，`for`循环会将内存中的所有内容复制到前一个单元格，直到它达到 0。如果`maxx`or`maxy`正好在 0 值之前，它们将被设置为 0。

想象一下以下布局：

```
| key_strokes[0] | key_strokes[...] |   key_strokes[n] | maxy | maxx | some_other_var |
|            'v' |              'i' | non-null garbage |   23 |   80 |           '\0' | 
```

在“i”之后按退格后，它将是：

```
| key_strokes[0] | key_strokes[...] |   key_strokes[n] | maxy | maxx | some_other_var |
|            'v' | non-null garbage |               23 |   80 | '\0' |           '\0' | 
```

这也可以解释为什么它在声明为 const`maxy`时设置为 0 `maxx`（GCC 不会将`const`s 存储在内存中的同一位置）。

为确保它`key_strokes[]`是空终止的，我建议您将其添加到您的 init 部分：

```
memset(key_strokes, 0, sizeof(char) * size_of_key_strokes_array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T23:25:05.297

我看不到 x 和 y 的类型（即有符号或无符号），但您计算（y 乘以无符号整数并加上 x）似乎很有趣。这个表达式的类型可能是什么？可能这取决于 y 的类型。检查条件是否大于或等于零是否合理？（无符号值始终为零...）

# css - 我使用dreamweaver 创建精灵图像。它适用于设计/实时视图，但浏览器不显示图像

> ID：13409756
> 
> 赞同：0
> 
> 时间：2012-11-16T03:03:18.637
> 
> 标签：css

我经历并在dreamweaver中创建了精灵图像。在设计/实时视图中，一切看起来都不错。

但是当我在预览浏览器中查看它时，图像没有显示出来，但是当我将鼠标放在图像应该是的位置时，我实际上可以点击链接。

这是因为我没有指定图像的大小吗？我不明白 =( 请帮忙 :(D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:05:53.423

没有任何实际代码很难说，我建议右键单击浏览器窗口，然后选择“检查元素”，这将打开网络检查器，您通常可以在那里检查问题。让检查员成为你最好的朋友。

此外，如果我们拥有所有相关代码，那么为您提供帮助会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:24:42.433

我使用这个网站[http://csssprites.com/](http://csssprites.com/) 我会使用生成器，除非您已经手动制作了成功的精灵。

# jquery - 在添加 img src 中使用变量

> ID：13409757
> 
> 赞同：3
> 
> 时间：2012-11-16T03:03:19.457
> 
> 标签：jquery, variables, prepend

我有一个正在尝试添加的 img 源，但我正在尝试在源中使用变量“id”。我无法修改这段代码来做到这一点。

```
 $('#photo_850').prepend('<img src= id + ".jpg" />'); 
```

谢谢你帮我做这件事

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T03:05:53.467

您的串联已关闭：

```
$('#photo_850').prepend('<img src="'+id+'.jpg" />'); 
```

另一种可能更容易阅读的方法是：

```
$("<img>", { src: id + ".jpg" }).prependTo("#photo_850"); 
```

此方法首先在第一个参数中创建由字符串表示的元素。接下来，jQuery 继续将对象字面量的成员映射到新创建的 HTML 元素。您现在可能已经猜到我们新创建的`<img>`将具有 的`src`属性`foo.jpg`，假设变量`id`是 的字符串`"foo"`。

# ios - 预加载 CCAction？

> ID：13409759
> 
> 赞同：0
> 
> 时间：2012-11-16T03:03:47.163
> 
> 标签：ios, animation, cocos2d-iphone, lag, ccaction

我注意到在我的 Cocos2D 应用程序中，每当我第一次加载特定的 CCAction 时，都会有轻微的延迟（可能是 0.3 秒），但第二次不会出现这种情况。这是 CCShake 动作最明显的：http: [//www.cocos2d-iphone.org/forum/topic/20327](http://www.cocos2d-iphone.org/forum/topic/20327)

任何地方都没有泄漏，并且我预加载了资产，因此它与这两件事没有任何关系。无论如何，是否可以预加载 CCAction，以便我第一次调用它时没有延迟？如果没有，有什么解决方法可以实现与此类似的事情，以免出现任何滞后？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:39:41.543

也许你可以使用 CCAnimationCache [http://www.cocos2d-iphone.org/api-ref/2.0.0/interface_c_c_animation_cache.html](http://www.cocos2d-iphone.org/api-ref/2.0.0/interface_c_c_animation_cache.html)

# facebook - 有没有办法获取特定城市的所有 Facebook 活动？

> ID：13409763
> 
> 赞同：20
> 
> 时间：2012-11-16T03:04:16.717
> 
> 标签：facebook, facebook-graph-api, facebook-oauth

我可以获取特定城市的所有 Facebook 活动吗？我只需要事件 ID 即可。它应该是所有事件（公开），而不仅仅是某人的事件。Facebook 会让我们获取这些信息吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T19:53:33.233

Elmcity 对事件标题中的关键字进行简单搜索。以“兰开斯特”为例。您将在英国、宾夕法尼亚州、纽约州和加利福尼亚州举办活动。您还可以在标题中搜索不基于位置的单词，例如“picnic”，脚本会返回事件。

您可以尝试按位置查询事件。使用图形 API 在搜索查询中使用“Center”参数：

```
https://graph.facebook.com/search?q=*&type=event&center=37.76,-122.427&distance=1000 
```

[在 FB 资源管理器工具中运行查询](https://developers.facebook.com/tools/explorer/?method=GET&path=search%3Fq%3D*%26type%3Devent%26center%3D37.76%2C-122.427%26distance%3D1000&)。

无法通过 FQL 按位置查询事件。

最大距离为 50000，以米为单位。返回的记录数有限制，但您可以使用分页来检索更多事件。

在撰写本文时（2015 年 6 月），facebook 默默地忽略了该`center`参数。

* * *

来源来自这篇文章：[Source Post](https://stackoverflow.com/questions/11181480/how-can-i-query-public-facebook-events-by-location-city)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-02T19:51:07.327

虽然您*可以*使用 Facebook Graph API 搜索地点附近的地点或事件，但我发现这并不可靠。Facebook 没有向 API 公开标准类别，允许您对这些类别进行过滤，而且据我所知，无法有效搜索在某个区域附近举办活动的场所，并根据与您真正寻找的内容的相关性对它们进行排序.

实际上，这意味着您可以搜索某个点附近的场地。Facebook API 返回每个有开放麦克风之夜的咖啡馆，但不返回举办音乐会的舞台。

如果我要这样做，我会使用这个工作流程：

*   查询[Factual Places API](http://www.factual.com/data-apis/places)以查找您在感兴趣城市中搜索的目标场所。
*   通过[Factual Crosswalk API](http://www.factual.com/data-apis/places/crosswalk)将结果传递给这些地方的 Facebook ID，并将它们连接成一个数组。
*   使用该数组查询 Facebook Graph API 以获取这些位置的事件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-16T10:03:15.757

如果不指定可索引列，即实际事件 ID，则无法查询事件表。您可以使用搜索功能和事件类型查询，例如

[http://graph.facebook.com/search?q=Dublin&type=event](http://graph.facebook.com/search?q=Dublin&type=event)
[http://graph.facebook.com/search?q=London&type=event](http://graph.facebook.com/search?q=London&type=event)

获得这些结果后，您可以按时区和位置进一步过滤掉这些结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T18:58:09.220

[Facebook 搜索文档](http://developers.facebook.com/docs/reference/api/search/)暗示您可以根据位置搜索“对象”。例如，您应该能够`https://graph.facebook.com/search?type=location&place=45386717890&distance=1000`获取位于纽约市 1000（英里？公里？他们不会说）范围内的对象（包括事件）列表（对象 #45386717890）。但是，无论我在附近搜索什么，我都只会得到一个空白结果。

我猜这个功能坏了。

# domain-driven-design - 将服务交给实体是否正确？

> ID：13409766
> 
> 赞同：2
> 
> 时间：2012-11-16T03:04:30.353
> 
> 标签：domain-driven-design

我知道在实体中*注入*服务（通过构造函数或设置器）并让实体保留对它的引用通常被认为是一种不好的做法。

但是在调用方法时可以暂时将服务交给实体吗？

例如，假设我想对`name`实体的字段进行版本化，并且`VersionService`每次`setName()`调用时都创建一个新版本，我可以这样做：

```
public class Entity
{
    public void setName(String name, VersionService service)
    {
        this.name = name;
        service.addVersion(this, name);
    }
} 
```

我在这段代码中喜欢的是，如果`setName()`不提供 a 就无法调用该方法`VersionService`，从而强制执行所需的行为。通过模拟`VersionService`.

我在[Jimmy Bogard关于](https://stackoverflow.com/users/58508/jimmy-bogard)[双重调度模式](http://lostechies.com/jimmybogard/2010/03/30/strengthening-your-domain-the-double-dispatch-pattern/)的帖子中找到了这种方法的一个示例。

但是从关于 Stack 的一些讨论中，我认为普遍的共识是避免对域模型中的服务有任何依赖。

对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:40:13.550

> 但是从关于 Stack 的一些讨论中，我认为普遍的共识是避免对域模型中的服务有任何依赖。

就*域*服务而言，我很想知道反对在实体中使用它们的论点。领域服务是包含在通用语言中的第一类领域对象。在很多情况下，位于实体中的逻辑调用位于域服务中的逻辑是合理的，就像它调用另一个实体一样。

[本文](http://stochastyk.blogspot.fr/2008/05/domain-services-in-domain-driven-design.html)中的第3段就是一个很好的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:09:32.070

您通常使用域事件来生成新版本：

```
public class Entity
{
    public void setName(String name)
    {
        this.name = name;
        DomainEvent.Publish(new MyEntityGotRenamed(Id));
    }
}

public class YourService : ISubscribeOn<MyEntityGotRenamed>
{
     public void Handle(MyEntityGotRenamed domainEvent)
     {
         var entity = repos.Get(domainEvent.Id);
         AddVersion(entity);
     }
} 
```

您订阅事件的方式是特定于平台的。

请注意，这`setName`并不代表域操作。应该是`Rename`或您的客户已定义的其他内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T16:05:20.243

领域事件方法很好，但它依赖于使用消息驱动的架构。

无论如何，特别是对于您给出的示例，我不会将服务作为参数传递，因为 IMO 使用该服务更新其他模型不是实体关注的问题。实体（可能是聚合根）只关心它自己的模型。调用实体的代码也可以调用服务。

但是，我认为可以将服务作为参数传递以检索其他一些必要的数据（遗憾的是我现在想不出一个例子）。但是大多数情况下，您会将服务作为构造函数依赖项传递，也就是说，您需要该服务的不仅仅是操作，而且您不能将数据作为方法参数提供。

# c++ - FizzBu zz 灾难

> ID：13409769
> 
> 赞同：3
> 
> 时间：2012-11-16T03:04:35.110
> 
> 标签：c++, terminal, fizzbuzz

我想通过敲出一个快速的 fizzbuzz 应用程序来测试我的 C++ 技能。它的代码发布在下面。然而，当我运行这个应用程序时，发生了一些疯狂的事情。这是我的代码：

```
#include <iostream>
#include <string>
using namespace std;

bool ismultiple3(int i) {
  int res = i%3;
  if (res == 0)
    return true;
  return false;
}

bool ismultiple5(int i) {
  int res = i%5;
  if (res == 0)
    return true;
  return false;
}

int main() {
  string output;
  for (int i = 1; i <= 100; i++) {
    output = i;
    if (ismultiple5(i) || ismultiple3(i)) {
      output = "";
      if (ismultiple3(i)) output.append("Fizz");
      if (ismultiple5(i)) output.append("Buzz");
    }
    cout << output;
  }
} 
```

因此，当我运行并编译它时，我的整个终端都搞砸了。似乎字符编码正在以某种方式被改变。它仍然正常接受命令，只是看起来关闭。我跑了一个 ls 来证明这一点。 ![编译，运行，ls](../Images/65ca47f347a3f6f4eac04dfd0635a846.png) ![ls 命令的剩余部分](../Images/6b6c422bbf44537723c5ff75776494c6.png)

编辑：如果有人遇到这个问题，我最终添加了一个 else 语句并`cout << i`在其中执行，因为我的计算机的 g++ 编译器缺乏 C++11 支持。这些函数也被缩短并组合成一个接受 2 个参数的函数，`i`并且`n`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T03:30:10.923

正如其他评论者所说，`output = i`这是这里的问题。将值`i`从 a 强制转换`int`为 a ，当您运行该循环时`char`，该`output`字符串将带有一个序列[ASCII 字符。](http://www.theasciicode.com.ar/)例如，`97 == 'a'`、`144 == 'É'`等。

我会考虑重写主函数中的逻辑，以便`cout << ...`在 if-else 块中简单地进行三个调用。此外，为了简洁起见，这些`ismultipleN()`功能可以简单地替换`(i % 3 == 0)`为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T03:27:44.207

代替

```
 output = i; 
```

您应该使用[此答案](https://stackoverflow.com/questions/228005/alternative-to-itoa-for-converting-integer-to-string-c)中建议的方法之一。

例如：

```
std::string to_string(int x) {
    std::stringstream out;
    out << x;
    return out.str();
} 
```

# sas - SAS中的嵌套for...循环

> ID：13409772
> 
> 赞同：1
> 
> 时间：2012-11-16T03:05:02.543
> 
> 标签：sas

我是 SAS 的新手，并且在 sql 中有最新的代码，我已经被困了一段时间才能在 SAS 平台中转换它。我也尝试在 SAS 中使用 do..while 循环，但它没有用。

```
for c in (select * from risk.mv_closed_deals d) loop    
  for DatesToInsert in (select distinct(T1.ACTUAL_DATE) as ACTUAL_DATE from VINTAGE_MTD T1 where T1.Actual_Date>c.closed_date) loop
     insert into VINTAGE_MTD (dealdate, actual_date, deal_month, mob, dealno, balance, loanamount, overduedays, status, server)
     values (c.issue_date, DatesToInsert.Actual_Date, to_char(c.issue_date,'yyyy/mm'),
     (to_char(DatesToInsert.actual_date,'yyyy')-to_char(c.issue_date,'yyyy'))*12 + to_char(DatesToInsert.actual_date,'mm') - to_char(c.issue_date,'mm') - 1,
     c.dealno, 0, c.loanamount, 0, 0, 'B2');
  end loop; 
end loop; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:25:34.687

我会尝试这样的事情：

```
proc sql;

create table vintage_mdt_new as
select c.issue_date as dealdate
      ,DatesToInsert.Actual_Date as actual_date
      ,put(c.issue_date, yymms.) as deal_month
      ,intck('month', DatesToInsert.actual_date, c.issue_date) as mob
      ,c.dealno as dealno
      ,0 as balance
      ,c.loanamount as loanamount
      ,0 as overduedays
      ,0 as status
      ,'B2' as server
from (select * from risk.mv_closed_deals) as c
     ,(select distinct(T1.ACTUAL_DATE) as ACTUAL_DATE 
       from VINTAGE_MTD T1) as DatesToInsert
where DatesToInsert.Actual_Date > c.closed_date;

quit;

proc append base=VINTAGE_MTD data=vintage_mdt_new; 
```

没试过所以不知道能不能用。

# vim - VIM：跳转到标记后当前行的中心屏幕位置

> ID：13409774
> 
> 赞同：6
> 
> 时间：2012-11-16T03:05:20.910
> 
> 标签：vim

跳转到标记后，如何映射键以使屏幕位置居中？就像是：

```
:map M `<wait_key>zz 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T04:35:07.773

```
:map <expr> M printf('`%c zz',getchar()) 
```

# php - PHP 没有显示有意义的错误。派生类中具有相同名称但不同签名的函数

> ID：13409775
> 
> 赞同：4
> 
> 时间：2012-11-16T03:05:22.827
> 
> 标签：php, class

我已经在这里阅读了相关主题[Function with same name but different signature in derived class](https://stackoverflow.com/questions/411103/function-with-same-name-but-different-signature-in-derived-class)。

我认为问题是一样的，但就我而言，它发生在 PHP 5.4 中（在 PHP 5.3 中工作正常）。具体配置是wamp 2.2，PHP 5.4.3。我在日志中看不到任何错误，Chrome 浏览器显示以下内容：“错误 101 (net::ERR_CONNECTION_RESET)：连接已重置。”

如果我在下面的示例中更改函数“init”的名称，一切正常。所以我知道该怎么做，但我想确保这通常是一种不好的做法，原因与相关问题中解释的原因相同。如果 PHP 显示错误会很有帮助，我不知道内部发生了什么。

有什么想法吗？

谢谢

```
class MyClass1 {

    private function init(){

    }
}

class MyClass2 extends MyClass1 {

    private function init($params) {

    }
}

$myinstance = new MyClass2(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:52:15.233

我刚刚查找了[PHP 更改日志](http://www.php.net/ChangeLog-5.php)，发现了一些可能相关的内容。

5.4.4 版本说明中的一项内容如下：

> 修复了错误 #61761（“覆盖”具有不同签名的私有静态方法会导致崩溃）

这听起来*很像*您所看到的，特别是因为您指定您使用的是 PHP 5.4.3。

根据我之前的评论，因此我建议升级到更新的 5.4 版本（最好是最新的——目前是 5.4.8）。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:38:06.783

根据您在 Chrome 中遇到的错误，我猜 PHP 正在崩溃（因此没有有意义的错误）。我会首先禁用一些扩展，也许检查你的事件查看器是否有任何崩溃信息。

# regex - 正则表达式未从我的网站捕获文本

> ID：13409779
> 
> 赞同：4
> 
> 时间：2012-11-16T03:05:42.543
> 
> 标签：regex, perl

Perl 初学者有一个关于正则表达式的问题。

下面的代码成功地从我的网站获取网页内容。然后，我检查与模式“搜索类型：[Dir or Geo]”的匹配。我刚刚写的那一点不是实际的正则表达式代码，而是显示我想要匹配的文本。

这是 get 方法实际捕​​获的内容的摘录（抱歉，还没有足够的声誉点来发布图像）：

```
 what: movers<br/>
        where: toronto<br/>

            search type:
             Dir <br/> 
```

在“搜索类型：”和“目录”之间有制表符和空格以及您在 Word 文档中看到的那个段落字符（就在“类型：”一词之后。

下面是我的代码。

```
use strict;
use warnings;
use WWW::Mechanize;
my $searchtype = "nothing yet";
my $mech = WWW::Mechanize->new();
my $webpage;
$mech->credentials('user','password' );
foreach my $keyword qw(movers) {
    print "\$keyword = $keyword\n";
    my $url = "http://myurl";
    $mech->get($url);
    $webpage = $mech->content();
    if ($webpage =~ /search type.+([A-Z][a-z][a-z])/) {
        $searchtype = $1;
        print "$searchtype\n";
    }
} 
```

那么，为什么我的正则表达式 $webpage =~ /search type.+([AZ][az][az])/ 不能捕获匹配变量 $1 中的“Dir”？

使我抓狂。

路易

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T03:11:05.430

`/./`匹配除换行符以外的任何字符，除非您使用`/./s`. 由于要匹配换行符，因此必须添加`/s`.

```
/search type.+([A-Z][a-z][a-z])/s 
```

但这会找到文档的最后三个字母。你其实想要

```
/search type:\s+([A-Z][a-z][a-z])/ 
```

# php - 传递 URL 特殊字符的问题 - ClickCounter php 脚本

> ID：13409781
> 
> 赞同：0
> 
> 时间：2012-11-16T03:05:49.113
> 
> 标签：php, mysql

**脚本的目标**：获取正在传递的 URL 和 AdID 并在数据库中对其进行计数，然后将用户传递给传递的 url

**它是如何工作**的：一旦将链接传递给脚本，它就会采用 AdID 并将点击记录在数据库行 +1 中，然后将它们重定向到链接。数据库布局：

*   表：广告
*   行：点击

传递链接的示例：http: [//yourdomain.com/clickcounter.php ?AdID=43&RedirectURL=http://stackoverflow.com](http://yourdomain.com/clickcounter.php?AdID=43&RedirectURL=http://stackoverflow.com)

**ISSUE**：它没有传递任何包含特殊字符的 url。像 ？或者 ＆

*   明显的问题：仍在使用 mysql_query。我还没有完全学会新的mysqli方式

故障链接示例： [https ://www.demoexample.com/index.aspx?d=111&prog_id=tttt](https://www.demoexample.com/index.aspx?d=111&prog_id=tttt)

**对其他人的好处**：其他人可以使用这个脚本来做我正在做的事情。计算链接/广告/任何网址被点击的次数，以衡量链接/广告的使用/点击次数。

```
<?php
require('config.php');

    // Update Ad Pull/Display count
    $AdID= mysql_real_escape_string($_GET['AdID']);
    $UpdateADHitDisplay = mysql_query("UPDATE ads SET clicks = clicks +1 WHERE ID = '$AdID'");

    // Get Redirection Inforamtion
    $RedirectURL = mysql_real_escape_string($_GET['RedirectURL']);
    header("Location: $RedirectURL");

?> 
```

我不明白如何使用 urlencode 完成此操作，这是我尝试过的。

```
// Get Redirection Inforamtion
$RedirectURL = $_GET['RedirectURL'];
//$FixedURL = urlencode($RedirectURL); // didn't work
    function url_encode($RedirectURL){ // then i tried to create a function. it pases the first part of the url, but nothing past the first ? or special char
 return urlencode(utf8_encode($RedirectURL)); 
```

} header("位置：$RedirectURL");

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:17:26.213

链接中参数RedirectURL的值必须是[urlencoded](http://php.net/manual/ru/function.urlencode.php)，不需要`mysql_real_escape_string()`for`$RedirectURL`变量

# html - 为什么 显示在容器外？

> ID：13409788
> 
> 赞同：2
> 
> 时间：2012-11-16T03:07:12.963
> 
> 标签：html, css, html-lists, overflow

我的标签云目前出现故障，例如：标签“Arfen Plus”和“Children's Coltalin”未正确呈现。

如何确保#dvTagCloudContent 中的内容不会流出容器？如何让标签像普通段落一样显示？谢谢。

**现在的样子**：

![结果](../Images/5ef4220482db4750ea9bcf456dab7a33.png)

**HTML**：

```
<div id="dvTagCloudContent">
<ul id="ulTagCloud">                     
    <li class="TagCloudSmall"><a href="/drug/info/1">Arfen Plus</a></li>                                        
    <li class="TagCloudMedium"><a href="/drug/info/2">Biogesic</a></li>                                      
    <li class="TagCloudLarge"><a href="/drug/info/3">>Botox</a></li>                                             
    <li class="TagCloudLarge"><a href="/drug/info/4">>Brumed</a></li>                                            
    <li class="TagCloudMedium"><a href="/drug/info/5">>Children's Coltalin</a></li>                                      
    <li class="TagCloudMedium"><a href="/drug/info/6">Coldcap-A/Coldtab-2</a></li>                      
</ul>
</div> 
```

**CSS**：

```
#dvTagCloudContent {
    border: 1px solid #ccc;
    padding: 8px;
    min-height: 200px;
    width: 290px;
    line-height: 200%;
}
#ulTagCloud{
    display:inline-block;
    list-style: none;
    padding: 0px 10px 0px 0px;
    font-size: 1.1em;
    line-height: 1.4;
}
#ulTagCloud li { display: inline;}  
.TagCloudSmall    { font-size: small;margin-right: 5px; color: #ccc !important;}
.TagCloudMedium  { font-size: medium;margin-right: 5px; }
.TagCloudLarge  { font-size: large;margin-right: 5px;font-weight: bold;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:14:25.880

问题是`display: inline`#ulTagCloud li 下的属性。删除它并替换它，`block`这样每个项目都会占据一条线。ul 应该有一个`display: inline-block`使其适合内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:49:32.827

嗨，尝试了一段时间后，我找到了2个解决方案：

Soln #1：更改 HTML 以使用 [p] 标签：（它有效，内容将换行，不再溢出。）

```
 <div id="dvTagCloudContent">
        <p id="pTagCloud">                     
           <a class="TagCloudSmall" href="/drug/info/1">Arfen Plus</a></li>                                        
            <a class="TagCloudMedium" href="/drug/info/2">Biogesic</a></li>                                      
            <a class="TagCloudLarge" href="/drug/info/3">>Botox</a></li>                                             
            <a class="TagCloudLarge" href="/drug/info/4">>Brumed</a></li>                                            
            <a class="TagCloudMedium" href="/drug/info/5">>Children's Coltalin</a></li>                                      
            <a class="TagCloudMedium" href="/drug/info/6">Coldcap-A/Coldtab-2</a></li>                      
        </p>
    </div> 
```

Soln #2：将 li CSS 更改为：**#ulTagCloud li { display: inline-block;}**。（简单的！）

所有的解释都在这篇[**CSS 文章中**](http://www.webdesignfromscratch.com/html-css/css-block-and-inline/)。

最终结果很好：

![结果](../Images/b8877e8d45b0dd4444d1ee20aaa355e2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T04:18:46.433

尝试显示：块；宽度：自动；溢出：显示；对于那个容器 div。你可以设置 min-width:300px 或任何你想要的

# ruby-on-rails - 如何在我的应用程序主页上设置“特色部分”，只能由“管理员”编辑？

> ID：13409789
> 
> 赞同：1
> 
> 时间：2012-11-16T03:07:46.213
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以在`home#index`我的应用程序中，第一行并排有 4 张图像。

那就是所谓的`featured`节。这 4 幅图像将被选中，`admin`每个人都会看到它们。

我没有`home`模型，只有一个`homeController`。

因此，鉴于我希望能够将这些图像存储为单独的对象，并允许对这些图像进行常规 CRUD 操作，这些图像将仅出现在编辑页面上，`home#index`并且可能`home#edit`是编辑页面......我应该如何处理这个问题？

我应该创建一个独立的模型，调用`featured_images`或类似的东西，然后从`Home`控制器中的那个模型中提取？

这是我想到的一种方法，但我想知道为少数图像创建模型是否过大？但话又说回来，这些图像会定期变化——所以也许它们不仅仅是“少数”。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:10:47.540

“鉴于您希望能够存储这些图像”......意味着创建模型并不过分。Rails 将使您可以很容易地将图像存储为模型，并且很难以任何其他方式存储它们。走简单的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T03:35:18.760

Model 对象不必有 ActiveRecord（或其他 ORM）存储支持它；它也可以使用文件系统。或者它不能存储除了包含的逻辑之外的任何文章。模型的主要目的是封装业务逻辑并将其从控制器层抽象出来。这使得代码更易于阅读、测试和维护。在主题不涉及“业务”逻辑的情况下，帮助程序或库模块可能更合适。

如果逻辑非常简单，您当然可以将其保留在控制器中。但在这样做之前，请确定您是否觉得简单性值得在更容易的可读性、可测试性和可维护性之间进行权衡。答案可能只是“是”，但通常情况并非如此。

# kendo-ui - 属性类型已知但名称为 *not* 的 TypeScript 定义

> ID：13409791
> 
> 赞同：2
> 
> 时间：2012-11-16T03:08:00.120
> 
> 标签：kendo-ui, typescript

所以我正在努力将部分 Kendo UI 库转换为 TypeScript，但我被困在 Model 类上。问题是指定字段的方式。

给定以下数组：

```
 function someModelFields() {
    return {
        Id: { editable: false, nullable: false, defaultValue: emptyGuid },
        ScenarioId: { editable: false, nullable: false, defaultValue: emptyGuid },
        UnitId: { editable: false, nullable: false },
        UnitNumber: { type: "string", editable: false },
        SquareFootage: { type: "number", editable: false }
    };
}; 
```

...我将如何在 TypeScript 中对此进行建模，其中属性名称可以是任何东西，但属性的类型是已知的？这是我到目前为止所拥有的：

```
export module Kendo {

    export module Data {

        export class FieldTypeEnum {
            static string: string;
            static number: string;
            static boolean: string;
            static date: string;
        }

        export class ValidationDefinition {
            required: bool;
        }

        export class FieldDefinition {
            defaultValue: string;
            editable: bool;
            nullable: bool;
            parse: () => any;
            type: FieldTypeEnum;
            validation: ValidationDefinition;
        }

        export class ModelDefinition {
            id: string;
            fields: any[];
        } 
```

我知道“字段”的定义是错误的，并且我知道我在 ModelDefinition.fields 和 FieldDefinition 类型的动态属性名之间缺少一个类型。

想法？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:00:36.277

除了您已经拥有的之外，实际上没有其他方法可以在 TypeScript 中对此进行建模。

# java - 出于测试目的，是否可以有一个“进程内”的 Tomcat 实例？

> ID：13409797
> 
> 赞同：9
> 
> 时间：2012-11-16T03:08:19.887
> 
> 标签：java, tomcat, testing, maven, junit

我有一个基于 Maven 的 Web 应用程序项目，它生成要在 Tomcat 中运行的 WAR。*让我们假设，为了论证，该项目的单元测试通过网络*实际发送/接收请求（而不是简单地使用模拟请求调用 servlet 方法）至关重要。

我的测试工具有什么方法可以在同一个 JVM 中运行 Tomcat 实例，加载当前项目，然后让测试用例命中它`localhost`？如果做不到这一点，我实际上将如何以编程方式将当前项目（连同依赖项）打包到 WAR 中，以便我可以使用 Cargo 以编程方式将其上传到其他一些 Tomcat 实例？有没有更好的选择，而不只是炮轰`mvn`？

我知道我的请求不寻常，单元测试应该更加独立，等等，但请让我们一起玩吧:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T01:02:20.400

您可以为此目的使用[嵌入式 Tomcat 。](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/startup/Embedded.html)只需在您的测试工具中设置一个静态实例，然后在最后将其关闭。这是一些示例代码：

```
import org.apache.catalina.LifecycleException;
import org.apache.catalina.startup.Tomcat;
import org.junit.AfterClass;
import org.junit.BeforeClass;

public class TomcatIntegrationTest {
  private static Tomcat t;
  private static final int TOMCAT_PORT = 9999;

  @BeforeClass
  public static void setUp() throws LifecycleException {
    t = new Tomcat();
    t.setBaseDir(".");
    t.setPort(TOMCAT_PORT);
    /* There needs to be a symlink to the current dir named 'webapps' */
    t.addWebapp("/service", "src/main/webapp"); 
    t.init();
    t.start();
  }

  @AfterClass
  public static void shutDownTomcat() throws LifecycleException {
    t.stop();
  }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T04:49:53.553

Jetty 非常适合这个目的。如果您不拘泥于必须拥有 Tomcat，则可以在集成测试阶段轻松使用它。让预集成启动码头，并在集成后停止它，您可以在您的战争文件中抛出请求，因为它在实际容器中运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T08:33:06.030

我建议创建适当的集成测试并使用以下设置在 maven 构建期间进行集成测试。

您可以使用以下部分来下载 tomcat，或者如果您需要使用存储库中的工件。

```
<groupId>org.codehaus.cargo</groupId>
<artifactId>cargo-maven2-plugin</artifactId>
<configuration>
    <wait>false</wait>
    <container>
        <containerId>tomcat${tomcat.major}x</containerId>
        <zipUrlInstaller>
            <url>http://archive.apache.org/dist/tomcat/tomcat-${tomcat.major}/v${tomcat.version}/bin/apache-tomcat-${tomcat.version}.tar.gz</url>
            <extractDir>${project.build.directory}/extract/</extractDir>
            <downloadDir>${project.build.directory}/download/</downloadDir>
        </zipUrlInstaller>
        <output>${project.build.directory}/tomcat${tomcat.major}x.log</output>
        <log>${project.build.directory}/cargo.log</log>
    </container>
    <configuration>
        <home>${project.build.directory}/tomcat-${tomcat.version}/container</home>
        <properties>
            <cargo.logging>high</cargo.logging>
            <cargo.servlet.port>9080</cargo.servlet.port>
            <cargo.tomcat.ajp.port>9008</cargo.tomcat.ajp.port>
        </properties>
    </configuration>
</configuration> 
```

下一部分用于启动并将您的应用程序部署到给定的 tomcat（也与码头一起使用）。

```
 <executions>
    <execution>
        <id>start-container</id>
        <phase>pre-integration-test</phase>
        <goals>
            <goal>start</goal>
            <goal>deploy</goal>
        </goals>
        <configuration>
            <deployer>
                <deployables>
                    <deployable>
                        <groupId>${project.groupId}</groupId>
                        <artifactId>mod-war</artifactId>
                        <type>war</type>
                        <pingURL>http://localhost:9080/mod-war</pingURL>
                        <pingTimeout>30000</pingTimeout>
                        <properties>
                            <context>mod-war</context>
                        </properties>
                    </deployable>
                </deployables>
            </deployer>
        </configuration>
    </execution> 
```

当然最后通过以下方式停止启动的服务器：

```
<execution>
    <id>stop-container</id>
    <phase>post-integration-test</phase>
    <goals>
        <goal>stop</goal>
    </goals>
</execution> 
```

最好的办法是将这种配置等放入一个单独的 maven 模块中，该模块可能称为 app-it（用于集成测试）。完整的测试周期可以简单地调用

```
mvn verify 
```

而在验证生命周期中，集成测试阶段将运行并启动上述配置。但重要的是配置[maven-failsafe-plugin](http://maven.apache.org/plugins/maven-failsafe-plugin/)以使集成测试本身运行。关于这个的详细描述可以在[Maven 单元和集成测试指南中找到](http://khmarbaise.github.com/maui/)

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-failsafe-plugin</artifactId>
  <version>2.12</version>
  <executions>
    <execution>
      <id>integration-test</id>
      <goals>
        <goal>integration-test</goal>
      </goals>
    </execution>
    <execution>
      <id>verify</id>
      <goals>
        <goal>verify</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T08:59:16.520

您可以做的是使用来自 Apache 的 tomcat maven 插件生成原型，请参见[http://tomcat.apache.org/maven-plugin-2.0/archetype.html](http://tomcat.apache.org/maven-plugin-2.0/archetype.html)。

您将获得各种样本：

*   嵌入junit测试
*   启动一个带有战争的tomcat实例并运行硒测试

高温高压

# ruby - 清理 gem（和丝瓜络）在标签内的前导冒号之前删除文本

> ID：13409801
> 
> 赞同：4
> 
> 时间：2012-11-16T03:09:16.983
> 
> 标签：ruby, security, jruby, nokogiri, sanitize

当我注意到像“6:30pm”这样的时间变成“30pm”时，在尝试清理一些 html 片段时遇到了 Loofah 和 Sanitize 的一些奇怪行为。

做了一些调查，发现如下：

```
Loofah.scrub_fragment("<span>asdfasdf 6:30 pm</span>", :strip).to_html
#=> "<span>asdfasdf 30 pm</span>"
Loofah.scrub_fragment("6:30 pm", :strip).to_html
#=> "6:30 pm"
Loofah.scrub_fragment("<foo>asdfasdf 6&#58;30 pm</foo>", :strip).to_html
#=> "asdfasdf 6:30 pm"
Loofah.scrub_fragment("bar:30 pm", :strip).to_html
#=> "bar:30 pm"
Loofah.scrub_fragment("<span>bar:30 pm</span>", :strip).to_html
#=> "<span>30 pm</span>"
Loofah.scrub_fragment("<span>bar: asdfasdfadsf pm</span>", :strip).to_html
#=> "<span>bar: asdfasdfadsf pm</span>" 
```

Loofah (:prune 等) 和 Sanitize 的所有变体都是这种情况，所以我假设这是它们共同的代码问题。在清理之前，我需要做些什么来转义代码中的冒号吗？

**编辑 1** 我意识到我没有提到我正在使用 jruby ( jruby 1.7.0 (1.9.3p203) )。我试图弄清楚 nokogiri 是否可能存在问题（这两个宝石的基础是什么？）

**编辑 2** 通过进一步挖掘，看起来可能是 Jruby 上的 Nokogiri 中的一个问题（我使用的是 nokagiri 的 1.5.5 版，因为这很有价值）。我在 Jruby 和 Ruby 1.9.3 上检查了 nokogiri 的片段解析器：

Jruby 1.7.0：**意外结果**

```
doc = Nokogiri::HTML.fragment("<span>3:30pm</span>")
=> #(DocumentFragment:0x5fbc {
  name = "#document-fragment",
  children = [
    #(Element:0x5fc0 { name = "span", children = [ #(Text "30pm")] })]
  }) 
```

Ruby 1.9.3：**预期结果**

```
 doc = Nokogiri::HTML.fragment("<span>3:30pm</span>")
 => #(DocumentFragment:0x3fc4b102055c {
   name = "#document-fragment",
  children = [
    #(Element:0x3fc4b101fff8 {
      name = "span",
      children = [ #(Text "3:30pm")]
      })]
  }) 
```

将尝试继续挖掘，但欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T22:34:32.497

我相信这是 Nokogiri 的回归错误。我能够复制您的问题，并尝试使用多个版本的 Nokogiri。

它在 1.5.0 中正常工作：

```
jruby-1.6.7.2 :002 > gem 'nokogiri', '=1.5.0'
 => true 
jruby-1.6.7.2 :003 > require 'nokogiri'
 => true 
jruby-1.6.7.2 :004 > doc = Nokogiri::HTML.fragment("<span>3:30pm</span>")
 => #<Nokogiri::HTML::DocumentFragment:0x7d4 name="#document-fragment" children=[#<Nokogiri::XML::Element:0x7d2 name="span" children=[#<Nokogiri::XML::Text:0x7d0 "3:30pm">]>]> 
```

它在 1.5.1 中失败：

```
jruby-1.6.7.2 :002 > gem 'nokogiri', '=1.5.1'
 => true 
jruby-1.6.7.2 :003 > require 'nokogiri'
 => true 
jruby-1.6.7.2 :004 > doc = Nokogiri::HTML.fragment("<span>3:30pm</span>")
 => #<Nokogiri::HTML::DocumentFragment:0x7d4 name="#document-fragment" children=[#<Nokogiri::XML::Element:0x7d2 name="span" children=[#<Nokogiri::XML::Text:0x7d0 "30pm">]>]> 
```

**编辑**：重要的是要注意 Nokogiri 是围绕令人敬畏的[libxml2](http://www.xmlsoft.org/) C 库构建的，该库在功能、速度和处理格式错误的标记方面确实无与伦比。JRuby 实现是尝试使用[Xerces](http://xerces.apache.org/)和[NekoHTML](http://nekohtml.sourceforge.net/)来匹配它。我认为他们做得非常出色，使 JRuby 实现几乎完全匹配其 MRI 对应物的功能（如果不是速度的话），掩盖了截然不同的实现之间的差异。话虽如此，仍然会不时出现极端情况。

我继续提交了一份关于 Nokogiri的[错误报告。](https://github.com/sparklemotion/nokogiri/issues/793)

# xml - 如何在 XSLT 中生成垂直表？

> ID：13409802
> 
> 赞同：-5
> 
> 时间：2012-11-16T03:09:17.113
> 
> 标签：xml, xslt

我有一个如下的 xml，我需要使用 xslt 进行翻译。

```
<table-text>
    <widget-wrap> <firstname lang="en">first name 1</firstname></widget-wrap>
    <widget-wrap><lastname>last name 1</lastname></widget-wrap>
    <widget-wrap><email>email 1</email></widget-wrap>
</table-text>

<table-text>
<widget-wrap><firstname lang="en">first name 2</firstname></widget-wrap>
<widget-wrap><lastname>last name 2</lastname></widget-wrap>
<widget-wrap><email>email 2</email></widget-wrap>
</table-text>

<table-text>
<widget-wrap><firstname lang="en">first name 3</firstname></widget-wrap>
<widget-wrap><lastname>last name 3</lastname></widget-wrap>
<widget-wrap><email>email 3</email></widget-wrap>
</table-text> 
```

输出应该是一个垂直表，如下所示：

```
 <table>
      <tr>
   <td>first name 1</td>
   <td>first name 2</td>
   <td>first name 3</td>
   </tr>
<tr>
    <td>last name 1</td>
    <td>last name 2</td>
    <td>last name 3</td>
</tr>
<tr>
    <td>email 1</td>
    <td>email 2</td>
    <td>email 3</td>
</tr>
 </table> 
```

有人可以帮我解决这个问题。多谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:43:30.933

您输入的一个问题是有效的 XML 只能有一个根节点，因此您需要在执行 XSLT 之前将所有表格文本元素包装在另一个元素中。

只要不缺少名字、姓氏或电子邮件元素，这非常简单：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    exclude-result-prefixes="xs"
    version="2.0">

    <xsl:template match="/">
        <table>
            <tr>
                <xsl:apply-templates select="//firstname"/>
            </tr>
            <tr>
                <xsl:apply-templates select="//lastname"/>
            </tr>
            <tr>
                <xsl:apply-templates select="//email"/>
            </tr>
        </table>
    </xsl:template>

    <xsl:template match="firstname">
        <td><xsl:apply-templates /></td>
    </xsl:template>

    <xsl:template match="lastname">
        <td><xsl:apply-templates /></td>
    </xsl:template>

    <xsl:template match="email">
        <td><xsl:apply-templates /></td>
    </xsl:template>

</xsl:stylesheet> 
```

如果某些元素可能丢失，那么这将变得相当困难。希望这就是你所需要的。

# java - 如何为以下实现散列

> ID：13409803
> 
> 赞同：0
> 
> 时间：2012-11-16T03:09:26.083
> 
> 标签：java, algorithm, hash, hashtable

我正在尝试编写一个使用散列来解决以下问题的 Java 程序。给定一个自然语言文本，生成一个不同单词的列表，其中包含文本中每个单词的出现次数。在程序中插入适当的计数器，将哈希的经验效率与相应的理论结果进行比较。

我了解散列和散列表的基本原理，但我不知道如何将其实现到计算机程序中。我的教科书没有给出任何例子，我的教授在我的课堂上也从不复习任何具体的例子。

我相信程序应该首先扫描文件中的文本，但我不知道该去哪里。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:49:39.963

这是我的解释，你的任务是什么。

您假设简单地将文件拆分为单词并将它们插入到`HashMap<String,Integer>`（或具有哈希表实现的 Map）中。您还应该对插入、随机检索进行计时，甚至可能在地图上进行成员资格测试。

然后，您将对不同文件（不同大小）重复相同的操作，并验证所花费的时间是否与理论结果相符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:30:48.310

听起来你只需要研究散列。散列一般采用一系列值并将它们映射到一些较小的范围内。所以一个简单的哈希函数可能是：

```
 public int hash(int value)
 {
   assert value >= 0 && value < 1000;
   return value % 10;
 } 
```

所以我的散列函数从（0到999）范围内获取数字并将它们映射到（0到9）。一个好的散列函数会将值均匀地分配到结果范围内。

您的目标是将每个单词映射到哈希表中的某个索引，这不像我的示例那样简单。您将不得不对散列字符串进行一些研究。

祝你好运！

# zsh - 为什么此代码在传递给 `zsh -n` 而不是 `zsh` 时会抛出错误？

> ID：13409807
> 
> 赞同：3
> 
> 时间：2012-11-16T03:09:53.357
> 
> 标签：zsh

我试图在这个例子中将所有值从一个关联数组复制到另一个。我正在检查我的代码是否有语法错误，`zsh -n`但这个会抛出一个`test:12: bar: assignment to invalid subscript range`.

```
#!/usr/bin/env zsh
typeset -A foo bar
foo=(
    Adama   "Commander"
    Tigh    "Executive Officer"
    Roslin  "President"
)
bar=()

for i in ${(k)foo}; do
    # "rubbish"
    bar[$i]=$foo[$i]
done 
```

如果我取消注释该`# "rubbish`行，`zsh -n`停止抱怨。我的代码有什么问题`zsh -n`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T13:24:55.490

`-x`您可以通过添加调试模式 ( )来查看发生了什么

由于 non_exec 模式 ( `-n`) 不执行任何操作，因此它不执行`typeset`所以`bar`不是“关联数组”，并且分配无效。

我看到“垃圾”行（或其他看起来像命令的行）的存在阻止了程序进入“for”循环。

[Zsh 邮件列表：zsh -n 不 grok 关联数组索引？](http://www.zsh.org/mla/workers/2011/msg00054.html)（2011 年 1 月）

我尝试使用 zsh 4.3.12 并且行为更加一致，`-n`程序永远不会进入“for”循环。

对于没有循环的较小程序：

```
#!/usr/bin/env zsh
typeset -A bar
bar[test]=testons
echo $bar 
```

zsh 4.3.10 和 4.3.12 都会以相同的方式执行程序，但 `zsh-4.3.10 -n`不会时会错误地报告错误（分配给无效下标范围） `zsh-4.3.12 -n`。

作为结论，使用 zsh 4.3.12（或更新版本，我发现 ZSH 5 可用）
[关于 zsh 的新闻](http://zsh.sourceforge.net/News/)（包括 1997 年的“新闻”！）

# javascript - 将 window.find 限制为文本区域

> ID：13409811
> 
> 赞同：1
> 
> 时间：2012-11-16T03:10:33.077
> 
> 标签：javascript

现在单击黄色框中的函数名称首先突出显示它，然后再次单击滚动文本区域。我如何滚动文本区域？

```
$('.codepointer').live('click', function() {
    window.find($(this).text());
    e.preventDefault();
    return false;
}); 
```

![在此处输入图像描述](../Images/057a7da792867ee921c92376b9f22a57.png)

# java - 使用 jExcel API 将字符串写入 Excel 工作表

> ID：13409812
> 
> 赞同：1
> 
> 时间：2012-11-16T03:10:39.573
> 
> 标签：java, jexcelapi

我正在阅读这篇[文章](http://www.vogella.com/articles/JavaExcel/article.html)，通过它我可以开始写入 Microsoft Excel 工作表。但它只显示了如何写一个整数。就我而言，我需要写`Strings to Excel Sheet`. 在那个字符串中我也有`IP Address`。

所以下面是它失败的场景，因为 ipAddress 是字符串，数字之间有点。而且我无法将该字符串转换为整数，因为数字之间有点，所以这就是我寻找其他替代方案的原因。

**那么下面的 Number 类还有其他替代方法可以用于 String 吗？**

```
addNumber(sheet, 0, j, ipAddress);

private void addNumber(WritableSheet sheet, int column, int row, Integer integer) throws WriteException,
        RowsExceededException {
    Number number;
    number = new Number(column, row, integer, times);
    sheet.addCell(number);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T03:52:21.103

您可以尝试使用 new Label() 如下

sheet.addCell（新标签（列，行，字符串））

# android - 在 Android 上拖动按钮

> ID：13409817
> 
> 赞同：0
> 
> 时间：2012-11-16T03:11:15.323
> 
> 标签：android, button

> **可能重复：**
> [Android 拖放按钮](https://stackoverflow.com/questions/9663404/android-drag-and-drop-of-button)

我`ViewGroup`在这个视图组中有一个和几个图像按钮。我初始化所有按钮并设置它们的布局参数，`onLayout`并在此方法中设置它们的触摸侦听器。但是，我无法拖动按钮。我做到了`invalidate()`。有谁碰巧知道我可以如何在视图组中制作一个可拖动的按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:15:21.093

没有代码很难看到发生了什么。请添加一些代码。

另外，请务必查看以下拖放官方文档

[http://developer.android.com/guide/topics/ui/drag-drop.html](http://developer.android.com/guide/topics/ui/drag-drop.html)

# c++ - 套接字下载的网页太少或太多

> ID：13409818
> 
> 赞同：0
> 
> 时间：2012-11-16T03:11:29.910
> 
> 标签：c++, sockets, winsock2

为什么我的代码只下载了半个网页？？有时它会下载网页大小的 4 倍：S

我找不到问题所在，这就是我要问的原因。基本上，我连接到套接字，发送我的请求并将响应读取到缓冲区。我尝试将其保存到文件并将其打印到屏幕上，但它打印并保存了不完整的数据或过多的数据。我不确定它是否是缓冲区溢出或我做错了什么。

有任何想法吗？

```
#define _WIN32_WINNT 0x501

#include <iostream>
#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdio.h>
#include <fstream>

using namespace std;

void Get(string WebPage)
{
    WSADATA wsaData;
    string Address;
    struct addrinfo *result;
    struct sockaddr_in  *sockaddr_ipv4;

    char Buffer[50000] = {0};

    string Header = "GET / HTTP/1.1\r\n";
    Header += "Host: " + WebPage + "\r\n";
    Header += "Connection: close\r\n";
    Header += "\r\n";

    if (WSAStartup(MAKEWORD(2,2), &wsaData) != 0) return;

    SOCKET Socket = socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);

    getaddrinfo(WebPage.c_str(), NULL, NULL, &result);
    if (result->ai_family == AF_INET)
    {
        sockaddr_ipv4 = (struct sockaddr_in *) result->ai_addr;
        Address = inet_ntoa(sockaddr_ipv4->sin_addr);
    }
    freeaddrinfo(result);

    SOCKADDR_IN SockAddr;
    memset(&SockAddr, 0, sizeof(SockAddr));
    SockAddr.sin_port = htons(80);
    SockAddr.sin_family = AF_INET;
    SockAddr.sin_addr.s_addr = inet_addr(Address.c_str());

    if(connect(Socket,(SOCKADDR*)(&SockAddr),sizeof(SockAddr)) == SOCKET_ERROR) return;

    if (send(Socket, Header.c_str(), Header.size(), 0) == SOCKET_ERROR) return;
    shutdown(Socket, SD_SEND);

    std::string Response;

    while(true)
    {
        int Val = recv(Socket, Buffer, sizeof(Buffer), 0);
        if (Val == 0)
            break;
        else if (Val == SOCKET_ERROR)
        {
            cout<<"Error!";
        }
        else
        {
            Response += Buffer;
        }
    }

    closesocket(Socket);
    WSACleanup();

    ofstream File;
    File.open("C:/Saved.html");
    File<<Response;
    File.close();
}

int main()
{
    Get("villavu.com");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T03:35:11.430

编辑：recv 不是为您终止数据的空值 - 您需要写下您收到的数据量，而不仅仅是 += 它。

* * *

您的回复中是否有任何二进制数据？如果是这样，则

```
Response += Buffer; 
```

将在第一个空字符处停止。我会使用一个向量来存储来自 recv 的数据，如下所示：

```
vector<char> recvBuffer(50000);

int bytesReceived = recv(socket, recvBuffer.data(), recvBuffer.size(), 0);
//error checking
recvBuffer.resize(bytesReceived); 
```

并再次将接收到的数据存储在另一个向量中，然后将其复制回来。

```
vector<char> pageContents;

pageContents.insert(pageContents.end(), recvBuffer.begin(), recvBuffer.end()); 
```

不过，这并不能解释您的 4 倍数据。

我看到的另一个问题是，您没有在使用缓冲区后将其清零。

IOW：你需要写下你收到了多少数据，而不仅仅是 += 数组。

# macos - 使用 Iceberg (osx) 将文件安装到用户主目录？

> ID：13409819
> 
> 赞同：1
> 
> 时间：2012-11-16T03:11:43.363
> 
> 标签：macos, package

我是使用 Iceberg 的新手，并且通常制作包。我添加了要安装在用户机器上的文件，但不确定如何将它们添加到用户主目录。当我构建包时，它会将它们添加到“文件”选项卡中创建的文字结构中。我在网上搜索并找到了一些参考通过脚本创建符号链接的文档。我对创建脚本非常陌生，但也尝试过创建一个 preflight.txt ，其中包含以下内容：

```
#!/bin/sh
ln -s $HOME "/Movies/My\ Folder/Subfolder"
exit 0 
```

我也试过：

```
#!/bin/sh
ln -s "/Movies/My\ Folder/Subfolder" "$HOME/Movies/My\ Folder/Subfolder"
exit 0 
```

我不确定我是否走在正确的道路上。或者，如果这只是一个简单的错误。还有一条信息，用户可能已经或可能没有“我的文件夹”文件夹在他们的驱动器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:49:40.857

软件包安装到系统，而不是主目录。如果您的应用程序需要在用户的主目录中创建对象，它应该在首次启动时自行创建，而不是在安装时。

# uml - argoUML 工具中是否有任何特殊的图形来代表接口？

> ID：13409820
> 
> 赞同：1
> 
> 时间：2012-11-16T03:11:52.063
> 
> 标签：uml, argouml

我使用 argoUML 工具来分析类架构。

很容易找到代表 Class 或 Package 的图表。但我找不到一个特殊的图表来代表接口。

代表接口类的图形是什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T05:45:00.290

我找到了 Interface 的图表。类和接口之间有许多不同之处。

新班级![在此处输入图像描述](../Images/30ff43f0bbee81d68322bb3ba3002da9.png)

新界面![在此处输入图像描述](../Images/1c32ad1cac97764f5418b9e3e9e5df3c.png)

# php - 如果是单次考试，如何删除字符串末尾的数字

> ID：13409822
> 
> 赞同：0
> 
> 时间：2012-11-16T03:12:02.200
> 
> 标签：php

在 session_start() 下方我的脚本顶部附近；我在下面有这段代码：

```
 if (isset($_POST['id'])) {

    $_SESSION['id'] = $_POST['id'];

    }

    if(isset($_SESSION['sessionNum'])){
                //Declare my counter for the first time

                $_SESSION['initial_session'] = $_SESSION['sessionNum'];
                $_SESSION['sessionNumber'] = intval($_SESSION['sessionNum']);
                $_SESSION['sessionCounting'] = 1;

        }

    elseif (isset($_POST['submitMarks']) && $_SESSION['sessionCounting'] < $_SESSION['sessionNumber']) {
        $_SESSION['sessionCounting']++;
    }

    $sessionMinus =  $_SESSION['sessionCounting'];
    $sessionConcat =  $_SESSION['sessionCounting'];

    if ($sessionMinus == $_SESSION['initial_session']){ 

        $action = 'infopenaltymarks.php'; 

    }elseif($sessionMinus != $_SESSION['initial_session']){ 

        $action = $_SERVER['PHP_SELF']; 

    }

$assessment = $_SESSION['id'] . $sessionConcat; 
```

现在对于页面的标题，我正在使用以下代码：

```
<h1>INDIVIDUAL MARKS FOR EACH ANSWER: ASSESSMENT (<?php echo $assessment ?>) <?php echo $sessionMinus ?> OF <?php echo $_SESSION['initial_session'] ?></h1> 
```

现在假设`Session`数据库中的表如下所示：

```
SessionId  SessionName
1          AAA1
2          AAA2
3          AAB 
```

现在，如果您查看上面的表格，我有多个考试`AAA1`，`AAA2`而我只有一个考试`AAB`。

现在假设我正在研究 Exam `AAA1`，它将显示如下标题：

> 每个答案的单独分数：评估 (AAA1) 1 / 2

上面的标题是正确的，因为它显示了正确的考试名称，并且它说明了它是两个`AAA`考试 中的第一个

当我提交页面时，它将更改标题以进行第二次`AAA`考试，如下所示：

> 每个答案的个人分数：评估 (AAA2) 2 / 2

再次，上面的标题是正确的。

我遇到的问题是，如果我有一个单一的考试，或者在这种情况下是一个考试`AAB`，因为它是一个单一的考试，它在考试名称的末尾不包含一个数字，所以它只是`AAB`在数据库中显示。

但是当我输出标题时，它会在下面显示：

> 每个答案的单独分数：评估 (AAB1) 1 / 1

现在您可以看到上面的标题不正确，因为它不是考试`AAB1`，它应该`AAB`在括号之间。所以我的问题是，如果考试是`1 OF 1`或者换句话说只是一个考试，我如何从括号之间的考试名称末尾删除数字 1 以便将其显示为`AAB`而不是`AAB1`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:18:14.777

仅当大于 1 时才添加会话计数

```
$assessment = $_SESSION['id'];
if ($_SESSION['initial_session'] > 1) {
    $assessment .= $sessionConcat;
} 
```

在打印线之前修复

```
<?php
if ($_SESSION['initial_session'] == 1) {
    $assessment = substr($assessment, 0, -1);
}
?>
<h1>INDIVIDUAL MARKS FOR EACH ANSWER: ASSESSMENT (<?php echo $assessment ?>) <?php echo $sessionMinus ?> OF <?php echo $_SESSION['initial_session'] ?></h1> 
```

# java - Java驱动类、Runnable和main方法

> ID：13409824
> 
> 赞同：0
> 
> 时间：2012-11-16T03:12:07.857
> 
> 标签：java, methods, driver, main, runnable

我将使用驱动程序类中的多种方法在 Java 中创建一个程序。以前，我们只在此类应用程序中使用了 main 方法。

我知道我要使用这样的东西：

```
public static void main(String[] args)
{
    U4A4 u = new U4A4();
    u.run();
} 
```

运行方法`public U4A4()`。

是的，我知道这是非常基本的，但是我整个晚上都在寻找，我认为这里的某个人可能能够简单地说我应该如何做到这一点。

当我尝试将代码放在`public class U4A4 implements Runnable`代码的顶部（就在我的导入之后）并开始希望我将其抽象化时，我的编译器变得很生气。我不知道那是什么。

那么，我在哪里放`implements Runnable`，我在哪里使用`run()`？

非常感谢你在这里与我相处。

编辑：这是我到目前为止所得到的。[http://pastebin.com/J8jzzBvQ](http://pastebin.com/J8jzzBvQ)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T03:22:58.240

您已经实现`Runnable`了接口，但没有覆盖该`run`接口的方法。我已经注释了代码，您必须在其中放置线程逻辑，以便线程为您工作。

```
import java.util.Scanner;

public class U4A4 implements Runnable
{
    private int count = 0;
    private double accum = 0;
    private int apr, min, months;
    private double balance, profit;

    public static void main(String[] args)
    {
        U4A4 u = new U4A4();
        u.run();
    }

    public U4A4()
    {
        Scanner in = new Scanner(System.in);

        System.out.print("Enter credit card balance: ");
        balance = in.nextDouble();
        System.out.print("\n\nEnter minimum payment (as % of balance): ");
        min = in.nextInt();
        System.out.print("\n\nEnter annual percentage rate: ");
        apr = in.nextInt();

        profit = this.getMonths(balance);

        System.out.println("\n\n\n# of months to pay off debt =  " + count);
        System.out.println("\nProfit for credit card company = " + profit + "\n");
    }

    public double getMonths(double bal)
    {
        double newBal, payment;
        count++;

        payment = bal * min;

        if (payment < 20 && bal > 20)
        {
            newBal = bal * (1 + apr / 12 - 20);
            accum += 20;

        } else if (payment < 20 && bal < 20)
        {
            newBal = 0;
            accum += bal;
        } else
        {
            newBal = bal * (1 + apr / 12) - payment;
            accum += payment;
        }
        if (newBal != 0) {
            getMonths(newBal);
        }

        return accum;
    }

    public void run() {
        // TODO Auto-generated method stub
        // You have to override the run method and implement main login of your thread here.
    }
} 
```

# ruby-on-rails - 是否使用refinerycms

> ID：13409828
> 
> 赞同：1
> 
> 时间：2012-11-16T03:13:13.493
> 
> 标签：ruby-on-rails, refinerycms

我和我们的一群朋友决定用 ruby​​ on rails 创建一个网站。我们的问题是refinerycms 是否适合网站。我们正在建设的是一个我们的社区可以登录并发布一堆图片、视频、直播或文章/博客的地方。头版将有热门提要和特色文章。这就是大部分的想法。我们考虑过炼油厂cms，但在研究了炼油厂之后，它似乎不太合适，并且想知道如果我们从头开始是否会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:40:18.840

如果您不了解 Rails 并且不想花很多时间学习。（我喜欢它。这很有趣，但并不适合所有人），请使用 wordpress。

Wordpress 更易于设置和部署到服务器。

所有网络酒店通常都可以开箱即用地使用 PHP 和 Mysql，而 wordpress 依赖于

Rails 依赖于 ruby​​，这使得服务器配置更加复杂。

对于开发人员来说，Ruby on rails 是黄金。但是，如果您的主要重点是建立一个博客，那么要学习的东西太多了。

如果您想学习 ROR，请访问[railscast](http://railscast.com)并获得专业订阅。这是学习铁轨技巧的最佳方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:54:16.017

如果您的网站主要用作博客，那么 Refinery 将是一个不错的选择，恕我直言。另一方面，如果您需要您提到的功能（即实时流），则希望自己进行一些编程。另一方面，如果您是 Rails 的新手，它可能会更具挑战性，但不要让这阻止您。:)

# javascript - 是否基于 JavaScript `Date` 对象标准添加月份？

> ID：13409831
> 
> 赞同：0
> 
> 时间：2012-11-16T03:13:22.673
> 
> 标签：javascript, date, standards

以下 JavaScript 产生如下所示的结果：

```
 dat0 = new Date(2012, 9, 31);
  dat0.setMonth(dat0.getMonth() + 1); // Oct 31 + 1 month = Dec. 1

  dat1 = new Date(2011, 0, 31); // Jan 31 (non leap year)
  dat1.setMonth(dat1.getMonth() + 1);  // Mar 3

  dat2 = new Date(2012, 0, 31); // Jan 31 (leap year)
  dat2.setMonth(dat2.getMonth() + 1); // Mar 2

  dat3 = new Date(2011, 11, 31); // Dec 31
  dat3.setMonth(dat3.getMonth() - 1); // minus one month is Dec 1

  dat4 = new Date(2011, 10, 30); // Nov 30
  dat4.setMonth(dat4.getMonth() - 1); // minus one month is Oct 30

  alert(dat0 + "\n" + dat1 + "\n" + dat2 + "\n" + dat3 + "\n" + dat4); 
```

我已经在 IE 9 和 Chrome 中对此进行了测试，结果是一样的。因此，我可以假设所有 JavaScript 实现都会产生相同的结果吗？换句话说，这些结果是由公认的标准决定的吗？

（在 10 月 31 日增加一个月会导致 12 月 1 日，我并不感到惊讶。但我发现非常令人惊讶的是，在 1 月 31 日增加一个月会导致 3 月的两个不同日期，而这两个日期都不是 3 月 1 日。）

看到这个[jsFiddle](http://jsfiddle.net/Rf5da/)。

**相关说明：**对于那些感兴趣的人，我正在编写一个`closure`旨在处理超出`Date`对象提供的附加日期数学功能的程序。（加/减月份、两个日期之间的月份、一个月的最后一天、闰年等）我知道我可以扩展`Date`对象（通过原型），但有理由不这样做。无论如何，有一个`addMonths`函数，当 1 月 31 日加一个月时，返回的结果始终是 2 月的最后一天。10 月 31 日加一个月返回 11 月 30 日。

您可以尝试使用此[jsFiddle](http://jsfiddle.net/nQkpn/)的代码。

欢迎提出意见、问题或建议。

# c++ - 每次复制实现移动分配的非 const 对象时，我总是得到移动语义吗？

> ID：13409832
> 
> 赞同：0
> 
> 时间：2012-11-16T03:13:38.087
> 
> 标签：c++

例如：

```
std::vector<std::pair<std::string, bool > > v;
std::pair<std::string, bool> pr;
v.push_back( pr ); 
```

假设`std::pair`已经定义了一个移动赋值运算符。对 v.push_back 的调用会自动使用移动分配，还是我需要像这样专门要求它？

```
v.push_back( std::move(pr) ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:15:03.330

只有当函数的参数（在本例中为 的参数`push_back`）是右值时，以及在某些情况下，当您从函数返回对象时，您才会采取行动。

在您的示例中，`pr`它不是右值，因此您不会移动它。

但是，如果您——例如——将一个临时对象传递给向量，如下所示：

```
v.push_back(std::pair<std::string,bool>()); 
```

这将是一个右值并触发移动。

您还可以通过按照您建议的方式将参数显式转换为右值来触发移动：

```
v.push_back(std::move(pr)); 
```

但是请注意，在这种情况下，您将无法再以`pr`有意义的方式在调用后使用，因为其内容已被移走。

（当然，移动的另一个前提条件是您调用的函数实际上接受右值引用。对于向量`push_back`，确实如此。）

# macos - 如何在仅运行 10 秒的程序上设置右键单击->选项->保留在 Dock 中？

> ID：13409834
> 
> 赞同：1
> 
> 时间：2012-11-16T03:14:00.507
> 
> 标签：macos, dock, app-bundle

我有一个为 OS X Mountain Lion 编写的程序（.app 包）。它执行只有我需要的任务，并且只运行 10 秒。每天一次，我单击它（启动板->单击我的应用程序），10 秒后，它完成并关闭。我希望它每天整天都在 Dock 中，以便我可以在需要时单击它，这样我的妻子可以在需要运行它时找到它。问题是它运行的时间不够长，我无法右键单击它，选择选项，然后单击保留在 Dock 中。无论如何我可以将它添加到 Dock 中吗？还是我必须修改我的应用程序，以便在它第一次运行时等待一分钟，让我有机会将其添加到扩展坞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:00:12.790

我可以想到两种可能的解决方案：

1.  在 Finder 中找到您的应用程序，然后将其图标拖到 Dock 中。
2.  启动应用程序后，一旦其图标出现在 Dock 中，立即将其拖到 Dock 中的不同位置/位置。将其从 Dock 末端的默认位置移动的操作将与**Options > Keep in Dock**具有相同的效果。

# php - PHP 正则表达式无法正常工作

> ID：13409837
> 
> 赞同：-1
> 
> 时间：2012-11-16T03:14:04.053
> 
> 标签：php, mysql, regex

我正在尝试根据它们是字母数字或具有下划线来提取数组中的一些值。它没有通过。这就是我提供的脚本：

```
...
  [183]=>
  string(23) "/games/boomerang_devils"
  [184]=>
  string(26) "/games/krushuna_waterfalls"
  [185]=>
  string(21) "/games/super_drift_3d"
  [186]=>
  string(34) "/games/around_the_world_in_80_days"
  [187]=>
  string(24) "/games/governor_of_poker"
  [188]=>
  string(21) "/games/shoot_on_sight"
... 
```

编码：

```
if (preg_match('/\/games\/[a-zA-Z0-9_]/', $array['item'])) {
    // Add to DB
} 
```

但它没有捡起来。谁能发现我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:18:12.917

[`preg_match()`](http://php.net/preg_match)不适用于您的`$array`变量。它需要一个字符串。因此，要么遍历您的列表，然后测试每个字符串。或用于[`preg_grep()`](http://php.net/preg_grep)过滤您的数组以查找匹配条目。

除此之外，您忘记了量词`+`

```
 /\/games\/[a-zA-Z0-9_]+/ 
```

可能还有主题开始`^`和`$`结束锚点。并且`\w`可以取代你的角色列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:15:24.947

```
[a-zA-Z0-9_] is one character only. 
```

你需要通过添加重复字符`+`

```
if (preg_match('/\/games\/[a-zA-Z0-9_]+/', $array)) 
{
    // Add to DB
} 
```

# html - 画布，负坐标：绘制从画布开始并继续下去的路径是否不好？

> ID：13409838
> 
> 赞同：7
> 
> 时间：2012-11-16T03:14:07.017
> 
> 标签：html, canvas, draw

我只想显示在画布上绘制的形状的一部分。我的线基本上是这样的，它工作正常：

```
ctx.fillRect( xPosition, rectHeight - offsetV , rectWidth, rectHeight); 
```

第二个变量将是负数。所以，我的问题是：绘制一条从画布开始的路径（带有负坐标）然后继续在画布上绘制是不好的做法（或者我是否让自己在路上出错）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-11T08:59:26.130

完全没有问题。如果您有大量的绘图对象，您可以（如 GameAlchemist 所说）阻止绘制该对象。如果您使用像地图这样的画布进行探索（缩小/缩小 ctx，翻译整个上下文），阻止绘图可能会花费更多的剪辑成本。而它的复杂...

我有一些过期的画布对象。如果您放置计算和其他（无绘图）员工介绍绘图功能，您可能会遇到问题。

重要的 ：

-使画布绘制功能代码清晰（仅绘制画布代码）。

- 如果您的应用不需要 const 更新，则仅在需要时进行更新调用。

- 仅在 (0,0,canvas.w,canvas.h) 中清除画布

- 仅在需要时使用样式（笔触、填充、字体等）

# css - Sass：使用 HSLa 后备技术

> ID：13409839
> 
> 赞同：0
> 
> 时间：2012-11-16T03:14:16.233
> 
> 标签：css, sass, hsl

有谁知道在 SASS 编译的样式表中启用 HSLa 颜色声明的解决方法？

[出于 Chris Coyier 的这篇文章](http://css-tricks.com/yay-for-hsla/)中讨论的原因，我想使用 HSLa 。[Modernizr Docs](http://modernizr.com/docs/#features-css)中推荐的后备技术是首先声明一个十六进制值，然后是支持浏览器的 HSLa 值。

然而，Sass 当前实现其[hsla() 实例方法](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#hsla-instance_method)的方式使得无法使用这种技术——所有 HSLa 值都编译为十六进制，这意味着十六进制颜色只是重复。

我尝试将 Sass 颜色变量定义为字符串，但它会编译为样式表中带引号的字符串。

任何人都可以建议使用 Sass 获取 HSLa 输出的技巧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T03:26:37.487

你可以把它变成一个字符串，然后取消引用它。这将阻止调用 Sass hsla() 函数：

```
.test {
    background-color: #e2ecf0; /* Fallback */
    background-color: unquote("hsla(190, 30%, 94%, 1)"); 
} 
```

生成：

```
.test {
  background-color: #e2ecf0;
  /* Fallback */
  background-color: hsla(190, 30%, 94%, 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T03:40:37.080

您还可以使用插值 ( `#{}`) 和引号：

```
.test {
    background-color: #e2ecf0; // Fallback
    background-color: #{"hsla(190, 30%, 94%, 1)"}; 
} 
```

# javascript - PLupload 只接受一些过滤器？

> ID：13409840
> 
> 赞同：1
> 
> 时间：2012-11-16T03:14:25.187
> 
> 标签：javascript, html, plupload, filefilter

我正在使用 PLupload，它使用的是 HTML5 运行时。

在过滤器中，它似乎只接受一些过滤器，

例如，如果我有：

`filters:[{title:"Custom files", extensions:"pdf,png,gif,docx,doc,xls,xlsx"}]`

然后它会过滤，所以我可以选择 pdf、png 和 gif 文件，但不能选择 docx+ 文件。

它们的顺序无关紧要。例如

`filters:[{title:"Custom files", extensions:"xlsx,pdf,docx,png,xls,gif,doc"}]`会产生相同的结果。

生成的输入具有`application/pdf,image/png,image/gif,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/msword,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`作为其值的接受属性。

那么，这是怎么回事，这个问题只存在于 HTML5 版本中，flash 版本过滤正确吗？

如果 html5 版本不支持过滤器，我会完全理解它，但它似乎确实......有点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:02:50.573

它看起来只是因为 Chrome 实现的“自定义文件”过滤器恰好涵盖了您在过滤器中拥有的一些文件。

看到[这个线程](https://github.com/moxiecode/plupload/issues/614)。

# inotify - inotify vim 修改

> ID：13409843
> 
> 赞同：4
> 
> 时间：2012-11-16T03:14:40.423
> 
> 标签：inotify

我正在尝试使用 inotify 来监视文件以在无限循环中进行修改。我遇到了一些问题：

1）我有一个while（1），除非我为while的每次迭代创建一个新的文件描述符和一个新的监视描述符（我想要做的是在无限循环之前打开这些描述符），否则读取不起作用，但如果其他解决方案是可以接受的，那么我可以使用它）。这是有效的版本：

```
 while(1){
    int file_descriptor = inotify_init();
    if (file_descriptor < 0) {
        perror("inotify_init");
    }

    int watch_descriptor = inotify_add_watch(file_descriptor, "/home/user/hello.cfg", IN_CLOSE_WRITE);
    .... 
```

2）我尝试使用掩码IN_MODIFY，但我读到它不适用于vim，所以我改用IN_CLOSE_WRITE。问题是当我用vim修改文件时，会读取事件，但事件的掩码是IN_IGNORED（掩码0x00008000）。当我使用gedit时，有时事件的掩码是IN_IGNORED，有时是IN_CLOSE_WRITE（掩码0x0000008）。我想知道如果我正在修改文件，为什么会得到 IN_IGNORED，以及为什么事件不是 IN_CLOSE_WRITE。是否有另一种方法来监视单个文件的修改？IN_CLOSE_WRITE 是正确的掩码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-05T11:16:28.983

我在编写一个守护程序时发现了相同的行为（内核 3.14.4），如果在运行时发生更改，它会自动重新加载其配置文件。我发现某些程序（其中包括 vim）导致 inotify 生成 IN_IGNORED，因为它们删除了原始文件并将其替换为“交换”文件。

从 inotify 文档中，

> ```
>  IN_IGNORED
>               Watch was removed explicitly (inotify_rm_watch(2)) or
>               automatically (file was deleted, or filesystem was
>               unmounted).  See also BUGS. 
> ```

您可以通过运行看到这一点

```
strace -o log vi myfile.txt 
```

并检查日志中的 strace 结果，这将显示 .myfile.txt.swp 的创建和删除。

解决方案是捕获 IN_IGNORED 事件并为您的文件重新添加监视，即

```
int watch_descriptor = inotify_add_watch(file_descriptor, "/home/user/hello.cfg", (IN_CLOSE_WRITE | IN_IGNORED)); 
```

IN_CLOSE_WRITE 是要处理的正确事件，但也有一个陷阱。有些程序打开一个文件进行读写，但只从中读取。当他们关闭文件时，即使文件没有被修改，也会生成 IN_CLOSE_WRITE。

我发现最好的方法是为我正在观看的每个文件维护一个标志，并在我捕获 IN_MODIFY 时切换它。然后，当生成 IN_CLOSE_WRITE 时，可以检查该标志以确定 IN_CLOSE_WRITE 是否有意义。

# c++ - #ifdef _DEBUG 在 vs 2008 中的发布模式

> ID：13409845
> 
> 赞同：0
> 
> 时间：2012-11-16T03:15:07.920
> 
> 标签：c++, debugging, visual-studio-2008, build, release

我的项目的某些部分在发布模式下不起作用。我可以通过使用来检查它`printf`，它不会打印任何东西。我将在以下代码中向您展示：

```
void SNKsomething::vGetState()
{
#ifdef SNK_STH
for(int i = 0; i < 2; i++)
{
printf("sth\n');
} 
```

此外，`SNK_STH`在 Globals.h 文件中定义如下

```
#ifdef _DEBUG // in Project properties
#define SNK_STH
#else
// ..... 
```

所以，我看不到我在发布模式下打印它的东西。我想知道我必须在VS-2008的项目属性中对_DEBUG做一些事情。我不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:01:16.173

_DEBUG 是一个预处理器宏。如果您右键单击属性并转到 c/c++，预处理器是选项之一。

预处理器定义对于发布和调试是不同的。如果您将 SNK_STH 添加到发布预处理器宏中，您将看到您的 printf。

如果您想在调试和发布中查看代码，请考虑将其从 ifdef 中拉出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-21T12:21:45.567

我遇到了 _DEBUG 宏的问题，我发现非常有用的是 返回布尔值的[IsDebuggerPresent 函数：](http://msdn.microsoft.com/en-us/library/ms680345%28VS.85%29.aspx)

如果当前进程正在调试器的上下文中运行，则返回值非零。

如果当前进程未在调试器的上下文中运行，则返回值为零。

# javascript - 字符串索引器在 Javascript 中有效吗？

> ID：13409851
> 
> 赞同：0
> 
> 时间：2012-11-16T03:15:38.870
> 
> 标签：javascript, jquery, string, internet-explorer-8, indexer

我遇到了一个在 IE8 中出现的错误，但在 Firefox、Chrome 或 IE9+ 中没有。

一段代码：

```
Date.prototype.ddmmyyyy = function() {
    var yyyy = this.getFullYear().toString();
    var mm = (this.getMonth()+1).toString();
    var dd = this.getDate().toString();
    return (dd[1]?dd:"0"+dd[0]) + '/' + (mm[1]?mm:"0"+mm[0]) + '/' + yyyy;
}; 
```

我不会详细解释它确实（或试图）这是显而易见的。我没有意识到这一点，`dd[0]`并且`dd[1]`都会*`undefined`*在 IE8 中返回。

编写代码的更好方法是什么？或者有没有办法让字符串 [/array] 索引器工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T03:16:30.430

使用`.charAt(1)`而不是`[1]`符号。

* * *

或者您可以`.split()`将字符串转换为数组。

```
var dd = this.getDate().toString().split("");

dd[1]; 
```

* * *

最终，我会这样做：

```
Date.prototype.ddmmyyyy = function() {
    var yyyy = this.getFullYear();
    var mm = ("0" + (this.getMonth()+1)).slice(-2);
    var dd = ("0" + this.getDate()).slice(-2);
    return dd + '/' + mm + '/' + yyyy;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T03:20:24.257

您可以修改三元语句以检查字符串的长度。

`dd.length > 1 ? dd : '0' + dd`

# wpf - 如何解决这种涉及可折叠区域的布局方案？

> ID：13409853
> 
> 赞同：0
> 
> 时间：2012-11-16T03:16:01.367
> 
> 标签：wpf, xaml

我在这里最好地解释了以下布局问题（为粗略的插图道歉）

![在此处输入图像描述](../Images/c8905bcb9729320f455ecda97a1b27d9.png)

假设每个控件都实现为单独的用户控件

我想要这样的行为，即扩展右上角（绿色）控件将呈现到视图中，扩展区域比初始（绿色）控件的宽度更宽，并直接出现在其下方，宽度等于第一行中的 2 个控件（例如 colspan of 2) 同时按下它下面的所有内容

假设最初有一个有 2 行的网格 ..第一行是一些控件，其次是可扩展控件 - 第二行可以有任何东西，可以填充 2 的 colspan ..可以是另一个布局容器或用户控件，里面有任何东西等.

如果绿色的可扩展控件是用户控件，我需要做什么才能获得我所描述的这种行为？

我想我需要设置容器的 Grid.Row 和 Colspan 附加属性，表示从用户控件内部扩展内容（？）到用户控件所在的布局网格？（但是我如何将用户控件内的控件的附加属性设置为用户控件外的布局容器 - 特别是如果扩展内容本身位于用户控件内的网格​​内）。

即使我能做到这一点，这也将非常脆弱，因为它只有在控件位于网格布局容器中时才会起作用。

有任何想法吗？不必使用网格，但这似乎是解决它的自然/明显的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:31:04.963

不久前我有一个类似的布局。这对我有用：

*   在绿色控件上，为您需要的大小创建依赖属性。在这种情况下，我期望全宽（下矩形）和窄宽度（上矩形）。
*   在顶级容器中，您创建一个用于测量尺寸的网格。所以你会得到这样的东西：

    ```
    <Grid x:Name="fullSize">
         <ColumnDefinition/>
         <ColumnDefinition x:Name="halfSize"/>
    </Grid> 
    ```

在这里，您可以以适当的方式划分列的宽度。- 然后，绑定用这个网格测量的宽度

```
 <foo:GreenControl
         FullWidth={Binding ElementName=fullSize, Path=ActualWidth}
         NarrowWidth={Binding ElementName=halfSize, Path=ActualWidth}
   /> 
```

现在，GreenControl 可以将其宽度设置为所需的任何值，例如在值更新的处理程序中。在我的例子中，我将 XAML 中的元素绑定到依赖道具。

# c# - XML Schema - 哪个更正确？

> ID：13409854
> 
> 赞同：1
> 
> 时间：2012-11-16T03:16:05.320
> 
> 标签：c#, xml

假设 O 有这两个等价的（至少它们应该是）XML 模式。实际的 XML 最终将由 C# 解析。我认为第二种方式“更正确”，因为我将属性作为实际属性而不是子元素，对吗？

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<switch>
  <switch_name>switch1</switch_name>
  <software_version>1</software_version>
  <vendor>Cisco</vendor>
  <ip_address>1.1.1.1</ipaddress>
  <linecard>
    <model_type>12345</model_type>
 <fcport>
 <slot> 1</slot>
 <port> 1</port>
 <speed>4</speed>
 </fcport>

  </linecard>
</switch>

<switch>
 <switch name="switch1" version="1" vendor="Cisco" ip_address="1.1.1.1">
     <linecard model="12345">
  <fcport slot="1" port="1" speed="4">
</fcport>
<linecard>
</switch>
</xml> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:21:31.923

在使用元素或属性作为实体的属性之间进行选择时，没有“正确”的方式来表示 XML 中的数据。选择适合你的任何东西。

通常元素会提供更多的自由，因为您最终可能会有子元素。即，如果属性是某种列表，则将其表示为属性中的逗号分隔值，看起来非常非 XML。

旁注：[“XML 模式”](http://en.m.wikipedia.org/wiki/XML_schema)通常意味着不同的东西——XML 的结构化模式……我称之为“XML 中的数据表示”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T03:21:54.030

没有一个比另一个更“正确”，两者都适用于您的示例。也不违反任何规则。

也就是说，我认为我同意[W3Schools](http://www.w3schools.com/dtd/dtd_el_vs_attr.asp)的观点，因为**数据**应该放在子元素而不是属性中。尤其是像 IP 地址这样的东西，感觉就像应该是子元素而不是属性的数据。我通常用于**元数据**的属性，例如自动生成的 ID。

如果您以后想考虑扩展，尤其如此——例如，如果您想关联多个 IP 怎么办？对于子元素，您可以只添加另一个元素，但对于属性，您必须为每个添加的元素提供一个新的属性名称（ip1、ip2、ip3...）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T08:55:05.810

关于如何在元素和属性之间进行选择的经典文章在这里：

[http://xml.coverpages.org/elementsAndAttrs.html](http://xml.coverpages.org/elementsAndAttrs.html)

我注意到在页面末尾引用了 John Cowan 的话：“初学者总是问这个问题。有一点经验的人会热情地表达他们的意见。专家告诉你没有正确的答案。”

# ios - 我可以以编程方式更改选项卡项的第一个屏幕吗？

> ID：13409858
> 
> 赞同：0
> 
> 时间：2012-11-16T03:16:36.143
> 
> 标签：ios, uitabbarcontroller, uitabbar

我可以以编程方式更改选项卡项的第一个屏幕吗？

例如，

> 当用户在选项卡 A 中时，在点击那里的按钮时，用户将被导航到具有屏幕 1 的选项卡 C 但是，当用户在选项卡 C 中时，在此处点击按钮时，用户将被导航到具有屏幕 2 的选项卡 C。因此，屏幕 1 和 2 都将是 Tab C 的第一个屏幕，具体取决于用户来自哪里。

我可以实现这样的目标吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:03:46.707

基于这篇文章[How to replace a navigation root controller by tab bar controller in existing iphone app](https://stackoverflow.com/questions/5190040/how-to-replace-a-navigation-root-controller-by-tab-bar-controller-in-existing-ip)，可以通过以下代码更改视图控制器：

```
NSMutableArray * viewControllers = [[NSMutableArray alloc]init];

FirstViewController * firstViewController = [[FirstViewController alloc]initWithNibName:@"FirstViewController" bundle:nil];
UINavigationController * nvc = [[UINavigationController alloc] initWithRootViewController:firstViewController];
[firstViewController release];
[viewControllers addObject:nvc];
[nvc release];

SecondViewController * secondViewController = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];
 nvc = [[UINavigationController alloc] initWithRootViewController:secondViewController];
[secondViewController release];
[viewControllers addObject:nvc];
[nvc release];

UITabBarController * tabBarController = [[UITabBarController alloc] init];
tabBarController.viewControllers = viewControllers;
[window addSubview:tabBarController.view]; 
```

# java - 如何在设定的时间运行方法？

> ID：13409865
> 
> 赞同：0
> 
> 时间：2012-11-16T03:17:59.643
> 
> 标签：java, timer

现在，我正在做一个项目，我的设置是这样的：我有一个类 ( `Foo`)，其中有几个方法，必须由主类在不同时间激活。

我已经研究了很长一段时间，我唯一能找到的就是这个`Timer`类，它不太管用，因为它似乎只能为一个类计时，而且我不想要这样一个 25 个不同的类基本程序。

如何`Foo`单独激活每种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:16:03.027

下面的类使用`TimerTask`( `MethodTimerTask`) 的扩展来工作，它接受输入`Foo`实例和要调用的方法名称。

这样，使用反射，可以在不同的时间调用不同的方法，只需要一个扩展`TimerTask`类。

```
public class MyTimerTaskExample {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Timer timer = new Timer();
        Foo foo = new Foo();
        timer.schedule(new MethodTimerTask(foo, "method1"), 1000);
        timer.schedule(new MethodTimerTask(foo, "method2"), 3000);
    }

    public static class MethodTimerTask extends TimerTask {

        private String methodName;
        private Foo fooInstance;
        private Exception exception;

        public MethodTimerTask(Foo fooInstance, String methodName) {
            this.methodName = methodName;
            this.fooInstance = fooInstance;
        }

        @Override
        public void run() {
            try {
                Foo.class.getMethod(methodName).invoke(fooInstance);
            } catch (Exception e) {
                this.exception = e;
            }
        }

        public Exception getException() {
            return exception;
        }

        public boolean hasException() {
            return this.exception != null;
        }

    }

    public static class Foo {

        public void method1() {
            System.out.println("method1 executed");
        }

        public void method2() {
            System.out.println("method2 executed");
        }

    }

} 
```

奖励：该方法返回执行时`getException()`捕获的最终异常。`methodName``Foo`

# javascript - 替代方法也可以通过加载来调用这个特定的函数

> ID：13409869
> 
> 赞同：1
> 
> 时间：2012-11-16T03:18:47.903
> 
> 标签：javascript, html, onload

我在这里有一个自动刷新脚本，它工作得很好，但是通过 body onload 调用 LoadPage 会阻止我页面上的其他几个脚本。我已经尝试通过许多其他建议的替代体加载来调用它，但到目前为止没有任何效果。这是代码：

```
<head>
<script>  
      var asdf = false;  
      function StartTime(){  
        if(asdf)clearTimeout(asdf)  
        asdf = setTimeout("RefreshPage()",15000);  
      }  
      function RefreshPage(){  
clearTimeout(asdf)  
        if(document.autorl.RFCB.checked)  
          document.location.href = document.location.pathname + '?Checked'

      }  
      function LoadPage(){  
        var findCheck = document.location.href.split("?Chec");  
        if(findCheck.length == 2){  
          document.autorl.RFCB.checked=true;  
    window.location='#bottom'     
          StartTime()       
        }
      }  
    </script>
</head>

<body onload="LoadPage()">

<div>
<form name="autorl">
Auto-Refresh: <input type="checkbox" name="RFCB" onclick="StartTime()">
</form></div>

<a name="bottom"> 
```

这里有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:21:58.127

您可以改为使用 jQuery 中的 document.ready() 处理程序来完成此操作：

```
$(document).ready(function() {
    LoadPage();
}); 
```

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:22:19.150

`</html>`您可以尝试在标签添加之前从 html 文件末尾调用该函数`<script>LoadPage();</script>`

# r - 从数据框中的某些因素创建字符串 - “For”循环似乎没有必要

> ID：13409873
> 
> 赞同：0
> 
> 时间：2012-11-16T03:19:18.687
> 
> 标签：r

我有一个数据框，并根据一些因素进行选择。我想要一个从因子级别创建的名称向量。希望这足以表明意图：

```
test.results <- list(
  First  = factor(c('A', 'B'), levels=c('A', 'B', 'C')),
  Second = factor(c('E', 'F'), levels=c('E', 'F', 'G')),
  Third  = factor(c('X', 'Y'), levels=c('X', 'Y', 'Z'))
  )

# cols <-  c('First', 'Third'); TestName(test.results, cols) should return c('A X', 'B Y') 
```

这是一个实现。有没有办法避免显式的“for”循环？

```
TestName <- function(X, cols) {
  result <- character(length(cols))
  space <- '';
  for (i in cols) {
    result <- paste0(result, space, X[[i]]);
    space <- ' ';
  }
  return(result);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:26:16.403

您的数据不是示例中的 data.frame，但没关系，以下内容将起作用

`paste`是矢量化的，所以就问题而言，应该不需要`*apply`or`for loops`

```
testname <- function(x, .names){ do.call(paste, x[.names])}
testname(test.results, c('First','Third'))
## [1] "A X" "B Y" 
```

您可以添加检查是否`x`是 a`list`并且`names`存在于`x`.

编辑 -`sep`如果您愿意，可以设置（或其他变量）。

```
testname <- function(x, .names,...){ do.call(paste, c(x[.names], list(...)))}
testname(test.results, c('First','Third'), sep = '---')
## "A---X" "B---Y" 
```

如果您的数据是 a`data.table`那么您可以执行以下操作

```
library(data.table)
DT <- as.data.table(test.results)

DT[, paste(First, Third)] 
```

或者你可以坚持使用列表和 data.frames 并使用`with`或`evalq`

```
evalq(paste(First,Third), test.results) 
```

或者

```
with(test.results, paste(First, Third)) 
```

# java - 如何克服这种 java 语法，使 double 成为字符串？

> ID：13409874
> 
> 赞同：0
> 
> 时间：2012-11-16T03:19:32.647
> 
> 标签：java, syntax, paypal

我陷入了一种情况，即我的 Bean 类 - CartItemBean 是双倍的。

```
 public double getTotalCost() {
    return dblTotalCost; 
```

SetExpressCheckOutService 类要求我将金额放入字符串中。

```
 String amount = "";
    CartItemBean details = new CartItemBean();
    amount = details.getTotalCost();

        try {
        //calling the service, setting up the checkoutpage
        String token = setExpressCheckoutService.setExpressCheckout(userId, amount, 
        currencyCode, returnURL, cancelURL, paymentAction);
        log.info("Url to redirect to: https://www.sandbox.paypal.com               
        /webscr?cmd=_express-checkout&useraction=commit&token=" + token);
    } catch (PayPalException e) {

     // Log the exception

        log.log(Level.WARNING, "Paypal exception", e);

    }
     } 
```

我希望有人可以建议我如何克服这样的问题。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T03:22:50.093

使用 Double 对象的 toString 方法：

字符串字符串 = Double.toString(double);

所以在你的代码中这样做：

```
String token = setExpressCheckoutService.setExpressCheckout(userId, Double.toString(amount), currencyCode, returnURL, cancelURL, paymentAction); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:44:58.763

我找到了解决方案：

金额 = **Double.toString** (details.getTotalCost());

# kendo-ui - Kendo UI Grid、restful URL 和分页

> ID：13409881
> 
> 赞同：2
> 
> 时间：2012-11-16T03:20:51.603
> 
> 标签：kendo-ui

我有一个 Web 服务，我从中获取从*jquery*`JSON`解析为使用的文本。`$parseJSON`

 *客户端可以通过加载从 Web 服务获取数据`http://myserver/myfunction/{pagenumber}/{pagesize}`

这将返回一个对象

```
{
total: <some int> //A number indicating the total number of records
rowsForPage: [......] //An array with just the rows for the requested page
} 
```

如何将此端点用作 Kendo UI 网格的数据源，该网格将传递所选页面的页码和页面大小。

对于我的生活，我无法弄清楚这一点，但我认为这应该相对简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:47:35.587

```
$("#grid").kendoGrid({
        dataSource: {
            serverPaging: true,
            schema: {
                data: function(data) {
                    return data.rowsForPage;
                },
                total: function(data) {
                    return data.total;
                }
            },
            transport: {
                read: "http://myserver/myfunction"
            }
    }
); 
```

就 url 而言，您必须解析出 url 参数 skip 并采取以确定您应该传回哪些记录。如果您的页面大小为 100 并且您的页面为 3，那么它应该通过

```
skip=200&take=100 
```*

# iphone - 无法在 applicationWillResignActive 中获取当前 ViewController

> ID：13409882
> 
> 赞同：1
> 
> 时间：2012-11-16T03:20:56.850
> 
> 标签：iphone, ios, xcode, cocoa-touch

我有一个基于故事板的单视图应用程序；

`ViewControllers`我的故事板上有 3 个链接到`ViewController`代码中的 3 个类；

我`ViewControllers`通过这样做浏览：

```
UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
MenuViewController* mainMenu = [sb instantiateViewControllerWithIdentifier:@"vcMainMenu"];

mainMenu.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentModalViewController:mainMenu animated:YES]; 
```

现在我需要从当前活动访问不同`UIcontrols`的，我将根据不同的控件访问不同的控件，我正在尝试通过执行以下操作来完成此操作：`applicationWillResignActive``ViewController``ViewController`

```
if ([self.window.rootViewController isKindOfClass:[LowProfileViewController class]])
{
    NSLog(@"here!");
} 
```

但它总是返回`rootViewController`. 如何获取显示的`rootViewController`电流`applicationWillResignActive`？

请，合并`NavigationController`不是一个选项...

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T04:55:12.183

你可以试试这个——

1.  做一个`AppDelegate` `@property`（即`currentModelViewController`）

    ```
    @property (nonatomic, retain) UIViewController *currentModelViewController; 
    ```

2.  对于每个`ViewController`s in`viewDidAppear`或 in`viewWillAppear`

    ```
    appDelegate = [[UIApplication sharedApplication] delegate];
    appDelegate.currentModelViewController = self; 
    ```

现在这将起作用

```
if ([self.currentModelViewController isKindOfClass:[LowProfileViewController class]])
{
    NSLog(@"here!");
} 
```

# python - 计算列表中没有 .count 的每个元素

> ID：13409884
> 
> 赞同：4
> 
> 时间：2012-11-16T03:21:28.967
> 
> 标签：python, list, count

对于这个函数，我想计算每个元素的出现次数并返回一个字典。如： [a,b,a,c,b,a,c] 并返回 {a:3,b:2,c:2} 怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T03:23:39.313

您可以使用[Counter](http://docs.python.org/2/library/collections.html#collections.Counter)：

```
from collections import Counter
Counter( ['a','b','a','c','b','a','c'] ) 
```

或[DefaultDict](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
from collections import defaultdict
d = defaultdict(int)
for x in lVals:
    d[x] += 1 
```

或者：

```
def get_cnt(lVals):
    d = dict(zip(lVals, [0]*len(lVals)))
    for x in lVals:
        d[x] += 1
    return d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T03:24:51.153

使用内置类[Counter](http://docs.python.org/2/library/collections.html#collections.Counter)

```
import collections
collections.Counter(['a','a','b']) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T03:36:09.700

你可以使用`dict.setdefault`：

```
In [4]: def my_counter(lis):
    dic={}
    for x in lis:
        dic[x]=dic.setdefault(x,0)+1
    return dic
   ...: 

In [5]: my_counter(['a','b','a','c','b','a','c'])
Out[5]: {'a': 3, 'b': 2, 'c': 2} 
```

或`dict.get`：

```
In [10]: def my_counter(lis):
    dic={}
    for x in lis:
        dic[x]=dic.get(x,0)+1
    return dic
   ....: 

In [11]: my_counter(['a','b','a','c','b','a','c'])
Out[11]: {'a': 3, 'b': 2, 'c': 2} 
```

# php - 具有视图和商务的 Drupal 7 自定义提交处理程序

> ID：13409891
> 
> 赞同：0
> 
> 时间：2012-11-16T03:22:20.707
> 
> 标签：php, drupal-7, drupal-views, drupal-forms, drupal-commerce

目前我有一个使用 Views 和 Drupal Commerce 模块的产品页面，该模块具有产品类别的排序功能（公开过滤器）。带有下拉列表/选择列表的表单有一个 GET 方法，因此类别 ID 会附加到 URL。我的目标是获取附加到 URL 的类别 ID 并将用户重定向到特定的产品页面，而不是仅将类别 ID 附加到 URL 的末尾。

我已经用谷歌搜索了有关此问题的答案，但没有一个有效。所以我所做的是我创建了一个自定义模块来实现 hook_form_alter 模块。我想向表单添加一个自定义提交处理程序，以便在第一次提交表单后，触发另一个提交以便从 URL 检索类别 ID，然后将用户重定向到特定页面。我的模块代码如下。

```
function custom_form_submit_form_alter(&$form, &$form_state, $form_id) {
    if ($form_id == 'views_exposed_form') { 
         $form['#submit'][] = 'my_custom_handler_submit';
    }   
}

function my_custom_handler_submit(&$form, &$form_state) {
    if ($_GET['field_categories_tid'] == 13) {
         $form_state['redirect'] = '/products/furnitures';
         }
} 
```

当我在启用 Devel 模块的情况下执行 kpr($form) 时，第一个函数会返回表单的值。第二个功能似乎根本没有被触发。我已经坚持了几天，经过大量研究后我真的无法弄清楚。我对 Drupal 比较陌生，希望有人能对此有所了解。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:27:59.113

我想我已经解决了这个问题。如果将来有人遇到同样的问题，这就是我所做的。我的自定义提交处理程序从未被触发，因为 $form_state['no_redirect'] 默认设置为 TRUE。所以我做了一个条件语句，如果 URL 包含类别 ID，$form_state['no_redirect'] = FALSE。然后触发我的自定义提交处理程序。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:42:07.970

我发现钩子名称有问题

**自定义**_form_submit_form_alter

**my_custom** _handler_submit

我不知道哪个是好的，但它们应该是一样的

希望能帮助到你

公关

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T18:58:05.837

在您的函数之前运行的默认提交函数可能会重定向或无法跳转到您通过 form_alter 附加的函数。您可以通过首先调用您的函数来排序

```
$temp = $form['#submit'][0];
$form['#submit'][0] = 'my_custom_handler_submit';
$form['#submit'][1] = $temp; 
```

# python - 有没有更好的方法在 Python 中将多个字段作为列表获取？

> ID：13409894
> 
> 赞同：0
> 
> 时间：2012-11-16T03:22:59.223
> 
> 标签：python, list, attributes

我需要一份清单：`[A.sample.name, A.species.name, A.factor.name, A.cell.name, A.population.name]`

但是，这个列表很长（大约 20 个元素）并且所有元素都来自同一个模式`A.fieldname.name`。我想我可以`[A.__dict__[i].name for i in ["sample", "species", "factor", "cell", "population"]`用来做这项工作，但我不确定这是否是最推荐的方式。

有谁知道是否有其他方法可以完成这项工作？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T03:24:23.453

利用`getattr()`

```
[getattr(A, attr).name for attr in ["sample", "species", "factor", "cell", "population"] 
```

# php - PHP echo 和 & 的使用

> ID：13409895
> 
> 赞同：0
> 
> 时间：2012-11-16T03:23:13.063
> 
> 标签：php

我在脚本的前面指定了一个变量并使用 & 字符，否则脚本会出现 EntityRef 错误：期望 ';' 使用 & 字符时：

```
$url = "http://www.domain.com/residential?frame=RESI&amp;MLNumber="; 
```

问题是稍后在脚本中我使用这个变量，如：

```
echo '<link>' . $url . '' . $title . '</link>'; 
```

问题是最终结果是这样的错误 URL：

```
http://www.domain.com/residential?frame=RESI&amp;base=frames&amp;MLNumber=26524589 
```

我该如何解决这个问题？

# python - 如何使用 Python 处理 lxml 中的转义字符串

> ID：13409897
> 
> 赞同：0
> 
> 时间：2012-11-16T03:23:21.023
> 
> 标签：python, xml, xml-parsing, lxml

我试图用它`lxml`来帮助我解析一些 XML 文件并输出它。但是，XML 文件中有一些特殊字符。我不想替换它，因为它太复杂而无法逃脱和取消它。我也不能强迫其他人生成格式良好的 XML。

Python有什么办法可以让我用lxml处理格式不正确的XML？

我可以正确阅读它：

```
 parser = etree.XMLParser(recover=True)
  root = etree.parse(sys.argv[1],parser=parser) 
```

但是当我想打印元素文本时，它只能打印内容，直到出现特殊字符。

```
 for element in root.iter("content"):
    print("%s - %s  attr - %s" % (element.tag, element.text, element.get("name"))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:46:50.597

lxml 会透明地为您取消转义。因此，您可以尝试先修复输入中的无效字符，然后将结果提供给 lxml。例如，您可以尝试一个简单[的基于正则表达式的解决方案来转义无效字符](https://stackoverflow.com/a/13322581/4279)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:33:17.110

在 Python 中处理不太完美的标记语言文件的一个流行选择是使用[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/ "美丽的汤")。它可以使用许多解析器，包括 lxml。

你能发布一些给你带来问题的 XML 吗？

# .net - 无法为 MonoGame Android 引用 XNA 项目

> ID：13409898
> 
> 赞同：2
> 
> 时间：2012-11-16T03:23:28.857
> 
> 标签：.net, visual-studio-2010, xna, xamarin.android, monogame

我有一个 XNA 项目，我正在尝试使用 MonoGame 将其移植到 Android，但出现以下错误：

当我添加一个项目引用我的 XNA 游戏时，我得到了，`"The Target Framework version for the project is higher than the current project Target Framework version. Would you like to add this reference to your project anyway?"`

所以我说是，然后它在 Visual Studio 的解决方案资源管理器中得到一个警告标志。当我构建时，我收到错误：

`"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(609,5): error : The OutputPath property is not set for project 'XXXXXXXXX.csproj'." . Please check to make sure that you have specified a valid combination of Configuration and Platform for this project. Configuration='Debug' Platform='AnyCPU'. This error may also appear if some other project is trying to follow a project-to-project reference to this project, this project has been unloaded or is not included in the solution, and the referencing project does not build using the same or an equivalent Configuration or Platform.`

所以我认为对我的 XNA 游戏的引用是问题所在。它的目标框架是 .NET Framework 4，我的 Android 项目目标是 Android 2.2。

我已经阅读 [1] Android 没有 .NET 4，所以我认为这就是问题所在，但我尝试制作一个类库以供参考，但我不确定它是如何工作的。我在我的类库中添加了对我的 XNA 游戏的引用，并从我的 MonoDroid 项目中添加了对我的类库的引用，但是现在我无法创建我的 XNA 游戏的实例（即当我尝试执行 Game1.Activity 时） = 这个；它不识别 Game1)。

我错过了一些明显的东西吗？这一直困扰着我几个小时！

编辑：澄清一下，我有 3 + 2 个项目：一个 XNAGame、MonoDroidApp（使用 MonoGame 框架）和 MonoDroidLib（Android 库的 Mono），以及 Lidgren.Network.Android 和 MonoGameFramework.Android。

如果我理解正确，我应该通过在 MonoDroidLib 中引用 XNAGame 并从 MonoDroidApp 引用 MonoDroidLib 来欺骗编译器。我想如果它有效，我会在 MonoDroidApp 中间接引用 XNAGame 并能够制作 XNAGame 的实例，但它没有用。

1：[用于 android 的 mono 存在的 dll（.NET 4 框架）问题](https://stackoverflow.com/questions/10551652/prexisiting-dlls-net-4-framework-issue-with-mono-for-android)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T13:03:06.367

Monogame 在项目构建后不使用 XNA 程序集。这意味着您的最终项目无法访问您引用的任何 XNA 程序集。这就是为什么 monogame 项目没有 XNA 内容项目它有资产文件夹的原因。

# html - Firefox 中的 HTML5 滞后

> ID：13409901
> 
> 赞同：0
> 
> 时间：2012-11-16T03:23:38.427
> 
> 标签：html, firefox

我正在开发我的第一个 HTML5 游戏。我使用 requestAnimationFrame 绘制到画布上，它是这样的：

```
window.requestAnimationFrame = function(){
    return (
        window.requestAnimationFrame       || 
        window.webkitRequestAnimationFrame || 
        window.mozRequestAnimationFrame    || 
        window.oRequestAnimationFrame      || 
        window.msRequestAnimationFrame     || 
        function(/* function */ callback){
            window.setTimeout(callback, 1000 / 60);
        }
    );
}(); 
```

我只在 Chrome 中使用过，但刚刚在 Firefox 中尝试过。游戏很慢而且不是很流畅。这是一个错误，还是有办法解决这个问题？提前致谢！

编辑：这是游戏：http: [//jackscode.99k.org/comets/comets.html](http://jackscode.99k.org/comets/comets.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:31:03.573

我没有看到你的代码，所以很难知道修复它的方法是什么，但也许如果你在游戏中使用了很多 settimeout 尝试使用 delta time 它会更快，这对我来说就像一个魅力。查看本指南他如何使用它[http://buildnewgames.com/sprite-animation/](http://buildnewgames.com/sprite-animation/)

# iphone - IOS - 如何在uiwebview重新加载时避免键盘隐藏

> ID：13409903
> 
> 赞同：7
> 
> 时间：2012-11-16T03:23:51.443
> 
> 标签：iphone, ios, webview, keyboard, hide

我有一个加载网络聊天客户端的网络视图。

与每次聊天一样，该页面都有一个用于输入文本的文本字段。

问题是当用户打开键盘时，由于重新加载页面的几个 ajax 请求，它会在短时间内自动隐藏。这对用户来说真的很烦人，因为他或她无法在键盘隐藏之前输入完整的句子。

我不知道为什么，这只发生在 iPhone 4S 和 iPhone 5 中。在 iPhone 4、3GS 和 Simulator 中一切正常。

我曾尝试使用**shouldStartLoadWithRequest**来捕获请求并在用户隐藏键盘后加载它，但这会破坏聊天会话。

我试图在同一方法中使用线程睡眠“挂起”请求，但它发生在主线程中，因此它冻结了整个应用程序。

有没有办法可以简单地避免键盘隐藏？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-27T15:47:21.267

因此，经过长时间的研究，我找到了一种方法，虽然它不是最好的，但它对我帮助很大。

首先使用`DOM`检查webView是否为firstResonder

```
- (BOOL)isWebViewFirstResponder
{
    NSString *str = [self.webView stringByEvaluatingJavaScriptFromString:@"document.activeElement.tagName"];
    if([[str lowercaseString]isEqualToString:@"input"]) {
        return YES;
    }
    return NO;
} 
```

然后响应`UIWebViewDelegate`方法`shouldStartLoadWithRequest`，`NO`如果`UIWebView`是第一响应者则返回

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    if([self isWebViewFirstResponder] &&
   navigationType != UIWebViewNavigationTypeFormSubmitted) {
        return NO;
    } else {
        return YES;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-10T13:03:36.870

您可以在 DidLoad 方法中使用通知中心来监听键盘何时隐藏，如下所示：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                     selector:@selector(keyboardWillHide)
                                         name:UIKeyboardWillHideNotification
                                       object:nil];

- (void) keyboardWillHide{

  [webView becomeFirstResponder];
} 
```

这将使网络视图成为第一响应者并再次显示键盘。我自己没有尝试过，所以希望它会成功..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-10T13:11:18.480

如果您的文本字段在 UIView

您可以使用网络视图委托方法

```
-(void)webViewDidFinishLoad:(UIWebView *)webView
{
    [textField becomeFirstResponder];
}
-(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    [textField becomeFirstResponder];
} 
```

否则，如果 textField 在 UIWebView 上，则将 textField 替换为 webView，如下所示。

```
-(void)webViewDidFinishLoad:(UIWebView *)webView
{
    [webView becomeFirstResponder];
}
-(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    [webView becomeFirstResponder];
} 
```

# css - 换行符意外出现在精灵上

> ID：13409905
> 
> 赞同：1
> 
> 时间：2012-11-16T03:24:00.563
> 
> 标签：css, text-alignment

我正在尝试将一些精灵放入页脚小部件中。当我使用我拥有的代码安装精灵时，我的图像最终出现在 4 行而不是 1 行上。我不确定我的代码哪里出错了。

精灵html是

```
<div>
  <a class="calendar-sp" href="http://www.tara.meditationinsantabarbara.org/calendar"></a>
  <a class="twitter-sp" href="http://www.twitter.com/MahakankalaBC/"></a>
  <a class="facebook-sp" href="http://www.facebook.com/MahakankalaBuddhistCenter/"></a>
  <a class="eBooklead-sp" href="http://www.emodernbuddhism.com/"></a>
</div> 
```

我的精灵 css 是

```
a.calendar-sp,
a.eBooklead-sp,
a.twitter-sp,
a.facebook-sp
 {
    display: inline-block;
        background-repeat: no-repeat;
        background-image:url ('http://www.tara.meditationinsantabarbara.org/wp-content/uploads/2012/11/SocialSpriteSheet5.png');
}

a.calendar-sp
{
        width:  184px;
    height: 175px;
}

a.eBooklead-sp
{
    background-position:    -184px 0;
    width:  213px;
    height: 175px;
}

a.twitter-sp {
    background-position:    -397px 0;
    width:  128px;
    height: 128px;
    }

a.facebook-sp
{
    background-position:    -525px 0;
    width:  128px;
    height: 128px;
} 
```

任何建议或想法将不胜感激。

此外，我的精灵图像偶尔会消失！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:32:14.913

您需要设置 div 的宽度以允许所有按钮彼此相邻，我还将添加一个 float:left 或 float:right 让浏览器知道您希望精灵以这种方式定位自己

# java - 使用 jdbcTemplate，我可以做一个简单的查询来测试连接性吗？

> ID：13409908
> 
> 赞同：0
> 
> 时间：2012-11-16T03:24:14.763
> 
> 标签：java, spring, jdbctemplate

我正在创建一个简单的健康检查页面，以确保我的应用程序可以连接到 mysql。

我正在使用 jdbctemplate，如果表为空或其他任何内容，您建议我执行什么查询不会引发错误，只是确保我的 spring 应用程序可以连接到数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:31:14.650

你可以试试`select 1 from my_table`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:38:19.623

您可以执行以下查询。

```
SELECT COUNT(*) col FROM dual WHERE 1=0 
```

# android - 如何创建水平加载进度条？

> ID：13409912
> 
> 赞同：91
> 
> 时间：2012-11-16T03:24:50.837
> 
> 标签：android, android-progressbar

当卸载一个安卓应用，或者做一些配置时，会出现这样一个水平的进度条，如下图：

![进度条](../Images/9822dd3530ab678e0c5c273301cd60b2.png)

不像是那种风格`@android:style/Widget.ProgressBar.Horizontal`。

如何在我自己的应用程序中使用它？

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2013-12-12T11:51:48.987

只需添加一条**STYLE**行，您的进度就会变成水平的：

```
<ProgressBar
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/progress"
        android:layout_centerHorizontal="true"      
        android:layout_centerVertical="true"      
        android:max="100" 
        android:progress="45"/> 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-11-16T03:33:14.663

它`Widget.ProgressBar.Horizontal`在我的手机上，如果我设置`android:indeterminate="true"`

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2016-01-28T08:26:25.707

用于使用新的进度条

```
style="?android:attr/progressBarStyleHorizontal" 
```

对于旧的灰色进度条使用

```
style="@android:style/Widget.ProgressBar.Horizontal" 
```

在这个中，您可以选择通过设置 minHeight 来更改高度

完整的 XML 代码是：

```
<ProgressBar
    android:id="@+id/pbProcessing"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tvProcessing"
    android:indeterminateOnly="true"/> 
```

indeterminateOnly 设置为 true 以获得不确定的水平进度条

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-12-12T11:57:42.080

**布局中的进度条**

```
<ProgressBar 
    android:id="@+id/download_progressbar"
    android:layout_width="200dp"
    android:layout_height="24dp"
    android:background="@drawable/download_progress_bg_track"
    android:progressDrawable="@drawable/download_progress_style"
    style="?android:attr/progressBarStyleHorizontal"
    android:indeterminate="false"
    android:indeterminateOnly="false" /> 
```

**下载进度样式.xml**

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@android:id/progress">
    <scale 
      android:useIntrinsicSizeAsMinimum="true" 
      android:scaleWidth="100%" 
      android:drawable="@drawable/store_download_progress" />
</item> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-08-28T15:46:16.400

为我工作，可以尝试相同

```
<ProgressBar
    android:id="@+id/determinateBar"
    android:indeterminateOnly="true"
    android:indeterminateDrawable="@android:drawable/progress_indeterminate_horizontal"
    android:indeterminateDuration="10"
    android:indeterminateBehavior="repeat"
    android:progressBackgroundTint="#208afa"
    android:progressBackgroundTintMode="multiply"
    android:minHeight="24dip"
    android:maxHeight="24dip"
    android:layout_width="match_parent"
    android:layout_height="10dp"
    android:visibility="visible"/> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-10-17T12:11:31.733

现在，您可以使用材料设计轻松创建它`LinearProgressIndicator`，并进行大量自定义，例如

```
<com.google.android.material.progressindicator.LinearProgressIndicator
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:indeterminate="true" /> 
```

查看 MaterialDesign 链接以获取更多信息和代码示例

[https://material.io/components/progress-indicators/android#using-progress-indicators](https://material.io/components/progress-indicators/android#using-progress-indicators)

# qt - 使用 QAlignment 后 QGridLayout Widget 消失

> ID：13409915
> 
> 赞同：1
> 
> 时间：2012-11-16T03:25:10.300
> 
> 标签：qt, qgridlayout

我有以下内容：

```
QGridLayout *layout = new GridLayout();
layout->addWidget(rightBuf, row, 0);
layout->addWidget(i, row, 1);
layout->addWidget(leftBuf, row, 2); 
```

哪个显示很好。但是，当我将对齐添加到第二行时，即：

```
layout->addWidget(i, row, 1, Qt::AlignTop); 
```

小部件从屏幕上消失。我想我已经尝试了所有方法来让它与顶部对齐，包括将其放入 QVBoxLayout，然后将其添加到 QGridLayout。这里有什么遗漏吗？

# android - 旋转屏幕后ImageView宽高返回0

> ID：13409919
> 
> 赞同：0
> 
> 时间：2012-11-16T03:25:56.803
> 
> 标签：android, android-imageview, screen-rotation

我，我开始探索 Android，我有点卡在我的第一个问题上。旋转屏幕后，我的 ImageView 在宽度和高度上返回 0。第一次上传照片时它工作正常，但是一旦我翻转屏幕它就会返回 0。我试图在 onResume 和 onRestoresavedInstance 方法中获取它，但我失败了。有谁知道如何解决这个问题？

先感谢您。:)

**布局**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/text_email"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="@string/email" />

<EditText
    android:id="@+id/text_nickname"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="@string/nickname" />

<Button
    android:id="@+id/button_take_photo"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:onClick="takePhoto"
    android:text="@string/photo_button" />

<ImageView
    android:id="@+id/image_viewer"
    android:layout_width="match_parent"
    android:contentDescription="@string/photo_taken" 
    android:background="@android:color/black" 
    android:layout_height="0dip"
    android:layout_weight="1"
    android:gravity="top"
    android:adjustViewBounds="true" />

</LinearLayout> 
```

**代码**

```
public class MainActivity extends Activity {

private static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;
private String fileUri;
private ImageView mImageView;
private EditText nickTextView;
private EditText mailTextView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    initUI();
}

@Override
public void onResume() {
    super.onResume();
    try {
        if (this.fileUri != null) {
            setPic();
        }
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onSaveInstanceState(Bundle savedInstanceState) {

    // Save UI state changes to the savedInstanceState.
    // This bundle will be passed to onCreate if the process is
    // killed and restarted.

    savedInstanceState.putString("fileUri", this.fileUri);
    savedInstanceState.putString("nick", this.nickTextView.getText()
            .toString());
    savedInstanceState.putString("email", this.mailTextView.getText()
            .toString());
    super.onSaveInstanceState(savedInstanceState);
}

// onRestoreInstanceState
@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    this.fileUri = savedInstanceState.getString("fileUri");
    this.nickTextView.setText(savedInstanceState.getString("nick"));
    this.mailTextView.setText(savedInstanceState.getString("email"));
}

public void takePhoto(View view) {
    if (checkCameraHardware(this)) {
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        this.fileUri = getOutputMediaFilePath();
        File temp = new File(fileUri);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(temp));
        startActivityForResult(intent,
                MainActivity.CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
    } else {
        System.out
                .println("This hardware does not support camera features!!!");
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            // galleryAddPic();
            try {
                setPic();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } else if (resultCode == RESULT_CANCELED) {
            System.out.println("User cancelled the image capture");
        } else {
            System.out.println("Image capture failed, advise user");
        }
    }
}

private void initUI() {
    // Get the image view
    mImageView = (ImageView) findViewById(R.id.image_viewer);

    // Get the text views
    nickTextView = (EditText) findViewById(R.id.text_nickname);
    mailTextView = (EditText) findViewById(R.id.text_email);
}

private String getOutputMediaFilePath() {
    File storageDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);
    // Create an image file name
    String timeStamp = new SimpleDateFormat("yyyyMMddHHmmss")
            .format(new Date());
    String imageFileName = "liftoff_" + timeStamp + ".jpg";
    File image = new File(storageDir, imageFileName);
    return image.getAbsolutePath();
}

private boolean checkCameraHardware(Context context) {
    if (context.getPackageManager().hasSystemFeature(
            PackageManager.FEATURE_CAMERA)) {
        // this device has a camera
        return true;
    } else {
        // no camera on this device
        return false;
    }
}

private void galleryAddPic() {
    Intent mediaScanIntent = new Intent(
            Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
    File f = new File(fileUri);
    Uri contentUri = Uri.fromFile(f);
    mediaScanIntent.setData(contentUri);
    this.sendBroadcast(mediaScanIntent);
}

private void setPic() throws Exception {

    // Get the dimensions of the bitmap
    BitmapFactory.Options bmOptions = new BitmapFactory.Options();
    bmOptions.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(fileUri, bmOptions);
    int photoW = bmOptions.outWidth;
    int photoH = bmOptions.outHeight;

    // Get the dimensions of the View
    int targetH = mImageView.getHeight();
    int targetW = mImageView.getWidth();

    // Put correct orientation
    Matrix matrix = new Matrix();
    ExifInterface exif = new ExifInterface(this.fileUri);
    String orientation = exif.getAttribute(ExifInterface.TAG_ORIENTATION);
    if (orientation.equals(ExifInterface.ORIENTATION_NORMAL)) {
        // Do nothing. The original image is fine.
    } else if (orientation.equals(ExifInterface.ORIENTATION_ROTATE_90 + "")) {
        photoW = bmOptions.outHeight;
        photoH = bmOptions.outWidth;
        matrix.postRotate(90);
    } else if (orientation
            .equals(ExifInterface.ORIENTATION_ROTATE_180 + "")) {
        matrix.postRotate(180);
    } else if (orientation
            .equals(ExifInterface.ORIENTATION_ROTATE_270 + "")) {
        matrix.postRotate(270);
        photoW = bmOptions.outHeight;
        photoH = bmOptions.outWidth;
    }

    // Determine how much to scale down the image
    int scaleFactor = Math.min(photoW / targetW, photoH / targetH);

    // Decode the image file into a Bitmap sized to fill the View
    bmOptions.inJustDecodeBounds = false;
    bmOptions.inSampleSize = scaleFactor;
    bmOptions.inPurgeable = true;

    Bitmap bitmap = BitmapFactory.decodeFile(fileUri, bmOptions);

    Bitmap resizedBitmap = Bitmap.createBitmap(bitmap, 0, 0,
            bitmap.getWidth(), bitmap.getHeight(), matrix, true);

    mImageView.setImageBitmap(resizedBitmap);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:44:59.050

确保视图已完成其布局过程。试试[这个](https://stackoverflow.com/questions/4142090/how-do-you-to-retrieve-dimensions-of-a-view-getheight-and-getwidth-always-r/4406090#4406090)。

# shell - 用于 Moai Android 构建的 Cygwin 中的错误

> ID：13409921
> 
> 赞同：0
> 
> 时间：2012-11-16T03:26:09.200
> 
> 标签：shell, cygwin, moai

我正在按照[本](http://www.gamefromscratch.com/post/2012/08/28/Setting-up-a-Moai-Android-host-build-environment.aspx)教程设置为 Android 移植设置 Moai。当我跑

```
./make-host.sh –p com.gamefromscratch.moai 
```

在 Cygwin 中构建 Android 主机它返回错误

```
build.sh: line 17: ndk-build: command not found 
```

我 98% 确定一切都已正确安装，并且我一直按照所写的说明进行操作。当我查看 shell 脚本时，第 17 行是

```
use_fmod="false" 
```

我以前从未使用过 shell 脚本或设置过类似的东西，而且我在互联网上的搜索也没有产生结果。

作为旁注，Moai 运行完美，我没有遇到任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:36:40.570

# antlr - 如何从这棵 AST 树中删除无用的节点？

> ID：13409927
> 
> 赞同：3
> 
> 时间：2012-11-16T03:27:12.260
> 
> 标签：antlr, antlr3

*我已经看过这个[问题](https://stackoverflow.com/questions/6030552/how-to-avoid-building-intermediates-and-useless-ast-nodes-with-antlr3?rq=1)，即使问题标题似乎相同；它不能回答我的问题，至少不能以我能理解的任何方式回答。*

### 解析数学

这是我正在解析的内容：

```
PI -> 3.14.
Number area(Number radius) -> PI * radius^2. 
```

这就是我希望我的 AST 树的外观，减去所有无用的根节点。

[它应该是什么样子 http://vertigrated.com/images/How%20I%20want%20the%20tree%20to%20look.png](http://vertigrated.com/images/How%20I%20want%20the%20tree%20to%20look.png)

以下是我希望我的语法的相关片段：

```
term : '(' expression ')'
     | number -> ^(NUMBER number)
     | (function_invocation)=> function_invocation 
     | ATOM
     | ID
     ;

power : term ('^' term)* -> ^(POWER term (term)* ) ;
unary : ('+'! | '-'^)* power ;
multiply : unary ('*' unary)* -> ^(MULTIPLY unary (unary)* ) ;
divide : multiply ('/' multiply)* -> ^(DIVIDE multiply (multiply)* );
modulo : divide ('%' divide)* -> ^(MODULO divide (divide)*) ;
subtract : modulo ('-' modulo)* -> ^(SUBTRACT modulo (modulo)* ) ;  
add : subtract ('+' subtract)* -> ^(ADDITION subtract (subtract)*) ;

relation : add (('=' | '!=' | '<' | '<=' | '>=' | '>') add)* ;

expression : relation (and_or relation)*
           | string  
           | container_access
           ;
and_or : '&' | '|' ; 
```

### 优先级

我仍然想保持`precedence`如下图所示，但如果可能的话，想消除无用的节点。

来源：`Number a(x) -> 0 - 1 + 2 * 3 / 4 % 5 ^ 6.`

以下是我要消除的节点：

[我希望优先级树看起来如何 http://vertigrated.com/images/example%202%20desired%20result.png](http://vertigrated.com/images/example%202%20desired%20result.png)

*基本上我想消除那些没有直接在它们下面有分支的节点中的任何一个到二元期权。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:49:30.833

你的规则（和其他类似的）

```
 add : subtract ('+' subtract)* -> ^(ADDITION subtract (subtract)*) ; 
```

当您没有一系列添加操作时，会产生无用的产品。

我不是 ANTLR 专家，但我猜你需要两种情况，一种用于一元的添加项，另一种用于一组子项，第一个生成标准树，第二个简单将子树传递给父节点，而不创建新节点？

```
add : subtract ( ('+' subtract)+ -> ^(ADDITION subtract (subtract)*) 
               | -> subtract ) ; 
```

具有运算符操作数序列的其他规则的类似更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T08:36:25.887

你必须意识到这两条规则：

```
add : sub ( ('+' sub)+ -> ^(ADD sub (sub)*) | -> sub ) ; 
```

和

```
add : sub ('+'^ sub)* ; 
```

不要*产生*相同的AST。给定输入`1+2+3`，第一条规则将产生：

```
 ADD
   |
.--+--.
|  |  |
1  2  3 
```

第二条规则产生：

```
 (+)
      |
   .--+--.  
   |     |
  (+)    3
   |
.--+--.
|     |
1     2 
```

后者更有意义：中缀表达式应该有 2 个子节点，而不是更多。

为什么不简单地删除解析器规则中的文字并执行以下操作：

```
add : sub (ADD^ sub)*;

ADD : '+'; 
```

使用重写规则创建相同的 AST 如下所示：

```
add : (sub -> sub) ('+' s=sub -> ^(ADD $add $s))*; 
```

另请参阅第 7 章： [The Definitive ANTLR Reference](http://www.pragprog.com/titles/tpantlr/the-definitive-antlr-reference)中的*树构造*。尤其是**Rewrite Rules in Subrules** (page 173) 和**Reference Previous Rule ASTs in Rewrite Rules** (page 174/175)。

 ***** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T06:09:55.690

*尽管我接受 Barts 的答案是正确的，但我还是想用示例代码发布我自己的完整答案，这些示例代码只是为了完整性而工作。*

这是我根据巴特的回答所做的：

```
unary : ('+'! | '-'^)? term ;
pow : (unary -> unary) ('^' s=unary -> ^(POWER $pow $s))*;
mod : (pow -> pow) ('%' s=pow -> ^(MODULO $mod $s))*;
mult : (mod -> mod) ('*' s=mod -> ^(MULTIPLY $mult $s))*;
div : (mult -> mult) ('/' s=mult -> ^(DIVIDE $div $s))*;
sub : (div -> div) ('-' s=div -> ^(SUBTRACT $sub $s))*;
add : (sub -> sub) ('+' s=sub -> ^(ADD $add $s))*; 
```

这是生成的树的样子：

[工作答案 http://vertigrated.com/images/working_answer.png](http://vertigrated.com/images/working_answer.png)

有一种替代解决方案可以不使用重写并将符号本身提升为根，但如果可能的话，我希望树中的所有描述性标签。*我只是在谈论如何表示树，以便我的树行走代码尽可能干净！*

```
power : unary ('^'^ unary)* ;
mod : power ('%'^ power)* ;
mult : mod ('*'^ mod)* ;
div : mult ('/'^ mult)* ;
sub : div ('-'^ div)* ;
add : sub ('+'^ sub)* ; 
```

这看起来像这样：

[无需重写 http://vertigrated.com/images/without_the_rewrites.png](http://vertigrated.com/images/without_the_rewrites.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T13:23:40.990

要摆脱不相关的节点，只需明确：

```
 subtract
    :
    modulo
    ( 
       ( '-' modulo)+  -> ^(SUBTRACT modulo+) // no need for parenthesis or asterisk
       |
      () -> modulo
    )
    ; 
```****

# php - 防止对具有可变（和大量）列数的查询进行sql注入

> ID：13409929
> 
> 赞同：1
> 
> 时间：2012-11-16T03:27:35.300
> 
> 标签：php, mysql, pdo, sql-injection

我有一个使用 php 生成的 sql 查询。它返回具有与搜索词匹配的字段的任何记录的代理键，以及在其他表中具有与搜索词匹配的相关记录的任何记录。

我将表合并为一个，然后使用单独的函数来检索表中包含的列的列表（我希望允许添加到表而不重写 php 代码以降低持续维护）。

然后使用此代码

```
foreach ($col_array as $cur_col) {
    foreach ($search_terms_array as $term_searching) {
        $qry_string.="UPPER(";
        $qry_string.=$cur_col;
        $qry_string.=") like '%";
        $qry_string.=strtoupper($term_searching);
        $qry_string.="%' or ";
    }
} 
```

生成查询字符串的其余部分

```
select tbl_sub_model.sub_model_sk from tbl_sub_model inner join [about 10 other tables]

    where [much code removed] or UPPER(tbl_model.image_id) like '%HONDA%' or
 UPPER(tbl_model.image_id) like '%ACCORD%' or UPPER(tbl_badge.sub_model_sk) like '%HONDA%'
 or UPPER(tbl_badge.sub_model_sk) like '%ACCORD%' or UPPER(tbl_badge.badge) like '%HONDA%'
 or UPPER(tbl_badge.badge) like '%ACCORD%' group by tbl_sub_model.sub_model_sk 
```

它做了我想要它做的事情，但是它很容易受到 sql 注入的影响。我一直在用 pdo 替换我的 mysql_* 代码以防止这种情况发生，但我将如何保护这个代码超出了我的范围。

所以我的问题是，我如何以安全的方式搜索所有这些表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:49:37.287

这是一个解决方案，它要求数据库将搜索词大写并用`'%'`通配符装饰它们：

```
$parameters = array();
$conditions = array();
foreach ($col_array as $cur_col) {
    foreach ($search_terms_array as $term_searching) {
        $conditions[] = "UPPER( $cur_col ) LIKE CONCAT('%', UPPER(?), '%')";
        $parameters[] = $term_searching;
    }
}

$STH = $DBH->prepare('SELECT fields FROM tbl WHERE ' . implode(' OR ', $conditions));
$STH->execute($parameters); 
```

**笔记：**

1.  我们让 MySQL 在用户的搜索词上调用 UPPER()，而不是让 PHP 调用 strtoupper()
    这应该可以限制可能的搞笑/令人困惑的字符集不匹配问题。您所有的标准化都发生在一个地方，并且尽可能接近使用时刻。
2.  CONCAT() 是特定于 MySQL 的
    但是，当您标记问题`[mysql]`时，这可能不是问题。
3.  此查询与您的原始查询一样，将无视索引。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T15:29:35.803

尝试使用数组来保存参数。注意 % 在 term 之前和之后添加，因为**LIKE %?% 在查询字符串中不起作用**。[PHP 手册](http://php.net/manual/en/pdostatement.bindparam.php#99698)

```
 //Create array to hold $term_searching
    $data = array();
    foreach ($col_array as $cur_col) {
        foreach ($search_terms_array as $term_searching) {
            $item = "%".strtoupper($term_searching)."%";//LIKE %?% does not work
            array_push($data,$item) 
            $qry_string.="UPPER(";
            $qry_string.=$cur_col;
            $qry_string.=") LIKE ? OR";
        }
}
$qry_string = substr($qry_string, 0, -3);//Added to remove last OR

$STH = $DBH->prepare("SELECT fields FROM table WHERE ". $qry_string);//prepare added 
$STH->execute($data); 
```

**编辑**

`$qry_string = substr($qry_string, 0, -3)`添加以删除最后一次出现的**OR**并`prepare`添加到`$STH = $DBH->prepare("SElECT fields FROM table WHERE". $qry_string)`

# php - 在 PHP/MySQL 或 PHP/NoSQL 中建模隐私设置

> ID：13409930
> 
> 赞同：1
> 
> 时间：2012-11-16T03:27:36.180
> 
> 标签：php, mysql, database-design, nosql, relational-database

我正在用 Yii 建立一个私人社交网络，它将在整个网站上都有“评论”——在个人资料、事件页面、组线程等中。当用户发布帖子时，他们将能够选择该内容的可见性作为：

*   任何人
*   仅限注册用户
*   仅限朋友
*   自定义（特定好友列表）

我试图弄清楚如何为速度建模。我考虑过使用 MySQL 将设置写入 Comments 表中的二进制“is_secure”字段 - 如果为真，则转到包含三列的表：comment_id、user_id 和 group_id。组 (group_id) 将用于用户组 - 注册用户、朋友。自定义将为每个选定的用户 (user_id) 创建一行。

这个表会变得很大（每条评论可能有几十行），所以我想知道这里是否值得考虑使用 NoSQL 仅用于检索，或者是否有更好的方法来对此进行建模。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:14:36.800

与数据库“标志”类似的问题。搜索相关的 SO 问题。

而不是`IF true/false`with 字段，只需为(anyone), , ,`is_secure`添加 1 位字段。添加另一个包含自定义列表的表（来自上一个表）和（多行）。这样，在单个查询中，您可以确定是否向用户显示页面。或者，自定义可以是逗号分隔的列表（字符字段），但大小限制可能是一个问题。假设 3 个字母的朋友 ID 带有逗号，每个 255 个字符的字段可以有 64 个朋友。`read_all``registered``friends``custom``comment_id``friend_id``LEFT JOIN on custom_friends_list_for_comments`

# png - 如何减小渐变 PNG 的文件大小？

> ID：13409931
> 
> 赞同：1
> 
> 时间：2012-11-16T03:27:36.160
> 
> 标签：png, image-compression

我正在尝试在网页上创建背景图片，类似于不倒翁上使用的 404 页面...

[http://testing404image.tumblr.com/](http://testing404image.tumblr.com/)

在这里，我们可以看到一个 1623*1064 像素的 PNG，但在渐变方面显得相当平滑。图片的直接链接是 [http://testing404image.tumblr.com/images/status_bg.png?2](http://testing404image.tumblr.com/images/status_bg.png?2)

当我尝试在 Mac 的 Photoshop CS4 中创建类似的 PNG（不同颜色，但大小相同）时，生成的文件最终大于 400k，而 tumblers 为 90k

我尝试使用所有 Photoshop 选项，包括将颜色数量减少到 55，但我无法获得低于 ~240k 的图像。

我还尝试了各种优化工具，例如 ImageOptim (http://imageoptim.com/)，但无济于事。

此 PNG 是否有任何属性导致文件大小如此之小？我尝试使用 JPG，认为它更适合渐变图像，但即使是 100% 质量的 JPG 也会导致明显的锯齿，这是相同内容/大小的 PNG 所没有的。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:31:42.487

Photoshop 对 PNG 不是很好：我只是用不起眼的 xnView（最大压缩）打开并保存它，得到 74K。您还可以将其转换为调色板图像，并进行一些额外的微调 - PNGoptim 给我的最终尺寸为 64.548。我不希望有比这更好的东西，图像太大了。

顺便说一句，请注意，使用如此大且如此平滑的渐变，以至于数字图像（每像素 8 位）无法在没有一些条带的情况下表示它。该图像确实过采样（您可以将其重新采样为 25% 或更少并按比例显示，结果将基本相同）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T03:48:49.820

嗨，那里改变了颜色

> 图像 > 调整 > 色相/饱和度 - 在 Photoshop CS4 中

这是结果：

![图片](../Images/1dc5af096b8d1b0ddd5cc4cd58e678bb.png)

如您所见，它的大小几乎相同（75k）。

试着在下面玩

> 图像 > 调整

获取您正在寻找的颜色并保存为 png 并使用 NONE 进行隔行扫描。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-04T21:56:33.417

实际原因是您希望源图像的渐变质量低于您正在制作的图像。

填充渐变颜色时，只需取消选中该`Dither`选项（从 Photoshop 的顶部工具栏中）。渐变的质量和平滑度会降低，因此您会得到一个非常小的文件大小的 PNG 输出。

# objective-c - 如何允许用户使用 xcode 中的界面按钮在 NSTextView 中设置字体样式？

> ID：13409932
> 
> 赞同：1
> 
> 时间：2012-11-16T03:27:37.273
> 
> 标签：objective-c, xcode, fonts, styles, nstextview

简而言之：我正在尝试在 NSTextView 中查找有关文本样式的信息。粗体、斜体、缩进、使单词完全大写并将背景颜色设置为某些行。欢迎任何和所有信息。我一直在网上寻找有关该主题的文档，但只找到了一些似乎是 iphone 框架一部分的东西。我敢肯定那里一定有什么东西，我只是在寻找错误的词。

一些细节：我不是开发人员。我是一名动态图形艺术家和编剧。我确实知道不同图形应用程序使用的 html、php、javascript、css 和几种脚本语言（都非常类似于 javascript）。

我对 Objective-c 不是很精通，但我已经开始编写一个编剧应用程序作为一个副项目。我一直在通过一本名为 Cocoa Programming for Mac OSX 的书自学 Objective-c，并使用我从书中的示例中创建的代码来使用 Xcode 创建我的应用程序。没有涵盖样式文本，我不知道如何处理它。

剧本有非常具体的格式。使用 css 我可以轻松地创建这种格式，所以我的第一个想法是找出 NSTextview 中的文本是否可以应用 css。我没有找到任何可以回答这个问题的东西。当然，我可能与这种方法相去甚远。

再次，非常感谢任何可以为我指明正确方向的帮助或任何人。

谢谢！

-奥马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:02:27.473

你不能这样做，因为它只接受一种风格。

您必须为此处理 UIWebView[教程](http://ios-blog.co.uk/tutorials/rich-text-editing-a-simple-start-part-1/)并使用您的 CSS。

或者您可以使用一些代码，例如[EGOTextView](https://github.com/enormego/EGOTextView)。我没有对此进行测试，但我认为这对您来说是最简单的方法。

# c++ - C++ 添加 libcurl（使用 Curl）？- 我的尝试解释

> ID：13409934
> 
> 赞同：2
> 
> 时间：2012-11-16T03:27:49.653
> 
> 标签：c++, curl, command, libcurl, codeblocks

好的，所以我知道这听起来像是一个非常愚蠢的问题，但我已尽力而为，所以请在添加负面评论/否决之前听我说完。

好的，所以根据我的研究，在涉及任何与 Web 相关的内容时，在我的 C++ 程序中使用“cURL”是最好的方法。现在，我是 C++ 新手，我不想对每一步都提出问题并尝试自己做，显然情况并非如此。

**问题：** CodeBlocks 无法识别 curl 插件（说它不存在）

**目标：**
尝试使位于[此处](http://curl.haxx.se/libcurl/c/simple.html)的示例源（来自官方 cURL 网站）工作。

**尝试1：**
所以，我使用“帮助管理器”下载了插件，它显示了最好的下载内容。我得到了 .zip 文件“*curl-7.24.0-devel-mingw32* " 返回。我决定将 "bin" 文件夹的内容复制到我的项目 bin 并将 "include" 文件夹复制到我的项目。它一直说它无法识别 "/curl/ curl.h”或说它不存在。

**尝试 2：**
在不删除“bin”和“include”文件夹的情况下，我决定通过创建一个名为“curl”，然后将“curl.h”放入文件夹中（文件夹“curl”位于程序创建的“Headers”文件夹中）并尝试再次运行它，看看它是否存在。相同的错误

**尝试 3：**
经过无数次的搜索，我发现我应该将我的 curl 文件和“bin”文件夹中的所有文件放入 C:\Windows\ 文件夹中。所以我将“includes”文件夹中的所有内容和bin文件夹的内容（包括其中的“curl”文件夹）复制到WINDOWS文件夹中。同样的错误。

**尝试 4： - 有点……**
现在，有一些关于进入我的项目选项并选择要导入的某些文件以及那些东西的事情，但它更令人困惑，因为每个站点都有不同的选项，所以我无法回忆这些步骤。

我现在依靠 StackOverFlow 社区来帮助我。我尝试以最详细的方式解释我的问题，但如果您有任何问题或需要更多信息，请不要犹豫。此外，这是我得到的错误：
[http://pastebin.com/raw.php?i=B1wsqvmA](http://pastebin.com/raw.php?i=B1wsqvmA)

这是我的来源：
[http](http://pastebin.com/raw.php?i=YShFZf8G)

://pastebin.com/raw.php?i=YShFZf8G 有人可以指导我解决这个问题吗？太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T06:36:43.813

问题是你没有告诉代码块在哪里搜索包含文件，你不应该将标题复制到项目的文件夹中。

您可以通过这种方式选择包含目录：

在项目 -> 构建选项 -> 搜索目录 -> 编译器中

有一个添加包含目录的按钮，在这种情况下是 libcURL 的“include”文件夹，并且该错误应该消失了。

您将必须遵循类似的过程来添加链接器的文件。

# web-services - RESTFul Web 服务 URL 样式

> ID：13409936
> 
> 赞同：0
> 
> 时间：2012-11-16T03:28:02.973
> 
> 标签：web-services, web

将 url 参数传递为

```
http://myserver/someoperation/bob/sally 
```

相对

```
http://myserver/someoperation?arg1=bob&arg2=sally 
```

完全取决于用户的偏好，还是每个都有充分的理由？

我有一个使用第一种样式的 Web 服务，但我想知道我是否遗漏了等式的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:52:08.877

就搜索引擎优化而言，谷歌表示：

> 如果您的 URL 包含相关字词，则这会为用户和搜索引擎提供比 ID 或奇怪命名参数更多的有关页面的信息。

这似乎意味着拥有您的 URL 包含有意义信息的页面会给您的页面带来更好的排名，尽管他们并没有直接这么说。

您可以在他们的完整指南中阅读更多信息：[Google 搜索引擎优化入门指南](http://www.google.com/webmasters/docs/search-engine-optimization-starter-guide.pdf "Google 搜索引擎优化入门指南")(PDF)。那句话来自第 8 页。

# javascript - 正则表达式无法正常工作，不应该返回 null

> ID：13409939
> 
> 赞同：0
> 
> 时间：2012-11-16T03:28:42.807
> 
> 标签：javascript, regex

我知道那里有一百万个正则表达式问题，我向你保证我已经阅读了其中一百万个 -1 ！这只是不适合我的事情之一。我正在尝试提取价格编号（是否为十进制）和商品名称（价格编号和 <br/>之间的所有内容）

输入：

```
var content = "$22 M Uniform <br/>" 
```

或类似的东西

```
var content = "$39 Day / Evening Class Tuition  <br/>" 
```

或者

```
var content = "$12.8 Weekend Class Payment <br/>" 
```

我的代码：

```
 var itemprice = content.match(/(\d+)(d*(\.\d{1,2}))/);
   var itemname = content.match(/(\s)(.*?)</); 
```

我的问题：

我的工作正常并正确返回，但是当我调试它设置为 null`itemname`时，我的号码搜索器似乎无法在浏览器中工作。`itemprice`这很奇怪，因为当我在这里尝试该代码时[http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_regexp_i](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_regexp_i)它工作得很好，提取了数字。

对于该网站，我的代码如下所示：

```
 var str = "$39.56 Day / Evening Class Tuition  <br>";
 var patt1 =/(\d+)(d*(\.\d{1,2}))/;
 var matches = str.match(patt1)
 alert(matches[0]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:32:49.437

带有可选点的简单十进制正则表达式是

```
/\d+(\.\d{1,2})?/ 
```

在这里演示 - [http://jsfiddle.net/JXdbg/2/](http://jsfiddle.net/JXdbg/2/)

对于美元符号货币检测，我会在前面加上`$`

```
/\$\d+(\.\d{1,2})?/ 
```

# php - 按 IP 显示国家标志

> ID：13409944
> 
> 赞同：1
> 
> 时间：2012-11-16T03:30:23.703
> 
> 标签：php, javascript, mysql, ip

我希望能够通过 IP 显示国家国旗图像。IP存储在Mysql中的一列中，每个页面都有自己的IP行，如下所示：

```
TABLE:
PAGEID    INFO    IP
12340     abc     120.120.120.120
12341     fgh     121.121.121.121
12342     ert     122.122.122.122
12343     bvn     120.120.120.120  
12344     hjk     123.123.123.123 
```

因此，当用户打开它时，它将通过 mysql 的页面 id 获取 IP，然后根据 IP 决定显示哪个国家/地区标志。
除了下面的脚本之外，还有这样的脚本吗？

这是我找到的类似脚本，但它不起作用：

```
<IMG SRC="http://api.hostip.info/flag.php?ip=12.215.42.19">
<IMG SRC="http://api.hostip.info/flag.php?ip=<YOUR IP HERE>"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:40:45.840

参考这篇文章，使用 switch case 或者 if else 来呼应你的标志 [教程](http://roshanbh.com.np/2008/07/getting-country-city-name-from-ip-address-in-php.html)

# string - rhomobile 中的字符串函数 substr

> ID：13409945
> 
> 赞同：0
> 
> 时间：2012-11-16T03:30:31.290
> 
> 标签：string, rhomobile, substr

我可以在 Rhomobile 中使用所有的 rails 字符串函数吗？当我尝试在我的 rhodes 应用程序中使用 substr 时，它返回了一个错误。请提出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:39:42.390

Rhodes 使用 Ruby，而不是 rails。您仍然可以使用 gsub 和所有其他 ruby​​ 字符串函数。
有关所有选项的链接，请访问此处： [http ://www.ruby-doc.org/core-1.9.2/String.html](http://www.ruby-doc.org/core-1.9.2/String.html)

# java - 如何存储仅需要 Java 中的“包含”操作的巨大静态/不可变字符串集

> ID：13409948
> 
> 赞同：2
> 
> 时间：2012-11-16T03:30:49.093
> 
> 标签：java, data-structures, hash, set

我有一个庞大的字符串列表（8 到 1000 万）。它们是维基百科页面标题。在这些字符串上创建一个类似 Set 的数据结构后，我需要的唯一操作是`boolean contains(String str)`.

直接的方法是只使用 a`HashSet`或类似的`TreeSet`东西（例如在 Java 中）。

是否有更适合此用例的数据结构？

PS：我们不能使用布隆过滤器，我们不想处理误报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:33:21.487

如果您比 constant-time 更关心节省空间`contains()`，并且存储的字符串中有很多重叠，那么[trie](http://en.wikipedia.org/wiki/Trie)可能会有所帮助。在这种情况下，的长度`contains(str)`在`O(n)`哪里。`n``str`

# linux - OpenMPI 多个 MPI_Send 和 MPI_recv 不起作用

> ID：13409949
> 
> 赞同：1
> 
> 时间：2012-11-16T03:30:53.703
> 
> 标签：linux, 64-bit, centos, openmpi

当我试图在程序中调用多个 MPI_Send 或 MPI_Recv 时，可执行文件在节点和根目录中被挂起。即，当它试图执行第二个 MPI_Send 或 MPI_Recv 时，通信被阻塞。同时，二进制文件在机器中以 100% 的速度运行。

当我尝试使用 OpenMPI 1.6.3 64 位在 windows 7 64 位中运行此代码时，它运行成功。但是相同的代码在 Linux 中不起作用，即 CentOS 6.3 x86_64 和 OpenMPI 1.6.3 -64 位。我做了什么问题。

下面贴出代码

```
#include <mpi.h>

int main(int argc, char** argv) {
MPI::Init();
int rank = MPI::COMM_WORLD.Get_rank();
int size = MPI::COMM_WORLD.Get_size();
char name[256] = { };
int len = 0;
MPI::Get_processor_name(name, len);

printf("Hi I'm %s:%d\n", name, rank);

if (rank == 0) 
{
    while (size >= 1) 
    {
        int val, stat = 1;
        MPI::Status status;
        MPI::COMM_WORLD.Recv(&val, 1, MPI::INT, 1, 0, status);
        int source = status.Get_source();
        printf("%s:%d received %d from %d\n", name, rank, val, source);

        MPI::COMM_WORLD.Send(&stat, 1, MPI::INT, 1, 2);
        printf("%s:%d sent status %d\n", name, rank, stat);

        size--;
    }
} else 
{
    int val = rank + 10;
    int stat = 0;
    printf("%s:%d sending %d...\n", name, rank, val);
    MPI::COMM_WORLD.Send(&val, 1, MPI::INT, 0, 0);
    printf("%s:%d sent %d\n", name, rank, val);

    MPI::Status status;
    MPI::COMM_WORLD.Recv(&stat, 1, MPI::INT, 0, 2, status);
    int source = status.Get_source();
    printf("%s:%d received status %d from %d\n", name, rank, stat, source);
}

size = MPI::COMM_WORLD.Get_size();
if (rank == 0) 
{
    while (size >= 1) 
    {
        int val, stat = 1;
        MPI::Status status;

        MPI::COMM_WORLD.Recv(&val, 1, MPI::INT, 1, 1, status);
        int source = status.Get_source();
        printf("%s:0 received %d from %d\n", name, val, source);

        size--;
    }

    printf("all workers checked in!\n");
} 
else
{
    int val = rank + 10 + 5;
    printf("%s:%d sending %d...\n", name, rank, val);
    MPI::COMM_WORLD.Send(&val, 1, MPI::INT, 0, 1);
    printf("%s:%d sent %d\n", name, rank, val);
}
MPI::Finalize();

return 0; 
```

}

嗨，Hristo，我已经按照您所说的更改了源代码，并且代码再次发布

```
 #include <mpi.h>
#include <stdio.h>

int main(int argc, char** argv) 
{
    int iNumProcess = 0, iRank = 0, iNameLen = 0, n;
    char szNodeName[MPI_MAX_PROCESSOR_NAME] = {};
    MPI_Status stMPIStatus;

    MPI_Init(&argc, &argv);
    MPI_Comm_size(MPI_COMM_WORLD, &iNumProcess);
    MPI_Comm_rank(MPI_COMM_WORLD, &iRank);
    MPI_Get_processor_name(szNodeName, &iNameLen);

    printf("Hi I'm %s:%d\n", szNodeName, iRank);

    if (iRank == 0) 
    {
        int iNode = 1;
        while (iNumProcess > 1) 
        {
            int iVal = 0, iStat = 1;
            MPI_Recv(&iVal, 1, MPI_INT, MPI_ANY_SOURCE, 0, MPI_COMM_WORLD, &stMPIStatus);
            printf("%s:%d received %d\n", szNodeName, iRank, iVal);

            MPI_Send(&iStat, 1, MPI_INT, iNode, 1, MPI_COMM_WORLD);
            printf("%s:%d sent Status %d\n", szNodeName, iRank, iStat);

            MPI_Recv(&iVal, 1, MPI_INT, MPI_ANY_SOURCE, 2, MPI_COMM_WORLD, &stMPIStatus);
            printf("%s:%d received %d\n", szNodeName, iRank, iVal);

            iNumProcess--;
            iNode++;
        }

        printf("all workers checked in!\n");
    }
    else 
    {
        int iVal = iRank + 10;
        int iStat = 0;
        printf("%s:%d sending %d...\n", szNodeName, iRank, iVal);
        MPI_Send(&iVal, 1, MPI_INT, 0, 0, MPI_COMM_WORLD);
        printf("%s:%d sent %d\n", szNodeName, iRank, iVal);

        MPI_Recv(&iStat, 1, MPI_INT, 0, 1, MPI_COMM_WORLD, &stMPIStatus);
        printf("%s:%d received status %d\n", szNodeName, iRank, iVal);

        iVal = 20;
        printf("%s:%d sending %d...\n", szNodeName, iRank, iVal);
        MPI_Send(&iVal, 1, MPI_INT, 0, 2, MPI_COMM_WORLD);
        printf("%s:%d sent %d\n", szNodeName, iRank, iVal);

    }

    MPI_Finalize();

    return 0;
} 
```

我得到如下输出。即，在发送发送/接收之后，root 无限等待，并且节点正在以 100% 的 CPU 利用率运行。它的输出如下

```
Hi I'm N1433:1
N1433:1 sending 11...
Hi I'm N1425:0
N1425:0 received 11
N1425:0 sent Status 1
N1433:1 sent 11
N1433:1 received status 11
N1433:1 sending 20... 
```

这里 N1433 和 N1425 是机器名称。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:01:16.130

主人的代码是错误的。它总是发送和等待来自同一等级的消息`1`。因此，程序只有在运行时才能正常运行`mpiexec -np 2 ...`。您可能想要做的是`MPI_ANY_SOURCE`用作源排名，然后将该源排名用作发送操作中的目标。您也不应该使用`while (size >= 1)`，因为 rank`0`不与自己对话，并且通信次数预计比 . 少一`size`。

```
if (rank == 0) 
{
    while (size > 1)
    //     ^^^^^^^^
    {
        int val, stat = 1;
        MPI::Status status;
        MPI::COMM_WORLD.Recv(&val, 1, MPI::INT, MPI_ANY_SOURCE, 0, status);
        // Use wildcard source here ------------^^^^^^^^^^^^^^
        int source = status.Get_source();
        printf("%s:%d received %d from %d\n", name, rank, val, source);

        MPI::COMM_WORLD.Send(&stat, 1, MPI::INT, source, 2);
        // Send back to the same process --------^^^^^^
        printf("%s:%d sent status %d\n", name, rank, stat);

        size--;
    }
} else 
```

在工人中做这样的事情是没有意义的：

```
MPI::Status status;
MPI::COMM_WORLD.Recv(&stat, 1, MPI::INT, 0, 2, status);
// Source rank is fixed here ------------^
int source = status.Get_source();
printf("%s:%d received status %d from %d\n", name, rank, stat, source); 
```

您已经将 rank 指定`0`为接收操作中的源，因此它只能接收来自 rank 的消息`0`。没有办法`status.Get_source()`返回除 之外的任何值`0`，除非发生了一些通信错误，在这种情况下，会抛出异常`MPI::COMM_WORLD.Recv()`。

代码中的第二个循环也是如此。

顺便说一句，您使用的是以前的官方标准 C++ 绑定。它们在 MPI-2.2 中被弃用，最新版本的标准 (MPI-3.0) 完全删除了它们，因为 MPI 论坛不再支持它们。您应该改用 C 绑定或依赖 3-rd 方 C++ 接口，例如`Boost.MPI`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T04:47:13.770

安装 MPICH2 而不是 OpenMPI 后，它成功运行。我认为在我的集群机器中使用 OpenMPI 1.6.3 存在一些问题。

# c++ - Objective-C 与 C++ 中的 Typedef 要求

> ID：13409950
> 
> 赞同：0
> 
> 时间：2012-11-16T03:31:06.600
> 
> 标签：c++, objective-c, c

从我的阅读中，我了解到您不需要像在 Objective-C 中那样在 C++ 中使用 typedef。例如，在 C++ 中，您可以这样做：

```
enum Order {first,second,third};
Order myOrder;
myOrder=first; 
```

但在 Objective-C 中，该行`Order myOrder;`首先需要一个`typedef`：

```
typedef enum {first,second,third} Order; //noting also the placement of Order at the end
Order myOrder;
myOrder=first; 
```

正确的？如果没有`typedef`在 Objective-C 中，您必须`myOrder`通过重复定义`enum`：

```
enum Order {first,second,third};
enum Order myOrder;
myOrder=first; 
```

如果事实上这一切都是正确的，我觉得语言中存在这种类型的句法差异有点奇怪，因为两者都是基于 C 的，而且这些都不是语言的面向对象性质所独有的，因此应该只是直 CI 会认为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:34:19.753

其实这一点也不奇怪，Objective-C 是 C 的超集，在 C 中你必须`enum`再次使用关键字（对于关键字`struct`），这样才能保持一致。

如果您希望敏捷版本切换到 Objective-C++，作为 C++ 的超集，它允许不那么冗长的版本，而无需`typedef`.

实际上，Objective-C 不是*基于*C，它是 C + Obective-C，因此它是对它的真正扩展。

# objective-c - XCode 4 - 创建 AppController 标准？

> ID：13409961
> 
> 赞同：1
> 
> 时间：2012-11-16T03:32:41.367
> 
> 标签：objective-c, cocoa, design-patterns

我正在使用 XCode 4，请注意，在设置新的 Cocoa 应用程序项目时，您会得到一个 AppDelegate.m 和 .h 文件，以及一个 .nib (.xib)。使用 alt-command-return，您将获得 3 列编辑器布局，您可以从中控制并从控件拖动到 AppDelegate.h 文件以创建 Outlets 或 Actions。

我的问题是，是否建议使用这些 AppDelegate 文件来管理您的界面控件，即。更新标签，对按钮按下等进行操作。或者创建一个 AppController 类，将一个对象添加到 .xib 并将其子类化为 AppController，修改 AppController 以管理控件是否更好？如果是这种情况，AppDelegate 的适当用途是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:22:00.533

我想说，这只是开发风格的问题。我所做的是使用另一个类并将 AppDelegate 更改为该类/视图并使用。此外，我不在默认窗口上绘制插座和按钮。我创建一个视图并将它们作为子视图添加到主窗口。

# asp.net-mvc-2 - 如何在 asp.net MVC 中渲染 jqPlot 图表

> ID：13409966
> 
> 赞同：0
> 
> 时间：2012-11-16T03:33:09.790
> 
> 标签：asp.net-mvc-2, jqplot

我正在尝试使用 asp.net MVC 呈现 jqPlot 条形图。不确定如何使用从控制器返回的数据在客户端构建数组。

我正在尝试与此类似，[http://jsfiddle.net/du8GZ/](http://jsfiddle.net/du8GZ/)

```
@foreach (var d in Model.SampleChart)
        {
         // What to write here?
        }

public class SampleChart
    {
        public int Count { get; set; }
        public string Name { get; set; }
    }

        public ActionResult BarIn()
        {
                List<SampleChart> data = new List<SampleChart>();
                SampleChart bar;
                Random r = new Random();
                for (int i = 0; i < 10; i++)
                {
                        bar = new SampleChart();
                        bar.Count = i;
                        bar.Name = "Sample " + i.ToString();
                        data.Add(bar);
                }

                return View(data);
        }

<link class="include" rel="stylesheet" type="text/css" href="@Url.Content("~/scripts/jqplot/css/jquery.jqplot.min.css")" />
<!--[if lt IE 9]><script language="javascript" type="text/javascript" src="@Url.Content("~/scripts/jqplot/excanvas.min.js")"></script><![endif]-->
<script type="text/javascript" src="@Url.Content("~/scripts/jqPlot/jquery.jqplot.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/scripts/jqplot/jqplot.categoryAxisRenderer.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/scripts/jqPlot/jqplot.barRenderer.min.js")"></script>

<div class="example-content">
    <!-- Example scripts go here -->
    <style type="text/css">
        .jqplot-target
        {
            margin: 30px;
        }
        .tooltipCss
        {
            position: absolute;
            background-color: #b2b1ac;
            color: White;
            z-index: 200;
            padding: 5px;
            border-radius: 5px;
            display: none;
        }
    </style>
    <div id="chart2" class="plot" ></div>
</div>

<script type="text/javascript">
    $(document).ready(function () {

        var data = new Array();
        var series = new Array();

        @foreach (var d in Model.SampleChart)
        {

        }
        plot2 = $.jqplot('chart2', data, {

            seriesDefaults: {
                renderer: $.jqplot.BarRenderer,
                rendererOptions: {
                    barDirection: 'horizontal',
                    barPadding: 10,
                    barMargin: 15 
                }
            },
            series: series,
        axes: {
            yaxis: {
                renderer: $.jqplot.CategoryAxisRenderer
            }
        }
        });
        $('#chart2').bind('jqplotDataMouseOver',
            function (ev, seriesIndex, pointIndex, data) {
                //$('#info2').html('series "' + series[seriesIndex].label + '" point "' + (pointIndex + 5) + '"<br /> value "' + data[1] + '"');
                //$('#info2').css({ "left": ev.pageX + 3, "top": ev.pageY })
                $('#info2').show();
            }
        );
        $('#chart2').bind('jqplotDataUnhighlight',
            function (ev) {
                $('#info2').hide();
            }
        );
    });
</script>
<div id="info2" class="tooltipCss"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:20:42.773

客户端的数组实际上是用 JSON 表示的，所以您所要做的就是创建一个视图模型，该模型将保存数组的表示并将其作为 JSON 转储到隐藏字段中......就像这样：

```
@Html.Hidden("BarGraphData",Json.Encode(Model.BarGraphData)) 
```

然后使用 jQuery 将数据发送到 jqPlot，如下所示：

```
var columnChartData = $.parseJSON($('#BarGraphData').val());
var plot2 = $.jqplot('chart1', columnChartData ,{.... 
```

# c# - 我怎么能从gridview中的不可见单元格中获取id？

> ID：13409973
> 
> 赞同：0
> 
> 时间：2012-11-16T03:33:36.030
> 
> 标签：c#, asp.net, gridview

我在我的gridview中做了不可见的第一列。：

```
<asp:GridView ID="tableResults" runat="server" DataMember="Table"
    EnableModelValidation="True" CssClass = "GridViewStyle"
    AutoGenerateColumns="False" OnRowDataBound = "tableResults_DataBound"
    OnRowDeleting = "tableResults_RowDeleting" AutoGenerateDeleteButton="True">                     
   <HeaderStyle CssClass = "GridViewHeaderStyle" />
   <RowStyle CssClass = "GridViewRowStyle"/>    
   <Columns>                   
    <asp:BoundField DataField="I_ID" Visible="false" HeaderText=""/>
    <asp:BoundField DataField="I_MAJOR" HeaderText="Major"/>
    <asp:BoundField DataField="I_MINOR" HeaderText="Minor"/>
    <asp:BoundField DataField="I_RELEASE" HeaderText="Release"/>
    <asp:BoundField DataField="I_BUILD" HeaderText="Build"/>
   </Columns>           
</asp:GridView> 
```

现在，当我从第 1 列获取值时，它为空：

```
TableCell rowData = tableResults.Rows[e.RowIndex].Cells[1];
oracleCom.CommandText = "Delete From TBL_VERSIONS Where i_id = " + rowData.Text; 
```

如果我做了专栏`visible = true`，我可以获得价值。但是这个列必须是不可见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:17:09.653

将 DataKeyNames 设置为 I_ID

```
<asp:GridView ID="tableResults" runat="server" DataMember="Table"
    EnableModelValidation="True" CssClass = "GridViewStyle"
    AutoGenerateColumns="False" OnRowDataBound = "tableResults_DataBound"
    OnRowDeleting = "tableResults_RowDeleting" AutoGenerateDeleteButton="True"
    DataKeyNames = "I_ID" > 
```

然后你可以得到如下的id

```
 int idVal= (int)tableResults.DataKeys[e.RowIndex].Value; 
```

或者您可以在 gridview 行数据绑定事件上设置单元格不可见，删除 DataField="I_ID" 上的不可见属性。

```
protected void tableResults_RowDataBound(object sender, GridViewRowEventArgs e)
{
   e.Row.Cells[1].Visible = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:47:18.090

一种简单的方法：

保持列可见

```
columnName.visible = true 
```

但使用 HTML 使其不可见

```
style="visibility:hidden;" 
```

或者

```
style="display:none;" 
```

即喜欢

```
<asp:BoundField DataField="I_ID" Visible="false" style="visibility:hidden;" HeaderText=""/> 
```

这样，您可以将其隐藏并访问其值。

# ruby-on-rails-3 - 将列添加到 Rails 3 应用程序中的模型，用于使用从 heroku 转储的模式的数据库

> ID：13409974
> 
> 赞同：1
> 
> 时间：2012-11-16T03:33:44.440
> 
> 标签：ruby-on-rails-3, postgresql, heroku, model, dump

在我的 rails 应用程序中，我有一个模型`Events`。它有几个列是通过遵循本指南[https://devcenter.heroku.com/articles/export-from-heroku-postgres](https://devcenter.heroku.com/articles/export-from-heroku-postgres)创建的，然后执行`rake db:schema:dump`.

现在我想在`Event`模型中添加一些新列。我尝试编辑`schema.rb`并重新启动应用程序，但这似乎不起作用。有人知道正确的方法吗？

- - 编辑 - - - -

具体来说，我将此行添加`Event`到`schema.rb`.

```
t.datetime "date_time" 
```

当我单击链接以在 rails 应用程序中添加事件时，我收到此错误：

```
undefined method `date_time' for #<Event:0x007fdb59a87118> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:55:07.050

该`schema.rb`文件是数据库模式当前状态的表示，它是由数据库迁移过程写入的，而不是*读取**的*。

如果要添加新列，请[创建迁移](http://guides.rubyonrails.org/migrations.html#creating-a-standalone-migration)：

```
$ rails generate migration AddNewEventStuff
$ vim db/migrate/add_new_event_stuff*.rb 
```

然后添加您的列：

```
class AddNewEventStuff < ActiveRecord::Migration
  def change
    add_column ...
  end
end 
```

除了 之外的所有东西都`add_column`应该已经存在了。完成迁移后，执行 a`rake db:migrate`即可。现在你应该看到你的`schema.rb`.

有关更多详细信息和构建迁移的不同方法，请参阅[Ruby on Rails 迁移指南。](http://guides.rubyonrails.org/migrations.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:50:42.903

你应该试试`heroku run rake db:schema:load`。也就是说，这可能是错误的做法。相反，您应该通过迁移对架构进行更改，然后在其`heroku run rake db:migrate`上运行。

# ios - 为什么我不能用 IB 设置 -[UITableView alwaysBounceVertical]？

> ID：13409976
> 
> 赞同：4
> 
> 时间：2012-11-16T03:33:54.323
> 
> 标签：ios, interface-builder

我有一个 UITableView，当表格中没有足够的单元格来保证滚动时，我不想反弹。因此，我设置`-bounces`为 YES 和`-alwaysBounceVertical`NO。

我尝试使用 IB 设置这些属性，使用“Bounces”和“Bounce Vertically”复选框，但似乎无论我在 IB 中将 Bounce Vertically 属性设置为什么，它在运行时始终为 YES。

我宁愿能够用 IB 完全配置它，而不需要用代码设置属性。有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-20T14:31:27.707

在 Interface Builder 中设置“垂直反弹”复选框似乎被破坏了。但是，我发现您可以在 IB 中将 alwaysBounceVertical 设置为“用户定义的运行时属性”，并且它确实有效。

(Xcode 5.0.1 iOS7 SDK)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T06:14:18.193

您无法在界面构建器中做您想做的事。相反，您必须实现这个简单的代码来完成所需的任务。

您需要在 Interface Builder 中将“Bounces”属性设置为 NO 而不是 YES，并将“Bounce Vertically”设置为 YES。要在有更多单元格时启用反弹，您可以使用以下代码：

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        NSInteger iRows = [arraytableData count];

        if(tableView.visibleCells.count < iRows)
        {
            tableView.bounces = YES;
        }
        else
        {
            tableView.bounces = NO;
        }
        return iRows;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-16T05:48:58.680

我在页面加载时遇到同样的问题，它总是垂直反弹 UITableView。经过长时间的搜索，我得到了解决方案。我正在使用 Xib 中的图像制作自定义导航栏，并将 UITableView 放在 UIView 占位符中的 UIImageView 之前。然后我改变了 UITableView 在 UIView 占位符中的位置，下面的代码适用于我`self.tableView.alwaysBounceVertical = NO;`
如果有人遇到这种类型的问题，请仔细检查 UITableView 在占位符中的位置。谢谢

# android - 启动器，必须有权限 android.permission.SET_WALLPAPER_HINTS

> ID：13409977
> 
> 赞同：-5
> 
> 时间：2012-11-16T03:34:00.690
> 
> 标签：android

运行我的qpp时遇到一些错误，我不知道如何解决这个问题，有人能帮我吗？我在虚拟机上运行我的应用程序，并且我已经添加了权限

```
11-14 10:09:06.565: E/AndroidRuntime(402): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.hskj.iphonehome/com.hskj.iphonehome.Launcher}: java.lang.SecurityException: Access denied to process: 402, must have permission android.permission.SETWALLPAPERHINTS
11-14 10:09:06.565: E/AndroidRuntime(402): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1735)
11-14 10:09:06.565: E/AndroidRuntime(402): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1754)
11-14 10:09:06.565: E/AndroidRuntime(402): at android.app.ActivityThread.access$1500(ActivityThread.java:156)
11-14 10:09:06.565: E/AndroidRuntime(402): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1000)
11-14 10:09:06.565: E/AndroidRuntime(402): at android.os.Handler.dispatchMessage(Handler.java:130)
11-14 10:09:06.565: E/AndroidRuntime(402): at android.os.Looper.loop(SourceFile:351)
11-14 10:09:06.565: E/AndroidRuntime(402): at android.app.ActivityThread.main(ActivityThread.java:3821)
11-14 10:09:06.565: E/AndroidRuntime(402): at java.lang.reflect.Method.invokeNative(Native Method)
11-14 10:09:06.565: E/AndroidRuntime(402): at java.lang.reflect.Method.invoke(Method.java:538)
11-14 10:09:06.565: E/AndroidRuntime(402): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:969)
11-14 10:09:06.565: E/AndroidRuntime(402): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:727)
11-14 10:09:06.565: E/AndroidRuntime(402): at dalvik.system.NativeStart.main(Native Method)
11-14 10:09:06.565: E/AndroidRuntime(402): Caused by: java.lang.SecurityException: Access denied to process: 402, must have permission android.permission.SETWALLPAPERHINTS
11-14 10:09:06.565: E/AndroidRuntime(402): at android.os.Parcel.readException(Parcel.java:1353)
11-14 10:09:06.565: E/AndroidRuntime(402): at android.os.Parcel.readException(Parcel.java:1307)
11-14 10:09:06.565: E/AndroidRuntime(402): at android.app.IWallpaperManager$Stub$Proxy.setDimensionHints(IWallpaperManager.java:343)
11-14 10:09:06.565: E/AndroidRuntime(402): at android.app.WallpaperManager.suggestDesiredDimensions(WallpaperManager.java:717)
11-14 10:09:06.565: E/AndroidRuntime(402): at com.hskj.iphonehome.Launcher.setWallpaperDimension(Launcher.java:482)
11-14 10:09:06.565: E/AndroidRuntime(402): at com.hskj.iphonehome.Launcher.onCreate(Launcher.java:322)
11-14 10:09:06.565: E/AndroidRuntime(402): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1082)
11-14 10:09:06.565: E/AndroidRuntime(402): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1699)
11-14 10:09:06.565: E/AndroidRuntime(402): ... 11 more 
```

**编辑：**

这是关键代码：

```
private static final int WALLPAPERSCREENSSPAN = 1;
WallpaperManager wpm = (WallpaperManager) getSystemService(WALLPAPER_SERVICE);
    Display display = getWindowManager().getDefaultDisplay();

    final int width = display.getWidth();
    final int height = display.getHeight();

    wpm.suggestDesiredDimensions(width * WALLPAPER_SCREENS_SPAN, height); 
```

**编辑2：**

我在我的应用程序中添加了权限：

```
<uses-permission android:name="android.permission.SET_WALLPAPER_HINTS"/> 
```

但错误仍然一样。我想知道它是否是由模拟器引起的，但我不确定。有人可以帮我吗？这个问题让我很困扰。

感谢大家对我的问题的关注，我已经解决了这个问题，模拟器有问题，我重置了它，所以它解决了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T03:45:02.620

根据您的堆栈跟踪

```
java.lang.SecurityException: Access denied to process: 402, must have permission android.permission.SETWALLPAPERHINTS 
```

您应该在清单中添加权限。哪个是

```
<uses-permission android:name="android.permission.SET_WALLPAPER_HINTS"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T03:41:41.803

您需要将`SET_WALLPAPER_HINTS`权限添加到清单中：

```
<uses-permission android:name="android.permission.SET_WALLPAPER_HINTS"/> 
```

# php - Wordpress 通过 PHP 基于 URL 参数的不同内容？

> ID：13409978
> 
> 赞同：0
> 
> 时间：2012-11-16T03:34:13.253
> 
> 标签：php, wordpress

我想请求一些关于我真正需要添加到我的网站的插件的帮助：

当用户有我的特殊链接时，我需要：“website.com/?secret=yes”或“website.com/post/?secret=yes”他们会看到我的常规网站，但有秘密内容来显示我的秘密内容我需要添加 if 变量 (secret=yes) 然后在 head 部分添加一些 javascript 脚本并在 body 部分添加 DIV Container。此内容对高级用户很敏感，因此对于普通用户来说，查看源代码肯定是不可能找到的。如果有帮助，我会使用 Wordpress 网站 :)

您的帮助使我的网站变得更好，所以谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T03:53:41.740

在您想要显示秘密内容的 WordPress 模板上，您可以执行**以下操作：**

```
<?php 
  $secret = isset( $_GET[ 'secret' ] ) ? sanitize_text_field( $_GET['secret'] ) : false; 
if( 'yes' === $secret ) : ?>
    <div>
        <p>My secret content</p>
    </div>
<?php endif; ?> 
```

您的用户可以通过附加查询变量 secret=yes 来访问使用包含此代码的模板的帖子/页面的机密内容。

**[http://your-website.com/the-greatest-post-ever/?secret=yes](http://your-website.com/the-greatest-post-ever/?secret=yes)**

我希望这有帮助。:)

# objective-c - 单击 UIAlertview 上的按钮后，iOS 应用程序立即崩溃

> ID：13409981
> 
> 赞同：2
> 
> 时间：2012-11-16T03:34:28.177
> 
> 标签：objective-c, ios

在用户单击 UIAlertview 上的按钮后，我尝试使用电话应用程序拨打号码。手机应用确实打开了，但在单击 UIAlertview 上的按钮后，原始应用立即崩溃。有人知道原因吗？我确实试图确保我发布了应该发布的所有内容。谢谢！下面是代码：

```
-(IBAction)dialButtonPressed:(UIButton *)numberButton
    {
    if ([company isEqualToString:@"Not Found"]==true){
            message = [[UIAlertView alloc] initWithTitle:@"Sorry"
                                                              message:@"No replace number found. Would you like to dial anyway?"
                                                             delegate:self
                                                    cancelButtonTitle:@"No"
                                                    otherButtonTitles:@"Yes", nil];
            message.tag = 0;
            if(phoneLinkString)
            {
                [phoneLinkString release];
                phoneLinkString = nil;
            }
            [message show];
            [message autorelease];
            phoneLinkString = [[NSString stringWithFormat:@"tel:%@",replace]retain];

        }
    }

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
    {
        NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
        [self release];

        message = nil;

        if(message.tag == 0 && buttonIndex == 1){
            NSURL *phoneLinkURL = [NSURL URLWithString:phoneLinkString];
            [[UIApplication sharedApplication] openURL:phoneLinkURL];
        }

- (void)dealloc {
    [phoneNumberString release];
    [phoneNumberLabel release];
    [self release];
    [message release];
    [super dealloc];
} 
```

最新代码

```
 -(IBAction)dialButtonPressed:(UIButton *)numberButton
            {
            if ([company isEqualToString:@"Not Found"]==true){
                    message = [[UIAlertView alloc] initWithTitle:@"Sorry"
                                                                      message:@"No replace number found. Would you like to dial anyway?"
                                                                     delegate:self
                                                            cancelButtonTitle:@"No"
                                                            otherButtonTitles:@"Yes", nil];
                    message.tag = 1;
                    if(phoneLinkString)
                    {
                        [phoneLinkString release];
                        phoneLinkString = nil;
                    }
                    [message show];
                    [message autorelease];
                    phoneLinkString = [[NSString stringWithFormat:@"tel:%@",replace]retain];

                }
        }
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
        {

            if(message.tag == 1 && buttonIndex == 1){

                NSURL *phoneLinkURL = [NSURL URLWithString:phoneLinkString];
                [[UIApplication sharedApplication] openURL:phoneLinkURL];
                message = nil;
            }
        }
- (void)dealloc {
            [phoneNumberString release];
            [phoneNumberLabel release];
            [super dealloc];
        } 
```

但单击 UIAlertview 上的按钮后它仍然崩溃。错误是 0x3beb85b0: ldr r3, [r4, #8] EXC_BAD_ACCESS (code=1, address=0x7269634f) 任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T03:42:03.220

问题可能是您在 if 语句之前将警报设置为 nil。试着把它放在后面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T03:56:53.317

由于此代码，崩溃正在发生。`[self release];`. 当您调用`self` `release`显示警报的视图时，将释放和解除分配，而不是警报视图。这就是崩溃的原因。

您已经在使用`dialButtonPressed:`方法中释放了 alertViews 内存`[message autorelease];`

所以不需要在`clickedButtonAtIndex`. 所以改变方法，如：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
    if(alertView.tag == 0 && buttonIndex == 1)
    {
        NSURL *phoneLinkURL = [NSURL URLWithString:phoneLinkString];
        [[UIApplication sharedApplication] openURL:phoneLinkURL];
    }
    message = nil;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T03:51:48.013

您的崩溃是由于内存管理不善造成的。主要问题是调用`[self release]`。这是一个非常罕见的情况，这是合适的。

另一个问题是您尝试`message.tag`在设置`message`为`nil`. 调用对象的`tag`属性`nil`将始终导致值为 0。

你的 dealloc 方法都是错误的。不要打电话`[self release]`。不要打电话`[message release]`，因为你在展示它时自动释放它。

顺便说一句 - 永远不要使用`tag`0。这是默认值。如果要使用`tag`，请始终使用非零值，以便将值与默认值区分开来。

# javascript - 涵盖数组和类型化数组的 TypeScript 接口

> ID：13409987
> 
> 赞同：3
> 
> 时间：2012-11-16T03:35:44.050
> 
> 标签：javascript, arrays, typescript, typed-arrays

我想使用 TypeScript 来声明带有参数的函数，这些参数可以是常规的 JavaScript 数组，也可以是类型化的数组，但我找不到一个好的方法。我希望这样的界面：

```
interface IArray
{
    length: number;
    [index: number]: number;
}; 
```

让我声明一个函数：

```
declare var vAdd: { (a: IArray, b: IArray): IArray; }; 
```

并以下列任何一种方式使用它：

```
var y;
y = vAdd(new Float32Array([1,2,3]), new Float32Array([1,2,3]));
y = vAdd([1,2,3], new Float32Array([1,2,3]));
y = vAdd(new Float32Array([1,2,3]), new Array(1,2,3)); 
```

...等等。但是，这里只有第一行有效（至少在 TypeScript 操场上）。其他人生成一个错误，指出参数与函数签名不匹配。

通过重载该函数，它可以工作：

```
declare var vAdd: { (a: IArray, b: IArray): IArray;
                    (a: number[], b: IArray): IArray;
                    (a: IArray, b: number[]): IArray; 
                    (a: number[], b: number[]): IArray; }; 
```

但我想知道是否有一种方法可以避免写出 IArray 和 number[] 的所有组合，这对于具有更多参数的函数来说会变得更加乏味。或者我正在尝试做的事情是否有根本性的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:35:02.260

查看[可以为 number[] 定义索引器接口吗？](https://stackoverflow.com/questions/13074851/possible-to-define-indexer-interface-for-number)

当前的 ts 版本中存在一个错误，它不允许索引器接口针对本机对象数组按预期进行编译和工作。

# html - 如何将伪类（活动）附加到

> ID：13409990
> 
> 赞同：0
> 
> 时间：2012-11-16T03:36:13.787
> 
> 标签：html, css

我正在使用伪类来装饰我的 xxx。我的问题是，如何迫使其中一个在一开始就活跃起来。

我有两个 <div>...</div> 如下：

```
<div id="A"></div>
<div id="B"></div> 
```

我已经通过遵循 css 代码来设置它们的样式：

```
#A {
    background: url('/xxx/xxx.png') 0 0 no-repeat;
}
#A:hover {
    background: url('/xxx/xxx_hover.png') 0 0 no-repeat;
}
#A:active {
    background: url('/xxx/xxx_active.png') 0 0 no-repeat;
}

#B {
    background: url('/xxx/xxx.png') 0 0 no-repeat;
}
#B:hover {
    background: url('/xxx/xxx_hover.png') 0 0 no-repeat;
}
#B:active {
    background: url('/xxx/xxx_active.png') 0 0 no-repeat;
} 
```

我想在页面加载后激活 B，我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T03:40:00.773

不确定是否已经有另一种（“更合适”）的方式。但这就是我通常这样做的方式：

```
#A.active,
#A:active {
    background: url('/xxx/xxx_active.png') 0 0 no-repeat;
}

<div id="A" class="active"></div> 
```

这假设您在必要时使用脚本来删除该类。或者，当请求另一个页面时，该类设置在后端的另一个元素上。

# java - SQL 查询在 MySQL 中有效，但在 Eclipse 中无效

> ID：13409992
> 
> 赞同：0
> 
> 时间：2012-11-16T03:36:30.700
> 
> 标签：java, mysql, eclipse

此 SQL 查询：

```
String query = 
    "select userclient.username from twitter_content.userclient " +
    "where userclient.userid = " + 
    "(select follower.followerid from twitter_content.follower where " +
    "follower.followerid = userclient.userid and follower.userid = " +
    userID +
    ")"; 
```

在控制台上打印：

> select userclient.username from twitter_content.userclient where userclient.userid = (select follower.followerid from twitter_content.follower where follower.followerid = userclient.userid and follower.userid = 562570958)

此查询在直接在 MySQL 脚本中运行时有效，但在通过在 Eclipse 中运行的 Java 程序执行时无效。在 Eclipse 中运行时出现此异常：

```
 java.sql.SQLException: Column 'followerid' not found. 
```

我已经有了表 Follower，其中包含列`followerid`。我该如何解决这个问题？

编辑：
UserClient 表有 2 列：用户 ID 和用户名。
Follower 表有 3 列：rowno、userid 和 followerid。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:39:13.537

```
select userclient.username 
from twitter_content.userclient as userclient 
where userclient.userid =
(select follower.followerid 
from twitter_content.follower as follower 
where follower.followerid = userclient.userid and follower.userid = 562570958) 
```

这行得通吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:39:22.780

打印该查询并复制它。然后尝试在 mysql 中运行该查询。

如果它工作正常，则验证与数据库的连接。它可能正在连接到没有带有“followerid”的“Follower”表的旧数据库

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-16T03:44:53.060

看起来你用点而不是逗号

```
select userclient.username from twitter_content.userclient where userclient.userid = (select follower.followerid from twitter_content,follower where follower.followerid = userclient.userid and follower.userid = 562570958) 
```

也不确定为什么子查询 from 子句中有 twitter_content

# c++ - 从键盘输入数据时，如何在 C++ 中按“Enter”键完成输入？

> ID：13409995
> 
> 赞同：1
> 
> 时间：2012-11-16T03:37:22.843
> 
> 标签：c++, cin

问题是，在 C++ 中，我希望从用户那里获取数字并将每个 int 放入一个向量中。所以我写了以下代码：

```
#include <iostream>
#include <vector>
using namespace std;

vector<int> readVals()
{
    vector<int> read;
    int temp;
    cin >> temp;
    while (!cin.fail() && !cin.eof())
        {
            read.push_back(temp);
            cin >> temp;
        }
    return read;
}

void printVals(vector<int> v)
{
    if(v.size() >= 1)
        {
            for (vector<int>::size_type i = 0; i < v.size()-1; i++ )
        {
            cout << v[i] << " ";
            cout << v[v.size()-1] << "\n";
        }
    }
}

int main()
{
    vector<int> a = readVals();
    printVals(a);
    return 0;
} 
```

然后，我编译它以创建一个 a.out 文件。我有一些数字`in1`。当我执行命令时：`a.out < in1`，我得到了我想要的。但是当我希望数据可以由用户输入时，我感到很困惑。用户可以输入一些数字，然后按`Enter`传递数字。但是，我用了`getline()`，失败了。`!="\n"`， 失败的。每次按 时`Enter`，程序似乎仍在等待更多数字而不打印结果。有没有人可以帮助我成功？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T03:42:20.963

您的循环正在等待 cin 处于“失败”状态或文件末尾。按回车键也不行。您可以通过在 windows 上按 CTRL-Z 或在 unix/mac 上按 CTRL-D 来结束输入。这些将“文件结束”字符发送到 cin。或者，将循环条件更改为“侦听”某些特定输入。

# c++ - C++ 使用多个分隔符存储输入文件

> ID：13409996
> 
> 赞同：0
> 
> 时间：2012-11-16T03:37:33.910
> 
> 标签：c++, iostream, delimiter

我有一个包含以下数据的 txt 文件：

```
Point2D, [3, 2]
Line3D, [7, 12, 3], [-9, 13, 68]
Point3D, [1, 3, 8]
Line2D, [5, 7], [3, 8] 
```

我实际上如何通过删除多个分隔符来存储它们，以便我可以提取数据？

我想要的是读入第一行并忽略“，”“[”和“]”，这样我就可以分别存储 Point2D、3 和 2。然后我继续进行第二行，依此类推。

另外，是否可以这样做，例如：

第一行“Point2D, [3, 2]”，当检测到Point2D时，会将3和2存入point2d.x和point2d.y。

对于第二行“Line3D, [7, 12, 3], [-9, 13, 68]”，它将相应地将值存储到 line3d.x,line3d.y,line3d.z 等中。

现在我只能让它忽略'，'。这是我到目前为止所做的：

```
void readData()
{
    string fileName;
    int i=0;
    cout << "Enter file name: ";
    cin >> fileName;
    fstream infile;

    infile.open(fileName.data());
    // This will count the number of lines in the textfile.
    if (! infile.is_open())
    {
        cerr<<"Error : " << fileName.data() <<" is not found"<<endl;
    }

    string line;    
    stringstream field;
    while (getline(infile,line))
    { 
        string f;
        field<<line;
        while (getline(field,f,','))
        {
            recordA.push_back(f);              
        }
        field.clear();
    }
    cout << recordA.size() << " records read in successfully!";
    infile.close(); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:36:54.793

为了让你的生活复杂化，我建议如下：

1.  制作一个读取文本并基于文本创建对象的工厂对象。例如，当读取“Point2D”时，它会创建一个 `Point2D`实例。
2.  在每个类中创建方法来读取自己的数据。例如， `Point2D`将有一个方法来解析“[3,2]”并将 3 分配给第一个纵坐标，将 2 分配给第二个纵坐标。
3.  在工厂中，让对象读取该行的其余部分并从文本行中分配其成员。
4.  如果您使用“从文件加载”方法从公共父对象创建所有对象，则可以让工厂使用指向父对象的“通用”指针调用该方法。

简单。让对象读入自己的数据。

# css - 仅使用 CSS3 在悬停时旋转并在动画后停止？

> ID：13409997
> 
> 赞同：0
> 
> 时间：2012-11-16T03:37:39.043
> 
> 标签：css, animation, rotation, onhover

我遇到过这篇文章// [在悬停时使用 CSS 从图像中滑出文本](https://stackoverflow.com/questions/12712295/slide-out-text-from-an-image-using-css-on-hover)

CSS 工作得很好，除了我希望动画在旋转一次后停止。

这可能吗？如果是这样，我该如何做到这一点？

HTML：

```
@-webkit-keyframes rotate {
    from {
        -webkit-transform: rotate(180deg);
    }
    to { 
        -webkit-transform: rotate(0deg);
    }
}

@-moz-keyframes rotate {
    from {
      -moz-transform: rotate(180deg);
    }
    to { 
        -moz-transform: rotate(0deg);
    }
}

.srch_btn:hover {   
    -webkit-animation-name:            rotate; 
    -webkit-animation-duration:        0.5s; 
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: linear;

    -moz-animation-name:            rotate; 
    -moz-animation-duration:        0.5s; 
    -moz-animation-iteration-count: infinite;
    -moz-animation-timing-function: linear;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:38:58.357

更改`animation-iteration-count: infinite`为`2`。

# blackberry - blackberry java display 选择声音配置文件弹出窗口

> ID：13409999
> 
> 赞同：1
> 
> 时间：2012-11-16T03:37:49.323
> 
> 标签：blackberry, java-me

如何以编程方式显示“选择声音配置文件”弹出窗口？这是当您单击 BlackBerry 主屏幕左上角的声音图标时显示的弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:05:29.123

对于仍在寻找这个的所有人，我已经找到了解决方案。线索是，您需要调用“net_rim_bb_profiles_app”。感谢所有帮助：p。