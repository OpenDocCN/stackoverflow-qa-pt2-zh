# StackOverflow 问答 13417000-13417999

# javascript - 与 Websockets 同步请求

> ID：13417000
> 
> 赞同：19
> 
> 时间：2012-11-16T12:53:19.113
> 
> 标签：javascript, jquery, websocket

我可以在 websockets 上从服务器发送和接收消息。我需要编写一个函数，将数据发送到服务器并等待服务器的响应，然后将其作为函数的结果返回。

发送：

```
ws.send('my_message_to_server'); 
```

接收（这是一个事件）：

```
ws.bind('message', function(message) {
console.log(message);
}); 
```

我的功能：

```
function request(message){
ws.send(message);
    //How wait for receive???
    return response;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-06-10T15:36:41.883

前段时间我在一些在线游戏中使用了一种巧妙的方法，但是您还需要在服务器端进行更改！

第一个函数发送数据

```
var socketQueueId = 0;
var socketQueue = {};

function sendData(data, onReturnFunction){
    socketQueueId++;
    if (typeof(returnFunc) == 'function'){
        // the 'i_' prefix is a good way to force string indices, believe me you'll want that in case your server side doesn't care and mixes both like PHP might do
        socketQueue['i_'+socketQueueId] = onReturnFunction;
    }
    jsonData = JSON.stringify({'cmd_id':socketQueueId, 'json_data':data});
    try{
        webSocket.send(jsonData);
        console.log('Sent');
    }catch(e){
        console.log('Sending failed ... .disconnected failed');
    }
} 
```

然后在服务器端，在处理请求时，您应该将 cmd_id 与响应一起发送回客户端

```
webSocket.onmessage = function(e) {

    try{
        data = JSON.parse(e.data);
    }catch(er){
        console.log('socket parse error: '+e.data);
    }

    if (typeof(data['cmd_id']) != 'undefined' && typeof(socketQueue['i_'+data['cmd_id']]) == 'function'){
        execFunc = socketQueue['i_'+data['cmd_id']];
        execFunc(data['result']);
        delete socketQueue['i_'+data['cmd_id']]; // to free up memory.. and it is IMPORTANT thanks  Le Droid for the reminder
        return;
    }else{
        socketRecieveData(e.data);
    }
} 
```

并创建一个函数来处理所有其他类型的返回：

```
socketRecieveData(data){
    //whatever processing you might need
} 
```

所以现在只要你想为服务器发送一些数据并等待你简单的特定数据的响应：

```
sendData('man whats 1+1', function(data){console.log('server response:');console.log(data);}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T14:00:45.087

当你创建一个 websocket 时，你通常会在 socket 中添加一个 onmessage 回调函数，每当客户端从服务器接收到数据时就会调用这个回调函数。

```
 var socket = new WebSocket("ws://example.com:8000/websocketapp.php");  
 socket.onmessage = function(msg){
      alert('The server says: ' + msg);
 } 
```

在服务器响应之前阻塞的函数在概念上是一个坏主意，因为这意味着脚本执行将挂起，直到服务器的响应到来。当服务器繁忙且网络延迟很高时，这可能需要几秒钟。出于这个原因，最好使用回调函数（事件发生时调用的函数）。

当您可以保证一次只向服务器发送一个请求时，您只需将 socket.onmessage 函数更改为处理服务器响应并对其进行操作的函数：

```
 socket.onopen = function() {
    socket.send("What's your name?");
    socket.onmessage = function(message) {
        alert("The server says its name is " + message); 
        socket.send("What is the answer to life, the universe and everything?");
        socket.onmessage = function(msg){
             alert("The server says the answer is: " + msg);
        }
     }
 } 
```

（顺便说一句：为了更好的可读性，我在设置回复处理程序之前编写了请求。最好反过来：先设置回复处理程序，然后发送请求。这对于不太可能但并非不可能的情况很重要服务器响应如此之快以至于尚未设置处理程序的情况）。

但是当您有多个并行请求并且您需要找出服务器所指的请求时，您将需要更好的东西。例如，您可以有一个 onmessage 函数来识别消息，然后将每条消息转发到专门的消息处理函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T01:22:00.010

WebSocket 就像 TCP，只是一个传输层。你需要的是在 webSocket 之上运行一个协议。该协议负责为您创建消息之间的关联。您可能想看看 AMQP，它是用于实时异步消息传递的最广泛和最完整的开放协议。有关简单的 AMQP 客户端 JS 库，请参见例如[https://github.com/dansimpson/amqp-js](https://github.com/dansimpson/amqp-js)。

我不知道您使用的是哪种类型的服务器，但 AMQP 将为您提供最大的灵活性，因为在许多平台上都支持 AMQP。还有简单的 AMQP 消息代理实现。如果您的服务器是 Java，那么您将需要查看 JMS。在这种情况下，您将需要一个更精细但更强大的 JMS 代理。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T14:27:30.947

您应该在 WebSockets 之上使用某种 RPC 协议。我建议你看看[WAMP](http://wamp.ws/)，它是一个添加 RPC 和 PUB/SUB 语义的 WebSocket 子协议。它包括一个客户端库，通过为您提供基于承诺的 API，在一定程度上抽象了异步连接。

这是一个例子：

```
var wsuri = "ws://localhost:9000";

ab.connect(wsuri, function (session) {
    session.call("http://example.com/simple/calc#add", 23, 7).then(
        function (res) {
            console.log("got result: " + res);
        },
        function (error, desc) {
            console.log("error: " + desc);
        }
    );
}); 
```

为此，有许多服务器端实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-20T21:07:18.650

我认为项目[WebSockets-Callback](https://github.com/aidv/websockets-callback)会更容易使用

```
wscb.send({cmd: 'Hello server!'},
    function(response){
        //do something...
    }
) 
```

# java - 从文件中读取？

> ID：13417005
> 
> 赞同：0
> 
> 时间：2012-11-16T12:53:34.020
> 
> 标签：java, servlets

请帮我做这样的事情，假设我们有一个文本文件**test.txt**，与此类似：

```
hello hello hello
<link1>http://stackoverflow.com<link1> 
```

第一行文本，第二个链接包含在`<link1>`. 我正在打印文件的内容，如下所示：

```
 if(myName.equals(name)){

                        InputStreamReader reader  = null;
                        try{

                            File file =  new File("C:\\Users\\ваня\\Desktop\\asksearch\\" + list[i]);

                            reader =  new InputStreamReader(new FileInputStream(file), "UTF-8");

                            int b;

                            PrintWriter wr =   response.getWriter();
                            wr.print("<html>");
                            wr.print("<head>");
                            wr.print("<title>HelloWorld</title>");
                            wr.print("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">");
                            wr.print("<body>");
                            wr.write("<div>");
                            while((b = reader.read()) != -1) {
                                wr.write((char) b );
                            }
                            wr.write("</div>");
                            wr.write("<hr>");
                            wr.print("</body>");
                            wr.print("</html>");
                            wr.close();

                        } 
```

只是一段代码：

```
while((b = reader.read()) != -1) {
   writer.write((char) b);
} 
```

你要显示，文件本身的第一行，和文件的第二行分别

```
PrintWriter writer = response.getWriter();
writer.print("<html>");
writer.print("<head>");
writer.print("<title>HelloWorld</title>");
writer.print("<body>");
writer.write("<div>");
// then the first line
writer.write("</div>");
writer.write("<div>");
// then the second line
writer.write("</div>");
writer.print("</body>");
writer.print("</html>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:25:05.007

`BufferedReader`为您的文件创建一个：

```
File file = new File("test.txt");
BufferedReader br =  new BufferedReader(new InputStreamReader(
                         new FileInputStream(file), "UTF8")); 
```

使用`readLine`方法读取单行（第一行）：

```
PrintWriter writer = response.getWriter();
writer.print("<html>");
writer.print("<head>");
writer.print("<title>HelloWorld</title>");
writer.print("<body>");
writer.write("<div>");
// here to display the text
writer.write(br.readLine());//this will read the first line
writer.write("</div>");

//And for the second line 

writer.write("<div>");
// here to display the text
writer.write(br.readLine());//this will read the next line i.e. second line
writer.write("</div>");
writer.print("</body>");
writer.print("</html>"); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:30:50.817

我建议不要将 InputStreamReader 作为一种编程类型，您将使用它的方法，并改用 Scanner 或 BufferedReader ......其中的每一个都有一次读取一行的方法：

```
Scanner in = new Scanner(file);
String line = in.nextLine(); 
```

或者

```
BufferedReader in = new BufferedReader(new FileReader(file));
String line = in.readLine(); 
```

# jquery - 如何使用 jquery 对所选选项的值求和？

> ID：13417011
> 
> 赞同：5
> 
> 时间：2012-11-16T12:53:56.177
> 
> 标签：jquery, select, sum, option

您好，我有 3 个选择器，所有选择器都有一些带有一些值的选项，如何对所选选项的所有值求和？

```
<select name='anch1'>
 <option value='10'>10 ++</option>
 <option value='20'>20 ++</option>
 <option value='30'>30 ++</option>
 <option value='40'>40 ++</option>
 <option value='50'>50 ++</option>
</select>

<select name='anch2'>
 <option value='10'>10 ++</option>
 <option value='20'>20 ++</option>
 <option value='30'>30 ++</option>
 <option value='40'>40 ++</option>
 <option value='50'>50 ++</option>
</select>

<select name='anch3'>
 <option value='10'>10 ++</option>
 <option value='20'>20 ++</option>
 <option value='30'>30 ++</option>
 <option value='40'>40 ++</option>
 <option value='50'>50 ++</option>
</select>

<div>SUM OF SELECTED OPTIONS</div> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-16T12:56:28.950

```
$('select').change(function(){
    var sum = 0;
    $('select :selected').each(function() {
        sum += Number($(this).val());
    });
     $("#sum").html(sum);
}); 
```

[http://jsfiddle.net/8mnQR/1/](http://jsfiddle.net/8mnQR/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:59:01.453

```
 var sum =  parseInt($('select[name="anch1"]').val()) +parseInt($('select[name="anch2"]').val()) +parseInt($('select[name="anch3"]').val() ) 
```

你可以这样做

# r - 时间总和对象

> ID：13417013
> 
> 赞同：1
> 
> 时间：2012-11-16T12:53:58.107
> 
> 标签：r, sum, chron

我刚刚遇到了一个问题，我想在时间对象中添加时间，但是标准的东西（`colSums`, `sum`, `rowSums`）不起作用。

所以我有

```
time<-c("00:00:01", "01:02:00", "09:30:01", "14:15:25")
library(chron)
x <- chron(times=time)

x
[1] 00:00:01 01:02:00 09:30:01 14:15:25 
```

我现在怎样才能把所有时间都加起来`x`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T13:00:32.573

`sum(x)`很适合我

```
sum(x)
Time in days:
[1] 1.032951 
```

# .net - 在 LINQ to Objects 中，myCollection.Cast ().First() 将转换整个集合还是仅转换第一个元素？

> ID：13417016
> 
> 赞同：1
> 
> 时间：2012-11-16T12:54:07.427
> 
> 标签：.net, linq-to-objects

我想知道该`Cast()`操作是对整个`IEnumerable<T>`还是仅对过滤部分或它执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:56:57.880

Linq 操作被延迟，只有第一个元素将被强制转换然后返回。

你可以自己试试：

```
object[] objects = new object[] { 123, "string" };
objects.Cast<int>().First(); 
```

# log4j - 配置 log4j xml 文件以在我的 java 应用程序中遇到错误时发送电子邮件

> ID：13417017
> 
> 赞同：1
> 
> 时间：2012-11-16T12:54:08.217
> 
> 标签：log4j

我已将 log4j xml 配置为在我的应用程序中遇到错误时发送电子邮件，但我仍然无法收到任何邮件。如果我必须执行此配置以外的其他操作，请您建议我。以下是配置完成在电子邮件的 xml 文件中

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="true">
<appender name="XMPAYROLAppender"
        class="org.apache.log4j.DailyRollingFileAppender">
        <param name="File" value="log/XMPAYROLLogger.log" />
        <param name="datePattern" value="'.'yyyy-MM-dd" />
        <param name="append" value="true" />
        <param name="Encoding" value="UTF-8" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d [%t] %-5p %C{1} - %m%n" />
        </layout>
</appender>
<appender name="AdministratorEmail" class="org.apache.log4j.net.SMTPAppender">
  <param name="BufferSize" value="1024" />
  <param name="SMTPHost" value="smtp.gmail.com" />
  <param name="From" value="kiran98373@gmail.com" />
  <param name="To" value="kiran98373@gmail.com.com" />
  <param name="Subject" value="test mail" />
  <layout class="org.apache.log4j.PatternLayout">
    <param name="ConversionPattern"
      value="[%d{ISO8601}]%n%n%-5p%n%n%c%n%n%m%n%n" />
  </layout>
  <filter class="org.apache.log4j.varia.LevelRangeFilter">
    <param name="LevelMin" value="error" />
    <param name="LevelMax" value="fatal" />
  </filter>
</appender>

<logger name="XMPAYROLLogger" additivity="true">
        <level class="org.apache.log4j.Level" value="INFO" />
        <appender-ref ref="XMPAYROLAppender" />
</logger>
</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:53:03.223

嗯，有几件事。

首先，您的“收件人”地址是`kiran98373@gmail.com.com`. 那是你真正的目的地地址吗？`.com.com`? 好的。

其次，您使用 Google 的 SMTP 服务器发送电子邮件，无需额外配置。您将需要比这更多的配置。这一次，Google 不接受标准 SMTP 端口上的任何内容。他们还需要（我对此很有信心）SSL 连接。

默认的 SMTP 配置不会执行。要确切了解您的问题是什么，请打开`SMTPDebug`标志：

`<param name="SMTPDebug" value="true" />`

# c++ - 如何在 C++ 中使用运算符 ^

> ID：13417018
> 
> 赞同：2
> 
> 时间：2012-11-16T12:54:12.027
> 
> 标签：c++, c++-cli

我理解在 C 中，运算符 ^ 用于按位 EX-OR。在其中一个 C++ 代码中，我看到了使用此运算符的以下行：

```
 using namespace System::Threading;
 public ref class Expert : public System::Windows::Forms::Form
{
    int i ;
        float a ;

public:
    int count;
    Thread^ th;

     } 
```

这里的 ^ 是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T12:58:16.317

这不是 C++，它是 C++ 的一个变体，名为 C++/CLI，并且是 Microsoft 扩展，用于在 C++ 中创建托管 .NET 应用程序。

像这样使用`^`时确实表示托管指针，即可以被垃圾收集的内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T12:56:32.007

[这是C++/CLI](https://en.wikipedia.org/wiki/C%2B%2B/CLI)中的 .net 引用类型！也就是说，Expert::th 是对`System.Threading.Thread`(or `null`) 实例的引用。您还可以通过它继承自 .net 类的事实来判断它是 C++/CLI。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T12:56:41.320

那不是 C++，那是 C++/CLI。代表“`^`句柄”，就像一个托管指针。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-16T12:57:39.953

您还将在 C++/CX 中看到 ^（“帽子”）符号，它是带有一组扩展的 C++，可帮助支持 Windows 8 (WinRT) 开发。

[http://en.wikipedia.org/wiki/C%2B%2B/CX](http://en.wikipedia.org/wiki/C++/CX)

[http://en.wikipedia.org/wiki/WinRT#C.2B.2B_.28WRL.2C_Component_Extensions.29](http://en.wikipedia.org/wiki/WinRT#C.2B.2B_.28WRL.2C_Component_Extensions.29)

# c# - 如何使用 Windows 凭据从 Silverlight 应用程序中的 ADFS 获取 SAML 令牌

> ID：13417021
> 
> 赞同：1
> 
> 时间：2012-11-16T12:54:28.527
> 
> 标签：c#, silverlight, saml, adfs

我正在尝试使用 silverlight 应用程序实现主动联合。我想从我的 silverlight 应用程序中向 ADFS 请求 SAML 令牌。我不能在 silverlight 应用程序中使用 WSTrustChannel，因为它不允许添加 System.IdentityModel 或 Microsoft.IdentityModel。请帮忙。

# java - 如何在 Visual Basic 中将 Panel 作为卡片布局？（与 Java 相比）

> ID：13417022
> 
> 赞同：0
> 
> 时间：2012-11-16T12:54:35.350
> 
> 标签：java, vb.net, layout, panel

对不起，我在问这种问题。因为我发现 Visual Basic 中的 Panel 给了我不同的待遇，而不仅仅是 Java（环境）给我的。

无论如何，我没有得到任何面板配置来在 Visual Basic 中进行卡片布局处理。真的吗？

如果你混淆了我现在所说的卡片布局（来自 Java），希望这个故事能给你一个清晰的概念：

> 用户有一个面板。此面板包含两页。第一页，计算器页面，下一页是摘要页面。但是这些页面包含在一个表单中。所以用户只是从这个单一的表单从一个页面移动到另一个页面。

我只是想知道如何在VB中制作它。无论如何，制作这种应用程序的解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T14:12:15.380

我认为您正在寻找的是[`TabControl`](http://msdn.microsoft.com/en-us/library/aa984280%28v=vs.71%29.aspx). 在 Visual Studio 中查看工具箱时，请在*“容器”*组中查找它。

希望这可以帮助。

# java - gson反序列化为java中的字符串

> ID：13417030
> 
> 赞同：0
> 
> 时间：2012-11-16T12:55:00.710
> 
> 标签：java, android, serialization, gson

在我的项目中，我使用的是 gson。例如，当我想将我的类中的 json 子对象反序列化为 String 时，我遇到了问题

```
Class X
{
    Object1 x1 // expected json -> '{"param1": "pvalue", "param2":"pvalue"}'
    Object2 x2 //expected json -> '{"param1": "pvalue", "param2":"pvalue"}'
    String x3 //expected json ->'{"param1": "pvalue", "param2":"pvalue"}'
} 
```

Gson 无法反序列化 x3，因为它的内容是 json 对象，但我需要它作为字符串而不是 Java 对象。Class X { Object1 x1 // 预期的 json -> '{"param1": "pvalue", "param2":"pvalue"}' Object2 x2 //预期的 json -> '{"param1": "pvalue", "param2 ":"pvalue"}' String x3 //expected json ->'{"param1": "pvalue", "param2":"pvalue"}' } 如何将 x3 的内容保存在 String 而不是作为目的。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:25:57.190

您可以尝试为 String 注册一个自定义 TypeAdapter 并修复它。

```
GsonBuilder gson = new GsonBuilder();
gson.registerTypeAdapter(String.class, new MyTypeAdapter());

Gson gson = gsonBuilder.create();
.... 
```

[Javadoc](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/TypeAdapter.html) [用户指南](https://sites.google.com/site/gson/gson-user-guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:37:59.510

下面的代码工作得很好。不确定这是否是您尝试解析的 Json 结构。

```
public class Test
{
    public static void main( String[] args )
    {
        Gson gson = new Gson();

        Response response = gson.fromJson( THE_JSON, Response.class );

        System.out.println( response.object1 );
        System.out.println( response.object1 );
        System.out.println( response.stringx );
    }

    class Response
    {
        @SerializedName("Objectx1")
        Objectx object1;

        @SerializedName("Objectx2")
        Objectx object2;

        @SerializedName("Stringx")
        String stringx;

        class Objectx
        {
            @SerializedName("param1")
            String param1;

            @SerializedName("param2")
            String param2;
        }
    }
} 
```

THE_JSON 是：

```
{
    "Objectx1": {
        "param1": "value1",
        "param2": "value2"
    },
    "Objectx2": {
        "param1": "value3",
        "param2": "value4"
    },
    "Stringx": '{
        "param3": "value3",
        "param4": "value4"
    }'
} 
```

请注意围绕 Stringx 值的单个引号。

# visual-studio - VS调试器在我的程序崩溃时附加......但不是之前？

> ID：13417032
> 
> 赞同：0
> 
> 时间：2012-11-16T12:55:08.607
> 
> 标签：visual-studio, debugging, visual-studio-debugging

我写了一个程序（嗯，一个由第三方应用程序加载的本机 C++ dll）。

当（唉）它崩溃时，VS 会自动附加到应用程序，为 dll 加载符号并允许我进行事后分析。

但是，如果我尝试在调试器崩溃之前附加它，它不会加载 dll 的符号（当时肯定已加载并运行）。事实上，它甚至没有*尝试*为 dll 加载符号。

怎么会这样？自动调试器附件和手动附件之间的配置可能不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:10:47.480

好的，快速回答。在 VS 附加到进程对话框中，我需要选择“附加到：-> [选择...]”并选中“本机代码”。多哈。

# c# - 使用 c# 在 windows 应用程序中刷新窗体

> ID：13417035
> 
> 赞同：0
> 
> 时间：2012-11-16T12:55:12.130
> 
> 标签：c#, winforms

我再次需要你的帮助。这是过程

1.我有一个带有文本框的表格

2.在 keyDown 事件中按下 F1 时会打开另一个表单。

3.在第二种形式中，我有一个richtextbox。我想编辑tatrichtextbox 并将该值传递给form1 的文本框，同时单击form2 中的按钮。

表格 1 代码：

```
private void Export_Load(object sender, EventArgs e)
    {
        textBox1.Text = "hai hello welcome to chennai";
    }private void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode ==Keys.F1)
        {
            rchbox rch = new rchbox();
            rch.Show();
            rch.richTextBox1.Text = textBox1.Text;
        }
    } 
```

表格 2 代码：

```
public rchbox()
    {
        InitializeComponent();
    }
    Export ex = new Export();
    Class1 c = new Class1();
    private void button1_Click(object sender, EventArgs e)
    {
        c.txt = richTextBox1.Text;
        ex.textBox1.Text = richTextBox1.Text;
        ex.textBox1.Refresh();
        ex.Refresh();
        ex.Invalidate();
       // ex.textBox1.Invalidated();
        this.Close();

    } 
```

我发现form1没有刷新的问题。我什至尝试过调用刷新方法。有谁能告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:57:45.930

您已经创建了一个全新的`Export`表单实例，但您从未展示过它。
您没有更改现有实例。

相反，您需要更改第二种形式以将现有`Export`实例作为构造函数参数。

# java - SimpleFramework XML：具有内部文本和子元素的元素

> ID：13417037
> 
> 赞同：3
> 
> 时间：2012-11-16T12:55:15.207
> 
> 标签：java, simple-framework

我有这种格式的 XML：

```
<element1>
     some inner text
     <child1>11</child1>
     <child2>True</child2>
</element1> 
```

我尝试通过简单的框架将此 XML 映射到对象上：

```
@Element(name = "element1")
public static class Something {

    @Element(required=false)
    public int child1;

    @Element(required=false)
    public boolean child2;

} 
```

我无法更改 XML，我还需要在类中的某个字段上映射“一些内部文本”的值。不幸的是，我不知道该怎么做（如果可能的话）。我尝试了@Text 注释，但它不能与@Element 在一个类中一起使用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T03:51:25.840

编辑：您实际上可以使用 2.6.9 及更高版本执行此操作。使用以下注解，注意`@Text`注解可以与`@ElementListUnion`.

```
@Root
public static class Something {

    @Text 
    @ElementListUnion({
       @ElementList(entry="child1", type=Integer.class, inline=true),
       @ElementList(entry="child2", type=Boolean.class, inline=true)
    })
    public List<Object> values;
} 
```

这只能作为 hack 工作来完成，默认情况下 simple 不支持自由文本，因为它不会一致地映射到对象。这是您可以做到的方法，但它可能不值得，除非这是在 Simple 中运行良好的大型案例文件中的一个特殊案例。

```
package org.simpleframework.xml.convert;

import java.io.StringReader;
import java.lang.reflect.Constructor;
import java.lang.reflect.Field;

import org.simpleframework.xml.Root;
import org.simpleframework.xml.ValidationTestCase;
import org.simpleframework.xml.core.Persister;
import org.simpleframework.xml.stream.InputNode;
import org.simpleframework.xml.stream.NodeBuilder;
import org.simpleframework.xml.stream.OutputNode;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class HackJobToGrabFloatingTextTest extends ValidationTestCase {

   private static final String SOURCE =
   "<element1>\n"+
   "   some inner text\n"+
   "   <child1>11</child1>\n"+
   "   <child2>True</child2>\n" +
   "</element1>";

   private static class SomethingConverter implements Converter<Something> {

      public Something read(InputNode node) throws Exception {
         Object source = node.getSource();
         Element element = (Element)source;
         NodeList elements = element.getChildNodes();
         String child1 = null;
         String child2 = null;
         String text = "";
         for(int i = 0; i < elements.getLength(); i++) {
            Node next = elements.item(i);
            if(next.getNodeType() == Node.TEXT_NODE) {
               text += next.getNodeValue();
            }
            if(next.getNodeType() == Node.ELEMENT_NODE) {
               if(next.getNodeName().equals("child1")) {
                  child1 = next.getTextContent();
               }
               if(next.getNodeName().equals("child2")) {
                  child2 = next.getTextContent();
               }
            }
         }
         return new Something(child1, child2, text.trim());
      }

      public void write(OutputNode node, Something car) throws Exception {
         // Free text not supported!!
      }
   }

   @Root(name = "element1")
   @Convert(SomethingConverter.class)
   public static class Something {
       public String child1;
       public String child2;
       public String text;
       public Something(String child1, String child2, String text) {
          this.child1 = child1;
          this.child2 = child2;
          this.text = text;
       }
   }

   public void testHackJob() throws Exception {
      Class<?> type = Class.forName("org.simpleframework.xml.stream.DocumentProvider");
      Constructor<?> constructor = type.getDeclaredConstructor();
      constructor.setAccessible(true);
      Object value = constructor.newInstance();
      Field[] fields = NodeBuilder.class.getDeclaredFields();

      for(Field field : fields) {
         if(field.getName().equalsIgnoreCase("provider")) {
            field.setAccessible(true);
            field.set(null, value);
         }
      }
      StringReader reader = new StringReader(SOURCE);
      InputNode source = NodeBuilder.read(reader);
      AnnotationStrategy strategy = new AnnotationStrategy();
      Persister persister = new Persister(strategy);
      Something something = persister.read(Something.class, source);

      assertNotNull(something);
      assertEquals(something.text, "some inner text");
      assertEquals(something.child1, "11");
      assertEquals(something.child2, "True");
   }
} 
```

# jquery - 在每个输入之间迭代以验证值

> ID：13417038
> 
> 赞同：5
> 
> 时间：2012-11-16T12:55:17.017
> 
> 标签：jquery, forms, validation, each, preventdefault

我有这段代码可以验证输入的值是否为空，并使用 twitter 引导弹出窗口显示消息错误：

```
$(document).on("ready", login_events());

function login_events(){

    $("#userId, #password").on("change", validateEmpty);
    $("#loginButton").on("click", validateAll);

}

function validateEmpty(){

    input = $(this);
    input.popover({animation: true, placement: 'right', trigger: 'manual', title: 'Field is Empty', content: input.attr("data-empty-message")});
    isValid = true;

    if(input.val() === ""){
        input.popover('show');
        isValid =  false;
    }
    else{
        input.popover('hide');
    }

    return isValid;

} 
```

当更改事件完成时，这非常有效，但我想做另一个函数，它将在表单中的每个输入之间进行迭代，验证它是否为空（validateEmpty（））和 preventDefault（如果有）为空。

如您所见，我为#loginButton 设置了单击事件来运行 validateAll 函数，我有类似的东西，但无法找到正确的方法：

```
function validateAll(event){

    $("#loginForm input").each(validateEmpty);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:01:11.177

试试这个关闭：

```
function validateAll(event){
    var isValid = true;
    $("#loginForm input").each(function (){
        input = $(this);
        input.popover({animation: true, placement: 'right', trigger: 'manual', title: 'Field is Empty', content: input.attr("data-empty-message")});
        isValid = true;

        if(input.val() === ""){
            input.popover('show');
            if (isValid)
                isValid = false;
        }
    });
    if (!isValid) {
        alert('form is not valid!');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:54:38.900

谢谢@VMAtm！我替换了 each() 中的函数来运行我已经创建的 validateEmpty 函数。现在工作得很好！

```
function validateAll(event){

  isValid = true;

  $("#loginForm input").each(validateEmpty);

  if(!isValid){
    event.preventDefault(); 
  }
} 
```

# java - 带有 Listview 的 TabActivity 不起作用

> ID：13417050
> 
> 赞同：1
> 
> 时间：2012-11-16T12:56:16.330
> 
> 标签：java, android

当我单击一个选项卡时，您必须链接到另一个类别。问题是它失败了。当我在我的代码中加载 json 时，它不会从我希望它返回到主类的类中加载。

这是我的Java代码：

```
public class Sport extends ExampleActivity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.refresh:     
                loadData();
            break;
        }
        return true;
    }

    public void loadData() {
        Utils.init();

        progressDialog = ProgressDialog.show(Sport.this, getString(R.string.app_name), "Laden...");
        new GetDataTask().execute();
    }

    private void _showMessage(String msg) {
        Toast.makeText(Sport.this, msg, Toast.LENGTH_LONG).show();
    }

    private boolean _hasConnection() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        // test for connection
        if (cm.getActiveNetworkInfo() != null
                && cm.getActiveNetworkInfo().isAvailable()
                && cm.getActiveNetworkInfo().isConnected()) {
            return true;
        } else {
            System.out.println("Internet Connection Not Present");
            return false;
        }
    }

    private class GetDataTask extends AsyncTask<Void, Void, Integer> {

        protected Integer doInBackground(Void... params) {

    Private class GetDataTask extends AsyncTask<Void, Void, Integer> 
    {

    protected Integer doInBackground(Void... params) 
    {
     if(_hasConnection())
     {
    dataList.clear();
    System.out.println("Start loading JSON");
    JSONArray json =JSONFunctions.getJSONfromURL("http://www.example.com/report.phpcategory=sport&image=50x50&limit=40");
    System.out.println("End loading JSON");
    for (int i = 0; i < json.length(); i++) {
    try {
    JSONObject row = json.getJSONObject(i);
    HashMap<String, String> map = new HashMap<String, String>();
    map.put("id", row.getString("id"));
    map.put("title", row.getString("title"));
    map.put("image", row.getString("image"));
    map.put("date", row.getString("date"));
    dataList.add(map);
    } 
    catch (JSONException e) 
    {
    e.printStackTrace();
    }
    }
    System.out.println("End putting in dataList");

And here's is my xml code:

    <?xml version="1.0" encoding="utf-8"?>
        <TabHost xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@android:id/tabhost"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                android:padding="5dp" >

                <TabWidget
                    android:id="@android:id/tabs"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" />

           <ListView
                android:id="@+id/list_view"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >
            </ListView>

                <FrameLayout
                    android:id="@android:id/tabcontent"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:padding="5dp" >

                    <ListView
                        android:id="@+id/listView1"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content" >
                    </ListView>
                </FrameLayout>
            </LinearLayout>

        </TabHost> 
```

# javascript - Javascript/JSON：交换数组中的项目

> ID：13417053
> 
> 赞同：1
> 
> 时间：2012-11-16T12:56:18.973
> 
> 标签：javascript, arrays, json, swap

我对 Javascript 很陌生，想在数组中交换数组的项目。例子：

```
{
    "data": [
        [null, 1353064450],
        [null, 1353064460],
        [null, 1353064470],
        [null, 1353064480],
        [null, 1353064490]
        ],
    "label": "cpu"
} 
```

应该变成：

```
{
    "data": [
        [1353064450, null],
        [1353064460, null],
        [1353064470, null],
        [1353064480, null],
        [1353064490, null]
        ],
    "label": "cpu"
} 
```

我可能必须遍历数组并创建一个新数组？任何指针都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:59:30.183

使用现代 JS，你可以只做`obj.data = obj.data.map(([x, y]) => [y, x])`.

跨浏览器的支持可能不完整，因此您应该使用将其转换为 ES5 的转译器，至少在不久的将来是这样。

**原始答案**：

使用`Array.reverse`方法：

```
var obj = {
    "data": [
        [null, 1353064450],
        [null, 1353064460],
        [null, 1353064470],
        [null, 1353064480],
        [null, 1353064490]
        ],
    "label": "cpu"
};
for(var i=0; i< obj.data.length; i++){
     obj.data[i].reverse();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:14:16.410

*这是一种适用于现代浏览器（例如 IE9 和更高版本）*的有趣方式：

```
response.data.forEach(Function.call.bind([].reverse)); 
```

* * *

或者，如果您经常这样做，您需要一个`.call`方法，其`this`值绑定到一个本身对一个`this`值进行操作的方法*（如上）*，您可以制作一个可重用的`.call`活页夹。

```
var callBind = Function.bind.bind(Function.call);

  // Then use it like this
response.data.forEach(callBind([].reverse)); 
```

# web-crawler - scrapy：定义爬虫设置

> ID：13417064
> 
> 赞同：2
> 
> 时间：2012-11-16T12:56:41.720
> 
> 标签：web-crawler, scrapy

我正在尝试覆盖在脚本中调用的爬虫的一些设置，但这些设置似乎没有生效：

```
from scrapy import log
from scrapy.crawler import CrawlerProcess
from scrapy.utils.project import get_project_settings
from someproject.spiders import SomeSpider

spider = SomeSpider()
overrides = {
    'LOG_ENABLED': True,
    'LOG_STDOUT': True,
}
settings = get_project_settings()
settings.overrides.update(overrides)
log.start()
crawler = CrawlerProcess(settings)
crawler.install()
crawler.configure()
crawler.crawl(spider)
crawler.start() 
```

在蜘蛛中：

```
from scrapy.spider import BaseSpider

class SomeSpider(BaseSpider):

    def __init__(self):
        self.start_urls = [ 'http://somedomain.com' ]

    def parse(self, response):
        print 'some test' # won't print anything
        exit(0) # will normally exit failing the crawler 
```

通过定义`LOG_ENABLED`and `LOG_STDOUT`，我希望在日志中看到“一些测试”字符串。此外，我似乎无法将日志重定向到`LOG_FILE`我尝试过的其他一些设置中。

我一定做错了什么......请帮忙。=D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T02:57:15.513

用于`log.msg('some test')`打印日志

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T01:06:43.307

启动爬虫后可能需要启动 Twisted 的 reactor：

```
from twisted.internet import reactor
#...other imports...

#...setup crawler...
crawler.start()
reactor.run() 
```

相关问题/更多代码：[Scrapy crawl from script always blocks script execution after scraping](https://stackoverflow.com/questions/14777910/scrapy-crawl-from-script-always-blocks-script-execution-after-scraping)

# jquery - jQuery获取容器内加载的图像宽度/高度

> ID：13417066
> 
> 赞同：1
> 
> 时间：2012-11-16T12:56:43.357
> 
> 标签：jquery, css, image

我正在使用一个插件，该插件需要我在加载后获取图像的宽度和高度，而不管图像的尺寸是如何确定的。

```
<img src=".." width="500" height="500" />                <!-- works fine -->
<img src=".." style="width: 500px; height: 500px;" />    <!-- works fine -->
<img src=".." width="500" />                             <!-- only gives me width -->
<img src=".." style="width: 500px;" />                   <!-- only gives me width -->
<img src=".." style="width: 500px; height: auto;" />     <!-- only gives me width -->
<img src=".." />                                         <!-- doesn't work at all --> 
```

我曾尝试加载图像并在之后获取其尺寸，但我只能获得图像的实际大小，而不是它在页面上显示的大小。

我用来获取宽度/高度的代码：

```
img.innerWidth(); 
```

我也试过：

```
$('<img/>').hide().attr('src',img.src).load(function() {
    img.Owidth = $(this).width();
    img.Oheight = $(this).height();
}).appendTo($('body')); 
```

和：

```
$("<img/>").attr("src", img.attr("src")).load(function() {
   img.width = this.width;
   img.height = this.height;
}); 
```

哪个可以很好地让我获得图像的原始大小，而不是加载和显示时的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:02:58.810

**我的解决方案**

```
img.clone().load(function() {
    img.Dwidth = $(this).width();
    img.Dheight = $(this).height();
}).appendTo(img.parent()).hide(); 
```

为了获得显示尺寸，在我的特殊情况下，我必须克隆元素，重新加载它并获取尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:10:54.920

您应该使用 jQuery`width`或`height`进行计算，并且如果该项目可见，您总是得到 0。如果您更新下面的代码，它应该可以工作。

```
$('<img/>').attr('src',img.src).load(function() {
    img.Owidth = $(this).width();
    img.Oheight = $(this).height();
}).appendTo($('body')).hide(); 
```

如您所见，如果您在第二个块中使用了 $(this).width() 而不是 this.width 它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T13:42:34.260

当您使用 $(window).load 函数加载脚本时，您将从图像中获取大小。

```
 $(window).load(function(){
    console.log($('img').width());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-12T06:52:06.227

```
var getheight = function () {
var img = document.getElementById("pic");
var img_width = img.clientWidth;
} 
```

图片加载完成后调用此函数。clientWidth 属性将在加载后为您提供图像大小

# https - SockJS 在 IE9 上遇到问题

> ID：13417069
> 
> 赞同：3
> 
> 时间：2012-11-16T12:56:53.887
> 
> 标签：https, internet-explorer-9, tornado, sockjs

我在这里看到了类似失败的报告：[https](https://groups.google.com/forum/?fromgroups=#!topic/sockjs/QNtA1_p_arU) ://groups.google.com/forum/?fromgroups=#!topic/sockjs/QNtA1_p_arU ，但我的问题似乎有所不同。

我的设置：客户端连接到`https://www.mysite.com/sockjs`SockJS，实际页面在`https://www.mysite.com/blah/blah/blah`. 页面上的所有外部元素（例如 css 和 js）都使用**https**提供，包括 SockJS-Client（https://d1fxtkz8shb9d2.cloudfront.net/sockjs-0.3.js，最新版本应该是 0.3.4）。后端是用 SockJS-Tornado 制作的。

**问题 1**：我指定使用以下协议：

```
var options = {protocols_whitelist: ["websocket", "xhr-streaming", "xdr-streaming", "xhr-polling", "xdr-polling", "iframe-htmlfile", "iframe-eventsource", "iframe-xhr-polling"], debug: true};             
conn = new SockJS("https://www.mysite.com/sockjs", options); 
```

但是，似乎 IE9 只是使用了最差协议`iframe-htmlfile`，正如我在服务器日志中看到的那样：

```
INFO:root:200 GET /sockjs/info?t=1353062888578 (127.0.0.1) 0.51ms
INFO:root:200 GET /sockjs/iframe.html (127.0.0.1) 22.21ms 
```

为什么不使用`xdr-streaming`or `xdr-polling`？在 SockJS 文档中，它在 'IE8, 9 (cookies=no)' 下标记了这两个协议，这是否意味着 SockJS 只会在浏览器禁用 cookie 时使用它们？

**问题 2**：使用协议`iframe-htmlfile`时，用户会在页面上收到`'Only Secure Content is Displayed'`警告，表明存在混合内容问题。但是，没有其他经过测试的浏览器报告此警告（例如 Chrome、FireFox、Safari），并且如前所述，页面上的每个外部资源都是通过 https 提供的。为什么是这样？它与使用的这个特定协议有关`iframe-htmlfile`吗？

同时，SockJS 很难连接到服务器并发送消息。这是我在服务器日志中看到的：

```
INFO:root:200 GET /sockjs/info?t=1353062888578 (127.0.0.1) 0.51ms
INFO:root:200 GET /sockjs/iframe.html (127.0.0.1) 22.21ms
INFO:root:200 GET /sockjs/info?t=1353062922712 (127.0.0.1) 0.39ms
connection openned for: 127.0.0.1
INFO:root:200 GET /sockjs/info?t=1353062963868 (127.0.0.1) 0.36ms
WARNING:root:Read error on 12: [Errno 104] Connection reset by peer
WARNING:root:error on read
Traceback (most recent call last):
  File "/home/ml/envs/.virtualenvs/sockapp/local/lib/python2.7/site-packages/tornado/iostream.py", line 355, in _handle_read
    if self._read_to_buffer() == 0:
  File "/home/ml/envs/.virtualenvs/sockapp/local/lib/python2.7/site-packages/tornado/iostream.py", line 422, in _read_to_buffer
    chunk = self._read_from_socket()
  File "/home/ml/envs/.virtualenvs/sockapp/local/lib/python2.7/site-packages/tornado/iostream.py", line 403, in _read_from_socket
    chunk = self.socket.recv(self.read_chunk_size)
error: [Errno 104] Connection reset by peer
subject disconnection from: None
Message handled in: 0 ms
INFO:root:200 GET /sockjs/369/rpf1d1vl/htmlfile?c=_jp.aepnvri (127.0.0.1) 60006.30ms 
```

最后一个错误似乎是超时。当我关闭 IE9 中的警告对话框时，连接似乎打开了，但之后没有从浏览器接收到消息（浏览器应在连接打开后立即发送消息）。我想知道这是否与之前的混合内容警告有关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T14:11:15.787

我认为我们能够在 SockJS 邮件列表中发现您的问题。快速回顾：

**问题 1** - 您的服务器要求客户端仅使用执行 cookie 的传输（出于负载平衡原因），这意味着无法使用基于 XDR 的传输（XDR 无法执行 cookie）。

**问题 2** - 您忘记`sockjs_url`在服务器端设置参数，包括来自 https（而不是 http）的 sockjs javascript。这就是您收到混合内容警告的原因。

# ruby-on-rails - Neo4j/Rails 3.2.8 & Jruby 1.6.7.2：首次构建

> ID：13417072
> 
> 赞同：0
> 
> 时间：2012-11-16T12:56:59.097
> 
> 标签：ruby-on-rails, jruby, neo4j

我正在尝试在 Rails 和 jRuby 上构建我的第一个 Neo4j 应用程序。这是我的宝石文件...

[https://gist.github.com/4087134](https://gist.github.com/4087134)

当我捆绑我得到这个错误：在 git://github.com/andreasronge/neo4j.git (at master) 中找不到 gem 'neo4j (>= 0) ruby​​'。源包含“neo4j”，位于：2.2.0

不知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:47:40.410

看起来 Bundler 没有使用 jruby ...它正在寻找“neo4j (>= 0) ruby​​”。当我忘记将 RVM 切换到 jruby 时，就会发生这种情况。如果你不使用 RVM，你可以使用 bundler 上的 --shebang 选项来使用 jruby。喜欢： bundle --shebang which jruby

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T05:06:26.210

如果您使用 Bundler 来管理 gem，请务必`bundle`使用`jruby -S bundle exec`. 我的猜测是你正在运行`bundle`你的`$PATH`，它根本不调用`jruby`。

# sharepoint - 为文件创建修订历史

> ID：13417078
> 
> 赞同：1
> 
> 时间：2012-11-16T12:57:13.433
> 
> 标签：sharepoint

我的计算机上有 5 个不同的文件，现在我想将它们上传到 Sharepoint，为 Sharepoint 中的同一条目创建 5 个不同的修订。

我怎么做？

所以标题是文件v1.doc，文件v2.doc，...文件v5.doc

它们应该成为同一文件的 5 个不同版本。

Lotus Notes Domino 允许您签入任何文件并使其成为新版本。但 Sharepoint 对此持怀疑态度，并坚持认为所有版本都具有相同的文件名。有没有办法愚弄它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:59:30.103

您是否尝试以编程方式进行操作？

如果是，那么当您将文件上传到 sharepoint 服务器时，您应该首先将其重命名为您要创建 vesioning 的名称。

之后，当您上传文件时，它将作为较新的版本上传，然后是较新的文件。

希望这可以帮助。

# ajax - 如何在 Ajax 中获取数据时加载图像微调器

> ID：13417081
> 
> 赞同：0
> 
> 时间：2012-11-16T12:57:21.893
> 
> 标签：ajax

我从这个网站得到了很好的回应。现在我的最后一件事是在 Ajax 中获取数据时显示 gif 加载图像..

我的代码是：

```
function vote(id)
{ 

    var result = new Array();
    document.getElementById('sub-cat').innerHTML = ajax_image; 
     result = $.ajax({
                       type: "POST",
                       url: "ajax.php",
                       data: "id="+id,
                       async: false
               }).responseText.split("^");
document.getElementById('sub-cat').innerHTML = result[0];
document.getElementById('sub-cat1').innerHTML = result[1];

//window.location.reload()
} 
```

我试过下面的代码，但没有工作...... :(

```
function vote(id)
{ 
    var ajax_image = "<img src='_assets/images/tire-loader.gif' alt='Loading...' />";

    var result = new Array();
     //$('#sub-cat').html(ajax_image);
    document.getElementById('sub-cat').innerHTML = ajax_image; 
     result = $.ajax({
                       type: "POST",
                       url: "ajax.php",
                       data: "id="+id,
                       async: false
               }).responseText.split("^");
document.getElementById('sub-cat').innerHTML = result[0];
document.getElementById('sub-cat1').innerHTML = result[1];

//window.location.reload()
} 
```

真的很感谢你的辛勤工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:42:56.397

```
There are some callbacks in ajax request, beforeSend,success,complete,error etc... So you just have you show the image in beforeSend callback and hide it in complete callback.
$.ajax({
       type: "POST",
       url: "ajax.php",
       data: "id="+id,
       async: false,
       beforeSend: function(){
         document.getElementById('sub-cat').innerHTML = ajax_image;
       },
       complete: function(){
         document.getElementById('sub-cat').innerHTML = "";
       }
          }).responseText.split("^");
    document.getElementById('sub-cat').innerHTML = result[0];
    document.getElementById('sub-cat1').innerHTML = result[1];

    }); 
```

# javascript - history.back() 第一次不保留值

> ID：13417082
> 
> 赞同：0
> 
> 时间：2012-11-16T12:57:25.780
> 
> 标签：javascript

我有一个返回按钮，可以返回带有表单的请求页面。我面临的问题是第一次（删除浏览器历史记录后）单击后退按钮时值不会保留在表单中，但单击浏览器中的后退按钮会保留值。goback 按钮适用于所有后续点击。我试过 history.back() 和 history.go(-1) 我想你误解了我的问题。我的意思是在删除浏览器历史记录后重新运行应用程序，以确保它们不是从早期的表单数据中加载的。删除历史记录->输入表单->执行->结果页面->单击返回->表单为空->再次执行->单击返回->表单中存在的值

# php - PHP 内联写入对象

> ID：13417092
> 
> 赞同：14
> 
> 时间：2012-11-16T12:57:45.030
> 
> 标签：php, javascript, arrays, object, syntax

我开始放弃在 PHP 中使用数组，因为对象更加整洁，并且在 php 5 中使用对象时没有性能影响。

目前我这样做的方式是：

`$object = (object) array('this' => 'that', 'foo' => (object) array('bar' => 123));`

但是，我发现每次都必须进行类型转换非常乏味，因为类型转换不是递归的......

php（或将有）有什么方法可以这样做或类似的东西：

```
$object = {
    'this' => 'that',
    'foo' => {
        'bar' => 123
    }
}; 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2016-03-22T15:29:25.413

从 PHP 5.4 开始，短数组语法变得可用。这允许您像这样初始化数组：

```
$myArray = ["propertyA" => 1, "propertyB" => 2]; 
```

自 PHP7 起，PHP 中目前没有短对象语法。但是你可以转换短数组语法来创建像这样的对象：

```
$myObject = (object) ["propertyA" => 1, "propertyB" => 2]; 
```

看起来比使用以下构造更好更短：

```
$myObject = new \StdClass();
$myObject->propertyA = 1;
$myObject->propertyB = 2; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T13:10:08.477

我建议您构建一个函数宽度[StdClass](http://www.richardcastera.com/blog/php-convert-array-to-object-with-stdclass)。

```
function arrayToObject($array) {
    if(!is_array($array)) {
        return $array;
    }

    $object = new stdClass();
    if (is_array($array) && count($array) > 0) {
      foreach ($array as $name=>$value) {
         $name = strtolower(trim($name));
         if (!empty($name)) {
            $object->$name = arrayToObject($value);
         }
      }
      return $object;
    }
    else {
      return FALSE;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T13:43:38.803

PHP 当前不支持短对象语法。从 PHP 5.4 开始，它们支持短数组语法。也许 5.5 将包括你所追求的。

作为备选：

您可以将对象制作为 JSON 并使用`json_decode()`：

```
$json = '{"this": "that", "foo": {"bar": 123}}';
var_dump(json_decode($json)); 
```

**注意：**我只是将其作为解决您问题的方法的演示。我不提倡这样的做法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-10T17:03:50.300

当您收到已构建的数组时，我有一个替代解决方案。假设您的数组有 n 个嵌套数组，因此您没有机会以简单的方式转换每个数组。这可以解决问题：

```
$object = json_decode(json_encode($unknownArray)); 
```

我不会在大循环或类似的东西中使用它，因为它比坚持使用数组 sintax 并使用它要慢得多。此外，如果数组的元素是一个函数或其他一些有趣的东西，这会破坏它。

示例用法：

```
$unknownArray = array(
    'a' => '1',
    'b' => '2',
    'c' => '3',
    'd' => array(
        'x' => '7',
        'y' => '8',
        'z' => '9',
    ),
);
$object = json_decode(json_encode($unknownArray));
echo $object->d->x; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T13:29:02.350

虽然老实说我不明白你为什么要这样做（*关联数组本质上是仅数据对象*）但如果你坚持：
你可以使用而不是在每个级别上将每个数组转换为对象以下*“技巧/黑客”*：

```
$object = json_decode(
              json_encode(
                   array('some'=>array('multi'=>'Dimensional'),
                         'array'=>'that',
                         'you' => array('want' => 'to',
                                        'turn' => 'into'),
                         'an' => 'object'))); 
```

这会将所有数组转换为 的实例`stdClass`，我相信这是您想要的。
再说一次，我不得不说：PHP*不是*JavaScript，而且对象在 PHP 等语言中要贵得多（相对而言），然后它们在 JS 中。如果您不需要对象，我强烈建议您坚持使用 assoc 数组。

像对象一样，数组可以被*类型提示*：`function foo (array $argument){}`
如果你真的想把它们变成某个类的特定实例，为什么不改变*构造函数*来处理数组：

```
class My_Object extends stdClass
{
    public function __construct(array $params = null)
    {
        if (!empty($params))
        {
            foreach ($params as $name => $value)
            {
                $this->{$name} = $value;//set everything
            }
        }
    }
} 
```

然后继续添加您想要添加到批次中的任何方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T13:11:39.070

不幸的是，没有创建`stdClass`这样的实例的语法。但是你可以使用`new`关键字和任何 spl 类（我承认不是更整洁）。如果你想优化击键，你可以写一个像这样的小辅助函数：

```
function O($a){
    return new ArrayObject($a); // has -> and [] support too
} 
```

和写

```
$stuff = O(array('a' => 'tickle me elmo', 'b' => O(array('foo' => 'bar')))); 
```

# sockets - 如何在 Go 中停止监听服务器

> ID：13417095
> 
> 赞同：22
> 
> 时间：2012-11-16T12:57:53.633
> 
> 标签：sockets, networking, go, listen

我一直在尝试找到一种方法来优雅地停止 Go 中的侦听服务器。因为`listen.Accept`阻塞，有必要关闭侦听套接字以发出结束信号，但我无法将该错误与任何其他错误区分开来，因为相关错误未导出。

我能做得比这更好吗？请参阅`FIXME`下面的代码`serve()`

```
package main

import (
    "io"
    "log"
    "net"
    "time"
)

// Echo server struct
type EchoServer struct {
    listen net.Listener
    done   chan bool
}

// Respond to incoming connection
//
// Write the address connected to then echo
func (es *EchoServer) respond(remote *net.TCPConn) {
    defer remote.Close()
    _, err := io.Copy(remote, remote)
    if err != nil {
        log.Printf("Error: %s", err)
    }
}

// Listen for incoming connections
func (es *EchoServer) serve() {
    for {
        conn, err := es.listen.Accept()
        // FIXME I'd like to detect "use of closed network connection" here
        // FIXME but it isn't exported from net
        if err != nil {
            log.Printf("Accept failed: %v", err)
            break
        }
        go es.respond(conn.(*net.TCPConn))
    }
    es.done <- true
}

// Stop the server by closing the listening listen
func (es *EchoServer) stop() {
    es.listen.Close()
    <-es.done
}

// Make a new echo server
func NewEchoServer(address string) *EchoServer {
    listen, err := net.Listen("tcp", address)
    if err != nil {
        log.Fatalf("Failed to open listening socket: %s", err)
    }
    es := &EchoServer{
        listen: listen,
        done:   make(chan bool),
    }
    go es.serve()
    return es
}

// Main
func main() {
    log.Println("Starting echo server")
    es := NewEchoServer("127.0.0.1:18081")
    // Run the server for 1 second
    time.Sleep(1 * time.Second)
    // Close the server
    log.Println("Stopping echo server")
    es.stop()
} 
```

这打印

```
2012/11/16 12:53:35 Starting echo server
2012/11/16 12:53:36 Stopping echo server
2012/11/16 12:53:36 Accept failed: accept tcp 127.0.0.1:18081: use of closed network connection 
```

我想隐藏`Accept failed`消息，但显然我不想掩盖其他`Accept`可以报告的错误。我当然可以查看错误测试，`use of closed network connection`但这真的很难看。我可以设置一个标志，说我即将关闭并忽略错误，如果设置了我想 - 有没有更好的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-16T15:38:23.897

我将通过使用 es.done 在关闭连接之前发送信号来处理这个问题。除了以下代码之外，您还需要使用 make(chan bool, 1) 创建 es.done 以便我们可以在其中放入单个值而不会阻塞。

```
// Listen for incoming connections
func (es *EchoServer) serve() {
  for {
    conn, err := es.listen.Accept()
    if err != nil {
      select {
      case <-es.done:
        // If we called stop() then there will be a value in es.done, so
        // we'll get here and we can exit without showing the error.
      default:
        log.Printf("Accept failed: %v", err)
      }
      return
    }
    go es.respond(conn.(*net.TCPConn))
  }
}

// Stop the server by closing the listening listen
func (es *EchoServer) stop() {
  es.done <- true   // We can advance past this because we gave it buffer of 1
  es.listen.Close() // Now it the Accept will have an error above
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-16T13:17:29.943

在呼叫后立即检查循环中的一些“是时候停止”标志`accept()`，然后从您的 翻转它`main`，然后*连接*到您的侦听端口以获取服务器套接字“未卡住”。[这与古老的“自管伎俩”](http://cr.yp.to/docs/selfpipe.html)非常相似。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T13:17:49.813

在这种情况下，这些行中的某些东西可能会起作用，我希望：

```
// Listen for incoming connections
func (es *EchoServer) serve() {
        for {
                conn, err := es.listen.Accept()
                if err != nil {
                    if x, ok := err.(*net.OpError); ok && x.Op == "accept" { // We're done
                            log.Print("Stoping")
                            break
                    }

                    log.Printf("Accept failed: %v", err)
                    continue
                }
                go es.respond(conn.(*net.TCPConn))
        }
        es.done <- true
} 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2014-06-15T01:05:44.107

这是一种对本地开发来说足够好的简单方法。

[http://www.sergiotapia.me/how-to-stop-your-go-http-server/](http://www.sergiotapia.me/how-to-stop-your-go-http-server/)

* * *

```
package main

import (  
    "net/http"
    "os"

    "github.com/bmizerany/pat"
)

var mux = pat.New()

func main() {  
    mux.Get("/kill", http.HandlerFunc(kill))
    http.Handle("/", mux)
    http.ListenAndServe(":8080", nil)
}

func kill(w http.ResponseWriter, r *http.Request) {  
    os.Exit(0)
} 
```

# mysql - 在 mysql 工作台中隐藏数据库

> ID：13417097
> 
> 赞同：0
> 
> 时间：2012-11-16T12:57:58.303
> 
> 标签：mysql, mysql-workbench

我有本地主机作为打开连接和本地主机作为服务器管理员。
我的本地主机中有几个数据库。像这样的东西：

```
Localhost -> db_1
          -> db_2 
```

现在我想创建一个名为 test1 的新开放连接。（我可以毫无问题地做到这一点，但是在创建 test1 之后，我拥有了 localhost 中存在的所有数据库）。但我只想在 test1 打开连接中查看 db_2。像这样的东西：

```
test1 -> db_2 
```

任何帮助请..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:07:28.083

我只需要创建一个新的服务器实例，然后为您的数据库配置新的安全性:)

# string - 在fortran f77中将实数转换为字符串

> ID：13417098
> 
> 赞同：0
> 
> 时间：2012-11-16T12:57:58.570
> 
> 标签：string, fortran, type-conversion, real-datatype

尝试将实数转换为字符串时，我在 fortran 中遇到以下错误。

```
iio: [-1] end of file
lately: writing sequential formatted internal IO
part of last string:   100000\.   |
Abort (core dumped) 
```

以下是我收到错误的代码。99999.5 中引发上述错误的值

```
CHARACTER STRING*12
WRITE (STRING, '(G12.5)') VALUE 
```

为什么会抛出这个错误？

# .net - MVC Razor RadioButtonList onchange 处理程序

> ID：13417099
> 
> 赞同：0
> 
> 时间：2012-11-16T12:57:59.320
> 
> 标签：.net, asp.net-mvc-3, razor, radiobuttonlist

我为我的单选按钮和下拉菜单使用了 HTML 助手（RadioButtonLists、DropDownListFor 和 EnumDropDownListFor）。例子：

```
@Html.RadioButtonList(m => m.ItemType, new SelectList(Model.ItemTypes, "Name", "Name") 
```

和

```
@Html.DropDownListFor(n => n.ApartmentFloor, new SelectList(Model.ApartmentFloors, "Id", "Floor"), new { @id = "floorsSelect", @class = "exists" }) 
```

对于 DropDownListFor，似乎有办法为列表设置 HTML 属性，例如。[id、类、样式等。但是对于实际上是自定义类（我的版本](http://pastebin.com/Qwxj5ZXU)和[原始](http://jonlanceley.blogspot.dk/2011/06/mvc3-radiobuttonlist-helper.html)版本）的 RadioButtonList，我似乎找不到添加这些类型属性的方法。

我想到的是“onchange”。你如何为这些类型的助手添加 onchange 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:34:20.507

查看“RadioButtonList”的渲染 html 并获取控件的 id，然后您可以使用以下 jQuery 代码轻松关联“onchange”事件。

```
$("#RadioButtonListID input").change(function(){
//Write Your Code Here
}); 
```

# javascript - IE 中奇怪的图像对象行为。我的解决方案是最好的吗？

> ID：13417100
> 
> 赞同：0
> 
> 时间：2012-11-16T12:58:06.637
> 
> 标签：javascript

我有一个接收预加载的**JS 图像对象****或****图像 url**的函数。这是作为变量传入的。****`photo`****

 ****我执行检查以查看“照片”变量是否为字符串。如果是，我创建一个新的图像对象并使用 onload 事件触发传入新创建的图像对象的 generateSlide() 函数，如下所示：

```
renderSlide: function (slideindex, photo, external, count, text) {
        var self = this;
        var image = new Image();
        if (typeof (photo) == 'string') {
            image.onload = function () {
                self.generateSlide(slideindex, image, external, count, text);
            };
            image.src = photo;
        } else {
            image.src = photo.src;
            self.generateSlide(slideindex, image, external, count, text);
        }
 }, 
```

如果“照片”变量是预加载的 JS 图像对象，我只需运行函数本身，将图像对象传递给 generateSlide();

一切都很好但是由于某种原因在 IE 9 中我不能简单地将“照片”变量直接传递到 generateSlide() 函数中。我必须创建一个新的图像对象并设置 src 以匹配照片对象的 src 属性。

这对我来说毫无意义，我不明白为什么会这样？

在 photo var 是实际 JS 图像对象的情况下，它被确认为在其他地方加载。（我正在预加载资产）；

总之，上面的代码工作正常，但任何人都可以解释**为什么**我必须创建一个新的图像对象并且不能简单地传递原始图像对象？有没有更优雅的解决方案？到目前为止，我还没有注意到上述方法有任何问题，但有谁知道使用这种方法的任何陷阱。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:45:03.853

这听起来像是范围的问题。您是否尝试过关闭呼叫以确保捕获正确的照片？

```
renderSlide: function (slideindex, photo, external, count, text) {
        var self = this;

        if (typeof (photo) == 'string') {
           var image = new Image();
            image.onload = function () {
                self.generateSlide(slideindex, image, external, count, text);
            };
            image.src = photo;
        } else {
          (function(photo){
            self.generateSlide(slideindex, photo, external, count, text);
          })(photo);
        } 
```

},****

# java - 列出 Galaxy S III 上所有可用的共享库

> ID：13417101
> 
> 赞同：0
> 
> 时间：2012-11-16T12:58:07.473
> 
> 标签：java, android, galaxy, shared-libraries

我有一个无根的 Galaxy S III，想知道与库存的 Google Nexus 相比，此设备上还有哪些可用的库。我对有关低功耗蓝牙的 .so 库特别感兴趣，因为三星声称 GS3 具有“蓝牙智能就绪”功能。

*   如何枚举 android 设备上的可用库？
*   如何加载库？( `System.loadLibrary`?)
*   我是否还需要`<uses-library />`在清单文件中包含指令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:57:22.487

用于`adb`连接您的设备并尝试使用`find`*.so 文件，然后为 Nexus 创建一个模拟器设备并尝试使用其中的`find`.so 文件。最后，您可以比较结果并找出哪些库不同。

实际上你不能加载库。`ld`为你做。编写您的本机代码并将其链接到相关库。

AFAIK，`<uses-library />`不是为了那个目的。

# spring-mvc - 从 web.xml 派生或映射 weblogic.xml

> ID：13417102
> 
> 赞同：2
> 
> 时间：2012-11-16T12:58:09.037
> 
> 标签：spring-mvc, weblogic

我正在尝试将 springMVC Hibernate 项目部署到 webLogic 10.3.5，但我无法弄清楚我的 weblogic.xml 中需要什么。它在 tomcat 6 中完美运行，我最初在部署到 websphere 时遇到问题，但我能够使用 weblogic.xml 解决该问题：

```
<!--?xml version="1.0" encoding="UTF-8"?-->
<weblogic-web-app xmlns="http://xmlns.oracle.com/weblogic/weblogic-web-app">
    <context-root>myproject</context-root>
    <container-descriptor>
      <prefer-web-inf-classes>true</prefer-web-inf-classes>
  </container-descriptor>
</weblogic-web-app> 
```

现在它已部署，除了主页之外，我没有图像或 css 或任何我的 jsp 页面。我尝试关注[weblogic Docs](http://docs.oracle.com/cd/E12839_01/web.1111/e13712/weblogic_xml.htm)，但发现它非常混乱。

是否有任何资源或任何人可以向我解释我需要添加什么。这里是我的 web.xml 供参考：

```
<web-app id="WebApp_ID" version="2.4" 
    xmlns="http://java.sun.com/xml/ns/j2ee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
  <display-name>My Project</display-name>
  <servlet>
    <servlet-name>myproject-dispatcher</servlet-name>
        <servlet-class>
                  org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>myproject-dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
  </servlet-mapping>
</web-app> 
```

这是我的 myproject-dispatcher-servlet.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <mvc:annotation-driven />
    <mvc:resources mapping="/resources/**" location="/resources/" />

    <bean name="/index.html" 
    class="com.fid.mdc.admin.controller.AdminController" />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver" >
        <property name="prefix">
            <value>/WEB-INF/pages/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

</beans> 
```

正如我所提到的，这一切都在tomcat 6中完美运行，所以我只需要一些帮助来理解我如何将它翻译成weblogic 10.3.5

# javascript - 为经常在页面上和页面外获得 AJAX 的元素动态添加属性

> ID：13417106
> 
> 赞同：0
> 
> 时间：2012-11-16T12:58:20.537
> 
> 标签：javascript, jquery, telerik, tooltip

我正在使用几个 Telerik ASP MVC 网格，它们经常为数据行 AJAX 一个 SQL 数据库。最初，当页面首次加载时，这些网格是空的。数据绑定完成后，会出现四种类型的按钮。我想为他们添加一个工具提示。我将以下脚本用于 OnDataBound 操作：

```
function addToolTips() {
    // jquery to add hover tooltips to elements
        $(".t-edit").attr("title", "Edit this record.");
        $(".t-delete").attr("title", "Delete this record.");
        $(".t-update").attr("title", "Save changes.");
        $(".t-cancel").attr("title", "Cancel changes.");
} 
```

问题是：它还没有检查它是否具有该属性。页面上有数千个跨多个网格。并非所有这些都会立即进行数据绑定活动。

我已将`addToolTips()`OnDataBound 操作附加到*所有*网格（我认为有 8 个）。

```
.ClientEvents(events => events.OnDataBinding("InvoiceGrid_onDataBinding")
                            .OnDataBound("InvoiceGrid_onDataBound"))

function InflowsGrid_onDataBound() {
    $("#InflowGrid").unblock();
    addToolTips();
} 
```

数据绑定前： [![图像](../Images/d2b8fd9c912313ae0fbde3e160968c0d.png)](https://i.stack.imgur.com/VHZ8w.png)

最终结果：

[![最终结果](../Images/da2b60220c25898f88390623de6cffc5.png)](https://i.stack.imgur.com/FQOUu.png)

# java - 声明一个包含 Java 数组的 ArrayList

> ID：13417107
> 
> 赞同：-5
> 
> 时间：2012-11-16T12:58:28.360
> 
> 标签：java, arrays, arraylist

基本上，我创建了一个包含整数和浮点数的新类，并将其制成一个数组，这样我的数组就可以有多个数据类型：

```
public class LibRecord {
    // values for each libary user
    public int number;
    public int issued;
    public int maxLoans;
    public float fines;
    public String name;       
}

private LibRecord[] item = new LibRecord[maxUsers]; 
```

我需要把它变成一个数组列表，这样我就可以删除、添加和插入值，每次我尝试创建一个名为“项目”的数组列表时，编译器都会告诉我这个名称已经被使用过。我该怎么办？我如何让这个程序工作，以便我可以调用 ArrayList 中的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:59:45.533

正如编译器清楚地告诉您的那样，您不能创建两个具有相同名称的字段。

您需要使用不同的名称。（或摆脱第一个领域）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T13:01:51.420

只需更换您的：

```
private LibRecord[] item = new LibRecord[maxUsers]; 
```

和：

```
private List<LibRecord> users = new ArrayList<LibRecord>(maxUsers); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T13:02:34.280

确保您没有`item`在同一范围内命名两个变量。

或者重命名`item`为`private LibRecord[] item = new LibRecord[maxUsers];``items`

# android - 表出现在 sqlite_master 中。有些工作，有些不工作

> ID：13417108
> 
> 赞同：0
> 
> 时间：2012-11-16T12:58:32.023
> 
> 标签：android, sqlite

我有一个微调器，其中填充

```
SELECT * FROM sqlite_master WHERE type = 'table' 
```

我使用该微调器来提供其他数据库操作。我的一些表可以使用，其他表失败，但有以下例外，具体取决于尝试的操作：

android.database.sqlite.SQLiteException: no such table: main.labs: , while compile: INSERT OR REPLACE INTO methods(name) VALUES(?);

11-16 06:32:01.927：E/Database(25403)：在准备“DROP TABLE equipment_types”时，0x1d6e48 上的故障 1（没有这样的表：main.labs）。11-16 06:32:01.927: E/AssistantData(25403): drop table failed with exception: android.database.sqlite.SQLiteException: no such table: main.labs: DROP TABLE equipment_types

我一直在寻找与表格的各种特征相关的成功/失败模式，但似乎没有模式。

这是一个正在工作的表的创建语句：

```
db.execSQL("
CREATE TABLE IF NOT EXISTS oel_sources 
(_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
name TEXT NOT NULL, UNIQUE (name))"); 
```

一个不起作用：

```
db.execSQL("
CREATE TABLE IF NOT EXISTS methods 
(_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
 name TEXT NOT NULL, UNIQUE (name))"); 
```

这些表中的每一个都有另一个表，其外键指向_id。

我已经删除了数据库

```
context.deleteDatabase(DB_NAME)); 
```

我还通过应用程序管理器将其删除，完全卸载，然后重试。工作与不工作似乎在删除/重新创建时是一致的。

最后，我完全不知所措。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:05:46.587

今天进一步查看后，我发现所有不工作的表都是由单个表中的外键引用的。该表还引用了一个名为“labs”的不存在的表，因为错误消息试图告诉我。我忘记了我什至打算创建那张桌子，所以“实验室”这个名字并没有点亮任何灯泡。这么晚了……

经验教训：您可以使用包含对不存在的表的外键引用的表来创建数据库。您甚至可以使用无效引用完成对表的操作。但是，对具有无效引用的表的其他父表执行操作是最终导致错误的原因。

看起来很奇怪，因为我本以为父表只是被动地坐在那里，直到将一些数据添加到它们中，然后子表实际上指向它们，但我想这是我无法理解的原因。

# knockout-2.0 - Knockout.js - 强制输入为数字 - 允许点和逗号表示法

> ID：13417110
> 
> 赞同：2
> 
> 时间：2012-11-16T12:58:45.853
> 
> 标签：knockout-2.0, knockout-validation

为了更好地理解，请访问[http://knockoutjs.com/documentation/extenders.html](http://knockoutjs.com/documentation/extenders.html)并查看实时示例 1：强制输入为数字

我可以用 . （点）但不带逗号。然后金额跳到0。

知道如何允许点和逗号吗？我想允许像 20.00 和 20,00 这样的输入

亲切的问候，

K。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T12:24:41.427

您可能不仅希望**接受带有逗号的数字字段**，还希望**从您的 VM 中输出带有逗号**作为小数点的数字。因此，您还需要实现`read`底层计算 observable 的 getter 函数。`write`如果您不关心舍入，也可以简化功能。这是完整的代码：

```
ko.extenders.numeric = function(target) {
    var result = ko.computed({
        read: function() {
            var value = target();
            return isNaN(value) || value===null || value===''
                ? value
                : value.toString().replace('.',',');
        }
        ,write: function(newValue) {
            if (typeof newValue === "string") {
                newValue = newValue.replace(",", ".");
            }
            if (newValue !== target()) {
                target(newValue);
            }
        }
    });
    result(target());
    return result;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:25:19.767

您可以在数字扩展器中实现一个小修复（参考您发布的扩展器文档页面）来解决这个问题。在扩展器的“write”方法中，在顶部添加以下代码：

```
 if (typeof newValue == "string") {
            newValue = newValue.replace(",", ".");
        } 
```

需要 if 语句来防止模型初始化时出错。首次创建模型时，该值很可能设置为数字而不是字符串，因此我们不能在此对象上调用 .replace 方法。

# django - Django：我放置 ForeignKey 字段的位置以及我是否应该使用管理站点的相关性

> ID：13417117
> 
> 赞同：0
> 
> 时间：2012-11-16T12:59:02.303
> 
> 标签：django, django-models, django-admin

所以我正在做一个小型 django 项目，在尝试将某些模型内联在管理站点中时遇到了一些问题。例如：

模型.py

```
class Client(models.Model):
    client_name = models.CharField(max_length=100,unique=True,blank=False)
    phone_number = models.ForeignKey(Phone)

class Phone(models.Model):
    info = models.Charfield("eg. Personal", max_length=20)
    number = models.CharField(max_length=20, blank=False) 
```

现在，如果我想让我的客户管理员使用内联的 phone_number 堆叠，我不能这样做，...相反，我需要这样的模型：

```
class Client(models.Model):
    client_name = ...

class PhoneAbstract(models.Model):
    info = ...
    number = ...

    class Meta: 
        abstract = True

class ClientPhone(PhoneAbstract):
    client = models.ForeignKey(Client) 
```

...并且基本上每次我想将电话与模型相关联时定义一个从 PhoneAbstract 继承的新类:(。这很糟糕，但这是我可以这样做并获得正确管理界面的唯一方法：

管理员.py

```
class PhoneInline(admin.TabularInline):
    model = ClientPhone

class ClientAdmin(admin.ModelAdmin):
    inlines = (PhoneInline, ) 
```

现在，这太丑陋了（在我还没有受过教育的眼里），它让关系变得尴尬......那么，在第一种情况下，有没有办法在我的 ClientAdmin 中拥有外键？也许这就是 ModelAdmin.list_select_related 的用途，但我不确定...... :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:26:14.663

我不知道你为什么要这样定义事物。您想要的方式是，一个电话号码可以属于多个客户，这似乎不太可能。在 PhoneNumber 模型上使用 ForeignKey 字段是正确的做法，因为这样关系才有意义（客户端可以有多个电话号码）。

但是没有必要为抽象模型和子类化而烦恼。如果您需要一个电话号码能够指向多个不同的模型类，那么您需要的是[泛型关系。](https://docs.djangoproject.com/en/1.4/ref/contrib/contenttypes/#generic-relations)

# automated-tests - 在谷歌测试中，测试执行期间可以将测试标记为跳过而不是失败

> ID：13417121
> 
> 赞同：2
> 
> 时间：2012-11-16T12:59:12.693
> 
> 标签：automated-tests, googletest

在谷歌测试中，如果断言失败，是否可以将测试标记为已跳过？

例如`ASSERT_TRUE(1 != 1)`

因此，如果上述语句失败，我可以在 gtest 中添加一些内容以将测试标记为已跳过而不是失败吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T20:21:04.927

从来没听说过。可能是有充分理由的，因为只有在失败后才“跳过”测试看起来有点作弊！如果您知道测试在运行之前会失败，那么您可以通过添加到测试名称来[暂时禁用它。](https://github.com/google/googletest/blob/main/docs/advanced.md#temporarily-disabling-tests)`DISABLED_`

这似乎是一个更好的选择，因为测试代码仍然被编译，但套件的整体结果不受影响，因为测试没有运行。输出通过提醒您有多少禁用测试来提醒您，如果需要，您始终可以使用`--gtest_also_run_disabled_tests`arg 强制禁用测试运行。

顺便说一句，gtest 提供[了明确导致测试失败](https://github.com/google/googletest/blob/main/docs/reference/assertions.md#explicit-success-and-failure-success-failure)而不是执行`ASSERT_TRUE(1 != 1)`.

# winapi - win32/wtl中的自定义绘图对话框

> ID：13417124
> 
> 赞同：0
> 
> 时间：2012-11-16T12:59:18.687
> 
> 标签：winapi, atl, wtl

在使用 WTL/ATL/Windows API 时，我创建了一个带有按钮和列表视图的窗口对话框，我想应用我收到的一些样式作为图像，还有圆角，我已经阅读了关于所有者绘制..自定义绘制和其他内容但我找不到一个例子，我试过：

```
 LRESULT OnPaint(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled)
     {
            HDC hdc;

            RECT rect = {0};
            PAINTSTRUCT ps;
            rect.top = 100;
            rect.right = 100;
            rect.bottom = 100;
            hdc = BeginPaint( &ps);

            ::FillRect(hdc, &rect, (HBRUSH)(COLOR_BTNFACE + 1));

            EndPaint( &ps);
         return 0;
 } 
```

它不会在对话框中显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:26:04.280

你的代码：

```
 rect.top = 100;
      rect.bottom = 100; 
```

你能指望什么？您正在填充零高度矩形，预计您什么也看不到。其余代码是正确的，并且将在您修复矩形后立即开始工作。

# android - Monodroid 滑动菜单

> ID：13417126
> 
> 赞同：5
> 
> 时间：2012-11-16T12:59:20.627
> 
> 标签：android, xamarin.android, java, java-binding

有没有人在他们的 Monodroid 应用程序中导入了这个滑动菜单项目[https://github.com/jfeinstein10/SlidingMenu ？](https://github.com/jfeinstein10/SlidingMenu)

我已经在一个新的 JavaLibraryProject 中导入了**jar**文件 (com.slidingmenu.lib.slidingmenuactivity.jar)。

我创建了一个从**SlidingActivity**扩展的新活动。

我的项目构建没有任何错误，但在运行时我得到了这个异常

```
Java.Lang.NoClassDefFoundError: com.slidingmenu.lib.R$layout 
```

上

```
base.OnCreate(bundle)

public class MainActivity : SlidingActivity
{
    public override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);    //The EXCEPTION is thrown here
        SetContentView(Resource.Layout.activity_main);
    }

    public override void SetBehindContentView(int p0)
    {
        base.SetBehindContentView(p0);
    }        
} 
```

有什么想法吗？谢谢 ：）

**编辑**

好的。我做了一点修改：

我已将“assets”、“bin”和“res”文件夹添加到我在*AndroidJavaLibrary*项目中添加的“.zip”文件中。

它编译得很好，但现在我在同一行得到另一个错误：

```
Android.Views.InflateException: Binary XML file line #2: Error inflating class com.slidingmenu.lib.SlidingMenu 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T01:05:54.247

您需要将 Jar 包含在您的 Java 绑定库和 Mono for Android 应用程序中。只需将一个名为 libs 的文件夹添加到您的 Mono for Android 项目中，然后将 Jar 文件复制到该文件夹​​中。然后，您需要将构建操作设置为 AndroidJavaLibrary。

所以你的解决方案应该是这样的：

*   Java 绑定库 - Jar 文件应位于 JarInputs 文件夹中，构建操作应为 InputJar
*   Mono for Android 应用程序项目 - Jar 文件应位于您的 libs 文件夹中，并且构建操作设置为 AndroidJavaLibrary

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:53:10.757

我终于让它工作了

```
public class Activity1 : SlidingActivity
{
    int count = 1;

    public override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        // Set our view from the "main" layout resource

        SetContentView(Resource.Layout.Main);
        SetBehindContentView(Resource.Layout.menu);
        // Get our button from the layout resource,
        // and attach an event to it

        Button button = FindViewById<Button>(Resource.Id.MyButton);

        button.Click += delegate { button.Text = string.Format("{0} clicks!", count++); };
    }
} 
```

我将 Monodroid 更新到最新版本 4.4.54

希望这可以帮助某人:)

# javascript - Jquery PrettyPhoto 从 URL 中删除 #prettyphoto

> ID：13417132
> 
> 赞同：4
> 
> 时间：2012-11-16T12:59:37.943
> 
> 标签：javascript, jquery, wordpress, plugins

我使用 3.1.4 版的漂亮照片。（http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/）。我想从 URL 中删除“#prettyphoto[iframe]/number/”。我设置了 deeplinking:false 但这无济于事。我知道这可能是这些功能的问题：

```
function getHashtag(){url=location.href;hashtag=(url.indexOf('#prettyPhoto')!==-1)?decodeURI(url.substring(url.indexOf('#prettyPhoto')+1,url.length)):false;return hashtag;};
function setHashtag(){if(typeof theRel=='undefined')return;location.hash=theRel+'/'+rel_index+'/';};
function clearHashtag(){if(location.href.indexOf('#prettyPhoto')!==-1)location.hash="prettyPhoto";} 
```

任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-15T16:06:03.607

这是我的代码，它对我有用：

```
 <script type="text/javascript" charset="utf-8">
      $(document).ready(function(){
        $("a[rel^='prettyPhoto']").prettyPhoto({
        social_tools:false,
        deeplinking:false});
      });
    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-20T09:02:41.240

3.1.5 版本将工作

```
(function($){$.prettyPhoto={version:'3.1.5'};
$.fn.prettyPhoto=function(pp_settings){pp_settings=jQuery.extend(
{.. deeplinking: false; ...} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T08:11:35.760

a）这对我有用：

```
function clearHashtag(){
    if(location.href.indexOf('#prettyPhoto')!==-1)
        location.hash="";
} 
```

此代码位于 jquery.prettyPhoto.js 的底部

b) 还有一种方式，比如在 jquery.prettyPhoto.js 的开头设置： **deeplinking: false 。**

我的意思是这里：

```
(function($){$.prettyPhoto={version:'3.1.4'};$.fn.prettyPhoto=function(pp_settings){pp_settings=jQuery.extend({.. deeplinking: false; ...} 
```

希望我有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T20:44:16.720

像这样的东西会起作用吗？

```
(function($) {
    console.log('check');

    $.prettyPhoto = {
        version : '3.1.5'
    };

    $.fn.prettyPhoto = function(pp_settings) {
        pp_settings = $.extend({
            deeplinking : false
        });
    };

    $("a[rel^='prettyPhoto']").prettyPhoto();

})(jQuery); 
```

# restlet - 如何禁用 Restlet 客户端日志信息级别？

> ID：13417134
> 
> 赞同：1
> 
> 时间：2012-11-16T12:59:40.990
> 
> 标签：restlet, restlet-2.0

在我的日志中，我多次显示：

2012 年 11 月 16 日上午 8:51:32 org.restlet.ext.net.HttpClientHelper 停止
信息：停止 HTTP 客户端

当我将此代码添加到我的客户时，我以为我已修复它：

```
HttpClientHelper httpClientHelper = new HttpClientHelper(null);
Engine.getInstance().getRegisteredClients().clear();
Engine.getInstance().getRegisteredClients().add(httpClientHelper);
httpClientHelper.getLogger().setLevel(Level.WARNING); 
```

显然它适用于日志的开始，但后来它出现在日志中。有人可以向我解释为什么它开始按预期工作但随后又显示了该信息日志条目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-28T12:08:57.983

对我来说，将 logService 设置为此有效：

```
public class SilentLogService extends LogService {

  @Override
  public boolean isLoggable(Request request) {
      return false;
  }

} 
```

# objective-c - 获取所有播放声音的列表（在 Mac 上）

> ID：13417137
> 
> 赞同：-1
> 
> 时间：2012-11-16T12:59:55.897
> 
> 标签：objective-c, cocoa, core-audio, nssound

我怎样才能访问所有活动的声音文件，以便阻止它们。例如，假设我们在浏览器中播放了一些 youtube 视频。我没有启动这些声音，所以我没有提及它们。如何以编程方式停止播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:04:29.883

我认为没有任何简单的方法可以做到这一点。您可能获得的最接近的方法是将所有声音、句号静音，包括您的声音。见鬼，用户自己无法控制单个进程的数量。:(

# c# - 我可以在 IQueryable 和 IEnumerable 上执行 Contract.Ensures 吗？

> ID：13417139
> 
> 赞同：4
> 
> 时间：2012-11-16T13:00:10.173
> 
> 标签：c#, .net, ienumerable, iqueryable, code-contracts

让我们看看这段代码：

```
public IQueryable<Category> GetAllActive()
{
    Contract.Ensures(Contract.Result<IQueryable<Category>>() != null);
    return dataSource.GetCategories(T => T.IsActive);
} 
```

有一个小问题。代码合同可以这样写：

```
public IQueryable<Category> GetAllActive()
{
    Contract.Ensures(Contract.Result<IQueryable<Category>>() != null);
    Contract.Ensures(Contract.Result<IQueryable<Category>>().All(T => T.IsActive));
    return dataSource.GetCategories(T => T.IsActive);
} 
```

或不？

这样的事情会产生不必要的序列枚举，这是非常不可取的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:06:10.877

假设您正在使用二进制重写器并在运行时执行合同，您不应该*这样*做。

当你[`Contract.Ensures`](http://msdn.microsoft.com/en-us/library/system.diagnostics.contracts.contract.ensures.aspx)像这样使用时：

```
Contract.Ensures(Contract.Result<T>() <operation>);
return expression; 
```

它被转换并且操作被提升为如下所示：

```
T expression = <expression>;

// Perform checks on expression.
if (!(expression <operation>) <throw appropriate exception>;

// Return value.
return expression; 
```

在这种情况下，这意味着您的代码展开为：

```
IQueryable<Category> temp = dataSource.GetCategories(T => T.IsActive);

// Perform checks.
if (!(temp != null)) throw new Exception();
if (!temp.All(T => T.IsActive)) throw new Exception();

// Return values.
return temp; 
```

在这种情况下，您[`IQueryable<Category>`](http://msdn.microsoft.com/en-us/library/bb351562.aspx)将被迭代并导致*另一个*请求被发送到底层数据存储。

根据操作的不同，您可能不会注意到它，但查询*肯定*会执行两次，这对性能不利。

对于这种性质的事情，您应该在消费点检查`IQueryable<T>`您是否有任何元素（您可以使用设置的布尔标志来`foreach`完成它，或者当您实现它时）。

但是，如果您*没有*在已编译的程序集上运行二进制重写器，则[`Contract.Result<T>`](http://msdn.microsoft.com/en-us/library/dd412873.aspx)无法强制执行这种性质的合同；在这种情况下，它是一个 noop 并且可能不应该在那里，因为它没有做任何事情。

# ajax - DRUPAL 7 - 如果从其他地方添加了新内容，如何 ajax 刷新视图？喜欢脸书

> ID：13417140
> 
> 赞同：1
> 
> 时间：2012-11-16T13:00:12.093
> 
> 标签：ajax, view, drupal-7, refresh, feed

我目前正在为用户开发一个新闻提要视图，他/她可以在其中查看朋友上传的内容。但是我无法开始工作的是，**当有人上传新内容时，它会立即自动出现在每个人的提要上，而无需重新加载页面**

如果用户单击页面上的任何位置，Facebook 似乎会自动执行此操作。

欢迎任何帮助，这真的会提升页面的价值！

如果它有效，这是否能够与例如评论和其他内容一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:01:57.810

这将需要长时间轮询或推送通知。这很容易用 nodejs 处理，但如果没有 nodejs 之类的东西，这样做会是一场噩梦，并且会大大增加服务器负载，因为它需要浏览器不断地 ping 服务器。

而使用 nodejs，您可以利用 socket.io 或类似的东西，在浏览器和服务器之间建立异步隧道，然后实现 pub/sub。基本上它的工作方式是这样的：

Nodejs 处理浏览器和服务器之间的异步通信，在初始页面加载时，当前内容通过标准 http 请求正常传送到浏览器。此外，向 nodejs 服务器打开了一条隧道，并且用户订阅了该页面的频道。

有人发布了一个新节点，并在 node_save 挂钩中向 nodejs 服务器触发了一个事件，其中包含有关新发布节点的详细信息。然后将新数据发送到通道，连接到页面并因此订阅通道的所有浏览器都会接收新数据，这会导致某些客户端 javascript 使用新数据更新视图 - 或 - 刷新风景。

它很复杂，不是你可以插入并开箱即用的东西。nodejs 集成模块 (http://drupal.org/project/nodejs) 附带了一个用于 drupal 日志的示例。您想要做的事情可能会以类似于该示例的方式实现。

# php - PHP 中的一种形式的两个发布选项 - 可能吗？

> ID：13417154
> 
> 赞同：0
> 
> 时间：2012-11-16T13:00:46.930
> 
> 标签：php, html, forms

有没有办法一起写两个动作选项？例如：

```
<?php

echo '<html>';
echo '<form action="" method="post">';
echo '<input type="hidden" name="form_action" value="1">';
echo '<input class=submit type="submit" value="[PUSH IT]" name="Submit">';
echo '<input type="hidden" name="action2" value="1">';
echo '<input class=submit type="submit" value="[AGAIN]" name="Submit">';
echo '</form>';
echo '</html>';

?> 
```

但是这里可能会出现一些问题，因为当任何人通过单击一个按钮提交表单时，它会同时显示两个按钮的结果。但是提交按钮水平显示。
但在两种不同的形式中，提交按钮将垂直显示。那么，有没有办法在不同的表单中水平显示两个提交按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:03:51.517

你最好把它们分成两种形式。

```
<?php
echo '<html>';
echo '<FORM action=""  method="post">';
echo '<input type="hidden" name="form_action" value="1">';
echo '<INPUT class=submit type="submit" value="[PUSH IT]" name="Submit">';
echo '</FORM>';
echo '<FORM action="" method="post"'>
echo '<input type="hidden" name="action2" value="1">';
echo '<INPUT class=submit type="submit" value="[AGAIN]" name="Submit">';
echo '</FORM>';
echo '</html>';
// Rest of the code
?> 
```

为了您自己的利益，您最好不要`echo`一直使用HTML

```
//...some PHP code
?>
<!-- now put all raw HTML here -->
<html>
<form action=""  method="post">
//...
<?php
// now, put your PHP code. 
```

如果你想水平放置两个表单，你应该在 CSS 中进行。

```
<FORM action=""  method="post" style="display: inline-block">
<!-- ... -->
</form>
<FORM action=""  method="post" style="display: inline-block">
<!-- ... -->
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:05:53.123

水平对齐的两种不同形式：

**HTML**

```
<form action=""  method="post">
    <input type="hidden" name="form_action" value="1">
    <input type="submit" class="submit" value="[PUSH IT]" name="Submit">
</form>
<form action=""  method="post">
    <input type="hidden" name="action2" value="1">
    <input type="submit" class="submit" value="[AGAIN]" name="Submit">
</form> 
```

**CSS**

```
form { float: left; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:09:31.787

//尝试这个

```
<?php
    if(isset($_POST['submitOne']))
    {
        echo "submit one done";
    }
    else if(isset($_POST['submitTwo']))
    {
        echo "submit two done";
    }
?>

<form method="post" action="">
    <input type="submit" name="submitOne" value="submitOne"  />
    <input type="submit" name="submitTwo" value="submitTwo"  />
</form> 
```

# django - 带有分片数据库的 Django-haystack

> ID：13417159
> 
> 赞同：1
> 
> 时间：2012-11-16T13:01:15.413
> 
> 标签：django, solr, sharding, django-haystack

我需要按用户 ID 将数据库拆分到多个主机。

```
DB1        DB2         DB3
---------------------------
User1      User2       User3
User4      User5       User6 
```

但是如何将它们全部添加到索引中？

我不能这样做：

```
def index_queryset(self):
    return self.get_model().objects.all() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:09:40.987

那么这当然取决于你的应用程序关于用户。

如果你有 6 个用户模型，`User1, User2, ... User6`你可以通过为模型用户编写一个自己的管理器来做到这一点，然后它将返回所有用户，`self.get_model().objects.all()`并且还可以管理你的分片数据库。

要知道你喜欢做什么以及到目前为止你是如何做的，它不会有关于你当前设置的更多信息

# c - 获取线程上次调度的 CPU/核心

> ID：13417160
> 
> 赞同：1
> 
> 时间：2012-11-16T13:01:17.587
> 
> 标签：c, linux, pthreads

我的应用程序中有许多活动线程，我有这些线程的`pthread_t`ID，并且可以在必要时获取其他 ID。这些存储在一个单独的数组中。

如何确定特定线程当前正在运行（或最近运行的线程）从另一个线程调用的 CPU 的 ID/编号。

`sched_getcpu(2)`仅适用于调用线程，并且`pthread_getaffinity_np`只给我允许的 cpu 掩码。`/proc`同样没用，只给我整个过程的 CPU ID。

我需要它来调试/调整 NUMA 感知代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:35:23.453

至少在 Lnux 上，您可以`tid`通过调用`gettid()`.

然后通过读取第 39 个元素来查找 CPU id `/proc/<pid>/task/<tid>/stat`。

（通过哪里`pid`读取`getpid()`）

* * *

也可以看看：

*   [如何通过 /proc 文件系统获取 CPU id？](https://stackoverflow.com/a/8131483/694576)

*   [如何获取线程的 LW 进程 ID？](https://stackoverflow.com/a/7271559/694576)

# c++ - 打印到文件案例中的 FindFirstPrinterChangeNotification

> ID：13417162
> 
> 赞同：1
> 
> 时间：2012-11-16T13:01:17.987
> 
> 标签：c++, winapi, printing

我正在尝试监视远程假脱机程序上的作业。我为此使用下面的代码。实际打印某些内容时，会调用 MyChangeCallback 并且我可以正常进行。但是，如果我在打印对话框上勾选“打印到文件”框，我的回调永远不会被调用。即使选择了“打印到文件”，任何想法如何使它工作？

```
// Callback definition

VOID MyChangeCallback(PVOID lpParameter, BOOLEAN TimerOrWaitFired)
{
   DEBUG("Change notification received");

   HANDLE hChange = *((HANDLE*)lpParameter));

   // Call FindNextPrinterChangeNotification with hChange
   ...
}

int main() {

    HANDLE hPrinter = 0;

    OpenPrinter(L"\\MyPrintServer\\SharedPrinter", &hPrinter, NULL);

    HANDLE hChange = FindFirstPrinterChangeNotification(   hPrinter,  
                                                           PRINTER_CHANGE_ALL, 
                                                           0, 
                                                           NULL);

    HANDLE hNewWaitObj = 0;

    RegisterWaitForSingleObject(    &hNewWait, 
                                    hChange, 
                                    MyChangeCallback,  
                                    (PVOID)&hChange, 
                                    INFINITE, 
                                    WT_EXECUTEDEFAULT);

    // Wait for events

    Sleep(INFINITE);
} 
```

# java - 包裹位图 - Android

> ID：13417163
> 
> 赞同：3
> 
> 时间：2012-11-16T13:01:25.193
> 
> 标签：java, android

在现有代码中，我有以下类来保存类别详细信息。

```
import org.json.JSONObject;
import android.graphics.Bitmap;
import android.os.Parcel;
import android.os.Parcelable;

public class Category  {

private String mIconURL;
private String mName;

public Category() {
    super();
}

public String getIconURL() {
    return mIconURL;
}

public void setIconURL(String iconURL) {
    this.mIconURL = iconURL;
}

public String getName() {
    return mName;
}

public void setName(String name) {
    this.mName = name;
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    super.writeToParcel(dest, flags);

    dest.writeString(mIconURL);
    dest.writeString(mName);

}

public static final Parcelable.Creator<Category> CREATOR = new Parcelable.Creator<Category>() {

    public Category createFromParcel(Parcel in) {
        return new Category(in);
    }

    public Category[] newArray(int size) {
        return new Category[size];
    }
};

private Category(Parcel in) {
    super(in);
    mIconURL = in.readString();
    mName = in.readString();

}

@Override
public int describeContents() {

    return 1;
}

@Override
public String toString() {
    StringBuilder builder = new StringBuilder();
    builder.append("{");
    builder.append(super.toString());
    builder.append(", mName=").append(mName);
    builder.append(", mIconURL=").append(mIconURL);
    builder.append("}");
    return builder.toString();
}

public static Category parseFromJSON(JSONObject jsonObject) {
    Category cat = new Category();
    try {
        cat.setServerId(jsonObject.getInt("id"));
        cat.setName(jsonObject.getString("name"));
        cat.setIconURL(jsonObject.getString("icon"));

    } catch (Exception e) {

    }
    return cat;
} 
```

}

并且应用程序工作正常，但现在我想将 Image 属性添加到这个类别类。我是 Java 和 Android 的新手。但是现有的类有一个叫做包裹的东西。现在我如何为位图做同样的事情？是不是像下面这样

```
public Bitmap getImage()
{
    return mImage;
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    super.writeToParcel(dest, flags);

    dest.writeString(mIconURL);
    dest.writeString(mName);
    dest.writeByteArray(mImage);// there is no "writeBitmap" method in Parcel.

} 
```

请指导我

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T08:46:04.980

```
public void writeToParcel(Parcel dest, int flags) {
...
    dest.writeValue(mImage);
}
private Category(Parcel in) {
...
    mImage= in.readParcelable(Bitmap.class.getClassLoader());
} 
```

即使`mImage==null`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-05T20:12:29.203

**尝试简单**

```
public class MyVeryOwnParcelable  implements Parcelable {

//you can use every type of data even Arraylist

//change here (1)
public String ID;
public Bitmap BITMAP_IMAGE;

public MyVeryOwnParcelable  () {

}
public MyVeryOwnParcelable  (Parcel parcel) {
    //change here (2)
    this.ID= parcel.readString();
    this.BITMAP_IMAGE=parcel.readParcelable(null);
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    //change here (3)
    dest.writeString(ID);
    dest.writeParcelable(BITMAP_IMAGE, flags);
}

@Override
public int describeContents() {
    return 0;
}
// Method to recreate a Catch from a Parcel
public static Creator<MyVeryOwnParcelable  > CREATOR = new Creator<MyVeryOwnParcelable  >() {

    @Override
    public MyVeryOwnParcelable  createFromParcel(Parcel source) {
        return new MyVeryOwnParcelable  (source);
    }

    @Override
    public MyVeryOwnParcelable  [] newArray(int size) {
        return new MyVeryOwnParcelable  [size];
    }

  };
} 
```

**简单发送**

```
MyVeryOwnParcelable mp=new MyVeryOwnParcelable();
mp.ID="hello parcel";
mp.BITMAP_IMAGE=BitmapFactory.decodeResource(getResources(), R.drawable.myimage);

//put as normal
intent.putExtra("MY_DATA",mp);

//get from intent
MyVeryOwnParcelable  my= (MyVeryOwnParcelable )   getIntent().getExtras().getParcelable(KEY.EXTRA_DATA);
//do anything with data

imageView.setImageBitmap(mp.BITMAP_IMAGE); 
```

**只需根据您的需要更改“MyVeryOwnParcelable”即可**

希望这会对某人有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:23:02.973

你有一个例子[在这里](https://stackoverflow.com/questions/7326365/how-to-parcel-a-bitmap-in-android)。

```
mImage.writeToParcel(parcel, 0); 
```

# yii - “application.extensions.yiiext.renderers.smarty.ESmartyViewRenderer”

> ID：13417164
> 
> 赞同：0
> 
> 时间：2012-11-16T13:01:28.993
> 
> 标签：yii, smarty

我已按照[此处的说明将](http://yiiext.github.com/extensions/smarty-renderer/index.html)**smarty 模板**集成到我的应用程序中

但我收到上述错误。

![在此处输入图像描述](../Images/d026476523e8fa4c11d32df11dd3cfef.png)

我已经尝试了所有可能的方法来粘贴**Yii Smarty 解析器**

**配置**

```
'viewRenderer'=>array(
      'class'=>'application.ext.ESmartyViewRenderer',
        'fileExtension' => '.tpl',
        //'pluginsDir' => 'application.smartyPlugins',
        //'configDir' => 'application.smartyConfig',
        //'prefilters' => array(array('MyClass','filterMethod')),
        //'postfilters' => array(),
        //'config'=>array(
        //    'force_compile' => YII_DEBUG,
        //   ... any Smarty object parameter
        //)
    ), 
```

我很高兴看到是否有人建议其他（最佳）模板引擎..

**编辑**

确切的错误信息

```
Alias "application.extensions.yiiext.renderers.smarty.ESmartyViewRenderer" is invalid. Make sure it points to an existing PHP file and the file is readable. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:20:22.743

```
Alias "application.extensions.yiiext.renderers.smarty.ESmartyViewRenderer" is invalid. Make sure it points to an existing PHP file and the file is readable. 
```

在上述情况下使用正确的路径。

```
application.extensions.ESmartyViewRenderer 
```

如果您将文件提取到新文件夹*protected/extensions/smarty*而不是*protected/extensions*中，请 使用

```
application.extensions.smarty.ESmartyViewRenderer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:30:38.490

你应该尝试：

```
'class'=>'ext.ESmartyViewRenderer', // or application.extensions.ESmartyViewRenderer should also work 
```

*protected/extensions*目录已经别名`ext`为.

# eclipse - 如何为 Eclipse 使用的特定 cvs 命令添加选项？

> ID：13417165
> 
> 赞同：0
> 
> 时间：2012-11-16T13:01:36.237
> 
> 标签：eclipse, eclipse-plugin, cvs

我想`-q`为 cvs 命令添加选项，该命令在我从 Eclipse 的上下文菜单中`update`选择*Team/Update后运行。*我在*Preferences/Team/CVS*中看不到执行此操作的任何选项。我怎样才能做到这一点？

更新

Duncan Krebs 在他的回答中指出，可以通过使用`.cvsrc`配置文件为标准 cvs 设置此类选项。然而 Eclipse 使用它自己的 cvs Java[实现](http://www.eclipse.org/eclipse/platform-cvs/)，看起来它不支持`.cvsrc`文件中的设置。我也在 E​​clipse 论坛上[问过。](http://www.eclipse.org/forums/index.php/mv/msg/440288/986085/#msg_986085)

我在 Windows Vista SP2 x64 上使用 Eclipse Indigo Service Release 2（内部版本号：20120216-1857）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:26:02.523

I don't think its possible to do that in eclipse with any preference setting. However, you can modify the cvs configuration file to add default options to commands here are some examples:

The `~/.cvsrc' file is a way that you can add default options to cvs_commands within cvs, instead of relying on aliases or other shell scripts.

The format of the `~/.cvsrc' file is simple. The file is searched for a line that begins with the same name as the cvs_command being executed. If a match is found, then the remainder of the line is split up (at whitespace characters) into separate options and added to the command arguments before any options from the command line.

If a command has two names (e.g., checkout and co), the official name, not necessarily the one used on the command line, will be used to match against the file. So if this is the contents of the user's `~/.cvsrc' file:

log -N diff -u update -P checkout -P

the command `cvs checkout foo' would have the`-P' option added to the arguments, as well as `cvs co foo'.

So I would suggest adding this

update -q

to that file which eclipse should then by default append. Hope that works. - Duncan

# iphone - Webview 在 ios 5.1 上不显示捆绑图像，适用于其他版本

> ID：13417167
> 
> 赞同：0
> 
> 时间：2012-11-16T13:01:41.760
> 
> 标签：iphone, ios, image, resources, webview

我正在开发应用程序，它在 webview 中显示来自应用程序资源的页面和图像。该页面工作正常，但在 iOS 5.1 上时图像不存在。当我在 iOS 4.3 或 iOS 6.0 上测试它时，一切都像魅力一样。图像正在正确显示。那个确切的系统版本似乎有问题。这是我正在使用的代码：

```
NSString *imgPath = [[NSBundle mainBundle] pathForResource:currentImageName ofType:@"png"];
imgPath = [NSString stringWithFormat:@"%@%@",@"file://",imgPath];

content = [content stringByReplacingOccurrencesOfString: @"{}" withString:imgPath];
myData = [content dataUsingEncoding:NSUTF8StringEncoding];

[webView loadData:myData MIMEType:@"text/html" textEncodingName:@"UTF-8" baseURL:[NSURL URLWithString:@""]]; 
```

内容是带有html的字符串。myData 是带有 html 文件的 NSData。正确生成图像路径。正如我之前提到的 - 在 iOS 4.3 和 6.0 上一切正常。

以下是 iOS 5.1 模拟器上的数据值：

```
imgPath = file:///Users/deimos/Library/Application Support/iPhone Simulator/5.1/Applications/98C3911D-46D6-49B6-BADC-6B463619EF5E/myApplication.app/pl.lproj/image01.png 
```

替换图片url前的内容：

```
<body>
<center><img src="{}" /></center>
</body> 
```

替换图片url后的内容：

```
<body>
<center><img src="file:///Users/deimos/Library/Application Support/iPhone Simulator/5.1/Applications/98C3911D-46D6-49B6-BADC-6B463619EF5E/myApplication.app/pl.lproj/image01.png" /></center>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T06:23:53.713

我找到了解决我的问题的方法。在行中：

```
[webView loadData:myData MIMEType:@"text/html" textEncodingName:@"UTF-8" baseURL:[NSURL URLWithString:@""]]; 
```

将空字符串传递给此方法是错误的。它应该被 nil 替换：

```
[webView loadData:myData MIMEType:@"text/html" textEncodingName:@"UTF-8" baseURL:[NSURL URLWithString:nil]]; 
```

使用 nil 时，每个系统版本都可以正常工作。

# android - 如何使用 Restlet apis for JavaEE 检索在 Http Post 请求中发送的数据？

> ID：13417176
> 
> 赞同：1
> 
> 时间：2012-11-16T13:02:09.023
> 
> 标签：android, rest, jakarta-ee, restlet

这是我在 android 上的 restlet 客户端代码：

```
 public void sendDataToServer(final JsonObject jsonObject) {
    new Thread(new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
            String jsonObjectString = jsonObject.toString();
            StringEntity entity = null;
            try {
                entity = new StringEntity(jsonObjectString);
                entity.setContentType(APPLICATION_JSON);
            } catch (UnsupportedEncodingException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            ClientResource clientResource = new ClientResource("http://192.168.0.101:8080/RestletDemo/register");
            try {
                Representation representation = clientResource.post(entity, MediaType.APPLICATION_JSON);
//                  representation.getJsonObject();
                Response response = clientResource.getResponse();
                String jsonResponse = response.getEntity().getText();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    }).start();

} 
```

此代码在服务器端：

```
 @Post("json")
public String registerNumber(JsonRepresentation entity) {

    String serverResponse = "Number Registered";
    try {
//          JsonRepresentation respresentation = new JsonRepresentation();
        String response = this.getRequest().getEntity().getText();
        System.out.println(response);

        Gson gson = new Gson();
        serverResponse = gson.toJson(serverResponse);

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return serverResponse;
} 
```

**当前场景：**我能够向服务器发送发布请求。此外，我也能够收到回复。但是，我想在服务器上的 POST 请求中检索从 android 设备（客户端）发送的数据。我该如何克服这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:10:13.890

我已经解决了这个问题。这是服务器代码，用于在服务器端检索从客户端发送的 POST 数据。

```
 @Post("json")
public Representation registerNumber(Representation entity) {

System.out.println("JsonRepresentation : " + entity);
String postContent;
try {
postContent = entity.getText();
System.out.println("POST Content : " + postContent);
} catch (IOException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}
return null;

} 
```

您可以从终端使用 curl 测试此代码：

`curl -i -X POST <your_url> -H "Content-Type: application/json" -d '{"key" : "value"}'`

# c# - XmlSerializer 忽略公共字段？

> ID：13417179
> 
> 赞同：4
> 
> 时间：2012-11-16T13:02:17.640
> 
> 标签：c#, xmlserializer

我正在使用一些定义如下的现有代码。

```
class Example
{
    public float x_field;
    public float x_property
    {
        get { return x_field; }
        set { x_field = value; }
    }
} 
```

为什么这样定义我不知道，但我无法更改它的实现。问题是，当我序列化它时，我显然在 xml 输出中得到了这两个值。如果我无法修改“示例”类，如何阻止这种情况发生？

我希望序列化程序只输出公共属性而不是公共字段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T13:06:17.990

您可以使用[XmlSerializer的](http://msdn.microsoft.com/en-us/library/bfaxz1a0.aspx)[XmlAttributeOverride](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributeoverrides.aspx)参数，例如

```
XmlAttributeOverrides overrides = new XmlAttributeOverrides();
XmlAttributes attributes = new XmlAttributes();
attributes.XmlIgnore = true;
overrides.Add(typeof(Example), "x_field", attributes);

XmlSerializer xs = new XmlSerializer(typeof(Example), overrides); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:07:36.380

我会使用一个中间对象。您可以控制它来创建您想要序列化的确切模型。

```
class IntermdeiateModel
{
     public float x+property {get;set;}
}
....

return Serializer.Serialze(GetAllEamples().Select(e => new IntermdeiateModel { x_property = e.x_property)); 
```

# backbone.js - 包括tablesorter插件backbone.js

> ID：13417181
> 
> 赞同：0
> 
> 时间：2012-11-16T13:02:21.440
> 
> 标签：backbone.js, tablesorter

tablesorter 插件复制从输入表单添加到表中的数据，然后通过单击重复数据的标题进行排序。页面刷新后表格按进入顺序显示输入的数据

任何人都可以帮助这个 [http://jsfiddle.net/KrRyb/](http://jsfiddle.net/KrRyb/)

谢谢

```
window.BookView = Backbone.View.extend({
tagName: "tr",

events: {
},

template: $("#book-item").template(),

initialize: function(){
  _.bindAll(this, "render");
},

render: function(){
  var element = jQuery.tmpl(this.template, this.model.toJSON());
  $(this.el).html(element);
  return this;
  }
  });
  $(document).ready(function() 
  { 
    $("#books-table").tablesorter(); 
  } 
  ); 
window.AppView = Backbone.View.extend({
el: $("#app"),
events: {
  "click .tabs a": "tabs",
        "click #add-book": "createBook",
        "click .edit-book": "editBook",
        "click #update-book": "updateBook",         
        "click .delete-book": "deleteBook",
        "click #selectall": "selectAllBooks",
        "click .select": "selectBookRow",   
        "click #manage tbody tr": "selectBookRow",
        "click #deleteall": "deleteAll"                                                 
},

initialize: function(){
  _.bindAll(this, "render", "tabs", "addAll", "addBook", "createBook", "editBook",                "deleteBook");
        this.activeBookId = null;
        this.$("#create").show();
  Books.bind('add', this.addBook); 
  Books.bind('reset', this.addAll);
  Books.fetch();
},

selectAllBooks: function(el){
    var target = $(el.target), rows = this.$('#manage tr:not(#select-info)');
        if(target.is(':checked'))
        {
                 rows.css({background:"whiteSmoke"}).find('.select').prop("checked", true);
        }
        else
        {
             rows.css({background:"white"}).find('.select').prop("checked", false);
        }
        this.showSelected();
    },

    selectBookRow: function(el){
        var target = $(el.target), row = target.parents("tr"), checkbox =  row.find('.select');
        if(checkbox.is(':checked'))
        {
            row.css({background:"white"});
            checkbox.prop("checked", false);
        }
        else
        {
            row.css({background:"whiteSmoke"});
            checkbox.prop("checked", true);
        }
        this.showSelected();            
    },      

    showSelected: function(){
        var info = $('#select-info'), count = $('#manage     .select:checked').length, word = count>1?"books":"book",
            html = '<tr id="select-info"><td colspan="6">('+count+')   '+word+' selected. <a id="deleteall" href="javascript:void(0);">delete</a></td></tr>';
        if(Books.length>0)
        {
            if(info.length === 0)
            {
              $('#manage tbody').prepend(html); 
            }
            else if(count>0)
            {
                info.replaceWith($(html));
            }
            else
            {
                info.remove();
            }
        }   
    },

    deleteAll: function(){  
        $('#manage tbody').find('input:checked').each(function() {
            var that = $(this);
            Books.get(that.data('id')).destroy();
            that.parents('tr').remove();
        });
        $('#select-info').hide();
        $('#selectall').prop("checked", false);
    },

    tabs: function(e){
      var target = $(e.target);
      $('.tabs a').removeClass('active');
      target.addClass('active');
      this.$('.content').hide();
      if(target.attr('id') === "create-tab")
      {
        this.$("#create").show();   
      }
      else
      { 
          this.addAll();
            this.$('#selectall').prop("checked", false);
        this.$("#manage").show();       
      }
    },

    editBook: function(el){
        var target = $(el.target), book = Books.get(target.data('id'));
        this.activeBookId = target.data('id');
        $('#book-edit-form').find(':input[name]:enabled').each(function() {
            var self = $(this);
            self.val(book.attributes[self.attr('name')]);
        });
        this.$('.content').hide();
        this.$('#manage-edit').show();
    },

    updateBook: function(el){
        var target = $(el.target), data = {};
        $('#book-edit-form').find(':input[name]:enabled').each(function() {
            var self = $(this);
            data[self.attr('name')] = self.val();
        });
        Books.get(this.activeBookId).set(data).save();
        this.addAll();
        this.$('.content').hide();
        this.$('#manage').show();
    },

    deleteBook: function(el){
        var target = $(el.target);
        Books.get(target.data('id')).destroy();
        target.parents('tr').remove();
    },      

  addAll: function(){
      this.$("#manage table tbody").empty();    
    Books.each(this.addBook)
  },

  addBook: function(book){
    var view = new BookView({model: book});
    this.$("#manage table tbody").prepend(view.render().el);
  },

   createBook: function(e){
        var data = {};
        $('#book-form').find(':input[name]:enabled').each(function() {
            var self = $(this);
            data[self.attr('name')] = self.val();
            self.val("");
        });
        Books.create(data);
  }
   });

    window.App = new AppView();

   window.AppController = Backbone.Router.extend({

  initialize: function(){
    $('.tabs a').removeClass('active');
    this.mainView = new window.AppView
  },

  routes: {
    "create":"create",
    "books":"books"
  },

  create: function() {
    $('.tabs a#create').addClass('active');
  },

  books: function() {
    $('.tabs a#books').addClass('active');
  }

      });

     window.App = new AppController();
     Backbone.history.start();

     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:46:28.123

很难猜出您遇到的问题，但我认为如果您在模板呈现后放置 tablesorter 初始化代码，它可能会工作......

所以改变这个：

```
 render: function(){
      var element = jQuery.tmpl(this.template, this.model.toJSON());
      $(this.el).html(element);
      return this;
    }
  });
    $(document).ready(function() 
    { 
        $("#books-table").tablesorter( {sortList: [[0,0], [1,0]]} ); 
    } 
); 
```

对此：

```
 render: function(){
      var element = jQuery.tmpl(this.template, this.model.toJSON());
      $(this.el).html(element);
      // initialize tablesorter here
      $("#books-table").tablesorter( {sortList: [[0,0], [1,0]]} );
      return this;
    }
  }); 
```

# codeigniter - 使用 codeigniter 活动记录的多个 on 子句

> ID：13417189
> 
> 赞同：0
> 
> 时间：2012-11-16T13:02:50.790
> 
> 标签：codeigniter, left-join, on-clause

我需要使用 codeigniter 活动记录对左连接查询执行多个 on 子句。我写了这段代码：

```
$this->db->join('table1', 'table1.col1 = table2.id', 'left');
$this->db->where_not_in('table.col2', $list); 
```

通过执行此代码点火器添加 where not in 子句，而我需要添加与左连接相关的 ON 子句。如果可能的话，我想使用活动记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:10:19.900

```
$this->db->join('table1', 'table1.col1 = table2.id AND col2 NOT IN ('.implode(',', $list).')', 'left'); 
```

# c# - Microsoft Excel Interop 检查 excel sheet 是否支持 Autofit

> ID：13417190
> 
> 赞同：2
> 
> 时间：2012-11-16T13:02:51.087
> 
> 标签：c#, excel, office-interop, excel-interop, office-automation

在与 合作时`Excel Interop`，我遇到了一个问题。在保存之前我使用以下代码自动调整工作表的列。

```
Excel.Worksheet curSheet = (Excel.Worksheet)wsEnumerator.Current;
curSheet.UsedRange.EntireColumn.AutoFit(); 
```

它对我来说很好。然后我遇到了一些特定的 Excel 工作表的问题。如果我自动调整它说`AutoFit method of Range class failed`。

导致问题的 excel 表可[在此处获得](http://www.books4school.com/b4s2013.xls)

现在我想知道的是，是否有某种方法可以检查 excel 表是否支持 Autofit。就像是

```
if(sheet.CanAutoFit())
    curSheet.UsedRange.EntireColumn.AutoFit(); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:20:18.183

如果没有`sheet.CanAutoFit()`，那么你总是可以这样做：

```
try {
    curSheet.UsedRange.EntireColumn.AutoFit();
} catch (TheSpecificExcelException exc)
{ ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:56:05.750

问题是工作表受到保护。为了处理这个问题，我使用了`try` `catch`异常处理。所以已经解决了。

# php - 两个表列之间与mysql的模式比较

> ID：13417194
> 
> 赞同：3
> 
> 时间：2012-11-16T13:03:09.463
> 
> 标签：php, mysql, compare

一个简单的问题是`preg_match`PHP 和`like`mysql 的查询是一样的吗？

**主要问题：**

考虑以下是我的两个表 table1 和 table2

**表 1**                                                                       **表 2**

```
+--------+-------------+ +--------+------ ------------------------------------+
| 身份证 | 型号 | | 身份证 | 型号 |
+--------+-------------+ +--------+------ ------------------------------------+
| 1 | iPad 2 WiFi 16GB | | 1 | iPad2 WiFi 16GB |
| 2 | iPhone 4S 16GB | | 2 | iPhone4S 16GB |
| 3 | iPod Touch(第 4 代)8GB | | 3 |iPod Touch 第 4 代 8GB |
+--------+-------------+ +--------+------ ------------------------------------+

```

现在我想做的是比较这两个表，如您所见`iPad 2 WiFi 16GB`，and `iPad2 WiFi 16GB`or `iPod Touch(4th Gen)8GB`and`iPod Touch 4th Generation 8GB`两者都相同，但它不显示我是否输入查询`where Table1.model = Table2.model`，因为它们不完全匹配。我想做的是通过使用`like`或任何其他方式将这些行与mysql查询进行比较，以便比较两个相似的表行。请让我知道如何编写这样的 sql 查询。

我尝试了以下 sql 查询，但它没有返回所有行，就像它没有返回上面示例中提到的那些类型的行一样。

```
SELECT table1.model as model1, table2.model as model2
FROM table1,table2 WHERE table1.model REGEXP table2.model 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:13:02.733

两个问题 - 描述是标准的（描述不会改变）还是由用户输入？如果它们是标准的，则添加一个整数列并在此列上进行比较。

如果它是由用户输入的，那么您的工作会更加复杂，因为您正在寻找更模糊的搜索。我使用二元搜索算法对两个字符串之间的相似度进行排序，但这不能直接在 mySQL 中完成。

代替模糊搜索，您可以使用 LIKE，但如果您最终将“%”放在搜索词的开头，它的效率仅限于执行表扫描。此外，这意味着您可以在您选择的子字符串部分上获得匹配，这意味着您需要提前知道子字符串。

一旦我知道您要做什么，我会很乐意详细说明。

EDIT1：好的，鉴于您的详细说明，您将需要进行模糊样式搜索，正如我所提到的。我使用二元组方法，该方法涉及获取用户输入的每个条目并将其拆分为 2 或 3 个字符的块。然后我将这些块中的每一个存储在另一个表中，每个条目都键入回实际描述。

例子：

描述1：“快速向前跑” 描述2：“快速向前跑”

如果你将每个分成 2 个字符块 - 'A'、'f'、'fa'、'as'、'st'......

然后，您可以比较与两个字符串匹配的 2 个字符块的数量，并获得一个“分数”，这将意味着两者之间的准确性或相似性。

鉴于我不知道您使用的是哪种开发语言，我将省略实现，但这是需要在 mySQL 中不明确地完成的事情。

或者懒惰的选择是使用像亚马逊这样的云搜索服务，它会根据你给它的术语提供搜索……但不确定它们是否允许你不断添加新的描述来考虑，并且根据你的应用程序，它可能有点贵（恕我直言）。

R

有关二元组实现的另一篇 SO 帖子 - 请参阅此[SO 二元组/模糊搜索](https://stackoverflow.com/questions/3208743/php-fuzzy-search-matching)

---根据提问者的详细说明更新---

首先，我假设您阅读了我提供的链接上的理论..其次，我会尽量保持它与 DB 无关，因为它不需要 mySQL（尽管我使用它，它的工作原理不止于此）美好的）

好的，所以只有当可能的匹配项相对较小时，bigram 方法才能在创建/比较内存中的数组时正常工作，否则它会很快受到表扫描性能的影响，例如没有索引的 mysql 表。因此，您将利用数据库的优势来帮助您进行索引。

您需要一张表格来保存用户输入的“术语”或您要比较的文本。最简单的形式是一个有两列的表，一个是一个唯一的自增整数，它将被索引，我们将在下面调用 hd_id，如果字符串很短，第二个是 varchar(255)，如果可以，则为 TEXT变长 - 你可以随意命名。

然后，您需要创建另一个至少包含三列的表 - 一个用于引用列返回到另一个表的自动递增列（我们将在下面将此称为 hd_id），第二个将是 varchar()最多说 5 个字符（这将保存你的二元组），我们将在下面称之为“二元组”，第三个是下面称为 b_id 的自动递增列。该表将保存每个用户条目的所有二元组，并与整个条目相关联。您需要自己索引 varchar 列（或在复合索引中按顺序排列）。

现在，每次用户输入您要搜索的术语时，您需要在第一个表中输入该术语，然后将其分解为二元组，并使用对整个术语的引用将每个块输入到第二个表中第一个表来完成关系。这样，您在 PHP 中进行剖析，但让 mySQL 或任何数据库为您进行索引优化。在二元组阶段存储表 1 中为计算阶段生成的二元组数量可能会有所帮助。以下是 PHP 中的一些代码，可让您了解如何创建二元组：

```
// split the string into len-character segments and store seperately in array slots
function get_bigrams($theString,$len)   
{
   $s=strtolower($theString);
   $v=array();
   $slength=strlen($s)-($len-1);     // we stop short of $len-1 so we don't make short chunks as we run out of characters

   for($m=0;$m<$slength;$m++)
   {
      $v[]=substr($s,$m,$len);
   }
   return $v;
} 
```

不要担心字符串中的空格——如果您考虑模糊搜索，它们实际上真的很有帮助。

所以你得到二元组，将它们输入一个表格，通过和索引列链接到表 1 中的整体文本......现在怎么办？

现在，每当您搜索诸如“我最喜欢的要搜索的术语”之类的术语时，您都可以使用 php 函数将其转换为二元数组。然后，您可以使用它在二元表 (2) 上创建 SQL 语句的 IN (..) 部分。下面是一个例子：

```
select count(b_id) as matches,a.hd_id,description, from table2 a
inner join table1 b on (a.hd_id=b.hd_id)
where bigram in (" . $sqlstr . ")
group by hd_id order by matches desc limit X 
```

我将 $sqlstr 保留为 PHP 字符串引用 - 您可以使用 implode 或从 get_bigrams 返回的数组上的任何内容，将它自己构造为与 bigram 函数的逗号分隔列表，或者如果您也喜欢参数化。

如果正确完成，上面的查询会根据您选择的二元组的长度返回最匹配的模糊搜索词。您选择的长度具有基于您预期的整个搜索字符串长度的相对效力。

最后 - 上面的查询只是给出了一个模糊匹配等级。您不仅可以比较匹配项，还可以比较匹配项与整体二元组计数来进行改进和增强，这将有助于消除长搜索字符串与短字符串相比的偏差。我已经停在这里了，因为在这个时刻它变得更加特定于应用程序。

希望这可以帮助！

R

# xml - SelectSingleNode : 跳过意外的 xpath

> ID：13417197
> 
> 赞同：1
> 
> 时间：2012-11-16T13:03:26.030
> 
> 标签：xml, xml-parsing, xsd, selectsinglenode, parsexml

我正在尝试使用 xpath 从 xml 读取值。我已经创建了 XmlNamespaceManager 并使用我的 xml 文件添加了所有前缀、uri 对。

我有一组 xpath，我需要遍历所有 xpath 并从 xml 中搜索相关数据。

我正在使用下面的代码

```
if (myXmlDocument.DocumentElement != null)
{
    var selectSingleNode = myXmlDocument.DocumentElement.SelectSingleNode(xPath, myNamespaceManager);
    if (selectSingleNode != null) 
        value = selectSingleNode.InnerText; 
} 
```

我的问题是——当我传递这样的xpath，其前缀没有包含在xml中（所以我的namespaceManager不包含它的前缀或命名空间），它会抛出一个异常“命名空间前缀'XXX'没有定义。”</p>

我只是想跳过这些意想不到的 xpath。

有什么好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:04:37.057

作为一个快速修复，我正在使用 try catch 并检查异常是否属于 XPathException 类型并且消息是否包含“未定义命名空间前缀 *”然后跳过它，但我真的不喜欢这样。

# tcp - RabbitMQ“僵尸”消费者

> ID：13417198
> 
> 赞同：7
> 
> 时间：2012-11-16T13:03:26.307
> 
> 标签：tcp, rabbitmq, amqp

我在 EC2 上使用 Spot 实例从 RabbitMQ 队列中消费。每个作业都需要几秒钟，并且需要手动“确认”。

实例终止时会出现问题。没有时间彻底关闭 AMQP 消费者，所以我留下的 RabbitMQ 服务器仍然认为死去的消费者仍然存在。它不会重新提供他们的工作，它仍然会为他们提供新的工作。

如何让 RabbitMQ 自动超时僵尸消费者并将其从工作池中删除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T01:08:57.390

我建议在 RabbitMQ 连接上设置[Heartbeat属性。](http://www.rabbitmq.com/heartbeats.html)如果心跳停止，RabbitMQ 最终会切断连接并将未确认的消息放回队列中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T18:47:56.710

我和你在同一个地方，并通过在消费者端设置连接心跳属性来解决它（Node.Js 使用 node_amqp 模块）。与“僵尸”消费者一起关闭并删除了连接。未确认的作业返回到就绪状态。

# javascript - Dojo DataGrid 中带有回调的格式化程序

> ID：13417200
> 
> 赞同：0
> 
> 时间：2012-11-16T13:03:29.160
> 
> 标签：javascript, dojo, callback, dojox.grid.datagrid, dojox.grid

我正在尝试将自定义格式化程序添加到 Dojo DataGrid。据我所知，这个格式化程序应该返回一个带有 html 的字符串以进行演示。

我想在单击时呈现带有 js 回调的链接，即

```
<a href="javascript:void(0)" onclick="callMeBack()">value</a> 
```

问题是我不想有一个全局函数`callMeBack()`，而是内联编写回调函数。但我似乎无法让它发挥作用。到目前为止，我写了这个：

```
 function callMeBack() { ... }
 var structure = [
            {name:"name", field:"name", width: "200px", formatter: function(name) {
                var link = domConstruct.create("a", {innerHTML: name});
                domAttr.set(link, "href", "javascript:void(0)");
                on(link, "click", callMeBack);
                return link.outerHTML;
            }},
            ....                
        ]; 
```

问题似乎是点击回调没有被注册。考虑到网格中使用的 DOM 节点可能会在返回字符串表示之后构建，这很容易理解。

但我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:21:20.830

一种可能的方法是定义一个像 xx.yy.callmeback GLOBALLY 这样的函数，以便找到函数定义。但我不觉得这是最好的方法。

# autohotkey - 结合两个脚本

> ID：13417201
> 
> 赞同：2
> 
> 时间：2012-11-16T13:03:31.103
> 
> 标签：autohotkey

我在游戏中使用了一些简单的自动触发脚本，我想将它们合并到一个脚本中。

我尝试了一些东西，但无法使其工作......脚本是：

```
~$*[::
Loop                
{
GetKeyState, var, [, P
If var = U
    Break
Send {q}
sleep 200
} 
```

其他3个都一样，我只是换了`Send {key}`。换句话说，当我按住`[`键时，我希望点击`q`、`w`、`e`和`Lmouseclick`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-07T20:00:47.383

如果我正确理解这一点，您可以简单地执行以下操作：

```
[::
{
    Send, q
}
return

]::
{
    Send, qwe
    MouseClick, left
}
return 
```

# classification - 3 种不同输出的召回和精度计算

> ID：13417203
> 
> 赞同：0
> 
> 时间：2012-11-16T13:03:38.633
> 
> 标签：classification, precision-recall

我的分类系统将产生 3 个输出，告诉用户图像属于哪个类别。假设类别为 A、B 和 C。以下是矩阵的示例：

```
 A     B     C
   A   10     5     2

   B   0     20     2

   C   0      0    20 
```

我对公式 Precision = tp/tp + fp 和 Recall = tp/tp+fn 有点困惑，因为我不确定在这种情况下如何应用真阳性、真阴性、假阳性和假阴性。

有人可以帮忙吗？非常感谢您的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T04:20:26.457

您一次可以处理一个类别。

例如，您`A`首先处理。然后你的混淆矩阵如下所示：

```
 A   Not A
     A   10     7 = (5+2)
 Not A    0    42 = (20+2+0+20) 
```

所以在这种情况下，

```
 # true positive = 10  (A->A)
 # true negative = 42  (Not A->Not A)
 # false negative = 7  (A->Not A)
 # false positive = 0  (Not A->A) 
```

类似的事情可以应用于类别`B`和`C`。

# c# - 在 .NET 的一个解决方案中对多个项目进行代码签名

> ID：13417214
> 
> 赞同：3
> 
> 时间：2012-11-16T13:04:49.477
> 
> 标签：c#, .net, code-signing, solution, signtool

我是 .Net 的新手，我收到了一项任务，我应该用证书签署现有的 WPF .net 解决方案。问题是，该解决方案由几个项目组成，其中一些是安装程序，一个是更新服务，有几个库，一个是实际应用程序。我们正在分发安装程序供人们使用。

所以我的问题是：我需要签什么？到目前为止，我们只是在 Visual Studio 之外签署了已编译的安装程序，但我不确定这是否足够。我应该单独签署所有项目吗？是否有一些自动化功能，或者我每次都必须通过signtool手动签名？还有很多关于clickonce签名，强名称，签名程序集，签名清单，签名文件的文本......我对这一切有点迷茫，所以有人可以澄清一下这些的主要区别和用法是什么选项？十分感谢 ：）

# excel - 通过移动折线图更改excel数据

> ID：13417216
> 
> 赞同：0
> 
> 时间：2012-11-16T13:05:08.790
> 
> 标签：excel, charts, interactive, excel-2002

我正在使用 excel 2002，我希望能够在折线图上移动标记，以便更改数据。我只能找到一篇提到此功能的帖子。[http://www.excelbanter.com/showthread.php?t=138369](http://www.excelbanter.com/showthread.php?t=138369)

Excel 内置帮助没有帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:17:17.867

我的错，似乎你可以自动完成。如果它们只是您输入的值，那么直截了当，如果它是一个公式，它会显示一个目标搜索框。

# c# - Page.MaxPageStateFieldLength 和 ViewState 性能

> ID：13417218
> 
> 赞同：1
> 
> 时间：2012-11-16T13:05:23.263
> 
> 标签：c#, asp.net, iis, webforms, viewstate

我最近在查看我的 web.config 并打开了关于`Page.MaxPageStateFieldLength` [http://msdn.microsoft.com/en-us/library/system.web.ui.page.maxpagestatefieldlength.aspx的 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.web.ui.page.maxpagestatefieldlength.aspx)

默认设置为`-1`意味着 _VIEWSTATE 字段将在页面上以大块的形式连续写入。

将其拆分成块（即将属性设置为正数）是否有任何性能优势？我们网站的单个页面上有大量 ViewState 数据，使用 Telerik`RadScheduler`控件，人们抱怨速度很慢。

页面已经被 gzip 压缩并且 ViewState 在需要的地方被关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:32:40.703

不，拆分视图状态没有性能优势。

当页面中的 ViewState 变得非常大时，可能会出现问题，因为某些防火墙、防病毒软件和代理会阻止访问包含如此大 ViewState 大小的页面。

为此，ASP.NET 2.0 引入了 ViewState Chunking 机制。

# c# - Mono.Addin 实现不检索插件

> ID：13417219
> 
> 赞同：3
> 
> 时间：2012-11-16T13:05:26.667
> 
> 标签：c#, plugins, mono.addins

我正在使用 Mono.Addins 框架、C# 和 Visual Studio 2010 编写一个可扩展的应用程序。

我的应用程序的结构如下：

项目1：

```
namespace Plugins
{
    [TypeExtensionPoint]
    public interface IPlugin<InitParamsType>
    {
        void Refresh();

        string PlugInName { get; }

        void Initialize(InitParamsType parameters);
    }

    [TypeExtensionPoint]
    public interface IOrganizerPlugin : IPlugin<string>
    {
        bool AllowsToEditBrandCode { get; }

        UserControl GetUI();
    }

    public interface IPluginHost<PluginSpecalizedType>
    {
        void EmbedPlugin(PluginSpecalizedType plugin);
    }
} 
```

项目2（参考项目1）：

```
 [assembly: AddinRoot("App.Organizer", "1.0")]
namespace App.Organizer
{
    public partial class frm_Supplier_Managed : Form, IPluginHost<IOrganizerPlugin>
        {

        public frm_Supplier_Managed()
        {
                 AddinManager.Initialize();
                AddinManager.Registry.Update(null);

                foreach (IOrganizerPlugin Addin in AddinManager.GetExtensionObjects(typeof(IOrganizerPlugin)))
                {
                    EmbedPlugin(Addin);
                }
         }

        public void EmbedPlugin(IOrganizerPlugin plugin)
        {
           //embedding UI and so on..
        }
        }
 } 
```

项目3（参考项目1）：

```
[assembly: Addin("App.OrganizerPro", "1.0")]
[assembly: AddinDependency("App.Organizer", "1.0")]

namespace App
{
    [Extension]
    public class MainPlugIn : IOrganizerPlugin
    {
        public void Refresh()
        {
            return;
        }

        public string PlugInName
        {
            get { return ""; }
        }

        public void Initialize(string supplierCode)
        {
        }

        public UserControl Interface
        {
            get { return null; }
        }

        public bool AllowsToEditBrandCode
        {
            get { return true; }
        }

        public UserControl GetUI()
        {
            return null;
        }
    }
} 
```

问题是：在 foreach 语句中没有产生任何插件。

ps：所有.dll都编译在同一个目录下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T18:41:26.340

这里的问题是 IOrganizerPlugin 的扩展点是在 project1 中定义的，它既不是插件也不是插件根。解决方案是在project2中添加这个引用：

[程序集：ImportAddinAssembly（“project1.dll”）]

这样，project1 就成为 App.Organizer 加载项根目录的一部分，并且 project1.dll 中的扩展点将被正确注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:51:47.233

不知道为什么或是否有一些实现原因，但是将专用插件接口（IOrganizerPlugin）移动到与插件主机相同的程序集中对我有用。

# c - 有没有一种简单的方法可以从文件中使用 SDL 创建字符串？

> ID：13417221
> 
> 赞同：0
> 
> 时间：2012-11-16T13:05:30.067
> 
> 标签：c, string, file, sdl

还是使用常用的 C 函数更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:16:43.330

SDL 中有一个 I/O API，我不确定它是否更容易，但它应该是可移植的。这些是相关的功能：

```
SDL_RWops *SDL_RWFromFile(const char *file, const char *mode); // open file
SDL_RWread(ctx, ptr, size, n); //read from file
SDL_RWclose(ctx)   //close file 
```

[这里](http://www.libsdl.org/cgi/docwiki.cgi/SDL_RWread)有一个例子，展示了如何打开和读取文件。

```
#include <stdio.h>
#include "SDL_rwops.h"
int main()
{
  int blocks;
  char buf[256];
  SDL_RWops *rw=SDL_RWFromFile("file.bin","rb");
  if(rw==NULL) {
    fprintf(stderr,"Couldn't open file.bin\n");
    return(1);
  }

  blocks=SDL_RWread(rw,buf,16,256/16);
  SDL_RWclose(rw);
  if(blocks<0) {
    fprintf(stderr,"Couldn't read from file.bin\n");
    return(2);
  }

  fprintf(stderr,"Read %d 16-byte blocks\n",blocks);
  return(0);
} 
```

编辑：这里有一个关于文件API的教程，加载图像时可能更容易使用：

[http://www.aspfree.com/c/a/c-sharp/game-programming-using-sdl-the-file-io-api/](http://www.aspfree.com/c/a/c-sharp/game-programming-using-sdl-the-file-io-api/)

# java - 用SVNkit如何识别一个SVN路径是目录还是文件？

> ID：13417223
> 
> 赞同：2
> 
> 时间：2012-11-16T13:05:44.293
> 
> 标签：java, svn, svnkit

假设你有一个指定的 SVN 路径，如下所示，我怎么知道这个项目是 svn 目录还是 svn 文件。谢谢。

```
http://cvs-server.test.com:8001/svn/test 
```

**更新**

```
 SVNURL svnUrl = SVNURL.parseURIEncoded(url);
            SVNRepository repos = SVNRepositoryFactory.create(svnUrl);
            ISVNAuthenticationManager authManager = 
            SVNWCUtil.createDefaultAuthenticationManager("user1","123");

            repos.setAuthenticationManager(authManager);

            SVNNodeKind nodeKind = repos.checkPath(url, repos.getLatestRevision()); 
```

为什么我`none`什至得到 url 是一个文件？我确信这个 url 存在于 SVN 中。ORZ... SVNkit 有很多错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:43:03.200

如果您遇到错误，请向 [http://issues.tmatesoft.com/issues/SVNKIT](http://issues.tmatesoft.com/issues/SVNKIT)报告。

`checkPath`不适用于 URL，它适用于绝对路径（即相对于存储库根目录）或相对路径（相对于为其`SVNRepository`构造实例的 URL）——有关更多详细信息，请参阅其 javadoc

所以你可以使用这个代码

```
SVNNodeKind nodeKind = repos.checkPath("", repos.getLatestRevision()); 
```

甚至

```
SVNNodeKind nodeKind = repos.checkPath("", -1); 
```

第二种变体会更快，因为它不执行`getLatestRevision`请求，并且它是一种相当流行的检查 URL 存在的方法，它经常在 SVNKit 本身中使用。

或者，您可以使用绝对路径（应以“/”开头），但要指定的路径取决于您的存储库根目录。您可以通过运行获取存储库根目录

```
$ svn info "http://cvs-server.test.com:8001/svn/test" 
```

或通过运行

```
repos.getRepositoryRoot(true); 
```

来自 SVNKit 代码。绝对路径应以“/”开头，并且相对于获得的存储库根目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T13:19:02.017

尝试这样的事情：

```
String url = "http://cvs-server.test.com:8001/svn/test";
SVNURL svnUrl = SVNURL.parseURIEncoded(url);
SVNRepository repos = SVNRepositoryFactory.create(svnUrl);
ISVNAuthenticationManager authManager = SVNWCUtil.createDefaultAuthenticationManager(DEFAULT_USER, DEFAULT_PASS);
repos.setAuthenticationManager(authManager); 
SVNNodeKind nodeKind = repos.checkPath("", repos.getLatestRevision()); 
```

`nodeKind`将`FILE`是`DIR`或`NONE`之一

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-26T10:08:28.107

这是正确的方法：

```
public static boolean isFolder(String url) throws SVNException {
    SVNURL svnURL = SVNURL.parseURIEncoded(url);
    SVNRepository repos = SVNRepositoryFactory.create(svnURL);
    ISVNAuthenticationManager authManager = SVNWCUtil.createDefaultAuthenticationManager(DEFAULT_USER, DEFAULT_PASS);
    repos.setAuthenticationManager(authManager);
    SVNNodeKind nodeKind = repos.checkPath("", repos.getLatestRevision());
    System.out.println(nodeKind);
    return nodeKind != null && nodeKind == SVNNodeKind.DIR;
} 
```

# c# - AddWorkingDays 的逻辑

> ID：13417226
> 
> 赞同：0
> 
> 时间：2012-11-16T13:05:48.083
> 
> 标签：c#, datetime

我看过许多与将工作日（不包括周末）添加到日期参数相关的帖子，我尝试使用其中的一些。但是，我选择的所有解决方案在某些情况下都失败了。以下是我目前正在使用的代码：

```
private DateTime AddWorkingDays(DateTime dateValue, int noOfDays) 
    {
        // determine if we are adding or subtracting the days
        int nDirection = noOfDays < 0 ? -1 : 1;

        // move ahead the day of week
        int nWeekday = noOfDays % 5;
        while (nWeekday != 0)
        {
            dateValue = dateValue.AddDays(nDirection);
            if (dateValue.DayOfWeek != DayOfWeek.Saturday
                && dateValue.DayOfWeek != DayOfWeek.Sunday)
            {
                nWeekday -= nDirection;
            }
        }

        // move ahead the number of weeks
        int nDayweek = (noOfDays / 5) * 7;
        dateValue = dateValue.AddDays(nDayweek);

        return dateValue;
    } 
```

失败的示例场景：日期：2012 年 11 月 24 日（星期六），天数：5（或 10） 结果：2012 年 12 月 1 日（或 2012 年 12 月 8 日），预期结果为 2012 年 11 月 30 日 11 月 25 日失败, 2012 也是.. 和我猜的类似情况，输入日期在周末。

有人可以帮忙解决这种情况吗？或者提供更好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:15:20.793

此实现（实际上与您的非常相似）给出了您期望的结果：

```
 public static DateTime AddWorkingDays(this DateTime date, int days)
    {
        if (days == 0)
            return date;
        int sign = days < 0 ? -1 : 1;
        while (days % 5 != 0 || !date.IsWorkingDay())
        {
            date = date.AddDays(sign);
            if (!date.IsWorkingDay())
                continue;
            days -= sign;
        }
        int nWeekEnds = days / 5;
        DateTime result = date.AddDays(days + nWeekEnds * 2);
        return result;
    }

    public static bool IsWorkingDay(this DateTime date)
    {
        return !(date.DayOfWeek == DayOfWeek.Saturday || date.DayOfWeek == DayOfWeek.Sunday);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:32:56.093

基本上，您要做的就是在您的 中添加一天`startDate`，只要还有`noOfDays`。本质上，这真正意味着我们需要某种计数器，如果这一天是周末，它不会增加。如果我们应用这个逻辑，它变得非常简单：

```
 public static DateTime AddWorkingDays(DateTime startDate, int amount)
    {
        // It really is that simple!
        if (amount <= 0)
            return startDate;

        var ret = startDate;

        for (int i = 0; i < amount; )
        {
            var nextDay = ret.AddDays(1);

            // If it's saturday or sunday, just add it, but don't increment i. That way we'll
            // just keep going and virtually "skipping" the weekends.
            if (nextDay.DayOfWeek == DayOfWeek.Saturday || nextDay.DayOfWeek == DayOfWeek.Sunday)
            {
                ret = ret.AddDays(1);
                continue;
            }

            ret = ret.AddDays(1);
            i++;
        }

        return ret;
    } 
```

基本上，所有代码所做的只是获取您提供的开始日期以及您想要添加的天数。它需要它，并循环直到用完添加的天数。如果它在周末达到一天，它根本不会增加`i`，实际上只是忽略了那些日子。如果您希望当天（如果是工作日）也计入工作日总数，则可能需要进行一些细微调整，但除此之外，这应该像您描述的那样工作。

# c - C结构：成员顺序和内存分配

> ID：13417230
> 
> 赞同：2
> 
> 时间：2012-11-16T13:06:08.757
> 
> 标签：c, memory, structure, member

而不是写一个像这样的结构，

```
typedef struct {
    uint8 len;          // Command length (cmd ... crc)
    uint8 cmd;          // Command code
    uint8 data_length;  // Data length
    uint8 data[12];     // Data: max 12 Byte
    uint8 crc_h;        // CRC value MSB
    uint8 crc_l;        // CRC value LSB
}CMD_TYPE; 
```

我可以这样写吗？

```
typedef struct { uint8 len, cmd, data_length, data[12], crc_h, crc_l; }CMD_TYPE; 
```

如果有可能，那么为什么人们不将相似的成员分组？！内存分配方案会发生什么，除了内存丢失之外，改变成员的顺序是否有任何隐藏的副作用（如果我是对的，由于填充！）。

如果这看起来很愚蠢，请原谅我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:09:00.980

您可以两种方式编写，但您会注意到第一种方式比第二种方式更具可读性，并且由于数据结构在*C*中非常重要，因此实际上最好以更详细的方式定义它们。

您编写`struct`声明的方式（每个字段一行，或同一行上相同类型的每个字段）不会影响运行时发生的事情。

内部成员字段的顺序`struct`非常重要。

填充，或`sizeof`您的`struct`，或其对齐方式仅取决于字段及其顺序（以及目标处理器和 ABI），而不取决于您编写它们的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:10:53.120

> 为什么人们不将相似的成员分组？！

结构是对相似成员的分组。每行声明多个变量只有在它们密切相关时才有用，例如：

```
int width, height;
char *begin, *end; 
```

`for`或者当您需要在循环中声明多个变量时。

请注意，单独的行更容易阅读。人类在短的、对齐的列（二维）而不是长的行（一维）中读得很好。

> 内存分配方案会发生什么，除了内存丢失之外，改变成员的顺序是否有任何隐藏的副作用（如果我是对的，由于填充！）。

没有什么我知道的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T19:04:07.483

在这里，您将看到标准对填充和内存分配的规定。![这直接来自 ISO C 标准文档][1][1]：http: [//i.stack.imgur.com/UzgDY.png](http://i.stack.imgur.com/UzgDY.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T13:10:19.883

您的代码唯一有效的是您具有相同的类型（无符号字节）。

这不是最常见的情况+在每个成员的上方或右侧都有评论总是很好的。

# iphone - 当我单击按钮时刷新 tableView

> ID：13417235
> 
> 赞同：-1
> 
> 时间：2012-11-16T13:06:31.570
> 
> 标签：iphone, ios, xcode, ipad

我想通过添加一个按钮来插入和删除数据，当我单击我的按钮查询有效但数据没有立即插入或删除我必须重新启动应用程序才能在我的 tableView 中查看插入或删除的行，我还添加了 tableView 重新加载数据，但它在这里不起作用是这个视图中的一些和平代码我想插入或删除行

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    isLoadingAlphabets=1;

    DBHandler *obj= [[DBHandler alloc]init];
    Array = [obj loadFavoriteWords];

    isSearching = 0;
    displayItems = [[NSMutableArray alloc] initWithArray:Array];    
    // Do any additional setup after loading the view, typically from a nib.
      [tableview reloadData];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
    - (void)dealloc {
        [tableview release];
        [super dealloc];
    }
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if(isSearching){
        return [displayItems count];   
    }
    else {
        NSLog(@"Count: %d", [Array count]);
        return [Array count];
    }
} 
```

这是我在收藏夹中添加或删除行的按钮

```
- (void)viewDidLoad
{
     [super viewDidLoad];

    DBHandler* db=[[DBHandler alloc]init];
   // NSLog(@"asas%@",detail_word);
    if(![db isAlreadyInFavorites:word_id])
         {
            [btnFavorite setImage:[UIImage imageNamed: @"star-grey.png"  ] forState:UIControlStateNormal];
        } else {
            [btnFavorite setImage:[UIImage imageNamed:@"star-yellow.png"] forState:UIControlStateNormal ];  
        }
    // Do any additional setup after loading the view from its nib.
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
- (IBAction)btn:(id)sender {
    DBHandler *db = [[DBHandler alloc]init];

    if(![db isAlreadyInFavorites:word_id]){

        [btnFavorite setImage:[UIImage imageNamed:@"star-yellow.png"] forState:UIControlStateNormal];
        [db addFavoriteWord:word_id];

    }
    else{

        [db deleteFavoriteWord:word_id];

        [btnFavorite setImage:[UIImage imageNamed:@"star-grey.png"] forState:UIControlStateNormal];

    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:11:58.117

在您的 Button 操作中重新加载表格视图。

```
 - (IBAction)btn:(id)sender {
            DBHandler *db = [[DBHandler alloc]init];

            if(![db isAlreadyInFavorites:word_id]){

                [btnFavorite setImage:[UIImage imageNamed:@"star-yellow.png"] forState:UIControlStateNormal];
                [db addFavoriteWord:word_id];

            }
            else{

                [db deleteFavoriteWord:word_id];

                [btnFavorite setImage:[UIImage imageNamed:@"star-grey.png"] forState:UIControlStateNormal];

            } 

// Upadate Your Array Here

          yourarray=[db getfavdata ];

           [tableview reloadData];

        }

if your table is in another view then reload the tableview in `viewwillAppear` method.

     -(void)viewWillAppear:(BOOL)animated
        { 
 DBHandler *db = [[DBHandler alloc]init];
     yourarray=[db getfavdata ];
        [tableview reloadData];

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:14:24.253

只需从您的 displayItems 或 Array 中删除所有数据，然后从数据库中再次添加这些新数据，如波纹管

```
- (IBAction)btn:(id)sender {
    DBHandler *db = [[DBHandler alloc]init];

    if(![db isAlreadyInFavorites:word_id]){

        [btnFavorite setImage:[UIImage imageNamed:@"star-yellow.png"] forState:UIControlStateNormal];
        [db addFavoriteWord:word_id];

    }
    else{

        [db deleteFavoriteWord:word_id];

        [btnFavorite setImage:[UIImage imageNamed:@"star-grey.png"] forState:UIControlStateNormal];

    } 
    Array = [db loadFavoriteWords];
    if([displayItems count]>0){
          [displayItems removeAllObjects];
    }
    displayItems = [[NSMutableArray alloc] initWithArray:Array];    
    [tableview reloadData];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:14:02.777

```
You should update your tableview datasource array after adding or deleting any object. In your case you are not resetting your Array in - (IBAction)btn:(id)sender method. Try below code-

- (IBAction)btn:(id)sender {
        DBHandler *db = [[DBHandler alloc]init];

        if(![db isAlreadyInFavorites:word_id]){

            [btnFavorite setImage:[UIImage imageNamed:@"star-yellow.png"] forState:UIControlStateNormal];
            [db addFavoriteWord:word_id];

        }
        else{

            [db deleteFavoriteWord:word_id];

            [btnFavorite setImage:[UIImage imageNamed:@"star-grey.png"] forState:UIControlStateNormal];

        } 
       Array = [obj loadFavoriteWords];
       [tableview reloadData];
    } 
```

# c++ - 比较 C++ STL 列表迭代器

> ID：13417236
> 
> 赞同：4
> 
> 时间：2012-11-16T13:06:32.390
> 
> 标签：c++, list, stl

我的应用程序中有一个 C++ STL 对象列表，它是在启动时构建的，之后从未更改过；指向同一个列表节点的两个独立迭代器是否总是比较相等？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T13:12:44.287

是的。前向迭代器的要求之一是：

> C++11 22.4.5/6：如果`a`和`b`都是可解引用的，那么`a == b`当且仅当`*a`和`*b`绑定到同一个对象。

标准容器上的所有迭代器（至少）都是前向迭代器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T13:10:19.713

是的，根据 cplusplus.com：

[http://www.cplusplus.com/reference/std/iterator/ForwardIterator/](http://www.cplusplus.com/reference/std/iterator/ForwardIterator/)

> 接受平等/不平等比较。
> 相等的迭代器意味着指向相同的元素

（我不是这个网站的粉丝，但我相信它在这里。）

* * *

cppreference.com 同意并声明更多，即所有 InputIterators（可以从中读取）都是 EqualityComparable，请参阅：

[http://en.cppreference.com/w/cpp/concept/InputIterator](http://en.cppreference.com/w/cpp/concept/InputIterator)

# javascript - 当 div 出现时运行 javascript

> ID：13417253
> 
> 赞同：1
> 
> 时间：2012-11-16T13:07:36.380
> 
> 标签：javascript, jwplayer

当 DIV 出现时，我需要运行 javascript（停止 JWPlayer）。它显示大约。页面完全加载后 15 秒。

我到目前为止的代码

```
if (document.getElementById("overlay_div")) { jwplayer().stop(); } 
```

我想我的代码在页面加载时寻找overlay_div，而不是在一段时间后（在这种情况下为15秒）

编辑：事实证明 DIV 实际上一直都在那里，但它从 display: none 切换到 display:block 在此时间间隔之后。有什么方法可以运行 div 显示的脚本：块

Edit2：在@elbunuelo 的帮助下，我设法自己解决了这个问题，如果有人需要，下面是代码：

```
var interval = setInterval(function(){
 if (document.getElementById("overlay_main_div").style.display=="block"){ 
      jwplayer().stop(); 
      clearInterval(interval);
 } }, 1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:22:12.323

您可以在 div 之后添加脚本标记，以便在标记到位时运行。

```
<div id="overlay_div"></div>
<script type="text/javascript">
if (document.getElementById("overlay_div")) { jwplayer().stop(); }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:25:14.997

这取决于 div 元素的显示方式：

*   在您的代码中：只需调用该函数；）
*   在第三方代码中：
*   *   如果节点被插入到 DOM 树中，则使用突变事件观察者[https://developer.mozilla.org/en-US/docs/DOM/MutationObserver?redirectlocale=en-US&redirectslug=DOM%2FDOM_Mutation_Observers](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver?redirectlocale=en-US&redirectslug=DOM%2FDOM_Mutation_Observers)
*   *   如果节点以另一种不可检测的方式（CSS 添加）显示，并且作为前一个方法的后备，只需创建一个超时调用，并将其限制为 n 次：

-

```
var times=0;
function divcheck() {
    if (document.getElementById("overlay_div")) { jwplayer().stop(); }
    else if(times<10) { times++; setTimeout(divCheck,1000); }
    }

setTimeout(divCheck,15000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:16:21.367

您是否尝试过使用间隔？即每1000毫秒左右检查一次是否存在div然后停止播放器？

```
var interval = setInterval(function(){
     if (document.getElementById("overlay_div")) { 
          jwplayer().stop(); 
          clearInterval(interval);
     }
}, 1000); 
```

# c++ - 数组指针的影响

> ID：13417255
> 
> 赞同：0
> 
> 时间：2012-11-16T13:07:47.547
> 
> 标签：c++, arrays, memory, pointers

当我们有：

```
#include <iostream>
using namespace std;

int main()
{
    int a[100];
    cout << a[0] << endl;
} 
```

我得到“1”。

但是当我这样改变它时：

```
#include <iostream>
using namespace std;

int main()
{
    int a[100];
    int* b = &a[0];
    cout << a[0] << endl;
    cout << *b << endl;     
} 
```

我得到类似“-1219451320”的东西，每次运行后都会发生变化。

`b`变量的影响是什么，所以`a[0]`发生了变化？例如现在，如果我将其更改为以前的代码，结果将再次为“1”。

在这两种状态下，数组都没有初始化！所以不应该有这样的区别。例如在第一个代码中，如果我们得到“-12242311231”，这并不奇怪，但现在......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T13:10:21.817

您尚未初始化数组，因此这些值是（或可以是）*任意*的。

该标准称它们为**不确定值**。

使用您拥有的两个不同程序，您可以期望获得两个不同的值或相同的值，而没有明显的模式或原因（这是任意的）。您甚至可以从*同一*程序的两次运行中获得不同的值。要初始化，只需编写

```
int a[100] = {};  // All zeroes. :-) 
```

而不是原始数组，请考虑使用**`std::vector`**，例如

```
#include <vector>

// ...
std::vector<int> a( 100 );    // All zeroes 
```

它始终自动初始化。

它也可以调整大小。

# javascript - 在Javascript中使用拆分获取数组的最后一个元素

> ID：13417259
> 
> 赞同：10
> 
> 时间：2012-11-16T13:08:01.277
> 
> 标签：javascript

在使用 javascript 对字符串进行拆分后，我试图获取最后一个数组项。

```
 var str ="Watch-The-Crap-456".split('-')[this.length];
    console.log(str);​​​ 
   // want it to console log 456, now it consoles WATCH which is in array[0] 
```

我试图`[this.length - 1]`让我得到最后一个数组项，但它给了我未定义的，我知道你们中的一些人可能会说创建另一个变量来存储数组，但是看看我们是否可以让事情变得更短很有趣。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-16T13:14:52.990

怎么样：

```
"Watch-The-Crap-456".split('-').pop(); // returns 456 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T13:10:25.497

`this`在尊重中定义（或至少不引用*数组*）。

一种*天真*的方法是两行：

```
var str ="Watch-The-Crap-456".split('-');
console.log(str[str.length - 1]);​​​ 
```

看到它[在行动](http://jsfiddle.net/E2ywM/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T13:13:49.917

你只想要**最后一个元素**吗？你可以这样做：

```
var str ="Watch-The-Crap-456";
console.log(str.slice(str.lastIndexOf('-')+1));​ 
```

在这种情况下，您必须首先定义您的字符串，这是有道理的。我没有看到*任何*你想从字符串文字中获取最后一个元素的情况，你只需编写`str = "456"`并完成它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-22T20:48:50.390

使用下划线，它包含在某些其他库/框架中，例如 Backbone.js：

```
_.last(str.split('-')); 
```

见：[http ://underscorejs.org/#last](http://underscorejs.org/#last)

# c++ - 检测模拟调制解调器上的远程挂断

> ID：13417260
> 
> 赞同：1
> 
> 时间：2012-11-16T13:08:04.203
> 
> 标签：c++, modem, at-command

> **可能重复：**
> [Hayes AT 命令：检测远程挂断？](https://stackoverflow.com/questions/10253965/hayes-at-commands-detect-remote-hangup)

我正在编写一个 C++ 程序来操作模拟调制解调器。我无法检测到远程挂断。但是我已经能够配置和拨打电话。

有没有办法处理调制解调器中的远程挂断，它不提供和响应远程挂断？

# ruby-on-rails - 如何在设计用户之间建立好友关系并通过api获取每个用户的好友列表？

> ID：13417266
> 
> 赞同：0
> 
> 时间：2012-11-16T13:08:27.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api

我在我的 Web 应用程序中使用 devise 进行身份验证，我的 Web 应用程序也响应 iPhone 应用程序。到目前为止，我只完成了身份验证，所以当 iPhone 应用程序发送用户名和密码时

```
http://localhost:3000/login.json  -d "{'user' : { 'username' : 'sample@yahoo.co.in','password' : 'password'}}" 
```

回应是

> {"user":{"authentication_token":"LayzZw3s3gsNMFRJp1JR","email":"sample@yahoo.co.in","username":"sample@yahoo.co.in"}}

但是现在我需要在 iPhone 应用程序的用户之间建立友谊，即用户必须通过 API 向另一个用户发送好友请求，另一个用户应该收到一个请求

用户接受请求后，应将用户添加到用户的好友列表中，并在用户需要时通过调用API显示用户的好友

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:48:21.970

这与身份验证几乎没有关系。

您需要的是一个`FriendshipRequest`同时属于“询问”用户和“询问”其他用户的模型。当用户想要请求某人成为他的朋友时，他只需`FriendshipRequest`在您的数据库中创建一个。当其他用户查看他的页面时，他看到了该友谊请求并且可以接受它（`Friendship`在数据库中创建一个新对象，它属于两个用户）或丢弃它（销毁`FriendshipRequest`记录或将其标记为已拒绝以供其他用户查看）。

总而言之，您甚至可以只使用`Friendship`带有`accepted`布尔标志的模型。其余的是经典的导轨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:54:20.617

正如 m_x 所说，这与身份验证无关。

您应该创建的是具有多槽关系的用户之间的自引用关联。

一个用户通过友谊有很多朋友（同时有很多 inverse_friends）。

[这在 railscast #163 http://railscasts.com/episodes/163-self-referential-association](http://railscasts.com/episodes/163-self-referential-association)中有很好的解释

在您的场景中，应将 inverse_friend 视为“朋友请求”，并且一旦用户与另一个用户同时具有朋友和反向朋友关系，则应将“友谊”视为接受。

# javascript - Extjs 自定义 vtype

> ID：13417268
> 
> 赞同：3
> 
> 时间：2012-11-16T13:08:39.840
> 
> 标签：javascript, forms, validation, extjs4

我正在尝试使用自定义 vtype 验证文本字段以过滤空格，例如：“”。我在 app.js 中定义了我的自定义 vtype（我使用 mvc 模式）。

```
 Ext.Loader.setConfig({
        enabled : true,
        paths: {
            Ext: 'vendor/ext41/src',
            My: 'app'
        } 
    });
    Ext.apply(Ext.form.field.VTypes, {
        descartarBlanco:  function(value) {
            return /^\s+$/.test(value);
        }
    });

    Ext.application({
        name: 'CRUDManantiales',
        appFolder: 'app',
        controllers: ['Ui','Usuarios'],
        ....
    }); 
```

但是，Firebug 显示此错误：

> TypeError: vtypes[vtype] 不是函数

我认为语法是正确的。但是，我不知道在哪里插入 Vtype 的代码。任何想法 ？。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-17T09:15:02.983

在呈现表单之前，我将自定义 vtypes 放在应用程序的控制器中。

```
Ext.define('MyApp.controller.Main', {
    extend: 'Ext.app.Controller',
    ...
    init: function () {
        var me = this;
        me.control({
            ...
            'form': {
                beforerender: this.applyVtypes
            },
            ...
        })
   },
   ...
   applyVtypes: function() {
       Ext.apply(Ext.form.field.VTypes, {
           descartarBlanco:  function(value) {
               return /^\s+$/.test(value);
           }
       }
   }
   ...    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:54:37.220

当我遇到同样的问题时，我遇到了这个问题，试图找到解决方案。当我将它添加到 Ext.application 中的 'init:' 时，它运行良好。

```
 Ext.application({
            ..., 

            launch: function() { 
                ... 
            }, 

            init: function() {
                Ext.apply(Ext.form.field.VTypes, {
                    descartarBlanco:  function(value) {
                        return /^\s+$/.test(value);
                    }
                }
                console.log(Ext.form.field.VTypes); // for verification
            }
    }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-27T05:51:41.913

您可以配置自己的电子邮件验证。

> xtype:'textfield',
> fieldLabel: 'Email',
> name: 'email',
> maskRe: **/[a-z0-9_.-@+]/i** ,//你可以根据自己的需要进行更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T00:04:50.753

您使用`Ext.Loader`so`Ext.form.field.VTypes`可以稍后在某处被覆盖。尝试在实际使用之前添加 vtype 定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T15:02:13.703

可能是相同的问题，但对于 Ext.data.Types，它仅在类型名称为大写时才有效。当小写字母会收到与您所看到的内容类似的消息时。

# java - JBoss - Spring Web 项目 - 需要在 URL 中包含 jsessionid 才能在 JBoss Cluster 解决方案中保持粘性

> ID：13417274
> 
> 赞同：1
> 
> 时间：2012-11-16T13:09:07.857
> 
> 标签：java, spring, jboss, web, jsessionid

我目前有一个基于 Spring 和 JBoss 7.1.1 的 Web 项目。我们已经实施了具有集群和高可用性的解决方案。我不太了解这方面的事情。

不过，我被告知的是，我需要在 URL 中包含 jsessionid 以确保它与集群中的一个节点保持粘性。

在我的 Spring 安全配置中，我之前添加了以下内容，因为当我访问带有书签的 URL 时，它会将 jsessionid 附加到 URL：

```
<http auto-config="true" disable-url-rewriting="true"> 
```

单独删除它不会使其粘在一个节点上。

谁能告诉我知道这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:24:45.590

您是否尝试将以下配置放入`web.xml？

```
<session-config>
    <tracking-mode>URL</tracking-mode>
</session-config> 
```

据我所知，适用于 Servlet 3.0+。

请记住，您仍然需要`disable-url-rewriting="false"`配置。

# node.js - 在包含 node.js 玉石中使用块

> ID：13417275
> 
> 赞同：1
> 
> 时间：2012-11-16T13:09:12.257
> 
> 标签：node.js, include, pug

我正在尝试在包含中使用块：

例如：layout.jade

```
!!!5
html
    head
    body
        include header
        #footer footer
        block javascript
            script('src'= 'jquery.js') 
```

header.jade

```
h1 header
append javascript
    script
        console.log('Hi, I'm header') 
```

我有 ：

```
<h1>header</h1>
<script>console.log('Hi, I'm header')</script>
<div id="footer" >footer</div>
<script src="jquery.js" ></script> 
```

我会：

```
<h1>header</h1>
<div id="footer" >footer</div>
<script src="jquery.js" ></script>
<script>console.log('Hi, I'm header')</script> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T13:25:26.650

据我所知，块不适用于*包含的文件。*块与该`extends`功能一起使用。因此，您可以修改代码以将 javascript 包含为`include`，或者修改它以使用`extend`

这是使用时的样子`extend`

布局.jade

```
!!!
html
  head
  body
    block header
      h1 header

    block footer
      #footer footer

    block javascript
      script('src'= 'jquery.js') 
```

索引.jade

```
extends layout

append javascript
  script
    console.log('hi'); 
```

# java - Android相机SurfaceView替代

> ID：13417277
> 
> 赞同：0
> 
> 时间：2012-11-16T13:09:19.993
> 
> 标签：java, android, camera, surfaceview

我为 android 设备 2.1 及更高版本开发简单的相机应用程序。我使用标准方式使用 SurfaceView 和 SurfaceHolder 从相机显示预览层。但我知道 2.1 上的相机问题仅在横向模式下才能正确显示相机预览。但我只在我的应用程序中需要纵向模式。是否有其他方法/库可以在 2.1 及更高版本上显示来自相机的用户预览。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T13:40:10.883

您可以向 Camera.onPreviewDisplay 回调添加一个侦听器，从而拦截生成的帧。此时，使用包含像素的给定 byte[] 数据，您几乎可以做任何您想做的事情。例如，您可以将自己的处理算法应用于像素，然后将图像绘制到您想要的任何 ImageView 或 TextureView（自 API 11 起）。

# c - 管道在基本的 shell 实现中

> ID：13417278
> 
> 赞同：0
> 
> 时间：2012-11-16T13:09:21.430
> 
> 标签：c, pipe, output

在一项任务中，我们被要求实现管道。我能够这样做，但我遇到的问题是当我输入命令时

> ls | grep 'a.out'

那么输出是

> a.out
> 
> a.out

但是当我这样做时

> ls | 厕所

输出只出现一次。谁能指出代码中的错误？代码如下：

```
void execute_pipe(char **argv,char **args)
{

int pfds[2];
pid_t pid,pid2;
int status,status2;
pipe(pfds);
if ((pid = fork()) < 0) {    
      printf("*** ERROR: forking child process failed\n");
      exit(1);
 }
if ((pid2 = fork()) < 0) {    
      printf("*** ERROR: forking child process failed\n");
      exit(1);
 }
if (pid==0) {
    close(1);     
    dup(pfds[1]);  
    close(pfds[0]); 
close(pfds[1]);
    if(execvp(argv[0],argv)<0){
        printf("**error in exec");
    }
} 
else if(pid2==0){

    close(0);       
    dup(pfds[0]);  
    close(pfds[1]);
close(pfds[0]);
    if(execvp(args[0],args)<0){
    printf("**error in exec");

}
}
else{
    close(pfds[0]);
    close(pfds[1]);
    while (wait(&status) != pid)  ;
    while (wait(&status2) != pid2)  ;
        }
} 
```

我很确定没有杂散的打印，并且目录中只有一个 a.out。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:14:32.800

`fork`您在父进程和第一个子进程*中*运行第二个。如果`pid`非零，您应该只进行第二次分叉。

# google-maps - google maps 公交路线 html_instructions 语言

> ID：13417283
> 
> 赞同：0
> 
> 时间：2012-11-16T13:09:38.607
> 
> 标签：google-maps, directions

我正在使用 Google Maps Directions API 从 Google Maps API 获取公交模式的路线。

我可以成功读取所有 json 对象并获得我想要的信息，但我有一个问题。

api 返回的 jsonarray 包含有关以希腊语语言向用户发送的下一条指令的信息。

因此，当我尝试解析 html_instructions 时，我得到了英文部分，但我得到了希腊部分的奇怪字母，我该怎么做才能解决这个问题并显示希腊语？

您可以通过运行以下 api 找到 json 的示例。

```
http://maps.googleapis.com/maps/api/directions/json?origin=Athens&destination=Kallithea&sensor=false&departure_time=1354320000&mode=transit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:50:54.323

您可以在请求中添加参数 language=el。

# xml - 使用 Google Maps API 在 VBA 中进行地理定位

> ID：13417285
> 
> 赞同：1
> 
> 时间：2012-11-16T13:09:41.883
> 
> 标签：xml, google-maps, vba

因此，我正要在 VBA 中完成我的地理编码脚本，但在 beta 测试期间，我注意到它无法提取大多数地址的数据，而对于其他地址，它工作得很好。代码如下：

```
Sub newReadXMLData(link As String)
Dim odc As DOMDocument
Dim lat As String
Dim lng As String
Dim location As IXMLDOMElement
Dim locationPath As String
Dim i As Integer

Set odc = New MSXML2.DOMDocument
odc.async = False
odc.Load (link)

locationPath = "GeocodeResponse/result/geometry[location_type='ROOFTOP']/location"
Set location = odc.SelectSingleNode(locationPath)

lat = GetTextValue(location, "./lat")
lng = GetTextValue(location, "./lng")

Debug.Print lat & "; " & lng

End Sub

Function GetTextValue(node As IXMLDOMElement, Optional xpath As String = "") As String
  Dim selectedNode As IXMLDOMElement

  If xpath <> "" And Not node Is Nothing Then
    Set selectedNode = node.SelectSingleNode(xpath)
  Else
    Set selectedNode = node
  End If

  If selectedNode Is Nothing Then
    GetTextValue = ""
  Else
    GetTextValue = Trim(selectedNode.Text)
  End If
End Function 
```

该脚本返回正确的值，例如 for`http://maps.googleapis.com/maps/api/geocode/xml?address=1+Infinite+Loop,+Cupertino,+Santa+Clara,+California+95014&sensor=false` 但它不返回任何内容，例如`http://maps.googleapis.com/maps/api/geocode/xml?address=BAGIENNA+13,+88-100+INOWROCŁAW&sensor=false`。谁能解释这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T09:43:18.333

我认为这可能是编码错误。我让你的两个字符串在浏览器中正常工作，但是当我尝试你的 VBA 代码时，第二个返回 `ZERO_RESULTS`. *INOWROCŁAW*中有一个字符在VBA 中似乎不起作用（我在 Word 2010 中尝试过）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T16:16:05.927

Olle Sjögren 似乎是对的——问题是由地址中的特殊字符引起的。一个简单的字符转换函数就可以完成这项工作。

# objective-c - ARC 是否保证在最后一个强引用消失后立即释放对象？

> ID：13417287
> 
> 赞同：5
> 
> 时间：2012-11-16T13:09:48.010
> 
> 标签：objective-c, ios, macos, xcode4, automatic-ref-counting

特别是，这种代码是否总是按预期工作（其中 MyResourceGuard 是一个在其 init 方法中锁定独占资源并在其 dealloc 方法中释放锁定的对象）：

```
NSLog(@"About to capture some exclusive resource.");
{
  MyResourceGuard* guard = [MyResourceGuard new];
  // Do something with the exclusive resource here.
}
// guard is out of scope, therefore its dealloc should have
// been called right away and the resource should already
// be free again at this point. 
```

我在书籍和博客中读到，与 Java 垃圾收集相比，ARC 会在引用计数减少到零时立即销毁对象（而不是在它自己方便的某个时间），但我还没有在任何官方中读过这个Apple 提供的文档。如果这是真的，为什么我们需要 ARC 引入的新的 @autoreleasepool 关键字？

从调试中，我总是看到对象立即被释放，除非在 try-catch-block 中引发异常，在这种情况下实际上*从未*调用 dealloc（这是 Mac 错误，还是这些可怕的目标之一C 怪事？）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T13:28:08.997

不，如您的示例所示，您没有基于确定性范围的 ObjC 对象的破坏。

例如，这个程序可能会导致死锁：

```
{ MyResourceGuard* guard = [MyResourceGuard new]; }
{ MyResourceGuard* guard = [MyResourceGuard new]; } 
```

如果您需要此功能，您可以做的最好的事情是使用 C++ 类型（[SBRM、RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)）——在 Objective-C++ 中也可用（但不适用于 objc 对象）。

它接近了，但你只需要等到引用计数达到零`-dealloc`才能被调用，这就是保证关闭的原因（*通常 != always*）。这个问题实际上与您永远不会依赖或使用`-retainCount`（如果可用）的原因非常相似。示例：自动释放池、异常、对运行时或 ARC 生成代码的更改、编译器优化、使用具有不同代码生成标志的实现可能会导致 objc 对象的生命周期延长超出范围。

**更新**

clang 网站上 ARC的[整个页面](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#optimization.precise)都很好地阅读了这个主题——包括细节、保证（和缺乏保证），但特别是：

> 6.1。精确的生命周期语义
> 
> 通常，ARC 维护一个不变量，即在 __strong 对象中保存的可保留对象指针将在对象的完整正式生命周期内保留。受此不变量约束的对象具有精确的生命周期语义。
> 
> 默认情况下，自动存储持续时间的局部变量没有精确的生命周期语义。这样的对象只是简单的强引用，它保存可保留对象指针类型的值，并且这些值仍然完全受制于本地控制下的值的优化。
> 
> 理由：严格应用这些精确的生命周期语义是禁止的。许多理论上可能会减少对象生命周期的有用优化将变得不可能。从本质上讲，它承诺太多。
> 
> 可保留对象所有者类型和自动存储持续时间的局部变量可以使用 objc_precise_lifetime 属性进行注释，以指示它应该被视为具有精确生命周期语义的对象。
> 
> 基本原理：尽管如此，有时能够强制一个对象在精确的时间释放是有用的，即使该对象似乎没有被使用。这可能并不常见，显式请求这些语义的句法权重不会是负担，甚至可能使代码更清晰。

即使您确实使用了该`objc_precise_lifetime`属性，它也会应用于该强局部*变量*的引用计数操作——而不是对象的生命周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:27:39.187

这种代码将始终有效。（或者至少只要 ARC 像现在这样工作） ARC 中对象生命周期的一个小例子：

```
{
    NSString *a = [[NSString alloc] init]; //object allocation
    a = nil; // object is deallocated as it was created in this scope

    NSString *b = [NSString string]; //method call which returns an object (always autoreleased)
    b = nil; // object is not deallocated as it was not created in this scope and is therefore autorelased
} 
```

# python - Python编码解码如何

> ID：13417288
> 
> 赞同：0
> 
> 时间：2012-11-16T13:09:55.853
> 
> 标签：python, character-encoding

我正在将字符串“öçÇşŞükrÜ”解码为其他字符集。

我遇到了一些有趣的问题，想学习如何解决它。

```
>>> "öçÇşŞükrÜ".decode("utf-8")
u'\xf6\xe7\xc7\u015f\u015e\xfckr\xdc'
>>> "öçÇşŞükrÜ".decode("utf-8").encode("utf-8")
'\xc3\xb6\xc3\xa7\xc3\x87\xc5\x9f\xc5\x9e\xc3\xbckr\xc3\x9c'

>>> import chardet
>>> chardet.detect('\xc3\xb6\xc3\xa7\xc3\x87\xc5\x9f\xc5\x9e\xc3\xbckr\xc3\x9c')
{'confidence': 0.99, 'encoding': 'utf-8'}
>>> chardet.detect("öçÇşŞükrÜ")
{'confidence': 0.99, 'encoding': 'utf-8'} 
```

我不明白也找不到的是如何通过 Python 的解码和编码过程检索原始字符串“öçÇşŞükrÜ”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:16:34.510

> 我正在将字符串“öçÇşŞükrÜ”解码为其他字符集。

不，您正在将编码字符串解码为内存中的 Unicode 表示。抱歉，如果这听起来很苛刻，但恕我直言，使用 Unicode 正确掌握基础知识*非常*重要，而不仅仅是摸索，直到某些东西起作用。**编辑：**评论中的资源，[https://www.youtube.com/watch?](https://www.youtube.com/watch?v=sgHbC6udIqc) v=sgHbC6udIqc和[http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)也是**必不可少**的。阅读并观看它们。您需要知道的是**磁盘上或终端中的任何内容都不是 Unicode**。一切都被编码，使用一种或另一种编码。

如果您使用的是 Linux，那么您很幸运！（我们的 Windows 开发人员......好吧，痛苦的世界等等）你的控制台很可能是 UTF-8，所以这样做

```
"öçÇşŞükrÜ".decode("UTF-8") 
```

可能会有意义。

你试过了吗

```
print "öçÇşŞükrÜ".decode("UTF-8").encode("UTF-8") 
```

（即与`print`应用）？然后你应该拿回你的原件`öçÇşŞükrÜ`。

# jquery - 单击子元素时如何删除父元素

> ID：13417291
> 
> 赞同：0
> 
> 时间：2012-11-16T13:10:11.847
> 
> 标签：jquery

如果我单击其中的一个子级，如何删除 ul？我知道这个 ul .remove 不是真的，我如何将“项目”的颜色设置为红色？我必须使用 .find()

```
<ul class="w1m">
    <li>
       <div>
         <img src="img/minus.png" onclick="$(this ul).remove();"/>
         <img src="img/link.png"/>
       </div>
       <div>
         inspiration
       </div>
    </li> 
</ul>

<ul class="w1m">
    <li>
       <div>
         <img src="img/minus.png" onclick="$(this ul).remove();"/>
         <img src="img/link.png"/>
       </div>
       <div>
         projects
       </div>
    </li> 
<ul>
    <li><div><img src="img/minus.png"/><img src="img/link.png"/></div>  <div>job board website</div></li>
    <li><div><img src="img/minus.png"/><img src="img/link.png"/></div>  <div>shopping cart</div></li>
</ul></ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:12:20.870

```
$(this).closest("ul").remove(); 
```

或者更好：

```
$("ul.w1m").on("click","img[src='img/minus.png']",function(){
    $(this).remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:11:49.500

像这样：

```
$(this).closest('ul').remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T13:16:53.423

为此使用以下 Jquery

```
$(this).closest("ul").remove(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T13:17:44.140

首先，您添加处理程序的方式并不理想。在页面底部的脚本标记中，您应该将此代码添加到 jQuery 的 ready 方法中。

```
<script>
  $(document).ready(function() {

    $('ul.w1m > li').on('click', function() { $(this).parent().remove(); });

  });
</script> 
```

在您上面的代码中，值`this`将是`<img>`元素，并且您将尝试选择该img 的*子*ul （显然不存在）。此外，当`this`在 jQuery 中将关键字与其他选择器一起使用时，您需要将其他选择器括在引号中。（即`$(this+'ul')`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T13:13:55.657

```
$('li').click(function() {
    $(this).parent().remove();
}) 
```

# java - JFileChooser 不想关闭

> ID：13417296
> 
> 赞同：-1
> 
> 时间：2012-11-16T13:10:20.553
> 
> 标签：java, swing, jbutton, actionlistener, jfilechooser

我正在使用`JFileChooser`按下关闭按钮后不想关闭的。问题是我按下关闭按钮后，它又打开了 3 次以上，最后关闭了。

我的代码：

```
javaButton.addActionListener(new ActionListener() {
   public void actionPerformed(ActionEvent e) {
     JFileChooser fileChooser = new JFileChooser();
     fileChooser.setDialogTitle("Save");

     int option = fileChooser.showSaveDialog(null);
     if (option == JFileChooser.APPROVE_OPTION) {
         String filename = fileChooser.getFileFilter().getDescription();
            try {
                ChartUtilities.saveChartAsPNG(new File(filename), chart, getWidth(), getHeight());
                } catch (java.io.IOException exc) {
                System.err.println("Error writing image to file"); 
                }
     }
     if (option == JFileChooser.CANCEL_OPTION) {
                 System.out.println("Task canceled!");
                 //tried: fileChooser.setVisible(false); // >> same problem

     }
   }
}); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:15:20.677

如果选择有效，您在对话框中选择的任何选项都会`JFileChooser`关闭对话框。

但是，请注意，下面的代码`if (option == JFileChooser.CANCEL_OPTION)`永远不会执行，因为您已经在一个评估`option == JFileChooser.APPROVE_OPTION`为`true`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:17:58.050

我的建议是指定 JFileChooser 的父级，而不是将其设置为 null。该对话框的父级是什么？它是一个 JFrame 吗？

看看这个简单的例子，我相信它会为你工作。

[http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:22:56.607

尝试这个：

```
javaButton.addActionListener(new ActionListener() {
               public void actionPerformed(ActionEvent e) {
                 JFileChooser fileChooser = new JFileChooser();
                 fileChooser.setDialogTitle("Save");

                 int option = fileChooser.showSaveDialog(null);
                 if (option == JFileChooser.APPROVE_OPTION) {
                     String filename = fileChooser.getFileFilter().getDescription();
                        try {
                            ChartUtilities.saveChartAsPNG(new File(filename), chart, getWidth(), getHeight());
                            } catch (java.io.IOException exc) {
                            System.err.println("Error writing image to file"); }
                 } // here.

                 if (option == JFileChooser.CANCEL_OPTION) {
                             System.out.println("Task canceled!");

                 }
        }}); // one more } 
```

# sql - FileMaker 12，门户中的多表连接

> ID：13417299
> 
> 赞同：1
> 
> 时间：2012-11-16T13:10:22.420
> 
> 标签：sql, list, user-interface, filemaker

如何在门户中显示多表连接，以便可以使用 FMP 的其余功能进行导航等？（例如，使用`ExecuteSQL`.）

我说的是这样一个简单的列表作为关系的连接：

```
Country -< District -< City 
```

在类似的列表中（在地理上可能不完全正确）：

```
Country     District/State     City
---------------------------------------
USA         NY-state           NY-City
Canada      Ontario            Toronto 
```

等等

我可以轻松显示国家和城市，但不能同时显示地区......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:11:46.940

描述的表关系是正确的。但是，需要的是@pft221 所指的内容，即创建另一个与该表`View`相关的表（我们称之为它）`City`：

```
View::View_id -x- City::City_id. 
```

如果我们在`View`表格布局中放置一个由 定义的门户`City`，我们可以将其他三个表格中的所有字段拖到其中（它们都是正确的）。

我不理解并且仍然不完全理解的是FMP*中表出现的重要性（并使用正确的）。*

（注意：如果想要完全摆脱布局，可以使用 ExecuteSQL，但这需要对每个字段进行编码。）

感谢所有的帮助！ *此解决方案是[瑞典文件制造商论坛上给出的](http://www.filemakerforum.se)解决方案的翻译。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T22:01:31.980

最简单的解决方案是**将地区/州名称和国家/地区名称都包含在城市表中**（以及地区/州表中的国家/地区）作为计算字段。

也就是说，对于 TOs `Cities1`，`District/State1`并`Countries1`按照您的描述加入“内联”，在 Cities 表中创建计算字段（通过 TO `Cities1`）：

```
Countries1::CountryName
Distict/State1::DistrictName 
```

以及州/地区表中的计算字段（通过 TO `State/District1`）：

```
Countries1::CountryName 
```

*您还应该将索引设置为完整。*

这样，您在显示（或进行更复杂的交互）时无需担心表格是如何连接的。事实上，您可以将这组 TO 移到关系图中的一侧*（对 TO 进行分组和分离是一种很好的做法）*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T00:54:00.563

使用您描述的关系，这通常就像拥有一个基于表 City 的门户一样简单，您可以在其中添加字段 City::Name、District::Name 和 Country::Name。

根据列表的大小，您可能希望拥有门户搜索功能或使用多个门户以允许用户从国家向下钻取到城市。

# string - 比较两个字符的麻烦

> ID：13417301
> 
> 赞同：1
> 
> 时间：2012-11-16T13:10:26.450
> 
> 标签：string, assembly, ascii

我想知道我的问题是什么。它向后打印字符串，并将正确的字符读入计算元音的子例程，但是在将字符与顶部字符进行比较的方式上存在问题。

基本上，我如何定义程序开头的字符，以便正确比较它们？

```
//trying to make FMT_CHR2 work

PROMPT:
.ascii "Enter the lowercase string to evaluate: \0"
FMT_STR:
.ascii "%s\0"
FMT_INT:
.ascii "%d\0"
FMT_CHR:
.ascii "%c\0"
FMT_CHR2:
.ascii "\n FMTCHR2 %c\n\0"
ENDTEST:
.ascii "\0"

A: .ascii "a"
E: .ascii "e"
I: .ascii "i"
O: .ascii "o"
U: .ascii "u"
TEST: .ascii "TEST\n\0"
RESULT: .ascii "\n Your string has %d non-blank characters\0"

.section .data
county: .long 0

vowelCounter: .long 0

.globl _main

.section .text

_main:
    pushl %ebp                # save old frame ptr
movl  %esp,%ebp           # set new frame ptr & save local var space

//create local variable space
subl $100,%esp

pushl $PROMPT
call _printf
subl $4,%esp

leal -4(%esp),%ebx
pushl %ebx
call _gets
subl $4,%esp

pushl (%ebx)
call _rprint
subl $4,%esp

pushl county
pushl $RESULT
call _printf
subl $4,%esp

pushl vowelCounter
pushl $FMT_INT
call _printf
subl $4,%esp

leave
ret

_rprint:

pushl %ebp
movl %esp,%ebp

cmpb $0,(%ebx)
je ending

call _vowelcount

pushl (%ebx)
addl $1,%ebx
call _rprint

pushl $FMT_CHR
call _printf
subl $4,(%esp)

incl county

ending: leave
ret

_vowelcount:

push %ebp
movl %esp,%ebp

movl (%ebx),%ecx
pushl %ecx
push $FMT_CHR2
call _printf
cmpl %ecx,A
je _vAdd
cmpl %ecx,E
je _vAdd
cmpl %ecx,I
je _vAdd
cmpl %ecx,O
je _vAdd
cmpl %ecx,U
je _vAdd

jmp end2

_vAdd: 
incl vowelCounter

end2: leave
ret 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:00:01.997

字符存储为单个字节。您应该像这样比较它们，例如：`cmpb %cl, A`应该工作，或直接`cmpb %cl, 'A'`。一个建议：您可以将它们视为一个数组，然后遍历它们，而不是单独测试每个。

还要注意从堆栈中清理函数参数，你应该添加到堆栈指针中，例如`addl $4, %esp`，而不是`subl $4, %esp`，绝对不是`subl $4, (%esp)`

# android - AndroidManifest.xml 中的错误“必须至少有 2 个段”

> ID：13417302
> 
> 赞同：3
> 
> 时间：2012-11-16T13:10:33.000
> 
> 标签：android, error-handling, manifest

我尝试更改我的包名称，如 com.project_name 但没有弄清楚。我的项目中真正的问题是什么？

我收到以下错误：

> AndroidManifest.XML 文件中的错误“应用程序包 'AndroidManifest.xml' 必须至少有 2 个段”

AndroidManifest.XML 文件；

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.rssreader"
    android:versionCode="2"
    android:versionName="1.01" >

    <uses-sdk
        android:maxSdkVersion="15"
        android:minSdkVersion="7" />

    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" />

    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name" >
        <activity
            android:name=".splash"
            android:label="@string/app_name"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:49:41.787

这可能是一个红鲱鱼。我从来没有得到它，因为我一直使用完整的公司层次结构（这肯定超过了两个层次的深度）。你没有显示（你为什么会知道显示它？）你的主要*ListActivity*代码的包名。假设这是*RssReader.java*：这必须在*com.rssreader.RssReader.java*。那应该这样做。如果您发现您的主要活动不在那个地方，请修复它。如果它仍然不起作用，那么在您的包名称中添加一个额外的层次结构并尝试它，这肯定应该解决它。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T11:34:01.157

至少当我从这个页面开始创建项目时
[http://docs.phonegap.com/en/2.3.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/2.3.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

我遇到了完全相同的问题。这是通过使用以下命令创建项目来解决的。

```
.\create c:\html\myapp **com.**my_package my_app 
```

在原始说明中，`com.` 丢失了。
这解决了我的问题

# cakephp - CakePHP - 更改标签的“for”属性

> ID：13417309
> 
> 赞同：1
> 
> 时间：2012-11-16T13:10:52.673
> 
> 标签：cakephp, cakephp-2.0

我正在尝试制作一个复选框，在它之前有一个标签，它没有附加到输入，而在控制实际输入的复选框之后有一个标签。它在页面上应该如下所示：

```
Account Suspended:  [X] Prevent the user from logging in 
```

**视图.ctp**

```
$this->Form->label('Account Suspended');
$this->Form->input('account_suspended', array(
    'type' => 'checkbox',
    'label' => 'Prevent the user from logging in'
)); 
```

我目前遇到的问题是，第一个标签是使用`for`与输入 ID 匹配的自动生成的属性创建的，因此如果您单击它们，两个标签都会切换复选框。

CakePHP 为第一个标签生成的标记如下所示，因为它会自动将标签值转换为`for`属性的驼峰式 ID：

```
<label for="CustomerAccountSuspended">Account Suspended:</label> 
```

我希望第一个标签是：

```
<label>Account Suspended:</label> 
```

如何使用 cakePHP FormHelper 做到这一点，而不是手动输入标签 HTML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:39:59.660

这是可能的：

```
echo $this->Form->label('Account Suspended', null, array('for' => false)); 
```

不要忘记使用翻译 :P 几乎每个代码的每个部分都是可重用的。如果您现在不需要它，您可能会在其他项目中腾出一些时间；）

问候 func0der

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:19:49.460

你不会输入纯 HTML 什么？如果您不需要自动生成的`for`属性，我认为无需调用 FormHelper。

```
echo '<label>Account Suspended:</label>';
$this->Form->input('account_suspended', array(
    'type' => 'checkbox',
    'label' => 'Prevent the user from logging in'
)); 
```

或者

```
<label>Account Suspended:</label>
<?php
$this->Form->input('account_suspended', array(
    'type' => 'checkbox',
    'label' => 'Prevent the user from logging in'
)); 
```

将是完全有效的

# bash - 将 bash 数组的内容与文件的内容进行比较的最优雅的技术

> ID：13417320
> 
> 赞同：1
> 
> 时间：2012-11-16T13:11:40.170
> 
> 标签：bash

我想将数组的内容与文件的内容进行比较。我想最好的解决方案是：

```
b=( some data )
a=$(<file)
if [ $a -ne ${b[@]} ]
then
    echo "variables are different"
fi 
```

我对么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:23:55.513

试试这个 ：

```
$ cat file
a
b
c
$ echo -n "arrays are "
$ x1=( a b c )
$ mapfile -t x2 < file
$ [[ ${x1[@]} == ${x2[@]} ]] && echo "identical" || echo >&2 "different" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T20:11:02.920

通过使用 Bash 的进程替换：

```
b=( some data )
if ! diff <(echo ${b[*]}) file; then
  echo "different"
fi 
```

# c# - C# Directory.GetDirectories - 如何解决 UnauthorizedAccessException？

> ID：13417328
> 
> 赞同：2
> 
> 时间：2012-11-16T13:11:54.233
> 
> 标签：c#, io

当我尝试使用`Directory.GetDirectories(systemVolumePath)`我的应用程序访问系统卷时，会引发 UnauthorizedAccessException。美好的。我已经在这里看到了所有使用的答案`try catch`- 这不是我想要的。

如何在具有足够权限访问所有文件夹的帐户下运行我的应用程序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:36:30.833

据我所知，您无法“解决”安全问题。您可以做的是需要权限。

您必须要求用户提升权限，以允许您的代码以所需的权限运行。

在 .NET 中，您可以使用[声明式语法](http://msdn.microsoft.com/en-us/library/kaacwy28.aspx)或[命令式语法](http://msdn.microsoft.com/en-us/library/0xkh23z7.aspx)来做到这一点。

这是来自 Microsoft 的示例，它使用命令式语法来要求对单个文件夹的权限：

```
FileIOPermission permFileIO =
new FileIOPermission(FileIOPermissionAccess.AllAccess, "C:\\Temp");
try 
{
    // Demand the permission to access the C:\Temp folder.
    permFileIO.Demand();
    resultText.Append("The demand for permission to access the C:\\Temp folder succeeded.\n\n");
}
catch (SecurityException se)
{
    resultText.Append("The demand for permission to access the C:\\Temp folder failed.\nException message: ");
    resultText.Append(se.Message);
    resultText.Append("\n\n");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:32:14.160

我已成功使用 runas.exe 工具来执行此操作。

```
runas.exe /savecred /user:yourusernamehere my_app_that_needs_permissions.exe 
```

这将在当前桌面环境中运行应用程序，但使用其他用户的配置文件和权限，因此文件访问（包括创建文件）将使用该用户凭据进行。

这样做的一个有趣的副作用是，您的应用程序创建的任何文件都将作为所有者创建为其他用户，并且您的当前用户可能没有访问它们所需的权限。

这是世界多用户环境的一次有趣的短途旅行。

如果您想从自己的代码中执行此操作，这些 SO 帖子似乎涵盖了它：

[在另一个用户的凭据下启动进程](https://stackoverflow.com/questions/6413900/launch-a-process-under-another-users-credentials)

[使用 Process.Start() 从 Windows 服务中以不同用户身份启动进程](https://stackoverflow.com/questions/362419/using-process-start-to-start-a-process-as-a-different-user-from-within-a-windo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:40:35.910

要访问这些目录，您需要在 LocalSystem 帐户下运行，这不是您应该轻易考虑的事情。

[如果 PSExec](http://technet.microsoft.com/en-us/sysinternals/bb897553)适合您的使用场景，它将帮助您实现所需的功能。

# ios - 将视图控制器从一个情节提要移动或复制到另一个情节提要

> ID：13417332
> 
> 赞同：80
> 
> 时间：2012-11-16T13:12:01.140
> 
> 标签：ios, xcode, uiviewcontroller, storyboard

我有几个`UIViewControllers`故事板。现在我想将一些`UIViewControllers`移到另一个故事板。可能吗？

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-11-16T13:21:18.873

对的，这是可能的。

1.  选择要复制的控制器
2.  按`Command`+`C`
3.  打开你的第二个故事板文件
4.  按`Command`+`V`

**注意：** “复制后 IBOutlets 保持原样（在 Xcode 6.3.2 上验证）。”

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-04-08T09:49:43.230

可以复制，但您必须在一个项目中同时打开两个故事板，然后复制和粘贴。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2017-01-20T06:09:30.210

在 Xcode 8 中，如果您特别想将视图控制器移动到另一个故事板，只需通过 Cmd 选择要移动的视图控制器并单击视图控制器。保持选中状态，转到 Editor 选项卡并选择 Refactor to Storyboard。它将询问您新故事板文件的名称，然后按 Enter。

将创建一个新的故事板文件，其中包含您选择的视图控制器。在 Main.storyboard 中，您将看到一个 Storyboard Reference 对象代替了该视图控制器，它是您对刚刚制作的新故事板的引用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-10-31T19:01:29.290

复制粘贴（Command+C，Command+V）工作正常，但记得解决出口连接，因为 Xcode 似乎保留了原始连接：关闭/重新打开项目，删除错误并重新建立丢失的连接。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-09T13:41:10.560

可以复制/粘贴，但仅当您使用 Xcode 的助手编辑器并排打开两个 Storyboard 时才有效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-26T00:35:50.123

如果您使用 Cut-n-Paste 失败，有一个解决方法。如果正在粘贴的文件中现在有 ViewController，则粘贴将失败。这使得无法选择故事板进行粘贴。XCode 将拒绝粘贴。因此，您需要先将一个空视图控制器从库中拖入情节提要中。然后在情节提要中选择这个 viewController，然后粘贴就可以工作了。完成粘贴后，您可以删除虚拟视图控制器。你不会再需要它了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-12T10:39:31.557

我遇到了类似的情况，在我的主情节提要中，我的场景太多，需要重构。我一开始的想法是标记几个并按照许多人的建议进行复制粘贴。但是，我担心故事板连接到视图控制器代码的任何解决方案。经过大量搜索，我发现自 iOS 9 以来，有一个新功能可用于“重构为 Storuboard”。您可以在源故事板中标记多个场景，并且可以从编辑器菜单中选择该选项。然后从您的旧情节提要中提取所有选定的场景，创建一个新情节提要以及旧/主情节提要中的链接。[有用的教程是： https](https://code.tutsplus.com/tutorials/ios-9-staying-organized-with-storyboard-references--cms-24226) ://code.tutsplus.com/tutorials/ios-9-staying-organized-with-storyboard-references--cms-24226 [https://www.raywenderlich.com/115697/ios-9-storyboards-tutorial-whats-new-in-storyboards](https://www.raywenderlich.com/115697/ios-9-storyboards-tutorial-whats-new-in-storyboards)

我希望这个新的官方故事板重构功能可以为这类问题提供更好的解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-22T21:01:53.913

界面元素可以通过**复制/粘贴**在 Xib 和 Storyboard 文件之间移动。

这最初不适合我。我试图将 UICollectionViewCell 从专用 Xib 复制到我们的 Main Storyboard。该单元格不会复制到情节提要中。

解决方案是在情节提要中选择特定的父元素。UICollectionViewCell 可以作为 UICollectionView 的子项粘贴到情节提要中，否则无法粘贴。

如果您在粘贴特定项目时遇到问题，请务必在尝试粘贴之前仔细检查您是否选择了**有效的父元素。**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-27T03:27:52.830

遇到了类似的情况，我需要与 2 个 StoryBoard 控制器共享一个 ViewController 类。

显然，解决方案很简单：

1.  在故事板和代码之间拆分屏幕
2.  从情节提要中选择缺少与类的连接的控件
3.  在连接检查器中，单击并拖动引用插座内的圆圈到类控制器内的代码
4.  XCode 将自动突出显示即将为其创建连接的@IBOutlet
5.  只要您松开鼠标，就会在 IB 上的该控件和 Class 中的控件之间创建一个连接

希望这足够清楚和有帮助

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-11-16T13:20:05.727

我认为这是可能的......

```
UIStoryboard *secondStoryBoard = [UIStoryboard storyboardWithName:@"secondStoryBoard" bundle:nil];

UIViewController *theTabBar = [secondStoryBoard instantiateViewControllerWithIdentifier:@"myTabBar"];

[self.navigationController pushViewController:theTabBar animated:YES]; 
```

# c++ - 跳过不兼容的库

> ID：13417333
> 
> 赞同：1
> 
> 时间：2012-11-16T13:12:05.100
> 
> 标签：c++, linux

我在链接库时遇到了一些问题。

我有一个使用 c 编译器编译的库 libipc.so

现在我有一个 C++ 代码我正在运行该代码

```
g++ -L /home/pcadmin/Desktop/Project -o output main.o task.o -lipc 
```

但它给出了错误

```
skipping incompatible /home/pcadmin/Desktop/Project/libipc.so when searching for -lipc
/usr/bin/ld: cannot find -lipc
collect2: ld returned 1 exit status 
```

# ada - 在 Ada 中定义一个通用的标量类型包

> ID：13417337
> 
> 赞同：3
> 
> 时间：2012-11-16T13:12:33.123
> 
> 标签：ada

我想通过制作一个用于操作多项式的包来测试编写 Ada 包的能力。多项式可以为广泛的代数结构定义，为了反映这一点，我想使包通用，以便它可以与浮点数、整数或其他数字子类型一起使用。

我现在想说的是，我对 Ada 的类型系统如何工作或它的包系统如何工作知之甚少。网络上似乎缺乏好的初学者 Ada 信息，所以我不得不从[这篇](http://en.wikibooks.org/wiki/Ada_Programming/Generics)对新手不太友好的 Wikibooks 文章中收集我能获得的智慧。

[此](http://en.wikibooks.org/wiki/Ada_Programming/Type_System#The_Type_Hierarchy)页面包含有关类型层次结构的一些信息。基于此，我的多项式包所基于的合理类型似乎是`Scalar`类型，因为显然这是定义算术运算的类型。所以这就是我尝试过的，在`polynomials.ads`：

```
generic

    MAX_DEGREE : Positive;
    type Element is new Scalar;

package Polynomial is

    type Polynomial is Array (0 .. MAX_DEGREE) of Element;

end Polynomial; 
```

然而，这只是给我带来了`"Scalar" is undefined`GNAT 的错误。

到目前为止，我真的只是半盲的感觉，我实际上不知道这些东西是如何工作的。如果我似乎有任何您认为需要澄清的重大误解，请告诉我。可能最简单的方法是提供我可以从中学习的示例`polynomial.ads`和`polynomial.adb`代码 - 就像多项式类型的定义（具有通用最大度数和元素类型）和一个简单的示例函数（例如添加两个多项式），所以我可以看到通用性功能起作用。

PS：有点相关，有没有办法为您的用户定义类型定义属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T13:41:45.637

问题只是“标量”不是类型的名称。

查看该文章中的“通用形式类型”部分，我看不到一个施加您想要的确切限制的部分：“任何标量类型”。可惜......除非有人有更好的主意，否则我会将声明扩大到：

```
type Element is private; 
```

并继续。这可能不是一个缺点：如果您提供自己的运算符，请参阅下一节通用形式子程序

```
with function "*" (X, Y: Element) return Element; 
```

或者

```
 with function "*" (X, Y: Element) return Element is <>; 
```

然后，如果有意义的话，您可以实例化记录（复数？）矩阵等的泛型。`"is <>"`将对已经拥有它们的类型（Float 等）使用现有函数来简化实例化

（编辑：忘记了标量包括枚举，多项式甚至乘法通常没有意义！因此将其扩展到“私有”可能不是这样的缺点）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T15:10:18.637

在定义泛型时，使用的正式类型定义了泛型实现中可用的操作。您始终可以选择 Brian 的选项并使用（几乎）最严格的 ( `is private`，您可以复制它，但否则可能会接近任何东西)，然后让用户定义您需要的例程。实际上，这是制作可以对任何标量执行数学运算的单个泛型的唯一方法。

Ada 的通用[形式标量类型系统](http://www.adaic.org/resources/add_content/standards/95lrm/ARM_HTML/RM-12-5-2.html)分为以下粗略的层次结构：

*   有离散`(<>)`值 ( )、浮点值 ( `digits <>`) 和定点值 ( `delta<>`)。
    *   在离散内，有带符号整数 ( `range <>`) 和模整数 ( `mod <>`)（枚举类型也是离散的，但它们只能作为离散处理）。

这一点的一个重要含义是，有一种方法可以制作一个可以同时接受整数和枚举（“离散”）的泛型，但是没有办法制作一个可以同时对整数和浮点数进行操作的泛型。相反，您要么必须为每个人制作一个，要么用私人伪造它并传入数学运算符，就像布赖恩的回答所示。

在实践中，我没有发现这有太大的问题。我想要使​​用浮点值的实例往往与我想要使用整数的实例*非常不同。*例如，在这种情况下，您的“多项式”泛型对于 32 位整数真的有用吗？很少有计算结果是精确的整数。

**这是一个文化问题。**许多语言（以 C 为主导）认为整数和浮点类型是密切相关的事物，并使它们易于互换（有时甚至是无声的）。在 Ada 中，它们是两个完全不同的宇宙，你应该习惯于这样想它们。确实，将整数转换为浮点值并不太麻烦，并且浮点类型有办法将它们的值截断或舍入到最接近的整数。不过，在大多数情况下，您应该将整数（离散）和浮点值分开。

所以对我来说，我只是定义它

```
type Element is digits <>; 
```

...继续我的快乐之路。

# jquery - 如果在 FORM 标记内，为什么 button.click() 事件不起作用？

> ID：13417341
> 
> 赞同：0
> 
> 时间：2012-11-16T13:12:54.613
> 
> 标签：jquery, forms, onclick

以下 JQuery“表单”有效（通过 ajax 发送和接收数据）但如果我更改

```
 <div id="formContact"> 
```

到`form`标签，然后它不起作用。**为什么是这样？**

```
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>Testing - Test</title>
        <meta name="keywords" content="" />
        <meta name="description" content="" />
        <script type="text/javascript" src="systemJavascript/jquery-1.4.4.min.js"></script>
        <style type="text/css">

            #result {
                margin: 10px;
                background: #eee;
                padding: 10px;
                height: 40px;
                overflow: auto;
            }
        </style>
        <script type="text/javascript">
            $(function() {
                $('#resultArea').html('click button');
                $('button#formButton').click(function() {
                    console.log('we only get here if form is a DIV element, not a FORM element');
                    $('button#formButton').blur();
                    $('#firstName').focus();
                    $.post(
                    'testAjaxProcess2.php',
                    {
                        firstName: $('#firstName').val(),
                        lastName: $('#lastName').val()
                    },
                    function( jsonString )
                    {
                        var data = $.parseJSON(jsonString);
                        $('div#resultArea').html(data['message']);
                    });
                });
            });

        </script>
    </head>
    <body>
        <h2>Form</h2>
        <div id="formContact">
            <div>First Name:<input type="text" id="firstName"/></div>
            <div>Last Name:<input type="text" id="lastName"/></div>            
            <div><button id="formButton">Send</button></div>
        </div>
        <h2>Result</h2>
        <div id="resultArea">
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T13:16:42.047

最佳猜测 - 默认情况下 a`button`将充当表单的提交按钮。您想阻止单击处理程序中的默认操作来停止此操作：

```
$('button#formButton').click(function(e) { // assign event object
  e.preventDefault( ); // Stop the form being submitted.
  console.log('we only get here if form is a DIV element, not a FORM element');
}); 
```

编辑：我刚刚用 jsfiddle 确认了这一点：http: [//jsfiddle.net/Y2MdZ/](http://jsfiddle.net/Y2MdZ/)

# xcode - NSMutableDictionary 和缓存到磁盘

> ID：13417348
> 
> 赞同：1
> 
> 时间：2012-11-16T13:13:13.273
> 
> 标签：xcode, caching, optimization, nsdictionary, nsmutabledictionary

我正在尽我所能优化我的应用程序。我要问的是“为某个键添加对象后的 NSMutableDictionary，它将数据存储在 ram 内存还是存储内存中？” 我正在使用 Xcode 4.5.2 和 iOS 6.0 在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:15:58.980

它只存储一个指针——一个对象的引用。该指针存储在内存中。添加后，`NSMutableDictionary`不会做任何特别的事情——例如，消息值以某种方式最小化它们的物理内存消耗。

如果您希望将值保存到磁盘或支持清除，请参阅`NSCache`。它可能正是您正在寻找的。

否则，您可能更喜欢只写入磁盘并将`NSURL`s 存储在字典中。很难说，不知道你是如何进行这种优化的。

# html - 两列布局

> ID：13417360
> 
> 赞同：1
> 
> 时间：2012-11-16T13:14:16.567
> 
> 标签：html, css

这是我的版本：

```
<div>
    <div style="width:200px;float:left;display:inline-block;">
        123456789012345678901234567890123456789012345678901234567890123456789

    </div>
    <div style="margin-left:200px;">
        abcdefghijklmnopqrstuvwxyz 
    </div>
</div> 
```

[http://jsfiddle.net/EV6xF/](http://jsfiddle.net/EV6xF/)

一切正常，直到文本很小：

![在此处输入图像描述](../Images/37b9e91c22e4a4d2765f7e9a5cd01d1e.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:16:06.500

添加`word-wrap:break-word;`到您的 CSS 规则。

```
<div style="width:200px;float:left;display:inline-block;word-wrap:break-word;"> 
```

**[（演示）](http://jsfiddle.net/EV6xF/2/)**

# java - 在android中解析一个xml文件

> ID：13417363
> 
> 赞同：0
> 
> 时间：2012-11-16T13:14:25.333
> 
> 标签：java, android, xml, xml-parsing

我有这个 xml 文件：

```
<maths>

<mathametician>
<id>101</id>
<name>kurt</name>
<age>75</age>
</mathametician>

<mathametician>
<id>102</id>
<name>david</name>
<age>62</age>
</mathametician>

</maths> 
```

我可以使用以下代码成功获取数据：

```
 try {
            InputStream raw = this.getApplicationContext().getAssets()
                    .open("maths.xml");

            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();

            Document doc = db.parse(raw);
            doc.getDocumentElement().normalize();
            NodeList nodeList = doc.getElementsByTagName("mathametician");

            for (int i = 0; i < nodeList.getLength(); i++) {

                Node node = nodeList.item(i);
                Element fstElmnt = (Element) node;

                NodeList websiteList = fstElmnt.getElementsByTagName("age");
                Element websiteElement = (Element) websiteList.item(0);
                websiteList = websiteElement.getChildNodes();

                Toast.makeText(getApplicationContext(),
                        websiteList.item(0).getNodeValue(), Toast.LENGTH_SHORT)
                        .show();
            } 
```

我的问题是：为什么我不能在之后直接获取数据：

```
NodeList websiteList = fstElmnt.getElementsByTagName("age"); 
```

除非我写，否则我会得到空的结果：

```
Element websiteElement = (Element) websiteList.item(0);
websiteList = websiteElement.getChildNodes(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:49:51.347

解析器类：

```
public final class SampleParser{

    final static String ROOT_NODE = "maths";
    final static String ELEMENT_MATHAMETICIAN = "mathametician";
    final static String ELEMENT_ID = "id";
    final static String ELEMENT_NAME = "name";
    final static String ELEMENT_AGE = "age";

    private static final String TAG="SampleParser";

    /**
     * Intentionally commented
     */
    private SampleParser() {}

    /**
     * @param response The XML string which represents the complete news data
     * @return news The complete data
     */
    public static Maths parse(String response) {
        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp;
        try {
            sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            SampleDataHandler dataHandler = new SampleDataHandler();
            xr.setContentHandler(dataHandler);
            InputSource source = new InputSource(new StringReader(response)); 
            xr.parse(source);
            Maths result = dataHandler.getData();
            return result;
        } catch (ParserConfigurationException e) {
            Log.e(TAG, "parse", e);
        } catch (SAXException e) {
            Log.e(TAG, "parse", e);
        } catch (IOException e) {
            Log.e(TAG, "parse", e);
        } 
        return null;
    }

    static class SampleDataHandler extends DefaultHandler {
        /**
         * 
         */
        private static final String TAG="NewsDataHandler";
        /**
         * 
         */
        private Maths data;
        /**
         * 
         */
        private Mathematician tempElement;
        /**
         * 
         */
        private boolean readingAge;
        /**
         * 
         */
        private boolean readingName;
        /**
         * 
         */
        private boolean readingID;
        /**
         * 
         */
        public Maths getData(){
            return data;
        }

        /*
         * (non-Javadoc)
         * 
         * @see org.xml.sax.helpers.DefaultHandler#endDocument()
         */
        @Override
        public void endDocument() throws SAXException {
            Log.d(TAG, "endDocument Finished parsing response");
        }

        /*
         * (non-Javadoc)
         * 
         * @see org.xml.sax.helpers.DefaultHandler#endElement(java.lang.String,
         * java.lang.String, java.lang.String)
         */
        @Override
        public void endElement(String uri, String localName, String qName)
                throws SAXException {
            if(qName.equalsIgnoreCase(ELEMENT_MATHAMETICIAN)){
                data.addMathematician(tempElement);
            }else if(qName.equalsIgnoreCase(ELEMENT_ID)){
                readingID = false;
            }else if(qName.equalsIgnoreCase(ELEMENT_NAME)){
                readingName = false;
            }else if(qName.equalsIgnoreCase(ELEMENT_AGE)){
                readingAge = false;
            }
        }

        /*
         * (non-Javadoc)
         * 
         * @see org.xml.sax.helpers.DefaultHandler#startDocument()
         */
        @Override
        public void startDocument() throws SAXException {
            data = new Maths();
            Log.d(TAG, "startDocument Started parsing response");
        }

        /*
         * (non-Javadoc)
         * 
         * @see
         * org.xml.sax.helpers.DefaultHandler#startElement(java.lang.String,
         * java.lang.String, java.lang.String, org.xml.sax.Attributes)
         */
        @Override
        public void startElement(String uri, String localName, String qName,
                Attributes attributes) throws SAXException {
            if(qName.equalsIgnoreCase(ROOT_NODE)){
                //data.setData(new ArrayList<NewsElement>());
            }else if(qName.equalsIgnoreCase(ELEMENT_AGE)){
                readingAge=true;                
            }else if(qName.equalsIgnoreCase(ELEMENT_MATHAMETICIAN)){
                tempElement = new Mathematician();
            }else if(qName.equalsIgnoreCase(ELEMENT_ID)){
                readingID=true;
            }else if(qName.equalsIgnoreCase(ELEMENT_NAME)){
                readingName=true;
            }
        }

        /*
         * (non-Javadoc)
         * 
         * @see org.xml.sax.helpers.DefaultHandler#characters(char[], int, int)
         */
        @Override
        public void characters(char[] ch, int start, int length)
                throws SAXException {
            String chars = new String(ch, start, length);    
            chars = chars.trim(); 
            if(readingID){
                try{
                    tempElement.setId(Integer.parseInt(chars));
                }catch(Exception e){
                    Log.e(TAG, "characters[Parsing ID]", e);
                    tempElement.setId(-1);
                }
            }
            else if(readingAge){
                try{
                    tempElement.setAge(Integer.parseInt(chars));
                }catch(Exception e){
                    Log.e(TAG, "characters[Parsing Age]", e);
                    tempElement.setAge(-1);
                }
            }else if(readingName){
                tempElement.setName(chars);
            }
        }
    }
} 
```

使用的 POJO：

```
public class Maths {

    private ArrayList<Mathematician> mathematicians;

    /**
     * @return the mathematicians
     */
    public ArrayList<Mathematician> getMathematicians() {
        return mathematicians;
    }

    /**
     * @param mathematicians the mathematicians to set
     */
    public void setMathematicians(ArrayList<Mathematician> mathematicians) {
        this.mathematicians = mathematicians;
    }

    /**
     * @param item The item to add
     */
    public void addMathematician(Mathematician item){
        if(null == mathematicians){
            mathematicians = new ArrayList<Mathematician>();
        }
        mathematicians.add(item);
    }
} 
```

* * *

```
public class Mathematician {

    private int id;
    private String name;
    private int age;
    /**
     * @return the id
     */
    public int getId() {
        return id;
    }
    /**
     * @param id the id to set
     */
    public void setId(int id) {
        this.id = id;
    }
    /**
     * @return the name
     */
    public String getName() {
        return name;
    }
    /**
     * @param name the name to set
     */
    public void setName(String name) {
        this.name = name;
    }
    /**
     * @return the age
     */
    public int getAge() {
        return age;
    }
    /**
     * @param age the age to set
     */
    public void setAge(int age) {
        this.age = age;
    }
} 
```

我运行它，它工作正常。希望这可以帮助。

# iphone - 在 UITextField 中显示自定义表情

> ID：13417364
> 
> 赞同：0
> 
> 时间：2012-11-16T13:14:28.500
> 
> 标签：iphone, uitextfield, emoticons

我可以在 UItextFiled 中显示自定义表情，因为 iPhone 的键盘表情正在显示。我检查了文档，但没有找到任何方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:26:59.423

您可以使用[链接中的以下代码](https://stackoverflow.com/questions/1389379/adding-smileys-to-uitextview-or-uitextfield)

```
- (BOOL) textField: (UITextField *)theTextField shouldChangeCharactersInRange: (NSRange)range replacementString: (NSString *)string {   

NSRange range = {NSNotFound, 0};
NSString *s = @"This is a smiley :)";

range.location = 0;
range.length = [s length];
s = [s stringByReplacingOccurrencesOfString:@":)"
                                    withString:@"\ue415"
                                    options:NSCaseInsensitiveSearch
                                    range:range];

  } 
```

# mysql - 您可以从客户端增加 max_allowed_pa cket 吗？

> ID：13417371
> 
> 赞同：3
> 
> 时间：2012-11-16T13:15:10.450
> 
> 标签：mysql, windows-7, mysql-5.5

我需要使用非常大的扩展插入来执行 SQL 转储。我正在使用计算机中的[官方命令行工具](http://dev.mysql.com/doc/refman/5.5/en/mysql.html)连接到 LAN 中的服务器。执行总是死亡：

> 错误 2006 (HY000): MySQL 服务器已消失

...而且我很确定这是由于`max_allowed_packet`设置很小：

```
mysql> SHOW VARIABLES LIKE 'max_allowed_packet';
+--------------------+----------+
| Variable_name      | Value    |
+--------------------+----------+
| max_allowed_packet | 10485760 |
+--------------------+----------+ 
```

有很多关于如何更改**服务器**设置的文档，但我想知道是否可以仅针对当前连接（即**从客户**端）更改它。我不需要通用解决方案，如果它适用于命令行工具，我会很高兴。

我检查了文档并[发现了这一点](http://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html#option_mysql_max_allowed_packet)：

> `max_allowed_packet`
> 
> 发送到服务器或从服务器接收的最大数据包长度。（默认值为 16MB。）

...并随后尝试了这个：

```
mysql ^
    --max_allowed_packet=50M ^
    --compress ^
    --default-character-set=utf8 ^
    --skip-reconnect ^
    -h mysql.example.com -u foo -b bar 
```

结果：所有要读取的命令`max_allowed_packet`仍然报告 10MB 并且服务器仍然消失。

你`max_allowed_packet`能从客户端增加吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T11:15:35.253

我已经阅读了许多解释如何完成此任务的文章，但我得出的结论是他们根本没有正确测试它。我的结论是：

*   服务器`max_allowed_packet`是硬编码的上限。您可以像任何其他服务器端设置（配置文件或服务器命令行参数）一样为整个服务器更改它，但无法从客户端增加它。

*   一些客户端（例如官方命令行实用程序）允许设置`max_allowed_packet`连接。这是从客户端实际更改值的唯一方法（更改会话或全局变量对交换包的大小没有影响），但只有在您想*降低*它时才有用。发送大于服务器设置的包仍然会触发与包相关的错误，因为服务器不会接受它们。

总结一下：

1.  您必须将`max_allowed_packet`其视为只读。
2.  如果它太小，您需要为整个服务器更改它或使用它。

*很遗憾，我无法提供官方文档的链接，但这个主题的文档记录很差。*

# c# - 条件格式数据网格在表单加载事件中不起作用

> ID：13417378
> 
> 赞同：0
> 
> 时间：2012-11-16T13:15:25.043
> 
> 标签：c#, winforms

我有一个包含数据网格的表单的 WinForms 项目。我有两种方法可以在表单的 Load 事件中调用。

我有一个从 SQL 服务器获取数据的 PopulateForm() 方法。

随后是一个 FormatDatagrid() 方法，该方法在网格中的数据行中循环并根据我在代码中指定的条件为它们着色。

我还在表单上添加了一个刷新按钮，它再次调用这两种方法。

当我的表单加载时，数据网格填充了所有正确的数据，但它没有格式化。

然而，当我单击刷新按钮（运行完全相同的代码）时，数据网格的格式正确无误。

在我看来，我误解了 Load 事件的作用。当我逐步执行代码时，我注意到程序在表单实际打开之前运行格式化代码，我假设为什么格式化在 Load 事件上不起作用。

我应该使用哪个事件来确保在用户打开表单时立即格式化数据网格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:24:18.350

```
 public Form1()
    {
        InitializeComponent();
        PopulateForm();
        FormatDatagrid();
    } 
```

这应该做的工作

# c# - 在特定页面上关闭应用程序后退按钮

> ID：13417380
> 
> 赞同：0
> 
> 时间：2012-11-16T13:15:35.970
> 
> 标签：c#, windows-phone-7, xaml

我做了一些阅读，发现只能通过抛出一个未处理的异常来关闭 Windows Phone 应用程序，该异常将关闭该应用程序。

所以我的问题是，如何为手机上的物理后退按钮做到这一点？

**只有在某个页面上时**，如何让后退按钮关闭应用程序？

所以后退按钮可以正常工作，但是当它最终落在一个名为“noBack.xaml”的页面上时，后退按钮应该关闭应用程序。

**编辑**

实际上，再想一想，即使只是禁用该页面上的后退按钮也会很棒......

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:34:10.960

只需在您打开时清除后台堆栈`NoBack.xaml`：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);

    while (this.NavigationService.BackStack.Any())
    {
       this.NavigationService.RemoveBackEntry();
    }
} 
```

这样，下次用户按下后退按钮时，它将退出应用程序。

# mysql - sql查询从多个表中选择数据

> ID：13417382
> 
> 赞同：1
> 
> 时间：2012-11-16T13:15:38.247
> 
> 标签：mysql, sql

我有 3 张桌子。我想按日期从它们中选择数据。我将日期保存在所有表中的 unixtimestamp 中。我正在使用以下查询：

```
select
  c.up_date, c.user_id, c.id,
  f.id, f.up_date, f.friend1, f.friend2, f.status,
  s.postdate, s.status, s.id, s.display_name, s.userid, s.userid1
from 
  c.cover_pic,
  s.wp_userstatus,
  f.wp_friends
where
  s.userid=c.friend1
  and s.userid=c.user_id 
  and f.status=1
  and c.user_id=4
order by s.postdate 
```

Tablel结构为：**cover_pic**表：

```
 id  user_id   coverpic                              color   up_date
 1   4         496b02165600889daf51c6b04b257ec0.jpg  63ACFF  1353069741 
```

**wp_friends**表：

```
id  friend1  friend2  status  up_date
12  1    4    2       1353064093
11  4    1    1       1353064093 
```

**wp_userstatus**表：

```
id  status   display_name  userid  userid1  postdate    
6   awesome  paramveer     4       4        1352414658
7   lets     paramveer     4       4        1352414932 
```

它显示以下错误：

```
#1142 - SELECT command denied to user 'kdgadget'@'localhost' for table 'cover_pic' 
```

我想按日期顺序显示数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:24:49.927

> SELECT 命令拒绝用户 'kdgadget'@'localhost' 用于表 'cover_pic'

应该是一个明确的信息。用户 kdgadget 可能无法对表 cover_pic 执行 SELECT 命令。所以这是一个数据库配置问题，而不是查询问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:19:41.293

```
(SELECT * from in_order where `id` = '$id')
UNION
(SELECT * from pre_order where `id` = '$id') 
```

但每张桌子的长度、大小必须相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:23:40.710

使用此查询，它使用连接和表的别名进行组织：

```
select c.up_date,c.user_id,c.id,f.id,f.up_date,f.friend1,f.friend2,f.status,
s.postdate, s.status,s.id,s.display_name.s.userid,s.userid1 
from cover_pic as c JOIN wp_userstatus as s,
ON s.userid=c.friend1 and s.userid=c.user_id and c.user_id=4 
JOIN  wp_friends as f ON f.status=1
order by s.postdate 
```

您的错误不是来自 sql。用户无权执行选择。查看错误解决帖子：

1.  [用户无法执行选择错误 1142](https://stackoverflow.com/questions/10734176/user-cannot-execute-select-error-1142)
2.  [错误 1142 (42000)：ALTER 命令被拒绝](https://stackoverflow.com/questions/12623193/error-1142-42000-alter-command-denied)
3.  [MySQL 错误：#1142 - SELECT 命令拒绝用户](https://stackoverflow.com/questions/10956195/mysql-error-1142-select-command-denied-to-user)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-19T09:40:36.040

One of the possible cause may be by using the incorrect database or schema name.

# ember.js - 避免 Ember.Router 中的代码重复？

> ID：13417383
> 
> 赞同：1
> 
> 时间：2012-11-16T13:15:39.513
> 
> 标签：ember.js, ember-old-router

我的 Ember.Router 越来越大，看起来它很快就会维护 30 多个 URL 路由。现在，很多这样的路由都做同样的事情，例如连接一个头插座（在所有情况下可能有 80%）。

有没有一种 Ember.js 方式来避免这些冗余？或者我应该只是将重复的部分移动到一个函数中并调用它？

**更新**

如您所见，共有三种不同的路线（文章、帖子和用户）。其中两个连接头插座，而第三个不连接。现在想象一下，将有 25 条路由连接头出口，而 5 条不连接。我怎样才能避免这些重复？

```
App.Router = Em.Router.extend({
  root: Em.Route.extend({
    articles: Em.Route.extend({
      route: "/articles",
      connectOutlets: function(router) {
        router.get("applicationController").connectOutlet("header", "header");
        router.get("applicationController").connectOutlet(articles, App.Article.find());
      }
    }),
    posts: Em.Route.extend({
      route: "/posts",
      connectOutlets: function(router) {
        router.get("applicationController").connectOutlet("header", "header");
        router.get("applicationController").connectOutlet("posts", App.Post.find());
      }
    }),
    users: Em.Route.extend({
      route: "/users",
      connectOutlets: function(router) {
        // Don't connect the header here!
        router.get("applicationController").connectOutlet("users", App.User.find());
      }
    })
  })
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:33:10.587

只是一个想法..我还没有实际测试过，但我认为*类似*的事情是可行的

```
// some custom route
var CommonRouteOrSomething = Em.Route.extend({
    route: "/",
    connectOutlets: function(router) {
        router.get("applicationController").connectOutlet("header", "header");
    }
})

App.Router = Em.Router.extend({
    root: Em.Route.extend({
        articles: CommonRouteOrSomething.extend({
            route: '/articles', // override route string
            connectOutlets: function(router) {
                // your other outlet will be connected on the super class
                this._super(router); 
                // then your actual outlet
                router.get("applicationController")
                      .connectOutlet(articles, App.Article.find());
            }
        })
        ...
     })
 }) 
```

不确定这是否真的有效；就像我说的，这只是一个基于假设的想法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T18:34:45.287

也许另一种方法是使用嵌套路由。这里据我了解，文章连接`header`outlet，posts连接posts `outlet`。为了走`posts`路线，我假设您首先必须走文章路线。（即/articles/posts）也就是说，路由器将如下所示：

```
App.Router = Em.Router.extend({
  root: Em.Route.extend({
    articles: Em.Route.extend({
      route: "/articles",
      connectOutlets: function(router) {
        router.get("applicationController").connectOutlet("header", "header");
        router.get("applicationController").connectOutlet(articles, App.Article.find());
      }, 

      posts: Em.Route.extend({
        route: "/posts",
        connectOutlets: function(router) {
          router.get("applicationController").connectOutlet("posts", App.Post.find());
        }
      }),
    }),

    users: Em.Route.extend({
      route: "/users",
      connectOutlets: function(router) {
    // Don't connect the header here!
        router.get("applicationController").connectOutlet("users", App.User.find());
      }
    })
  })
}); 
```

# objective-c - 如何使用 RestKit 映射根词典？

> ID：13417390
> 
> 赞同：0
> 
> 时间：2012-11-16T13:16:25.557
> 
> 标签：objective-c, ios, json, restkit

我刚刚开始使用 RestKit。给定下面的 JSON 结构，如何为`key 1`和配置对象映射`key 2`？我已经成功地为`key 3`.

```
{
  "key 1": "value",
  "key 2": "value",
  "key 3": [
    {
      "key": "value"
      "key": "value"
    },
    {
      "key": "value"
      "key": "value"
    }, 
  ]
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:44:30.937

要在没有 KVC 的情况下成功使用 RestKit 对象映射，您需要使用两个映射 - 一个用于“key 3”的内部映射，一个用于“key 1”和“key 2”的外部映射。

然后为“key 3”键路径定义关系。有关详细信息，请参阅[另一个问题](https://stackoverflow.com/questions/7910709/relationships-not-connected-with-core-data-and-restkit)。

# java - 用于在 Java 中交换字符串中的字符的 API 方法

> ID：13417396
> 
> 赞同：0
> 
> 时间：2012-11-16T13:16:42.787
> 
> 标签：java, string

Java 中是否有本地方法可以在`Strings`. 我的意思是，我每次都需要编写这样的函数，而且很无聊：

* * *

```
 public static String modifyString(String str,int x,int y){

    char arr[]=str.toCharArray();
    char t= arr[x];
    arr[x]=arr[y];
    arr[y]=t;

    String s= new String(arr);
    return s;

} 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:22:44.480

不，[String](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)类不包含交换字符的方法。不幸的是，您要么需要自己动手，要么考虑使用第三方库。

# php - 如何打印soap请求（请求使用php curl发送）？

> ID：13417399
> 
> 赞同：0
> 
> 时间：2012-11-16T13:16:56.170
> 
> 标签：php, soap

我正在使用 PHP 发送一个肥皂请求`curl()`。我需要打印我的请求，以便查看我的请求并了解天气以正确的格式进行。

但我不知道如何打印我的请求。我试过`getlastRequest()`了，但它不工作。有人可以帮帮我吗？？

萨拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:16:34.983

尝试这个：

```
$soapServer = new SoapServer(null, array('uri' => "urn://l/res"));
// managed functions
// $soapServer->addFunction("...");
// $soapServer->addFunction("..."); 
// .....
$xml_data = file_get_contents("php://input"); 
```

如果你想验证 xml 肥皂请求

```
$parser = xml_parser_create("UTF-8");
if (!xml_parse($parser, $xml_data, true)) {
     $error = "Cannot parse XML: " .
              xml_error_string(xml_get_error_code($parser)) .
              " at line: " . xml_get_current_line_number($parser) .
              ", column: " . xml_get_current_column_number($parser);
     // Send error via SOAP
     $soapServer->fault("500", $error);
} 
```

# c# - EntityFramework ORM 插入错误

> ID：13417400
> 
> 赞同：2
> 
> 时间：2012-11-16T13:17:13.953
> 
> 标签：c#, asp.net-mvc, orm, asp.net-mvc-4

对不起，我是初学者。

我有两个类：链接在一起的用户和组（组类有一个用户类型属性）

这是 User.cs ：

```
public class User
{
    [Key]
    public int userId { get; set; }

    [Required]
    [MaxLength(10)]
    [Display(Name="Firstname")]
    public string firstname { get; set; }

    [Required]
    [MaxLength(10)]
    [Display(Name = "Lastname")]
    public string lastname { get; set; }
} 
```

这是 Group.cs ：

```
public class Group
{
    [Key]
    public int idGroup { get; set; }
    public string name { get; set; }
    public User owner { get; set; }
} 
```

这是插入

```
private myContext db = new myContext();
[HttpPost]
    public ActionResult Create(Group group)
    {
        group.owner = (User)Session["user"];
        if (ModelState.IsValid)
        {
            db.Groups.Add(group);
            db.SaveChanges();
            return RedirectToAction("Index","Home");
        }

        return View(group);
    }
//Session["user"] contains an User type object (which is already in database) 
```

问题是：当我添加一个新组时，它会自动将一个新用户插入数据库，而不是只插入相应的组。

示例：我是“user1”（因此“user1”存在于用户表中）并且我想创建“group1”组。我将我的用户与 Group 类的“所有者”属性链接起来。

group1 将被插入到 Group 表中，但 user1 也将被插入到 User 表中。这将导致重复的内容

我不知道如何避免这种情况...

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:17:11.580

您`User`必须`DbContext`使用[`Attach`](http://msdn.microsoft.com/en-US/data/jj592676). 这将防止 EF 创建对象的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:14:12.727

试试这个，假设 a`Group`可以有多个`User`。

```
using (DbEntities ctx = new DbEntities())
{
    // Create new Group
    Group g = new Group() { name = "Some name", };

    //Create new User 1
    User u1 = new User() { firstname = "user 1", };

    //Create new User 2
    User u2 = new User() { firstname = "user 2", };

    // Add users to the Group
    g.owner.Add(u1);
    g.owner.Add(u2);

    //Updating the context
    ctx.AddToGroup(g);

    //Save to Database
    ctx.SaveChanges();
} 
```

# c# - UltraTabPageControl 窗口关闭时触发哪个事件

> ID：13417402
> 
> 赞同：1
> 
> 时间：2012-11-16T13:17:21.627
> 
> 标签：c#, winforms, infragistics

我在基础架构（C# Windows 应用程序）中将 UltraTabPageControl 绑定到 BaseForm。

当我关闭 ultraTabPageControl 窗口时会触发哪个事件？

显然可以使用 baseform_closure ，但我不需要在这个事件中编写我的代码，因为绑定到 BaseForm 的用户控件的数量更多。

我需要在 ultraTabPageControl 的关闭事件上编写一段代码。

请让我知道如何处理 UltraTabPageControl 的关闭事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:53:10.527

UltraTabControl 有一个`TabClosed`和`TabClosing`事件。
这些事件与托管 UltraTabPageControl 的 UltraTab 的关闭有关。

事件处理程序接收类型参数`TabClosingEventArgs`或`TabClosedEventArgs`包含与此事件相关的数据。

每个 UltraTab 都记录在 UltraTabConrol 的 Tabs 集合中。每个 UltraTab 都有自己的 UltraTabPageControl

我认为与标准窗口选项卡控件的这些差异是由于存在“共享页面”，其中托管的控件在每个 UltraTabPageControl 上都可见

代码示例更好地解释了层次结构

```
 // Call BeginUpdate to prevent the display from
    // refreshing as we add individual tabs.
    // Note: This MUST be paired with a call to
    // EndUpdate below.
    this.ultraTabControl1.BeginUpdate();

    UltraTab tabAdded;
    UltraTabsCollection tabs = this.ultraTabControl1.Tabs;

    // Add a tab to the Tabs collection
    tabAdded = tabs.Add("options", "&Options");

    // Create a new control
    TextBox tb = new TextBox();
    tb.Location = new Point(20,20);
    tb.Size = new Size(80, 20);

    // Add the control to the tab's tab page
    tabAdded.TabPage.Controls.Add(tb );

    // Call EndUpdate to allow the display to refresh
    this.ultraTabControl1.EndUpdate(); 
```

编辑：

当您关闭应用程序的主窗体时，框架调用的事件顺序如下：

```
MAINFORM - FormClosing
MAINFORM - FormClosed
MAINFORM - Deactivate
MAINFORM - HandleDestroyed
CONTROL - HandleDestroyed
   .... - repeat for each control
CONTROL - Disposed
   .... - repeat for each control
MAINFORM - Disposed 
```

如您所见，当您收到 FormClosing 事件时，UltraTabControl 及其所有页面应该仍然可用。基本属性 IsDisposed 在那个时候应该仍然是假的，因此没有 TabControl 被“关闭”

现在我有一个疑问 - 我们正在谈论 WinForms 应用程序，对吗？

# html - 灵活区域中的三个灵活（百分比）列

> ID：13417403
> 
> 赞同：0
> 
> 时间：2012-11-16T13:17:23.947
> 
> 标签：html, css, multiple-columns

除了固定宽度的菜单外，我还需要安排三列 divboxes，外框宽度为 33%。

[http://jsfiddle.net/uvw5c/1/](http://jsfiddle.net/uvw5c/1/)

所以我想要橙色菜单旁边的红色，黄色，绿色区域，在任何#menu宽度的情况下。

```
<div id="container">
    <div id="menu">
       menu 
    </div>
    <div id="dialogbox">
        <div id="outer">
         <div class="inner" style="background-color:red;">
             col1
         </div>
         <div class="inner">
             col2
         </div>
         <div class="inner" style="background-color:green;">
             col3
         </div>
        </div>
    </div>
 </div>

​  
#container{
   width:500px;   
   background-color:grey;
   height:300px;
}
#menu{
   width:300px; 
   float:left;
   height:100%;
    background-color:orange;
}

#dialogbox{  
    float:left;
    height:100%;
    width:100%;
}
#outer{    
    background-color:blue;
    height:300px;
    margin: 0 auto;
    padding:0;
    width:100%;
}

.inner{
   padding:0;
   margin:0;
   width:33%;
    background-color:yellow;
    height:100%;
    float:left;
}
​ 
```

​</p>

提前感谢您的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:33:42.800

对于这种特定情况，您可以取消大量标记并使用`display: table;`and `table-cell;`. 设置菜单的宽度，其余的会自动平均填充。

HTML：

```
<div id="container">
    <div id="menu">
       menu 
    </div>
    <div class="inner" style="background-color:red;">
             test
    </div>
    <div class="inner">
             test
    </div>
    <div class="inner" style="background-color:green;">
             test
    </div>
</div>
​ 
```

CSS：

```
#container{
    width:500px;
    display: table;
    height: 300px;    
}
#menu{
    width: 100px; 
    background: #00f;
    display: table-cell;
}

.inner{
    padding:0;
    margin:0;
    background-color:yellow;
    height:100%;
    display: table-cell;        
} 
```

小提琴：http: [//jsfiddle.net/Kyle_Sevenoaks/uvw5c/5/](http://jsfiddle.net/Kyle_Sevenoaks/uvw5c/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:37:44.910

制作一个同时包含菜单和 .inner 元素的 div。还要检查一个元素的内部宽度必须为 33.3% 和 33.4%（可能是中间的那个）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:49:57.833

我在朋友的帮助下找到了解决方案：

[http://jsfiddle.net/t39yV/2/](http://jsfiddle.net/t39yV/2/)

在#dialogbox 上使用margin-left 非常聪明；）

```
#container{
   width:100%;   
   background-color:grey;
   height:300px;
}
#menu{
   width:100px; 
   float:left;
   height:100%;
    background-color:orange;
}

#dialogbox{  
    margin-left:100px;
    height:100%;
}
#outer{    
    background-color:blue;
    height:300px;
    margin: 0 auto;
    padding:0;
    width:100%;
}

.inner{
   padding:0;
   margin:0;
   width:33.3%;
    background-color:yellow;
    height:100%;
    float:left;
} 
```

# c# - 将视图中的值放入 viewBag

> ID：13417406
> 
> 赞同：1
> 
> 时间：2012-11-16T13:17:31.793
> 
> 标签：c#, html, asp.net-mvc

我的 HTML 视图中有一个隐藏字段

```
<%:Html.HiddenFor(model=>model.ContactId) %> 
```

我想把这个值放在 viewBag 中，以便我可以在控制器中使用它。怎么做？另外，我将如何在控制器中访问它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T13:19:40.703

您没有`postback`ASP.NET MVC 中的概念，并且`ViewBag`您可以将数据传递到视图，但不能在视图和控制器之间来回传输数据。

如果您的隐藏输入在表单中，那么在发布表单后，新值将可以通过`model.ContactId`.

例子：

```
// Model
class TestModel
{
     public string ContactId { get; set; }
}

//Controller
[HttpPost]
public ActionResult Edit(TestModel model)
{
    string newId = model.ContactId;
} 
```

# python - 用 graphviz 布置一个大图

> ID：13417411
> 
> 赞同：65
> 
> 时间：2012-11-16T13:17:47.643
> 
> 标签：python, graphviz

我的女儿们制作了一款类似于井字游戏的游戏。当然，当我和他们一起玩时，我开始在我的脑海中强制使用它......

所以在午餐时间我做了一个快速的 Python 小脚本来“解决”这个游戏。我想以图形方式查看结果，所以我生成了一个包含所有合法移动的点文件：

[我在这里粘贴了数据](https://gist.github.com/4087256)。

当我尝试使用 渲染它时`dot`，它需要很长时间，几个小时后我中止了它。

如果我使用`neato`or`sfdp`等​​渲染它，则需要几秒钟或更短的时间，但实际上无法读取布局：

```
sfdp -x -Tpng data.dot > data.png 
```

![sfdp](../Images/0cb7887da5ec74545fcb4e8c4951da94.png)

```
neato -x -Tpng data.dot > data.png 
```

![内托](../Images/3e05469354989680e6845e199aae0e87.png)

我很高兴得到的图像达到几百万像素。

如何布局和渲染如此大的图形？我对非点建议持开放态度，例如也可以进行布局的 Python 库。

^(（[有点相关的链接](http://xkcd.com/832/)）)

*补充*：[我的Python脚本](https://gist.github.com/4087469)解决游戏并生成点文件

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-16T16:50:51.880

试试这个：

```
sfdp -x -Goverlap=scale -Tpng data.dot > data.png 
```

保留布局，`-Goverlap`但均匀地放大，直到没有更多的节点重叠。当你缩小时，我能够得到一个大约 77MB 的 PNG，看起来像这样。 ![在此处输入图像描述](../Images/7163cd4ff8376c1e52dafcc901650d35.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-03T19:24:33.020

您仍然可以使用neato，但修改 .dot 文件：[splines=true overlay=false]

你的文件应该是这样的：

```
digraph luffarschack {
    graph [splines=true overlap=false];
    node [shape=none]; 
        ...here your nodes;
        ...here your edges;
} 
```

如果您只输入第二行“graph [splines=trueoverlap=false]”并且其他所有内容保持不变，它应该可以工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-10T14:40:31.623

除了其他答案，您还可以使用[Gephi](https://gephi.org/)等其他工具。

> Gephi 是领先的各种图形和网络的可视化和探索软件。Gephi 是开源和免费的。

在 Windows、Mac OS X 和 Linux 上运行。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-04-03T00:47:25.933

我发现 dot在我的大图（ [svg](http://jnnnnn.github.io/needs/feelings.svg)）上的默认值`-Kneato`太慢了。我最终使用

```
dot -Ksfdp -ooutput.svg -Tsvg input.dot 
```

`input.dot`在哪里

```
digraph {
    graph [overlap=false];
    a -> {b c d e f g}
    b -> {c e g x f}
    ...
} 
```

# javascript - firefox / chrome 控制台功能日志

> ID：13417418
> 
> 赞同：0
> 
> 时间：2012-11-16T13:18:29.317
> 
> 标签：javascript, firefox, google-chrome, console, firebug

通常我使用 ff + firebug 并且我发现它的控制台功能非常有用：如果你 console.log(a_function); 你看不到（恕我直言完全没用的）函数体，而是一个指向定义函数的 js 源文件的链接。

（在[https://getfirebug.com/logging](https://getfirebug.com/logging)他们在“记录对象超链接”段落中进行了描述）

但是，有没有办法在 firefox / chrome“本机”控制台上具有相同的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T21:39:52.013

您可以添加`console.trace()`甚至`console.log()`在函数定义中进行跟踪。像这样的东西：

```
function something(){
    var x = 5 +3;
    console.trace();
    console.log("FUNCTION SOMETHING");
    return x;
  } 
```

因此，当它显示在您的 Chrome 控制台工具中时，您可以看到原始文件和行并单击它以获取该文件的源。不像FF Firebug那么雄辩，但它是一个开始。

我不知道您是否可以访问这些功能，并且只是想要一种从控制台转到源文件的简单方法，或者真的不知道该功能的来源。但这就是我会做的。查看来源以供参考！

来源：[https ://developers.google.com/chrome-developer-tools/docs/console-api#consoletrace](https://developers.google.com/chrome-developer-tools/docs/console-api#consoletrace)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T13:06:50.167

尝试使用

```
console.log("test"); 
```

它适用于ff和chrome。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T13:27:17.867

在 Chrome 中，如果您将函数放在`console.dir`函数中，您将获得有关该函数的附加信息。然后您可以右键单击该函数并选择“显示函数定义”。

例子：

```
console.dir(my_function); 
```

我在 Firefox 中没有看到任何内容。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-17T14:31:48.297

为什么不`console.debug(yourfunc.toString());` 呢？

# c++ - qmail-inject 返回 111

> ID：13417419
> 
> 赞同：0
> 
> 时间：2012-11-16T13:18:34.373
> 
> 标签：c++, c, linux, qmail

嗨，我遇到了 qmail 的问题。我想从我的程序发送一封电子邮件，我从 qmail-inject 收到 111 错误代码。但是，如果我尝试从命令行发送相同的电子邮件，它就可以工作。

在我的代码中：

```
if ((pid = fork()) < 0) {
        logger.error("error creating on new process");
}

else if (pid == 0) {
      logger.info("qmail-inject is calling now for Dlp Notify");
      if (execl("/opt/program/bin/sendmail","sendmail", notifySender, tempMail,(char*)   0) == -1)  {
        logger.error("notify operation failed: %s", strerror(errno));
        exit(1);
    }
} 
```

sendmail 就是这样的脚本：

```
/bin/cat $2 | /opt/smtp/bin/qmail-inject -f   $1 
```

当我在命令行上运行这个脚本时效果很好。但是从我的程序不起作用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:23:01.977

`qmail-inject`至少从您向我们展示的内容来看，您要执行的 C 代码看起来不错。

`man qmail-inject` [告诉我们退出代码 111 表示临时错误](http://qmail.org/man/man8/qmail-inject.html)。

`qmail-inject`的来源（v1.03，这里看起来与 netqmail 1.06 相同）显示以下内容：

```
void temp() { _exit(111); }
void die_nomem() {
 substdio_putsflush(subfderr,"qmail-inject: fatal: out of memory\n"); temp(); }
void die_invalid(sa) stralloc *sa; {
 substdio_putsflush(subfderr,"qmail-inject: fatal: invalid header field: ");
 substdio_putflush(subfderr,sa->s,sa->len); perm(); }
void die_qqt() {
 substdio_putsflush(subfderr,"qmail-inject: fatal: unable to run qmail-queue\n"); temp(); }
void die_chdir() {
 substdio_putsflush(subfderr,"qmail-inject: fatal: internal bug\n"); temp(); }
void die_read() {
 if (errno == error_nomem) die_nomem();
 substdio_putsflush(subfderr,"qmail-inject: fatal: read error\n"); temp(); } 
```

从后者（以及对 的更多查找`qmail-inject.c`）可以得出以下可能导致`qmail-inject`111 退出的原因：

*   记不清
*   无效的标头字段（传递到`-f`配置/控制文件或从配置/控制文件读取）
*   无法运行`qmail-queue`（可能是因为它不存在，或者缺少它的搜索路径）
*   无法控制/`chdir`配置`qmail`文件夹
*   无法读取 qmail 的配置/控制文件

检查您身边的日志也可能会有所帮助。

# java - 整数引用同一个对象

> ID：13417422
> 
> 赞同：-4
> 
> 时间：2012-11-16T13:18:56.063
> 
> 标签：java

代码：

```
Integer a1 = 100;
Integer a2 = 100;
System.out.println(a1 == a2);   // true

Integer b1 = new Integer(100);
Integer b2 = new Integer(100);
System.out.println(b1 == b2);   // false

Integer c1 = 150;
Integer c2 = 150;
System.out.println(c1 == c2);   // false 
```

Java 设计在使用 AutoBoxing 时，-128 和 127 之间的值似乎引用相同的 Integer 对象，这导致第一个代码片段和最后一个代码片段的结果不同

我的问题是：java为什么要这样设计，有什么好处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:21:28.717

简单的理由是，拥有一组已经创建并可用于装箱的整数是有用/高效的。如果应用程序需要装箱的整数，它们很可能会在某个范围内（例如 1...随便）。它们被装箱到 -127/128 的事实是一种简单的设计启发式，它基于在不预先装箱大量整数的情况下可能提供的好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T13:20:57.053

这是一种优化，因为许多数值运算都在上述区间内使用 int 值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T13:21:09.840

为 -128 和 127 之间的值缓存整数。这是[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7)的一部分：

> 如果被装箱的值 p 是真、假、一个字节或 \u0000 到 \u007f 范围内的一个字符，或者一个介于 -128 和 127（含）之间的 int 或短数字，则令 r1 和 r2 为p 的任意两个拳击转换。r1 == r2 总是如此。

该行为的原因在同一部分中给出：默认行为是`==`比较总是返回 true，但出于性能原因，它被限制在该范围内。

> 理想情况下，对给定的原始值 p 进行装箱将始终产生相同的参考。在实践中，使用现有的实现技术这可能是不可行的。[...]
> 这个[范围限制]确保在大多数常见情况下，行为将是期望的行为，而不会造成过度的性能损失，尤其是在小型设备上。例如，内存限制较少的实现可能会缓存所有 char 和 short 值，以及 -32K 到 +32K 范围内的 int 和 long 值。

# asp.net - 在字符串 vb.net 中查找数字

> ID：13417428
> 
> 赞同：0
> 
> 时间：2012-11-16T13:19:12.157
> 
> 标签：asp.net, sql, vb.net

像这样的sql列中的数据

```
BLT Salad $4.50 Ham N Cheese Panini w/Chips or Soup  $3.99 Chicken Noodle Soup 
```

我想`<br />`在价格之后添加。（价格可能会改变，但 $ 将永远存在）就像那样

```
BLT Salad $4.50
Ham N Cheese Panini w/Chips or Soup  $3.99
Chicken Noodle Soup 
```

无论如何，在价格中的 (.) 或 ($) 之后的 4 个字符之后的两个字符之后添加新行吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:30:07.700

使用正则表达式，并假设数字始终是 $ 后跟一些数字，然后是 . 后跟 2 位数字：

```
Regex.Repalce(myString, "(\$\d+\.\d\d)", "$1<br />") 
```

正则表达式的分解：

```
(      - Start capturing group
\$     - Match `$` sign
\d+    - Followed by one or more digit (replace with [0-9] if needed)
\.     - Followed by a .
\d\d   - Followed by two digits
)      - End capturing group 
```

换货明细：

```
$1     - Use the value of the first captured group
<br /> - Followed by <br /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:41:18.910

```
 Dim replaced = Regex.Replace(input, "(\$\d+\.\d{2,2})", "$1<br/>") 
```

# php - 当 getText() 找不到翻译并使用给定的字符串时，我如何记录？

> ID：13417436
> 
> 赞同：1
> 
> 时间：2012-11-16T13:19:56.087
> 
> 标签：php, logging, gettext

我需要记录对 gettext() 的任何调用，它使用后备案例（给定的字符串），因为没有找到翻译。有没有办法记录这些信息？

如果这有所作为：我使用 _('stringToBeTranlated'); 而不是 gettext('...')。

# c# - C#通过Networkstream发送字符串后，可以读取但不能与“if”一起使用

> ID：13417437
> 
> 赞同：1
> 
> 时间：2012-11-16T13:19:58.453
> 
> 标签：c#, sockets, networkstream, system.net.sockets

我用 C# 编写了一个小套接字应用程序，它在每次启动时检查我的程序的当前版本，现在在我的测试程序中一切正常，我可以从服务器发送字符串，它将正确显示在客户端，但是当我尝试使用带有该字符串的 if 语句时，它就不起作用了。例子：

```
 public void rcv(NetworkStream ns, TcpClient clientSocket)
    {
        on = false;
    //sending some random string so the server will respond
       Byte[] sendBytes = Encoding.ASCII.GetBytes("bla");
        ns.Write(sendBytes, 0, sendBytes.Length);
    //receiving server response 
        byte[] bytes = new byte[clientSocket.ReceiveBufferSize];
        int bytesread = clientSocket.ReceiveBufferSize;
        ns.Read(bytes, 0, bytesread);
    //received response, now encoding it to a string from a byte array
        string returndata =Encoding.ASCII.GetString(bytes);
        ver = Convert.ToString(returndata);
        //MessageBox.Show("ver\n" + ver);
        //MessageBox.Show("return\n" + returndata);
        on = true;
        if (ver== "2.0.1")
        {
            MessageBox.Show("iahsd");
        }
    } 
```

如您所见，服务器发送的即时测试字符串是“2.0.1”确实正确显示在标签、消息框和我放入测试的文本框上。但是类末尾的 if 分支不接受它并跳过它，如果我放入 else 语句，它会跳到那个。

我已经尝试了我和我的朋友能想到的一切，尝试更改编码，发送不同的字符串等。

客户端的完整代码：http: [//pastebin.com/bQPghvAH](http://pastebin.com/bQPghvAH)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:25:09.180

在您的代码中编译的“2.0.1”存储为 Unicode。 [http://msdn.microsoft.com/en-us/library/362314fe(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/362314fe(v=vs.110).aspx)

您将来自服务器的值视为 ASCII 编码文本，然后将其与 Unicode 字符串进行比较。

观察：

```
 static void Main(string[] args)
    {
        string a = "hello";
        byte[] b = UnicodeEncoding.Unicode.GetBytes(a);
        string c = ASCIIEncoding.ASCII.GetString(b);

        Console.WriteLine(a == c);
    } 
```

解决方案是使用 String.Compare...

```
Console.WriteLine(String.Compare(a,c)==0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:34:33.063

`Stream.Read(...)`返回读取的字节数。您需要使用此值来确定字符串的结束位置，方法是使用`Encoding.GetString(Byte[] bytes, Int32 index, Int32 count)`重载。

```
Byte[] buffer = ...;
var bytesRead = stream.Read(buffer, 0, buffer.Length);
var returnedData = Encoding.ASCII.GetString(buffer, 0, bytesRead); 
```

# javascript - 如何动态地将键/值对添加到数组中

> ID：13417441
> 
> 赞同：0
> 
> 时间：2012-11-16T13:20:10.193
> 
> 标签：javascript, jquery

我想使用 jquery 动态添加一个数组。我该怎么做。（或）

我想像这样将元素推入数组中。

```
 var array = [{"question":"1","answer":"2"}]; 
```

我想使用for循环动态地做到这一点我的意思是最初我会添加

```
array.push({"question":"1"});
then array.push({"answer":"2"}); 
```

但我希望元素在同一个数组 [0] 元素中，但它作为数组 [0]，数组 [1] 我该怎么做。我正在使用 for 循环将元素添加到数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:23:24.490

如果您在之后立即推送答案，您可以不做类似的事情吗

```
 array[index] = { "question" : array[index].question, "answer": 2 }; 
```

如果不是，您将不得不找到其他方法来查找推送问题的索引，然后

请注意，array.push 总是向数组添加一个新对象，而不是更新它。

# c# - C# 拆分帧中的 SerialPort 通信

> ID：13417442
> 
> 赞同：0
> 
> 时间：2012-11-16T13:20:17.800
> 
> 标签：c#, serial-port, modbus

我需要编写一个程序，它将通过 RS485 监听 ModBus 网络中的通信。我使用 RS485 <> USB 加密狗连接到网络。

我可以使用 SerialPort.DataReceived 事件读取一些数据，但它会给出奇怪的结果。数据通常是拆分的，但它应该是一体的。（Modbus 主站每 100 毫秒传输一次）。

```
class Serial
{
    private SerialPort port;
    Queue<byte[]> buffer;

    public Serial()
    {
        buffer = new Queue<byte[]>();
        port = new SerialPort("COM3", 19200, Parity.Even, 8, StopBits.One);
        port.DataReceived += port_DataReceived;
    }

    public void Open()
    {
        if (port.IsOpen)
        {
            port.Close();
        }

        port.Open();
    }

    void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        byte[] buff = new byte[port.BytesToRead];
        port.Read(buff, 0, port.BytesToRead);
        buffer.Enqueue(buff);
    }
} 
```

我没有任何开始登录传输。帧之间的延迟是最小的。3.5 个字符，字符之间的最大延迟为 1.5 个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:14:56.157

这是完全正常的，串口是非常慢的设备。接收到一个字节后立即触发 DataReceived 事件。您需要调用 Read() 并注意它返回的值，它能够从输入缓冲区中检索的字节数。这可能不止一个，但很少等于“数据包”中的字节数，只有当机器由于某种原因变得非常慢时才会发生这种情况。

请注意，调试器是使其变慢的一种方法，断点或单步执行事件处理程序代码可为驱动程序提供足够的时间来接收数据包中的所有字节。以便 Read() 调用将它们全部返回。但是，一旦您停止调试该代码，它就会停止工作。

您可以使用 ReceivedBytesThreshold 属性来延迟事件，但这只能在数据包具有固定大小时起作用。只需使用 Read() 调用的第二个参数将您输入的字节附加到 byte[] 中。并且在您拥有所有数据包之前不要处理数据包。

# web-services - 用于使用 Web 服务的 SSL 连接

> ID：13417446
> 
> 赞同：0
> 
> 时间：2012-11-16T13:20:18.703
> 
> 标签：web-services, ssl, wsdl2java

我有一些关于为我的 Web 服务建立 SSL 连接的问题。所以我用CXF的工具“WsdlToJava”生成了一个java web服务项目。现在我不想使用我的 Web 服务，该服务托管在我的服务器上，具有 SSL 协议访问权限。

当我尝试关注此页面[如何为 SOAP 客户端配置 HTTPConduit 时，](http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html#ClientHTTPTransport%28includingSSLsupport%29-HowtoconfiguretheHTTPConduitfortheSOAPClient%3F)我遇到了一些 SSL 问题。我替换了这部分：

```
URL wsdl = getClass().getResource("wsdl/greeting.wsdl");
SOAPService service = new SOAPService(wsdl, serviceName);
Greeter greeter = service.getPort(portName, Greeter.class); 
```

经过 ：

```
URL WSDL_LOC = new URL("https://myserver.com/ws/myWS?wsdl");
MyWS_Service myws_serv = new MyWS_Service(WSDL_LOC);
MyWS mywebservice = myws_serv.getMyWSSOAP(); 
```

但由于 SSL 原因，它在此代码的第二行失败。在本教程中，在这部分之后建立了 SSL 连接，我认为他们没有问题，因为他们的示例没有尝试在某些服务器上获取 wsdl 文件，而是在本地获取。

在获取 WSDL 文件之前，我需要做什么来建立 SSL 连接？谢谢你

错误信息：

```
Exception in thread "main" javax.xml.ws.WebServiceException: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service.
    at org.apache.cxf.jaxws.ServiceImpl.<init>(ServiceImpl.java:150)
    at org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:91)
    at javax.xml.ws.Service.<init>(Service.java:92)
    at com.myserver.MyWS_Service.<init>(MyWS_Service.java:37)
    at tests.MyWSTest.main(MyWSTest.java:49)
Caused by: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service.
    at org.apache.cxf.wsdl11.WSDLServiceFactory.<init>(WSDLServiceFactory.java:94)
    at org.apache.cxf.jaxws.ServiceImpl.initializePorts(ServiceImpl.java:204)
    at org.apache.cxf.jaxws.ServiceImpl.<init>(ServiceImpl.java:148)
    ... 4 more
Caused by: javax.wsdl.WSDLException: WSDLException: faultCode=PARSER_ERROR: Problem parsing 'https://myserver.com/ws/myWS?wsdl'.: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at com.ibm.wsdl.xml.WSDLReaderImpl.getDocument(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
    at org.apache.cxf.wsdl11.WSDLManagerImpl.loadDefinition(WSDLManagerImpl.java:244)
    at org.apache.cxf.wsdl11.WSDLManagerImpl.getDefinition(WSDLManagerImpl.java:191)
    at org.apache.cxf.wsdl11.WSDLServiceFactory.<init>(WSDLServiceFactory.java:92)
    ... 6 more
Caused by: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(Unknown Source)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Unknown Source)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Unknown Source)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(Unknown Source)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(Unknown Source)
    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Unknown Source)
    at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Source)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(Unknown Source)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    ... 12 more
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.validator.PKIXValidator.doBuild(Unknown Source)
    at sun.security.validator.PKIXValidator.engineValidate(Unknown Source)
    at sun.security.validator.Validator.validate(Unknown Source)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(Unknown Source)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(Unknown Source)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(Unknown Source)
    ... 31 more
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(Unknown Source)
    at java.security.cert.CertPathBuilder.build(Unknown Source)
    ... 37 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:32:34.783

您需要拥有为“https://myserver.com/”颁发证书的签名机构的 CA 证书。最简单的方法是通过网络浏览器获取“https://myserver.com/”的证书，然后检查 CA 层次结构。获得父证书后，将其导入 JKS 信任库。当您运行 java 程序时，将其作为系统属性“-Djavax.net.ssl.trustStore=yourtruststore.jks”传递

# vb.net - 初始化 Emgu.CV 的异常

> ID：13417449
> 
> 赞同：2
> 
> 时间：2012-11-16T13:20:23.000
> 
> 标签：vb.net, ocr, emgucv

嘿这是我第一次使用这个网站，但我有一个问题。我看到了这个关于让 ocr 与 vb.net 一起工作的很棒的 youtube 视频。这里是网址：

[http://www.youtube.com/watch?v=Kjdu8SjEtG0](http://www.youtube.com/watch?v=Kjdu8SjEtG0)

所以我决定下载 emgu 库，这里是 url：

[http://sourceforge.net/projects/emgucv/](http://sourceforge.net/projects/emgucv/)

我做了视频所说的一切，我得到了这个错误：“创建表单时发生错误。有关详细信息，请参阅 Exception.InnerException。错误是：'Emgu.CV.OCR.Tesseract' 的类型初始化程序引发了异常。”

我什至复制了异常（如果有帮助的话）：

```
System.InvalidOperationException was unhandled
  Message=An error occurred creating the form. See Exception.InnerException for details.  The error is: The type initializer for 'Emgu.CV.OCR.Tesseract' threw an exception.
  Source=WindowsApplication1
  StackTrace:
       at WindowsApplication1.My.MyProject.MyForms.Create__Instance__[T](T Instance) in 17d14f5c-a337-4978-8281-53493378c1071.vb:line 190
       at WindowsApplication1.My.MyProject.MyForms.get_Form1()
       at WindowsApplication1.My.MyApplication.OnCreateMainForm() in C:\Users\UltimateSoul\AppData\Local\Temporary Projects\WindowsApplication1\My Project\Application.Designer.vb:line 35
       at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.OnRun()
       at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.DoApplicationModel()
       at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.Run(String[] commandLine)
       at WindowsApplication1.My.MyApplication.Main(String[] Args) in 17d14f5c-a337-4978-8281-53493378c1071.vb:line 81
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.TypeInitializationException
       Message=The type initializer for 'Emgu.CV.OCR.Tesseract' threw an exception.
       Source=Emgu.CV.OCR
       TypeName=Emgu.CV.OCR.Tesseract
       StackTrace:
            at Emgu.CV.OCR.Tesseract..ctor(String dataPath, String language, OcrEngineMode mode)
            at WindowsApplication1.Form1..ctor() in C:\Users\UltimateSoul\AppData\Local\Temporary Projects\WindowsApplication1\Form1.vb:line 8
       InnerException: System.TypeInitializationException
            Message=The type initializer for 'Emgu.CV.CvInvoke' threw an exception.
            Source=Emgu.CV
            TypeName=Emgu.CV.CvInvoke
            StackTrace:
                 at Emgu.CV.CvInvoke.CV_MAKETYPE(Int32 depth, Int32 cn)
                 at Emgu.CV.OCR.Tesseract..cctor()
            InnerException: System.DllNotFoundException
                 Message=Unable to load DLL 'opencv_core242': The specified module could not be found. (Exception from HRESULT: 0x8007007E)
                 Source=Emgu.CV
                 TypeName=""
                 StackTrace:
                      at Emgu.CV.CvInvoke.cvRedirectError(CvErrorCallback errorHandler, IntPtr userdata, IntPtr prevUserdata)
                      at Emgu.CV.CvInvoke..cctor()
                 InnerException: 
```

我这几天一直在做，没有找到。请帮忙谢谢！

我很抱歉这里的代码

```
Imports Emgu.CV
Imports Emgu.Util
Imports Emgu.CV.OCR
Imports Emgu.CV.Structure

Public Class Form1

    Dim OCRz As Tesseract = New Tesseract("tessdata", "eng", Tesseract.OcrEngineMode.OEM_TESSERACT_ONLY)
    Dim pic As Bitmap = New Bitmap(270, 100)
    Dim gfx As Graphics = Graphics.FromImage(pic)

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

        gfx.CopyFromScreen(New Point(Me.Location.X + PictureBox1.Location.X + 4, Me.Location.Y + PictureBox1.Location.Y + 30), New Point(0, 0), pic.Size)
        PictureBox1.Image = pic

    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

        OCRz.Recognize(New Image(Of Bgr, Byte)(pic))
        RichTextBox1.Text = OCRz.GetText

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:18:52.263

copy `cvextern.dll` and file with `opencv_**.dll` to your output directory: `bin/Debug/`

Setting your configuration manager to run "AnyCPU", and the configuration must "Debug".

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T19:56:58.530

如果您使用的是 64 位操作系统，则还必须添加以引用以下文件（对于 EMGU CV 版本 >=2.4）

`cudart64_42_9.dll, cvextern.dll, npp64_42_9.dll`

这将有助于在 64 位操作系统中使用 emguCv 2.4.x，而不会出现内部异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T06:55:48.637

在视频中，它是被复制的 x64 目录。而是在项目目录中复制 x86 目录，并在属性中选择所有 dll 文件启用“如果较新则复制”。

# c# - 如何在 C# Windows 窗体上生成验证码？

> ID：13417453
> 
> 赞同：3
> 
> 时间：2012-11-16T13:20:28.980
> 
> 标签：c#, winforms, generator, captcha

我有一个应用程序，可以很容易地由机器人通过网络甚至在本地机器上控制（例如模拟键盘和鼠标）。
我想使用验证码来避免这种情况。源必须在没有互联网的情况下工作/必须在计算机本身的运行时生成。

是否有任何开源项目或有人可以给我一个代码示例或链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T13:27:19.650

我找到了Raymund Macaalay的文章[“简单的验证码，用 C# 创建自己的验证码”。](http://www.codeproject.com/Articles/99148/Simple-CAPTCHA-Create-your-own-in-C)它适用于 ASP.NET 应用程序，但他在 STEP2 中使用不同的随机字体生成了一个普通的 C# 位图图像，因此这也应该适用于您的 WinForms 应用程序。

# java - javax.xml.ws.WebServiceException：未定义的端口类型 Java Struts SOAP WSDL

> ID：13417454
> 
> 赞同：5
> 
> 时间：2012-11-16T13:20:29.513
> 
> 标签：java, soap, wsdl, struts

好的，我真的有一个奇怪的问题，我今天在 google 和 yahoo 中寻找解决方案将近 4 个小时。我拼命寻找解决方案。

```
public static String [] checkCardAccount(String cardNumber, String cardIssuer, String securityNumber){

        URL url = null;
        try {
            url = new URL("http://localhost:8999/bankcard?wsdl");
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }

        QName qname = new QName("http://server.bcard.soap.com/","BankCardImplService");

        Service service = Service.create(url,qname);

        BankCard bankcard = service.getPort(BankCard.class);

        return bankcard.getCardClientData(cardNumber, cardIssuer);
    } 
```

上面的代码是我用于访问 SOAP 服务的客户端，它确实可以在独立的 Java 应用程序中工作，但是当我将它嵌入到我的 Java Struts 应用程序时，它会在下面显示以下错误

> javax.xml.ws.WebServiceException：未定义的端口类型：com.sun.xml.internal.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:349) com 上的 {http://bankcard.api.com/}BankCard .sun.xml.internal.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:355) at javax.xml.ws.Service.getPort(Service.java:161) at com.api.bankcard.BankCardClient.checkCardAccount(BankCardClient .java:25) 在 org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58) 在 org.apache.struts 的 com.action.CardregAction.execute(CardregAction.java:18)。 chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67) at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51) at org.apache.commons.chain.impl.ChainBase.execute( ChainBase.java:191) 在 org.org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191) 在 org.apache.struts.chain.ComposableRequestProcessor 的 apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)。 process(ComposableRequestProcessor.java:283) at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913) at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462) at javax.servlet .http.HttpServlet.service(HttpServlet.java:637) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 在org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 在 org.apache.catalina.valves.ErrorReportValve 的 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) .invoke(ErrorReportValve.java:102) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) 在 org. org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) 在 org.apache.tomcat.util.net.JIoEndpoint$ 的 apache.coyote.http11.Http11Processor.process(Http11Processor.java:857) Worker.run(JIoEndpoint.java:489) 在 java.lang.Thread.run(Thread.java:662)apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve. java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857) 在 org.apache.coyote.http11 .Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Thread.java:662 )apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve. java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857) 在 org.apache.coyote.http11 .Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Thread.java:662 )StandardEngineValve.invoke(StandardEngineValve.java:109) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857) at org .apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run （线程.java：662）StandardEngineValve.invoke(StandardEngineValve.java:109) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857) at org .apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run （线程.java：662）第489章）第489章）

现在我真的看到问题出在目标命名空间上，因为当我更改它时，错误更改为它表示有效服务是`{http://bankcard.api.com/}BankCard`

我哪里出错了？此代码可在 Java 应用程序上独立运行，但不能在我的 Java Struts Web 应用程序中运行

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T18:07:54.343

在实现类的@WebService注解中给出endpointIneterface，如果不给出端点接口，则在使用getPort方法时必须提及完全限定的端口名称。

service.getPort("PortQName",BankCard.class);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-09T14:37:30.670

您需要使用注释`BankCardImpl`类`@WebService(name="BankCard")`
然后可以使用`service.getPort(BankCard.class);`

**或者**

如果您只是对其进行注释`@WebService`或为其赋予了另一个名称，那么您将需要为该`getPort()`方法提供更多信息：

代替

```
BankCard bankcard = service.getPort(BankCard.class); 
```

和

```
QName port_name = new QName("http://server.bcard.soap.com/","BankCardImplPort");
BankCard bankcard = service.getPort(port_name, BankCard.class); 
```

# javascript - 所见即所得免费用于商业用途

> ID：13417456
> 
> 赞同：0
> 
> 时间：2012-11-16T13:20:37.433
> 
> 标签：javascript, jquery, asp.net-mvc, wysiwyg

我看到有几个关于所见即所得控件的问题，但是我的问题是我正在寻找可以在我的商业/专有项目中使用的免费控件。

到目前为止，我发现的所有控件都是 LGPL 等，它们阻止我在我的通讯中使用它。项目。

任何事物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:28:40.213

如果它们是 LGPL，您可以将它们添加到商业项目中，限制是您需要在编辑器旁边附加（如果软件是可分发的）LGPL 许可证。

这是一个 C/C++ 程序的小解释，但可能适用于你。[http://answers.google.com/answers/threadview/id/439136.html](http://answers.google.com/answers/threadview/id/439136.html)

# android - 在 pc 和 AVD 之间快速传输文件

> ID：13417457
> 
> 赞同：2
> 
> 时间：2012-11-16T13:20:37.940
> 
> 标签：android, adb, avd

我必须将一些外部文件从我的电脑复制到我的 AVD。这似乎是可能的，特别是通过 ADB 使用这个命令：`> adb push "C:/_tmp_filestocopy" "/sdcard"`，它现在正在复制，但是速度相当慢，当我说相当慢时，我的意思是**非常**慢。例如，一个 50MB 的文件花费了我不到 20 分钟。因此，我的问题是：***是否有任何更快的方法可以将文件从 PC 传输到 AVD***？我在某处读过，您可以`sdcard.img`在 Linux 中从 AVD 挂载。不幸的是，我正在运行 Windows。也许我可以不时尝试 VirtualBox 或 VMWare。另外，我见过 Quick ADB Pusher，但我怀疑它只是使用 ADB 命令行，但带有 GUI。它实际上更快，还是只是 GUI 后面的命令行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:53:08.777

您可以尝试以下方法：

> 1）设置android模拟器时创建一个sdcard图像文件。确保文件足够大以存储您希望模拟器访问的所有数据。
> 
> 2) 在 Windows 上挂载 sdcard 映像文件（就像挂载 ISO 映像一样）。检查此链接[http://heatware.net/windows-xp/how-to-mount-an-isobinuifimg-image-in-windows/](http://heatware.net/windows-xp/how-to-mount-an-isobinuifimg-image-in-windows/)
> 
> 3) 完成此操作后，您应该可以从文件浏览器访问某种外部或虚拟磁盘。
> 
> 4) 将所有内容复制到虚拟映像中。
> 
> 5) 从系统中卸载映像。
> 
> 6）启动模拟器。它应该看到 sdcard 上的所有数据。

在 GNU/Linux 上会容易得多，因为您可以使用一个命令挂载/卸载 img。

祝你好运！

# unity3d - 具有全局 Alpha 的 Unity 漫反射着色器

> ID：13417458
> 
> 赞同：1
> 
> 时间：2012-11-16T13:20:39.470
> 
> 标签：unity3d, shader

我正在尝试在 Unity 中制作一个简单的漫反射着色器，尽管它具有全局 alpha 值。所以你添加一个纹理（没有 alpha），然后在着色器中定义一个 alpha 值（在 0 和 1 之间浮动。）然后整个纹理是透明的。

这是我已经拥有的，它只是您可以成像的最基本的漫反射着色器，尽管我一直在添加 alpha。

```
Properties
{
    _Alpha ("Alpha", Range (0.0,1.0)) = 0.0 
    _MainTex ("Base (RGB) Transparency (A)", 2D) = "" { }
}

SubShader
{
    Pass
    {
        SetTexture [_MainTex] { combine texture }
    }
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:51:53.637

我已经有一段时间没有这样做了，但我认为你想要这样的东西：

```
SubShader
{
    Tags { "Queue" = "Transparent" }

    Pass
    {
        Blend SrcAlpha OneMinusSrcAlpha

        SetTexture [_MainTex] {
           constantColor (1, 1, 1, [_Alpha])
           combine texture * constant
        }
    }
} 
```

[请注意，您可以从这里](http://unity3d.com/support/resources/assets/built-in-shaders)下载统一的内置着色器，它们非常有用，值得学习。

# cookies - 当点击功能在extjs4中起作用时如何重置cookie

> ID：13417460
> 
> 赞同：0
> 
> 时间：2012-11-16T13:20:42.017
> 
> 标签：cookies, extjs, extjs4

我有一个包含商店的网格。为了将变量传递给存储。我使用了 cookie，但每次单击网格的一个数据时。cookie 的值等于第一次点击的值，所以第一次设置后不会改变。

那里的gridside：我尝试在单击数据时设置cookie。（通过使用setcookie）。我尝试 deleteCookie 然后将 rec_dosya 声明为全局值，但它们不起作用。我该如何解决谢谢

```
var fileGrid_yp_is = new Ext.grid.GridPanel({
           contextMenu: new Ext.menu.Menu({
           items: [
            {
             id: 'Kullanici_yetki_id',
             text: 'Izin verilen Kullanici Listelesi',
             iconCls:'icon-grid-del',            
             listeners : {

                click : function(){
                    rec_dosya   = fileGrid_yp_is.getSelectionModel().getSelected();
                    rec_dosya=rec_dosya.data.id;
                    alert(rec_dosya);
                    deleteCookie('icerik_id');
                    setCookie('icerik_id',rec_dosya,365);
                //  alert(rec_dosya);

                //usersListWin.extraP = { a:11231231, b: 1, c: 2}; // Add additional stuff
          user_store.reload();
          usersListWin.show();

                }

            }
        },
        ]
    }),
    listeners: {
        celldblclick : function(gridim,rIndex,cIndex,e) {
            rec_dosya   = fileGrid_yp_is.getSelectionModel().getSelected();
             deleteCookie('icerik_id');
                    setCookie('icerik_id',rec_dosya,365);
             this.contextMenu.showAt(e.getXY());
        }
    },

    store: fileStore_yp_is,
    sm: new Ext.grid.RowSelectionModel({
        singleSelect:true
    }),
    trackMouseOver: true,
    frame:false,
    width:'auto',
    height:'auto',
    autoScroll : true,
    tbar:tbarim
}); 
```

在店面，

我尝试通过在 baseparams(icerik_id) 中使用 getcookie 来获取数据

```
var user_store = new Ext.data.JsonStore({
    root: 'rows',
    autoLoad: true,
    model: 'users',
    totalProperty: 'results',
    remoteSort: true,
    proxy: new Ext.data.HttpProxy({
       url: 'phps/kullanici_islemleri.php',
       method:'POST'

    }),
    baseParams:{
          action:'yetki',
          icerik_id:getCookie('icerik_id')
    },
    fields: [{
            name :'id'
        },{
            name :'icerik_id'
        },{
            name:'username'
        },{
            name:'rol'
        },{
            name:'gorme'
        },{
            name:'olusturma'
        },{
            name:'silme'
        }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T23:56:14.313

将[状态管理器](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.state.Manager)与[cookie 提供程序一起使用](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.state.CookieProvider)

# entity-framework - EntityFramework：删除仅给定主键的 m2m 关联。如何？

> ID：13417463
> 
> 赞同：1
> 
> 时间：2012-11-16T13:20:47.067
> 
> 标签：entity-framework

我有两个实体 a 和 b 以及它们之间的 m2m 关联。实体 a 和 b 加载到我的 DbContext 中，而 m2m 关联没有。现在，在我的程序中，我知道 a 和 b 的主键，我需要删除 m2m 关联。

当然，我可以从数据库中重新加载 a 并包含它的 m2m 关联。但是，这需要额外往返数据库以从数据库中获取实体。

我也可以先从 DbContext 中分离 a，然后将 b 添加到其 BSet，然后再次附加 a，然后调用 remove 类似：

```
context.Entry(a).State = EntityState.Detached;
a.Bset.Add(b)
context.Set(typeof(A)).Attach(a);
a.BSet.Remove(b) 
```

但是，通过将 a 从其上下文中分离然后附加它，我失去了对 a 所做的更改。因此，调用 SaveChanges() 可能不会将 a 的所有更改持久保存到数据库。

我的问题是：如何删除 a 和 b 之间的 m2m 关联，而不需要额外往返数据库，并且不会丢失对 a 或 b 所做的任何更改？

[编辑：我正在寻找的是一种方法 a.BSet.Attach ，它使我能够附加 a en b 之间的现有 m2m 关联]

我正在使用最新版本的实体框架，并且正在使用 DbContext。

欢迎任何帮助。

PS。这是[http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/5edea208-24cc-497b-8592-9cb025d558e4/的转贴](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/5edea208-24cc-497b-8592-9cb025d558e4/)

提前致谢，

梅林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:03:02.583

几天前我遇到了同样的问题，我想出的解决方案是：

```
context.Entry(a).State = EntityState.Detached;
a.BSet.Add(b);
context.Entry(a).State = EntityState.Modified;
a.BSet.Remove(b); 
```

使用该代码，您应该删除 m2m 关联并保留对数据库的所有更改。

编辑：我刚刚意识到我们编写了几乎相同的代码，只需重新附加您的实体，将其状态更改为“已修改”。

# android - 可以隐藏目标电子邮件地址吗？

> ID：13417464
> 
> 赞同：1
> 
> 时间：2012-11-16T13:20:54.677
> 
> 标签：android, email-address

在我的应用程序中，我有一个选项“联系我们”，但无论如何，我希望用户不要看到他们发送电子邮件的电子邮件地址。我使用标准方式发送电子邮件，但是当`Email Client`开始显示目标电子邮件时，我构建了界面。

```
Intent i = new Intent(Intent.ACTION_SEND);
            i.setType("message/rfc822");
            i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"myemail@gmail.com"});
            i.putExtra(Intent.EXTRA_SUBJECT, "Subject");
            //i.putExtra(Intent.EXTRA_TEXT   , "emailBody");
            try {
                startActivity(Intent.createChooser(i, "Send mail..."));
            } catch (android.content.ActivityNotFoundException ex) {
                Toast.makeText(SecondActivity.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
            } 
```

我希望`myemail@gmail.com`不向用户公开。在互联网上，我们在很多情况下都发现了这一点，例如，只提供了一个“发送”按钮，但我们如何在 Android 上做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:32:17.443

> 我希望 myemail@gmail.com 不向用户公开。

如果您想使用`ACTION_SEND`，用户有权知道他们正在发送的内容和他们发送到的电子邮件地址，并有权在他们认为合适的情况下修改其中的任何内容。正在消耗的是他们的设备、他们的电子邮件帐户以及他们的带宽。

> 在互联网上，我们在很多情况下都发现了这一点，其中只提供了一个“发送”按钮

Web 服务器正在发送电子邮件，而不是要求用户的浏览器发送电子邮件。

> 我们怎么能在 Android 上做到这一点？

欢迎您找到适用于 Android 的 JavaMail 端口或等效库，并自己直接发送电子邮件。当然，您需要配置您的应用程序以了解可用于发送的 SMTP 中继。

# jquery-ui - 不透明度后的jquery悬停状态

> ID：13417468
> 
> 赞同：0
> 
> 时间：2012-11-16T13:21:09.170
> 
> 标签：jquery-ui, jquery, jquery-plugins, jquery-selectors

一旦我单击按钮，图像不透明度会发生变化，但重新按钮仍然出现在悬停时，一旦图像的不透明度发生变化，是否可以完全删除红色按钮...

[http://jsfiddle.net/mwPeb/11/](http://jsfiddle.net/mwPeb/11/)

在下面提供我的 js 代码

```
 $(document).ready(function(){
                  $(".specialHoverOne").hover(function(){
    //  alert("i am here");
                    $(".ctaSpecialOne").css("visibility","visible");

                    },
                    function(){
                        $(".ctaSpecialOne").css("visibility","hidden");
                  }
                  );

     $(".ctaSpecialOne").click(function(e){
                        e.preventDefault();

                        $(this).parent().prev().prev().css({'opacity':.5});    

                 }); 

                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:49:38.457

是的...假设 .ctaSpecialOne 是红色按钮的类...

```
$(".ctaSpecialOne").on('click', function(){
    $(this).remove();
}); 
```

集成到您的代码中

```
 $(".ctaSpecialOne").click(function(e){
      e.preventDefault();
     $(this).parent().prev().prev().css({'opacity':.5});
     $(this).remove();   
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:50:20.897

```
$(this).parent().prev().prev().css({'opacity':.5}).stop(true,true).delay(1).queue(function (){
    ... your code here ...
    $(this).dequeue();
}); 
```

这就是我通常的处理方式......

我还建议将其更改`.css`为`.animate`然后您可以执行以下操作...

```
$(this).parent().prev().prev().stop(true,true).animate({'opacity':.5}).delay(1).queue(function (){
    ... your code here ...
    $(this).dequeue();
}); 
```

# git - git-version-gen 为什么我总是得到 UNKNOWN-dirty？

> ID：13417471
> 
> 赞同：1
> 
> 时间：2012-11-16T13:21:14.617
> 
> 标签：git, version-control

我正在尝试使用具有以下内容的配置脚本在我的项目中生成 git commit hash（或版本）：

```
AC_INIT([proj],
        m4_esyscmd([build-aux/git-version-gen .tarball-version]),
        [bug@example]) 
```

Makefile.am 我有以下内容：

```
BUILT_SOURCES = $(top_srcdir)/.version
$(top_srcdir)/.version:
    echo $(VERSION) > $@-t && mv $@-t $@

dist-hook:
    echo $(VERSION) > $(distdir)/.tarball-version 
```

每次运行配置脚本时，我都有一行调试 VERSION：

```
echo $PACKAGE $VERSION 
```

（如[git-version-gen 脚本](http://stuff.mit.edu/afs/athena/astaff/project/opssrc/cups/autoconf-2.65/build-aux/git-version-gen)中所述）但由于某种原因，每当我重新生成配置脚本并运行它时，它都会给我以下输出：

```
proj UNKNOWN-dirty 
```

我错过了什么？

我还尝试在 git 中添加包含脚本的 build-aux 文件夹，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:43:07.013

`git tag`显示什么？

如果不是，您可以尝试标记某些内容`git tag -a vX.X` 并尝试再次运行 git-version-gen

# c# - Web 服务包含一个空的服务标签

> ID：13417475
> 
> 赞同：0
> 
> 时间：2012-11-16T13:21:25.580
> 
> 标签：c#, .net, wcf, wsdl, wcf-configuration

我创建了一个 WCF 服务。

在 WSDL 中，我看不到服务应该绑定的 URL 和 PORT。

我所看到的是：

```
<wsdl:service name="SimpleWebService"/> 
```

知道我在做什么错吗？也许在 web.config 中的某些东西？

```
<system.serviceModel>
    <client />
    <bindings>
        <webHttpBinding>
            <binding closeTimeout="00:10:00" openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647">
                <readerQuotas maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" />
            </binding>
        </webHttpBinding>
    </bindings>
    <services>
        <service name="WS.OS.SimpleWS" behaviorConfiguration="myServiceBehavior">
            <endpoint name="webHttpBinding" address="" binding="webHttpBinding" contract="WS.OS.SimpleWS" behaviorConfiguration="webHttp" />
            <endpoint name="mexHttpBinding" address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="myServiceBehavior">
                <serviceMetadata httpGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="false" />
            </behavior>
        </serviceBehaviors>
        <endpointBehaviors>
            <behavior name="webHttp">
                <webHttp />
            </behavior>
        </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T02:07:22.460

使用 webHttpBinding 创建端点会创建一个 REST 端点。REST 端点没有 wsdl。在您的情况下，您会看到 wsdl 生成，因为您已包含元数据行为。您将在 WSDL 中列出一个仅用于 SOAP 端点的端点。这是一篇很好的博客文章，可以帮助您更好地理解这一点：http: [//blogs.msdn.com/b/carlosfigueira/archive/2012/03/26/mixing-add-service-reference-and-wcf-web- http-aka-rest-endpoint-does-not-work.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/03/26/mixing-add-service-reference-and-wcf-web-http-a-k-a-rest-endpoint-does-not-work.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:36:25.707

查看问题和配置，我假设（我们都知道这会导致）您的服务托管在 IIS 中。因此，给定“”的地址并且没有给出端口，您将不得不查看您的 IIS 设置以找到该服务打开的站点和端口。http 的默认值为 80，https 的默认值为 443。

如此简单的示例，如果您的服务位于 IIS 的“默认网站”上，那么您的服务*可能*位于：

```
http://YourServer/YourService/YourService.svc 
```

如果其中托管的 Web 应用程序位于特定不同的站点下，则需要查看 IIS 的设置才能找到它。让 IIS 将 SVC 托管为**默认**页面也很常见，因此您可以只有前两个部分，而不是 URI 中的实际页面。除非您开始深入研究您的网络服务器，否则我认为您不会有太多的运气。

# uiviewcontroller - 在 UIViewController 中重定位控件

> ID：13417476
> 
> 赞同：0
> 
> 时间：2012-11-16T13:21:28.723
> 
> 标签：uiviewcontroller, uilabel, frame, move

我在加载视图时尝试重新定位 UILabel 时遇到问题。如果我运行此代码，我可以移动标签

```
lTarget.frame = CGRectOffset(lTarget.frame, 0.0f, -75.0f); 
```

从例如一个按钮动作，它可以正常工作。但是，如果我希望在视图加载时调用它，我应该把这段代码放在哪里？我尝试了 viewDidLoad 和 viewWillAppear 但这不起作用。

我需要重新定位这个标签，因为我想要 3.5 英寸屏幕的不同布局。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:46:06.580

如果您使用启用了自动布局的 xib 或故事板，它将导致您的视图大小和位置在调用`viewWillAppear:`和之间重新计算`viewDidAppear:`。

您应该能够将代码移动到`viewDidAppear:`或关闭自动布局。

# android - 如何使用eclipse在android项目中添加java项目作为库

> ID：13417480
> 
> 赞同：2
> 
> 时间：2012-11-16T13:21:45.160
> 
> 标签：android

谁能告诉如何使用eclipse在android项目中添加java项目作为库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:26:26.503

如[文档中所述](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)，您可以进入项目属性（例如，Eclipse 主菜单中的 Project > Properties），进入属性对话框的 Android 部分，然后使用 Library 组框中的 Add... 按钮从工作区中的可用库中选择一个 Android 库项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:33:45.707

也许看看这里..

[在Android项目中导入源java项目](https://stackoverflow.com/questions/7736664/import-source-java-project-in-android-project)

或者您可以从项目中创建一个 jar 文件并将其作为外部 jar 导入，如此[处所述](https://stackoverflow.com/questions/2694392/importing-external-jar-file-to-android-project)

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:43:27.027

对于库项目：右键单击->属性->Android->*勾选是库*

对于需要导入的项目：右键->属性->Android->添加...->库项目

# xaml - 使用属性禁用 xamNumericEditor 的导航键

> ID：13417483
> 
> 赞同：1
> 
> 时间：2012-11-16T13:21:55.433
> 
> 标签：xaml, infragistics

是否有任何属性可以禁用使用 numericeditor 的任何属性递增/递减 xamNumericEditor 值的 UP/Down 键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:02:29.400

如果将[SpinIncrement](http://help.infragistics.com/NetAdvantage/WPF/Current/CLR4.0/?page=InfragisticsWPF4.Editors.v12.2~Infragistics.Windows.Editors.XamMaskedEditor~SpinIncrement.html)属性设置为 0，则向上/向下箭头键不会影响编辑器的值。

# jquery - jQuery，从输入中添加数据不起作用

> ID：13417490
> 
> 赞同：3
> 
> 时间：2012-11-16T13:22:13.083
> 
> 标签：jquery

我有这个 HTML 标记：

```
<div id="destination">

</div>

<input id="test" type="text" />

<button id="clicker">Click me</button>​ 
```

而这个 jQuery 片段

```
$(document).on('click', '#clicker', function(event){

    var newCat = $('#test').val();
    $(newCat).prepend("#destination");
       alert(newCat);
 });​ 
```

警报文本确实是字段中输入的文本，但文本并没有以 div 结尾`#destination`。

请参阅此 jsfiddle 示例：http: [//jsfiddle.net/FaAY4/](http://jsfiddle.net/FaAY4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:25:19.053

你必须这样做：

```
$(document).on('click', '#clicker', function(event){

    var newCat = $('#test').val();
    $("#destination").prepend(newCat );
       alert(newCat);
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T13:27:52.167

你使用`prepend()`不正确。语法是：

```
$(targetElement).prepend(newContent); 
```

在您的具体示例中像这样使用：

```
$("#destination").prepend(newCat); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T13:26:28.940

您为什么要尝试将元素添加到值中？

```
var newCat = $('#test').val(); 
```

上面的行将为您提供文本框的值。

```
$(newCat) 
```

不会对应任何元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T13:27:19.563

我认为您正在交换源和目标，即：

```
$(document).on('click', '#clicker', function(event){
    var newCat = $('#test').val();
    $('#destination').prepend(newCat);
       alert(newCat);
});​ 
```

[小提琴更新](http://jsfiddle.net/FaAY4/2/)

# android - 如何获取radiogroup中选中按钮的id？

> ID：13417495
> 
> 赞同：1
> 
> 时间：2012-11-16T13:22:30.650
> 
> 标签：android, nullpointerexception, radio-button, radio-group

我不知道为什么我得到一个`null pointer`-exception？这是它的起源：

`int rgid = radioGroup.getCheckedRadioButtonId();`

```
final Dialog dialog = new Dialog(MainSite.this);
dialog.setContentView(R.layout.upload_dialog);
dialog.setTitle("Upload - Einstellungen");
dialog.setCancelable(true);
//there are a lot of settings, for dialog, check them all out!

final EditText editname = (EditText) dialog.findViewById(R.id.filename);
editname.setText(filename);

//set up text
TextView tv_filesize = (TextView) dialog.findViewById(R.id.txt_filesize);
tv_filesize.setText("Dateigrösse: " + floata);             

RadioGroup radioGroup = (RadioGroup) findViewById(R.id.radioGroup1);

int rgid = radioGroup.getCheckedRadioButtonId();

if(rgid == R.id.radio_apps){
    dirpath = dirpath + "_Apps/";
}

if(rgid == R.id.radio_pictures){
    dirpath = dirpath + "_Bilder/";
}

if(rgid == R.id.radio_other){
    dirpath = dirpath + "_Sonstiges/";
}

//set up button
Button cmd_save = (Button) dialog.findViewById(R.id.cmd_save);
cmd_save.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        dialog.dismiss();
        final String[] file_save = {pathupload, editname.getText().toString(), dirpath};
        new UploadFile().execute(file_save);
    }

});

Button cmd_close = (Button) dialog.findViewById(R.id.cmd_close);
cmd_close.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        dialog.dismiss();
    }

});
//now that the dialog is set up, it's time to show it    
dialog.show(); 
```

上传对话框.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

<EditText
    android:id="@+id/filename"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="4dp"
    android:layout_marginLeft="4dp"
    android:layout_marginRight="4dp"
    android:layout_marginTop="16dp"
    android:hint="Dateiname"/>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="In folgenden Ordner hochladen:" />

<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/radio_apps"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="Apps" />

    <RadioButton
        android:id="@+id/radio_pictures"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Bilder" />

    <RadioButton
        android:id="@+id/radio_other"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Sonstiges" />
</RadioGroup>

<TextView
    android:id="@+id/txt_filesize"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
    android:id="@+id/cmd_save"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Datei hochladen" />

<Button
    android:id="@+id/cmd_close"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Schliessen" /> 
```

日志猫：

```
11-16 14:44:07.215: E/AndroidRuntime(23721): FATAL EXCEPTION: main
11-16 14:44:07.215: E/AndroidRuntime(23721): java.lang.NullPointerException
11-16 14:44:07.215: E/AndroidRuntime(23721):    at com.mseiz.give.your.apps.MainSite$5.onItemClick(MainSite.java:226)
11-16 14:44:07.215: E/AndroidRuntime(23721):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
11-16 14:44:07.215: E/AndroidRuntime(23721):    at android.widget.AbsListView.performItemClick(AbsListView.java:1280)
11-16 14:44:07.215: E/AndroidRuntime(23721):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:3067)
11-16 14:44:07.215: E/AndroidRuntime(23721):    at android.widget.AbsListView$1.run(AbsListView.java:3968)
11-16 14:44:07.215: E/AndroidRuntime(23721):    at android.os.Handler.handleCallback(Handler.java:615)
11-16 14:44:07.215: E/AndroidRuntime(23721):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-16 14:44:07.215: E/AndroidRuntime(23721):    at android.os.Looper.loop(Looper.java:137)
11-16 14:44:07.215: E/AndroidRuntime(23721):    at android.app.ActivityThread.main(ActivityThread.java:4898)
11-16 14:44:07.215: E/AndroidRuntime(23721):    at java.lang.reflect.Method.invokeNative(Native Method)
11-16 14:44:07.215: E/AndroidRuntime(23721):    at java.lang.reflect.Method.invoke(Method.java:511)
11-16 14:44:07.215: E/AndroidRuntime(23721):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
11-16 14:44:07.215: E/AndroidRuntime(23721):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
11-16 14:44:07.215: E/AndroidRuntime(23721):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:29:04.237

您收到 NullPointerException 因为变量 radioGroup 为空。

这可能是因为：

1.  setContentView() 设置的布局文件没有id: R.id.radioGroup1 的视图
2.  如果您正在动态创建视图层次结构，那么您不会将 radioGroup 视图添加到父 ViewGroup。

最好的祝福，

安奈

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:33:44.570

用你的代码为我工作

```
final Dialog dialog = new Dialog(this);
        dialog.setContentView(R.layout.activity_main);
        dialog.setTitle("Upload - Einstellungen");
        dialog.setCancelable(true);
        // there are a lot of settings, for dialog, check them all out!

        RadioGroup radioGroup = (RadioGroup)dialog.findViewById(R.id.radioGroup1); // set dialog.findViewById instead findViewById

        int rgid = radioGroup.getCheckedRadioButtonId();

        if (rgid == R.id.radio_apps) {
        }

        if (rgid == R.id.radio_pictures) {
        }

        if (rgid == R.id.radio_other) {
        }

        // set up button
        // now that the dialog is set up, it's time to show it
        dialog.show(); 
```

![在此处输入图像描述](../Images/7f2efde4c7771e566524ee87578764d1.png)

# ios - 当用户开始输入时清除 UITextField

> ID：13417496
> 
> 赞同：7
> 
> 时间：2012-11-16T13:22:36.860
> 
> 标签：ios, textfield, default

**简短版**：如何使 UITextField 框删除用户第一次按键时的所有内容？在用户开始输入内容之前，我不希望删除信息。即，在开始编辑时清除它还不够好。

**长版**：我有三个循环的 UITextField（使用返回键并在“shouldReturn”方法中捕捉到按下。UITextField 中已经有文本，如果用户没有输入任何内容而只是转到下一个 UITextField ，该值应保持不变（默认行为）。

但我希望如果用户开始输入，它会首先自动清除文本。像突出显示整个字段，然后键入任何内容会删除字段，然后添加用户按键。

“编辑开始时清除”并不好，因为文本会在出现在字段中的光标处立即清除。这是不希望的。我以为我可以在这里使用占位符，但这不能作为默认值，而且我找不到默认值属性。Highlighted 和 Selected 属性在这方面也不做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:31:33.943

有一个委托方法称为

```
textFieldDidBeginEditing:(UITextField*) tf{
  tf.startedEdinting = YES;
}

textFeildDidEndEditing: (UITextField*) tf {
  tf.startedEditing = NO;
} 
```

将类别中的 startEditing 添加到 UITextField。

然后，如果值更改清除该字段：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
 if (textField.startEditing){
  textField.text = string;
 } else {
  textField.text = [textField.text stringByReplacingCharactersInRange:range withString:string];
 }
} 
```

您可以通过以下方式将该属性添加到 UITextField 类别：

。H

```
@property (nonatomic, assign) BOOL startEditing; 
```

.m

```
@dynamic startEditing;

- (void) setStartEditing:(BOOL)startEditing_in{ 
NSNumber* num = [NSNumber numberWithBool:startEditing_in]; 
objc_setAssociatedObject(self, myConstant, num, OBJC_ASSOCIATION_RETAIN_NONATOMIC); 
} 
- (BOOL) startEditing{ 
NSNumber* num = objc_getAssociatedObject(self, myConstant); 
return [num boolValue]; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T13:36:27.403

在文件中声明一个`BOOL`变量，`.h`例如。

```
BOOL clearField; 
```

并实现委托方法，如：

```
-(void)textFieldDidBeginEditing:(UITextField *)textField
{
   clearField = YES;
}

-(void)textFieldDidEndEditing:(UITextField *)textField
{
  clearField = NO;
}

-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
  clearField = NO;
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
  if(clearField)
  {
     textField.text = @""
     clearField = NO;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T13:28:13.040

我要感谢人们的回答，我实现了这里描述的两种主要方法，并且都完美无缺。但我后来遇到了一个更简单、更好的答案，并且只涉及一行代码:)

在 textField 的 didBeginEditing 方法中，放置`[self.textField selectAll:self];`或`[self.textField selectAll:nil];`

我找到的原始答案有`selectAll:self`，但这显示了剪切/复制/粘贴菜单。如果您发送`nil`而不是`self`菜单不会出现。

添加这一行代码会在输入 textField 时突出显示文本（因此给用户一个视觉提示），并且只有在按下某个键后才会删除所有内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T14:38:00.500

实现相同目的的另一个解决方案是简单地使用定义为的文本字段[占位符：](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html#//apple_ref/doc/uid/TP40006888-CH3-SW14)

`The string that is displayed when there is no other text in the text field.`

因此，一旦用户开始输入，占位符文本就会消失。

这是您可以从情节提要或以[编程](https://stackoverflow.com/a/6529300/766570)方式设置的内容。（是的，我花了两个小时试图以更难的方式解决它。当解决方案实际上是代码的一行更改时）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-27T01:28:44.627

如果您想清除用户与之交互的文本，界面生成器中有一个选项，您可以在其中将文本字段设置为“编辑开始时清除”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T13:30:27.777

尝试使用以下方法。

```
- (BOOL) textField: (UITextField *)theTextField shouldChangeCharactersInRange: (NSRange)range replacementString: (NSString *)string {  
  if(isFirsttime==YES)
{
textfield.text==@"";
isFirsttime=NO;
}
return YES;
     } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-18T11:04:29.017

为你的 textField 的初始文本声明并初始化一个 NSString 变量

```
NSString *initialText=@"initial text"; 
```

然后实现方法：

```
 -(void)textFieldDidBeginEditing:(UITextField *)textField
 {
    if(textField.text isEqualToString:initialText)
         { 
           textField.text=@"";
        }
   }

-(void)textFieldDidEndEditing:(UITextField *)textField
{
    if(textField.text isEqualToString:@"")
    {
        textField.text=initialText;
    }
} 
```

# javascript - 自定义 jquery 或 javascript 从字符串扩展名中删除特殊字符

> ID：13417501
> 
> 赞同：2
> 
> 时间：2012-11-16T13:23:06.507
> 
> 标签：javascript, jquery

我希望能够做到这一点：

```
var test = "A3%2345-S63.][343\g30.1.0.45";
test.removeSpecialCharacters(); 
```

所有特殊字符，即 (%,*, (,[..etc) 将被删除)；

或者

```
test.removeSpecialCharacters("-"); 
```

表示所有特殊字符都将替换为“-”

我已经尝试过了，但我认为我做的不对:(

```
jQuery.fn.removeSpecialCharacters = function (optional replaceWith) {
    this.replace(/[^a-z0-9\s]/gi, '');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:25:59.363

绝对没有理由为此使用 jQuery。添加该函数`jQuery.fn`将使其成为可用于 jQuery 对象的方法。但是，您希望它用于字符串。它们是的实例，`String`因此您需要扩展`String.prototype`：

```
String.prototype.removeSpecialChars = function(replaceWith) {
    return this.replace(/[^a-z0-9\s]/gi, replaceWith || '');
} 
```

# android - 使用for循环android将数据加载到数组中

> ID：13417507
> 
> 赞同：0
> 
> 时间：2012-11-16T13:23:30.710
> 
> 标签：android, arrays, for-loop, image-caching

我正在尝试从 Post 类填充图像 url 数组，但该活动返回一个空白页面。我做得对吗？对不起，我学习android不太了解。

ArrayList PostDetails = new ArrayList();

```
 for (int index=0;index<imageUrls.length;index++){
        imageUrls[index]=PostDetails.get(index).getImag();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:25:47.540

您应该等到任务完成，您可以将最后一部分放在`onPostExecute`方法中。

```
protected void onPostExecute( ) {
    String[]imageUrls= new String[PostDetails.size()];

   for (int index=0;index<imageUrls.length;index++){
       imageUrls[index]=PostDetails.get(index).getImag();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:40:33.047

Nunu 的答案是正确的，但我想稍微扩展一下。假设是`loadingTask`，`AsyncTask`因此当您调用`execute`其中的代码时，`doInBackground`将异步执行。您创建和填充数组的代码将与您的填充并行执行`PostDetails`，我假设填充在`loadingTask`. 由于数组循环将执行得非常快，它会在执行网络操作之前​​很久就完成了`loadingTask`。`PostDetails`因此，您的页面是空白的，因为您在填充之前已经遍历了数组。

解决方案就像 Nunu 建议的那样，即将`imageUrls`数组的人口移动到`onPostExecute`您的`AsyncTask`. 此外，任何使用此数组的 UI 操作也应移至`onPostExecute`.

# latex - 允许抽象文档的实际几何图形的报告工具

> ID：13417511
> 
> 赞同：2
> 
> 时间：2012-11-16T13:23:44.947
> 
> 标签：latex, jasper-reports, report, typesetting

我们正在使用 Jasper Reports 从我们的应用程序中生成报告，基于 Oracle DBMS。

这件事工作得很好，但很可能我们要为同一个文档使用不同的纸张格式、语言和方向，或者添加列和其他元素，或者让元素的内容改变大小。

在 iReport/Jasper 中做到这一点并不容易 AFAIU。如果某些东西不起作用，您必须手动移动或调整元素的大小，检查它们的大小和位置是否合适。

当我还是学生的时候，我会使用 LaTeX 进行排版，它可以轻松处理“重塑”。不是有这样的吗？

我听说 BRIT 不遵循 Jasper 和 Pentaho 的“像素位置”范式，因此它努力在用户指定文档的抽象结构（即那里有哪些元素以及它们的元素）之后单独处理定位和可能的大小调整相对位置。

**编辑** 忘了提及：我们正在寻找一种涉及尽可能少代码的解决方案。原因是多方面的，但最重要的是：

*   首先：避免学习另一个库（我们设法远离 Jasper 并喜欢它）。

*   第二：提供一个即使不是程序员或核心人员也能管理的工具。进入门槛越低越好。例如，我认识人文学科的人可以体面地学习 LaTeX。他们甚至可以消化 iReport。我不知道有谁可以对现实世界的 Java 做同样的事情。

# java - 导出到 .jar 文件时“\n”不起作用

> ID：13417514
> 
> 赞同：4
> 
> 时间：2012-11-16T13:23:56.920
> 
> 标签：java, jar, filewriter, bufferedwriter

我有一个我编写的程序的输出文件。它由 FileWriter 和 BufferedWriter 编写。

```
 FileWriter errout = new FileWriter(new File("_ErrorList.txt"));
    BufferedWriter out = new BufferedWriter(errout); 
```

后来我使用类似于的行写入文件。

```
 out.write("Product id:" + idin + " did not fetch any pictures.\n "); 
```

当我在 Eclipse 中简单地运行程序时，输出文件的格式正确，每条消息都写在一个新行上。但是，当我导出到 .jar 文件时，它不再起作用，并且将每条消息放在一行上，就好像“\n”不起作用一样。

我是否错误地使用了 FileWriter/BufferedWriter，或者它在 .jar 文件中不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T13:32:59.050

你不应该直接使用'\n'。要么使用`out.newLine()`来引入换行符，要么将 包装`BufferedWriter`成`PrintWriter`，然后使用`out.println()`.

`.jar`无论如何，这与文件无关。Eclipse 更有可能是聪明的并向您显示换行符，而操作系统则没有。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T13:34:04.390

一、检查行分隔符是否有效。使用@Andrew Thompson 提供的 System.getProperty("line.separator") 。

如果您要编写大量新行，另一种选择是将 BufferedWriter 包装在 PrintWriter 中。

```
 FileWriter errout = new FileWriter(new File("_ErrorList.txt"));
  BufferedWriter out = new BufferedWriter(errout);

  PrintWriter printWriter = new PrintWriter(out);
  printWriter.println("Product id:" + idin + " did not fetch any pictures."); 
```

# c# - 为什么类的这是只读的？

> ID：13417515
> 
> 赞同：4
> 
> 时间：2012-11-16T13:24:17.197
> 
> 标签：c#, .net

我试图定义一个类。当我分配使用

```
this = blah blah 
```

编译器报告“这是只读的”

当我将类更改为 struct 时，它看起来不错，知道吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-16T13:28:21.993

`this`在 a 中`class`是指*参考*；**您不能**重新分配自己的参考，但您可以分配当前实例的字段等。

`this`in a`struct`指*的是值本身*；当您分配时`this`，就像您分配给任何值类型变量/参数时一样，它会复制顶部的所有*字段*（作为内存副本）。这*是*可能的，但坦率地说，在野外很少见。或者，与类一样，您可以分别分配每个字段。

# c++ - 对 RSTP 服务器进行编程以将 RTP 发送到第 3 方

> ID：13417519
> 
> 赞同：0
> 
> 时间：2012-11-16T13:24:32.270
> 
> 标签：c++, api, video, rtsp, rtp

我正在用 C++ 编写一个需要与 RTSP 服务器通信的服务器应用程序。

客户端将连接到我的服务器应用程序，我的应用程序将与 RTSP 服务器通信，告诉它“使用 H.264 编码将 RTP 流 X 从端口 A 发送到 IP 1.2.3.4 上的客户端端口 B”。

我开始寻找 RTSP 教程，但大多数示例只涉及客户端请求 rtsp://example.com/media.mp4 之类的 URI。我还查看了 RFC 2326，但发现它很难消化。

有人知道好的 RTSP 教程或书籍吗？也许一些解决类似问题的示例代码或实现 RTSP 的 C++ 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:51:59.067

除非你有一个我不知道的私有 API 来控制 RTSP 服务器，否则你不能做你所要求的。您可以做的是要求 RTSP 服务器向您的服务器发送指定的流并将其转发给客户端。要与 rtsp 服务器轻松通信，您可以使用 gstreamer：[http ://gstreamer.freedesktop.org/](http://gstreamer.freedesktop.org/)

# core-data - 不兼容的托管对象模型

> ID：13417522
> 
> 赞同：2
> 
> 时间：2012-11-16T13:24:45.170
> 
> 标签：core-data

我已经构建了该应用程序，其中包含一个具有一个实体的工作数据模型。managedObjectContext 与 arrayController 和 TableView 一起工作得很好。一个非常简单且常见的设置。

几乎还没有代码，我只是想玩一下coredata。

问题是，当我更改模型时，例如添加一个新实体，它不再兼容，最终在加载应用程序时显示两个错误。

以下是错误：

> 用于打开持久存储的托管对象模型版本与用于创建持久存储的版本不兼容。
> 
> 无法初始化商店

我想它会以某种方式尝试将最后一个模型加载到数组中，但我对此并不感兴趣。我想使用新的，并摆脱其他一切。

我到处搜索 stackoverflow 和谷歌，所以我清理了构建文件夹，清理了应用程序，但仍然无法正常工作。我的应用程序名称的库或库/应用程序中的那些文件夹不存在。

如何解决问题，并使应用程序使用新的 DataModel？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T10:55:26.320

您必须删除存储文件（实际的 sqlite 存储）。当您再次启动应用程序时，它将在您的 AppDelegate 中重新创建。

1.  如果您使用的是模拟器，您可以进入文档文件夹并自行删除。（*复杂。*）

2.  您可以在程序中设置一个标志，如果设置为 true，则删除存储。这是一个很好的测试设置，尤其是当您的数据集不是太大并且您不需要输入的数据在重新启动时保持不变时。（*推荐。*）

3.  您只需从设备/模拟器中删除应用程序。（*最简单的。*）

# c++ - 将仿函数存储在 stl 映射中并调用它们

> ID：13417523
> 
> 赞同：2
> 
> 时间：2012-11-16T13:24:46.793
> 
> 标签：c++, stl

我试图存储`functors`在 a`stl map`然后一个一个地调用它，但现在确定如何调用它。这是我到目前为止所尝试的。

```
#include <iostream>
#include <map>
#include <string>

class BaseFunctor {
public:
  BaseFunctor() {
  }
  ~BaseFunctor() {
  }
};

template <typename T>
class MyFunctor : public BaseFunctor {
   public:
     T operator()(T x) { 
       return x * 2;
     }
};

int main ( int argc, char**argv ) {
  std::map<std::string, BaseFunctor*> m_functorMap;

  m_functorMap.insert(std::make_pair("int", new MyFunctor<int>()));
  m_functorMap.insert(std::make_pair("double", new MyFunctor<double>()));
  m_functorMap.insert(std::make_pair("float", new MyFunctor<float>()));
  m_functorMap.insert(std::make_pair("long", new MyFunctor<long>()));

  for ( std::map<std::string, BaseFunctor*>::iterator itr = m_functorMap.begin(); itr != m_functorMap.end(); ++itr ) {
    std::cout << *(itr->second)() << std::endl;
  }

  return 0;
} 
```

我不能使用`boost`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T13:27:19.837

您有一张充满 的地图`BaseFunctor*`，但`BaseFunctor`由于没有 ，因此不可调用`operator()`。如果不强制转换为派生类型的指针，则不能调用，最好使用`dynamic_cast`. 总的来说，它看起来不是一个好的设计。您正在尝试使用它不能使用的运行时多态性。

# java - 强制 FreeMarker 始终打印带小数点的 BigDecimal 值

> ID：13417527
> 
> 赞同：3
> 
> 时间：2012-11-16T13:24:51.597
> 
> 标签：java, spring-mvc, freemarker, bigdecimal

在使用 FreeMarker 呈现视图的 Spring MVC 应用程序中，如何强制 FreeMarker 始终打印带小数点的 BigDecimal 值？

例如：

```
1000.12 -> 1000.12
1000    -> 1000.00 
```

我试过

```
${value?string("0.##")} 
```

这将 1000.12 正确打印为 1000.12，但 1000 仍打印为 1000 而不是 1000.00。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T13:58:02.263

你试过`${1000?string("0.00")}`吗？

如果您需要将数字四舍五入，请使用`((n * 100)?floor) / 100.0`表达式

# iphone - 硬件加速图像比较/搜索？

> ID：13417530
> 
> 赞同：1
> 
> 时间：2012-11-16T13:25:03.923
> 
> 标签：iphone, ios, image-processing, opengl-es

我需要在较大的图像中找到较小图像的位置。较小的图像是较大图像的子集。还要求像素值可能略有不同，例如，如果图像是通过不同的 JPEG 压缩生成的。我已经通过使用 CPU 比较字节来实现该解决方案，但我现在正在研究加速该过程的任何可能性。我可以以某种方式利用 OpenGLES 和 iPhone GPU 吗？

注意：图像是灰度的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T01:26:15.503

@Ivan，这是视频压缩中的一个非常标准的问题（在前一帧中查找当前宏块的位置）。您可以使用像素差异度量，例如绝对差异之和 (SAD)、平方差异之和 (SSD) 或 Hadamard 变换差异之和 (SATD)。我假设您不是在尝试压缩视频，而是在寻找诸如水印之类的东西。在许多情况下，您可以使用梯度下降类型搜索来找到局部最小值（最佳匹配），根据经验观察，将图像（您的小图像）与相同的稍微偏移版本（匹配的位置没有'未准确找到）产生比与另一幅图像的随机部分相比更接近的度量。因此，您可以先对所有可能的偏移/位置（视频编码中的运动矢量）的空间进行粗略采样，然后围绕最佳结果进行局部优化。局部优化通过将匹配与一定数量的相邻匹配进行比较，并移动到最好的那些，如果有的话比你当前的匹配更好，重复。这比蛮力（检查每个可能的位置）快得多，但它可能并非在所有情况下都有效（这取决于匹配的性质）。不幸的是，这种算法不能很好地转化为 GPU，因为每一步都依赖于前面的步骤。它可能仍然值得；如果您检查例如 256x256 图像位置的 16 个邻居，则足以发送到 GPU 的并行计算，是的，它绝对可以在 OpenGL-ES 中完成。然而，这一切的答案真的取决于你是在做暴力搜索还是局部最小化类型搜索，

# java - Android SDK 管理器中的 MIPS 系统映像是什么？

> ID：13417534
> 
> 赞同：55
> 
> 时间：2012-11-16T13:25:14.090
> 
> 标签：java, android, mips

对于每个 SDK，我都有一个安装`MIPS system image`.

它是什么？它有什么作用，什么时候有人使用它？如果我不安装会怎样？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-11-16T13:29:03.270

> 它是什么？

它是一个仿真器映像，用于仿真具有 MIPS CPU 而不是 ARM 或 x86 CPU 的设备。

> 它有什么作用，什么时候有人使用它？

如果您希望模拟具有 MIPS CPU 而不是 ARM 或 x86 CPU 的设备，您将使用它。

> 如果我不安装会怎样？

您将无法模拟具有 MIPS CPU 而不是 ARM 或 x86 CPU 的设备。MIPS 联盟可能会哭。但是，考虑到目前市场上很少有带有 MIPS CPU 的 Android 设备，没有 MIPS 仿真器可能就可以了。

有关 MIPS 架构的更多信息，请访问：http: [//www.mips.com/](http://www.mips.com/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-20T15:29:45.027

据我了解，您只需要 MIPS 和 x86 的系统映像来测试使用[*“本机开发工具包”（NDK）*](http://developer.android.com/tools/sdk/ndk/index.html)开发的本机代码。

如果您的 CPU 提供虚拟化支持（例如，Intel 的 VTx；AMD-V 仅适用于 Linux），x86 映像可以以更高的性能执行，请参阅官方文档中的*[此部分](http://developer.android.com/tools/devices/emulator.html#accel-vm)*。根据*[这个讨论](https://stackoverflow.com/a/9870025/1364368)*，如果他使用 CPU 的虚拟化支持，模拟器将向控制台写入*“HAX 正在工作并且模拟器以快速 virt 模式运行” 。*

但是，如果模拟器运行得太快，那么开发人员可能会忘记应用程序还必须在资源有限的移动设备上以足够的性能运行......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-18T04:10:39.733

奇怪的是，更新 MIPS 系统映像解决了我遇到的构建问题。更新除 MIPS 系统映像之外的所有组件后，我的所有项目都无法构建，并出现错误提示“R 无法解析为变量”。更新 MIPS 系统映像后，一切正常。

# directx-11 - 使用 DirectXMath 有效计算法线

> ID：13417541
> 
> 赞同：3
> 
> 时间：2012-11-16T13:25:32.057
> 
> 标签：directx-11, xna-math-library

我需要计算一些三角形的法线，其中我有一个顶点向量，其中每个顶点都有 x、y、z 坐标。i1, i2, i3 是三角形三个顶点向量中的索引。

我正在使用`<DirectXMath.h>`并编写了这个似乎有效的方法。

```
XMFLOAT3 normal;
///

XMVECTOR v1 = XMLoadFloat3(&XMFLOAT3(verts[i1].x, verts[i1].y, verts[i1].z));
XMVECTOR v2 = XMLoadFloat3(&XMFLOAT3(verts[i2].x, verts[i2].y, verts[i2].z));
XMVECTOR v3 = XMLoadFloat3(&XMFLOAT3(verts[i3].x, verts[i3].y, verts[i3].z));
XMVECTOR n  = XMVector3Cross(XMVectorSubtract(v2 ,v1), XMVectorSubtract(v3 ,v1));
XMStoreFloat3(&normal, n); 
```

然而，它似乎有比实际计算更多的加载和存储，并且想知道是否有更好的方法来实际执行此操作？还是加载和存储“廉价”操作？

我必须为每个三角形运行它，并且相对于我的其余代码需要大量时间，因此欢迎提高速度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T18:13:49.067

尝试`#define _XM_NO_INTRINSICS_`在`#include <DirectXMath.h>`. 这将禁用库中 SSE 的使用，允许编译器更自由地进行自己的优化。

# android - windows7如何安装Weinre

> ID：13417543
> 
> 赞同：2
> 
> 时间：2012-11-16T13:25:49.317
> 
> 标签：android, mobile, remote-debugging, mobile-browser, weinre

请帮助我使用 weinre 从我的机器上安装和调试我的移动 html。很多人告诉我 weinre 有多么有用，但我找不到如何安装它的方法，请帮助我如何安装 weinre 并使用它进行调试。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T17:24:53.307

如果还需要在本地使用 Weinre，这里是安装后的全局流程： [Weinre 没有找到任何目标](https://stackoverflow.com/questions/16761477/weinre-does-not-find-any-target)

更准确地说：[https ://stackoverflow.com/a/16761649/79445](https://stackoverflow.com/a/16761649/79445)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:02:25.677

当我尝试寻找答案时，我发现了一个有趣的链接[http://debug.phonegap.com/](http://debug.phonegap.com/)，您在该网站中安装了 weinre。

你需要做的是：

1.  打开链接[http://debug.phonegap.com/](http://debug.phonegap.com/)
2.  在那里的文本框中创建您的 guid。
3.  然后您会在下面看到为您的 guid 生成的脚本标记。
4.  将该脚本标签复制粘贴到您要测试的移动页面中
5.  在移动浏览器中打开要测试的页面
6.  然后来到[http://debug.phonegap.com/#yourguid.there](http://debug.phonegap.com/#yourguid.there)你会看到网络检查器
7.  调试一下，很简单。

# javascript - Chrome 调试器中“this”关键字的影响

> ID：13417544
> 
> 赞同：1
> 
> 时间：2012-11-16T13:25:50.213
> 
> 标签：javascript, google-chrome-devtools

我注意到 Google Chrome 调试器的行为完全不同，具体取决于 JS 对象的创建方式；

如果我创建一个这样的 js 对象；

```
var SonA = function(thename) {
               this.firstname = thename || "Graham";
               this.age = 31;
}

SonA.prototype = new Father(); 
```

然后 Chrome 的调试器不允许我深入查看原型。但是，它确实给了我实例变量名称和年龄的键值对。

但是，如果我省略`this`关键字，我可以深入到原型，但我不会在调试器中显示实例变量。

```
//SonB doesn't use this keyword    
var SonB = function(thename) {
                  firstname = thename || "Graham";
                  age = 31;
           } 

SonB.prototype = new Father(); 
```

```
console.log(new SonA()); //this logs as: SonA {firstname: "graham", age: 31}
console.log(new SonB()); //this logs as as drill down object that shows the prototype 
```

有谁知道这里发生了什么，为什么调试器的行为不同？下面的图片和 jsfiddle 可能会使问题更清晰易懂；

![截屏](../Images/3a055fc3ce2f7f6287b480ef53f1a556.png)

[http://jsfiddle.net/7z8sp/1/](http://jsfiddle.net/7z8sp/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:41:44.550

我看不出你想要达到什么目的。您可以*“深入”*到原型的唯一原因*是*构造函数没有设置任何属性，而是创建了*隐含的全局变量*。只需将此行添加到您的小提琴中：*`sonB`*

 **```
console.log(age);//<--logs 31 
```

它记录由`sonB`构造函数设置的值。如果你想获得原型属性，你要么：删除孩子的属性，要么使用该`Object.getPrototypeOf()`方法。

澄清一下：这不是调试器固有的，而是 JS 获取对象的值和属性的方式。考虑以下：

```
var emptyObject = {};
console.log(emptyObject.someProperty);//logs undefined
Object.prototype.someProperty = 'YaY';
console.log(emptyObject.someProperty);//logs YaY
emptyObject.someProperty = function()
{
    return Object.getPrototypeOf(this).someProperty;
};
console.log(typeof emptyObject.someProperty);//function
console.log(emptyObject.someProperty());//YaY again
delete(emptyObject.someProperty);//returns true
console.log(emptyObject.someProperty);//logs YaY. 
```

这是什么意思：简单地说，如果您尝试访问*任何*对象（数组、对象、函数、批次）上的属性，JS 将*首先*检查该特定实例是否定义了该属性，如果没有，则 JS 步骤在*原型链*中上升一个级别。如果该原型没有请求的属性，则 JS 跳到下一个原型，以此类推。如果没有找到财产，`undefined`将被退回。
因此，如果你的构造函数设置了某些属性，JS 就不会打扰原型并尽快返回属性。

同样的逻辑适用于*隐含的全局变量*。如果变量缺少`var`关键字，JS 会扫描*范围*（当前函数、“父”函数，最后是全局范围）以搜索该变量。如果找到，该变量将被使用或重新分配（取决于您在代码中使用它做什么）。如果没有找到变量，那么 JS 会为您创建一个。可悲的是，没有费心回到当前范围。结果：创建了一个全局变量。
在您的代码中，`Father`构造函数为每个实例创建一个新的函数对象。这个函数依赖于一个闭包变量 ( `sirname`) 和一个*全局*变量 ( `firstname`)。后者不是由`SonA`，因为该构造函数分配了一个新属性。但是，`SonB`确实会创建两者共享的全局变量。`SonA``SonB`

`getName`的成员函数`Father`正在处理的唯一原因`sonB`是因为该方法也依赖于*范围扫描*和隐含的全局：

```
new SonB();//<-- constructor sets age and firstname globals
SonB.getName();//<-- ~= Father.getName.apply(SonB,arguments);
     ||
     ---> gets firstname global that was set in SonB constructor, uses that value 
```

就这些了，只需将Father的getName方法重新定义为：

```
this.getName = function()
{//use this to point at calling context -> IE the instance on which the member function is being invoked
    return this.firstname + ' ' + surname;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:33:35.577

`Console.dir()`改为使用：http: [//jsfiddle.net/7z8sp/3/](http://jsfiddle.net/7z8sp/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T13:36:37.963

使用 24.0.1312.5（官方版本 166104）测试版，我得到了这个：

```
SonA
    age: 31
    firstname: "Graham"
    __proto__: Father
        getName: function () {
        __proto__: Object

SonB
    __proto__: Father
        getName: function () {
        __proto__: Object 
```

这是正确的，因为没有`this`你在全局对象上分配`age`and （在这种情况下）。在iframe的上下文中运行：`firstname``window``result`

```
> firstname
"Graham"
> age
31 
```**

# ruby-on-rails - 在 sidekiq 中调用 ImageWorker 时未初始化的常量

> ID：13417548
> 
> 赞同：1
> 
> 时间：2012-11-16T13:26:10.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sidekiq

在我的`Banner`模型中，我称之为：

```
after_save :enqueue_image   

  def enqueue_image
    ImageWorker.perform_async(id, key) if key.present?
  end

class ImageWorker
  include Sidekiq::Worker

  def perform(id, key)
    banner = Banner.find(id)
    banner.key = key
    banner.remote_image_url = banner.image.direct_fog_url(with_path: true)
    banner.save!
  end
end 
```

我遇到的错误`sidekiq`是这样的：

```
2012-11-16T12:30:35Z 75701 TID-ows7fyu3w WARN: {"retry"=>true, "queue"=>"default", "class"=>"Banner::ImageWorker", "args"=>[6, "uploads/af-64b9e8b8c96a/770x350.gif"], "jid"=>"b8f23a2387f2b751"}
2012-11-16T12:30:35Z 75701 TID-ows7fyu3w WARN: uninitialized constant Banner::ImageWorker
2012-11-16T12:30:35Z 75701 TID-ows7fyu3w WARN: /.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:230:in `block in constantize'
/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `each'
/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `constantize'
/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.8/lib/active_support/core_ext/string/inflections.rb:54:in `constantize'
/.rvm/gems/ruby-1.9.3-p194@myapp/gems/sidekiq-2.5.3/lib/sidekiq/processor.rb:37:in `block in process'
/.rvm/gems/ruby-1.9.3-p194@myapp/gems/celluloid-0.12.3/lib/celluloid/calls.rb:57:in `call'
/.rvm/gems/ruby-1.9.3-p194@myapp/gems/celluloid-0.12.3/lib/celluloid/calls.rb:57:in `dispatch'
/.rvm/gems/ruby-1.9.3-p194@myapp/gems/celluloid-0.12.3/lib/celluloid/future.rb:18:in `block in initialize'
/.rvm/gems/ruby-1.9.3-p194@myapp/gems/celluloid-0.12.3/lib/celluloid/internal_pool.rb:48:in `call'
/.rvm/gems/ruby-1.9.3-p194@myapp/gems/celluloid-0.12.3/lib/celluloid/internal_pool.rb:48:in `block in create' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-02T19:31:58.347

我知道这是一个老问题，但是因为我遇到了类似的问题而偶然发现了它。

摆弄我[在 github 上发现了这个问题，](https://github.com/mperham/sidekiq/issues/1043)这让我明白我做错了，并且让我的工作人员在 lib 文件夹中。

将其移至工作文件夹解决了该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:52:21.047

当几个 sidekiq 进程正在运行时，我遇到了这个问题。

# python - 在执行 python 函数时更新 GUI，同时保持此函数与 GUI 无关

> ID：13417553
> 
> 赞同：1
> 
> 时间：2012-11-16T13:26:22.570
> 
> 标签：python, user-interface, wxpython, auto-update

我有一个 python 函数，它接受一些参数并执行一些任务（我们称之为 theFunc）。当 theFunc 运行时，内部变量 resultsMessage 越来越多，我在执行结束时在 GUI 上显示它。理想情况下，我希望在执行 theFunc 时在 GUI 上显示和更新结果消息，而不是在它完成之后，并且在不污染 theFunc 的情况下执行它（它已经足够复杂了）。最好的方法是什么？

我能想到的两种可能的方法（两者都很牵强）：

1.  有两个线程：一个执行 theFunc 并将结果消息写入变量/文件，另一个检查此变量/文件并更新 GUI；
2.  不是将行附加到结果消息，而是将一些“流”附加到 GUI 元素；向“流”添加行将更新 GUI。

我想应该有一种传统的方法来做到这一点。

环境：CPython 2.7、Win XP、WXPython

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:22:32.550

你会想要使用线程。wxPython 提供了几个线程安全的方法，例如 wx.CallAfter、wx.CallLater 和 wx.PostEvent。您也可以将它们与 pubsub 结合起来发送消息！在您的情况下，我认为将 wx 方法与您希望显示的任何文本一起传递给 wx.CallAfter 都可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T00:54:33.387

Mike Driscoll 的回答描述了可能是最常用的方法。他在他的网站上有一篇非常好的文章，[这里](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)有更详细的介绍。他实际上有很多非常好的文章在那里，看看他们。

另一种方法是在主线程中设置一个计时器，用于检查队列中的消息。**您在init**方法中设置队列并将其传递给运行长时间运行函数的工作线程。工作人员根据需要将内容放入队列中，与计时器事件相关的函数在主线程中选择消息/数据并更新 GUI 等。这是一个简短的示例：

```
#first 4 lines are the bottom of the __init__ method of the main frame
    self.timer = wx.Timer(self)
    self.timer.Start(250)
    self.Bind(wx.EVT_TIMER, self.onTimer, self.timer)
    self.Bind(wx.EVT_CLOSE, self.onClose)

def onTimer(self, event):
    '''checks for messages in self.q2 (Queue.Queue set up above)'''
    while not self.q2.empty():
        msg, data = self.q2.get()
        self.update(None, msg, data)

def update(self, event, msg, data):
    '''Runs with data returned in self.q2'''
    self.sb.SetStatusText(msg)
    etc, etc . . . 
```

祝你好运，迈克

# c# - Linq中的Union vs Concat

> ID：13417556
> 
> 赞同：95
> 
> 时间：2012-11-16T13:26:26.623
> 
> 标签：c#, linq

我有一个关于`Union`和的问题`Concat`。

```
var a1 = (new[] { 1, 2 }).Union(new[] { 1, 2 });             // O/P : 1 2
var a2 = (new[] { 1, 2 }).Concat(new[] { 1, 2 });            // O/P : 1 2 1 2

var a3 = (new[] { "1", "2" }).Union(new[] { "1", "2" });     // O/P : "1" "2"
var a4 = (new[] { "1", "2" }).Concat(new[] { "1", "2" });    // O/P : "1" "2" "1" "2" 
```

上述结果是预期的，但在`List<T>`我从`Union`和得到相同结果的情况下`Concat`。

```
class X
{
    public int ID { get; set; }
}

class X1 : X
{
    public int ID1 { get; set; }
}

class X2 : X
{
    public int ID2 { get; set; }
}

var lstX1 = new List<X1> { new X1 { ID = 10, ID1 = 10 }, new X1 { ID = 10, ID1 = 10 } };
var lstX2 = new List<X2> { new X2 { ID = 10, ID2 = 10 }, new X2 { ID = 10, ID2 = 10 } };

var a5 = lstX1.Cast<X>().Union(lstX2.Cast<X>());     // O/P : a5.Count() = 4
var a6 = lstX1.Cast<X>().Concat(lstX2.Cast<X>());    // O/P : a6.Count() = 4 
```

但两者在`List<T>`.

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-11-16T13:29:04.487

联合返回`Distinct`值。默认情况下，它将比较项目的引用。您的项目有不同的参考，因此它们都被认为是不同的。当您转换为基本类型`X`时，引用不会更改。

如果您将覆盖`Equals`and `GetHashCode`（用于选择不同的项目），则项目将不会通过引用进行比较：

```
class X
{
    public int ID { get; set; }

    public override bool Equals(object obj)
    {
        X x = obj as X;
        if (x == null)
            return false;
        return x.ID == ID;
    }

    public override int GetHashCode()
    {
        return ID.GetHashCode();
    }
} 
```

但是你所有的物品都有不同的价值`ID`。所以所有的项目仍然被认为是不同的。如果您将提供几个相同的项目，那么您将看到和之间的`ID`区别：`Union``Concat`

```
var lstX1 = new List<X1> { new X1 { ID = 1, ID1 = 10 }, 
                           new X1 { ID = 10, ID1 = 100 } };
var lstX2 = new List<X2> { new X2 { ID = 1, ID2 = 20 }, // ID changed here
                           new X2 { ID = 20, ID2 = 200 } };

var a5 = lstX1.Cast<X>().Union(lstX2.Cast<X>());  // 3 distinct items
var a6 = lstX1.Cast<X>().Concat(lstX2.Cast<X>()); // 4 
```

您的初始示例有效，因为整数是值类型，并且它们按值进行比较。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-11-16T13:29:53.323

`Concat`从字面上返回第一个序列中的项目，然后是第二个序列中的项目。如果您`Concat`在两个 2 项序列上使用，您将始终得到一个 4 项序列。

`Union`本质上`Concat`是`Distinct`.

在前两种情况下，您最终会得到 2 项序列，因为在它们之间，每对输入序列恰好有两个不同的项。

在您的第三种情况下，您最终得到一个 4 项序列，因为*您的两个输入序列中的所有四个项都是 distinct*。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-11-16T13:32:03.263

`Union`并且`Concat`行为相同，因为`Union`没有自定义就无法检测到重复项`IEqualityComparer<X>`。只是看两者是否相同。

```
public class XComparer: IEqualityComparer<X>
{
    public bool Equals(X x1, X x2)
    {
        if (object.ReferenceEquals(x1, x2))
            return true;
        if (x1 == null || x2 == null)
            return false;
        return x1.ID.Equals(x2.ID);
    }

    public int GetHashCode(X x)
    {
        return x.ID.GetHashCode();
    }
} 
```

现在您可以在以下重载中使用它`Union`：

```
var comparer = new XComparer();
a5 = lstX1.Cast<X>().Union(lstX2.Cast<X>(), new XComparer()); 
```

# html - 为多个嵌套元素设置相同的样式

> ID：13417561
> 
> 赞同：2
> 
> 时间：2012-11-16T13:26:35.737
> 
> 标签：html, css

好的，我有以下 CSS：

```
.gridViewStyle tr th, .gridViewStyle tr td {
    padding: 5px;
} 
```

它按预期工作并将填充应用于`th`和`td`元素。**但是，我真的必须多次声明完全限定的路径吗？**或者换句话说，**有没有更简洁的方法来做同样的事情？**

## 更新

**特异性**

关于特异性，我不能将其应用于其他表格，它必须严格应用于具有此 CSS 类的网格视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:28:35.360

根据具体情况，您不需要比`th {`or更多的东西`td {`。

这仅取决于您是否有另一张桌子。`th, td {`如果你不这样做，那将是最短的方法。如果你这样做了，那就`tr`什么都不做（因为所有都`th`应该`td`在一行内，所以删除它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:32:10.887

你不需要`tr`. 由于`td`和`th`元素都属于`tr`，因此它是冗余的，因为空间选择了所有后代（不仅仅是孩子）。所以，

```
.gridViewStyle th, .gridViewStyle td { 
```

会工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T13:32:30.807

或者，您也可以这样做，也将尊重您的特殊性，这是您实现它的最短方法

```
.gridViewStyle th, .gridViewStyle td {
    padding: 5px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T13:33:30.510

不，不是仅在 CSS 中。

仍然有 CSS 预处理器 LESS 或 SASS 可以让你这样做：

```
.gridViewStyle tr 
{
    th, td { padding: 5px; }

} 
```

如果你有兴趣，这里有几个链接

[http://lesscss.org/](http://lesscss.org/)

[http://sass-lang.com/](http://sass-lang.com/)

# c# - 在 XML 或 SQL CE 中记录和存储值？

> ID：13417563
> 
> 赞同：1
> 
> 时间：2012-11-16T13:26:37.770
> 
> 标签：c#

我有一个 C# 应用程序，它正在从 PLC 设备写入状态信息，程序接受存储在 XML 文件中的参数，并使用配置编辑器来编辑这些参数，程序使用配置文件检查 PLC 的内存地址以告诉程序地址名称和数据类型等如果值从以前的值发生变化，那么我们将状态以及配置中的字段写入 Log.XML，经过测试，这似乎不是最好的方法，因为文件越来越大并且使用大量 cpu 打开日志以检查现有值，然后在更改时记录新值。问题是存储配置数据和日志数据的最佳方法是什么，日志数据被写入非常频繁，我想知道 SQL CE 是否具有更好的性能，如果是这样，我是否也应该在 SQL 中存储配置数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:29:53.890

为什么没有缓冲区，写出来（这将比磁盘快得多）。当缓冲区达到预定大小时，将其写入磁盘并清空所述缓冲区。

我们有一个混合日志系统。如果客户将其设置为登录，它会写入磁盘/文件。但是，您可以保持文件流打开并写入。流将处理将其刷新到磁盘上的具体文件。不要为每一行跟踪打开日志文件。如果日志记录关闭，我们还有一个回退，这会写入缓冲区，并且只有在发生意外情况时才会将缓冲区写入磁盘。它是一个保持最新跟踪线的循环缓冲区。

# java - 如何复制 AbstractMap

> ID：13417564
> 
> 赞同：-2
> 
> 时间：2012-11-16T13:26:40.593
> 
> 标签：java

在我的应用程序中，我需要一个 AbstractMap 的克隆。我想用所有的值和键复制它。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:27:42.430

接口的实现`Map`具有接受另一个的构造函数`Map`。这样您就可以将原始地图复制到另一个地图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T13:29:41.483

您不能将 clone() 用于 AbstractMap，除非它已被覆盖，因为它已被用于许多内置集合。

复制地图通常更容易。

```
Map<K,V> map2 = new XxxxMap<K,V>(map); 
```

# assembly - MIPS：将简单数组编码为机器码

> ID：13417566
> 
> 赞同：0
> 
> 时间：2012-11-16T13:26:42.370
> 
> 标签：assembly, mips

我正在使用可以处理 MIPS 代码的 Xilinx 的 32 位单周期数据路径模拟器。我需要手动将数组值存储在内存中。假设我有一个包含值 1,2 和 3 的数组。如何通过将其编码为 32 位指令将其存储在内存中，以便稍后使用“lw”指令加载？

# android - 如何将商家订单号转换为 Google 订单号？

> ID：13417568
> 
> 赞同：2
> 
> 时间：2012-11-16T13:26:50.483
> 
> 标签：android, in-app-purchase, android-pay

我的公司有一个集成了应用内计费的 Android 应用程序。当客户购买订单时，应用程序会收到订单 ID。之后，应用程序将此数据发送到服务器，服务器通过 Notification History API 检查此订单 ID 是否存在。

在 11 月 9 日之前，此订单 ID 始终是一种称为 Google 订单号的格式（例如 56260349814XXXX）。11 月 9 日之后，我们开始以一种称为商户订单号的格式接收订单 ID（例如 1299976316905470XXXX.137189007792XXXX）。

我们的服务器如何通过商户订单号检查订单？或者，我们如何将商家订单号转换为 Google 订单号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T04:09:03.490

听起来您有一个“混合”帐户 - 一个同时处理“旧版”和较新 Wallet API 的帐户？

AFAIK`Notification History API`仍然是“遗留”的 Google Checkout API - 即使它*确实*适用于较新的 API。因此，例如，如果您`notification-history-request`按时间段进行操作，您*将*获得“所有”订单（至少在我的“混合”沙盒帐户中对我来说是这样）：

*   “旧版”Google Checkout 订单只有`google-order-number`
*   较新的 API（例如 Wallet for Digital）同时`google-order-number` **具有** `merchant-order-number`

    ```
    <google-order-number>542579893702676</google-order-number>
    <merchant-order-number>GWDG_S.D.2063320223607852</merchant-order-number> 
    ```

虽然您确实获得了`merchant-order-number`您正在使用的 API，但我不相信您可以将其“绑定”到`google-order-number`通过查询它的目的`Notification History API`（除非它是“一般”查询 - 例如时间段，~~或者可能**在**您之后接收`new-order-notification`包含两者~~- 哎呀，实际上不认为你得到这个，因为这又是一个“旧版”Google Checkout API - re：Notification API）。

嗯……

# c++ - 进行特殊组合 (C++)

> ID：13417570
> 
> 赞同：1
> 
> 时间：2012-11-16T13:27:11.603
> 
> 标签：c++, arrays, loops, set

我需要一些关于 C++ 问题的帮助。用户输入他想输入的数字，然后输入所有数字和一个特殊值。程序必须找到并写入总和等于特殊值的所有数字组合。例子：

### 输入

```
12
1 5 7 3 10 8 9 2 4 6 11 13
15

```

**输出**：

```
4 11
2 13
9 6
9 2 4
3 2 4 6
3 8 4
3 10 2
7 2 6
7 8
5 4 6
5 8 2
5 10
5 7 3
1 8 6
1 8 2 4
1 10 4
1 3 11
1 3 9 2
1 7 3 4
1 5 9
1 5 3 6
1 5 3 2 4
1 5 7 2
```

### 代码

这是编写包含 2 个元素的所有组合的代码：

```
#include <iostream> 
using namespace std;

int main(int argc, const char * argv[])
{
    int size;
    cout << "Enter size: ";
    cin >> size;
    int *numbers = new int[size];
    cout << "Enter numbers: ";
    for (int i = 0; i < size; i++)
        cin >> numbers[i];
    int target;
    cout << "Enter target: ";
    cin >> target;
    int sum = 0;
    for (int i = 0; i < size-1; i++)
    {
        for (int j = i+1; j < size; j++)
        {
            sum = numbers[i];
            sum += numbers[j];
            if (sum == target)
                cout << numbers[i] << " " << numbers[j] << "\n";
        }
    }
    return 0;
} 
```

如果我用这个替换那个 for 循环，程序将编写包含 3 个元素的所有组合：

```
for (int i = 0; i < size-2; i++)
{
   for (int j = i+1; j < size-1; j++)
   {
      for (int k = j+1; k < size; k++)
      {
         sum = numbers[i] + numbers[j];
         sum += numbers[k];
         if (sum == target)
         cout << numbers[i] << " " << numbers[j] << " " << numbers[k] << "\n";
       }
    }
} 
```

这是我的问题：如何制作一个编写所有可能组合的程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:16:44.803

1.  从您的列表中取出第一个数字（例如，1）。
2.  从您的列表中删除此号码，并将其从您的“目的地”总数中扣除。
3.  现在您有了一个新列表和一个新的目的地总数。重复。
4.  如果您的总数超过您的目的地，请跳过当前号码（即，保留列表中的号码，不要更新目的地）并移至下一个。
5.  如果列表中的剩余项目都不能让您到达目的地，请弹出您添加到目的地总数的最后一个数字，并使用列表中的下一个数字更新它。
6.  如果您达到您的目标总数，您将拥有原始列表中的一部分数字（大小介于 1 和列表中的元素数量之间），这些数字加起来就是您的预期总数。

# c++ - dynamic_cast 的 C++ 安全替代方案

> ID：13417572
> 
> 赞同：2
> 
> 时间：2012-11-16T13:27:13.540
> 
> 标签：c++, casting

在什么情况下可以`reinterpret_cast`使用从实际上是派生实例指针的基指针进行转换？（通过多态性）。

如果继承是多态的，则静态强制转换不起作用。

我考虑了这个微不足道的场景：

```
class A
{
public:
    virtual void Hello()
    {
        cout<<" A ";
    }
    virtual int GetType() { return 1; }
};

class B: public A
{
public:
    void Hello()
    {
        cout<< " B ";
    }
    void Do()
    {
        cout << " Another method of B";
    }
    int GetType() { return 2;}
};

/// ... sample/test code
A* a1 = new A();
A* b1 = new B();
A* a2;
B* b2;

if (a1->GetType() == 1)
{
    a2 = a1;
    a2->Hello();
}
else
if (a1->GetType() == 2)
{
    b2 = reinterpret_cast<B*>(a1);
    b2->Do();
    b2->Hello();
} 
```

请注意非常幼稚的“伪类型识别方法” `GetType()`，我曾经决定是否可以转换它们。出于这种目的，使用 reinterpret_casts 是否完全错误，以避免 dynamic_casts？（即它是一种偏执的设计，本质上是危险的并且不太灵活会引入不必要的麻烦？执行正常的动态转换是否更安全且值得付出较小的性能成本？我知道多重继承和/或虚拟继承会弄乱任何其他转换操作，除了多态/动态的）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T13:33:03.527

你不能`reinterpret_cast`用来安全地向下投射。但是你可以使用

*   `static_cast`，当您知道对象的动态类型是（可能派生自）您向下转换的对象时，并且

*   `dynamic_cast`，引用或指针，如果静态已知的类是多态的。

在另一个方向上，对于*向上转换*，您可以（但不应该）使用 C 样式转换来转换到无法访问的基础。它在标准中得到特别支持。不过，我从来没有找到使用它的机会。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T13:31:39.000

只回答你的第一句话：从不。

将基指针静态*转换*为更多派生指针的唯一有效方法是使用 a `static_cast`，并且仅在基指针是非虚拟的情况下才有效：

```
Base * b = &derived;                       // implicit Derived * => Base *

Derived * p = static_cast<Derived *>(b);   // OK, I know what *b really is 
```

静态转换应被视为与隐式转换相反。

A`reinterpret_cast`是完全错误的。（通常可以接受的唯一重新解释转换是用于 I/O 的 char 指针。）

（当您有一个指向*虚拟*基的指针时，您别无选择，只能使用 a `dynamic_cast`，但这当然是因为在这种情况下，基子对象仅在运行时确定。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T13:32:22.093

您应该尽可能避免使用 reinterpret_cast，使用 reinterpret_cast 的主要原因是当您处理用 C 编写的遗留代码时，否则应该首选 static_cast 和 dynamic_cast，如果您的设计需要使用 reinterpret_cast，您可能希望将此作为提示你的设计可能不是最优的。

static_cast 可以用于多态类型，只要您确定它们总是会成功，否则您应该使用 dynamic_cast。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T13:30:08.760

`dynamic_cast`为什么在这种情况下避免 a ？通过在进行强制转换之前必须调用虚拟成员函数，您可能会比使用`dynamic_cast`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T13:46:56.440

在不是 B 的东西上调用 B 方法函数是危险的。该问题的标题为“安全”替代方案，您的代码不安全。

大多数时候，使用 dynamic_cast 是不好的，并且是设计不佳的标志。

在某些情况下它很有用，尤其是在使用版本化插件时。您加载一个插件并获得一个可能支持或不支持新功能的对象，并且您可以动态地将您知道它支持的接口（基类）转换为更高版本（从它派生）。如果有效，您可以使用新功能，如果无效，您必须禁用此功能或使用旧的做事方式。

有时你可以使用双重调度来做这种事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-01T21:16:57.540

我知道的唯一“安全”替代 dynamic_cast 是使用[Visitor Pattern](https://en.wikipedia.org/wiki/Visitor_pattern)。示例（[编译器资源管理器](https://godbolt.org/z/wAhwRI)）：

```
class A;
class B;

class TypeVisitor {
 public:
    virtual void VisitA(A&) = 0;
    virtual void VisitB(B&) = 0;
    virtual ~TypeVisitor() = default;
};

class A
{
public:
    virtual void Hello()
    {
        cout<<" A\n";
    }

    virtual int GetType() { return 1; }

    virtual void Accept(TypeVisitor& visitor) {
        visitor.VisitA(*this);
    }
};

class B: public A
{
public:
    void Hello() override
    {
        cout<< " B\n";
    }

    void Do()
    {
        cout << " Another method of B\n";
    }

    int GetType() override { return 2; }

    void Accept(TypeVisitor& visitor) override {
        visitor.VisitB(*this);
    }
};

class PrintHelloVisitor : public TypeVisitor {
 public:
    virtual void VisitA(A& a) override {
        a.Hello();
    }

    virtual void VisitB(B& b)  override {
        b.Hello();
        b.Do(); // calling also the method that is not virtual
    }

    virtual ~PrintHelloVisitor() = default;
};

int main() {
    PrintHelloVisitor print_visitor;

    unique_ptr<A> a1 = make_unique<A>();
    a1->Accept(print_visitor);

    unique_ptr<A> b1 = make_unique<B>();
    b1->Accept(print_visitor);

    unique_ptr<B> b2 = make_unique<B>();
    b2->Accept(print_visitor);
} 
```

印刷：

```
 A
 B
 Another method of B
 B
 Another method of B 
```

# css - Wordpress 中的按钮悬停效果

> ID：13417573
> 
> 赞同：0
> 
> 时间：2012-11-16T13:27:15.413
> 
> 标签：css, wordpress

我对 CSS 和网络编程很陌生。我想要做的是为按钮添加悬停效果。我通过使用 2 张图片来做到这一点。

有一个名为下载的按钮，我在悬停代码中添加：

```
.button:hover{
    background-image:url(images/button2.png);

} 
```

问题是按钮需要时间来加载，即：悬停时显示按钮会有延迟。我该如何解决这个问题？

编辑：我尝试使用预加载，但也有一种延迟

```
div#preloadedImages
{
    width: 0px;
    height: 0px;
        background-image: url(images/button2.png);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:31:48.333

你需要在精灵中工作。所以只有一张图片正在加载，然后它会切换背景图片的位置，这样你就不会得到那种延迟。

看看这个[http://www.w3schools.com/css/css_image_sprites.asp](http://www.w3schools.com/css/css_image_sprites.asp)会比我解释得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:31:27.180

如果图像加载需要时间并闪烁，则需要使用**精灵**来避免该问题。

sprites的原理是你只有一个图像（原始图像和悬停图像在同一个），你移动光标显示悬停图像。

# graph - JUNG循环树布局

> ID：13417587
> 
> 赞同：2
> 
> 时间：2012-11-16T13:27:50.107
> 
> 标签：graph, visualization, neo4j, jung, cyclic-graph

我想使用树形布局在 JUNG 中可视化一个图形（不是树）。我知道这可能看起来有点奇怪，但事情如下。该应用程序由 Neo4J 数据库支持。它们中有一堆节点，所有节点都通过几种类型的关系连接起来。换句话说，我有一个循环图。

如果我想象性地删除除了关系类型为 *IS_PARENT* 的关系之外的所有关系，我剩下的就是一棵完美的树。所以我的数据中有一个树形结构，JUNG 看不到它，因为其他关系使它循环。

我想这样做有两个主要原因。

1.  可读性。我的数据中有一个逻辑结构，我非常想将其可视化。
2.  我有理由相信这会提高我的应用程序的性能。由于大量的顶点和边，目前性能很差。我还研究了另一个名为 Prefuse 的可视化工具，在那里我发现树布局更容易处理，至少 Prefuse 是这样，我希望 JUNG 也是如此。

所以这对我来说有很多好处。我希望这里有人可以帮助我，因为我找不到东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:32:47.903

我找到了解决方案。我反编译了 TreeLayout 类，并简单地改变了它计算孩子数量的方式，现在它就像一个魅力。只有在使用谓词时，它才会记住旧位置，而不是新位置......

# c# - 如何在Windows 8 Metro中基于动态宽度将图像放在分组项目页面中标题旁边的左侧？

> ID：13417593
> 
> 赞同：1
> 
> 时间：2012-11-16T13:28:10.650
> 
> 标签：c#, xaml, dynamic, windows-8, windows-store-apps

我目前正在使用 XAML 和 C# 开发 Windows 8 应用程序。我开发了动态生成数据组的分组项目页面。我有一个社交媒体图标列表，我需要将它们放在每个组标题旁边，但根据组宽度在右侧对齐，因为每个组都有一定数量的项目，所以它的宽度会改变，所以我无法修复一个我需要动态拍摄的所有组。那么有什么想法吗？如果有人可以为我提供非常有用的代码。谢谢！

# silverlight-5.0 - Silverlight ListboxDragDropTarget：水平滚动条行为不正常

> ID：13417595
> 
> 赞同：1
> 
> 时间：2012-11-16T13:28:24.847
> 
> 标签：silverlight-5.0

在我的 silverlight 5 应用程序中，我在 ListboxDragDropTarget 控件中使用了一个列表框。我的列表框包含 100 多个项目。每当我尝试将项目向左拖动时，当水平滚动条向右滚动时，它会立即将滚动一直重置到左侧它也不会自动移动滚动条，因为我将项目移动到右或左。有什么解决办法吗？提前致谢

# android - android runnable没有被取消

> ID：13417596
> 
> 赞同：0
> 
> 时间：2012-11-16T13:28:28.420
> 
> 标签：android, handler, runnable, dispatchevent

我有一个应用程序，可以绘制当前用户位置与另一个活动的邮政编码位置之间的路线。除了一个功能外，这一切都很好。我已经通过处理程序/可运行机制实现了一个计时器。如果在预定时间（例如 2 分钟）内没有触摸显示屏，那么我将返回到用户必须再次登录的菜单屏幕。这是我的应用程序的安全功能。

我已经重写了 dispatchTouchEvent 方法，这样当用户触摸屏幕时，计时器就会被重置。这部分工作不正常。无论用户是否触摸屏幕，应用程序都会进入菜单屏幕。

我认为如果我将处理程序和 runnable 设置为 null 并在再次启动计时器之前删除所有回调到 runnable 将起作用。

谁能告诉我如何取消当前的可运行文件并重新启动它。

这是完整的代码，在此先感谢。马特。

```
public class GetClientDirections extends MapActivity implements LocationListener{

    private MapController mapController;
    private MapView mapView;

    private List<Overlay> mapOverlays;
    private StringBuffer response = null;
    private static final String TAG = GetClientDirections.class.getSimpleName();
    private double lon;
    private double lat;
    private JSONArray routes = null;
    private JSONObject bounds = null;
    private JSONObject northeast = null;
    private JSONObject anonObject;
    private JSONObject overViewPolyline;
    private String stringUrl;
    private String polyPoints;
    Context context;
    private String endAddr;
    private GeoPoint startAddr;
    BroadcastReceiver locationChangereceiver;
    double lati;
    double lngi;
    boolean isTrafficOn;
    SharedPreferences  appSharedPrefs;
    Handler handler;
    Runnable runnable;
    String rotaAutoLogout;
    int rotaAutoLogoutAsInt;
    final String               QRCODE_ACTION = "com.carefreegroup.QRCODE_ACTION";
    NfcScannerApplication      nfcscannerapplication;
    private LocationManager locationManager;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mapview);

        Intent intent = this.getIntent();
        String postcode = intent.getStringExtra("postcode");
        Log.e(TAG, "postcode = " + postcode);
        appSharedPrefs = PreferenceManager.getDefaultSharedPreferences(this);
        nfcscannerapplication = (NfcScannerApplication) getApplication();

                context = this;
                endAddr = postcode;

                isTrafficOn = false;

                rotaAutoLogout = appSharedPrefs.getString("120", null);    
                rotaAutoLogoutAsInt = Integer.parseInt(rotaAutoLogout);

                if(rotaAutoLogoutAsInt > 0){
                    initHandler();
                    handler.postDelayed(runnable, rotaAutoLogoutAsInt * 1000);
                    }   

    }// end of onCreate

    public void initHandler(){

          handler = new Handler();
          runnable = new Runnable() {
                public void run() {
                    returnToMenu();

                }

                private void returnToMenu() {
                    Intent intent2 = new Intent(GetClientDirections.this,
                            NfcscannerActivity.class);
                    intent2.setAction(QRCODE_ACTION);
                    intent2.putExtra("carerid", nfcscannerapplication.getCarerID());
                    startActivity(intent2);
                }
            };

        }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {

        Log.e(TAG, "screen touched");
           if(rotaAutoLogoutAsInt > 0){

            handler.removeCallbacks(runnable);
            handler = null;
            runnable = null;
            initHandler();
            handler.postDelayed(runnable, rotaAutoLogoutAsInt * 1000);
            Log.e(TAG, " reset timer");
           }
            return super.dispatchTouchEvent(ev);

    }

    @Override
    protected void onPause() {
        locationManager.removeUpdates(this);
         handler.removeCallbacks(runnable);
        super.onPause();
    }

    @Override
    protected void onResume() {
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);

            handler.removeCallbacks(runnable);
            initHandler();
            handler.postDelayed(runnable, rotaAutoLogoutAsInt * 1000);

        super.onResume();
    }

    @Override
    protected void onStop() {
        handler.removeCallbacks(runnable);

        super.onStop();
    }

    private class AsyncGetRoute extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... params) {

            getRoute();
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {

            String jsonOutput = response.toString();
            Log.e(TAG, "jsonOutput = " + jsonOutput);

            JSONObject results = null;
            try {

                results = new JSONObject(jsonOutput);

                routes = results.getJSONArray("routes");

                anonObject = routes.getJSONObject(0);
                bounds = anonObject.getJSONObject("bounds");
                overViewPolyline = anonObject.getJSONObject("overview_polyline");
                polyPoints = overViewPolyline.getString("points");
                Log.e(TAG, "overview_polyline  = " + overViewPolyline);
                Log.e(TAG, "points  = " + polyPoints);

                northeast = bounds.getJSONObject("northeast");

                lat = (Double) northeast.get("lat");

                lon = (Double) northeast.get("lng");

                Log.e(TAG, "lon/lat = " + lon + " " + lat);

            } catch (NumberFormatException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            List<GeoPoint> list = decodePoly(polyPoints);

            mapView = (MapView) findViewById(R.id.cfmapview);
            mapView.setBuiltInZoomControls(true);
            mapView.setEnabled(true);
            mapView.setSatellite(true);

            mapController = mapView.getController();
            mapController.setZoom(10);
            mapOverlays = mapView.getOverlays();
            mapOverlays.clear();
            mapOverlays.add(new RoutePathOverlay(list, getApplicationContext()));
            mapController.animateTo(new GeoPoint(list.get(0).getLatitudeE6(), list
                    .get(0).getLongitudeE6()));

            mapView.invalidate();

            super.onPostExecute(result);
        }

    }

    public void getRoute() {

        response = new StringBuffer();
        URL url = null;
        try {
            url = new URL(stringUrl);
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        HttpURLConnection httpconn = null;
        try {
            httpconn = (HttpURLConnection) url.openConnection();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        try {
            if (httpconn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                // Log.e(TAG,"response code OK ");
                BufferedReader input = new BufferedReader(
                        new InputStreamReader(httpconn.getInputStream()), 8192);
                String strLine = null;

                while ((strLine = input.readLine()) != null) {
                    // Log.e(TAG,""+strLine);
                    response.append(strLine);
                }
                input.close();
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }// end of getRoute

    private List<GeoPoint> decodePoly(String encoded) {

        List<GeoPoint> poly = new ArrayList<GeoPoint>();
        int index = 0, len = encoded.length();
        int lat = 0, lng = 0;

        while (index < len) {
            int b, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;

            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            GeoPoint p = new GeoPoint((int) (((double) lat / 1E5) * 1E6),
                    (int) (((double) lng / 1E5) * 1E6));
            poly.add(p);
        }

        return poly;
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onLocationChanged(Location location) {
         lati =  (location.getLatitude());
         lngi =  (location.getLongitude());
         startAddr = new GeoPoint((int)(lati*1000000.0), (int)(lngi*1000000.0));
        Log.e(TAG, "lat = " + lati);
        Log.e(TAG, "lon = " + lngi);
        Log.e(TAG, "lat after cast  = " + (int)(lati * 1000000));
        Log.e(TAG, "lon after cast = " + (int)(lngi * 1000000));
        locationManager.removeUpdates(this);
        StringBuilder sb = new StringBuilder();
        sb.append("http://maps.google.com/maps/api/directions/json?origin=");
        //sb.append(startAddr);
        sb.append(lati);
        sb.append(",");
        sb.append(lngi);
        sb.append("&destination=");
        sb.append(endAddr);
        sb.append("&sensor=false");

        stringUrl = sb.toString();
        Log.e(TAG, "url = " + stringUrl);
        AsyncGetRoute agr = new AsyncGetRoute();
        agr.execute();

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.layout.menutogglemapview, menu);
        return true;

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        switch (item.getItemId()) {

    case R.id.satellite:

        mapView.setSatellite(true);

        return true;

    case R.id.terrain:

        mapView.setSatellite(false);

        return true;

    case R.id.traffic:

        if(isTrafficOn == false){
        mapView.setTraffic(true);
        isTrafficOn = true;
        }else{
            mapView.setTraffic(false);
            isTrafficOn = false;
        }

        return true;

    default:

        return super.onOptionsItemSelected(item);

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:11:22.867

您可以使用以下方法简化与启动/停止此计时器相关的所有代码：

```
//Generic Task Start/Stop 

private Handler mHandler = new Handler();

private void startTimer(Runnable Task, long delay) {  
    mHandler.removeCallbacks(Task);       
    mHandler.postDelayed(Task, delay);    
}

private void stopTimer(Runnable Task) {  
    mHandler.removeCallbacks(Task);       
}

//Now your specific code

private Runnable tReturnToMenu = new Runnable() {
    public void run() {
         returnToMenu();
    }
};

@Override
public boolean dispatchTouchEvent(MotionEvent ev) {

    Log.e(TAG, "screen touched");
       if(rotaAutoLogoutAsInt > 0){
             stopTimer(tButtonFadeOut);
             startTimer(tButtonFadeOut);
             Log.e(TAG, " reset timer");
       }
        return super.dispatchTouchEvent(ev);

} 
```

问候。

# asp.net - 调试 wcf 方法调用时的消息

> ID：13417599
> 
> 赞同：1
> 
> 时间：2012-11-16T13:28:45.980
> 
> 标签：asp.net, wcf, iis

我在本地机器上的 IIS7 上托管了 WCF 库。我的 Web 应用程序正在访问此服务。在调试服务方法时，我收到了附加 w3wp 进程的提示消息。当我经常面对这个问题时，它是如何永久解决的。下面是截图

![在此处输入图像描述](../Images/3efcd53a5669e9548d4274f1129e5694.png)

IIS 中是否需要任何设置。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:07:24.910

您可以尝试以下方法：

*   关闭所有 Visual Studio 实例。
*   确保您是本地调试器组（控制面板、管理工具、本地安全策略、安全设置、本地策略、用户权限分配、调试程序）的成员。
*   将以下注册表项 `HKCU\Software\Microsoft\VisualStudio\10.0\Debugger\DisableAttachSecurityWarning`从更改`0`为`1`。
*   重新启动 Visual Studio。

（来源： http: [//blog.geeky.cc/post/2010/07/19/Disable-Attach-Security-Warning.aspx](http://blog.geeky.cc/post/2010/07/19/Disable-Attach-Security-Warning.aspx)）

# c++ - 静态opencv在arm Linux busybox上找不到USB网络摄像头？

> ID：13417600
> 
> 赞同：2
> 
> 时间：2012-11-16T13:28:48.180
> 
> 标签：c++, opencv, usb, webcam, busybox

我有一个小型busybox系统，我为它编译了内核并添加了对USB摄像头的支持。当我将相机连接到设备时，它会给我一些输出，我得到一个 /dev/video0 设备：

```
usb 1-1: new high-speed USB device number 3 using orion-ehci
uvcvideo: Found UVC 1.00 device Webcam C170 (046d:082b)
input: Webcam C170 as /devices/platform/orion-ehci.0/usb1/1-1/1-1:1.0/input/input1

/ # ls -l /dev/video0
crw-rw----    1 0        0          81,   0 Mar  8 08:08 /dev/video0
/ # 
```

我已经使用所有需要的库为 arm 静态编译了 opencv2.4，并且编译代码没有错误：

```
Mat frame;
VideoCapture capture(0);
if(!capture.isOpened()){
    printf("Cannot open camera\r\n");
    printf("%s\r\n", cvErrorStr(cvGetErrStatus()));
} 
```

这给了我作为输出：

```
Cannot open camera
No Error
/ # 
```

相机在我的笔记本电脑上工作正常，我尝试了多个相机，结果都一样。我还尝试了许多不同的方法通过 opencv 打开相机槽，这也给了我相同的结果。

我怎样才能让我的busybox系统和opencv从相机中读取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:39:29.587

您可能缺少 V4L。我将运行 V4L 的示例代码并进行调查。您是否与 ldd 核对过您的程序链接的所有库？

# java - Spring+Hibernate 异常：没有休眠会话绑定到线程

> ID：13417611
> 
> 赞同：3
> 
> 时间：2012-11-16T13:29:28.993
> 
> 标签：java, spring, hibernate

当我使用 Spring + hibernate 调用我的 DAO 时出现以下错误：

```
exception 

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here 
```

我将 @Transactional 注释放在我的 DAO 和我的服务中。

这是我的 hibernate.cfg.xml ：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
<session-factory>
    <mapping class="hibernateTest.domain.Product" />
</session-factory>     
</hibernate-configuration> 
```

我的 applicationContext.xml ：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"     xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/beans     http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/tx/spring-aop-2.5.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"
        default-autowire="byName">

<!--<context:annotation-config/>-->
<context:component-scan base-package="hibernateTest.dao"/>
<context:component-scan base-package="hibernateTest.service"/>

<tx:annotation-driven/> 

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${jdbc.driverClassName}"/>
        <property name="url" value="${jdbc.url}"/>
        <property name="username" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
</bean> 

</beans> 
```

我的小服务程序：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:p="http://www.springframework.org/schema/p"     xmlns:context="http://www.springframework.org/schema/context"
  xsi:schemaLocation="http://www.springframework.org/schema/beans   http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
  http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"
  default-autowire="byName">

<context:component-scan base-package="hibernateTest">
    <context:include-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
</context:component-scan>

<context:annotation-config/>

<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/>

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
      p:prefix="/WEB-INF/jsp/" 
      p:suffix=".jsp" />

<bean id="propertyConfigurer" 
      class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:jdbc.properties</value>
        </list>
    </property>
</bean> 

 <bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
</bean>

 <bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

</beans> 
```

我的道（当我调用 getProductList() 时出错）：

```
@Repository
  @Transactional
  public class JdbcProductDao implements ProductDao { 

/** Logger for this class and subclasses */
protected final Log logger = LogFactory.getLog(getClass()); 

@Autowired private SessionFactory sessionFactory;

public List<Product> getProductList() {

    logger.info("Getting products!");
    return sessionFactory.getCurrentSession().createQuery("from products")
            .list();
} 

} 
```

谢谢你的帮助

编辑堆栈跟踪

@Boris Treukhov - ProductDaoImpl = JdbcProductDao

```
Grave: Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'inventoryController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private hibernateTest.service.ProductManager hibernateTest.web.InventoryController.productManager; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'productManagerImpl': Injection of autowired dependencies failed; nested exception is org.springfraework.beans.factory.BeanCreationException: Could not autowire field: private hibernateTest.repository.ProductDao hibernateTest.service.ProductManagerImpl.productDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [hibernateTest.repository.ProductDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private hibernateTest.service.ProductManager hibernateTest.web.InventoryController.productManager; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'productManagerImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private hibernateTest.repository.ProductDao hibernateTest.service.ProductManagerImpl.productDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [hibernateTest.repository.ProductDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
... 55 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'productManagerImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private hibernateTest.repository.ProductDao hibernateTest.service.ProductManagerImpl.productDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [hibernateTest.repository.ProductDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
... 57 more
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private hibernateTest.repository.ProductDao hibernateTest.service.ProductManagerImpl.productDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [hibernateTest.repository.ProductDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
... 68 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [hibernateTest.repository.ProductDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
... 70 more

 Grave: PWC1306: Startup of context /HibernateTest failed due to previous errors
  Grave: PWC1305: Exception during cleanup after start failed
org.apache.catalina.LifecycleException: PWC2769: Manager has not yet been started
at org.apache.catalina.session.StandardManager.stop(StandardManager.java:873)
at org.apache.catalina.core.StandardContext.stop(StandardContext.java:5571)
at com.sun.enterprise.web.WebModule.stop(WebModule.java:527)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5384)
at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at  com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)

Grave: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException:      org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'inventoryController': Injection of autowired dependencies failed; nested exception is  org.springframework.beans.factory.BeanCreationException: Could not autowire field: private hibernateTest.service.ProductManager hibernateTest.web.InventoryController.productManager; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'productManagerImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private hibernateTest.repository.ProductDao hibernateTest.service.ProductManagerImpl.productDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [hibernateTest.repository.ProductDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5389)
at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'inventoryController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private hibernateTest.service.ProductManager hibernateTest.web.InventoryController.productManager; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'productManagerImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private hibernateTest.repository.ProductDao hibernateTest.service.ProductManagerImpl.productDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [hibernateTest.repository.ProductDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
... 39 more
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private hibernateTest.service.ProductManager hibernateTest.web.InventoryController.productManager; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'productManagerImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private .... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:06:28.283

您将根 Web[应用程序上下文与 Servlet 上下文](https://stackoverflow.com/questions/3652090/difference-between-applicationcontext-and-spring-servlet-xml-in-spring)混淆了。您的 DAO 类和服务属于根应用程序上下文，应该在那里声明（事务管理器也是如此）。

`<tx:annotation-driven/>`在您的情况下，它是在根应用程序上下文中声明的，并且它不能修改 servlet 上下文中的 bean 以使用 AOP 创建事务代理。

如果您使用自动扫描，您应该考虑将您的类放到相应的 java 包中并配置`<context:component-scan>`为使用更具体的过滤器，就像[这里](https://stackoverflow.com/questions/5269450/multiple-packages-in-contextcomponent-scan-spring-config)描述的那样。

~~**更新**：这似乎`<component:scan`很好 - 它可能是根上下文中缺少的事务管理器。~~

**更新 2**：为了避免在 servlet 上下文中创建 DAO bean，您需要

*   添加`use-default-filters="false"`到您 `<context:component-scan>`的 servlet spring 配置中或
*   将您的控制器移动到更具体的基础包并更改 `<context:component-scan>`servlet spring 配置以反映更改。

**更新 3**以解决对存储库的依赖，您应该`repository`在根上下文中添加包以自动扫描。

p.s. also don't forget that package names in java should [conform to convention](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:42:55.340

Try to set your autowired session factory this way(in JdbcProductDao):

```
@Autowired
public void init(SessionFactory factory) {
    setSessionFactory(factory);
} 
```

# php - 动态 html 表格显示不正确

> ID：13417614
> 
> 赞同：0
> 
> 时间：2012-11-16T13:29:49.990
> 
> 标签：php, html

查看我的动态 html 表格代码，它当前显示如下表格：

![表格显示不正确](../Images/082d87b6aca96682bf754ec0fce466c1.png)

这显然是不正确的，它应该显示如下表：

![桌子应该是什么样子](../Images/75dbb48eaca3c8e7545edd386a48eb47.png)

我猜代码的标记有问题，但我似乎看不出问题出在哪里。有谁知道问题出在哪里才能获得正确的表格布局？PHP：

```
 <?php

if (isset($_POST['id'])) {

$_SESSION['id'] = $_POST['id'];

}

$assessment = $_SESSION['id'];
    include('connect.php');

    $query = "SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionContent, an.Answer, q.QuestionMarks 
    FROM Session s 
    INNER JOIN Question q ON s.SessionId = q.SessionId
    JOIN Answer an ON q.QuestionId = an.QuestionId AND an.SessionId = q.SessionId
    WHERE s.SessionName = ?
    ORDER BY q.QuestionId, an.Answer";

    // prepare query
    $stmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $stmt->bind_param("s", $assessment);
    // execute query
    $stmt->execute(); 

    // This will hold the search results
    $searchQuestionId = array();
    $searchQuestionContent = array();
    $searchAnswer = array();
    $searchMarks = array();

    // Fetch the results into an array

    // get result and assign variables (prefix with db)
    $stmt->bind_result($dbSessionId, $dbSessionName, $dbQuestionId, $dbQuestionContent, $dbAnswer, $dbQuestionMarks);
    while ($stmt->fetch()) {
        $searchQuestionId[] = $dbQuestionId;
        $searchQuestionContent[] = $dbQuestionContent;
        $searchAnswer[] = $dbAnswer;
        $searchMarks[] = $dbQuestionMarks;
    }?> 
```

HTML：

```
<form id="Marks" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
<table border='1' id='markstbl'>
    <thead>
        <tr>
            <th class='questionth'>Question No.</th>
            <th class='questionth'>Question</th>
            <th class='answerth'>Answer</th>
            <th class='answermarksth'>Marks per Answer</th>
            <th class='noofmarksth'>Total Marks</th>
        </tr>
    </thead>
    <?php
    $row_span = array_count_values($searchQuestionId);
    $prev_ques = '';
    foreach($searchQuestionId as $key=>$questionId){?>
        <tbody>   
            <tr class="questiontd">
            <?php
            if($questionId != $prev_ques){?>
                <td class="questionnumtd" name="numQuestion" rowspan="<?=$row_span[$questionId]?>"><?=$questionId?> <input type="hidden" name="q<?=$questionId?>_ans_org" class="q<?=$questionId?>_ans_org" value="<?=$searchMarks[$key]?>"><input type="hidden" name="q<?=$questionId?>_ans" class="q<?=$questionId?>_ans" value="<?=$searchMarks[$key]?>"></td>
                <td class="questioncontenttd" rowspan="<?=$row_span[$questionId]?>"><?=$searchQuestionContent[$key]?> </td>
            <?php
            }else{?>
                <td class="questionnumtd" name="numQuestion" ></td>
                <td class="questioncontenttd" ></td>
            <?php
            }?>
                <td class="answertd" name="answers[]"><?=$searchAnswer[$key]?></td>
                <td class="answermarkstd">
                <input class="individualMarks q<?=$questionId?>_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
                </td>
            <?php
            if($questionId != $prev_ques){?>
                <td class="noofmarkstd q<?=$questionId?>_ans_text"  q_group="1" rowspan="<?=$row_span[$questionId]?>"><?=$searchMarks[$key]?></td>
            <?php
            }else{?>
                <td class="noofmarkstd"  q_group="1"></td>
            <?php
            }?>
            </tr>
        <?php
        $prev_ques = $questionId;
    }?>
    </tbody>
</table>
</form> 
```

下面是数组的 print_r 显示的内容：

> 数组 ( [0] => 1 [1] => 1 [2](https://i.stack.imgur.com/GZLX6.png) => 1 [3](https://i.stack.imgur.com/aY2ki.png) => 2 ) 数组 ( [0] => 命名 ROM 中的三个特征 [1] => 命名 ROM 中的三个特征[2](https://i.stack.imgur.com/GZLX6.png) =>命名 ROM 中的三个特征[3](https://i.stack.imgur.com/aY2ki.png) => 这是一个单一的答案 ) 数组 ( [0] => A [1] => B [2](https://i.stack.imgur.com/GZLX6.png) => D [3](https://i.stack.imgur.com/aY2ki.png) => True ) 数组 ( [0] => 5 [1] = > 5 [2](https://i.stack.imgur.com/GZLX6.png) => 5 [3](https://i.stack.imgur.com/aY2ki.png) => 5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:11:50.713

这只是一个疯狂的猜测..如果你删除会发生什么

```
else{?>
                <td class="questionnumtd" name="numQuestion" ></td>
                <td class="questioncontenttd" ></td>
            <?php
            } 
```

和

```
else{?>
                <td class="noofmarkstd"  q_group="1"></td>
            <?php
            } 
```

从你的代码..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:12:23.667

因为您的标题有一个行跨度，所以我不确定您为什么要添加

```
<td class="questionnumtd" name="numQuestion" ></td>
<td class="questioncontenttd" ></td> 
```

当标题不是新的。我会简单地删除这个 else 语句以及上面的两行。

第二个 else 语句及其 html 代码也是如此。去掉它。

```
<tr class="questiontd">
<?php
if($questionId != $prev_ques){?>
     <td class="questionnumtd" name="numQuestion" ...></td>
     <td class="questioncontenttd" rowspan="<?=$row_span[$questionId]?>"><?=$searchQuestionContent[$key]?> </td>
 <?php }?>
 <td class="answertd" name="answers[]"><?=$searchAnswer[$key]?></td>
 <td class="answermarkstd">
 <input class="individualMarks q<?=$questionId?>_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
 </td>
 <?php
 if($questionId != $prev_ques){?>
     <td class="noofmarkstd q<?=$questionId?>_ans_text"  q_group="1" rowspan="<?=$row_span[$questionId]?>"><?=$searchMarks[$key]?></td>
<?php }?>
</tr> 
```

# sql - 在 SQL Server 中使用分隔符拆分字符串

> ID：13417620
> 
> 赞同：1
> 
> 时间：2012-11-16T13:30:00.227
> 
> 标签：sql, sql-server-2008

> **可能重复：**
> [SQL 中的拆分字符串](https://stackoverflow.com/questions/2647/split-string-in-sql)

我有一个包含以下值的字段：

xxx-xxxx-xx-xx

xxxx-xx-xxxx-x

在 excel 中，如果我使用“文本到列”功能（以“-”作为分隔符），我最终会得到：

xxx xxxx xx xx

xxxx xx xxxx x

我试图在 Sql Server 2008 中使用诸如`charindex`etc 之类的 sting 函数来实现相同的效果，但似乎无法掌握它。

在此先感谢您的帮助。约翰

# blackberry-10 - 黑莓 10 后台服务

> ID：13417621
> 
> 赞同：8
> 
> 时间：2012-11-16T13:30:05.797
> 
> 标签：blackberry-10

BB 10 中是否有任何方法可以在手机启动时自动启动应用程序？如果是这样，是否可以在后台进行后台处理（如检查 gps 位置或 wifi 状态）时在后台进行读取？先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T13:51:13.897

您目前无法在后台作为无头应用程序运行（即您需要 UI），或在设备启动时自动启动。

如果用户启动了您的应用程序，它可以请求在不在前台时仍然运行。它也可以通过推送和调用框架启动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T23:06:57.163

从 BlackBerry 10.2 开始，您可以使用 Headless Apps 来执行此操作。更多信息在这里：[https ://developer.blackberry.com/native/documentation/cascades/device_platform/headless_apps/](https://developer.blackberry.com/native/documentation/cascades/device_platform/headless_apps/)

# php - 为什么 PhpStorm 检查说“异常”未定义？

> ID：13417624
> 
> 赞同：2
> 
> 时间：2012-11-16T13:30:11.257
> 
> 标签：php, ide, editor, phpstorm

`PhpStorm`由于某种原因无法识别`Exception`。代码执行得很好，但我不能“转到”代码（应该发送给我`Core_c.php`）：

![在此处输入图像描述](../Images/2a70d4b7a3871a5c364d9240f8f751ea.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T14:48:49.723

Windows 操作系统有“尝试重新启动操作系统”的建议，这有助于解决很多“不工作/突然停止工作”的情况。

**文件 | Invalidate Caches**是用于 PhpStorm 的，尤其是在 IDE/OS 崩溃或将 IDE 升级到更新版本之后。

PS我不得不编一些文字，否则答案太短了。

# java - 如何覆盖语言

> ID：13417627
> 
> 赞同：1
> 
> 时间：2012-11-16T13:30:32.497
> 
> 标签：java, android, localization

我的应用程序支持多种语言（values-es，values-de...）但是如何添加选项来覆盖它

例如：

用户已将其系统语言设置为英语，因此我的应用程序将使用默认值文件夹。

我想添加选项，以便它可以选择我的应用程序中可用的任何语言。

如果用户选择德语（在我的应用程序中不在系统设置中），它将使用 values-de 中的字符串

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:48:03.117

我刚刚为我的应用程序做了这个。我读过的所有内容都表明这不是一个好主意，因为 Android 框架不支持它，并且将来可能会出现错误。尽管如此，有人告诉我这是我们想要做的，所以我做到了。到目前为止，我的西班牙语工作正常。您将需要添加

```
android:configChanges="orientation|locale"> 
```

在您的所有活动中。您可能不需要方向，但我这样做是为了在设备转动时语言会保持不变。您可能还需要做一些其他工作，例如在活动中的 onCofigChanged 中设置语言……至少我做了。可能有更好的方法来做到这一点，但这就是我让它工作的方式。祝你好运

# php - 几次调用简单的 PHP 脚本后服务器内存激增

> ID：13417633
> 
> 赞同：2
> 
> 时间：2012-11-16T13:30:51.097
> 
> 标签：php, iframe

在尝试调试不同的问题时，我创建了一个包含以下内容的 HTML 文件：

```
<body>
Try 1:<iframe style='height:60px;' src='return_test1.php' ></iframe><br/>
Try 2:<iframe style='height:60px;' src='return_test2.php' ></iframe><br/>
Try 3:<iframe style='height:60px;' src='return_test3.php' ></iframe><br/>
Try 4:<iframe style='height:60px;' src='return_test4.php' ></iframe><br/>
Try 5:<iframe style='height:60px;' src='return_test5.php' ></iframe><br/>
Try 6:<iframe style='height:60px;' src='return_test1.php' ></iframe><br/>
Try 7:<iframe style='height:60px;' src='return_test2.php' ></iframe><br/>
Try 8:<iframe style='height:60px;' src='return_test3.php' ></iframe><br/>
Try 9:<iframe style='height:60px;' src='return_test4.php' ></iframe><br/>
Try 10:<iframe style='height:60px;' src='return_test5.php' ></iframe><br/>
</body> 
```

每个脚本（**return_test1.php**到**return_test5.php**）只包含以下代码：

```
<?php
echo "SUCCESS";
?> 
```

问题是打开 HTML 文件时，一些 iframe 会显示预期的“SUCCESS”输出，但其他会显示“ **Internal Server Error** ”。这些随着页面的每次刷新而变化。

查看 cPanel 服务器日志，出现错误“无法分配内存：无法创建子进程”。查看资源统计信息，打开 HTML 文件时使用的内存高达 1 GB。

我在其他服务器上尝试了代码，当然它运行没有问题。

我还应该提到，直接打开其中一个 PHP 脚本总是会产生良好的结果。它们仅在同时调用时才会失败。

该站点位于共享主机上，流量很少。进行托管的公司没有帮助，似乎唯一的解决方案是转移到另一家托管服务提供商。

有谁知道可能导致问题的原因？或者我可以建议托管人员检查服务器配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:12:15.293

我们最终改变了主机。

更改后的第二天，我们收到了旧主机商的消息，称他们在与 cPanel 和 cloudLinux 的制造商协商后解决了问题。显然，这是一个影响极少数用户的问题，并且已通过“资源管理部分”的自定义补丁修复（对不起，我不知道确切的细节）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:39:42.010

似乎您的共享托管环境是一个笑话，快点摆脱它们。如果他们不能保证你有足够的内存来产生 10 个进程，那他们就是荒谬的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:51:47.270

您的主机可能限制了您可以同时运行的进程/内存数量。在您的示例中，服务器同时创建了 11 个 PHP 进程。并且不同的 PHP 进程之间不共享内存：每个进程使用 X 兆字节并且达到内存限制。

您的托管解决方案似乎（非常）有限。但是，如果您不想或无法更改，则可以处理脚本逻辑。

例如，使用这种解决方案，您将只使用一个进程：

```
<body>
Try 1:<div style="height:60px; overflow: auto;"><?php require('return_test1.php'); ?></div>
Try 2:<div style="height:60px; overflow: auto;"><?php require('return_test2.php'); ?></div>
Try 3:<div style="height:60px; overflow: auto;"><?php require('return_test3.php'); ?></div>
<!-- ... etc ... -->
</body> 
```

# c# - 为 c# 解决方案生成沙堡文档

> ID：13417634
> 
> 赞同：2
> 
> 时间：2012-11-16T13:30:54.187
> 
> 标签：c#, documentation, documentation-generation, sandcastle

我有一个包含许多 C# 项目的 vs2012 解决方案。我想为整个库使用 Sandcastle 生成一些文档。

我一直在查看 Sandcastle 文档，但不清楚如何为整个项目生成文档。

我怎样才能为整个解决方案实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:48:41.803

我使用了[Sandcastle Helpfile Builder](http://shfb.codeplex.com/)（而不是直接使用 Sandcastle）。

在 SHFB 项目中，您可以在`<DocumentationSources>`节中指定多个 DLL+XML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T04:44:18.317

正如 ChrisW 所指出的，您应该使用 Sandcastle Help File Builder (SHFB)。然而，即使使用 SHFB 提供的干净和简单的 GUI，您也可能需要或想要考虑很多问题，以便生成一个整洁、专业的文档集。我的文章（“[驯服沙堡：编写代码的 .NET 程序员指南](http://www.simple-talk.com/dotnet/.net-tools/taming-sandcastle-a-.net-programmers-guide-to-documenting-your-code/)”）记录了我在 Simple-Talk.com 上发布的各种潜在陷阱的经验，可能会为您节省一些时间、精力和痛苦 :-)。

一旦你消化了这篇文章，也许你会更感兴趣，我把 SHFB 和 Sandcastle 的完整语法和使用指南放在这张[单页挂图](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/code-profiling-made-easy-sandcastlechart?utm_source=simpletalk&utm_medium=email-reflector&utm_content=sandcastlechart&utm_campaign=antsperformanceprofiler)上，可在 Simple-Talk.com 上找到。这里是一瞥：

![在此处输入图像描述](../Images/de9bbf6fb6b423d6974574cf80b28f56.png)

# objective-c - 如何在视图上显示地图视图标注确实加载

> ID：13417636
> 
> 赞同：2
> 
> 时间：2012-11-16T13:31:01.783
> 
> 标签：objective-c, ios, mkmapview, mapkit

我试图在地图视图加载后立即显示注释标注。我确定我错过了一个简单的东西，但找不到它。

谢谢你的帮助。

这是我的代码：

我的.h：

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface MapDetailViewController : UIViewController <MKMapViewDelegate> {

    MKMapView *mapView;

}

// map
@property (strong, nonatomic) IBOutlet MKMapView *mapView;

@property (nonatomic) double latDouble;
@property (nonatomic) double lngDouble;

@property (nonatomic) NSString *vendorStr;

@property (nonatomic) NSNumber *costAmount;

@end 
```

我的.m：

#import "MapDetailViewController.h"

```
@interface MapDetailViewController ()

@end

#define THESPAN 0.01f;

@implementation MapDetailViewController
@synthesize mapView;
@synthesize latDouble, lngDouble;
@synthesize vendorStr, costAmount;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

}

-(void)viewWillAppear:(BOOL)animated {

    [super viewWillAppear:YES];

   // mapView.showsUserLocation = YES;
    mapView.delegate = self;

    MKCoordinateRegion region;

    MKCoordinateSpan span;
    span.longitudeDelta = THESPAN;
    span.latitudeDelta = THESPAN;

    CLLocationCoordinate2D annotationCoord;
    annotationCoord.latitude = latDouble;
    annotationCoord.longitude = lngDouble;

    MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];
    annotationPoint.coordinate = annotationCoord;
    annotationPoint.title = vendorStr;

    //convert cost amount/ price to string value for the subtitle
    NSString *costAmountStr = [costAmount stringValue];

    annotationPoint.subtitle = costAmountStr;
    [mapView addAnnotation:annotationPoint];

    region.center = annotationCoord;
    region.span = span;

    [mapView setRegion:region animated:YES];

}

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    MKPinAnnotationView *newAnnotation=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"annotation1"];

    UIButton *disclosureButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [disclosureButton addTarget:self action:@selector(mapCallOutPressed:) forControlEvents:UIControlEventTouchUpInside];

    newAnnotation.rightCalloutAccessoryView = disclosureButton;
    newAnnotation.animatesDrop = YES;    
    newAnnotation.canShowCallout = YES;
    newAnnotation.annotation = annotation;
    newAnnotation.draggable = YES;
    newAnnotation.enabled = YES;
    newAnnotation.exclusiveTouch = YES;
    newAnnotation.highlighted = YES;
    newAnnotation.multipleTouchEnabled = YES;
    newAnnotation.pinColor = MKPinAnnotationColorRed;
    newAnnotation.userInteractionEnabled = YES;

    //button on the right for popup for pins
        UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton setTitle:annotation.title forState:UIControlStateNormal];
    [rightButton addTarget:self
                    action:@selector(mapCallOutPressed:)
          forControlEvents:UIControlEventTouchUpInside];
    newAnnotation.rightCalloutAccessoryView = rightButton;

    //Create and add the right button to the callout
    UIButton* rightCalloutButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    rightCalloutButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [newAnnotation setRightCalloutAccessoryView:rightButton];

    //zoom button on the left of popup for pins
    UIButton* leftButton = [UIButton buttonWithType:UIButtonTypeContactAdd];
    [leftButton setTitle:annotation.title forState:UIControlStateNormal];
    [leftButton addTarget:self
                   action:@selector(zoomToLocation:) forControlEvents:UIControlEventTouchUpInside];
    newAnnotation.leftCalloutAccessoryView = leftButton;

    UIImageView *profileIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tag.png"]];
    newAnnotation.leftCalloutAccessoryView = profileIconView;

    return newAnnotation;
}

- (void)mapView:(MKMapView *)aMapView didAddAnnotationViews:(NSArray *)views{
    for (id<MKAnnotation> currentAnnotation in mapView.annotations) {
            [mapView selectAnnotation:currentAnnotation animated:YES];

    }
}

// method for the annotation detail disclosure button
-(void)mapCallOutPressed:(id)sender {

    NSLog(@"mapcallout pressed");

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:55:47.433

`viewWillAppear`尝试在添加注释后立即将这行代码添加到方法中：

```
 [mapView selectAnnotation:annotationPoint animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:57:57.333

从调用该方法时，您应该`[MKMapView selectAnnotation:animated:]`稍微延迟一下`mapView:(MKMapView *)aMapView didAddAnnotationViews:(NSArray *)views`

```
- (void)mapView:(MKMapView *)aMapView didAddAnnotationViews:(NSArray *)views{
    int64_t delayInSeconds = 0.1;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        for (id<MKAnnotation> currentAnnotation in mapView.annotations) {
            [mapView selectAnnotation:currentAnnotation animated:YES];

        }
    });
} 
```

*** 编辑**

在 6.0.1 设备、6.0 和 5.1 模拟器上尝试过。它绝对有效，我怀疑您没有通过传递 nil 来正确设置注释标题。

尝试将标题更改为固定值，如下所示：

```
annotationPoint.title = @"Hello world"; 
```

*** 编辑2：**

您的财产声明应该看起来更像

```
@property (nonatomic, copy) NSString *vendorStr;
@property (nonatomic, strong) NSNumber *costAmount; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T15:05:11.183

视图确实出现后，我已经等待了 0.8 秒。

```
[self performSelector:@selector(testMethod) withObject:nil afterDelay:.8];

-(void) testMethod
{
    [self.mapView selectAnnotation:annotation animated:NO];
} 
```

**动画：没有**成功

# cpu - Xen VPCU 固定到 15 个 CPU

> ID：13417638
> 
> 赞同：1
> 
> 时间：2012-11-16T13:31:13.560
> 
> 标签：cpu, xen, hypervisor, pinning

我正在尝试将我的 domU 固定到 64 核机器上的 15 个 CPU (16-31)。我已经使用以下内核选项启动了系统：dom0_vcpu_pin=true

然后稍后使用“xm vcpu-pin domU vpu 16-31”我能够将 CPU 亲和性设置为 15 个 CPU，但 domU 仍然只使用一个 CPU，其余的都处于暂停状态。有人可以提供更多详细信息如何解决这个问题，以便我可以通过“xm vcpu-list”看到我的 domU 使用更多 CPU。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:00:45.950

必须在 xen 配置文件中设置以下选项：

maxvcpus= # vcpus = # vcpu_avail = vcpu 激活的位掩码 例如 24=11000 并且将仅激活 vcpu0,vcpu1。

xm/create.py 中也有一个错误。以下补丁为我解决了这个问题，并且在此位掩码值激活所需的 vpcu 从 xen 配置文件中读取之后。在此之前，vpcu_avail 始终设置为“1”（也从“xenstore-ls -f”输出验证）。

```
--- create.py   
+++ create.py.af  

         if maxvcpus and vcpus:
             config.append(['vcpus', vcpus])
-            config.append(['vcpu_avail', (1 << vcpus) -1)])
+            config.append(['vcpu_avail', getattr(vals, 'vcpu_avail'])

     def add_conf(n):
         if hasattr(vals, n): 
```

# patch - 将补丁应用于 mahout

> ID：13417641
> 
> 赞同：1
> 
> 时间：2012-11-16T13:31:23.030
> 
> 标签：patch, mahout

我正在尝试将此补丁[https://issues.apache.org/jira/browse/MAHOUT-944](https://issues.apache.org/jira/browse/MAHOUT-944)应用于 Mahout。

我以前从未应用过补丁，所以这是新的。直到现在我还没有成功。

首先，我应该安装所有补丁还是最新的补丁？

我试过安装使用`patch -p0 < MAHOUT-944.patch`，但我收到了很多这样的错误：`1 out of 1 hunk FAILED`.

我还尝试将补丁应用于各种版本，即 0.5、0.7 和来自 github 的最新代码。我应该将补丁应用到哪个版本？或者任何版本都可以？

非常感谢提前，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T14:18:56.500

此补丁现已在 Mahout 中提供，并将在 Mahout 0.8 中提供

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:53:22.773

这通常意味着您不是从制作补丁的同一基本目录应用，或者它是与您应用它的不同版本的差异。

# git - 获取当前本地分支的远程 git-svn 分支

> ID：13417643
> 
> 赞同：4
> 
> 时间：2012-11-16T13:31:26.463
> 
> 标签：git, git-svn

我正在寻找一个片段，它将为我提供 git-svn 用于当前签出分支的“伪远程”上游分支。

假设我的本地存储库是从 svn 克隆的，`git svn clone -s --prefix=my-svn/ ...`并且我在某个`topic/foo`基于 svn branch 的本地分支上`bar`。

如何确定下哪个分支`refs/remotes/`将由 a 更新`git svn fetch --parent`？（最好不要对初始克隆中配置的任何布局信息进行硬编码。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:35:03.043

尝试

```
git log --grep git-svn-id: --first-parent -1 
```

然后查询文件`[svn-remote]`中的部分`.git/config`（使用 git config）并查看`svn-url`从上面的命令获得的分支对应于哪个分支。

# php - 如何从 Respect\Validation 获取验证错误消息？

> ID：13417649
> 
> 赞同：3
> 
> 时间：2012-11-16T13:31:38.927
> 
> 标签：php, validation, respect-validation

我一直在使用[Respect Validation](https://github.com/Respect/Validation)进行表单验证

```
$app->post('/', function () use ($app) {

    $validator  = v::key('name', v::string()->notEmpty())
                    ->key('email', v::email()->notEmpty())
                    ->key('message', v::string()->notEmpty());

    $errors = array();

    try{
        $validator->assert($_POST);
    } catch (\InvalidArgumentException $e) {
        $errors = $e->findMessages(array(
            'notEmpty'     => '{{name}} is required',
            'email'        => '{{name}} must be a valid email'
        ));
    }

    if ($validator->validate($_POST)) {
        // do stuff

        $app->redirect('/');

    } else {

        $app->render('index.php', array('field_errors' => array_values($errors)));

    }
}); 
```

循环通过`array_values($errors)`会给我：

```
"" is required
email must be a valid email 
```

我需要类似的东西：

```
name is required
email must be a valid email
message is required 
```

应该如何使用[尊重验证来完成](https://github.com/Respect/Validation)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T17:44:07.467

消息在那里，但您的`findMessages`查找正在搜索`notEmpty`and `email`。

你实际拥有的`$errors`是：

```
Array
(
    [0] => 
    [1] => email must be a valid email
) 
```

`$errors[0]`是您`notEmpty`未找到的查找。
`$errors[1]`是您找到的查找`email`。

如果您更改它以查找有问题的字段`name`，`email`并且`message`：

```
 $errors = $e->findMessages(array(
        'name'         => '{{name}} is required',
        'email'        => '{{name}} must be a valid email',
        'message'      => '{{name}} is required'
    )); 
```

然后你会得到想要的结果：

```
Array
(
    [0] => name is required
    [1] => email must be a valid email
    [2] => message is required
) 
```

请原谅我纯粹偶然发现的延迟响应，如果改为从官方[Respect\Validation 问题跟踪器](https://github.com/Respect/Validation/issues)请求支持，您会发现更快的结果。这也是您可能提出的任何改进建议的理想平台，以帮助避免您遇到的问题。您会发现 Respect 团队热心、友好并且总是乐于提供帮助。

开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:42:31.623

我认为上面的答案两个很接近。您只需要添加一个包含消息以及名称和电子邮件的错误消息代码块。

```
 $errors = $e->findMessages(array(
    'notEmpty'     => '{{name}} is required',
    'email'        => '{{email}} must be a valid email',
    'notEmpty'     => '{{message}} please enter a message'
)); 
```

# java - Java中没有重复的字符串的所有可能组合

> ID：13417663
> 
> 赞同：3
> 
> 时间：2012-11-16T13:32:35.307
> 
> 标签：java, string

我知道这个问题之前已经在 [stackoverflow](https://stackoverflow.com/questions/361/generate-list-of-all-possible-permutations-of-a-string)上得到了回答，但是我要求这不是为了告诉我正确的代码，而是因为我想知道我做错了什么。

* * *

```
public static void printCombinations(String str){
    printCombinations(str, 0, str.length()-1);
}

public static void printCombinations(String str,int k,int n){
    if(k == n)
        System.out.println(str);
    else {
        for(int i=k;i<n;i++){
            String tmp=modifyString(str,i,k);
            printCombinations(tmp,k+1,n);
            modifyString(str,i,k);
        }
    }
}

public static String modifyString(String str,int x,int y){

            // for swapping characters inside a string 
    char arr[]=str.toCharArray();
    char t= arr[x];
    arr[x]=arr[y];
    arr[y]=t;

    String s= new String(arr);
    return s;   
} 
```

* * *

我将函数称为`printCombinations(s)`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T13:44:41.547

改变

```
i<n to i<=n 
```

它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:27:57.953

我正在考虑@CSSS 代码并进行了一些更改，以便初学者非常清楚。您只需要转储此代码即可运行它。我工作不正常。感谢@CSSS。@CSSS 的代码提供了不必要的重复排列，为了避免这种情况，我使用了 HashSet，对于每次迭代，我将各自的排列添加到 HashSet。我们知道 Set 实现不允许重复。所以它给出了正确的结果。在 MyClass

```
class Myclass
{
    static Set<String> resultSet=new HashSet<String>();

    public static void main(String[] args){
        String str=new Scanner(System.in).next();
        printCombinations(str, 0, str.length(),resultSet);
        Object[] finalArray=resultSet.toArray();
        int i=1;
        for(Object s:finalArray){
            System.out.println(s.toString()+"\t"+i++);
        }

    }

    public static void printCombinations(String str,int k,int n,Set<String> resultSet){
        for(int i=k;i<n;i++){
            String temp=modifyString(str,i,k);
            resultSet.add(temp);
            printCombinations(temp,k+1,n,resultSet);
        }  
    }

    public static String modifyString(String str,int x,int y){
        char arr[]=str.toCharArray();
        char t= arr[x];
        arr[x]=arr[y];
        arr[y]=t;
        String s= new String(arr);
        return s;   
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:48:18.430

该函数`modifyString`不修改字符串，它返回修改后的字符串——也许你想重命名它。您调用它两次 - 也许第二次应该对输出进行处理？你想达到什么目标？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-12T11:27:29.540

这对我有用..

```
import java.util.Arrays;
import java.util.Set;
import java.util.HashSet;
public class StringPermutations{
    private static Set<String> uniqueResultSet = new HashSet<String>();
    public static void main(String args[]) {
        String inputString = "ABC";
        permute(inputString.toCharArray(), 0, inputString.length()-1);
        System.out.println(uniqueResultSet);
    }

    public static void permute(char[] ary, int startIndex, int endIndex) {
        if(startIndex == endIndex){
            uniqueResultSet.add(String.valueOf(ary));
        }else{
            for(int i=startIndex;i<=endIndex;i++) {
                 swap(ary, startIndex, i );
                 permute(ary, startIndex+1, endIndex);
                 swap(ary, startIndex, i );
            }
        }
    }

    public static void swap(char[] ary, int x, int y) {
        char temp = ary[x];
        ary[x] = ary[y];
        ary[y] = temp;
    }
} 
```

# algorithm - 浮点数的精确总和

> ID：13417670
> 
> 赞同：18
> 
> 时间：2012-11-16T13:33:06.953
> 
> 标签：algorithm, floating-point, sum, floating-accuracy

我知道[一个类似的问题](https://stackoverflow.com/questions/5257166/java-floats-and-doubles-how-to-avoid-that-0-0-0-1-0-1-0-9000001)，但我想征求人们对我的算法的意见，以尽可能准确地将浮点数与实际成本相加。

这是我的第一个解决方案：

```
put all numbers into a min-absolute-heap. // EDIT as told by comments below
pop the 2 smallest ones.
add them.
put the result back into the heap.
continue until there is only 1 number in the heap. 
```

这个需要 O(n*logn) 而不是普通的 O(n)。这真的值得吗？

第二种解决方案来自我正在处理的数据的特征。**这是一个数量级相似的****正**数的巨大列表。

 **```
a[size]; // contains numbers, start at index 0
for(step = 1; step < size; step<<=1)
    for(i = step-1; i+step<size; i+=2*step)
        a[i+step] += a[i];
    if(i < size-1)
        a[size-1] += a[i]; 
```

基本思想是以“二叉树”方式求和。

注意：这是一个伪 C 代码。`step<<=1`表示乘以 2。这需要 O(n)。我觉得可能有更好的方法。你能推荐/批评吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-16T13:40:32.667

[Kahan 的求和算法](http://en.wikipedia.org/wiki/Kahan_summation_algorithm)比直接求和要精确得多，它的运行时间为 O(n)（比直接求和慢 1-4 倍，具体取决于浮点与数据访问相比的速度。在桌面上肯定慢不到 4 倍硬件，并且没有任何数据混洗）。

* * *

或者，如果您使用的是通常的 x86 硬件，并且您的编译器允许访问 80 位`long double`类型，则只需使用简单的求和算法和类型的累加器即可`long double`。仅将结果转换为`double`最后。

* * *

如果你真的需要很高的精度，你可以通过在 Kahan 求和算法中使用`long double`for variables `c`, `y`, `t`,来组合上述两种解决方案。`sum`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-16T13:40:07.237

如果您担心减少求和中的数值误差，那么您可能会对[Kahan 算法](http://en.wikipedia.org/wiki/Kahan_summation_algorithm)感兴趣。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T01:16:41.463

我的猜测是，您的二进制分解几乎与 Kahan 求和一样有效。

这是一个例子来说明它：

```
#include <stdio.h>
#include <stdlib.h>
#include <algorithm>

void sumpair( float *a, float *b)
{
    volatile float sum = *a + *b;
    volatile float small = sum - std::max(*a,*b);
    volatile float residue = std::min(*a,*b) - small;
    *a = sum;
    *b = residue;
}

void sumpairs( float *a,size_t size, size_t stride)
{
    if (size <= stride*2 ) {
        if( stride<size )
            sumpair(a+i,a+i+stride);
    } else {
        size_t half = 1;
        while(half*2 < size) half*=2;;
        sumpairs( a , half , stride );
        sumpairs( a+half , size-half , stride );
    }
}

void sumpairwise( float *a,size_t size )
{
    for(size_t stride=1;stride<size;stride*=2)
        sumpairs(a,size,stride);
}

int main()
{
    float data[10000000];
    size_t size= sizeof data/sizeof data[0];
    for(size_t i=0;i<size;i++) data[i]=((1<<30)*-1.0+random())/(1.0+random());

    float naive=0;
    for(size_t i=0;i<size;i++) naive+=data[i];
    printf("naive      sum=%.8g\n",naive);

    double dprec=0;
    for(size_t i=0;i<size;i++) dprec+=data[i];
    printf("dble prec  sum=%.8g\n",(float)dprec);

    sumpairwise( data , size );
    printf("1st approx sum=%.8g\n",data[0]);
    sumpairwise( data+1 , size-1);
    sumpairwise( data , 2 );
    printf("2nd approx sum=%.8g\n",data[0]);
    sumpairwise( data+2 , size-2);
    sumpairwise( data+1 , 2 );
    sumpairwise( data , 2 );
    printf("3rd approx sum=%.8g\n",data[0]);
    return 0;
} 
```

我声明了我的操作数 volatile 并使用 -ffloat-store 进行编译以避免 x86 架构上的额外精度

```
g++  -ffloat-store  -Wl,-stack_size,0x20000000 test_sum.c 
```

并得到：（0.03125 是 1ULP）

```
naive      sum=-373226.25
dble prec  sum=-373223.03
1st approx sum=-373223
2nd approx sum=-373223.06
3rd approx sum=-373223.06 
```

这值得一点解释。

*   我首先显示幼稚求和
*   然后是双精度求和（Kahan 大致相当于那个）
*   第一个近似值与您的二进制分解相同。除了我将总和存储在 data[0] 中并且我关心存储余数。这样求和前后数据的准确总和不变
*   这使我能够通过对第 2 次迭代的残差求和来近似误差，以纠正第 1 次迭代（相当于将 Kahan 应用于二进制求和）
*   通过进一步迭代，我可以进一步细化结果，我们看到了收敛

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T14:06:42.823

元素将按递增顺序放入堆中，因此您可以使用两个队列。如果数字是预先排序的，这将产生 O(n)。

此伪代码产生与您的算法相同的结果，并且`O(n)`如果输入已预先排序并且排序算法检测到：

```
Queue<float> leaves = sort(arguments[0]).toQueue();
Queue<float> nodes = new Queue();

popAny = #(){
       if(leaves.length == 0) return nodes.pop();
  else if(nodes.length == 0) return leaves.pop();
  else if(leaves.top() > nodes.top()) return nodes.pop();
  else return leaves.pop();
}

while(leaves.length>0 || nodes.length>1) nodes.push(popAny()+popAny());

return nodes.pop(); 
```**

# css - Css覆盖元素不可见

> ID：13417674
> 
> 赞同：5
> 
> 时间：2012-11-16T13:33:21.967
> 
> 标签：css, internet-explorer-8

见： [http ://schhh.dk/frivilligraadet/](http://schhh.dk/frivilligraadet/)

底部有视频的框在ie8中显示为： ![视频](../Images/40cc780fb8258948c9898afa69dfbaaf.png)

我实际上尝试制作一个jsfiddle，但这里没有问题：http: [//jsfiddle.net/q5T8Y/7/](http://jsfiddle.net/q5T8Y/7/)

```
.view-youtube-videoer .views-field-field-video .ytb-play {
  position: absolute;
  display: block;
  width: 230px;
  height: 128px;
  background: transparent url('http://schhh.dk/frivilligraadet/sites/all/themes/frivilligraadet/images/play.png') no-repeat 50% 50%;
  opacity: 0.7;
  filter:alpha(opacity=70);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:53:27.673

这是因为您需要为 span.ytb-video 设置“宽度”和“显示：块”在您的情况下，宽度应为 230px

[http://screencast.com/t/U2QPWvszGN](http://screencast.com/t/U2QPWvszGN)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:43:25.703

恐怕是 IE 的透明度问题。此链接中的配置和提示可以帮助您：[http ://www.jacklmoore.com/notes/ie-transparency-problems](http://www.jacklmoore.com/notes/ie-transparency-problems)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:05:49.500

在开发工具中查看它，由于某种原因，过滤规则和宽度规则合二为一。即使它们用分号分隔（参见屏幕截图），也可能组合“损坏”。这就是元素没有宽度的原因。

从 CSS 中我无法立即说出为什么 IE8 会以这种方式解释它们——它们在文件中甚至不是连续的！也许只是尝试重新排序它们，看看是否有区别。或将其更改为

```
-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=70)"; 
```

无论如何，这是 IE8 的更好版本。

![截屏](../Images/b04e1c3115f478fe5c9782e33dd73f44.png)

# java - SpeechRecognizer onResults 未触发

> ID：13417675
> 
> 赞同：1
> 
> 时间：2012-11-16T13:33:27.627
> 
> 标签：java, android, artificial-intelligence, speech-recognition

我有一个相当奇怪的问题。我有一个 android 应用程序，我正在使用`SpeechRecognizer`该类添加语音识别。我创建了实现 RecognitionListener 的类，它只为每个事件打印一条日志消息。一切似乎都很好。onReadyForSpeech 被解雇， onBeginningOfSpeech 被解雇， onEndOfSpeech 被解雇。

一个重要的事件并没有被触发，onResults：p

所以在夏天，一切似乎都很好，没有抛出异常，我收到事件告诉我它已成功启动并停止监听。我是否缺少一些额外的意图来告诉 SpeechRecognizer 它需要将结果发送到 onResults 或类似的东西？

我将意图设置如下

```
 Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, getClass().getPackage().getName());
    intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 5); 
```

SpeechRecognizer 完成为

```
 SpeechRecognizer speech = SpeechRecognizer.createSpeechRecognizer(this);
    speech.setRecognitionListener(this); 
```

我开始听

```
speech.startListening(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T19:50:00.457

我确实遇到了问题陈述中所述的问题。我有两个可用的语音识别服务（谷歌和另外一个）。我在内部类中出错了：

```
private final Handler handler = new Handler();
private final Runnable stopListeningRunnable = new Runnable() {
                @Override
                public void run() {
                    speechRecognizer.stopListening(); 
                }
            }; 
```

我没有把它写在使用它的方法中，而是把它放在内部类的开头。

这是停止对 的调用`onResults`。一旦我在实际使用它的方法中内联了它，`onResults`就可以正常工作。

希望这对你有帮助.. :)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T17:50:30.137

是否`onResults`被调用取决于提供语音识别服务的应用程序。您的问题描述不完整，因为您没有提及您用于语音识别的应用程序。是谷歌语音搜索吗？在任何情况下，您的问题都是错误报告，而不是 Stackoverflow，应该将其连同有关应用程序版本、您的 Android 版本、硬件等的详细信息一起发送给应用程序的生产者。

请注意，还有一个 2 参数版本`createSpeechRecognizer`，您可以使用它来确保获得所需的语音识别器。

另外，看看使用相同`SpeechRecognizer`接口并附带源代码的应用程序 Babble：

*   [https://play.google.com/store/apps/details?id=be.lukin.android.babble](https://play.google.com/store/apps/details?id=be.lukin.android.babble)
*   [https://github.com/lukin0110/babble/blob/master/android/app/src/be/lukin/android/babble/BabbleActivity.java](https://github.com/lukin0110/babble/blob/master/android/app/src/be/lukin/android/babble/BabbleActivity.java)

（很抱歉宣传我自己的应用程序，但在这种情况下可能会有所帮助，即您可以检查它是否按预期工作或是否有相同的问题。）

# asp.net - 在 Windows Azure 项目 SDK 1.8 中找不到虚拟路径的物理目录

> ID：13417679
> 
> 赞同：16
> 
> 时间：2012-11-16T13:33:41.147
> 
> 标签：asp.net, .net, azure, azure-packaging

我已将 Windows Azure SDK 从 V1.7 升级到 V1.8

在升级之前我的配置部分是

```
<Site name="Web">
    <VirtualApplication name="MyprojectService"        physicalDirectory="../../Myproject.Hosts.WebHost" />
</Site> 
```

SDK升级后

我收到以下错误。

> 错误 1 ​​找不到虚拟路径 Web/MyprojectService/ 的物理目录 'D:\Projects\Myproject\branches\Release_092012\Hosts\Myproject.Hosts.AzureHost\MyprojectAzureHost\Myproject.Hosts.WebHost'。D:\Projects\Myproject\branches\Release_092012\Hosts\Myproject.Hosts.AzureHost\MyprojectAzureHost\bin\Release\ServiceDefinition.csdef 1 1 MyprojectAzureHost

我已经浏览了[Azure Service.Csdef](https://stackoverflow.com/questions/13365254/did-azure-1-8-oct-2012-change-the-way-you-configure-multiple-sites-in-the-serv)链接。我将“../”附加到路径：

```
<Site name="Web">
    <VirtualApplication name="MyprojectService"        physicalDirectory="../../../Myproject.Hosts.WebHost" />
</Site> 
```

但是当我制作一个包时，它会自动删除，我一次又一次地收到上述错误。

我也试过把完整路径“D:/Projects/../Myproject.Hosts.WebHost”但是没有锁。

它在 SDK 1.7 中完美运行。但不适用于 SDK 1.8

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-16T20:11:15.213

我将尝试解释两个最新的 Windows Azure SDK（通过使用相同的示例应用程序）之间的变化，如下所示，因此请查看每种情况以及错误消息中显示的路径：

在以前的 SDK 中，虚拟目录源在项目的根目录中设置为默认值，但现在在最新的 SDK 中，虚拟目录源设置在项目输出目录中，您可以在下面的案例 #1 中看到。

案例一：（失败）

```
<VirtualApplication name="MyWeb" physicalDirectory="MvcWebRole1">

Error: Cannot find the physical directory 
    'C:\Users\avkashc\Documents\Visual Studio 2012\Projects\WindowsAzure2012\WindowsAzure2012\bin\Release\MvcWebRole1' for virtual path Web/MyWeb/. 
```

案例2：（失败）

```
 <VirtualApplication name="MyWeb"  physicalDirectory="..\MvcWebRole1">

 Error: Cannot find the physical directory 'C:\Users\avkashc\Documents\Visual Studio 2012\Projects\WindowsAzure2012\WindowsAzure2012\bin\MvcWebRole1' for virtual path Web/MyWeb/. 
```

案例3：（失败）

```
 <VirtualApplication name="MyWeb"  physicalDirectory="..\..\MvcWebRole1">

 Error: Cannot find the physical directory 'C:\Users\avkashc\Documents\Visual Studio 2012\Projects\WindowsAzure2012\WindowsAzure2012\MvcWebRole1' for virtual path Web/MyWeb/. 
```

案例4：（成功）

```
 <VirtualApplication name="MyWeb"
                     physicalDirectory="..\..\..\MvcWebRole1"> 
```

因为上面的案例#4 文件夹设置确实与我的实际 MvcWebRole1 文件夹结构（见下文）匹配，这就是为什么“......\”设置在我的“PhysicalDirectory”设置中有效。

您需要从作为源的 release* 浏览您的文件夹结构，然后一直回溯到它存在的位置，然后组装完整路径。

![在此处输入图像描述](../Images/98472420e0c84ad6d94507ebd630112c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T23:51:12.417

sudhAnsu63，对不起，给您带来了麻烦。

将在 csdef 中具有相对路径的项目（如此处的情况）升级到 1.8 SDK 时，您应该在升级日志中看到以下有关相对路径更改的警告。进行此特定更改是为了更好地支持并行构建。

Site 元素的physicalDirectory 属性包含一个相对路径。此路径相对于打包时目标服务定义文件所在的目录。在以前的版本中，此文件位于根项目目录中。在此版本中，默认情况下，此文件位于项目输出目录中。您可能需要更新相对路径以反映目标服务定义文件的新位置。

# android - 在特定页面中，键盘需要太多时间来加载任何解决方案

> ID：13417685
> 
> 赞同：0
> 
> 时间：2012-11-16T13:33:59.610
> 
> 标签：android

我有一个包含近 100 个视图的活动屏幕（编辑文本 .labels、微调器），在该屏幕键盘上加载时间过长。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:40:43.040

具有超过 80 个视图的布局不利于性能。尝试减少观看次数。如果不能，您可以尝试将您的活动一分为二。

您也可以使用 android-sdk/tools/ 中的 HiearchyViewer 工具来查看问题出在哪里。

这是描述如何使用它的链接：http: [//developer.android.com/tools/debugging/debugging-ui.html](http://developer.android.com/tools/debugging/debugging-ui.html)

# c# - 为什么这两个字典上的联合不起作用？

> ID：13417689
> 
> 赞同：1
> 
> 时间：2012-11-16T13:34:06.403
> 
> 标签：c#, linq

代码 ：

```
 Dictionary<string, IList<PuntoMappa>> first = new Dictionary<string, IList<PuntoMappa>>();
    Dictionary<string, IList<PuntoMappa>> second = new Dictionary<string, IList<PuntoMappa>>();
    second = second.Union(first); 
```

似乎我错过了明确的演员表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T13:35:40.830

`second`is a `Dictionary<string, IList<PuntoMappa>>`while 你的返回类型`Union`is `IEnumerable<KeyValuePair<string, IList<PuntoMappa>>>`。您需要将其转换回字典。

```
second = second.Union(first).ToDictionary(kvp => kvp.Key, kvp => kvp.Value); 
```

正如评论指出的那样，如果您有重复的键，这可能不起作用。相反，如果您想将列表与两个字典中的匹配键合并，那么您可以使用`Join`：

```
second = first.Join(second, kvp => kvp.Key, kvp => kvp.Key, (pair1, pair2) => new { Name = pair1.Key, PuntoMappas = pair1.Value.Union(pair2.Value) })
  .ToDictionary(p => p.Name, p => p.PuntoMappas.ToList()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T13:38:11.543

“Union”返回一个 IEnumerable - 而不是字典。

如果你想要一个 IEnumerable - 你需要一个新变量：

```
var newEnumerable = second.Union(first); 
```

或者 - 创建一个新字典：

```
second = second.Union(first).ToDictionary(kv => kv.Key, kv => kv.Value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:39:56.157

`Union`将您的两个字典视为`IEnumerable<KeyValuePair<string, IList<PuntoMappa>>`s - 它实际上只是*“我是否已经返回了这个 KVP，如果没有返回它，否则不要”*，而不是尝试任何巧妙的从匹配键合并列表。

为了实现我相信您正在寻找的东西，您需要类似的东西

```
first.Concat(second)
    .GroupBy(kvp => kvp.Key)
    .ToDictionary(
        g => g.Key,
        g => g.SelectMany(kvp => kvp.Value).ToList()); 
```

# arrays - 如何用其他动态数组或混合值填充动态数组？

> ID：13417695
> 
> 赞同：0
> 
> 时间：2012-11-16T13:34:56.683
> 
> 标签：arrays, ms-access, vba

假设您从数据库中获得了一串数组维度。它看起来像这样：`"[1][2][1]"`现在你有一个对应的值，我们称之为 B

我必须创建一个这种格式的数组：`(x,(B))`

如果另一个值，我们称之为 A 有这个 Dimension-String: `[1][1]`，则数组应填充如下：`(A,(B))`

如果碰巧有另一个名为 C 的值带有字符串`[1][2][2]`，则数组应该如下所示：`(A,(B,C))`

我想到了类似的东西：

```
Redim Array1(1)
Redim Array2(1)
Array1(0) = A
Array2(0) = B
Array2(1) = C
Array1(1) = Array2() 
```

但这是一种动态的方式。在我看来，vba 不支持嵌套数组。不幸的是，多维数组不起作用，因为“维度”不一致。任何帮助表示赞赏

编辑：尝试：

```
c = 0
dim array1() as Variant
redim preserve array1(c)
array1(c) = split(mid("[1][4]",2,len("[1][4]")-2),"][") 
```

它给了我一个类型不匹配的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:20:07.970

这有效：

```
Private Sub testArray()
  Dim DynamicArray1() As Variant
  Dim DynamicArray2() As Variant

  ReDim DynamicArray1(1)
  ReDim DynamicArray2(1)
  DynamicArray1(0) = "A"

  DynamicArray2(0) = "B"
  DynamicArray2(1) = "C"

  DynamicArray1(1) = DynamicArray2
End Sub

Sub test2()
  Dim c As Integer: c = 0
  Dim array1() As Variant
  ReDim Preserve array1(c)
  array1(c) = Split(Mid("[1][4]", 2, Len("[1][4]") - 2), "][")
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:17:46.507

您可以在 VBA 中嵌套数组。您只需要确保父数组是一个变体数组。任何“子”数组都可以是您想要的任何类型。在这种情况下，父数组的元素仍然是变体，但变体恰好是数组。这是一个如何使用它的示例：

```
Dim array1(1)
Dim array2(1 To 2) As String
array2(1) = "Hello"
array2(2) = "World"
array1(1) = array2
'Usage explanation:
'array1(1) returns the first element of parent array
'array1(1)(1) returns the first element of the returned element.
MsgBox array1(1)(1) & " " & array1(1)(2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:28:34.433

您可以始终使用集合/字典而不是数组，它们不必根据需要键入和扩展

# php - 搜索栏上的 Wordpress 图像边框

> ID：13417700
> 
> 赞同：0
> 
> 时间：2012-11-16T13:35:30.627
> 
> 标签：php, javascript, css, wordpress

又被php字符串打脑壳了！我需要在 211 Wordpress 的搜索栏两侧有一个图像边框（我已经添加了一个子主题，所以不用担心）

这是我的尝试

```
<?php echo '<img src="/wp/images/search-side.png" />' . 'get_search_form()' . '<img src="/wp/images/search-side.png" />'; ?> 
```

它不工作

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:41:25.030

您将表单方法输出为文本：

```
<?php echo '<img src="/wp/images/search-side.png" />' . get_search_form() . '<img src="/wp/images/search-side.png" />'; ?> 
```

+ 如果图像不显示，请检查路径是否正确。

# jquery - 如何通过关闭另一个模式弹出窗口来更新模式弹出窗口的内容

> ID：13417701
> 
> 赞同：1
> 
> 时间：2012-11-16T13:35:30.760
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui, modal-dialog

我有两个模态弹出窗口。弹出窗口 1 显示数据集的详细信息。要编辑数据，我使用链接打开另一个弹出窗口（2）。每当弹出窗口 2 关闭时，我想刷新弹出窗口 1 的内容。

页面（index.aspx）->popup1（partial.ascx）->popup2（partial2.ascx）

除了刷新弹出窗口 1 外，一切正常。

我对 javascript 和 jquery 非常陌生，我不知道如何实现这一点。我已经尝试过 location.reload 和 opener.reload，但它只会重新加载整个页面......

这是我的代码：

* * *

弹出窗口 1 的视图：

```
`<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<Change_Request.ViewModels.CheckOfMeasuresViewModel>" %>

<% using (Ajax.BeginForm(new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "CheckOfMeasuresITDialog" }))
   { %>
<%: Html.ValidationSummary(true) %>
<div id="accordion">
    <h3>
        <a href="#" style="margin-left: 20px;">Details</a></h3>
    <div>
        <div>
            <%: Html.ActionLink("Add Measure", "Create", "Measure", new { id = Model.ChangeRequestID, nextView = "./../ChangeRequest2/Partial/_CheckOfMeasuresIT" }, new { @class = "openMeasureDialog", data_dialog_id = "CreateMeasureDialog", data_dialog_title = "Add Measure" })%>
        </div>
        <%: Html.HiddenFor(model => model.ChangeRequestID) %>
        <div class="display-field">
            <table>
                <tr>
                    <th>
                        Submit Date
                    </th>
                </tr>
                <% foreach (var item in Model.measures) %>
                <%{ %>
                <tr>
                    <td>
                        <%: Html.DisplayFor(modelItem => item.submitDate) %>
                    </td>
                 </tr>
                <%} %>
            </table>
        </div>
        <table style="width: 95%; margin-top: 10px;">
            <tr>
                <td>
                    <div class="editor-label">
                        <%: Html.LabelFor(model => model.allMeasuresCompletedIT) %>
                    </div>
                </td>
                <td colspan="3">
                    <div class="editor-field">
                        <%: Html.EditorFor(model => model.allMeasuresCompletedIT) %>
                        <%: Html.ValidationMessageFor(model => model.allMeasuresCompletedIT) %>
                    </div>
                </td>
            </tr>
...
        </table>
    </div>
</div>
<fieldset>
    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
<% } %>` 
```

两个弹出窗口的 Javascript：

```
$(function () {
    $("#accordion").accordion({ active: 0 });
});
$.ajaxSetup({ cache: false });
$(document).ready(function () {
    $(".openMeasureDialog").live("click", function (e) {
        e.preventDefault();
        $("<div></div>").addClass("MeasureDialog").attr("id", $(this).attr("data-dialog-id")).appendTo("body").dialog({
            title: $(this).attr("data-dialog-title"), close: function () {
                $(this).remove()
            },
            position: ["middle", 20],
            resizable: false,
            modal: true,
            width: 850,
            maxheigth: 800,
            midth: 'auto'
        }).load(this.href);
    });
    $(".close").live("click", function (e) {
        e.preventDefault();
        $(this).closest(".MeasureDialog").dialog("close");
        location.reload(true);
    });
}); 
```

弹出窗口 2 的控制器：

```
[HttpPost]
public ActionResult Create(MeasureViewModel _measure, string nextView)
{
    Measure m = new Measure();
    if (ModelState.IsValid)
    {
        db.Measures.Add(m);
        db.SaveChanges();
        if (Request.IsAjaxRequest())
            return PartialView("Partial/_CloseDialog");
        return RedirectToAction("Index"); 
    }
    ViewBag.ChangeRequestID = new SelectList(db.ChangeRequests, "ChangeRequestID", "initiator", _measure.ChangeRequestID);
    if (Request.IsAjaxRequest())
        return PartialView("Partial/_Create", _measure);
    return View(_measure);
} 
```

部分用于关闭弹出窗口 2：

```
<script type="text/javascript">
    $(".MeasureDialog").dialog("close");
</script> 
```

# text - 将变量批量设置为文本文件值

> ID：13417702
> 
> 赞同：1
> 
> 时间：2012-11-16T13:35:36.867
> 
> 标签：text, batch-file

我有一个文本文件，它由每一行的新值组成。行数会有所不同（随着时间的推移而扩展）。

我想在批处理文件中为每个值设置一个变量。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:43:08.430

如果您只想从文件的每一行读取到单独的变量中，请使用它。如果您希望它获取所有行而不是特定行，也可以将其配置为循环，这样您就不必为 100 行放置 100 个命令。

```
setLocal EnableDelayedExpansion
for /f "tokens=* delims= " %%a in (TEXTFILEPATH.txt) do (
set /a N+=1
set v[!N!]=%%a
)
set line1=%v[1]%
set line2=%v[2]%
set line3=%v[3]%
set line4=%v[4]%

echo %line1%
echo %line2%
echo %line3%
echo %line4%

endlocal 
```

确保`endlocal`是**在**使用变量之后。

如果您想写入文本文件中的特定行，这里有一篇文章。

[将批处理变量写入文本文件中的特定行](https://stackoverflow.com/questions/10686261/write-batch-variable-into-specific-line-in-a-text-file/10702194#10702194)

# facebook - 为专辑的测试用途设置自定义隐私

> ID：13417707
> 
> 赞同：1
> 
> 时间：2012-11-16T13:35:55.727
> 
> 标签：facebook, privacy

我已经搜索了论坛，但找不到涵盖此问题的现有问题...

我有一个 Facebook 应用程序并创建了 4 个测试用户 我在这些测试用户之间建立了朋友联系 在我以编程方式执行以下步骤之前，我正在尝试使用 FB 网页...以一个测试用户身份登录，我创建了一个相册我要设置这个相册的隐私：

*   自定义隐私
*   特别的人或者名单
*   然后输入该测试用户的其中一位朋友的测试用户名

问题：FB似乎无法在此对话框/文本框中识别我的测试用户朋友即使我输入朋友的全名并保存，隐私也没有正确保留

有没有人尝试过这样做？谢谢。

# c - 在不使用数组或动态分配的情况下平滑输入数据

> ID：13417711
> 
> 赞同：1
> 
> 时间：2012-11-16T13:36:32.533
> 
> 标签：c, signal-processing, moving-average

我正在尝试在不使用数组或动态分配的情况下平滑输入数据（真正的正数）。可能吗？

结束条件是用户输入负数。例如：

```
 input: 1 2 3 4 5 -1
output: 1.5 2 3 4 4.5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:00:05.787

您可以使用移动平均线来做到这一点。以最简单的形式

```
const int smooth_factor = 3; // the higher the value the more smooth it is.
int samples = 0;
int total = 0;         // make long or long long if danger of overflow.

int smoothed(int new_sample)
{
   if (samples == smooth_factor)
   {
      total -= total / smooth_factor;
      samples -= 1;
   }
   total += new_sample;
   samples += 1;
   return total / samples;
} 
```

在实践中，您可能会通过使用两个平滑因子的幂并使用移位操作而不是除以平滑因子来提高效率。如果您愿意预先设定总样本数和样本数，也可以去掉 if 语句。

```
const int smooth_factor = 16; // the higher the value the more smooth it is.
int total = 129;              // e.g. 129 = sum of first 16 samples

int smoothed(int new_sample)
{
      total -= total >> 4;
      total += new_sample;
      return total >> 4;
} 
```

如果您要对许多值进行平滑处理，那么您可以移除其中一个变化而不会产生显着影响（但我将把它留作练习）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:16:23.977

如果您可以将状态保存在几个变量或寄存器中而不是数组元素中，那么您可以使用 IIR（或递归）过滤器进行实时处理。搜索 DSP 双二阶滤波器，它是 IIR 滤波器，在逐个样本处理数据时只需要 4 个状态变量。

请注意，IIR 滤波器会产生一些与频率相关的非线性相位延迟。“平滑”的输出要到相应输入之后的一些样本才会出现，并且可能会出现形状倾斜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T16:39:53.067

没有记忆就无法“过滤”信号。时期。

使用 n 个内存插槽，可以实现 FIR 滤波器或 IIR 滤波器（或两者的组合）。

如果一个人不喜欢数组表示法`a[5],b[5]`，可以通过声明一个单独的变量数组来改变规则，比如。

```
 static a0=0,a1=0,a2=0,a3=0,   b0=0,b1=0,b2=0,b3=0;

 output = b3* B3 + b2*B2 + b1*B1 + b0* B0; // where B0..B3 are constant coefficients
 b3=b2;b2=b1;b1=b0; b0=new_sample;  // This is FIR filter (Finite impulse response)

 a0=output;
 output += a3*A3 + a2*A2 + a1*A1;   // and this implements an IIR filter
 a3=a2;a2=a1;a1=a0;                 // Infinite impulse response 
```

数组的概念仍然存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T13:46:49.997

如果您的问题是“我可以在不使用数组或动态分配的情况下声明未定义数量的变量吗？”，答案是否定的。

# android - 查找 JSON 数组的列表项索引

> ID：13417713
> 
> 赞同：3
> 
> 时间：2012-11-16T13:36:45.500
> 
> 标签：android, arrays, android-activity

我正在编写一个 Android 应用程序，它显示一个用两行 JSON 文件动态填充的文本视图。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="7dp"
    >
<TextView  
    android:id="@+id/item_name"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:padding="2dp"
    android:textSize="20dp" />
    <TextView  
    android:id="@+id/item_type"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:padding="2dp"
    android:textSize="13dp" />
</LinearLayout> 
```

单击任何列表项时，我需要获取该索引的 JSON 数组内容的其余部分，并将其作为要显示的数组传递给下一个活动。

这是第一个活动 Java：

```
public class TutListActivity extends ListActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String sJSON = "";

    if(sJSON == ""){

        InputStream is = this.getResources().openRawResource(R.raw.data);
        BufferedReader br = new BufferedReader(new InputStreamReader(is));
        String readLine = null;
        StringBuilder sb = new StringBuilder();

        try {

            while ((readLine = br.readLine()) != null) {

            sb.append(readLine);
        }
        sJSON = sb.toString();

        is.close();
        br.close();

        } catch (IOException e) {
            e.printStackTrace();
        }       
    }

    String name = "";
    String type = "";
    String material = "";
    String welding = "";
    String primarybase = "";
    String tipmaterial = "";
    String shape = "";
    String shellcoating = "";

    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    try{
        JSONObject jObject = new JSONObject(sJSON);
        JSONArray  pluginfo = jObject.getJSONArray("parts");

        for(int i=0; i < pluginfo.length(); i++) {
            JSONObject array = pluginfo.getJSONObject(i);

            name = array.getString("name");
            type = array.getString("type");
            material = array.getString("material");
            welding = array.getString("welding");
            primarybase = array.getString("primarybase");
            tipmaterial = array.getString("tipmaterial");
            shape = array.getString("shape");
            shellcoating = array.getString("shellcoating");

            HashMap<String, String> list = new HashMap<String, String>();
            JSONObject e = pluginfo.getJSONObject(i);

            list.put("id",  String.valueOf(i));
            list.put("name", "Plug name: " + e.getString("name"));
            list.put("type", "Type: " +  e.getString("type"));
            mylist.add(list);

            }
        }

    catch(JSONException e){
         Log.e("log_tag", "Error parsing data "+e.toString());
    }

    ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.list_item,
            new String[] { "name", "type" },
            new int[] { R.id.item_name, R.id.item_type });

    setListAdapter(adapter);

    final Intent intent1 = new Intent(getApplicationContext(), TutViewerActivity.class);

    intent1.putExtra("name", name);
    intent1.putExtra("type", type);
    intent1.putExtra("material", material);
    intent1.putExtra("welding", welding);
    intent1.putExtra("primarybase", primarybase);
    intent1.putExtra("tipmaterial", tipmaterial);
    intent1.putExtra("shape", shape);
    intent1.putExtra("shellcoating", shellcoating);

    final ListView lv = getListView();
    lv.setTextFilterEnabled(true);
    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            startActivity(intent1);
        }
    });
} 
```

}

第二个活动Java：

```
public class TutViewerActivity extends ListActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        Bundle extras = getIntent().getExtras();

        String name = extras.getString("name");
        String type = extras.getString("type");
        String material = extras.getString("material");
        String welding = extras.getString("welding");
        String primarybase = extras.getString("primarybase");
        String tipmaterial = extras.getString("tipmaterial");
        String shape = extras.getString("shape");
        String shellcoating = extras.getString("shellcoating");

        TextView itemName = (TextView)findViewById(R.id.item_name);
        TextView itemType = (TextView)findViewById(R.id.item_type);
        TextView itemMaterial = (TextView)findViewById(R.id.item_material);
        TextView itemWelding = (TextView)findViewById(R.id.item_welding);
        TextView itemPrimarybase = (TextView)findViewById(R.id.item_primarybase);
        TextView itemTipmaterial = (TextView)findViewById(R.id.item_tipmaterial);
        TextView itemShape = (TextView)findViewById(R.id.item_shape);
        TextView itemShellcoating = (TextView)findViewById(R.id.item_shellcoating);

        itemName.setText(name);
        itemType.setText(type);
        itemMaterial.setText(material);
        itemWelding.setText(welding);
        itemPrimarybase.setText(primarybase);
        itemTipmaterial.setText(tipmaterial);
        itemShape.setText(shape);
        itemShellcoating.setText(shellcoating);

    }
} 
```

名称和类型字段都填写在第一页中。我需要将其余的信息“材料”-“外壳涂层”传递给我单击的哪个项目，并将其作为数组传递给下一个活动。

日志错误：

```
11-06 00:42:07.585: E/AndroidRuntime(3122): FATAL EXCEPTION: main
11-06 00:42:07.585: E/AndroidRuntime(3122): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mamlambo.tutorial.tutlist/com.mamlambo.tutorial.tutlist.TutViewerActivity}: java.lang.NullPointerException
11-06 00:42:07.585: E/AndroidRuntime(3122):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-06 00:42:07.585: E/AndroidRuntime(3122):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-06 00:42:07.585: E/AndroidRuntime(3122):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-06 00:42:07.585: E/AndroidRuntime(3122):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-06 00:42:07.585: E/AndroidRuntime(3122):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-06 00:42:07.585: E/AndroidRuntime(3122):     at android.os.Looper.loop(Looper.java:137)
11-06 00:42:07.585: E/AndroidRuntime(3122):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-06 00:42:07.585: E/AndroidRuntime(3122):     at java.lang.reflect.Method.invokeNative(Native Method)
11-06 00:42:07.585: E/AndroidRuntime(3122):     at java.lang.reflect.Method.invoke(Method.java:511)
11-06 00:42:07.585: E/AndroidRuntime(3122):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-06 00:42:07.585: E/AndroidRuntime(3122):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-06 00:42:07.585: E/AndroidRuntime(3122):     at dalvik.system.NativeStart.main(Native Method)
11-06 00:42:07.585: E/AndroidRuntime(3122): Caused by: java.lang.NullPointerException
11-06 00:42:07.585: E/AndroidRuntime(3122):     at com.mamlambo.tutorial.tutlist.TutViewerActivity.onCreate(TutViewerActivity.java:62)
11-06 00:42:07.585: E/AndroidRuntime(3122):     at android.app.Activity.performCreate(Activity.java:5008)
11-06 00:42:07.585: E/AndroidRuntime(3122):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-06 00:42:07.585: E/AndroidRuntime(3122):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-06 00:42:07.585: E/AndroidRuntime(3122):         ... 11 more 
```

关于如何轻松做到这一点的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:12:54.407

在任何方法之外实例化您的变量，只要它们不会在您当前的活动中更改值，而您也不需要它们。这允许您在方法之间传递变量值。

```
String material; 
```

这是解析的简化版本`JSONArray`：

```
for(i=0; i < jArray.length(); i++) {
    JSONObject jObject = jArray.getJSONObject(i);
    material = jObject.getString("material");
} 
```

使用`Intent`，将上面显示的“材料”字符串传递到您的下一个活动中：

```
Intent passJSONIntent = new Intent(CurrentActivity.this, NextActivity.class);
passJSONIntent.putExtra("material", material);
startActivity(passJSONIntent); 
```

`Intent`从in 中`NextActivity`检索Extra `onCreate()`：

```
Bundle extras = getIntent().getExtras();
String material = extras.getString("material");
TextView itemType = (TextView)findViewById(R.id.item_type);
itemType.setText(material); 
```

* * *

**编辑：**

好的，现在您所缺少的是`setContentView(R.layout.yourLayout);`：

```
public class TutViewerActivity extends ListActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.yourLayout);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        Bundle extras = getIntent().getExtras();

        //etc... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T13:43:51.503

你能放一个伪代码来解释你想要什么吗？

我不知道你是否在寻找：

```
myList.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> a, View v, int position, long id) {

                Intent intent = new Intent(MYCLASS.this, NEXTACTIVITYCLASS.class);
                Bundle b = new Bundle();
                //TRY TO DECODE JSON
                String myJsonString = decodeMYJSON(MYJSON);

                b.putString("JSON",myJsonString);
                intent.putExtras(b); 
                startActivity(intent);

                                          }}); 
```

# php - 使用字符串作为函数

> ID：13417714
> 
> 赞同：1
> 
> 时间：2012-11-16T13:36:48.650
> 
> 标签：php

我使用一个简单的 __call 函数来动态获取和设置我的属性，并且我正在寻找一种更容易使用的方法：

```
$setKey = "set".ucfirst($key);
$this->$setKey($foo); 
```

有没有办法使用类似的东西

```
$this->"set".ucfirst($key)($foo); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:39:27.213

是的。你必须使用大括号：

```
$this->{"set".ucfirst($key)}($foo); 
```

# php - 如何使用 POST 数据重定向页面

> ID：13417717
> 
> 赞同：0
> 
> 时间：2012-11-16T13:36:50.350
> 
> 标签：php, apache, redirect, post, http-headers

我有两台不同的服务器，我需要将发布数据从一台服务器发送到另一台服务器。但有一些问题我将在下面描述。首先，让我描述一下它们：

*   第一个服务器使用 Apache + PHP，在 Linux 上运行。
*   第二台服务器使用 IIS，在 Windows 上运行。已安装 PHP。

现在，这就是我想要做的事情：

*   在我的第一台服务器上，用户填写表单并将其提交到同一服务器中的文件。
*   在该文件中，我将处理用户填写的数据并将我的用户重定向到我的第二台服务器上的页面。此重定向必须与我的数据处理结果一起作为 POST 请求。
*   仍然在我的秒服务器上，我的用户将完成输入他的信用卡信息。然后，我将处理付款。
*   完成付款处理后（在我的 IIS 服务器上），我将用户重定向回我的第一台服务器中的另一个文件，其中包含更多 POST 数据（付款处理结果）。

不过，我真的不知道如何在**不“回显”表单并再次提交的情况下重定向我的用户。**

我已经对该主题进行了大量阅读，并且设法使我的 apache 使用 cURL 甚至使用`stream_context_create`and发送帖子数据`stream_get_contents`，并检索结果。不过，我想要做的是重定向我的用户以及发布数据，而不是发送请求并显示结果。

这不是[这个问题](https://stackoverflow.com/questions/3548464/php-how-to-redirect-page-with-post-data)的重复，因为我的文件与[q0987](https://stackoverflow.com/users/391104/q0987)不在同一台服务器上，因此无法将我的数据存储在用户的会话中。

我也意识到我不能使用`header`函数来发出请求，因为`header`函数只创建响应头。

我没有足够的权限在 IIS 服务器上安装任何库（如 cURL/libcurl）。我无法在我的第一台服务器上处理付款，看到只允许 IIS 访问 VISAnet 库。我也不能把它全部放在我的 IIS 上。

我正在尝试使用 PHP 来实现这一点，但我什至不知道我正在尝试做的事情是否可行。

我不想写下和提交表单，因为它会弄乱我用户的历史记录（和后退按钮）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:31:31.780

您不能使用 POST 动词进行重定向。我认为您的问题可以通过跨服务器交互来解决：

```
server-1 receives data
server-1 sends data to server-2 and server-2 responds some associated id with that data
server-1 redirects user to server-2 with id in redirect uri query
server-2 receives user's GET request (id is stored in uri query).
server-2 receives data with given id
viola - server-2 knows what server-1 sent to it 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:20:28.887

您所要求的不能按照您描述的方式完成。这是设计使然，并不意味着要那样做。如果可能的话，它将开辟一个全新的漏洞利用世界。

您需要改变方法，或者您误解了一些关于应该如何完成的关键问题。

# php - 如何在 D 日前验证 X 天？

> ID：13417718
> 
> 赞同：-2
> 
> 时间：2012-11-16T13:37:00.437
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)

假设我给出了这样的日期：

```
$Christmas = '2012-12-25';
$Today = date('Y-m-d'); 
```

我想创建这样的`if`语句：

```
if ($Today != 7 days before $Christmas) {
  echo 'Christmas still to far away';
}else ($Today == 7 days before $Christmas) {
  echo 'Christmas will be here within less than a week!';
} 
```

如何创建这样的验证日期？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:01:34.910

这是一个简单的解决方案。这至少会给你一个关于如何做的基本想法。

*像这样的简单事情不需要任何复杂性......用年，月等计算更大的日期需要更复杂的解决方案，通常预制库效果最好。*

请注意，在我的示例中，天数将是浮动的。所以输出给用户需要一些四舍五入。

这个想法是将时间转换为 UNIX 时间戳，减去它并除以一天中的秒数 84,600。快！天数！

```
<?php

$today = time();
$xmas = strtotime("12/25/2012");
// You can also use mktime():
// $xmas = mktime(0, 0, 0, 12, 25, 2012)
$diff = ($xmas-$today);
$days = ($diff/84600);

if($days === 7)
{
    echo '1 week til xmas';
}
if($days > 0 && $days < 7)
{
    echo 'Less than 1 week to xmas';
}
if($days === 0)
{
    echo 'Today is xmas';
}
if($days < 0)
{
    echo 'xmas is long gone...';
}

?> 
```

# struts2 - 在 Struts2 中加载/重新加载资源包

> ID：13417719
> 
> 赞同：1
> 
> 时间：2012-11-16T13:37:04.233
> 
> 标签：struts2

试图在战争之外覆盖 Struts 2 应用程序中的资源包，但这似乎不起作用。我写了我自己的自定义`ResourceControl`覆盖

`newBundle (Loading from my custom location)`,`getTimeToLive (with my own interval)`和`needsReload`方法。

资源包在 Struts2 之外的独立应用程序中运行良好。在 Struts2 中尝试在 ServletContextListener 的 impl 中注册我自己的包

```
public void contextInitialized(ServletContextEvent arg0) {
  ResourceBundle bundle = ResourceBundle.getBundle("myresources", defaultLocale,new MyControl());
  LocalizedTextUtil.setDelegatedClassLoader(bundle.getClass().getClassLoader()); 
} 
```

目标是在特定时间间隔刷新捆绑包并在应用程序中加载新标签而无需重新启动。

问题/问题是，我无法注册我的自定义捆绑包并刷新它。

谢谢！

# javascript - 带有分页和搜索的动态表

> ID：13417721
> 
> 赞同：0
> 
> 时间：2012-11-16T13:37:09.023
> 
> 标签：javascript, jquery, asp-classic

我有一个动态表，只显示 10 条记录并使用分页来显示接下来的 10 条记录。我想要一个搜索功能。我遵循本指南[http://www.vonloesch.de/node/23](http://www.vonloesch.de/node/23)但我只能搜索前 10 条记录。

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:09:55.213

此功能将根据每一行的内容过滤整个表格的行，而不是您提供的链接中的一个单元格。

```
// text => the text to search for
// _id => id of table to filter
// noOfHeaderRows => number of header rows :)
function filterTable( text, _id, noOfHeaderRows ) {

    var table = document.getElementById( _id ), contents, row;

    for (var r = noOfHeaderRows; r < table.rows.length; r++){

        row = table.rows[r];
        contents = row.textContent || row.innerText; 
        contents = contents.toUpperCase();
        text = text.toUpperCase();

        if( contents.indexOf( text ) > -1 ) {
            row.style.display = "";
        } else {
            row.style.display = "none";
        }

    }
} 
```

[在这里](http://jsfiddle.net/bruno/wVvsa/2/)提琴

# java - 使用按钮将 textview 转换为 pdf

> ID：13417722
> 
> 赞同：1
> 
> 时间：2012-11-16T13:37:17.323
> 
> 标签：java, android, textview, itext

我有一个简单的项目，但是当我想提取TextView的内容并生成pdf时就很复杂了。对于我使用 iText Libreri 阅读的内容，但我不知道如何部署代码以将我的 textview 的内容转换为 pdf。我会很感激你的帮助

```
public class MainActivity extends Activity {

    private TextView nombreUsuario;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        nombreUsuario = (TextView)this.findViewById(R.id.tvNombreUsuario);
        nombreUsuario.setText("Claudio");
        nombreUsuario.getText().toString().trim();

    }

     //button onClick
    public void convertirToPdf(View view)
    {

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:08:08.853

```
nombreUsuario.getText().toString().trim(); 
```

将此行放在您的 convertirToPdf() 方法中，如下所示：

```
String data = nombreUsuario.getText().toString().trim(); 
```

# wordpress - WordPress 主题中的 jQuery Masonry 不起作用

> ID：13417725
> 
> 赞同：0
> 
> 时间：2012-11-16T13:37:26.883
> 
> 标签：wordpress, jquery-masonry

我正在尝试在我的首页上合并 jQuery Masonry，但似乎没有加载 4 次 5 次。如果我单击我的徽标，它似乎会加载，但如果我刷新浏览器它不会。

我正在正确排队：

```
function my_scripts() {

  wp_register_script('jquery_masonry', get_template_directory_uri(). '/js/jquery.masonry.min.js', array('jquery'), '2.0.110526' );
  wp_enqueue_script('jquery_masonry');

}
add_action( 'wp_enqueue_scripts', 'my_scripts' ); 
```

然后我在 header.php 中有 wp_head

```
 <script>
    jQuery(document).ready(function($) {
        $('#boxes').masonry({
            itemSelector: '.brick',
        });
    });
  </script> 
```

你可以在我的网站上看到这个问题：http: [//damoncook.net](http://damoncook.net)

不知道可能出了什么问题，因为控制台也没有为我提供任何信息。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:46:47.923

砌体似乎加载得很好，因为你的 div 被赋予了砌体砖类。我收到一个 js 错误“未捕获的 ReferenceError: sri_vars is not defined”，这是从您的 c2ec16da.253941.js 文件中抛出的。也许这就是问题所在。

# youtube-api - 旧 API 上缺少最近的内容

> ID：13417726
> 
> 赞同：0
> 
> 时间：2012-11-16T13:37:28.413
> 
> 标签：youtube-api

我们一直在使用此网址获取新发布的视频：[http ://gdata.youtube.com/feeds/api/videos?author=clubhauseighties](http://gdata.youtube.com/feeds/api/videos?author=clubhauseighties)

我们注意到没有出现 2 个新视频。一个是4天大！

经过研究，我发现使用：[http](http://gdata.youtube.com/feeds/api/videos?orderby=published&author=clubhauseighties) ://gdata.youtube.com/feeds/api/videos?orderby=published&author= clubhauseighties 出现了 2 个新视频之一，而不是最新视频。

改为使用：[http](http://gdata.youtube.com/feeds/api/users/clubhauseighties/uploads?v=2) ://gdata.youtube.com/feeds/api/users/clubhauseighties/uploads?v=2 它们都出现了，但这会破坏我们的解析。

知道为什么会出现这种差异，以及是否有办法获得最新内容而无需从我这边更改解析器？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:03:17.757

前两个查询使用 V1 数据 API - 现在已弃用。您应该重写应用程序以使用 V2 数据 API 或（目前处于试验阶段的）V3 数据 API。

[https://developers.google.com/youtube/v1_deprecation_notice](https://developers.google.com/youtube/v1_deprecation_notice)

# objective-c - 需要一些关于 UITabbarController 的指导

> ID：13417727
> 
> 赞同：0
> 
> 时间：2012-11-16T13:37:40.363
> 
> 标签：objective-c, ios, uitabbarcontroller

我即将使用`UITabBarController`. 在我开始之前，我想清除一些事情 - **1.**如果应用程序有登录屏幕，那么我们如何使用登录屏幕启动应用程序（标签栏不是登录屏幕的一部分，它将在用户成功登录后出现） **2.**以及实际问题也就是说，如果应用程序的主屏幕不是标签栏的一部分（标签栏将显示在主屏幕上，但默认情况下在家中没有选择标签栏按钮）。

我阅读了一些教程，这些教程表明，当应用程序默认启动时，选项卡栏的第一项被选中。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:43:13.417

你的 rootViewController 应该是一个 UINavigationController，LoginScreen 作为 rootViewController，然后你可以导航到一个 UITabBarViewController 作为导航的目标。导航到 TabBar 后，您可以隐藏 navBar：

```
[navController.navigationBar setHidden: YES]; 
```

# android - android GUI 编辑器中的“环绕”

> ID：13417729
> 
> 赞同：-1
> 
> 时间：2012-11-16T13:37:45.340
> 
> 标签：android, eclipse, android-layout

假设我在布局 XML 中有一组视图/视图组。我想用另一个视图组包围它们。Eclipse Android GUI 编辑器是否有自动选项，例如 JAVA 代码的“环绕”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:44:25.137

步骤#1：选择有问题的小部件（例如，通过大纲视图）。

步骤#2：在大纲视图中，右键单击选定的小部件，然后从上下文菜单中选择“包装在容器中”。

第 3 步：选择所需的容器类型并为其指定 ID 值，然后单击“确定”。

# jquery - 在运行时展开/折叠 jQuery Accordion

> ID：13417739
> 
> 赞同：0
> 
> 时间：2012-11-16T13:38:39.580
> 
> 标签：jquery, asp.net, jquery-ui

我已经在`divs`里面包裹了几个，jQuery Accordian。

JS代码：

```
function MakeAccordian() {
    jQuery("#accordian").accordion(
    {
        heightStyle: "content",
        collapsible: true
    });
} 
```

`accordian`父 div 的 id在哪里。

在运行时，我如何展开/折叠折叠内的 div 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:09:08.773

[这](http://api.jqueryui.com/accordion/)是 API 文档。基本上你改变了活动选项：

```
var index = 1; // Opens the second panel
               // If collapsible is true collapses all the rest
$('#accordian').accordion('option', 'active', index); 
```

设置`active`为`false`将折叠所有面板，但需要 collapsible 为真。

# c++ - 相机跟随播放器opengl

> ID：13417740
> 
> 赞同：0
> 
> 时间：2012-11-16T13:38:45.290
> 
> 标签：c++, opengl, camera, rotation, glm-math

我一直在研究这个问题一段时间，但我找不到解决方案。现在我的相机正确地跟随玩家的位置，但是相机的旋转出错了。如果我只使用一次旋转，它会正确运行，比如我只沿 x 轴旋转，那么它可以正常工作。但是第二次我添加了另一个旋转，说“y”出了问题，相机开始朝错误的方向看。

现在我的相机只有一个位置和一个旋转。

这是一些代码。

```
glm::vec4 cameraPosition;

//This gives the camera the distance it keaps from the player.
cameraPosition.x = 0.0;
cameraPosition.y = 0.0;
cameraPosition.z = 20.0;
cameraPosition.w = 0.0;

// mStartingModel is the rotation matrix of the player.
glm::vec4 result = mStartingModel * cameraPosition;

//here I set the camera's position and rotation. The z rotation is given a extra 180 degrees so the camera is behind the player.
CameraHandler::getSingleton().getDefaultCamera()->setPosition(Vector3f(-player->mPosition.x + result.x, -player->mPosition.y + result.y, -player->mPosition.z + result.z), Vector3f(-(player->mRotation.x + 180), -player->mRotation.y, -player->mRotation.z) ); 
```

也知道我正在使用 opengl、c++ 和 glm。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:41:37.083

如果你想要一个简单的行为，使用`gluLookAt`可能是最简单的选择！更多信息[在这里](http://www.opengl.org/archives/resources/faq/technical/viewing.htm)。

看到你使用`glm`，考虑类似

```
glm::mat4 CameraMatrix = glm::LookAt(
    cameraPosition, // the position of your camera, in world space
    cameraTarget,   // where you want to look at, in world space
    upVector        // probably glm::vec3(0,1,0), but (0,-1,0) would make you looking upside-down, which can be great too
); 
```

取自[opengl 教程](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-3-matrices/)上的这个站点。

# jboss5.x - jboss 5.x 禁用 JSESSIONID 参数。仅允许 cookie

> ID：13417741
> 
> 赞同：0
> 
> 时间：2012-11-16T13:38:54.243
> 
> 标签：jboss5.x, jsessionid

有谁知道是否以及如何从 url 参数中禁用 jBoss 5.x 中的 JSESSIONID？我只想使用 cookie。请注意，我正在寻找 jboss 配置或类似的东西。没有java过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:56:38.120

看起来唯一的解决方案是将 url 过滤器放在应用程序中

# ruby-on-rails - Ruby on Rails：更改列表顺序后未显示错误消息

> ID：13417742
> 
> 赞同：0
> 
> 时间：2012-11-16T13:38:54.620
> 
> 标签：ruby-on-rails, ruby, error-handling, controller

我最近请求帮助重新排序复选框列表，[Ruby on Rails: re-order checkbox tag](https://stackoverflow.com/questions/13269961/ruby-on-rails-re-order-checkbox-tag)

我找到了一个很好的答案，然后离开并更改了我的代码。由此，

```
<div class="tech" STYLE="text-align: left;">
  <b>Technologies:</b>
  <style>
    .split { text-align:left; }
  </style>

  <p><ul> 

  <% for technol in Technol.all %> 
   <li class="split"> 
    <%= check_box_tag "project[technol_ids][]", technol.id,  @project.technols.include?(technol) %> 
    <%= technol.tech %> 
   </li> 

  <% end %> 
 </ul> 
 </p> 
```

对此，

```
<div class="tech" STYLE="text-align: left;">
<b>Technologies:</b>
<style>
    .split { text-align:left; }
</style>

<p><ul> 

<% @all_technols.each do |technol| %> 

<li class="split"> 
<%= check_box_tag "project[technol_ids][]", technol.id,  @project.technols.include?(technol) %> 
<%= technol.tech %> 
</li> 

<% end %>
</ul> 
</p> 
```

项目控制器动作新看起来像这样：

```
def new
    @project = Project.new
        @technol = Technol.new(params[:tech])

        @all_technols = Technol.order('tech ASC') 

        tech_ids = params[:technols][:id].reject(&:blank?) unless params[:technols].nil?

        @project_technol = @project.projecttechnols.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end
  end 
```

我现在注意到，如果用户输入一个新项目，并且在我的代码中出现 a `validates_presence_of`or`validates_format_of`标志，则不会显示错误消息，而是会收到以下错误消息：

```
NoMethodError in Projects#create 
line #256 raised: 
undefined method `each' for nil:NilClass 

Extracted source (around line #256): 
253: 
254: <p><ul> 
255: 
256: <% @all_technols.each do |technol| %> 
257: 
258: 
259: 
```

它一定与重新排序技术有关，但我似乎找不到解决办法。希望有人能看到我哪里出错了。提前致谢。

**编辑**

```
def create  
    @project = Project.new(params[:project])
        @project.client = params[:new_client] unless params[:new_client].blank?
        @project.role = params[:new_role] unless params[:new_role].blank?
        @project.industry = params[:new_industry] unless params[:new_industry].blank?
        @project.business_div = params[:new_business_div] unless params[:new_business_div].blank?

if !params[:technols].nil?

            params[:technols][:id].each do |tech|

                if !tech.empty?

                    @project_technol = @project.projecttechnols.build(:technol_id => tech) 

                end
            end

end

    respond_to do |format|
      if @project.save
        format.html { redirect_to @project, notice: 'Project was successfully created.' }
        format.json { render json: @project, status: :created, location: @project }
      else
        format.html { render action: "new" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:41:47.827

在`create`控制器的方法中，或者任何处理提交的动作的名称中，确保`@all_technols`在渲染`new`视图之前再次填充，否则你会得到这个错误！

所以在`create`动作中例如：

```
else

  format.html { @all_technols = Technol.order('tech ASC'); render action: "new" }
  format.json { render json: @project.errors, status: :unprocessable_entity }
end 
```

# asp.net-mvc-3 - 将数据从剃刀视图传递到mvc中的控制器

> ID：13417743
> 
> 赞同：0
> 
> 时间：2012-11-16T13:38:55.437
> 
> 标签：asp.net-mvc-3, c#-4.0, razor, asp.net-mvc-4

我需要将数据从视图传递到 mvc 项目中的控制器。

我已经看到了许多使用 Form 传递给控制器​​并具有提交按钮的示例。

实际上，我必须`@foreach`在 razor 视图中像网格一样填充数据。第一个字段是 a `id`，它是指向相应编辑页面的链接，用于编辑与该 id 对应的字段。我需要点击`id`才能在控制器中使用它来显示相应的编辑页面。这里不需要`submit`按钮。

我也不想显示`id`in `querystring`，因为 id 应该是安全的。

我怎样才能做到这一点 ？请帮忙

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:04:57.037

在 MVC 中无需提交即可将数据获取到控制器的最佳方法是使用[JQuery ajax](http://api.jquery.com/jQuery.ajax/)发送请求并在 JavaScript 中处理响应。您可以使用 POST 请求，以便数据不在查询字符串中，但这不会使其更加安全。保护 HTTP 请求中数据的唯一方法是使用 HTTPS/SSL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:33:24.677

我不确定您是否可以在不将 Id 传递到编辑页面来编辑该特定数据的情况下逃脱。您可以将其发送到会话或缓存对象。这就是我能想到的。我认为使用 ID 并没有真正冒安全风险，但话又说回来，在我完成任何类型的编辑页面的任何地方，我总是通过 Id 并且从来没有遇到过问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:02:47.527

您需要像这样在 globle.asax 文件中创建自定义路由

```
routes.MapRoute(
                "Check", // Route nameRegister
                "Artical", // URL with parameters
                new { controller = "Artical", action = "Index", id = UrlParameter.Optional }  
            ); 
```

我想这会帮助你...

# c++ - 如何生成缺少的#include 文件列表

> ID：13417745
> 
> 赞同：3
> 
> 时间：2012-11-16T13:39:12.473
> 
> 标签：c++, makefile

**背景：**我正在开发一个大型 c++ 项目，该项目具有多个可执行文件和库输出以及一组工作 make 文件（即假设您拥有整个代码库，您可以键入 make 并且它将构建所有库和可执行文件）。

我的问题是我必须部分编译项目，并简单地链接已经为项目的其他部分编译的库。我已经获得了项目其他部分的 lib 文件，但不是所有使用这些库所需的头文件。

**问题：**如何生成我需要请求的文件列表才能成功完成编译，然后链接项目中依赖于项目预编译部分的部分？只需运行 make 文件，我就会收到*第一个*缺失依赖项的错误，但是如何生成*all*的列表？

**我尝试过的事情/示例：**启动 make 脚本以编译和链接`moduleA`。make 搅动了一段时间，然后发出一个它 can't find 的错误，该错误`moduleBCommon.h`来自`moduleAxyz.h`. 它找不到它，因为它在磁盘上不存在...我没有得到文件，必须请求它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T21:51:54.147

如果您使用的是 gcc 编译器，此命令将为您提供缺少的头文件：

```
gcc -M -MG filename.cpp 
```

这列出了所有依赖项：

```
gcc -M filename.cpp 
```

这列出了不属于系统标头的依赖项：

```
gcc -MM filename.cpp 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T14:04:48.847

如果您没有`moduleBCommon.h`，那么您将无法知道它是什么其他标题`#include`，因此我认为在获取任何缺少的标题之前不可能创建整个列表。

为什么不能要求所有与库关联的头文件？负责这些库的人已经因为不提供它们而犯了错误，如果没有人知道哪些头文件与这些库一起使用，那么显然有人搞砸了源代码控制，因此管理层应该容忍来自您的迭代请求。

（除非你的经理在技术上不称职、不懂计算机、逻辑上有挑战的 MBA 类型，这是很有可能的。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T13:45:29.050

您立即关心的是更多未定义的类型、类或函数，而不是丢失的文件。拥有您错过的文件列表只是第一步，因为它们可能会前向声明更多类，如果您需要它们，您将再次没有定义。

我用来检测这种依赖关系的唯一免费工具是[cppcheck](http://code.google.com/p/checkheaders/)。开发似乎已经放慢了很多，并且会产生一些典型的误报，但除此之外，它确实发挥了作用。

# ruby-on-rails - 如果记录的值 == "某物" 使用 Ruby on Rails 删除数据库中的条目

> ID：13417747
> 
> 赞同：0
> 
> 时间：2012-11-16T13:39:30.280
> 
> 标签：ruby-on-rails, database, if-statement, model

我有一个通过控制器获得的变量。我想检查数据库中是否有包含该变量值的记录。如果有，则删除该记录。在我的用户模型中有一个“数字”属性，它是一个字符串。这是我的控制器中的伪代码的样子：

```
from_number = params["From"]

if @user.number == from_number
   # find a record in the DB with that value and delete it
   User.find(from_number)
   @user.destroy
else
   puts "don't delete DB record"
end 
```

我可以在控制器中执行此操作还是应该在模型中执行此操作？如果应该在模型中完成，如何将 from_number 传递给模型进行处理？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:45:59.447

如果某些属性具有特定值，则删除具有特定 id 的用户可以按如下方式完成。

```
User.where(value: 'something').delete_all 
```

请注意，这不会实例化模型，因此不会触发回调。

我不确定这是否是您想要的，因为您的代码片段有点令人困惑，因为您已经拥有用户，再次检索它只是为了销毁它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:53:45.577

使用下面给出的代码，它将删除数据库中的现有用户并调用此实例上的所有回调

```
User.where(number: params["From"]).first.try(:destroy) 
```

所以不需要写“if else”。并且此代码应仅放在控制器中。

# sts-securitytokenservice - 如何在一个 STS 中实现主动端点和被动 STS？

> ID：13417752
> 
> 赞同：1
> 
> 时间：2012-11-16T13:39:45.373
> 
> 标签：sts-securitytokenservice, ws-trust, passive-sts

我一直在努力找出如何在一个 STS 中实现主动 STS 和被动 STS。

那么要求是我需要允许应用程序拥有自己的登录页面，但它们应该通过我创建的自定义 STS 获得身份验证。如果他们使用自己的登录页面，我将不得不使用他们的登录页面和我的 sts 活动端点之间的 WS-Trust 关系添加他们的应用程序，以便他们将凭据传递给 Web 服务并获取 SAML 令牌？

请在如何创建具有被动和主动功能的单个 STS 方面提供任何帮助。

# sql-server-2008 - SQL Server：如何创建数据库中所有数据的脚本

> ID：13417753
> 
> 赞同：0
> 
> 时间：2012-11-16T13:39:46.810
> 
> 标签：sql-server-2008

如何创建特定数据库中所有数据的脚本？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:20:54.763

这是对要做什么的快速总结。

• 在 SQL Server Management Studio 中，连接到您的数据库。

• 在对象浏览器中右键单击数据库名称

• 在上下文菜单中，将鼠标悬停在“任务”上，然后从子菜单中单击“生成脚本”

• 这将为您提供“生成和发布脚本”的弹出窗口

• 阅读并遵循这些步骤。在“设置脚本选项”下，单击“高级”按钮。在一般选项下，最后一个应该是“脚本的数据类型”。默认为仅架构。更改为“数据和架构”以获取表架构和数据。继续按照向导进行操作。

这是 MSDN 中页面的链接：http: [//msdn.microsoft.com/en-us/library/ms178078 (v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms178078(v=sql.100).aspx)

你可以做更多的研究来做什么。

# android - android：链接到字符串数组的复选框

> ID：13417755
> 
> 赞同：0
> 
> 时间：2012-11-16T13:40:04.303
> 
> 标签：android, arrays, checkbox

我正在做一个测验，有 4 种类型的问题（因此有 4 种类型的相应答案）。我为 4 种类型的问题定义了 4 个单独的数组，在 string.xml 中将它们命名为数组 A、数组 B、数组 C 和数组 D。

在布局中，有 5 个复选框供用户选择：All、A、B、C、D。如果用户只勾选 A，则只有 A 类问题将存储到“question_to_be_quized”（QTBQ）字符串数组中。同样，如果用户只选择 B，则 B 将被放入 QTBQ。用户可以勾选多个选项。如果用户勾选全部，所有 4 种类型将被放入 QTBQ。

我的问题是：如何有效地将相应的问题数组放入 QTBQ？我只能想到 if (checkboxA.isChecked) QTBQ.add 数组 A、if (checkboxA.isChecked) 和 (checkboxB.is checkced) QTBQ.add 数组 A 和 B 的愚蠢方式……但这种方式我有列出所有的组合？

如何写出（复选框isChecked）QTBQ.add各自的数组？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:51:37.900

究竟是什么问题？

```
 ArrayList<String> qtbqList = new ArrayList<String>();
    if (cbxAll.isChecked()) { //first, were all items selected?
        qtbqList.add(arrA);
        qtbqList.add(arrB);
        qtbqList.add(arrC);
        qtbqList.add(arrD);
    } else { //if not then check individually
        if (cbxA.isChecked()) qtbqList.add(arrA);
        if (cbxB.isChecked()) qtbqList.add(arrB);
        if (cbxC.isChecked()) qtbqList.add(arrC);
        if (cbxD.isChecked()) qtbqList.add(arrD);
    } 
```

我认为您必须求助于使用 arrayList，而不是数组，因为您事先不知道它的大小。就我个人而言，我什至没有选中所有复选框。或者如果我这样做了，我会在检查时检查所有其他复选框。

# email - 我可以将我的网络主机与我的电子邮件主机分开吗？

> ID：13417761
> 
> 赞同：1
> 
> 时间：2012-11-16T13:40:19.907
> 
> 标签：email, hosting, web-hosting

真的只是一个简单的问题，我只是想知道是否可以将我的电子邮件托管保留在我当前的提供商处并将我的网络主机转移到新的提供商处？

这可能吗？如果是这样，它会有什么问题吗？

# iphone - Google Adsense 关于 Iphone 的浏览器显示问题。'-webkit-text-size-adjust' 用于 iPhone 浏览器上的 google adsense

> ID：13417762
> 
> 赞同：1
> 
> 时间：2012-11-16T13:40:31.603
> 
> 标签：iphone, css, webkit, adsense, mobile-browser

我在 iPhone 浏览器上遇到了 google adsense 的显示问题。标题变小；描述变得更大，等等。有没有办法我可以实现'-webkit-text-size-adjust：none;' 到 Google Adsense（这是放置在 iFrame 上）？还是有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T07:37:46.320

发现解决方案只是在我的样式表上添加了以下几行。

```
@media screen and (max-device-width: 480px){
   body{
      -webkit-text-size-adjust: none;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:50:41.807

如果内容是从另一个域提供的，那么您就无法定位 iframe 中的内容。这是不可能的。

您可以阅读这个较早的问题以获取更多信息：[如何将 CSS 应用于 iframe？](https://stackoverflow.com/questions/217776/how-to-apply-css-to-iframe)

# ant - 使用 ant - scp 上传到多主机

> ID：13417767
> 
> 赞同：2
> 
> 时间：2012-11-16T13:40:40.420
> 
> 标签：ant, scp

我有 3 个网络服务器。我使用 ant 脚本将我的文件上传到这些服务器。我只想上传修改过的文件。我使用那个代码；

```
<!-- APP 37 -->
<target name="2: Copy to Prod">
     <!-- upload the files to the new directory -->
    <echo message="FTP SERVER: ${remote.ftp.server_1}:${remote.ftp.port}" />
    <!-- APP 1 - 37 -->
    <scp todir="${remote.ftp.username}:${remote.ftp.password}@${remote.ftp.server_1}:${remote.ftp.dir}" trust="true">
        <fileset dir=".">
            <modified update="false"/>
        </fileset>
    </scp>

    <echo message="FTP SERVER: ${remote.ftp.server_2}:${remote.ftp.port}" />
    <!-- APP 2 - 38 -->     
    <scp todir="${remote.ftp.username}:${remote.ftp.password}@${remote.ftp.server_2}:${remote.ftp.dir}" trust="true">
        <fileset dir=".">
            <modified update="false"/>
        </fileset>
    </scp>
    <echo message="${remote.ftp.server_1} - ${remote.ftp.dir} transfer completed" />

    <echo message="FTP SERVER: ${remote.ftp.server_3}:${remote.ftp.port}" />
    <!-- APP 3 - 39 -->
    <scp todir="${remote.ftp.username}:${remote.ftp.password}@${remote.ftp.server_3}:${remote.ftp.dir}" trust="true">
        <fileset dir=".">
            <modified>
              <param name="cache.cachefile" value="localdev.cache"/>
            </modified>
        </fileset>
    </scp>

    <echo message="${remote.ftp.server_3} - ${remote.ftp.dir} transfer completed" />
</target> 
```

但是这段代码上传了所有文件。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:21:58.337

我这样解决了这个问题；

```
<fileset dir=".">
    <modified>
      <param name="cache.cachefile" value="localdev.cache"/>
    </modified>
</fileset>

<fileset dir=".">
    <modified>
      <param name="cache.cachefile" value="localdev_2.cache"/>
    </modified>
</fileset>

<fileset dir=".">
    <modified>
      <param name="cache.cachefile" value="localdev_3.cache"/>
    </modified>
</fileset> 
```

谢谢大家

# asp.net - 使用 !IsPostBack 进行 Google 分析

> ID：13417772
> 
> 赞同：1
> 
> 时间：2012-11-16T13:41:04.957
> 
> 标签：asp.net, google-analytics, ispostback

我们在我们的网络表单网站中使用谷歌分析。我在母版页的头部加载了谷歌分析javascript，如下所示......

```
 <%if (!IsPostBack)
  {%>
<script src="Content/google.js" type="text/javascript"></script>
<%} %> 
```

我的问题是，这会影响页面访问时长的统计信息吗？我们正在尝试分析用户在页面上停留的时间。

在我没有使用 !IsPostBack 语句之前，我们发现页面访问量随着每次回帖而增加。所以现在我们应该得到更好的实际页面访问数据，但这会影响访问持续时间统计吗？

# jquery-ui - jQuery UI 选项卡 - “删除”选项卡未按预期工作

> ID：13417774
> 
> 赞同：0
> 
> 时间：2012-11-16T13:41:09.247
> 
> 标签：jquery-ui, tabs, jquery-ui-tabs

我的 jQuery UI 版本是“1.8.24”，我在使用 remove 方法时遇到问题。我有你的标签，据我所知，它们是基于 0 的索引。

我看过其他类似的问题，我正在使用此代码删除第二个选项卡：

```
$("#tabs").tabs('remove','1'); 
```

但最后一个标签也被删除。实际上，无论我使用什么索引：

```
 $("#tabs").tabs('remove','1');
 $("#tabs").tabs('remove','2');
 $("#tabs").tabs('remove','100'); 
```

总是删除最后一个选项卡。

任何想法是什么原因造成的？更有趣的是，我找不到 UI 选项卡文档中描述的这种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:43:54.097

第二个参数不应该是数字吗？jQuery 可能正在评估 String`'1'`并`'2'`成为 integer `0`。

如果您无法控制数据源（例如，您将其从 DOM 中取出），请执行以下操作： `$("#tabs").tabs('remove',parseInt('1'));`

否则只需使用正确的数据类型：

`$("#tabs").tabs('remove', 1);`

# xcode4 - 如何在 xcode 4 上创建 .dylib

> ID：13417778
> 
> 赞同：1
> 
> 时间：2012-11-16T13:41:25.777
> 
> 标签：xcode4, dylib

苹果似乎没有给出如何建立项目的说明

[http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/CreatingDynamicLibraries.html#//apple_ref/doc/uid/TP40002073-SW19](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/CreatingDynamicLibraries.html#//apple_ref/doc/uid/TP40002073-SW19)

在 xcode 3 上似乎很容易做到，只需从框架和库中选择“BSD C 库”，但在 Xcode 4 中没有这样做的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:21:05.193

选择 C/C++ 库项目模板，它位于 Xcode 4 中的框架和库下。单击下一步按钮。从“类型”菜单中选择“动态”以创建动态库。

# c - 在使用 gdb 运行 exucatble 时使用断点时会出现中断

> ID：13417779
> 
> 赞同：0
> 
> 时间：2012-11-16T13:41:31.050
> 
> 标签：c, gdb

我有一个可执行文件需要调试。我在源文件的第 1653 行设置了断点。第 1653 到 1658 行包含一些声明。现在我开始运行程序。中断不是发生在第 1653 行。而是发生在第 1659 行。有人可以告诉我为什么以及如何解决它。

提前致谢.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:43:07.270

您的代码可能不是为调试而构建的。如果在编译时进行了优化，则源代码行可能不再对应于生成代码中的任何内容。

在没有任何优化的情况下构建它，并启用尽可能多的调试信息。如何做到这一点取决于编译器。

如果你不能重新编译可执行文件，你将不得不使用你所拥有的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:09:42.517

正如*unwind*所暗示的，这可能是因为您的程序是使用优化构建的，但它也可能发生在未优化的构建中。编译器在调试信息中包含一个**行表**，该行表告诉调试器哪些源代码行导致了代码的生成。例如，

```
15 puts ("This probably resulted in some code being generated.");
16 
17 const int arrsize = 32;  // code generated?  Maybe, maybe not at -O0.
18 char buf[arrsize];       // code generated?  Unlikely.
19
20 // Now we'll start our real work...
21 
22 puts ("This probably resulted in some code being generated."); 
```

第 15 行或第 22 行的断点可能符合您的预期。但是，就调试器而言，第 16 行到第 21 行完全有可能导致没有生成代码，这些行不存在。如果您在第 18 行设置断点，调试器将在 18 之后查找生成了一些代码的下一个源代码行，并将断点放在那里。

正如*unwind*所说，一旦编译器涉及优化，这个问题就会急剧恶化，因为源代码行可能会以您没有预料到的方式重新排列或完全省略（即使看起来像的源代码行肯定会导致生成一些代码。 .)。调试优化代码的最佳方法是混合源代码和汇编显示，并了解足够的汇编语言以在您逐步完成 IMO 程序时跟进。

# java - 时间序列数据的 Cassandra Map Reduce

> ID：13417785
> 
> 赞同：1
> 
> 时间：2012-11-16T13:41:46.860
> 
> 标签：java, hadoop, mapreduce, cassandra, hector

如何从映射器中访问 Cassandra 列族？具体来说，如何将 map() 方法的参数转换回我期望的 java 类型？

键 {logType} -> {列名：timeUUID，列值：csv 日志行，ttl：1 年}

* * *

# 感谢@Chris & @rs_atl

我成功运行了 hadoop 作业，这里是完整的代码：

```
package com.xxx.hadoop;

import java.io.IOException;
import java.nio.ByteBuffer;
import java.util.Iterator;
import java.util.SortedMap;

import org.apache.cassandra.db.IColumn;
import org.apache.cassandra.hadoop.ColumnFamilyInputFormat;
import org.apache.cassandra.hadoop.ConfigHelper;
import org.apache.cassandra.thrift.SlicePredicate;
import org.apache.cassandra.thrift.SliceRange;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;
import org.apache.thrift.TBaseHelper;

import com.xxx.parser.LogParser;
import com.netflix.astyanax.serializers.StringSerializer;

public class LogTypeCounterByDate extends Configured implements Tool {
    private static final String KEYSPACE = "LogKS";
    private static final String COLUMN_FAMILY = "LogBlock";
    private static final String JOB_NAME = "LOG_LINE_COUNT";
    private static final String INPUT_PARTITIONER = "org.apache.cassandra.dht.RandomPartitioner";
    private static final String INPUT_RPC_PORT = "9160";
    private static final String INPUT_INITIAL_ADDRESS = "192.168.1.21";
    private static final String OUTPUT_PATH = "/logOutput/results";

    @Override
    public int run(String[] args) throws Exception {

        //Configuration conf = new Configuration();

        Job job = new Job(getConf(), JOB_NAME);
        job.setJarByClass(LogTypeCounterByDate.class);
        job.setMapperClass(LogTypeCounterByDateMapper.class);       
        job.setReducerClass(LogTypeCounterByDateReducer.class);

        job.setInputFormatClass(ColumnFamilyInputFormat.class);

        job.setMapOutputKeyClass(Text.class);
        job.setMapOutputValueClass(LongWritable.class);
        job.setNumReduceTasks(1);
        ConfigHelper.setRangeBatchSize(getConf(), 1000);

        /*SlicePredicate predicate = new SlicePredicate().setSlice_range(new SliceRange(ByteBuffer.wrap(new byte[0]), 
                ByteBuffer.wrap(new byte[0]), true, 1));*/
        SliceRange sliceRange = new SliceRange(ByteBuffer.wrap(new byte[0]), 
                ByteBuffer.wrap(new byte[0]), true, 1000);

        SlicePredicate slicePredicate = new SlicePredicate();
        slicePredicate.setSlice_range(sliceRange);

        ConfigHelper.setInputColumnFamily(job.getConfiguration(), KEYSPACE, COLUMN_FAMILY);
        ConfigHelper.setInputRpcPort(job.getConfiguration(), INPUT_RPC_PORT);
        ConfigHelper.setInputInitialAddress(job.getConfiguration(), INPUT_INITIAL_ADDRESS);
        ConfigHelper.setInputPartitioner(job.getConfiguration(), INPUT_PARTITIONER);
        ConfigHelper.setInputSlicePredicate(job.getConfiguration(), slicePredicate);

        FileOutputFormat.setOutputPath(job, new Path(OUTPUT_PATH));

        job.waitForCompletion(true);
        return job.isSuccessful() ? 0 : 1;
    }

    public static void main(String[] args) throws Exception{
        ToolRunner.run(new Configuration(), new LogTypeCounterByDate(), args);
        System.exit(0);
    }

    public static class LogTypeCounterByDateMapper extends Mapper<ByteBuffer, SortedMap<ByteBuffer, IColumn>, Text, LongWritable>
    {

        @SuppressWarnings("rawtypes")
        @Override
        protected void setup(Mapper.Context context){

        }

        @SuppressWarnings({ })
        public void map(ByteBuffer key, SortedMap<ByteBuffer, IColumn> columns, Context context) throws IOException, InterruptedException{
            //String[] lines = columns.;
            String rowkey = StringSerializer.get().fromByteBuffer(TBaseHelper.rightSize(key));  
            Iterator<ByteBuffer> iter = columns.keySet().iterator();
            IColumn column;
            String line;
            LogParser lp = null;

            while(iter.hasNext()){
                column = columns.get(iter.next());
                line = StringSerializer.get().fromByteBuffer(TBaseHelper.rightSize(column.value()));
                lp = new LogParser(line);               
                context.write(new Text(rowkey + "\t" + "LineCount"), new LongWritable(1L));
                context.write(new Text(rowkey + "\t" + "Minutes"), new LongWritable(lp.getTotalDuration()));
            }
        }
    }

    public static class LogTypeCounterByDateReducer extends Reducer<Text, LongWritable, Text, LongWritable>
    {           

        public void reduce(Text key, Iterable<LongWritable> values, Context context) throws IOException, InterruptedException{
            long total = 0;
            for(LongWritable val : values){
                total += val.get();
            }
            context.write(key, new LongWritable(total));
        }
    }               
} 
```

* * *

```
ConfigHelper.setRangeBatchSize(getConf(), 1000);

        /*SlicePredicate predicate = new   SlicePredicate().setSlice_range(new SliceRange(ByteBuffer.wrap(new byte[0]), 
                ByteBuffer.wrap(new byte[0]), true, 1));*/
        SliceRange sliceRange = new SliceRange(ByteBuffer.wrap(new byte[0]), 
                ByteBuffer.wrap(new byte[0]), true, 1000);

        SlicePredicate slicePredicate = new SlicePredicate();
        slicePredicate.setSlice_range(sliceRange); 
```

上面的代码只为每一行提供 1000 列给映射器，因为我想每次以 1000 列的批次为每一行提供所有列。

请有人帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T14:09:24.610

给定参数：

```
ByteBuffer key;
SortedMap<ByteBuffer, IColumn> columns; 
```

你会使用：

```
String rowkey = StringSerializer.get().fromByteBuffer(TBaseHelper.rightSize(key)) 
```

获取反序列化的键值。请注意，这里的假设是行键是一个字符串。如果是其他类型，则必须使用适当的序列化程序类。

要获取列值，请执行以下操作：

```
Iterator<ByteBuffer> = columns.keySet().iterator(); 
while (iter.hasNext()) {
    IColumn col = columns.get(iter.next()); 
    xxx colVal = xxxSerializer.get().fromByteBuffer(TBaseHelper.rightSize(col.value()));
} 
```

其中 xxx 是列值的 Java 类型，xxxSerializer 是对应的序列化器。

顺便说一句，TBaseHelper 类用于将内部字节数组中的值的偏移量更正为零，从而强制执行序列化程序实现所做的假设。

所以还有一件事......如果您正在检索时间序列，那么每一列都是它自己的时间序列值，您需要在迭代中包含适当的映射器逻辑（如某种数学运算和写入上下文）循环遍历列。相反，如果您有一个更静态的列族（更像传统的 sql 表），那么您可能会对整行的上下文进行一次写入。

# mysql - 使用 JOIN 和 NOT LIKE 更正 SQL 查询

> ID：13417787
> 
> 赞同：1
> 
> 时间：2012-11-16T13:41:50.123
> 
> 标签：mysql, sql

我需要一个 SQL 查询来显示用户（uid）尚未**投票的****所有民意调查**。

 **例子：

*   有 pid 1、2 和 3
*   uid 1 在投票 1 和 3 中投票

所以我需要向我显示他还没有投票的 pid 2 的查询。

这是2张桌子：

```
CREATE TABLE IF NOT EXISTS `poll` (
`pid` int(11) NOT NULL AUTO_INCREMENT,
`name` varchar(200) NOT NULL,
`description` text NOT NULL,
`deadline` datetime NOT NULL,
PRIMARY KEY (`pid`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;

CREATE TABLE IF NOT EXISTS `votes` (
`vid` int(11) NOT NULL AUTO_INCREMENT,
`pid` int(11) NOT NULL,
`uid` varchar(20) NOT NULL,
`tid` int(11) NOT NULL,
`votes` int(11) NOT NULL DEFAULT '1',
PRIMARY KEY (`vid`),
KEY `pcid` (`pid`,`uid`),
KEY `uid` (`uid`),
KEY `tid` (`tid`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=19 ; 
```

//编辑这应该使它更清楚

表的约束`votes`

```
ALTER TABLE `votes`
ADD CONSTRAINT `votes_ibfk_3` FOREIGN KEY (`pid`) REFERENCES `poll` (`pid`) ON DELETE CASCADE ON UPDATE CASCADE,
ADD CONSTRAINT `votes_ibfk_4` FOREIGN KEY (`uid`) REFERENCES `user` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE,
ADD CONSTRAINT `votes_ibfk_5` FOREIGN KEY (`tid`) REFERENCES `teams` (`tid`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

可以smbdy请帮助我。我想这是与 WHERE 而不是 LIKE 的连接，但我就是不明白。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:00:41.697

好的，这是我的第一个答案。我可能有更多的可能性，但这应该可行。

```
SELECT * FROM Poll WHERE pid NOT IN (SELECT pid FROM votes WHERE uid = 1); 
```

我不是 100% 确定这会起作用，因为我不知道您尝试从中检索数据的数据库类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:51:50.593

```
SELECT
    [poll].*
FROM
    [poll]
    LEFT OUTER JOIN [votes]
        ON [votes].[pid] = [poll].[pid]
        AND [votes].[uid] = @uid
WHERE
    [votes].[vid] IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:49:45.810

```
Select
  p.*
From
  poll p
Where
  Not Exists (
    Select 
      'x'
    From
      Votes v
    Where
      v.pid = p.pid and
      v.uid = <myuidvalue>
  ) 
```**

# go - CGO；C函数有int指针参数，如何传递正确的类型？

> ID：13417789
> 
> 赞同：2
> 
> 时间：2012-11-16T13:41:51.907
> 
> 标签：go, cgo

目前我正在使用 Cgo 从 Go 调用 C 函数。我正在尝试在 Go中重新创建[“阅读照片”示例。](http://libccv.org/galaxy-guide/)

然而，一个关于 C 函数的函数需要一个`int* len`参数（额外的问题；是否与 相同`int *len`？）。当我读到这篇文章时，这是一个指向整数的指针。有问题的函数是[`ccv_write`](http://libccv.org/lib/ccv-io/)libccv 库的。它的完整签名是：

`int ccv_write(ccv_dense_matrix_t* mat, char* out, int* len, int type, void* conf)`

相关代码片段如下：

```
type Image struct {
    image *C.ccv_dense_matrix_t
}

func main() {
    image := new(Image)

    /* ... snip ... */

    dst := C.CString("black_and_white_painting.jpg")
    defer C.free(unsafe.Pointer(dst))
    x := 0 // <- perhaps var x int ?
    C.ccv_write(image.image, dst, (*C.int)(&x), C.CCV_IO_PNG_FILE, 0)
} 
```

上面的示例生成以下编译时错误：`cannot convert &x (type *int) to type *_Ctype_int`

关于如何传递正确论点的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T14:07:21.987

这似乎对我有用：

```
package main

/*

void foo(int *len) { *len = 1234; }

*/
import "C"

func main() {
        var x C.int
        C.foo(&x)
        println(x)
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-16T17:38:26.010

这里的问题是你有两种不同的类型。你有一个`int`由你的 Go 编译器`C.int`定义的，由你的 C 编译器定义的。根据编译器和架构，这些可能是相同的大小。但是，它的大小很可能`int`是 64 位和`C.int`32 位。

为了让编译器强制执行类型安全，它要求您进行显式转换或在初始化时定义类型。

在您的示例中，您执行以下操作：`x := 0`. 这与`x := int(0)`. `int`是暗示的。相反，您可以执行`x := C.int(0)`.

但是，我认为“更清洁”的方法是做 jnml 推荐的：`var x C.int`. 这完全一样，但看起来更好。

* * *

稍后，您很可能希望将其转换`C.int`回`int`. 这很容易通过转换来完成。

```
y := int(x) 
```

这将转换`x`为一个`int`，然后将该值复制到新初始化的变量`y`中。

* * *

Bonus Anwser：`int* len`确实与`int *len`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T14:53:09.933

你需要一个`unsafe.Pointer`演员表。

```
C.ccv_write(image.image, dst, (*C.int)(unsafe.Pointer(&x)), C.CCV_IO_PNG_FILE, 0) 
```

# java - SWT：显示菜单项的工具提示

> ID：13417790
> 
> 赞同：2
> 
> 时间：2012-11-16T13:42:00.917
> 
> 标签：java, swt

根据[这个问题](https://stackoverflow.com/questions/3373777/os-x-where-to-show-tooltips-for-menu-items)，如果想向菜单项添加更多信息，则必须显示工具提示。如何用 SWT 做到这一点？似乎没有 API，在`Menu`not in 中也没有`MenuItem`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:56:59.527

There is no direct API to show tooltip on `Menu` or`MenuItem`. You should be able to show `org.eclipse.swt.widgets.ToolTip` by adding listener on `SWT.Arm` event on `MenuItem`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-25T01:18:41.823

> 公共无效 setToolTipText（字符串工具提示）

`org.eclipse.swt.widgets.MenuItem`从 3.104 版本开始，方法被添加到。

# c# - NHibernate Schema Export 更改了错误的表（NH 中可能存在错误？）

> ID：13417799
> 
> 赞同：0
> 
> 时间：2012-11-16T13:42:44.080
> 
> 标签：c#, sql, nhibernate, database-schema, mapping-by-code

我使用 NHibernates 模式导出功能来创建和更新数据库。

然而有时（似乎更频繁地发生在慢速机器上）NHibernate 会生成不正确的更改表脚本。我禁用了模式导出并记录语句以调试问题。

此问题随机发生并影响随机不同的表。

**一个示例脚本是：`alter table dbo.VlogNet_NumberGroups add DKS_P03_Artikelgruppe BIGINT`**

然而，“DKS_P03_Artikelgruppe”列属于一个完全不同的映射，更糟糕的是，这个映射甚至被配置为`NHibernate.Mapping.ByCode.SchemaAction.None`.

编辑：澄清我的问题： **为什么 NHibernate 会随机混合不同的映射并发出破坏我的数据库的更改表命令。**

映射：

```
公共类 NumberGroupMap : HierachicalEntityMap<NumberGroup>
{
    公共 NumberGroupMap()
    {
        属性（x => x.StartNumber）；
        属性（x => x.EndNumber）；
        属性（x => x.LastGeneratedNumber）；
        属性（x => x.StartTime）；
        属性（x => x.LifeSpan）；
        属性（x => x.ResetOnNewYear）；
        属性（x => x.IsResetable）；
        属性（x => x.WarningAtPos）；
    }

    公共覆盖字符串表名
    {
        得到{返回“VlogNet_NumberGroups”；}
    }
}

```

`HierachicalEntityMap<T>`派生自`ClassMapping<T>`，它只是添加了一些属性（ID、名称、父级）并将 TableName 设置为相应属性的值。

该字段`DKS_P03_Artikelgruppe`源自此映射：

```
公共类 DksCarrierInformationMap : ClassMapping<DksCarrierInformation>
{
    公共常量字符串 EntityTable = "DKS_Liste";

    公共 DksCarrierInformationMap()
    {
        表（实体表）；
        SchemaAction（NHibernate.Mapping.ByCode.SchemaAction.None）；

        Id(x => x.Auto_ID, x => x.Generator(Generators.Identity));
        属性(x => x.Versanddaten_ID, x => { x.NotNullable(true); x.Unique(true); });

        #region 发票地址
        // ... 为简洁起见
        #endregion

        #region 标签信息

        // ... 为简洁起见

        #endregion

        #region EDI

        // ... 为简洁起见

        组件（x => x.DKS_P01，x =>
                                      {
                                          x.Property(c => c.Artikelgruppe, c => c.Column("DKS_P01_Artikelgruppe"));
                                          x.Property(c => c.Anz_Teile, c => c.Column("DKS_P01_Anz_Teile"));
                                          x.Property(c => c.Anz_Buegel, c => c.Column("DKS_P01_Anz_Buegel"));
                                          x.Property(c => c.Gewicht, c => c.Column("DKS_P01_Gewicht"));
                                          x.Property(c => c.Type, c => { c.Column("DKS_P01_ArtikelTyp"); c.Type>(); c.Length(10); });
                                          x.Property(c => c.Bezeichnung, c => c.Column("DKS_P01_Bezeichnung"));
                                      });

        // ... 为简洁起见

        组件（x => x.DKS_P03，x =>
                                      {
                                          x.Property(c => c.Artikelgruppe, c => c.Column("DKS_P03_Artikelgruppe"));
                                          x.Property(c => c.Anz_Teile, c => c.Column("DKS_P03_Anz_Teile"));
                                          x.Property(c => c.Anz_Buegel, c => c.Column("DKS_P03_Anz_Buegel"));
                                          x.Property(c => c.Gewicht, c => c.Column("DKS_P03_Gewicht"));
                                          x.Property(c => c.Type, c => { c.Column("DKS_P03_ArtikelTyp"); c.Type>(); c.Length(10); });
                                          x.Property(c => c.Bezeichnung, c => c.Column("DKS_P03_Bezeichnung"));
                                      });

        // ... 为简洁起见

        组件（x => x.DKS_P20，x =>
                                      {
                                          x.Property(c => c.Artikelgruppe, c => c.Column("DKS_P20_Artikelgruppe"));
                                          x.Property(c => c.Anz_Teile, c => c.Column("DKS_P20_Anz_Teile"));
                                          x.Property(c => c.Anz_Buegel, c => c.Column("DKS_P20_Anz_Buegel"));
                                          x.Property(c => c.Gewicht, c => c.Column("DKS_P20_Gewicht"));
                                          x.Property(c => c.Type, c => { c.Column("DKS_P20_ArtikelTyp"); c.Type>(); c.Length(10); });
                                          x.Property(c => c.Bezeichnung, c => c.Column("DKS_P20_Bezeichnung"));
                                      });

        #endregion
    }
}
```

设置 NHibernate SessionFactory 的代码：

```
var modelMapper = new ModelMapper();
foreach（_assembliesToScan 中的 var 程序集）
{
    Logger.DebugFormat(" * {0}", 程序集);
    modelMapper.AddMappings(assembly.GetTypes());
}

Logger.InfoFormat("添加 {0} 类映射", _classMaps.Count);
foreach（_classMaps 中的 var 类型）
{
    Logger.DebugFormat(" * {0}", type);
    modelMapper.AddMapping(type);
}

var cfg = 新配置（）；

配置NHibernate（cfg，设置[类型]）；
配置环境（cfg）；
cfg.AddMapping(modelMapper.CompileMappingForAllExplicitlyAddedEntities());

验证架构（cfg）；

SessionFactory = cfg.BuildSessionFactory();

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-18T09:47:06.190

听起来可能与此有关？

[NHibernate - 查询列错误](https://stackoverflow.com/questions/21382756/nhibernate-wrong-columns-on-queries/24753903)

从那以后，NHibernate 源代码（v 3.3.4）得到了更新，应该已经解决了这个问题。

有关更多详细信息，请参阅：[https ://groups.google.com/forum/#!topic/nhusers/BZoBoyWQEvs](https://groups.google.com/forum/#!topic/nhusers/BZoBoyWQEvs)

# django - Django：错误的 IntegrityError 处理会导致“数据库已锁定”错误吗？

> ID：13417800
> 
> 赞同：1
> 
> 时间：2012-11-16T13:42:46.280
> 
> 标签：我总是在捕获完整性错误, sqlite3, , django, sqlite

[我总是在捕获完整性错误](/questions/tagged/integrityerror "显示标记为“完整性错误”的问题")（）异常的页面之后得到一个锁定的[sqlite3](/questions/tagged/sqlite3 "显示标记为“sqlite3”的问题")数据库。锁定可能是由错误的异常处理引起的吗？如果可以，正确的处理方式应该是什么？`IntegrityError`

目前，我只是捕获异常并为流式视图打印一行：

```
try:
    Model(pk='key').save()
    Model(pk='key').save()
except IntegrityError:               
    yield 'Already existing in the database' 
```

后来，在另一页上，当我尝试 a`Model.objects.all().delete()`我收到`DatabaseError: database is locked`.

这不是性能问题，因为我只是在测试服务器上运行它，并且锁定一直存在，直到我重新启动服务器。我正在考虑锁定在数据库上的线程，可能是因为在异常之后我应该释放某种资源。

# asp.net - 重新创建 ChatR 失败。SignalR 不会启动集线器

> ID：13417801
> 
> 赞同：1
> 
> 时间：2012-11-16T13:42:48.743
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-4, signalr, signalr-hub

我正在尝试控制 SignalR 并直接进入[ChatR](https://github.com/vgheri/ChatR/tree/master/ChatR)

我首先创建了一个 mvc3 应用程序并写下了我自己的实现，同时保留了 git 中代码的基本功能。它没有成功，所以我撤销了我自己的更改，最终得到了一个 1:1 的 ChatR 副本，没有任何我的改进 - 仍然没有工作。所以我将源代码复制/粘贴到我的项目中，它仍然不会启动。

Chrome 给了我以下 2 个 javascript 错误：

```
Uncaught TypeError: Object function ( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
} has no method 'hubConnection' hubs:154
Uncaught TypeError: Cannot call method 'start' of undefined localhost:174 
```

我读过，Jquery 可能在代码中被引用两次。首先在 SignalR.js 被引用之前和在 SignalR 之后一次，使对象无效，但事实并非如此。

然后我下载了 KsigDo，看看我是否可以在一个完全不相关的项目上重新创建问题。再次弹出上述错误。

底线是：ChatR 源代码已下载 - 有效。我自己的命名空间中的 ChatR 副本没有

我已经在 vs2010 专业版/vs2012 web 中使用 mvc3 和 4 进行了尝试。

希望各位好心人能帮帮我。亲切的问候。

# sql - IQueryable 上的扩展没有对 SQL 的转换

> ID：13417804
> 
> 赞同：1
> 
> 时间：2012-11-16T13:42:58.233
> 
> 标签：sql, linq, iqueryable

我现在已经为一个简单的问题摆弄了整整两天。

我有一个包含 Product 实体和 ProductLocationHistory 实体的数据库。ProductLocationHistory 具有对 Storehouse、Contact 或 Relation 的引用。每次移动产品时，它都会获得一个新条目，因此可以追踪产品的过去。因此，当前位置是由 ProductLocationHistory 的 DateCreation 字段确定的最后一个条目。

一个例子：

```
var storehousesWithBorrowedItems = productService.GetAllProducts()
    .Select(p => p.ProductLocationHistories
        .SingleOrDefault(plh => plh.DateCreation == p.ProductLocationHistories.Max(grp => grp.DateCreation)))
    .Select(plh => plh.Storehouse)
    .Distinct(); 
```

这些都是目前有产品的仓库。

当然，在我需要确定产品的当前位置时，将其写在代码中是非常不方便的。由于可能存在一致性问题，我认为完全不希望引用 Product 中的当前 ProductLocationHistory。我更喜欢这样的东西：

```
Product.ProductLocationHistories.Current(); 
```

所以我尝试了：

```
public static ProductLocationHistory Current(this EntitySet<ProductLocationHistory> plhs)
    {
        return plhs.SingleOrDefault(plh => plh.DateCreation == plhs.Max(grp => grp.DateCreation));
    } 
```

这不适用于可查询，因为我得到“当前不支持对 sql 的翻译”，并且由于 Product 和 ProductLocationHistory 的组合通常是查询的“开始”，我想保持 IQueryable 而不是立即到 IEnumerable 并进行查询为每个产品确定当前位置！更不用说之后的其他内容了......经常使用任何实体的当前日志条目，只要 .Current() 函数工作并保持可查询，它的复杂程度并不重要。我曾希望我的 .Current(...) 函数能够工作，因为底层代码是可查询的，但我仍然遇到异常。当代码像第一个示例中那样内联时，我没有得到异常。

我已经经历了诸如 Func、ProductLocationHistory>> 以及 Expression<...> 之类的可能性，但我找不到我正在寻找的示例。Product.CurrentProductLocationHistory() 类型的解决方案可能会更好。绝对最佳的解决方案将更加通用，形式如下：

```
Current<T> (IQueryable<T> collection, string field) { return entity with max field of collection } 
```

非常感谢您的帮助，我已经尝试了很长时间，并且我确信它必须是可能的，因为 LINQ 本身的内部功能 - Any，First，Count，Max - 如果需要也可以查询。

**更新**

目前，以下工作：

```
 Expression<Func<Product, ProductLocationHistory>> expression = IQueryable.Current(null);
        var ken = productService.GetAllProducts()
            .Where(p => p.OnLoan)
            .Select(expression)
            .Where(plh => plh.Storehouse != null)
            .Select(plh => plh.Storehouse)
            .Distinct();

public static Expression<Func<Product, ProductLocationHistory>> Current(this EntitySet<ProductLocationHistory> productLocationHistories)
    {
        Expression<Func<Product, ProductLocationHistory>> expression = p => p.ProductLocationHistories
                                         .SingleOrDefault(plh => plh.DateCreation == p.ProductLocationHistories.Max(plhs => plhs.DateCreation));
        return expression;
    } 
```

朝着正确的方向迈出了一步，但我还没有完全满意。我希望能够使用 p.ProductLocationHistories().Current() 所以我的任务继续。

已经感谢基里尔了！这是我第一次看到 C# 代码翻译成 SQL！朝着正确方向迈出的一大步！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T08:08:45.023

您可以使用表达式设置字段：

```
Expression<Func<ProductLocationHistory, bool>> currentSelector = plh => plh.DateCreation == p.ProductLocationHistories.Max(grp => grp.DateCreation) 
```

并在任何地方使用它：

```
var storehousesWithBorrowedItems = productService.GetAllProducts()
    .Select(p => p.ProductLocationHistories
        .SingleOrDefault(currentSelector ))
    .Select(plh => plh.Storehouse)
    .Distinct(); 
```

# c# - UpdatePanel 直到功能完成后才更新

> ID：13417811
> 
> 赞同：1
> 
> 时间：2012-11-16T13:43:17.287
> 
> 标签：c#, ajax, asp.net-ajax

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>

        <asp:Button ID="btnBackup" runat="server" Text="Backup" 
            onclick="btnBackup_Click" />

    </ContentTemplate>
</asp:UpdatePanel> 
```

这个想法是，当用户单击按钮时，它被禁用，调用一个函数，然后在函数结束时再次启用按钮：

```
protected void btnBackup_Click(object sender, EventArgs e)
{
    btnBackup.Enabled = false;
    UpdatePanel1.Update();
    doSomething();
} 
```

但是，在 doSomething() 完成之前，该按钮不会被禁用。如果我注释掉 doSomething()，那么当我单击该按钮时，它会立即被禁用。

有没有办法在函数调用之前禁用按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:49:27.883

您可以使用 OnClientClick 属性

```
<asp:Button ID="btnBackup" runat="server" Text="Backup"  OnClientClick = "this.disabled = true;" onclick="btnBackup_Click" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:09:27.397

需要两件事之一：

*   定义 UpdatePanel 的触发器
*   将按钮设置为 AutoPostback

# magento - magento 中显示的标价错误

> ID：13417813
> 
> 赞同：1
> 
> 时间：2012-11-16T13:43:23.277
> 
> 标签：magento

我是 magento 电子商务的新手。我有这个问题：

![错误的价格](../Images/96e1beae37627b4136e64afd88484e4b.png)

此处，27 元作为价格显示（在商店页面中）。其中，产品页面显示实际价格：￥27,300

这可能是什么原因。我搜索了互联网和 stackoverflow，但找不到任何东西。

![在此处输入图像描述](../Images/fe078351b62710f06e255dc421624a24.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:10:54.147

我自己解决了这个问题。我是这样做的：

我首先从magento -> configuration -> debug 中查看了模板路径提示。然后我从哪个模板页面知道显示的价格。然后，那里；我变了：

```
<p class="listprices"><?php echo Mage::helper('core')->currency(number_format($_product->getPrice(),2));  ?> </p> 
```

这到

```
<p class="listprices"><?php echo Mage::helper('core')->currency($_product->getPrice());  ?> </p> 
```

问题解决了 ：）

# python - 交换字符串输入参数中的字母大小写

> ID：13417816
> 
> 赞同：5
> 
> 时间：2012-11-16T13:43:36.980
> 
> 标签：python, uppercase, lowercase

我想在 Python 中编写一个函数，该函数将具有大小写字母的字符串作为参数，并将大写字母转换为小写字母，将小写字母转换为大写字母。

例如：

```
>>> func('DDDddddd')
'dddDDDDD' 
```

我想用字符串来做，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-16T13:55:16.320

**编辑**- 比我原来的答案简单得多，并且支持 ASCII 和 unicode。感谢评论者。

```
a = 'aBcD'
a.swapcase()
>> AbCd 
```

**原始答案 - 无视**

```
a = 'aBcD'
''.join(map(str.swapcase, a))
>> AbCd 
```

这会将`str.swapcase()`函数映射到 string 的每个元素`a`，交换每个字符的大小写并返回一个字符列表。

`''.join()`将列表中的每个字符连接成一个新字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:47:31.323

您应该考虑`string.maketrans`创建一个可以与`str.translate`. 其他可能有用的常数是`string.ascii_lowercase`和`string.ascii_uppercase`。

# twitter-bootstrap - 在滚动条上取消固定 Twitter 引导程序的词缀

> ID：13417818
> 
> 赞同：5
> 
> 时间：2012-11-16T13:43:41.050
> 
> 标签：twitter-bootstrap

我在侧边栏上使用 Twitter bootstrap 的词缀，在传统的网站布局（页眉-内容和侧边栏-页脚）上。

在某个滚动点上，我希望它从页面上取消固定并返回到它的原始位置：静态，因此它不会与页脚重叠。我试图只用 CSS 来摆弄它，但由于 .affix 将元素位置设置为固定它会弄乱侧边栏的高度。

我认为它与JS有关，可能会删除词缀类。任何解决方案/建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T13:33:48.030

`data-offset-bottom`为此目的使用属性：

```
<div class="sidebar" data-spy="affix" data-offset-top="50" data-offset-bottom="300">
  Sidebar
</div> 
```

这是示例：http: [//jsfiddle.net/NwwKQ/120/](http://jsfiddle.net/NwwKQ/120/)

# python - python：将h&m的两个字符串转换为24小时时间格式

> ID：13417819
> 
> 赞同：3
> 
> 时间：2012-11-16T13:43:43.130
> 
> 标签：python, date, methods, time, module

我有一个需要两个变量的方法：

*   当前时间
*   分钟

方法很简单。用户输入两个值，第一个是字符串，例如。'23:01' 第二个是整数，例如50。所以该方法通过将两者相加来计算新时间，因此新时间应该是23:51。我让它工作，但是当时间变成 24:01 + 60 时，它变成了 25:01，这是一个不正确的时间。我如何简单地使用python中的时间方法来添加时间？到目前为止，这是我的代码，它引发了一个错误

```
import time
class timeCalc(object):
    def nextTime(self, time, minutes):
        t = time.split(':')
        mins = int(t[0]) * 60 + int(t[1]) + minutes
        h = str(mins/60)
        m = str(mins%60)
        if len(h) == 1:
            h = '0' + h
        if len(m) == 1:
            m = '0' + m
        nTime = time.strptime(h + ':' + m, "%H:%M")
        print nTime

ts = timeCalc()
ts.nextTime('23:01',60) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:06:39.960

您不需要以这种方式解析时间参数，您可以执行以下操作：

```
Import datetime
class timeCalc(object):
    def nextTime(self, time, minutestoadd):
        base_time = datetime.datetime.strptime(time, "%H:%M")
        minutesobj = datetime.timedelta(minutes = minutestoadd)
        newtime = basetime + minutesobj
        print newtime.time() 
```

第 4 行：
将 'time' 参数格式化为格式为 %H:%M 的日期时间对象，称为 base_time
第 5 行：
将 minutestoadd 参数转换为兼容的对象格式以添加
第 6 行：
两个日期时间对象值的总和
第 7 行:
以 23:40:00 等格式打印结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:45:56.710

```
from datetime import datetime, timedelta

def nextTime(time, minutes):
    return (datetime.strptime(time, '%H:%M') + timedelta(minutes=minutes)).time()

nextTime('23:01', 60) 
```

`datetime.time(0, 1)`可以打印的返回：

```
nextTime('23:01', 60).strftime('%H:%M') 
```

并返回`00:01`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:50:23.423

```
time.localtime(currenttime + 45 * 60)) 
```

物联网早点离开你的工作试试这个

# c# - 初始化列表<>

> ID：13417832
> 
> 赞同：2
> 
> 时间：2012-11-16T13:44:41.137
> 
> 标签：c#, list, generics, initialization

当我使用这条线时，我得到一个错误：

```
tradesThisBar=new List<Traid>; 
```

错误： *新表达式在类型后需要 ()、[] 或 {}*

我该如何初始化它？我在声明中初始化它，但我需要重置它。

另外，这条线会工作吗？：

```
if (tradesThisBar!=null){} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T13:45:26.773

由于错误已指定，`()`请在您的类型之后添加：

```
tradesThisBar=new List<Traid>(); 
```

* * *

关于第二段代码，您输入的代码只有在不是`{}`时才会运行。`tradesThisBar``null`

至于它是否会“工作”取决于你希望它做什么。但它会编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:45:40.063

您需要调用构造函数：

```
tradesThisBar = new List<Traid>(); 
```

如果你想重置它：

```
tradesThisBar = null; 
```

# python - 为python列表中的成员赋值

> ID：13417843
> 
> 赞同：2
> 
> 时间：2012-11-16T13:45:19.533
> 
> 标签：python, list

我有一个清单，可以说：

```
test = [False, False, 2, False, False, False, 3, False, False] 
```

并且我想将此列表的每个成员分配给 False 除非该成员等于 2 所以结果应该是：

```
test = [False, False, 2, False, False, False, False, False, False] 
```

我试过 ：

```
test = [False for i in test if i !=2] 
```

但结果是：

```
[False, False, False, False, False, False, False, False] 
```

我尝试定义一个函数：

```
def set_False(lst):
     for i in lst:
         if i != 2:
            i = False
    return lst 
```

当我申请时：

```
test = set_False(test) 
```

结果是：

```
[False, False, 2, False, False, False, 3, False, False] 
```

我不能在我放置代码的环境中使用枚举，所以有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T13:47:08.713

它是

```
[False if i !=2 else 2 for i in test] 
```

否则，当它等于 2 时，您将跳过整个元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T13:46:58.907

在您的情况下，可以通过以下方式进行就地修改：

```
 for i in range(len(lVals)):
       if lVals[i] != 2:
           lVals[i] = False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T14:05:54.383

[列表](http://infohost.nmt.edu/tcc/help/pubs/python27/web/list-comprehensions.html)推导可能是实现目标的最 Pythonic 方式：

```
myList = [False, False, 2, False, False, False, 3, False, False]
myFilteredList = [False if i !=2 else i for i in myList] 
```

如果您不想使用这样的语法，另一种方法是使用[映射函数](http://infohost.nmt.edu/tcc/help/pubs/python27/web/map-function.html)：

```
def myFilter(i):
   return False if i!=2 else i

myList = [False, False, 2, False, False, False, 3, False, False]
myFilteredList = map( myFilter, myList ) 
```

# php - 在 YII 中使用 ExtJS

> ID：13417844
> 
> 赞同：3
> 
> 时间：2012-11-16T13:45:23.667
> 
> 标签：php, yii, extjs4

有没有人有使用 extjs 和 Yii 的经验？我很难理解 Yii 的文件夹结构应该是什么样子。我有在 Spring MVC 中使用 extjs 的经验，但不确定文件夹结构在 Yii 中的外观。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:15:20.630

我没有用过 ExtJs 但我用过 Yii。我猜 ExtJS 有一个主文件夹。那将是最好的`extensions`。然后在代码中，您可以使用 alias 引用任何文件`ext.extjs`。然后要获取脚本并提供服务，您可以使用[AssetManager](http://www.yiiframework.com/wiki/148/understanding-assets/)将它们发布到公共文件夹以进行服务。

# python - 具有基于用户的调度/优先级的分布式任务队列

> ID：13417845
> 
> 赞同：3
> 
> 时间：2012-11-16T13:45:25.207
> 
> 标签：python, scheduled-tasks, task-queue

我有许多用户，每个用户都可以提交任意数量的任务。我需要一个任务队列，它将安排任务以这样一种方式运行，即一个用户不能通过在短时间内提交许多任务来饿死其他用户任务的处理。

到目前为止，我一直在尝试使用线程调度`gevent`并自己编写其余部分，但是要做的工作很多....

我发现[celery](http://celeryproject.org/)有很好的功能，但是缺少我最需要的功能。

还有其他想法吗？

# shell - 使用 shell 脚本根据内容重命名多个文件

> ID：13417847
> 
> 赞同：1
> 
> 时间：2012-11-16T13:45:26.157
> 
> 标签：shell, word, rename

我正在寻找一种在 linux shell 脚本（bash）中执行以下操作的方法：

我有一系列以随机顺序命名的文件并传送到服务器上的共享。它们都在文件中包含一个特定的标识符名称：例如

`fileabc123.xml`包含单词`PCVendor`
`filedef456.xml`包含单词`PrinterVendor`

为了以正确的方式处理这些文件，我需要找到一种方法/命令组合将文件重命名为包含文件内单词的新文件名，因此：

`fileabc123.xml`需要重命名为`PCVendor-file123abc.xml`
`filedef456.xml`需要重命名为`PrinterVendor-file456def.xml`

这需要在 shell 脚本中自动完成。

我正在查看以下内容：

```
for i in `ls *.xml`;
do
cat *.xml | grep "PCVendor"
mv $i PCVendor-$i
done 
```

但我知道这会将所有可用文件重命名为 PCVendor-$i 而不是将每个文件重命名为相应的单词。

在此先感谢您的帮助！

谢谢，伊夸特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:58:36.583

```
for i in $(grep -l Vendor *.xml); do
    echo mv "$i" "$(
        awk '/Vendor/{
            for (i=0; i<=NF; i++) {
                if ($i ~ "Vendor$"){print $i; exit}
            }
        }' "$i")-$i"
done 
```

**笔记**

*   当测试正常时，`echo`从脚本中删除以真正做到这一点
*   将脚本放在 xml 目录之外以避免重命名脚本本身
*   该脚本可以找到任何包含 Vendor 的字符串（即使在一行中间，如果它由空格或制表符分隔）
*   该脚本仅查看包含模式**Vendor的文件**
*   避免不良习惯，例如`ls *.xml`；和`cat file | grep`，见[http://porkmail.org/era/unix/award.html](http://porkmail.org/era/unix/award.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T16:43:15.767

```
shopt -s extglob
for keyword in PCVendor PrinterVendor FruitVendor; do
    grep -l $keyword !(*Vendor-*).xml | xargs -I X mv X $keyword-X
done 
```

扩展的 glob 模式选择名称中*没有*“Vendor-”的`!(*Vendor-*).xml`所有 xml 文件。因此，grep 检查的文件数量将在循环的每次迭代中减少。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T13:51:29.047

这是处理文件时的常见问题。最好的解决方案是将文件移动到新目录并为其提供更好/正确的名称：

```
PCVendorDir=../PCVendor
mkdir -p "$PCVendorDir"

for i in *.xml ; do
    if grep -q PCVendor $i ; then
        mv "$i" "$PCVendorDir/PCVendor-$i"
    fi
done 
```

如果您不将文件移动到其他文件夹，则脚本的下一次运行将重命名`PCVendor-file123abc.xml`为`PCVendor-PCVendor-file123abc.xml`等。*

# html - CSS :after + z-index

> ID：13417854
> 
> 赞同：3
> 
> 时间：2012-11-16T13:45:52.030
> 
> 标签：html, css, z-index, pseudo-element

我正在尝试创建一个带有向下箭头的消息框。我想为箭头使用 :after 伪元素以避免额外的 HTML，并且我希望伪元素继承其父元素的 box-shadow。

我的尝试：http: [//goo.gl/LDs7N](http://goo.gl/LDs7N)

我只是不能让那个伪元素落后于父元素。你们中的任何人都知道我哪里出错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T13:48:24.220

您用于`-1px`z-index，z-index 不是以像素为单位测量的，只是数字，使其`-1`按预期工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T13:48:23.613

[`z-index`](http://www.w3.org/TR/CSS2/visuren.html#z-index)是`auto`、 整数或`inherit`。所以使用

```
z-index: -1; 
```

代替

```
z-index: -1px; 
```

### 解释

`z-index`按照绘制渲染树的顺序确定元素的排名。因此，它不是大小值（如`px`,`pt`或`em`），因为`z-index`不提供连续值（`0.1em`, 0.09em, `0.099em`,...），而仅提供离散值，它们仅以整数形式给出：

> 渲染树被绘制到画布上的顺序是根据堆叠上下文来描述的。堆叠上下文可以包含更多的堆叠上下文。从其父堆栈上下文的角度来看，堆栈上下文是原子的；其他堆叠上下文中的盒子可能不会出现在它的任何盒子之间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T13:48:15.127

您的 z-index 设置为，`z-index: -1px;`但它应该只是`z-index: -1;`并且修复了它。

[http://jsfiddle.net/Ch78n/7/](http://jsfiddle.net/Ch78n/7/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T13:48:31.820

代替

```
z-index: -1px; 
```

和

```
z-index: -1; 
```

[看你的小提琴](http://jsfiddle.net/Ch78n/5/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T13:49:44.040

更改`z-index: -1px;`为，`z-index: -1;`因为 z-index 不是以像素为单位测量的。JSFiddle：http: [//jsfiddle.net/Ch78n/8/](http://jsfiddle.net/Ch78n/8/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-16T13:53:22.930

您可以使用边框来制作三角形，使用透明度。阴影不包括在内，因为你会得到一个正方形。此解决方案使用较少的 CSS3，因此与浏览器兼容。

小提琴：http: [//jsfiddle.net/Ch78n/9/](http://jsfiddle.net/Ch78n/9/)

代码：

```
div:after {                        
    content: '';
    box-shadow: none;
    position: absolute;
    left: 80px;
    top: 30px;

    border-color: #EC5F54 transparent transparent; 
    border-style: solid; 
    border-width: 10px 10px 0; 
    width: 0;
    height: 0;
} 
```

# c# - 仅在列表中的鼠标悬停项目上显示手形光标

> ID：13417860
> 
> 赞同：1
> 
> 时间：2012-11-16T13:46:12.763
> 
> 标签：c#, winforms, cursor

我正在分别用 C# 开发应用程序 .Net 使用 win 表单，并且我试图仅当鼠标悬停在列表中的项目上时才显示手形光标。所以换句话说，当鼠标悬停在列表上并且它不在该列表中的任何项目上时，我不想显示手形光标。

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:28:34.843

您应该使用 ListView MouseMove 和 ListView MouseLeave 事件以及 GetItemAt 和 GetSubItemAt 方法来返回鼠标所在点上的项目。您可以使用此代码。我不确定它是否是最佳的，但它会达到目的。

```
 Cursor standardCursor;
    Cursor differentCursor;
    public Form1()
    {
        standardCursor = Cursors.Arrow;
        differentCursor = Cursors.Cross;
    }

    private void listView1_MouseLeave(object sender, EventArgs e)
    {
        if (this.Cursor == differentCursor)
            this.Cursor = standardCursor;
    }

    private void listView1_MouseMove(object sender, MouseEventArgs e)
    {
        ListViewItem lvi = listView1.GetItemAt(e.Location.X, e.Location.Y);
        if (lvi == null)
        {
            bool found = false;
            int i = 0;
            ListViewItem.ListViewSubItem lvsi = null;
            while(!found && i< listView1.Items.Count)
            {
                lvsi = listView1.Items[i].GetSubItemAt(e.Location.X, e.Location.Y);
                if (lvsi != null)
                    found = true;
                i++;
            }
            if(found)
                this.Cursor = differentCursor;
            else if (this.Cursor == differentCursor)
                this.Cursor = standardCursor;
        }
        else
        {
            this.Cursor = differentCursor;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-20T15:19:43.280

我知道这篇文章发布已经有一段时间了，但这里有一个简单而简短的 Awnser，供以后遇到同样问题的人使用。

```
private void listView1_MouseMove(object sender, MouseEventArgs e)
{
    if (e.Y > 2 + (listView1.Items.Count * 20))
        listView1.Cursor = Cursors.Default;
    else
        listView1.Cursor = Cursors.Hand;
} 
```

“2”在顶部，“20”代表每个项目的像素。你只需要看看每个项目有多少像素高度。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T14:05:36.867

单击窗体上的控件并转到属性。有一个“光标”字段，您可以从中选择“手”。这将在滚动控件时更改光标类型，尽管我不确定您将如何对列表中的各个项目执行此操作。

# android - 如何在 Fragment 上调用 getBaseContext()

> ID：13417865
> 
> 赞同：11
> 
> 时间：2012-11-16T13:46:36.973
> 
> 标签：android, android-fragments, android-context

我有这个可以从普通活动中调用的方法：

```
getBaseContext().getResources().updateConfiguration(config2, getBaseContext().getResources().getDisplayMetrics()); 
```

问题是我无法调用`getBaseContext()`Fragment，我该怎么做？或者我需要用什么来替换`getBaseContext()`Fragment 类？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-16T13:48:05.550

您可以使用[`getActivity()`](http://developer.android.com/reference/android/app/Fragment.html#getActivity%28%29)，它返回与片段关联的活动。
活动是一个上下文*（因为活动扩展了上下文）*。

但是您可以在片段附加到活动后使用它..

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-17T02:14:54.203

采用`getActivity().getBaseContext();`

# java - 如何在 Java 中获得第 5 个根？

> ID：13417866
> 
> 赞同：3
> 
> 时间：2012-11-16T13:46:36.927
> 
> 标签：java, methods, root

我正在尝试让我的程序获得数字的第 5 个根。我已经使用该`Math.pow(a, b);`方法来获得它，但是由于某种原因它不起作用。

可以说我做类似的事情`double z = Math.pow(5, 5)`。一旦它获得值，我就会对此进行 a `System.out`，它将打印`3125`. 当我`z = Math.Pow(z, 1/5)`之后对它进行操作并执行 System.out 时，它不会给我 5 的结果，而是 1。有人可以向我解释为什么会这样吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T13:47:46.860

尝试`z = Math.Pow(z, 1.0/5)`

`1/5 == 0`在java中

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-16T13:47:54.550

这是因为您正在进行整数除法：`1/5`是 0 因此结果（x^0 始终为 1）。

尝试：`z = Math.Pow(z, 1.0d/5);`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-16T13:47:59.520

1/5 作为整数除法四舍五入为 0。

试试 1.0/5，或者只放 0.2。

# python - Appengine 和 Markdown 导致文本出现空白：

Word

> ID：13417869
> 
> 赞同：1
> 
> 时间：2012-11-16T13:46:41.260
> 
> 标签：python, google-app-engine, markdown

我在使用 markdown 正确渲染 html 时遇到问题。我 在 appengine 2.7 中使用[python-markdown](http://freewisdom.org/projects/python-markdown)

我的问题是我在 HTML 命名空间中的字符之间有很多空格？像这样`< code >code< / code >`。

这是我的课：

```
class Text(webapp2.RequestHandler):
    def post(self):
        text = self.request.get('content')
        html = markdown.markdown(text)

        template_values = {'html': html} 
```

这是我的html：

```
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
</head>
<body>
    {% for html in html %}
        {{ html }}
    {% endfor %}  
</body>
</html> 
```

这里还有一个正在发生的事情的示例：

```
# Word 
```

变成：

```
< h 1 >Word< / h 1 > 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:52:26.940

您正在将返回的 HTML 解释为列表；通过循环文本创建单个字符：

```
>>> for ch in 'sample':
...     print ch,
s a m p l e 
```

只需直接插入`html`变量：

```
<body>
    {{ html }}
</body> 
```

# javascript - 使用 sisyphus 自动保存 Web 表单不起作用

> ID：13417870
> 
> 赞同：1
> 
> 时间：2012-11-16T13:46:44.587
> 
> 标签：javascript, html

我正在尝试将所有表单保存在我的网页上...我的 js 目录中有 jquery 1.8.2 和 sisyphus_min.js。因此，我将此添加到我的 html 标头中

```
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="js/sisyphus.min.js"></script> 
```

然后在我的html正文中的表单之后

```
 <script type="text/javascript">
    $(window).load(function() {
    $('form').sisyphus(); });
    });</script> 
```

这应该很简单，但它不起作用......我把 $('form').sisyphus(); 在错误的地方或错误的方式打电话？

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:44:24.167

控制台中是否显示任何错误？看起来你有很多括号。尝试删除最后一行或仅使用此代码代替您的代码：

```
<script type="text/javascript">
    $(window).load(function() {
        $('form').sisyphus(); 
    });
</script> 
```

# c++ - 重载 << 运算符的问题

> ID：13417871
> 
> 赞同：0
> 
> 时间：2012-11-16T13:46:46.903
> 
> 标签：c++, class, operator-overloading

我在重载 << 运算符时遇到了一些问题。错误是这样的：'JSON' 不是从 'const std::basic_string<_CharT, _Traits, _Alloc>' 派生的

重载运算符 << 的正确方法是怎样的？我的目标是能够做到 std::cout<

我的代码是：main.cpp

```
#include <iostream>
#include <string>
#include <fstream>
#include <sstream>

#include "JSON.hpp"

int main()
{
    std::cout<<"JSON V0.1"<<std::endl;

    std::string line;
    std::ifstream file;
    std::stringstream ss;
    JSON obj;

    file.open("test.json");
    if (file.is_open())
    {
        std::cout<<"File opened"<<std::endl;
        ss << file.rdbuf();

        obj.parse(ss);
        file.close();
     }

     std::cout<<obj<<std::endl;

     return 0;
} 
```

JSON.hpp

```
#ifndef _JSON_H_
#define _JSON_H_

#include <string>
#include <sstream>

#include <boost/property_tree/ptree.hpp>

class JSON
{
    public:
        bool parse(std::stringstream &stream);
        std::string get(std::string &key);

    private:
        boost::property_tree::ptree pt;
};
#endif 
```

JSON.cpp

```
#include <boost/property_tree/json_parser.hpp>

#include "JSON.hpp"

bool JSON::parse(std::stringstream &stream)
{
    boost::property_tree::read_json(stream, pt);
    return true;
}

std::string JSON::get(std::string &key)
{
    std::string rv = "null";
    return rv;
}

std::ostream& operator<<(std::ostream& out, const JSON& json)
{
    return out << "JSON" << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:49:35.587

编译器在看到函数调用时只考虑它之前看到的函数，因此它看不到`operator<<`.cpp 文件中的函数。

您必须在`operator<<`某个地方进行前向声明，以便编译器知道它，例如在标题中：

```
std::ostream& operator<<(std::ostream&, const JSON&); 
```

然后编译器在看到你调用它时就会知道该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:50:24.897

您需要在声明class 之后提供`ostream& operator<<`in声明：`JSON.hpp``JSON`

```
// JSON.hpp
....
class JSON
{
  // as before
};

std::ostream& operator<<(std::ostream& out, const JSON& json); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:49:37.853

`operator<<`需要提供的声明`main`。放到头文件中。

# objective-c - 如何更改标签栏项目的状态图像？

> ID：13417873
> 
> 赞同：0
> 
> 时间：2012-11-16T13:46:52.980
> 
> 标签：objective-c, rubymotion

我正在构建一个 Rubymotion 应用程序，并且正在自定义 tabBar。我已经设法将自定义图像作为 tabBar 的背景，但现在我需要为每个选项卡设置单独的图像。一种用于按下时，一种用于未按下时。

我正在遵循 NSScreencasts.com 上的指南（针对 Objective-c），并且显示说明说我应该使用此代码。但是当我在 Ruby 中尝试它时（我认为这是正确的），我得到了一个错误。

*在 Objective-C 中：*

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if (self) {
        self.tabBarItem = [[UITabBarItem alloc] initWithTitle:@"Friends"
                                                        image:nil
                                                          tag:0];
        [self.tabBarItem setFinishedSelectedImage:[UIImage imageNamed:@"tabbar-activity-selected.png"]
                      withFinishedUnselectedImage:[UIImage imageNamed:@"tabbar-activity.png"]];
    }
    return self;
} 
```

*我的红宝石代码：*

```
class FirstController < UIViewController
  def viewDidLoad
    super

    view.backgroundColor = UIColor.whiteColor 

    self.tabBarItem = UITabBarItem.alloc.initWithTitle('Friends', image: nil, tag: 0)
    self.tabBarItem.setFinishedSelectedImage(UIImage.imageNamed('tabitem_selected.png'))
    self.tabBarItem.withFinishedUnselectedImage(UIImage.imageNamed('tabitem.png')) 
  end
end 
```

*错误：*

```
first_controller.rb:8:in `viewDidLoad': undefined method `setFinishedSelectedImage' for #<UITabBarItem:0x6b71670> (NoMethodError)
    from app_delegate.rb:7:in `application:didFinishLaunchingWithOptions:'
2012-11-16 14:45:56.924 custom_tabbar[45679:f803] *** Terminating app due to uncaught exception 'NoMethodError', reason: 'first_controller.rb:8:in `viewDidLoad': undefined method `setFinishedSelectedImage' for #<UITabBarItem:0x6b71670> (NoMethodError) 
```

还。在viewDidLoad中设置这段代码真的正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:33:09.847

Objective-C 中的这些行是一种方法：

```
[self.tabBarItem setFinishedSelectedImage:[UIImage imageNamed:@"tabbar-activity-selected.png"]
              withFinishedUnselectedImage:[UIImage imageNamed:@"tabbar-activity.png"]]; 
```

签名是：

```
- (void)setFinishedSelectedImage:(UIImage *)selectedImage 
     withFinishedUnselectedImage:(UIImage *)unselectedImage 
```

所以对于 RubyMotion，方法签名是：

```
setFinishedSelectedImage(image, withFinishedUnselectedImage:image) 
```

这会为您转换为：

```
self.tabBarItem.setFinishedSelectedImage(UIImage.imageNamed('tabitem_selected.png'),
                                         withFinishedUnselectedImage: UIImage.imageNamed('tabitem.png')) 
```

# php - PHP base64 编码自定义字母表

> ID：13417874
> 
> 赞同：7
> 
> 时间：2012-11-16T13:46:54.537
> 
> 标签：php

我尝试使用 base64_encode() 和 base64_decode() 但使用自定义字母表。默认字母为：

```
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" 
```

说我想使用：

```
"ZYXWVUTSRQPONMLKJIHGFEDCBAzyxwvutsrqponmlkjihgfedcba9876543210+/" 
```

在互联网上找到了一门课程，但没有按预期工作。关于如何尽可能简单地实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-16T13:51:54.757

超简单，[`strtr`](http://php.net/manual/en/function.strtr.php)开箱即用：

```
$default = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
$custom  = "ZYXWVUTSRQPONMLKJIHGFEDCBAzyxwvutsrqponmlkjihgfedcba9876543210+/";

$encoded = strtr(base64_encode($input), $default, $custom); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-30T15:38:46.140

除了上面定义的自定义编码之外，要使用自定义字母进行解码，您可以执行以下操作：

```
 $custom = 'ZYXWVUTSRQPONMLKJIHGFEDCBAzyxwvutsrqponmlkjihgfedcba9876543210+/';
    $default = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';
    $decoded = base64_decode(strtr($input, $custom, $default)); 
```

# c# - 数据库查询/自定义类到 JSON？

> ID：13417877
> 
> 赞同：0
> 
> 时间：2012-11-16T13:47:00.280
> 
> 标签：c#, .net, json, converter

我的应用程序中有一个 jquery 事件日历，它必须由 JSON 输入提供。目前输入看起来像这样：

```
[   
{ "date": "1352636408000", "type": "meeting", "title": "Poker Freak", "description": "Lorem Ipsum dolor set", "url": "http://www.event1.com/" },    
{ "date": "1351775676000", "type": "demo", "title": "Poker Freak", "description": "Lorem ipsum dolor sit amet, cveniris nisi ut aliquip ex ea commodo consequat.", "url": "http://www.event2.com/" },   
{ "date": "1351764876000", "type": "meeting", "title": "Poker Freak", "description": "Lorem Ipsum dolor set", "url": "http://www.event3.com/" } ] 
```

它保存在一个 JSON 文件中，该文件是来自事件日历的演示文件。

另一方面，我有一个 MSSQL 表，它包含事件表中的数据（日期为 DateTime，类型为字符串等）。

我使用以下命令获取数据：

```
 public static List<Event> GetAllEvents()
    {
        using (CyberDBDataContext db = new CyberDBDataContext())
        {
            return (from a in db.Events select a).ToList();
        }
    } 
```

现在 - 如何将 MSSQL 返回查询（事件列表）转换为 JSON？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:50:28.050

您应该为此使用[JSON.net](http://james.newtonking.com/pages/json-net.aspx)库。这将是最简单的方法（在我看来，它是最好的 JSON 库之一）。

使用这些示例中的~~第二个第四个格式~~

```
 string defaultJson = JsonConvert.SerializeObject(entry);
  // {"Details":"Application started.","LogDate":"\/Date(1234656000000)\/"}

  string javascriptJson = JsonConvert.SerializeObject(entry, new JavaScriptDateTimeConverter());
  // {"Details":"Application started.","LogDate":new Date(1234656000000)}

  string isoJson = JsonConvert.SerializeObject(entry, new IsoDateTimeConverter());
  // {"Details":"Application started.","LogDate":"2009-02-15T00:00:00Z"}

  string isoJson = JsonConvert.SerializeObject(entry, new TicksDateTimeConverter());
  // {"Details":"Application started.","LogDate":"1234656000000"} 
```

使用自定义 DateFormatter 跟随您的代码段：

```
public static string GetAllEvents()
{
    using (CyberDBDataContext db = new CyberDBDataContext())
    {
        return JsonConvert.SerializeObject((from a in db.Events select a).ToList(), new TicksDateTimeConverter());
    }
} 
```

**编辑：** *如果您使用的是 ASP.net MVC*

不知道它是否也适用于 ASP.net MVC4 之前的任何版本，但由于版本 4 JSON.net 是默认的 JSON 序列化程序。因此，您不再需要实施它。

**自定义转换器**

我建议您实现如下所示的自定义转换器。基本上它与 JavaScript 转换器相同，但它应该只返回 Ticks。

```
using System;
using System.Globalization;
using Newtonsoft.Json.Utilities;

namespace Newtonsoft.Json.Converters
{
  /// <summary>
  /// Converts a <see cref="DateTime"/> to and from a JavaScript date constructor (e.g. new Date(52231943)).
  /// </summary>
  public class TicksDateTimeConverter : DateTimeConverterBase
  {
    /// <summary>
    /// Writes the JSON representation of the object.
    /// </summary>
    /// <param name="writer">The <see cref="JsonWriter"/> to write to.</param>
    /// <param name="value">The value.</param>
    /// <param name="serializer">The calling serializer.</param>
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
      long ticks;

      if (value is DateTime)
      {
        DateTime dateTime = (DateTime)value;
        DateTime utcDateTime = dateTime.ToUniversalTime();
        ticks = JsonConvert.ConvertDateTimeToJavaScriptTicks(utcDateTime);
      }
#if !PocketPC && !NET20
      else if (value is DateTimeOffset)
      {
        DateTimeOffset dateTimeOffset = (DateTimeOffset)value;
        DateTimeOffset utcDateTimeOffset = dateTimeOffset.ToUniversalTime();
        ticks = JsonConvert.ConvertDateTimeToJavaScriptTicks(utcDateTimeOffset.UtcDateTime);
      }
#endif
      else
      {
        throw new Exception("Expected date object value.");
      }

      writer.WriteValue(ticks);
    }

    /// <summary>
    /// Reads the JSON representation of the object.
    /// </summary>
    /// <param name="reader">The <see cref="JsonReader"/> to read from.</param>
    /// <param name="objectType">Type of the object.</param>
    /// <param name="existingValue">The existing property value of the JSON that is being converted.</param>
    /// <param name="serializer">The calling serializer.</param>
    /// <returns>The object value.</returns>
    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
      Type t = (ReflectionUtils.IsNullableType(objectType))
        ? Nullable.GetUnderlyingType(objectType)
        : objectType;

      if (reader.TokenType == JsonToken.Null)
      {
        if (!ReflectionUtils.IsNullableType(objectType))
          throw new Exception("Cannot convert null value to {0}.".FormatWith(CultureInfo.InvariantCulture, objectType));

        return null;
      }

      if (reader.TokenType != JsonToken.StartConstructor || !string.Equals(reader.Value.ToString(), "Date", StringComparison.Ordinal))
        throw new Exception("Unexpected token or value when parsing date. Token: {0}, Value: {1}".FormatWith(CultureInfo.InvariantCulture, reader.TokenType, reader.Value));

      reader.Read();

      if (reader.TokenType != JsonToken.Integer)
        throw new Exception("Unexpected token parsing date. Expected Integer, got {0}.".FormatWith(CultureInfo.InvariantCulture, reader.TokenType));

      long ticks = (long)reader.Value;

      DateTime d = JsonConvert.ConvertJavaScriptTicksToDateTime(ticks);

      reader.Read();

      if (reader.TokenType != JsonToken.EndConstructor)
        throw new Exception("Unexpected token parsing date. Expected EndConstructor, got {0}.".FormatWith(CultureInfo.InvariantCulture, reader.TokenType));

#if !PocketPC && !NET20
      if (t == typeof(DateTimeOffset))
        return new DateTimeOffset(d);
#endif

      return d;
    }
  }
} 
```

# java - 为什么 JTree 处理来自 DefaultTreeModel 而不是 TreeModel 的事件？

> ID：13417880
> 
> 赞同：3
> 
> 时间：2012-11-16T13:47:16.783
> 
> 标签：java, swing, jtree, event-listener, treemodel

我注意到在 jTree 中调用和定义的 jTree.treeModelHandler 为 treeNodesChanged 和 treeNodesInserted 事件实现了空白方法。DefaultTreeModel 触发一个 treeNodesInserted 事件 & jTree 更新自己。但是，当我从 TreeModel 触发相同的事件时，什么也没有发生。

当它没有实现任何明显的方法时，我无法弄清楚树如何从 DefaultTreeModel 更新。

我在这里想念什么？

更新：解决方法 org.jdesktop.swingx.tree.TreeModelSupport。很棒的套件！添加为我的 TreeModel 接口对象的字段。然后将所有触发和 treeModelListener 方法委托给它。使用 JTree 比使用 DefaultTreeModel 效果更好，甚至使用 JXTree 效果更好。我只实现了单数选择/插入/删除，但到目前为止，树在所有测试中都表现正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:56:20.257

DefaultTreeModel 会自行触发。侦听器位于模型上（因此您可以让两个 JTree 查看一个 TreeModel 的更改）。所以模型是通知所有听众的正确位置。

我相信应该尝试将**AbstractTreeModel**扩展为具有一些基本基础结构的模型。不对

* * *

TreeModel 也有 TreeModelListeners。对于数据的更改。JTree 就是这样一个监听器。JTree 有视图方面的侦听器，分支是否扩展等等。

在您的 TreeModel 中，必须遍历所有添加的[TreeModelListener](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/TreeModelListener.html)并调用适当的事件，例如 treeNodesInserted。

# objective-c - 如何将 wbxml 数据转换为 json 格式，反之亦然？

> ID：13417884
> 
> 赞同：-5
> 
> 时间：2012-11-16T13:47:37.790
> 
> 标签：objective-c, xml, json

如何将 wbxml 数据转换为 json 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:11:33.217

我想说获得公平答案的最佳机会是尝试自己搜索一下，但由于我是个好人，我会给你一些链接。

您将需要一个外部框架来解析`WBXML`-data，我建议使用[这个](http://wbxmllib.sourceforge.net/html/index.html)。我不太了解该框架，但如果您能够解析 XML 数据并将其存储在`NSDictionary`or`NSMutableDictionary`中，则可以将其转换为 JSON，如 Apple 的[类参考](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)中所述`NSJSONSerialization`。

# php - 迁移到 cakephp 2.x - 更新列表

> ID：13417887
> 
> 赞同：0
> 
> 时间：2012-11-16T13:47:47.733
> 
> 标签：php, cakephp, cakephp-2.0

我正在尝试将我的项目从 cakephp 1.3 移动到 cakephp 2.x。我知道它已经过期了。但我从来没有考虑过。我有几个组件，我想继续在 cakephp 2.x 中使用。我想知道我需要在组件中更新哪些内容。我正在尝试在将其移至 cakephp 2.0 之前构建我需要更新的内容列表

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:57:51.157

为什么不与这方面的非常好的文档一起去呢？

[http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html) + [http://book.cakephp.org/2.0/en/appendices/2-1-migration-guide。 html](http://book.cakephp.org/2.0/en/appendices/2-1-migration-guide.html) + [http://book.cakephp.org/2.0/en/appendices/2-2-migration-guide.html](http://book.cakephp.org/2.0/en/appendices/2-2-migration-guide.html) + [http://book.cakephp.org/2.0/en/appendices/2-3-migration-指南.html](http://book.cakephp.org/2.0/en/appendices/2-3-migration-guide.html)

内置升级外壳可以帮助解决这个问题

PS：另外，这已经被问过很多次了

如果可能的话，您还可以使用我的升级 Shell 自动修复大部分问题： [https ://github.com/dereuromark/upgrade](https://github.com/dereuromark/upgrade)

它还修复了大量其他不必要但推荐或有用的东西。

# asp.net-mvc - CKEditor stopped working after adding JSON to my MVC intranet

> ID：13417902
> 
> 赞同：1
> 
> 时间：2012-11-16T13:48:20.947
> 
> 标签：asp.net-mvc, json, model-view-controller, ckeditor, datatables

I have a intranet website where I have a page to add new products.

I use ckeditor because I need to save some links.

Now I had to change it into a Master detail form and so I decided to use Json2 and DataTables .

The strangest thing is that when I include

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.js")" type="text/javascript"> 
```

the ckeditor doesn't work anymore.

These are all the scripts I import

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@*This is for CKEditor*@
<script src="@Url.Content("~/content/javascript/CKEditor/ckeditor.js")" type="text/javascript" ></script>
<script src="@Url.Content("~/content/javascript/CKEditor/adapters/jquery.js")" type="text/javascript" ></script>

@*This is for jquery*@
<script src="@Url.Content("~/Scripts/jquery-1.5.1.js")" type="text/javascript"></script>

@*This is for JSON*@
<script src="@Url.Content("~/Scripts/json2.js")" type="text/javascript"></script>

@*These are for DataTables*@
<script src="@Url.Content("~/Scripts/DataTables-1.9.4/media/js/jquery.dataTables.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/DataTables-1.9.4/extras/TableTools/media/js/TableTools.js")"
    type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/DataTables-1.9.4/extras/TableTools/media/js/ZeroClipboard.js")"
    type="text/javascript"></script>

@*These are for styling Control*@
<link href="@Url.Content("~/Content/DataTables-1.9.4/extras/TableTools/media/css/TableTools.css")"
    rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/DataTables-1.9.4/extras/TableTools/media/css/TableTools_JUI.css")"
    rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" /> 
```

Any ideas??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:53:31.120

You should add the reference to jquery before you add ckeditor. The adaptors are set to extend jquery.

# jquery - 每 8 行更改一次行淘汰赛模板

> ID：13417905
> 
> 赞同：0
> 
> 时间：2012-11-16T13:48:27.000
> 
> 标签：jquery, knockout-mapping-plugin

使用淘汰赛模板绑定，我正在绑定如下表：

```
<script type="text/x-jquery-tmpl" id="PrintLabelsTemplate">
    <TR> 
        <TD data-bind="text: CustomerFirstName"></TD>
        <TD data-bind="text: ModelDescription"></TD> 
    </TR>
</script>

<div>
    <table style="border-collapse: collapse;"  cellpadding="0" cellspacing="0" align="center" width="100%" id="tblPrintLabels" class="pme-main" data-bind="template: {name:'PrintLabelsTemplate', foreach: ViewModel}">
    </table>
</div> 
```

对我来说一切正常，但我的问题是在每重复 8 行之后我想插入不同的行和一个图像背景，比如

```
<tr>
    <td>Breaking Row</td>
</tr> 
```

那么如何在模板绑定中编写这个逻辑呢？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:06:59.633

我要做的是为此使用CSS。您可以使用`:nth-child(7)`CSS 属性为第七项指定不同的 CSS 属性。然后我会使用`:after`带有`content`CSS 属性的选择器来插入一个额外的行，其中包含任何你想要的背景。

这有一些优点，即不会强制您的 Knockout 代码做任何不寻常的事情，如果它只是一个每隔 8 行重复一次的视觉分隔符，它将您的演示文稿与您的代码分开。

这是对[第n个孩子](http://css-tricks.com/how-nth-child-works/)和[css内容的解释](http://css-tricks.com/css-content/)

# postgresql - 从 2 列中选择不同但只有 1 列是重复的

> ID：13417907
> 
> 赞同：0
> 
> 时间：2012-11-16T13:48:30.900
> 
> 标签：postgresql, join, duplicates, distinct, subquery

```
select a.subscriber_msisdn, war.created_datetime from 
(
select distinct subscriber_msisdn from wiz_application_response 
where application_item_id in 
(select id from wiz_application_item  where application_id=155)
and created_datetime between '2012-10-07 00:00' and '2012-11-15 00:00:54'
) a
 left outer join wiz_application_response war on (war.subscriber_msisdn=a.subscriber_msisdn) 
```

子选择返回 11 行，但加入时返回 18（有重复项）。此查询的目标只是将日期列添加到子选择的 11 行中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:21:49.463

根据您的描述，有理由认为某些subscriber_msisdn 值有多个created_datetime 值，这促使您开始在子查询中使用distinct。通过将子查询加入到原始表中，您正在打败它。编写查询的更简洁的方法是：

```
SELECT
    war.subscriber_msisdn
  , war.created_datetime
FROM
  wiz_application_response war
  LEFT JOIN wiz_application_item  wai
    ON war.application_item_id = wai.id
    AND wai.application_id = 155
WHERE
  war.created_datetime BETWEEN '2012-10-07 00:00' AND '2012-11-15 00:00:54' 
```

这应该只返回 war 表中满足基于 wai 表的条件的行。它不应该是外连接，除非您想从 war 表中返回满足 created_datetime 参数的所有行，而不管 application_item_id 参数如何。

根据我对您的表格的有限信息以及我假设您正在尝试完成的内容，这是我最好的猜测。如果这不能满足您的需求，我将根据您可以提供的其他信息继续提供其他想法。希望这有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:28:59.227

很可能可以简化为：

```
SELECT DISTINCT ON (1)
       r.subscriber_msisdn, r.created_datetime
FROM   wiz_application_item i
JOIN   wiz_application_response r ON r.application_item_id = i.id
WHERE  i.application_id = 155
AND    i.created_datetime BETWEEN '2012-10-07 00:00' AND '2012-11-15 00:00:54'
ORDER  BY 1, 2 DESC  -- to pick the latest created_datetime 
```

细节取决于缺失的信息。

[更多解释在这里。](https://stackoverflow.com/a/7630564/939860)

# javascript - 函数名中的数组

> ID：13417911
> 
> 赞同：1
> 
> 时间：2012-11-16T13:48:39.260
> 
> 标签：javascript, jquery, timepicker

我正在尝试在 JS 中做一个小的“开放时间”脚本。我为此使用 timepicker 并且一切正常，除了我想每天都有一个功能并且我不想复制粘贴它七次。

这是我的代码的一部分：调用部分：

```
jQuery(document).ready(function() {
    var week = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
    for (var i = 0; i < week.length; i++) {
        day = week[i];

        jQuery('#' + day + '_start1').timepicker({
            showLeadingZero: false,
            onHourShow: MondayHourFuncStart,
            //I want to add the day name instead of Monday
            onMinuteShow: MondayMinFuncStart //I want to add the day name instead of Monday
        });
    } 
```

功能部分：

```
week = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
for (var i = 0; i < week.length; i++) {

    function MondayHourFuncStart(hour) //I want to add the day name instead of Monday {
    var day = week[i];
    var tpEndHour = jQuery('#' + day + '_end1').timepicker('getHour');
    // all valid if no end time selected
    if (jQuery('#monday_end1').val() == '') {
        return true;
    }
    // Check if proposed hour is prior or equal to selected end time hour
    if (hour <= tpEndHour) {
        return true;
    }
    // if hour did not match, it can not be selected
    return false;
} 
```

所以我只想拥有数组值而不是“星期一”

我尝试了很多事情，但我没有找到好的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:58:14.207

把它们放在一个对象中：

```
//object containing all the week's functions
var funcs = {},
    days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];

//build the functions for each day
for(var i = 0; i < days.length; i++) {
    funcs[days[i]] = function() {
        //stuffs
    }

    //or for multiple events/functions, something like
    funcs[days[i]] = {
        onHourShow: function() {},
        onMinuteShow: function() {}
    };
}

jQuery(document).ready(function() {
    var week = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
    for (var i = 0; i < week.length; i++) {
        day = week[i];

        jQuery('#' + day + '_start1').timepicker({
            showLeadingZero: false,
            onHourShow: funcs[day], //or funcs[day].onHourShow, depending on which you do above
            onMinuteShow: funcs[day]
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:59:01.803

如何使用这样的功能：

```
jQuery('#' + day + '_start1').timepicker({
    showLeadingZero: false,
    onHourShow: FuncStart(day),
    onMinuteShow: FuncStart(day)
}); 
```

然后重新定义 FuncStart 以返回相应的函数。例如：

```
function FuncStart(dayarg){

    //define functions
    function dynamicfunction(hour){
        var day = dayarg;
        var tpEndHour = jQuery('#' + dayarg + '_end1').timepicker('getHour');
        // all valid if no end time selected
        if (jQuery('#' + dayarg + '_end1').val() == '') {
            return true;
        }
        // Check if proposed hour is prior or equal to selected end time hour
        if (hour <= tpEndHour) {
            return true;
        }
        // if hour did not match, it can not be selected
        return false;
    }
    return dynamicfunction;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:06:32.353

将它们放入对象中是最好的方法，但请注意您在循环之外创建函数或将所需的索引存储在闭包中。否则，当您运行该函数时，“i”的值将达到最大值。
在您的循环中，`var day = week[i];`将返回未定义，因为`i`将达到 week.length。

```
var fns = {},
    week = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];

function makeDayFn(i){
    return function(){
        console.log(week[i]);
    }
}

for(var i=0,len=week.length;i<len;i++){
    fns[week[i] + "HourFuncStart"] = makeDayFn(i);
}

fns.mondayHourFuncStart();
fns.tuesdayHourFuncStart();
fns.wednesdayHourFuncStart(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T14:07:07.547

通过将括号表示法用于将[字符串回答为 jQuery.function](https://stackoverflow.com/questions/6692593/jquery-convert-string-to-jquery-function-stringvalue)

您可以从当前对象中获取它：

```
onHourShow: this[day + "HourFuncStart"], 
```

根据方法所在的范围，您可能必须传递`this`方法所在的位置，或者专门指向它们。但总的来说，方括号表示法可以从字符串中提取函数，因为方法只是对象的属性。

虽然我必须说，乍得的回答将整个问题转换为使用泛化，这可能是一个更好的解决方案。

# c# - 根据字符串位置对字符串数组进行排序（C#）

> ID：13417912
> 
> 赞同：5
> 
> 时间：2012-11-16T13:48:39.807
> 
> 标签：c#, arrays, string, sorting, position

我想知道如何根据特定的字符串位置对字符串 [] 的项目进行排序。例如，我想按子字符串“ - ”对以下数组进行排序

输入：{xx - c, xxxxx - b, yyy - a, mlllll - d}

预期输出：{yyy - a, xxxxx - b, xx - c, mlllll - d}

到目前为止，我有以下内容：

```
public string[] SortByStringPos(string[] arr, string str, bool ascending)
{
    if (ascending)
    {
        var result = from s in arr
                     where s.Length >= s.IndexOf(str)
                     orderby s[s.IndexOf(str)] ascending
                     select s;

        return result.ToArray();
    }
    else
    {
        var result = from s in arr
                     where s.Length >= s.IndexOf(str)
                     orderby s[s.IndexOf(str)] descending
                     select s;

        return result.ToArray();
    }
} 
```

有人可以给我一个提示...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:56:19.163

```
orderby x=>x.Substring(x.LastIndexOf('-')) 
```

我猜

所以你需要以通常的方式订购它，然后你可以使用它，比如 orderBy .... thenBy

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T14:01:53.410

为了获得更好的性能和设计，我建议您使用：

```
 public void SortByStringPos(string[] arr, string str, bool ascending)
    {
        Array.Sort(arr, new MyStrComparer("-", ascending));
    }

    class MyStrComparer : Comparer<string>
    {
        string delimiter;
        bool isAscending;

        public MyStrComparer(string aStr, bool ascending)
        {
            delimiter = aStr;
            isAscending = ascending;
        }

        public override int Compare(string x, string y)
        {
            var r = GetMySubstring(x).CompareTo(GetMySubstring(y));
            return isAscending ? r : -r;
        }

        string GetMySubstring(string str)
        {
            return str.IndexOf(delimiter) != -1 ? str.Substring(str.LastIndexOf(delimiter)) : string.Empty;
        }

    } 
```

您还可以从代码中的任何位置删除该`SortByStringPos`方法和调用`Array.Sort(arr, new MyStrComparer("-", ascending));`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T14:07:26.860

```
static void Main()
{
    var input = new[] { "xx - c", "xx - b", "yy - a", "ml - d", };
    var delimeter = "-";
    var isAscending = true;

    var res = Sort(input, delimeter, isAscending);
}

static string[] Sort(string[] input, string delimeter, bool isAscending)
{
    var withDelimeter = input.Where(p => p.Contains(delimeter));
    var withoutDelimeter = input.Except(withDelimeter);

    Func<string, string> selector = p => p.Substring(p.IndexOf(delimeter));

    return
        (
            isAscending

                ? withDelimeter.OrderBy(selector)
                    .Concat(withoutDelimeter.OrderBy(p => p))

                : withoutDelimeter.OrderByDescending(p => p)
                    .Concat(withDelimeter.OrderByDescending(selector))
        )
        .ToArray();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T14:39:33.537

用于`Substring`获取字符串的最后一部分。LINQ 查询可以逐步构建。这减少了代码重复（= DRY 原则，不要重复自己）：

```
var query = arr.Where(s => s.Contains(str));
Func<string,string> sortExpr = s => s.Substring(s.IndexOf(str));
if (ascending) {
    query = query.OrderBy(sortExpr);
} else {
    query = query.OrderByDescending(sortExpr);
}
return query.ToArray(); 
```

# iphone - uiview 上不显示文字

> ID：13417913
> 
> 赞同：-1
> 
> 时间：2012-11-16T13:48:40.900
> 
> 标签：iphone, objective-c, cocoa

我在我的 viewController 中定义了一个标签，我还设置了它`@property`并合成了它。我已经在文件所有者和 UIlabel 之间建立了链接`viewDidLoad`。我正在尝试显示此字符串链接：

```
- (void)viewDidLoad {
    getname = [[UILabel alloc] init];
    getname.text = @"hello";
    [super viewDidLoad];
} 
```

但该字符串未显示在 UIView 的标签上。请告诉我在 UIView 上显示字符串需要做什么。视图控制器和 nib 文件具有相同的名称。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    }
    return self;
} 
```

但是当我添加`viewcontroller.m`文件想要在视图中显示某些内容时，它不会响应该代码。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:50:30.330

**如果您使用故事板...**

听起来您正在使用情节提要，在这种情况下，您应该删除`init`，因为情节提要会为您处理：

```
- (void)viewDidLoad
{
    getname.text = @"hello";
    [super viewDidLoad];
} 
```

通过使用`init`情节提要，您正在重新声明对象，因此情节提要找不到它。

**如果您*不*使用情节提要...**

如果您不使用情节提要，则需要将标签添加到视图：

```
- (void)viewDidLoad
{
    getname = [[UILabel alloc] init];
    getname.text = @"hello";
    [self.view addSubview:getname];
    [super viewDidLoad];

} 
```

该行将其`[self.view addSubview:getname];`添加`UILabel`为子视图，以便实际显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:52:20.093

改变你的`viewDidLoad`喜欢：

```
- (void)viewDidLoad
{
    getname.text = @"hello";
    [super viewDidLoad];
} 
```

无需分配`IBOutlet`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:54:19.413

如果您在 xib 中添加了标签，则注释初始化行。

```
- (void)viewDidLoad
{

//getname = [[UILabel alloc] init];

getname.text = @"hello";

[super viewDidLoad];

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-16T13:52:02.227

只需将此功能替换为这段代码

```
- (void)viewDidLoad
{

    getname = [[UILabel alloc] init];

    getname.text = @"hello";

    [self.view addSubview:getname];

    [super viewDidLoad];

} 
```

希望对你有帮助。。

此外，如果您在 .h 文件中使用 IBOutlet，请不要为其分配内存，因为它会自动分配内存。

因此，如果您使用过 IBOutlet 那么您的功能应该是

```
- (void)viewDidLoad
{

    getname.text = @"hello";

    [super viewDidLoad];

} 
```

# java - 在带有 Java 的 SQL 中的参数中使用“%”作为通配符

> ID：13417915
> 
> 赞同：3
> 
> 时间：2012-11-16T13:48:42.983
> 
> 标签：java, sql, oracle, plsql

所以在我的程序中，我有：

```
 private static final String GET_USERS_BY_PARAMS = "select * from user t "
        + "where t.id like %?% "
        + "AND t.name LIKE %?% "
        + "AND t.location LIKE %?% " 
        + "AND t.telephone LIKE %?% "; 
```

上面给出的所有参数都作为 varchar 存储在数据库中。

但是，当我运行以下命令时：

```
statement = connection.prepareStatement(GET_USERS_BY_SEARCH_PARAMS);
            statement.setString(1, userID);
            statement.setString(2, name);
            statement.setString(3, location);
            statement.setString(4, telephone());

            rs = statement.executeQuery(); 
```

我收到一条 SQL 异常，指出存在无效字符。应用程序在 executeQuery 上抛出错误，因此设置参数不是问题。我想知道这是否归结为使用 % 符号，我包括在内，这样您就可以搜索而无需输入确切的用户 ID、名称等。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T13:50:55.387

通配符必须是传递给准备好的语句的值的一部分。所以你需要这样的东西：

```
private static final String GET_USERS_BY_PARAMS = "select * from user t "
    + "where t.id like ? "
    + "AND t.name LIKE ? "
    + "AND t.location LIKE ? " 
    + "AND t.telephone LIKE ? ";

statement = connection.prepareStatement(GET_USERS_BY_SEARCH_PARAMS);
statement.setString(1, "%" + userID + "%");
statement.setString(2, "%" + name + "%");
statement.setString(3, "%" + location + "%");
statement.setString(4, "%" + telephone() + "%"); 
```

顺便说一句：什么数据类型是`user.id`？

如果这是一个数值，LIKE 将无法正常工作。您可能应该明确地将 ID 转换为字符值：`where to_char(t.id) like ?`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T13:51:41.173

使用`CONCAT`功能，它会工作，像这样：`LIKE CONCAT('%', ?, '%')`
或者你也可以使用`LIKE ('%' || ? || '%')`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T13:52:07.970

您可以使用连接运算符编写

```
LIKE ('%' || ? || '%') 
```

# facebook - Facebook：了解用户何时喜欢某个 URL

> ID：13417918
> 
> 赞同：4
> 
> 时间：2012-11-16T13:49:16.850
> 
> 标签：facebook, facebook-graph-api, facebook-like

*`user_id - url`*我可以从桌子上拿一双*`url_like`*。
如前所述，仅有的两列是*`user_id, url`*.

我试图通过连接多个表来通过多种方式获取“喜欢”该 URL 的日期，但没有运气。
许多例子之一可能是

```
选择 url、id、类型、站点 FROM object_url WHERE url IN (
    从 url_like WHERE user_id = {$target} 中选择 url
) 限制 1000",

```

有什么方法可以获取用户喜欢特定 URL 的日期/时间戳？

如前所述，我什至尝试了不可能的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T06:36:32.353

**Facebook 不提供使用喜欢 URL 的时间。而且我认为他们将来不会提供它。它属于 Facebook 隐私政策。**

您可以在用户喜欢 url 时触发事件，并通过 ajax 在数据库中插入时间。如果用户不喜欢并再次喜欢它，则更新相同的记录。我以前曾致力于通过[Javascript 订阅类似事件。SDK](https://developers.facebook.com/docs/reference/javascript/)

[您可以在此处](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)的文档中找到如何订阅 Like ：

```
FB.Event.subscribe('edge.create',
    function(response) {
        alert('You liked the URL: ' + response);
        //Insert your user id with time when user liked by AJAX  
    }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T19:41:45.030

没有 API 会返回创建点赞的时间 - 点赞的相关`/<user id>/feed`故事会告诉您此信息，但并非所有点赞都有与之关联的提要故事，查找故事将非常耗时。

如果您正在使用 Like Button 社交插件，您可以跟踪单击 Like 按钮的时间，但您还需要用户的许可才能查看他们的用户 ID 等，以便有效地记录这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T13:01:48.420

我找到了解决我的问题的解决方案

我依赖 FQL

```
public static $since = '2012/01/01';
...
...

// $target1 stands for "me", it has value of my FB ID
// So I am selecting all links I liked in past year
$object_id_raw = static::$facebook->api(array(
    'method'    => 'fql.query',
    'query' => "SELECT link_id FROM link WHERE owner = {$target1} AND created_time > ".strtotime(static::$since)
));
// Just extracting IDs for later usage
$object_id = array();
foreach($object_id_raw as $oid):
    array_push($object_id, $oid['link_id']);
endforeach;

// - friendId stands for FB ID of my friends
// This query is selecting from links I liked,that means we have them liked both...
// This API call returns object ID's (ID's of links). Do whatever you want with them...
$result = static::$facebook->api(array(
    'method'    => 'fql.query',
    'query' => "SELECT object_id FROM like WHERE object_id IN ('".implode("','", $object_id)."') AND user_id = {$friendId}"
)); 
```

# eclipse - 如何使用 m2e 生成项目导入/更新的源

> ID：13417920
> 
> 赞同：0
> 
> 时间：2012-11-16T13:49:23.003
> 
> 标签：eclipse, maven, m2eclipse, m2e

我曾经在旧 m2e 中将“生成资源”添加到 Maven 的“在项目导入时运行的目标”设置。

现在我有了新版本的 eclispe 和 m2e，设置消失了。

如何自动添加eclipse项目的生成源？

看到这个老问题：

[将多个模块 maven 2 项目导入 Eclipse 工作区时出现的问题](https://stackoverflow.com/questions/2421631/problems-by-import-of-a-multiple-modules-maven-2-project-into-eclipse-workspace)

我正在使用 m2e 1.0.200.20111228-1245，

Eclipse 版本如下 版本：Indigo Service Release 2 Build id：20120216-1857

Maven是：3.0.4（r1232337；2012-01-17 09:44:56+0100）

请。请注意，这是一个集中管理的系统，我没有 root 访问权限等。

# sql - Oracle SQL - 具有 NULL 值的 max()

> ID：13417928
> 
> 赞同：31
> 
> 时间：2012-11-16T13:49:38.087
> 
> 标签：sql, oracle, null

我有一个表，其中包含一系列基于时间的事件，每个事件都有一个开始和结束日期。对于最近（当前）事件，结束日期为 NULL。我试图折叠重复的行，只显示最早的开始日期和最晚的结束日期。由于 NULL 在日期字段中，该行将被忽略。我可以使用 NVL() 模拟结束日期值，但这会导致前端逻辑搜索并替换该值。

反正有没有让 max() 函数将 NULL 排序为高？

```
CREATE TABLE CONG_MEMBER_TERM
(
  CONG_MEMBER_TERM_ID  NUMBER(10)               NOT NULL,
  CHAMBER_CD           VARCHAR2(30 BYTE)        NOT NULL,
  CONG_MEMBER_ID       NUMBER(10)               NOT NULL,
  STATE_CD             CHAR(2 BYTE)             NOT NULL,
  DISTRICT             NUMBER(10),
  START_DT             TIMESTAMP(6) WITH TIME ZONE,
  END_DT               TIMESTAMP(6) WITH TIME ZONE
) 
```

此查询有效，但删除了结束日期为 NULL 的行。

```
select CONG_MEMBER_ID, 
       district, 
       min(start_dt), 
       max(end_dt)
  from CONG_MEMBER_TERM
 where CONG_MEMBER_ID = 1716
 group by CONG_MEMBER_ID, district; 
```

这个查询解决了这个问题，但现在我有一个“虚拟”结束日期值（9/9/9999）。我宁愿不必编写代码。

```
select CONG_MEMBER_ID, 
       district, 
       min(start_dt), 
       max(nvl(end_dt, to_date('9/9/9999', 'mm/dd/yyyy')))
  from CONG_MEMBER_TERM
 where CONG_MEMBER_ID = 1716
 group by CONG_MEMBER_ID, district; 
```

谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-16T14:09:37.243

`max(end_dt) keep (dense_rank first order by end_dt desc nulls first)`

**更新：**

[SQL小提琴](http://sqlfiddle.com/#!4/bc735/1)

**Oracle 11g R2 模式设置**：

```
CREATE TABLE t
    (val int, s date, e date)
;

INSERT ALL 
    INTO t (val, s, e)
         VALUES (1, sysdate-3, sysdate-2)
    INTO t (val, s, e)
         VALUES (1, sysdate-2, sysdate-1)
    INTO t (val, s, e)
         VALUES (1, sysdate-1, null)
    INTO t (val, s, e)
         VALUES (2, sysdate-1, sysdate-.5)
    INTO t (val, s, e)
         VALUES (2, sysdate-.5, sysdate-.25)
SELECT * FROM dual
; 
```

**查询 1**：

```
select val, min(s), max(e) keep (dense_rank first order by e desc nulls first)
from t group by val 
```

**[结果](http://sqlfiddle.com/#!4/bc735/1/0)**：

```
| VAL |                          MIN(S) | MAX(E)KEEP(DENSE_RANKFIRSTORDERBYEDESCNULLSFIRST) |
---------------------------------------------------------------------------------------------
|   1 | November, 13 2012 14:15:46+0000 |                                            (null) |
|   2 | November, 15 2012 14:15:46+0000 |                   November, 16 2012 08:15:46+0000 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-24T11:58:17.033

```
select CONG_MEMBER_ID 
,      district
,      min(start_dt)
,      NULLIF(MAX(NVL(end_dt
                     ,TO_DATE('9999-09-09','YYYY-MM-DD')
                     )
                 )
             ,TO_DATE('9999-09-09','YYYY-MM-DD')
             )
from  CONG_MEMBER_TERM
where CONG_MEMBER_ID = 1716
group by CONG_MEMBER_ID
,        district
; 
```

# asp.net - 尝试获取或设置配置文件属性时，asp.net 出现错误

> ID：13417936
> 
> 赞同：0
> 
> 时间：2012-11-16T13:50:02.940
> 
> 标签：asp.net, web-config, visual-studio-2012, profile, sql-server-2012-express

我无法弄清楚为什么会收到此错误消息：

```
A network-related or instance-specific error occurred while establishing a connection to 
SQL Server. The server was not found or was not accessible. Verify that the instance name
is correct and that SQL Server is configured to allow remote connections. (provider: SQL
Network Interfaces, error: 26 - Error Locating Server/Instance Specified) 
```

我有一个简单的成员资格和角色管理器设置并正常工作，如下所示：

```
<connectionStrings>
  <add name="GustaafConnectionString" connectionString="Data Source=ROBBIE-PC\PHL;Initial Catalog=Gustaaf;Integrated Security=True" providerName="System.Data.SqlClient"/>
</connectionStrings>

<authentication mode="Forms">
  <forms timeout="1440" protection="All" slidingExpiration="true"/>
</authentication>
<anonymousIdentification enabled="true"/>

<roleManager enabled="true" defaultProvider="RoleProvider">
  <providers>
    <add connectionStringName="GustaafConnectionString" applicationName="Gustaaf" name="RoleProvider" type="System.Web.Security.SqlRoleProvider"/>
  </providers>
</roleManager>

<membership defaultProvider="MembershipProvider">
  <providers>
    <clear/>
    <add name="MembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="GustaafConnectionString" 
         applicationName="Gustaaf" enablePasswordRetrieval="true" enablePasswordReset="false" requiresQuestionAndAnswer="true" 
         requiresUniqueEmail="false" passwordFormat="Encrypted"/>
  </providers>
</membership> 
```

这很好，但错误发生在这里：

```
<profile>
  <properties>
    <add
      name="numberOfVisits"
      type="Int32"
      defaultValue="0"
      allowAnonymous="true" />
    <group name="Address">
      <add name="City"
           defaultValue="NA"/>
      <add name="PostalCode" 
           type="Int32"
           defaultValue="0"/>
      <add name="Street"
           defaultValue="NA" />
      <add name="Number" 
           type="Int32"
           defaultValue="0" />
    </group>
    <add name="PhoneNumber"
         defaultValue="NA"/>
    <add name="DateOfBirth" type="DateTime"
         defaultValue="GetDate()"/>
  </properties>
</profile> 
```

一旦我尝试从网站（例如母版页）访问这些属性，我就会收到上面的错误消息。这就是我正在做的事情：

```
protected void Page_PreRender()
{
    if (Profile.IsAnonymous)
    {
        Profile.numberOfVisits++;
    }
} 
```

有人可以向我解释为什么我会收到此消息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:39:19.460

您需要像为角色/成员所做的那样为配置文件定义一个提供者，所以像这样 -

```
<profile defaultProvider="SqlProvider">
    <providers>
    <clear/>
    <add name="SqlProvider"
        type="System.Web.Profile.SqlProfileProvider"
        connectionStringName="GustaafConnectionString"
        applicationName="Gustaaf" />
    </providers>
    <properties>
        <!-- Properties Here -->
    </properties>
</profile> 
```

请参阅此处以获取完整参考[http://msdn.microsoft.com/en-us/library/system.web.profile.sqlprofileprovider.aspx](http://msdn.microsoft.com/en-us/library/system.web.profile.sqlprofileprovider.aspx)

# asp.net - 关于 IIS APPPOOL

> ID：13417937
> 
> 赞同：1
> 
> 时间：2012-11-16T13:50:09.360
> 
> 标签：asp.net, wcf, iis

我必须调试托管在本地 IIS 中的 WCF。每次我必须附加两个进程“w3wp.exe”。

一个 ID 是 7624，另一个是 8372。

用户：一种是“IIS APPPOOL\ASP.NET V4.0 集成[管理员]

```
 the other one is "IIS APOOL DefaultAppPool[administrator] 
```

问题：

1.  它们是什么？（谷歌搜索但博线索）
2.  我可以只附加一个进程而不是全部吗？

谢谢

**更新：** 查看 IIS 映像： ![iis 池](../Images/04fd7906c403b235d71e6ce533d5ab00.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:58:32.443

只需在您的 IIS 管理控制台中检查您的站点所在的应用程序池，然后附加到正确的应用程序池。可能，当您使用 WCF 时，您在 .NET 4 下运行，因此在您链接的第一个进程下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:53:34.820

它们是应用程序池标识。这是为网站分配权限的更新（和更安全）的方式。本质上，站点在其自己的应用程序池上运行，因此您可以根据该池为文件分配权限。

请参阅：[http ://www.iis.net/learn/manage/configuring-security/application-pool-identities](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:01:56.873

应用程序池是在同一工作进程下运行的一组应用程序。

在实践中重要的是，一个应用程序池只能为具有相同版本的 .NET（.NET CLR 版本 - 准确地说）的应用程序提供服务。还要记住，来自同一个应用程序池的应用程序将“共享”工作进程的回收。

因此，您应该查看您的服务在哪个应用程序池中运行的 IIS，并仅调试与此应用程序池关联的进程。

# php - PHP mysqli_result：使用带有 fetch_object 的 Traversable 接口

> ID：13417944
> 
> 赞同：4
> 
> 时间：2012-11-16T13:50:26.727
> 
> 标签：php, mysqli

PHP mysqli_result 类实现 Traversable 接口已有一段时间了。这提供了一些有趣的可能性，例如以下代码：

```
<?php

$db = new mysqli( '...' );

$result = $db->query( '...' );

foreach( $result as $row ) {
   //$row is an associative array containing the fetched values
} 
```

现在，我非常喜欢这个，但是在我目前正在研究的库中，我希望获取**对象**，而不是**关联数组**。我还希望能够将一个类传递给它，这样我就可以用它创建一个简单的模型系统

为此，我像这样扩展它：

```
<?php

class mysqli_result_extension extends mysqli_result {

    protected $result_class;

    public function set_result_class( $class ) { $this->result_class = $class; }

    public function function_to_overwrite() {

        return $this->fetch_object( $this->result_class );
    }
} 
```

**我的问题和我对你的问题：**

我现在如何从**fetch_assoc**切换到**fetch_object**？我想覆盖 Traversable 接口用来返回结果的方法，但它没有定义任何（[http://php.net/manual/en/class.traversable.php](http://php.net/manual/en/class.traversable.php)）

那么我需要覆盖什么才能从 fetch_assoc 切换到 fetch_object 并能够将我的 $result_class 传递给它，以便我能够执行以下操作：

```
<?php

$db = new mysqli_extension( '...' );

$posts = $db->query( 'select * from posts' );
//$result is object of type mysqli_result_extension

$posts->set_result_class( 'post' );

foreach( $posts as $post ) {
   //$post is an instance of class 'post'
} 
```

我不想要一些肮脏的东西，比如覆盖 fetch_assoc 并只返回其中的对象

提前感谢您的帮助和意见

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-30T11:01:01.687

的（姑且称之为）traversal-fetch-mode*`mysqli_result`*是不受影响的。因此，默认情况下，关联数组（列名作为键，值作为值）就像`mysqli_result::fetch_assoc()`它一样。

所以这需要一个自己`Iterator`来完成这项工作。那么传统上，Mysqli 结果的非 foreach 迭代是什么样子的呢？对，`while()`循环：

```
while($row = $result->fetch_assoc())
{
   ...
} 
```

内容为：当 fetch-method 不返回时`NULL`继续。这是创建迭代的常用形式。

对于这种迭代，我通常使用 a `FetchingIterator`，它是一个具体的迭代器，它将 PHP 特定`Iterator`接口（rewind、valid、current、key、next）转换为更简化的接口。那个简化的方法是：倒带下一个，下一个下一个和有效直到`NULL`- 这与循环几乎相同，`while`可用于类似的工作 API，如已弃用的 mysql 甚至数组（比较[`array_shift`](http://php.net/array_pop)等）。它也类似于不同编程语言中迭代器的其他实现，这里特别是Java（比较[*迭代器设计模式（设计模式的源制作指南）*文章](http://sourcemaking.com/design_patterns/iterator)）。

去年，我在我的文章[*Some PHP Iterator Fun（2012 年 2 月）*](http://hakre.wordpress.com/2012/02/28/some-php-iterator-fun/)[`FetchingIterator`中确实概述了它的基本内容，并且可以在 Iterator Garden](https://github.com/hakre/Iterator-Garden)中找到它的一个大大改进的标准实现，它可以*轻松地*允许你做你想做的事情。

让我们看一个示例应用程序：

```
class ObjectFetchIterator extends FetchingIterator
{
    public function __construct(mysqli_result $result, $class) {

        parent::__construct(function() use ($result, $class) {
            return $result->fetch_object($class);
        });
    }
} 
```

`mysqli_result::fetch_object()`以前在mysqli 结果中的方法`while(...)`现在已移至 a 的构造函数中。*`FetchingIterator`*这是一个非常直接的实现。或者，也可以覆盖受保护的`fetchNext()`方法，但我只注意到它，因为这里不需要它。

然后使用示例非常简单：

```
$db       = new mysqli('...');    
$result   = $db->query('...');    
$iterator = new ObjectFetchIterator($result, 'myClass');

/* @var $row myClass */
foreach ($iterator as $row)
{
   // $row is a myClass now based on fetched values
} 
```

正如这个例子所示，没有必要为此使用 PDO，这听起来像是一个非常懒惰的借口：只为这个小细节改变整个数据库层？不！情况恰恰相反：在此处使用迭代器`foreach`允许您将代码从具体的数据库访问库中解耦到泛型类型（之前也可以使用数组，但是数组远没有对象那么不同类型）。

希望这会有所帮助，即使答案来得有点晚。刚刚引起我的注意，到目前为止还没有真正回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:02:46.347

> 笔记：
> 
> 这是一个内部引擎接口，无法在 PHP 脚本中实现。必须改为使用 IteratorAggregate 或 Iterator。在实现扩展 Traversable 的接口时，请确保在 implements 子句中的名称之前列出[IteratorAggregate](http://www.php.net/manual/en/class.iteratoraggregate.php)或[Iterator 。](http://www.php.net/manual/en/class.iterator.php)

即，您将在[http://docs.php.net/class.iterator](http://docs.php.net/class.iterator)和/或[http://docs.php.net/class.iteratoraggregate找到接口定义](http://docs.php.net/class.iteratoraggregate)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:06:29.637

正如我在评论中所说，使用 PDO 可以轻松完成您想要的操作。只需设置`PDO::ATTR_DEFAULT_FETCH_MODE`属性，当您执行 foreach 循环时，它将执行适当类型的获取。

您还可以设置`PDO::ATTR_STATEMENT_CLASS`属性来定义要使用的类。

```
$pdo->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_CLASS);
$pdo->setAttribute(PDO::ATTR_STATEMENT_CLASS,array('classname',$constructorArgs)); 
```

有关详细信息，请参阅[http://php.net/manual/en/pdo.setattribute.php](http://php.net/manual/en/pdo.setattribute.php)。

使用该解决方案，您需要更改`ATTR_STATEMENT_CLASS`每个查询的属性，具体取决于您要实例化的类。

或者，您可以将其设置为在查询中指定类名：

```
$db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_CLASS | PDO::FETCH_CLASSTYPE);
$stmt = $db->query("SELECT 'classname', * FROM `table` WHERE `id` = 1;"); 
```

只需将相关的类名添加到您的查询中作为要选择的第一个字段。

请参阅有关此相关问题的答案之一[In PHP, How do I set default PDO Fetch Class?](https://stackoverflow.com/questions/7617275/in-php-how-do-i-set-default-pdo-fetch-class) 了解更多信息。

# datagrid - 来自检票口网格控件的链接

> ID：13417950
> 
> 赞同：1
> 
> 时间：2012-11-16T13:50:35.400
> 
> 标签：datagrid, popupwindow

我正在使用在 Apache Wicket 中创建的网格。在其中一列的单元格中，我有一个图标。单击该图标时，应创建一个弹出窗口，显示该行的数据。这应该如何实现，以便仅当用户单击图标时才创建和填充弹出窗口？我可以从网格单元直接链接到将创建弹出窗口的 java 代码吗？

# c# - 一个简单的助手类不起作用

> ID：13417954
> 
> 赞同：4
> 
> 时间：2012-11-16T13:50:55.787
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

很抱歉问了这么简单的问题，但我花了很长时间试图解决这个问题。最后，我决定问你。

让我们从代码库开始：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
namespace Navigation.Helpers
{
    public static class NavigationBarSE
    {
        public static MvcHtmlString RenderNavigationBarSE(this HtmlHelper helper, String[] includes)
        {
            return new MvcHtmlString("Y U no Work??");
            //NavTypeSE res = new NavTypeSE(includes);
            //String ress = res.toString();
            //return new MvcHtmlString(ress);

        }    
    }
} 
```

在原始形式中，这个助手需要返回一个由 NavTypeSE 类生成的字符串。但最后，为了得到一个结果，我只希望它为我返回一个字符串......但它没有这样做......

在你问之前，我可以说，

```
<add namespace="Navigation.Helpers"/> 
```

存在于 Views 文件夹中的我的 Web.config 文件中。

有关详细信息，我的 NavTypeSE 类如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Navigation.Helpers
{
    //Creates a Navigation Menu Type which includes Previous, Next and Validate Buttons
        public class NavTypeSE
        {
        Boolean pr, nt, vld;
        Boolean Previous { get; set; }
        Boolean Next { get; set; }
        Boolean Validate { get; set; }
        public NavTypeSE(Boolean Previous, Boolean Next, Boolean Validate)
        {
            this.pr = Previous;
            this.nt = Next;
            this.vld = Validate;
        }
        public NavTypeSE() { }

        public NavTypeSE(String[] inc)
        {
            for(int i=0; i<inc.Length; i++)//foreach (String s in inc)
            {
                String s = inc[i]; // Don't need for foreach method.
                if (s.Equals("previous")||s.Equals("Previous"))
                {
                    this.pr = true;
                }
                else if (s.Equals("next") || s.Equals("Next"))
                {
                    this.nt = true;
                }
                else if (s.Equals("validate") || s.Equals("Validate"))
                {
                    this.vld = true;
                }
                else
                {
                    this.pr = false; this.nt = false; this.vld = false;
                }
            }

        public String toString()
        {
            return "Previous: " + this.pr + ", Next: " + this.nt + ", Validate: " + this.vld;
        }
    }
} 
```

另外，在我看来，我称这个助手如下：

```
@{
    String[] str = new String[] { "Previous", "next", "Validate" };
    Html.RenderNavigationBarSE(str);
} 
```

这只是一个项目的基础。而且我是 C# 和 ASP.NET MVC 平台的初学者。很抱歉浪费了您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:03:04.010

您`RenderNavigationBarSE`在 Response 中没有写入任何内容，只是返回一个`MvcHtmlString`.

因此，您需要`@`在方法调用之前放置一个告诉 Razor 引擎您要将返回`MvcHtmlString`的内容写入响应中（否则在代码块中它只是执行您的方法并丢弃返回的值）

```
@{
    String[] str = new String[] { "Previous", "next", "Validate" };
}

@Html.RenderNavigationBarSE(str); 
```

您可以阅读有关 Razor 语法的更多信息：

*   [使用 Razor 语法 (C#) 的 ASP.NET Web 编程简介](http://www.asp.net/web-pages/tutorials/basics/2-introduction-to-asp-net-web-programming-using-the-razor-syntax)

*   还有一个[C# Razor 语法快速参考](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)

# c# - 在 C# 中查找注册表项

> ID：13417955
> 
> 赞同：7
> 
> 时间：2012-11-16T13:50:56.243
> 
> 标签：c#, registrykey

我正在开发一个允许我从 Windows 7 PC 中删除注册表项的项目。具体来说，我正在尝试制作一个程序，允许我通过 ProfileList 键从机器中删除配置文件。我的问题是，无论我尝试什么，在开始随机删除内容之前，我似乎都无法正确读取我想要执行的密钥。我的代码是

```
 RegistryKey OurKey = Registry.LocalMachine;
            OurKey = OurKey.OpenSubKey(@"SOFTWARE\Microsoft\WindowsNT\CurrentVersion\ProfileList", true);

            foreach (string Keyname in OurKey.GetSubKeyNames())
            {
                MessageBox.Show(Keyname);
            } 
```

此代码运行但不返回任何内容（无消息框）。有什么想法为什么不呢？

**编辑：**

感谢你们，我得到了要加载的顶级密钥，但它只显示文件夹/密钥名称（例如：S-1-5-21-3794573037-2687555854-1483818651-11661）我需要的是阅读下面的密钥该文件夹以查看 ProfilePath 是什么。会有更好的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T13:58:56.590

正如 Lloyd 所指出的，您的路径应该使用“Windows NT”。如有疑问，`regedit`请始终使用手动检查注册表。

编辑：要进行编辑，您只需`GetValue`在找到的键上即可，以下代码应该可以满足您的要求：

```
RegistryKey OurKey = Registry.LocalMachine;
OurKey = OurKey.OpenSubKey(@"SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList", true);

foreach (string Keyname in OurKey.GetSubKeyNames())
{
    RegistryKey key = OurKey.OpenSubKey(Keyname);

    MessageBox.Show(key.GetValue("KEY_NAME").ToString()); // Replace KEY_NAME with what you're looking for
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:02:12.057

`Windows NT`

请不要错过空间

# trim - Xcode如何修剪带有特殊字符$的字符串

> ID：13417966
> 
> 赞同：1
> 
> 时间：2012-11-16T13:51:42.650
> 
> 标签：trim, texttrimming

我有一个具有这种值的字符串`/finocchi$FINOCCHamelo`

现在我需要一个只有单词这一部分的新字符串`FINOCCHamelo`

我试过这个：

```
NSString * newString = [item.label stringByReplacingOccurrencesOfString:@"$" withString:@""]; 
```

但这是不对的，因为将 $ 更改为空白字符。我需要在 $ 之后过滤字符串我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:04:59.303

假设在所有情况下，您的字符串中只有一个 $，并且您需要 $ 之后的值。

```
NSArray *brokenStrings = [item.label componentsSeparatedByString:@"$"];
NSString *filteredString = [brokenStrings objectAtIndex:1]; 
```

有很多方法可以做到这一点：您可以从这些方法中选择任何一种，或者 NSString 中提供了十几种其他方法。

```
– componentsSeparatedByString:
– substringFromIndex:
- rangeOfString:
– stringByTrimmingCharactersInSet: 
```

# javascript - 将记录集导出到 HTML 表（对象不支持此属性或方法）

> ID：13417969
> 
> 赞同：0
> 
> 时间：2012-11-16T13:51:48.013
> 
> 标签：javascript

我似乎无法弄清楚为什么我会收到错误“对象不支持此属性或方法”据我所知，我似乎在做所有事情。

任何帮助是极大的赞赏。

谢谢

```
function test() {
    try {
        alert("running function test...")
        var cn      = new ActiveXObject("ADODB.Connection")
        var sql     = "SELECT * FROM tbl_rssims"
        var db      = "G:\\AS\\Asf\\ASF\\RSSIMS\\db\\rssims.mdb"
        cn.Open("Provider=Microsoft.Jet.OLEDB.4.0;Data Source = " + db + "")

        rs = cn.Execute(sql);

                var trs = [ ];
                while ( ! rs.EOF )
                {
                    var tr = [ ];
                    for ( var td = 1; td <= 2; ++td )
                    {
                        if ( ! rs.EOF ) 
                        {
                            var flds = [ ];
                            for ( var f = 0; f < rs.fields.length; ++f )
                            {
                               flds.push( rs.fields(f).value );
                            }
                            trs.MoveNext();
                            tr.push( flds.join("<br/>") );

                        } else {
                            tr.push( "&nbsp;" );
                        }
                    }
                    trs.push( "<td>" + tr.join("</td><td>") + "</td>\n" );
                }

        rs.close
        cn.close

        var html = '<!DOCTYPE html>\n'
                         + "<html><body" +
             + '<table style="border: none; table-layout: fixed; width: 100%; text-align: left;" cellpadding="0" cellspacing="0">\n'
                         + "<tr>" + trs.join("</tr><tr>") + "</tr>"
                         + '</table></body></html>';
        window.open('','').document.write(html)

    }//end of try

    catch(e) {

        alert(e.description)

    }

}//end of function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:02:18.450

这个问题很难解决，因为您没有告诉我们是哪一行引发了错误......**但是**当您可能想要在此处访问数组时，您似乎正在尝试调用一个函数：

```
flds.push( rs.fields(f).value ); 
```

将其更改为

```
flds.push( rs.fields[f].value ); 
```

你应该没事。

# 编辑

现在我们可以处理 window.open 方法...

```
var win = window.open("","");
win.onload = function() {
    win.document.documentElement.innerHTML = html;
}; 
```

你可以试试这个，看看它是否有帮助。但同样，知道实际错误在哪里会更有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:26:18.703

事实证明，对象的问题是 trs.movenext()，它应该是 rs.Movenext()，HTML 的实际编写没有任何问题。

感谢大家的帮助。

# cocoa - 使用 iOS 5 和 RestKit 设置 CoreData 应用程序的正确方法是什么

> ID：13417973
> 
> 赞同：1
> 
> 时间：2012-11-16T13:51:53.770
> 
> 标签：cocoa, ios5, core-data, restkit, nsmanagedobject

大家好，我已经用 iOS5 构建了几个应用程序，现在我将深入研究 CoreData。什么是正确的方法？很多指南是指旧的 XCode 版本，在项目创建向导中，开发人员可以选择“使用 CoreData”。这样，您将自动获得对 NSManagedObjectContext 的引用。看来这个选项已经不存在了。所以现在怎么办？我已经阅读了 UIManagedDocument，但我不明白它是如何关联的：persistentStoreCoordinator、managedObjectModel、managedObjectContext。此外，我需要使用 RestKit 完成所有这些工作，这增加了对正确方法的困惑。我需要有人解释或指出正确的方向。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:44:09.367

用户1170896,

使用 Xcode 4.5 中的 master-detail 项目，您可以选择 Core Data 选项并获取其所有样板代码。

安德鲁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:35:53.000

1 个月前刚开始使用 RestKit / Core Data。我阅读了很多教程，以或多或少地熟悉这些东西。我读过的最好的教程之一是：http: [//mobile.tutsplus.com/tutorials/iphone/advanced-restkit-development_iphone-sdk/](http://mobile.tutsplus.com/tutorials/iphone/advanced-restkit-development_iphone-sdk/)

在使用 RestKit 时，例如在 Master-Detail-View 项目模板中创建新项目时的“使用核心数据”选项没有意义。例如 NSPersistentStoreCoordinator 由 RKManagedObjectStore 管理。NSManagedObjectContext 在后台自动创建。请参阅附加的示例代码以了解它是如何工作的。

一个简单的 RestKit 设置如下所示：

```
objectManager = [RKObjectManager managerWithBaseURLString:@"http://x.y.z.a"];

NSString *databaseName = @"XYZ.sqlite";
managedObjectStore = [RKManagedObjectStore objectStoreWithStoreFilename:databaseName];
objectManager.objectStore = managedObjectStore;

RKManagedObjectMapping *customerMapping = [RKManagedObjectMapping mappingForClass:[Customer class] inManagedObjectStore:objectManager.objectStore];
[customerMapping mapKeyPathsToAttributes:@"Id", @"customerid", nil];
[customerMapping mapKeyPathsToAttributes:@"Name", @"name", nil];
[customerMapping mapKeyPathsToAttributes:@"Firstname", @"firstname", nil];
customerMapping.primaryKeyAttribute = @"customerid";

//[other mappings incl. relationships]

[objectManager.mappingProvider setObjectMapping:reservationMapping forResourcePathPattern:@"/api/xyz"]; 
```

可以通过 NSFetechedResultsController 访问存储在 Core Data 中的数据：

```
NSFetchedResultsController *fetchedResultsController;
fetchedResultsController = [Customer fetchAllSortedBy:@"firstname" ascending:YES withPredicate:nil groupBy:@"firstname"];
fetchedResultsController.delegate = self; 
```

# php - 有没有办法阻止访问者查看帖子？

> ID：13417974
> 
> 赞同：2
> 
> 时间：2012-11-16T13:51:58.953
> 
> 标签：php

假设页面是`example.com/blog/data.php`. 我正在使用`file_get_contents`在另一个脚本页面中获取内容。现在，我想：

1.  禁止 google 搜索对 ​​data.php 页面进行爬取和索引。
2.  禁止访客访问

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:54:12.987

如果请求 url 是`example.com/blog/data.php`，您可以重定向到另一个页面，但更简单、更合乎逻辑的解决方案是将文件移出您的 web-root。

**编辑：**如果您真的想将文件保留在 web-root 中，您可以在您不想直接访问的脚本顶部使用类似这样的内容：

```
if ($_SERVER['REQUEST_URI'] === $_SERVER['SCRIPT_NAME'])
{
  header('Location: /');    // redirect to home page
} 
```

但是，这可能无法与`file_get_contents`（您需要从结果中删除这些行）结合使用，您可以`include`改为使用文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:54:26.790

不要放在`data.php`网络根目录下。将其保存在并行目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:54:50.520

只需为授权用户应用访问限制。您可以通过使用 url 参数作为密码访问您的页面以最简单的方式完成此操作：

example.com/blog/data.php?secret=someblah

并在您的第一个文件 data.php 中执行以下操作：

```
<?php
if (!isset($_GET['secret']) || $_GET['secret'] != 'someblah')) exit();
?> 
```

但是，建议不要在公共计算机上使用它，因为它不安全，但它是原始的身份验证原理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T13:55:28.863

您可以通过 GET 传递令牌。总的来说，你的方式有点错误。为什么不将 data.php 逻辑合并到调用它的脚本中。

# nhibernate - NHibernate - 插入与 identity_insert ON

> ID：13417976
> 
> 赞同：1
> 
> 时间：2012-11-16T13:52:01.073
> 
> 标签：nhibernate, identity-insert

我有一个问题，我试图将实体重新插入到我的数据库中。用以下单元测试说明：

```
 // entity mapped to dbo.IdentityInsertTest table
        // dbo.IdentityInsertTest has an IDENTITY Primary Key, Id
        var id = (long)NHibernateSession1.Save(new IdentityInsertTest());
        NHibernateSession1.Flush();

        // delete previously created row
        ExecuteNonQuery("DELETE FROM dbo.IdentityInsertTest");

        try
        {
            // set entity insert off so that I can re-insert
            NHibernateSession2.CreateSQLQuery("SET IDENTITY_INSERT dbo.IdentityInsertTest ON").UniqueResult();

            // re-create deleted row with explicit Id
            NHibernateSession2.Save(new IdentityInsertTest { Id = id });
            NHibernateSession2.Flush();

            Assert.AreEqual(1, ExecuteScalar("SELECT COUNT(1) FROM dbo.IdentityInsertTest"));

            // this assert fails: expected 1, actual 2
            Assert.AreEqual(id, ExecuteScalar("SELECT TOP 1 [Id] FROM dbo.IdentityInsertTest"));
        }
        finally
        {
            NHibernateSession2.CreateSQLQuery("SET IDENTITY_INSERT dbo.IdentityInsertTest OFF").UniqueResult();
        } 
```

我的映射很简单：

```
<class name="IdentityInsertTest" table="IdentityInsertTest">
    <id name="Id" type="long">
        <generator class="native" />
    </id>

    <property name="Data" type="int" not-null="false" />
</class> 
```

据我所知，问题是 NHibernate 生成器仍然以某种方式从 SQL 调用身份生成，即使我已将其关闭。有没有办法解决？

编辑：我最初在设置 IDENTITY_INSERT 时忘记执行“UniqueResult()”，但这似乎不是错误的根源。仍然得到相同的结果

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T14:18:19.620

你实际上并没有执行你的 SQLQuery，这应该可以解决问题

```
 IQuery sqlQry = NHibernateSession2.CreateSQLQuery("SET IDENTITY_INSERT dbo.IdentityInsertTest ON");
 object ret = sqlQry.UniqueResult(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T15:28:22.937

只是想知道您在这里关于删除/重新添加而不是不删除而只是更新的逻辑....

但是，如果 NHibernate 妨碍了您并且您无法更改删除身份列，那么有一些可怕的解决方法......

如果你想添加一条记录，`bottom`那么你可以试试这个： -

```
var sql = "DECLARE @id long = 0;
    SELECT @id = MAX(Id) + 1 FROM IdentityInsertTest;
    DBCC CHECKIDENT(IdentityInsertTest, RESEED, @id);";

    NHibernateSession2.CreateSqlQuery(sql).ExecuteUpdate();

    ... now save the entity normally 
```

**或者**，如果您想在`middle`表的某处添加一条记录，那么您将不得不手动构建 SQL：-

```
var sql = "SET IDENTITY_INSERT dbo.IdentityInsertTest ON; 
    INSERT INTO IdentityInsertTest(Id, Data) Values (:id, :data)
    VALUES (:id, :data);
    SET IDENTITY_INSERT dbo.IdentityInsertTest OFF;";

    NHibernateSession2.CreateSqlQuery(sql)
      .SetInt64("id", id)
      .SetInt32("data", data)
      .ExecuteUpdate(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T16:59:21.027

注意：我已将此标记为答案，因为它直接回答了问题，但是，最后我使用了上面评论的软删除选项

问题是

1.  我没有在 save 方法中明确指定 Id
2.  即使我有，set identity_insert 也会在另一个查询中执行。那个是通过使用事务来修复的

    ```
    // entity mapped to dbo.IdentityInsertTest table
    // dbo.IdentityInsertTest has an IDENTITY Primary Key, Id
    var id = (long)NHibernateSession1.Save(new IdentityInsertTest());
    NHibernateSession1.Flush();

    // delete previously created row
    ExecuteNonQuery("DELETE FROM dbo.IdentityInsertTest");

    try
    {
        NHibernate.ITransaction txn;
        using (txn = SelectSession1.BeginTransaction())
        {
            // set entity insert off so that I can re-insert
            NHibernateSession2.CreateSQLQuery("SET IDENTITY_INSERT dbo.IdentityInsertTest ON").UniqueResult();

            // re-create deleted row with explicit Id
            NHibernateSession2.Save(new IdentityInsertTest(), id);
            NHibernateSession2.Flush();

            txn.Commit();
        }

        Assert.AreEqual(1, ExecuteScalar("SELECT COUNT(1) FROM dbo.IdentityInsertTest"));

        // this assert fails: expected 1, actual 2
        Assert.AreEqual(id, ExecuteScalar("SELECT TOP 1 [Id] FROM dbo.IdentityInsertTest"));
    }
    finally
    {
        NHibernateSession2.CreateSQLQuery("SET IDENTITY_INSERT dbo.IdentityInsertTest OFF").UniqueResult();
    } 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T14:57:28.003

选择另一种密钥生成策略，您尝试做的是一个非常糟糕的主意。标识列是一个人工主键，它不应该有任何意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-30T02:27:49.763

不得不说，这个问题困扰了我很久。即使通过我之前执行 sql "SET IDENTITY_INSERT dbo.IdentityInsertTest ON" 然后运行 ​​Nihbernate 代码，它仍然无法正常工作。有2点需要采取更多的attation。

首先，您必须在代码中使用 Transaction。

```
NHibernate.ITransaction txn;
using (txn = SelectSession1.BeginTransaction())
{
    NHibernateSession2.CreateSQLQuery("SET IDENTITY_INSERT dbo.IdentityInsertTest ON").UniqueResult();

    ...

    NHibernateSession2.Flush();
    txn.Commit();
} 
```

其次，必须使用"Id(x => x.Id).GeneratedBy.Assigned().Column **(** "Id");" 在您的映射部分。

# actionscript-3 - 在 as3 中重新加载场景

> ID：13417984
> 
> 赞同：-1
> 
> 时间：2012-11-16T13:52:39.807
> 
> 标签：actionscript-3

我用ActionScript 3制作了一个flash游戏。我希望当角色掉进水或沼泽或他的分数=0时，游戏从头开始。我想从第一个
加载**场景。**我是as3的初学者。请帮我详细说明。但我不知道该写什么代码。我很感激你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T01:03:34.233

我只能建议将您的关卡因变量分组并编写您自己的用于初始化和启动游戏的 reset() 方法。然后在满足其中一个失败条件时调用它以重新开始游戏。

据我所知，这可能并不总是一件快速而干净的事情，我也不知道有任何单一的“一刀切”的解决方案不会导致任何进一步的问题。这更多地与您的设计和布局游戏代码有关。

# jquery - $.ajax() 优先级

> ID：13417985
> 
> 赞同：2
> 
> 时间：2012-11-16T13:52:43.353
> 
> 标签：jquery, asp.net-mvc, razor

我有下一个运行良好的 js 函数：

```
$(function () {
    $(".country").click(function () {
        var countries = Array();
        $(".country:checked:enabled").each(function(i, element){
            countries[i] =  $(element).attr("id");
        });
        countries_string = countries.join(",");            
        $('#scroll').scrollTop(0);
        $.ajax({
            type: 'POST',
            url: '@Url.Action("CheckBoxCountryFilter", "CheckBox")',
            data: {countries:countries_string},
            success: function (result) {
                //console.log(result);
                $("#wineResult").html(result);
            }             
        });
        if(countries.length > 0){
            $("#countryImage").html('<img src="/Content/Images/icons/check.png">');            
        }else{
            $("#countryImage").html('');
        }
        $.ajax({
            url: '@Url.Action("ArtikelNumber", "CheckBox")',
            type: 'POST',                
            success: function (result) {
                $("#artikelNumber").html(result);
            }
        }); 
    });
}); 
```

但是有一个问题是第一个 $.ajax() 没有先执行，我可以做一些第一个 $.ajax() 曾经先执行的事情吗？谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T13:54:41.273

您可以通过将第二个`$.ajax`呼叫移动到`success`第一个呼叫来强制执行此操作

```
$(function () {
    $(".country").click(function () {
        var countries = Array();
        $(".country:checked:enabled").each(function(i, element){
            countries[i] =  $(element).attr("id");
        });
        countries_string = countries.join(",");            
        $('#scroll').scrollTop(0);
        $.ajax({
            type: 'POST',
            url: '@Url.Action("CheckBoxCountryFilter", "CheckBox")',
            data: {countries:countries_string},
            success: function (result) {
                //console.log(result);
                $("#wineResult").html(result);
                $.ajax({
                    url: '@Url.Action("ArtikelNumber", "CheckBox")',
                    type: 'POST',                
                    success: function (result) {
                        $("#artikelNumber").html(result);
                    }
                }); 
            }             
        });
        if(countries.length > 0){
            $("#countryImage").html('<img src="/Content/Images/icons/check.png">');            
        }else{
            $("#countryImage").html('');
        }
    });
}); 
```

# eclipse - 转到声明不适用于链接资源

> ID：13417988
> 
> 赞同：1
> 
> 时间：2012-11-16T13:52:57.020
> 
> 标签：eclipse

我的问题是这`Go to declaration`不适用于链接资源。

我将一个项目作为链接资源插入到 Eclipse 中。（所有 src 文件）

但是现在`Go to declaration`按钮不起作用。

错误信息：`Could not find symbol 'xxx' in index`

# php - 按位标志检测

> ID：13417996
> 
> 赞同：1
> 
> 时间：2012-11-16T13:53:27.550
> 
> 标签：php, bit-manipulation, flags

我在 PHP 中遇到标志检测问题。

```
<?php
class event
{
    const click = 0x1;
    const mouseover = 0x2;
    const mouseenter = 0x4;
    const mouseout = 0x8;
    const mouseleave = 0x16;
    const doubleclick = 0x32;

    public static function resolve($flags)
    {
        $_flags = array();

        if ($flags & self::click) $_flags[] = 'click';
        if ($flags & self::mouseover) $_flags[] = 'mouseover';
        if ($flags & self::mouseenter) $_flags[] = 'mouseenter';
        if ($flags & self::mouseout) $_flags[] = 'mouseout';
        if ($flags & self::mouseleave) $_flags[] = 'mouseleave';

        return $_flags;
    }
}

var_dump(event::resolve(event::click | event::mouseleave));

var_dump(event::resolve(event::mouseleave)); 
```

但它返回：

```
array (size=4)
  0 => string 'click' (length=5)
  1 => string 'mouseover' (length=9)
  2 => string 'mouseenter' (length=10)
  3 => string 'mouseleave' (length=10)

array (size=3)
  0 => string 'mouseover' (length=9)
  1 => string 'mouseenter' (length=10)
  2 => string 'mouseleave' (length=10) 
```

我是按位运算符的新手，所以它们的定义可能有问题。

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T13:55:16.213

您给标志的值错误；它们是十六进制整数文字，所以它们应该是

```
const click       = 0x01;
const mouseover   = 0x02;
const mouseenter  = 0x04;
const mouseout    = 0x08;
const mouseleave  = 0x10;
const doubleclick = 0x20;
// next values: 0x40, 0x80, 0x100, 0x200, 0x400, 0x800, 0x1000, etc. 
```

您也可以将它们作为十进制数字（不带`0x`前缀）给出，尽管这可能会误导阅读代码的人：

```
const click       = 1;
const mouseover   = 2;
const mouseenter  = 4;
const mouseout    = 8;
const mouseleave  = 16;
const doubleclick = 32; 
```

# .net - 为多个客户处理多个项目

> ID：13417998
> 
> 赞同：0
> 
> 时间：2012-11-16T13:53:32.167
> 
> 标签：.net, entity-framework, repository

我正在为多个客户端创建一个应用程序，其中每个客户端的实现之间既有相似之处，也有不同之处。我将 Win Forms 和 WPF 混合用于 UI 和 ORM 的实体框架。我需要的是尽可能重用共享组件的能力。

关键问题之一是一个客户端的数据库是 oracle，另一个是 MS Sql，现在我可以同时工作，但只能在编译时更改元素。这意味着我必须有两组几乎相同的项目，只是数据项目略有不同。如果在一个 UI 中发现错误，我必须打开另一个解决方案并在那里进行编辑。

我在以前的项目中使用过 Ninject，尽管可能会以某种方式反转 Data 项目的控制，将特定的项目/类注入 UI，而不是 UI 直接调用它们。

我似乎无法弄清楚的问题是如何注入整个项目。我希望能够在 UI 中说出来，`db.Customers.ToList();`并让它从我注入的任何数据项目中返回客户。这两个客户端的数据库模型在这一点上是相同的，尽管它们将来可能会改变。

我确信一定有一种模式可以让我以共享的身份使用这些资源。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:17:15.287

在什么时候您可以决定您需要哪种类型的连接？

这可能非常幼稚，但是您不能只使用应用程序设置在运行时启动适当类型的连接工厂或存储库吗？其中最简单的版本：

```
public class MainWindow : Window
{
    private IRepository _repo;

    public MainWindow()
    {
        _repo = ServiceLocator.GetRepo();       
    }
}

public class ServiceLocator
{
    public static IRepository GetRepo()
    {
        var typeOfDb = AppSettings["TypeOfDb"]

        if(typeOfDb == "Oracle")
            return new OracleRepo();
        else
            return new SqlServerRepo();
    }
} 
```

这行得通吗？还是我完全错过了重点？