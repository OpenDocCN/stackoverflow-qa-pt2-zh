# StackOverflow 问答 14306000-14306999

# jquery - jQuery 滑块仅适用于 Safari，不适用于 Chrome 或 Firefox

> ID：14306003
> 
> 赞同：-1
> 
> 时间：2013-01-13T17:16:38.507
> 
> 标签：jquery, cross-browser, slider

我有 jQuery 滑块，其中有七个不同的图像并排滑动，但它只能在 Safari 中正常工作，不能在 Firefox 或 Chrome 中工作。 [点击这里查看](http://shaadimubarakh.com)

```
<link rel="stylesheet" href="slider_css/global.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script src="slider_js/slides.min.jquery.js"></script>
<script>
    $(function(){
        $('#slides').slides({
            preload: true,
            preloadImage: 'img/loading.gif',
            play: 5000,
            pause: 2500,
            hoverPause: true,
            animationStart: function(current){
                $('.caption').animate({
                    bottom:-35
                },100);
                if (window.console && console.log) {
                    // example return of current slide number
                    console.log('animationStart on slide: ', current);
                };
            },
            animationComplete: function(current){
                $('.caption').animate({
                    bottom:0
                },200);
                if (window.console && console.log) {
                    // example return of current slide number
                    console.log('animationComplete on slide: ', current);
                };
            },
            slidesLoaded: function() {
                $('.caption').animate({
                    bottom:0
                },200);
            }
        });
    });
</script> 
```

这是 jQuery 的幻灯片插件

```
(function(a){a.fn.slides=function(b){return b=a.extend({},a.fn.slides.option,b),this.each(function(){function w(g,h,i){if(!p&&o){p=!0,b.animationStart(n+1);switch(g){case"next":l=n,k=n+1,k=e===k?0:k,r=f*2,g=-f*2,n=k;break;case"prev":l=n,k=n-1,k=k===-1?e-1:k,r=0,g=0,n=k;break;case"pagination":k=parseInt(i,10),l=a("."+b.paginationClass+" li."+b.currentClass+" a",c).attr("href").match("[^#/]+$"),k>l?(r=f*2,g=-f*2):(r=0,g=0),n=k}h==="fade"?b.crossfade?d.children(":eq("+k+")",c).css({zIndex:10}).fadeIn(b.fadeSpeed,b.fadeEasing,function(){b.autoHeight?d.animate({height:d.children(":eq("+k+")",c).outerHeight()},b.autoHeightSpeed,function(){d.children(":eq("+l+")",c).css({display:"none",zIndex:0}),d.children(":eq("+k+")",c).css({zIndex:0}),b.animationComplete(k+1),p=!1}):(d.children(":eq("+l+")",c).css({display:"none",zIndex:0}),d.children(":eq("+k+")",c).css({zIndex:0}),b.animationComplete(k+1),p=!1)}):d.children(":eq("+l+")",c).fadeOut(b.fadeSpeed,b.fadeEasing,function(){b.autoHeight?d.animate({height:d.children(":eq("+k+")",c).outerHeight()},b.autoHeightSpeed,function(){d.children(":eq("+k+")",c).fadeIn(b.fadeSpeed,b.fadeEasing)}):d.children(":eq("+k+")",c).fadeIn(b.fadeSpeed,b.fadeEasing,function(){a.browser.msie&&a(this).get(0).style.removeAttribute("filter")}),b.animationComplete(k+1),p=!1}):(d.children(":eq("+k+")").css({left:r,display:"block"}),b.autoHeight?d.animate({left:g,height:d.children(":eq("+k+")").outerHeight()},b.slideSpeed,b.slideEasing,function(){d.css({left:-f}),d.children(":eq("+k+")").css({left:f,zIndex:5}),d.children(":eq("+l+")").css({left:f,display:"none",zIndex:0}),b.animationComplete(k+1),p=!1}):d.animate({left:g},b.slideSpeed,b.slideEasing,function(){d.css({left:-f}),d.children(":eq("+k+")").css({left:f,zIndex:5}),d.children(":eq("+l+")").css({left:f,display:"none",zIndex:0}),b.animationComplete(k+1),p=!1})),b.pagination&&(a("."+b.paginationClass+" li."+b.currentClass,c).removeClass(b.currentClass),a("."+b.paginationClass+" li:eq("+k+")",c).addClass(b.currentClass))}}function x(){clearInterval(c.data("interval"))}function y(){b.pause?(clearTimeout(c.data("pause")),clearInterval(c.data("interval")),u=setTimeout(function(){clearTimeout(c.data("pause")),v=setInterval(function(){w("next",i)},b.play),c.data("interval",v)},b.pause),c.data("pause",u)):x()}a("."+b.container,a(this)).children().wrapAll('<div class="slides_control"/>');var c=a(this),d=a(".slides_control",c),e=d.children().size(),f=d.children().outerWidth(),g=d.children().outerHeight(),h=b.start-1,i=b.effect.indexOf(",")<0?b.effect:b.effect.replace(" ","").split(",")[0],j=b.effect.indexOf(",")<0?i:b.effect.replace(" ","").split(",")[1],k=0,l=0,m=0,n=0,o,p,q,r,s,t,u,v;if(e<2)return a("."+b.container,a(this)).fadeIn(b.fadeSpeed,b.fadeEasing,function(){o=!0,b.slidesLoaded()}),a("."+b.next+", ."+b.prev).fadeOut(0),!1;if(e<2)return;h<0&&(h=0),h>e&&(h=e-1),b.start&&(n=h),b.randomize&&d.randomize(),a("."+b.container,c).css({overflow:"hidden",position:"relative"}),d.children().css({position:"absolute",top:0,left:d.children().outerWidth(),zIndex:0,display:"none"}),d.css({position:"relative",width:f*3,height:g,left:-f}),a("."+b.container,c).css({display:"block"}),b.autoHeight&&(d.children().css({height:"auto"}),d.animate({height:d.children(":eq("+h+")").outerHeight()},b.autoHeightSpeed));if(b.preload&&d.find("img:eq("+h+")").length){a("."+b.container,c).css({background:"url("+b.preloadImage+") no-repeat 50% 50%"});var z=d.find("img:eq("+h+")").attr("src")+"?"+(new Date).getTime();a("img",c).parent().attr("class")!="slides_control"?t=d.children(":eq(0)")[0].tagName.toLowerCase():t=d.find("img:eq("+h+")"),d.find("img:eq("+h+")").attr("src",z).load(function(){d.find(t+":eq("+h+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){a(this).css({zIndex:5}),a("."+b.container,c).css({background:""}),o=!0,b.slidesLoaded()})})}else d.children(":eq("+h+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){o=!0,b.slidesLoaded()});b.bigTarget&&(d.children().css({cursor:"pointer"}),d.children().click(function(){return w("next",i),!1})),b.hoverPause&&b.play&&(d.bind("mouseover",function(){x()}),d.bind("mouseleave",function(){y()})),b.generateNextPrev&&(a("."+b.container,c).after('<a href="#" class="'+b.prev+'">Prev</a>'),a("."+b.prev,c).after('<a href="#" class="'+b.next+'">Next</a>')),a("."+b.next,c).click(function(a){a.preventDefault(),b.play&&y(),w("next",i)}),a("."+b.prev,c).click(function(a){a.preventDefault(),b.play&&y(),w("prev",i)}),b.generatePagination?(b.prependPagination?c.prepend("<ul class="+b.paginationClass+"></ul>"):c.append("<ul class="+b.paginationClass+"></ul>"),d.children().each(function(){a("."+b.paginationClass,c).append('<li><a href="#'+m+'">'+(m+1)+"</a></li>"),m++})):a("."+b.paginationClass+" li a",c).each(function(){a(this).attr("href","#"+m),m++}),a("."+b.paginationClass+" li:eq("+h+")",c).addClass(b.currentClass),a("."+b.paginationClass+" li a",c).click(function(){return b.play&&y(),q=a(this).attr("href").match("[^#/]+$"),n!=q&&w("pagination",j,q),!1}),a("a.link",c).click(function(){return b.play&&y(),q=a(this).attr("href").match("[^#/]+$")-1,n!=q&&w("pagination",j,q),!1}),b.play&&(v=setInterval(function(){w("next",i)},b.play),c.data("interval",v))})},a.fn.slides.option={preload:!1,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:!1,next:"next",prev:"prev",pagination:!0,generatePagination:!0,prependPagination:!1,paginationClass:"pagination",currentClass:"current",fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:!1,randomize:!1,play:0,pause:0,hoverPause:!1,autoHeight:!1,autoHeightSpeed:350,bigTarget:!1,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}},a.fn.randomize=function(b){function c(){return Math.round(Math.random())-.5}return a(this).each(function(){var d=a(this),e=d.children(),f=e.length;if(f>1){e.hide();var g=[];for(i=0;i<f;i++)g[g.length]=i;g=g.sort(c),a.each(g,function(a,c){var f=e.eq(c),g=f.clone(!0);g.show().appendTo(d),b!==undefined&&b(f,g),f.remove()})}})}})(jQuery) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:25:41.907

您的图像不是有效的 JPEG - 说实话，不确定它们在任何浏览器中的工作方式。它们似乎有标题 - 您是否以[Photoshop 格式](http://wiki.multimedia.cx/index.php?title=8BPS)`8BPS`拍摄图像并将它们重命名为具有扩展名？您需要专门将图像导出为 JPEG，Photoshop 可以做到这一点。`.jpg`

如果您在网站加载时查看浏览器控制台，则会出现 404 和多个错误报告图像无法显示。（在 OSX 上的 Firefox 17 上测试）。

# javascript - 更改带有链接的图像悬停在文本列表中

> ID：14306006
> 
> 赞同：1
> 
> 时间：2013-01-13T17:17:01.700
> 
> 标签：javascript, html, css

我正在尝试设置一个如下图所示的页面。

[http://i.stack.imgur.com/GwRXf.png](http://i.stack.imgur.com/GwRXf.png)

当我“悬停”在附近列出的链接之一（表格或列表）上禁用“单击”行为时，我希望替换主图像。

我尝试使用 css 按照以下代码执行此操作：http: [//jsfiddle.net/Kne3d/5/](http://jsfiddle.net/Kne3d/5/)

我试图以这种方式改变它：

```
#gallery {
    oveflow: auto;
    text-align: center;
    padding: 1em;
    padding-top: 120px;
    position: relative;
}

#gallery td {
    display: inline;
    padding: 0 1em;
}

#gallery img {
    display: none;
    position: absolute;
    top: 10px;
    left: 35%;
}

#gallery td:hover {
    background: yellow;
}

#gallery td:hover ~ img {
    display: block;
} 
```

和：

```
<table width="100%" border="0" cellspacing="0" cellpadding="0" id="gallery">
  <tr>
    <td width="100%">Cat 1<img src="/images/01.png"></td>
    <td width="150" rowspan="6">I WANT MY IMAGES HERE</td>
  </tr>
  <tr>
    <td>Cat 2 <img src="/images/02.png"></td>
  </tr>
  <tr>
    <td>Cat 3 <img src="/images/03.png"></td>
  </tr>
  <tr>
    <td>Cat 4<img src="/images/04.png">
</td>
  </tr>
</table> 
```

我希望我的图像会显示在右栏中...

我也尝试过使用 Javascript：

```
<head>
    <script language="JavaScript" type="text/JavaScript"> 
    function showT(q){ 
    document.getElementById('ima').setAttribute('src','0'+q+'.png') 
    } 
    </script>
</head>
<body>
    <table width="100%" border="0">
      <tr>
        <td width="80%"><p><a href="#" onmouseover="showT(0)">• Image 1</a></p>
          <p><a href="#" onmouseover="showT(1)">Image 2</a></p>
          <p><a href="#" onmouseover="showT(2)">Image 3</a></p>
          <p><a href="#" onmouseover="showT(3)">Image 4</a></p>
    <td width="20%"><img id="ima" src="images/00.png" width="150" height="150">
      </td>
      </tr>
    </table>
</body> 
```

但是...没有成功：图像不显示:(

关于如何使它工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:24:49.623

一个非常简单的方法：

```
$('#nav').find('li').hover(function(){
  $('#gallery').find('li').eq($(this).index()).toggle();
}); 
```

**[演示](http://fiddle.jshell.net/wUSLS/1)**

# android - Android虚拟设备管理器下缺少“硬件部分”

> ID：14306010
> 
> 赞同：10
> 
> 时间：2013-01-13T17:17:19.523
> 
> 标签：android, avd

经过一个小时的研究，我试图解决我的问题“在 AVD 中未启用硬件按钮”，我发现所有的人都是引导人们去“硬件部分并修复 blabla”的人

但有趣的是我的 AVD 没有这个部分。我实际上在设备定义下找到了一些选项，但仍然无法解决我的问题，也没有找到这个菜单。我看到的所有屏幕截图都有硬件部分......

我的规格是；MacOS , 安卓 4.2.2 (Api17) , Eclipse

PS：其他一切都很好。我只是错过了这一部分。

![这是一个截图](../Images/33e5b3bbe88b1dedc8398b2262583f66.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T17:27:30.460

您正在查看的说明可能来自 R20 或更早版本的 Android 开发人员工具。R21 是不同的，似乎是你正在运行的。您可以更改与您的 AVD 关联的任何设备的“设备定义”选项卡上的硬件按钮的行为：

![设备定义](../Images/f63790282886ee289cd1eb6ba16951b9.png)

根据您希望的行为将按钮下拉菜单更改为软件或硬件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-04T21:00:55.710

经过长时间的反复试验，我发现至少有三个不同的“陷阱”必须正确设置，从而消除了“ ***AVD 中未启用硬件按钮”的问题。***我正在使用带有 ADT 版本 22.3.0 的 Eclipse Java EE Juno（截至 2013 年 11 月 3 日的最新版本）。

总而言之，第一次弄清楚有点尴尬，但之后就简单了。虚拟设备定义必须包括 1) 硬件按钮，2) 还必须在 AVD 选择器下拉字段中选择设备定义，以及 3) 必须勾选该框以显示带有硬件控件的皮肤。这三个都很关键。一步步：

1.  **窗口 → Android 虚拟设备管理器**（参见下面的屏幕截图）（注意：如果在菜单中不可见，请选择**窗口 → 自定义透视**图并勾选**Android SDK 和 AVD 管理器**- 但如果您已经获得足够远的距离来获得以上错误信息）

![Android 虚拟设备管理器第一个选项卡](../Images/804d944f8a580d6313d56f34f1ff5d4c.png)

2.  单击第*一个*选项卡，即**Android Virtual Device**，单击**Edit**，然后记下从顶部数第二个组合框字段中列出的设备名称。这将是一个内置的默认 Android 虚拟设备定义，或者是您从头开始创建（或将创建）的自定义。**记下此设备名称并单击“确定**”关闭**Edit Android Virtual Device**编辑窗口

 **![Android 虚拟设备编辑器](../Images/349212a8488a50c846842b87560654ac.png)

3.  单击**Android 虚拟设备管理器中的***第二个*选项卡，即**设备定义**，然后从列表中选择您在上面的第 2 步中记住的设备（*请注意模拟器开发人员 - 此设置步骤比必要的更尴尬 - 也许选项卡一和二可能是更紧密地联系在一起，以允许双击设备并直接对其进行编辑，而不必关闭选项卡然后打开另一个选项卡*）。选择虚拟设备定义后，选择**编辑**（或**克隆***********如果您要编辑的设备是内置定义，因为如果它是内置设备，则必须在编辑后将其保存为克隆副本。**在“克隆设备**”窗口的左上角字段中为克隆的设备命名，例如在默认名称的末尾添加“_hardwareButtons”）。*********

 *****![Android 虚拟设备管理器第二个选项卡](../Images/9366214ec2a901a07bdddbf9ea16d931.png)

4.  重要提示：编辑克隆设备：确保在“**编辑设备**” （或“**克隆设备**” ）窗口（从上面的“**设备定义**”选项卡下的第 3 步）的右侧，向下第四个字段中选择了**按钮 → 硬件**。这非常重要，否则硬件按钮将无法激活。这是上述错误消息最可能的根本原因。除非您想使用虚拟 DPad，否则可以将**Input**保留为**No Nav 。**单击窗口右下方的**编辑设备**（或**克隆设备）以保存更改。**

 ******![设备编辑](../Images/c4ecb665157030410c461dd8176a6cfd.png)

5.  重要提示：在 Android Virtual Device manager 中，再次单击*第一个*选项卡，即**Android virtual device**。选择**编辑**并确保在 AVD 的设备字段下拉组合框（从上数第二个）中按名称选择新编辑、创建或克隆的设备。（参见上面的前两个屏幕截图）。在此处选择正确的设备至关重要，因为创建新克隆的设备不会自动更新或将其与您的 AVD 关联（​​请参阅上面我对模拟器开发人员的评论）。

6.  重要提示：同样在同一个 Android Virtual Device 编辑框中，确保**Skin** → **Display a skin with hardware controls**被勾选。这也非常重要，否则您根本看不到任何硬件按钮。单击“**确定**”关闭编辑窗口。

7.  为了更好地衡量（可能不必要），我在 AVD 管理器的第一个选项卡（Android 虚拟设备）中单击了**刷新** ，并确保我刚刚编辑的 AVD 前面有一个绿色复选标记。如果没有，可能是因为新编辑的设备尚未与您的 AVD 连接。单击**编辑**并再次选择正确的新编辑设备名称。点击“**确定**”关闭。

8.  此外，对于真正的偏执狂而言，您可以单击“**详细信息**”第一个选项卡下的“详细信息”并展开窗口以查看您的设备定义细节。确保 skin.dynamic 是**yes**， hw.keyboard: 是**no**（除非想要键盘）并且 hw.mainKeys: 是**yes**并且 hw.dPad: 是**no**（除非想要 dPad），并且一如既往地确保你有正确的选择的设备名称。

现在您应该定义了一个完全可行的 AVD，您可以在**RUN → RUN CONFIGURATION** Eclipse 菜单中使用它，并且它不会显示可怕的“硬件按钮未在 AVD 中启用”错误消息。

在 Eclipse 中，**RUN → RUN CONFIGURATION**，从左侧选择您的应用程序名称（并确保它也出现在**Android选项卡下），并在****Target**选项卡下勾选新定义的 AVD ，然后单击 RUN。（或任何新配置首次运行后的`CTRL`+ ）。`F11`

以下是来自平板电脑模拟器的一些屏幕截图作为示例：*************

# javascript - 如何在javascript中访问数组的值

> ID：14306011
> 
> 赞同：0
> 
> 时间：2013-01-13T17:17:25.893
> 
> 标签：javascript

代码：

```
var testarray = [];
var test1 = "ashutosh";
var test2 = "ashutosh2";

if (test1 != test2) {
  testarray.push = "ashutosh3";
  testarray.push = "ashutosh4";
  alert(testarray.length);
}

if (testarray.length != 1) {
  alert(testarray.length);
  alert(testarray[testarray.length - 1]);
  alert(testarray[testarray.length - 2]);
} 
```

但是当所有的警报都出现时`undefined`。我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:18:18.270

[`push`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.7)是一个*函数*，而不是一个属性，所以而不是

```
testarray.push="ashutosh3"; 
```

它是

```
testarray.push("ashutosh3"); 
```

这是我更新该代码的方式，FWIW，但我认为唯一的*实质性*变化是`push`正确执行并使用`>= 2`而不是最后`!= 1`的`length`检查（否则，如果数组为空，您正在查看条目`-1`和`-2`，这将未定义）：

```
var testarray = [];
var test1 = "ashutosh";
var test2 = "ashutosh2";

if (test1 !== test2) {
  testarray.push("ashutosh3");
  testarray.push("ashutosh4");
  alert(testarray.length);
}

if(testarray.length >= 2) {
  alert(testarray.length);
  alert(testarray[testarray.length-1]);
  alert(testarray[testarray.length-2]);  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:12:03.007

TJ Crowder 已经用 push 回答了这个问题，但我猜你是 JavaScript 新手，所以这里有一些我希望早点知道的有用技巧。

**对于每个循环**

您可以使用 forEach 循环，而不是编写标准的 for 循环。

```
for( i in testArray ){
    console.log( i );
} 
```

**对象**

直到哈希表和模块出现在 JS 中，我们只能使用数组。这是我所知道的最简单的制作对象的方法。

```
var ArrayUtils = {
    "print" : function(array) {
        console.log(array);
    }
} 
```

由于 ArrayUtils 是一个列表，您可以使用点或括号表示法对其进行扩展

```
ArrayUtils["size"] = function(array){
   return array.length;
}

ArrayUtils.indexOf = function(array, i){
    return array[i];
} 
```

**高阶函数**

JavaScript 中的数组带有内置的 map、reduce 和 filter 函数。这三个函数在编写优雅的代码时非常有用。

1.  Map，将序列中的每个元素传递给函数

    ```
    testArray.map( function(i){ console.log(i); } ); 
    ```

2.  减少，很好地将数组减少为单个值。在这个例子中，我正在计算数组的总和

    ```
    testArray.reduce( function(x,y) { return x+y; } ); 
    ```

3.  过滤器，您可能猜到会从数组中删除元素。在 JS 中， .filter() 返回一个新数组

    ```
    testArray = testArray.filter( function(i) { return ( i > 0 ); } ); 
    ```

我还读到 JS 支持迭代器和生成器。它们是强大的迭代工具，如果您要在代码库中大量使用迭代，则值得一试。我不这样，这是我推迟做的事情。

# javascript - 变量超出范围

> ID：14306013
> 
> 赞同：0
> 
> 时间：2013-01-13T17:17:35.000
> 
> 标签：javascript, ajax, scope

> **可能重复：**
> [如何返回 AJAX 响应文本？](https://stackoverflow.com/questions/1225667/how-to-return-ajax-response-text)
> [如何从函数的 AJAX 调用返回响应？](https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call-from-a-function)

经过一整天没有解决这个问题。我读到这是不可能的或无法完成等。我确实浏览了所有相关的主题，但找不到解决方案。

所以我认为我的代码中的变量超出了范围，我不能返回它，不能使用它。

.js 文件：

```
function getXMLHttp()
{
  var xmlHttp

  try
  {
    //Firefox, Opera 8.0+, Safari
    xmlHttp = new XMLHttpRequest();
  }
  catch(e)
  {
    //Internet Explorer
    try
    {
      xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
    }
    catch(e)
    {
      try
      {
        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
      }
      catch(e)
      {
        alert("Your browser does not support AJAX!")
        return false;
      }
    }
  }
return xmlHttp;

}

function MakeRequest()
{
  var xmlHttp = getXMLHttp();

 xmlHttp.onreadystatechange = function(){

   if(xmlHttp.readyState == 4)
    {
      var myvar = new Array();
     myvar=JSON.parse(xmlHttp.responseText);

    return myvar;
    }

} 

   xmlHttp.open("GET", "showimage.php", true);
  xmlHttp.send();

} 
```

所以上面是好的，它在完成时返回php脚本的值。

我想要 html 文件中的这个 myvar 变量。像这样尝试：

```
 window.onload = function() {
 var myvar = MakeRequest();
 alert (myvar);

} 
```

它失败了，返回未定义的值。

还尝试将 MakeRequest 函数作为回调函数，然后从 html 中调用它

```
MakeRequest(function(txt){
}); 
```

然后我得到了回应，但可以提醒它。我不想提醒它。我需要将它存储在变量 myvar 中，因为稍后在代码中需要它。

# mysql - Mysql Query 还必须显示没有投票的帖子

> ID：14306014
> 
> 赞同：0
> 
> 时间：2013-01-13T17:17:43.020
> 
> 标签：mysql

我的mysql查询有问题，

我有这些表格：上传、用户和评级。

我正在使用以下查询来获取我的最新帖子：

```
Select All
              upload.*,
              Count(ratings.id) As totalrates,
              Avg(ratings.rating) As avgrating,
              users.nickname
            From upload
              Inner Join ratings
                On ratings.upload_id1 = upload.id
              Inner Join users
                On upload.users_id = users.id
            Group By upload.id DESC 
```

但是，当帖子还没有任何评分时，它不会出现，因此无法投票：p

是否有任何人知道如何调整此查询或有关如何解决此问题的任何其他好的建议？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:21:17.293

```
Select All
              upload.*,
              Count(ifnull(ratings.id,0)) As totalrates,
              Avg(ifnull(ratings.rating,0)) As avgrating,
              users.nickname
            From
              upload Inner Join
              users On upload.users_id = users.id left join
              ratings On ratings.upload_id1 = upload.id
            Group By
              upload.id DESC 
```

两个变化

1.  使用 Left Join 将评分加入用户和上传
2.  如果未找到评级，则默认为 0。

# mysql - 在 Mac 上使用终端导入 SQL

> ID：14306015
> 
> 赞同：1
> 
> 时间：2013-01-13T17:17:47.490
> 
> 标签：mysql, import, terminal

我正在学习 SQL - 通过一本书来学习。我已经设置并运行了 mysql 客户端。我手动添加和创建了数据库和表，不超过十个左右的记录和字段。我现在正在阅读有关根据标准选择记录的一章。因此，我想导入一个更大的数据库来玩。我已经从 mysql.com 下载了“world.sql”文件。这个文件包含世界上所有的城市和相关的数据，比如人口——一个很好的表格。我已将文件下载到我的桌​​面，但我不知道如何实际添加到数据库中以便使用。我在终端中创建了一个名为“world”的新数据库。我现在需要将 sql 文件导入这个数据库但不知道怎么做？我在这里寻找什么命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:55:03.817

从 shell调用`mysql`并将`world.sql`文件通过管道传递给它：

```
$ mysql -uYOURUSER -pYOURPASSWORD < world.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-17T05:43:36.637

```
/Applications/MAMP/Library/bin/mysql -u root -p {db_name} < {path_to_file/file.sql} 
```

或者

```
/Applications/MAMP/Library/bin/mysql -u root -p 
```

然后输入密码

```
use db_name 
```

然后

```
source path_to_file/file.sql 
```

如果您收到外键错误，则在导入之前先使用以下命令

```
SET FOREIGN_KEY_CHECKS=0; 
```

然后

```
source path_to_file/file.sql 
```

# actionscript-3 - 1046：类型未找到或不是编译时常量：startButton

> ID：14306017
> 
> 赞同：0
> 
> 时间：2013-01-13T17:17:51.827
> 
> 标签：actionscript-3, flash

我正在做一个教程并得到这个错误。

第 3 行 1046：类型未找到或不是编译时常量：startButton。

我做了一些研究，发现有人遇到了同样的问题。他在评论部分得到了帮助。教程的创建者告诉他以下内容：

“您是否像第 1 部分的开头那样打开了“自动声明舞台实例”？另外，您的 startButton 是否在 MenuScreen 剪辑中，并且 MenuScreen 是否为 ActionScript 导出？

现在我想我还没有自动声明阶段实例。（其他事情都完成了，我做了双重检查）但这对我来说有点模糊，你能告诉我在已经编码之后如何做“自动声明阶段实例”。

教程链接：http: [//gamedev.michaeljameswilliams.com/2008/10/12/avoider-game-tutorial-4/comment-page-5/#comments](http://gamedev.michaeljameswilliams.com/2008/10/12/avoider-game-tutorial-4/comment-page-5/#comments)

```
package 
{
import flash.display.MovieClip;
import flash.display.SimpleButton;
import flash.events.MouseEvent;

public class MenuScreen extends MovieClip 
{

    public function MenuScreen()
    {

        startButton.addEventListener( MouseEvent.CLICK, onClickStart );
    }

    public function onClickStart( event:MouseEvent ):void
    {
        dispatchEvent( new NavigationEvent( NavigationEvent.START ) );
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:31:44.030

添加

```
public var startButton:SimpleButton; 
```

或者

```
public var startButton:MovieClip; 
```

根据现场`MenuScreen`的类型来上课。`startButton`确保您为`startButton`按钮实例提供了名称，并且不要忘记将类分配给`MenuScreen`包含`startButton`.

# ios - NSSortdescriptor 不混合列表

> ID：14306018
> 
> 赞同：0
> 
> 时间：2013-01-13T17:17:53.860
> 
> 标签：ios, xcode, nsarray, nssortdescriptor

我有一个应该按名称排序的数组，但只有一半被排序。我有一个条目列表，可以分为两部分，第一部分来自字典，只有属性“名称”，第二部分来自核心数据数据库，还有属性“addByUser” . 这两个列表都在 tempArray 内，并被添加到 _resultsarray 中，然后直接指向 cellForRowAtIndexPath。但在此之前，我尝试按名称对 _resultsarray 进行排序。现在问题出现了：首先出现没有 addedByUser 属性的列表（按名称排序），然后出现另一个列表（带有 addedByUser 属性”），也按名称排序。我无法将它们混合在一起。

```
[_resultsarray addObjectsFromArray:tempArray];

// Sort the list
NSSortDescriptor *sort2 = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];
[_resultsarray sortUsingDescriptors:[NSArray arrayWithObject:sort2]]; 
```

我究竟做错了什么？谢谢！

更新：很抱歉，我忘了写 tempArray 和 _resultsarray 都是可变数组。

更新 2：如果名称以大写或小写字符开头，似乎会有所不同。那么我更新的问题是，有没有办法对 NSMutableArray 进行排序，无论单词是以大写还是小写字符开头？

更新3：我发现：

```
NSSortDescriptor *sortByName = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES selector:@selector(caseInsensitiveCompare:)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:21:04.067

尝试这个：

```
NSSortDescriptor *sort2 = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];
_resultsarray = [tempArray sortedArrayUsingDescriptors:[NSArray arrayWithObject:sort2]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:23:18.447

你应该写一个`NSComparoator`like：

```
_resultsarray = [tempArray sortedArrayUsingComparator:^(id firstObject, id secondObject) {
    NSString *name1 = ... ; // firstObject.name or firstObject.addedByUser
    NSString *name2 = ... ; // secondObject.name or secondObject.addedByUser
    return [name1 compare:name2];
}]; 
```

# regex - Perl 正则表达式文件名不匹配

> ID：14306033
> 
> 赞同：-1
> 
> 时间：2013-01-13T17:18:36.100
> 
> 标签：regex, perl

我正在运行其他人为我编写的 Perl 脚本，我注意到以下正则表达式似乎与名为“Film CD 1.avi”、“Film2 CD 1.avi”等的文件不匹配：

```
$name = (split (/[ ]*CD[ ]*1/i, $in_avi))[0]; 
```

有谁知道我需要做什么来纠正它？

/编辑：完整的代码是这样的：

```
#!/usr/bin/perl

use strict;

########################################################################
#                                                Configuration Details                                          #
########################################################################

# Array of movies to convert
my @MOVIES_TO_CONVERT; # = ('The Figher', 'The Fifth Element');

# Directory where the split AVI files are stored
my $MOVIE_IN_PATH = 'D:\split';

# Directory where the combined AVI files will be stored
my $MOVIE_OUT_PATH = 'D:\combined';

# Full path to the avidemux executable
my $AVIDEMUX = 'C:\Program Files (x86)\Avidemux\avidemux.exe';

########################################################################
#                                                          Functions                                                      #
########################################################################

# Return an array of all the AVI files in the specified directory.
sub get_avis_in_directory
{
        my $dh; # Directory handle
        my $dir; # Current directory
        my @avis; # Array of file names to return

        opendir ($dh, $dir = shift) or die "Failed to open directory $dir: $!\n";
        while (readdir $dh)
        {
                next if (/^\.{1,2}/);
                $_ = $dir . "\\" . $_;
                push (@avis, $_) if (-f $_ and /.*\.avi$/i);
        }
        closedir $dh;

        return (@avis);
}

########################################################################
#                                                         Entry Point                                                    #
########################################################################

die "Input directory $MOVIE_IN_PATH does not exist!\n" unless (-d $MOVIE_IN_PATH);
die "Output directory $MOVIE_OUT_PATH does not exist!\n" unless (-d $MOVIE_OUT_PATH);

# This variable represents the actual names and paths of movies to be converted.
# It will either be built from the files specified in @MOVIES_TO_CONVERT manually, or
# built dynamically based on the files in the source and destination paths.
my @movies_formatted; # Array of hashes of movies to convert

if ($#MOVIES_TO_CONVERT == -1)
{
        my @in_avis; # Array of AVI files in the input directory
        my @out_avis; # Array of AVI files in the ouput directory

        @in_avis = get_avis_in_directory ($MOVIE_IN_PATH);
        @out_avis = get_avis_in_directory ($MOVIE_OUT_PATH);

        for my $in_avi (@in_avis)
        {
                if ($in_avi =~ /.*[ ]*CD[ ]*1\.avi$/i)
                {
                        my $rec; # Temporary hash variable
                        my $name; # Name of the move we are processing
                        $name = (split (/[ ]*CD[ ]*1/i, $in_avi))[0];
                        $name = (split (/$MOVIE_IN_PATH[\\\/]{1}/i, $name))[1];

                        for my $in_avi_2 (@in_avis)
                        {
                                if ($in_avi_2 =~ /^$MOVIE_IN_PATH\\$name[ ]*CD[ ]*2\.avi$/i)
                                {
                                        $rec->{'part2'} = $in_avi_2;
                                        last;
                                }
                        }

                        if (defined $rec->{'part2'})
                        {
                                for my $out_avi (@out_avis)
                                {
                                        if ($out_avi =~ /$name\.avi$/i)
                                        {
                                                $rec->{'output'} = $out_avi;
                                                last;
                                        }
                                }

                                unless (defined $rec->{'output'})
                                {
                                        $rec->{'part1'} = $in_avi;
                                        $rec->{'output'} = "$MOVIE_OUT_PATH\\$name.avi";
                                        push (@movies_formatted, $rec);
                                }
                        }
                }
        }
}
else
{
        my $rec; # Temporary hash variable

        for my $name (@MOVIES_TO_CONVERT)
        {
                $rec = {};
                $rec->{'part1'} = "$MOVIE_IN_PATH\\$name CD 1.avi";
                $rec->{'part2'} = "$MOVIE_IN_PATH\\$name CD 2.avi";
                $rec->{'output'} = "$MOVIE_OUT_PATH\\$name.avi";
                push (@movies_formatted, $rec);
        }
}

for my $movie (@movies_formatted)
{
        my $convert_cmd = "\"$AVIDEMUX\" --load \"" . $movie->{'part1'} . "\" --append \"" . $movie->{'part2'} . "\" --force-smart --save \"" . $movie->{'output'} . "\" --quit";
        print "$convert_cmd\n";
        die "Unable to convert $movie->{'output'}!\n" if (system "$convert_cmd");
} 
```

xorangekiller来自[http://www.neowin.net/forum/topic/1128384-batch-file-to-run-command-on-joining-video-files的脚本。](http://www.neowin.net/forum/topic/1128384-batch-file-to-run-command-on-joining-video-files)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:09:18.427

通过将反斜杠`$MOVIE_IN_PATH`插入到正则表达式中来删除它。将*两个*`split`命令更改为

```
$name = (split(/\Q$MOVIE_IN_PATH\E[\\\/]{1}/i, $name))[1]; 
```

即添加`\Q`...`\E`以转义任何正则表达式元字符。

您的朋友似乎不是一个特别优秀的 Perl 程序员。您可能想尝试使用此代码。

```
#!/usr/bin/perl
use strict;
use warnings;

use File::Basename;
use File::Spec;

# Configuration Details
#######################

# Array of movies to convert
my @MOVIES_TO_CONVERT;    # = ('The Fighter', 'The Fifth Element');

# Directory where the split AVI files are stored
my $MOVIE_IN_PATH = 'D:\split';

# Directory where the combined AVI files will be stored
my $MOVIE_OUT_PATH = 'D:\combined';

# Full path to the avidemux executable
my $AVIDEMUX = 'C:\Program Files (x86)\Avidemux\avidemux.exe';

sub get_avis_in_directory {
  opendir my $dh, $MOVIE_IN_PATH or die $!;
  return grep {
    /\.avi$/ and -f File::Spec->catfile($MOVIE_IN_PATH, $_)
  } readdir $dh;
}

-d $MOVIE_IN_PATH or die qq(Input directory "$MOVIE_IN_PATH" does not exist!\n);
-d $MOVIE_OUT_PATH or die qq(Output directory "$MOVIE_OUT_PATH" does not exist!\n);

my @movies_formatted;    # Array of hashes of movies to convert

if (@MOVIES_TO_CONVERT) {

  for my $name (@MOVIES_TO_CONVERT) {
    my $rec = {};
    $rec->{part1}  = File::Spec->catfile($MOVIE_IN_PATH, "$name CD 1.avi");
    $rec->{part2}  = File::Spec->catfile($MOVIE_IN_PATH, "$name CD 2.avi");
    $rec->{output} = File::Spec->catfile($MOVIE_OUT_PATH, "$name.avi");
    push @movies_formatted, $rec;
  }
}
else {

  my @in_avis  = get_avis_in_directory($MOVIE_IN_PATH);

  for my $in_avi (@in_avis) {

    next unless $in_avi =~ /^(.+?)\s*CD\s*1\.avi$/i;

    my $name = $1;

    my $rec = {};
    $rec->{part1} = $in_avi;
    ($rec->{part2}) = grep /^\Q$name\E\s*CD\s*2\.avi$/i, @in_avis;

    if ($rec->{part2}) {
      $rec->{$_} = File::Spec->catfile($MOVIE_IN_PATH, $rec->{$_}) for qw/ part1 part2 /;
      $rec->{output} = File::Spec->catfile($MOVIE_OUT_PATH, "$name.avi");
      push @movies_formatted, $rec;
    }

  }
}

for my $movie (@movies_formatted) {

  my $convert_cmd = sprintf '"%s" --load "%s" --append "%s" --force-smart --save "%s" --quit',
      $AVIDEMUX, @{$movie}{qw/ part1 part2 output /};
  print "$convert_cmd\n";

  die "Unable to convert $movie->{'output'}!\n" if (system $convert_cmd);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:24:16.823

以什么方式不起作用？

```
use warnings;
use strict;

while (<DATA>) {
    my $in_avi = $_;
    my $name = (split (/[ ]*CD[ ]*1/i, $in_avi))[0];
    print "$name\n";
}

__DATA__
Film CD 1.avi
Film2 CD 1.avi 
```

印刷：

```
Film
Film2 
```

# ruby-on-rails - 在 Rails 应用程序中限制对图像的访问

> ID：14306035
> 
> 赞同：4
> 
> 时间：2013-01-13T17:18:41.653
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image, file, role

我有rails项目。在我的项目中，我在服务器上加载图像（rails 3 + 回形针 + devise + cancan）。我想限制对文件的访问（例如，原始图像只能由管理员查看）。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T17:30:35.103

如果您受数据库中的属性限制，那么一种方法是通过控制器提供图像。它不是性能最高的，但它是安全的。

我还没有尝试过，但是如果您从类似的 URL 提供图像

`/images/picture_of_mickey_mouse.png`

然后你可以在你的应用程序中创建一个响应`/images`文件名属性的路由，并通过控制器提供所有这些图像。

例如

```
class ImagesController < ApplicationController
  before_filter :authenticate_admin!, :only => [:show]
  def show
    send_file "/images/#{params[:filename]}", :disposition => 'inline'
  end
end 
```

但是，您需要确保对其进行清理`params[:filename]`，否则用户将能够下载您服务器上的任何文件！

文档在`send_file`这里：[http ://apidock.com/rails/ActionController/DataStreaming/send_file](http://apidock.com/rails/ActionController/DataStreaming/send_file)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T17:40:07.610

文件用`ActionDispatch::Static`. IMO 最好的解决方案是提供类似的中间件（基于[Rails 源代码](https://github.com/rails/rails/blob/v3.2.11/actionpack/lib/action_dispatch/middleware/static.rb)），但需要一些身份验证并在之前插入`ActionDispatch::Static`。这适用于基于 Warden 的解决方案（如 Devise），因为它们在中间件中进行身份验证；只需确保您的中间件放在 Warden 之后，而 old plain`ActionDispatch::Static`就在它们之后运行。

编辑：还有一件事值得注意。在生产中，Nginx（我不确定 Apache 和其他人）被配置为自行提供所有静态文件，而不将这些请求传递给机架堆栈，这是很常见的。您可能需要禁用此 Nginx 功能。

# switch-statement - switch 中的默认语句位置

> ID：14306038
> 
> 赞同：0
> 
> 时间：2013-01-13T17:19:10.530
> 
> 标签：switch-statement

```
switch(2){
    default : System.out.println("I am Default block");
    case 1 : System.out.println("in 1");
    case 2 : System.out.println("in 2");
} 
```

输出：in 2 and if

```
switch(2){

case 1 : System.out.println("in 1");
case 2 : System.out.println("in 2");

default : System.out.println("I am Default block"); 
```

}

输出是：在 2 我是默认块。

默认语句的定位是否表现不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:23:28.060

这不是默认块的位置，而是`break`语句的使用（或在您的情况下不使用）。

匹配案例后，默认行为是代码级联其余案例。

要实现您想要的行为，请尝试

```
switch (2)
{
    case 1: 
        System.out.println("in 1"); 
        break;
    case 2: 
        System.out.println("in 2"); 
        break;
    default: 
        System.out.println("I am Default block"); 
        break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-18T19:12:17.047

Kathy Siera SCJP 的书确实提到了默认立场：很重要，如果出现在案例陈述之间，它遵循失败。但实际上它并没有遵循。

```
 int a = 10;

    switch (a) 
    {
    case 5:
        System.out.println("Its 5");
    default:
        System.out.println("Its default");
    case 10:
        System.out.println("Its 10");
    case 20:
        System.out.println("Its 20");
    } 
```

输出：

它的 10

它的 20

# javascript - responsetext 接收多个值

> ID：14306039
> 
> 赞同：0
> 
> 时间：2013-01-13T17:19:19.727
> 
> 标签：javascript, jquery, xmlhttprequest

我已经设置了 post xmlhttprequest 并且效果很好。但是，我想设置 responseText 以接收数组中的多个变量，逗号分隔或其他。

这就是我目前收集我的 return php echo 命令的方式。

```
var return_data = hrequest.responseText; 
```

也许是这样的？

```
var update = new Array();

if(response.indexOf('|$|' != -1)) {
  update = response.split('|$|');

  alert(update[0]);
  document.getElementById("button1").value=update[1];
  document.getElementById("button2").value=update[2];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:25:11.737

从 php.ini 以 JSON 格式发送数据会更容易。

从 php 发送 JSON：

```
echo json_encode( $array); 
```

从 responseText 解析为数组：

```
var return_data_array = JSON.parse(hrequest.responseText); 
```

# android - 如何自定义 webView.showFindDialog 对话框布局？

> ID：14306041
> 
> 赞同：1
> 
> 时间：2013-01-13T17:19:32.957
> 
> 标签：android, webview, dialog

我有`WebView`，在这个网络视图中我想查找文本，我是包含代码`webView.showFindDialog`，当我打开它时，我不喜欢它。我想改变一切：背景颜色，文本颜色，它对话框的目的地，UTC。我如何自定义它的对话框布局？

# python - 美丽的汤：从右到左的文字

> ID：14306042
> 
> 赞同：0
> 
> 时间：2013-01-13T17:19:34.110
> 
> 标签：python, beautifulsoup

现在我正在为这个页面获取美丽汤 4 中的所有段落标签：

```
<p class="MsoNormal" style="text-align: center"><b>
                            <span lang="EN-US" style="font-family: Arial; color: blue">
                            <font size="4">1 </font></span>
                            <span lang="AR-SA" dir="RTL" style="font-family: Arial; color: blue">
                            <font size="4">&#1600;</font></span><span lang="EN-US" style="font-family: Arial; color: blue"><font size="4"> 
                            с&#1199;р&#1241; фати&#1211;&#1241;</font></span></b></p> 
```

我正在尝试获取 2 个字体标签中的内容，但是文本与右侧对齐。我认为这与 dir="RTL"

但我想要从左到右。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:30:56.290

您可以尝试以下方法：

```
for elem in soup.findAll('font'):
    print elem.text.strip() 
```

这是因为您获得的 unicode 字符串包含多个属于[`Separator, Space Category [Zs]`](http://www.fileformat.info/info/unicode/category/Zs/list.htm). 你可以自己看看：

```
import unicodedata

for c in elem.text:
    print unicodedata.category(c), 
```

# java - 用Java开发Web浏览器的先决条件

> ID：14306044
> 
> 赞同：3
> 
> 时间：2013-01-13T17:19:45.000
> 
> 标签：java, browser, prerequisites

> **可能重复：**
> [如何开始构建 Web 浏览器？](https://stackoverflow.com/questions/598841/how-to-get-started-building-a-web-browser)

我对Java语言有基本的了解，也对小程序有一定的了解。

我必须为我的大学项目开发​​一个基本的 Web 浏览器，它可以显示简单的网站以及 Javascript 组件。

谁能告诉我先决条件是什么，即在做这件事之前我应该​​阅读哪些主题以及如何做？

非常感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:32:46.510

编写 Web 浏览器是一项艰巨的任务，具体取决于您想要包含的功能级别。

需要进入浏览器的东西：

*   可以从服务器检索页面内容的**HTTP 客户端。**Java 在 java.net 中包含一些非常基本的内容，但如果可以，请改用 Apache Commons HTTPClient。许多浏览器还支持其他协议，例如 ftp:// 或本地文件 (file://)。
*   **HTML 解析器**，可以将返回的HTML（或 XHTML）读入内存结构。这里的难点在于，不仅 HTML 已经进化了；还有很多 HTML 不符合多个 HTML 标准中的任何一个。人们只是倾向于写一些东西，看看它是否可以在特定的浏览器（例如，IE）上呈现，然后继续前进——某些浏览器几乎可以呈现任何东西。您可以为此使用现有的解析器，例如 JSoup，它对修复错误的支持也有限。
*   一个**渲染引擎**。对我来说，这将是最复杂的一步。您需要真正深入阅读才能使任何类型的 CSS 支持正常工作（主要浏览器也很难做到正确），即使是嵌套表或复杂表单等非 CSS 渲染也意味着努力工作（计算在哪里每个页面组件都在呈现的页面上）。我所知道的没有附加渲染库，但是 JEditorPane 中的 HTML 渲染支持很少（HTML 3.2？）——您也许可以使用它（忘记高级 CSS，thouth）。
*   **脚本支持**。这将解释 JavaScript，并使您的页面具有交互性。您可以为此使用 Rhino（由 Mozilla 的人员维护，并且非常强大）。

（加上内部缓存以避免重复请求；支持将页面保存到文件；支持 3rd 方插件/扩展，例如 Flash；避免对用户的跨站点脚本攻击的安全注意事项......还有更多组件或问题我没有费心在上面包括）。

由于您对 Java 只有基本的了解，并且上述任何组件本身都是相当复杂的项目，因此我建议您选择另一个项目或划定商业 Web 浏览器所做工作的一小部分来尝试实现*它*。

# codeigniter - CodeIgniter & script.aculo.us InPlaceEdit 在更新时产生重复

> ID：14306045
> 
> 赞同：1
> 
> 时间：2013-01-13T17:19:46.263
> 
> 标签：codeigniter, prototypejs, scriptaculous

我正在开发一个 CI 项目并实施了脚本化的 InPlaceEdit。它可以工作，但在更新值时和之后表现得很奇怪。

1）当我单击编辑时，即使该字段只有一个单词并且应该是 1 行，它也会产生一个包含 3 列和 50 行的文本区域。脚本似乎在原始值之前添加了空格。

2）我保存新值并想重新编辑它，它给了我两倍的表格。在那之后的4倍等等......

HTML 因此，当网站呈现时，该行如下所示：

```
<h2 id="case_title-editme-27" class="editable savetitle" onclick="EditInput('case_title','27',   'cases');"> One line </h2> 
```

点击就地编辑会产生：

```
<form id="case_title-editme-27-inplaceeditor" class="input-edit">
<textarea class="editor_field" rows="3" cols="40" name="value"></textarea>
<br>
<input class="editor_ok_button" type="submit" value="Save">
<a class="editor_cancel_link editor_cancel" href="#">cancel</a>
</form>
<h2 id="case_title-editme-27" class="editable savetitle" onclick="EditInput('case_title','27', 'cases');" title="Click to edit" style="display: none;"> One line </h2> 
```

这是我的 JS：

```
function EditInput(field, id, table) {
            var id = id;
            var table = table;
            var field = field;
            new Ajax.InPlaceEditor(
            field+'-editme-'+id,
            '<?PHP echo base_url();?>saveajax/'+id, {
                okText: 'Save',
                formClassName: 'input-edit',
                callback: function(form, value) { return 'table=' + table + '&field=' + field + '&value=' + escape(value)  },
                }

            );
    } 
```

和 PHP 视图

```
<?php foreach($caseheadlines as $headline):?>

    <h2 class="editable savetitle" id="case_title-editme-<?php echo $headline['case_id']; ?>" onclick="EditInput('case_title','<?PHP echo $headline['case_id']; ?>', 'cases');">
        <?php echo $headline['case_title']; ?>
    </h2>
<?php endforeach;?> 
```

因此，当单击 div 时，会触发 js 函数 get 并且一切正常，预计会出现上述问题。控制器和模型都很好，数据被保存到数据库中。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:20:14.547

您提供的 javascript 正在创建多个就地编辑器。我会这样改变它。

对于您希望可编辑的所有字段，将特定类添加到这些字段。我看到你已经有了`<h2>`上面的可编辑类 - 让我们使用它。

当 DOM 被加载时，触发所有具有该类的元素成为像这样的就地编辑器

```
 document.observe("dom:loaded",function(){
        $$('.editable').each(function(element){
            new Ajax.InPlaceEditor(element,
            '<?PHP echo base_url();?>saveajax/'+id, {
                rows : 1,
                cols : 15,
                okText: 'Save',
                formClassName: 'input-edit',
                callback: function(form, value) { return 'table=' + table + '&field=' + field + '&value=' + escape(value)  },
                }

            );
     });
}); 
```

现在每个字段将只有 1 个就地编辑器实例。就地编辑器将点击变成可编辑的字段部分。

至于行和列问题，如果您在实例中设置行和列选项正是您想要的，那应该会有所帮助-我已将它们添加到我的示例中

# c# - 控制音量混合器

> ID：14306048
> 
> 赞同：58
> 
> 时间：2013-01-13T17:20:05.143
> 
> 标签：c#, .net, vb.net, winforms

我想控制其他应用程序的音量（firefox）。

我可以做到`Volume Mixer`

![在此处输入图像描述](../Images/6ac459a75bf7ab3e225bd6c1a7427d5b.png)

什么是图书馆`Volume Mixer`？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-01-14T16:43:13.850

这是一个执行此操作的示例 C# 控制台应用程序。它基于[Windows Core Audio Library](http://msdn.microsoft.com/en-us/library/windows/desktop/dd316599%28v=vs.85%29.aspx)。它仅适用于 Windows 7 及更高版本。

```
using System;
using System.Runtime.InteropServices;
using System.Collections.Generic;

namespace SetAppVolumne
{
    class Program
    {
        static void Main(string[] args)
        {
            const string app = "Mozilla Firefox";

            foreach (string name in EnumerateApplications())
            {
                Console.WriteLine("name:" + name);
                if (name == app)
                {
                    // display mute state & volume level (% of master)
                    Console.WriteLine("Mute:" + GetApplicationMute(app));
                    Console.WriteLine("Volume:" + GetApplicationVolume(app));

                    // mute the application
                    SetApplicationMute(app, true);

                    // set the volume to half of master volume (50%)
                    SetApplicationVolume(app, 50);
                }
            }
        }

        public static float? GetApplicationVolume(string name)
        {
            ISimpleAudioVolume volume = GetVolumeObject(name);
            if (volume == null)
                return null;

            float level;
            volume.GetMasterVolume(out level);
            return level * 100;
        }

        public static bool? GetApplicationMute(string name)
        {
            ISimpleAudioVolume volume = GetVolumeObject(name);
            if (volume == null)
                return null;

            bool mute;
            volume.GetMute(out mute);
            return mute;
        }

        public static void SetApplicationVolume(string name, float level)
        {
            ISimpleAudioVolume volume = GetVolumeObject(name);
            if (volume == null)
                return;

            Guid guid = Guid.Empty;
            volume.SetMasterVolume(level / 100, ref guid);
        }

        public static void SetApplicationMute(string name, bool mute)
        {
            ISimpleAudioVolume volume = GetVolumeObject(name);
            if (volume == null)
                return;

            Guid guid = Guid.Empty;
            volume.SetMute(mute, ref guid);
        }

        public static IEnumerable<string> EnumerateApplications()
        {
            // get the speakers (1st render + multimedia) device
            IMMDeviceEnumerator deviceEnumerator = (IMMDeviceEnumerator)(new MMDeviceEnumerator());
            IMMDevice speakers;
            deviceEnumerator.GetDefaultAudioEndpoint(EDataFlow.eRender, ERole.eMultimedia, out speakers);

            // activate the session manager. we need the enumerator
            Guid IID_IAudioSessionManager2 = typeof(IAudioSessionManager2).GUID;
            object o;
            speakers.Activate(ref IID_IAudioSessionManager2, 0, IntPtr.Zero, out o);
            IAudioSessionManager2 mgr = (IAudioSessionManager2)o;

            // enumerate sessions for on this device
            IAudioSessionEnumerator sessionEnumerator;
            mgr.GetSessionEnumerator(out sessionEnumerator);
            int count;
            sessionEnumerator.GetCount(out count);

            for (int i = 0; i < count; i++)
            {
                IAudioSessionControl ctl;
                sessionEnumerator.GetSession(i, out ctl);
                string dn;
                ctl.GetDisplayName(out dn);
                yield return dn;
                Marshal.ReleaseComObject(ctl);
            }
            Marshal.ReleaseComObject(sessionEnumerator);
            Marshal.ReleaseComObject(mgr);
            Marshal.ReleaseComObject(speakers);
            Marshal.ReleaseComObject(deviceEnumerator);
        }

        private static ISimpleAudioVolume GetVolumeObject(string name)
        {
            // get the speakers (1st render + multimedia) device
            IMMDeviceEnumerator deviceEnumerator = (IMMDeviceEnumerator)(new MMDeviceEnumerator());
            IMMDevice speakers;
            deviceEnumerator.GetDefaultAudioEndpoint(EDataFlow.eRender, ERole.eMultimedia, out speakers);

            // activate the session manager. we need the enumerator
            Guid IID_IAudioSessionManager2 = typeof(IAudioSessionManager2).GUID;
            object o;
            speakers.Activate(ref IID_IAudioSessionManager2, 0, IntPtr.Zero, out o);
            IAudioSessionManager2 mgr = (IAudioSessionManager2)o;

            // enumerate sessions for on this device
            IAudioSessionEnumerator sessionEnumerator;
            mgr.GetSessionEnumerator(out sessionEnumerator);
            int count;
            sessionEnumerator.GetCount(out count);

            // search for an audio session with the required name
            // NOTE: we could also use the process id instead of the app name (with IAudioSessionControl2)
            ISimpleAudioVolume volumeControl = null;
            for (int i = 0; i < count; i++)
            {
                IAudioSessionControl ctl;
                sessionEnumerator.GetSession(i, out ctl);
                string dn;
                ctl.GetDisplayName(out dn);
                if (string.Compare(name, dn, StringComparison.OrdinalIgnoreCase) == 0)
                {
                    volumeControl = ctl as ISimpleAudioVolume;
                    break;
                }
                Marshal.ReleaseComObject(ctl);
            }
            Marshal.ReleaseComObject(sessionEnumerator);
            Marshal.ReleaseComObject(mgr);
            Marshal.ReleaseComObject(speakers);
            Marshal.ReleaseComObject(deviceEnumerator);
            return volumeControl;
        }
    }

    [ComImport]
    [Guid("BCDE0395-E52F-467C-8E3D-C4579291692E")]
    internal class MMDeviceEnumerator
    {
    }

    internal enum EDataFlow
    {
        eRender,
        eCapture,
        eAll,
        EDataFlow_enum_count
    }

    internal enum ERole
    {
        eConsole,
        eMultimedia,
        eCommunications,
        ERole_enum_count
    }

    [Guid("A95664D2-9614-4F35-A746-DE8DB63617E6"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    internal interface IMMDeviceEnumerator
    {
        int NotImpl1();

        [PreserveSig]
        int GetDefaultAudioEndpoint(EDataFlow dataFlow, ERole role, out IMMDevice ppDevice);

        // the rest is not implemented
    }

    [Guid("D666063F-1587-4E43-81F1-B948E807363F"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    internal interface IMMDevice
    {
        [PreserveSig]
        int Activate(ref Guid iid, int dwClsCtx, IntPtr pActivationParams, [MarshalAs(UnmanagedType.IUnknown)] out object ppInterface);

        // the rest is not implemented
    }

    [Guid("77AA99A0-1BD6-484F-8BC7-2C654C9A9B6F"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    internal interface IAudioSessionManager2
    {
        int NotImpl1();
        int NotImpl2();

        [PreserveSig]
        int GetSessionEnumerator(out IAudioSessionEnumerator SessionEnum);

        // the rest is not implemented
    }

    [Guid("E2F5BB11-0570-40CA-ACDD-3AA01277DEE8"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    internal interface IAudioSessionEnumerator
    {
        [PreserveSig]
        int GetCount(out int SessionCount);

        [PreserveSig]
        int GetSession(int SessionCount, out IAudioSessionControl Session);
    }

    [Guid("F4B1A599-7266-4319-A8CA-E70ACB11E8CD"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    internal interface IAudioSessionControl
    {
        int NotImpl1();

        [PreserveSig]
        int GetDisplayName([MarshalAs(UnmanagedType.LPWStr)] out string pRetVal);

        // the rest is not implemented
    }

    [Guid("87CE5498-68D6-44E5-9215-6DA47EF883D8"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    internal interface ISimpleAudioVolume
    {
        [PreserveSig]
        int SetMasterVolume(float fLevel, ref Guid EventContext);

        [PreserveSig]
        int GetMasterVolume(out float pfLevel);

        [PreserveSig]
        int SetMute(bool bMute, ref Guid EventContext);

        [PreserveSig]
        int GetMute(out bool pbMute);
    }
} 
```

注意：我没有完全定义接口，只定义了代码工作所需要的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-10-09T01:58:27.700

我知道这为时已晚，但我最近需要这个，我尝试了西蒙的答案，但无法让它发挥作用，尝试了 ElektroStudios 的评论和[西蒙的其他答案](https://stackoverflow.com/a/20982715/12571630)，但仍然没有，我不知道我做错了什么，但我放弃了在上面。

后来我发现了[这个问题](https://stackoverflow.com/a/21202235/12571630)并使用[CSCore让它工作](https://github.com/filoe/cscore)

```
private static void Main(string[] args)
{
    using (var sessionManager = GetDefaultAudioSessionManager2(DataFlow.Render))
    {
        using (var sessionEnumerator = sessionManager.GetSessionEnumerator())
        {
            foreach (var session in sessionEnumerator)
            {
                using (var simpleVolume = session.QueryInterface<SimpleAudioVolume>())
                using (var sessionControl = session.QueryInterface<AudioSessionControl2>())
                {
                    if (sessionControl.ProcessID == 2436)
                        simpleVolume.MasterVolume = 0.5f;
                }
            }
        }
    }

    Console.ReadKey();
}

private static AudioSessionManager2 GetDefaultAudioSessionManager2(DataFlow dataFlow)
{
    using (var enumerator = new MMDeviceEnumerator())
    {
        using (var device = enumerator.GetDefaultAudioEndpoint(dataFlow, Role.Multimedia))
        {
            Debug.WriteLine("DefaultDevice: " + device.FriendlyName);
            var sessionManager = AudioSessionManager2.FromMMDevice(device);
            return sessionManager;
        }
    }
} 
```

# django - Django Form 不会呈现

> ID：14306049
> 
> 赞同：1
> 
> 时间：2013-01-13T17:20:18.313
> 
> 标签：django, django-forms

我的表单代码：

```
class PlanForm(forms.Form):
    a = forms.CharField(widget=forms.TextInput(attrs={"class", "add-up"}))
    b = forms.CharField(widget=forms.TextInput(attrs={"class", "add-up"}))

    class Media:
        javascript=('test.js', ) 
```

我的查看代码：

```
def plan_detail(request):
    if request.method == "POST":
        return render(request=request,
                  template_name='pasteur/plan_detail.html',
                      dictionary={ 'message': 'This was a post request. WTF!' })
    else:
        return render(request=request,
                  template_name='pasteur/plan_detail.html',
                      dictionary={ 'form': PlanForm() }) 
```

堆栈跟踪：

> 环境：
> 
> 请求方法：GET 请求地址：
> 
> Django 版本：1.4 Python 版本：2.7.2 已安装的应用程序：('django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.sites', 'django.contrib .messages', 'django.contrib.staticfiles', 'django.contrib.admin', 'django.contrib.admindocs', 'south', 'pasteur') 已安装的中间件: ('django.middleware.common.CommonMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware'、'django.middleware.csrf.CsrfViewMiddleware'、'django.contrib.auth.middleware.AuthenticationMiddleware'、'django.contrib.messages.middleware.MessageMiddleware'）
> 
> 模板错误：在模板 /Users/judithjacques/dana/dev/pasteur/src/pasteur/templates/pasteur/plan_detail.html 中，第 8 行的错误“set”对象没有属性“get”1：
> 
> 回溯：get_response 111 中的文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/handlers/base.py”。 response = callback(request, *callback_args, **callback_kwargs) 文件 "/Users/judithjacques/dana/dev/pasteur/src/pasteur/views.py" in plan_detail 13\. dictionary={ 'form': form }) 文件 "/Library/Frameworks/Python.framework/**版本**/2.7/lib/python2.7/site-packages/django/shortcuts/init**.py" 在渲染 44\. return HttpResponse(loader.render_to_string(*args, **kwargs), File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template /loader.py”在 render_to_string 176\. 返回 t.render(context_instance) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template/base.py”渲染 140\. return self._render(context) File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template/base.py" in _render 134\. return self.渲染 823 中的 nodelist.render(context) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template/base.py”。bit = self.render_node(node ,context）文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template/debug.py”在render_node 74。返回node.render（context）文件“/Library /Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template/defaulttags.py”在渲染281。返回nodelist.render(context)文件“/Library/Frameworks/Python.framework /Versions/2.7/lib/python2.7/site-packages/django/template/base.py”在渲染 823.bit = self.render_node(node, context) 文件”/Library/Frameworks/Python.framework/Versions/ 2.7/lib/python2.7/site-packages/django/template/debug.py”在 render_node 74\. 返回 node.render(context) 文件”/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template/debug.py”在渲染 84\. 输出 = self.filter_expression.resolve(context) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site -packages/django/template/base.py" 在解析 571.obj = self.var.resolve(context) File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ django/template/base.py" 在解析 721\. value = self._resolve_lookup(context) File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template/base .py”在_resolve_lookup 772\. current = current() 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/forms.py”在as_ul 229。errors_on_separate_row = False) _html_output 171 中的文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/forms.py”。label = bf.label_tag(label) 或'' label_tag 508 中的文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/forms.py”。id_ = widget.attrs.get('id' ) 或 self.auto_idget('id') 或 self.auto_idget('id') 或 self.auto_id**
> 
>  **异常类型：/pasteur/plan/create/ 处的 AttributeError 异常值：'set' 对象没有属性 'get'**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:23:14.973

正如错误所说，`{"class", "add-up"}`是一个集合。你需要一本字典：`{"class": "add-up"}`.**

# linux - 我应该在哪里放置服务器的输入/输出控制台？

> ID：14306052
> 
> 赞同：0
> 
> 时间：2013-01-13T17:20:28.947
> 
> 标签：linux, networking, console, vps

我正在开发一个简单的 2d 在线游戏，现在我正在设计我的服务器。服务器将在 linux vps 上运行，我需要一种与之通信的方法（例如关闭它，因为它将在 vps 上运行，所以简单地关闭终端是行不通的）。所以我认为有两种选择：

1）编写2个应用程序-服务器不说任何内容并且不接受控制台输入，第二个应用程序是向服务器发送命令的控制台（例如退出，获取在线播放器等）。

2) 编写 1 个有 2 个线程的应用程序 - 一个是真正的服务器，第二个线程将用于 cin 和 cout。但是我不确定这是否适用于vps...

或者也许有更好的方法？这样做的通常方法是什么？请记住，它必须是与 vps 兼容的方式（只能通过 ssh 访问它）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:49:44.047

我会为主要服务器功能选择一个“守护程序”（服务器），然后使用可以连接到服务器并向其发送命令的辅助应用程序。

或者只是使用常规信号，就像大多数其他服务器一样 - 例如，当您重新配置 Apache 服务器时，您向它发送一个重启服务器的 SIGHUP 信号。这样，您根本不需要第二个应用程序 - 只需“kill -SIGHUP your_server_pid”。

# ios - xcode - 设计 / 重新设计 MailController / MFMailComposeViewController

> ID：14306055
> 
> 赞同：0
> 
> 时间：2013-01-13T17:20:37.530
> 
> 标签：ios, objective-c, xcode, mfmailcomposeviewcontroller

是否可以重新设计 MFMailComposeViewController？

如何？

App Dropbox 可以做到。图片：http: [//jonathangurebo.tumblr.com/post/40436277822](http://jonathangurebo.tumblr.com/post/40436277822)

我可以更改“MessageUI.framework”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T23:56:59.923

要回答您关于自定义应用程序中所有导航栏外观的请求，请在您的应用程序中使用它：didFinishLaunchingWithOptions: 在您的应用程序委托中：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"image"] forBarMetrics:UIBarMetricsDefault];

        [[UINavigationBar appearance] setTintColor:[UIColor blueColor]];
        [[UINavigationBar appearance] setAlpha:1]; 
//change background image and tint color for navigation buttons

        // Set the text appearance for navbar
        [[UINavigationBar appearance] setTitleVerticalPositionAdjustment:2 forBarMetrics:UIBarMetricsDefault]; //change vertical appearance of navigation bar title
        [[UINavigationBar appearance] setTitleTextAttributes:
         [NSDictionary dictionaryWithObjectsAndKeys:
          [UIColor whiteColor], UITextAttributeTextColor,
          [UIColor clearColor], UITextAttributeTextShadowColor,
          [NSValue valueWithUIOffset:UIOffsetMake(1, 1)], UITextAttributeTextShadowOffset,
          [UIFont fontWithName:@"HelveticaNeue" size:22], UITextAttributeFont,
          nil]]; //set custom font info 
```

# objective-c - 无法解释的错误访问错误

> ID：14306060
> 
> 赞同：2
> 
> 时间：2013-01-13T17:21:04.453
> 
> 标签：objective-c, nsmutablearray, exc-bad-access

我有一些代码在其中迭代一个数组。我正在添加第二个可变数组，以便可以向其中添加对象，我希望在迭代完成后将其删除。但是，当我尝试将对象添加到我创建的第二个数组时，这会导致错误的访问错误。这让我很困惑，因为我试图添加的对象可以用于所有类型的东西，只是不能添加到这个数组中。这让我相信数组可能正在被释放，所以我保留了它，但这没有任何效果。这是代码：

```
 CCTMXObjectGroup *objectGroup = [ self objectGroupNamed: @"object" ];
    NSMutableArray *objectsToRemove = [ NSMutableArray array ];
    for ( NSDictionary *object in [ objectGroup objects ] ) {
        [ objectsToRemove addObject: object ]; // crash occurs here
        // name, type, x, y, width, height
        NSString *name = [ object valueForKey: @"name" ];
        if ( [ name isEqualToString: @"sprite" ] ) {
            [ self createSpriteFromObject: object ];
        } else if ( [ name isEqualToString: @"spriteController" ] ) {
            [ self createSpriteControllerFromObject: object ];
        }
    } 
```

如果我删除 addObject 行，将不再发生崩溃。这是踢球者，崩溃似乎只发生在第 6 次迭代。单步执行代码、我添加到的可变数组以及我添加到其中的对象似乎都很好（未发布）。那么为什么会出现错误的访问错误呢？

**编辑**

```
CoreFoundation`-[__NSArrayM addObject:]:
0x23c39e0:  pushl  %ebp
0x23c39e1:  movl   %esp, %ebp
0x23c39e3:  pushl  %edi
0x23c39e4:  pushl  %esi
0x23c39e5:  subl   $16, %esp
0x23c39e8:  calll  0x23c39ed                 ; -[__NSArrayM addObject:] + 13
0x23c39ed:  popl   %edi
0x23c39ee:  movl   1512267(%edi), %eax
0x23c39f4:  movl   %eax, 4(%esp)
0x23c39f8:  movl   8(%ebp), %esi
0x23c39fb:  movl   %esi, (%esp)
0x23c39fe:  calll  0x24e35c8                 ; symbol stub for: objc_msgSend
0x23c3a03:  movl   1512287(%edi), %ecx
0x23c3a09:  movl   %eax, 12(%esp)
0x23c3a0d:  movl   16(%ebp), %eax
0x23c3a10:  movl   %eax, 8(%esp)
0x23c3a14:  movl   %ecx, 4(%esp)
0x23c3a18:  movl   %esi, (%esp)
0x23c3a1b:  calll  0x24e35c8                 ; symbol stub for: objc_msgSend
0x23c3a20:  addl   $16, %esp ; bad access code 2
0x23c3a23:  popl   %esi
0x23c3a24:  popl   %edi
0x23c3a25:  popl   %ebp
0x23c3a26:  ret    
0x23c3a27:  nopw   (%eax,%eax) 
```

和

```
libsystem_sim_c.dylib`bzero$VARIANT$sse42:
0x1f9c200:  pushl  %ebp
0x1f9c201:  movl   %esp, %ebp
0x1f9c203:  pushl  %edi
0x1f9c204:  movl   8(%ebp), %edi
0x1f9c207:  movl   12(%ebp), %edx
0x1f9c20a:  xorl   %eax, %eax
0x1f9c20c:  cmpl   $80, %edx
0x1f9c20f:  jg     0x1f9c24c                 ; bzero$VARIANT$sse42 + 76
0x1f9c211:  cmpl   $12, %edx
0x1f9c214:  jge    0x1f9c226                 ; bzero$VARIANT$sse42 + 38
0x1f9c216:  testl  %edx, %edx
0x1f9c218:  je     0x1f9c246                 ; bzero$VARIANT$sse42 + 70
0x1f9c21a:  movb   %al, (%edi) ; bad access code 2
0x1f9c21c:  incl   %edi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:15:42.183

```
NSMutableArray *objectsToRemove = [ NSMutableArray array ];
for ( NSDictionary *object in [ objectGroup objects ] ) {
    [ objectsToRemove addObject: object ]; // crash occurs here 
```

如果崩溃发生在那里，那么它就没有任何关系`objectsToRemove`（除非有你没有显示的代码）。

这意味着这`object`是文库。很可能，它已经从下面释放出来了`objectGroup`。打开僵尸检测并重新运行您的应用程序。

注意：当您是新手时，调试这些东西可能会令人生畏。一些技巧：

• 如果您正盯着汇编代码看，那么您几乎肯定会陷入困境。

• 如果您在Foundation 框架方法中崩溃，则几乎可以肯定该错误在其他地方，因为这些方法在启动您的Mac 或iOS 设备时会执行数亿次。假设他们工作是一个安全的赌注。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:00:39.283

事实证明，问题在于 NSMutableArray 初始化。我正在使用：

```
NSMutableArray *objectsToRemove = [ NSMutableArray array ]; 
```

什么时候应该是：

```
NSMutableArray *objectsToRemove = [ NSMutableArray arrayWithCapacity: 10 ]; 
```

# android - jQuery Mobile - 安卓输入值

> ID：14306062
> 
> 赞同：0
> 
> 时间：2013-01-13T17:21:08.557
> 
> 标签：android, jquery, jquery-mobile, android-browser

我遇到了一个奇怪的 jQuery Mobile 问题（对不起我的英语）

（使用三星 Galaxy S2 测试 - 默认浏览器。在我的 Nexus 4 上一切正常（默认 Chrome））

我有一个带有一些输入字段的表单。它们都有一个固定值。（屏幕 1）

**截图一：**

![http://i.stack.imgur.com/jIytg.png](../Images/921c97faba5cad3124de1de71b8e6032.png)

**编码：**

```
<input type="tel" name="format-breite" id="format-breite" class="chfunc" value="Breite in mm: ">
<input type="tel" name="format-hoehe" id="format-hoehe" class="chfunc" value="Höhe in mm: "> 
```

当您单击输入时，该值变为白色（您再也看不到它了）并且光标不在正确的位置。但是您可以看到您使用键盘输入的文本（屏幕 2 和 3）。

**截图二：**

![http://i.stack.imgur.com/XHH5j.png](../Images/fba19d650c065bd746f0c2948ab17d54.png)

**截图 3：**

![http://i.stack.imgur.com/8MC2H.png](../Images/29c782ea87afb7fc3d0bfa78e717572c.png)

然后，当您单击输入时，一切都在这里，但您输入的文本不在正确的位置。（屏幕 4）

**截图 4：**

![http://i.stack.imgur.com/37txp.png](../Images/15ed57598b155dddd132edb18b7d19dc.png)

我只遇到 jQuery Mobile 的问题。在其他网站上，输入值没有问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:52:58.337

[我在jsbin](http://jsbin.com/eweqeq/1/edit)和[browserstack](http://browserstack.com)中对此代码进行了一些测试。据我所知，三星 S2 还没有完全为 HTML5 做好输入 type="tel" 标签/属性的准备。这是我使用的测试页面：http: [//jsbin.com/eweqeq/1/edit](http://jsbin.com/eweqeq/1/edit)

如果我将其更改为 input type="text" 我会得到您在模拟器中寻找的行为。

根据这份报告[http://www.quirksmode.org/html5/inputs_mobile.html](http://www.quirksmode.org/html5/inputs_mobile.html) ，对于android来说，输入类型=“tel”的功能似乎非常小，我将其归类为设备和HTML5问题，然后是jQuery Mobile问题. 如果没有将 jQuery Mobile 库添加到此处的页面，我会得到相同的行为：http: [//jsbin.com/awagos/1/edit](http://jsbin.com/awagos/1/edit)

# php - 在表单中显示 mysql 复选框值

> ID：14306065
> 
> 赞同：0
> 
> 时间：2013-01-13T17:21:21.397
> 
> 标签：php

一个简单的问题，但我似乎找不到答案。

我有一个简单的形式，在检查复选框时将值“上”插入数据库

当重新访问表单并显示数据库信息时，如何从数据库中提取数据时选中该复选框？

我已经尝试过了，但它不起作用

```
<input type="checkbox" name="positioning" class="input_margin" value="<? $row['positioning']; ?>">Positioning<br /> 
```

（我只需要帮助，我已经设置好了 sql 查询等）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:24:18.447

使用条件语句检查数据库值，如果应该检查，则回显“已检查”

```
<input type="checkbox" name="positioning" class="input_margin" <? if($row['positioning']=='on'){echo 'checked';} ?>> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-13T17:23:45.250

您需要使用该`checked`属性而不是`value`.

`value`如果选中该框（例如`positioning=on`），则提供该字段`value="on"`

```
<input type="checkbox" name="positioning" class="input_margin" <? if($row['positioning']) { ?> checked<? } ?>/>Positioning<br /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-11T09:20:11.450

包括 value 属性，因此如果选中，复选框输入将显示为“on”。否则，表单最初会检索一个值，但无法在任何后续表单提交中发布。到数据库

```
<input type="checkbox" name="positioning" class="input_margin" value="on" <? if($row['positioning'] =='on'){echo 'checked';} ?> />Positioning<br /> 
```

# javascript - 如何阻止节点 js 服务器崩溃

> ID：14306066
> 
> 赞同：6
> 
> 时间：2013-01-13T17:21:26.840
> 
> 标签：javascript, node.js, webserver

我是节点 js 的新手。我试图创建一个简单的 HTTP 服务器。我按照著名的例子创建了一个“Hello World！” 服务器如下。

```
var handleRequest = function(req, res) {
  res.writeHead(200);
  res1.end('Hello, World!\n');
};

require('http').createServer(handleRequest).listen(8080);

console.log('Server started on port 8080'); 
```

运行此代码将按预期正确启动服务器。但是尝试访问`http://127.0.0.1:8080`会通过抛出`res1`未定义的错误来使其崩溃。我希望服务器仍然继续运行并在遇到错误时优雅地报告错误。

我如何实现它？我试过 try-catch 但这对我没有帮助:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T17:41:43.297

这里有一堆评论。首先，为了让您的示例服务器正常工作，需要在使用它之前定义 handleRequest。

1-您真正想要的，即阻止进程退出，可以通过处理 uncaughtException （[文档](http://nodejs.org/api/process.html#process_event_uncaughtexception)）事件来处理：

```
var handleRequest = function(req, res) {
    res.writeHead(200);
    res1.end('Hello, World!\n');
};
var server = require('http').createServer(handleRequest);
process.on('uncaughtException', function(ex) {
    // do something with exception
});
server.listen(8080);
console.log('Server started on port 8080'); 
```

2- 我建议在您的代码上使用 try{} catch(e) {}，例如：

```
var handleRequest = function(req, res) {
    try {
      res.writeHead(200);
      res1.end('Hello, World!\n');
    } catch(e) {
      res.writeHead(200);
      res.end('Boo');
    }
}; 
```

3-我猜这个例子只是一个例子而不是实际代码，这是一个可以防止的解析错误。我提到了这一点，因为您不需要在异常捕获处理程序上出现解析错误。

4- 请注意，`process`将来节点将被替换为[域](http://nodejs.org/api/domain.html)

5-我宁愿使用[express](http://expressjs.com/)之类的框架，也不愿做这些事情。

6- 推荐讲座：[StackOverflow - NodeJS 异常处理的最佳实践](https://stackoverflow.com/questions/7310521/node-js-best-practice-exception-handling)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-15T13:32:23.723

我不是针对您的问题详细信息，而是您关于防止节点服务器崩溃的问题标题。您可能可以使用**DOMAIN**，这可能会在抛出 uncaughtException 时阻止您的服务器崩溃。

```
domain = require('domain'),
d = domain.create();

d.on('error', function(err) {
  console.error(err);
}); 
```

有关更多详细信息，请访问[http://shapeshed.com/uncaught-exceptions-in-node/](http://shapeshed.com/uncaught-exceptions-in-node/)

除了使用此方法之外，还必须尝试捕获您的块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:24:40.663

也许你应该`handleRequest`在使用它之前定义：

```
require('http').createServer(handleRequest).listen(8080);

function handleRequest(req, res) {
  res.writeHead(200);
  res1.end('Hello, World!\n');
}; 
```

或者

```
var handleRequest = function(req, res) {
  res.writeHead(200);
  res1.end('Hello, World!\n');
};

require('http').createServer(handleRequest).listen(8080); 
```

* * *

你应该确定它`res1`也存在。

# c# - 将选定的 XML 内容绑定到文本框

> ID：14306067
> 
> 赞同：1
> 
> 时间：2013-01-13T17:21:29.493
> 
> 标签：c#, wpf, xaml, textbox

应该打开一个 XML 文件，并且元素应该显示在`ListBox`可以选择单个元素的位置。所选元素应显示在`TextBox`可以更改的位置。

我设法在`ListBox`. 但是我怎样才能设法在 2 `TextBox`es 中显示选定的 XML 内容？

这是 XML 文件的内容。

```
<Inventory xmlns="">
    <Books>
        <Book ISBN="0-7356-0562-9" Stock="in" Number="9">
            <Title>XML in Action</Title>
            <Summary>XML Web Technology</Summary>
        </Book>
        <Book ISBN="0-7356-1370-2" Stock="in" Number="8">
            <Title>Programming Microsoft Windows With C#</Title>
            <Summary>C# Programming using the .NET Framework</Summary>
        </Book>
        <Book ISBN="0-7356-1288-9" Stock="out" Number="7">
            <Title>Inside C#</Title>
            <Summary>C# Language Programming</Summary>
        </Book>
        <Book ISBN="0-7356-1377-X" Stock="in" Number="5">
            <Title>Introducing Microsoft .NET</Title>
            <Summary>Overview of .NET Technology</Summary>
        </Book>
        <Book ISBN="0-7356-1448-2" Stock="out" Number="4">
            <Title>Microsoft C# Language Specifications</Title>
            <Summary>The C# language definition</Summary>
        </Book>
    </Books>
</Inventory> 
```

这是 MainWindow.xaml 的内容。

```
<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="XML_View_Edit.MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow"
    Width="500"
    Height="200">
    <Window.Resources>
        <XmlDataProvider x:Key="InventoryData"
                         XPath="Inventory/Books"
                         Source="Data.xml"/>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition
                Height="100" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <ListBox
            Grid.Row="0"
            Name="listBox1" >
            <ListBox.ItemsSource>
                <Binding Source="{StaticResource InventoryData}" XPath="Book"/>
            </ListBox.ItemsSource>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text = "{Binding XPath=Title}" />
                        <TextBlock Text= " - " />
                        <TextBlock Text = "{Binding XPath=Summary}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <Grid
            Grid.Row="1"
             DataContext="listBox1.SelectedItem">
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition
                    Width="70" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <Label
                Content="Title"
                Grid.Row="0"
                Grid.Column="0"
                Name="label_title" />
            <Label
                Content="Summary"
                Grid.Row="1"
                Grid.Column="0"
                Name="label_summary" />
            <TextBox
                Grid.Column="1"
                Name="textbox_title"
                Grid.Row="0" />
            <TextBox
                Grid.Column="1"
                Name="textbox_summary"
                Grid.Row="1" />
        </Grid>
    </Grid>
</Window> 
```

所选 Book 的 Title 和 Summary 应该显示在 2 `TextBox`es 中，用户可以在其中更改每个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:24:27.567

大致：

*   将 2 个`TextBox`es 放在一个 Container 上`C1`
*   绑定`C1.DataContext`到`ListBox1.SelectedItem`

而且我不确定绑定会给出什么结果`XPath="*"`。`ListBox1`你可能想要这样的东西：

```
<Binding Source="{StaticResource InventoryData}" XPath="@ISBN"/> 
```

* * *

### 编辑

您需要实际绑定`TextBox`元素：

```
 <TextBox
            Grid.Column="1"
            Name="textbox_title"
            Text = "{Binding XPath=Title}"   <!-- this -->
            Grid.Row="0" />
        <TextBox
            Grid.Column="1"
            Name="textbox_summary"
            Text = "{Binding XPath=Summary}"   <!-- and this -->
            Grid.Row="1" /> 
```

试试看。

### 编辑2：

让我们修复内部 Grid 的绑定：

```
 DataContext="{Binding ElementName=listBox1, Path=SelectedItem}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:26:55.477

尝试以下操作：

```
<ListBox
    Grid.Row="0"
    Name="listBox1" >
    <ListBox.ItemsSource>
        <Binding Source="{StaticResource InventoryData}" XPath="*"/>
</ListBox.ItemsSource>
 <ListBox.ItemTemplate>
  <DataTemplate>
    <StackPanel Orientation="Horizontal">
      <TextBlock Text = "{Binding XPath=Title}">
      <TextBlock Text = "{Binding XPath=Summary}">
    </StackPanel>
  </DataTemplate>
 </ListBox.ItemTemplate>
</ListBox> 
```

# python - 想要在我的层次结构的子目录中运行主程序

> ID：14306078
> 
> 赞同：2
> 
> 时间：2013-01-13T17:22:06.200
> 
> 标签：python

我正在开发一个开源 Python 项目，其中包含大量（并且稳步增加）的演示程序。

我将演示程序移到了一个名为 的子目录`demo/`中，但是您当然不能直接运行它们 - 如果这样做，Python 会将`demo/`子目录作为您的根目录，并且您的所有项目导入都会失败。

我的解决方法是在顶层编写一个 Demo.py 程序，让您选择要运行的演示，但是该项目的其他开发人员和用户（相当合理地）抱怨必须这样做 - 他们只是想运行他们的演示直接。

我对此没有很好的解决方案。我最好的想法是将这样的代码块放在每个演示文件的顶部：

```
if __name__ == '__main__':
  import sys
  from os.path import dirname
  sys.path.append(dirname(dirname(__file__))) 
```

这似乎确实有效，尽管它不优雅。

1.  有更好的解决方案吗？
2.  如果没有，我应该注意这个解决方案中是否有任何明显的陷阱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:37:20.320

汤姆，我会把这些信息放在这里，以防它对其他人有任何用处：可能会引导你做一些建设性的事情，但是.. 我发现无法为 demos 目录中的文件生成文档。任何一个

```
pydoc demos/Blur.py 
```

或者

```
python -m pydoc -w demos/Blur.py 
```

只需运行该文件。即他们做你想要的。但是我无法获得任何文件。它适用于所有其他目录！

稻田

# c# - 将数据传递给后台代理，C# windows phone

> ID：14306079
> 
> 赞同：2
> 
> 时间：2013-01-13T17:22:12.813
> 
> 标签：c#, windows-phone-7, background-process

关于如何从我的主应用程序获取数据到后台代理做了很多阅读。微软的建议似乎是使用带互斥锁的隔离存储。

在一些地方建议您可以在第三个项目中创建一个静态类（由 main 和 agent 引用）并以这种方式传递数据（但没有示例）。我无法让它发挥作用。后台代理似乎无法访问主应用程序创建的静态类。

有没有人让它工作？还是隔离存储是最好的方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T17:59:59.480

您在几个地方读到的内容在设计上是完全不可能的。

后台代理存在于一个单独的进程中。如果您将在共享库中定义静态变量，您将拥有该变量的 2 个完全独立的副本，一个在 GUI 进程中，另一个在后台代理进程中。

# html - Nokogiri XML 到节点

> ID：14306082
> 
> 赞同：4
> 
> 时间：2013-01-13T17:22:26.653
> 
> 标签：html, ruby, nokogiri

我正在阅读带有 Nokogiri 的本地 HTML 文档，如下所示：

```
f = File.open(local_xml)
@doc = Nokogiri::XML(f)
f.close 
```

`@doc`包含一个 Nokogiri XML 对象，我可以使用`at_css`.

我想使用 Nokogiri 的[XML::Node](http://nokogiri.org/Nokogiri/XML/Node.html)对其进行修改，但我完全被卡住了。如何获取这个 Nokogiri XML 文档并使用节点方法处理它？

例如：

```
@doc.at_css('rates tr').add_next_sibling(element) 
```

返回：

```
undefined method `add_next_sibling' for nil:NilClass (NoMethodError) 
```

尽管事实`@doc.class`是`Nokogiri::XML::Document`。

为了完整起见，这是我要编辑的标记。

```
<html>
<head>
<title>Exchange Rates</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <table class="rates">
        <tr>
            <td class="up"><div></div></td>
            <td class="date">Saturday, Jan 12</td>
            <td class="rate up">3.83</td>
        </tr>
        <tr>
            <td class="up"><div></div></td>
            <td class="date">Friday, Jan 11</td>
            <td class="rate up">3.70</td>
        </tr>
        <tr>
            <td class="down"><div></div></td>
            <td class="date">Thursday, Jan 10</td>
            <td class="rate down">3.68</td>
        </tr>
        <tr>
            <td class="down"><div></div></td>
            <td class="date">Wedensday, Jan 9</td>
            <td class="rate down">3.70</td>
        </tr>
        <tr>
            <td class="up"><div></div></td>
            <td class="date">Tuesday, Jan 8</td>
            <td class="rate up">3.66</td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T18:26:04.733

这是一个如何做你想做的事的例子。从`f`包含要解析的 HTML 的缩短版本开始：

```
require 'nokogiri'

f = '
<html>
<head>
<title>Exchange Rates</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <table class="rates">
        <tr>
            <td class="up"><div></div></td>
            <td class="date">Saturday, Jan 12</td>
            <td class="rate up">3.83</td>
        </tr>
    </table>
</body>
</html>
'

doc = Nokogiri::HTML(f)
doc.at('.rates tr').add_next_sibling('<p>foobar</p>')

puts doc.to_html 
```

您的代码错误地尝试`class="rates"`查找`<table>`. 在 CSS 中，我们会使用`.rates`. 使用 CSS 的另一种方法是`table[class="rates"]`.

您的示例未定义您尝试添加到 HTML 的节点，因此我附加了`<p>foobar</p>`. Nokogiri 将让您从头开始构建一个节点并附加它，或者使用标记并添加它，或者您可以从 HTML 中的一个位置找到一个节点，将其删除，然后将其插入到其他位置。

该代码输出：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Exchange Rates</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
    <table class="rates">
<tr>
<td class="up"><div></div></td>
            <td class="date">Saturday, Jan 12</td>
            <td class="rate up">3.83</td>
        </tr>
<p>foobar</p>
</table>
</body>
</html> 
```

It's not necessary to use `at_css` or `at_xpath` instead of `at`. Nokogiri senses what type of accessor you're using and handles it. The same applies using `xpath` or `css` instead of `search`. Also, `at` is equivalent to `search('some accessor').first`, so it finds the first occurrence of the matching node.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T17:44:10.967

尝试加载为 HTML 而不是 XML`Nokogiri::HTML(f)`

没有详细了解 Nokogiri 的工作原理，可以说 XML 没有 css 对吗？所以 at_css 方法没有意义（也许我不知道）。所以它应该可以作为 Html 加载。

## 更新

只注意到一件事。您想要这样做`at_css('.rates tr')`，`at_css('rates tr')`因为这就是您在 css 中选择课程的方式。也许它现在适用于 XML。

# javascript - 根据固定宽度和高度框内的拟合文本限制文本长度

> ID：14306083
> 
> 赞同：2
> 
> 时间：2013-01-13T17:22:34.907
> 
> 标签：javascript, html, web, textarea

我正在编写脚本，它通过检查文本是否适合在 div 框内来限制输入的文本，如果不尝试降低字体大小，则高度和宽度是固定的，然后再次检查然后达到最小字体大小，它将文本限制在 textarea 内。我已经完成了这一点，但它有时会因高度过高而达到限制，并且它不允许覆盖然后选择的文本。

这是我的脚本：

```
function onEdit(e) {
    var notebox_tmp = $(".notebox_tmp");
    var maxHeight = 120;
    var minFontSize = 25;

    notebox_tmp.css("font-size","50px");
    notebox_tmp.text($(this).val());
    var currentHeight = notebox_tmp.height();
    var currentFontSize = parseInt(notebox_tmp.css("font-size"),10);
    while (currentHeight > maxHeight && currentFontSize > minFontSize) {
        notebox_tmp.css("font-size", currentFontSize);
        currentFontSize -= 0.25;
        currentHeight = notebox_tmp.height();
    }
    if (currentFontSize <= minFontSize) { 
      e.preventDefault();
    }
};

$("textarea").keypress(onEdit); 
```

这是我当前的脚本演示：http: [//jsfiddle.net/6pfCM/9/](http://jsfiddle.net/6pfCM/9/)

# javascript - 重新启动间隔计时器？

> ID：14306087
> 
> 赞同：1
> 
> 时间：2013-01-13T17:22:53.080
> 
> 标签：javascript, setinterval, clearinterval

我的意思是重置它，`restarting`以便它重新启动时间，这样重新启动需要 3 秒。

我的代码是：

```
/* ********** Forside Slider ********** */

var slider_current_id = 1;

$(".slidermenu").live("click", function() {
    var id = $(this).attr('data-id');
    clearInterval(window.slider_timer);
    window.slider_timer = setInterval(start_slider_timer(), 3000);
    window.slider_current_id = parseInt(id, 10);
    $('.slidermenu.currentone').animate({backgroundColor: '#FCFBFB'}, 'slow');
    $('.slidermenu.currentone').removeClass("currentone");
    $(this).animate({backgroundColor: '#f3f3f3'}, 'slow');
    $(this).addClass("currentone");
    $('#activeimage img.currentone').fadeOut('slow');
    $('#activeimage img.currentone').removeClass("currentone");
    $('#activeimage img[data-id='+id+']').fadeIn('slow');
    $('#activeimage img[data-id='+id+']').addClass("currentone");
});

function start_slider_timer() {
    if (window.slider_current_id == 5) {
        window.slider_current_id = 1;
    }else{
        window.slider_current_id = window.slider_current_id + 1;
    }
    $('.slidermenu.currentone').animate({backgroundColor: '#FCFBFB'}, 'slow');
    $('.slidermenu.currentone').removeClass("currentone");
    $('.slidermenu[data-id='+window.slider_current_id+']').animate({backgroundColor: '#f3f3f3'}, 'slow');
    $('.slidermenu[data-id='+window.slider_current_id+']').addClass("currentone");
    $('#activeimage img.currentone').fadeOut('slow');
    $('#activeimage img.currentone').removeClass("currentone");
    $('#activeimage img[data-id='+window.slider_current_id+']').fadeIn('slow');
    $('#activeimage img[data-id='+window.slider_current_id+']').addClass("currentone");
}

var slider_timer = setInterval(start_slider_timer(), 3000); 
```

我没有收到任何错误，它只是没有运行.. 这是我的`Interval`，根本没有运行。

希望有人能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:24:09.543

删除括号以提供函数作为参数而不是调用它。代替

```
var slider_timer = setInterval(start_slider_timer(), 3000); 
```

和

```
var slider_timer = setInterval(start_slider_timer, 3000); 
```

请注意，如果要“重新启动”计时器，首先必须使用清除它

```
clearInterval(slider_timer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:30:32.440

你必须改变这个

```
var slider_timer =  setInterval('start_slider_timer()', 1000); 
```

_

# python - 合并排序以计算 Python 中的拆分反转

> ID：14306088
> 
> 赞同：5
> 
> 时间：2013-01-13T17:22:53.753
> 
> 标签：python, algorithm, recursion, mergesort

我正在尝试使用mergesort - 我得到 - 来计算列表中拆分反转的数量（也就是说，未排序列表前半部分中的元素应该出现在后半部分中的给定元素之后未排序列表；例如 [3 2 1 4] 将包含拆分反转 (3, 1)，但不包含 (3, 2)，因为 3 和 2 都在前半部分)。当我到达最终的打印语句时，我得到了我期望的答案——在本例中为 9——但返回值很不稳定，因为它通过递归返回拆分值。我尝试了各种索引组合都无济于事。有什么帮助吗？（使用 Python 2.7）

（为了记录，这是一个 Coursera 家庭作业问题，但我只是为了好玩而学习——除了我之外没有人给这个评分。）

```
def mergesort(lst):
    '''Recursively divides list in halves to be sorted'''
    if len(lst) is 1:
        return lst
    middle = int(len(lst)/2)
    left  = mergesort(lst[:middle])
    right = mergesort(lst[middle:])
    sortedlist = merge(left, right)
    return sortedlist

def merge(left, right):
    '''Subroutine of mergesort to sort split lists.  Also returns number
    of split inversions (i.e., each occurence of a number from the sorted second
    half of the list appearing before a number from the sorted first half)'''
    i, j = 0, 0
    splits = 0
    result = []
    while i < len(left) and j < len(right):
        if left[i] < right[j]:
            result.append(left[i])
            i += 1
        else:
            result.append(right[j])
            j += 1
            splits += len(left[i:])
    result += left[i:]
    result += right[j:]
    print result, splits
    return result, splits

print mergesort([7,2,6,4,5,1,3,8]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:37:33.173

修改您的`mergesort`函数以忽略中间拆分。

```
def mergesort(lst):
    '''Recursively divides list in halves to be sorted'''
    if len(lst) == 1:
        return lst, 0
    middle = len(lst)/2
    left = mergesort(lst[:middle])[0]  # Ignore intermediate splits
    right = mergesort(lst[middle:])[0]  # Ignore intermediate splits
    sortedlist, splits = merge(left, right)
    return sortedlist, splits 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T17:34:25.013

您的代码中有一些问题：

*   不要`int()`的结果`len() / 2`。如果您使用的是 Python3，我会直接使用带`//`运算符的整数除法。
*   第一行的比较`mergesort()`是错误的。首先，不要`is`用于比较是否相等。`is`运算符仅用于标识。如果您有两个具有相同值的不同整数，则它们相等但不相同。对于小整数，我相信至少有一些 Python 方言会保留该值，因此您的比较有效，但您所依赖的东西并不能保证。尽管如此，使用`==`也不起作用，因为您忘记了空列表的情况。
*   我猜您的实际问题（“奇怪的返回值”）是由于您返回两个值（作为元组）以一个名称存储的事实引起的，然后您将其作为参数传递给递归`merge()`调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T04:34:46.510

由于在您的代码中合并返回一对，因此合并排序也必须返回一对。启用要在列表中获取总拆分反转，您必须添加左半部分、右半部分并合并拆分反转。

这是我在您的代码中所做的修改。

```
def mergesort(lst):
    '''Recursively divides list in halves to be sorted'''
    if len(lst) == 1:
        return lst, 0
    middle = len(lst)/2
    left, s1 = mergesort(lst[:middle])[0]  # Ignore intermediate splits
    right, s2 = mergesort(lst[middle:])[0]  # Ignore intermediate splits
    sortedlist, s3 = merge(left, right)
    return sortedlist, (s1+s2+s3)` 
```

# android - 调用 startActivityForResult() 时出现空指针异常

> ID：14306094
> 
> 赞同：1
> 
> 时间：2013-01-13T17:23:36.823
> 
> 标签：android, android-activity, nullpointerexception, start-activity

从另一个类中的类调用 startActivityForResult() 时遇到问题（空指针异常），代码如下：

```
public class OCRActivity extends Activity {

public OCRActivity(String operator)
{
    this.operator = operator;
}

public void startCameraActivity() {

    final Intent capture_intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(capture_intent, 1); // I get the Null pointer Exception here
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (resultCode == RESULT_OK) {

        if(requestCode == 1){
            //get the Uri for the captured image
            picUri = data.getData();
            //carry out the crop operation
            performCrop();
        }
} 
```

这是我打电话的地方`startCameraActivity()`

```
public class WayToFillActivity extends Activity implements OnClickListener {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.way_to_fill);

    CAMERA_BTN = (Button) findViewById(R.id.camera_btn);
    CAMERA_BTN.setOnClickListener(this);
    Intent operator_intent =  getIntent();
    OPERATOR = operator_intent.getStringExtra("operator");
}

@Override
public void onClick(View v) {
    if (v.getId() == R.id.camera_btn)
    {
        OCRActivity ocr = new OCRActivity(OPERATOR);
        ocr.startCameraActivity();

    }

} 
```

所以如果我做错了什么请告诉我！

日志猫

```
01-13 16:22:26.583: E/AndroidRuntime(32425): java.lang.NullPointerException
01-13 16:22:26.583: E/AndroidRuntime(32425):    at     android.app.Activity.startActivityForResult(Activity.java:3190)
01-13 16:22:26.583: E/AndroidRuntime(32425):    at com.almannaa.EasyRecharge.OCRActivity.startCameraActivity(OCRActivity.java:176) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T17:27:50.513

您将`OCRActivity`其视为一个普通的 Java 类，而不是另一个 Activity。因此，当您调用时，`startActivityForResult()`您会得到一个 NPE，因为 Activity`onCreate()`尚未被调用，这意味着它的当前实例对调用无效`startActivityForResult()`

相反，请尝试使用：

```
public class WayToFillActivity extends Activity implements OnClickListener {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.way_to_fill);

    CAMERA_BTN = (Button) findViewById(R.id.camera_btn);
    CAMERA_BTN.setOnClickListener(this);
    Intent operator_intent =  getIntent();
    OPERATOR = operator_intent.getStringExtra("operator");
}

@Override
public void onClick(View v) {
    if (v.getId() == R.id.camera_btn)
    {
        OCRActivity ocr = new OCRActivity(OPERATOR);
        ocr.startCameraActivity();

    }

}

public void startCameraActivity() {

    final Intent capture_intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(capture_intent, 1); // I get the Null pointer Exception here
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (resultCode == RESULT_OK) {

        if(requestCode == 1){
            //get the Uri for the captured image
            picUri = data.getData();
            //carry out the crop operation
            performCrop();
        }
}
} 
```

您可能应该将函数`performCrop()`（以及实际上不需要在活动本身中的任何其他函数，并且可以通过接收数据作为参数并返回它来工作）移动到一个单独的类中（称为实用程序或其他）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:31:46.840

也许您应该检查数据是否不为空。

```
@Override        
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (requestCode == 1 && data != null) {

        if(resultCode == RESULT_OK){
            //get the Uri for the captured image
            picUri = data.getData();
            //carry out the crop operation
            performCrop();
        } } 
```

# ruby-on-rails - 如何在 kaminari 中设置第一页的初始偏移量？

> ID：14306096
> 
> 赞同：3
> 
> 时间：2013-01-13T17:23:40.600
> 
> 标签：ruby-on-rails, pagination, kaminari

我需要实现一些逻辑以在第一页上显示 3 个元素，并在所有下一页上显示 1 个元素。对于第一页没有问题：

```
items = @model.limit(@first_page_items) 
```

对于我尝试的所有下一个：

```
@model.offset(@first_page_items).page(@current_page - 1).per(@per) #makes no offset at all - all the items going from the beginning
@model.page(@current_page - 1).per(@per).offset(@first_page_items) #produces 4-th element on the second page and stays on it for ever 
```

我究竟做错了什么？谢谢

# javascript - Google Maps API：从列表中平移到标记。

> ID：14306098
> 
> 赞同：6
> 
> 时间：2013-01-13T17:23:50.673
> 
> 标签：javascript, list, maps, panning

您好 :) 请多多包涵，我不是编码员，但我正在尝试边做边学。这是我目前正在处理的页面；[http://www.websu.it/devnw/dev/contact.html](http://www.websu.it/devnw/dev/contact.html)。我目前使用 Google Maps API 使用以下 javascript 设置了地图：

```
 function initialize() {

          var mapOptions = {
          zoom: 5,
          center: new google.maps.LatLng(48.160, -6.832),
          disableDefaultUI: true,
          mapTypeId: google.maps.MapTypeId.ROADMAP
          };

         map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
             setMarkers(map, cities);
              }

 var cities = [
   ['Groningen', 53.216723950863425, 6.560211181640625, 4],
   ['San Francisco', 34.01131647557699, -118.25599389648437, 5],
   ['New York City', 40.7143528, -74.0059731, 3],
   ['Amsterdam', 52.3702157, 4.8951679, 2],
   ['Maroubra Beach', -33.950198, 151.259302, 1]
 ];

 function setMarkers(map, locations) {

   for (var i = 0; i < locations.length; i++) {
     var city = locations[i];
     var myLatLng = new google.maps.LatLng(city[1], city[2]);
     var marker = new google.maps.Marker({
         position: myLatLng,
         map: map,
         title: city[0],
         zIndex: city[3]
     });
   }
 }

 This continues below... 
```

然后我创建了一个列表，其中每个 li 元素在单击时都会将地图平移到这些标记之一。

我添加了以下代码，效果很好。但这意味着我必须在上面的“城市”代码数组以及下面的代码中为 var laLatLng 添加每个城市的经度/纬度。如何在下面的平移脚本中更轻松地获得纬度和经度？

```
 $(document).ready(function() {
      initialize();

      $("#contacts").on("click", "#sanfransisco", function() {
          var laLatLng = new google.maps.LatLng(34.01131647557699, -118.25599389648437);
          map.panTo(laLatLng);
          map.setZoom(5);
       });
      $("#contacts").on("click", "#groningen", function() {
          var laLatLng = new google.maps.LatLng(53.216723950863425, 6.560211181640625);
          map.panTo(laLatLng);
          map.setZoom(6);
      });
      $("#contacts").on("click", "#nyc", function() {
          var laLatLng = new google.maps.LatLng(40.7143528, -74.0059731);
          map.panTo(laLatLng);
          map.setZoom(6);
      });
      $("#contacts").on("click", "#losangeles", function() {
          var laLatLng = new google.maps.LatLng(52.3702157, 4.8951679);
          map.panTo(laLatLng);
          map.setZoom(6);
      });
  }); 
```

我希望有人可以向我解释如何将城市中的变量转换为可点击列表 javascript。非常感谢，非常感谢您的回复！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T17:42:34.693

如果将`cities`数组转换为如下对象：

```
var cities = {
  'Groningen':  [ 53.216723950863425, 6.560211181640625, 4],
   'San Francisco': [ 34.01131647557699, -118.25599389648437, 5],
   'New York City': [ 40.7143528, -74.0059731, 3]

}; 
```

并为每个链接添加一个`data-`具有匹配城市名称的属性以及一个公共类名称：

```
/* not sure what html looks like , using pseudo "tagName"*/
<tagName class="map_link" data-city="Groningen">Groningen</tagName> 
```

您可以为整个类创建一个处理程序：

```
$("#contacts").on("click", ".map_link", function() {
          /* "this" within handler is the actual element clciked*/

          /* find correct array from "cities" object */
         var data=cities[ $(this).data('city') ]; /* returns array[ 53.21, 6.56, 4]*/
          var laLatLng = new google.maps.LatLng( data[0],  data[1]);
          map.panTo(laLatLng);
          map.setZoom( data[2]);
       }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-13T17:49:42.040

以下是我的做法，只需使用谷歌地图的反向地理编码功能来查找城市名称：

```
<ul id="cities">
  <li>San Fransisco</li>
  <li>Groningen</li>
  <li>New York City</li>
  <li>Los Angeles</li>
</ul> 
```

JS

```
$('#cities li').on('click', function() {
  $.ajax({
    url: 'http://maps.googleapis.com/maps/api/geocode/json?address='+decodeURIComponent( $(this).text() )+'&sensor=false',
    type: 'GET'
  }).done(function(data) {
    var laLatLng = new google.maps.LatLng(data.results[0].geometry.location.lat, data.results[0].geometry.location.lng);
    map.panTo(laLatLng);
    map.setZoom(5);
  });
}); 
```

[**小提琴**](http://jsfiddle.net/adeneo/Q9Vge/1/)

# php - 如何修改登录页面以反映身份验证发生的情况？

> ID：14306107
> 
> 赞同：0
> 
> 时间：2013-01-13T17:24:40.527
> 
> 标签：php, javascript, html

这里有两种情况。

1.  用户输入一个空输入。在这种情况下，登录页面将警告用户他输入了一个空输入。
2.  用户输入了错误的用户名或密码。在这种情况下，登录页面会警告用户输入了错误的用户名或密码。

在这两种情况下，输入处理都将在服务器（PHP）上完成。我的问题是，如何动态修改登录页面以显示警告消息？

我尝试将 PHP 布尔值传递给登录页面中的 javascript 变量，但经过一些研究，我发现您不能混合使用 Javascript 和 PHP 代码。代码如下：

```
function error_msg()
{
<?php session_start();?>
var failed_login= <?php echo $_SESSION['failed_login'];?>; 
var empty_field= <?php echo $_SESSION['empty_field'];?>; 
var txt=document.getElementById("failed_login_text");

if (empty_field== 1)
{
    txt.innerHTML="No empty fields allowed.";
    <?php unset($_SESSION['empty_field']);?>
}
else if (failed_login== 1)
{
        txt.innerHTML="Failed login. Wrong username or password.";
        <?php unset($_SESSION['failed_login']);?>
}

      <?php session_destroy();?>
} 
```

我使用的另一种方法是使用 PHP 将整个 Javascript 回显到 login.php 中。此 PHP 代码位于登录页面文件中。

```
<?php
    session_start();
    $failed_login= $_SESSION['failed_login'];
    $empty_field= $_SESSION['empty_field'];

    echo $_SESSION["empty_field"];
    echo $_SESSION["failed_login"];

$script="<script>
var empty_field= $empty_field;
var failed_login= $failed_login;
var txt=document.getElementById(\"failed_login_text\");
txt.innerHTML= empty_field;

if (empty_field== 1)
{
    txt.innerHTML=\"No empty fields allowed.\";

}
else if (failed_login== 1)
{
        txt.innerHTML=\"Failed login. Wrong username or password.\";

}</script>";
echo $script;
unset($_SESSION['empty_field']);
unset($_SESSION['failed_login']);
?> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:38:30.183

我已经为动态登录编写了这个脚本，如果它为您服务，您可以使用它，并且我已经使用 jquery 进行验证，希望这可能对您有所帮助

```
<?php 
    if (isset($_POST['user'])){
     $email = $_POST['user'];
     $password = $_POST['password'];
     $sql = "SELECT * FROM `register` WHERE `email` = '{$email}' AND BINARY `password` = '{$password}'";
     $result  = mysql_query($sql);
     if(mysql_num_rows($result)>0)
     {
     $row = mysql_fetch_array($result);
     $_SESSION['email'] = $row['email'];
     $_SESSION['sno'] = $row['sno'];
      header("location:some_page.php");
     }
     else
      {
        $msg ="Invalid Username / Password"; 
          header('location:your_page_name?msg='.$msg);  
      }
     }
     else
     {
        $msg = "Internal Server error";
     }
    ?>
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>login-user</title>
    <script src="js/jquery-1.8.3.js"></script>
    <script src="js/jquery-ui.js"></script>
    <script src="js/validity.form.js"></script>
    <link rel="Stylesheet" type="text/css" href="js/jquery.validity.css" />
    <link rel="stylesheet" href="js/jquery-ui.css">

    <script type="text/javascript">
    $(document).ready(function() {
          $("#form1").validity(function() {
            $("#user").require().match("email");;
            $("#password").require();
                });
            });
    </script>
    </head>

    <body>
    <div id="container">
    <?php
        if(isset($_REQUEST['msg']) && $_REQUEST['msg']!='')
        {
            echo "<div id='message'>".$_REQUEST['msg']."</div>";
        }
    ?>
          <form id="form1" name="form1" method="POST" action="<?php echo $_SERVER['PHP_SELF'];?>">
                <lable>User Name:</lable>
                  <input name="user" type="text" id="user" size="30" />
                <lable>Password:</lable>
                  <input name="password" type="password" id="password" size="30" value=""/>
                <input type="submit" name="Log In" id="Log In" value="Login" />
          </form>
    </div>
    </body>
    </html> 
```

# php - 如何封装数据库 HTML 响应

> ID：14306109
> 
> 赞同：0
> 
> 时间：2013-01-13T17:24:41.080
> 
> 标签：php, html

在一个 PHP 函数中，我从我的 MySQL 数据库中抓取随机的 HTML 块，这些块可能格式正确，也可能格式不正确。一个例子是：

```
<table cellspacing="0" cellpadding="0" border="0" ><tr><td valign="top" style="font: inherit;">Heres something to display<br><br>Thanks,<br><br> 
```

然后，我从 PHP 函数返回这块 HTML，并将返回到页面上的内容回显到一个`<div>`持有者中。

我遇到的问题是上面的显示正确，但是因为它没有结束标签，所以在显示时会对 DOM 造成严重破坏。我无法控制 HTML 的形成方式，因为它来自随机电子邮件响应。我的问题是，有没有办法封装这块 HTML 并将其从我的页面的其余部分中删除？是否有我可以包装这个 HTML 的标签，除此之外`<div>`，这将确保无论它的格式如何，它都会显示但不会与页面的其余部分交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:28:47.157

您可以限制通过 DOM 解析器运行它所造成的损害。例子：

```
libxml_use_internal_errors(true);
$dom = new DOMDocument();
$dom->loadXML("<root>".$your_malformed_html."</root>");
$reformatted_html = substr($dom->saveXML(),6,-7); 
```

# jquery - 检查margin-left是否为某个百分比

> ID：14306110
> 
> 赞同：4
> 
> 时间：2013-01-13T17:24:42.590
> 
> 标签：jquery, slider, responsive-design, margin, percentage

我在制作简单的水平滑块时遇到了问题。使用左右箭头 (img)，位置变为 -100% 或 +100%，效果很好！:) 当滑块在 -400% 时，右箭头应该消失，但是当我使用 jquery 来检查这个时，什么也没有发生？此外，当左箭头位于 0% 时，它应该会消失。

这是我的代码：

```
$('.right img').live('click', function(){
    $('.play').stop(true, true).animate({
        marginLeft: "-=100%"
    }, 1000);
$('.left img').css("visibility", "visible")
if($('.play').css("margin-left")="400%") {
    $('.right img').css("visibility", "hidden")     
    }
});

$('.left img').live('click', function(){
    $('.play').stop(true, true).animate({
        marginLeft: "+=100%"
    }, 1000);

if($('.play').css('margin-left')=='-2520px'){           
    $('.right img').css("visibility", "visible")
}
else if($('.play').css("margin-left")=0) {
    $('.left img').css("visibility", "hidden")
}
}); 
```

当我使用 px 而不是 % 时，它可以工作！但是对于响应式代码，我想使用 %.

对不起我的英语不好:) 谢谢你的时间！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T18:04:45.183

**==**在比较数值时使用。

**=**是赋值运算符，而不是比较运算符。

并且 jQuery css 属性返回像素而不是百分比，所以在这种情况下最简单的是使用 JavaScript：

```
if(document.getElementsByClass('play').style.marginLeft == "400") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:58:28.600

您正在使用分配而不是比较：

```
if($('.play').css("margin-left")="400%") { 
```

应该：

```
if($('.play').css("margin-left")=="400%") { 
```

和

```
else if($('.play').css("margin-left")=0) { 
```

应该：

```
else if($('.play').css("margin-left")==0) { 
```

除此之外，它仍然是一种意大利面条式的西方方式来做你想做的事情，但这对于理解为什么事情在应该消失的时候没有消失等等还有很长的路要走……

我对任何溢出隐藏的建议，使用绝对定位而不是边距。但我离题了...

# canvas - 画布图像。TranslateTransform 在某些情况下会丢失图像

> ID：14306112
> 
> 赞同：0
> 
> 时间：2013-01-13T17:24:50.697
> 
> 标签：canvas, windows-runtime, winrt-xaml, translate-animation

我有一个带图像的画布。

```
<Canvas
    x:Name="ImageCanvas"
    SizeChanged="Root_OnSizeChanged">
    <Canvas.Clip>
        <RectangleGeometry
            x:Name="RootGeometry"/>
    </Canvas.Clip>

    <Image
        x:Name="Image"
        Source="{Binding TestData, Converter={StaticResource TestDataToBitmapConverter} }" 
        HorizontalAlignment="Left"
        VerticalAlignment="Top"

        ManipulationStarted="OnManipulationStarted"
        ManipulationDelta="OnManipulationDelta"
        ManipulationCompleted="OnManipulationCompleted"
        Stretch="None"
        ImageOpened="OnImageOpened">
        <Image.RenderTransform>
            <TransformGroup>
                <MatrixTransform x:Name="previousTransform" />
                <TransformGroup x:Name="currentTransform">
                    <ScaleTransform x:Name="scaleTransform" />
                    <RotateTransform x:Name="rotateTransform" />
                    <TranslateTransform x:Name="translateTransform" />
                </TransformGroup>
            </TransformGroup>
        </Image.RenderTransform>
    </Image>
</Canvas> 
```

当我在屏幕上移动图像时，仍然有可能丢失它。我使用 GetSquare 检查剩余的图像正方形，如果正方形非常小，我会尝试将图像推回

```
private double GetSquare()
{
    Rect rect = Utils.GetBounds(Image, ImageCanvas);
    var canvasRect = RootGeometry.Rect;
    canvasRect.Intersect(rect);
    return canvasRect.Height * canvasRect.Width;
}

double maxSquare=30000;
double allowedSquare=40000;

private void OnManipulationDelta(object sender, ManipulationDeltaRoutedEventArgs e)
{
    double square = GetSquare();

    if (square < maxSquare || double.IsInfinity(square))
    {
        e.Complete();

        int counter = 0;

        while (GetSquare() <= allowedSquare)
        {
            counter++;

            translateTransform.X -= 100 * e.Velocities.Linear.X;
            translateTransform.Y -= 100 * e.Velocities.Linear.Y;

            if (counter > 10)
            {  
                ToInitState();
                return;
            }
        }
    }
    else
    {
        translateTransform.X += e.Delta.Translation.X;
        translateTransform.Y += e.Delta.Translation.Y;
    }

    //Rotate
    rotateTransform.Angle += e.Delta.Rotation;

    //Scale
    double deltaScale = e.Delta.Scale;
    double newScale = Utils.GetImageCurrentScale(Image) * deltaScale;

    if (newScale < Utils.MAX_ZOOM && newScale > Utils.MIN_ZOOM)
    {
        scaleTransform.ScaleX *= deltaScale;
        scaleTransform.ScaleY *= deltaScale;
    }
} 
```

# c# - 编写将为每个列表元素添加值的 LINQ 语句

> ID：14306113
> 
> 赞同：1
> 
> 时间：2013-01-13T17:24:53.587
> 
> 标签：c#, linq, foreach, integer

首先，我有一个辅助方法，它将返回列表中具有给定扩展名的文件数。我想获取给定列表中总体音频文件的数量，并且我有一个使用的音频扩展名列表。

```
public List<string> accepted_extensions = {"mp3", "wav", "m4a", "wma", "flac"}; 
```

辅助方法：

```
private int getFileTypeCount(string[] files, string ext)
    {
        int count = 0;
        foreach (string file in files) if (Path.GetExtension(file).Contains(ext))
            {
                count++;
            }
        return count;
    } 
```

所以，我想看看是否可以用 LINQ 编写一个 ForEach，它将每个方法的结果与一个列表和给定的扩展名添加到一个整数。我对LINQ不是很好，所以我开始：

```
int audio_file_count = accepted_extensions.ForEach(i => getFileTypeCount(new_file_list.ToArray(),i)); 
```

但我不确定如何将辅助方法返回的数字加到总数中。我知道这可以通过常规的 foreach 循环轻松完成，我只是想看看 LINQ 是否可行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:26:57.860

您可以使用[`.Count()`](http://msdn.microsoft.com/en-us/library/bb535181.aspx)扩展方法对结果集执行聚合：

```
private int GetFileTypeCount(string[] files, string ext)
{
    return files.Count(file => Path.GetExtension(file).Contains(ext));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T17:27:56.657

您可以使用该`Sum`方法。以这种方式修改您的查询：

```
int audio_file_count = accepted_extensions.
    Sum(extension => getFileTypeCount(new_file_list.ToArray(), extension)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:29:22.393

你可以试试这个：

```
Int32 count = files.Count(file => Path.GetExtension(file).Contains(ext)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T17:31:15.137

```
 static void Main(string[] args)
    {
        List<string> accepted_extensions = new List<string> {".mp3", ".wav", ".m4a", ".wma", ".flac"};

        string[] files = new string[] {};

        int count = files.Count(file => accepted_extensions.Contains(Path.GetExtension(file)));
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T17:33:08.783

```
var count = files
         .Count(f => accepted_extensions.Any(x => Path.GetExtension(f).EndsWith(x))); 
```

# xml - XSLT 1.0 使用过滤器 XML 键过滤数据 XML

> ID：14306114
> 
> 赞同：2
> 
> 时间：2013-01-13T17:25:02.257
> 
> 标签：xml, xslt, xslt-1.0

我有两个 xml 文件：一个是实际数据，第二个是我想从数据中提取的节点的键列表，经过大量搜索和测试，我想我会寻求帮助，因为我'没有得到我想要的结果。

数据文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Items>
  <Item>
    <ItemKey>12345</ItemKey>
    <Name>Apple></Name>
    <Attribute>Red</Attribute>
  </Item>
  <Item>
    <ItemKey>67890</ItemKey>
    <Name>Orange</Name>
    <Attribute>Orange</Attribute>
  </Item>
  <Item>
    <ItemKey>12346</ItemKey>
    <Name>Grape</Name>
    <Attribute>Purple</Attribute>
  </Item>
  <Item>
    <ItemKey>67891</ItemKey>
    <Name>Pear</Name>
    <Attribute>Yellow</Attribute>
  </Item>
</Items> 
```

过滤文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Items>
  <Item>
    <ItemKey>12345</ItemKey>
    </Item>
  <Item>
    <ItemKey>12346</ItemKey>
  </Item>
</Items> 
```

我正在尝试转换数据文件并仅提取与过滤器文件中的 ItemKey 匹配的子节点和子节点。我尝试使用我见过的几个示例并使用以下 xml 没有成功：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

    <xsl:variable name="filter" select="document('Filter.xml')/Item/*"/>

    <xsl:template match="/">
        <xsl:for-each select="Items/Item">
            <xsl:choose>
                <xsl:when test="$filter/Item/ItemKey[contains(., ./ItemKey)]">
                    <xsl:call-template name="Filtered"/>
                </xsl:when>
            </xsl:choose>
        </xsl:for-each>
    </xsl:template>

    <xsl:template name="Filtered">
        <xsl:text>&#x9;"</xsl:text>
        <xsl:value-of select="ItemKey" />, <xsl:value-of select="Name"/>
        <xsl:text>",&#xA;</xsl:text>
    </xsl:template>
</xsl:stylesheet> 
```

如您所见，我希望转换为文本，并且一旦我知道我得到了我所追求的节点，我就会适当地格式化。谢谢你的尽心帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:39:13.713

**就这么简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "/*/Item[ItemKey = document('file:///c:/temp/delete/filter.xml')/*/*/ItemKey]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的源 XML 文档时：**

```
<Items>
  <Item>
    <ItemKey>12345</ItemKey>
    <Name>Apple></Name>
    <Attribute>Red</Attribute>
  </Item>
  <Item>
    <ItemKey>67890</ItemKey>
    <Name>Orange</Name>
    <Attribute>Orange</Attribute>
  </Item>
  <Item>
    <ItemKey>12346</ItemKey>
    <Name>Grape</Name>
    <Attribute>Purple</Attribute>
  </Item>
  <Item>
    <ItemKey>67891</ItemKey>
    <Name>Pear</Name>
    <Attribute>Yellow</Attribute>
  </Item>
</Items> 
```

**并且提供的“filter xml”在文件中：c:\temp\delete\filter.xml：**

```
<Items>
  <Item>
    <ItemKey>12345</ItemKey>
    </Item>
  <Item>
    <ItemKey>12346</ItemKey>
  </Item>
</Items> 
```

**产生了想要的正确结果：**

```
<Item>
   <ItemKey>12345</ItemKey>
   <Name>Apple&gt;</Name>
   <Attribute>Red</Attribute>
</Item>
<Item>
   <ItemKey>12346</ItemKey>
   <Name>Grape</Name>
   <Attribute>Purple</Attribute>
</Item> 
```

**说明**：

正确使用标准 XSLT 函数**[`document()`](http://www.w3.org/TR/xslt#function-document)**。

# linux - 将多个目录中的文件重命名为目录名

> ID：14306117
> 
> 赞同：18
> 
> 时间：2013-01-13T17:25:19.733
> 
> 标签：linux, rename, batch-rename

我有这样的事情：

```
v_1/file.txt
v_2/file.txt
v_3/file.txt
... 
```

我想将这些文件重命名为：

```
v_1.txt
v_2.txt
v_3.txt
... 
```

在同一目录中。

我想我可以使用`rename`，但我不知道如何同时使用它来重命名文件夹和文件。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-13T17:35:08.967

结果可以通过 bash for 循环和来实现`mv`：

```
for subdir in *; do mv $subdir/file.txt $subdir.txt; done; 
```

请注意，如果目录名称包含空格，上述解决方案将不起作用。相关[链接](https://unix.stackexchange.com/questions/9496/looping-through-files-with-spaces-in-the-names)。

另一种基于注释的解决方案（也适用于名称中包含空格的目录）：

```
find . -type d -not -empty -exec echo mv \{\}/file.txt \{\}.txt \; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-29T13:10:36.813

您可以使用[rnm](https://github.com/neurobin/rnm)。命令将是：

```
rnm -fo -dp -1 -ns '/pd0/.txt' -ss '\.txt$' /path/to/the/directory 
```

`-fo`意味着仅文件模式。

`-dp`目录深度。-1 使其递归到所有子目录。

`-ns`暗示名称字符串，即文件的新名称。

`/pd0/`是要进行重命名操作的文件的直接父目录。

`-ss`是一个搜索字符串（正则表达式）。正则表达式在文件名末尾`'\.txt$'`搜索 文件。`.txt`

`/path/to/the/directory`这是 v_1、v_2 ... 目录所在的路径。您也可以传递目录 ( v_1, v_2 ...) 来代替父目录路径。例如：

```
#from inside the parent directory
rnm -fo -dp -1  -ns '/pd0/.txt' -ss '\.txt$' v_* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:32:35.440

对我来说似乎很简单：

```
$ mkdir /tmp/sandbox
$ cd /tmp/sandbox

$ mkdir v_{1,2,3}
$ touch v_{1,2,3}/file.txt

$ rename -v 's#/file##' v_{1,2,3}/file.txt
rename v_1/file.txt v_1.txt
rename v_2/file.txt v_2.txt
rename v_3/file.txt v_3.txt

$ ls -F
v_1/  v_1.txt    v_2/  v_2.txt    v_3/  v_3.txt 
```

# php - youtube 上传视频时如何将视频转换为 mp4/flv

> ID：14306121
> 
> 赞同：1
> 
> 时间：2013-01-13T17:25:51.300
> 
> 标签：php, upload, video-streaming, jwplayer, swfupload

嗨，我正在使用名为[wptube2](http://www.bdtubez.com/)的主题在 wordpress 中创建一个网站，它具有所有 Youtube 外观和内容，但我需要的是，当我上传一些视频时，它只是上传我希望它能够将其格式更改为像 MP4并在我自己的播放器（如 jwplayer）中发布，但我不知道从哪里开始 任何建议将不胜感激 我只想上传任何视频格式，它应该自动转换为 MP4 并与 jwplayer 一起发布 [这](http://prntscr.com/ozgp9)是一个屏幕截图我从哪里发布我的视频！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:37:16.907

我使用[ffmpeg](http://ffmpeg.org/)进行所有转换。

您可以将上传的视频文件全部放在一个中央文件夹中。有一个在这些文件上运行 ffmpeg 的批处理文件，然后在处理后将其移动到另一个文件夹。

您可以以任何格式上传文件，给它一个假的 .mp4 文件名，同时只有一条消息说“文件正在处理”。

文件转换需要时间和强大的处理能力，在考虑让您的服务器完成所有工作之前，请务必在本地尝试。

# python - 如何将用户输入输入python数据库？

> ID：14306122
> 
> 赞同：0
> 
> 时间：2013-01-13T17:26:17.900
> 
> 标签：python, database, shelve

1.  为什么菜单不启动（由 Roman Susi 解决）
2.  为什么菜单不能按预期工作（以下错误）
3.  如何解决 foo.add 代码中的错误？

    `Traceback (most recent call last): File "C:\Users\User\Desktop\phonedatabase.py", line 81, in <module> openphonedb() File "C:\Users\User\Desktop\phonedatabase.py", line 23, in openphonedb for entry in foo.add(name, number, showtype): TypeError: 'NoneType' object is not iterable`

在输入“类型”后添加新用户时会发生此错误

```
import shelve
import string

UNKNOWN = 0
HOME = 1
WORK = 2
FAX = 3
CELL = 4

def openphonedb():
    foo = phonedb()
    print "What would you like to do?"
    print "Add = 1, Lookup = 2, Exit = 3"
    entry = int(raw_input('>> '))
    if entry == 1 :
            namelookup = raw_input('Please enter a name: ')
            for entry in foo.lookup(namelookup):
                    print '%-40s %s (%s)' % (entry.name, entry.number, entry.showtype() )
    elif entry == 2:
            name = raw_input('Name: ')
            number = raw_input('Number: ')
            showtype = input('Type (UNKNOWN, HOME, WORK, FAX, CELL): \n>> ')
            for entry in foo.add(name, number, showtype):           
                    print '%-40s %s (%s)'% (entry.name, entry.number, entry.showtype() )
    elif entry == 3:
            print "Close Successful"
            quit
    else:
            print "Invalid."
            openphonedb()

class phoneentry:
    def __init__(self, name = 'Unknown', number = 'Unknown',
        type = UNKNOWN):
        self.name = name
        self.number = number
        self.type = type

#  create string representation
    def __repr__(self):
        return('%s:%d' % ( self.name, self.type ))

#  fuzzy compare or two items
    def __cmp__(self, that):
        this = string.lower(str(self))
        that = string.lower(that)

        if string.find(this, that) >= 0:
            return(0)
        return(cmp(this, that))

    def showtype(self):
        if self.type == UNKNOWN: return('Unknown')
        if self.type == HOME: return('Home')
        if self.type == WORK: return('Work')
        if self.type == FAX: return('Fax')
        if self.type == CELL: return('Cellular')

class phonedb:
    def __init__(self, dbname = 'phonedata'):
        self.dbname = dbname;
        self.shelve = shelve.open(self.dbname);

    def __del__(self):
        self.shelve.close()
        self.shelve = None

    def add(self, name, number, type = HOME):
        e = phoneentry(name, number, type)
        self.shelve[str(e)] = e

    def lookup(self, string):
        list = []
        for key in self.shelve.keys():
            e = self.shelve[key]
        if cmp(e, string) == 0:
            list.append(e)

        return(list)
#edit
if __name__ == '__main__':
    openphonedb() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:40:47.783

也许，你只是忘了调用 openphonedb()？添加到最后：

```
if __name__ == '__main__':
    openphonedb() 
```

另外，那里的“退出”在做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:00:25.603

代码还有其他问题，但关于问题的第一部分，如何将条目作为字符串进行比较（因此，如果用户键入“a”，您不会收到错误）？

```
def openphonedb():
    foo = phonedb()
    print "What would you like to do?"
    print "Add = 1, Lookup = 2, Exit = 3"
    while True:  # note this
        entry = raw_input('>> ')  # removed int()
        if entry == '1' :
            namelookup = raw_input('Please enter a name: ')
            for entry in foo.lookup(namelookup):
                print '%-40s %s (%s)' % (entry.name, entry.number, entry.showtype() )
        elif entry == '2':
            name = raw_input('Name: ')
            number = raw_input('Number: ')
            showtype = input('Type (UNKNOWN, HOME, WORK, FAX, CELL): \n>> ')
            for entry in foo.add(name, number, showtype):           
                print '%-40s %s (%s)'% (entry.name, entry.number, entry.showtype() )
        elif entry == '3':
            print "Close Successful"
            exit()  # note this also
        else:
            print "Invalid." 
```

# php - jquery：在同一页面上选择具有多个不同 id 和其他 td 的单击的 td 表元素

> ID：14306123
> 
> 赞同：0
> 
> 时间：2013-01-13T17:26:22.383
> 
> 标签：php, jquery, selector

我正在构建调度软件。我正在使用许多表格来显示时间/日期等。

在一个特定的表格中，有一些带有 ID 的单元格列出了日期和员工 ID 号。

我正在尝试设置交易班次系统。单击单元格时，将执行 ajax 函数。

这是一个示例单元格：

```
<td id="tblcell-2013_03_13-id_3" class="displayShift">$data placed here</td> 
```

jQuery代码：

```
$(document).ready(function () {

  // I can't do this because each id is different
  $("td#tblcell").click(function () {
    alert('it works!');

  });

  // I can't do this because there other other td elements on the same page in other tables
  $("td").click(function () {
    alert('it works!');
  });

}); 
```

如何设置一个在单击特定单元格时激活的函数，该单元格还将 var 数据传递给脚本中的函数，该脚本具有无法在此函数中引用的其他 td 表元素？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:31:50.047

您可以使用`td[id^="tblcell"]`选择器选择 ID 以开头的所有 TD`tblcell`

```
$('td[id^="tblcell"]').click(function() {
    // ... do stuff ...
}); 
```

**带有选择器的属性值开始演示**：http : [//jsfiddle.net/ARkxD/](http://jsfiddle.net/ARkxD/)

# achartengine - Achartengine 中使用的算法

> ID：14306124
> 
> 赞同：1
> 
> 时间：2013-01-13T17:26:25.673
> 
> 标签：achartengine

我想问一下achartengine中使用了哪些算法？这里使用的是 Dijkstra 算法还是其他算法？我现在正在学习算法。如果你能给我建议从哪里开始，我将很高兴。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:00:32.030

AChartEngine 中没有使用任何花哨的算法。唯一的一个是将真实数据转换为屏幕坐标。

# java - 如何在 ComboBox 上使用 ActionListener 为变量赋值

> ID：14306125
> 
> 赞同：5
> 
> 时间：2013-01-13T17:26:42.227
> 
> 标签：java, swing, actionlistener, jcombobox

我正在使用 BlueJ，但我遇到了问题。我有一个包含 3 个选项的组合框。每个选项都是一个字符串。这三个选项是日、周和月。我想要做的是，如果选择 Day 而不是一个变量等于 30（双）等等。有人可以帮我购买告诉我如何根据组合框中的选定选项给“emailvalue”一个值吗？

编辑：我要添加我的实际程序代码，这是一个每月数据计算器。它确实编译。

这是代码：

```
 import javax.swing.*;
    import java.awt.*;
    import java.awt.event.*;
    import javax.swing.event.*;
    import java.awt.image.*;
    import java.awt.geom.*;
    import java.awt.Color;
    import java.awt.Container;
    import java.awt.Graphics;
    import java.awt.event.WindowAdapter;
    import java.awt.event.WindowEvent;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    /** 
    * @author (Andrew Napier, Sikander Singh) 
    * @version (December 18th, 2012)
    */
    public class MonthlyData extends JFrame
    {
    private JLabel title, stitle, l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l14;
    private JLabel l15,l16,l17,l18,l19,l20,l21,l22,l23,l24,l25,l26,l27,l28,l29;
    private JLabel Usage,Estimated,solu1,solu2,total2;
    private JPanel  panel1, panel2, panel3, panel4, panel5, panel6, panel7;
    String[] deviceStrings = { "Blackberry", "Other", "Internetstick"};
    String[] date = { "Day", "Week", "Month"};
    public double email2 = 0;
    public double email1;
    static final int email50 = 50;
    static final int email100 = 100;
    static final int email150 = 150;
    static final int email200 = 200;
    static final int email250 = 250;
    static final int email300 = 300;
    public JSlider Email = new JSlider(0,300,0);
    public JSlider Web = new JSlider(0,500,0);
    public JSlider IM = new JSlider(0,500,0);
    public JSlider Video = new JSlider(0,300,0);
    public JSlider Song = new JSlider(0,200,0);
    public  JSlider App_G = new JSlider(0,100,0);
    public String currentdate;        
    public double emailvalue;
    public MonthlyData ()
    {
        super ("MonthlyData");
        setSize (1000,1100);    
        ////////////////////////////////////////////////////// panel1
        panel1 = new JPanel ();                                              
        panel1.setLayout (new GridLayout(1,1));
        panel1.setVisible(true);
        panel1.setBackground (Color.black);
        title = new JLabel ("                                     WANNA KNOW HOW MUCH DATA",JLabel.LEFT);
        title.setForeground(Color.white);
        title.setFont (new Font("Times New Roman",Font.BOLD,25));
        l1 = new JLabel ("");
        l2 = new JLabel ("");
        /////////////////////////////////////////////// panel2   
        panel2 = new JPanel ();                                             
        panel2.setLayout (new GridLayout(1,1));
        panel2.setVisible(true);
        panel2.setBackground (Color.gray);
        stitle = new JLabel ("           PICK A PHONE OR INTERNET STICK AND THEN DRAG THE .",JLabel.LEFT);
        stitle.setForeground(Color.black);
        stitle.setFont (new Font("Times New Roman",Font.BOLD,14));
        //////////////////////////////////////////////// panel3
        panel3 = new JPanel ();                                              
        panel3.setLayout (new FlowLayout());
        panel3.setVisible(true);
        panel3.setBackground (Color.white);
        l3 = new JLabel ("Select Your Device:",JLabel.RIGHT);
        l3.setForeground(Color.red);
        JComboBox devicelist = new JComboBox (deviceStrings);
        l4 = new JLabel ("Tell us how much of what's listed here you think you'll use:");
        ///////////////////////////////////////////////// panel4    
        panel4 = new JPanel ();                                               
        panel4.setLayout (new GridLayout(6,7));
        panel4.setVisible(true);
        panel4.setBackground (Color.white);
        l5 = new JLabel ("Email");
        l6 = new JLabel ("WebPage");
        l7 = new JLabel ("Instant Message");
        l8 = new JLabel ("Streaming Video");
        l9 = new JLabel ("Song");
        l10 = new JLabel ("Application or Game");    
        l11 = new JLabel (""+" Emails");
        final JComboBox date1 = new JComboBox (date);
           date1.addActionListener(new ActionListener() {//add actionlistner to listen for change
            @Override
            public void actionPerformed(ActionEvent e) {    
                String s = (String) date1.getSelectedItem();//get the selected item    
                switch (s) {//check for a match
                    case "Day":
                        emailvalue = 30;                            
                        break;
                    case "Week":
                        emailvalue = 4;                            
                        break;
                    case "Month":
                        emailvalue = 1;
                        System.out.println("Month selected, emailvalue:" + emailvalue);
                        break;                        
                }
            }
        });

        l12 = new JLabel ("   0.002 MB");    
        l13 = new JLabel (""+email2+" MB");
        double web1 = 0;
        l14 = new JLabel (""+web1+" WebPages");
        JComboBox date2 = new JComboBox (date);
        l15 = new JLabel ("  0.07 MB");
        double web2 = 0;
        l16 = new JLabel (""+web2+" MB");
        double IM1 = 0;
        l17 = new JLabel (""+IM1+" IMs");
        JComboBox date3 = new JComboBox (date);
        l18 = new JLabel ("  0.005 MB");
        double IM2 = 0;
        l19 = new JLabel (""+IM2+" MB");
        double video1 = 0;
        l20 = new JLabel (""+video1+" Minutes");
        JComboBox date4 = new JComboBox (date);
        l21 = new JLabel ("   1 MB");
        double video2 = 0;
        l22 = new JLabel (""+video2+" MB");
        double song1 = 0;
        l23 = new JLabel (""+song1+" MP3's");
        JComboBox date5 = new JComboBox (date);
        l24 = new JLabel ("    4 MB");
        double song2 = 0;
        l25 = new JLabel (""+song2+" MB");
        double app1 = 0;
        l26 = new JLabel (""+app1+" App/Games");
        JComboBox date6 = new JComboBox (date);
        l27 = new JLabel ("   0.44 MB");
        double app2 = 0;
        l28 = new JLabel (""+app2+" MB");
        //////////////////////////////////////////////// panel5
        panel5 = new JPanel ();                                            
        panel5.setLayout (new GridLayout(1,1));
        panel5.setVisible(true);
        panel5.setBackground (Color.white);
        solu1 = new JLabel ("WE THINK YOUR MONTHLY DATA USAGE WILL BE:");
        solu1.setForeground (Color.red);
        solu1.setFont (new Font("Times New Roman",Font.BOLD,20));
        double total = 0;
        total2 = new JLabel (""+total+" MB");
        total2.setForeground (Color.red);
        total2.setFont (new Font("Times New Roman",Font.BOLD,20));
        /////////////////////////////////////////// panel6
        panel6 = new JPanel ();
        panel6.setLayout (new GridLayout (1,1));
        panel6.setVisible (true);
        panel6.setBackground (Color.white);
        Usage = new JLabel ("Usage per unit");
        Usage.setForeground (Color.red);
        Estimated = new JLabel ("     Estimated total");
        Estimated.setForeground (Color.red);
        ////////////////////////////////////////////// panel7
        panel7 = new JPanel ();
        panel7.setLayout (new GridLayout (1,1));
        panel7.setVisible (true);
        panel7.setBackground (Color.white);
        solu2 = new JLabel ("Data usage varies by device and other factors and the .");
        solu2.setForeground (Color.black);
        /////////////////////////////////////////////////// Implements
        Container container = getContentPane ();
        container.setLayout (null);      //changed
        container.setBackground (Color.white);

        container.add (panel1).setBounds (0,0,1000,120);        //panel1
        panel1.add (title).setSize(500,500);

        container.add (panel2).setBounds (0,100,1000,120);      //panel2
        panel2.add (stitle);

        container.add (panel3).setBounds (0,220,1000,100);      //panel3
        panel3.add (l3);
        panel3.add (devicelist);
        panel3.add (l4);

        container.add (panel4).setBounds (0,340,1000,150);      //panel4
        Email.addChangeListener(new SliderHandler());
        Web.addChangeListener(new SliderHandler());
        IM.addChangeListener(new SliderHandler());
        Video.addChangeListener(new SliderHandler());
        Song.addChangeListener(new SliderHandler());
        App_G.addChangeListener(new SliderHandler());

        panel4.add (l5);
        panel4.add (Email);
        panel4.add (l11);
        panel4.add (date1);
        panel4.add (l12);
        panel4.add (l13);
        panel4.add (l6);
        panel4.add (Web);
        panel4.add (l14);
        panel4.add (date2);
        panel4.add (l15);
        panel4.add (l16);
        panel4.add (l7);
        panel4.add (IM);
        panel4.add (l17);
        panel4.add (date3);
        panel4.add (l18);
        panel4.add (l19);
        panel4.add (l8);
        panel4.add (Video);
        panel4.add (l20);
        panel4.add (date4);
        panel4.add (l21);
        panel4.add (l22);
        panel4.add (l9);
        panel4.add (Song);
        panel4.add (l23);
        panel4.add (date5);
        panel4.add (l24);
        panel4.add (l25);
        panel4.add (l10);
        panel4.add (App_G);
        panel4.add (l26);
        panel4.add (date6);
        panel4.add (l27);
        panel4.add (l28);
        container.add (panel5).setBounds (210,540,1000,50);    // panel5
        panel5.add (solu1);
        panel5.add (total2);
        container.add (panel6).setBounds (670,220,200,220);      // panel6
        panel6.add (Usage);
        panel6.add (Estimated);

        container.add (panel7).setBounds (210,580,530,50);    // panel7
        panel7.add (solu2);

        Email.setOpaque(false);
        Web.setOpaque(false);
        IM.setOpaque(false); 
        Video.setOpaque(false); 
        Song.setOpaque(false);
        App_G.setOpaque(false); 
        setVisible (true);
    }

    public static void main (String[] args)
    {
        MonthlyData application = new MonthlyData ();
    }        

    public class SliderHandler implements ChangeListener
    {
        public void stateChanged(ChangeEvent e)
        {
            if (e.getSource().equals(Email))
            {
                l11.setText(""+Email.getValue());    
                email2= (Email.getValue() * 0.002);
                l13.setText(email2 + "MB");
            }
            if (e.getSource().equals(Web))
            {
                l14.setText(""+Web.getValue());
            }    
            if (e.getSource().equals(IM))
            {
                l17.setText(""+IM.getValue());
            }    
            if (e.getSource().equals(Video))
            {
                l20.setText(""+Video.getValue());
            }    
            if (e.getSource().equals(Song))
            {
                l23.setText(""+Song.getValue());
            }    
            if (e.getSource().equals(App_G))
            {
                l26.setText(""+App_G.getValue());
            }    
        }
    }

    public void paint (Graphics g)
    {
        super.paint(g);    
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T17:33:20.810

1）首先，您需要`ActionListener`添加一个`JComboBox`以侦听所选项目的更改。

2) 在`actionPerformed(...)`of 中`ActionListener`通过获取所选项目`getSelectedItem()`并转换为 a`String`作为方法返回一个`Object`.

3) 使用`switch`语句检查所选项目与哪一个匹配，即日、月、周，然后相应地分配一个值。

例如：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class MonthlyData {

    public double emailvalue;
    private String[] date = {"Day", "Week", "Month"};
    private JFrame frame;

    public MonthlyData() {
        frame = new JFrame();//use an instance rather than extending the class
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        final JComboBox date1 = new JComboBox(date);

        ActionListener cbActionListener = new ActionListener() {//add actionlistner to listen for change
            @Override
            public void actionPerformed(ActionEvent e) {

                String s = (String) date1.getSelectedItem();//get the selected item

                switch (s) {//check for a match
                    case "Day":
                        emailvalue = 1.1;
                        System.out.println("Day selected, emailvalue:" + emailvalue);
                        break;
                    case "Week":
                        emailvalue = 2.2;
                        System.out.println("Week selected, emailvalue:" + emailvalue);
                        break;
                    case "Month":
                        emailvalue = 3.3;
                        System.out.println("Month selected, emailvalue:" + emailvalue);
                        break;
                    default:
                        emailvalue = 4.4;
                        System.out.println("No match selected, emailvalue:" + emailvalue);
                        break;
                }
            }
        };

        date1.addActionListener(cbActionListener);

        frame.add(date1);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new MonthlyData();
            }
        });
    }
} 
```

**更新：**

添加 SSCCE 并发表评论后：

> 如果您进入 SliderHandler 类，请输入 email2=(Email.getValue() * 0.002)*emailvalue; 如果您这样做，标签将不会实时更新。但是如果您将 emailvalue 替换为 5，它将更新

问题是

启动时`emailvalue`尚未设置。它只会在第一次更改所选项目/索引时设置。

为了解决这个问题，我们必须简单地给它一个默认的选择值，方法是`setSelectedItem(..)`在它可见之前调用它：

```
final JComboBox date1 = new JComboBox(date);
date1.addActionListener(new ActionListener() {//add actionlistner to listen for change
    @Override
    public void actionPerformed(ActionEvent e) {

        String s = (String) date1.getSelectedItem();//get the selected item

        switch (s) {//check for a match
            case "Day":
                emailvalue = 30;
                break;
            case "Week":
                emailvalue = 4;
                break;
            case "Month":
                emailvalue = 1;
                System.out.println("Month selected, emailvalue:" + emailvalue);
                break;
        }
    }
});
date1.setSelectedItem(date[0]);//set Day as default selected item/emailvalue 
```

**对您的代码的建议：**

*   Swing 组件应该在[`EDT`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)via`SwingUtilities.invokeLater(Runnable r)`块上创建和操作。

*   不要覆盖`paint(..)`而`JFrame`不是添加`JPanel`和覆盖`paintComponent(Graphics g)`

*   不要调用`setBounds`或`setSize`使用适当的`LayoutManager`和/或覆盖并返回适合其内容的 s，而不是`getPreferredSize()`在将其设置为可见之前调用。`JPanel``Dimension``pack()``JFrame`

*   `JFrame`不要不必要地扩展

*   不要`ActionListener`在该类上实现，除非该类将被用作一个类并且或其方法必须暴露给其他类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:31:31.563

只需拥有一张地图并在选择侦听器中使用它。

```
HashMap<String,Integer> map = new HashMap();
map.put("Day",1);
map.put("Week",7);
map.put("Month",30); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T17:31:44.533

添加`actionListener`到`JComboBox`：

```
JComboBox date1 = new JComboBox (date);
date1.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e)
    {
        String selectedItem = (String) date1.getSelectedItem();
        if(selectedItem.equals("date")
        {
            emailValue = 30;
        }
    }
}); 
```

由于您的课程已经实施`ActionListener`，您也可以这样做（作为上述的替代方案）：

添加一个`actionCommand`到你的`JComboBox`：

```
JComboBox date1 = new JComboBox (date);
date1.setActionCommand("date1");
date1.addActionListener(this) 
```

注意：`date1`应该是类级别的变量（字段），以便`actionPerformed`方法可以访问它。

`actionPerformed`向该类添加一个方法（您很可能已经拥有该方法）。

```
public void actionPerformed(ActionEvent ae)
{
    if(ae.getActionCommand().equals("date1")
    {
        String selectedItem = date1.getSelectedItem();
        if(selectedItem.equals("date")
        {
           emailValue = 30;
        }
        …
        //Note: From Java 7, you can use Strings with switch
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-09T15:21:57.363

这只是一个例子

```
implements ItemListener //on your class addItemListener to your combo

public void itemStateChanged(ItemEvent e) {

     String i = "" + cboMonth.getSelectedItem();
     String b = "" + cboMonth1.getSelectedItem();
     System.out.println("The number  Start:" + i);
     System.out.println("The number End:" + b);
     if(e.getStateChange() == ItemEvent.SELECTED){
          int mSatrt = Integer.parseInt(i);
          int mEnd = Integer.parseInt(b);
          // System.out.println("The number m FROM ITEMSTATE is:" + mSatrt +"   == " + "M1 is :  "+ mEnd);

          if(mSatrt >= mEnd){ JOptionPane.showMessageDialog (this, " Next Date Payment est moin que la date de paiement" + mSatrt + ">=" + "" + mEnd);}
              //else if (mSatrt> mEnd) { JOptionPane.showMessageDialog (this, "la date Erroné" + mSatrt + ">" + "" + mEnd);}
              //else{JOptionPane.showMessageDialog (this, "la date Erroné" + mSatrt + "=" + "" + mEnd);}
          }
    }
} 
```

# c# - 仅对更改的成员进行序列化

> ID：14306126
> 
> 赞同：0
> 
> 时间：2013-01-13T17:26:45.053
> 
> 标签：c#, mongodb, serialization, convention

我是 MongoDB 新手，想有效地序列化我的对象。这意味着在更新对象时，我只想编写更改的字段。如果我的对象在列表中有子对象，我只想添加或删除更改的子对象。那是因为如果我有一个包含 1000 条评论的帖子，我想避免在每次有新帖子出现时序列化整个对象。

我发现的只是约定 ignoreifempty、ignoreisdefault 和 shouldserializexyz 模式。

是否可以编写像 ignoreifnotchanged 之类的约定（我跟踪对象中的脏字段）或者是否有更通用的 shouldserializexyz 因为我不想为每个属性编写方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:12:31.367

您要查看的是带有 update 参数的 Update 方法，该参数指定要更新的字段。

您可以使用更新构建器来构建更新参数值。调查：

```
Update.Set(name, value)
Update.Push(name, value) 
```

（还有更多）。

您可以将 Update 方法链接在一起以一次更新多个字段。

目前没有内置的更改跟踪，因此您必须自己跟踪哪些字段已更改，并根据您对更改内容的了解构建更新参数。

还有一个与此相关的未决 JIRA 功能请求。看：

[https://jira.mongodb.org/browse/CSHARP-237](https://jira.mongodb.org/browse/CSHARP-237)

如果您愿意，请对 JIRA 发表评论或投票。

# c# - 具有两个分组的 LINQ

> ID：14306129
> 
> 赞同：4
> 
> 时间：2013-01-13T17:26:57.237
> 
> 标签：c#, linq, group-by

我正在努力使用 C#/LINQ 对形状类似于以下示例的数据进行双重分组。我从来自数据层的 TickItems 列表开始，现在我已经将其定型为：

`TickItem { ItemName: string; QtyNeeded: int; QtyFulfilled: int; Category: string; }`

```
List<TickItem> items = new List<TickItem>();
items.Add("apple", 1, 0, "food");
items.Add("orange", 1, 1, "food");
items.Add("orange", 1, 0, "food");
items.Add("bicycle", 1, 1, "vehicle");
items.Add("apple", 1, 1, "food");
items.Add("apple", 1, 0, "food");
items.Add("car", 1, 1, "vehicle");
items.Add("truck", 1, 0, "vehicle");
items.Add("banana", 1, 0, "food"); 
```

我需要按类别对这些数据进行分组，最终结果中每个数字列的总和。最后，它的形状应该是这样的：

```
{ "food":    { "apple"  : 3, 1 },
             { "banana" : 1, 0 },
             { "orange" : 2, 1 } },
{ "vehicle": { "bicycle": 1, 1 },
             { "car"    : 1, 1 },
             { "truck"  : 1, 0} } 
```

我已经能够单独进行每个分组（按 ItemName 分组和按类别分组），但我无法在单个 LINQ 语句中执行这两个分组。到目前为止我的代码：

```
var groupListItemName = things.GroupBy(tiλ => tiλ.ItemName).ToList();
var groupListCategory = things.GroupBy(tiλ => tiλ.Category).ToList(); 
```

任何人都可以帮忙吗？

[编辑：我可以使用方法或查询语法，以更容易可视化流程为准]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:30:31.137

请看一下这篇文章。

[http://sohailnedian.blogspot.com/2012/12/linq-groupby-with-aggregate-functions.html](http://sohailnedian.blogspot.com/2012/12/linq-groupby-with-aggregate-functions.html)

可以通过 new 关键字进行多个分组。

```
empList.GroupBy(_ => new { _.DeptId, _.Position })  
    .Select(_ => new  
    {  
        MaximumSalary = _.Max(deptPositionGroup => deptPositionGroup.Salary),  
        DepartmentId = _.Key.DeptId,  
        Position = _.Key.Position  
    }).ToList() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:39:43.863

```
var query = from i in items
            group i by i.Category into categoryGroup
            select new
            {
               Category = categoryGroup.Key,
               Items = categoryGroup.GroupBy(g => g.ItemName)
                                    .Select(g => new
                                    {
                                        ItemName = g.Key,
                                        QtyNeeded = g.Sum(x => x.QtyNeeded),
                                        QtyFulfilled = g.Sum(x => x.QtyFulfilled)
                                    }).ToList()
            }; 
```

此查询将返回代表按类别分组的项目的匿名对象序列。每个类别对象都将具有匿名对象列表，其中将包含每个项目名称的总数。

```
foreach(var group in query)
{
    // group.Category
    foreach(var item in group.Items)
    {
        // item.ItemName
        // item.QtyNeeded
        // item.QtyFulfilled 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:50:40.367

[`GroupBy`](http://msdn.microsoft.com/en-us/library/bb549393.aspx)具有允许您指定结果转换的重载，例如：

```
var result = items.GroupBy(i => i.Category,
    (category, categoryElements) => new
    {   
        Category = category,
        Elements = categoryElements.GroupBy(i => i.ItemName,
            (item, itemElements) => new 
            {
                Item = item,
                QtyNeeded = itemElements.Sum(i => i.QtyNeeded),
                QtyFulfilled = itemElements.Sum(i => i.QtyFulfilled)
            })
    }); 
```

# android - 果冻豆通知操作已禁用

> ID：14306136
> 
> 赞同：2
> 
> 时间：2013-01-13T17:27:32.440
> 
> 标签：android, broadcastreceiver, action, android-4.2-jelly-bean

我正在构建一个应用程序，该应用程序在调用 BroadcastReceiver 时显示带有两个选项“Dim”和“Full”的通知。每个按钮都广播一个动作。

到目前为止，一切皆有可能，对吧？

问题是通知上显示的按钮不会响应点击，但整个通知会响应（如果我单击图标或文本而不是按钮）。

我有这个功能来构建通知：

```
private Notification buildReleaseNotification(NotificationManager nManager, Context context) {

    Notification.Builder builder = new Builder(context);
    builder.addAction(R.drawable.rate_star_big_half_holo_dark, "Dim", buildPendingIntent(context, DIM));
    builder.addAction(R.drawable.rate_star_big_on_holo_dark, "Full", buildPendingIntent(context, FULL));

    builder.setContentTitle("Car notification");
    builder.setContentText("Freed");
    builder.setSmallIcon(R.drawable.ic_launcher);
    builder.setOngoing(true);

    Notification notification = builder.build();
    return notification;
} 
```

并在接收广播时调用它：

```
 public void onReceive(Context context, Intent intent) {

    NotificationManager nManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

    Notification noty = null;
    noty = buildReleaseNotification(context);
    startService(context, RELEASE);

    if (noty != null) {
        nManager.notify(ChangeLockService.GLOBAL_TAG, ID, noty);
    }

} 
```

- - - 编辑

刚刚注意到以下函数返回 null... 那么，如何构建待处理的意图来执行广播？

```
private PendingIntent buildPendingIntent(Context context, String action) {

        Intent i = new Intent(action);
        PendingIntent pi = PendingIntent.getBroadcast(context, ID, i, Intent.FLAG_RECEIVER_REPLACE_PENDING);
        return pi;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:27:25.657

通过创建意图时

```
PendingIntent pi = PendingIntent.getBroadcast(context, ID, i, Intent.FLAG_RECEIVER_REPLACE_PENDING); 
```

导致它返回null。根据文档，我知道该标志`Intent.FLAG_RECEIVER_REPLACE_PENDING`将替换该按钮已经存在的任何未决意图。如果我不发送任何标志，那么一切正常：

```
PendingIntent pi = PendingIntent.getBroadcast(context, ID, i, 0); 
```

# jquery - MVC 4 WebAPI json 数组劫持

> ID：14306137
> 
> 赞同：3
> 
> 时间：2013-01-13T17:27:40.217
> 
> 标签：jquery, json, asp.net-web-api

我有 ApiConroller 的方法看起来像这样：

```
[HttpGet]
public IEnumerable<MyValue> Values()
{
     return db.MyValues.ToList();
} 
```

它返回一个 JSON 数组。我使用 jQuery 来获得结果。如何防止该数组被劫持，例如自动嵌套等？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T23:36:28.077

你可以用通用的方式来做。

添加以下类：

```
public class SecureJsonMediaTypeFormatter : JsonMediaTypeFormatter
{
    public override System.Threading.Tasks.Task WriteToStreamAsync(Type type, object value, System.IO.Stream writeStream, HttpContent content, TransportContext transportContext)
    {
        if ((typeof (IEnumerable).IsAssignableFrom(type)))
        {
            value = new {result = value};
        }
        return base.WriteToStreamAsync(type, value, writeStream, content, transportContext);
    }
} 
```

现在，在你的 WebApiConfig`JSonMediaTypeFormatter`中用这个新的替换默认值：

```
 config.Formatters.RemoveAt(0);
    config.Formatters.Insert(0, new SecureJsonMediaTypeFormatter()); 
```

现在您可以返回任何您希望的 IEnumerable，就像您最初所做的那样，即

```
[HttpGet]
public IEnumerable<MyValue> Values()
{
     return db.MyValues.ToList();
} 
```

并且`SecureJsonMEdiaTypeFormatter`将拦截它，并在`result`属性下包装一个匿名对象：

```
{
    "result": [
        {
            "name": "Toronto Maple Leafs",
            "league": "NHL"
        },
        {
            "name": "Montreal Canadiens",
            "league": "NHL"
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T17:34:45.707

您可以简单地将结果包装在一个对象中。

```
 return new { values = db.MyValues.ToList() }; 
```

由于 JavaScript 对象不是有效脚本，因此可以防止结果被恶意执行，正如 Haack 在[http://haacked.com/archive/2009/06/24/json-hijacking.aspx中解释的那样](http://haacked.com/archive/2009/06/24/json-hijacking.aspx)

# sql-server - 拿什么服务器？

> ID：14306141
> 
> 赞同：-1
> 
> 时间：2013-01-13T17:28:01.230
> 
> 标签：sql-server, amazon-web-services, amazon-ec2, amazon-rds

我在使用 Amazon RDS (SQL Server 2012) 进行全文搜索时遇到问题。由于某种原因，它很慢。

我看到 EC2 上还有其他类型的预设服务器，它们在同一服务器上捆绑了 SQL Server 和 Server 2012。

如果我使用该捆绑包，是否可以访问 SQL Server 2012 的文件系统？我问的原因是 RDS 上的 SQL Server 2012 没有为我提供文件系统访问权限。

它的行为是否像普通服务器一样，我可以在其中远程机器和使用 SQL Server Management Studio？

我首先在亚马逊论坛上问了这个问题，但我没有得到答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:09:54.653

我要说的第一件事是检查数据库的质量。您是否有效地使用索引？你在使用慢查询吗？您目前使用哪些性能指标？

RDS 和 EC2 之间的主要区别在于访问权限和专业程度：

*   使用 RDS，您只能访问您的数据 - 即您无法通过 SSH 登录并重新配置操作系统
*   使用 EC2，您拥有自己的空间 - 即您可以通过 SSH 进入并重新配置文件系统以及您附加的任何后续 EBS 卷。EC2 的根驱动器通常设置为 8Gb，这意味着任何大型数据集（在您的 SQL 数据库中）都需要驻留在挂载上 - 这意味着您必须重新配置数据库配置设置。

您是否研究过[Amazon CloudSearch](http://aws.amazon.com/cloudsearch/)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:56:26.883

如果您使用 SQL Server 安装创建 EC2 实例，您将拥有包括 Windows 登录在内的完全访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T18:45:17.197

要回答您的问题：

> 如果我使用该捆绑包，是否可以访问 SQL Server 2012 的文件系统？

是的。

> 它的行为是否像普通服务器一样，我可以在其中远程机器和使用 SQL Server Management Studio？

又是的。

但是，最好先尝试找出您的 RDS 实例速度慢的*原因。*确保您使用了足够大的实例大小、足够的磁盘空间（全文索引会消耗大量磁盘空间），并确保您使用的是预[配置的 IOPS](http://aws.typepad.com/aws/2012/09/new-high-performance-provisioned-iops-amazon-rds.html)。我在 RDS 上的 SQL Server 上使用了全文索引，如果没有配置 IOPS，它就无法使用。使用 CloudWatch 指标查看您的磁盘队列长度。

# asp.net - 当我按下按钮时，应用程序给我一个错误“索引超出范围”

> ID：14306144
> 
> 赞同：0
> 
> 时间：2013-01-13T17:28:14.300
> 
> 标签：asp.net, sql-server

在这段代码中，我动态地创建了复选框，并用我的数据库中的数据填充这些复选框。

我的意图是当我按下`btnProba`按钮仅从选定的复选框中显示文本属性时。但它在这一行给了我一个错误，说索引超出范围！我无法解释为什么。

```
lblProba.Text = myche[0];

public partial class FormEGN : System.Web.UI.Page
{
        string mynewstring;
        List<string> myche = new List<string>();
        CheckBoxList mycheckbox = new CheckBoxList();
        protected void Page_Load(object sender, EventArgs e)
        {
            mynewstring = (string)Session["id2"];

           // lblProba.Text = mynewstring;
            if(!IsPostBack)
            {
                ddlNumberTourists.Items.Add("1");
                ddlNumberTourists.Items.Add("2");
                ddlNumberTourists.Items.Add("3");
            }
        }

        protected void ddlNumberTourists_SelectedIndexChanged(object sender, EventArgs e)
        {
            int numTourists = Convert.ToInt32(ddlNumberTourists.SelectedItem.Text);

            for (int i = 0; i < numTourists; i++)
            {
                Label myLabel = new Label();
                myLabel.ID = "lblAccomodation" + (i + 1).ToString();
                myLabel.Text = "Настаняване Турист" + (i + 1).ToString();
                Page.FindControl("form1").Controls.Add(myLabel);
                DropDownList myDropDownList = new DropDownList();
                myDropDownList.ID = "ddlTourist" + i.ToString();
                Page.FindControl("form1").Controls.Add(myDropDownList);
                Page.FindControl("form1").Controls.Add(new LiteralControl("<br />"));

                string connectionString = "Server=localhost\\SQLEXPRESS;Database=EXCURSIONSDATABASE;Trusted_Connection=true";
                string query =
          "SELECT Extra_Charge_ID, Excursion_ID, Amout, Extra_Charge_Description FROM EXTRA_CHARGES WHERE Excursion_ID=" + mynewstring;
                SqlConnection conn = new SqlConnection(connectionString);
                SqlCommand cmd = new SqlCommand(query, conn);

                try
                {
                    conn.Open();
                    SqlDataReader rd = cmd.ExecuteReader();
                    int s = 0;

                    while (rd.Read())
                    {
                        // CheckBox myCheckbox = new CheckBox();
                        //   myCheckbox.ID = "ckbExtraCharge" + i.ToString() + s.ToString();
                        // myCheckbox.Text = rd["Extra_Charge_Description"].ToString();
                        //  Page.FindControl("form1").Controls.Add(myCheckbox);
                        //  Page.FindControl("form1").Controls.Add(new LiteralControl("<br />"));
                        //  s++;

                        mycheckbox.ID = "chkblextracharge" + i.ToString() + s.ToString();
                        mycheckbox.Items.Add(rd["Extra_Charge_Description"].ToString());
                        Page.FindControl("form1").Controls.Add(mycheckbox);

                        if (mycheckbox.Items[s].Selected == true)
                        {  
                            myche.Add(mycheckbox.Items[s].Text);
                        }
                        s++;
                    }
                }
                catch (Exception ex)
                { }
            }
        }    

        protected void btnProba_Click(object sender, EventArgs e)
        {
            lblProba.Text = myche[0];
        }

        protected void btnReserve_Click(object sender, EventArgs e)
        { 
            string num = Request.QueryString["ExcursionID"];
            Response.Redirect(String.Format("ClintsInformation.aspx?Excursiondate_ID={0}",num));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:18:45.840

该功能`ddlNumberTourists_SelectedIndexChanged`是设置`myche`何时找到某些选定的功能，但在第二次调用时数据丢失

```
 protected void btnProba_Click(object sender, EventArgs e)
        {
            // here is the issue
            lblProba.Text = myche[0];
        } 
```

这两个电话发生在不同的回邮上。

您需要调用`ddlNumberTourists_SelectedIndexChanged(object sender, EventArgs e)`on 按钮单击，而不是在下拉列表的每个更改上调用，例如，我将其重命名为`CheckWhatIsSelected()`，这是代码：

```
protected void CheckWhatIsSelected()
        {
            int numTourists = Convert.ToInt32(ddlNumberTourists.SelectedItem.Text);

            for (int i = 0; i < numTourists; i++)
            {
                Label myLabel = new Label();
                myLabel.ID = "lblAccomodation" + (i + 1).ToString();
                myLabel.Text = "??????????? ??????" + (i + 1).ToString();
                Page.FindControl("form1").Controls.Add(myLabel);
                DropDownList myDropDownList = new DropDownList();
                myDropDownList.ID = "ddlTourist" + i.ToString();
                Page.FindControl("form1").Controls.Add(myDropDownList);
                Page.FindControl("form1").Controls.Add(new LiteralControl("<br />"));

                string connectionString = "Server=localhost\\SQLEXPRESS;Database=EXCURSIONSDATABASE;Trusted_Connection=true";
                string query =
          "SELECT Extra_Charge_ID, Excursion_ID, Amout, Extra_Charge_Description FROM EXTRA_CHARGES WHERE Excursion_ID=" + mynewstring;
                SqlConnection conn = new SqlConnection(connectionString);
                SqlCommand cmd = new SqlCommand(query, conn);

                try
                {
                    conn.Open();
                    SqlDataReader rd = cmd.ExecuteReader();
                    int s = 0;

                    while (rd.Read())
                    {
                        // CheckBox myCheckbox = new CheckBox();
                        //   myCheckbox.ID = "ckbExtraCharge" + i.ToString() + s.ToString();
                        // myCheckbox.Text = rd["Extra_Charge_Description"].ToString();
                        //  Page.FindControl("form1").Controls.Add(myCheckbox);
                        //  Page.FindControl("form1").Controls.Add(new LiteralControl("<br />"));
                        //  s++;

                        mycheckbox.ID = "chkblextracharge" + i.ToString() + s.ToString();
                        mycheckbox.Items.Add(rd["Extra_Charge_Description"].ToString());
                        Page.FindControl("form1").Controls.Add(mycheckbox);

                        if (mycheckbox.Items[s].Selected == true)
                        {  
                            myche.Add(mycheckbox.Items[s].Text);
                        }
                        s++;
                    }
                }
                catch (Exception ex)
                { }
            }
        }    

     protected void btnProba_Click(object sender, EventArgs e)
            {
                CheckWhatIsSelected();
                if(myche.Count > 0)
                   lblProba.Text = myche[0];
                else
                   lblProba.Text = "Non selected";
            } 
```

另一种可能的解决方案是保存`myche`on viewstate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:24:52.347

使用 ViewState 的其他解决方案。您使用 ViewState 来存储您的选择，并在回发后拥有它。不要忘记清除您的清单`ddlNumberTourists_SelectedIndexChanged`

```
List<string> myche
{
    get
    {
        if (!(ViewState["cMyChe"] is List<string>))
        {
            // need to fix the memory and added to viewstate
            ViewState["cMyChe"] = new List<string>();
        }

        return (List<string>)ViewState["cMyChe"];
    }
}

 protected void btnProba_Click(object sender, EventArgs e)
{
    // double check if have something on the list
    if(myche.Count > 0)
       lblProba.Text = myche[0];
    else
       lblProba.Text = "Non selected";
} 
```

# java - 检测字符串是否包含特定字符的最快方法

> ID：14306149
> 
> 赞同：0
> 
> 时间：2013-01-13T17:28:55.263
> 
> 标签：java, regex, string, performance

我正在构建一个 XML 解析器来处理一个大的 XML 文件，并且我正在寻找检测字符串是否包含字符（不是`" "`,`"\n"`或`"\r"`）的最快方法。我试过使用正则表达式，但它太慢太重了。我尝试的另一种方法是获取 的 ASCII 数字`" "`，`"\n"`并`"\r"`从字符串的大小中减少它，如果它更大，那么至少有一个字符。这个操作也很重。好的建议将不胜感激。

编辑 - 澄清：

对于一行 XML 解析 + 字符串操作来说，太慢了 300 毫秒。

我实施的两种方式的示例：

通过 Redex：

```
if (!str.matches(".*\\w.*")
{
  // str that doesn't contains chars
} 
```

通过总结 ASCII 值：

```
if (numOfWhitespaces + numOfSpecialChars >= str.length()) // +1 for ending /r in
  str
{
    // str that doesn't contains chars
} 
```

第一个解决方案（正则表达式）在 200 毫秒内较慢。在一个有 500 多行的文件上（每行都是独立处理的），这一点至关重要。

我希望它足够清楚。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T17:50:44.457

扫描字符串的最快方法是使用 SAX 侦听器

```
public void characters(char ch[], int start, int length) throws SAXException {
    for(int i=start, end = start+ length; i < end; i++) {
       if(ch[i] <= ' ') {
          // check if it is a white space
       }
    }
} 
```

如果您不使用 SAX 解析器或事件驱动解析器，这可能是您的性能瓶颈。

# sql - SQL Server 数据库访问 EC2

> ID：14306151
> 
> 赞同：1
> 
> 时间：2013-01-13T17:29:02.523
> 
> 标签：sql, sql-server-2008, amazon-web-services, amazon-ec2

我在 EC2（亚马逊云服务）中有 4 台服务器，其中一台包含 SQL Server 2008。

我想将对数据库的访问限制为仅来自我正在运行的其他服务器。

我想使用 EC2 安全组来做到这一点，但我所有的实例都使用相同的安全组，据我所知，一旦创建实例，安全组就是不变的。

我知道在 SQL Server 网络配置（在 SQL Server 配置管理器中）中存在与“DBNAME 协议”相关的内容，但我不知道如何使用它。

现在它定义 IPAll TCP 端口是 1433 ......其余的（根据我检查的）不相关......

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:44:38.800

您可以递归地定义入站规则。如果您的安全组名为“default”并且 ID 为“sg-123456789”，则可以向安全组添加一条规则，显示“让 sg-123456788 访问端口 x 到 y”。您可以在使用安全组时对其进行更改。当然，这一切都可以通过管理控制台来完成。

# java - JavaCV - 使用阈值图像查找凸形轮廓

> ID：14306154
> 
> 赞同：2
> 
> 时间：2013-01-13T17:29:27.620
> 
> 标签：java, image-processing, opencv, javacv

我正在使用 JavaCV 开发一个形状识别项目，并且我找到了一些 OpenCV 代码来识别特定阈值图像中的凸形状。我试图将它从 openCV 转换为 javaCV。但是当我运行代码时，它卡在了检查轮廓的时候。任何人都可以帮助找到错误？谢谢。

```
IplImage detectThrs = getThresholdImage(img);

                System.err.println("Stucked!!");

                CvMemStorage storage = CvMemStorage.create();

                CvSeq contour = new CvSeq(null);

                cvFindContours(detectThrs, storage, contour, Loader.sizeof(CvContour.class), CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);
                System.err.println("Stucked 2 !!");
                CvSeq approx = null;
                CvRect bound = null;
                CvRect boundMax = null;
                CvRect pos = null;

                while (contour != null && !contour.isNull()) {
                    System.err.println("Stucked in while!!");
                    bound = cvBoundingRect(contour, 0);
                    approx = cvApproxPoly(contour, Loader.sizeof(CvContour.class), storage, CV_POLY_APPROX_DP, cvContourPerimeter(contour) * 0.02, 0);

                    if(cvCheckContourConvexity(approx) != 0){
                        if(bound.width() > 4 || bound.height() > 4){

                            cvRectangle(
                                    detectThrs,
                                    cvPoint(bound.x(), bound.y()),
                                    cvPoint(bound.x()+bound.width(), bound.y()+bound.height()),
                                    CvScalar.RED,4,
                                    CV_AA, 0
                            );//2 is thickness CV_AA is type of line 0 means no shift

                            //cvSaveImage(++ii + "colorMaskTest.jpg", detectThrs);
                            paint(img, bound.x(), bound.y());
                         }
                        }   
                    }
                    contour = contour.h_next();
                 } 
```

# php - 从 php 到 ajax 检索 2 个数组

> ID：14306155
> 
> 赞同：0
> 
> 时间：2013-01-13T17:29:32.913
> 
> 标签：php, json

我正在尝试使用 AJAX 从 PHP 中检索两个数组，但我认为`json_encode`只能有一个变量。你知道我该如何解决这个问题吗？我是新手，正在使用`json_encode`

```
<?php
while($row = mysql_fetch_array($get_grades_boy)){

                $data_grades_boys[]=array(
                    'fname_b'=>$row['firstname'],
                    'mname_b' => $row['middlename'],
                    'lname_b' => $row['lastname'],
                    'studnt_id_b' => $row['student_id'],
                    'grade_b' => $row['grade'],
                    ); 
             }

             while($row2 = mysql_fetch_assoc($get_grades_girl)){

                $data_grades_girls[]=array(
                    'fname_g'=>$row2['firstname'],
                    'mname_g' => $row2['middlename'],
                    'lname_g' => $row2['lastname'],
                    'studnt_id_g' => $row2['student_id'],
                    'grade_g' => $row2['grade'],
                    ); 
             }
echo json_encode($data_grades_boys); 
```

我试着这样做

```
 echo json_encode($data_grades_boys);
echo json_encode($data_grades_girls); 
```

检索，但它没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:33:15.557

您需要将两个数组组合成一个数组：

```
$data_grades = array(
    'boys'  => $data_grades_boys,
    'girls' => $data_grades_girls
);
echo json_encode($data_grades); 
```

和jQuery：

```
$ajax(
...
success: function(data) {
    boys = data.boys;
    girls = data.girls 
```

然后

```
$.each(boys).function(index, value) { 
```

# c++ - 并发队列中的竞争条件

> ID：14306156
> 
> 赞同：0
> 
> 时间：2013-01-13T17:29:49.463
> 
> 标签：c++, concurrency, queue, race-condition

我目前正在尝试编写一个并发队列，但是我有一些我无法向自己解释的段错误。我的队列实现基本上是由这个站点上的第一个列表给出的。

[http://www.justsoftwaresolutions.co.uk/threading/implementing-a-thread-safe-queue-using-condition-variables.html](http://www.justsoftwaresolutions.co.uk/threading/implementing-a-thread-safe-queue-using-condition-variables.html)

该网站说，如果从队列中并行删除对象，则会出现竞争条件，但我只是不明白为什么会有一个，有人可以向我解释一下吗？

编辑：这是代码：

```
template<typename Data>
class concurrent_queue
{
private:
    std::queue<Data> the_queue;
    mutable boost::mutex the_mutex;
public:
    void push(const Data& data)
    {
        boost::mutex::scoped_lock lock(the_mutex);
        the_queue.push(data);
    }

    bool empty() const
    {
        boost::mutex::scoped_lock lock(the_mutex);
        return the_queue.empty();
    }

    Data& front()
    {
        boost::mutex::scoped_lock lock(the_mutex);
        return the_queue.front();
    }

    Data const& front() const
    {
        boost::mutex::scoped_lock lock(the_mutex);
        return the_queue.front();
    }

    void pop()
    {
        boost::mutex::scoped_lock lock(the_mutex);
        the_queue.pop();
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:43:07.010

如果在您尝试从中读取项目时队列为空怎么办？

想想这个用户代码：

```
while(!q.empty())  //here you check q is not empty
{ 
       //since q is not empty, you enter inside the loop
       //BUT before executing the next statement in this loop body,
       //the OS transfers the control to the other thread
       //which removes items from q, making it empty!!
       //then this thread executes the following statement!
       auto item = q.front(); //what would it do (given q is empty?)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:39:20.813

如果您使用 empty 并发现队列不为空，则可能是另一个线程在您使用结果之前已弹出该项目使其为空。

同样，对于前面，您可能会阅读前面的项目，并且在您使用该项目时它可能会被另一个线程弹出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T18:11:42.267

@parkydr 和 @Nawaz 的答案是正确的，但这里有另一个值得深思的地方；

*你想达到什么目的？*

拥有线程安全队列的原因有时（我不敢*经常*说）是错误的。在许多情况下，您希望在队列只是一个实现细节的上下文中锁定“外部”队列。

然而，线程安全队列的一个原因是针对*消费者-生产者的*情况，其中*1-N*个节点推送数据，而*1-M*个节点从其中弹出，无论它们得到什么。队列中的所有元素都被平等对待，消费者只是弹出而不知道他们得到了什么，然后开始处理数据。在这种情况下，您的界面不应公开`T& front()`. 好吧，如果你不确定那里有一个项目，你永远不应该返回一个引用（在并行情况下，如果没有外部锁，你永远无法确定）。

我建议使用`unique_ptr`'s （或者`shared_ptr`当然）并且只公开无种族功能（为简洁起见，我省略了 const 函数）。使用`std::unique_ptr`将需要 C++11，但如果您无法使用 C++11，您可以使用`boost::shared_ptr`相同的功能：

```
// Returns the first item, or an empty unique_ptr
std::unique_ptr< T > pop( );

// Returns the first item if it exists. Otherwise, waits at most <timeout> for
// a value to be be pushed. Returns an empty unique_ptr if timeout was reached.
std::unique_ptr< T > pop( {implementation-specific-type} timeout );

void push( std::unique_ptr< T >&& ptr ); 
```

`exist()`和等特性`front()`自然是竞争条件的受害者，因为它们无法自动执行您（认为您）想要的任务。`exist()`有时会在您收到结果时返回一个不正确的值，`front()`如果队列为空，则必须抛出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T18:18:06.447

我认为为什么该`empty()`功能无用/危险的答案很清楚。如果您想要一个阻塞队列，请将其删除。

相反，添加一个条件变量（boost::condition，IIRC）。push/pop 的函数如下所示：

```
void push(T data)
{
    scoped_lock lock(mutex);
    queue.push(data);
    condition_var.notify_one();
}

data pop()
{
    scoped_lock lock(mutex);
    while(queue.empty())
        condition_var.wait(lock);
    return queue.pop();
} 
```

请注意，这是伪代码，但我相信您可以解决这个问题。也就是说，使用 unique_ptr（或 C98 的 auto_ptr）来避免复制实际数据的建议是个好主意，但这是一个完全独立的问题。

# c# - C#序列化复杂的XML文件？

> ID：14306161
> 
> 赞同：0
> 
> 时间：2013-01-13T17:30:18.773
> 
> 标签：c#, xml, xml-serialization

我有一个非常复杂的 XML 文件，我需要对其进行序列化，并且无法理解如何执行它。

我需要接受（并验证）用户输入来修改 XML 文件中的字段。我考虑使用 LINQ 来修改每一个，但我认为序列化/反序列化更有意义，因为我需要提示用户输入大部分字段。

问题 1) 你同意序列化/反序列化方法吗？这种方法是否会以与现在相同的格式存储 XML 文件？

问题 2) 这种方法是否可以使用如此复杂的 XML 模式？一个文件中有许多不同级别/类型的数据。如果是这样，我该怎么做？

问题 2a) 我需要为每个部分创建不同的类吗？IE：一个用于“configSections”，一个用于“Extedo.DBBase”，等等？或者 1 个大类可以序列化所有内容吗？

谢谢！

XML 文件：[http ://www.talons-guild.com/eCTDmanager.exe.config.xml](http://www.talons-guild.com/eCTDmanager.exe.config.xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:50:17.690

我会使用 XDocument 来加载、修改和保存配置文件。XPath 将允许您浏览复杂性。

# java - Java 泛型与 ArrayList添加元素

> ID：14306166
> 
> 赞同：33
> 
> 时间：2013-01-13T17:30:35.057
> 
> 标签：java, generics, arraylist

我有类`A`,`B`和where extends , extends`C`和extends 。`D``B``A``C``A``D``A`

我有以下`ArrayList`每一个都包含一些元素：

```
ArrayList<B> b;
ArrayList<? extends A> mix = b; 
```

我打算让变量`mix`包含或类型`B`的元素。我试图像这样添加一个类型的元素：`C``D``C``mix`

```
mix.add(anElementOfTypeC); 
```

但是 IDE 不允许我这样做，它说：

> anElementOfTypeC 不能通过调用转换方法转换为 CAP#1，其中 CAP#1 是一个新的类型变量：CAP#1 从捕获的 ? 扩展 A 扩展 A

我用对了`<? extends A>`吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-13T17:35:01.887

`ArrayList<? extends A>`表示某种未知类型的 ArrayList 扩展`A`。
该类型可能不是`C`，因此您不能将 a 添加`C`到 ArrayList。

事实上，由于您不知道 ArrayList 应该包含什么，因此您无法向 ArrayList 添加*任何内容*。

如果您想要一个可以包含任何继承类的 ArrayList `A`，请使用`ArrayList<A>`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-13T17:34:38.780

无法在使用的集合中添加元素`? extends`。

`ArrayList<? extends A>`意味着这是一个扩展`ArrayList`的类型（**恰好是一种**`A`类型） 。所以你可以肯定，当你调用`get`方法时，你会得到一个**A。**但是你不能添加一些东西，因为你不知道究竟`ArrayList`包含什么。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-15T00:08:12.713

> 我用对了`<? extends A>`吗？

`List<? extends A> list;`表示'list'指的是一个对象实现的接口List，并且该list可以保存从类A（包括A）继承的元素。换句话说，以下陈述是正确的：

```
List<? extends A> listA1 = new ArrayList<A>();
List<? extends A> listB1 = new ArrayList<B>();
List<? extends A> listC1 = new ArrayList<C>();
List<? extends A> listD1 = new ArrayList<D>(); 
```

Java 泛型是一种编译时强类型检查。编译器使用泛型来确保您的代码不会将错误的对象添加到集合中。

您尝试`C`添加`ArrayList<B>`

```
listB1.add(new C()); 
```

如果允许，该对象`ArrayList<B>`将包含不同的对象类型（B，C）。
这就是为什么**引用**listB1 在“只读”模式下工作的原因。另外你可以看看[这个答案](https://stackoverflow.com/questions/2776975/how-can-i-add-to-list-extends-number-data-structures)。

> 如何解决这个问题？

```
List<A> list = new ArrayList<A>(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-13T17:34:41.677

你可以声明：

```
ArrayList<A> mix = new ArrayList<A>(); 
```

您可以将 A 类或其任何子类的任何元素添加到此类列表中。只是当您从该列表中获取时，您将只能调用可用的方法`A`。

请注意，`A`它不仅限于成为“成熟”类：它可以是抽象类甚至是接口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T17:44:58.717

您可以创建超类类型的数组列表。所以你可以这样做。

```
ArrayList<A> arrayList=new ArrayList<A>(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-20T12:20:07.183

查看此示例并根据您的要求进行选择

```
package com.generic;

import java.util.ArrayList;

public class SuperExtendTest {

    /**
     * @param args
     */
    public static void main(String[] args) {

    }
    public void test() throws Exception {
        ArrayList<Parent> parents=new ArrayList<>();
        parents.add(new Parent());
        parents.add(new Child());
        //parents.add(new GrandParent()); Not allowed

        ArrayList<Parent> p=new ArrayList<>();
        ArrayList<Child> c=new ArrayList<>();
        ArrayList<GrandParent> gp=new ArrayList<>();

        testExtendP(p);
        //testExtendP(c); Not allowed only super type allowed no child
        testExtendP(gp);

        testExtends(c);
        testExtends(p);
        //testExtends(gp); Not allowed because GrantParent does not extends Parent
    }

    /**
     * This Method allowed get operations for Parent 
     * No add 
     * 
     */
    public void testExtends(ArrayList<? extends Parent> list) throws Exception {
    /*  list.add(new Child());
        list.add(new Parent());
        list.add(new GrandParent());
        // can not add
        */
        Child c=(Child) list.get(0);
        Parent parent=list.get(0);
        GrandParent gp=list.get(0);
        /**
         * Unsafe collection way
         */
        ArrayList list2=new ArrayList();
        list.addAll(list2);
    }

    /**
     * This Method allowed add operations for Parent and it's sub types and on get it gives Object type 
     * 
     */
    public void testExtendP(ArrayList<? super Parent> list) throws Exception {
        list.add(new Child());
        list.add(new Parent());
        //list.add(new GrandParent());
        /*can not add because GrandParent can not be converted to Parent type
         * 
         * The method add(capture#3-of ? super Parent) in the type ArrayList<capture#3-of ? super Parent> is not applicable for the arguments (GrandParent)
         * 
         */

        Child c=(Child) list.get(0);
        Parent parent=(Parent) list.get(0);
        GrandParent gp=(GrandParent) list.get(0);
        Object obj=list.get(0);

        /**
         * Unsafe collection way
         */
        ArrayList list2=new ArrayList();
        list.addAll(list2);
    }

    /**
     * This Method allowed all operations for Parent and it's sub types 
     * 
     */
    public void testDirect(ArrayList<Parent> list) throws Exception {
        list.add(new Child());
        list.add(new Parent());
        //list.add(new GrandParent()); 
        /*
         * Can not add GrandParent (Normal generic rule)
         */
    }

}
class GrandParent{

}

class Parent extends GrandParent{

}
class Child extends Parent{

} 
```

# c++ - 带有 Winapi 的独家鼠标/键盘

> ID：14306167
> 
> 赞同：0
> 
> 时间：2013-01-13T17:30:37.043
> 
> 标签：c++, winapi, input, keyboard, mouse

DirectInput 可以选择拥有独占的鼠标/键盘访问权限。我现在不再使用 DirectInput，想知道如何仅通过使用 winapi 来实现相同的行为？

编辑：我想我可以在窗口中间使用 SetCursorPos() 并通过 ShowCursor() 隐藏光标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-28T20:01:13.593

如果是鼠标，请使用 Windows 原始输入 API。

使用 RAWINPUTDEVICE 结构中的标志 RIDEV_CAPTUREMOUSE 来调用 RegisterRawInputDevices。这将防止鼠标点击激活其他窗口。结合它，使用 ShowCursor 函数隐藏鼠标光标。这两件事将重现 DirectInput 独有的鼠标行为。在其后来的修订版中，DirectInput（用于键盘和鼠标）只是原始输入 api 的包装器。

我不相信对键盘有任何等效的控制（而且我认为 DirectInput 中也没有。）但是，这通常不是问题，因为用户将无法将输入焦点转移到另一个上除非他们特别想使用 alt-tab 或 ctrl-alt-dlt。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:37:43.657

用于[`ClipCursor()`](http://msdn.microsoft.com/en-us/library/ms648383.aspx)将鼠标限制在屏幕的特定矩形内，例如窗口的矩形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T05:54:00.893

你看过[SetCapture()](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms646262%28v=vs.85%29.aspx)吗？

如果您的问题更清楚，这将有所帮助。应用程序缺少鼠标输入（即 WM_MOUSEMOVE 消息）通常是该应用程序具有鲁棒性的原因。毕竟，完全静止的鼠标不会生成任何此类消息。所以我猜你正在做一些不寻常的事情。

还有一种机制可以跟踪鼠标离开应用程序的窗口 - 请参阅[此处](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms645615%28v=vs.85%29.aspx)。它涉及设置一个 TrackMouseEvent 结构，这有点痛苦，但根据我的经验，这一切似乎都有效。我想知道实际上是否是这种机制暂停了您的应用程序？

恐怕对所提供的信息无能为力。

# php - php：包含在数组中定义的文件时失败

> ID：14306173
> 
> 赞同：0
> 
> 时间：2013-01-13T17:31:42.893
> 
> 标签：php, mysql

我想根据从数据库中获得的值包含一个文件。在 page.php 的类页面中，我有这个函数来获取我想要的数据：

```
function getPage(){
    $page=array(
      'title'=>$this->title,
        'content'=>$this->content,
        'module'=>$this->module
    );
    return $page;
} 
```

在 pageview.php 中我这样称呼它：`$elements=$page->getPage();` 该函数工作得很好，我得到了我的内容，例如我可以像这样操作（我知道 heredox 不是要走的路，但请忽略它，这不是问题） ：

```
 echo <<<EOT
    <div class='row-fluid'>
    <H1> title:$elements[title]</H1></br>
    $elements[content]
    $elements[module]
    </div>
EOT; 
```

现在问题来了。我有一个名为 includeModule 的函数，它是这样的：

```
function includeModule($page){

    $page=strtolower($page);

    if(file_exists("modules/".$page."php")) include("/modules/".$page."php");
    else Echo "No such Module Exists :".$page." </br>";

} 
```

现在假设我想包含一个名为“tax.php”的页面。如果我使用`include("/modules/tax.php)";`它就可以了。如果我尝试使用`include("/modules/".$elements[module].".php)";`它什么都不做（一个 yes $elements[module] 确实只包含单词“tax”）。我什至尝试将 $elements[module] 的值分配给另一个变量，但没有。

最奇怪的是，如果我尝试使用我的函数（includeModule），即使我手动将 $page 变量设置为“tax”，它仍然不包含任何内容并说该文件不存在（即使它做） ？

对此有什么帮助吗？

编辑：我已经尝试删除 / 但如果我这样做，它不再包含任何内容

编辑：我稍微改变了功能，所以我可以得到一些反馈

```
if(file_exists("modules/".$page.".php")){
        echo "<p>file exists</p>";
        include("modules/".$page."**.**php");
    }else{
        echo getcwd();
         Echo "<p>No such Module Exists :".$page."</p>";
    } 
```

好的解决了。感谢所有的答案。由于我的错误，后面的斜杠以及 php 扩展名之前的点被忽略了。感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:37:04.753

> 如果我使用 include("modules/tax.php)"; 它工作得很好。

在您的代码中，您正在使用

```
include("/modules/".$page."php");
         ^-- Note the leading / 
```

尝试删除`/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:12:29.223

好的，我解决了，谢谢大家：）每个答案都很有帮助：）（答案是您的答案+我需要更多注意的组合。我忘记了 . 就在 php 扩展之前 ..lolz .. 猜猜你是什么时候累了，您必须稍停一下才能集中注意力）。再次感谢伙计们:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:36:38.887

您正在查看是否`"modules/".$page."php"`存在但试图包括`"/modules/".$page."php"`哪些可能不是相同的东西（注意`/`后者的领先）。

```
if(file_exists("modules/".$page."php")) include("modules/".$page."php"); 
```

# node.js - Heroku 在 $PATH 中找不到 npm

> ID：14306179
> 
> 赞同：0
> 
> 时间：2013-01-13T17:31:51.280
> 
> 标签：node.js, heroku, npm

过程文件是

```
web: npm start 
```

错误日志显示

```
 app[web.1]: bash: npm: command not found 
```

Package.json 被解析得很好，安装工作正常。诊断的下一步是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:43:33.913

最好使用`node path/to/your/server.js`而不是`npm start`作为传递。Node 保证在 $PATH 中是可执行的。

尝试将使用的脚本复制/粘贴`npm start`到您的`Profile`中，看看它是否有效！

# php - 在 php mvc 中清理 url

> ID：14306185
> 
> 赞同：0
> 
> 时间：2013-01-13T17:33:06.557
> 
> 标签：php, .htaccess, directory-structure

首先`.htaccess`，我发送`url`到`public/index.php`：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d

RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ public/index.php [NC,L] 
```

我的`public/index.php`：

```
<?php
// define root path of the site
if(!defined('ROOT_PATH')){
define('ROOT_PATH','../');
}

require_once ROOT_PATH.'function/my_autoloader.php';

use application\controllers as controllers;

 $uri=strtolower($_SERVER['REQUEST_URI']);
 $actionName='';
 $uriData=array();
 $uriData=preg_split('/[\/\\\]/',$uri );

 $actionName = (!empty($uriData[3])) ? preg_split('/[?].*/', $uriData[3] ): '' ;
 $actionName =$actionName[0];
 $controllerName = (!empty($uriData[2])) ? $uriData[2] : '' ;

 switch ($controllerName) {
case 'manage':
    $controller = new Controllers\manageController($controllerName,$actionName);
    break;
default:
    die('ERROR WE DON\'T HAVE THIS ACTION!');
    exit;
    break;
  }

// function dispatch send url to controller layer 
$controller->dispatch();
?> 
```

我有这个目录：

*   应用
    *   控制器
    *   楷模
    *   看法
*   上市
    *   `css`
    *   `java script`
    *   索引.php
*   `.htaccess`

`URL`例如，我想要干净`localhost/lib/manage/id/1`而不是`localhost/lib/manage?id=1`，我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:54:10.467

使用您当前的重写规则，所有内容都已重定向到您的`index.php`文件。而且，正如您已经在做的那样，您应该解析 URL 以找到所有这些 URL 参数。这称为路由，大多数 PHP 框架都是这样做的。通过一些简单的解析，您可以转换`localhost/lib/manage/id/1`为数组：

```
array(
    'controller' => 'manage',
    'id' => 1
) 
```

我们可以简单地做到这一点，首先将 URL 拆分为“/”，然后循环遍历它以查找值：

```
$output = array();
$url = split('/', $_SERVER['REQUEST_URI']);
// the first part is the controller
$output['controller'] = array_shift($url);

while (count($url) >= 2) {
    // take the next two elements from the array, and put them in the output
    $key = array_shift($url);
    $value = array_shift($url);
    $output[$key] = $value;
} 
```

现在`$output`数组包含一个 key => value 对，就像你想要的那样。虽然请注意，代码可能不是很安全。这只是为了展示概念，而不是真正的生产就绪代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:11:58.437

您可以通过捕获部分 URL 并将其作为查询字符串放置来做到这一点。

```
RewriteRule /lib/manage/id/([0-9]+) /lib/manage?id=$1 [L] 
```

括号内的字符串将被放入 $1 变量中。如果您有多个`()`，它们将被放入 2 美元、3 美元等。

# php - 多次调用 XMLHttpRequest onreadystatechange

> ID：14306187
> 
> 赞同：21
> 
> 时间：2013-01-13T17:33:14.927
> 
> 标签：php, ajax

我正在用 php 实现登录系统并使用 ajax 请求。

这是我的要求

```
hr.open("POST", url, true);
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

hr.onreadystatechange = function() {

    var return_data = hr.responseText;
    if(hr.readyState == 4 && hr.status == 200) {
        alert('is logged');
    }else if (hr.status == 400){
        alert('is not logged');
    }
}

hr.send(vars); // Actually execute the request 
```

但是当我得到响应时，浏览器会启动各种警报。谁能帮助解决这个问题？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-13T18:04:25.510

是的，它应该正常工作....... **onreadystatechange**可能在一个请求中被调用多次.. 并且为了提醒这两个条件是，只要请求正常，就是**200**。

它提醒：

> '它没有记录'

当它得到**readystate=4**并`Ok signal`发出警报时：

> 登录。

然后

**readyState =4** --> 请求完成，响应准备就绪

**status= 200** --> 表示请求被服务器成功处理。

因此，第二个警报弹出窗口，因为至少您的请求已成功处理。欲了解更多信息： [https](https://www.w3schools.com/js/js_ajax_http_response.asp)

://www.w3schools.com/js/js_ajax_http_response.asp 这里是：

```
 `xhrobj.onreadystatechange = function()
    {
      if (xhrobj.readyState == 4 && xhrobj.status == 200)
      {
        if (xhrobj.responseText)
         {
                //put your code here 
           document.write(xhrobj.responseText);
          }
       }
     };` 
```

# php - 考虑到安全性，在 PHP 表单验证中要寻找什么？

> ID：14306192
> 
> 赞同：0
> 
> 时间：2013-01-13T17:33:30.497
> 
> 标签：php, security, email, sendmail, contact-form

[我从 2012 年开始在 TutWow 上](http://www.tutwow.com/htmlcss/create-a-simple-and-secure-contact-form-with-jquery-and-php/)看到一个现成的联系表格。它使用[Douglas Lovell 从 2007 年开始的 PHP 电子邮件验证](http://www.linuxjournal.com/article/9585?page=0,3)来检查电子邮件字段是否有效（甚至查询 DNS 服务器以查看域是否有效）。6 岁时，问题出现了——它仍然相关吗？

一般来说，一个人通常应该在`mail()`脚本中寻找什么来保证它的安全但占用空间最小？Lovell 先生的脚本与 TutWow 的 PHP 插件相结合是否符合条件？

这是组合的PHP：

```
<?php

// Clean up the input values
foreach($_POST as $key => $value) {
  if(ini_get('magic_quotes_gpc'))
    $_POST[$key] = stripslashes($_POST[$key]);

  $_POST[$key] = htmlspecialchars(strip_tags($_POST[$key]));
}

// Assign the input values to variables for easy reference
$name = $_POST["name"];
$email = $_POST["email"];
$message = $_POST["message"];

// Test input values for errors
$errors = array();
if(strlen($name) < 2) {
  if(!$name) {
    $errors[] = "You must enter a name.";
  } else {
    $errors[] = "Name must be at least 2 characters.";
  }
}
if(!$email) {
  $errors[] = "You must enter an email.";
} else if(!validEmail($email)) {
  $errors[] = "You must enter a valid email.";
}
if(strlen($message) < 10) {
  if(!$message) {
    $errors[] = "You must enter a message.";
  } else {
    $errors[] = "Message must be at least 10 characters.";
  }
}

if($errors) {
  // Output errors and die with a failure message
  $errortext = "";
  foreach($errors as $error) {
    $errortext .= "<li>".$error."</li>";
  }
  die("<span class='failure'>The following errors occured:<ul>". $errortext ."</ul></span>");
}

// Send the email
$to = "YOUR_EMAIL";
$subject = "Contact Form: $name";
$message = "$message";
$headers = "From: $email";

mail($to, $subject, $message, $headers);

// Die with a success message
die("<span class='success'>Success! Your message has been sent.</span>");

// A function that checks to see if
// an email is valid
function validEmail($email)
{
   $isValid = true;
   $atIndex = strrpos($email, "@");
   if (is_bool($atIndex) && !$atIndex)
   {
      $isValid = false;
   }
   else
   {
      $domain = substr($email, $atIndex+1);
      $local = substr($email, 0, $atIndex);
      $localLen = strlen($local);
      $domainLen = strlen($domain);
      if ($localLen < 1 || $localLen > 64)
      {
         // local part length exceeded
         $isValid = false;
      }
      else if ($domainLen < 1 || $domainLen > 255)
      {
         // domain part length exceeded
         $isValid = false;
      }
      else if ($local[0] == '.' || $local[$localLen-1] == '.')
      {
         // local part starts or ends with '.'
         $isValid = false;
      }
      else if (preg_match('/\\.\\./', $local))
      {
         // local part has two consecutive dots
         $isValid = false;
      }
      else if (!preg_match('/^[A-Za-z0-9\\-\\.]+$/', $domain))
      {
         // character not valid in domain part
         $isValid = false;
      }
      else if (preg_match('/\\.\\./', $domain))
      {
         // domain part has two consecutive dots
         $isValid = false;
      }
      else if(!preg_match('/^(\\\\.|[A-Za-z0-9!#%&`_=\\/$\'*+?^{}|~.-])+$/',
                 str_replace("\\\\","",$local)))
      {
         // character not valid in local part unless
         // local part is quoted
         if (!preg_match('/^"(\\\\"|[^"])+"$/',
             str_replace("\\\\","",$local)))
         {
            $isValid = false;
         }
      }
      if ($isValid && !(checkdnsrr($domain,"MX") || checkdnsrr($domain,"A")))
      {
         // domain not found in DNS
         $isValid = false;
      }
   }
   return $isValid;
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:36:35.970

也许最安全的方法是向*发件人发送*一封电子邮件，要求他们确认他们确实发送了邮件。此外，为了防止您的联系表单变成垃圾邮件系统，请将每个 IP 地址可以提交的联系表单数量限制在一个合理的范围内，大概每 24 小时 1 个，假设回复将通过常规电子邮件完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:00:32.290

这个验证不是我见过的最好的。我通过快速查看它注意到的是：

*   它使用`htmlspecialchars()`没有编码参数
*   它使用`strip_tags()`的原因我看不到
*   它使用`strlen`而不是`mb_strlen`
*   它容易受到标头注入的影响
*   而且[邮件验证](https://stackoverflow.com/questions/12026842/how-to-validate-an-email-address-in-php/12026863#12026863)不是我见过的最好的
*   没有 CSRF 令牌
*   没有验证码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:34:48.813

在我所有的项目中，我发现[本指南](http://phpsec.org/projects/guide/)在安全方面最有帮助。

它有许多部分，包括表单处理、数据库和 SQL、会话等。

# arrays - 有人可以向我解释一下算法设计手册中的这一段是什么意思吗？这让我很困惑

> ID：14306196
> 
> 赞同：1
> 
> 时间：2013-01-13T17:33:41.967
> 
> 标签：arrays, algorithm

![在此处输入图像描述](../Images/c401e92e65949a42ed77ae42af233f04.png)

我只是不明白这是什么意思。它说所有查询都会很快，除了那些触发数组加倍的查询。为什么访问查询会触发数组加倍？我只读过当它越过容量标记时添加会触发它们，但是如果你正在访问某个元素，那么数组肯定已经加倍以满足该容量要求，并且访问它只是 O(n) ? 这一段在说什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:38:06.013

你的理解是正确的。仅仅读取访问不会导致数组加倍。顺便说一下，在这种情况下，单次访问的复杂度甚至是 O(1)。

如果不了解本段的更多上下文，很难说出作者所说的“访问”是什么意思。

# hibernate - 映射多对一时，Hibernate 中不需要的行删除

> ID：14306197
> 
> 赞同：1
> 
> 时间：2013-01-13T17:34:20.840
> 
> 标签：hibernate, hibernate-mapping

我的休眠应用程序中有以下映射。当我从这个 Booking 表中删除一行时，User 和 item 表中的对应行将被删除。我使用休眠会话的删除方法。我尝试了 cascade="all" 和 "none"。但他们都没有工作。

我有一些用户和一些项目。每个用户在 Booking 表中可以有 0..* 行，每个项目可以有0..* 行！

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="my.hibernate.operations.Booking" table="testBooking" catalog="efeu">
        <id name="id" type="java.lang.Long">
            <column name="id" />
            <generator class="native" />
        </id>

        <many-to-one name="userID" column="user_id"
            not-null="true" class="my.hibernate.actors.User" />
        <many-to-one name="itemID" column="item_id" 
            not-null="true" class="my.hibernate.items.Item" />

        <property name="startDate" type="java.sql.Date" not-null="true">
            <column name="start_date" length="10" />
        </property>

        <property name="endDate" type="java.sql.Date">
            <column name="end_date" length="10" />
        </property>
    </class>
</hibernate-mapping> 
```

它向我提供了以下错误：

```
org.hibernate.exception.ConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`efeu`.`testbooking`, CONSTRAINT `FKEC7473671463A66C` FOREIGN KEY (`user_id`) REFERENCES `testuser` (`id`))
    org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:128)
    org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    $Proxy8.executeUpdate(Unknown Source)
    org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:56)
    org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3134)
    org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3337)
    org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:100)
    org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
    org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:354)
    org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:280)
    org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326)
    org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)
    org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1214)
    org.hibernate.internal.SessionImpl.forceFlush(SessionImpl.java:1233)
    org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:182)
    org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:49)
    org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:90)
    org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:757)
    org.hibernate.internal.SessionImpl.save(SessionImpl.java:749)
    org.hibernate.internal.SessionImpl.save(SessionImpl.java:745)
    my.hibernate.items.ItemDAO.save(ItemDAO.java:35)
    actions.subscriber.BookItem.cancellBooking(BookItem.java:118)
    actions.subscriber.BookItem.execute(BookItem.java:101)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:142)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:166)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    interceptors.LoginInterceptor.intercept(LoginInterceptor.java:52)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:485)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:395)

root cause

com.mysql.jdbc.exceptions.MySQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`efeu`.`testbooking`, CONSTRAINT `FKEC7473671463A66C` FOREIGN KEY (`user_id`) REFERENCES `testuser` (`id`))
    com.mysql.jdbc.SQLError.createSQLException(SQLError.java:931)
    com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2870)
    com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1573)
    com.mysql.jdbc.ServerPreparedStatement.serverExecute(ServerPreparedStatement.java:1169)
    com.mysql.jdbc.ServerPreparedStatement.executeInternal(ServerPreparedStatement.java:693)
    com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1404)
    com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1318)
    com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1303)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    $Proxy8.executeUpdate(Unknown Source)
    org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:56)
    org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3134)
    org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3337)
    org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:100)
    org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
    org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:354)
    org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:280)
    org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326)
    org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)
    org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1214)
    org.hibernate.internal.SessionImpl.forceFlush(SessionImpl.java:1233)
    org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:182)
    org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:49)
    org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:90)
    org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:757)
    org.hibernate.internal.SessionImpl.save(SessionImpl.java:749)
    org.hibernate.internal.SessionImpl.save(SessionImpl.java:745)
    my.hibernate.items.ItemDAO.save(ItemDAO.java:35)
    actions.subscriber.BookItem.cancellBooking(BookItem.java:118)
    actions.subscriber.BookItem.execute(BookItem.java:101)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:142)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:166)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    interceptors.LoginInterceptor.intercept(LoginInterceptor.java:52)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:485)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:395) 
```

无论如何，由于请求，我复制了所有表的结构，但是我知道这不是必需的！注意力！这些表是由 Hibernate 自动生成的！

```
CREATE TABLE `testuser` (
  `id` bigint(20) NOT NULL,
  `user_type` varchar(8) NOT NULL,
  `username` varchar(30) DEFAULT NULL,
  `password` varchar(128) DEFAULT NULL,
  `forename` varchar(128) DEFAULT NULL,
  `surname` varchar(128) DEFAULT NULL,
  `userlevel` varchar(30) DEFAULT NULL,
  `email` varchar(120) DEFAULT NULL,
  `phone_number` varchar(25) DEFAULT NULL,
  `address` varchar(150) DEFAULT NULL,
  `regDate` datetime DEFAULT NULL,
  `birthday` datetime DEFAULT NULL,
  `payable` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `testbooking` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `user_id` bigint(20) NOT NULL,
  `item_id` bigint(20) NOT NULL,
  `start_date` date DEFAULT NULL,
  `end_date` date DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `FKEC747367A12BE486` (`item_id`),
  KEY `FKEC7473671463A66C` (`user_id`),
  CONSTRAINT `FKEC7473671463A66C` FOREIGN KEY (`user_id`) REFERENCES `testuser`
(`id`),
  CONSTRAINT `FKEC747367A12BE486` FOREIGN KEY (`item_id`) REFERENCES `testitem`
(`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=latin1;

CREATE TABLE `testitem` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `item_type` varchar(8) NOT NULL,
  `title` varchar(30) DEFAULT NULL,
  `author` varchar(128) DEFAULT NULL,
  `item_status` varchar(30) DEFAULT NULL,
  `publication_date` datetime DEFAULT NULL,
  `publisher` varchar(80) DEFAULT NULL,
  `language` varchar(3) DEFAULT NULL,
  `duration` int(11) DEFAULT NULL,
  `trackNumber` int(11) DEFAULT NULL,
  `pages_number` int(11) DEFAULT NULL,
  `edition` int(11) DEFAULT NULL,
  `isbn` bigint(20) DEFAULT NULL,
  `serial_number` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=38 DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:41:00.210

如果我正确理解您的问题，是实体和实体`Booking`之间的连接实体。从实体名称来看，是关系的所有者。`User``Item``User`

在这种情况下，实体的 Hibernate 映射`User`应如下所示：-

```
<hibernate-mapping>
    <class name="...User" ...>
        <id name="id" column="user_id">
            <generator class="native"/>
        </id>

        <set name="bookings" inverse="true" cascade="all-delete-orphan">
            <key column="user_id"/>
            <one-to-many class="Booking"/>
        </set>

        ...
    </class>
</hibernate-mapping> 
```

`User`实体看起来像这样：-

```
public class User {

    private Long id;
    private Collection<Booking> bookings = new HashSet<Booking>();
    ...

    // assuming if you want to create bi-directional relationship between User and Booking
    public void addBooking(Booking booking) {
        booking.setUser(this);
        bookings.add(booking);
    }

    // getters and setters
    ...
} 
```

要从用户中删除预订，而不是直接从`Booking`实体中删除，您需要这样做：-

*   首先，您首先获取用户对象，例如：`session.load(User.class, <someUserId>);`
*   `user.getBookings()`从集合中查找并删除预订对象。
*   更新用户对象 ( `session.saveOrUpdate(user);`)，级联将自动从表中删除条目`Booking`。

# ruby-on-rails - 在测试期间更新 Rails 固定装置

> ID：14306200
> 
> 赞同：0
> 
> 时间：2013-01-13T17:34:27.510
> 
> 标签：ruby-on-rails, redmine, redmine-plugins

我在 Rails 中有一个功能测试（它是一个 Redmine 插件），这给我带来了问题：

```
fixtures :settings

test 'error is shown on issues#show when issue custom field is not set up' do
  setting = settings(:release_notes)
  setting.value = setting.value.
    update('issue_required_field_id' => 'garbage')
  #setting.save!

  get :show, :id => '1'

  assert_response :success
  assert_select 'div.flash.error',
    :text => I18n.t(:failed_find_issue_custom_field)
end 
```

Setting 模型具有字段`name`和`value`; 在这个特定的设置中，该值是一个被序列化的散列。此散列中的一个键是，用于在显示操作期间`issue_required_field_id`查找特定内容。`IssueCustomField`如果没有具有此 ID 的自定义字段（不应该存在，因为我已将其设置为字符串 'garbage'），那么它应该呈现一个 div.flash.error 来解释发生了什么。

不幸的是，当`setting.save!`被注释掉时，测试失败，因为设置似乎没有更新——使用了该设置的工作值（如 settings.yml 中所示），而“div.flash.error”没有t 出现。如果我取消注释，则此测试通过，但其他测试失败，因为更改未在测试结束时回滚。

有没有办法像这样修改夹具，以便在测试结束时回滚任何更改？

注意：`self.use_transactional_fixtures`绝对设置为 true in `ActiveSupport::TestCase`（并且这个测试用例是一个`ActionController::TestCase`，它是一个子类）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:53:40.370

我弄清楚发生了什么——测试实际上是事务性的，但是 Redmine 的 Setting 类有自己的缓存。添加`Setting.clear_cache!`到测试中`setup`修复了它。

# jquery - Galleria如何删除

> ID：14306201
> 
> 赞同：0
> 
> 时间：2013-01-13T17:34:33.600
> 
> 标签：jquery, css, slideshow, galleria

我有经典的画廊，我已经隐藏了缩略图。

但我想完全删除缩略图部分，而不仅仅是隐藏它。

我想在 Galleria 下放几张图片。

并且没有隐藏缩略图的空白空间。

这是我的意思的图片：

[http://img827.imageshack.us/img827/7246/overflowpic.jpg](http://img827.imageshack.us/img827/7246/overflowpic.jpg)

我试过缩略图是假的，但我可能把它放在错误的位置。

# ffmpeg - FFMPEG H264 压缩预设会影响视频质量吗？

> ID：14306205
> 
> 赞同：9
> 
> 时间：2013-01-13T17:34:45.397
> 
> 标签：ffmpeg

我绝对不是 FFMPEG 专家，但根据[这个文件](http://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide)：

> 预设是一组选项，可提供一定的编码速度与压缩比。较慢的预设将提供更好的压缩（压缩是每个文件大小的质量）。一般用法是使用您有耐心的最慢预设。当前按速度降序排列的预设是：超快、超快、非常快、更快、快、中、慢、慢、非常慢、安慰剂。

所以据我了解，`ffmpeg`预设不应该影响输出视频的质量，而应该只决定压缩比/输出文件大小。因此，假设相同的质量设置（我将使用），例如，预设`-crf 24`文件应该比预设文件更大。这将是使用较慢预设的唯一原因 - 以获得更小的文件大小。`faster``slower`

事实证明并非如此。我使用不同的预设对来自handycam的高清流进行编码，其他一切都是一样的：

```
ffmpeg -y -i "$fname" -vf yadif=1,scale=-1:720 -acodec aac -ab 128k -ac 2 -strict experimental -vcodec libx264 -vpre slow -threads 2 -crf 24 "$outp" 
```

令人惊讶的是，我得到了最小的`veryfast`预设文件大小！例如：

*   `slower`: 输出比特率 3500kbps, 编码速度 17 fps, 文件大小 29MB
*   `veryfast`: 输出比特率 3050kbps, 编码速度 34 fps, 文件大小 25MB

我认为这不是应该的。现在我想知道，这是因为`veryfast`预设的编码质量较差吗？或者在我的情况下`slower`，由于某种原因使用根本没有意义？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-13T21:47:11.423

是的，质量可能会因使用的预设而略有不同，但应该不会很大。这是关于#x264 的讨论的摘录。一位 x264 开发人员提供的答案与您的类似问题：

```
verb3k | Do different presets have an effect on quality when used with CRF?
@Dark_Shikari | verb3k: yes, but not too much.
@Dark_Shikari | a 0th-order approximation is that they have no effect.
@Dark_Shikari | The main reason there's a difference is because the preset affects how x264 itself measures quality
@Dark_Shikari | that is, it uses better, more accurate methods of measuring quality
@Dark_Shikari | obviously, this will affect the definition of what -crf does!
@Dark_Shikari | It's just not too much, so we can mostly ignore it.
@Dark_Shikari | specifically, there are three big things that can affect the definition of quality
@Dark_Shikari | 1) AQ being on/off
@Dark_Shikari | jump: ultrafast to superfast
@Dark_Shikari | 2) mbtree being on/off
@Dark_Shikari | jump: superfast to veryfast
@Dark_Shikari | 3) psy-rd being on/off
@Dark_Shikari | jump: faster to fast
@Dark_Shikari | above fast there are no more big jumps. 
```

这意味着具有相同 CRF 值的较慢预设将提高每比特率的质量，但可能会使质量和比特率更高**或**更低。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-13T18:12:56.393

如果有帮助，这里是`git diff`from `slower`to `veryfast`。即使您只考虑`ref`价值，您也可以看到`veryfast`质量如何降低。

```
ref
In short, this value is the number of previous frames each P-frame can use
as references. 
```

[**来源**](http://mewiki.project357.com/wiki/X264_Settings)

```
--- a/slower
+++ b/veryfast
@@ -1,20 +1,20 @@
 cabac=1
-ref=8
+ref=1
 deblock=1:0:0
-analyse=0x3:0x133
-me=umh
-subme=9
+analyse=0x3:0x113
+me=hex
+subme=2
 psy=1
 psy_rd=1.00:0.00
-mixed_ref=1
+mixed_ref=0
 me_range=16
 chroma_me=1
-trellis=2
+trellis=0
 8x8dct=1
 cqm=0
 deadzone=21,11
 fast_pskip=1
-chroma_qp_offset=-2
+chroma_qp_offset=0
 threads=12
 lookahead_threads=2
 sliced_threads=0
@@ -25,17 +25,17 @@ bluray_compat=0
 constrained_intra=0
 bframes=3
 b_pyramid=2
-b_adapt=2
+b_adapt=1
 b_bias=0
-direct=3
+direct=1
 weightb=1
 open_gop=0
-weightp=2
+weightp=1
 keyint=250
 keyint_min=23
 scenecut=40
 intra_refresh=0
-rc_lookahead=60
+rc_lookahead=10
 rc=crf
 mbtree=1
 crf=23.0 
```

# c - 对当前堆栈进行校验和

> ID：14306207
> 
> 赞同：7
> 
> 时间：2013-01-13T17:34:47.467
> 
> 标签：c, stack, checksum

我想在 main 中对当前堆栈进行校验和，以检查它是否已在两点之间更改。

例如：

```
int main(void) {
    ...
    stack_checksum();

    ... process ...

    if(stack_checksum() != ...)
        altered.
} 
```

如何获取堆栈基地址和堆栈顶部的当前地址？

**编辑：** 在@Miroslav Bajtoš 的帮助下，*采取措施*：

*   将局部变量放入结构中
*   检查回溯返回数组

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T17:45:24.937

这取决于您使用的标准库的编译器/实现。

对于 gcc（或任何其他使用 glibc 的编译器），您可以使用`backtrace()`函数`execinfo.h`- 有关更多详细信息，请参阅这些答案：[How to generate a stacktrace when my gcc C++ app crashs](https://stackoverflow.com/questions/77005/how-to-generate-a-stacktrace-when-my-gcc-c-app-crashes) and [How to get more detail backtrace](https://stackoverflow.com/questions/5945775/how-to-get-more-detailed-backtrace)

对于 Microsoft 编译器，您可以使用`StackWalk64()`函数，有关详细信息，请参阅本文：[Walking-the-callstack](http://www.codeproject.com/Articles/11132/Walking-the-callstack)。StackOverflow 上也有类似的问题：[StackWalk64 on Windows - Get symbol name](https://stackoverflow.com/questions/5705650/stackwalk64-on-windows-get-symbol-name)

一旦您可以遍历堆栈，计算校验和应该很容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T17:52:50.193

我认为您将不得不为此使用内联汇编。以下代码将基指针和当前指针的当前值存储在`base`和中`current`。它适用`gcc`于 64 位机器：

```
// make these variables global (if not, the stack registers would change)
void *base, *current;
__asm__("movq %%rbp, %0;"
        "movq %%rsp, %1;"
        : "=r"(base), "=r"(current)
        :
        :
); 
```

如果您在 32 位计算机上，则必须使用`ebp`and`esp`而不是`rbp`and`rsp`和`movl`而不是`movq`.
如果您对语法有任何疑问，我建议您查看[这个](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html)gcc 内联汇编教程。

# javascript - `insertBefore()` 或 `insertAfter()` 当起点和终点相同时删除元素

> ID：14306209
> 
> 赞同：5
> 
> 时间：2013-01-13T17:34:59.607
> 
> 标签：javascript, jquery

看起来当`insertBefore()`或`insertAfter()`具有与起点和终点相同的元素时，该元素被删除。我的理解正确吗？

```
$('#foo').insertBefore($('#foo')) 
```

这是一个功能吗？如果是这样，这些功能还有哪些其他问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T17:38:07.607

这是因为`insertBefore`并`insertAfter`删除一个元素并移动它。删除元素后，将不再存在要在之前（或之后）插入的原始元素。要实现您可能正在寻找的克隆效果，请尝试：

`$('#foo').clone().insertBefore($('#foo'))`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T17:42:21.200

它实际上似乎是一个[已知的错误](http://bugs.jquery.com/ticket/4087)（不是功能），尽管可能会有一个即将到来的修复（1.9 版本）。

来自错误评论：

> 由于 jQuery.domManip 传入一个片段，jQuery.clean 将 #x 移动到片段。稍后当它到达 jQuery.after 中的回调时，原来的 parentNode 就消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:36:35.687

是的，`insertBefore()`并将元素从源位置`insertafter()` *移动*到目标位置。如果你想插入一个克隆，你可以使用：

```
$('#foo').clone().insertBefore($('#foo')) 
```

但请注意，克隆将具有相同的 ID，这是您不想要的。所以在克隆它之后更改id，但在插入之前。

即类似的东西：

```
$('#foo').clone().attr('id', 'foo2').insertBefore($('#foo')) 
```

# linux - 如何将各种独立域重定向到各种wordpress类别页面

> ID：14306212
> 
> 赞同：0
> 
> 时间：2013-01-13T17:35:07.377
> 
> 标签：linux, .htaccess, redirect

基本上我有大约 30 个不同的域都指向一个 IP，在我的 conf 文件中，所有这些域都指向一个 wordpress 文件夹。

但是我的 wordpress 网站有各种类别，每个类别都有一个页面。各种域与类别匹配......例如我有

www.whattodoinlimerick.com

www.whattodoinroscommon.com

在我的网站上，我有...

[http://www.whattododirectory.com/category/limerick/](http://www.whattododirectory.com/category/limerick/)

[http://whattododirectory.com/category/roscommon/](http://whattododirectory.com/category/roscommon/)

目前这两个域加载了网站的主页，有没有办法可以将它们重定向到那个特定的类别页面？301 重定向不起作用，因为仅针对原始域的路径而不是独立的 URL，任何帮助将非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:34:46.220

只要您将它们都托管在同一个文档根目录下，您就可以尝试将这些规则添加到文档根目录中的 htaccess 文件**的顶部。**您要确保它们高于任何 wordpress 规则：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?whattodoin([^.]+)\.com$ [NC]
RewriteRule ^/?$ http://www.whattododirectory.com/category/%2/ [L,R=301] 
```

对于 301 重定向。由于这是一个*重定向*，因此浏览器的 URL 地址栏会更改为目标 URL。如果要在服务器端内部重写，请将最后一行替换为：

```
RewriteRule ^/?$ /category/%2/ [L] 
```

或者最坏的情况：

```
RewriteRule ^/?$ http://www.whattododirectory.com/category/%2/ [L,P] 
```

取决于 wordpress 的设置方式。这些都不会更改浏览器地址栏中的 URL。

# c# - MySQL存储登录过程[返回表]

> ID：14306220
> 
> 赞同：1
> 
> 时间：2013-01-13T17:35:57.687
> 
> 标签：c#, mysql, database, routines

我正在尝试为我使用 MySQL 作为数据库和 ODBC 作为连接器的 ASP.net Web 应用程序创建一个简单的登录。现在我想通过调用 MySQL 例程而不是应用程序端 SQL 来防止 SQL 注入。

传统上，我可以运行一条 SQL 语句并接收一个表结果，我可以将它存储在一个数据类中。这样，我总是可以轻松访问例如角色等用户属性，而无需再次查询数据库。现在使用 mysql 过程或函数，似乎我只能返回简单的值，如字符串、int 或位，而不是完整的表。所以当我想拥有完整的表时，我是否必须运行 2 个查询？一个作为存储函数，如果登录成功则返回例如用户ID，另一个作为用户信息？还是函数能够返回完整的表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:52:39.260

在 MySQL 服务器中编写表值存储过程是不可能的。MySQL 存储函数仅返回单个值。

但是，如果情况要求函数返回一组数据，您只有两种选择：

*   您可以使用结果集的一些分隔符创建一个字符串并将其返回给调用者。
*   另一个不错的选择是使用临时表。

[更多细节在这里](http://khanrahim.wordpress.com/2010/05/21/mysql-stored-function-that-returns-table/)。

也请参考[mysql 文档](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:59:52.820

首先，我完全同意你的新方法。将 SQL 代码保留在您的应用程序之外是一个非常好的主意。

我想这取决于您的 ODBC 驱动程序。我从经验中知道您可以使用[MySQL Connector for .Net](http://dev.mysql.com/doc/refman/5.5/en/connector-net.html)。您绝对可以使用它从存储过程中获取数据集。

# css - Mega Drop Down 周围的边框

> ID：14306229
> 
> 赞同：0
> 
> 时间：2013-01-13T17:37:13.053
> 
> 标签：css, drop-down-menu, menu, border

我正在构建一个仅 CSS 的下拉列表。我需要`<li>`在主导航列表中的周围有一个连续的边框，以及`<ul>`在悬停时出现的嵌套子菜单。

目前，我正在尝试通过使用 z-index 属性定位`<ul>`下方来消除子菜单和顶部导航栏相遇的顶部边框。`<li>`附加了`<li>`相对定位，并且`<ul>`子菜单相对于它定位（我意识到 z-index 仅适用于定位元素。） Z-index 似乎正在工作，但边框继续显示。

[您可以在此处](http://www.malcolmmcatee.com/weavers/)查看示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:21:17.957

您试图隐藏的元素 (ul) 是必须位于顶部 (li) 的元素的直接后代。z-index 无法做到这一点。（和祖先的z-index无关）

您需要放置另一个元素，即 li 的子元素，以隐藏您不想要的边框部分

也就是说，如果您有一个父亲和 2 个孩子，则先是父亲，然后是 z-index 较低的孩子。z-index 给予者偏好在兄弟之间，而不是在父亲面前给儿子。

# java - 如何将 ActionListener 添加到实现 JTextField 的此类

> ID：14306231
> 
> 赞同：1
> 
> 时间：2013-01-13T17:37:23.723
> 
> 标签：java, swing, actionlistener, jtextfield

您好，我有这个类实现了一个 JTextField：

其中还应该有一个 addActoinListener 方法，我不知道该怎么写......

```
package gui;

import gui.control.ExpressionListener;
import gui.control.NewListener;

import javax.swing.JTextField;

public final class ExpressionView
    extends JTextField {

public String text;

public static final long serialVersionUID = 1L;

public static final ExpressionView instance = new ExpressionView();

private ExpressionView() {
    super("ExpressionView");

    // This is a singleton.
}

@Override
private void addActionListener {
    ExpressionView.addActionListener(ExpressionListener.instance);
}

} 
```

执行动作的 ExpressionListener 类如下所示：

```
package gui.control;

import gui.ExpressionView;

import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.util.Scanner;

import spreadsheet.Application;
import spreadsheet.Expression;
import spreadsheet.exception.NoSuchSpreadsheetException;
import ui.ExpressionInterpreter;
import ui.exception.IllegalStartOfExpression;
import ui.exception.InvalidExpression;
import ui.exception.InvalidPositionException;

public final class ExpressionListener
    implements ActionListener {

  public static final ExpressionListener instance = new ExpressionListener();

  private ExpressionListener() {
    // This is a singleton.
  }
  @Override
  public void actionPerformed(ActionEvent event) {
    try {
      Scanner scanner = new Scanner(ExpressionView.instance.getText());
      Expression expression = ExpressionInterpreter.interpret(scanner);
      Application.instance.set(expression);
    } catch (InvalidPositionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoSuchSpreadsheetException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStartOfExpression e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InvalidExpression e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

  }

} 
```

那么您能帮我看看如何将此 ActionListener 添加到 ExpressionView 类吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:41:04.543

我想这已经足够了：

```
ExpressionView.instance.addActionListener(ExpressionListener.instance); 
```

既然它们都是单例类，为什么你需要一个静态`addActionListener`类`ExpressionView`？您已经可以从`JTextField`on `ExpressionView`singleton 实例继承一个。

# c# - 不断监听的套接字

> ID：14306232
> 
> 赞同：-1
> 
> 时间：2013-01-13T17:37:24.733
> 
> 标签：c#, sockets, tcpclient, tcplistener

所以我已经为此搜索了大约 2 周，但我找不到任何合法的答案。

我有两个项目，一个是服务器，另一个是客户端。

我只设法制作了一个客户端控制台应用程序，它只向服务器发送一次数据然后退出。没有其他的。

那么我如何制作一个客户端，通过网络将字符串从文本框发送到服务器，并且服务器不断侦听。总是听。不仅侦听一次并完成程序，而且等待连接，当建立连接时，服务器接受客户端的字符串，将字符串写入或写入文本框，然后立即返回侦听连接。

我正在使用 Windows 窗体应用程序，所以我不想要控制台应用程序示例。

你可以使用 TcpClient 和 TcpListener ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:46:24.353

我这样做：

```
void Loop()
{
    TcpListener l = new TcpListener(IPAddress.Any, Port);
    WaitHandle[] h = new WaitHandle[2];
    h[0] = StopEvent;

    WriteInfo("Listening on port {0}", Port);

    l.Start();
    while (true)
    {
        var r = l.BeginAcceptTcpClient(null, null);
        h[1] = r.AsyncWaitHandle;
        // Wait for next client to connect or StopEvent
        int w = WaitHandle.WaitAny(h);
        if (w == 0)  // StopEvent was set (from outside), terminate loop
            break;
        if (w == 1)
        {
            TcpClient c = l.EndAcceptTcpClient(r);

            c.ReceiveTimeout = 90000;
            c.SendTimeout = 90000;

            // client is connected, spawn thread for it and continue to wait for others
            var t = new Thread(ServeClient);
            t.IsBackground = true;
            t.Start(c);
        }
    }
    l.Stop();

    WriteInfo("Listener stopped");
} 
```

从哪里`Loop`开始这样的地方：

```
 StopEvent = new ManualResetEvent(false);
    LoopThread = new Thread(Loop);
    LoopThread.Start(); 
```

`StopEvent`用于终止监听循环。`ServeClient`作为名称表示已连接的客户端，如下所示：

```
 void ServeClient(object State)
    {
        TcpClient c = (TcpClient)State;

        NetworkStream s = c.GetStream();
        try
        {
             // Communicate with your client
        }
        finally
        {
            s.Close();
            c.Close();
        }
    } 
```

这适用于任何 .NET 应用程序（Windows 服务、控制台、WPF 或 WinForms）

# android - 使用意图共享私人文件

> ID：14306236
> 
> 赞同：1
> 
> 时间：2013-01-13T17:37:48.657
> 
> 标签：android, android-intent

我正在尝试使用类似`intent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(file));`文件位于路径中的文件共享文件`data/data/my.package.name/folder/fileName`，每当我尝试使用 Gmail 应用程序发送文件时，我都会收到错误消息。

我认为这是由于文件的读取权限，而我的问题是如何授予对文件的意图访问权限，而不必将文件复制到另一个位置。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:45:23.640

试试这个可能对你有帮助。

您正在尝试使用 将文件作为电子邮件附件发送`intents`。

文件为空的原因是`data/data/my.package.name/folder/fileName`由于 Android 的安全模型（该`data/data/my.package.name/folder/fileName`目录对您的应用程序是私有的），电子邮件应用程序无法访问 中的文件。

要在 android 中的电子邮件上附加文件，您必须先将文件保存在外部存储器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-09T12:10:57.553

共享内容的标准机制是通过 ContentProvider。 [http://developer.android.com/training/enterprise/app-compatibility.html#sharing_files](http://developer.android.com/training/enterprise/app-compatibility.html#sharing_files)

# php - 在 php 中进行字符串连接时的优先级错误

> ID：14306242
> 
> 赞同：1
> 
> 时间：2013-01-13T17:38:37.817
> 
> 标签：php, string, echo, string-concatenation

代码很简单：

```
echo 'RESP:'.$db->printList($pprofile); 
```

它的作用是`db->printList($pprofile);`打印更多的字符串。我基本上将字符串放在`RESP`返回的值之前`db->printList($pprofile);`。

问题是结果是相反的。如果`db->printList($pprofile);`返回`A`，那么我总是得到这个：`A:RESP`而我期望`RESP:A`.

我从来没有遇到过这样的问题，我很困惑。我在同一个脚本中的许多其他地方（使用其他类型的输入/输出）做非常相似的事情，结果正确。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:41:29.720

`printList`不返回值，它会打印它，这就是您颠倒顺序的原因（在连接期间执行方法，打印值，然后连接字符串，方法没有返回任何内容并用 打印`echo`）。

# xna - XNA - 一个简单的平台游戏 - 拾取

> ID：14306243
> 
> 赞同：0
> 
> 时间：2013-01-13T17:38:42.510
> 
> 标签：xna

我正在制作一个简单的平台游戏，想知道如何“拿起”一个精灵并让它结束游戏。我在任何地方都找不到任何资源，我唯一能找到的东西涉及使用 XNA 平台游戏入门工具包……我正在积极避免。所以基本的想法是玩家拿起一个苹果——如果它是有毒的，则提示失败屏幕，如果它是由金制成的，则提示胜利屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:51:54.710

我会假设你的角色有一个`collision box`. 只需创建一个名为的对象类`Pickup`并将这些对象添加到您的环境中。让这些对象也有一个`collision box`，这样玩家就可以检测到他正在触摸它们，并`OnPickup`在你的对象上添加一个方法，以便在玩家捡起它们时调用（通过简单地触摸它们或触摸 + 输入）。专门`OnPickup`针对您的各种拾音器来产生预期的行为（例如`die`或`+x gold`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T01:21:25.113

您可以`Vector2`根据项目的位置检查玩家的`Vector2`位置，并查看它们的差异是否小于 30 像素：

```
if (Vector2.Distance(player.position, item.position) < 30)
{
    // player is close enough to an item to pick it up
} 
```

您也可以像这样检查光标位置。

# java - 错误：找不到符号

> ID：14306245
> 
> 赞同：0
> 
> 时间：2013-01-13T17:39:12.643
> 
> 标签：java, find, symbols, minecraft

我正在尝试制作一个 minecraft mod，但我无法弄清楚这个错误：

```
src\minecraft\net\minecraft\src\Packet2ClientProtocol.java:35: error: cannot fin
d symbol
                par1DataOutputStream.writeByte(this.protocolVersion);
                                               ^

symbol: variable protocolVersion
src\minecraft\net\minecraft\src\Packet2ClientProtocol.java:36: error: cannot fin
d symbol
        writeString(this.serverHost, par1DataOutputStream);
                    ^

symbol: variable serverHost
src\minecraft\net\minecraft\src\Packet2ClientProtocol.java:37: error: cannot fin
d symbol
        par1DataOutputStream.writeInt(this.serverPort);
                                      ^

symbol: variable serverPort
src\minecraft\net\minecraft\src\Packet2ClientProtocol.java:38: error: cannot fin
d symbol
            writeString(this.username, par1DataOutputStream);
                            ^

symbol: variable username
src\minecraft\net\minecraft\src\Packet2ClientProtocol.java:54: error: cannot fin
d symbol
        return 3 + 2 * this.username.length();
                       ^

symbol: variable username
src\minecraft\net\minecraft\src\Packet2ClientProtocol.java:62: error: cannot fin
d symbol
    return this.protocolVersion;
               ^

symbol: variable protocolVersion
src\minecraft\net\minecraft\src\Packet2ClientProtocol.java:70: error: cannot fin
d symbol
    return this.username;
               ^ 
```

这是我的 Packet2ClientProtocol.java：

```
package net.minecraft.src;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;

public class Packet2ClientProtocol extends Packet
{
    public Packet2ClientProtocol() {}

    public void Packet2ClientProtocol(int par1, String par2Str, int par3, String par4Str)
    {
        int protocolVersion = par1;
        String serverHost = par2Str;
        int serverPort = par3;
        String username = par4Str;
    }

    /**
    * Abstract. Reads the raw packet data from the data stream.
    */
    public void readPacketData(DataInputStream par1DataInputStream) throws IOException
    {
    int protocolVersion = par1DataInputStream.readByte();
        String serverHost = readString(par1DataInputStream, 255);
        int serverPort = par1DataInputStream.readInt();
    String username = Info.Username;
    }

    /**
    * Abstract. Writes the raw packet data to the data stream.
    */
    public void writePacketData(DataOutputStream par1DataOutputStream) throws IOException
    {
    par1DataOutputStream.writeByte(this.protocolVersion);
        writeString(this.serverHost, par1DataOutputStream);
        par1DataOutputStream.writeInt(this.serverPort);
    writeString(this.username, par1DataOutputStream);
    }

    /**
    * Passes this Packet on to the NetHandler for processing.
    */
    public void processPacket(NetHandler par1NetHandler)
    {
        par1NetHandler.handleClientProtocol(this);
    }

    /**
    * Abstract. Return the size of the packet (not counting the header).
    */
    public int getPacketSize()
    {
        return 3 + 2 * this.username.length();
    }

    /**
    * Returns the protocol version.
    */
    public int getProtocolVersion()
    {
        return this.protocolVersion;
    }

    /**
    * Returns the username.
    */
    public String getUsername()
    {
        return this.username;
    }
} 
```

我在这方面做错了什么？我确定我拼写正确，是我忘记了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:41:24.260

关于您尝试创建构造函数的几点：-

```
public void Packet2ClientProtocol(int par1, String par2Str, int par3, String par4Str)
{
    int protocolVersion = par1;
    String serverHost = par2Str;
    int serverPort = par3;
    String username = par4Str;
} 
```

1.  构造函数没有任何返回类型（`void`从那里删除）。

2.  您尚未将参数值分配给实例变量。相反，您创建了一些局部变量，您当然无法在该构造函数之外访问它们。

所以，使用`this.protocolVersion`会给你错误，因为你没有声明任何具有该名称的实例变量。

您应该将变量声明为类中的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:41:41.253

你所有的变量：

```
int protocolVersion = par1;
    String serverHost = par2Str;
    int serverPort = par3;
String username = par4Str; 
```

是构造函数的局部变量。使它们成为字段。

# php - 关于 cronjobs 的两个问题。不使用命令行执行。PHP

> ID：14306247
> 
> 赞同：0
> 
> 时间：2013-01-13T17:39:13.953
> 
> 标签：php, codeigniter, codeigniter-2

我正在尝试每分钟执行一次 cronjob，但没有以下方式起作用：

```
shell_exec('* * * * * php http://www.example.com/cronJobs/CronJob.php  >> /dev/null');

shell_exec('* * * * * /usr/bin/curl http://www.example.com/cronJobs/CronJob.php.php');

shell_exec('* * * * * wget http://www.example.com/cronJobs/CronJob.php.php'); 
```

另一个问题是关于如何执行特定功能`Cronjob.php`并传递一些参数

我使用 Codeigniter 框架，我不知道是否需要做一些配置，但框架外的测试也失败了。

已编辑：仅需要编辑 crontab 文件，cron 引擎将自动执行 cronjobs。我找到了制作和使用 PHP 类来管理 crontabs 的教程：http: [//net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:42:56.870

为什么要保留 crontab 文件中的时间信息？尝试删除那些。

# arrays - 有人可以向我解释数组的 Big Oh 复杂性吗？我不太了解它们是如何工作的

> ID：14306249
> 
> 赞同：1
> 
> 时间：2013-01-13T17:39:33.027
> 
> 标签：arrays, algorithm, complexity-theory, big-o, time-complexity

我在很大程度上了解链接列表的复杂性。在最坏的情况下访问一个项目是 O(n)，因为它可能在最后或不存在。将 O(1) 添加到未排序的链接列表中，因为您可以将其添加为头部。

但是对于数组，我很困惑。我已经阅读了很多关于访问效率如何（O（1））的内容，但添加不一定，删除也不一定。为什么是这样？

是因为加法并不总是在最后吗？那里会是O（1），对吧？但如果是在另一个点，你就必须移动项目，这将是 O(n)？这是在“幕后”发生的，可以用高级语言说，对吧？它正在移动内存位置，这就是复杂性开始的地方？

删除会导致我收集到间隙？它必须填写吗？

基本上，如果我有一个包含 10 个项目的数组，并且我要在第 5 个索引点添加一个项目，它是否必须将所有项目从索引 5 和更高的索引点复制到一个更高的索引点，从而导致操作是 O(n)？

任何澄清将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:53:57.187

插入（例如，插入数组的中间）是`O(n)`因为，正如您所说，您需要将所有后续元素向右移动。因此，如果您在第一个位置插入，则必须将所有`n`现有元素移至上方以腾出空间，最坏情况下的成本为`n`. 平均而言，假设您在随机位置插入，您正在移动`(n/2)`元素。

附加（到数组的末尾）也是`O(n)`因为它需要重新分配。如果您的数组存在于一块已分配大于数组当前大小的内存中，这不是问题；您只需对内存中的下一个位置进行（恒定时间）写入。但最终你会用完房间。然后，您需要分配一块更大的新内存并将所有现有元素复制到其中。所以你最坏情况下的净成本是`n+1`（`n`副本，加上`1`附加），它给你你的`O(n)`. （还有分配内存所产生的任何幕后成本。）为了避免这种成本，许多语言和库为您提供了在数组中预分配空间的选项，以覆盖您希望在其中看到的最大元素数量你的申请; 这确保不会有任何重新分配，除非您最终添加的元素数量超过预期数量。

删除是`O(n)`因为（如您所说）您需要将已删除元素之后的所有内容移回左侧一个空格。如果从第一个位置删除，则必须将所有`n-1`剩余的元素移过来，以`O(n)`应对最坏的情况。（如果你从*最后一个*位置删除，那只需要恒定的时间。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:27:33.547

[通常，数组是具有固定长度的数据结构。](http://xlinux.nist.gov/dads/HTML/array.html)这个特性有优点也有缺点。

与链表相比，数组的一个优点是，如果您知道它在数组中的位置，您可以在 Θ(1) 中访问数组中的任何项。根据数组中项目的内部顺序，搜索特定值可能非常有效，例如，当项目按排序顺序时，您只需要 Ο(log *n* ) 在与Ο( *n* ) 用于需要线性访问的链表。

数组的主要缺点是如果需要调整数组大小，则需要复制所有项目。因此，如果您不希望数组中有间隙，则任何插入和删除操作都需要 Θ( *n* )。

# html - 透明的 PNG 遮住了链接

> ID：14306252
> 
> 赞同：1
> 
> 时间：2013-01-13T17:40:02.397
> 
> 标签：html, png

> **可能重复：**
> [单击透明 .png](https://stackoverflow.com/questions/3080746/clicking-through-a-transparent-png)
> [单击 DIV 到底层元素](https://stackoverflow.com/questions/3680429/click-through-a-div-to-underlying-elements)

我的页面上有一个 PNG 图像（绝对定位到与其余背景相匹配的位置），问题是另一个 DIV 元素中的超链接被图像的透明部分“遮挡”。结果是超链接清晰可见且可读，但我无法单击它。

有办法解决吗？

编辑：我很惊讶以前没有问过这个问题，但显然，我看起来不够努力：

[单击透明的 .png](https://stackoverflow.com/questions/3080746/clicking-through-a-transparent-png?rq=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:41:14.937

尝试为链接提供比图像更高的 z-index。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:41:37.613

为应该在图像“上方”的元素提供一个高于图像的 z-index

# email - 更改域名服务器后未收到电子邮件

> ID：14306253
> 
> 赞同：1
> 
> 时间：2013-01-13T17:40:06.577
> 
> 标签：email, heroku, dns, nameservers, mx-record

我在大约 2 小时前更改了我正在使用的域的名称服务器，从那以后似乎没有正确接收电子邮件。

我的域是在 Fasthosts 购买的，现在将域名服务器配置为使用 Zerigo DNS（这是通过 Fasthost 管理域名服务器界面设置的）。我还为 Fasthosts 配置了 Google MX 记录，以允许 Google 运行我的电子邮件，但由于更改名称服务器似乎无法接收电子邮件。

当我将域名服务器从 Fasthosts 更改为 Zerigos 时，是否需要在 Zerigo 中设置额外的 MX 记录？

如果是这样，有人知道我如何在 Zerigo 中设置 MX 记录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:04:52.827

MX 记录只是您为网站设置的另一种类型的记录以及 A 记录或 CNAME。

如果您已将名称服务器从 fasthosts 移动到 Zerigo，那么您还必须将 MX 记录也添加到 Zerigo。

为了向 Zerigo 添加记录，请使用 . 打开插件`$ heroku addons open zerigo`。然后您应该单击配置以进入 Zerigo 面板。从这里确保您在主机页面上，然后单击添加。将类型更改为 MX 并设置优先级和数据以匹配 Google MX 服务器列表中的每个条目。对每个 Google 服务器重复。

谷歌邮件服务器列表在[这里](http://support.google.com/a/bin/answer.py?hl=en&answer=174125&topic=2683820&ctx=topic)。

# jquery - 在 chrome 中选择“onclick”事件时显示/隐藏 div 时出现问题

> ID：14306256
> 
> 赞同：-2
> 
> 时间：2013-01-13T17:40:20.190
> 
> 标签：jquery, hide, show

我有一个表格，用户可以在其中选择“帐单地址与送货地址相同”作为选择是或否。我正在尝试使用 jquery Show () hide() 在 select 上显示/隐藏 div。这是我正在使用的代码：

```
<select name="use_shipping_as_billing" >
<option value="Yes" selected="selected"  onclick="$('#billing_form').hide();" >Yes</option>
 <option value="No" onclick="$('#billing_form').show();"  >No</option>
</select> 
```

它在 FF 中工作正常，但 div 在 Chrome 中没有显示/隐藏。我进行了很多搜索并尝试了许多其他选项，包括 onchange() 但似乎没有任何效果。任何输入都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:44:50.413

```
<select name="use_shipping_as_billing" >
 <option value="Yes" selected="selected" >Yes</option>
 <option value="No">No</option>
</select>

<script>
    $(function(){
        $('select[name=use_shipping_as_billing]').change(function(){
            if(this.value === "Yes")
               $('#billing_form').hide();
            else
               $('#billing_form').show();
        }).change();
    });
</script> 
```

# android - 如何在 android 的 GoogleMAPS 中的图钉下添加信息？

> ID：14306260
> 
> 赞同：0
> 
> 时间：2013-01-13T17:40:54.040
> 
> 标签：android, pushpin

我一直在尝试解决我的 android 应用程序中的一个问题。我在我的应用程序中使用 GoogleMAPS api，并使用 OverlayItem 类添加了一些图钉。

但我想在所有图钉下添加一些信息，例如“中央公园”、“研究大楼”。我只有在触摸图钉时才能看到这一点。但我想在所有图钉下添加这些信息。

我将不胜感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:33:57.890

我正在使用谷歌地图 api 版本 1。我仍在尝试解决这个问题。下面的代码是我用于图钉的代码。我只想看到图钉下方的信息，而不是在触摸后看到它。我还想在触摸图钉后添加指导。这在版本 1 中可能吗？

```
 Drawable green= this.getResources().getDrawable(R.drawable.pushpin);
    List<Overlay> mapOverlaysGreen = mapView.getOverlays();            

    OverlayOlustur overlayStart = new OverlayStart(green, this);      

    startPoint =new GeoPoint((int) (lat*1E6), (int) (lon*1E6));        
    OverlayItem overlayitem = new OverlayItem(startPoint,"Info title","Info Text");         
    overlayBaslangic.addOverlay(overlayitem);
    mapOverlaysGreen.add(overlayBaslangic); 
```

# jquery - jquery检查div是否有特定内容

> ID：14306263
> 
> 赞同：0
> 
> 时间：2013-01-13T17:41:09.093
> 
> 标签：jquery

```
$("#thinker01").click( function() {
$("#info").html("323");
    if ($("#info").html == "323"){  //doesn't work - how to say this?
        $("#imgOk").fadeIn();
    }
}); 
```

没有`if`- 第四行有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:42:12.887

```
if ($("#info").html() == "323") 
```

请注意`()`实际调用它的 html 函数周围。否则，您将其用作属性，并且没有这样的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T17:42:13.750

[html](http://api.jquery.com/html/)是一个函数，必须调用。

你可以使用这个：

```
if ($("#info").html() == "323") 
```

# javascript - 多个 JQuery load() 事件

> ID：14306265
> 
> 赞同：0
> 
> 时间：2013-01-13T17:41:15.177
> 
> 标签：javascript, jquery, ajax

> **可能重复：**
> [使用 AJAX 加载外部内容](https://stackoverflow.com/questions/3157592/load-external-content-using-ajax)

我对 JQuery 编程非常陌生，并试图将不同的网页加载到单独的 div 中，但我似乎无法让它工作，我做错了什么？

这是每个 div id 的页面加载

```
$(function(){

   $('#google').load('https://www.google.nl/');
   $('#bing').load('http://www.bing.com/');
}); 
```

以及用于显示多个页面的其余代码：

```
<div data-role="page" id="main"> 

    <div data-role="header" data-position="fixed"> 
        <h1>Search</h1> 
    </div>

    <div data-role="content">   
        <h2>define your choice</h2>       
        <p>Go to: <a href="#google">google</a></p> 
        <p>Go to: <a href="#bing">bing</a></p> 
    </div>

    <div data-role="footer" data-position="fixed"> 
        <h4>Footer</h4> 
    </div>
</div>

<!-- Start of second page --> 
<div data-role="page" id="GameFart" data-add-back-btn="true"> 

    <div data-role="header" data-position="fixed"> 
        <h1>google</h1> 
    </div> 

    <div data-role="content">   
 <div id="google">
    </div>

    <div data-role="footer" data-position="fixed"> 
        <h4>Footer</h4> 
    </div>
</div>

<!-- Start of third page --> 
<div data-role="page" id="GameSpecials" data-add-back-btn="true"> 

    <div data-role="header" data-position="fixed"> 
        <h1>bing</h1> 
    </div>

    <div data-role="content">   
 <div id="bing">
    </div>

    <div data-role="footer" data-position="fixed"> 
        <h4>Footer</h4> 
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:03:52.320

jQuery`.load()`使用 AJAX 并且 AJAX 受到浏览器的限制，根据您可以在[此处](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)阅读的相同来源策略。

这意味着您不能自由地将不同域的其他网站的内容加载到您的页面中。

您可以使用 iframe 嵌入一些网站（浏览器将允许这样做），但特定网站可能会阻止您将它们放入 iframe（如 Google）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-13T17:46:29.350

问题不在于您的代码。这是某些网站的政策，包括 Bing 和 Google。

在常规 HTML 中，您无法制作显示 Google 的 Frame，因为 Google 不允许这样做。与 AJAX 相同。@FelixKling 是正确的。

# java - 访问子面板元素的更漂亮的解决方案

> ID：14306266
> 
> 赞同：1
> 
> 时间：2013-01-13T17:41:23.337
> 
> 标签：java, swing, oop, user-interface

使用 Java 的 Swing，您通常必须将元素*包装*在其他元素中以实现所需的布局。然而，这些面板的元素确实需要由超级面板（进一步称为*view*）访问，例如，在提交表单时。

考虑以下（简化的）示例：

```
class AddUserView extends JPanel {

   private JPanel elementWrapper = new JPanel();
   private JPanel buttonWrapper = new JPanel();

   private JTextField userNameField = new JTextField();
   private JButton submitButton = new JButton("Submit");

   public AddUserView() {

      // .. add elements to the wrappers
      elementWrapper.add(userNameField);
      buttonWrapper.add(submitButton);

      // .. add listeners etc

      // Add the wrappers to the view
      add(elementWrapper);
      add(buttonWrapper);

   }

} 
```

这显然有效，但是我认为这是一个丑陋的解决方案，因为现在`view`拥有所有元素，而不是包装器 - 我觉得更合适。更多的是，现在所有（ie）`GridBagConstraints`都必须放在视图中。

一种解决方案当然是将所有元素放在适当的包装类中，然后将其设为`public`+`final`或创建一个 bazillion `getters & setters`。

但是，我确信有更漂亮的 OOP 方式来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:45:33.923

好吧，我不相信这里有灵丹妙药的解决方案。

当我使用 Swing 工作时，我试图记住以下几点： - 使用封装。将您的 Panel 视为可重复使用的组件。- 尽可能将数据层与视图解耦。

当应用于您的问题时，这可能意味着以下内容： - 您的 AppUserView 面板唯一知道的是 2 个包装器：elementWrapper 和 buttonWrapper。这些是“黑盒”——AppUserView 可以“按原样”使用的可重用组件。每个“包装器”都有一个关于按钮/文本字段/任何它需要的参考。数据模型应该与这些视图完全解耦，唯一的交互应该是通过事件来完成，当模型决定它应该触发一些事件时，相关的视图应该注册为这些事件的监听器并分别做出反应。

希望这可以帮助

# c++ - C++ 错误处理

> ID：14306275
> 
> 赞同：-3
> 
> 时间：2013-01-13T17:41:48.557
> 
> 标签：c++, error-handling, try-catch, user-input

是否可以知道命令是否由`system(cCmdInput);`失败启动，并显示错误（如果是）。

```
cout << endl << "Enter command> ";
getline(cin, cmdInput);
try{
    cin.clear();
    const char *cCmdInput = cmdInput.c_str();
    system(cCmdInput);
}catch (...){
    cout << "An error occurred";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:15:35.210

首先，您不应该使用`system()`它，因为它存在很大的安全风险（尤其是在使用来自用户的输入时，例如上面的代码）。相反，看看`exec()`函数族。

但要回答你的问题，`system()`不会抛出任何异常。您需要检查它返回的内容。[根据文档](http://www.cplusplus.com/reference/cstdlib/system/)，它通常会返回您运行的命令的状态码。您需要查找您正在使用的命令的返回代码，并`system()`根据这些代码检查返回的值。通常，返回值 0 表示成功。

例如：

```
if(system(cCmdInput) != 0)
   cout << "Error" << endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:16:51.893

`system`是一个 C 函数，并且不抛出异常。相反，如果执行成功，它会返回一个可用于解释的值。

根据[文档](http://linux.die.net/man/3/system)，[_](http://msdn.microsoft.com/en-us/library/277bwbdz%28v=vs.71%29.aspx)

> 错误时返回的值为 -1（例如 fork(2) 失败），否则返回命令的状态。

通常返回状态`0`表示成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T18:19:20.950

实际上，在 *nix 和 Windows 中，该`system`函数将返回您运行的程序的进程退出代码。

因此，要运行一个表现良好的程序，只需检查结果是否为 0。按照惯例，进程退出代码 0 表示成功，任何其他值都表示失败。

但是请注意，许多 Windows 程序在生成指示错误的进程退出代码的意义上表现不佳。您可以在 Windows 命令解释器中检查这一点，最直接的是`echo %errorlevel%`在运行程序之后。另一种方法是使用逻辑连接词`&&`和`||`，例如`myprog && echo OK || echo Bah, failed!`。

# android - android locationManager 没有在 LocationListener 中回调 onLocationChanged

> ID：14306276
> 
> 赞同：1
> 
> 时间：2013-01-13T17:41:59.293
> 
> 标签：android, locationmanager

我正在开发一个 android 应用程序来跟踪用户的位置。问题是 requestLocationUpdates() 已被调用但对 LocationListener 没有响应。

ps 调用 requestLocationUpdates() 后，GPS 指示器显示在顶部状态栏中。

ps 使用android 4.0 或之前的版本没有这个问题。我的 Galaxy nexus 更新到 4.1 后，出现了这个问题。这与操作系统问题有关吗？

有人知道这个吗？非常感谢！

清单：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

位置管理器：

```
LocationManager lm = (LocationManager) getActivity().getSystemService(Context.LOCATION_SERVICE); 
```

位置监听器：

```
private final LocationListener locationListener = new LocationListener() {

    @Override
    public void onLocationChanged(Location location) {
        System.out.println("onLocationChanged");
    }

    @Override
    public void onProviderDisabled(String provider) {
        System.out.println("onProviderDisabled");
    }

    @Override
    public void onProviderEnabled(String provider) {
        System.out.println("onProviderEnabled");
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        System.out.println("onStatusChanged");
    }
}; 
```

它是如何开始的：

```
Criteria c = new Criteria();
c.setAccuracy(Criteria.ACCURACY_FINE);

final String PROVIDER = lm.getBestProvider(c, true);
lm.requestLocationUpdates(PROVIDER, 600000, 0, locationListener); 
```

# postgresql - 优化适用于“无行”的 max() 聚合

> ID：14306277
> 
> 赞同：2
> 
> 时间：2013-01-13T17:42:03.593
> 
> 标签：postgresql, aggregate-functions, postgresql-9.2, postgresql-performance

我有一个要针对 PostgreSQL 9.2 优化的查询：

```
select coalesce(max(id),0) as m from tbl 
```

它需要永远运行，所以我想我可以将它重写为

```
select id from tbl order by id desc limit 1 
```

`0`除非表中没有行，否则它需要返回。我尝试了一些案例陈述的组合，但它们似乎不起作用。有什么建议么？

计划一个空表：

```
Aggregate (cost=11.25..11.26 rows=1 width=4)
 -> Seq Scan on tbl (cost=0.00..11.00 rows=100 width=4) 
```

成本为 58k，表有 1,190,000 行，但执行计划相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T02:07:58.750

> 除非如果表中没有行，则需要返回 0

```
SELECT COALESCE((SELECT max(id) FROM tbl), 0) 
```

由于没有返回行，因此您不能简单地使用`COALESCE()`为这种特殊类型`NULL`（无行）提供默认值。把它放在一个子查询中。
[要点：`0`如果所有现有行`tbl`have ，这也会返回`id IS NULL`。]

性能的关键是可能是主（或唯一）键约束的索引，它通过列上的唯一索引或任何普通的 b-tree 索引来**实现** ：`tbl.id`

```
CREATE index foo on tbl(id) 
```

密切相关的问题：
[如何在查询中找不到匹配项时显示默认值？](https://stackoverflow.com/questions/8200462/how-to-display-a-default-value-when-no-match-found-in-a-query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:11:12.923

也许是这样：

```
select
    case
        when (select id from tbl limit 1) is null then 0
        else (select id from tbl order by id desc limit 1)
    end; 
```

# java - 如何使用 Javax.Comm 串行事件侦听器接收 SMS 消息

> ID：14306287
> 
> 赞同：4
> 
> 时间：2013-01-13T17:42:52.207
> 
> 标签：java, serial-port, sms

我正在用 Java 编写一个程序来发送和接收 SMS 文本消息。我正在使用 AT 命令和我的诺基亚设备的蓝牙连接。我写了一个类来发送消息。但我不知道如何让 java 串行事件在我收到短信时通知我。

为了在我向手机写入适当的 AT 命令时接收消息，然后我编写了一个类，每 10 秒向手机发送一个换行语句，这会显示任何新消息。

我真的更喜欢使用串行事件处理传入的消息。任何有关如何执行此操作或 Java 代码的信息将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-20T21:43:53.503

Take a look at org.smslib: [http://smslib.org/](http://smslib.org/)

Example use of that library here: [https://groups.google.com/forum/#!topic/smslib/6b4dR5pJjBY](https://groups.google.com/forum/#!topic/smslib/6b4dR5pJjBY)

Alternatively, if you really need to do it using javax.commm alone - some example code to get you started is here:

[http://www.java2s.com/Code/JavaAPI/javax.comm/SerialPortaddEventListenerSerialPortEventListenerarg0.htm](http://www.java2s.com/Code/JavaAPI/javax.comm/SerialPortaddEventListenerSerialPortEventListenerarg0.htm)

In particular:

You need to call `SerialPort.addEventListener(SerialPortEventListener arg0)` and then `serialPort.notifyOnDataAvailable(true);`

When this is setup you can then act on `SerialPortEventListener`'s callback like so:

```
public void serialEvent(SerialPortEvent event) {
  switch (event.getEventType()) {
  case SerialPortEvent.BI:
  case SerialPortEvent.OE:
  case SerialPortEvent.FE:
  case SerialPortEvent.PE:
  case SerialPortEvent.CD:
  case SerialPortEvent.CTS:
  case SerialPortEvent.DSR:
  case SerialPortEvent.RI:
  case SerialPortEvent.OUTPUT_BUFFER_EMPTY:
    break;
  case SerialPortEvent.DATA_AVAILABLE:
    byte[] readBuffer = new byte[20];

    try {
      while (inputStream.available() > 0) {
        int numBytes = inputStream.read(readBuffer);
      }   
      System.out.print(new String(readBuffer));
    } catch (IOException e) {
    }   
    break;
  }   
} 
```

# python - 编写 Python 编译器进行练习

> ID：14306291
> 
> 赞同：10
> 
> 时间：2013-01-13T17:43:06.473
> 
> 标签：python, compiler-construction

最近我读了很多关于 CPU 和架构的文章。主要是操作码，集成电路等。我已经做了几年的python开发人员，我想在编写机器码方面得到一些练习。

我想为了好玩，我会将一个非常简单的 python 脚本编译成机器码作为练习它的一种方式。脚本如下：

```
a = 2
b = 3
c = a + b
print c 
```

我正在用 python 编写编译器，因为我在 C 方面不如在 python 方面好。我看了一圈，我可以使用以下python库，这可能会有所帮助，即

```
binascii.hexify(hex(2))  <-- should convert 2 to binary, correct?

file = open('/usr/local/bin/my_sample_program','wb') <-- should write the resulting binary file 
```

我仍然需要找到 Intel Core i5 的操作码，但这应该很容易。

我的问题如下：

1）如何将操作码写入文件？换句话说，假设用于设置寄存器以包含值 2 的操作码是*0010*，我如何将其写为程序第一行执行中的前四个数字？

2) 我如何告诉 OS X 或 Ubuntu 将程序加载到物理内存中？我假设编译器做的第一件事是将操作系统的指令写入生成的二进制文件？

3）您可能知道的任何可以帮助我的资源将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T17:56:27.370

那是你在那里计划的一个项目。除了了解编译器的工作原理之外，您还需要阅读 ELF 等可加载文件格式以及有关操作系统详细信息的大量信息。

我建议您发出一个*汇编文件*作为编译器的输出。然后您可以使用现有的汇编程序将文件转换为机器代码。事实上，这是大多数 C 编译器（包括 GCC）“在表面下”所做的。

**编辑：**编译器或汇编器的输出通常是一个*目标文件*。稍后通过链接器将其与其他目标文件组合。编写整个工具链、编译器、汇编器、链接器和其他相关工具将很容易花费多个人年。从这个角度来看，我认为您不应该看到一个直接的解决方案，比如使用现有的汇编器和链接器作为作弊。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T19:04:39.493

编译python并不容易。您可以查看具有即时编译器的[pypy 。](http://pypy.org/)

如果标准 Cpython 解释器运行 python 程序，另一种选择是从保存在文件中的 python[字节码开始。](http://docs.python.org/2/glossary.html#term-bytecode)`.pyc`这具有有限数量的指令，您必须为您的 CPU 生成汇编/可执行代码。

请注意，您还必须编写*大量*代码来实现所有内置类型和函数！

# java - 试图在列表中查找课程

> ID：14306295
> 
> 赞同：1
> 
> 时间：2013-01-13T17:43:16.527
> 
> 标签：java, generics

> **可能重复：**
> [获取 java.util.List 的泛型类型](https://stackoverflow.com/questions/1942644/get-generic-type-of-java-util-list)

如何查看参数列表中的类型

```
private List<String> names; 
```

我怎么能找到它的字符串列表？我的目标是使这样的方法有效：

```
public Field findFieldByObjectType(Class<?> clazz, Object obj) {
    for (Field field : clazz.getDeclaredFields()) {
        // if field type is List<obj>
        // return field
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:47:01.267

您可以在列表的元素上使用`instanceof`运算符或方法。`getClass()`

```
private List<String> names; 
```

变成

```
private List names; 
```

类型擦除后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:15:16.317

[正如我在评论中所说，这是借助反射https://stackoverflow.com/a/1942680/1317692](https://stackoverflow.com/a/1942680/1317692)可以实现的最接近的事情。归功于 BalusC。

# php - Highcharts 返回错误 15 但图表正确？

> ID：14306296
> 
> 赞同：0
> 
> 时间：2013-01-13T17:43:17.260
> 
> 标签：php, javascript, graph, highcharts

我已经在这几个小时了，我不知道出了什么问题。它显示正确的图表，但我无法将鼠标悬停在任何点上。我已经阅读了我的 var_dump() 并且我的所有记录都井井有条。我是否在某些时候错误地转换了日期？

我的图表是什么样的（这是正确的）：[http ://screencloud.net/v/qrSS](http://screencloud.net/v/qrSS)

我得到的错误：“Highcharts 错误 #15：www.highcharts.com/errors/15”

> Highcharts 期望数据被排序
> 
> 当您尝试创建数据未按 X 升序排序的线系列或股票图表时，会发生这种情况。出于性能原因，Highcharts 不对数据进行排序，而是要求实现者对数据进行预排序。

我的控制台：[http ://screencloud.net/v/qWHO](http://screencloud.net/v/qWHo)

我的highcharts代码

```
 $.post('/card/read_graph_json', inputs, function(data) {
            json = jQuery.parseJSON(data);

            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container',
                    type: 'spline'
                },
                global: {
                    useUTC: false
                },
                plotOptions: {
                    series: {
                        animation: false
                    }
                },
                title: {
                    text: '{{ $card->name }}'
                },
                subtitle: {
                    text: null
                },
                xAxis: {
                    type: 'datetime',
                    dateTimeLabelFormats: { // don't display the dummy year
                        month: '%b',
                        year: '%b'
                    }
                },
                yAxis: {
                    title: {
                        text: null
                    },
                },
                tooltip: {
                    formatter: function() {
                        var monthNames = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ],
                            date = new Date(this.x);

                        return '<strong>'+ this.series.name +'</strong><br/>'+ monthNames[date.getMonth()] + '. ' + date.getDay() + ', ' + date.getFullYear() +': '+ this.y;
                    }
                },
                series: [json]
            });
        }); 
```

我创建 JSON 的 php

```
public function contact_records($contact_id, $number_past_entries = 6, $reverse = false) 
{
        // Pull 15 records from db and order them by date created "Y-m-d H:i:s" 
        return $this->has_many('Record')
            ->where_deleted(0)
            ->where_contact_id($contact_id)
            ->order_by('created_at', 'desc')
            ->take($number_past_entries)
            ->get();
}

public function post_read_graph_json()
{
    $contact_id = Input::get('contact_id');
    $tracker = Tracker::find(Input::get('tracker_id'));
    $card = Card::find(Input::get('card_id'));
    $serie = array();

    if ($tracker != null && $card != null) {
        Cookie::forever("default_graph_tracker_id", $tracker->id);
        $data = array();

        // This is where my records come from
        $records = $card->contact_records($contact_id, 15);

        // Create the serie
        foreach ($records as $record) {
            $data[] = array(
                strtotime($record->created_at) * 1000,
                floatval($record->read_tracker_value($tracker->id)->value)
            );
        }

        $serie = array(
            'name' => $tracker->name,
            'data' => $data
        );
    }

    return json_encode($serie);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:10:35.943

我使用了这个功能

```
function aasort (&$array, $key) {
    $sorter=array();
    $ret=array();
    reset($array);
    foreach ($array as $ii => $va) {
        $sorter[$ii]=$va[$key];
    }
    asort($sorter);
    foreach ($sorter as $ii => $va) {
        $ret[$ii]=$array[$ii];
    }
    $array=$ret;
} 
```

更新了我的代码的一部分

```
 $data = array();
        foreach ($records as $record) {
            $data[] = array(
                'time' => strtotime($record->created_at) * 1000,
                'value' => floatval($record->read_tracker_value($tracker->id)->value)
            );
        }

        aasort($data, 'time');

        $new_data = array();
        foreach ($data as $record) {
            $new_data[] = array(
                $record['time'],
                $record['value']
            );
        }

        $serie = array(
            'name' => $tracker->name,
            'data' => $new_data
        ); 
```

达达！

# c# - 'CsGL.OSLib' 抛出异常

> ID：14306299
> 
> 赞同：2
> 
> 时间：2013-01-13T17:43:35.153
> 
> 标签：c#, visual-studio-2010, opengl

我从 C# 的 OpenGL 开始，所以我下载并安装了 CsGL 库，但是当我尝试运行一些示例解决方案时，Visual Studio 抛出异常

> 'csgl.oslib' 的类型初始化程序引发了异常”。

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-28T13:57:53.917

我找到了解决方案：

*   将目标平台设置为 x86（在项目属性>构建中）
*   将两个 dll ( `csgl.dll`+ `csgl.native.dll`) 复制到 'C:\Windows\System32' AND 'C:\Windows\SysWOW64'

别客气 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:28:26.320

通常它意味着比静态构造函数`CsGL.OSLib`抛出错误。尝试获取`InnerException`有关您的异常的更多详细信息。也许，缺少一些依赖库。

我在互联网上找到[了这个](http://www.codeforge.com/read/141714/OSLib.cs__html)源代码。`CsGL.OSLib`是你的项目吗？检查`CsGL.OSLib`静态构造函数。

# java - 录制语音时暂停选项android

> ID：14306306
> 
> 赞同：1
> 
> 时间：2013-01-13T17:44:32.740
> 
> 标签：java, android, media-player, android-mediarecorder

这就是我录制音频的方式：-

```
 recorder = new MediaRecorder();
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setOutputFile(audioFile.getAbsolutePath()); 
```

并开始录制：-

```
 recorder.start(); // Recording is now started 
```

并停止：

```
 recorder.stop(); // Recording is now stopped 
```

但是如何在录制时暂停，也在stackoverflow和开发者网站中搜索，我发现没有api可以暂停录制。但是 google play 中有很多应用程序都提供了暂停选项，这意味着必须做一些工作。

一种方法是使用相同的音频文件并向其附加数据。

但是，谁能帮我一些代码....谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T04:18:55.993

**录制后，唯一可能的操作是停止和重置。**

Android MediaRecorder 类不提供暂停功能，所以我们不能暂停录制，但可以停止录制。

# ruby-on-rails - 如何在 Rails 中访问原始未更改的 http POST 数据？

> ID：14306310
> 
> 赞同：27
> 
> 时间：2013-01-13T17:44:48.337
> 
> 标签：ruby-on-rails

如何访问`POST`控制器中的原始消息*并将其原封不动地发送回*其原始发件人？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-13T18:05:42.610

您可以使用[`ActionDispatch::Request#raw_post`](http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-raw_post)获取未更改的 POST 数据：

```
request.raw_post 
```

# java - 为什么 MediaType.TEXT_PLAIN 仅在我将 jersey-core-1.16.jar 添加到我的类路径时才有效

> ID：14306312
> 
> 赞同：1
> 
> 时间：2013-01-13T17:44:54.137
> 
> 标签：java, spring, jakarta-ee, jersey, shared-libraries

我正在尝试编写一个 Jersey 客户端来向 Spring REST 服务发送请求。

为了实现这一点，我将 jersey-client-1.16.jar 添加到我的类路径中，因为我只需要客户端的服务。然而，它抱怨它找不到 MediaType.TEXT_PLAIN

```
The type javax.ws.rs.core.MediaType cannot be resolved. It is indirectly referenced from required .class files 
```

如果我添加`jersey-core-1.16.jar`到我的类路径中它确实有效，但我不需要这个库，因为我没有编写任何 REST 服务。我认为这`MediaType.TEXT_PLAIN`是 JDK 的一部分（因为它在包中`javax.ws.rs.core.MediaType`）所以我不明白为什么它没有得到解决。它不是JDK的一部分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-16T11:48:35.590

您在类路径中缺少一些罐子...添加**jsr311-api-1.1.1.jar**

# php - 如何设置 simplexml_load_string PHP 函数的输出编码

> ID：14306314
> 
> 赞同：3
> 
> 时间：2013-01-13T17:45:04.597
> 
> 标签：php, encoding, simplexml, output

我正在解析 CP1250 编码的字符串`simplexml_load_string`。所以，我在以 . 开头的字符串中声明它`<?xml version="1.0" encoding="windows-1250"?>`。不幸的是，所有节点在`simplexml_load_string`输出中都是 UTF8 编码的。

有没有办法，如何指定输出编码，或者在使用输出时我必须使用 iconv 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-10T22:45:32.857

# ios - 为什么使用 ARC 将其标记为潜在泄漏？

> ID：14306318
> 
> 赞同：2
> 
> 时间：2013-01-13T17:45:43.363
> 
> 标签：ios, memory-leaks, automatic-ref-counting, static-analysis

我仍然对 ARC、桥接和某些非免费桥接 CF 对象感到有些困惑。我目前的困惑是围绕 CFSocket。我很确定我清理得正确，但分析工具告诉我不然。也许我的不和谐让我看不到泄漏，或者工具是错误的。我还没准备好责怪这个工具，所以我正在寻找其他人来指出这个问题。例如，我是否缺少`__bridge`将所有权转让给我的形式？

在我的项目中，使用 ARC，我有一个基于 TCP 的服务器。我们称这个类为“MyServer”。在 MyServer 中，我有一个内部属性 socket，定义如下：

```
@property (assign) CFSocketRef socket; 
```

此属性在服务器运行时保存套接字引用。停止服务器将释放引用，删除服务器对象也是如此。我也在尝试清理在启动服务器过程中产生的任何潜在泄漏。正是在这个领域，我遇到了静态分析问题。

使用此方法启动服务器：

```
- (BOOL)startServer
{
    BOOL started = NO;

    NSLog(@"[%@ %@] starting server on port %u", NSStringFromClass([self class]), NSStringFromSelector(_cmd),self.port);

    self.lastError = nil;

    if ([self createSocket]) {
        started = YES;
        _state = SERVER_STATE_STARTING;
    };

    return started;
} 
```

该`createSocket`方法创建一个套接字（duh），如下所示：

```
-(BOOL)createSocket
{
    BOOL result = YES;

    self.socket = CFSocketCreate(kCFAllocatorDefault, PF_INET, SOCK_STREAM,
                                 IPPROTO_TCP, 0, NULL, NULL);
    if (self.socket != NULL) {
        int reuse = true;
        int fileDescriptor = CFSocketGetNative(self.socket);
        if (setsockopt(fileDescriptor, SOL_SOCKET, SO_REUSEADDR,
                       (void *)&reuse, sizeof(int)) == 0) {

            struct sockaddr_in address;
            memset(&address, 0, sizeof(address));
            address.sin_len = sizeof(address);
            address.sin_family = AF_INET;
            address.sin_addr.s_addr = htonl(INADDR_ANY);
            address.sin_port = htons(self.port);

            CFDataRef addressData = CFDataCreate(NULL,
                                                 (const UInt8 *)&address,
                                                 sizeof(address));

            if (addressData && CFSocketSetAddress(self.socket, addressData) == kCFSocketSuccess) {
                self.listenHandle = [[NSFileHandle alloc] initWithFileDescriptor:fileDescriptor
                                                                  closeOnDealloc:YES];

                [[NSNotificationCenter defaultCenter] addObserver:self
                                                         selector:@selector(receiveIncomingConnectionNotification:)
                                                             name:NSFileHandleConnectionAcceptedNotification
                                                           object:nil];
                [self.listenHandle acceptConnectionInBackgroundAndNotify];

                _state = SERVER_STATE_RUNNING;
            } else {
                result = NO;
                [self errorWithName:@"Unable to bind socket to address."];
            }
            CFRelease(addressData);
        } else {
            [self errorWithName:@"Unable to set socket options."];
            CFRelease(self.socket);
            CFSocketInvalidate(self.socket);
            CFRelease(self.socket);
            self.socket = nil;
            result = NO;
        }
    } else {
        [self errorWithName:@"Unable to create socket."];
        // CFRelease(self.socket); //NO - CFRelease(NULL) is a runtime error!
        result = NO;
    }

    return result;
} 
```

当我对此代码运行静态分析时，Xcode 报告了 self.socket 周围的大量潜在泄漏。这是一个示例，来自上述`createSocket`方法：

![（静态分析错误）](../Images/fceda96f074cc07533bf6f9b0f01c597.png)

确实，我不再在此路径中引用该对象。也许有某种方法可以告诉系统我想要拥有该对象，而它抱怨的原因是它无法告诉我拥有该对象。我应该使用其中一个`__bridge`演员来传达该信息吗？我尝试使属性保持或强大，但这并没有建立，因为它不是一个对象。还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T18:31:38.547

几个想法：

1.  正如 Jesse 指出的那样，问题在于您正在使用访问器方法，`socket`而分析器有点困惑，认为传递给该`setSocket`方法的对象正在泄漏，而没有意识到您将其保存在实例变量中. 如果您将这些出现替换为`self.socket`，`_socket`您的相关警告`self.socket`就会消失。

2.  您的代码会生成第二个警告，该警告`addressData`与您有一个执行路径`addressData`可能是相关的事实`NULL`，但您仍在调用`CFRelease`. `NULL`在尝试之前，您应该让代码明确检查 not `CFRelease`。

3.  你释放了你的套接字两次，一次是在它失效之前，一次是在它失效之后。显然，您不想发布两次。我还建议将套接字设置为`NULL`, not `nil`, 不是那么重要。

4.  部分原因是我与第 2 点相关的更改（否则我需要添加另一个`else`子句 if `addressData`was `NULL`），但也作为逻辑上的一般转变，因为您有许多与失败相关的执行路径，但只有一个与成功，我建议默认并将其设置为`result`单个成功的执行路径。这确保我们在创建成功但侦听未成功的所有不同路径中使套接字无效并释放。我相信以前有一些执行路径没有被正确覆盖。`NO``YES`

因此，我最终得到了以下版本`createSocket`：

```
-(BOOL)createSocket
{
    BOOL result = NO;

    _socket = CFSocketCreate(kCFAllocatorDefault, PF_INET, SOCK_STREAM,
                                 IPPROTO_TCP, 0, NULL, NULL);

    if (_socket != NULL) {
        int reuse = true;
        int fileDescriptor = CFSocketGetNative(self.socket);
        if (setsockopt(fileDescriptor, SOL_SOCKET, SO_REUSEADDR,
                       (void *)&reuse, sizeof(int)) == 0) {

            struct sockaddr_in address;
            memset(&address, 0, sizeof(address));
            address.sin_len = sizeof(address);
            address.sin_family = AF_INET;
            address.sin_addr.s_addr = htonl(INADDR_ANY);
            address.sin_port = htons(self.port);

            CFDataRef addressData = CFDataCreate(NULL,
                                                 (const UInt8 *)&address,
                                                 sizeof(address));

            if (addressData) {
                if (CFSocketSetAddress(_socket, addressData) == kCFSocketSuccess) {
                    self.listenHandle = [[NSFileHandle alloc] initWithFileDescriptor:fileDescriptor
                                                                      closeOnDealloc:YES];

                    [[NSNotificationCenter defaultCenter] addObserver:self
                                                             selector:@selector(receiveIncomingConnectionNotification:)
                                                                 name:NSFileHandleConnectionAcceptedNotification
                                                               object:nil];
                    [self.listenHandle acceptConnectionInBackgroundAndNotify];

                    result = YES;
                    _state = SERVER_STATE_RUNNING;
                } else {
                    [self errorWithName:@"Unable to bind socket to address."];
                }
                CFRelease(addressData);
            }
        }

        if (result != YES) {
            [self errorWithName:@"Unable to set socket options."];
            CFSocketInvalidate(_socket);
            CFRelease(_socket);
            _socket = NULL;
        }
    } else {
        [self errorWithName:@"Unable to create socket."];
    }

    return result;
} 
```

* * *

我最初的答案是关注核心基础内存管理的基础知识，虽然很重要，但与手头的问题并没有直接关系。

**原答案：**

是的，如果 Core Foundation 函数调用的名称中包含`Create`或`Copy`名称中，则您拥有该对象。因此，您必须：

*   通过 释放对象`CFRelease`。请参阅[核心基础内存管理编程指南](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFMemoryMgmt/CFMemoryMgmt.html)。

*   `CFBridgingRelease`通过或将所有权转让给 ARC `__bridge_transfer`。请参阅[过渡到 ARC 发行说明](http://developer.apple.com/library/mac/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW1)。

显然，前者在这里适用，但一般来说，任何一种方法都有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T19:45:05.510

这里的问题是您正在使用一个属性，这会使编译器感到困惑。（它无法弄清楚 call `self.socket = ...`，它实际上`[self setSocket:...]`需要一个已经保留的项目并存储它。

如果您直接使用实例变量，它应该消除警告，因为它会理解您自己持有对该 CFSocketRef 的引用。（在这种情况下，由于您的属性是私有的且已分配，因此您也可以使用实例变量。）

此外，您在稍后调用 CFRelease 之后使用套接字（您在 CFRelease 之后调用 CFSocketInvalidate），这是一个坏主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T17:52:06.360

它被报告为潜在泄漏，因为它是潜在泄漏。如果该`createSocket`方法被调用了两次，那么就会发生泄漏，因为您从未释放过套接字。

尝试添加：

```
CFRelease(self.socket); 
```

就在调用`CFSocketCreate`. 并确保您`CFRelease`在方法中调用套接字`dealloc`。

# python - python：显示帮助文档

> ID：14306324
> 
> 赞同：2
> 
> 时间：2013-01-13T17:46:49.023
> 
> 标签：python, emacs, ipython, python-mode

我在 emacs 中使用 iPython 运行 python 模式。特别是对于 numpy 包，当我输入

```
[1]: help(numpy.array) 
```

或在交互式缓冲区中的任何类似内容，文档的页面和页面都打印在缓冲区中，从而难以搜索缓冲区中打印的其他材料。有没有更好的方法来解决这个问题？在 R 中，您可以通过更改非常轻松地在 Web 浏览器中显示帮助页面（文档在本地 HD 上）`options(help_type="html")`，并且文档的格式也很好。Python中有这样的东西吗，或者你做什么？我并不总是有互联网连接，所以我想要一个本地高清解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:15:49.143

如果您单独使用 ipython（不在 emacs 内），它应该对文本进行分页。如果没有，可能环境变量 PAGER 已被覆盖：将其设置为“less”，它应该可以工作

对于 bash shell，将以下行添加到您的 ~/.bashrc 中：

```
export PAGER=less
export LESS=-r 
```

如果您需要 html 帮助，您可以考虑[pydoc](http://docs.python.org/2/library/pydoc.html#module-pydoc)

```
import pydoc
pydoc.apropos('numpy.array') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:19:48.953

[`pydoc`](http://docs.python.org/2/library/pydoc.html)可能是您正在寻找的。

你可以`pydoc`运行它自己的 web 服务器来显示带有`-p`标志的文档（它需要一个类似的端口号`1234`）。对我来说，它显示了 my 中所有模块的文档，`PYTHONPATH`非常方便。

# android - 如果毫秒数太高，处理程序和 postDelayed 不起作用

> ID：14306331
> 
> 赞同：0
> 
> 时间：2013-01-13T17:48:26.683
> 
> 标签：android

我正在尝试在后台执行服务。该服务在启动时启动，其功能是每 8 小时执行一次。在这种情况下，它使用 JavaMail API 和 gmail 帐户通过邮件发送文件。这是我的代码：

```
private Handler mHandler;
private Runnable updateRunnable = new Runnable() {
    @Override public void run() {
        new MailSenderActivity.MailSender().execute();

        queueRunnable();
    }
};

private void queueRunnable() {

    mHandler.postDelayed(updateRunnable, 28800000); 
}

@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public void onCreate() {

    mHandler = new Handler();
    queueRunnable();       
}

@Override
public void onDestroy() {
    //code to execute when the service is shutting down
}
@Override
public void onStart (Intent intent, int startid) {
    //code to execute when the service is starting up
} 
```

如果`xxxx`in`mHandler,postDelayed(updateRunnable, xxxx)`是 600000（10 分钟，以毫秒为单位），它运行完美，但如果它是 28800000（8 小时，以毫秒为单位），则不会

有什么建议么？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:52:04.810

> 我正在尝试在后台执行服务。该服务在启动时启动，其功能是每 8 小时执行一次。

请不要那样做。请使用每 8 小时`AlarmManager`启动一次。`IntentService`这样，您的服务就不必一直留在内存中。

> 如果 "mHandler,postDelayed(updateRunnable, xxxx)" 中的 "xxxx" 为 600000（10 分钟，以毫秒为单位），则运行完美，但如果为 28800000（8 小时，以毫秒为单位），则不会

很可能，Android 终止了您的进程。`AlarmManager`同样，如果您使用和，这不是问题`IntentService`。

# memory - CUDA - 同步线程 -> 等到第一个输入完成写入

> ID：14306337
> 
> 赞同：1
> 
> 时间：2013-01-13T17:49:16.013
> 
> 标签：memory, cuda, synchronous

我正在尝试执行以下操作（简化）：**请阅读编辑部分！**

```
__shared__ int currentPos = 0;
__global__ myThreadedFunction(float *int, float *out)
{
    // do calculations with in values
    ...

    // now first thread reach this:
    //suspend other threads up here

    out += currentPos;
    for (int i = 0; i < size; ++i)
    {
        *(currentPos++) =  calculation[i];
    }
    currentPos +=  size;

    // now thread is finish, other threads can
    // go on with writing
} 
```

那么如何在写入相同的内存之前挂起线程呢？我不能同时写，因为我不知道每个计算数组的大小（calculation[i] - size）。

我知道有*同步线程*和*线程围栏*，但我不知道如何正确使用它们来解决这个问题。

**编辑：** 我想做的是：

我有 2 个线程（仅作为示例）。每个线程都在一个新数组中使用浮点数*进行计算。

线程 1 计算：{ 1, 3, 2, 4 }

线程 2 计算：{ 3, 2, 5, 6, 3, 4 }

这些数组的大小在计算后是已知的。现在我想在 float *out 中写入这些数组。

如果第一个线程 1 或线程 2 正在写入，对我来说没有必要。输出可能是： * { 1, 3, 2, 4, 3, 2, 5, 6, 3, 4 } 或 { 3, 2, 5, 6, 3, 4, 1, 3, 2, 4} *

那么如何计算输出数组的位置呢？

我不想使用固定的“数组大小”，以便输出为： * { 1, 3, 2, 4, ?, ?, 3, 2, 5, 6, 3, 4 } *

我想我可以为下一个写作位置使用一个共享变量 POSITION。

线程 1 到达写入点（计算新数组后）。线程 1 在共享变量 POSITION 中写入他的数组大小 (4)。

当线程 1 现在将他的临时数组写入输出数组时，线程 2 读取变量 POSITION 并添加他的 tmp。数组大小 (6) 到这个变量，并从线程 1 结束的位置开始写入

如果有线程 3，他还将读取 POSITION，添加他的数组大小并写入输出，线程 2 结束

所以有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T21:37:25.887

从概念上讲，您将如何使用共享数组来存储每个线程的索引来执行并发输出。

```
__global__ myThreadedFunction(float *int, float *out)
{

    __shared__ index[blockDim.x];//replace the size with an constant
    // do calculations with in values
    ...

    index[tid] = size;// assuming size is the size of the array you output
    //you could do a reduction on this for loop for better performance.
    for(int i = 1; i < blockDim.x; ++i) {
        __syncthreads();
        if(tid == i) {
            index[tid] += index[tid-1];
        }
    }
    int startposition = index[tid] - size; // you want to start at the start, not where the index ends

    //do your output for all threads concurrently where startposition is the first index you output to

} 
```

所以你要做的是分配`index[tid]`你想要输出的大小，`tid`线程索引在哪里`threadIdx.x`，然后向上求和数组（增加索引），最后`index[tid]`是你的输出数组中从线程0开始的偏移量起始索引。求和可以很容易地使用归约来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:45:27.827

此代码按您的预期工作。它同时读取`input[]`. 对于每个输入元素 ，它按照存储在 中的顺序`size`写入次数。`size``size``result``input[]`

请注意，写入过程可能比在 CPU 上执行此操作需要更长的时间。由于您已经知道每个线程要写入的数据大小，您可能希望使用[并行前缀和](http://en.wikipedia.org/wiki/Prefix_sum)先计算每个线程的写入位置，然后并发写入数据。

有关在代码中使用的更多信息，请参阅[Memory Fence Functions 。](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#memory-fence-functions)`__threadfence()`

```
#include <thrust/device_vector.h>
#include <thrust/device_ptr.h>

volatile __device__ int count = 0;
volatile __device__ int pos = 0;
__global__ void serial(const float* input, const int N, float* result)
{
    int id = threadIdx.x + blockIdx.x * blockDim.x;

    //parallel part
    int size = (int) input[id];

    //serial output
    for (int i = 0; i < N; i++)
    {
        int localcount = count;
        if (localcount == id)
        {
            int localpos = pos;
            for (int j = 0; j < size; j++)
            {
                result[localpos + j] = (float) j + 1;
            }
            pos = localpos + size;
            count = localcount + 1;
            __threadfence();
        }
        while (count == localcount)
        {
            __syncthreads();
        };

    }
}

int main()
{
    int N = 6;
    thrust::device_vector<float> input(
            thrust::counting_iterator<float>(1),
            thrust::counting_iterator<float>(1) + N);

    thrust::device_vector<float> result(N * (N + 1) / 2);
    serial<<<2, 3>>>(
            thrust::raw_pointer_cast(&input[0]),
            N,
            thrust::raw_pointer_cast(&result[0]));

    thrust::copy(
            result.begin(), result.end(),
            std::ostream_iterator<float>(std::cout, " "));

    return 0;

} 
```

按预期输出：

```
1 1 2 1 2 3 1 2 3 4 1 2 3 4 5 1 2 3 4 5 6 
```

# gwt - 使用 servlet 处理文件

> ID：14306338
> 
> 赞同：0
> 
> 时间：2013-01-13T17:49:17.553
> 
> 标签：gwt, servlets

我们可以在基于 Java 的 Web 应用程序中的 servlet 类中编写文件处理代码吗？如果可以，那么我应该在哪里创建该文件以及如何保持多个文件写入之间的同步？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:02:52.247

> 我们可以在基于 Java 的 Web 应用程序中的 servlet 类中编写文件处理代码吗？

是的，您可以像 Java Web 应用程序中的任何典型 servlet 一样创建和操作文件（位于您的服务器上）。

> 我应该在哪里创建该文件？

您必须在`***ServiceImpl.java`位于`*.*.*.server`package.json 的文件中进行文件操作操作。

> 如何保持多个文件写入之间的同步？

Servlet 不是线程安全的（[Servlet Specification JSR-315](http://jcp.org/en/jsr/summary?id=315)），您必须手动同步代码，另一种方法是实现`SingleThreadModel`接口，该接口要求容器保证服务方法中一次只有一个请求线程。

# php - WAMP & PHP - 访问桌面上的文件

> ID：14306339
> 
> 赞同：1
> 
> 时间：2013-01-13T17:49:38.500
> 
> 标签：php, windows, system, exec, wamp

我们在专用 Windows 服务器上使用 WAMP，基本上，我们在常规位置“C:\wamp\www”中安装了 WAMP。我们有一个文件 .json 文件，我们想要访问和解码，但我不知道如何从当前位置访问它？

我们已经尝试过：

```
$variable = exec("cat C:\\Users\\Administrator\\Desktop\\folder here\\players.json");
echo $variable; 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:53:16.667

我会包含一些逻辑来检查文件是否存在：

```
$path = 'C:\\Users\\Administrator\\Desktop\\folder here\\players.json';

if (file_exists($path)) {
  $exec = exec("cat $path");
  var_dump($exec);
} else {
  echo 'File does not exist';
} 
```

这将使您能够确定路径是否正确。如果你没有收到错误，你就知道你的 exec 命令有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:58:50.170

如果您只想阅读文件中的内容：

```
$path = 'C:\\Users\\Administrator\\Desktop\\folder here\\players.json';

if (file_exists($path)) {
    $content = file_get_contents($path);
    echo $content;
} else {
    echo 'File does not exist';
} 
```

# php - session.upload_progress.enabled 不在 php.ini 文件中

> ID：14306344
> 
> 赞同：-1
> 
> 时间：2013-01-13T17:50:28.857
> 
> 标签：php

我有 php 版本 5.4.3，但 session.upload_progress.enabled 不在我的 php.ini 中，如果我这样做：

```
$key = ini_get("session.upload_progress.prefix") . ini_get("session.upload-  
       progress.name");      }
echo $key; 
```

我得到“upload_progress_”这怎么可能，有什么我能做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:55:23.630

安装[PECL扩展uploadprogress](http://pecl.php.net/package/uploadprogress)

例如

```
$ pecl install uploadprogress 
```

# php - 如何在选择类别时将类别 ID 添加到另一个表？

> ID：14306350
> 
> 赞同：0
> 
> 时间：2013-01-13T17:51:32.933
> 
> 标签：php, mysql

我有两个表（ post ， category ）

```
CREATE TABLE post    
(pid INT(10) NOT NULL AUTO_INCREMENT,    
post_title VARCHAR(255),   
post_result VARCHAR(255),  
post_content VARCHAR(500), 
cid INT(10), 
PRIMARY KEY (pid),
FOREIGN KEY (cid) REFERENCES category(cid));   

CREATE TABLE category (  
cid INT(10) NOT NULL AUTO_INCREMENT,  
cname VARCHAR(50),  
PRIMARY KEY (cid)); 
```

这是我的插入语句：

```
$id = isset($_POST['pid'])?$_POST['pid']:'';
$title=$_POST['post_title'];
$result=$_POST['post_result'];
$content=$_POST['post_content'];
$catid=$_POST['cid'];
$cat=$_POST['cname'];
$insertquery="INSERT INTO review (pid,post_title,post_result,post_content)
VALUES('','$title','$result','$content')"; 
```

我面临的问题是，在我的 post 表中，每条记录的类别 id ( cid ) 的值都是 NULL。
如何使它存储所选类别的值。

这是我的表格：

```
<form id="create" action="insert.php" method="post">
<input type="text" name="post_title" placeholder="Title" /><br> 
<input type="text" name="post_result" placeholder="Final comment" /><br>
<textarea name="post_content" placeholder="Review" ></textarea><br>

    Category:
    <select name=cname>
    <option value="select"></option>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
    <option value="4">Option 4</option>
    <option value="5">Option 5</option>
        </select><br><br>

<input class="submit" name="submit" type="submit" value="Submit"/>

</form> 
```

帮助获得输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:19:52.297

**首先，**我希望您从 db 中填充您的类别选择，并且`value`属性包含类别 ID。话虽这么说，最好将`name`属性更改为`cid`（因为这是您在 POST 中所期望的）：

```
<select name="cid"> 
```

然后`var_dump($_POST)`将如下所示：

```
array(5) {
  ["post_title"]=>
  string(2) "aa"
  ["post_result"]=>
  string(2) "bb"
  ["post_content"]=>
  string(2) "cc"
  ["cid"]=>
  string(1) "2"
  ["submit"]=>
  string(6) "Submit"
} 
```

**其次**，您可以放弃以下 php 行：

```
$id = isset($_POST['pid'])?$_POST['pid']:'';
$cat=$_POST['cname']; 
```

因为您不使用表单发送这些值并且不使用它们。

**第三**，您需要更正您的插入语句

```
$insertquery="INSERT INTO post (post_title,post_result,post_content,cid)
              VALUES('$title','$result','$content','$catid')"; 
```

其他注意事项：

*   您最好确保在客户端选择了类别名称，否则尝试将记录插入`post`.
*   正如 a1ex07 提到的，您需要在放入 db 之前检查并清理所有用户输入
*   切换到准备好的语句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:03:13.703

假设类别名称是唯一的，您可以这样做

```
$insertquery="INSERT INTO review (pid,post_title,post_result,post_content,cid)
VALUES('','$title','$result','$content', 
 (SELECT cid FROM category WHERE cname ='$cname'))" 
```

您还需要转义来自用户的所有变量（首选方法是使用 pdo 或 mysqli）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T18:04:00.273

在您的`INSERT`查询中，您忘记添加以下值`cname`：

```
$insertquery="INSERT INTO review (pid,post_title,post_result,post_content,cid)
VALUES('','$title','$result','$content',$cname)"; 
```

# java - Java：更改的接口是否需要新的包名称？

> ID：14306351
> 
> 赞同：2
> 
> 时间：2013-01-13T17:51:43.913
> 
> 标签：java, architecture, domain-driven-design, package, bounded-contexts

由于在我的应用程序中对“有界上下文”（Eric Evan 的域驱动设计）进行了重大重构和重新架构，一些有界上下文的*已发布接口*及其方法在命名和语义上发生了变化（此处的*已发布接口*意味着该接口是从另一个有界上下文）。

我现在正在实现这个更新的有界上下文，我必须决定我更改的接口的包命名。

*   我应该保留旧名称吗？`my.company.old.package.name`
*   我应该添加版本号吗？`my.company.old.package.name.2`
*   ?

在我的具体情况下，由于更新的限界上下文仅在我自己的应用程序中使用，并且所有其他客户端限界上下文很少，因此也可以更改这些客户端限界上下文以适应任何新的名称和语义。

通常，可能有一些标准/指标/经验法则/最佳实践可以帮助我决定包名称。你的是什么？

# iphone - 每月添加一次本地通知 iPhone

> ID：14306354
> 
> 赞同：0
> 
> 时间：2013-01-13T17:51:54.533
> 
> 标签：iphone, objective-c, cocoa-touch

我正在使用以下代码

```
UILocalNotification *localNotification = [[UILocalNotification alloc] init];
localNotification.fireDate = fireDate;
localNotification.timeZone = [NSTimeZone defaultTimeZone];

localNotification.alertBody = @"Have you seen your Chiropractic this Month?";
localNotification.alertAction = @"Continue";
localNotification.repeatInterval = NSMonthCalendarUnit;

localNotification.applicationIconBadgeNumber = 0;

// Schedule it with the app
[[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
[localNotification release]; 
```

我如何设置“fireDate”以便此通知仅在每月 5 号运行。其次，此代码位于 appDelegate.h 中。我将如何设置它以便它每月只启动一个通知

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:47:42.973

我猜这个问题实际上是我如何创建一个日期对象来开始

你可以从这样的事情开始

```
NSCalendar *calender = [NSCalendar currentCalendar];
calender.timeZone = [NSTimeZone timeZoneWithName:@"GMT"];

NSDateComponents *components = [calender components:NSMonthCalendarUnit | NSYearCalendarUnit fromDate:[NSDate date]];
components.day    = 5;
components.hour   = 12;
components.minute = 30;

NSDate *fireDate = [calender dateFromComponents:components]; 
```

# css - 在 CSS3 属性值中使用前导 $

> ID：14306358
> 
> 赞同：0
> 
> 时间：2013-01-13T17:52:12.550
> 
> 标签：css

最近我在一个例子中发现了以下CSS3

```
#sidebar {
........
}

#container {
left: $sidebar-width;
} 
```

这似乎是说 - 使用标识为**侧边栏**的对象中的宽度属性的值作为属性值。谁能指出我描述此语法的权威文档或以其他方式解释此语法的意图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:53:56.143

提供的代码是[SASS（实际上是 SCSS）](http://sass-lang.com/)或伪代码，用于表示`width`由`#sidebar`.

# python - 性能：异步请求处理程序，阻塞任务由工作池处理

> ID：14306360
> 
> 赞同：3
> 
> 时间：2013-01-13T17:52:22.520
> 
> 标签：python, asynchronous, tornado

此脚本的性能如何：http: [//tornadogists.org/2185380/](http://tornadogists.org/2185380/)复制如下。

```
from time import sleep
from tornado.httpserver import HTTPServer
from tornado.ioloop import IOLoop
from tornado.web import Application, asynchronous, RequestHandler
from multiprocessing.pool import ThreadPool

_workers = ThreadPool(10)

def run_background(func, callback, args=(), kwds={}):
    def _callback(result):
        IOLoop.instance().add_callback(lambda: callback(result))
    _workers.apply_async(func, args, kwds, _callback)

# blocking task like querying to MySQL
def blocking_task(n):
    sleep(n)
    return n

class Handler(RequestHandler):
    @asynchronous
    def get(self):
        run_background(blocking_task, self.on_complete, (10,))

    def on_complete(self, res):
        self.write("Test {0}<br/>".format(res))
        self.finish()

HTTPServer(Application([("/", Handler)],debug=True)).listen(8888)
IOLoop.instance().start() 
```

1.  我的应用程序将超过**1,000 req/sec**。
2.  每个请求将持续 2-30 秒，平均约 6 秒
    *   简单地平均`sleep(6)`
3.  通过使用类似的东西来阻止 IO`redis BLPOP`或`Queue.get_nowait()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-26T04:16:19.567

整体模式很好，但需要注意的是，由于 GIL，您的线程池将只能使用单个 CPU，并且您需要使用多个进程才能充分利用可用硬件。

仔细看看这些数字，如果您的请求真的平均每个 6 秒，那么 10 个线程就太小了。您每秒有 6000 秒的工作量，因此您的所有进程总共需要至少 6000 个线程（假设 6 秒实际上只是阻塞外部事件和 python 进程中的 CPU 成本）可以忽略不计）。我不确定现代系统可以处理多少个线程，但是 6000 个 Python 线程听起来并不是一个好主意。如果每个请求确实有 6 秒的阻塞时间（以及数千个请求/秒），那么将这些阻塞函数转换为异步函数听起来是值得的。

# asp.net-mvc-3 - MVC 书呆子晚餐 CreateView 不显示 EventDate

> ID：14306364
> 
> 赞同：1
> 
> 时间：2013-01-13T17:52:50.567
> 
> 标签：asp.net-mvc-3, nerddinner

我目前正在使用 MVS 2010 浏览 MVC 教程 Nerd Dinner 我已经到了第 7 步，但我刚刚注意到，当我现在进入创建屏幕时，它并不完全正确。

1.  标题输入框似乎包含`ViewBag.Title`而不是空白。
2.  输入框为`EventDate`空白时应自动设置为从现在起7天。

我不记得在教程的前面是这样的。

这是`DinnersController.cs`处理 Create 的代码片段：

```
 //
    // GET: /Dinners/Create

    public ActionResult Create()
    {
        Dinner dinner = new Dinner()
        {
            EventDate = DateTime.Now.AddDays(7)
        };

        return View(new DinnerFormViewModel(dinner));
    }

    //
    // POST: /Dinners/Create

    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Create(Dinner dinner)
    {
        if (ModelState.IsValid)
        {
            try
            {
                dinner.HostedBy = "SomeUser";

                dinnerRepository.Add(dinner);
                dinnerRepository.Save();

                return RedirectToAction("Details", new { id = dinner.DinnerID });
            }
            catch
            {
                ModelState.AddModelErrors(dinner.GetRuleViolations());
            }

        }

        return View(new DinnerFormViewModel(dinner));
    } 
```

这是视图 Create.cshtml

```
@model NerdDinner.Models.DinnerFormViewModel

@{
    ViewBag.Title = "Host a Dinner";
}

<h2>Host a Dinner</h2>

@Html.ValidationSummary("Please correct the errors and try again")

@using (Html.BeginForm()) {

    <fieldset>
        <p>
            @Html.LabelFor(model => Model.Dinner.Title)
            <br />
            @Html.TextBox("Title")
            @Html.ValidationMessage("Title", "*")
        </p>
        <p>
            @Html.LabelFor(model => Model.Dinner.EventDate)
            <br />
            @Html.TextBox("EventDate")
            @Html.ValidationMessage("EventDate", "*")
        </p>
        <p>
            @Html.LabelFor(model => Model.Dinner.Description)
            <br />
            @Html.TextArea("Description")
            @Html.ValidationMessage("Description", "*")
        </p>
        <p>
            @Html.LabelFor(model => Model.Dinner.Address)
            <br />
            @Html.TextBox("Address")
            @Html.ValidationMessage("Address", "*")
        </p>
        <p>
            @Html.LabelFor(model => Model.Countries)
            <br />
            @Html.DropDownList("Country", Model.Countries)
            @Html.ValidationMessage("Country", "*")
        </p>
        <p>
            @Html.LabelFor(model => Model.Dinner.ContactPhone)
            <br />
            @Html.TextBox("ContactPhone")
            @Html.ValidationMessage("ContactPhone", "*")
        </p>
        <p>
            @Html.LabelFor(model => Model.Dinner.Latitude)
            <br />
            @Html.TextBox("Latitude")
            @Html.ValidationMessage("Latitude", "*")
        </p>
        <p>
            <label for="Longitude">Longitude:</label>
            <br />
            @Html.TextBox("Longitude")
            @Html.ValidationMessage("Longitude", "*")
        </p>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

最后是浏览器中的输出：

![输出](../Images/efb19b30aa3e138aabc76d4566eaa097.png)

有人知道我错过了什么吗？

**编辑 - 添加晚餐模型**

```
using System;
using System.Collections.Generic;
using System.Data.Linq;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Text; //added this - not in tut
using System.Text.RegularExpressions; //added this - not in tut

namespace NerdDinner.Models
{
    [Bind(Include = "Title,Description,EventDate,Address,Country,ContactPhone,Latitude,Longitude")]
    public partial class Dinner
    {

        public bool IsValid
        {
            get { return (GetRuleViolations().Count() == 0); }
        }

        public IEnumerable<RuleViolation> GetRuleViolations()
        {
            if (String.IsNullOrEmpty(Title))
                yield return new RuleViolation("Title required", "Title");

            if (String.IsNullOrEmpty(Description))
                yield return new RuleViolation("Description required", "Description");

            if (String.IsNullOrEmpty(HostedBy))
                yield return new RuleViolation("HostedBy required", "HostedBy");

            if (String.IsNullOrEmpty(Address))
                yield return new RuleViolation("Address required", "Address");

            if (String.IsNullOrEmpty(Country))
                yield return new RuleViolation("Country required", "Country");

            if (String.IsNullOrEmpty(ContactPhone))
            {
                yield return new RuleViolation("ContactPhone required", "ContactPhone");
            }
            else
            {
                if (!PhoneValidator.IsValidNumber(ContactPhone, Country))
                    yield return new RuleViolation("Phone# does not match country", "ContactPhone");
            }

                yield break;
        }

        partial void OnValidate(ChangeAction action)
        {
            if (!IsValid)
                throw new ApplicationException("Rule voilations prevent saving");
        }

    }

    public class RuleViolation
    {
        public string ErrorMessage { get; private set; }
        public string PropertyName { get; private set; }

        public RuleViolation(string errorMessage, string propertyName)
        {
            ErrorMessage = errorMessage;
            PropertyName = propertyName;
        }
    }

    public class PhoneValidator
    {
        static IDictionary<string, Regex> countryRegex = new Dictionary<string, Regex>()
        {
            { "USA", new Regex("^[2-9]\\d{2}-\\d{3}-\\d{4}$")},
            { "UK", new Regex("(^1300\\d{6}$)|(^1800|1900|1902\\d{6}$)|(^0[2|3|7|8]{1}[0-9]{8}$)|(^04\\decimal{2,3}\\decimal{6}$)")},
            { "Netherlands", new Regex("(^\\+[0-9]{2}|^\\+[0-9]{2}\\(0\\)|^\\(\\+[0-9]{2}\\)\\(0\\)|^00[0-9]{2}|^0)([0-9]{9}$|[0-9\\-\\s]{10}$)")},

        };

        public static bool IsValidNumber(string phoneNumber, string country)
        {
            if (country != null && countryRegex.ContainsKey(country))
                return countryRegex[country].IsMatch(phoneNumber);
            else
                return false;
        }

        public static IEnumerable<string> Countries
        {
            get
            {
                return countryRegex.Keys;
            }
        }
    }

    public class DinnerFormViewModel
    {

        // Properties
        public Dinner Dinner { get; private set; }
        public SelectList Countries { get; private set; }

        // Contructor
        public DinnerFormViewModel(Dinner dinner)
        {
            Dinner = dinner;
            Countries = new SelectList(PhoneValidator.Countries, dinner.Country);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:56:00.227

你应该使用`@Html.TextboxFor`而不是`@Html.Textbox`

```
<p>
            @Html.LabelFor(model => Model.Dinner.EventDate)
            <br />
            @Html.TextBoxFor(model => Model.Dinner.EventDate)
            @Html.ValidationMessageFor(model => Model.Dinner.EventDate)
        </p> 
```

基本`@Html.Textbox`将呈现一个文本框，其名称属性在您传递的字符串中指定。MVC 将查看 ViewBag 以查看是否有任何带有该键的项目来填充文本框（这就是您的 Title 属性使用视图顶部的页面标题的原因），但不会将视图输入绑定到实际模型或随模型发送的任何预填充数据。通过使用 TextBoxFor（或 labelFor 等），这会将输入与实际模型属性联系起来。这也是 DataAnnotations 应用于表单的方式。我所说的最后一句话是这个意思。假设这是您模型的一部分

```
public class DinnerViewModel{
  [DisplayName("Dinner Location")]
  [Required(ErrorMessage="You must specify a location")]
  public string Location {get;set;}
} 
```

在您看来，您将使用 @Html.*For 方法呈现您需要的部分（就像您做标签一样）

```
<p>
   @Html.LabelFor(model => Model.Location )
   <br />
   @Html.TextBoxFor(model => Model.Location)
   @Html.ValidationMessageFor(model => Model.Location )
</p> 
```

应该像这样呈现一些 HTML（不包括错误消息）

```
<p>
  <label for="Location">Dinner Location</label>
  <br/>
  <input type="text" name="Location" id="Location"/>
  *the validation related stuff*
</p> 
```

**附录**

为了使您的验证与您正在使用的方法一起工作，您必须稍微更改您的 yield return 语句。如果您仔细查看 HTML 源代码中实际晚餐对象的属性的 id，您会发现它们呈现为“ `Dinner.Title`”或“ `Dinner.Description`”。这是因为这就是它们在模型中的存储方式（记得使用`model => Model.Dinner.EventDate`吗？）这将呈现一个 id 为 ' `Dinner.EventDate`' 的元素。

鉴于此，您需要更新从模型的 RuleViolation 部分返回的字符串：

```
public IEnumerable<RuleViolation> GetRuleViolations()
        {
            if (String.IsNullOrEmpty(Title))
                yield return new RuleViolation("Title required", "Dinner.Title");

            if (String.IsNullOrEmpty(Description))
                yield return new RuleViolation("Description required", "Dinner.Description");

            if (String.IsNullOrEmpty(HostedBy))
                yield return new RuleViolation("HostedBy required", "Dinner.HostedBy");

            if (String.IsNullOrEmpty(Address))
                yield return new RuleViolation("Address required", "Dinner.Address");

            if (String.IsNullOrEmpty(Country))
                yield return new RuleViolation("Country required", "Country");

            if (String.IsNullOrEmpty(ContactPhone))
            {
                yield return new RuleViolation("ContactPhone required", "Dinner.ContactPhone");
            }
            else
            {
                if (!PhoneValidator.IsValidNumber(ContactPhone, Country))
                    yield return new RuleViolation("Phone# does not match country", "Dinner.ContactPhone");
            }

                yield break;
        } 
```

现在，您的 RuleViolations 将匹配实际的输入 ID，一切都将再次闪亮和令人敬畏。这似乎有点工作，但由于您正在学习教程，我不想过多地推动您的方式。但是，当您探索 .NET MVC 实现时，您会发现其他方法可以以不那么冗长的方式完成相同的任务。坚持下去！

# android - 如何在单个应用程序中有多个 BROWSABLE 活动？

> ID：14306371
> 
> 赞同：2
> 
> 时间：2013-01-13T17:53:53.800
> 
> 标签：android, android-intent, android-activity, android-manifest, intentfilter

我有一个包含 2 个活动的应用程序，应该响应`android.intent.action.VIEW`. 它们的定义就像在清单中一样

```
<activity android:name=".FirstActivity">
    <intent_filter>
        <action android:name="android.intent.action.VIEW"/>
        <category android:name="android.intent.category.BROWSABLE"/>
        <data android:scheme="my_callback1"/>
    </intent_filter>
</activity>
<activity android:name=".SecondActivity">
    <intent_filter>
        <action android:name="android.intent.action.VIEW"/>
        <category android:name="android.intent.category.BROWSABLE"/>
        <data android:scheme="my_callback2"/>
    </intent_filter>
</activity> 
```

`my_callback1`默认情况下启动浏览器活动。这是一个 Twitter 授权回调，所以它可能是这样的

浏览器被重定向到 url`my_callback1://callback?token=0123456789abcdef`

`my_callback2`由自定义`Linkify`过滤器启动，如下所示：

```
Linkify.addLinks(textView, pattern, null, matcher, new Linkify.TransformFilter() {
    @Override
    public String transformUrl(Matcher match, String url) {
    return "my_callback2://".concat(url);
    }
}); 
```

并且两个回调都不起作用，IF`android.intent.category.DEFAULT`没有添加到意图过滤器中。如果`DEFAULT`添加到任何一个意图过滤器，相应的回调开始正常工作。如果同时对两者都设置为 none - 所有回调都不起作用（我收到`android.content.ActivityNotFoundException`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-28T10:15:45.590

我对这个问题的回答对于最初的提问者来说有点晚了，但这个特定的问题非常值得回答，但却被误解了。我还在努力让多个活动可浏览，以便处理从网页重定向回我应用程序的不同部分。这在 android 中基本上是不受支持的，因为为了使活动可浏览，您还必须将其设为默认值，这意味着您不能拥有多个可浏览活动。如果您将多个活动标记为可浏览并默认，则无法创建正确区分的意图 URI，因为在解压缩 uri 时会忽略组件信息。

但是，当您从浏览器获取意图时，您可以接受参数并使用它们让新的 BrowsableActivity 启动您最初想要启动的活动。浏览器必须点击如下所示的链接：

```
<a href="intent:#Intent;component=my.app.package/.activity.BrowsableActivity;S.my.app.package.activity.BrowsableActivity.PARAMETER_NAME=activityName;end"> 
```

关键是为您的应用创建一个新的 BrowsableActivity。*将仅为*该活动的意图过滤器设置为BROWSABLE ，如下所示：

```
<activity android:name="BrowsableActivity">
    <intent_filter>
        <action android:name="android.intent.action.VIEW"/>
        <category android:name="android.intent.category.BROWSABLE"/>
        <category android:name="android.intent.category.DEFAULT"/>
        <category android:name="android.intent.category.LAUNCHER"/>
    </intent_filter>
</activity> 
```

然后在 Activity 的代码中解压缩参数：

```
 @Override
   protected void onCreate(Bundle savedInstanceState) {
    Intent intent = getIntent()
    String otherActivityName = (String) intent.getSerializableExtra(PARAMETER_NAME);
    if (otherActivityName == firstOne) {
       // create an intent and launch the first activity
    } else {
      // create an intent and launch the other activity
    }
  } 
```

现在，您可以从可浏览的活动中启动您想要的任何活动，如有必要，您也可以将额外的参数传递给该活动，只需将它们从 BrowsableActivity 的意图中解压缩并将其传递给其他活动即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T16:12:29.953

我刚刚遇到了这个问题，并根据其中一条评论将 DEFAULT 添加到每个意图过滤器中。这似乎对我有用。所以每个活动的意图过滤器都有：

```
<action android:name="android.intent.action.VIEW" />
<category android:name="android.intent.category.DEFAULT" />
<category android:name="android.intent.category.BROWSABLE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T07:48:26.317

浏览器添加`android.intent.category.BROWSABLE`到`Intent`它启动的 s 中。因此，如果您希望 Intent 解析起作用，则需要在过滤器中包含该类别。

从[文档中`IntentFilter`](http://developer.android.com/reference/android/content/IntentFilter.html)：

> 如果 Intent 中的所有类别都与过滤器中给定的类别匹配，则类别匹配。过滤器中不在 Intent 中的额外类别不会导致匹配失败。请注意，与操作不同，`IntentFilter`没有类别的 an 只会匹配`Intent`没有任何类别的 an。

# java - Java 线程可见性 - 无需显式同步的可见性最佳实践

> ID：14306374
> 
> 赞同：1
> 
> 时间：2013-01-13T17:54:02.320
> 
> 标签：java, multithreading, visibility

当 java 线程相互通信但不需要显式同步时（因此不需要在对象上调用 synchronize 来同步执行），确保所涉及线程之间适当可见性的最佳实践是什么？

例如：

```
class B extends Thread {
     ...
     A instanceOfA = ...;

     B(){
          instanceOfA.registerHandler(new Handler(){
               @Override
               handle(SomeObjectToBeVisibile o){
                  ...
               }
          });
     }
}

class A extends Thread {
     ...
     void registerSomeHandlerMethod(HandlerMethod handler){...}

     void executeHandlers(){
          for(each registered handler){
              handler.handle(instanceOfSomeObjectToBeVisible); 
          }

     }
} 
```

如果我没记错的话，处理程序“handle”方法调用传递一些构造对象可能存在潜在的可见性问题，这些构造对象可能在接收线程中以正确的方式不可见（例如，陈旧的值），对吧？如果是，如何在不使用同步的情况下强制可见性？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T18:00:43.800

应该可以使用 volatile 修饰符，但是我建议使用[AtomicReference](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicReference.html)

此外，如果您要传递一个不可变的对象 - 那么根本不会出现问题，因为最终字段保证在构造函数结束执行之前被初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:22:42.947

不要害怕同步，如果同步块小而快，这在你的情况下是正确的，lock-unlock 不会引起任何问题。

您可以使用“无锁”并发数据结构，例如 ConcurrentLinkedQueue。（你的情况不会快很多）

编辑：看起来您担心传递给的参数的可见性`handle()`，而不是处理程序本身。

# android - Android 我的应用权限

> ID：14306377
> 
> 赞同：0
> 
> 时间：2013-01-13T17:54:17.593
> 
> 标签：android

我创建了 2 个简单的项目。首先，我允许显示：

```
<permission android:name="com.example.MODULE"
            android:label="Example module"
            android:protectionLevel="dangerous" />
<application android:label="@string/app_name" android:theme="@style/Theme.Sherlock.Light" android:icon="@drawable/ic_launcher">
    <activity android:name="MyActivity"
              android:label="@string/app_name"
              android:exported="true"
              android:excludeFromRecents="true">
<intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <action android:name="com.example.graph.SHOW"/>
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter> 
```

在第二个项目中：

```
<uses-permission android:name="com.example.MODULE" / 
```

但是如果我从第二个项目中删除使用权限，然后开始活动：

```
startActivity(new Intent("com.example.graph.SHOW")) 
```

第一个项目 - 它仍在开始。但为什么？未经许可如何启动？如何使用权限正确保护我的第二个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:57:43.410

您不需要权限即可启动应用程序。您可以运行所有应用程序而无需向开发人员询问权限。例如，我可以在不询问开发人员的情况下运行此代码（启动著名的条形码扫描仪）。

```
Intent intent = new Intent("com.google.zxing.client.android.ENCODE");
intent.putExtra("ENCODE_TYPE", "TEXT_TYPE");
intent.putExtra("ENCODE_DATA", output);
intent.putExtra("ENCODE_FORMAT", "QR_CODE");
intent.putExtra("ENCODE_SHOW_CONTENTS", false); 
```

# android - Android 下 Firefox 中如何使用功能键？

> ID：14306381
> 
> 赞同：0
> 
> 时间：2013-01-13T17:54:50.443
> 
> 标签：android, firefox, keyboard

我有一个 HTML 应用程序，我试图在最新的 Firefox beta（移动）下在 Android 上使用。但是，我遇到了几个需要解决方案的问题。

1.  我的 Android 设备（电话）除了字母、数字和标点之外几乎没有按键，但我的 HTML 应用程序严重依赖键盘来执行各种操作。例如，电话上不存在的插入键和功能键。

2.  我可以用 Hacker 的键盘解决这个问题，因为它提供了这些功能键，但我无法启动键盘，除非我点击文本字段。如果没有文本字段，即使页面正在侦听键，我也无法启动键盘。如何在需要时强制键盘出现？

3.  即使有一个文本字段并且我点击它并且黑客的键盘出现了，当我使用它点击一个功能键时，我也没有得到任何键盘事件。我知道它说某些应用程序可能没有响应，但我希望 Firefox 会，因为 javascript 需要它。我如何获得活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:25:27.203

您可以在 Hacker's Keyboard 中激活“显示持久通知”设置。这会添加一个通知图标，点击它会无条件地打开键盘。

这仍然不是您问题的完整解决方案 - 上次我尝试这个时，光标键仍然只是移动屏幕内容并且没有被报告为 Javascript 的关键事件。

# wget - 如何使用 wget 重命名下载的文件？

> ID：14306382
> 
> 赞同：93
> 
> 时间：2013-01-13T17:54:56.653
> 
> 标签：wget, file-rename

要从服务器下载 SOFA 统计信息，我使用 wget 命令：

```
wget -c http://sourceforge.net/projects/sofastatistics/files/latest/download?source=dlp 
```

在这种情况下，下载文件的文件名是`download?source=files`. 如果我`--output-document`在命令中添加选项，将输出文件重命名为`sofastatistics-latest.deb`，则 dpkg 包无法识别下载文件的格式。

```
dpkg-deb: error: `sofastatistics-latest.deb' is not a debian format archive 
```

如何使用 wget 正确重命名下载的文件？

**更新 - 2015 年*1 月 8 日***

通过提供的链接，下载的文件始终是 *.tar.gz 文件。要使用真实姓名，只需添加以下`--content-disposition`选项（感谢@6EQUJ5！）：

```
wget --content-disposition http://sourceforge.net/projects/sofastatistics/files/latest/download?source=dlp 
```

但是我需要一个 *.deb 文件，所以这里是 @creaktive，我必须搜索 *.deb 文件链接。

感谢大家的回答！

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-01-13T18:01:40.333

将标准输出重定向到任意文件名总是有效的。**正如man wget**所说，你正在正确地使用 -O

```
wget http://www.kernel.org/pub/linux/kernel/README -O foo
--2013-01-13 18:59:44--  http://www.kernel.org/pub/linux/kernel/README
Resolving www.kernel.org... 149.20.4.69, 149.20.20.133
Connecting to www.kernel.org|149.20.4.69|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 12056 (12K) [text/plain]
Saving to: `foo'

100%[======================================================================================================================================>] 12,056      --.-K/s   in 0.003s  

2013-01-13 18:59:45 (4.39 MB/s) - `foo' saved [12056/12056] 
```

实际上，您必须在文件中获取 HTML（通常可以使用**man file**检查）。

**[编辑]**

在您的情况下，客户端收到*302 Found*（您可以使用**curl -v URL**检查它）。

以下 curl 通过尊重 3xx 来解决问题：

```
$ curl -L http://sourceforge.net/projects/sofastatistics/files/latest/download?source=files -o foo.deb
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0   463    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0
  0     0    0     0    0     0      0      0 --:--:--  0:00:02 --:--:--     0
100 2035k  100 2035k    0     0   390k      0  0:00:05  0:00:05 --:--:-- 1541k
$ file foo.deb 
foo.deb: gzip compressed data, was "sofastats-1.3.1.tar", last modified: Thu Jan 10 00:30:44 2013, max compression 
```

**wget**应该有类似的选项来容忍 HTTP 重定向。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-01-07T09:36:00.053

如果您要从 Web 浏览器进行相同的下载，并且您注意到浏览器实际上正确命名了文件，则可以使用该`--content-disposition`选项为 wget 提供相同的行为：

```
wget --content-disposition http://sourceforge.net/projects/sofastatistics/files/latest/download?source=dlp 
```

我的 Debian 手册页将此报告为“实验性”功能，但我不记得它对我不起作用：

```
 --content-disposition
           If this is set to on, experimental (not fully-functional) support for "Content-Disposition" headers is enabled. This can currently result in extra round-trips to the server
           for a "HEAD" request, and is known to suffer from a few bugs, which is why it is not currently enabled by default.

           This option is useful for some file-downloading CGI programs that use "Content-Disposition" headers to describe what the name of a downloaded file should be. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T18:01:22.040

该链接指向重定向器，而不是最终目的地！因此，您正在下载 HTML 并将其重命名为`.deb`. 杂乱的页面顶部有这个：

> 您的下载将在 0 秒后开始... 下载有问题？请使用此[直接链接](http://downloads.sourceforge.net/project/sofastatistics/sofastatistics/1.3.1/sofastats-1.3.1_for_mac.zip?r=&ts=1358099896&use_mirror=ufpr)，或尝试其他[镜像](http://sourceforge.net/settings/mirror_choices?projectname=sofastatistics&filename=sofastatistics/1.3.1/sofastats-1.3.1_for_mac.zip)。

现在，*这*是一个有效的链接（注意`download`前缀）： http: [//downloads.sourceforge.net/project/sofastatistics/sofastatistics/1.3.1/sofastats-1.3.1-1_all.deb ?r=http%3A%2F %2Fsourceforge.net%2Fprojects%2Fsofastatistics%2Ffiles%2Fsofastatistics%2F1.3.1%2F&ts=1358119361&use_mirror=ufpr](http://downloads.sourceforge.net/project/sofastatistics/sofastatistics/1.3.1/sofastats-1.3.1-1_all.deb?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Fsofastatistics%2Ffiles%2Fsofastatistics%2F1.3.1%2F&ts=1358119361&use_mirror=ufpr)

将此 URL 传递给`wget`. 另外，请注意，SourceForge 试图超越您，通过 User-Agent 字符串来访问操作系统。“wget”的最佳猜测似乎是 .tar.gz 包。所以，你应该更具体，请求 deb 文件！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-11T16:50:13.670

这对我有用

*   在 macOS 上，我`wget`通过 Homebrew 安装了这个`brew install wget`
*   然后我执行这个`wget -O ~/Downloads/file.txt https://www.gnu.org`
*   或者这是一样的`wget --output-document ~/Downloads/fil.txt https://www.gnu.org`

# excel - 字节到文本的转换

> ID：14306387
> 
> 赞同：0
> 
> 时间：2013-01-13T17:55:37.290
> 
> 标签：excel, function, automation, formula

为了方便起见，我目前正在做一些事情，将数字和字符的字符串转换为其相应的值。可以说我有字符串

```
"712031ABCD        N             1" 
```

每个字节对应一个我喜欢在 Excel 中自动化的值。我已经执行了函数 =LEFT(a1,1) 来获取字符串的第一个字节， =mid(a1,2,1) 获取第二个字节，依此类推。

我需要做的就是转换从 =left(a1,1) 填充的值，如果它的值为 7，假设为 APPLE。如果值为 8，则为橙色，依此类推。同样适用于其他字节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:07:05.480

您可以将地址公式与由单元格组成的转换表一起使用（例如，H 列中的所有单元格都包含字节的字节内容的值）并使用左/中公式获得的字节来引用它。

```
 H
7   Apple
8   Orange

Your cell: =address(left(a1,1),8) 
```

8 是我随机选择的 H 列来保存转换表。

# flash - Flash IDE Stage3d 和硬件加速设置

> ID：14306389
> 
> 赞同：0
> 
> 时间：2013-01-13T17:55:52.823
> 
> 标签：flash, gpu, stage3d

使用 Flash IDE 发布 Stage3D（启用 GPU）项目时，Flash 中有一个用于硬件加速的选项。

我的问题是，如果更改此设置对您的应用程序利用 GPU 的能力有什么影响（如果有的话）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:34:37.710

如果 HTML 嵌入包含 wmode=direct，Stage3D 只能在视频硬件上运行。如果您使用的是 Stage3D，则**必须**使用“Level 1 - Direct”选项。

以下是这些选项的说明：

级别 1 – 直接：直接模式通过允许 Flash Player 直接在屏幕上绘制而不是让浏览器进行绘制来提高播放性能。

级别 2 – GPU：在 GPU 模式下，Flash Player 利用显卡的可用计算能力来执行视频播放和分层图形的合成。根据用户的图形硬件，这提供了另一个级别的性能优势。如果您希望目标受众在查看 SWF 文件时拥有高端显卡，请使用此选项。

[Flash Professional 帮助/发布设置](http://helpx.adobe.com/flash/using/publish-settings-cs5-5.html)

[Flash 词汇表：硬件加速](http://www.adobe.com/devnet/flash/articles/concept_hardware_accel.html)

[wmode 参数揭秘](http://labs.almerblank.com/2011/03/the-wmode-embed-parameter-de-mystified/)

[Flash 11 Stage3D 教程](http://www.mcfunkypants.com/2011/flash11-stage3d-tutorial-handling-init-errors/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T10:28:10.783

我还想添加这篇博文，因为它有一些非常有用且解释清楚的信息。 [http://www.kaourantin.net/2008/05/what-does-gpu-acceleration-mean.html](http://www.kaourantin.net/2008/05/what-does-gpu-acceleration-mean.html)

# jquery - 如果在 div 中单击 div，则防止 jquery 单击功能

> ID：14306393
> 
> 赞同：1
> 
> 时间：2013-01-13T17:56:01.777
> 
> 标签：jquery, html, css, twitter-bootstrap

我在自己的背景下使用 twitters bootstrap 模态，这样模态的行为就像 Pinterest 模态（body-noscroll 和滚动条匹配模态高度）。

我关闭模式的代码是：

```
$(".modal-container").click(function(e) {
    $('.modal-container .modal').modal('hide');
});
$('.modal').live('hidden', function () {
    $('body').removeClass('noscroll');
    $('.modal-container').hide();
}); 
```

但是，当用户单击内部`.modal`时，此功能仍然运行，这是我不想要的。任何人都可以帮忙吗？

谢谢。

所以html是：

```
<div class="modal-container">
    <div class="modal">
        Content
    </div>
</div> 
```

CSS是：

```
.modal-container {
    overflow-y: scroll;
    position: fixed;
    top: 0;
    right: 0;
    height: 100%;
    width: 100%;
}
.modal {
    position: absolute;
    margin-bottom: 150px;
    width: 630px;
    margin-left: -315px;
    border: 1px solid #e7e7e7;
    -webkit-border-radius: 0;
    -moz-border-radius: 0;
    border-radius: 0;
    z-index: 1052;
    cursor: default;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:59:11.037

*编辑了我的`e.stopPropagation`答案，因为它不适用于 OP 请求的事件委托*

正如@Adeneo 所评论的，一个通常更简单的解决方案是只检查[事件目标](http://api.jquery.com/event.target/)，即发起点击事件的元素是否对应于您将点击处理程序附加到的元素：

```
$(".modal-container").click(function(e) {
    if (e.target === this) $('.modal-container .modal').modal('hide');
}); 
```

# c# - 保存 PageTitle 文本块的当前属性和列表框的项目

> ID：14306395
> 
> 赞同：0
> 
> 时间：2013-01-13T17:56:17.550
> 
> 标签：c#, .net, windows-phone-7

我刚开始玩 WP7，我可能很容易遇到问题。在我的应用程序中，我正在浏览页面并同时发送字符串。以及问题的根源。我在这个页面上：

```
namespace Zakupy
{
    public partial class List : PhoneApplicationPage
    {

        public List()
        {
            InitializeComponent();

        }

        protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
        {
            base.OnNavigatedTo(e);

            string msg = "";
            string lister = "";
            string sklad = "";

              if (NavigationContext.QueryString.TryGetValue("msg", out msg))
                {
                    string name = "";
                    name = msg;
                    PageTitle.Text = name;
                }

            if (NavigationContext.QueryString.TryGetValue("add", out lister))
            {
                sklad = lister;
                listBox1.Items.Add(sklad);
            }

        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            NavigationService.Navigate(new Uri("/AddList.xaml", UriKind.Relative));
        }

    }
} 
```

从另一个页面导航。从那个页面我发送页面标题并设置它。到目前为止，它的工作正常。接下来我导航到下一页我将项目添加到列表框。在导航回到上面的页面时，我遇到了 2 个问题： 1\. 页面标题正在重置。2\. 列表框中的上一项被当前发送的一项替换> 我可能遗漏了一些非常简单的东西，但感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:42:28.827

OnNavigatedTo 总是在您的应用程序导航到它时调用，从 NavigationService 或当您点击“返回”按钮时。

您是否尝试测试您是否正在导航回来查看您的 QueryString 包含的内容，也许这包含您不想显示的数据。如果您在 NavigationEventArgs e 的属性中导航回来，您可以进行测试。

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);
        if (e.NavigationMode == System.Windows.Navigation.NavigationMode.Back)
        ...
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:47:45.463

好吧，我误会了。每次导航到页面时，都会创建一个新的页面实例（尝试在构造函数中放置断点）。

如果要跨页面保存数据，可以将数据存储在 app.cs 文件中。这仅创建一次，并且可在应用程序的整个生命周期内的所有页面中使用。

在您的 App.cs 文件中

```
 public partial class App: Application
 {
     public List <string> myList = new List <string> ();
     ... 
```

在您的 OnNavigationTo 处理程序中（仅显示用于处理列表）

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        if (e.NavigationMode != System.Windows.Navigation.NavigationMode.Back)
        {

            if (NavigationContext.QueryString.TryGetValue("add", out lister))
            {
                sklad = lister;
                ((App)Application.Current).myList.Add(sklad);
            }

            listBox1.ItemSource = ((App)Application.Current).myList;
        }
    } 
```

# java - JNA 如何将结构从 Java 传递到 C++ 方法？

> ID：14306398
> 
> 赞同：4
> 
> 时间：2013-01-13T17:56:31.370
> 
> 标签：java, jna

我正在使用 JNA 访问 DLL 库 (C++) 方法。

我要访问的方法具有以下签名：`int DownloadData(DateTime dateTime);`

```
Return Values
  COM_ERROR if an error occurs.
  0 if no new records to download.
  # of records transferred, if successful. 
```

, DateTime 是一个结构体（C++ 代码）：

```
struct DateTime
{
  int minute;
  int hour;
  int day;
  int month;
  int year;
}; 
```

我正在按照以下方式进行操作：

```
import com.sun.jna.FunctionMapper;
import com.sun.jna.Library;
import com.sun.jna.Native;
import com.sun.jna.NativeLibrary;
import com.sun.jna.Structure;
import java.lang.reflect.Method;
import java.util.HashMap;
import java.util.Map;

class JavaApplication1
{
     public static class DateTime extends Structure {
        public int minute;
        public int hour;
        public int day;
        public int month;
        public int year;
     } 
```

...

```
 public interface CLibrary extends Library
     {
        CLibrary INSTANCE = (CLibrary) Native.loadLibrary("LibPro", CLibrary.class, options);
        int DownloadData(DateTime dateTime);
     } 
```

...

```
 public static void main(String[] args)
     {
        DateTime dateTime = new DateTime();
          dateTime.day=1;
          dateTime.hour=0;
          dateTime.minute=0;
          dateTime.month=1;
          dateTime.year=2012;
        System.out.println("Record count : "+CLibrary.INSTANCE.DownloadData(dateTime));
     }
} 
```

但是我的代码没有返回传输了多少记录，而是返回-32704。库通常会返回这样的值，然后出现问题。

我在 JNA 方面做得对吗？我还能尝试什么？

感谢帮助！

**升级版**。如果我发送空值`CLibrary.INSTANCE.DownloadData(null)`，我会得到相同的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-06T20:53:30.387

如果您的本机方法期望结构是按值传递的，则需要声明并传递一个实现`Structure.ByValue`.

通常，您将定义一个附加类，如下所示：

```
public class DateTime extends Structure {
    public class ByValue extends DateTime implements Structure.ByValue { }
} 
```

然后您的映射声明如下所示：

```
int DownloadData(DateTime.ByValue dateTime); 
```

# c++ - VSTi 信封实现

> ID：14306399
> 
> 赞同：0
> 
> 时间：2013-01-13T17:56:56.220
> 
> 标签：c++, logic, vst, envelope

对于大学作业，我必须编写一个简单的 VSTi 加法合成器。我已经完成了大部分工作，但我无法让我的 ADSR 信封做任何事情。

我认为（并且绝对不确定）时间变量和/或决定信封阶段的逻辑导致它无法按预期运行。

如果信封的时间变量在 processReplacing() 循环中增加，则代码符合但主机崩溃。

当在每个 adsr 乘法中增加时间时，它会在主机中编译和运行，只是不能按预期工作。

我会认为在 processReplacing() 循环中增加时间是可行的，显然不是。

如果有人能看到导致信封不起作用的原因并能指出我正确的方向，我将不胜感激。

我真的不确定要附加哪些代码，所以已经完成了所有这些。

谢谢，

VST_Plug_in.h

```
#ifndef __VST_Plug_in__
#define __VST_Plug_in__

#include "audioeffectx.h"
#include <math.h>
#include "ADSR.h"
#include "timer.h"

const int NUMBER_OF_INPUTS = 0;
const int NUMBER_OF_OUTPUTS = 2;
const int NUMBER_OF_PROGRAMS = 0;
const int NUMBER_OF_PARAMETERS = 5;

enum
    {
    kGain,
    kAttack,
    kDecay,
    kSustain,
    kRelease
    };

// Base frequency (A4- 440Hz) for use in generating frequency table
    const float BASE_A4  = 440.0;
    const double PI = 3.14159265358979323846;

class VST_Plug_in : public AudioEffectX
{
public:
    VST_Plug_in (audioMasterCallback audioMaster);
    ~VST_Plug_in ();

    virtual void processReplacing (float** inputs, float** outputs, VstInt32 sampleFrames);
    virtual VstInt32 processEvents (VstEvents* events);
    virtual VstInt32 canDo (char* text);

    // MIDI data : holds data about current state of MIDI (note on/off, frequency, velocity)
    int keyDown;
    int* pkeyDown;

    long currentNote; // the MIDI note number of the last note on (key down)
    float currentVelocity; // current MIDI note velocity (0 -> 1)
    float *m_pfFrequencyTable; // will store a list of frequency values (for note->frequency conversion)

    double partial1, partial2, partial3, partial4, partial5, partial6, partial7, partial8, leftSample, rightSample;
    float maxAttack, minAttack, attack, maxDecay, minDecay, decay, minRelease, maxRelease, release, sustain, frequency, sampleRate, gain;
    long partialTime;

    void noteOff ();
    void noteOn (long liNote, long liVelocity);
    float getAttack(float value);
    float sendAttack();
    float getDecay(float value);
    float sendDecay();
    float getSustain(float value);
    float sendSustain();
    float getRelease(float value);
    float sendRelease();

    virtual void setParameter (VstInt32 index, float value);
    virtual float getParameter (VstInt32 index);
    virtual void getParameterLabel (VstInt32 index, char* label);
    virtual void getParameterDisplay (VstInt32 index, char* text);
    virtual void getParameterName (VstInt32 index, char* text); 

    ADSR env;
    timer universalTime;
    long* pTime;
};

#endif 
```

VST_Plug_in.cpp

```
//-------------------------------------------------------------------------------------------------------
// VST Plug-Ins SDK
// Version 2.4      $Date: 2005/11/15 15:14:03 $
// 
// Category     : VST 2.x SDK Samples
// Filename     : VST_Plug_in.cpp
// Created by   : Steinberg Media Technologies
// Description  : a crap additive synth
//
// © 2005, Steinberg Media Technologies, All Rights Reserved
//-------------------------------------------------------------------------------------------------------

#include "VST_Plug_in.h"
#include "audioeffectx.h"
#include <math.h>
#include "ADSR.h"
#include "timer.h"

AudioEffect* createEffectInstance (audioMasterCallback audioMaster)
{
    return new VST_Plug_in (audioMaster);
}

VST_Plug_in::VST_Plug_in (audioMasterCallback audioMaster)
: AudioEffectX (audioMaster, NUMBER_OF_PROGRAMS, NUMBER_OF_PARAMETERS)  
{
    setNumInputs (NUMBER_OF_INPUTS);        // stereo in
    setNumOutputs (NUMBER_OF_OUTPUTS);      // stereo out
    setUniqueID ('Add1');   // identify
    canProcessReplacing (); // supports replacing output
    isSynth (); // Informs host that this is a VSTi
    sampleRate = getSampleRate();//get sample rate from host

    leftSample  = 0.0;
    rightSample = 0.0;
    frequency = 0.0;
    gain = 1.f;
    currentVelocity = 0.f;
    currentNote = 0;
    keyDown = 2;
    pkeyDown = &keyDown;
    partialTime = 0;
    partial1 = partial2 = partial3 = partial4 = partial5 = partial6 = partial7 = partial8 = 0.0;
    maxAttack = 384000;
    minAttack = 1;
    attack = 44100;
    maxDecay = 192000;
    minDecay = 1;
    decay = 22050;
    maxRelease = 768000;
    minRelease = 1;
    release = 96000;
    sustain = 1.f;

    ADSR env;
    timer universalTime;
    pTime = universalTime.timeCount();

    // initialise frequency table
    m_pfFrequencyTable = new float [128] ; // 128 Midi notes
    if (m_pfFrequencyTable)
    {
        for (int i = 0; i<  128; i++)
        {
            m_pfFrequencyTable[i] = BASE_A4 *powf(2.f,(i-57)/12.f) ;
        }
    }   
}

VST_Plug_in::~VST_Plug_in ()
{
    // nothing to do here
}

// this is where the intresting stuff happens :0
void VST_Plug_in::processReplacing (float** inputs, float** outputs, VstInt32 sampleFrames)
{
    float* out1 = outputs[0];
    float* out2 = outputs[1];

    for(int i = 0; i < sampleFrames; i++)
    {
        // NEW : only send out audio if there is a note on currently
        frequency = m_pfFrequencyTable[currentNote];

        partial1 = (double)sin(2.0*PI*partialTime++*(frequency/sampleRate))* 0.125;//Nyquist frequency issues.  
        partial2 = (double)sin(2.0*PI*partialTime*((2*frequency)/sampleRate))* 0.125;//Obvious looping/foldback of frequencies with higher notes.
        partial3 = (double)sin(2.0*PI*partialTime*((3*frequency)/sampleRate))* 0.125;//Appears mostly fixed when time is only 
        partial4 = (double)sin(2.0*PI*partialTime*((4*frequency)/sampleRate))* 0.125;//incremented with the fundamental.
        partial5 = (double)sin(2.0*PI*partialTime*((5*frequency)/sampleRate))* 0.125;
        partial6 = (double)sin(2.0*PI*partialTime*((6*frequency)/sampleRate))* 0.125;
        partial7 = (double)sin(2.0*PI*partialTime*((7*frequency)/sampleRate))* 0.125;
        partial8 = (double)sin(2.0*PI*partialTime*((8*frequency)/sampleRate))* 0.125; 
        leftSample = partial1 + partial2 + partial3 + partial4 + partial5 + partial6 + partial7 + partial8;

        leftSample = (env.process(leftSample, attack, decay, sustain, release, pkeyDown, pTime) * currentVelocity); //needs to be pointer as data is duplicated when sent.
        //(*pTime)++; //crashes host if uncommented
        leftSample = leftSample * gain;
        rightSample = leftSample;

        // write samples to output buffer 
        (*out1++) = leftSample;
        (*out2++) = rightSample;
    }
}

// NEW : overriden function, tells host what the plugin can do (see notes)
VstInt32 VST_Plug_in::canDo(char *text)
{
    if (!strcmp (text, "receiveVstEvents"))     // SimpleSynth can receive VST events
        return 1;
    if (!strcmp (text, "receiveVstMidiEvent"))  // SimpleSynth can receive VST MIDI events
        return 1;
    return -1;  // explicitly can't do; 0 => don't know 
}

// NEW : this process function is called to collect incoming VST events
VstInt32 VST_Plug_in::processEvents (VstEvents* events)
{
    // parse event list
    for (long i = 0; i < events->numEvents; i++)
    {
        if ((events->events[i])->type == kVstMidiType)
        {
            VstMidiEvent* event = (VstMidiEvent*)events->events[i];
            char* midiData = event->midiData;
            long status = midiData[0] & 0xf0;       // ignoring channel

            if (status == 0x90 || status == 0x80)   // we only look at notes
            {
                long note = midiData[1];
                long velocity = midiData[2];

                if (status == 0x80)
                {
                    velocity = 0;   
                    // set velocity to zero if it is a note off message
                }
                if (!velocity && (note == currentNote))
                {
                    noteOff ();
                }
                else
                {
                    noteOn (note, velocity);
                }
            }
        }
    }
    return 1; // indicate that we wish to receive more events
}

void VST_Plug_in::noteOn(long liNote, long liVelocity)
{
    keyDown = 1;
    partialTime = 0;
    currentNote = liNote;
    currentVelocity = liVelocity / 127.f;
}

void VST_Plug_in::noteOff()
{
    keyDown = 2;
    currentVelocity = 0;
}

// this function is called whenever the fader is moved
void VST_Plug_in::setParameter (VstInt32 index, float value)
{
    switch (index)
    {
        case kGain : gain = value;break;  
        case kAttack : attack = getAttack(value); break; //need vale in samples for envelope here
        case kDecay : decay = getDecay(value); break;
        case kSustain : sustain = getSustain(value); break;
        case kRelease : release = getRelease(value); break;
    }
}

// this function is called whenever the gui requires data
float VST_Plug_in::getParameter (VstInt32 index)

{
    switch (index)
    {
        case kGain : return gain;break;
        case kAttack : return sendAttack(); break; //need 0 - 1 val here
        case kDecay : return sendDecay();break;
        case kSustain : return sendSustain();break;
        case kRelease : return sendRelease();break;
    }
}

// getParameterName places the parameter name on the plug in
void VST_Plug_in::getParameterName (VstInt32 index, char* label)

{
    switch (index)
    {
        case kGain : vst_strncpy (label, "Gain", kVstMaxParamStrLen);break;
        case kAttack : vst_strncpy (label, "Attack", kVstMaxParamStrLen); break;
        case kDecay : vst_strncpy (label, "Decay", kVstMaxParamStrLen); break;
        case kSustain : vst_strncpy (label, "Sustain", kVstMaxParamStrLen); break;
        case kRelease : vst_strncpy (label, "Release", kVstMaxParamStrLen); break;
    }
}

// getParameterDisplay displays the parameter value on the plug-in
void VST_Plug_in::getParameterDisplay (VstInt32 index, char* text)

{
    switch (index)
    {
        case kGain : dB2string(gain, text, kVstMaxParamStrLen);break;
        case kAttack : float2string(attack, text, kVstMaxParamStrLen); break;
        case kDecay : float2string(decay, text, kVstMaxParamStrLen); break;
        case kSustain: dB2string(sustain, text, kVstMaxParamStrLen); break;
        case kRelease : float2string(release, text, kVstMaxParamStrLen); break;
    }
    /*linear display
    float2string(gain, text, kVstMaxParamStrLen);
    dB display
    dB2string (gain, text, kVstMaxParamStrLen);*/
}

void VST_Plug_in::getParameterLabel (VstInt32 index, char* label)

{
    switch (index)
    {
        case kGain : vst_strncpy (label, "dB", kVstMaxParamStrLen);break;
        case kAttack : vst_strncpy (label, "Samples", kVstMaxParamStrLen); break;
        case kDecay : vst_strncpy (label, "Samples", kVstMaxParamStrLen); break;
        case kSustain : vst_strncpy (label, "dB", kVstMaxParamStrLen); break;
        case kRelease : vst_strncpy (label, "Samples", kVstMaxParamStrLen); break;
    }
}

float VST_Plug_in::getAttack(float value)
{   
    attack = minAttack + ((maxAttack-minAttack) * value);
    return attack;
}
float VST_Plug_in::sendAttack()
{   
    float retAttVal;
    retAttVal = (attack - minAttack) / (maxAttack-minAttack);
    return retAttVal;
}

float VST_Plug_in::getDecay(float value)
{
    decay = minDecay + ((maxDecay-minDecay) * value);
    return decay;
}
float VST_Plug_in::sendDecay()
{
    float retDecVal;
    retDecVal = (decay - minDecay) / (maxDecay-minDecay);
    return retDecVal;
}

float VST_Plug_in::getSustain(float value)
{
    sustain = value;
    return sustain;
}
float VST_Plug_in::sendSustain()
{
    return sustain;
}

float VST_Plug_in::getRelease(float value)
{
    release = minRelease + ((maxRelease-minRelease) * value);
    return release;
}
float VST_Plug_in::sendRelease()
{
    float retRelVal;
    retRelVal = (release - minRelease) / (maxRelease-minRelease);
    return retRelVal;
} 
```

ADSR.h

```
#ifndef __ADSR 
#define __ADSR

#include <math.h>

class ADSR
{
public:
    ADSR();
    ~ADSR();

    long susTimer; 
    int stage;
    double process(double currentSamp, float attack, float decay, float sustain, float release, int* pKeyState, long* pTime); 
};
#endif 
```

ADSR.cpp

```
#include <math.h>
#include "ADSR.h"

ADSR::ADSR()
{
    stage = 1;
    susTimer = 0;
}
ADSR::~ADSR()
{
}

double ADSR::process(double currentSamp, float attack, float decay, float sustain, float release, int* pKeyState, long* pTime)
{
    if(stage == 1 && *pTime >= (attack + decay + susTimer + release))
    {
        *pTime = 0;
    }

    while(*pTime < attack)
    {
        currentSamp = currentSamp * ((1.0f / attack) + 1.0f);
        (*pTime)++;//doesn't crash but doesnt do anything either
        stage = 1;
        return currentSamp;
    }

    while(*pTime < (attack + decay))
    {
        currentSamp = currentSamp * (sustain / decay);
        (*pTime)++;//doesn't crash but doesnt do anything either
        stage = 2;
        return currentSamp;
    }

    while(*pTime > (attack + decay))
    {
        currentSamp = currentSamp * 1.0f;
        susTimer++;
        stage = 3;
        return currentSamp;
    }

    while(*pTime < (attack + decay + susTimer + release) && *pKeyState == 2)
    {
        currentSamp = currentSamp * (sustain / release);
        (*pTime)++;//doesn't crash but doesnt do anything either
        stage = 4;
        return currentSamp;
    }
} 
```

计时器.h

```
#ifndef __timer
#define __timer

#include <math.h>

class timer
{
public:
    timer();
    ~timer();

    long time;
    long* pTime;

    long* timeCount();
};
#endif 
```

计时器.cpp

```
#include <math.h>
#include "timer.h"

timer::timer()
{
    time = 0;
    pTime = &time;
}
timer::~timer()
{
}

long* timer::timeCount()
{
    return pTime;
} 
```

# android - 错误应用程序意外停止

> ID：14306400
> 
> 赞同：0
> 
> 时间：2013-01-13T17:56:56.463
> 
> 标签：android, android-manifest

我在 android 2.2 中运行一个程序。我收到一个错误应用程序意外停止然后强制关闭。我一次又一次地清理项目然后构建，但问题仍然存在。

ApplicationContextProvider.java

```
package com.android.tuts;

import android.app.Application;
import android.content.Context;

public class ApplicationContextProvider  extends Application{
private static Context sContext;

 @Override
    public void onCreate() {
        super.onCreate();
        sContext = getApplicationContext();

    }

 public static Context getContext() {
        return sContext;
    }

} 
```

数据库管理.java

```
package com.android.tuts;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.ContentValues;
 import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class DataBaseManager extends SQLiteOpenHelper {
  // The Android's default system path of your application database.
//data/data/ and /databases remain the same always. The one that must be changed is com.example      which represents
//the MAIN package of your project
private static String DB_PATH = "/data/data/com.android/databases/";

//the name of your database
private static String DB_NAME = "database";

private static SQLiteDatabase mDataBase;

private static DataBaseManager sInstance = null;
// database version    
private static final int DATABASE_VERSION = 1;

/**
 * Constructor Takes and keeps a reference of the passed context in order to
 * access to the application assets and resources.
 */
private DataBaseManager() {
    super(ApplicationContextProvider.getContext(), DB_NAME, null, DATABASE_VERSION);

    try {
        createDataBase();
        openDataBase();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

/**
 * Singleton for DataBase
 *
 * @return singleton instance
 */
public static DataBaseManager instance() {

    if (sInstance == null) {
        sInstance = new DataBaseManager();
    }
    return sInstance;
}

/**
 * Creates a empty database on the system and rewrites it with your own
 * database.
 *
 * @throws java.io.IOException io exception
 */
private void createDataBase() throws IOException {

    boolean dbExist = checkDataBase();

    if (dbExist) {
        // do nothing - database already exist
    } else {

        // By calling this method an empty database will be created into
        // the default system path
        // of your application so we are gonna be able to overwrite that
        // database with our database.
        this.getReadableDatabase();

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");
        }
    }
}

/**
 * Check if the database already exist to avoid re-copying the file each
 * time you open the application.
 *
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase() {

    SQLiteDatabase checkDB = null;

    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);

    } catch (SQLiteException e) {

        // database doesn't exist yet.

    }

    if (checkDB != null) {

        checkDB.close();

    }

    return checkDB != null;
}

/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transfering bytestream.
 *
 * @throws java.io.IOException io exception
 */
public void copyDataBase() throws IOException {

    // Open your local db as the input stream
    InputStream myInput = ApplicationContextProvider.getContext().getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }

    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

private void openDataBase() throws SQLException {

    // Open the database
    String myPath = DB_PATH + DB_NAME;
    mDataBase = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READWRITE);
}

/**
 * Select method
 *
 * @param query select query
 * @return - Cursor with the results
 * @throws android.database.SQLException sql exception
 */
public Cursor select(String query) throws SQLException {
    return mDataBase.rawQuery(query, null);
}

/**
 * Insert method
 *
 * @param table  - name of the table
 * @param values values to insert
 * @throws android.database.SQLException sql exception
 */
public void insert(String table, ContentValues values) throws SQLException {
    mDataBase.insert(table, null, values);
}

/**
 * Delete method
 *
 * @param table - table name
 * @param where WHERE clause, if pass null, all the rows will be deleted
 * @throws android.database.SQLException sql exception
 */
public void delete(String table, String where) throws SQLException {

    mDataBase.delete(table, where, null);

}

/**
 * Update method
 *
 * @param table  - table name
 * @param values - values to update
 * @param where  - WHERE clause, if pass null, all rows will be updated
 */
public void update(String table, ContentValues values, String where) {

    mDataBase.update(table, values, where, null);

}

/**
 * Let you make a raw query
 *
 * @param command - the sql comand you want to run
 */
public void sqlCommand(String command) {
    mDataBase.execSQL(command);
}

@Override
public synchronized void close() {

    if (mDataBase != null)
        mDataBase.close();

    super.close();

}

@Override
public void onCreate(SQLiteDatabase db) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

} 
```

我的活动.java

```
package com.android.tuts;

import android.app.Activity;
import android.content.ContentValues;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MyActivity extends Activity {

private DataBaseManager dataBase;

private Button insertButton;
private Button updateButton;
private Button deleteButton;

private TextView textView;

//put the table name and column in constants
public static final String TABLE_NAME = "People";
public static final String COLUMN_NAME = "name";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    dataBase = DataBaseManager.instance();

    textView = (TextView)findViewById(R.id.name_1);
    insertButton = (Button)findViewById(R.id.insert);
    updateButton = (Button)findViewById(R.id.update);
    deleteButton = (Button)findViewById(R.id.delete);

    insertButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {

            //with ContentValues put the data we want into the database
            ContentValues values = new ContentValues();
            values.put(COLUMN_NAME, "Diana");

            //here we insert the data we have put in values
            dataBase.insert(TABLE_NAME, values);

            updateTextView();

        }
    });

    updateButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {

            //with ContentValues put the data we want into the database
            ContentValues values = new ContentValues();
            values.put(COLUMN_NAME,"George");

            //here we replace the record which has the _id=1 with the given name in the values "George"
            dataBase.update(TABLE_NAME, values, "_id=1");

            updateTextView();
        }
    });

    deleteButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {

            //here we delete the record which has the "name=George"
            dataBase.delete(TABLE_NAME,"name='George'");

            updateTextView();

        }
    });

}

@SuppressWarnings("null")
public void updateTextView(){
    //to get data from database we need a cursor.
    //after we perform a select query all the data from database specific for the query, will be in the cursor
    // "*" means "all" in translation the query means "SELECT ALL FROM NAME TABLE"
    Cursor cursor = dataBase.select("SELECT * FROM " + TABLE_NAME);

    //here we verify the cursor for null. If is null then the cursor must be closed.
    //Once you open a cursor you have to close it too after you don't use it
    if (cursor == null){
        cursor.close();
    }

    textView.setText("");
    //the cursor iterates the column "name"
    while (cursor.moveToNext()){
        //in this string we get the record for each row from the column "name"

        String s = cursor.getString(cursor.getColumnIndex(COLUMN_NAME));

        //in this textView will be added, updated or deleted the string
        // "\n" means "new line"
        textView.append("\n" + s);
    }

    //here we close the cursor because we do not longer need it
    cursor.close();
}
} 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.android.tuts"
android:versionCode="1"
android:versionName="1.0">
<uses-sdk android:minSdkVersion="8" />

<application android:name=".ApplicationContextProvider" android:label="@string/app_name">
<activity android:name=".MyActivity"
          android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>

</application>
</manifest> 
```

# sql - SQL 根据值选择唯一

> ID：14306401
> 
> 赞同：2
> 
> 时间：2013-01-13T17:57:02.947
> 
> 标签：sql, ms-access

桌子：

```
Name | Value | Prize
Race1   32      5
Race1   22      5
Race1   30      5
Race2   11      5
Race2   12      5
Race2   31      5 
```

我想查询的是，当我定义`Value`20+ 时，将根据谁`Value`更高，将唯一的比赛（Race1，Race2）选择到我的结果中。奖金应该加起来。

所以当我做元查询时：`select sum(Prize) biggestValueUniqueRaces where value > -20` 我得到：

查询返回：

```
Prize
  10 
```

考虑到这两行的地方：

```
Name | Value | Prize
Race1   32      5
Race2   31      5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:23:26.053

您首先必须确定所有种族，其价值等于同名种族的最大值。

```
SELECT
    [r1].[Name],
    [r1].[Value],
    [r1].[Prize]
  FROM [Races] [r1]
  WHERE [r1].[Value] > 20
    AND [r1].[Value] = 
      (SELECT MAX([r2].[Value])
       FROM [Races] [r2]
       WHERE [r2].[Name] = [r1].[Name]) 
```

这可能会产生具有相同名称、价值和奖品的多个种族。所以将它们分组：

```
SELECT
    [r1].[Name],
    [r1].[Value],
    [r1].[Prize]
  FROM [Races] [r1]
  WHERE [r1].[Value] > 20
    AND [r1].[Value] = 
      (SELECT MAX([r2].[Value])
       FROM [Races] [r2]
       WHERE [r2].[Name] = [r1].[Name])
  GROUP BY 
    [r1].[Name],
    [r1].[Value],
    [r1].[Prize] 
```

然后总结奖品：

```
SELECT
  SUM([sub].[Prize]) AS [TotalPrizes],
  COUNT(*) AS [NumberOfRaces]
FROM
(
  SELECT
    [r1].[Name],
    [r1].[Value],
    [r1].[Prize]
  FROM [Races] [r1]
  WHERE [r1].[Value] > 20
    AND [r1].[Value] = 
      (SELECT MAX([r2].[Value])
       FROM [Races] [r2]
       WHERE [r2].[Name] = [r1].[Name])
  GROUP BY 
    [r1].[Name],
    [r1].[Value],
    [r1].[Prize]
) AS [sub] 
```

[这是一个小提琴](http://www.sqlfiddle.com/#!3/fb24f/11)。（我将服务器类型设置为 MS SQL 2008，但我认为这不会成为这种情况/查询的问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:02:05.660

编辑重新评论

```
SELECT Sum(Races.Prize) As Total
FROM Races INNER JOIN (SELECT r.[Name], Max(r.[Value]) AS MaxOfValue
FROM Races r WHERE [Value]>20
GROUP BY r.[Name])  AS q 
ON (Races.Value = q.MaxOfValue) AND (Races.Name = q.Name); 
```

或者

```
SELECT SUM(races.prize) AS SP
FROM   races
WHERE  races.id IN (
    SELECT id
    FROM   races r
    WHERE  r.name = races.name
    AND VALUE = (
       SELECT Max(VALUE)
       FROM   races s
       WHERE  s.[name] = r.name
       AND VALUE > 20 )) 
```

# javascript - 好的 javascript 控制台/调试软件？

> ID：14306405
> 
> 赞同：-1
> 
> 时间：2013-01-13T17:57:58.273
> 
> 标签：javascript, macos, debugging, console

我正在寻找可以帮助我进行 JavaScript 开发的软件（我是初学者）。[我从Codecademy](http://codecademy.com)学到了我所知道的大部分内容，他们有漂亮且非常有用的控制台，我正在寻找类似的东西，但可以安装在我的 Mac 上（或在线访问）。

我想此类软件的主要用途应该是能够返回、打印等。javascript 的内容并显示错误消息以帮助进行调试。如果您有什么好的建议，请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:03:42.147

这可能很有趣，但我总是使用 chrome 控制台和 firebug 来进行此类测试用例。我想你不会更快地找到任何东西。

至于软件 try [sublime](http://www.sublimetext.com/download)它是非常用户友好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:08:01.877

考虑使用[JSLint](http://www.jslint.com/)，它是一种代码质量分析工具，可帮助检查您可能遇到的任何错误或样式问题。您不必进行它所说的所有挑剔的更改（并且您可以过滤一些东西），但它肯定会有所帮助。只需在此处发布您的 Javascript。

我还会考虑将`use strict;`您的 Javascript 放在顶部，因为它有助于抛出更多错误，这在开始时可能很有用。这是一个关于它的问题：

[“use strict”在 JavaScript 中做了什么，背后的原因是什么？](https://stackoverflow.com/questions/1335851/what-does-use-strict-do-in-javascript-and-what-is-the-reasoning-behind-it)

正如其他人所说，Firebug 是 Firefox 和 Chrome 的一个很好的扩展，我认为嵌入在浏览器中的标准控制台就足够了。

希望这可以帮助！

# grails - 如何在 grails webflow 中上传文件？

> ID：14306408
> 
> 赞同：1
> 
> 时间：2013-01-13T17:58:28.373
> 
> 标签：grails, file-upload, upload, spring-webflow

我尝试构建一个 grails webflow，其中包含一个包含文件上传字段的步骤。找不到明确的例子。我该怎么做？

表格如下所示：

```
<g:form method="POST" action="upload" enctype="multipart/form-data">
    <input type="file" name="myFile" />
    <input type="submit" value="Upload! " />
</g:form> 
```

流程如下所示：

```
def rgdpsRequestFlow = {
    chargeCheck{
        on("upload"){ 
            println "Hello file upload"
        }.to("uploadSuccess")
    }
    uploadSuccess{

    }
} 
```

当我提交表格时，我得到

```
HTTP Status 404 - /webflowTest/mortgage/upload 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T18:00:40.930

有点不清楚你在努力解决哪个部分。如果您在文件上传方面需要帮助，您可能想尝试[Grails File Uploader 插件](http://grails.org/plugin/file-uploader)，或者查看此[分步教程](http://www.slideshare.net/cavneb/upload-files-with-grails)或使用James Kleeh 指出的[uploadForm标签。](http://grails.org/doc/1.3.7/ref/Tags/uploadForm.html)

即，您可以在 gsp 中添加：

```
<g:uploadForm controller='yourControllerName' action='save'>
    <input type='file' name='file'/>
    <input type='submit'/>
</g:uploadForm> 
```

然后在控制器中处理它：

```
def save = {
    def file = request.getFile('file').inputStream.text
    file.transferTo(new File('someLocation/filename'))
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T03:07:26.323

问题是我使用了*g:form action*属性。通过 webflow 使用文件上传的正确方法是使用*g:submitButton*

这是适用于我的 webflow 的表单代码：

```
<g:form method="POST" enctype="multipart/form-data">
    <input type="file" name="myFile" />
    <g:submitButton class="save" name="upload" value="Upload!"/>
</g:form> 
```

# python - 多线程如何知道所有任务何时完成（Python）

> ID：14306409
> 
> 赞同：0
> 
> 时间：2013-01-13T17:58:44.567
> 
> 标签：python, multithreading

这是我的问题：了解“当一组特定任务完成时能够根据刚刚完成的组开始其他任务”的最佳和更聪明的方法是什么

例如我有这棵树，所以当 A 完成时，我可以启动 H 和 B 等......但是在我下面的小树上，你还需要知道每个被认为完成的字母都必须执行某些任务（也是并行的） )

```
 A
         /   \
       H       B
     /        /  \
   C         F     D 
```

所以一个完整的例子是：

```
- Starting A
     - Starting instance 1 of A
     - Starting instance 2 of A
     - Starting instance 3 of A
     - Instance 1 of A Finished
     - Instance 2 of A Finished
     - Instance 3 of A Finished

- Starting H
- Starting B
     - Starting instance 1 of H
     - Starting instance 2 of H
     - Starting instance 1 of B
     - Starting instance 3 of H
     - B has completed all its tasks
- Starting F
     - Starting instance 4 of H
     - H has completed all its tasks
- Starting C
etc... 
```

所以继续我的问题：等待 A 的所有任务完成以启动 B 和 H 的最佳结构是哪个？

目前这是我基于某个基督徒的 lib 线程池所做的，使用回调 [http://www.chrisarndt.de/projects/threadpool/](http://www.chrisarndt.de/projects/threadpool/)

对于每个字母，我都有要完成的任务数，所以我创建了一个这样的字典

```
instances_count = {"A":[0,5],"B":[0,2],"H":[0,3],"C":[0,0],"D":[0,1]} 
```

像这样提出我的第一个请求

```
requests = threadpool.makeRequests(do_something, ["A"],print_result) 
```

当 do_something 完成时将调用 print_result

```
def do_something(data):

    Here I just retrieve what the Tasks of A and make an other request to parallelize them

   command_requests = threadpool.makeRequests(execute_command, argument_list,instance_finished)

def execute_command(data):
   Here I Do what the task has to do and when it is done i return the datas
   return data

def instance_finished():
    And here what I do is that I will use that instance_count to add +1 when A task reletated to a Letter finishes...

   Global.Lock()
   instances_count[Letter][0] = instances_count[Letter][0] + 1
   Global.unLock() 
```

我检查 instance_count[Letter][0] == instances_count[Letter][1] 是否意味着 A 的所有任务都已完成，我可以“开始”字母 B 和 H

那么有人可以告诉我这是否是一个好的解决方案吗？如果没有，我该如何改进？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:51:36.847

我可以建议您使用[多处理模块吗](http://docs.python.org/2/library/multiprocessing.html#module-multiprocessing.pool)

设置工作池并添加具有`apply_async`或类似映射功能的任务。

`apply_async`会给你一个`AsyncResult`对象。一个`AsyncResult`对象有以下方法。

> 等待（[超时]）
> 
> > 等待结果可用或超时秒数过去。
> 
> 准备好（）
> 
> > 返回调用是否完成。

是所有在上面的链接.. 祝你好运。

# xml - XSLT / XPath 获取当前节点号

> ID：14306414
> 
> 赞同：2
> 
> 时间：2013-01-13T17:59:10.050
> 
> 标签：xml, xslt, xpath

我有以下要转换的 xml 数据结构：

```
 <root>
    <main1>
            <text-body>
                <title>A</title>
                <subtitle>A</subtitle>
            </text-body>
    <!-- other stuff -->
            <text-body>
                <titel>Aa</titel>
                <subtitel>Aa</subtitel>
            </text-body>
    <!-- other stuff -->
            <text-body>
                <titel>Aaa</titel>
                <subtitel>Aaa</subtitel>
            </text-body>
    </main1>
    <main2>
        <text-body>
            <title>B</title>
            <subtitle>B</subtitle>
            <body>B</body>
        </text-body>
        <text-body>
            <title>C</title>
            <subtitle>C</subtitle>
            <body>C</body>
        </text-body>
        <text-body>
            <title>D</title>
            <subtitle>D</subtitle>
            <body>D</body>
        </text-body>
    </main2>
    </root> 
```

我需要用 main2/text-body 中的数据替换 main/text-body 中的数据，但保留 main1 中的其他内容。输出应如下所示：

```
<root>
        <main1>
              <text-body>
                <title>B</title>
                <subtitle>B</subtitle>
                <body>B</body>
                </text-body>
        <!-- other stuff -->
              <text-body>
                 <title>C</title>
                <subtitle>C</subtitle>
                <body>C</body>
              </text-body>
        <!-- other stuff -->
              <text-body>
                <title>D</title>
                <subtitle>D</subtitle>
                <body>D</body>
              </text-body>
        </main1>
        <main2>
            <text-body>
                <title>B</title>
                <subtitle>B</subtitle>
                <body>B</body>
            </text-body>
            <text-body>
                <title>C</title>
                <subtitle>C</subtitle>
                <body>C</body>
            </text-body>
            <text-body>
                <title>D</title>
                <subtitle>D</subtitle>
                <body>D</body>
            </text-body>
        </main2>
        </root> 
```

我有以下 xsl 代码：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
<xsl:output method="xml"/>

   <xsl:template match="@*|node()">
    <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
   </xsl:template>

    <xsl:template match="main1/text-body">
           <xsl:param name="count" select="count(preceding-sibling::node())"/>
           <xsl:copy-of select="/root/main2/text-body[$count]"/>
    </xsl:template>

</xsl:stylesheet> 
```

我尝试获取 main1/text-body 的当前节点索引来填充 main2 的正确 text-body。但它不起作用。这是当前的输出：

```
<?xml version="1.0" encoding="UTF-8"?><root>
        <main1>
              <text-body>
                <title>B</title>
                <subtitle>B</subtitle>
                <body>B</body>
            </text-body>
        <!-- other stuff -->

        <!-- other stuff -->

        </main1>
        <main2>
            <text-body>
                <title>B</title>
                <subtitle>B</subtitle>
                <body>B</body>
            </text-body>
            <text-body>
                <title>C</title>
                <subtitle>C</subtitle>
                <body>C</body>
            </text-body>
            <text-body>
                <title>D</title>
                <subtitle>D</subtitle>
                <body>D</body>
            </text-body>
        </main2>
        </root> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T18:39:17.807

XPath 和 XSLT 是从 1 开始的索引。为了选择第一项，您的谓词过滤器将查找`[1]`，而不是`[0]`。

鉴于此，变量`$count`需要`1`添加到`count()`前面的兄弟选择中。此外，您应该计算`text-body`前兄弟的元素，而不是全部/任何`node()`

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
    <xsl:output method="xml"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="main1/text-body">
        <xsl:param name="count" select="count(preceding-sibling::text-body)+1"/>
        <xsl:copy-of select="/root/main2/text-body[$count]"/>
    </xsl:template>

</xsl:stylesheet> 
```

# objective-c - 以编程方式截取屏幕截图时在 UIImageView 中查找标签的位置和大小？

> ID：14306418
> 
> 赞同：1
> 
> 时间：2013-01-13T17:59:20.950
> 
> 标签：objective-c, xcode, uiimageview, uilabel

我正在创建一个应用程序，允许用户在他们的图像上放置文本，并将它们保存到相机胶卷。我实现这一点的方式是在用户选择或拍照后，他们会看到一个文本字段。然后，此文本字段会更改标签的文本。我在标签上放置了手势识别器，以便用户可以平移标签、捏合缩放和旋转标签。

在 stackoverflow 的帮助下，我已经能够成功截取图像顶部标签的屏幕截图。但是，当保存到相机胶卷时，它无法识别图像顶部的标签大小或位置。任何帮助将不胜感激。

这是我将图像保存到相机胶卷的地方

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
     if (buttonIndex == 0)
{

    UIGraphicsBeginImageContext(_image.size);

    [_image drawInRect:CGRectMake(0, 0, _image.size.width, _image.size.height)];

    [_textLabel drawTextInRect:CGRectMake((_image.size.width - _textLabel.frame.size.width)/2, (_image.size.height - _textLabel.frame.size.height)/2, _textLabel.frame.size.width, _textLabel.frame.size.height)];

    UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"WRDIT"
                                                      message:@"Your image has been saved to the Camera Roll"
                                                     delegate:self
                                            cancelButtonTitle:nil
                                            otherButtonTitles:@"OK", nil];

    [message show];

    UIImageWriteToSavedPhotosAlbum(resultingImage, nil, nil, nil);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:14:04.987

我不是 100% 确定，但您可以尝试使用`drawInRect:withFont:lineBreakMode:alignment:`而不是`drawTextInRect`. 苹果文档说不要直接打电话`drawTextInRect`。

> 绘制文本矩形：
> 
> 在指定的矩形中绘制接收者的文本（或其阴影）。
> 
> ```
> - (void)drawTextInRect:(CGRect)rect 
> ```
> 
> 参数
> 
> 矩形
> 
> 在其中绘制文本的矩形。
> 
> 讨论
> 
> **您不应直接调用此方法。**此方法只能被想要修改标签文本的默认绘制行为的子类覆盖。

这是文档说要使用的方法：

> `drawInRect:withFont:lineBreakMode:alignment:`
> 
> 使用指定的边界矩形、字体和属性在当前图形上下文中绘制字符串。
> 
> ```
> - (CGSize)drawInRect:(CGRect)rect withFont:(UIFont *)font 
>                              lineBreakMode:(UILineBreakMode)lineBreakMode
>                                  alignment:(UITextAlignment)alignment 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:23:08.403

所以我想通了。我将 UIImage 和 UILabel 放在 UIView 中。

然后我这样做了：

```
 UIGraphicsBeginImageContextWithOptions(_containerView.bounds.size, _containerView.opaque, 0.0);

    [_containerView.layer renderInContext:UIGraphicsGetCurrentContext()];

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

这使我能够处理平移、旋转和缩放。然后我可以将此图像保存到相机胶卷或发送到 FB、Twitter 等。

# django - django 访问原始多对多创建的表字段

> ID：14306427
> 
> 赞同：9
> 
> 时间：2013-01-13T18:00:09.247
> 
> 标签：django, django-models, django-templates, django-views

**模型：**

```
class Subjects (models.Model):
    name = models.CharField(max_length=100)
    places = models.CharField(max_length=100)

class Student (models.Model):
    name = models.CharField(max_length=40)
    lastname = models.CharField(max_length=80)
    subjects = models.ManyToManyField(Subjects, blank=True) 
```

当我使用上面的模型时，Django 会创建 appname_student_subjects。

appname_student_subjects 表看起来像这样：

```
id   |    student_id   |  subjects_id
-----------------------------------------
1    |    1            |  10
2    |    4            |  11
3    |    4            |  19
4    |    5            |  10
...
~1000 
```

如何访问subjects_id 字段并计算上表中subjects_id 存在的次数（然后对其进行处理）。例如：如果 ID 为 10 的主题存在两次，则模板显示 2。我知道我应该在结果中使用“len”，但我不知道如何访问 subject_id 字段。使用外键，我在 for 循环中这样做：

```
results_all = Students.objects.filter(subject_id='10')
result = len(results_all) 
```

我将结果传递给模板并在 for 循环中显示它，但它不是外键，所以它不起作用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-13T22:50:13.837

您可以直接访问直通表。

```
num = (Students.subjects  # M2M Manager
               .through  # subjects_students through table
               .objects  # through table manager
               .filter(student_id=10)  # your query against through table
               .count()) 
```

# c++ - .NET c ++中父级的子窗体调用函数

> ID：14306430
> 
> 赞同：0
> 
> 时间：2013-01-13T18:00:26.963
> 
> 标签：c++, .net, winforms, c++-cli

我有一个带有 2 个 winform 的应用程序：Form1.h 和 TrackEdit.h。它们都在同一个命名空间（“ParkCleanUp2”）中。

在 Form1 中，我称此代码为：

```
ParkCleanUp2::TrackEdit^ te; 
```

它给我这些错误的地方：

```
Error   24  error C2039: 'TrackEdit' : is not a member of 'ParkCleanUp2' (TrackEdit.cpp)    c:\users\-joey\documents\visual studio 2010\projects\park cleanup 2\park cleanup 2\Form1.h  2332
Error   25  error C2065: 'TrackEdit' : undeclared identifier (TrackEdit.cpp)    c:\users\-joey\documents\visual studio 2010\projects\park cleanup 2\park cleanup 2\Form1.h  2332
Error   26  error C2065: 'te' : undeclared identifier (TrackEdit.cpp)   c:\users\-joey\documents\visual studio 2010\projects\park cleanup 2\park cleanup 2\Form1.h  2332 
```

不过，如果我去 TrackEdit.h 它会告诉我：

```
namespace ParkCleanUp2 {
 //Some namespae includes
     public ref class TrackEdit : public System::Windows::Forms::Form 
```

所以我想知道为什么它给我错误“ *'TrackEdit': is not a member of 'ParkCleanUp2'* ”以及为什么它在查看 TrackEdit.cpp 文件，而我包含 .h 文件。我发现很奇怪，也许值得一提的是，当我`#include "Form1.h`在 TrackEdit.h 中评论该行时，它工作得很好，但在 TrackEdit.h 中我不能调用 Form1 的函数（比如在列表框中选择了一个项目) 我想要实现的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:53:33.773

看来您同时拥有 Form1.h 和 TrackEdit.h `#include`。相反，有一个前向声明，并且只包括来自 TrackEdit 的 Form1.h。**cpp**，反之亦然。

双重包含不起作用，因为您有两个类都引用了另一个。每个类都需要了解其他类才能定义自己。由于您所拥有的只是完整的类定义，因此您有一个循环定义。相反，前向声明为编译器提供了足以让编译器知道“好的，有一个具有该名称的类，这就是我所知道的一切”，并且解决了循环依赖。

（另外：当您编辑问题时，您删除了最重要的句子：“所以基本上 Form1.h 包含 TrackEdit.h，其中又包含 Form1.h”。这种模式很少是正确的。如果您看到自己这样做，请提供而是更多的前向声明。）

像这样的东西：

表格1.h：

```
namespace ParkCleanUp2 {
    ref class TrackEdit;

    public ref class Form1 {
        TrackEdit^ track;
    };
} 
```

TrackEdit.h：

```
namespace ParkCleanUp2 {
    ref class Form1;

    public ref class TrackEdit {
        Form1^ parentForm;
    };
} 
```

Form1.cpp 和 TrackEdit.cpp：

```
#include "Form1.h"
#include "TrackEdit.h" 
```

# android - 创建一个类似于 pinterest 的视图

> ID：14306437
> 
> 赞同：0
> 
> 时间：2013-01-13T18:01:12.097
> 
> 标签：android, android-layout, android-widget

我正在开发一个与新闻提要相关的应用程序，我需要像 Pinterest 应用程序一样在附件图片图像中进行 GUI 设计，顶部有你的东西（菜单），如搜索、Pinterest 和个人资料，我想要同样的东西，应该通过交换和单击，用户可以通过单击和交换在（搜索、Pinterest 和个人资料）顶部菜单之间切换。有人可以指导我怎么做吗？我尝试标签视图但无法添加交换，任何人都可以指导我更好的方法吗？

![通过交换并单击更改主体](../Images/e361ef02a74b98b6674081bb5f246189.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:49:14.393

对于这样的布局，我会推荐[ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)。确保下载[演示应用程序](https://play.google.com/store/apps/details?id=com.viewpagerindicator.sample)并查看可滑动标签实现的代码。这可能正是您正在寻找的。

要轻松自定义其中的选项卡，您会发现[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)很有帮助。

# javascript - 在 JS (workers) 中动态创建同一个文件的多个实例

> ID：14306441
> 
> 赞同：3
> 
> 时间：2013-01-13T18:01:38.463
> 
> 标签：javascript, html, web-worker, html5-filesystem

所以我基本上是在做这个（简化）......

```
var script = '...some JS code...',
    blob = blob = new Blob([script]),
    worker = [];

for (var i=0; i<10; i++) {
    worker[i] = new Worker(URL.createObjectURL(blob));
} 
```

...动态创建同一个 JS 文件的 10 个实例并将其传递给 10 个网络工作者（然后控制器/委托人在 10 个之间划分特定任务以进行进一步处理 - 但这对于这个问题目前并不重要） .

这一切都很好，但是在检查 Chrome 开发人员工具（网络）中的代码后，我发现 Chrome 确实创建了同一文件的 10 个单独版本（需要额外的初始化毫秒数 - 可以看到创建的每个额外文件的瀑布），即使它是同一个文件。

如果我`URL.createObjectURL(blob)`在循环之外进入一个单独的变量，然后将该变量传递给循环中的工作人员 - 它不再正常工作 - 似乎所有工作人员都共享完全相同的 JS 文件（即使我'希望每个工人都会启动自己的单独进程）。

有任何想法吗？我可以以某种方式`URL.createObjectURL(blob)`只创建一次然后以某种方式复制/克隆它吗？不确定这是否会有所帮助或使事情有所不同？

# javascript - Facebook 自动共享 wordpress 插件？

> ID：14306444
> 
> 赞同：0
> 
> 时间：2013-01-13T15:25:08.677
> 
> 标签：javascript, facebook

我试图找到一个要求访问 facebook 应用程序的插件，如果您确认它，那么您访问的每个帖子都应该自动发布在用户墙上。我在几个页面上看到过这个例子：www.hajgare.com, www.flej.eu 因为我什么都找不到，所以我开始自己构建它，这就是我到目前为止所做的：检查用户是否登录 facebook 并检查他是否已批准该应用程序。如果是，则显示 facebook 分享框（www.balkanews.net 点击任何新闻）。

我的问题是如何在不显示该 facebook 共享框的情况下进行共享。

```
<div id="fb-root"></div>
<script type="text/javascript">
        $(function() {
            var e = document.createElement('script');
            e.type = 'text/javascript';
            e.src = document.location.protocol +
            '//connect.facebook.net/de_DE/all.js';
            e.async = true;
            document.getElementById('fb-root').appendChild(e);
        }());

            $(function(){

                liked = true;
                $("#trigger").click(function(){
                    if(liked){
                        post();
                    }else{
                        //alert('{L_FIRST_CLICK_LIKE}');
                        alert('like');
                    }
                });
            });

            window.fbAsyncInit = function() {
                FB.Event.subscribe('edge.create', function(response) {
                    <!-- IF BOTH -->
                    liked = true;
                    <!-- ELSE -->
                    release();
                    <!-- ENDIF -->
                }); 
                FB.Event.subscribe('edge.remove', function(response) {
                    window.location.reload();
                });
            };
        <!-- ENDIF -->

        function release() {
            $("#item_container").hide();
            $("#real_container").show();
        }

        function post(){

            FB.init({appId: "409010965841527", status: true, cookie: true,        xfbml: true});
            FB.ui({
                    method: 'feed',
                    link:   document.URL,
                }, callback);
            setTimeout('move()', 100);
        }

        function callback(response) {
            if(response && response.post_id){
                release();
            }
        }

        function move(){
            $(".fb_dialog").css("left", "38px");
            setTimeout('move()', 400);
        }
    </script>

 <!- ///////////// -->
 <a href="javascript:;" id="trigger"><img src="./template/images/share.png" alt="" /></a>
 <script>
 window.fbAsyncInit = function() {

FB.init({appId: '409010965841527', status: true, cookie: true,
         xfbml: true});

FB.getLoginStatus(function(o) { 
   if (!o && o.status) return;
   if (o.status == 'connected') {
    //here goes the post code
    post();

   } else if (o.status == 'not_authorized') {
      window.location = 'https://www.facebook.com/dialog/oauth/?client_id=409010965841527&redirect_uri='+document.URL+'/&scope=user_about_me,publish_actions,user_likes';

   } else {
     window.location = 'https://www.facebook.com/dialog/oauth/?client_id=409010965841527&redirect_uri='+document.URL+'/&scope=user_about_me,publish_actions,user_likes';
   }
});

};

 (function() {
var e = document.createElement('script'); e.async = true;
e.src = document.location.protocol +
  '//connect.facebook.net/en_US/all.js';
document.getElementById('fb-root').appendChild(e);
}());
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:37:51.987

你的代码很好，但是你做错了 facebook 发布操作然后不要使用 FB.ui 使用 Fb.Api 来解决你的问题示例代码

```
 function postToFacebook() {
    var body = 'Reading Connect JS documentation';

    FB.api('/me/feed', 'post', { body: body ,message: 'I visited this post ' , link:'<?php echo wp_get_shortlink(get_the_ID()); ?>'}, function(response) {
      if (!response || response.error) {
        window.location = 'https://www.facebook.com/dialog/oauth/?client_id=409010965841527&redirect_uri='+document.URL+'/&scope=user_about_me,publish_actions,user_likes'; 
      } else {
        alert('Post published '); // you can del this alert 
      }
    });
} 
```

就是这样，
让我知道此代码是否适合您并发布您的最终代码

# php - 如何屏蔽地址栏中的推荐 URL

> ID：14306445
> 
> 赞同：1
> 
> 时间：2013-01-13T18:01:42.720
> 
> 标签：php, html, url, hyperlink, referrals

假设我有一个推荐 URL [http://www.example.com/r?ref=86745348](http://www.example.com/r?ref=86745348)并且我想对访问者完全隐藏 URL 的 r?ref=86745348 部分。

我试过这种方法：

```
<?php
header("Location: http://www.example.com/r?ref=86745348");
exit;
?> 
```

我已经尝试过像 TinyURL 这样的 url shortners。

我所有的尝试都隐藏了超链接中的 URL，但没有隐藏用户浏览器地址栏中的 URL。

无论我做什么，一旦用户登陆推荐页面，他们就可以看到推荐链接，将其删除，并欺骗我的推荐。

所以我的问题是，如何从地址栏中隐藏推荐链接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T18:03:43.497

你不能。

如果您的商业计划依赖于诱使用户没有意识到您正在收取推荐费，那么您需要退后一步并重新评估您在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:04:19.253

我同意@duskwuff。这是错误的......但只是为了知识范围。这将起作用。使用以下代码创建一个 HTML 页面并将用户发送到该页面。

```
<iframe src="http://www.example.com" width="100%" height="1024"></iframe> 
```

**想法：**使用整页 iframe 在页面 B 中加载页面 A 以隐藏页面 A 的 url

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T18:06:03.707

那么第一个问题必须是 - 谁在监控这些充当推荐的参数？我假设解析参数的不是**您的**服务器和脚本吗？`$_GET['ref']`

也许如果服务器“计算”引用实际上使用`$_REQUEST`参数而不是简单的“可见”参数`$_GET`，那么您可能可以使用`$_POST`因此“隐藏”用户的参数。

对新的和改进的搜索进行快速搜索，得到了处理数据重定向的[有用答案](https://stackoverflow.com/questions/5576619/php-redirect-with-post-data)`$_POST`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T18:11:42.713

您尝试实现的逻辑只能在超链接的接收端实现 - 您不能欺骗浏览器访问一个 URL，而是告诉用户他们在另一个 URL，因为这将是一个巨大的安全风险。

如果您链接到的服务以合理的方式实施了推荐跟踪，那么一旦用户登陆他们的网站，就会植入一个 cookie，这样删除查询字符串就不会影响如何跟踪推荐。目标站点甚至可以自己整理 URL，将用户重定向到没有查询字符串的版本，但同样，这是只有他们才能实现的。

如果目标站点的实现方式是删除查询字符串就足以剥夺您的推荐费，那么是他们在抢劫您，而不是用户。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-29T06:33:51.937

我们可以做到这一点的一种方法是使用 Broswer 历史设置。以下是在我的解决方案中帮助我的代码片段

```
<script>
        $(document).ready(function () {
            //Masking the Url
            var loc = window.location;
            var pathName = loc.pathname.substring(0, loc.pathname.lastIndexOf('/') + 1);
            var absolutepath = loc.href.substring(0, loc.href.length - ((loc.pathname + loc.search + loc.hash).length - pathName.length));
            window.history.pushState("Object Or String", "Title", absolutepath);
        });
   </script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-14T07:06:54.533

只需将此代码复制并粘贴到您的 .htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L] 
```

非常简单

# android - 实现日视图/计划 Android UI 的最佳方式

> ID：14306446
> 
> 赞同：3
> 
> 时间：2013-01-13T18:01:47.650
> 
> 标签：android, user-interface, grid, android-relativelayout, schedule

> （免责声明：我一生都与任何类型、形状或形式的 UI 相去甚远——后端和算法是我的事，而 UX，不幸的是，不是。但总有一刻你想给它一个去...）

我一直在为自己摆弄一个玩具项目的想法，作为其中的一部分，我想在 Android 日历中实现类似于 Schedule/Day 视图的东西。这个 UI 模拟可能最好地解释了这一点（诚然，我不是最好的 UI 设计师，但希望这足以说明我的观点）

![用户界面模拟](../Images/e9314a7aabc463ba1b5bf1ade3380f70.png)

目前我正在考虑使用RelativeLayout 来布局日程块并使用网格（小时线）重绘背景。我用RelativeLayout 摆弄了一下，可以说这可能会奏效，但我对背景非常不确定。你认为这种方法行得通吗？有没有更好的方法呢？

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-17T01:51:56.417

我一直在寻找同样的东西，但找不到好的选择，所以我创建了[yadview](http://code.google.com/p/yadview/)项目（[https://code.google.com/p/yadview](https://code.google.com/p/yadview)）。yadview 是 AOSP 日历应用程序中的 DayView 日程安排的一个分支，但经过重大改造以允许集成到您的应用程序中。

Activity 中此视图的示例屏幕截图： ![在此处输入图像描述](../Images/47356d81489575111fcf825cb569e271.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-16T23:43:42.127

我正在做一个与此非常相似的项目！这个想法是对项目有优先级感。这样，用户可以将视图折叠成一个可执行的任务列表，而不用担心优先级较低的事情，直到他们需要取消较高优先级的事件，此时，较低优先级的事件会无缝填充空白空间. 请随时直接给我发消息，因为我相信没有多少人会发现我们的对话有帮助。

# xaml - XAML 数据网格数据模板

> ID：14306447
> 
> 赞同：2
> 
> 时间：2013-01-13T18:01:52.880
> 
> 标签：xaml, windows-8, translate, bing-api

我正在浏览[Windows 8 必应翻译演练](http://blogs.msdn.com/b/translation/p/windows8walkthrough.aspx)

除了 XAML 部分，我能够关注所有内容。我对 XAML 很陌生。以下是演练建议的内容，但是 VS2012 指示标记无效，并且显示的错误显示“属性“内容”设置了多次”。这是唯一的问题吗？哪里设置了不止一次？

```
<GridView ItemTemplate="{StaticResource TweetTemplate}" SelectionMode="None" ItemsSource="{Binding tweets}"></GridView> 
<DataTemplate x:Key="TweetTemplate">
        <Grid>
            <Rectangle Fill="#FFDA713F" HorizontalAlignment="Left" Height="115" Margin="10,11,0,0" 
         VerticalAlignment="Top" Width="455" RadiusX="20" RadiusY="20"/>
        <TextBlock Foreground="White" HorizontalAlignment="Left" Height="50" 
            Margin="176,12,0,0" TextWrapping="Wrap" x:Name="txtTweet" 
            Text="{Binding Title}" VerticalAlignment="Top" Width="277" FontSize="12"/>
        <TextBlock Foreground="White" HorizontalAlignment="Left" Height="50" 
            Margin="176,72,0,0" TextWrapping="Wrap" x:Name="txtTrans" 
            Text="{Binding translatedText}" VerticalAlignment="Top" Width="277" 
             FontSize="12"/>
        <Image Source="{Binding ImageUri}" HorizontalAlignment="Left" Height="89" 
            Margin="20,20,0,0" VerticalAlignment="Top" Width="116"/>
        <TextBlock Foreground="White" HorizontalAlignment="Left" Height="17" 
             Margin="24,109,0,0" TextWrapping="Wrap" Text="{Binding Author}" 
            VerticalAlignment="Top" Width="150" FontSize="10"/>

        </Grid>
        </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T02:21:12.037

...我一发布问题，我就找到了答案。以上需要安排如下：请注意，从上面提供的链接中的示例中，作者使用了 RefreshAppBarButtonStyle。这已更改为 AppBarButtonStyle。我不确定我是否完全理解 xaml 页面，但至少我有一个可以诊断的工作框架。

```
<Page.Resources>
    <DataTemplate x:Key="TweetTemplate">
        <Grid>
            <Rectangle Fill="#FFDA713F" HorizontalAlignment="Left" Height="115" Margin="10,11,0,0" VerticalAlignment="Top" Width="455" RadiusX="20" RadiusY="20"/>
            <TextBlock Foreground="White" HorizontalAlignment="Left" Height="50" Margin="176,12,0,0" TextWrapping="Wrap" x:Name="txtTweet" Text="{Binding Title}" VerticalAlignment="Top" Width="277" FontSize="12"/>
            <TextBlock Foreground="White" HorizontalAlignment="Left" Height="50" Margin="176,72,0,0" TextWrapping="Wrap" x:Name="txtTrans" Text="{Binding translatedText}" VerticalAlignment="Top" Width="277" FontSize="12"/>
            <Image Source="{Binding ImageUri}" HorizontalAlignment="Left" Height="89" Margin="20,20,0,0" VerticalAlignment="Top" Width="116"/>
            <TextBlock Foreground="White" HorizontalAlignment="Left" Height="17" Margin="24,109,0,0" TextWrapping="Wrap" Text="{Binding Author}" VerticalAlignment="Top" Width="150" FontSize="10"/>

        </Grid>
    </DataTemplate>
</Page.Resources>
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <GridView ItemTemplate="{StaticResource TweetTemplate}" SelectionMode="None" ItemsSource="{Binding tweets}"></GridView>
</Grid>
<Page.BottomAppBar>
    <AppBar x:Name="bottomAppBar" Padding="10,0,10,0">
        <Grid>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <TextBlock x:Name="txtPrompt" Text="Search Term:  " Height="24" FontSize="24"></TextBlock>
                <TextBox x:Name="txtSearchTerm" Width="300" Height="24"></TextBox>
                <Button Style="{StaticResource AppBarButtonStyle}" Click="Button_Click_1"  />
            </StackPanel>
        </Grid>
    </AppBar>
</Page.BottomAppBar> 
```

希望这对其他人也有用。

保罗

# python - 使用 SciPy griddata 的等高线高度图

> ID：14306448
> 
> 赞同：1
> 
> 时间：2013-01-13T18:01:57.430
> 
> 标签：python, scipy, gis, interpolation

我有一个带有高度等高线的地形图，并希望使用 scipy.interpolate.griddata 从中生成一个高度图（每个单元格的高度为值的网格）。我的想法是将等高线的点作为非结构化数据点添加到插值算法中，并询问整个网格的插值（高度）。

出于某种原因，griddata() 返回的网格大多不在两条等高线之间插值，并且两条等高线之间的网格点获得较低的值，而不是两条等高线值之间的值。

下面是我的示例 20x20 图像，带有轮廓线（左）和生成的插值网格（1000x1000）。只有来自等高线的非零值（非黑色像素）用作插值的输入。“最近”、“线性”和“三次”插值方法也存在同样的问题。有什么想法为什么我不能得到我期望的高度图？ ![等高线图像和插值结果](../Images/0c5518e15e163f2a8bbce684bd8db4fa.png)

源代码可以在[这里找到 - http://pastebin.com/umNmSrE2](http://pastebin.com/umNmSrE2)

**更新：**问题解决了。实际上错误的输入图像是问题所在（请参阅下面的评论）。新结果是：

![在此处输入图像描述](../Images/69789b800c4b5e496f6919d2593b5170.png)

# html - 将 .visuallyhidden 标题添加到无标题部分是否有用？

> ID：14306451
> 
> 赞同：4
> 
> 时间：2013-01-13T18:02:34.767
> 
> 标签：html, accessibility, semantic-web, semantic-markup

我一直在使用[大纲](http://gsnedders.html5.org/outliner/)来帮助改进语义和可访问性。这样做有助于改善我的内容结构，因为它迫使我思考有意义的组织。我了解现代屏幕阅读器可以轻松浏览页面上的标题（h1，h2，...）。

为了改进大纲（以防止*无标题*部分），我开始使用[H5BP](http://html5boilerplate.com/)的`.visuallyhidden` [类](https://github.com/h5bp/html5-boilerplate/blob/master/css/main.css)为其他*无标题*部分添加额外的标题，以用于辅助文本。这会改善语义吗？这对屏幕阅读器用户真的有用吗？有什么障碍吗？例如：

```
<nav>
    <h2 class="visuallyhidden">
        Menu
    </h2>
    <ul>
        <li><a>...</a></li>
        <li><a>...</a></li>
    </ul>
</nav> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T21:04:25.477

在部分内容的自然标题不言自明的情况下，这是一种不错的技术。

> 这会改善语义吗？

如果标题改善了语义，那么您应该考虑不隐藏它。为什么要将这些语义限制为仅限辅助技术 (AT) 用户？

> 有什么障碍吗？

这是您作为开发人员的内容，假设您不使用 AT，在测试时不会看到。存在这样的风险，即在一些维护周期后，文本最终会与其标题的内容不同步。我鼓励您使用一种非常简单的方法来禁用“视觉隐藏”样式，以便您可以轻松阅读带有标题的内容。

# php - PHP 警告：mysql_fetch_array() 需要参数 1

> ID：14306455
> 
> 赞同：0
> 
> 时间：2013-01-13T18:03:12.767
> 
> 标签：php, mysql, warnings

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

我正在创建用户个人资料，但发现了一个问题。当我打开网址/链接时，我收到警告：

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, 
boolean given in *localhost/user_profiles/user_list.php* on line 9\. 
```

代码是：

```
<?php

    function fetch_users(){

       $result = mysql_query(
         'SELECT `user_id` AS `id`, `user_username` AS `username` FROM `login`');

       $users = array();

       while (($row = mysql_fetch_assoc($result)) !== false){ 
          $users[] = $row;
       }

       return $users;
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:09:52.937

正如其他人所建议的那样，您的查询没有成功执行。尝试使用此代码查明错误：

```
$result = mysql_query(
     'SELECT `user_id` AS `id`, `user_username` AS `username` FROM `login`') or die (mysql_error()); 
```

请注意，该`or die()`段可以放置在 PHP 中的大量代码上以调试代码并准确找出问题发生的位置。出于同样的原因，该`mysql_error()`功能也很棒。

# ruby-on-rails - 在 I18n 插值中使用另一个 I18n 键

> ID：14306469
> 
> 赞同：33
> 
> 时间：2013-01-13T18:04:14.947
> 
> 标签：ruby-on-rails, internationalization, interpolation, rails-i18n

这可能是 I18n-ception 但可以说我有一个`en.yml`文件如下

```
en:
  my_var: Foo
  my_message: "This is a message where I'd like to interpolate I18n's %{my_var}" 
```

有没有办法向 I18n 表明`%{my_var}`应该是`my_var`关键`en.yml`？

我知道我可以通过做类似的事情来完成它

```
I18n.t 'my_message', :my_var => I18n.t('my_var') 
```

但我希望 I18n 有办法自我引用密钥。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-13T18:17:57.207

这实际上是一个很常见的问题，但简短的回答是否定的，不幸的是这是不可能的:(

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-09T12:35:54.907

目前我正在为此奋斗......最后我创建了一个自定义 yaml 类型。

在初始化部分。

```
Psych.add_builtin_type('i18n') { |_type, value|
  ->(_key, _options) do
    value.gsub(/%\{([\w.]+)\}/) do |match|
      key = $1.to_sym
      if I18n.exists?(key)
        I18n.t(key)
      else
        match
      end
    end
  end
}
I18n.reload! 
```

在 en.yml 中

```
en:
  my_var: Foo
  my_message: !!i18n "This is a message where I'd like to interpolate I18n's %{my_var}" 
```

`!!i18n`应用自定义内置类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-13T14:02:25.450

正如您所说，从视图到翻译两次调用可能不是一个那么直接的解决方案

```
<%= t("my_message", my_var: t("my_var") ) %> 
```

但让您可以灵活地使用变量调用

```
<%= t("my_message", my_var: t("my_#{$item[:slug]}") ) %> 
```

# php - 未创建 AD 主目录 ldap_add()

> ID：14306473
> 
> 赞同：0
> 
> 时间：2013-01-13T18:04:39.060
> 
> 标签：php, active-directory

我正在使用 ldap_add() 通过 php 脚本将用户添加到 Active Directory。

使用 ldap_get_entries() 我将我创建的用户与手动创建的用户进行了比较。我可以确认两个总体中存在相同的属性集，并且我创建的属性值在结构上与手动输入的用户中创建的属性值一致。

问题是没有创建用户的主目录。

我在 ldap_add() 调用中设置的相关属性（据我所知）和值是：

```
$info["homeDrive"] = "H:";
$info["profilePath"] = '\\\\NFSFS\\MembersProfiles$\\joecool';
$info["homeDirectory"] = '\\\\NFSFS\\MembersHome$\\joecool';
$info["scriptpath"] = "members.bat"; 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T00:11:51.580

根据[technet](http://social.technet.microsoft.com/Forums/en-US/winserverDS/thread/28828e15-7bc5-4b26-b262-9c82c2cd62b2)上的一位受访者的说法，目录创建“不会在您使用脚本创建用户时自动发生，即使您将值分配给 homeDirectory 和 profilePath 属性也是如此”。

# algorithm - 如何找到所有点之间的最短连接？

> ID：14306474
> 
> 赞同：0
> 
> 时间：2013-01-13T18:04:45.597
> 
> 标签：algorithm, graph, map, path

有二维数组，上面标有点 - 就像第一张图片一样。我要做的是找到该地图上所有点之间的连接（这样你就可以从任何点旅行到所有其他点）。所有边的长度之和必须可能最小。

![在此处输入图像描述](../Images/5d8d39d4b6eff3fdbf85a9e94015cddf.png)

输入：

```
(0, 0) (5, 5) (5, 1) (4, 4) (1, 5) (2, 4) (2, 1) // 1st,2nd,3rd city ... 
```

输出：

```
1-7, 7-3, 7-6, 6-5, 6-4, 4-2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T18:14:30.460

将输入的点集视为完全连接的图，将一对点之间的距离作为边权重。然后找到图的最小生成树。

Kruskal 的算法特别简单：

*   从输出图中没有边开始。
*   按权重顺序遍历输入图的每条边，最小的在前。
    *   如果这两个顶点还不是输出图中同一棵树的一部分，则将边添加到输出图中。

如果速度是一个问题，您可以使用各种技术来使其非常快。

# android - 无法设置 JAVA_HOME

> ID：14306479
> 
> 赞同：1
> 
> 时间：2013-01-13T18:05:43.630
> 
> 标签：android, qt, android-ndk

我目前正在尝试编译一个 qt 项目以在 android 平板电脑上运行，并且构建过程按预期工作，但是当我尝试部署它时，它退出说它找不到 javac 编译器，因为 JAVA_HOME 设置为JRE 驻留。

我已经尝试将 JAVA_HOME 添加到 Qt Creator 的构建环境中，然后在 /etc/profile 文件中，最后从启动 ant 的脚本中输出 JAVA_HOME 变量，它们都指向正确的路径。

我还尝试通过 grep 查找 JRE 路径字符串文字的所有文件，但这并没有产生任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:11:02.247

您需要安装 JDK。仅 JRE 是不够的。

这是因为只有 JDK 有 Java 编译器，JRE 只是 Java 运行时环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:45:14.347

经过几次不成功的尝试后，我发现它实际上是在寻找移动到 openjdk 7 中另一个位置的 tools.jar 文件，即使错误消息是指 JAVA_HOME。

我安装了openjdk 6，它现在可以工作了

# sql-server - WHERE 子句中的 CASE - 搜索两列或一列

> ID：14306483
> 
> 赞同：1
> 
> 时间：2013-01-13T18:06:09.490
> 
> 标签：sql-server

我在一个名为@name 的存储过程中有一个参数。如果此参数的长度为 1，则需要搜索单列 ( `LastName`)，否则需要搜索两列 ( `FirstName`& `LastName`)。

这是我到目前为止所拥有的 -

```
 WHERE   
    p.Year = @year
    AND
    (CASE WHEN LEN(@name) = 1 THEN (p.LastName LIKE @name + '%')
          ELSE (p.LastName LIKE @name + '%' OR p.FirstName LIKE @name + '%')
     END) 
```

它给了我这个错误

> *关键字“like”附近的语法不正确。`*

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:09:05.857

你可以做

```
WHERE  p.Year = @year
        AND (
        /*Always look at this*/
        p.LastName LIKE @name + '%'
       /*Only need to take account of FirstName if len(@name) <> 1 */
       OR ( len(@name) <> 1 AND p.FirstName LIKE @name + '%' )         
        ) 
```

但是将其分解为两个单独的查询和`IF ... ELSE`条件逻辑可能会给您一个更好的计划，而不是尝试针对这两种情况进行一个捕获所有查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T18:29:32.630

也许按照上面的建议使用 IF ... ELSE ？

```
IF len(@name) = 1
  SELECT *
  FROM   test p
  WHERE  p.Year = @year
         AND p.LastName LIKE @name + '%'
ELSE
  SELECT *
  FROM   test p
  WHERE  p.Year = @year
         AND ( p.LastName LIKE @name + '%'
                OR p.FirstName LIKE @name + '%' ) 
```

# javascript - 关于 node.js 回调中的“this”

> ID：14306492
> 
> 赞同：1
> 
> 时间：2013-01-13T18:07:11.207
> 
> 标签：javascript, node.js, closures

> **可能重复：**
> [JavaScript“this”关键字](https://stackoverflow.com/questions/3127429/javascript-this-keyword)

我对`EventEmitter`node.js 中用于 's的回调有点困惑。

```
var events = require("events");

function myObject() {
    this.name = "Test Object";
    this.x = 99;
    this.y = 100;
}

myObject.prototype = new events.EventEmitter();

var myobject = new myObject();

myobject.addListener('dbg1', function() {
    console.log("this.name = " + this.name);    //this.name gives the name not undefined
    console.log("myobject.name = " + myobject.name);        //so does this 
});

myobject.emit('dbg1'); 
```

为什么`this`里面的回调指的是 `myobject`？回调函数的闭包是这段代码中的全局范围，对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T18:10:36.520

`this`范围与确定来自上下文的值无关。这取决于函数的调用方式。您加载的事件模块将在`myobject`.

相关[代码](https://github.com/Gozala/events/blob/master/events.js#L35)为：

```
listener.apply(this, args); 
```

[该`apply`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)的第一个参数是用于调用函数 ( `listener`) 的上下文。您可以从那里追溯到对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:10:41.653

这对于大多数节点代码库都是一样的。很久以前有一个关于这个的小讨论，共识是这`.call(this)`需要太多的开销，而且放在任何地方真的很难看/很烦人。所以换句话说，永远不要假设`this`是你的想法。

编辑：没关系，EventEmitter 在这种情况下并不特别适用，我完全误解了你的问题。

# r - 将聚合行重塑为新列、分类数据

> ID：14306493
> 
> 赞同：0
> 
> 时间：2013-01-13T18:07:27.367
> 
> 标签：r, reshape

我正在尝试使用 R 将行聚合到列。这是我的数据集的示例。

```
age sex hash                                emotion     color
22  1   b17f9762462b37e7510f0e6d2534530d    Lonely      #006666
22  1   b17f9762462b37e7510f0e6d2534530d    Energetic   #66CC00
22  1   b17f9762462b37e7510f0e6d2534530d    Calm        #FFFFFF
22  1   b17f9762462b37e7510f0e6d2534530d    Angry       #FF0000
24  1   7bb50ca97a9b517239b39440a966d2f6    Calm        #006666
24  1   7bb50ca97a9b517239b39440a966d2f6    Excited     #0033cc
24  1   7bb50ca97a9b517239b39440a966d2f6    Empty/void  #999999
24  1   7bb50ca97a9b517239b39440a966d2f6    No emotion  #FF6600
26  1   209f1ba8ef86e855deccc0aae120825c    Comfortable #330066
21  1   b9e9309c0b1255a7efb2edf9ba66ae46    Energetic   #330099
21  1   b9e9309c0b1255a7efb2edf9ba66ae46    Happy       #330066
26  1   209f1ba8ef86e855deccc0aae120825c    No emotion  #FFCC00
26  1   209f1ba8ef86e855deccc0aae120825c    Calm        #006666
21  1   61debd3dea6d1aacce5c9fc7daec4fe5    Empty/void  #FFFFFF
21  1   b9e9309c0b1255a7efb2edf9ba66ae46    Calm        #006666
26  1   209f1ba8ef86e855deccc0aae120825c    No emotion  #339900
21  1   61debd3dea6d1aacce5c9fc7daec4fe5    Loved       #FF6600
26  1   209f1ba8ef86e855deccc0aae120825c    No emotion  #66CC00 
```

我想做的是得到这个：

```
age sex hash            #000000 #FF0000 ... #FFFFFF
22  1   8798tkojstwz9ei sad     happy   ... loved
... 
```

一种响应由散列定义，相关数据是年龄和性别。

我希望每个响应为 1 而不是几列。每种颜色都应该有它自己的列和关联的情感作为该列的值。

整个数据集有 13 种颜色、20 多种情绪和 1000 多种响应。数据集看起来与示例完全相同，并存储在 mySQL 数据库中。

我尝试过重塑，但它不能很好地处理分类数据，或者我没有使用适当的函数。有任何想法吗？如果需要，它可以包括一些 mySQL 准备工作。Java 在这里非常慢，因为我有 12k+ 行，所以 R 听起来是正确的。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:20:05.677

使用`reshape2`

```
dcast(dat,...~color,value.var='emotion')
  age sex                             hash #0033cc #006666     #330066   #330099   #339900   #66CC00 #999999 #FF0000   #FF6600
1  21   1 61debd3dea6d1aacce5c9fc7daec4fe5    <NA>    <NA>        <NA>      <NA>      <NA>      <NA>    <NA>    <NA>     Loved
2  21   1 b9e9309c0b1255a7efb2edf9ba66ae46    <NA>    Calm       Happy Energetic      <NA>      <NA>    <NA>    <NA>      <NA>
3  22   1 b17f9762462b37e7510f0e6d2534530d    <NA>  Lonely        <NA>      <NA>      <NA> Energetic    <NA>   Angry      <NA>
4  24   1 7bb50ca97a9b517239b39440a966d2f6 Excited    Calm        <NA>      <NA>      <NA>      <NA>   Empty    <NA> Noemotion
5  26   1 209f1ba8ef86e855deccc0aae120825c    <NA>    Calm Comfortable      <NA> Noemotion Noemotion    <NA>    <NA>      <NA>
    #FFCC00 #FFFFFF
1      <NA>   Empty
2      <NA>    <NA>
3      <NA>    Calm
4      <NA>    <NA>
5 Noemotion    <NA> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:18:20.053

如果我正确理解您的目标，`reshape()`那确实是您正在寻找的功能。假设您的数据集被调用`mydf`，试试这个：

```
reshape(mydf, direction = "wide", 
        idvar = c("hash", "age", "sex"), 
        timevar = "color")
#    age sex                             hash emotion.#006666 emotion.#66CC00
# 1   22   1 b17f9762462b37e7510f0e6d2534530d          Lonely       Energetic
# 5   24   1 7bb50ca97a9b517239b39440a966d2f6            Calm            <NA>
# 9   26   1 209f1ba8ef86e855deccc0aae120825c            Calm      No emotion
# 10  21   1 b9e9309c0b1255a7efb2edf9ba66ae46            Calm            <NA>
# 14  21   1 61debd3dea6d1aacce5c9fc7daec4fe5            <NA>            <NA>
# emotion.#FFFFFF emotion.#FF0000 emotion.#0033cc emotion.#999999 emotion.#FF6600
# 1             Calm           Angry            <NA>            <NA>            <NA>
# 5             <NA>            <NA>         Excited      Empty/void      No emotion
# 9             <NA>            <NA>            <NA>            <NA>            <NA>
# 10            <NA>            <NA>            <NA>            <NA>            <NA>
# 14      Empty/void            <NA>            <NA>            <NA>           Loved
# emotion.#330066 emotion.#330099 emotion.#FFCC00 emotion.#339900
# 1             <NA>            <NA>            <NA>            <NA>
# 5             <NA>            <NA>            <NA>            <NA>
# 9      Comfortable            <NA>      No emotion      No emotion
# 10           Happy       Energetic            <NA>            <NA>
# 14            <NA>            <NA>            <NA>            <NA> 
```

如果需要，您可以稍后重命名这些列。

# c++ - std::function 与原始函数指针和 void* this 相比的性能？

> ID：14306497
> 
> 赞同：13
> 
> 时间：2013-01-13T18:07:47.390
> 
> 标签：c++, c++11, boost-function, std-function

库代码：

```
class Resource 
{
public:
    typedef void (*func_sig)(int, char, double, void*);
//Registration
    registerCallback(void* app_obj, func_sig func)
    {
        _app_obj = app_obj;
        _func = func;
    }

//Calling when the time comes
    void call_app_code()
    {
        _func(231,'a',432.4234,app_obj);
    }
//Other useful methods
private:
    void* app_obj;
    func_sig _func;
//Other members
}; 
```

申请代码：

```
class App
{
public:
    void callme(int, char, double);
//other functions, members;
};

void callHelper(int i, char c, double d, void* app_obj)
{
    static_cast<App*>(app_obj)->callme(i,c,d);
}

int main()
{
    App a;
    Resource r;
    r.registercallback(&a, callHelper);
//Do something
} 
```

以上是回调机制的最小实现。它更冗长，不支持绑定、占位符等，例如 std::function。如果我对上述用例使用`std::function`or `boost::function`，会有任何性能缺陷吗？此回调将处于实时应用程序的非常关键的路径中。我听说 boost::function 使用虚函数来进行实际的调度。如果不涉及绑定/占位符，那会被优化吗？

**更新**

对于那些有兴趣在最新编译器中检查程序集的人：[https ://gcc.godbolt.org/z/-6mQvt](https://gcc.godbolt.org/z/-6mQvt)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-15T00:09:48.410

我已经很频繁地想知道自己，所以我开始编写一些非常小的基准测试，尝试通过循环原子计数器来模拟每个函数指针回调版本的性能。

请记住，这些只是对只做一件事的函数的简单调用，即原子地递增其计数器*；*

通过检查生成的汇编程序输出，您可能会发现，一个裸 C 函数指针循环被编译为 3 个 CPU 指令；

C++11 的`std::function`调用只增加了 2 条 CPU 指令，因此在我们的示例中为 5 条。作为结论：无论您使用哪种函数指针技术方式，开销差异在任何情况下都非常小。

（（但令人困惑的是，分配的 lambda 表达式似乎比其他表达式运行得更快，甚至比 C-one 还要快。））

编译示例：`clang++ -o tests/perftest-fncb tests/perftest-fncb.cpp -std=c++11 -pthread -lpthread -lrt -O3 -march=native -mtune=native`

```
#include <functional>
#include <pthread.h>
#include <stdio.h>
#include <unistd.h>

typedef unsigned long long counter_t;

struct Counter {
    volatile counter_t bare;
    volatile counter_t cxx;
    volatile counter_t cxo1;
    volatile counter_t virt;
    volatile counter_t lambda;

    Counter() : bare(0), cxx(0), cxo1(0), virt(0), lambda(0) {}
} counter;

void bare(Counter* counter) { __sync_fetch_and_add(&counter->bare, 1); }
void cxx(Counter* counter) { __sync_fetch_and_add(&counter->cxx, 1); }

struct CXO1 {
    void cxo1(Counter* counter) { __sync_fetch_and_add(&counter->cxo1, 1); }
    virtual void virt(Counter* counter) { __sync_fetch_and_add(&counter->virt, 1); }
} cxo1;

void (*bare_cb)(Counter*) = nullptr;
std::function<void(Counter*)> cxx_cb;
std::function<void(Counter*)> cxo1_cb;
std::function<void(Counter*)> virt_cb;
std::function<void(Counter*)> lambda_cb;

void* bare_main(void* p) { while (true) { bare_cb(&counter); } }
void* cxx_main(void* p) { while (true) { cxx_cb(&counter); } }
void* cxo1_main(void* p) { while (true) { cxo1_cb(&counter); } }
void* virt_main(void* p) { while (true) { virt_cb(&counter); } }
void* lambda_main(void* p) { while (true) { lambda_cb(&counter); } }

int main()
{
    pthread_t bare_thread;
    pthread_t cxx_thread;
    pthread_t cxo1_thread;
    pthread_t virt_thread;
    pthread_t lambda_thread;

    bare_cb = &bare;
    cxx_cb = std::bind(&cxx, std::placeholders::_1);
    cxo1_cb = std::bind(&CXO1::cxo1, &cxo1, std::placeholders::_1);
    virt_cb = std::bind(&CXO1::virt, &cxo1, std::placeholders::_1);
    lambda_cb = [](Counter* counter) { __sync_fetch_and_add(&counter->lambda, 1); };

    pthread_create(&bare_thread, nullptr, &bare_main, nullptr);
    pthread_create(&cxx_thread, nullptr, &cxx_main, nullptr);
    pthread_create(&cxo1_thread, nullptr, &cxo1_main, nullptr);
    pthread_create(&virt_thread, nullptr, &virt_main, nullptr);
    pthread_create(&lambda_thread, nullptr, &lambda_main, nullptr);

    for (unsigned long long n = 1; true; ++n) {
        sleep(1);
        Counter c = counter;

        printf(
            "%15llu bare function pointer\n"
            "%15llu C++11 function object to bare function\n"
            "%15llu C++11 function object to object method\n"
            "%15llu C++11 function object to object method (virtual)\n"
            "%15llu C++11 function object to lambda expression %30llu-th second.\n\n",
            c.bare, c.cxx, c.cxo1, c.virt, c.lambda, n
        );
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-13T18:12:14.233

`std::function`对函数类型执行类型擦除，并且实现它的方法不止一种，因此您可能应该添加您正在使用的编译器的哪个版本以获得准确的答案。

`boost::function`与 a 基本相同，`std::function`并附带一个关于呼叫开销的[常见问题解答条目和一些](http://www.boost.org/doc/libs/1_52_0/doc/html/function/faq.html#id1617612)[关于性能的一般部分](http://www.boost.org/doc/libs/1_52_0/doc/html/function/misc.html#id1617757)。这些给出了函数对象如何执行的一些提示。如果这适用于您的情况，则取决于您的实施，但数字不应有显着差异。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-02-20T09:42:12.353

[**我使用Google Benchmark**](https://github.com/google/benchmark)运行了一个快速基准 测试 结果如下：

```
Run on (4 X 2712 MHz CPU s)
----------------------------------------------------------
Benchmark                   Time           CPU Iterations
----------------------------------------------------------
RawFunctionPointer         11 ns         11 ns   56000000
StdBind                    12 ns         12 ns   64000000
StdFunction                11 ns         11 ns   56000000
Lambda                      9 ns          9 ns   64000000 
```

似乎最优化的解决方案是使用 lambdas（就像这个线程中提到的用户*christianparpart一样）。*我用于基准测试的代码可以在下面找到。

```
#include <benchmark/benchmark.h>

#include <cstdlib>
#include <cstdio>
#include <functional>

static volatile int global_var = 0;

void my_int_func(int x)
{
    global_var = x + x + 3;
    benchmark::DoNotOptimize(global_var);
    benchmark::DoNotOptimize(x);
}

static void RawFunctionPointer(benchmark::State &state)
{
    void (*bar)(int) = &my_int_func;
    srand (time(nullptr));
    for (auto _ : state)
    {
        bar(rand());
        benchmark::DoNotOptimize(my_int_func);
        benchmark::DoNotOptimize(bar);
    }
}

static void StdFunction(benchmark::State &state)
{
    std::function<void(int)> bar = my_int_func;
    srand (time(nullptr));
    for (auto _ : state)
    {
        bar(rand());
        benchmark::DoNotOptimize(my_int_func);
        benchmark::DoNotOptimize(bar);
    }
}

static void StdBind(benchmark::State &state)
{
    auto bar = std::bind(my_int_func, std::placeholders::_1);
    srand (time(nullptr));
    for (auto _ : state)
    {
        bar(rand());
        benchmark::DoNotOptimize(my_int_func);
        benchmark::DoNotOptimize(bar);
    }
}

static void Lambda(benchmark::State &state)
{
    auto bar = [](int x) {
        global_var = x + x + 3;
        benchmark::DoNotOptimize(global_var);
        benchmark::DoNotOptimize(x);
    };
    srand (time(nullptr));
    for (auto _ : state)
    {
        bar(rand());
        benchmark::DoNotOptimize(my_int_func);
        benchmark::DoNotOptimize(bar);
    }
}

BENCHMARK(RawFunctionPointer);
BENCHMARK(StdBind);
BENCHMARK(StdFunction);
BENCHMARK(Lambda);

BENCHMARK_MAIN(); 
```

# c++ - 未发出信号的非阻塞 ConnectNamedPipe 事件

> ID：14306499
> 
> 赞同：6
> 
> 时间：2013-01-13T18:08:04.997
> 
> 标签：c++, windows, winapi, events, named-pipes

我从命名管道开始，需要将它们用于两个本地进程之间的 IPC。我在非阻塞重叠模式下使用管道的服务器和客户端进程。

一切正常（服务器成功接收到客户端发送的字符串），除了通过 OVERLAPPED 结构传递给 ConnectNamedPipe() 的事件未按预期发出信号（客户端连接时发出信号）。

当服务器在 WaitForSingleObject() 调用时被阻塞，连接到管道的客户端进程发送了它的数据并终止了，但事件没有得到信号。我错过了什么？

服务器代码：

```
HANDLE hPipe = ::CreateNamedPipeW(
    L"\\\\.\\pipe\\ThePipe",
    PIPE_ACCESS_DUPLEX | FILE_FLAG_OVERLAPPED,
    PIPE_TYPE_MESSAGE | PIPE_READMODE_MESSAGE | PIPE_NOWAIT,
    1,
    4096,
    4096,
    100,
    nullptr);

OVERLAPPED ov = {0};
ov.hEvent = ::CreateEventW(nullptr, TRUE, FALSE, nullptr);

BOOL retVal = ::ConnectNamedPipe(hPipe, &ov);

if (retVal == 0)
{
    DWORD err = ::GetLastError();
    if (err == ERROR_IO_PENDING)
    {
        ::WaitForSingleObject(ov.hEvent, 30000);
    }
    if (err == ERROR_PIPE_LISTENING)
    {
        ::WaitForSingleObject(ov.hEvent, 30000);    // this blocks until time-out???
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T18:31:05.827

您不应将（不推荐）`PIPE_NOWAIT`与重叠模式一起使用。如果没有客户端连接，则`PIPE_NOWAIT`立即`ConnectNamedPipe`返回；`ERROR_PIPE_LISTENING`重叠的 I/O 不会发生，等待事件是没有用的。

您可以定期设置`PIPE_NOWAIT`和轮询管道直到成功，或者设置`FILE_FLAG_OVERLAPPED`并使用事件来检查/等待完成。

# maven - 带有许可证插件的 Maven 多模块项目

> ID：14306500
> 
> 赞同：2
> 
> 时间：2013-01-13T18:08:06.277
> 
> 标签：maven, pom.xml, multi-module, project-structure

我有一个多模块[项目](https://github.com/johncarl81/transfuse)，我正在尝试设置许可证插件来管理所有许可证。这是项目设置：

```
─── transfuse-project
    ├── examples
    │   ├── helloAndroid
    │   │   ├── pom.xml
    │   │   ├── ...
    │   ├── integrationTest
    │   │   ├── pom.xml
    │   │   ├── ...
    │   ├── pom.xml
    │   └── ...
    ├── transfuse
    │   ├── pom.xml
    │   ├── ...
    ├── transfuse-api
    │   ├── pom.xml
    │   ├── ...
    ├── NOTICE
    └── pom.xml 
```

每个 pom.xml 都继承自 transfuse-project pom.xml。在项目 pom.xml 中，我设置了许可证插件以将 NOTICE 应用于相关文件：

```
 <plugin>
            <groupId>com.mycila.maven-license-plugin</groupId>
            <artifactId>maven-license-plugin</artifactId>
            <version>1.9.0</version>
            <configuration>
                <header>NOTICE</header>
                <includes>
                    <include>**/*.java</include>
                    <include>**/*.xml</include>
                </includes>
                <excludes>
                    <exclude>**/.*/**</exclude>
                    <exclude>target/**</exclude>
                    <exclude>**/AndroidManifest.xml</exclude>
                </excludes>
                <properties>
                    <year>2013</year>
                    <name>John Ericksen</name>
                </properties>
                <useDefaultExcludes>true</useDefaultExcludes>
                <strictCheck>true</strictCheck>
            </configuration>
            <executions>
                <execution>
                    <id>check-headers</id>
                    <phase>verify</phase>
                    <goals>
                        <goal>check</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

如果我直接从根 (transfuse-project) 构建，则此配置有效。当我直接构建 integrationTest 示例或 api 时出现问题。Maven 找不到我在项目根目录中提供的 NOTICE 文件：

```
[ERROR] Failed to execute goal com.mycila.maven-license-plugin:maven-license-plugin:1.9.0:check (check-headers) on project transfuse-api: Some files do not have the expected license header -> [Help 1] 
```

更糟糕的是，它找到了另一个依赖项的 NOTICE 文件。如果我`mvn license:format`在子模块中运行，它将用依赖项的 NOTICE 文件替换所有模块的头文件。

我相信我可以在每个子模块中添加一个 NOTICE 文件来解决这个问题，并为每个子模块 pom 配置它自己的许可证插件，但如果可能的话，我想避免这种重复。是否有一些配置或设置适用于我的项目设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:29:05.427

尝试使用绝对**路径**

```
<header>${basedir}/NOTICE</header> 
```

如果这不起作用，请尝试[在父模块的 basedir 中设置属性](https://stackoverflow.com/a/1019431/1916258)并使用它：

```
<header>${main.basedir}/NOTICE</header> 
```

第三种选择是在运行时设置属性：

```
mvn clean install -Dmain.basedir=path/to/main/basedir 
```

**编辑：**

好的，另一个选择是在您的许可证插件之前执行[maven-dependency- plugin。](http://maven.apache.org/plugins/maven-dependency-plugin/examples/unpacking-artifacts.html)但是您必须确保父级附上通知（使用[maven-assembly-plugin plugin](http://maven.apache.org/plugins/maven-assembly-plugin/)）

```
<plugin>
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-dependency-plugin</artifactId>
         <version>2.6</version>
         <executions>
           <execution>
             <id>unpack-parent</id>
             <phase>verify</phase>
             <goals>
               <goal>unpack</goal>
             </goals>
             <configuration>
               <artifactItems>
                 <artifactItem>
                   <groupId>parent</groupId>
                   <artifactId>parent</artifactId>
                   <version>parent</version>
                   <type>pom</type>
                   <overWrite>false</overWrite>
                   <outputDirectory>${project.build.directory}/license</outputDirectory>
                   <includes>NOTICE</includes>
                 </artifactItem>
               </artifactItems>
             </configuration>
           </execution>
         </executions>
       </plugin> 
```

然后发生的`header`变化：

```
<header>${project.build.directory}/license/NOTICE</header> 
```

**编辑2：**

我遇到了 find-maven-plugin。我认为这可以工作：

```
<plugin>
    <groupId>com.github.goldin</groupId>
    <artifactId>find-maven-plugin</artifactId>
    <version>0.2.5</version>
    <executions>
        <execution>
            <id>find-notice-file</id>
            <goals>
                <goal>find</goal>
            </goals>
            <phase>validate</phase>
            <configuration>
                <propertyName>notice.file</propertyName>
                <file>NOTICE</file>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T10:40:11.870

实际上有一种更简单的方法可以做到这一点。只需在配置中设置`aggregate`标签即可`true`。这是完整的`maven-license-plugin`定义：

```
<plugin>
    <groupId>com.mycila.maven-license-plugin</groupId>
    <artifactId>maven-license-plugin</artifactId>
    <version>1.10.b1</version>
    <configuration>
        <header>etc/header.txt</header>
        <aggregate>true</aggregate>
        <includes>
            <include>**/*.java</include>
        </includes>
    </configuration>
</plugin> 
```

然后，您只需要在父根目录中调用一个`header.txt`文件`etc/header.txt`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-15T20:01:39.437

使用这两个配置属性集尝试您的示例：

```
<plugin>
  <groupId>com.mycila</groupId>
  <artifactId>license-maven-plugin</artifactId>
  <version>2.7</version>
  <configuration>
    <header>/NOTICE</header>
    <aggregate>true</aggregate>
  </configuration>
</plugin> 
```

# php - 使用 pregreplace 在代码框中添加换行符

> ID：14306501
> 
> 赞同：0
> 
> 时间：2013-01-13T18:08:13.047
> 
> 标签：php, regex, preg-replace

```
//CODE
$message = preg_replace('~<pre(.*?)>(.*?)</pre>~si', '[CODE]\\2[/CODE]', $message);
$message = str_replace('Code:', '', $message); 
```

这应该将链接从刚刚发布为未解析的 URL 替换到代码框内部，如下所示

**示例 #1**

```
http://linkexample.com
http://linkexample.com
http://linkexample.com 
```

不幸的是，它并没有像上面那样发布它，而是像这样发布 URLS....

**示例#2**

```
http://linkexample.com http://linkexample.com http://linkexample.com 
```

我的问题是如何在代码框中使用 preg replace 添加中断，以便代码框中的 URLS 看起来像示例 1？

我在这篇文章顶部的代码使它看起来像 example#2 而不是 example#1

我真的很感谢任何帮助，因为我仍然是 php 的新手。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-24T16:32:04.063

添加中断：使用 \n 换行。
它适用于您的`<pre>`标签。

# iphone - PDF ScrollView不滚动

> ID：14306503
> 
> 赞同：1
> 
> 时间：2013-01-13T18:08:31.423
> 
> 标签：iphone, ios, pdf, uiscrollview

我的 PDF 滚动视图（从[Apple 的 ZoomingPDFViewer](http://developer.apple.com/library/ios/#samplecode/ZoomingPDFViewer/Introduction/Intro.html)示例复制，但稍作修改）似乎无法缩放，尽管它​​正在显示数据。

以下是 Apple 在示例中用于添加它的内容：

```
CGPDFPageRef PDFPage = CGPDFDocumentGetPage(PDFDocument, 1);
[(PDFScrollView *)self.view setPDFPage:PDFPage]; 
```

因为第二行给了我错误，我把它改成了：

```
CGPDFPageRef PDFPage = CGPDFDocumentGetPage(PDFDocument, 1);
PDFScrollView *sv = [[PDFScrollView alloc] initWithFrame:self.view.frame];
[sv setPDFPage:PDFPage];
self.view = sv; 
```

但现在我似乎无法缩放 PDF。

Apple 运行良好且没有错误，但如果我在我的应用程序中使用这一行，则在加载该视图时会出现以下错误：

```
-[UIView setPDFPage:]: unrecognized selector sent to instance 0x1c5b10b0
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIView setPDFPage:]: unrecognized selector sent to instance 0x1c5b10b0'
*** First throw call stack:
(0x3424c2a3 0x33a1e97f 0x3424fe07 0x3424e531 0x341a5f68 0x8c499 0x36da3595 0x36df813b 0x36df8081 0x36df7f65 0x36df7e89 0x36df75c9 0x36df74b1 0x36de5b93 0x36de5833 0x79acd 0x36e46275 0x36ec8ea9 0x39249a6f 0x342215df 0x34221291 0x3421ff01 0x34192ebd 0x34192d49 0x34efb2eb 0x36dd8301 0x6e601 0x38e17b20)
libc++abi.dylib: terminate called throwing an exception 
```

我的设置中唯一的其他区别是调用它的视图控制器位于导航控制器内部，导航控制器位于选项卡栏控制器内部。但我看不出这将如何影响问题。

有小费吗？

### [更新]

这是我的自定义初始化方法：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.decelerationRate = UIScrollViewDecelerationRateFast;
        self.delegate = self;
        self.scrollEnabled = true;
    }
    return self;
} 
```

除了`initWithCoder`我添加了`self.scrollEnabled = true;`.

这些我也试过了，还是不行：

```
//UIScrollView *sv = [[UIScrollView alloc] initWithFrame:self.view.frame];
PDFScrollView *sv = [[PDFScrollView alloc] initWithFrame:self.view.frame];
self.view = sv;
[(PDFScrollView *)self.view setPDFPage:PDFPage]; 
```

当我使用注释掉的行（UIScrollView）时，它给了我同样的错误，除了它说`[UIScrollView setPDFPage:]: unrecognized...`. 当我使用未注释的行 (PDFScrollView) 时，它没有给我任何错误并显示 PDF，但仍然没有缩放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T21:33:35.840

`self.view`必须是滚动视图才能转换为 a`PDFScrollView`并接受其方法。默认情况下，`self.view`是一个 UIView。将视图更改为 XIB 文件中的滚动视图（删除视图并将滚动视图链接到`view`文件所有者中）或以编程方式进行。

# javascript - jScrollPane 不与meteor.js 一起使用

> ID：14306505
> 
> 赞同：1
> 
> 时间：2013-01-13T18:08:44.000
> 
> 标签：javascript, jquery, jscrollpane, meteor

我正在尝试将 jScrollPane 与meteor.js 一起使用，但它的行为不如预期。首先，如果我将 '.scroll-pane' 类赋予一个 div，它不会被我显式初始化就可以工作。但是当我尝试显式初始化它时，它不起作用。这是某种流星魔法吗？或者我遗漏了一些明显的东西。

其次，如果我不初始化它，但是我尝试访问它......它的数据是空的，所以我不能使用它的api。我在下面包含了一些示例代码，如果我做错了什么，请告诉我。

**html**

```
...
    <div class="rectangle">
      <div class="chat scroll-pane" id="chatWindow">

      {{#each Messages}}
      {{#if Compare uId UID}}
      <div class="bubble me">{{Text}}</div>
      {{else}}
      <div class="bubble you">{{Text}}</div>
      {{/if}}
      {{/each}} 
      </div>

      <input class="textinput" type="text" placeholder="Insert Message" id="textToSubmit">
      <button class="btn btn-success" id="submit" autofocus="autofocus">Send
        <br>
        <br>
      </button>
    </div> 
```

**js**

```
 if (Meteor.isClient) {

    ...
    var Message = new Meteor.Collection("Message");

    Template.Message.rendered = function(){
      if(!this._rendered) {
        this._rendered = true;
        var scroll = $(this.find("#chatWindow"));
        var api = scroll.data('jsp');
        console.log(api);
      }
   };

   ...
    } 
```

如果您需要更多信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T22:53:24.693

有几件事正在发生：

**(1)**您需要将反应性连接到您的模板，以确保传入的时间`Messages`是正确的。这是通过使用`Session`变量来设置负载，并通过设置`Template.scroll.Messages`等于返回[集合游标](http://docs.meteor.com/#meteor_collection_cursor)的函数来实现的。`Template.scroll.Messages`通常，如果您返回使用`Session`对象（即 roomId）的查询，则不需要以这种方式设置会话。如果是这种情况，您可以完全放弃调用的回调`Meteor.subscribe`和“加载” `Session`。

**（2）**您需要关闭`autopublish`（流星删除自动发布）并明确订阅数据，以便知道您的收藏何时加载；

**(3)**你必须`Collection`在区块外声明你的消息，`isClient`以确保服务器知道它。

HTML：

```
<template name="scroll">
    <div class="rectangle">
        <div style="height:100px;overflow:auto;" id="chatWindow">
            {{#each Messages}}
                {{#if isMe this}}
                    <div class="bubble me">{{text}}</div>
                {{else}}
                    <div class="bubble you">{{text}}</div>
                {{/if}}
            {{/each}} 
        </div>
    </div>
</template> 
```

JS：

```
Messages = new Meteor.Collection("messages");

if (Meteor.isClient) {
    Meteor.subscribe("messages", function () {
        Session.set("loaded", true);
    });

    Template.scroll.rendered = function () {
        if (Session.get("loaded")) {
            $(this.find("#chatWindow")).jScrollPane();
            var api = $(this.find("#chatWindow")).data("jsp");
            ...
        }
    };

    Template.scroll.helpers({
        isMe: function (msg) {
            return msg.userName === 'me';
        }
    });

    Template.scroll.Messages = function () {
        return Messages.find({});
    };
}

if (Meteor.isServer) {
        Meteor.startup(function () {
        if (Messages.find().count() === 0) {
            Messages.insert({ text: 'Message 1', userName: 'me' });
            Messages.insert({ text: 'Message 2', userName: 'you' });
            Messages.insert({ text: 'Message 3', userName: 'me' });
        }
    });
    Meteor.publish("messages", function () { return Messages.find({}); });
} 
```

# windows-8 - WinRT 的 WebView 在实际平板电脑上运行时未加载 .css 文件

> ID：14306507
> 
> 赞同：0
> 
> 时间：2013-01-13T18:09:01.067
> 
> 标签：windows-8, windows-runtime

我在 WinRT 下使用 WebView 控件来显示从我的 Assets 文件夹的子文件夹加载的 html 页面。当我在 Windows 8 PC 或平板电脑模拟器上运行我的应用程序时，一切正常。但是，当我在实际的 Surface 平板电脑上运行时，页面似乎没有加载 .css 文件，因此格式不正确。

我在这里缺少什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:26:30.140

1.  验证 CSS 文件是否包含在 Surface 上运行的应用程序中。 [创建一个应用程序包](http://blogs.msdn.com/b/matt-harrington/archive/2012/04/14/how-to-share-your-metro-style-windows-8-app-with-another-developer.aspx)，然后查看它的内部。要彻底，请将应用程序包复制到 Surface 并在那里运行以验证问题是否仍然存在。
2.  运行 Windows 应用认证工具包 (WACK) 工具以发现常见问题。这只是一个疯狂的猜测，但可能您的 CSS 文件的编码错误，这会导致 Windows RT 出现问题。真的，这只是一个疯狂的猜测。

# php - 用 php 附加嵌套的 JSON 数组

> ID：14306515
> 
> 赞同：2
> 
> 时间：2013-01-13T18:09:43.640
> 
> 标签：php, json, multidimensional-array

我在一个看起来像这样的文件中有一个嵌套的 json 数组：

```
{
"id": 12345679,
"gid": 6012,
"history": [
    {
        "date": "0000-00-00 00:00:00",
        "rank": 6
    }
]} 
```

我很好奇如何读取 json 文件并用 php 附加历史数组，然后重新编写名为*data.json*的文件。

这就是我到目前为止所得到的。

```
$json = file_get_contents('data.json');
$json = (array)json_decode($json);
$output = $json['history'][] = array(
    array('date' => '0000-00-00 00:00:00', 'rank' => 3),
    array('date' => '0000-00-00 00:00:00', 'rank' => 2),
    array('date' => '0000-00-00 00:00:00', 'rank' => 6)
);

  $data = json_encode(array_marge($json, $output)); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:15:16.513

您当前正在附加一个由三个子数组组成的块。你想要做的是单独出现：

```
$json['history'][] = array('date' => '0000-00-00 00:00:00', 'rank' => 3);
$json['history'][] = array('date' => '0000-00-00 00:00:00', 'rank' => 2);
$json['history'][] = array('date' => '0000-00-00 00:00:00', 'rank' => 6); 
```

然后将其用作`$output`.

或者[`array_merge`](http://php.net/array_merge)用于将您的三项列表添加到 input`$json["history"]`中。但是不要合并这两个数组`$json`，`$output`就像你上次尝试的那样。

# vb.net - 多个应用程序的单个配置文件

> ID：14306516
> 
> 赞同：0
> 
> 时间：2013-01-13T18:09:44.187
> 
> 标签：vb.net, configuration-files

我有多个`console`应用程序，每个应用程序都有一个`app.config`文件，这种方式有点不切实际，因为如果我需要更改电子邮件服务器配置，我必须更改所有`app.config`文件，我想创建一个配置文件或类似的东西，所以我可以在一个地方拥有所有配置。

实现这一目标的最佳方法是什么？我在想一个`xml`文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:28:44.197

我有一种方法。首先，您更改 app.config 文件，以便从单独的文件中提取 appSettings。将整个 appSettings 部分替换为以下内容：

```
<appSettings file="myappsettings.config"/> 
```

然后您需要创建 myappSettings.config 文件。您可以在任何地方创建这个新文件。我将它保存在解决方案文件夹的根目录中。包括 appSettings 部分中的所有内容，包括文件中的开始和结束标记。

然后，在每个项目中，将新的 myappsettings.config[文件添加为现有项](http://msdn.microsoft.com/en-us/library/vstudio/9f4t9t92%28v=vs.100%29.aspx)。它会将新的配置文件链接到您的项目，并在编译时将其复制到项目输出中。

当您需要更改设置时，只需更改 myappsettings.config 中的 appSettings。

# matlab - 由于不同分辨率导致的乘积规则的数值积分问题

> ID：14306517
> 
> 赞同：0
> 
> 时间：2013-01-13T18:09:45.353
> 
> 标签：matlab, integration, numerical-methods, calculus

我在使用两个数据集计算数值积分时遇到了一些问题。对于集成，我使用的是 simpsons 1/3 规则。

```
 function I = Simpsons(f,a,b,n)
    if numel(f)>1 % If the input provided is a vector
        n=numel(f)-1; h=(b-a)/n;
        I= h/3*(f(1)+2*sum(f(3:2:end-2))+4*sum(f(2:2:end))+f(end));
    else 
        h=(b-a)/n; xi=a:h:b;
        I= h/3*(f(xi(1))+2*sum(f(xi(3:2:end-2)))+4*sum(f(xi(2:2:end)))+f(xi(end)));
    end 
```

此代码正确计算了积分。

现在问题出现在计算相乘值的过程中。

例如我有两个函数 f 和 g 都依赖于同一个变量。变量在相同的范围内。SO 下限和上限相同。

```
$\int_a^b \! f(x) *g(x) \, \mathrm{d} x.$ 
```

这里 x 的分辨率不同。对于 f(x)，我们有 1000 个数据，而对于 g(x)，我们有 1700 个数据点。所以不能进行逐个元素的乘法。

如何解决这种整合..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:45:31.643

您需要将您的一个函数 `f`或插入`g`到其他函数点，以获得可使用[`interp1`](http://www.mathworks.com/help/matlab/ref/interp1.html).

例如：

```
% x1 an x2 have the same limits but different # of elements

 x1 = linspace(-10,10,100); 
 x2 = sort(rand(1,170)*20-10); # non-unifrom points from -10 to 10

 f1 = sin(x1);
 f2 = cos(x2); 
```

现在说我们要乘以 f1*f2，我们需要它们有 # 个元素，所以

```
 f2i= interp1(x2,f2,x1,'spline'); 
```

将使 f2 具有与 f1 相同的元素数，或者改为

```
 f1i= interp1(x1,f1,x2,'spline'); 
```

将使 f1 具有与 f2 相同的元素数。

# c - 纯 C 的持续集成工具

> ID：14306518
> 
> 赞同：-1
> 
> 时间：2013-01-13T18:09:47.600
> 
> 标签：c, svn, continuous-integration, cobol

我有一组纯 C 和 Cobol 代码的项目，我正在寻找一个持续集成工具，但我以前从未使用过这类工具。我的代码在`svn`其中，我正在寻找的最重要的功能是：

*   对象版本跟踪
*   用邮件编译问题报告

有没有人有使用带有 C 和 Cobol 代码的此类工具的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:43:05.853

我用过一点 Jenkins，它可以做各种有趣的事情，包括与大多数版本控制系统的集成以及构建成功/失败时的自动电子邮件。

它几乎可以在任何可以运行 Java 的东西上作为 Web 服务运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:46:51.217

我使用 jenkins 进行 C 持续集成。Jenkins 作业可以运行 bash 脚本，因此您至少可以将脚本设为`make`. 如果 make 返回非零，则构建将失败。当您启动并运行 gcov/lcov 报告时，您还可以做一些额外的事情来收集它。

# facebook - Facebook 搜索一次登录

> ID：14306519
> 
> 赞同：2
> 
> 时间：2013-01-13T18:09:48.770
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在尝试开发一个网站，用户使用 facebook 登录一次，并且将来他们只登录该网站（不再登录 facebook）。我代表用户使用搜索请求，以便放宽 api 限制。

花了很多时间后，**我找到了扩展访问解决方案**。（[延长访问令牌过期不起作用](https://stackoverflow.com/questions/9107432/extending-access-token-expiration-not-functioning)）。但我无法理解的是如何填充`$user`变量。我可以通过函数设置访问令牌`setAccessToken()`并使用数据库中保存的值。但我找不到填充 $user 变量的方法。我正在使用 3.1.1 SDK。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:14:35.203

3.1.1 中存在证书错误，可能导致`user`变量为空或 0。最新版本是 v.3.2.2，您应该使用[`setExtendedAccessToken`](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L351)

# javascript - 立即加载函数 - 无法访问

> ID：14306522
> 
> 赞同：0
> 
> 时间：2013-01-13T18:09:55.013
> 
> 标签：javascript, load, onload

我需要在页面加载后立即加载一个函数，但我正在使用一个不让我访问 BODY 标记的 CMS。所以我无法将它加载到正文中，而是加载到页面的内容中。关于在页面内容中加载功能的最佳方式有什么建议吗？

我更喜欢在常规的 Javascript 中使用它，Jquery 也一直在导致网站出现问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:15:18.313

您可以使用

```
window.onload = function() {
   ...
}; 
```

正如 Quentin 评论的那样，您也可以使用[`addEventListener`or`attachEvent`](https://stackoverflow.com/a/13870650/1916258)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T18:15:34.990

如果您不需要等到 DOM 准备好。

```
<script> function_call(); </script> 
```

否则将其绑定到 load 事件[`addEventListener`](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)。

# android - 如何停止警报管理器？

> ID：14306527
> 
> 赞同：0
> 
> 时间：2013-01-13T18:10:18.993
> 
> 标签：android, alarmmanager

我已经创建了启动警报，如下所示

```
 public class MyScheduleReceiver extends BroadcastReceiver {

   // Restart service every 30 seconds
private static final long REPEAT_TIME = 1000 * 5;

@Override
public void onReceive(Context context, Intent intent) {
  AlarmManager service = (AlarmManager) context
    .getSystemService(Context.ALARM_SERVICE);
 Intent i = new Intent(context, MyStartServiceReceiver.class);
 PendingIntent pending = PendingIntent.getBroadcast(context, 0, i,
    PendingIntent.FLAG_CANCEL_CURRENT);
Calendar cal = Calendar.getInstance();
cal.add(Calendar.SECOND, 5);
service.setInexactRepeating(AlarmManager.RTC_WAKEUP,
    cal.getTimeInMillis(), REPEAT_TIME, pending); 
```

我将此用于停止警报，并从主要活动中调用它。我认为清单没问题...工作重复但没有停止！

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.setup);

    sendBroadcast(new Intent(this,MyScheduleReceiver.class));

}

public void StopRepeat(View view) {

    sendBroadcast(new Intent(this,MyStopReceiver.class));   

}

 public class MyStartServiceReceiver extends BroadcastReceiver {

 public void onReceive(Context context, Intent intent) {

  Toast.makeText(context, "Repeat service!.",
           Toast.LENGTH_LONG).show();
    }

  public class MyStopReceiver extends BroadcastReceiver {

  // Restart service every 30 seconds
  private static final long REPEAT_TIME = 1000 * 5;

  @Override
  public void onReceive(Context context, Intent intent) {
    AlarmManager service = (AlarmManager) context
        .getSystemService(Context.ALARM_SERVICE);
    Intent istop = new Intent(context, MyStartServiceReceiver.class);
    PendingIntent pending = PendingIntent.getBroadcast(context, 0, istop,
        PendingIntent.FLAG_CANCEL_CURRENT);
    Calendar cal = Calendar.getInstance();
    cal.add(Calendar.SECOND, 5);

      service.cancel(pending); 
```

但服务并没有停止。可能是什么问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:28:20.717

最简单的选择是重新启动您的设备。（如果您创建了一个`BOOT_COMPLETED`侦听器，请暂时将其删除。）

您还可以通过将用于创建警报的 PendingIntent 传递给 来取消警报[`AlarmManager#cancel()`](http://developer.android.com/reference/android/app/AlarmManager.html#cancel%28android.app.PendingIntent%29)。您已经编写了执行此操作的代码，*但是*您有一个带有 XML 属性的 Button`android:onClick="StopRepeat"`吗`setup.xml`？你点击了吗？

* * *

**解决方案**
我们最终发现您的 Manifest 文件中有错误，因此`MyStopServiceReceiver`从未调用...

# android - 如何在 Android 中使用 JSONObject

> ID：14306528
> 
> 赞同：-2
> 
> 时间：2013-01-13T18:10:25.130
> 
> 标签：android

我有以下 Android java 代码：

```
String json = "{\"Name_1\":1,\"Name_2\":0,\"Name_3\":0}";
JSONObject object = new JSONObject(json);
String[] propertyNames = JSONObject.getNames(object);
values = new String[propertyNames.length];
for (int i = 0; i < propertyNames.length; i++) {
  values[i] = String.valueOf(object.get(propertyNames[i]));
} 
```

但我收到以下错误：该方法`getNames(JSONObject)`未定义类型`JSONObject`。我该怎么做才能得到`propertyNames`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:13:21.960

为什么不看[JavaDoc](http://developer.android.com/reference/org/json/JSONObject.html)呢？它告诉您有关[keys()](http://developer.android.com/reference/org/json/JSONObject.html#keys%28%29)方法的信息。

```
for (Iterator<String> it = object.keys(); it.hasNext(); ) {
    String key = it.next();
    // ...
} 
```

编辑：获取键数组：

```
List<String> keyList = new ArrayList<String>();
for (Iterator<String> it = object.keys(); it.hasNext(); ) {
    String key = it.next();
    keyList.add(key);
}

String[] keyArray = keyList.toArray(new String[keyList.size()]); 
```

# wpf - 使用部分类 (WPF) 计算的属性

> ID：14306533
> 
> 赞同：1
> 
> 时间：2013-01-13T18:11:23.040
> 
> 标签：wpf, entity-framework, wpfdatagrid, partial-classes, calculated-columns

我正在尝试使用计算出的列在我的网格中显示。

我有一个由 EF 代码生成器自动生成的部分类，具有三个属性：

这是我由 EF 实体生成器生成的代码

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated from a template.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Collections.Specialized;
using System.ComponentModel;
using System.Globalization;
using System.Runtime.Serialization;
using System.ComponentModel.DataAnnotations;

namespace Employees.Contract
{
[DataContract(IsReference = true)]
[KnownType(typeof(Department))]
[KnownType(typeof(PropertyType))]
public partial class Employee: IObjectWithChangeTracker, INotifyPropertyChanged,IDataErrorInfo
{

    [NonSerialized]
    private CLOS.Contract.Validation.DataErrorInfoSupport dataErrorInfoSupport;

    public Employee()
    {            
        dataErrorInfoSupport = new CLOS.Contract.Validation.DataErrorInfoSupport(this);
        Init();
    }

    partial void Init();

    string IDataErrorInfo.Error { get { return dataErrorInfoSupport.Error; } }

    string IDataErrorInfo.this[string memberName] { get { return dataErrorInfoSupport[memberName]; } }

    #region Primitive Properties

    [DataMember]
    public Nullable<decimal> Salary
    {
        get { return _salary; }
        set
        {
            if (_salary != value)
            {
                _salary = value;
                OnPropertyChanged("Salary");
            }
        }
    }
    private Nullable<decimal> _salary;

    [DataMember]
    public Nullable<decimal> WageRate
    {
        get { return _wageRate; }
        set
        {
            if (_wageRate != value)
            {
                _wageRate = value;
                OnPropertyChanged("WageRate");
            }
        }
    }
    private Nullable<decimal> _wageRate;

    [DataMember]
    public Nullable<decimal> Bonus
    {
        get { return _bonus; }
        set
        {
            if (_bonus != value)
            {
                _bonus = value;
                OnPropertyChanged("Bonus");
            }
        }
    }
    private Nullable<decimal> _bonus;

    #endregion
    #region Navigation Properties

    [DataMember]
    public Department Department
    {
        get { return _department; }
        set
        {
            if (!ReferenceEquals(_department, value))
            {
                var previousValue = _department;
                _department = value;
                OnNavigationPropertyChanged("Department");
            }
        }
    }
    private Borrower _department;

    [DataMember]
    public PropertyType PropertyType
    {
        get { return _propertyType; }
        set
        {
            if (!ReferenceEquals(_propertyType, value))
            {
                var previousValue = _propertyType;
                _propertyType = value;

                OnNavigationPropertyChanged("PropertyType");
            }
        }
    }
    private PropertyType _propertyType;

    #endregion
    #region ChangeTracking

    protected virtual void OnPropertyChanged(String propertyName)
    {
        if (ChangeTracker.State != ObjectState.Added && ChangeTracker.State != ObjectState.Deleted)
        {
            ChangeTracker.State = ObjectState.Modified;
        }
        if (_propertyChanged != null)
        {
            _propertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    protected virtual void OnNavigationPropertyChanged(String propertyName)
    {
        if (_propertyChanged != null)
        {
            _propertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    event PropertyChangedEventHandler INotifyPropertyChanged.PropertyChanged{ add { _propertyChanged += value; } remove { _propertyChanged -= value; } }
    private event PropertyChangedEventHandler _propertyChanged;
    private ObjectChangeTracker _changeTracker;

    [DataMember]
    public ObjectChangeTracker ChangeTracker
    {
        get
        {
            if (_changeTracker == null)
            {
                _changeTracker = new ObjectChangeTracker();
                _changeTracker.ObjectStateChanging += HandleObjectStateChanging;
            }
            return _changeTracker;
        }
        set
        {
            if(_changeTracker != null)
            {
                _changeTracker.ObjectStateChanging -= HandleObjectStateChanging;
            }
            _changeTracker = value;
            if(_changeTracker != null)
            {
                _changeTracker.ObjectStateChanging += HandleObjectStateChanging;
            }
        }
    }

    private void HandleObjectStateChanging(object sender, ObjectStateChangingEventArgs e)
    {
        if (e.NewState == ObjectState.Deleted)
        {
            ClearNavigationProperties();
        }
    }

    protected bool IsDeserializing { get; private set; }

    [OnDeserializing]
    public void OnDeserializingMethod(StreamingContext context)
    {
        IsDeserializing = true;
    }

    [OnDeserialized]
    public void OnDeserializedMethod(StreamingContext context)
    {
        dataErrorInfoSupport = new CLOS.Contract.Validation.DataErrorInfoSupport(this);
        IsDeserializing = false;
        ChangeTracker.ChangeTrackingEnabled = true;
    }

    protected virtual void ClearNavigationProperties()
    {
        Department = null;
        PropertyType = null;
    }

    #endregion
} 
```

}

如果我`OnPropertyChanged("Salary")`在 EF Generated 类中输入 Hours,Wage,Overtime 属性（这不是一个好主意），它也可以工作，因为如果类重新生成，我的代码将被清除

任何帮助表示赞赏。（对不起格式，这是我的第一个问题）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:54:30.127

**最终稿**

（由于不相关，我删除了旧的编辑）

在您的部分课程中添加，除了您对薪水的定义：

```
partial void Init()
{
    _propertyChanged += NotifySalary;
}

private void NotifySalary(object sender, PropertyChangedEventArgs e)
{
    if (e.PropertyName == "Wages" || e.PropertyName == "Hours" || e.PropertyName == "Overtime")
    {
        OnPropertyChanged("Salary");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:02:28.667

我能够解决这个问题。发生的事情是服务将数据封送回 UI，但它没有用属性封送事件，所以我必须做的是从 UI 调用 init 方法并开始工作。

# compass-sass - 在 Yeoman 项目中使用 compass，但在 Yeoman 服务器之外

> ID：14306537
> 
> 赞同：1
> 
> 时间：2013-01-13T18:11:36.123
> 
> 标签：compass-sass, yeoman

我绕过内置的 Yeoman 服务器并直接从 /app 目录中切断文件。由于 Yeomen 的服务器管理 compass/sass 编译，我很难在它之外运行 compass。直接运行 compass cli 是不行的；它不知道它在现有的指南针项目中。所以我得到：

```
$ compass watch /app (or /app/styles)
Nothing to compile. If you're trying to start a new project, you have left off the directory argument. 
```

有没有人有过让这个工作的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:14:11.300

您必须将 Compass 设置移出到一个[`config.rb`文件](http://compass-style.org/help/tutorials/configuration-reference/)中才能使用 Compass CLI。

但是，您可以像这样轻松地单独运行 Compass grunt 任务`grunt compass`进行编译，或者`grunt watch`在文件更改时自动编译。

# arrays - 对数组进行排序而不更改它 C

> ID：14306539
> 
> 赞同：2
> 
> 时间：2013-01-13T18:11:38.967
> 
> 标签：arrays, arduino, sorting

嘿伙计们，我已经为此工作了 3 天，但我看到的每个人都没有提出任何建议。

我正在尝试获取大约 250 个浮点数的数组并找到第 K 个最大值，而无需以任何方式更改数组或创建一个新数组。

我可以更改它或创建一个新的，因为其他功能需要以正确的顺序放置数据，而我的 Arduino 无法在其内存空间中保存任何值，因此 2 个最简单的选项不可用。

Array 中的值可以（并且可能会）有重复项。

作为一个 EG ：如果你有数组 ::: 1,36,2,54,11,9,22,9,1,36,0,11; 从最大值到最小值将是 :: 1) 54 2) 36 3) 36 4) 22 5) 11 6) 11 7) 9 8) 9 9) 2 10) 1 11) 1 12) 0

任何帮助都会很棒。要求一个可以很好地为我做这件事的功能可能太多了:)哈哈哈

这是我到目前为止的代码，但我什至还没有尝试让重复项工作，并且由于某种原因它只给了我一个答案，因为某种原因是 2 ,,, 不知道为什么

```
void setup()
{
  Serial.begin(9600);
}
void loop ()
{
 int Array[] = {1,2,3,4,5,6,7,8,9,10};

 int Kth = 6; //// just for testing putting the value as a constant
 int tr = 0;   /// traking threw the array to find the MAX

 for (int y=0;y<10;y++)  ////////////  finding the MAX first so I have somewhere to start
 {
   if (Array[y]>Array[tr])
   {
     tr = y;
   }
 }
 Serial.print("The max number is ");
 int F = Array[tr];
 Serial.println(F); // Prints the MAX ,,, mostly just for error checking this is done

 /////////////////////////////////////////////////////////  got MAX

 for ( int x = 1; x<Kth;x++)  //// run the below Kth times and each time lowering the "Max" making the loop run Kth times
 {
   for(int P=0;P<10;P++) // run threw every element
   {
   if (Array[P]<F)
   {
     for(int r=0;r<10;r++)    //and then test that element against every other element to make sure 
                             //its is bigger then all the rest but small then MAX
     {
       Serial.println(r);
       if(r=tr)  /////////////////// done so the max dosent clash with the number being tested
       {
       r++;
       Serial.println("Max's Placeing !!!!");
       }
     if(Array[P]>Array[r])
     {
       F=Array[P];            ////// if its bigger then all others and smaller then the MAx then make that the Max
       Serial.print(F);
       Serial.println(" on the ");
     }
}}}}
Serial.println(F); /// ment to give me the Kth largest number 
delay(1000); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:32:30.167

如果速度不是问题，您可以采用这种方法（伪代码）：

```
current=inf,0

for i in [0,k):
    max=-inf,0
    for j in [0,n):
        item=x[j],j
        if item<current and item>max:
          max=item
    current=max 
```

`current`然后将包含第 k 个最大的项目，其中项目是一对值和索引。

这个想法很简单。要找到第一个最大的项目，您只需找到最大的项目。要查找第二大项目，您需要找到不大于您的第一个最大项目的最大项目。要查找第三大项目，您需要找到不大于第二大项目的最大项目。等等

这里唯一的技巧是，由于可能存在重复项，因此项目需要同时包含值和索引以使其唯一。

以下是它在 C 中的实现方式：

```
void loop()
{
  int array[] = {1,2,3,4,5,6,7,8,9,10};
  int n = 10;
  int k = 6; //// just for testing putting the value as a constant
  int c = n; // start with current index being past the end of the array
             // to indicate that there is no current index. 

  for (int x = 1; x<=k; x++) {
    int m = -1; // start with the max index being before the beginning of
                // the array to indicate there is no max index

    for (int p=0; p<n; p++) {
      int ap = array[p];
      // if this item is less than current
      if (c==n || ap<array[c] || (ap==array[c] && p<c)) {
        // if this item is greater than max
        if (m<0 || ap>array[m] || (ap==array[m] && p>m)) {
          // make this item be the new max
          m = p;
        }
      }
    }
    // update current to be the max
    c = m;
  }
  Serial.println(array[c]); /// ment to give me the Kth largest number 
  delay(1000);
} 
```

在 C 版本中，我只跟踪当前和最大索引，因为我总是可以通过查看数组来获取当前值和最大值。

# android - 完成活动的例外情况

> ID：14306543
> 
> 赞同：0
> 
> 时间：2013-01-13T18:11:48.377
> 
> 标签：android, android-intent

我有一些项目的列表，每当我点击其中任何一个时，我都会相应地进入一个新的意图。但是当我再次尝试返回列表时，一些项目给出了正确的结果，而另一些项目给出了错误。

我已经尝试在给出错误的意图中调用 onDestroy 和 onStop 方法中的 finish() 。我也尝试过注释掉这两种方法，因为默认情况下它应该出栈。但 LogCat 显示

```
01-12 23:04:55.050: E/AndroidRuntime(14445): java.lang.RuntimeException: Unable to stop    activity {com.balance.start/com.balance.start.GFX}: java.lang.NullPointerException
01-12 23:04:55.050: E/AndroidRuntime(14445):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3613)
01-12 23:04:55.050: E/AndroidRuntime(14445):    at     android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3679)
01-12 23:04:55.050: E/AndroidRuntime(14445):    at android.app.ActivityThread.access$2900(ActivityThread.java:126)
01-12 23:04:55.050: E/AndroidRuntime(14445):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2071)
01-12 23:04:55.050: E/AndroidRuntime(14445):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-12 23:04:55.050: E/AndroidRuntime(14445):    at android.os.Looper.loop(Looper.java:123)
01-12 23:04:55.050: E/AndroidRuntime(14445):    at android.app.ActivityThread.main(ActivityThread.java:4633)
01-12 23:04:55.050: E/AndroidRuntime(14445):    at java.lang.reflect.Method.invokeNative(Native Method)
01-12 23:04:55.050: E/AndroidRuntime(14445):    at java.lang.reflect.Method.invoke(Method.java:521)
01-12 23:04:55.050: E/AndroidRuntime(14445):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
01-12 23:04:55.050: E/AndroidRuntime(14445):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
01-12 23:04:55.050: E/AndroidRuntime(14445):    at dalvik.system.NativeStart.main(Native Method)
01-12 23:04:55.050: E/AndroidRuntime(14445): Caused by: java.lang.NullPointerException
01-12 23:04:55.050: E/AndroidRuntime(14445):    at android.app.Activity.performStop(Activity.java:3869)
01-12 23:04:55.050: E/AndroidRuntime(14445):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3608) 
```

这是我的代码..

```
 protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.report_ledger);
        ...
    }

class MyAdapter extends CursorAdapter {
    public MyAdapter(Context context, Cursor c, boolean autoRequery) {
        super(context, c, autoRequery);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void bindView(View view, Context ctxt, Cursor c) {
        // TODO Auto-generated method stub

        TextView tv1 = (TextView) view.findViewById(R.id.tvAB1);
        TextView tv2 = (TextView) view.findViewById(R.id.tvAB2);
        TextView tv3 = (TextView) view.findViewById(R.id.tvAB3);
        TextView tv4 = (TextView) view.findViewById(R.id.tvAB4);
        TextView tv5 = (TextView) view.findViewById(R.id.tvAB5);
        tv1.setText(c.getString(2));
        tv2.setText("" + c.getDouble(3));
        tv3.setText("" + c.getDouble(4));
        tv4.setText("" + (c.getDouble(4) - c.getDouble(3)));
        tv5.setText((c.getDouble(3) > c.getDouble(4) ? "CR." : "DR."));
    }

    @Override
    public View newView(Context ctxt, Cursor c, ViewGroup parent) {
        // TODO Auto-generated method stub

        LayoutInflater inflater = getLayoutInflater();
        return inflater.inflate(
                R.layout.text_view_for_list_view_account_balance, parent,
                false);
    }
} 
```

我没有为后退按钮实现 onClickListener，因为我认为这不是必需的。我认为系统应该自己完成活动。：/

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:30:00.380

恐怕你来电`finish()`了`onDestroy()`。实际上`finish()`需要在您想要`finish()`您的活动时调用，其中`onDestroy()`方法会自动调用。`onDestroy()`取而代之的是，如果需要，您可以使您的意图或其他对象为空。

# javascript - 在js中压缩字符串并保存在localStorage中

> ID：14306546
> 
> 赞同：1
> 
> 时间：2013-01-13T18:11:59.680
> 
> 标签：javascript

我试图在我的 localStorage 中保存一个巨大的 json 字符串，但由于某种原因，有时它会保存它，有时不会，我想我应该压缩它，所以我`LZW implementation`从 stackoverflow 中的一个线程中获取了一个 in js。

问题是当我尝试`localStorage.setItem()`压缩字符串时，它给了我一个错误“ `Invalid argument`”，知道为什么或应该做什么吗？

编辑：

这是我正在使用的代码：

```
// LZW-compress a string
function lzw_encode(s) {
    var dict = {};
    var data = (s + "").split("");
    var out = [];
    var currChar;
    var phrase = data[0];
    var code = 256;
    for (var i=1; i<data.length; i++) {
        currChar=data[i];
        if (dict[phrase + currChar] != null) {
            phrase += currChar;
        }
        else {
            out.push(phrase.length > 1 ? dict[phrase] : phrase.charCodeAt(0));
            dict[phrase + currChar] = code;
            code++;
            phrase=currChar;
        }
    }
    out.push(phrase.length > 1 ? dict[phrase] : phrase.charCodeAt(0));
    for (var i=0; i<out.length; i++) {
        out[i] = String.fromCharCode(out[i]);
    }
    return out.join("");
}

// Decompress an LZW-encoded string
function lzw_decode(s) {
    var dict = {};
    var data = (s + "").split("");
    var currChar = data[0];
    var oldPhrase = currChar;
    var out = [currChar];
    var code = 256;
    var phrase;
    for (var i=1; i<data.length; i++) {
        var currCode = data[i].charCodeAt(0);
        if (currCode < 256) {
            phrase = data[i];
        }
        else {
           phrase = dict[currCode] ? dict[currCode] : (oldPhrase + currChar);
        }
        out.push(phrase);
        currChar = phrase.charAt(0);
        dict[code] = oldPhrase + currChar;
        code++;
        oldPhrase = phrase;
    }
    return out.join("");
} 
```

这是调用压缩算法并将其保存在 LS 中的代码

```
LOG("GetMerchantList(): Done");
    var SITESVAR = unescape(data)
    localStorage.setItem("MYSITES", lzw_encode(SITESVAR));  //this throws error
    IWT.BuildMerchantList(SITESVAR); 
```

# mysql - 如何将 java.util.Date 对象存储在 MySQL 中，精确到一秒？

> ID：14306554
> 
> 赞同：-5
> 
> 时间：2013-01-13T18:12:54.897
> 
> 标签：mysql

我知道这是一个常见问题，但我找不到如何`java.util.Date`在 MySQL 中存储对象。

是否可以？如果不是你推荐我什么样的解决方案，因为我需要这个准确的时间存储在我的 MySQL 数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:20:10.543

```
public static void main(String[] args) {
        Date date = new Date() ;
        System.out.println(date);
        // or use calendar
        Calendar cal = Calendar.getInstance();
        cal.set(Calendar.YEAR, 2013);
        cal.set(Calendar.MONTH, 1);
        cal.set(Calendar.DATE, 13);
        cal.set(Calendar.HOUR, 23);
        cal.set(Calendar.MINUTE, 52);
        cal.set(Calendar.SECOND, 10);
        date = cal.getTime();
} 
```

给你`Sun Jan 13 23:48:59 IST 2013`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:22:50.510

您可以使用 SimpleDateFormat：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("YYYY-MM-DD HH:mm:ss");
System.out.println(dateFormat.format(new Date())); 
```

如果您，正如我所怀疑的那样，想将字符串转换为日期对象，那么您仍然可以使用 SimpleDateFormat：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("YYYY-MM-DD HH:mm:ss");
Date d = dateFormat.parse("2011-02-21 23:22:10"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T18:33:06.227

在大多数情况下，您不应该使用`Date`对象，`java.util.Dat`e 不是不可变的；更好的是使用原语`long`，它将日期存储为UTC时间。（自 1.1.1970 UT 午夜以来的毫秒数）这与本地时间、白天节省无关。等等

您可以`long`通过方法`getTimestamp()`从临时`Date`对象中获取值。（或直接或间接来自`GregorianCalendar`）

从较长的 utc 时间戳，您可以轻松创建所需的任何 Date 对象（例如在 DB 中）。

如果您需要当地时间，事情会变得复杂得多。所以最好的建议是仅将本地时间用于显示（例如 UI）目的，并在显示前立即转换为本地时间。最好不要在当地时间存储日期）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-13T18:21:16.407

看看[日历](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)类。

只需调用`Calendar.getInstance()`自己获取一个实例，然后您就可以使用它`get(Calendar.YEAR);`来获取年份、`get(Calendar.DAY);`获取日期等。

您可以使用该`set()`方法以类似的方式设置时间。

如果要将其转换为日期对象，请使用该`getTime();`方法，如果要将日期格式化为字符串，请查看`SimpleDateFormat`.

作为一般示例：

```
Calendar c = Calendar.getInstance();
c.set(2012, 11, 1, 10, 10); //Sets c to 10:10, 1st December 2012
Date date = c.getTime(); //If you want the calendar object as a date
int day = c.get(Calendar.DAY); //Get the current day in the calendar as an integer
String format = new SimpleDateFormat("HH:mm:ss DD-MM-YYYY").format(c.getTime()); //Print date as a string 
```

您还可以使用`SimpleDateFormat`对象来解析日期，如下所示：

```
Date d = new SimpleDateFormat("HH:mm:ss DD-MM-YYYY").parse("10:10:00 01-12-12"); 
```

如果您`SimpleDateFormat`不止一次使用它，那么最好将它作为一个单独的变量，而不是继续重新创建它。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-13T18:21:16.690

```
class Date {
    int year;
    int month;
    int day;

    int hour;
    int minute;

    public Date(int year, int month, int day, int hour, int minute){
        this.year = year;
        this.month = month;
        this.day = day;
        this.hour = hour;
        this.minute = minute;
    }

} 
```

现在您可以创建它的实例，并传递它。此外，您可以创建 getter/setter 或 toString 函数。

# ios - 从原型单元传输 NSString 不与 prepareForSegue 一起使用

> ID：14306556
> 
> 赞同：0
> 
> 时间：2013-01-13T18:13:03.547
> 
> 标签：ios, objective-c, xcode

我只是想将一个简单的字符串从原型单元中的 UILabel 传输到下一个视图控制器中的标签中。View Controller 的 viewDidLoad 中 label.text 的值正在返回（null）。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    mainCell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (mainCell == nil) {
        mainCell = [[dictionaryTableCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSString* date = [dateArray objectAtIndex:indexPath.row];
    mainCell.viewLabel.text = date;

    return mainCell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([segue.identifier isEqualToString:@"View Segue"]) {
        NSLog(@"View Load Segue Success");

        ViewController *one = segue.destinationViewController;
        one.label.text = mainCell.viewLabel.text;
    }
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:38:15.653

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([segue.identifier isEqualToString:@"View Segue"]) {
        NSLog(@"View Load Segue Success");
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        ViewController *one = segue.destinationViewController;
        one.label.text = [dateArray objectAtIndex:indexPath.row];
    }
} 
```

`one`实际上，您应该在 viewController的方法（`viewDidLoad`或）中将文本分配给文本标签`viewWillAppear`。因此，您需要在 viewController 中创建一个属性来传输`NSString`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:19:48.817

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath     {
    YourViewController *controller =[[YourViewController alloc] init];
    [self presentModalViewController:controller animated:YES];
    one.label.text = [dateArray objectAtIndex:indexPath.row];
} 
```

更改`label.text`后`presentModalViewController`。现在会发生什么？

```
- (void)presentViewController:(UIViewController *)viewControllerToPresent animated: (BOOL)flag completion:(void (^)(void))completion 
```

我了解您已经在使用`Segue`. 您应该遵循其他答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T18:54:16.667

您可以使用`indexPathForSelectedRow`：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([segue.identifier isEqualToString:@"View Segue"]) {

        ViewController *one = segue.destinationViewController;

        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];

        one.textProperty = [dateArray objectAtIndex:indexPath.row];
    }
} 
```

`sender`或者，如果您的转场是从单元格到下一个场景，您也可以使用，例如：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"View Segue"])
    {
        ViewController *one = segue.destinationViewController;

        NSAssert([sender isKindOfClass:[UITableViewCell class]], @"Not cell");

        UITableViewCell *cell = sender;
        NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];

        one.textProperty = [dateArray objectAtIndex:indexPath.row];
    }
} 
```

有两点需要注意：

1.  作为一种良好的编程风格，我没有从单元格中检索文本值。我正在从模型中检索文本值。您不应该依赖视图来传递信息。回到模型，信息的原始来源。

2.  不要直接在目标控制器中设置`text`属性。`label`的控件`destinationController`尚未创建。您应该将设置控件推迟到`destinationController`. `viewDidLoad`因此，改为`NSString`在目标控制器中创建一个属性：

    ```
    @property (nonatomic, strong) NSString *textProperty; 
    ```

    显然，您应该使用比 更具描述性的名称`textProperty`，但希望您能理解。无论如何，`prepareForSegue`可以设置这个新属性，`viewDidLoad`然后目标控制器的 应该使用该`NSString`属性来填充 的`text`属性`UILabel`，例如：

    ```
    - (void)viewDidLoad
    {
        [super viewDidLoad];

        self.label.text = self.textProperty;
    } 
    ```

# c# - 使用 HtmlAgilityPack 加载日语网页

> ID：14306560
> 
> 赞同：0
> 
> 时间：2013-01-13T18:13:16.340
> 
> 标签：c#, c#-4.0, encoding, html-agility-pack

我有这段代码可以使用`HtmlAgilityPack`. 它适用于大多数网页，但是当我尝试加载日语网页时，似乎编码错误。我怎样才能做到这一点？实际上如何根据网页编码设置编码？

```
class Program {

    private const string HttpMethod = "GET";

    private const string UserAgent =
        "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/534.7 (KHTML, like Gecko) Chrome/7.0.517.41 Safari/534.7";

    static void Main(string[] args) {
        var request = WebRequest.Create("http://infoseek.co.jp/") as HttpWebRequest;
        if (request == null)
            return;
        request.Method = HttpMethod;
        request.UserAgent = UserAgent;
        var response = request.GetResponse() as HttpWebResponse;
        if (response == null)
            return;
        var stream = response.GetResponseStream();
        var document = new HtmlDocument {
            OptionCheckSyntax = true,
            OptionFixNestedTags = true,
            OptionAutoCloseOnEnd = true,
            OptionDefaultStreamEncoding = Encoding.UTF8,
            OptionReadEncoding = true
        };
        document.Load(stream, Encoding.UTF8);
        var d = document.DocumentNode;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:17:35.107

infoseek.co.jp 以 HTTP 标头响应

```
Content-Type    text/html; charset=EUC-JP 
```

它反映在 HTML 标记中

```
<meta http-equiv="Content-Type" content="text/html; charset=EUC-JP"> 
```

在 .Net 中，使用[Code Page 51932](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)解码 EUC-JP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:01:28.927

我试图通过下面的代码从 HttpWebResponse 对象获取编码。您看到任何问题或有任何其他想法吗？

```
class Program {

    private const string HttpMethod = "GET";

    private const string UserAgent =
        "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/534.7 (KHTML, like Gecko) Chrome/7.0.517.41 Safari/534.7";

    static void Main(string[] args) {
        var request = WebRequest.Create("http://infoseek.co.jp/") as HttpWebRequest;
        if (request == null)
            return;
        request.Method = HttpMethod;
        request.UserAgent = UserAgent;
        var response = request.GetResponse() as HttpWebResponse;
        if (response == null)
            return;
        var encoding = TryGetEncoding(response);
        var stream = response.GetResponseStream();
        var document = new HtmlDocument {
            OptionCheckSyntax = true,
            OptionFixNestedTags = true,
            OptionAutoCloseOnEnd = true,
            OptionReadEncoding = true,
            OptionDefaultStreamEncoding = encoding
        };
        document.Load(stream, encoding);
        var d = document.DocumentNode;
    }

    private static Encoding TryGetEncoding(HttpWebResponse response) {
        var charset = response.CharacterSet;
        if (string.IsNullOrWhiteSpace(charset))
            charset = response.ContentEncoding;
        if (string.IsNullOrWhiteSpace(charset))
            return Encoding.UTF8;
        try {
            return Encoding.GetEncoding(charset);
        } catch {
            return Encoding.UTF8;
        }
    }
} 
```

# c# - 读取和处理输入

> ID：14306562
> 
> 赞同：-3
> 
> 时间：2013-01-13T18:13:21.777
> 
> 标签：c#, visual-studio-2010

编写一个程序，计算并显示委托销售人员扣除后的实得工资。员工获得总销售额的 7% 作为总工资。他或她的联邦税率为 18%。他或她为他或她的退休计划贡献 10%，为社会保障贡献 6%。使用下面步骤 2 中提供的处理逻辑作为指南。程序的输出应如下所示：

```
输入每周销售额：28,000
总销售额：28,000.00 美元
总工资（7%）：1,960.00 美元
缴纳的联邦税：352.80 美元
缴纳的社会保障金：117.60 美元
退休金：196.00 美元
总扣除额：666.40 美元

带回家的工资：1,293.60 美元
按任意键继续。

```

//这是我的代码，我无法获取输入

```
 //Declarations

        int weeklySales;
        double grossPay = weeklySales * .07;
        double fedTax = grossPay * .18;
        double retirement = grossPay * .1;
        double socSecurity = grossPay * .06;
        double totDeductions = socSecurity + retirement + fedTax;
        double takeHomePay = grossPay - totDeductions;

        //Promt user for Input
        System.Console.WriteLine("What is your weekly Sales?");
        weeklySales = Console.Read();
        System.Console.ReadLine();

         //Output Display
        System.Console.Write("\nYour Weekly Sale amount is :\t\t" + weeklySales+ "\n\nGross Pay:\t\t\t\t" + grossPay+ "\n\nFed Tax \t\t\t\t" + fedTax + "\n\nRetirement\t\t\t\t"+ retirement + "\n\nSocial Security:\t\t\t" + socSecurity + "\n\nTotal Deductions:\t\t\t" + totDeductions + "\n\nMaking your take home pay:\t\t" + takeHomePay);
        System.Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T18:18:54.010

```
 weeklySales = Console.Read(); 
```

不会做你认为它做的事情。它将返回第一个字符的 ASCII 值。

反而：

```
 string weeklySalesText = Console.ReadLine();
  weeklySales = int.Parse(weeklySalesText );  // may need more processing. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:18:51.873

您试图在将任何内容放入变量之前使用变量计算结果，这是行不通的。在计算结果之前进行输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T18:21:09.380

`Console.Read()`不做你认为它做的事。它获取第一个新字符，并将其作为`int`. 它不会读取整行。此外，`Console.ReadLine()`之后的调用完全没有意义，因为您没有对结果做任何事情。

我认为您希望用户写一行，然后捕获该行的内容，检查它是否是 and `int`，如果不是，则编写错误消息并重试，如果是，则对其进行处理。

这样做是这样的：

```
while (!int.TryParse(Console.ReadLine(), out weeklySales))
{
    Console.WriteLine("Input was not a number.");
} 
```

代替

```
weeklySales = Console.Read();
System.Console.ReadLine(); 
```

有了它，之后，您可以使用它`weeklySales`来计算所有其他必需的变量。

此外，开始时的定义也不应该起作用，因为weeklySales 在开始时没有初始化。

* * *

**编辑：**作为我的方法如何工作的一点解释：您正在调用`int.TryParse(string, out int)`，`false`如果给定的字符串不是数字，则返回，否则将其解析为 int 并返回`true`。

您要解析为整数的是控制台输入，因此，第一个参数应该是`Console.ReadLine()`. `weeklySales`显然是您要转换的数字`string`，因此作为`out`参数提供（如果您不知道那是什么，请查看）。

如果`int.TryParse`返回`false`（因此失败），我们运行 while 循环来通知用户，并再次询问。如果没有，那么我们继续该程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T18:26:04.000

正确的方法：

```
Int32 weeklySales = 0;

while (weeklySales.Equals(0))
{
    Console.WriteLine("What are your weekly sales?");
    String input = Console.ReadLine();

    try
    {
        weeklySales = Int32.Parse(input);
    }
    catch
    {
        Console.WriteLine("There is an error in your input, try again!");
    }
}

Double grossPay = weeklySales * .07;
Double fedTax = grossPay * .18;
Double retirement = grossPay * .1;
Double socSecurity = grossPay * .06;
Double totDeductions = socSecurity + retirement + fedTax;
Double takeHomePay = grossPay - totDeductions;

Console.Write("\nYour Weekly Sale amount is :" + weeklySales + "$\nGross Pay: " + grossPay + "$\nFed Tax: " + fedTax + "$\nRetirement: " + retirement + "$\nSocial Security: " + socSecurity + "$\nTotal Deductions: " + totDeductions + "$\nMaking your take home pay: " + takeHomePay + "$");
Console.Read(); 
```

简易方法：

```
Console.WriteLine("What are your weekly sales?");

try
{
    Int32 weeklySales = Int32.Parse(Console.ReadLine());

    Double grossPay = weeklySales * .07;
    Double fedTax = grossPay * .18;
    Double retirement = grossPay * .1;
    Double socSecurity = grossPay * .06;
    Double totDeductions = socSecurity + retirement + fedTax;
    Double takeHomePay = grossPay - totDeductions;

    Console.Write("\nYour Weekly Sale amount is :" + weeklySales + "$\nGross Pay: " + grossPay + "$\nFed Tax: " + fedTax + "$\nRetirement: " + retirement + "$\nSocial Security: " + socSecurity + "$\nTotal Deductions: " + totDeductions + "$\nMaking your take home pay: " + takeHomePay + "$");
    Console.Read();
}
catch
{
    Console.WriteLine("There is an error in input. Program will be terminated.");
} 
```

# php - 服务器之间的简单数据交换

> ID：14306565
> 
> 赞同：1
> 
> 时间：2013-01-13T18:13:46.380
> 
> 标签：php, jquery, html, mysql, protocols

我对网络开发完全陌生，所以如果这个问题是多余的，请原谅我。这是我想要做的：我有多个 Arduino（配备有 EthernetShields）正在收集和显示数据（使用传感器和 LCD 屏幕）。所有 Arduino 都与托管 MySQL 数据库的网络服务器和可视化数据的网页进行通信。Arduinos 本身能够托管可以运行一些简单的 html/php/etc 的简约网络服务器...

我的问题是：实现 Arduinos 和主服务器之间的通信最直接的方法是什么，这样我就可以在它们之间来回发送数据，而无需任何用户交互？数据由相对较少的整数值和短文本字符串组成。安全不是问题。

为清楚起见进行编辑：如何在两个 Web 服务器之间连续地来回发送数据？假设我使用 PHP，有什么简单的方法可以做到这一点？GET 和 POST 方法的所有教程都包括使用“表单操作”，据我了解，这需要用户交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:58:34.133

如果我理解正确，您有一个需要与一大堆 arduino 通信的中央 Web 服务器。您需要在 arduinos 和中央服务器之间双向发送信息。而且，您想使用 web (http / tcp / ip ) 协议来执行此操作。

你面临一个选择：
你想让中央服务器发起通信吗？或者你想让每个 arduino 发起通信？

我觉得第二个选择还不错。这意味着您可以在系统中添加新的 arduino，而无需以某种方式重新配置中央服务器。但是，我对您的应用程序了解不多，所以这可能是一个坏主意。

所以，你要做的是在每个 arduino 上实现一个简单的 Web CLIENT（不是浏览器）。然后，定期让每个 arduino 向主服务器发出 Web 请求。根据您需要从 arduino 发送到服务器的数据量，您可以使用 GET 或 POST。如果数据很小，可以使用 GET 请求。例如，如果它是温度和湿度，您可以每秒发送一次这样的请求。

```
http://server/upload.php?temp=65&humidity=78 
```

作为对此的响应，中央服务器可以正确处理这些数据。您将能够通过客户端互联网地址判断它来自哪个 arduino `REMOTE_ADDR`。

然后，服务器发送一个响应，其中包含服务器需要发送到 arduino 的任何数据。

看看这是怎么回事？每一秒，每个 arduino 都会访问网络服务器说“这是我为你准备的。你为我准备了什么？”

# php - 来自 php 文件的变量值 - Smarty 多语言

> ID：14306566
> 
> 赞同：0
> 
> 时间：2013-01-13T18:14:03.597
> 
> 标签：php, arrays, smarty, multilingual

我有一个多语言网站（使用 Smarty 模板）。所有语言都在不同的 lang.ini 文件中。例如：lang/eng/lang.ini：（英文）

```
WELCOME = "Welcome" 
```

lang/hun/lang.ini：（匈牙利语）

```
WELCOME = "Üdvözöllek" 
```

然后在 index.php 中：

```
... 
$error=array(); 
if($condition!=$condition2) 
{ 
     $error1 = "This is an error msg"; 
     array_push($error, $error1); 
} 
... 
$this->tpl->assign('error', $error); 
$lang_file=parse_ini_file("lang/". $_SESSION["lang_folder"] ."/lang.ini",true); 
$this->tpl->assignByref("lang",$lang_file); 
$this->tpl->display('index.tpl'); 
```

最后在 index.tpl 中：

```
... 
{$lang.WELCOME} 
<br /> 
{if isset($error) && $error ne "" } 
   {foreach $error as $error_list} 
      {$error_list} 
   {/foreach} 
{/if} 
... 
```

现在欢迎可以以不同的语言出现（存储在会话中的路径）。但是 $error 只出现一种语言，只打印出它的值。如何根据选择的语言打印出来？我应该在哪里为 $error 添加价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:18:20.937

检测到错误时，不要将英文字符串推送到数组中，而是推送要从 INI 文件中检索的代码：

```
if($condition!=$condition2) 
{ 
    array_push($error, 'ERROR_ONE'); 
} 
```

然后在 Smarty 中，`$lang`使用普通数组访问语法将其用作数组中的键：

```
{foreach $error as $error_code} 
    {$lang[$error_code]} 
{/foreach} 
```

# jquery - 如何检查 $.post 函数中的数据内容？

> ID：14306572
> 
> 赞同：1
> 
> 时间：2013-01-13T18:14:28.697
> 
> 标签：jquery

```
$.post(
    $("#formReg").attr("action"), $("#formReg").serialize(),
    function(data, textStatus, jqXHR) {
            $("#info").html(data);
        alert (data); // to check - ok - `folder` is displaying
        if ($("#info").html() == "folder"){
        $("#imgOk").fadeIn();  //doesn't work
        }
}); 
```

似乎`#info`有另一个内容，而不是`folder`，虽然由警报检查，并且`folder`作为内容在屏幕上可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:28:47.703

有时在执行 ajax 请求时，您会在服务器上使用在返回结果中插入空格的代码。看到添加空格的位置并不总是那么容易，但它可能是代码之前或之后的一个空格，例如`<?php`在 PHP 中之前有一个空格等。

最好的办法是简单地删除服务器端的空格，但 javascript 也有一个修剪方法，可以修剪字符串中的后面和尾随空格：

```
if ($("#info").html().trim() == "folder"){...} 
```

旧浏览器不支持该功能，因此如果这是一个问题，您可以使用正则表达式，或者由于您已经在使用 jQuery，您可以使用类似的跨浏览器功能，它实际上`trim()`在较新的浏览器中使用相同的本机方法，并且旧浏览器中的正则表达式，因此您不必担心它：

```
$.post($("#formReg").attr("action"), $("#formReg").serialize(), function(data) {
    $("#info").html(data);
    if ($.trim(data) == 'folder') $("#imgOk").fadeIn();
}); 
```

# memory - 为什么 Windows 上的 nasm 在复制时会反转我的字大小值？

> ID：14306580
> 
> 赞同：0
> 
> 时间：2013-01-13T18:15:05.100
> 
> 标签：memory, assembly, x86, nasm

当我这样复制时：

```
 mov word[esi+edi],0x7FFF 
```

在我写入的文件中，它被复制为 FF 7F

为什么会这样做，或者我该如何反转它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T18:19:26.070

NASM 没有这样做。处理器做到了，因为 x86 是 Little Endian（请参阅[endianness](http://en.wikipedia.org/wiki/Endianness)）。

如果你愿意，你可以写`mov word[esi+edi],0xFF7F`，但我怀疑代码一开始是正确的，只是你没有考虑字节序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T18:19:11.500

英特尔机器的字节顺序是最低有效字节在前，这就是它是 FF 和 7F 的原因。

见[http://en.wikipedia.org/wiki/Endianness](http://en.wikipedia.org/wiki/Endianness)

我不认为你想颠倒这个。

# php - 限制对登录表单的访问的安全方法

> ID：14306595
> 
> 赞同：0
> 
> 时间：2013-01-13T18:15:52.877
> 
> 标签：php, security

我正在尝试找出一种安全的方法来限制对基于 Web 的应用程序的访问。它只会被少数用户用于公司内部使用，我需要一种安全的方式来仅为这少数人提供对登录表单的访问。我尝试通过创建文件“user.txt”来做到这一点，并希望将其保存到这些未来用户的每台个人计算机上，因此登录页面首先检查 file_exists 是否存在然后显示登录表单，否则它会重定向访问者。不幸的是我无法使用 Windows 7 计算机权限或文件路径进行管理，但脚本总是说文件不存在。所以现在，我需要找到另一种方法来锁定登录页面。任何想法比 IP 地址更安全? 我如何识别那些 5-6 用户的计算机？谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T18:18:34.213

没有可靠的方法来识别特定的计算机。

首先拥有登录表单的目的通常是限制特定人员的访问权限，这通常就足够了。

如果您想更进一步，您可以使用（用于身份验证）必须安装在客户端计算机上的 SSL 客户端证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:19:29.047

`file_exists`只能在服务器上工作，它不能访问用户机器上的文件......想象一下会导致的安全风险。

相反，如果它是供公司内部使用的，那么显而易见的第一步是限制对属于公司 IP 地址的人员的访问。您可以使用`$_SERVER['REMOTE_ADDR']`来获取该信息。

*接下来，有多少人访问登录*表单并不重要，因为他们需要一个帐户才能登录。如果您自己创建帐户并要求用户在第一次登录时更改密码，那么没什么好担心的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T18:21:50.807

您还可以使用[http auth](http://en.wikipedia.org/wiki/Basic_access_authentication)来避免编写额外的代码来处理登录表单。创建一个具有一些密码的用户并将其分发给您的内部网络用户。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-13T18:19:35.353

你可以使用 htaccess 和 htpasswd 吗？这是一种安全的简单方法。

# jquery - 使用悬停+单击图像精灵的 JQuery 导航菜单

> ID：14306599
> 
> 赞同：0
> 
> 时间：2013-01-13T18:16:55.163
> 
> 标签：jquery, css, image, sprite, fade

我正在为网站构建导航工具栏并努力使悬停+单击工作。我已经搜索了几天并使用实时站点和教程中的方法进行了多次重建，但我无法解决这个简单的问题。

问题：我有一个导航工具栏精灵图像，具有三种状态：被动、悬停和主动。我为所有三种状态都设置了类，但只能使用 jquery 正确显示悬停状态。

我想要做什么：当光标悬停在文本上时，我希望它为在标签下运行的精灵的悬停部分设置不透明度动画（它可以完美地淡入淡出）。接下来，我想为精灵的活动部分设置不透明度动画，使其也从悬停精灵淡入到活动精灵。该网站也将是单页导航，因此当单击另一个按钮时，我需要活动按钮返回到被动精灵。

这是我到目前为止所拥有的：

```
CSS:
ul#navMenu {
width:1020px;
height: 110px;
list-style:none;
margin:250px auto;
}

ul#navMenu li {
float:left;
}

ul#navMenu li a {
background: url(menu-sprite.png) no-repeat scroll top left;
display: block; 
height: 110px;
text-indent: -9999px;
position:relative;

}

ul#navMenu li a.gallery {
    width: 230px; 
    background-position: 0 0;

}

ul#navMenu li a.wip {
    width: 229px; 
    background-position: -230px 0;  
}

ul#navMenu li a.home {
    width: 103px; 
    background-position: -459px 0;  
}

ul#navMenu li a.scripts {
    width: 229px; 
    background-position: -562px 0;  
}

ul#navMenu li a.contact {
    width: 229px; 
    background-position: -791px 0;  
}

ul#navMenu li a span {
background: url(menu-sprite.png) no-repeat scroll bottom left;
display: block;
position:absolute;
top:0px;
left:0px;
height:100%;
width:100%;
z-index:75;
}
ul#navMenu li a span:hover {
    cursor:pointer;
}   
    ul#navMenu li a.gallery span{
        background-position: 0 -110px;
    }

    ul#navMenu li a.wip span{
        background-position: -230px -110px; 
    }

    ul#navMenu li a.home span{
        background-position: -459px -110px; 
    }

    ul#navMenu li a.scripts span{
        background-position: -562px -110px; 
    }

    ul#navMenu li a.contact span{
        background-position: -791px -110px; 
    }

ul#navMenu li a :active span {
background: url(menu-sprite.png) no-repeat scroll bottom left;
display: block;
position:absolute;
top:0px;
left:0px;
height:100%;
width:100%;
z-index:100;
}       
        ul#navMenu li a span:active {
            cursor:pointer;
        }   

        ul#navMenu li a .gallery:active span {
            background-position: 0 -220px;  
        }

        ul#navMenu li a .wip:active span {
            background-position: -230px -220px; 
        }

        ul#navMenu li a .home:active span {
            background-position: -459px -220px; 
        }

        ul#navMenu li a .scripts:active span {
            background-position: -562px -220px; 
        }

        ul#navMenu li a .contact:active span {
            background-position: -791px -220px; 
        } 
```

...

```
HTML:
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org    /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>NavMenu Test</title>

<link rel="stylesheet" href="styles.css" />

 <script src="jquery-1.8.3.min.js" type="text/javascript"></script>
 <script type="text/javascript">
$(function() {
    // set opacity to nill on page load
    $("ul#navMenu span").css("opacity","0");
    // on mouse over
    $("ul#navMenu span").mouseover (function () {
        // animate opacity to full
        $(this).stop().animate({
            opacity: 1
        }, 'slow');
    });
    // on mouse out
    $("ul#navMenu span").mouseout (function () {
        // animate opacity to nill
        $(this).stop().animate({
            opacity: 0
        }, 'slow');
    });
    // on mouse click
    $("ul#navMenu :active span").click(function () {
        // animate opacity to full
        $(this).unbind('mouseover'),
        $(this).unbind('mouseout'),
        $(this).stop().animate({
            opacity: 1
        }, 'slow');
    });
});
</script>

</head>

<body>

<ul id="navMenu">
<li><a href="#" class="gallery"><span style="opacity: 0;"></span></a></li>
<li><a href="#" class="wip"><span style="opacity: 0;"></span></a></li>
<li><a href="#" class="home"><span style="opacity: 0;"></span></a></li>
<li><a href="#" class="scripts"><span style="opacity: 0;"></span></a></li>
<li><a href="#" class="contact"><span style="opacity: 0;"></span></a></li>
</ul>

</body>
</html> 
```

我想要的功能可以在这里找到：[http ://pixelpimps.net/#!/home](http://pixelpimps.net/#!/home)

我正在尝试完成相同的功能（悬停在动画上、单击动画、单击切换动画），但使用图像精灵除外。

提前致谢，请问您是否需要其他任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:45:14.513

我相信它是在该站点上使用 Flash 完成的。

您可以尝试在每个跨度内放置一个图像，谁有`src`机会悬停。然后让`src`'be gif 图像超过一帧。我现在正在编写一些代码来执行此操作。我将在几个小时内编辑并发布代码。不要害怕尝试以自己的方式使用这个想法，我不是专家。

# spring - 未找到除字符串以外的基本类型的弹簧自定义转换器

> ID：14306603
> 
> 赞同：3
> 
> 时间：2013-01-13T18:17:04.483
> 
> 标签：spring, data-binding, converter

我正在使用 Spring 3.1，并且我编写了一个自定义转换器

```
public class CategoryConverter implements Converter<Long, Category> {
  @Override
  public Category convert(String id) {
    return BeanProvider.getCategoryDAO().get(id);
  }
} 
```

并在应用程序上下文中使用 mvc 连接它

```
<bean id="conversionService" class="org.springframework.format.support.FormattingConversionServiceFactoryBean">
  <property name="converters">
     <set>
       <bean class="converter.CategoryConverter"/>
      </set>
  </property>
</property> 
```

每当我发送表单（发送一个数字，即 id）时，我都会得到一个*没有匹配的编辑器或发现转换策略*的异常。

如果我声明转换器，`Converter<String, Category>`那么它会奇迹般地工作。

谁能指出，为什么它只适用于字符串而不适用于长。有没有办法以某种方式定义转换器，所以它也适用于类型`Long`？

# vb.net - Shell 命令和空格

> ID：14306604
> 
> 赞同：0
> 
> 时间：2013-01-13T18:17:10.393
> 
> 标签：vb.net, console-application

我想如何通过我的 VB.NET 应用程序应用此命令：

```
Shell("Reg add HKCU\Software\Policies\Microsoft\Internet Explorer\Toolbars\Restrictions /v NoNavBar /t  REG_DWORD /d 1 /f", vbHidden) 
```

这段代码无法完成，`CMD`因为 Internet Explorer 中有一个空格，所以`cmd`我们`" "`在空格之前和之后放置`,`，所以它变成了`"HKCU ..."`，但是如果我尝试在 VB.net 中执行此操作，它会说*`Comma or valid expression excepted`*，

我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:35:38.537

在字符串中使用双双引号来嵌入双引号。

```
Shell("Reg add ""HKCU\Software\Policies\Microsoft\Internet Explorer\Toolbars\Restrictions"" /v NoNavBar /t  REG_DWORD /d 1 /f", vbHidden) 
```

但是有一种更好的方法可以做到这一点。.NET 库有一个[Registry](http://msdn.microsoft.com/en-us/library/microsoft.win32.registry.aspx)类和一个[RegistryKey](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.aspx)类，因此无需调用外部函数来添加新的注册表值。

# mercurial - 如何在提交其他更改之前修复并提交 Mercurial 中的一项更改？

> ID：14306605
> 
> 赞同：0
> 
> 时间：2013-01-13T18:17:17.803
> 
> 标签：mercurial, workflow

我有一个使用 Mercurial 的项目，我独自工作，并且经常发现自己一遍又一遍地处于相同的情况：在工作期间，我意识到在完成当前工作之前应该修复并提交其他更改. 所以，我试图创建一个“匿名分支”

```
hg update --check PREVIOUS_REVISION 
```

但不幸的是，它不适用于未提交的更改（我真的不想提交未完成的工作）。所以，每次，我都会复制带有源代码的目录，*恢复*到以前的版本，修复，*提交*，切换回我的工作副本，*拉*取更改并继续我的工作......但这需要太多时间，所以也许有更好的如何做到这一点，只需一份来源？谢谢你。

PS 可能，这与[我如何在处理其他事情时将一堆未提交的更改放在一边](https://stackoverflow.com/q/11520047/)是同一个问题，但我的想法是“是否可以将未完成的工作留在'原样'状态的默认分支中，然后继续工作稍后，不加载外部补丁？” （无论如何，如果它是重复的，请随时关闭它）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:25:56.607

解决“间歇性工作”任务的三种方法

*   使用[搁置扩展](http://mercurial.selenic.com/wiki/ShelveExtension)：保存所有当前更改`hg shelve --all`，在干净的 WC 中进行所需的独立更改，提交，恢复工作的中间结果，保存在步骤 1`hg unshelve`
*   使用匿名分支：“按原样”提交你的 WC，`hg up <REV>`到之前的提交，进行“必须在之前”的更改，提交，返回到旧的头，合并头，继续工作
*   使用[MQ 扩展](http://mercurial.selenic.com/wiki/MqExtension)：使用[MQ 教程](http://mercurial.selenic.com/wiki/MqTutorial)作为起点，第一章：“Mq for the impatient”（在您的情况下，在 qrefresh 和 qfinish 之间将是纯提交）

我会更喜欢（并且总是用于不同的任务）MQ

**添加：**

对于“干净历史”的粉丝和崇拜者，匿名分支工作流程的一种可能变化（避免合并）

*   `hg commit -m "Unfinished work"`（转 M）
*   `hg up -r "tip^1"`
*   ...
*   `hg commit -m "Base changes"`（转 N）
*   `hg rebase -r M -d N`（线性化历史）
*   `hg up`
*   ...
*   `hg commit --amend -m "Full dependent change"`

**PS：**我在反向变更集中看不到任何不好的地方，即`a = something(data)`在 CSET 和`function something (int subject) {...}`CSET+1 中写入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:28:24.960

提交未完成并不是一件坏事。它可以帮助您在硬盘崩溃之类的事情中幸存下来。为什么不使用诸如“这正在进行中”之类的提交消息来提交您正在进行的代码，做您需要做的任何其他事情，然后继续处理它？

根据定义，旧的提交是未完成的。这就是为什么你在他们之后做出了更多的事情。不要担心旧存储库的状态。

当然，你应该治愈你在特性分支中工作，这样你就可以将你的代码推送到一个不是`default`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T05:36:45.437

如果“必须”更改是不同的代码块，为什么不`hg record`，并选择“必须”块并在其他代码之前提交。

# c# - .NET 许可证系统

> ID：14306608
> 
> 赞同：1
> 
> 时间：2013-01-13T18:17:37.117
> 
> 标签：c#, licensing

基于这篇文章的公认答案[如何为我的 C# 应用程序创建产品密钥？](https://stackoverflow.com/questions/453030/how-can-i-create-a-product-key-for-my-c-sharp-app) 我最好调查（对于教学范围）“安全检查跳过”术语的真正含义。

据我所知，一个简单的布尔比较可以在5秒内破解，例如：if(textBoxActivationKey.Tex == "123") ok...else ko。这代表了任何安全系统解决方案的典型弱点，那么与简单的比较相比，什么真的更有效呢？

我记得在某处读过使用一些异常抛出来使应用程序崩溃，而不是使用布尔比较器，但我想这还不够。

诚然（至少在理论上）任何东西都可以被破解，但如何使它成为真正复杂的安全激活系统呢？哪个可以成为真正的威慑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:21:57.460

您在寻找效率还是有效性？大多数应用程序都会打电话回家。这似乎是一个很好的激活方法。但是，这意味着用户必须在线才能激活。

如果您必须在线，并且激活是通过某处服务器上的服务（您拥有的）完成的，那么您可以立即记录激活密钥已被使用（并使其无效）。

我不是这方面的专家，但我认为如果随附的密钥仅代表完整激活密钥的一部分，而其余部分必须从服务器接收，那可能会起作用。

# regex - Sublime Text 2 TM_FILEPATH 正则表达式片段

> ID：14306612
> 
> 赞同：1
> 
> 时间：2013-01-13T18:18:07.877
> 
> 标签：regex, sublimetext2

我正在尝试为 Sublime Text 2 制作 CodeIgniter CRUD 片段，但我不知道如何编写正则表达式片段，它将返回 TM_FILEPATH 变量的特定部分

我在 CodeIgniter 片段之一中找到了这个：

`${TM_FILEPATH/.+((?:application).+)/$1/:application/controllers/${1/(.+)/\l$1.php/}}`

例如，如果文件位置是：

`/D/Web/MyApp/application/controllers/admin/user.php`

此代码段将返回：

`application/controllers/admin/user.php`

我需要的只是“控制器”之后的部分，没有扩展，在这个例子中：

`admin/user`

PS：控制器后面的路径可以有不同数量的目录，可以是，也可以`user`是`admin/something/user`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:15:12.190

```
${TM_FILEPATH/.+(?:controllers\/)(.+)\.\w+/PATH\l$1/} 
```

# php - 正则表达式匹配包含文本双引号和方括号的字符串

> ID：14306620
> 
> 赞同：0
> 
> 时间：2013-01-13T18:18:48.117
> 
> 标签：php, regex, preg-match

我正在尝试使用双引号和方括号提取两个字符串之间的文本。`[gallery ids="`和`"]`

我的格式是：

```
[gallery ids="55,57,56,58,59"] 
```

我想上交

```
55,57,56,58,59 
```

我已经尝试过我遇到的各种模式，但都没有运气。谁能告诉我使用 PHP 的正则表达式函数可以实现什么模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T18:21:46.050

这应该对你有用：

```
$string = '[gallery ids="55,57,56,58,59"]';
if (preg_match('/\[gallery\sids="([^"]+)"\]/', $string, $m)) {
    echo $m[1];
} 
```

或者如果你想在文本中匹配多个这样的字符串，那么只需使用`preg_match_all`：

```
if (preg_match_all('/\[gallery\sids="([^"]+)"\]/', $string, $m)) {
    print_r($m[1]);
} 
```

# python - 带有元数据的 scipy kdtree

> ID：14306624
> 
> 赞同：7
> 
> 时间：2013-01-13T18:19:10.170
> 
> 标签：python, algorithm, scipy, kdtree

我目前正在寻找一种方法来构建几个 kd 树以快速查询一些 n 维数据。但是，我对 scipy KD 树算法有一些问题

我的数据包括`id -> {data: somedata, coordinate: x, y}`

我希望能够根据坐标和 k 最近邻居的 id 进行查询，并获得修复半径邻居的 id。从 KDTree 和 cKDtree 的 scipy 实现来看，这是不可用的。

我的其他选择是编写我自己的 KD 树，这不会那么好，因为我只是我，或者......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T19:21:37.457

从玩弄[KDTree 来看](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.KDTree.html)，它似乎坚持将 2D numpy 数组像对象一样提供给它的构造函数，但 API 会将索引返回到该数组中。此外，您不能只将数据修补到各个坐标上。

但是，您仍然可以利用 KDTree 的优势。您需要将对象拆分为附加数据对象的并行列表，以及 KDTree 看到的坐标的 numpy 数组。当它说返回某个搜索的第 3 个点时，您知道它对应于附加数据对象列表中的第 3 个索引。

当然，它比给你一个提供任意对象坐标的键函数的 API 更尴尬，类似于你如何将键传递给 python 排序函数，但它比滚动你自己的 KDTree 实现要好得多。

# vb.net - 为什么执行存储过程的 VB 代码不改变表？

> ID：14306629
> 
> 赞同：0
> 
> 时间：2013-01-13T18:19:25.680
> 
> 标签：vb.net, visual-studio-2010, sql-server-2008

使用 Visual Studio 2010，我创建了一个 VB Web 应用程序，并在其中添加了一个数据库。我有一个 VB 类，它假设有一个名称并通过存储过程将其添加到数据库中。我运行代码并将变量传递给 vb 类，但一旦我停止运行程序，似乎就不会更改表。

我是 vb 和视觉工作室的新手，所以我使用[http://www.macronimous.com/resources/calling_stored_procedures_from_ASP.NET_and_VB.NET.asp](http://www.macronimous.com/resources/calling_stored_procedures_from_ASP.NET_and_VB.NET.asp)作为我的指南，这就是为什么代码是这样的。

这是vb类

```
Imports System.Data
Imports System.Data.SqlClient

Public Class human

Private name As String
Private id As Integer

Public Function sendName(ByVal nm As String)

    Dim SQLCon As New SqlClient.SqlConnection
    Dim SQLCmd As New SqlCommand
    SQLCon.ConnectionString = "Data Source=.\SQLEXPRESS;AttachDbFilename=
 C:\Documents and Settings\user\my documents\visual studio 2010\Projects\
 WebApplication3\WebApplication3\App_Data\Database1.mdf;
 Integrated Security=True;User Instance=True"

    SQLCon.Open()
 'I want to to execute the procedure addName using the variable nm
    SQLCmd.CommandText = "addName"
    SQLCmd.CommandType = CommandType.StoredProcedure
    SQLCmd.Parameters.AddWithValue("@name", nm)
    SQLCmd.Connection = SQLCon 'Active Connection
    SQLCon.Close()

    Return (nm)
End Function

End Class

and here's my stored procedure "addName"
Alter PROCEDURE addName (@GivenName varchar(100))
AS
BEGIN
SET NOCOUNT ON;
Insert into tableA (name) values (@GivenName);
END
return 
```

在我停止调试应用程序后，我错过了什么阻止表格显示更新？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T18:23:15.940

伟大的。您定义一个命令，创建一个连接并打开它。但是您无法*执行*该命令。

```
SQLCmd.Connection = SQLCon 'Active Connection
SQLCmd.ExecuteNonQuery()
SQLCon.Close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T18:24:09.357

你省略了一个语句`SQLCmd.ExecuteNonQuery()`

```
SQLCmd.ExecuteNonQuery()  'You need this line
SQLCon.Close() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T18:26:59.613

您错过了 ExecuteNonQuery() 方法。

```
SQLCon.Open()
SQLCmd.CommandText = "addName"
SQLCmd.CommandType = CommandType.StoredProcedure
SQLCmd.Parameters.AddWithValue("@name", nm)
SQLCmd.Connection = SQLCon 'Active Connection
SQLCmd.ExecuteNonQuery()  'This one is missing
SQLCon.Close() 
```

# html - 应用于按钮的 CSS 在按钮下方留下紫色框

> ID：14306641
> 
> 赞同：0
> 
> 时间：2013-01-13T18:20:25.143
> 
> 标签：html, css

所以，我为我的按钮弄乱了 CSS，并试图在按钮元素上测试以下 CSS 代码：

```
button {
    width:85px;
    height:29px;
    background-color:#800080;
    color:#FFFFFF;
    font-size:14px;
    font-weight:bold;
} 
```

最后的 2 个按钮是由这个 HTML 创建的：

```
<div id="header">
    <div id="logo"><img src="logo.jpg" /></div>
    <div id="search">
        <form id="search-form">
            <input type="text" style="width:80%;height:28px;background-color:#F5F5F5;font-size:16px;position:relative;top:-3px;"/>
            <button type="button" style="position:relative;top:6px;"><img src="mgt.jpg" /></button>
        </form>
    </div>
    <div id="upload" class="top-button"><button>Upload</button></div>
    <div id="signin" class="top-button"><button>Sign in</button></div>
</div> 
```

最后两个按钮“上传”和“登录”是问题。

结果：

![下方带有奇怪紫色框的按钮](../Images/dfcafdabd23ddd69c6ddb7e2b9066fed.png)

如在 Firefox 中所见。任何想法是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:34:58.880

我没有看到问题....查看[http://jsfiddle.net/vb7S3/](http://jsfiddle.net/vb7S3/)

但我仍然建议不要使用`<button>`标签，而是为#upload 和#signin 定义样式类。

HTML

```
<button id="upload" class="top-button">Upload</button>
<button id="signin" class="top-button">Sign in</button> 
```

CSS

```
#upload, #signin {
    width:85px;
    height:29px;
    background-color:#800080;
    color:#FFFFFF;
    font-size:14px;
    font-weight:bold;
} 
```

此外`<button>`，并非所有浏览器都支持标签。

## 更好的方法...

HTML

```
<input id="button" class="upload-button" type="submit" value="Upload" />
<input id="button" class="sign-in-button" type="submit" value="Sign In" /> 
```

CSS

```
#button {
    width:85px;
    height:29px;
    background-color:#800080;
    color:#FFFFFF;
    font-size:14px;
    font-weight:bold;
} 
```

必须在块`<input>`内包含标签。`<form> ... </form>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:25:13.053

这可能是`height`造成这种情况的属性，因为紫色区域似乎`29 px`很高。我不确定文本下方的额外边框是什么，但可能是边框被应用在文本周围而不是整个按钮。尝试添加`border:none`，看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T18:26:29.390

[在jsfiddle](http://jsfiddle.net/7hDED/)上看到这个演示

你的问题是`id='upload'`或`id="signin"`在

```
<div id="upload" class="top-button"><button>Upload</button></div> 
```

`upload`CSS for和`signin`ids之间存在一些冲突，可能是一些高值问题

# c++ - 在 CMake 中添加多个可执行文件

> ID：14306642
> 
> 赞同：85
> 
> 时间：2013-01-13T18:20:25.383
> 
> 标签：c++, build, cmake, executable

我在 C++ 项目中的代码组织如下

*   我有几个包含我的课程的`.cpp`文件`.h`
*   我有几个`.cxx`文件必须针对这些`.cpp`文件和一些外部库进行编译。

现在，每个`.cxx`文件都有一个`main()`方法，所以我需要为每个与文件同名的文件添加一个不同的可执行文件。

此外，这些`.cxx`文件可能不会链接到相同的外部库。

我想在 CMake 中编写这个构建，我是一个新手，我该怎么做？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-01-13T19:45:41.040

我的建议是分两个阶段解决这个问题：

1.  从`.cpp`和`.h`文件构建一个库，使用[`add_library`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:add_library)
2.  遍历所有`.cxx`文件并从每个文件中创建一个可执行文件，使用[`add_executable`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:add_executable)和[`foreach`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:foreach)

# 建立图书馆

这可能很简单

```
file( GLOB LIB_SOURCES lib/*.cpp )
file( GLOB LIB_HEADERS lib/*.h )
add_library( YourLib ${LIB_SOURCES} ${LIB_HEADERS} ) 
```

# 构建所有可执行文件

只需遍历所有 .cpp 文件并创建单独的可执行文件。

```
# If necessary, use the RELATIVE flag, otherwise each source file may be listed 
# with full pathname. RELATIVE may makes it easier to extract an executable name
# automatically.
# file( GLOB APP_SOURCES RELATIVE app/*.cxx )
file( GLOB APP_SOURCES app/*.cxx )
foreach( testsourcefile ${APP_SOURCES} )
    # I used a simple string replace, to cut off .cpp.
    string( REPLACE ".cpp" "" testname ${testsourcefile} )
    add_executable( ${testname} ${testsourcefile} )
    # Make sure YourLib is linked to each app
    target_link_libraries( ${testname} YourLib )
endforeach( testsourcefile ${APP_SOURCES} ) 
```

## 一些警告：

*   `file( GLOB )`通常不推荐，因为如果添加新文件，CMake 不会自动重建。我在这里使用它，因为我不知道你的源文件。
*   在某些情况下，可以找到带有完整路径名的源文件。如有必要，请使用[RELATIVE 标志`find( GLOB ... )`](http://www.cmake.org/cmake/help/v2.8.11/cmake.html#command:file)。
*   手动设置源文件需要更改 CMakeLists.txt，这会触发重建。有关globbing 的（不利）优势，请参阅[此问题。](https://stackoverflow.com/questions/1027247/best-way-to-specify-sourcefiles-in-cmake)
*   我使用`string( REPLACE ... )`. 我本可以将[get_filename_component](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:get_filename_component)与`NAME_WE`标志一起使用。

关于“一般”CMake 信息，我建议您阅读 stackoverflow 上已经提出的一些广泛的“CMake 概述”问题。例如：

*   [CMake 教程](https://stackoverflow.com/questions/2186110/cmake-tutorial)
*   [CMake 的新手想知道哪些尘土飞扬的角落？](https://stackoverflow.com/questions/4506193/what-are-the-dusty-corners-a-newcomer-to-cmake-will-want-to-know)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-24T04:18:32.957

在组织具有多个示例文件的 OpenGL 项目时，我发现自己处于类似的情况，其中每个文件都包含一个 main 方法。

下面的设置将为每个 c/cpp 文件生成一个单独的可执行文件，并将所需的依赖项复制到目标 bin 文件夹。

**文件夹结构**

```
my-project
│── ch01_01.c
│── ch02_01.cpp
│── CMakeLists.txt
│── Resources
│   │── Libraries
│   │   │── glew
│   │   │   │── bin
│   │   │   │── include
│   │   │   │── lib
│   │   │── glfw    
│   │   │   │── include 
│   │   │   │── lib 
```

**CMakeLists.txt**

```
cmake_minimum_required (VERSION 3.9)

project ("my-project")

include_directories(Resources/Libraries/glew/include
                    Resources/Libraries/glfw/include)

link_directories(Resources/Libraries/glew/lib
                 Resources/Libraries/glfw/lib)

link_libraries(opengl32.lib
               glew32.lib
               glfw3.lib)

set(CMAKE_EXE_LINKER_FLAGS "/NODEFAULTLIB:MSVCRT")

file(GLOB SOURCE_FILES *.c *.cpp)

foreach(SOURCE_PATH ${SOURCE_FILES})

    get_filename_component(EXECUTABLE_NAME ${SOURCE_PATH} NAME_WE)

    add_executable(${EXECUTABLE_NAME} ${SOURCE_PATH})

    # Copy required DLLs to the target folder
    add_custom_command(TARGET ${EXECUTABLE_NAME} POST_BUILD
                       COMMAND ${CMAKE_COMMAND} -E copy_if_different "${CMAKE_SOURCE_DIR}/Resources/Libraries/glew/bin/glew32.dll" 
                                                                     "${CMAKE_BINARY_DIR}/glew32.dll")

endforeach(SOURCE_PATH ${SOURCE_FILES}) 
```

**可选步骤**

**在 Visual Studio 中**

*   在开始窗口中使用“打开本地文件夹”选项打开项目

*   添加新文件时，您可以：

    *   取消要求自动`add_executable`到 CMakeLists.txt的对话框
    *   通过取消选中“从文件夹视图中为文件操作启用自动 CMake 脚本修改”来禁用此行为`Tools > Options > CMake`

由于 CMakeLists.txt 永远不会更改，因此不会自动拾取新添加的文件，因此只需像这样重新生成缓存：

*   `Project > CMake Cache (x64-Debug) > Delete Cache`
*   `Project > Generate Cache for my-project`

现在您只需右键单击给定的 c/cpp 文件并`Set as Startup Item`能够使用`F5`.

**环境**

*   cmake 版本 3.18.20081302-MSVC_2
*   Microsoft Visual Studio 社区 2019 版本 16.8.3

**入门模板**

如果您有兴趣，我将这个[入门模板放在 GitHub 上。](https://github.com/rbento/cmake-multiexec-starter)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-11-19T11:04:01.373

这`CMakeLists.txt`适用于我的 OpenCV 项目
，假设`*.cpp`文件与`CMakeLists.txt`

```
cmake_minimum_required(VERSION 3.5)

project(opencv LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

find_package(OpenCV REQUIRED)
include_directories( ${OpenCV_INCLUDE_DIRS} )

file( GLOB APP_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/*.cpp )
foreach( sourcefile ${APP_SOURCES} )
    file(RELATIVE_PATH filename ${CMAKE_CURRENT_SOURCE_DIR} ${sourcefile})
    string( REPLACE ".cpp" "" file ${filename} )
    add_executable( ${file} ${sourcefile} )
    target_link_libraries( ${file} ${OpenCV_LIBS} )
endforeach( sourcefile ${APP_SOURCES} ) 
```

# actionscript-3 - 线路 stage.addeventlistener 给出错误；如何实例化阶段？

> ID：14306644
> 
> 赞同：0
> 
> 时间：2013-01-13T18:20:34.723
> 
> 标签：actionscript-3, flash, stage

我对 stage.addeventlistner 有疑问。在做了一些研究之后，我发现了一些提示，它可能没有被实例化。

我怎么做？

> typeerror 错误 #1009 无法访问空对象引用的属性或方法

（它所指的行是stage.addeventlistener）

只有重要位的代码

```
package 
{
import flash.display.MovieClip;
import flash.events.*;
import flash.events.KeyboardEvent;
import flash.ui.Keyboard;
import flash.geom.Point;

public class TesTrun extends MovieClip 
{
    var leftPressed:Boolean = false;
    var rightPressed:Boolean = false;
    var upPressed:Boolean = false;
    var downPressed:Boolean = false;
public function TestRun() 
    {    

stage.addEventListener(KeyboardEvent.KEY_DOWN, keyDownHandler);
stage.addEventListener(KeyboardEvent.KEY_UP, keyUpHandler);
stage.addEventListener(Event.ENTER_FRAME, loop);
      //there is more code down here but i don't think that has to be included
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:28:54.800

您可以使用 ADDED_TO_STAGE 事件来触发您的初始化代码：

```
public function TestRun() 
{    
    addEventListener(Event.ADDED_TO_STAGE, init);
}

public function init(e:Event):void
{
    stage.addEventListener(KeyboardEvent.KEY_DOWN, keyDownHandler);
    stage.addEventListener(KeyboardEvent.KEY_UP, keyUpHandler);
    stage.addEventListener(Event.ENTER_FRAME, loop);

} 
```

# android - 如何为模拟器 Android 设置电话号码？

> ID：14306647
> 
> 赞同：0
> 
> 时间：2013-01-13T18:21:14.230
> 
> 标签：android

> **可能重复：**
> [在模拟器中更改电话号码 - Android 开发](https://stackoverflow.com/questions/4867286/change-phone-number-in-emulator-android-development)

我正在运行 2 个模拟器（A 和 B）。

(A) 有默认号码 5554，(B) 有默认号码 5556，我想设置 (B) 有号码：8701 或类似的东西，从 (A) 可以向 (B) 发送短信。

对我有什么想法吗？

# neo4j - Spring数据neo4j aspectJ设置错误

> ID：14306665
> 
> 赞同：2
> 
> 时间：2013-01-13T18:22:55.123
> 
> 标签：neo4j, spring-data, spring-data-neo4j, spring-data-graph

我可以在 STS 中设置 spring data 和 neo4j，但我还想利用 Spring data 提供的 aspectJ 功能。

我已经检查并使用了 Cineasts 示例作为帮助示例，但似乎我无法正确设置我的项目，我所做的步骤是： 创建新的 maven 应用程序。

在 pom.xml 上添加提供的插件。

我面临的问题是，在我的项目中的每个类中的包声明中，都有一个错误指出

> 无法确定缺少类型 javax.persistence.Entity 的注释在编织类型 com.f.graph.Graph 时编织类时编织时使用类路径批量构建时：

我的 pom.xml 是

> http://maven.apache.org/xsd/maven-4.0.0.xsd">4.0.0

```
<groupId>org.neo4j.examples</groupId>
<artifactId>cineasts-aspects</artifactId>
<version>2.1.0.BUILD-SNAPSHOT</version>
<packaging>war</packaging>

<name>Cineasts.net Aspects</name>

<properties>
    <spring.version>3.1.0.RELEASE</spring.version>
    <spring-security.version>3.0.0.RC1</spring-security.version>
    <spring-data-neo4j.version>${project.version}</spring-data-neo4j.version>
    <neo4j.version>1.8.M06</neo4j.version>
    <aspectj.version>1.6.12</aspectj.version>
    <env>test</env>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<repositories>
    <repository>
        <id>spring-maven-release</id>
        <name>Spring Maven Release Repository</name>
        <url>http://maven.springframework.org/release</url>
    </repository>
    <repository>
        <id>spring-maven-snapshot</id>
        <name>Spring Maven Snapshot Repository</name>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
        <url>http://maven.springframework.org/snapshot</url>
    </repository>
    <repository>
        <id>spring-maven-milestone</id>
        <name>Spring Maven Milestone Repository</name>
        <url>http://maven.springframework.org/milestone</url>
    </repository>
    <repository>
      <id>neo4j-release-repository</id>
      <name>Neo4j Maven 2 release repository</name>
      <url>http://m2.neo4j.org/releases</url>
      <releases>
        <enabled>true</enabled>
      </releases>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
    </repository>
    <repository>
      <id>neo4j-snapshot-repository</id>
      <name>Neo4j Maven 2 snapshot repository</name>
      <url>http://m2.neo4j.org/snapshots</url>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
      <releases>
        <enabled>false</enabled>
      </releases>
    </repository>
</repositories>

<pluginRepositories>
    <pluginRepository>
        <id>spring-maven-release</id>
        <name>Spring Maven Release Repository</name>
        <url>http://maven.springframework.org/release</url>
    </pluginRepository>
    <pluginRepository>
        <id>spring-maven-milestone</id>
        <name>Spring Maven Milestone Repository</name>
        <url>http://maven.springframework.org/milestone</url>
    </pluginRepository>
</pluginRepositories>

<dependencies>
    <!-- Spring dependencies -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${spring.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>${spring.version}</version>
    </dependency>
     <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aspects</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <!-- <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${spring.version}</version>
        <exclusions>
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-jdk14</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-oxm</artifactId>
        <version>${spring.version}</version>
    </dependency>-->

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${slf4j.version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${slf4j.version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${slf4j.version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
        <scope>runtime</scope>
    </dependency>

    <dependency>
        <groupId>org.mongodb</groupId>
        <artifactId>mongo-java-driver</artifactId>
        <version>2.10.1</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-neo4j-aspects</artifactId>
        <version>${spring-data-neo4j.version}</version>
        <exclusions>
            <exclusion>
                <groupId>org.hibernate.javax.persistence</groupId>
                <artifactId>hibernate-jpa-2.0-api</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>opensymphony</groupId>
        <artifactId>sitemesh</artifactId>
        <version>2.4.2</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.8.3</version>
    </dependency>

    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>${aspectj.version}</version>
    </dependency>

    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib-nodep</artifactId>
        <version>2.2</version>
    </dependency>

    <!-- Neo4j Libraries -->

    <dependency>
        <groupId>org.neo4j</groupId>
        <artifactId>neo4j-kernel</artifactId>
        <version>${neo4j.version}</version>
        <type>test-jar</type>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.neo4j</groupId>
        <artifactId>neo4j-cypher</artifactId>
        <version>${neo4j.version}</version>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.1</version>
        <scope>test</scope>
    </dependency>
</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>7.1.2.v20100523</version>
            <configuration>
                <webAppConfig>
                    <contextPath>/</contextPath>
                </webAppConfig>
                <!--scanIntervalSeconds>1</scanIntervalSeconds -->
            </configuration>
        </plugin>

        <plugin>
            <!-- Must use java 1.5 or higher for annotations -->
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>
                <useFile>true</useFile>
                <includes>
                    <include>**/*Tests.java</include>
                    <include>**/*Test.java</include>
                </includes>
                <excludes>
                    <exclude>**/Abstract*.java</exclude>
                </excludes>
                <junitArtifactName>junit:junit</junitArtifactName>
            </configuration>
        </plugin>
        <!-- the eclipse plugin interacts with the aspectj-maven-plugin
        BUT ONLY if the ajdtVersion config value is set (remove it and it won't) -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>2.8</version>
            <configuration>
            <!-- The ajdtVersion configuration parameter is optional. The valid values are none, 1.4, and 1.5\. none indicates that AJDT should not be enabled even though Aspectj is enabled in maven. 1.4 generates the org.eclipse.ajdt.ui.prefs file in the .settings directory. 1.5 (or later) includes the configuration into the .classpath file and is the default value. -->
                <ajdtVersion>1.5</ajdtVersion>
                <additionalProjectnatures>
                    <projectnature>org.eclipse.ajdt.ui.ajnature</projectnature>
                    <projectnature>org.eclipse.jdt.core.javanature</projectnature>
                    <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                </additionalProjectnatures>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <version>1.2</version>
            <dependencies>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjrt</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjtools</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test-compile</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <outxml>true</outxml>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-aspects</artifactId>
                    </aspectLibrary>
                    <aspectLibrary>
                        <groupId>org.springframework.data</groupId>
                        <artifactId>spring-data-neo4j-aspects</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

我在 Windows 上使用 STS 3.1.0。我究竟做错了什么？

**=======================================更新============ =========================** 我已将我的 pom.xml 更改为这个：

> http://maven.apache.org/xsd/maven-4.0.0.xsd"> 4.0.0 测试 myGraph 2.1.0.BUILD-SNAPSHOT jar

```
<name>test.myGraph</name>

<properties>
    <spring.version>3.1.0.RELEASE</spring.version>
    <spring-security.version>3.0.0.RC1</spring-security.version>
    <spring-data-neo4j.version>${project.version}</spring-data-neo4j.version>
    <neo4j.version>1.8.M06</neo4j.version>
    <aspectj.version>1.6.12</aspectj.version>
    <slf4j.version>1.6.1</slf4j.version>
    <env>test</env>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<repositories>
    <repository>
        <id>spring-maven-release</id>
        <name>Spring Maven Release Repository</name>
        <url>http://maven.springframework.org/release</url>
    </repository>
    <repository>
        <id>spring-maven-snapshot</id>
        <name>Spring Maven Snapshot Repository</name>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
        <url>http://maven.springframework.org/snapshot</url>
    </repository>
    <repository>
        <id>spring-maven-milestone</id>
        <name>Spring Maven Milestone Repository</name>
        <url>http://maven.springframework.org/milestone</url>
    </repository>
    <repository>
      <id>neo4j-release-repository</id>
      <name>Neo4j Maven 2 release repository</name>
      <url>http://m2.neo4j.org/releases</url>
      <releases>
        <enabled>true</enabled>
      </releases>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
    </repository>
    <repository>
      <id>neo4j-snapshot-repository</id>
      <name>Neo4j Maven 2 snapshot repository</name>
      <url>http://m2.neo4j.org/snapshots</url>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
      <releases>
        <enabled>false</enabled>
      </releases>
    </repository>
</repositories>

<pluginRepositories>
    <pluginRepository>
        <id>spring-maven-release</id>
        <name>Spring Maven Release Repository</name>
        <url>http://maven.springframework.org/release</url>
    </pluginRepository>
    <pluginRepository>
        <id>spring-maven-milestone</id>
        <name>Spring Maven Milestone Repository</name>
        <url>http://maven.springframework.org/milestone</url>
    </pluginRepository>
</pluginRepositories>

<dependencies>
    <!-- Spring dependencies -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${spring.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>${spring.version}</version>
    </dependency>
     <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aspects</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <!-- <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${spring.version}</version>
        <exclusions>
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-jdk14</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-oxm</artifactId>
        <version>${spring.version}</version>
    </dependency>-->

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${slf4j.version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${slf4j.version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${slf4j.version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
        <scope>runtime</scope>
    </dependency>

    <dependency>
        <groupId>org.mongodb</groupId>
        <artifactId>mongo-java-driver</artifactId>
        <version>2.10.1</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-neo4j-aspects</artifactId>
        <version>${spring-data-neo4j.version}</version>
    </dependency>

    <dependency>
        <groupId>opensymphony</groupId>
        <artifactId>sitemesh</artifactId>
        <version>2.4.2</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.8.3</version>
    </dependency>

    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>${aspectj.version}</version>
    </dependency>

    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib-nodep</artifactId>
        <version>2.2</version>
    </dependency>

    <!-- Neo4j Libraries -->

    <dependency>
        <groupId>org.neo4j</groupId>
        <artifactId>neo4j-kernel</artifactId>
        <version>${neo4j.version}</version>
        <type>test-jar</type>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.neo4j</groupId>
        <artifactId>neo4j-cypher</artifactId>
        <version>${neo4j.version}</version>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.1</version>
        <scope>test</scope>
    </dependency>
</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>7.1.2.v20100523</version>
            <configuration>
                <webAppConfig>
                    <contextPath>/</contextPath>
                </webAppConfig>
                <!--scanIntervalSeconds>1</scanIntervalSeconds -->
            </configuration>
        </plugin>

        <plugin>
            <!-- Must use java 1.5 or higher for annotations -->
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>
                <useFile>true</useFile>
                <includes>
                    <include>**/*Tests.java</include>
                    <include>**/*Test.java</include>
                </includes>
                <excludes>
                    <exclude>**/Abstract*.java</exclude>
                </excludes>
                <junitArtifactName>junit:junit</junitArtifactName>
            </configuration>
        </plugin>
        <!-- the eclipse plugin interacts with the aspectj-maven-plugin
        BUT ONLY if the ajdtVersion config value is set (remove it and it won't) -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>2.8</version>
            <configuration>
            <!-- The ajdtVersion configuration parameter is optional. The valid values are none, 1.4, and 1.5\. none indicates that AJDT should not be enabled even though Aspectj is enabled in maven. 1.4 generates the org.eclipse.ajdt.ui.prefs file in the .settings directory. 1.5 (or later) includes the configuration into the .classpath file and is the default value. -->
                <ajdtVersion>1.5</ajdtVersion>
                <additionalProjectnatures>
                    <projectnature>org.eclipse.ajdt.ui.ajnature</projectnature>
                    <projectnature>org.eclipse.jdt.core.javanature</projectnature>
                    <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                </additionalProjectnatures>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <version>1.2</version>
            <dependencies>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjrt</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjtools</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test-compile</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <outxml>true</outxml>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-aspects</artifactId>
                    </aspectLibrary>
                    <aspectLibrary>
                        <groupId>org.springframework.data</groupId>
                        <artifactId>spring-data-neo4j-aspects</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

这不会产生任何构建错误，但是在尝试运行我的主类时：

```
public class Graph {

@SuppressWarnings("rawtypes")
public static void main(String [] args) {       
      ConfigurableApplicationContext context;
      context = new ClassPathXmlApplicationContext("Graph-configuration.xml");      
      BeanClass b = (BeanClass)context.getBean("StartBean");
      b.startInsert();
}} 
```

我得到这个例外：

> 线程“主”org.springframework.beans.factory.CannotLoadBeanClassException 中的异常：找不到类路径资源中定义的名称为“graphDatabaseService”的 bean 的类 [org.springframework.data.neo4j.rest.SpringRestGraphDatabase] [Graph-configuration.xml ]; 嵌套异常是 java.lang.ClassNotFoundException: org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1262) at org.springframework.beans.factory 的 org.springframework.data.neo4j.rest.SpringRestGraphDatabase。 support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576) 在 org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1331) 在 org.springframework.beans.factory.support.AbstractBeanFactory。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:49:25.600

从您的 pom.xml 中删除此代码段：

```
<exclusions>
    <exclusion>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
    </exclusion>
</exclusions> 
```

# jquery - 使用 Galleria.js 与 Flickr 和 JSON 的多个画廊

> ID：14306668
> 
> 赞同：0
> 
> 时间：2013-01-13T18:23:17.983
> 
> 标签：jquery, json, flickr, galleria

有没有办法让这个 Galleria.js 示例与 JSON 和 Flickr 一起使用？ [http://goo.gl/Fk3h5](http://goo.gl/Fk3h5)

原因是，我有 500 张 Flickr 照片，并且使用 Galleria 提供的 Flickr 插件，加载或崩溃浏览器需要很长时间。JSON 方法似乎很理想。

我已经看过这个教程[http://goo.gl/3L5Nn](http://goo.gl/3L5Nn)但它只涵盖了一个带有 JSON 的照片集。

我似乎无法弄清楚如何将它们联系在一起。非常感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T15:10:56.833

您可以使用[jQuery Tabs](http://jqueryui.com/tabs/)来分离内容，然后在单击选项卡时拉入[不同的画廊](http://www.cincoranch.com/Photos-Videos/Photo-Gallery)。我最近使用[Umbraco CMS](http://umbraco.com/)后端来托管图像，但对于 flickr 也是如此。

# javascript - 在 html 画布上绘制贝塞尔曲线

> ID：14306670
> 
> 赞同：1
> 
> 时间：2013-01-13T18:23:22.943
> 
> 标签：javascript, html5-canvas, bezier

我需要绘制由存储在数组中的 N 个控制点定义的贝塞尔曲线。我有一个 500 像素 x 500 像素的画布。这是 JSFiddle 链接：jsfiddle.net/HswXy 整个 JS 代码：

```
<script>
    window.onload=function(){
        var old_n=0,n=0;
        var nrSelect = document.getElementById("mySelect");
        var submit = document.getElementById("submit");

        nrSelect.addEventListener("change",function(){
            old_n=n;
            n = nrSelect.selectedIndex;

            var inputx,inputy,br;

            if(document.getElementById("pointsdiv"))
            {
                for(i=1;i<=n;i++){
                    inputx = document.createElement('input');
                    inputy = document.createElement('input');
                    br = document.createElement('br');

                    inputx.type = "text";
                    inputy.type = "text";
                    inputx.size = 3;
                    inputy.size = 3;
                    inputx.id = "x_" + i;
                    inputy.id = "y_" + i;
                    inputx.value = "x_" + i;
                    inputy.value = "y_" + i;

                    inputx.addEventListener("focus",function(){if(this.value==this.id) this.value="";});
                    inputy.addEventListener("focus",function(){if(this.value==this.id) this.value="";});

                    document.getElementById("pointsdiv").appendChild(inputx);
                    document.getElementById("pointsdiv").appendChild(inputy);
                    document.getElementById("pointsdiv").appendChild(br);
                }

                document.getElementById("pointsdiv").id="pointsdiv_after";
            }
            else
            {
                if( old_n < n )
                {
                    for(i=old_n+1;i<=n;i++){
                        inputx = document.createElement('input');
                        inputy = document.createElement('input');
                        br = document.createElement('br');

                        inputx.type = "text";
                        inputy.type = "text";
                        inputx.size = 3;
                        inputy.size = 3;
                        inputx.id = "x_" + i;
                        inputy.id = "y_" + i;
                        inputx.value = "x_" + i;
                        inputy.value = "y_" + i;

                        inputx.addEventListener("focus",function(){if(this.value==this.id) this.value="";});
                        inputy.addEventListener("focus",function(){if(this.value==this.id) this.value="";});

                        document.getElementById("pointsdiv_after").appendChild(inputx);
                        document.getElementById("pointsdiv_after").appendChild(inputy);
                        document.getElementById("pointsdiv_after").appendChild(br);
                    }
                }
                else
                {
                    var parent;

                    for(i=n+1;i<=old_n;i++){
                        parent = document.getElementById("pointsdiv_after");

                        parent.removeChild(parent.lastChild);
                        parent.removeChild(parent.lastChild);
                        parent.removeChild(parent.lastChild);
                    }
                }
            }
        });

        //BEZIER CURVE
        function factorial(n){
            var result=1;
            for(i=2;i<=n;i++){
                result = result*i;
            }
            return result;
        }
        function Point(x,y){
            this.x=x;
            this.y=y;
        }
        var points = new Array();
        function getPoint(t){
            var i;
            var x=points[0].x;
            var y=points[0].y;
            var factn = factorial(n);
            for(i=0;i<n;i++){
                var b = factn / (factorial(i)*factorial(n-i));
                var k = Math.pow(1-t,n-i)*Math.pow(t,i);
                // console.debug( i+": ",points[i] );
                x += b*k*points[i].x;
                y += b*k*points[i].y;
            }
            return new Point(x, y);
        }
        //--BEZIER CURVE
        submit.addEventListener("click",function(){
            if(n){
                for(i=1;i<=n;i++){
                    var px = document.getElementById("x_"+i);
                    var py = document.getElementById("y_"+i);
                    points.push(new Point(parseInt(px.value,10),parseInt(py.value,10)));
                    // console.debug( points[i-1] );
                }
                var canvas = document.getElementById('myCanvas');
                var context = canvas.getContext('2d');
                context.beginPath();
                console.debug( points[0].x, points[0].y );
                context.moveTo(points[0].x, points[0].y);
                var t=0.01;
                while (t<=1)
                {
                    //get coordinates at position
                    var p=getPoint(t);
                    // console.debug( p.x, p.y );
                    //draw line to coordinates
                    context.lineTo(p.x, p.y);
                    //increment position
                    t += 0.01;
                }
                context.stroke();
            }
        });
    }
</script> 
```

问题是它似乎无法正常工作。我现在正在测试它的 2 个点，它总是从画布的左上角开始（即使我的第一个点是假设 (250,250) 并且线的长度不是它应该的像素数。 . 它更长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:21:23.967

我不是画布或几何学方面的专家，但我的想法是：`moveTo` `points[0]`在绘制人造线之前，您不应该这样做，因为您的`getPoint`功能似乎会引导您到达那里。我在调试代码时看到的是，您首先移动到`(20,20)`，然后画一条直线到（大致）`(40,40)`，然后开始逐渐回到`(20,20)`，生成不是您想要的封闭形状。

对代码的一个小（快速而肮脏）的更改使它开始绘制曲线：

```
// DO NOT MOVE TO HERE
//context.moveTo(points[0].x, points[0].y);
var t = 0.01;

// MOVE TO THE FIRST POINT RETURNED BY getPoint
var p0 = getPoint(t);
context.moveTo(p0.x, p0.y);
t+=0.01;

// now loop from 0.02 to 1... 
```

我相信您可以将其重构为更好的东西，正如我所说的那样，我的更改又快又脏。

[http://jsfiddle.net/HswXy/3/](http://jsfiddle.net/HswXy/3/)

# gwt - 使用 ScrollPanel 时停止对 ios 的过度滚动效果

> ID：14306671
> 
> 赞同：0
> 
> 时间：2013-01-13T18:23:43.373
> 
> 标签：gwt

我有一个`ScollPanel`占据浏览器的全部宽度和高度：

```
ScrollPanel p = new ScrollPanel();
p.setWidth(Window.getClientWidth() + "px");
p.setHeight(Window.getClientHeight() + "px"); 
```

在 ios6 设备上，滚动看起来很笨拙——我发现这种 css 样式可以解决这个问题：

```
// webkitOverflowScrolling
p.getElement().getStyle().setProperty("webkitOverflowScrolling", "touch"); 
```

这给了我原生滚动的感觉，这很棒。

有没有办法防止“过度滚动”效果？我的意思是，当我在滚动位置 = 0 时，我继续向下拖动，整个主体似乎滚动得更多，在我的页面内容顶部上方显示空白空间。

我已经在运行此页面的 UIWebView 本身上禁用了弹跳：

```
[self.mWebView.scrollView setBounces:NO]; 
```

当我不使用`ScrollPanel`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:42:49.437

您可能想看看 mgwt：[http ://www.m-gwt.com](http://www.m-gwt.com)

这是一个使用 GWT 编写移动应用程序的库。

那里有一个针对移动设备优化的滚动面板和一个防止在身体上滚动的解决方案。

# c# - 使用 WCF 的跨域 SignalR

> ID：14306673
> 
> 赞同：2
> 
> 时间：2013-01-13T18:24:21.037
> 
> 标签：c#, .net, wcf, signalr

关于 SignalR 跨域的问题。我的 .NET 应用程序中有以下层：

*   数据
*   达尔
*   服务（使用 WCF）
*   客户端Web1 (cw1)
*   客户端Web2 (cw2)

服务层的原因是充当 cw1 / cw2 上的 SignalR 集线器之间的中间人。

目标是 cw1 将向其控制器发送某种更新消息，然后更新 cw1 的集线器，然后将其广播到所有 cw1（标准信号器功能）。

我还需要让 cw1 的控制器向我的服务层发送一条附加消息，以便 cw2 客户端也从 cw1 获悉更新。在这一点上，我希望我的服务层能够调用 cw2 的集线器并根据 cw1 的初始消息向所有 cw2 的客户端发送消息。

所以我的问题是：如何从外部服务层访问 cw1 或 cw2 的集线器？这可能吗？我相信这是但似乎无法找到最佳答案，因为有许多已弃用的 SignalR 功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:48:47.253

据我所知，这是*不可能*的。为了能够与集线器通信，您需要通过其公共 API 向其发送消息，**或者**您需要另一个私有 API（在您的情况下为 WCF 服务），它位于同一 ASP.NET 实例中的集线器旁边，可以广播消息本身使用`GlobalHost.ConnectionManager.GetHubContext<MyHub>()`，或者，为了更清晰的关注点分离，使用一些共享的内部接口，将 WCF 服务与“SignalRness”完全分离。

我建议使用后一种单独服务的方法，因为除了更好地分离关注点之外，通过公共 API 发送消息意味着连接到集线器的任何人都可以发送相同的消息，如果他们弄清楚它们是什么. 要么，要么您需要为这些特定的集线器方法引入/使用不同级别的安全检查，以确保只有某些调用者有权调用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T19:53:42.287

谢谢你的回答。我最终通过执行以下步骤解决了这个问题：

摆脱 WCF 服务。

在虚拟目录上设置另一个 Web 项目，这将是我保存集线器的地方。

然后我通过更改客户端脚本引用将我的 SignalR 客户端从其他 2 个 Web 项目指向此，例如

```
<script src="Scripts/jquery-1.6.2.min.js" type="text/javascript"></script>
<script src="Scripts/jquery.signalR.min.js" type="text/javascript"></script>
<script src="http://localhost/MyThirdVirtualDirWebProj/signalr/hubs" type="text/javascript"></script> 
```

然后我可以向/从我的第三个“中间人”项目的中心发送消息。可能有更好的方法来做到这一点，也许使用上面提到的 XSockets，但这似乎工作得相当好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T14:10:19.170

不知道如何使用 SignalR，但使用 XSockets.NET 很容易。

[https://github.com/codeplanner/XSocketsWCF/blob/master/src/XSocketsWCF/XSocketsWCF/WCF/Service/RoomService.cs](https://github.com/codeplanner/XSocketsWCF/blob/master/src/XSocketsWCF/XSocketsWCF/WCF/Service/RoomService.cs)

该链接指向连接到 websocket 服务器的 WCF，但您可以下载该项目......它就在那里。

另一个（几个）优点是 XSockets 将提供来自 3.0 的集群服务器，以便服务器 1 上的消息将到达服务器 2（反之亦然），然后您将不需要 WCF 部分。

关于 3.0 版本：http: [//xsockets.net/blog/sneak-peek-at-the-30-features](http://xsockets.net/blog/sneak-peek-at-the-30-features)

问候乌夫

# php - 我收到错误 (-32300)：传输错误 - HTTP 状态代码不是 200

> ID：14306674
> 
> 赞同：0
> 
> 时间：2013-01-13T18:24:21.990
> 
> 标签：php, wordpress, xml-rpc

当我尝试在 wordpress 中使用 xmlrpc 上传数据时出现错误。以前的代码可以正常工作，但突然间开始出现此错误。我没有更改代码中的任何内容。

错误 (-32300)：传输错误 - HTTP 状态代码不是 200

另外，我知道我的脚本有效，因为谷歌浏览器在 GET 请求上返回“正常”状态。php.ini 分配了 128mb 的内存。

这是用于发布帖子的代码

```
 /**
     * Make Posts using the XMLRPC classes
     */
    function makePosts() {
        $data_set = $this->getMovieLinks();

        $xml_client = new XMLRPClientWordPress();

        foreach ($data_set as $key) {
            echo '<pre>';
            echo 'This is title movie about to be added ========   : ' . $key['title'];    
            echo '</pre>';

            //new_post($title,$summary,$category,$image_url,$internal_links)
        if ($xml_client->new_post($key['title'], $key['summary'], $key['category'], $key['image'], $key['internal_links']) ) {
            $status=1;
        } else {
        $status=0;
        }

            if (isset($status)) {
                echo '     ======    ADDED';  
            } else {
                echo '     ======    ERROR ADDING';  
            }
        }
    } // Function makePosts endes here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:41:11.030

您可以做一些事情来调试错误。

1.  查看服务器日志，也许它们包含问题的真正原因。
2.  在 php.ini 中查找“memory_limit”。尝试更高的数字，看看是否是问题所在。
3.  尝试一次停用一个插件，可能是一个插件可能导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T23:45:47.517

我收到了同样的错误，最后我发现原因是我在`.htaccess`（XML-PRC服务器端）启用了这样的代码；我自己被屏蔽了。

```
order deny,allow
deny from all
allow from 211.111.0.0/16 
```

托管“ [http://example.com/xmlrpc.php](http://example.com/xmlrpc.php) ”的服务器被阻止发布脚本 IP 源。

你应该：

1.  将 XML-RPC 客户端脚本 IP 添加到 XML-PRC 服务器端；甚至同一站点中的客户端和服务器。
2.  或者干脆从`.htaccess`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T23:14:50.903

如果上述解决方案均无效：

确保您没有被托管服务提供商列入白名单。我们的客户使用 wp-engine，我们在发布媒体项目时遇到了这个确切的问题。

在不同 IP 的外部网络上发出相同请求后，我们得到 200（OK）状态码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-14T15:47:04.790

我有同样的错误，但我解决了：

我输入了[http://www.example.com/xmlrpc.php](http://www.example.com/xmlrpc.php)但好的是[http://example.com/xmlrpc.php](http://example.com/xmlrpc.php)因为如果它有“www”前缀它会用 status cod 重定向

# c++ - 适用于 Windows 桌面的 MS Visual Studio 2012 Express - 面向 Windows XP

> ID：14306675
> 
> 赞同：6
> 
> 时间：2013-01-13T18:24:23.570
> 
> 标签：c++, visual-studio-2012, windows-xp, visual-studio-express

我最近从 Visual Studio Express 2010 升级到 Visual Studio 2012 Express for Windows Desktop。我知道以前缺乏针对 Windows XP 的兼容性，但认为这已通过 Update 1（我已安装）解决。

但是，我仍然难以使用我使用 2012 Express 编译的 C++ 应用程序来定位 Win XP。我已将平台工具集设置为“Visual Studio 2012 - Windows XP (v110_xp)”，但这没有什么区别。当我尝试在我的 Windows XP 系统上运行我编译的应用程序（我通过 VirtualBox 运行 Windows XP）时，我收到一个错误，即我的应用程序“不是有效的 Win32 应用程序”。

我还尝试将 CLR 支持设置为“无公共语言运行时支持”，将运行时库设置为“多线程 (/MT)”。

即使是使用以下代码的非常基本的空白 C++ 项目，我也无法让它在 XP 上运行：

```
#define _WIN32_WINNT 0x0501
#define WINVER 0x0501
#define NTDDI_VERSION 0x0501

#include <iostream>

int main()
{
    std::cout << "TEST" << std::endl;

    std::cout << std::endl << std::endl << "Press ENTER to close this window.";
    std::cin.get();
    return 0;
} 
```

谁能告诉我我的编译器/项目设置哪里出错了？

Ps 我已经在我的 XP 虚拟机上安装了 MS VC++ 2010 和 2012 可再发行包。我使用 Visual Studio Express 2010 编译的应用程序在我的 XP 虚拟机上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T19:29:17.843

这有效：

> 配置属性 -> 链接器 -> 系统 -> 子系统 = /SUBSYSTEM:WINDOWS
> 
> 配置属性 -> 常规 -> 平台工具集 -> SubsystemVisual Studio 2012 - Windows XP (v110_xp)

使用 Visual Studio 2012 Express 更新 3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T22:35:00.687

兄弟，使用 GNU GCC 工具链，用 mingw 重新分发。MSVS 实际上只是最小化了依赖关系，但其中一些仍然保留在 exe 中。只需在 gcc 中编译，即可支持全静态链接，exe 体积小，兼容性稳定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T08:28:17.627

检查项目的“*配置属性*->*链接器*->*系统*->*子系统*”属性。
如果为空，请用`(/SUBSYSTEM:CONSOLE)`或填写`(/SUBSYSTEM:WINDOWS)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T17:28:50.703

该消息表明您的构建没有生成 32 位应用程序 - 例如，如果它是依赖于版本的 API，您会看到另一个错误，表明找不到符号。由于您已在配置管理器中表明您正在使用正确的目标平台，因此请检查您的属性资源管理器以确保您没有冲突的参数或默认值。如果您看到带有选项 /MACHINE:X64 的链接，那么您已经找到了问题所在。

如果这不起作用，我想您可以尝试运行 Sysinternals 进程资源管理器以查看哪个 cl/link 实际是使用哪些参数启动的。希望有帮助。

# asp.net - button和asp的区别：button onclick

> ID：14306677
> 
> 赞同：21
> 
> 时间：2013-01-13T18:24:35.077
> 
> 标签：asp.net, aspbutton

我是在 asp.net 中开发以制作网站的新手。

`asp:Button`输入按钮和输入按钮有什么区别？

**代码1**
aspx代码

```
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" /> 
```

代码隐藏

```
protected void Button1_Click(object sender, EventArgs e)
{
    //Do somthing
} 
```

**代码 2**
aspx 代码

```
<input id="Submit1" type="submit" value="submit" onclick="return Submit1_onclick()" />  

<script language="javascript" type="text/javascript">
// <![CDATA[

function Submit1_onclick() {
    //Do somthing
}

// ]]>
</script> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-13T18:30:53.770

第一个代码是服务器端代码。当您`asp:button`在 web 表单中添加标签时，asp.net 将为您呈现一个标签`input type="button"`，当您单击此按钮时，它会将帖子提交到同一页面（这称为`postback`）并处理生命周期和 asp.net 事件与此按钮相关联。这同样适用于每个服务器控件，例如`TextBoxes`(render `input type='text'`)、`Panels`(renders divs)、`Checkboxes`(render `input type='checkbox'`)、`Labels`(render `spans`) 等...

在第二个代码中，您拥有第一个将呈现的代码 (an `input type = 'button'`)，但与客户端 javascript 中的事件相关联。

您还可以在标签中关联客户端事件，`asp:button`查看`OnClientClick`属性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-13T18:29:57.173

第一个是*服务器端*控件，事件处理程序在 C# 中的服务器上执行。单击按钮将导致回发，并且表单中的所有信息都将被发布到服务器进行处理，包括对单击事件处理程序的调用。

第二个是完全*客户端*，事件处理程序在浏览器中以 JavaScript 执行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-13T18:41:30.423

`asp:Button`是一个asp.net 服务器控件，它在服务器端触发一个事件。

```
<input id="Submit1" type="submit" 
```

是提交类型的客户端按钮，但它也可以通过添加来充当服务器端按钮

`runat="server"`和`onserverclick="eventname"`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-13T18:31:27.697

据我了解，您必须记住，将执行一个客户端代码，例如浏览器中的 javascript，以及将在服务器上执行的 asp/c# 代码。

所以有这个控制：

```
 <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" /> 
```

Button1_Click 将在服务器上执行，在微软世界中它是 IIS，另一方面，您只有一个纯 html 控件，您可以在其中为 click 事件连接一个 javascript 函数

```
 <input id="Submit1" type="submit" value="submit" onclick="return Submit1_onclick()" /> 
```

所以服务器端与这部分无关，这段代码将在你的机器上，在你的浏览器中执行。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-03T09:56:43.880

A mi me funcionó así:

1.- En el botón:

```
 <input type="submit" id="btnAccept" value="Log In" runat="server" onserverclick="btnAccept_Click"> 
```

2.- En el 代码隐藏：

```
Protected Sub btnAccept_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) 
```

# ruby-on-rails - 从表中删除 myfield = 1 (ActiveRecord)

> ID：14306681
> 
> 赞同：0
> 
> 时间：2013-01-13T18:25:30.370
> 
> 标签：ruby-on-rails

我在弄清楚如何快速销毁数千条记录时遇到了问题。

我有一个名为 ITEM 的模型。它：

```
has_many :pictures (up_to 20)
has_many :ads (up to 10)
has_many :views (up_to 5000-8000)
has_many :posts (up to 100-200) 
```

当用户销毁他的项目时 - 所有孩子也需要离开。

所以我尝试了我能找到的一切，但所有解决方案都基于 ID 进行查询：

```
:dependant => :destroy // makes a query per each item
***
before_destroy :destroy_children
private
def destroy_children
 pictures.delete_all
 ads.destroy_all
 views.destroy_all
 posts.destroy_all
end
// same 
```

我目前的解决方案如下所示：

```
class Item << ActiveRecord:Base
has_many :pictures, :dependent => :destroy

before_destroy :destroy_children

private
def destroy_children
 pictures.destroy_all
 Ad.delete(self.ads.collect{|x| x.id})
 Post.delete(self.ads.collect{|x| x.id})
 View.delete(self.ads.collect{|x| x.id})
end

end 
```

基本上，它获取属于 item 的所有 View 的 ID 数组，然后生成一个大的 IN 语句，如下所示：

```
DELETE FROM Views WHERE id IN (2, 3, 6, 8, 35, 50...) 
```

如果我的 IN 数组有几千个 ID，这仍然太重了。

有没有办法生成这个查询？

```
DELETE FROM Views WHERE item_id = 4 
```

也许是这样的？

```
View.delete(:item_id => 2)
// it doesn't work, but maybe something like this exists 
```

奇怪的是我在任何地方都找不到这样的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T18:30:46.970

您可能正在执行以下操作：

```
private
def destroy_children
  pictures.destroy_all
  Ad.delete_all(:item_id => self.id)
  Post.delete_all(:item_id => self.id)
  View.delete_all(:item_id => self.id)
end 
```

`delete_all` [你可以在这里](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-delete_all)阅读更多信息，记住这一点`delete_all`，`delete`不要调用任何回调，`before_destroy`或者`after_destroy`，它们也会忽略任何`:dependent`规则。

# c++ - c ++ STL排序带有额外参数'无效运算符<'

> ID：14306682
> 
> 赞同：1
> 
> 时间：2013-01-13T18:25:31.550
> 
> 标签：c++, sorting, stl

我正在尝试使用自定义比较规则对一个不那么小的字符串向量进行排序，如下所示：

```
 bool lexGraph(string const &str1, string const &str2)
{
    string::const_iterator i1 = str1.begin(), i2 = str2.begin();

    while((i1 < str1.end()) && (i2 < str2.end()))
    {
        if(*i1 == ' ')
        {
            i1++;
            continue;
        }
        if(*i2 == ' ')
        {
            i2++;
            continue;
        }
        if(toupper(*i1) < toupper(*i2))
        {
            return true;
        }
        if(toupper(*i1) > toupper(*i2))
        {
            return false;
        }
        i1++, i2++;
    }
    return (str1.length() <= str2.length());
} 
```

我在这个循环中使用它：

```
vector<string> subset;
    ifstream fin(input);
    ofstream fout(output);
    string buff;
    for(long i = 0; i < 241; i++) 
    {
        getline(fin,buff);
        buff += '\n';
        subset.push_back(buff);

    }
sort(subset.begin(), subset.end(),lexGraph); 
```

我发现向量大于 240 时会发生溢出错误。我发现如果我使用较小的文件，这个数字甚至会变得更小。此外，字符串从来都不是很大。如果我将我的功能缩减为

```
bool lexGraph(string const &str1, string const &str2)
{
    return (str1.length() <= str2.length());
} 
```

错误仍然发生。但是当我使用没有额外参数的 STL 排序时它不会。

所以，我不知道泄漏在哪里，我希望在这里得到一些提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T18:41:44.040

您需要严格-弱排序。当使用相等的字符串调用时，您的排序函数必须返回 false。如果与 相比`<=`，它不起作用。顺便说一句：我相信一些标准库实现有一个诊断模式，可以为你发现这个错误。使用这个，因为在 C++ 中有足够的绳索，你可以用它来射击自己。

# python - cPickle - 忽略它不能序列化的东西而不是引发异常

> ID：14306683
> 
> 赞同：6
> 
> 时间：2013-01-13T18:25:36.200
> 
> 标签：python, pickle

我`cPickle`用来序列化用于记录的数据。

我希望能够将任何我想要的东西扔进一个对象中，然后序列化它。通常这对 . 来说很好`cPickle`，但只是遇到了一个问题，我想序列化的对象之一包含一个函数。这导致`cPickle`引发异常。

我宁愿`cPickle`跳过它无法处理的东西，而不是导致整个过程崩溃。

什么是实现这一目标的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:13:03.517

我假设您正在寻找一个尽力而为的解决方案，如果未腌制的结果无法正常运行，您也可以。

对于您的特定用例，您可能希望为函数对象[注册一个 pickle 处理程序。](http://docs.python.org/2.6/library/copy_reg.html)只需将其设置为足以满足您的最大努力目的的虚拟处理程序即可。为函数制作处理程序是可能的，这相当棘手。为避免影响其他腌制代码，您可能希望在退出日志记录代码时取消注册处理程序。

这是一个示例（没有任何注销）：

```
import cPickle
import copy_reg
from types import FunctionType

# data to pickle: note that o['x'] is a lambda and they
# aren't natively picklable (at this time)
o = {'x': lambda x: x, 'y': 1}

# shows that o is not natively picklable (because of
# o['x'])
try:
    cPickle.dumps(o)
except TypeError:
    print "not natively picklable"
else:
    print "was pickled natively"

# create a mechanisms to turn unpickable functions int
# stub objects (the string "STUB" in this case)
def stub_pickler(obj):
    return stub_unpickler, ()
def stub_unpickler():
    return "STUB"
copy_reg.pickle(
    FunctionType,
    stub_pickler, stub_unpickler)

# shows that o is now picklable but o['x'] is restored
# to the stub object instead of its original lambda
print cPickle.loads(cPickle.dumps(o)) 
```

它打印：

```
not natively picklable
{'y': 1, 'x': 'STUB'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-26T01:50:28.233

或者，尝试[`cloudpickle`](https://github.com/cloudpipe/cloudpickle)：

```
>>> import cloudpickle
>>> squared = lambda x: x ** 2
>>> pickled_lambda = cloudpickle.dumps(squared)

>>> import pickle
>>> new_squared = pickle.loads(pickled_lambda)
>>> new_squared(2)
4 
```

[![我们可以腌制那个](../Images/c11cd39fa8efb11ee58d9b9782f1746c.png)](https://i.stack.imgur.com/dPnXv.png)

`pip install cloudpickle`并实现你的梦想。dask、IPython parallel 和 PySpark 实现了同样的梦想。

# .net - Task.Delay 是非阻塞的吗？

> ID：14306685
> 
> 赞同：3
> 
> 时间：2013-01-13T18:26:01.063
> 
> 标签：.net, asynchronous, task-parallel-library

`Task.Delay`内部使用`System.Threading.Timer`。主要问题是`System.Threading.Timer`我的应用程序是非阻塞的？如果我做：

```
await Task.Delay(15) 
```

下面的代码是否使用线程 15 毫秒？或者它会使用操作系统进行回调。在哪里可以找到有关此的信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T19:21:33.190

根据 Jeffrey Richter 的说法（第 748 页）：

> 在内部，线程池只有一个线程用于所有 Timer 对象。该线程知道下一个 Timer 对象的时间到期。当下一个 Timer 对象到期时，线程唤醒，并在内部调用 ThreadPool 的 QueueUserWorkItem 以将条目输入到线程池的队列中，从而调用您的回调方法。

这意味着在执行计时器时您将至少有两个工作线程：一个 - 内部用于计时器，另一个 - 用于实际工作进程。

# c++ - 在 C++ 中拆分字符串时需要帮助

> ID：14306689
> 
> 赞同：0
> 
> 时间：2013-01-13T18:26:14.463
> 
> 标签：c++, delimiter

> **可能重复：**
> [在 C++ 中拆分字符串](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

我需要关于如何获取一个文本字符串并根据某个字符将其拆分的建议，在这种情况下为“，”而不使用任何外部库

文本行是：

```
Amadeus,Drama,160 Mins.,1984,14.83
As Good As It Gets,Drama,139 Mins.,1998,11.3
Batman,Action,126 Mins.,1989,10.15
Billy Elliot,Drama,111 Mins.,2001,10.23
BR,SF,117,1982,11.98
Shadowlands,Drama,133 Mins.,1993,9.89
Shrek,Animation,93 Mins,2001,15.99
Snatch,Action,103 Mins,2001,20.67
The Lord of the Rings,Fantasy,178 Mins,2001,25.87 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:37:09.870

如果您不想求助于其他库（Boost.Tokenizer 是一个不错的选择 IMO），这里有一些简单的代码：

```
#include <string>
#include <vector>

using namespace std;

vector<string> tokenize(string const& s, string const& separator)
{
    size_t start = 0;
    size_t pos = s.find(separator);

    vector<string> v;
    while (pos != string::npos)
    {
        string sub = s.substr(start, pos - start);
        v.push_back(sub);

        start = pos + 1;
        pos = s.find(separator, start);
    }

    string sub = s.substr(start, pos - start);
    v.push_back(sub);

    return v;
}

int main()
{
    string s = "asfa,adf,daf,c";
    vector<string> v = tokenize(s, ",");

    // Do what you want with v...

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:29:51.940

您可以找到逗号的索引并将它们存储在一个向量中，然后使用 string::substr (http://www.cplusplus.com/reference/string/string/substr/) 来获取这些索引之间的子字符串。

# java - 解析器的设计模式

> ID：14306693
> 
> 赞同：1
> 
> 时间：2013-01-13T18:26:56.510
> 
> 标签：java, oop, design-patterns

我有一个程序请求网页，解析它并取决于结果决定下一步做什么。

例如：程序应该从页面中获取一些元素，我们称之为“目标元素”。如果程序确实请求并获得“someOtherElement”，它将继续执行。如果它获得了“aimElement” Executor 应该点击一些链接，执行结束，我们进入下一个任务。程序有 20 次尝试获取“aimElement”。并且“aimElement”将来可能会发生变化。

看起来很简单，但我真的不知道如何通过良好的 oo 设计来实现这一点。我在考虑两个对象：Task 和 Executor。Task 包含所有条件，Executor 接收 Task 作为参数，并根据 Task 的需要执行请求。但是如果 executor 将原始页面返回给 Task 本身，Task 就会变得复杂，并且它们之间会有很强的联系。如果 Executor 返回已经解析的页面元素，那么 Executor 将需要知道解析什么以及如何解析，并且也会很复杂，并且会有强连接。

我不知道我的解释是否清楚，但也许你可以给我一些设计模式的建议，或者分享你遇到类似问题的经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:34:21.143

我只会使用推送解析器并允许任务为他们感兴趣的任何事件注册自己。基本上，您的解析器解析文档一次并通知所有订阅者他们感兴趣的事物类型（比如“img with URL X”或“链接到 Y”）。

然后，您可以查询订阅者以查看下一步要做什么（在每个事件结束时/之后），或者让他们自己通过侦听器方法通知您。

最好的部分是我确信在 Java 中已经有一个用于 HTML 的推送解析器，因此您可以避免很多工作。

# cuda - CUDA 的推力::inclusive_scan() 是否有“init”参数？

> ID：14306695
> 
> 赞同：1
> 
> 时间：2013-01-13T18:26:58.943
> 
> 标签：cuda, gpgpu, thrust

根据 CUDA 的[推力库文档](http://docs.thrust.googlecode.com/hg/group__prefixsums.html#ga7109170b96a48fab736e52b75f423464)，`thrust::inclusive_scan()`有**4 个**参数：

```
OutputIterator thrust::inclusive_scan(InputIterator       first,
                                      InputIterator       last,
                                      OutputIterator      result,
                                      AssociativeOperator binary_op 
                                     ) 
```

然而在使用演示中（在同一个文档中），它们传递了**5 个**参数。额外的第 4 个参数作为扫描的初始值传递（就像 in 一样[`thrust::exclusive_scan()`](http://docs.thrust.googlecode.com/hg/group__prefixsums.html#gaa3f981950f16c9dae693590b79a9ff90)）：

```
int data[10] = {-5, 0, 2, -3, 2, 4, 0, -1, 2, 8};
thrust::maximum<int> binary_op;
thrust::inclusive_scan(data, data + 10, data, 1, binary_op); // in-place scan 
```

现在，我的代码将只编译传递 4 个参数（传递 5 给出错误`no instance of overloaded function "thrust::inclusive_scan" matches the argument list`），但我碰巧需要初始化我的滚动最大值，就像在示例中一样。

谁能澄清如何初始化包容性扫描？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:52:58.160

看来你不明白什么是包容扫描操作。没有初始化包含扫描这样的事情。根据定义，包含扫描的第一个值始终是序列的第一个元素。

所以对于序列

```
 [ 1, 2, 3, 4, 5, 6, 7 ] 
```

包容性扫描是

```
[ 1, 3, 6, 10, 15, 21, 28 ] 
```

并且独占扫描（初始化为零）是

```
[ 0, 1, 3, 6, 10, 15, 21 ] 
```

# c# - 从方法中中断 onclick 事件

> ID：14306697
> 
> 赞同：1
> 
> 时间：2013-01-13T18:27:03.380
> 
> 标签：c#, events, break

Button的`OnClick`事件被调用：

```
private void vkb7_Click_1(object sender, EventArgs e)
{
    //method
    button_start(object sender);

    // do stuff 2
} 
```

一些方法被触发：

```
private void button_start(object sender)
{
    bool some = true;
    if (some)
    {
        return; // I'd also like to break "button click"
    }
} 
```

我想打破方法中的“按钮单击”事件 - 我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T18:30:29.773

很简单，让我们`button_start()`返回一个布尔值：

```
private bool button_start(object sender)
{
   bool some = ...;
   return some;
}

private void vkb7_Click_1(object sender, EventArgs e)
{
  //method
  if (button_start(object sender))
    return;

  // do stuff 2
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:33:10.523

如果您正在确定`button_start`是否应该在 中发生动作`vkb7_Click_1`，请考虑在中进行`button_start`返回`bool`，然后使用中的返回值`vkb7_Click_1`。

另一方面，如果您在 中遇到错误情况`button_start`，则[抛出异常](http://msdn.microsoft.com/en-us/library/ms173160%28v=vs.80%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T18:37:06.027

您不能真正“阻止”该事件，因为它已经被触发了。但是，您可以根据结果手动处理单击。

```
private void vkb7_Click_1(object sender, EventArgs e)
{
    bool result = button_start(sender);

    if (result)
        DoSomething();
    else
        DoSomethingElse();
}

private bool button_start(object sender)
{
    bool some = true;

    if (some)
        return false;

    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T19:04:19.467

**首先**，将返回类型设置`button_start`为`bool`
**Second**，如果要传递按钮的发送者`vkb7`或按钮的属性`vkb7`，
那么你应该像这样传递它：

> button_start(sender) 所以代码是这样的：

```
 private void vkb7_Click_1(object sender, EventArgs e)
 {
   //method
   if(button_start(sender))
   // do stuff 2
 } 
```

然后在方法中

```
 private bool button_start(object sender)
 {
    bool some = true;
    if (some)
    {
       return true; // I'd also like to break "button click"
    }
    else  
    return false;
 } 
```

# c++ - 如何在 C++ 中使用模板实现重载函数？

> ID：14306700
> 
> 赞同：-2
> 
> 时间：2013-01-13T18:27:35.340
> 
> 标签：c++, templates, overloading

假设我想定义一组函数，每个函数有 4 个重载，第一个重载采用单个类型参数，`int32_t`第二个采用`int64_t`，第三个 -`uint32_t`和第四个 - `uint64_t`。对于每个函数，所有重载都有相同的实现，所以我可以定义一个函数模板：

```
template <typename T>
void f(T t) {
  // ...
} 
```

然而，这与有四个重载不同，因为现在我为每个（整数）类型都有一个单独的函数，可用于实例化`f`. 但是，它的实现细节`f`可能不适用于其他整数类型。为了解决这个问题，我可以将函数模板包装在四个重载函数中：

```
template <typename T>
void f_impl(T t) {
  // ...
}

void f(int32_t value) { f_impl(value); }
void f(int64_t value) { f_impl(value); }
void f(uint32_t value) { f_impl(value); }
void f(uint64_t value) { f_impl(value); } 
```

它可以工作，但每个函数都需要大量代码（4 个函数重载 + 1 个函数模板）。有没有办法简化这个？

澄清一下，直接使用模板是不可取的，因为（出于实现原因或其他原因）对`int32_t`,`int64_t`和.`uint32_t``uint64_t`

* * *

我已经尝试过使用`std::enable_if`，这个例子最好地说明了它的问题：

```
#include <type_traits>
#include <iostream>

template <typename T>
struct is_supported_int {
  static const bool value = false;
};

template <>
struct is_supported_int<int32_t> {
  static const bool value = true;
};

template <>
struct is_supported_int<int64_t> {
  static const bool value = true;
};

// ...

template <typename T, typename = typename std::enable_if<is_supported_int<T>::value, T>::type>
void f(T t) {
// ...
}

int main() {
  short s = 42;
  f(s);
} 
```

与我试图模拟的具有重载的原始版本不同，此示例将无法编译，因为`f`它将被排除在`short`.

不幸的是`std::is_integral<T>`，正如 Rapptz 所建议的那样，这也无济于事，因为由于`f`此函数的实现细节只能为特定类型定义，而不是为所有整数类型定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T18:31:01.053

像这样的东西会起作用。

```
#include <type_traits>
#include <iostream>

template<typename T, typename = typename std::enable_if<std::is_integral<T>::value, T>::type>
void f(T t) {
    std::cout << "int types only!\n";
}

int main() {
    f(1.234f);
    f(12);
} 
```

f(1.234f) 将无法编译，但 f(12) 不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:42:20.720

使用`enable_if`或静态断言来限制实例化。

```
#include <type_traits>
#include <cstdint>

template<bool X, bool Y>
struct or_ : std::true_type 
{};

template<>
struct or_<false, false> : std::false_type 
{};

template<typename T>
struct valid_type_for_f :
  or_< std::is_same<T, std::uint32_t>::value,
       std::is_same<T, std::uint64_t>::value> // etc.
{};

// static assert
template<typename T>
T f(T t) {
  static_assert(valid_type_for_f<T>::value, "Not a valid type");
  return t;
}

// enable_if
template<typename T>
typename std::enable_if<valid_type_for_f<T>::value, T>::type
fenable(T t) {
  return t;
}

int main()
{
  float x = 4.2f;
  f(x); // fails
  fenable(x); // fails
  std::uint32_t xx = 23;
  f(xx);
  fenable(xx);
  return 0;
} 
```

# java - 正确使用泛型

> ID：14306702
> 
> 赞同：0
> 
> 时间：2013-01-13T18:27:50.900
> 
> 标签：java, generics, arraylist, abstract-class

我目前正在使用一个抽象类，我正在通过另一个名为 People 的类进行扩展

```
public abstract class MediaContainer<T> {
    abstract T DisplayName(T dispname);
} 
```

但是当我尝试在第二次覆盖它时出现错误

```
public class People<T> extends MediaContainer<T> {
    @Override public T DisplayName(T person){
        return System.out.println(person);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T18:31:30.937

我猜错误在这一行：

```
return System.out.println(Person); 
```

`println`返回`void`，并且您的`DisplayName`方法需要返回`T`。`System.out`如果该方法仅如其名称所示用于打印，只需将其更改为 return `void`。

**注意：**请确保在您的问题中提供更多信息，以获得更好的帮助并避免投票。对于编译错误，请始终包含错误消息和发生错误的确切行。

**编辑：**作为旁注，仅基于类的名称，您似乎应该为您的`People`类使用有界类型参数：

```
public class People<T extends Person> extends MediaContainer<T> { ... } 
```

甚至解析类型参数：

```
public class People extends MediaContainer<Person> { ... } 
```

这将允许`People`'s 的方法与其包含的对象作为`Person`实例、调用`Person`方法等进行交互。这是假设`Person`当然有一个相应的类。

# ios - 将对象存储到 NSMutableArray

> ID：14306706
> 
> 赞同：0
> 
> 时间：2013-01-13T18:28:22.403
> 
> 标签：ios, objective-c, nsmutablearray

我正在尝试构建一个示例应用程序，该应用程序从 url 中获取一些 json 并将其显示在表格视图中。我在将数据存储到对象并将这些对象插入 NSMutableArray 时遇到问题。

表视图.m

```
- (void) getDataFromAPI {
    NSString *endpoint = @"http://www.somesite.com/list.php";

    NSURL *url = [NSURL URLWithString:endpoint];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        [self createMovies: JSON];
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response , NSError *error , id JSON){
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Uh oh, there's been a problem!" delegate:nil cancelButtonTitle:@"Cancel" otherButtonTitles:@"Retry", nil];
        [alert show];
    }];
    [operation start];
}

- (void) createMovies: (id) json {

    NSMutableArray *list = [[NSMutableArray alloc] init];
    for (id entry in json) {
        Movie *aMovie = [[Movie alloc] init];
        aMovie.movieId = [entry objectForKey:@"id"];
        aMovie.title = [entry objectForKey:@"title"];
        aMovie.director = [entry objectForKey:@"director"];
        aMovie.price = [entry objectForKey:@"price"];

        aMovie = nil;
    }
    NSLog(@"%@", list);
    self.movieList = list;
}

- (void)viewDidLoad
{
    self.movieList = [[NSMutableArray alloc] init];
    [super viewDidLoad];

    [self getDataFromAPI];
    self.title = @"Movies";

    NSLog(@"%@", self.movieList);
} 
```

当我尝试检查`self.movieList`in时，`viewDidLoad`它有零个对象，但是当我检查`list`in 时，`createMovies`我得到六个对象。

我的 json 数据示例：

```
[
  {
    "id": 1,
    "title": "Transformers",
    "price": 29.54,
    "Director": "Michael Bay"
  },
  {
    "id": 2,
    "title": "South Park",
    "price": 34.88,
    "author": "Matt Stone, Trey Parker"
  },
  {
    "id": 3,
    "title": "The Hobbit",
    "price": 20.04,
    "author": "Peter Jackson"
  }
] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T18:31:37.543

`AFJSONRequestOperation`正在异步加载数据。因此，当 [incorrectly named -- should just be `loadDataFromAPI`]`getDataFromAPI`方法返回时，数据实际上还没有被加载。

您的`createMovies:`方法应触发 UI 刷新，以显示电影。

# sql-server-2012 - 仪表板中的 SQL Server 2012 AlwaysOn 运行状况事件

> ID：14306711
> 
> 赞同：0
> 
> 时间：2013-01-13T18:28:47.240
> 
> 标签：sql-server-2012

我已经完成了 6 次 SQL Server 2012 SP1 安装并配置了可用性组。

在我所有安装的仪表板中，“查看 AlwaysOn 运行状况事件”是灰色的，我无法找到另一种方法来查看过去发生的有关任何可用性组的事件。

我熟悉系统 DMV 以查看当前的健康状况，但我想查看过去的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:02:51.967

我找到了我的答案。AlwaysOn Health Extended Event Seession 默认关闭。以下 SQL 启用仪表板中的链接。

```
 IF EXISTS (SELECT * FROM sys.server_event_sessions WHERE name = 'AlwaysOn_health')
    BEGIN
    ALTER EVENT SESSION AlwaysOn_health ON SERVER WITH (STARTUP_STATE = ON);
    END
    GO

    IF NOT EXISTS (SELECT * FROM sys.dm_xe_sessions WHERE name = 'AlwaysOn_health')
    BEGIN
    ALTER EVENT SESSION AlwaysOn_health ON SERVER STATE = START;
    END
    GO 
```

# node.js - Mongoose 填充单个虚拟字段

> ID：14306713
> 
> 赞同：3
> 
> 时间：2013-01-13T18:28:48.627
> 
> 标签：node.js, mongodb, mongoose

我有以下架构（CoffeeScript）：

```
adSchema = new mongoose.Schema({
  ...
  user : { type: mongoose.Schema.Types.ObjectId, ref: 'User' }
  ...
},
{
  toObject: { virtuals: true },
  toJSON: { virtuals: true }
})

userSchema = new mongoose.Schema({
  username : String
  email :
    type : String
    required : true
    index :
      unique : true
  adverts : [{ type: mongoose.Schema.Types.ObjectId, ref: 'Advert' }]
},
{
  toObject: { virtuals: true }
  toJSON: { virtuals: true }
})

userSchema.virtual('screenname').get () ->
  if this.username? then this.username else this.email.split('@')[0]+'@...' 
```

然后我尝试获取一堆记录并填充用户：

```
getAdvertPage = (obj, fn) ->
  page_size = 10
  query =
    tags : obj.tag
  Advert.count query, (err, count) ->
    Advert.find(query)
    .sort(obj.sort)
    .skip((obj.page-1)*page_size)
    .limit(page_size)
    .populate('user', 'screenname')
    .exec (err, ads) ->
      ads.lastPage = (obj.page-1)*page_size + page_size >= count
      fn err, ads 
```

但我只想要用户的屏幕名称，而不想要其他（这是一个虚拟字段）。但是，这会导致错误：

```
Cannot call method 'split' of undefined 
```

如果我在填充中包含电子邮件，它可以正常工作，但我不想将电子邮件发送给客户端。有没有办法只填充一个虚拟字段？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T19:38:31.777

由于您依赖于“屏幕名称”的虚拟吸气剂中的“电子邮件”和“用户名”字段，因此请尝试填充屏幕名称、电子邮件和用户名。

```
...
.populate('user', 'screenname, email, username')
... 
```

顺便说一句，您不应该在虚拟 getter 中实现业务逻辑以避免这种情况。考虑创建另一个虚拟。

# java - 如何实现一个上下文菜单 在安卓上？

> ID：14306722
> 
> 赞同：0
> 
> 时间：2013-01-13T18:29:34.837
> 
> 标签：java, android

我有一个存储在变量“首选项”中的首选项：

```
 Preference preference = new Preference(this); 
```

我想添加一个上下文菜单以在longclick上显示。我已经创建了菜单`/res/menu/pref_menu.xml`并尝试过`registerForContextMenu(preference);`，但它只适用于视图。我怎样才能优先实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T07:25:57.337

我通过在 onPostCreate 方法中注册解决了它：

```
registerForContextMenu(getListView()); 
```

并在需要打开时设置一定的偏好点击监听器：

```
openContextMenu(getListView()); 
```

# android - Android Youtube 视频上传

> ID：14306726
> 
> 赞同：1
> 
> 时间：2013-01-13T18:29:52.683
> 
> 标签：android, api, http, post, youtube

我点击此[链接](http://nilvec.com/implementing-client-side-oauth-on-android)，并在我的 Android APP 中成功创建了对 youtube 的 oauth 访问权限。

然后我问，我如何在我的帐户上上传视频？

访问我的帐户后，我有令牌，但我看到我必须执行 http 请求才能上传视频。我看了很多网站，但我仍然无法解决这个问题......

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:25:18.900

[这](http://dl.google.com/googleio/2010/googleapis-youtube-api-uploads.pdf)可能就是您要查找的内容，尤其是幻灯片 30。它带有很好的代码示例。但它只会上传到自己的帐户。

# minecraft - 是否可以使用 Bukkit for Minecraft 来定义一种新的生物？

> ID：14306728
> 
> 赞同：3
> 
> 时间：2013-01-13T18:29:58.620
> 
> 标签：minecraft, bukkit

我想写一个 Minecraft 模组来增加一种新型的生物。那可能吗？我看到，在 Bukkit 中，[`EntityType`是一个预定义的 enum](http://jd.bukkit.org/apidocs/org/bukkit/entity/EntityType.html)，这让我相信可能没有办法添加新类型的实体。我希望那是错误的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T20:09:16.580

是的你可以！

我会引导你到 Bukkit 论坛上的一些教程。具体来说：

*   [创建流星实体](http://forums.bukkit.org/threads/tutorial-intermediate-custom-entities-meteor.93899/)
*   [修改暴民或实体的行为](http://forums.bukkit.org/threads/tutorial-how-to-customize-the-behaviour-of-a-mob-or-entity.54547/page-2#post-1281468)

免责声明：第一个是我写的。

你不能仅仅通过 Bukkit 真正添加一个全新的暴徒*。*你必须使用 Spout 来赋予它不同的皮肤。但是，如果您只是想要一个暴民，并且满足于共享另一个实体的皮肤，那么它可以完成。

[这个想法是通过 Java 的Reflection API](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/package-summary.html)注入 EntityType 值。它看起来像这样：

```
public static void load() {
  try {

    Method a = EntityTypes.class.getDeclaredMethod("a", Class.class, String.class, int.class);
    a.setAccessible(true); 
    a.invoke(a, YourEntityClass.class, "Your identifier, can be anything", id_map);

} catch (Exception e) {
//Insert handling code here
}
} 
```

我认为上面的内容相当简单。我们获得私有方法的句柄，将其设为公开，并调用其注册方法。`id_map`包含要将您的实体映射到的实体 ID。12是一个火球。映射可以在 中找到`EntityType.class`。请注意，这些 id 不应*与*它们的[数据包名称](http://wiki.vg/Entities#Mobs)混淆。两者完全不同。

最后，您实际上需要生成实体。MC 将继续生成默认实体，因为我们尚未将其从地图中移除。但这只是调用`net.minecraft.server.spawnEntity(your_entity, SpawnReason.CUSTOM)`.

如果您需要皮肤，我建议您查看[Spout](http://www.spout.org/) Plugin。它确实需要运行 Spout 客户端才能加入这样的服务器，但此时的可能性实际上是无限的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T18:32:57.683

遗憾的是，只有客户端模组才有可能。您可以查看 Spout (http://www.spout.org/)，它是一个客户端模块，它为服务器端插件提供 API 以在客户端执行更多操作，但如果不执行客户端操作，这是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T22:01:07.573

不可能添加新实体，但可以编辑实体行为，例如有一次，我这样做是为了让你可以驯服铁傀儡，它们会跟着你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-05T07:18:00.423

您还可以通过访问玩家实体和调整网络数据包来实现自定义外观的人类实体

这很昂贵，因为您需要创建一个玩家帐户才能实现此目的，然后习惯于充当暴民。然后你生成一个命名实体，并赋予它与现有生物相同的行为 AI。但请记住，您需要自己编写 AI（您可以直接从craftbukkit/bukkit 借用代码），并且您需要将此暴徒的运动和事件推送给视线范围内的玩家。从技术上讲，您所做的一切都是在推动从发球局向客户端发送数据包，了解实际发生的情况，但是如果您在推列表之外，则不会发生任何事情，因为其他玩家会看到您被无形的东西撞倒:)这有点精神上的飞跃:)

我正在使用这个概念来创建充当友好和派系军队的 Npc。我也将暴徒本身用作友好实体（如果您属于黑暗派系）

我想亲自看到未来的服务器 API，它可以将模型指令推送到客户端以获取服务器特定的缓存，以及告诉客户端在哪里下载生物皮肤的能力..

今天是可行的，但我必须为客户端创建一个插件来实现这一点，然后又回到了一个令人烦恼的游戏，特别是当 mojang 推出新版本并且所有插件都需要永远随着潮流而上升时

老实说，整个生态系统可以更具战略性地进行管理，但现在我认为这只是临时的产品管理（作为 .net 的前产品经理，我很乐意从事这种策略，这将是一个非常有趣的工作）

# google-maps-api-3 - 从 Google 地图上 Fusion Tables 图层的信息窗口中导入数据

> ID：14306732
> 
> 赞同：0
> 
> 时间：2013-01-13T18:30:19.100
> 
> 标签：google-maps-api-3, google-fusion-tables, infowindow

我正在构建我的第一个融合表，并将两个融合表带入谷歌地图——一个多边形和一个点。当您单击多边形或点时，我不想显示常规信息窗口，而是想从 F​​usion Table 中提取一些数据，但它无法正常工作：

```
<script>
  function initialize() {
    var england = new google.maps.LatLng(53.2, -2);
    map = new google.maps.Map(document.getElementById('map_canvas'), {
      center: england,
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    layer1 = new google.maps.FusionTablesLayer({
      query: {select: 'geometry', from: '1HgGUc72F2Wlp6dvy4GWvLyWrl1kC6aJhnM7jPyc'},
      styles: [
        { where: "Score = 0", polygonOptions: { fillColor: "#cdcdcd", fillOpacity: 0.3 } },
        { where: "Score = 1", polygonOptions: { fillColor: "#FF0000", fillOpacity: 0.5 } },
        { where: "Score = 2", polygonOptions: { fillColor: "#FF7E00", fillOpacity: 0.5 } },
        { where: "Score = 3", polygonOptions: { fillColor: "#008000", fillOpacity: 0.5 } }],
    options: {suppressInfoWindows: true},
    map: map,
    });
    google.maps.event.addListener(layer1, 'click', function(e) {e.infoWindowHtml = "Score" + e.row['Score'].value;}
    });

    layer2 = new google.maps.FusionTablesLayer({
    query: {select: 'postcode', from: '1bawAKwQAUGE4mzYSyw4lTbOcgp7MgIGOLROel8Y'},
    options: {suppressInfoWindows: true},
    map: map,
     });
    google.maps.event.addListener(layer2, 'click', function(e) {e.infoWindowHtml = "Postcode" + e.row['Postcode'].value;}
    });

    google.maps.event.addDomListener(window, 'load', initialize);

  }
</script>
</head>
<body onLoad="initialize()">
  <div id="map_canvas"></div>
</body>
</html> 
```

[在我添加 AddListener 和 addDomListeners 之前，一切运行良好](https://dl.dropbox.com/u/4086051/epilepsyaction/critical-time-maps/sun-1746.html)，infowindows 被抑制。谁能帮我回到正轨，好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:38:24.753

1.  您的“新”代码中有语法错误（两个额外的“}”）
2.  您可以在初始化函数中调用 addDomListener （没关系，因为您仍然在`<body`标签中拥有它，但您真的不应该在两个地方都有它。

    ```
    <script>
     function initialize() {
     var england = new google.maps.LatLng(53.2, -2);
    map = new google.maps.Map(document.getElementById('map_canvas'), {
      center: england,
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    layer1 = new google.maps.FusionTablesLayer({
      query: {select: 'geometry', from: '1HgGUc72F2Wlp6dvy4GWvLyWrl1kC6aJhnM7jPyc'},
      styles: [
        { where: "Score = 0", polygonOptions: { fillColor: "#cdcdcd", fillOpacity: 0.3 } },
        { where: "Score = 1", polygonOptions: { fillColor: "#FF0000", fillOpacity: 0.5 } },
        { where: "Score = 2", polygonOptions: { fillColor: "#FF7E00", fillOpacity: 0.5 } },
        { where: "Score = 3", polygonOptions: { fillColor: "#008000", fillOpacity: 0.5 } }],
    options: {suppressInfoWindows: true},
    map: map,
    });
    google.maps.event.addListener(layer1, 'click', function(e) {e.infoWindowHtml = "Score" + e.row['Score'].value;});
    layer2 = new google.maps.FusionTablesLayer({
    query: {select: 'postcode', from: '1bawAKwQAUGE4mzYSyw4lTbOcgp7MgIGOLROel8Y'},
    options: {suppressInfoWindows: true},
    map: map,
     });
     google.maps.event.addListener(layer2, 'click', function(e) {e.infoWindowHtml = "Postcode" + e.row['Postcode'].value;});
     }
     google.maps.event.addDomListener(window, 'load', initialize);
     </script>
     </head>
      <body>
       <div id="map_canvas"></div>
    </body>
    </html> 
    ```

[修改工作示例](http://www.geocodezip.com/v3_FusionTablesLayer_epilepsyaction_critical-time-SOquestionA.html) 以使每一层的信息窗口工作，使用此功能：

```
function openIW(FTevent) {
  // infoWindow.setContent(FTevent.infoWindowHtml);
  // infoWindow.setPosition(FTevent.latLng);
  infoWindow.setOptions(
    { 
     content: FTevent.infoWindowHtml,
     position: FTevent.latLng,
     pixelOffset: FTevent.pixelOffset
    });
  infoWindow.open(map);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-26T06:06:45.710

```
google.maps.event.addListener(layer, 'click', function(e) {
    console.log("E.Row! : "+ e.row['name'].value);
}); 
```

# java - java中无与伦比的类型

> ID：14306734
> 
> 赞同：2
> 
> 时间：2013-01-13T18:30:20.190
> 
> 标签：java

我得到了这段代码，但我得到了一个错误`incomparable types: java.lang.String and int`，对于这行代码 `if ((this.name.String.compareTo(obj.name == 0)) && (this.age = obj.age))`

方法是这样的：

```
public int compareTo(Object o)
{
    int result;
    AnyClass obj = (AnyClass)o;
    if ((this.name.String.compareTo(obj.name == 0)) && (this.age = obj.age))
    {
        result = 0;
    }
   else if (this.name.compareTo(obj.name) > 0)
    {
        result = 1;
    }
    else
    {
        result = -1;
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T18:35:18.180

我认为您的支架位置不正确，

```
this.name.String.compareTo(obj.name == 0)) 
```

obj.name == 0 是您可能将 String (name) 与 int (0) 进行比较的地方。我猜你想在 obj.name 上使用 compareTo ，然后检查它是否等于零。

我也认为在第二部分

```
(this.age = obj.age) 
```

您想使用 == 而不是 =，所以我认为您要使用的代码是：

```
((this.name.compareTo(obj.name)==0) && (this.age == obj.age)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T18:33:26.480

您不能将字符串与整数进行比较:)

您*可以*将字符串“001”转换为整数“1”；或整数“1”到字符串“1”中。

请参阅[Integer.parseInt()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html)或[Integer.toString()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T18:33:05.573

`compareTo`将 Objec 引用（在您的情况下为字符串）作为参数。但是您的代码`compareTo(obj.name == 0)`以不合适的布尔值传递。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T18:37:23.327

我认为代码

```
 if ((this.name.String.compareTo(obj.name == 0)) && (this.age = obj.age)) 
```

实际上应该这样读

```
 if ((this.name.compareTo(obj.name) == 0) && (this.age == obj.age)) 
```

更改位置`== 0`是（并将第二个更改`=`为一个`==`）使此代码有意义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-13T18:46:58.253

这个实现有很多问题。看起来这是`Comparable`for 类的实现，`AnyClass`这意味着签名是错误的。

`AnyClass`应该实现`Comparable<AnyClass>`，代码应该是这样的：

```
@Override
public int compareTo(AnyClass other)
{
    int ret = name.compareTo(other.name);
    return ret != 0 ? ret : Integer.compare(age, other.age);
} 
```

如果你使用番石榴：

```
@Override
public int compareTo(AnyClass other)
{
    return ComparisonChain.start().compare(name, other.name)
       .compare(age, other.age).result();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-13T18:33:09.730

`((this.name.String.compareTo(obj.name == 0)) && (this.age = obj.age))`

obj.name 是一个字符串，0 是一个 int。那就是你得到错误的地方

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-13T18:35:00.190

`obj.name`是 String 并且您正在将其与`0`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-13T18:36:55.210

如果你用代码解释你的意图会更容易。第一个错误似乎是`compareTo` `obj.name == 0`.

尝试

```
if ((this.name.String.compareTo(obj.name) == 0) && (this.age == obj.age)) 
```

这就是我猜你想要实现的目标。

# android - 强制android破坏纹理和着色器的最佳方法

> ID：14306744
> 
> 赞同：0
> 
> 时间：2013-01-13T18:31:12.783
> 
> 标签：android, opengl-es

我想知道强制android销毁所有纹理和着色器程序的最佳方法是什么？

我发现调用 GLSurfaceView.onPause 然后调用 GLSurfaceView.onResume 似乎有效，但我不确定这是否正确。我想到的另一件事是将游戏分成 2 个活动，并在每次需要加载新关卡时来回转移控制，但这似乎是一种丑陋的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:35:24.877

我认为你所拥有的（暂停/恢复）应该可以工作。

在 pre-honeycomb 设备上，暂停 glsurfaceview 会破坏上下文，这将破坏所有着色器和资源。

在honeycomb 之后，有一个名为 的函数`setPreserveEGLContextOnPause`，它为您提供了在surfaceview 暂停时保留上下文的选项。这默认为*false*，因此除非您想保留上下文，否则它将始终被暂停事件破坏。

# c++ - 地图中最接近的字符串/时间戳

> ID：14306745
> 
> 赞同：0
> 
> 时间：2013-01-13T18:31:24.033
> 
> 标签：c++

如果时间戳不在存储时间戳的地图中，我想在地图中找到最接近的匹配时间戳并使用最接近的值作为键。我有我正在尝试做的基本结构设置我只是不确定如何找到最近的时间戳

```
typedef std::map<std::string,int>  Map;
Map::iterator it;
Map my_map;

my_map["2010-01-26 17:02:12"]= 1;
my_map["2010-01-25 08:55:29"]= 2;
my_map["2010-01-24 08:55:29"]= 3;

string timestamp = "2010-01-24 08:55:30"; // would return 3
string timestamp1 = "2010-01-27 01:55:30"; // would return 1

  it = my_map.find(timestamp); 
     if(it == my_map.end()){
       //not sure how to approach this
   } 
```

**更新**

我试图避免将相当大的代码库从 转换`std::string`为`uint64_t`尽管它会提高性能，但这并不是什么大问题，

我无法在这里工作的`std::map::lower_bound`解决`std::map::upper_bound`方案是我在 IDE ONE 上的尝试，

[http://ideone.com/MnRLIH](http://ideone.com/MnRLIH)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T18:35:51.993

[`std::map::lower_bound`](http://en.cppreference.com/w/cpp/container/map/lower_bound)您可能可以使用or获得您需要的东西[`std::map::upper_bound`](http://en.cppreference.com/w/cpp/container/map/upper_bound)，其中任何一个都是*O(log N)*复杂度。

* * *

此外，强烈考虑将时间戳存储为 a`uint64_t`而不是字符串。这将大大减少比较和处理的计算量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T18:35:35.553

我相信有`upper_bound()`和`lower_bound()`功能，你可以用它来找到上面和下面的邻居。

# android - ListView 和 NullPoinerException，我不明白

> ID：14306747
> 
> 赞同：0
> 
> 时间：2013-01-13T18:31:28.640
> 
> 标签：android, listview, nullpointerexception, adapter

我正在尝试使用测试值实现 ListView。每个列表元素应该显示 2 个字符串。但我得到一个 NullPointerException。

我有一个 ListActivity，调用一个适配器。如果我评论这个活动的最后一行，我没有任何错误，所以我猜我的适配器有问题。但是我在网上搜索了解决方案，不幸的是，由于 Java（和 OOP）技能非常低，我无法解决我的问题。你能告诉我我在哪里犯了错误吗？

```
public class ListActivity extends Activity {

//private final String TAG = ListActivity.class.getSimpleName();
private ListView listMessView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_list);

    List<Message> listMessages = new ArrayList<Message>();
    listMessages.add(new Message("London", "aze"));
    listMessages.add(new Message("Rome", "azeeaze"));
    listMessages.add(new Message("Paris", "qsdqsdqsd"));

    listMessView =  (ListView) findViewById(R.id.message_list);
    listMessView.setAdapter(new ListAdaptater(this, R.layout.list_row, listMessages));
    }
}

public class ListAdaptater extends ArrayAdapter<Message>{

  private int resource;
  private LayoutInflater inflater;
  private Context context;

  public ListAdaptater ( Context ctx, int resourceId, List<Message> objects) {

        super( ctx, resourceId, objects );
        resource = resourceId;
        inflater = LayoutInflater.from( context );
        context=ctx;
  }

  @Override
  public View getView ( int position, View convertView, ViewGroup parent ) {

        convertView = ( RelativeLayout ) inflater.inflate( resource, null );

        Message message = (Message) getItem( position );

        TextView txtName = (TextView) convertView.findViewById(R.id.user_name);
        txtName.setText(message.getUserName());

        TextView txtMsg = (TextView) convertView.findViewById(R.id.message);
        txtMsg.setText(message.getMessage());

        return convertView;
  }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:35:16.183

该字段`context`在初始化之前使用。尝试使用这个：

```
 public ListAdaptater ( Context ctx, int resourceId, List<Message> objects) {

        super( ctx, resourceId, objects );
        resource = resourceId;
        inflater = LayoutInflater.from( ctx );
        context=ctx;
  } 
```

# javascript - createWindow 和注入样式表

> ID：14306753
> 
> 赞同：0
> 
> 时间：2013-01-13T18:31:51.490
> 
> 标签：javascript, tidesdk

我最近刚刚下载了 TideSDK，但遇到了一些问题。基本上，我想创建一个新窗口，使用外部链接（工作得很好），然后注入一个样式表来修改窗口，就像你可以使用 chrome 扩展一样。

```
var newWindow = Ti.UI.createWindow({
        id: "newwindow",
        url: "http://www.example.com",
        title: "New Window",
        width: 1100,
        minWidth: 400,
        maxWidth: 1100,
        height: 730,
        minHeight: 500,
        maxHeight: 730,
        maximizable: true,
        minimizable: true,
        closeable: true,
        resizable: true,
        fullscreen: false,
        maximized: false,
        minimized: false,
        usingChrome: true,
        topMost: false,
        visible: true,
        transparentBackground: false,
        transparency: false
    });

newWindow.open(); 
```

我一生都无法弄清楚如何做到这一点。我尝试了以下几种变体：

```
var css = "<link type='text/css' href='app://style.css' />";

newWindow.document.getElementById('body').appendChild(); 
```

没有任何东西会附加到新窗口中。事实上，无论我如何测试新窗口似乎都不会被识别为存在。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:22:27.800

如果域匹配，您可以将 CSS 添加到站点中的外部页面`iframe`。请参阅[本教程](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-inject-custom-html-and-css-into-an-iframe/)。

但是，因为域是分开的，所以 iframe 和父级之间没有通信。因此，您有一个简单但不幸的答案：这根本不可能。

# android - 使用 AQuery（或其他）克隆 RelativeView

> ID：14306754
> 
> 赞同：1
> 
> 时间：2013-01-13T18:32:00.067
> 
> 标签：android, android-layout, android-query

从我所见，AQuery 几乎是一个用于 Java 中 Android 编程的 jQuery。我是一名网络程序员，所以我习惯了 jQuery，它很容易使用，所以我想做同样的事情来操作我的应用程序的布局。

我的问题：是否有一种简单的方法（最好使用 AQuery，但不是必需的）来克隆 a`View`及其所有子项，然后将其插入布局中的某个位置？我读过一些关于膨胀的东西，但没有实际的完整示例包含如何将膨胀的视图放入布局中（或者我可能遗漏了一些东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:06:20.393

对于任何绊倒这个的人，我最终没有使用任何框架，而是使用布局充气器，根据[这个问题](https://stackoverflow.com/questions/9851602/when-inflating-a-layout-xml-dynamically-multiple-times-how-can-i-differentiate)。

# android - Android活动转换为片段

> ID：14306756
> 
> 赞同：0
> 
> 时间：2013-01-13T18:32:27.947
> 
> 标签：android, android-fragments, android-activity

我有一个有效的应用程序。现在我想修改它以使用**ViewPager**。我的意思是，我已经定义了一个新活动，我想使用**ViewPager**在活动之间滑动。为了做到这一点，我将原始活动转换为片段。这是原始（简化）代码

```
public class ListViewImagesActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<Fish> image_details = populateList();

    final ListView lv1 = (ListView) findViewById(R.id.listV_main);
    final ItemListBaseAdapter ilba = new ItemListBaseAdapter(this, image_details);
    lv1.setAdapter(ilba);

    lv1.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> a, View v, int position, long id) {
            Object o = lv1.getItemAtPosition(position);
            Fish obj_itemDetails = (Fish) o;

            Intent intent = new Intent(ListViewImagesActivity.this, DisplayFishDetailActivity.class);

            startActivity(intent);
        }
    });
} 
```

}

我已经通过以下方式修改了代码。

```
import android.support.v4.app.Fragment;
public class ListViewImagesActivity extends Fragment {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstancesState) {
    return inflater.inflate(R.layout.activity_display_fish_detail, container, false);
}

@Override
public void onStart() {
    super.onStart();

    ArrayList<Fish> image_details = populateList();

    final ListView lv1 = (ListView) getView().findViewById(R.id.pager);
    final ItemListBaseAdapter ilba = new ItemListBaseAdapter(getActivity(), image_details);
    lv1.setAdapter(ilba);

    lv1.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> a, View v, int position, long id) {
            Object o = lv1.getItemAtPosition(position);
            Fish obj_itemDetails = (Fish) o;

            Intent intent = new Intent(getActivity(), DisplayFishDetailActivity.class);

            startActivity(intent);
        }
    });
} 
```

现在，适配器**ItemListBaseAdapter使用****getActivity()**而不是**this**接收上下文（实际上我不确定这是否正确）。运行应用程序时，我在**lv1.setAdapter(ilba)处遇到****空指针异常**。

 **有什么提示吗？

提前致谢**

# php - 带有错误处理的 POST/Redirect/GET

> ID：14306758
> 
> 赞同：0
> 
> 时间：2013-01-13T18:32:30.507
> 
> 标签：php, forms, session, post-redirect-get

这篇文章的原因是我试图避免刷新表单时大多数浏览器发出的“表单重新提交错误”。

举个例子：

用户在一个名为**signpetition.php**的页面上，并显示了一个基本的 HTML 表单：

```
<div id="sign-errors" style="display: none;">
</div>

<form action="" method="post">
    <input type="submit" name="submit_button" value="sign petition" />
</form> 
```

因此，用户单击`submit`按钮，现在将读取和验证 POST 数据。

### signpetition.php

```
<?php
    if(isset($_POST['submit_button']))
    {
        // Do some validation

        if($errors == true)
        {
          // What to do here? I want to go back to the last page, but keep the errors. Should I store them in a session variable and then unset them after their use? I feel as though there must be a better solution to this.

            $_SESSION['error'] = "the error";
            header('Location: '. $_SERVER['REQUEST_URI'] , true, 303);
        exit;

        }
        else
        {
            $_SESSION['success'] = "your petition was successfully signed!";
            header('Location: '. $_SERVER['REQUEST_URI'] , true, 303);
        exit;
        }
    }
        ?> 
```

所以，总结一下：

> 我想避免表单重新提交问题，这就是我在代码中使用标头重定向的原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:34:40.923

如果用户被重定向，那么永远不应该重新提交表单。

将它们重定向到`submitted.php`并使用以下内容：

```
if(isset($_SESSION['error'])){ echo'the error';}
else if(isset($_SESSION['success'])){ echo'your petition was successfully signed!');}
else{ echo 'unknown error.'; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-18T15:43:07.477

我知道这很旧，但我想补充一点，关于将消息存储在 SESSION 对象中以供一次性使用的原始解决方案没有任何问题。这是一种称为“Flash Messages”的常见做法，它是存储在会话中的消息，在读取一次时会被删除。Rails 使该技术流行起来。PHP总结如下：

[http://www.phpdevtips.com/2013/05/simple-session-based-flash-messages/](http://www.phpdevtips.com/2013/05/simple-session-based-flash-messages/)

# javascript - 获取具有某些属性的对象的名称

> ID：14306759
> 
> 赞同：1
> 
> 时间：2013-01-13T18:32:37.873
> 
> 标签：javascript, search, object

> **可能重复：**
> [根据其属性获取数组元素的索引](https://stackoverflow.com/questions/12553274/getting-index-of-an-arrays-element-based-on-its-properties)

我正在用 HTML、jQuery、JS、CSS 和所有普通的东西创建一个地址簿。这只是一个简单的 CRUD 应用程序，没有什么花哨的。我处于中级水平，并且对我将要创建它的方法有点麻烦。我让书中的每个人都成为一个对象。每个对象都是用一个名称创建的，例如`obj0`. 然后该对象将被分配值，例如：

```
obj0.name = "Billy";
obj0.num = "1-207-233-8846";
obj0.address = "18 Phillmore Rd, Miami, Florida"; 
```

如果这些属性中的任何一个不起作用，请忽略它，我只是出于示例的目的而编造它们。

现在我意识到我很可能需要找到具有名称的对象`"Billy"`。我不想让用户必须输入`obj0`才能找到比利。

我正在命名该对象`obj0`，而不是`Billy`因为我想让地址簿中包含多个 Billy 成为可能。

好的，现在是实际问题：
**如何获取****具有 name 属性的对象**`obj0`的名称或 id（如果不清楚，我想获取） 。 **`"Billy"`**

 **假设我有不止一个对象。其他人将被称为`obj1`and `obj2`。

如果可能的话，我还希望能够搜索带有号码`"1-207-233-8446"`或其他电话号码/地址的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:39:03.257

为什么你称这些对象为任何东西？obj0、obj1 等...

考虑一下（除非您对右侧的链接感到满意，这可能已经回答了这个问题）：

```
function Person( name, num, address ) {
    this.name = name;
    this.num = num;
    this.address = address;
} 
```

然后你创建一个这样的对象数组：

```
var persons = [
    new Person( "Billy", "1-207-233-8846", "18 Phillmore Rd, Miami, Florida" ),
    new Person( "Bob", "2", "somewhere" )
]; 
```

并且搜索它变得容易：

```
for ( var i = 0; i < persons.length; ++i ) {
    if ( persons[ i ].name == "Billy" ) {
        // Found, do something with Billy
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:38:19.237

使用 list 来存储您的所有对象并迭代列表并检查搜索条件是否满足，在您的情况下它是“billy”。如果您不想使用列表，请使用对象数组，然后使用 for 循环进行迭代。希望这有帮助。请告诉您是否需要此代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T18:55:55.963

如果你把你的对象放在一个数组中（我认为这是一个比给它们全名更好的选择），你可以使用该[`filter`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)来获取一个符合条件的新项目数组：

```
var bobs = addresses.filter(function(address) { return address.name === "Bob"; }); 
```

注意`filter`返回一个数组。但如果你仔细想想，这是正确的，因为你的通讯录中很容易有多个 Bob！

关于这一点的巧妙之处在于，您可以编写返回要传递给的函数的函数`filter`：

```
function withName(name) {
  return function(address) {
    return address.name === name;
  };
}

function withNumber(number) {
  return function(address) {
    return address.number === number;
  }
}

var bobs = addresses.filter(withName("Bob")); 
```

然后，您可以编写函数来组合这些函数来创建更具体的查询：

```
function and(p1, p2) {
  return function(address) {
    return p1(address) && p2(address);
  }
}

var billy = addresses.filter(and(withName("Billy"), withNumber("1-207-233-8846")))[0]; 
```**

# php - OpenCart - 不发送电子邮件（通知或联系页面）

> ID：14306766
> 
> 赞同：2
> 
> 时间：2013-01-13T18:33:22.933
> 
> 标签：php, email, base64, opencart

据我所知，我的邮件设置配置正确，但我没有收到任何电子邮件，不是通过联系表格，也不是新客户或任何下达的订单。

这是我当前的设置：

![在此处输入图像描述](../Images/081ecf72e24cf9b77852d9ae1c2ffbf3.png)

我试过了：

1.  更改为 SMTP，我收到一个错误，我的主机 (IXWebHosting) 说我需要在应用程序中禁用授权，我看不到这个选项

2.  [按照此处的建议在](http://forum.opencart.com/viewtopic.php?f=20&t=21251&p=257231)电子邮件前添加 -f 和 -F

3.  将不同的电子邮件添加到“邮件”页面底部的“也发送到”框中

4.  [按照此处的建议](http://forum.opencart.com/viewtopic.php?f=20&t=59560&p=281016)手动定义代码中的“From”标头

5.  试过@gmail.com、@googlemail.com 和@arabel.co.uk

不幸的是，我仍然没有收到来自 OpenCart 的任何电子邮件。我已经联系了我的主机并运行了测试脚本 - 邮件功能或服务器上的设置没有问题，我刚刚从 OpenCart 下载了最新版本的 mail.php（虽然这是六个月前的反正我用的那个）

谢谢

***更新：***

看起来 base64_encode 不起作用，因为这段代码：

```
echo $header = 'From: ' . '=?UTF-8?B?' . base64_encode($this->sender) . '?=' . '<' . $this->from . '>' . $this->newline;
die(); 
```

输出这个：

> 来自：=?UTF-8?B?Tmljaw==?=

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T18:54:22.650

老实说，不完全确定为什么要使用 base 64 编码。打开`system/library/mail.php`并更改此行

```
echo $header .= 'From: ' . '=?UTF-8?B?' . base64_encode($this->sender) . '?=' . '<' . $this->from . '>' . $this->newline; 
```

到

```
$header .= 'From: ' . $this->sender . ' <' . $this->from . '>' . $this->newline; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T15:46:54.527

我对此感到非常沮丧..

问题实际上出在您的服务器上...如果您使用邮件选项，则必须在本地主机上设置邮件服务器。但问题是您的 ISP 是否支持 smtp 的 25 端口。如果没有，那你就有问题了。

第二种选择是使用 gmail smtp 或 hotmail smtp。我尝试过但惨遭失败。我不知道为什么 gmail 对我不起作用，但我用谷歌搜索了整个互联网，发现人们随机遇到 gmail 问题。

我正在搜索并尝试了最后的手段..来自我的 isp 的 smtp。我使用了我的 ISP 的 smtp 并在 SMTP 上设置了选项，发现东西有效。

我打电话给我的 ISP，他们不知道为什么 gmail 不起作用，但他们告诉我他们关闭了 25 端口以防止垃圾邮件发送者使用您的用户名发送邮件。

TL，DR：如果您在本地主机上工作，请尝试您自己的 isp smtp，如果不是，请让您的托管服务提供商为您解决问题:)

PS：您不能禁用授权。P以前的opencart版本没有授权，这很有趣，他们为什么没有添加选项来选择是否授权。

如果您知道编码，则可以在 opencart 中编辑邮件类，如果不知道，您唯一的解决方案是使用您的 ISP smtp 或转移到使用 smtp 授权设置其邮件服务器的主机（即使对于您当前的托管）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-13T17:54:04.837

尝试在您网站的设置菜单中添加多个电子邮件地址。（网站管理）。

它适用于我们，在 OpenCart 版本 1.5.5.3 中。

![在此处输入图像描述](../Images/6f94de9a713083773dd32134e230a1c0.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-22T15:28:56.367

我尝试了所有可能的修复方法，但没有一个对我有用（我托管在 Site5 上，它在 Webfaction 上有效）。我最终使用 SwiftMailer 重写了system/library/mail.php 文件中的**send()**函数，我安装了 system/library/swiftmailer 目录。我的代码不完整，因为它假定始终需要身份验证，但这应该很容易解决。

```
public function send() {
    require_once(DIR_SYSTEM . 'library/swiftmailer/swift_required.php');

    if (!$this->to) {
        trigger_error('Error: E-Mail to required!');
        exit();         
    }

    if (!$this->from) {
        trigger_error('Error: E-Mail from required!');
        exit();                 
    }

    if (!$this->sender) {
        trigger_error('Error: E-Mail sender required!');
        exit();                 
    }

    if (!$this->subject) {
        trigger_error('Error: E-Mail subject required!');
        exit();                 
    }

    if ((!$this->text) && (!$this->html)) {
        trigger_error('Error: E-Mail message required!');
        exit();                 
    }

    if (is_array($this->to)) {
        $to = implode(',', $this->to);
    } else {
        $to = $this->to;
    }

    $message = Swift_Message::newInstance()
      ->setSubject($this->subject)
      ->setFrom(array($this->from => $this->sender))
      ->setTo(array($to))
      ->setBody($this->text);

    if($this->html){
        $message->addPart($this->html, 'text/html');
    }

    foreach ($this->attachments as $attachment) {
        if (file_exists($attachment)) {
            $message->attach(Swift_Attachment::fromPath($attachment));
        }
    }

    $transport = Swift_SmtpTransport::newInstance('localhost', 25)
    ->setUsername($this->username)
    ->setPassword($this->password);

    $mailer = Swift_Mailer::newInstance($transport);
    $mailer->send($message);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-10T18:40:06.160

对我来说，解决方案是当电子邮件的“发件人”中的域与主机不同时，我的服务器无法发送电子邮件。

这很清楚，因为当我填写`test@mydomain.com`联系表格时，它可以工作，而且常规电子邮件也确实到达了。

为了强制从我自己的主机而不是填写的电子邮件地址发送邮件，我编辑了联系人控制器。

如果您不知道如何编辑源代码，请不要继续此操作，我省略了一些简单的步骤。如果您不知道这些步骤，请不要问，而是请专业人士进行查找。（只是为了保护自己）

文件：`catalog/controller/information/contact.php`

函数索引，对我来说在第 21 行：

原来的：

```
$mail->setFrom($this->request->post['email']); 
```

新的：

```
$mail->setFrom($this->config->get('config_email'));
$mail->setReplyTo($this->request->post['email']); 
```

这为我解决了。

# c# - 如何从后面的代码运行存储过程

> ID：14306768
> 
> 赞同：0
> 
> 时间：2013-01-13T18:33:52.817
> 
> 标签：c#, asp.net

我在我的表中插入一些值，同时，我想调用存储过程来进行一些更新，但我遇到了一些语法问题。我在网上搜索过，但找不到任何东西。我只是想弄清楚如何使用相同的连接。这是我的代码：

```
sqlcmd.CommandText = "INSERT INTO MyTable(ID, Name ) VALUES(@ID, @Name)";
sqlcmd.Parameters.Clear();
sqlcmd.Parameters.Add("@ID", SqlDbType.VarChar).Value = ID;
sqlcmd.Parameters.Add("@Name", SqlDbType.VarChar).Value = Name;

sqlcmd.Connection = sqlcon;

sqlcmd.ExecuteNonQuery(); 
```

我在互联网上看到了一些示例，但无法弄清楚如何使用相同的连接。这是我找到的示例：

```
SqlCommand myCMD = new SqlCommand("sp_Test", sqlcon);
myCMD.CommandType = CommandType.StoredProcedure; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T18:40:08.533

执行程序的代码如下

```
using( SqlConnection con = new SqlConnection(connenctionstring))
{
 using(SqlCommand myCMD = new SqlCommand("sp_Test", con))
 {
  myCMD.CommandType = CommandType.StoredProcedure;
  con.Open();
  myCMD.ExecuteNonQuery();//as its insert command
  con.Close();
 }
} 
```

**必须使用 Using which dispose 以及 close 连接**

# actionscript-3 - as3 为什么我觉得我在与 Flash Develop（在 Mac 上）作斗争？

> ID：14306770
> 
> 赞同：0
> 
> 时间：2013-01-13T18:34:07.223
> 
> 标签：actionscript-3, flash, flash-cs5.5

我正在 Flash Pro CS 5.5 中创建 Web、Android 和 IOS 游戏和应用程序

我真的很喜欢这个程序，我用它来布局、创建影片剪辑、将所有资产存储在库中、发布，甚至编译和测试。

问题是代码编辑器，嗯，很糟糕。我已经下载了 Flash Develop，但我认为我没有正确使用它（它希望我使用它的方式）。它希望我每次进行更改时都重新发布一个 swc。这对我的工作方式来说根本不切实际。Flash Develop 中发生了太多事情，我不知所措。

真的，我喜欢 Flash Develop 的唯一一点是，将光标放在花括号旁边会告诉您另一个在哪里（我的大部分错误都与那些被诅咒的花括号有关）。

我试图开始一个新的 Flash Develop 项目，结果又回到了旧方法而生气。

但是，现在文件的每个字母都带有红色下划线。我什至无法在 Flah Develop 中打开这个文件！如果有人可以推荐一个不错的 MAC cas3 代码编辑器，那就太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:45:50.143

您觉得自己在与 Flash Develop 作斗争，因为您不了解如何使用它。您可能还没有将 AS3/编程知识提高到足以真正欣赏它的作用。

您的目标应该是学习如何正确使用它。与 IDE 相比，使用 Flash Develop 有很多优点。如果您经常修改您的内容并且对 Flash Develop 带来的编码功能的需求较少，那么 Flash IDE 可能最适合您。

查看这些链接，您会发现在适当的编码 IDE 中可以提高多少效率：

[http://www.flashdevelop.org/wikidocs/index.php?title=Features:Generation](http://www.flashdevelop.org/wikidocs/index.php?title=Features:Generation)

[http://www.flashdevelop.org/wikidocs/index.php?title=快捷方式](http://www.flashdevelop.org/wikidocs/index.php?title=Shortcuts)

# linux - 通俗的讲，Mac OS、Ubuntu、Linux、Unix 有什么区别？

> ID：14306771
> 
> 赞同：1
> 
> 时间：2013-01-13T18:34:13.323
> 
> 标签：linux, macos, unix, ubuntu, operating-system

我知道这部分是关于抽象的，但由于我是初学者，这些概念对我来说非常模糊。Mac OS 是建立在 Linux 架构之上的吗？Linux 与 Unix/Ubuntu 有什么关系？我曾尝试在其他地方对此进行研究，但很难找到非常明确的解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T18:38:13.237

Unix 是最初在 1970 年代开发的操作系统，Mac OS X 正是基于该操作系统。Linux 是一个内核（操作系统的与硬件接口的部分），而 Ubuntu 或 Fedora 等发行版添加了其余软件（其中大部分来自 GNU 项目）以使其成为完整的操作系统。Linux 和 GNU 项目最初的存在是为了提供封闭源 Unix 的免费替代方案，因此虽然代码不是来自 Unix，但它们非常相似。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T18:52:06.483

Linux 只是一个操作系统内核，它符合 Unix 标准。内核是现代操作系统中最小的运行软件组件，它处理程序的执行、管理硬件、内存、IO 等。它不是普通用户直接与之交互的东西，甚至是不知道的。

Ubuntu 是一个使用 Linux 内核的完整操作系统。一个完整的操作系统包括程序（网络浏览器、文件浏览器、照片查看器、打印机驱动程序、桌面环境等）并提供完整的用户界面。由于它运行 Linux 内核，因此符合 Unix 标准。

Unix 是操作系统内核以及用户空间实用程序和最初在 1970 年代开发的标准的通用名称。

Mac OS 是一个完整的操作系统，运行 Darwin 内核和 FreeBSD 用户空间实用程序，并且符合 Unix 标准。

这意味着用 C 编写的符合 POSIX/Single UNIX 规范（操作系统标准集）的程序将在 Linux、Mac OS、FreeBSD 等上以相同的方式编译和工作。请注意，Windows 是一个奇怪的操作系统不兼容 POSIX/Single UNIX，并且与上述操作系统有很大不同，并且不一定能够在不进行重大修改的情况下运行该程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T18:37:46.213

它们都是[“类Unix”](http://en.wikipedia.org/wiki/Unix-like)系统。

Ubuntu 是一个[Linux](http://en.wikipedia.org/wiki/Linux) . 它运行[Linux 内核（](http://en.wikipedia.org/wiki/Linux_kernel) [Android](http://en.wikipedia.org/wiki/Android_%28operating_system%29)也是如此）。

[Unix](http://en.wikipedia.org/wiki/Unix)今天不作为一个具体的操作系统存在......除了作为一个原型，那个原型是[Posix](http://en.wikipedia.org/wiki/Posix)（Posix 是一个标准规范，而不是现有软件），现在是[OpenGroup Unix](http://www.unix.org/)（这也是一个标准规范） .

^(旧的 ATT Unix 代码在法律上几乎丢失给破产的 SCO。)

您列出的所有系统都在实施 Posix。

因此，一个符合 Posix 的 C 程序可以很容易地从一个程序移植到另一个程序——您可能只需要重新编译它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T19:01:43.417

Unix 是 70 年代与 C 编程语言一起开发的操作系统。UNIX 范式对从那时起开发的每一个操作系统都产生了深远的影响，它的元素甚至可以在 Windows 中找到。

已经创建了几个遵循 Unix 范例的操作系统。Mac OS 有一个内核，它基于为 PC 制作的第一个 Unix 版本，称为 BSD Unix。

Linux 最初是一个爱好者操作系统，后来成为一个非常专业的操作系统。顾名思义，它也遵循 Unix 范式。这意味着通常在 Unix 上编译的程序将在 Linux 和 MacOS 上编译。

许多开源操作系统都有一个叫做发行版的东西，所以有 Linux 和 BSD 的发行版。这些发行版本质上只是一组预配置的软件，但通过努力，您可以自己从头开始组装相同的东西。Ubuntu 就是这样一种发行版。

由于有各种类 UNIX 操作系统，Unix C API 已被标准化为 Posix。大多数操作系统本机支持 Posix。Microsoft 也为 Windows 提供了 Posix 层。

# html - 如何在 HTML 中对按钮进行编程以转到链接？

> ID：14306777
> 
> 赞同：2
> 
> 时间：2013-01-13T18:34:51.143
> 
> 标签：html

我的 Razor 视图中有以下内容：

```
<button class="float-left submit-button" title="Test Questions">Test</button> 
```

我怎样才能使它在单击按钮时转到以下 URL？

```
"~/F000C/Home-About" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T18:41:15.650

只需使用链接*和*按钮，如下所示：

```
<a href="http://www.example.com"><button class="float-left submit-button" title="Test Questions">Test</button></a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T18:37:29.503

```
<button class="float-left submit-button" title="Test Questions" onclick="javascript:window.open('~/F000C/Home-About')">Test</button> 
```

如果你真的想要按钮元素，那么你应该插入`onclick`事件。

或者：

```
<button class="float-left submit-button" title="Test Questions" onclick="window.location.assign('~/F000C/Home-About')">Test</button> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T18:54:06.503

您可以使用仅包含一个按钮的简单表单：

```
<form action="~/F000C/Home-About">
<button class="float-left submit-button" title="Test Questions">Test</button>
</form> 
```

您可能需要设置`form { display: inline }`，因为默认情况下表单显示为块。

然而，使用普通链接元素并将其设置为按钮样式（现在在 CSS 中很容易）是一个更好的主意。想想搜索引擎。（他们通常不提交表单，也不应该期望他们运行 JavaScript；但他们只是喜欢链接。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T18:53:05.410

为什么不使用 CSS 和 HTML 使链接看起来像一个很棒的按钮。更多示例[在这里](http://www.zurb.com/blog_uploads/0000/0617/buttons-03.html)。

**HTML**

```
<a class="awesome" href="http://www.example.com">Super Awesome Button Link &raquo;</a> 
```

**CSS**

```
.awesome, .awesome:visited {
    background: #666; 
    display: inline-block; 
    padding: 5px 10px 6px; 
    color: #fff; 
  font:12px Calibri, Verdana;
    text-decoration: none;
    -moz-border-radius: 5px; 
    -webkit-border-radius: 5px;
    -moz-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
    -webkit-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
    text-shadow: 0 -1px 1px rgba(0,0,0,0.25);
    border-bottom: 1px solid rgba(0,0,0,0.25);
    position: relative;
    cursor: pointer;
}
.awesome:hover { background-color: #111; color: #fff; } 
```

# ios - NSRegularExpression + iOS + HTML 中的 URL

> ID：14306784
> 
> 赞同：0
> 
> 时间：2013-01-13T18:35:21.700
> 
> 标签：ios, regex

> **可能重复：**
> [解析 HTML NSRegularExpression](https://stackoverflow.com/questions/10522008/parsing-html-nsregularexpression)

我有一个这样的 NSString：

```
NSString *string = @"<a href='http://john.com'>JOHN</a> http://john.com"; 
```

我想使用正则表达式来解析不在锚标记中的 URL，因此我可以将它们放在锚标记中。

我目前有这个：

```
NSRegularExpression *URLRegex = [NSRegularExpression
                                 regularExpressionWithPattern:@"((https?):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])" options:NSRegularExpressionCaseInsensitive error:nil]; 
```

这确实检测到了 URL，但它也检测到了锚标记中的 URL，这是有问题的。

有谁知道我需要做什么？谢谢。

更新：

```
@"([^\'](https?):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|][^\'])" 
```

下面由 Alex 提供的这种模式是一种改进。但是如果我有这样的字符串 @" [http://example.com](http://example.com) ; john.com"; - example.com 匹配。我怎样才能排除它？基本上我不希望匹配锚标记中的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:41:20.107

一般来说，考虑到正则表达式的工作原理，试图捕捉“不是”的东西比试图捕捉东西要困难得多。您可以使用一些 sed 命令或 strip 的实现等轻松实现上述内容。

鉴于您上面的格式，这样的东西会起作用，还是会为您排除太多的极端情况？

```
"([^\'](https?):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|][^\'])" 
```

即，我们希望确保您的 URL 不在引号内。它会在以下方面失败：

```
"tom went to 'https://www.google.com' to find the..." 
```

但我不知道这对你是否重要。

# cloud-foundry - 如何仅将本地文件夹推送到远程 Cloud Foundry 实例？

> ID：14306786
> 
> 赞同：1
> 
> 时间：2013-01-13T18:35:25.753
> 
> 标签：cloud-foundry, vmc

我只想**在我的战争结构之外创建一个文件夹**。我需要使用 vmc 或 manifest.yml 复制我的本地架构

我想在远程系统的根目录中创建目录。

*例如*，在**Amazon Elastic Beanstalk**中，您可以这样做：

```
command: "cp -r .ebextensions/myConfig /var/" 
```

其中“myConfig”是我本地结构的链接文件夹，“var”是亚马逊中基于 Tomcat 的实例的远程文件夹。

在 Cloud Foundry 中有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:16:45.787

不，您不能修改根文件系统。您将获得包含应用程序的目录，并且可以随意修改，仅此而已。

Elastic Beanstalk 为您提供了一个虚拟机，您可以随心所欲地做任何事情。Cloud Foundry 没有给你一个虚拟机；所以它有局限性。

# android - 在地图中手动添加地理点并获取其纬度和经度

> ID：14306789
> 
> 赞同：0
> 
> 时间：2013-01-13T18:35:37.260
> 
> 标签：android, android-mapview, geopoints

我正在尝试在地图视图中添加位置的地理点。我想移动地图视图，直到我想要并将中心作为位置（经度和纬度），并使用这个位置和我当前的位置，知道两个地理点之间的距离。

我想要类似于 FakeGPS 应用程序的东西，

[http://www.google.es/imgres?q=FAKEGPS&um=1&hl=es&sa=N&tbo=d&biw=1247&bih=548&tbm=isch&tbnid=MIj6qLscPq5OkM:&imgrefurl=http://www.androidpit.es/es/android/market/ aplicaciones/aplicacion/com.lexa.fakegps/Fake-GPS-location&docid=vtGY2p008QVLOM&imgurl=http://fs01.androidpit.info/ass/x93/1612093-1328451448448.jpg&w=320&h=480&ei=RQDzUP_8C8KXoom817&&14HQDQ=hQDQ=zoom87&&Vpy=hQDQ&vpx=i 81&dur=27&hovh=275&hovw=183&tx=84&ty=134&sig=110346020377905343716&page=1&tbnh=129&tbnw=86&start=0&ndsp=27&ved=1t:429,r:1,s:0,i:85](http://www.google.es/imgres?q=FAKEGPS&um=1&hl=es&sa=N&tbo=d&biw=1247&bih=548&tbm=isch&tbnid=MIj6qLscPq5OkM:&imgrefurl=http://www.androidpit.es/es/android/market/aplicaciones/aplicacion/com.lexa.fakegps/Fake-GPS-location&docid=vtGY2p008QVLOM&imgurl=http://fs01.androidpit.info/ass/x93/1612093-1328451448448.jpg&w=320&h=480&ei=RQDzUP_8C8KXtQbV14HQDQ&zoom=1&iact=hc&vpx=87&vpy=81&dur=27&hovh=275&hovw=183&tx=84&ty=134&sig=110346020377905343716&page=1&tbnh=129&tbnw=86&start=0&ndsp=27&ved=1t:429,r:1,s:0,i:85)

我试过这个：

```
case R.id.button1:

            GeoPoint geoPoint=mapView.getProjection().fromPixels((int)event.getX(),(int)event.getY());
            int latitude = geoPoint.getLatitudeE6();
            int longitude = geoPoint.getLongitudeE6();
             targetLocation = new Location("Target Position");
             targetLocation.setLatitude(latitude); //punto pre-definido,
            targetLocation.setLongitude(longitude); //no cambiar el valor
             targetLocation.setAltitude(0); 
```

因为我在其他帖子里看到了。但我不知道如何使用事件。因为我没有声明

这是我的所有代码：

公共类 GpsActivity 扩展 MapActivity 实现 OnClickListener{

```
private LocationManager locationManager;
private Location targetLocation;
double longitude, latitude;
private float distancia;
ProgressDialog pd;
LocationListener listener;
Ringtone ringtone;
boolean alarmaActivada;
Button aumentar, reducir;
Context context;
MapView mapView;

public class MyLocationListener implements LocationListener {

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        float dist=0;
        float error=0;

        //Escribir posición actual en m1TextMessage
        latitude =location.getLatitude();
        longitude = location.getLongitude();

        //calcular distancia al destino y error estimado
        //Escribir distancia al destino y error en m3TextMessage
        GeoPoint geoPoint;
        List<Overlay> mapOverlays = mapView.getOverlays();
         geoPoint = new GeoPoint((int)(longitude*1E6),(int)
                    (latitude*1E6));
        MyItemizedOverlay itemizedOverlay = new MyItemizedOverlay
                    (context,context.getResources().getDrawable(R.drawable.ic_launcher));
        OverlayItem overlayitem = new OverlayItem(geoPoint,"Error","Distancia");
        itemizedOverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedOverlay);

        Location loc2= new Location(LocationManager.GPS_PROVIDER);

         if (loc2 != null)  
            {
               dist=location.distanceTo(targetLocation);
               error = location.getAccuracy();
               if(dist < distancia){
                   Toast.makeText(getApplicationContext(), "Distancia menor a: "+dist+" metros.",Toast.LENGTH_SHORT).show(); 
                   if(!alarmaActivada)
                   startAlarm();
              }// else 
                //   stopAlarm();
            }else
                 Toast.makeText(getApplicationContext(), "location actual es null!!",Toast.LENGTH_SHORT).show();

        //Lanzar un Toast si la distancia al destino es inferior a 10 metros

    }

};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.gps);
    Button localiza, enviar;

    context = this;

    localiza = (Button)findViewById(R.id.button1);
    enviar = (Button)findViewById(R.id.sendDistancia);
    aumentar =(Button)findViewById(R.id.aumentar);
    reducir = (Button)findViewById(R.id.reducir);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    mapView.postInvalidate();
    MapController mapCont = mapView.getController();
    mapCont.setZoom(12);
    MyItemizedOverlay overlayItem = new MyItemizedOverlay(this.getResources().getDrawable(R.drawable.ic_launcher));

    locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
    localiza.setOnClickListener(this);
    enviar.setOnClickListener(this);
    reducir.setOnClickListener(this);
    aumentar.setOnClickListener(this);

}private void startAlarm() {  
    Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);  
    if(alert == null){  
        // alert is null, using backup  
        alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);  
        if(alert == null){  // I can't see this ever being null (as always have a default notification) but just incase  
            // alert backup is null, using 2nd backup  
            alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);                 
        }  
    }  
   ringtone = RingtoneManager.getRingtone(getApplicationContext(), alert);  
   if (ringtone != null) {  
       ringtone.play();  
       alarmaActivada = true;
   } 
```

}

```
public class GPSLocation extends AsyncTask<Void, Void, Void>
{  
    boolean running =true;
            @Override
            protected void onPreExecute()
            {  
                super.onPreExecute(); 
                pd = new ProgressDialog(GpsActivity.this);
                pd.setOnCancelListener(new DialogInterface.OnCancelListener(){
                      public void onCancel(DialogInterface dialog) {
                          pd.cancel();  
                      }
                });
                longitude=0;
                latitude =0;
                getLonLat();
                pd.setCancelable(true);
                pd.setMessage("Getting GPS Location...");
                pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);

                pd.show();

            } 

            @Override 
            protected void onProgressUpdate(Void... values) {
                super.onProgressUpdate(values);

                // Things to be done while execution of long running operation is in progress. For example updating ProgessDialog
             }

            @Override 
            protected void onPostExecute(Void result)
            {  

                    pd.dismiss(); 
            }

            @Override
            protected Void doInBackground(Void... params) {  
                boolean isDataSubmitted = false;

                while(!isDataSubmitted)
                {  
                    if(longitude !=0 && latitude!=0)
                    { 

                        isDataSubmitted = true;
                        Log.d("LONGITUD", ""+longitude);
                        Log.d("LATITUDE", ""+latitude);

                    }  
                } 

                return null;    
            } 
 } 

public void getLonLat(){
    listener = new MyLocationListener();

    if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
        (locationManager).requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,listener);

    }else if (locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, listener);
        Log.d("Long", ""+longitude);
    } else 
        enableLocationSettings();

}

@Override
public void onStart(){

    //Crear servicio de localización LocationManager       
    //Determinar si el GPS está encendido
    //Caso esté apagado, permitir al usuario activarlo mediante método enableLocationSettings()

    //Solicitar actualizaciones de posición al proveedor de GPS (opcionalmente también al proveedor de red)
    //Nota: el LocationListener ya ha sido creado: listener

    super.onStart();
}

private void enableLocationSettings() { //enable Location services is necessary
    Intent settingsIntent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
    startActivity(settingsIntent);
}

@Override
public void onStop(){
     locationManager.removeUpdates(listener);
     super.onStop();
}

public void onClick(View v) {
        EditText distan;
        switch (v.getId()) {
        case R.id.sendDistancia:
            distan = (EditText)findViewById(R.id.distancia);
            distancia = Float.valueOf(distan.getText().toString());
            new GPSLocation().execute();
            break;

        case R.id.button1:
            GeoPoint geoPoint=mapView.getProjection().fromPixels((int).getX(),(int)event.getY());
            int latitude = geoPoint.getLatitudeE6();
            int longitude = geoPoint.getLongitudeE6();
             targetLocation = new Location("Target Position");
             targetLocation.setLatitude(latitude); //punto pre-definido,
            targetLocation.setLongitude(longitude); //no cambiar el valor
             targetLocation.setAltitude(0);

            break;
        case R.id.aumentar:
            break;
        case R.id.reducir:
            break;
        }

}
@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

谢谢，也很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:16:14.087

最后我用这个做到了。

```
 GeoPoint geoPoint=mapView.getMapCenter();
            double division = 1000000.0;
            double latitude = (geoPoint.getLatitudeE6()/division);
            double longitude = (geoPoint.getLongitudeE6()/division);

             Drawable drawable = context.getResources().getDrawable(R.drawable.ic_launcher);
            itemizedoverlay = new MyItemizedOverlay(context, drawable);

                OverlayItem overlayitem = new OverlayItem(geoPoint, "Objetivo", "");
                itemizedoverlay.addOverlay(overlayitem);
                if (itemizedoverlay.size() > 0) {
                    mapView.getOverlays().add(itemizedoverlay);
                } 
```

# javascript - 使用 javascript/html5 的文件读取事件处理程序怪异

> ID：14306791
> 
> 赞同：0
> 
> 时间：2013-01-13T18:35:47.387
> 
> 标签：javascript, html

我正在尝试在 JavaScript 中安装一个事件处理程序来做一些加载文件的工作（我正在使用 Chrome 进行测试）。这是我正在使用的 Javascript：

```
// file reader...

function handleFileSelect(evt) 
{
    alert('event changed called!');
    var files = evt.target.files; // FileList object

    // files is a FileList of File objects. List some properties.
    var output = [];
    f = files[0];
    reader.readAsText(f);

    var reader = new FileReader();
    reader.onloadend = function(evt)
    {
        // alert(evt.target.result);
        alert('moo!');
    }
}

alert('adding event listener');
document.getElementById('files').addEventListener('change', handleFileSelect, false); 
```

奇怪的是警报没有触发，所以我假设我没有正确安装它们。我不确定错误是什么。有任何想法吗？

编辑：对不起，我应该提到它是未触发的 handleFileSelect(...) 事件处理程序。

感谢您的时间...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:38:36.523

您`reader.readAsText(f);`在分配`reader`值之前调用，因此尝试`readAsText`从未定义的值调用时会出错。

```
var reader = new FileReader();
reader.readAsText(f); 
```

# php - 循环和复制表（ProcessMaker）

> ID：14306792
> 
> 赞同：0
> 
> 时间：2013-01-13T18:35:48.227
> 
> 标签：php, business-process-management

在 BPM 应用程序 ProcessMaker 中，我试图将行从 dynaform 中的一个网格复制到第二个 dynaform 中的后续网格。我只想复制选中复选框的第一个网格中的行。用户不需要查看未选中的行。

我尝试在随后的网格之前运行触发器并循环通过第一个网格并检查行的复选框打开的位置，但它似乎没有复制任何内容。下面是触发器的代码。我究竟做错了什么？

```
 @=new_grid = array();
 $tot = count(@=original_grid);
   for ($i = 1; $i <= $tot; $i++) {
    if ((@=original_grid[$i]['my_checkbox']) == 'On') {
    @=new_grid[$i] = array(
  'field1'    = @=original_grid[$i]['field1'],
  'field2'    = @=original_grid[$i]['field2'],
  'field3' = @=original_grid[$i]['field3'],
  'field4' = @=original_grid[$i]['field4'],
  'field5' = @=original_grid[$i]['field5'],
  'field6' = @=original_grid[$i]['field6']
  );
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:43:22.993

是否将变量分配给您使用的数组中的字段，`=`而不是`=>`. 像`'field1' => @=original_grid[$i]['field1'],`

您可以使用 exit 结束触发器并在此之前添加一些回声。同样在流程设计器中，您可以启用调试器。通过这种方式，您可以在运行进程时查看具有值的变量。此外，您可以查看是否触发了触发器以及是否有任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:38:58.263

这个花了一段时间才弄清楚。原来，我把触发器放在了错误的位置。我需要在派生/路由之后放置触发器。这是我最终使用的修改后的代码：

```
$newGrid = max(array_keys(@=newGrid));
$i = 0;
foreach(@=newGrid as $r){
  if($r['my_checkbox'] == "On")
  {
     $i = $i + 1;
     @=newGrid[$newGrid + $i] = $r; 
  }
} 
```

# java - googlemaps不出现只黑屏

> ID：14306795
> 
> 赞同：0
> 
> 时间：2013-01-13T18:36:12.200
> 
> 标签：java, android, google-maps, gps

我制作了一个典型的 googlemaps 应用程序。它在大约 2 个月内运行良好，但昨晚我想添加更多功能，结果是 googlemaps 没有出现，只有黑屏。我的应用程序没有吐出任何错误，一切正常，除了 googlemaps 被黑屏取代。为什么会这样？有任何想法吗？

它在模拟器上运行良好，但在我的手机上不行。

谷歌地图活动

```
public class GoogleMaps extends MapActivity implements LocationListener {

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    Intent intent1 = new Intent(this, BackGroundService.class);
    stopService(intent1);
    setContentView(R.layout.googlemaps);
    map = (MapView) findViewById(R.id.mvGoogleMaps);
    Touchy t = new Touchy();
    overlayList = map.getOverlays();
    overlayList.add(t);
    ourLocation();

    d = getResources().getDrawable(R.drawable.round_pointer);
    Criteria crit = new Criteria();
    towers = locationManager.getBestProvider(crit, false);
    Location location = locationManager.getLastKnownLocation(towers);
    nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    nm.cancel(uniqueID);
} 
```

谷歌地图布局

```
 <com.google.android.maps.MapView
        android:id="@+id/mvGoogleMaps"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="My APY Key"
        android:clickable="true"
        android:enabled="true" /> 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.rememberforme"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_GPS" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/round_pointer"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name="com.example.rememberforme.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.example.rememberforme.GoogleMaps" >
        </activity>
        <activity android:name="com.example.IkkeImplementeret.Situationer" >
        </activity>
        <activity android:name="com.example.IkkeImplementeret.Tid" >
        </activity>
        <activity android:name="com.example.rememberforme.Locations" >
        </activity>

        <service 
            android:name="com.example.rememberforme.BackGroundService"
            android:enabled="true"
            android:exported="false"
            android:label="LocationLoggerService" />
    </application>

</manifest> 
```

# c++ - C++11 相当于 boost shared_mutex

> ID：14306797
> 
> 赞同：56
> 
> 时间：2013-01-13T18:36:32.163
> 
> 标签：c++, boost, c++11, mutex

.是否有 C++11 等价物`boost::shared_mutex`？或者在 C++11 中处理多读/单写情况的另一种解决方案？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-01-13T19:12:49.640

我尝试过但未能`shared_mutex`进入 C++11。它已被提议用于未来的标准。建议在[这里](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3427.html)。

**编辑**： C++14[接受](http://isocpp.org/blog/2013/04/n3659-shared-locking)了修订版 (N3659) 。

这是一个实现：

[http://howardhinnant.github.io/shared_mutex](http://howardhinnant.github.io/shared_mutex)

[http://howardhinnant.github.io/shared_mutex.cpp](http://howardhinnant.github.io/shared_mutex.cpp)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-13T19:12:17.117

很简单……没有。[读写](https://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock)锁没有标准的 C++ 实现。

但是，您有几个选择。

1.  您只能使用自己的设备来制作自己的读写器锁。
2.  使用您提到的特定于平台的实现，例如[Win32's](http://msdn.microsoft.com/en-us/library/windows/desktop/aa904937%28v=vs.85%29.aspx)、[POSIX's](https://docs.oracle.com/cd/E19455-01/806-5257/6je9h032u/index.html)或[Boost's 。](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/synchronization.html#thread.synchronization.mutex_types.shared_mutex)
3.  根本不要使用——使用C++11 中已经存在的[互斥锁。](http://en.cppreference.com/w/cpp/thread/mutex)

使用*#1*并实现自己的任务是一项可怕的任务，如果你做的不对，你的代码可能会出现竞争条件。有一个[参考实现](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2406.html#shared_mutex)可能会使工作更容易一些。

如果您想要独立于平台的代码，或者不想在代码中包含任何额外的库来实现像读写器锁这样简单的东西，您可以将*#2*扔出窗口。

而且，*#3*有一些大多数人没有意识到的警告：使用读写锁通常性能较差，并且与使用简单互斥锁的等效实现相比，使用的代码更难理解。这是因为必须在读写锁实现的幕后进行额外的簿记。

* * *

我只能向您展示您的选择，实际上由您来衡量每种选择的成本和收益并选择最有效的选择。

* * *

**编辑：** C++17 现在有一种[`shared_mutex`](http://en.cppreference.com/w/cpp/thread/shared_mutex)类型，用于具有多个并发读取器的好处超过其`shared_mutex`本身的性能成本的情况。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-08-09T01:15:47.417

`boost::shared_mutex`不，在 C++11中没有等效的 for 。

但是，C++14 或更高版本支持读/写锁：

*   添加了 C++14[`std::shared_timed_mutex`](http://en.cppreference.com/w/cpp/thread/shared_timed_mutex)
*   添加了 C++17[`std::shared_mutex`](http://en.cppreference.com/w/cpp/thread/shared_mutex)

不同之处在于`std::shared_timed_mutex`增加了额外的计时操作。它实现了[SharedTimedMutex 概念](http://en.cppreference.com/w/cpp/concept/SharedTimedMutex)，它是由实现的更简单的[TimedMutex 概念](http://en.cppreference.com/w/cpp/concept/TimedMutex)`std::shared_mutex`的扩展。

* * *

请记住，为读/写互斥锁获取锁比获取普通的[`std::mutex`](http://en.cppreference.com/w/cpp/thread/mutex). 因此，如果您有频繁但短暂的读取操作，读/写互斥锁不会提高性能。它更适合读取操作频繁且昂贵的场景。引用[安东尼威廉姆斯的帖子](http://permalink.gmane.org/gmane.comp.lib.boost.devel/211180)：

> 锁定 shared_mutex 的成本高于锁定普通 std::mutex 的成本，即使对于读取线程也是如此。这是功能的必要部分 --- shared_mutex 的可能状态比互斥锁多，代码必须正确处理它们。此成本来自对象的大小（在您的实现和我的 POSIX 实现中都包括普通互斥锁和条件变量），以及锁定和解锁操作的性能。
> 
> 此外，shared_mutex 是一个争论点，因此不可扩展。锁定 shared_mutex 必然会修改 mutex 的状态，即使对于读锁也是如此。因此，必须将保持 shared_mutex 状态的高速缓存行传输到正在执行锁定或解锁操作的处理器。
> 
> If you have a lot of threads performing frequent, short read operations, then on a multiprocessor system this can lead to a lot of cache ping-pong, which will considerably impact the performance of the system. In this case, you may as well adopt the simpler design of just using a plain mutex, as the readers are essentially serialized anyway.
> 
> If the reads are not frequent, then there is no contention, so you don't need to worry about concurrent readers, and a plain mutex will suffice for that scenario anyway.
> 
> If the read operations are time consuming, then the consequence of this contention is less visible, since it is dwarfed by the time spent whilst holding the read lock. However, performing time consuming operations whilst holding a lock is a design smell.
> 
> In the vast majority of cases, I think that there are better alternatives to a shared_mutex. These may be a plain mutex, the atomic support of shared_ptr, the use of a carefully constructed concurrent container, or something else, depending on context.

# php - 从对象到人类可读文本

> ID：14306807
> 
> 赞同：-2
> 
> 时间：2013-01-13T18:37:13.327
> 
> 标签：php, arrays, string, object, human-readable

我正在研究一个将对象转换为字符串的小函数。如果对象具有作为数组的值，这很容易。但我希望这个函数能够工作，即使我的对象或数组有一些值作为另一个对象或数组。我把它做得很粗糙，所以请专家帮忙，让它对每个人都很整洁。

我的功能：

```
function makeString($array)
{
    $outval = "";  
    foreach($array as $key=>$value) {
        if (is_object($value)) {
            $arr = array();
            $arr = get_object_vars($value);

            foreach($arr as $key1=>$value1){
                if(is_array($value1)) { 
                    $outval .= "\t\t$key1\n"; 
                    $outval .= makeString($value1);
                }  
                else {
                    $outval .= "\t$key1: $value1\n";
                } 

            }
        }
        if(is_array($value)) { 
            $outval .= "\t$key\n"; 
            $outval .= makeString($value);
        }  
        else {
            $outval .= "$key: $value\n";
        }  
    } 
    return $outval;  
} 
```

这部分在我的函数中重复出现：

```
...
    if (is_object($value)) {
        $arr = array();
        $arr = get_object_vars($value);

        foreach($arr as $key1=>$value1){
            if(is_array($value1)) { 
                $outval .= "\t\t$key1\n"; 
                $outval .= makeString($value1);
            }  
            else {
                $outval .= "\t$key1: $value1\n";
            } 

        }
    }
... 
```

如果这里的 $value1 也是一个对象呢？即使我的对象在主对象中有许多其他对象或数组，我应该怎么做才能使这个函数工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:41:09.440

您的函数存在一个缺陷，该缺陷来自您的一个假设：该函数将传递一个数组。但是，正如您所发现的，这并不能保证。

因此，设计这样一个函数的更好方法是**不对**输入做任何假设，并像这样重构你的函数：

```
function makeString( $value) {
    if( is_object( $value)) { }
    else if( is_array( $value)) { }
    else if( is_string( $value) || is_numeric( $value)) { }
    else { } // Resource, etc.
} 
```

# import - 使用终端添加新的数据库 mysql 客户端

> ID：14306816
> 
> 赞同：0
> 
> 时间：2013-01-13T18:37:34.807
> 
> 标签：import, terminal, mysql

我正在学习 SQL。我目前在 Mac 上使用带有终端的 mysql 客户端。我已经从 mysql.com 下载了“world.sql”文件，以便使用和操作它。该文件目前在我的桌面上 /Users/myname/Desktop/world.sql

我创建了一个名为“world”的新数据库。这个数据库是空的。

我想将下载的 world.sql 文件添加到这个数据库中。以下是世界 .sql 文件打开时的样子：

```
-- MySQL dump 10.13  Distrib 5.1.51, for pc-linux-gnu (i686)
--
-- Host: 127.0.0.1    Database: world
-- ------------------------------------------------------
-- Server version   5.1.51-debug-log

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES latin1 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `City`
--

DROP TABLE IF EXISTS `City`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `City` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `Name` char(35) NOT NULL DEFAULT '',
  `CountryCode` char(3) NOT NULL DEFAULT '',
  `District` char(20) NOT NULL DEFAULT '',
  `Population` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`ID`)
) ENGINE=MyISAM AUTO_INCREMENT=4080 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `City`
--
-- ORDER BY:  `ID`

INSERT INTO `City` VALUES (1,'Kabul','AFG','Kabol',1780000);
INSERT INTO `City` VALUES (2,'Qandahar','AFG','Qandahar',237500);
INSERT INTO `City` VALUES (3,'Herat','AFG','Herat',186800);
INSERT INTO `City` VALUES (4,'Mazar-e-Sharif','AFG','Balkh',127800);
INSERT INTO `City` VALUES (5,'Amsterdam','NLD','Noord-Holland',731200); 
```

我已经包括了前几条记录。

如何将此文件添加到空的“世界”数据库中？我需要先在数据库中创建表吗？鉴于文件当前在我的桌面上，我需要使用什么命令将其添加到“世界”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:42:29.960

无需创建表：`CREATE TABLE`语句已包含在转储中。

使用工作`mysql`客户端，只需使用输入重定向使其读取转储并填充数据库：

```
mysql world <world.sql 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T18:52:42.683

要将转储文件中的数据添加到数据库中，请执行

```
mysql -u username -p -h localhost world < world.sql 
```

它的作用是告诉 mysql 客户端使用数据库“world”执行文件的内容。

文件 world.sql 包含 mysql 查询的集合，这些查询创建表“City”（如果它已经存在，则首先将其删除），然后将 5 行数据插入该表中。

# zend-framework - Ubuntu 上的 Zend 配置

> ID：14306817
> 
> 赞同：0
> 
> 时间：2013-01-13T18:37:42.067
> 
> 标签：zend-framework, ubuntu

我对 zend 和 Ubuntu 也很陌生。

虽然我已经在我的 ubuntu 系统上配置了 Zend。但问题是在每一组我都必须将我的 Zend 库复制到我的项目/库/.. 否则会出现 'require_once(): Failed opening required 'Zend/Application.php' 错误。

每次我的 Zend 库都需要复制到我的项目/库位置吗？我不能从我的 /opt/Zend/library/Zend 中全局使用它，我将 Zend 库文件夹放在那里。我需要进行哪些更改才能在所有项目中全局使用它。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:56:39.397

您可以将 Zend Framework 源代码放在 linux 系统上的任何文件夹中，然后只需将 _source_dir_/library/Zend 的符号链接到任何项目的 library/Zend。

如果需要，您也可以通过这种方式在不同的 ZF 版本（例如 1.12.x、1.11.x）之间轻松切换。

```
ln -s _SOURCE_DIR_/library/Zend _TARGET_DIR_/library/Zend 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:35:48.727

Linux 用户的一种更简单的方法。输入终端

```
sudo apt-get install zend-framework 
```

您需要从文件 /etc/php5/apache2/conf.d/zend-framework.ini 中删除第一行的注释

```
;include_path=${include_path} ":/usr/share/php/libzend-framework-php" 
```

只需从一开始就删除这个分号（;）。

# php - PHP preg-match-all 捕获

> ID：14306819
> 
> 赞同：0
> 
> 时间：2013-01-13T18:37:48.477
> 
> 标签：php, regex, preg-match-all

我想用 PHP 中的 preg_match_all 在他们自己的组中捕获每一个：

1.  章、节或页
2.  指定章、节或页的编号（或字母，如果有的话）。如果它们之间有一个空格，则应考虑到
3.  单词“和”、“或”

请记住，我想忽略所有书名，并且字符串中的项目数可能是动态的，正则表达式应该适用于以下所有示例：

1.  Ch1 和 Sect2b
2.  Ch 4 x 不需要的标题和 Sect 5y 不需要的标题和 Sect6 z 和 Ch7 或 Ch8

到目前为止，这是我设法提出的：

```
 $str = 'Ch 1 a unwantedtitle and Sect 2b unwanted title and Pg3';
    preg_match_all ('/([a-z]+)(?=\d|\d\s)\s*(\d*)\s*(?<=\d|\d\s)([a-z]?).*?(and|or)?/i', $str, $matches);

    Array
    (
        [0] => Array
            (
                [0] => Pg3
            )

        [1] => Array
            (
                [0] => Pg
            )

        [2] => Array
            (
                [0] => 3
            )

        [3] => Array
            (
                [0] => 
            )

        [4] => Array
            (
                [0] => 
            )

    ) 
```

预期的结果应该是：

```
 Array
    (
        [0] => Array
            (
                [0] => Ch 1 a and 
                [1] => Sect 2b and 
                [2] => Pg3
            )

        [1] => Array
            (
                [0] => Ch
                [1] => Sect
                [2] => Pg
            )

        [2] => Array
            (
                [0] => 1
                [1] => 2
                [2] => 3
            )

        [3] => Array
            (
                [0] => a
                [1] => b
                [2] => 
            )

        [4] => Array
            (
                [0] => and
                [1] => and
                [2] => 
            )

    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:07:26.203

我就是这样做的。

```
$arr = array(
    'Ch1 and Sect2b',
    'Ch 1 a unwantedtitle and Sect 2b unwanted title and Pg3',
    'Ch 4 x unwantedtitle and Sect 5y unwanted title and' .
        ' Sect6 z and Ch7 or Ch8a',
    'Assume this is ch1a and ch 2 or ch seCt 5c.' .
        ' Then SECT or chA pg22a and pg 13 andor'
);

foreach ($arr as $a) {
    var_dump($a);
    preg_match_all(
    '~
        \b(?P<word>ch|sect|(pg))
        \s*(?P<number>\d+)
        (?(2)\b|
            \s*
            (?P<letter>(?!(?<=\s)(?:and|or)\b)[a-z]+)?
            \s*
            (?:(?<=\s)(?P<cond>and|or)\b)?
        )
    ~xi'
    ,$a,$m);
    foreach ($m as $k => $v) {
        if (is_numeric($k) && $k !== 0) unset($m[$k]);
        // this is for 'beautifying' the result array
        // note that $m[0] will still return whole matches
    }
    print_r($m);
} 
```

我不得不`pg`变成一个捕获组，因为我需要为此明确编写一个条件，也就是说，它可以附加一个数字（中间有或没有空格），但考虑到页面指示符不会，它不能附加任何字母有一个像“pg23a”这样的字母。

这就是为什么我选择命名每个组并通过代码中的内部 foreach 循环“美化”结果。否则，如果您选择使用数字索引（而不是命名索引），您将需要跳过每个`$m[2]`.

为了显示一个例子，这里是最后一项的输出`$arr`。

```
Array
(
    [0] => Array
        (
            [0] => ch1a and
            [1] => ch 2 or
            [2] => seCt 5c
            [3] => pg 13
        )

    [word] => Array
        (
            [0] => ch
            [1] => ch
            [2] => seCt
            [3] => pg
        )

    [number] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 5
            [3] => 13
        )

    [letter] => Array
        (
            [0] => a
            [1] => 
            [2] => c
            [3] => 
        )

    [cond] => Array
        (
            [0] => and
            [1] => or
            [2] => 
            [3] => 
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:23:57.400

这是我能得到的最接近的：

```
$str = 'Ch 1 a unwantedtitle and Sect 2b unwanted title and Pg3';
preg_match_all ('/((Ch|Sect|Pg)\s?(\d+)\s?(\w?))(.*?(and|or))?/i', $str, $matches);

Array
(
    [0] => Array
        (
            [0] => Ch 1 a unwantedtitle and
            [1] => Sect 2b unwanted title and
            [2] => Pg3
        )

    [1] => Array
        (
            [0] => Ch 1 a
            [1] => Sect 2b
            [2] => Pg3
        )

    [2] => Array
        (
            [0] => Ch
            [1] => Sect
            [2] => Pg
        )

    [3] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 3
        )

    [4] => Array
        (
            [0] => a
            [1] => b
            [2] => 
        )

    [5] => Array
        (
            [0] =>  unwantedtitle and
            [1] =>  unwanted title and
            [2] => 
        )

    [6] => Array
        (
            [0] => and
            [1] => and
            [2] => 
        )

) 
```

# android - 如何在不使用 TabHost 的情况下从按钮单击更改 ABS 选项卡？

> ID：14306820
> 
> 赞同：1
> 
> 时间：2013-01-13T18:37:54.057
> 
> 标签：android, android-fragments, actionbarsherlock, android-tabs

我开始了，这是我的第一篇文章。任何帮助将不胜感激！

我已经成功地使用 ABS 实现了选项卡。我想更改选项卡并通过单击另一个选项卡中的按钮重新加载片段活动。从搜索帖子看来，每个人都使用 TabHost 完成了此操作。没有 TabHost 有没有办法做到这一点？

请看我想做的图表图片：http: [//i.imgur.com/wwDBj.png](http://i.imgur.com/wwDBj.png)

请参阅下面的 MainActivity 代码：

```
public class MainActivity extends SherlockFragmentActivity {

private int tabSelected = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

            getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

            getSupportActionBar().addTab(
                    getTab(new TabListener<FragmenOne>(this, FragmenOne.class
                            .getName(), FragmenOne.class), "TabOne"));
            getSupportActionBar().addTab(
                    getTab(new TabListener<FragmenTwo>(this, FragmenTwo.class
                            .getName(), FragmenTwo.class), "TabTwo"));
            getSupportActionBar().addTab(
                    getTab(new TabListener<FragmenThree>(this, FragmenThree.class
                            .getName(), FragmenThree.class), "TabThree"));
}

private Tab getTab(TabListener listener, String title) {
    ActionBar.Tab tab = getSupportActionBar().newTab();
    tab.setTabListener(listener);
    tab.setText(title);
    return tab;
}

public class TabListener<T extends Fragment> implements
ActionBar.TabListener {
    private final SherlockFragmentActivity mActivity;
    private final String mTag;
    private final Class<T> mClass;
    private final Bundle mArgs;
    public Fragment mFragment;

    public TabListener(SherlockFragmentActivity activity, String tag,
            Class<T> clz) {
        this(activity, tag, clz, null);
    }

    public TabListener(SherlockFragmentActivity activity, String tag,
            Class<T> clz, Bundle args) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
        mArgs = args;

        mFragment = mActivity.getSupportFragmentManager()
                .findFragmentByTag(tag);
        if (mFragment != null && !mFragment.isDetached()) {
            FragmentTransaction ft = mActivity.getSupportFragmentManager()
                    .beginTransaction();
            ft.detach(mFragment);
            ft.commit();
        }

    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {

                        if(tab.getPosition()==0)
                        {
                            tabSelected = 0;
                            FragmenOne frag = new FragmenOne();
                            ft.replace(android.R.id.content, frag);     
                        }
                        else if(tab.getPosition()==1)
                        {
                            tabSelected = 1;
                            FragmenTwo frag = new FragmenTwo();
                            items = 1;
                            invalidateOptionsMenu();
                            ft.replace(android.R.id.content, frag);
                        }
                        else if(tab.getPosition()==2)
                        {
                            tabSelected = 2;
                            FragmenThree frag = new FragmenThree();
                            ft.replace(android.R.id.content, frag);
                        }

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            ft.detach(mFragment);
            items = 0;
            invalidateOptionsMenu();
        }

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }
}

public void setCurrentItem() {

    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    FragmenTwo frag = new FragmenTwo();
    ft.replace(android.R.id.content, frag);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    ft.commit();

} 
```

这是来自其他活动的代码，例如，我希望单击按钮以加载 tab2

```
public class TabThree extends Activity  implements OnItemSelectedListener {

// Add button
Button btnAdd;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabthree);

    // add button
    btnAdd = (Button) findViewById(R.id.button);

    btnAdd.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

        //What to write here??????

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:58:47.157

尝试这种方式这是您应该使用的最佳方法

**第一步：**像这样在类中创建**接口。**`TabThree`

```
// The listener we are to notify when a Button is clicked
OnNotifyButtonClickedListener mOnNotifyButtonClickedListener = null;

/**
 * Represents a listener that will be notified of tab selections.
 */
public interface OnNotifyButtonClickedListener {

    public void OnNotifyButtonClicked();
}
/**
 * Sets the listener that should be notified of tab selection events.
 * 
 * @param listener
 *            the listener to notify.
 */
public void setOnNotifyButtonClickedListener(
        OnNotifyButtonClickedListener listener) {
    mOnNotifyButtonClickedListener = listener;
} 
```

**第二步：**在`MainActivity`类中实现。

```
public class MainActivity extends SherlockFragmentActivity
        implements
        TabThree.OnNotifyButtonClickedListener{
} 
```

**第三步：**点击你的 btnAdd 按钮`TabThree Class`

```
btnAdd = (Button) findViewById(R.id.button);

btnAdd.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View arg0) {

       mOnNotifyButtonClickedListener.OnNotifyButtonClicked();

    }
}); 
```

**第四步：**使用您的代码并更改您的标签`TabThree Class`

```
@Override
    public void OnNotifyButtonClicked() {       

    // Put your tab selection code here.

    } 
```

& 最后一件事不要忘记注册界面 Like

```
 FragmenThree mFragment= new FragmenThree();
    mFragment.setOnNotifyButtonClickedListener(this); 
```

**编辑：**在您的情况下以这种方式注册

```
 mFragment = mActivity.getSupportFragmentManager()
                .findFragmentByTag(tag);
        if (mFragment != null && !mFragment.isDetached()) {

            mFragment.setOnNotifyButtonClickedListener(this);
            FragmentTransaction ft = mActivity.getSupportFragmentManager()
                    .beginTransaction();
            ft.detach(mFragment);
            ft.commit();
        } 
```

# objective-c - 为什么我可以在 NSWindowController 中实现 NSDraggingDestination 方法？

> ID：14306821
> 
> 赞同：1
> 
> 时间：2013-01-13T18:37:58.090
> 
> 标签：objective-c, cocoa, drag-and-drop

我正在非 C 环境中使用 Cocoa 的拖放 API。我将不得不使用 objc/runtime.h 函数，因此我需要了解我必须在哪里注入必要的方法。

现在，SDK 文档说首先在 NSView 或 NSWindow 对象上调用 registerForDraggedTypes。它进一步解释了这两个类都实现了 NSDraggingDestination 协议的存根，然后这些存根方法需要被覆盖（至少 draggingEntered: 和 performDragOperation: 需要；其余的都是可选的）。

到现在为止还挺好。

但是，我发现我也可以在窗口的控制器中实现这些方法，即在一个 NSWindowController 类型的类中。例如，我使用 Apple 的“DemoMonkey”示例执行此操作，其中我在其 DisplayController（它是一个 NSWindowController）中实现了所需的调用，然后在“self.window”上调用了 registerForDraggedTypes。

这怎么行？

我的意思是，在这种情况下，接收到 registerForDraggedTypes 调用的对象与控制器有什么关系，知道它必须向它询问这些拖动回调吗？它在哪里记录了这种方式？

我想知道这是否与 NSWindowController 是 NSResponder 的事实有关。事实上，NSDraggingDestination 调用是否贯穿响应者链？（作为记录：我还尝试创建 NSResponder 的子类，在那里而不是在控制器类中实现回调，创建它的实例并用它调用“self.window makeFirstResponder：”，但这并没有导致在窗口上拖动数据时调用的回调。）

任何人都可以澄清这种行为，并可能解释这个事实记录在哪里（或者这只是未记录的行为，因此不应该依赖？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T09:29:31.320

发生这种情况是因为您发送`registerForDraggedTypes:`到窗口并且 NSWindowController 是 NSWindow 的委托。

这在“[拖放编程主题](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/DragandDrop/Concepts/dragdestination.html#//apple_ref/doc/uid/20000977-BAJBJFBG)”中有提到：

> 尽管 NSDraggingDestination 被声明为一个非正式协议，但您为采用该协议而创建的 NSWindow 和 NSView 子类只需要实现那些相关的方法。（NSWindow 和 NSView 类为所有方法提供私有实现。）窗口对象或其委托都可以实现这些方法；但是，如果两个地方都有实现，则委托的实现优先。

以及 NSWindow 的[registerForDraggedTypes:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/registerForDraggedTypes%3a)的文档：

> 为拖动类型注册 NSWindow 对象会自动使其成为拖动会话的候选目标对象。NSWindow 为 NSDraggingDestination 协议中的许多方法提供了默认实现。如果委托响应消息的选择器，则默认实现将每条消息转发给委托。以这种方式转发的消息有draggingEntered:、draggingUpdated:、draggingExited:、prepareForDragOperation:、performDragOperation:、consumerDragOperation:。

如果您想实现“drop view”之类的东西并调用`registerForDraggedTypes:`NSView，则不会发生这种情况。然后，您需要自己将所有消息转发给控制器。无论哪种情况，我认为控制器无论如何都是更适合拖放处理代码的地方。

# amazon-ec2 - 如何通过 AWS EC2 重启让 uwsgi 容器重启

> ID：14306822
> 
> 赞同：0
> 
> 时间：2013-01-13T18:38:00.160
> 
> 标签：amazon-ec2, centos, uwsgi

我在我的 CentOS EC2 实例上安装了 nginx 和 uwsgi。

当我从 AWS 控制面板重新启动机器时，Nginx 成功重新启动。

Uwsgi 没有。

我必须登录并使用“sudo /etc/init.d/uwsgi start”重新启动它，然后一切都很好。然后我当然可以注销，因为它作为服务运行。

必须登录才能完成重新启动过程显然不是最理想的。

但我认为我已经正确完成了配置。

当我执行 chkconfig 时，我看到：

```
uwsgi           0:off   1:off   2:on    3:on    4:on    5:on    6:off 
```

如果我查看 /etc/init.d/uwsgi 中的文件，文件顶部会显示：

```
#!/bin/bash
# uwsgi - Use uwsgi to run python and wsgi web apps.
#
# chkconfig: 2345 85 15
# description: Use uwsgi to run python and wsgi web apps.
# processname: uwsgi 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:17:04.407

使用[Supervisor 控制 uwsgi](https://gist.github.com/1047615)一般是推荐的解决方案。

# ruby-on-rails - 为什么在 Twitter API 100 用户限制内的调用中出现“查询中指定的术语过多”？

> ID：14306827
> 
> 赞同：0
> 
> 时间：2013-01-13T18:38:14.113
> 
> 标签：ruby-on-rails, twitter, twitter-gem

我正在使用[list/members/create_all](https://dev.twitter.com/docs/api/1.1/post/lists/members/create_all)和[list/members/destroy_all](https://dev.twitter.com/docs/api/1.1/post/lists/members/destroy_all)两者都声称每次通话限制为 100 个用户。我将呼叫限制为 90 个用户，但我仍然间歇性地收到`Too many terms specified in query`错误……当我将呼叫限制为 40 个或更少的用户时，我什至会间歇性地收到此错误。

它似乎仅适用于我代表调用的某些用户：我可以在 90 个用户的限制下迭代一些用户，但我迭代的一些用户将出错，`Too many terms specified in query`除非我严格限制我的调用（例如，一次 10 个用户）......但是这种严重的限制只会带来一个不同的问题 - 当我尝试为用户拨打这么多小电话时，我遇到了速率限制。

我正在使用 迭代我的数据库中的每个用户`User.all.each do |u|`，并且我正在为该块中的每个用户创建与 Twitter 的连接：

```
 client = Twitter::Client.new(
    :consumer_key => TWITTER_CONSUMER_KEY,
    :consumer_secret => TWITTER_CONSUMER_SECRET,
    :oauth_token => u.twitter_token,
    :oauth_token_secret => u.twitter_secret
  ) 
```

这是我用来从列表中删除用户的代码：

```
 removing_from_list.each_slice(90) do |remove_ids|
    client.list_remove_members(list_id, remove_ids)
    sleep 2
  end 
```

并且此代码将用户添加到列表中：

```
 adding_to_list.each_slice(90) do |adding_ids|
    client.list_add_members(list_id, adding_ids)
    sleep 2
  end 
```

我在使用 Twitter gem 以及直接使用 Rested（Mac REST 客户端）访问 Twitter API 时都遇到了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:34:09.040

我还在[REST API v1.1 Developer Discussions](https://dev.twitter.com/discussions/14045)中发布了这个问题，在那里我收到了关于`list_add_members`我的问题部分的建议。该建议是为了确保列表不超过 500 个成员，并且用户没有超过 20 个列表。鉴于我的发现，我不确定它有多相关，但这当然是个好建议。

如果我遇到错误，我解决此问题的方法是删除并重新创建列表本身：

```
 removing_from_list.each_slice(99) do |remove_ids|
    begin
      client.list_remove_members(list_id, remove_ids)
      sleep 2
    rescue => error
      if error == "Too many terms specified in query"
        client.list_destroy(list_id)
        client.list_create('ListName', :description => 'List Description')
        list_id = client.list('ListName').id
      end
    end
  end 
```

完成此操作后，列表按预期运行。此外，我不必多次删除/重新创建列表。因此，我相当有信心声明它要么是列表本身的问题，要么是在列表被删除/重新创建之前碰巧驻留在列表中的用户。

# macos - MAC：如何合并文件夹，以便我们仅在源文件比目标文件新时覆盖？

> ID：14306832
> 
> 赞同：5
> 
> 时间：2013-01-13T18:38:29.080
> 
> 标签：macos, file, bash, batch-processing, overwrite

这似乎是非常基本的命令。但是，即使经过一个小时的搜索解决方案，我仍然找不到有效的方法。

所以我有两个大文件夹（有很多文件和很多子文件夹，超级备份）。我想将这两个文件夹合并到一个仅包含较新文件的文件夹中。所以我正在寻找一种方法来覆盖文件如果只有源文件比目标文件新，或者当目标文件不存在时。

我正在运行 Mac 版本 10.7.4。我愿意安装新的应用程序和/或使用终端/bash 命令。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-13T18:53:46.190

在 Gnu 系统中，仅当 SOURCE 文件比 DEST 文件新或目标文件丢失时，才使用`mv -u SOURCE DEST`或移动或复制。`cp -u SOURCE DEST`

请注意，在 OS X 中，[mv](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/mv.1.html)和[cp](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/cp.1.html#//apple_ref/doc/man/1/cp)不支持该`-u`选项。但是， [rsync](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/rsync.1.html)有一个`-u`选项，它在 OS X 上受支持。例如：

```
rsync -aru SOURCE/ DEST 
```

在将临时目录应用到大而重要的目录之前，在临时目录中运行一些测试，因为（IMO）rsync 对于目录名称是否以`/`. Linux手册页的一部分说：

> 源上的尾部斜杠会更改此行为，以避免在目标上创建额外的目录级别。您可以将源上的尾随 / 视为“复制此目录的内容”而不是“按名称复制目录”，...

# hash - 为整数对集合找到合适的整数表示

> ID：14306839
> 
> 赞同：1
> 
> 时间：2013-01-13T18:39:28.760
> 
> 标签：hash

对于我正在进行的项目，我需要一种方法来计算具有 type 的数据结构的唯一整数表示`[(int, int)]`，即（非负）整数对的集合。要求是，虽然对中的顺序很重要，但集合本身是顺序不敏感的。经过一番搜索，我开始相信一个合适的解决方案是使用 Cantor 配对函数和`xor`结果对每一对进行编码。

范围将相当小，例如对中的第一个整数为 1-700，第二个整数为 1-10，列表将包含大约 5-15 个这些对。

如果您认为有更好的解决方案，请告诉我，但回答“是的，这会奏效”也会很棒:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:54:20.613

*[这个答案假设当你说“独特”时，你真的是那个意思；碰撞是不可接受的。]*

如果目标是以某种方式将任意大小的整数（对）集合唯一地映射到单个（大小合理）的整数上，那么答案基本上是“不可能的”。这可以通过诉诸[*鸽巢原理*](http://en.wikipedia.org/wiki/Pigeonhole_principle)很容易地证明。

如果您的集合的大小非常有限，并且输入整数的范围非常有限，那么您也许可以做一些事情。但在一般情况下，我建议为您的顶级问题寻找不同的解决方案。

* * *

**更新**

作为一个工作示例，让我们考虑您添加到问题中的参数。700 * 10 = 7000，因此您需要大约 13 位来唯一地表示每个可能的对。最多 15 对，总共需要**195 位**。

现在，如果顺序无关紧要，那么理论上您可以删除 log2(15!) = 40 位。^(*所以理论上，你需要一个)**155 位** 的输出数据类型。这容易处理吗？

* * *

[*如何在实践中实现这一点是另一个问题... ;)]

# sql - 一次计算两个不同的子行条件

> ID：14306840
> 
> 赞同：1
> 
> 时间：2013-01-13T18:39:34.213
> 
> 标签：sql, sql-server, tsql

我有一张桌子`Request`和一张桌子`Search`。该`Request`表有一个 ID 列，它是`Search`RequestID 中的外键。`Search`同一个 RequestID可以有多行。状态中还有另一列`Search`，它可以是 Complete 或 Incomplete。我想要的是为每个 RequestID 返回的查询：

`RequestID`- `Count of Search rows with 'Complete'`-`Count of Search rows with 'Incomplete'`

这是可以用 SQL 轻松完成的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T18:42:07.340

尝试 ：

```
SELECT RequestId,
SUM(CASE WHEN Status = 'Complete' THEN 1 ELSE 0 END),
SUM(CASE WHEN Status = 'Incomplete' THEN 1 ELSE 0 END)
FROM Search
GROUP BY RequestId 
```

如果即使没有对此请求进行搜索，您也想列出每个 RequestId，您可以执行以下操作：

```
SELECT r.Id,
SUM(CASE WHEN s.Status = 'Complete' THEN 1 ELSE 0 END),
SUM(CASE WHEN s.Status = 'Incomplete' THEN 1 ELSE 0 END)
FROM Request r
LEFT JOIN Search s ON r.Id = s.RequestId
GROUP BY r.Id 
```

请参阅[SQLFiddle](http://sqlfiddle.com/#!6/663e5/1/0)

# jquery - 单击下一步，上一个按钮时停止 Bootstrap 轮播中的图像循环

> ID：14306841
> 
> 赞同：0
> 
> 时间：2013-01-13T18:39:35.553
> 
> 标签：jquery, twitter-bootstrap

我正在使用引导轮播。默认情况下启用循环图像。我已通过间隔禁用：false。

功能完美，但是当我单击上一个和下一个按钮从一个图像移动到另一个图像时，似乎又重新激活了循环。我不希望这种情况发生。在页面上加载了几个轮播。每个都携带一组来自数据库的图像。每个轮播都有一个唯一的 id 和 href 按钮，用于每次调用该轮播，因此每个轮播都是独立的。虽然它们都与类同名。

我尝试了这个解决方案，但它不起作用.. [Bootstrap JavaScript Carousel 不会停止循环](https://stackoverflow.com/questions/10521165/bootstrap-javascript-carousel-doesnt-stop-cycling)

你知道如何避免吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T17:20:03.527

```
$(function() {
$('.carousel').each(function(){
    $(this).carousel({
        interval: false
    });
}); 
```

});​</p>

来源：[Bootstrap JavaScript Carousel 不会停止循环](https://stackoverflow.com/questions/10521165/bootstrap-javascript-carousel-doesnt-stop-cycling)

# php - Kohana3 框架：MVC：从视图调用函数

> ID：14306845
> 
> 赞同：0
> 
> 时间：2013-01-13T18:40:13.003
> 
> 标签：php, foreach, scope, kohana-3

控制器传递`$results`给视图。视图有：

```
<?php foreach ($results as $result): ?>
<?php echo $result->time_start.' '.$result->time_finished;?>
<?php endforeach;?> 
```

另外，我想以格式显示每个 $result的差异（`$result->time_finished`减号）。如果 mm<10，则显示零，因此 63 秒显示为 00:01:03，而不是 0:1:3。`$result->time_start``hh:mm:ss`

我应该在视图中做所有这些工作人员吗？我相信使用函数是有意义的。我应该在模型中编写这个函数并从视图中调用它吗？

如果不是 foreach，我肯定会从控制器调用 fhe 函数并将正确的 hh:mm:ss 从控制器传递给视图。但是，在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:06:34.047

这是我要做的：我会编写一个静态函数来格式化您的日期（使用我自己的类或扩展 Kohana`Date`类）。我会直接在你的视图中使用这个函数：

```
<?php echo SomeClass::date_format($result->time_start, $result->time_finished) ?> 
```

为什么在视图中？因为该函数用于格式化，它实际上并没有返回不同的数据集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:37:25.207

如果您有一个需要在代码中多次使用的函数，那么 1\. 创建您自己的帮助程序或 2\. 扩展 Kohana 在 Date 帮助程序中的构建是有意义的。帮助器用于这种操作，而不是模型，如果代码变得复杂，也不是视图。

我不知道您使用的是 Kohana 3.2 还是 3.3，但它们之间的命名约定有些不同（因为实现了 3.3 PSR-0，这意味着大写的文件和类名），但这里是帮助者的 DOCS ：

[http://kohanaframework.org/3.2/guide/kohana/helpers](http://kohanaframework.org/3.2/guide/kohana/helpers)

[http://kohanaframework.org/3.3/guide/kohana/helpers](http://kohanaframework.org/3.3/guide/kohana/helpers)

并用于扩展现有类：

[http://kohanaframework.org/3.2/guide/kohana/files](http://kohanaframework.org/3.2/guide/kohana/files)

[http://kohanaframework.org/3.3/guide/kohana/files](http://kohanaframework.org/3.3/guide/kohana/files)

如果您使用 Kohana 3.2，我会提供答案：

解决方案 1：扩展 Kohana Date 类是有意义的。在 application/classes 中创建一个名为 date.php 的文件。该文件应如下所示：

```
class Date extends Kohana_Date {
  public static function some_function_to_convert($date1, $date2) { } ;
} 
```

在您看来，这样做：`Date::some_function_to_convert($date1, $date2);`

解决方案 2：在 application/classes/helper 目录中创建自己的助手。将其命名为 date_conversion.php。然后您的文件如下所示：

```
<?php defined('SYSPATH') or die('No direct script access.');

class helper_date_conversion {
  public static function some_function_to_convert($date1, $date2) { } ;
} 
```

在您看来，这样做：

```
helper_date_conversion::some_function_to_convert($date1, $date2); 
```

# objective-c - 数据选择器保存选择

> ID：14306846
> 
> 赞同：0
> 
> 时间：2013-01-13T18:40:41.117
> 
> 标签：objective-c, xcode

我有这个APP的问题。我需要保存一个 Datapicker 选择。

我有 2 个文本字段 1 个标签和 1 个数据选择器。文本字段中的“int”没关系。保存 Datapicker 选择的代码是什么？

```
#import "ViewController.h"
#import "ResultViewController.h"

 @interface ViewController ()

  @end

@implementation ViewController

@synthesize myLabel;

-(IBAction)calculate:(id)sender{

NSDate *past = _data.date ;
NSDate *now = [NSDate date];

NSCalendar *gregorianCalendar = [[NSCalendar alloc]
                                 initWithCalendarIdentifier:NSGregorianCalendar];
NSUInteger unitFlags = NSDayCalendarUnit;
NSDateComponents *components = [gregorianCalendar components:unitFlags
                                                    fromDate:past
                                                      toDate:now
                                                    options:0];
int z = [components day];
int a = ([_textField1.text intValue]);
int b = a*([_textField2.text intValue]);

int r = b * z / 20;

myLabel.text = [[NSString alloc] initWithFormat:@"%d", r];

}

- (void)viewDidLoad
{
[super viewDidLoad];

NSDate *past = _data.date ;
NSDate *now = [NSDate date];

NSCalendar *gregorianCalendar = [[NSCalendar alloc]
                                 initWithCalendarIdentifier:NSGregorianCalendar];
NSUInteger unitFlags = NSDayCalendarUnit;
NSDateComponents *components = [gregorianCalendar components:unitFlags
                                                    fromDate:past
                                                      toDate:now
                                                     options:0];
int z = [components day];
int a = ([_textField1.text intValue]);
int b = a*([_textField2.text intValue]);

int r = b * z / 20;

myLabel.text = [[NSString alloc] initWithFormat:@"%d", r];

self.textField1.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"key1"];
self.textField2.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"key2"];

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

if ([segue.identifier isEqualToString:@"detail"]) {

    ResultViewController* destVC = (ResultViewController*)segue.destinationViewController;

    destVC.myString = self.myLabel.text;

}
}

- (void)viewWillDisappear:(BOOL)animated {
[super viewWillDisappear:YES];

[[NSUserDefaults standardUserDefaults] setObject:self.textField1.text forKey:@"key1"];
[[NSUserDefaults standardUserDefaults] setObject:self.textField2.text forKey:@"key2"];

[[NSUserDefaults standardUserDefaults]synchronize];

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:46:13.733

NSDate 也是一个属性列表对象，所以可以用同样的方式存储：

```
[[NSUserDefaults standardUserDefaults] setObject:date forKey:@"YourKey"]; 
```

# scala - Scala 和 Java - 隐式参数和继承

> ID：14306847
> 
> 赞同：4
> 
> 时间：2013-01-13T18:40:51.547
> 
> 标签：scala, implicit

以下代码给出了错误：

```
package test

trait Base {
  def method:String
}

trait Trait extends Base {
  def method()(implicit i:String):String = { "2" }
}

object Object extends Trait {

} 
```

错误是**“无法创建对象，因为未定义类型 => String 的类 Base 中的方法方法”**

上述错误已通过以下代码修复

```
package test

trait Base {
  def method:String
}

trait Trait extends Base {
  def method:String = method()("String") // Over loading
  def method()(implicit i:String):String = { "2" }
}

object Object extends Trait {

} 
```

现在，当我按如下方式定义 Java 接口时，而不是 Scala 类：

```
// Java Code
package test;

public interface JBase {
  String method();
}

// Scala Code
package test

trait Trait extends JBase {
  def method:String = method()("10")
  def method()(implicit i:String):String = { "2" }
}

object Object extends Trait {

} 
```

我收到一个错误**“对重载定义的模糊引用，类型 () 的 trait Trait 中的方法方法（隐式 i: String）String 和类型 ()String 匹配参数类型 () 的 trait Trait 中的方法方法”**

这两种情况有什么区别使编译器表现不同？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T19:17:21.043

这是一个我认为清楚地显示正在发生的事情的例子：

```
object Test extends App {
    class A { def f(): String = "x" }
    class B extends A { override def f: String = "y" }
    class C { def f: String = "z" }

    println { (new A).f() } // OK
    println { (new B).f() } // OK
    println { (new C).f() } // FAILS
} 
```

*   `A`: 有括号，用括号调用，一切都好。
*   `B`：*没有*括号，但超类型*确实*有括号，所以还是不错的。这与您的情况相对应。
*   `C`: 没有括号，用括号调用，不好。

基本上，Java 方法总是被认为是“带括号的”，因此`Trait`' 的超类型有括号，因此在其中使用括号`method()("string")`不足以阐明您的意思是哪种方法。

* * *

**编辑**：老实说，我认为您最好重命名该方法。即使在没有歧义的情况下，这种行为也可能非常令人惊讶：

```
trait Trait {
    def method: String = method()("x")
    def method()(implicit i: String): String = i
}

val t = new Trait { }
implicit val s = "y"

println { t.method }
> "x"

println { t.method() }
> "y" 
```

此外，名称相同的事实并没有为您购买多态性方面的任何东西：只有非隐式方法覆盖`Base.method`- 这只是使名称相同的美学决定。

# python - 如何在 wxPython 中修改 TextCtrl 的宽度？

> ID：14306852
> 
> 赞同：5
> 
> 时间：2013-01-13T18:41:18.437
> 
> 标签：python, wxpython

我正在尝试创建一个具有默认高度但自定义宽度的文本控件。这是我当前的代码：

```
tc = wx.TextCtrl(self, -1)
tc.Size.SetWidth(300) 
```

文本控件的宽度保持不变。我也尝试`tc.Layout()`在更改宽度后调用但没有结果。我不想在类构造函数中输入自定义大小，因为我希望它使用默认高度。我也尝试过更详细，以防`tc.GetSize`返回对象的深层副本`Size`：

```
tc = wx.TextCtrl(self, -1, size=(300, 23))

tc_size = tc.Size
tc_size.SetWidth(300)

tc.Size = tc_size
tc.Layout() 
```

也无济于事。为什么我的代码不工作，我该如何让它工作？

* * *

^(在构造函数中设置大小是可行的，因此大小与问题无关。)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-13T18:43:43.357

我刚刚注意到我可以`(300, -1)`作为文本控件的大小传递：

```
wx.TextCtrl(self, -1, size=(300, -1)) 
```

这导致文本控件使用默认高度。这解决了我的问题，但从技术上讲并不能回答我的问题，所以我坚持要一个更好的答案。

* * *

编辑：这个答案加上下面的评论回答了我的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T19:51:54.693

您应该让 sizers 控制控件的大小，而不是显式设置它们。

```
import wx

class Frm(wx.Frame):
   def __init__(self, *args, **kwargs):
      super(Frm, self).__init__(*args, **kwargs)
      txt = wx.TextCtrl(self)
      s = wx.BoxSizer(wx.HORIZONTAL)
      s.Add(txt, 1)
      self.SetSizer(s)
      self.Layout()

app = wx.PySimpleApp()
frame = Frm(None)
frame.Show()
app.MainLoop() 
```

这可以让控件在您的代码的一般指导下相对于彼此进行布局。因此，例如，在 Mac 和 Windows 上运行相同的代码，仍然应该会产生一个不错的布局。

我意识到这并不能直接回答您的问题，而是想将您推向 sizers，以防您不知道它们。编写和维护你的 UI 布局需要大量的苦差事。

# javascript - 使用 jquery 将 xml 转换为对象

> ID：14306854
> 
> 赞同：0
> 
> 时间：2013-01-13T18:41:35.270
> 
> 标签：javascript, jquery, xml, object

我有一个这样的 xml 文件：（这是动态创建的 xml 文件，类别不是静态的）

```
<data>
    <step id="1">
        <category id="js"></category>
        <category id="css"></category>
        <category id="xml"></category>
    </step>
    <step id="2">
        <category id="js"></category>
        <category id="css"></category>
        <category id="xml"></category>
        <category id="php"></category>
        <category id="html"></category>
    </step>
    <step id="3">
        <category id="xml"></category>
        <category id="php"></category>
        <category id="html"></category>
    </step>
</data> 
```

我想将 xml 文件转换为 javascript 对象我用 jquery 做

```
$.get('data.xml', function(xml){
    var oXML = $(xml).find('data'),
        data = {};

    oXML.each(function(){
        var stepID = jQuery(this).attr('id');
        data[stepID] = {};

        jQuery(this).each(function(){
            var categoryID = jQuery(this).attr('id')
            data[stepID][categoryID] = 'is available';

        });
    });
}); 
```

结果看起来像这样

```
obj = {
1: {
    js: 'is available',
    css: 'is available',
    xml: 'is available'
},

2: {
    js: 'is available',
    css: 'is available',
    xml: 'is available',
    php: 'is available',
    html: 'is available'

},

3: {
    xml: 'is available',
    php: 'is available',
    html: 'is available'
}
} 
```

但我希望在所有步骤中都有所有类别。你知道我该怎么做吗？我想要这样的结果对象

```
obj = {
    1: {
        js: 'is available',
        css: 'is available',
        xml: 'is available',
        php: 'is not available',
        html: 'is not available'
    },

    2: {
        js: 'is available',
        css: 'is available',
        xml: 'is available',
        php: 'is available',
        html: 'is available'

    },

    3: {
        js: 'is not available',
        css: 'is not available',
        xml: 'is available',
        php: 'is available',
        html: 'is available'
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:47:57.863

收集所有类别，然后通过数据枚举并设置缺失的类别：

```
$.get('data.xml', function(xml){
    var oXML = $(xml).find('data'),
        data = {},
        categories = {};

    oXML.each(function(){
        var stepID = jQuery(this).attr('id');
        data[stepID] = {};
        jQuery(this).each(function(){
            var categoryID = jQuery(this).attr('id');
            if (!categories[categoryID]) {
                categories[categoryID] = true;
            }
            data[stepID][categoryID] = 'is available';
        });
    });
    $.each(data, function (key, value) {
        $.each(categories, function (key) {
            if (value[key] === undefined) {
                value[key] = 'is not available';
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:52:27.430

~~使用所有属性设置为“不可用”来启动您的对象。~~

添加后，您不知道自己拥有哪些类别，我建议您这样做

```
$.get('data.xml', function(xml){
    var oXML = $(xml).find('data'),
        data = {};

    // create a constructor for our object. We'll add the "not available" to the prototype later
    // I create it inside your request because I assume that the process of "remembering"
    // which properties exists should not be global but just for this request
    function DataObject () {};

    oXML.each(function(){
        var stepID = jQuery(this).attr('id');
        data[stepID] = new DataObject; // use an instance of our DataObject

        jQuery(this).each(function(){
            var categoryID = jQuery(this).attr('id')
            data[stepID][categoryID] = 'is available';

            // now add this propertiy to our prototype
            // this will "add" them to all instances of DataObject
            DataObject.prototype[categoryID] = 'is not available';
        });
    });
}); 
```

要完全理解这一点，您必须了解原型的概念。每个对象都有一个`__proto__`属性。如果您访问`data[0].html`并且它在对象中**不可**用，则 Javascript 会检查哪些是`__proto__`对构造函数的引用`prototype`。因为你`'is not available`在原型中添加了你的结果`data[0].html`是`'is not available`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T19:01:37.967

您可以在构造对象后对其进行迭代以填充缺失的成员：

```
$.each(data, function (i, ival) {
    var member = ival;
    $.each(data, function (j, jval) {
        if (jval === member) return;
        $.each(jval, function (k, kval) {
            if (typeof (member[k]) === 'undefined') {
                member[k] = 'is not available';
            }
        });
    });
}); 
```

您的最终代码将如下所示：

```
$.get('data.xml', function(xml){
    var oXML = $(xml).find('data'),
        data = {};

    oXML.each(function(){
        var stepID = jQuery(this).attr('id');
        data[stepID] = {};

        jQuery(this).each(function(){
            var categoryID = jQuery(this).attr('id')
            data[stepID][categoryID] = 'is available';
        });
    });

    $.each(data, function (i, ival) {
        var member = ival;
        $.each(data, function (j, jval) {
            if (jval === member) return;
            $.each(jval, function (k, kval) {
                if (typeof (member[k]) === 'undefined') {
                    member[k] = 'is not available';
                }
            });
        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T19:01:08.607

解析数据时，在 xml 中存储所有可用类别的数组：

然后，一旦所有 xml 被解析，您将拥有所有可用类别的完整数组，循环主对象并查看每个元素是否包含每个类别属性：

```
var oXML = $(xml).find('step'),
        data = {},
    cats_array=[];

    oXML.each(function(){

        var stepID = jQuery(this).attr('id');      
        data[stepID] = {};
        jQuery(this).find('category').each(function(){                    
            var categoryID = jQuery(this).attr('id');
          /* add category to array if doesn't already exist*/
           if( $.inArray( categoryID, cats_array) ==-1){
           cats_array.push( categoryID);
        }
            data[stepID][categoryID] = 'is available';

        });
    });
/* all categories now in array, loop over main object and if category doesn't exist add it*/
$.each(data, function(){
    for( i=0;i< cats_array.length; i++){
        if( ! this[cats_array[i]] ){
           this[cats_array[i]] ="not available";
        }
     }

}) 
```

工作演示：http: [//jsfiddle.net/MYXNh/2/](http://jsfiddle.net/MYXNh/2/)

# ruby - Rails，类方法中的函数与实例方法中的函数

> ID：14306864
> 
> 赞同：0
> 
> 时间：2013-01-13T18:42:59.390
> 
> 标签：ruby, activerecord, ruby-on-rails-3.2

我正在使用 Ruby on Rails 制作社交网络应用程序，当我使用内部的 where 方法和 Micropost 模型中的类方法时，我看到了一个有趣的行为，它无需指定前面的类即可工作（例如“Micropost.where ()")

```
 class Micropost < ActiveRecord::Base
      attr_accessible :content
      belongs_to :user

      validates :user_id, presence: true
      validates :content, presence: true, length: { maximum: 255 }

      default_scope order: "microposts.created_at DESC"

      def self.from_users_followed_by(user)
        followed_user_ids = "SELECT followed_id FROM relationships
                             WHERE follower_id = :user_id"
        where("user_id IN (#{followed_user_ids}) OR user_id = :user_id", 
               user_id: user.id )
      end  
    end 
```

但是当我在下面这样的实例方法中使用它时，它需要知道模型的名称。

```
 class User < ActiveRecord::Base
      ...
      ...
      def friends()
        sql_direct_friends   = "SELECT friend_id FROM friendships
                                WHERE approved = :true_value AND user_id = :user_id"
        sql_indirect_friends = "SELECT user_id FROM friendships
                                WHERE approved = :true_value AND friend_id = :user_id"                       
        User.where("id IN (#{sql_direct_friends}) OR id IN (#{sql_indirect_friends})", user_id: id, true_value: true)
      end  
    end 
```

那么如果我使用“where”而不是“User.where”，那么我会收到如下错误：

```
 NoMethodError: undefined method `where' for #<User:0x00000004b908f8> 
```

为什么会这样？Friends() 方法中的 where 方法是否认为我将其用作当前对象（self.friends()）的实例方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T18:47:11.763

是的。在实例方法内部，`where`正在发送给 User 对象；但是，只有 User*类*知道如何响应`where`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T01:57:34.893

在 Ruby 中，方法调用总是发送到当前的`self`. 你甚至可以`self`在你的方法中打印，看看它会显示什么。

`self`将是里面的一个类，`def self.from_users_followed_by`并且是里面的一个类的实例`def friends`。

`self`毫无疑问，您的方法中的 a 无法识别消息“位置”（在 Ruby 中调用方法实际上意味着向对象发送消息）`friends()`。

# ruby-on-rails - 动态数据的数据库设计

> ID：14306865
> 
> 赞同：1
> 
> 时间：2013-01-13T18:43:05.080
> 
> 标签：ruby-on-rails, database, postgresql, database-design

我需要创建一个用于管理团队的数据库。我摔跤的两张桌子是见面桌和活动桌。

这是基本流程

团队 A 可以创建一个新的赛道比赛，该比赛将在比赛表中添加 1 行，其中包含比赛的元数据，例如日期、地点，它还必须包含一个事件列表。

Events 是一个包含大约 500 个可能的事件的表格，可以在会议期间进行竞争。诸如距离、事件类型、男性/女性、年龄等

我希望在生成会议期间，用户能够选择会议将有哪些事件。

因此，创建一个新的聚会，完整的元数据，并从所有可能的事件列表中选择（对于 Ex）30 个事件。

Soooo 我的问题是哪种表结构最能支持这一点。我正在考虑我的会议表中的一列，其中包含一系列事件。？但是有没有更好的方法来处理它。我正在使用 postgres 和 rails

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:50:50.233

[这听起来像是 Rails has_many :through 关联](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)的完美使用。你应该有一个`meet_events`连接表。该`meet_events`表中将有一个外键 (belongs_to)`meet_id`列，该列指向与其关联的会议，其中一个`event_id`列指向可用事件之一。您的`Meet`模型将使用`has_many :meet_events`and `has_many :events, :through => :meet_events`。这将允许您获取与此会议关联的事件对象。

该`MeetEvent`模型只有两个`belongs_to`. 一个用于`meet`，一个用于`event`。

这是一组简单的模型：

```
class Meet < ActiveRecord::Base
  has_many :meet_events
  has_many :events, :through => :meet_events
end

class Event < ActiveRecord::Base
  has_many :meet_events
  has_many :meets, :through => :meet_events
end

class MeetEvent < ActiveRecord::Base
  belongs_to :meet
  belongs_to :event
end 
```

这是一些数据及其建模的示例：

## 满足

```
id  |  name
------------------
1   |  Meet 1
2   |  Meet 2 
```

## 事件

```
id  |  name
------------------
1   |  Event 1
2   |  Event 2
3   |  Event 3 
```

## meet_events

```
id  |  meet_id  |  event_id
----------------------------
1   |  1        |  1
2   |  1        |  3
3   |  2        |  2
4   |  2        |  3 
```

这基本上是`Meet 1`具有`Event 1`和`Event 3`在其中的建模。`Meet 2`有`Event 2`和`Event 3`。这也为您提供了询问特定事件的好处`Event`。例如，调用事件 3 的`event.meets`时间`event`，它会告诉您两者`Meet 1`并`Meet 2`在其中包含该事件。

# c - 在c中打印出字符串数组的元素

> ID：14306867
> 
> 赞同：7
> 
> 时间：2013-01-13T18:43:06.217
> 
> 标签：c, arrays, cstring

我创建了一个函数，它接受一个指向 C-String 数组中第一个元素的指针。这是数组，以及我是如何制作它的：

```
char element1[60] = "ubunz";
char element2[60] = "uasdasffdnz";
char* array[10] = {element1,element2}; 
```

然后我创建了一个指向数组中第一个元素的指针：

```
char *pointertoarray = &array[0]; 
```

然后我将指针传递给我创建的函数：

```
void printoutarray(char *pointertoarray){
  int i = 0;
  while (i < 2){
    printf("\n Element is: %s \n", *pointertoarray);
    pointertoarray = pointertoarray + 1;
    i = i+1;
  }
} 
```

当我运行程序时，数组永远不会打印出来。

我以前在 C++ 中完成过这个程序，但我使用了 STL 字符串类型，并创建了一个指向字符串数组的指针。我认为我的问题在于我在 C 中创建字符串数组并创建指向它的指针的方式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T20:55:18.157

当使用 %s 调用 printf() 时，它或多或少会执行以下操作

```
for(i = 0; pointer[i] != '\0'; i++)
{
   printf("%c", pointer[i]);
} 
```

你想做的是像

```
for(i = 0; pointer[i] != '\0'; i++)
{
   printf("\n Element is %c", pointer[i]);
} 
```

当您引用数组中的特定元素时，您必须使用指针和索引，即在这种情况下指针 [0] 0 是索引，“指针”是指针。上面的 for 循环将在整个数组中一次移动一个索引，因为“i”是索引，并且“i”在循环的每次旋转结束时都会增加，并且循环将继续旋转，直到它到达终止 NULL 字符数组。

所以你可能想尝试一些类似的东西。

```
void printoutarray(char *pointertoarray)
{
  for(i = 0; i <= 2; i++)
  {
    printf("\n Element is: %s \n", pointertoarray[i]);
  }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-13T18:46:18.623

做这个：

```
char *pointertoarray = &array[0]; 
```

编译没有警告你的编译器？如果是这样，你的编译器坏了。请阅读它打印出来的错误和警告。

`&array[0]`是一个`char**`，不是一个`char*`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T18:45:43.403

去掉星号

```
printf("\n Element is: %s \n", pointertoarray); 
```

# eclipse - Eclipse-Juno 撤消/重做启用？

> ID：14306870
> 
> 赞同：4
> 
> 时间：2013-01-13T18:43:55.250
> 
> 标签：eclipse, eclipse-juno

快速提问，如何在 Eclipse-Juno 中启用撤消/重做？

我在用：

```
Eclipse for Mobile Developers
Juno Service Release 1
Build id: 20120920-0800 
```

即使只是在编辑器中输入一些随机文本，撤消/重做也是灰色的，并且键盘快捷键不起作用。如果没有撤消/重做，我将无法工作。（上帝只知道这些把我的屁股从火里拉了多少次。）

我能找到的所有撤消设置是：

Window->Preferences->General->Editors->Text Editors->Undo History size。

它的值是 200，我尝试将其更改为 1000。

我已经尝试过 Google 和 Stack Overflow。有一个类似的问题，但不是如何启用撤消/重做。这是 Eclipse 的全新安装。

是否有一个启用检查我错过了隐藏在我错过的这些选项屏幕中的某个地方？

我正在使用带有“经典”主题的 Java 透视图。

我的 java 版本报告

```
java version "1.7.0_10"
Java(TM) SE Runtime Environment (build 1.7.0_10-b18)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode) 
```

我错过了什么？？？

如果没有解决方案，并且这是一个错误（而且是一个非常糟糕的错误），我可以将我的旧 3.7 与上述 Java 版本一起使用吗？我正在学习 Java，所以我可以编写 Android 应用程序，但我还没有安装 SDK。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-23T06:59:30.407

首先道歉，我知道这个回复没有回答这个帖子的原始问题。

我在这里写这篇文章是因为当我搜索短语“ *eclipse juno redo shortcut* ”时，这个问题是谷歌上的第三个结果，所以，我认为这是一个回答其他问题的好地方。

因此，如果您正在寻找 eclipse Juno 重做功能的键盘快捷键：

试试`ctrl`++ `shift`_`Z`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-19T08:17:50.990

重新启动 Eclipse 为我解决了这个问题。在重新启动之前，Undo 和 Redo 都是灰色的，而 Ctrl-Z 没有做任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T03:38:36.373

在 Kepler 版本中，默认快捷键变为 ctrl + y。
您可以将其更改为ctril + shift + z。
我已将其改回ctril + shift + z。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-07T09:27:08.400

要更改重做快捷方式：Windows -> 首选项 -> 键 -> 搜索“重做”

# visual-c++ - 概述如何访问向量 从另一个模块？

> ID：14306871
> 
> 赞同：0
> 
> 时间：2013-01-13T18:44:08.333
> 
> 标签：visual-c++, vector, module

我正在做一个有两个模块和一个头文件的小项目。

在我的一个模块中，我创建了一个字符串向量并用一些数据填充它。

我现在在访问其他模块中的向量值时遇到问题。谁能给我任何关于如何使这个全球化的建议？

请不要认为我懒惰/没有尝试自己对此进行排序，我只是对#ifndef、#includes、#define、extern 以及何时/何地声明函数原型感到困惑。我知道所有这些都与它有关，只是不确定顺序！我正在使用 VS 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:47:26.757

在您的模块中定义一个 API 函数，该函数返回对您的向量的引用并在您的其他模块中使用该函数。

`file1.h`

```
vector<string>& getMyVector(); 
```

`file1.cpp`

```
vector<string> myVector;

vector<string>& getMyVector() { return myVector; } 
```

因此，在另一个模块 ( `file2.cpp`) 中，您只需：

```
#include "file1.h"

...

cout << "First element of my vector is:" << getMyVector()[0] << endl; 
```

希望您不想在多线程环境中使用它，否则您需要将其实现为适当的单例。

# eclipse - 如何在 Eclipse Juno 中将方法体从默认值最小化

> ID：14306895
> 
> 赞同：1
> 
> 时间：2013-01-13T18:48:01.420
> 
> 标签：eclipse, eclipse-juno

我希望我的项目中的所有方法都从默认值“最小化”。（现在我可以在“单击”减号按钮时执行此操作）。

Eclipse Juno 中是否有任何设置可以让我这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:49:14.530

您可以设置折叠首选项，以便在打开编辑器时最小化所有方法。

去`Windows -> Preferences -> Java -> Editor -> Folding`。

在“最初折叠这些元素”下，检查选项`Members`：

![在此处输入图像描述](../Images/d4366823059bf00385c94f348904bab0.png)

# php - 在 PHP 中启动会话后没有任何输出

> ID：14306896
> 
> 赞同：0
> 
> 时间：2013-01-13T18:48:06.623
> 
> 标签：php

下面是我的代码：

```
<? php  
session_start();  
$_SESSION['view']=1;  
?>  
<html>  
<body>  
<?php  
//retrieve session data  
echo "Pageviews=".isset($_SESSION['views']);  
?>  
</body>  
</html> 
```

以下代码的预期答案是，`Pageviews=1`但我得到的是`Pageviews=`.
请协助，因为我是 PHP 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:49:22.777

`isset`只返回真或假。它不会输出任何东西。做这个：

`echo "Pageviews=".$_SESSION['view'];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:51:12.400

检查会话名称并删除 isset

试试看 ：

```
<? php  
session_start();  
$_SESSION['view']=1;  
?>  
<html>  
<body>  
<?php  
//retrieve session data  
echo "Pageviews=".$_SESSION['view'];  
?>  
</body>  
</html> 
```

isset 用于判断变量是否被设置。它返回真/假。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T18:52:09.060

您可以使用以下代码

```
<?php  
    session_start();  
    $_SESSION['view']=1;  
?>  
<html>  
<body>  
<?php  
    //retrieve session data  
    if(isset($_SESSION['view']))
       echo "Pageviews=".$_SESSION['view'];  

?>  
</body>  
</html> 
```

# .net - 如何在 VB.Net winforms 应用程序中找到 main() 入口点？

> ID：14306903
> 
> 赞同：33
> 
> 时间：2013-01-13T18:49:09.737
> 
> 标签：.net, vb.net, winforms

当我在 C# 中创建一个 WinForms 应用程序时，输出类型是`Windows Application`并且我得到了`program.cs`一个`static void Main()`可以用来处理命令行参数等的...

但是，当我为 VB 创建一个等效项目时，应用程序类型是`Windows Forms Application`，我不得不选择一个启动形式。

在我决定在 VB.Net 中显示哪种形式之前，是否有等效的机制来运行我自己的代码？我假设相同的代码存在但自动生成并隐藏在某处？如果有，在哪里？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-13T19:41:34.020

在 VB 中，您需要手动创建子主程序，所以我通常做的是创建一个名为 Program 的新模块。

作为一个非常基本的设置，您需要添加以下代码。

```
Public Sub Main()

    Application.EnableVisualStyles()
    Application.SetCompatibleTextRenderingDefault(False)
    Application.Run(New Form1)

End Sub 
```

完成后，转到项目设置的应用程序选项卡并取消选中“启用应用程序框架”设置，然后从启动对象下的下拉列表中选择新的子主程序。

然后，您可以将要在程序打开其主窗体之前运行的任何启动代码放在 Application.Run 行之前。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-26T21:55:54.000

*如果您的应用程序只有一个表单*，您可以简单地开始键入 Sub New()，Visual Studio 将自动生成这个首先执行的方法存根。无需更改项目设置。

```
Public Sub New()
    MyBase.New()

    'This call is required by the Windows Form Designer.
    InitializeComponent()

    'Add any initialization after the InitializeComponent() call
    '==> Put your pre-execution steps here.
End Sub 
```

# ruby-on-rails - Rails 中的重复 HTTP 请求

> ID：14306906
> 
> 赞同：1
> 
> 时间：2013-01-13T18:49:43.877
> 
> 标签：ruby-on-rails, ruby

在我的应用程序中，每隔 30 秒，我想向我的第二台服务器发出 HTTP 请求。我想将结果写入数据库。

我对 Ruby 和 Rails 比较陌生，我不确定实现这一点的标准方法是什么。我应该使用某种类型或计时器吗？环形？它应该在我的应用程序模型中吗？或者别的地方？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:56:38.973

这是在 rails 中运行后台作业的[截屏列表。](http://railscasts.com/?tag_id=32)一旦您决定了如何实现它，您就可以使用 ruby​​ 标准库做所有您需要做的事情。只需使用[http 库](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)。

您可以将结果写入[SQLite](http://sqlite-ruby.rubyforge.org/)之类的数据库或您的应用程序使用的任何数据库。

# jquery - 如何创建具有特殊行为的元素

> ID：14306907
> 
> 赞同：0
> 
> 时间：2013-01-13T18:49:45.520
> 
> 标签：jquery, html, css, javascript

我正在尝试制作具有特殊界面和行为的元素。

例如`input`，我的页面中有一个。

```
<input type='text' po-type='multiinput' value='' /> 
```

我想在我的`po-type='multiinput'`属性输入之后添加一些标签。

我在页面加载事件中尝试了这段代码：

```
$("input[po-type='multiinput']").after("<div>my details</div>"); 
```

问题是，当我使用 ajax 加载具有此属性的元素时，这种方式使用较少。

问题是：

如何强制浏览器以`my details`各种方式添加此类元素？

添加一些输入后，我不想每次都使用函数。我希望每件事都自动化。

感谢您提供的每一个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:52:58.567

不要做一个属性`po-type`。HTML5 标准允许`data-*`作为属性。有关更多信息，请参阅[http://www.marcofolio.net/webdesign/html5_data-_attributes_are_great_and_you_know_it.html](http://www.marcofolio.net/webdesign/html5_data-_attributes_are_great_and_you_know_it.html)。为此，

请参阅[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)或回调。`$("input[data-potype='multiinput']").after("<div>my details</div>");``success``complete``$.ajax`

# c# - 使用另一个表单中的值

> ID：14306915
> 
> 赞同：-1
> 
> 时间：2013-01-13T18:50:35.007
> 
> 标签：c#

我有两种形式：

表格 1 和表格 2

在 Form1 我有所有的值，在 Form2 我有一个图表。

**如何在 Form2 中使用 form1 的值而不出现此错误？**

我尝试使用此代码，但没有成功：

在表格 2 中：

```
public partial class Form2 : Form1
    {
        public Form2()
        {
            InitializeComponent();

        }
    } 
```

在 Form1 中：

```
private void graphe_Click(object sender, EventArgs e)
        {
            Form f = new Form2();
            f.ShowDialog();
            Form f2 = new Form1();
            f2.Hide();
        } 
```

![在此处输入图像描述](../Images/b62b382304d600a18b4e7b1976ed7af7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:56:23.773

在 Form2 中创建构造函数，如

```
private Form1 _obj1;

public Form2(Form1 obj1)
{
    _obj1 = obj1;
} 
```

现在您可以将 form1 的所有属性访问到 form2 中。

在创建 form1 的对象时，您可以使用在 form2 中创建的新构造函数，例如

```
Form f = new Form2(this);
f.ShowDialog(); 
```

不需要继承form1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:02:56.327

尝试创建一些中间类并将其实例传递给 and 的重载构造函数`Form2`，`Form1`例如：

```
public partial class Form2 : Form1
{
    public Form2(IList<string> storage) 
        : base(storage)
    {
        InitializeComponent();
    }
}

public partial class Form1 : Form
{
    protected readonly IList<string> _storage ;
    public Form1(IList<string> storage)
    {
        InitializeComponent();
        _storage = storage;
    }
} 
```

用法：

```
var storage = new List<string>();
Form f = new Form2(storage);
f.ShowDialog();
Form f2 = new Form1(storage);
f2.Hide(); 
```

存储可能比`List`. 它也可以在其他对象之间共享，例如“Form3”等。

# c# - 检测移动浏览器并重定向

> ID：14306917
> 
> 赞同：4
> 
> 时间：2013-01-13T18:51:09.583
> 
> 标签：c#, redirect, mobile

我想使用我的 .cs 代码隐藏，Page_PreInit 或 Page_Load 来检测移动浏览器并重定向。我遇到了这个：

```
protected void Page_PreInit(object sender, EventArgs e) 
{ 
    if (Request.Browser.IsMobileDevice) 
    { 
        { 
          Response.Redirect("~/default_mobile.aspx"); 
        }

    } 
} 
```

它似乎不起作用。有人可以建议更正吗？另外，您是否知道不重定向的示例，而只是将 .aspx 页面上的元素替换为另一个元素（即；将 Silverlight 电影替换为 iOS 设备的静止图像。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:06:39.307

[此 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpcapabilitiesbase.ismobiledevice.aspx)解释了如何`.IsMobileDevice`在`Page_Load`. 使其适应您的需求应该是微不足道的。

还要检查[这个其他答案](https://stackoverflow.com/questions/13224/mobile-device-is-detected-as-non-mobile-device)

还有[51Degrees](http://51degrees.codeplex.com)，一个检测移动设备和浏览器的类库，增强了 .NET 可用的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T08:22:51.297

在项目中添加一个全局应用类，并将代码写入`Session_Start`

```
protected void Session_Start(object sender, EventArgs e)
{

            HttpRequest httpRequest = HttpContext.Current.Request;
            if (httpRequest.Browser.IsMobileDevice)
            {
                string path = httpRequest.Url.PathAndQuery;
               bool isOnMobilePage = path.StartsWith("/Mobile/",
                                                      StringComparison.OrdinalIgnoreCase);
                if (!isOnMobilePage)
                {
                    string redirectTo = "~/Mobile/";

                    // Could also add special logic to redirect from certain 
                    // recognised pages to the mobile equivalents of those 
                    // pages (where they exist). For example,
                    // if (HttpContext.Current.Handler is UserRegistration)
                    //     redirectTo = "~/Mobile/RegistrationMobile.aspx";

                    HttpContext.Current.Response.Redirect(redirectTo);
                }
            }   
        } 
```

# webmatrix - 无法发布 WebMatrix 网站

> ID：14306919
> 
> 赞同：2
> 
> 时间：2013-01-13T18:51:20.840
> 
> 标签：webmatrix, asp.net-webpages

我想我今天会玩 WebMatrix，但它在发布过程中失败了。我收到此错误消息：

> “错误：确保您在服务器上有适当的权限来发布 IIS 设置。或者，排除需要服务器管理权限的设置。”

我不确定为什么应用程序会尝试修改 IIS 中的任何设置。我在网站上拥有的唯一实际代码是选择查询。

我找不到有关此错误消息的任何信息，我不确定还有什么要检查的。我确保将共享主机上的设置设置为 .NET 4.0（集成）

如果失败，任何帮助都将是为什么，我们将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:45:18.247

在一个小时左右试图找出可能出错的地方后，我打电话给我的托管服务提供商。原来问题已经到了他们的尽头。他们升级了服务器 Web Deploy 版本并修复了一些委派设置。

# c - 从客户端向服务器发送字符串

> ID：14306920
> 
> 赞同：1
> 
> 时间：2013-01-13T18:51:28.163
> 
> 标签：c, sockets, client-server

我写了这个：

客户：

```
printf("\nType a string: (STOP to ending connection)\n\n");
do{
    while ((c = getchar ()) != '\n' && i < MAXLENGHT){
    buf[i++] = c;
}
buf[i] = '\0';
len = strlen(buf);
}
while( strcmp(buf,"STOP")!=0);
close(sockfd);
exit(0);
} 
```

服务器：

```
int main (int argc, char **argv) {
int sock, fd;
socklen_t client_len;
struct sockaddr_in server, client;

if ((sock = socket (AF_INET, SOCK_STREAM, 0)) == -1) {
    perror ("Socket failed");
    exit (1);
}

server.sin_family = AF_INET;
server.sin_addr.s_addr = htonl(INADDR_ANY);
server.sin_port = htons (SERVER_PORT);

if (bind ( sock, (struct sockaddr *) &server, sizeof server) == -1) {
    perror ("bind failed");
    exit (2);
}

listen (sock,1);

    while (1) {
    client_len = sizeof (client);
    if ((fd = accept ( sock, (struct sockaddr *) &client, &client_len)) < 0) {
        perror ("accepting connection");
        exit(3);
    }
    fprintf (stderr, "\nOpen.\n");
    send (fd, "\nWelcome!\n", 50, 0);
    check_stats (fd, fd);}

    close(fd);
    fprintf (stderr, "\nClose\n");
    exit (0);

 } 
```

.

```
void check_stats(int in, int out) 
```

是一个函数，服务器接收字符串，做一些事情，然后将它发送回客户端。我的问题是：在服务器的代码中，我必须先放什么

```
close(fd) 
```

当用户键入“STOP”时，服务器结束，但在结束之前，它向客户端发送另一个 BYE 字符串？我遇到了问题

```
recv(int sockfd, void *buf, size_t len, int flags); 
```

功能。我必须把主要内容作为

```
int sockfd 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:12:11.633

sockfd 是指您用来与服务器通信的套接字。 [http://linux.die.net/man/2/recv](http://linux.die.net/man/2/recv)

这是函数原型： ssize_t recv(int sockfd, void *buf, size_t len, int flags);

如果你仔细想想，你会发现，如果你不提供你正在使用的套接字的功能，那么它怎么知道从哪里获取数据呢？

# android - 在打开弹出菜单的视图内显示三角形（如使用微调器）

> ID：14306923
> 
> 赞同：2
> 
> 时间：2013-01-13T18:51:44.120
> 
> 标签：android, menu, spinner, popupmenu

我有一个`ListView`通过显示`PopUpMenu`. 但是，我希望用户看到可以单击的视图中的小三角形。

我尝试使用 a `Spinner`，因为该元素看起来像我所追求的，但我无法将 the 的标题设置`Spinner`为其选项以外的任何内容。

当然，我可以定制一切，但由于这不是一种新模式，我想也许已经有一些东西在那里了。只是我自己找不到。

我所追求的示例：

![微调器示例](../Images/17a79c42720a4c8a70d892742ea5707f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:14:02.880

也许您正在寻找可以为微调器设置的[提示属性](http://developer.android.com/reference/android/widget/Spinner.html#attr_android%3aprompt)？

除此之外，如果您还没有在当前的实现中投入太多时间并且这是您想要实现的模式，我建议您使用[SlideExpandableListView ：](http://www.androidviews.net/2012/12/slide-expandable-listview/)

> 该库允许您拥有自定义列表视图，其中每个列表项都有一个区域，一旦用户单击某个按钮，该区域就会滑出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T21:48:13.067

如果使用`ActionBarSherlock`，则可以使用 ABS 使用的三角形：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:tools="http://schemas.android.com/tools"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        etc />

    <ImageView
        android:layout_width="32dp"
        android:layout_height="32dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:contentDescription="@string/expand_triangle"
        android:src="@drawable/abs__spinner_ab_default_holo_light" />

</RelativeLayout> 
```

# javascript - 如何将字符串添加到浏览器的自动完成弹出窗口？

> ID：14306925
> 
> 赞同：1
> 
> 时间：2013-01-13T18:52:01.377
> 
> 标签：javascript

这是谷歌登录屏幕的样子：

![文字建议](../Images/d81b28f20b08ba3b7a0a50868713967a.png)

你点击它，会弹出一个建议列表。

我想在我自己的网站上做类似的事情，用户可以点击输入，然后会弹出一个 javascript 填充的建议列表（或过去的搜索列表以及我的建议）。

我怎样才能使用javascript做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:00:21.827

您可以通过将 autocomplete=off 属性添加到输入字段来关闭本机自动完成功能，然后您可以实现自己的自动完成功能。您不能将项目添加到本机列表。

幸运的是，有一些库可以帮助您创建自己的自动完成功能。例如，请参阅[http://jqueryui.com/autocomplete/ :)](http://jqueryui.com/autocomplete/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:40:04.953

您可以使用 HTML5`<datalist>`元素。

datalist 元素允许您指定要在自动完成下拉列表中出现的值列表：

```
<input type="text" placeholder="Type in here." list="mydatalist" />
<datalist id="mydatalist">
  <option value="Apple" />
  <option value="Orange" />
  <option value="Banana" />
  <option value="Pear" />
  <option value="Kiwi" />
  <option value="Grape" />
  <option value="Grapefruit" />
</datalist> 
```

数据列表是从输入元素中单独定义的。然后输入元素通过`list`属性链接到数据列表，该属性将其链接到具有给定 id 的数据列表。

该`<datalist>`元素仅在 IE10、Firefox、Chrome 和 Opera 中受支持，并且不区分大小写（至少在 chrome 24 中）。下面的演示向您展示了如何通过 javascript 添加选项。

演示：http: [//jsbin.com/ewixoq/1/edit](http://jsbin.com/ewixoq/1/edit)

**更新：**对于不支持 HTML5`<datalist>`元素的旧浏览器，可以使用 jQuery datalist 插件。关联：

[http://miketaylr.com/code/datalist.html](http://miketaylr.com/code/datalist.html)

# python - Google App Engine get_serving_url 不再放大图片

> ID：14306927
> 
> 赞同：2
> 
> 时间：2013-01-13T18:52:07.280
> 
> 标签：python, google-app-engine

Google App Engine [get_serving_url](https://developers.google.com/appengine/docs/python/images/functions)假设允许通过将“=sXX”附加到 url 来调整图像大小。它似乎不再放大图像，即如果您给 XX 大于原始图像尺寸，它会返回原始图像而不是所需的更大尺寸。

这是一个例子：

原始图像 (145x111) ![http://lh6.ggpht.com/lC2BVyvToi_zKku5J1Gx_G4NnenfckNOzH_tAkhHovbvsE81S6MGLDtSigEyzUbWSdPkCKlcX7zECHcNlg=s0](../Images/e497b4be6def0d9331318a3d58b58d83.png) [http://lh6.ggpht.com/lC2BVyvToi_zKku5J1Gx_G4NnenfckNOzH_tAkhHovbvsE81S6MGLDtSigEyzUbWSdPkCKlcX7zECHcNlg=s0](http://lh6.ggpht.com/lC2BVyvToi_zKku5J1Gx_G4NnenfckNOzH_tAkhHovbvsE81S6MGLDtSigEyzUbWSdPkCKlcX7zECHcNlg=s0)

放大（例如到 300 像素） -**不起作用** ![在此处输入图像描述](../Images/0d28999ad23415914e91aeba1812c5b2.png)

[http://lh6.ggpht.com/lC2BVyvToi_zKku5J1Gx_G4NnenfckNOzH_tAkhHovbvsE81S6MGLDtSigEyzUbWSdPkCKlcX7zECHcNlg=s300](http://lh6.ggpht.com/lC2BVyvToi_zKku5J1Gx_G4NnenfckNOzH_tAkhHovbvsE81S6MGLDtSigEyzUbWSdPkCKlcX7zECHcNlg=s300)

缩小 - 工作 ![在此处输入图像描述](../Images/845edd86705b615479c9e5c60557b25c.png) [http://lh6.ggpht.com/lC2BVyvToi_zKku5J1Gx_G4NnenfckNOzH_tAkhHovbvsE81S6MGLDtSigEyzUbWSdPkCKlcX7zECHcNlg=s64](http://lh6.ggpht.com/lC2BVyvToi_zKku5J1Gx_G4NnenfckNOzH_tAkhHovbvsE81S6MGLDtSigEyzUbWSdPkCKlcX7zECHcNlg=s64)

还有其他人遇到同样的事情吗？有趣的事情是扩大过去的工作，似乎仍然可以在我的一个旧 AppEngine 应用程序上工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:57:28.560

您不能调整图像大小**以使其大于**原始大小`=s0`。

您可以通过 css 等定义图像大小，而不是在客户端上执行此操作。

想想为什么你不能得到更大的图像。我认为是因为以下几点：

> 使用`=sxxxx`Blobstore 并从 Blobstore 请求调整大小的较小尺寸的图像**是有意义**的，因为您会获得一个包含 **较小尺寸图像**的链接，这将使用**更少的带宽**并加快客户端浏览器的渲染速度，从而获得**更快**的 性能。
> 
> 从 Blobstore 获取更大尺寸的图像是**没有用**的，因为您将使用更多带宽和资源来执行也可以**在客户端上**进行的操作。您可以使用 html、css 和**javascript**来放大图像。

**要在图像服务器端**进行进一步操作，请使用[Imaging API](https://developers.google.com/appengine/docs/python/images/overview)或 PIL。

剩下的就看你了。

# javascript - 在javascript中缩短MongoDB ID

> ID：14306931
> 
> 赞同：2
> 
> 时间：2013-01-13T18:52:33.160
> 
> 标签：javascript, node.js, mongodb

如何将 mongodb ID 缩短为更易于解析的语法以在 URL 中使用。该字符串在当前迭代中太长了。

Base64 不错，但还是太长了。我正在寻找 7 个以下字符范围内的更多内容。

我希望能够在 node.js 和浏览器中对其进行编码/解码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:31:16.510

从请求中解析 ObjectId 并不难（所以我不确定为什么会出现问题？）。如果目标是制作可键入的 URL，那么拥有更短且“更友好”的 URL 将是有价值的。

您不能在分片 MongoDB 设置中采用保证唯一的 12 字节数字并将其压缩到少于 12 个字节并保证它是唯一的（例如，您在七个字符下提到过）。

从[文档](http://docs.mongodb.org/manual/core/object-id/)中，MongoDB ObjectId 包括：

*   一个 4 字节的时间戳
*   一个 3 字节的机器标识符
*   一个 2 字节的进程 ID
*   和一个 3 字节计数器。

因此，您要么需要牺牲 ObjectId 的某些部分（并因此进行分片），要么设计一种可索引的替代 Id 创建格式。

虽然您可能会再次对 ID 进行哈希处理，但可能会出现您想要编码的冲突（同样，您不能将 12 个字节减少到 4 个字节并保证唯一性）。如果可能存在冲突（并且如果您减少可用的总位数将会出现冲突），那么无论如何您都需要某种辅助表（并且您需要创建一个索引以从生成的 ID 到 ObjectId） .

结果选项：

*   删除通常有效的位——如果你这样做，**不要**对集合进行分片
*   设计自己的唯一 ID 解决方案（如果它在网络农场中，它可能最终看起来与 MongoDB 的处理唯一性非常相似）
*   使用 ObjectId 作为一个长数字并在其上运行一个缩短算法（它需要首先分解成更小的块，因为它超过了 JavaScript 的 53 位数字精度），例如尝试这个算法 =对它[进行编码](https://stackoverflow.com/questions/742013/how-to-code-a-url-shortener)（最终会在17 个字符）
*   使用其他更短但唯一的 ID 作为文档的 ID
*   最简单：只要接受 Id 很长。:)

（不清楚为什么浏览器需要进行这种转换——为什么它会有文档的 ObjectID？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-28T14:29:36.637

除了来自 WiredPrairie 的回答，

您可以从十六进制表示更改为 base64 表示。它表示 16 个字符中的 12 个字节，从 24 个十六进制。它不如7，但它是一个开始。甚至还有一个库可以帮助解决这个问题 -> [base64-mongo-id](https://www.npmjs.com/package/base64-mongo-id)。

如果将 + 和 / 替换为 - 和 _，则 5f20318f5b100c5f7ed80e44 将缩短为 XyAxj1sQDF9+2A5E 或 XyAxj1sQDF9-2A5E。

但请注意，如果您使用 base 64，则 URL 将区分大小写。如果您想避免这种情况，您可以使用不区分大小写但会更长的 base36，即 20 个字符，将 5f20318f5b100c5f7ed80e44 表示为 L4QDDD23CAGF67WYBZCA。

如果您需要较短的编码，并且如果您可以处理 URL 中的大小写敏感和特殊字符，则可以使用 base85 即 ASCII 直接编码数据或更高阶编码，如 base 91 和 base 122 将它们减少到

# ruby-on-rails - 轨道上的红宝石星级

> ID：14306933
> 
> 赞同：0
> 
> 时间：2013-01-13T18:52:33.467
> 
> 标签：ruby-on-rails

嗨，所以我试图在网站上显示星级到目前为止，我已经以数字的形式获得了评级，但是我想乘以这个数字并使用循环或类似的方式显示等量的星星，即如果评级是 4 然后 4 星图片打印出来，有什么想法吗？

到目前为止我的代码...

number_with_precision(product.no_of_stars, :precision => 1) // 这行打印出数字 ans 工作得很好

我试图做这样的事情......

product.no_of_stars.times 做 |i| image_tag("/images/star.jpg") 结束

但它一直说“#的未定义方法`times'”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:58:26.067

我认为这是因为您`product.no_of_stars`正在返回一个浮点数，而只有整数（或者可能是 Fixnums）可以响应`times`; 如果您对忽略任何分数感到满意，您可以尝试：

```
product.no_of_stars.to_i.times do ... 
```

或者，如果您总是想要一个整数，那么也许将您的数据库更改为使用整数列？

否则，使用 javascript 进行星级评定可能会更好；一个快速的谷歌会给你很多结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:39:13.870

Ryan Bates 在此 Railscast [http://railscasts.com/episodes/101-refactoring-out-helper-object中详细介绍了如何执行此操作](http://railscasts.com/episodes/101-refactoring-out-helper-object)

# haskell - Haskell：如何只用 ghc 生成 .hi 文件？

> ID：14306934
> 
> 赞同：4
> 
> 时间：2013-01-13T18:52:34.857
> 
> 标签：haskell, ghc

我想生成一个`.hi`接口文件，**只有**那个（没有目标文件，根本没有代码生成）。

我试过

```
ghc -fno-code -ohi out.hi myfile.hs 
```

并得到

```
ghc: -ohi can only be used when compiling a single source file 
```

我不明白，因为我只给出了一个源文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:55:58.657

使用`-c`选项，否则 ghc 想要链接，而不仅仅是编译：

```
ghc -fno-code -ohi out.hi -c myfile.hs 
```

更新：但它并没有真正帮助，因为`-fno-code`阻止`.hi`创建。

```
ghc -o /dev/null -ohi out.hi -c myfile.hs 
```

这个丢弃了编译的结果。但是，如果`out.hi`是最新的，它也将避免不必要的编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-13T15:07:24.270

2014 年左右，GHC 专门为此添加了一个选项。现在，您可以调用：

```
ghc -fno-code -fwrite-interface ... 
```

在某些情况下，它实际上将编译速度提高了大约四分之一。

# ios - 如何知道返回了哪个 NSURLConnection

> ID：14306937
> 
> 赞同：0
> 
> 时间：2013-01-13T18:52:42.100
> 
> 标签：ios

> **可能重复：**
> [如何识别当有多个 NSURLConnection 完成加载时？](https://stackoverflow.com/questions/2476302/how-to-identify-which-nsurlconnection-did-finish-loading-when-there-are-multiple)

我从一个网址获取天气信息。例如，我对参数使用相同的 url 和不同的城市（不是我的实际代码，以防我出错）：

```
for(int i=0; i<5; i++)
{        
    NSString *urlString = [NSString stringWithFormat:@"http://weatherurl.com/xmlFeed.php?location=%@",[locations objectAtIndex:i]];
    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];
} 
```

我怎么知道哪个连接返回了`- (void)connectionDidFinishLoading:(NSURLConnection *)connection`？

我正在考虑将每个连接添加到一个数组中，然后将委托方法的连接与我的数组中的连接进行比较，但我想知道是否有更好/标准的方法。谢谢。

# android-ndk - Android NDK：构建我的静态库

> ID：14306941
> 
> 赞同：2
> 
> 时间：2013-01-13T18:53:09.460
> 
> 标签：android-ndk

我在 jni 文件夹中有这些文件：

*   安卓.mk

*   应用程序.mk

*   m_lanczos.c

*   m_lanczos.h

*   分辨率.cpp

我只想在 resolution.cpp 中使用我的库，例如：

```
#include"m_lanczos.h" 
```

我还需要在 Android.mk 中添加什么？谢谢！

```
 LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

LOCAL_MODULE := super
LOCAL_SRC_FILES := sresolution.cpp 
LOCAL_LDLIBS +=  -llog -ldl

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:49:19.803

有两件事可能是错误的：

1.  您忘记编译 m_lanczos.c：
    那么您的 Android.mk 应该如下所示：

    ```
    LOCAL_PATH := $(call my-dir)  
    include $(CLEAR_VARS)  

    LOCAL_MODULE := super  
    LOCAL_SRC_FILES := sresolution.cpp m_lanczos.c  
    LOCAL_LDLIBS +=  -llog -ldl  

    include $(BUILD_SHARED_LIBRARY) 
    ```

2.  m_lanczos 是一个 STATIC_LIBRARY：
    然后你必须构建它并包含它：

    ```
    LOCAL_PATH := $(call my-dir) 

    include $(CLEAR_VARS)       
    LOCAL_MODULE := m_lanczos
    LOCAL_SRC_FILES := m_lanczos.c  
    LOCAL_LDLIBS +=           #needed librarys for m_lanczos, probably nothing       
    include $(BUILD_STATIC_LIBRARY) 

    include $(CLEAR_VARS)         
    LOCAL_MODULE := super  
    LOCAL_SRC_FILES := sresolution.cpp
    LOCAL_LDLIBS +=  -llog -ldl  
    LOCAL_STATIC_LIBRARIES := m_lanczos
    include $(BUILD_SHARED_LIBRARY) 
    ```

但我认为这将是第一个，我希望我有所帮助:)

# ios - PushViewController 使图像消失

> ID：14306942
> 
> 赞同：0
> 
> 时间：2013-01-13T18:53:15.430
> 
> 标签：ios, xcode, uinavigationcontroller, background-image

我在用着：

```
GroceryDetailViewController *detailViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"groceryDetail"];     
[self.navigationController pushViewController:detailViewController animated:YES]; 
```

打开一个新的视图控制器。当用户完成 detailViewController 中的工作时，将调用此方法：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

现在，当回到第一个视图时，导航栏背景图像消失了。最初我将其设置为：

```
UIImage *image = [UIImage imageNamed: @"Title-Bar-(Blue).png"];
[self.navigationController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

即使我尝试重置里面的背景图片

```
-(void)viewWillAppear:(BOOL)animated 
```

它一直消失。（它被调用了，我检查了 NSLog。）

这里会发生什么？谢谢！

更新：我注意到 detailVC 以某种方式扩展了 firstVC，因为在推送后，navBar 内的自定义、以编程方式创建的标签仍在其位置。它根本不属于detailVC。也许我需要一种不同的推送方法或“创建”一个“新鲜”的新 vc 的东西。有人有想法吗？

# php - 区分按下了哪个具有相同值的按钮

> ID：14306944
> 
> 赞同：0
> 
> 时间：2013-01-13T18:53:23.330
> 
> 标签：php, html, forms

我正在尝试为网站编写管理面板。我想编写的功能很简单：会有一个项目列表，在项目名称旁边会有一个名为“编辑”的按钮。该按钮将引导用户到另一个页面，他可以在其中编辑该特定项目。

让我感到困惑的是，除非我专门检查每个按钮（对吗？），否则我无法确定按下了哪个按钮。如果所有按钮都具有相同的名称和不同的值而不是不同的名称和相同的值，这将有所帮助。

那么有没有办法真正告诉哪个项目的按钮被按下了？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:01:56.043

大多数浏览器会发送元素`value`属性的值：`button`

```
<button type="submit" name="id" value="123">Edit</button> 
```

但是如果你需要支持旧版本的IE，你可以使用arraylike name

```
<input type="submit" name="id[123]" value="Edit" /> 
```

并在 php 中访问它：

```
<?php

$id = key($_POST['id']); 
```

# ibatis - MyBatis - Where 子句中的嵌套条件

> ID：14306949
> 
> 赞同：4
> 
> 时间：2013-01-13T18:54:00.207
> 
> 标签：ibatis, mybatis

我在 MyBatis v3 mapper xml 中动态生成 where 子句。但是，放置括号确实很麻烦。有没有更简单的方法来处理问题而不使用 if 语句？

```
<where>
  <if test="filter != null">
    <choose>
      <when test="filter.lref != null">
        file.lref = #{filter.lref}
      </when>
      <otherwise>
        <!-- I don't want to use this -->
        <if test="filter.forLike != null || filter.forInt != null">
          ( 
        </if>
        <if test="filter.forLike != null" >
          subject LIKE #{filter.forLike}    
          OR requester_identifier LIKE #{filter.forLike}
          OR requester_name LIKE #{filter.forLike}
        </if>
        <if test="filter.forInt != null">
          OR file_id = #{filter.forInt}
        </if>

        <!-- I don't want to use this -->
        <if test="filter.forLike != null || filter.forInt != null">
          ) 
        </if>
      </otherwise>
    </choose>
  </if>
  <if test="listMode > 0">
    <choose>
       <when test="listMode == 1">
         AND file_status_link.dosya_ref is not NULL
       </when>
       <otherwise>
         AND file_status_link.dosya_ref is NULL
       </otherwise>
    </choose>
   </if>            
</where> 
```

示例动态生成的 SQL 输出如下

```
WHERE ( subject LIKE ? OR requester_identifier LIKE ? OR requester_name LIKE ? ) 
AND file_status_link.dosya_ref is NULL 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T20:46:38.817

您可以尝试将该部分封装在`<trim>`标签内。它会是这样的：

```
<trim prefix="(" prefixOverrides="OR" suffix=")">
  <if test="filter.forLike != null" >
    subject LIKE #{filter.forLike}    
    OR requester_identifier LIKE #{filter.forLike}
    OR requester_name LIKE #{filter.forLike}
  </if>
  <if test="filter.forInt != null">
    OR file_id = #{filter.forInt}
  </if>
</trim> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-10T11:06:42.320

伪 SQL (XML-SQL)：

```
where
    1 = 1
    <A>and file.lref = #{filter.lref}</A>
    <D>and (
        <E>
        subject like #{filter.forLike}    
        or requester_identifier like #{filter.forLike}
        or requester_name like #{filter.forLike}
        </E>
        <F>or file_id = #{filter.forInt}</F>
    )</D>
    </B>
    <C>and file_status_link.dosya_ref is <G>not</G> null</C> 
```

在哪里：

```
A: <B> && filter.lref != null
B: filter != null
D: <B> && (<E> || <F>)
E: filter.forLike != null
F: filter.forInt != null
C: listMode > 0
G: listMode == 1 
```

# asp.net-mvc - asp .net MVC 应用程序无法识别 [Key, Column(Order = 0)] 属性

> ID：14306951
> 
> 赞同：3
> 
> 时间：2013-01-13T18:54:08.453
> 
> 标签：asp.net-mvc, entity-framework, code-first

```
using System.ComponentModel.DataAnnotations;    

public class UserArmy
    {
        [Key, Column(Order = 1)]
        public Guid UserId { get; set; }
        [Key, Column(Order = 2)]
        public int UnitId { get; set; }
        public int Quantity { get; set; }
    } 
```

这是我的模型课。我正在使用实体框架，代码优先方法。可识别 [Key] 属性，但无法识别 Column(Order=x)。

我错过了一些需要包含的东西吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T18:59:47.983

您必须添加以下命名空间：

```
using System.ComponentModel.DataAnnotations.Schema; 
```

[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.aspx)

# asp.net-mvc-4 - 在 MVC4 环境中使用 Razor 和 Angular.js

> ID：14306953
> 
> 赞同：7
> 
> 时间：2013-01-13T18:54:16.917
> 
> 标签：asp.net-mvc-4, angularjs

在我正在进行的一个项目中，我们的 MVC4 网站使用了 Razor 和 Angular.js 的组合。我对前端 Web 开发还很陌生，所以我很困惑这是否是一个好主意。混合使用它们的优点和缺点是什么，在哪些情况下将它们一起使用是有意义的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T23:38:34.233

我可以与 AngularJS + MVC4/Razor 分享我们的经验：我们仅将 Razor 用于本地化 - 所以仅允许 Razor 功能是“@somekeyword”。作为客户端的结果，我们得到了本地化的 AngularJS 模板。这允许进行最大缓存（即使使用 CDN）。

至于 MVC4，我们使用 ASP.NET Web API 来发送 JSON 数据。我们需要开发者扩展来发送 HAL（超媒体）响应。

如果需要，这提供了最大的解耦和更改到另一个后端的可能性。

# navigation - 使用 JQuery UI 滑块进行站点导航 - 滑块行为怪异？

> ID：14306956
> 
> 赞同：0
> 
> 时间：2013-01-13T18:54:29.133
> 
> 标签：navigation, css-transitions, jquery-ui-slider

我正计划制作一个小型的个人投资组合网站。我想为它尝试一种不同的导航方式——考虑到触摸设备，使用 JQuery UI 滑块而不是通常的基于按钮的菜单似乎是个好主意。

但是，我很快就被卡住了。这是我到目前为止所拥有的，基于在 codrops 和 hongkiat 上找到的教程：http: [//www.insertdisk2.de/stackoverflow/index.html](http://www.insertdisk2.de/stackoverflow/index.html)

编辑：感谢 Max，我得到了“锚点跳跃”的覆盖。使用滑块，我现在可以触发 CSS 转换并导航页面。非常感谢！

滑块的行为仍然很奇怪——我计划有 4 或 5 个“状态”，但它似乎错误地计算了值/位置，导致触发太早或太晚。

$（函数（）{

```
 //Store frequently elements in variables
        var slider  = $('#slider'),
            tooltip = $('.tooltip');

        //Hide the Tooltip at first
        tooltip.hide();

        //Call the Slider
        slider.slider({
            //Config
range: "min",
step: 50,
value: 0,

            start: function(event,ui) {
                tooltip.fadeIn('fast');
            },

            //Slider Event
            slide: function(event, ui) { //When the slider is sliding

                var value  = slider.slider('value'),
                    volume = $('.test');

                tooltip.css('right', value).text(ui.value);  //Adjust the tooltip accordingly

                if(value <= 5) { 
                    volume.css('background-color', '#000');
                    window.location.hash = 'home';
                } 
                else if (value == 50) {
                    window.location.hash = 'portfolio';

                } 
                else  {
                    window.location.hash = 'contact';
                };

            },

            stop: function(event,ui) {
                tooltip.fadeOut('fast');
            },
        });

    });
</script> 
```

我想这要么是范围/值/步骤，要么是我编写滑块行为如此“混乱”的条件的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:07:36.957

如果您希望滑块复制导航按钮的功能，您应该考虑按钮的作用：它们更改位置，或者更准确地说，更改`#`. 当您想要更改 URL 时，您已经接近解决方案。

在`slide`事件处理程序中，将

```
window.location.hash = 'home'; 
```

这会将片段标识符更改为 home 并具有与单击`Home`-Button 相同的结果。

# plc - 菲尼克斯电气PLC软件用什么语言组装？

> ID：14306957
> 
> 赞同：-1
> 
> 时间：2013-01-13T18:54:34.367
> 
> 标签：plc

我很难找到我用结构化文本和指令列表语言编写的程序的汇编代码。我找不到书面代码的二进制代码，也不知道它们是在哪个 ISA 中转换的。我为这些二进制代码编写了一个反汇编程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:45:01.407

正如 Ira 所说，我认为您的方法相当误导。就 PLC 指令而言，实际上没有什么可拆卸的。PLC 指令（梯形图、IL 等）从直接机器指令中抽象出来（如果有的话）。当您查看 IL 时，您实质上是在查看一种汇编语言形式。

如果执行时间是一个问题，那么您几乎无法在机器级别优化它们——您已经在那里工作了。算法本身就是需要改变的。每个 PLC 手册都会列出它支持的每条指令的执行时间——这是您应该开始搜索以进行优化的地方。查看程序并尝试确定哪些梯级占用了您的扫描时间。尤其是浮点运算和循环（无论如何都不应该使用它！）是您真正可以延长执行时间的地方。看看有没有办法让你在那里重构。您可以将除法更改为乘法等吗？

另一种可能性可能只是您正在使用的 PLC 不适合这项工作。大多数制造商以不同的价格提供一系列基本单元。这些系统之间的执行速度可能会有很大差异。我有一系列低成本的 PLC 单元，例如，在同一个单元系列中，其中最快的（DL450）可以在 23 微秒内执行二进制除法，而最慢的（DL430）将需要近 5000 微秒. DL450 将在比 DL430 执行两次分割时更短的时间内执行其整个（相当复杂的）扫描！我有几台 Omron PLC，它们将在一个 DL430 分区的时间内完成它们的整个程序扫描。

您可能只需要一个更快的基本单元吗？

# css - Twitter Bootstrap 响应式宽度百分比值

> ID：14306958
> 
> 赞同：1
> 
> 时间：2013-01-13T18:54:56.080
> 
> 标签：css, twitter, twitter-bootstrap, width

> **可能重复：**
> [引导流体行宽度](https://stackoverflow.com/questions/12380384/bootstrap-fluid-row-width)

我只是在看 Twitter Bootstrap Responsive CSS，在那里我看到它们使用了类似的值

```
.row-fluid .span3 {
    width: 22.92817679558011%;
    *width: 22.87498530621841%;
} 
```

他们怎么有这么多数字，我的意思是它似乎非常精确？我的猜测是他们计算了这个值 - 如何计算？

# xml - 无法访问 as3 中的 XML 节点

> ID：14306960
> 
> 赞同：0
> 
> 时间：2013-01-13T18:55:03.217
> 
> 标签：xml, actionscript-3

所以我在 as3 中加载了我的 XML 文件，我可以看到它已正确加载并且它是正确的文件，因为我可以跟踪它但是当我尝试跟踪特定节点时，我的输出窗口仍然为空。这是我的代码：

```
var _textes:XML;
loader = new URLLoader();
requete = new URLRequest("texte_fr.xml");
loader.load(requete);
loader.addEventListener(Event.COMPLETE, finChargement);

function finChargement(pEvt:Event){
    _textes= new XML(pEvt.target.data);
} 
```

如果我跟踪 _textes，我可以看到我所有的 XML 代码，但是一旦我尝试在我的 XML 文件中跟踪一个节点，我什么也看不到。例如，如果我尝试跟踪 _textes.instructions，则什么也没有出现。我究竟做错了什么？这是我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<textes version="1" xmlns="http://xspf.org/ns/0/">
<instructions>
    Some text
</instructions>
<niveau1>
    <reussi>
        Some other text
    </reussi>
    <fail>
        Some other text
    </fail>
</niveau1>
<niveau2>
    <reussi>
        Some other text
    </reussi>
    <fail>
        Some other text
    </fail>
</niveau2>
<niveau3>
    <reussi>
        Some other text
    </reussi>
    <fail>
        Some other text
    </fail>
</niveau3>
<perdu>
    Some other text
</perdu>
<general>
    Some other text
</general>
<boutons>
    Some other text
</boutons>
</textes> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:50:33.690

您可以将默认命名空间设置为空，以便使用 e4x，而无需通过以下代码指定命名空间：var xml:XML = Some text

```
 var ns:Namespace = xml.namespace("");
    default xml namespace = ns;
    trace(xml.instructions.toString()); //output "Some text" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:24:23.083

**编辑：** @fsbmain 用适当的解决方案击败了我，而我正在编辑我的答案:) 这是我修改后的答案......

你没有得到那个节点的内容，因为你没有使用 xml 引用节点文档的命名空间。

这是您应该如何访问您的 xml 节点：

```
function finChargement(pEvt:Event){
    _textes= new XML(pEvt.target.data);
    // The namespace in your xml document:
    var ns:Namespace = new Namespace("http://xspf.org/ns/0/");
    default xml namespace = ns;
    trace(_textes.instructions);
} 
```

有关更多信息，请参阅[此页面](http://www.senocular.com/flash/tutorials/as3withflashcs3/?page=4%5d)

> 命名空间用于分隔或识别数据。在 XML 中，它们用于将一个或多个节点与某个 URI（统一资源标识符）相关联。具有命名空间的元素可以具有与其他标签相同的标签名称，但由于它们与 URI 的关联，它们仍然可以与它们分开。

这是一个例子：

假设您有以下 xml 数据：

```
<?xml version="1.0" encoding="utf-8"?>
<textes>
    <instructions  xmlns="http://xspf.org/ns/0/">
        Node 1
    </instructions>
    <instructions  xmlns="http://xspf.org/ns/1/">
        Node 2
    </instructions>
</textes> 
```

如果您使用第一个节点的命名空间访问“指令”节点，您将获得第一个节点的内容。

```
function finChargement(pEvt:Event){
    _textes= new XML(pEvt.target.data);
    var ns:Namespace = new Namespace("http://xspf.org/ns/0/");
    default xml namespace = ns;
    trace(_textes.instructions);
    // Will output "Node 1"
} 
```

如果您使用第二个节点的命名空间，您将获得第二个节点的内容：

```
function finChargement(pEvt:Event){
    _textes= new XML(pEvt.target.data);
    var ns:Namespace = new Namespace("http://xspf.org/ns/1/");
    default xml namespace = ns;
    trace(_textes.instructions);
    // Will output "Node 2"
} 
```

# magento - 为什么 Magento CSV 翻译文件似乎只能偶尔使用？

> ID：14306963
> 
> 赞同：0
> 
> 时间：2013-01-13T18:55:29.257
> 
> 标签：magento, translation

为什么这条线在 translate.csv 文件中没有翻译？translate.csv 文件位于正确的位置，并且大部分时间都可以正常工作，但在下面的一些地方则无法正常工作。为什么有时有效有时无效？

我的 csv 文件在 app\design\frontend\spanish\default\locale\es_ES 目录中的 UTF-8 格式。

```
<div class="block" id="creare-container">
          <div class="block-title"> <strong><span><?php echo $this->__('Need it Quick?') ?></span></strong> </div> 
```

该模块在 app\locale 目录中也没有翻译模块 csv。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-03T08:57:58.980

you have to write exact the same thing what you have write within php tag.. just copy that exact thing, put it in your tr

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T08:03:02.050

在`echo`你有小写字母：

```
$this->__('Need it Quick?') 
```

您需要对翻译 CSV 文件使用相同的内容

只需将 CSV 文件中的一行更改为： **“NEED IT QUICK?”、“NEED IT RÁPIDO?”**

到： **“需要快速吗？”，“需要快速吗？”**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-15T12:39:29.150

一些字符串在来自应用程序/语言环境的多个文件中进行翻译，例如“添加到购物车”( `Mage_Catalog.csv`, `Mage_Sales.csv`, `Mage_Checkout.csv`)。这可能会导致在您的主题 translate.csv 文件中覆盖它们时出现问题。

在这些情况下，指定应在 translate.csv 文件中覆盖 app/locale 中的哪个翻译文件会很有帮助，例如：

```
"Mage_Catalog::Add to Cart","Translation" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T22:54:23.147

这不是一个真正的答案，但我没有空间。

我禁用了缓存。这是我的 CSV 文件中的行：

```
"NEED IT QUICK?","NEED IT RÁPIDO?" 
```

它与那些工作的完全一样。这是整个文件，其中不多，因为我不得不为 html 实体添加特殊代码，直到我发现我必须将其保存为 UTF-8 :) 所以我正确地重做了它。无论如何，它是：

```
"Most Viewed Items","Artículos Mas Vistos"
"Your Billing Information","Tu información de facturación"
"Special Angels","Angels Especiales"
"NEED IT QUICK?","NEED IT RÁPIDO?" 
```

实际上，最受欢迎的项目也没有翻译。我也更改了措辞，以防万一发生冲突。

# php - 如何将查询放在 while 之外，但我们将它放在 while 中？

> ID：14306964
> 
> 赞同：0
> 
> 时间：2013-01-13T18:55:30.030
> 
> 标签：php, mysql

我应该在帖子正文中显示评论编号。但是帖子正文在while中，如果我在while页面中放置评论num查询，那么就会很重！

我正在尝试做但不工作：

```
$comments_data = mysql_query("SELECT * FROM `comments` WHERE `blogid`='$bid' AND `postid`='$postid'") or die(mysql_error());
$coments_num = mysql_num_rows($comments_data);

if($post_query) {
    while($post_data = mysql_fetch_array($post_query)) {
        $postid = $post_data['id'];
        $post_temp = $post;
        $post_temp = str_replace('[post_comments]',$coments_num,$post_temp);
        $posts .= $post_temp;
    }
} 
```

但如果我这样使用会起作用：（但有很多查询！）

```
if($post_query) {
    while($post_data = mysql_fetch_array($post_query)) {
        $postid = $post_data['id'];
        $comments_data = mysql_query("SELECT * FROM `comments` WHERE `blogid`='$bid' AND `postid`='$postid'") or die(mysql_error());
        $coments_num = mysql_num_rows($comments_data);
        $post_temp = $post;
        $post_temp = str_replace('[post_comments]',$coments_num,$post_temp);
        $posts .= $post_temp;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:00:15.780

如果您只需要帖子中的评论数量，而不需要评论内容。然后在连接查询中使用[COUNT子句：](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)

```
$post_query = "SELECT *, COUNT(comment.id) AS comment_num 
FROM post JOIN comment ON comment.post_id = post.id
GROUP BY post.id;"

if($post_query) {
  while($post_data = mysql_fetch_array($post_query)) {
    $postid = $post_data['id'];
    $comment_num = $post_data['comment_num'];
    $post_temp = $post;
    $posts .= $post_temp;
  }
} 
```

**检查[工作演示](http://sqlfiddle.com/#!2/9b5b7/5)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:08:42.307

On 应该*很少*需要从循环中查询数据库：通常可以构造一个返回所有所需结果的查询，然后遍历该结果集——这几乎总能提高性能。

与其通过一个查询来获取帖子，而是在该结果集上循环并通过另一个查询来获取每个帖子的评论，而是将您的表连接在一起；在不知道您的架构或查看您的 SQL 的`$post_query`情况下，无法确定，但您可能想要这样的东西：

```
SELECT   *
FROM     posts LEFT JOIN comments USING (postid)
WHERE    blogid = '$bid'
ORDER BY postid 
```

然后遍历结果，通过检查`postid`列来检测您何时遇到新帖子。

# xsd - JAXB - 具有递归依赖的编组

> ID：14306965
> 
> 赞同：1
> 
> 时间：2013-01-13T18:55:33.593
> 
> 标签：xsd, jaxb2, maven-jaxb2-plugin

有人试图用递归引用来编组 JAXB 对象吗？我有以下课程：

```
public class A {

   private Long id;
   private String name;
   private List<A> aList;

} 
```

我想将其编组为：

```
<a>
  <a>
    <a>...</a>
  ...
  </a>
...
</a> 
```

我正在使用 maven 插件从 XSD 自动生成 JAXB 类。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:17:35.347

您可以执行以下操作：

**一种**

您可以`@XmlElementRef`在字段上使用注释，`aList`以便它使用的元素来自类`@XmlRootElement`上的注释`A`。

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class A {

    private Long id;

    private String name;

    @XmlElementRef
    private List<A> aList;

} 
```

**演示**

下面是一些示例代码，以证明一切正常。

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(A.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14306965/input.xml");
        A a = (A) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(a, System.out);
    }

} 
```

**输入.xml/输出**

下面是运行演示代码的输入和输出。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a>
    <id>1</id>
    <name>A</name>
    <a>
        <id>2</id>
        <name>B</name>
        <a>
            <id>3</id>
            <name>C</name>
        </a>
    </a>
</a> 
```

**XML 模式**

下面是与此模型对应的 XML 模式。您可以从中生成模型或从 Java 模型开始。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="a" type="a"/>

  <xs:complexType name="a">
    <xs:sequence>
      <xs:element name="id" type="xs:long" minOccurs="0"/>
      <xs:element name="name" type="xs:string" minOccurs="0"/>
      <xs:element ref="a" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>

</xs:schema> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:29:36.663

以下是如何从 XML 模式开始支持此用例。

**XML 架构 (schema.xsd)**

以下 XML 架构基于您对上一个答案 (http://stackoverflow.com/a/14317461/383861) 所做的评论。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://www.example.org" 
    xmlns:tns="http://www.example.org"
    elementFormDefault="qualified">

    <xs:element name="b">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="tns:a" maxOccurs="unbounded" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:element name="a">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="id" type="xs:long" />
                <xs:sequence>
                    <xs:element ref="tns:a" minOccurs="0" maxOccurs="10" />
                </xs:sequence>
            </xs:sequence>
        </xs:complexType>
    </xs:element>

</xs:schema> 
```

**生成模型**

以下代码是使用该`xjc`工具生成的。get/set 方法和注释已被删除以节省空间。

***一种***

```
package org.example;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "id",
    "a"
})
@XmlRootElement(name = "a")
public class A {

    protected long id;
    protected List<A> a;

} 
```

***乙***

```
package org.example;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "a"
})
@XmlRootElement(name = "b")
public class B {

    @XmlElement(required = true)
    protected List<A> a;

} 
```

***包信息***

```
@javax.xml.bind.annotation.XmlSchema(
        namespace = "http://www.example.org", 
        elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED)
package org.example; 
```

**对象工厂**

```
package org.example;

import javax.xml.bind.annotation.XmlRegistry;

@XmlRegistry
public class ObjectFactory {

    public ObjectFactory() {
    }

    public B createB() {
        return new B();
    }

    public A createA() {
        return new A();
    }

} 
```

**演示代码**

```
import java.io.File;
import javax.xml.bind.*;
import org.example.A;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance("org.example");

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14306965/input.xml");
        A a = (A) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(a, System.out);
    }

} 
```

**输入（输入.xml）/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a xmlns="http://www.example.org">
    <id>1</id>
    <a>
        <id>2</id>
        <a>
            <id>3</id>
        </a>
    </a>
</a> 
```

# ruby-on-rails - 我明确地将两件事设置为相等，但它们的返回值不相等。

> ID：14306967
> 
> 赞同：0
> 
> 时间：2013-01-13T18:55:54.757
> 
> 标签：ruby-on-rails, factory-bot

这让我困扰了好几天。

```
test "should check inbox for messages" do
@inbox = create(:inbox)
@user = create(:user)

#user owns inbox
  @inbox.user_id = @user.id
  @inbox.save

  assert_equal @inbox.user_id, @user.id 
```

断言总是失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:59:27.780

试试看：

```
test "should check inbox for messages" do
    @inbox = create(:inbox, user: create(:user))
    assert_equal @inbox.user_id, @inbox.user.id 
```

否则可能意味着保存记录时出错。检查测试日志：`tail -f log/test.log`。

# javascript - 根据订单状态有条件地更改rails中的背景颜色

> ID：14306970
> 
> 赞同：0
> 
> 时间：2013-01-13T18:56:03.930
> 
> 标签：javascript, jquery, css, ruby-on-rails, dynamic

我正在尝试根据用户是否保存订单来更改视图的背景。因此，当用户已经保存订单时，菜单项将突出显示，而当他没有保存时​​，菜单项将不突出显示。

一种解决方案是创建两个部分，并根据用户操作有条件地呈现每个部分。

但是，重新渲染一个完整的部分，一般来说是不好的形式似乎有点过分了。更改背景颜色的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:36:02.323

为此，您不需要两个布局。保存成功后，在菜单项上放置一个 .highlight 类，并让 .highlight 类的 css 执行您想要的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:03:26.457

在控制器中使用 if 并用于 `render :layout => 'special_layout'` 根据 if 分支更改布局。

看看[这个](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)

# android - android textview和按钮自动移动

> ID：14306982
> 
> 赞同：0
> 
> 时间：2013-01-13T18:57:17.350
> 
> 标签：android, android-layout

当我尝试在 main.xml 中更改按钮的位置时，我的 textviews 和 edittexts 会移动到无关紧要的地方。我只使用了一个 RelativeLayout，所有按钮和文本视图都在该布局中。或者当我尝试更改按钮的 id 时，textviews 再次移动，在我再次找到所有位置后，当我尝试打开模拟器时，它甚至在 eclipse 中没有错误地打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:02:30.813

[RelativeLayout](http://developer.android.com/guide/topics/ui/layout/relative.html)意味着您应该*相*对于彼此定位元素。它使用定位属性，例如`android:layout_toRightOf="..."`引用应显示在当前视图左侧的另一个视图的 ID。

如果您想仅按视图在 XML 文档中的位置排列视图，请使用[LinearLayout](http://developer.android.com/guide/topics/ui/layout/linear.html)。

# postgresql - PostgreSQL 9.0 中视图的触发器

> ID：14306983
> 
> 赞同：0
> 
> 时间：2013-01-13T18:57:25.797
> 
> 标签：postgresql, triggers, views

在 PostgreSQL 9.1 中很简单：

```
CREATE TRIGGER koncerty_insert INSTEAD OF INSERT ON Koncerty FOR EACH ROW EXECUTE PROCEDURE koncerty_insert(); 
```

但是现在我必须在 PostgreSQL 9.0 中为视图创建触发器，我不能再使用`INSTEAD OF`.. 事实上，据我所知，我根本无法在视图上使用触发器。

有没有一种简单的方法来创建视图触发器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T01:12:29.587

在 PostgreSQL 9.0 中，您必须使用[`RULE`](http://www.postgresql.org/docs/current/static/sql-createrule.html)s。

如果可能，请改为升级。规则出人意料地难以正确。

# javascript - 无法摆脱“未捕获的类型错误：对象 [对象全局] 的属性 '$' 不是函数”

> ID：14306984
> 
> 赞同：0
> 
> 时间：2013-01-13T18:57:31.243
> 
> 标签：javascript, jquery

我已经阅读了所有处理我的相同问题但没有成功的帖子。

我创建了一个脚本来使用 jQuery 加载页面片段，该片段在只有 jQuery 引用的测试页面中运行良好。在我将代码嵌入到使用相同 jQuery 版本的 wordpress 主题中时，一切都停止了工作。

我相应地得到了​​不同的结果，我的脚本引用被嵌入的位置。

*   如果代码在页面的最后，它就不起作用，可能是由于 .noConflict(); 的影响。叫到别的地方。

*   使用 $ = jQuery.noConflict(); 重新设置对象 $ 不工作；我在控制台中没有收到错误，但代码没有按预期工作。

*   在 jQuery 引用之前加载脚本引用会产生标题中的错误。

我真的对我得到的结果感到困惑，我想知道是否有人可以解释我在哪里弄错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:26:11.260

Wordpress 会在嵌入 jQuery 后自动调用`jQuery.noConflict()`，因此不会与其他使用`$`. 它实际上意味着`$`不再可能使用 jQuery by。

有两种可能的解决方案：

1.  使用`jQuery`代替`$`，例如像这样：

    ```
    jQuery(function() {
        jQuery('a').click(function() {
            // ... more code ...
            // Just replace all $s with jQuery
        });
    }); 
    ```

2.  使用[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)在本地重新启用`$`：

    ```
    (function($) {
        // All your code goes here, $ will work as usual
    })(jQuery); 
    ```

# python - 如何在我的地块周围放置更多空白？

> ID：14306986
> 
> 赞同：4
> 
> 时间：2013-01-13T18:57:48.233
> 
> 标签：python, matplotlib

我有一个图，其中包含两行和一列中的两个子图，如下所示：

```
fig, (ax1, ax2) = subplots(
    nrows=2,
    ncols=1,
) 
```

这两个子图是饼图，因此我希望它们的轴是方形的。浏览 API 后，以下应该是调整每个子图轴的正确方法：

```
ax1.axis([0, 8, 0, 8])
ax2.axis([0, 8, 0, 8]) 
```

然后我调整整个图形的大小。由于每个子图的宽度为 8 英寸，因此我将图形的宽度也设置为 8 英寸，将图形的高度设置为 2*8=16 英寸：

```
fig.set_size_inches(8, 16) 
```

这些设置会生成格式良好的饼图。但是，当我将图形保存到 PDF 文件时，饼图的其中一个楔子的标签在图形的右边缘被切断。保存文件中的图形比预览窗口中的图形更窄。这就是为什么我想沿 x 轴扩大图形但保留子图的轴的原因。如果我只是尝试通过执行以下操作来扩大数字：

```
fig.set_size_inches(12, 16) 
```

这个数字现在变宽了，但不幸的是，这两个饼图也是如此。据我了解，`axis()`调用应该保留子图的尺寸，但它们没有。在阅读并尝试了很多关于 autoscale、xlim、ylim 等的知识后，我更加困惑，没有任何效果。

我只是想通过保留子图的尺寸来扩大图形，以便沿 x 轴有更多的空白，并且可以在不切断它们的情况下显示标签。我怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T19:28:58.960

我建议使用[`fig.tight_layout`](http://matplotlib.org/users/tight_layout_guide.html). 你有大约两条路径，要么调整`pad`

```
fig.tight_layout(pad=2) 
```

同时将所有边缘从图形边缘移入或

```
fig.tight_layout(rect=[0,0,.8,1]) 
```

这将调整子图被挤入的框的大小（以图形的分数为单位）。这仅适用于较新的（1.2 或更高版本）版本。

您还可以手动创建子图（这非常烦人，但可以让您完全控制）或使用[gridspec](http://matplotlib.org/users/gridspec.html)。布局子图似乎是一个问题，matplotlib 有*很多*方法可以解决。

令人讨厌的方法是

```
fig = plt.figure()

top_offset = .07
left_offset = .15
right_offset = .2
bottom_offset = .13
hgap = .1
ax_width = 1-left_offset - right_offset
ax_height = (1-top_offset - bottom_offset - hgap)/2

ax1 = fig.add_axes([left_offset, bottom_offset + ax_height + hgap, ax_width, ax_height])
ax2 = fig.add_axes([left_offset, bottom_offset, ax_width, ax_height]) 
```

调整了 5 个参数以使您的数字看起来不错。

# php - 不显示消息是选择的选项是“请选择”

> ID：14306990
> 
> 赞同：0
> 
> 时间：2013-01-13T18:58:06.600
> 
> 标签：php, html

我这里有一个下拉菜单：

```
 $pHTML = "";

             $moduledrop = isset($_POST['modules']) ? $_POST['modules'] : '';

                    $moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL;
                 $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
                ....
                $moduleHTML .= '</select>'; 

....

    <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
    <table>
    <tr>
    <th>Module: <?php echo $moduleHTML; ?></th>
    </tr>
    </table>
    <p><input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit" /></p>
    </form> 
```

我的问题很简单，如果用户选择`Please Select`下拉菜单并提交，它应该显示`Please Select a Module`消息。但它没有显示此消息。为了做到这一点，我需要在下面的代码中进行哪些更改：

```
 if (isset($_POST['moduleSubmit']) || isset($_POST['sessionSubmit'])){  

         if($_POST['modules'] == ''){
            $pHTML = "<span style='color: red'>Please Select a Module</span>";
            }else if($sqlnum == 0){
            $pHTML = "<span style='color: red'>Sorry, You have No Assessments under this Module</span>";
            } else{
            $pHTML = "<span style='color: green'>Assessment Successfully Found</span>";

                $assessmentform = "<div id='lt-container'>
                <form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post' id='assessmentForm'>
                <p id='warnings'>{$pHTML}</p>
  <p><input id="sessionSubmit" type="submit" value="Submit Assessment" name="sessionSubmit" /></p>
                </form>
                </div>";

                echo $assessmentform;

                }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:04:53.020

我不确定您的整个脚本到底是什么样子，并且很难判断代码在您的示例中属于哪里，但我猜`$moduledrop = isset($_POST['modules']) ? $_POST['modules'] : '';`是导致问题的原因。

您需要将所有代码一起发布。很难看出什么去了哪里。我只看到两个表单和两个地方检查代码是否已提交。我只是把这些放在一起，让你知道你需要做什么。下面的代码有效。如果您仍然需要帮助，请张贴整个页面，以便我知道我在读什么。

尝试：

```
<?php

$pHTML = "";
$moduledrop = isset($_POST['modules']) ? $_POST['modules'] : '';
$moduleHTML .= '<select name="modules" id="modulesDrop">' . PHP_EOL;
$moduleHTML .= '<option value="">Please Select</option>' . PHP_EOL;
$moduleHTML .= '</select>';

if (!empty($_POST)) {

    if ($_POST['modules'] == '') {
        $pHTML = "<span style='color: red'>Please Select a Module</span>";
    } else if ($sqlnum == 0) {
        $pHTML = "<span style='color: red'>Sorry, You have No Assessments under this Module</span>";
    } else {
        $pHTML = "<span style='color: green'>Assessment Successfully Found</span>";
    }
    echo $pHTML;
}

?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
<table>
    <tr>
        <th>Module: <?php echo $moduleHTML; ?></th>
    </tr>
</table>
<p>
    <input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit" />
</p>
</form> 
```

# asp.net - ASP VB .Net 将字符串转换为命令

> ID：14306991
> 
> 赞同：0
> 
> 时间：2013-01-13T18:58:09.933
> 
> 标签：asp.net, vb.net, string, web, command

我正在制作一个网站（这方面的菜鸟），并试图将搜索结果添加到三个 div。但是从数据库向 div 添加文本时会出现问题。它正确获取。但我想将一个字符串（总共三个 div，id 分别为 div1、div2、div3。字符串为“div”+ DivCount.ToString，DivCount 为 0（循环并在每个循环中添加 +1）转换为命令。这是代码，任何其他方法也将不胜感激。谢谢。代码在下面，顺便说一句。

默认.aspx.vb

```
Imports Microsoft.VisualBasic
Imports System.Data.SqlServerCe

Partial Class Pages_Default
    Inherits System.Web.UI.Page

    'Project Variables
    Dim ProjectDirectory As String = AppDomain.CurrentDomain.BaseDirectory.ToString

    'ConnectAndAddItemsToDropdownList Dim
    Dim SQLCommandString As String
    Dim SQLConnectionString As String = "Data Source=" + ProjectDirectory + "App_Data\MainDatabase.sdf; Persist Security Info=False;"

    Dim SQLConnection As New SqlCeConnection(SQLConnectionString)
    Dim SQLAdapter As SqlCeDataAdapter
    Dim SQLReader As SqlCeDataReader
    Dim Executor As New MSScriptControl.ScriptControl

    Dim DivCount As Integer = 0
    Dim DivCurrent As String

    Public Sub ConnectAndAddItemsToDropdownList()
        DropDownList1.Items.Clear()
        SQLConnection.Open()
        SQLCommandString = "SELECT BookName FROM [Anthony Horowitz] WHERE (BookName LIKE '" + SearchTextBox.Text + "%')"
        Dim SQLCommand As New SqlCeCommand(SQLCommandString, SQLConnection)
        SQLReader = SQLCommand.ExecuteReader()
        While SQLReader.Read()
            DivCount = +1
            DivCurrent = "div" + DivCount.ToString
            Executor.Language = "VBScript"
            Executor.Eval(DivCurrent.ToString + ".InnerText = SQLReader(""Bookname"")")
        End While
        SQLConnection.Close()
    End Sub

    Protected Sub SearchTextChanged(sender As Object, e As EventArgs) Handles SearchTextBox.TextChanged
        ConnectAndAddItemsToDropdownList()
    End Sub
End Class 
```

默认.aspx

```
<%@ Page Language="VB" CodeFile="Default.aspx.vb" Inherits="Pages_Default" AutoEventWireUp="False"%>

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>
    <body id="MainPage" runat="server">
        <form id="form1" runat="server">
            <asp:TextBox ID="SearchTextBox" Text="Search for a book here..." runat="server" AutoPostBack="true" OnTextChanged="SearchTextChanged"></asp:TextBox>
            <asp:DropDownList ID="DropDownList1" runat="server" Height="17px" Width="105px"></asp:DropDownList>
            <div id="div1" runat="server">Nothing Interesting</div>
            <div id="div2" runat="server">Nothing Interesting</div>
            <div id="div3" runat="server">Nothing Interesting</div>
        </form>
    </body>
</html> 
```

上面的结果是“需要对象：'div1'”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:08:44.007

您无法获取这样的数据并将其放入元素中，原因有以下三个：

*   该脚本无权访问您的 SQL 阅读器。
*   这些元素还不存在，所有的服务器代码在它们之前就已经结束了。
*   当元素存在时，它们存在于不同的计算机上。

将服务器控件放在您想要文本的标记中：

```
<div id="div1" runat="server"><asp:Label runat="server" id="label1" Text="Nothing Interesting" /></div> 
```

获取对控件的引用并将其放入数组中，以便您可以轻松访问它们：

```
Dim labels(2) as Label
labels(0) = label1
labels(1) = label2
labels(2) = label3 
```

现在您可以将数据放入控件中：

```
While SQLReader.Read()
  labels(DivCount).Text = SQLReader("Bookname")
  DivCount = +1
End While 
```

# magento - 远程操作可配置产品 选择下拉菜单

> ID：14306994
> 
> 赞同：3
> 
> 时间：2013-01-13T18:58:39.567
> 
> 标签：magento, prototypejs, magento-1.7

Magento 将可配置产品的选项设置为一系列选择下拉菜单 - 其中第一个选项的选择将相关选项添加到第二个选项，第二个选项的选择会将相关选项添加到第三个选项，依此类推。

我想通过为具有其他表单对象的可配置产品设置选择选项来覆盖这些下拉菜单，而不是由 magento 创建的标准选择下拉菜单。但是，重写 magento 的代码似乎既复杂又冒险，所以我试图隐藏默认的下拉菜单并创建更好看的 css 按钮来替换它们。当单击这些新按钮时，代码将从隐藏的下拉列表中选择相同的选项，读取标准 magento js 打印的结果，并将信息传递回我的脚本。

问题是我无法单击我的按钮来影响下拉列表 - 我可以让下拉列表显示新值，但似乎无法激活将相关选项添加到下一个选择下拉列表的磁力 js。

magento js 是用prototype.js 编写的，我正在使用带有jQuery 库的常规javascript。

以下是可配置产品的原型脚本磁铁：

```
/**************************** CONFIGURABLE PRODUCT **************************/
Product.Config = Class.create();
Product.Config.prototype = {
    initialize: function(config){
        this.config     = config;
        this.taxConfig  = this.config.taxConfig;
        this.settings   = $$('.super-attribute-select');
        this.state      = new Hash();
        this.priceTemplate = new Template(this.config.template);
        this.prices     = config.prices;

        this.settings.each(function(element){
            Event.observe(element, 'change', this.configure.bind(this))
        }.bind(this));

        // fill state
        this.settings.each(function(element){
            var attributeId = element.id.replace(/[a-z]*/, '');
            if(attributeId && this.config.attributes[attributeId]) {
                element.config = this.config.attributes[attributeId];
                element.attributeId = attributeId;
                this.state[attributeId] = false;
            }
        }.bind(this))

        // Init settings dropdown
        var childSettings = [];
        for(var i=this.settings.length-1;i>=0;i--){
            var prevSetting = this.settings[i-1] ? this.settings[i-1] : false;
            var nextSetting = this.settings[i+1] ? this.settings[i+1] : false;
            if(i==0){
                this.fillSelect(this.settings[i])
            }
            else {
                this.settings[i].disabled=true;
            }
            $(this.settings[i]).childSettings = childSettings.clone();
            $(this.settings[i]).prevSetting   = prevSetting;
            $(this.settings[i]).nextSetting   = nextSetting;
            childSettings.push(this.settings[i]);
        }

        // Set default values - from config and overwrite them by url values
        if (config.defaultValues) {
            this.values = config.defaultValues;
        }

        var separatorIndex = window.location.href.indexOf('#');
        if (separatorIndex != -1) {
            var paramsStr = window.location.href.substr(separatorIndex+1);
            var urlValues = paramsStr.toQueryParams();
            if (!this.values) {
                this.values = {};
            }
            for (var i in urlValues) {
                this.values[i] = urlValues[i];
            }
        }

        this.configureForValues();
        document.observe("dom:loaded", this.configureForValues.bind(this));
    },

    configureForValues: function () {
        if (this.values) {
            this.settings.each(function(element){
                var attributeId = element.attributeId;
                element.value = (typeof(this.values[attributeId]) == 'undefined')? '' : this.values[attributeId];
                this.configureElement(element);
            }.bind(this));
        }
    },

    configure: function(event){
        var element = Event.element(event);
        this.configureElement(element);
    },

    configureElement : function(element) {
        this.reloadOptionLabels(element);
        if(element.value){
            this.state[element.config.id] = element.value;
            if(element.nextSetting){
                element.nextSetting.disabled = false;
                this.fillSelect(element.nextSetting);
                this.resetChildren(element.nextSetting);
            }
        }
        else {
            this.resetChildren(element);
        }
        this.reloadPrice();
//      Calculator.updatePrice();
    },

    reloadOptionLabels: function(element){
        var selectedPrice;
        if(element.options[element.selectedIndex].config){
            selectedPrice = parseFloat(element.options[element.selectedIndex].config.price)
        }
        else{
            selectedPrice = 0;
        }
        for(var i=0;i<element.options.length;i++){
            if(element.options[i].config){
                element.options[i].text = this.getOptionLabel(element.options[i].config, element.options[i].config.price-selectedPrice);
            }
        }
    },

    resetChildren : function(element){
        if(element.childSettings) {
            for(var i=0;i<element.childSettings.length;i++){
                element.childSettings[i].selectedIndex = 0;
                element.childSettings[i].disabled = true;
                if(element.config){
                    this.state[element.config.id] = false;
                }
            }
        }
    },

    fillSelect: function(element){
        var attributeId = element.id.replace(/[a-z]*/, '');
        var options = this.getAttributeOptions(attributeId);
        this.clearSelect(element);
        element.options[0] = new Option(this.config.chooseText, '');

        var prevConfig = false;
        if(element.prevSetting){
            prevConfig = element.prevSetting.options[element.prevSetting.selectedIndex];
        }

        if(options) {
            var index = 1;
            for(var i=0;i<options.length;i++){
                var allowedProducts = [];
                if(prevConfig) {
                    for(var j=0;j<options[i].products.length;j++){
                        if(prevConfig.config.allowedProducts
                            && prevConfig.config.allowedProducts.indexOf(options[i].products[j])>-1){
                            allowedProducts.push(options[i].products[j]);
                        }
                    }
                } else {
                    allowedProducts = options[i].products.clone();
                }

                if(allowedProducts.size()>0){
                    options[i].allowedProducts = allowedProducts;
                    element.options[index] = new Option(this.getOptionLabel(options[i], options[i].price), options[i].id);
                    element.options[index].config = options[i];
                    index++;
                }
            }
        }
    },

    getOptionLabel: function(option, price){
        var price = parseFloat(price);
        if (this.taxConfig.includeTax) {
            var tax = price / (100 + this.taxConfig.defaultTax) * this.taxConfig.defaultTax;
            var excl = price - tax;
            var incl = excl*(1+(this.taxConfig.currentTax/100));
        } else {
            var tax = price * (this.taxConfig.currentTax / 100);
            var excl = price;
            var incl = excl + tax;
        }

        if (this.taxConfig.showIncludeTax || this.taxConfig.showBothPrices) {
            price = incl;
        } else {
            price = excl;
        }

        var str = option.label;
        if(price){
            if (this.taxConfig.showBothPrices) {
                str+= ' ' + this.formatPrice(excl, true) + ' (' + this.formatPrice(price, true) + ' ' + this.taxConfig.inclTaxTitle + ')';
            } else {
                str+= ' ' + this.formatPrice(price, true);
            }
        }
        return str;
    },

    formatPrice: function(price, showSign){
        var str = '';
        price = parseFloat(price);
        if(showSign){
            if(price<0){
                str+= '-';
                price = -price;
            }
            else{
                str+= '+';
            }
        }

        var roundedPrice = (Math.round(price*100)/100).toString();

        if (this.prices && this.prices[roundedPrice]) {
            str+= this.prices[roundedPrice];
        }
        else {
            str+= this.priceTemplate.evaluate({price:price.toFixed(2)});
        }
        return str;
    },

    clearSelect: function(element){
        for(var i=element.options.length-1;i>=0;i--){
            element.remove(i);
        }
    },

    getAttributeOptions: function(attributeId){
        if(this.config.attributes[attributeId]){
            return this.config.attributes[attributeId].options;
        }
    },

    reloadPrice: function(){
        var price    = 0;
        var oldPrice = 0;
        for(var i=this.settings.length-1;i>=0;i--){
            var selected = this.settings[i].options[this.settings[i].selectedIndex];
            if(selected.config){
                price    += parseFloat(selected.config.price);
                oldPrice += parseFloat(selected.config.oldPrice);
            }
        }

        optionsPrice.changePrice('config', {'price': price, 'oldPrice': oldPrice});
        optionsPrice.reload();

        return price;

        if($('product-price-'+this.config.productId)){
            $('product-price-'+this.config.productId).innerHTML = price;
        }
        this.reloadOldPrice();
    },

    reloadOldPrice: function(){
        if ($('old-price-'+this.config.productId)) {

            var price = parseFloat(this.config.oldPrice);
            for(var i=this.settings.length-1;i>=0;i--){
                var selected = this.settings[i].options[this.settings[i].selectedIndex];
                if(selected.config){
                    var parsedOldPrice = parseFloat(selected.config.oldPrice);
                    price += isNaN(parsedOldPrice) ? 0 : parsedOldPrice;
                }
            }
            if (price < 0)
                price = 0;
            price = this.formatPrice(price);

            if($('old-price-'+this.config.productId)){
                $('old-price-'+this.config.productId).innerHTML = price;
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T11:47:25.630

今天我遇到了同样的问题，并为解决方案做了很多工作。我也尝试向其他人展示我在这里所做的事情。

主要问题是（如您所说），更改事件未正确触发。如果您键入 element.change() 之类的内容，也不会。

所以我找到了这个方法：

```
 function fireEvent(element,event)
{
    if (document.createEventObject)
    {
        // dispatch for IE
        var evt = document.createEventObject();
        return element.fireEvent('on'+event,evt);
    }
    else
    {
        // dispatch for firefox + others
        var evt = document.createEvent("HTMLEvents");
        evt.initEvent(event, true, true );
        return !element.dispatchEvent(evt);
    }
} 
```

来自[http://icebergcommerce.com/software/blog/iss/article/magento-configurable-products-setting-default-value-for-options/](http://icebergcommerce.com/software/blog/iss/article/magento-configurable-products-setting-default-value-for-options/)

然后我触发了更改方法：

```
 var obj = jQuery('#'+parentObj.attr('value')).get();
    Event.observe(obj[0],'change',function(){});
    fireEvent(obj[0],'change'); 
```

因此 obj 是下拉菜单中的普通 JS 选择对象。

我希望它有帮助！

# php - PHP - 将来自 func_get_args() 的参数传递给函数，提示？

> ID：14306997
> 
> 赞同：0
> 
> 时间：2013-01-13T18:58:50.113
> 
> 标签：php, string, function, arguments

我有一个在我的框架中创建子元素的公共方法，`addElement()`它的定义如下：

```
// addElement - adds an element (experimental version)
public function addElement() {
    if ($arguments = func_get_args()) {
        $class = "\\UI\\{$arguments[0]}";

        if (func_num_args() > 1) {
            $parameters = null;

            foreach (array_slice($arguments, 1) as $argument) {
                $parameters[] = (is_numeric($argument) ? $argument : "\"{$argument}\"");
            }

            $this->elements[($arguments[0] === HTML ? uniqid() : $arguments[1])] = new $class(implode(", ", $parameters));
        }
    }
} 
```

它被这样调用：

```
$article1 = new \UI\Article("article1");
$article->addElement(\UI\Aside, "aside1"); 
```

或者，或者（取决于您是否需要直接访问新元素）：

```
$article1 = new \UI\Article("article1");
$aside1 = $article->addElement(\UI\Aside, "aside1"); 
```

当我使用接受两个以上参数（元素的类型及其名称，内部方式）的方法时，问题就来了，它是这样的**：**

```
$article1 = new \UI\Article("article1");
$article1->addElement(\UI\Abbreviation, "abbr1", "RAM", "Random Access Memory"); 
```

使用此方法，传递给函数的参数实际上是：

```
"abbr1", "RAM", "Random Access Memory" 
```

我的意图是让这个字符串像您通常将参数传递给给定函数一样传递。我该如何执行（如果我需要重新构造函数也没关系，尽管理想情况下我只想添加丢失的位，如果这样进行是正确的）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:02:35.323

当你得到一个类的实例时，你可以使用[反射](http://php.net/reflectionclass)，并将一个参数数组传递给它，如下所示：

```
$ref = new ReflectionClass( $class);
$this->elements[($arguments[0] === HTML ? uniqid() : $arguments[1])] = $ref->newInstanceArgs( $parameters); 
```

你也不需要这个：

```
$parameters = null;

foreach (array_slice($arguments, 1) as $argument) {
     $parameters[] = (is_numeric($argument) ? $argument : "\"{$argument}\"");
} 
```

`if`您可以用上面放置在此之后的代码替换该语句的内容：

```
$parameters = array_slice( $arguments, 1); 
```